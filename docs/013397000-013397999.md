# StackOverflow 问答 13397000-13397999

# php - 在php中按字母顺序检索数据

> ID：13397002
> 
> 赞同：-4
> 
> 时间：2012-11-15T11:52:15.233
> 
> 标签：php

嗨，我对 php 非常陌生，我做了一些小项目（医疗保险系统），我创建了一个名为“chapa”的数据库，并创建了一个名为“drug”的表。

该表中有一个名为“des”的字段“des”=description 我的表字段是=codeno!qty!size!des!rate 我想要的只是“des”与其他字段按字母顺序显示

这意味着我输入到“des”的数据应该按字母顺序检索

我在问我可以在“des”中检索这些数据的方式谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:55:56.037

假设您正在执行一条 sql 语句，该语句将按“des”对结果进行排序

```
SELECT * FROM drug ORDER BY des ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:55:01.477

```
select * from chapa.drug order by des asc 
```

where`asc`显示升序或排序（相对于`desc`）

# c# - 依赖注入项目重构

> ID：13397003
> 
> 赞同：0
> 
> 时间：2012-11-15T11:52:19.190
> 
> 标签：c#, asp.net, dependency-injection, ninject

我目前正在重构一个已有几年的现有应用程序，以便我们可以使用依赖注入（我是新手）来注入我想要使用的同步提供程序。

我正在努力解决如何设置接口和工厂，因为我正在处理的类有多个构造函数。

我会尽我所能把这个布置好。我有一个**Sync**类，可通过应用程序的多个部分访问，该应用程序有 4 个都使用的构造函数。

**同步文件**

```
public class Sync : ISync
{
    private static Hashtable _locks = new Hashtable();

    private CSettings _cs = null;
    private RemovedCallback _callback = null;
    protected object _cObject = null;
    protected bool _isLocked = false;
    private DateTime _expires = DateTime.MinValue;

    public Sync() { }

    public Sync(CSettings cs) : this(cs, null) { }

    public Sync(CSettings cs, RemovedCallback callback)
    {
        Callback = callback;
        Settings = cs;
    }

    public Sync(string key)
    {
        Settings = new CSettings();

        Settings.Key = key;
    }

    public object Object
    {
        get { return Get(); }
        set { Set(value); }
    }

    public void Get()
    { 
    }

    public void Set()
    {
    }

    //other methods, some that reference Remove and Set
} 
```

**同步文件**

```
public interface ICacheSync : IDisposable
{
    object Get();

    void Set(object obj);
} 
```

**SyncProvider.cs**

```
public class SyncProvider : ISync
{
    public override object Get()
    {
         //some code
    }

    public override void Set(object obj)
    {
        //some code
    }
} 
```

在**Sync**类中，我注入的每个 Sync 提供程序的**Get**和**Set**方法都不同。Sync 类的其余部分需要保持不变。

我的最终目标是能够注入以不同方式使用**Get**和**Set**的不同同步提供程序。

目前，在整个项目中通过以下方式引用 Sync 类：

**示例 1**

```
using (Sync sync = new Sync(CSettings, ItemRemoved))
{
    //some code
} 
```

**示例 2**

```
using (Sync sync = new Sync(CSettings))
{
     sync.Remove();
} 
```

**示例 3**

```
using (Sync sync = new Sync(string))
{
    sync.Remove();
} 
```

我正在使用 Ninject 并尝试了一种创建接口和注入的方法，但它似乎不起作用，因为我总是以对象引用未设置为对象错误的实例而告终。

任何有关如何进行此操作的帮助或指导都将大大有助于帮助我更多地了解 DI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:59:12.227

在这种情况下，我建议您使用工厂，而不是依赖注入。

工厂本身可以注入到当前构造 Sync 实例的类中，但不是直接“新建”同步对象，而是将其委托给 SyncFactory：

```
using (Sync sync = this.syncFactory.Create(CSettings, ItemRemoved))
{
    //some code
}

using (Sync sync = this.syncFactory.Create(CSettings))
{
    //some code
}

using (Sync sync = this.syncFactory.Create(stringValue)
{
    sync.Remove();
} 
```

# c# - 将程序生成的数据与存储在 DB 中的数据进行比较的最佳方法？

> ID：13397004
> 
> 赞同：0
> 
> 时间：2012-11-15T11:52:20.033
> 
> 标签：c#, .net, sql, sql-server, .net-3.5

我正在编写一个 C# 应用程序来从网站上抓取数据，然后用它来更新数据库表。

我抓取的数据与数据库中的 10 行有关。如果数据实际发生了变化，我们只想插入数据。我已经编写了 SQL 过程来进行更改，但我不确定如何实现第一阶段 - 检查程序生成的数据（从网站上抓取）是否与 SQL Server 中已经存储的数据不同。

我目前的方法是在我的程序中使用代表数据的类，填充这些对象实例的字典（在这种情况下将有 10 个键值对），填充网站数据，然后获取 SQL 表数据，迭代所有 10 行，再次使用我的类创建另外 10 个对象，然后使用我在数据类中编写的名为 getHash() 的函数比较两组字典对象，例如：

有吗`websitedict.get(key1).getHash() == dbdict.get(key1).getHash()`？

ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:35:08.640

你想在哪个方面做到最好？

SQL 调用、CPU 使用率、内存使用率、CPU 和 SQL 服务器之间的带宽、最易读取、最易维护等...

对当前方法的一项内存改进是让 dbdict 成为`Dictionary<keytype, int>()`并且仅将`GetHash()`值存储在其中。

或者可能将`GetHash()`值存储在数据库中，因此您可以执行以下操作：

```
update table1 set col1 = "newvalueCol1", col2 = "newvalueCol2", colHash = @newHash
where id = @key1
   and colHash <> @newHash 
```

除此之外，我觉得我需要更多地了解情况才能提供更多帮助（对你来说太慢的地方，例如：代码、模式、更新）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:24:53.137

如果第 1 行有变化，为什么要处理 10 行。

```
Select count(*) from table1 where col1 <> "newVal1" or col2 <> "newVal2"  ...

Select count(*) from table2 where col1 <> "newVal1" or col2 <> "newVal2"  ... 
```

在您声明插入数据的问题中，然后在评论中声明更新。

如果更新那么简单

更新 table1 设置 col1 = "newvalueCol1" where col1 <> "newvalueCol1"

它实际上会更有效

```
update table1 set col1 = "newvalueCol1", col2 = "newvalueCol2" 
where col1 <> "newvalueCol1"
   or col2 <> "newvalueCol2" 
```

一旦你锁定了一个，如果只有一个发生了变化，那么更新两者的开销就会很小。

# android - ProgressDialog + 广播接收器

> ID：13397006
> 
> 赞同：2
> 
> 时间：2012-11-15T11:52:25.140
> 
> 标签：android, broadcastreceiver, progressdialog

再会！请帮忙！我如何加入`ProgressDialog`+ `BroadcastReceiver`.？我使用库 jsoup 在单独的线程中加载页面。作为格鲁吉亚：显示`ProgressDialog`。但是，如果您不想使用 Toast broadtsastretseiver 上网，那没有互联网。

这是代码活动：

```
package com.demo;

import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

@SuppressLint("SetJavaScriptEnabled")
public class ObedActivity extends Activity {
    WebView mWebView;
    ProgressDialog mProgress;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        this.registerReceiver(this.mConnReceiver,
                new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
        mWebView = (WebView) findViewById(R.id.www);
        mWebView.getSettings().setJavaScriptEnabled(true); 
        mWebView.setWebViewClient(new DemoClient());
        mWebView.setBackgroundColor(0);
        mWebView.setBackgroundResource(R.drawable.bg);
        mProgress = ProgressDialog.show(this, "Загружаю.", "Нужно подождать..."); 

        Thread downloadThread = new Thread( 
                new Runnable() {
                public void run() {
        Document doc = null;
        try {
            doc = Jsoup.connect("http://google.ru").get();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Elements ele = doc.select("div#sample");
        String html = ele.toString();
        mWebView.loadDataWithBaseURL(null, html, "text/html", "UTF-8", null);
            }
        }
        );

        downloadThread.start();
        }
    private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
            boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

            if(currentNetworkInfo.isConnected()){           
            }else{
                Toast.makeText(getApplicationContext(), "Not Connected", Toast.LENGTH_LONG).show();
            }
        }
    };
      private class ObedActivityClient extends WebViewClient 

      {
          @Override
          public boolean shouldOverrideUrlLoading(WebView view, String url) 
          {
              view.loadUrl(url);
              return true;
          }
          public void onPageFinished(WebView view, String url) {
              if(mProgress.isShowing()) {
                  mProgress.dismiss();
          }
          }
      }
      @Override
      public boolean onKeyDown(int keyCode, KeyEvent event) 
      {
          if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) 
        {
              mWebView.goBack();
              return true;
          }
          return super.onKeyDown(keyCode, event);
      }
} 
```

# azure - 少量实体与大量实体 - 这是多少个对象？

> ID：13397007
> 
> 赞同：1
> 
> 时间：2012-11-15T11:52:40.453
> 
> 标签：azure, azure-table-storage

我目前正在为使用 Azure 表存储的应用程序设计分区策略。

文档[Real World: Designing a Scalable Partitioning Strategy for Windows Azure Table Storage](http://msdn.microsoft.com/en-us/library/windowsazure/hh508997.aspx)中有一个很棒的指南，其中讨论了分区大小。

在优点与缺点表中，它比较`Small number of entities`和`Large number of entities`。

但是有多少对象真正被认为是“大数”和“小数”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:38:40.383

您正在查看一篇旧的（过时的）文章。由于自 2012 年 6 月以来新的可扩展性增强，Azure 存储的分区发生了变化，Microsoft 正在使用 SSD/新架构进行存储。

看看这篇文章，它没有回答你关于什么是“小数字”的问题，但它确实为你提供了你的“缩放目标”应该是什么。这意味着什么？这意味着 Microsoft Azure 存储应该扩展到这些目标，但您必须调整您的设计：

[http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)

例如，单个分区（在新的 Azure 存储上）可以扩展到每秒 2,000 个实体。您的分区策略取决于您的查询以及您需要的吞吐量。

# magento - Magento - 从它的 block_id 获取 cms 静态块的标题？

> ID：13397009
> 
> 赞同：7
> 
> 时间：2012-11-15T11:52:51.053
> 
> 标签：magento

我正在通过一个小部件实例插入一个 cms 静态块 - 我想从我的小部件模板中输出静态块标题及其内容。默认模板（app/design/frontend/base/default/template/cms/widget/static_block/default.phtml）只有：

```
<?php echo $this->getText(); ?> 
```

我将其更改为*getData()*以查看可以抓取的内容，如下所示：

```
[type] => cms/widget_block
[block_id] => 11
[module_name] => Mage_Cms
[text] => blahblahblah 
```

所以我猜唯一的方法是使用 block_id 来获取标题，但不能完全弄清楚如何。*我可以使用$this->getBlockId()*从那里获取 block_id - 但是我如何使用它来获取标题？

我认为以下可能有效，但它没有：

```
$blockid = $this->getBlockId();
$blocktitle = Mage::getModel('cms/page')->load($blockid, 'block_id')->getTitle(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T11:57:04.723

似乎以下作品：

```
$blockid = $this->getBlockId();
$block = Mage::getModel('cms/block')->load($blockid);
echo $block->getTitle(); 
```

在这里写出一个问题总是有帮助的，有一半的时间看到它写出来可以帮助我自己找到答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T05:48:57.507

如果您有几家商店，并且想要您所在的商店，那就是这样：

```
$title = Mage::getModel('cms/block')
    ->setStoreId(Mage::app()->getStore()->getId())
    ->load($blockId)
    ->getTitle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T11:01:53.740

另一种方法是在你的块上为它创建一个函数：

```
public function getContactWidgetHtml()
{
    $result = '';

    $widget = Mage::getModel('widget/widget_instance')->load(14);

    if ($widget && $widget->getId()) {
        $widgetBlock = $this->getLayout()
            ->createBlock(
                $widget->getType(),
                $widget->getTitle(),
                $widget->getWidgetParameters()
            );

        if ($widgetBlock) {
            $result = $widgetBlock->toHtml();
        }
    }

    return $result;
} 
```

然后使用以下命令将其显示在您的模板中：

```
echo $this->getContactWidgetHtml(); 
```

# c# - Predicates 或 Actions 是否有任何额外的属性或品质将它们与 Funcs 区分开来？

> ID：13397014
> 
> 赞同：2
> 
> 时间：2012-11-15T11:53:07.390
> 
> 标签：c#, .net, delegates, lambda, functional-programming

A`Predicate`只是 a`Func`返回一个布尔值：

```
Predicate<T1, T2, T3, ...,Tn> = Func<T1, T2, T3, ...,Tn, bool> 
```

而 an`Action`只是 a`Func`不返回值：

```
Action<T1, T2, T3, ...,Tn> = Func<T1, T2, T3, ...,Tn, void> 
```

**我的问题：**是否`Predicates`或`Actions`有任何额外的属性或品质来区分它们`Funcs`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:44:35.867

Predicate 只是用于 bool 返回类型的 Func 的一种特殊形式——即。它同构于`Func<X, bool>`。

不过，动作是完全不同的野兽。它说“这是一件可以做某事的事情”。换句话说，Action 将执行副作用。

Func 和 Predicate （可能至少）具有[引用透明度](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)的属性。它们可以表现为适当的数学函数。这就是说，对于接受类型 A 的元素并返回 B 的 Func a，它应该总是为同一个 A 返回相同的 B。这具有一些相当深刻、重要和非常有用的属性——特别是它使它们非常易于测试，非常易于推理且易于编写。

另一方面，动作必须执行副作用。副作用通常涉及排序问题，难以组合，并且是程序复杂性的重要来源。此外，他们回避类型系统，将这种复杂性隐藏在 void 后面。

Action 和 Func/Predicate 是根本不同的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:56:43.357

没有。没有任何。它们都只是委托类型。唯一的区别是有些方法采用类似的东西`Predicate<T>`（主要是较旧的 API），有些采用`Func<>`/ `Action<>`。`Func<>`/方法的一个优点`Action<>`是签名从名称中显而易见（即 a`Func<int,float,string>`接受 an`int`和 a`float`并返回 a `string`），但*仅此而已*。即使委托具有相同的*签名*，它们也不能直接互换（您不能将`Func<T,bool>`实例传递给采用 的方法`Predicate<T>`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:55:19.033

他们都只是代表。代表*不能*声明任何特殊的东西——它们实际上只是方法签名。

您不能向委托类型添加特殊功能 - 至少在 C# 中声明一个时。（可以想象，你可以在 IL 中，但我从未见过这样做。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T11:55:29.877

`Action<T>`不一样`Func<T, void>`：前者有效，后者无效。`void`不是有效的泛型类型参数。

`Predicate<T>`并且`Func<T, bool>`行为完全相同。但是，它们仍然是不同的类型，因此您不能*直接*将 a 传递`Predicate<T>`给带有 type 参数的函数`Func<T, bool>`。但是，只要您始终使用其中一种，您就不会看到差异。

# php - phpDocumentor2：未找到 XSLT

> ID：13397016
> 
> 赞同：2
> 
> 时间：2012-11-15T11:53:18.220
> 
> 标签：php, xslt, phpdoc

如果我调用 phpDocumentor 来生成文档，那么在 XSLT 转换开始之前一切正常。然后我收到以下消息：

```
[phpDocumentor\Plugin\Core\Exception]
The XSL writer was unable to find your XSLTProcessor; please check if you have 
installed the PHP XSL extension 
```

这非常令人困惑，因为**XSLT Support** for PHP is installed & **isactivated**。这是通过 Debian 终端获取的 PHP 信息的屏幕截图：

```
xsl
XSL => enabled
libxslt Version => 1.1.26
libxslt compiled against libxml Version => 2.7.7
EXSLT => enabled
libexslt Version => 1.1.26 
```

环境：

*   阿帕奇 2
*   PHP 5.3.3 (php5-cli / xslt-support 稍后安装)
*   Zend-Server 与 Zend Engine 2
*   phpDocumentor2（梨安装）

任何人都知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:33:02.067

最后我可以找到并解决问题：

问题是 CLI-PHP.ini 加载的扩展。

我通过将所有扩展（及其接口）复制到相同的目录来解决了这个问题。Zend 文件结构中的 1 个目录中的所有扩展（以及所有接口一起在其目录中）。

然后我将符号链接放入 CLI-config 目录*(/etc/php5/cli/)*中，以指向此扩展目录 *(usr/local/zend/lib/php_extension)* 以指定哪些扩展 ( *.so) 可用(！ ) 但是使用扩展名的接口 (* .ini) 我放入默认的 php5-extension 目录*(/etc/php5/conf.d/)*并在 CLI-php.ini 中注意到了这一点。这减少了 CLI 使用的扩展（即“双重包含”一些扩展）。

最后，我通过将接口（不是扩展名）复制到 php5-default 扩展目录*(/etc/php5/conf.d/)*中来激活 XSLT-Extension 。

现在我们系统上的所有 PHP5x 配置都可以使用相同的扩展，这些扩展只在系统中放置一次。现在它工作得很好。

我希望这会对某人有所帮助。

# iphone - IOS6 防止/限制放大 MKMapView

> ID：13397018
> 
> 赞同：5
> 
> 时间：2012-11-15T11:53:26.667
> 
> 标签：iphone, objective-c, ios6, mkmapview, mapkit

有没有办法防止/限制缩放。我想允许用户缩放到我设定的固定限制。选项：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated 
```

很恶心，因为首先你放大，当你完成后它会自动缩小。目标是在用户达到缩放限制时停止缩放，即使他继续进行手势。

在 iOS6 中从 MKMapView 派生是没有目的的，因为没有可以覆盖的 scrollView 方法:(

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:01:34.600

尝试这个：

```
[mapView setCenterCoordinate:myCoord zoomLevel:13 animated:YES]; 
```

# mysql - MySQL返回引用同一个表的行

> ID：13397020
> 
> 赞同：4
> 
> 时间：2012-11-15T11:53:29.757
> 
> 标签：mysql

假设我有一张看起来像这样的表格：

```
+----+--------------+-------+----------------+------------+
| id | product_name | price | bulk_reference | bulk_count |
+----+--------------+-------+----------------+------------+
| 1  | xxxx         | 11.99 | 0              | 0          |
+----+--------------+-------+----------------+------------+
| 2  | zzzz         | 22.99 | 0              | 0          |
+----+--------------+-------+----------------+------------+
| 3  |              |       | 2              | 10         |
+----+--------------+-------+----------------+------------+ 
```

我可以选择所有产品等，没问题。但是 - 我需要做的是返回所有产品，但行`WHERE bulk_reference > 0`需要返回行中未设置的`product_name`&的引用行值`price`......在同一个结果集中。

因此，例如，我的结果集应如下所示：

```
[0] => [id] = 1
       [product_name] = xxxx
       [price] = 11.99
       [bulk_reference] = 0
       [bulk_count] = 0

[1] => [id] = 2
       [product_name] = zzzz
       [price] = 22.99
       [bulk_reference] = 0
       [bulk_count] = 0

[2] => [id] = 3
       [product_name] = zzzz
       [price] = 22.99
       [bulk_reference] = 2
       [bulk_count] = 10 
```

我怎样才能只用 MySQL 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:48:58.603

我认为在你的情况下这会很好：

```
select
    P1.id,
    IF(bulk_reference>0,(select product_name from Products P2 where P2.id=P1.bulk_reference),P1.product_name) as product_name,
    IF(bulk_reference>0,(select price from Products P2 where P2.id=P1.bulk_reference), P1.price) as price,
    P1.bulk_reference,
    P1.bulk_count
from Products P1; 
```

这是[sqlfiddle链接](http://sqlfiddle.com/#!2/346a4/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:03:11.433

这应该这样做。我现在没有可能检查语法，但如果你在运行它时遇到问题，我会在稍后查看。

```
select id , 
      (if bulk_reference > 0 then (select p1.product_name from product p1 where p1.id = p3.bulk_reference)  else product_name end if) ,
      (if bulk_reference > 0 then (select p2.price from product p2 where p2.id = p3.bulk_reference) else price end if) , 
       bulk_reference, 
       bulk_count 
from products p3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:05:31.763

你可以试试这个查询：

```
SELECT * 
FROM table 
WHERE bulk_reference = 0

UNION

SELECT t1.id, t2.product_name, t2.price, t1.bulk_reference, t1.bulk_count 
FROM table t1
JOIN table t2 ON t2.id = t1.bulk_reference 
```

# python - 在 python 底图中填充国家

> ID：13397022
> 
> 赞同：22
> 
> 时间：2012-11-15T11:53:36.247
> 
> 标签：python, matplotlib, matplotlib-basemap

嗨，我正在尝试使用 pythons 底图绘制地图，其中一些国家/地区填充了某种颜色。

那里有快速简便的解决方案吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-08T20:40:09.780

正如@unutbu 已经说过的那样，Thomas 的帖子[正是](http://www.geophysique.be/2011/01/27/matplotlib-basemap-tutorial-07-shapefiles-unleached/)您所追求的。

如果您想使用 Cartopy 执行此操作，可以从[http://scitools.org.uk/cartopy/docs/latest/tutorials/using_the_shapereader.html](http://scitools.org.uk/cartopy/docs/latest/tutorials/using_the_shapereader.html)改编相应的代码（在 v0.7 中） ：

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt
import cartopy.io.shapereader as shpreader
import itertools
import numpy as np

shapename = 'admin_0_countries'
countries_shp = shpreader.natural_earth(resolution='110m',
                                        category='cultural', name=shapename)

# some nice "earthy" colors
earth_colors = np.array([(199, 233, 192),
                                (161, 217, 155),
                                (116, 196, 118),
                                (65, 171, 93),
                                (35, 139, 69),
                                ]) / 255.
earth_colors = itertools.cycle(earth_colors)

ax = plt.axes(projection=ccrs.PlateCarree())
for country in shpreader.Reader(countries_shp).records():
    print country.attributes['name_long'], earth_colors.next()
    ax.add_geometries(country.geometry, ccrs.PlateCarree(),
                      facecolor=earth_colors.next(),
                      label=country.attributes['name_long'])

plt.show() 
```

![输出](../Images/d56e602dcbb0946f96d339fc09a96861.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-15T11:06:22.640

受到 pelson 回答的启发，我发布了我的解决方案。我将由您决定哪个效果最好，因此我目前不会接受任何答案。

```
#! /usr/bin/env python

import sys
import os
from pylab import *
from mpl_toolkits.basemap import Basemap
import matplotlib as mp

from shapelib import ShapeFile
import dbflib
from matplotlib.collections import LineCollection
from matplotlib import cm

def get_shapeData(shp,dbf):
  for npoly in range(shp.info()[0]):
    shpsegs = []
    shpinfo = []

    shp_object = shp.read_object(npoly)
    verts = shp_object.vertices()
    rings = len(verts)
    for ring in range(rings):
        if ring == 0:
            shapedict = dbf.read_record(npoly)
        name = shapedict["name_long"]
        continent = shapedict["continent"]
        lons, lats = zip(*verts[ring])
        if max(lons) > 721\. or min(lons) < -721\. or max(lats) > 91\. or min(lats) < -91:
            raise ValueError,msg
        x, y = m(lons, lats)
        shpsegs.append(zip(x,y))
        shapedict['RINGNUM'] = ring+1
        shapedict['SHAPENUM'] = npoly+1
        shpinfo.append(shapedict)

    lines = LineCollection(shpsegs,antialiaseds=(1,))
    lines.set_facecolors(cm.jet(np.random.rand(1)))
    lines.set_edgecolors('k')
    lines.set_linewidth(0.3)
    ax.add_collection(lines)

if __name__=='__main__':

  f=figure(figsize=(10,10))
  ax = plt.subplot(111)
  m = Basemap(projection='merc',llcrnrlat=30,urcrnrlat=72,\
            llcrnrlon=-40,urcrnrlon=50,resolution='c')
  m.drawcountries(linewidth=0.1,color='w')

  sfile = 'ne_10m_admin_0_countries'

  shp = ShapeFile(sfile)
  dbf = dbflib.open(sfile)
  get_shapeData(shp,dbf)

  show()
  sys.exit(0) 
```

这是结果

![以不同颜色填写国家/地区的示例](../Images/54be8421752c1f4805dd8e8894fd9904.png)

这是我的示例，如何以正确的颜色填写阿尔巴尼亚（我知道不是很优雅；））。

```
 #HACK for Albania
  shpsegs = []
  shpinfo = []

  shp_object = shp.read_object(9)
  verts = shp_object.vertices()
  rings = len(verts)
  for ring in range(rings):
      if ring == 0:
          shapedict = dbf.read_record(9)
      name = shapedict["name_long"]
      continent = shapedict["continent"]
      lons, lats = zip(*verts[ring])
      if max(lons) > 721\. or min(lons) < -721\. or max(lats) > 91\. or min(lats) < -91:
          raise ValueError,msg
      x, y = m(lons, lats)
      shpsegs.append(zip(x,y))
      shapedict['RINGNUM'] = ring+1
      shapedict['SHAPENUM'] = npoly+1
      shpinfo.append(shapedict)
  lines = LineCollection(shpsegs,antialiaseds=(1,))
  if name == 'Albania':
    lines.set_facecolors('w')
  lines.set_edgecolors('k')
  lines.set_linewidth(0.3)
  ax.add_collection(lines) 
```

在完成所有其他形状之后执行此操作很重要。也许您可以摆脱这段代码的某些部分，但正如我所说，这对我来说已经足够了。

对于我的应用程序，我按名称或大陆为国家着色，因此这些行：

```
 name = shapedict["name_long"]
    continent = shapedict["continent"] 
```

我使用的数据来自这个网站： http: [//www.naturalearthdata.com/](http://www.naturalearthdata.com/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-06-18T10:24:58.093

更新 Python 3 的@pelson 答案：

```
import cartopy.crs as ccrs
import matplotlib.pyplot as plt
import cartopy.io.shapereader as shpreader
import itertools
import numpy as np

shapename = 'admin_0_countries'
countries_shp = shpreader.natural_earth(resolution='110m',
                                        category='cultural', name=shapename)

print(countries_shp)

# some nice "earthy" colors
earth_colors = np.array([(199, 233, 192),
                         (161, 217, 155),
                         (116, 196, 118),
                         (65, 171, 93),
                         (35, 139, 69),
                        ]) / 255
earth_colors = itertools.cycle(earth_colors)

ax = plt.axes(projection=ccrs.PlateCarree())

for country in shpreader.Reader(countries_shp).records():
    print(country.attributes['NAME_LONG'], next(earth_colors))
    ax.add_geometries(country.geometry, ccrs.PlateCarree(),
                      facecolor=next(earth_colors),
                      label=country.attributes['NAME_LONG'])

plt.show() 
```

# css - Flex Box 在 Safari 中不起作用

> ID：13397023
> 
> 赞同：1
> 
> 时间：2012-11-15T11:53:38.017
> 
> 标签：css

我正在努力理解弹性框，并且在 Safari 中测试 CodePen 上的代码时似乎遇到了问题。请看一下并帮助我了解我没有正确执行弹性框的原因。

[http://codepen.io/pertrai1/full/FKcGJ](http://codepen.io/pertrai1/full/FKcGJ)

谢谢

**更新：**我的用例是我正在编写一个教程，向我展示如何使用弹性框。我期望的是，当我将弹性框用于选择器时，每个 div 应该在父 div 中彼此相邻对齐，而不必使用浮点数。现在我看不到这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:58:33.727

我[在 codepen 上有一个工作版本](http://codepen.io/anon/full/kcLGu)。我认为您只是在遵循旧教程。[这个链接有一个很好的。](http://umaar.github.com/css-flexbox-demo/)还要记住，默认情况下，子元素从其父元素继承其属性。似乎有很多不必要的代码。也许您可以解释一下您还想达到什么目标？

# jsp - JSP包括：使用jsp的模板，所以重复的代码包含在每个页面上

> ID：13397026
> 
> 赞同：2
> 
> 时间：2012-11-15T11:53:55.247
> 
> 标签：jsp, templates, servlets, web, tags

我是 jsp 的新手，因此开始在每个页面上使用静态重复代码对我的项目进行编码。例如，在我的每个页面的头部部分，我检查是否有当前用户登录，如果有，那么我在正文部分使用他们的名字，如果没有，我重定向到登录页面。

所以在我的页面上我想要以下内容：

```
<%@ page language="java" 
         import="com.ptm.UserBean"
 %> 
<!DOCTYPE html>
<html lang="en">
<head>
<title> this is my title </title>
<jsp:include page="head-section.jsp" >
</head>
<body >
<jsp:include page="header.jsp" >
</body>
</html> 
```

在 head-section.jsp 我有一些 html 导入 jquery 和我的 css 表，然后是一个 jsp 代码块，它依赖于上面索引页面上的 UserBean 导入，然后是一些 javascript

header.jsp 包含使用在 head-section.jsp 代码块中设置的 jsp 变量。

所以我的问题是，我包含的这些单独的 jsp 不能单独工作，但是当包含时应该与页面一起工作，这减少了我拥有的重复代码的数量。这是最好的方法吗？我听说过标签文件，但我不确定如何实现它。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:07:30.717

标记文件绝对是一个不错的选择，[而且它们非常易于使用](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html)。很好的是，您可以向它们发送参数以提高可重用性。

这是基本步骤（来自教程）：假设您将标签存储在 /WEB-INF/tags 中（作为 .tag 文件），您需要在 jsp 中包含以下行

```
<%@ taglib tagdir="/WEB-INF/tags" prefix="h" %> 
```

标签文件（我们称之为`response.tag`）可能看起来像

```
<%@ attribute name="name" required="true" %>
<h2>Hello, ${name}!</h2> 
```

这意味着它需要一个名为 name 的参数。之后，您将其称为

```
<h:response name="world"/> 
```

这将扩展到

```
<h2>Hello, world!</h2> 
```

在输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:56:10.113

您可以使用[`include`](http://docs.oracle.com/cd/E19159-01/819-3669/bnajb/index.html)指令：

```
<jsp:include page="..." /> 
```

对于静态资源，您应该使用：

```
<%@ include file="filename" %> 
```

# java - 有没有推荐的脚本或工具来重命名所有变量和方法名称？

> ID：13397033
> 
> 赞同：2
> 
> 时间：2012-11-15T11:54:29.823
> 
> 标签：java, variables, refactoring, obfuscation, automated-refactoring

我想知道是否有任何工具或脚本可以重命名一段代码中的所有变量和方法/函数名称（我特别对 java 代码感兴趣，但欢迎推荐其他语言）。

我基本上不喜欢使用原始变量/方法名称（也许我太偏执=D）在网络（堆栈溢出、论坛等）上发布我的代码，我想避免手动更改它们并且可能有一些不一致。

所以我会对在批处理中进行整个重构的东西（所有变量和所有函数名）感兴趣，并且我可以只应用于一段代码（我不想/不需要应用于整个文件）

我环顾四周，但找不到任何东西（也许我一直在使用错误的关键字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:07:53.577

您正在寻找的实际上是一个混淆工具，它使人们更难以反编译和分析您的代码一旦分发。

看看[ProGuard](http://proguard.sourceforge.net/) ( [StackOverflow](https://stackoverflow.com/tags/proguard/info) )，它用于最小化和混淆编译的 Java 代码。

编辑：哎呀，刚刚注意到您想要混淆实际的 Java 代码，而不是字节码。我的错。在这种情况下，我可能会考虑手动进行。无论如何，将大量代码发布到论坛可能不会提高获得有用答案的机会。证明问题的小块是要走的路，IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:39:50.053

你想要一个混淆工具。请参阅我们对源代码进行操作的[Java 混淆器。](http://www.semanticdesigns.com/Products/Obfuscators/JavaObfuscator.html)

如果使用得当，您可以将变量“重命名”为打乱的名称（甚至是您选择的名称），并且最终仍会得到功能正确的可编译和运行的代码。

# java - Heroku 中的 SSL 重定向

> ID：13397034
> 
> 赞同：2
> 
> 时间：2012-11-15T11:54:31.147
> 
> 标签：java, ssl, heroku

我在让我的 Java Web 应用程序在 Heroku 上运行时遇到了很多麻烦。

这就是我所拥有的：

一个使用 Spring Security 的 Java Web 应用程序（标准 War 文件），在我的 web.xml 中有一个安全约束部分，如下所示：

```
 <security-constraint>
        <web-resource-collection>
            <web-resource-name>SSL URLs</web-resource-name>
            <url-pattern>/j_spring_security_check</url-pattern>
            <url-pattern>/secure/account/create</url-pattern>
            <url-pattern>/register</url-pattern>
            <url-pattern>/login/*</url-pattern>
            <url-pattern>/</url-pattern> 
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint> 
```

当我将 WAR 文件部署到 Heroku（使用 Atlassian Bamboo 的 Heroku 部署插件）并且应用程序启动时，我最终在浏览器中收到“重定向过多”错误 - 看起来它与在https 和 http 但我不知道我需要做什么来修复它。

我现在只想使用搭载 SSL，因为 SSL 插件对于我的爱好项目来说非常昂贵（每月 20 美元）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T17:20:02.137

我通过结合使用`requires-channel`Spring Security 配置和 Tomcat 的`RemoteIpValve`. 如果您不使用 Spring Security，配置`RemoteIpValve`应该就足够了（以下假设您使用的是优秀`webapp-runner`的容器）我想 jetty-runner 有一个等价物，但我不知道......

问题是 Heroku 的 web/路由层处理 SSL，并将请求作为纯 HTTP 代理到您的 webapp。因此，Tomcat 不知道请求在其他地方受到保护（SSL 卸载）本质上会通过查看代理服务器设置的 HTTP 标`RemoteIpValve`头来覆盖 Tomcat 看到的协议、端口和 IP 地址（以及如何评估）`request.isSecure()`处理了 SSL。

使用以下内容创建一个`context.xml`：

```
<Context>
  <Valve className="org.apache.catalina.valves.RemoteIpValve" remoteIpHeader="x-forwarded-for" protocolHeader="x-forwarded-proto" portHeader="x-forwarded-port"/>
</Context> 
```

这三个标头（`x-forwarded-for`、`x-forwarded-proto`和`x-forwarded-port`）由 Heroku 的路由层自动发送。

接下来，确保将文件复制到您的 maven 目标目录中的某个位置（我将其放在与`webapp-runner`自身相同的目录中）。在`pom.xml`：

```
<resources>
  <resource>
    <directory>${basedir}/src/main/resources/META-INF</directory>
    <includes>
      <include>context.xml</include>
    </includes>
    <targetPath>${project.build.directory}/dependency</targetPath>
  </resource>
</resources> 
```

最后，确保 webapp-runner 指向 context.xml（例如，使用支持`context-xml`参数的 webapp-runner 7.0.30.1）。在你的`Procfile`：

```
web: java $JAVA_OPTS -jar target/dependency/webapp-runner.jar --context-xml target/dependency/context.xml ...etc... 
```

最后一点，我使用 Spring Security `requires-channel`on`<sec:intercept-url>`通过翻转环境变量在 HTTP 和 HTTPS 之间来回切换 - 在我的本地开发框上取消设置以便于配置，在 Heroku 上设置（通过`heroku config`）有选择地在不同环境中强制 SSL。

希望这对你有用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-18T16:33:21.867

**我在使用webapp-runner**时遇到了完全相同的问题，并通过简单地使用来修复它，如此[处](https://github.com/jsimone/webapp-runner#using-tomcat-behind-a-reverse-proxy-server)`--proxy-base-url https://example.com`所述

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-21T01:59:34.690

@bimsapi 提供的解决方案对我有用。我使用这个解决方案遇到了两个问题。一旦我解决了这些问题，它就会完美运行。

首先，我必须将 context.xml 文件直接放在 war 文件的根目录下的 META-INF 目录中。

其次，您提供给 --context-xml 属性的 context.xml 文件的路径是文件系统上根目录的相对路径，而不是 war 文件。如--context.xml ./tartget/myapp/META-INF/context.xml。

在我给出 --context.xml META-INF/context.xml 之前这是错误的。

# oracle - UUID 最大字符长度

> ID：13397038
> 
> 赞同：139
> 
> 时间：2012-11-15T11:54:39.143
> 
> 标签：oracle, primary-key, uuid

我们使用 UUID 作为 out oracle DB 的主键，并尝试为 VARCHAR 确定合适的最大字符长度。显然这是 36 个字符，但我们注意到生成的 UUID 比这更长 - 最多 60 个字符。有谁知道适合 UUID 的最大字符长度？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-11-15T20:07:02.320

[RFC4122 的第 3 节](https://www.rfc-editor.org/rfc/rfc4122#section-3)提供了 UUID 字符串表示的正式定义。它是 36 个字符（32 个十六进制数字 + 4 个破折号）。

听起来您需要弄清楚无效的 60 字符 ID 的来源并决定 1）是否要接受它们，以及 2）这些 ID 的最大长度可能基于用于生成它们的任何 API。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-09-24T18:13:43.907

顺便说一下，这是定义为 CHAR 36 的完美字段，而不是 VARCHAR 36，因为每个值都具有完全相同的长度。而且您将使用更少的存储空间，因为您不需要存储每个值的数据长度，只需存储值。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-07-31T20:43:58.903

如今，大多数数据库都具有本机 UUID 类型，以便更轻松地使用它们。如果您没有，它们只是 128 位数字，因此您可以使用 BINARY(16)，如果您经常需要文本格式，例如用于故障排除，则添加一个计算列以从二进制列自动生成它. 没有充分的理由存储（大得多的）文本表单。

# domain-driven-design - DDD：对非聚合根的引用的解决方案

> ID：13397041
> 
> 赞同：12
> 
> 时间：2012-11-15T11:54:57.403
> 
> 标签：domain-driven-design, aggregateroot

我有两个聚合根和两个非聚合根实体：

![实体关系](../Images/505b1df0aa344be0dd8fbf400dcebe0d.png)

我知道，这种关系`D -> B`违反了 DDD 原则。

我听说，在大多数情况下，解决方案是使引用的实体成为新的聚合根。

但是，如果**B 是A的*真正孩子***（B 不能没有 A），那么让 B 成为一个新的聚合根真的是一种选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:08:00.123

我同意你的观点，有时将一个实体与其集合分开是没有意义的，因为它是如此自然地融入其中。这就是为什么我没有完全接受某些人[推荐](http://dddcommunity.org/sites/default/files/pdf_articles/Vernon_2011_1.pdf)的“小聚合”方法的原因之一。

在这种情况下，您可以做的是通过遍历 A 的实例来获取对 B 的引用，而不是直接获取它。毕竟，如果 B 没有 A 就不能存在，那么聚合之外的对象就没有理由知道某个特定的 B 而不知道它的 A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T11:18:56.327

首先，这不是 DDD 思维，这是 RDBMS 思维。在 DDD 中，您可以像在现实世界中一样对业务流程进行建模，您没有一对多等概念。所以忘记数据库、外键等等。

你的有界上下文（BC）是什么？每个聚合本身就是一个 BC，因此即使它们的名称相同，它们也可以对概念有不同的表示。

如果我正确理解，似乎 ABCD 是单个聚合的一部分。这并不意味着它们仅在该聚合中且仅在该形式中定义。但是，如果 C 在其他一些 BC 中是完全成熟的 AR，那么在此上下文中很可能仅表示为 id 或一些属性（接口对于这些东西非常方便）。因此，即使它们都被命名为 C，它们也是不同的，只有特定上下文所需的行为。

DDD 适用于许多 BC，模型仅对一个 BC 有效。这意味着在您的应用程序中，您将根据每个 BC 有多个 A 、B 、C 定义，并且每个定义可能略有不同。这意味着实际上并不只有一种模型适用于所有情况（我在这里不是在谈论 CQRS，只是在谈论 DDD）。

我对这个领域了解不多，实际上想出更具体的东西。但简而言之，尝试以事物的本来面目和实际工作的方式表示事物。

# ruby-on-rails - 在 ActionMailer 中访问控制器助手

> ID：13397050
> 
> 赞同：1
> 
> 时间：2012-11-15T11:55:27.160
> 
> 标签：ruby-on-rails

我想在我的电子邮件模板中访问一个辅助方法。助手在控制器中定义，并且是一个`:helper_method`. 我怎样才能做到这一点？我知道如何在 ActionMailer 中使用帮助*文件*，但这是不同的。

# 编辑

我不想将帮助程序的结果传递给 mailer 方法，因为我必须在每个邮件方法上都这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:00:11.593

只需将 current_user 传递给 mailer 方法。邮件程序不应访问会话变量，并且您的 current_user 方法取决于会话变量。如果您将电子邮件作为后台进程发送怎么办？谁将成为 current_user ？

```
MyMailer.hello_email(current_user).deliver 

class MyMailer < ActionMailer::Base 
  def hello_email(user)
    @user = user
  end
end 
```

# sql-server-2008 - 在 TSQL 中连接 int 和 nvarchar 列

> ID：13397059
> 
> 赞同：4
> 
> 时间：2012-11-15T11:55:56.130
> 
> 标签：sql-server-2008, tsql

我正在使用 MSSQL EXPRESS 2008，我正在尝试使用以下查询将记录的 ID 列与其描述列连接起来

```
SELECT CAST(GotoviProizvodi.ID as nvarchar(4)) + ' - ' + CAST(GotoviProizvodi.Opis as nvarchar(max)) AS Opis 
FROM GotoviProizvodi,Recept 
WHERE Recept.ID=@ID 
  AND Recept.Proizvod=GotoviProizvodi.Opis

GotoviProizvodi.ID is defined in the schema as int   -- the ID column
GotoviProizvodi.Opis is defined as nvarchar(200)   -- the description column 
```

但是，当我尝试执行查询时，它会产生以下结果：

> 消息 245，级别 16，状态 1，过程 GetProizvodByReceptId，第 2 行将 nvarchar 值“Test”转换为数据类型 int 时转换失败。

当我明确告诉它将其转换为 nvarchar 时，它为什么要尝试将其转换为 int？任何解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:00:13.843

您确定错误与演员阵容有关，而不是与 where 条件有关吗？检查列类型是否匹配

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T14:32:25.327

我想这会做：

```
SELECT (CONVERT(NVARCHAR, GotoviProizvodi.ID) + ' - ' + GotoviProizvodi.Opis) AS Opis 
FROM GotoviProizvodi,Recept 
WHERE Recept.ID=@ID 
  AND Recept.Proizvod=GotoviProizvodi.Opis 
```

# git - 将提交移动到新分支而不触及索引或工作树

> ID：13397061
> 
> 赞同：1
> 
> 时间：2012-11-15T11:56:00.513
> 
> 标签：git, version-control, commit

这里有一个父问题：[使用 Git 将最近的提交移动到新分支](https://stackoverflow.com/questions/1628563/move-recent-commit-to-a-new-branch)

我接手了一个项目，该项目的工作树充满了仍需要组织的文件——有些是指正在进行的工作任务；其他都完成了。我最近提交了已完成的工作，但这不是用于生产的。我怎样才能谨慎地将它移动到一些新的分支而不搞砸我当前的树？

```
I'd like to change

Working tree - A - B - C - D - E

to

Working tree - B - C - D - E
              /
             A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:28:46.887

```
git branch tmp
git reset --soft B 
```

将 HEAD（并且只有 HEAD）移动到（用 ' ' 分支`B`标记后）`A``tmp`

有关更多信息，请参阅“[实际用途`git reset --soft`？](https://stackoverflow.com/a/5203843/6309) ” `reset --soft`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:28:16.147

与`checkout -b "name of branch"`您一起创建一个新的本地分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T17:22:09.787

先在某处写A的SHA1，以后会用到。

`git checkout <E's SHA1>`
`git rebase -i HEAD~6`（6 是从 E 到 A 的提交距离加一）

在编辑器中删除 A 的行并保存。

现在你有了这个：

```
 Working tree - B - C - D - E 
```

现在我们要创建一个到 A 的分支，从 B 开始：

`git checkout <B's SHA1>`
`git branch BAbranch`（或者你想怎么称呼它）
`git checkout BAbranch`
`git cherry-pick <A's SHA1>`

现在你有了这个：

```
 Working tree - B - C - D - E

                  \

                     A 
```

# javascript - WinJS 在启动时加载配置数据

> ID：13397067
> 
> 赞同：2
> 
> 时间：2012-11-15T11:56:09.067
> 
> 标签：javascript, microsoft-metro, winjs, windows-store-apps

我正在使用 HTML/CSS/JS 和 WinJS 框架为 Windows 商店开发应用程序。

我的应用程序需要在启动时加载配置数据，如果在线则通过网络加载，如果不在线则在本地加载。

我的问题是，理想情况下，应用程序应该只显示带有进度控件的启动屏幕，直到数据加载完毕。但我不知道将我的加载代码放在哪里来实现这一点。

我可以做这样的事情：

```
(function () {
    "use strict";

    WinJS.Binding.optimizeBindingReferences = true;

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;
    var nav = WinJS.Navigation;

    function loadConfig() {
        return WinJS.xhr({ url: myURL }).then(
            function (xhr) {
                // parse response stuff
            },
            function (xhr) {
                // do error handling stuff
            }
        );
    }

    function initializeUI(args) {
        // The generated code for setting up the navigation controller, but moved to a seperate function
        args.setPromise(WinJS.UI.processAll().then(function () {
            if (nav.location) {
                nav.history.current.initialPlaceholder = true;
                return nav.navigate(nav.location, nav.state);
            } else {
                return nav.navigate(Application.navigator.home);
            }
        }));
    }

    app.onactivated = function (args) {
        if (args.detail.kind === activation.ActivationKind.launch) {
            if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {

                loadConfig().then(
                    function () {
                        initializeUI(args);
                    }
                );
            } 
            if (app.sessionState.history) {
                nav.history = app.sessionState.history;
            }
            if ( config ) // check if configuration exists to prevent calling this twice
                initializeUI(args)
        }
    };
    app.start();
})(); 
```

但这会在加载数据之前显示我的“default.html”页面，所以我必须在“default.html”中使用我的启动图像并插入一个进度控件。

这感觉不是我的问题的正确解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:40:06.583

您的解决方案看起来不错。您应该查看[扩展初始屏幕示例](http://code.msdn.microsoft.com/windowsapps/Splash-screen-sample-89c1dc78)，以获得正确设置扩展初始屏幕的感觉，使其无缝。

你觉得哪里不对？

另一个建议的调整：更改您的 loadConfig 调用，以始终返回一个承诺，即使数据存储在本地；这样，您的代码可以以相同的方式流动，而您永远不需要您的

```
if(config) {
    initializeUI(args);
} 
```

代码。

# css - 缩小css时，粗体为700，正常为400

> ID：13397069
> 
> 赞同：1
> 
> 时间：2012-11-15T11:56:18.570
> 
> 标签：css, performance, minify

当我使用在线 css 工具（例如[https://csscompressor.net/](https://csscompressor.net/) ）缩小我的 css 时，工具将 font-weight:bold 转换为 font-weight:700; , font-weight:normal to font-weight:400; 为什么？700 或 400 用于高性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:09:38.017

在 css 中，该`font-weight`属性是从 100 到 900 的 9 点数字刻度。

为方便起见，定义了特殊名称`normal`和`bold`，并赋予值 400 和 700。

（其他文本值`inherit`、`bolder`、 和`lighter`是根据父元素的权重计算为“与父元素相同”、“列表中的下一个较高值`100, 400, 700, 900`”和“列表中的下一个较低值`100, 400, 700, 900`”）

有关更多详细信息，请参阅[http://www.w3.org/TR/CSS21/fonts.html#font-boldness](http://www.w3.org/TR/CSS21/fonts.html#font-boldness)

（所以，当你写的时候`font-weight:bold`，你的意思是`font-weight:700`，正如评论所指出的，后者是一个短一个字符，所以更“最小”......）

# hibernate - 映射属性的休眠投影

> ID：13397070
> 
> 赞同：1
> 
> 时间：2012-11-15T11:56:21.327
> 
> 标签：hibernate

在休眠时投影：

```
 Criteria criteria = session.createCriteria(XYZ.class)
                    .add(Restrictions.eq("XYDId", 1)).add(Restrictions.eq("active", Boolean.TRUE));
criteria.setProjection(Projections.property("abc.id").as("id"));
            criteria.setProjection(Projections.property("abc.timezoneKey").as("TIMEZONEKEY"));
            criteria.setResultTransformer(Transformers.aliasToBean(abc.class)); 
```

抛出异常

`could not resolve property: abc.timezoneKey of: com.locaid.gfe.common.entities.XYZ`

尽管在 XYZ 实体中 abc 作为属性存在，而在 abc 中 timezoneKey 作为属性存在。任何人都可以帮助我获得我所缺乏的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:31:07.733

您需要`alias`为该`abc`属性添加一个

```
Criteria criteria = session.createCriteria(XYZ.class, "xyz").createAlias("xyz.abc", "xabc").add(Restrictions.eq("xyz.XYDId", 1)).add(Restrictions.eq("xyz.active", Boolean.TRUE));
criteria.setProjection(Projections.property("xabc.id").as("id"));
criteria.setProjection(Projections.property("xabc.timezoneKey").as("TIMEZONEKEY"));
criteria.setResultTransformer(Transformers.aliasToBean(abc.class)); 
```

你也可以看看[这个](https://stackoverflow.com/questions/8533466/hibernate-criteria-for-many-to-many-entity-property)。

# c# - 如何将“删除”事件与按钮相关联？

> ID：13397071
> 
> 赞同：1
> 
> 时间：2012-11-15T11:56:22.243
> 
> 标签：c#, asp.net, gridview

我知道我可以在 gridview 中使用“删除”链接，但在我的情况下它不适合。我标记了我的删除按钮。

![在此处输入图像描述](../Images/4e3a4dc85a67ad2d2633dce9505c1acf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:59:16.453

使用命令字段而不是链接按钮。或者你甚至可以使用看起来像一个按钮的 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:59:00.570

您需要在网格中选择一行并为删除按钮执行 onclicke 事件。使其删除网格中的选定行，并将触发 rowdeleting 事件。

您不能将按钮直接绑定到 rowdeleting 事件。

# c# - 从 TextBox 中删除重复项，如果 line after = line before

> ID：13397081
> 
> 赞同：0
> 
> 时间：2012-11-15T11:56:48.680
> 
> 标签：c#, textbox, duplicates

我有一个文本框，如果前行 = 后行，我想删除行。

我有这样的文字：

```
Ab cd ...

Ef Gss ...
EE oo ...
EE oo ... // delete this line
qq ss ff

ok ee .. 
```

我尝试了许多代码，但它删除了我所有相同的行。我只想删除下同一行。空行应始终存在。

我使用的代码：

```
richTextBox1.Text = string.Join( Environment.NewLine, richTextBox1.Lines.Distinct()); 
```

或者：

```
for (int tx = 0; tx < richTextBox1.Text.Length; tx++)
        {
            for (int tx1 = tx + 1; tx1 < richTextBox1.Text.Length; tx1++)
            {
                if (richTextBox1.Lines[tx] == richTextBox1.Lines[tx1])
                   // something like  richTextBox1.Lines[tx1].RemoveAt(tx1);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:13:16.447

试试这个 -

```
 string[] temp = richTextBox1.Lines;
      for (int i= 0; i< richTextBox1.Lines.Length - 1; i++)
      {
          if (richTextBox1.Lines[i] == richTextBox1.Lines[i+ 1]
               && rt.Lines[i] != String.Empty)
          {
              temp[i] = null;
          }
      }
      richTextBox1.Lines = temp.Where(a => a != null).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:11:48.377

试试这个：

```
textBox1.Text = string.Join(Environment.NewLine, textBox1.Lines.Distinct()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:17:38.137

您发布的代码看起来很适合删除下一行，但您正在删除其余文本中等于第一个循环中的行的所有行。所以在你的代码中

```
xyz//line0
abc//line1
abc//line2
//line3
hjk//line4
abc//line5 
```

行：2,5 将被删除，如果我理解正确，您只想删除第 2 行。

我的例子

```
line1 text //line index 0
abc //line index 1
abc//delete this line, index 2
abc//delete this line, index 3 
```

第1步。行索引 2 已删除

```
line1 text //line index 0
abc //line index 1
//deleted abc line, previous index 2, 
abc//delete this line, index 2, previous index 3 
```

但是删除行索引 2 后的 tx 将增加，因此您将位于基本文本第 3 行，因此我们需要添加 tx--

```
for (int tx = 0; tx < richTextBox1.Text.Length - 1; tx++)
    {
            if (richTextBox1.Lines[tx] == richTextBox1.Lines[tx+1])
            {
               // something like  richTextBox1.Lines[tx+1].RemoveAt(tx);
               tx--;
            }
        }
    } 
```

如果你不想删除空行，你应该在上面修改 if 语句

```
if(!String.IsNullOrEmpty(richTextBox1.Lines[tx]) &&richTextBox1.Lines[tx] == richTextBox1.Lines[tx+1]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T12:55:14.507

我认为 yield 运算符解决了这个问题：

```
public static IEnumerable<String> GetDistinctLines(IEnumerable<String> lines)
{
    string currentLine = null;
    foreach (var line in lines)
    {
        if (line != currentLine)
        {
            currentLine = line;
            yield return currentLine;
        }
    }
} 
```

然后

```
richTextBox1.Lines = GetDistinctLines(richTextBox1.Lines).ToArray(); 
```

# sql-server-2008-r2 - 使用光标我必须更新表格

> ID：13397083
> 
> 赞同：0
> 
> 时间：2012-11-15T11:56:57.517
> 
> 标签：sql-server-2008-r2

我需要帮助！

我有一张这样的桌子：

```
itemcode itemiicode itemordercode serialnum cpserialnum
4         2           4           21         21
5         2           5           -1         -1
6         3           6           14         14
7         4           7           15         15
8         5           8           41         41
9         6           9           72         72
10        6           10          -1         -1
11        6           11          -1         -1 
```

我想要一个使用光标的结果表，如下所示

```
itemcode itemiicode itemordercode serialnum cpserialnum
4         2            4          21         21
5         2            5          -1         21
6         3            6          14         14
7         4            7          15         15
8         5            8          41         41
9         6            9          72         72
10        6            10         -1         72
11        6            11         -1         72 
```

itemcode 是主键使用游标我们必须更新表

请帮忙！感谢和问候哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:22:05.747

如我所见，您想更新列：cpserialnum。

规则是：如果*当前值为 -1*，则应插入*前一个值。*

为此，您不需要使用`CURSOR`，但可以使用简单的内部选择，如下所示：

```
UPDATE items
SET cpserialnum =
(SELECT TOP 1 cpserialnum 
 FROM items innerItems
 WHERE innerItems.itemordercode <= items.itemordercode
 AND cpserialnum != -1
ORDER BY itemordercode DESC)
 FROM items

SELECT * FROM items 
```

这是一个[SQLFiddle](http://www.sqlfiddle.com/#!3/87249/5)演示。

# html - 无法在面包屑导航中添加连续边框

> ID：13397087
> 
> 赞同：0
> 
> 时间：2012-11-15T11:57:01.363
> 
> 标签：html, css

我正在尝试修改此处给出的面包屑导航样式 [http://css-tricks.com/triangle-breadcrumbs/](http://css-tricks.com/triangle-breadcrumbs/)

我想要 li 周围的边框，但是当我放置边框时它不是连续的。我添加了相同的图像和小提琴

小提琴 - [http://jsfiddle.net/K7ChN/](http://jsfiddle.net/K7ChN/)

现在只有 li 有边界

```
.breadcrumb li {
    border : 2px solid #8ebed1;
} 
```

![在此处输入图像描述](../Images/7adbfc1fb96c693930d650c06998c46f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:01:57.747

您将无法这样做，因为三角形是在 CSS 中添加的。这个三角形是通过设置适当的边界来制作的......

也许有背景图像？

# c# - 将文件从 db 移动到文件系统中的任何问题？

> ID：13397093
> 
> 赞同：1
> 
> 时间：2012-11-15T11:57:14.753
> 
> 标签：c#, .net

我们有一个可怕的系统可供使用，其中一个缺陷是数据库中的文件经常更改。我们计划将文件移动到文件系统，并在数据库中存储一个文件路径。这样做时我们应该注意什么吗？当多个请求需要复制然后通过网络异步发送相同的文件时，是否存在文件锁定问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:21:43.200

我在 ASP.Net 应用程序中使用过水晶报表 rpt 文件。它们存储在文件系统中，我在多次访问期间从未见过任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:06:13.517

如果网站进程获取文件（在文件系统中）的句柄，它将锁定该文件。这意味着您无法在网站进程运行时删除该文件。

为了解决这个问题，ASP.NET 影子将它知道的文件复制到一个临时位置。这允许它在保持原始文件解锁的同时获取锁（在影子复制文件上）。

因此，您可能需要[考虑这一点](http://msdn.microsoft.com/en-us/library/ms404279.aspx)。并发管理是数据库擅长的。根据进程使用文件的方式，文件系统需要格外小心。

# gwt - 使用 UIbinder 定义小部件的可选参数

> ID：13397095
> 
> 赞同：0
> 
> 时间：2012-11-15T11:57:26.070
> 
> 标签：gwt, uibinder

以下问题的答案表明这是可能的：

[试图让 UIBinder 给我一个跨度而不是 div](https://stackoverflow.com/questions/2257924/trying-to-get-uibinder-to-give-me-a-span-not-a-div)

如果您`<g:HTMLPanel tag="span">`在模板中声明，那么 HTMLPanel 将是`<span>`最终结果中的一个元素，而不是默认的`<div>`.

HTMLPanel 有这个构造函数：

```
public HTMLPanel(String tag, String html) 
```

这可能是由这种方法调用的，但是如何调用呢？如果模板中没有标签属性，那么使用的构造函数大概就是这个：

```
public HTMLPanel(String html) 
```

我知道可以注释一个构造函数`@UiConstructor`来创建一个在模板中定义的参数的小部件，但是如何根据定义的属性来更改构造函数？

还有，如何`String html`自动填充？作为元素的内容，会有一些隐含的 html 属性定义吗？或者这只是 HTMLPanel 的 UIBinder 的非标准行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:41:31.457

`HTMLPanel`有一个专门`HTMLPanelParser`处理来自`ui.xml`.

元素解析器是 UiBinder 的内部部分，您不能[添加自己的](https://code.google.com/p/google-web-toolkit/issues/detail?id=4461).

您必须声明一个`@UiConstructor`构造函数，其余部分由 setter 处理，并可能在其中完成一些最终*验证*`onAttach`（类似于`Composite`您忘记调用时在附加时抛出的方式，对于and`initWidget`也类似）。`Widget``setElement`

在复杂的情况下，和/或如果你想强制使用构造函数参数，那么不要做任何特殊的事情，让小部件的用户使用 a`@UiFactory`或`@UiField(provided = true)`. 这已经是`SuggestBox`,`ValueListBox`或`CellList`例如的情况。

我个人偏爱最后一种方法。

# actionscript-3 - 使用 Actionscript 3 文件播放声音

> ID：13397096
> 
> 赞同：1
> 
> 时间：2012-11-15T11:57:32.337
> 
> 标签：actionscript-3, flash

这可能是一个非常简单的问题，但它让我难住了。

我的库中有一个名为 blaster 的 .wav 文件（类名 = blaster），现在我正在尝试使用外部 .as 文件播放它。

我试过

```
public var blaster:Sound = new blaster; 
```

并使用 blaster.play() 调用 blaster；在前面的函数中，但它不断给出这个错误：

调用可能未定义的方法 blaster

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:10:11.780

如果符号属性中的 ActionScript Linkage已正确设置，则更`new blaster;`改为，除了对我来说一切都很好。`new blaster();`

# asp.net-mvc-3 - Firefox 页面没有正确重定向

> ID：13397105
> 
> 赞同：6
> 
> 时间：2012-11-15T11:57:52.770
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3, firefox, google-chrome

当我转到我的[asp.net-mvc-3](/questions/tagged/asp.net-mvc-3 "显示标记为“asp.net-mvc-3”的问题")站点上的特定 url 时，我在 Firefox 中收到此错误。有问题的页面是一个登录屏幕。

页面未正确重定向

> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。
> 
> 此问题有时可能是由禁用或拒绝接受 cookie 引起的。

铬 说

> 此网页有重定向循环 位于的网页导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

```
Here are some suggestions:
Reload this web page later.
Learn more about this problem. 
```

为什么会发生这种情况？重新加载几次后，问题确实消失了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:35:15.023

打开 Fiddler [（下载）](http://www.fiddler2.com/fiddler2/)并查看请求，您会发现一些 HTTP 重定向计数，然后浏览器将停止并显示此类消息。您需要调试您的应用程序，也许这是一些交叉重定向、自定义返回 url 逻辑或其他任何东西，没有代码很难理解发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T11:34:50.893

我们遇到了同样的问题，Login.aspx 页面被重定向到默认页面 ~/. 解决方案很难找到，但更深入地发现 IIS 服务器已从某些版本中将 Login.aspx 设置为默认页面。因此，重定向存在无限循环，从 IIS GUI（！）中的默认页面（默认文档）中删除 od Login.aspx 解决了这个问题。希望这可以帮助某人。仅更改配置文件是不够的，GUI 方法运行良好。

# html - 我应该用锚元素指定锚点吗？

> ID：13397106
> 
> 赞同：0
> 
> 时间：2012-11-15T11:58:01.357
> 
> 标签：html, anchor

在过去，我见过使用锚元素和`id`/或`name`属性（[以 id 优先](https://stackoverflow.com/questions/484719/html-anchors-with-name-or-id)）指定锚点的示例。

但是，就可访问性/跨浏览器支持而言，我应该使用锚元素而不是任何其他元素有什么特别的原因吗？

例如，我可以使用带有以下标记的 URL [http://domain.com/page.htm#faq ：](http://domain.com/page.htm#faq)

```
<a id="faq"></a>
<h1>Frequently Asked Questions</h1> 
```

可以简化为：

```
<h1 id="faq">Frequently Asked Questions</h1> 
```

使用第二个标记有什么害处吗？为什么开发人员更喜欢空锚而不是附加`id`到更相关的元素上，有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:00:12.743

> 就可访问性/跨浏览器支持而言，我应该使用锚元素而不是任何其他元素有什么特别的原因吗？

没有了，不会再有了。

从历史上看（在 HTML 4 之前），命名锚点是页面锚点的唯一方式。

> 使用第二个标记有什么害处吗？

这是推荐的方式 - 这就是你应该这样做的方式。

> 为什么开发人员更喜欢空锚而不是将 id 附加到更相关的元素，有什么特别的原因吗？

只是缺乏学习和适应变化；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:04:34.247

可以写你的代码。使用第一个代码有两点：

1.  历史原因。

2.  任何 html 驱动器中的 HtmlHelpers，例如 Razor。例如，使用这样的东西对我来说看起来不错：

    ```
    public static MvcHtmlString Anchor<TModel>(this HtmlHelper<TModel> htmlHelper, string anchorId)
    {
        var tag = new TagBuilder("a");
        tag.Attributes.Add("id", anchorId);
        return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
    } 
    ```

在我的 MVC 项目中。

# javascript - 调用 jQuery .val() 时的 javascript 别名。为什么？

> ID：13397107
> 
> 赞同：0
> 
> 时间：2012-11-15T11:58:02.187
> 
> 标签：javascript, jquery

我想备份一个文本框值以允许表过滤。当用户按下退格键并将文本框留空时，我想放置我之前备份的先前值：

vbackup 存储初始文本框值，这是 jsfiddle 中的“hello”。

```
$('#btn').click(function () {
    $('#mydiv').slideToggle('fast', function () {
        // I SAVE THE TEXTBOX VALUE SO THAT I CAN
        // GET IT BACK AFTERWARDS
        var vbackup = $('#txtbox').val();
        alert(vbackup);
        if ($(this).is(":visible")) {
            // NO MATTERS...
        }
        else {
            // IF TEXTBOX VALUE IS EMPTY I GET THE PREVIOUS
            // VALUE BACK
            if ($('#txtbox').val() == '') {
                // VBACKUP IS EMPTY !!
                alert(vbackup );
                $('#txtbox').val(vbackup );
            }
        }
    });

    return false;
}); 
```

我不明白为什么我的 vbackup 变量与我之前备份的文本框实际值匹配。

[http://jsfiddle.net/QFQ5k/16/](http://jsfiddle.net/QFQ5k/16/)

程序：

1.  按下按钮一次
2.  清空文本框
3.  再次按下按钮。现在“你好”这个词应该从变量返回到文本框。警报告诉我变量中的值已被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:04:52.477

请参阅更新[的 http://jsfiddle.net/QFQ5k/21/](http://jsfiddle.net/QFQ5k/21/)

```
$('#mydiv').hide();
var vbackup = $('#txtbox').val();
$('#btn').click(function () {
        $('#mydiv').slideToggle('fast', function () {

            alert(vbackup);
            if ($(this).is(":visible")) {

            }
            else {
                if ($('#txtbox').val() == '') {
                    // In this alert vbackup
                    // is empty !!
                     $('#txtbox').val(vbackup );

                }
                else 
                    vbackup = $('#txtbox').val();
            }
        });

        return false;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:08:58.987

这样的事情（将值存储在 html 节点的属性中）也可以。另外，它不使用全局变量（耶）。

```
// this is equal to #mydiv
this.vbackup = $("#txtbox").val() 
```

在此处查看演示：http: [//jsfiddle.net/QFQ5k/25/](http://jsfiddle.net/QFQ5k/25/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:34:20.830

```
$("#mydiv").hide();

$('#btn').click(function () {
    $('#mydiv').slideToggle('fast', function () {
        var value = $('#txtbox').val() || $(this).data("value");

        if ( !$(this).is(":visible") && !$('#txtbox').val() ) {
            $('#txtbox').val( value );
        }

        $(this).data("value", value);
    });

    return false;
}); 
```

[http://jsfiddle.net/QFQ5k/26/](http://jsfiddle.net/QFQ5k/26/)

# php - PHP - 在没有表单的情况下访问/上传本地文件到服务器。在 API 上使用 PUT file://

> ID：13397109
> 
> 赞同：0
> 
> 时间：2012-11-15T11:58:12.350
> 
> 标签：php, file-upload

`file_get_contents();`我已经编写了一个脚本，在使用相对文件路径时使用此方法将图像文件上传到服务器，例如。`/var/test/image1.jpg`以及当我使用远程网址时，例如。`http://domain.com/test/image1.jpg`.

但是，它不适用于本地路径，即。file://C:/Users/me/Pictures/image1.jpg。我得到，“ `file_get_contents(file://C:/Users/me/Pictures/image1.jpg)`[function.file-get-contents]：无法打开流：没有这样的文件或目录”或“不支持远程主机文件访问”。

我真的需要它来处理本地路径，以便远程客户端可以通过 API 将他们的本地图像上传到我的服务器。因此，我不能使用表单，需要使用此处指定的 PUT 方法（[http://www.php.net/manual/en/features.file-upload.put-method.php][1]）但是如何我访问文件？

我的 API 的代码如下，但我试图弄清楚如何从客户端本地机器获取文件内容：

```
if($_SERVER['REQUEST_METHOD'] == 'PUT') {
    $input = file_get_contents("php://input"); //filepath passed from client in XML

//Convert the XML to an object we can deal with
$xml = simplexml_load_string($input);   

$file_path = $xml->image->filepath; 

if  (file_exists($file_path) ){

    $file_data = file_get_contents($file_path);

    //Initialise the Curl Instance
    $ch = curl_init();

    //Set our Curl Options
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $file_data);

    //Execute the request
    $response = curl_exec($ch);

    $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

    //Close the Handle
    curl_close($ch);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:00:05.263

您不应该指定`file://` 要访问**本地路径**，您可以直接执行

```
file_get_contents('C:/Users/me/Pictures/image1.jpg'); 
```

您还可以使用`../`以下基于导航的方式相对于当前目录进行导航

```
file_get_contents('../../../somefile.xyz'); 
```

* * *

**编辑：**如果您尝试访问**客户端文件**，即远程路径，那**将无法正常工作**。您需要诸如 HTTP、FTP 之类的东西来传输您的文件。仅仅给出一个本地文件系统地址是不够的。

端点需要以某种方式使文件可用（HTTP/FTP 服务器），或者您需要让客户端通过浏览器和字段**[上传文件。](http://php.net/manual/en/features.file-upload.php)**`<input>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:10:10.007

您无法`file_get_contents()`从远程客户端的计算机上打开任何文件，除非它们在本地运行（他们还需要为此设置 PHP）然后以某种方式将其提交到您的服务器。

`file_get_contents()`允许您打开与您的脚本在同一台机器上的文件，而不是在不同的机器上

您可以查看[http://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php)以获取文件上传器的简单示例

# css - 容器宽度小于滑块宽度，隐藏溢出？

> ID：13397112
> 
> 赞同：0
> 
> 时间：2012-11-15T11:58:24.473
> 
> 标签：css

在此处查看屏幕截图：[http ://s12.postimage.org/wvt2xt​​365/overflow.png](http://s12.postimage.org/wvt2xt365/overflow.png)

我的容器宽度是 1000 像素，滑块宽度是 1400 像素。我如何才能将溢出设置为容器宽度，而不是滑块宽度？

那么如果用户的浏览器大小为 1200 像素，那么不会有任何滚动条吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:04:11.850

这是一个有趣的问题。您可以将滑块放在另一个宽度为 100% 的容器中并隐藏溢出。

这是您要查找的内容还是要将滑块本身调整到 1400 像素？在这种情况下，您应该使用媒体查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:03:29.937

溢出有许多选项。您可以强制对象具有“隐藏”溢出，因此：

```
#container 
{
width:1000px;
overflow:hidden;
} 
```

请注意，这意味着溢出被剪裁，其余内容将不可见......我想这就是你想要的？

# python - 在 tix.ScrolledWindow 中用鼠标滚动

> ID：13397117
> 
> 赞同：2
> 
> 时间：2012-11-15T11:58:39.977
> 
> 标签：python, scroll, tkinter, scrolledwindow, tix

是否可以让 ScrolledWindow 响应鼠标的滚轮？当我滚动鼠标滚轮时，它目前什么都不做，但是当用户必须手动单击并拖动滚动条时，它的可用性会大大降低。ScrolledWindow 上的文档非常有限，以至于我找不到答案。

```
from tkinter import *
from tkinter.tix import *

root = Tk()

w = ScrolledWindow(root, width = 500, height = 700)
w.grid(row = 0, column = 0)
win = w.window

for i in range(50):
    Label(win, text = 'lorem ipsum').grid(row = i, column = 0)

root.mainloop() 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:26:55.967

我看到了你的问题，我一直在研究，这个问题已经有一段时间了，因为前段时间我遇到了类似的问题，我找到的解决方案是使用 ttk.Treeview，你打算用它做什么？tk 画布对您来说在功能上是等效的吗？

# ruby - Ruby Net::HTTP 不解码 gzip？

> ID：13397119
> 
> 赞同：5
> 
> 时间：2012-11-15T11:58:59.080
> 
> 标签：ruby, nginx, gzip

我安装了 zlib**的 ruby​​-1.9.3-p327**。`localhost:80`是nginx简单的测试页面。

```
require "net/http"
=> true
Net::HTTP::HAVE_ZLIB
=> true

res = Net::HTTP.start("localhost", "80") do |http|
  req = Net::HTTP::Get.new "/"
  req["accept-encoding"] = "gzip"
  http.request req
end
=> #<Net::HTTPOK 200 OK readbody=true>

res.get_fields "content-encoding"
=> ["gzip"]
res.body
=> "\x1F\x8B\b\x00\x00\x00\x00\x00\x00\x03\xEC\xBDi..." 
```

尸体没有被解码。为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-09T12:00:19.233

对于在 ruby​​ 1.9 上工作的代码遇到问题并且无法升级到 ruby​​ 2.0 的任何人，只需将该代码包含到您的项目中即可。

```
module HTTPResponseDecodeContentOverride
  def initialize(h,c,m)
    super(h,c,m)
    @decode_content = true
  end
  def body
    res = super
    if self['content-length']
      self['content-length']= res.bytesize
    end
    res
  end
end
module Net
  class HTTPResponse
    prepend HTTPResponseDecodeContentOverride
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T12:24:22.263

如果你使用`http.get`它应该自动解码它，但它看起来`request`可能不适合你。

这里显然有解压gzip请求的代码，但只针对`get`方法： [https ://github.com/ruby/ruby/blob/v1_9_3_327/lib/net/http.rb#L1031](https://github.com/ruby/ruby/blob/v1_9_3_327/lib/net/http.rb#L1031)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-15T22:42:31.720

根据我的实验，发生这种情况的至少一个原因是[right_http_connection](https://github.com/rightscale/right_http_connection) gem。我测试了 1.3.0 和 1.4.0 版本。这个 gem monkey 修补 Net::HTTP 并导致解码 GZipped 响应出现问题。

[您可以在此 GitHub 问题](https://github.com/arsduo/koala/issues/346#issuecomment-37209514)中阅读有关此问题的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:16:07.790

我认为它不会自动完成。

要解码，请尝试以下代码段（假设响应是 StringIO）：

```
begin
  Zlib::GzipReader.new(response).read
rescue Zlib::GzipFile::Error, Zlib::Error # Not gzipped
  response.rewind
  response.read
end 
```

# silverlight - 带有德语 Windows 的 PC 上 Silverlight 中的错误 MonthDayPattern

> ID：13397121
> 
> 赞同：2
> 
> 时间：2012-11-15T11:59:11.510
> 
> 标签：silverlight, cultureinfo, datetimeformatinfo

我在安装了德语 Windows Server 2003 的 PC 中遇到了一个非常奇怪的问题。重要的是，即使我将 Thread.CurrentThread.CurrentCulture、Thread.CurrentThread.CurrentUICulture 和 Language 设置为德语，在安装了英语 Windows 的 PC 上也不会发生这种情况。如果我将 Windows 的显示语言设置为德语，它也不会发生。它只发生在 Silverlight 中（不会发生在 WPF 或控制台应用程序中）。

问题很简单 - 当前 Thread.CurrentThread.CurrentCulture.DateTimeFormat 的 MonthDayPattern 的值是“MMMM.dd”。在其他每台 PC 中，我将 Culture、UICulture 和 Language 设置为 German 进行测试，其值为“dd.MMMM”。

# single-sign-on - 使用 vintella 进行 SSO，未为此请求执行 vsj 身份验证

> ID：13397124
> 
> 赞同：1
> 
> 时间：2012-11-15T11:59:18.870
> 
> 标签：single-sign-on, spnego

当 vintella 尝试获取凭据以在 Windows 中使用当前登录的用户时，我在堆栈跟踪中得到未针对此请求执行 vsj 身份验证。使用谷歌已被证明毫无价值，因为似乎从来没有人得到过这个错误。当 tomcat 启动时，它确实从 SPN 获得票证，只有当应用程序尝试在 SPNEGO 之后进行身份验证时。还有人看到这个吗？我想我可能不得不直接去找 SSO 供应商，我只是没有任何级别的支持。

# ruby - Ruby：从二维数组中的每个子数组中获取第 n 个元素

> ID：13397127
> 
> 赞同：1
> 
> 时间：2012-11-15T11:59:24.140
> 
> 标签：ruby, unit-testing, watir, watir-webdriver

作为 Watir 测试套件的一部分，我们正在验证一个数据表。其中一个要求是特定列必须为空（除非选择了特定的单选按钮）所以在我的脚本中，我有以下代码

```
incidents = browser.table(:xpath, Xpath_CC).strings 
```

其中浏览器是 watir-webdriver 浏览器对象在事件中给出我的这个二维数组

```
[["DateTime", "Problem", "Value", "Compared", "Number", "Causes", "Where", "Count", "Type"],
["May 07, 02:15 - 02:30", "Web", "38.46 %", "", "1", "UNKNOWN", "", "1", "J105"],
["May 07, 02:15 - 02:30", "Video", "40 %", "", "1", "UNKNOWN", "", "1", "J105"],
["May 07, 02:00 - 02:15", "Email", "30 %", "", "1", "UNKNOWN", "", "1", "J105"],
["May 07, 01:00 - 01:15", "Email", "70 %", "", "1", "UNKNOWN", "", "1", "J105"],
["May 07, 01:00 - 01:15", "Email", "70 %", "", "1", "UNKNOWN", "", "1", "J105"],
["May 07, 01:00 - 01:15", "Email", "0 %", "", "1", "UNKNOWN", "", "1", "J105"],
]] 
```

我需要做的是检查每个子数组中的每个“比较”列并确保它是空的。我可以做类似的事情

```
 result = true
 incidents.each do |row|
   if (row[3] != '')
    result = false
  end
end 
```

把那是我的 Java 大脑告诉我如何去做。我认为这里必须是一种更简单的单行红宝石方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:14:27.223

单线：

```
result = incidents.all? { |row| row[3].empty? } 
```

跳过标题信息：

```
result = incidents[1..-1].all? { |row| row[3].empty? } 
```

# performance - Chrome DevTools：时间轴视图上的三角形警告图标，它是什么？

> ID：13397128
> 
> 赞同：9
> 
> 时间：2012-11-15T11:59:28.357
> 
> 标签：performance, google-chrome-devtools

![Google Chrome 开发者工具时间轴视图上的警告图标](../Images/3bcddd4e3fc6a8198c09e22c62d55fb5.png)

有谁知道 Google Chrome 开发者工具时间轴视图上的三角形警告图标代表什么？当我将鼠标悬停在它上面时，单击它等等 - 提供的信息与其他任何事件都没有不同。事件本身看起来也不长，我不知道它在警告我什么。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T12:17:04.113

此警告标志表示某些代码（例如`element.offsetHeight`或`document.width`）触发了**同步**布局事件，这在某些情况下会对性能产生不利影响。如果展开事件树，您应该能够看到相关的堆栈跟踪。

DevTools 文档中对此三角形及其含义的完整解释： [https ://developer.chrome.com/devtools/docs/timeline#locating-forced-synchronous-layouts](https://developer.chrome.com/devtools/docs/timeline#locating-forced-synchronous-layouts)

[![](../Images/768543a2434586f37d748550867a9059.png)](https://i.stack.imgur.com/gM8ZE.png)
[（来源：[chrome.com](https://developer.chrome.com/devtools/docs/timeline-images/forced_layout.png)）]

它包括一个[强制同步布局演示](https://developer.chrome.com/docs/devtools/)，以便更好地理解它。

# macos - 如何在mac应用程序主栏中的帮助中添加文本

> ID：13397130
> 
> 赞同：0
> 
> 时间：2012-11-15T11:59:30.713
> 
> 标签：macos, cocoa, menubar

由于我是 mac 应用程序开发的新手，任何人都可以帮助我解决我的问题。

在我的 Mac 应用程序中，我想在菜单栏中添加帮助文档帮助选项，任何人都可以帮我解决这个问题。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:11:35.780

您有两个主要选择。您可以为您的应用程序[创建帮助手册包](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html)，也可以创建自己的方法并将其链接到菜单选择。（从你的问题中不清楚你想如何显示你的“帮助文档”。）

# css - 拉伸列表项 填充宽度

> ID：13397135
> 
> 赞同：25
> 
> 时间：2012-11-15T11:59:47.667
> 
> 标签：css

我有一个无序列表 ( `<ul>`)，其中包含不同数量的项目 ( `<li>`)。我想使用一种 CSS 样式，允许项目拉伸到列表的宽度。

这就是我所拥有的：

![在此处输入图像描述](../Images/46f0d3a04a0194f92e207901330ebfdd.png)

这就是我要的：

![在此处输入图像描述](../Images/61c0503ce63871fb9edf3aa5ffe990ca.png)

HTML：

```
These 4 items should fill the width:<br/>
<ul id="ul1">
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
</ul>
<br/>
These 5 items should fill the width:<br/>
<ul id="ul2">
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
    <li>item</li>
</ul>
<br/>
And so on and so forth... 
```

这是帮助您入门的[JSFiddle 。](http://jsfiddle.net/AwWUA/)

注意：我不想[在 CSS中](http://jsfiddle.net/AwWUA/1/)[硬编码`width`](http://jsfiddle.net/AwWUA/1/)。注意：如果您想知道用例，这是响应式设计中的导航结构，我希望列表项始终填满可用宽度，无论分辨率是多少。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-15T12:05:36.370

***[演示](http://jsfiddle.net/AwWUA/9/)*** 嗨现在你可以做到这一点

**习惯** `display :table`和`display:table-cell`

像这样

**CSS**

```
ul {
    border:1px dotted black;
    padding: 0;
    display:table;
    width:100%;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
}
li {
    background-color: red;
    display:table-cell;
}
li:nth-child(2n) {
    background-color: #0F0;
} 
```

**现在定义你的父母** `display:table;`或定义你`width:100%;`的**孩子** `display:table-cell;`

***[演示](http://jsfiddle.net/AwWUA/9/)***

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-02-16T10:42:07.703

简单的解决方案

```
ul {
    display: flex;
}

ul li {
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-04-02T20:21:15.677

最简单的方法：

```
ul {
    display: flex;
}

ul li {
    /*this instruction means "To split space between all 'li' elements evenly*/
    flex: 1;
} 
```

`flex`您可以[在此处](https://developer.mozilla.org/ru/docs/Web/CSS/flex)阅读有关属性的更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-08T05:49:16.283

我有最简单的解决方案。 `<ul style="padding: 0;"> <li style="list-style-type: none;margin:0;"></li> </ul>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-29T13:18:48.353

```
#ul1 {
display: block;
padding: 0;
list-style: none;
}

li-Class{
width: 100%
} 
```

注意： display 可以是 inline-block 宽度：100% 并且此代码适用于那些希望安排 li 块的人。

# objective-c - 根据文本语言自动对齐 UILabel 中的文本

> ID：13397137
> 
> 赞同：6
> 
> 时间：2012-11-15T12:00:01.960
> 
> 标签：objective-c, ios6, localization, alignment, right-to-left

我有兴趣将一些文本设置为 a `UILabel`，并根据语言的方向性（例如，希伯来语 - 从右到左 [RTL]、英语 - 从左到右 [LTR]）设置`UILabel`.

请注意，使用 iOS 6`NSTextAlignmentNatural`并不能解决问题，因为它会根据当前的语言环境选择对齐方式，实验表明。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T06:29:02.633

最终遵循[此 SO 答案中给出](https://stackoverflow.com/a/5636974/1071136)的建议：编写一个简短的脚本来解析[此处公开可用](http://www.unicode.org/Public/UNIDATA/UnicodeData.txt)的 Unicode 数据，并生成代码以识别代码点是否具有强 R 或 AL 方向属性。然后，在字符串中搜索第一个这样的字符。这正是ICU 包中的[ubidi_getBaseDirection所做的。](http://icu-project.org/apiref/icu4c/ubidi_8h.html#aeb1fd15743833278cc11906cd5a48aef)

由于其内部表示`NSString`为UTF16（即变长编码），为了简化扫码，首先将其转换为UTF32。另一种方法是动态解码字符串，这需要处理 BOM 和 Unicode 代理项。另一种方法是简单地忽略无法由 one 表示的字符`unichar`。有关更多详细信息，请参阅[Wikipedia 的 UTF16 文章](http://en.wikipedia.org/wiki/UTF-16)。

# 简答

```
@interface NSString (TextDirectionality)

/* Return 1 if the string is strongly LTR, -1 if strongly RTL, or 0 if neutral. */
/* See http://icu-project.org/apiref/icu4c/ubidi_8h.html#aeb1fd15743833278cc11906cd5a48aef */
-(int)getBaseDirection;

@end

@implementation NSString (TextDirectionality)

// Function takes UTF32 character, and not a unichar (=UTF16 character),
// because some Unicode characters need full 32 bits to represent.
BOOL isCodePointStrongRTL(UTF32Char c) {
  return ((c == 0x5BE) || (c == 0x5C0) || (c == 0x5C3) || (c == 0x5C6) || (c >= 0x5D0 && c <= 0x5EA) || (c >= 0x5F0 && c <= 0x5F4) || (c == 0x608) || (c == 0x60B) || (c == 0x60D) || (c == 0x61B) || (c >= 0x61E && c <= 0x64A) || (c >= 0x66D && c <= 0x66F) || (c >= 0x671 && c <= 0x6D5) || (c >= 0x6E5 && c <= 0x6E6) || (c >= 0x6EE && c <= 0x6EF) || (c >= 0x6FA && c <= 0x70D) || (c >= 0x70F && c <= 0x710) || (c >= 0x712 && c <= 0x72F) || (c >= 0x74D && c <= 0x7A5) || (c == 0x7B1) || (c >= 0x7C0 && c <= 0x7EA) || (c >= 0x7F4 && c <= 0x7F5) || (c == 0x7FA) || (c >= 0x800 && c <= 0x815) || (c == 0x81A) || (c == 0x824) || (c == 0x828) || (c >= 0x830 && c <= 0x83E) || (c >= 0x840 && c <= 0x858) || (c == 0x85E) || (c == 0x8A0) || (c >= 0x8A2 && c <= 0x8AC) || (c == 0x200F) || (c == 0xFB1D) || (c >= 0xFB1F && c <= 0xFB28) || (c >= 0xFB2A && c <= 0xFB36) || (c >= 0xFB38 && c <= 0xFB3C) || (c == 0xFB3E) || (c >= 0xFB40 && c <= 0xFB41) || (c >= 0xFB43 && c <= 0xFB44) || (c >= 0xFB46 && c <= 0xFBC1) || (c >= 0xFBD3 && c <= 0xFD3D) || (c >= 0xFD50 && c <= 0xFD8F) || (c >= 0xFD92 && c <= 0xFDC7) || (c >= 0xFDF0 && c <= 0xFDFC) || (c >= 0xFE70 && c <= 0xFE74) || (c >= 0xFE76 && c <= 0xFEFC) || (c >= 0x10800 && c <= 0x10805) || (c == 0x10808) || (c >= 0x1080A && c <= 0x10835) || (c >= 0x10837 && c <= 0x10838) || (c == 0x1083C) || (c >= 0x1083F && c <= 0x10855) || (c >= 0x10857 && c <= 0x1085F) || (c >= 0x10900 && c <= 0x1091B) || (c >= 0x10920 && c <= 0x10939) || (c == 0x1093F) || (c >= 0x10980 && c <= 0x109B7) || (c >= 0x109BE && c <= 0x109BF) || (c == 0x10A00) || (c >= 0x10A10 && c <= 0x10A13) || (c >= 0x10A15 && c <= 0x10A17) || (c >= 0x10A19 && c <= 0x10A33) || (c >= 0x10A40 && c <= 0x10A47) || (c >= 0x10A50 && c <= 0x10A58) || (c >= 0x10A60 && c <= 0x10A7F) || (c >= 0x10B00 && c <= 0x10B35) || (c >= 0x10B40 && c <= 0x10B55) || (c >= 0x10B58 && c <= 0x10B72) || (c >= 0x10B78 && c <= 0x10B7F) || (c >= 0x10C00 && c <= 0x10C48) || (c >= 0x1EE00 && c <= 0x1EE03) || (c >= 0x1EE05 && c <= 0x1EE1F) || (c >= 0x1EE21 && c <= 0x1EE22) || (c == 0x1EE24) || (c == 0x1EE27) || (c >= 0x1EE29 && c <= 0x1EE32) || (c >= 0x1EE34 && c <= 0x1EE37) || (c == 0x1EE39) || (c == 0x1EE3B) || (c == 0x1EE42) || (c == 0x1EE47) || (c == 0x1EE49) || (c == 0x1EE4B) || (c >= 0x1EE4D && c <= 0x1EE4F) || (c >= 0x1EE51 && c <= 0x1EE52) || (c == 0x1EE54) || (c == 0x1EE57) || (c == 0x1EE59) || (c == 0x1EE5B) || (c == 0x1EE5D) || (c == 0x1EE5F) || (c >= 0x1EE61 && c <= 0x1EE62) || (c == 0x1EE64) || (c >= 0x1EE67 && c <= 0x1EE6A) || (c >= 0x1EE6C && c <= 0x1EE72) || (c >= 0x1EE74 && c <= 0x1EE77) || (c >= 0x1EE79 && c <= 0x1EE7C) || (c == 0x1EE7E) || (c >= 0x1EE80 && c <= 0x1EE89) || (c >= 0x1EE8B && c <= 0x1EE9B) || (c >= 0x1EEA1 && c <= 0x1EEA3) || (c >= 0x1EEA5 && c <= 0x1EEA9) || (c >= 0x1EEAB && c <= 0x1EEBB));
}

BOOL isCodePointStrongLTR(UTF32Char c) {
  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A) || (c == 0xAA) || (c == 0xB5) || (c == 0xBA) || (c >= 0xC0 && c <= 0xD6) || (c >= 0xD8 && c <= 0xF6) || (c >= 0xF8 && c <= 0x2B8) || (c >= 0x2BB && c <= 0x2C1) || (c >= 0x2D0 && c <= 0x2D1) || (c >= 0x2E0 && c <= 0x2E4) || (c == 0x2EE) || (c >= 0x370 && c <= 0x373) || (c >= 0x376 && c <= 0x377) || (c >= 0x37A && c <= 0x37D) || (c == 0x386) || (c >= 0x388 && c <= 0x38A) || (c == 0x38C) || (c >= 0x38E && c <= 0x3A1) || (c >= 0x3A3 && c <= 0x3F5) || (c >= 0x3F7 && c <= 0x482) || (c >= 0x48A && c <= 0x527) || (c >= 0x531 && c <= 0x556) || (c >= 0x559 && c <= 0x55F) || (c >= 0x561 && c <= 0x587) || (c == 0x589) || (c >= 0x903 && c <= 0x939) || (c == 0x93B) || (c >= 0x93D && c <= 0x940) || (c >= 0x949 && c <= 0x94C) || (c >= 0x94E && c <= 0x950) || (c >= 0x958 && c <= 0x961) || (c >= 0x964 && c <= 0x977) || (c >= 0x979 && c <= 0x97F) || (c >= 0x982 && c <= 0x983) || (c >= 0x985 && c <= 0x98C) || (c >= 0x98F && c <= 0x990) || (c >= 0x993 && c <= 0x9A8) || (c >= 0x9AA && c <= 0x9B0) || (c == 0x9B2) || (c >= 0x9B6 && c <= 0x9B9) || (c >= 0x9BD && c <= 0x9C0) || (c >= 0x9C7 && c <= 0x9C8) || (c >= 0x9CB && c <= 0x9CC) || (c == 0x9CE) || (c == 0x9D7) || (c >= 0x9DC && c <= 0x9DD) || (c >= 0x9DF && c <= 0x9E1) || (c >= 0x9E6 && c <= 0x9F1) || (c >= 0x9F4 && c <= 0x9FA) || (c == 0xA03) || (c >= 0xA05 && c <= 0xA0A) || (c >= 0xA0F && c <= 0xA10) || (c >= 0xA13 && c <= 0xA28) || (c >= 0xA2A && c <= 0xA30) || (c >= 0xA32 && c <= 0xA33) || (c >= 0xA35 && c <= 0xA36) || (c >= 0xA38 && c <= 0xA39) || (c >= 0xA3E && c <= 0xA40) || (c >= 0xA59 && c <= 0xA5C) || (c == 0xA5E) || (c >= 0xA66 && c <= 0xA6F) || (c >= 0xA72 && c <= 0xA74) || (c == 0xA83) || (c >= 0xA85 && c <= 0xA8D) || (c >= 0xA8F && c <= 0xA91) || (c >= 0xA93 && c <= 0xAA8) || (c >= 0xAAA && c <= 0xAB0) || (c >= 0xAB2 && c <= 0xAB3) || (c >= 0xAB5 && c <= 0xAB9) || (c >= 0xABD && c <= 0xAC0) || (c == 0xAC9) || (c >= 0xACB && c <= 0xACC) || (c == 0xAD0) || (c >= 0xAE0 && c <= 0xAE1) || (c >= 0xAE6 && c <= 0xAF0) || (c >= 0xB02 && c <= 0xB03) || (c >= 0xB05 && c <= 0xB0C) || (c >= 0xB0F && c <= 0xB10) || (c >= 0xB13 && c <= 0xB28) || (c >= 0xB2A && c <= 0xB30) || (c >= 0xB32 && c <= 0xB33) || (c >= 0xB35 && c <= 0xB39) || (c >= 0xB3D && c <= 0xB3E) || (c == 0xB40) || (c >= 0xB47 && c <= 0xB48) || (c >= 0xB4B && c <= 0xB4C) || (c == 0xB57) || (c >= 0xB5C && c <= 0xB5D) || (c >= 0xB5F && c <= 0xB61) || (c >= 0xB66 && c <= 0xB77) || (c == 0xB83) || (c >= 0xB85 && c <= 0xB8A) || (c >= 0xB8E && c <= 0xB90) || (c >= 0xB92 && c <= 0xB95) || (c >= 0xB99 && c <= 0xB9A) || (c == 0xB9C) || (c >= 0xB9E && c <= 0xB9F) || (c >= 0xBA3 && c <= 0xBA4) || (c >= 0xBA8 && c <= 0xBAA) || (c >= 0xBAE && c <= 0xBB9) || (c >= 0xBBE && c <= 0xBBF) || (c >= 0xBC1 && c <= 0xBC2) || (c >= 0xBC6 && c <= 0xBC8) || (c >= 0xBCA && c <= 0xBCC) || (c == 0xBD0) || (c == 0xBD7) || (c >= 0xBE6 && c <= 0xBF2) || (c >= 0xC01 && c <= 0xC03) || (c >= 0xC05 && c <= 0xC0C) || (c >= 0xC0E && c <= 0xC10) || (c >= 0xC12 && c <= 0xC28) || (c >= 0xC2A && c <= 0xC33) || (c >= 0xC35 && c <= 0xC39) || (c == 0xC3D) || (c >= 0xC41 && c <= 0xC44) || (c >= 0xC58 && c <= 0xC59) || (c >= 0xC60 && c <= 0xC61) || (c >= 0xC66 && c <= 0xC6F) || (c == 0xC7F) || (c >= 0xC82 && c <= 0xC83) || (c >= 0xC85 && c <= 0xC8C) || (c >= 0xC8E && c <= 0xC90) || (c >= 0xC92 && c <= 0xCA8) || (c >= 0xCAA && c <= 0xCB3) || (c >= 0xCB5 && c <= 0xCB9) || (c >= 0xCBD && c <= 0xCC4) || (c >= 0xCC6 && c <= 0xCC8) || (c >= 0xCCA && c <= 0xCCB) || (c >= 0xCD5 && c <= 0xCD6) || (c == 0xCDE) || (c >= 0xCE0 && c <= 0xCE1) || (c >= 0xCE6 && c <= 0xCEF) || (c >= 0xCF1 && c <= 0xCF2) || (c >= 0xD02 && c <= 0xD03) || (c >= 0xD05 && c <= 0xD0C) || (c >= 0xD0E && c <= 0xD10) || (c >= 0xD12 && c <= 0xD3A) || (c >= 0xD3D && c <= 0xD40) || (c >= 0xD46 && c <= 0xD48) || (c >= 0xD4A && c <= 0xD4C) || (c == 0xD4E) || (c == 0xD57) || (c >= 0xD60 && c <= 0xD61) || (c >= 0xD66 && c <= 0xD75) || (c >= 0xD79 && c <= 0xD7F) || (c >= 0xD82 && c <= 0xD83) || (c >= 0xD85 && c <= 0xD96) || (c >= 0xD9A && c <= 0xDB1) || (c >= 0xDB3 && c <= 0xDBB) || (c == 0xDBD) || (c >= 0xDC0 && c <= 0xDC6) || (c >= 0xDCF && c <= 0xDD1) || (c >= 0xDD8 && c <= 0xDDF) || (c >= 0xDF2 && c <= 0xDF4) || (c >= 0xE01 && c <= 0xE30) || (c >= 0xE32 && c <= 0xE33) || (c >= 0xE40 && c <= 0xE46) || (c >= 0xE4F && c <= 0xE5B) || (c >= 0xE81 && c <= 0xE82) || (c == 0xE84) || (c >= 0xE87 && c <= 0xE88) || (c == 0xE8A) || (c == 0xE8D) || (c >= 0xE94 && c <= 0xE97) || (c >= 0xE99 && c <= 0xE9F) || (c >= 0xEA1 && c <= 0xEA3) || (c == 0xEA5) || (c == 0xEA7) || (c >= 0xEAA && c <= 0xEAB) || (c >= 0xEAD && c <= 0xEB0) || (c >= 0xEB2 && c <= 0xEB3) || (c == 0xEBD) || (c >= 0xEC0 && c <= 0xEC4) || (c == 0xEC6) || (c >= 0xED0 && c <= 0xED9) || (c >= 0xEDC && c <= 0xEDF) || (c >= 0xF00 && c <= 0xF17) || (c >= 0xF1A && c <= 0xF34) || (c == 0xF36) || (c == 0xF38) || (c >= 0xF3E && c <= 0xF47) || (c >= 0xF49 && c <= 0xF6C) || (c == 0xF7F) || (c == 0xF85) || (c >= 0xF88 && c <= 0xF8C) || (c >= 0xFBE && c <= 0xFC5) || (c >= 0xFC7 && c <= 0xFCC) || (c >= 0xFCE && c <= 0xFDA) || (c >= 0x1000 && c <= 0x102C) || (c == 0x1031) || (c == 0x1038) || (c >= 0x103B && c <= 0x103C) || (c >= 0x103F && c <= 0x1057) || (c >= 0x105A && c <= 0x105D) || (c >= 0x1061 && c <= 0x1070) || (c >= 0x1075 && c <= 0x1081) || (c >= 0x1083 && c <= 0x1084) || (c >= 0x1087 && c <= 0x108C) || (c >= 0x108E && c <= 0x109C) || (c >= 0x109E && c <= 0x10C5) || (c == 0x10C7) || (c == 0x10CD) || (c >= 0x10D0 && c <= 0x1248) || (c >= 0x124A && c <= 0x124D) || (c >= 0x1250 && c <= 0x1256) || (c == 0x1258) || (c >= 0x125A && c <= 0x125D) || (c >= 0x1260 && c <= 0x1288) || (c >= 0x128A && c <= 0x128D) || (c >= 0x1290 && c <= 0x12B0) || (c >= 0x12B2 && c <= 0x12B5) || (c >= 0x12B8 && c <= 0x12BE) || (c == 0x12C0) || (c >= 0x12C2 && c <= 0x12C5) || (c >= 0x12C8 && c <= 0x12D6) || (c >= 0x12D8 && c <= 0x1310) || (c >= 0x1312 && c <= 0x1315) || (c >= 0x1318 && c <= 0x135A) || (c >= 0x1360 && c <= 0x137C) || (c >= 0x1380 && c <= 0x138F) || (c >= 0x13A0 && c <= 0x13F4) || (c >= 0x1401 && c <= 0x167F) || (c >= 0x1681 && c <= 0x169A) || (c >= 0x16A0 && c <= 0x16F0) || (c >= 0x1700 && c <= 0x170C) || (c >= 0x170E && c <= 0x1711) || (c >= 0x1720 && c <= 0x1731) || (c >= 0x1735 && c <= 0x1736) || (c >= 0x1740 && c <= 0x1751) || (c >= 0x1760 && c <= 0x176C) || (c >= 0x176E && c <= 0x1770) || (c >= 0x1780 && c <= 0x17B3) || (c == 0x17B6) || (c >= 0x17BE && c <= 0x17C5) || (c >= 0x17C7 && c <= 0x17C8) || (c >= 0x17D4 && c <= 0x17DA) || (c == 0x17DC) || (c >= 0x17E0 && c <= 0x17E9) || (c >= 0x1810 && c <= 0x1819) || (c >= 0x1820 && c <= 0x1877) || (c >= 0x1880 && c <= 0x18A8) || (c == 0x18AA) || (c >= 0x18B0 && c <= 0x18F5) || (c >= 0x1900 && c <= 0x191C) || (c >= 0x1923 && c <= 0x1926) || (c >= 0x1929 && c <= 0x192B) || (c >= 0x1930 && c <= 0x1931) || (c >= 0x1933 && c <= 0x1938) || (c >= 0x1946 && c <= 0x196D) || (c >= 0x1970 && c <= 0x1974) || (c >= 0x1980 && c <= 0x19AB) || (c >= 0x19B0 && c <= 0x19C9) || (c >= 0x19D0 && c <= 0x19DA) || (c >= 0x1A00 && c <= 0x1A16) || (c >= 0x1A19 && c <= 0x1A1B) || (c >= 0x1A1E && c <= 0x1A55) || (c == 0x1A57) || (c == 0x1A61) || (c >= 0x1A63 && c <= 0x1A64) || (c >= 0x1A6D && c <= 0x1A72) || (c >= 0x1A80 && c <= 0x1A89) || (c >= 0x1A90 && c <= 0x1A99) || (c >= 0x1AA0 && c <= 0x1AAD) || (c >= 0x1B04 && c <= 0x1B33) || (c == 0x1B35) || (c == 0x1B3B) || (c >= 0x1B3D && c <= 0x1B41) || (c >= 0x1B43 && c <= 0x1B4B) || (c >= 0x1B50 && c <= 0x1B6A) || (c >= 0x1B74 && c <= 0x1B7C) || (c >= 0x1B82 && c <= 0x1BA1) || (c >= 0x1BA6 && c <= 0x1BA7) || (c == 0x1BAA) || (c >= 0x1BAC && c <= 0x1BE5) || (c == 0x1BE7) || (c >= 0x1BEA && c <= 0x1BEC) || (c == 0x1BEE) || (c >= 0x1BF2 && c <= 0x1BF3) || (c >= 0x1BFC && c <= 0x1C2B) || (c >= 0x1C34 && c <= 0x1C35) || (c >= 0x1C3B && c <= 0x1C49) || (c >= 0x1C4D && c <= 0x1C7F) || (c >= 0x1CC0 && c <= 0x1CC7) || (c == 0x1CD3) || (c == 0x1CE1) || (c >= 0x1CE9 && c <= 0x1CEC) || (c >= 0x1CEE && c <= 0x1CF3) || (c >= 0x1CF5 && c <= 0x1CF6) || (c >= 0x1D00 && c <= 0x1DBF) || (c >= 0x1E00 && c <= 0x1F15) || (c >= 0x1F18 && c <= 0x1F1D) || (c >= 0x1F20 && c <= 0x1F45) || (c >= 0x1F48 && c <= 0x1F4D) || (c >= 0x1F50 && c <= 0x1F57) || (c == 0x1F59) || (c == 0x1F5B) || (c == 0x1F5D) || (c >= 0x1F5F && c <= 0x1F7D) || (c >= 0x1F80 && c <= 0x1FB4) || (c >= 0x1FB6 && c <= 0x1FBC) || (c == 0x1FBE) || (c >= 0x1FC2 && c <= 0x1FC4) || (c >= 0x1FC6 && c <= 0x1FCC) || (c >= 0x1FD0 && c <= 0x1FD3) || (c >= 0x1FD6 && c <= 0x1FDB) || (c >= 0x1FE0 && c <= 0x1FEC) || (c >= 0x1FF2 && c <= 0x1FF4) || (c >= 0x1FF6 && c <= 0x1FFC) || (c == 0x200E) || (c == 0x2071) || (c == 0x207F) || (c >= 0x2090 && c <= 0x209C) || (c == 0x2102) || (c == 0x2107) || (c >= 0x210A && c <= 0x2113) || (c == 0x2115) || (c >= 0x2119 && c <= 0x211D) || (c == 0x2124) || (c == 0x2126) || (c == 0x2128) || (c >= 0x212A && c <= 0x212D) || (c >= 0x212F && c <= 0x2139) || (c >= 0x213C && c <= 0x213F) || (c >= 0x2145 && c <= 0x2149) || (c >= 0x214E && c <= 0x214F) || (c >= 0x2160 && c <= 0x2188) || (c >= 0x2336 && c <= 0x237A) || (c == 0x2395) || (c >= 0x249C && c <= 0x24E9) || (c == 0x26AC) || (c >= 0x2800 && c <= 0x28FF) || (c >= 0x2C00 && c <= 0x2C2E) || (c >= 0x2C30 && c <= 0x2C5E) || (c >= 0x2C60 && c <= 0x2CE4) || (c >= 0x2CEB && c <= 0x2CEE) || (c >= 0x2CF2 && c <= 0x2CF3) || (c >= 0x2D00 && c <= 0x2D25) || (c == 0x2D27) || (c == 0x2D2D) || (c >= 0x2D30 && c <= 0x2D67) || (c >= 0x2D6F && c <= 0x2D70) || (c >= 0x2D80 && c <= 0x2D96) || (c >= 0x2DA0 && c <= 0x2DA6) || (c >= 0x2DA8 && c <= 0x2DAE) || (c >= 0x2DB0 && c <= 0x2DB6) || (c >= 0x2DB8 && c <= 0x2DBE) || (c >= 0x2DC0 && c <= 0x2DC6) || (c >= 0x2DC8 && c <= 0x2DCE) || (c >= 0x2DD0 && c <= 0x2DD6) || (c >= 0x2DD8 && c <= 0x2DDE) || (c >= 0x3005 && c <= 0x3007) || (c >= 0x3021 && c <= 0x3029) || (c >= 0x302E && c <= 0x302F) || (c >= 0x3031 && c <= 0x3035) || (c >= 0x3038 && c <= 0x303C) || (c >= 0x3041 && c <= 0x3096) || (c >= 0x309D && c <= 0x309F) || (c >= 0x30A1 && c <= 0x30FA) || (c >= 0x30FC && c <= 0x30FF) || (c >= 0x3105 && c <= 0x312D) || (c >= 0x3131 && c <= 0x318E) || (c >= 0x3190 && c <= 0x31BA) || (c >= 0x31F0 && c <= 0x321C) || (c >= 0x3220 && c <= 0x324F) || (c >= 0x3260 && c <= 0x327B) || (c >= 0x327F && c <= 0x32B0) || (c >= 0x32C0 && c <= 0x32CB) || (c >= 0x32D0 && c <= 0x32FE) || (c >= 0x3300 && c <= 0x3376) || (c >= 0x337B && c <= 0x33DD) || (c >= 0x33E0 && c <= 0x33FE) || (c == 0x3400) || (c == 0x4DB5) || (c == 0x4E00) || (c == 0x9FCC) || (c >= 0xA000 && c <= 0xA48C) || (c >= 0xA4D0 && c <= 0xA60C) || (c >= 0xA610 && c <= 0xA62B) || (c >= 0xA640 && c <= 0xA66E) || (c >= 0xA680 && c <= 0xA697) || (c >= 0xA6A0 && c <= 0xA6EF) || (c >= 0xA6F2 && c <= 0xA6F7) || (c >= 0xA722 && c <= 0xA787) || (c >= 0xA789 && c <= 0xA78E) || (c >= 0xA790 && c <= 0xA793) || (c >= 0xA7A0 && c <= 0xA7AA) || (c >= 0xA7F8 && c <= 0xA801) || (c >= 0xA803 && c <= 0xA805) || (c >= 0xA807 && c <= 0xA80A) || (c >= 0xA80C && c <= 0xA824) || (c == 0xA827) || (c >= 0xA830 && c <= 0xA837) || (c >= 0xA840 && c <= 0xA873) || (c >= 0xA880 && c <= 0xA8C3) || (c >= 0xA8CE && c <= 0xA8D9) || (c >= 0xA8F2 && c <= 0xA8FB) || (c >= 0xA900 && c <= 0xA925) || (c >= 0xA92E && c <= 0xA946) || (c >= 0xA952 && c <= 0xA953) || (c >= 0xA95F && c <= 0xA97C) || (c >= 0xA983 && c <= 0xA9B2) || (c >= 0xA9B4 && c <= 0xA9B5) || (c >= 0xA9BA && c <= 0xA9BB) || (c >= 0xA9BD && c <= 0xA9CD) || (c >= 0xA9CF && c <= 0xA9D9) || (c >= 0xA9DE && c <= 0xA9DF) || (c >= 0xAA00 && c <= 0xAA28) || (c >= 0xAA2F && c <= 0xAA30) || (c >= 0xAA33 && c <= 0xAA34) || (c >= 0xAA40 && c <= 0xAA42) || (c >= 0xAA44 && c <= 0xAA4B) || (c == 0xAA4D) || (c >= 0xAA50 && c <= 0xAA59) || (c >= 0xAA5C && c <= 0xAA7B) || (c >= 0xAA80 && c <= 0xAAAF) || (c == 0xAAB1) || (c >= 0xAAB5 && c <= 0xAAB6) || (c >= 0xAAB9 && c <= 0xAABD) || (c == 0xAAC0) || (c == 0xAAC2) || (c >= 0xAADB && c <= 0xAAEB) || (c >= 0xAAEE && c <= 0xAAF5) || (c >= 0xAB01 && c <= 0xAB06) || (c >= 0xAB09 && c <= 0xAB0E) || (c >= 0xAB11 && c <= 0xAB16) || (c >= 0xAB20 && c <= 0xAB26) || (c >= 0xAB28 && c <= 0xAB2E) || (c >= 0xABC0 && c <= 0xABE4) || (c >= 0xABE6 && c <= 0xABE7) || (c >= 0xABE9 && c <= 0xABEC) || (c >= 0xABF0 && c <= 0xABF9) || (c == 0xAC00) || (c == 0xD7A3) || (c >= 0xD7B0 && c <= 0xD7C6) || (c >= 0xD7CB && c <= 0xD7FB) || (c == 0xD800) || (c >= 0xDB7F && c <= 0xDB80) || (c >= 0xDBFF && c <= 0xDC00) || (c >= 0xDFFF && c <= 0xE000) || (c >= 0xF8FF && c <= 0xFA6D) || (c >= 0xFA70 && c <= 0xFAD9) || (c >= 0xFB00 && c <= 0xFB06) || (c >= 0xFB13 && c <= 0xFB17) || (c >= 0xFF21 && c <= 0xFF3A) || (c >= 0xFF41 && c <= 0xFF5A) || (c >= 0xFF66 && c <= 0xFFBE) || (c >= 0xFFC2 && c <= 0xFFC7) || (c >= 0xFFCA && c <= 0xFFCF) || (c >= 0xFFD2 && c <= 0xFFD7) || (c >= 0xFFDA && c <= 0xFFDC) || (c >= 0x10000 && c <= 0x1000B) || (c >= 0x1000D && c <= 0x10026) || (c >= 0x10028 && c <= 0x1003A) || (c >= 0x1003C && c <= 0x1003D) || (c >= 0x1003F && c <= 0x1004D) || (c >= 0x10050 && c <= 0x1005D) || (c >= 0x10080 && c <= 0x100FA) || (c == 0x10100) || (c == 0x10102) || (c >= 0x10107 && c <= 0x10133) || (c >= 0x10137 && c <= 0x1013F) || (c >= 0x101D0 && c <= 0x101FC) || (c >= 0x10280 && c <= 0x1029C) || (c >= 0x102A0 && c <= 0x102D0) || (c >= 0x10300 && c <= 0x1031E) || (c >= 0x10320 && c <= 0x10323) || (c >= 0x10330 && c <= 0x1034A) || (c >= 0x10380 && c <= 0x1039D) || (c >= 0x1039F && c <= 0x103C3) || (c >= 0x103C8 && c <= 0x103D5) || (c >= 0x10400 && c <= 0x1049D) || (c >= 0x104A0 && c <= 0x104A9) || (c == 0x11000) || (c >= 0x11002 && c <= 0x11037) || (c >= 0x11047 && c <= 0x1104D) || (c >= 0x11066 && c <= 0x1106F) || (c >= 0x11082 && c <= 0x110B2) || (c >= 0x110B7 && c <= 0x110B8) || (c >= 0x110BB && c <= 0x110C1) || (c >= 0x110D0 && c <= 0x110E8) || (c >= 0x110F0 && c <= 0x110F9) || (c >= 0x11103 && c <= 0x11126) || (c == 0x1112C) || (c >= 0x11136 && c <= 0x11143) || (c >= 0x11182 && c <= 0x111B5) || (c >= 0x111BF && c <= 0x111C8) || (c >= 0x111D0 && c <= 0x111D9) || (c >= 0x11680 && c <= 0x116AA) || (c == 0x116AC) || (c >= 0x116AE && c <= 0x116AF) || (c == 0x116B6) || (c >= 0x116C0 && c <= 0x116C9) || (c >= 0x12000 && c <= 0x1236E) || (c >= 0x12400 && c <= 0x12462) || (c >= 0x12470 && c <= 0x12473) || (c >= 0x13000 && c <= 0x1342E) || (c >= 0x16800 && c <= 0x16A38) || (c >= 0x16F00 && c <= 0x16F44) || (c >= 0x16F50 && c <= 0x16F7E) || (c >= 0x16F93 && c <= 0x16F9F) || (c >= 0x1B000 && c <= 0x1B001) || (c >= 0x1D000 && c <= 0x1D0F5) || (c >= 0x1D100 && c <= 0x1D126) || (c >= 0x1D129 && c <= 0x1D166) || (c >= 0x1D16A && c <= 0x1D172) || (c >= 0x1D183 && c <= 0x1D184) || (c >= 0x1D18C && c <= 0x1D1A9) || (c >= 0x1D1AE && c <= 0x1D1DD) || (c >= 0x1D360 && c <= 0x1D371) || (c >= 0x1D400 && c <= 0x1D454) || (c >= 0x1D456 && c <= 0x1D49C) || (c >= 0x1D49E && c <= 0x1D49F) || (c == 0x1D4A2) || (c >= 0x1D4A5 && c <= 0x1D4A6) || (c >= 0x1D4A9 && c <= 0x1D4AC) || (c >= 0x1D4AE && c <= 0x1D4B9) || (c == 0x1D4BB) || (c >= 0x1D4BD && c <= 0x1D4C3) || (c >= 0x1D4C5 && c <= 0x1D505) || (c >= 0x1D507 && c <= 0x1D50A) || (c >= 0x1D50D && c <= 0x1D514) || (c >= 0x1D516 && c <= 0x1D51C) || (c >= 0x1D51E && c <= 0x1D539) || (c >= 0x1D53B && c <= 0x1D53E) || (c >= 0x1D540 && c <= 0x1D544) || (c == 0x1D546) || (c >= 0x1D54A && c <= 0x1D550) || (c >= 0x1D552 && c <= 0x1D6A5) || (c >= 0x1D6A8 && c <= 0x1D6DA) || (c >= 0x1D6DC && c <= 0x1D714) || (c >= 0x1D716 && c <= 0x1D74E) || (c >= 0x1D750 && c <= 0x1D788) || (c >= 0x1D78A && c <= 0x1D7C2) || (c >= 0x1D7C4 && c <= 0x1D7CB) || (c >= 0x1F110 && c <= 0x1F12E) || (c >= 0x1F130 && c <= 0x1F169) || (c >= 0x1F170 && c <= 0x1F19A) || (c >= 0x1F1E6 && c <= 0x1F202) || (c >= 0x1F210 && c <= 0x1F23A) || (c >= 0x1F240 && c <= 0x1F248) || (c >= 0x1F250 && c <= 0x1F251) || (c == 0x20000) || (c == 0x2A6D6) || (c == 0x2A700) || (c == 0x2B734) || (c == 0x2B740) || (c == 0x2B81D) || (c >= 0x2F800 && c <= 0x2FA1D) || (c == 0xF0000) || (c == 0xFFFFD) || (c == 0x100000) || (c == 0x10FFFD);
}   

-(int)getBaseDirection {
  // Decode string into UTF32.
  NSData *utf32data = [self dataUsingEncoding:NSUTF32StringEncoding];
  // NSUTF32StringEncoding has the platform's byte-order, which should
  // be the same as UTF32Char's.
  UTF32Char *utf32chars = (UTF32Char *)[utf32data bytes];

  for (NSUInteger i = 0; i < self.length; i++) {
    // UTF32 is a fixed-length encoding, so utf32chars[i] will
    // always give us the i'th character.
    if (isCodePointStrongRTL(utf32chars[i]))
      return -1;
    if (isCodePointStrongLTR(utf32chars[i]))
      return 1;
  }
  return 0;
}

@end 
```

# 更长的答案：生成函数`isCodePointStrong{RTL,LTR}`

1.  创建一个脚本`hex_numbers_to_dec_ranges_py`，

    ```
    import sys
    from itertools import groupby, count

    numberlist = []
    for line in sys.stdin:
        numberlist.append(int(line, 16));

    def as_range(iterable): # not sure how to do this part elegantly
        l = list(iterable)
        if len(l) > 1:
            return '(c >= 0x{0:X} && c <= 0x{1:X})'.format(l[0], l[-1])
        else:
            return '(c == 0x{0:X})'.format(l[0])

    print ' || '.join(as_range(g) for _, g in groupby(numberlist, lambda n, c=count(): n-next(c))) 
    ```

    （代码[在 StackExhange 的代码审查中从这个出色的答案中](https://codereview.stackexchange.com/a/5202)无耻地窃取）。

2.  从终端运行：

    ```
    curl http://www.unicode.org/Public/UNIDATA/UnicodeData.txt > /tmp/UnicodeData.txt
    cat /tmp/UnicodeData.txt | awk -F';' '$5 == "R" || $5 == "AL"' | cut -d';' -f1 | python hex_numbers_to_dec_ranges.py > rtl.m
    cat /tmp/UnicodeData.txt | awk -F';' '$5 == "L"' | cut -d';' -f1 | python hex_numbers_to_dec_ranges.py > ltr.m
    rm /tmp/UnicodeData.txt 
    ```

* * *

**EDIT:** As @masmor correctly noted, the `for` loop in `getBaseDirection` scans characters, and not bytes. Therefore, it should terminate after "character" number of iterations, and not "bytes" number of iterations. In other words, `self.length` times and not `utf32data.length` times. The code is now corrected.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T19:32:14.437

I think the scan loop in `-getBaseDirection` should be for `self.length` times instead of `utf32data.length` in the accepted answer.

`utf32data.length` is the size in bytes while `sizeof(UTF32Char) == 4`, which would result in an overrun.

In action, the current code sporadically returns false positives for identical input, depending on what it overruns onto (maybe it'll segfault on a sufficiently bad day). Everything else seems to be working perfectly with the fix.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:35:03.410

在 HTML5 中，这可以通过将 dir="auto" 应用于元素来完成。它是在 WebKit 中实现的，尽管我不完全确定它在 iOS 中是否可用。

dir="auto" 很简单，大概可以自己实现——只要搜索第一个方向性强的字符，把它的方向性应用到整个东西上。

如果你在 iOS 中找不到任何东西，你可以尝试从 StatusNet 实现它的方式中获取一些更聪明的想法：http: [//status.net/sites/default/files/issues/1346_jquery.directionDetector.js](http://status.net/sites/default/files/issues/1346_jquery.directionDetector.js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-09T09:46:41.097

There is a solution that is based on the [language detection of the string](https://stackoverflow.com/questions/6325073/detect-language-of-nsstring).

Method returns `NSTextAlignmentNatural` if direction can not be identified.

```
@implementation NSString (StringAlignmentDetection)

- (NSTextAlignment)naturalTextAligment
{
    NSArray *tagschemes = [NSArray arrayWithObjects:NSLinguisticTagSchemeLanguage, nil];
    NSLinguisticTagger *tagger = [[NSLinguisticTagger alloc] initWithTagSchemes:tagschemes options:0];
    [tagger setString:self];
    NSString *language = [tagger tagAtIndex:0 scheme:NSLinguisticTagSchemeLanguage tokenRange:NULL sentenceRange:NULL];

    NSTextAlignment alignment = NSTextAlignmentNatural;

    if(!language)
    {
        return alignment;
    }

    NSLocaleLanguageDirection direction = [NSLocale characterDirectionForLanguage: language];

    switch (direction)
    {
        case NSLocaleLanguageDirectionLeftToRight:
            alignment = NSTextAlignmentLeft;
            break;

        case NSLocaleLanguageDirectionRightToLeft:
            alignment = NSTextAlignmentRight;
            break;

        default:
            alignment = NSTextAlignmentNatural;
            break;
    }

    return alignment;
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-06T12:20:59.670

The [ICU Project](http://site.icu-project.org/home) offers methods for what you are trying to achieve and on Xcode 11 it is possible to link the ICU library into an iOS application or iOS framework target. To do so, open your target and on the "General" tab under "Frameworks and Libraries" add `libicucore.tbd`.

[![Adding libicucore in Xcode](../Images/4b2178f385f0b887bdbb97b9fec20932.png)](https://i.stack.imgur.com/1NALA.png)

It might happen that Xcode chooses the macOS variant of the library if you do that in which case you'll see something like this in your project file.

```
ABCDEFGHIJKLMNOPQRSTUVWX /* libicucore.tbd */ = {isa = PBXFileReference; lastKnownFileType = "sourcecode.text-based-dylib-definition"; name = libicucore.tbd; path = Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk/usr/lib/libicucore.tbd; sourceTree = DEVELOPER_DIR; }; 
```

To force the iOS variant, simply edit the project file with a text editor to make the line look something like this

```
ABCDEFGHIJKLMNOPQRSTUVWX /* libicucore.tbd */ = {isa = PBXFileReference; lastKnownFileType = "sourcecode.text-based-dylib-definition"; name = libicucore.tbd; path = usr/lib/libicucore.tbd; sourceTree = SDKROOT; }; 
```

Unfortunately, the version of the library that ships with iOS is a bit older and doesn't include `ubidi_getBaseDirection`. There is, however, a method `u_charDirection` that you can use to rebuilt `ubidi_getBaseDirection`. Simply walk the characters in the string and return the direction of the first character with strong directionality. Below is an example of how to do this in Swift (Objective-C port should be straightforward).

```
enum Direction {
    case leftToRight
    case rightToLeft
    case neutral
}

func ubidi_getBaseDirection(of string: String) -> Direction {
    guard let data = string.data(using: .utf32) else {
        return .leftToRight
    }
    let chars = data.withUnsafeBytes { $0.bindMemory(to: UChar32.self) }
    for c in chars {
        let direction = u_charDirection(c)
        if direction == U_RIGHT_TO_LEFT || direction == U_RIGHT_TO_LEFT_ARABIC {
            return .rightToLeft
        } else if direction == U_LEFT_TO_RIGHT {
            return .leftToRight
        }
    }
    return .neutral
} 
```

Note that since `libicucore` is a pure C library, you'll need to add it to your bridging header / umbrella header if you're working in Swift. I've found the following to be enough.

```
#include "unicode/utypes.h" 
```

# tridion - 从文本框中删除所有文本会留下 标签

> ID：13397141
> 
> 赞同：1
> 
> 时间：2012-11-15T12:00:15.840
> 
> 标签：tridion, tridion-2011

我正在使用 Tridion 2011 SP1 和 Firefox 16.0.2、Internet Explorer 8、Internet Explorer 9 和 Chrome 23.0.1271.95。

当我在任何浏览器中打开一个组件并删除`Design`富文本字段视图中的所有文本时（多次按删除和退格键），我在`Source`视图中留下了各种标签。这些因浏览器而异。

*   火狐：`<br />`
*   铬合金 ：`<p><br /></p>`
*   IE8：`<p></p>`
*   IE9：`<p></p>`

我检查了[热修复](https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011_SP1/index.aspx)列表，没有任何相关内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:11:16.490

这听起来像是应该提交给 SDL 客户支持的错误。IE、Chrome 和 FF 的行为是否不同？

除非支持可以提供热修复，否则我认为您唯一的选择是使用过滤 XSLT 过滤掉单独的 BR（如 Frank 建议的那样）。创建新富文本字段时使用的默认 XSLT 过滤器包含此过滤，如下所示（最后一个`<template>`节点）。

```
<stylesheet version="1.0" xmlns="http://www.w3.org/1999/XSL/Transform">
    <output omit-xml-declaration="yes" method="xml" cdata-section-elements="script"></output>
    <template match="/ | node() | @*">
        <copy>
            <apply-templates select="node() | @*"></apply-templates>
        </copy>
    </template>
    <template match="*[      (self::br or self::p or self::div)     and      normalize-space(translate(., &apos; &apos;, &apos;&apos;)) = &apos;&apos;     and      not(@*)     and      not(processing-instruction())     and      not(comment())     and      not(*[not(self::br) or @* or * or node()])     and      not(following::node()[not(         (self::text() or self::br or self::p or self::div)        and         normalize-space(translate(., &apos; &apos;, &apos;&apos;)) = &apos;&apos;        and         not(@*)        and         not(processing-instruction())        and         not(comment())        and         not(*[not(self::br) or @* or * or node()])       )])     ]">
        <!-- ignore all paragraphs and line-breaks at the end that have nothing but (non-breaking) spaces and line breaks -->
    </template>
    <template match="br[parent::div and not(preceding-sibling::node()) and not(following-sibling::node())]">
        <!-- Chrome generates <div><br/></div>. Renders differently in different browsers. Replace it with a non-breaking space -->
        <text> </text>
    </template>
</stylesheet> 
```

# asp.net - Elmah 和 Sitecore 以及 404 错误处理

> ID：13397142
> 
> 赞同：0
> 
> 时间：2012-11-15T12:00:20.617
> 
> 标签：asp.net, error-handling, sitecore, elmah

您好我正在尝试使用 Sitecore 设置 ELMAH，我已阅读此[http://newguid.net/sitecore/2011/using-elmah-for-error-logging-within-sitecore/#t-recent](http://newguid.net/sitecore/2011/using-elmah-for-error-logging-within-sitecore/#t-recent) 它的解决方案工作正常从我的角度来看有一些错误。1\. ELMAH 在所有情况下都跳过存储 404 以存储在日志中 + 2\. 如果 URL 包含“.”，Sitecore 不处理 404 错误 字符。例如*http://mysite/wrongurl*将我重定向到 404.html 但*http://mysite/wrongurl.dfgd*向我显示应用程序中的服务器错误（IIS 7.5）（不是我的 404.html）这是我刚刚发布的设置ELMAH 和处理错误

```
 <configSections>
    <sectionGroup name="elmah">
        <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah"/>
    </sectionGroup>  
  </configSections>
  <elmah>
     <!-- NetKeyElmah inside of App_Config\ConnectionStrings.config  -->
    <errorLog type="Elmah.SqlErrorLog, Elmah" connectionStringName="ElmahData" />
  </elmah>
  <sitecore>
   <settings> 
      <setting name="ItemNotFoundUrl" value="/404.html" />      
      <setting name="LayoutNotFoundUrl" value="/404.html" />        
      <setting name="LinkItemNotFoundUrl" value="/sitecore/service/notfound.aspx" />
      <setting name="IgnoreUrlPrefixes" value="/sitecore/admin/elmah.axd|/sitecore/default.aspx" />
    </settings>
  </sitecore>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">      
      <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah"/>
    </modules>
    <handlers>      
      <add name="Elmah" path="/sitecore/admin/elmah.axd" verb="POST,GET,HEAD" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
    </handlers>        
  </system.webServer>
 <system.web> 
    <customErrors mode="On" defaultRedirect="/errorpage.html" >
      <error statusCode="404" redirect="/404.html" />
      <error statusCode="500" redirect="/500.html" />
    </customErrors>   
 </system.web> 
```

如何设置以正确的方式完成我的设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:01:01.660

回应2。

默认情况下，IIS 不会处理所有类型的文件。如果您希望 IIS 或 Sitecore 处理它无法识别的给定文件类型，您需要在 web.config 中指定它。更新 web.config 中的以下两个部分，以包含您希望 Sitecore 处理的文件类型：

`<param desc="Allowed extensions (comma separated)">aspx, ashx, asmx, asp</param>`

和

`<param desc="Allowed extensions (comma separated)">aspx,asp</param>`

在这些部分中，您将添加当前引发错误的文件扩展名，这将使 Sitecore 处理您的文件类型。

# c# - GPU (Nvidia) 加速保存 JPEG

> ID：13397144
> 
> 赞同：1
> 
> 时间：2012-11-15T12:00:36.603
> 
> 标签：c#, gpu, nvidia

我有一个 C# 应用程序，它使用 1080p 相机捕获 30fps 的实时视频。出于内部处理目的，它将每个捕获的帧保存为内存中的 JPEG，但这会对 CPU 造成严重影响。

有没有一种已知的方法可以将 JPEG 保存卸载到 Nvidia GPU？

只要性能有所提高，我可以采用任何解决方案，包括 C++、P/Invoke。

# apache-commons-dbcp - apache dbcp maxidle

> ID：13397146
> 
> 赞同：3
> 
> 时间：2012-11-15T12:00:52.610
> 
> 标签：apache-commons-dbcp

Apache DBCP 的 maxIdle 属性描述为：

"池中可以保持空闲的最大连接数，不会释放额外的连接，或者为负数表示没有限制。"

有人可以解释“没有额外的被释放”是什么意思。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T15:09:53.930

这里的“额外的”是指不活跃的连接

# ruby-on-rails - Janus 加载插件所有拆分和选项卡

> ID：13397147
> 
> 赞同：0
> 
> 时间：2012-11-15T12:00:54.737
> 
> 标签：ruby-on-rails, vim, vim-plugin

我正在使用 Janus 来管理我的 vim 插件。我意识到所有插件都只是一次加载。如果我打开更多拆分或选项卡。插件未加载。IE Rails 命令仅在我第一次打开 Nerdtree 的 vim 拆分中可用。如果我切换到另一个拆分 (ctrl+w) 或选项卡，则 rails 命令（可能还有其他插件）不可用。如果我在 nerdtree 拆分中运行 rails 命令，那么我不能再在此拆分中使用 nerdtree。我可以做任何调整来在所有拆分和选项卡中加载 rails.vim 吗？

编辑： Janus .vimrc 并没有太大帮助。但这是任何方式

> "" "" Janus 设置 ""
> 
> " 定义路径 let g:janus_path = escape(fnamemodify(resolve(expand(":p")), ":h"), ' ') let g:janus_vim_path = escape(fnamemodify(resolve(expand(":p" . "vim")), ":h"), ' ') 让 g:janus_custom_path = expand("~/.janus")
> 
> " Source janus 的核心 exe 'source' . g:janus_vim_path . '/core/before/plugin/janus.vim'
> 
> “您应该注意，Pathogen 将按照添加的相反顺序处理组。” 调用 janus#add_group("tools") 调用 janus#add_group("langs") 调用 janus#add_group("colors")
> 
> "" "" 自定义 ""
> 
> 文件类型插件
> 
> if filereadable(expand("~/.vimrc.before")) source ~/.vimrc.before endif
> 
> " 在加载病原体 exe 'source' 之前禁用插件。 g:janus_vim_path . '/core/plugins.vim'
> 
> "" "" 病原体设置 ""
> 
> " 加载所有组、自定义目录和 janus 核心调用 janus#load_pathogen()
> 
> " .vimrc.after 在插件加载后加载

# android - 如何从 Android 收件箱短信转换日期格式

> ID：13397149
> 
> 赞同：8
> 
> 时间：2012-11-15T12:01:00.473
> 
> 标签：android, date, inbox

我使用了这段代码：

```
String[] columnDate =   new String[] {"date"};
Cursor cursor1 = getContentResolver().query(Uri.parse("content://sms/inbox"),
    columnDate ,null, null, "date desc limit 1");
cursor1.moveToPosition(0);
String msgData1Date = cursor1.getString(0); 
```

..它可以工作，但以这种格式“1352933381889”给出日期
**如何转换为字符串类型的正常日期/时间格式？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T12:03:17.640

试试这个：

```
Date date = new Date(cursor1.getLong(0));
String formattedDate = new SimpleDateFormat("MM/dd/yyyy").format(date); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-15T12:09:38.967

您似乎以毫秒为单位收到日期。要将毫秒转换为 Date 对象：

```
long milliSeconds = cursor1.getLong(0);
DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss.SSS");
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(milliSeconds);
String finalDateString = formatter.format(calendar.getTime()); 
```

# java - xcode和java代码

> ID：13397151
> 
> 赞同：1
> 
> 时间：2012-11-15T12:01:08.427
> 
> 标签：java, objective-c, xcode, xcode4, mahout

我想问是否可以在我的 Xcode 中添加“Java”代码？

因为我想为用 Java 编写的推荐算法导入“Mahout apache”。

或者如果您有任何其他想法可以帮助我获得相关的“对象”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:07:40.423

你看过这个文件吗？

[http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/02-JavaDevTools/JavaDevTools.html](http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/02-JavaDevTools/JavaDevTools.html)

请记住，Java 不再是 Xcode 的一等公民。

这是来自一个男性列表

Mike Swingler 2011 年 3 月 11 日星期五 16:00:50 2011 年 3 月 10 日上午 10:37，Jeremy E. Denton 写道：

> 抱歉，我可能错过了它，因为我只是偶尔看一次，但是 XCode 停止支持 Java 了吗？还是我只需要下载某种扩展程序？

Xcode首先是一个Objective-C IDE，它的构建系统对Java的支持相当于调用任何其他命令行工具。Apple 的 Java 团队使用 Xcode 进行 JNI 库的本地开发和轻量级的 Java 编辑，但为了提高效率，您需要使用真正的 Java IDE，如 Eclipse、IDEA 或 NetBeans。

我们还将 Xcode 3.x 中的 JNI 库模板转换为示例代码，它展示了如何使用 JNI 库构建捆绑的 Java Mac 应用程序：http: [//developer.apple.com/library/mac/#samplecode/MyFirstJNIProject](http://developer.apple.com/library/mac/#samplecode/MyFirstJNIProject)

此致， Mike Swingler Java Engineering Apple Inc.

* * *

不要将管理员请求发布到列表中。他们将被忽略。Java-dev 邮件列表 ([EMAIL PROTECTED]) 帮助/取消订阅/更新您的订阅：

# c# - 运行时属性覆盖以获取历史数据

> ID：13397153
> 
> 赞同：0
> 
> 时间：2012-11-15T12:01:14.753
> 
> 标签：c#, .net, reflection

我目前正在完成对象更改日志功能的工作，并想完善一些东西。由于我们有很多应该出现历史数据的 Web 表单/报告，我想知道是否有一种方法可以在不更改控件/报告的情况下实现它。目前，我有这种情况：

```
public class Foo {
    public string Property1 { get; set; }
    public DateTime CreatedDate { get; set;}

    public string GetHistoricalValue(string propertyName) 
    {
        HistoryHelper historyHelper = CreateHistoryHelper(this);
        return historyHelper.GetHistoricalValue(propertyName, CreatedDate);
    }
...

public class HistoryHelper {
    public string GetHistoricalValue(string propertyName, DateTime date) {
    ... 
```

因此，当有人想要获取 Property1 的历史数据时：

```
string historicalValue = fooInstance.GetHistoricalValue("Property1"); 
```

很明显，这种方法需要对当前应用程序进行大量更改。当我以常规方式访问 Property1 时，有没有办法让 Foo 类返回历史值：

```
string historicalValue = fooInstance.Property1; 
```

诸如动​​态生成具有覆盖属性的子类或其他解决方案之类的东西？
这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:19:29.597

## 初步答复

像这样的东西：

```
public class Foo {
    public bool HistoricalMode { get; set; }

    private string _property1;
    public string Property1 { 
        get { 
            if (HistoricalMode) {
                return GetHistoricalValue("Property1");
            } else {
                return _property1;
            }
        set {
            if (HistoricalMode){
                throw new NotSupportedException("Updates not possible in historical mode.");
            } else {
                _property1 = value;
            }
        }
    }
    public DateTime CreatedDate { 
        get {
            // Similar pattern as above
        }
        set {
            // Similar pattern as above
        }
    }

    public string GetHistoricalValue(string propertyName) {
        HistoryHelper historyHelper = CreateHistoryHelper(this);
        return historyHelper.GetHistoricalValue(propertyName, CreatedDate);
    }
} 
```

基本上，这个想法是在您的对象中保留一个布尔值，表明对象处于“历史模式”。如果是这样，请使用您的辅助方法。如果不是，则应用普通属性 getter/setter。

## 更新

我认为这个问题的解决方案需要改变你的框架（如果你的所有应用程序都有一个框架）。我会以您加载对象的方式寻求解决方案。希望您可以检测到何时需要在“历史模式”下以及何时在“正常模式”下需要对象。您现在从数据库中“读取”对象（记录），在历史模式下，您需要从更改日志功能中组合原始对象（从更改发生时开始）。这样，您当前的所有应用程序都可以（希望）保持原样。您需要做的“唯一”更改是在存储库类中。

顺便说一句，这一切都只是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:16:37.380

您能否轻松影响`Foo`实例的创建方式？如果是这样，您可以例如创建 derived `class HistoricalFoo : Foo`、 make `Property1`virtual 并使用它的 getter 来改变它的行为。然后`HistoricalFoo`在需要历史数据时使用。它不是一个非常干净的对象模型，但可以完成工作。

```
public class Foo
{
    protected string _property1;
    public virtual string Property1
    {
        get { return _property1; }
        set { _property1 = value; }
    }

    public DateTime CreatedDate { get; set;}

    /* ... */
}

public class HistoricalFoo : Foo
{
    public override string Property1
    {
        get
        {
            return GetHistoricalValue("Property1");
        }
    }
} 
```

如果这不适用，则可以将一些决策逻辑嵌入到`Property1`getter 中。在这种情况下，您必须更改`Foo`实例的内部状态 - 例如通过设置布尔标志`IsInHistoryMode`。但是，更改对象状态可能非常棘手，尤其是在多线程环境中。

```
public class Foo
{
    public bool IsInHistoryMode { get; set; }

    protected string _property1;
    public virtual string Property1
    {
        get
        {
            if(IsInHistoryMode)
            {
                return GetHistoricalValue("Property1");
            }

            return _property1;
        }
        set
        {
            _property1 = value;
        }
    }

    public DateTime CreatedDate { get; set;}

    /* ... */
} 
```

# jquery - 在值 ajax 文件上传器中上传后清除文件列表

> ID：13397161
> 
> 赞同：2
> 
> 时间：2012-11-15T12:01:53.200
> 
> 标签：jquery, ajax, valums-file-uploader, fine-uploader

我终于设法让 valums 文件上传器在所有浏览器中工作。现在，一旦文件被上传，它仍然会在文件输入字段下方的 li 中显示刚刚上传的文件。我需要删除此 li，因为我正在提交带有 ajax 的完整表单，该表单在提交后会被重置。所以需要删除之前的文件名。

有什么帮助吗？

```
 <script type="text/javascript">

    var ID="";
    $(document).ready(function(e) {
         var uploader = new qq.FileUploader({
         element: document.getElementById('fine-uploader'),
         debug:true,
         action: '<?PHP echo base_url();?>index.php/teacher/addBook',
         allowedExtensions: ['jpeg', 'jpg', 'gif', 'png'],
         autoUpload:false,
         multiple:false,
                 template: '<div style="margin-left:0px !important; margin-top:10px" class="qq-uploader span3">' +
              '<pre class="qq-upload-drop-area span12"><span>{dragText}</span></pre>' +
              '<div class="qq-upload-button btn btn-success" style="width: auto;">{uploadButtonText}</div>' +
              '<ul class="qq-upload-list" style="margin-top: 10px; text-align: center; width:280px"></ul>' +
              '</div>',
        uploadButtonText: '<i class="icon-upload icon-white"></i> Upload Book Cover',
        onComplete:function(id,fileName,responseJSON){
            ID=responseJSON.id;
            },

        classes: {
            button: 'qq-upload-button',
            drop: 'qq-upload-drop-area',
            dropActive: 'qq-upload-drop-area-active',
            dropDisabled: 'qq-upload-drop-area-disabled',
            list: 'qq-upload-list',
            progressBar: 'qq-progress-bar',
            file: 'qq-upload-file',
            spinner: 'qq-upload-spinner',
            finished: 'qq-upload-finished',
            size: 'qq-upload-size',
            cancel: 'qq-upload-cancel',
            failText: 'qq-upload-failed-text',
            success: 'alert alert-success',
            fail: 'alert alert-error',
            successIcon: null,
            failIcon: null
        }

    });

    $("#add_book").click(function(){

            ready=true;
            if($("#name").val()=="")
            {
                $("#name").css('background-color','#FFF2F2').css('border-color','red'); ready=false;
            }

            if($("#author").val()=="")
            {
                $("#author").css('background-color','#FFF2F2').css('border-color','red'); ready=false;
            }

            if($("#isbn").val()=="")
            {
                $("#isbn").css('background-color','#FFF2F2').css('border-color','red'); ready=false;
            }

            if($("#subject").val()=="")
            {
                $("#subject").css('background-color','#FFF2F2').css('border-color','red'); ready=false;
            }
            if($("#ageGroup").val()=="")
            {
                $("#ageGroup").css('background-color','#FFF2F2').css('border-color','red'); ready=false;
            }
            if(ready)
            {
                uploader.setParams({name:$("#name").val(),author:$("#author").val(),isbn:$("#isbn").val(),subject:$("#subject").val(),age:$("#ageGroup").val()});
                uploader.uploadStoredFiles();
                $("#name").val("");
                $("#author").val("");
                $("#isbn").val("");
                $("#subject").val("");
                $("#ageGroup").val("")                      
            }

        });

    });
        </script>
            <div class="page">
           <div class="menu"><a href="#">Books</a> &nbsp;| &nbsp;<a href="#" class="active">Students</a></div>
                <h2>Add New Book</h2>
                                 <div class="send-form" id="book_form" >   

                          <p style="float:left">
                          <label>Book Title:</label>
                          <input class="u-3" name="name" id="name" />
                          </p>

                          <p style="float:right">
                          <label>Book Author</label>
                          <input class="u-3" name="author" id="author" />
                          </p>
                          <p style="float:left">
                          <label>Book ISBN</label>
                          <input class="u-3" name="isbn" id="isbn" />
                          </p>

                          <p style="float:right">
                          <label>Subject</label>
                          <input class="u-3" name="subject" id="subject" />
                          </p>

                           <p style="float:left">

                          <div id="fine-uploader" style="margin-left:0px !important">

                          </div>
                          </p> 
                          <p style="float:right; width:250px; margin-top:10px; margin-right:-10px">
                          <label>Age group (eg. 8-12)</label>
                          <input class="u-3" name="ageGroup" id="ageGroup" />

                          </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:37:53.973

Fine Uploader 3.0 具有重置/处置功能。当我写它时，我不是 100% 确定开发人员会如何使用它，所以它可能会使用一些改进，但除其他外，它会清除上传文件的列表（如果你使用的是 FineUploader，而不是 FineUploaderBasic ）。

请注意，3.0 计划于 11 月 19 日发布，但如果您愿意，现在可以构建快照版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:39:57.630

您必须包括：

```
 fnOnAdding: function(data)
    {   
      $('#fine-uploader').reset();
      return true;  
    }, 
```

但是，在我的情况下，使用可编辑的数据表它会重置整个表，而我期望只重置 FileUploader 相关的对象。除此之外它还有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:06:45.740

我不知道这是否是同一个问题，但请看一下这个主题：

[从上传列表中删除特定文件](https://stackoverflow.com/questions/11667020/delete-a-specific-file-from-the-list-of-uploads-using-valums-ajax-uploader)

好吧，我所做的是，在 fileuploader.js 中，我更改了文件模板，我将 ID 放入`<li>`列表中，所以在我的 HTML 文件（实际上是 aspx）中，我为它们编写了一个样式

在 fileuploader.js 中找到

```
fileTemplate: '<li id="listaArquivos">' +
            '<span class="qq-upload-file"></span>' +
            '<span class="qq-upload-spinner"></span>' +
            '<span class="qq-upload-size"></span>' +
            '<a class="qq-upload-cancel" href="#">Cancel</a>' +
            '<span class="qq-upload-failed-text">Failed</span>' +
        '</li>'

<style>
      #listaArquivos
        {
            display: none;
        }
</style> 
```

所以这已经随着列表消失了。

# lucene - ConstantScoreRangeQuery 没有为 ip 范围查询提供正确的结果

> ID：13397165
> 
> 赞同：1
> 
> 时间：2012-11-15T12:02:01.747
> 
> 标签：lucene, ipv6, ipv4

我`ConstantScoreRangeQuery`用于搜索 range 所在范围的所有 IP`0.0.0.0`地址`255.255.255.255`。这几乎是在搜索所有 IPv4 地址。

我正在将我的所有 IP 地址转换为字符串并为它们编制索引。例如，`0.0.0.0`成为`00000000`和`255.255.255.255`成为`ffffffff`每 2 个字符是一个八位字节的地方。

当我搜索 IP 地址时，我正在创建如下查询： `ConstantScoreRangeQuery(fldIdStr, "00000000", "ffffffff", true, true)`

我同时存储了 IPv4 和 IPv6。此查询也返回 IPv6。

我正在使用 Lucene (lucene-core-2.4.0.jar) 2.4.0；

如何仅获取 IP 范围内的 IPv4 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:55:21.630

> 我正在将我所有的 IP 地址转换为字符串并将它们编入索引

这种方法是错误的。[Javadoc](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/search/ConstantScoreRangeQuery.html)`ConstantScoreRangeQuery`说：

> 此查询根据 String.compareTo(String) 匹配查找落在所提供范围内的术语的文档。它不适用于数值范围，请改用 NumericRangeQuery。

您无法使用`String.compareTo(String)`.

您需要将 IP 地址索引为数字并定义逻辑，通过该逻辑来定义在（和超出）给定范围内的含义。

最重要的是，`ConstantScoreRangeQuery`已弃用并已在版本 3 中删除。您**确实**必须升级到更新的 Lucene 版本（现已推出 v4.0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:27:59.360

您可以将[TermRangeQuery](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/search/TermRangeQuery.html)与作为第六个参数传递给构造函数的自定义[Collat ​​or 一起使用。](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/Collator.html)

只需实现一个 Collat​​or，String.compareTo 应该可以很好地比较您指定格式的 IPv4 地址，除非我缺少某些东西。

为了消除 IPv6 匹配，您可以首先检查长度，根据非零长度差异返回正或负结果，如果长度相等，则仅返回 String.compareTo 的结果。

另一种选择，如果稍微更改索引格式可行，您可以在存储的值前面加上 IP 版本，例如：`v4ffffffff`或`v6ffffffffffffffff`. 在这种情况下，只要您始终将该前缀应用于每个值和查询，带有您声明的参数的标准 TermRangeQuery 应该可以很好地完成工作。

# c# - 检查从另一个应用程序启动的 dll 是否已经打开

> ID：13397166
> 
> 赞同：0
> 
> 时间：2012-11-15T12:02:03.260
> 
> 标签：c#, dll

我使用我编写的添加修改的应用程序（假设是应用程序 A）。

应用程序 A 具有允许脚本调用类库或 exe 文件的功能。它通过获取应用程序 A 创建的参数对象并将其传递到类库（我们称之为应用程序 B）来工作

应用程序 A 几乎是一个黑盒子，我不知道代码是什么样子或做了什么。我有一个脚本格式，它从应用程序 A 获取参数对象（包含有关调用程序的相关信息，例如：当前用户、用户语言、项目应用程序 B 是从等启动的）并将其传递给应用程序 B。此脚本功能使用作为应用程序 A 一部分的管理员面板进行设置。

启动器脚本必须使用`form.Show()`而不是`form.ShowDialog()`打开应用程序 B，因为用户必须能够在应用程序 B 打开时访问应用程序 A（数据检查等）。

现在我希望能够尽可能地防止应用程序 B 多次打开，因为它已经使用`form.Show()`而不是启动，`form.ShowDialog()`但是我似乎找不到合适的方法来执行此操作。

我首先尝试检查当前进程，但发现应用程序 B 未在此处列出，因为它是由应用程序 A 启动的。

1.  M3 销售自动化是应用程序 A
2.  新客户是应用程序 B

这可以从我的任务管理器的以下屏幕截图中看出：

![任务管理器（应用程序选项卡）](../Images/93927357021acc2a71697f8647601044.png) ![任务管理器（进程选项卡）](../Images/87d0230f46921a104ceffe17cb4ffd8f.png) M3 销售自动化和新客户都列在应用程序部分，但只有 M3 销售自动化列在流程部分。

最初我尝试访问这些进程，但发现由于它实际上没有在那里列出，所以我无法检查它，不得不更深入地查看。现在我做了更多检查，发现 NewCustomer.dll 列在当前进程的 ProcessModules 中。

我在启动器脚本中使用了以下代码来获取信息：

```
 public void GetProcessModules()
        {
            ProcessModuleCollection modules = Process.GetCurrentProcess().Modules;
            string modulesOutput = string.Empty;
            foreach (ProcessModule pm in processModuleCollection)
            {
                modulesOutput += pm.ModuleName + ";\r\n";
            }

            MessageBox.Show(modulesOutput, "Modules");
        } 
```

这输出了一长串属于应用程序 A 的 dll。现在我想我可以看看是否多次列出 NewCustomer.dll，如果发生这种情况，则阻止启动应用程序，因为它已经打开. 然而情况并非如此，NewCustomer.dll 无论打开多少次都只会列出一次。

所以现在我的下一个想法是看看我是否可以访问任务管理器应用程序选项卡中显示的内容。如果我的程序在那里列出，那么我想阻止它再次打开。

有谁知道如何实现这一目标？

我什至不确定我应该搜索什么，因为每次我尝试搜索时，我都会得到关于在此处不相关的流程中查找的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:31:34.617

在 Windows 任务管理器的应用程序选项卡中，您会看到系统中打开的窗口列表，但只有一个进程（1 个应用程序）在 2 个窗口上。

此代码用于在系统中搜索窗口。也许对您有用，因为您可以按“新客户”标题搜索，或者这可能是您未来研究的良好开端。

```
using System.Runtime.InteropServices;
using System.Text;

public class WndSearcher
{
    public static IntPtr SearchForWindow(string wndclass, string title)
    {
        SearchData sd = new SearchData { Wndclass=wndclass, Title=title };
        EnumWindows(new EnumWindowsProc(EnumProc), ref sd);
        return sd.hWnd;
    }

    public static bool EnumProc(IntPtr hWnd, ref SearchData data)
    {
        // Check classname and title 
        // This is different from FindWindow() in that the code below allows partial matches
        StringBuilder sb = new StringBuilder(1024);
        GetClassName(hWnd, sb, sb.Capacity);
        if (sb.ToString().StartsWith(data.Wndclass))
        {
            sb = new StringBuilder(1024);
            GetWindowText(hWnd, sb, sb.Capacity);
            if (sb.ToString().StartsWith(data.Title))
            {
                data.hWnd = hWnd;
                return false;    // Found the wnd, halt enumeration
            }
        }
        return true;
    }

    public class SearchData
    {
        // You can put any dicks or Doms in here...
        public string Wndclass;
        public string Title;
        public IntPtr hWnd;
    } 

    private delegate bool EnumWindowsProc(IntPtr hWnd, ref SearchData data);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool EnumWindows(EnumWindowsProc lpEnumFunc, ref SearchData data);

    [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    public static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);
} 
```

然后你会打电话：

```
// If you're viewing this page with IE, this *should* return the hwnd of the browser
IntPtr hWnd = WndSearcher.SearchForWindow("IEFrame", "pinvoke.net: EnumWindows"); 
```

来自[pinvoke.net](http://www.pinvoke.net/default.aspx/user32/EnumWindows.html)的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:09:00.040

实际上，在查看了上面发布的 jlvaquero 代码后，我在同一个站点上发现了以下内容

[EnumDesktopWindows (user32)](http://pinvoke.net/default.aspx/user32/EnumDesktopWindows.html)

我在我的 laucher 脚本中添加了以下 using 语句：

1.  `using System.Text;`
2.  `using System.Runtime.InteropServices;`

然后我将以下类添加到我的启动器脚本中

```
 /// <summary>
/// EnumDesktopWindows Demo - shows the caption of all desktop windows.
/// Authors: Svetlin Nakov, Martin Kulov 
/// Bulgarian Association of Software Developers - http://www.devbg.org/en/
/// </summary>
public class user32
{
    /// <summary>
    /// filter function
    /// </summary>
    /// <param name="hWnd"></param>
    /// <param name="lParam"></param>
    /// <returns></returns>
    public delegate bool EnumDelegate(IntPtr hWnd, int lParam);

    /// <summary>
    /// check if windows visible
    /// </summary>
    /// <param name="hWnd"></param>
    /// <returns></returns>
    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool IsWindowVisible(IntPtr hWnd);

    /// <summary>
    /// return windows text
    /// </summary>
    /// <param name="hWnd"></param>
    /// <param name="lpWindowText"></param>
    /// <param name="nMaxCount"></param>
    /// <returns></returns>
    [DllImport("user32.dll", EntryPoint = "GetWindowText",
    ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
    public static extern int GetWindowText(IntPtr hWnd, StringBuilder lpWindowText, int nMaxCount);

    /// <summary>
    /// enumarator on all desktop windows
    /// </summary>
    /// <param name="hDesktop"></param>
    /// <param name="lpEnumCallbackFunction"></param>
    /// <param name="lParam"></param>
    /// <returns></returns>
    [DllImport("user32.dll", EntryPoint = "EnumDesktopWindows",
    ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
    public static extern bool EnumDesktopWindows(IntPtr hDesktop, EnumDelegate lpEnumCallbackFunction, IntPtr lParam);
} 
```

然后我在我的启动脚本中添加了以下函数来调用新类并进行处理以发现活动窗口

```
/// <summary>
    /// Checks if application window open.
    /// </summary>
    /// <returns></returns>
    private static bool IfApplicationWindowOpen(string windowName)
    {
        List<string> collection = new List<string>();
        user32.EnumDelegate filter = delegate(IntPtr hWnd, int lParam)
        {
            StringBuilder strbTitle = new StringBuilder(255);
            int nLength = user32.GetWindowText(hWnd, strbTitle, strbTitle.Capacity + 1);
            string strTitle = strbTitle.ToString();

            if (user32.IsWindowVisible(hWnd) && string.IsNullOrEmpty(strTitle) == false)
            {
                collection.Add(strTitle);
            }
            return true;
        };

        if (user32.EnumDesktopWindows(IntPtr.Zero, filter, IntPtr.Zero))
        {
            foreach (string item in collection)
            {
                if (item.ToString().Equals(windowName))
                {
                    return true;
                    break;
                }
            }
        }
        return false;
    } 
```

最后我修改了我的启动功能以包括对活动窗口的检查

```
/// <summary>
    /// Starts the new customer.
    /// </summary>
    /// <param name="param">The param.</param>
    public static void StartNewCustomer(Parameter param)
    {
        string windowName = "New Customer";
        if (!IfApplicationWindowOpen(windowName))
        {

            GlobalFactory globalfactory = param.GlobalFactory;

            try
            {
                Generic objNewCustomer = new Generic();
                objNewCustomer.StartNewCustomerFromCustomer(param);
            }
            catch (TypeInitializationException tx)
            {
                globalfactory.ErrorHandler.Log(tx, (int)msmsError.ErrorSeverity.Major | (int)msmsError.ErrorSeverity.User);
            }
            catch (Exception ex)
            {
                globalfactory.ErrorHandler.Log(ex, (int)msmsError.ErrorSeverity.Major | (int)msmsError.ErrorSeverity.User);
            }
        }
        else
        {
            MessageBox.Show("The application " + windowName + " is already open", windowName + ": Launch Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

希望这可以帮助其他有同样问题的人

问候，

漫画编码器

# r - 从复制的 cor.test 中提取 p.values

> ID：13397172
> 
> 赞同：1
> 
> 时间：2012-11-15T12:02:26.993
> 
> 标签：r

我对一组随机变量进行了相关性检验。

复制（1000，cor.test（样本（v1），样本（v2）））

我想从向量中的每个测试中获取 p.values 以进行进一步分析，我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:08:06.177

如果您只需要复制的 p 值，您可以在复制中对其进行索引。`replicate`默认情况下，将简化数组中的结果（此处为向量）：

```
replicate(1000, cor.test(sample(rnorm(100)),sample(rnorm(100)))$p.value) 
```

# visual-studio - 如何跨计算机同步 Visual Studio 项目

> ID：13397173
> 
> 赞同：0
> 
> 时间：2012-11-15T12:02:27.910
> 
> 标签：visual-studio

我需要将本地 Visual Studio 解决方案同步到我的笔记本电脑，以便在旅行时继续使用它。目前，我从 TFS（在线版本）获得了解决方案的工作副本，在我的 PC 上进行处理，并在需要时手动将其复制到我的笔记本电脑上。

在我的 PC 上，我安装了 SkyDrive 客户端，它与我的 SkyDrive 帐户同步。我创建了一个临时 VS 解决方案并将其存储在本地 SkyDrive 文件夹中。在我处理它时，更改会同步到 SkyDrive，然后是我的笔记本电脑。如果我大量构建解决方案，显然会有相当多的同步，但总的来说它符合我的期望。

这似乎是一个可行的想法，但我想知道是否有其他人尝试过这种方法，以及它是否存在潜在问题？这是一个实用的想法吗？

另一种可能的想法是搁置集？

我正在使用 Windows 8 Pro 和 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:26:42.983

所以看起来 Shelvesets 就是答案。从我的 PC 中，我搁置我的更改，转到我的笔记本电脑，获取搁置集，对其进行处理，然后将其放回或签入。这似乎是一种比 SkyDrive 路线更清洁、更简单的方法。

# css - css下拉子菜单不等鼠标

> ID：13397174
> 
> 赞同：0
> 
> 时间：2012-11-15T12:02:33.400
> 
> 标签：css, submenu

**问题**：为什么当我将鼠标悬停在“关于”上时，会出现子菜单，但如果我尝试进入其中的任何项目，它就会消失？

我的 style.css 的一部分：

```
#menu {
    padding: 0 45px 0 45px;
    position: relative;
    background: #209D9D url(images/img02.gif) repeat-x top left;
    margin: 0 0 0 0;
    height: 60px;
    line-height: 60px;
    width: 890px;
    border-top: solid 1px #5AD7D7;
    text-shadow: 0 1px 1px #007D7D;
}

#menu a {
    text-decoration: none;
    color: #ffffff;
    font-size: 1.25em;
    letter-spacing: -1px;
}

#menu a:hover{
    color: #136F6F;
}

#menu ul {
    list-style: none;
    text-align: center;
}

#menu ul li {
    padding: 0 20px 0 20px;
    display: inline;
    position: relative;
    list-style: none;
}

#menu ul li.first {
    padding-left: 0;
}

#menu ul li:hover ul{
    visibility:visible;
}

#menu ul ul{
    position: absolute;
    top: 35px;
    visibility: hidden;
}

#menu ul ul li{
    position: relative;
    float: left;
    margin: 0;
    padding:0;
}

#menu ul ul li a{
    display: block;
    text-decoration:none;
    text-align: center;
    height: 55px;
    line-height: 55px;  
    width: 200px;
    background-color: #209D9D;
    color: white;
}
#wrapper {
    position: relative;
    width: 980px;
    margin: 75px auto 0 auto;
    background: #FFFFFF;
} 
```

我的 index.html 的一部分：

```
<div id="wrapper">
    <div id="menu">
            <ul>
                <li class="first current_page_item"><a href="#">Homepage</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Papers</a></li>
                <li><a href="#">Projects</a></li>
                <li><a href="#">About</a>
                    <ul>
                        <li><a href="#">Me</a></li>
                        <li><a href="#">Curriculum Vitae</a></li>
                        <li><a href="#">Contact Me</a></li>
                    </ul>
                </li>
                <!-- <li class="last"><a href="#">Contact</a></li> -->
            </ul>
            <br class="clearfix" />
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:09:22.123

将填充更改`#menu ul li`为`padding: 20px;`

玩转价值观。

[**现场演示**](http://jsfiddle.net/libinvbabu/8kqtJ/)

**编辑**

我没有更改`li`' 的填充，而是在 css 下面添加：

```
#menu ul li a {
    padding:20px 0;
}
#menu ul ul li a {
    padding: 0;
} 
```

[**在这里演示**](http://jsfiddle.net/libinvbabu/8kqtJ/1/)

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:16:33.060

您的菜单和子菜单之间有一个间隙，当您的光标越过这个间隙时，子菜单就会消失，尝试更改“top: 35px;” 在 "#menu ul ul" 到 "top: 20px;"

# javascript - 切换 Web 应用程序中内容的可见性

> ID：13397176
> 
> 赞同：1
> 
> 时间：2012-11-15T12:02:58.437
> 
> 标签：javascript, toggle

这个问题不是关于如何切换 div。而是如何在大型 Web 应用程序中切换可见性。我的网络应用程序只需要在 Chromium (Webkit) 上运行。我遇到的问题可能与基础设施和最佳实践更相关，我想知道是否有人有这方面的经验。

我的应用程序在 node-webkit 上运行，这意味着所有文件都是本地文件，并且加载速度很快。为了感觉非常活泼，我尽可能将所有内容添加到 DOM 中。我想远离使用 Javascript 更改我的应用程序的状态，所以不`$('.view-projects').addClass('visible');`。因为它很快就会变得乱七八糟，而且我觉得这不是JS的任务。

相反，我选择的方法是这样的。

```
// javascript sample (I actually code in CoffeeScript)
// catch all click events on elements with data-trigger attributes
app.on('view:addProject', function () {
  // add a class to the root view
  $('#app').addClass('view-addProject');
}): 
```

标记：

```
<!-- markup sample -->
<div id="app">
   <div class="projects">
      <div data-trigger="view:addProject"></div>
      <div>etc.</div>
   </div>

   <div class="addProject">
     etc.
   </div>       
</div> 
```

css，用作状态机：

```
app.view-addProject .addProject {
   visibility: visible;
   display: block;
} 
```

我想知道的是其他人是否尝试过这样的事情，是否有其他方法的良好经验等。或者我可能遗漏了什么，我觉得我在动态内容方面遇到了麻烦。

注意：我不能简单地使用显示/隐藏，因为我的元素使用`display: -webkit-flex/-webkit-box;`等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T02:25:36.700

如果您想切换可见性，这里有一些替代方法：

*   通过 CSSOM 更改 CSS 来控制状态
*   通过改变数据属性改变状态
*   通过更改 DOM nodeNames 更改状态

# java - 在上下文（非）敏感分析中，“上下文”到底是什么意思？

> ID：13397180
> 
> 赞同：5
> 
> 时间：2012-11-15T12:03:21.057
> 
> 标签：java, static-analysis, dataflow

这个问题之前被[问过](https://stackoverflow.com/questions/3918083/what-exactly-is-a-context-in-java)，但答案非常笼统。我很想知道在静态代码分析的上下文中**上下文**意味着什么，特别是在 Java 中以及与术语*上下文（非）敏感分析*结合使用时。

例如[，本文](http://suif.stanford.edu/papers/pods05.pdf)在此上下文中广泛使用了“上下文”。事实上，我还没有找到一个体面的上下文定义。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T12:09:44.420

您链接到的问题中的“上下文”一词似乎并未用于描述静态分析，因此您的问题确实是另一个问题。我不认为**这个**问题的答案是“通用的”。但它们绝对不是您正在寻找的具体答案。

[上下文相关分析](http://en.wikipedia.org/wiki/Data-flow_analysis#Sensitivities)是一种过程间分析，在分析函数调用的目标时会考虑调用上下文。

以下是上下文相关分析如何工作的示例：

```
int a,b;

int *x;

void f(void)
{
  ++*x;
}

int main(){
  x = &a;
  f();

  x = &b;
  f();
} 
```

这不是 Java，但您的问题主要是关于数据流分析中的上下文敏感性，所以我希望它不会太令人不安。

上下文相关分析器`f()`在此程序中分析（至少）两次，因为它是从调用站点调用的。这使它变得精确，因为`f()`每次的效果都完全不同。上下文相关的分析可以推断`a==1`和`b`在第一次调用之后没有变化，并且在第二次调用之后两者`a`和`b`都是`1`。上下文敏感性也使分析变得昂贵。

上下文不敏感的分析只会分析`f()`一次，并且通常只会产生“<code>f() 修改`a`或`b`，因此在任何调用之后`f()`，这两个变量的内容都是未知的”类型的信息。

# c# - 扩展方法需要“this”？

> ID：13397181
> 
> 赞同：0
> 
> 时间：2012-11-15T12:03:23.990
> 
> 标签：c#, asp.net, extension-methods

> **可能重复：**
> [为什么从扩展类中调用扩展方法需要“this”关键字](https://stackoverflow.com/questions/3510964/why-is-the-this-keyword-required-to-call-an-extension-method-from-within-the-e)

使用 Visual Studio 2012

`System.Web.UI.MasterPage`Sitefinity 5.*在命名空间中定义了一些扩展方法`Telerik.Sitefinity.Web.UI`。

如果我包含对该命名空间的引用，我可以使用一种特定的扩展方法来指示页面正在正常呈现，或者由内部搜索引擎呈现：

```
using Telerik.Sitefinity.Web.UI;

namespace MyWebApp
{
    public partial class MyMasterPage : System.Web.UI.MasterPage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            /// hide common page elements.
            /// GetIndexRenderMode() returns "Normal" if the page is being rendered
            /// normally, but not if the search engine is indexing the page.
            if (this.GetIndexRenderMode() != IndexRenderModes.Normal)
            {
                headerPlaceholder.Visible = false;
                footerPlaceholder.Visible = false;
                navigationPlaceholder.Visible = false;
            }
        }
    }
} 
```

但是，如果我`this`从`if(...)`语句中删除，编译器将不再找到扩展方法。

是什么赋予了？`this`除了解决类成员和接口成员或参数之间的歧义之外，我以前从未见过有必要的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:07:39.563

每个扩展方法都是某个类的扩展。
您需要该类的实例才能使用扩展。
在您的情况下，扩展名用于 MasterPage 的实例，并且您在 MasterPage 的派生实例中使用它。因此，您需要`this`

# hadoop - Pig Latin 中的 FOREACH 多个数据

> ID：13397182
> 
> 赞同：0
> 
> 时间：2012-11-15T12:03:24.107
> 
> 标签：hadoop, apache-pig

我可以在 Pig Latin 中做这样的事情吗？

```
data1 = LOAD 'hadoop/text1.txt' AS (line:chararray);
data2 = LOAD 'hadoop/text2.txt' AS (line:chararray);

mixed = FOREACH data1, data2 GENERATE data1:line, data2:line; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:55:27.787

一般来说，按照您的要求去做是没有意义的，因为数据将由多个映射器加载，可能一次加载一行。不能保证对应的行会被同一个映射器看到，也不能保证映射器知道他们正在读取哪个块的哪一行。正如 WinnieNicklaus 所提到的，最好的办法是标记线条并进行连接。

# macos - Sublime Text 2 - 自动完成问题

> ID：13397183
> 
> 赞同：0
> 
> 时间：2012-11-15T12:03:27.830
> 
> 标签：macos, sublimetext2, sublimetext

我喜欢 Sublime 文本，但我想在自动完成上配置一些东西：

**HTML：标签内属性的自动完成** 当向 div 添加类属性时，我必须使用 control+space 来获取自动完成列表，有没有办法在向标签添加属性时自动启动它？

**HTML：添加等号和引号** 当自动完成类属性时，我必须输入等号和引号，它们可以自动添加吗？

**CSS：属性值的自动完成** 当我自动完成一个属性时，例如位置，我必须添加一个空格并按 control+space 或开始输入以获取值自动完成列表。有没有办法在属性自动完成之后直接显示这个列表？

我已经尝试搜索现有的解决方案但找不到，所以我希望有一些我可以修改的配置文件！任何为我指明正确方向的帮助将不胜感激！谢谢！

达伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:33:31.723

尝试`control`++ - `shift`>`p`设置语法 HTML 以便在 html 标签上自动完成

也安装：[http](http://wbond.net/sublime_packages/package_control) ://wbond.net/sublime_packages/package_control （简化包安装过程）

和 emmet：[https](https://github.com/sergeche/emmet-sublime) ://github.com/sergeche/emmet-sublime （使编写 html/css 快 x 倍）

有关配置 sublime 文本的更多信息，您可以查看： http: [//net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-tips-and-tricks/](http://net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-tips-and-tricks/) 和 [http://net.tutsplus。 com/articles/news/perfect-workflow-in-sublime-text-free-course/](http://net.tutsplus.com/articles/news/perfect-workflow-in-sublime-text-free-course/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:27:44.727

如果您没有安装[Package Control](http://wbond.net/sublime_packages/package_control)，请先安装。接下来通过ST2的Package Control找到[Tag包并安装。](https://github.com/SublimeText/Tag)我相信这就是您要寻找的那个，否则[Emmet（Zen Coding）](https://github.com/sergeche/emmet-sublime)可能就是我想要的那个。无论哪种方式，请确保您的文档语法设置为 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:03:07.950

明确地为自动完成安装第一个[包控制](http://wbond.net/sublime_packages/package_control)和他们从调色板命令中的 Emmet，只需搜索“emmet”并输入。

# hsqldb - hsqldb单引号字符

> ID：13397186
> 
> 赞同：2
> 
> 时间：2012-11-15T12:03:30.900
> 
> 标签：hsqldb

如何将单引号字符插入 Hsqldb 表？转义字符不适用于该问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:59:56.337

有两种方法。

1.  使用两个单引号。例如`INSERT INTO T VALUES 'escap''d'`

2.  使用可以包含 Unicode 转义的 Unicode 字符串。例如`INSERT INTO T VALUES U&'escap\0027d'`

这两个示例都将字符串`escap'd`插入到表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T17:01:06.970

这个问题很老，但我找到了 fredt 的答案，但它让我误入歧途，因为它实际上并没有按照原始海报的要求插入单引号。相反，它插入了 escap'd，这不是我想要做的。

这可能是过去的唯一方法（Fred 会比我更清楚），但现在在 hsqldb 中插入单引号的最简单方法是**在 java** (p_insert) 中创建一个准备好的语句并设置字符串：

p_insert.setString(1,"'"); p_insert.executeUpdate();

这实际上会在数据库中添加一个单引号，至少在 2.3.2 版本中是这样。要从数据库中检索它，您需要在 SELECT 语句中使用**双单引号**。

# javascript - 将 null 传递给 Function.call()

> ID：13397187
> 
> 赞同：-1
> 
> 时间：2012-11-15T12:03:38.500
> 
> 标签：javascript

```
function outerFun(arg1, arg2, arg3){

    function innerFun(arg1, arg2){
        //do something
    }

    var innerArgs = Array.prototype.slice.call(arguments, 1);
    innerFun.apply(null, innerArgs);
} 
```

如您所见，我正在尝试使用不同函数的修改参数数组调用函数。我能想到的唯一方法是使用 apply() 方法并传递切片数组。我的问题是，有没有其他方法可以做到这一点？如果没有，那么我可以将 null 传递给 apply() 还是被认为是不好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:11:07.670

> 我的问题是，有没有其他方法可以做到这一点？

不，[`apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)是 JavaScript 中唯一能够以数组作为参数运行函数的方法。但是，您仍然可以使用实际参数并使用函数：

```
function outerFunc(arg1, arg2, arg3){
    /* ... */
    innerFun(arg2, arg3);
    /* ... */
} 
```

> 如果没有，那么我可以将 null 传递给 apply() 还是被认为是不好的做法？

你可以，而且这不被认为是不好的做法。该函数的行为就像您在全局上下文中使用它一样。这也使您能够在带有多个参数的函数上使用数组。

也可以看看：

*   MDN: [`apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply):[`apply`和内置函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply#apply_and_built-in_functions)

# asp.net-mvc-3 - 用户身份验证和浏览器后退/前进按钮

> ID：13397191
> 
> 赞同：0
> 
> 时间：2012-11-15T12:04:08.780
> 
> 标签：asp.net-mvc-3

我在我的项目中使用 Asp.net MVC 3。我有一个简单的登录页面，其中包含用户名和密码，成功登录后，将我带到所需的页面。

问题是当我从浏览器按下**后退按钮，然后一次又一次地按下****前进**按钮时，它会再次将我带到页面而没有从用户那里获取用户名和密码。

我不知道，可能是会话状态的问题。因为我没有进行任何会话，我也不知道如何进行。

请那里的任何人帮助我减轻这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:22:08.627

您的会话 id 存储在 cookie 中，成功验证后，cookie 会存储在您的机器上，当您在历史中前进时，它不会被删除。

如果您在每次访问登录页面时使用以下命令明确清除 cookie：

```
Session.Abandon() 
```

这将终止经过身份验证的会话并创建一个新的匿名会话，该会话不应访问受限页面

# url - 在 Umbraco 4.7.2 中导航到数字页面 url（博客日期文件夹）时找不到页面

> ID：13397193
> 
> 赞同：2
> 
> 时间：2012-11-15T12:04:14.910
> 
> 标签：url, data-structures, blogs, umbraco

这是我的内容结构：

```
Root node
- Page
- Blog
- - 2012
- - - 09
- - - - Blog post 
```

根节点主机名是**test.local**，博客文件夹主机名是**blog.test.local**

Web.config：**umbracoUseDirectoryUrls=true，umbracoHideTopLevelNodeFromPath=true** umbracoSettings.config：**useDomainPrefixes=true，addTrailingSlash=true**

导航到**blog.test.local/2012/**时，它会给出“找不到页面”错误页面。但是，当我转到**test.local/blog/2012/**时，页面正在正确呈现。我了解 Umbraco 在获取 /2012/ 请求时尝试按 ID 加载页面，但为什么节点 url 没有优先级？我错过了配置中的任何东西吗？

PS 如果我设置**umbracoUseDirectoryUrls=false** blog.test.local/ **2012.aspx**也不起作用。

umbraco v 4.7.2（程序集版本：1.0.4500.21031）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:42:40.647

这是 Umbraco 中的一个错误。我在这里提交了一个错误报告：http: [//issues.umbraco.org/issue/U4-634](http://issues.umbraco.org/issue/U4-634) 给它投票！

此处讨论了该错误：http: [//our.umbraco.org/forum/ourumb-dev-forum/bugs/31454-472-breaks-all-URL-paths-that-parse-to-a-number,-类似 2012 年的例子](http://our.umbraco.org/forum/ourumb-dev-forum/bugs/31454-472-breaks-all-URL-paths-that-parse-to-a-number,-like-2012-for-example)

# ninject - ninject 拦截器 - 辅助方法

> ID：13397199
> 
> 赞同：0
> 
> 时间：2012-11-15T12:04:45.237
> 
> 标签：ninject, aop, interceptor

我有一个简单的界面：

```
public interface ITest
{
      void Method1();
      void Method2();
} 
```

和实施：

```
public class Test:ITest
{
      public void Method1()
      {

      }
      public void Method2()
      {
           //Method1();
      }
} 
```

自定义拦截器：

```
public class CustomInterceptor:IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
          invocation.Proceed();
    }
} 
```

现在，当我在那里执行两种方法时：

```
ITest obj = getting through ninject
obj.Method1();
obj.Method2(); 
```

我的拦截器调用了两次没关系。但是当我取消注释 Method2() 的主体时，不会调用 Method1() 的拦截器。我正在寻找该怎么做，因为我希望拦截器被解雇。当我从第二个调用 Method1 时，我知道生成的代理不会调用它，这就是它不起作用的原因。但是有可能以同样的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:34:32.103

Ninject 围绕 Test 类的实际实例创建一个代理对象。您的方法不是虚拟的，因此应该使用“new”而不是“override”来创建代理的任何覆盖。因此，如果您从 Method2 调用 Method1，则没有虚拟查找来找到代理并调用它。

# vba - VBA循环和变量 - 找到空白行并将行号放入变量中

> ID：13397201
> 
> 赞同：1
> 
> 时间：2012-11-15T12:05:01.407
> 
> 标签：vba, excel

![在此处输入图像描述](../Images/b62392367a71e28d21a7ad2c334bd2db.png)我正在编写一个循环遍历 Excel 数据的宏，该数据按 A 列排序，如果 coulmn 的值与上面的值不同，则插入一个空白行。这会将我的数据按 A 列分组。

然后我想对分离组的 d 列的值求和。我的大部分代码都在下面工作，但是我遇到了问题的 startCell 变量。我知道我想做什么，但无法正确理解逻辑，有人可以帮助总结这些个人群体。

非常感谢

```
Sub PutARowInWithFormula()
  Range("A3").Select

  Dim startCell As Integer
  Dim endCell As Integer

  startCell = 3
  endCell = 0

  Do Until ActiveCell.Value = ""
    If ActiveCell.Value = ActiveCell.Offset(-1, 0).Value Then
      ActiveCell.Offset(1, 0).Select
    Else
      ' I need the bottom code to execute only once in the loop
      ' startCell = ActiveCell.Row
      ActiveCell.EntireRow.Insert

      ' move to column d
      ActiveCell.Offset(0, 3).Select

      endCell = ActiveCell.Row - 1
      ActiveCell.Formula = "=Sum(d" & startCell & ":d" & endCell & ")"

      ' move back to column a
      ActiveCell.Offset(0, -3).Select

      'move 2 rows down
      ActiveCell.Offset(3, 0).Select
    End If
  Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:02:20.350

我也很想知道，为什么您不使用数据透视表或仅使用工作表函数创建它，这也是可能的。此外，我不太喜欢这种选择尝试，但它是你的方式，我尊重这一点。*当使用它们可能是一个好*主意时，它甚至似乎是一个很好的例子。因为现在，我能想到的任何其他方式，在 VBA 中执行此操作，似乎都更复杂。

因此，这是您的代码的修复：

```
Sub PutARowInWithFormula()
  Range("A2").Select

  Do Until ActiveCell.Value = ""
    If ActiveCell.Value = ActiveCell.Offset(-1, 0).Value Then
      ActiveCell.Offset(1, 0).Select
    Else
      ActiveCell.EntireRow.Insert

      'you can use the offset directly
      'by using an improved formula, you do not need to know start and end row.
      ActiveCell.Offset(0, 3).Formula = _
        "=SUMIF(A:A,OFFSET(INDIRECT(""A""&ROW()),-1,0),D:D)"

      ' move back to column a and move 2 rows down
      ActiveCell.Offset(2, 0).Select
    End If
  Loop
End Sub 
```

*编辑*

好的，找到了一种更简单的方法来做*几乎*同样的事情：

```
Public Sub demo()
  UsedRange.Subtotal GroupBy:=1, Function:=xlSum, TotalList:=4
End Sub 
```

此功能也可通过*功能区菜单 -> 数据 -> sumsum 使用*

为了避免错误消息，您只需要为您的数据设置一个标题行，例如：

*日期 | 姓名 | 柜台 | 价值*

# eclipse - Eclipse：更改 Maven pom.xml 文件中的 webapp 文件夹

> ID：13397202
> 
> 赞同：8
> 
> 时间：2012-11-15T12:05:04.143
> 
> 标签：eclipse, maven, web-applications, pom.xml

是否可以为 webapp 文件夹定义与 pom.xml 中的标准文件夹（“/src/main/webapp/”）不同的位置？我知道你可以定义你的网络文件夹

```
<wb-resource deploy-path="/" source-path="/webapp"/> 
```

在一个名为“org.eclipse.wst.common.component”的文件中。问题是当我单击 Maven -> Update Project 时，此行被标准覆盖

```
<wb-resource deploy-path="/" source-path="/src/main/webapp"/> 
```

然后我在 Eclipse 中使用 Tomcat7 测试我的项目时遇到问题。我非常感谢每一个提示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T21:01:35.550

[如何配置自定义 maven 项目结构](https://stackoverflow.com/questions/13390239/how-to-configure-custom-maven-project-structure)中的答案对于纯粹的 Maven 构建（即从命令行）就足够了。当将项目导入 Eclipse（通过 m2e）时，您需要告诉 m2e 更多信息，以便它可以在 Eclipse 中正确创建和维护项目结构。

实际上，从 Eclipse 的角度来看，它并不真正关心您的项目文件夹结构是什么样的，只要将 webapp 文件夹声明为源文件夹或在源文件夹中，但是，通过修改 .classpath 并没有多大意义感觉，因为它是一个自动生成的文件，并且经常更改。

如果您能够使用以下配置进行自定义，强烈建议您遵守约定：

```
<build>
  <resources>
    <resource>
      <directory>${basedir}/webapp</directory>
    </resource>
    ... ...
  </resources>
  ... ...
</build> 
```

# ruby-on-rails-3 - 显示出现次数最多的国家 Rails 3

> ID：13397210
> 
> 赞同：0
> 
> 时间：2012-11-15T12:05:40.990
> 
> 标签：ruby-on-rails-3, activerecord

我有一个国家模型，想显示出现次数最多的国家，国家名称保存在“mame”列中，但是国家数据库是预先填充的，关系是一个国家

```
has_many recipes 
```

和食谱

```
 belongs_to country 
```

到目前为止我有

```
Country.group('name').order('count_name DESC').limit(1).count('name') 
```

但这行不通，因为表中每个国家/地区都有 1 个？我需要计算使用 country_id 的次数吗？如果是这样，那么语法是什么？可不可能是

```
Recipe.group('country_id').order('count_country_id DESC').limit(1).count('country_id') 
```

或使用连接并选择

```
Country.joins(:recipes).select('countries.*, count(country_id) as "country_count"').group(:country_id).order(' country_count desc') 
```

任何指针表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:10:57.170

您可以通过使用查询来做到这一点。但是，RoR 已内置支持以实现相同的目标。它被称为计数器缓存。

我可以在这里解释，但我认为如果你关注这个截屏视频会更好。

[http://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

这将使您很好地了解如何使用计数器缓存并获得您试图实现的目标。

# jquery - 我可以在我的 jquery 脚本中使用按钮的 id 作为点击功能吗？

> ID：13397212
> 
> 赞同：-3
> 
> 时间：2012-11-15T12:05:50.257
> 
> 标签：jquery, function, tags, click, href

每次我尝试将以下代码添加到我的网站时，`<a href>`页面上的每个链接都会打开。如何在不打开每个`<a href>`链接的情况下使此代码正常工作，而不是使用单击功能，我可以使用按钮及其 id 代替吗？

```
<!DOCTYPE html>
<html>
<head>
  <style>
      p.one { position:relative; width:400px; height:90px; }
      div.two { position:absolute; width:400px; height:65px; 
        font-size:36px; text-align:center; 
        color:yellow; background:red;
        padding-top:25px; 
        top:0; left:0; display:none; }
        span.three { display:none; }
      </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <p class="one">
        Let it be known that the party of the first part
        and the party of the second part are henceforth
        and hereto directed to assess the allegations
        for factual correctness... (<a href="#">click!</a>)
        <div class="two"><span class="three">Click here to continue...</span></div>

      </p>
<script>
        $("a").click(function () {
          $("div").fadeIn(3000, function () {
            $("span").fadeIn(100);
          });
          return false;
        }); 

      </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:09:37.610

您可以使用`this`引用单击元素的关键字。

```
$(function() {
   $(".one a").click(function(event) {
      $(this).next('div').fadeIn(3000, function(){
         $('span', this).fadeIn();
      })
      event.preventDefault();
   }); 
}) 
```

请注意，您的标记是无效的，在 P 标签中使用 DIV 标签会使您的文档无效且不*语义*，大多数浏览器将 DIV 元素放在 P 标签之外，您当前的代码仅因为您选择了所有 DIV 元素而起作用，如果您根据当前标记（*如我所做*的）遍历 DOM，您将得到意想不到的结果。

```
<div class="one">
    <p>
       Let it be known that the party of the first part
       and the party of the second part are henceforth
       and hereto directed to assess the allegations
       for factual correctness...
    </p>
    <a href="#">click!</a>
    <div class="two"><span class="three">Click here to continue...</span></div>
</div> 
```

还要注意，当一个父元素被隐藏时，它的所有子元素也都被隐藏了，所以不需要隐藏子元素并一一显示。隐藏和显示父元素就足够了。

[http://jsfiddle.net/BhJJa/](http://jsfiddle.net/BhJJa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:07:58.397

您需要通过 jquery使用[**id 选择器。**](http://api.jquery.com/id-selector/)

```
$("#YourButtonId").click(function () {
      $("div").fadeIn(3000, function () {
        $("span").fadeIn(100);
      });
      return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:11:31.477

这是因为您将单击事件绑定到`<a>`HTML 文档中的每一个。你需要给你 button/a 一个 id 来用 jQuery 选择它

**jQuery**

```
$("#btnID").click(function() {
 $("div").fadeIn(3000, function () {
  $("span").fadeIn(100);
 });
 return false;
}); 
```

**HTML**

```
<a href="javascript:void(0);" id="btnID">click!</a> 
```

您也可以将其与`<button>`标签一起使用。

# python - 奇怪的 Django 输出

> ID：13397215
> 
> 赞同：0
> 
> 时间：2012-11-15T12:06:06.357
> 
> 标签：python, django

我已经安装了 transifex - django 应用程序。一切看起来都不错，但是如果我运行：

```
./manage runserver 8000 
```

我收到错误消息（如下）。由于我是不方便的 django 用户，据说这是一些简单的错误/错误。不幸的是，我无法发现问题所在。任何线索将不胜感激！谢谢，托马斯

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.3.1
Python Version: 2.7.3
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.comments',
 'django.contrib.contenttypes',
 'django.contrib.flatpages',
 'django.contrib.humanize',
 'django.contrib.markup',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sites',
 'django.contrib.admindocs',
 'staticfiles',
 'notification',
 'django_filters',
 'django_sorting',
 'south',
 'tagging',
 'tagging_autocomplete',
 'pagination',
 'piston',
 'contact_form',
 'ajax_select',
 'threadedcomments',
 'authority',
 'haystack',
 'social_auth',
 'userena',
 'guardian',
 'easy_thumbnails',
 'djcelery',
 'djkombu',
 'compressor',
 'transifex.txcommon',
 'transifex.languages',
 'transifex.projects',
 'transifex.releases',
 'transifex.actionlog',
 'transifex.txpermissions',
 'transifex.teams',
 'transifex.resources',
 'django_addons',
 'autofetch',
 'charts',
 'cla',
 'copyright',
 'datastores',
 'gtranslate',
 'helptext',
 'jsonmap',
 'locks',
 'lotte',
 'priorities',
 'suggestions',
 'timeline',
 'trans_memory',
 'txapps',
 'txcron',
 'txtestsuite',
 'watches',
 'webhooks',
 'widgets']
Installed Middleware:
['django.middleware.cache.UpdateCacheMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.doc.XViewMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django_sorting.middleware.SortingMiddleware',
 'pagination.middleware.PaginationMiddleware',
 'userena.middleware.UserenaLocaleMiddleware',
 'django.middleware.cache.FetchFromCacheMiddleware']

Traceback:
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/core/handlers    /base.py" in get_response
  101\.                             request.path_info)
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/core/urlresolvers.py" in resolve
  252\.                     sub_match = pattern.resolve(new_path)
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django   /core/urlresolvers.py" in resolve
  252\.                     sub_match = pattern.resolve(new_path)
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/core/urlresolvers.py" in resolve
  250\.             for pattern in self.url_patterns:
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/core/urlresolvers.py" in _get_url_patterns
  279\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django   /core/urlresolvers.py" in _get_urlconf_module
  274\.             self._urlconf_module = import_module(self.urlconf_name)
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/usr/lib/python2.7/site-packages/transifex-1.3.0devel-py2.7.egg/transifex/addons/cla/urls.py" in <module>
  2\. from transifex.projects.urls import PROJECT_URL
File "/usr/lib/python2.7/site-packages/transifex-1.3.0devel-py2.7.egg/transifex/projects/urls/__init__.py" in <module>
  6\. from transifex.projects.feeds import LatestProjects, ProjectFeed,    ProjectTimelineFeed
File "/usr/lib/python2.7/site-packages/transifex-1.3.0devel-py2.7.egg/transifex/projects/feeds.py" in <module>
  11\. current_site = Site.objects.get_current()
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/contrib/sites/models.py" in get_current
  25\.             current_site = self.get(pk=sid)
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/db/models/manager.py" in get
  132\.         return self.get_query_set().get(*args, **kwargs)
File "/usr/lib/python2.7/site-packages/Django-1.3.1-py2.7.egg/django/db/models/query.py" in get
  349\.                     % self.model._meta.object_name)

Exception Type: DoesNotExist at /
Exception Value: Site matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:56:04.593

首先运行`python manage.py syncdb`。然后在 django shell 中检查这个查询：

```
Site.objects.get(id=1) 
```

如果`DoesNotExist`引发错误，请`Site`手动创建对象：

```
Site.objects.create(name='example.com', domain='example.com') 
```

# entity-framework - 从 EF DbContext 中驱逐项目

> ID：13397216
> 
> 赞同：2
> 
> 时间：2012-11-15T12:06:06.253
> 
> 标签：entity-framework, stored-procedures, dependency-injection, ef-code-first, dbcontext

在我的项目中，我使用的是 EF Code First 4.3。有时，我必须调用执行繁重操作的存储过程，并且该操作会修改某些实体，但由于 EF DbContext 标识映射，除非创建新的 DbContext，否则我无法看到更改。

有没有办法在不重新创建 DbContext 的情况下做到这一点？我通过依赖注入得到它，我不想打破它，因为它非常方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:28:56.780

我认为您无法清除缓存，但您可以强制上下文重新加载特定实体。

**要重新加载单个实体：**

```
context.Entry(entity).Reload(); 
```

**要重新加载特定类型的所有实体：**

```
foreach (DbEntityEntry<T> entry in context.ChangeTracker.Entries<T>())
{
   entry.Reload();
} 
```

**重新加载所有实体：**

```
foreach (DbEntityEntry entry in context.ChangeTracker.Entries())
{
   entry.Reload();
} 
```

# javascript - AngularJS 事件未从 $rootScope 触发

> ID：13397217
> 
> 赞同：9
> 
> 时间：2012-11-15T12:06:12.883
> 
> 标签：javascript, angularjs

我遇到了 $rootScope.$broadcast 事件没有被触发的问题：

```
App.run(function($rootScope){
    var text = 'Not So Static Now';
    $rootScope.$broadcast('event:staticText', text);
}).$inject = ['$rootScope'];

App.controller('Ctrl1', function($scope, $rootScope) {
   $scope.staticText = "Static Text";

    var things = [
        'AngularJS',
        'StackOverflow',
        'JSFiddle'
    ];

    $scope.$emit('event:things', things);

    $scope.$on('event:staticText', function(e, args){
        $scope.staticText = args;
    });

}).$inject = ['$scope', '$rootScope']; 
```

上面应该将 {{staticText}} 输出更改为“Not so Static Now”，但事实并非如此。

我创建了一个 JSFiddle 来演示问题[http://jsfiddle.net/flavrjosh/uXzTV/](http://jsfiddle.net/flavrjosh/uXzTV/)

这是我正在尝试调试的一个更大问题的一部分，其中 IE9 在页面刷新后没有触发事件（第一次工作但在刷新时 - F5 或刷新按钮没有任何反应）。

任何帮助/建议将不胜感激

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T14:36:36.720

看来问题是由于在触发 $rootScope.$broadcast 事件时未设置子范围引起的。

我通过使用解决了这个例子：

```
App.run(function($rootScope, $timeout){
    var text = 'Not So Static Now';

    $timeout(function(){
        $rootScope.$broadcast('event:staticText', text);
    }, 100);
}).$inject = ['$rootScope']; 
```

和：

```
App.controller('Ctrl1', function($scope, $rootScope) {
    $scope.staticText = "Static Text";

    var things = [
        'AngularJS',
        'StackOverflow',
        'JSFiddle'
    ];

    $scope.$emit('event:things', things);

    $scope.$on('event:staticText', function(e, args){
        $scope.$apply(function(){
            $scope.staticText = args;
        });
    });

}).$inject = ['$scope', '$rootScope']; 
```

可以在[这里看到](http://jsfiddle.net/uXzTV/8/)

不确定这是否是最好的解决方案，但它有效。

# css - 手写笔在 --watching 时呈现空白文件

> ID：13397220
> 
> 赞同：0
> 
> 时间：2012-11-15T12:06:23.657
> 
> 标签：css, node.js, stylus

我只是在一个简单的项目上设置手写笔并运行这个命令

```
stylus --watch --compress --out css/ src/styl/ 
```

它第一次运行良好，它确实意识到我更新了源文件但它在目标中保存了一个空白文件。

有任何想法吗？

我正在使用节点 v0.6.21 - 我尝试过使用和不使用 --compress 是否有任何区别

**编辑**

我知道您可以以各种方式编写命令，但我认为不是这样。

```
stylus -w src/styl/ -o css/ 
```

也有同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:38:50.053

我刚刚使用 0.8 在另一台机器（我可以控制节点的版本）上尝试过这个，它看起来很好。必须只是一个核心节点的东西。

**编辑**

是的，设法将原始VM升级到0.8，一切都很好

# spring - 带弹簧的 JMS 队列

> ID：13397221
> 
> 赞同：0
> 
> 时间：2012-11-15T12:06:27.240
> 
> 标签：spring, jms

我的 springcontext 通知 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.5.xsd">
    <bean
        class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="connectionFactory" ref="notificationJmsConnectionFactory" />
        <property name="destinationName" value="${bpm.task.queue}" />
        <property name="messageListener" ref="taskMessageReceiver" />
        <property name="sessionTransacted" value="true" />
        <property name="clientId" value="BPMTaskMessageLisetners" />
        <property name="transactionManager" ref="transactionManager" />
        <property name="maxConcurrentConsumers" value="${bpm.task.queue.listener.concurrency}" />
    </bean>
    <bean id="taskMessageReceiver"
        class="com.sterling.ag.jms.impl.TaskMessageListenerImpl">
    </bean>
    <bean id="notificationJmsTemplate" class="org.springframework.jms.core.JmsTemplate">
        <property name="connectionFactory" ref="notificationJmsConnectionFactory" />
        <property name="sessionTransacted" value="true" />
    </bean>
    <jee:jndi-lookup id="notificationJmsConnectionFactory"
        jndi-name="java:/JmsXA">
        <!--
            <jee:environment>java.naming.factory.initial=org.apache.activemq.jndi.ActiveMQInitialContextFactory</jee:environment>
        -->
    </jee:jndi-lookup>
    <alias name="notificationJmsTemplate" alias="auditJmsTemplate" />
    <alias name="notificationJmsTemplate" alias="historyExchangeJmsTemplate" />
</beans> 
```

我添加了另一个队列。我应该如何在上面的 XML 中配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:15:05.183

您需要创建一个单独的容器和监听器

```
<bean
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="notificationJmsConnectionFactory" />
    <property name="destinationName" value="${bpm.task.queue2}" />
    <property name="messageListener" ref="taskMessageReceiver2" />
    <property name="sessionTransacted" value="true" />
    <property name="clientId" value="BPMTaskMessageLisetners" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="maxConcurrentConsumers" value="${bpm.task.queue.listener.concurrency2}" />
</bean>
<bean id="taskMessageReceiver2"
    class="com.sterling.ag.jms.impl.TaskMessageListenerImpl2">
</bean> 
```

# mysql - 创建一对多关系

> ID：13397228
> 
> 赞同：-1
> 
> 时间：2012-11-15T12:07:06.437
> 
> 标签：mysql

我在stackoverflow中搜索了很多关于这个问题的信息。有和我一样的问题，但没有解决我的问题。我创建了一个包含用户的表。列是这样的

```
uid 
username
name
family
.... 
```

现在我需要创建一个黑名单，它将存储被列入黑名单的人的用户 ID。我不知道如何创建这个表，因为每个人都可以有很多被列入黑名单的人，那么黑名单表就是这样的

```
uid = 1
blacklistid = 3

uid = 1
blacklist equal 4 
```

那么在这种情况下，我没有任何主键，我认为这是错误的。如果我在自动增量模式下插入主键，我将有一个非常大的 int，为什么我需要这个主键？出于什么原因？我问过某人并且他告诉我也许你的设计有问题

那么我需要知道如何设计这个案例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:20:29.050

黑名单表中的主键是用户id和黑名单id的组合。

```
User
  id
  name
  ...

Blacklist
  user_id
  target_id 
```

user_id 和 target_id 的组合应该是唯一的。

不需要自动递增的 id 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:41:12.557

好的，您正在寻找的是一个一对多的表格，但扭曲的是您可以参考原始表格，以获取黑名单用户的详细信息。因此，您的用户表看起来像这样，其中 AppUserID 是唯一标识用户的 PK。

```
CREATE TABLE [dbo].[AppUser](
    [AppUserID] [bigint] IDENTITY(1,1) NOT NULL,  -- Pk for the user
    [UserName] [nvarchar](50) NOT NULL,
    [FirstName] [nvarchar](50) NOT NULL,
    [LastName] [nvarchar](50) NOT NULL,
    [EmailAddress] [nvarchar](255) NULL,
 CONSTRAINT [PK_APP_USER] PRIMARY KEY CLUSTERED ( [AppUserID] ASC)
) 
GO 
```

您的黑名单表将有 0,1,n.. 特定 AppUserId 的黑名单用户。您需要 AppUserBlacklistID 来唯一引用当前用户的特定黑名单用户。如果您需要删除或更新它们。所以你会使用 AppUserBlackListId

```
CREATE TABLE [dbo].[AppUserBlackList](
    [AppUserBlackListID] [bigint] IDENTITY(1,1) NOT NULL,
    [AppUserID] [bigint] NOT NULL,                      -- Foreign Key to the AppUser table to identify the users black listed 'Users'
    [BlackListedAppUserID] [bigint] NOT NULL,           -- Foreign Key to the AppUser table to identify the user that is black listed
    [Reason] [nvarchar](255) NOT NULL,
 CONSTRAINT [PK_APP_ROLE] PRIMARY KEY CLUSTERED (AppUserBlackListID ASC)
) ON [PRIMARY] 
```

现在创建一些外键约束

```
-- Foreign key to the users table. This is used to list all the black listed users for a particular user
ALTER TABLE [dbo].[AppUserBlackList]  WITH CHECK ADD  CONSTRAINT [FK_AppUserBlackList.AppUserID_AppUser] FOREIGN KEY([AppUserID])
REFERENCES [dbo].[AppUser] ([AppUserID])

-- This is a Foreign Key to the App user for the user that is black listed. It should also be unique in that one user can only blacklist another
-- User one time. 
ALTER TABLE [dbo].[AppUserBlackList]  WITH CHECK 
    ADD  CONSTRAINT [FK_AppUserBlackList.BlackListedAppUserID_AppUser] FOREIGN KEY([BlackListedAppUserID])
        REFERENCES [dbo].[AppUser] ([AppUserID]) 
```

现在要真正严格设计，您可以设置一个独特的约束，以表明用户不能多次将某人列入黑名单，并且他们不能将自己列入黑名单。

要获取特定用户的所有黑名单用户..您加入 2 个表

```
Select AppUserBlackListID, AppUserID,BlackListedUserName
  from 
     AppUser auCurrentUser 
      Inner join AppUserBlackList auBl 
          on auCurrentUser.AppUserId = auBl.AppuserID 
      Inner join AppUser auBlackListedUserDetails 
          on auBL.BlackListedAppUserID =auBlackListedUserDetails.AppUserID
Where au.AppUserId = 10 
```

所以你需要加入回用户表以获取列入黑名单的用户详细信息

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:14:57.973

也许你想要一个多对多的关系：因为一个人可以将其他几个人列入黑名单；一个人可以被其他几个人列入黑名单。

要实现多对多，您有一个单独的表，其中包含两列（一列用于黑名单，下一列用于黑名单），例如：

```
1 2 // person 1 blacklists person 2
1 3 // person 1 also blacklists person 3
3 2 // person 2 is also blacklisted by person 3, as well as by person 1 
```

如果只是一对多（一个人可以将其他几个人列入黑名单；每个人不能被多个人列入黑名单）

# c# - 来自单个基类的不同派生类的访问修饰符

> ID：13397230
> 
> 赞同：0
> 
> 时间：2012-11-15T12:07:14.103
> 
> 标签：c#, inheritance, properties, hierarchy, access-modifiers

除非有必要，否则我不想编写相同的代码。

应该有一个基类（我想接口不适合）

```
public class MyUser
{
    public string Username
    {
        get;
        set;
    }
    //...many other fields
} 
```

在其中一个派生类中，需要 PRIVATE 集修饰符（又名仅用于此类的方法）。

```
public class MyPrivateInfo : MyUser//, IMyUser
{
    public string Username
    {
        get;
        private set;
    }
} 
```

在另一个类中，需要 INTERNAL 修饰符（又名库范围）。

```
public class MyLibInfo : MyUser//, IMyUser
{
    public string Username
    {
        get;
        internal set;
    }
    //...many other fields
} 
```

我想有办法创建一个 MyUser 类型的字段，但这不是目的。每个类中的字段都应该可以直接访问。

实现这一目标的最佳方法是什么，或者没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:11:09.550

首先，您*可以*为此使用接口。您只需要不指定`set`方法。

这将允许您为所需的 a 定义任何可访问性`set`。

```
public interface IUser
{
    string Username { get; }
}

public class MyPrivateInfo : IUser
{
    public string Username
    {
        get;
        private set;
    }
}

public class MyLibInfo : IUser
{
    public string Username
    {
        get;
        internal set;
    }
} 
```

# css - CSS3：目标不工作？

> ID：13397237
> 
> 赞同：1
> 
> 时间：2012-11-15T12:07:31.590
> 
> 标签：css, transition, target, stretch

我有以下代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Void Museum</title>
        <meta charset="utf-8">
        <style type="text/css">
        html * {
            margin: 0;
            padding: 0;
            }
        #panel,
        #content {
            position: absolute;
            top: 0;
            bottom: 0;
            }
        #panel {
            left: -220px;
            width: 250px;
            background: #030;
            -webkit-transition: all 0.5s;
               -moz-transition: all 0.5s;
                -ms-transition: all 0.5s;
                 -o-transition: all 0.5s;
                    transition: all 0.5s;
            }
        #content {
            left: 250px;
            right: 0;
            background: #003;
            }
        #panel:target {
            left: 0;
            background: red;
            }
        #content:target {
            background: yellow;
            }
        </style>
        <script type="text/javascript">
        </script>
    </head>
    <body>
        <div id="panel">
            LEFT PANEL
        </div>
        <div id="content">
            CONTENT
        </div>
    </body>
</html> 
```

还有两个问题：

*   为什么我点击后面板不出来？

*   当被定位时，我如何将`#content` 块的`left`属性强制为 250 像素`#panel`？我应该改变这一切以使用相对位置吗？如果是这样，我将如何强制`#content`不要溢出页面右侧？

当我使用`:hover`而不是时，这段代码确实有效，`:target`所以我假设有些东西我不明白`:target`。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:58:25.773

它不起作用的原因是因为您使用`:target`的是“被点击”或类似的，它不存在。在 CSS 中，可以模仿该行为的内容如下：

您对一个 id （例如`#panel`）创建一个 href，然后单击它。现在您的网址上有一个#panel，可以开始使用`:target`

看[这里](http://jsfiddle.net/JHLN4/)

文本链接到#panel，激活`:target`并允许它像“单击”一样工作。

# php - PHP XML解析器几个问题

> ID：13397247
> 
> 赞同：0
> 
> 时间：2012-11-15T12:07:47.477
> 
> 标签：php, xml, parsing

我的 XML 看起来像：

```
<?xml version="1.0" encoding="Windows-1250" ?> 
<offers>
<offer>
<offer_num>20790</offer_num>
<pics>
    <pic>http://old.mls.org.pl/pic!get.action?obrazId=11651</pic>
    <pic>http://old.mls.org.pl/pic!get.action?obrazId=16906</pic>
    <pic>http://old.mls.org.pl/pic!get.action?obrazId=9641</pic>
    <pic>http://old.mls.org.pl/pic!get.action?obrazId=9742</pic>
</pics>
</offer>
<offer>
<offer_num>20791</offer_num>
<pics>
    <pic>http://old.mls.org.pl/pic!get.action?obrazId=1432t</pic>
    <pic>http://old.mls.org.pl/pic!get.action?obrazId=12346906</pic>
</pics>
</offer>
</offers> 
```

和我的 PHP 解析器：

```
foreach($xml->offer as $estate)
{
    $offer_signature = rtrim($estate->offer_num);
    $offer_photos = array();
    foreach($estate->pics as $photos)
    {
        $photo_url = $photos->pic;
        $photo_name = $offer_signature."_".md5($photo_url).".jpg";
        $offer_photos[] = $photo_name;
        downloadPhoto($photo_url, $photo_name);
    }
} 
```

这个解析器工作，我解析 XML 和 downloadPhoto() 函数工作......这是代码：

```
function downloadPhoto($photo_url, $photo_name)
{
    $dt = @file_get_contents($photo_url);
    if($dt)
    {
        $h = fopen(photo_path.$photo_name, 'w+');
        flock($h, 2);
        fwrite($h, $dt, strlen($dt));
        flock($h, 3);
        fclose($h);
    }
} 
```

它下载图片，但每次只提供一张图片，所以我认为解析器代码有问题，但我真的不知道是什么。

我还想更改解析器中的行：

```
$photo_name = $offer_signature."_".md5($photo_url).".jpg"; 
```

所以 $photo_name 就像**$offer_signature."_".[[picture number]].".jpg"**，例如**20790_01.jpg**但问题是我不知道如何使用 foreach 对其进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:24:19.280

# 问题 #1

你需要一个额外的循环：

```
foreach($xml->offer as $estate)
{
    $offer_signature = rtrim($estate->offer_num);
    $offer_photos = array();
    foreach($estate->pics as $photos)
    {

        foreach($photos as $pic){
            $photo_url = $pic;
            $photo_name = $offer_signature."_".md5($photo_url).".jpg";
            //$offer_photos[] = $photo_name;
            var_dump((string)$photo_url, (string)$photo_name);
        }
    }
} 
```

# 问题2

只需创建自己的计数器：

```
$count = 0;
foreach($xml->offer as $estate)
{
    foreach($estate->pics as $photos)
    {
        foreach($photos as $pic){
            var_dump(++$count, (string)$pic);
        }
    }
} 
```

# .net - 无法在模型类中检索应用程序状态

> ID：13397253
> 
> 赞同：0
> 
> 时间：2012-11-15T12:08:07.193
> 
> 标签：.net, asp.net-mvc, application-state

我在一个 MVC 项目中遇到了一个问题，这个问题是关于从应用程序状态对象中检索值。

我以这种方式`Application_Start()`将一些值存储到应用程序状态中：`Global.axas.cs`

```
//var str = Obj.DecryptString(ConfigurationManager.ConnectionStrings["ConStr"].ToString());
//Application["connString"] = str;

Application["connString"] = Obj.DecryptString(ConfigurationManager.ConnectionStrings["ConStr"].ToString()); 
```

我已`web.config`通过调试确保此时已成功检索到的值。

在这一步之后，我试图以我的一种`Model Class`方式检索这个值：

```
var conn = new SqlConnection(Application["connString"].ToString()); 
```

但在这里我得到一个`NullReferenceException` `Object reference not set to an instance of an object.`

现在这对我来说非常令人困惑，如果该值已成功检索并存储在`AapplicationState`为什么`Application_Start()`它在我的模型类中不可用，那么 ApplciatiopnSate 不是在整个应用程序中可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:30:12.377

我的建议是不要将连接字符串保留在 Application 变量中。相反，您可以声明一个可以返回连接字符串的静态方法。将连接字符串存储在静态变量中，如下所示

```
public class Utility
{
    static string connectionString;    
    public static string GetConnectionString()
    {
        if(string.IsNullOrEmpty(connectionString))
            connectionString = Obj.DecryptString(ConfigurationManager.ConnectionStrings["ConStr"].ToString());
        return connectionString;
    }
} 
```

配置文件被缓存，从此无需担心每次调用方法时读取文件的性能

# jsonp - 带有 jsonp 的 AngularJS 资源服务失败

> ID：13397254
> 
> 赞同：2
> 
> 时间：2012-11-15T12:08:12.467
> 
> 标签：jsonp, angularjs

我正在尝试在 AngularJS 中获取 rest api 的 JSON 输出。以下是我面临的问题：

*   Rest api url 中包含端口号，AngularJS 为变量插值。我为此尝试了几个解决方案，但都是徒劳的。
*   我在使用 JSONP 方法时遇到问题。Rest api 未托管在同一域/服务器上，因此简单的 get 不起作用。
*   其余 api 的参数是斜杠分隔的，不像 HTML 查询字符串。其中一个参数是电子邮件地址，我认为“@”符号也会引起一些问题。我也无法解决这个问题。

我的 rest api 看起来像：`http://myserver.com:8888/dosomething/me@mydomain.com/arg2`. 示例代码/文档将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T02:28:35.097

我在这个问题上挣扎了很多，所以希望这对将来的人有帮助:)

JSONP 需要一个函数回调，一个常见的错误是调用一个返回 JSON 的 URL，你会得到一个*Uncaught SyntaxError: Unexpected token :*错误。相反，JSONP 应该返回类似这样的内容（不要纠结于示例中的函数名称）：

```
angular.callbacks._0({"id":4,"name":"Joe"}) 
```

[文档](http://docs.angularjs.org/api/ng.%24http#jsonp)告诉您在URL 上传递 JSON_CALLBACK 是有原因的。这将被替换为回调函数名称来处理返回。每个 JSONP 请求都分配了一个回调函数，因此如果您执行多个请求，它们可能由 angular.callbacks._1、angular.callbacks._2 等处理。

考虑到这一点，您的请求应该是这样的：

```
var url = 'http://myserver.com:8888/dosomething/me@mydomain.com/arg2';
$http.jsonp(url + '?callback=JSON_CALLBACK')
   .then(function (response) {
       $scope.mydata = response.data;
       ... 
```

然后 AngularJS 将实际请求（替换 JSON_CALLBACK）：

```
http://myserver.com:8888/dosomething/me@mydomain.com/arg2?callback=angular.callbacks._0 
```

有些框架支持JSONP，但是如果你的api没有自动做，你可以从查询字符串中获取回调名称来封装json。示例在 Node.js 中：

```
var request = require('request');
var express = require('express');
var app = express();

app.get('/', function(req, res){
    // do something to get the json
    var json = '{"id":4,"name":"Joe"}';

    res.writeHead(200, {"Content-Type": "application/javascript"});
    res.write(req.query.callback + '(' + json + ')');
    res.end();
});
app.listen(8888); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T15:41:31.487

我在这里面临的主要问题与[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)有关。我通过禁用 Chrome 中的网络安全性获得了 $http 从服务器检索 JSON 数据 -`--disable-web-security`在启动 Chrome 时使用该标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T22:23:43.220

关于 8888 端口，看看这是否有效：

```
$scope.url  = 'http://myserver.com:port/dosomething/:email/:arg2';
$scope.data = $resource($scope.url, {port:":8888", email:'me@mydomain.com', 
                 arg2: '...', other defaults here}, …) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-24T21:59:21.467

尝试转义 ':' var url = 'http://myserver.com\:8888/dosomething/me@mydomain.com/arg2'; 很确定我在其他地方读到过这个

# url - 如何从 txt 文件加载 url 并使用 imacro

> ID：13397255
> 
> 赞同：3
> 
> 时间：2012-11-15T12:08:16.763
> 
> 标签：url, macros

我有 imacro 企业版。我想从`.txt`文件中加载 URL 并访问页面，然后填写表格。所有 URL 的形式都相同。对于单个页面，我可以制作宏，但不能制作从`.txt`文件加载下一个 URL 并执行相同工作的宏。

我进行了很多搜索并制作了一个可以从`.csv`文件加载 URL 并访问页面的代码。但它不起作用。这里是：

```
VERSION BUILD=7401004 RECORDER=FX
TAB T=1TAB CLOSEALLOTHERS
SET !DATASOURCE input.csv
SET !DATASOURCE_COLUMNS 7
SET !DATASOURCE_LINE {{!LOOP}}URL GOTO={{!COL1}} 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-02T22:04:56.140

您必须为循环定义一个变量：

```
VERSION BUILD=8940826 RECORDER=FX
SET !DATASOURCE c:\input.csv
SET !DATASOURCE_COLUMNS 7
SET !LOOP 1
SET !DATASOURCE_LINE {{!LOOP}}
TAB T=1
TAB CLOSEALLOTHERS
URL GOTO={{!COL1}}
... 
```

# html - CSS columns percentage does not work as expected

> ID：13397256
> 
> 赞同：3
> 
> 时间：2012-11-15T12:08:29.197
> 
> 标签：html, css, percentage, multiple-columns

I want to make three columns in HTML+CSS, first 15%, second 70% and third 15%. The problem is that with my code, third column is wrapping down when i resize window. I've written such CSS for my website:

```
.maincont {
      margin-left: 0px;
      margin-right: 0px;
      width: 100%;
    }

.lcol,
.rcol,
.content {
      display: inline;
      float: left;
      position: relative;
      margin-left: 10px;
      margin-right: 10px;
    }

.lcol {
      width: 15%;
      background-color: red;
    }

.rcol {
      width: 15%;
      background-color: green;
    }

.content {
      width: 70%;
      background-color: blue;
    } 
```

HTML code:

```
<body>

  <div class="maincont">
    <div class="lcol">
    </div>
    <div class="content">
    </div>
    <div class="rcol">
    </div>
  </div>

</body> 
```

What am i doing wrong? Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:22:03.797

@Maccath is absolutely correct. Instead of changing any of your numbers however, might I suggest adding this to the top of your CSS file:

```
* { 
    -moz-box-sizing: border-box; 
    -ms-box-sizing: border-box; 
    box-sizing: border-box; 
  } 
```

Support for everything newer than IE8 - your widths and heights will incorporate paddings. Also, change your margin numbers in your CSS to padding instead and you'll get your desired result.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T12:12:27.837

The margins on .content are your problem. Margins are adding to the width of your overall content, so it's 20px over 100% width in total, which is why it's forcing the columns to wrap.

I would advise to use a percentage margin on .content instead. Reduce .content's width to, say, 66% and then set the margin to ... 0.66% (weird maths since it's relative). This however does have the disadvantage that the gaps between your columns aren't going to be consistent based on the width of the browser window.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:16:11.300

remove

```
margin-left: 10px;
margin-right: 10px; 
```

it resizes div size and summary it is more than 100%

# button - 如何将具有多个参数的方法添加到按钮的选择器

> ID：13397258
> 
> 赞同：0
> 
> 时间：2012-11-15T12:08:32.730
> 
> 标签：button, methods, selector

当我尝试将具有多个参数的方法添加到按钮的选择器时，由于未捕获的异常“NSInvalidArgumentException”而出现此错误正在终止应用程序

[viewButton addTarget:self action:@selector(loadDocument:inView:) withObject:cerereIndemnizatie.fisier withObject:self.myWebview forControlEvents:UIControlEventTouchUpInside];

这是方法

```
 -(void)loadDocument:(NSString*)documentName inView:(UIWebView*)webView
{
NSString *path = [[NSBundle mainBundle] pathForResource:documentName ofType:@"pdf"];
NSURL *url = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:20:31.853

我不知道你为什么认为你可以这样做，或者为什么会`UIButton`响应`addTarget:selector:withObject:withObject:forControlEvents:`选择器......（说真的，不要猜测，阅读文档......）

您可以通过使用关联对象来实现类似的行为：

```
UIButton *btn = // create the button
objc_setAssociatedObject(btn, "firstObject", someObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
objc_setAssociatedObject(btn, "secondObject", otherObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
[btn addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside];

- (void)click:(UIButton *)sender
{
    id first = objc_getAssociatedObject(btn, "firstObject");
    id second = objc_setAssociatedObject(btn, "secondObject");
    // etc.
} 
```

# c# - 读取 XML 属性

> ID：13397261
> 
> 赞同：0
> 
> 时间：2012-11-15T12:08:54.913
> 
> 标签：c#, xml, linq, linq-to-xml

我实际上是在尝试阅读这段 XML。

[http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/xml/351352?res=3hourly&key=99b9f578-ad3d-446c-9d29-0bbee028b483](http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/xml/351352?res=3hourly&key=99b9f578-ad3d-446c-9d29-0bbee028b483)

我想知道如何只读取 value="2012-11-15Z" 的节点 Period

所以下面的一个：

这是我使用的代码

```
 using (XmlReader reader = XmlReader.Create("http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/xml/351352?res=3hourly&key=99b9f578-ad3d-446c-9d29-0bbee028b483"))
    {
        reader.MoveToContent();
        while (reader.Read())
        {
            if (reader.NodeType == XmlNodeType.Element
                && reader.Name == "Period")
            {
                while (reader.Read())
                {
                    if (reader.NodeType == XmlNodeType.Element &&
                        reader.Name == "Rep")
                    {
                        first.Text = reader.GetAttribute("T");
                    }
                }

            }
        }
    } 
```

我只读这个节点的方法是什么？

我应该写吗

`if (reader.NodeType == XmlNodeType.Element && reader.Name == "Period" && reader.GetAttribute("value") == "2012-11-15Z")`

这似乎不起作用..

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:15:40.380

您可以使用 LINQ to XML 轻松做到这一点：

```
XDocument xdoc = XDocument.Load(path_to_xml);
var period = xdoc.Descendants("Period")
                 .Where(p => (string)p.Attribute("value") == "2012-11-15Z") 
                 .SingleOrDefault(); 
```

它将返回 XElement，但您可以从周期中选择任何数据。例如`T`属性：

```
List<int> tList = xdoc.Descendants("Period")
                      .Where(p => (string)p.Attribute("value") == "2012-11-15Z")
                      .SelectMany(p => p.Elements())
                      .Select(rep => (int)rep.Attribute("T"))
                      .ToList();

var query = xdoc.Descendants("Period")
                .Where(p => (string)p.Attribute("value") == "2012-11-15Z")
                .SelectMany(p => p.Elements())
                .Select(rep => new { 
                      T = (int)rep.Attribute("T"),
                      D = (string)rep.Attribute("D") })
                .ToList(); 
```

最后一个查询将返回具有整数属性`T`和字符串属性的强类型匿名对象列表`D`：

```
 foreach(var x in query)
     // use x.T and x.D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:16:24.943

尝试使用 xpath 来查找这样的值

```
XmlDocument doc = new XmlDocument();
using (XmlReader reader = XmlReader.Create("http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/xml/351352?res=3hourly&key=99b9f578-ad3d-446c-9d29-0bbee028b483"))
{
    doc.Load(reader);
    XmlNodeList list = doc.SelectNodes("//Period[@value='2012-11-15Z']");
    Console.WriteLine(list.Count);
} 
```

# ios - 在 iOS 上解析属性化 XML

> ID：13397264
> 
> 赞同：0
> 
> 时间：2012-11-15T12:09:11.607
> 
> 标签：ios, nsxmlparser

我一直在解析 iOS 上的属性 XML。

**XML**

```
 <?xml version="1.0" encoding="UTF-8"?>
<Books>
    <Book id="1">
    <title_1>Circumference</title_1>
    <author>Nicholas Nicastro</author>
    <summary>Eratosthenes and the Ancient Quest to Measure the Globe.</summary>
</Book>
    <Book id="2">
    <title_1>Copernicus Secret</title_1>
    <author>Jack Repcheck</author>
    <summary>How the scientific revolution began</summary>
</Book>
    <Book id="3">
    <title_1>Angels and Demons</title_1>
    <author>Dan Brown</author>
    <summary>Robert Langdon is summoned to a Swiss research facility to analyze a cryptic symbol seared into the chest of a murdered physicist.</summary>
</Book>
    <Book id="4">
    <title_1>Keep the Aspidistra Flying</title_1>
    <author>George Orwell</author>
    <summary>A poignant and ultimately hopeful look at class and society, Keep the Aspidistra Flying pays tribute to the stubborn virtues of ordinary people who keep the aspidistra flying.</summary>
</Book>
</Books> 
```

**代码**

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
 namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict {  

    if([elementName isEqualToString:@"Books"])
    {
        data_array = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"Book"])
    {

        bookID= [[attributeDict objectForKey:@"id"]integerValue];

        NSLog(@"Reading id value :%d",bookID);

    //NSLog(@"Processing Element: %@",elementName);
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

    if(!test_string)
    {
        test_string = [[NSMutableString alloc] initWithString:string];
}
    else
    {
        [test_string appendString:string];
    }
    //NSLog(@"Processing Value: %@",test_string);

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"Books"])

        return;

    if ([elementName isEqualToString:@"Book"])
    {
        [data_array addObject:test_string];

    }
   else

    test_string = nil;
        } 
```

如果我遵循这种方法，那么它会跳过第一本书，只显示最后三本书。

如果我放入`test_string=nil`if 块而不是 else 那么它也会显示其作者姓名

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"Books"])

        return;

    if ([elementName isEqualToString:@"Book"])
    {
        [data_array addObject:test_string];

        test_string = nil;
        // data_array = nil;
    }

        } 
```

另外，当它显示在我的表格视图中时，我也会得到一些空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:16:59.833

改变`didStartElement:`方法，如：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
 namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict {  

    if([elementName isEqualToString:@"Books"])
    {
        data_array = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"Book"])
    {

        bookID= [[attributeDict objectForKey:@"id"]integerValue];
        test_string = nil;
        NSLog(@"Reading id value :%d",bookID);

    }
    else if([elementName isEqualToString:@"title_1"])
    {
       test_string = [[NSMutableString alloc] init];
    }
} 
```

改变`didEndElement:`方法，如：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"Books"])

        return;

    if ([elementName isEqualToString:@"title_1"])
    {
        [data_array addObject:test_string];

        test_string = nil;
    }
} 
```

# c# - 使用 SQL Server 数据库登录 Asp.net

> ID：13397268
> 
> 赞同：1
> 
> 时间：2012-11-15T12:09:20.810
> 
> 标签：c#, asp.net, sql-server, login, database-connection

我正在尝试在我的 asp.net 页面中创建一个简单的登录表单（我有一个 html 页面，现在我正在尝试将其添加到 asp.net）。它应该使用输入的用户名和密码并连接到 mssql 数据库。在那里我将创建一个 SQL Select 语句，它选择用户名和密码，其中用户名等于在文本框中输入的用户名（然后比较输入的密码是否与数据库中的密码相同）。如果用户名和密码没问题，那么它应该打开另一个页面 - main.aspx。我的 index.aspx 看起来像这样：

```
<form id="loginform" runat="server" method="post" action="/">
<div id="username_box"><p style="padding-top: 10px; margin: 0px">Username:</p></div>
<input type="text" value="" name="usernameTextBox" runat="server" id="username_input" /><br/>
<div id="password_box"><p style="padding-top: 10px; margin: 0px">Password:</p></div>
<input type="password" value="" name="passwordTextBox" runat="server" id="password_input" /><br/>
<a href="facebook.com" style="float: left;padding-left: 13px;padding-top: 8px;">Glemt kodeordet?</a>
<input type="submit" runat="server" id="LoginBtnClick" />
</form> 
```

按下提交按钮后，有我的c#代码：

```
protected void LoginBtn_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString);
    con.Open();
    SqlCommand cmd = new SqlCommand("select user_username, user_password FROM users WHERE user_username =@username and user_password=@password", con);
    cmd.Parameters.AddWithValue("@username", "user");
    cmd.Parameters.AddWithValue("@password", "1234");
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataTable dt = new DataTable();
    da.Fill(dt);
    if (dt.Rows.Count > 0)
    {
        Response.Redirect("main.aspx");
    }else
    {
        ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('Invalid Username and Password')</script>");
    }
} 
```

现在我没有使用用户在文本框中输入的用户名和密码，而只是一个硬编码的用户名“user”和密码“1234”，我已经插入到我的数据库中。我不知道如何从文本框中获取文本。但即使使用硬编码的用户名和密码，这整件事也不起作用。

现在最后，这就是我在 Web.Config 中添加的用于创建连接字符串的内容：

```
<connectionStrings>
<add name="myConnectionString" providerName="System.Data.SqlClient"  connectionString="Data Source=hereistheipofmydb;Initial Catalog=mydb;User Id =myadmin;password=mypass;" /> 
```

还有一个问题：是否需要将整个项目上传到服务器（与数据库相同）？现在我在主机上有我的数据库，但我通过 Visual Studio 2012 运行的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:13:28.193

使用访问文本框

```
cmd.Parameters.AddWithValue("@username", username_input.Text); 
```

如果您无法连接，我建议您安装一些东西来测试连接，例如[SQL Server Express 管理工具](http://www.microsoft.com/en-us/download/details.aspx?id=8961)。如果这不起作用，它可以是您的电脑和 sql 服务器之间的任何东西，而不是您的程序。然后与您的服务器提供商联系以解决此问题，或尝试在端口 1433（标准端口）上打开防火墙到服务器地址。

另外，不，您只需要上传所有 aspx、js、图像和二进制文件（可能更多）。您不必部署的源文件。您可以做的是只需右键单击项目并选择发布，它将帮助您创建项目的部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-15T02:12:29.567

您正在艰难地使用数据库。您对连接字符串的使用也是内存泄漏的潜在来源。请考虑使用 LINQ-to-SQL 或实体框架。它们将使您的生活变得更加轻松。调查事件的正确使用对你也很有帮助。请查看这些参考资料：

1.  [发布/订阅事件模式](http://msdn.microsoft.com/en-us/library/vstudio/ms752254%28v=vs.100%29.aspx)
2.  [在 C# 中开始使用 LINQ](http://msdn.microsoft.com/en-us/library/bb397933.aspx)
3.  [LINQ To SQL 初学者教程](http://www.codeproject.com/Tips/590978/LINQ-Tutorial-for-Beginners)
4.  [使用 MVC4 和实体框架向 ASP.NET 添加模型](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model)

# c# - 根据文本框中输入的值搜索gridview？

> ID：13397279
> 
> 赞同：1
> 
> 时间：2012-11-15T12:09:54.483
> 
> 标签：c#, javascript, jquery, asp.net

我正在使用 ASP.NET 和 C#。这是我的代码。

```
<asp:UpdatePanel ID="gridSearch" runat="server">
   <ContentTemplate>
      <asp:GridView ID="jobcardSearch" runat="server">                     
          <Columns>
             <asp:TemplateField>                
                <HeaderTemplate>                                                
                   <asp:LinkButton ID="LinkButton1" Text="First Name"
                   CommandName="sort" CommandArgument="FirstName" 
                   runat="server"></asp:LinkButton>                                                                 
                   <asp:TextBox ID="search" runat="server" Width="70px"></asp:TextBox>
               </HeaderTemplate>
               <ItemTemplate>
                  <%# Eval("FirstName")%>
               </ItemTemplate>
             </asp:TemplateField>       
           </Columns>
        </asp:GridView>
   </ContentTemplate>
</asp:UpdatePanel> 
```

因此，在文本框上输入时，我需要过滤网格，然后我需要在不回发的情况下执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:12:08.680

您需要使用 jQuery 或 JavaScript 来完成，而不是为此使用 asp.net ajax 面板。[**这篇文章**](http://www.misfitgeek.com/filtering-an-asp-net-gridview-control-with-jquery/)可能会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:19:20.693

使用jquery处理文本框的按键事件并调用jquery函数然后调用webmethod并将文本框值传递给webmethod，然后根据搜索文本过滤数据库中的数据并将结果绑定到gridview。

供参考检查以下链接：

[http://shibashishdotnetocean.blogspot.in/2012/07/autocomplete-text-using-jquery-and-web.html](http://shibashishdotnetocean.blogspot.in/2012/07/autocomplete-text-using-jquery-and-web.html)

您还可以在 javascript 中使用 pagemethod 来调用 webmethod 而不是 jquery web 服务调用。

**在上面的链接中，唯一的改变是在您的 aspx.cs 页面中添加GetAllEmployees** webmethod ，而不是创建 Web 服务。

还将 ScriptManager 的 EnablePageMethods 设为 true。

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true" /> 
```

对于页面方法，请使用以下链接：

[http://decoding.wordpress.com/2008/11/14/aspnet-how-to-call-a-server-side-method-from-client-side-javascript/](http://decoding.wordpress.com/2008/11/14/aspnet-how-to-call-a-server-side-method-from-client-side-javascript/)

# c# - 文本框两次触发 TextChanged 事件并两次回发，第一个回发状态中止

> ID：13397282
> 
> 赞同：2
> 
> 时间：2012-11-15T12:10:09.097
> 
> 标签：c#, asp.net, postback, textchanged

我有一个文本框**availableItemsFilterTextBox**，其目的是为网格视图**availableItemsGridView**提供过滤数据。

`<asp:TextBox runat="server" ID="availableItemsFilterTextBox" AutoPostBack="True" OnTextChanged="availableItemsFilterTextBox_TextChanged"></asp:TextBox>`

网格视图**availableItemsGridView**放置在：

1.  一个 UpdatePanel，UpdateMode 设置为“Conditional”，Trigger 设置为 TextChanged 事件，
2.  和带有 AutoPostBack="true" 的 TabControl

    ```
    <ajaxToolkit:TabContainer runat="server" ID="patternTabContainer" ActiveTabIndex="0" AutoPostBack="false"
    OnActiveTabChanged="Tabs_ActiveTabChanged">
    <ajaxToolkit:TabPanel runat="server" ID="availableItemsTabPanel" meta:resourcekey="itemSelectionPanelResource">
        <ContentTemplate>

            <asp:UpdatePanel ID="availableItemsUpdatePanel" runat="server" UpdateMode="Conditional">
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="availableItemsFilterTextBox" EventName="TextChanged" />
                </Triggers>
                <ContentTemplate>
                    <asp:Panel ID="Panel1" runat="server" ScrollBars="Auto" Style="max-height: 400px;
                        margin: 5px 5px 5px 5px;">
                        <asp:GridView ID="availableItemsGridView" runat="server" CssClass="dataGrid" ShowHeaderWhenEmpty="True"
                            DataKeyNames="skuid,sku_desc,cat_desc,cls_desc" UseAccessibleHeader="False"
                            AutoGenerateColumns="False" EmptyDataText="No data available qwe123."
                            AllowPaging="True" AllowSorting="True" OnPageIndexChanging="availableItemsGridView_PageIndexChanging"
                            OnSorting="availableItemsGridView_Sorting"> 
    ```

当在availableItemsFilterTextBox中更改文本时，没有区别 - 它是失去焦点还是按下Enter，回发发生两次，事件TextChanged也触发两次。

更新面板已定义触发器

```
<asp:AsyncPostBackTrigger ControlID="availableItemsFilterTextBox" EventName="TextChanged" /> 
```

在萤火虫中，我可以看到几个请求。其中第一个处于“中止”状态

我通过`AutoEventWireup="false"`在表单标签中设置和放置对“Page_Load”的隐式调用来试验页面本身`<form id="form2" runat="server" onload="Page_Load" >`。我在想这可能是两次回发的原因。但是没有成功...

我试图在第一次回发期间将文本框文本值保存在 ViewState 中，然后将其与 viewState 中的值进行比较。但不幸的是，我发现在第一次和第二次回发之间，我从视图状态中丢失了数据。

我尝试使用会话来制作相同的技巧。

```
 string vsFilter = (string)Session[AvailableItemsFilterTypes_Text];
            if (vsFilter != filter)
            {
                Session.Add(AvailableItemsFilterTypes_Text, filter);

                this.LoadAvailableItems();
            } 
```

但这只会阻止数据加载，因为第一次回调会加载数据，然后在没有被渲染的情况下被中止。并且第二次回发被阻止调用 LoadAvailableItems();

在 LoadAvailableItems() 内部，我正在使用 OracleAdapter，并且必须使用输出参数调用存储过程，`OracleDbType.RefCursor` 并且要启用排序和分页 availableItemsGridView，我必须从数据集中获取数据视图。然后将其绑定到availableItemsGridView。据我所知，SqlDataSource 与 Oracle 不兼容...

```
 DataView dataview = availableItemsDataSet.Tables[0].DefaultView;
            //dataview is required only to specify sorting
            dataview.Sort = sortExpression + sortDirection;

            availableItemsGridView.DataSource = dataview; 
            availableItemsGridView.PageIndex = NewPageIndex;

            availableItemsGridView.DataBind(); 
```

请帮我解决这个脑筋急转弯。我不明白为什么我会两次收到 TextCahnged 事件，以及第一个回发请求是如何以及在哪里中止的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:26:27.260

我建议使用 Web 方法并使用 jQuery 调用它们。您将看到更好的性能并避免双重回发。

这是一个很好的例子： [http ://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx](http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx)

# c# - 将字符串附加到 产生一个新的类名

> ID：13397286
> 
> 赞同：1
> 
> 时间：2012-11-15T12:10:14.257
> 
> 标签：c#, .net, reflection, casting, type-conversion

如何将字符串附加到类型名称然后将其作为另一种类型传递？这是一个例子：

```
 public T Get<T>(int id)
        {
           return dbAccess.Get<T>(id);
        } 
```

如果我像这样调用这个方法

```
SomeObject.Get<Class1>(1234); 
```

我想通过将字符串“Data”附加到任何传递的类来更改`Class1`为，因此该方法会将对象作为.`Class1Data``dbAccess.Get``Class1Data``Class1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:23:16.643

像这样的东西会起作用：

```
public T Get<T>(int id)
    {
        var newTypeName = typeof(T).FullName + "Data";
        var newType = Type.GetType(newTypeName);
        var argTypes = new [] { newType };
        var method = GetType().GetMethod("Get");
        var typedMethod = method.MakeGenericMethod(argTypes);
        return (T) typedMethod.Invoke(this, new object[] { id });
    } 
```

如果您的 XxxData 对象不是从 Xxx 继承的，您可能需要在返回结果之前进行一些自动映射。

然后您必须将最后一行替换为：

```
 var dataResult = typedMethod.Invoke(this, new object[] { id });
        var result = new T(); // You will have to add a new() constraint on generic parameter
        // Map your dataResult object's values onto the result object's values
        return result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:13:52.453

泛型参数 T 是编译时参数。换句话说，编译器在编译时预处理您的代码，并且此时类型变得固定。

因此，您不能在运行时更改用于 T 的类型。

如果您有一组受限制的类型，一种方法是设置对每个类型的调用，然后根据字符串在它们之间切换，例如

```
switch (str)
{
    case "":
        SomeObject.Get<Class1>(1234);
        break;

    case "Data":
        SomeObject.Get<Class1Data>(1234);
        break;
} 
```

或者您可以完全放弃泛型并改用反射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:22:49.233

这是不可能的，因为在编译时必须知道所有类型参数。只要这两种方法都是通用的，您就无能为力。

通常这种翻译是通过切换到反射和运行时处理来进行的；例如，不是方法的签名，`DbAccess.Get<T>(int)`而是必须是`DbAccess.Get(Type, int)`.

# .net - 在两个 Visual Studio 实例中使用签名依赖项，一个提升/管理员，一个普通

> ID：13397287
> 
> 赞同：8
> 
> 时间：2012-11-15T12:10:16.263
> 
> 标签：.net, visual-studio-2012, code-signing, strongname

我正在运行 Visual Studio 2012 并在单独的解决方案中编写后端 Web 服务和桌面软件。因为桌面软件需要运行提升（“作为管理员”），我需要在提升的 Visual Studio 实例中运行桌面解决方案。两种解决方案都包括一个签名的库项目。

当我在 Visual Studio 实例中打开 Web 服务解决方案而不提升它时，我收到一个构建错误，例如

> 无法导入以下密钥文件：Redacted.pfx。密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书或手动将证书安装到具有以下密钥容器名称的强名称 CSP：VS_KEY_Redacted。

当我尝试[通过这样做](https://stackoverflow.com/questions/2815366/cannot-import-the-following-keyfile-blah-pfx-the-keyfile-may-be-password-prote)来解决此问题时，它会失败并显示一条错误消息，指出密钥已存在。

当我尝试排除然后重新包含 PFX 文件时，PFX 文件并没有正确处理，而是使项目属性 → 签名中的“强名称密钥文件”下拉列表为空白。在此之后，Web 服务解决方案构建，但似乎该库没有得到签名，因为在（提升的）桌面解决方案中，构建失败并显示“程序集生成失败 - 引用的程序集'编辑'没有强名称”。

如果我尝试从 Web 服务解决方案的下拉列表中再次选择 PFX 文件（并重新输入密码），我会得到：

> 导入密钥
> 时出错尝试引用不存在的令牌

从（提升的）桌面解决方案设置 PFX 文件是可行的，但让我回到第一方。

似乎根据海拔高度，Visual Studio 会在不同的密钥存储中查找解锁 PFX 的任何内容。我是否必须运行提升的 Visual Studio 的两个实例来解决该问题，或者我可以以某种方式告诉它在同一个地方查找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:34:16.333

@ccpanda 的评论解决了这个问题。包括`AssemblyKeyFile`档案使这项工作。例如：

```
[assembly: AssemblyKeyFile("HerpDerpWarblerManagementStudioProTM.snk")] 
```

总而言之，这两个 Visual Studio 将根据其模式假设不同的事物。解决方案不是让他们假设同样的事情，而是告诉他们该做什么。

（我选择使用`.snk`文件，因为如果您不想每次其他开发人员尝试构建时都重新输入密码，那么您必须这样做。[这个问题有更多信息](https://stackoverflow.com/questions/1403445/best-practices-for-signing-assemblies-with-multiple-projects-and-developers)。基本上，你必须使用`.snk`文件或编译您的构建过程，然后通过调用对文件进行签名，`sn.exe`以某种方式知道为每个人使用`.pfx`文件。）

（@ccpanda：如果你把你的评论写成答案（也许你写了，而且 Stack Overflow 帮助地认为它是微不足道的），我会把它标记为答案。）

# python - 使用 Python 计算 div 元素内的文本位置到 HTML 中的相应位置

> ID：13397289
> 
> 赞同：1
> 
> 时间：2012-11-15T12:10:21.557
> 
> 标签：python, html-parsing, beautifulsoup

我需要找到一种方法来计算位于 div 元素中的文本的位置（即字符位置的索引）到 HTML 代码的相应位置。这是必要的，因为我必须能够在该位置插入一个元素而不会丢失格式。

例如，我有以下内容：

**HTML**

> `<p>`Lorem `<strong>`ipsum `</strong>`dolor 坐...`</p>`

这被解释为：

**文本**

> Lorem **ipsum** dolor 坐...

现在我想在**Text**内的特定位置插入一个字符串元素：

> Lorem **ipsum** d `<insertion>`olor 坐...

这是在字符串索引处：`13`

关于插入的位置应该`32`在我的**HTML**中，因为有 HTML-Tags: `<p>`，`<strong>`，`</strong>`也必须计算才能在**HTML**中找到正确的位置。

我只有这些信息：

*   文本作为字符串（这意味着没有任何标签）
*   文本作为 HTML
*   必须放置插入的文本字符串的索引（`13`在我的示例中）

解决方案应该在`Python`. 我玩过这个`BeautifulSoap`模块，但没有找到在元素内的特定索引处插入文本的方法。

希望有人可以帮助我。提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:25:07.223

正如我从您的问题中得到的那样，您想在 HTML 代码中插入一些您知道明文索引的字母后面的内容。如果是这种情况，我认为最简单的解决方案是忽略所有 html 标签，只计算它们之外的字母。你可以这样做：

```
def insertInHtml(string, insstr, position):
    ctr=0
    insidetag=False
    for ci in range(len(string)):
        if string[ci]=='<':
            insidetag=True
        elif string[ci]=='>':
            insidetag=False
        else:
            if not insidetag: ctr+=1
        if ctr==position+1:
            HTMLIndex=ci
            break
    return string[0:HTMLIndex] + insstr + string[HTMLIndex:] 
```

该函数计算作为“字符串”参数传递给函数的 HTML 字符串中不在 HTML 标记内的字符数。当您点击作为“位置”参数传递给函数的数字时，计数循环将中断，函数将在您指定的位置拆分字母后面的字符串。然后它将在这些部分之间插入 insstr 字符串并返回新字符串。如果提供的索引大于文本的长度，它将引发错误。

编辑：正如 JF Sebastian 所指出的，如果 html 有注释（以 <、感叹号和两个破折号开头的行）或属性中的文字 <，这将失败。这是处理这两种情况的函数：

```
def insertInHtml(string, insstr, position):
    ctr=0
    insidetag=False
    insideattr=False
    for ci in range(len(string)):
        suchar=''
        if not ci==len(string)-1: suchar=string[ci+1]
        if string[ci]=='<' and not insideattr:
            insidetag=True
        elif (string[ci]=='>' and not insideattr) or (string[ci]=='-' and string[ci-2:ci]=='!-'):
            insidetag=False
        elif insidetag and string[ci]+suchar=='="':
            insideattr=True
        elif insideattr and string[ci]=='"':
            insideattr=False
        else:
            if not insidetag: ctr+=1
        if ctr==position+1:
            HTMLIndex=ci
            break
    return string[0:HTMLIndex] + insstr + string[HTMLIndex:] 
```

不是很干净的代码，但应该足够容易理解。

# http - 每个用户在本地主机上的客户端服务器架构

> ID：13397290
> 
> 赞同：0
> 
> 时间：2012-11-15T12:10:30.733
> 
> 标签：http, client-server, named-pipes

我目前正在设计一个由单个服务器进程和多个客户端进程组成的系统。服务器和所有客户端将在同一登录会话中运行在同一台机器上。这些进程将通过纯 HTTP 相互通信。
其他用户不应干扰或收听此通信。该设计应该很容易在 Windows 和 *nix 系统之间移植。

当一个用户打开一个 TCP 端口并且只监听 loopback-interface 时，在同一台机器上登录的其他用户仍然可以连接到这个端口。
虽然 HTTP 通常使用 TCP 作为其传输层，但任何提供可靠和有序流传输的东西都应该可以工作。因此，为了确保通信仍然仅限于单个用户，切换到命名管道似乎是个好主意。然而，命名管道的语义在 Windows（双工、单一名称和接收端）和 POSIX（单工、单独名称和接收端）之间有很大不同。此外，大多数现有的 HTTP 实现不支持使用 TCP 以外的方式进行传输。

我还缺少其他一些可移植的每用户进程间流传输方法吗？或者我是否可以以某种方式使 TCP 端口只能由特定用户访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:20:05.530

理论上，唯一重要的是协议。只要您对客户端和服务器使用相同的协议，您就可以使用任何协议，并且它可以在任何系统上运行。

根据您的技术，您可能有很多可用的协议库，例如在 java 中。

# svn - post-commit-hook.bat (Windows+VisualSVN Server +Trac 0.12) 从提交关闭票证

> ID：13397294
> 
> 赞同：3
> 
> 时间：2012-11-15T12:11:04.153
> 
> 标签：svn, hook, trac, visualsvn-server, post-commit

Windows + VisualSVN 服务器 + Trac 0.12

我想要票证自动关闭，当提交文本有“关闭#2”（或其他命令，都一样）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:09:54.803

好吧，我的朋友你很幸运，因为我终于想出了如何做到这一点。我的配置和你一样，Windows + VisualSVN + Trac。这是我从网上的很多地方和我的经验收集和整理的。开始了。

1.  安装 VisualSVN。

2.  创建（导入...）您的存储库。只要确保它在那里并且与 VisualSVN 一起正常工作。我们将您的项目*称为 TheProject*。并说它位于*PathToSVN*。 **这意味着如果项目位于 C:\SVN\TheProject 中。然后*PathToSVN*是 C:\SVN**

3.  如果您使用 Subversion 身份验证，请确保您**至少有一个用户。**

4.  [从http://www.visualsvn.com/files/VisualSVN-Server-2.5.4.28066-Trac-0.12.3.zip](http://www.visualsvn.com/files/VisualSVN-Server-2.5.4.28066-Trac-0.12.3.zip)下载 VisualSVN Trac 插件。
    注意如果有更新版本，请检查[http://www.visualsvn.com/server/trac/ ，但请返回并按照此处的说明进行操作。](http://www.visualsvn.com/server/trac/)不是那里的人。

5.  将其解压缩到 %VISUALSVN_SERVER% 文件夹（您的 VisualSVN 安装文件夹）

6.  在某处为您创建一个文件夹 Trac。例如 C:\Trac 或 D:\Trac。我们将其称为*PathToTrac\*

7.  **允许对内置网络服务帐户（或用于运行 VisualSVN 服务器服务的其他帐户）的 PathToTrac\ 文件夹进行“*完全***控制”访问。****

***   打开命令提示符并执行命令

    **"%VISUALSVN_SERVER%trac\trac-admin.bat" *PathToTrac\TheProject* initenv**

    使用默认设置。只需按 Enter 即可回答所有问题。

    *   执行以下命令将*TheProject* Subversion 存储库添加到 Trac：

    **"%VISUALSVN_SERVER%trac\trac-admin.bat" *PathToTrac\TheProject*存储库添加*TheProject* PathToSVN\Project svn**

    *   如果您还没有 python，请添加系统变量：**PYTHONHOME=%VISUALSVN_SERVER%trac\python**

    只要确保 PYTHONHOME 指向我们可以找到 python 的地方。并注意路径尽头的空格。Windows 不喜欢它。

    *   **如果您使用Subversion 身份验证**，请将以下文本添加到文件 %VISUALSVN_SERVER%conf\httpd-custom.conf ：

    ```
    LoadModule python_module "trac/python/mod_python_so.pyd"
    LoadModule authz_user_module bin/mod_authz_user.so
    <Location /trac>
      SetHandler mod_python
      PythonInterpreter main_interpreter
      PythonHandler trac.web.modpython_frontend
      PythonOption TracEnvParentDir PathToTrac
      PythonOption TracUriRoot /trac

      AuthName "Trac"
      AuthType Basic
      AuthBasicProvider file
      AuthUserFile "PathToSVN/htpasswd"

      Require valid-user
    </Location> 
    ```** 

 **或此文本，如果您使用**Windows 身份验证**：

```
 LoadModule python_module "trac/python/mod_python_so.pyd"
    LoadModule authz_user_module bin/mod_authz_user.so
    <Location /trac>
      SetHandler mod_python
      PythonInterpreter main_interpreter
      PythonHandler trac.web.modpython_frontend
      PythonOption TracEnvParentDir PathToTrac
      PythonOption TracUriRoot /trac

      AuthName "Trac"
      AuthType VisualSVN

      # Set the option's value to on if Windows Basic Authentication
      # is enabled, otherwise set it to off.
      AuthnVisualSVNBasic on

      # Set the option's value to on if Windows Integrated Authentication
      # (available in the Enterprise Edition) is enabled, otherwise set it to off.
      AuthnVisualSVNIntegrated on

      require valid-user
    </Location> 
```

**确保用正确的路径替换 PathToSVN 和 PathToTrac。在课文中**

1.  重启 VisualSVN 服务器。记下服务器正在侦听的端口。

2.  打开“http://localhost:port/trac/” 如果您可以看到您的存储库的 Trac，您就差不多完成了。否则回去检查你是否遗漏了什么。

3.  转到您的 SVN 目录，然后转到您的项目。PathToSVN\TheProject。例如 C:\SVN\FirstProject。你会发现一个文件夹名称为**hooks**。在该文件夹中，您会找到一个文件名**post-commit.cmd**。如果它不存在，则创建它。

4.  将此添加到 post-commit.cmd（只需使用文本编辑器打开它）并保存。

    ```
    @set PATH=%PYTHONHOME%;%PATH%

    @set REPOS="%1"
    @set REV="%2"
    @set TRAC_ENV="PathToTrac\TheProject"

    @for /F %%A in ('svnlook author -r "%REV%" %1') do set AUTHOR=%%A
    @for /F "delims==" %%B in ('svnlook log -r "%REV%" %1') do set LOG=%%B

    @call "%VISUALSVN_SERVER%trac\python\python.exe" "PathToSVN\TheProject\hooks\trac-post-commit-hook" -p "%TRAC_ENV%" -r "%REV%" -u "%AUTHOR%" -m "%LOG%" 
    ```

5.  [从http://trac.edgewall.org/attachment/wiki/TracMultipleProjects/ComprehensiveSolution/trac-post-commit-hook](http://trac.edgewall.org/attachment/wiki/TracMultipleProjects/ComprehensiveSolution/trac-post-commit-hook)下载 trac-post-commit-hook 文件。只需转到页面底部，然后单击下载原件。将其保存在 PathToSVN\TheProject\hooks 目录中。它应该被命名为**trac-post-commit-hook**没有扩展名。

6.  现在转到 PathToTrac\TheProject\conf 目录并打开文件**trac.ini**。搜索**repository_dir**。将路径添加到您的存储库作为它的值，例如

    ```
     repository_dir = PathToSVN\TheProject 
    ```

7.  **你完成了！！！**

8.  现在您可以直接从您的提交中关闭或引用票证，例如修复 #1、关闭 #1 ... 阅读 trac-post-commit-hook 文件中的评论

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T01:29:21.883

Trac 的官方文档包括一个关于[根据提交消息自动更新票证](http://trac.edgewall.org/wiki/0.12/TracFaq#can-trac-automatically-update-a-ticket-when-i-commit-a-changeset)的部分。确保您遵循*两组*说明（一组用于设置[CommitTicketUpdater](http://trac.edgewall.org/wiki/CommitTicketUpdater)插件，另一组用于添加挂钩脚本）。

您是在寻找一般建议，还是有具体问题？**

# android - Android：版本 21 未出现在 SDK 管理器中

> ID：13397297
> 
> 赞同：19
> 
> 时间：2012-11-15T12:11:08.327
> 
> 标签：android, sdk

Google 已经发布了他们的 SDK Revision 21，但它没有出现在我的 SDK 管理器中。这是 SDK 管理器的快照：

[SDK 管理器](https://docs.google.com/open?id=0B0D1yTysOEPPRUNZTThhMHM1Nm8)

关于为什么的任何建议？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-15T12:16:00.250

打开 Android SDK 管理器和包 -> 重新加载。有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T12:14:34.837

从 SDK 管理器窗口尝试工具 > 选项 > 清除缓存，然后包 > 重新加载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T10:21:18.767

有趣的是，每次我打开 SDK 管理器时，它都会加载很多文件，但似乎没有“重新加载包”。据我所知，我已经多年没有使用菜单项 Packages/Reload 了，但总是会显示更新。

这是我第一次必须手动执行此操作。显然有些地方很不对劲。

# jquery - jQuery goToByScroll 滚动问题

> ID：13397299
> 
> 赞同：0
> 
> 时间：2012-11-15T12:11:15.910
> 
> 标签：jquery, navigation, parallax

我正在使用以下示例创建具有视差的网站：[http ://webdesigntutsplus.s3.amazonaws.com/tuts/338_parallax/src/index.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/338_parallax/src/index.html)

一切看起来都不错，但是左侧的导航有烦人的错误，当我使用从上到下的导航步骤时，一切看起来都不错，但是当使用导航从下到上返回时，它无法检测到当前幻灯片。有谁知道如何解决这个问题？

jQuery脚本：

```
$(window).stellar();

//Cache some variables
var links = $('#menu').find('li');
slide = $('.section'); 
mywindow = $(window); 
htmlbody = $('html,body');

//Setup waypoints plugin
slide.waypoint(function (event, direction) {

    //cache the variable of the data-slide attribute associated with each slide
    dataslide = $(this).attr('data-slide');

    //If the user scrolls up change the navigation link that has the same data-slide attribute as the slide to active and 
    //remove the active class from the previous navigation link 
    if (direction === 'down') {
        $('#menu li[data-slide="' + dataslide + '"]').addClass('current').prev().removeClass('current');
    }
    // else If the user scrolls down change the navigation link that has the same data-slide attribute as the slide to active and 
    //remove the active class from the next navigation link

    else {
        $('#menu ul li[data-slide="' + dataslide + '"]').addClass('current').next().removeClass('current');
    }

});

//waypoints doesnt detect the first slide when user scrolls back up to the top so we add this little bit of code, that removes the class 
//from navigation link slide 2 and adds it to navigation link slide 1\. 
mywindow.scroll(function () {

    if (mywindow.scrollTop() == 0) {
        $('#menu li[data-slide="1"]').addClass('current');
        $('#menu li[data-slide="2"]').removeClass('current');
    }
});

//Create a function that will be passed a slide number and then will scroll to that slide using jquerys animate. The Jquery
//easing plugin is also used, so we passed in the easing method of 'easeInOutQuint' which is available throught the plugin.
function goToByScroll(dataslide) {
    htmlbody.animate({
        scrollTop: $('.section[data-slide="' + dataslide + '"]').offset().top-1
    }, 1000, 'easeInOutQuint');
}

//When the user clicks on the navigation links, get the data-slide attribute value of the link and pass that variable to the goToByScroll function
links.click(function (e) {
    e.preventDefault();
    dataslide = $(this).attr('data-slide');
    goToByScroll(dataslide);
});

//When the user clicks on the button, get the get the data-slide attribute value of the button and pass that variable to the goToByScroll function
/*button.click(function (e) {
    e.preventDefault();
    dataslide = $(this).attr('data-slide');
    goToByScroll(dataslide);

});*/ 
```

所以如果我在那里添加

`function goToByScroll(dataslide) { htmlbody.animate({ scrollTop: $('.section[data-slide="' + dataslide + '"]').offset().top-1 }, 1000, 'easeInOutQuint'); }`

`.offset().top-1`然后导航当前菜单在从上到下滚动时显示错误值，如果+1则从下到上错误，如果我只离开`.offset().top`它显示当前页面从下到上错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T09:59:11.937

I got around this same problem by setting a variable 'currentslide', then using this to determine whether the page is scrolling up or down, and offsetting the scroll amount accordingly. So:

```
//Cache some variables
var links = $('.navigation').find('li');
slide = $('.slide');
button = $('.button');
mywindow = $(window);
htmlbody = $('html,body');
currentslide=1; // new variable to determine current position 
```

then lower down:

```
//Create a function that will be passed a slide number and then will scroll to that slide using jquerys animate. The Jquery
//easing plugin is also used, so we passed in the easing method of 'easeInOutQuint' which is available throught the plugin.
function goToByScroll(dataslide) {

    if (currentslide<dataslide){
        htmlbody.animate({
            scrollTop: $('.slide[data-slide="' + dataslide + '"]').offset().top
        }, 2000, 'easeInOutQuint');
        currentslide=dataslide;
    } else {
        htmlbody.animate({
            scrollTop: $('.slide[data-slide="' + dataslide + '"]').offset().top -10
        }, 2000, 'easeInOutQuint');
        currentslide=dataslide;
    }

} 
```

You may need to adjust the value of -10 depending on your site.

# c# - 如何在javascript中设置属性后面的代码

> ID：13397301
> 
> 赞同：0
> 
> 时间：2012-11-15T12:11:18.247
> 
> 标签：c#, javascript, properties

大家好，是否可以使用javascript设置代码的属性？

我有以下内容：

```
private string dateFormat;
public string DateFormat
{
    get
    {
        return dateFormat;
    }
    set
    {
        dateFormat = value;
    }
} 
```

并想这样设置：`'<%=DateFormat%>' = "dd-mm-YYYY"`

但是当我运行它并添加一个调试器时，它会像这样：'' = "dd-mm-YYYY"

请协助。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:14:10.807

尝试不使用 quatos

```
var <%=DateFormat%> = "dd-mm-YYYY"; 
```

但是在您的情况下，该属性没有值，因此您应该检查它是否已设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:12:24.250

你不能直接这样做；您需要使用[ASP.NET 隐藏字段](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)，然后该字段将在回发时将值返回给您的代码，并将其保留在多个回发中。

C# 就像

```
public string DateFormat
{
    get
    {
        return DateFormatField.Value;
    }
    set
    {
        DateFormatField.Value = value;
    }
} 
```

设置它的 JavaScript 类似于

```
document.getElementById('<%=DateFormatField.ClientID%>').value = 'dd-mm-YYYY'; 
```

# sorting - Wordpress query_posts 按元键和日期排序

> ID：13397302
> 
> 赞同：2
> 
> 时间：2012-11-15T12:11:24.210
> 
> 标签：sorting, wordpress

我想创建一个 query_posts，我首先按自定义字段（Facebook Likes）的数量排序，然后按日期排序。但我不知道怎么做。

我的查询看起来像那个 atm：

```
$social_query = array(
'meta_key' => 'facebook_likes',
'orderby' => 'meta_value_num',
'order' => 'DESC',
'posts_per_page' => 10,
'paged' => (int) $paged
);
query_posts( $social_query ); 
```

现在帖子按 facebook 上的点赞数排序。这工作正常。但是，如果有相同数量的帖子，它们会随机排序，这就是问题所在。如果有相同数量的 facebook-like 帖子，则应按日期排序。

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:41:25.727

WordPress 允许您指定多个`orderby`参数。为此，您只需用空格分隔每个参数。以下是您的新查询的外观：

```
$social_query = array(
    'meta_key' => 'facebook_likes',
    'orderby' => 'meta_value_num date',
    'order' => 'DESC',
    'posts_per_page' => 10,
    'paged' => (int) $paged
);
query_posts( $social_query ); 
```

我不确定这是否会产生您想要的顺序，但这就是 WordPress 允许您使用它的内置功能所做的事情。

# .htaccess - 更改目录名称后，如何编写 .htaccess 规则以将所有 url 重定向到新 url？

> ID：13397307
> 
> 赞同：0
> 
> 时间：2012-11-15T12:11:50.297
> 
> 标签：.htaccess

我在我的网站上重命名了一个目录。如何将所有现有网址重定向到新网址。

例如，我将“MyFolder”重命名为“mydirectory”。那么，如何将 http://mywebsite.com/MyFolder/somepage.html 重定向[到](http://mywebsite.com/MyFolder/somepage.html)http://mywebsite.com/mydirectory/somepage.html[和](http://mywebsite.com/mydirectory/somepage.html)http://mywebsite.com/MyFolder/anotherpage.html[到](http://mywebsite.com/MyFolder/anotherpage.html)http [： //mywebsite.com/mydirectory/anotherpage.html](http://mywebsite.com/mydirectory/anotherpage.html)等在 .htaccess 文件中使用一些规则。

以下是我的 .htaccess 文件的内容。它与 WordPress 的其他一些规则有关。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteRule ^/Wordpress/(.*)$ http://example.com/wordpress/$1 [R=301,L]

</IfModule>

# END WordPress 
```

所以`RewriteRule ^/Wordpress/(.*)$ http://example.com/wordpress/$1 [R=301,L]`应该根据我的知识工作。但它不起作用。

有趣的是，以下规则解决了我的问题。但我想学习如何。

```
Redirect 301 /Wordpress/ http://example.com/wordpress/ 
```

请让我知道这是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:44:53.607

你有几个问题。

在 .htaccess 中匹配 URL 时，重要的是要记住您在 RewriteRule 中匹配的值是相对路径，而不是完整的 URI（即它不包括根斜杠）。您可以删除它，也可以将其设为可选，以使您的代码可在 VirtualHosts 和 .htaccess 之间传输

```
RewriteRule ^/?Wordpress/(.*)$ http://example.com/wordpress/$1 [R=301,L] 
```

你的第二个问题是你有一个匹配所有 URL 的 RewriteRule 并且在你的新规则之前有 L 标志。L 标志使其成为最后处理的规则，因此永远不会触发您的新 RewriteRule，将其移至 RewriteBase 之后。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^/Wordpress/(.*)$ http://example.com/wordpress/$1 [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule>

# END WordPress 
```

最后我不太明白（但可能是由于你创建了一个虚构的例子）是，如果你移动了 Wordpress 目录，你将看不到你的 Wordpress .htaccess 文件中的重定向，因为对旧的请求如果移动了路径，它将不会命中文件。

# wpf - 我们如何允许用户以不同的方式从 WPF gridview 控件添加/编辑/删除记录？

> ID：13397309
> 
> 赞同：1
> 
> 时间：2012-11-15T12:12:07.917
> 
> 标签：wpf, triggers, wpfdatagrid, celltemplate, datagridviewcellstyle

在 WPF xaml 页面中，我想为用户提供一个组合框，其中将有两个选项：

(1) 允许用户在 gridview 中编辑 (2) 允许用户在表单中编辑

如果用户选择第一个选项，那么我希望用户允许在 gridview 本身中添加/编辑记录。

如果用户选择第二个选项，则在单击 gridview 的添加/编辑按钮时，将出现一个表单页面，其中包含 gridview 的所有字段。在表单中，用户将能够添加/编辑 gridview 的记录。

任何人都可以对此提出想法吗？

这是DataGrid的主要代码。

```
<Controls:DataGrid Grid.Row="0" SelectedItem="{Binding Path=CurrentSelectedItem, Mode=TwoWay}" AutoGenerateColumns="False" SelectionMode="Single">
              <Controls:DataGrid.Columns>
                <Controls:DataGridTemplateColumn>
                  <Controls:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                      <Button Content="Remove" VerticalAlignment="Center" HorizontalAlignment="Center" Command="{Binding Source={StaticResource cmdDeleteRecord}}" CommandParameter="{Binding Path=Attribute[ExtensionDataId].Value}" Margin="8,0,8,0" />
                    </DataTemplate>
                  </Controls:DataGridTemplateColumn.CellTemplate>
                </Controls:DataGridTemplateColumn>
                <Controls:DataGridTemplateColumn HeaderStyle="{StaticResource WrappedColumnHeaderStyle}" Header="Vendor" CanUserSort="True" ToolTipService.ToolTip="Vendor" SortMemberPath="VendorPrincipalId_Name-Reference" MaxWidth="250">
                  <Controls:DataGridTemplateColumn.ClipboardContentBinding>
                    <Binding Path="Attribute[VendorPrincipalId_Name].Value" Mode="TwoWay" />
                  </Controls:DataGridTemplateColumn.ClipboardContentBinding>                  
                  <Controls:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                      <StackPanel>
                        <TextBox Style="{DynamicResource GridCellTemplateTextBox}" TextWrapping="Wrap">
                          <TextBox.Text>
                            <Binding Path="Attribute[VendorPrincipalId_Name].Value" Mode="TwoWay" />
                          </TextBox.Text>
                        </TextBox>
                      </StackPanel>
                    </DataTemplate>
                  </Controls:DataGridTemplateColumn.CellTemplate>
                </Controls:DataGridTemplateColumn>
                <Controls:DataGridTemplateColumn HeaderStyle="{StaticResource WrappedColumnHeaderStyle}" Header="Vendor's Key" CanUserSort="True" ToolTipService.ToolTip="Vendor's Key" SortMemberPath="Attribute[VendorKey].Value" MaxWidth="250">
                  <Controls:DataGridTemplateColumn.ClipboardContentBinding>
                    <Binding Path="Attribute[VendorKey].Value" />
                 </Controls:DataGridTemplateColumn.ClipboardContentBinding>                
                  <Controls:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                      <StackPanel>
                        <TextBox Style="{DynamicResource GridCellTemplateTextBox}" TextWrapping="Wrap">
                          <TextBox.Text>
                            <Binding Path="Attribute[VendorKey].Value" />
                          </TextBox.Text>
                        </TextBox>
                      </StackPanel>
                    </DataTemplate>
                  </Controls:DataGridTemplateColumn.CellTemplate>
                </Controls:DataGridTemplateColumn>
              </Controls:DataGrid.Columns>
            </controls:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:45:58.560

我使用触发器解决了这个问题，允许用户编辑网格中的行，如下所示：

```
<Controls:DataGridTemplateColumn Header="Note Title" CanUserSort="True" ToolTipService.ToolTip="Note Title"  MaxWidth="250">                                  <Controls:DataGridTemplateColumn.CellStyle>
                                    <Style TargetType="Controls:DataGridCell">
                                        <Style.Triggers>
                                            <Trigger Property="IsSelected" Value="true">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate>
                                                            <TextBox TextWrapping="Wrap">
                                                                <TextBox.Text>
                                                                    <Binding Path="ColumnValue" Mode="TwoWay" />
                                                                </TextBox.Text>
                                                            </TextBox>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="false">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate>
                                                            <TextBlock TextWrapping="Wrap">
                                                                <TextBlock.Text>
                                                                    <Binding Path="ColumnValue" Mode="TwoWay" />
                                                                </TextBlock.Text>
                                                            </TextBlock>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Controls:DataGridTemplateColumn.CellStyle>
                            </Controls:DataGridTemplateColumn> 
```

还有可以使用的 CellEditingTemplate ，但它对我不起作用。所以我使用了触发器。当用户选择行时，我在列的模板中设置 TextBox，而不是 TextBlock。

# jquery - 计时器控件在 Internet Explorer 中不起作用

> ID：13397311
> 
> 赞同：1
> 
> 时间：2012-11-15T12:12:11.280
> 
> 标签：jquery

我尝试使用的倒数计时器在 IE 中不起作用，但在 Firefox 和 Chrome 中运行良好。

这是我所包含的脚本的 HTML，以及我到目前为止所写的内容：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript" charset="utf-8"></script>

<script src="jquery.countdown.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    $(function(){
        $('#counter').countdown({
            image: 'digits.png',
            startTime: '25:30'
        });            
    });
</script>
<style type="text/css">
    .desc { 
        margin: 7px 3px;
        width: 352px;
    }
    .desc div {
        float: left;
        font-family: Arial;
        width: 70px;
        margin-right: 65px;
        font-size: 13px;
        font-weight: bold;
        color: #000;
    }
    #counter {
        width: 353px;
    }
</style> 
```

这是我在 aspx 页面中的内容：

```
<div id="counter"></div>
<div class="desc">
    <div>Minutes</div><div>Seconds</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:18:22.253

我已经在 IE 8 和 IE 9 中对此进行了测试。似乎工作正常。

尝试这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript" charset="utf-8"></script> 
<script src="http://jquery-countdown.googlecode.com/svn/trunk/js/jquery.countdown.js" type="text/javascript" charset="utf-8"></script>

<style type="text/css">
    .desc { margin: 7px 3px;
        width: 352px;
    }
  .desc div {
  float: left;
  font-family: Arial;
  width: 70px;
  margin-right: 65px;
  font-size: 13px;
  font-weight: bold;
  color: #000;
  }
    #counter
    {
        width: 353px;
    }
</style>

<div id="counter"></div><div class="desc"><div>Minutes</div><div>Seconds</div></div>
<script type="text/javascript">

     $('#counter').countdown({
             image: 'http://jquery-countdown.googlecode.com/svn/trunk/img/digits.png',
             startTime: '25:30'});            

</script> 
```

确保在 html 页面顶部定义了 doc 类型，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

# asp.net-mvc - 这个 MVC 路由有什么问题

> ID：13397312
> 
> 赞同：1
> 
> 时间：2012-11-15T12:12:21.607
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

有了这个

```
routes.MapRoute(
    "ShowPage",
    "default.aspx/{page}/{pagetype}",
    new {
        controller = "Info",
        action = "PageASPX",
        page = "emptypage",
        pagetype = "emptypagetype"
    }
); 
```

捕捉`default.aspx?page=order` （我需要从旧站点生成永久重定向到我的新 MVC 站点）

正如我在路由调试器中看到的那样，路由匹配，但我在路由中没有得到任何值

```
Key          Value
page         emptypage 
pagetype     emptypagetype 
controller   Info 
action       PageASPX 
```

怎么了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:22:54.083

MVC 路由定义具有 URL 段。您的路线如下所示：

```
default.aspx/{page}/{pagetype} 
```

这意味着类似的请求`default.aspx/order`应该在路由解析期间填充`page`值，因为它是作为 URL 段提供的。这并不意味着`page`以后当模型绑定发生并且您的控制器操作被调用时不会被填充。

如果您的控制器操作签名看起来与此类似：

```
public ActionResult PageASPX(string page, string pagetype)
{
    ...
} 
```

即使您将它们作为查询变量而不是 URL 段提供，这两个参数仍可能会被填充。唯一的要求是**路由不提供缺失段值的默认值**（或者它们被设置为可选）。然后，默认 MVC 模型绑定器将`page`使用实际查询变量值填充操作参数。

所以主要的是你应该改变你的路由定义（见我回答的最后一部分）。

## 应该工作的请求

为了让您的路由识别`page`和`pagetype`URL 段变量，您的请求应如下所示：

```
default.aspx/somepage
default.aspx/somepage/sometype 
```

假设您的路由没有定义默认值`page`，`pagetype`那么当您的请求如下所示时，您的控制器操作将获取`page`并`pagetype`填充正确值的参数：

```
default.aspx/somepage
default.aspx/somepage/sometype
default.aspx?page=somepage
default.aspx?pagetype=sometype
default.aspx?page=somepage&pagetype=sometype 
```

## 混合路由值和查询字符串变量

正如我的测试所示，Asp.net MVC 在具有值时不提供路由值覆盖（在 URL 本身中作为段或作为路由默认值提供）。在您的情况下，如果您请求此 URL：

```
default.aspx/routepage?page=querypage 
```

您的操作方法会看到`page`参数具有*routepage*的值。**总是**。

更重要的方面是，**当您在路由定义本身中提供默认值时，即使您从 URL 中省略它，您也根本无法将其设置为查询字符串**。为避免此问题，您有两种选择：

1.  set`page`和`pagetype`as`UrlParameter.Optional`这将允许您在 URL 没有它们时用查询字符串变量覆盖它们的值 - 这意味着您始终可以只使用 URL 段或查询字符串，但不能同时使用两者，因为 URL 段占主导地位

2.  URL 段变量和查询字符串变量具有不同的名称 - 缺点是您需要使用不希望的双参数进行操作：

    ```
    public ActionResult PageASPX(string routePage, string routeType, string queryPage, string queryType)
    {
        string page = routePage ?? queryPage ?? string.Empty;
        string type = routeType ?? queryType ?? string.Emtpy;
        ...
    } 
    ```

## 最佳解决方案

更改您的路由，以便为作为 URL 段提供的变量和作为查询字符串变量提供的变量分别定义路由定义。然后将这些路由连接到相同的控制器操作，只要所有变量（在段和查询字符串中）共享相同的名称：

```
route.MapRoute(
    "InSegmentsBoth",
    "default.aspx/{page}/{pagetype}",
    new { controller = "Info", action = "PageASPX" }
);
route.MapRoute(
    "InSegmentsPage",
    "default.aspx/{page}",
    new { controller = Info"", action = "PageASPX" }
);
route.MapRoute(
    "InQueryString",
    "default.aspx",
    new { controller = "Info", action = "PageASPX" }
); 
```

如果您的请求提供两个值（段和查询变量），如

```
default.aspx/segmentpage?page=querypage 
```

然后段值优先，因此操作参数*将*`page`具有此请求的段页值。

# newlisp - newLISP：修改关联列表

> ID：13397316
> 
> 赞同：1
> 
> 时间：2012-11-15T12:12:30.163
> 
> 标签：newlisp

我在修改关联列表的条目时遇到问题。当我运行这段代码

**示例 A**

```
(set 'Dict '(("foo" "bar")))

(letn (key "foo"
       entry (assoc key Dict))
  (setf (assoc key Dict) (list key "new value")))

(println Dict) 
```

结果是：

```
(("foo" "new value")) ; OK 
```

这是预期的。使用此代码

**示例 B**

```
(set 'Dict '(("foo" "bar")))

(letn (key "foo"
       entry (assoc key Dict))
  (setf entry (list key "new value"))) ; the only change is here

(println Dict) 
```

结果是：

```
(("foo" "bar")) ; huh? 
```

为什么`Dict`在第二种情况下没有更新？

**编辑**

我想要的是检查一个条目是否在其中`Dict`，如果是 - 更新它，否则不要管它。我`letn`想避免重复的代码

```
(letn (key "foo"
       entry (assoc key Dict))
  (if entry ; update only if the entry is there
    (setf entry (list key "new value"))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:04:04.487

在**letn**表达式中，变量**条目**包含关联的副本而不是引用。直接设置关联，如 Cormullion 的示例所示：

```
(setf (assoc key Dict) (list key "new value")) 
```

在 newLISP 编程模型中，所有内容都只能被引用一次。作业总是制作副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:20:06.910

我对关联列表的理解是它们是这样工作的：

```
> (set 'data '((apples 123) (bananas 123 45) (pears 7)))
((apples 123) (bananas 123 45) (pears 7))
> (assoc 'pears data)
(pears 7)
> (setf (assoc 'pears data) '(pears 8))
(pears 8)
> data
((apples 123) (bananas 123 45) (pears 8))
> (assoc 'pears data)
(pears 8)
> 
```

如果要检查键是否存在并更新其值，请执行以下操作：

```
(letn (key "foo")
   (if (lookup key Dict)
       (setf (assoc key Dict) (list key "new value")))) 
```

# java - 通过 TCP 连接传输图像时出现问题

> ID：13397319
> 
> 赞同：1
> 
> 时间：2012-11-15T12:12:33.907
> 
> 标签：java, tcp

我对客户端服务器图像传输有奇怪的行为。当前服务器总是在从缓冲区中读取 32768 字节时停止，总文件大小为 36556 字节。while 循环没有结束，但它不会打印其中的任何 print 语句，也没有抛出异常。我尝试了几种不同大小的字节缓冲区，甚至大于图像大小也不能解决问题。

客户代码：

```
private static void writePhoto(Socket socket) throws IOException {

    OutputStream outputStream = new   BufferedOutputStream(socket.getOutputStream());

    String file_path = "E:\\Eclipse\\Workspace\\DNI_PsuedoClient\\" +
            "src\\main\\resources\\BuckyBadger.jpg";
    try {
        InputStream stream = new FileInputStream(file_path);
        System.out.println(stream.available());
        try {
            byte[] buffer = new byte[1024];
            int readData;
            int i = 1; 
            while((readData=stream.read(buffer))!=-1){
                System.out.println(readData + " " + i);
            outputStream.write(buffer,0,readData);
            i++;
            }
            System.out.println("done writing to buffer");
        }catch (IOException e) {
              System.err.println("File Error");
              e.printStackTrace();
              System.exit(-1);
        }finally {
            stream.close();
        }
    } finally {
    }
} 
```

服务器代码

```
private static java.io.File createFile(Socket client) throws IOException {

    System.out.println("Starting to create file");
    InputStream stream = new BufferedInputStream(client.getInputStream());

    System.out.println("1");
    // Create file from the inputStream
    java.io.File Recieved_File = new java.io.File(thread_ID + ".jpg");
    System.out.println(thread_ID + ".jpg");
    System.out.println("2");

    try {
       OutputStream outputStream = new FileOutputStream(Recieved_File);
       System.out.println("3");

       try {
          byte[] buffer = new byte[1024];
          System.out.println("4");
          int readData;
          int i = 1;

          while ((readData = stream.read(buffer)) != -1) {
              System.out.println("start");
              outputStream.write(buffer, 0, readData);
              System.out.println(readData + " " + i + " " + (i * readData));
              i++;
              System.out.println("end while loop");
          }
       } finally {
         System.out.println("5");
         outputStream.close();
         System.out.println("6");
         }
     } finally {
   }
   System.out.println("Created file");
   return Recieved_File;
} 
```

如您所见，我已经多次尝试使用服务器代码中的打印语句来试图找出问题所在。任何见解都会非常有帮助。

为了进一步参考，我有完全相同的服务器代码用于与 Windows 手机的交互，手机拍摄照片并将其上传到服务器。我现在正在更改代码以在多个线程上运行，并首先使用模拟交互的 Java 客户端在 Java 中对其进行测试。java 客户端正在尝试将存储在驱动器上的照片发送到服务器。客户端似乎工作正常，因为它将整张照片放入缓冲区。

我写了一个协议，这里是：

```
public DNI_Protocol(Socket socket, String threadID) {
    client = socket;
    thread_ID = threadID;
}

public String processInput(String theInput) {

    String theOutput = null;
    if (state == WAITING) {
      System.out.println(theInput);
      if (theInput.equals("Upload")) {
        state = UPLOAD_PHOTO;
        theOutput = "Send Photo";
      } else if (theInput == "View") {
        state = VIEW;
        theOutput = "Send Request";
      } else {
        theOutput = "Waiting";
      }
    } else if (state == UPLOAD_PHOTO) {
      // if (theInput != "Sending Photo") {
      // TODO: Throw a state exception with a message
      // return "exit";
      // }
      setupDrive();
      try {
        Image_Handle = createFile(client);
        System.out.println("Uploading file");
        uploadedFile = Drive_Interface.uploadFile(false, Image_Handle, drive);
        System.out.println("file Uploaded");
        google_ID = uploadedFile.getId();
        System.out.println(google_ID);
        Image_Handle.delete(); // We are done with the file so we can delete it
        System.out.println("deleted file");
      } catch (IOException e) {
        e.printStackTrace();
      }
      theOutput = "Send Keywords";
      state = UPLOAD_KEYWORDS;
    } else if (state == UPLOAD_KEYWORDS) {
      if (theInput != "Sending Keywords") {
        // TODO: Throw a state exception with a message
        return "exit";
      }
      // TODO: Add code to get keyword arraylist and upload information to
      // the database
      theOutput = "exit";
    }
    return theOutput;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:02:24.870

您的服务器代码是这样说的：

```
 while ((readData = stream.read(buffer)) != -1) {
          System.out.println("start");
          outputStream.write(buffer, 0, readData);
          System.out.println(readData + " " + i + " " + (i * readData));
          i++;
          System.out.println("end while loop");
      } 
```

这会一直从套接字读取，直到套接字关闭或服务器出错，没有其他原因`read`会返回`-1`。由于这两种情况都没有发生，因此服务器将停留在此`while`循环中。您根本没有编写任何代码来处理文件的结尾。

如果服务器知道它将读取特定数量的字节，则它需要在读取该数量的字节后跳出`while`循环。如果客户端要通过关闭套接字或关闭 TCP 连接的一个方向来告诉服务器它已完成文件发送，那么客户端需要代码来执行此操作。否则，服务器将永远等待。

# java - 第二种方法没有抛出异常，为什么？

> ID：13397321
> 
> 赞同：0
> 
> 时间：2012-11-15T12:12:37.223
> 
> 标签：java, exception-handling

示例代码是：-

```
import java.io.*;
import java.util.List;
import java.util.ArrayList;

public class ListOfNumbers{
    private static int Size=10;               // this is a class variable- as there should be only 1 instance of the class.
    private List<Integer> list;

    public ListOfNumbers(){
    list = new ArrayList<Integer>(Size);        // an arraylist of size-10.
    System.out.println("Populating the list");
    for(int i =0; i<Size; i++)
    {
    list.add(new Integer(i));   // is similar to using list.add(i); /* this involves auto-boxing*/
    }
    System.out.println("List populated");
    }

    public void writeList(File file){
    FileWriter out = null;
    try{
    out = new FileWriter(file);
    System.out.println("Start Writing to the File" + " " +file);
    for(int i =0; i < Size; i++)
    {
    out.write("Value at" + i + "is:" +" " + (list.get(i)).intValue());  //is similar to writing list.get(i) /*this will return Integer, because of AB it will treated int*/
    out.write("\n");
    }
    System.out.println("Contents written to the file");
    }
    catch(FileNotFoundException fnfex){
    fnfex.printStackTrace();
    }
    catch(IOException ioex){
    ioex.printStackTrace();
    }
    finally{
    if(out != null)
    {
        try{
            out.close();
           }

        catch(IOException ioex)
        {
        ioex.printStackTrace();
        }
    }

    else
        System.out.println("Stream not open");

    }
    }

    public void readList(File file)
    {
    String pointer = null;
    String [] value = null;
    RandomAccessFile  input = null;
    System.out.println("Trying to read from file:" + " " + file);
    try{
    System.out.println("In the try block");
    input= new RandomAccessFile(file,"r");  //should throw exception
    System.out.println("Created a reference to the file"+ file);
    while((pointer = input.readLine()) !=null)  //should throw exception
    {
    System.out.println("In the while block");
    System.out.println(pointer);
    value = pointer.split(": ");
    list.add(Integer.parseInt(value[1]));
    }

    }
    catch(FileNotFoundException fnfex)
    {
    fnfex.printStackTrace();
    }
    catch(IOException ioex)
    {
    ioex.getMessage();
    }

    } 

    public void displayList(){
    System.out.println("Displaying List elements");
//  list.size();
    for(int i=0; i < list.size(); i++){
    System.out.println(list.get(i));    
    }
    }
    public static void main(String [] par)
    {
        ListOfNumbers obj = new ListOfNumbers();
        File file = new File("Output.txt");
        obj.writeList(file);
        obj.readList(file);
        obj.displayList();

    }

} 
```

结果：-

```
Populating the list
List populated
java.io.FileNotFoundException: Output.txt (Permission denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:209)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:160)
    at java.io.FileWriter.<init>(FileWriter.java:90)
    at ListOfNumbers.writeList(ListOfNumbers.java:22)
    at ListOfNumbers.main(ListOfNumbers.java:97)
Stream not open
Trying to read from file: Output.txt
In the try block
Created a reference to the fileOutput.txt
Displaying List elements
0
1
2
3
4
5
6
7
8
9 
```

我已经更改了权限，`Output.txt`以便获得异常。我的问题是为什么当我们尝试访问文件时 readList () 方法不抛出异常，即分配对输入的引用以及尝试在 while 循环中使用它时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:53:41.600

根据各种文件权限输出：-

1) -rw-rw---- 1 root root 0 Nov 15 17:23 Output.txt

```
 buffer@ankit:/home/mount/Data/JAVA/practice/src$ java ListOfNumbers 
Populating the list
List populated
java.io.FileNotFoundException: Output.txt (Permission denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:209)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:160)
    at java.io.FileWriter.<init>(FileWriter.java:90)
    at ListOfNumbers.writeList(ListOfNumbers.java:22)
    at ListOfNumbers.main(ListOfNumbers.java:97)
Stream not open
Trying to read from file: Output.txt
In the try block
java.io.FileNotFoundException: Output.txt (Permission denied)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
    at ListOfNumbers.readList(ListOfNumbers.java:64)
    at ListOfNumbers.main(ListOfNumbers.java:98)
Displaying List elements
0
1
2
3
4
5
6
7
8
9 
```

2) -rw-rw---- 1 缓冲区缓冲区 0 Nov 15 17:23 Output.txt

```
buffer@ankit:/home/mount/Data/JAVA/practice/src$ java ListOfNumbers 
Populating the list
List populated
Start Writing to the File Output.txt
Contents written to the file
Trying to read from file: Output.txt
In the try block
Created a reference to the fileOutput.txt
In the while block
Value at0is: 0
In the while block
Value at1is: 1
In the while block
Value at2is: 2
In the while block
Value at3is: 3
In the while block
Value at4is: 4
In the while block
Value at5is: 5
In the while block
Value at6is: 6
In the while block
Value at7is: 7
In the while block
Value at8is: 8
In the while block
Value at9is: 9
Displaying List elements
0
1
2
3
4
5
6
7
8
9
0
1
2
3
4
5
6
7
8
9 
```

3) -rw-rw-r-- 1 root root 150 Nov 16 05:16 Output.txt

```
buffer@ankit:/home/mount/Data/JAVA/practice/src$ java ListOfNumbers 
Populating the list
List populated
java.io.FileNotFoundException: Output.txt (Permission denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:209)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:160)
    at java.io.FileWriter.<init>(FileWriter.java:90)
    at ListOfNumbers.writeList(ListOfNumbers.java:22)
    at ListOfNumbers.main(ListOfNumbers.java:97)
Stream not open
Trying to read from file: Output.txt
In the try block
Created a reference to the fileOutput.txt
In the while block
Value at0is: 0
In the while block
Value at1is: 1
In the while block
Value at2is: 2
In the while block
Value at3is: 3
In the while block
Value at4is: 4
In the while block
Value at5is: 5
In the while block
Value at6is: 6
In the while block
Value at7is: 7
In the while block
Value at8is: 8
In the while block
Value at9is: 9
Displaying List elements
0
1
2
3
4
5
6
7
8
9
0
1
2
3
4
5
6
7
8
9 
```

# vba - Microsoft Access 登录系统和管理员用户级别安全性

> ID：13397322
> 
> 赞同：0
> 
> 时间：2012-11-15T12:12:37.823
> 
> 标签：vba, ms-access

在您问之前，我已经花了数周的时间在谷歌上搜索，但无济于事。我目前正在为 Microsoft Access 2007 中的企业设计数据库系统。该系统工作正常，但有些事情我需要帮助来修复。

目前，我有两种形式；

Login_FRM - 作为登录屏幕的表单。目前这个盒子的代码是

```
If IsNull(Me.Username) Or Me.Username = "" Then
        MsgBox "You must enter the username of an active employee.", vbOKOnly, "Required Data"
            Me.Username.SetFocus
        Exit Sub
    End If

If IsNull(Me.PasswordLookup) Or Me.PasswordLookup = "" Then
        MsgBox "You must provide a password.", vbOKOnly, "Required Data"
            Me.PasswordLookup.SetFocus
        Exit Sub
    End If

    Me.PasswordLookup.Value = DLookup("[Password]", "User_TBL", "[Username] ='" & Me.Username & "'")

    If Me.PasswordLookup.Value = Me.PasswordLookup.Value Then

    DoCmd.OpenForm "MainMenu_FRM"

    Else
            MsgBox "Incorrect Username or Password. Please try again.", vbOKOnly, "Please try again"
        Me.PasswordLookup.SetFocus
        Exit Sub
    End If    
End Sub 
```

这将检查是否为 null 等，但还会检查存储在 User_TBL 中的字段以查看用户是否可以获得访问权限。

我还有 MainMenu_FRM，它是数据库所有进程的主要跳板。

基本上我想做的是只允许用户访问管理员菜单，如果在 User_TBL 中注册为管理员（是/否）

对于任何人的任何帮助，我都会非常感激。

谢谢

这是整个过程的快速概述

1.  用户 /who is not admin/ 与登录屏幕一起显示。

2.  用户输入详细信息并单击登录，即可访问主菜单。

3.  单击主菜单上的管理按钮。被拒绝访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:42:54.830

我认为最好向每个人展示一个登录屏幕，然后在他们尝试访问管理屏幕时检查他们是否是管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:27:15.997

我正在按照相同的思路设计一些东西，我发现`TempVars()`从用户登录的结果中将用户权限插入到 a 中很有用。它仅从登录更新，而不是数据库中的其他任何地方。

[来自 MSDN 的有关 TempVar 的信息，但](http://msdn.microsoft.com/en-us/library/office/bb257080%28v=office.12%29.aspx)[Access 博客](http://blogs.office.com/b/microsoft-access/archive/2010/09/27/power-tip-maximize-the-user-of-tempvars-in-access-2007-and-2010.aspx)中有更好的描述

在旨在具有有限访问权限的任何按钮（打开表单）上，onclick 事件将评估用户权限变量。`MsgBox`因此，如果不允许用户使用表单，我可以有一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:49:14.477

我认为你需要做的比你想象的要简单。

只需在表单加载中执行一个 if 语句，该语句`MainMenu_FRM`只为管理员启用按钮并设置默认值，以便对其他人禁用。然后只有管理员可以点击它。

为什么管理员也不必登录？只需让他们登录，并在他们登录后适当地设置他们的权限。

`MainMenu_FRM`即`Enabled = no`在属性中设置每个按钮。

```
Private Sub Form_Load()
'****Admin****
If strUserAccess = "Admin" Then
Me.buttonThatTakesYouSomewhere.Enabled = True
Me.buttonThatTakesYouSomewhereElse.Enabled = True

 '****USER****
ElseIf strUserAccess = "User" Then
Me.buttonThatTakesUsersSomewhere.Enabled = True
Me.buttonThatTakesUsersSomewhereElse.Enabled = True
end if

end sub 
```

此外，出于安全原因，请确保您为代码设置密码并禁用班次覆盖，这样任何人都无法破坏任何东西。

根据他们的登录名（您可以在登录屏幕上将其设置为临时变量）使用 DLookup 从表中查找他们的访问级别。

根据评论的第二部分。我从来没有在 dlookup 中调用过 temp var，所以我只能尝试一下。如果它不起作用，您可能需要谷歌如何正确地做到这一点。它可能需要更多或更少的引号。

```
dim strUserAccess as String
strUserAccess = DLookup("fieldname", "tablename", "[UserName]="" & TempVars("Username").value  & "")

if strUserAccess = "Admin" then
... 
```

等等。我可能在 Dlookup 上打错了字，我不能 100% 确定这是否可行，但应该可以。

# blackberry - 从黑莓中动态生成的 basicEditField 获取价值

> ID：13397323
> 
> 赞同：1
> 
> 时间：2012-11-15T12:12:40.333
> 
> 标签：blackberry, user-interface, java-me

我正在开发一个需要生成动态`EditField`. 我能够生成这个，但是当我尝试从这些字段中获取一个值时，我得到了`EditField`屏幕中所有字段最后生成的值。

我在下面粘贴了一些 J2ME 代码，但我不知道如何通过 BlackBerry API 调用获得相同的效果。

```
EditField ef;

for(int i = 0; i < 10; i++){
  EditField ef = new EditField("Name : "+i, "");
  add(ef);
  add(new SeparatorField());
} 

for(int i = 0; i < 10 ; i++){
  System.out.println(""+ef.getText());
} 
```

* * *

```
private TextField fld, fld1;

for (int i = 0; i < 5; i++) {
  fld = new TextField("Name :", null, 30, TextField.ANY);
  append(fld);
}

for (int i = 0; i < 5; i++) {
  fld1 = (TextField) this.get(i);
  System.out.println(""+fld1.getString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:03:39.700

```
I got my problem Solved. This answer is for those who are interested in it.

EditField ef;
Hashtable allEds = new Hashtable();

            for(int i = 0; i < 10; i++){
             EditField ef = new EditField("Name : "+i, "");
             add(ef);
             add(new SeparatorField());
             allEds.put(""+i, ef);
            } 

Enumeration e = allEds.elements();

while(e.hasMoreElements()){
                System.out.println(""+e.nextElement().toString());

            } 
```

# asp.net - TableHeaderRow 类的意义何在

> ID：13397324
> 
> 赞同：7
> 
> 时间：2012-11-15T12:12:49.740
> 
> 标签：asp.net, .net

我刚刚将一些代码从使用`HtmlTable`控件转换为基于 Web 的`Table`控件，我发现除了`TableRow`类之外还有`TableHeaderRow`. 我基于这里的一些半读评论愚蠢地做出了假设，如果一行是其中之一，它将被放入`thead`输出 HTML 中的一个元素中。不是。

当这不起作用时，我仔细看了看，发现`TableHeaderRow`上面似乎没有实际代码，并且`TableSection`属性`TableRow`不关心它是否为 a `TableHeaderRow`。

那么这种类型的意义何在？似乎在实践中它与 TableRow 类完全相同，您仍然必须在其上设置`TableSection`属性以告诉它它是`thead`一行。

这有一个很好的用例场景吗？我当然想不出一个...

**编辑澄清**

在我的调查中，我使用 Refactor 来查看所涉及的代码。这就是我如何确定这`TableHeaderRow`似乎源自`TableRow`但实际上并未实现任何新事物。

`Table`在确定是否输出 a的渲染中，`thead`它似乎纯粹是看`TableSection`属性。它不关心行的实际类型是什么，而且我在任何地方都找不到一行代码，它的行为完全不同于行的类型不同。

我正在寻找一个实际的例子来说明它的不同之处。虽然我很欣赏文档参考，但它们实际上似乎与我正在查看的代码不匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-03T03:33:26.287

我想知道同样的事情。当我看到 [创建 ASP.NET 表标题行](https://stackoverflow.com/questions/19849583/creating-asp-net-table-header-row)页面时，我意识到我没有按我应该的方式设置 TableSection 属性：

```
hRow.TableSection = Web.UI.WebControls.TableRowSection.TableHeader 
```

它使`<thead>`元素出现在输出 html 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:24:07.357

根据[这个 MSDN 条目](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.tableheaderrow.aspx)：

> 此类支持在屏幕尺寸有限的设备上显示表格。在这些设备上，必须跨多个页面呈现具有许多列和行的表。将 TableHeaderRow 添加到 Table 控件允许您指定标题行，该标题行呈现为显示表视图的每个页面上的第一行。

我会从中推断出`TableRow`不会暴露这种支持。

# c# - 从桌面应用程序创建磁贴/辅助磁贴

> ID：13397334
> 
> 赞同：1
> 
> 时间：2012-11-15T12:13:32.360
> 
> 标签：c#, windows-8, microsoft-metro

我想为我的 Windows 窗体应用程序创建一个自定义磁贴。

我发现命名空间中的`Secondary Tile`is`Microsoft.UI.StartScreen`在 WinForms 中不可用。

那么我怎样才能做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:39:04.407

不幸的是，普通桌面应用程序无法在开始屏幕上创建自定义磁贴。最好的办法是优化可执行文件的图标以用于平铺格式，如下所述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/jj673981](http://msdn.microsoft.com/en-us/library/windows/desktop/jj673981)

# ios - 一旦方法完成，有没有办法运行代码？

> ID：13397337
> 
> 赞同：0
> 
> 时间：2012-11-15T12:13:48.713
> 
> 标签：ios, uiimageview, nsarray, afnetworking, uicollectionviewcell

一旦方法完成，我想开始代码。我有一个*UICollectionView*，它从服务器加载图像数组，然后将这些图像添加到我创建的单元格中的 ImageView 中，以便更好地解释这里是我的代码：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellID = @"cellID";
    insightCell *myCell = (insightCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellID forIndexPath:indexPath];
    myCell.tag = [[[objectiveGov n_insights] objectAtIndex:indexPath.item]integerValue];
    imgTag = ((UICollectionView *)myCell).tag;
//This is the Method I want to run "ObjectiveGov is the NSObject which has my Method inside "arrayImages" which is separate to the view controller this UICollectionView is in.
    [objectiveGov arrayImages];

//Possible if statement here, that records when the method above is finished.
    myCell.insightImageView.image = [theInsightImage objectAtIndex:indexPath.item];
            return myCell;
        } 
```

因此，一旦方法`[objectiveGov arrayImages];`完成，我希望它运行`myCell.insightImageView.image`. 有没有办法做到这一点？我尝试创建一个在方法末尾发布的 NSNotificationCenter 但这不起作用，因为 UICollectionViewCell 方法在分配 UICollectionView 时启动。有任何想法吗？谢谢！

**编辑** ArrayImages 方法代码：

```
+(void)arrayImages
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"postArrayImages" object:nil];
    [[NSUserDefaults standardUserDefaults] synchronize];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/api/insights/get/",URL_ROOT]];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
    NSString *imageString = [NSString stringWithFormat:@"%d",[viewInsightViewController imgTag]];
    NSURLRequest *request = [httpClient requestWithMethod:@"GET" path:imageString parameters:nil];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        NSDictionary *dictionInsight = [JSON valueForKey:@"results"];
        NSArray *insightArray = [dictionInsight valueForKey:@"images"];
        NSString *fileName = [dictionInsight valueForKey:@"filename"];
        if (fileName == (id) [NSNull null])
        {
//URL incase server file doesnt contain image.
            nineArray = [NSString stringWithFormat:@"http://url.co.uk/images/logo.png"];
        }else {
            nineArray = [insightArray valueForKey:@"96"];
        }
        insightURL = [NSURL URLWithString:nineArray];

         if (insightURL != nil) {
        NSURLRequest *requestImage = [NSURLRequest requestWithURL:insightURL];
        AFImageRequestOperation *imageOperation = [AFImageRequestOperation imageRequestOperationWithRequest:requestImage imageProcessingBlock:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
                                                   { 
                                                       if (requestImage != nil) {
                                                           insightImages = image;
                                                           [arrayOfImages addObject:insightImages];                                                      
 }

                                                   } failure:nil];
        [imageOperation start];
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:00:46.223

对于这种情况，使用块将是完美的。将您的数组图像方法更改为类似这样的方法，以便在完成网络连接时调用块传回加载的图像。

```
+ (void)arrayImagesWithCompletionBlock:(void(^)(UIImage *image))completionBlock {
....
       if (insightURL != nil) {
            NSURLRequest *requestImage = [NSURLRequest requestWithURL:insightURL];
            AFImageRequestOperation *imageOperation = [AFImageRequestOperation imageRequestOperationWithRequest:requestImage imageProcessingBlock:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                    if (requestImage != nil) {

                       insightImages = image;
                       [arrayOfImages addObject:insightImages];

                       // Call the completion block here once we have the loaded image
                       completionBlock(image);
                    }];

               } failure:nil];

            [imageOperation start];
        }
....
} 
```

并在 cellForIndexPath 中这样称呼它：

```
[objectiveGov arrayImagesWithCompletionBlock:^(UIImage *loadedImage) {
    myCell.insightImageView.image = loadedImage;    
}]; 
```

最后一件事，你在你真正想做objectForKey的地方调用valueForKey。（valueForKey 将获得对象的属性值与您想要的字典方法，谷歌“键值编码”获取更多信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:30:47.640

也许你可以带一个条件去？让 [objectiveGov arrayImages] 完成后返回 BOOL = YES。

```
NSCondition *condition = [NSCondition new];
__block BOOL continueThread = NO;

        if ([objectiveGov arrayImages] == YES) {
            continueThread = YES;
            [condition signal];
            [condition unlock];
        } 

while (!continueThread) [condition wait]; 
```

不知道能不能行。。只是想大声点。。。

# facebook-graph-api - Facebook 共享 utf-8 编码文本字符串的问题

> ID：13397340
> 
> 赞同：0
> 
> 时间：2012-11-15T12:14:01.647
> 
> 标签：facebook-graph-api, utf-8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:47:23.470

[http://validator.w3.org/check?uri=http://holiday.ge/event/dj-gela-dj-bene/](http://validator.w3.org/check?uri=http://holiday.ge/event/dj-gela-dj-bene/):

> Sorry, I am unable to validate this document because on line 570 it contained one or more bytes that I cannot interpret as utf-8 (in other words, the bytes found are not valid values in the specified Character Encoding). Please check both the content of the file and the character encoding indication.
> 
> The error was: utf8 "\xE1" does not map to Unicode

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:02:38.193

Your page does not even have "og:description", it usually just works fine if you put in the correct metatag. I know that the YOAST SEO plugin (the one you are using) does allow you to set up a description for every article, just below the article text in the edit window there is an input field called "Meta Description".

# sql-server - Sql查询帮助计算行数

> ID：13397343
> 
> 赞同：0
> 
> 时间：2012-11-15T12:14:12.253
> 
> 标签：sql-server

我想知道你们中的任何人会帮助我。我有一张`class`桌子

我的问题是如何计算当前正在运行的课程中有多少学生注册（即使他或她注册了许多课程，也只计算每个学生一次）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:18:54.313

使用`COUNT(DISTINCT StudentName)`：

```
 SELECT COUNT(DISTINCT StudentName)
 FROM TableName
 -- You can add a condition here to get only the classes that currently running
 -- like WHERE Date BETWEEN .... 
```

**更新：**您可以加入另一个表以仅获取当前正在运行的课程：

```
SELECT COUNT(DISTINCT c.stuid)
FROM @Courses c
INNER JOIN @courseDetails cd 
        ON c.ClassID = cd.ClassID 
       AND c.EndrolledDate BETWEEN cd.StartDate AND cd.FinishDate 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/4f7ff/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:23:08.533

尝试这个...

```
SELECT COUNT(DISTINCT COLUMN_NAME) FROM TABLE_NAME 
```

这将计算表 TABLE_NAME 中名称为 COLUMN_NAME 的列中不同值的数量。

希望这个答案有帮助。

# jquery - Jquery滑块全屏但下面有内容

> ID：13397344
> 
> 赞同：0
> 
> 时间：2012-11-15T12:14:12.700
> 
> 标签：jquery, image, slider, fullscreen

我正在尝试找到像这样的滑块：http: [//www.adidas.dk/](http://www.adidas.dk/)

如果您查看顶部滑块，您可以看到所有适合屏幕的方式，但您仍然可以向下滚动 - 我很好奇在哪里可以找到这个非常酷的插件！

我将永远需要它，以便在彼此下方有 3 个这些滑块，并且通过导航，它应该向下滚动以适应单击时的下一个滑块。

我希望有人可以在正确的方向上帮助我，早些时候遇到过这样的事情并与我分享，或者如果你有合适的技能，可以简单地为我构建它。

我在 Jquery 中没有进步，所以我不可能建立自己 - 还在学习:)

希望有善良的灵魂可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:32:04.877

[http://www.marcofolio.net/webdesign/advanced_jquery_background_image_slideshow.html][请打开此链接找到全屏滑块，有代码或方法如何在您的页面中自定义效果。]

# c++ - 结合模板和对象类

> ID：13397347
> 
> 赞同：0
> 
> 时间：2012-11-15T12:14:20.943
> 
> 标签：c++, templates

我想知道如何将模板函数组合到一个类中。为了对类进行排序。这是代码。

模板.h

```
template<typename T>
bool lessThan(T t1, T t2) {
bool result = false;
if (t1 < t2) {
    result = !result;
}
return result;
}

template<typename T>
bool greaterThan(T t1, T t2) {
bool result = false;
if (t1 > t2) {
    result = !result;
}
return result;
} 
```

点.h

```
//Operator Overloading
Point2D operator-(Point2D);
bool operator<(const Point2D& p2d)const;
bool operator>(const Point2D& p2d)const;
bool operator==(Point2D); 
```

它是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:16:40.933

不，这些免费函数绝对不需要，`operator==`应该是 const，并且您不提供`!=`或其他一些关系运算符。

# php - 无法改变 使用字符串替换标记 the_content

> ID：13397348
> 
> 赞同：4
> 
> 时间：2012-11-15T12:14:21.663
> 
> 标签：php, wordpress

我正在努力让一个简单的字符串替换在 wordpress the_content 函数中工作。

```
<?php 

    $phrase = the_content();
    $find = '<p>';
    $replace = '<p style="text-align: left; font-family: Georgia, Times, serif; font-size: 14px; line-height: 22px; color: #1b3d52; font-weight: normal; margin: 15px 0px; font-style: italic;">';

    $newphrase = str_replace($find, $replace, $phrase);

    echo $newphrase;

?> 
```

它似乎`<p>`还在回响。

代替`<p style="text-align: left; font-family: Georgia, Times, serif; font-size: 14px; line-height: 22px; color: #1b3d52; font-weight: normal; margin: 15px 0px; font-style: italic;">`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T13:53:03.523

您需要使用`apply_filters('the_content')`带有段落的 Wordpress 换行符。

```
<?php 

    $phrase = get_the_content();
    // This is where wordpress filters the content text and adds paragraphs
    $phrase = apply_filters('the_content', $phrase);
    $replace = '<p style="text-align: left; font-family: Georgia, Times, serif; font-size: 14px; line-height: 22px; color: #1b3d52; font-weight: normal; margin: 15px 0px; font-style: italic;">';

    echo str_replace('<p>', $replace, $phrase);

?> 
```

请参阅[the_content](http://codex.wordpress.org/Function_Reference/the_content)的法典条目。它在替代用法部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T12:18:24.987

the_content 不返回内容，但会回显内容。

如果要获取变量中的内容，则必须使用

> $phrase = get_the_content()

您应该像 the_content() 一样在循环中运行它

# php - 在codeigniter中将数组从控制器传递到模型

> ID：13397349
> 
> 赞同：4
> 
> 时间：2012-11-15T12:14:22.877
> 
> 标签：php, arrays, codeigniter

我试图通过控制器类中的函数传递数组并从模型内部类中的另一个函数中检索它，但无法检索到值。请指教。

代码如下。

控制器类代码

```
 class home extends CI_Controller {

function __construct() {
    parent::__construct();
    $this->load->helper('url');
}

function index() {
    $this->load->view('loginview');
}

function login() {
    $parameters = array(
        '$uname' => $this->input->post('uname'),
        '$passwords' => $this->input->post('password')
    );

    $this->load->model('loginModel');
    $validate = $this->loginModel->validateuser($parameters);

    if(count($validate)== 1){
        echo "Logged in";
    }
    else
    {
        //redirect('home/index');
        echo "dasad";
    }

} 
```

}

型号类代码

```
class loginModel extends CI_Model {

function __construct() {
    parent::__construct();
}

public function validateuser($parameters) {

        $uname = $parameters['uname'];
        $pass = sha1($mem['pass']);

    $query = $this->db->query("select * from user where username = '$uname' and password = '$pass'");
    $result = $query->result_array();
    return $result;

} 
```

}

变量 $uname 和 $pass 是查询数据库所需的两个值。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:19:01.177

您的代码中有错误。正确的控制器 login() 方法：

```
function login() {

    // you don't need '$' sign
    $parameters = array(
        'name' => $this->input->post('uname'),
        'pass' => $this->input->post('password')
    );

    $this->load->model('loginModel');
    $validate = $this->loginModel->validateuser($parameters);

    // stuff..

} 
```

和模型 loginModel() 方法：

```
public function validateuser($parameters) {

    $uname = $parameters['name'];
    $pass = sha1($parameters['pass']); // and second error was here

    // stuff..

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:21:19.230

您的数组键字符串在模型和控制器类中是不同的。以下是可能的修复。

在控制器中使用这个：

```
$parameters = array(
        'uname' => $this->input->post('uname'),
        'passwords' => $this->input->post('password')
    ); 
```

其次在您的模型中。使用它来获取参数。

```
 $uname = $parameters['uname'];
  $pass = sha1($parameters['passwords']); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:45:49.807

我看到您的答案已经确定，但我只想给您一个替代方案。它更安全、更短：

控制器：

```
function login() {

    $this->load->model('loginModel');
    $validate = $this->loginModel->validateuser();

    if($validate ){
        echo "Valid User";
    } else{
        echo "Invalid User";
    }
} 
```

模型：

```
public function validateuser() {

 $query = $this->db->query("select * from user where username = ? and password = ?",array($this->input->post('uname'),sha1($this->input->post('password'))));
   if($query->num_rows() == 1){
      return true;
   }else{
     return false;
  }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-05T19:46:28.210

我有同样的问题，我发现这样做的唯一方法显然是 json_encode() 控制器中的数组和模型中的 json_decode 它们。它就像我的魅力一样工作。祝你好运！

# hibernate-envers - Envers 可以使用不同的数据库吗？

> ID：13397360
> 
> 赞同：6
> 
> 时间：2012-11-15T12:14:49.907
> 
> 标签：hibernate-envers

Hibernate Envers 是否可以将另一个数据库用于审计表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T21:33:15.480

您可以使用不同的架构/目录。请参阅`org.hibernate.envers.default_schema`和配置属性[1 ] `org.hibernate.envers.default_catalog`，以及.`schema``catalog``@AuditTable`

[1] [http://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch15.html](http://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch15.html)

# wpf - 将视频渲染到画布中的特定区域

> ID：13397364
> 
> 赞同：1
> 
> 时间：2012-11-15T12:15:02.450
> 
> 标签：wpf, video, wpf-controls, media-player, render

我创建了自己的画布（黑色区域），在其上绘制不是从 Shape 派生的元素。相反，我使用覆盖方法 Canvas.OnRender 中的 DrawingContext 进行绘制。

问题是，我想播放视频文件并将帧渲染到画布的特定区域（例如红色矩形） - 也在 OnRender 中。但通常 MediaPlayer 直接绑定到填充 UIElement 的完整背景的画笔。

有什么帮助吗？

![在此处输入图像描述](../Images/5ab2334f9c3208bc4bc230e2883ef2d2.png)

好的，这里再解释一下。我可以在任何方向滚动、平移和缩放我的画布，然后影响我使用绘图上下文在 OnRender 中绘制的内容。下图显示了带有图像（门）的画布，该图像（门）逐帧来自网络摄像头。因此，只要我的画布失效，我就可以在 drawingContext.DrawImage 中使用 BitmapSource。我仍然可以画出我的图元。MediaPlayer/MediaElement 的问题是我没有逐帧获取它，但我仍然希望将其渲染为类似于画布中的网络摄像头图像。

![在此处输入图像描述](../Images/dca86190bb8c1c1470176ee9c0c590a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:17:20.620

尝试将 Clip 应用到您的 Canvas，如下所示：

```
<Canvas Width="800" Height="600" Background="Black">
    <Canvas.Clip>
        <RectangleGeometry Rect="0,0,10,10" />
             <!-- whatever you want -->    
    </Canvas.Clip>
</Canvas> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T22:18:59.747

最后我想出了如何实现这一点。您只需要一个 MediaPlayer 并将其输入到每个 Canvas.OnRender 循环中的 drawingContext.DrawVideo 中。示例图片和代码如下。我还包括了从视频中捕获帧（BitmapSource）的方法，以及如何将其转换为旧的 System.Drawing.Bitmap）。

```
public partial class RenderCanvas : UserControl
{
    readonly MediaPlayer player;

    public RenderCanvas()
    {
        InitializeComponent();

        player = new MediaPlayer();
        player.Open(new Uri(@"test.avi", UriKind.Relative));
        player.Play();
    }

    protected override void OnRender(DrawingContext drawingContext)
    {
        base.OnRender(drawingContext);

        if (player != null && player.Source != null)
            drawingContext.DrawVideo(player, new Rect(0, 0, 200, 150));

        // draw any shape in front of the video
        drawingContext.DrawEllipse(Brushes.Blue, new Pen(Brushes.Red, 5), new Point(150, 150), 60, 60);
    }

    BitmapSource GetBitmapSourceFromVideo()
    {
        var drawingVisual = new DrawingVisual();
        var renderTargetBitmap = new RenderTargetBitmap(player.NaturalVideoWidth, player.NaturalVideoHeight, 96, 96, PixelFormats.Default);
        using (var drawingContext = drawingVisual.RenderOpen())
        {
            drawingContext.DrawVideo(player, new Rect(0, 0, player.NaturalVideoWidth, player.NaturalVideoHeight));
        }

        renderTargetBitmap.Render(drawingVisual);

        return renderTargetBitmap;
    }

    System.Drawing.Bitmap GetBitmapFromVideo()
    {
        BitmapSource bitmapSource = GetBitmapSourceFromVideo();

        var encoder = new PngBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(bitmapSource));
        using (var stream = new MemoryStream())
        {
            encoder.Save(stream);
            stream.Seek(0, SeekOrigin.Begin);

            return (System.Drawing.Bitmap)System.Drawing.Image.FromStream(stream);
        }
    }
} 
```

这里是示例应用程序的 XAML 代码。RenderCanvas 的 XAML 没有变化。

```
<Window x:Class="CanvasTest_OnRender.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:CanvasTest_OnRender="clr-namespace:CanvasTest_OnRender" Title="MainWindow" Height="350" Width="525">
    <Grid>
        <CanvasTest_OnRender:RenderCanvas />
    </Grid>
</Window> 
```

![用户在视频前面绘制的椭圆](../Images/43901e7ab4a68f71f1e2052be091d692.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-15T18:05:12.287

我想通过内存流播放视频（带音频）播放，这段代码有帮助吗？

# windows - 如何监听文件管理器（Explorer.exe）的目录变化和选择变化？

> ID：13397369
> 
> 赞同：3
> 
> 时间：2012-11-15T12:15:12.713
> 
> 标签：windows, delphi, hook, monitor, explorer

**[Listary](http://www.listary.com/)**是一个很棒的 Windows 文件浏览和搜索工具。一些第三方评论可以在**[Listary 的常见问题](http://www.listary.com/faq)**中找到。

如下图所示，**Listary**提供了**“复制文件夹路径到剪贴板”**（方便的**“切换到文件管理器中上次打开的文件夹”**可能来源于此功能）和**“将所选项目的路径复制到剪贴板”**。![智能快捷方式](../Images/31a1fa0afc9abbbefb96e1cc0b1e2ee8.png)

**Listary**似乎在某个进程中放置了某些挂钩，以立即监视文件管理器 (Explorer.exe) 的目录更改以提供**“将文件夹路径复制到剪贴板”**，并选择更改以提供**“将所选项目的路径复制到剪贴板”**。

我想知道如何实现这两种行为（在Delphi中），例如，要挂钩哪个进程以及如何挂钩这个进程？任何信息表示赞赏！

**[编辑]** TLama 很乐意指出 Raymond[从资源管理器窗口查询信息](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/20/188696.aspx)。但是，链接文章中的行为似乎是主动查询而不是被动收听。例如，如果我打开三个资源管理器实例，然后在 Word 中执行其他操作，那么主动查询方法是否可以识别最后一个文件夹路径？Listary 会记住最后一个文件夹路径，表明它正在被动地监听某个进程的每个文件夹更改。此外，**Listary**可以与多个文件管理器一起使用，如下图所示。我想知道这种`ShellWindows`方法是否适用于 xplorer2、TotalCmd 或 DirectoryOpus？![应用兼容性](../Images/b744e76d67f5700413753bd94b7be1a0.png)

# c++ - 如何使用一个依赖项的不同版本构建和部署包？

> ID：13397372
> 
> 赞同：5
> 
> 时间：2012-11-15T12:15:14.097
> 
> 标签：c++, gcc, ubuntu, makefile, deb

例如，我维护一个使用 libmemcached 的应用程序。我可以使用 libmemcached5 或 libmemcached6 编译它，也可以构建指向 libmemcached5、libmemcached6 甚至 libmemcached5|libmemcached6 作为依赖项的 .deb 包，但实际上我的二进制文件只使用其中一个编译。在不升级/降级用户端的任何依赖项的情况下，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:35:44.037

如果您正在使用存储库，或者如果您的应用程序的多个编译版本是可以接受的，那么您最好的办法是编译您的应用程序两次，一次使用 libmemcached5，一次使用 libmemcached6，并分别使用不同的包名称将它们打包，并使用自动安装正确的虚拟包：

```
 Package:   myapplication-memchched5
 Version:   1.3.17-1
 Depends:   libmemcached5
 Provides:  myapplication
 Conflicts: myapplication
 Replaces:  myapplication 
```

和

```
 Package:   myapplication-memchched6
 Version:   1.3.17-1
 Depends:   libmemcached6
 Provides:  myapplication
 Conflicts: myapplication
 Replaces:  myapplication 
```

现在将根据需要安装的其他内容`aptitude install myapplication`自动选择`myapplication-memchched5`或选择。`myapplication-memchched6`

# c# - WinForm类中最大控制对象的声明

> ID：13397377
> 
> 赞同：0
> 
> 时间：2012-11-15T12:15:36.447
> 
> 标签：c#, windows, winforms, visual-studio

我想知道如果我需要在类中声明 1000 多个控件对象，那么如何声明它。我有如下课程：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Configuration;

namespace FinApps
{
    public partial class Form1 : Form
    {   
    //Global Area Of Class
    // Maximum Limit of Declaration is 1000-

        private FinAppsUserControl.FinAppsUserControl side1; //global object of control

        public Form1()
        {
            side1 = new FinAppsUserControl.FinAppsUserControl(); //Initialization
            InitializeComponent();

            this.panel2.Controls.Add(side1);

        }
    }
} 
```

如果我要求在 form1 类的全局区域中声明 1000 多个全局控件对象，如上述，那么如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:45:09.727

您可以轻松地声明它：

```
List<Control> _controls = new List<Control>();

// in Load method (pseudocode)
//SuspendLayout
//add 1000+ controls in a loop
//ResumeLayout 
```

但是你做错了什么。如果您可以将控件拆分为可重用的组，请使用 UserControl 封装一小部分功能。你必须使用WinForms吗？在 WPF 中使用 DataTemplates 相对容易做到这一点。

请重新考虑您想要实现的目标，控制数量会为本地化、维护等带来重大问题。

# iphone - 将新电话号码添加到联系人应用程序

> ID：13397378
> 
> 赞同：0
> 
> 时间：2012-11-15T12:15:36.227
> 
> 标签：iphone, ios, xcode

我有这个代码来打开联系人视图控制器：

```
ABNewPersonViewController *newPersonVC = [[ABNewPersonViewController alloc] init];
               newPersonVC.newPersonViewDelegate = self;
               UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:newPersonVC];
               [self presentModalViewController:nc animated:YES]; 
```

我希望能够抓取`NSString *phoneNumber = @"(416)-555-5555";`并放入“家庭电话”领域。我查看[了](https://stackoverflow.com/questions/5377441/how-to-create-contacts-in-address-book-in-iphone-sdk) [其他](https://stackoverflow.com/questions/8249010/objective-c-adding-a-contact-to-a-specific-group-in-the-iphone) [答案](https://stackoverflow.com/questions/5735977/iphone-add-contact-to-existing-group-in-addressbook)，最终没有弹出任何内容或我的应用程序崩溃。苹果的文档也没有多大帮助。

我该如何解决这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:50:07.770

```
NSString *phoneNumber = @"(416)-555-5555";
ABRecordRef newPerson = ABPersonCreate();
CFErrorRef error = NULL;
ABRecordSetValue(newPerson, kABPersonDepartmentProperty,(__bridge  CFTypeRef)@"Department", nil);
ABMutableMultiValueRef phoneNumberMultiValue = ABMultiValueCreateMutable(kABPersonPhoneProperty);
ABMultiValueAddValueAndLabel(phoneNumberMultiValue,(__bridge  CFTypeRef)phoneNumber, kABWorkLabel, nil);
ABRecordSetValue(newPerson, kABPersonPhoneProperty, phoneNumberMultiValue, nil);
NSAssert( !error, @"Something bad happened here." );

ABNewPersonViewController *newPersonVC = [[ABNewPersonViewController alloc] init];
[newPersonVC setDisplayedPerson:newPerson];
newPersonVC.newPersonViewDelegate = self;
UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:newPersonVC];
[self presentModalViewController:nc animated:YES]; 
```

希望它对你有帮助。

# python - 与 __init__.py 混淆并从子模块导入父模块中的类

> ID：13397381
> 
> 赞同：2
> 
> 时间：2012-11-15T12:15:45.827
> 
> 标签：python, initialization, package

我在理解如何从子模块中从父模块导入类时遇到了一点困难。我有以下目录结构：

```
 module/
      __init__.py        (1)
      common.py          (containing testfunc and CommonClass)
      submod/
         __init__.py     (2)
         test.py         (containing TestClass) 
```

在`(1)`我有：

```
 from common import * 
```

所以我可以直接做：

```
 import module
   module.testfunc() 
```

在`(2)`我有：

```
 from test import TestClass 
```

所以从内部`module`我可以做到：

```
 import submod
   class_inst = submod.TestClass() 
```

现在在`TestClass`（包含在`test.py`）中，我想使用 的实例`CommonClass`，所以我尝试首先使用以下方法导入它：

```
 from ..common import * 
```

哪个工作正常，但是当我尝试创建 in 的实例`CommonClass`时`TestClass`：

```
 class TestClass(object):
       def __init__(self):
           self.inst = CommonClass() 
```

我得到错误：

```
 NameError: global name 'CommonClass' is not defined 
```

同样，如果我尝试改为`from ..common import CommonClass`我得到错误：

```
 ImportError: cannot import name CommonClass 
```

据我所知，`CommonClass`应该从内部可见`test.py`，所以我不确定为什么找不到它。我有一种感觉，我对`__init__.py`. 有没有人可以通过指出我犯的任何明显错误来提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:22:09.233

我想说“循环进口”，但我不能完全确定。您看到的 ImportError 很可能就是这种情况的症状。通常，如果您导入一个模块，该模块又导入其他内容，并且导入链最终导入了开始所有导入的模块，您将收到 ImportError。

您可以进入一个不从您的代码中导入任何其他内容`CommonClass`的新模块并从那里导入它吗？`module.submod.utils`

# python - python过滤器和列表并将“过滤索引”应用于另一个列表

> ID：13397385
> 
> 赞同：6
> 
> 时间：2012-11-15T12:16:01.967
> 
> 标签：python

> **可能重复：**
> [Python：优雅而有效的方式来屏蔽列表](https://stackoverflow.com/questions/10274774/python-elegant-and-efficient-ways-to-mask-a-list)

我有两个大小相等的列表，例如：

```
a=["alpha","beta","kappa","gamma","lambda"]
b=[1,2,None,3,4,5] 
```

我想做的是识别并删除列表 [b] 中的 none 元素，然后删除列表 [a] 中的相应元素。例如，在这里，我想删除 none 和“kappa”。

我知道：

过滤器（布尔，b）

这将从 [b] 中删除 None 元素，但是，我该如何删除 list[a] 中的相应条目？

我尝试了 zip，类似于（我的想法是打包和解包）：

```
a=["a","b","c","d","e"]
b=[1,2,None,3,4]
c=zip(a,b)
d=filter(bool,c) 
```

..但这不起作用。[d] 仍然有 none 元素。

我将不胜感激任何pythonic方式来实现这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T12:25:21.910

这可以通过[`itertools.compress()`](http://docs.python.org/3/library/itertools.html#itertools.compress)列表[理解](http://www.youtube.com/watch?v=pShL9DCSIUw)巧妙地完成：

```
>>> a=["a", "b", "c", "d", "e"]
>>> b=[1, 2, None, 3, 4]
>>> selectors = [x is not None for x in b]
>>> list(itertools.compress(a, selectors))
['a', 'b', 'd', 'e']
>>> list(itertools.compress(b, selectors))
[1, 2, 3, 4] 
```

这种方法意味着您只生成一次选择器（并且`itertools.compress()`应该很好而且很快）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T12:23:06.097

```
a = [a[i] for i,v in enumerate(a) if b[i] is not None]
b = [x for x in b if x is not None] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T12:18:57.743

只需使用列表推导并将该条件添加到生成器表达式中：

```
>>> a=["a","b","c","d","e"]
>>> b=[1,2,None,3,4]

>>> [x for x in zip(a,b) if x[1] is not None]
[('a', 1), ('b', 2), ('d', 3), ('e', 4)]

>>> [x for x,m in zip(a,b) if m is not None]
['a', 'b', 'd', 'e'] 
```

# matlab - fft(DFT) x 轴的单位

> ID：13397393
> 
> 赞同：7
> 
> 时间：2012-11-15T12:16:28.140
> 
> 标签：matlab, signal-processing, fft, dft

> **可能重复：**
> [如何从 FFT 结果中获取频率](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result)

我对 Matlab 中 fft(DFT) 命令的 x 轴感到困惑。当我们对在 n 点采样的信号执行 fft 命令时，我们会得到一个 x 轴为 0 到 n-1 的图。它是指频率（Hz）吗？例如，当我在 n=2 上出现尖峰时，是否意味着信号频率为 2Hz？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T12:19:08.197

X 轴是无量纲的。要获得 bin 索引和频率之间的对应关系，您需要知道 (a) 采样率 (Hz) `Fs`，和 (b) FFT 中的点数，`N`。箱的中心频率为：

```
f = i * Fs / N 
```

其中`f`是以 Hz 为单位的 bin 频率，`i`是 bin 索引。

有关更完整的解释，请参阅[此答案。](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result/4371627#4371627)

# c++ - 如何在 OpenCV + Visual C++ 中测量对比度

> ID：13397394
> 
> 赞同：9
> 
> 时间：2012-11-15T12:16:27.657
> 
> 标签：c++, image-processing, opencv

以前的问题是“如何在 OpenCV 中选择最佳对比度的图像”，但根据@Rook 的建议，我正在更改它。

我将在我的项目中使用 OpenCV + Visual Studio 2010。我只是想知道 OpenCV 如何让我更轻松。我从视频中提取了大约一千帧，我需要找出哪个具有最佳对比度。最好，我认为最高和最低对比度之间的质量。

我一直在网上搜索参考代码，但到目前为止，我还没有找到。

更新：所以基本上，我需要测量对比度并比较图像之间的值。顺便说一句，这是通过望远镜观测火星的视频，我将使用从中提取的帧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:09:02.430

图像的熵被用作对比度的量度。请参阅此[代码](http://areshopencv.blogspot.ru/2011/12/computing-entropy-of-image.html)。

> 熵是一个标量值，是随机性的统计量度，可用于表征输入图像的纹理。熵定义为
> 
> ```
> -sum(p.*log2(p)) 
> ```
> 
> 其中`p`包含直方图计数。

— [Matlab 文档](http://www.mathworks.com/help/images/ref/entropy.html)

# php - 灯箱画廊，作为锚点的标题在灯箱中显示两次相同的图像。

> ID：13397397
> 
> 赞同：1
> 
> 时间：2012-11-15T12:16:58.410
> 
> 标签：php, wordpress, lightbox

我在网站上使用灯箱画廊 wordpress 插件。我需要标题与图像具有相同的链接。因此，如果单击图像或标题，则会显示相同的图像。我已经破解了插件，所以标题是一个链接，但它两次显示相同的图像。希望这段代码有意义。

```
<a href="'.$lightbox_link[0].'" title="'.esc_attr($attachment->post_excerpt).'"';
        if ( $nofollow == "true" ) $output .= ' rel="nofollow"';
        if ( $options['global_settings']['lightbox_gallery_loading_type'] == 'highslide' ) :
            $output .= ' class="highslide" onclick="return hs.expand(this,{captionId:'."'caption".$attachment->ID."'".'})"';
        elseif ( $options['global_settings']['lightbox_gallery_loading_type'] == 'colorbox' ) :
            $output .= ' rel="'.$class.'"';
        endif;
        $output .= '><img src="'.$thumbnail_link[0].'" width="'.$thumbnail_link[1].'" height="'.$thumbnail_link[2].'" alt="'.esc_attr($attachment->post_excerpt).'" /></a> 
```

'; 这会从我的 wiziwig 中的 wordpress 库中输出图像。

现在，如果有标题，则以下输出标题。注意我添加了

```
 <a href="'.$thumbnail_link[0].'"> 
```

在第一个 $output 之后。以及关闭 a 这是导致错误的原因。

```
if ( $captiontag && (trim($attachment->post_excerpt) || trim($attachment->post_content) || isset($metadata)) ) {
            $output .= '<a href="'.$thumbnail_link[0].'"><'.$captiontag.' class="gallery-caption" id="caption'.$attachment->ID.'">';
            if($attachment->post_excerpt) $output .= '<span class="imagecaption">'.$attachment->post_excerpt . "</span><br />\n";
            if($attachment->post_content) $output .= '<span class="imagedescription">'.$attachment->post_content . "</span><br />\n";
            if($metadata) $output .= '<span class="imagemeta">'.$metadata.'</span>';
            $output .= '</'.$captiontag.'></a>';
        } 
```

谢谢

# shell - SWT - 可靠知道的事件，如果 shell 用户切换到另一个 shell

> ID：13397404
> 
> 赞同：5
> 
> 时间：2012-11-15T12:17:24.847
> 
> 标签：shell, focus, swt

我需要知道，当用户切换到另一个 shell 时，通过单击它。

我试过`shellListener.shellDeactivated()`了，但是这个事件被触发了，当 shell 失去对它自己的控件的关注时，意味着当活动 shell 中的控件被单击时。

这不是预期的行为，因为我需要知道何时激活另一个 Shell，而不是我的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T09:44:07.390

假设您有三个 shell。一个主外壳和两个可以从主外壳打开的外壳。

因此，当另一个 shell 被激活时，应该通知主 shell。您可以添加一个等待特定事件类型的侦听器（在主 shell 中）：

```
 shell.addListener(SWT.Show, new Listener() {

        @Override
        public void handleEvent(Event e) {
            System.out.println("activated: " + e.text);
        }
    }); 
```

其他 shell`notify`在它们被激活时应该触发 () 这个事件。为此，您将一个 shell 侦听器添加到其他两个 shell，并`fire`在方法`shellActivated()`中添加`o.notifyListeners();`.

```
 shell.addShellListener(new ShellAdapter() {
        @Override
        public void shellActivated(ShellEvent e) {
            Shell shellSrc = (Shell) e.getSource();
            Display display  = shellSrc.getDisplay();

            Event event = new Event();
            event.type = SWT.Show;
            event.text = "other shell 1";

            Shell[] shells = display.getShells();
            for(Shell o : shells) {
                o.notifyListeners(SWT.Show, event);
            }
        }
    }); 
```

当您激活其他两个 shell 之一时，主 shell 将收到事件类型通知`SWT.Show`。

# c# - 从 ASP.NET 用户控件中的用户来源重定向回来

> ID：13397405
> 
> 赞同：1
> 
> 时间：2012-11-15T12:17:27.647
> 
> 标签：c#, asp.net, user-controls

我有一个覆盖 Page_load 方法的用户控件，但是我想要的是，将用户从他们来自的地方重定向，它可以在“ON INIT 方法”或任何方法上，只要用户被重定向。

这是我目前得到的，

```
public partial class ASPUserControl: System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:20:20.463

您可以使用[`UrlReferrer`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)

```
Uri previousUri = Request.UrlReferrer;
if(previousUri != null)
    Response.Redirect(previousUri.ToString()); 
```

但是，`UrlReferrer`仅当用户单击链接（fe via `PostBackUrl`）或类似内容时才会填充，如果您曾经`Response.Redirect`访问过此页面，则不会填充。如果你用过`Server.Transfer`，你可以用它[`Page.PreviousPage`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)来获取 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:21:37.340

只要他正在请求页面，您就可以在您想要 onInit Page_Load 甚至按钮单击事件的时间/地点重定向用户。最好能尽早做，避免不必要的过程。

# android - 在 android 中拖动布局，就像在 facebook 中为 android 应用程序一样

> ID：13397410
> 
> 赞同：4
> 
> 时间：2012-11-15T12:18:00.877
> 
> 标签：android, facebook, drag-and-drop

我试图通过改变布局的边距来实现 Facebook 像拖动一样，但是即使我在视图上调用无效，那些总是留下痕迹

Facebook for android / ios 做到了，我想知道他们是怎么做到的，我到处都看到只有图像被拖放

我试图实现这样的东西[但是](http://i.stack.imgur.com/Gyhah.png)它在我的应用程序中留下了痕迹

```
package com.example.dragdemo;

@SuppressLint({ "NewApi", "ParserError", "ParserError" })
public class MainActivity extends Activity {

TextView x;
TouchExampleView tex;
Context ctx=MainActivity.this;

private float mPosX=0;
private float mPosY=0;

private float mLastTouchX;
private float mLastTouchY;

LinearLayout redLinear;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tex=new TouchExampleView(ctx);

    redLinear=(LinearLayout)findViewById(R.id.newLinear);
    redLinear.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

            //Log.e("action is ", event.getAction()+"");

            if(event.getAction()==MotionEvent.ACTION_MOVE)
            {
                //Toast.makeText(ctx, "comes in move", Toast.LENGTH_SHORT).show();

                if(((mPosX-(int) event.getX())>2002)||((mPosX-(int) event.getX())<2002)){

                    mPosX=(int) event.getX();
                    RelativeLayout.LayoutParams rl=new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
                    //rl.addRule(RelativeLayout., anchor)

                    rl.setMargins((int) event.getX(), 0, 0, 0);

                    redLinear.setLayoutParams(rl);
                    redLinear.invalidate();

                }
            }
            return true;
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:34:46.610

Jeremy Feinstein 的滑动菜单库是 Android 版 Facebook 应用风格菜单的出色实现。它没有你提到的线索问题。你可以在这里找到它：

[github](https://github.com/jfeinstein10/SlidingMenu)上的滑动菜单。

# xml - 通过正确的 XSD 版本验证 XML

> ID：13397413
> 
> 赞同：1
> 
> 时间：2012-11-15T12:18:21.133
> 
> 标签：xml, xsd, versioning

我们正在处理不同版本的多个 XSD 和 XML 文件。我们希望确保可以使用正确的 XSD 验证 xml 文件。有没有办法做到这一点？到目前为止，我得出了这样的结论：

*   您可以通过在模式的根元素中设置“版本”属性来对 xsd 进行版本控制（简单:)）
*   要对 xml 执行相同的操作，您可以将其放在注释部分或根元素中的属性中（在导入时和导出后处理后都需要预处理以编写版本） - 非常讨厌;-)

我还应该提到，我们不能确保我们得到的 xml 对任何 XSD 都是正确的，因为它可以被第三方传递。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:50:38.170

我会在根元素上放置一个版本号，然后使用 XProc 管道来控制验证，其中 XProc 管道根据它在版本号中看到的内容来决定要验证的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:52:12.820

**为了避免预处理**，任何解决方案都将是这两者的变体：为每个版本分配唯一的命名空间，或者使用每个版本的不同应用程序端点（例如 URL）来使用您的 xml。

# cuda - CUDA：同一块中的线程同步

> ID：13397420
> 
> 赞同：2
> 
> 时间：2012-11-15T12:18:36.000
> 
> 标签：cuda, thread-synchronization

我正在尝试在 CUDA 中编写程序，但我在线程之间的同一块中存在同步问题。

这是模型情况：

```
 10 __global__ void gpu_test_sync()
 11 {
 12     __shared__ int t;
 13     int tid = threadIdx.x;
 14
 15     t = 0;
 16     __threadfence();
 17     __syncthreads();
 18
 19     // for(int i=0; i<1000000 && t<tid; i++); // with fuse
 20     while(t<tid);
 21
 22     t++;
 23     __threadfence();
 24 }
 25
 26 void f_cpu()
 27 {
 28     printf("TEST ... ");
 29     int blocks = 1;
 30     int threads = 2;
 31     gpu_test_sync<<< blocks , threads >>>();
 32     printf("OK\n");
 33 } 
```

如果threads = 1，一切正常。如果线程数 > 1，则无限循环。

为什么？函数 __threadfence(); 应该使其他线程的 t 变量可见值。

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:23:41.637

我不相信你的内核能够做你想做的事情，因为分歧的分支`while(t<tid)`导致经线的所有线程无限循环并且永远不会到达线路`++t`。

# 长解释

如果您已经了解线程、块和扭曲，请滚动到“重要部分”以获取重要内容：

（我还没有使用 Kepler 架构的经验。如果不使用 Fermi，其中一些数字可能会有所不同。）

需要解释一些术语以理解下一部分：以下术语与逻辑（软件构造中的逻辑）线程有关：

*   thread – 单个执行线程。
*   块——一组执行相同内核的多个线程。
*   网格——一组块。

以下术语与物理（与硬件架构相关的物理）线程有关：

*   核心——单个计算核心，一个核心一次只运行一条指令。
*   warp – 在硬件上并行执行的一组线程，一个 warp 由当前一代 CUDA 硬件上的 32 个线程组成。

内核由一个或多个流式多处理器 (SM) 执行。Fermi 系列（GeForce 400 和 GeForce 500 系列）的典型中高端 GeForce 卡在单个 GPU 上具有 8-16 个 SM[ [Fermi 白皮书](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf)]。每个 SM 由 32 个 CUDA Cores（核心）组成。线程由 warp 调度器调度执行，每个 SM 有两个以锁步方式工作的 warp 调度器单元。warp 调度程序可以调度的最小单元称为 warp，它由截至撰写本文时发布的所有 CUDA 硬件上的 32 个线程组成。每个 SM 上一次只能执行一个 warp。

CUDA 中的线程比 CPU 线程轻得多，上下文切换更便宜，并且 warp 中的所有线程都执行相同的指令或必须等待 warp 中的其他线程执行指令，这称为单指令多线程（ SIMT) 并且类似于传统的 CPU 单指令多数据 (SIMD) 指令，例如 SSE、AVX、NEON、Altivec 等，这在使用条件语句时会产生后果，如下所述。

为了解决需要超过 32 个线程来解决的问题，CUDA 线程被排列成逻辑组，称为*块*和由软件开发人员定义的大小*网格。*块是线程的 3 维集合，块中的每个线程都有自己独立的 3 维标识号，以便开发人员区分内核代码中的线程。单个块内的线程可以通过共享内存共享数据，这减少了全局内存的负载。共享内存的延迟比全局内存低得多，但资源有限，用户可以在（每块）16 kB 共享内存和 48 kB L1 缓存或 48 kB 共享内存和 16 kB L1 缓存之间进行选择。

几个线程块可以依次组合成一个网格。网格是块的 3 维数组。最大块大小与可用的硬件资源相关，而网格可以是（几乎）任意大小。网格内的块只能通过全局内存共享数据，全局内存是延迟最高的 GPU 内存。

Fermi GPU 可以在每个 SM 上同时激活 48 个 warp（1536 个线程），因为线程使用足够少的本地和共享内存来同时容纳所有线程。线程之间的上下文切换很快，因为寄存器被分配给线程，因此不需要在线程切换之间保存和恢复寄存器和共享内存。结果是实际上需要过度分配硬件，因为它将通过让warp调度程序在发生停顿时切换当前活动的warp来隐藏内核内的内存停顿。

## 重要的部分

线程扭曲是在同*一流式多处理器*(SM) 上执行的一组硬件线程。warp 的线程可以比作在线程之间共享一个公共程序计数器，因此所有线程必须执行同一行程序代码。如果代码有一些分支语句，例如`if ... then ... else`warp 必须首先执行进入第一个块的线程，而 warp 的其他线程等待，接下来进入下一个块的线程将在其他线程等待时执行，依此类推。由于这种行为，如果可能，应在 GPU 代码中避免使用条件语句。当一个 warp 的线程遵循不同的执行行时，它被称为具有发散线程。虽然 CUDA 内核中的条件块应保持在最低限度，但有时可以重新排序语句，以便同一 warp 的所有线程仅遵循`if ... then ... else`块中的单个执行路径并减轻此限制。

`while`and语句是分支语句，因此`for`不限于`if`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:43:03.023

当您使用多个线程启动内核时，您会遇到一个无限循环，因为`while(t<tid);`对于任何`idx`大于零的线程来说都是一个无限循环。

此时，您的问题与线程同步无关，而是与您实现的循环有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:29:46.793

如果您要做的是让一系列线程串行执行，那么您就是在滥用 CUDA。

它也行不通，因为第一个线程之后的任何线程都不会收到更新的 t - 您必须调用 __syncthreads() 以刷新共享变量，但只有在所有线程都执行相同的事情时才能这样做- 即不等待。

# sql-server - 如何使用查询表达式 crm 进行内连接

> ID：13397421
> 
> 赞同：7
> 
> 时间：2012-11-15T12:18:37.687
> 
> 标签：sql-server, dynamics-crm-2011, query-expressions

我正在尝试使用查询表达式进行简单的内部连接。我试图用 QE 来隐藏这个查询，但我总是遇到同样的错误。我正在做这个量化宽松：

```
Entity Role = new Entity();
Role.LogicalName = "role";

Entity SystemUserRoles = new Entity();
SystemUserRoles.LogicalName = "systemuserroles";

QueryExpression query = new QueryExpression() {
  Distinct = false, EntityName = Role.LogicalName, ColumnSet = new ColumnSet("name"),

  LinkEntities = {
    new LinkEntity {
      JoinOperator = JoinOperator.Inner, LinkFromAttributeName = "roleid", LinkFromEntityName = Role.LogicalName, LinkToAttributeName = "roleid", LinkToEntityName = SystemUserRoles.LogicalName,
    }
  },

  Criteria = {
    Filters = {
      new FilterExpression {
        FilterOperator = LogicalOperator.And, Conditions = {
          new ConditionExpression("systemuserid", ConditionOperator.Equal, "9b1bf31d-ac29-e211-9826-00155d0a0b0f"),

        },
      },

    }
  }
};

ret = _service.RetrieveMultiple(query); 
```

得到这个：

```
SELECT b.Name
  FROM Role b
   INNER JOIN SystemUserRoles a
   ON a.RoleId=b.RoleId  
    WHERE SystemUserId = '9b1bf31d-ac29-e211-9826-00155d0a0b0f' 
```

但这告诉我实体角色不包含该字段`SystemUserId`。任何的想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T13:31:35.580

您的条件表达式需要在 LinkCriteria 对象上进行。实际上，这就是您当前查询的转换方式。

```
SELECT b.Name
FROM Role b
INNER JOIN SystemUserRoles a
ON a.RoleId=b.RoleId  
WHERE b.SystemUserId = '9b1bf31d-ac29-e211-9826-00155d0a0b0f' 
```

试试这个查询表达式：

```
Entity role = new Entity();
role.LogicalName = "role";

Entity systemUserRoles = new Entity();
systemUserRoles.LogicalName = "systemuserroles";

QueryExpression query = new QueryExpression() {
  Distinct = false, EntityName = role.LogicalName, ColumnSet = new ColumnSet("name")
};

query.AddLink( systemUserRoles.LogicalName, "roleid", "roleid").
LinkCriteria.AddCondition("systemuserid", ConditionOperator.Equal, "9b1bf31d-ac29-e211-9826-00155d0a0b0f");

ret = _service.RetrieveMultiple(query); 
```

请注意条件是如何添加到链接上的 LinkCriteria 而不是查询表达式本身的？

## 更新 1

正如@JamesWierzba 指出的那样，没有理由仅仅为了使用它的逻辑名称而定义一个实体：

```
QueryExpression query = new QueryExpression() {
  Distinct = false, EntityName = "role", ColumnSet = new ColumnSet("name")
};

query.AddLink("systemuserroles", "roleid", "roleid").
LinkCriteria.AddCondition("systemuserid", ConditionOperator.Equal, "9b1bf31d-ac29-e211-9826-00155d0a0b0f");

ret = _service.RetrieveMultiple(query); 
```

如果您使用的是[DLaB.Xrm Nuget 包](https://www.nuget.org/packages/DLaB.Xrm.2016/)，您可以更简洁地编写它：

```
var qe = QueryExpressionFactory.Create("role", "name");
qe.AddLink("systemuserroles", "roleid")
  .WhereEqual("systemuserid", "9b1bf31d-ac29-e211-9826-00155d0a0b0f");

ret = _service.RetrieveMultiple(qe); 
```

# jquery - 如何使用 stellar.js（用于滚动的 jquery 插件）？

> ID：13397422
> 
> 赞同：0
> 
> 时间：2012-11-15T12:18:41.777
> 
> 标签：jquery, css, jquery-plugins, scroll, parallax

我体内有三个 div：

```
<body>
  <div id="wrap">
    <div id="a"></div>
    <div id="b"></div>
    <div id="c"></div>
  </div>
</body> 
```

我只想意识到“#b”的滚动速度比其他两个快。而已。

所以我写了这样的代码（然后根据马克的建议修改它）：

```
<script>
   $(document).ready(function(){
      $(window).stellar();
   });
</script>

<style>
   #wrap{overflow:hidden;}
</style>

  ...
<body>
  <div id="wrap">
     <div id="a" data-stellar-ratio="1"></div>
     <div id="b" data-stellar-ratio="2"></div>
     <div id="c" data-stellar-ratio="1"></div>
  </div>
</body> 
```

但结果很糟糕。我永远无法滚动到整个页面的底部。

**每次#b 到达窗口顶部时，整个页面都会运行到顶部（就像我第一次运行此页面时看到的一样）**

我想我还是不明白 stellar.js 网站上的介绍是什么意思。

请帮帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T00:00:01.793

**编辑：**为了展示您的示例应该如何工作，[我在 JSFiddle 上为您创建了一个演示](http://jsfiddle.net/tM2jf/)。

目前，当需要将 Stellar.js 指向滚动元素时，您正在使用 Stellar.js 对抗“body”。在大多数情况下，这是“窗口”。此外，在文档准备好之前，您不能使用 Stellar.js。

因此，您应该将 JavaScript 更改为：

```
$(document).ready(function() {
    $(window).stellar();
}); 
```

jQuery 有一个 $(document).ready 的简写，而 Stellar.js 有一个 $(window).stellar 的简写，所以你也可以这样写：

```
$(function() {
    $.stellar();
}); 
```

希望这可以为您解决问题。

# c# - 为什么我没有使用 c# 在我的 asp.net 应用程序中获取 .csv 文件？

> ID：13397423
> 
> 赞同：1
> 
> 时间：2012-11-15T12:18:52.847
> 
> 标签：c#, asp.net, csv

我正在尝试通过单击此代码的按钮在客户端计算机上获取 .csv 文件：

```
Response.Clear();
    Response.ClearContent();
    Response.ClearHeaders();
    Response.ContentType = "text/csv"; ;
    Response.ContentEncoding = System.Text.Encoding.Unicode;
    Response.AddHeader("Content-Disposition", "attachment; filename=WBS.csv");
    Response.BinaryWrite(System.Text.Encoding.Unicode.GetPreamble());
    string output = "WBSCode,Description,TerritoryCode,Amount" + "\n";
    Response.Write(output); 
```

问题是代码正在执行，但我的机器中没有 .csv 文件.. 有什么问题？我第一次这样做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:34:32.473

您需要创建一个通用处理程序（.ashx 文件），它将 csv 作为响应发送。然后，您的按钮只需要有一个指向该 .ashx 的 url。下面是带有一些代码的处理程序示例。

```
public class GetCsvFile : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/csv";
        context.Response.AddHeader("Content-Disposition", "attachment; filename=WBS.csv");
        context.Response.Write("WBSCode,Description,TerritoryCode,Amount\n");
    }

    public bool IsReusable
    {
        get
        {
            return true;
        }
    }
} 
```

# erlang - Erlang 操作码及其含义

> ID：13397434
> 
> 赞同：10
> 
> 时间：2012-11-15T12:19:44.937
> 
> 标签：erlang, opcode, opcodes

Erlang VM 使用的一些[操作码](https://github.com/erlang/otp/blob/maint/lib/dialyzer/test/options1_SUITE_data/src/compiler/beam_opcodes.erl)具有明显的含义，但其他一些则是神秘的，它们之间似乎存在细微差别。

举个例子：

1.  `call_ext`和操作码有什么区别`call_ext_only`？
2.  `allocate`和操作码有什么区别`allocate_zero`？
3.  操作码是做什么`test_heap`用的？是某种检查还是实际上在堆中分配了一些空间？它在某种程度上与元组和列表的使用有关，但在哪些方面呢？
4.  代表的论点是什么`allocate`？

[如果有人可以向我指出任何可用于 Erlang VM 使用的操作码](https://github.com/erlang/otp/blob/maint/lib/dialyzer/test/options1_SUITE_data/src/compiler/beam_opcodes.erl)的文档，或者他至少可以在上述几点上启发我，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:06:52.240

正如在[类似的 SO-question](https://stackoverflow.com/questions/7935054/how-to-modify-erlang-assembly-are-any-resources-available)和[erlang-documentation 中所述](http://www.erlang.org/doc/man/compile.html)：

> 请注意，汇编程序文件的格式没有记录，并且可能会在版本之间发生变化 - 此选项主要用于内部调试。

如果你真的想知道发生了什么，似乎你必须在源代码中追踪它。大部分工作都在 erts/emulator/beam/beam_emu.c 中完成（我查看了 otp_src_R15B02）：

1.  `call_ext`：将[继续指针](http://www.erlang.org/doc/apps/erts/crash_dump.html#id71778)设置为*当前指令+2*并调度/调用外部。`call_ext_only`: 不碰CP，直接派送。（~第 1520 行）
2.  两者都分配内存，但`allocate_zero`也将其初始化为`0x00`（~第 334 行）。
3.  `test_heap`: 检查堆的 Nh 个字是否可用；如果没有，请进行垃圾收集。（~第 390 行）
4.  `allocate(StackNeeded, NumberOfRegistersToPreserve)`（〜第316行）

整个文件是*#defines*和*gotos*的组合，一些宏在同一文件夹中的 ops.tab 中定义。我也不是 erlang-asm 方面的专家，可能错过了一些东西。请记住这一点，并在开始与他们合作之前交叉检查我的陈述。

从链接的 SO-awnser 引用 TamasNagy：

> 我不确定你想用这个实现什么，但核心 erlang 可能是一个更好的代码操作级别。

请查看那里以获取更多信息。Erlang 有它的优势，但文档不是其中之一。

问候。

# pdf - 无法使用 Windows 8 阅读器打印 .pdf 文档

> ID：13397436
> 
> 赞同：2
> 
> 时间：2012-11-15T12:19:58.417
> 
> 标签：pdf, printing, windows-8

下面的代码在 Windows 8 Microsoft Reader 中打开一个 .pdf 文件，但它不打印该文档。如果无法从 Reader 的命令行完成打印，请告诉我们此代码执行。

```
SHELLEXECUTEINFO seInfo;
ZeroMemory(&seInfo, sizeof(seInfo));
seInfo.cbSize = sizeof(seInfo);
seInfo.fMask = SEE_MASK_NOCLOSEPROCESS|SEE_MASK_FLAG_DDEWAIT;
seInfo.lpDirectory = NULL;
seInfo.lpClass = NULL;
seInfo.lpIDList = NULL;
seInfo.nShow = SW_NORMAL;
seInfo.hwnd = ::GetForegroundWindow();
seInfo.lpVerb       = _T("open");
seInfo.lpFile       = (const _TCHAR *)szShortPath;//File name including the path
seInfo.lpParameters = _T("/p");
ShellExecuteEx(&seInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:34:32.743

> 看起来 Microsoft Reader 应用程序没有注册 print 或 printto 动词。可能>>因为在 PrintManager 类中没有用于自动打印的方法。我建议>>>当PDF文件类型的注册程序不>>>>没有注册pint或printto动词时禁用打印功能，并指示用户更改默认的>>>>>PDF文件程序。

# c# - 这些对象的实例化方式有什么区别？

> ID：13397439
> 
> 赞同：6
> 
> 时间：2012-11-15T12:20:13.403
> 
> 标签：c#, asp.net, object-initialization

以下两种情况有什么区别：

```
class Data
{
    PersonDataContext persons = new PersonDataContext();
    public Data() {}
} 
```

相对

```
class Data
{
    PersonDataContext persons;
    public Data() 
    {
        persons = new PersonDataContext();
    }
} 
```

我在 asp.net 中有同样的问题：

```
public partial class Data : System.Web.UI.Page
{
    PersonDataContext persons = new PersonDataContext();
    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

相对

```
public partial class Data : System.Web.UI.Page
{
    PersonDataContext persons;
    protected void Page_Load(object sender, EventArgs e)
    {
        persons = new PersonDataContext();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:22:45.607

在第一种情况下，您在声明位置初始化变量。

在第二个中，您在构造函数中对其进行初始化。

主要区别在于，如果您有其他构造函数并且忘记初始化或链接构造函数，则可以有一个未初始化的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T12:29:42.363

**字段初始化程序在构造函数调用之前运行**。因此，在案例 1 中，您的对象`PersonDataContext`将在构造函数调用之前创建。

```
PersonDataContext persons = new PersonDataContext(); 
```

在**第二种情况下，您的构造函数将首先执行，然后它将初始化**该字段。

你可以做一个简单的测试

```
class PersonDataContext
{
    public PersonDataContext()
    {
        Console.WriteLine("In PersonDataContext Constructor");
    }
}
class Data
{
    PersonDataContext persons = new PersonDataContext();
    public Data() 
    {
        Console.WriteLine("In Data Contructor");
    }
}

class Data2
{
    PersonDataContext persons;
    public Data2() 
    {
        Console.WriteLine("In Data2 Constructor");
        persons = new PersonDataContext();
    }
} 
```

然后在你的 Main 方法中

```
static void Main(string[] args)
{

    Data d1 = new Data();
    Data2 d2 = new Data2();
    Console.Read();
} 
```

输出

> 在 PersonDataContext 构造函数中 // 案例 1
> 
> 在数据构造器中 //案例 1
> 
> 在 Data2 构造函数中 //案例 2
> 
> 在 PersonDataContext 构造函数中 // 案例 2

* * *

对于 asp 示例，在第一种情况下，您的字段在事件之前初始化，在第二种情况下，您的字段在事件`Page_Load`中初始化`Page_Load`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T12:40:01.947

在您的第二个示例中，主要区别在于 Page_Load 只是处理请求时调用的众多 ASP.NET 事件之一。因此，在 Page_Load 之前引发的事件将无法访问/使用该字段，因为它尚未被初始化。

检查 ASP.NET 页面生命周期：http: [//msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T12:24:45.457

唯一的区别是创建对象的顺序。如果我没记错的话，字段初始化程序在构造函数之前运行，因此如果构造函数引用了该字段，它就已经存在了。

但从 99.9% 的案例来看，你不会看到两者之间有什么不同。在大多数情况下，直接在其上初始化字段会更安全，这样可以防止您在多个构造函数或派生类和复杂层次结构的情况下忘记它。

通常，构造函数用于获取外部参数来填充字段初始值设定项无法使用的字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T12:37:14.317

`unintialized variable for second case`如果您使用默认构造函数以外的构造函数进行对象初始化，您将拥有-

```
Data data = new Data(5); 
```

但如果你`chain parametized constructors to call default constructor`喜欢这个——

```
class Data
{
    PersonDataContext persons;
    public Data() 
    {
        persons = new PersonDataContext();
    }

    public Data(int a) : this()
    {

    }
} 
```

变量`persons`将被初始化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T12:38:31.413

*在您的第一个示例中，只要*构造函数是唯一的构造函数，就不会有有效的区别。如果您添加其他构造函数，那么您需要确保它们都初始化“人员”字段。

在 ASP.NET 示例中（对于第二个代码片段） - 您正在初始化 Page_Load 方法中的“persons”字段，这意味着使用此字段的任何其他方法可能会发现它未初始化。（你的意思是Page_Load，还是你的意思是让它成为一个构造函数......？）

底线是，如果“persons”字段始终需要为非空，则将其初始化为字段初始化器会更安全...

# javascript - CoffeeScripts 类 - 在回调中访问属性

> ID：13397440
> 
> 赞同：1
> 
> 时间：2012-11-15T12:20:15.717
> 
> 标签：javascript, coffeescript

我有简单的问题。我有 Foo 类，并且在构造函数中我开始计时器。在计时器回调中，我想要警报类属性，但我会得到“未定义”，为什么？

```
class Foo
  simpleProperty: "fooBar"

  constructor: ->
    setInterval @runBar, 1 * 1000
    return

  runBar: ->
    alert @simpleProperty #undefined, why?
    return

foo = new Foo() 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:24:00.820

因为`this`（或`@`在 CoffeeScript 的情况下）的范围。

您应该使用粗箭头：

```
runBar: =>
  alert @simpleProperty #fooBar 
```

看到它在[这里](http://coffeescript.org/#try%3aclass%20Foo%0A%20%20simpleProperty%3A%20%22fooBar%22%0A%0A%20%20constructor%3A%20-%3E%0A%20%20%20%20setTimeout%20%40runBar%2C%201%20%2a%201000%0A%20%20%20%20return%0A%0A%20%20runBar%3A%20%3D%3E%0A%20%20%20%20alert%20%40simpleProperty%20%23undefined%2C%20why%3F%0A%20%20%20%20return%0A%0Afoo%20%3D%20new%20Foo%28%29)工作。

# c# - 我怎么知道我的线程何时结束？

> ID：13397444
> 
> 赞同：2
> 
> 时间：2012-11-15T12:20:37.777
> 
> 标签：c#, visual-studio, xna

我正在开发一个游戏，我正在为我的加载屏幕使用多个线程来加载音乐和纹理。

我以这种方式启动线程：

```
backgroundgeluidThread = new Thread(loadmusic);
backgroundtexturesThread = new Thread(loadtextures);

backgroundgeluidThread.Start();
backgroundtexturesThread.Start(); 
```

之后，我使用`Thread.Sleep(8000)`, 因为我不知道线程何时停止并完成其工作。我可以在 IDE 的输出中看到它，但我不知道我的线程何时完成。

在此先感谢，如果您不理解我的问题，请询问我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:27:30.347

如果你想等待一个线程完成调用它的`Join()`方法：

```
backgroundgeluidThread.Join(); 
backgroundtexturesThread.Join(); 
```

线程结束后会直接返回。

另请参阅：http: [//msdn.microsoft.com/en-us/library/95hbf2ta.aspx](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:24:55.437

看看这个：http: [//msdn.microsoft.com/en-us/library/95hbf2ta.aspx](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)

使用 Thread.Join 阻塞直到线程完成，因为您有 2 个线程并且需要等待两个线程，您可以一个接一个地“加入”它们：

```
firstThread.Join();
secondThread.Join(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:28:02.493

使用[Thread.Join](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)使调用代码等待指定线程完成执行。

# python - 调用函数。改变输入

> ID：13397445
> 
> 赞同：-1
> 
> 时间：2012-11-15T12:20:43.327
> 
> 标签：python

我需要编写一个程序来接收数字列表并显示累积和，只有递归！

例如：

输入：

```
1,2,3 
```

输出：

```
1,3,6 
```

我的问题是我有一些测试要在函数上运行，我必须对所有这些测试都正确，但是我得到了错误的 b/c 我的函数更改了输入。有人知道如何解决它吗？（当然我不能改变测试..）

```
def rec_cumsum(numbers):
        ''' Input: numbers - a list of numbers,
                Output: a list of cumulative sums of the numbers'''
        if len(numbers) == 0 : return numbers
        if len(numbers) == 1 : return numbers
        numbers[1] = numbers[0] + numbers[1]
        return [numbers[0]] + rec_cumsum(numbers[1:])

### Testing code

def test_rec_cumsum(numbers):
        return rec_cumsum(numbers) == [sum(numbers[:i]) for i in range(1,len(numbers)+1)]

import random
print test_rec_cumsum([1,2,3])
print test_rec_cumsum(random.sample(range(100),30))
print test_rec_cumsum([]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:30:29.577

这基本相同，但不会改变数字的值。

```
def rec_cumsum(numbers):
    if len(numbers) == 0 : return numbers
    if len(numbers) == 1 : return numbers
    return [numbers[0]] + rec_cumsum([numbers[0]+numbers[1]] + numbers[2:]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:26:04.663

使用第二个列表：

```
def rec_cumsum(numbers):
    if len(numbers) == 0: return []
    sums = [ numbers[0] ]
    for i in range(1, len(numbers)):
        sums.append(sums[i-1] + numbers[i])
    return sums 
```

# eclipse - Eclipse 外部构建器导出/保存配置？

> ID：13397447
> 
> 赞同：4
> 
> 时间：2012-11-15T12:20:48.260
> 
> 标签：eclipse, android-ndk, java-native-interface

因此，如果您右键单击您的项目并转到属性，在 Builders 下，我将 android ndk builder 添加到项目中，这样当我运行我正在处理的应用程序时，它将编译 jni 内容。

有没有办法保存构建器配置，以便您可以轻松地将其添加到其他项目中？目前，每次添加/制作新项目时（当我尝试添加演示/示例项目以查看时），我都必须重新制作构建配置。它不是世界末日，它只是烦人，应该有一种方法可以保存项目之间的配置，但我就是找不到在哪里。

# multithreading - 任务沟通用什么图

> ID：13397454
> 
> 赞同：0
> 
> 时间：2012-11-15T12:21:23.037
> 
> 标签：multithreading, oop, uml

在一个类中，我们使用并发图（此处显示的类型[http://www.modelmakertools.com/modelmaker/screenshots/concurrency-diagram.html](http://www.modelmakertools.com/modelmaker/screenshots/concurrency-diagram.html)）来可视化系统中的任务以及通信和同步机制（标志、信号量） , 队列, 邮箱, 计时器, ...) 由任务使用和在任务之间使用。我们想摆脱我们用来绘制此类图表的工具（Artisan），但几乎没有其他工具似乎支持这种图表。

*   任何人都可以建议一个（最好是免费和轻量级的）工具来绘制这样的图表吗？

*   或者，您使用什么图表来表达任务之间的通信和同步？（你用什么工具来画这些？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:28:36.833

您可以使用 UML[活动图](http://en.wikipedia.org/wiki/Activity_diagram)来可视化并发。有许多工具可用于创建 UML 图，您可以在此处找到列表：[http ://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools](http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools)

我可以推荐[http://yuml.me/diagram/scruffy/activity/draw](http://yuml.me/diagram/scruffy/activity/draw)作为一个不错的轻量级选项。

# c++ - 什么样的活动会导致这种内存泄漏

> ID：13397467
> 
> 赞同：2
> 
> 时间：2012-11-15T12:22:21.557
> 
> 标签：c++, c, linux

pmap 显示泄漏进程内部的某些内容在进程堆栈之后分配内存地址空间。

```
bfe00000    220K rw---    [ anon ]
bfe45000     84K rw---    [ stack ]
bfe5a000   1260K rw---    [ anon ] 
```

我无法重现这样的分配。我使用了 malloc() 和 pthread_create() 但当堆栈前没有可用地址空间时，两者都会失败。

关于下一步做什么的建议？

附言。我不能使用任何调试器、valgrind 或 sth。因为问题出现在客户设备上。

编辑 1\. 候选人是：
- mmap()
- ?

# css - CSS3 背景图像：居中和固定大小

> ID：13397468
> 
> 赞同：2
> 
> 时间：2012-11-15T12:22:22.013
> 
> 标签：css, position, background-image

我的背景图像有问题。

我有一个大小为 2538 x 559px 的图像，无论窗口分辨率或大小如何，它都应该居中。背景图像应该有一个固定的大小，它不能缩放。图像中间是特定位置的文本表单，这就是图像不能缩放的原因。

如果我们的分辨率很小或者窗口变小了，中心仍然应该是可见的，并且图像应该被左右切割。

我尝试了很多浏览和发现的东西，但没有任何帮助。你能帮我么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:38:48.727

您必须将 设置`background-position`为百分比：

```
body
{
    height: 100%;
    width: 100%;
    background: url('path/to/file.png') no-repeat;
    background-position: 50% 50%;
    background-size: 1920px 1200px;
} 
```

这确保了它将占用容器宽度的百分比并始终将其显示在中心，切割图像的左侧和右侧。

为了使背景图像始终保持相同的大小，您应该使用该 `background-size:`属性。

请注意，这是一个 CSS3 属性，IE<9 将不支持它。

[http://jsfiddle.net/Kyle_Sevenoaks/QY5NQ/](http://jsfiddle.net/Kyle_Sevenoaks/QY5NQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:29:09.653

你有没有尝试过：

```
background-position: center;
background-size: 2538px 559px; 
```

# c# - 如何首先更新多对多 EF 代码

> ID：13397470
> 
> 赞同：0
> 
> 时间：2012-11-15T12:22:36.143
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我有两个模型：

```
public class Exchanger : BaseContract
{
    [DataMember, Key, Column(TypeName = "bigint")]
    public long Id { get; set; }

     ....
    [DataMember]
    public virtual ICollection<PaymentSystem> PaymentSystems { get; set; }

}

 [DataContract, Serializable]
 public class PaymentSystem : BaseContract
 {
    [Key, Column(TypeName = "bigint"), DataMember]
    public long Id { get; set; }

     ...

    [DataMember, JsonIgnore]
    public virtual ICollection<Exchanger> ExchangersSupport { get; set; }

} 
```

和流利的 api 方向具有多对多的关系：

```
 modelBuilder.Entity<Exchanger>()
     .HasMany(t => t.PaymentSystems)
     .WithMany(t => t.ExchangersSupport)
     .Map(m => m.ToTable("ExchangerToPaymentSystem")); 
```

插入代码：

```
 public void Create(Exchanger ex, long clientId)
       {
         if (_context != null)
        {
             ex.ClientId = clientId;
             ex.LastTimeUpdated = DateTime.UtcNow;
             _context.Exchangers.Add(ex);
             _context.SaveChanges();
        }

    } 
```

当我在 Exchanger 表中插入新条目时，EF 在 ExchangerToPaymentSystem 表中创建条目时，它也会同时在 PaymentSystem 表中创建相同的条目。当我更新时，没有任何反应。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:51:56.777

对于中间表，您的映射配置必须类似于以下内容：

```
this.ToTable("ExchangerToPaymentSystem");
            this.HasKey(e => e.Id);

            this.HasRequired(e => e.Exchanger )
                .WithMany(e => e.ExchangersSupport )
                .HasForeignKey(pc => pc.ExchangerId);

            this.HasRequired(pc => pc.PaymentSystem )
                .WithMany(p => p.PaymentSystems)
                .HasForeignKey(pc => pc.PaymentSystemId); 
```

当您的实体来自不同的数据上下文时，通常会发生这种行为。确保所有实体都来自相同的数据上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:58:45.450

所以，当你这样做

var exchange = new Exchanger() { PaymentSystems = paymentSystems, ... };

它会自动为您在链接表中创建记录，这是预期的和必需的。我不完全确定我明白现在的问题是什么......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:33:20.437

好的，我不知道我必须将 PaymentSystems 集合重新附加到对象上下文，它不会自动重新附加，而是标记为新的（状态 = 添加）。

```
 public void Create(Exchanger ex, long clientId)
    {
        if (_context != null)
        {
            ex.ClientId = clientId;
            ex.LastTimeUpdated = DateTime.UtcNow;

           **var ps = ex.PaymentSystems.Select(x=>x.Id);
            var ps2 = _context.PaymentSystems.Where(x => ps.Any(y => y == x.Id)).ToList();
            ex.PaymentSystems.Clear();
            foreach (var pp in ps2)
            {
                ex.PaymentSystems.Add(pp);
            }**

            _context.Exchangers.Add(ex);
            _context.SaveChanges();
        }

    } 
```

# ruby - 如何让 nanoc SASS 过滤器使用 SCSS 语法？

> ID：13397472
> 
> 赞同：12
> 
> 时间：2012-11-15T12:22:38.757
> 
> 标签：ruby, nanoc

在我的 nanoc 站点中，我想使用 SCSS 指定我的样式：

```
p {
  em {
    color: red;
  }
} 
```

...不是SASS：

```
p 
  em 
    color: red 
```

但是如果我尝试使用 SCSS，我会从 SASS 过滤器中得到一个编译错误。如何让它使用 SCSS？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T12:23:11.830

事实证明这很简单：

```
filter :sass, syntax: :scss 
```

nanoc 中的过滤器似乎遵循这样的模式，即接受给定的任何选项并将它们传递给实际执行工作的任何对象。例如，`Nanoc::Filters::Sass`在它的`run`方法中这样做：

```
def run(content, params={})
  options = params.dup
  # supply default options, etc...
  engine = ::Sass::Engine.new(content, options)
  # ...
  engine.render
end 
```

`Sass::Engine`，反过来，有`:syntax`一个[可用的选项](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#options)。

# r - 在 ffdf 对象中获取与上一个日期的差异

> ID：13397473
> 
> 赞同：1
> 
> 时间：2012-11-15T12:22:41.783
> 
> 标签：r, flat-file

有时我问了以下问题：

> 我有一个交易日和市场价值的交易清单。每个（交易）日都有新头寸进入列表，但旧头寸永远不会消失（当头寸到期时，价值保持不变）。该列表如下所示：
> 
> ```
> Deal Trade_Date MktValue Desired_Col
> Deal1 31.08.2012 10 +10
> Deal2 31.08.2012 21 +21
> Deal1 03.09.2012 12 +2
> Deal2 03.09.2012 19 -2
> Deal3 03.09.2012 2  +2 
> ```
> 
> 我希望每笔交易都能获得与前一个交易日期的差额（上例中的 Desidered_Col）。

*Roland*向我提供了以下解决方案：

> df <- read.table(text="Deal Trade_Date MktValue Desidered_Col Deal1 31.08.2012 10 +10 Deal2 31.08.2012 21 +21 Deal1 03.09.2012 12 +2 Deal2 03.09.2012 19 -2 Deal3 03.09.2012 2 +2" ,标题=真）
> 
> 库（data.table）dt <- as.data.table（df）
> 
> diff.padded <- function(x) c(x[1],diff(x)) dt[,Desidered_Col2:=diff.padded(MktValue),by=Deal]
> 
> ```
>  Deal Trade_Date MktValue Desired_Col Desired_Col2
> 1: Deal1 31.08.2012       10            10             10
> 2: Deal2 31.08.2012       21            21             21
> 3: Deal1 03.09.2012       12             2              2
> 4: Deal2 03.09.2012       19            -2             -2
> 5: Deal3 03.09.2012        2             2              2 
> ```

该解决方案与 data.table 完美配合。但是考虑到我的桌子的大小，我决定尝试使用 ffdf 对象。因此，我现在将数据保存在 ffdf 文件中，不幸的是，我试图重现相同的解决方案，但没有成功。你有什么建议我可以在 ffdf 中重现它吗？谢谢你的帮助。

这是我正在运行的完整代码：

```
# Load needed packages
library(RODBC)
library(data.table)
library(ETLUtils)
library(RSQLite)
library(ffbase)

calendar <- read.csv("Trading_Calendar.csv",sep=";",stringsAsFactors=FALSE)
calendar$STICHTAG <- as.Date(calendar$STICHTAG,"%d.%m.%Y")

ST_a=Sys.Date()-2
rd_a=as.Date("13.11.2012","%d.%m.%Y")
ST=paste("'",as.character(format(ST_a,"%d.%m.%Y")),"'",sep="")
rd=paste("'",as.character(format(rd_a,"%d.%m.%Y")),"'",sep="")

gc(TRUE)

st.strom <- calendar[calendar$STICHTAG>=rd_a & calendar$STICHTAG<=ST_a &   calendar$BR_Strom==1,"STICHTAG"]
st.strom <- format(st.strom,"%d.%m.%Y")
st.strom.s <- paste("('",do.call(paste, c(as.list(as.character(st.strom)), sep="','")),"')",sep="")

started.at=proc.time()
Sys.sleep(1)

memory.limit(size=4095)

query <- paste("select * from is_bewertung_data where commodity in ('CASH','COAL','CO2','ELEC','GCERT') 
               and stichtag in ",st.strom.s,sep="")

deals.strom <- read.odbc.ffdf(query = query,odbcConnect.args=list(dsn="dsn",uid="id",pwd="pwd"),
                       first.rows = 100000, next.rows = 500000, VERBOSE=TRUE)

result <- ffdfdply(deals.strom, deals.strom$DEALID, FUN=function(x){ 
  x <- split(x, x$DEALID)
  x <- lapply(x, FUN=function(onlyonedeal){
    onlyonedeal$Desidered_Col2 <- c(NA, -diff(onlyonedeal$STICHTAG))
    onlyonedeal
  })
  x <- do.call(rbind, x)      
  x
})
cat("Finished in",timetaken(started.at),"\n") 
```

这里是 str(deals.strom[1:5,]) 的结果：

```
'data.frame':   5 obs. of  39 variables:
 $ ABBREVIATION   : Factor w/ 33553 levels " C 251"," TÜV EE Donaustrom",..: 1893 1892 1894 1895 1896
 $ TRADEDATE      : POSIXct, format: "2007-06-19" "2007-06-19" "2007-06-19" ...
 $ BOOK           : Factor w/ 30 levels "CR_RIR_RISKRED",..: 10 10 10 10 10
 $ CONTRACT       : Factor w/ 20 levels "Base","DNULL",..: 1 5 5 1 1
 $ BUYSELL        : Factor w/ 2 levels "BUY","SELL": 2 1 2 1 1
 $ RATE           : num  54.2 57.2 57.3 54.2 55.1
 $ AMOUNT         : num  474792 501072 501773 474792 964476
 $ CUR            : Factor w/ 2 levels "EUR","USD": 1 1 1 1 1
 $ VOLUME         : num  8760 8760 8760 8760 17520
 $ UNIT           : Factor w/ 2 levels "MWH","t": 1 1 1 1 1
 $ STARTDATE      : POSIXct, format: "2010-01-01" "2010-01-01" "2010-01-01" ...
 $ ENDDATE        : POSIXct, format: "2011-01-01" "2011-01-01" "2011-01-01" ...
 $ BROKERAGE      : num  0 0 0 0 175
 $ DV             : num  85078 -98218 98919 -85078 -185048
 $ REALIZED       : num  85078 -98218 98919 -85078 -185048
 $ PV             : num  0 0 0 0 0
 $ DV_DAY         : num  0 0 0 0 0
 $ DV_MONTH       : num  0 0 0 0 0
 $ DV_YEAR        : num  0 0 0 0 0
 $ TRADER         : Factor w/ 16 levels "Adolf Plentz",..: 7 7 7 7 12
 $ ACTIVE         : Factor w/ 2 levels "LONGTERM","SHORTTERM": 2 2 2 2 2
 $ STATUS         : Factor w/ 2 levels "GCPTY","INT": 1 1 2 2 1
 $ PV_MIN         : num  0 0 0 0 0
 $ PV_PLUS        : num  0 0 0 0 0
 $ VERTRAGSPARTY  : Factor w/ 21 levels "EDL_G059","EDL_G097",..: 10 10 3 3 10
 $ GESELLSCHAFT   : Factor w/ 1 level "24/7 Trading": 1 1 1 1 1
 $ COMMODITY      : Factor w/ 5 levels "CASH","CO2","COAL",..: 4 4 4 4 4
 $ TO_BE_DELIVERED: num  0 0 0 0 0
 $ ACCOUNT        : Factor w/ 8 levels "CR_RISKRED","HO_COAL",..: 5 5 5 5 5
 $ VERW_PREIS     : num  0 0 0 0 0
 $ PV_ND          : num  0 0 0 0 0
 $ BILANZIERUNG   : Factor w/ 2 levels "JA","NEIN": 1 1 1 1 1
 $ MOTIV          : Factor w/ 8 levels "Emissionszertifikate",..: 4 4 4 4 4
 $ STICHTAG       : POSIXct, format: "2012-11-13" "2012-11-13" "2012-11-13" ...
 $ DEALID         : Factor w/ 59704 levels "FUX.E.EEX.K.20090622.002",..: 7175 7103 12584 12500 17985
 $ COUNTERPARTY   : Factor w/ 174 levels "24sieben GmbH",..: 171 171 53 53 141
 $ COMMODITY2     : Factor w/ 8 levels "CASH","CER","COAL",..: 4 4 4 4 4
 $ MARKTGEBIET    : Factor w/ 3 levels "Kohle","Strom",..: 2 2 2 2 2
 $ INSTRUMENT     : Factor w/ 88 levels "-","Elektrizität FUX EEX Base Apr11 EEXFUT",..: 1 1 1 1 1 
```

Jan提示后我的解决方案不起作用：

```
test <- as.ffdf(deals.strom[,c("DEALID","STICHTAG","PV")])
test <- transform(test,chg=c(NA,diff(PV)),chg2=c(NA,-diff(PV)))
fdd <- as.ff(!duplicated(test$DEALID))
test[fdd,c("chg","chg2")] <- test[fdd,"PV"] 
```

我收到以下错误消息：*error: is.null(rownames(x)) is not TRUE*。不知何故，我无法将 ffdf 子集化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:57:03.130

嗨，我找到了以下解决方案。它正在工作，但如果您有更优雅的解决方案，我将不胜感激。我仍然被迫在 RAM 中使用对象，并且我担心如果数据大小增加，我将不得不分段处理数据（这甚至不如解决方案那么优雅）。数据存储在 ffdf 文件中。我大约有 21Mio。行和 39 列。

```
deals # ffdf with 21Mio. rows and 39 columns
deals <- ffdfsort(deals)

deals <- transform(deals, delta_MktValue=0)
diff.padded <- function(x) c(x[1],diff(x))
delta <- data.table(deals[,c("Deal","Trade_Date","MktValue")])

diff <- delta[,diff.padded(MktValue),by=Deal]

deals[,"delta_MktValue"] <- diff[,V1]

rm(diff)
rm(delta)
rm(delta_PV)
gc() 
```

它实际上正在工作，但如果有人可以提出更优雅的解决方案，我将不胜感激。特别是我想直接在 ffdf 中执行计算。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:01:14.533

您是否尝试过 ffbase 包中的 ffdfdply？例如，请参见此处有关如何使用它的示例。[R 语言：计算“分组依据”或使用 ff 包拆分的问题](https://stackoverflow.com/questions/13398061/r-language-problems-computing-group-by-or-split-with-ff-package)。

所以在你的情况下做类似的事情（我在这里根据你的示例脚本随心所欲，但你应该理解在 ffdf 设置中拆分应用组合的意义）

```
require(ffbase)
result <- ffdfdply(deals[c("Deal","Trade_Date")], deals$Deal, FUN=function(x){ 
  x$Deal <- as.character(x$Deal)
  x <- split(x, x$Deal)
  x <- lapply(x, FUN=function(onlyonedeal){
    onlyonedeal$Desidered_Col2 <- c(NA, -diff(onlyonedeal$Trade_Date))
    onlyonedeal
  })
  x <- do.call(rbind, x)      
  x
}) 
```

另一种解决方案是。这不会在 FUN 中明确使用 split-apply-rbind。

```
require(ffbase)
require(doBy)
result <- ffdfdply(deals[c("DEALID","STICHTAG")], deals$DEALID, FUN=function(x){ 
  x <- orderBy(~ DEALID + STICHTAG, data = x)
  x$Desidered_Col2 <- c(NA, -diff(as.Date(x$STICHTAG)))
  firstdealdate <- !duplicated(x$DEALID)
  x$Desidered_Col2[firstdealdate] <- NA
  x
}) 
```

# javascript - 如何在 chrome 浏览器中禁用 pepflashplayer.dll

> ID：13397474
> 
> 赞同：1
> 
> 时间：2012-11-15T12:22:42.887
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想以编程方式（通过java脚本或其他方式）禁用pepflashplayer.dll（该文件负责在网页上播放flash内容），但没有任何方法可以做到这一点。

相反，我发现我们可以转到 chrome://plugins url，然后单击禁用此 dll 的链接，我们可以实现这一点，但我不希望这种手动方式这样做。

请提出一些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:55:12.833

这很简单！

1) 在 Chrome 中转到：`chrome://plugins`

2）禁用：Adobe Flash Player（可能是第一个选项）

3）现在安装你的操作系统版本的flashplayer（他们将使用你的默认flash player版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:15:03.677

您可以尝试使用[https://developer.chrome.com/extensions/types.html](https://developer.chrome.com/extensions/types.html) API 来启用和禁用已安装的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T23:43:20.243

所以，这就是我所做的，到目前为止它正在工作。

在 Chrome 的地址栏中输入：`chrome:plugins`

在那里你会找到 Adob​​e Flash Player 插件，首先禁用 pep dll，然后搜索 pep dll 文件的位置，去那里不仅删除 dll 文件，还删除名为 PepperFlash 的文件夹。

重新启动您的计算机，就是这样。这对我有用。

# iphone - 通过 didFinishLaunchingWithOptions 预加载 NSURL 并调用 ViewController-webview

> ID：13397475
> 
> 赞同：0
> 
> 时间：2012-11-15T12:22:43.840
> 
> 标签：iphone, ios, webview, nsurl, preloader

如果我的应用程序启动，我想通过“didFinishLaunchingWithOptions”预加载一个 URL。这时候我直接调用ViewController中的URL，但是到内容的时间太长了，所以我想直接从URL中看到内容。

***这时候在我的ViewController viewDidLoad中：***

```
[myWebView loadRequest:[NSURLRequest requestWithURL:
[NSURL URLWithString:NSLocalizedString(@"URL_today",@"URL-Calendar")]]];  // I localize the URL ;-)
loadingTimer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(loading) userInfo:(nil) repeats:YES]; 
```

**所以，我想我必须在我的 AppDelegate 中创建一个方法。**

```
- (void) callURL{
[myWebView loadRequest:[NSURLRequest requestWithURL:
[NSURL URLWithString:NSLocalizedString(@"URL_today",@"URL-Calendar")]]];
loadingTimer = [NSTimer scheduledTimerWithTimeInterval:(1.0/2.0) target:self selector:@selector(loading) userInfo:(nil) repeats:YES];} 
```

比调用“didFinishLaunchingWithOptions”中的方法

```
[self callURL]; 
```

**现在我必须在 ViewController 中的 webView 中调用结果 - viewDidLoad：**

```
[URL-RESULT-show ] 
```

有没有人有想法，怎么做？谢谢。

# firefox - Tridion 2011：Firefox - 为什么如果登录弹出窗口被转义，它会显示 xml 错误消息？

> ID：13397490
> 
> 赞同：0
> 
> 时间：2012-11-15T12:23:15.773
> 
> 标签：firefox, tridion, tridion-2011

我在 firefox 3.5 及更高版本上访问 tridion URL，它会弹出用户 ID 和密码。

我正在使用 Tridion 2011 SP1 HR1。

那时，我一不小心就逃过了它。页面出现 XML 错误消息而不是特定消息

```
XML Parsing Error: no element found
Location: http://XXXXXXXXXXXX/WebUI/Editors/CME/Views/Dashboard/Dashboard.aspx#locationId=tcm:229-31229-2
Line Number 1, Column 1: 
```

> **是否有任何修复程序可以显示特定的错误消息，例如“需要输入用户 ID 和密码”**

## 更新：

为了让你清楚的了解，

*在 IE 8 和 Chrome 15 上*：

*   如果我在登录弹出窗口上转义/单击取消，它会显示**White Screen**。

*在 Firefox 3.5 及更高版本上：*

*   如果我在登录弹出窗口上转义/单击取消，它会显示**NO ELEMENT FOUND**。

供您参考，请参阅 Firefox 的屏幕截图。

## *第1步：*

登录时

![登录时](../Images/2b20b67acb262b0709484b2ced00bf97.png)

## *第2步：*

单击登录弹出窗口上的退出/取消按钮后。

![登录后取消/转义](../Images/f7ecaa6d062be1b76c625344bf25b5e6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:41:40.533

好的 - 我认为这里的第一条评论是我认为您没有使用受支持/经过测试的浏览器（FF 3.5 已经超过 3 年了）。当我查看我的系统（Tridion 2011 SP1 HR1）的配置文件时，我看到以下受支持的浏览器节点：

```
 <supportedbrowsers>
    <browser name="Mozilla Firefox" regExp="Firefox/([6-9]|[1-9]\d+)" notTested="true"/>
    <browser name="Google Chrome" regExp="Chrome/(1[3-9]|[2-9]\d+)" notTested="true"/>
    <browser name="Microsoft Internet Explorer" regExp="MSIE (\d{2,*})" notTested="true"/>
    <browser name="Apple Safari" regExp="\(Macintosh;.+\).+Version/([6-9]|[1-9]\d+).+Safari" notTested="true"/>
    <browser name="Microsoft Internet Explorer 7" regExp="MSIE 7"/>
    <browser name="Microsoft Internet Explorer 8" regExp="MSIE 8"/>
    <browser name="Microsoft Internet Explorer 9" regExp="MSIE 9"/>
    <browser name="Mozilla Firefox 6" regExp="Firefox/6"/>
    <browser name="Mozilla Firefox 7" regExp="Firefox/7"/>
    <browser name="Google Chrome 14" regExp="Chrome/14"/>
    <browser name="Google Chrome 15" regExp="Chrome/15"/>
    <browser name="Apple Safari 5" regExp="\(Macintosh;.+\).+Version/5.+Safari"/>
  </supportedbrowsers> 
```

这意味着没有测试版本 6 下的任何内容。所以请仔细检查支持，看看系统是否仍然支持你的浏览器。我认为您可能需要升级您的浏览器。

其次，当您拒绝输入用户名/密码时，您应该总是看到某种错误/访问被拒绝消息，所以我不确定为什么您看到错误页面是一个问题。当您拒绝进行身份验证时，您希望看到什么？

这是我在使用受支持的 FF 版本时看到的：

![在此处输入图像描述](../Images/bcda744a1adc0920c00a3c6cd298123d.png)

如果您试图阻止用户名/密码提示，我建议您查看您的安装并确保它使用集成安全性，或者将您的密码保存在浏览器中。

# algorithm - 使用三个罗伯特塞德威克的中位数快速排序改进

> ID：13397497
> 
> 赞同：2
> 
> 时间：2012-11-15T12:23:43.397
> 
> 标签：algorithm, quicksort

以下来自 Robert Sedwick 的算法书中的快速排序部分的文本。

通过从数组的左侧、中间和右侧选择三个元素，我们可以将哨兵纳入该方案。对三个元素进行排序，然后将中间的一个与 交换，`a[r-1]`然后在 上运行分区算法`a[l+1],...,a[r-2]`。这种改进称为三方法中值。

三种方法的中位数有助于以三种方式快速排序。

1.  它使最坏的情况在任何实际排序中都不太可能发生。为了使排序花费`O(N^2)`时间，所检查的三个元素中的两个必须在文件中最大或最小的元素中，并且该事件必须在大多数分区中始终如一地发生。

2.  它消除了分区前哨键的需要，因为此功能由分区前检查的三个元素之一提供服务。

3.  它将算法的总平均运行时间减少了大约 5%。

    ```
    template <class Item> 
    void exch(Item &A, Item &B) 
          { Item t = A; A = B; B = t; } 

    template <class Item> 
    void compexch(Item &A, Item &B) 
          { if (B < A) exch(A, B); }

    static const int M = 10;
    template <class Item>
    void quicksort(Item a[], int l, int r)
      {
        if (r-l <= M) return;
        exch(a[(l+r)/2], a[r-1]);  // line 1
        compexch(a[l], a[r-1]);   // line 2.
        compexch(a[l], a[r]);     // line 3.
        compexch(a[r-1], a[r]);   // line 4.
        int i = partition(a, l+1, r-1);
        quicksort(a, l, i-1);
        quicksort(a, i+1, r);
      }

    template <class Item>
    void hybridsort(Item a[], int l, int r)
      { quicksort(a, l, r); insertion(a, l, r); } 
    ```

我对上述文字的问题，任何人都可以用简单的例子来解释

1.  作者所说的“在任何实际排序中都不太可能发生最坏的情况。对于需要 N 平方时间的排序，所检查的三个元素中有两个必须是最大的”是什么意思？

2.  作者所说的“它消除了对分区的哨兵键的需要”是什么意思？

3.  在上面的程序中，我们在上面代码中注释的第 1、2、3 和 4 行实现了什么？

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:10:33.870

快速排序算法的优势在于将数据分成两半，然后对每一半进行排序并合并结果。这种行为赋予了它 O(N log N) 的复杂性。然而，这是基于这样一个事实，当您将数据分成两半时，您实际上将其分成两半。然而，这并不总是正确的。您不仅要划分数组，还要将其划分为两部分，而是将每个元素与分区元素（例如 P）进行比较。如果一个元素小于或等于 P 则它进入左子数组，否则进入右子数组。所以子数组的大小很大程度上取决于分区元素。如果 P 等于数组中的最大值或最小值，则子数组之一将为空，并且快速排序不会从“除法阶段”中获得任何收益。

“三的中位数”方法通过使分区元素成为三个选定元素的中间值元素来防止分区元素成为数组的最大或最小元素。

代码中的四行有效地对三个元素进行了适当的排序，并选择中间的一个作为新的分区。如果您要比较三个元素以确定中位数，您不妨同时对它们进行排序。

# java - 增量运行机制

> ID：13397501
> 
> 赞同：0
> 
> 时间：2012-11-15T12:24:07.087
> 
> 标签：java, variable-assignment, atomic

正如许多开发人员所知，增量运算符不是原子的。

例如：

```
public void incrementId(){ // id being an int field
   id++;
} 
```

实际上，这对应于三个不同的操作：

```
int temp = id;
id = id + 1;  
id = temp; 
```

此外，此方法的行为类似：

```
 public void incrementId(){ // id being an int field
       id = id + 1;  // three steps also here
    } 
```

我的问题是：

两种操作在幕后的真正区别是什么：

```
id = id + 1; //three steps => non atomic

id = anotherIntVariable + 1; // one step => atomic 
```

什么概念迫使编译器将第一个转换为 3 个步骤而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:35:28.537

> 什么概念迫使编译器将第一个转换为 3 个步骤而不是另一个？

不是，`id = xyz + 1`会编译成如下字节码：

```
 7  iload_2 [xyz]
 8  iconst_1
 9  iadd
10  istore_1 [id] 
```

从字节码不难看出，上面不是“一步到位”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:35:21.770

没有什么可以说的：

```
id = anotherVariable + 1 
```

不会分三步执行。但是无论你运行上面的代码多少次，最终的结果总是一样的（变量的值`id`总是`anotherIntVariable`加 1），就像在例子中一样`id = id + 1`，之前在变量上设置的值`id`驱动新`id`值，如果您遇到竞争条件，最终值`id`可能不是您所期望的。

几点注意事项：

*   如果你是`id`从多个线程设置变量，那么无论你如何设置它，你都需要同步它。总是，否则可能根本不会设置该值（请参阅 Java 并发实践的第 3 章）。或者，您可以将`id`变量设置为 volatile；
*   `id`这仅在实际上可以从多个线程访问时才重要。如果不是这种情况（例如，如果`id`是方法中的局部变量），那么您无需担心锁定/等...即使您在方法中有匿名线程也是如此，因为它们只能访问声明为 final 的局部变量。

# php - jQuery分页所需的指导

> ID：13397503
> 
> 赞同：1
> 
> 时间：2012-11-15T12:24:12.210
> 
> 标签：php, jquery

嗨，我正在使用 jQuery 分页，目前它看起来像

```
<Prev 1 2 3 4 5 6 7 8 9 10 11 12 Next> 
```

而不是上面我需要类似这样的

`<Prev 1 2 3 . . . 11 12 Next>`

`<Prev 3 4 5 . . . 11 12 Next>`

`<Prev 5 6 7 . . . 11 12 Next>`

最后

`<Prev 1 . . . . 10 11 12 Next>`

下面是我对应的代码来了解情况

```
var PerPage = 15;
var NumberOfItems = 180; //from db
var NumberOfPages = Math.ceil(NumberOfItems / PerPage);

 // to create Prev link
 var NavigationHtml = '<li class="previous"><a href="javascript:previous_history_trades();"><span></span></a></li>';
   var CurrentLink = 0;

 // to create total page numbers link
    while (NumberOfPages > CurrentLink) {
           NavigationHtml += '<li class="history_trades_page_link" longdesc="' + CurrentLink + '"><a href="javascript:go_to_history_trades_page(' + CurrentLink + ')">' + (CurrentLink + 1) + '</a></li>';
            CurrentLink++;

      }
     //to create next link
     NavigationHtml += '<li class="next"><a href="javascript:next_history_trades();"><span></span></a></li>';
      $('#history_trades_page_navigation').html(NavigationHtml); 
```

和 html

```
<div class="pagination pagination-mini-r">
  <ul id='history_trades_page_navigation'>
  </ul>
</div> 
```

我怎样才能做到这一点？

# vb.net - 从 vb.net 中的另一种形式更新 datagridview

> ID：13397507
> 
> 赞同：1
> 
> 时间：2012-11-15T12:24:21.477
> 
> 标签：vb.net, winforms

我有一个特定形式的datagridview。在该表单中有一个添加和更新按钮，它将接受详细信息，当单击完成按钮时，我想更新网格视图。但似乎我无法做到这一点，因为我正在从另一个表单添加/更新详细信息。

第一个表单（绑定数据，进入更新/添加按钮表单）：

```
Private Sub bindStudentsData()
    Dim db As New Database()

    DataGridView1.DataSource = Nothing
    DataGridView1.DataSource = New BindingSource(db.getStudentList(), Nothing)

End Sub

Private Sub addBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles addBtn.Click
    Dim sf As New StudentForm()
    sf.Show()
End Sub

Private Sub updateBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles updateBtn.Click
    Dim sid As String = DataGridView1.SelectedRows(0).Cells("studentid").Value

    Dim sf As New StudentForm(sid)
    sf.Show()
End Sub 
```

*通过使用 .show() 之前的表单保持打开状态并打开另一个表单

然后在输入详细信息并单击完成第二个表格后：

```
Private Sub doneBtm_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles doneBtm.Click
    Dim db As New Database()
    If type Is "add" Then
        'go to add
        MsgBox(type)
    Else
        'go to update
        db.updateStudentDetails(sid, astudentnumberText.Text, afirstnameText.Text, 
                     _alastnameText.Text, amiddlenameText.Text, asectionText.Text)
        Me.Close()
    End If
End Sub 
```

单击第二个表单上的完成按钮后，我需要在第一个表单中重新绑定 datagridview。我怎么能那样做？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:39:40.940

最简单和更好的方法是简单地使用`ShowDialog()`而不是`Show()`. 它会阻止您当前的表单，直到您关闭新打开的表单。然后调用你的`bindStudentsData()`. 没有更多的变化

```
Private Sub updateBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles updateBtn.Click
    Dim sid As String = DataGridView1.SelectedRows(0).Cells("studentid").Value    
    Dim sf As New StudentForm(sid)
    sf.ShowDialog()
    bindStudentsData()
End Sub 
```

* * *

**第二种方法**（你想要的）。复杂，但如果您不愿意不惜一切代价使用 ShowDialog

公开您的`bindStudentsData()`表格并制作当前表格，`Owner`下一个表格

```
Private Sub updateBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles updateBtn.Click
    Dim sid As String = DataGridView1.SelectedRows(0).Cells("studentid").Value    
    Dim sf As New StudentForm(sid)
    sf.Owner = Me
    sf.Show()
    bindStudentsData();
End Sub 
```

现在您可以通过使用以第二种形式访问第一种形式`Owner`，因此您也可以调用第一种形式的方法。只需`bindStudentsData()`在关闭第二个表格之前致电

```
Private Sub doneBtm_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles doneBtm.Click
    Dim db As New Database()
    If type Is "add" Then
        'go to add
        MsgBox(type)
    Else
        'go to update
         db.updateStudentDetails(sid, astudentnumberText.Text, afirstnameText.Text, 
                 _alastnameText.Text, amiddlenameText.Text, asectionText.Text)
         Dim f1 As Form1 = TryCast(Me.Owner, Form1);
         // I have supposed that your first Form is Form1
         f1.bindStudentsData()
         Me.Close()
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:57:33.327

完成后，您可以将数据保存在 db 中，然后回调您要刷新的表单。并且绑定将使用其中的更新/新数据刷新...

从@kush 的评论中，如果您希望在工作完成后关闭第二个表单，您可以在 Response 中添加一个脚本标签来关闭页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T13:49:21.863

我知道问题发布已经有一段时间了，但我使用了另一种解决方案，有些人可能会觉得它很有用。

在 form1 中，我打开我的第二个表单：

```
Dim frm As New Form1()
frm.ShowDialog() 
```

然后，在第二种形式中，当我按下**OK 按钮**时，我写道：

```
DialogResult = Windows.Forms.DialogResult.OK
Me.Close() 
```

最后，在 form1 中，我在下面添加了这些行`frm.ShowDialog()`：

```
If frm.DialogResult = Windows.Forms.DialogResult.OK Then
    reaload_DTGV()
End If 
```

使用此方法，您可以**将 datagridview 的方法从 form1 保留为 Private**。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-02-09T11:12:13.027

这是我使用数据绑定源的方法：

在我的表单1中的按钮编辑中：

```
edit_product.Show()
edit_product.Item_numTextBox.Text = Item_numTextBox.Text
Me.Close() 
```

然后在我的form2中：

```
Private Sub Item_numTextBox_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Item_numTextBox.TextChanged
      InventoryBindingSource.Filter = "[item_num] like '%' + '" & Item_numTextBox.Text & "' + '%'"
End Sub 
```

# php - 会话超时时间 - 由服务器设置？

> ID：13397511
> 
> 赞同：2
> 
> 时间：2012-11-15T12:24:49.040
> 
> 标签：php, session, zen-cart

我正在玩 zen-cart，我想拥有它，以便客户会话不会在 24 分钟后过期，这似乎是默认设置。

在谷歌搜索和搜索 zen-cart 网站后，似乎没有人对此有答案（关于如何更改管理员注销会话时间的大量答案 - 我希望使用实际网站的人有更长的会话时间）。我想这可能是一个安全问题，但我现在已经调查过了，但无法弄清楚代码：

```
if (IS_ADMIN_FLAG === true) {
    if (!$SESS_LIFE = (SESSION_TIMEOUT_ADMIN > 900 ? 900 : SESSION_TIMEOUT_ADMIN)) {
      $SESS_LIFE = (SESSION_TIMEOUT_ADMIN > 900 ? 900 : SESSION_TIMEOUT_ADMIN);
    }
} else {
    if (!$SESS_LIFE = get_cfg_var('session.gc_maxlifetime')) {
      $SESS_LIFE = 1440;
    }
} 
```

我尝试将 1440 更改为 86400（一天），但这似乎不起作用。我不完全确定这条线

```
if (!$SESS_LIFE = get_cfg_var('session.gc_maxlifetime')) { 
```

这样做！只有一个=之后。我想这是问题所在？任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:27:49.143

```
if (!$SESS_LIFE = get_cfg_var('session.gc_maxlifetime')) {
    $SESS_LIFE = 1440;
} 
```

这从运行时配置中获取 的值 **[`session.gc_maxlifetime`](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)**，并将其设置为`$SESS_LIFE`.

**如果 的值`$SESS_LIFE`为零**，则执行`$SESS_LIFE = 1440;`

* * *

在内部更改此超时：`php.ini`或使用

```
ini_set('session.gc_maxlifetime', 86400); 
```

或者在您的 .htaccess 中，您可以添加以下行：

```
php_value session.gc_maxlifetime 86400 
```

**参考：[`get_cfg_var`](http://php.net/manual/en/function.get-cfg-var.php)** ,

# c - glibC 和 bioniC 的区别

> ID：13397512
> 
> 赞同：2
> 
> 时间：2012-11-15T12:24:49.820
> 
> 标签：c, optimization, glibc, built-in, bionic

嗨，我在优化方面遇到了一些问题。
我尝试使用内置函数编译 gcc 测试之一：

```
#include <stdio.h>

#ifdef HAVE_C99_RUNTIME
double test1 (double x)
{
  return __builtin_pow (x, 1/3);
}

double test2 (double x)
{
  return __builtin_pow (x, 4./3.);
}

double test3a (double x)
{
  return __builtin_pow (x, 5./3.);
}

double test3b (double x)
{
  return __builtin_pow (x, -5./3.);
}

double test4 (double x)
{
  return __builtin_pow (x, 7./3.);
}
#endif 
```

我尝试用接下来的 2 种方式编译它：
**1 种方式：**
`gcc -mglibc -O -ffast-math -std=c99 -fno-ident -S -o builtins-58.s`
并且在输出汇编文件中全部`call pow`更改为`call cbrt`- 它的预期

**2方式：**
`gcc -mbionic -O -ffast-math -std=c99 -fno-ident -S -o builtins-58.s`
使用`-mbionic`而不是`-mglibc`我得到输出`call pow`

有谁知道函数是如何工作`optmimization`的`builtin``Bionic`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:27:36.557

这是因为在 gcc 4.7 中我们`TARGET_C99_FUNCTIONS`在文件中进行了特殊检查（检查）`builins.def`，其中定义了所有内置函数。

在另一个文件中，我们有： `define TARGET_C99_FUNCTIONS (OPTION_GLIBC)`

这些检查检查库，如果没有，`glibc`则我们没有`cbrt`功能。所以我们不能转型`pow`，`cbrt`这是根本原因。

# ios - 如何知道iOS相机是否对焦不准不调整

> ID：13397514
> 
> 赞同：4
> 
> 时间：2012-11-15T12:25:01.837
> 
> 标签：ios, camera, avfoundation, avcapturesession

我们正在制作一个需要显示以下状态之一的应用程序：

*   专注，
*   聚焦（调整），
*   不专注。

似乎当您移动相机时，相机不会尝试调整，直到您停止移动。那么如何识别这种状态呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:46:50.393

您可以使用 AVCaptureDevice 的adjustingFocus 属性来完成您提到的内容。更多信息可以在[这里](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/occ/instp/AVCaptureDevice/adjustingFocus)找到。

# spring - 使用 Codehaus 和 EnversHibernateToolTask 构建时自动装配的 Bean 类型不正确

> ID：13397519
> 
> 赞同：0
> 
> 时间：2012-11-15T12:25:28.420
> 
> 标签：spring, hibernate, maven, dependency-injection

仅当我使用我的 QA Profile 构建时才会出现此问题，例如 mvn clean install -Pqa

```
Caused by: org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'reportingService' must be of type [com.testProjects.project.backoffice.service.BackofficeReportingService], but was actually of type [$Proxy78]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:360)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:442)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:416)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:549)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:303)
    ... 54 more
Tests run: 563, Failures: 1, Errors: 0, Skipped: 562, Time elapsed: 19.656 sec <<< FAILURE! 
```

我的POM的相关位：

```
<profile>
    <id>qa</id>
    <properties>
        <tomcat.url>http://etc:8081/manager/text</tomcat.url>
        <war.name>project-backoffice</war.name>
    </properties>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <version>1.1.1</version>
                <configuration>
                    <deployer>
                        <deployables>
                            <deployable>
                                <properties>
                                    <context>${war.name}</context>
                                </properties>
                            </deployable>
                        </deployables>
                    </deployer>
                    <wait>true</wait>
                    <container>
                        <containerId>tomcat7x</containerId>
                        <type>remote</type>
                    </container>
                    <configuration>
                        <type>runtime</type>
                        <properties>
                            <cargo.tomcat.manager.url>${tomcat.url}</cargo.tomcat.manager.url>
                            <cargo.remote.username>admin</cargo.remote.username>
                            <cargo.remote.password>admin</cargo.remote.password>
                        </properties>
                    </configuration>
                </configuration>
                <executions>
                    <execution>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>redeploy</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</profile> 
```

和构建部分：

```
<artifactId>maven-antrun-plugin </artifactId>
    <version>1.6</version>
    <executions>
        <execution>
            <phase>install</phase>
            <configuration>
                <tasks>
                    <property name="compile_classpath" refid="maven.compile.classpath" />
                    <taskdef name="hibernatetool" classname="org.hibernate.tool.ant.EnversHibernateToolTask" classpath="${compile_classpath}" />
                    <hibernatetool destdir="${project.build.directory}">
                        <annotationconfiguration configurationfile="${project.build.outputDirectory}/backoffice.hibernate.cfg.xml" propertyfile="${project.build.directory}/test-classes/hibernatetools.properties" />
                        <hbm2ddl create="true" drop="true" export="false" format="true" outputfilename="project-schema.ddl" />
                    </hibernatetool>
                    <hibernatetool destdir="${project.build.directory}">
                        <annotationconfiguration configurationfile="${project.build.outputDirectory}/backoffice.hibernate.docs.cfg.xml" propertyfile="${project.build.directory}/test-classes/hibernatetools.properties" />
                        <hbm2ddl create="true" drop="true" export="false" format="true" outputfilename="document-schema.ddl" />
                    </hibernatetool>
                </tasks>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions> 
```

有问题的控制器：

```
@Controller
@RequestMapping("/reporting/")
public class ReportingController {

    private final static Logger logger = LoggerFactory.getLogger(ReportingController.class);

    @Resource
    private BackofficeReportingService reportingService; 
```

有问题的服务：

```
@Transactional(propagation=Propagation.NEVER)
@Service
public class BackofficeReportingService { 
```

尝试在上下文中添加定义，还尝试设置 CGLIB 代理，但没有效果。

```
<bean id="reportingService" class="com.project.backoffice.service.BackofficeReportingService"/> 
```

任何帮助将不胜感激，它使我的构建“不稳定”，我很想知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:55:04.153

这要归功于 Tomasz Nurkiewicz。为 reportingService 创建一个接口解决了这个问题。

我不清楚为什么这个问题开始了，为什么几个月来没有变化，或者为什么大多数其他服务在没有接口的情况下都可以正常注入，但我非常感谢 Tomasz！Huzzah 是绿色球体而不是黄色球体！

# android - 将文本从我的 EditText 字段发送到我的 WCF

> ID：13397520
> 
> 赞同：2
> 
> 时间：2012-11-15T12:25:42.643
> 
> 标签：android, wcf, android-layout, android-edittext

我正在尝试将文本从 editText 发送到我的 WCF。大多数时候它似乎工作得很好，但是当我写例如：“你好”然后在键盘上按回车键并继续写一些东西时，我得到一个错误：IllegalArgumentException：索引 156 处的非法字符。当我按下在键盘上输入。（当我不使用回车按钮时，整个过程都有效）

我仍然希望我的 EditText 是多行的。

当用户键入包含 enterclick 的内容时，我能做些什么才能将我的文本发送到我的 wcf？

我可以删除回车按钮并将其替换为“下一步”和“完成”吗？

我试图用

```
invoiceText = invoiceText.replace("/n", "//n"); 
```

但没有成功。

我的编辑文本：

```
 <EditText
    android:id="@+id/descriptionEditText"
    android:layout_width="wrap_content"
    android:layout_height="340dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/InputTextTitle"
    android:layout_marginTop="35dp"
    android:inputType="textMultiLine"
    android:gravity="top|left" >
</EditText> 
```

这就是我连接/写入 WCF 的方式：（这是 _phoneDAL 中的 RegisterTime）

```
 DefaultHttpClient httpClient = new DefaultHttpClient();

        HttpGet httpGet = new HttpGet(URL + "/RegisterTime?userName=" + userName +  "&customerId=" + customerID + "&timeInvoiced=" + timeInvoice + "&timeWorked=" + timeWork + "&date=" + date + "&invoiceText=" + invoiceText);

        HttpResponse httpResponse = httpClient.execute(httpGet);

        HttpEntity httpEntity = httpResponse.getEntity();

        InputStream stream = httpEntity.getContent();

        String result = converter(stream);

        Log.v("Result registerTime", result);

        if(result != "-1" && result != "0"){
            return true;
        } 
```

* * *

```
_phoneDAL.registerTime(id, timeDiffWorkTime, Integer.parseInt(_userName), selectedCustomer, timeDiffInvoiced, selectedDate, description); 
```

# c++ - 如何在方法中返回这个

> ID：13397521
> 
> 赞同：1
> 
> 时间：2012-11-15T12:25:59.303
> 
> 标签：c++

我有一个类 Image，我需要返回这个类的实例。简单的方法是什么？我是一名 java 程序员，“return this”给了我一个错误。

```
#include <string>
#include "AEEImage.h"

using namespace std;

IImage *image;
Image *img;

Image::Image()
{
    image = new IImage();
}

Image::~Image()
{
    delete image;
    image = NULL;
}

 Image *createImage(string str)
{
    return /*return instance of this class*/;
} 
```

这是图像的定义：

```
#pragma once

#include <string>
using namespace std;

class Image
{
public:
    Image();
    ~Image();
    Image createImage(string str);
    Image createImage(const Image *img, int x, int y, int with, int height, int transform);
    Image createImage(istream is);
}; 
```

我必须在 C++ 中编写一个类似于 JAVA ME 中的 Image 类的类（[链接](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html)）：-这些相同的类名称（Image）-这些相同的方法名称、参数类型和返回类型

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T12:32:39.053

`this`仅在非静态成员函数中可用；它们被一个对象调用，并`this`指向该对象。`createImage()`是非成员函数；它不是在对象上调用的，因此没有`this`指针。

据推测，它应该创建一个图像并返回一个指向该图像的指针。也许你想要：

```
return new Image; 
```

请记住，`delete`一旦不再需要对象，调用者就要对它负责——C++ 中没有垃圾收集。[学习RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)以了解如何在 C++ 中自动管理动态对象是明智的；特别是，智能指针在这里可以解决问题：

```
std::unique_ptr<Image> createImage() {
    return std::unique_ptr<Image>(new Image);
} 
```

一般来说，你应该忘记你在 Java 中学到的任何习语，因为那是一种非常不同的语言。有很多关于 C++[的好书。](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

您还应该避免使用全局变量，尤其是对于逻辑上属于类实例的事物。它看起来很像`IImage *image;`应该是一个成员`Image`而不是一个全局变量（尽管它可能已经是；我不知道，因为你还没有发布 的​​定义`Image`）。

更新：您现在说它`createImage`是一个成员，并且该类应该模拟您链接到的 Java 类。在这种情况下，它应该是`static`。对于一个类成员，这与它在 Java 中的含义大致相同：它与类本身相关联，而不是与任何特定对象相关联。然后定义需要限定名称`Image::`以表明它是一个成员，而不是在命名空间中声明的不同函数。所以你想要这样的东西：

```
class Image {
public:
    // some members
    static Image * createImage(string); // Add "static" to match the Java class.
                                        // Return a pointer (or a smart pointer)
};

Image * Image::createImage(string) {    // Add "Image::" to indicate it's a member
    return new Image;
}

// Usage example:
Image * image = Image::createImage("whatever");  // "::" rather than Java's "." 
```

请注意，返回`Image`而不是`Image *`（或智能指针）将返回对象的*副本*，`Image`这（可能）不是您想要的；这是与 Java 的另一大区别，Java 中的类对象总是通过引用 (*) 传递。指针是 C++ 最接近 Java 对象引用的东西。

(*) 学究们注意：“通过引用传递”是指对象本身没有被克隆；对象引用是按值传递的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T12:27:46.927

当它需要成为成员函数时，您已将该函数声明为自由函数。只有成员函数有`this`指针。

```
class image {
   //...
   Image *createImage(string str)
   //...
};

Image *Image::createImage(string str)
{
    return this;
} 
```

虽然如果它是一个创建函数，你的逻辑可能是错误的，你不应该使用`this`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T13:02:50.540

首先，createImage(..) 必须是 Image 类的成员函数，如前所述。二、返回当前对象有3种方式，按指针、按引用、按值：

```
class Image
{
    public:

    //by Pointer
    Image* PointerToImage()
    {
        return this;
    }
    const Image* ConstPointerToImage() const
    {
        return this;
    }
    //by Reference
    Image& ReferenceToImage()
    {
        return *this;
    }
    const Image& ReferenceToImage() const
    {
        return *this;
    }
    //by Value
    Image CopyOfImage() const
    {
        reuturn *this;
    }
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T12:27:38.387

您不需要返回实例，调用 createImage 时已经拥有它？

# sql-server-2008-r2 - 如何使用驱动程序 org.olap4j.driver.xmla.XmlaOlap4jDriver 在不使用蒙德里安模式的情况下将 pentaho 连接到 SQL Server 2008 R2 分析服务

> ID：13397526
> 
> 赞同：1
> 
> 时间：2012-11-15T12:26:18.807
> 
> 标签：sql-server-2008-r2, ssas, pentaho, ssas-2008-r2

如何在不使用 Mondrian 架构的情况下使用 Driver 连接到 SQL Server 2008 R2 分析服务`org.olap4j.driver.xmla.XmlaOlap4jDriver`？

我可以连接 SSAS 并使用 Spoon >> Transformation 中的预览选项获取数据，我正在关注[这篇文章](http://blog.datamensional.com/2012/03/using-xmla-in-pentaho-reporting/)。

成功完成这两个步骤

1.  将 MS OLAP XMLA 服务器设置为 SOAP Web 服务
2.  将 Microsoft OLAP 连接到 Pentaho 数据集成 (KETTLE)

现在尝试第三步

1.  使用 Pentaho Report Designer (PRD) 从 Microsoft OLAP 报告

但我看不到下面的列名`Data Sets > Pentaho Data Integration > MS OLAP`

# twig - 向 Twig 模板添加 gettext 注释？

> ID：13397530
> 
> 赞同：1
> 
> 时间：2012-11-15T12:26:33.947
> 
> 标签：twig

查看[文档](http://twig.sensiolabs.org/doc/extensions/i18n.html)我找不到任何提及它，所以我会问：Twig i18n 扩展是否支持嵌入式注释，可以通过 gettext 提取？换句话说，是否有等效的 Twig 语法：

```
/// TRANSLATORS: Please leave %s as it is, because it is needed by the program.
/// Thank you for contributing to this project.
printf(_("My name is %s."), $myName); 
```

这将是可提取的：

```
#. TRANSLATORS: Please leave %s as it is, because it is needed by the program.
#. Thank you for contributing to this project.
msgid "My name is %s."
msgstr "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:21:06.037

由于似乎没有任何功能，因此我为它编写了一个扩展：[Twig_Extension_Gettext](https://github.com/deceze/Twig-extensions/blob/master/doc/gettext.rst)。它添加了许多缺少的 gettext 功能，包括支持可提取注释的本机模板解析器。

# c - 调用 glBindBuffer 后具有奇怪顶点位置的简单 openGL 应用程序

> ID：13397531
> 
> 赞同：0
> 
> 时间：2012-11-15T12:26:41.217
> 
> 标签：c, opengl, glew, glfw

我写这个是为了测试如何用opengl缓冲区绘制，这里是初始化函数：

```
#include "GL/glew.h"
#include "GL/glfw.h"

    int main ( int argc, char* argv[] )
    {
        //init glfw
        glfwInit();

        glfwOpenWindow ( 1024, 768, 8, 8, 8, 8, 24, 0, GLFW_WINDOW );

        //init extension
        glewInit();

        //i
        glGenBuffers ( 1, &buffID );
        //init test buffer
        for ( int i = 0 ; i < 15; i ++ ) {
            testBuffer[i][0] += 1 + i * i;
            testBuffer[i][1] += 1 + i + i * i;
            testBuffer[i][2] = 0;
        }

        do {
            render_loop();
        } while ( glfwGetWindowParam ( GLFW_OPENED ) );

        glfwTerminate();
    } 
```

这是 render_loop 函数：

```
GLuint buffID;
static GLfloat testBuffer[15][3];

void render_loop()
{
    glClearColor ( .7, .1, .1, 1.0f );
    glClear ( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
    glViewport ( 0, 0, 1024, 768 );
    glMatrixMode ( GL_PROJECTION );

    glLoadIdentity();
    glOrtho ( 0, 1024, 768, 0, 0, -1 );
    glMatrixMode ( GL_MODELVIEW );
    glLoadIdentity();

    //draw a test point
    glPointSize ( 10 );
    glBegin ( GL_POINTS );
    glColor4f ( 1, 1, 1, 1 );
    glVertex3f ( 512, 384, 0 );
    glEnd();

     glBindBuffer(GL_ARRAY_BUFFER,buffID);
     glBufferData(GL_ARRAY_BUFFER,3 * sizeof(GLfloat) * 15, testBuffer,GL_DYNAMIC_DRAW);

    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3,GL_FLOAT,0,testBuffer);
    glDrawArrays(GL_POINTS,0,15);
    glBindBuffer(GL_ARRAY_BUFFER,0);
    glDisableClientState(GL_VERTEX_ARRAY);

    glfwSwapBuffers();

} 
```

所有 15 个顶点都位于窗口左上角的 0,0 位置，我可以在那里看到白点，从循环中删除这 3 行后：

```
glBindBuffer(GL_ARRAY_BUFFER,buffID);
glBufferData(GL_ARRAY_BUFFER,sizeof(GLfloat) * 15, testBuffer,GL_DYNAMIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER,0); 
```

一切都按我的预期进行，我有几个问题：

1.什么改变了顶点缓冲区的位置？

2.顺便说一句，使用这些调用可以获得多少性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:32:34.677

必须这样称呼：

`glBindBuffer(GL_ARRAY_BUFFER,0);`

功能后`glBufferData`。

我也发现我需要改变这个：

```
//added this line before glVertexPointer:
glBindBuffer(GL_ARRAY_BUFFER,buffID);
//glVertexPointer(3,GL_FLOAT,0,testBuffer); change last param to 0:
glVertexPointer(3,GL_FLOAT,0,0); 
```

添加后，一切似乎都运行良好。

# jquery - scrollTop 在 Firefox 和 IE 上不起作用？

> ID：13397533
> 
> 赞同：13
> 
> 时间：2012-11-15T12:26:49.037
> 
> 标签：jquery, firefox, google-chrome, cross-browser, scroll

我有下面的代码在 chrome 中运行良好。

但是，它不适用于 Firefox 和 IE。没发生什么事。

```
 $("body").animate({scrollTop:$(this).offset().top},800); 
```

那么请问我应该为firefox和IE写什么？

谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-15T12:29:09.913

尝试使用

```
$('body,html').animate({scrollTop:$(this).offset().top},800); 
```

代替

```
$("body").animate({scrollTop:$(this).offset().top},800); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:01:15.457

试试这个。

```
document.getElementsByTagName('body')[0].clientHeight 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:45:37.793

```
$(body).scrollTop($(this)[0].scrollHeight); 
```

> 您使用此代码，我认为它可以在 IE 和 Firefox 中正常工作

# php - CKEDITOR 和 PHP 和 MYSQL

> ID：13397540
> 
> 赞同：1
> 
> 时间：2012-11-15T12:27:11.670
> 
> 标签：php, mysql, ckeditor

我在基于 Web 的游戏中为我的所有 textarea 使用 ckeditor，当我输入 textarea 并单击提交按钮时，它会保存到我的数据库中，但数据库还包括标签`<p>`和`<b>`.

我怎样才能删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:41:03.480

ck-editor 用于保存 HTML，因此将其保存在您的数据库中。如果您只想保存文本，则无需使用 ck-editor，因为它用于格式化文本。但是，如果您想使用它，那么正确的方法是在保存到数据库之前通过函数 [http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php) 并在检索时通过函数[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)然后将其放入 ckeditor 然后您可以对其进行编辑或放置在页面中显示它的位置。

如果你想去除标签然后使用这个函数 php.net/manual/en/function.strip-tags.php 但在这种情况下你会失去文本格式。

# sql - DBMS_MVIEW.REFRESH 弄乱了顺序

> ID：13397541
> 
> 赞同：0
> 
> 时间：2012-11-15T12:27:20.437
> 
> 标签：sql, oracle

当我创建一个物化视图时，我在查询中使用了一个`order by`蚂蚁，它工作正常。但是当我用一切刷新MV时，`DBMS_MVIEW.REFRESH(('T_SEARCH', 'C')`一切都变得一团糟。那么有没有办法避免这个问题呢？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:41:06.773

如果您的意思是`SELECT * FROM T_SEARCH`不提供连贯的排序顺序，那是我所知道的所有 SQL 方言中的预期行为。不是物理表的事实`T_SEARCH`不会触发任何异常：您需要在查询中提供一个`ORDER BY`子句。`SELECT`

# ios - 在 iPhone 中将 UITextView 转换为 Pdf 文件？

> ID：13397544
> 
> 赞同：0
> 
> 时间：2012-11-15T12:27:35.837
> 
> 标签：ios, pdf, uitextview

我在 iPhone 应用程序中工作，使用 UITextView 从用户那里获取一些内容，然后我尝试从该 UITextView 转换 pdf 文件并存储在本地目录中，但我不知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:40:51.377

这是代码

```
- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
    UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

    NSInteger currentPage = 0;
    BOOL done = NO;
    do
    {
    // Mark the beginning of a new page.
        UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

    // Draw a page number at the bottom of each page.
    currentPage++;
    [self drawPageNumber:currentPage];

    //Draw a border for each page.
    [self drawBorder];

    //Draw text fo our header.
    [self drawHeader];

    //Draw a line below the header.
    [self drawLine];

    //Draw some text for the page.
    [self drawText];

    //Draw an image
    [self drawImage];
    done = YES;
}
   while (!done);

// Close the PDF context and write the contents out.
UIGraphicsEndPDFContext();
}

- (void) drawText
{
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

    NSString *textToDraw = yourtextview.text // use your textfield or textview here

    UIFont *font = [UIFont systemFontOfSize:14.0];

    CGSize stringSize = [textToDraw sizeWithFont:font
                           constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-    2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset)
                               lineBreakMode:UILineBreakModeWordWrap];

    CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset + 50.0, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

[textToDraw drawInRect:renderingRect
              withFont:font
         lineBreakMode:UILineBreakModeWordWrap
             alignment:UITextAlignmentLeft];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:31:56.170

您可以使用 UIKit 创建 PDF 文件。

[使用 UIKit 创建 PDF](https://developer.apple.com/library/ios/documentation/2ddrawing/conceptual/drawingprintingios/GeneratingPDF/GeneratingPDF.html)

# perl - 如何在我的应用程序中动态更改 Maketext 词典？

> ID：13397561
> 
> 赞同：3
> 
> 时间：2012-11-15T12:29:08.040
> 
> 标签：perl, internationalization, catalyst

[我通过Locale::Maketext](http://search.cpan.org/perldoc?Locale%3a%3aMaketext)（或更具体地说，使用[CatalystX::I18N::Model::Maketext](http://search.cpan.org/perldoc?CatalystX%3a%3aI18N%3a%3aModel%3a%3aMaketext)）使我的网站成为多语言。

我的 maketext 类在编译时通过从数据库加载词典将词典加载到包 var %Lexicon 中。

我想在我的应用程序中为词典添加一个管理界面，但我想不出一种重新加载词典的方法。我向每个语言环境类添加了一个方法来刷新 %Lexicon 哈希，这在 dev 中运行良好，但是当在分叉服务器（[Starman](http://search.cpan.org/perldoc?Starman)）上运行时，它当然只会在该服务器进程中重新加载包 var。

然后我想也许我可以把词典放在一个缓存中，在需要时它可能会过期。但是，Locale::Maketext 中的 %Lexicon 哈希是在运行时开始时填充的，我不知道如何在每次请求时从缓存中填充它。

我最新的想法是覆盖 Locale::Maketext 的一部分，但我正在寻找任何聪明的想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T21:44:59.103

如果您愿意对某些请求造成轻微的性能影响，您可以在每次调用时检查文件的 md5sum `maketext()`。

例如：

```
package MyMakeText;

use strict;
use warnings;

use Digest::MD5;

my @PO_FILES = ('exaple.po');
my %FILE_TO_DIGEST;

my $LOCALIZER;

sub maketext {

    if (files_have_changed() || !$LOCALIZER) {
        $LOCALIZER = get_handle();
    }

    return $LOCALIZER->maketext(@_);
}

sub files_have_changed {
    my $files_have_changed = 0;

    for my $po_file (@PO_FILES) {
        open(my $fh, '<', $po_file) or die $!;
        my $md5sum = Digest::MD5->new->addfile($fh)->hexdigest;
        close($fh);

        if (!exists $FILE_TO_DIGEST{$po_file} || $FILE_TO_DIGEST{$po_file} ne $md5sum) {
            $FILE_TO_DIGEST{$po_file} = $md5sum;
            $files_have_changed = 1;
        }
    }

    return $files_have_changed;
} 
```

请注意，这部分是伪代码，因为我不知道您当前是如何构造 Locale::MakeText 对象的，所以我留给您填写`get_handle()`. 但我认为您可以看到如何包装您的调用以`maketext()`包括检查是否有任何文件更改了其内容。

`.po`文件通常非常小，最近更改的文件通常会在 Linux 磁盘缓存中，所以我希望这会非常快，尽管所有明显的磁盘读取。

# algorithm - 从中缀更改为后缀有什么好处？

> ID：13397563
> 
> 赞同：2
> 
> 时间：2012-11-15T12:29:16.170
> 
> 标签：algorithm, infix-notation, postfix-notation

我今天看书了。它介绍了从中缀到后缀的算法。有什么好处？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:44:23.767

一方面，您可以在堆栈的帮助下从左到右一次扫描中轻松地评估后缀表达式，这与评估中缀表达式不同。其次，后缀表达式中不需要括号和优先规则等概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:47:40.250

我认为中缀对于人类来说真的很容易理解。Postfix是机器处理的好方法。请选择：[http ://www.cs.man.ac.uk/~pjj/cs2121/fix.html](http://www.cs.man.ac.uk/~pjj/cs2121/fix.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:53:01.820

一个高级示例，也说明了中缀对前缀/后缀的便利性：

[编写自己的正则表达式解析器](http://www.codeguru.com/cpp/cpp/cpp_mfc/parsing/article.php/c4093/Write-Your-Own-Regular-Expression-Parser.htm) ：在构建正则表达式的状态机之前，带括号的正则表达式输入，即 (a+b)*(c+d) 被转换为前缀/后缀

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-19T21:21:45.033

中缀和后缀概念用于编译器设计。因为中缀在数学中很常见，所以人类更容易阅读，因此在大多数计算机语言中都使用。Postfix 对计算机来说更容易处理，但对人类来说并不那么直观。

# c - 仅使用逻辑运算符确定数字的奇偶性

> ID：13397565
> 
> 赞同：2
> 
> 时间：2012-11-15T12:29:34.177
> 
> 标签：c, logical-operators

当我尝试仅使用逻辑运算符（||，&&）来确定一个数字是否是偶数/奇数时，我有点困惑。

我习惯：

```
if (x%2)
   printf("Number is even");
else
   printf("Number is not even"); 
```

是否有任何算法可以确定数字的奇偶性？如果有，你能给我一些文件吗？

最好的问候， 杜鲁曼·埃迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:50:39.837

`&&`仅使用逻辑运算符和是不可能的`||`。

在任何只涉及`&&`and的表达式中`||`，您可以将值`0x01`（奇数）替换为（`0x10`偶数），结果将是相同的，因为就逻辑运算符而言，这两个值在逻辑上都是“真”。因此，该表达式不区分两者。

如果你需要正式证明它，你可以通过强归纳来做到这一点，即任何只涉及这两个运算符并且总共包含`n`运算符的表达式必然等价于`(A) && (B)`or形式的表达式`(A) || (B)`，其中`A`和`B`是涉及的表达式只有这两个运算符并且总共包含少于`n`运算符。证明基本情况`n == 1`很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:33:42.343

对于整数，您可以使用 and 运算符`x & 1`来测试位 0 的值，即 0 表示偶数，1 表示奇数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T13:46:45.193

可以先换行吗？如果仅使用 1 位，则可以使用逻辑运算符完成相同的“位”逻辑，例如：

```
int num = 0x14; // 0000 0000 0001 0100
unsigned short shift_num = num << 15; // 0000 0000 0000 0000

if(shift_num && 1)
    printf("it's odd\n");
else
    printf("it's even\n"); 
```

因此，任何非 0`&& 1`都给您 1，在这种情况下，我们将除最低位之外的所有位都移开，如果它是偶数（如上），它会给您留下 0 并且`0 && 1`是假的，所以`"it's even"`会打印出来。如果我们使用奇数：

```
int num = 0x15; // 0000 0000 0001 0101
unsigned short shift_num = num << 15; // 1000 0000 0000 0000 
```

现在有一个非 0 数字和 1 所以我们会得到`"it's odd"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:32:24.647

假设您的意思是*按位运算*符`&`和`|`（因为它们的逻辑短路对应物没有解决方案）：

```
if(x&1)
    puts("odd");
else
    puts("even"); 
```

`x&1`（并且任何体面的编译器都会在看到时自动发出代码`x%2`）

这是有效的，因为`&1`提取了 的最低有效位`x`，即`1`奇数和`0`偶数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T12:41:29.437

合乎逻辑`||`且`&&` *总是*产生`true`或`false`值的意思是`1`or `0`。

我认为您对此感到困惑，`||` `&&`后来`&` `|`的运算符是按位运算符，使用按位可以找到偶数和奇数

```
if(n & 1)
  printf("odd");
else
  printf("even"); 
```

# vb.net - 保存的图表图像模糊/嘈杂

> ID：13397566
> 
> 赞同：0
> 
> 时间：2012-11-15T12:29:39.047
> 
> 标签：vb.net, visual-studio-2010, image, charts, save

我有两个希望导出为 .png 图像的 MS 图表。对于这两种方法，我都使用该`Chart.SaveImage()`方法，但结果不同。一个是模糊/嘈杂的，另一个看起来很干净。

这是**模糊图形**（后来称为 ChartBHKW）。请注意，只有图表外的文字看起来模糊。图例显示正确。

![模糊图形](../Images/6959f8eb375f0d965bc037f6739ee705.png)

这是**正常的图形**，按原样保存（后来称为 ChartAmortisation）：

![普通图形](../Images/1f5006b57956324c2af765e8edf817ae.png)

为了保持图像大小和纵横比，两个图表经过以下保存过程：取消停靠、调整大小、保存和再次停靠。代码如下。

```
With Main.ChartBHKW
    'Resize and save
    .Dock = DockStyle.None
    .Size = PrintSize
    .SaveImage(JDLImagePath, ChartImageFormat.Png)

    'Reset
    .Dock = DockStyle.Fill
End With

With Main.ChartAmortisation
    'Resize and save
    .Dock = DockStyle.None
    .Size = PrintSize
    .SaveImage(AmortisationImagePath, ChartImageFormat.Png)

    'Reset
    .Dock = DockStyle.Fill
End With 
```

我尝试了各种不同的尺寸和格式。大小没有影响。但有趣的是，看看保存为 .jpg 或 .bmp 时会发生什么。下面的例子。

![模糊图形为jpg](../Images/c8e09404ac87b745dd45a2ebe548a3f2.png)

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:41:30.390

我坚信这与**背景**有关，我猜是`transparent`。`white`改为使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T08:28:44.500

套装：`chart.AntiAliasing=AntiAliasingStyles.Graphics;`
详见[本页](https://social.msdn.microsoft.com/Forums/en-US/64c7d890-c98b-4392-9ec9-1b4af3e24300/labels-bold-when-background-transparent?forum=MSWinWebChart)。

# javascript - html表格分页的最佳插件

> ID：13397568
> 
> 赞同：-3
> 
> 时间：2012-11-15T12:29:44.787
> 
> 标签：javascript, jquery, jquery-ui

有很多插件，但有没有好的插件？你在你的项目中使用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:33:49.837

我将数据表用于[动态](http://datatables.net)加载的表，它对我有用。

[http://datatables.net](http://datatables.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:31:23.513

我在我的项目中使用它，它真的很棒。

[http://flexigrid.info/](http://flexigrid.info/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:32:28.033

目前正在处理 2 个项目，在另一个项目中编写了我自己的项目，并在另一个项目中使用[了](http://datatables.net/)数据表。

# c++ - 需要精确的线程睡眠。最大 1ms 错误

> ID：13397571
> 
> 赞同：21
> 
> 时间：2012-11-15T12:30:05.207
> 
> 标签：c++, multithreading, winapi, loops, sleep

我有运行循环的线程。我需要该循环每 5 毫秒运行一次（1 毫秒错误）。我知道 Sleep() 函数并不精确。

你有什么建议吗？

更新。我不能这样做。在循环结束时，我需要某种睡眠。我也不想加载 100% 的 CPU。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-01-25T22:10:30.153

我一直在寻找适合实时应用的轻量级跨平台睡眠功能（即高分辨率/高精度和可靠性）。以下是我的发现：

**调度基础**

放弃 CPU 然后将其取回是*昂贵的*。根据[这篇文章](http://www.tldp.org/HOWTO/IO-Port-Programming-4.html)，调度程序延迟在 Linux 上可能在 10-30 毫秒之间。因此，如果您需要以低于 10 毫秒的精度进行睡眠，那么您需要使用特殊的操作系统特定 API。通常的 C++11 std::this_thread::sleep_for 不是高分辨率睡眠。例如，在我的机器上，快速测试表明，当我要求它只休眠 1ms 时，它通常会休眠至少 3ms。

**Linux**

最流行的解决方案似乎是 nanosleep() API。但是，如果您想要 < 2ms 的高分辨率睡眠，则还需要使用 sched_setscheduler 调用来设置线程/进程以进行实时调度。如果您不这样做，则 nanosleep() 就像过时的睡眠一样，其分辨率约为 10 毫秒。另一种可能性是使用[警报](https://www.softprayog.in/tutorials/alarm-sleep-and-high-resolution-timers)。

**视窗**

这里的解决方案是按照其他人的建议使用多媒体时间。如果你想在 Windows 上模拟 Linux 的 nanosleep()，下面是方法（[原始参考](https://gist.github.com/Youka/4153f12cf2e17a77314c)）。同样，请注意，如果您在循环中调用 sleep()，则不需要一遍又一遍地执行 CreateWaitableTimer()。

```
#include <windows.h>    /* WinAPI */

/* Windows sleep in 100ns units */
BOOLEAN nanosleep(LONGLONG ns){
    /* Declarations */
    HANDLE timer;   /* Timer handle */
    LARGE_INTEGER li;   /* Time defintion */
    /* Create timer */
    if(!(timer = CreateWaitableTimer(NULL, TRUE, NULL)))
        return FALSE;
    /* Set timer properties */
    li.QuadPart = -ns;
    if(!SetWaitableTimer(timer, &li, 0, NULL, NULL, FALSE)){
        CloseHandle(timer);
        return FALSE;
    }
    /* Start & wait for timer */
    WaitForSingleObject(timer, INFINITE);
    /* Clean resources */
    CloseHandle(timer);
    /* Slept without problems */
    return TRUE;
} 
```

**跨平台代码**

这是为 Linux、Windows 和 Apple 平台实现睡眠的[time_util.cc 。](https://github.com/aprilyxx/common/blob/master/time_util.cc)但是请注意，它没有像我上面提到的那样使用 sched_setscheduler 设置实时模式，所以如果你想使用 <2ms 那么这是你需要额外做的事情。您可以进行的另一项改进是避免在某个循环中调用 sleep 时一遍又一遍地调用 Windows 版本的 CreateWaitableTimer。有关如何执行此操作，请参见[此处的示例](https://github.com/wormsparty/beautiful-absurd-subtle/blob/master/code/os/src/sleep.cpp)。

```
#include "time_util.h"

#ifdef _WIN32
#  define WIN32_LEAN_AND_MEAN
#  include <windows.h>

#else
#  include <time.h>
#  include <errno.h>

#  ifdef __APPLE__
#    include <mach/clock.h>
#    include <mach/mach.h>
#  endif
#endif // _WIN32

/**********************************=> unix ************************************/
#ifndef _WIN32
void SleepInMs(uint32 ms) {
    struct timespec ts;
    ts.tv_sec = ms / 1000;
    ts.tv_nsec = ms % 1000 * 1000000;

    while (nanosleep(&ts, &ts) == -1 && errno == EINTR);
}

void SleepInUs(uint32 us) {
    struct timespec ts;
    ts.tv_sec = us / 1000000;
    ts.tv_nsec = us % 1000000 * 1000;

    while (nanosleep(&ts, &ts) == -1 && errno == EINTR);
}

#ifndef __APPLE__
uint64 NowInUs() {
    struct timespec now;
    clock_gettime(CLOCK_MONOTONIC, &now);
    return static_cast<uint64>(now.tv_sec) * 1000000 + now.tv_nsec / 1000;
}

#else // mac
uint64 NowInUs() {
    clock_serv_t cs;
    mach_timespec_t ts;

    host_get_clock_service(mach_host_self(), SYSTEM_CLOCK, &cs);
    clock_get_time(cs, &ts);
    mach_port_deallocate(mach_task_self(), cs);

    return static_cast<uint64>(ts.tv_sec) * 1000000 + ts.tv_nsec / 1000;
}
#endif // __APPLE__
#endif // _WIN32
/************************************ unix <=**********************************/

/**********************************=> win *************************************/
#ifdef _WIN32
void SleepInMs(uint32 ms) {
    ::Sleep(ms);
}

void SleepInUs(uint32 us) {
    ::LARGE_INTEGER ft;
    ft.QuadPart = -static_cast<int64>(us * 10);  // '-' using relative time

    ::HANDLE timer = ::CreateWaitableTimer(NULL, TRUE, NULL);
    ::SetWaitableTimer(timer, &ft, 0, NULL, NULL, 0);
    ::WaitForSingleObject(timer, INFINITE);
    ::CloseHandle(timer);
}

static inline uint64 GetPerfFrequency() {
    ::LARGE_INTEGER freq;
    ::QueryPerformanceFrequency(&freq);
    return freq.QuadPart;
}

static inline uint64 PerfFrequency() {
    static uint64 xFreq = GetPerfFrequency();
    return xFreq;
}

static inline uint64 PerfCounter() {
    ::LARGE_INTEGER counter;
    ::QueryPerformanceCounter(&counter);
    return counter.QuadPart;
}

uint64 NowInUs() {
    return static_cast<uint64>(
        static_cast<double>(PerfCounter()) * 1000000 / PerfFrequency());
}
#endif // _WIN32 
```

另一个更完整的跨平台代码可以在[这里找到](https://github.com/jhu-cisst/cisst/blob/master/cisstOSAbstraction/code/osaSleep.cpp)。

**另一个快速解决方案**

您可能已经注意到，上面的代码不再是轻量级的。它需要包含 Windows 标头以及其他内容，如果您正在开发仅标头库，这可能不是非常理想的。如果您需要少于 2 毫秒的睡眠并且您不太热衷于使用操作系统代码，那么您可以使用以下简单的解决方案，它是跨平台的，并且在我的测试中运行良好。请记住，您现在没有使用经过高度优化的操作系统代码，这可能会更好地节省电力和管理 CPU 资源。

```
typedef std::chrono::high_resolution_clock clock;
template <typename T>
using duration = std::chrono::duration<T>;

static void sleep_for(double dt)
{
    static constexpr duration<double> MinSleepDuration(0);
    clock::time_point start = clock::now();
    while (duration<double>(clock::now() - start).count() < dt) {
        std::this_thread::sleep_for(MinSleepDuration);
    }
} 
```

**相关问题**

*   [如何在 Windows 上使线程睡眠时间少于一毫秒](https://stackoverflow.com/questions/85122/how-to-make-thread-sleep-less-than-a-millisecond-on-windows)
*   [C++ 的跨平台睡眠功能](https://stackoverflow.com/questions/10918206/cross-platform-sleep-function-for-c)
*   [C 到毫秒是否有替代睡眠功能？](https://stackoverflow.com/questions/1157209/is-there-an-alternative-sleep-function-in-c-to-milliseconds)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-15T12:50:54.693

不要在这里使用旋转。使用标准方法可以达到要求的分辨率**和准确度。**

`Sleep()`当系统中断周期设置为以该高频率运行时，您可以使用大约 1 ms 的周期。查看[Sleep() 的描述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)以获取详细信息，特别是具有[获取和设置定时器分辨率的](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743626%28v=vs.85%29.aspx)[多媒体定时器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743609%28v=vs.85%29.aspx)以获取有关如何设置系统中断周期的详细信息。如果实施得当，这种方法可获得的**准确度在几微秒范围内。**

 **我怀疑你的循环也在做其他事情。因此，我怀疑您需要 5 ms 的总时间，这将是`Sleep()`您在循环中其他事情上花费的时间和其余时间的总和。

对于这种情况，我建议使用[Waitable Timer Objects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687012%28v=vs.85%29.aspx)，但是，这些计时器也依赖于多媒体计时器 API 的设置。[我在这里](https://stackoverflow.com/a/11537483/1504523)概述了更高精度计时的相关功能。[在这里](http://www.windowstimestamp.com/description)可以找到对高精度计时的更深入了解。

要获得更准确和可靠的计时，您可能需要查看`process priority classes`和`thread priorities`。关于 Sleep() 准确性的另一个答案是[this](https://stackoverflow.com/a/11470617/1504523)。

然而，能否获得`Sleep()`精确 5 ms 的延迟取决于系统硬件。某些系统允许您以每秒 1024 次中断运行（由多媒体计时器 API 设置）。这对应于 0.9765625 ms 的周期。因此，您可以获得的最接近的是 4.8828125 毫秒。其他允许更接近，特别是自 Windows 7 以来，在提供`high resolution event timers`. 请参阅MSDN 中的[关于计时器和](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644900%28v=vs.85%29.aspx)[高精度事件计时器](http://en.wikipedia.org/wiki/High_Precision_Event_Timer)。

**总结：**设置多媒体定时器以最大频率运行并使用[等待定时器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687012%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-15T12:42:39.507

从问题标签我想你在窗户上。看看[Multimedia Timers](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743609%28v=vs.85%29.aspx)，他们宣传的精度低于 1 毫秒。另一种选择是使用[自旋锁](http://en.wikipedia.org/wiki/Spinlock)，但这基本上会使 cpu 核心保持最大使用率。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-15T12:34:31.187

也许您可以尝试使用循环来检查时间间隔并在时间差为 5 毫秒时返回，而不是使用睡眠。循环应该比睡眠更准确。

但是，请注意，精度并不总是可能的。cpu 可能会在如此小的间隔内与另一个操作捆绑在一起，并且可能会错过 5 毫秒。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-16T08:37:11.120

这些功能：

*   [创建等待定时器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682492(v=vs.85).aspx)
*   [设置等待定时器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686289(v=vs.85).aspx)
*   [等待单个对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx)

让您创建一个分辨率为 100 纳秒的可等待计时器，等待它，并让调用线程在触发时执行特定函数。

[这是使用所述计时器的示例](http://msdn.microsoft.com/fr-fr/library/windows/desktop/ms687008(v=vs.85).aspx)。

请注意，WaitForSingleObject 有一个以毫秒为单位的超时，这可能可以作为等待的粗略替代品，但我不相信它。有关详细信息，请参阅此 SO[问题](https://stackoverflow.com/questions/895242/timeout-resolution-of-waitforsingleobject)。**

# javascript - 如何在 Typescript 的函数中调用函数？

> ID：13397574
> 
> 赞同：1
> 
> 时间：2012-11-15T12:30:28.257
> 
> 标签：javascript, typescript

我有以下脚本：

```
/// <reference path="updateAjax.ts" />
/// <reference path="updateSetUp.ts" />
/// <reference path="../../Shared/typescript/reference.ts" />

module Admin.Grid {

    export function updateField(entity: string, $link: JQuery) {

        var link = new Link($link),
            idArr = $link.attr("id"),
            idTmp = idArr.split("_");

        link.AdminParams = Admin.Shared.getAdminParams(entity),
        link.Entity = entity;
        link.InputFieldType = $link.attr('id').split('_')[1];
        link.Row = idTmp[2],
        link.PartitionKey = $("tr[id='row_" + link.Row + "']").attr('data-pk'),
        link.RowKey = $("tr[id='row_" + link.Row + "']").attr('data-rk');
        link.InputFieldValue = $link.is(":checkbox") ? $link.is(":checked") : $link.val(),

        updateSetUp(link);
        updateAjax(link);
    }
} 
```

在另一个文件中：

```
/// <reference path="../../Shared/typescript/reference.ts" />

module Admin.Grid {

    export function updateSetUp(link: Link) {
        $("#modified_" + link.Row).html('Updating');
        $("#modifiedBy_" + link.Row).html('Updating');
        $("#input_" + link.InputFieldType + "_" + link.Row)
            .next('span').remove().end()
            .after('<span class="check-waiting"></span>');
    }

} 
```

当第一个脚本编译为 javascript 时，**我看不到对 updateSetup(link) 或 updateAjax(link) 的任何调用**

我在 VS2012 中使用 Web Essentials 工作。我没有收到错误消息或红色下划线。据我所见，我的所有链接都是正确的。删除文件并重新创建没有区别。

这是生成的javascript：

```
var Admin;
(function (Admin) {
    (function (Grid) {
        function updateField(entity, $link) {
            var link = new Link($link);
            var idArr = $link.attr("id");
            var idTmp = idArr.split("_");

            link.AdminParams = Admin.Shared.getAdminParams(entity) , link.Entity = entity;
            link.InputFieldType = $link.attr('id').split('_')[1];
            link.Row = idTmp[2] , link.PartitionKey = $("tr[id='row_" + link.Row + "']").attr('data-pk') , link.RowKey = $("tr[id='row_" + link.Row + "']").attr('data-rk');
            link.InputFieldValue = $link.is(":checkbox") ? $link.is(":checked") : $link.val() , Grid.updateSetUp(link);
            Grid.updateAjax(link);
        }
        Grid.updateField = updateField;
    })(Admin.Grid || (Admin.Grid = {}));
    var Grid = Admin.Grid;

})(Admin || (Admin = {})); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:39:46.013

这些调用确实存在于编译的代码中。请注意，自由使用逗号而不是分号会导致行很长：

```
link.AdminParams = Admin.Shared.getAdminParams(entity) , link.Entity = entity;
link.InputFieldType = $link.attr('id').split('_')[1];
link.Row = idTmp[2] , link.PartitionKey = $("tr[id='row_" + link.Row + "']").attr('data-pk') , link.RowKey = $("tr[id='row_" + link.Row + "']").attr('data-rk');
link.InputFieldValue = $link.is(":checkbox") ? $link.is(":checked") : $link.val() , Grid.updateSetUp(link);
Grid.updateAjax(link); //<<<here and ...                                             ^here^ 
```

# java - Java：从 Set<> 获取属性

> ID：13397590
> 
> 赞同：1
> 
> 时间：2012-11-15T12:31:33.473
> 
> 标签：java, hibernate, object, set, restrictions

我正在使用[org.hibernate.criterion 类限制](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/criterion/Restrictions.html)来对搜索返回的内容添加限制。

只是一点信息，我有一个`Person`具有属性的对象`Set<LevelPassed>`。是一个具有我想要返回`LevelPassed`的属性的对象。`level`

我正在尝试使用`Restrictions.in(String, Object[])`，但我遇到的问题是对于我返回的字符串 a`Set<LevelPassed>`而不是 a `LevelPassed`。这意味着我无法使用以下方法通过每个级别`Restrictions.in("levelsPassed.level", Object[])`

所以问题是有没有人知道一种方法来检查所有使用 Restrictions.in() 使用的字符串`LevelPassed`属性`Set<LevelPassed>`

# java - SQLite：靠近“数据库”：语法错误

> ID：13397592
> 
> 赞同：2
> 
> 时间：2012-11-15T12:31:46.373
> 
> 标签：java, sqlite, sqlexception

当我尝试使用 java 在 SQLite 中以编程方式创建数据库时，它会在控制台中生成以下错误。

```
java.sql.SQLException: near "DATABASE": syntax error
    at org.sqlite.DB.throwex(DB.java:288)
    at org.sqlite.NativeDB.prepare(Native Method)
    at org.sqlite.DB.prepare(DB.java:114)
    at org.sqlite.PrepStmt.<init>(PrepStmt.java:37)
    at org.sqlite.Conn.prepareStatement(Conn.java:224)
    at org.sqlite.Conn.prepareStatement(Conn.java:217)
    at org.sqlite.Conn.prepareStatement(Conn.java:206)
    at com.mmcal.build.BuildDB.executeQuery(BuildDB.java:46)
    at com.mmcal.build.BuildDB.createDB(BuildDB.java:19)
    at MainGen.main(MainGen.java:16) 
```

我的代码是：

```
public class BuildDB {
Connection connection;
PreparedStatement ps;
ResultSet rs;
String qry;

public void createDB() {
    qry = "CREATE DATABASE IF NOT EXISTS myDb";
    executeQuery(qry);
}
public boolean executeQuery(String qry) {
    int cnt = 0;
    boolean flag = false;
    connection = ConnectionMaster.connectDb();
    try {
        ps = connection.prepareStatement(qry);
        cnt = ps.executeUpdate();
        System.out.println(flag);
    } catch (SQLException e) {
        e.printStackTrace();
    }
    if (cnt == 0) {
        flag = true;
    }

    return flag;

}
} 
```

我的代码有什么问题，或者这是通过编程在 SQLite 中创建数据库的正确方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:35:52.077

使用 SQLite，您只需打开数据库。如果它不存在，它将自动为您创建。然后您可以检查您的表是否存在并根据需要创建它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T12:36:28.593

SQLite 不会创建数据库，如果您分配的文件不存在，则会创建它。

您只需分配一个文件。它没有创建数据库的命令，只有创建表

# richfaces - 如何更改丰富的默认字体大小：编辑器

> ID：13397595
> 
> 赞同：0
> 
> 时间：2012-11-15T12:31:48.080
> 
> 标签：richfaces

我的 xhtml 视图中有一个 rich:editor 字段，它的默认字体大小为 11。它是这样的：

```
<rich:editor id="editor_value"
    configuration="#{editorBean.currentSimpleConfiguration}"
    width="560" height="130" viewMode="#{editorBean.viewMode}"
    value="#{bean.value}"> 
```

我想更改默认字体大小并使其更大。

我知道我可以使用“f:param”来做到这一点，例如：

```
<rich:editor id="editor_value"
    configuration="#{editorBean.currentSimpleConfiguration}"
    width="560" height="130" viewMode="#{editorBean.viewMode}"
    value="#{bean.value}"/>
    <f:param name="font_size" value="13px"/>
</rich:editor> 
```

或将分配“font_size=13px”放在我的“simple.properties”文件中（在“configuration="#{editorBean.currentSimpleConfiguration}"”中引用）

但这些解决方案无效，字体大小继续为 11px ......

有谁知道我错在哪里？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:17:08.973

您需要使用配置方面并遵循 CKEditor 说明：[http ://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html)

例子 ：

```
<rich:editor value="Test de contenu">
    <f:facet name="config">
    contentsCss: '#{facesContext.externalContext.requestContextPath}/resources/rich.css',
    toolbar: 'custom',
    language: 'fr',
    startupFocus: true,
    toolbar_custom:
        [
            { name: 'document', items : [ 'NewPage','Preview' ] },
            { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
            { name: 'editing', items : [ 'Find','Replace','-','SelectAll','-','Scayt' ] },
            { name: 'insert', items : [ 'Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak'
                     ,'Iframe' ] },
                    '/',
            { name: 'styles', items : [ 'Styles','Format' ] },
            { name: 'basicstyles', items : [ 'Bold','Italic','Strike','-','RemoveFormat' ] },
            { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote' ] },
            { name: 'links', items : [ 'Link','Unlink','Anchor' ] },
            { name: 'tools', items : [ 'Maximize' ] }
        ]
    </f:facet>
</rich:editor> 
```

并创建您的自定义内容 css ：

```
body,
p
{
    font-family: Arial;
    font-size: 16px;
    font-weight: bold;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T06:53:17.363

只需将`content_css`参数添加到您的`<rich:editor>`并将其指向您的样式表并在其中定义您的样式。

```
<rich:editor>
   <f:param name="content_css" value="resources/myStyles.css"/>
</rich:editor> 
```

现在在**myStyles.css**中定义您的样式，如下所示。

```
body {
  color:red;
  font-size:20px;
} 
```

欲了解更多信息：[http ://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)

# c - 如何比较 Rcpp 和 C 的性能？

> ID：13397596
> 
> 赞同：3
> 
> 时间：2012-11-15T12:31:48.493
> 
> 标签：c, r, rcpp

我希望能够比较从 R 运行一些 C 代码的性能（使用 package`inline`和`Rcpp`）。我`rbenchmark`以前在 R 中这样做。一个简单的例子如下：-

在 RI 中一直在使用：-

```
library(inline)
## function to calculate a mean:-
mean_fun <- cxxfunction(signature(a = "numeric"), plugin = "Rcpp", body = '
  Rcpp::NumericVector xa(a);
    int n = xa.size();
    double sum = 0;
    for(int i = 0; i < n; i++) {
        sum += xa[i];
    }
  double mean = sum / n;
    return Rcpp::wrap(mean);    
')
x <- rnorm(100000)
require(rbenchmark)
print(benchmark(mean_fun(x), mean(x), 
      columns = c("test", "replications", "elapsed", "relative"),
      replications = 100)) 
```

这给出了输出： -

```
 test replications elapsed relative
2 mean_fun(x)          100   0.019    1.000
1     mean(x)          100   0.039    2.053 
```

并且在 CI 中基本上使用了相同的功能：-

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <time.h>

#define CLOCKTYPE CLOCK_MONOTONIC
#define MAX_ROWS 1000010

struct Double_array_struct {
    int size_array;
    double double_array[MAX_ROWS];
};

struct Double_array_struct *Load_double_array_struct()
{
    /* loads some_numbers.txt and stores the data into an
    Double_array_struct, resizes the memory allocation, 
    returns the pointer to the struct */
    struct Double_array_struct *data = malloc(MAX_ROWS * sizeof(double) +
        sizeof(int));
    data->size_array = MAX_ROWS;
    double num = 0;
    int array_length = 0;

    FILE *myfile = fopen("some_numbers.txt", "r");
    if (myfile == NULL) {
        perror("error opening file");
    } else {
        printf("File successfully opened\n");
        while(fscanf(myfile, "%lf", &num) > 0)
        {
            /*printf("Number = %lf\n", num);*/
            data->double_array[array_length] = num;
            array_length++;
        }
        data->size_array = array_length;
    }
    fclose(myfile);
    printf("array_length: %d\n", array_length);

    printf("re-sizing the data\n");
    data = realloc(data, (array_length * sizeof(double) + sizeof(int)));
    return(data);
}

void Destroy_double_array_struct(struct Double_array_struct *data) {
    /* function to free the memory used for Int array struct */
    assert(data != NULL);
    free(data);
}

double Mean_double_array_struct(struct Double_array_struct *data) {
    /* function to calculate the mean of an array of 
    doubles, when passed to function in the usual structure.
    Returns a double */
    int i;
    double sum = 0; 
    for(i = 0; i < data->size_array; i++){
        sum += data->double_array[i];
    }
    double mean = sum / data->size_array;
    return(mean);
}

int main()
{

    struct Double_array_struct *double_file_data = Load_double_array_struct();

    /* some timings */    
    printf("about to do timings");
    struct timespec tsi, tsf;
    clock_gettime(CLOCKTYPE, &tsi);
    int z;
    int iterations = 100; /*100 iterations to match rbenchmark */
    double new_array_mean[iterations];
    for(z = 0; z < iterations; z++){
        new_array_mean[z] = Mean_double_array_struct(double_file_data);
        /* I've allocated the result to an array to stop the
        compiler complaining that we're never using the result
        of the function */ 
    }
    clock_gettime(CLOCKTYPE, &tsf);
    double elaps_s = difftime(tsf.tv_sec, tsi.tv_sec);
    long elaps_ns = tsf.tv_nsec - tsi.tv_nsec;
    double time_taken = elaps_s + ((double)elaps_ns) / 1.0e9;

    printf("time taken %lf\n", time_taken);
    Destroy_double_array_struct(double_file_data);

    return 0;
} 
```

该文件`some_numbers.txt`只是用`rnorm(100000)`R 生成的 100,000 个随机数的文件。

这给出了输出： -

```
File successfully opened
array_length: 100000
re-sizing the data
about to do timings:
mean: 0.003486
time taken 0.095793 
```

那么，比较`elapsed`从 的时间`rbenchmark`和从 C 函数得到的时间有意义吗？如果是这样，为什么从`R`with调用的`Rcpp`同一个函数`inline`显然比从 C 调用时更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:42:36.627

为了*比较*事物，它们必须具有*可比性*。而且，一般来说，独立的`main()`实现*无法*与 R 托管某些东西相提并论，因为从内存分配到根据 R（和类似的脚本语言）需要修改其他行为的框架完全不同。

您可以比较由 R 调用或作为 C 独立程序调用的不同*算法。*

您可以比较由 R 调用或作为 C 独立程序调用的不同*语言。*

但你无法真正比​​较你所做的方式。

# sdk - HTC One V 蓝牙低功耗 API 支持

> ID：13397597
> 
> 赞同：0
> 
> 时间：2012-11-15T07:25:44.817
> 
> 标签：sdk, bluetooth-lowenergy

我正在尝试为我的 HTC One V 开发与低功耗蓝牙相关的应用程序。

由于HTC One V包含高通芯片组，博通蓝牙低功耗SDK会支持吗？如果 Broadcom 不支持它，那我该怎么办？我应该使用哪个 SDK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:30:22.227

不可以。Broadcom 开源低功耗蓝牙 SDK / API 不适用于采用 Qualcomm 芯片组的手机。它也不适用于带有 TI 芯片组的手机。它也不太可能在带有 Broadcom 芯片组的手机上工作，因为它们不包含所需的“共享对象”.SO 文件。有一些方法可以从比 eclipse 更多的本地工具中包含 .so 文件。有一个指南告诉如何从较新的 Eclipse 版本中包含 .so 文件，但这需要您找到 .so 文件。似乎所有的大型芯片生产商都在从内部对抗和摧毁 Android。只有 HTC 获得了官方的 BLE API，并且仅来自最新的 HTC ONE X+ 和未来的手机。谷歌在 12 月宣布“BLE 是我们将包括的下一件大事”，但这已经晚了一年多。

我在 HTC ONE X+ 上使用 BLE 支持 曾经还有一个用于摩托罗拉 RAZR 的 API，但它从他们的支持页面上消失了。太糟糕了，因为我买 RAZR 只是为了 BLE 开发。我们非常希望 Galaxy S2 能够与 Broadcom“开源”API 一起使用，但 Broadcom 从来没有“祝福”这款带有固件中包含 .SO 的畅销手机 :-( 对于三星 Galaxy S3，至少有非官方的 API 用于扫描和发现 BLE 外围设备和服务/特性，但它停在那里。其余的似乎不起作用。2012 年夏天三星承诺解决问题，但他们从未这样做。

也许这场闹剧是由于 NFC 与 BLE 对各种小额支付系统的重大政治影响。BIIIG MONEY 为获得正确生态系统的人提供。不幸的是，这场斗争正在扼杀 BLE 外围设备业务，只有 iOS 和 Windows 8（还不是 Windows Phone 8）获得了不错的 BLE API。

# php - 使用一种方法来设置/获取值而不是两种？

> ID：13397602
> 
> 赞同：1
> 
> 时间：2012-11-15T12:32:22.067
> 
> 标签：php, class, coding-style, getter-setter

用一个处理两者的方法替换 getter 和/或 setter 方法是个好主意吗？

例如：

```
 function name($what = null){

      if(!$what)
        return $this->name;

      $this->name = $what;
    } 
```

像这样使用：

```
 // get name
    print $obj->name();

    // set name
    $obj->name('bla'); 
```

我已经看到一些框架做到了。社区认为这是一种好的做法还是坏的做法？:P

它看起来效率更高，但看起来有点混乱，因为我习惯于 PHP 中的 getThing() 和 setThing()。这种风格让我想起了 jQuery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:35:38.673

> 用一个处理两者的方法替换 getter 和/或 setter 方法是个好主意吗？

**不。**

也许对于一个非常具体的用例。但不是。如果您需要分配`null`给`$name`. 您的代码不允许这样做。

就*性能*而言，我不知道如何*。*最后，您仍然进行一个方法调用。设置或*获取*。*_*

 *如果您的意思是在更少的代码中*高效*，那么就您自己的观点而言，您已经牺牲了可读性。哪个效率更低。特别是随着时间的推移。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:53:55.330

一般来说，有一个函数一次返回一些东西，另一次设置一些东西并返回 void，从来都不是一个好主意（可读性和 findbug 原因）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T16:00:18.693

我也使用过类似 jQuery 的单一方法解决方案，并且确实喜欢它，但阅读了一些帖子，出于某种原因，我认为其他人认为这是不好的做法。但是现在我再次阅读并遇到了这篇文章。

我的解决方案有（免责声明：压缩格式）

```
class Person {
    protected $name;
    protected $age;
    public function name($value = null) {
        if (null !== $value) {
            $this->name = (string) $value;
            return $this;
        }
        return $this->name;
    }
    public function age($value = null) {
        if (null !== $value) {
            $this->age = (int) $value;
            return $this;
        }
        return $this->age;
    }
} 
```

我确实喜欢这种类型的课堂界面

```
$person1 = new Person();
$person1->name('Bob')->age(30);
echo $person->name(); 
```

一般的想法是，如果 $value 为 null 然后发回属性，否则将属性设置为 $value，可能是类型转换它或通过一些其他过滤器运行它，然后返回类的实例。

现在我正在重新访问它，我不确定为什么这会如此糟糕，*除非*您可能会将您的 IDE 与返回值混淆，因为它要么是您的属性数据类型，要么是您的类。

需要将值设置为 false 仍然可以在这里工作，在（对我而言）需要设置为 null 的边缘情况下，我只需一次性/逐个更改默认/条件检查以适应。

我确实很欣赏不必编写两个方法及其相关的 phpdoc 块的较少样板感觉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:41:46.393

您可以做的是为对象中的所有变量创建一个***Get***和**一个**Set **。**

 *所以代替函数 getName() 和 getAge()

您可以使用 get('name') 或 set('name', 'Foo Bar');

函数如下所示：

```
 public function __set($name, $value) {
    $method = 'set' . $name;
    if (('mapper' == $name) || !method_exists($this, $method)) {
        throw new Exception('Invalid Client property');
    }
    $this->$method($value);
}

public function __get($name) {
    $method = 'get' . $name;
    if (('mapper' == $name) || !method_exists($this, $method)) {
        throw new Exception('Invalid Client property');
    }
    return $this->$method();
} 
```

如果您正在寻找一种有效的替代方法来替代 getter 和 setter，那么它可能就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-06T19:00:33.670

我通常喜欢让使用我的代码的程序员在通过 __set() 和 __get() 直接访问受保护的变量和通过我的自定义 getter/setter 之间进行选择。我发现在我的 getter/setter 中使用 func_num_args() 是一个可以接受的解决方案。它比仅测试 null 稍慢，但允许我将值设置为 null。

```
/**
 * Getter/Setter for Class::$someVar.
 * 
 * @access public 
 * @param mixed Value for Class::$someVar to be set to.
 * @return mixed If no parameter are passed it returns the current value for Class::$var.
 */
public function someVar($value = null) {
    if (func_num_args() > 0) {
        $this->someVar = $value;
        return $this;
    } else {
        return $this->someVar;
    }
} 
```

我们在编程中做出的每一个选择都是一种妥协。诀窍是找出可以妥协的地方和不应该妥协的地方。**

# c# - MSWord 中的表格对齐

> ID：13397607
> 
> 赞同：2
> 
> 时间：2012-11-15T12:32:35.870
> 
> 标签：c#, ms-word

我在word文档中生成了几个表，我的一个表有更多的列，所以它超出了我的文档页面宽度并且其中的几列不可见，如果我试图设置它的宽度，那么列名在桌子正在收拾

我的目标是：

1.  无论列数如何，我都希望表格自动适应页面。

2.  列名不应换行，即列名应显示在单行中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:06:04.437

真的没有办法做你想做的事，即通过改变字体大小来适应文本而不换行。
您将不得不手动解决。
您可以做的最大事情是明确指定标题行的高度。你可以这样做：

```
 tbl.Rows[1].HeightRule = WdRowHeightRule.wdRowHeightExactly;
           tbl.Rows[1].Height = 14; 
```

现在您可以尝试更改文本的字体大小以查看它是否合适。不幸的是，这就是你所能做的。

**一个疯狂的想法：**您可以尝试创建一个可以像这样工作的公式：
1\. 在创建表格后获取列宽。
2\. 计算标题字符串中的字符数。
3\. 阅读您正在使用的字体的规范并计算出每个字母占用多少空间，以及每个 [space] 字符占用多少空间。
4\. 现在您拥有所有可用数据来构建公式，以查看特定单元格的字体大小（以磅为单位）。您必须遍历所有列才能执行此操作。
5\. 从所有计算中选择最小字体大小并应用于每个标题以保持一致性。
话虽如此，这是一种脆弱的方法，很可能会失败。我怀疑你能否让它更紧密地工作。

**建议**：您应该将此功能称为不可能。你不想破解单词来做它不应该做的事情。

# php - 使用 javascript 的 Google Apps 域范围授权

> ID：13397608
> 
> 赞同：1
> 
> 时间：2012-11-15T12:32:36.340
> 
> 标签：php, javascript, google-drive-api, federated-identity, google-api-js-client

谷歌文档（[https://developers.google.com/drive/delegation#instantiate_a_drive_service_object](https://developers.google.com/drive/delegation#instantiate_a_drive_service_object)）说：

```
For security reasons service accounts are not supported in client-side
Javascript. Service accounts for server-side Javascript is not yet
supported 
```

我想知道有什么想法可以通过 php 实现它。下面的代码将描述我的想法。

```
<?php $token = generateToken() ?>

<script type="text/javascript">

  TOKEN = <?php echo $token ?>;
  startDriveRead(TOKEN);

</script> 
```

用户定义的 php 函数`generateToken()`将执行联合身份验证（有可能）并将返回令牌（我不知道如何获取令牌）。

用户定义的 JavaScript 函数`startDriveRead(`）将使用来自服务器端的令牌并访问驱动器数据（我不知道它是否可能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:11:43.460

您是否考虑过使用异步工作的 javascript 控制器来回调服务器并在 php 中执行请求？在使用域范围的授权方法连接到谷歌帐户时，我还没有看到一种获取可见身份验证令牌的方法。

# c - 简单的缓存分析 API

> ID：13397613
> 
> 赞同：6
> 
> 时间：2012-11-15T12:33:01.460
> 
> 标签：c, linux

有没有办法可以通过**编程**方式访问每个内核的（Intel]）硬件计数器？（即，不`perf`，`perfmon`或`valgrind`，我应该添加“简单”，所以不`PAPI`，例如）我想知道（对于每个核心）有多少 L1-LLC 缓存命中/未命中它（= 某个程序正在运行该核心）发生。这是针对 Linux 3.2.0-32、C 和使用 GCC 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T01:41:40.780

处理器中的性能计数器无法从“用户模式”代码中读取，因此您需要某种内核模块来执行此操作。一旦你有了它，它并不是很难，有很多 MSR。

您也许还可以使用 /dev/cpu/core-number/msr 来读取没有内核模块的值。

描述你如何做到这一点的所有细节对于一个答案来说有点过分（除非我复制'n'粘贴英特尔程序员手册（Vol3）的整个部分 - 我认为这不是我们想要的。 ..)

# dom - 无法使用 DOM 访问 font-weight 属性

> ID：13397614
> 
> 赞同：1
> 
> 时间：2012-11-15T12:33:04.030
> 
> 标签：dom, autohotkey

我在使用 DOM 访问 font-weight 属性时遇到问题。

```
html =
(Ltrim
    <html>
    <head>
    <style type="text/css">
    #bar{
        border: 1px solid black;
    }
    div {
        font-weight: bold;
    }
    </style>
    </head>
    <body><div>foo</div><p id="bar">bar</p></body>
    </html>
)

doc := ComObjCreate("HTMLfile") 
doc.write(html)
msgbox % doc.styleSheets[0].rules[0].style.border           ; "black 1px solid"
msgbox % doc.styleSheets[0].rules[1].style.font-weight      ; nothing
msgbox % doc.styleSheets[0].rules[1].style["font-weight"]   ; "[object]" 
```

这应该是这样吗？或者最后两个消息框是否应该显示值“粗体”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:39:21.987

减号用于数学运算，`-`不能用于变量名，因此您遇到的错误。

[按照http://www.w3schools.com/jsref/prop_style_fontweight.asp](http://www.w3schools.com/jsref/prop_style_fontweight.asp)`Object.style.fontWeight="value"`的建议尝试类似的方法

# apache - .htaccess "未指定输入文件。" 错误

> ID：13397616
> 
> 赞同：0
> 
> 时间：2012-11-15T12:33:13.313
> 
> 标签：apache, .htaccess

首先，这与 CodeIgniter 无关（大多数用户都有这个问题 CodeIgniter 用户），其次，我尝试了迄今为止我能找到的几乎所有解决方案或在网上找到的解决方案。所以在这里我问你的想法。

我的网络 CMS 后端模块的 URL 是这样的，并且到目前为止有效：

> [http://www.domain.com.tr/panel/customers.php](http://www.domain.com.tr/panel/customers.php)

当我单击添加按钮时，它应该重定向到：

> [http://www.domain.com.tr/panel/customers.php/add](http://www.domain.com.tr/panel/customers.php/add) [这个显示为“未指定输入文件。”]

只是想知道是否需要 `http://www.domain.com.tr/panel/customers.php/`（末尾带有斜线）打开`http://www.domain.com.tr/`

另外我的 .htaccess 文件：（我在根文件夹和 /panel 文件夹中都有这个 .htaccess 文件）

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

#RewriteCond %{HTTP_HOST} ^domain\.com\.tr [NC]
#RewriteRule ^(.*)$ http://www\.domain\.com\.tr\/$1 [R=301,NC]

RewriteRule ^(giris|cikis)/?(.*)$ login.php [NC]
RewriteRule ^sys/bilgilerim/?(.*)$ sys/bilgilerim.php [NC]
RewriteRule ^sys/site-ayarlari/?(.*)$ sys/ayarlar.php [NC]
RewriteRule ^sys/site-istatistikleri/?(.*)$ sys/stats.php [NC]
RewriteRule ^sys/panel-kullanicilari/?(.*)$ sys/pkullanici.php [NC] 
```

附加信息：

> www.domain.com.tr/about-us --- 工作
> 
> www.domain.com.tr/services/blabla --- 工作
> 
> www.domain.com.tr/panel --- WORKS（后端登录和仪表板）
> 
> www.domain.com.tr/panel/customers.php --- WORKS（客户管理模块）
> 
> www.domain.com.tr/panel/customers.php/add --- 没有指定输入文件。（客户管理模块，添加客户链接）

PS 这不是一个新的 CMS，我以前多次使用过这个（完全是我的产品 - 手写）。所以我相信这可能是因为我没有太多权限访问它的某些服务器设置。

我会尝试你建议的一切，我可以尝试更新这篇文章。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:43:49.293

我没有在 .htaccess 中为您的 url 找到规则我认为文件[http://www.domain.com.tr/panel/customers.php](http://www.domain.com.tr/panel/customers.php)存在于您的磁盘上的服务器上。

您可以将类似的规则添加到 .htaccess

`RewriteRule ^/panel/customers.php/(.*) /panel/customers.php?action=$1`

在这种情况下，实际的 url [http://www.domain.com.tr/panel/customers.php/add](http://www.domain.com.tr/panel/customers.php/add)将打开 url [http://www.domain.com.tr/panel/customers.php?action=add](http://www.domain.com.tr/panel/customers.php?action=add)

# c++ - opencv matchTemplate 在计算机之间给出不一致的结果

> ID：13397617
> 
> 赞同：4
> 
> 时间：2012-11-15T12:33:15.253
> 
> 标签：c++, opencv, gpu

我在两台不同的计算机上运行以下代码，第一台有Nvidia GPU Quadro FX 880M，第二台是Quadro FX 1000M（在VS2010中编译，opencv242,64bit；opencv是从源代码编译的）。我正在运行的代码如下：

```
int n = 1000;  //number of iterations
int t = CV_TM_CCORR_NORMED; //correlation type

//reset GPU, print device info
cv::gpu::printCudaDeviceInfo(cv::gpu::getDevice());
cv::gpu::resetDevice(); 

//read big image
cv::Mat imgA = cv::imread("img.bmp"  ,CV_LOAD_IMAGE_GRAYSCALE);
//read small, template image
cv::Mat imgB = cv::imread("tmplt.bmp",CV_LOAD_IMAGE_GRAYSCALE);

//upload images to GPU
cv::gpu::GpuMat imgA_GPU,imgB_GPU;
imgA_GPU.upload(imgA);
imgB_GPU.upload(imgB);

cv::gpu::GpuMat imgC_GPU; //correlation results, computer in GPU
cv::Mat         imgC_CPU; //correlation results, computer in CPU

//matchTemplate in GPU, print average time(mSec)
size_t t1 = clock();
for(int i = 0;i!=n;++i)
    cv::gpu::matchTemplate(imgA_GPU , imgB_GPU, imgC_GPU , t);

std::cout << "GPU: " <<
(double(clock())-t1)/CLOCKS_PER_SEC*1000.0/n <<std::endl;

//matchTemplate in CPU, print average time(mSec)
size_t t2 = clock();
for(int i = 0;i!=n;++i)
    cv::     matchTemplate(imgA     , imgB    , imgC_CPU , t);

std::cout << "CPU: " <<
(double(clock())-t2)/CLOCKS_PER_SEC*1000.0/n <<std::endl;

//download GPU image to host
cv::Mat imgC_GPUhost;
imgC_GPU.download(imgC_GPUhost);

//convert images to 8U
imgC_CPU.convertTo(imgC_CPU,CV_8U,255);
imgC_GPUhost.convertTo(imgC_GPUhost,CV_8U,255);

//!!!!!! imgC_GPUhost should be equal to imgC_CPU
cv::Mat diff;
cv::absdiff(imgC_CPU,imgC_GPUhost,diff);
//expected: RESULTS DIFF: 0
std::cout << "RESULTS DIFF: " << cv::sum(diff).val[0] << std::endl;

cv::imwrite("cor2.bmp",imgC_CPU);
cv::imwrite("cor.bmp",imgC_GPUhost);
char s;
std::cin >> s; 
```

有两件主要的事情让我感到困惑：

1.  在 Quadro FX 880M 上，此功能不起作用：GPU 输出图像 (imgC_GPU) 全部为零 - 输入类型（8U 或 32F）或相关方法（ccor、ccoef 等）无关紧要。另一方面，在 Quadro FX 1000M 中，我在 CPU 和 GPU 之间获得了一致的结果。怎么可能，我需要做什么才能让它在 Quadro FX 880M 上工作？

2.  在模板匹配中，输出图像中的每个像素都可以独立于其他像素进行计算——因此并行很容易，GPU 实现非常适合。怎么可能，即使查看平均时间（如代码中所示），GPU 性能也比 CPU 慢 3 倍？它在两台计算机上都经过验证，后台没有运行其他进程。

奥哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T11:46:45.170

看起来 matchTemplate 的 GPU 版本是在考虑同时搜索多个模板的情况下开发的。事实上，使用一个图像/一个模板，CPU 版本似乎更快。

[http://answers.opencv.org/question/16061/opencv-matchtemplate-cuda-large-images-templates/](http://answers.opencv.org/question/16061/opencv-matchtemplate-cuda-large-images-templates/)

# java - 我的 Swing 应用程序是否分配了冗余对象？

> ID：13397618
> 
> 赞同：0
> 
> 时间：2012-11-15T12:33:22.843
> 
> 标签：java, swing, memory-management, garbage-collection, jvm

我注意到我创建的所有 Swing 应用程序似乎都在不断地分配新对象。

考虑这个小应用程序：

```
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JPanel;
@SuppressWarnings({ "javadoc", "serial" })
public class SwingTest extends JFrame {
    public static void main(String[] args) {
        new SwingTest().setVisible(true);
    }
    public SwingTest() {
        setTitle("SwingTest");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        panel.setPreferredSize(new Dimension(400, 400));
        setContentPane(panel);
        pack();
    }
} 
```

我不希望它消耗太多内存，但是如果我查看 VisualVM 中的堆图，我会看到内存使用量不断增加，然后重置。这是什么原因造成的？

![](../Images/55ca37797cdc87de8a3016bff9eaca31.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:44:03.860

这是在我的机器上分析代码的结果（Linux 3.1.1 上的 OpenJDK 1.6.0_22 64 位，使用 Netbeans 分析器）

![平面分析结果](../Images/bacf270d4bfb296b6021fffc913e5857.png)

我建议你找出那些分配的对象是什么。您可以通过制作内存快照并比较它们来做到这一点。

*请注意，Netbeans 分析器与 VisualVM 的代码库相同。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:51:18.597

阻止 Java 分配新对象，从而降低垃圾收集的成本，这违反了 Java 最初构建的主要原则之一。不，没有办法阻止 Swing 创建新对象 - 如果没有关键对象，它将如何运行？没有特殊的、无对象的操作模式。

如果垃圾收集的性能如此重要以至于您担心，那么 Java 不是您应该使用的技术。如果您的应用程序对时间要求很高，请用 C 或任何其他低级语言编写它，您可以在其中控制诸如内存管理性能之类的事情。

# android - 如何控制在另一个视图上移动视图？

> ID：13397620
> 
> 赞同：0
> 
> 时间：2012-11-15T12:33:33.313
> 
> 标签：android, android-layout, gesturedetector

我设法将红色`LinearLayout`移到另一个`LinearLayout`标志上`TranslateAnimation`。

![](../Images/67d1641e14da130db09acae487144895.png)

我确实控制动画的开始，但不像在**YouTube**应用程序或其他类似应用程序中那样，因为我必须等到动画完成。

我怎样才能更好地控制红色的运动`LinearLayout`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:37:09.753

你必须在你的动画上设置一个动画监听器，像这样

```
 animationRed.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub

            }
        }); 
```

# c# - 在 Sonar 中运行 Stylecop 时，如何让它分析识别为测试项目的项目？

> ID：13397622
> 
> 赞同：0
> 
> 时间：2012-11-15T12:33:38.933
> 
> 标签：c#, testing, sonarqube, stylecop

好的，那么让我们假设我想按照规则生活，像对待生产代码一样小心对待你的测试代码。如何让 Sonar 和 Stylecop 分析我的测试项目？

我基本上已经在我的 sonar-project.properties 文件中写了这个：

```
#Core C# Settings 
sonar.dotnet.visualstudio.solution.file=SomeSolution.sln 
sonar.dotnet.excludeGeneratedCode=true
sonar.dotnet.version=4.0
sonar.donet.visualstudio.testProjectPattern=*.Tests

#StyleCop
sonar.stylecop.mode= 
```

阅读声纳构建日志，我看到除了测试（即 SomeTestProject.Tests）项目之外的所有项目都由 Stylecop 分析。

我怎样才能让 sonar+stylecop 也分析我的测试项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:50:45.793

似乎这在 Sonar 3.3+C# 插件 2.0 中不受支持。在 2.1 中修复 [http://jira.codehaus.org/browse/SONARDOTNT-224?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](http://jira.codehaus.org/browse/SONARDOTNT-224?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

# java - 复制lib下所有jar文件并在windows中运行.r文件的步骤

> ID：13397626
> 
> 赞同：1
> 
> 时间：2012-11-15T12:33:56.570
> 
> 标签：java, rjava

我有一个 Maven 项目，所有的 jar 文件都被复制到 maenLib 文件夹中。我正在使用 .r 文件从命令行运行应用程序。我知道如何在 ubuthu 中运行它，但我想知道如何让它在 Windows 下运行。

我使用[BAT 文件创建 Java CLASSPATH](https://stackoverflow.com/questions/524081/bat-file-to-create-java-classpath)来设置 ClassPath（不确定这是正确的方法！！！）。但不知道如何从 windows 运行 .r 文件。

在整个论坛中进行了搜索，但没有帖子给出完整的解决方案。:( 我的要求是使用 .bat 文件将整个 jar 文件复制到类路径，然后以某种方式运行我的 es.r 文件

请帮我解决这个问题。感谢任何帮助！！！！

# jquery - 不使用选择器在 DOM 元素上调用 jQuery 方法

> ID：13397628
> 
> 赞同：0
> 
> 时间：2012-11-15T12:34:02.350
> 
> 标签：jquery, dom

这是一个简单的代码：

```
 var elements = $('#myDiv').find('a'); 
```

假设元素数组包含 5 个链接。现在我想像这样隐藏数组中的 zeroeth 链接：

```
$(elements[0]).css("display","none"); 
```

我知道 $(elements[0]) 是非法的。我可以说：

```
var selector="#"+elements[0].id 
```

进而

```
$(selector).css("display","none"); 
```

但是，如果没有分配 id，我如何引用该元素呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:36:07.630

最好在此处应用特殊选择器。要获取第一个元素，请使用[`:first`](http://api.jquery.com/first-selector/)选择器：

```
$("#myDiv").find("a:first").hide(); 
```

或[`:eq()`](http://api.jquery.com/eq-selector/)选择器：

```
$("#myDiv").find("a:eq(0)").hide(); 
```

where`:eq(0)`选择索引为 0 的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:37:23.913

这会起作用

```
$('#myDiv a:first').hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:36:52.277

```
var elements = $('#myDiv').find('a');
elements.filter(':first').css("display","none"); 
```

或者

```
$('#myDiv').find('a:first').css("display","none"); 
```

或更好

```
$('#myDiv a:first:visible').hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:37:58.230

如果`$(elements[0])`让你感到奇怪，你可以使用：

```
elements.eq(0) 
```

但是请注意，在性能方面`$(elements[0])`优于几乎任何其他方法，`.eq`排在第二位（不包括像这样的东西`$(elements.get(0))`，这很可能会让你感到奇怪）。

我不建议使用`:first`or `:eq`，因为它们是迄今为止最慢的。

请参阅此基准：http: [//jsperf.com/jquery-first-vs-first2/6](http://jsperf.com/jquery-first-vs-first2/6)

# c# - 向动态创建的对象添加过渡

> ID：13397630
> 
> 赞同：2
> 
> 时间：2012-11-15T12:34:13.120
> 
> 标签：c#, wpf, microsoft-metro, winrt-xaml

我想为动态创建的按钮分配一个过渡，但它没有发生。

```
Button btn = new Button();
Grid.SetRow(btn, j);
Grid.SetColumn(btn, i);
btn.Transitions.Add(new Windows.UI.Xaml.Media.Animation.RepositionThemeTransition());                    
myGrig.Children.Add(btn); 
```

我在 btn.Transition... 行出现运行时错误，即 NullReference 异常。你调用的对象是空的。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:35:12.437

尝试这样做..

```
 Button btn = new Button();
        btn.Transitions = new Windows.UI.Xaml.Media.Animation.TransitionCollection();
        Grid.SetRow(btn, j);
        Grid.SetColumn(btn, i);
        btn.Transitions.Add(new Windows.UI.Xaml.Media.Animation.RepositionThemeTransition());                    
        myGrig.Children.Add(btn); 
```

# java - JSF2.0显示动态图像数组

> ID：13397631
> 
> 赞同：1
> 
> 时间：2012-11-15T12:34:15.773
> 
> 标签：java, jsf, jakarta-ee, jsf-2, primefaces

我有一个应用程序调用一个服务，该服务返回一个 Json 字符串，其中包含大约十个图像作为字节数组。我遍历 Json 字符串并提取图像并将它们转换为 StreamedContent 并将它们放入一个对象中，然后使用具有该图像的图像和名称的对象填充一个列表。我试图在带有 PrimeFaces 标记的 JSF 页面中显示这些图像，但图像没有显示。我的代码如下：

ImageBackingBean

```
 private String sku;
private StreamedContent image;
private List<ImageBackingBean> imageList;

public String getSku(){
    return sku;
}
public void setSku(String sku){
    this.sku = sku;
}
public StreamedContent getImage() {
    FacesContext context = FacesContext.getCurrentInstance();
    if(context.getRenderResponse()){
        return new DefaultStreamedContent();
    }else{
        String id = context.getExternalContext().getRequestParameterMap().get("sku");
        List<ImageBackingBean> list = getImageList();
        for(ImageBackingBean bean : list){
            if(bean.getSku().equalsIgnoreCase(id)){
                return bean.getImage();
            }
        }
    }
    return image;
}
public void setImage(StreamedContent image) {
    this.image = image;
}

public List<ImageBackingBean> getImageList(){
    return imageList;
}

public void setImageList(List<ImageBackingBean> imageList){
    this.imageList = imageList;
}

public String getImageFromDatabase() throws IOException{
    setImageList(DBImages.getImages());
    if(getImageList() == null){
        return "error";
    }
    return "success";
} 
```

我的 JSF 页面很简单，如下：

```
 <h:dataTable var="items" value="#{imageBackingBean.imageList}">
                <h:column>
                    <p:graphicImage value="#{items.image}">
                        <f:param name="sku" value="#{items.sku}" />
                    </p:graphicImage>
                </h:column>
            </h:dataTable> 
```

我在网上阅读的所有内容都告诉我这就是我需要显示动态图像的方式。我不应该将图像存储为列表中的 StreamedContent 类型吗？

# xcode - UIImageView 动画图片

> ID：13397633
> 
> 赞同：0
> 
> 时间：2012-11-15T12:34:20.820
> 
> 标签：xcode, animation, uiimageview

如何循环 UIImageView 中的图像？

假设我有三张图片，1.jpg、2.jpg、3.jpg。在用户按下某些东西之前，我如何让图片无限变化......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:38:26.000

这很好地描述了它：[[链接]](http://appsamuck.com/day2.html)

```
// create the view that will execute our animation
 UIImageView* campFireView = [[UIImageView alloc] initWithFrame:self.view.frame];

 // load all the frames of our animation
 campFireView.animationImages = [NSArray arrayWithObjects:    
                             [UIImage imageNamed:@"campFire01.gif"],
                             [UIImage imageNamed:@"campFire02.gif"],
                             [UIImage imageNamed:@"campFire03.gif"],
                             [UIImage imageNamed:@"campFire04.gif"],
                             [UIImage imageNamed:@"campFire05.gif"],
                             [UIImage imageNamed:@"campFire06.gif"],
                             [UIImage imageNamed:@"campFire07.gif"],
                             [UIImage imageNamed:@"campFire08.gif"],
                             [UIImage imageNamed:@"campFire09.gif"],
                             [UIImage imageNamed:@"campFire10.gif"],
                             [UIImage imageNamed:@"campFire11.gif"],
                             [UIImage imageNamed:@"campFire12.gif"],
                             [UIImage imageNamed:@"campFire13.gif"],
                             [UIImage imageNamed:@"campFire14.gif"],
                             [UIImage imageNamed:@"campFire15.gif"],
                             [UIImage imageNamed:@"campFire16.gif"],
                             [UIImage imageNamed:@"campFire17.gif"], nil];

 // all frames will execute in 1.75 seconds
 campFireView.animationDuration = 1.75;
 // repeat the annimation forever
 campFireView.animationRepeatCount = 0;
 // start animating
 [campFireView startAnimating];
 // add the animation view to the main window 
 [self.view addSubview:campFireView]; 
```

# knockout.js - 淘汰赛映射插件无法从 ASp.Net Webapi 绑定 Json 集合

> ID：13397635
> 
> 赞同：0
> 
> 时间：2012-11-15T12:34:27.690
> 
> 标签：knockout.js, asp.net-web-api, knockout-mapping-plugin

我有以下代码：

```
/*   Sample data received from an ASP.Net WebApi ajax call  */
var data = { [{"CodSeguro":676541,"NroSeguro":538178},{"CodSeguro":687069,"NroSeguro":577836]},{"CodSeguro":123,"NroSeguro":233]};

/*This function build the view model that will be shared by multiple pages*/
function getViewModel(data)
{
   return ko.mapping.fromJS(data);
}

var viewModel = getViewModel(data);
ko.applyBindings(viewModel); 
```

我的 HTML 看起来像这样：

```
<table>
<thead>
    <tr>
        <th>CodSeguro</th>
        <th>NroSeguro</th>
        <th>NroEndoso</th>        
    </tr>
</thead>
<tbody data-bind="foreach: ">
  <tr>
    <td>
        <span data-bind="text: CodSeguro"></span>
    </td>
    <td>
        <span data-bind="text: NroSeguro"></span>
    </td>
    <td>
        <span data-bind="text: NroEndoso"></span>
    </td>        
</tr> 
```

只是我不知道在这一行的 foreach 之后要放什么：

我真的需要使用映射插件，因为我不想在这两个地方编写很多 ob 对象（用于淘汰的 js 和服务层中的 c#）

小提琴是这样的：

[http://jsfiddle.net/3Q6JE/](http://jsfiddle.net/3Q6JE/)

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:39:17.143

你可以把`$data`foreach：

```
<tbody data-bind="foreach: $data"> 
```

但是您`json`应该是以下内容：

```
var data = [{"CodSeguro":676541,"NroSeguro":538178},{"CodSeguro":687069,"NroSeguro":577836},{"CodSeguro":123,"NroSeguro":233}]; 
```

这是工作小提琴：http: [//jsfiddle.net/3Q6JE/2/](http://jsfiddle.net/3Q6JE/2/)

# ms-access-2010 - Access 2010 Subform 数据已添加到数据库但数据不会显示

> ID：13397637
> 
> 赞同：1
> 
> 时间：2012-11-15T12:34:30.160
> 
> 标签：ms-access-2010, subform

我这里有一个奇怪的，我似乎无法弄清楚。

我的 Access 前端项目在 SQL 2005 express 后端上运行。

多年来我一直在使用子表单，这是我没有将应用程序迁移到 VB/VS 前端的唯一原因。

但是，自从升级到 Access 2010 后，我无法让子表单工作。相反，当我尝试添加一行时，我收到以下错误（数据已添加到数据库中，但数据不会显示在表单中，因为它不满足基础记录源中的条件。）：

![在此处输入图像描述](../Images/32674662a5f88db9370c25212f6af519.png)

主窗体和子窗体在 poid 和 PONo 上链接。

我已经从头开始创建了所有默认值的表单，但问题仍然存在。

我的 SQL 表是

PURCHASE: - - poid, int, PK, Identity, seed 1, inc 1 supplierID, int orderdate, DateTime deliverydate, datetime ordersent, bit ordercomplete, bit initials, nvarchar supplierinvoiceno, nvarchar branchid, int bookingin, bit deliverycharge, money

[STOCK - 详细]: - - stockid, int, PK, Identity, Seed 1, inc 1 CodeID, int service, bit costprice, money PONo, int Instock, bit SerialNo, char StockTake, bit Branch, Char ProductID, int

任何帮助将不胜感激。

非常感谢，

安倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:15:52.917

解决了！Access 2010 不支持具有相同列名的多个表，除非它位于 SQL 服务器上的存储过程/查询中。

我一直在尝试摆脱存储过程和查询，但 A2010 不会在任何组合下使用硬编码 SQL 作为记录源。

一旦我创建了一个查询并将其选择为记录源，子表单就可以按预期完美运行。

此外，即使未在查询中选择，我也必须为两个表中具有相同名称的任何字段设置别名。是的，别名也只在查询中起作用！

我爱微软！;-)

# apache2 - Apache - 虚拟主机 - 只工作一个

> ID：13397640
> 
> 赞同：2
> 
> 时间：2012-11-15T08:13:29.593
> 
> 标签：apache2, xampp, virtualhost

我的本地开发机器上需要几个虚拟主机。不幸的是，它需要是窗户。

httpd-vhost.conf

```
<VirtualHost *:80>
  ServerAdmin mateusz.tracz@vd.pl
  DocumentRoot "C:/xampp/htdocs"
  ServerName localhost
</VirtualHost>

<VirtualHost *:80>
   ServerAdmin mateusz.tracz@vd.pl
   DocumentRoot "C:/xampp/htdocs/manadom.local/public"
   ServerName manadom.local
   ErrorLog "logs/manadom.local-error.log"
   CustomLog "logs/manadom.local-access.log" combined
</VirtualHost>

<VirtualHost *:80>
  ServerAdmin mateusz.tracz@vd.pl
  DocumentRoot "C:/xampp/htdocs/galeriabiznesu"
  ServerName gb.loc
  ErrorLog "logs/gb.loc-error.log"
  CustomLog "logs/gb.loc-access.log" combined
</VirtualHost> 
```

和主机文件：

```
127.0.0.1 localhost
127.0.0.1 manadom.local
127.0.0.1 gb.loc 
```

问题是：localhost指向

```
C:/xampp/htdocs/manadom.local/public 
```

manadom.local 指向

```
C:/xampp/htdocs/manadom.local/public too 
```

gb.loc 指向

```
C:/xampp/htdocs/manadom.local/public 
```

我不知道怎么了？

请帮助我，我不是管理员，但我读了很多，我不知道我可能会做错什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:37:20.053

是的，如前所述，在虚拟主机指令之前，您应该拥有：

```
NameVirtualHost *:80 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T10:49:47.320

对于命名虚拟主机，您必须设置“NamedVirtualHosts”指令。请看手册-> [http://httpd.apache.org/docs/2.2/mod/core.html#namevirtualhost](http://httpd.apache.org/docs/2.2/mod/core.html#namevirtualhost)

# facebook - Facebook 评论在公共视图中显示的评论少于在版主视图中的评论

> ID：13397642
> 
> 赞同：0
> 
> 时间：2012-11-15T12:34:36.183
> 
> 标签：facebook, facebook-javascript-sdk, facebook-social-plugins, facebook-comments

我在页面选项卡中实现了 Facebook 评论插件。我无法在其中看到几条评论。昨天有88条评论现在突然只有39条评论了。如果我查看版主视图，我可以看到超过 100 条评论，但在公共视图中看不到超过一半的评论。我默认所有评论都是公开的。我试图找出可能背后的各种原因，但我仍然没有成功。我怀疑有人故意将许多评论标记为垃圾邮件，因此 Facebook 将其隐藏。虽然我相信至少管理员应该能够看到它。

评论插件指向这个网址：[http ://rcomsocialapps.com/netconnect_journey/comment.html](http://rcomsocialapps.com/netconnect_journey/comment.html)

即使在[https://developers.facebook.com/tools/comments](https://developers.facebook.com/tools/comments)我也可以在公共视图中看到 100 多条评论

但是我托管插件的页面只有 39 条评论：[https ://rcomsocialapps.com/netconnect_journey/postlike.php](https://rcomsocialapps.com/netconnect_journey/postlike.php)

![截屏](../Images/a5028eaff8c38aa198df9461d0fe734e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:32:45.913

类似于此处报告的未解决的 Facebook 错误 -> [https://developers.facebook.com/bugs/503273333023849?browse=search_50b496567d5059328231776](https://developers.facebook.com/bugs/503273333023849?browse=search_50b496567d5059328231776)

# android - 从文本文件而不是字符串中读取数据

> ID：13397643
> 
> 赞同：3
> 
> 时间：2012-11-15T12:34:41.843
> 
> 标签：android, listview

有没有办法将数据从文本文件（在资产中）加载到列表视图而不是这样做：

// ArrayList for Listview ArrayList> productList;

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Listview Data
    String products[] = {"Dell Inspiron", "HTC One X", "HTC Wildfire S", "HTC Sense", "HTC Sensation XE",
                            "iPhone 4S", "Samsung Galaxy Note 800",
                            "Samsung Galaxy S3", "MacBook Air", "Mac Mini", "MacBook Pro"};

    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, products);
    lv.setAdapter(adapter); 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:47:02.640

一种选择是将数据数组以 JSON 格式存储在您的文件中。

然后，您可以使用以下代码示例解析此文件并将其加载到字符串数组中：

```
 try {
        // Load file content
        InputStream is = getAssets().open(filename);
        StringBuffer fileContent = new StringBuffer("");

        byte[] buffer = new byte[1024];
        int length;
        while ((length = is.read(buffer)) != -1) {
            fileContent.append(new String(buffer));
        }

        // Parse into JSON array
        JSONArray jsonArray = new JSONArray(fileContent.toString());            

        // Build the string array
        String[] products = new String[jsonArray.length()];
        for(int i=0; i<jsonArray.length(); i++) {
            products[i] = jsonArray.getString(i);
        }
    } catch (IOException e) {
        // IO error
    } catch (JSONException e) {
        // JSON format error
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:41:18.050

从 inputStream 中逐行读取

```
InputStream in = getAssets().open(fileName)
BufferedReader bin = new BufferedReader(new InputStreamReader(in));
bin.readLine(); 
```

# java - 限制 JScrollPane 的滚动范围

> ID：13397645
> 
> 赞同：0
> 
> 时间：2012-11-15T12:34:50.170
> 
> 标签：java, swing, jscrollpane, jtextarea, jscrollbar

我有一个`JTextArea`包装在 a`JScrollPane`中，我用它来记录我的应用程序的输出。我使用默认的纯字体，文本区域的大小为 9，滚动窗格的高度为 48 像素。这会导致滚动窗格视图中的行分布均匀，但存在一个问题：如果您一直向上或一直向下滚动，则会发生这种情况：

![在此处输入图像描述](../Images/1523fd58e75d0093a154f204dae4ff6c.png)

如您所见，顶线被截断，这就是为什么我想知道是否有办法限制滚动窗格的滚动范围，例如，它不能达到顶部或底部 6 个像素。也欢迎替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:46:44.110

您可以通过使用`setBorder`继承自`JComponent`. 的[文档`JComponent`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setBorder%28javax.swing.border.Border%29)建议以下内容：

> 尽管从技术上讲，您可以在任何继承自 JComponent 的对象上设置边框，但许多标准 Swing 组件的外观实现不能很好地与用户设置的边框配合使用。一般情况下，当您想在 JPanel 或 JLabel 以外的标准 Swing 组件上设置边框时，我们建议您将组件放在 JPanel 中，并在 JPanel 上设置边框。

这将产生与限制滚动范围相同的结果，同时更直接。

**编辑：**

OP 报告说以下解决方案对他有用：

```
textAreaLog.setBorder(BorderFactory.createEmptyBorder(0, 6, 0, 6)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:47:33.453

将顶部和底部插入为 6 像素的空边框放置`JTextArea`在 a中？`JPanel`

# webserver - 远程 SQL Server 2008 Management Studio 未连接

> ID：13397650
> 
> 赞同：2
> 
> 时间：2012-11-15T12:35:24.450
> 
> 标签：webserver, instruction-set, sql-server-2008

远程 SQL Server 2008 Management Studio 未使用 TMG SERVER 2010 连接到数据库。出现错误 40 和 53。

但它在没有 tmgserver 的情况下工作。

请指教。

谢谢

# angularjs - AngularJS $routeProvider 模块的 TypeScript 示例

> ID：13397652
> 
> 赞同：9
> 
> 时间：2012-11-15T12:35:25.093
> 
> 标签：angularjs, typescript

我目前正在开发一个使用 AngularJS 并决定使用 TypeScript 的简单 couchapp

我基于 AngularJS angular-phonecat 教程。我已将大部分应用程序转换为惯用的 TypeScript。我的基础是 pwalat / Piotr.Productlist bits [1](https://bitbucket.org/pwalat/piotr.productlist)，但是它们仅涵盖控制器和模型。

我正在努力弄清楚如何为角度路由器创建正确的 TypeScript 等效项`$routeProvider`

```
 //app/js/app.js[2]

    angular.module('phonecat', []).
      config(['$routeProvider', function($routeProvider) {
      $routeProvider.
          when('/phones', {templateUrl: 'partials/phone-list.html',   controller: PhoneListCtrl}).
          when('/phones/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
          otherwise({redirectTo: '/phones'});
    }]); 
```

我知道它需要`module {}`某种形式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:42:20.093

angular-vs 团队有一些非常值得一看的东西：

[https://github.com/kriasoft/angular-vs/blob/master/App/Scr​​ipts/App.ts](https://github.com/kriasoft/angular-vs/blob/master/App/Scripts/App.ts)

...在这种情况下，他们对传递给 config 的 any 数组中的初始字符串进行了某种强制转换，以避免 Typescript 似乎在确定要使用哪个版本的配置时遇到的麻烦（**.config(<any>' $routeProvider'...**）。

例子：

```
angular
.module('phonecat', [])
.config([
    <any>'$routeProvider', 
    ($routeProvider: angular.RouteProvider) {
        $routeProvider
            .when('/phones', { templateUrl: 'partials/phone-list.html', controller: PhoneListCtrl })
            .when('/phones/:phoneId', { templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl })
            .otherwise({ redirectTo: '/phones' });
    }
]); 
```

...我应该提到，我从这里安装了 AngularJS TypeScript 声明源：

[http://nuget.org/packages/Schmulik.AngularTS](http://nuget.org/packages/Schmulik.AngularTS)

..然后在我的路由文件顶部引用它们：

```
/// <reference path="../AngularTS/angular.d.ts" />
/// <reference path="../AngularTS/ng/route.d.ts" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T14:56:03.907

你也可以使用 ng.route.IRouteProvide

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-11T18:33:55.290

我在这里找到了答案：http: [//morrisdev.com/2016/01/angular-controllers-with-typescript/](http://morrisdev.com/2016/01/angular-controllers-with-typescript/)

```
interface IRouteParams extends ng.route.IRouteParamsService {
userId: number; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T14:27:44.870

我还没有查看 AngularJS 来了解所有细节，但希望这将帮助您完成声明现有库的过程，这比仅仅给您一个 AngularJS 定义更有用。

我根据您的使用情况创建了这些定义。重要的一点是...

1.  Angular 定义描述了您可以期望在 Angular 类的实例上调用的函数。

2.  RouteProvider 定义描述了您可以期望在 RouteProvider 类的实例上调用的函数

3.  然后我声明`angular`并`$routeProvider`告诉编译器它们是前面步骤中定义的类的实例。

免责声明：因为我不知道您示例中的参数代表什么，所以我使用了类似的名称，`param1`但应该更新这些名称以反映实际预期的内容，例如`filePath: string`- 或实际上是什么。

这是示例：

```
// I don't know what the param names should be, so they
// need to be changed to sensible names
declare class Angular {
    module (param1: string, param2: any[]) : Angular;
    config(param1: any[]) : Angular;
}

declare class RouteProvider {
    when(param1: string, param2: any) : RouteProvider;
    otherwise(param1: any) : RouteProvider;
}

declare var angular: Angular;
declare var $routeProvider: RouteProvider;

// These are just because I don't know where you define them...
declare var PhoneDetailCtrl: any;
declare var PhoneListCtrl: any;

function myFunction ($routeProvider: RouteProvider) {
    $routeProvider.
    when('/phones', {templateUrl: 'partials/phone-list.html',   controller: PhoneListCtrl}).
    when('/phones/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
    otherwise({redirectTo: '/phones' });
}

angular
    .module('phonecat', [])
    .config(['$routeProvider', myFunction]); 
```

# html5-video - kineticjs如何播放视频

> ID：13397655
> 
> 赞同：3
> 
> 时间：2012-11-15T12:35:39.380
> 
> 标签：html5-video, kineticjs

我需要将视频添加到舞台，然后使用 kineticjs 通过鼠标单击播放。

我为此搜索了很多，但没有找到任何工作代码

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:29:34.450

使用适当的标签将 HTML5`<video>`标签添加到您的 DOM `<source>`。将视频元素分配给一个变量。为您的视频创建一个`Kinetic.Image`播放。然后通过单击某个对象（可能是图像，也可能是您放置在舞台上的“播放”按钮）来播放视频，并使用以下函数将视频绘制到图像上。为获得最佳效果，请将视频完全放置在屏幕外以隐藏视频。图像可以是任意大小，但为防止失真，图像应与视频具有相同的纵横比。

```
$('body').append('<div id="video' + vid + '" class="offscreen"></div>');
var vidobj = '<video width="' + vw + '" height="' + vh + ' preload="auto"><source src="' + vsrc + '" type="video/mp4"></source></video>';
$('#video' + vid).html(vidobj);
var video = $('#video' + vid + ' > video').get(0);
var img = new Kinetic.Image({name : 'video', x : vx, y : vy, width : vw, height : vh, image : video});
layer.add(img);
video.play();
setVideo(video,img);

function setVideo(v,i) {
    if (!v.paused && !v.ended) {
        i.setImage(v);
        cvsObj.modal.draw();
        setTimeout(setVideo,20,v,i);
    }
} 
```

v = 您的视频，i = 图像对象。

编辑显示 HTML5 视频标签和 Kinetic.Image() 的创建。变量：vid = 视频 id（唯一），vw = 视频宽度，vh = 视频高度，vx = 视频 x 坐标（用于画布），vy = 视频 y 坐标，vsrc = 视频源（文件路径）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:51:48.383

为什么视频必须在舞台上？您不能在舞台顶部放置一个 HTML5 视频元素吗？

# javascript - 勾选复选框然后提交然后弹出窗口

> ID：13397658
> 
> 赞同：3
> 
> 时间：2012-11-15T12:35:48.360
> 
> 标签：javascript, html, checkbox, popupwindow

如果有人可以帮助我找到解决一个问题的方法，我将不胜感激，可能我需要非常简单的东西，但我不知道如何将它放在一起，所以我需要 - 包含勾选框的部分，然后按钮提交，但是如果您不勾选复选框并按下按钮，则会出现显示“您必须做...”的窗口，

**我已经做到了，但我需要这个**

但是，如果您勾选并按下按钮，应该会顺利出现仅包含文本信息的弹出窗口！我不知道怎么弄，这是带有复选框和按钮的部分

```
 <form name="form" method="post" action="#" onSubmit="return checkme();">
    <input type="checkbox" name="agree" value="agree_terms" class="terms">
    &nbsp;I&acute;ve read terms and conditions and I&acute;m ready to shop
    <input type="submit" name="submit" value="" class="submit">
    </form> 
```

这是javascript

```
 function checkme() {
        missinginfo = "";
        if (!document.form.agree.checked) {
            missinginfo += "You must agree to the Terms and Conditions";
        }
        if (missinginfo != "") {
            missinginfo ="" +
            "\n" +
            missinginfo + "" +
            "\n Please tick the box and try again.";
            alert(missinginfo);
            return false;
        }
        else {
            return true;
        }
    } 
```

我尝试了不同的方式

```
 <body>
    <title>LIGHTBOX EXAMPLE</title>
    <style>
    .black_overlay{
    display: none;
    position: absolute;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 100%;
    background-color: black;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=80);
    }
    .white_content {
    display: none;
    position: absolute;
    top: 25%;
    left: 25%;
    width: 50%;
    height: 50%;
    padding: 16px;
    border: 16px solid orange;
    background-color: white;
    z-index:1002;
    overflow: auto;
    }
    </style>
    </head>
    <body>

    <p>This is the main content. To display a lightbox click <a href = "javascript:void(0)"
    onclick = "document.getElementById('light').style.display='block';        document.getElementById('fade').style.display='block'">here</a></p>

    <div id="light" class="white_content">This is the lightbox content. <a href =                 "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';                document.getElementById('fade').style.display='none'">Close</a></div>
    <div id="fade" class="black_overlay"></div>
    </body>
    </html> 
```

但是，当我勾选背景上的复选框时，会出现带有内容的窗口，但我需要只有在我勾选该框并按下按钮后才会出现弹出窗口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:48:15.783

“如果你勾选并按下按钮，应该会顺利出现只有文本信息的弹出窗口” - 你几乎做到了。只需将警报添加到第二个分支。试试这个代码：

```
<!DOCTYPE html>
<html>
  <!-- [[[ head -->

  <head>
    <title>element</title>
<script type="text/javascript">
  function checkme() {
        if (!document.form.agree.checked) {
            missinginfo = "You must agree to the Terms and Conditions\n Please tick the box and try again.";
            alert(missinginfo);
            return false;
        }
        else {
            alert("Text information");
            return true;
        }
    }
</script>
  </head>
  <!-- ]]] -->

  <body>
    <form name="form" method="post" action="#" onSubmit="return checkme();">
      <input type="checkbox" name="agree" id="agree" value="agree_terms" class="terms">
      <label for="agree">&nbsp;I&acute;ve read terms and conditions and I&acute;m ready to shop</label>
      <input type="submit" name="submit" value="Submit" class="submit">
    </form>
  </body>
</html> 
```

# c#-4.0 - 从 Resharper 4.0 键盘绑定切换到 5.0 键盘绑定

> ID：13397661
> 
> 赞同：2
> 
> 时间：2012-11-15T12:35:56.363
> 
> 标签：c#-4.0, resharper

我找到了两个用于重塑快捷方式的备忘单：

4.0 默认值 [http://www.jetbrains.com/resharper/docs/ReSharper40DefaultKeymap2.pdf](http://www.jetbrains.com/resharper/docs/ReSharper40DefaultKeymap2.pdf)

5.0 默认值 [http://www.jetbrains.com/resharper/docs/ReSharper50DefaultKeymap_VS_scheme.pdf](http://www.jetbrains.com/resharper/docs/ReSharper50DefaultKeymap_VS_scheme.pdf)

我有 reshaper 7.1。安装在我的机器上。默认情况下，我的 resharper 似乎使用的是 4.0 快捷方式。请让我知道我该怎么做才能确保 resharper 在我的机器上使用 5.0 快捷方式方案。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:31:43.627

你有没有尝试过：

> Resharper > 选项 > Visual Studio 集成 > [确保选择了“Visual Studio”键盘方案] > 单击“应用方案”

# vb.net - 无法通过 vb.net 应用程序运行 Exchange Powershell

> ID：13397664
> 
> 赞同：2
> 
> 时间：2012-11-15T12:36:08.593
> 
> 标签：vb.net, powershell, exchange-server

所以我绕着圈子试图让这个工作，我已经尝试了两天，我就是想不通。

我有以下 vb 函数，它需要一个创建的 powershell 脚本，并且应该在 powershell 中运行它。一切正常，直到调用命令管道为止。此时，没有命令运行。

如您所见，我尝试将 Microsoft.Exchange.Management.PowerShell.E2010 管理单元添加到运行空间，它根本不喜欢这样说明管理单元不存在（确实存在），并且同样，当我运行如图所示的代码时，没有任何命令被识别为有效。我什至添加了特定命令“Add-PSSnapin”来尝试加载任何 Exchange 管理单元，但它指出“Add-PSSnapin”未被识别为有效命令。

如果我在调用命令之前暂停程序，我可以以正确的格式查看管道中的每个命令。如果我将管道中的命令文本直接复制并粘贴到 powershell 窗口中，它运行良好。

我的代码如下，欢迎提出任何建议。

编辑：我也尝试添加“Add-PSSnapin *Ex* ”行（Ex 的每一侧都有一个星号 - 我无法弄清楚这个格式，抱歉）

尝试加载 Exchange PS 管理单元作为脚本运行的第一件事（反对在运行空间中设置它），但没有运气

```
Private Function scriptRunner(ByVal scripttorun As String) As String

    Dim initial As InitialSessionState = InitialSessionState.CreateDefault()
    Dim result As String = ""
    Dim lineFromScript As String = ""
    Dim reader As New StreamReader(tempScript)

    Dim rsConfig As RunspaceConfiguration = RunspaceConfiguration.Create()
    Dim snapInException As New PSSnapInException

    Dim strUserName As String = "DOMAIN\USER"
    Dim strPassword As String = "PASSWORD"
    Dim SecuredPSWD As New System.Security.SecureString()
    For Each character As Char In strPassword
        SecuredPSWD.AppendChar(character)
    Next

    Dim wsmConnectionInfo As WSManConnectionInfo
    Dim strSystemURI As String = "http://SERVER.DOMAIN/powershell?serializationLevel=Full"
    Dim strShellURI As String = "http://schemas.microsoft.com/powershell/Microsoft.Exchange"
    Dim powerShellCredentials As PSCredential = New PSCredential(strUserName, SecuredPSWD)
    wsmConnectionInfo = New WSManConnectionInfo(New Uri(strSystemURI), strShellURI, powerShellCredentials)
    Dim runspace As Runspace = RunspaceFactory.CreateRunspace(wsmConnectionInfo)
    Runspace.Open()
    ' runspace.RunspaceConfiguration.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.E2010", snapInException)

    Dim pipeLine As Pipeline = runspace.CreatePipeline()

    Dim command As Command = New Command("")
    ' TEST >> pipeLine.Commands.Add("Add-PSSnapin *Ex*")
    Do While reader.Peek() <> -1
        lineFromScript = Nothing
        lineFromScript = reader.ReadLine()
        pipeLine.Commands.Add(lineFromScript)
        'command.Parameters.Add(lineFromScript)
        'pipeLine.Commands.Add(command)

    Loop

    '' Run the contents of the pipeline
    Dim psObjCollection As Collection(Of PSObject) = pipeLine.Invoke()

    runspace.Close()
    runspace.Dispose()

    Return ""
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:33:16.963

我最终解决了这个问题，而不是修复它。

我将脚本代码移动到 vb.net 应用程序中，并将每一行写入一个文件，即

```
 writer.WriteLine("Add-PSSnapin *Ex*") 
```

然后我通过 PowerShell 将脚本作为应用程序加载；

```
 Dim exeStartInfo As System.Diagnostics.ProcessStartInfo
        Dim exeStart As New System.Diagnostics.Process

        exeStartInfo = New System.Diagnostics.ProcessStartInfo("C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe")
        exeStartInfo.Arguments = ("-command work\scriptbuilder.ps1")
        exeStartInfo.WorkingDirectory = "C:\ExchangeManager\"
        exeStartInfo.UseShellExecute = False
        exeStart.StartInfo = exeStartInfo
        exeStart.Start()
        exeStart.Close() 
```

不理想，但它完成了工作。

# photoshop-script - javascript中的Photoshop UI单选按钮

> ID：13397667
> 
> 赞同：3
> 
> 时间：2012-11-15T12:36:30.743
> 
> 标签：photoshop-script, adobe-scriptui

实现单选按钮时遇到问题。我知道 CS2 中的单选按钮可能会出现问题，但我不确定我哪里出错了。我怀疑我的括号或逗号放错了位置；但看不到它。谢谢你。

```
var dlg =
"dialog {text:'Script Interface',bounds:[100,100,300,260]," +
"info: Group { orientation: 'column', alignChildren: 'center'," + 
"radiobutton0:RadioButton {bounds:[50,30,150,40] , text:'layerName0', alignment: 'left' }," +
"radiobutton1:RadioButton {bounds:[50,50,150,90] , text:'layerName1', alignment: 'left'  }}" +
"cancelBTN:Button{bounds:[110,130,190,150] , text:'Cancel' },"+
"processBTN:Button{bounds:[10,130,90,150] , text:'Ok' }}";
var win = new Window(dlg,"radio buttons"); 
win.radiobutton0.value = true;
win.center(); 
win.show(); 
```

另一件事：有没有更好的方法来编写 UI 元素，因为这种格式相当难看。

这是有效的基本代码。var dialogBox =“对话框{方向：'列'，alignChildren：'中心'，\ info：组{方向：'列'，alignChildren：'中心'，\ rbtn1：RadioButton {文本：'单选按钮1'，对齐： 'left'}, \ rbtn2: RadioButton { text: 'Radio Button 2', align: 'left'}, }, }, \ } }";

```
win = new Window (dialogBox);
win.center(); 
win.show(); 
```

我认为单选按钮切换由第 3 行控制，因为注释掉它会阻止单选按钮正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T15:51:10.060

当我运行代码时，它在这一行上抛出了一个错误`win.radiobutton0.value = true;`Object is undefined。这是因为对话框结构按钮的方式是`info`窗口内组的一部分。该行应为

```
win.info.radiobutton0.value = true; 
```

这应该在最初切换 radiobutton0。

如果您不想要，您不必使用资源字符串来制作对话框。可以通过创建对窗口对象（或面板或面板）的引用并使用`.add()`

例如：

```
var w = new Window ("dialog");
w.alignChildren = "left";
var radio1 = w.add ("radiobutton", undefined, "Radio Button 1");
var radio2 = w.add ("radiobutton", undefined, "Radio Button 2");
radio1.value = true;
w.show (); 
```

[这是我找到的关于 ScriptUI 的最详尽的参考资料。](http://www.kahrel.plus.com/indesign/scriptui-2-0.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:55:19.057

这是一个更好的附加版本的对话框，其中单选按钮可以按我的意愿工作。

```
var w = new Window ("dialog");
w.alignChildren = "left";
var myButtonGroup = w.add ("group");
myButtonGroup.orientation = "column";
myButtonGroup.alignment = "left";
var radio1 = myButtonGroup.add ("radiobutton", undefined, "Radio Button 1");
var radio2 = myButtonGroup.add ("radiobutton", undefined, "Radio Button 2");
myButtonGroup.add ("button", undefined, "OK");
myButtonGroup.add ("button", undefined, "Cancel");
radio1.value = true;
w.center(); 
// w.show ();

if (w.show() == 1)
{
    alert("You picked " + youSelected(myButtonGroup))
}

function youSelected(rButtons)
{
    if (radio1.value == true)
    // radio1 selected
    return radio1.text
    else
    // radio2 selected
    return radio2.text
} 
```

# video - AVS 视频解码器 DirectShow 过滤器或 MFT

> ID：13397672
> 
> 赞同：0
> 
> 时间：2012-11-15T12:37:05.500
> 
> 标签：video, directshow, ms-media-foundation, avs

有人知道 AVS 格式的视频解码器 DS 过滤器或媒体基础转换吗？
我试图在网上搜索它，但找不到...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:41:02.410

以前从未听说过这个编解码器。听起来不错。正如[这个编解码器的 wiki 页面](http://en.wikipedia.org/wiki/Audio_Video_Standard)所说，libavcodec 和 ffmpeg 包含一个解码器。因为这些是 ffdshow 和 lavfilters 的基础，也许很快就会有一个实现。我能找到的当前唯一的 directshow 解码器是这个：[AVSShow](http://sourceforge.net/projects/avsdshow/)。我不知道这是否有效，还没有测试过。

还有一个[Decoder SDK](http://www.avs.org.cn/fruits/en/softList.asp)，但我无法阅读中文下载它。有了一点经验，有人可以用这个实现解码器（过滤器/DMO/MFT）。

# c# - 选定项目更改时如何从列表框中检索所有数据

> ID：13397676
> 
> 赞同：2
> 
> 时间：2012-11-15T12:37:16.140
> 
> 标签：c#, listbox

我将数据表作为数据源提供给 Lisbox。表格字段是 ID、主题、文本，ID 是唯一字段（PK）。但主题显示为 DisplayMember。

这是我的数据源提供代码：

```
lbTexts.DataSource = mDataSet.Tables["Story"];
lbTexts.DisplayMember = "Subject"; 
```

我想知道用户选择了哪些行以及唯一值是什么。我发现它有 10 行代码。但我希望有一种简单的方法可以找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:10:35.923

如果使用 ValueMember 属性并将其设置为 Id，则可以使用 SelectedValue 参数而不需要整个数据集。如果列表中的选定索引与数据中的索引不匹配，您还可以保证不会出现处理错误。

```
lbTexts.ValueMember = "Id";

// Later
int selectedId = Int32.Parse(lbTexts.SelectedValue); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:42:04.063

尝试这个，

```
string value = lbTexts.SelectedItem.Value; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T12:40:03.647

用于[`SelectedItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.selecteditem%28v=vs.71%29.aspx)获取当前选中项，[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue%28v=VS.95%29.aspx)用于获取值。

**selectedItem 示例**：

```
String value = lbTexts.SelectedItem.Value; 
```

**selectedValue 示例：**

```
String txt = lbTexts.SelectedValue.ToString(); 
```

# tinymce - 单击或更改光标位置时如何在 TinyMCE 中返回光标的范围或位置？

> ID：13397678
> 
> 赞同：1
> 
> 时间：2012-11-15T12:37:28.317
> 
> 标签：tinymce, onfocus

当 TinyMCE 编辑器聚焦或光标位置发生变化时，如何获取光标的位置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:48:56.690

在焦点的情况下使用 tinymce [onActivate 事件](http://www.tinymce.com/wiki.php/API3%3aevent.tinymce.Editor.onActivate)。光标位置的改变是可能的，但检测起来很昂贵，因为如果光标仍然在前一个位置上，您必须检查每个键操作。

# php - Codeigniter 中的 AJAX 表单在有效 [半工作] 时响应错误

> ID：13397680
> 
> 赞同：0
> 
> 时间：2012-11-15T12:37:50.453
> 
> 标签：php, ajax, validation, codeigniter

从进一步的发展来看，我有一个 AJAX 和 CI 电子邮件表单，它可以在禁用 javascript（使用 Codeigniter 代码）的情况下完美运行，并且在使用 AJAX 时存在一些错误。

当缺少框并按提交时，它会弹出错误mmessage-great，但是当正确填写并提交时，即使正确并且我仍然在收件箱中收到电子邮件，它仍然会发布错误。这真的让我很烦因为它在我的 AJAX 代码中，我认为我的控制器中缺少一些东西。

另一个问题：在 AJAX 表单上，它发布了个人错误/成功消息——有没有办法回显 CI $success 和回显验证错误（）；在这方面他们是一样的吗？

代码是我到目前为止所拥有的：

要查看我的控制器，请点击此链接： [Codeigniter AJAX 电子邮件验证](https://stackoverflow.com/questions/13395228/codeigniter-ajax-email-validation)

看法

```
<h1>Contact</h1>
<div id="contact">
<?php
//This is loaded in the view as it wont be used in the other pages
$this->load->helper('form');

echo form_open('contact/send_email');

//success message if passed validation checks
echo '<div id="success">';
echo $success;
echo '</div>';

 // empty div for error messages (ajax)
echo '<div id="errors">';

// empty div for error messages (php)
if(validation_errors() != ""){
    echo '<h3>Please correct the following errors:</h3>'; 
    echo validation_errors();
}

echo '</div>';

echo form_label('Name: ', 'name');
    $data = array (
        'name' => 'name',
        'id' => 'name',
        'value' => set_value('name')
    );
echo form_input($data);

echo form_label('Email: ', 'email');
    $data = array (
        'name' => 'email',
        'id' => 'email',
        'value' =>set_value('email')
    );
echo form_input($data);

echo form_label('Message: ', 'message');
    $data = array (
        'name' => 'message',
        'id' => 'message',
        'value' =>set_value('message')
    );
echo form_textarea($data);
?>

<br />

<?php
echo form_submit('submit', 'Send');

echo form_close();
?> 
```

AJAX

```
<script type="text/javascript">
$(function() {
    $('form').submit(function() {

        // get the form values
        var form_data = {
            name: $('#name').val(),
            email: $('#email').val(),
            message: $('#message').val()
        };

        // send the form data to the controller
        $.ajax({
            url: "<?php echo site_url('contact/send_email'); ?>",
            type: "POST",
            data: $(form_data).serialize(),
            success: function(msg) {

            if(msg.validate)
                    {
                    $('form').prepend('<div id ="success">Success</div>');
                    $('#success').fadeOut(5000);
                    }else
                     $('form').prepend('<div id ="errors">Error</div>');
                     $('#errors').fadeOut(5000);
                }
            });
            // prevents from refreshing the page
            return false;   
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:58:41.737

在我看来这条线（在你的 javascript 中）

```
if(msg.validate) 
```

正在寻找一个对象，您的脚本实际上并未解析任何 JSON 或返回任何 JSON。

我在这里只能假设是一个好主意（在查看您的控制器之后）将检查`<div id="errors">`响应中是否有任何内容

然后在你的javascript中你需要做一些改变

```
success: function(msg) {
            if(msg.validate)
            {
               $('form').prepend('<div id ="success">Success</div>');
               $('#success').fadeOut(5000);
            }
            else
            {
               $('form').prepend('<div id ="errors">Error</div>');
               $('#errors').fadeOut(5000);
            }
}); 
```

会变成

```
success: function(msg) {
            $msg = $(msg);
            // check to see if the div with id="errors" contains a h3 tag
            if($msg.filter('#errors').find('h3').length < 1)
            {
               $('form').prepend('<div id ="success">Success</div>');
               $('#success').fadeOut(5000);
            }
            else
            {
               $('form').prepend('<div id ="errors">Error</div>');
               $('#errors').fadeOut(5000);
            }
}); 
```

注意：我已经把它写在袖口上，所以我没有实际测试过，但它应该为你指明正确的方向。

编辑为使用 id 选择器而不是类选择器（我的习惯）

# arrays - matlab：将char数组转换为字符串

> ID：13397681
> 
> 赞同：0
> 
> 时间：2012-11-15T12:37:54.360
> 
> 标签：arrays, string, matlab

我在 matlab 中实现了一个 bash 脚本，它返回一个包含所有输出（回声）的 char 数组。现在我想使用存储在数组中的数据来打开一个文件。不幸的是，我不知道如何将数组转换为字符串。以下代码有效：

```
[status, output] = system('./script.sh', '-echo');
filename = [ output(1) output(2) output(3) output(4) output(5) output (6) ]; 
```

但这不是很方便，并且不允许文件名的不同长度。有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:07:35.870

基本上，字符数组*是*字符串；无需转换它们。

```
filename = output 
```

应该做的伎俩。

# ruby-on-rails - 未定义的方法“distance_betwwen”geokit-rails

> ID：13397684
> 
> 赞同：0
> 
> 时间：2012-11-15T12:38:12.507
> 
> 标签：ruby-on-rails, google-maps, geokit

我在 rails 2.3.12 中遇到了 geokit-rails 插件的问题。我有一个名为 place 的简单模型，如下所示：

```
 class Place < ActiveRecord::Base <br>
       attr_accessible :lat, :long, :name <br>
       :acts_as_mappable
      end 
```

在我的控制器索引操作中：

 ````
def index
@places = Place.all 
@places.find_within(105, :origin => Place.last)
respond_to do |format| 
  format.html # index.html.erb 
  format.json { render :json => @places } 
end 
```` 

`end`

现在的问题是 thar\ti 无法访问任何 Mapplee 方法，例如：distance_between、find_within 等。它给出错误：**未定义的方法“find_within”**

.

我的完整跟踪：

```
 /home/nascenia/awlad/dtf/daytripfinder/app/controllers/attractions_controller.rb:70:in `search'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/base.rb:1333:in `send'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/base.rb:1333:in `perform_action_without_filters'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/filters.rb:617:in `call_filters'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activesupport-2.3.12/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activesupport-2.3.12/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/flash.rb:151:in `perform_action_without_newrelic_trace'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/newrelic_rpm-3.1.0/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:255:in `perform_action'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/newrelic_rpm-3.1.0/lib/new_relic/agent/method_tracer.rb:191:in `trace_execution_scoped'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/newrelic_rpm-3.1.0/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:248:in `perform_action'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/base.rb:532:in `send'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/base.rb:532:in `process_without_filters'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/filters.rb:606:in `sass_old_process'
/home/nascenia/awlad/dtf/daytripfinder/vendor/plugins/haml/lib/sass/plugin/rails.rb:20:in `process'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/base.rb:391:in `process'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/base.rb:386:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/routing/route_set.rb:438:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/dispatcher.rb:121:in `_call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/query_cache.rb:29:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/query_cache.rb:29:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/query_cache.rb:9:in `cache'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/query_cache.rb:28:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/query_cache.rb:29:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/query_cache.rb:9:in `cache'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/query_cache.rb:28:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/activerecord-2.3.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/newrelic_rpm-3.1.0/lib/new_relic/rack/browser_monitoring.rb:18:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/newrelic_rpm-3.1.0/lib/new_relic/rack/developer_mode.rb:24:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/string_coercion.rb:25:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/head.rb:9:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/methodoverride.rb:24:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/params_parser.rb:15:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/facebooker-1.0.75/lib/rack/facebook.rb:43:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/failsafe.rb:26:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/lock.rb:11:in `synchronize'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/lock.rb:11:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/dispatcher.rb:114:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/reloader.rb:34:in `run'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/actionpack-2.3.12/lib/action_controller/dispatcher.rb:108:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rails-2.3.12/lib/rails/rack/static.rb:31:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/urlmap.rb:47:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `each'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/urlmap.rb:41:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rails-2.3.12/lib/rails/rack/log_tailer.rb:17:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/content_length.rb:13:in `call'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/handler/webrick.rb:48:in `service'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rack-1.1.0/lib/rack/handler/webrick.rb:14:in `run'
/home/nascenia/.rvm/gems/ruby-1.8.7-p370@daytrip/gems/rails-2.3.12/lib/commands/server.rb:111
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:55:in `gem_original_require'
/home/nascenia/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:55:in `require'
/home/nascenia/awlad/dtf/daytripfinder/script/server:3
-e:1:in `load'
-e:1 
```

任何的想法 ...？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:55:37.807

你可以试试`Places.find_within(105, :origin => Place.last)`吗？看来这`find_within`是一个类方法。

# ios - 如何在 iOS 中沿圆圈移动视图控制器

> ID：13397689
> 
> 赞同：3
> 
> 时间：2012-11-15T12:38:45.423
> 
> 标签：ios, view, controller, geometry

我是新的 iOS 开发人员。我想在 2 个视图控制器之间创建过渡动画

我能怎么做 ？

这是我的代码：

```
int newScreenDegrees = _screenDegrees - 90;
[UIView transitionWithView:self.containerView
                  duration:0.65f
                   options:UIViewAnimationOptionCurveEaseInOut
                animations:^{
                    for(int i = 0; i < [self.screens count]; i++)
                    {
                        UIViewController *_screen = [self.screens objectAtIndex:i];

                        int curDeg = newScreenDegrees + i * SPACE_PER_SCREEN;
                        float curRad = convertDegreesToRadians(curDeg);

                        float newX = COORDINATES_CENTER_OF_CIRCLE_X + (CIRCLE_RADIUS * cos(curRad)) - (_screen.view.frame.size.width / 2) - 280;
                        float newY = COORDINATES_CENTER_OF_CIRCLE_Y + (CIRCLE_RADIUS * sin(curRad)) - (_screen.view.frame.size.height / 2);
                        // transform view
                        _screen.view.transform = transformMakeRotateTranslate(convertDegreesToRadians(curDeg + 90), newX, newY);

                    }
                }
                completion:^(BOOL finished){
                    _screenDegrees = newScreenDegrees;

                    // TODO: init content of current view and clear other views

                }];
_screenDegrees = newScreenDegrees; 
```

**问题是：**视图沿线而不是圆形移动。

谢谢

这是图片：http: [//i.stack.imgur.com/xVQb3.jpg](http://i.stack.imgur.com/xVQb3.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:46:08.583

您需要有多个循环并单独移动视图。将您移动的圆圈分成足够小的部分，看起来视图正在以圆形方式移动。

```
for(int i = 0; i < [self.screens count]; i++)
{                
    UIViewController *_screen = [self.screens objectAtIndex:i];
    int newScreenDegrees = i*90;
    int numSegs=30; //break into little chunks
    int segSize=3;//3 degrees
    for (int m=1;m<=numSegs;m++)
    {
         [UIView transitionWithView:self.containerView
              duration:0.65f
               options:UIViewAnimationOptionCurveEaseInOut
            animations:^{

                    int curDeg = newScreenDegrees+m*segSize;
                    float curRad = convertDegreesToRadians(curDeg);

                    float newX = COORDINATES_CENTER_OF_CIRCLE_X + (CIRCLE_RADIUS * cos(curRad)) - (_screen.view.frame.size.width / 2) - 280;
                    float newY = COORDINATES_CENTER_OF_CIRCLE_Y + (CIRCLE_RADIUS * sin(curRad)) - (_screen.view.frame.size.height / 2);
                    _screen.view.transform = transformMakeRotateTranslate(convertDegreesToRadians(curDeg), newX, newY);

            }
            completion:^(BOOL finished){
                _screenDegrees = newScreenDegrees;

                // TODO: init content of current view and clear other views

            }];
     }
} 
```

# forms - 如何从 nodejs/express 向浏览器发送成功状态？

> ID：13397691
> 
> 赞同：80
> 
> 时间：2012-11-15T12:38:48.570
> 
> 标签：forms, node.js, post, express

我在我的 nodeJS/Expressjs 服务器中编写了以下代码：

```
app.post('/settings', function(req, res){
    var myData = {
        a: req.param('a')
        ,b: req.param('b')
        ,c: req.param('c')
        ,d: req.param('d')
    }

    var outputFilename = 'config.json';

    fs.writeFile(outputFilename, JSON.stringify(myData, null, 4), function(err) {
        if(err) {
          console.log(err);
        } else {
          console.log("Config file as been overwriten");
        }
    }); 
}); 
```

这允许我获取提交的表单数据并将其写入 JSON 文件。

这完美地工作。但是客户端仍然处于某种发布状态并最终超时。所以我需要将某种成功状态或成功标头发送回客户端。

我该怎么做？

先感谢您！

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2015-02-18T20:57:15.753

**2015 年快速更新：**

改用这个：

```
res.sendStatus(200) 
```

这已被弃用：

```
res.send(200) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-15T14:12:28.073

只是想补充一点，您可以通过`res.json()`帮助程序发送 json。

```
res.json({ok:true}); // status 200 is default 
```

 ~~~~```
res.json(500, {error:"internal server error"}); // status 500 
```~~  ~~2015 年更新：

`res.json(status, obj)`已被弃用，取而代之的是`res.status(status).json(obj)`

```
res.status(500).json({error: "Internal server error"}); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-29T07:17:32.680

在快递 4 中，您应该这样做：

```
res.status(200).json({status:"ok"}) 
```

而不是弃用的：

```
res.json(200,{status:"ok"}) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-15T12:56:15.353

Jup，你需要回复一个答案，最简单的是

```
res.send(200); 
```

在`writeFile`.

200 是一个 HTTP 状态码，所以你甚至可以在失败的情况下改变它：

```
if (err) {
    res.send(500);
} else {
    res.send(200);
} 
```~~~~

# c - 在 c 应用程序中使用 ntfs-3g 挂载设备

> ID：13397692
> 
> 赞同：2
> 
> 时间：2012-11-15T12:38:55.580
> 
> 标签：c, linux, mount

在 C 应用程序中使用 ntfs-3g 驱动程序安装设备的好方法是什么？

为了挂载其他文件系统，我将使用[libmount](http://www.kernel.org/pub/linux/utils/util-linux/v2.21/libmount-docs/)，但如何处理 ntfs-3g？我没有找到 libntfs-3g 的任何文档。

是的，我可以使用 system() ，但它似乎不是很好的解决方案。

还有关于在安装之前检测设备文件系统的问题：虽然我要通过所有相关文件系统循环安装设备，直到它成功，但可能存在更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:00:00.523

检查 Linux 特定的 mount() 系统调用。

它允许您挂载，但您需要指定文件系统。

要检测文件系统类型，您可以从设备的开头读取一些数据，并使用 libmagic 来了解文件系统类型。函数 magic_buffer() 可以帮助你。我不确定你需要从设备读取多少字节，你可以做一些测试，但我认为 128 字节应该绰绰有余。

# python - 为什么在执行 python 脚本时会出现 No such file or directory 错误？

> ID：13397693
> 
> 赞同：2
> 
> 时间：2012-11-15T12:39:00.840
> 
> 标签：python, hadoop, hadoop-streaming

> **可能重复：**
> [ubuntu /usr/bin/env：python：没有这样的文件或目录](https://stackoverflow.com/questions/3655306/ubuntu-usr-bin-env-python-no-such-file-or-directory)

我是hadoop流的新学习者。我在学习 mapreduce 时遇到了问题。这是我的代码`mapper.py`：

```
#!/usr/bin/env python 

import sys

# input comes from STDIN (standard input)
for line in sys.stdin:
    # remove leading and trailing whitespace
    line = line.strip()
    # split the line into words
    words = line.split()
    # increase counters
    for word in words:
        # write the results to STDOUT (standard output);
        # what we output here will be the input for the
        # Reduce step, i.e. the input for reducer.py
        #
        # tab-delimited; the trivial word count is 1
        print '%s\t%s' % (word, 1) 
```

当我执行以下操作时：

```
hadoop@Chris-ubuntu:/home/test$ echo "I love China I love ieee I love python" | /home/test/mapper.py 
```

我得到了结果：

```
: No such file or directory 
```

但是，我确信该文件确实存在于该路径中，可以通过`ls`. 所以我只是想知道我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:41:38.667

默认情况下，Python 文件不可执行，因此您必须告诉 Python 解释器运行您的文件：

`echo "I love China I love ieee I love python" | python2 /home/test/mapper.py`

或者，您可以通过键入使您的文件可执行： `chmod +x mapper.py` 然后运行

`echo "I love China I love ieee I love python" | /home/test/mapper.py`

# jquery - Wikitable 背景出血

> ID：13397698
> 
> 赞同：6
> 
> 时间：2012-11-15T12:39:11.023
> 
> 标签：jquery, css, mediawiki

我正在尝试创建一个这样的表：

```
{| class="wikitable" style="background:#F00;"
|-
! colspan="3" | Title
|-  
! style="border-width:1px 0px; width:20px" | A
! style="border-width:1px 0px;" | [[A]]
! style="border-left-width:0px; width:20px" | A
|-
| colspan="3" | Text
|} 
```

但是，红色背景向右“流血”。即，在表格右边框的右侧，有一条垂直的红色条带。

使用开发人员工具仔细检查后，这是由于单元格的填充设置为 0.2em，并且（奇怪地）没有四舍五入为整数像素，填充为 2.54999 像素。然后浏览器将表格框呈现在右边框之外。

这可以通过单独为单元格提供基于 px 的填充来解决。但这会使代码复杂化，所以我正在寻找一个更简洁的解决方案。

* * *

编辑：还需要注意的是，“未舍入”行为是由“wikitable”类引起的。我尝试删除课程并且填充物是四舍五入的。

`.css()`EDIT2：进一步的实验表明，这很可能是因为 MediaWiki 使用 jQuery 的方法（或其他等价物，它不围绕基于 em 的测量值）设置 wikitables 的填充。任何想法如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-17T19:47:31.210

如果你使用`table { border-spacing: 0; }`，空白就消失了。在`border-spacing`最初设置为`2px`.

# ember.js - 余烬 {{action}} 不起作用

> ID：13397706
> 
> 赞同：1
> 
> 时间：2012-11-15T12:39:39.180
> 
> 标签：ember.js

我想要按钮在控制器中调用 removeAlbum 函数。但它什么也没做。当我单击按钮时，什么也没有发生，也没有错误......我应该怎么做才能解决这个问题？！

这是我的模板：

```
<script type="text/x-handlebars" data-template-name="albums">
  {{#if App.albumsController.total}}
    <div><h1>Количество альбомов: {{App.albumsController.total}}</h1></div>
    {{#each content in App.albumsController}}
      <div class='album'>
        <div class='image'>
          <a {{action showAlbum content href=true}}>
            <img {{bindAttr src="content.avatarUrl"}}>
          </a>
        </div>
        <div class='info'>
          <h2>
            <a {{action showAlbum content href=true}}>
              {{content.title}}
            </a>
          </h2>
          <div>{{content.description}}</div>
        </div>
        <div class='actions'>
          <div>
            <button {{action removeAlbum content target="App.albumsController"}}>Delete</button>
          </div>
        </div>
        <div class='clear'></div>
      </div>
    {{/each}}
  {{else}}
    <div><h1>Loading</h1></div>
  {{/if}}  
</script> 
```

这是我的控制器：

```
App.albumsController = Em.ArrayController.create({
  content: [],
  total: null,
  loadAlbums: function(){
    this.set('content', []);
    this.set('total', null);
    var self = this;
    $.post(App.connection.url, {method: 'albums.getAll', params: {user_id: App.connection.userId}}, function(response){
      self.set('total', response.albums.total);
      response.albums.album.forEach(function(item){
        var buf = App.AlbumInList.create({
          id: item.id,
          title: item.title,
          description: item.description,
          avatarUrl: item.thumbnail_video.thumbnails.thumbnail[1]._content        
        });
        self.pushObject(buf);
      });
    });
  },
  removeAlbum: function(x){
    console.log('remove it');
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:20:24.830

尝试将您的目标设置为控制器而不是 App.albumsController。应该解决问题。

```
<button {{action removeAlbum content target="controller"}}>Delete</button> 
```

# asp.net - QRCode.net（来自 CodePlex）总是用星号替换第一个字符？

> ID：13397708
> 
> 赞同：1
> 
> 时间：2012-11-15T12:39:48.397
> 
> 标签：asp.net, vb.net, qr-code

使用 QRCode.net 程序集为 URL 生成 QRCode 图像，我已经尝试了大多数可用的属性/选项，并且 URL 的第一个字符始终替换为星号 (*)。由于 QRCode 文本将成为 URL，这意味着某些 QRCode 阅读器应用程序无法将我的 QRCode 识别为有效 URL。现在，我用“”空格填充 URL，这样您至少会得到“*http://myapp.com”，而不是“*ttp://myapp.com”，但这总是会发生..

[CodePlex 上的 QRCode.Net](http://qrcodenet.codeplex.com "CodePlex 上的 QRCode.Net")

有没有人见过这个，或者知道哪个设置阻止它，我试过最多，这是我的代码：

```
Dim iee As New ImageEncoder()
        iee.AutoConfigurate = True
        iee.ECI = -1
        iee.Encoding = 4
        iee.Fnc1Mode = 0
        iee.ErrorCorrectionLevel = 0
        iee.Version = 1
        iee.ProcessTilde = False
        iee.MarginSize = 10
        iee.ModuleSize = 6
        iee.StructuredAppend = False
        iee.StructuredAppendCounter = 0
        iee.StructuredAppendIndex = 0
        iee.TextData = " http://myApp.com/?querystringdata=here")
        Dim image As Bitmap = iee.Encode2Image()
        Dim tempSitePath As String
        tempSitePath = HttpContext.Current.Server.MapPath(HttpContext.Current.Session("dirTempPath"))
        image.Save(tempSitePath + "loc_" + locid + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:45:44.120

这是他们的错误..最终使用了不同的库..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T15:25:24.460

我找到了 QRCode.net 的演示库。

[http://www.codeproject.com/Articles/258779/Just-launched-new-open-source-project-QrCode-Net-a](http://www.codeproject.com/Articles/258779/Just-launched-new-open-source-project-QrCode-Net-a)

这有可下载的源代码。我打开了解决方案，进行了一些更改以构建项目，并创建了没有星号 (*) 的代码。我相信演示代码比这篇文章更旧，但也许该库也已通过修复更新。

# android - Android：隐藏图像视图

> ID：13397709
> 
> 赞同：32
> 
> 时间：2012-11-15T12:39:52.923
> 
> 标签：android, android-imageview

我有一个 imageveiw 最初它应该处于隐藏模式，

```
<ImageView
    android:id="@+id/custom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|right"    
    android:src="@drawable/custom1" /> 
```

我创建了一个登录页面..每当我登录成功时，我都应该显示图像。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-15T12:45:14.270

试试这个

你的 xml

```
<ImageView
            android:id="@+id/custom"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|right"    
            android:src="@drawable/custom1" /> 
```

你可以像这样在xml上设置

```
android:visibility="visible" 
```

或者

```
android:visibility="invisible" 
```

或者

```
android:visibility="gone" 
```

Java程序

```
ImageView imgView = (ImageView)findViewById(R.id.custom); 
```

设置你`ImageView`这样

```
imgView .setVisibility(View.VISIBLE);

imgView .setVisibility(View.INVISIBLE);

imgView .setVisibility(View.GONE); 
```

`INVISIBLE`和之间的区别`GONE`。

`INVISIBLE`- 小部件将不可见，但将显示小部件的空间。

`GONE`- 空间和小部件都是不可见的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-10-30T14:48:17.200

**在java**中像这样设置Imageview的Visibility属性

 **```
imgView.setVisibility(View.VISIBLE);
imgView.setVisibility(View.INVISIBLE);
imgView.setVisibility(View.GONE); 
```

或者像这样在**XML**

```
android:visibility="visible"
android:visibility="invisible"
android:visibility="gone" 
```

或者像这样在**C#**

```
imgView.Visibility = ViewStates.Visible;
imgView.Visibility = ViewStates.Invisible;
imgView.Visibility = ViewStates.Gone; 
```

每个结果都是这样的

[![在此处输入图像描述](../Images/5f1797bddeb911f0f871017acfa84136.png)](https://i.stack.imgur.com/NL4Hq.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-15T12:43:35.787

最初将图像视图设置为隐藏模式，尝试

```
imageview.setVisibility(View.INVISIBLE); 
```

登录成功后，将其可见性更改为可见，

```
imageview.setVisibility(View.VISIBLE); 
```**

# php - 限制嵌套对象深度的 var_dump 实现

> ID：13397710
> 
> 赞同：2
> 
> 时间：2012-11-15T12:39:53.857
> 
> 标签：php, debugging, var-dump

在上一个问题中，我要求[var_dump 的替代实现，](https://stackoverflow.com/questions/13396076/alternative-var-dump-for-php-that-allows-limiting-depth-of-nested-arrays)它允许限制嵌套数组深度的输出。

[阿布舍克](https://stackoverflow.com/users/1398531/abhishek-bhatia)回答了这个[问题](https://stackoverflow.com/a/13396513/29246)。但该函数仅适用于嵌套数组。它不适用于对象图。

实现如何`var_dump`在对象图上工作并限制嵌套对象深度的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:45:40.767

到目前为止，最简单的解决方案是安装[xdebug](http://xdebug.org)扩展（无论如何这是个好主意）。它覆盖`var_dump`了一个将输出限制为可[配置深度](http://xdebug.org/docs/display)的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:09:14.927

查看`var_dump`php.net 上功能信息下的一些评论 - [http://php.net/manual/en/function.var-dump.php](http://php.net/manual/en/function.var-dump.php) - 它们提供深度级别控制`var_dump`以及其他一些好东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:47:50.090

尝试 dump_r.php (php 5.3+)。

您可以指定希望转储展开的深度，并且以后可以交互展开更多。但它实际上不会限制实际转储的深度，因此如果出于性能原因需要它，它可能对该部门没有帮助。另外，它是 HTML 格式的，将来我可能会添加一个纯文本转储选项。

演示： http: [//o-0.me/dump_r/](http://o-0.me/dump_r/)
回购：[https ://github.com/leeoniya/dump_r.php](https://github.com/leeoniya/dump_r.php)

也可以通过 Composer 安装
*require: "leoniya/dump-r": "dev-master"*
[https://packagist.org/packages/leoniya/dump-r](https://packagist.org/packages/leeoniya/dump-r)

# php - 链接到具有动态名称的文件

> ID：13397711
> 
> 赞同：0
> 
> 时间：2012-11-15T12:39:53.733
> 
> 标签：php, mysql, file-upload, anchor

我正在尝试在 php 中创建一个工作应用程序管理器。申请人在网络表格上填写他们的详细信息并按提交，然后将其添加到 mysql 数据库中。表单的一部分是一个上传文件框，用于添加求职信，这将接受 doc、docx、pdf、rtf、txt 格式的文件。上传文件后，它会重命名为名为“applicationID”的隐藏字段，因此名为 Mycovering letter.doc 的文件将变为类似于 124356456.doc 的内容。

我遇到的问题是在我的应用程序管理器中，我可以使用 while($row = mysql_fetch_array($result)) 然后提取申请人姓名等，但我不确定如何处理这些文件。如果文件刚刚命名为 124356456，我可以使用应用程序 ID 链接到该文件，但是因为扩展名可能是 .doc、docx、pdf 等的组合，我不知道如何链接到它。理想情况下，它会是这样的：

```
<a href="/pathtofile/124356456.*">View Covering letter</a> 
```

* * *

## 所以我要问的是，当我不知道扩展名是什么但我知道文件名是什么时，我可以链接到一个文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:50:13.887

您必须在上传期间将扩展名存储在数据库中。

**如何获得扩展名：**

```
pathinfo($filename, PATHINFO_EXTENSION); 
```

另一种解决方案是编写一个函数来检查文件是否存在并返回正确的扩展名。

```
<a href="<?php echo getFile('/pathtofile/124356456'); ?>">View Covering letter</a>

<?php
    function getFile($path) {
        if(file_exists($path.".doc"))
            return $path.".doc";
        else if(file_exists($path.".docx"))
            return $path.".docx";
        else if(file_exists($path.".pdf"))
            return $path.".pdf";
        else if(file_exists($path.".rtf"))
            return $path.".rtf";
        else if(file_exists($path.".txt"))
            return $path.".txt";
    }
?> 
```

# php - 使用 Kohana Query Builder 构建查询

> ID：13397715
> 
> 赞同：0
> 
> 时间：2012-11-15T12:40:10.253
> 
> 标签：php, mysql, kohana, kohana-3, query-builder

如果我得到这个：

```
 $result = 
    DB::select(
    'orders.date_created'
    )
    ->from('orders') 
    ->execute()->as_array(); 
```

正常情况下，显示所有订单 date_created。现在我可以按用户过滤，这样做 ?user_id=112

这将使我有这个：

```
 if(isset($get['user_id']))
    {
        $result = 
        DB::select(
        'orders.date_created'
        )
        ->from('orders') 
                    ->where('user_id', '=', $get['user_id'])
        ->execute()->as_array();
    }else{
        $result = 
        DB::select(
        'orders.date_created'
        )
        ->from('orders')
        ->execute()->as_array();
    } 
```

虽然这对我来说没有问题，但是当我有 4 个参数要从（4 个 where 语句）中过滤掉时，这将成为非常丑陋的代码，例如 ?user_id=112&quantity=2&...

我可以以某种方式制作一个内联 if/action 语句，如果 $get['user_id'] 中没有任何内容，它将获取所有 user_ids 吗？

所以我最终只能得到这个：

```
 $result = 
        DB::select(
        'orders.date_created'
        )
        ->from('orders') 
                    ->where('user_id', '=', (isset($get['user_id']) ? $get['user_id'] : 'GRAB ALL!'))
        ->execute()->as_array(); 
```

还是有另一种更好的方法来做到这一点？

如果有一些 ->if()->where()->exitif().. （只是对它如何工作的一些想象），尝试查看 Kohana 文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:50:01.197

您可以在执行前修改 Query 对象：

```
$query = DB::select()->from(...);
if (isset($get['user_id'])) {
    $query->where('user_id', '=', intval($get['user_id']));
}
if (isset($get['quantity'])) {
    $query->where('quantity', '=', floatval($get['quantity']));
}
$result = $query->execute()->as_array(); 
```

# python - 如果变量出现多次，如何获取请求值？

> ID：13397716
> 
> 赞同：1
> 
> 时间：2012-11-15T12:40:16.897
> 
> 标签：python, request, pyramid

例如，URL 请求是这样的：

[http://any-server.org/cgi-bin/test.cgi?a=1&b=2&b=20&b=200](http://any-server.org/cgi-bin/test.cgi?a=1&b=2&b=20&b=200)

`[2,20,200]`是否可以在 CGI 或任何 Web 框架中获取 b 的三个值作为列表？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T15:16:05.823

使用[`.getall()`](http://pyramid.readthedocs.org/en/latest/api/interfaces.html#pyramid.interfaces.IMultiDict)：

```
b = request.GET.getall('b')  # ['2', '20', '200'] 
```

`.getall()`是`MultiDict`类的方法；的各种参数，`request`包括和是实例。项目[文档](http://docs.webob.org/en/latest/reference.html#query-post-variables)（Pyramid 请求所基于的）可以提供更多信息。[`.GET`](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/request.html#pyramid.request.Request.GET)[`.POST`](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/request.html#pyramid.request.Request.POST)`.params``MultiDict`[`WebOb`](http://docs.webob.org/en/latest/reference.html#query-post-variables)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T12:47:57.207

您使用哪种语言？

以上将在 .NET 中按您的预期工作，我希望在 php 和其他语言中类似。

// 根据反馈扩展答案

ASP.NET 似乎将这些值分组到一个逗号分隔的列表中，但这样做的真正方法应该是`file.html?a=1&b[]=1&b[]=2&b[]3`. 然后，这应该由服务器转换为值数组。

您也可以使用`file.html?a=1&b=1,2,3`. 这将在服务器上转换为字符串，并且可以用逗号拆分以获得数组。

# ios - 使用正则表达式从字符串中查找和提取子字符串

> ID：13397720
> 
> 赞同：1
> 
> 时间：2012-11-15T12:40:47.867
> 
> 标签：ios, regex

假设我有以下字符串：

> bla bla bla bla 我不知道该写什么 START **name 1** END 更多 bla bla bla bla 我不知道该写什么 START **name 2** END 更多 bla bla bla bla 我不知道该写什么 START **name 3** END

我想提取以下数组：

> 名称 1
> 
> 名称 2
> 
> 名称 3

使用 iOS SDK 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:48:29.560

尝试这个：

```
NSArray *names = [yourString componentsSeparatedByString:@"START"];

NSArray *namesArray = [NSArray array];

for (int i = 1; i < [names count]; i++) {
    NSString *thisLine = [names objectAtIndex:i];
    NSString *name = [thisLine substringToIndex:[thisLine rangeOfString:@"END"].location];

    [namesArray addObject:name];
    NSLog(@"Your name: %@", name);
} 
```

刚刚注意到您想要使用正则表达式...这当然不是，但也许它有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:22:47.200

利用

```
NSRegularExpression regularExpressionWithPattern:@"(?<=START ).*?(?= END)" 
```

另请参阅[使用正则表达式查找/替换 NSString 中的子字符串](https://stackoverflow.com/questions/9661690/user-regular-expression-to-find-replace-substring-in-nsstring)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:23:50.193

要使用正则表达式执行此操作：

```
(?<=START\s)(.+?)(?=\sEND) 
```

# shell - Unix命令返回所有以report开头的文件，除了带有日志扩展名的文件

> ID：13397723
> 
> 赞同：-5
> 
> 时间：2012-11-15T12:41:00.953
> 
> 标签：shell, unix, command

Unix 命令返回所有以单词 report 开头的文件，但具有日志扩展名的文件除外。结果应该给出诸如report.txt而不是report.log文件之类的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:48:05.210

您可以为此使用[find ：](http://linux.die.net/man/1/find)

```
$ find . -type f -name report\* ! -name \*.log 
```

# jquery - 使用 jQuery 将多个参数传递给 ASP.NET Web API

> ID：13397728
> 
> 赞同：4
> 
> 时间：2012-11-15T12:41:19.160
> 
> 标签：jquery, asp.net-mvc

将表单变量发布到 ASP.NET MVC 4 Web API 中 Web API 方法的简单参数

```
$.ajax({
    url: 'api/products',
    type: 'POST',
    data: { Id: 2012, Name: 'test', Category: 'My Category', Price: 99.5 },
    dataType: 'json',
    success: function (data) {
        alert(data);
    }
}); 
```

但它不工作如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-23T19:00:16.663

使用下面的代码它将起作用。我所做的唯一更改是在`data`我正在做的参数中`JSON.stringify()`，几个月前面临同样的问题。基本上它需要一个可以解析为的字符串`JSON`。

```
$.ajax({
    url: 'api/products',
    type: 'POST',
    data: JSON.stringify({ Id: 2012, Name: 'test', Category: 'My Category', Price: 99.5 }),
    dataType: 'json',
    success: function (data) {
        alert(data);
    }
}); 
```

# google-maps - 用于 Coldfusion 的 Google 地图商店定位器

> ID：13397733
> 
> 赞同：-1
> 
> 时间：2012-11-15T12:41:36.903
> 
> 标签：google-maps, coldfusion, coldfusion-9

谷歌地图商店定位器

[https://code.google.com/p/storelocator/](https://code.google.com/p/storelocator/)

示例：1）[https://storelocator.googlecode.com/git/examples/panel.html](https://storelocator.googlecode.com/git/examples/panel.html)

2) [https://storelocator.googlecode.com/git/examples/dynamic.html](https://storelocator.googlecode.com/git/examples/dynamic.html)

我想从 cfquery 动态创建存储定位器

是否可以在coldfusion中创建存储定位器？

谁能帮我吗？

```
<cfquery name="qCompany" datasource="#application.dsn#">
    select  
    name, 
    addrress, 
    city, 
    state, 
    zip, 
    country, 
    phone, 
    latitude,
    longitude
    from    wcountry_company    
</cfquery> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:37:52.253

我举了一个我使用的商店定位器的例子。

首先获得一个 googlemapkey（不确定他们是否仍然让您注册他们）然后我建议制作一个表格，他们可以在其中按州查询，然后按下面的州过滤您的查询...

此外，如果您想添加邮政编码查找，这里有一个很好的示例，其中包含用于数据的示例数据库。

[http://jonathonwallen.blogspot.com/2011/08/zip-code-radius-search-store-locator-in.html](http://jonathonwallen.blogspot.com/2011/08/zip-code-radius-search-store-locator-in.html)

网上有一些，但这似乎被整齐地包装好使用。

```
<cfajaximport params="#{googlemapkey='*KEY HERE*'}#">
</cfif>

<cfquery name="qCompany" datasource="#application.dsn#">
    select  
    name, 
    addrress, 
    city, 
    state, 
    zip, 
    country, 
    phone, 
    latitude,
    longitude
    from    wcountry_company    
</cfquery>

<cfmap name="gmap02" 
    centeraddress="#form.zipcode#" <!--- or state if your querying by state --->
    doubleclickzoom="true" 
    scrollwheelzoom="true" 
    showscale="false" 
    tip="My Map"
    width="1000"
    height="800"
    zoomlevel="15"> 

    <cfoutput query="qCompany">
    <cfmapitem  address="#address# #city#, #state# #zip#" name="gmap02" tip="#name# #address# #city#, #state# #zip#" markerwindowcontent="#address#<br>#city#<br>#state#<br> #zip#"  />
    </cfoutput>

 </cfmap> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:58:56.343

Storelocator API 在 javascript 中，因此您必须`<script>`使用它，然后您可以在循环中使用您的查询构建对象：

```
<script>
    <cfoutput query="qCompany">
        Building javascript objects
    </cfouput>
</script> 
```

但我对 storelocator 的了解不足以帮助您使用 javascript 对象。

# shell - 编译模式下的 ANSI 着色

> ID：13397737
> 
> 赞同：46
> 
> 时间：2012-11-15T12:41:46.310
> 
> 标签：shell, emacs, text-coloring, ansi-escape, compilationmode

有没有人在编译模式 Emacs 中添加了对 ansi-color 的支持？如果是这样，颜色编写程序必须检查什么属性/属性以确保其活动终端支持 ANSI 转义着色。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-15T23:23:58.430

已经有一个将颜色应用于 comint 缓冲区的功能。您只需要在编译缓冲区上启用它：

```
(require 'ansi-color)
(defun colorize-compilation-buffer ()
  (toggle-read-only)
  (ansi-color-apply-on-region compilation-filter-start (point))
  (toggle-read-only))
(add-hook 'compilation-filter-hook 'colorize-compilation-buffer) 
```

颜色编写程序应检查`TERM`环境变量和 terminfo 数据库以检查终端是否支持颜色。在实践中，许多程序忽略了这一点并依赖于用户设置。Emacs 会将编译终端类型`dumb`默认设置为，但可以通过设置`compilation-environment`变量来覆盖。

*更新*：请注意，在 Emacs 24.5`(toggle-read-only)`中，不需要上述代码中的两个调用。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-12-26T17:19:31.893

我优化的不污染解决方案`M-x grep`（仅适用于`M-x compile`）：

```
(ignore-errors
  (require 'ansi-color)
  (defun my-colorize-compilation-buffer ()
    (when (eq major-mode 'compilation-mode)
      (ansi-color-apply-on-region compilation-filter-start (point-max))))
  (add-hook 'compilation-filter-hook 'my-colorize-compilation-buffer)) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-07T13:06:48.290

对@gavenkoa 的[解决方案](https://stackoverflow.com/questions/13397737/ansi-coloring-in-compilation-mode#answer-20788581)进行评论：

```
(when (require 'ansi-color nil t)
  (defun my-colorize-compilation-buffer ()
    (when (eq major-mode 'compilation-mode)
      (ansi-color-apply-on-region compilation-filter-start (point-max))))
  (add-hook 'compilation-filter-hook 'my-colorize-compilation-buffer)) 
```

这不会阻止错误，但如果 ansi-color 不可用，仍然不会引发错误。就个人而言，我发现通配符捕获语义`ignore-error`令人反感。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-06-09T12:05:18.467

重复@stribb 的[解决方案](https://stackoverflow.com/a/55044536/179332)，即重复@gavenkoa 的[解决方案](https://stackoverflow.com/a/20788581/179332)，这是使用令人敬畏的[使用包](https://jwiegley.github.io/use-package/)进行设置的方法：

```
(use-package ansi-color
  :config
  (defun my-colorize-compilation-buffer ()
    (when (eq major-mode 'compilation-mode)
      (ansi-color-apply-on-region compilation-filter-start (point-max))))
  :hook (compilation-filter . my-colorize-compilation-buffer)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-02T18:23:06.553

截至 2020 年，最现代的方式似乎是`xterm-color`Emacs 包。

有关详细信息，请参阅[我对重复问题](https://stackoverflow.com/a/63710493/19163)的回答。

# java - 在 .jar 和 eclipse 中查找具有相同字符串计算的资源

> ID：13397742
> 
> 赞同：1
> 
> 时间：2012-11-15T12:42:23.390
> 
> 标签：java, resources, path, javax.imageio

我想获取 ImageIO 的资源路径，以从某些 .png 中读出 BufferedImage 。在开发项目时，我使用 "/bin/stuff/icons/image.png" 的相对路径，但是当我将所有内容放在一个 .jar 文件中时，这肯定行不通，所以我需要一种方法来获取路径这些资源在 eclipse 中进行测试时以及稍后在 .jar 中运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:54:46.357

经过大量尝试查找文件和获取文件的输入流后，我得出的结论是，这种方法每次都有效：

```
InputStream in = ClassLoader.getSystemClassLoader().getResourceAsStream(path)
BufferedImage image = ImageIO.read(in) 
```

路径在哪里

```
"projectName/resourceFolder/" + nameOfResource.stuff 
```

在 Eclipse 项目的 src 目录中找到。

例如

```
"myProject/images/icon.png" 
```

当仅获取资源然后获取资源的路径以链接到文件时，您将在使用 .jar 时获得 FileNotFoundExceptions（但在使用 eclipse 进行测试时不会，因此应该警告人们认为他的代码有效）。

而且 - 不 - 我不会将图像保存在 bin/ 中 - 但它们会被复制到这个目录中，因此我在测试时会在那里找到它们。现在一切似乎都在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:49:24.140

不要`bin`在 Eclipse 的目录下放置任何内容：如果您对项目运行 clean，它将被删除。

您可以做的是定义一个新的源文件夹，如`resources`，并将图像放在那里。这样，它将自动复制到`bin`文件夹中。

如果您将`resources`文件夹包含到 Jar 中，则可以通过以下方式在两种环境中使用：

```
ImageIO.read( getClass().getResource("/image.png") ) 
```

PS：你可以避免使用不同的资源文件夹，但混合源和图像会很快污染你的源文件夹。

# php - 从网站抓取数据并存储在变量中

> ID：13397747
> 
> 赞同：0
> 
> 时间：2012-11-15T12:42:39.777
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

当将用户名放入输入框中时，我想从网站上获取某些值，然后将它们存储在变量中，以便我可以在我的网站的一部分中使用

我试图抓取的信息来自 runescape 高分 [http://services.runescape.com/m=hiscore/heroes.ws](http://services.runescape.com/m=hiscore/heroes.ws)

现在，当输入用户名时，url 会更改为此（用户名是 Paulrat3） [http://services.runescape.com/m=hiscore/compare.ws?user1=Paulrat3](http://services.runescape.com/m=hiscore/compare.ws?user1=Paulrat3)

我想获取攻击、力量、防御、体质、魔法、范围、祈祷和召唤等级，并可能将它们存储在变量中，例如

$攻击 $力量

ETC

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:45:29.063

我建议使用[Goutte](https://github.com/fabpot/Goutte)。

这是一个用 PHP 编写的网页抓取工具。听起来它非常适合您的需求。

# ruby-on-rails - 我的 ruby 代码语法错误，请帮助我

> ID：13397748
> 
> 赞同：0
> 
> 时间：2012-11-15T12:42:40.403
> 
> 标签：ruby-on-rails, ruby

我建立了一个妈妈是“动物”的班级并建立了一个孩子的班级。我从子类继承到母类，但我的代码有问题，我必须解决这个问题，但不好请帮助我，我是新手

```
class Animal
def initialize
    @name = "DigDok"
    @age = 20
    @sex = "male"
end
end
module Detail
def detail_set
    @detail.join(',')
end
    class Bird < Animal
        def initialize
            @detail = {
                :wing => 2
                :legs => 2
            }
        end
    end

    class Mammal < Animal
        def initialize
            @detail = {
                :legs => 4
                :babyfood => "Milk"
                :special_ability => nil
            }
        end
    end

    class Cat < Animal
        def initialize
            @detail = {
                :sharpclaws => "very Sharp"
                :special_ability => "Climb a tree"
            }
        end
    end

    class Dog < Animal
        def initialize
            @detail = {
                :best_friend => "Human"
                :special_ability => "Bark"
            }
        end
    end
 end 
```

但在irb终端运行结果是

```
SyntaxError: ./learningruby.rb:25: syntax error, unexpected tSYMBEG, expecting '}'
                    :legs => 2
                     ^
./learningruby.rb:30: class definition in method body
./learningruby.rb:34: syntax error, unexpected tSYMBEG, expecting '}'
                    :babyfood => "Milk"
                     ^
./learningruby.rb:35: syntax error, unexpected tASSOC, expecting kEND
                    :special_ability => nil
                                       ^
./learningruby.rb:40: class definition in method body
./learningruby.rb:44: syntax error, unexpected tSYMBEG, expecting '}'
                    :special_ability => "Climb a tree"
                     ^
./learningruby.rb:45: syntax error, unexpected '}', expecting kEND
./learningruby.rb:49: class definition in method body
./learningruby.rb:53: syntax error, unexpected tSYMBEG, expecting '}'
                    :special_ability => "Bark"
                     ^
./learningruby.rb:54: syntax error, unexpected '}', expecting kEND
    from (irb):1:in `require'
    from (irb):1
    from :0 
```

对不起，如果我的问题这么长，但谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:47:05.823

您缺少逗号：`@detail = { :wing => 2, :legs => 2 }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:37:53.917

你有两个问题：

首先，您错过了许多逗号：

```
@detail = { :wing => 2, :legs => 2 }

@detail = { :legs => 4, :babyfood => "Milk", :special_ability => nil }

@detail = { :sharpclaws => "very Sharp", :special_ability => "Climb a tree" }

@detail = { :best_friend => "Human", :special_ability => "Bark" } 
```

其次，你`@detail`是一个**哈希**，你不能使用**`join()`数组的方法**。如果你想让它变成一个字符串，试试这个：

```
@detail.map{|k,v| "#{k}=#{v}"}.join(',')
=> "wing=2,legs=2"
... 
```

# java - NTLM v2 身份验证问题

> ID：13397749
> 
> 赞同：1
> 
> 时间：2012-11-15T12:42:42.293
> 
> 标签：java, windows, windows-7, ntlmv2

我在 java 中有一个服务器端代码，它执行 NTLM 身份验证。它在windows xp中运行良好，但在windows 7中，它不工作，用户得到一个登录弹出窗口，要求用户一次又一次地验证。目前我使用的 jcifs 版本是 0.8，jdk 是 1.4。

示例代码如下：---

```
**String domainController = configFacade.getParameter("windows.domaincontroller", UserValidator.DOMAINCONTROLLER);

NtlmPasswordAuthentication authentication = new NtlmPasswordAuthentication(domain, racfUserId, password);

try {
UniAddress dc = UniAddress.getByName(domainController);
SmbSession.logon(dc, authentication);
}** 
```

请告诉我我需要做些什么改变............

# jquery - 请在 jQuery 中解释 JSONP

> ID：13397751
> 
> 赞同：3
> 
> 时间：2012-11-15T12:42:53.257
> 
> 标签：jquery, jsonp

我无法理解 jQuery.ajax 的文档，特别是两个选项：`jsonp`和`jsonpCallback`，所以有人可以这么愉快地解释吗？

我所理解的是，这`jsonp`是服务器期望的 GET 参数的名称（通常是“回调”），并且`jsonpCallback`是包装响应的函数的名称。看起来很简单。

但是[jQuery.ajax 文档](http://api.jquery.com/jQuery.ajax/)中的解释使这有点复杂。我想在这里引用选项的完整文本，并用**粗体**`jsonp`标记对我来说模糊的内容：

 **> jsonp
> 
> 覆盖 jsonp 请求中的回调函数名称。**在“callback=?”**中将使用该值代替“callback ” url 中查询字符串的一部分。所以 {jsonp:'onJSONPLoad'} 会导致 **'onJSONPLoad=?'** 传递给服务器。从 jQuery 1.5 开始，将 jsonp 选项设置为 false 会阻止 jQuery 将“?callback”字符串添加到 URL 或尝试使用**“=?”。**为转型。在这种情况下，**您还应该明确设置 jsonpCallback**设置。例如，{ jsonp: false, jsonpCallback: "callbackName" }

所以问题是：

1.“=”是什么意思**？**或**“回调=？”** （额外的问号）？当我执行 JSONP AJAX 请求时，如下所示：

```
 $.ajax('http://fake.com',{
     dataType: 'jsonp',
     success: function(data) {console.log(data);}
 }); 
```

URL 看起来是这样的，没有这样的问号：

```
http://fake.com/?callback=jQuery18104830878316494931_1352981996209&_=1352981999411 
```

2.什么是额外参数（下划线）`_=1352981999411`？

3.这些词是什么`In this case, you should also explicitly set the jsonpCallback setting`意思？我看不到任何相互关系。如果我设置`{ jsonp: false, jsonpCallback: "callbackName" }`，如文档中所述，查询将如下所示：

```
http://fake.com/?_=1352981999411 
```

根本没有使用“callbackName”，为什么要指定它？

我的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:48:34.673

回调名称是可选的，如果你不提供它使用一个默认的。因此，如果您遗漏，`onJsonLoad`您只会得到`callback`.

发生的情况是 JSON 被一个函数包裹，因为 JSONP 通过`<script>`标签工作，所以你的普通 JSON：

```
{prop: value} 
```

变成：

```
callback({prop: value}); 
```

当脚本标签被加载时，jQuery 可以调用这个函数并取回 JSON 数据。

这`_=123456788`只是`Date.getTime()`阻止请求缓存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T12:58:31.830

JSONP 背后的想法如下：

由于跨域策略，不允许向外部源请求数据。假设我的服务器有一个函数，如果你输入一个人的电话号码，它就会返回他的名字。

您的网站不在我的域中，不允许对我的服务器执行 ajax 调用并接收数据`Flater`。

此规则有一个例外，那就是使用外部加载的脚本。我可以加载托管在另一台服务器上的 jQuery.js 文件等。我无法从外部服务器请求**数据，但我可以请求****javascript**。

所以你不可能收到这个结果：

```
Flater 
```

但是可以将其放在您的页面上：

```
<script src="http://externalserver.com/script.js"> 
```

你会收到常规的javascript，例如

```
<script>
    function doSomething(value) {
        alert(value);
    }

    doSomething("First");
    doSomething("Second");
</script> 
```

这意味着（这是重要的部分）您还**可以**收到以下 javascript：

```
<script>
    doSomething("Flater");
</script> 
```

假设您已经`doSomething()`在页面上定义了一个函数。这将是完全有效的 javascript，因为它调用了一个现有的函数，尽管该片段起源的服务器 ( `http://externalserver.com/script.js`) 不知道函数中发生了什么`doSomething`。

所以从技术上讲，你可以在一开始就检索到你想要的数据（我使用了一个字符串作为示例，但 JSON 也同样有效），并且它周围的 javascript 仅用作装饰窗饰（“填充”） .

现在大多数启用 JSONP 的网站让您做的是选择函数的名称。例如：

```
<script src="http://externalserver.com/script.js?callback=doSomething">
<script src="http://externalserver.com/script.js?callback=banana">
<script src="http://externalserver.com/script.js?callback=Process_Name"> 
```

会回来

```
<script>
    doSomething("Flater");
</script>
<script>
    banana("Flater");
</script>
<script>
    Process_Name("Flater");
</script> 
```

这意味着**如果您已将要使用的函数名称定义为回调参数**，则可以有效地告诉外部服务器它需要将 JSON 传递给哪个函数。

如果您有多个都需要工作的功能，这将非常方便。

我希望我能够弄清楚 JSONP 的预期用途？如果您有任何问题，请询问:-)

**更新**

顺便说一句，我在示例中使用了脚本标签。就像你已经提到的那样，jQuery 已经发展到它基本上看起来像一个 ajax 调用的地步（它应该如此）。但是，我认为向您解释其中的核心原则会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:04:04.080

`callback=?`

当 Jquery 看到`?`

在某些 API 中，您需要提供 API 所概述的特定回调。

在大多数情况下，服务器只是`$_GET['callback']`使用 php 作为示例。在你的情况下，它会发回

```
jQuery18104830878316494931_1352981996209( /* json string*/) 
```

`jQuery18104830878316494931_1352981996209`是回调。

为了更好地理解，请在浏览器控制台 Net 或 Network 选项卡中检查 jsonp 请求。您可以看到 jQuery 发送的参数，并查看完整的响应**

# java - 何时在 Websphere Commerce 中使用访问 bean 或数据 bean？

> ID：13397752
> 
> 赞同：1
> 
> 时间：2012-11-15T12:42:55.957
> 
> 标签：java, jakarta-ee, websphere, javabeans, websphere-commerce

什么时候适合在 Websphere 中使用数据 bean 或访问 bean？抱歉，如果我问的是基本问题，我是 Websphere 的新手。

就我而言，我正在尝试按产品查找目录列表。最初我一直在使用访问 bean。这可行，但有时会返回非常大的结果集/似乎非常占用内存。

```
CatalogEntryDescriptionAccessBean cedabp = new CatalogEntryDescriptionAccessBean();
Enumeration cde = cedabp.findByCatalogEntry(productCatIdLong); 
```

数据 bean 提供了相同的方法：

```
CatalogEntryDescriptionDataBean cedabp = new CatalogEntryDescriptionDataBean();
Enumeration cde = cedabp.findByCatalogEntry(productCatIdLong); 
```

为什么我要使用一种 bean 而不是另一种？一种更适合读取或写入数据吗？一个缓存提供的数据是否比另一个提供的数据更新？

**更新：**

我发现这两个类有如下关系：

```
CatalogEntryDescriptionAccessBean
|_ CachedCatalogEntryDescriptionAccessBean
  |_ CompactCatalogEntryDescriptionAccessBean
    |_ CatalogEntryDescriptionDataBeanBase
      |_ CatalogEntryDescriptionDataBean 
```

所以 Data Bean 继承自 Access Bean，因此它包含相同的可见方法。

有趣的是，IBM 的文档指出：

> 访问 bean 提供 ... 对 home 对象的缓存，并减少对企业 bean 的调用流量。使用访问 bean 有额外的好处：
> 
> 在运行时，访问 bean 缓存企业 bean home 对象，因为查找 home 对象在时间和资源使用方面是昂贵的。访问 bean 实现了一个 copyHelper 对象，当命令获取和设置企业 bean 属性时，该对象减少了对企业 bean 的调用次数。在读取或写入多个企业 bean 属性时，只需要对企业 bean 进行一次调用。

目前，我对数据 Bean 的用途感到困惑，如果访问 Bean 使用 CMP 来减少对实体 Bean 的调用？

我发现了一些更多的文档说明：

> 数据 bean 是在 JSP 页面中用于从企业 bean 检索信息的 Java bean。一个简单的数据 bean 扩展了它对应的访问 bean 并实现了 SmartDataBean 接口。通过扩展访问 bean，数据 bean 提供了实体 bean 的简单表示（间接）：它封装了可以从实体 bean 中检索或设置的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:58:12.470

DataBean 实现了比 AccessBean 更多的缓存，因此可能会减少对数据库的调用。

DataBean 适合在构成站点/Web 应用程序的 JSP 页面中使用，因为实例的数量可能很少，它应该有助于控制访问数据库的事务数量。

AccessBean 占用的内存要少得多，因此更适合循环进程等。

您通常希望找到用于后端 WebSphere 命令和报告等的 AccessBean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:35:46.113

通常，您可以将数据 bean 与 wcbase:useBean 标记结合使用来设置数据 bean 的属性，并且该标记将调用填充方法。这实质上是从 JSP 中抽象出访问 bean/EJB 的实例化过程。除此之外，Access bean 与数据 bean 的功能价值是相似的。我在命令中使用访问 bean，在 jsps 中使用数据 bean。

# php - php中的mysql分组

> ID：13397755
> 
> 赞同：1
> 
> 时间：2012-11-15T12:43:06.830
> 
> 标签：php, mysql

我有mysql表这个结构：

```
id || groupid || name

1  || 23      || John
2  || 25      || Maria
3  || 23      || William 
```

现在我如何按组 id 对它进行分组以获得这个结果：

```
23 - John,William
25 - Maria 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:47:19.460

```
SELECT groupid, GROUP_CONCAT(name separator ',') as groupname FROM table GROUP BY groupid; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:04:24.987

SQLFIDDLE 解决方案：

SQLFIDDLE：[http ://sqlfiddle.com/#!2/db32d/15](http://sqlfiddle.com/#!2/db32d/15)

# git - Git 预接收钩子和子模块

> ID：13397757
> 
> 赞同：0
> 
> 时间：2012-11-15T12:43:10.743
> 
> 标签：git, git-submodules, githooks

我在远程裸 Git 存储库上有一个预接收挂钩，当我从笔记本电脑执行测试时，它将运行测试、压缩一些文件并生成构建 ID：

```
 $ git push production master 
```

pre-receive hook 的简化版本是这样的：

```
while read oldrev newrev refname
do
# Export deployed branch to build directory
mkdir -p $BUILD_DIR
git archive $newrev | tar -x -C $BUILD_DIR 
cd $BUILD_DIR
the_build_script.sh 
done 
```

现在，我在 repo 中添加了两个子模块，但我找不到任何有关如何处理此问题的文档或示例。我知道我应该在构建脚本之前运行：

```
# git submodule init
# git submodule update 
```

但是，据我所知，这将获得旧修订代码引用的子模块，而不是新推送代码中引用的子模块仍未提交到远程仓库。

关于如何处理这个问题的任何想法或例子？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:04:43.493

好的，我找到了一个（目前）似乎正在工作的解决方案，像这样解决了它：

```
echo "Exporting repo and submodules for build process..."
git clone -l --recursive . $BUILD_DIR  
echo "Cleaning up git information..."
find $BUILD_DIR -name ".git" -exec rm -rf {} \; || true 
```

直到我找到一种更清洁的方法......这会做:-)

# python - 内存高效的 Python 批处理

> ID：13397761
> 
> 赞同：5
> 
> 时间：2012-11-15T12:43:42.053
> 
> 标签：python, memory-management, numpy, memory-profiling, spectral

### 问题

我编写了一个小型 python 批处理器，它加载二进制数据、执行 numpy 操作并存储结果。它消耗的内存比它应该消耗的多得多。我查看了类似[的堆栈溢出讨论](https://stackoverflow.com/questions/1659659/how-to-write-a-memory-efficient-python-program)，并想寻求进一步的建议。

### 背景

我将光谱数据转换为 rgb。光谱数据存储在带线交错 (BIL) 图像文件中。这就是我逐行读取和处理数据的原因。[我使用Spectral Python Library](http://spectralpython.sourceforge.net)读取数据，它返回一个 numpy 数组。*hyp*是大型光谱文件的描述符：hyp.ncols=1600, hyp.nrows=3430, hyp.nbands=160

### 代码

```
import spectral
import numpy as np
import scipy

class CIE_converter (object):
   def __init__(self, cie):
       self.cie = cie

    def interpolateBand_to_cie_range(self, hyp, hyp_line):
       interp = scipy.interpolate.interp1d(hyp.bands.centers,hyp_line, kind='cubic',bounds_error=False, fill_value=0)
       return interp(self.cie[:,0])

    #@profile
    def spectrum2xyz(self, hyp):
       out = np.zeros((hyp.ncols,hyp.nrows,3))
       spec_line = hyp.read_subregion((0,1), (0,hyp.ncols)).squeeze()
       spec_line_int = self.interpolateBand_to_cie_range(hyp, spec_line)
       for ii in xrange(hyp.nrows):
          spec_line = hyp.read_subregion((ii,ii+1), (0,hyp.ncols)).squeeze()
          spec_line_int = self.interpolateBand_to_cie_range(hyp,spec_line)
          out[:,ii,:] = np.dot(spec_line_int,self.cie[:,1:4])
       return out 
```

### 内存消耗

所有大数据都在循环外初始化。我天真的解释是内存消耗不应该增加（我使用了太多的 Matlab 吗？）有人可以解释一下增加因子 10 吗？这不是线性的，因为 hyp.nrows = 3430。有什么建议可以改善内存管理吗？

```
 Line #    Mem usage    Increment   Line Contents
  ================================================
  76                                 @profile
  77     60.53 MB      0.00 MB       def spectrum2xyz(self, hyp):
  78    186.14 MB    125.61 MB           out = np.zeros((hyp.ncols,hyp.nrows,3))
  79    186.64 MB      0.50 MB           spec_line = hyp.read_subregion((0,1), (0,hyp.ncols)).squeeze()
  80    199.50 MB     12.86 MB           spec_line_int = self.interpolateBand_to_cie_range(hyp, spec_line)
  81                             
  82   2253.93 MB   2054.43 MB           for ii in xrange(hyp.nrows):
  83   2254.41 MB      0.49 MB               spec_line = hyp.read_subregion((ii,ii+1), (0,hyp.ncols)).squeeze()
  84   2255.64 MB      1.22 MB               spec_line_int = self.interpolateBand_to_cie_range(hyp, spec_line)
  85   2235.08 MB    -20.55 MB               out[:,ii,:] = np.dot(spec_line_int,self.cie[:,1:4])
  86   2235.08 MB      0.00 MB           return out 
```

### 笔记

我用 xrange 替换了*range* *，*没有大幅改进。我知道三次插值并不是最快的，但这与 CPU 消耗无关。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:14:32.473

感谢您的评论。他们都帮助我改善了一点内存消耗。但最终我弄清楚了内存消耗的**主要原因**是/是：

SpectralPython 图像包含一个[Numpy Memmap](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html)对象。这与高光谱数据立方体的数据结构具有相同的格式。（如果是 BIL 格式（nrows、nbands、ncols））调用时：

```
spec_line = hyp.read_subregion((ii,ii+1), (0,hyp.ncols)).squeeze() 
```

图像不仅作为 numpy 数组返回值返回，而且还缓存在 hyp.memmap 中。第二次调用会更快，但在我的情况下，内存只会增加，直到操作系统抱怨。由于 memmap 实际上是一个很好的实现，我将在以后的工作中直接利用它。*

# java - 如何在 Embeddable 上触发 EntityListener

> ID：13397763
> 
> 赞同：4
> 
> 时间：2012-11-15T12:43:50.120
> 
> 标签：java, jakarta-ee, jpa, jpa-2.0

我有一个带有`EmebeddedId`. 实体上的实体侦听器（在加载时修剪空白`Strings`）正在按预期`Embeddable`触发，根本不会触发 id 上的相同侦听器。

我做错了吗？如何修复？

实体：

```
@Entity
@Table(name = "SUBMITTER_VIEW")
@EntityListeners(TrimListener.class)
public class Submitter implements Serializable {

    private static final long serialVersionUID = 1L;

    @EmbeddedId
    private SubmitterPK id;

    @Trim
    @Column(name = "DOC_NAME")
    private String name;
... 
```

可嵌入：

```
@Embeddable
@EntityListeners(TrimListener.class)
public class SubmitterPK implements Serializable {

    private static final long serialVersionUID = 1L;

    @Column(name = "LSTORT")
    private String bsnr;

    @Trim
    @Column(name = "LOGIN")
    private String login;
... 
```

听众：

```
public class TrimListener {

    Logger log = LoggerFactory.getLogger("TrimListener");

    @PostLoad
    public void repairAfterLoad(final Object entity) throws IllegalAccessException {

        log.debug("trimlistener active");

        final Set<Field> trimProps = getTrimProperties(entity.getClass());

        for (final Field fieldToTrim : trimProps) {
            final String propertyValue = (String) fieldToTrim.get(entity);
            if (propertyValue != null) {
                fieldToTrim.set(entity, propertyValue.trim());
            }
        }
    }
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:28:57.160

我认为它显然被忽略了，因为它不是 JPA 2.0 所期望的标准位置。根据 JPA 2.0 最终规范，实体侦听器可以是实体、映射的超类或其中之一关联的侦听器（请参阅规范的第 3.5 节）：

> 可以将方法指定为生命周期回调方法以接收实体生命周期事件的通知。可以在实体类、映射超类或与实体或映射超类关联的实体侦听器类上定义生命周期回调方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:16:47.303

我已经调整了 EntityListener 以递归地跟踪使用`Embeddable`. 现在，如果一个实体使用监听器，所有嵌入的类也会被处理：

```
public class TrimListener {

    @PostLoad
    public void trimAfterLoad(final Object entity) throws IllegalAccessException {

        final Set<Trimmable> trimProps = getTrimProperties(entity);

        for (final Trimmable trimmable : trimProps) {
            final String propertyValue = (String) trimmable.field.get(trimmable.target);
            if (propertyValue != null) {
                trimmable.field.set(trimmable.target, propertyValue.trim());
            }
        }
    }

    private Set<Trimmable> getTrimProperties(final Object entity) throws IllegalAccessException {

        final Class<?> entityClass = entity.getClass();
        final Set<Trimmable> propertiesToTrim = new HashSet<Trimmable>();

        for (final Field field : entityClass.getDeclaredFields()) {
            if (field.getType().equals(String.class) && (field.getAnnotation(Trim.class) != null)) {
                field.setAccessible(true);
                propertiesToTrim.add(new Trimmable(entity, field));
                // if the entity contains embeddables, propagate the trimming
            } else if (field.getType().getAnnotation(Embeddable.class) != null) {
                field.setAccessible(true);
                propertiesToTrim.addAll(getTrimProperties(field.get(entity)));
            }
        }
        return propertiesToTrim;
    }

    private class Trimmable {

        final Object target;
        final Field field;

        public Trimmable(final Object target, final Field field) {
            this.target = target;
            this.field = field;
        }
    }
} 
```

# c# - 是否有任何 C# 或 python 中的开源项目来绘制甘特图？

> ID：13397764
> 
> 赞同：0
> 
> 时间：2012-11-15T12:43:53.847
> 
> 标签：c#, python, linux, plot, wxpython

我想绘制一个操作系统日志包含：

```
time-stamp   event 
```

事件可以是`tid`or `enter_irq#_handler`，`exit_irq#_handler`并且每个事件都有自己的唯一标识符。

有没有人推荐一个`c#`或者`wxpython`我可以用来构建自己的工具？

我有`100K`事件和关于`2k`tid、irq 等的唯一事件列表。

我找到[了 this](http://www.blog.pythonlibrary.org/2010/09/27/wxpython-pyplot-graphs-with-python/)和[that](https://www.codeproject.com/script/Membership/LogOn.aspx?rp=/articles/32836/a-simple-c-library-for-graph-plotting)，但它们不是为`2k`唯一事件标识符而设计的。

我认为甘特图是正确的解决方案：

![在此处输入图像描述](../Images/04a71062891605f2523b4437a2906537.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:47:15.733

我会编写一些 GNU [gawk](http://www.gnu.org/software/gawk/)脚本来提供[GnuPlot](http://www.gnuplot.info/)脚本。

您当然想要折叠（= 组），或选择一些事件类型的一小部分（并且您应该知道哪些事件类型）。向用户显示 2000 条松散相关的曲线毫无意义，即使在巨大的高分辨率屏幕上也是如此。

^(因为人的大脑和眼睛无法同时掌握数千条不同的曲线)

# objective-c - 如何使 for 循环以与 NSLog(@"%@", arrData) 相同的顺序迭代

> ID：13397766
> 
> 赞同：5
> 
> 时间：2012-11-15T12:43:54.663
> 
> 标签：objective-c

我执行了以下代码`NSLog(@"%@", arrData);`，调试器中的输出预期如下：

```
 "0." =     {
"first_name"="John"
    };

    "1." =     {
"first_name"="Florence"
    };

    "2." =     {
"first_name"="Melinda"
    };
    "3." =     {
"first_name"="Zack"
    }; 
```

然后我执行了这段代码：

```
for (NSDictionary *book in arrData)
{
        NSLog(@"%@ %@" , book, [[arrData objectForKey:book]  objectForKey:@"first_name"]);
} 
```

输出是这样的：

```
2\. Melinda
0\. John
3\. Zack
1\. Florence 
```

如何使 for 循环以与相同的顺序打印结果？`NSLog(@"%@", arrData);`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T21:19:21.237

A few things are going on here.

First let's understand what `%@` means in NSLog. Many iOS/Cocoa developers incorrectly believe `%@` is associated with NSString, it's not. From [Apple's documentation](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265):

> Objective-C object, printed as the string returned by `descriptionWithLocale:`if available, or description otherwise. Also works with `CFTypeRef` objects, returning the result of the `CFCopyDescription` function.

So, `%@` takes any Objective-C or CFTypeRef object. Since you are using a `NSDictionary`, `%@` will print the output of description or `descriptionWithLocale:(id)locale`. So what does that do? Again, from Apple's documentation:

> If each key in the dictionary is an NSString object, the entries are listed in ascending order by key, otherwise the order in which the entries are listed is undefined.

When using the for-in loop, aka Fast-Enumeration, the order of the objects is undefined, so that is why the output of the loop is not in order. If you wanted to print the contents of an NSDictionary in order, you'll have to emulate the behavior of the description method.

From [this](https://stackoverflow.com/a/3583109/257533) stackoverflow post:

```
NSArray *sortedKeys = [[dict allKeys] sortedArrayUsingSelector: @selector(compare:)];
NSMutableArray *sortedValues = [NSMutableArray array];
for (NSString *key in sortedKeys) {
    [sortedValues addObject: [dict objectForKey: key]];
} 
```

I hope this clears things up.

# ios - UIDocumentInteractionController OpenInMenu 使 iOS 应用程序崩溃

> ID：13397770
> 
> 赞同：12
> 
> 时间：2012-11-15T12:44:08.120
> 
> 标签：ios

我正在尝试使用 UIDocumentInteractionController OpenIn 菜单将在我的应用程序中生成的图像发送到其他应用程序。我正在使用以下代码将 UIImage 保存到磁盘：

```
 fileJpeg = [NSTemporaryDirectory() stringByAppendingPathComponent:@"activeImage.jpg"];
    jpegFileURL = [NSURL fileURLWithPath:fileJpeg];

    UIImage *imageToWrite = image;

    [UIImageJPEGRepresentation(imageToWrite, 1.0) writeToFile:fileJpeg atomically:YES]; 
```

我正在以另一种方法访问 jpegFileURL 以使用 MFMailComposeViewController 通过电子邮件发送图像，并且它运行良好，因此 NSURL 是有效的。但是当我尝试将图像发送到另一个应用程序（只是发送，我没有实现任何预览功能）时，应用程序崩溃了。这是方法：

```
- (IBAction)openInOtherApp:(id)sender{

UIDocumentInteractionController *controller = [UIDocumentInteractionController interactionControllerWithURL: jpegFileURL];
controller.delegate = self;
CGRect rect = self.view.frame;
[controller presentOpenInMenuFromRect:rect inView:self.view animated:YES];
} 
```

显示“打开方式”菜单。当我点击任何可用应用程序的按钮时，它会崩溃。在 iOS6 (6.0.1) 和 iOS5 (5.1.1) 设备中进行测试时，我在控制台中没有收到错误输出（只是通常的 EXC_BAD_ACCESS (code=1, address... crash)，但是在 iOS 4.3 设备上（The应用程序向上兼容 4.3）我在控制台中收到此错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType actionSheet:clickedButtonAtIndex:]: unrecognized selector sent to instance 0x16b7f0' 
```

我一直在阅读 Apple 关于 UIDocumentInteractionController 和 UIDocumentInteractionControllerDelegate 的文档，这些文档是我在我的类 @interface 中实现的，但似乎不需要任何可选的委托方法来满足我的需要或在这次崩溃中有所帮助。

无法弄清楚什么是错的或缺少的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-15T21:40:22.043

找到问题了，感谢[这个答案](https://stackoverflow.com/questions/8102181/uidocumentinteractioncontroller-for-open-in-menu-doesnt-work)。这是一个记忆的事情。我使用 UIDocumentInteractionController 作为本地实例变量，ARC 很快就会发布它。把它变成一个类属性，现在一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-11T13:37:20.293

您必须在 @interface 之后在 .h 文件中定义 UIDocumentInteractionController *controller ... 就像

```
@interface sampleView <UIDocumentInteractionControllerDelegate>
{
    UIDocumentInteractionController *controller;
} 
```

应用程序需要从整个模块访问这个变量，而不仅仅是在它调用的过程中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-24T02:25:00.210

请注意，如果您使用远程 PDF 网址，应用程序会崩溃！将远程 URL 保存到本地目录路径中。并将该 url 指向文档交互控制器。此处保存到本地目录的 Swift 代码示例。

```
let data = try Data(contentsOf: self.pdfUrl)
// Create a local file url path with intermediate folders created.     
let fileUrl = Utils.cachesDirectoryPath(appendingComp: self.filePath, ext: "pdf")
try data.write(to: fileUrl)
// Provide this URL into DocumentInteractionController
self.fileUrl = fileUrl 
```

# winapi - 串口（winAPI）：无法接收任何数据

> ID：13397776
> 
> 赞同：0
> 
> 时间：2012-11-15T12:44:38.887
> 
> 标签：winapi, serial-port

我正在将 char 'a' 从 pc 发送到 MCU，然后通过串行通信将其返回给 PC。准确地说，它应该显示“a”，但没有任何显示。我已经在超级终端上进行了测试，它工作正常。

如果我的代码有任何问题，请指出。谢谢你。

我猜它在发送一个字符时效果很好，所以我只发布了我的代码的一部分。

```
DWORD dwCommModemStatus;
DWORD dwBytesTransferred;
DWORD bytesWritten;
char receivedData[2] = {0};

char data= 'a';
bool sendChar = WriteFile(hSerial,&data,1,&bytesWritten,NULL);
if(!sendChar){
    printf("WriteFile ERROR\n");
}

SetCommMask(hSerial,EV_RXCHAR);
WaitCommEvent(hSerial, &dwCommModemStatus,0);

if(dwCommModemStatus & EV_RXCHAR){
    if(!ReadFile(hSerial,receivedData,1,&dwBytesTransferred,0)){
        printf("ReadFile Error\n");
    }else{
        printf("%c\n",receivedData[0]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:01:51.703

我认为`WaitForSingleObject`上面的代码中缺少。

如果`WaitCommEvent`退货`false`，您必须等待。您可以使用`WaitForSingleObject`. 如果此方法返回`WAIT_OBJECT_0`，您可以使用`ReadFile`.

有关详细信息，请参阅[WaitForSingleObject 函数 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)和[等待函数 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687069%28v=vs.85%29.aspx)。

# java - 布尔返回问题/从放入数组的方法中获取因素

> ID：13397779
> 
> 赞同：1
> 
> 时间：2012-11-15T12:44:58.747
> 
> 标签：java

在一小时前发布了一个较早的问题并在 4 分钟内得到了回复，这太疯狂了，我再试试运气。程序有 5 种方法，目前正在制作所有方法，因此它们不会都在这里（由于先前的响应而将其放入）问题现在是我最后的方法之一，它实际上除了使打印语句正常工作之外. 该方法不完整，它不仅需要找到所述数字的因数，还必须将它们存储在数组中，将它们相加并确定数字是否完美。最后一个未显示的方法将打印出每个数字的实际数组（如果它有一个）。“testperfect”是我遇到问题的方法，在eclipse中我收到一个错误，说这个方法必须返回布尔类型的结果。. . 任何形式的帮助将不胜感激

```
import java.util.Scanner;

public class tgore_perfect 
{
 private static int count;
 private static int perfect;
 public static void main ( String args [])
 {
    count = getNum ();
    //System.out.print(count);
    boolean check = validateNum();
    //System.out.print(check);
    while (validateNum() == false)
    {
    System.out.print ("Non-positive numbers are not allowed.\n");
    count = getNum();
    }
    if (validateNum() == true)
    {
    for ( int i = 0; i < count; i++ )
    {
        perfect = getPerfect();
        testPerfect();

    }
}
}

public static int getNum () //gets amount of numbers to process
 {
     Scanner input = new Scanner ( System.in );
     int counter;

         System.out.println ("How many numbers would you like to test? ");
         counter = input.nextInt();
     return counter;
 }

 private static boolean validateNum() //checks user input
 { 
 if (count <= 0)
 {
     return false;
 }
 else
 {
     return true;
 }
 }

 public static int getPerfect() //gets number to process
 {
 Scanner input = new Scanner ( System.in);
 perfect = -1;
 System.out.print ("Please enter a possible perfect number: ");
 return perfect = input.nextInt();
 }

 public static boolean testPerfect() //tests the number to see if is perfect
{
     int sum = 0;
     int x = 0;

     for( int i = 1; i < perfect; i++ )
 {
     if((perfect % i ) == 0 )
     {
         x = i;
         sum += x;

     }
     if( x == perfect)
     {
         return true;
     }
     else 
     {
         return false;
     }
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:49:45.767

**所有代码路径都必须返回您的返回类型**

想象一下，如果你的 for 循环因为你的值而**根本没有执行**`i`and `perfect`，在这种情况下，你的函数不会返回任何东西。

这**是不允许的。**

```
public static boolean testPerfect() //tests the number to see if is perfect
{
    //...code...
    for( int i = 1; i < perfect; i++ )
    {
        //..code..
    }
    return false;
} 
```

# iphone - 我如何在 xcode 中获取数组？

> ID：13397780
> 
> 赞同：-6
> 
> 时间：2012-11-15T12:45:00.833
> 
> 标签：iphone, xcode

如何获取字典的值而不是循环。我知道如何使用以下方法获取单个值：

```
NSString *valueStr = [dict objectForKey:@"Key2"]; 
```

我需要通过循环所有键来获取，我需要在字典中搜索一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:51:49.483

由于看起来您正在尝试使用[NSDictionary](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)，因此您需要执行以下操作：

```
for (NSString *key in [dict allKeys]){
    NSLog(@"%@", [dict objectForKey:key]);
} 
```

或者如果您不想使用循环，您可以执行以下操作：

```
NSArray *keys = [dict allKeys];
NSArray *values = [dict allValues]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:49:01.613

```
for (NSString *key in <#dictionary#>)
{
    <#!loopcontents#>
    [dictionary objectForKey:key]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:49:24.240

你似乎有一个`NSDictionary`，你可以通过以下方式访问所有键/值：

```
NSArray *keys = [dict allKeys];
NSArray *values = [dict allValues]; 
```

参考[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

当然，您可以遍历该键值对

```
for (NSString *key in [dict allKeys]) {

    //get value
    NSString *value = [dict objectForKey:key];

    //print to log
    NSLog (@"%@, %@", key, value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T12:51:35.310

结合 Omarj 和 Rene 的答案：

```
for (NSString *key in [dict allKeys])
{
    NSString *value = [dict objectForKey:key];
} 
```

# android - 如何使用内容提供程序删除前“n”行

> ID：13397781
> 
> 赞同：1
> 
> 时间：2012-11-15T12:45:03.713
> 
> 标签：android, sqlite, android-contentprovider

我想使用内容提供者删除前“n”行。

这是我的代码：

```
 private void deleteOldItems(int number) {
    String where = HistoryTable.COLUMN_ID + "<=?";
    getContentResolver()
            .delete(Uri.parse("content://com.ipiit.client.contentprovider.HistoryContentProvider/histories"),
                    where, new String[] {String.valueOf(number)});
    } 
```

我工作但只有一次。如何始终删除第一行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:58:42.907

如果这是你的“自己的” `ContentProvider`，即你确定表名和类似的东西，你总是可以像这样做一个相当丑陋的子选择：

```
private void deleteOldItems(int number) {
    // You should probably sort the subselect on something
    // suitable indicating its age. The COLUMN_ID should do.
    String where = HistoryTable.COLUMN_ID + " IN (SELECT " + HistoryTable.COLUMN_ID + " FROM " + 
        HistoryTable.TABLE_NAME + " ORDER BY " + HistoryTable.COLUMN_ID + " LIMIT ?)";
    getContentResolver()
        .delete(Uri.parse("content://com.ipiit.client.contentprovider.HistoryContentProvider/histories"),
                where, new String[] {String.valueOf(number)});
} 
```

另一方面，如果它是您自己的`ContentProvider`.. 只需在将其传递给 #delete(..) 时添加对向 URI 添加“限制”参数的支持，而不是诉诸像这样的丑陋黑客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:55:24.150

尝试这样的事情`contentprovider`

```
count = DBConnection.delete("TableName", "_id" + "=" +arg1, arg2); 
```

# r - 在散点图上绘制非线性回归的结果

> ID：13397783
> 
> 赞同：1
> 
> 时间：2012-11-15T12:45:09.663
> 
> 标签：r, plot, regression

我一直在尝试在散点图上绘制回归的非参数部分，如果可能的话，使用置信区间。即使我尝试了，我也失败了，为什么我在这里问

```
library(np)
library(foreign)  

wage1 <- read.dta(file="PATH HERE\\wage1.dta")
reg.np <- npplreg(lwage ~ female + married + educ + tenure | exper, data = wage1)

plot(reg.np)

plot(wage1$exper, wage1$lwage, xlab = "age", ylab = "log(wage)")
lines(wage1$exper, fitted(reg.np), lty = 1, col = "blue") 
```

这是我尝试的众多尝试之一。如果有人可以提供帮助，我将不胜感激。

工资1 数据库：[http ://www.sendspace.com/file/txksv3](http://www.sendspace.com/file/txksv3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:11:34.473

我无法访问工资 1 数据，但我认为您想要创建一个包含适当 x 轴值的新数据框，并将其用作 predict() 的参数以获得适当的 y 轴值。使用这些 x 和 y 轴值将模型添加到绘图中。

如果您想使用fitted()，您可能需要按x 变量的升序对数据进行排序。

# android - 来自 ADT21 的 UI 测试工具 android

> ID：13397786
> 
> 赞同：25
> 
> 时间：2012-11-15T12:45:14.023
> 
> 标签：android, testing

试图让作为 ADT21 (http://developer.android.com/tools/testing/testing_ui.html) 一部分的 android UI 测试当前工作，我似乎遇到了一些问题。

创建测试后，我们必须将其设置为 uitest-project，网页告诉我们命令是：

```
<android-sdk>/tools/android uitest-project -n <name> -t 1 -p <path> 
```

但这似乎是不正确的，它应该是：

```
<android-sdk>/tools/android create uitest-project -n <name> -t 1 -p <path> 
```

但是在运行这个我得到错误：

```
Error: UI test projects can only target API 16 and above 
```

我假设与 -t 参数有关，然后我尝试了从 1 到 18 的所有值（一个甚至还不存在的 android 版本），它给了我同样的错误。有人想通了吗？我认为这将是一些简单的事情。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-15T12:55:26.807

答案很简单。示例向您展示 1，-t 实际想要的是一个目标，但 id 取决于运行命令的结果：

```
android list targets 
```

此命令将为您提供可以使用 ID 的目标列表，具体取决于您在系统上安装的内容。

例如在我的系统上我得到：

* * *

```
id: 37 or "android-16"
 Name: Android 4.1.2
 Type: Platform
 API level: 16
 Revision: 3
 Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in
 ABIs : armeabi-v7a, mips, x86 
```

所以我使用命令

```
android create uitest-project -n <name> -t 37 -p <path> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T15:01:11.557

另一种方法是不使用可能会更改的数字，而是使用常量字符串。

示例：：android 列表目标

```
Available Android targets:

id: 1 or "android-11"
.....
id: 5 or "android-17"
     Name: Android 4.2.2
     Type: Platform
     API level: 17
     Revision: 2
     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in
     ABIs : armeabi-v7a
...

$ android create uitest-project -n project -t "android-17" -p project 
Added file project/build.xml 
```

# windows-phone-7 - 越过边界

> ID：13397793
> 
> 赞同：0
> 
> 时间：2012-11-15T12:45:48.617
> 
> 标签：windows-phone-7, expression-blend

我现在正在研究`ScrollViewer`Expression **Blend**。其中的一些控件`ScrollViewer`超出了该模板电话图像的边界，该模板始终位于 Blend 上。

如何在该边界之外看到 Silverlight 控件？我想查看 Blend 上的所有内容，而不仅仅是用户可以看到的内容。我特别说`TextBlocks`。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:29:19.343

尝试增加`d:DesignHeight="2000"`of`phone:PhoneApplicationPage`和`Height`of `LayoutRoot`: `<Grid x:Name="LayoutRoot" Height="2000">`。这不是一个干净的解决方案，但也许它会有所帮助。

# database - Visual Basic 2010 - OO 编程新手，需要一些项目指导

> ID：13397794
> 
> 赞同：0
> 
> 时间：2012-11-15T12:46:06.657
> 
> 标签：database, vb.net, oop

我是 Visual Basic 2010 的新手，但我有一些 Visual Basic 6 的经验。我的任务是编写一个项目来转换来自两个数据库的数据。（即客户。联系人，发票。）我需要做的是将客户从一个数据库转换到另一个数据库并标记任何问题（例如地址太长）

我是 OO 编程的新手，所以我追求实现这一点的最佳实践。

我是否设置了一个结合源客户表和目标客户表的客户类，或者为每个客户设置单独的类？以及应该在哪里放置进行实际转换的方法。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:48:44.047

我猜你会开始用 VB.NET 编程，因为你来自 vb6。我建议您在开始之前先阅读 Visual Basic .NET 参考

[参考 (Visual Basic)](http://msdn.microsoft.com/en-us/library/25kad608.aspx)

这个 OOP Vb.net 编程指南也可以提供帮助：

[VB.NET中的面向对象编程](http://www.codeproject.com/Articles/8825/Object-Oriented-Programming-In-VB-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:22:00.873

我认为有很多方法可以解决这个问题，因为周围有程序员。

如果我的任务是将数据从一个数据库转换到另一个数据库，那么我可能会创建一个类，例如，调用该类，该类`DBComparer`将包含例如 2 `DataTables`（每个数据库中的一个），并且可以有方法比较两个数据表。

然后，我将为需要转换的每个表继承该类：

```
Public Class CustomersComparer
    Inherits DBComparer 
```

这样，您只有一个地方可以更改比较模块，并且可以将这些信息用于每个不同的表格。

同样，这只是一个想法，每个程序员都会给你不同的方式来做这件事 - 在我看来，重要的部分是使用 AWESOME 的力量 .Net 为你提供了广泛的可能对象和真正的 OOP 环境。

欢迎来到 .Net，我希望这能让你开始思考：)

# java - 查询 Jersey REST 服务时出现消息异常 (com.sun.jersey.api.MessageException)

> ID：13397796
> 
> 赞同：1
> 
> 时间：2012-11-15T12:46:10.940
> 
> 标签：java, web-services, rest

上下文：-鉴于以下代码，我遇到了异常。请用明确的解释告诉我为什么会这样：

```
@GET
@Produces("application/xml")
public List getEmployee()
{
   List<Employee> emp=new ArrayList<Employee>();
   return emp;
}

@XmlRootElement
public class Employee{

} 
```

当我调用 getEmployee 服务时，出现以下异常：

> 原因：com.sun.jersey.api.MessageException：Java 类 java.util.ArrayList 和 Java 类型接口 java.util.List 和 MIME 媒体类型 application/xml 的消息正文编写器未找到 ... 30更多的

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:38:37.467

您正在重新调整一个 ArrayList 实例的员工列表。您在 Employee 类上声明了根注释，而不是在 arraylist 上。

您需要创建一个包装器来保存员工列表。这个包装器将使您能够为列表创建根元素，即

```
import java.util.ArrayList;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement(name = "users")
public class Users {

    @XmlElement(name="user")
    private ArrayList users;

    public ArrayList getUsers() {
        return users;
    }

    public void setUsers(ArrayList users) {
        this.users = users;
    }
} 
```

请参考以下教程以获得更多理解

[http://howtodoinjava.com/2012/11/26/writing-restful-webservices-with-hateoas-using-jax-rs-and-jaxb-in-java/](http://howtodoinjava.com/2012/11/26/writing-restful-webservices-with-hateoas-using-jax-rs-and-jaxb-in-java/)

# matlab - 在多个地块之间保持图例

> ID：13397802
> 
> 赞同：1
> 
> 时间：2012-11-15T12:46:49.113
> 
> 标签：matlab, plot, legend

我使用不同的数据集进行绘图，并且所有绘图都在相同的轴上。我在这里面临的问题是添加图例，当我绘制下一个图时，第一个图例被覆盖我们的重叠。我怎样才能让连续情节的传说低于另一个而不是结束

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:25:58.773

问题`legends`在于，每当您调用该命令时，它都会创建一个全新的图例。因此，您应该只绘制一次图例。

这是一种不***正确***的方法：

```
% THIS IS NOT CORRECT
plot(x1, y1, 'r.');   legend('first plot')
plot(x2, y2, 'g.');   legend('second plot')
plot(x3, y3, 'b.');   legend('third plot')
plot(x4, y4, 'k.');   legend('fourth plot') 
```

这将创建四个重叠的图例。***正确***的方法是

```
plot(x1, y1, 'r.');   
plot(x2, y2, 'g.');   
plot(x3, y3, 'b.');   
plot(x4, y4, 'k.'); 

% only 1 call to legend
legend('first plot', 'second plot', 'third plot', 'fourth plot') 
```

或者，将情节和图例条目保持在一起，

```
plot(x1, y1, 'r.');   L{1} = 'first plot';
plot(x2, y2, 'g.');   L{2} = 'second plot';   
plot(x3, y3, 'b.');   L{3} = 'third plot';   
plot(x4, y4, 'k.');   L{4} = 'fourth plot'; 

legend(L{:}); 
```

# asp.net - 集中每个网页的功能

> ID：13397807
> 
> 赞同：1
> 
> 时间：2012-11-15T12:46:53.637
> 
> 标签：asp.net, master-pages

我有一个 ASP.Net 4.0 Web 应用程序，其页面具有通用布局（顶部导航栏、左侧导航栏、徽标等...）。母版页非常适合布局部分，这就是我打算使用的。我不习惯使用 Masterpage，所以我的许多计划仍有待测试。但是，我还希望我的页面具有一些应该在呈现页面的 HTML 之前执行的通用功能。此功能包括检查用户是否有权访问该页面。此外，通用功能因页面而异。有些页面甚至不需要它。您会认为在 Masterpage 中包含此功能是显而易见的，并且功能取决于请求的内容页面。但是必须在内容页面 page_load 触发之前放置它，因为它的结果会影响页面的渲染。知道我们需要来自内容页面的信息来参数化功能，是否有最佳实践作为放置此功能的位置。理想情况下，这将在 Masterpage 的 OnInit() 中，因为它首先运行。但我不相信此时我可以从内容页面中检索到必要的信息。

非常感谢圣战

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:51:51.153

您可以尝试编写自己的 HttpModule。

[这个讨论应该有帮助](http://forums.asp.net/t/1011421.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:51:57.467

MasterPage 不是此功能的合适位置。最好的地方是自定义基 Page 类，您的特殊功能位于派生 Page 中。这样您就可以继承您的自定义类并逐页调用您需要的功能。

```
public class MyCustomPage : System.Web.UI.Page
{
    public bool IsAuthorized(string someCriteria)
    {
        // run special check
    }
} 
```

然后，当您在站点中创建一个单独的页面时，您只需将其继承从`System.Web.UI.Page`您自己的类切换。

```
public class MyNewWebPage : MyNameSpace.MyCustomPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsAuthorized("myCriteria"))
            Response.Redirect("SomewhereElse.aspx");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:55:23.563

最好让所有页面都从一个公共基类继承，而不是使用 Masterpage（主要用于布局）作为您的业务逻辑。

但是，如果您仍然希望它`MasterPage`在`INeedsAuthentication`.

在 MasterPage 中`Init`：

```
protected void Page_Init(Object sender, EventArgs e)
{
    var page = HttpContext.Current.Handler as Page;
    if (page is INeedsAuthentication)
        checkAuthentication();
    else if (page is WebForm1)
        specialCondition();
    else
        commonCondition(); // for all pages, maybe do simply nothing here
} 
```

# android - getBaseContext() undefined 如何在不扩展的情况下解决

> ID：13397810
> 
> 赞同：0
> 
> 时间：2012-11-15T12:46:56.160
> 
> 标签：android, extension-methods, restart, android-context

此代码应重新启动我的应用程序：

```
Intent i = getBaseContext().getPackageManager()
.getLaunchIntentForPackage(getBaseContext().getPackageName());
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
getContext().startActivity(i); 
```

但是我得到了一个按摩师`getBaseContext() is undefined for the type ButtonView.PhoneCallListener` ，我怎么能在不改变扩展的情况下解决这个问题？

我尝试`getContext()`了，但这让我进入了主屏幕，而不是应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:52:01.393

您显然需要的是应用程序的上下文。这可以通过`Context.getApplicationContext()`方法获得。您可以通过 Context 获得一个实例`View.getContext()`。

简而言之，您可以通过以下方式从视图代码访问应用程序的上下文：

```
getContext().getApplicationContext(); 
```

所以这可能有效：

```
Context appContext = getContext().getApplicationContext();
Intent i = appContext .getPackageManager().getLaunchIntentForPackage(appContext .getPackageName());
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
getContext().startActivity(i); 
```

# c - 驱动程序如何在 Windows 中工作？

> ID：13397816
> 
> 赞同：2
> 
> 时间：2012-11-15T12:47:28.390
> 
> 标签：c, windows, driver

在 Linux 中，我们可以从关联的驱动程序文件对象中读取/写入，并且这些函数调用将由驱动程序读取/写入函数进行。在 Windows 中是否相同？

我们是否将文件关联到驱动程序并通过读取/写入该文件来访问驱动程序功能？

（我一直在 Linux 下编写驱动程序，现在正试图了解“Windows 方式”来做到这一点。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:55:51.417

Windows 上的设备驱动程序的工作方式与 Linux 上的驱动程序不同。要快速了解 Windows 驱动程序的整体结构，您可以查看[MSDN](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554678%28v=vs.85%29.aspx)。有几类驱动程序，但它们不像 Linux 中那样与 VFS 绑定，而是表示为[设备树中的节点](http://msdn.microsoft.com/en-us/library/windows/hardware/ff554721%28v=vs.85%29.aspx)

从[MSDN](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff544113%28v=vs.85%29.aspx)程序的目的`DriverEntry`是这样的：

> > DriverObject 参数为 DriverEntry 例程提供指向驱动程序驱动程序对象的指针，该驱动程序对象由 I/O 管理器分配。DriverEntry 例程必须用驱动程序标准例程的入口点填充驱动程序对象。

这意味着 I/O 管理器将调用该过程，并且您使用指向您的驱动程序实现的过程的指针来填充结构。您可以[创建单个设备对象](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff548397%28v=vs.85%29.aspx)并将`IoCreateDevice`它们存储在您的`DRIVER_OBJECT`结构中。

要创建块设备样式的设备，我相信您想创建一个`FILE_DEVICE_DISK`类型的设备。

Microsoft 提供了一系列驱动程序创建教程，[第二个](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439665%28v=vs.85%29.aspx)可能是一个不错的起点。

# google-maps - gMaps APIv3 是否允许您使用两种叠加地图类型以及如何使用？

> ID：13397818
> 
> 赞同：0
> 
> 时间：2012-11-15T12:47:36.020
> 
> 标签：google-maps, google-maps-api-3, overlay

我一直在寻找使用来自 WMS 服务器的信息使两个（或更多）层可见的解决方案。我正在使用**overlayMapTypes** 数组来使其工作（您可以在[此处](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)阅读有关它的内容）将叠加层推到它上面。问题是 - 即使我在那里推两层，也只有后者（在最高位置编号）层是可见的。这是我使用的代码（我已经删除了不重要的信息）。

```
function addLayer(layers, serverUrl){

mapPref.currentLayers = layers;
mapPref.layersServerUrl = serverUrl;    

  var wmsOptions = {
  //here I am initializing layer object - its max/min zoom, gettile function, size of
  //tile, alternative text, etc.
  };

  wmsMapType = new google.maps.ImageMapType(wmsOptions);

  mapPref.cmsMap.overlayMapTypes.push(wmsMapType);
  }; 
```

有没有办法以这种方式处理它？还是我应该去别的地方看看？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:13:53.233

我已经想通了——都是关于这条线的

```
mapPref.layersServerUrl = serverUrl; 
```

当我覆盖这个变量时（它就像全局变量） - 我之前从另一台服务器添加的每一层都失去了它们的连接（我试图让层不存在）

但感谢大家试图帮助我——我真的很感激！:)

# mongodb - Spring Data Mongo 可以只更新文档中的脏字段吗？

> ID：13397833
> 
> 赞同：7
> 
> 时间：2012-11-15T12:48:19.390
> 
> 标签：mongodb, spring-data, spring-data-mongodb

我已经开始使用`spring-data-mongo`一个有很多东西需要持久化的应用程序。

我们实际上选择了 mongo，因为它是这样宣传的。现在沉迷于 spring，我们发现使用它的一些功能非常轻松（感谢辛勤工作的 spring 数据人员）。

但是有一件事：带有 over 的文档`60 fields`。`speed`所以我的问题`scalability`是spring-data-mongo只能像它`dirty fields`一样更新吗？有点像[这里](https://stackoverflow.com/questions/2674516/hibernate-dirty-checking-and-only-update-of-dirty-attributes) 的解释`mongo database``Hibernate``Arthur Ronald F D Garcia`

感谢您阅读本文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T00:31:17.040

来自 MongoDB 文档：

> 如果*update*参数仅包含字段和值对，则 update() 方法将现有文档替换为*update*参数中的文档，但 _id 字段除外。

换句话说，MongoDB 的更新与您描述的完全一样。因此，如果您在测试集合中有此文档：

```
{ "_id" : "123", "oldfield" : "oldvalue" } 
```

并在 mongo CLI 中运行以下命令：

```
db.test.update({"_id": "123"}, { newfield : "value" }) 
```

新文档将如下所示：

```
{"_id": "123", "newfield" : "value"} 
```

如果您只想修改某些字段，则可以使用 $set 运算符，该运算符将为一个或多个字段设置值。当您使用 spring 数据时，您应该使用 MongoTemplate 类进行更新：

```
Query q = new Query(Criteria.where("_id").is("123"));
Update u = Update
            .update("newfield", "value")
            .set("oldfield", "newvalue");

this.template.findAndModify(query, update, Entity.class); 
```

您可以在此处阅读有关 $set 运算符和 mongodb 更新的信息：http: //docs.mongodb.org/manual/reference/operators/#_S_set [http://docs.mongodb.org/manual/applications/update](http://docs.mongodb.org/manual/reference/operators/#_S_set)

# java - 如何根据收到的 XML 解组到不同的对象？

> ID：13397834
> 
> 赞同：3
> 
> 时间：2012-11-15T12:48:19.570
> 
> 标签：java, xml, web-services, jaxb

我有一个 Web 服务，它接收 XML 文件并进行解组以将 XML 文件转换为对象。问题是我的 Web 服务可以接收不同的 XML 结构并且必须进行正确的解组。

所以我收到了这种 XML 文件：

```
<root>
    <user>
        <id>1234</id>
    </user>
    <XMLelements>
        ...
    </XMLelements>
</root> 
```

请注意，这`XMLelements`是一个示例标签名称，每个 XML 文件都可以有不同的名称。

所以，我认为，我的网络服务工作流程应该是这样的：

1.  它接收 XML 文件。
2.  它检查用户 ID。
    *   如果用户 ID == 1234
        *   用户 A 用户 A = 解组（XMLFile）
    *   否则，如果用户 ID == 5678
        *   用户 B 用户 B = 解组（XMLFile）
    *   别的
        *   UserC userC = unmarshalling(XMLFile)

因此，我收到不同的 XML 结构，并且对于每个结构，我必须进行不同的解组以获取不同类的对象。

我该如何执行这种方法？我正在使用 Spring 进行编组（Metro）。

**编辑：**这个问题没有得到任何答案，也许我不清楚。我将尝试更好地解释它：

我有一个 Web 服务正在侦听接收 XML 文件的 URL。实际上，在同一个 url 路径中，我的 Web 服务接收到两个不同的 XML 模式。我怎么知道如何正确解组？我的意思是，当传递不同的 XML 模式时，解组应该返回正确的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:46:34.830

有几种不同的方式来支持这个用例。

* * *

**选项 #1 - DOM 方法**

您始终可以使用 DOM 解析器将 XML 转换为`Document`对它执行 XPath 以获取`id`元素的值，然后根据结果解组文档

* * *

**选项 #2 - SAX 方法**

***LookAheadUnmarshallerHandler***

您可以利用 SAX 解析器和 JAXB 的`UnmarshallerHandler`机制并执行以下操作：

*   创建一个`ContentHandler`将 SAX 事件排队，直到发现必要的信息。
*   `JAXBContext`根据`id`元素的值创建/检索 a 。
*   从. `UnmarshallerHandler`_`JAXBContext`
*   调用 上的排队事件`UnmarshallerHandler`。
*   将`UnmarshallerHandler`on设置`XMLReader`为`ContentHandler`。
*   从 中检索未编组的对象`UnmarshallerHandler`。

```
package forum13397834;

import java.util.*;
import javax.xml.bind.*;
import org.xml.sax.*;
import org.xml.sax.helpers.DefaultHandler;

public class LookAheadUnmarshallerHandler extends DefaultHandler {

    private XMLReader xmlReader;
    private List<Event> events = new ArrayList<Event>();
    private UnmarshallerHandler unmarshallerHandler;

    public LookAheadUnmarshallerHandler(XMLReader xmlReader) {
        this.xmlReader = xmlReader;
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        events.add(new StartElement(uri, localName, qName, attributes));
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        if("id".equals(localName) || "id".equals(qName)) {
            Characters characters = (Characters) events.get(events.size() - 1);
            String value = characters.getString();
            JAXBContext jc;
            try {
                if("1234".equals(value)) {
                    jc = JAXBContext.newInstance(Root1.class);
                } else if("5678".equals(value)) {
                    jc = JAXBContext.newInstance(Root2.class);
                } else {
                    jc = JAXBContext.newInstance(Root3.class);
                }
                unmarshallerHandler = jc.createUnmarshaller().getUnmarshallerHandler();
            } catch(JAXBException e) {
                throw new RuntimeException(e);
            }
            unmarshallerHandler.startDocument();
            for(Event event : events) {
                event.event(unmarshallerHandler);
            }
            unmarshallerHandler.endElement(uri, localName, qName);
            xmlReader.setContentHandler(unmarshallerHandler);
        } else {
            events.add(new EndElement(uri, localName, qName));
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        events.add(new Characters(ch, start, length));
    }

    public Object getResult() throws JAXBException {
        return unmarshallerHandler.getResult();
    }

    private static abstract class Event {

        public abstract void event(ContentHandler contentHandler) throws SAXException; 

    }

    private static class StartElement extends Event {

        private String uri;
        private String localName;
        private String qName;
        private Attributes attributes;

        public StartElement(String uri, String localName, String qName, Attributes attributes) {
            this.uri = uri;
            this.localName = localName;
            this.qName = qName;
            this.attributes = attributes;
        }

        @Override
        public void event(ContentHandler contentHandler) throws SAXException {
            contentHandler.startElement(uri, localName, qName, attributes);
        }

    }

    private static class Characters extends Event {

        private char[] ch;
        private int start;
        private int length;

        public Characters(char[] ch, int start, int length) {
            this.ch = ch;
            this.start = start;
            this.length = length;
        }

        @Override
        public void event(ContentHandler contentHandler) throws SAXException {
            contentHandler.characters(ch, start, length);
        }

        public String getString() {
            return new String(ch, start, length);
        }

    }

    private static class EndElement extends Event {

        private String uri;
        private String localName;
        private String qName;

        public EndElement(String uri, String localName, String qName) {
            this.uri = uri;
            this.localName = localName;
            this.qName = qName;
        }

        @Override
        public void event(ContentHandler contentHandler) throws SAXException {
            contentHandler.endElement(uri, localName, qName);
        }

    }

} 
```

**JAVA模型**

以下对象模型基于您在问题中提到的类。

***用户A***

```
package forum13397834;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="root")
public class UserA {

} 
```

***用户B***

```
package forum13397834;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="root")
public class UserB {

} 
```

***用户C***

```
package forum13397834;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="root")
public class UserC {

} 
```

**输入（输入.xml）**

我们将使用您问题中的 XML 文档作为此示例的输入。

```
<root>
    <user>
        <id>1234</id>
    </user>
    <XMLelements>
        ...
    </XMLelements>
</root> 
```

**演示代码**

```
package forum13397834;

import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        spf.setNamespaceAware(true);
        XMLReader xmlReader = spf.newSAXParser().getXMLReader();

        LookAheadUnmarshallerHandler handler = new LookAheadUnmarshallerHandler(xmlReader);
        xmlReader.setContentHandler(handler);
        xmlReader.parse(new InputSource("src/forum13397834/input.xml"));
        Object object = handler.getResult();
        System.out.println(object.getClass());
    }

} 
```

**输出**

```
class forum13397834.UserA 
```

# asp.net-mvc-3 - MVC 3 Razor-如何使用 jQuery ajax 将新模型绑定到 webgrid

> ID：13397837
> 
> 赞同：1
> 
> 时间：2012-11-15T12:48:32.260
> 
> 标签：asp.net-mvc-3, list, jquery, model, webgrid

我在使用从我的 DAL 返回的新模型更新我的 webgrid 时遇到问题。

在我看来，我有用于过滤网格上显示的数据的复选框。一旦勾选了一个复选框，它就会调用一些 jQuery ajax 函数，该函数将复选框值传递给我的控制器中的方法。然后这会调用我的 DAL 并返回具有正确值的模型的新列表。我将此列表返回到我的视图，但是当页面加载时没有什么不同。网格看起来一样，这不是我想要的，复选框也是一样的，这就是我想要的。

我将粘贴我的视图和控制器，希望有人知道一个好的解决方案：

**看法**

```
@model IEnumerable<UserManager.Models.vw_UserManager_Model>

@*@model UserManager.Models.vw_UserManager_Model
*@
@{
    ViewBag.Title = "User Manager Dashboard";
}

    @Html.ActionLink("Create New User", "CreateUser")

@*<div class="webgrid-filter">
    <b>@Html.Label("Select a filter: ")</b>
    <br />
    @Html.Label("Hide ALF Intelligence users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("FilterGrid", "UserManager", new { filterVal = Model.FirstOrDefault().alfIntelligence + "," + "alfIntelligence" })')" id="chkFilterAlfIntell" />
     @Html.Label("Hide ALF Connect users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("FilterGrid", "UserManager", new { filterVal = Model.FirstOrDefault().alfIntelligence + "," + "alfIntelligence" })')" id="chkFilterAlfConn" />
     @Html.Label("Hide BRAD users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("FilterGrid", "UserManager", new { filterVal = Model.FirstOrDefault().alfIntelligence + "," + "alfIntelligence" })')" id="chkFilterBrad" />
</div>*@

<div class="webgrid-filter">
    <b>@Html.Label("Select a filter: ")</b>
    <br />
    @Html.Label("Toggle ALF Intelligence users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("FilterGrid", "UserManager")')" id="chkFilterAlfIntell" checked="checked" />
     @Html.Label("Toggle ALF Connect users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("FilterGrid", "UserManager")')" id="chkFilterAlfConn" checked="checked"/>
     @Html.Label("Toggle BRAD users:")
    <input name="User logged in" type="checkbox"  onclick="filterGrid('@Url.Action("FilterGrid", "UserManager")')" id="chkFilterBrad" checked="checked"/>
</div>

<div class="webgrid-wrapper">

@{
    ViewBag.Title = "Jobs";
    WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 15, selectionFieldName: "selectedRow", fieldNamePrefix: "gridItem");

}

    @grid.GetHtml(
    fillEmptyRows: true,
        tableStyle: "webgrid",
                alternatingRowStyle: "webgrid-alternating-row",
                headerStyle: "webgrid-header",
                footerStyle: "webgrid-footer",
                selectedRowStyle: "webgrid-selected-row",
            rowStyle: "webgrid-row-style",
        mode: WebGridPagerModes.All,
columns: new[] {
    grid.Column("UserName"),
    grid.Column("salutation"),
    grid.Column("FirstName"),
    grid.Column("LastName"),
    grid.Column("Password"),
    //grid.Column("isactive"),
    //grid.Column(header: "Is logged in?", format: (model) => @Html.Raw("<input type='checkbox' checked='" + ((model.isactive) ? "checked" : "unchecked") + "' />")),  
    grid.Column(header: "User logged in", format: @<text><input name="User logged in" 
      type="checkbox"  @(item.isactive == true ? "Checked" : null) onclick="logUserOff('@Url.Action("LogUserOff", "UserManager", new {userid = item.userid} )')" id="chkboxIsActive" /></text>),
    grid.Column("isApproved"),  
    grid.Column("MaxConcurrentUsers"),
    grid.Column("email"),
    grid.Column("group_name"),
   grid.Column("module_name"), 

     grid.Column(header:"Edit", format:@<text><div id="btnEditSelectedRow">
         "@Html.ActionLink("Edit record", "EditUser", "UserManager", new {
         userid = item.userid,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive,
         isapproved = item.IsApproved,
         maxconcurrentusers = item.MaxConcurrentUsers,
         email = item.email, 
         module = item.module_name, 
         group = item.group_name }, null)</div></text>),

    grid.Column(header:"Delete", format:@<text><div id="btnDelSelectedRow">
        "@Html.ActionLink("Delete record", "DeleteUser", "UserManager", new {
         userid = item.userid,
         username = item.UserName,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive, 
         email = item.email, 
         module = item.module_name, 
         group = item.group_name }, null)</div></text>)

})
</div><br />

<script type="text/javascript">
    $(document).ready(function () {

        // Disable checkboxs where a user is not active.
        $(".webgrid-wrapper input:not(:checked)").attr("disabled", "disabled");

        // Style tables.
        function jQueryUIStyling() {
            $('input:button, input:submit').button();

            $('.webgrid-wrapper').addClass('ui-grid ui-widget ui-widget-content ui-corner-all');
            $('.webgrid-title').addClass('ui-grid-header ui-widget-header ui-corner-top');
            jQueryTableStyling();
        } // end of jQueryUIStyling

        function jQueryTableStyling() {
            $('.webgrid').addClass('ui-grid-content ui-widget-content');
            $('.webgrid-header').addClass('ui-state-default');
            $('.webgrid-footer').addClass('ui-grid-footer ui-widget-header ui-corner-bottom ui-helper-clearfix');
        } // end of jQueryTableStyling
    });
</script>
<script type="text/javascript">

    function filterGrid(url) {
        alert("entering filter grid");
        var filters = getFilterVals();
        console.log(filters);

        $.ajax({
            url: url,
            type: "POST",
            async: false,
            data: "alfConnect=" + filters.alfConnect + "&" + "alfIntelligence=" + filters.alfIntelligence + "&" + "brad=" +  filters.brad
            //                data: value
        }).done(function () {
            $(this).addClass("done");
        });
    }

    function getFilterVals() {
        filters = new Object();

        if ($('.webgrid-filter #chkFilterAlfIntell').is(':checked')) {
            filters.alfIntelligence = 1;
        }
        else {
            filters.alfIntelligence = 0;
        }

        if ($('.webgrid-filter #chkFilterAlfConn').is(':checked')) {
            filters.alfConnect = 1;
        }
        else {
            filters.alfConnect = 0;
        }

        if ($('.webgrid-filter #chkFilterBrad').is(':checked')) {
            filters.brad = 1;
        }
        else {
            filters.brad = 0;
        }

        return filters;

    }

    function logUserOff(url) {
        var answer = confirm('Are you sure you want to save this data?')
        if (answer) {
//            alert(url + ": " + value);

            $.ajax({
                url: url,
                type: "POST"
//                data: value
            }).done(function () {
                $(this).addClass("done");
            });

            return true;
        }
        else {
            return false;
        }
    };
</script> 
```

**控制器中的动作结果**

```
 public ActionResult FilterGrid(int alfConnect, int alfIntelligence, int brad)
        {
            List<UserManager.Models.vw_UserManager_Model> modelList  = DAL.getGrid(alfConnect, alfIntelligence, brad);
            return View("Index", modelList);
        } 
```

概括：

有谁知道如何在使用 actionResult 方法和包含模型的新列表发出 ajax 请求后更新 webgrid？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:17:47.437

如果您创建了一个局部视图，然后使用回发/ajax 方法进行更改，那么您可以将页面的整个部分更改为您想要的外观。

在这里的初始加载中，我在 div 中有一个 Partial 调用

```
<div id="userTime">
    @Html.Partial("UserTimeLogs", Model.TimeLogDetail)
</div> 
```

然后我调用了一个定义的动作来获取更新的信息/视图

```
// Fired on click event of object, use live "click" if control in in the partial view as well. in this case it is on a date change in a textbox.
Post(baseUrl + "User/AjaxUserLogTimes/" + loginId, loginId, $("#date").val(), "#userTime");

function Post(PostUrl, id, dateTime, control) {
    $.ajax({
        type: "POST",
        url: PostUrl,
        async: false,
        data: { id: id, requestedDate: dateTime},
        dataType: "html",
        error: function (xhr, status, error) {
            // you may need to handle me if the json is invalid
            // this is the ajax object
            alert(xhr.statusText);
        },
        success: function (data) {
            $(control).html(data);
        }
    }); 
```

Controller 上的 Action 定义为 HttpPost 并返回在初始加载时定义的相同局部视图。

```
 [HttpPost]
    public ActionResult AjaxUserLogTimes(Guid id, DateTime requestedDate)
    {
        return View("UserTimeLogs", timeLogService.GetLogsForUser(id, Period.Daily, requestedDate));
    } 
```

因此，`success`从操作返回的 HTML 会覆盖“#usertime”div 内的部分，并将其替换为新网格。

如果 AJAX，请确保您`ViewStart`有以下内容可以绕过视图返回的布局绑定：

```
@{
    if (!Request.IsAjaxRequest())
    {
    Layout = "~/Views/Shared/_Layout.cshtml";
    }
} 
```

# ruby-on-rails - Errno::ENOENT 没有这样的文件或目录

> ID：13397839
> 
> 赞同：0
> 
> 时间：2012-11-15T12:48:35.197
> 
> 标签：ruby-on-rails, csv

我正在使用 RoR 2.3.8，我想读取一个位于“路径”中的 .csv 文件

```
def run(filepath, contact_id, filename)
        path = "#{filepath}/#{filename}"
        Rails.logger.info path
        return ["The file "+ filename +" does not exist"] unless File.exist?(path)

        CSV.foreach(File.basename(path), {:col_sep => @seperator}) do |row| 
```

当我这样做时，我收到此错误：

```
Errno::ENOENT in Admin::RoutesController#status_race

No such file or directory - /Users/anna/Documents/aphroditel/route_finder/arbinet/app/importersQuickcom-Standard-20121107-FULL.csv` 
```

但我完全确定路径是正确的并且文件在那里。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:08:26.560

你试过没有`File.basename`吗？

```
CSV.foreach(path, {:col_sep => @seperator}) do |row| 
```

# apache - Apache 的 META-INF/resources/ 提取

> ID：13397844
> 
> 赞同：1
> 
> 时间：2012-11-15T12:49:20.400
> 
> 标签：apache, tomcat, servlet-3.0

我有几个罐子，其中包含 /META-INF/resources/ 下的图像

我安装了一个 Apache 来平衡所有 Tomcat 服务器。

现在我得到了一个 servlet3.0 应用程序，可以将这些资源提供给网络。

我不喜欢 tomcat 提供图像，我喜欢 apache 带来图像（因为性能）。

可以将它们提取到 tomcat/work 内部的文件夹中，而无需强制 tomcat 分解 .war 文件吗？

* * *

## 例子

我在下面有一张图片

> /opt/tomcat/webapps/MyApp.war!/WEB-INF/lib/LikeButton.jar!/META-INF/resources/like.png

好的，tomcat 将 like.png 提供给

http://localhost:8080/MyApp/like.png

但是他并没有将**like.png 解压**到一个真实的目录中！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:16:42.557

Using Apache (or any other httpd server) over Tomcat just because of performance reasons [will not give you any significant performance benefits](http://www.tomcatexpert.com/blog/2010/03/24/myth-or-truth-one-should-always-use-apache-httpd-front-apache-tomcat-improve-perform). But it **will add** administrative overhead.

Anyway, if you insist you can extract these files yourself:

1) Find the real path of LikeButton.jar:

```
String relativeWebPath = "/WEB-INF/lib/LikeButton.jar";
String absoluteDiskPath = getServletContext().getRealPath(relativeWebPath);
File likeButtonJar = new File(absoluteDiskPath); 
```

2) Unzip the files. You can use [this tutorial](http://www.mkyong.com/java/how-to-decompress-files-from-a-zip-file/), just add some conditionals against `ZipEntry` to only extract what you really need.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T21:28:50.060

真正的问题是您为什么首先使用 Apache httpd。

> 我不喜欢 tomcat 提供图像，我喜欢 apache 带来图像（因为性能）。

如果 Apache httpd 提供了一些有用的功能，那么它与这个问题有关，你应该说明它。否则，完全转储 httpd 并使用正确配置的 Tomcat（例如，使用 APR 或 NIO 连接器）。

> 可以将它们提取到 tomcat/work 内部的文件夹中，而无需强制 tomcat 分解 .war 文件吗？

```
$ unzip MyApp.war -j WEB-INF/lib/LikeButton.jar \
  && \
  unzip -d /var/www/htdocs/ LikeButton.jar '/META-INF/resources/*' 
```

如果您的 WAR 中有许多 JAR 文件，则必须对每个文件重复上述操作。

更好的是，将构建静态内容目录或 ZIP 文件作为构建过程的一部分，然后将这些文件发布到 Web 服务器。从 WAR post-hoc 中提取它们似乎是错误的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T08:34:17.470

我看到了几个选项：

1.  将您的 servlet 应用程序更改为可配置以从何处引用图像（当您谈论性能时，这也将使您能够使用任何 CDN（内容交付网络） - 从完全不同的主机交付图像会更好性能）。除此之外，您还需要将图像提取到 httpd 可用的某个位置，并配置您的应用程序以引用相应的 URL。

2.  在 Apache 上使用缓存从 tomcat 请求图像一次，然后从缓存中请求图像。这将使您能够在部署具有不同图像/资源的更新版本时刷新缓存，并且通常提供最简单的部署 - 一旦缓存设置正确 - 您只需要更新您的 servlet 应用程序而不接触任何静态- 文件分开存储。缺点是您的应用需要提供正确的与缓存相关的 http-headers，但这也可能被视为一个积极方面：无论如何它都应该这样做。

关于性能要求的免责声明/评论：在 95% 的情况下，我看到要在任何测量之前提出性能参数。该应用程序很可能在性能方面表现良好。如果不是这样，通过 Apache 提供图像可能不是提高性能的最有效方法。您可以对这些更改执行的操作是将应用服务器的性能提高 2%，但由于配置/部署复杂性的提高，将系统管理和开发性能降低 10%。

如果您在另外 5% 的范围内并且该免责声明不适用于您的情况，我们深表歉意，但许多其他人会阅读这个问题，我觉得这是一个非常重要的方面。

# ruby-on-rails - Rails：渲染集合部分：获取部分内部集合的大小

> ID：13397848
> 
> 赞同：13
> 
> 时间：2012-11-15T12:49:42.467
> 
> 标签：ruby-on-rails

我有一组我想用部分渲染的项目：

```
@items = ['a','b','c']

<%= render :collection => @items, :partial => 'item' %> 
```

我想用*升序对元素进行编号*。所以输出应该是：

```
3: a
2: b
1: c 
```

我知道 rails 在部分内部提供了一个计数器，所以如果我想对项目进行编号*，*我可以创建以下部分：

```
<%= item_counter %>: <%= item %> 
```

这给了我

```
1: a
2: b
3: c 
```

但是对于*升序*的数字，我需要项目的总数，我可以提供一个局部的局部：

```
<%= render :collection => @items, :partial => 'item', :locals => {:total => @items.size} %> 
```

然后在部分：

```
<%= total - item_counter %>: <%= item %> 
```

但在我看来，这就像重复，因为 render 方法已经知道集合的大小。

**除了使用局部变量之外，真的没有办法在部分中获取集合的项目总数吗？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-15T20:50:54.953

**从 Rails 版本 4.2 开始**，以下是可能的：

在部分内部，您可以访问一个名为`collection_iteration`. 打电话`collection_iteration.size`会给你总数。

从[变更日志](https://github.com/rails/rails/blob/v4.2.0/actionview/CHANGELOG.md)：

> `#{template_name}_iteration`使用集合渲染局部变量时，迭代对象可用作局部变量 。
> 
> 它可以访问`size`被迭代的集合，当前`index`和两个方便的方法`first?`和`last?`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-23T20:08:58.010

啊。想回答问题。但找到了正确答案。无论如何，这里是关于未来的提示。您可以使用 Ruby 元编程来研究 Rails 机制。例如，通过在我的情况下输出的视图中调用方法“Kernel#local_variables”：

```
[0] = :local_assigns
[1] = :output_buffer
[2] = :row
[3] = :row_counter
[4] = :row_iteration
[5] = :highlighted_description
[6] = :source_description 
```

的情况下

```
 <%= render partial: 'card', collection: @offers, as: :row %> 
```

# windows - 在 Windows 应用程序中嵌入谷歌浏览器

> ID：13397857
> 
> 赞同：0
> 
> 时间：2012-11-15T12:50:25.177
> 
> 标签：windows, api, google-chrome, activex, embed

有没有什么办法可以在我们的 Windows 应用程序中嵌入 Google Chrome 引擎来显示 HTML 页面，就像我们可以在我们的程序中使用 IE ActiveX 一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:58:55.220

谷歌浏览器是开源的。下载源码并实现渲染器

# java - SOAPMessage writeTo 不带附件

> ID：13397861
> 
> 赞同：5
> 
> 时间：2012-11-15T12:50:41.863
> 
> 标签：java, web-services, jakarta-ee

我使用[SOAPMessage.writeTo(OutputStream)](http://docs.oracle.com/javaee/5/api/javax/xml/soap/SOAPMessage.html#writeTo%28java.io.OutputStream%29)来记录 Web 服务消息。一个问题是它也写附件。它占用空间并且二进制附件不可读。有什么方法可以记录没有附件的消息，例如包装器？

一定有比这个更好的解决方案。

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
message.writeTo(out);
StringBuilder builder = new StringBuilder(out.toString());

int indexOfAttachment = builder.indexOf("------=");
if (indexOfAttachment != -1) {
    return builder.substring(0, indexOfAttachment);
}

return builder.toString(); 
```

示例消息

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Header />
    <S:Body>
        <ns2:wsGetObjectByIDResponse
            xmlns:ns2="http://xxx.com/"
            xmlns:ns3="http://yyy.com/">
            <return>
                <serviceResponse status="OK" />             
                <contentData formatName="jpeg_lres"
                    objectContent="cid:e677f02c-002a-4c2c-8fd9-a3acdba5ad11@example.jaxws.sun.com"
                    objectName="Smlouva1.jpg" />
            </return>
        </ns2:wsGetObjectByIDResponse>
    </S:Body>
</S:Envelope>
------=_Part_9_-806948376.1352979403086
Content-Type: image/jpeg
Content-ID: <e677f02c-002a-4c2c-8fd9-a3acdba5ad11@example.jaxws.sun.com>
Content-Transfer-Encoding: binary
����\x00JFIF\x00\x00�\x00�\x00\x00��\x00C\x00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-25T13:10:32.823

实际上有一种方法可能更清洁。

这是我的代码：

```
// Get the Envelope Source 
Source src = message.getSOAPPart().getContent() ;

// Transform the Source into a StreamResult to get the XML
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "no");
StreamResult result = new StreamResult(new StringWriter());
transformer.transform(src, result);
String xmlString = result.getWriter().toString(); 
```

然后您可以记录 xmlString，它仅对应于 Envelope 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T02:08:40.040

您可以使用此链接找到您的答案。[http://ws.apache.org/axiom/quickstart-samples.html](http://ws.apache.org/axiom/quickstart-samples.html)。阅读不内联优化二进制数据的记录 MTOM 消息部分

# android - 使用 MediaCodec 进行 H264 流式传输

> ID：13397863
> 
> 赞同：8
> 
> 时间：2012-11-15T12:50:44.183
> 
> 标签：android, video-streaming, h.264, rtp

我目前正在尝试将 Android 用作 Skype 端点。在这个阶段，我需要将视频编码为 H.264（因为它是 Skype 唯一支持的格式）并用 RTP 封装以使流媒体工作。

显然，`MediaRecorder`由于各种原因，它不是很适合这个。一是因为它在完成后添加了 MP4 或 3GP 标头。另一个是因为为了将延迟减少到最低限度，硬件加速可能会派上用场。这就是为什么我想利用最近对框架的低级添加，being `MediaCodec`，`MediaExtractor`等等。

目前，我计划如下工作。相机将其视频写入缓冲区。MediaCodec 使用 H264 对视频进行编码并将结果写入另一个缓冲区。此缓冲区由 RTP 封装器读取，它将流数据发送到服务器。这是我的第一个问题：这个计划对你来说可行吗？

现在我已经坚持第一步了。由于互联网上有关使用相机的所有文档都使用了`MediaRecorder`，因此我找不到在编码之前将其原始数据存储到缓冲区中的方法。[addCallbackBuffer](http://developer.android.com/reference/android/hardware/Camera.html#addCallbackBuffer%28byte%5B%5D%29)适合这个吗？任何人都有一个例子的链接？

接下来，我找不到很多关于 MediaCodec 的文档（因为它相当新）。谁有扎实的教程？

最后：对 RTP 库有什么建议吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-26T10:23:41.600

**更新**
我终于能够从 h264 帧创建正确的 RTP 包。以下是您必须牢记的（实际上很简单）：

编码器确实为每个帧创建 NAL 标头。但它将每一帧作为 h264**字节流**返回。这意味着每一帧都以三个 0 字节和一个 1 字节开始。您所要做的就是删除这些起始前缀，并将帧放入 RTP 数据包（或使用 FU-As 将它们拆分）。

现在回答你的问题：

> 我找不到在编码之前将其原始数据存储到缓冲区中的方法。addCallbackBuffer 适合这个吗？

您应该使用 camera.setPreviewCallback(...)，并将每一帧添加到编码器。

> 我找不到很多关于 MediaCodec 的文档（因为它相当新）。谁有扎实的教程？

这应该是对 MediaCodec 工作原理的一个很好的介绍。[http://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/](http://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/)

> 最后：对 RTP 库有什么建议吗？

我正在使用 jlibrtp 来完成工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T22:13:36.473

我对 MediaCodec 或 MediaExtractor 一无所知，但我对 MediaRecorder 相当熟悉，并且已经成功实现了一个基于 SpyDroid 的 RTSP 服务器，它从 MediaRecorder 捕获 H264/AMRNB 输出。基本思想是代码创建一个本地套接字对并使用 MediaRecorder 的 setOutputFile 将输出写入该对中的一个套接字。然后，程序从另一个套接字读取视频或音频流，将其解析为数据包，然后将每个数据包包装成一个或多个通过 UDP 发送的 RTP 数据包。

确实，MediaRecorder 在完成后会添加 MOOV 标头，但如果您以 RTP 格式提供 H264 视频，这不是问题。基本上，视频流的开头有一个“mdat”标头。它有 4 个字节作为标头长度，然后是 4 个字节“mdat”。读取长度以找出标头有多长，验证它是 mdat 标头，然后跳过其余的标头数据。从那里开始，你会得到一个 NAL 单元流，它以 4 个字节作为单元长度。小的 NAL 单元可以在单个 RTP 数据包中发送，而较大的单元被分解为 FU 数据包。对于 RTSP，您还需要提供描述流的 SDP 标头。SpyDroid 通过将非常短的电影写入文件来计算 SDP 标头中的信息，然后读取此文件以从末尾提取 MOOV 标头。我的应用程序总是使用相同的大小、格式和比特率，所以我只提供一个静态字符串：

```
public static final String SDP_STRING =
        "m=video 5006 RTP/AVP 96\n"
                + "b=RR:0\n"
                + "a=rtpmap:96 H264/90000\n"
                + "a=fmtp:96 packetization-mode=1;profile-level-id=428028;sprop-parameter-sets=Z0KAKJWgKA9E,aM48gA==;\n"
                + "a=control:trackID=0\n"
                + "m=audio 5004 RTP/AVP 96\n"
                + "b=AS:128\n"
                + "b=RR:0\n"
                + "a=rtpmap:96 AMR/8000\n"
                + "a=fmtp:96 octet-align=1;\n"
                + "a=control:trackID=1\n"; 
```

这是我的 640x480x10fps、H264 视频的标头，带有 8000/16/1 AMRNB 音频。

我可以警告您一件事：如果您使用的是 MediaRecorder，您的预览回调将永远不会被调用。这仅适用于相机模式，不适用于录制视频。在录制视频时，我找不到任何方法可以访问未压缩格式的预览图像。

我强烈建议查看 SpyDroid 的代码。这需要一些挖掘，但我敢打赌你想要的东西已经在那里了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:08:45.677

你的计划是绝对可行的。您可以注册一个 Camera.PreviewCallback，它获取图片数据并将其放入 MediaCodec。您读取输出并将其作为 RTP 发送。一般来说，这很容易，但是在不同的设备上存在未记录的色彩空间和不同的 MediaCodec 行为等各种缺陷，但这绝对是可能的。

# jquery - jquery .on 父选择器

> ID：13397864
> 
> 赞同：3
> 
> 时间：2012-11-15T12:50:45.987
> 
> 标签：jquery, jquery-selectors

这里曾经有：

```
$("#element").parent().click(function() { alert("smth"); }); 
```

新的 jQuery 事件委托相当于什么`on`？

```
$(document).on("click", "how to select #element parent here?", function() { alert("smth"); }); 
```

更新：实际代码（虽然我看不出这会改变什么）

```
$(document).on("mouseover", ":has(>.hoverPhone)", function() {
    alert("smth");
}); 
```

“#hoverPhone”是 jquery 数据表的一列的单元格中的跨度。

```
<tr class="odd">
    <td class=" sorting_1">05/11/2012</td>
    <td class="">Surname</td>
    <td class="">
        <span class="hoverPhone" title="Alternative No: 0123456789">9876543210</span>
    </td>
    <td class="">DIGITAL CAMERA</td>
    <td class="">6140</td>
    <td class="">CAMTRONICS</td>
    <td class="">clarify</td>
</tr> 
```

顺便说一句，这仍然行不通。

更新2：似乎工作。然而，个人评论......“：has（> .element）”真的，jQuery？下一步是什么？这越来越令人困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:52:05.607

我有最简单的：

```
$(document).on("click", ":has(>#element)", function(){... 
```

[示范](http://jsfiddle.net/dystroy/QTwTg/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:53:11.297

您仍然可以以相同的方式分配事件侦听器：

```
$('#element').parent().on('click', function() { }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:59:59.550

如果您正在寻找委托来处理动态添加的元素，那么您不能按照您建议的方式进行操作。您需要处理*可能*是父元素的所有元素的单击事件，并检查它们是否将有问题的元素作为子元素...

```
$(document).on("click", "*", function() {
    if ($(this).children("#element").length > 0) {
        alert("parent clicked");
    }
}); 
```

如果可能，我强烈建议更改`document`为更接近的容器元素，并更改`*`为父标记类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:54:33.197

这仍然可以正常工作：

```
$("#element").parent().on("click", function() {
     alert("smth"); 
}); 
```

# php - 如何将 Symfony2 路由转储到 nginx？

> ID：13397873
> 
> 赞同：10
> 
> 时间：2012-11-15T12:51:26.107
> 
> 标签：php, symfony, nginx

我读过我应该将 symfony2 路由转储到我的 Web 服务器以绕过 symfony2 路由器，以提高性能。[我找到了apache](http://slides.seld.be/?file=2011-10-20+High+Performance+Websites+with+Symfony2.html#38)的示例。

您将如何为 nginx 执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T15:07:02.327

目前，由于 nginx 的构建方式，这是不可能的。[https://github.com/symfony/symfony/issues/2432](https://github.com/symfony/symfony/issues/2432)

# java - 扫描仪类：检测单词中的音节

> ID：13397876
> 
> 赞同：2
> 
> 时间：2012-11-15T12:51:29.570
> 
> 标签：java, java.util.scanner

我一直在为大学的一个小组项目创建一个 Pig Latin 翻译器（我们不必实际制作翻译器，只需以我们喜欢的任何方式操作字符串，我选择了这个）。

我的翻译器输入的是拉丁文祈祷文，前两行是：

```
credo in unum deum 
patrem omnipotentem 
```

我用以下代码创建了我的翻译器：

```
public static void pigLatinify(String fname) throws IOException 
{
    File file = new File("projectdata.txt");

    try 
    {
        Scanner scan1 = new Scanner(file);
        while (scan1.hasNextLine()) 
        {
            Scanner scan2 = new Scanner(scan1.nextLine());
            boolean test2;
            while (test2 = scan2.hasNext())
            {
                String s = scan2.next();
                char firstLetter = s.charAt(0);
                if (firstLetter=='a' || firstLetter=='i' || firstLetter=='o' || firstLetter=='e' || 
                        firstLetter=='u' || firstLetter=='A' || firstLetter=='I' || firstLetter=='O' || 
                        firstLetter=='E' || firstLetter=='U')
                {
                    String output = s + "hay" + " ";
                    System.out.print(output);
                }
                    else
                    {
                        String restOfWord = s.substring(1);
                        String output = restOfWord + firstLetter + "ay" + " ";
                        System.out.print(output);
                    }
                }
                System.out.println("");
            }
            scan1.close();
        } 

        catch (FileNotFoundException e) 
        {
            e.printStackTrace();
        }
    }
} 
```

它很好地输出了整个祈祷，前两行的输出如下：

```
redocay inhay unumhay eumday 
atrempay omnipotentemhay 
```

然而，在真正的猪拉丁语中，单音节词保持不变并在末尾添加“-hay”，因此“it”变为“ithay”，“egg”变为“egghay”，但多音节词添加了“-way”到最后，所以“archery”变成了“archeryway”，“ending”变成了“endingway”。

Java（以及我正在使用的扫描仪类）有没有办法检测一个单词是否是单音节的？

在这一点上我还要指出我只是一个初学者程序员，所以如果有但它非常复杂，请随意说！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:00:33.417

我认为您的困难不在于编写 Java，而在于建立计算单词中音节的万无一失的规则。对于您的语言，我倾向于为一个单词中每个连续运行的元音计算一个音节，但不要将终端`e`视为音节的证据。

所以，

`eat`有一个音节，只有一个元音；

`ate`有一个，两个元音，少一个用于终端`e`

`eight`有一个音节

`eighteen`有两个

`funicular`有四个

*ETC*

我很确定您会找到这套简单规则的反例，但也许它们足以让您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:15:57.087

如果你想正确地做到这一点，你将不得不找到一本带有音节的拉丁词典。拉丁语相当规律，但也有例外。像[http://athirdway.com/glossa/](http://athirdway.com/glossa/)这样的字典有scansion

```
crēdo, dĭdi, dĭtum 
```

但一次只能使用一个单词。您还必须为音节编写解析器。我提到这一点是因为人们认为语言很容易解析和解释——它们通常不是！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:34:44.590

如何获得这样的音节数：

```
/**
 * Get the number of syllables for a given word
 * @param s the given word
 * @return the number of syllables
 */
public static int getNumberOfSyllables(String s) {
    s = s.trim();
    if (s.length() <= 3) {
        return 1;
    }
    s = s.toLowerCase();
    s = s.replaceAll("[aeiouy]+", "a");
    s = "x" + s + "x";
    return s.split("a").length - 1;
} 
```

# bash - 用于自由空间监控目的的 BASH 脚本修改

> ID：13397877
> 
> 赞同：0
> 
> 时间：2012-11-15T12:51:31.450
> 
> 标签：bash

无法进行修改以适应我的环境，这是 check_disc 功能，但在通过 /dev/mapper/ 附加磁盘的环境中无法正常工作，所以我有例如 /dev/mapper/debian-var 而不是 /var .

BASH 脚本中的函数：

```
function check_disks {

    THOLD=$1;
    DISK_ERROR="";

    # df -kl is the most portable options for df 

    MOUNTS=`df -lk | grep -v devfs | grep -v none | grep -v Filesystem | awk '{print $6}'`;
    for MOUNT in $MOUNTS; do
        PERCENT=`df -kl $MOUNT | grep -v Filesystem | awk '{print $5}' | sed 's/\%//'`;
        if [ $PERCENT -gt $THOLD ]; then
            DISK_ERROR="$DISK_ERROR    Volume '$MOUNT' is at $PERCENT% usage.\n";
        fi
    done
    if [ -n "$DISK_ERROR" ]; then
        echo -en "ERROR: The following volumes have exceeded the allowable threshold of $THOLD% usage.\n$DISK_ERROR";
        return 1;
    else
        return 0;
    fi

} 
```

df -kl cmd 的输出：

```
df -kl
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/mapper/debian-root
                       1919048    493616   1327948  28% /
tmpfs                 18717148        12  18717136   1% /lib/init/rw
udev                     10240       784      9456   8% /dev
tmpfs                 18717148         0  18717148   0% /dev/shm
/dev/cciss/c0d0p1       241116     23679    204989  11% /boot
/dev/mapper/debian-home
                       3842104   2681264    965668  74% /home
/dev/mapper/debian-tmp
                       4805760    366228   4195412   9% /tmp
/dev/mapper/debian-usr
                       3842104   1816200   1830732  50% /usr
/dev/mapper/debian-var
                     377857560 183429768 175233732  52% /var 
```

我猜这条线应该改变：

```
MOUNTS=`df -lk | grep -v devfs | grep -v none | grep -v Filesystem | awk '{print $6}'`; 
```

但不确定如何。任何人都可以帮我一把吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:09:06.347

有一个可移植性选项`df`，可将输出保持在每卷一行：

```
 -P, --portability
          use the POSIX output format 
```

我认为改变

```
MOUNTS=`df -lk | grep -v devfs | grep -v none | grep -v Filesystem | awk '{print $6}'` 
```

到

```
MOUNTS=`df -lkP | grep -v devfs | grep -v none | grep -v Filesystem | awk '{print $6}'` 
```

有助于。

仅供参考，这是输出差异的示例：

```
$ df -lk | grep -B1 /var
/dev/mapper/rootvg-var
                   4062912   1900724   1952476  50% /var
$ df -lkP | grep /var
/dev/mapper/rootvg-var   4062912   1900748   1952452      50% /var 
```

# sql-server - 引用自动递增父 ID 的批量加载 XML

> ID：13397885
> 
> 赞同：3
> 
> 时间：2012-11-15T12:52:04.030
> 
> 标签：sql-server, xsd, sqlxml, bulk-load

**简而言之**：我想对 SQL Server (2008) 数据库进行 XML 批量加载，并为父级生成自动增量 ID，可以在子级中使用。这似乎受到范围的限制：父节点尚未完成，因此尚未插入。有人知道解决这个问题的方法吗？

**更长的描述**（对不起，它真的很长，但我尽量完整）：

从一个客户那里，我得到了很多具有相似结构的 XML 文档，从中可以生成一个测试数据库。它们被导出以供其他工具使用，我的客户没有权限也没有联系来影响结构或内容。（这些工具是由另一方为母公司编写的。）他也没有对 XML 或导出它们的数据库的正式描述。

事实证明，“顶级”XML 节点`<Registration>`确实有 ID，但它们在文档中并不是唯一的。（顶部节点是相对的，它们确实有一个根节点和一个列表节点，但在 XML 中它们是进入数据库的最高元素。）ID 可以在其他 XML 文档中使用，因为它们引用到`<Case>`不在导出中的另一个对象。所以我需要生成自动增量ID，以保持所有`<Registration>`元素的唯一性，即使跨文件也是如此。

我的`<Registration>`-node 有很多女儿，例如`<Activity>`-node。这些节点需要引用它们的父节点，因此它们应该使用生成的 auto-increment-id。但是，由于它们是未完成父节点的一部分，因此父节点仍在范围内，并且尚未插入表中，如[msdn](http://msdn.microsoft.com/en-us/library/ms172633%28v=sql.110%29.aspx)和[technet](http://technet.microsoft.com/en-us/library/ms172633.aspx)上的“记录子集和密钥排序规则”中所述。但是，这些站点上的示例具有明确的唯一`CustomerId`ID，而不是自动生成的 Id。

尽管这个关于“密钥排序规则”的文档看起来无法做到这一点，但我不能相信对于缺少（唯一）ID 的 XML 文件没有办法解决这个问题。更奇怪的是：它确实在 child 中插入了一个 parent-id，但数字低了一个。所以我假设这是前一个范围的自动增量 ID（其中 0 是默认值，尚未插入任何内容，我确实希望为 NULL）。所以我确实看到了一种解决方法：之后增加我的子表中的父键（`UPDATE Activity SET RegistrationId = RegistrationId + 1`）。但是，这确实需要保持一个限制 ( `WHERE TimeStamp > ...`) 并且不需要其他（手动或脚本）干预。

我已经尝试了很多不同的关系船和 VB 脚本（例如，我更喜欢自动生成我的表格），但我只会发布我的最新尝试。这也将用于说明从前一个范围插入自动增量 ID。

我的主要问题是：

*   是否有可能获得正确的自动递增父 ID？

但也欢迎其他提示，例如：

*   `CREATE TABLE`在 SQL 中没有显式语句的情况下，使用什么设置自动生成自动增量标识？

生成表格：

```
CREATE TABLE [dbo].[Registration](
  [Id] INT IDENTITY(1,1) NOT NULL CONSTRAINT PK_Registration PRIMARY KEY,
  [XmlId] [nvarchar](40) NULL,
)
CREATE TABLE [dbo].[Activity](
  [Id] INT IDENTITY(1,1) NOT NULL CONSTRAINT PK_Activity PRIMARY KEY,
  [RegistrationId] INT CONSTRAINT FK_Activity_Registration FOREIGN KEY (RegistrationId) REFERENCES Registration (Id),
  [XmlId] [nvarchar](1000) NULL,
) 
```

要导入的 XML 文件：

```
<Updates>
  <Registrations>
    <Registration ID="NonUniqCaseId-123">
      <Activities>
        <Activity ID="UniqActId-1234" />
        <Activity ID="UniqActId-1235" />
      </Activities>
    </Registration>
    <Registration ID="NonUniqCaseId-124">
      <Activities>
        <Activity ID="UniqActId-1241" />
        <Activity ID="UniqActId-1242" />
      </Activities>
    </Registration>
  </Registrations>
</Updates> 
```

用于测试上传的 VB 脚本（我想稍后在程序中包含一个循环，以处理多个文件）：

```
 Dim objBL 
Set objBL = CreateObject("SQLXMLBulkLoad.SQLXMLBulkload.4.0")
objBL.ConnectionString = "provider=SQLOLEDB;data source=localhost;database=Test;integrated security=SSPI"
objBL.ErrorLogFile = "error.log"

objBL.CheckConstraints = False
objBL.XMLFragment = False
objBL.SchemaGen = True
objBL.SGDropTables = False
objBL.KeepIdentity = False

objBL.Execute "BulkTestMapping.xsd", "BulkTestContents.xml"
Set objBL = Nothing 
```

XSD：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"
    attributeFormDefault="qualified"
    elementFormDefault="qualified"
    xmlns:sql="urn:schemas-microsoft-com:mapping-schema">

  <xs:annotation>
    <xs:appinfo>
      <sql:relationship name="Registration_Activity"
            parent="Registration"
            parent-key="Id"
            child="Activity"
            child-key="RegistrationId"
            inverse="true"
            />
    </xs:appinfo>
  </xs:annotation>

  <xs:element name="Registration"
              sql:relation="Registration"
              sql:key-fields="Id" 
            >
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Activities" minOccurs="0" maxOccurs="unbounded" sql:is-constant="true">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Activity" minOccurs="0" maxOccurs="unbounded"
                     sql:relation="Activity" 
                     sql:key-fields="RegistrationId"
                     sql:relationship="Registration_Activity"
              >
                <xs:complexType>
                  <xs:attribute name="ID" sql:field="XmlId" form="unqualified" type="xs:string" />
                  <xs:attribute name="DbId" sql:identity="ignore" sql:field="Id" msdata:AutoIncrement="true" msdata:ReadOnly="true" type="xs:int" /> 
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="ID" form="unqualified" sql:field="XmlId" />
      <xs:attribute name="DbId" sql:identity="ignore" sql:field="Id" msdata:AutoIncrement="true" type="xs:int" /> 
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

结果表（注意减`RegistrationId`一）：

```
[Registration]
Id  XmlId
1   NonUniqCaseId-123
2   NonUniqCaseId-124

[Activity]
Id  RegistrationId  XmlId
1   0   UniqActId-1234
2   0   UniqActId-1235
3   1   UniqActId-1241
4   1   UniqActId-1242 
```

**编辑**：这比我想象的还要糟糕。如果我再次添加记录，外键（子键）再次从 0 开始！所以很难甚至不可能确定更正（每张表）应该是什么：

```
[Registration]
Id  XmlId
1   NonUniqCaseId-123
2   NonUniqCaseId-124
3   NonUniqCaseId-123
4   NonUniqCaseId-124

[Activity]
Id  RegistrationId  XmlId
1   0   UniqActId-1234
2   0   UniqActId-1235
3   1   UniqActId-1241
4   1   UniqActId-1242
5   0   UniqActId-1234
6   0   UniqActId-1235
7   1   UniqActId-1241
8   1   UniqActId-1242 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:35:39.873

我不知道使用 XML 进行批量加载，所以这里是使用 TSQL 来执行此操作的答案。

在 SQL Server 2008 中，您可以将合并与输出结合使用来创建源数据和目标自动生成的 id 之间的映射。

[使用 merge..output 获取 source.id 和 target.id 之间的映射](https://stackoverflow.com/questions/5365629/using-merge-output-to-get-mapping-between-source-id-and-target-id)

[OUTPUT 博士或：我如何学会停止担心并爱上 MERGE](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/24/dr-output-or-how-i-learned-to-stop-worrying-and-love-the-merge.aspx)

在这种情况下，您可以将具有生成的 id 的子 XML 节点合并`Registration`并输出到临时表或表变量，然后使用该表插入到`Activity`.

[SQL小提琴](http://sqlfiddle.com/#!3/4078f/2)

**MS SQL Server 2008 架构设置**：

```
CREATE TABLE [dbo].[Registration](
  [Id] INT IDENTITY(1,1) NOT NULL CONSTRAINT PK_Registration PRIMARY KEY,
  [XmlId] [nvarchar](40) NULL,
);

CREATE TABLE [dbo].[Activity](
  [Id] INT IDENTITY(1,1) NOT NULL CONSTRAINT PK_Activity PRIMARY KEY,
  [RegistrationId] INT CONSTRAINT FK_Activity_Registration FOREIGN KEY (RegistrationId) REFERENCES Registration (Id),
  [XmlId] [nvarchar](1000) NULL,
); 
```

**查询 1**：

```
declare @XML xml = '
<Updates>
  <Registrations>
    <Registration ID="NonUniqCaseId-123">
      <Activities>
        <Activity ID="UniqActId-1234" />
        <Activity ID="UniqActId-1235" />
      </Activities>
    </Registration>
    <Registration ID="NonUniqCaseId-124">
      <Activities>
        <Activity ID="UniqActId-1241" />
        <Activity ID="UniqActId-1242" />
      </Activities>
    </Registration>
  </Registrations>
</Updates>';

declare @T table
(
  RegistrationId nvarchar(40),
  Activities xml
);

merge Registration as T
using
  (
  select R.N.value('@ID', 'nvarchar(40)') as XmlId,
         R.N.query('Activities') as Activities
  from @XML.nodes('/Updates/Registrations/Registration')  as R(N)
  ) as S
on 0 = 1
when not matched then
  insert(XmlId) values (S.XmlId)
output inserted.Id, S.Activities into  @T(RegistrationId, Activities);

insert into Activity(RegistrationId, XmlId)
select T.RegistrationId,
       A.N.value('@ID', 'nvarchar(1000)')
from @T as T
  cross apply T.Activities.nodes('Activities/Activity') as A(N); 
```

**查询 2**：

```
select *
from Registration; 
```

**[结果](http://sqlfiddle.com/#!3/4078f/2/1)**：

```
| ID |             XMLID |
--------------------------
|  1 | NonUniqCaseId-123 |
|  2 | NonUniqCaseId-124 | 
```

**查询 3**：

```
select *
from Activity; 
```

**[结果](http://sqlfiddle.com/#!3/4078f/2/2)**：

```
| ID | REGISTRATIONID |          XMLID |
----------------------------------------
|  5 |              1 | UniqActId-1234 |
|  6 |              1 | UniqActId-1235 |
|  7 |              2 | UniqActId-1241 |
|  8 |              2 | UniqActId-1242 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:31:50.353

好吧，答案很简单：只需省略`inverse`中的`XSD`，因此删除此行：

```
inverse="true" 
```

我介绍这个是因为我有很多多对多的关系。（我的示例是重现问题的非常简短的摘录。）但似乎我在太多地方介绍了它。

**推测**：（不幸的是，我没有时间调查/确认下一个假设。）

我现在假设*，*那`inverse`应该只用于关系女儿的一面，而不是母亲的一面。例如，当 A 和 B 具有多对多关系 A_B 时，XML 看起来像这样：

```
<ListOfA>
  <A ID="Uniq_A123">
    <A_B>
      <B ID="NonUniq_B234" />
    </A_B>
    <A_B>
      <B ID="NonUniq_B235" />
    </A_B>
  </A>
  <A ID="Uniq_A124">
    <A_B>
      <B ID="NonUniq_B234" />
    </A_B>
  </A>
</ListOfA> 
```

A 作为 XML-mother，隐含地是 A_B 中关系的“父”，然后 B 应该通过指定从子显式反转到父`inverse`。但是，由于我正在为 A 和 B 生成我自己的 ID，我怀疑这是否对我有用，之后我将只运行修复查询。

# jsf - “http://myfaces.apache.org/tomahawk”未找到。JSF 中的错误

> ID：13397887
> 
> 赞同：0
> 
> 时间：2012-11-15T12:52:06.140
> 
> 标签：jsf, jakarta-ee, file-upload, jsf-2, tomahawk

我想用 JSF 将 Excel 文件上传到 JBoss 服务器，所以我使用了 Tomahawk。

```
<%@ taglib uri="http:// myfaces.apache.org/tomahawk" prefix="t" %> 

<h:form id="MF" enctype="multipart/form-data" > 
<t:inputFileUpload id="fileupload" value="#{dataentryctl.minvoice}" storage="file" required="false" /> 
<h:commandButton id="Submit" type="button" action="#{dataentryctl.ProcessData}" value="save" 
onclick="revalidateF12();submitForm()" onkeydown="keyDownEvents(this)" /> 
</h:form> 
```

我有以下 JAR：

```
tomahawk-1.1.9.jar 
commons-el-1.0.jar 
commons-logging-1.1.1.jar 
commons-fileupload-1.2.2-javadoc.jar 
commons-io-1.4.jar 
```

其他与 JSF 相关的 JAR 已经存在。其他 JSP 页面工作正常。

我也添加了 web.xml（我在启动 jBoss 服务器时没有收到任何错误）

```
<filter> 
<filter-name>extensionsFilter</filter-name> 
<filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class> 
<init-param> 
<description> ... </description><param-name>uploadMaxFileSize</param-name> 
<param-value>100m</param-value> 
</init-param> 
<init-param> 
<description> ...</description> 
<param-name>uploadThresholdSize</param-name> 
<param-value>100k</param-value> 
</init-param> 
</filter> 
<filter-mapping> 
<filter-name>extensionsFilter</filter-name><url-pattern>.jsf</url-pattern> 
</filter-mapping> 
<filter-mapping> 
<filter-name>extensionsFilter</filter-name><url-pattern>/faces/</url-pattern> 
</filter-mapping> 
```

动作类包 panaceaFACweb.FACCtlbean；

```
import org.apache.myfaces.custom.fileupload.UploadedFile; 
import javax.servlet.http.HttpSession; 
import java.io.IOException; 
import java.io.InputStream; 
import java.io.InputStreamReader; 

public class dataentryctl { 

private UploadedFile minvoice; 

public UploadedFile getMinvoice() { 
return minvoice; 
} 

public void setMinvoice(UploadedFile minvoice) { 
this.minvoice = minvoice; 
} 

public String ProcessData() { 
load(); 
return null; 
} 

public void load() { 

try { 
InputStream input = minvoice.getInputStream(); 
// ... 
} catch (IOException e) { 
e.printStackTrace(); 
}catch (Exception e) { 
e.printStackTrace(); 
} 
} 
} 
```

请帮我修复它，我尝试了一个多星期:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:57:31.440

这里，

```
<%@ taglib uri="http:// myfaces.apache.org/tomahawk" prefix="t" %> 
```

taglib URI 中的方案后有一个悬空空间。去掉它：

```
<%@ taglib uri="http://myfaces.apache.org/tomahawk" prefix="t" %> 
```

* * *

**与具体问题无关**，扩展过滤器的过滤器映射的 URL 模式是错误的。您应该使用`*.jsf`和`/faces/*`。或者，更好的是，直接将它映射到 servlet 名称上`FacesServlet`。

# java - 监视文件夹同时没有发生

> ID：13397888
> 
> 赞同：0
> 
> 时间：2012-11-15T12:52:11.590
> 
> 标签：java

我正在实现一个应用程序，该应用程序需要同时监视文件夹并在文件夹中发生任何更改时发送报告。让我们来。在父文件夹下将有 6 个子文件夹。我将在字符串数组中获取子文件夹名称，如果我使用 for 循环和监视器进行迭代，就像一个接一个地监视它们。但是我同时同时监控了所有内容。

我该怎么做，请建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:56:02.210

你需要 NIO watch 服务。

查看[http://docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)获取教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:55:26.867

您可以使用线程，希望此链接对您有所帮助 [http://www.javamex.com/tutorials/threads/](http://www.javamex.com/tutorials/threads/)

其次，您也可以查看此内容以了解如何同时运行任务

[如何在 Java 中同时执行多个进程？](https://stackoverflow.com/questions/11892740/how-do-i-execute-multiple-processes-simultaneously-in-java)

# c# - 没有从 excel 文件中读取所有数据

> ID：13397891
> 
> 赞同：0
> 
> 时间：2012-11-15T12:52:30.137
> 
> 标签：c#, excel, ole

我正在使用下面的代码从 excel 表中读取数据并将数据添加到数据表中，但是在读取文件并检查数据表中的数据时，一些数据丢失了。我一直在看这个和不知道为什么会这样。

```
excelConnectionString =
                  "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName +
                      " ;Extended Properties=Excel 12.0";
            try
            {
                // Create Connection to Excel Workbook
                using (OleDbConnection connection =
                new OleDbConnection(excelConnectionString))
                {
                    connection.Open();
                    System.Data.DataTable dt = connection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
                    string[] excelSheet = new String[dt.Rows.Count];
                    int sheet = 0;
                    foreach (DataRow row in dt.Rows)
                    {
                        excelSheet[sheet] = row["Table_Name"].ToString();
                        sheet++;

                    }
                    for (int i = 0; i < excelSheet.Length; i++)
                    {
                        OleDbCommand command = new OleDbCommand
                             ("Select  * FROM [" + excelSheet[i] + "]", connection);

                        adapter.SelectCommand = command;
                        adapter.Fill(dt);
                        dataGridView1.DataSource = dt;
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:50:56.687

没有人可以重现您的问题并找出某个问题。但是你可以在这里找到类似的问题。

[通过 Datagridview 读取 Excel 文件](http://www.codeproject.com/Questions/376355/import-MS-Excel-to-datatable)

[将 Excel 导出到数据表](http://excelcsharp.blog.com/2012/10/29/export-excel-to-datatable-and-import-datatable-to-excel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:14:48.093

使用`OledbConnection`读取 Excel 文件时会遇到一个问题，即每列的字符数限制为 255。

您可以尝试添加“IMEX=1;” 到你连接字符串的末尾，但我不确定这会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T14:36:10.683

如果您使用`OleDbConnection`，您将受到只能读取 255 列的限制。我用大床单遇到了这个问题，不得不改变方法。

链接到有关该问题的讨论： http: [//social.msdn.microsoft.com/Forums/office/en-US/0678e022-b435-4f47-a79c-73780301cfb3/using-ace-120-to-import-an- excel-worksheet-with-more-than-255-columns](http://social.msdn.microsoft.com/Forums/office/en-US/0678e022-b435-4f47-a79c-73780301cfb3/using-ace-120-to-import-an-excel-worksheet-with-more-than-255-columns)

这似乎是一个古老而已知的问题，暂时不会解决。

# html - 需要优化的 XSLT 递归模板来去除 html 标记。

> ID：13397892
> 
> 赞同：-1
> 
> 时间：2012-11-15T12:52:37.777
> 
> 标签：html, xslt, tags, strip

我正在使用以下模板从我的`xml`内容中删除 html 标签。它为少数`xml`s 工作，但为少数 s 失败，`xml`由于递归调用，堆栈溢出错误。任何人都可以提供相同的优化解决方案吗？

```
<xsl:template name="strip-tags">
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text, '&lt;')">
            <xsl:value-of  select="substring-before($text, '&lt;')"/>
            <xsl:call-template name="strip-tags">
                <xsl:with-param name="text" select="substring-after($text, '&gt;')"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:46:11.050

嗯，你可以

(a) 给自己一个进行尾调用优化的处理器（例如 Saxon），或者

(b) 给自己一个 XSLT 2.0 处理器，然后使用 xsl:analyze-string 重写它。

不过，还有一点：如果数据中的尖括号未按预期配对，则此代码可能会无限递归（在这种情况下，没有优化器会帮助您），例如，如果`<`在第一个 '>' 之前有一个字符特点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:07:07.850

似乎是一个冒险的策略。它将递归输入中的每个元素，这可能会产生数以百万计的元素并填满堆栈！怎么样，所有标签名称的模板匹配，例如下面的，只是“不要复制”但复制其他所有内容。我在 Pawson 上找到了这个，[http: //www.dpawson.co.uk/xsl/sect2/N4554.html#d5769e474](http://www.dpawson.co.uk/xsl/sect2/N4554.html#d5769e474)

`<xsl:template match=" a | abbr | acronym | address | applet | area | b | base | basefont | bdo | big | blockquote | body | br | button | caption | center | cite | code | col | colgroup | dd | del | dfn | dir | div | dl | dt | em | fieldset | font | form | frame | frameset | h1 | h2 | h3 | h4 | h5 | h6 | head | hr | html | i | iframe | img | input | ins | isindex | kbd | label | legend | li | link | map | menu | meta | noframes | noscript | object | ol | optgroup | option | p | param | pre | q | s | samp | script | select | small | span | strike | strong | style | sub | sup | table | tbody | td | textarea | tfoot | th | thead | title | tr | tt | u | ul | var">`

# javascript - 当页面第二次出现在屏幕上时如何重新加载页面？

> ID：13397895
> 
> 赞同：0
> 
> 时间：2012-11-15T12:52:50.293
> 
> 标签：javascript, html, jquery-mobile, slider

我有个问题。我有一个带有指向滑块页面的列表视图主页的小 jQuery 应用程序。您可以在此处使用滑块插入一个值。然后它将它传递到下一页。在该页面上显示数字。现在，如果我单击左上角的后退按钮，我想重新加载主页，以便滑块回到原来的位置并且还没有显示数字。

我正在考虑这样的事情，但它并不完全奏效：

```
$(document).on('pageinit', '#homepage',  function(){
        if (number !== 0) {
           location.reload();
        } 
}); 
```

这是我的项目：http: [//jsfiddle.net/9ytwt/1/](http://jsfiddle.net/9ytwt/1/)

编辑：

我找到了答案！！

```
$('#homepage').bind('pageshow', function() {
            location.reload();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:55:43.913

而不是重新加载，它可以在某些浏览器/webviews 中保留值，你可以尝试： `document.location = document.location`，它基本上将页面转发给它自己，就像点击一个链接一样。

编辑：首先，这里有一些主要的设计缺陷。重新加载页面只是为了重置一些输入是不正确的做法。其次，您不应该绑定到`pageinit`，而是绑定到`pagebeforeshow`，这会在每次显示页面之前触发。

在您的代码中，您应该将页面 id 更改为“pageWithSlider”或类似的东西，然后您可以使用：

```
$( document ).on( "pagebeforeshow", "#pageWithSlider",  function() {
    $( "#slider" ).val( 20 );
} ); 
```

每次显示页面时都会重置滑块。

如果您想了解不同的事件，您可以绑定到：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# java - Java Util Logging Hierarchy 的原因？

> ID：13397899
> 
> 赞同：4
> 
> 时间：2012-11-15T12:53:32.070
> 
> 标签：java, logging, java.util.logging

我正在学习 java.util.Logging API，但我不明白为什么它会产生冗余输出，如下面的示例代码所示：

```
Logger logger      = Logger.getLogger("");
Logger logger1     = Logger.getLogger("1");
Logger logger1_2   = Logger.getLogger("1.2");

logger1    .addHandler(new ConsoleHandler());
logger1_2  .addHandler(new ConsoleHandler());

logger     .info("msg:");
logger1    .info("msg: 1");
logger1_2  .info("msg: 1.2"); 
```

控制台的输出：

```
14-01-2012 10:32:41 java.util.logging.LogManager$RootLogger log
INFO: msg:
14-01-2012 10:32:42 logging.LoggingExamples main
INFO: msg: 1
14-01-2012 10:32:42 logging.LoggingExamples main
INFO: msg: 1
14-01-2012 10:32:42 logging.LoggingExamples main
INFO: msg: 1.2
14-01-2012 10:32:42 logging.LoggingExamples main
INFO: msg: 1.2
14-01-2012 10:32:42 logging.LoggingExamples main
INFO: msg: 1.2 
```

为什么将日志消息传递给父级，并且多次显示相同的消息！？这完全没有效率，而且对于重复信息，日志文件会增加得太快。有谁知道为什么？这就是 Logging 应该具备的性质吗？

注意：示例代码复制自[http://tutorials.jenkov.com/java-logging/logger-hierarchy.html](http://tutorials.jenkov.com/java-logging/logger-hierarchy.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:27:33.903

我认为问题在于您正在为每个 Log 实例添加一个处理程序，而您应该只将它添加到顶级实例。

以下是我在实践中使用 java.util.Loggin 的方式： 在我的主类中，我从我的包名创建了一个全局记录器： `globalLog = Logger.getLogger("thornworks");`

然后在我的主类中，我向这个全局日志添加一个处理程序（记录消息被 Netbeans 捕获并最终出现在我的控制台窗口中，所以我想将消息写入一个文件，以便稍后检查）：

```
 Date now = new Date();
    java.text.SimpleDateFormat df = new java.text.SimpleDateFormat("D_hh_mm");
    String logName = "[baseFilename]" + df.format(now);
    File logFolder = new File(someDirectory, "logs");
    try {
        if(!logFolder.exists())
            logFolder.mkdir();
        File logFile = new File(logFolder,logName+".log");
        Handler logFileHandler = new FileHandler(logFile.getAbsolutePath());
        logFileHandler.setFormatter(new SimpleFormatter());
        globalLog.addHandler(logFileHandler);            
    }
    catch(java.io.IOException ioe) { /* Log file could not be created. */  }
    globalLog.setLevel(Level.INFO); 
```

然后其他需要做一些记录的类从这个全局记录器中创建记录器：

例如，`fileLogger = GUI.globalLog.getLogger(FileFunction.class.getName());`

此记录器的名称现在是`thornworks.FileFunction`。由于它是父记录器 globalLog 的子记录，因此由 fileLogger 生成的所有消息都会传递给 globalLog。由于我获取 fileLogger 的方式，fileLog 生成的消息将指示它们来自哪个类。

现在，如果我改变主意存储所有这些日志消息的方式和位置，我只需要更改主类中的几行代码，整个应用程序中的所有日志消息都将定向到这个新的地点。我还可以更改主记录器的级别，以便生成更少的消息，然后增加一些类级别记录器的级别以获得有关我的代码部分的更多信息。

# php - 如何使用 PHP 制作动态 HTML 选择选项？

> ID：13397902
> 
> 赞同：0
> 
> 时间：2012-11-15T12:53:40.540
> 
> 标签：php, html

我有这个 HTML 选择选项：

```
<select>
<option>Married</option>
<option>Single</option>
<option>In a relationship</option>
<option>Forever Alone</option>
</select> 
```

并且 selected 选项基于 MySQL 结果，例如，如果`$row['status'] = Married`then`<option selected>Married</option>`和其他选项在选项标签上没有“selected”字样。

如何使这个动态选择选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:02:13.727

一个例子：

```
// these can also come from a database
$statuses = array( 'Married', 'Single', 'In a relationship' );

foreach ( $statuses as $status ) {
    echo '<option' . ( $row['status'] == $status ? ' selected' : '' ) . '>';
    echo $status;
    echo '</option>';
} 
```

# java - java.lang.Float 不能转换为 java.lang.String 中缀到后缀

> ID：13397904
> 
> 赞同：0
> 
> 时间：2012-11-15T12:53:49.790
> 
> 标签：java, string, floating-point

我有关于使用堆栈评估后缀表达式的问题

```
for(int i=0;i<postfix.length;i++){
  System.out.println("iteration:"+(i+1));
  if(postfix[i].equalsIgnoreCase("+") || postfix[i].equalsIgnoreCase("-") 
      || postfix[i].equalsIgnoreCase("*") || postfix[i].equalsIgnoreCase("/") ) {
    num1 = Float.parseFloat((String)out.pop());
    System.out.println("pop:"+num1);
    num2 = Float.parseFloat((String)out.pop());
    System.out.println("pop:"+num2);
    if(postfix[i].equalsIgnoreCase("+")) { 
      temp = num2+num1; 
      out.push(temp);
      System.out.println("push:"+temp);
      }
    else if(postfix[i].equalsIgnoreCase("-")) {   
      temp = num2-num1;   
      out.push((""+temp));
      System.out.println("push:"+temp);
      }
    else if(postfix[i].equalsIgnoreCase("*")) {   
      temp = num2*num1;   
      out.push((""+temp));
      System.out.println("push:"+temp);
      }
    else if(postfix[i].equalsIgnoreCase("/")) {
      temp = num2/num1;
      out.push((""+temp));
      System.out.println("push:"+temp);
      }
  }
  else{
    System.out.println("push:"+postfix[i]);
    out.push(postfix[i]);
  }
} 
```

如果我只在两个数字之间进行操作，例如“2 4 +”，则代码运行良好，但是当它变成“2 4 + 5 +”时，错误突然出现..我什至放了标记..打印在那里检查流量我的代码..谢谢任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:04:00.430

在一条线上`out.push(temp);`，它推动一个浮点数而不是一个字符串。

我建议你使用

```
Stack<Double> out = new Stack<Double>(); 
```

和

```
double num1 = out.pop(); 
```

和

```
out.push(num2 + num1); 
```

和

```
out.push(Double.parseDouble(postfix[i])); 
```

由于 Stack 是一个遗留类，更好的选择是 Deque，但我认为您不必担心为这个项目更改它。

# c++ - 带有 QSqlTableModel 的 QTableView 的数据输入

> ID：13397905
> 
> 赞同：0
> 
> 时间：2012-11-15T12:53:50.740
> 
> 标签：c++, qt, qtableview, data-entry, qsqltablemodel

我有一个基本的 QTableView，它使用 QSqlTableModel 显示来自 SQLite 表的数据。

数据输入由父对话框完成，该对话框具有许多代表字段数据的小部件和一个“添加”按钮。数据删除是通过“删除选定的行”按钮完成的。

一切都非常实用，但我发现它非常笨重，想尝试一种更好的方式。

理想情况下，我希望视图中有一个空行，用户可以简单地开始输入他们的数据。在每一行的末尾有一个用于删除该特定行的按钮（有点像垂直标题，但有一个按钮而不是行号）。

我认为这可以通过子类化 QTableView 来实现，但是必须重新绘制所有内容的想法有点令人生畏......

有没有人对我如何解决这个问题有建议，也许使用代表（诚然我以前没有使用过的东西）或我忽略的另一种更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:07:37.103

根据您的描述，您不必担心重新粉刷任何东西。只需`QButton`在行的最后一个单元格中添加一个。有几个关于向 a 添加按钮的答案/文章`QTableView`：

1.  [http://qtadventures.wordpress.com/2012/02/04/adding-button-to-qviewtable/](http://qtadventures.wordpress.com/2012/02/04/adding-button-to-qviewtable/)
2.  [将按钮添加到 QTableview](https://stackoverflow.com/questions/11777637/adding-button-to-qtableview)

其次，允许用户直接添加行阅读本文关于使模型可编辑和插入/删除行的部分。

2.  [http://doc.qt.io/archives/qt-4.7/model-view-programming.html#making-the-model-editable](http://doc.qt.io/archives/qt-4.7/model-view-programming.html#making-the-model-editable)

# c# - 预览鼠标按下事件在第一次调用时返回带有 null 引用 CurrentColumn 的发送者

> ID：13397906
> 
> 赞同：1
> 
> 时间：2012-11-15T12:53:50.617
> 
> 标签：c#, wpf, datagrid, currentitem

我运行我的应用程序并用数据填充数据网格。然后我单击某行并以下列方式处理事件：

```
 private void dataGridCanTabParamList_PreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        var buffer = sender as DataGrid;

        if ((buffer == null) || (buffer.CurrentColumn == null) )
            return;

        SetCanPropertyDesription(buffer.CurrentColumn.Header.ToString());

    } 
```

当我第一次运行此事件时，CurrentColumn 为空，当我第二次运行此事件时，单击完全相同的位置 CurrentColumn 包含数据。第一次单击时，CurrentItem 也是空的。

为什么我在第一次点击时看不到数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:03:54.887

`PreviewMouseDownEvent`是在实际事件之前引发的隧道`MouseDown`事件。

并`MouseDown event(handled by DataGridCell)`负责dataGrid中列的选择。因此，第一次您的 no 单元格因此被选中`CurrentItem`并且`CurrentColumn`当时为空。

看看它是如何工作的事件的传播 -

![在此处输入图像描述](../Images/a4183d4fd40479c63d744a6eb6af882c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:48:49.780

这是因为 CurrentColumn 和 CurrentItem 指的是选定的列/项目。当您第一次单击时，在处理隧道事件时没有选择任何内容（因此您的代码在 DataGrid 实际设置当前项之前执行）。第二次点击时，CurrentColumn 和 CurrentItem 已经设置好了。

# jquery - 选择一天，给接下来的 N 天上课

> ID：13397907
> 
> 赞同：0
> 
> 时间：2012-11-15T12:53:51.233
> 
> 标签：jquery, jquery-ui

是否可以在 jqueryUI datepicker 中选择一天，然后 datepicker 为接下来的 N 天提供一个 CSS 类，如“marked-time-period”？

例如：日期超过 3 天，您可以在日期选择器上设置开始日期。当您单击 11 月 4 日时，5 日、6 日、7 日获得 css 类“标记时间段”。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:21:15.730

最简单的“开箱即用”方法可能是使用 minDate 和 maxDate datepicker 选项，其中 maxDate 比代码中所选日期提前 3 天。

[http://jqueryui.com/datepicker/#date-range](http://jqueryui.com/datepicker/#date-range)

然后您可以尝试按照您想要的方式设置可用范围的样式，其中“ui-datepicker-unselectable”类是您不想要的日子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:56:08.743

我相信你需要这样的东西`http://jsfiddle.net/william/YQ2Zw/2/`。资源：`http://stackoverflow.com/questions/7187796/highlight-tr-entire-week-datepicker`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T13:54:57.560

好的，这是我的解决方案：

`http://jsfiddle.net/tungon/buyrZ/`

var *datesFromDatabase*是在 PHP 中生成的。

`var datesFromDatabase = { '16.11.2012': ['17.11.2012', '18.11.2012', '19.11.2012'], '17.11.2012': ['18.11.2012', '19.11.2012', '20.11.2012'] };`

# php - 如何使用 Ajax Jquery 获取多个值

> ID：13397909
> 
> 赞同：0
> 
> 时间：2012-11-15T12:53:56.227
> 
> 标签：php, jquery, ajax

我想获取类别 div 中的第一个类别数据和子类别 div 中的子类别数据。我正在使用 Ajax，Jquery。我试过下面的代码，但结果显示未定义。请让我知道代码错在哪里？

HTML是：

```
<body class="bg-color">
    <div id="page-wrap">
        <div class="border-radius">
            <div class="box-heading">Assignment</div>
                <div class="footer group">
                    <div id="category">
                    5
                    </div>
                    <div id="sub-cat">
                        5                 
                    </div>
                    <div id="sub-cat1">
                    5                  
                    </div>
                    </div>
                </div>
        </div>
    </div>
</body> 
```

Javascript是：

```
<script type="text/javascript">
$(document).ready(function(){                    
                 });
function pageLoad()
{
    var result = new Array();
    $.ajax({
                        type: "POST",
                        url: "get.php",
                        data: "",
                        async: false
    }).responseText.split(",");
document.getElementById('category').innerHTML = result[0];  

}
window.onload = pageLoad;

</script> 
```

PHP代码是

```
<?php
    require("_assets/config/dbc.php");

        $id = $_REQUEST['id'];
        $query = mysql_query("SELECT * FROM category");

        while($row  = mysql_fetch_array($query)){
        $a = '<a href="javascript:void(0);" onClick="vote1(' . $row['cat_id'] . ');">' .$row['title'] . '</a></p>';
        }
        $query1 = mysql_query("SELECT * FROM subcategory");
        while($row1  = mysql_fetch_array($query1)){
        $b = '<a href="javascript:void(0);" onClick="vote1(' . $row1['cat_id'] . ');">' .$row1['title'] . '</a></p>';
        }

        echo $result = $a."*".$b;

?> 
```

实际上我想在页面加载ajax时转到get.php文件并按ID获取类别，按ID获取子类别和按ID获取子子类别。所以我会在我的 3 个 div 上显示这些。请解决我的这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:57:32.387

您可以通过 json 在 php 中使用[`json_encode`](http://www.php.net/manual/en/function.json-encode.php)（返回值的 JSON 表示）来编码值并在 ajax 中尝试

例如在 php

```
$sequential = array("foo", "bar", "baz", "blong");
echo  json_encode($sequential); 
```

并在ajax成功尝试

```
success: function(data) {
       data = jQuery.parseJSON(data);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:19:19.820

我自己做过。我的代码是：

```
function vote(id)
{ 
    var result = new Array();
     result = $.ajax({
                       type: "POST",
                       url: "ajax.php",
                       data: "work=vote&id="+id,
                       async: false
               }).responseText.split("^");
document.getElementById('sub-cat').innerHTML = result[0];
document.getElementById('sub-cat1').innerHTML = result[1];
//window.location.reload()
} 
```

现在我面临另一个问题..请让我知道如何获得 while 循环的第一个值。所以我将使用子类别ID获得子子类别..

php代码是：

```
<?php
    require("_assets/config/dbc.php");

    if($_REQUEST['work']=="vote")
    {
        $id = $_REQUEST['id'];
        $query = mysql_query("SELECT * FROM subcategory WHERE cat_id='$id'");
    $HTML= "";
        while($result  = mysql_fetch_array($query)){
            $HTML .= '<a href="javascript:void(0);" onClick="vote1(' . $result['subcat_id'] . ');">' .$result['title'] . '</a></p>';  
        }
    $HTML .= "^";
    $sql = mysql_query("select * from subscategory "HOW TO GET 1ST SUBCATEGORY ID?"") or die(mysql_error());
    while($row = mysql_fetch_assoc($sql)){
        $HTML .= '<a href="javascript:void(0);" onClick="vote1(' . $row['subcat_id'] . ');">' .$row['title'] . '</a></p>';

        }

    echo $HTML;
    }

?> 
```

# https - Axis2 https 客户端出现问题

> ID：13397910
> 
> 赞同：0
> 
> 时间：2012-11-15T12:53:58.643
> 
> 标签：https, client, axis2

我有同样的问题：

[无法通过 https 访问axis2](https://stackoverflow.com/questions/7230260/unable-to-access-axis2-over-https)

但就我而言，当我向客户端发出请求时，我已写入第三方 https 服务器......

信息 org.apache.commons.httpclient.HttpMethodDirector - 处理请求时捕获的 I/O 异常 (org.apache.axis2.AxisFault)：连接已关闭：javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException： PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

知道我可以做什么或应该在客户端中配置什么吗？¿

提前致谢！！

# webgl - 显示地球上可见点的弹出窗口

> ID：13397921
> 
> 赞同：1
> 
> 时间：2012-11-15T12:54:46.197
> 
> 标签：webgl, three.js

我有一个地球仪，类似于[http://mrdoob.github.com/three.js/examples/webgl_trackballcamera_earth.html](http://mrdoob.github.com/three.js/examples/webgl_trackballcamera_earth.html)。我的地球仪在不同的位置（例如巴黎、罗马或伦敦）有一些点。每当这些地点之一进入视野时，应该会弹出一个包含该位置附加信息的弹出窗口，当该地点旋转出视野时再次消失，与[http://workshop.chromeexperiments.com/cloudglobe/](http://workshop.chromeexperiments.com/cloudglobe/)非常相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:20:26.180

您需要这些点的 3D 坐标，并且需要用地球仪对它们进行变换（旋转或其他）。然后使用此代码[http://www.opengl.org/wiki/GluProject_and_gluUnProject_code](http://www.opengl.org/wiki/GluProject_and_gluUnProject_code)获取这些点的屏幕空间坐标。之后是 HTML、CSS 和一些 javascript 的简单问题。您知道它们在屏幕上的位置，例如，您可以将一些绝对定位的 div 与文本放在一起。但是您需要检查这些点在地球的哪一侧 - 使用球体的旋转相位或点的 z 坐标或简单地进行[基于颜色的拾取](https://github.com/mrdoob/three.js/pull/2220)以查看该点是否可见。

# ruby-on-rails - 如何使用acts_as_commentable_with_threading gem 将新创建的评论变成子评论/回复另一评论

> ID：13397925
> 
> 赞同：0
> 
> 时间：2012-11-15T12:54:53.513
> 
> 标签：ruby-on-rails, ruby

gems 文档说comment.move_to_child_of(parent_comment)。谁能指出如何最好地使用此方法的示例（一些代码将不胜感激）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:06:10.427

@comment.move_to_child_of(@parent)

# c# - 从 XML Web 服务返回 DataSet 时出错

> ID：13397927
> 
> 赞同：0
> 
> 时间：2012-11-15T12:54:55.857
> 
> 标签：c#, web-services

我创建了需要从 SQL Server 获取数据的 Windows 应用程序。为了做到这一点，我还有 XML Web Service，这是我用来返回 DataSet 的代码：

```
[WebMethod]
public DataSet GetDataSet(SqlCommand cmd)
{
    using (SqlConnection Conn = new SqlConnection(ConnString))
    {
        cmd.Connection = Conn;
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        try
        {
            //Conn.Open();
            using (DataSet DS = new DataSet())
            {
                da.Fill(DS);
                return DS;
            }
        }
        catch (Exception ex)
        {
            return (new DataSet());
        }
        finally
        {
            if (da != null)
            {
                da.Dispose();
            }
        }
    }
} 
```

当我想将我的 Web 服务添加到我的 Win 应用程序项目中时，它会出现以下错误：

> 无法序列化 System.ComponentModel.Component.Site 类型的 System.ComponentModel.ISite 成员，因为它是一个接口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:23:36.263

您可能想阅读以下文章，因为我认为您不能序列化接口对象：-

[http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/bac96f79-82cd-4fef-a748-2a85370a8510/](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/bac96f79-82cd-4fef-a748-2a85370a8510/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:38:31.283

SqlCommand 无法序列化，因此您需要在函数中实例化。

```
 [WebMethod]
 public DataSet GetDataSet()
 {
 SqlCommand cmd = new SqlCommand();
 using (SqlConnection Conn = new SqlConnection(ConnString))
 {
    cmd.Connection = Conn;
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    try
    {
        //Conn.Open();
        using (DataSet DS = new DataSet())
        {
            da.Fill(DS);
            return DS;
        }
    }
    catch (Exception ex)
    {
        return (new DataSet());
    }
    finally
    {
        if (da != null)
        {
            da.Dispose();
        }
    }
  }
} 
```

# java - 连接 AppEngine 数据存储和搜索 API

> ID：13397928
> 
> 赞同：11
> 
> 时间：2012-11-15T12:55:01.323
> 
> 标签：java, google-app-engine, jpa, google-cloud-datastore, gae-search

我想知道连接数据存储区和搜索 API 的最佳方式是什么。

我正在寻找的是每当我创建某个实体（例如产品）时，该产品将被添加到搜索索引中。更新时索引也应该更新，删除产品时 - 你猜对了 - 应该从搜索索引中删除产品。

在搜索产品时，我想对产品索引进行全文搜索，但我需要真实实体而不是文档。可能我需要先使用索引进行搜索，然后再调用数据存储区？

我最担心的是保持数据存储和搜索索引同步。当然，还要通过搜索索引和数据存储不仅会很麻烦，而且我觉得它也可能会给分页带来痛苦。

我想知道是否有些人已经以这种方式“连接”了数据存储和搜索 api，结果如何，也许还有一些可用的最佳实践。appengine 文档并没有说明这个领域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:20:56.913

为了使用 Search API，您需要将可搜索数据定义为文档，然后使用`Index`类将它们构造成索引。因此，目前您需要完全按照您的描述进行操作，将可搜索文档与您的数据存储实体保持同步。

# jdbc - 如何获取 JDBC 连接 ID？

> ID：13397931
> 
> 赞同：2
> 
> 时间：2012-11-15T12:55:16.860
> 
> 标签：jdbc, database-connection

我需要使用 Connection 对象获取 JDBC 连接 ID（UUID）。有没有办法获取连接ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-31T11:17:08.840

Well, if you meen "sql-connection to sql-server", then jdbc has no standard instruments for this. Here is handmade example for jdbc:mysql (beware - Reflection and restricted characters):

```
 private long getJdbcConnectionId(Connection conn) {
    long cid = 0;
    try {
        Field f_conn__conn = conn.getClass().getSuperclass().getDeclaredField("_conn");
        f_conn__conn.setAccessible(true);
        Object o_conn__conn = f_conn__conn.get(conn);
        Field f_conn__conn__conn = o_conn__conn.getClass().getSuperclass().getDeclaredField("_conn");
        f_conn__conn__conn.setAccessible(true);
        Object o_conn__conn__conn = f_conn__conn__conn.get(o_conn__conn);
        Field f_connectionId = o_conn__conn__conn.getClass().getSuperclass().getDeclaredField("connectionId");
        f_connectionId.setAccessible(true);
        cid = f_connectionId.getLong(o_conn__conn__conn);
        f_connectionId.setAccessible(false);
        f_conn__conn__conn.setAccessible(false);
        f_conn__conn.setAccessible(false);

    } catch (Exception e) {
        e.printStackTrace();
    }
    return cid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-29T14:36:02.457

编辑：

好的这种方式可以避免编译时耦合，使用反射

```
import java.sql.Connection;
import java.sql.DriverManager;
...
public String getMysqlConnectionId()
{
    try {
        Connection connection = DriverManager.getConnection("jdbc:mysql://host:3306/schema", "myuser", "mypassword");

        Class<?> clazz = Class.forName("com.mysql.jdbc.MySQLConnection");

        Object o = connection.unwrap(clazz);

        return (String) clazz.getMethod("getId").invoke(o).toString();
    } catch ( Exception e ) {
        return e.getMessage();
    }
} 
```

* * *

`java.sql.Connection`通过将您的对象投射到`com.mysql.jdbc.MySQLConnection`并使用`getId()`

```
import java.sql.Connection;
import java.sql.DriverManager;
import com.mysql.jdbc.MySQLConnection;
...
public long getMysqlConnectionId()
{
    Connection connection = DriverManager.getConnection("jdbc:mysql://host:3306/schema", "myuser", "mypassword");

    // would throw a ClassCastException in case this is not a mysql one, of course
    return ((MySQLConnection) connection).getId();
} 
```

但这有点在编译时将您的项目与 MySQL**非常耦合**

注意：当我对此投反对票时，我不会被冒犯，这是当之无愧的 ;-)

```
<!-- pom.xml -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>x.y.z</version>
</dependency> 
```

其他一些人显然正在使用`connection.unwrap(com.mysql.jdbc.MySQLConnection)`这可能感觉更合适，但不会删除与`com.mysql` [https://github.com/prestodb/presto/issues/9425的编译时耦合](https://github.com/prestodb/presto/issues/9425)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-07T09:31:06.647

这是我如何获取 Oracle SID 的示例：

```
 public int getConnectionSid() {
    try {
        if (connection == null || connection.isClosed())                
            return -1;            
        if (connectionSid == -1) {                
            try { 
                Method method = connection.getClass().getDeclaredMethod("getSessionId", null);
                method.setAccessible(true);
                connectionSid = (Integer)method.invoke(nativeConnection, null);                    
                method.setAccessible(false);
            } catch (NoSuchMethodException e) {
                return -1;
            } catch (IllegalAccessException e) {
                return -1;
            } catch (InvocationTargetException e) {
                return -1;
            }
        }
        return connectionSid;
    } catch (SQLException e) {            
        return -1;
    } 
```

# android - Android Spinner：在初始化期间避免 onItemSelected 调用

> ID：13397933
> 
> 赞同：195
> 
> 时间：2012-11-15T12:55:23.687
> 
> 标签：android, android-layout, android-spinner

`Spinner`我用 a和 a创建了一个 Android 应用程序`TextView`。我想在 TextView 的 Spinner 下拉列表中显示所选项目。我在方法中实现了 Spinner，`onCreate`所以当我运行程序时，它会在`TextView`（在从下拉列表中选择一个项目之前）中显示一个值。

我只想在从下拉列表中选择一个项目后在 TextView 中显示该值。我该怎么做呢？

这是我的代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class GPACal01Activity extends Activity implements OnItemSelectedListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Spinner spinner = (Spinner) findViewById(R.id.noOfSubjects);

        // Create an ArrayAdapter using the string array and a default spinner layout
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,R.array.noofsubjects_array, android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spinner.setAdapter(adapter);
        spinner.setOnItemSelectedListener(this);
    }

    public void onItemSelected(AdapterView<?> parent, View arg1, int pos,long id) {
        TextView textView = (TextView) findViewById(R.id.textView1);
        String str = (String) parent.getItemAtPosition(pos);
        textView.setText(str);
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-11-15T13:02:21.480

```
spinner.setOnItemSelectedListener(this); // Will call onItemSelected() Listener. 
```

所以第一次用任何整数值处理这个

示例：最初采取`int check = 0;`

```
public void onItemSelected(AdapterView<?> parent, View arg1, int pos,long id) {
   if(++check > 1) {
      TextView textView = (TextView) findViewById(R.id.textView1);
      String str = (String) parent.getItemAtPosition(pos);
      textView.setText(str);
   }
} 
```

您可以使用布尔值执行此操作，也可以检查当前和以前的位置。[看这里](https://stackoverflow.com/questions/2297601/how-to-disable-onitemselectedlistener-to-be-invoked-when-setting-selected-item-b)

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2016-06-01T06:58:35.143

只需在设置**之前**放置此行`OnItemSelectedListener`

```
spinner.setSelection(0,false) 
```

这是有效的，因为在内部`setSelection(int, boolean)`调用`setSelectionInt()`，以便在添加侦听器时，该项目已被选中。

请注意这`setSelection(int)`不起作用，因为它在`setNextSelectedPositionInt()`内部调用。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2014-07-31T23:42:09.643

从 API 级别 3 开始，您可以在带有布尔值的 Activity 上使用 onUserInteraction() 来确定用户是否正在与设备交互。

[http://developer.android.com/reference/android/app/Activity.html#onUserInteraction()](http://developer.android.com/reference/android/app/Activity.html#onUserInteraction())

```
@Override
public void onUserInteraction() {
     super.onUserInteraction();
     userIsInteracting = true;
} 
```

作为 Activity 的一个字段，我有：

```
 private boolean userIsInteracting; 
```

最后，我的微调器：

```
 mSpinnerView.setOnItemSelectedListener(new OnItemSelectedListener() {

           @Override
           public void onItemSelected(AdapterView<?> arg0, View view, int position, long arg3) {
                spinnerAdapter.setmPreviousSelectedIndex(position);
                if (userIsInteracting) {
                     updateGUI();
                }
           }

           @Override
           public void onNothingSelected(AdapterView<?> arg0) {

           }
      }); 
```

当您来回进行活动时，布尔值将重置为 false。奇迹般有效。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2017-06-23T07:53:30.283

这对我有用

Spinner 在 Android 中的初始化是有问题的，有时上面的问题是通过这种模式解决的。

```
Spinner.setAdapter();
Spinner.setSelected(false);  // must
Spinner.setSelection(0,true);  //must
Spinner.setonItemSelectedListener(this); 
```

在初始化微调器时，设置适配器应该是第一部分，onItemSelectedListener(this) 将是最后一部分。通过上面的模式，在微调器初始化期间不调用我的 OnItemSelected()

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-11-28T09:04:38.783

**避免在初始化期间调用 spinner.setOnItemSelectedListener()**

```
spinner.setSelection(Adapter.NO_SELECTION, true); //Add this line before setting listener
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {

    }
}); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-03-14T01:26:38.857

哈哈...我有同样的问题。当 initViews() 这样做时。序列是关键，侦听器是最后一个。祝你好运 ！

```
spinner.setAdapter(adapter);
spinner.setSelection(position);
spinner.setOnItemSelectedListener(listener); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-09-23T15:32:24.833

我的解决方案：

```
protected boolean inhibit_spinner = true;

@Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int pos, long arg3) {

            if (inhibit_spinner) {
                inhibit_spinner = false;
            }else {

            if (getDataTask != null) getDataTask.cancel(true);
            updateData();
            }

        } 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-06-11T02:30:05.700

您可以通过以下方式执行此操作：

```
AdapterView.OnItemSelectedListener listener = new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
            //set the text of TextView
        }

        @Override
        public void onNothingSelected(AdapterView<?> adapterView) {

        }
    });

yourSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
            yourSpinner.setOnItemSelectedListener(listener);
        }

        @Override
        public void onNothingSelected(AdapterView<?> adapterView) {

        }
    }); 
```

起初我创建了一个监听器并归因于一个变量回调；然后我创建了第二个匿名监听器，当第一次调用它时，这会改变监听器=]

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-02-28T11:47:09.533

创建一个布尔字段

```
private boolean inispinner; 
```

在活动的 oncreate 内部

```
 spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            if (!inispinner) {
                inispinner = true;
                return;
            }
            //do your work here
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

        }
    }); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-07-18T16:26:00.313

启用多个微调器的类似简单解决方案是将 AdapterView 放在一个集合中 - 在活动超类中 - 在第一次执行 onItemSelected(...) 时，然后在执行之前检查 AdapterView 是否在集合中。这启用了超类中的一组方法，并支持多个 AdapterView 和多个微调器。

超类...

```
private Collection<AdapterView> AdapterViewCollection = new ArrayList<AdapterView>();

   protected boolean firstTimeThrough(AdapterView parent) {
    boolean firstTimeThrough = ! AdapterViewCollection.contains(parent);
    if (firstTimeThrough) {
       AdapterViewCollection.add(parent);
     }
    return firstTimeThrough;
   } 
```

子类...

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
      if (! firstTimeThrough(parent)) {
        String value = safeString(parent.getItemAtPosition(pos).toString());
        String extraMessage = EXTRA_MESSAGE;
        Intent sharedPreferencesDisplayIntent = new         Intent(SharedPreferencesSelectionActivity.this,SharedPreferencesDisplayActivity.class);
    sharedPreferencesDisplayIntent.putExtra(extraMessage,value);
    startActivity(sharedPreferencesDisplayIntent);
  }
  // don't execute the above code if its the first time through
  // do to onItemSelected being called during view initialization. 
```

}

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-03-07T03:39:59.227

然后可以在 onTouch 方法中将用户交互标志设置为 true，并在`onItemSelected()`处理了选择更改后重置。我更喜欢这个解决方案，因为用户交互标志是专门为微调器处理的，而不是为活动中可能影响所需行为的其他视图处理的。

在代码中：

为微调器创建侦听器：

```
public class SpinnerInteractionListener implements AdapterView.OnItemSelectedListener, View.OnTouchListener {

    boolean userSelect = false;

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        userSelect = true;
        return false;
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        if (userSelect) { 
            userSelect = false;
            // Your selection handling code here
        }
    }

} 
```

将侦听器作为 an`OnItemSelectedListener`和 an添加到微调器`OnTouchListener`：

```
SpinnerInteractionListener listener = new SpinnerInteractionListener();
mSpinnerView.setOnTouchListener(listener);
mSpinnerView.setOnItemSelectedListener(listener); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-05-21T21:55:12.523

试试这个

```
spinner.postDelayed(new Runnable() {
        @Override
        public void run() {
            addListeners();
        }
    }, 1000);.o 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-10-17T06:37:08.787

**代码**

```
spinner.setOnTouchListener(new View.OnTouchListener() { 
@Override public boolean onTouch(View view, MotionEvent motionEvent) { isSpinnerTouch=true; return false; }});

holder.spinner_from.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> adapterView, View view, int slot_position, long l) {
                if(isSpinnerTouch)
                {
                    Log.d("spinner_from", "spinner_from");
                    spinnerItemClickListener.onSpinnerItemClickListener(position, slot_position, AppConstant.FROM_SLOT_ONCLICK_CODE);
                }
                else {

                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> adapterView) {

            }
        }); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-19T08:06:11.520

您可以先通过 setOnTouchListener 然后在 onTouch 中通过 setOnItemSelectedListener 来实现

```
@Override
public boolean onTouch(final View view, final MotionEvent event) {
 view.setOnItemSelectedListener(this)
 return false;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-09-27T08:03:43.910

这对我有用：

```
 spinner.setSelection(0, false);
    new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                spinner.setOnItemSelectedListener(listener);
            }, 500); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-10-06T11:08:10.557

根据 Abhi 的回答，我做了这个简单的听众

```
class SpinnerListener constructor(private val onItemSelected: (position: Int) -> Unit) : AdapterView.OnItemSelectedListener {

    private var selectionCount = 0

    override fun onNothingSelected(parent: AdapterView<*>?) {
        //no op
    }

    override fun onItemSelected(parent: AdapterView<*>?, view: View?, position: Int, id: Long) {
        if (selectionCount++ > 1) {
           onItemSelected(position)
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-09-28T19:47:16.897

您可以像这样创建自定义`OnItemSelectedListener`。我已经采取`val check=0`并且在`onItemSelected()`方法中我确实检查了它的计数是否为0？如果 0 表示它在初始化期间被调用。所以干脆忽略它。

我还调用了单独的抽象方法，`onUserItemSelected()`我将这个方法称为`check > 0`. 这对我来说非常好。

```
abstract class MySpinnerItemSelectionListener : AdapterView.OnItemSelectedListener {

abstract fun onUserItemSelected(parent: AdapterView<*>?, view: View?, position: Int, id: Long)
private var check = 0
override fun onItemSelected(
    parent: AdapterView<*>?,
    view: View,
    position: Int,
    id: Long
) {
    if (++check > 1) {
        onUserItemSelected(parent, view, position, id)
    }
}

override fun onNothingSelected(parent: AdapterView<*>?) {} 
```

}

然后你可以像这样设置监听器。

```
mySpinner.onItemSelectedListener =  object : MySpinnerItemSelectionListener() {
        override fun onUserItemSelected(
            parent: AdapterView<*>?,
            view: View?,
            position: Int,
            id: Long
        ) {
            //your user selection spinner code goes here
        }

    } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-10-22T15:04:33.890

有同样的问题，这对我有用：

我有 2 个微调器，我在初始化期间以及与其他控件交互期间或从服务器获取数据后更新它们。

这是我的模板：

```
public class MyClass extends <Activity/Fragment/Whatever> implements Spinner.OnItemSelectedListener {

    private void removeSpinnersListeners() {
        spn1.setOnItemSelectedListener(null);
        spn2.setOnItemSelectedListener(null);
    }

    private void setSpinnersListeners() {
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                spn1.setOnItemSelectedListener(MyClass.this);
                spn2.setOnItemSelectedListener(MyClass.this);
            }
        }, 1);
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        // Your code here
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {

    }
} 
```

当类启动时使用**setSpinnersListeners()**而不是直接设置监听器。

Runnable 将阻止微调器在您设置它们的值后立即触发 onItemSelected。

如果您需要更新微调器（在服务器调用等之后），请在更新行之前使用**removeSpinnersListeners() ，并在更新行之后使用 setSpinnersListeners(** **)**。这将防止 onItemSelected 在更新后触发。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-03-05T17:24:59.033

对我来说，Abhi 的解决方案在 Api 级别 27 之前都非常有效。

但似乎从 Api 级别 28 及更高级别开始，设置侦听器时不会调用 onItemSelected()，这意味着永远不会调用 onItemSelected()。

因此，我添加了一个简短的 if 语句来检查 Api 级别：

```
public void onItemSelected(AdapterView<?> parent, View arg1, int pos,long id) {

            if(Build.VERSION.SDK_INT >= 28){ //onItemSelected() doesn't seem to be called when listener is set on Api 28+
                check = 1;
            }

            if(++check > 1) {
                //Do your action here
            }
        } 
```

我认为这很奇怪，我不确定其他人是否也有这个问题，但就我而言，它运作良好。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-06-30T16:13:47.667

我在 Spinner 的顶部放置了一个 TextView，大小和背景与 Spinner 相同，这样我就可以在用户点击它之前更好地控制它的外观。有了 TextView，我还可以使用 TextView 来标记用户何时开始交互。

我的 Kotlin 代码如下所示：

```
private var mySpinnerHasBeenTapped = false

private fun initializeMySpinner() {

    my_hint_text_view.setOnClickListener {
        mySpinnerHasBeenTapped = true //turn flag to true
        my_spinner.performClick() //call spinner click
    }

    //Basic spinner setup stuff
    val myList = listOf("Leonardo", "Michelangelo", "Rafael", "Donatello")
    val dataAdapter: ArrayAdapter<String> = ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, myList)
    my_spinner.adapter = dataAdapter

    my_spinner.onItemSelectedListener = object : OnItemSelectedListener {

        override fun onItemSelected(parent: AdapterView<*>?, view: View, position: Int, id: Long) {

            if (mySpinnerHasBeenTapped) { //code below will only run after the user has clicked
                my_hint_text_view.visibility = View.GONE //once an item has been selected, hide the textView
                //Perform action here
            }
        }

        override fun onNothingSelected(parent: AdapterView<*>?) {
            //Do nothing
        }
    }
} 
```

布局文件看起来像这样，重要的部分是 Spinner 和 TextView 共享相同的宽度、高度和边距：

```
 <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <Spinner
                android:id="@+id/my_spinner"
                android:layout_width="match_parent"
                android:layout_height="35dp"
                android:layout_marginStart="10dp"
                android:layout_marginEnd="10dp"
                android:background="@drawable/bg_for_spinners"

                android:paddingStart="8dp"
                android:paddingEnd="30dp"
                android:singleLine="true" />

            <TextView
                android:id="@+id/my_hint_text_view"
                android:layout_width="match_parent"
                android:layout_height="35dp"                
                android:layout_marginStart="10dp"
                android:layout_marginEnd="10dp"
                android:background="@drawable/bg_for_spinners"

                android:paddingStart="8dp"
                android:paddingEnd="30dp"
                android:singleLine="true"
                android:gravity="center_vertical"
                android:text="*Select A Turtle"
                android:textColor="@color/green_ooze"
                android:textSize="16sp" />

        </FrameLayout> 
```

我确信其他解决方案可以在您忽略第一个 onItemSelected 调用的情况下工作，但我真的不喜欢假设它总是会被调用的想法。

# mono - 在 MonoDevelop 3 中调试单元测试

> ID：13397934
> 
> 赞同：2
> 
> 时间：2012-11-15T12:55:23.590
> 
> 标签：mono, nunit, monodevelop

我遇到了一个例外：

空参考>堆栈跟踪（System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke（{yadda yadda}）

当我尝试在 MonoDevelop 中调试单元测试时。我在从标准仓库安装的 Lubuntu 上运行 MonoDevelop 3.0.3.2。我已经引用了 nunit 的单声道版本（我不确定为什么还有标准版本和单声道版本？）。

我已经能够在 MonoDevelop 上使用旧版本调试单元测试。此处的示例解决方案：http: [//dl.dropbox.com/u/30149716/DebugUnitTest.zip](http://dl.dropbox.com/u/30149716/DebugUnitTest.zip)

我已经下载了上面的内容并在VS中成功调试（当然改变了单位参考）

================ 编辑================

我提交了一个错误报告：[https ://bugzilla.xamarin.com/show_bug.cgi?id=8442](https://bugzilla.xamarin.com/show_bug.cgi?id=8442)

# c# - 自从将项目转换为 VS2010 后，HttpListenerRequest 属性不再可用

> ID：13397941
> 
> 赞同：1
> 
> 时间：2012-11-15T12:55:50.127
> 
> 标签：c#, visual-studio-2010, visual-studio-2008, projects-and-solutions, httplistenerrequest

我有一个使用 .NET 3.5 的 Visual Studio 2008 创建的项目，它使用了 HttpListenerRequest 类。作为统计信息收集机制的一部分，类的所有属性都被写入文件。

我最近尝试将项目从 VS2008 解决方案转换为 VS2010 解决方案，并且在转换过程中完全没有错误，但是一旦我尝试构建项目，编译器就会声称它找不到“HttpListenerRequest.ServiceName”和“HttpListenerRequest.TransportContext”。

在这两个项目中，目标框架都是 .NET Framework 3.5，我比较了引用的 DLL 版本号，一切看起来都一样。

我决定检查两个版本的 Visual Studio 中的 HttpListenerRequest 类元数据，发现虽然 2010 没有像预期的那样引用 ServiceName 和 TransportContext，但 VS2008 显示了这两个属性，但都没有摘要描述。

然后我在 VS2010 中创建了一个针对 .NET 4 的项目，它允许我引用上述两个属性。

我真的需要继续以 .NET 3.5 为目标，你知道我可以在不更改代码以排除这么多功能的情况下完成这项工作吗？

**编辑：**根据要求，这是代码：

```
void Log(System.Net.HttpListenerContext context)
{
    string line =
            DateTime.Now.ToString() + "|" +
            context.Request.HttpMethod + "|" +
            context.Request.RawUrl + "|" +
            context.Request.Url.ToString() + "|" +
            context.Request.RemoteEndPoint.ToString() + "|" +
            (context.Request.UrlReferrer == null ? "None" : context.Request.UrlReferrer.ToString()) + "|" +
            (context.Request.ServiceName == null ? "None" : context.Request.ServiceName) + "|" + // Error Here on ServiceName
            context.Request.UserHostName + "|" +
            context.Request.UserAgent + "|" +
            context.Request.TransportContext.ToString() + "|" + // Error here on TransportContext
            context.Request.ProtocolVersion + "|" +
            context.Request.ContentLength64.ToString();

    WriteToFile(line);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:40:53.900

所以我想通了：

两个版本的 Visual Studio 只为我提供了 System.dll 的以下版本信息： *v2.0.50727*

但是在进入windows目录并检查文件后，存在版本差异。不包括这些属性的是版本*v2.0.50727.3053*，而版本*v2.0.50727.3634*包括它们。

我认为问题是我在安装 Windows 后禁用了 Windows 更新。

# perl - 验证 perl 输入 - 过滤掉不存在的文件

> ID：13397944
> 
> 赞同：0
> 
> 时间：2012-11-15T12:55:52.827
> 
> 标签：perl, file, validation, parsing, input

我有一个 perl 脚本，我从批处理或有时从命令提示符提供输入（文本文件）。当我从批处理文件提供输入时，有时该文件可能不存在。我想捕获 No such file exists 错误并在引发此错误时执行其他任务。请找到以下示例代码。

```
while(<>) //here it throws an error when file doesn't exists.
{
    #parse the file.
}
#if error is thrown i want to handle that error and do some other task. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:49:52.770

`@ARGV`使用前过滤`<>`：

```
@ARGV = grep {-e $_} @ARGV;
if(scalar(@ARGV)==0) die('no files');
# now carry on, if we've got here there is something to do with files that exist
while(<>) {
  #...
} 
```

`<>`从@ARGV 中列出的文件中读取，所以如果我们在它到达那里之前过滤它，它不会尝试读取不存在的文件。我添加了对@ARGV 大小的检查，因为如果您提供一个全部不存在的列表文件，它将在标准输入上等待（使用 <> 的另一面）。这假设您不想这样做。

但是，如果您不想从标准输入中读取，`<>`则可能是一个糟糕的选择；您不妨逐步浏览`@ARGV`. 如果您确实想要从标准输入读取的选项，那么您需要知道您处于哪种模式：

```
$have_files = scalar(@ARGV);
@ARGV = grep {-e $_} @ARGV;
if($have_files && scalar(grep {defined $_} @ARGV)==0) die('no files');
# now carry on, if we've got here there is something to do;
#   have files that exist or expecting stdin
while(<>) {
  #...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:33:33.050

*钻石算子* 的`<>`意思是：

> 查看其中的名称`@ARGV`并将它们视为要打开的文件。只需遍历所有这些，就好像它们是一个大文件一样。实际上，Perl 使用 ARGV 文件句柄来达到这个目的
> 
> 如果没有给出命令行参数，请`STDIN`改用。

因此，如果一个文件不存在，Perl 会给您一个错误消息 ( `Can't open nonexistant_file: ...`) 并继续处理下一个文件。这是你通常想要的。如果不是这种情况，请手动执行。从[`perlop`页面](http://perldoc.perl.org/perlop.html#I%2fO-Operators)窃取：

```
unshift(@ARGV, '-') unless @ARGV;
  FILE: while ($ARGV = shift) {
    open(ARGV, $ARGV);
    LINE: while (<ARGV>) {
      ...         # code for each line
    }
  } 
```

遇到问题时，该[`open` *函数返回一个假值。*](http://perldoc.perl.org/functions/open.html)所以*总是*`open`像这样调用

```
open my $filehandle "<", $filename or die "Can't open $filename: $!"; 
```

包含失败的`$!`原因。除了`die`ing，我们还可以做一些其他的错误恢复：

```
use feature qw(say);
@ARGV or @ARGV = "-"; # the - symbolizes STDIN
FILE: while (my $filename = shift @ARGV) {
    my $filehandle;
    unless (open $filehandle, "<", $filename) {
       say qq(Oh dear, I can't open "$filename". What do you wan't me to do?);
       my $tries = 5;
       do {
         say qq(Type "q" to quit, or "n" for the next file);
         my $response = <STDIN>;
         exit      if $response =~ /^q/i;
         next FILE if $response =~ /^n/i;
         say "I have no idea what that meant.";
       } while --$tries;
       say "I give up" and exit!!1;
    }
    LINE: while (my $line = <$filehandle>) {
       # do something with $line
    }
} 
```

# sql-server - 使用 sp_send_dbmail 发送 xlsx 文件

> ID：13397945
> 
> 赞同：0
> 
> 时间：2012-11-15T12:55:56.117
> 
> 标签：sql-server, sql-server-2008-r2

这有效：

```
EXEC msdb..sp_send_dbmail
    @recipients     = 'myaddress@helloworld.co.uk',  
    @subject        = 'HELLO WORLD',
    @Importance     = 'LOW',
    @body           = 'HELLO WORLD',
    @file_attachments       = N'UNCpathway\experimental attachment.txt' 
```

而当我尝试这个时

```
EXEC msdb..sp_send_dbmail
    @recipients     = 'myaddress@helloworld.co.uk',  
    @subject        = 'HELLO WORLD',
    @Importance     = 'LOW',
    @body           = 'HELLO WORLD',
    @file_attachments       = N'UNCpathway\experimental attachment.xlsx' 
```

我收到以下错误消息：

> 消息 22051，级别 16，状态 1，第 0 行无法打开附件文件“UNCpathway\experimental attachment.xlsx”。执行 API 'CreateFile' 失败，错误号为 32。

该消息很奇怪，因为我没有要求*打开*附件！为什么？如何允许使用这些附件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:34:41.840

“打开”的意思是“由邮件程序访问，以便可以将存储在文件中的字节复制到电子邮件中”，而不是将文件呈现给用户。

[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)通常用于为这种访问打开文件。

错误代码 32 是`ERROR_SHARING_VIOLATION`。
所以邮件程序无法读取附件文件，因为其他东西正在读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-12T06:24:18.280

转到 SQL Server 并单击 SQL Server 属性，然后转到构面并选择表面区域配置并将 sqlmailEnabled 更改为启用/真。

并立即尝试。它会正常工作。

或执行脚本：-

sp_configure '显示高级选项', 1;
去
重新配置；
GO
sp_configure '数据库邮件 XPs', 1;
去
重新配置
去

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T14:10:38.070

正如 GSerg 提到的，它与共享违规有关。可以通过设置重试次数和重试间隔时间来避免。我摆脱了 2 次重试和 2 分钟的间隔。

# java - 使用字符串中的模式定义变量

> ID：13397946
> 
> 赞同：0
> 
> 时间：2012-11-15T12:56:00.113
> 
> 标签：java, regex, string

我试图在一个很长的字符串中找到与模式匹配的所有文本，然后获取文本并将其应用于将传递的变量等等。我尝试了该方法，但是在将其传递给另一种方法`replaceAll`时，我开始出现奇怪的行为。`$1`有没有其他方法可以做到这一点，或者我做错了什么？

`text = string.replaceAll("(PART)", "$1");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:02:04.680

[`String.replaceAll()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)接收正则表达式作为第一个参数。

您可能想尝试一下[`String.replace()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)，因为您可以传递要替换的“普通”字符串。

# objective-c - 检查 UITableView 中的多个单元格

> ID：13397948
> 
> 赞同：0
> 
> 时间：2012-11-15T12:56:06.157
> 
> 标签：objective-c, ios, xcode

我正在使用两个 NSMutable 数组来存储多个复选标记.. **repeatDaysToStore**和**data1**。这是 viewDidLoad 方法中的代码...

```
for (int i=1; i<=[repeatDaysToStore count]; i++) 

{

    BOOL isTheObjectThere = [repeatArray containsObject:[repeatDaysToStore objectAtIndex:(i-1)]];

    if (isTheObjectThere) 
    {

        NSString *into=[repeatArray objectAtIndex:[repeatArray indexOfObject:[repeatDaysToStore objectAtIndex:(i-1)]]];

              [data1 addObject:into];

        NSLog(@"check did load");

    }

} 
```

在此之后我使用 data1 数组来检查单元格......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:                  (NSIndexPath *)indexPath
 {
    static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
 if (cell == nil) {

    cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:CellIdentifier];
 }
 cell.textLabel.text=[repeatArray objectAtIndex:indexPath.row];
tableView.allowsMultipleSelection=YES;
 for (int j=1; j<=[data1 count]; j++) {
     NSLog(@"%d",[[data1 objectAtIndex:(j-1)]intValue]);
       NSLog(@"%d",indexPath.row);
   if([data1 indexOfObject:[data1 objectAtIndex:(j-1)]]==indexPath.row)
     {
  cell.accessoryType = UITableViewCellAccessoryCheckmark;
 } 
 else
  {
       cell.accessoryType = UITableViewCellAccessoryNone;
  }

  } 
```

为了处理行选择，我在 didSelectRowAtIndexPath { NSString *myobj=[repeatArray objectAtIndex:indexPath.row];

```
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];    
      if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;
        [repeatDaysToStore removeObject:myobj];
        [data1 removeObject:myobj];

    } else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        [repeatDaysToStore addObject:myobj];
        [data1 addObject:myobj];

    }
[tableView reloadData];
 } 
```

但它不起作用。有人请告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:45:45.157

我认为问题在于`cellForRowAtIndexPath:`方法的以下代码：

```
for (int j=1; j<=[data1 count]; j++)
{
     NSLog(@"%d",[[data1 objectAtIndex:(j-1)]intValue]);
     NSLog(@"%d",indexPath.row);
   if([data1 indexOfObject:[data1 objectAtIndex:(j-1)]]==indexPath.row)
   {
     cell.accessoryType = UITableViewCellAccessoryCheckmark;
   } 
   else
   {
       cell.accessoryType = UITableViewCellAccessoryNone;
   }
} 
```

删除代码并编写如下条件：

```
if([data1 containsObject:[repeatArray objectAtIndex:indexPath.row])
{
   cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
else
{
   cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

也`[tableView reloadData];`从`didSelectRowAtIndexPath:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:49:54.843

我认为您需要一个不太复杂的数据结构才能以易于理解的方式进行这项工作。

表的数据应该是一个对象数组。每个对象应至少包含两个属性：一个是您要显示的信息`cell.textLabel.text`，另一个是`BOOL`表示是否选择该对象的属性。

选择一行后，将 设置为`BOOL`与当前行相反的值并重新加载表。在`cellForRowAtIndexPath:`中，只需将对象的当前设置用于请求的行，而无需通过辅助数组。

# magento - Magento - 从购物车中删除一个数量

> ID：13397952
> 
> 赞同：1
> 
> 时间：2012-11-15T12:57:19.073
> 
> 标签：magento, cart

我试图从我的购物车中只删除一个数量而不是全部，但无济于事。

有人可以帮忙吗？

这是我到目前为止得到的代码......

```
require_once 'app/Mage.php';
Mage::app("default");
Mage::getSingleton("core/session", array("name" => "frontend"));
$session = Mage::getSingleton("customer/session");

$yourProId = $_POST['prodID'];
$qty = 1;

foreach (Mage::getSingleton('checkout/session')->getQuote()->getItemsCollection() as $item) {
    if ($yourProId == $item->getProductId()) {
        Mage::getSingleton('checkout/cart')->removeItem($item->getId())->save();
    }
} 
```

**更新**：这是有效的代码，感谢RS！

```
$yourProId = $_POST['prodID']; 
$qty=1; 

$cartHelper = Mage::helper('checkout/cart');
$items = $cartHelper->getCart()->getItems();
foreach ($items as $item) {
if ($item->getProduct()->getId() == $yourProId) {
    $qty = $item->getQty() - 1; // check if greater then 0 or set it to what you want
    if($qty == 0) {
        Mage::getSingleton('checkout/cart')->removeItem($item->getId());    
    } else {
            $item->setQty($qty);
        }
        $cartHelper->getCart()->save();
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:27:40.053

尝试

```
$cartHelper = Mage::helper('checkout/cart');
$items = $cartHelper->getCart()->getItems();
foreach ($items as $item) {
    if ($item->getProduct()->getId() == $yourProId) {
        if( $item->getQty() == 1 ){
            $cartHelper->getCart()->removeItem($item->getItemId())->save();
        }
        else if($item->getQty() > 1){
            $item->setQty($item->getQty() - 1)
            $cartHelper->getCart()->save();
        }
        break;
    }
} 
```

看看@/app/code/core/Mage/Checkout/controllers/CartController.php

请参阅[http://www.magentocommerce.com/boards/viewthread/30113/](http://www.magentocommerce.com/boards/viewthread/30113/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T06:09:27.683

您可以使用 $quoteItem->setData('qty', $avl_qty); 更改或删除数量 请参阅代码以获取更多帮助。

```
$quoteItem = $observer->getEvent()->getQuoteItem();
$avl_qty = 1;
if ($avl_qty == '0') {
  $quoteItem->getQuote()->removeItem($quoteItem->getItemId());
  throw new LocalizedException(__("This product is currently out of stock."));                    
} 
elseif ($order_qty > $avl_qty) {                   
  $quoteItem->setData('qty', $avl_qty);
  $this->_cart->save();
  $this->messageManager->addNoticeMessage('Sorry we have only '.$avl_qty.' qty of this product available');                    
} 
else {                   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-03T16:20:13.053

对于 Magento 2，您可以使用 带有身份验证令牌和正文的[https://yourdomain.com/rest/V1/carts/mine/items API](https://yourdomain.com/rest/V1/carts/mine/items)

```
{
   "cartItem": {
       "item_id": 49388,//item_id not SKU
       "qty": 1,        //This will overwrite quantity
       "quote_id": {{QuoteId}}
   }
} 
```

# objective-c - 使用带有浮点数的 pow

> ID：13397953
> 
> 赞同：0
> 
> 时间：2012-11-15T12:57:20.497
> 
> 标签：objective-c

> pow ((1 + double1Value/100), double2Value)

那是对的吗 ？我还需要

```
# import "math.h" 
```

我在使用该代码时遇到了一些问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:59:51.317

有`powf`专门用于浮点数的，但无论如何您似乎都在使用双精度数，这使得您当前的实现正确。你的 100 也应该是双倍的吗？`100.0`

[这里](http://www.mkssoftware.com/docs/man3/pow.3.asp)有一些文档`pow`和`powf`

无需导入objective-c 中的任何特定内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:01:30.767

是的，您的实施是正确的。我会将其他值更改为双精度值。

```
pow ((1.0 + double1Value/100.0), double2Value) 
```

据我所知，您不需要导入 math.h

# .net - 在 WIX 中创建一个简单的网站 MSI 安装程序

> ID：13397954
> 
> 赞同：0
> 
> 时间：2012-11-15T12:57:21.590
> 
> 标签：.net, wix, windows-installer, wix3.5

我一直在尝试调整以下 WIX XML 来创建 MSI 来安装网站。

我对此很陌生，但 WIX 有相当长的学习曲线，所以我已经了解了下面的代码片段。

当我收到此错误时，它目前无法编译：

**未解决对“产品：*”部分中符号“WixComponentGroup：C_WebAppContent”的引用**

我想做的就是以下。

将网站安装到 D:\websites\website 设置虚拟目录 设置 App Pool

就是这样......我在哪里出错了？

产品.wxs

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" 
     xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension" 
     xmlns:netfx="http://schemas.microsoft.com/wix/NetFxExtension">

  <!--NEVER EVER EVER EVER CHANGE THE UPGRADE CODE!!!!!!!!!!!!!!! -->
  <?define UpgradeCode="176df50b-d3aa-4f25-ae7b-2098a6b881b2" ?>

  <Product Id="*" 
           Name="MdxWebsite" 
           Language="1033" Version="1.0.0.0" 
           Manufacturer="RBS" 
           UpgradeCode="$(var.UpgradeCode)">
    <Package InstallerVersion="200" Compressed="yes" />

    <!-- This includes our properties that implement the "Remember Property" pattern -->
    <?include Configuration.wxi ?>

    <Media Id="1" Cabinet="media.cab" EmbedCab="yes" />

    <MajorUpgrade AllowDowngrades="no" 
                  AllowSameVersionUpgrades="yes" 
                  Schedule="afterInstallInitialize"
                  DowngradeErrorMessage="A later version of this product is already installed. Setup will now exit."/>

    <!-- Creating default directory structure (INSTALLLOCATION be override by user, but it starts in Program Files) -->
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id='ProgramFilesFolder' Name='PFiles'>
        <Directory Id="INSTALLLOCATION" Name="TheDefaultInstallFolderName">
        </Directory>
      </Directory>
    </Directory>

    <Feature Id="F_Content" 
             Title="Content" 
             Level="1" 
             Description="The website content" 
             ConfigurableDirectory="INSTALLLOCATION">
      <ComponentRef Id="C_RegistryEntries"/>
      <!-- The C_WebAppContent can either be generated by the WiX tool "heat", or a hand-crafted set of content, this component is not included in this example -->
      <ComponentGroupRef Id="C_WebAppContent" />
    </Feature>

    <Feature Id="F_IISWebsite" Title="IIS Website" Description="The IIS website and application pool" Level="1">
      <ComponentRef Id="C_IISWebsite" />
    </Feature>

    <InstallExecuteSequence>
    </InstallExecuteSequence>

    <!-- Specify UI -->
    <UIRef Id="UIFlow" />
  </Product>
</Wix> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:35:45.163

因此，我能够通过使用 HEAT 为 ..\obj\Debug 文件夹中 Visual Studio 帮助中的输出创建的 ID 来解决此问题

# java - Wicket Jetty 与 Quickstart 中的 Start.java 的集成停止工作

> ID：13397955
> 
> 赞同：0
> 
> 时间：2012-11-15T12:57:22.690
> 
> 标签：java, jetty, wicket

我刚刚在一台新的开发机器上检查了我的（工作）检票口项目，突然间，每当我尝试启动码头时，我都会收到这个错误。

```
java.lang.NoClassDefFoundError: net/unbewaff/Start
Caused by: java.lang.ClassNotFoundException: net.unbewaff.Start
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Exception in thread "main" 
```

类文件在那里，当我删除文件时，eclipse 会重建它。未找到的类是包含我试图运行并应该启动嵌入式码头的主要方法的类。即使 cd'ing 到目录，查看文件并`java Start.class`在命令行上键入也会出现相同的错误，但措辞略有不同。

[Wicket 和嵌入式码头 - classNotFoundException](https://stackoverflow.com/questions/9821010/wicket-and-embedded-jetty-classnotfoundexception)似乎是相关的，但不是因为那里描述的错误发生在稍后和加载 Start 类之后。

我做了什么：

1.  从存储库中签出项目
2.  运行 mvn 全新安装
3.  运行 mvn eclipse:eclipse
4.  在eclipse中创建了项目
5.  试图启动应用程序
6.  撞墙

老实说，我不认为这是一个检票口或码头问题，但由于他们都以某种方式参与其中，我希望有人遇到并解决了这个问题......

我检查的事情：

*   该文件确实存在，它是最新且可读的
*   我试图看一下`javap Start.class`没有运气的字节码调用（`ERROR:Could not find Start.class`）
*   使用文本编辑器打开类文件（看起来“完全二进制”）
*   running `mvn jetty:run`（与 webapp 一起启动并运行 jetty）

有什么帮助：

正如 Martijn 建议的那样，我抓起一个新的快速入门并比较了 Start-classes。快速入门中的那个工作得很好，我的差异工具和我能找到的唯一区别是连接器上的端口已更改，但快速入门中的类接受了这些，没有任何问题。然后我将这个类从快速入门复制到我的项目中，它在 Dummy.java 的名称下运行良好。删除有问题的类后，清理工作区并将其重命名为 Start.java 它停止工作。将其重命名为 Dummy 使其恢复工作状态。

所以我找到了一个可行的解决方法，但仍然不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:00:10.167

您在 Start 类中引用的某些内容未找到：它是 ClassDefNotFoundException，这是最难解决的错误之一。它会阻止类加载器加载您的 Start 类。

前进的最佳方式是 IMO 生成一个新的快速启动，运行它，然后将内容从您自己的启动类移动到快速启动类，直到它中断。

# c# - 通过 C# 应用程序访问服务器中的文件

> ID：13397956
> 
> 赞同：1
> 
> 时间：2012-11-15T12:57:30.867
> 
> 标签：c#, database, sqlite

我用 c# & SQLite 编写了一个应用程序，用于存储一家拥有大约 500 名员工的公司中所有员工的数据。我想将数据库和应用程序放在文件服务器/共享文件夹（MS 服务器）中。然后，所有员工的桌面上都会有应用程序的快捷方式。我想根据用户运行应用程序的权限启用/禁用一些输入字段（文本框）。这样做的最佳做法是什么？

我希望用户只能通过我的应用程序读取/写入数据库（应用程序位于同一数据库文件夹中）。我不希望用户在没有我的应用程序的情况下访问数据库。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:09:11.613

如果您不希望用户访问您的数据库，您应该创建一个客户端服务器架构。

您可以在与文件服务器相同的机器上运行您的服务（作为 Windows 服务运行），并使用 WCF 在服务器和客户端之间进行通信。您从您的服务器访问您的数据库，并让您的服务器验证您的用户并验证他们是否有权访问应用程序。

您可以欺骗并尝试在客户端应用程序中“隐藏”数据库凭据，但这是一种隐蔽的安全性，任何具有一定编程技能或类似技能的人都可以找到数据库的凭据并直接连接到数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:11:53.477

> 我不希望用户在没有我的应用程序的情况下访问数据库

如果您的应用程序将通过 Windows 文件共享直接访问 SQLite 数据库，这是不可能的。当然，你可以让它不方便，但这并不是真的可能。

真正实现这一点的唯一方法是引入一些中间件。

这通常是一个服务（也许是 WCF），它侦听来自客户端应用程序的连接，对它们进行身份验证，并管理对底层数据库的所有访问。数据库将存储在仅对服务器可见的位置，而不是通过 Windows 共享对您的用户可见的位置。

此外，对于多用户系统，SQLite 并不是一个很好的选择。您可以在这里用一块石头杀死两只鸟 - 切换到接受网络客户端连接的 DBMS（MS SQL Server Express 是免费的，MySQL、PostgreSQL 也是常见的免费选择），并构建您的应用程序以直接连接到数据库服务器（也可以像这样使用集成的 Windows 身份验证，因此您可以避免显式登录）。在一个简单的场景中，这可能就足够了，并且避免了您需要构建显式服务层。

在更复杂的场景中，在应用程序和数据库之间有一个中间件层仍然有意义 - 这样，您可以更改数据库设计而不更改应用程序设计并部署到所有客户端机器 - 相反，只需更改中间件层在一个地方，您的应用程序不会知道其中的区别。

# android - android从位置对象失去了经度和纬度的精度

> ID：13397960
> 
> 赞同：0
> 
> 时间：2012-11-15T12:57:53.100
> 
> 标签：android, google-maps, geopoints

我有一个从位置服务获取当前用户位置的应用程序。当我从位置对象中获取 lon 和 lat 时，它们如下所示

```
lat = 53.653770446777344
 lon = -1.520833969116211 
```

.

然后我将这些存储在一个 GeoPoint 对象中，该对象传递给 Google 服务器的查询字符串。这最终会在当前位置和目的地之间绘制一条折线。

一切正常，并且绘制了多段线，但是由于当前位置设置在大约 100 英里外，因此绘制不正确。我已经注销了一些值，当 lon 和 lat 传递到地理点时，精度会有所下降。

我该如何解决这个问题。

```
@Override
    public void onLocationChanged(Location location) {
         lati =  (location.getLatitude());
         lngi =  (location.getLongitude());
         startAddr = new GeoPoint((int)lati, (int)lngi);
        Log.e(TAG, "lat = " + lati);
        Log.e(TAG, "lon = " + lngi);
        Log.e(TAG, "lat after cast  = " + (int)(lati * 1000000));
        Log.e(TAG, "lon after cast = " + (int)(lngi * 1000000));
        locationManager.removeUpdates(this);
        StringBuilder sb = new StringBuilder();
        sb.append("http://maps.google.com/maps/api/directions/json?origin=");
        sb.append(startAddr);
        sb.append("&destination=");
        sb.append(endAddr);
        sb.append("&sensor=false");

        stringUrl = sb.toString();
        Log.e(TAG, "url = " + stringUrl);
        AsyncGetRoute agr = new AsyncGetRoute();
        agr.execute(); 
```

.

```
11-15 12:45:17.280: E/GetClientDirections(23220): lat = 53.653770446777344
11-15 12:45:17.280: E/GetClientDirections(23220): lon = -1.520833969116211
11-15 12:45:17.280: E/GetClientDirections(23220): lat after cast  = 53653770
11-15 12:45:17.280: E/GetClientDirections(23220): lon after cast = -1520833
11-15 12:45:17.290: E/GetClientDirections(23220): url = http://maps.google.com/maps/api/directions/json?origin=53,-1&destination=AL73EZ&sensor=false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:01:43.133

这就是问题：

```
 startAddr = new GeoPoint((int)lati, (int)lngi); 
```

这会截断分数，因此对于您的输入非常有效，您的结果是：

```
 startAddr = new GeoPoint(53, -1); 
```

正如[API 文档所说](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/GeoPoint)，GeoPoint 接受整数值：两个角度乘以 10^6。正因为如此，给定的坐标将对应于这些值：

```
Latitude:   0.000053
Longitude: -0.000001 
```

你应该先乘以 10^6，然后截断，所以你应该尝试：

```
 startAddr = new GeoPoint((int)(lati*1000000.0), (int)(lngi*1000000.0)); 
```

# php - 即使在更改端口号后 wamp 服务器仍显示空白页

> ID：13397968
> 
> 赞同：0
> 
> 时间：2012-11-15T12:58:23.643
> 
> 标签：php, apache, wamp, wampserver

当我运行我的 wamp 服务器并在 chrome 浏览器中运行 localhost:80 时，它向我显示空白页。然后我在 httpd.conf 文件中将端口号更改为 84。即使那样它也显示空白页。

我尝试了不同的端口号（85、86、8084），还停止了使用端口 80 的 Skype 进程。

有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:00:05.167

如果您的网络服务器配置错误，您可能会收到 404。*空白页*通常意味着 PHP 错误。

1.  检查您的错误日志。**您可以在httpd.conf**中找到日志位置
***   修复您的 PHP 问题。日志有文件和行号。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:05:47.880

**1)**每次更改配置中的内容时都必须重新启动 wamp 服务器

**2）**在wamp服务器中将所有内容设置回默认值或重新安装

**3）**打开Skype，转到**工具**->**选项...**，转到**高级**->**连接**并取消选中**使用端口80和443作为传入连接的替代选项**->**保存**

**4)**再次启动 WAMP -> 享受 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T18:09:37.000

同样的问题，这里是解决方案！（为了转到不同的端口，需要更改多个文件）

**原因 ：**

另一个程序（Skype 但不仅仅是 Skype）正在使用端口 80（默认情况下是 wamp 使用的那个）。您可以看到它键入以下命令“netstat -ano”并查看“localadress 0.0.0.0.80”上的内容，如果您想看到相关程序打开，请注意行尾的数字（例如 4 )，然后打开任务管理器、服务，看看谁在 PID 4 上。

**解决方案 ：**

让我们**将 wamp 端口更改为 81**！

[将 wamp 端口从 80 更改为 81](http://xfloyd.net/blog/?p=515)**

# javascript - d3.js 中的渐进路径动画：如何循环遍历 d3 选择的各个元素，例如区域图的每个路径段？

> ID：13397969
> 
> 赞同：0
> 
> 时间：2012-11-15T12:58:28.540
> 
> 标签：javascript, svg, d3.js, visualization

我在 d3.js 中完成了[这个小面积图演示。](http://dffrnt.com/d3.html)

我能够为*整个*图表制作动画，但找不到一种方法来逐个制作动画（我希望它是一个适当的动画，而不是使用 svg-clip 的简单显示）。例如，为上面链接的页面中的圆圈设置动画的代码只是两行简单的行，为了清楚起见，我在此处将其分解：

```
// start frame
chart
    .selectAll( 'circle' )
    .data( data )
    .enter()
    .append( 'circle' )
    .attr( 'cx', function( d, i ) { return x( i ); })
    .attr( 'cy', y( 0 ) )
    .attr( 'class', 'point' ).attr( 'r', 5 );

// end frame
chart
    .selectAll( 'circle' )
    .data( data )
    .transition()
    .duration( 3000 )
    .attr( 'cx', function( d, i ) { return x( i ); })
    .attr( 'cy', function( d, i ) { return y( d ); }); 
```

这里的问题是***所有***的圈子都是同时开始和结束的。面积图的各个部分也是如此。那么如何一个接一个地移动它们呢？一种方法是使用d3的`delay`功能；我不确定如何对面积图的路径段执行此操作，但对于标记数据点的圆圈，它会是这样的：

```
// start frame
chart
    .selectAll( 'circle' )
    .data( data )
    .enter()
    .append( 'circle' )
    .attr( 'cx', function( d, i ) { return x( i ); })
    .attr( 'cy', y( 0 ) )
    .attr( 'class', 'point' ).attr( 'r', 5 );

// end frame
chart
    .selectAll( 'circle' )
    .data( data )
    .transition()
    .delay( 1000 * c )
    .duration( 3000 )
    .attr( 'cx', function( d, i ) { return x( i ); })
    .attr( 'cy', function( d, i ) { return y( d ); }); 
```

但要做到这一点，我需要`c`一个接一个地链接到各个圆圈的句柄，就像在一个循环中一样。

所以我的问题是：

1.  我如何获得`c`选择的单个元素的句柄，用于圆圈***和***区域（svg.area（））图表？

2.  有没有比我的`delay`方法更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:22:24.227

1)`c`可以通过将函数传递给 来获取您要查找的内容，这与您对任何调用`delay()`所做的方式完全相同（请参阅[文档](https://github.com/mbostock/d3/wiki/Transitions#wiki-delay)）：`attr()`

```
.delay( function(d, i) { return 1000 * i; } )// i is your "c" 
```

2）使用`delay()`肯定似乎是正确的方法。

AFAIK，你仍然会在为路径做同样的事情时遇到困难。除了动画基础数据点本身之外，我想不出任何方法来做到这一点。

# asp.net - 从 ASP.NET 页面中用户来自的位置重定向回来不是代码背后

> ID：13397970
> 
> 赞同：0
> 
> 时间：2012-11-15T12:58:29.670
> 
> 标签：asp.net, html, http, sharepoint, redirect

我有一个 ASP.NET 页面，我现在得到的是

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="RedirectMeNow.aspx.cs" Inherits="abc.eyd._12.TEMPLATE.LAYOUTS.RedirectMeNow" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

我怎样才能将用户从他来自这里的地方重定向回来，而不是像这里这样的代码后面

[从 ASP.NET 用户控件中的用户来源重定向回来](https://stackoverflow.com/questions/13397405/redirecting-back-from-where-user-came-from-in-asp-net-user-control/13397455#13397455)

> 或者我只想要一个 ASP.NET 页面来重定向随叫随到的用户

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:00:45.667

为避免使用代码隐藏，您必须使用客户端 Javascript 函数：

```
window.history.back(); 
```

您可以将其绑定到事件或在页面加载期间执行它。

编辑：如果您想将此页面设置为仅重定向页面，您可以将此代码添加到您的标签中：

```
<head>
....
<script type="text/javascript>
window.history.back();
</script>
</head> 
```

它将在页面加载后立即执行。就是这样！

# perl - 使用 perl 对哈希值进行总和哈希

> ID：13397976
> 
> 赞同：0
> 
> 时间：2012-11-15T12:58:44.487
> 
> 标签：perl, excel, hash, sum

我有一个解析 Excel 文件并执行以下操作的 Perl 脚本：它计算 A 列中的每个值，它在 B 列中具有的元素数，脚本如下所示：

```
use strict;
use warnings;
use Spreadsheet::XLSX;
use Data::Dumper;
use List::Util qw( sum );

my $col1 = 0;
my %hash;

my $excel = Spreadsheet::XLSX->new('inout_chartdata_ronald.xlsx');

my $sheet = ${ $excel->{Worksheet} }[0];

$sheet->{MaxRow} ||= $sheet->{MinRow};
my $count = 0;
# Iterate through each row
foreach my $row ( $sheet->{MinRow}+1 .. $sheet->{MaxRow} ) {

# The cell in column 1
my $cell = $sheet->{Cells}[$row][$col1];

if ($cell) {

    # The adjacent cell in column 2
    my $adjacentCell = $sheet->{Cells}[$row][ $col1 + 1 ];  
    # Use a hash of hashes

    $hash{ $cell->{Val} }{ $adjacentCell->{Val} }++;

}
}
print "\n", Dumper \%hash; 
```

输出如下所示：

```
$VAR1 = {
      '13' => {
                'klm' => 1,
                'hij' => 2,
                'lkm' => 4,
              },
      '12' => {
                'abc' => 2,
                'efg' => 2
              }
    }; 
```

这很好用，我的问题是：如何访问此输出 $VAR1 的元素以便执行：对于值 13，klm + hij = 3 并获得如下最终输出：

```
$VAR1 = {
      '13' => {
                'somename' => 3,
                'lkm' => 4,
              },
      '12' => {
                'abc' => 2,
                'efg' => 2
              }
    }; 
```

所以基本上我想要做的是循环遍历我的最终哈希值，并根据唯一键访问其特定元素，最后计算它们的总和。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:21:38.437

我曾经`@do_sum`指出您要进行哪些更改。新密钥在脚本中被硬编码。`$found`请注意，如果子哈希（标志）中不存在密钥，则不会创建新密钥。

```
#!/usr/bin/perl
use warnings;
use strict;

use Data::Dumper;

my %hash = (
            '13' => {
                     'klm' => 1,
                     'hij' => 2,
                     'lkm' => 4,
                    },
            '12' => {
                     'abc' => 2,
                     'efg' => 2
                    }
           );
my @do_sum = qw(klm hij);

for my $num (keys %hash) {
    my $found;
    my $sum = 0;
    for my $key (@do_sum) {
        next unless exists $hash{$num}{$key};
        $sum += $hash{$num}{$key};
        delete $hash{$num}{$key};
        $found = 1;
    }
    $hash{$num}{somename} = $sum if $found;
}

print Dumper \%hash; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:58:50.357

听起来你需要了解[Perl References](http://perldoc.perl.org/perlreftut.html)，也许[Perl Objects](http://perldoc.perl.org/perlootut.html)只是处理引用的好方法。

如您所知，Perl 具有三种基本数据结构：

*   标量 ( `$foo`)
*   数组 ( `@foo`)
*   哈希 ( `%foo`)

问题是这些数据结构只能包含*标量*数据。也就是说，数组中的每个元素都可以保存一个值，或者哈希中的每个键都可以保存一个值。

在您的情况下`%hash`是一个哈希，其中哈希中的每个条目都引用另一个哈希。例如：

您`%hash`有一个条目，其中的键为`13`。这不包含*标*量值，而是对另一个散列的引用，其中包含三个键：`klm`、`hij`和`lkm`。您可以通过以下语法引用它：

```
${ hash{13} }{klm} = 1
${ hash{13} }{hij} = 2
${ hash{13} }{lkm} = 4 
```

花括号可能是也可能不是必需的。但是，`%{ hash{13} }`引用该哈希包含在 中`$hash{13}`，因此我现在可以引用该哈希的键。当您谈论数组哈希的哈希值时，您可以想象这会变得更加复杂。幸运的是，Perl 包含一个更简单的语法：

```
$hash{13}->{klm} = 1
%hash{13}->{hij} = 2
%hash{13}->{lkm} = 4 
```

阅读有关哈希以及如何操作它们的信息。在您对此感到满意之后，您可以开始学习面向对象的 Perl，它以更安全的方式处理引用。

# sql - SQL 与 noSQL（速度）

> ID：13397979
> 
> 赞同：86
> 
> 时间：2012-11-15T12:58:55.277
> 
> 标签：sql, nosql

当人们比较 SQL 和 noSQL 并总结各自的优缺点时，我从来没有听到任何人谈论的是速度。

执行 SQL 查询通常不比执行 noSQL 查询**更快吗？**

**我的意思是，对我来说，这将是一个非常明显的结论，因为如果您知道**数据库的结构，那么您应该总是能够比不知道的情况下更快地找到一些东西。

但是人们似乎从来没有提到这一点，所以我想知道我的结论是对还是错。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-15T13:07:58.923

倾向于使用 noSQL 的人专门使用它，因为它适合他们的用例。脱离了正常的 RDBMS 表关系和约束，以及数据的 ACID-ity，很容易让它运行得更快。

考虑使用 NoSQL 的 Twitter，因为用户只在网站上做非常有限的事情，或者确切地说是一件事 - 推文。并发可以被认为是不存在的，因为（1）没有其他人可以修改您的推文，并且（2）您通常不会同时从多个设备发推文。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-11-15T13:13:01.827

noSQL 系统的定义非常广泛——不使用 SQL / 的数据库不是 RDBMS。因此，简而言之，您的问题的答案是：“这取决于”。

一些 noSQL 系统基本上只是持久的键/值存储（例如[Project Voldemort](http://www.project-voldemort.com/)）。如果您的查询属于“查找给定键的值”的类型，那么这样的系统将（或至少*应该*）比 RDBMS 更快，因为它只需要具有更小的功能集。

另一种流行的 noSQL 系统类型是文档数据库（如[CouchDB](http://couchdb.apache.org/)）。这些数据库没有预定义的数据结构。它们的速度优势在很大程度上依赖于非规范化和创建适合您将在其上运行的查询的数据布局。例如，对于博客，您可以将博客文章连同其评论一起保存在文档中。这减少了连接和查找的需求，使您的查询更快，但它也可能降低您在查询方面的灵活性。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-15T15:13:15.983

正如爱因斯坦所说，速度是相对的。

如果您需要存储一个主/从简单应用程序（如购物车），您需要在您的 SQL 应用程序中执行多个插入语句，当您执行查询以获取购买时，您将获得一个数据集信息，如果您使用的是 NoSQL，并且使用得很好，那么您将在一个简单的“记录”中获得单个订单的所有数据（如果您使用 djondb 等 NoSQL 数据库的术语，请记录）。

所以，我真的认为一个应用程序的性能可以通过它需要做的事情来实现一个单一的需求来衡量，如果你需要做几个插入来存储一个订单，你只需要一个简单的插入到数据库中就像 djondb 一样，那么在 NoSQL 世界中性能将提高 10 倍，这仅仅是因为您对数据库层的调用减少了 10 倍，仅此而已。

为了说明我的观点，让我链接一个我之前写的关于 NoSQL 和 SQL 数据模型方法之间差异的示例：[https ://web.archive.org/web/20160510045647/http://djondb.com/blog/nosql- masterdetail-sample/](https://web.archive.org/web/20160510045647/http://djondb.com/blog/nosql-masterdetail-sample/)，我知道这是一个自我参考，但基本上我写它是为了解决这个问题，以及为什么它会随时获得更好的性能，不是因为我们使用“nasa”技术，而是因为 NoSQL 会让开发人员做的更少……得到更多、更少的代码 = 更好的性能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T13:08:35.220

答案是：视情况而定。一般来说，NoSQL DATABASES（没有“查询”）的目标是可扩展性。RDBMS 通常在某些时候有一些硬性限制（我说的是数以百万计的行），您无法通过传统方式（复制、集群、分区）进行更多扩展，并且您需要更多的东西，因为您的需求不断增长。或者即使您设法扩展，整体设置也相当复杂。或者您可以扩展读取，但不能扩展写入。

查询取决于您的服务器的特定实现、您正在执行的查询类型、表中的列等等……请记住，查询只是 RDBMS 的一部分。

* * *

## 回答 #5

> 赞同：-15
> 
> 时间：2014-08-04T11:37:13.637

1000人数据的SQL等关系数据库的查询时间为2000毫秒，neo4j等图形数据库的查询时间为2毫秒。如果您创建更多节点1000000速度稳定2毫秒

# java - JPA 坚持大 blob

> ID：13397981
> 
> 赞同：0
> 
> 时间：2012-11-15T12:59:01.650
> 
> 标签：java, jpa, ejb, blob

我正在尝试使用大型 blob 文件保留实体，但在 JBoss 日志中出现“内存不足”错误。

我测试了几种配置，但总是得到相同的结果。我正在使用 jBoss 6 和 MySQL。

这方面的一个例子......实体：

```
@Entity
@Table(name="ficheros")
public class Fichero implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(unique=true, nullable=false)
    private int idfichero;

    @Lob()
    @Column(nullable=false)
    private Blob fichero;

    public Fichero() {
    }

    public int getIdfichero() {
        return this.idfichero;
    }

    public void setIdfichero(int idfichero) {
        this.idfichero = idfichero;
    }

    public Blob getFichero() {
        return this.fichero;
    }

    public void setFichero(Blob fichero) {
        this.fichero = fichero;
    }   
} 
```

班上：

```
public Integer insertaFichero(Fichero fich) {
    ficheroDAO.create(fich);

    return fich.getIdfichero();
} 
```

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:37:27.883

此错误的问题是操作系统无法为线程堆栈分配更多内存，因此无法实例化新线程。可能这不是 JBoss 的问题。您必须减少每个线程使用的内存量。JBoss 线程的合适大小是 128k 或 256k。

您可以从 JBoss 文档中查看这篇文章

[https://community.jboss.org/wiki/OutOfMemoryExceptions?_sscc=t](https://community.jboss.org/wiki/OutOfMemoryExceptions?_sscc=t)。

[https://community.jboss.org/wiki/OutOfMemoryExceptionWhenCannotCreateThread](https://community.jboss.org/wiki/OutOfMemoryExceptionWhenCannotCreateThread)。

另请参阅 stackoverflow 问题： [安全线程堆栈大小？](https://stackoverflow.com/questions/4154543/safe-thread-stack-size)

为了减少这个内存量，我在linux中找到了命令：

```
ulimit -s 256 
```

# javascript - 图像调整大小的 webkit 性能分析

> ID：13397985
> 
> 赞同：4
> 
> 时间：2012-11-15T12:59:23.097
> 
> 标签：javascript, css, performance, google-chrome, webkit

使用铬跟踪面板进行性能分析我发现许多图像调整大小，尤其是在滚动时。

我已经从前端删除了所有（我认为）图像调整大小，并将用于测试目的的 dom 简化为此时主要只是静态图像元素。

我有几个理论：

1.  所有图像在内部调整大小/重新采样
    *   查看铬源，我发现一切都在调用“NativeImageSkia::resizedBitmap”的证据
2.  使用视网膜显示mac会导致图像被采样
    *   这可以通过在跟踪器中看到 4 倍于 src_pixels 的“dst_pixels”大小来支持

有人可以确认或否认上述任何一项吗？

还：

是否可以追踪正在调整大小的图像？

![在此处输入图像描述](../Images/4a425a3fe640230ea98269087a3f403f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T00:09:19.190

在与谷歌的一些人合作后，我确定这实际上是一个与处理视网膜 macbook 专业人士的高 PPI 监视器有关的 webkit 错误。

您可以在非视网膜显示器（相同的 Mac，外接显示器）上看到只有“图像解码”事件。相同的内容，相同的 mac，在视网膜显示器上呈现，您可以看到“图像解码”和“图像调整大小”事件。

用 24 和 25.0.1329.0 测试

![非视网膜显示器](../Images/c731171572cabbe8a971a990bcfce146.png) ![Retina显示屏](../Images/2c669c084b0f284a6f4de1e08e925210.png)

此外，目前无法从 chrome 中的运行时检测中找出正在调整大小的图像。

# java - AnnotationProcessor 使用多个源文件创建一个文件

> ID：13397987
> 
> 赞同：16
> 
> 时间：2012-11-15T12:59:27.757
> 
> 标签：java, annotation-processing

我有两个带有方法的类，我想将这两个类的方法合并为一个类。

```
@Service("ITestService")
public interface ITest1
{
   @Export
   void method1();
}

@Service("ITestService")
public interface ITest2
{
   @Export
   void method2();
} 
```

结果应该是：

```
public interface ITestService extends Remote
{
  void method1();
  void method2();
} 
```

我的 AnnotationProcessor 的第一次运行会生成正确的输出（因为 RoundEnvironment 包含这两个类）。

但是，如果我编辑其中一个类（例如添加新方法），RoundEnviroment 仅包含编辑后的类，因此结果如下（将 newMethod() 添加到接口 ITest1）

```
public interface ITestService extends Remote
{
  void method1();
  void newMethod();
} 
```

**现在方法 2 不见了。我不知道如何解决我的问题。有没有办法（环境）访问项目中的所有类？还是有其他方法可以解决这个问题？**

生成类的代码很长，所以这里简短描述一下我是如何生成类的。我遍历元素`env.getElementsAnnotatedWith(Service.class)`并提取方法并将它们写入新文件：

```
FileObject file = null;
file = filer.createSourceFile("com/test/" + serviceName);
file.openWriter().append(serviceContent).close(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-20T01:43:04.860

-- 选项 1 - 从命令行手动编译 ---

我试图做你想做的事，即从处理器访问所有类，正如人们评论的那样，javac 总是编译所有类，并且从 RoundEnvironment 我确实可以访问所有正在编译的类，每次（即使没有文件更改），有一个小细节：只要所有类都显示在要编译的类列表中。

我用两个接口做了一些测试，其中一个（A）依赖于（B）另一个（扩展），我有以下场景：

1.  如果我要求编译器只显式编译具有依赖项（A）的接口，将 java 文件的完整路径传递到命令行，并将输出文件夹添加到类路径，只有我传递到命令行的接口得到处理。
2.  如果我只显式编译（A）并且不将输出文件夹添加到类路径中，编译器仍然只处理接口（A）。但它也给了我警告：`Implicitly compiled files were not subject to annotation processing.`
3.  如果我使用 * 或将两个类都传递给编译器到命令行，那么我得到预期的结果，两个接口都得到处理。

如果您将编译器设置为详细，您将收到一条明确的消息，显示每轮将处理哪些类。这是我显式传递接口（A）时得到的：

```
Round 1:
input files: {com.bearprogrammer.test.TestInterface}
annotations: [com.bearprogrammer.annotation.Service]
last round: false 
```

这就是我添加两个类时所得到的：

```
Round 1:
input files: {com.bearprogrammer.test.AnotherInterface, com.bearprogrammer.test.TestInterface}
annotations: [com.bearprogrammer.annotation.Service]
last round: false 
```

在这两种情况下，我都看到编译器解析了这两个类，但顺序不同。对于第一种情况（仅添加了一个接口）：

```
[parsing started RegularFileObject[src\main\java\com\bearprogrammer\test\TestInterface.java]]
[parsing completed 15ms]
[search path for source files: src\main\java]
[search path for class files: ...]
[loading ZipFileIndexFileObject[lib\processor.jar(com/bearprogrammer/annotation/Service.class)]]
[loading RegularFileObject[src\main\java\com\bearprogrammer\test\AnotherInterface.java]]
[parsing started RegularFileObject[src\main\java\com\bearprogrammer\test\AnotherInterface.java]] 
```

对于第二种情况（添加了所有接口）：

```
[parsing started RegularFileObject[src\main\java\com\bearprogrammer\test\AnotherInterface.java]]
...
[parsing started RegularFileObject[src\main\java\com\bearprogrammer\test\TestInterface.java]]
[search path for source files: src\main\java]
[search path for class files: ...]
... 
```

这里重要的细节是编译器在第一种情况下将依赖项作为编译的隐式对象加载。在第二种情况下，它将作为待编译对象的一部分加载（您可以看到这一点，因为它在解析提供的类后开始搜索文件的其他路径）。并且似乎隐式对象不包含在注释处理列表中。

有关编译过程的更多详细信息，请查看此[编译概述](http://openjdk.java.net/groups/compiler/doc/compilation-overview/index.html)。这并没有明确说明要提取哪些文件进行处理。

这种情况下的解决方案是始终将所有类添加到编译器的命令中。

--- 选项 2 - 从 Eclipse 编译 ---

如果您从 Eclipse 编译，增量构建将使您的处理器失败（尚未测试）。但我认为你可以绕过要求一个干净的构建（Project > Clean ...，也没有测试过）或编写一个始终清理类目录并[从 Eclipse 设置一个 Ant Builder](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-93_project_builder.htm)的 Ant 构建。

--- 选项 3 - 使用构建工具 ---

如果您使用的是其他构建工具，例如 Ant、Maven 或 Gradle，最好的解决方案是在编译之外的单独步骤中生成源代码。您还需要在单独的上一步中编译您的处理器（如果在 Maven/Gradle 中使用多项目构建，则需要一个单独的子项目）。这将是最好的情况，因为：

1.  对于处理步骤，您始终可以在不实际编译代码的情况下进行完全干净的“编译”（使用`-proc:only`javac 中的选项仅处理文件）
2.  生成的源代码到位后，如果您使用 Gradle，那么如果生成的源文件没有更改，则无需重新编译它们就足够聪明了。Ant 和 Maven 只会重新编译所需的文件（生成的文件及其依赖项）。

对于这第三个选项，您还可以设置一个 Ant 构建脚本，以从 Eclipse 作为构建器生成这些文件，该构建器在您的 Java 构建器之前运行。在某个特殊文件夹中生成源文件并将其添加到 Eclipse 中的类路径/构建路径中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-02T07:30:12.647

NetBeans [@Messages](http://bits.netbeans.org/8.0.1/javadoc/org-openide-util/org/openide/util/NbBundle.Messages.html)注释为同一包中的所有类生成单个*Bundle.java文件。*由于[注释处理器](http://hg.netbeans.org/releases/file/release801/openide.util/src/org/netbeans/modules/openide/util/NbBundleProcessor.java)中的以下技巧，它可以在增量编译中正常工作：

```
Set<Element> toProcess = new HashSet<Element>();
for (Element e : roundEnv.getElementsAnnotatedWith(Messages.class)) {
  PackageElement pkg = findPkg(e);
  for (Element elem : pkg.getEnclosingElements()) {
    if (elem.getAnnotation(Message.class) != null) {
      toProcess.add(elem);
    }
  }
}
// now process all package elements in toProcess 
// rather just those provided by the roundEnv

PackageElement findPkg(Element e) {
  for (;;) {
    if (e instanceof PackageElement) {
      return (PackageElement)e;
    }
    e = e.getEnclosingElement();
  }
} 
```

通过这样做，可以确保包中的所有（顶级）元素都被一起处理，即使只在包中的单个源文件上调用了编译。

如果您知道在哪里查找注释（包中的顶级元素甚至包中的任何元素），您应该能够始终获得所有此类元素的列表。

# android - Android Intent 通过 jar

> ID：13397990
> 
> 赞同：2
> 
> 时间：2012-11-15T12:59:35.230
> 
> 标签：android, android-layout, android-intent, android-widget

我开发了一个具有一个 UI 设计（如用户名、密码）的 Android 应用程序我将我的应用程序转换为 jar（这意味着我将我的应用程序转换为库项目）在我得到另一个应用程序中使用的 Jar.i 之后我遵循这个方法

**1.**我将我的 jar 添加到参考库路径
**2.**我在库路径中包含 jar
**3.**我在 Android 清单文件中添加了我的 jar，例如：（
`<activity android:name=".MainActivity"></activity>`在 jar 文件中）
**4.**在我的第二个应用程序的 src 中，我包含我的 jar ，并且还使用意图来调用我以前的应用程序

我用类似的意图调用我的罐子

```
 Intent i = new Intent(this, com.example.testapp.MainActivity.class);
      startActivity(i); 
```

但我收到以下错误

```
FATAL EXCEPTION: main
 android.content.ActivityNotFoundException: Unable to find explicit activity class {com.tui.com/com.example.testapp.MainActivity}; have you declared this activity in your AndroidManifest.xml? 
```

但我已经在 Android 清单文件中声明了我的活动，我希望我做的每件事都是正确的，但我不知道为什么我会收到这个错误

任何人都知道如何在android中使用intent访问jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:04:34.800

实际上，您在清单中将活动添加为 .MainActivity

和绝对路径成为 yourpackagename.MainActivity

添加喜欢 com.tui.com.com.example.testapp.MainActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:05:43.090

它应该是

```
<activity android:name="com.example.testapp.MainActivity"></activity> 
```

不是

```
<activity android:name=".MainActivity"></activity> 
```

# ruby-on-rails-3 - 通过控制器 Rails 删除或删除 Schema Postgresql

> ID：13397994
> 
> 赞同：3
> 
> 时间：2012-11-15T12:59:43.140
> 
> 标签：ruby-on-rails-3, activerecord, multi-tenant, rails-postgresql

我有带有 postgresql 的多租户应用程序轨道，我想删除架构（架构名称 = 子域）并删除架构上的表。

控制器上的原始代码，wkwkwk。account_controller.rb

```
def destroy
        @account = Account.find(params[:id])
        conn = ActiveRecord::Base.connection
        conn.execute("DROP SCHEMA "+@account.subdomain)
    end 
```

错误信息

```
ActiveRecord::StatementInvalid in AccountsController#destroy

PG::Error: ERROR:  cannot drop schema subdomain1 because other objects depend on it
DETAIL:  table articles depends on schema subdomain1
table gambarinfos depends on schema subdomain1
table pages depends on schema subdomain1
table redactor_assets depends on schema subdomain1
table schema_migrations depends on schema subdomain1
table usersekolahs depends on schema subdomain1
HINT:  Use DROP ... CASCADE to drop the dependent objects too.
: DROP SCHEMA subdomain1 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:12:02.193

问题解决了

将级联添加到`conn.execute("DROP SCHEMA "+@account.subdomain+" CASCADE")`