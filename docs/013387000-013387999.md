# StackOverflow 问答 13387000-13387999

# css - 自定义 SAP Business Objects 中默认页面的 CSS

> ID：13387004
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:44:18.830
> 
> 标签：css, business-objects

我希望能够更改一些项目的颜色，并`<hr/>`在默认页面的底部添加一个。希望通过细微的颜色变化来区分 DEV / QA / PROD 环境。我想我正在寻找主/默认 index.html/jsp 页面或主 CSS 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:50:23.010

根据 SAP 的说法，这些对象被包装在一个 jar 文件中，客户端无法访问。所以，这就是你的答案。

# asp.net - Azure 上的 ASP.NET WebAPI 自托管：避免 IIS 导致功能丢失？

> ID：13387005
> 
> 赞同：2
> 
> 时间：2012-11-14T20:44:27.093
> 
> 标签：asp.net, asp.net-web-api, self-hosting

ASP.NET WebAPI 既可以托管在 IIS 中（作为 Web 角色），也可以自托管（作为辅助角色）

```
var server = new HttpSelfHostServer(config);
server.OpenAsync().Wait(); 
```

以上让我想起了 Node.JS。无论如何，我试图列出这两种方法之间的所有技术权衡。我不是在寻找关于您更喜欢哪些权衡的*意见- 从技术角度来看这些权衡是什么。*现在，在我们的实际 API 调用（=Azure SQL + API 调用背后的重型数字处理）中，我发现在自托管模式下，每个 API 调用的响应时间快了大约 8%。但是，我担心放弃 IIS 会在以后再次咬我们。

那么，在采用 WebAPI 自托管路线时避免使用 IIS 时会丢失哪些主要权衡或功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:15:57.853

*   您失去了 IIS 的所有功能（日志记录、应用程序池扩展、站点的限制/配置）......您必须自己构建您想要的每一个功能
*   HttpContext？你失去了它，因为 ASP.NET 为你提供了它。所以，我可以看到让身份验证等事情变得更加困难
*   网络部署？你会失去那个
*   IIS 在 IIS 8 中有一些关于处理请求和预热服务的不错的特定功能

这实际上取决于您的应用程序。您将不得不重新编写您需要的每个功能。Node.js 提供了执行 Nginx 服务器所没有的东西（Express）的模块......除了（事件循环异步架构），这就是它更快的原因。

我知道这不是您的问题的一部分，但您提到了 8% 的性能增益......该增益是因为您没有涉及 IIS 管道。当你编写自己的代码来模仿你失去的 IIS 功能时，你最终会失去这种性能

您是否尝试过 Windows 2008 R2/IIS 8？这包括对 IIS 7.x 的“免费”性能提升：http: [//blog.bitdiff.com/2012/06/performance-comparison-iis-75-and-iis-8.html](http://blog.bitdiff.com/2012/06/performance-comparison-iis-75-and-iis-8.html)

# java - BigDecimal.floatValue 与 Float.valueOf

> ID：13387011
> 
> 赞同：2
> 
> 时间：2012-11-13T21:33:43.537
> 
> 标签：java

有没有人遇到过这个：

```
System.out.println("value of: " + Float.valueOf("3.0f")); // ok, prints 3.0
System.out.println(new BigDecimal("3.0f").floatValue()); // NumberFormatException 
```

我认为这里缺乏一致性是一个错误，其中 BigDecimal(String) 不遵循与 Float.valueOf() 相同的规范（我检查了 JDK 文档）。

我正在使用一个库，它迫使我通过 BigDecimal，但可能会发生我必须在那里发送“3.0f”的情况。是否有已知的解决方法（BigDecimal 在库中无法访问）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:41:28.763

第二个示例永远不会起作用，因为[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)没有提到`f`字符串中有关 an 的任何内容：

> 字符串表示由一个可选的符号`'+'`( `'\u002B'`) 或`'-'`( `'\u002D'`) 组成，后跟零个或多个十进制数字的序列（“整数”），可选地后跟一个分数，可选地后跟一个指数......

一种解决方法可能是简单地剥离`f`字符串。那么它应该是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:48:01.073

BigDecimal 有自己的文档。根据[BigDecimal javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)

> 此构造函数与 Float.toString(float) 和 Double.toString(double) 返回的值兼容。

它没有提到任何关于 Float.valueOf() 的内容。

# sql - SQL Server Management Studio - 确定数据类型

> ID：13387014
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:45:09.010
> 
> 标签：sql, sql-server

我刚刚在 SQL Server Management Studio 中创建了一个表，现在我忘记了为某些字段分配了哪些数据类型。我如何访问这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:38:47.590

右键单击表格，选择“设计表格”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-26T14:12:47.133

如果在 Sql Server Management Studio 的查询窗口中选择一个表名并按**ALT + F1**，它将显示该表的详细信息。

在后台快捷键会代表你执行sp_help，所以在这个例子中它执行：sp_help users，这比键入它要快得多。

[![在此处输入图像描述](../Images/e18a1ffb4ca6f2f276ffa74b18065e83.png)](https://i.stack.imgur.com/D6Lmp.png)

[来源这里](http://www.developertipoftheday.com/2010/07/shortcut-key-for-table-details-in-sql.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T21:21:13.167

```
sp_help tablename . Gives you information about your table including fields and datatypes 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T20:47:36.130

```
select * from information_schema.columns where table_name = <yourtable> 
```

# solaris - 如何从 Solaris Unix 中删除 NULL 文件？

> ID：13387016
> 
> 赞同：0
> 
> 时间：2012-11-14T20:45:26.997
> 
> 标签：solaris

我在目录中有一个 NULL 文件：

```
-rw-r--r--   1 blah1   blah2    83532 Nov  5 09:34   <can't see, but null here> 
```

我该如何删除这个？这很烦人，因为它会干扰`svn status`.

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:53:03.253

交互式删除，对所有非空文件说不。

> /bin/rm -i *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:07:05.827

您可以使用 iNode 值删除（使用 ls 命令上的 -i 选项）

```
# ls -li
total 16
  30475938 -rw-r--r--   1 root     root           7 mar 19 10:29 -h
# find . -inum 30475938 -print
./-h
# find . -inum 30475938 -exec rm {} \;
# ls -li
total 0 
```

在我的博客中，您有一些示例 - 西班牙语 - 如何删除带有保留字符的文件。 [http://sparcki.blogspot.com.es/2010/03/como-eliminar-archivos-utilizando-su.html](http://sparcki.blogspot.com.es/2010/03/como-eliminar-archivos-utilizando-su.html)

乌尔科，

# sql - 将大量表记录从 SQL Server Dev 复制到 Prod

> ID：13387017
> 
> 赞同：1
> 
> 时间：2012-11-14T20:45:28.203
> 
> 标签：sql, sql-server, sql-server-2005

我有一个包含大约 500 万条记录的表，我只需要将最后 100 万条移动到生产环境中（因为其他 400 万条在那里）。这样做的最佳方法是什么，这样我就不必每次都重新复制整个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:02:52.457

编辑：（很抱歉修改了这么多。我现在更好地理解了你的问题）

```
Insert into TblProd
     Select * from TblDev where 
     pkey not in (select pkey from tblprod) 
```

这应该只复制尚未在目标表中的记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T22:00:31.780

快一点可能是：

```
Insert into prod.dbo.table (column1, column2....)
Select column1, column2.... from dev.dbo.table d
where not exists (
    select 1 from prod.dbo.table pc where pc.pkey = d.pkey
    ) 
```

但是您需要告诉我们这些表是否在同一台服务器上

此外，此运行的频率如何以及它需要有多强大？根据您的要求，有替代解决方案。

鉴于来自 OP 的这个迟到的宝石：*无需比较，因为我知道 IDs > X*，那么您不必进行昂贵的比较。你可以使用

```
Insert into prod.dbo.table (column1, column2....)
Select column1, column2.... from dev.dbo.table d
where ID > x 
```

这将更有效率，因为您只传输您需要的行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T22:51:09.730

因为它们位于改变一切的单独服务器上。简而言之：为了知道什么*不在*dev 中，您需要将 DEV 中的所有内容与 PROD 中的所有内容进行比较，因此没有简单的方法可以避免比较庞大的数据集。

用于 PROD 和 DEV 系统之间复制的一些不同策略：

A. 备份和恢复整个数据库，然后应用脚本来清理它

B. 在 PROD 数据库中实现记录更改的触发器，然后只复制更改的记录

C. 确定某种分区或您*知道*不会更改的记录集（即 12 个月前），并且只刷新那些不在该数据集中的记录。

D. 使用 SSIS 将所有产品复制到 DEV 服务器上的临时表中。使用与上面非常相似的查询仅在数据库中插入新记录。删除临时表。

E. 您也许可以找到一个可以有效执行此操作的第三方 SSIS 组件。开箱即用，SSIS 在比较更新方面效率低下。

你真的知道最后一百万条记录是什么吗？即是一个位置或日期或什么的？你能写一个选择来识别它们吗？

基于此评论：

*无需比较，因为我知道 ID > X 会起作用*

您可以在 DEV 服务器上运行它，假设您在 DEV 服务器上创建了一个名为 PRODSERVER 的链接服务器

```
INSERT INTO DB.dbo.YOURTABLE (COL1, COL2, COL3...)
SELECT COL1, COL2, COL3...
FROM PRODSERVER.DB.dbo.YOURTABLE
WHERE ID > X 
```

查找“SQL Server 链接服务器”以获取有关如何创建的更多信息。

这对于一次性来说很好，但如果你经常这样做，你可能想要做一些更强大的东西。

例如，您可以创建一个脚本，使用 BCP.EXE 将数据导出到文件，将其复制到 DEV 并再次导入。这更可靠，因为它是一次性完成的，而不是一直需要网络连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:06:14.283

如果表在同一台服务器上，您可以执行以下操作

我使用的是 MySQL，所以语法可能会有点不同，但在我看来，一切都应该是一样的。

```
INSERT INTO newTable (columnsYouWantToCopy)
    SELECT columnsYouWantToCopy
    FROM oldTable WHERE clauseWhichGivesYouOnlyRecodsYouNeed 
```

如果在另一台服务器上，您可以执行以下操作：http: [//dev.mysql.com/doc/refman/5.0/en/select-into.html](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)

# c++ - 向量对象声明后的括号是什么意思？

> ID：13387018
> 
> 赞同：2
> 
> 时间：2012-11-14T20:45:30.333
> 
> 标签：c++, oop

我来自 Python 背景，但我正在阅读 C++ 标准库中可用的对象和数据结构类型，我看到声明说，a `vector`of strings：

```
vector<string> names(10); 
```

将指示一个`vector`对象初始化为包含 10 个类型的对象`string`。我的问题是：

*   声明的部分是否`<string>`具有对 C++ 类系统的抽象，即它是矢量对象的内置语法还是可用于用户定义的类定义的类系统的某些功能的一部分？
*   我是否正确假设名称后面的括号是传递给构造函数的参数？
*   是像标准库定义`string`的内置类型或对象。`int`因此，内置类型和其他对象之间是否存在差异（例如，所有“类型”都是 Python 中的对象）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:58:48.933

对象有两种参数`std::vector`：

1.  有用于`std::vector`值类型和分配器类型的模板参数，后者是默认的。也就是说，`std::vector<std::string>`实际上恰好是`std::vector<std::string, std::allocator<std::string> >`。
2.  有一些运行时参数作为构造函数参数传递，并`std::vector<...>`采用了相当多的组合。在上面引用的用途中，`10`是赋予向量的初始元素的数量。

因此，要回答您的具体问题：

1.  `string`恰好是`std::string`并且根本没有什么特别的。您可以使用任何用户定义的类型来模拟某些概念（例如类型需要是`CopyConstructible`）。
2.  括号中的参数是构造函数参数（在 C++ 上下文中，括号通常是`[`，`]`但术语是模棱两可的）。
3.  `string`，嗯，实际上`std::string`没有定义为内置类型，而是标准 C++ 库中的类型。标准 C++ 库类型的实现方式几乎取决于 C++ 实现，即，实现可以选择使其内置（只要它仍然可以像类类型一样使用）。

在 C++ 中，内置类型和类类型之间存在一些差异，但在 C++ 2011 中，它非常接近能够创建行为类似于内置类型的类类型。主要区别在于可以获取类类型的某些成员的地址，而内置类型无法访问相同的“成员”。另一个区别是内置类型不需要声明（实际上，它们不能声明），而类类型需要声明和/或定义（取决于它们的使用方式）。

# php - cron 工作：CodeIgniter2+Doctrine2 我如何让它工作？

> ID：13387019
> 
> 赞同：0
> 
> 时间：2012-11-14T20:45:30.120
> 
> 标签：php, doctrine-orm, cron, codeigniter-2

我正在尝试使用 cron 来运行执行一系列操作的 PHP 文件。我以前用简单的程序 PHP 做过这个，然后诀窍是像这样做 cron：

> /usr/local/php5/bin/php /home/me/fullpath/turnrun.php

并将它放在我想要执行的 PHP 文件的最顶部。

```
#!/usr/local/bin/php -q 
```

我正在使用 CodeIgniter 2 和 Doctrine 2，所以我现在有控制器和类以及各种花哨的东西，但我不知道如何使它工作。

当我尝试运行“backend_test_turn.php”文件时出现错误

> 解析错误：语法错误，第 59 行 /home/me/fullpath/application/controllers/backend_test_turn.php 中的意外 T_STRING

该文件包括

```
class Backend_test_turn extends CI_Controller {

    // code

    $logmsg = new ORM\Dynasties2\Systemlog;   // <---  this is line 59

    // code

} 
```

请注意，当我正常运行时（在浏览器中），代码可以正常工作并且不会引发错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:55:05.557

您可以直接从命令行运行控制器代码，如下所示：

```
php index.php Backend_test_turn/action/data 
```

或者

```
php index.php Backend_test_turn action data 
```

[您可以在此处](http://codeigniter.com/user_guide/general/cli.html)找到更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:21:04.053

您是否尝试改用 CURL？

我有一个带有 CRON 作业的应用程序 CI 和 Doctrine，在尝试通过 CLI 启动控制器时，我遇到了很多像你这样的错误。

Personnaly 现在我使用 CURL 而不是 CI CLI，它就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T20:55:40.690

你可以试试

```
$logmsg = new ORM\Dynasties2\Systemlog;
$logmsg = new ORM\Dynasties2\Systemlog(); // <- see difference 
```

# java - 使用 twitter API 版本 1.1 检索 user_timeline 的最简单 Java 示例

> ID：13387025
> 
> 赞同：5
> 
> 时间：2012-11-14T20:45:48.607
> 
> 标签：java, twitter, twitter-oauth

我正在寻找一个使用 Twitter 1.1 API 的简单 Java 示例，但找不到。使用此处发布的 PHP 示例：[使用 Twitter API 1.1 版和其他一些 Stackoverflow 帖子检索 user_timeline 的最简单的 PHP 示例](https://stackoverflow.com/questions/12916539/simplest-php-example-retrieving-user-timeline-with-twitter-api-version-1-1)，我能够提出以下工作示例。

```
public void testUserTimelineWithAuthSample() throws Exception {
    //This will read the timeline of your account.
    String method = "GET";
    String url = "https://api.twitter.com/1.1/statuses/user_timeline.json";

    String oAuthConsumerKey = "Your value here.";
    String oAuthConsumerSecret = "Your value here."; //<--- DO NOT SHARE THIS VALUE

    String oAuthAccessToken = "Your value here.";
    String oAuthAccessTokenSecret = "Your value here."; //<--- DO NOT SHARE THIS VALUE

    String oAuthNonce = String.valueOf(System.currentTimeMillis());
    String oAuthSignatureMethod = "HMAC-SHA1";
    String oAuthTimestamp = time();
    String oAuthVersion = "1.0";

    String signatureBaseString1 = method;
    String signatureBaseString2 = url;
    String signatureBaseString3Templ = "oauth_consumer_key=%s&oauth_nonce=%s&oauth_signature_method=%s&oauth_timestamp=%s&oauth_token=%s&oauth_version=%s";
    String signatureBaseString3 = String.format(signatureBaseString3Templ,
                                                    oAuthConsumerKey, 
                                                    oAuthNonce,
                                                    oAuthSignatureMethod,
                                                    oAuthTimestamp,
                                                    oAuthAccessToken,
                                                    oAuthVersion);

    String signatureBaseStringTemplate = "%s&%s&%s";
    String signatureBaseString =  String.format(signatureBaseStringTemplate, 
                                                                URLEncoder.encode(signatureBaseString1, "UTF-8"), 
                                                                URLEncoder.encode(signatureBaseString2, "UTF-8"),
                                                                URLEncoder.encode(signatureBaseString3, "UTF-8"));

    System.out.println("signatureBaseString: "+signatureBaseString);

    String compositeKey = URLEncoder.encode(oAuthConsumerSecret, "UTF-8") + "&" + URLEncoder.encode(oAuthAccessTokenSecret, "UTF-8");

    String oAuthSignature =  computeSignature(signatureBaseString, compositeKey);
    System.out.println("oAuthSignature       : "+oAuthSignature);

    String oAuthSignatureEncoded = URLEncoder.encode(oAuthSignature, "UTF-8");
    System.out.println("oAuthSignatureEncoded: "+oAuthSignatureEncoded);

    String authorizationHeaderValueTempl = "OAuth oauth_consumer_key=\"%s\", oauth_nonce=\"%s\", oauth_signature=\"%s\", oauth_signature_method=\"%s\", oauth_timestamp=\"%s\", oauth_token=\"%s\", oauth_version=\"%s\"";

    String authorizationHeaderValue = String.format(authorizationHeaderValueTempl,
                                                        oAuthConsumerKey,
                                                        oAuthNonce,
                                                        oAuthSignatureEncoded,
                                                        oAuthSignatureMethod,
                                                        oAuthTimestamp,
                                                        oAuthAccessToken,
                                                        oAuthVersion);
    System.out.println("authorizationHeaderValue: "+authorizationHeaderValue);

    System.out.println("url: "+url);
    System.out.println("authorizationHeaderValue:"+authorizationHeaderValue);

    GetMethod getMethod = new GetMethod(url);
    getMethod.addRequestHeader("Authorization", authorizationHeaderValue);
    HttpClient cli = new HttpClient();
    int status = cli.executeMethod(getMethod);
    System.out.println("Status:"+status);

    long responseContentLength = getMethod.getResponseContentLength();
    System.out.println("responseContentLength:"+responseContentLength);

    String response = getMethod.getResponseBodyAsString();  
    System.out.println("response: "+response);
}

private static String computeSignature(String baseString, String keyString) throws GeneralSecurityException, UnsupportedEncodingException, Exception 
{
    SecretKey secretKey = null;

    byte[] keyBytes = keyString.getBytes();
    secretKey = new SecretKeySpec(keyBytes, "HmacSHA1");

    Mac mac = Mac.getInstance("HmacSHA1");

    mac.init(secretKey);

    byte[] text = baseString.getBytes();

    return new String(Base64.encodeBase64(mac.doFinal(text))).trim();
}

private String time() {
    long millis = System.currentTimeMillis();
    long secs = millis / 1000;
    return String.valueOf( secs );
} 
```

但是，如果我向 url 添加参数，例如：

```
String url = "https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=twitterapi&count=2"; 
```

我得到：

响应：{“错误”：[{“消息”：“无法验证您”，“代码”：32}]}

知道这是哪里出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-13T15:32:40.240

这对于使用新的 Twitter API 1.1 的 Timeline 非常有效

[1) 在http://twitter4j.org/en/](http://twitter4j.org/en/)中下载 twitter4j-core-3.0.3.jar 2) 尝试使用以下代码：

```
private static final String TWITTER_CONSUMER_KEY = "xxxxxxxxxxxxxxxxxx";
private static final String TWITTER_SECRET_KEY = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
private static final String TWITTER_ACCESS_TOKEN = "xxxxxxxxxxxxxxxxxxxxxxx";
private static final String TWITTER_ACCESS_TOKEN_SECRET = "xxxxxxxxxxxxxxxxxxxxxxxxx";

ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setDebugEnabled(true)
    .setOAuthConsumerKey(TWITTER_CONSUMER_KEY)
    .setOAuthConsumerSecret(TWITTER_SECRET_KEY)
    .setOAuthAccessToken(TWITTER_ACCESS_TOKEN)
    .setOAuthAccessTokenSecret(TWITTER_ACCESS_TOKEN_SECRET);
TwitterFactory tf = new TwitterFactory(cb.build());
Twitter twitter = tf.getInstance();
try {
    Query query = new Query("MrEdPanama");
    QueryResult result;
    do {
        result = twitter.search(query);
        List<Status> tweets = result.getTweets();
        for (Status tweet : tweets) {
            System.out.println("@" + tweet.getUser().getScreenName() + " - " + tweet.getText());
        }
    } while ((query = result.nextQuery()) != null);
    System.exit(0);
} catch (TwitterException te) {
    te.printStackTrace();
    System.out.println("Failed to search tweets: " + te.getMessage());
    System.exit(-1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T03:13:11.257

Here's a Twitter 1.1 API example that works with parameters. The issue was not related to the nonce. It was the signatureBaseString. Think of the signatureBaseString as a 3 part string delimited by the ampersand (METHOD&URL&PARAMS). The api parameters are NOT to be included in the 2nd part of the signatureBaseString, they are to be included (with the other 6 security parameters) in the last part of signatureBaseString (Also, those params must be in alphabetic order).

```
 public void testUserTimelineWithParams() throws Exception {
    //This will read the timeline of the 'twitterapi' account.

    String method = "GET";
    String url = "https://api.twitter.com/1.1/statuses/user_timeline.json";
    List<NameValuePair> urlParams = new ArrayList<NameValuePair>();
    urlParams.add( new NameValuePair("screen_name","twitterapi") );
    urlParams.add( new NameValuePair("count", "10") );

    String oAuthConsumerKey = "Your value";
    String oAuthConsumerSecret = "Your value"; //<--- DO NOT SHARE THIS VALUE

    String oAuthAccessToken = "Your value";
    String oAuthAccessTokenSecret = "Your value"; //<--DO NOT SHARE THIS VALUE

    String oAuthNonce = String.valueOf(System.currentTimeMillis());
    String oAuthSignatureMethod = "HMAC-SHA1";
    String oAuthTimestamp = time();
    String oAuthVersion = "1.0";

    String signatureBaseString1 = method;
    String signatureBaseString2 = url;

    List<NameValuePair> allParams = new ArrayList<NameValuePair>();
    allParams.add(new NameValuePair("oauth_consumer_key", oAuthConsumerKey));
    allParams.add(new NameValuePair("oauth_nonce", oAuthNonce));
    allParams.add(new NameValuePair("oauth_signature_method", oAuthSignatureMethod));
    allParams.add(new NameValuePair("oauth_timestamp", oAuthTimestamp));
    allParams.add(new NameValuePair("oauth_token", oAuthAccessToken));
    allParams.add(new NameValuePair("oauth_version", oAuthVersion));
    allParams.addAll(urlParams);

    Collections.sort(allParams, new NvpComparator());

    StringBuffer signatureBaseString3 = new StringBuffer();
    for(int i=0;i<allParams.size();i++)
    {
        NameValuePair nvp = allParams.get(i);
        if (i>0) {
            signatureBaseString3.append("&");
        }
        signatureBaseString3.append(nvp.getName() + "=" + nvp.getValue());
    }

    String signatureBaseStringTemplate = "%s&%s&%s";
    String signatureBaseString =  String.format(signatureBaseStringTemplate, 
                                                                URLEncoder.encode(signatureBaseString1, "UTF-8"), 
                                                                URLEncoder.encode(signatureBaseString2, "UTF-8"),
                                                                URLEncoder.encode(signatureBaseString3.toString(), "UTF-8"));

    System.out.println("signatureBaseString: "+signatureBaseString);

    String compositeKey = URLEncoder.encode(oAuthConsumerSecret, "UTF-8") + "&" + URLEncoder.encode(oAuthAccessTokenSecret, "UTF-8");

    String oAuthSignature =  computeSignature(signatureBaseString, compositeKey);
    System.out.println("oAuthSignature       : "+oAuthSignature);

    String oAuthSignatureEncoded = URLEncoder.encode(oAuthSignature, "UTF-8");
    System.out.println("oAuthSignatureEncoded: "+oAuthSignatureEncoded);

    String authorizationHeaderValueTempl = "OAuth oauth_consumer_key=\"%s\", oauth_nonce=\"%s\", oauth_signature=\"%s\", oauth_signature_method=\"%s\", oauth_timestamp=\"%s\", oauth_token=\"%s\", oauth_version=\"%s\"";

    String authorizationHeaderValue = String.format(authorizationHeaderValueTempl,
                                                        oAuthConsumerKey,
                                                        oAuthNonce,
                                                        oAuthSignatureEncoded,
                                                        oAuthSignatureMethod,
                                                        oAuthTimestamp,
                                                        oAuthAccessToken,
                                                        oAuthVersion);
    System.out.println("authorizationHeaderValue: "+authorizationHeaderValue);

    StringBuffer urlWithParams = new StringBuffer(url);
    for(int i=0;i<urlParams.size();i++) {
        if(i==0) 
        {
            urlWithParams.append("?");
        }
        else
        {
            urlWithParams.append("&");
        }
        NameValuePair urlParam = urlParams.get(i);
        urlWithParams.append(urlParam.getName() + "=" + urlParam.getValue());
    }

    System.out.println("urlWithParams: "+urlWithParams.toString());
    System.out.println("authorizationHeaderValue:"+authorizationHeaderValue);

    GetMethod getMethod = new GetMethod(urlWithParams.toString());
    getMethod.addRequestHeader("Authorization", authorizationHeaderValue);

    HttpClient cli = new HttpClient();
    int status = cli.executeMethod(getMethod);
    System.out.println("Status:"+status);

    long responseContentLength = getMethod.getResponseContentLength();
    System.out.println("responseContentLength:"+responseContentLength);

    String response = getMethod.getResponseBodyAsString();  
    System.out.println("response: "+response);
}   

private static String computeSignature(String baseString, String keyString) throws GeneralSecurityException, UnsupportedEncodingException, Exception 
{
    SecretKey secretKey = null;

    byte[] keyBytes = keyString.getBytes();
    secretKey = new SecretKeySpec(keyBytes, "HmacSHA1");

    Mac mac = Mac.getInstance("HmacSHA1");

    mac.init(secretKey);

    byte[] text = baseString.getBytes();

    return new String(Base64.encodeBase64(mac.doFinal(text))).trim();
}

private String time() {
    long millis = System.currentTimeMillis();
    long secs = millis / 1000;
    return String.valueOf( secs );
} 
```

Where the NvpComparator is:

```
public class NvpComparator implements Comparator<NameValuePair> {

public int compare(NameValuePair arg0, NameValuePair arg1) {
    String name0 = arg0.getName();
    String name1 = arg1.getName();
    return name0.compareTo(name1);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:37:15.420

你错了`oauth_nonce`。它是一个随机的 32 字节字符串，以 base 64 编码。

你可以像这样构建它们：

```
public String generateNonce() {
    Random gen = new Random(System.currentTimeMillis());
    StringBuilder nonceBuilder = new StringBuilder("");
    String base = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    int baseLength = base.length();

    // Taking random word characters
    for (int i = 0; i < 32; ++i) {
        int position = gen.nextInt(baseLength);
        nonceBuilder.append(base.charAt(position));
    }

    String nonce = toBase64(nonceBuilder.toString());

    return nonce;
}

// In your code :
String oAuthNonce = generateNonce(); 
```

这是一种使用`String toBase64(String);`Base 64 对字符串进行编码的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T04:27:21.480

这是我使用 twitter4j lib 的解决方案

```
 Twitter twitter = new TwitterFactory().getInstance();

            AccessToken accessToken = new AccessToken(accessTokenStr, accessTokenSecretStr);
            twitter.setOAuthConsumer(consumerKeyStr, consumerSecretStr);
            twitter.setOAuthAccessToken(accessToken);

            try {
                Query query = new Query("#<HASHTAG TO SEARCH>");
                QueryResult result;
                result = twitter.search(query);
                List<Status> tweets = result.getTweets();
                for (Status tweet : tweets) {
                    System.out.println("@" + tweet.getUser().getScreenName() + " - " + tweet.getText());
                }
            }
            catch (TwitterException te) {
                te.printStackTrace();
                System.out.println("Failed to search tweets: " + te.getMessage());
                System.exit(-1);
            } 
```

# android - Google Play 多个 apk 分发

> ID：13387026
> 
> 赞同：0
> 
> 时间：2012-11-14T20:46:05.293
> 
> 标签：android, google-play

是否可以为每个上传的 apk 制作支持的设备列表？使用 8 或 9 API 无法为精确的宽度和高度设置过滤器，只能设置屏幕尺寸*定义*，如正常、大等和密度。但是如果我有 480x800、480x854 和 540x960 的 apk 怎么办？它们都大量覆盖在这些类别中。如何指定应加载的 apk？

# asp.net-mvc - 从控制器返回对象和图像

> ID：13387027
> 
> 赞同：0
> 
> 时间：2012-11-14T20:46:05.593
> 
> 标签：asp.net-mvc

我有一个控制器，它可以在飞行中制作图像并将其**返回到**ViewBag 中带有文本的视图，

```
public partial class TextController : Controller
{

    public virtual ActionResult Index(bool noisy = true)
    {

    //image stream
    FileContentResult img;

    using (var mem = new MemoryStream())
    using (var bmp = new Bitmap(130, 30))
    using (var gfx = Graphics.FromImage((Image)bmp))
    {
        gfx.TextRenderingHint = TextRenderingHint.ClearTypeGridFit;
        gfx.SmoothingMode = SmoothingMode.AntiAlias;
        gfx.FillRectangle(Brushes.White, new Rectangle(0, 0, bmp.Width, bmp.Height));

        //add question
        gfx.DrawString(text, new Font("Tahoma", 15), Brushes.Gray, 2, 3);

        //render as Jpeg
        bmp.Save(mem, System.Drawing.Imaging.ImageFormat.Jpeg);
        img = File(mem.GetBuffer(), "image/Jpeg");
    }
    ViewBag.text = text;
    return img;
} 
```

我想从控制器返回一个图像和 ViewBag。什么是解决方案？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:54:58.960

如果您的操作返回图像，您的 ViewBag 将完全没用。当一个 Action 返回一个 Image （通过[FileResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.fileresult%28v=vs.108%29.aspx)，而不是你做的方式），它被发送到浏览器，你以后不能使用 ViewBag 对它做任何事情。

如果要显示图像和文本，最好的方法是返回一个标准的 CSHTML 视图，您可以在其中显示图像和文本。您可以在操作中保存图像（这很奇怪但可以接受）并将 URL 传递给可以将其放入`img`html 标记的视图。更好的方法是创建一个单独的 Action 来生成图像本身并返回 FileResult

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:49:24.027

您可以创建一个返回局部视图的操作。您可以将动态生成的图像保存在某个物理位置并将其引用到图像 src。如果您不想保存图像，可以将图像转换为 base-64 编码字符串并将其设置为 src 属性。

# javascript - 为什么ajax调用的json数据最终成为查询字符串参数？

> ID：13387030
> 
> 赞同：1
> 
> 时间：2012-11-14T20:46:14.017
> 
> 标签：javascript, jquery, ajax

我有以下 ajax 调用。我想以 jason 格式发送数据。但是我在 Fiddler 中注意到数据被转换为查询字符串参数。我做错了什么？

```
 $.ajax({
        type: "GET",
        url: "StatusService.svc/CheckStatus",
        data: JSON.stringify({"companyName":"paymins"}),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            alert('ok!');
            alter(data.toString());
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert(textStatus + ' / ' + errorThrown);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:47:28.607

将您的请求类型更改为帖子。

```
 $.ajax({
        type: "POST",
        url: "StatusService.svc/CheckStatus",
        data: JSON.stringify({"companyName":"paymins"}),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            alert('ok!');
            alter(data.toString());
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert(textStatus + ' / ' + errorThrown);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:48:06.200

Get 不能包含正文。为此使用帖子。

# python - 如何将 FuncAnimation（从 matplotlib.animation 动态绘图）配置为 numpy 数组？

> ID：13387031
> 
> 赞同：3
> 
> 时间：2012-11-14T20:46:14.120
> 
> 标签：python, dynamic, matplotlib, pde

*我对MatPlotLib*的*FuncAnimation*函数有一些问题。我无法将它配置到我的代码中......我希望有人能帮助我！

这是一个扩散方程，我需要为时间的每一步绘制它。在每一步，计算的结果都是一个 numpy 数组。我设法使用*pyplot.interactive(True)*以动态方式绘制它，但它非常滞后。我读到*FuncAnimation*可以解决这个问题，但我没有设法让它处理列表或数组中的结果。

这是带有经典慢图的代码：
它产生一个向量向量（*U*），在所有计算之后绘制

```
import numpy as np
import scipy
from scipy.linalg import solve_banded
from matplotlib import pyplot as plt
import matplotlib.animation as animation

def DrawRecord(U):
    plt.interactive(True)
    plt.figure(1)
    for i in range(0,len(U)):
        plt.clf()
        plt.plot(U[i])
        plt.ylim([0,1])
        plt.draw()

J=350.0 
dt=0.01 
T=3.0 
t=np.arange(dt,T,dt) 
dx=1.0/J 

D=0.005 
c=0.5 
r=0.1 

mu=c*dt/(2.0*dx) 
lambd=D*dt/(dx**2.0) 

K_x=50.0*np.ones(J-1) 
alpha_t=0.5*np.ones(len(t)) 

#initial conditions
u=np.zeros(J) 
u[J/5*1:J/5*2]=1 
U=u

espace=np.linspace(0,1,J) 

#Matrix
A=np.diag(-lambd*np.ones(J-2),1)+np.diag((1+2*lambd)*np.ones(J-1),0)+np.diag(-lambd*np.ones(J-2),-1)  
AA=scipy.linalg.inv(A)

for i in t:

    u[1:J]=scipy.dot(AA,u[1:J]+(r-alpha_t[i/dt])*dt*(u[1:J]-u[1:J]/K_x))
    u[0]=0 
    u[J-1]=0  

    U=np.vstack([U,u])

DrawRecord(U) 
```

这里是我尝试使用前面的代码（大失败）转动*FuncAnimation ：*
*nb：* U 内容为每个步骤计算的结果数组

```
global U

fig = plt.figure()
window = fig.add_subplot(111)
line, = window.plot(list(U[1,:]))

def init():
    line=list(U[1,:])
    return line

def animate(i):
    line.set_ydata(list(U[i,:]))
    return line

anim = animation.FuncAnimation(fig, animate, init_func=init,
                           frames=200, interval=20, blit=True)

plt.show() 
```

这会产生很多错误......也许有人可以为以前的代码设置它！
我希望我很清楚（对不起我的英语）并感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:37:08.560

FuncAnimation 期望一个迭代从 init 返回并更新

尝试这个：

```
def init():
    line.set_ydata(U[1,:])
    return line, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:17:02.750

你的 init 函数不对，应该是：

```
def init():
    line.set_ydata(U[1,:])
    return line 
```

您也不需要将 numpy 切片转换为列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-29T11:06:01.257

我遇到了类似的错误，我通过添加逗号来修复它。

```
def init():
    line.set_ydata(U[1,:])
    return line, 
```

由于某种原因，这修复了它。如果要返回的对象不止一个，则不需要尾随逗号。如果你问我，该死的神秘错误信息。

# php - Datamapper ORM 将数据保存在连接表中

> ID：13387033
> 
> 赞同：-1
> 
> 时间：2012-11-14T20:46:34.153
> 
> 标签：php, mysql, codeigniter, codeigniter-datamapper

我目前正在使用 Code Igniter 和 Datamapper ORM 开发一个应用程序，并且我正在尝试将数据保存在数据库中。我有两张表，它们之间有多对多的关系。例如：ShoeDesigns 和 ShoePieces。我还想在 ShoeDesigns 和 ShoePieces 之间的连接表中保存一些数据，即 ShoeDesigns_ShoePieces。我试图四处寻找例子，但没有运气。

我只是想知道是否有可能实际做到这一点，如果我可以在一个保存调用中做到这一点，还是我必须在多个保存调用中做到这一点？

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:33:38.267

如果您添加的数据不是与和`ShoeDesigns_ShoePieces`之间的关系有关的数据，那么您将违反 ORM 概念。将不再*只是*为关系建模，而是实体和关系之间的混合体。`ShoeDesigns``ShoePieces``ShoeDesigns_ShoePieces`

 *如果您有一些附加到和之间关系的属性，则需要执行此`ShoeDesigns`操作`ShoePieces`；这意味着“关系”*实际上是一个实体*。

让我们称之为`ShoeAssemblyPlan`。然后你有：

*   `ShoeDesigns`和之间的多对多关系`ShoeAssemblyPlan`
*   `ShoeAssemblyPlan`和之间的多对多关系`ShoePieces`

（关系也可以是多对一的）。

您在设计和零件之间的旧关系现在通过组装计划实现，您可以将所需的属性附加到该计划。

例如，您可以有一个“胶水堆叠设计到四件套”装配计划和一个“缝合正式设计到四件套”装配计划；并且您可能有与每个计划相关联的不同成本和提前期。*

# .htaccess - 控制器未在 CodeIgniter 中打开

> ID：13387037
> 
> 赞同：1
> 
> 时间：2012-11-14T20:46:41.953
> 
> 标签：.htaccess, codeigniter, controller

我在 CodeIgniter 应用程序中有三个控制器-`i`和.`login``test`

`/APP/index.php/`所有控制器都与路径完美配合- 我可以打开`/APP/index.php/i`,`/APP/index.php/login`和`/APP/index.php/test`.

控制器`i`和`login`工作`index.php`也没有 -`/APP/i`和`/APP/login`（我有一个修改过的`.htaccess`文件）。

没有控制器`test`就无法工作`index.php`- 打开时出现 404 错误`/APP/test`。

`i`是默认控制器，但`login`不是默认控制器，它可以工作（我认为这可能是问题）。

当我添加第四个控制器时，没有`index.php`.

它变得更加奇怪 - 有时我可以打开`/APP/test/some_function`（有时我不能），然后我什至可以打开`/APP/test`. 但是我不能以这种方式再次打开它。`index.php`方式一直有效。`Test`控制器有一个非常简单的代码......

所以我的问题是这里可能会出现什么问题，我怎样才能让我的控制器在没有 的情况下可以访问`index.php`？

非常感谢您的帮助。

以下是我的`.htaccess`文件，我认为问题可能存在：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /APP/

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:54:52.737

感谢[@w0rldart 的](/users/971392/w0rldart)建议，我现在明白了问题出在哪里。

实际上，当您访问没有`index.php`文件的控制器时，主应用程序文件夹会区分大小写（`APP`在我的问题中）。

As I have a much longer application folder name and it has both lower and upper case letters, I just had it typed with one letter in the wrong case. For the default controller it does not matter and other controllers were accessed via the links where the case was correct.

And as `test` was accessed directly, this wrong case was giving me 404 error.

Via `index.php` path the case of the main application folder doesn't matter.

# c++ - 使用不同的 C++ 环境创建 DLL

> ID：13387038
> 
> 赞同：1
> 
> 时间：2012-11-14T20:46:47.830
> 
> 标签：c++, dll, c++11, linker, c++03

我有一个正在构建的库，它的目标是链接到主解决方案的 DLL。

这个新的 DLL 相当复杂，我想利用 C++11 的特性，而链接它的程序肯定不会。事实上，主程序目前是使用 VS2008 和 VS2010“干净”构建的（我认为 GCC 4.3 for linux？）。

我的建议：

使用 VS2012 作为 IDE，使用 Intel C++ Compiler 2013 编译为 .dll/.so - 对于 linux - 据我了解，这基本上是机器形式（如 .exe）。

虽然我熟悉使用 C++ 解决问题，但我对编译/链接等基础知识并不流利。因此，我想问问社区是否

1.  这个有可能
2.  如果可能的话，它有多容易（就像我描述的那样简单？）/在此过程中我会遇到哪些陷阱或问题（是否值得）？

我预计的关注领域：

*   运行时库——我希望这会成为阻碍这项工作的因素。我对它们/它们如何工作一无所知，除了它们可能是一个问题。
*   标准库实现差异 - 是否归结为 DLL 形式是否重要？
*   线程冲突 - dll 线程和主程序线程从不修改相同的数据，实际上主程序的线程之一将调用 DLL 函数。

奖励：虽然以上是我希望采用的路线，但我理想情况下希望将此代码打开以进行智能感知、一般查看等（本质上是让它成为主要解决方案中的一个项目）。有没有办法指定不同的运行时库/编译器？这可以做到吗？

**编辑**：这个奖励部分的主要原因是消除如果主程序和这个库是分开构建的，就会出现必要的“版本控制”冲突。

注意：我不是为了更新而使用 C++11 - 强类型枚举和跨平台线程代码将为库带来巨大的好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:12:43.893

问题不在于“应用程序可以使用由不同编译器构建的库吗？” （答案是肯定的。）但是“在使用另一个编译器和 C++ 标准库构建的库的公共接口中可以使用哪些 C++ 功能？”

在 Windows 上，答案是“几乎没有”。接口（只包含虚函数的类）就是关于它的。没有具有数据成员的类。没有例外。没有运行时对象（如 iostream 实例或字符串）。没有模板。

在 Linux 上，答案是“更多但仍然不多”。只要满足ODR，课程就可以了。例外会起作用。模板也是如此，只要两边的定义完全一样。但是标准库类型的定义在 C++03 和 C++11 之间确实发生了变化，因此您将无法在应用程序和库之间传递`std::string`对象`std::vector<int>`（双方都可以使用这些功能，但同一个对象可以不要跨越）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:02:41.330

恐怕这在 C++ 中是不可能的。特别是名称修饰可能会有所不同。所有链接在一起的 C++ 文件都需要使用相同的编译器进行编译。

在 C++ 中，`extern "C"`东西是标准的（命名、调用约定），因此可以从 C++ 调用 C 库，以及使用`extern "C"`块声明的 C++ 函数。这不包括类、模板、重载，混合由不同编译器编译的它们是不可行的。

这是一个遗憾。

# machine-learning - 是否有任何关于解析/解决数学单词问题的 ML/NLP 作品/论文？

> ID：13387042
> 
> 赞同：4
> 
> 时间：2012-11-14T20:47:15.137
> 
> 标签：machine-learning, nlp

正如标题所说，任何指针都非常感谢。

我正在探索，在解决（首先是解析）数学单词问题的背景下，我们在 ML/NLP 工作方面的立场是什么。

我们在 Mathematica 之类的软件中有足够好的软件，可以解决公式化的数学方程。

但是在解决用自然语言表达的数学问题时，我找不到任何实质性的东西。当我考虑如何解决这个问题时，我将其视为一种机器翻译问题（从英语翻译成数学方程），但几乎没有任何“标记”数据。其他方法可以是半（或非）监督关系提取。

由于这些只是随机的想法，我想从这个方向的一些现有工作/论文开始。我原本不错的谷歌搜索技能并没有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:00:13.580

我不知道任何将语言解析为数学表达式的工作：我能想到的最接近的是语义解析，其目标是将文本翻译成逻辑形式。在这方面有[监督尝试](http://www.cs.utexas.edu/~ml/publications/area/77/learning_for_semantic_parsing)，但我怀疑你说没有可用的标记数据是对的。你也可以考虑一个[无监督的变体](http://homes.cs.washington.edu/~pedrod/papers/emnlp09.pdf)。

我认为您认为它类似于机器翻译的直觉是部分正确的，实际上对齐技术将构成解决方案的一半。另一半将替换您的目标语言模型，这对数学来说是一个有趣的问题，因为您将要确定生成的数学表达式是否“格式正确”或有意义。

我希望这有一些用处，很抱歉，我无法针对您的具体问题指出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:19:02.540

Wolfram|Alpha 在某种程度上与此相关，但我不知道是什么论文推动了他们取得的进展。你可以在[这里查看](http://blog.wolframalpha.com/2012/10/04/solving-word-problems-with-wolframalpha/)

# mysql - 通过/ distinct查询firebird慢序

> ID：13387043
> 
> 赞同：7
> 
> 时间：2012-11-14T20:47:16.203
> 
> 标签：mysql, sql, performance, firebird, database-performance

我对 Firebird 中的查询速度有疑问。缓慢在于排序和不同。

如果我在 MySQL 中尝试查询，那么他会快一秒。

Firebird -> 1,3s a 1,6s MySQL -> 0,3s a 0,4s

我们在 Web 服务器/网站上使用 Firebird 数据库，因此速度很重要。

规格： - Firebird 2.5.1 或 2.5.2（SuperClassic）64 位 - 2,13 Ghz（2 个处理器） - RAM 4,00 GB

我能做些什么？

我有以下表格：

==================================================== ==

```
CREATE TABLE ARTICLE3_1
(
  IDARTICLE Integer NOT NULL,
  ITEMSTATUS Integer,
  ITEMENTRYDATE Integer,
  ITEMFILTER Integer,
  ARTIKELNUMMER Varchar(250),
  ARTIKELNAAM1 Varchar(250),
  ARTIKELNAAM2 Varchar(250),
  OMSCHRIJVING_DETAIL Blob sub_type 1,
  OMSCHRIJVING1 Varchar(250),
  OMSCHRIJVING2 Varchar(250),
  ARTIKELNR_LEVERANCIER Varchar(250),
  MERK Varchar(250),
  LEVERANCIER Varchar(250),
  EAN Varchar(250),
  LINKAANGROEP Varchar(250),
  LINKAANAANBIEDINGGROEP Varchar(250),
  LINKAANPOPULAIRGROEP Varchar(250),
  LINKAANART Varchar(250),
  ARTGRPNR Varchar(250),
  SUBGROEP Varchar(250),
  PRIJSPER Integer,
  VERKOOPPRIJS Float,
  ADVIESPRIJS Float,
  BTWPERC Float,
  ONLINE Varchar(250),
  TUSGROEPBIJLINK Varchar(250),
  AFBEELDINGKLEIN Varchar(250),
  AFBEELDINGMIDDEL Varchar(250),
  AFBEELDINGGROOT Varchar(250),
  ICECATLINK Varchar(250),
  LINKAANHOMEPAGEGROEP Varchar(250),
  LINKAANMIJNACCOUNTGROEP Varchar(250),
  SORTEER Varchar(250),
  AFBEELDING Varchar(100),
  FLASH Blob sub_type 1,
  EENHEID Varchar(250),
  ALTARTNR1 Varchar(250),
  ALTARTNR2 Varchar(250),
  BESTELLENPER Float,
  INFEED Varchar(250),
  GOOGLE_TAXONOMIE Varchar(250),
  FEED_TITEL Varchar(250),
  FEED_OMSCHRIJVING Blob sub_type 1,
  PRIMARY KEY (IDARTICLE)
);
CREATE INDEX IDX_ARTICLE3_1_2 ON ARTICLE3_1 (MERK);
CREATE INDEX IDX_ARTICLE3_1_3 ON ARTICLE3_1 (ARTIKELNUMMER);
CREATE INDEX IDX_ARTICLE3_1_4 ON ARTICLE3_1 (ARTIKELNR_LEVERANCIER);
CREATE INDEX IDX_ARTICLE3_1_5 ON ARTICLE3_1 (ALTARTNR2);
CREATE INDEX IDX_ARTICLE3_1_6 ON ARTICLE3_1 (ARTIKELNAAM1);
CREATE INDEX IDX_ARTICLE3_1_7 ON ARTICLE3_1 (EAN);

   CREATE TABLE TREE3
(
  IDLINK Integer NOT NULL,
  LINKTYPE Integer,
  IDITEM Integer,
  ITEMTYPE Integer,
  IDTARGETLINK Integer,
  NODEPOSITION Integer,
  NODELEVEL Integer,
  IDLAYOUTDATA Integer,
  IDTEMPLATE Integer,
  ACTIONDATE Integer,
  MARKET1 Integer,
  PRIMARY KEY (IDLINK)
);
CREATE INDEX IDX_TREE3_2 ON TREE3 (IDITEM);
CREATE INDEX IDX_TREE3_3 ON TREE3 (MARKET1);
CREATE INDEX ITREE13 ON TREE3 (IDTARGETLINK,NODEPOSITION);
CREATE INDEX ITREE53 ON TREE3 (IDITEM,ITEMTYPE);

==================================================== 
```

FireBird 中的查询：

```
SELECT FIRST 30 SKIP 0 distinct tr.IdLink, tr.IdTargetLink, tr.IdItem, tr.NodePosition
FROM Tree3 tr
inner join article3_1 art on art.idarticle = Tr.iditem
WHERE tr.ItemType = 2 AND tr.Market1 = 1
AND  ((art.IDARTICLE > 0) AND (  (LOWER(art.Artikelnummer) like '%a4 papier%' ) OR ( (LOWER(art.Artikelnummer) like 'a4' )
AND (LOWER(art.Artikelnummer) like 'papier'))  OR  (LOWER(art.Artikelnaam1) like '%a4 papier%' ) OR ( (LOWER(art.Artikelnaam1) like '%a4%' )
AND (LOWER(art.Artikelnaam1) like '%papier%'))  OR  (LOWER(art.Artikelnaam2) like '%a4 papier%' ) OR ( (LOWER(art.Artikelnaam2) like '%a4%' )
AND (LOWER(art.Artikelnaam2) like '%papier%'))  OR  (LOWER(art.Artikelnr_leverancier) like '%a4 papier%' ) OR ( (LOWER(art.Artikelnr_leverancier) like '%a4%' )
AND (LOWER(art.Artikelnr_leverancier) like '%papier%'))  OR  (LOWER(art.Merk) like '%a4 papier%' ) OR ( (LOWER(art.Merk) like '%a4%' )
AND (LOWER(art.Merk) like '%papier%'))  OR  (LOWER(art.EAN) like '%a4 papier%' ) OR ( (LOWER(art.EAN) like '%a4%' )
AND (LOWER(art.EAN) like '%papier%'))  OR  (LOWER(art.AltArtnr1) like '%a4 papier%' ) OR ( (LOWER(art.AltArtnr1) like '%a4%' )
AND (LOWER(art.AltArtnr1) like '%papier%'))  OR  (LOWER(art.AltArtnr2) like '%a4 papier%' ) OR ( (LOWER(art.AltArtnr2) like '%a4%' )
AND (LOWER(art.AltArtnr2) like '%papier%')) ))
AND tr.NODELEVEL =5  and tr.LINKTYPE <> 5
ORDER BY tr.NodePosition 
```

MySQL中的查询：

```
SELECT  distinct tr.IdLink, tr.IdTargetLink, tr.IdItem, tr.NodePosition
FROM Tree3 tr
inner join article3_1 art on art.idarticle = Tr.iditem
WHERE tr.ItemType = 2 AND tr.Market1 = 1
AND  ((art.IDARTICLE > 0) AND (  (LCASE(art.Artikelnummer) like '%a4 papier%' ) OR ( (LCASE(art.Artikelnummer) like 'a4' )
AND (LCASE(art.Artikelnummer) like 'papier'))  OR  (LCASE(art.Artikelnaam1) like '%a4 papier%' ) OR ( (LCASE(art.Artikelnaam1) like '%a4%' )
AND (LCASE(art.Artikelnaam1) like '%papier%'))  OR  (LCASE(art.Artikelnaam2) like '%a4 papier%' ) OR ( (LCASE(art.Artikelnaam2) like '%a4%' )
AND (LCASE(art.Artikelnaam2) like '%papier%'))  OR  (LCASE(art.Artikelnr_leverancier) like '%a4 papier%' ) OR ( (LCASE(art.Artikelnr_leverancier) like '%a4%' )
AND (LCASE(art.Artikelnr_leverancier) like '%papier%'))  OR  (LCASE(art.Merk) like '%a4 papier%' ) OR ( (LCASE(art.Merk) like '%a4%' )
AND (LCASE(art.Merk) like '%papier%'))  OR  (LCASE(art.EAN) like '%a4 papier%' ) OR ( (LCASE(art.EAN) like '%a4%' )
AND (LCASE(art.EAN) like '%papier%'))  OR  (LCASE(art.AltArtnr1) like '%a4 papier%' ) OR ( (LCASE(art.AltArtnr1) like '%a4%' )
AND (LCASE(art.AltArtnr1) like '%papier%'))  OR  (LCASE(art.AltArtnr2) like '%a4 papier%' ) OR ( (LCASE(art.AltArtnr2) like '%a4%' )
AND (LCASE(art.AltArtnr2) like '%papier%')) ))
AND tr.NODELEVEL =5  and tr.LINKTYPE <> 5
ORDER BY tr.NodePosition LIMIT 30; 
```

==================================================== ==

我用 FlameRobin 执行了查询：

```
> Prepare time: 0.016s Field #01: TREE3.IDLINK Alias:IDLINK Type:INTEGER
> Field #02: TREE3.IDTARGETLINK Alias:IDTARGETLINK Type:INTEGER Field
> #03: TREE3.IDITEM Alias:IDITEM Type:INTEGER Field #04: TREE3.NODEPOSITION Alias:NODEPOSITION Type:INTEGER PLAN SORT (SORT
> (JOIN (TR INDEX (IDX_TREE3_2, IDX_TREE3_3), ART INDEX
> (RDB$PRIMARY2))))
> 
> 873424 fetches, 0 marks, 12892 reads, 0 writes. 0 inserts, 0 updates,
> 0 deletes, 380580 index, 0 seq. Delta memory: 1784 bytes. Total
> execution time: 1.311s 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T00:49:57.217

如果可以，请避免 DISTINCT 和 LIKE，DISTINCT 优化 [http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)

尝试使用 group by 而不是 distinct 进行嵌套查询。在使用 group by 和 order by 时，我使用它来解决这个问题。

`select * from ({the rest of the query}) as some_table group by {my distinct column};`

我也看不到您的表引擎，但 MyIsam 更适合全文搜索（而不是 InnoDB）。此外，可能值得关注 Solr 进行全文搜索。需要设置一些学习曲线，但您可以索引 mysql 表，然后跨多个列执行部分匹配搜索。像提升和敬畏之类的东西。

看看下面的查询是否有任何性能优势。

```
select * from (SELECT tr.IdLink, tr.IdTargetLink, tr.IdItem, tr.NodePosition
FROM Tree3 tr
inner join article3_1 art on art.idarticle = Tr.iditem
WHERE tr.ItemType = 2 AND tr.Market1 = 1
AND  ((art.IDARTICLE > 0) AND (  (LCASE(art.Artikelnummer) like '%a4 papier%' ) OR (
(LCASE(art.Artikelnummer) like 'a4' )
AND (LCASE(art.Artikelnummer) like 'papier'))  OR  (LCASE(art.Artikelnaam1) like '%a4 papier%' ) OR ( (LCASE(art.Artikelnaam1) like '%a4%' )
AND (LCASE(art.Artikelnaam1) like '%papier%'))  OR  (LCASE(art.Artikelnaam2) like '%a4 papier%' ) OR ( (LCASE(art.Artikelnaam2) like '%a4%' )
AND (LCASE(art.Artikelnaam2) like '%papier%'))  OR  (LCASE(art.Artikelnr_leverancier)
like '%a4 papier%' ) OR ( (LCASE(art.Artikelnr_leverancier) like '%a4%' )
AND (LCASE(art.Artikelnr_leverancier) like '%papier%'))  OR  (LCASE(art.Merk) like '%a4 papier%' ) OR ( (LCASE(art.Merk) like '%a4%' )
AND (LCASE(art.Merk) like '%papier%'))  OR  (LCASE(art.EAN) like '%a4 papier%' ) OR (
(LCASE(art.EAN) like '%a4%' )
AND (LCASE(art.EAN) like '%papier%'))  OR  (LCASE(art.AltArtnr1) like '%a4 papier%' ) OR    
( (LCASE(art.AltArtnr1) like '%a4%' )
AND (LCASE(art.AltArtnr1) like '%papier%'))  OR  (LCASE(art.AltArtnr2) like '%a4 papier%' ) OR ( (LCASE(art.AltArtnr2) like '%a4%' )
AND (LCASE(art.AltArtnr2) like '%papier%')) ))
AND tr.NODELEVEL =5  and tr.LINKTYPE <> 5
ORDER BY tr.NodePosition LIMIT 30)
as some_table group by IdLink; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:08:52.980

这现在可能有点老了，但希望仍然可以提供帮助。

一般来说，distinct 和 order by 操作都需要排序。排序由索引辅助。考虑为 order by 子句中指定的列创建索引 - NodePosition，我能看到的唯一其他索引与另一列复合，因此 order by 不会查询索引。对于不同的，您可以尝试为 tr.IdLink、tr.IdTargetLink、tr.IdItem、tr.NodePosition 列或单独创建一个复合索引。（我不太确定索引会帮助多少不同，但值得一试）。

其他需要考虑的事情：您的 where 子句使用函数 - 在这种情况下使用函数将导致全表扫描，甚至可能不会查看您的索引。我不相信 mySql 支持基于函数的索引，不确定 FireBird。但是可以通过创建另一个可以保存LOWER（列）结果的列来解决它，如果可用，您需要使用触发器来维护该列。

OR 条件和 LIKE '%a4%' 也会导致全表扫描。我意识到您的业务逻辑可能不允许您从 '%a4%' 字符串的开头删除通配符，因此为了可能改进此类用例，您可以考虑使用子查询 - 首先尝试尽可能缩小结果集可能在子查询中避免任何 LIKE 或 OR，然后用父查询包装该结果，这将进一步过滤结果（将子查询放入 FROM 子句）。因此，在您的子查询中，您将具有以下条件： tr.ItemType = 2 AND tr.Market1 = 1 和 tr.NODELEVEL =5 和 tr.LINKTYPE <> 5

# java - 相对路径问题 Eclipse

> ID：13387047
> 
> 赞同：0
> 
> 时间：2012-11-14T20:47:26.823
> 
> 标签：java, eclipse, jar

我有以下属性文件

> 文件位置=C:\Users\Desktop\SomeFolder tickerNames=C:\Users\Desktop\SomeFile.txt

我喜欢访问

```
 Properties configProp = new Properties();
        String propertyValue = null;
        try {
            InputStream in = PropertyGet.class.getResourceAsStream("/application.properties");
            configProp.load(in);
            propertyValue = configProp.getProperty(propertyName); 
```

无论我尝试什么，当我创建一个可运行的 jar 文件时，它都不会获取文件位置。我需要如何构造文件以便我的可运行 jar 可以找到它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:23:39.900

If you try to load it as "/application.properties", it will be loaded from the root of the classpath. That will succeed if you package your properties file into the executable jar you are building.

If you want to side-load the properties file eg. from the same dir as your jar, you can specify a classpath when starting your jar file and make sure the directory gets included where the properties file is.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:24:11.530

The answer is to put the .properties file in your jar, in resources.

# cocos2d-iphone - 从 UIKit 菜单重启 cocos2d 的场景

> ID：13387048
> 
> 赞同：0
> 
> 时间：2012-11-14T20:47:27.653
> 
> 标签：cocos2d-iphone, uikit

我有一个基于 UIButtons 的 UIKit 菜单，当我点击其中一个时，我正在触发一个 cocos2D 场景。我正在 AppDelegate 中设置 CCDirector ：

```
if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
    [CCDirector setDirectorType:kCCDirectorTypeDefault];
CCDirector *director = [CCDirector sharedDirector];
[director setAnimationInterval:1.0/60];
[director setDisplayFPS:YES];
[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888]; 
```

在 rootViewController（将持有我的 EAGLView 的 viewController）中，我在 viewDidLoad 方法中执行此操作：

```
 glView = [EAGLView viewWithFrame:self.view.bounds
                               pixelFormat:kEAGLColorFormatRGBA8    
                               depthFormat:0 

                    ];

glView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[self.view insertSubview:glView atIndex:0];
[[CCDirector sharedDirector] setOpenGLView:glView];
CCScene *scene = [GameScene sceneWithParent:self];
[[CCDirector sharedDirector] runWithScene:scene]; 
```

我在 MainMenuViewController 中设置我的菜单，从那里我将 RootViewController 推送到 navigationController 的堆栈中。这非常有效，我的游戏开始时没有问题。我也可以从 RootViewController （包含 cocos2d 场景）返回 UIButton：`- (IBAction)goBack { [self.navigationController popViewControllerAnimated:YES]; [[CCDirector sharedDirector] end];}`

但是当我尝试重新加载我的游戏场景时，应用程序退出了。我试过这个方法： [重启CCDirector](https://stackoverflow.com/questions/11037134/cocos2d-2-0-rc2-end-the-director-and-restart?rq=1)但徒劳！！我试图暂停 CCDirector 并重新启动动画，但也是徒劳的，我得到的错误与 cocos2d 的绘制方法有关！请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:36:37.637

我刚刚解决了我的问题。所以如果你尝试使用 UINavigationController 你不必使用`[[CCDirector sharedDirector] end]`，因为当 rootController 从堆栈中弹出时，cocos2d 世界的所有场景都会被释放。但是，如果您尝试仅删除子视图（而不是孔控制器），则必须结束 CCDirector！我的问题是在我作为 GameScene 的孩子添加的单例类中，当我结束 CCDirector 时，它仍然存在于内存中，所以我必须在重新创建游戏场景之前释放它。希望这很清楚。

# extjs - 如何在 ExtJS 中将作用域作为参数传递？

> ID：13387055
> 
> 赞同：1
> 
> 时间：2012-11-14T20:47:40.790
> 
> 标签：extjs, scope

```
this.getSecondPanel = function(argPanel, argID)
{
    Ext.Ajax.request({
        url     : 'myActionURL',
        params  : {id: argID}, 
        success : function(response)
        {
            var resData = Ext.util.JSON.decode(response.responseText);
            var totalCount = resData.totalCount;

            argPanel.items.insert(0, this.getTotalCountPanel(totalCount));
        },
        failure : function(response)
        {
            Ext.Msg.alert('Error: ', response);
        }
    }); 
};

this.getTotalCountPanel = function(argCounter) 
{
    return new Ext.Panel({
        title   : 'Summary Panel',
        html    : '<table class="bgrGREYlight" width="100%" style="padding:5">' +
                    '<tbody>' +
                        '<tr>' +
                            '<th align="left" width="20%" class="tableTEXT2">' + Total Count + '</th>' +
                            '<td  width="80%" align="left" class="tableTEXT">' + argCounter + '</td>' +
                        '</tr>' +
                    '</tbody>' +
                  '</table>'
    });
}; 
```

当我运行上面的代码时，它给出了

> TypeError：this.getTotalCountPanel 不是函数

错误。我想这是一个范围问题。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:24:20.087

是的，您可以`scope: this`在请求方法选项对象中进行设置。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request)

```
this.getSecondPanel = function(argPanel, argID)
{
    Ext.Ajax.request({
        scope:this,  //<-----  scope set to current context
        url     : 'myActionURL',
        params  : {id: argID}, 
        success : function(response)
        {
            var resData = Ext.util.JSON.decode(response.responseText);
            var totalCount = resData.totalCount;

            argPanel.items.insert(0, this.getTotalCountPanel(totalCount));
        },
        failure : function(response)
        {
            Ext.Msg.alert('Error: ', response);
        }
    }); 
}; 
```

# tfs - 将来自另一个解决方案的 wixlibs 与 TFS 构建一起使用

> ID：13387066
> 
> 赞同：3
> 
> 时间：2012-11-14T20:48:30.753
> 
> 标签：tfs, wix, wixlib

我们有安装程序引用一个 wixlib 文件来获得一些常见的功能。wixlib 在另一个解决方案中构建，然后移动到该解决方案中的文件夹。当我们尝试使用 TFS 构建安装程序时，我们从 light.exe 收到错误：

`light.exe: The system cannot find the file '..\..\..\Core\Common\assemblies\v1.0\Common.Wix.wixlib' with type 'Source'.`

我们的常规项目可以引用\assembiles\v1.0，因为我们在那里存储了一些其他常见的程序集。我们如何让 WiX 在构建过程中识别这个位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:07:00.580

您直接引用 wixlib 。据我了解 TFS 构建过程，它应该被添加到您的解决方案的 TFS 项目中。TFS 项目不应依赖于另一个非依赖解决方案的输出。这至少是不好的做法。在任何情况下，您都不能保证在您的项目在服务器上构建之前会生成此输出。

据我记得，TFS 构建为每个构建创建单独的文件夹并在那里获取源。因此，您的解决方案不再位于同一文件夹层次结构级别。

支持将 wixlib 显式复制到安装程序项目中的另一点：版本控制 - 在这种情况下，公共库中的任何错误都不会立即破坏所有引用它的项目。您可以逐步升级和测试每个项目。你能想象在每次构建时自动下载任何 3rd 方 dll 的新版本吗？即使更改对您来说并不重要，该 dll 中的任何更改都会立即破坏您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:45:38.680

由于共享组件和活动解决方案位于 TFS 中的两个独立项目中，因此必须设置工作区以使引用的相对路径保持不变。最简单的方法是在 TFS 构建的工作区中设置构建代理文件夹结构，以使 $(SourceDir) 代表您的根目录。但是，不要更改您的源代码管理文件夹 - 保持不变。

例如，假设您具有以下结构：

```
-TFS
|-SharedComponents
||-MyComponents
|-ProjectArea
||-MyProject 
```

您可能希望在构建工作区中有以下两项：

```
Source Control Folder               Build Agent Folder
---------------------------------------------------------------------------------
$/ProjectArea/MyProject             $(SourceDir)\ProjectArea\MyProject
$/SharedComponents/MyComponents     $(SourceDir)\SharedComponents\MyComponents 
```

这模仿了构建文件夹中 TFS 中的结构，从而允许所有相对路径保持不变。

关于此配置的另一个注意事项：由于您在另一个位置拥有共享组件，您可能希望在 MyProject 中创建一个解决方案文件夹并将您正在使用的组件添加到其中。这将确保当任何人从 TFS 加载您的项目时它们会被自动拉出 - 他们不必在发现构建错误后返回并单独拉下共享组件文件夹。

# iphone - 如何将标签的文本作为电子邮件附件发送？

> ID：13387068
> 
> 赞同：0
> 
> 时间：2012-11-14T20:48:33.367
> 
> 标签：iphone, ios, xcode, sdk, email-attachments

我想将标签文本附加到电子邮件中，如何将 UILabel 中的文本作为电子邮件的附件发送？

这是我正在使用的代码：

```
-(IBAction)send:(id)sender {

    if ([MFMailComposeViewController canSendMail])
    {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(10, 100, 300, 100)];
        label.numberOfLines = 0;
        label.textAlignment = UITextAlignmentCenter;
        label.text = @"text";

        [self.view addSubview:label];
        [label release];

        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

        mailer.mailComposeDelegate = self;
        [mailer setSubject:@"Subject"];

        NSString *fileName = @"my file.txt";
        NSArray  *paths =   NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *path = [documentsDirectory stringByAppendingPathComponent:fileName];

        NSData *myData = [NSData dataWithContentsOfFile:path];
        [mailer addAttachmentData:myData mimeType:@"text/plain" fileName:fileName];

        // Fill out the email body text
        NSString *emailBody = @"Email Body";

        [mailer setMessageBody:emailBody isHTML:NO];

        [self presentModalViewController:mailer animated:YES];

        [mailer release];
    }
    else
    {
        UIAlertView *alertm = [[UIAlertView alloc] initWithTitle:@"Failure"
                                                         message:@"Please make sure that your   email application is open"
                                                        delegate:nil
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles: nil];
        [alertm show];
        [alertm release];
    }
} 
```

如何链接该标签以将其附加到电子邮件？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:23:30.570

You can add the Label text to the Body.

```
 NSString *emailBody = [NSString stringWithFormat:@"Your Voice File Attached. %@", label.text]; 
```

something like this

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:15:31.570

您快到了。

-- 你从文件中读取文本并附加它

===

不是从文件中读取数据，而是从标签本身读取数据

```
NSData *data = [self.label.text dataUsingEncoding:NSUTF8Encoding]; 
```

# android - 移动 Firefox 插件开发：window.BrowserApp.deck 为空

> ID：13387069
> 
> 赞同：1
> 
> 时间：2012-11-14T20:48:34.513
> 
> 标签：android, firefox, firefox-addon, fennec

我正在尝试为 Firefox Mobile 编写一个简单的小插件，从[这个骨架](https://github.com/mfinkle/skeleton-addon-fxandroid)开始。最终，我想对每个加载的新页面运行一些代码，这似乎最好通过向每个新选项卡添加一个“DOMContentLoaded”侦听器来完成，该侦听器在该选项卡加载新页面时触发。为此，我需要检测新选项卡，这显然是通过向BrowserApp 的面板[添加“TabOpen”侦听器来完成的。](https://developer.mozilla.org/en-US/docs/Extensions/Mobile/API/BrowserApp/deck)

问题：在启动时（但不是在安装到已加载的会话时），`window.BrowserApp.deck`唯一窗口为空。文档很少，似乎并不表明这是可能的。

要自己测试，请下载上面链接的骨架并添加

```
window.NativeWindow.toast.show(window.BrowserApp, "long"); 
```

在 bootstrap.js 的第 48 行下方，然后在 Mobile Firefox 上构建、安装并重新启动。您将看到一个 toast 报告 BrowserApp 的属性，包括“deck: null”。（我目前还在我的服务器上[托管您将获得的扩展程序的副本](http://kevingibbons.org/sotest.xpi)，测试起来要快得多：只需将您的 Mobile Firefox 浏览器指向该链接，安装并重新启动。）

是什么赋予了？我误读了什么吗？有没有更好的方法来做我想做的事情而不会遇到这个问题？某处是否有更广泛的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:29:56.017

等待`UIReady`事件。

```
window.addEventListener("UIReady", function(){your code}, false); 
```

# ios - MPMoviePlayerViewController 锁屏播放控件不起作用

> ID：13387073
> 
> 赞同：5
> 
> 时间：2012-11-14T20:48:57.720
> 
> 标签：ios, objective-c, mpmovieplayercontroller, playback

我有一个具有以下设置的应用程序：

**URMoviePlayerViewController 扩展 MPMoviePlayerViewController**

*   实现了 remoteControlReceivedWithEvent:(UIEvent *)event 方法，以及：

    ```
    (void)viewDidLoad
    {
        [super viewDidLoad];    
        [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
        [self becomeFirstResponder];
    }

    (BOOL) canBecomeFirstResponder
    {
        return YES;
    } 
    ```

**URPlayerViewController 具有 URMoviePlayerViewController 作为属性**

```
 @property (nonatomic, strong) URMoviePlayerViewController *player; 
```

*   当调用播放音频剪辑时，播放器被初始化；如果已经初始化，则不会重新初始化播放器

*   URPlayerViewController 有一个视图，它是一个自定义播放器，具有播放/暂停、下一个/上一个控件，这些控件在 viewDidLoad 方法中被初始化并添加到子视图中

**URAppDelegate 具有 URPlayerViewController 作为属性**

```
 @property (nonatomic, strong) URPlayerViewController *playerViewController; 
```

*   playerViewController 在应用程序 didFinishLaunchingWithOptions 中初始化

*   playerViewController 的视图被添加到*窗口*中 - 以便自定义播放器在整个应用程序中可见

**问题：**

一切通常运作良好。时不时地在锁定屏幕上播放控件（播放/暂停/下一个/上一个）停止工作。remoteControlReceivedWithEvent 永远不会被调用。我无法始终如一地重现这一点。

关于围绕播放调试此问题的任何建议或想法都会很棒，因为我无法始终如一地重现此问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:52:58.240

我认为您缺少以下方法，只需将其添加到现有代码中并接受答案是否可行：

从 viewdidload 中移除 beginReceivingRemoteControlEvents 并放入 viewdidAppear：

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

}

```
- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:animated];
[[UIApplication sharedApplication] endReceivingRemoteControlEvents];
[self resignFirstResponder]; 
```

}

# jquery - 从 json 数组中获取数据到表中

> ID：13387074
> 
> 赞同：0
> 
> 时间：2012-11-14T20:48:56.703
> 
> 标签：jquery, json

我正在尝试为我公司的 CMS 文章列表创建过滤器搜索。我不确定如何将返回的 JSON 数据转换为我的 html 表的数据。但是，我以前没有这样做过，并且不确定如何遍历数据。

这是一些虚拟输出数据：

```
[{"articleID":"7298","title":"inbrief","issueDate":"July 2012"},{"articleID":"7299","title":"inbrief","issueDate":"July 2012"},{"articleID":"7300","title":"inbrief","issueDate":"July 2012"},{"articleID":"7301","title":"inbrief","issueDate":"July 2012"}] 
```

这是相关的JS代码：

```
$.post("link",  { issue: isearch, availability: asearch, type: tsearch }, function(data) {
        var htm =''
        console.log(data);
        for(var i=0; i<data.length; i++)
        {
            jason = data.getJSONObject(i);
            articleID = jason.articleID;
            title = jason.title;
            issueDate = jason.issueDate;
            htm += '<tr id="news'+articleID+'">'
                +   '<td>'+title+'</td>'
                +   '<td>'+issueDate+'</td>'
                +   '<td><a href="cms/index/addnews/news/'+articleID+'">make top news</a></td>'
                +   '<td><a href="link">view</a></td>'
                +   '<td><a href="cms/news/updatenews/'+articleID+'">update</a></td><td><a href="" class="delete" id="'+articleID+'">delete</a></td>'
                +   '</tr>';
        }
        $('.cms').html(htm);
    }); 
```

我已经尝试使用 data[i].articleID 执行此操作，但这对我也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:54:01.667

data.getJSONObject 不是一个函数。您只需要将其更改为`data[i]`

[http://jsfiddle.net/A3Srb/](http://jsfiddle.net/A3Srb/)

```
EDIT 
```

我注意到您说您已经尝试过 data[i]。您确定数据与示例中的虚拟数据相同吗？使用 fiddler 或添加一个 console.log(data) 来确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:11:04.773

试试这个，用each替换你的for语句并在你的桌子上使用append（）而不是html（），html（）每次都会清除它

```
 $(document).ready(function() {
 var data = [{"articleID":"7298","title":"inbrief","issueDate":"July 2012"},{"articleID":"7299","title":"inbrief","issueDate":"July 2012"},{"articleID":"7300","title":"inbrief","issueDate":"July 2012"},{"articleID":"7301","title":"inbrief","issueDate":"July 2012"}];

    $.each(data, function(key, value){

         htm = '<tr id="news'+data[key].articleID+'">';
            htm+=   '<td>'+data[key].title+'</td>';
            htm+=   '<td>'+data[key].issueDate+'</td>';
            htm+=  '<td><a href="cms/index/addnews/news/'+data[key].articleID+'">make top news</a></td>';
            htm+=   '<td><a href="link">view</a></td>';
            htm+= '<td><a href="cms/news/updatenews/'+data[key].articleID+'">update</a></td><td><a href="" class="delete" id="'+data[key].articleID+'">delete</a></td>';
            htm+=   '</tr>';
            $('.cms').append(htm);
        });

}); 
```

这是没有 $.post 逻辑的代码的 jsfiddle，因为我不知道这些变量对于 isearch 等[http://jsfiddle.net/94jXh/是什么](http://jsfiddle.net/94jXh/)

如果您想让您的符号更具可读性，请将其用于 htm var 设置

```
 htm = '<tr id="news'+key.articleID+'">';
            htm+=   '<td>'+key.title+'</td>';
            htm+=   '<td>'+key.issueDate+'</td>';
            htm+=  '<td><a href="cms/index/addnews/news/'+key.articleID+'">make top news</a></td>';
            htm+=   '<td><a href="link">view</a></td>';
            htm+= '<td><a href="cms/news/updatenews/'+key.articleID+'">update</a></td><td><a href="" class="delete" id="'+key.articleID+'">delete</a></td>';
            htm+=   '</tr>'; 
```

但是我同意[https://stackoverflow.com/users/425275/ime-vidas](https://stackoverflow.com/users/425275/ime-vidas)，使用模板 jquery 插件会更好，我喜欢 jsrender [https://github.com/BorisMoore/jsrender](https://github.com/BorisMoore/jsrender)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:18:04.837

为了提高效率，我建议这样：

```
var articleTemplate = '<tr id="news%1"><td>%2</td><td>%3</td><td><a href="cms/index/addnews/news/%1">make top news</a></td><td><a href="link">view</a></td><td><a href="cms/news/updatenews/%1">update</a></td><td><a href="" class="delete" id="%1">delete</a></td></tr>';//informal template

$.post("link",  { issue: isearch, availability: asearch, type: tsearch }, function(data) {
    var htm = $.map(data, function(a, i) {
        return articleTemplate.replace(/%1/g, a.articleID).replace('%2', a.title).replace('%3', a.issueDate);
    });
    $('.cms').html(htm.join(''));
}); 
```

这最大限度地减少了构建过程中涉及的部分字符串的数量，`htm`从而减少了客户端内存的负载，并减少了垃圾收集要做的工作。

如果你做了很多其他的模板，那么考虑像 Mustache 或 Handlebars 之类的东西，否则上面的非正式方法很好（而且非常有效）。

# html - Outlook 页脚 + HTML + CSS - 怎么做才能正常工作？

> ID：13387075
> 
> 赞同：3
> 
> 时间：2012-11-14T20:49:03.723
> 
> 标签：html, css, fonts, outlook, width

在为我父亲的公司创建 HTML 页脚时，我遇到了一个大问题。他们正在使用 OE 和 Outlook 10。我已经在代码上工作了很长时间，但我仍然遇到了一些问题。我可以使用外部字体吗？我应该如何使它工作？用 width: X% 定位它怎么样？

我希望它看起来像这样：

![在此处输入图像描述](../Images/d067625eae19f57a1c339b4eb4978385.png)

但它不...

这是代码：

```
 <!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>www.k#$#$#$#$#$#$#$.com</title>
<style>

@font-face {
    font-family: times_Sans_Serif;
    src: url('http://a#$#$#$#$#$#$#$.pl/tem/TIMESS_.ttf');
}

p, a, span {
    font-family: times_Sans_Serif;
}

a {
    text-decoration:none;
}

.header {
    width:100%;
    height:5px;
    display:block;
    background-color:#6d5759;
}

.section li{
    float: left;
    display: inline;
    list-style-type: none;
    margin:0% 3%;
    padding:0;
    position:relative;
}

.section p{
    display:block;
    text-align: left;
    color:#6d5759;
}

.section a{
    color: #6d5759;
}

#logo {
    text-decoration:none;
    text-align: right;

}

.footer {
    clear:both;
    font-size:11px;
    width:100%;
    height:auto;
    display:block;
    background-color:#6d5759;
    color:#FFF;
    text-align:center;
    padding: 5px;
}

.footer a{
    color:#FFF;
}

</style>
</head>

<body>
<div class="main">
    <div class="header"></div>

    <ul class="section">

        <li id="osoba">
               <p>
<a href="http://k#$#$#$#$#$#$#$.com/o-nas" target="_blank">Marcjusz K#$#$#$#$#$#$#$</a><br>
                +48 500 000 000<br>
                marcjusz@k#$#$#$#$#$#$#$.com
                </p>
        </li>

        <li id="logo">
            <a href="http://k#$#$#$#$#$#$#$.com/" target="_blank"><img src="http://#$#$#$#$#$#$#$.pl/tem/image001.png"></a>
        </li>

    </ul>

    <div class="footer">
        <span> K#$#$#$#$#$#$#$ Ubezpieczenia Sp.J. &nbsp;|&nbsp; 31-475 Kraków ul. STREET1 &nbsp;|&nbsp; 32-700 Bochnia ul. STREET2 &nbsp;|&nbsp; 32-800 Brzesko ul. STREET 3 &nbsp;|&nbsp; <a href="http://k#$#$#$#$#$#$#$.com/" target="_blank">www.kr#$#$#$#$#$#$#$.com</a></span>
    </div>

</div>
</body>
</html> 
```

你能帮我解决这个问题吗？我会很有帮助的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:55:25.777

大多数邮件客户端不支持样式表。允许使用一些内联样式。通常不支持定位以防止电子邮件从其容器中逸出 - 想象一封电子邮件试图欺骗 Gmail 菜单或类似的东西。

一般来说：

*   使用表格进行布局
*   使用内联样式

有关所支持内容的良好行会，请参阅：

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:03:05.900

电子邮件很奇怪，因为您几乎需要使用 10 年前的 html 才能使其正常工作。许多客户去掉了头部的大部分内容（包括实际的身体标签）。这包括 gmail、yahoo、hotmail 等。他们只保留某些东西。有些保留样式，但不是全部。

我建议您将样式从头部移开，并使用 style="" 属性将它们内联在标签内并使用表格（回想一下 90 年代）

所以你可能有这样的事情：

```
<table width="100%">
<tr>
  <td id="osoba" style="">..Osoba...<td>
  <td id="logo" style="">..logo..</td>
</tr>
<tr>
  <td id="footer" style="">...footer...</td>
</tr>
</table> 
```

注意：我把身份证放在那里是为了澄清，但由于我们去掉了你的身份证，所以没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T01:45:50.620

我已经做到了！它看起来如我所愿。;) 使用表格进行布局对我来说是一种精神上的痛苦，但它确实有效！;P 谢谢帮助！

这是任何有类似问题的人的代码：

```
<html>
<head>
<meta charset="utf-8">
<title>www.#¤#¤#¤#¤#¤#¤#¤#¤#.com</title>

</head>

<body>
<table width="100%" align="center">
    <tr>
        <td colspan="4" style="width:100%; height:5px; background-color:#818285"></td>
    </tr>

    <tr style="color: #818285;" align="center">   

        <td width="20%"></td>
        <td align="right" width="24%">
                <div style="text-align:left; width:180px; right:0%; color:#818285;">

                <a style="color:#818285; text-decoration:none;" href="http://k#¤#¤#¤#¤#¤#¤#¤#¤#.com/o-nas" target="_blank">Marcjusz K#¤#¤#¤#¤#¤#¤#¤#¤#</a><br>
                +48 500 000 000<br>
                <a style="color:#818285; text-decoration:none;" href="mailto:marcjusz@k#¤#¤#¤#¤#¤#¤#¤#¤#.com">marcjusz@k#¤#¤#¤#¤#¤#¤#¤#¤#.com</a>
                </div>

        </td>    

        <td align="center" width="4%" style="font-size:2em; color:#818285;"></td>

        <td align="left" width="52%">
            <a style="color:#818285; text-decoration:none;" href="http://k#¤#¤#¤#¤#¤#¤#¤#¤#.com/" target="_blank"><img src="http://#¤#¤#¤#¤#¤#¤#¤#¤#.pl/tem/logo-poziom300.jpg"></a>
        </td>

    </tr>

    <tr><td colspan="4" style="font-size:11px; background-color:#818285; color:#FFF;    text-align:center; padding: 5px; ">
        <span> K#$#$#$#$#$#$#$# Ubezpieczenia Sp.J. &nbsp;|&nbsp; 31-475 Kraków ul. STREET 6a &nbsp;|&nbsp; 32-700 Bochnia ul. STREET 14 &nbsp;|&nbsp; 32-800 Brzesko ul. STREET 3 &nbsp;|&nbsp; <a style="color:#FFF; text-decoration:none;" href="http://k#$#$#$#$#$#$#$#$#.com/" target="_blank">www.k#$#$#$#$#$#$#$#.com</a></span>
    </td></tr>
</table>

</body>
</html> 
```

# python - Django - Tastypie POST（更新）导致 409 CONFLICT

> ID：13387078
> 
> 赞同：3
> 
> 时间：2012-11-14T20:49:24.313
> 
> 标签：python, django, post, tastypie

我正在做一个需要与 Tastypie API 交互的任务。我无法控制 API，我刚刚获得了它的详细信息，并告诉它设置为只允许 GET、POST 和 DELETE。

示例 POST - 有效

```
curl --dump-header - -H "Accept: application/json" -H "Content-Type: application/json" -X     POST -d '{"email":"test@someemail.com","tr_referral":"SomeFeed","mailing_lists":1,"ip_address":"192.168.1.23"}' http://api.somesite.info/v1/account/?username=test\&api_key=a0495db44f4gch749c4gf56906350f336571d94 
```

示例 GET - 有效

```
curl http://api.somesite.info/v1/account/202126/?username=test\&api_key=a0495db44f4gch749c4gf56906350f336571d94 
```

获取响应：

```
{"birth_date": null, "city": "", "country": "nl", "email": "test@someemail.com", "first_name": "", "gender": "", "last_name": "", "lead": true, "mailing_lists": [{"name": "Classic NL", "resource_uri": "/v1/mailing_list/1/"}], "phone": "", "resource_uri": "/v1/account/202126/", "street_number": "", "tr_input_method": "", "tr_ip_address": "192.168.1.23", "tr_language": "", "tr_referral": {"name": "SomeFeed", "resource_uri": ""}, "utm_campaign": "", "utm_medium": "", "utm_source": "SomeFeed", "zipcode": ""} 
```

现在这是我尝试过的许多 POST 之一，以触发记录的更新：

```
curl --dump-header - -H "Accept: application/json" -H "Content-Type: application/json" -X POST -d '{"email":"test@someemail.com","tr_referral":"SomeFeed","mailing_lists":2,"ip_address":"192.168.1.46"}' http://api.somesite.info/v1/account/?username=test\&api_key=a0495db44f4gch749c4gf56906350f336571d94 
```

结果是：

```
HTTP/1.1 409 CONFLICT
Server: nginx/1.2.1
Date: Wed, 14 Nov 2012 20:42:35 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive

Email address test@someemail.com already exists. 
```

我还尝试发布到以下 URL：

```
http://api.somesite.info/v1/account/202126/?username=test\&api_key=a0495db44f4gch749c4gf56906350f336571d94 
```

那返回：

```
HTTP/1.1 501 NOT IMPLEMENTED
Server: nginx/1.2.1
Date: Wed, 14 Nov 2012 20:45:01 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive 
```

我需要使用 POST 更新记录。我究竟做错了什么？

请注意，我已经更改了一些数据，例如 URL、api 密钥等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T00:59:18.953

我想我应该来提供一个“答案”。

事实证明，作业文件中的内容具有误导性，我不会通过 POST 更新帐户，因为不允许使用此功能。

他们真正想要的是让我删除该帐户，然后重新发布它，这似乎不是最好的方法，因为每次“更新”都需要两次 API 调用，而不仅仅是一个。甚至无法使用 PATCH 命令。

# sql-server - fluent nhibernate SQL Server 2008 R2 Express 非常长的字符串保存问题

> ID：13387081
> 
> 赞同：4
> 
> 时间：2012-11-14T20:49:34.583
> 
> 标签：sql-server, fluent-nhibernate, fluent-nhibernate-mapping, sql-server-2008r2-express

我正在尝试创建我的第一个 NHibernate 项目，所以我可能在这里做了一些愚蠢的事情，但是已经在谷歌上搜索了几天，还没有任何快乐。

我有一个具有各种属性的 Article 对象：

```
public class Article {
    public virtual string Title { get; set; }
    public virtual string Body { get; set; }
} 
```

我正在使用流利的配置来加载映射：

```
configuration.Mappings(m => m.AutoMappings.Add((AutoMap.AssemblyOf<Article>())
                            .Conventions.Add(DefaultCascade.All())
                            .UseOverridesFromAssemblyOf<SchemaConfigurationController>()) 
```

覆盖是：

```
public class ArticleOverrideMapping : IAutoMappingOverride<Article>
{
    public void Override(AutoMapping<Article> mapping)
    {
       //mapping.Map(x => x.Body).CustomSqlType("NVARCHAR(4000)");
       //mapping.Map(article => article.Body).Length(10000);
       //mapping.Map(article => article.Body).Length(Int32.MaxValue);            
       //mapping.Map(article => article.Body).CustomSqlType("NVARCHAR(max)");           
       //mapping.Map(article => article.Body).CustomSqlType("NVARCHAR(max)").Length(Int32.MaxValue);           
       mapping.Map(article => article.Body).CustomType("StringClob").CustomSqlType("NVARCHAR(max)");
    }
} 
```

我已经尝试了每条注释掉的行（大致按照我在网上找到可能的解决方案的顺序）。我可以让 SQL Server 创建 nvarchar(max) 列，如果我使用 SQL 管理工作室，我可以将很多（185,602 个单词是最大的测试）粘贴到 Body 列中。我的问题是尝试使用 NHibernate 从 MVC 站点保存它。

我得到两个主要错误：

```
String or binary data would be truncated.  The statement has been terminated. 
```

如果我没有设置“.Length(Int32.MaxValue)”覆盖，就会发生这种情况。

发生的第二个错误（设置长度时）：

```
The length of the string value exceeds the length configured in the mapping/parameter. 
```

我很困惑此时我应该做什么。我的目标是能够在 SQL Server 中存储一个非常大的字符串（整篇文章）（以及用于测试的 SQLite，SQLite 不喜欢 nvarchar(max)）并将其取出，（并对其进行编辑） MVC 网站。

**更新**

根据@Cymen的链接，我试过了

```
.CustomSqlType("nvarchar(max)").Length(Int32.MaxValue).Nullable(); 
```

但这会导致错误：

```
The length of the string value exceeds the length configured in the mapping/parameter. 
```

当我只尝试保存 1201 个单词时（所有单词“test”）。当我在上述映射“.Length(Int32.MaxValue)”的末尾添加长度时，我仍然是同样的错误。

**更新**

想确认我使用的是哪些版本：

```
 FluentNHibernate.1.3.0.733
 NHibernate.3.3.1.4000
 Microsoft.AspNet.Mvc.4.0.20710.0 
```

**最终更新**

Kieren 说得对，我完全忘记了我获取了该属性并在服务器上对其运行了 markdownsharp 并在服务器上填充了第二个属性。所以这是我没有映射的第二个属性实际上正在爆炸，抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T17:09:25.563

好的，伙计们。同样的东西，所以我做了一些测试。

**似乎 int.MaxValue 不能用作流利的 LENGTH。**如果这样做，生成的创建 SQL 将是 nvarchar(255)。因此，如果 nhibernate（流利的）仍然生成这样的脚本，那么他最多等待 255 个字符。

**如果您仍然使用 int.MaxValue / 2，那么一切正常。至少在剧本中。** 唯一合理的解释：unicode 字符串，因此对于单个 char fluent 自动占用 2 个字节。所以内部流利的休眠可能会乘以2。如果我们得到超过2GB的空间，谁知道流利的会做什么......

**请让我知道它是否也适用于数据。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:54:31.340

这就是我通常的处理方式。

`mapping.Map(x => x.Problem).CustomType("varchar(MAX)");`

不确定 CustomSqlType 是什么，但我从来没有使用过它，这很有效。

# c++ - 移动 std::shared_ptr 会使程序崩溃

> ID：13387082
> 
> 赞同：3
> 
> 时间：2012-11-14T20:49:36.893
> 
> 标签：c++, shared-ptr

我必须为一项工作构建一个小型 OpenGL 包装器。我试图避免为我的所有类编写复制构造函数和复制赋值。

真正懒惰且从不写副本的一种方法是使用指针，但由于指针是邪恶的，我试图独占使用`std::shared_ptr`.

问题是通过使用一个`std::shared_ptr`按值接收的构造函数，我的程序崩溃了，并且当使用完美转发时，它仅在我传递左值时才有效。

```
// this class doesn't have any default, copy constructors.
class Dep
{
    Dep(std::string path, GLenum type);
};

class Program
{
std::shared_ptr<Dep> dep1;
std::shared_ptr<Dep> dep2;

(...) 
```

我尝试了 2 种不同的构造函数：

```
template <class T, class = typename std::enable_if<std::is_constructible<std::shared_ptr<Dep>, T>::value>::type>
Program(T&& dep1, T&& dep2)
: dep1(std::forward<T>(dep1)), dep2(std::forward<T>(dep2))
{
} 
```

和另一个

```
Program(std::shared_ptr<Dep> dep1, std::shared_ptr<Dep> dep2)
: dep1(std::move(dep1)), dep2(std::move(dep2))
{
} 
```

我想要做的是能够传递左值或右值共享指针，但它不起作用，除非我在前向指针上使用左值，否则每次都会崩溃。

```
// passing these work on the std::forward one, but that's the only case it works
// if i try to use std::make_shared as parameter (for rvalue) it crashes on both
// the std::move and std::forward ones.
auto vs = std::make_shared<GLShader>("TriangleVS.glsl", GL_VERTEX_SHADER);
auto fs = std::make_shared<GLShader>("TriangleFS.glsl", GL_FRAGMENT_SHADER); 
```

摘要： std::forward 上的左值有效。std::forward 上的右值不起作用。std::move one 上的左值或右值不起作用。它只是在调用 std::shared_ptr 构造函数时（在 Program 构造函数内）挂起程序。

我看了 Scott Mayers 的通用参考谈话，我以为我理解了这一点，这发生在我身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:21:18.710

I don't see anything wrong with this code, and it tests out OK on **[http://ideone.com/jlShgB](http://ideone.com/jlShgB)** too:

```
#include <memory>
#include <utility>
#include <string>
#include <cassert>

enum GLenum { foo };

// this class doesn't have any default, copy constructors.
struct Dep
{
    Dep(std::string path, GLenum type) {}
    Dep() = delete;
    Dep(Dep const&) = delete;
};

struct Program
{
    std::shared_ptr<Dep> dep1;
    std::shared_ptr<Dep> dep2;

#if 1
    template <class T, class = typename std::enable_if<std::is_constructible<std::shared_ptr<Dep>, T>::value>::type>
    Program(T&& dep1, T&& dep2)
        : dep1(std::forward<T>(dep1)), dep2(std::forward<T>(dep2))
    {
    }
#else
    Program(std::shared_ptr<Dep> dep1, std::shared_ptr<Dep> dep2)
        : dep1(std::move(dep1)), dep2(std::move(dep2))
    {
    }
#endif
};

int main()
{
    auto dep1 = std::make_shared<Dep>("dep1", foo);
    auto dep2 = std::make_shared<Dep>("dep2", foo);
    Program p(std::move(dep1), std::move(dep2));

    assert(!dep1 && !dep2);
} 
```

Of course if you change `#if 1` to `#if 0`, the assert will raise an exception because the dep1/dep2 will not have been moved from.

This leads me to suspect another issue somewhere else. If you can isolate a SSCCE that exhibits the problem, please let me know.

# c - 与 C API Libmysql 连接时出现一致的错误 2005

> ID：13387084
> 
> 赞同：1
> 
> 时间：2012-11-14T20:50:05.547
> 
> 标签：c, linux, windows, api, libmysql

*首先，我想说我多年来一直潜伏在这个网站上，我感谢你为帮助我使用 C\C++ 所做的一切。*

我遇到的真正问题是，我在 Windows 中制作了一个解析 yaml 文件的程序，然后使用解析的信息查询 SQL 数据库，并且运行良好。所以我把它移植到了 linux 上，这似乎已经奏效了，省去了一个问题。每当我测试程序时，我都会收到错误 2005，说它找不到主机名。我试过强制使用TCP，但仍然无济于事。我已经尝试了多个数据库，奇怪的是这在 Windows 上运行良好，所以如果有人可以阐明这个问题。

错误具体是：Error: 2005: Unknown MySQL server host '#.#.#.#' (0)

注意：# 只是为了审查实际的 IP 地址。

我不确定自己做错了什么，希望得到一些帮助。我的代码如下。

```
int openConnection( char *name, char *password, char *ip, char *port, char *db )
{ 

    printf("Opening SQL Connection...\n");
    conn = mysql_init(NULL);
    if (conn == NULL)
            {
                    printf("Error: %u: %s\n", mysql_errno(conn), mysql_error(conn));
                    return 1;
            }

    if (mysql_real_connect(conn,
            ip,
            name,
            password,
            db,
            (int)port,
            NULL, 0) == NULL)
            {
                    printf("Error: %u: %s\n", mysql_errno(conn), mysql_error(conn));
                    return 2;
            }
    return 0;
} 
```

# ios - 创建后如何设置 NSIndexPath

> ID：13387085
> 
> 赞同：2
> 
> 时间：2012-11-14T20:50:07.950
> 
> 标签：ios, macos, uitableview, nsindexpath

我创建了一个 NSIndexPath 使用：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0]; 
```

现在我想通过修改此路径通过 UITableView 建立索引，我找不到任何在 NSIndexPath 中设置值的 API 调用

每次分配一个新的 NSIndexPath 似乎是一种巨大的浪费，特别是因为我实际上是在使用它来进行不分配任何内存的调用（协议的补充）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:55:47.327

> 我找不到任何在 NSIndexPath 中设置值的 API 调用。

因为没有 - NSIndexPath 是不可变的。

> 每次分配一个新的 NSIndexPath 似乎是一种巨大的浪费

这是。对此感到抱歉。`@autoreleasepool { }`如果你关心这个，把它包装成一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T20:57:12.100

`NSIndexPath`是不可变的。每次只创建一个新的。然后，如果您遇到性能问题，请使用 Instruments 来确定创建索引路径是否是问题的一部分。

**只有在您确认创建索引路径是一个问题之后，您才**应该考虑创建一个子类，`NSIndexPath`该子类具有自己的索引存储并提供变异方法。（UIKit 在内部使用 做类似的事情`UIMutableIndexPath`，但该类不是公共的。）

# java - Java - 可视地拖动摆动元素

> ID：13387086
> 
> 赞同：0
> 
> 时间：2012-11-14T20:50:15.897
> 
> 标签：java, user-interface, drag-and-drop, draggable

是否有与[http://allen-sauer.com/com.allen_sauer.gwt.dnd.demo.DragDropDemo/DragDropDemo.html#PaletteExample](http://allen-sauer.com/com.allen_sauer.gwt.dnd.demo.DragDropDemo/DragDropDemo.html#PaletteExample)类似的解决方案，但对于普通的 Java 应用程序，即允许在画布上拖动 gui 元素?

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:11:59.530

是的，这是可能的。不，这不是微不足道的。

您将希望通过代码 D'n'D API 变得更加熟悉[如何使用 Java 2 进行拖放，第 1 部分](http://www.javaworld.com/jw-03-1999/jw-03-dragndrop.html)

您可能想通读

*   [平滑 JList 放置目标动画](http://rabbit-hole.blogspot.com.au/2006/04/smooth-jlist-drop-target-animation.html)
*   [平滑的树掉落动画](http://rabbit-hole.blogspot.com.au/2006/05/smooth-tree-drop-animation.html)
*   [我的拖动图像比你的好](http://rabbit-hole.blogspot.com.au/2006/05/my-drag-image-is-better-than-yours.html)
*   [死简单的拖动](http://rabbit-hole.blogspot.com.au/2006/06/dead-simple-drags.html)
*   [花式滴](http://rabbit-hole.blogspot.com.au/2006/06/fancy-drops.html)
*   [为每个人拖动图像......我们的意思是每个人](http://rabbit-hole.blogspot.com.au/2006/07/drag-images-for-everyoneand-we-do-mean.html)
*   [放下目标导航，或者你拖你的包](http://rabbit-hole.blogspot.com.au/2006/08/drop-target-navigation-or-you-drag.html)
*   [摆动拖动图像，改进](http://rabbit-hole.blogspot.com.au/2006/08/swing-drag-images-improved.html)
*   [改进的拖动图像](http://rabbit-hole.blogspot.com.au/2007/04/improved-drag-images.html)

您可能还想熟悉[`GlassPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)

# php - 在没有表格的情况下获取 Codeigniter CSRF 令牌？

> ID：13387091
> 
> 赞同：16
> 
> 时间：2012-11-14T20:50:37.120
> 
> 标签：php, ajax, codeigniter

我在我的网站上启用了 CSRF 保护，但 CSRF 令牌唯一一次放置在隐藏字段中是在`form_close()`使用时。我正在通过 ajax 发布数据，并且还需要发送 CSRF 以防止 500 错误。

我认为有一种方法可以将 CSRF 令牌显式嵌入到页面中，但我似乎找不到它。

当页面上没有表单时，如何获取 CSRF 令牌？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-14T20:57:22.383

您可以通过安全类获取 CSRF 令牌名称和值：

```
$this->security->get_csrf_hash();
$this->security->get_csrf_token_name(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-02T11:00:20.303

以这种方式将其添加到表单中

```
<input type="hidden" name="<?php echo $this->security->get_csrf_token_name(); ?>" value="<?php echo $this->security->get_csrf_hash(); ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-18T00:40:01.090

这是一个示例，向您展示如何启用 CSRF 攻击模式：

```
<script>

  var cct = '<?php echo $this->security->get_csrf_hash() ?>';
  var get_csrf_token_name = '<?php echo $this->security->get_csrf_token_name() ?>';

   $.ajaxSetup({
   type:'post',
  data:{ <?php echo $this->security->get_csrf_token_name() ?> :cct}
   });

    var siteurl = '<?= site_url()?>';        

   </script>
```

# c# - 使用 C# 为正则表达式制作街道模式

> ID：13387092
> 
> 赞同：0
> 
> 时间：2012-11-14T20:50:37.550
> 
> 标签：c#, .net, regex

我正在尝试检查应该描述街道名称的字符串的验证。

模板为：字数以大写字母开头，数字为 1 到 4 位。

例子：`Name Of Street 101`

我试过这个：

```
Regex stRegex = new Regex(@"^[A-Z][a-z]+ [1-9]+$"); 
```

但它似乎不起作用。

应该采用什么模式才能使其发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:52:27.790

您只检查一个单词，并且不允许数字中出现零。也许更像这样？

```
@"^(?:[A-Z][a-z]+ )+[1-9][0-9]{0,3}$" 
```

但是，我认为您的模板有点限制。怎么样`O'Sullivan Street`？而且您可能还希望允许多个空格（通过`+`在空格之后添加另一个空格）。

# c++ - 实现 Pong 时 Allegro 中的时序问题

> ID：13387095
> 
> 赞同：0
> 
> 时间：2012-11-14T20:51:32.017
> 
> 标签：c++, timing, allegro, pong

我正在尝试使用 Allegro 4 和 C++ 实现一个非常基本的 Pong 版本。但是，当我将计时机制与 rest() 调用结合使用时，我遇到了问题。我的游戏设置为 2 名玩家，一名玩家获得 7 分后赢得一盘，然后都从 0 重新开始。第一个赢得 2 局的玩家获胜。赢得一盘后，我会显示获胜者的姓名并调用 rest(2000) 以便玩家可以看到消息。然而，在这之后，球似乎不知从何而来，并导致其中一名球员在比赛开始时自动得分。之后，它会按照预期从中心恢复。当我删除计时机制或 rest() 调用时，不会发生这种情况。

我已经尝试将分数的更新和设置移到计时循环之外，但它不起作用。在 rest() 调用之后也不会调用球的 init() 函数。真的很感激一些关于如何解决问题的意见。

这是代码。我省略了基本位和不影响问题的包含。 `//includes...`

```
Paddle p1, p2;  //paddles for player 1, player 2
Ball b;   //game ball

int main()
{
    setupGame();   //setup allegro and bitmaps
    init();    //initialize paddles and ball

    bool done = false;
    int win, game = 0;

    //game loop
    while(!done)    
    {
     if(key[KEY_X])   //quick exit for debugging
        done = true;

     //timing loop
     while(counter > 0) {
         movePaddles();   
         moveAndCollideBall();
         game = checkCondition(b, p1, p2);  //check if either player 1 or player 2 has won a point
         updateScore(game);   //update score
         updateSets();        //update set if score of either equals 7

         counter --; 
     }

     draw();    //draw paddles and ball
     displayScore();   

     blit(buffer, screen, 0, 0, 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);  //draw buffer to screen
     clear_bitmap(buffer);   //clear buffer for next iteration

     checkWinner(done);   //check if either player has won 2 sets, exit loop if so
    }
    exitGame();   //clear bitmaps and exit allegro
    return 0;
}
END_OF_MAIN()

//Returns 1 if player 1 has won a point, 2 for player 2
int checkCondition(Ball b, Paddle p1, Paddle p2)
{
  if(b.x < p1.x)
     return 2;
  else if(b.x > p2.x+PADDLE_WIDTH)
     return 1;
  return 0;
}

//setup allegro and timing variables, load bitmaps
void setupGame()
{
    //allegro, screen setup, etc.

    //timing mechanism
    LOCK_VARIABLE(counter);
    LOCK_FUNCTION(increment_counter);
    install_int_ex(increment_counter, BPS_TO_TIMER(240));

    srand(time(0));

    //other setup stuff
}

//initialize paddles and ball
void init()
{
    p1.init(10, 210);
    p2.init(620, 210);
    b.init();
}

//output score to buffer
void displayScore()
{
  textprintf_ex(buffer, gamefont, SCREEN_WIDTH/4, 10, WHITE, -1, "%i", p1.score);
  textprintf_ex(buffer, gamefont, SCREEN_WIDTH/2 - SCREEN_WIDTH/3, 450, WHITE, -1, "Sets: %i", p1.sets);
  textprintf_ex(buffer, gamefont, SCREEN_WIDTH/2 + SCREEN_WIDTH/4, 10, WHITE, -1, "%i", p2.score);
  textprintf_ex(buffer, gamefont, SCREEN_WIDTH/2 + SCREEN_WIDTH/6, 450, WHITE, -1, "Sets: %i", p2.sets);
}

 //taking the winner of the point as parameter, update the corresponding player's score by 1, reset ball
void updateScore(int game)
{
  if(game > 0)
    {game == 1 ? ++p1.score : ++p2.score;
     b.init();
     game = 0;
    }              
}

//update no of sets won if either player has score of 7, reset scores
void updateSets()
{
if(p1.score == 7 || p2.score == 7)
 {
   if(p1.score == 7)
      {p1.sets++;
       textprintf_ex(screen, gamefont, SCREEN_WIDTH/5, SCREEN_HEIGHT/2,WHITE, -1, "Player 1 wins the set!");
       }         
   else
      {p2.sets++;
       textprintf_ex(screen, gamefont, SCREEN_WIDTH/5, SCREEN_HEIGHT/2,WHITE, -1, "Player 2 wins the set!");

      }
   p2.score = 0;
   p1.score = 0;

   rest(2000);  //THIS SEEMS TO CAUSE THE PROBLEM, AFTER THE REST, THE BALL INSTEAD OF COMING FROM THE CENTER, QUICKLY COMES FROM SOMEWHERE CLOSE TO THE CORNER
  }   
}     

//check if either player has won 2 sets, if so set done to true
void checkWinner(bool& done)
{
if(p1.sets == 2)
  {textprintf_ex(screen, gamefont, SCREEN_WIDTH/4, SCREEN_HEIGHT/2 + 30,WHITE, -1, "Player 1 wins!!");
   rest(2000);
   done = true;
   }
else if(p2.sets == 2)
  {textprintf_ex(screen, gamefont, SCREEN_WIDTH/4, SCREEN_HEIGHT/2 + 30,WHITE, -1, "Player 2 wins!!");
   rest(2000);
   done = true;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:08:58.563

之后`rest(2000)`，将计数器重置为`0`。它在休息期间会持续两秒钟，所以在它完成后，你会在它试图赶上时获得两秒钟的游戏爆发。

正确的解决方法是拥有更好的组织代码。两秒钟的休息确实应该作为常规计时循环的一部分进行。

# c - 为什么我的生产者-消费者阻塞？

> ID：13387098
> 
> 赞同：1
> 
> 时间：2012-11-14T20:51:47.927
> 
> 标签：c, algorithm, unix, semaphore, producer-consumer

我的代码在这里： http: [//pastebin.com/Fi3h0E0P](http://pastebin.com/Fi3h0E0P)

这是输出

```
0
Should we take order today (y or n): y
Enter order number: 100
More customers (y or n): n

Stop serving customers right now. Passing orders to cooker:
There are total of 1 order(s)
1
Roger, waiter. I am processing order #100 
```

目标是服务员必须接受订单，然后将其交给厨师。服务员必须等待厨师完成所有比萨饼，交付比萨饼，然后接受新订单。

我在上一篇文章中询问了 PV 是如何工作[的](https://stackoverflow.com/questions/13374397/can-someone-explain-producer-and-consumer-in-p-v-form)。

我觉得跟`\n`吃没关系？我尝试了各种组合`wait()`，但没有奏效。

我在哪里做错了？

主要部分在这里：

```
//Producer process
 if(pid > 0)
 {
    while(1)
    {
      printf("0");
      P(emptyShelf); // waiter as P finds no items on shelf;
      P(mutex); // has permission to use the shelf
      waiter_as_producer();
      V(mutex); // cooker now can use the shelf
      V(orderOnShelf); // cooker now can pickup orders

      wait();
      printf("2");
      P(pizzaOnShelf);
      P(mutex);
      waiter_as_consumer();
      V(mutex);
      V(emptyShelf);
      printf("3 ");
    }
 }
    if(pid == 0)
    {
     while(1)
    {
     printf("1");
     P(orderOnShelf); // make sure there is an order on shelf
     P(mutex); //permission to work
     cooker_as_consumer(); // take order and put pizza on shelf
     printf("return from cooker");
     V(mutex); //release permission
     printf("just released perm");
     V(pizzaOnShelf); // pizza is now on shelf
     printf("after");
     wait();
     printf("4");

    }
  } 
```

所以我想这是执行路径：进入waiter_as_producer，然后转到子进程（cooker），然后将控制权移交给父进程，完成waiter_as_consumer，切换回子进程。这两个等待切换回父级（就像我说的我尝试了所有可能的 wait() 组合......）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:25:02.127

*   更改为`#define PERMS (0)`（它**不是**八进制文件模式掩码！）
*   删除所有`wait();`s
*   通过 sizeof:`if((shmid=shmget(1000,sizeof (int) * BUFSIZE,IPC_CREAT | PERMS)) < 0)`和其他缩放大小（大小以 semsize/pagesize 为模放大，但无论如何使用正确的大小是一个好习惯）

在这里解决了问题。

整个想法是：您*无需*等待；{producer,consumer} 之一将在某处的 P() 上被阻止：

从 P():

```
sb.sem_flg = 0; /* blocking call */
    if (semop(sid, &sb, 1) == -1)
        perror("semop"); 
```

此外：`wait(&status)`至少需要一个论据。（并且您可能需要其他等待功能之一，例如 wait3() 或 waitpid() ）

除此之外：

*   我会在共享对象的声明之前加上“volatile”：`volatile int *buff;`
*   main() 应该返回 int，没有值的返回是错误的（在 c99 之前）
*   大多数指针操作都很笨拙：`order = buffer[i];`与 相同`order = *(buffer+i);`，但更具可读性。

# cuda - cudaMemset() - 它设置字节还是整数？

> ID：13387101
> 
> 赞同：10
> 
> 时间：2012-11-14T20:52:08.687
> 
> 标签：cuda, semantics, memset

来自[在线](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_ge07c97b96efd09abaeb3ca3b5f8da4ee.html#ge07c97b96efd09abaeb3ca3b5f8da4ee)文档：

```
cudaError_t cudaMemset (void * devPtr, int value, size_t count ) 
```

**用常量字节**值填充 devPtr 指向的内存区域的第一个 count 字节。

参数： devPtr - 指向设备内存值的指针 - 为指定内存计数的每个**字节设置的值 - 要设置的大小（以****字节**为单位）

此描述似乎不正确，因为：

```
int *dJunk;
cudaMalloc((void**)&dJunk, 32*(sizeof(int));
cudaMemset(dJunk, 0x12, 32); 
```

将所有 32 个整数设置为 0x12，而不是 0x12121212。（整数与字节）

描述谈到设置字节。Count 和 Value 以字节为单位进行描述。注意 count 是**size_t**类型， value 是 int 类型。即，将字节大小设置为 int 值。

cudaMemset() 在 prog 指南中没有提到。我必须假设我看到的行为是正确的，并且文档很糟糕。

那里有更好的文档来源吗？（在哪里？）
是否支持其他类型？即会`float *dJunk;`工作吗？其他的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T21:43:44.120

文档是正确的，而您对所做操作的解释`cudaMemset`是错误的。该函数确实设置了字节值。您的示例将前 32*个字节*设置为`0x12`，而不是将所有 32 个整数设置为`0x12`，即：

```
#include <cstdio>

int main(void)
{
    const int n = 32;
    const size_t sz = size_t(n) * sizeof(int);
    int *dJunk;
    cudaMalloc((void**)&dJunk, sz);
    cudaMemset(dJunk, 0, sz);
    cudaMemset(dJunk, 0x12, 32);

    int *Junk = new int[n];

    cudaMemcpy(Junk, dJunk, sz, cudaMemcpyDeviceToHost);

    for(int i=0; i<n; i++) {
        fprintf(stdout, "%d %x\n", i, Junk[i]);
    }

    cudaDeviceReset();
    return 0;
} 
```

生产

```
$ nvcc memset.cu 
$ ./a.out 

0 12121212
1 12121212
2 12121212
3 12121212
4 12121212
5 12121212
6 12121212
7 12121212
8 0
9 0
10 0
11 0
12 0
13 0
14 0
15 0
16 0
17 0
18 0
19 0
20 0
21 0
22 0
23 0
24 0
25 0
26 0
27 0
28 0
29 0
30 0
31 0 
```

IE。所有 128 个字节设置为 0，然后前 32 个字节设置为`0x12`. 完全按照文档中的描述。

# jsf-2 - 使用 ajax primefaces 渲染 ap:column

> ID：13387103
> 
> 赞同：1
> 
> 时间：2012-11-14T20:52:17.447
> 
> 标签：jsf-2, primefaces

使用这个元素

```
<p:selectOneRadio id="selempaque" value="#{mbcompletado.empaque}">
    <f:selectItem itemLabel="Si" itemValue="true"/>
    <f:selectItem itemLabel="No" itemValue="false"/>
    <p:ajax update="colEmp"/>
</p:selectOneRadio> 
```

我想渲染一个

`<p:column id="colEmp" rendered="#{mbcompletado.empaque}"> .... </p:column>`

但在我刷新页面之前它不会改变渲染。我想使用 Radio 值来显示或隐藏该列。

使用 primefaces 和 glassfish 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:07:12.270

JS/Ajax 只会更新 HTML DOM 树中**已经**存在的元素。JS 基本上是先 a`document.getElementById(clientId)`获取要更新的元素，然后用从 ajax 响应中检索到的新节点替换整个节点。JS/Ajax 不能神奇地显示/更新从未呈现到 HTML 输出的元素。您基本上需要更新*始终*呈现并因此保证存在于 HTML DOM 树中的父组件。

假设父组件是 a `<p:dataTable>`，

```
<p:dataTable id="tableId" ...> 
```

那么您需要`update`相应地更改属性：

```
<p:ajax update="tableId" /> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# r - 有什么方法可以让 expression() 显示 P(a <= X <= b)？

> ID：13387109
> 
> 赞同：5
> 
> 时间：2012-11-14T20:08:56.820
> 
> 标签：r, plotmath

我大部分时间都能够强制 expression() 为我提供图表所需的数学输出，但我对此感到困惑。

```
text(-2,.21,expression(P(a <= X)), cex=1.2) 
```

给了我预期的结果，但是

```
text(-2,.21,expression(P(a <= X <= b)), cex=1.2) 
```

失败，箭头指向第二个 \le。将 2 块粘贴在一起也不起作用，因为 <= 需要左右标记；即这也失败了：

```
text(-2,.21,expression(<= X), cex=1.2) 
```

有任何想法吗？令人沮丧的是，除了查看源代码之外，似乎没有任何关于表达式令牌解析器如何工作的文档。唯一的文档似乎是几个不同颜色的版本：

[http://stat.ethz.ch/R-manual/R-patched/library/grDevices/html/plotmath.html](http://stat.ethz.ch/R-manual/R-patched/library/grDevices/html/plotmath.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T20:15:06.327

您需要在 plotmath 中对运算符进行分组 - 换句话说，您必须明确优先级。要在不可见的情况下执行此操作，请将子语句包装`{ }`为：

```
R> plot(1:10, type = "n")
R> text(5, 5, expression(P(a <= {X <= b})), cex = 1.2) 
```

这使

![在此处输入图像描述](../Images/09015fe838de5cad7a7edc929222896d.png)

`plotmath`在标记理解列表的末尾记录了这一点（如果您知道它的含义） 。

# opengl - 在 Windows 8 上使用 OpenGL 时出现 DXGI 警告？

> ID：13387113
> 
> 赞同：4
> 
> 时间：2012-11-14T20:52:58.980
> 
> 标签：opengl, windows-8, directx, dxgi

我正在使用 OpenGL（不是 DirectX）编写 CAD 应用程序。在 Windows 8 Pro（64 位）上运行调试版本时，在应用程序正确终止之前，以下消息会打印到调试器的控制台窗口：

```
DXGI WARNING: Process is terminating. Using simple reporting. Please call ReportLiveObjects() at runtime for standard reporting. [ STATE_CREATION WARNING #0: ]
DXGI WARNING: Live Producer at 0x0000009E51808AD8, Refcount: 2\. [ STATE_CREATION WARNING #0: ]
DXGI WARNING:   Live Object at 0x0000009E5180A570, Refcount: 2\. [ STATE_CREATION WARNING #0: ]
DXGI WARNING: Live                         Object :      1 [ STATE_CREATION WARNING #0: ] 
```

我不知道这是从哪里来的。DXGI 似乎与我没有使用的 DirectX 有关。有什么提示吗？

* * *

## 更新

按照 Paul-Jan 的建议，我启用了设备调试，这会产生以下消息：

```
D3D11 INFO: Create ID3D11Context: Name="unnamed", Addr=0x00000015EEB486D0, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097225: CREATE_CONTEXT]
D3D11 INFO: Create ID3DDeviceContextState: Name="unnamed", Addr=0x00000015EE96DE70, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #3145735: CREATE_DEVICECONTEXTSTATE]
D3D11 INFO: Create ID3D11BlendState: Name="unnamed", Addr=0x00000015EE97B6A0, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097270: CREATE_BLENDSTATE]
D3D11 INFO: Create ID3D11DepthStencilState: Name="unnamed", Addr=0x00000015EE9799F0, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097273: CREATE_DEPTHSTENCILSTATE]
D3D11 INFO: Create ID3D11RasterizerState: Name="unnamed", Addr=0x00000015EE97B340, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097276: CREATE_RASTERIZERSTATE]
D3D11 INFO: Create ID3D11Sampler: Name="unnamed", Addr=0x00000015EE97AE30, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097267: CREATE_SAMPLER]
D3D11 INFO: Create ID3D11Query: Name="unnamed", Addr=0x00000015F25D3060, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097279: CREATE_QUERY]
D3D11 INFO: Create ID3D11Texture2D: Name="unnamed", Addr=0x00000015EEB8CA50, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D]
D3D11 INFO: Create ID3D11Texture2D: Name="unnamed", Addr=0x00000015EA313BF0, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D]
D3D11 INFO: Create ID3D11Texture2D: Name="unnamed", Addr=0x00000015EEB41EC0, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D]
D3D11 INFO: Destroy ID3D11Texture2D: Name="unnamed", Addr=0x00000015EA313BF0 [ STATE_CREATION INFO #2097236: DESTROY_TEXTURE2D]
D3D11 INFO: Destroy ID3D11Texture2D: Name="unnamed", Addr=0x00000015EEB41EC0 [ STATE_CREATION INFO #2097236: DESTROY_TEXTURE2D]
D3D11 INFO: Destroy ID3D11Texture2D: Name="unnamed", Addr=0x00000015EEB8CA50 [ STATE_CREATION INFO #2097236: DESTROY_TEXTURE2D]
D3D11 WARNING: Process is terminating. Using simple reporting. Please call ReportLiveObjects() at runtime for standard reporting. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING: Live Producer at 0x00000015EEA57E08, Refcount: 3\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING:  Live Object at 0x00000015EEB486D0, Refcount: 1\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING:  Live Object at 0x00000015EE96DE70, Refcount: 0\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING:  Live Object at 0x00000015EE97B6A0, Refcount: 0\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING:  Live Object at 0x00000015EE9799F0, Refcount: 0\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING:  Live Object at 0x00000015EE97B340, Refcount: 0\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING:  Live Object at 0x00000015EE97AE30, Refcount: 0\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING:  Live Object at 0x00000015F25D3060, Refcount: 0\. [ STATE_CREATION WARNING #0: UNKNOWN]
D3D11 WARNING: Live                         Object :      7 [ STATE_CREATION WARNING #0: UNKNOWN]

DXGI WARNING: Process is terminating. Using simple reporting. Please call ReportLiveObjects() at runtime for standard reporting. [ STATE_CREATION WARNING #0: ]
DXGI WARNING: Live Producer at 0x00000015F25D2EB8, Refcount: 2\. [ STATE_CREATION WARNING #0: ]
DXGI WARNING:   Live Object at 0x00000015EE9AF870, Refcount: 2\. [ STATE_CREATION WARNING #0: ]
DXGI WARNING: Live                         Object :      1 [ STATE_CREATION WARNING #0: ] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T07:16:03.387

在 Windows Vista 及更高版本中，*DirectX 和 OpenGL 实际上都通过 DXGI 工作*。DXGI 管理设备。`producer`实际使用的渲染 API（OpenGL / DirectX）在 DXGI中称为 a ，因此我们可以安全地假设该消息是关于您的通用 OpenGL 使用情况。

当它抱怨生产者和活动对象的引用计数为 2 时，可能是你没有正确地破坏你的 OpenGL 上下文吗？（即成功调用`wglMakeCurrent( NULL )`and `wglDeleteContext`）这样的遗漏根本不会是一个实际问题，因为两者都会在进程终止时被隐式销毁，但需要警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T22:52:42.853

在使用 DirectX 11 的项目中，我遇到了相同的警告信息（ReportLiveObjects、Live Producer、Live Object、STATE_CREATION WARNING #0: UNKNOWN，.....）。但这些信息对我来说信息量不够，而且对你来说，我想。

对于我的项目，问题原来是纹理文件（.dds）的格式与我程序的其他部分不兼容，因此程序无法正确加载纹理。在我将其转换为正确的格式后。此警告信息消失了。

所以我在这里的结论是，您可能需要使用一些调试技术，例如断点、日志记录等，以便跟踪您的案例中真正的问题是什么。

# django - Django gwt 和 rpc 调用

> ID：13387118
> 
> 赞同：3
> 
> 时间：2012-11-14T20:53:14.173
> 
> 标签：django, gwt, rpc

我正在使用 django，但我喜欢将它与 gwt 一起使用，我尝试将 json 与活塞一起使用并且效果很好，但我更喜欢使用 RPC 调用。

所以我知道django有一些rpc lib，但我对xml-rpc json-rpc gwt-rpc感到困惑......

所以问题是：

1）如果存在，在哪里找到教程...... 2）或者我如何在 gwt 中进行简单的 rpc 调用并将 django 用于服务器端

谢谢，我在这里问是因为我在谷歌中找不到任何东西谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:58:41.323

您想使用 RPC 到 Django 而不是来自 GWT 应用程序的 Web 服务的任何特殊原因？我认为在 Django 和 GWT 之间使用 JSON 通信比 RPC 容易得多。

使用 RPC 的主要挑战是您的 Django 和 GWT 客户端应该通过通用协议进行通信。在 Django 方面，您需要一个模块来将 GWT RPC 调用转换为 Django 可以理解的内容，然后将 Django 结果转换为 GWT 客户端应用程序可以理解的内容。简而言之，RPC 调用是通过 http 通过 post 方法发送的序列化文本流。在服务器端，您应该能够通过反序列化将其转换为正确的数据结构。因此，您需要一个库来基于 GWT-RPC 协议为 Django 进行这种序列化和反序列化。

**有用的链接：**

*关于 GWT RPC：*

[谷歌文档：RPC](https://developers.google.com/web-toolkit/doc/1.6/DevGuideServerCommunication#DevGuideRemoteProcedureCalls)

[简而言之 GWT RPC](http://blog.gdssecurity.com/labs/2009/10/8/gwt-rpc-in-a-nutshell.html)

*GWT + Django：*

[如何在 GWT 中使用 Django？](https://stackoverflow.com/questions/1108793/how-to-use-django-with-gwt)

[使用 xml 将 GWT 与 Django 一起使用](http://makkalot-opensource.blogspot.no/2009/04/using-gwt-with-django.html)

[Google Web Toolkit 类似 Django 中的应用程序](https://stackoverflow.com/questions/1253056/google-web-toolkit-like-application-in-django)

**pyjs**

您还可以查看[http://pyjs.org/](http://pyjs.org/)，它是一个 python 到 JS 的编译器，并将它与 Django 一起使用。pyjs 的伟大之处在于你仍然在 Python 世界中 :)

[http://www.derekschaefer.net/2011/02/08/pyjamas-django-pure-win/](http://www.derekschaefer.net/2011/02/08/pyjamas-django-pure-win/)

[http://gdwarner.blogspot.no/2008/10/brief-pyjamas-django-tutorial.html](http://gdwarner.blogspot.no/2008/10/brief-pyjamas-django-tutorial.html)

# r - 如何重新创建这个 3d 直方图？

> ID：13387119
> 
> 赞同：1
> 
> 时间：2012-11-14T19:08:46.820
> 
> 标签：r, 3d, rotation, data-visualization, rgl

我说的是这张图：

![](../Images/4ceba7625e4fe7eb6c8f4caf5f08ef6e.png)

问题：

这是 R，不是 Matlab 对吗？在页面下方，它说它是用 R 制作的......

我怎样才能做到这一点？我的意思是，我怎样才能用这个先进的绿色表面和这个网格创建这样一个 3d 散点图？我现在如何制作简单的散点图和 3d 散点图，但我怎样才能创建如此高级的图片呢？这是哪个包？

我想将它包含在这张图片应该自动旋转的论文中。我知道如何将它包含到我的 tex 分发中，但因此我需要单个 png。例如，我制作动画的 1000 张单张图片。但是我怎样才能用 R 得到那些呢？我需要旋转它，然后将每个小旋转保存为图形文件。

非常感谢您的帮助，我最大的问题是创建此图形（包？）以及如何使其旋转（r 代码？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T03:55:28.307

1.  要创建此图，您可以签出`persp`函数。您可以更改参数以旋转图形。这是一个演示：

    ```
    require(grDevices) # for trans3d
    x <- seq(-10, 10, length= 30)
    y <- x
    f <- function(x,y) { r <- sqrt(x^2+y^2); 10 * sin(r)/r }
    z <- outer(x, y, f)
    z[is.na(z)] <- 1
    persp(x, y, z, theta = 90, phi = 30, expand = 0.5, col = "lightgreen") 
    ```

![在此处输入图像描述](../Images/78ae88f45447737b455104cad73db04e.png)

更改时`theta = 30`：

```
persp(x, y, z, theta = 30, phi = 30, expand = 0.5, col = "lightgreen") 
```

![在此处输入图像描述](../Images/566c265b4fd041ddb95ba29630676a81.png)

2.  对于颜色，您可以键入`colors()`以查看可以使用的颜色。目前，我发现`lightgreen`可能是您想要的最接近的颜色。

# javascript - 如何确保我的放大请求在返回值之前完成？

> ID：13387120
> 
> 赞同：3
> 
> 时间：2012-11-14T20:53:22.167
> 
> 标签：javascript, ajax, caching, asynchronous

在我的一个文件中，我拨打电话如下：

```
var jobsString = getDropdownJobs(); 
```

它调用这个函数：

```
function getDropdownJobs() {

    var jobsString = amplify.store("JobsList");

    if (typeof jobsString === 'undefined') {

        // Amplify sends a request for getJobs, if it exists in cache, it will return that value.
        // If it does not exist in cache, it will make the AJAX request.
        amplify.request("getJobs", function (data) {

            // Leave a blank option for the default of no selection.
            var jobsString = '<option value=""></option>';
            // Append each of the options to the jobsString.
            $.each(data.jobs, function () {
                jobsString += "<option " + "value=" + this.JobNo_ + ">" + this.JobNo_ + " : " + this.Description + this.Description2 + "</option>";
            });
            // Store the jobsString to be used later.
            amplify.store("JobsList", jobsString);

        });
    }
    return jobsString;

} 
```

其中放大定义`"GetJobs"`为：

```
amplify.request.define("getJobs", "ajax", {
    url: "../api/Job/Jobs",
    dataType: "json",
    type: "GET",
    cache: "persist"
}); 
```

每当它返回时，它都是未定义的。我在 AJAX 定义中添加了“async: false”，它并没有改变任何东西。

在返回之前如何确保该值存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:03:15.613

我不熟悉 Amplify，但[它的 API](http://amplifyjs.com/api/request/)说

> 通过发出的请求`amplify.request`将始终异步解决

因此，您必须将回调传递给`getDropdownJobs`, 以在`jobsString`填充后执行，并且任何依赖于该值的代码都会进入其中。

或者，您可以使用 Amplify 的 pub/sub 系统来订阅一个事件何时`jobsString`填充并在`getDropdownJobs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:07:11.637

抱歉，如果我误解了您的问题，但是每次您执行这样的异步请求时，您都需要等待答案。在我提出替代方案之前，我倾向于遵循一些快速提示：

*   通常像你`getJobsDropdown`这样的方法不会返回任何东西，或者它们可能会返回承诺。查看[jquery Promise](http://api.jquery.com/promise/)或这篇文章，了解更多关于[链接](http://shangbang.me/chaining-asynchronous-calls-with-q-and-jquery)这些相同 Promise 的高级材料。
*   您可以使用的最简单的事情是回调，`getJobsDropdown`即您要处理数据的调用者的上下文中的一些方法。这将允许您在数据准备好时*恢复您的程序。*

试试这个：

```
function getDropdownJobs(callback) {

    // some code (...)

    amplify.request("getJobs", function (data) {

       // your processing and when done
       callback();

    });
} 
```

您可能可以在回调中传递数据。通常的调用`getDropdownJobs`是：

```
function processResults() { // This is your callback }

function getData() {

    // This is where you call getDropDownJobs
    getDropDownJobs(processResults);
} 
```

这个有帮助吗？但愿如此。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T15:42:57.783

如果您使用 jQuery 并且不介意将 amplify 与 jQuery 框架耦合，您可以使用此插件，允许您使用 jQuery 延迟对象：

[放大请求延迟插件](https://github.com/elijahmanor/amplify-request-deferred)

这是一篇包含一些背景信息和插件使用概述的文章：

[为 AmplifyJS 请求添加 jQuery 延迟支持](http://www.elijahmanor.com/2012/10/adding-jquery-deferred-support-to.html)

# java - 读取 rs232 时随机换行

> ID：13387121
> 
> 赞同：0
> 
> 时间：2012-11-14T20:53:31.083
> 
> 标签：java, serial-port, newline

我正在开发一个通过 rs232 编写命令和读取温度计输出的 java 程序。我正在使用[JSSC](https://code.google.com/p/java-simple-serial-connector/)。写入部分工作正常，但是当我读取输出并将其转换为字符串并使用 System.out.println() 打印时，会出现一些随机的新行。当我使用 System.out.write() 编写结果时，一切正常。我检查了字节码，没有找到任何 NL 字符。

这是我的代码：

```
public boolean openPort(int rate, int databits, int stopbit, int parity){
    try {
        serialPort.openPort();
        serialPort.setParams(rate, databits, stopbit, parity);
        int mask = SerialPort.MASK_RXCHAR + SerialPort.MASK_CTS + SerialPort.MASK_DSR;//Prepare mask
        serialPort.setEventsMask(mask);//Set mask
        serialPort.addEventListener(new SerialPortReader());//Add SerialPortEventListener

        return true;
    } catch (SerialPortException e) {
        System.out.println(e);
        return false;
    }
}

 static class SerialPortReader implements SerialPortEventListener {

    public void serialEvent(SerialPortEvent event) {
        if(event.isRXCHAR()){//If data is available
                try {
                    byte buffer[] = serialPort.readBytes(event.getEventValue());    
//with system.out.write
                    try {
                        System.out.write(buffer);

                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
//with system.out.println                       
                    String readed = new String(buffer);
                    System.out.println(readed);
                }
                catch (SerialPortException ex) {
                    System.out.println(ex);
                }
        }
        else if(event.isCTS()){//If CTS line has changed state
            if(event.getEventValue() == 1){//If line is ON
                System.out.println("CTS - ON");
            }
            else {
                System.out.println("CTS - OFF");
            }
        }
        else if(event.isDSR()){///If DSR line has changed state
            if(event.getEventValue() == 1){//If line is ON
                System.out.println("DSR - ON");
            }
            else {
                System.out.println("DSR - OFF");
            }
        }
    }
} 
```

这是 println() 的输出：

```
--- START (C) ---

21.0,
21.1,21.3,
21.1

21.0,
21.2,21.3,
21.2 
```

以及 write() 所需的输出

```
--- START (C) ---
21.0,21.1,21.3,21.1
21.0,21.1,21.3,21.1 
```

您会说“为什么不直接使用 write()？”，但我需要将此输出转换为字符串。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T09:41:33.897

我最近有同样的问题。最近我开始研究用我的 Pi 读取我的智能电表。我遇到了 JSSC，并决定尝试一下。但是我经过几个小时试图摆脱这些不需要的换行符后，我切换到了 RXTX。这现在就像一个魅力。

见[http://rxtx.qbang.org/wiki/index.php/Main_Page](http://rxtx.qbang.org/wiki/index.php/Main_Page)

以下是该项目的一些早期代码。希望这可以帮助。

```
package nl.barendregtict.homeautomation;

import gnu.io.*;

import java.io.IOException;
import java.io.InputStream;
import java.util.Enumeration;
import java.util.TooManyListenersException;

/**
 * Created by sbarendr on 09/11/14.
 */
public class KaifaSmartMeterReader implements SerialPortEventListener {

    CommPortIdentifier portId1;
    SerialPort serialPort1;
    InputStream inputStream;
    Thread readThread;

    public KaifaSmartMeterReader() {
        try {
            portId1 = CommPortIdentifier.getPortIdentifier("/dev/ttyUSB0");
            serialPort1 = (SerialPort) portId1.open("KaifaSmartMeterReader", 2000);
            System.out.println(portId1.getName() + " opened");
            inputStream = serialPort1.getInputStream();
            serialPort1.addEventListener(this);
            serialPort1.notifyOnDataAvailable(true);
            serialPort1.setSerialPortParams(115200,
                    SerialPort.DATABITS_8,
                    SerialPort.STOPBITS_1,
                    SerialPort.PARITY_NONE);
            serialPort1.setDTR(false);
            serialPort1.setRTS(false);
            Thread.sleep(30000);
            serialPort1.close();
        } catch (
                PortInUseException
                | IOException
                | TooManyListenersException
                | UnsupportedCommOperationException
                | InterruptedException
                | NoSuchPortException e) {
            e.printStackTrace();
        }
    }

    public void serialEvent(SerialPortEvent event) {
        switch(event.getEventType()) {
            case SerialPortEvent.BI:
            case SerialPortEvent.OE:
            case SerialPortEvent.FE:
            case SerialPortEvent.PE:
            case SerialPortEvent.CD:
            case SerialPortEvent.CTS:
            case SerialPortEvent.DSR:
            case SerialPortEvent.RI:
            case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
                break;
            case SerialPortEvent.DATA_AVAILABLE:
                StringBuffer readBuffer = new StringBuffer();
                int c;
                try {
                    while ((c = inputStream.read()) != 10) {
                        if (c != 13) readBuffer.append((char) c);
                    }
                    String scannedInput = readBuffer.toString();
                    System.out.println(scannedInput);
                }
                catch(IOException e) {
                    e.printStackTrace();
                }
        }

    }

    public static void main(String[] args) {
            KaifaSmartMeterReader reader = new KaifaSmartMeterReader();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:56:27.347

`println`在末尾添加一个换行符。要不添加，请使用`print`.

# django - 如何将 intersphinx 链接到 django 特定的结构（如设置）？

> ID：13387125
> 
> 赞同：7
> 
> 时间：2012-11-14T20:53:56.583
> 
> 标签：django, python-sphinx

通过正确的 intersphinx 设置，您可以从自己的文档中链接到 Django 类，如下所示：

```
:class:`django:django.db.models.Model` 
```

但是你如何链接到一个设置？Django 使用它自己的`:setting:`构造而不是像`:class:`. 如何链接到带有 intersphinx 的设置？

我尝试了各种咒语，但都没有奏效（有些可能是完全错误的）：

```
:ref:`django:ROOT_URLCONF`
:ref:`django:root_urlconf`
:setting:`django:ROOT_URLCONF`
:ref:`django:setting:ROOT_URLCONF`
:django:setting:`ROOT_URLCONF` 
```

错误喜欢`undefined label: django:root_urlconf`并`Unknown interpreted text role "setting"`打招呼。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T20:16:00.900

问题：我本地的 sphinx 不知道 Django 的自定义 sphinx 角色，例如`setting`. 所以像这样一个非常好的 intersphinx 参考：

```
:django:setting:`ROOT_URLCONF` 
```

在您告诉 Sphinx 有关 intersphinx 目标的自定义角色之前，它不会起作用。

最后，通过从[Django 的 sphinx 扩展](https://github.com/django/django/blob/master/docs/_ext/djangodocs.py)中复制一个小片段作为`_ext/djangodocs.py`我的文档旁边的一个小片段使其工作：

```
def setup(app):
    app.add_crossref_type(
        directivename = "setting",
        rolename = "setting",
        indextemplate = "pair: %s; setting",
    ) 
```

我将以下内容添加到我的 Sphinx' 中`conf.py`：

```
import os
import sys

...

sys.path.append(
    os.path.abspath(os.path.join(os.path.dirname(__file__), "_ext")))
# ^^^ I'll do that neater later on.

extensions = ['djangodocs',
              # ^^^ I added that one.
              'sphinx.ext.autodoc',
              ...
              ]

... 
```

所以：intersphinx 有效，但是如果您指向自定义角色，则需要在本地定义该自定义角色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T22:34:14.157

您需要查看 django 的 objects.inv 以确定正确的交叉引用应该是什么。

看起来：

```
:std:setting:`ROOT_URLCONF <django:ROOT_URLCONF>` 
```

应该管用。

不知何故，我有 django 的 objects.inv，但找不到我从中检索到的 URL，理论上它应该是[https://docs.djangoproject.com/en/1.4/objects.inv](https://docs.djangoproject.com/en/1.4/objects.inv)但最终会重定向几次在未找到文件的错误中。

# asp.net - Silverlight、WCF 和 Windows 8 的奇怪 cookie 问题

> ID：13387127
> 
> 赞同：1
> 
> 时间：2012-11-14T20:54:05.690
> 
> 标签：asp.net, wcf, session, cookies, membership

我已经在这个 Silverlight 应用程序上工作了很长一段时间了。我有两台开发机器。一个有windows 7，另一个有windows 8。SL 应用程序通过WCF 和MS 成员身份引擎的实现来实现身份验证。在我在另一台机器上安装 win8 之前，一切都运行良好。现在，当我从这台机器上进行身份验证时，我会返回 cookie 信息，但是向服务器发送的任何进一步请求都是在没有 cookie 信息的情况下发送的。我使用哪种浏览器以及我的互联网设置是什么都没关系（隐私/安全级别都设置为最低......仍然是同样的问题）。

我查看了提琴手上的请求并在两台机器之间进行了比较。它们在登录时都发送相同的请求，并且都接收到相似的数据，包括“Set-Cookie”标头。然而，下一个请求并不相似。一台机器将这个 .ASPXAUTH cookie 与一个 ASP.NET_SessionId 一起发送，而另一台仅发送 ASP.NET_SessionId。就像它忽略了 Set-Cookie 命令。

任何想法如何解决这个问题？我在我的互联网设置上尝试了所有方法，但似乎没有任何区别。

谢谢， 埃亚尔

# c++ - 检查矩阵是否为上三角（c++）

> ID：13387129
> 
> 赞同：2
> 
> 时间：2012-11-14T20:54:09.683
> 
> 标签：c++, for-loop, while-loop, triangular

我一直在尝试编写代码来确定矩阵是否为上三角形，然后打印出来。

我试过while循环，双循环，什么都没有。这是我目前的烂摊子：

```
int i, j;
int count = 0;
bool upper;

while (upper = true;)
{
for (i=1; i<m; i++)
{
   for (j=i-1; j<n; j++)
   {
      if (a[i] > a[j] && a[i][j] == 0.0)
         upper = true;
      else if (a[i][j] != 0.0)
         upper = false;
   }
}
}
//   cout << "Matrix is upper triangular. " << count << endl; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:12:48.103

矩阵是否为上三角形只能通过检查整个下部来确定。如果你在途中遇到一个非零元素，你就知道它不是上三角形。在检查整个下部之前，您无法做出决定。所以你的：

```
upper = true; 
```

仍在循环中的声明没有逻辑依据。

该问题类似于字符串内的字符搜索。您需要检查整个字符串。如果您到达字符串的末尾，但仍然没有找到您要查找的字符，那么（并且只有那时）您是否知道该字符不在字符串中。与矩阵问题的唯一区别是您现在多了一个维度。或者，换句话说，多个一维数组，每个数组的大小都比前一个数组+1，你必须搜索它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:08:27.263

看例子：

```
 |0|1|2|3|4|5|
0| | | | | | |
1|X| | | | | |
2|X|X| | | | |
3|X|X|X| | | |
4|X|X|X|X| | |
5|X|X|X|X|X| | 
```

这个矩阵是上三角形的，用 X 标记的单元格都为零。
对于第 i 行 - 单元格 {i,0},{i,1}, ... , {i,i-1} 必须为零。

所以这很容易：

```
bool isUpperTriangle = true; // be optimistic!
for (int i = 1; i < SIZE && isUpperTriangle; ++i) // rows
    for (int j = 0; j < i && isUpperTriangle; ++j) // columns - see example
        if (m[i][j] != 0) 
            isUpperTriangle = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:08:59.977

我认为这可能会满足您的需求。注意：这假设矩阵是**square**。如果不是（即`m!=n`）你应该立即返回 false：

```
bool upper = true;
for (i=1; i<m && upper; ++i)
   for (j=0; j<i && (upper = (0 == a[i][j])); ++j); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:09:52.637

您是否考虑过使用内置此功能的矩阵库？我经常使用 Eigen 库，我发现它的语法非常易于使用 - 他们也有一个简短而有用的教程，可以让我很快熟悉。

[http://eigen.tuxfamily.org/index.php?title=Main_Page](http://eigen.tuxfamily.org/index.php?title=Main_Page)

# web-services - 使用 Windows 任务计划程序在控制台应用程序中调用 Web 服务

> ID：13387131
> 
> 赞同：0
> 
> 时间：2012-11-14T20:54:14.670
> 
> 标签：web-services, permissions, scheduled-tasks, console-application, network-service

我需要将 sql server 数据库与托管在另一个 Web 服务器上的数据同步。我编写了一个 C# 控制台应用程序来调用 Web 服务，从而为我提供托管在其他 Web 服务器上的数据。我在 Windows Server 2008 R2 企业版的“服务器管理器”中的任务计划程序中设置了每 10 分钟运行一次的作业。

如果我自己运行控制台应用程序，那么一切都会正常运行。如果我使用我的用户名在任务计划程序中运行它，它也会正常运行。但是，如果我使用 NETWORK SERVICE 用户运行它，这是我需要做的，那么一旦我尝试联系 Web 服务，应用程序就会停止运行。

我在哪里授予 NETWORK SERVICE 调用 Web 服务的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:13:00.367

原来他们是我公司服务器上的本地服务不允许调用web服务。我需要创建一个新的内部帐户。感谢雷内的帮助。

# c# - 正则表达式检查字符串是否在 C# 中可能包含嵌套括号的特定模式内

> ID：13387132
> 
> 赞同：2
> 
> 时间：2012-11-14T20:54:23.787
> 
> 标签：c#, regex

我一直在尝试编写一个代码来检查给定的字符串是否包含具有特定模式的特定字符串。准确地说，例如：

```
string mainString = @"~(Homo Sapiens means (human being)) or man or ~woman"
List<string> checkList = new List<string>{"homo sapiens","human","man","woman"}; 
```

现在，我想提取

```
"homo sapiens", "human" and "woman" but NOT "man" 
```

从上面的列表中，因为它们遵循模式，即字符串后跟〜或括号内以〜开头的字符串之一。到目前为止，我想出了：

```
string mainString = @"~(Homo Sapiens means (human being)) or man or ~woman"
List<string> checkList = new List<string>{"homo sapiens","human","man","woman"};
var prunedList = new List<string>();
foreach(var term in checkList)
{
   var pattern = @"~(\s)*(\(\s*)?(\(?\w\s*\)?)*" + term + @"(\s*\))?";
   Match m = Regex.Match(mainString, pattern);
   if(m.success)
   {
      prunedList.Add(term);
   }
 } 
```

但是这种模式并不适用于所有情况......有人可以建议我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:38:04.313

我写了一个简单的解析器，它适用于你给出的例子。

我不知道以这种模式结尾的字符串的预期行为是什么：（ `~(some words`即，没有有效开头的右括号）

我相信你可以清理一些...

```
private bool Contains(string source, string given)
{
    return ExtractValidPhrases(source).Any(p => RegexMatch(p, given));
}

private bool RegexMatch(string phrase, string given)
{
    return Regex.IsMatch(phrase, string.Format(@"\b{0}\b", given), RegexOptions.IgnoreCase);
}

private IEnumerable<string> ExtractValidPhrases(string source)
{
    bool valid = false;
    var parentheses = new Stack<char>();
    var phrase = new StringBuilder();

    for(int i = 0; i < source.Length; i++)
    {
        if (valid) phrase.Append(source[i]);

        switch (source[i])
        {
            case '~':
                valid = true;
                break;

            case ' ':
                if (valid && parentheses.Count == 0)
                {
                    yield return phrase.ToString();
                    phrase.Clear();
                }
                if (parentheses.Count == 0) valid = false;
                break;

            case '(':
                if (valid)
                {
                    parentheses.Push('(');
                }
                break;

            case ')':
                if (valid)
                {
                    parentheses.Pop();
                }
                break;
        }
    }

    //if (valid && !parentheses.Any()) yield return phrase.ToString();
    if (valid) yield return phrase.ToString();
} 
```

以下是我使用的测试：

```
// NUnit tests
[Test]
[TestCase("Homo Sapiens", true)]
[TestCase("human", true)]
[TestCase("woman", true)]
[TestCase("man", false)]
public void X(string given, bool shouldBeFound)
{
    const string mainString = @"~(Homo Sapiens means (human being)) or man or ~woman";

    Assert.AreEqual(shouldBeFound, Contains(mainString, given));
}

[Test]
public void Y()
{
    const string mainString = @"~(Homo Sapiens means (human being)) or man or ~woman";
    var checkList = new List<string> {"homo sapiens", "human", "man", "woman"};
    var expected = new List<string> { "homo sapiens", "human", "woman" };

    var filtered = checkList.Where(s => Contains(mainString, s));

    CollectionAssert.AreEquivalent(expected, filtered);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T22:33:57.770

平衡括号的语言不规则，因此您无法使用 RegEx 完成您想要的。更好的方法是使用带有几个计数器的传统字符串解析 - 一个用于打开括号，一个用于关闭括号 - 或堆栈来创建类似于下推自动机的模型。

要更好地了解这个概念，请查看维基百科上的 PDA。[http://en.wikipedia.org/wiki/Pushdown_automaton](http://en.wikipedia.org/wiki/Pushdown_automaton)

下面是一个使用堆栈在最外面的括号内获取字符串的示例（伪代码）。

```
 Stack stack = new Stack();
 char[] stringToParse = originalString.toCharArray();

 for (int i = 0; i < stringToParse.Length; i++)
 {
      if (stringToParse[i] == '(')
            stack.push(i);
      if (stringToParse[i] == ')')
         string StringBetweenParens = originalString.GetSubstring(stack.pop(), i);
 } 
```

当然，这是一个人为的例子，需要一些工作来进行更严格的解析，但它为您提供了如何进行解析的基本概念。我遗漏了类似的东西；正确的函数名称（现在不想查找它们），如何在嵌套括号中获取文本，例如从字符串“（外部（内部））”中获取“内部”（该函数将返回“外部（内部） )")，以及如何存储返回的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T19:30:12.877

仅仅出于学术原因，我也想介绍正则表达式解决方案。大多数情况下，因为您可能正在使用唯一能够解决此问题的正则表达式引擎。

在解决了一些关于 .NET 独特功能组合的[有趣问题](https://stackoverflow.com/questions/13389560/balancing-groups-in-variable-length-lookbehind)之后，下面是可以为您提供所需结果的代码：

```
string mainString = @"~(Homo Sapiens means (human being)) or man or ~woman";
List<string> checkList = new List<string> { "homo sapiens", "human", "man", "woman" };

// build subpattern "(?:homo sapiens|human|man|woman)"
string searchAlternation = "(?:" + String.Join("|", checkList.ToArray()) + ")";

MatchCollection matches = Regex.Matches(
    mainString,
    @"(?<=~|(?(Depth)(?!))~[(](?>[^()]+|(?<-Depth>)?[(]|(?<Depth>[)]))*)"+searchAlternation,
    RegexOptions.IgnoreCase
); 
```

现在这是如何工作的？首先，.NET 支持平衡组，允许检测正确嵌套的模式。每次我们使用命名捕获组（如`(?<Depth>somepattern)`）捕获某些内容时，它不会覆盖最后一次捕获，而是被推入堆栈。我们可以使用 . 从该堆栈中弹出一个捕获`(?<-Depth>)`。如果堆栈为空（就像在当前位置不匹配的东西），这将失败。我们可以使用 . 检查堆栈是否为空`(?(Depth)patternIfNotEmpty|patternIfEmpty)`。

除此之外，.NET 拥有唯一支持可变长度后视的正则表达式引擎。如果我们可以一起使用这两个功能，我们可以查看我们想要的字符串之一的左侧，看看`~(`当前嵌套结构之外是否有某个地方。

但这里有一个问题（见上面的链接）。Lookbehinds 在 .NET 中从右到左执行，这意味着我们需要推动关闭括号并在遇到打开括号时弹出，而不是相反。

所以这里是对那个凶残的正则表达式的一些解释（如果你从下到上阅读后面的内容会更容易理解，就像 .NET 会做的那样）：

```
(?<=              # lookbehind
  ~               # if there is a literal ~ to the left of our string, we're good
|                 # OR
  (?(Depth)(?!))  # if there is something left on the stack, we started outside
                  # of the parentheses that end end "~("
  ~[(]            # match a literal ~(
  (?>             # subpattern to analyze parentheses. the > makes the group
                  # atomic, i.e. suppresses backtracking. Note: we can only do
                  # this, because the three alternatives are mutually exclusive
    [^()]+        # consume any non-parens characters without caring about them
  |               # OR
    (?<-Depth>)?  # pop the top of stack IF possible. the last ? is necessary for
                  # like "human" where we start with a ( before there was a )
                  # which could be popped.
    [(]           # match a literal (
  |               # OR
    (?<Depth>[)]) # match a literal ) and push it onto the stack
  )*              # repeat for as long as possible
)                 # end of lookbehind
(?:homo sapiens|human|man|woman)
                  # match one of the words in the check list 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T21:21:40.787

使用正则表达式是不可能的。您应该放弃使用它们的想法并使用正常的字符串操作，例如`IndexOf`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T22:15:49.123

括号检查是一种[上下文无关的语言](http://en.wikipedia.org/wiki/Context-free_language)或语法，需要堆栈进行检查。正则表达式适用于[正则语言](http://en.wikipedia.org/wiki/Regular_language)。它们没有内存，因此不能用于此类目的。

要检查这一点，您需要扫描字符串并计算括号：

*   初始化`count`为 0
*   扫描字符串
    *   如果当前字符是`(`增量`count`
    *   如果当前字符是`)`减量`count`
    *   如果`count`为负，则引发括号不一致的错误；例如，`)(`
*   最后，如果`count`是肯定的，那么有一些未闭合的括号
*   如果`count`为零，则测试通过

或者在 C# 中：

```
public static bool CheckParentheses(string input)
{
    int count = 0;
    foreach (var ch in input)
    {
        if (ch == '(') count++;
        if (ch == ')') count--;

        // if a parenthesis is closed without being opened return false
        if(count < 0)
            return false;
    }

    // in the end the test is passed only if count is zero
    return count == 0;
} 
```

您会看到，由于正则表达式无法计数，因此它们无法检查此类模式。

# java - 有没有办法向 Eclipse 添加自定义类模板？

> ID：13387133
> 
> 赞同：3
> 
> 时间：2012-11-14T20:54:23.787
> 
> 标签：java, eclipse, templates

这是场景。我经常创建遵循某种模式的类。所有类都使用我希望始终覆盖的某些方法（包括构造函数）扩展了一个基本抽象类（不受我的控制）。我想右键单击我的包名，单击新建，然后单击“Foo Class”。然后我会在我的项目中添加一个类，但使用“Foo”模板而不是标准类模板。我知道我可以更改课程模板，但我不想为所有课程都更改它。如果不编写完整的扩展，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:07:39.993

您可以使用编辑器模板创建一个新模板并使用它。

转到 Preferences->Java->Editor->Templates 并在那里创建您的模板。

然后创建一个新的类文件并应用您的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:09:41.687

抱歉不行。您想要实现的目标需要编写一个 Eclipse 插件。

我建议设置一个模板（在 Preferences | Java | Editor | Templates）并给它一个简短有用的名称来描述您的场景。每当您想编写一个额外的模板类时，您可以创建一个新类，按 Ctrl+A、Del（全选并删除），然后键入“name Ctrl+Space”并按照配置将模板放在那里。

附言。我真的会审查您的要求，目前想不出一种有效的方法，这需要编写许多类似的类，而没有有效的方法来删除您即将引入的代码重复。

# java - 确定 Spring Beans 可用的属性？

> ID：13387134
> 
> 赞同：0
> 
> 时间：2012-11-14T20:54:35.130
> 
> 标签：java, spring

在 Spring Framework 中，您如何确定哪些“属性”和其他相关值可以在 context.xml 文件中设置？比如我需要设置一个TransactionManager的隔离级别。那会是：

```
<property name="isolation" value="SERIALIZABLE" />
<property name="isolation_level" value="Isolation.SERIALIZABLE" /> 
```

或其他一些价值观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:58:24.433

每个 bean 代表一个类，您可以通过`class=""`属性轻松找到它。现在您只需打开该类的 JavaDoc 或源代码并查找所有设置器（遵循`setFooBar()`命名约定的方法）。您去除`set`前缀并取消大写第一个字符，使其成为`fooBar`. 这些是你的财产。

在您的特定情况下，您可能正在谈论[`PlatformTransactionManager`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/transaction/PlatformTransactionManager.html)它以及它具有的各种实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:07:17.627

将属性放入 . 属性文件是一种很好的处理方式。

首先在项目结构中定义一个属性文件。最好将 .properties 文件放在与 spring applicationContext.xml 相同的目录下。

您的属性文件可能如下所示：

```
isolation = "SERIALIZABLE"
isolation_level = Isolation.SERIALIZABLE 
```

您可以通过定义一个 spring bean 来访问这个属性文件，例如：

```
<bean id="applicationProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">

    <property name="location" value="classpath:YourProperties.properties"/>

</bean> 
```

最后，您可以在 Spring bean 中访问这些属性，例如：

```
 <bean id="BeanName" class="YourClass">

        <property name="PropertyName1" value="${isolation}"/>

        <property name="PropertyName" value="${isolation_level}"/>

    </bean> 
```

还有另一种使用注解注入这些值的方法。

# django - 将不同的值加载到 Django 表单的 ModelChoiceField 中

> ID：13387136
> 
> 赞同：1
> 
> 时间：2012-11-14T20:54:37.360
> 
> 标签：django

我正在尝试将不同的值列表加载到`ModelChoiceField`.

```
class myform(ModelForm):
    content = forms.FileField()
    def distinct_mans():
        manufacturers = UniPart.objects.all().values('manufacturer').distinct()
        return manufacturers
    manufacturer = forms.ModelChoiceField(queryset=distinct_mans) 
```

澄清一下，制造商是 UniPart 表中的一个字段。我想获取所有不同的制造商并将其放在下拉菜单中。

但是我收到了这个错误：

```
'function' object has no attribute 'all' 
```

追溯：

```
Template error:
In template /Users/nb/Desktop/modelstore/mymodels/templates/mymodels/add_model.html, error at line 24
   'function' object has no attribute 'all'
   14 :             {% csrf_token %}

   15 :             <br>

   16 :             <div style="float: left; width: 200px">

   17 :             <h6>Model Name</h6>

   18 :             <br>

   19 :             {{ formtoaddmodel.modelname }}

   20 :             <br>

   21 :             <br>

   22 :             <h6>Manufacturer</h6>

   23 :             <br>

   24 :              {{ formtoaddmodel.manufacturer }} 

Traceback:

    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
      111\.                         response = callback(request, *callback_args, **callback_kwargs)
    File "/Users/nb/Desktop/modelstore/mymodels/views.py" in add_model
      652\.          }, context_instance=RequestContext(request,{}))
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/shortcuts/__init__.py" in render_to_response
      20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader.py" in render_to_string
      176\.         return t.render(context_instance)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
      140\.             return self._render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
      62\.     return self.nodelist.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
      823\.                 bit = self.render_node(node, context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
      74\.             return node.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader_tags.py" in render
      123\.         return compiled_parent._render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
      62\.     return self.nodelist.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
      823\.                 bit = self.render_node(node, context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
      74\.             return node.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader_tags.py" in render
      123\.         return compiled_parent._render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
      62\.     return self.nodelist.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
      823\.                 bit = self.render_node(node, context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
      74\.             return node.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader_tags.py" in render
      123\.         return compiled_parent._render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
      62\.     return self.nodelist.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
      823\.                 bit = self.render_node(node, context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
      74\.             return node.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader_tags.py" in render
      62\.             result = block.nodelist.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
      823\.                 bit = self.render_node(node, context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
      74\.             return node.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader_tags.py" in render
      62\.             result = block.nodelist.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
      823\.                 bit = self.render_node(node, context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
      74\.             return node.render(context)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render
      87\.             output = force_unicode(output)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/utils/encoding.py" in force_unicode
      71\.                 s = unicode(s)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/forms/forms.py" in __unicode__
      411\.         return self.as_widget()
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/forms/forms.py" in as_widget
      458\.         return widget.render(name, self.value(), attrs=attrs)
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/forms/widgets.py" in render
      547\.         options = self.render_options(choices, [value])
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/forms/widgets.py" in render_options
      570\.         for option_value, option_label in chain(self.choices, choices):
    File "/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/forms/models.py" in __iter__
      896\.             for obj in self.queryset.all():

    Exception Type: AttributeError at /mymodels/add
    Exception Value: 'function' object has no attribute 'all' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:00:16.963

好吧，queryset 参数需要一个查询集，而不是一个函数。

但该功能是不必要的 - 你可以这样做：

```
manufacturer = forms.ModelChoiceField(queryset=UniPart.objects.all().values('manufacturer').distinct()) 
```

这应该完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T20:59:52.740

`queryset`显然不需要调用。幸运的是，你不需要一个。只需构造一次查询集并将其作为`queryset`参数直接传递给`ModelChoiceField`.

# jmeter - 如何绕过 Jmeter 中的会话数据

> ID：13387147
> 
> 赞同：4
> 
> 时间：2012-11-14T20:55:16.517
> 
> 标签：jmeter

我正在研究（应该是）一个简单的 Jmeter 脚本，其目标是将大量数据加载到软件系统中进行测试。

Jmeter 记录了大量特定于会话的信息，当然，这些信息不能真正“回放”以使其正常工作。所有目标应用程序的 url 构造都在后台处理，并在响应中发送。有没有办法像运行 QTP/Selenium 测试那样简单地“忽略”所有这些会话数据和或多或少的脚本 JMeter？

为了尝试澄清，我们有发布特定于会话的 url 的按钮。我希望能够“单击按钮”并让事情自然地进行，而无需处理任何会话细节。

对不起，“单击按钮”的比喻，我知道该工具不与 GUI 交互，但这是我能想到的最好的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:09:59.423

如果不进行后端更改（例如禁用 cookie/关闭安全令牌），则无法避免会话数据。这两者都不是这里的选择。

我通过捕获所有必要的会话令牌并正确参数化我的脚本来处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:37:27.560

出于性能原因，JMeter 不解析 HTML 并执行 Javascript（这需要很多时间）。相反，JMeter 在 HTTP 协议级别工作。因此，它使用的系统资源比 Selenium 测试少得多。

您必须自己构建这些 HTTP 请求，并且必须处理会话细节。也许，[HTTP 代理服务器](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)会让您的生活更轻松。

# .net - 如何更改网络图表上的图例符号？

> ID：13387150
> 
> 赞同：4
> 
> 时间：2012-11-14T20:55:24.473
> 
> 标签：.net, vb.net, webchartcontrol

我正在使用 Carlos Aguilera 的[WebChart](http://www.carlosag.net/tools/webchart/)控件，并希望更改图例标记以匹配我在线上使用的线标记。我有以下图表：

![从 webchart 生成的图像](../Images/ff8872140c9cb5b11a81663df0f84048.png)

这是我的图例代码：

```
 objLegend = New WebChart.ChartLegend
  objLegend.Font = New Font("Verdana", 8)
  objLegend.Width = 150
  objLegend.Position = LegendPosition.Right
  objLegend.Background.Color = Color.LightYellow
  objLegend.Background.Type = InteriorType.Solid
  objLegend.Background.WrapMode = Drawing2D.WrapMode.Tile

  objEngine.Legend = objLegend 
```

以及设置线标记的代码

```
 Select Case intColorIndex Mod 5

        Case 0
             objLineChart.LineMarker = New CircleLineMarker(6, Color.Red, Color.Black)

        Case 1
             objLineChart.LineMarker = New DiamondLineMarker(6, Color.Red, Color.Black)
        Case 2
             objLineChart.LineMarker = New SquareLineMarker(6, Color.Red, Color.Black)
        Case 3
             objLineChart.LineMarker = New TriangleLineMarker(6, Color.Red, Color.Black)
        Case 4
             objLineChart.LineMarker = New XLineMarker(6, Color.Red, Color.Black)

      End Select 
```

这些地方似乎都没有设置图例标记类型的属性，并且对象中似乎也没有选项`ChartEngine`。

图例文本是每行设置的，但唯一可访问的属性`LineChart`是文本，似乎没有符号选项。

是否可以使用此控件更改图例标记？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T16:44:05.367

在[http://www.carlosag.net/tools/webchart/sample-pie-chart](http://www.carlosag.net/tools/webchart/sample-pie-chart)上，图例符号看起来像是在标记中设置的：

```
<web:chartcontrol> 
    ...
    <legend width="110" font="Tahoma, 6.75pt">
        <border endcap="Flat" dashstyle="Solid" 
            startcap="Flat" color="Black" width="1" 
            linejoin="Miter"></border>
        <background type="Solid" startpoint="0, 0" 
            forecolor="Black" endpoint="0, 100" color="White"
            hatchstyle="Horizontal"></background>
    </legend>
</web:chartcontrol> 
```

您可以尝试通过操作`<legend>`内部元素来设置图例符号`<web:chartcontrol>`。

# installation - WiX 克服“无法访问网络位置”错误

> ID：13387152
> 
> 赞同：2
> 
> 时间：2012-11-14T20:55:27.350
> 
> 标签：installation, wix, windows-installer

目前正在尽我所能使用 Wix 为我们的 C# 应用程序安装一个安装程序，但遇到了以下问题。

默认情况下，应用程序安装在 ProgramFilesFolder 中，但是安装程序允许用户指定自定义安装目录/文件夹来覆盖默认位置。我遇到的问题是，当从运行安装程序的系统中删除安装文件夹时，安装程​​序失败并显示“无法访问网络位置”消息，而理想情况下我希望它从“修复”或“重新安装”开始。

用户无法继续通过此消息阻止他们卸载、安装或运行修复。用户无法通过此消息以任何方式继续操作。

以下是我正在使用的 Wix 代码：

```
<!-- Obtaining the installation directory from the registry -->
<Property Id="APPLICATIONFOLDER">
      <RegistrySearch Id="RegistrySearchAppFolder" Type="raw" Root="HKLM" 
                      Win64="no" Key="Software\$(var.Manufacturer)\$(var.ProductName)"
                      Name="install_location" />
</Property>

<!-- Setup the main folders -->
<Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder">
            <Directory Id="APPLICATIONFOLDER" Name="$(var.ProductName)" />        
      </Directory>
</Directory> 
```

我该如何优雅地处理这种情况？也许我没有使用正确的代码，任何帮助表示赞赏。

# eclipse - Eclipse 搜索工作区外的目录？

> ID：13387153
> 
> 赞同：4
> 
> 时间：2012-11-14T20:55:36.063
> 
> 标签：eclipse, search, directory, workspace

我正在尝试在 Windows 7 上的 Eclipse 3.0.2 中搜索工作区之外的文件夹和文件。这些链接有帮助：

[http://eclipse.dzone.com/articles/5-best-eclipse-plugins-system](http://eclipse.dzone.com/articles/5-best-eclipse-plugins-system)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=192767](https://bugs.eclipse.org/bugs/show_bug.cgi?id=192767)

不幸的是，我只能让桌面搜索工作，而不是系统搜索。诺基亚系统搜索下载链接我都试过了：

[https://bugs.eclipse.org/bugs/attachment.cgi?id=106032](https://bugs.eclipse.org/bugs/attachment.cgi?id=106032)

[http://www.steinerberg.com/EmbeddedComponents/System%20Search/com.nokia.search.system_2.0.0.201102171254.jar](http://www.steinerberg.com/EmbeddedComponents/System%20Search/com.nokia.search.system_2.0.0.201102171254.jar)

我将 com.nokia.search.system 或 com.nokia.search.system_2.0.0.201102171254.jar 放在 c:\eclipse-php\plugins 中。我还尝试将 com.nokia.search.system.feature 放在 c:\eclipse-php\features 中，但它仍然无法正常工作，因为该文件夹是空的，所以我在 eclipse 的错误日志中收到了这条消息：

!MESSAGE 无法在目录中找到 feature.xml：C:\eclipse-php\features\com.nokia.search.system-feature

我认为在 Mac 上的 TextWrangler 和 Xcode 等工具中进行目录搜索是理所当然的，但我很惊讶 Eclipse 开发人员没有在他们的 IDE 中包含任意文件搜索。

另一种可能性是以某种方式将 C 驱动器添加到 Eclipse 的工作区。我主要需要这个来搜索梨等目录。我想一个免费的应用程序可能是一个不错的解决方案，如果有办法以某种方式将它与 Eclipse 联系起来，那会很有帮助。

提前感谢您提供的任何帮助，

扎克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T23:55:54.293

如果我理解您的问题，您正在尝试在 Eclipse 工作区之外搜索文件夹/文件。我的建议是通过新建 -> 向导创建一个新文件夹，将其选择为“链接”文件夹，并将其指向文件系统中要包含在搜索中的文件夹。

假设您希望您的 C 盘包含在搜索中。创建新文件夹，单击打开更多选项的高级并选择链接到备用位置（链接文件夹），然后单击浏览并选择您的 c:\ 驱动器。这将在您的工作区中创建文件夹，该文件夹是指向 c 驱动器的指针，并将包含在搜索查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T20:16:31.197

首先，邓肯，谢谢你的回答。对于原始问题中描述的目的来说，这是最好的。我看到这个帖子有点老了，但我想提供一些有用的建议：

1.  额外的插件只会减慢 Eclipse。它已经有很多插件。我尽量保持我的苗条（STS 的精简版本）并使用外部工具来执行我在核心开发之外执行的任务，例如版本控制 - 我手动删除了所有 Git 和 SVN 插件。

2.  链接文件夹效果最好，因为您缩小了搜索范围。如果您尝试搜索整个文件系统，则最好使用您的操作系统及其专门为此设计的内置实用程序。它们速度更快，并且支持您在 Eclipse 中无法执行的各种搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T22:54:45.077

我没有在 3.0.2 上尝试过这个，但是在尝试设置一个新的 Eclipse 并找出我之前拥有的哪个插件允许我这样做之后，我遇到了这个问题。

原来您需要 RSE（远程系统资源管理器），它可以为您提供远程搜索，并且您可以使用本地连接来选择本地计算机上的文件夹。

# php - 这个 mysqli 包装器对 SQL 注入安全吗？

> ID：13387155
> 
> 赞同：0
> 
> 时间：2012-11-14T20:55:46.203
> 
> 标签：php, mysqli, sql-injection

以下是包装器的外观：

```
<?php

    Class mysqliwrapper{
        protected $_mysqli;
        protected $_debug;

        public function __construct($host, $username, $password, $database, $debug) {
            $this->_mysqli = new mysqli($host, $username, $password, $database);
            $this->_debug = (bool) $debug;
            if (mysqli_connect_errno()) {
                if ($this->_debug) {
                    echo mysqli_connect_error();
                    debug_print_backtrace();
                }
                return false;
            }
            return true;
        }

        public function q($query) {
            if ($query = $this->_mysqli->prepare($query)) {
                if (func_num_args() > 1) {
                    $x = func_get_args();
                    $args = array_merge(array(func_get_arg(1)),
                        array_slice($x, 2));
                    $args_ref = array();
                    foreach($args as $k => &$arg) {
                        $args_ref[$k] = &$arg; 
                    }
                    call_user_func_array(array($query, 'bind_param'), $args_ref);
                }
                $query->execute();

                if ($query->errno) {
                  if ($this->_debug) {
                    echo mysqli_error($this->_mysqli);
                    debug_print_backtrace();
                  }
                  return false;
                }

                if ($query->affected_rows > -1) {
                    return $query->affected_rows;
                }
                $params = array();
                $meta = $query->result_metadata();
                while ($field = $meta->fetch_field()) {
                    $params[] = &$row[$field->name];
                }
                call_user_func_array(array($query, 'bind_result'), $params);

                $result = array();
                while ($query->fetch()) {
                    $r = array();
                    foreach ($row as $key => $val) {
                        $r[$key] = $val;
                    }
                    $result[] = $r;
                }
                $query->close(); 
                return $result;
            } else {
                if ($this->_debug) {
                    echo $this->_mysqli->error;
                    debug_print_backtrace();
                }
                return false;
            }
        }

        public function handle() {
            return $this->_mysqli;
        }
    }

    ?> 
```

这工作正常：

```
$w = new mysqliwrapper("localhost","root","","testdb",1);

$r = $w->q("SELECT * FROM `testdb_news` WHERE `id`=? AND `lang`=?","is",16,'en'); 
```

但是，这不会：

```
$r = $w->q("INSERT INTO `testdb_news` ('lang','title','content','date') VALUES (?,?,?,?)","ssss","en","NewTitle","NewContent",mktime()); 
```

为什么？我应该只将 ?-s 用于 SELECT 语句吗？然后像这样插入？

```
$r = $w->q("INSERT INTO `testdb_news` (lang,title,content,date) VALUES ('en','newTitle','newContent','".mktime()."')"); 
```

这安全吗？这个类真的安全吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:14:32.953

对注射安全。看到这个问题有类似的问题[参数化查询](https://stackoverflow.com/questions/4500070/parameterized-query)

# java - 如何在eclipse中将jar包添加到项目中？

> ID：13387158
> 
> 赞同：0
> 
> 时间：2012-11-14T20:55:47.587
> 
> 标签：java, eclipse, maven

我在 pom.xml 中添加了一个指定 mainClass 的部分，并允许它实质上创建一个可执行的 jar。我还包含了一些 Maven 管理的依赖项。它执行得很好，但是当它到达需要知道由某人（即，不是来自 Maven）内部制作的 jar 包的位置的代码部分时无法运行。在eclipse的项目中，我把jar放在src/lib中，我的代码在src/main/java中。我必须选择属性和 Java 构建路径，并在此处指定 jar 的 src/lib 位置以使其能够编译。但是，尝试运行 java -jar name.jar 会失败并抱怨，因为它无法从 src/lib jar 导入类。由于它不是 maven 的东西，我如何确保这是该项目的依赖项并且在项目的类路径中可以看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:06:11.400

maven 的问题是 maven 必须控制所有依赖项，其中包括您要引用的这个 jar。这并不意味着您必须使用 maven 构建其他 jar，您可以 mvn 将其安装在本地存储库中，或使用 Artifactory 之类的工具将其放入私有远程存储库中。我知道通过 Artifactory 安装常规 jar 会为 jar 创建一个 pom 文件，从那时起，您可以像对待任何其他 maven 依赖项一样对待 jar。

# java - 从 Java 中的 SOAPBody 获取原始 XML（对于骆驼流？）

> ID：13387160
> 
> 赞同：2
> 
> 时间：2012-11-14T20:55:51.390
> 
> 标签：java, soap, apache-camel

如何从 SOAPBody 获取原始 xml？也许一些实用函数只会给我 Body xml（不是正文）。我不想重新发明代码来遍历每个节点/子节点 - 它可能已经存在于某些实用程序中？

骆驼流有一个数据转换器“soapjxb”，但我不需要映射/解组到 java 对象。

为什么我需要那个？：清理操作

其中一个客户端应用程序（我正在尝试使用 ApacheCamel 集成）正在向我的 mq 发送一条 xml 消息，该消息嵌入在一个肥皂信封中（“不必要的噪音”），我无法更改客户端应用程序. 我必须丢弃肥皂信封并在肥皂体内获取 xml 并将其发布到另一个 jmsqueue。

PS：我知道如何从 SOAPMessage 获取原始 xml，如此处所述：[Getting Raw XML From SOAPMessage in Java](https://stackoverflow.com/questions/522395/getting-raw-xml-from-soapmessage-in-java)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:26:36.843

如果您有 XML 中的 SOAPEnvelope，那么只需使用[xpath](http://camel.apache.org/xpath.html)来隔离您想要的 XML 并将其发送出去......

```
.setBody(xpath("//SOAPBody"))... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-12-03T13:28:25.620

使用 xslt 删除命名空间并将其视为普通 xml。

<xsl:stylesheet 版本="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" /><xsl:template match=" *"><xsl:element name="{local-name()}"><xsl:apply-templates select ="@* | node()" /></xsl:element></xsl:template><xsl:template match="@*"> <xsl:attribute name="{local-name()}"> <xsl:value-of select=" 。” /></xsl:attribute></xsl:template><xsl:template match="text() | comment() | processing-instruction()"> <xsl:

将 > 替换为大于，将 < 替换为小于 ans 保存为 xslt 并用于转换以删除肥皂名称空间。

# ruby-on-rails - Current_user 未正确启动

> ID：13387164
> 
> 赞同：0
> 
> 时间：2012-11-14T20:56:09.470
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

我知道关于这个话题有很多类似的问题，但没有一个答案是相关的。

我决定听从 Michael Hartl 的建议并实现我自己的身份验证代码，而不是使用预定义的包。但是我在 railstutorial 的解决方案中遇到了问题。

我已经直接使用 github 中的教程代码对我的代码进行了双重/三重检查，据我所知，我正在正确实施，但我有一些大问题。

**Current_user 未正确启动**

助手/sessions_helpers.rb

```
 ...
    def current_user=(user)
      @current_user = user
    end

    def current_user
      #this line of code will change in the tutorial section 9 but its okay for now 
      @current_user ||= User.find_by_remember_token(cookies[:remember_token])

    end

    def signed_in?
      !current_user.nil?
    end 
```

任何在视图中使用助手的代码`<% if signed_in? %>` 总是返回 false，即使身份验证已经成功。任何通过用户方法访问数据的尝试都`current_user.first_name.capitalize`失败了`undefined method ``first_name' for nil:NilClass`

请注意，这仍然是教程中的第 8 节（还不是第 9 节，当基础知识不起作用时，我真的不想在这种身份验证情况下添加更多代码。感谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:15:56.807

听起来有些单元测试将有助于缩小您的关注范围并突出显示哪些部分工作正常，哪些部分不正常。或者，如果您愿意，可以从集成测试开始。您提供的描述听起来像是您正在通过浏览器进行测试，并且可能正在查看日志。

我想你会发现边走边写测试是值得的。它还可以让您更容易地查看您以后是否破坏了曾经有用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:11:10.183

首先，将“User.find_by_remember_token(cookies[:remember_token])”替换为有效的内容，以确保您的调用正常工作。

此外，您的方法都是会话上的所有方法，因此只能在会话控制器中使用。

如果您希望它们在所有视图中都可以访问，请将方法放在 application_helper.rb 中。

# node.js - ConnectJS/ExpressJS url 处理程序的通用预处理程序？

> ID：13387167
> 
> 赞同：0
> 
> 时间：2012-11-14T20:56:12.190
> 
> 标签：node.js, express, connect

在我的 ExpressJS 应用程序中，我的几个 urls 处理程序具有以下逻辑：

1.  查看用户是否有权访问资源
2.  如果是，请继续
3.  否则，重定向到主处理程序。

有没有办法通过 ConnectJS 或 ExpressJS 为某些 url 处理程序插入预处理程序？

我知道我可以在全局范围内为所有处理程序执行此操作（由于 IE 损坏的 XDR，我这样做是为了插入丢失的标头）。

但是，我可以为一部分处理程序执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:23:45.457

I do something like this:

lib/auth.js

```
exports.checkPerm = function(req, res, next){
  //do some permission checks
  if ( authorized ) {
     next();
  } else {
     res.render('/401');
     return;
  }
}; 
```

app.js

```
var auth = require('./lib/auth');
...
app.get('/item/:itemid', auth.checkPerm, routes.item.get); 
```

You can stack middleware before your final route handler like the above line has. It has to have same function signature and call next();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T22:35:46.850

如果我正确理解了这个问题，您就知道：

```
// This is too general
app.use(myAuthMiddleware()); 
```

而且您知道您可以手动将其添加到某些 url-handlers：

```
app.get('/user/profile/edit', myAuthMiddleware(), function(req,res){
  /* handle stuff */ });
// but doing this on all your routes is too much work. 
```

您可能不了解[express 的安装功能](http://expressjs.com/api.html#app.use)：

```
// Matches everything under /static/** Cool.
app.use('/static', express.static(__dirname + '/public')); 
```

或[app.all()](http://expressjs.com/api.html#app.all)：

```
// requireAuthentication can call next() and let a more specific
// route handle the non-auth "meat" of the request when it's done.
app.all('/api/*', requireAuthentication); 
```

# javascript - 如何在 Win8 上开始使用 js 进行游戏开发？

> ID：13387171
> 
> 赞同：4
> 
> 时间：2012-11-14T20:56:22.567
> 
> 标签：javascript, windows-8

有人可以指点我一些有用的文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T20:58:32.803

因此，根据您所谈论的游戏类型，有很大的回答空间，但这里有一些东西可以帮助您入门。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh452744](http://msdn.microsoft.com/en-us/library/windows/apps/hh452744)

[http://msdn.microsoft.com/en-us/library/windows/apps/hh452754](http://msdn.microsoft.com/en-us/library/windows/apps/hh452754)

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465158](http://msdn.microsoft.com/en-us/library/windows/apps/hh465158)

和一个代码示例。

[http://code.msdn.microsoft.com/windowsapps/JavaScript-and-HTML5-touch-d96f6031](http://code.msdn.microsoft.com/windowsapps/JavaScript-and-HTML5-touch-d96f6031)

# python - 使用 Python，如何以压缩前缀符号的形式评估表达式？

> ID：13387172
> 
> 赞同：4
> 
> 时间：2012-11-14T20:56:23.580
> 
> 标签：python, parsing, python-3.x

我目前正在一个名为 singpath 的网站上研究 python 问题集。问题是：

前缀求值 创建一个函数，以前缀符号的形式对算术表达式求值，没有空格或语法错误。表达式以字符串形式给出，表达式中的所有数字均为整数 0~9，运算符为 +（加）、-（减）、*（乘）、/（除）、%（取模），其中操作与 Python 中的操作相同。前缀表示法，也称为波兰表示法，是逻辑、算术和代数的一种表示法。它将运算符放在操作数的左侧。如果运算符的数量是固定的，则结果是缺少括号或其他括号的语法，仍然可以毫无歧义地解析。

* * *

这看起来很简单，但是字符串被压缩，输入中没有空格来拼接数据。如何在不导入模块的情况下将数据与字符串分开？此外，我如何使用数据结果来求解给定的方程？另请注意，Singpath 解决方案必须在**一个**不能使用标准 python 库中找不到的方法的函数中。这还包括在解决方案中声明的函数：S

例子：

```
>>> eval_prefix("+34")
7
>>> eval_prefix("*−567")
-7
>>> eval_prefix("-*33+2+11")
5
>>> eval_prefix("-+5*+1243")
14
>>> eval_prefix("*+35-72")
40
>>> eval_prefix("%3/52")
1 
```

请参阅我的观点，没有空格 D：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:14:45.833

好的，不像 alex jordan 的 lamba/reduce 解决方案那样时髦，但它不会因垃圾输入而窒息。这是一种递归下降解析器遇到冒泡排序的厌恶（我认为当它找到一个可解决的部分时，它可能比仅仅跳回开始更有效率。;）

```
import operator
def eval_prefix(expr):
    d = {'+': operator.add,
         '-': operator.sub,
         '*': operator.mul,
         '/': operator.div, # for 3.x change this to operator.truediv
         '%': operator.mod}
    for n in range(10):
        d[str(n)] = n
    e = list(d.get(e, None) for e in expr)
    i = 0
    while i + 3 <= len(e):
        o, l, r = e[i:i+3]
        if type(o) == type(operator.add) and type(l) == type(r) == type(0):
            e[i:i+3] = [o(l, r)]
            i = 0
        else:
            i += 1
    if len(e) != 1:
        print 'Error in expression:', expr
        return 0
    else:
        return e[0]

def test(s, v):
    r = eval_prefix(s)
    print s, '==', v, r, r == v

test("+34", 7)
test("*-567", -7)
test("-*33+2+11", 5)
test("-+5*+1243", 14)
test("*+35-72", 40)
test("%3/52", 1)
test("****", 0)
test("-5bob", 10) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T22:56:13.410

我认为这里的关键是“表达式中的所有数字都是整数 0~9”。所有数字都是个位数。您不需要空格来找出一个数字的结束位置和下一个数字的开始位置。正如 lckknght 所说，您可以通过它们的字符串索引直接访问这些数字。

要将字符串中的字符转换为整数进行计算，请使用 ord(ch) - 48（因为“0”的 ASCII 码为 48）。因此，要获取存储在输入位置 5 的数字，请使用 ord(input[5]) - 48。

要评估嵌套表达式，您可以递归调用函数。这里的关键假设是一个操作符总是恰好有两个操作符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T21:25:53.187

您的“单一功能”限制并不像您想象的那么糟糕。Python 允许在函数内部定义函数。最后，函数定义只不过是将函数分配给（通常是新的）变量。在这种情况下，我想你会想要使用递归。虽然这也可以在没有额外函数的情况下完成，但您可能会发现为它定义额外的递归函数更容易。这对您的限制没有问题：

```
def eval_prefix (data):
    def handle_operator (operator, rest):
        # You fill this in.
    # and this, too. 
```

这应该是足够的提示（如果你想使用递归方法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T21:50:33.463

那么，单线适合吗？Python3 中的 Reduce 隐藏在 functools 中有点 lispy :)

```
eval_prefix = lambda inp:\
            reduce(lambda stack, symbol:\
            (
              (stack+[symbol]) if symbol.isdigit() \
             else \
              (
                stack[:-2]+\
                [str(
                      eval(
                           stack[-1]+symbol+stack[-2]
                          )
                    )
                ]
              )
            ), inp[::-1], [])[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T21:20:44.060

您最有可能寻找的提示是“字符串是可迭代的”：

```
def eval_prefix(data):
    # setup state machine
    for symbol_ in data:
        # update state machine 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T21:29:15.407

分离字符串的元素很容易。所有元素都是单个字符长，因此您可以直接迭代（或索引）字符串以获取每个元素。或者，如果您希望能够操作这些值，您可以将字符串传递给`list`构造函数。

以下是一些如何工作的示例：

```
string = "*-567"

# iterating over each character, one at a time:
for character in string:
    print(character) # prints one character from the string per line

# accessing a specific character by index:
third_char = string[2] # note indexing is zero-based, so 3rd char is at index 2

# transform string to list
list_of_characters = list(string) # will be ["*", "-", "5", "6", "7"] 
```

至于如何解方程，我认为有两种方法。

一种是使您的函数递归，以便每个调用评估单个操作或文字值。这有点棘手，因为您只应该使用一个函数（如果您可以使用与主非递归函数不同的 API 调用递归辅助函数，那会容易得多）。

另一种方法是建立一堆值和操作，等待评估，同时对输入字符串进行一次迭代。考虑到单一功能的限制，这可能更容易。

# php - 函数中的预处理语句

> ID：13387178
> 
> 赞同：0
> 
> 时间：2012-11-14T20:56:49.467
> 
> 标签：php, mysqli

我有一个准备好的语句，它将向数据库中插入一个条目。该语句工作正常并插入条目。我将语句包装在一个函数中，调用该函数，它不再插入数据库。从函数调用这些语句有问题吗？旁注......我的最终目标是把这个函数作为一个方法放在一个类中。我正在尝试这样做，并开始进行故障排除，并确定错误是在放入功能时开始的。我的下一步是将其转移到班级中。我的代码中是否还有其他内容可以防止这种情况发生？

```
<?php

include 'main_connection.php';

function add() {
    $stmt = $mysqli->prepare("INSERT INTO user (name) VALUES (?)");
    $stmt->bind_param('s',$name);
    $name = "test";
    $stmt->execute();
    $stmt->close();

}

add();  

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:58:23.753

您有一个[可变范围](http://php.net/manual/en/language.variables.scope.php)问题。具体来说，`add()`不知道变量`$mysqli`或`$name`。

有很多方法可以解决这个问题。一个*快速*的建议是将参数传递给`add()`：

```
function add($mysqli, $name) {
  // your code
}

add($mysqli, $name); 
```

或者使用全局范围：

```
function add() {
  global $mysqli, $name;
  // your code
} 
```

**免责声明：**我也不提倡。参考以下 - [PHP 全局函数](https://stackoverflow.com/questions/5166087/php-global-in-functions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:00:00.927

```
function add($mysqli, $name) {
    $stmt = $mysqli->prepare("INSERT INTO user (name) VALUES (?)");
    $stmt->bind_param('s',$name);
    $name = "test";
    $stmt->execute();
    $stmt->close();

}

add($mysqli, $name); 
```

# php - php imagick注释抗锯齿

> ID：13387183
> 
> 赞同：2
> 
> 时间：2012-11-14T20:57:17.237
> 
> 标签：php, imagick, antialiasing

我有一个网络摄像头，想为图像添加一些注释，但抗锯齿效果很奇怪。我将尝试解释：

我有这样的图像：![源图像](../Images/df2f89ea69d038ac1b97244fe673b773.png)

然后我添加半透明矩形并在其上放置文本：

```
 //  add background black rectangle
        $draw->setFillColor('black'); 
        $draw->setFillOpacity(0.5);
        $draw->rectangle( 0, 10, $cam['width'], 70 );    // Draw the rectangle 
        //  add lead text
        $draw->setFont('ARIALBD.TTF');
        $draw->setFontSize(14);
        $draw->setFillColor('white');
        $draw->annotation(20, 35, $cam['text']);
        //  add timestamp
        $draw->setFont('ARIAL.TTF');
        $draw->setFontSize(12);
        $draw->setFillColor(new ImagickPixel('#f3ac01'));
        $draw->annotation(20, 50, date("Y-m-d H:i:s"));
        $img->drawImage($draw); 
```

得到这样的东西：

![添加文本](../Images/06790a0407abda7e093694abba556648.png)

嗯，但时间戳看起来很糟糕（看看分钟/秒）。尝试禁用抗锯齿：

```
$draw->setTextAntialias(false); 
```

现在它看起来仍然很丑（看几个小时），但现在它有锋利的边缘：

![抗锯齿关闭](../Images/e48b1cc975d972d5835fdf23ceb8b0f8.png)

我怎样才能得到智能抗锯齿的结果，像这样（我知道 PS 使用自己的抗锯齿，但 IMagickDraw 处理真正糟糕的结果）：

![想要这个](../Images/c2211e2c5f1a7acc74f55648ff6ffe9f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:11:20.690

对我来说，保存时它看起来更像是整个图像的压缩级别而不是抗锯齿，看看[setCompressionQuality](http://php.net/manual/en/imagick.setcompressionquality.php)，并调整压缩质量，直到避免图片中的“模糊”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:04:02.367

首先尝试不同的字体。这是[open sans](http://en.wikipedia.org/wiki/Open_Sans)（[另一个链接](http://viziblr.com/news/2012/1/14/the-open-sans-typeface-ndash-cool-sublime-and-free.html)）字体的示例。 ![在此处输入图像描述](../Images/e42575ecd6e7595a36c721c346702011.png)

# matlab - 在 Matlab R2010b 中将内联函数转换为 sym

> ID：13387185
> 
> 赞同：0
> 
> 时间：2012-11-14T20:57:33.740
> 
> 标签：matlab

我正在尝试将内联函数转换为 matlab R2010b 中的 sym ，但它不起作用。在 matlab 2008 中运行良好。这里的代码：

```
in = inline('t^2');
syms t real
sym(in);
??? Error using ==> sym.sym>tomupad at 2178
Conversion to 'sym' from 'inline' is not possible.

Error in ==> sym.sym>sym.sym at 111
                S.s = tomupad(x,''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:01:37.663

代替`inline`，您可以通过函数句柄使用匿名函数：

```
f = @(t) t.^2;
syms t
F = sym(f); 
```

这应该为您提供相同的内联功能/可移植性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:45:47.547

使用[http://www.mathworks.com/matlabcentral/fileexchange/33025](http://www.mathworks.com/matlabcentral/fileexchange/33025)

```
in = inline('t^2');
f0 = inline2sym(in);

EDU>> f0

t^2

EDU>> syms t
EDU>> diff(f0,t)

ans =

2*t 
```

# sql - 如何连接两个没有任何关系的表？

> ID：13387188
> 
> 赞同：0
> 
> 时间：2012-11-14T20:57:47.243
> 
> 标签：sql, sql-server

我有两张桌子，里面有两种不同类型的发票。我需要创建一个查询来计算两个表中每个客户的发票数量。

此外，每种发票类型都有其他表格，其中包含有关发票的信息，JOIN 语句添加到每个 SELECT 语句中。但是这两个表不共享任何详细的发票表。

所以这就是模式的样子：invoiceA 与 serviceInvoice 和 invoiceDetail 有关系。invoiceB 与 packageInvoice 和 supportInvoice 有关系。

我没有包含任何 JOIN，但这是我的查询的粗略概念。

```
SELECT
    i.client_id, COUNT(i.invoice_num)
FROM 
(
    SELECT client_id, invoice_num, cff_num FROM invoiceA
    UNION
    SELECT client_id, invoice_num, cff_num FROM invoiceB
)i
WHERE
    i.cff_num IS NULL
GROUP BY
    i.client_id 
```

这个查询看起来很奇怪而且效率低下，我想在 invoiceB 上做一个 LEFT JOIN，但是两个表中都有相同的 client_id 行。我能做些什么来优化它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:19:01.567

将其存储在视图中，您可以随时从中选择：

```
SELECT
    client_id,
    COUNT(*) AS 'count'
FROM invoiceA
WHERE
    cff_num IS NULL
GROUP BY
    client_id

UNION

SELECT
    client_id,
    COUNT(*) AS 'count'
FROM invoiceB
WHERE
    cff_num IS NULL
GROUP BY
    client_id 
```

# sql - 如何在 PostgreSql 的预订表中找到第一个空闲时间

> ID：13387189
> 
> 赞同：4
> 
> 时间：2012-11-14T20:57:48.233
> 
> 标签：sql, postgresql, schedule, postgresql-9.2

预订表包含预订开始日期、开始时间和持续时间。开始时间在工作日的 8:00 .. 18:00 以工作时间为单位增加半小时。持续时间也是一天中的半小时增量。

```
CREATE TABLE reservation (
  startdate date not null,  -- start date
  starthour numeric(4,1) not null , -- start hour 8 8.5 9 9.5  ..  16.5 17 17.5
  duration  Numeric(3,1) not null, -- duration by hours 0.5 1 1.5 .. 9 9.5 10
  primary key (startdate, starthour)
); 
```

如果需要，可以更改表结构。

如何在未保留的表中找到第一个免费半小时？Eq 如果表包含

```
startdate   starthour  duration 
14          9           1              -- ends at 9:59
14          10          1.5            -- ends at 11:29, e.q there is 30 minute gap before next
14          12          2
14          16          2.5 
```

结果应该是：

```
starthour  duration
11.5       0.5 
```

可能 PostgreSql 9.2 窗口函数应该用于查找 starthour 大于前一行 starthour + duration 的第一行
如何编写返回此信息的 select 语句？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T00:26:07.453

Postgres 9.2 具有范围类型，我建议使用它们。

```
create table reservation (reservation tsrange);
insert into reservation values 
('[2012-11-14 09:00:00,2012-11-14 10:00:00)'), 
('[2012-11-14 10:00:00,2012-11-14 11:30:00)'), 
('[2012-11-14 12:00:00,2012-11-14 14:00:00)'), 
('[2012-11-14 16:00:00,2012-11-14 18:30:00)');

ALTER TABLE reservation ADD EXCLUDE USING gist (reservation WITH &&); 
```

“EXCLUDE USING gist”创建了不允许插入重叠条目的索引。您可以使用以下查询来查找差距（vyegorov 查询的变体）：

```
with gaps as (
  select 
    upper(reservation) as start, 
    lead(lower(reservation),1,upper(reservation)) over (ORDER BY reservation) - upper(reservation) as gap 
  from (
    select * 
    from reservation 
    union all values 
      ('[2012-11-14 00:00:00, 2012-11-14 08:00:00)'::tsrange), 
      ('[2012-11-14 18:00:00, 2012-11-15 00:00:00)'::tsrange)
  ) as x
) 
select * from gaps where gap > '0'::interval; 
```

“联合所有值”会屏蔽非工作时间，因此您只能在上午 8 点至晚上 18 点之间进行预订。

结果如下：

```
 start        |   gap    
---------------------+----------
 2012-11-14 08:00:00 | 01:00:00
 2012-11-14 11:30:00 | 00:30:00
 2012-11-14 14:00:00 | 02:00:00 
```

文档链接： - [http://www.postgresql.org/docs/9.2/static/rangetypes.html](http://www.postgresql.org/docs/9.2/static/rangetypes.html) “范围类型” - [https://wiki.postgresql.org/images/7/73/Range-types-pgopen- 2012.pdf](https://wiki.postgresql.org/images/7/73/Range-types-pgopen-2012.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:38:15.373

也许不是最好的查询，但它可以满足您的需求：

```
WITH
times AS (
    SELECT startdate sdate,
        startdate + (floor(starthour)||'h '||
           ((starthour-floor(starthour))*60)||'min')::interval shour,
        startdate + (floor(starthour)||'h '||
           ((starthour-floor(starthour))*60)||'min')::interval 
           + (floor(duration)||'h '||
             ((duration-floor(duration))*60)||'min')::interval ehour
      FROM reservation),
gaps AS (
    SELECT sdate,shour,ehour,lead(shour,1,ehour)
       OVER (PARTITION BY sdate ORDER BY shour) - ehour as gap
      FROM times)
SELECT * FROM gaps WHERE gap > '0'::interval; 
```

一些注意事项：

1.  最好不要将事件的时间和数据分开。如果必须，请使用标准类型；
2.  如果无法使用标准类型，请创建将`numeric`小时数转换为`time`格式的函数。

# c++ - 将变量从 CUDA 文件发送到 CPP 文件？

> ID：13387191
> 
> 赞同：0
> 
> 时间：2012-11-14T20:57:53.610
> 
> 标签：c++, cuda, gpu

我有一个 CPP 项目，其中包含 1 个 CUDA 文件。

我有一个在 CUDA 主方法中声明的主机和设备数组

```
float* h_CovarianceMatrix[11][NumberOfFeatures];
float* d_CovarianceMatrix; 
```

我做了一个 cuda2DMemcpy 主机到设备，做了一些计算，然后做了一个 cuda2DMemcpy 设备来托管。

所以现在我`h_CovarianceMatrix[][]`已经准备好被送回我的 cpp 班了。

我的问题是，如何将此变量从 CUDA 发送到 CPP 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:47:45.617

我相信 CUDA 源文件中声明的全局符号对 CPP 链接器是可见的。您只需将矩阵符号的声明移动到 .h 文件中，并将 .h 包含在 CPP 和 CUDA 文件中。

# iphone - iPhone App 收听广播

> ID：13387192
> 
> 赞同：1
> 
> 时间：2012-11-14T20:57:54.333
> 
> 标签：iphone, objective-c, ios, xcode

我想创建一个允许人们收听广播的 iPhone 应用程序。以下是我到目前为止所做的事情，但是当我点击按钮时没有任何反应，有人可以告诉我在这里做错了什么。

提前致谢。

```
#import <UIKit/UIKit.h>

@interface RadioViewController : UIViewController{

IBOutlet UIWebView *webView;
}

-(IBAction)radio;
@property(nonatomic,retain)UIWebView *webview;

@end

#import "RadioViewController.h"
#import <MediaPlayer/MediaPlayer.h>
@implementation RadioViewController

@synthesize webview;

-(IBAction)radio{

    NSURL *url = [NSURL URLWithString:@"http://db5195728.tis.core.005.cdn.streamfarm.net:80/3212_erf_96_live.mp3"];
    NSURLRequest *req = [NSURLRequest requestWithURL: url];
    [webview loadRequest:req];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:07:36.727

我试过你的代码。它在这里工作正常。所以：

1.  确保您`radio`在点击该按钮时被调用。你可以在那里设置一个断点或者添加一个`NSLog`来查看它是否被调用；
2.  确保您`webview`正确添加到您的视图：显示和正确的大小。

# html - ipad 上的 HTTP 流式传输 mp4 视频

> ID：13387200
> 
> 赞同：0
> 
> 时间：2012-11-14T20:58:25.380
> 
> 标签：html, ipad, video-streaming, mp4

我的一台服务器上存储了一些 mp4 文件。文件已编码为 H.264。我在另一台服务器上创建了一个页面并嵌入了一个 html5 视频。

```
<video width='400' height='300'><source src='videourl' type='video/mp4' /></video> 
```

当视频在 ipad 上通过 3G 播放时，它真的很慢。有时它停止播放，我不得不再次单击视频才能继续。

我想知道如何让它通过 3G 流畅地播放视频？在 ipad 上流式传输 mp4 视频是否有任何服务器要求/配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:39:26.863

视频的比特率是多少？播放质量很大程度上取决于带宽。您能否验证视频是否通过 wifi 流畅播放。

# regex - Flex - Actionscript - RegExp - 从字符串中检索特定数据

> ID：13387207
> 
> 赞同：0
> 
> 时间：2012-11-14T20:58:44.217
> 
> 标签：regex, apache-flex, actionscript

我已经搞砸了一段时间，并决定在这里发帖，看看是否有人可以帮忙。我什至弄乱了 RegExr 工具（没有运气）： [http ://gskinner.com/RegExr](http://gskinner.com/RegExr)

无论如何，我有一个包含措辞（不带引号）的字符串：“13.5 to 14.1”

我需要创建一个具有第一个数字的 var：13.5 和一个具有第二个数字的 var：14.1

所以我想要以下结果：

var firstVal:String = 13.5; var secondVal:String = 14.1;

我通过对第一个数字执行以下操作来使其工作： var lowRegExp:RegExp=/\d[0-9].\d[0-9]/;

对于第二个数字，我这样做了： var highRegExp:RegExp=/\d[0-9].\d[0-9]$/;

我的问题是我不知道字符串的格式。它也可能看起来像这样（小数点后两位数）：13.57 到 14.10

所以我需要确保它使用以下组合工作：13.50 到 14.1、13.5 到 14.10、3.50 到 4.10、3.5 到 4.1（所有组合都必须有效）

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:33:00.757

这就是我要工作的地方。我不确定这有多干净，我也不喜欢硬编码，但它适用于所有场景。如果有人知道这样做的干净方法，请告诉我。

```
var myString:String="13.5 to 14.1";
var firstVal:String=myString.substring(0, myString.search(" to "));
var secondVal:String=myString.substring((myString.search(" to ") + 4)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:46:25.970

应该很简单，您需要以下内容： - 任何 # 个数字，后跟一个句点文字，然后是任何 # 个数字。

```
Pattern: \d+\.\d+
So use something similar:
var mystr:String = "15.4 to 153.93";
var tokens:Array = mystr.match(/\d+\.\d+/g); 
```

另外，我已经养成了使用[regexpal.com](http://regexpal.com)的习惯，这比在您的应用程序中进行迭代测试要快得多。;)

# visual-studio-2012 - Visual Studio Express 2012 中的空项目

> ID：13387209
> 
> 赞同：4
> 
> 时间：2012-11-14T20:58:50.903
> 
> 标签：visual-studio-2012

我想在 Microsoft Visual Studio Express 2012 中创建一个空项目，但不知何故我没有看到任何模板。我转到 File->New Project 并弹出“New Project”对话框。在左侧，我单击“Visual C++”，但唯一的子项是“Windows Store”，并且没有空项目的模板。我只能看到用于创建应用程序的模板。新版本不能创建空项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:52:20.267

您可能正在尝试使用 Microsoft Visual Studio Express 2012 **for Windows 8**。尝试使用 Microsoft Visual Studio Express 2012 **for Windows Desktop**。如果你想在 Windows 8 中创建一个普通的 C++ 项目，这是要走的路。令人困惑，我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T13:19:13.853

空溶液 = 空白溶液？

文件 > 新项目... > 模板 > 其他项目类型 > Visual Studio 解决方案 > 空白解决方案

# sql - 有效计算自上次交易以来的时间

> ID：13387210
> 
> 赞同：0
> 
> 时间：2012-11-14T20:58:53.107
> 
> 标签：sql, teradata

我有一个由用户 ID 和日期标识的大型交易表。对于每个用户的最后一次交易，我想计算自上一次交易以来经过的时间。有没有像滞后算子这样的东西我可以用它来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:32:30.823

[您可以在此处](https://stackoverflow.com/a/13110412/120504)找到使用窗口聚合函数在 Teradata 中完成 LEAD 和 LAG 的示例。

# html - 我在哪里可以在我网站的 ftp 服务器上找到这个 html 代码？

> ID：13387212
> 
> 赞同：0
> 
> 时间：2012-11-14T20:58:58.160
> 
> 标签：html, web, ftp

很久以前，我在我的 wordpress 网站（我的[网站](http://mamou-mani.com)左侧的 Facebook 按钮）上添加了一个 html 代码，我很难在我的 ftp 服务器上找到它。

有没有办法从我的浏览器中找到它，或者至少知道它可能在哪个文件夹中？否则我可以在 filezilla 上搜索“facebook”一词并查找每个文件吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:51:51.403

由于它的 wordpress，您的内容可能在 wp-content/themes/ 中的某个地方。

由于您的问题是关于您网站的某些内容，请查看 sidebar.php 文件。虽然这取决于主题。

# iphone - 使用私有框架：导入 RadioPreferences.h

> ID：13387213
> 
> 赞同：7
> 
> 时间：2012-11-14T20:59:14.773
> 
> 标签：iphone, objective-c, ios, private-functions

我正在关注[在 Xcode 中导入私有框架的选定答案](https://stackoverflow.com/questions/4206133/importing-private-frameworks-in-xcode?rq=1)

基本上我希望能够在我的应用程序中控制飞行模式。当我导入`RadioPreferences.h`我的应用程序并尝试编译时，我得到`Expected Identifier`了`@class <RadiosPreferencesDelegate>;`

我不确定下一步该做什么。我什至不知道您可以转发声明协议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T22:07:55.530

首先将以下内容复制到一个名为`RadioPreferences.h`. （取自[https://stackoverflow.com/a/13095362/418715](https://stackoverflow.com/a/13095362/418715)）。

```
@protocol RadiosPreferencesDelegate
-(void)airplaneModeChanged;
@end

@interface RadiosPreferences : NSObject
{
    struct __SCPreferences *_prefs;
    int _applySkipCount;
    id <RadiosPreferencesDelegate> _delegate;
    BOOL _isCachedAirplaneModeValid;
    BOOL _cachedAirplaneMode;
    BOOL notifyForExternalChangeOnly;
}

- (id)init;
- (void)dealloc;
@property(nonatomic) BOOL airplaneMode;
- (void)refresh;
- (void)initializeSCPrefs:(id)arg1;
- (void)notifyTarget:(unsigned int)arg1;
- (void)synchronize;
- (void *)getValueForKey:(id)arg1;
- (void)setValue:(void *)arg1 forKey:(id)arg2;
@property(nonatomic) BOOL notifyForExternalChangeOnly; // @synthesize notifyForExternalChangeOnly;
@property(nonatomic) id <RadiosPreferencesDelegate> delegate; // @synthesize delegate=_delegate;

@end 
```

* * *

*   接下来，转到 Xcode 中目标的*Build Phases*并展开*Link Binary With Libraries*部分。
*   在 finder 窗口中导航到`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/System/Library/PrivateFrameworks`. 在路径中替换`iPhoneOS6.0.sdk`为您所针对的 sdk。
*   将 AppSupport.framework 拖到展开的*Link Binary With Libraries*部分。

现在一切都应该编译了，您将能够使用该类。

# java - Java中的可迭代gzip放气/膨胀

> ID：13387215
> 
> 赞同：5
> 
> 时间：2012-11-14T20:59:16.867
> 
> 标签：java, gzip, nio

互联网中是否有根据 ByteBuffers 进行 gzip 压缩的库？允许我们推送原始数据然后提取压缩数据的东西？我们已经搜索过它，但只找到了处理 InputStreams 和 OutputStreams 的库。

我们的任务是创建 gzip 过滤器，用于压缩管道架构中的 ByteBuffer 流。这是一种拉取架构，其中最后一个元素从较早的元素中提取数据。我们的 gzip 过滤器处理 ByteBuffers 流，没有可用的单个 Stream 对象。

我们曾尝试将数据流调整为某种 InputStream，然后使用 GZipOutputStream 来满足我们的要求，但适配器代码的数量至少可以说是烦人的。

**接受后编辑**：为了记录，我们的架构类似于 GStreamer 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:13:56.703

我不明白“隐藏在互联网中”的部分，但[zlib](http://zlib.net/)会进行内存中 gzip 格式的压缩和解压缩。[`java.util.zip`API](http://docs.oracle.com/javase/7/docs/api/java/util/zip/package-summary.html)提供了一些对 zlib的访问，尽管它是有限的。由于接口限制，您不能要求 zlib 直接生成和使用 gzip 流。但是，您可以使用该`nowrap`选项来生成和使用原始 deflate 数据。然后使用`CRC32`. `java.util.zip`您可以预先添加一个固定的 10 字节标头，添加四字节 CRC，然后添加四字节未压缩长度（模 2 ^(32)），两者都以 little-endian 顺序进行，一切顺利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T19:47:25.263

非常感谢 Mark Adler 提出这种方法，这比我原来的答案要好得多。

```
package stack;

import java.io.*;
import java.nio.ByteBuffer;
import java.nio.channels.FileChannel;
import java.util.zip.CRC32;
import java.util.zip.Deflater;

public class BufferDeflate2 {
    /** The standard 10 byte GZIP header */
    private static final byte[] GZIP_HEADER = new byte[] { 0x1f, (byte) 0x8b,
            Deflater.DEFLATED, 0, 0, 0, 0, 0, 0, 0 };

    /** CRC-32 of uncompressed data. */
    private final CRC32 crc = new CRC32();

    /** Deflater to deflate data */
    private final Deflater deflater = new Deflater(Deflater.BEST_COMPRESSION,
            true);

    /** Output buffer building area */
    private final ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    /** Internal transfer space */
    private final byte[] transfer = new byte[1000];

    /** The flush mode to use at the end of each buffer */
    private final int flushMode;

    /**
     * New buffer deflater
     * 
     * @param syncFlush
     *            if true, all data in buffer can be immediately decompressed
     *            from output buffer
     */
    public BufferDeflate2(boolean syncFlush) {
        flushMode = syncFlush ? Deflater.SYNC_FLUSH : Deflater.NO_FLUSH;
        buffer.write(GZIP_HEADER, 0, GZIP_HEADER.length);
    }

    /**
     * Deflate the buffer
     * 
     * @param in
     *            the buffer to deflate
     * @return deflated representation of the buffer
     */
    public ByteBuffer deflate(ByteBuffer in) {
        // convert buffer to bytes
        byte[] inBytes;
        int off = in.position();
        int len = in.remaining();
        if( in.hasArray() ) {
            inBytes = in.array();
        } else {
            off = 0;
            inBytes = new byte[len];
            in.get(inBytes);
        }

        // update CRC and deflater
        crc.update(inBytes, off, len);
        deflater.setInput(inBytes, off, len);

        while( !deflater.needsInput() ) {
            int r = deflater.deflate(transfer, 0, transfer.length, flushMode);
            buffer.write(transfer, 0, r);
        }

        byte[] outBytes = buffer.toByteArray();
        buffer.reset();
        return ByteBuffer.wrap(outBytes);
    }

    /**
     * Write the final buffer. This writes any remaining compressed data and the GZIP trailer.
     * @return the final buffer
     */
    public ByteBuffer doFinal() {
        // finish deflating
        deflater.finish();

        // write all remaining data
        int r;
        do {
            r = deflater.deflate(transfer, 0, transfer.length,
                    Deflater.FULL_FLUSH);
            buffer.write(transfer, 0, r);
        } while( r == transfer.length );

        // write GZIP trailer
        writeInt((int) crc.getValue());
        writeInt((int) deflater.getBytesRead());

        // reset deflater
        deflater.reset();

        // final output
        byte[] outBytes = buffer.toByteArray();
        buffer.reset();
        return ByteBuffer.wrap(outBytes);
    }

    /**
     * Write a 32 bit value in little-endian order
     * 
     * @param v
     *            the value to write
     */
    private void writeInt(int v) {
        System.out.println("v="+v);
        buffer.write(v & 0xff);
        buffer.write((v >> 8) & 0xff);
        buffer.write((v >> 16) & 0xff);
        buffer.write((v >> 24) & 0xff);
    }

    /**
     * For testing. Pass in the name of a file to GZIP compress
     * @param args
     * @throws IOException
     */
    public static void main(String[] args) throws IOException {
        File inFile = new File(args[0]);
        File outFile = new File(args[0]+".test.gz");
        FileChannel inChan = (new FileInputStream(inFile)).getChannel();
        FileChannel outChan = (new FileOutputStream(outFile)).getChannel();

        BufferDeflate2 def = new BufferDeflate2(false);

        ByteBuffer buf = ByteBuffer.allocate(500);
        while( true ) {
            buf.clear();
            int r = inChan.read(buf);
            if( r==-1 ) break;
            buf.flip();
            ByteBuffer compBuf = def.deflate(buf);
            outChan.write(compBuf);
        }

        ByteBuffer compBuf = def.doFinal();
        outChan.write(compBuf);

        inChan.close();
        outChan.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T02:21:36.057

处理 ByteBuffers 并不难。请参阅下面的示例代码。您需要知道缓冲区是如何创建的。选项包括：

1.  每个缓冲区都是独立压缩的。这很容易处理，我认为情况并非如此。您只需将缓冲区转换为字节数组并将其包装在 GZIPInputStream 中的 ByteArrayInputStream 中。
2.  每个缓冲区都由写入器以 SYNC_FLUSH 结束，因此包含流中的整个数据块。写入器写入缓冲区的所有数据都可以立即被读取器读取。
3.  每个缓冲区只是 GZIP 流的一部分。不能保证读者可以从缓冲区中读取任何内容。

GZIP 生成的数据必须按顺序处理。ByteBuffers 必须按照它们生成的顺序进行处理。

示例代码：

```
package stack;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.nio.ByteBuffer;
import java.nio.channels.Channels;
import java.nio.channels.Pipe;
import java.nio.channels.SelectableChannel;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.zip.GZIPInputStream;

public class BufferDeflate {

    static AtomicInteger idSrc = new AtomicInteger(1);

    /** Queue for transferring buffers */
    final BlockingQueue<ByteBuffer> buffers = new LinkedBlockingQueue<ByteBuffer>();

    /** The entry point for deflated buffers */
    final Pipe.SinkChannel bufSink;

    /** The source for the inflater */
    final Pipe.SourceChannel infSource;

    /** The destination for the inflater */
    final Pipe.SinkChannel infSink;

    /** The source for the outside world */
    public final SelectableChannel source;

    class Relayer extends Thread {
        public Relayer(int id) {
            super("BufferRelayer" + id);
        }

        public void run() {
            try {
                while( true ) {
                    ByteBuffer buf = buffers.take();
                    if( buf != null ) {
                        bufSink.write(buf);
                    } else {
                        bufSink.close();
                        break;
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    class Inflater extends Thread {
        public Inflater(int id) {
            super("BufferInflater" + id);
        }

        public void run() {
            try {
                InputStream in = Channels.newInputStream(infSource);
                GZIPInputStream gzip = new GZIPInputStream(in);
                OutputStream out = Channels.newOutputStream(infSink);

                int ch;
                while( (ch = gzip.read()) != -1 ) {
                    out.write(ch);
                }
                out.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    /**
     * New buffer inflater
     */
    public BufferDeflate() throws IOException {
        Pipe pipe = Pipe.open();
        bufSink = pipe.sink();
        infSource = pipe.source();

        pipe = Pipe.open();
        infSink = pipe.sink();
        source = pipe.source().configureBlocking(false);

        int id = idSrc.incrementAndGet();

        Thread thread = new Relayer(id);
        thread.setDaemon(true);
        thread.start();

        thread = new Inflater(id);
        thread.setDaemon(true);
        thread.start();
    }

    /**
     * Add the buffer to the stream. A null buffer closes the stream
     * 
     * @param buf
     *            the buffer to add
     * @throws IOException
     */
    public void add(ByteBuffer buf) throws IOException {
        buffers.offer(buf);
    }
} 
```

只需将缓冲区传递给`add`方法并从公共`source`通道读取。在处理给定数量的字节后可以从 GZIP 读取的数据量是无法预测的。因此，我使`source`通道成为非阻塞的，因此您可以在添加字节缓冲区的同一线程中安全地读取它。

# c# - 如何在 ASP.NET MVC 3 中为这条路线建模？

> ID：13387223
> 
> 赞同：0
> 
> 时间：2012-11-14T20:59:41.050
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我需要模拟对我来说有点奇怪的路线。以下是他们希望我做的事情：

```
/AssetManagement -> Asset Landing page
/AssetManagement/Add -> Add an asset
/AssetManagement/Edit -> Edit an asset
/AssetManagement/Locations -> Locations landing page
/AssetManagement/Locations/Add -> Add a location
/AssetManagement/Locations/Edit -> Edit a location 
```

我不确定，但我认为这需要用两个控制器建模。资产控制器和位置控制器。我认为视图添加/编辑/索引将存在于受尊重的视图文件夹下，我可能会定义两条路线：

```
routes.MapRoute(
    "AssetManagement", // Route name
    "AssetManagement/{action}/{id}", // URL with parameters
    new { controller = "Assets", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
    new[] { "MyApplication.Web.Website.Controllers" }
);

routes.MapRoute(
    "AssetManagementLocations", // Route name
    "AssetManagement/{controller}/{action}/{id}", // URL with parameters
    new { controller = "Locations", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
    new[] { "MyApplication.Web.Website.Controllers" }
); 
```

我只是觉得有点不对劲。我错过了处理东西的最佳实践吗？这会导致什么样的问题？他们希望我构建的很多系统都是这样工作的。

// 编辑 如果这是一个不好的地方问这样的问题，我应该在哪里问他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:07:46.080

您可以做的是创建一个区域。

在该区域创建 2 个控制器，一个用于资产，另一个用于位置。

而不是玩路由（这可能很危险）玩MVC概念。

您指定的第二条路线与区域密切相关。当您创建区域时，会自动为您创建路线。希望这可以帮助。

```
Area - AssetManagement
   Controller1 - HomeController 
              Action1 - Add
              Action2 - Delete 

   Controller2 - LocationsController
              Action1 - Add
              Action2 - Delete 

routes.MapRoute(
    "AssetManagementLocations", // Route name
    "{Area}/{controller}/{action}/{id}", // URL with parameters
    new { controller = "Locations", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
    new[] { "MyApplication.Web.Website.Controllers" }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:47:44.783

查看属性路由项目。您可以将 Nuget 安装到 mvc 中并使用路径装饰您的操作方法或控制器 - 这可以明确哪些路由映射到哪个控制器/方法

[https://github.com/mccalltd/AttributeRouting/wiki/2.-Usage](https://github.com/mccalltd/AttributeRouting/wiki/2.-Usage)

# endeca - Endeca UrlENEQuery java API 搜索

> ID：13387230
> 
> 赞同：0
> 
> 时间：2012-11-14T20:59:57.223
> 
> 标签：endeca

我目前正在尝试使用 Java API 为`URLENEQuery`. 当前查询是：

```
collection()/record[CONTACT_ID = "xxxxx" and SALES_OFFICE = "yyyy"] 
```

我需要它是：

```
collection()/record[(CONTACT_ID = "xxxxx" or CONTACT_ID = "zzzzz") and 
                     SALES_OFFICE = "yyyy"] 
```

目前这是通过一个`ERecSearchList`with`CONTACT_ID`和我试图在一个`ERecSearch`对象中匹配的字符串来完成的，但是我很难弄清楚如何`UrlENEQuery`像上面那样以正确的方式生成 or 。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:48:56.440

我们中的一个人在多个层面上感到困惑：让我试着解释一下我为什么感到困惑：

1.  如果 Contact_ID 和 Sales_Office 是不同的维度，其中 Contact_ID 是多或维度，那么您不需要使用 EQL（类似 xpath 的语言）来做任何事情。只需选择适当的维度值，您的导航状态就会反映您尝试使用 XPATH 构建的查询。IE CONTACT_ID 与 SALES_OFFICE 的“ORed together”。

2.  如果您必须使用 EQL，那么修改它的唯一方法（前提是您必须从返回的结果中修改它）是通过字符串操作。

3.  ERecSearchList 使您能够使用功能与 EQL 过滤完全不同的“搜索范围”功能，尽管您可以通过使用仅搜索指定字段（将与通用搜索界面分开）等技巧来获得类似的结果我仍然没有确定 ERecSearchList 和上面的 EQL 表达式之间有什么联系？

表达了我的困惑后，我认为您需要做的是使用字符串操作来动态构建 EQL 表达式并将其添加到查询中。

您正在做什么的代码示例也将非常有帮助。

# objective-c - 如何自动链接框架或库

> ID：13387236
> 
> 赞同：0
> 
> 时间：2012-11-14T21:00:29.727
> 
> 标签：objective-c, ios, xcode, templates

我正在构建一个应用程序，我想从中创建一个模板。在那个应用程序中，我手动创建了几个框架/库的链接。

有没有办法自动创建这些链接？

谢谢，

——埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:45:31.090

没有自动添加这些链接的方法。您只需要一一添加它们。如果您需要在几乎所有源代码文件中导入一些头文件，您可以考虑将它们添加到您的 *-Prefix.pch 文件中。

# php - 如何爆炸/mb_split/preg_split 以“。”（中文句点）作为分隔符的中文字符串？

> ID：13387239
> 
> 赞同：0
> 
> 时间：2012-11-14T21:00:44.770
> 
> 标签：php

这是一个中文字符串示例：

```
"最初 ， 上帝 创造 了 天地 。 2 大地 混沌 苍茫 ， 深渊 的 表面 一 片 黑暗 。 " 
```

如何将其拆分为如下所示的数组？：

```
Array
(
    [0] => 最初 ， 上帝 创造 了 天地 。 2 大地 混沌 苍茫 ， 深渊 的 表面 一 片 黑暗 。
    [1] => 2 大地 混沌 苍茫 ， 深渊 的 表面 一 片 黑暗 。 
) 
```

我尝试过但失败了：

```
$array = mb_split('。', $string);
echo "<pre>";
print_r($array); 
```

我明白了：

```
Array
(
    [0] => 最初 ， 上帝 创造 了 天地 。 2 大地 混沌 苍茫 ， 深渊 的 表面 一 片 黑暗 。
) 
```

ps 字符集为 GB18030。

**我找到了更多信息。中国时期称为句号。html 转义是`&#12290;`和`&#x3002;`。GB18030 十六进制字节为 a1a3。Unicode 字符是 'IDEOGRAPHIC FULL STOP' (U+3002)。我如何使用其中任何一个来实现我的目标？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:11:38.190

尝试这个：

```
$array = explode(chr(227), $string); 
```

* * *

## **更新：**

修复 的字符`explode`：

```
foreach($array as $part) {
    echo str_replace(array(chr(128).chr(130)), '', $part);
    echo '<br>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:47:57.137

我需要在 gb18030 中执行此操作的原因是，我使用的库 (dedesplit) 在转换为 utf-8 时将无法工作。该库是一个中文分词器。我联系了开发人员，他告诉我有一个可以在 utf-8 ( [http://www.itgrass.com/phpanalysis/index.html](http://www.itgrass.com/phpanalysis/index.html) ) 中工作的新版本。我已经对其进行了测试，它正确地分解了以中文句点（或“句号”）作为分隔符的段落。

ps 在找到这个新库之前，我决定编写自己的explode 函数。我认为这可能有效，但我进行了零测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:34:01.647

你试试怎么样

$array = explode('。', $string);

这对我使用命令行很有用。

输出： Array ( [0] => 最初，上帝创造了天 [1] => 2 大地混沌地苍茫，深渊的表面一片黑暗 [2] =>
)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-12T17:58:48.533

最好的是`preg_split()`使用`/u`(UTF8) 选项，例如：

```
 $s = "日、に、本、ほん、語、ご";
 $v1 = preg_split('/(?<!^)(?!$)/u', $s); // for multibyte str_split($list)
 // same as $v1=preg_split('//u', $s);array_pop($v1);array_shift($v1);
 $v2 = preg_split('/、/u', $s); // for multibyte explode("、&quot;,$list) 
```

结果是

*   v1 = array(12) { [0]=> string(3) "日" [1]=> string(3) "、" [2]=> 字符串(3) "に" [3]=> 字符串(3) "、" ... [11]=> 字符串（3）“ご” }

*   v2 = array(6) { [0]=> string(3) "日" [1]=> string(3) "に"; [2]=> string(3) "本" [3]=> string(6) "ほん" [4]=> string(3) "语"; [5]=> 字符串(3) "ご" }

* * *

与您的示例一起使用，

```
$s = "最初 ， 上帝 创造 了 天地 。 2 大地 混沌 苍茫 ， 深渊 的 表面 一 片 黑暗 。 ";
$array  = preg_split('/。/u',$s);
var_dump($array); 
```

结果

```
array(3) { [0]=> string(36) "最初 ， 上帝 创造 了 天地 " 
           [1]=> string(61) " 2 大地 混沌 苍茫 ， 深渊 的 表面 一 片 黑暗 " 
           [2]=> string(1) " " 
} 
```

所以，并不完美......但作为常规表达，您可以根据自己的需要调整它：

## 确切的解决方案

```
$array  = preg_split('/。(?!\s*$)/u',$string); 
```

现在，[消极地展望未来](http://www.rexegg.com/regex-lookarounds.html)，这正是您所需要的（！）。

```
array(3) { [0]=> string(36) "最初 ， 上帝 创造 了 天地 " 
           [1]=> string(61) " 2 大地 混沌 苍茫 ， 深渊 的 表面 一 片 黑暗 。 " 
} 
```

# r - 如何计算R中每个组的初始值差异？

> ID：13387245
> 
> 赞同：7
> 
> 时间：2012-11-14T21:01:05.850
> 
> 标签：r

我在 R 中有这样排列的数据：

```
indv    time    val
A          6    5
A         10    10
A         12    7
B          8    4
B         10    3
B         15    9 
```

对于每个人（`indv`），我想`val`从初始时间计算值（ ）的变化。所以我最终会得到这样的结果：

```
indv time   val val_1   val_change
A       6     5    5       0
A      10    10    5       5
A      12     7    5       2
B       8     4    4       0
B      10     3    4      -1
B      15     9    4       5 
```

谁能告诉我我该怎么做？我可以用

```
ddply(df, .(indv), function(x)x[which.min(x$time), ]) 
```

得到一张像

```
indv    time    val
A          6    5   
B          8    4 
```

但是，我无法弄清楚如何制作一个`val_1`与每个人匹配的最小值的列。但是，如果我能做到这一点，我应该能够`val_change`使用以下内容添加列：

```
df['val_change'] = df['val_1'] - df['val'] 
```

编辑：下面发布了两种出色的方法，但是它们都依赖于我的时间列进行排序，以便小时间值位于高时间值之上。我不确定我的数据是否总是如此。（我知道我可以先在 Excel 中排序，但我试图避免这种情况。）当表格如下所示时，我该如何处理：

```
indv    time    value
A          10   10
A           6   5
A          12   7
B           8   4
B          10   3
B          15   9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T22:21:40.437

这是一个`data.table`内存效率高的解决方案，因为它在 data.table 中通过引用进行设置。设置键将按键变量排序

```
library(data.table)
DT <- data.table(df)  
# set key to sort by indv then time
setkey(DT, indv, time)
DT[, c('val1','change') := list(val[1], val - val[1]),by = indv]
# And to show it works....
DT
##    indv time val val1 change
## 1:    A    6   5    5      0
## 2:    A   10  10    5      5
## 3:    A   12   7    5      2
## 4:    B    8   4    4      0
## 5:    B   10   3    4     -1
## 6:    B   15   9    4      5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T21:10:05.757

您可以使用基本功能来做到这一点。使用您的数据

```
df <- read.table(text = "indv    time    val
A   6   5
A   10  10
A   12  7
B   8   4
B   10  3
B   15  9", header = TRUE) 
```

我们先`split()` `df`上`indv`变量

```
sdf <- split(df, df$indv) 
```

接下来，我们以类似于您建议的方式转换`sdf`添加`val_1`和变量的每个组件`val_change`

```
sdf <- lapply(sdf, function(x) transform(x, val_1 = val[1],
                                         val_change = val - val[1])) 
```

最后，我们安排将各个组件逐行绑定到单个数据帧中：

```
df <- do.call(rbind, sdf)
df 
```

这使：

```
R> df
    indv time val val_1 val_change
A.1    A    6   5     5          0
A.2    A   10  10     5          5
A.3    A   12   7     5          2
B.4    B    8   4     4          0
B.5    B   10   3     4         -1
B.6    B   15   9     4          5 
```

## 编辑

要解决 OP 在评论中提出的排序问题，请修改`lapply()`调用以在`transform()`. 例如：

```
sdf <- lapply(sdf, function(x) {
                     x <- x[order(x$time), ]
                     transform(x, val_1 = val[1],
                               val_change = val - val[1])
                   }) 
```

在使用中我们有

```
## scramble `df`
df <- df[sample(nrow(df)), ]
## split
sdf <- split(df, df$indv)
## apply sort and transform
sdf <- lapply(sdf, function(x) {
                     x <- x[order(x$time), ]
                     transform(x, val_1 = val[1],
                               val_change = val - val[1])
                   })
## combine
df <- do.call(rbind, sdf) 
```

这再次给出：

```
R> df
    indv time val val_1 val_change
A.1    A    6   5     5          0
A.2    A   10  10     5          5
A.3    A   12   7     5          2
B.4    B    8   4     4          0
B.5    B   10   3     4         -1
B.6    B   15   9     4          5 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T21:11:56.327

这是使用的 plyr 解决方案`ddply`

```
ddply(df, .(indv), transform, 
      val_1 = val[1],
      change = (val - val[1]))

  indv time val val_1 change
1    A    6   5     5      0
2    A   10  10     5      5
3    A   12   7     5      2
4    B    8   4     4      0
5    B   10   3     4     -1
6    B   15   9     4      5 
```

要获得第二张桌子，请尝试以下操作：

```
ddply(df, .(indv), function(x) x[which.min(x$time), ])
  indv time val
1    A    6   5
2    B    8   4 
```

# 编辑 1

要处理未排序的数据，例如您在编辑中发布的数据，请尝试以下操作

```
unsort <- read.table(text="indv    time    value
A          10   10
A           6   5
A          12   7
B           8   4
B          10   3
B          15   9", header=T)

do.call(rbind, lapply(split(unsort, unsort$indv), 
                  function(x) x[order(x$time), ]))
    indv time value
A.2    A    6     5
A.1    A   10    10
A.3    A   12     7
B.4    B    8     4
B.5    B   10     3
B.6    B   15     9 
```

现在您可以将上述过程应用于此排序的数据帧

# 编辑 2

对数据框进行排序的一种更短的方法是使用`sortBy`doBy 包中的函数

```
library(doBy)
orderBy(~ indv + time, unsort)
  indv time value
2    A    6     5
1    A   10    10
3    A   12     7
4    B    8     4
5    B   10     3
6    B   15     9 
```

# 编辑 3

您甚至可以使用 df 对您的 df 进行排序`ddply`

```
ddply(unsort, .(indv, time), sort)
  value time indv
1     5    6    A
2    10   10    A
3     7   12    A
4     4    8    B
5     3   10    B
6     9   15    B 
```

# c# - 获取模型顶点 xna + winForm 项目

> ID：13387246
> 
> 赞同：0
> 
> 时间：2012-11-14T21:01:07.263
> 
> 标签：c#, xna

首先，我使用嵌入到 WinForms 项目中的 xna，该项目是我从微软示例页面下载的。现在，关于项目，我想获取所有模型顶点以及模型的所有模型网格顶点。我正在考虑使用自定义内容管道，`MeshContent.Geometry`但问题是我不知道如何在 winForms 中使用内容管道，也不知道如何获取儿童几何图形。所以我尝试使用其他一些具有`ModelMeshPart`顶点属性的方法，但这只会返回比实际更多的顶点。例如，一个简单的立方体有 8 个顶点，但这只会提供更多。

编辑：对于顶点，我的意思是它们在`Vector3`. 如果你用记事本打开它，就像它用 .fbx 写的一样。或者有没有更简单的方法来获取 ModelMesh 大小？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:33:29.973

您可以接收具有相同位置的顶点，因为它们具有不同的法线，但如果您只想知道大小，则无关紧要。

从 ModelMeshPart 顶点缓冲区获取大小可以通过以下方式完成：

```
public void UpdateFrom( ModelMeshPart meshPart ) {
   var indices = new short[meshPart.IndexBuffer.IndexCount];
   meshPart.IndexBuffer.GetData<short>( indices );

   var vertices = new float[meshPart.VertexBuffer.VertexCount 
                          * meshPart.VertexBuffer.VertexDeclaration.VertexStride/4];
   meshPart.VertexBuffer.GetData<float>( vertices );

   // Usually first three floats are position, 
   // this way don't need to know what vertex struct is used
   for ( int i=meshPart.StartIndex; i<meshPart.StartIndex + meshPart.PrimitiveCount*3; i++ ) {
     int index = (meshPart.VertexOffset + indices[i]) *
                  meshPart.VertexBuffer.VertexDeclaration.VertexStride/4;

     position = new Vector3(vertices[index] , vertices[index+1], vertices[index+2]));
     UpdateFrom(position);
  }
}

public void UpdateFrom(Vector3 point) {
   if (point.X > box.Max.X) box.Max.X = point.X;
   if (point.X < box.Min.X) box.Min.X = point.X;
   ....
} 
```

您也可以在 winforms 示例中使用自定义处理器，您只需在 contentbuilder 中添加引用......诀窍是引用 dll 本身......

```
 static string[] pipelineAssemblies =
    {
        "Microsoft.Xna.Framework.Content.Pipeline.FBXImporter" + xnaVersion,
        "Microsoft.Xna.Framework.Content.Pipeline.XImporter" + xnaVersion,
        "Microsoft.Xna.Framework.Content.Pipeline.TextureImporter" + xnaVersion,
        "Microsoft.Xna.Framework.Content.Pipeline.EffectImporter" + xnaVersion,
        Application.StartupPath + "\\SkinnedModelPipeline.dll" ,
        Application.StartupPath + "\\AnimationPipeline.dll" ,
        .... 
```

# windows - 如何让 cURL 从 Windows 命令行工作？

> ID：13387247
> 
> 赞同：3
> 
> 时间：2012-11-14T21:01:12.547
> 
> 标签：windows, curl

我已经从[这里](http://curl.haxx.se/download.html)下载了适用于 Windows 的 cURL 。我选择了`Win64 - Generic`没有`SSL`. 我尝试从命令行运行`curl https://www.google.com`，但出现以下错误：`curl: (1) Protocol https not supported or disabled in libcurl`.

好的！接下来，我决定下载`SSL`并安装该版本。我尝试运行与上面相同的命令，但出现以下错误：

```
curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle" of Certificate
Authority (CA) public keys (CA certs). If the default bundle file isn't adequate, you
can specify an alternate file using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
the bundle, the certificate verification probably failed due to a
problem with the certificate (it might be expired, or the name might
not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
the -k (or --insecure) option. 
```

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:01:12.547

这是我为解决问题所做的。

[我从这里](http://code.google.com/p/msysgit/source/browse/mingw/bin/curl-ca-bundle.crt?r=9d3c9d917f5d7790fbb0309ebbe0303960ec8a64)获得了 Mozilla 使用的 CA 根证书捆绑包。我从页面复制了数据并将其保存在一个新文件`curl-ca-bundle.crt`中，该文件位于该文件所在的`curl.exe`文件夹中。这解决了问题。

当然，这些说明也可以在[SSL 证书的 cURL 文档页面](http://curl.haxx.se/docs/sslcerts.html)上找到，也就是说明4 和 5。

希望有帮助。

# java - EAR lib 的类为 WAR 成员抛出 ClassNotFoundException

> ID：13387250
> 
> 赞同：1
> 
> 时间：2012-11-14T21:01:20.120
> 
> 标签：java, jboss, classloader, classnotfoundexception

我打包了一个 EAR (myear.ear) 文件并将其部署在 JBoss EAP 6（即 JBoss 7 :)）中。它看起来像这样：

```
lib/ 
  my-common.jar (Custom library containing common classes used by both the WAR and BIZ)
  --- (other libraries used by both WAR and BIZ) ---
META-INF/
    jboss-deployment-structure.xml (specifies just <ear-subdeployments-isolated>false</ear-subdeployments-isolated> )
my-biz.jar (EJB Module)
    META-INF/
        beans.xml
        MANIFEST.MF
    -- java classes -- 
my-war.war (WAR Module)
    WEB-INF/
        beans.xml
        lib/ (empty! I made a skinny war)
    META-INF/
        MANIFEST.MF
    resources/
    -- java classes -- 
```

其中`my-war.war`有一个类从`my-common.jar`. 这是发生的事情：

```
public class MyWarMember implements Serializable{//my-war.war

  public void foo(){
    MyCommonMember.deepCopy(this);
  }
}
---------------------------------------------------------------------
public class MyCommonMember{//my-common.jar
  public static Object deepCopy(Serializable obj){

    ObjectOutputStream oos .....
    ...
    oos.writeObject(obj);
    ....
    ObjectInputStream ois ....;
    ....
    ois.readObject(); 
  }
} 
```

调用`ois.readObject();`将为 MyWarMember 抛出 ClassNotFoundException：

```
java.lang.ClassNotFoundException: my.war.MyWarMember from [Module "deployment.myear.ear:main" from Service Module Loader] 
```

你会如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:15:02.753

您已经在您的`my-war.war`和您的公用 jar之间创建了一个循环依赖关系`my-common.jar`。

1.  从`MyWarMember`你调用

    `MyCommonMember.deepCopy(this);`- 这会起作用，因为你已经在你的库中添加了 jar

2.  从`MyCommomMember`你做

    `public static Object deepCopy(Serializable obj){`- 类未找到异常，因为它不知道您`MyWarMember`在`my-war.war`.

**解决方案：** 移除你的循环依赖。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:30:10.567

这可能是多个隔离类加载器的问题。从异常中，它抱怨有问题的地方是`deployment.myear.ear:main`看不到`MyWarMember`。这可能是因为 war 模块不在 EAR 的 lib 文件夹中。

注意：存在间接循环依赖，`my-war.war`使用`my-common.jar`哪个处理无类型类，`my-war.war`但为了序列化，它需要知道实际类型。

# sql - WHERE 子句的“覆盖”配置表

> ID：13387253
> 
> 赞同：0
> 
> 时间：2012-11-14T21:01:22.190
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一张表格，它记录来自我们的一个应用程序的警报，如下所示，我们报告这些。然而，有时可能会有一个警报或一组警报由于某种原因我们想要忽略，例如运行测试，或者有人忘记在那个时间段内关闭警报。

我想创建一个配置表，其中包含一个 ChartId、一个 StartTime、一个 EndTime 和一个 Active 位（即，使用或不使用此规则）。

以下脚本在大多数情况下都有效，除非我在给定 ChartId 的 @ReportAlarmOverride 表中有多行...假设我们要忽略 ChartId = 1 的下午 2:00 至下午 3:00 的警报，然后再忽略下午 4:00 - 下午 5:00。

```
DECLARE @ReportAlarmOverride TABLE
(
ReportAlarmOverrideId INT IDENTITY(1,1),
ChartId INT,
Active BIT,
StartTime DATETIME,
EndTime DATETIME,
LastModifiedTime DATETIME DEFAULT GETDATE()
)
INSERT INTO @ReportAlarmOverride
SELECT 1, 1, GETDATE() - 1, NULL, NULL UNION
SELECT 3, 1, GETDATE() - 1, GETDATE(), NULL UNION
SELECT 5, 1, GETDATE() - 3, NULL, NULL UNION
SELECT 7, 1, GETDATE() - 1, NULL, GETDATE() --UNION 
--SELECT 3, 1, '2012-11-12 16:09:20', '2012-11-12 16:09:21', NULL --Adding this row makes SELECT below stop working

SELECT  Alarm.AlarmTime, AlarmOverride.StartTime, AlarmOverride.EndTime, *
FROM dbo.AlarmLogSummary Alarm
JOIN dbo.AlarmConfiguration AlarmConfig ON Alarm.AlarmConfigurationId = AlarmConfig.AlarmConfigurationId
LEFT JOIN @ReportAlarmOverride AlarmOverride ON AlarmConfig.ChartId = AlarmOverride.ChartId
WHERE Alarm.AlarmTime > GETDATE() - 2
AND ((AlarmOverride.Active = 1 AND Alarm.AlarmTime NOT BETWEEN AlarmOverride.StartTime AND ISNULL(AlarmOverride.EndTime, GETDATE()))
OR Active = 0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:23:58.397

尝试将此逻辑放入 WHERE 子句中，而不是加入 @ReportAlarmOverride 表，如下所示：

```
DECLARE @ReportAlarmOverride TABLE
(
ReportAlarmOverrideId INT IDENTITY(1,1),
ChartId INT,
Active BIT,
StartTime DATETIME,
EndTime DATETIME,
LastModifiedTime DATETIME DEFAULT GETDATE()
)
INSERT INTO @ReportAlarmOverride
SELECT 1, 1, GETDATE() - 1, NULL, NULL UNION
SELECT 3, 1, GETDATE() - 1, GETDATE(), NULL UNION
SELECT 5, 1, GETDATE() - 3, NULL, NULL UNION
SELECT 7, 1, GETDATE() - 1, NULL, GETDATE() --UNION 
--SELECT 3, 1, '2012-11-12 16:09:20', '2012-11-12 16:09:21', NULL --Adding this row makes SELECT below stop working

SELECT  Alarm.AlarmTime, *
FROM dbo.AlarmLogSummary Alarm
    JOIN dbo.AlarmConfiguration AlarmConfig ON Alarm.AlarmConfigurationId = AlarmConfig.AlarmConfigurationId
WHERE Alarm.AlarmTime > GETDATE() - 2
  AND NOT EXISTS(SELECT 1 FROM @ReportAlarmOverride Override
                    WHERE Override.ChartId = AlarmConfig.ChartId
                      AND Override.Active = 1
                      AND Alarm.AlarmTime BETWEEN Override.StartTime AND ISNULL(Override.EndTime, GETDATE()) 
```

唯一的问题是您将无法在查询中返回覆盖数据。我希望它不是必需的。

# sqlite - 如何在sqlite和js中进行选择和排序

> ID：13387254
> 
> 赞同：-2
> 
> 时间：2012-11-14T21:01:27.030
> 
> 标签：sqlite

嗨，我有下表

```
buildingcode flatname flatdescription date
01           A 1      name 1          12-2012
01           B 2      name 1          12-2012
02           A 0      name 2          12-2012
01           A 1      name 1          11-2012 
```

我想显示如下

```
B 2   name 1
A 1   name 1 
```

并解释我想要做什么：

仅显示建筑代码 01，

按平面名称显示一次，

按平面名称 desc 排序

执行此操作的 sqlite 命令是什么？

我试试这个，但顺序错误

```
'SELECT DISTINCT flatdescription, flatname, buildingcode FROM bill WHERE buildingcode = ? ' 
```

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:13:50.100

```
SELECT flatname, flatdescription
FROM bill
WHERE buildingcode = '01'
ORDER BY flatname DESC 
```

# wordpress - 在 Wordpress 安装中屏蔽 URL

> ID：13387261
> 
> 赞同：0
> 
> 时间：2012-11-14T21:01:43.363
> 
> 标签：wordpress, .htaccess, url-masking

我正在尝试在 Wordpress 安装中屏蔽页面 URL。假设它是[http://www.mysite.co.uk/wordpress/page](http://www.mysite.co.uk/wordpress/page)并且当这个页面打开时，我希望 URL 显示 [http://www.mysite.co.uk/wordpress/anythingelse](http://www.mysite.co.uk/wordpress/anythingelse)。这样做的重点是不能共享 URL，只能由授权用户访问，这意味着我也想要它，这样你就不能通过输入 /anythingelse 来访问这个页面。这可能吗？我该怎么做？我有 .htaccess 文件，但我没有使用这个的经验......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:53:10.020

如果您使用 [http://www.mysite.co.uk/wordpress/anythingelse/](http://www.mysite.co.uk/wordpress/anythingelse/)来实际显示 [http://www.mysite.co.uk/wordpress/page](http://www.mysite.co.uk/wordpress/page)，那么这意味着您将能够访问[http： //www.mysite.co.uk/wordpress/page](http://www.mysite.co.uk/wordpress/page)通过到达 [http://www.mysite.co.uk/wordpress/anythingelse/](http://www.mysite.co.uk/wordpress/anythingelse/)...您可能试图以错误的方式执行此操作。究竟有什么意义？您知道在 WordPress 中，您有两种保护页面的方式吗？一种是将其设为“私人”（就在发布或更新按钮上方），另一种是将其设为“密码保护”（同一区域）。在任何情况下，如果您不使用密码而只是使用 URL，那么只要 URL 未知，它就会受到保护。实际上，任何真正键入正确 URL 的人都可以访问该页面。您还可以通过 IP 限制访问。尝试更明确地说明您要保护此页面的原因。

# oracle - 具有默认值和 to_date 的 Oracle 过程显示错误

> ID：13387262
> 
> 赞同：1
> 
> 时间：2012-11-14T21:01:50.527
> 
> 标签：oracle, default, to-date

我正在使用 11g 我有桌子

```
CREATE TABLE Agency
(
AgencyID          int   not null PRIMARY KEY,
AgencyName        VARCHAR2(30) not null,
AgencyLtrCode     VARCHAR2(10) not null,
IsActive          VARCHAR2(3) DEFAULT 'yes'NOT NULL,
LastListSentData  DATE DEFAULT SYSDATE ,
LetterSendDate    DATE DEFAULT SYSDATE ,
CertificationDate DATE DEFAULT SYSDATE ,
CeresNo       int,
AgencyAreaID      int not null,
CONSTRAINT fk_Agency FOREIGN KEY (AgencyAreaID) REFERENCES AgencyArea(AriaID)
); 
```

我使用过程在其中插入新记录

```
create or replace PROCEDURE insert_AGENCY_Procedure(
       AGENCYID IN AGENCY.AGENCYID%TYPE,
       AGENCYNAME IN AGENCY.AGENCYNAME%TYPE,
       AGENCYLTRCODE IN AGENCY.AGENCYLTRCODE%TYPE,  
       ISACTIVE IN AGENCY.ISACTIVE%TYPE DEFAULT 'yes',
       LASTLISTSENTDATA IN AGENCY.LASTLISTSENTDATA%TYPE DEFAULT SYSDATE,
       LETTERSENDDATE IN AGENCY.LETTERSENDDATE%TYPE DEFAULT SYSDATE,
       CERTIFICATIONDATE IN AGENCY.CERTIFICATIONDATE%TYPE DEFAULT SYSDATE,
       CERESNO IN AGENCY.CERESNO%TYPE,
       AGENCYAREAID IN AGENCY.AGENCYAREAID%TYPE)
IS BEGIN
  INSERT INTO AGENCY("AGENCYID", "AGENCYNAME","AGENCYLTRCODE","ISACTIVE","LASTLISTSENTDATA","LETTERSENDDATE","CERTIFICATIONDATE","CERESNO","AGENCYAREAID") 
  VALUES             (AGENCYID, AGENCYNAME,AGENCYLTRCODE,ISACTIVE,LASTLISTSENTDATA,LETTERSENDDATE,CERTIFICATIONDATE,CERESNO,AGENCYAREAID);
  COMMIT;
END;​​ 
```

现在它抛出错误“第 17 行错误：PLS-00103：遇到符号“”“第 17 行只有 END；在上面

当我提交插入看起来像

```
BEGIN
insert_AGENCY_Procedure(9003,'Some Other Church', 'SomOTCh','no',10-10-2011,10/10/2011,10/10/2011,17,2   );
END; 
```

它抛出错误

```
ORA-06550: line 2, column 4:
PLS-00306: wrong number or types of arguments in call to 'INSERT_AGENCY_PROCEDURE'
ORA-06550: line 2, column 4:
PL/SQL: Statement ignored 
```

或其他插入

```
BEGIN
insert_AGENCY_Procedure(9003,'Some Other Church',SomOTCh',DEFAULT,DEFAULT,DEFAULT,DEFAULT,17,2   );
END; 
```

它抛出错误

```
ORA-06550: line 2, column 64:
PLS-00103: Encountered the symbol "DEFAULT" when expecting one of the following:

   ( - + case mod new not null 
```

问题是我的程序有什么问题？我试图解决这个问题但卡住了:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:15:31.263

您正在传递九个值，但该过程只需要八个。从表定义中，您似乎`AgencyLtrCode`在过程中丢失了。

在第一次通话中，您将日期传递为`10-10-2011`or `10/10/2011`，这将被评估为（不同的）数字而不是日期。您至少需要将它们括在单引号中，但实际上应该指定日期掩码，`to_date('10/10/2011', 'DD/MM/YYYY')`而不是依赖隐式转换。

一般来说，如果您想使用默认值，只需将这些参数保留，不要传递`DEFAULT`; 这在这种情况下是无效的。但是因为你有在默认值之后传递的值，你需要命名参数，即

```
insert_agency_procedure(agency_id=>9003, ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:17:04.007

首先，该`INSERT_AGENCY_PROCEDURE`过程被定义为采用 8 个参数，但您尝试传入 9 个参数。看来您正在尝试传入 an`AgencyLtrCode`但该过程没有将 an`AgencyLtrCode`作为参数。您要么必须停止尝试传递，`AgencyLtrCode`要么需要修改过程以接受该参数。

其次，您需要将日期传递给给定声明的程序。您的实际过程调用将出错，因为您为日期参数传入的不是日期（并且不能隐式转换为日期）。假设我们消除了第三个参数（这似乎是`AgencyLtrCode`上面讨论的），你会想要类似的东西

```
BEGIN
  insert_AGENCY_Procedure(9003,
                          'Some Other Church', 
                          'no', 
                          to_date('10-10-2011', 'DD-MM-YYYY'), 
                          to_date('10/10/2011', 'DD/MM/YYYY'),
                          to_date('10/10/2011','DD/MM/YYYY'),
                          17,
                          2   );
END; 
```

第三，你的程序不正确。参数`LASTLISTSENTDATA`、`LETTERSENDDATE`和`CERTIFICATIONDATE`被定义为日期，因此您不应调用`to_date`它们。如果这样做，则强制 Oracle 使用会话的 隐式将日期`NLS_DATE_FORMAT`转换为字符串，然后使用显式格式掩码将字符串转换回日期。如果会话`NLS_DATE_FORMAT`不是您所期望的，那将失败。

最后，在过程声明中间声明可选参数很少是正确的。如果要使用位置绑定并且希望能够省略参数，则可选参数需要位于参数列表的末尾。您可以在参数列表的中间定义可选参数，然后使用命名绑定（如`DazzaL`演示），但这很少是您想要强制未来开发人员使用的。

在您更新的过程中，`AgencyLtrCode`参数的声明似乎不正确

```
AGENCYLTRCODE IN AGENCYLTRCODE%TYPE 
```

需要是

```
AGENCYLTRCODE IN AGENCY.AGENCYLTRCODE%TYPE 
```

您缺少表的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:12:03.683

没有 DEFAULT 关键字，您只需省略默认值。

在您的情况下，您在 API 中间有默认值，因此您必须使用 NAMED 表示法：

```
begin
  insert_agency_procedure(agencyid => 9003,
                          agencyname => 'Some Other Church',
                          isactive => 'SomOTCh',
                          ceresno => 17,
                          agencyareaid => 2 );
end;
/
or mixed:
begin
  insert_agency_procedure(9003, 'Some Other Church',
                          'SomOTCh',
                          ceresno => 17,
                          agencyareaid => 2 );
end;
/ 
```

在你给出的第一个例子中：

```
BEGIN
insert_AGENCY_Procedure(9003,'Some Other Church', 'SomOTCh','no',10-10-2011,10/10/2011,10/10/2011,17,2   );
END; 
```

你不能只输入这样的日期。首先引用它们。其次，始终使用格式掩码。

```
BEGIN
insert_AGENCY_Procedure(9003,'Some Other Church', 'SomOTCh','no',
                        to_date('10-10-2011', 'dd-mm-yyyy'),
                        to_date('10-10-2011', 'dd-mm-yyyy'),
                        to_date('10-10-2011', 'dd-mm-yyyy'),17,2   );
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:12:44.610

我认为您需要将日期字符串括在单引号中（如果您提供日期，考虑到您有这些参数的默认值）：

```
BEGIN
insert_AGENCY_Procedure(9003,'Some Other Church', 'SomOTCh','no','10-10-2011','10/10/2011','10/10/2011',17,2 );
END; 
```

# windows-phone-8 - 在 Windows Phone 8 中启动诺基亚地图

> ID：13387265
> 
> 赞同：3
> 
> 时间：2012-11-14T21:02:04.293
> 
> 标签：windows-phone-8, launching-application, here-api

# 问题

我想在 Windows Phone 8 中启动诺基亚地图，但我找不到允许我执行此操作的 URI 方案。

诺基亚地图似乎也不听他们的 REST Api 或 url。（虽然这在 Windows Phone 中有效，但它不使用诺基亚地图，它使用浏览器）

我的最终目标是弄清楚诺基亚地图可以做的所有事情（X 到 Y、以 gps 坐标为中心、标记位置等），并通过启动应用程序访问它们。

我最初尝试了 bingmaps URI 方案：

[http://msdn.microsoft.com/en-us/library/windows/apps/jj635237.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj635237.aspx)

但是这不起作用，因为 Windows Phone 8 没有 Bing 地图，并且不听旧的 Bing 地图模式。我确实尝试过“nokimaps：”但没有运气:)

# 附加信息

在 Windows Phone 8 中，如果您知道 URI 方案，则启动另一个应用程序非常简单：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh779672(v=win.10).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-4](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh779672(v=win.10).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-4)

如果我能找到关于他们架构的文档，我会被设置！

# TLDR

您能否解决以下问题： 填写空字符串launchNokiaMaps 以启动诺基亚地图应用程序。

```
private async void launch()
{
    string launchNokiaMaps = "";
    await Windows.System.Launcher.LaunchUriAsync(new Uri(launchNokiaMaps));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:37:00.433

经过调查，我发现了Uri：

```
private async void launch()
{
    string launchNokiaMaps = "explore-maps://v1.0/?latlon=56.615495,12.1865081&zoom=5";
    await Windows.System.Launcher.LaunchUriAsync(new Uri(launchNokiaMaps));
} 
```

这将启动诺基亚地图应用程序。

但是您应该小心，因为诺基亚地图不一定安装在 Windows Phone 8 设备上。例如，HTC 设备带有默认的“地图”应用程序。

因此，如果您只想打开默认的 Maps 应用程序，则应使用 MapsTask。这将适用于每台 Windows Phone 8 设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:34:07.750

我找不到有关诺基亚 Drive 是否订阅新的 App2app 协议的任何信息。但是，基于诺基亚的地图应用程序有一个任务启动器，可以让您做很多事情。（必应地图任务已折旧）

```
MapsTask mapsTask = new MapsTask(); 
```

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206989(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206989(v=vs.105).aspx)

我建议使用 Maps API 实现您自己的地图控件，并完全控制用户体验。

[http://www.developer.nokia.com/Resources/Library/Lumia/#!guide-to-the-maps.html](http://www.developer.nokia.com/Resources/Library/Lumia/#!guide-to-the-maps.html)

[http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T06:07:17.093

诺基亚最近推出了一组 API，专门用于在设备上启动 HERE 地图，以及 HERE Drive 和 HERE Transit。

[API 文档](http://developer.nokia.com/Resources/Library/Lumia/#!maps-and-navigation/here-launchers.html)指定了以下用例：

> HERE 启动器是简单易用的 API，使您能够从自己的 Windows Phone 应用程序启动 HERE 应用程序，以执行这些应用程序提供的服务。
> 
> 该 API 与 Windows Phone 8 设备兼容。此外，API 需要 HERE 应用程序来实现设备中存在的服务。如果在设备中没有实现应用程序的情况下使用 API，则用户将被转发到应用程序商店以获取所需的应用程序。
> 
> 目前有三个 HERE 应用程序提供在 HERE 启动器 API 中实现的服务：HERE Maps、HERE Drive 和 HERE Transit。
> 
> HERE Maps、Drive 和 Public Transport 可在全球范围内的所有诺基亚 Lumia 手机上使用，并且它们可能通过 Windows Phone 商店在其他 Windows Phone 上可用。

[可以在此处](http://developer.nokia.com/Resources/Library/Lumia/#!maps-and-navigation/here-launchers/here-launchers-api-demo.html)找到代码示例（涵盖如下所示的用例）。

![在此处输入图像描述](../Images/04dfe4d7da684cf8c128a3fc6e19ff8c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T07:52:06.243

在我的博客中，如果您想在 WP8 应用程序中插入开始导航到目的地的功能，我会提供一些有用的信息。

[http://enzocontini.wordpress.com/2013/04/07/how-to-start-a-turn-by-turn-navigation-to-a-destination-from-your-windows-phone-app/](http://enzocontini.wordpress.com/2013/04/07/how-to-start-a-turn-by-turn-navigation-to-a-destination-from-your-windows-phone-app/)

;-) 恩佐·康蒂尼

# javascript - 内部网络 Windows 服务器之间的“Access-Control-Allow-Origin 不允许”

> ID：13387267
> 
> 赞同：0
> 
> 时间：2012-11-14T21:02:15.297
> 
> 标签：javascript, xmlhttprequest

我们的网络上有 2 个内部（Intranet）Windows 服务器，仅可用于本地网络。安装了Spark `server1`，我们可以像这样查询 Jabber 信息：

```
http://server1/plugins/presence/status?jid=username@jabbersrv&type=text 
```

在`server2`Spiceworks 上安装了，我写了一个插件来查询 Jabber 状态，如下所示：

```
xmlHttp = new XMLHttpRequest();
xmlHttp.open( "GET", "http://server1/plugins/presence/status?jid=username@jabbersrv&type=text", false );
xmlHttp.send( null );
statusStr = xmlHttp.responseText; 
```

但是这段代码（on `server2`）返回一个错误：

```
XMLHttpRequest cannot load http://server1/plugins/presence/status?jid=username@jabbersrv&type=text. Origin https://server2 is not allowed by Access-Control-Allow-Origin. 
```

为什么这不起作用？我有一些 VB.net 代码可以在相同的环境中完成此任务：

```
Dim jbrStatus As New System.Net.WebClient
Dim userStatus As String = jbrStatus.DownloadString("http://server1/plugins/presence/status?jid=username@jabbersrv&type=text") 
```

尽管 Openfire 在`server1`. 由于它们是内部的（在同一个域上），这两个服务器是否应该本质上不相互信任？让它在 Windows 域和 Windows 服务器上工作的最佳方法是什么？

我尝试将 server2 域服务器添加为 server1 上的本地管理员，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:05:12.383

他们是否在同一个网络上并不重要。如果他们有不同的域名，XMLHttpRequests 默认不会工作。[对于Cross-Origin Resource Sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，您需要服务器发回某些标头。请注意，这仅适用于更新的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:05:19.847

这与同源政策有关

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

> 该策略允许在源自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

server1 / server2 被认为是不同的域，即使在同一个网络上。

# python - python3.2 - 使用 cx-oracle 更新 clob

> ID：13387268
> 
> 赞同：0
> 
> 时间：2012-11-14T21:02:15.457
> 
> 标签：python, oracle, python-3.x, cx-oracle

我正在将一些代码从 perl 迁移到 Python。我可以使用以下代码读取需要更新的 CLOB：

```
cur.execute("""
SELECT
    , a.Category
    , a.Status
    …
    , c.name
    , a.orig_operator
FROM tables where stuff
""")

for result in cur:
    startTimes = result[18].read( # stringify from lob
    stopTimes = result[19].read()
    lobsterCode = result[17].read() 
```

如何更新 CLOB 列之一？使用 Perl 我选择 for `UPDATE`，`bin_locator`然后`ora_lob_write`从 DBI 获取使用。

我正在寻找显示 Python 等价物的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:42:06.880

抱歉，我没有 Python 3.2。这是在 Python 2.7 上。

在甲骨文中：

```
scott@XE_11g> CREATE TABLE t (id NUMBER, c CLOB);

Table created.

scott@XE_11g> INSERT INTO t VALUES (1, 'Happy families are all alike; every unhappy family is unhappy in its own way.');

1 row created.

scott@XE_11g> INSERT INTO t VALUES (2, q'[You don't know about me without you have read a book by the name of The Adventures of Tom Sawyer; but that ain't no matter.]');

1 row created.

scott@XE_11g> COMMIT;

Commit complete.

scott@XE_11g> 
```

现在，在 Python 中：

```
import cx_Oracle

connection = cx_Oracle.connect('scott/tiger@XE')
cursor = connection.cursor()
new_clob = cursor.var(cx_Oracle.CLOB)
new_clob.setvalue(0,'It was a bright cold day in April, and the clocks were striking thirteen. ')
key_id = cursor.var(cx_Oracle.NUMBER)
key_id.setvalue(0,2)

cursor.execute("""UPDATE t
                  SET    c = :p_clob
                  WHERE  id = :p_key"""
,              p_clob = new_clob
,              p_key = key_id
               )
connection.commit() 
```

并且，再次回到 Oracle：

```
scott@XE_11g> SELECT c FROM t WHERE id = 2;

C
----------------------------------------------------------------------------------------------------
It was a bright cold day in April, and the clocks were striking thirteen.

scott@XE_11g> 
```

希望这可以帮助。

# sql - 修改时间戳的年份字段

> ID：13387269
> 
> 赞同：1
> 
> 时间：2012-11-14T21:02:17.780
> 
> 标签：sql, db2

我想将年份修改为 2013 年，我不想修改其余部分：月、日等

我想对表格中的每一行执行此操作

我知道我可以使用以下方法添加“x”年：

```
 Set date = date+ x YEAR  in the update statement 
```

但我不知道如何实现 2013 年的恒定值，无论原始年份值如何

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:09:15.850

您还没有明确说明您希望闰年发生什么，这可能很重要（他们会朝哪个方向移动？）。但是，基本形式非常简单：

```
UPDATE <table> SET <column> = <column> + (2013 - YEAR(<column)) YEARS 
```

示例（所有语句在我的本地 iSeries 上运行和验证）：

```
CREATE TABLE QTEMP/Example (initial TIMESTAMP NOT NULL WITH DEFAULT, 
                            updated TIMESTAMP NOT NULL WITH DEFAULT)

INSERT INTO Example VALUES(CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
                          (TIMESTAMP(DATE('2012-02-29'), CURRENT_TIME),
                           TIMESTAMP(DATE('2012-02-29'), CURRENT_TIME)),
                          (TIMESTAMP(DATE('2012-02-28'), CURRENT_TIME),
                           TIMESTAMP(DATE('2012-02-28'), CURRENT_TIME)),
                          (TIMESTAMP(DATE('2012-03-31'), CURRENT_TIME),
                           TIMESTAMP(DATE('2012-02-31'), CURRENT_TIME)),
                          (TIMESTAMP(DATE('2013-05-08'), CURRENT_TIME),
                           TIMESTAMP(DATE('2013-05-08'), CURRENT_TIME)),
                          (TIMESTAMP(DATE('2014-09-20'), CURRENT_TIME),
                           TIMESTAMP(DATE('2014-09-20'), CURRENT_TIME)), 
```

产生的初始数据：

```
initial                     updated
2012-11-14-15.05.58.246187  2012-11-14-15.05.58.246187
2012-02-29-15.05.58.000000  2012-02-29-15.05.58.000000
2012-02-28-15.05.58.000000  2012-02-28-15.05.58.000000
2012-03-01-15.05.58.000000  2012-03-01-15.05.58.000000
2013-05-08-15.05.58.000000  2013-05-08-15.05.58.000000
2014-09-20-15.05.58.000000  2014-09-20-15.05.58.000000 
```

实际报表

```
UPDATE Example SET updated = updated + (2013 - YEAR(updated)) YEARS
WHERE YEAR(updated) <> 2013 
```

导致：

```
initial                     updated
2012-11-14-15.05.58.246187  2013-11-14-15.05.58.246187
2012-02-29-15.05.58.000000  2013-02-28-15.05.58.000000
2012-02-28-15.05.58.000000  2013-02-28-15.05.58.000000
2012-03-01-15.05.58.000000  2013-03-01-15.05.58.000000
2013-05-08-15.05.58.000000  2013-05-08-15.05.58.000000
2014-09-20-15.05.58.000000  2013-09-20-15.05.58.000000 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T21:15:23.547

选择 to_date('2014/'|| to_char(sysdate, 'mm/dd HH24:MI:SS'), 'yyyy/mm/dd HH24:MI:SS') from dual;

# asp-classic - 我想创建文本框，并且每次在 vb 中的数字都不一样

> ID：13387270
> 
> 赞同：0
> 
> 时间：2012-11-14T21:02:23.660
> 
> 标签：asp-classic

我正在处理网页，我会将我拥有的数据连接到数据库。所以我的问题是如何创建不同数量的文本框并向它们分配值或数据而不丢失它们？我在一个网页上工作，我有新文本框的占位符，但我不知道如何将它们保留在那里并为它们分配值以便将它们保存在数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:47:27.780

```
Dim c As Integer = 0
While c < 10
    Dim lab As New Label()
    Dim ltr As New Literal()
    lab.Text = c.ToString()
    ltr.Text = "<br/>"
    PlaceHolder1.Controls.Add(lab)
    PlaceHolder1.Controls.Add(ltr)
    C+=1 
```

结束时

如果您正在使用数据库，则始终可以使用数据网格，因为数据网格是动态的。稍后您可以删除边框以使其成为标签或文本框，这取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:17:00.497

您使用 asp-classic 标记了问题，但谈论了文本框和占位符，因此我假设您使用的是 ASP.NET Web 窗体。

如果没有示例代码，很难说您的情况如何，但这会有所帮助吗？

[http://webdevel.blogspot.fi/2009/05/get-textbox-values-from-repeater-easy.html](http://webdevel.blogspot.fi/2009/05/get-textbox-values-from-repeater-easy.html)

# c# - 移动许多画布对象的有效方法

> ID：13387276
> 
> 赞同：1
> 
> 时间：2012-11-14T21:02:47.060
> 
> 标签：c#, wpf, canvas, shape

下面的代码从物理引擎中获取对象的所有位置和角度，并相应地更新每个对象。一旦对象之间有大量活动，它就会减慢。

我知道它**不是**物理引擎，因为我使用 OpenGL 编写了完全相同的东西，但我不能将它用于我的特定应用程序。

```
int bodyId = 0;
foreach (Shape shape in shapes)
{
    //Don't update sleeping objects because they are sleeping.
    //Waking them up would be terrible...
    //IGNORE THEM AT ALL COSTS!!
    if (physics.IsSleeping(bodyId))
    {
        ++bodyId;
        continue;
    }

    //Rotate transform
    RotateTransform rot = new RotateTransform(physics.GetAngle(bodyId));
    rot.CenterX = shape.Width / 2;
    rot.CenterY = shape.Height / 2;

    //Set the shape to rotate
    shape.RenderTransform = rot;

    //Body position
    Point bodyPos = physics.GetPosition(bodyId);
    Canvas.SetLeft(shape, bodyPos.X - shape.Width / 2);
    Canvas.SetTop(shape, bodyPos.Y - shape.Height / 2);

    ++bodyId;
} 
```

我想知道是否有更有效的方法来完成上述操作，分为几个问题。

1.  如果我调用 Canvas.SetLeft 和 Canvas.SetTop，UI 是否会在循环内开始渲染？或者如果不清楚，Canvas.SetLeft 和 Canvas.SetTop 函数究竟是如何工作的？

2.  既然我已经在使用 RotateTransform，那么使用 TranslateTransform 会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:08:45.497

1.  是的，每次您拥有的每个元素都会调用 SetTop() 和 SetLeft()。如果你想让一切更有效率，我会做以下事情。首先，您使用更新逻辑的更新函数，即计算对象应该在哪里，然后通过遍历对象来处理绘图，并且只使用一次 setLeft() 和 setTop() 而不是每次更新。
2.  是的，它将为您节省一项操作。

也许还有其他可以优化的东西。与其使用像 RotateTransform() 这样的 CPU 密集型矩阵运算，您可以通过将当前旋转状态保存在形状对象中来节省大量计算能力。也使用向量可能会帮助您提高性能。

# php - 使用带有 PHP 脚本的 HTML 表单

> ID：13387281
> 
> 赞同：-5
> 
> 时间：2012-11-14T21:03:04.750
> 
> 标签：php, html

提交表单时如何引用 PHP 文件？我正在使用文本编辑器，所以没什么特别的。
这是代码对我不起作用：

```
<html>  
    <body>  
        <form action="MAILTO:example@google.com">  
            <input>  
        </form> 
    </body>  
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:09:12.270

您的代码不是 PHP。事实上，这没有任何意义。`matilo:email@derp.com`只是一个打开浏览器默认电子邮件客户端的链接。

`action`正如 Marc B 作为评论发布的那样，您可以在-argument中引用任何文件（例如 PHP） 。在此文件中，您将在`$_POST`-variable 中提供所有表单字段。

如果您想发送电子邮件，您需要查看该`mail`功能 (http://www.php.net/mail)。只是想指出，没有内置函数可以将您的表单作为电子邮件发送（看起来这就是您想要的）。您要么必须编写自己的代码，要么使用执行此操作的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:10:02.280

表单标签的 action 属性将浏览器定向到您要发送表单数据的位置。要将浏览器定向到 PHP 脚本，只需将代码中的 action 属性更改为您希望将数据发送到的 PHP 脚本。

```
<form action="my_php_file.php"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:11:07.320

```
<html>
<body>

<form action="welcome.php" method="post">
Name: <input type="text" name="fname" />
Age: <input type="text" name="age" />
<input type="submit" />
</form>

</body>
</html> 
```

来源：[http ://www.w3schools.com/php/php_forms.asp](http://www.w3schools.com/php/php_forms.asp)

# iphone - 如何制作两个特定图像，当用户将一个放在另一个之上时，创建第三个指定图像（所有这些都是预先创建的图像）

> ID：13387291
> 
> 赞同：0
> 
> 时间：2012-11-14T21:03:40.457
> 
> 标签：iphone, objective-c, xcode, xcode4.4

我希望用户能够按下并拖动一个图像（例如：image1.png）并将其放在另一个图像上（例如：image2.png）。当用户释放时，第三个图像（例如：image3.png）被添加到屏幕上。我怎么能在 xcode 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:14:12.643

做自己想做的事情没那么容易，你得开始看这个[来自 Apple Developer program 的接触教程](http://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:14:25.517

这是图像移动的代码示例：

```
 -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [[event allTouches] anyObject];
        CGPoint location = [touch locationInView:self.view];
        if (CGRectContainsPoint([image1 frame], location)) {
        images.center = location;

        if (CGRectContainsPoint([image1 frame], [image2 frame]) {
           //place your code when image1 = images2       
           [self.view addSubview:image3];
           }
        }
    } 
```

我认为这样的事情可以工作

# list - SWI-Prolog 中的列表

> ID：13387292
> 
> 赞同：1
> 
> 时间：2012-11-14T21:03:48.960
> 
> 标签：list, prolog

请帮我！我不明白 SWI-Prolog

从列表 L1 到列表 L2，另一个元素等于列表 L1 中接下来三个项目的算术平均值。如果 L1 元素的数量不能被 3 整除，则列表 L2 中的最后一项通过将一个或两个最近项列表 L1 的总和除以 3 获得。为提示屏幕引入列表 L1。因此，程序应输出输入 L1 和 L2 结果列表。

清单项目可应要求提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:17:31.890

这个问题几乎逐字翻译成 Prolog。

首先，添加基本情况，即空列表转换为空列表：

```
by_three([], []). 
```

现在添加主要规则，以三个一组的形式抓取初始项目 、 和 ，并对它们进行`H1`平均`H2`：`H3`

```
by_three([H1,H2,H3|T],[A|RT]) :- A is (H1+H2+H3) / 3, by_three(T, RT). 
```

注意这里的递归调用：`T`原始列表的尾部在规则末尾的`RT`调用中转换为。`by_three/2`

最后，为一元素列表和二元素列表添加两个案例：

```
by_three([H],[A]) :- A is H / 3.
by_three([H1,H2],[A]) :- A is (H1+H2) / 3. 
```

就是这样，你完成了！

# python - 如何使用 FILTER 选择不匹配的数据

> ID：13387293
> 
> 赞同：0
> 
> 时间：2012-11-14T21:03:55.083
> 
> 标签：python, select, sparql, rdflib

我`rdflib`在 Python 中使用并运行`SPARQL SELECT`查询以获取相关数据。

`FILTER`使用如下所述的命令过滤某些条件的数据非常容易`FILTER regex(?pname,'"""+samplepersnalisedexpertise+"""',"i")`，但是如果我必须选择不匹配的数据，那么我们需要如何使用`FILTER`？我试过`FILTER (?personuri != '"""+imURI+"""')`在下面使用，但这不起作用。

```
exprtppl=  GraphR.query(""" 
PREFIX foaf: <http://xmlns.com/foaf/0.1/>         
PREFIX owl: <http://www.w3.org/2002/07/owl#>      
PREFIX dc: <http://purl.org/dc/elements/1.1/>         
PREFIX bibo: <http://purl.org/ontology/bibo/>

SELECT ?nname 
{ 
    ?puburi dc:title ?pname. 
    FILTER regex(?pname,'"""+samplepersnalisedexpertise+"""',"i")
    ?personuri foaf:publications ?puburi.
    ?personuri foaf:nick ?nname
    FILTER (?personuri != '"""+imURI+"""')

 }""") 
```

你们中的任何人都可以帮助解决问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T04:06:02.577

您正在尝试与 URI 值进行比较，该值不应被引号包围，而应被鱼钩包围：

```
FILTER(?personuri != <"""+imURI+""">) 
```

顺便说一句，@morphyn 上面给出的建议（使用`str()`函数）也可以工作，但效率较低。

# javascript - 将检索到的值与 javascript 和 jquery 结合起来

> ID：13387303
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:05:25.570
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 JavaScript 中将字符串转换为整数？](https://stackoverflow.com/questions/1133770/how-do-i-convert-a-string-into-an-integer-in-javascript)

我有一个包含产品选项的选择元素。我想要实现的是，当他们选择一个选项时，页面上的价格会自动调整。我已经想出了如何检索这些值，但是当我将它们组合起来时，它只是将两个数字放在一起，而不是实际添加它们。

例如，当我有 50 + 10 时，它不是输出 60，而是输出 5010。

我的代码：

```
$('.product_options').change(function(){
var base_price = $('#base_price').html();
var add_price = $(this).find("option:selected").data('price');

var new_price = base_price+add_price;

console.log(new_price);

$('.current_price').html(base_price+add_price); 
```

});

有没有办法可以将它们都转换为整数，以便操作实际进行？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:07:18.250

利用`parseInt`

```
$('.product_options').change(function(){
var base_price = parseInt($('#base_price').html(), 10); // 10 as second argument will make sure that base is 10.
var add_price = parseInt($(this).find("option:selected").data('price'), 10);

var new_price = base_price+add_price;

console.log(new_price);

$('.current_price').html(base_price+add_price);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:07:52.940

尝试：

```
var base_price = +$('#base_price').html();
var add_price = +$(this).find("option:selected").data('price'); 
```

查看强大的：[Mozilla 的算术运算符参考 - 一元否定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#-_.28Unary_Negation.29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:10:08.643

就在这里。

```
intval = parseInt(string) 
```

就是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:08:40.457

您从 DOM 中提取的任何值都将是字符串，并且需要转换为数字类型才能对它们进行数学运算。

`parseInt( ... )`是一个内置的 javascript 函数，如果字符串仅包含数字，则将字符串转换为整数。

如果需要十进制数，可以使用`parseFlaot`.

```
var new_price = parseInt(base_price)+parseInt(add_price);
// new_price is now set to the sum of `base_price` and `add_price` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T21:09:27.323

使用 parseFloat 或 parseInt

```
$('.product_options').change(function(){
  var base_price = $('#base_price').html();
  var add_price = $(this).find("option:selected").data('price');

  var new_price = parseFloat(base_price) + parseFloat(add_price);

  console.log(new_price);

  $('.current_price').html(base_price+add_price);
}); 
```

# c# - 如何找到图像的旋转角度？

> ID：13387309
> 
> 赞同：9
> 
> 时间：2012-11-14T21:06:12.507
> 
> 标签：c#, .net, algorithm, math, image-processing

我将位图图像输入到我的 C# 程序中，以便能够执行 OCR 来识别图像中的字符。如果图像不旋转，我可以做得很好。然而，程序要求之一是程序自动确定图像是否已旋转，并自动纠正这些旋转。

我尝试实现一种简单的方法，在图像上跟踪线条并记录与字符接触的点，然后对线条点执行简单的线性回归。这在一定程度上是有效的，尽管由于字符的弯曲等原因，它还没有被证明非常准确。

我想知道是否有更好的方法来解决这个问题？提前谢谢了！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:11:39.293

可以肯定的是，这是一个有趣的问题。我会寻找某些更容易轮换的字母。例如，大写字母 A 或 R 或​​ K 的下半部分应大致位于同一水平面。另一种选择是获取无法识别的字母并以各种方式轮换它们并重新尝试识别它们。如果在旋转时可以识别原始扫描中无法识别的字母，那是一个很大的线索。一旦您确定了使不可识别字符变为可识别字符的“校正”旋转，请将相同的旋转值应用于其他字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T05:52:01.993

如果它识别出文本行，则尝试模糊图像，使线条大部分是实心的，并找到线条的方向（通过傅里叶变换分析或脊线检测）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T01:13:25.533

我使用[gmseDeskew](http://www.codeproject.com/Articles/13615/How-to-deskew-an-image)算法在我的程序中对图像进行纠偏。它工作得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:40:51.593

如果文本的格式类似于打印文档（列和文本行），那么您可以利用这一点。

我经常看到用于文档文本的一种方法是进行投影配置文件：

1.  以特定方向扫描文档并总结每条扫描线上的“黑色”像素数（创建一维计数数组，每个索引代表一个 Y 坐标，配置文件）。
2.  计算计数的方差（配置文件）。
3.  重复多个角度，（可以以二进制搜索方式完成以减少处理）
4.  导致最大差异的角度是正确的角度（由于文本行从打印的文本中产生大的峰值，而由于行之间没有文本而产生低谷）

然后在找到这个角度后，您可以相应地调整图像并进行出色的 OCR。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T08:36:23.780

我们之前也遇到过类似的问题，我们搜索了一个简单快捷的解决方案，最终我们使用了一个商业工具包（leadtools）。您可以使用它在 OCR 之前对图像进行自动处理。您可以查看此[帮助主题](http://www.leadtools.com/help/leadtools/v175/dh/fo/leadtools.forms.ocr~leadtools.forms.ocr.iocrpage~autopreprocess.html)以了解如何使用此工具包来处理和扫描图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T21:52:46.467

可能更容易找到与文本相邻的垂直线（即左边距）。对于每条扫描线，记录第一个黑色像素。将所有这些放在线性回归中，你应该得到一条接近垂直的线。从真正的垂直方向测量其角度，您应该能够取消旋转文本。你可以想象对顶部、底部和右侧也做同样的事情，然后取平均值。

# c# - 表单提交时验证控件未触发

> ID：13387311
> 
> 赞同：0
> 
> 时间：2012-11-14T21:06:15.207
> 
> 标签：c#, asp.net, validation, formview

我正在使用一个`FormView`控件来允许用户向数据库中插入行。我想验证这些输入字段，因此添加了一个正则表达式验证助手。这是标记：

```
<InsertItemTemplate>
    <p>
        Name:
        <asp:TextBox ID="NameTextBox" runat="server" Text='<%# Bind("Name") %>' />
        <asp:RegularExpressionValidator ValidationExpression="^[a-zA-Z0-9 ]*$" ControlToValidate="NameTextBox" ID="NameTextBoxValidator" runat="server" ErrorMessage="Must be alphanumeric characters and spaces"></asp:RegularExpressionValidator>
    </p>
    <p>
        Location:
        <asp:TextBox ID="LocationTextBox" runat="server" 
            Text='<%# Bind("Location") %>' />
    </p>
    <p>
        <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" 
            CommandName="Insert" Text="Insert" />
    </p>
</InsertItemTemplate> 
```

但是，当我单击`InsertButton`页面刷新时，我从 SQL Server 收到一个错误，说它不能插入 NULL 值，验证器根本没有被使用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:09:06.057

我假设用户没有输入任何文本并且数据库不允许空值。

A`RegularExpressionValidator`不会验证空控件。所以你还需要提供一个`RequiredFieldValidator`.

> 如果输入控件为空，则验证不会失败。使用RequiredFieldValidator 控件使字段成为必填项。

[http://www.w3schools.com/aspnet/control_regularexpvalidator.asp](http://www.w3schools.com/aspnet/control_regularexpvalidator.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:09:29.047

这里没有太多信息，但我会冒险猜测：

检查以确保在 OnLoad 上没有发生任何使事情消失的事情。如果您确实有 OnLoad，请确保它仅在 IsPostback 为 false 时触发。

# asp.net-mvc-4 - Kendo-ui MVC PopUp 编辑器：如何隐藏字段

> ID：13387316
> 
> 赞同：7
> 
> 时间：2012-11-14T21:06:40.353
> 
> 标签：asp.net-mvc-4, kendo-ui

我正在使用 Kendo ASP.NET MVC，我想对编辑表单进行一些控制。

我想做的事情：

*   隐藏我的 ID 字段
*   将我的属性代码和平方英尺更改为常规 TextBoxFor 字段
*   将购买日期和销售日期更改为 Kendo DatePickerFor 而不是显示的 DateTimePickerFor。

[链接到编辑器表单的屏幕截图](http://www.kendoui.com/ClientsFiles/406564_Capture.PNG)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T21:54:33.330

单击编辑时，Kendo 使用对象的默认 EditorTemplate。如果您不熟悉编辑器模板的工作原理，请查看[这篇文章](https://web.archive.org/web/20160816211949/http://coding-in.net:80/asp-net-mvc-3-how-to-use-editortemplates/)。

您有两种解决方法，一种是创建仅列出您想要的字段的自定义视图编辑器模板。或者（这是更简单且首选的方法），在许多情况下，您可以摆脱默认的编辑器模板，并使用对象上的元数据来控制呈现（以及如何）呈现哪些字段。您可以通过使用属性标记单个属性来隐藏它们`[ScaffoldColumn(false)]`。在控制显示的编辑器类型方面，您可以通过使用`[DataType(DataType.Date)]`或标记属性来完成此操作`[DataType(DataType.Text)]`

# android - setText 没有将文本设置为 EditText

> ID：13387318
> 
> 赞同：8
> 
> 时间：2012-11-14T21:06:48.527
> 
> 标签：android, android-edittext, settext

我遇到了一个在使用 Android 开发近三年来从未遇到过的问题......

我想拍照，拍照后，`EditText`活动的s变得清晰。我正在做的是将 的值设置为用于`EditText`在拍照后恢复它们。`Strings``getText().toString()`

字符串与数据完美存储，但是当我使用时`setText`，它不起作用......奇怪的是它`setHint`起作用了！

怎么会这样？

这是我正在使用的代码：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                // Image captured and saved to fileUri specified in the Intent

                grabImage(imgView);

                for (int u = 0; u <= 2; u++)
                {
                    if (savedImgs[u].equals(""))
                    {
                        imgs = u + 1;
                        savedImgs[u] = photo.toString();
                        break;
                    }
                }

                /*Bitmap thumbnail = (Bitmap) data.getExtras().get("data"); ---> It is a small bitmap, for icons...
                imgView.setImageBitmap(thumbnail);
                imgView.setVisibility(View.VISIBLE);*/

            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the image capture
            } else {
                Toast.makeText(this, "Image couldn't be taken. Try again later.", Toast.LENGTH_LONG).show();
            }
        }

        if (!tempSpotName.equals("") || !tempSpotDesc.equals("")) {

            name.setText(tempSpotName);
            description.setText(tempSpotDesc);
        }
    } 
```

`name`和`description`是全球性的 和`EditTexts`是全球性的。`tempSpotName``tempSpotDesc``Strings`

如何设置文本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T21:30:23.620

`onActivityResult()`不是返回 Activity 时调用的最后一个方法。您可以在文档中刷新您[对生命周期的记忆。](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29):)

正如我们在评论中所讨论的，如果你`setText()`再次调用这样的方法，`onResume()`将会覆盖`onActivityResult()`.

Fragments 也是如此，您需要在 onViewStateRestored() 方法（在 API 17 中添加）中进行更新。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-11T10:11:36.033

有时改变结果`edittext`是`onactivity`行不通的。我也面临同样的问题

而不是设置

```
edittext.settext("yourtext"); 
```

更改为跟随`onactivityresult`

```
edittext.post(new Runnable(){
edittext.settext("yourtext");
}); 
```

它对我有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T21:18:43.200

首先，您必须对此进行调试。

有一个名为 TextWatcher 的类。每次您的 Textbox.Text 更改时都会调用它。所以这更容易调试和处理问题。网址：http: [//developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

实施示例：

```
name.addTextChangedListener(new TextWatcher() {

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

        doSomething();

    } 

}); 
```

祝你好运 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T09:50:28.920

您可以强制使用 EditText.SetText("blablabla..."); 在您的 OnActivity 结果中通过 3 个简单的步骤：

1.  将您的布​​局重新加载到您的活动中
2.  重新绑定您的 EditText
3.  像往常一样使用 SetText。

在此示例代码中，我传递了一个带有意图的 URL 字符串并将其写入 TextView：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{       
    if (resultCode == RESULT_OK) 
    {
        QRdata= data.getStringExtra("QRURL");

        if (QRdata.length()>0)
        {
                            //Step1
            setContentView(R.layout.activity_confirmpackage); 
                            //Step2
            TextView qrtxt=(TextView)this.findViewById(R.id.qrurl); 
                            //Setp 3,Voilà!
            qrtxt.setText(QRdata.toString()); 
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-18T09:58:43.733

这个解决方案对我有用（kotlin）

```
val editText= EditText(context)
editText.apply {
   layoutParams = LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTEXT
        )}
editText.doOnPreDraw {
    editText.setText("your text")
} 
```

# ios - 在子视图中调出 UIDatePicker 无法正确设置动画，但将其关闭可以

> ID：13387319
> 
> 赞同：0
> 
> 时间：2012-11-14T21:07:03.767
> 
> 标签：ios

我制作了一个提示按钮，可以调出这个子视图，一切正常，但动画看起来很糟糕。这是启动它的代码：

```
 int height = 255;

//create new view
self.NewView = [[UIView alloc] initWithFrame:CGRectMake(0, 200, 320, height)];
self.NewView.backgroundColor = [UIColor colorWithWhite:1 alpha:1];

//add toolbar
UIToolbar * toolbar = [[UIToolbar alloc] initWithFrame: CGRectMake(0, 0, 320, 40)];
toolbar.barStyle = UIBarStyleBlack;

//add button
UIBarButtonItem *infoButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:nil action:@selector(dismissCustom:)];
toolbar.items = [NSArray arrayWithObjects:infoButtonItem, nil];

//add date picker
self.datePicker = [[UIDatePicker alloc] init];
self.datePicker.datePickerMode = UIDatePickerModeDateAndTime ;
self.datePicker.hidden = NO;
self.datePicker.date = [NSDate date];
self.datePicker.frame = CGRectMake(0, 40, 320, 250);
[self.datePicker addTarget:self action:nil forControlEvents:UIControlEventValueChanged];
[self.NewView addSubview:self.datePicker];

//add popup view
[self.NewView addSubview:toolbar];
__block CGRect temp = self.NewView.frame;
temp.origin.y = CGRectGetMaxY(self.view.bounds);
[UIView animateWithDuration:0.5
                 animations:^{temp.origin.y -= height, self.NewView.frame = temp;}
                 completion:^(BOOL finished) {[self.view addSubview:self.NewView];}]; 
```

这是退出子视图的代码，效果很好：

```
int height = 0;
__block CGRect temp = self.NewView.frame;
temp.origin.y = CGRectGetMaxY(self.view.bounds);    
[UIView animateWithDuration:0.5 animations:^{temp.origin.y -= height, self.NewView.frame = temp;} completion:^(BOOL finished) {
    [self.NewView removeFromSuperview];}]; 
```

有谁知道出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T14:51:22.570

在动画之前将 NewView 添加到 self.view

```
CGFloat height = 255.0;

// create new view
self.NewView = [[UIView alloc] initWithFrame:CGRectMake(0, CGRectGetMaxY(self.view.bounds), 320, height)];

// init and add toolbar, button and pickerView as in your code
// ...

// add popup view
[self.view addSubview:self.NewView];
CGRect newViewFrame = self.NewView.frame;
newViewFrame.origin.y -= newViewFrame.size.height;
[UIView animateWithDuration:0.5 animations:^{
    self.NewView.frame = newViewFrame;
} completion:nil]; 
```

# ios - iOS 如何在一个视图上播放多个视频

> ID：13387330
> 
> 赞同：1
> 
> 时间：2012-11-14T21:07:49.653
> 
> 标签：ios, ios6

我想知道如何在一页中播放多个视频，比如你有两个按钮，当你按下一个时，它会播放一个视频，当你按下另一个时，它会播放另一个。到目前为止我有这个代码：

```
-(void)WelcomeVideo1
{
    NSURL *url31 = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"DirectorsWelcome" ofType:@"mp4"]];
    welcomePlayer1 =  [[MPMoviePlayerController alloc]
                      initWithContentURL:url31];

    welcomePlayer1.controlStyle = MPMovieControlStyleDefault;
   welcomePlayer1.shouldAutoplay = YES;
    [self.view addSubview:welcomePlayer1.view];
    [welcomePlayer1 setFullscreen:YES animated:YES];
}

-(void) moviePlayBackDidFinish:(NSNotification *)aNotification{
    [welcomePlayer1.view removeFromSuperview];
    welcomePlayer1 = nil;
}

- (void)moviePlayerWillExitFullscreen:(NSNotification*) aNotification {
      [welcomePlayer1 stop];
    [welcomePlayer1.view removeFromSuperview];
   welcomePlayer1 = nil;
}

-(void)storyVideo1
{
    NSURL *url4 = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                          pathForResource:@"OurStory" ofType:@"mp4"]];
    storyPlayer1 =  [[MPMoviePlayerController alloc]
                       initWithContentURL:url4];

    storyPlayer1.controlStyle = MPMovieControlStyleDefault;
    storyPlayer1.shouldAutoplay = YES;
    [self.view addSubview:storyPlayer1.view];
    [storyPlayer1 setFullscreen:YES animated:YES];
}

-(void) moviePlayBackDidFinish2:(NSNotification *)aNotification{
    [storyPlayer1.view removeFromSuperview];
    storyPlayer1 = nil;
}

- (void)moviePlayerWillExitFullscreen2:(NSNotification*) aNotification {
    [storyPlayer1 stop];
    [storyPlayer1.view removeFromSuperview];
    storyPlayer1 = nil;
} 
```

但是每当我尝试播放这两个视频时，我播放的第二个视频都会使应用程序崩溃。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T17:23:03.073

使用[`AVPlayer`](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)and[`AVPlayerLayer`](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)而不是`MPMoviePlayerController`. 看看下面的[苹果例子](https://developer.apple.com/Library/ios/samplecode/AVPlayerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010101)。

# c - c中的字符串函数

> ID：13387332
> 
> 赞同：0
> 
> 时间：2012-11-14T21:07:55.267
> 
> 标签：c, string

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

我正在编写一个简单的字符串函数。问题是：我声明了一个 char 指针，然后一旦我尝试更新特定字符，程序就会崩溃。

我检查了一些以前写的字符串处理，我发现它们修改了特定的字符。但是当我尝试运行它们时，我遇到了同样的问题。

样本：

```
 stringprocess()
{
 char *s;
 s=" I am c programmer";
 s=" but, ..... um";

 *s='x'; //program crashes here...

 *p="abc";
 *s=*p; // this also cause crashing
........
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:09:10.723

```
s=" but, ..... um"; 
```

`s`指向字符串文字。尝试修改字符串文字会调用未定义的行为。通常，字符串文字存储在只读内存中，然后崩溃是这种尝试的直接后果。

如果要修改内容，应该使用`char s[100]`（仅举例）或ed 指针。`malloc`

# php - 自动加载时的 ltrim 类名

> ID：13387335
> 
> 赞同：2
> 
> 时间：2012-11-14T21:08:00.473
> 
> 标签：php

我看到不同的库（在本例中为 Symfony）的 phpunit bootstrap.php 代码通常包括以下内容：

```
spl_autoload_register(function ($class) {
    if (0 === strpos(ltrim($class, '/'), 'Symfony\Component\EventDispatcher')) {
        if (file_exists($file = __DIR__.'/../'.substr(str_replace('\\', '/', $class), strlen('Symfony\Component\EventDispatcher')).'.php')) {
            require_once $file;
        }
    }
}); 
```

我想知道在什么情况下类名会有前导斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:32:47.397

我不是 Symfony 方面的专家，但看起来他们正在使用文件名并尝试加载它，如果它具有命名空间**Symfony\Component\EventDispatcher**。ltrim **()**简单地删除任何残留物，以便在它们添加自己的搜索路径时不会发生错误。

我只能猜测，但我很确定这是怎么回事。

# c - 堆 C 数据存储

> ID：13387336
> 
> 赞同：0
> 
> 时间：2012-11-14T21:08:03.613
> 
> 标签：c, arrays, pointers, heap

我正在用 C 编写一个堆数据结构。有一件事我无法决定。我将它实现为一个数组。它的工作方式是，“插入”函数采用指向某些数据的指针并将指向的该数据的所有字节复制到数组中，这是一个好方法吗？或者我应该只存储指针本身，调用函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:18:25.320

好吧，您必须考虑指向的内存可能会被更改或变得无效，例如当它是堆栈上的变量时。所以在大多数情况下，只存储指针并不是一个好主意。如果您*必须*有一个函数 insert() ，则无法复制内存 - 尽管这很慢。最好是使用 memcpy()，因为这仍然是最快的函数。

堆的设计通常有点不同：您有一个函数 malloc(int size) 调用它来*检索*指向所需大小的内存区域的指针。在那里你可以存储任何你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:21:19.133

如果插入的对象是用 malloc/calloc 分配的，则应该存储指针。特别是使用结构，复制对象可能会增加开销。

# vb.net - 获取具有固定宽度的文本框的字体

> ID：13387337
> 
> 赞同：2
> 
> 时间：2012-11-14T21:08:13.550
> 
> 标签：vb.net, textbox, font-size

具有固定宽度的 VB 文本框控件。如何为给定的字符串长度测量或设置控件的字体大小？字符串/文本应该完全适合文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:10:51.843

您可以使用[Graphics.MeasureString](http://msdn.microsoft.com/en-us/library/6xe5hazb%28v=vs.100%29.aspx)来测量使用指定字体绘制的字符串。例如，循环浏览几种字体大小并选择最适合您的文本框宽度的一种。

另一种可能更适合非 ASCII 字符的方法是[TextRenderer.MeasureText](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.measuretext%28v=vs.100%29.aspx)。由[this answer](https://stackoverflow.com/a/3812633/897326)建议。

# php - Drupal 模板变量

> ID：13387338
> 
> 赞同：0
> 
> 时间：2012-11-14T21:08:14.360
> 
> 标签：php, drupal

自从我开始使用 drupal 以来，一直困扰着我的事情是 php 引擎如何准确地知道您在模板文件中指的是哪个 $node/$classes/$attributes。这些变量永远不会被声明为全局变量，那么 php 引擎如何确定您所指的“$node”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:25:01.363

请参阅[http://drupal.org/node/223430](http://drupal.org/node/223430)其中指出

> 预处理器的主要作用是设置要放置在模板 ( `.tpl.php`) 文件中的变量。从 Drupal 7 开始，它们适用于模板和函数，而在 Drupal 6 中，预处理函数仅适用于作为模板实现的主题挂钩。普通主题函数不与预处理器交互。

查看[API](http://api.drupal.org/api/drupal/modules%21node%21node.tpl.php/7)中提到的`template_preprocess*`和。这些函数向您展示了设置您可以在节点模板中访问的各种变量的代码。`template_process`

以类似的方式，您还可以在主题函数中添加自己的预处理代码，以添加到 tpl.php 文件中可用的变量，如下所示：

```
/**
 * Implements hook_preprocess_HOOK().
 */
function MY_MODULE_preprocess_node(&$variables) {
   $variables['hello'] = 'Look at me now!';
} 
```

在此之后，您可以`$hello`在`node.tpl.php`文件中引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:09:57.400

这些变量由 Drupal 的模板引擎设置。

# c# - 如何在回发时加载带有冻结标题的页面内容？

> ID：13387340
> 
> 赞同：1
> 
> 时间：2012-11-14T21:08:15.000
> 
> 标签：c#, jquery, asp.net, ajax

我正在使用 asp.net 和 c#.net。我将实现一个网站，该网站具有 Microsoft 在此链接上所做的内容导航： [Microsoft Windows](http://windows.microsoft.com/en-US/windows-8/basics#1TC=t1)

在此链接中，您可以在回发时使用冻结标题浏览页面内容，并且您还可以在没有页面回发的情况下从左侧导航栏浏览视频。重要的是每次点击 url 都会改变。

任何想法或帮助将不胜感激。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:39:14.153

首先，澄清一下，只有在提交表单元素时才需要回发。如果您正在创建一个 webforms 应用程序，您可以轻松地使用类似`HyperLink`a 的控件`NavigationUrl`在 URL 之间导航，而无需回发。

如果您的意思是您在点击链接时看到页面部分更新，那不是我遇到的情况。单击该页面中的链接时，页面似乎完全重新加载。在您自己的站点中，您可以使用 AJAX 和 JavaScript 来实现不需要繁重导航请求的导航系统。查看[操纵浏览器历史记录 (MDN)](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)以获取有关令人兴奋的新 JavaScript 功能的信息，这些功能将使您无需重新加载页面即可修改浏览器的 URL/历史记录。有几个 JS 库与此功能集成，为您提供“AJAX”导航功能。

要简单地让标题不随页面的其余部分滚动，请`position: fixed`在 CSS 中使用该元素。

# android - 尝试加载 csvToGeoPoints 时出错

> ID：13387341
> 
> 赞同：0
> 
> 时间：2012-11-14T21:08:20.277
> 
> 标签：android, csv, mapactivity, geopoints

我需要从 csv 收集 gps 点并创建一个地理点列表，这样我就可以将它们作为叠加层添加到我的地图上。所以我想出了这段代码，它根据要回收的垃圾类型收集所有相关点。我正在尝试加载它并出现错误（或者如果我错了并且错误与它无关，请告诉我）：

请考虑 recycleType = 3（电池）。

```
public ArrayList<GeoPoint> csvToGeoPoints(int recycleType) {
    String csvString = null;
    URL myurl = null;
    HttpURLConnection urlConn;

    InputStreamReader inStream = null;
    BufferedReader buff = null;

    try {
        myurl = new URL("http://www.tel-aviv.gov.il/OnlineServices/DataTLV/Documents/%D7%A2%D7%99%D7%A8%D7%99%D7%99%D7%AA%20%D7%AA%D7%9C-%D7%90%D7%91%D7%99%D7%91-%D7%99%D7%A4%D7%95%20-%20%D7%A4%D7%A8%D7%99%D7%A1%D7%AA%20%D7%9E%D7%99%D7%9B%D7%9C%D7%99%20%D7%9E%D7%97%D7%96%D7%95%D7%A8.csv");
        //urlConn = myurl.openConnection();
        urlConn = (HttpURLConnection) myurl.openConnection();
        inStream = new InputStreamReader(urlConn.getInputStream());
        buff = new BufferedReader(inStream);
        while ((csvString = buff.readLine()) != null) {
            String[] elements = csvString.split(","); // getting the objects out of the csv's line
            int lineLen = elements.length; // for later checking that line is not corrupted
            if (lineLen == 14) { // making sure that line actually contains 14 objects. otherwise, skipping it
                for (int i=0;i < lineLen;i++) { // for each line in csv file
                    int currentRecycleType = Integer.getInteger(elements[6]); // checking the type of recycling chosen by user
                    if (recycleType == currentRecycleType) { // only if this line has the user's choice, collecting the item
                        int lon = Integer.getInteger(elements[10])*1000000;
                        int lat = Integer.getInteger(elements[11])*1000000;
                        GeoPoint currentPoint = new GeoPoint(lon,lat);
                        myPoints.add(currentPoint); // adding all the points together :)
                    }
                }
            }   
        }

    } catch (MalformedURLException e) {
        //System.out.println("Please check the spelling of the url: "+ e.toString());
        // pop up a window with error
        AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Reset...");
        alertDialog.setMessage("Error: " + e.toString());
        //alertDialog.setButton("OK", null);
        //alertDialog.setIcon(R.drawable.icon);
        alertDialog.show();
    } catch (IOException e1) {
        //System.out.println("Can't read from the Internet: " + e1.toString());
        // pop up a window with error
        AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Reset...");
        alertDialog.setMessage("Error: " + e1.toString());
        //alertDialog.setButton("OK", null);
        //alertDialog.setIcon(R.drawable.icon);
        alertDialog.show();
    }
    finally {
        try {
            inStream.close();
            buff.close();
        } catch (Exception e) {
            AlertDialog alertDialog = new AlertDialog.Builder(this).create();
            alertDialog.setTitle("error");
            alertDialog.setMessage("Error: " + e.toString());
            //alertDialog.setButton("OK", null);
            //alertDialog.setIcon(R.drawable.icon);
            alertDialog.show();
            //e.printStackTrace();
        }
    }

    return myPoints;

} 
```

我收到的错误消息是：

```
 11-14 22:54:25.700: E/Trace(733): error opening trace file: No such file or directory (2)
11-14 22:54:26.620: D/dalvikvm(733): GC_CONCURRENT freed 178K, 3% free 8268K/8519K, paused 32ms+15ms, total 136ms
11-14 22:54:26.620: D/dalvikvm(733): WAIT_FOR_CONCURRENT_GC blocked 53ms
11-14 22:54:26.630: W/CursorWrapperInner(733): Cursor finalized without prior close()
11-14 22:54:26.630: W/CursorWrapperInner(733): Cursor finalized without prior close()
11-14 22:54:26.959: D/dalvikvm(733): GC_CONCURRENT freed 27K, 2% free 8675K/8839K, paused 28ms+29ms, total 122ms
11-14 22:54:26.980: D/AndroidRuntime(733): Shutting down VM
11-14 22:54:26.990: W/dalvikvm(733): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-14 22:54:27.010: E/AndroidRuntime(733): FATAL EXCEPTION: main
11-14 22:54:27.010: E/AndroidRuntime(733): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.recycletelaviv/com.example.recycletelaviv.ChooseRecycle}: android.os.NetworkOnMainThreadException
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.os.Looper.loop(Looper.java:137)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-14 22:54:27.010: E/AndroidRuntime(733):  at java.lang.reflect.Method.invokeNative(Native Method)
11-14 22:54:27.010: E/AndroidRuntime(733):  at java.lang.reflect.Method.invoke(Method.java:511)
11-14 22:54:27.010: E/AndroidRuntime(733):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-14 22:54:27.010: E/AndroidRuntime(733):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-14 22:54:27.010: E/AndroidRuntime(733):  at dalvik.system.NativeStart.main(Native Method)
11-14 22:54:27.010: E/AndroidRuntime(733): Caused by: android.os.NetworkOnMainThreadException
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-14 22:54:27.010: E/AndroidRuntime(733):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-14 22:54:27.010: E/AndroidRuntime(733):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-14 22:54:27.010: E/AndroidRuntime(733):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
11-14 22:54:27.010: E/AndroidRuntime(733):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
11-14 22:54:27.010: E/AndroidRuntime(733):  at com.example.recycletelaviv.ChooseRecycle.csvToGeoPoints(ChooseRecycle.java:126)
11-14 22:54:27.010: E/AndroidRuntime(733):  at com.example.recycletelaviv.ChooseRecycle.onCreate(ChooseRecycle.java:81)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.Activity.performCreate(Activity.java:5008)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-14 22:54:27.010: E/AndroidRuntime(733):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-14 22:54:27.010: E/AndroidRuntime(733):  ... 11 more
11-14 22:54:46.440: I/Process(733): Sending signal. PID: 733 SIG: 9 
```

关于为什么会发生这种情况的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:17:57.800

你不能在 UI 线程上做网络 IO，它需要太长时间并且会使手机无响应。您需要在另一个线程中执行此操作，通常是 AsyncTask

# facebook - 使用 Facebook Graph API 将照片发布到相册但隐藏在时间线上

> ID：13387346
> 
> 赞同：5
> 
> 时间：2012-11-14T21:08:37.047
> 
> 标签：facebook, facebook-graph-api, social-networking

有没有办法将照片发布到相册，但以隐藏在时间轴中的方式进行。

我可以使用 Graph API 将照片发布到相册，然后手动隐藏由 Wall 时间线生成的新闻源帖子。

是否可以在发布照片本身时执行此操作。我是否可以设置一个字段/属性来阻止照片发布在时间轴上显示？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:53:03.053

是的，将 no_story:1 添加到您的 POST 数据中，图像将被上传但不会显示在时间轴中。查看[http://developers.facebook.com/blog/post/482/](http://developers.facebook.com/blog/post/482/)

# azure - 使用 Azure 服务总线通过端口 80 发送消息

> ID：13387349
> 
> 赞同：2
> 
> 时间：2012-11-14T21:08:44.733
> 
> 标签：azure, appfabric, azure-queues, azureservicebus

似乎我的问题的解决方案应该比现在更容易，这让我觉得我错过了显而易见的事情。我正在尝试测试并确保远程客户端计算机可以发送/接收来自 Azure 服务总线队列的消息。

我正在使用 Microsoft 在[https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-amqp/提供的示例应用程序](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-amqp/)

只要所有端口都打开，示例应用程序就可以正常工作。但是，当只有端口 80/443 可用时，我需要该解决方案才能工作。如果我将 Windows 防火墙配置为仅允许 80/443 上的入站/出站流量，则它不起作用。我收到错误“试图以访问权限禁止的方式访问套接字”。

示例应用程序中的违规行是：

```
sender = factory.CreateMessageSender(entityName); 
```

我查看了非常多的网站，我发现的一个建议是将连接模式设置为 Http，如下所示：

```
ServiceBusEnvironment.SystemConnectivity.Mode = ConnectivityMode.Http; 
```

那也行不通。

我没有尝试在远程客户端或 Azure 托管角色上设置自定义服务。我只需要它们都能够通过 Azure 的服务总线队列和主题发送/接收消息。

谁能指出我的缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:45:10.717

从我上面的评论...

我找到了为什么它在我的情况下不起作用的答案。Azure 中 AMQP 的预览库使用的端口与我能找到的所有其他文档不同。使用发布库，它会自动在 https 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:15:36.403

Http 连接模式不适用于 Http 1.0。它仅适用于 Http 1.1...

如果您使用 Http 1.0（主要是代理），则必须打开 TCP 端口（9350-54）

# matlab - Matlab：如何在外部和内部窗口之间改变焦点？

> ID：13387351
> 
> 赞同：4
> 
> 时间：2012-11-14T21:08:50.417
> 
> 标签：matlab, focus

我希望这是一个简单的问题，但我还没有找到答案，也没有看到一个很好的资源。我正在 Matlab 中进行实验，有时我们会调用外部程序。一定时间后，我希望参与者返回 Matlab 进行调查，然后在完成后继续他们的任务。问题是外部代码是交互式的，所以一个人可能正在打字或点击而看不到调查打开，完成调查后我不知道如何自动将它们返回到他们打开的程序（虽然我知道他们什么时候完成他们的调查并自动关闭浏览器）。我的玩具代码示例是：

```
 system('start \max notepad.exe')
    pause(60) %After x seconds a web page opens up in Matlab, how to ensure users see it?
    web('cnn.com') %I have code that will close this after they click on a certain link

    %After close browser, how to return to notepad where they left off? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:52:29.033

两种解决方案可能会对您有所帮助。实际上，它有点复杂。解决方案1使用c代码程序的mex方法控制窗口。方案二也比较复杂，使用MATLAB并行工具箱即可。嗯，我建议你使用解决方案 1。

* * *

## 解决方案1：

1.  创建一个 cpp 文件，它控制您的交互式程序（即此处的窗口资源管理器）。代码如下。将代码复制并保存为 MATLAB 当前文件夹中的“ctrlWindow.cpp”。

2.  通过编译器 lcc 编译 ctrlWindow.cpp：

    ```
    mex -setup % choose compiler: type this command at MATLAB command, then choose lcc complier on windows 32 system

    mex ctrlWindow.cpp % compile cpp: you would find ctrlWindow.mexw32 at current folder 
    ```

3.  在 MATLAB 命令中将 mex 文件作为 m 文件运行：

    ctrlWindow('your_program_window_name',command);

即文件夹“myfold”的窗口名称是myfold，它显示在窗口的左上角，输入命令：

```
ctrlWindow('myfold',6); 
```

这将最小化您的文件夹窗口。我建议你先最小化你的程序窗口，然后再最大化它，参与者会再次关注你的程序：

```
ctrlWindow('myfold',6);%minimize window
ctrlWindow('myfold',3);%maximize window and participants would focus on this window 
```

命令在这里：

```
HIDE             0
SHOWNORMAL       1
NORMAL           1
SHOWMINIMIZED    2
SHOWMAXIMIZED    3
MAXIMIZE         3
SHOWNOACTIVATE   4
SHOW             5
MINIMIZE         6
SHOWMINNOACTIVE  7
SHOWNA           8
RESTORE          9
SHOWDEFAULT      10
FORCEMINIMIZE    11
MAX              11 
```

//filename:ctrlWindow.cpp

```
#include <windows.h>

#include "mex.h"

void mexFunction( int nlhs, mxArray *plhs[],
                  int nrhs, const mxArray *prhs[] )
{
    mxChar* winName; //name of window wanted to be found
    HWND hwnd; //handle of window
    int command; //command of control window
    // check number of input
    if(nrhs!=2)
        mexErrMsgTxt("input must be 2");
    // check class of input
    if (mxIsChar(prhs[0]))
        winName=mxGetChars(prhs[0]);//get name of window
    else
        mexErrMsgTxt("input 1 should be char -- name of window");
    if (mxIsDouble(prhs[1]))
    {
        command = (int) mxGetScalar(prhs[1]);//get command
        if(command<0 || command >11)//check command
            mexErrMsgTxt("No such command!!!");
    }
    else
        mexErrMsgTxt("input 2 should be a double");
    // find window
    hwnd = FindWindowW(NULL, (LPCWSTR)winName);
    if(NULL==hwnd)
    {
        MessageBoxW(NULL,(LPCWSTR) L"Can't find the window!!!",NULL,MB_OK);
        return;
    }
    ShowWindow(hwnd, command);//control the window
} 
```

* * *

## Solution 2:

```
matlabpool open 2 
```

open two matlab background, use first control your first program, use second one control your second program.

# javascript - Yii“每页结果”在同一页面中加载其他 ajax 内容后，ajax 下拉菜单中断

> ID：13387352
> 
> 赞同：2
> 
> 时间：2012-11-14T21:08:55.513
> 
> 标签：javascript, jquery, gridview, yii

我在 Yii 中有一个视图，即“Patients”视图，它有许多 CGridView 和其他在加载初始视图后加载的 ajax 元素。有些是在已经加载 ajax 的 div 中加载的 ajax，这意味着它们嵌套了 2 层。

在这些 ajax 加载的 CGridViews 中，我有下拉菜单，让用户可以设置每个网格中每页的结果数。这可以正常工作，直到用户使用 ajax 在页面上加载另一个元素。在 ajax 加载另一个网格（或其他任何东西）之后，它会破坏每个页面 ajax 函数的所有其他结果，除了刚刚加载的那个。

使用 ajax 加载任何其他内容后，其他 CGridViews 将在使用我的每页结果下拉列表时抛出此 javascript 错误：

**类型错误：设置未定义**

内置的 CGridView 分页器始终适用于所有网格，所以我知道必须有某种方法让我的每个页面选择器的结果找到正确的 $.fn.yiiGridView 进行更新。

加载 cgridview 内联的控制器操作：

```
public function actionInlineSearch()
{
   YiiSessions::model()->setFromRequestCookie();

    $model=new GeneExpressionCufflinksGene('search');
    $model->unsetAttributes();  // clear any default values 
    // page size drop down changed

    if (isset($_GET['gecgPageSize'])) {
        Yii::app()->user->setState('gecgPageSize',(int)$_GET['gecgPageSize']);
        unset($_GET['gecgPageSize']);  // would interfere with pager and repetitive page size change
    }
    $gecgPageSize=Yii::app()->user->getState('gecgPageSize');

    if(isset($_REQUEST['GeneExpressionCufflinksGene']))
        $model->attributes=$_REQUEST['GeneExpressionCufflinksGene'];

    $this->renderPartial('inlineSearch',array('model'=>$model,'gecgPageSize'=>$gecgPageSize), false, true);
} 
```

加载 CGridView 小部件的 inlineSearch 视图：

```
 // $columns[]='normal_allele_depth';
// $columns[]='normal_allele_freq';

echo "<div class='results-selector'>";
echo "Results per page: ". 
    CHtml::dropDownList('gecgPageSize',$gecgPageSize,array(10=>10,20=>20,50=>50,100=>100),array(
        'onchange'=>"
            $.fn.yiiGridView.update('gecg',{ data:{gecgPageSize: $(this).val() }});
        ",
    ));
echo "</div>";

$this->widget('zii.widgets.grid.CGridView', array(
   'id'=>'gecg',
   'filter'=>$model,
   'dataProvider'=>$dataProvider, 
   'columns'=>$columns,
));
?> 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:38:16.043

我不确定我是否得到了您所写的所有内容，但是您对两次深度加载`CGridView`的寻呼机的工作有信心吗？

Yii使用 jQuery 的[.on()](http://api.jquery.com/on/)方法将事件处理程序附加到寻呼机的按钮、排序按钮、[CButtonColumn类的按钮。](http://www.yiiframework.com/doc/api/1.1/CButtonColumn)如果您指定参数，则将触发所有匹配的 jQuery 元素方法的后代事件，无论是在此调用时存在的还是不存在的。`selector``on()`

Yii 将处理程序附加到`document`页面上始终存在（并且必须存在以允许触发事件）的元素。`CGridView`您可以将其视为's`init`方法中的示例`zii/widgets/assets/gridview/jquery.yiigridview.js`：

```
settings.updateSelector = settings.updateSelector
    .replace('{page}', pagerSelector)
    .replace('{sort}', sortSelector);

gridSettings[id] = settings;

if (settings.ajaxUpdate.length > 0) {
    $(document).on('click.yiiGridView', settings.updateSelector, function () {
        // Check to see if History.js is enabled for our Browser
        if (settings.enableHistory && window.History.enabled) {
            // ...
        } else {
            $('#' + id).yiiGridView('update', {url: $(this).attr('href')});
        }
        return false;
    });
} 
```

因此，我想如果您`CGridView`在 ajax 请求上呈现小部件，那么寻呼机、排序等的所有事件处理程序都将附加到`document`ajax 页面的部分呈现元素，但不会附加到新加载的元素所属的主页之一。如果您`inlineSearch`通过 ajax 加载视图，下拉列表可能会发生同样的事情。

这就是为什么，正如我所见，所有事件处理程序都必须附加到`document`最初加载页面的主非 ajax 视图的元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:21:41.263

解决方案：经过一番折腾后，我决定在每个 inlineSearch 视图的末尾手动将`settings`+存储`$.fn.yiiGridView`在一个窗口变量中，然后在我的每页选择器项目发生更改时从窗口中检索它们。

这不是一个非常优雅的解决方案（特别是因为寻呼机工作正常，它会导致多个 $.fn.yiiGridView 实例浮动）但是很好。它可以工作，虽然我在 Yii 上还是个菜鸟，但我可以通过我的研究表明，多个 ajax 加载的小部件存在一些未解决的问题。

inlineSearch 视图中每个页面元素的新结果：

```
echo "<div class='results-selector'>";
echo "Results per page: ". 
    CHtml::dropDownList('gecgPageSize',$gecgPageSize,array(10=>10,20=>20,50=>50,100=>100),array(
        'onchange'=>"
            $.fn.yiiGridView=window.gecgGridView; // necessary in case other other ajax load doesn't have the yiigridview js
            $.fn.yiiGridView.settings['gecg']=window.gecgGridSettings; // because it will have been clobbered by other ajax grid load
            $.fn.yiiGridView.update('gecg',{ data:{ gecgPageSize: $(this).val() }});
        ",
    ));
echo "</div>"; 
```

在 inlineSearch 视图的末尾，这保存`settings`在`window`

```
<script type='text/javascript'>
$(function(){ 
    window.gecgGridView=$.fn.yiiGridView;
    window.gecgGridSettings={
                            ajaxUpdate:["gecg"],
                            ajaxVar:"ajax",
                            pagerClass:"pager",
                            filterClass:"filters",
                            loadingClass:"grid-view-loading",
                            pageVar:"GeneExpressionCufflinksGene_page",
                            pagerClass:"GeneExpressionCufflinksGene_page",
                            selectableRows:1,
                            tableClass:"items",
                            updateSelector:"#gecg .pager a, #gecg .items thead th a",
                            afterAjaxUpdate:function(){}
                          };
})
</script> 
```

# .net - LINQ to SQL DataContext“分布式事务已完成”错误，但没有事务处于活动状态

> ID：13387353
> 
> 赞同：1
> 
> 时间：2012-11-14T21:08:56.663
> 
> 标签：.net, sql-server, linq-to-sql

似乎错误“分布式事务已完成。在 NULL 事务的新事务中登记此会话”是一个普遍存在的问题，有许多讨论和不同的原因，但环顾四周后，我仍然无法确定可能是什么原因就我而言。我正在使用 LINQ-to-SQL DataContext 派生类来查询和更新数据库，但我们所做的大约一半更新分为直接 SQL 更新和通过插入、更新和删除的部分方法中的另一个 API 执行的更新数据上下文。当我们检测到 SQL 和第三方更新都将发生时，我们使用“TransactionScopeOption.Required”选项创建一个新的 TransactionScope 对象，然后检索环境事务并将第三方 API 加入同一个分布式事务中。

在大多数情况下，这似乎一直在相对可靠地工作。但是有时会发生罕见且难以重现的错误。当由于 DataContext 上的部分方法期间的某些验证失败而在 SubmitChanges 期间发生预期的（用户）错误时，我们的代码将在不调用 Complete 的情况下处理 TransactionScope 并将错误报告给用户。如果再次尝试相同的事务，有时它会起作用，但有时我们会收到错误报告*和*意外的 DTC 错误。

真正奇怪的部分是，如果我执行 Debug.WriteLine 来检查 System.Transactions.Transaction.Current 的状态，那么我将无法再报告错误。如果我更改代码以将相同的信息报告到文本文件而不是调试流，我可以轻松地重现错误。这让我怀疑发生了一些奇怪的线程同步问题。

在寻找答案时，我偶然发现了一个主题，该主题导致我尝试使用 RequiresNew 而不是 Required 作为 TransactionScopeOption。但这在类似情况下导致了不同的错误：“ExecuteReader 需要一个打开且可用的连接。连接的当前状态是打开。”

我已经确认（通过文件的调试输出）当我在 DataContext 上调用 Refresh 时，环境事务是 Nothing，然后在框架的 Refresh 实现中的某个地方是两种情况下都会发生错误的地方。我难住了。为什么它认为我正在尝试参与交易？

**编辑：**这个谜题越来越令人困惑。我再次尝试了同样的事情（仍然使用 RequiresNew）并得到“Internal .Net Framework Data Provider Error 12”。是否有关于此错误 12 的任何信息可以提供线索，了解这里的幕后情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:33:36.280

这`Internal .Net Framework Data Provider Error 12`是一个很好的线索，表明正在发生对非线程安全数据框架的多线程访问。实际上，我能够确认事件在另一个线程上引发`DataContext.Refresh`的同时在一个线程上执行`System.Transactions.Transaction.TransactionCompleted`，并且我有事件处理程序代码在其中取消登记事务的其他成员（第三方 API）。显然试图同时这样做会引起一些我不完全理解的混淆，但是通过确保两个线程不能同时与连接/事务交互可以很容易地避免这种情况。我建议使用`SyncLock`(VB.NET)、`lock`(C#) 或`Threading.Monitor.Enter`and`Threading.Monitor.Exit`来帮助确保多个线程避免同时访问数据提供者。

# java - 无法使用 iText 显示 unicode 0x0332

> ID：13387355
> 
> 赞同：1
> 
> 时间：2012-11-14T21:09:02.580
> 
> 标签：java, unicode, fonts, itext

## 设置

我正在使用 iText 5.3.0 和 Fedora 17，使用 PDF 阅读器 llpp 和 evince 进行测试。我的 IDE 是 Eclipse Indigo r2。我的终端是 urxvt，字体与 PDF 中使用的字体相同。

## 问题

其他 unicode 字符显示得很好。iText 书中的清单 11.3 显示得很好。但是试图得到一个带有[下划线](https://en.wikipedia.org/wiki/Underline#Unicode)的 X̲ , X`"X\u0332"`不会出现在 PDF 上。我可以将字符串记录到终端，`System.out.println`它工作得很好。这是我正在尝试的示例：

```
public static void main(String[] args) throws DocumentException, IOException {
  Document document = new Document(PageSize.LETTER);
  PdfWriter.getInstance(document, new FileOutputStream("fnord.pdf"));
  document.open();
  FontFactory.register("fonts/mplus-1mn-regular.ttf", "mplus");
  Font font = FontFactory.getFont(
    "mplus",
    BaseFont.IDENTITY_H,
    BaseFont.EMBEDDED,
    12
  );
  String s = "X\u0332";
  System.out.println(s);
  document.add(new Paragraph(s, font));
  document.close();
} 
```

[我发现了一封来自 Paulo Soares](http://www.mail-archive.com/itext-questions@lists.sourceforge.net/msg00991.html)的古老的、可能相关的电子邮件，上面写着“必须在将文本呈现给 iText 之前完成字符组合”。

我不确定这意味着什么，或者如何去做，或者它是否仍然相关。

## 预期/实际

我期望：一个带有 X 的 PDF，在 X 下方有一条线，即 X̲。

我得到：带有 X 的 PDF，没有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:41:39.073

看来我的 pdf 查看器显示不正确。我从 pdf 查看器复制并粘贴了文本输出，复制到我的终端（我已经验证了这个字符的工作），然后查看 X̲.

复制和粘贴作品

*   llpp 与 mupdf 版本 a606f714258677688c67e9561b87cc70f9e9b6b0
*   adobe 阅读器 9.5.1

但不适用于 evince 3.4.0 (poppler 0.18.4)。复制的文本只是一个普通的 X。

所以看来 iText 没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:19:01.737

您的角色是非间距角色，[请参见此处](http://www.fileformat.info/info/unicode/char/332/index.htm)

**编辑**页面说它左右连接，所以我的回答不是很有用:(

# mpi - mpiexec.hydra - 如何在 hydra_pmi_proxy 位置不同的机器上运行 MPI 进程？

> ID：13387356
> 
> 赞同：6
> 
> 时间：2012-11-14T21:09:04.397
> 
> 标签：mpi, mpich

我正在尝试在两台机器的集群上使用 MPICH 运行一个简单的 MPI 程序。但是，一个正在运行 Fedora 17，另一个正在运行 Debian Squeeze - 不一定是问题，但问题是这两个发行版将它们的 mpi 执行程序放在不同的目录中：

当我从 host1 运行以下命令时：

```
mpiexec -hosts host2 -np 1 -wdir /home/chris/src/mpi/ ./mpitest 
```

它失败并出现以下错误

```
bash: /usr/lib/mpich2/bin/hydra_pmi_proxy: No such file or directory 
```

这似乎是因为`hydra_pmi_proxy`它安装在`/usr/lib/mpich2/bin`Fedora 机器上，但安装在`/usr/bin`Debian 机器上。我假设当我通过 ssh 从 host1 生成进程时，它希望在 host2 的同一位置找到 hydra_pmi_proxy。

如果我只是在该节点上本地运行该程序，则该程序在两台机器上都可以正常运行 - 我只是在尝试在两台机器上运行它时都会遇到问题。

我在 MPICH 文档中搜索了一种覆盖到远程路径的方法`hydra_pmi_proxy`，但无济于事。

我能以某种方式做到这一点吗？我认为 MPICH 的优点之一是它可以轻松处理异构主机......

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-27T13:45:01.573

我设法解决了这个问题，没有安装 mpich hydra 和终端（例如 apt-get install MPICH2 或 hydra）。但相反，我下载了源代码：[http](http://www.mpich.org/downloads/) ://www.mpich.org/downloads/ （作为稳定版本）。然后我在主机和从机上运行以下命令：export PATH = /home/you/mpich: $ PATH（在我的计算机上我安装在我的 mpich 目录中）。

刚刚解决了这个问题！

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T16:03:31.190

这可以通过源代码安装 MPICH 并将安装目录挂载到与服务器上的目录相同的目录中的节点中来解决。然后使用 export PATH = /home/you/mpich-installation-directory/bin: $PATH 仅在服务器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T21:47:04.100

这个问题可以在 NFS 配置中解决：（`exportfs -var`在主机中）。

你有你的`/mirror`目录，但有必要将目录添加`/usr`到`/etc/exports`：

```
/usr *(rw,sync,no_subtree_check) 
```

在客户端机器中，编辑`/etc/fstab`并添加：

```
master-ip/usr   /usr nfs defaults 0 0 
```

保存并运行命令`mount -a`。

运行后`df -h`在 slave/client 中查看 master 挂载的目录。

# asp.net-mvc - Devexpress mvc4 网格宽度设置

> ID：13387360
> 
> 赞同：1
> 
> 时间：2012-11-14T21:09:16.177
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, devexpress

我正在尝试以百分比设置 DevExpress 网格的宽度，但该属性对我不可用，就像在我看到的每个示例中一样。我正在使用 MasterDetail 网格 Devexpress 12.1 版

```
settings.Width = Unit.Percentage(100); 
```

如何将整个网格的宽度属性设置为 100%，然后如何为列设置相同的属性。这是我的网格

```
@Html.DevExpress().GridView(
settings => {
    settings.Name = "masterGrid";
    settings.CallbackRouteValues = new { Controller = "InwardsGoods", Action = "GridViewMasterPartial" };
    settings.SettingsEditing.AddNewRowRouteValues = new { Controller = "InwardsGoods", Action = "GridViewMasterAddNewPartial" };
    settings.SettingsEditing.UpdateRowRouteValues = new { Controller = "InwardsGoods", Action = "GridViewMasterUpdatePartial" };
    settings.SettingsEditing.DeleteRowRouteValues = new { Controller = "InwardsGoods", Action = "GridViewMasterDeletePartial" };
    settings.KeyFieldName = "InwardsGoodsID";

    settings.Columns.Add(column =>
    {
        column.FieldName = "CustomerID";
        column.Caption = "Customer";
        column.ColumnType = MVCxGridViewColumnType.ComboBox;
        var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
        comboBoxProperties.DataSource = Model.CustomersList;
        comboBoxProperties.TextField = "CustomerName";
        comboBoxProperties.ValueField = "CustomerID";
        comboBoxProperties.ValueType = typeof(int);
    });      

    settings.Columns.Add(column =>
    {
        column.FieldName = "CustomerReference";
        column.Caption = "Customer Reference";           
    });
    settings.Columns.Add(column =>
    {
        column.FieldName = "TimberShadeReference";
        column.Caption = "TimberShade Reference";
    });
    settings.Columns.Add(column =>
    {
        column.FieldName = "DateReceived";
        column.Caption = "Date Received";
        column.PropertiesEdit.DisplayFormatString = "d";            
    });

    settings.Columns.Add(column =>
    {
        column.FieldName = "Comment";
        column.Caption = "Comment";
    });

    settings.SettingsDetail.AllowOnlyOneMasterRowExpanded = true;
    settings.SettingsDetail.ShowDetailRow = true;
    settings.CommandColumn.Visible = true;
    settings.CommandColumn.NewButton.Visible = true;
    settings.CommandColumn.DeleteButton.Visible = true;
    settings.CommandColumn.EditButton.Visible = true;

    settings.SetDetailRowTemplateContent(c =>
    {
        Html.RenderAction("GridViewDetailPartial", new { inwardsgoodsID = DataBinder.Eval(c.DataItem, "InwardsGoodsID") });
    });

    //TO OPEN THE FIRST EDITABLE ROW
    //settings.PreRender = (sender, e) =>
    //{
    //    ((MVCxGridView)sender).DetailRows.ExpandRow(0);
    //};

}).Bind(Model.InwardsGoods).GetHtml() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T00:45:06.800

好的，所以我找到了答案。为了解决这个问题，我在 cshtml 页面的顶部添加了这个 using 语句。

```
@using System.Web.UI.WebControls; 
```

# java - java中的<<或>>>是什么意思？

> ID：13387365
> 
> 赞同：24
> 
> 时间：2012-11-14T21:09:47.787
> 
> 标签：java, syntax

> **可能重复：**
> [在 Java 中 >> 和 >>> 是什么意思？](https://stackoverflow.com/questions/11255420/what-does-and-mean-in-java)

我在一些 java 代码中遇到了一些不熟悉的符号，虽然代码可以正确编译和运行，但我对尖括号在这段代码中的作用感到困惑。[我在com.sun.java.help.search.BitBuffer](http://www.javadocexamples.com/java_source/com/sun/java/help/search/BitBuffer.java.html)中找到了代码，其中的一个片段如下：

```
public void append(int source, int kBits)
    {
        if (kBits < _avail)
        {
            _word = (_word << kBits) | source;
            _avail -= kBits;
        }
        else if (kBits > _avail)
        {
            int leftover = kBits - _avail;
            store((_word << _avail) | (source >>> leftover));
            _word = source;
            _avail = NBits - leftover;
        }
        else
        {
            store((_word << kBits) | source);
            _word = 0;
            _avail = NBits;
        }
    } 
```

那些看起来神秘的括号有什么作用？它*几乎*看起来像 c++ 插入/提取，但我知道 Java 没有这样的东西。

另外，我尝试用谷歌搜索它，但由于某种原因，谷歌似乎看不到尖括号，即使我把它们放在引号中。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-14T21:10:19.113

它们是按位移位运算符，它们通过移位指定的位数来操作。这是有关如何使用它们的[教程。](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

> 带符号的左移运算符“<<”将位模式向左移动
> 
> 带符号的右移运算符“>>”将位模式向右移动。
> 
> 无符号右移运算符“>>>”将零移到最左边的位置

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T21:10:43.100

直接来自[ORACLE 文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。

> 有符号左移运算符“<<”将位模式左移，有符号右移运算符“>>”将位模式右移。位模式由左侧操作数给出，而要移位的位置数由右侧操作数给出。无符号右移运算符“>>>”将零移到最左边的位置，而“>>”之后的最左边的位置取决于符号扩展。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T21:11:59.910

按位移位。请在此处查看官方文档：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

# c# - 默认非空泛型值

> ID：13387367
> 
> 赞同：3
> 
> 时间：2012-11-14T21:09:54.023
> 
> 标签：c#, generics

我正在尝试创建一个包含泛型类型列表的泛型类，
但我希望有一个除 null 以外的默认值来检查项目是否已被删除
，列表应如下所示

```
0 TypeV   (some value of TypeV)
1 null
2 null    (never been used)
3 default (deleted)
4 TypeV 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:12:53.893

如果`TypeV`不在您的控制范围内，则它始终可以是值类型，在这种情况下，绝对没有可以用作哨兵的值（对于引用类型，您可以拥有哨兵值并用于`object.ReferenceEquals`检查插槽是否包含它）。这意味着唯一可能的实现是在列表中的每个槽位使用一个额外的信息位。

一个合理的选择是保留 a`List<Tuple<TypeV, bool>>`并将其`bool`用作“已删除”标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:18:50.780

对于引用类型，默认值为`null`（您无法定义该值是从未使用过还是已被删除）。所以你的想法不适用于引用类型的泛型参数。另一方面，非引用类型不能有空值。因此，*唯一的选择是对象数组*（它可以同时包含空值和值类型）：

```
// TODO: check for index fit array range
public class Foo<T>
   where T : struct
{
   object[] values = new object[5];

   public void Add(T value, int index)
   {
       // TODO: do not allow to add default values to array
       values[index] = value;
   }

   public void Delete(int index)
   {
       values[index] = default(T);
   }
} 
```

和

```
Foo<int> foo = new Foo<int>();
foo.Add(1, 0);
foo.Add(2, 3);
foo.Add(3, 4);
foo.Delete(3); 
```

此时`values`将是：

```
0 1       (some value of T)
1 null    (never been used)
2 null    (never been used)
3 default (deleted)
4 3 
```

但无论如何，您无法定义是否删除了某些项目，或者它是否添加了默认值。因此，如果您从不向数组添加默认值，您的想法将起作用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-14T21:19:48.430

那么最好使用字典

```
List<Tuple<TypeV, bool>> 
```

因为您可以在 O(1) 中获得状态。

或者只使用 HashSet，当你想检查项目是否被删除时，使用 Contains(item)。这也适用于 O(1)。

# drupal - 是否可以使用 Drupal 来管理静态站点？

> ID：13387369
> 
> 赞同：0
> 
> 时间：2012-11-14T21:10:01.233
> 
> 标签：drupal

是否可以使用 Drupal 来管理静态站点？我想要一个像 Drupal 这样的 CMS，但呈现一个静态站点，该站点将被移动到服务器进行服务。Drupal 不会在服务器上运行。这对 Drupal 可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:37:25.317

如果您不希望 CMS 生成动态页面，请不要使用。

*如果您需要从易于*编辑的内容生成静态站点，请使用为此任务设计的工具。像[Sculpin](https://sculpin.io/)、[Phrozn](http://www.phrozn.info/en/)、[Jekyll](http://jekyllrb.com/)（由 GitHub 使用）、[Hyde](http://ringce.com/hyde)、[Bonsai](http://tinytree.info/)、[Webgen](http://webgen.rubyforge.org/)或[Cyrax](http://pypi.python.org/pypi/cyrax)。但是不要使用为完全不同（和相反）的用例设计的工具。你最终会需要一些过于具体和过于*静态*的东西。强迫您实施复杂且不直观的逻辑来*解决*您的（动态）CMS 的基本功能。你最终会让你自己或下一个开发者感到沮丧，因为你/他/她会强迫你/他/她采取复杂的动态路线来实现一些在静态站点中应该很容易实现的东西，只是稍后将其*静态导出。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-14T16:30:03.450

不管我的其他答案如何，对于使用 Drupal 作为后端的静态站点生成，[Zariz](https://github.com/Gizra/zariz)可能值得一看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T21:14:51.443

使用[wget](http://www.gnu.org/software/wget/)或类似工具创建网站的静态副本。这适用于任何 CMS，而不仅仅是 Drupal。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-14T04:09:56.910

有一个旨在做到这一点的新项目。它被称为[Dekyll – Jekyll 上的 Drupal](http://www.gizra.com/content/dekyll-drupal-on-jekyll/)。

> Drupal 无疑是​​最好的 CMS 之一。Jekyll 无疑是​​目前最好的静态站点生成器之一。看看我要去哪里？它不再只是一个概念，它是一个完整的安装配置文件，称为 Dekyll。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-10T06:30:57.723

尽管有这个名字，另一种可能性是使用 MAG 模块（[http://drupal.org/project/mag](http://drupal.org/project/mag)）（移动应用程序生成器）。它可以从给定的菜单中创建一个基本的静态站点。

对于大多数基本用例来说，这通常就足够了。

我还没有尝试过，但“市场”上的新产品也是静态模块：

[http://drupal.org/project/static](http://drupal.org/project/static)

# php - 使用 PDO 在 PHP 和 MySQL 中重用获取的数据

> ID：13387372
> 
> 赞同：3
> 
> 时间：2012-11-14T21:10:06.840
> 
> 标签：php, mysql, pdo, fetch

我正在用 PHP 和 MySQL 编写一个会计系统，并使用 PDO 来处理数据库。在付款页面中，我必须有 2 个来自已定义帐户的下拉列表。
首先，我使用了一个简单的查询来获取帐户的所有记录。

```
$sql = "SELECT id,title FROM tbl_accounts WHERE uid = ? ORDER BY title";
$q = $db->prepare($sql);
$q->execute(array($uid)); 
```

我已将获取的行放在下拉列表中，一切正常。

```
<select name="account_id2" class="medium" id="account_id2">
    <option value="null">---</option>
    <?php
    while ($r = $q->fetch()) {
        echo '<option value="'.$r['id'].'">'.$r['title'].'</option>';
    }
    ?>
</select> 
```

但是当我想使用获取的记录制作第二个下拉列表时，什么都没有显示。所以我想我必须为它创建另一个查询。我做到了，第二个做对了。
但我的问题是：我们不能使用获取的数据超过 1 次吗？如果我需要第三个下拉菜单，我必须编写另一个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:12:16.193

根据您的条件循环，您可能需要使用[`reset()`](http://php.net/manual/en/function.reset.php).

### 更新：

要重置结果集，您可以使用[`data_seek()`](http://www.php.net/manual/en/mysqli-result.data-seek.php)或构建一个单独的数组，如其他答案中所述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T21:16:27.897

`$r = $q->fetchAll()`使用then 循环将获取的结果保存到数组中`$r`，而不是在循环时获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:14:42.297

为什么不在第一次使用时将数据保存到数组中，这样您就不必为相同的数据再次打扰您的数据库。

# c# - 忽略由逗号解析的字符串中的逗号

> ID：13387376
> 
> 赞同：2
> 
> 时间：2012-11-14T21:10:25.427
> 
> 标签：c#

所以假设我有一个字符串输入到这样设置的 Excel 文档中

```
output.WriteLine(string.Format("{0},{1},{2},{3}",
                                                   var1,
                                                   var2,
                                                   var3,
                                                   var4
                                                   )); 
```

现在通常它会进入`var`一个单独的单元格。但是，我发现如果我`var`的一个 s 中有一个逗号，它会将其视为单元格结尾，然后转到下一个。如何`var`在保持设置的同时忽略 s 中的逗号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:15:05.050

我假设这是您正在创建的 CSV 文件。因此，您需要用双引号将包含逗号的值括起来。您可以包装所有内容（这更容易，例如：

```
output.WriteLine(string.Format("\"{0}\",\"{1}\",\"{2}\",\"{3}\"",
                                                   var1,
                                                   var2,
                                                   var3,
                                                   var4
                                                   )); 
```

或者您可以编写一个小的辅助函数，例如：

```
public string EncodeCell(string value) {
   return value.Contains(",") ? String.Format("\"{0}\"", value) : value;
} 
```

然后做：

```
output.WriteLine(string.Format("{0},{1},{2},{3}",
                                                   EncodeCell(var1),
                                                   EncodeCell(var2),
                                                   EncodeCell(var3),
                                                   EncodeCell(var4)
                                                   )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:15:06.577

取决于您希望如何输入昏迷。最简单的做法：

```
var1.Replace(",", "string to replace comma for")
var2.Replace(",", "string to replace comma for")
var3.Replace(",", "string to replace comma for")
... 
```

使用 list/array 和 String.Join 也会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:13:37.237

`var`在使用您选择的转义序列插入之前，请转义 s中的逗号。

# objective-c - UIRefreshControl：刷新时 UITableView '卡住'

> ID：13387378
> 
> 赞同：5
> 
> 时间：2012-11-14T21:10:25.880
> 
> 标签：objective-c, ios, uirefreshcontrol

我在实现 UIRefreshControl 时遇到问题 - 当您下拉时，“blob”工作得非常好，刷新微调器工作正常，但 tableView 在刷新时不会向上滚动到微调器。相反，它会停留在原来的位置，直到刷新完成，此时它会返回到屏幕顶部

进行刷新的代码是：

```
- (void)viewDidLoad {
    self.refreshControl = [[UIRefreshControl alloc] init];
    [self.refreshControl addTarget:self action:@selector(refreshView:)forControlEvents:UIControlEventValueChanged];
}

- (void)refreshView:(UIRefreshControl *)refresh  {
    dispatch_async(dispatch_get_main_queue(), ^{
        (...code to get new data here...)
        [self.refreshControl endRefreshing];
    }
} 
```

我发现如果没有 dispatch_async，即使刷新微调器也不起作用 - 被拉下的位看起来只是白色

有没有人有任何线索我可能做错了什么？我发现的所有实现示例似乎都与我正在做的事情相匹配，而且我在 API 文档中没有发现任何表明我遗漏了任何东西的内容

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T21:25:47.977

您可以更改为以下

```
- (void)refreshView:(UIRefreshControl *)refresh  {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // (...code to get new data here...)
        dispatch_async(dispatch_get_main_queue(), ^{
            //any UI refresh
            [self.refreshControl endRefreshing];
        });
    });
} 
```

-refreshView：将在主线程上调用，所有 UI 更新都使用主线程。因此，如果您将主线程用于“获取新数据的代码”，它将“卡住”

# cakephp - cakephp 2.0 加入

> ID：13387380
> 
> 赞同：0
> 
> 时间：2012-11-14T21:10:37.693
> 
> 标签：cakephp, join, cakephp-2.0

我有一个与“menu_items”和“articles”相关的表“menu_items_articles”。'articles' 表与 'tags' 和 'menu_items' 具有 HABTM 关系

现在我想获取所有带有特定 menu_tems.id 的“文章”及其相关的“标签”。

如果“文章”有 4 个标签，则数组计数该文章的 4 倍。我想要 1 次包含所有相关标签的文章。并且只有一个标签与文章相关联

这就是我所拥有的

```
$this->MenuItemsArticle->recursive = -1;

    $options['joins'] = array(
        array('table' => 'articles_tags',
            'alias' => 'ArticlesTag',
            'type' => 'inner',
            'conditions' => array(
            'ArticlesTag.article_id = MenuItemsArticle.article_id'
        )
    ),
        array('table' => 'articles',
            'alias' => 'Article',
            'type' => 'inner',
            'conditions' => array(
            'ArticlesTag.article_id = Article.id'
        )
    ),
        array('table' => 'tags',
            'alias' => 'Tag',
            'type' => 'inner',
            'conditions' => array(
            'ArticlesTag.tag_id = Tag.id'
        )
    )
);

$options['conditions'] = array(
    'MenuItemsArticle.menu_item_id' => $menu_item
);

$options['fields'] = array('DISTINCT MenuItemsArticle.*',' Article.*','Tag.*');

$this->paginate = $options; 
$result = $this->paginate('MenuItemsArticle'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:42:06.163

这对于连接来说是正常的——只需添加一个[“组”](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)选项（MySQL 中的 GROUP BY）。

# c# - Resharper 过度缩进我的代码

> ID：13387385
> 
> 赞同：1
> 
> 时间：2012-11-14T21:10:53.013
> 
> 标签：c#, resharper

我希望 resharper 通过以下方式缩进我的代码：

```
var modification = shortUrlIndexCollection.FindAndModify
(
    Query.Or
    (
        Query.And
        (
            Query.EQ("_id", "Index"),
            Query.EQ("LockId", Guid.Empty)
        ),
        Query.LT("UnlockOn", now)
    ),
    SortBy
        .Null,
    Update
        .Set("LockId", guid)
        .Set("UnlockOn", now + reserveDuration),
    true
); 
```

但相反，它以以下方式格式化我的代码：

```
var modification = shortUrlIndexCollection.FindAndModify
    (
        Query.Or
            (
                Query.And
                    (
                        Query.EQ("_id", "Index"),
                        Query.EQ("LockId", Guid.Empty)
                    ),
                Query.LT("UnlockOn", now)
            ),
        SortBy
            .Null,
        Update
            .Set("LockId", guid)
            .Set("UnlockOn", now + reserveDuration),
        true
    ); 
```

根据[使用 Resharper 的自定义大括号格式，](https://stackoverflow.com/questions/747351/custom-brace-formatting-with-resharper)我已经尝试过该`continuous line indent multiplier`选项，但它给出了错误的结果......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:15:35.977

试试[Resharper 7.1](http://blogs.jetbrains.com/dotnet/2012/11/resharper-71-is-available/)，它修复了链式方法的缩进。

刚刚用我的 stylecop 设置试了一下，格式变成了：

```
shortUrlIndexCollection.FindAndModify(
                Query.Or(
                    Query.And(Query.EQ("_id", "Index"), Query.EQ("LockId", Guid.Empty)), Query.LT("UnlockOn", now)),
                SortBy.Null,
                Update.Set("LockId", guid).Set("UnlockOn", now + reserveDuration),
                true); 
```

不是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T06:59:19.477

在 ReSharper 7.1 或更低版本中，无法按照您想要的`(`方式进行格式化。`)`我们正在努力在 8.0 中实现一个新的缩进系统，它可以让您更好地控制 () 和 [] 的布局。

# javascript - Jquery 将 tr 设置为空 td 低于 td 中的文本

> ID：13387394
> 
> 赞同：1
> 
> 时间：2012-11-14T21:11:40.240
> 
> 标签：javascript, jquery, html

我有 html 和 jquery 用于对我的表进行排序（也有非标准排序（使用多 tbody））。

我的代码可以在这里找到：http: [//jsfiddle.net/GuRxj/](http://jsfiddle.net/GuRxj/)

如您所见，带有价格的 td （在俄罗斯Цена上）按升序排序（但技术不是！？为什么？（这也是一个问题））...但是如您所见，我需要发送带有价格的 tr到这个 tbody 的顶部（现在在底部），而 empty-price-tr 发送到底部......怎么做？

js的一部分：

```
$('.prcol').click(function(e) {
      var $sort = this;
      var $table = $('#articles-table');
      var $rows = $('tbody.analogs_art > tr',$table);
      $rows.sort(function(a, b){
          var keyA = $('td:eq(3)',a).text();
          var keyB = $('td:eq(3)',b).text();
            if (keyA.length > 0 && keyB.length > 0)
            {
              if($($sort).hasClass('asc')){
                  console.log("bbb");
                  return (keyA > keyB) ? 1 : 0;
              } else {
                console.log(keyA+"-"+keyB);
                  return (keyA > keyB) ? 1 : 0;
              }
            }
      });
      $.each($rows, function(index, row){
        //console.log(row);
        $table.append(row);
        //$("table.123").append(row);
      });
      e.preventDefault();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:42:30.080

**固定演示** [http://jsfiddle.net/RwW9q/3/](http://jsfiddle.net/RwW9q/3/) **或** [http://jsfiddle.net/tcZNH/](http://jsfiddle.net/tcZNH/)

Rest代码应该清晰易懂，

Надеюсь, что это FIDS ваши потребности `:)`（希望它符合您的需要，）

**代码**

```
jQuery(function($) {
    var table = $('table');
    $(document).ready(function() {
        $('.prcol').click(function(e) {
            var $sort = this;
            var $table = $('#articles-table');
            var $rows = $('tbody.analogs_art > tr', $table);
            $rows.sort(function(a, b) {
                var keyA = $('td:eq(3)', a).text().toUpperCase();;
                var keyB = $('td:eq(3)', b).text().toUpperCase();;

                if (keyA.length > 0 && isNaN(parseFloat($('td:eq(3)', b).text()))) return Ascending(keyA, keyB);
            });
            $.each($rows, function(index, row) {
                //console.log(row);
                $table.append(row);
                //$("table.123").append(row);
            });
            e.preventDefault();
        });
    });
});

function Ascending(a, b) {
    if (a > b) return -1;
    if (a < b) return 1;
    return 0;
}​ 
```

# java - 默认类路径 java

> ID：13387395
> 
> 赞同：0
> 
> 时间：2012-11-14T21:11:41.073
> 
> 标签：java, classpath

我的程序在 C:\Users\Programs\x.java

X.java 正在使用 y.jar、z.jar 中的一些文件。

y.jar 和 z.jar 位于 C:\Users\Programs 文件夹中。

(1) C:Users\Programs> javac x.java

(2) C:Users\Programs> javac -classpath y.jar:z.jar x.java

当我做（2）时我没有收到任何错误，但是当我做（1）时我收到了错误。是不是将类路径设置为当前文件夹。如果是这样，为什么它没有看到 y.jar 和 z.jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:13:32.247

驻留在类路径中的 jar 的内容不会自动添加到类路径本身。在您的情况下，正确的类路径将是您在情况 (2) 中指定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:14:13.127

类路径包括当前文件夹。
但是，它不包括当前文件夹的子文件夹。

如果您尝试使用，Java 将**直接**在类路径中的每个文件夹中`com.example.MyClass`查找一个名为的文件。 它不会查看类路径中文件夹内的子文件夹或 JAR。`com/example/MyClass.class`

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:14:34.543

是的，classpath 确实应该默认设置为当前文件夹。但是，将其设置为给定文件夹与将其设置为特定 JAR 文件不同。**

# php - yii clistview 项目之间的空间

> ID：13387402
> 
> 赞同：1
> 
> 时间：2012-11-14T21:12:01.967
> 
> 标签：php, yii, whitespace

我在 yii 中使用 CListView，如下所示：

```
<?php $this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$posts,
    'itemView'=>'_view',
    'itemsTagName'=>'ul',
    'itemsCssClass'=>'post_list',
    'template'=>'{items}{pager}{summary}',
    'summaryText'=>'Displaying posts {start}-{end} of {count}',
    'separator'=>null,
)); ?> 
```

我的视图文件的开头或结尾没有空格或字符，但列表视图创建的 html 在每个项目之间放置了一个空行。有没有办法摆脱那个空白行？

编辑：

我的视图文件：

```
<li><?php 
echo "<article>";
echo "<header class='article-header'>";
echo "<h2>{$data->title}</h2>";
...
A bunch of other stuff here...
...
echo "</article>";
echo "<hr />";
?></li> 
```

生成的 HTML：

```
<ul class="post_list"> (an extra blank line here)
<li>A bunch of stuff (item 1)</li> (and here)
<li>A bunch of other stuff (item 2)</li> (here too)
</ul> 
```

我无法正确格式化上述内容......但它是一个里面有li的ul，但每个元素之间有一个空行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:39:14.603

如果您选择选项卡上的`<ul class="post_list">`元素，然后按上面的按钮，您可以看到有一些在您的文本编辑器中看不到的野生 HTML 编码字符。尝试删除换行符或创建一个新的视图文件。`HTML``Firebug``Edit``&#65279;`

# jquery - jQuery UI 滑块计算

> ID：13387406
> 
> 赞同：2
> 
> 时间：2012-11-14T21:12:26.180
> 
> 标签：jquery, function, user-interface

我在一个页面上有 2 个滑块，1 个控制天数，另一个控制要借出的金额。

我有这个计算：

```
 function calculate(){
    var days = $("#days-value").val();
    var amount = $(".loan-amount-value").val();
    var percent = .10;
    var interest = (days * amount * percent)/10;
    var total = parseInt(amount, 10) + parseInt(interest, 10);
    $("#total-repay").val(total);
    $("#interest-fees").val(interest);  
}; 
```

但它仅在页面加载时才有效。当滑块更改时，我需要它进行更新。我知道每次滑块更改时我都需要调用计算函数，但我只是不确定如何编写它。这可能吗？

这是脚本的其余部分：

```
$(document).ready(function() {   

$(function() {     

    var inputValue = $(".loan-amount-value").val();

    $( ".loan-amount-slider" ).slider({
    min: 100,
    max: 500,
    step: 1,
    value: 200,
    slide: function(event, ui) {
        //update loan amount value when sliding loan amount slider 
        $(".loan-amount-value").val(ui.value);  
         }
        });  
        //show the loan amount initially
        $(".loan-amount-value").val($(".loan-amount-slider").slider("value"));      
        //when the loan amount changes via user input.. 
        $("#loan-amount-value").change(function(event) {
        //change the slider to that amount  
        $(".loan-amount-slider").slider("option", "value", inputValue); 
        })

    var dayInputValue = $("#days-value").val();

    $( ".days-slider" ).slider({
    min: 1,
    max: 45,
    step: 1,
    slide: function(event, ui) {    
        //update day when sliding day slider 
        $("#days-value").val(ui.value);
        }
        }); 
        //show the day initially
        $("#days-value").val($(".days-slider").slider("value"));

        //when the day via user input.. 
        $("#days-value").change(function(event) {
        //change the slider to that amount  
        $(".days-slider").slider("option", "value", dayInputValue);
        });

function calculate(){
    var days = $("#days-value").val();
    var amount = $(".loan-amount-value").val();
    var percent = .10;
    var interest = (days * amount * percent)/10;
    var total = parseInt(amount, 10) + parseInt(interest, 10);
    $("#total-repay").val(total);
    $("#interest-fees").val(interest);  
};

});         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:26:57.363

您的`calculate()`函数包装不正确。将其更改为：

```
function calculate() {
    var days = $("#days-value").val();
    var amount = $(".loan-amount-value").val();
    var percent = .10;
    var interest = (days * amount * percent) / 10;
    var total = parseInt(amount, 10) + parseInt(interest, 10);

    $("#total-repay").val(total);
    $("#interest-fees").val(interest);
}; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/2e7gq/)**

您可能还想`calculate`在其他滑块的滑动函数中添加调用，以便它们都进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:24:14.137

Just make a call to calculate in the slide handlers.

```
$(document).ready(function() {   

$(function() {     

    var inputValue = $(".loan-amount-value").val();

    $( ".loan-amount-slider" ).slider({
    min: 100,
    max: 500,
    step: 1,
    value: 200,
    slide: function(event, ui) {
        //update loan amount value when sliding loan amount slider 
        $(".loan-amount-value").val(ui.value); 
        calculate(); 
         }
        });  
        //show the loan amount initially
        $(".loan-amount-value").val($(".loan-amount-slider").slider("value"));      
        //when the loan amount changes via user input.. 
        $("#loan-amount-value").change(function(event) {
        //change the slider to that amount  
        $(".loan-amount-slider").slider("option", "value", inputValue); 
        })

    var dayInputValue = $("#days-value").val();

    $( ".days-slider" ).slider({
    min: 1,
    max: 45,
    step: 1,
    slide: function(event, ui) {    
        //update day when sliding day slider 
        $("#days-value").val(ui.value);
        calculate();
        }
        }); 
        //show the day initially
        $("#days-value").val($(".days-slider").slider("value"));

        //when the day via user input.. 
        $("#days-value").change(function(event) {
        //change the slider to that amount  
        $(".days-slider").slider("option", "value", dayInputValue);
        });

function calculate(){
    var days = $("#days-value").val();
    var amount = $(".loan-amount-value").val();
    var percent = .10;
    var interest = (days * amount * percent)/10;
    var total = parseInt(amount, 10) + parseInt(interest, 10);
    $("#total-repay").val(total);
    $("#interest-fees").val(interest);  
};

});         }); 
```

# php - 提交表单时成功/错误消息不断消失

> ID：13387417
> 
> 赞同：1
> 
> 时间：2012-11-14T21:13:12.690
> 
> 标签：php, jquery, ajax

我有一个应用程序`(editsessionadmin.php)`，用户在相关文本输入中显示他们的评估名称、日期和时间。现在当用户提交时，它会显示一个确认，当用户确认时，然后通过使用ajax，它会导航到`updatedatetime.php`它将在数据库中更新评估的时间和日期，并在顶部显示成功或错误消息`editsessionadmin.php`页。

但我有一个小问题。

问题：使用 div 标签，我可以在脚本更新后检索错误或成功消息，并使用此 jquery 代码`updatedatetime.php`将其显示在脚本中。问题是，当用户提交表单时，它会显示消息，然后在提交表单后消息消失。我希望消息显示在页面顶部而不是消失。为什么会消失？`editsessionadmin.php``$("#targetdiv").html(data)``editsessionadmin.php`

下面是editsessionadmin.php的代码

```
 <script>

    function submitform() {    

    $.ajax({
        type: "POST",
        url: "/updatedatetime.php",
        data: $('#updateForm').serialize(),
        success: function(html){
            $("#targetdiv").html(html);
        }
     });        
}

         function showConfirm(){

          var examInput = document.getElementById('newAssessment').value;
          var dateInput = document.getElementById('newDate').value;
          var timeInput = document.getElementById('newTime').value;

          if (editvalidation()) {

         var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

         if (confirmMsg==true)
         {
         submitform();   
     }
  }
} 

$('body').on('click', '#updateSubmit', showConfirm); 

            </script>   

        <h1>EDIT AN ASSESSMENT'S DATE/START TIME</h1>   

        <p>You can edit assessment's Date and Start time on this page. Only active assessments can be editted.</p>

        <div id="targetdiv"></div>

        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
        <table>
        <tr>
        <th>Course: INFO101</th>
        <th>Module: CHI2513</th>
        </tr>
        </table>
        <p><input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" /></p>

        </form>

        ....

        <?php
        $editsession = "<form id='updateForm'>

        <p><strong>New Assessment's Date/Start Time:</strong></p>
        <table>
        <tr>
        <th>Assessment:</th>
        <td><input type='text' id='newAssessment' name='Assessmentnew' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Date:</th> 
        <td><input type='text' id='newDate' name='Datenew' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Start Time:</th> 
        <td><input type='text' id='newTime' name='Timenew' readonly='readonly' value=''/><span class='timepicker_button_trigger'><img src='Images/clock.gif' alt='Choose Time' /></span> </td>
        </tr>
        </table>
        <div id='datetimeAlert'></div>

<button id='updateSubmit'>Update Date/Start Time</button>

        </form>
        ";

        echo $editsession;

        }

        ?> 
```

以下是 updatedatetime.php 的代码：

```
<?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

echo 'sumbit successful';

$sessionname = (isset($_POST['Assessmentnew'])) ? $_POST['Assessmentnew'] : ''; 
$sessiondate = (isset($_POST['Datenew'])) ? $_POST['Datenew'] : ''; 
$sessiontime = (isset($_POST['Timenew'])) ? $_POST['Timenew'] : ''; 

$formatdate = date("Y-m-d",strtotime($sessiondate));
$formattime = date("H:i:s",strtotime($sessiontime));

$updatesql = "UPDATE Session SET SessionDate = ?, SessionTime = ? WHERE SessionName = ?";                                           
$update = $mysqli->prepare($updatesql);
$update->bind_param("sss", $formatdate, $formattime, $sessionname);
$update->execute();

echo 'update successful';

$query = "SELECT SessionName, SessionDate, SessionTime FROM Session WHERE SessionName = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s", $sessionname);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbSessionName, $dbSessionDate, $dbSessionTime);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows();

echo 'select successful';

if ($numrows == 1){

echo "<span style='color: green'>Your Assessment's new Date and Time have been updated</span>";

}else{

echo "<span style='color: red'>An error has occured, your Assessment's new Date and Time have not been updated</span>";

}

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:47:03.407

好的，清除您的代码，执行表单提交，这就是 ajax 调用所需的全部内容

```
function submitupdate() {    

    $.ajax({
        type: "POST",
        url: "/updatedatetime.php",
        data: $('#updateForm').serialize(),
        success: function(html){
            $("#targetdiv").html(html);
        }
     });        
} 
```

这假设

```
/updatedatetime.php 
```

正确计算并回显更新的成功或失败，

这是一个[**FIDDLE**](http://jsfiddle.net/videsignz/4VVxs/)，向您展示表单本身所需的最低要求。您不需要在表单本身上放置任何方法或操作，只需表单标签即可。

至于提交按钮……你可以把它放在任何地方，做任何事情，只要确保你给它一个 ID 并附加一个点击处理程序来提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:11:02.397

您必须在 post call 中删除再次提交表单的行，并且该行是 exaclty `updateFormO.submit();`。使用 post 方法进行 ajax 调用，然后在成功函数中再次重新提交表单。

# javascript - 构建问卷时使用的正确 Javascript 数组类型是什么？

> ID：13387418
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:13:15.717
> 
> 标签：javascript, arrays

我正在构建一个单页问卷应用程序，但我不确定为问题构建数组的正确方法是什么。另外，以这种方式混合问题类型是不好的做法吗？（单选，同一阵列中的多选？）基本上，我仍在尝试了解我所见过的两种基本方法的优缺点。

选项1：

```
var hygiene = [

  {
    pageheader: "Self-Care"
  }

  {
    q: "When was your last shower?",
    choicetype: "radio",
    a1: "Today",
    a2: "Yesterday",
    a3: "Two days ago",
    a4: "I don't know"
  }

  {
    q: "How much do you weigh today?",
    choicetype: "keypad"
  }

  {
    q: "Do you take any medications?",
    choicetype: "radio",
    a1: "Yes",
    a2: "No"
  }

  {
    q: "Which medications?",
    choicetype: "multiselect",
    a1: "Zostavax",
    a2: "Percocet",
    a3: "Actemra",
    a4: "Cimzia",
    a5: "Relprevv"
  }

]; 
```

选项 2：

```
var hygiene = {

  pageheader: "Self-Care",

  question1: [
    "When was your last shower?", "radio", "Today", "Yesterday",
    "Two days ago", "I don't know"
  ],

  question2: [
    "How much do you weigh today?", "keypad"
  ],

  question3: [
    "Do you take any medications?", "radio", "Yes", "No"
  ],

  question4: [
    "Which medications?", "multiselect", "Zostavax", "Percocet",
    "Actemra", "Cimzia", "Relprevv"
  ]

}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T21:21:10.943

我的建议是不要使用它们中的任何一个，而是以下：

```
var hygiene = {

    pageheader: "Self-Care",

    questions: [

        {
            question: "When was your last shower?",
            choicetype: "radio",
            answers: [
                "Today",
                "Yesterday",
                "Two days ago",
                "I don't know"
            ]
        },

        {
            question: "How much do you weigh today?",
            choicetype: "keypad"
        },

        {
            question: "Do you take any medications?",
            choicetype: "radio",
            answers: [
                "Yes",
                "No"
            ]
        },

        {
            question: "Which medications?",
            choicetype: "multiselect",
            answers: [
                "Zostavax",
                "Percocet",
                "Actemra",
                "Cimzia",
                "Relprevv"
             ]
         }
    ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:16:21.173

选项 1 比选项 2 好得多，因为您指定了变量并为每个字符串指定了有意义的名称，以便稍后在代码中使用。

如果您有大量问卷，这取决于您以后代码的可读性。如果你在一个文件中有 100 个，你更喜欢 1 个还是 2 个？

# hadoop - 云应用程序是什么样的？

> ID：13387419
> 
> 赞同：0
> 
> 时间：2012-11-14T21:13:26.543
> 
> 标签：hadoop, salesforce, cloud, distributed-computing

有许多应用程序被称为云应用程序。例如，那些通过网络为大量客户（例如[Salesforce](http://www.salesforce.com/)）提供基于网络的应用程序的公司将他们的应用程序称为云应用程序。另一方面，许多人都知道基于云的应用程序是建立在 Hadoop 或类似技术之上的应用程序，可以扩展到许多计算资源。

现在的问题是，是否有云应用程序的确切定义？Cloud Apps上有什么好的资源吗？这里有一个[不错的链接](http://msdn.microsoft.com/en-us/library/dd430340.aspx)，但它有点旧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:01:39.033

据我所知，没有明确的定义。

最松散的只是在服务器上完成大部分工作的任何应用程序，而不是在本地客户端的设备上。

我听过的最严格的定义是几乎完全运行在作为服务提供的虚拟化服务器集群上的应用程序，而不是在现场托管。客户端设备几乎什么都不做；可能只是一个带有最少脚本的简单网络浏览器。

两者之间的任何定义在上下文中都是有意义的。

我不会太沉迷于它。“云”大多只是一个没有严格技术定义的营销流行词。

# excel - 在 Excel 中.. 如何获取名称的第一个字母并将其添加到另一列中的姓氏

> ID：13387421
> 
> 赞同：0
> 
> 时间：2012-11-14T21:13:29.720
> 
> 标签：excel

在 EI 列中有一个包含 400 个名字的列表，在 FI 列中有一个他们的姓氏列表。如何将第一个字母与另一列中的姓氏合并。G列是我在下面的例子中想要的。

例子

```
ColE        ColF              ColG
John        Smith             JSmith
Mike        Tomas             MTomas
Jill        Lake              JLake 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:17:51.313

使用`LEFT()`函数和 & 符号连接

```
=LEFT(e1,1)&f1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:17:10.067

G列中的这个公式将得到你想要的：

```
=CONCATENATE(LEFT(E1,1),F1)
=CONCATENATE(LEFT(E2,1),F2)
=CONCATENATE(LEFT(E3,1),F3) 
```

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:17:20.413

在 G 列中，尝试

```
 left(E1,1) & F1 
```

# jsf - 页面方法上的单个 JSF 表单与多个表单？

> ID：13387424
> 
> 赞同：1
> 
> 时间：2012-11-14T21:13:50.867
> 
> 标签：jsf, primefaces

将单个页面上的这几个隐藏表单合并为一个大表单是否有意义？

提交属于特定表单`process`属性的特定参数集可用于提交需要处理的所有元素。

与使用多种表格相比，这种单一表格方法的优点/缺点是什么？

```
 <span class="hiddenForms">
        <h:form>
            <h:inputHidden id="selctdChnlType_in" value="#{channelCntlr.type}"/>
            <h:inputHidden id="selctdChnlId_in" value="#{channelCntlr.channelId}"/>
            <p:remoteCommand name="updateChnlDataPanel" process="@form" actionListener="#{channelCntlr.init()}" update=":channelHeader, :channelDataPanel, :channelSideColumn"/>
        </h:form>

        <h:form>
            <h:inputHidden id="selctdLOBId_in" value="#{lobCntlr.targetLOBId}"/>
            <p:remoteCommand name="updateLOBPanel" process="selctdLOBId_in, @this" actionListener="#{lobCntlr.retrieveCurrentLOB()}" update=":lobFullContentPanel" />
        </h:form>

        <h:form id="lobAction_form" >
            <h:inputText id="targetLOBId_in" value="#{lobCntlr.targetLOBId}"/>
            <h:inputText id="targetResponseId_in" value="#{lobCntlr.targetResponseOrCommmentId}"/>
            <h:inputText id="targetAction_in" value="#{lobCntlr.targetAction}"/>
            <p:remoteCommand name="doLOBAction" process="targetLOBId_in, targetAction_in, targetResponseId_in,@this" actionListener="#{lobCntlr.doLOBAction()}"/>

            <h:inputText id="targetTopics" value="#{lobCntlr.list}" converter="listConverter"/>
            <p:remoteCommand name="suggestAsHotLOB" process="targetLOBId_in, targetTopics, @this" actionListener="#{lobCntlr.addForTryAsHotLOB()}"/>
        </h:form>

        <h:form id="comment_form" >
            <h:inputText id="targetLOBId_in" value="#{lobCntlr.targetLOBId}"/>
            <h:inputText id="targetCommentOrResponseId_in" value="#{lobCntlr.targetResponseOrCommmentId}"/>
            <h:inputText id="comment_in" value="#{lobCntlr.text_input}" required="true">
                <f:validateLength minimum="15" maximum="1000"/>
            </h:inputText>
            <h:inputText id="previousCommenters_in" value="#{lobCntlr.list}" converter="listConverter"/>

            <p:remoteCommand name="addComment" process="@form" actionListener="#{lobCntlr.addUserComment()}" oncomplete="addCommentToPage(args);" />
            <p:remoteCommand name="deleteComment" process="targetLOBId_in, targetCommentOrResponseId_in, @this" actionListener="#{lobCntlr.removeUserComment()}"  oncomplete="removeFromPage(args);" />
        </h:form>

        <h:form id="recosForm">
            <h:inputText id="startFromRecos_in" value="#{recmdnsCntlr.startFromIndex}"/>
            <p:remoteCommand name="fetchAllRecos" actionListener="#{recmdnsCntlr.retrieveAllRecmmndns()}" process="startFromRecos_in,howManyRecos_in,isLocalStorAvailble_in,@this" />
            <p:remoteCommand name="fetchFollowiesList" actionListener="#{recmdnsCntlr.fetchAllFollowiesList()}" process="@this" oncomplete="storeFollowiesList(args)"/>
        </h:form>

        <span id="editsForm" style="display:none">
            <form action="javascript:void(0);" class="edits_submitter" >
                <p:inputTextarea styleClass="editedText"/>
                <input type="submit" value="Save edits"/>
                <a class="cancel-edit" href="javascript:void(0)">Cancel</a>
            </form>
        </span>

    </span> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:39:53.700

单一、单一的 JSF 表单控件的一个主要缺点是（不必要地）发送到服务器进行处理的数据量很大。使用您现有的代码。考虑以下。如果所有控件都在一个表单中，那么您将`<h:form id="lobAction_form" >`拥有`<h:form id="comment_form" >`

```
 <h:inputText id="targetLOBId_in" value="#{lobCntlr.targetLOBId}"/>
        <h:inputText id="targetResponseId_in" value="#{lobCntlr.targetResponseOrCommmentId}"/>
        <h:inputText id="targetAction_in" value="#{lobCntlr.targetAction}"/>
        <p:remoteCommand name="doLOBAction" process="targetLOBId_in, targetAction_in, targetResponseId_in,@this" actionListener="#{lobCntlr.doLOBAction()}"/>

        <h:inputText id="targetTopics" value="#{lobCntlr.list}" converter="listConverter"/>
        <p:remoteCommand name="suggestAsHotLOB" process="targetLOBId_in, targetTopics, @this" actionListener="#{lobCntlr.addForTryAsHotLOB()}"/>
        <h:inputText id="targetLOBId_in" value="#{lobCntlr.targetLOBId}"/>
        <h:inputText id="targetCommentOrResponseId_in" value="#{lobCntlr.targetResponseOrCommmentId}"/>
        <h:inputText id="comment_in" value="#{lobCntlr.text_input}" required="true">
            <f:validateLength minimum="15" maximum="1000"/>
        </h:inputText>
        <h:inputText id="previousCommenters_in" value="#{lobCntlr.list}" converter="listConverter"/>

        <p:remoteCommand name="addComment" process="@form" actionListener="#{lobCntlr.addUserComment()}" oncomplete="addCommentToPage(args);" />
        <p:remoteCommand name="deleteComment" process="targetLOBId_in, targetCommentOrResponseId_in, @this" actionListener="#{lobCntlr.removeUserComment()}"  oncomplete="removeFromPage(args);" />
    </h:form> 
```

**对于您以该表单启动的每个命令操作，可能是为了处理 1 个输入文本组件，无论如何您总是将其中的所有 13 个组件发送到服务器。浪费和不必要的。**对于小型操作，您将有大量的客户端-服务器通信，有时响应时间很慢。根据您使用的任何 JSF 框架，您可能能够在这种情况下发挥创造力，选择性地处理组件等等，但这只是不必要且痛苦的。清晰的关注点分离也在表示层中发挥作用。

然后是验证的问题。通常，您会在单个表单中选择组件，这些组件被标记为`required`并且与该表单中的其余组件无关。您很可能无法在不影响该表单上的所有其他组件的情况下选择性地处理这些组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:40:53.770

我看到你正在使用primefaces。您可以考虑使用向导组件。有了这个组件，就有一个表单，在不同的选项卡中有更多的部分。当您从一个选项卡转到下一个选项卡时，验证是在 Ajax 模式下完成的。由于部分验证是使用 Ajax 完成的，因此只有您正在验证的选项卡的字段会被处理并发送到服务器。

将长表单拆分为更具可读性和用户友好性的部分也很有用。

# objective-c - 覆盖所有视图控制器的 viewWillDisappear？

> ID：13387427
> 
> 赞同：2
> 
> 时间：2012-11-14T21:13:55.663
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

有没有办法在我的整个应用程序中的所有视图控制器中覆盖 viewWillDisappear （或任何视图控制器委托方法）？

需要明确的是，我仍然想在视图控制器本身中自定义每个 viewWillDisappear 方法，但基本上我想在每个视图控制器的 viewWillDisappear 方法中添加一行代码，而不必手动执行（这是一个大项目）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T21:16:06.843

我只会创建一个基本 ViewController，它只覆盖您想要的功能，然后让项目中的每个 viewcontroller 都继承自它而不是 UIViewController。此外，为了让您的生活更轻松，请将基本视图控制器的#import 添加到您的 .pch 文件中。

# iphone - 在您的地图视图上拥有多个图钉/位置的最简单/最佳方式是什么？

> ID：13387428
> 
> 赞同：1
> 
> 时间：2012-11-14T21:13:55.307
> 
> 标签：iphone, xcode, loops, map, xcode4.5

我正在尝试制作一个具有多个引脚/位置（大约 50-100）的应用程序。哪条路最容易走？我可以有某种数据库来获取我的位置吗？目前我有一个很好用的代码，但它只显示一个位置/引脚。如何在当前代码上添加更多内容？或者正如我之前所说，使用某种数据库是否有其他更简单的方法？

这是代码：SecoundViewController.h：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface SecondViewController : UIViewController {

MKMapView *mapview;
}

@property (nonatomic, retain) IBOutlet MKMapView *mapview;

-(IBAction)setMap:(id)sender;

-(IBAction)getlocation;

@end 
```

SecondViewController.m：

```
#import "SecondViewController.h"
#import "NewClass.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

@synthesize mapview;

-(IBAction)getlocation {

mapview.showsUserLocation = YES;

}

-(IBAction)setMap:(id)sender {

switch (((UISegmentedControl *) sender).selectedSegmentIndex) {

    case 0:

        mapview.mapType = MKMapTypeStandard;

        break;

    case 1:

        mapview.mapType = MKMapTypeSatellite;

        break;

    case 2:

        mapview.mapType = MKMapTypeHybrid;

        break;

    default:

        break;

}

}

-(void)viewDidLoad {
[super viewDidLoad];

[mapview setMapType:MKMapTypeStandard];
[mapview setZoomEnabled:YES];
[mapview setScrollEnabled:YES];

MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
region.center.latitude = 56.15881;
region.center.longitude = 13.76454;
region.span.longitudeDelta = 0.01f;
region.span.latitudeDelta = 0.01f;
[mapview setRegion:region animated:YES];

NewClass *ann = [[NewClass alloc] init];
ann.title = @"Harrys Pub & Restaurang";
ann.subtitle = @"Järnvägsgatan 7";
ann.coordinate = region.center;
[mapview addAnnotation:ann];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:17:37.733

这完全取决于您计划如何输入和维护有关引脚的信息。您可以使用 XML、JSON、plist、CoreData...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:27:56.780

您可以填充对象并调用 `NSArray`：`NewClass`

`[mapview addAnnotations:arrayOfAnnotations];`//（注意方法中最后的's'）

将所有注释放在地图视图上。
显然每个注释应该有不同的坐标。

要按照@Alex 所说的方式存储坐标，您可以选择您喜欢的格式。

# objective-c - 如何控制我的 UILabel 展开的方向？

> ID：13387430
> 
> 赞同：0
> 
> 时间：2012-11-14T21:14:00.657
> 
> 标签：objective-c, ios, xcode, uiview, uilabel

我有几个按钮，每个按钮旁边都有三个 UILabel，这些按钮的一半在左侧有两个标签，如下所示。每个标签都有一个介于 1 到 3 位之间的数字，并且会扩展（使用 UIView 方法“sizeToFit”）以适应该数字。但是，当标签位于左侧时，视图在展开时会与按钮重叠。我怎样才能解决这个问题？

![在此处输入图像描述](../Images/c03e58a1a1fe6f334d50914ae8f3ea35.png)

# c# - 为 NancyFX 正确注册 DataContext

> ID：13387431
> 
> 赞同：2
> 
> 时间：2012-11-14T21:14:08.200
> 
> 标签：c#, nancy, tinyioc

我正在为 API 项目使用 NancyFX 和 Highway.Data + Entity Framework。我的模块依赖于存储库，该存储库依赖于 DataContext。我需要注册 DataContext 并包含来自 web.config 的连接字符串，所以我有这个：

```
public class CustomBootstrapper : DefaultNancyBootstrapper
{
    protected override void ApplicationStartup(TinyIoC.TinyIoCContainer container, Nancy.Bootstrapper.IPipelines pipelines)
    {
        //Gotta specify how to register the DataContext to use the connectionstring
        container.Register<IDataContext>(
            (c, p) =>
            new DataContext(ConfigurationManager.ConnectionStrings[1].ConnectionString,
                            c.Resolve<IMappingConfiguration>()));

        base.ApplicationStartup(container, pipelines);
    }
} 
```

这设置了注册，因此它使用我的 web.config 连接字符串，但也使用自动注册已经注册的任何 IMappingConfiguration。

但它看起来像是将其注册为单例而不是每个网络请求。这意味着数据在 Web 请求之间被缓存，这不是我想要的。

我尝试将 .AsMultiInstance() 添加到上面的注册中，但在启动时出现错误：“无法将 TinyIoC.TinyIoCContainer+DelegateFactory 的当前注册转换为多实例”

谁能建议我如何正确注册？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:19:01.907

容器配置应根据您的生命周期要求执行`ConfigureApplicationContainer`或执行。`ConfigureRequestContainer`

希望这可以帮助

# lotus-notes - 在计划代理中运行 ExtractFile 时出现错误 4005

> ID：13387437
> 
> 赞同：0
> 
> 时间：2012-11-14T21:14:33.493
> 
> 标签：lotus-notes, lotus-domino, lotus, lotusscript

我有一个预定的 LotusScript 代理，我想循环浏览视图中的文档并将附加文件提取到服务器上的文件夹中：

```
'extract file
If Not IsEmpty(rtitem.embeddedObjects) Then
    ForAll o In rtitem.EmbeddedObjects
        If (o.Type = EMBED_ATTACHMENT) Then
            Call o.ExtractFile("\\TestServer\TestFolder\"+o.name)
        End If
    End ForAll
End If 
```

此代理在通过 Notes 客户端运行时工作正常。但是，当安排代理时，我收到以下错误：“错误：4005 - 注释错误：登录失败：未知用户名或密码错误”。它在上面的“调用 o.ExtractFile(...”) 行出错。

我尝试将代理上的安全级别更改为“允许具有完全管理员权限的受限操作”和“以 Web 用户身份运行”，但错误仍然存​​在。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:28:15.967

这似乎是网络错误，而不是 Lotus Notes 中的错误。确保运行服务器的帐户有权访问共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T20:24:10.303

1.  这是一个非常常见的问题：如果您要在某个位置提取文件，那么还要检查服务器上是否存在驱动器。
2.  确保您拥有在文件夹上创建文件的适当权限，这意味着文件夹应该具有完全访问权限。
3.  代理人应享有适当的权利。

# ios - 自动调整 UITableViewCell 的大小

> ID：13387445
> 
> 赞同：0
> 
> 时间：2012-11-14T21:15:19.413
> 
> 标签：ios, xcode, uitableview

我想知道如何调整表格视图单元格的大小，并查看所有消息我的应用程序正在从服务器上的 xml 获取消息，然后显示它们，但如果消息比文本字段长，它只会显示3个点是我的代码：

```
 - (NSInteger)tableView:(UITableView *)myTableView numberOfRowsInSection:(NSInteger)section {
return ( messages == nil ) ? 0 : [messages count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
return 37;
}

- (UITableViewCell *)tableView:(UITableView *)myTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = (UITableViewCell *)[self.messageList dequeueReusableCellWithIdentifier:@"ChatListItem"];
if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ChatListItem" owner:self options:nil];
    cell = (UITableViewCell *)[nib objectAtIndex:0];
}

NSDictionary *itemAtIndex = (NSDictionary *)[messages objectAtIndex:indexPath.row];
UILabel *textLabel = (UILabel *)[cell viewWithTag:1];
textLabel.text = [itemAtIndex objectForKey:@"text"];
UILabel *stextLabel = (UILabel *)[cell viewWithTag:3];
stextLabel.text = [itemAtIndex objectForKey:@"text"];

UILabel *userLabel = (UILabel *)[cell viewWithTag:2];
userLabel.text = [itemAtIndex objectForKey:@"user"];
UILabel *suserLabel = (UILabel *)[cell viewWithTag:4];
suserLabel.text = [itemAtIndex objectForKey:@"user"];

if ([usernameText.text isEqualToString:userLabel.text]){
    UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"chat1@2x.png"]];
    [cell setBackgroundView:img];
    [img release];

    textLabel.hidden=NO;
    stextLabel.hidden=YES;

    userLabel.hidden=NO;
    suserLabel.hidden = YES;

}
else{
    UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"chat2@2x.png"]];
    [cell setBackgroundView:img];
    [img release];

    textLabel.hidden=YES;
    stextLabel.hidden=NO;

    userLabel.hidden=YES;
    suserLabel.hidden = NO;
}

return cell;

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:21:11.487

你必须像这个逻辑一样通过 heightForRowAtIndexPath （代码还没有准备好）：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
NSDictionary *itemAtIndex = (NSDictionary *)[messages objectAtIndex:indexPath.row];
NSString *text = [itemAtIndex objectForKey:@"text"];
if(text is larger then what ever you want) {
    return yourSpecificCellHeight;
}
return 37; 
```

}

要计算文本的大小，请参阅[stackOverflow 上的这篇文章](https://stackoverflow.com/questions/2669063/how-to-get-the-size-of-a-nsstring)

# python - 更改表单集中表单的显示顺序

> ID：13387446
> 
> 赞同：8
> 
> 时间：2012-11-14T21:15:22.347
> 
> 标签：python, django

我正在显示一个模型表单集，我希望表单按其中一个字段的内容进行排序。所以我想`SomeModel.objects.filter(whatever).order_by('somefield')`在模板中使用（模型）表单集的等价物。

我怎样才能做到这一点？

请注意，`can_order`它不会做我想要的（它必须是自动的，而不是用户指定的）。我也尝试过其他的东西，比如 dictsort 过滤器，但这会产生不可预测的输出（即不按指定字段排序）。

我什至尝试过`{% regroup formset by somefield as sorted_formset %}`，但结果`sorted_formset`不能用作（迭代）普通表单集。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-03T20:33:27.560

完成答案。有两种方法可以控制表单集中表单的顺序：表单集尊重给定查询集的顺序（这在其他回复中显示）。另一种方法（如果您想完全控制表单的顺序）是定义自定义表单集类和覆盖`__iter__`和`__getitem__`方法：

```
from django.forms import BaseModelFormSet

class MyModelBaseFormset(BaseModelFormSet):
    def __iter__(self):
        """Yields the forms in the order they should be rendered"""
        return ...

    def __getitem__(self, index):
        """Returns the form at the given index, based on the rendering order"""
        return ...

MyModelFormset = modelformset_factory(model=MyModel, formset=MyModelBaseFormset, queryset=...) 
```

这种方法在 Django 文档中有描述：

> 遍历表单集将按照表单创建的顺序呈现表单。您可以通过为该方法提供替代实现来更改此顺序`__iter__()`。
> 
> 表单集也可以被索引，返回相应的表单。如果您 override `__iter__`，您还需要 override `__getitem__`以具有匹配的行为。

[https://docs.djangoproject.com/en/dev/topics/forms/formsets/#django.forms.formsets.BaseFormSet](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#django.forms.formsets.BaseFormSet)

实现这些方法的示例例如在这个 SO 线程中：[modelformset __iter__ 重载问题](https://stackoverflow.com/questions/7393615/modelformset-iter-overloading-problem)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-05T14:54:02.563

如果您没有定义 Formset，这是“内联代码”版本：

```
FS=inlineformset_factory(ParentClass,ChildClass)
formset=FS(instance=parentobject,
           queryset=parentobject.childobject_set.order_by("-time_begin")
          ) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-17T18:49:11.570

感谢上面的@john-peters 回答，为我指明了正确的方向。但这里有一个更好的方法：

```
MyFormset(inlineformset_factory(...)):

  def get_queryset(self):
    return super(MyFormset, self).get_queryset().order_by('myfieldname') 
```

这样你就不必复制或弄乱 django 的代码，也不必在路上造成损坏。只需使用 django 给你的查询集并覆盖排序。我在自己的代码中使用了它，它可以工作。

编辑。经过一番研究，我意识到虽然它看起来工作正常，但它以某种方式弄乱了 BaseInlineFormset.get_queryset() 中的逻辑，导致重复的数据库查询。但是，希望有人对此发表评论并纠正它，我将把它留在这里。同时，我有另一个解决方案，它可以工作并且不会导致冗余查询..如下：

```
MyFormset(inlineformset_factory(...)):
    def __init__(self, *args, **kwargs):
        super(MyFormset, self).__init__(*args, **kwargs)
        self.queryset = self.queryset.order_by('myfieldname') 
```

这会在安全时间修改查询集，然后再对其进行任何操作。在我的代码中，我也在此处执行 .select_related()，这大大加快了我的大型模型表单集的速度！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T03:04:28.880

感谢rantanplan的评论，我找到了解决方案。我无法使用上面链接中描述的方法，因为我不知道查询集将是什么（这是一个带有嵌套表单集的复杂表单）。

无论如何，我通过覆盖 Django 的 BaseInlineFormSet 类的 get_queryset 方法找到了解决方案。我在下面复制了它，包括我的 mod，以防 googlers 发现它有帮助。

```
def get_queryset(self):
    '''
    Copied this method from Django code and modified the ordering statement
    '''
    if not hasattr(self, '_queryset'):
        if self.queryset is not None:
            qs = self.queryset
        else:
            qs = self.model._default_manager.get_query_set()

        # If the queryset isn't already ordered we need to add an
        # artificial ordering here to make sure that all formsets
        # constructed from this queryset have the same form order.
        if not qs.ordered:
# MY MOD IS HERE:
#            qs = qs.order_by(self.model._meta.pk.name)
            qs = qs.order_by('order_index')
#/MOD

        # Removed queryset limiting here. As per discussion re: #13023
        # on django-dev, max_num should not prevent existing
        # related objects/inlines from being displayed.
        self._queryset = qs
    return self._queryset 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-03T06:08:42.793

一种更简单的方法，但它可能不适用于所有情况，但如果你能负担得起，只需在模型 Meta 类中定义排序：

```
class ExampleModel(models.Model):
     ...
     class Meta:
          ordering = ("name", ) 
```

Formset 将尊重查询集的排序，这将尊重 Meta 类变量的值。

# javascript - Guard 执行所有规范会导致 Capybara + JS 测试返回：'机架应用程序在启动期间超时'

> ID：13387455
> 
> 赞同：2
> 
> 时间：2012-11-14T21:15:50.387
> 
> 标签：javascript, ruby-on-rails-3, rspec, capybara, guard

我有一个带有 Rsped 的 Capybara 脚本，其中包括`:js => true`当我单独执行脚本时可以正常工作的脚本。耶！这是脚本：

```
# spec/requests/capybara_and_js_spec.rb
require 'spec_helper'

describe "Associating Articles with Menus" do
  it "should include javascript", js: true do
    visit root_path
    page.should have_selector('script')
  end
end 
```

当我执行脚本时，我得到：

```
.
Finished in 4.22 seconds
1 example, 0 failures 
```

但是，当我通过 使用我的所有规范执行相同的脚本时`Guard Run all`，我得到了这个（我省略了几千个测试）

```
........................*...*..............Rack application timed out during boot
Rack application timed out during boot
F..................................... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:15:50.387

我花了很多时间研究这个问题，并发现了一些关于这个问题的有趣的博客文章，但没有一个解决方案对我有用。

以下是我尝试过的选项：

我从 Capybara Selenium 的默认 js 驱动程序切换到 Webkit 和 Poltergeist，如下所示：

```
# Gemfile
gem "capybara-webkit"

# spec/spec_helper.rb
Spork.prefork do
  Capybara.javascript_driver = :webkit
end 
```

和

```
# Gemfile
  gem "poltergeist"

# spec/spec_helper.rb
Spork.prefork do
  require 'capybara/poltergeist'
  Capybara.javascript_driver = :poltergeist
end 
```

但也没有运气。

根据[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/ruby-capybara/XyqV890tsKU)和[这篇文章](http://pullmonkey.com/2011/03/03/rack-application-timed-out-during-boot-capybara/)我试过：

```
# spec/spec_helper.rb
Spork.prefork do
  Capybara.server_boot_timeout = 600  # Default is 10 my entire suite
end                                   # takes ~550s to run, that's why I
                                      # attempted such a large boot timeout in
                                      # case the time was from beginning of suite 
                                      # execution. 
```

无济于事。

然后我找到[了这篇文章](http://docs.tddium.com/troubleshooting/browser-based-integration-tests)，所以我尝试：

```
# spec/spec_helper.rb
# initial advice was for cucumber, and thus recommended this to be placed in
# the features/env.rb file
def find_available_port
  server = TCPServer.new('127.0.0.1', 0)
  server.addr[1]
ensure
  server.close if server
end

if ENV['TDDIUM'] then
  Capybara.server_port = find_available_port
end 
```

但没有运气。

[根据 StackOverflow 上的这个问题，](https://stackoverflow.com/questions/8178120/capybara-with-js-true-causes-test-to-fail)我还检查了我的 database_cleaner 设置，以确保 DatabaseCleaner 与 FactoryGirl 的工厂很好地配合使用。

仍然没有运气。

接下来，我尝试从 Guardfile 中较低级别的 rspec 测试中解析出我的 capybara 测试，如下所示：

```
group 'integration tests' do
  # Capybara Tests
  guard 'rspec', spec_paths: ['spec/requests'] do
    watch(%r{^spec/requests/.+_spec\.rb})
  end  
  # Cucumber Feature Tests
  guard 'cucumber', bundler: true do
    watch(%r{^features/.+\.feature$})
  end
end

group 'unit tests' do
  rspec_paths = ['spec/controllers', 'spec/helpers', 'spec/models', 'spec/views']
  # RSpec Unit Tests
  guard 'rspec', spec_paths: rspec_paths do
    watch(%r{^spec/.+_spec\.rb$})
  end
  # Jasmine JS Unit Tests
  guard 'jasmine', all_on_start: false, all_after_pass: false do
    watch(%r{spec/javascripts/.+_spec\.(js\.coffee|js|coffee)$})
  end
end 
```

成功！最后！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-27T03:37:27.157

在花了很多时间之后，我遇到了同样的问题。我发现我正在端口 3001 上运行另一个 Rails 服务器。当我关闭该服务器时，我的杯子就像魅力一样工作。

我希望这会帮助一些人！

# equals - Javascript 或等于

> ID：13387456
> 
> 赞同：2
> 
> 时间：2012-11-14T21:15:52.867
> 
> 标签：equals

下面的一些 javascript 代码应该检查它是否是这些字母之一。但是，例如，当我键入“Hallo”时，它还会计算“H”、“L”、“L”

```
woord.charAt(i) == 'a' || 'e' || 'i' || 'o' || 'u' 
```

我做错了什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T21:21:04.127

```
(woord.charAt(i) == 'a') || 'e' || 'i' || 'o' || 'u'
// evaluates to true or 'e' 
```

看起来您正在尝试像编写句子一样编写代码，在这种情况下翻译效果不佳。上面的代码显示了该表达式的实际情况。

您需要单独将字符与每个字符串进行比较或编写正则表达式。正则表达式更紧凑，看起来像：

```
/[aeiou]/.test(word.charAt(i)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:23:52.130

Try using a different approach to the problem

```
 var c = woord.charAt(i);
    if (c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u'){
    vowels++;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:21:13.233

改用这个

```
var str = "My string";
var chr = "";
var nVowels = 0;

for (pos = 0; pos < str.length; pos++){
   chr = str.charAt(pos).toLowerCase();
   if (chr == "a" || chr == "e" || chr == "i" || chr == "o" || chr == "u")
    nVowels++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:50:19.517

基本上，您应该分别检查每个选项，但这很丑陋并且表现不佳。我宁愿创建一个接受字符的数组并检查该数组中当前字符的索引。

```
var vowels = new Array('a', 'e', 'i', 'o');
var word = 'hello';
var vowelCount = 0;
for(var x=0; x < word.length; x++){
  var ch = word.charAt(x).toLowerCase();
  if (vowels.indexOf(ch) > -1)
    vowelCount++;
} 
```

# java - 尝试每个标准库选项后从 java 执行 sudo 命令

> ID：13387460
> 
> 赞同：3
> 
> 时间：2012-11-14T21:16:03.623
> 
> 标签：java, shell, execute, sudo

我需要从 Java 运行 sudo 并且我尝试了以下选项：

*   Runtime.exec（每种形式的“回显密码 | sudo -S”）。尽管正确指定了程序的路径，但每种形式的命令都可以直接从终端成功执行，但不能从 java 执行
*   ThreadExecutor 中的 ProcessBuilder，如此[处所示](http://alvinalexander.com/java/java-exec-processbuilder-process-1 "这里")

编辑 sudoers 和以 root 身份运行 Java 进程的选项对我来说是不可行的。这真的是我唯一的选择[，](http://www.jcraft.com/jsch/examples/Sudo.java.html)因为我真的想避免使用任何非标准库吗？

编辑：似乎除了要求用户专门下载 SUDO GUI（kdesudo、gksu、cocoasudo 等）然后提供 java 的路径之外没有其他办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:27:26.097

将您的 root 密码存储在您的 java 应用程序中是一个非常可怕的坏主意。我建议您以不同的方式解决这个问题，例如使用不同的 sudo 配置（因此它不需要来自任何帐户的密码）、SUID 二进制包装器或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:29:35.777

您可以使用[`Process`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html)获得的对象来访问连接到进程的标准输出、输入和错误的输入、[输出](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getOutputStream%28%29)和错误流。

这样，您可以将输入发送到子进程并读回其输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:18:39.387

“每种形式”是否包括“bash -c 'echo password | sudo -S'”？

# html - 容器溢出左侧的 div 结构和 CSS：隐藏

> ID：13387462
> 
> 赞同：0
> 
> 时间：2012-11-14T21:16:07.493
> 
> 标签：html, css

我非常精通 CSS 和 HTML，但我只是想知道这将如何正常工作。

我希望容器的宽度为 990px​​，但由于左右添加了阴影，我的宽度约为 1237px

我把它定位了，但我希望将溢出隐藏到 990px​​ 宽度...

有没有办法做到这一点？这是我当前的代码。

**CSS：**

```
body, html {margin:0; padding:0;}
body {background:url(../images/bg-x.jpg) top center repeat-x; background-color:#000;}
#main-wraper { } 
#main-container {margin:0 auto; width:990px; background:url(../images/container-bg.jpg) no-repeat; height:660px;}
#main-left {background:url(../images/bg-left.jpg) left center no-repeat;}
#main-right {background:url(../images/bg-right.jpg) right center no-repeat;}
#shadows {width:1237px; margin:0 auto; overflow-x: hidden} 
```

**html:**

```
<body> 
  <div id="shadows">
    <div id="main-left">
      <div id="main-right">
        <div id="main-wraper"> 
          <div id="main-wraper-liner">
            <div id="main-container">
              <div id="main-container-liner">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body> 
```

链接在这里

[http://hithouse.businesscatalyst.com/index.html](http://hithouse.businesscatalyst.com/index.html)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:11:25.827

如果我猜对了，当屏幕小于`990px`. 我要做的是：

*   让身体保持原样
*   创建一个透明的png，高度为1px，宽度为990px​​ + 阴影（左右）
*   使用这个更简单的标记
*   你准备好了

**HTML**

```
<div class="content">
    <div class="shadow"></div>
    <h1>Normal content goes here</h1>
</div>​ 
```

**CSS**

```
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}

div.content {
    position: relative;
    width: 400px;
    height: 100%;
    margin: 0 auto;
    border: 1px solid red;
}

div.shadow {
    position: absolute;
    top: 0;
    left: -28px;
    width: 456px;
    height: 100%;
    background: transparent url(https://dl.dropbox.com/u/1336931/_Stackoverflow/example_shadow.png) repeat-y 0 0;
}​ 
```

**演示**

[先试后买](http://jsfiddle.net/TqXWb/)

# macos - 是否可以记录 Growl 1.2.2 通知？

> ID：13387463
> 
> 赞同：0
> 
> 时间：2012-11-14T21:16:18.580
> 
> 标签：macos, logging, hook, growl

本质上，我想在发生咆哮时向我的手机发送一个俯卧警报。

为此，我希望在发出咆哮或失败的日志文件时有一个钩子，我可以在 cron 作业上扫描。然后我可以使用其中任何一个来发送推倒警报。

咆哮 1.2.2 是否有能力提供钩子或记录它的咆哮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T02:35:23.967

是的，答案出现在很多地方，通常是相同的错误（*）被复制。我只是自己设置的，所以在这里：

决定你想要你的日志文件的位置。示例都表明它必须首先存在，尽管我没有验证......

```
growlog="$HOME/Library/Logs/Growl.log"
touch  "$growlog" 
```

在修改之前检查现有的咆哮设置：

```
defaults read com.Growl.GrowlHelperApp 
```

这些是魔术设置：

```
defaults write com.Growl.GrowlHelperApp "Custom log history 1" "$growlog"
defaults write com.Growl.GrowlHelperApp GrowlLogType 1 
defaults write com.Growl.GrowlHelperApp GrowlLoggingEnabled -bool YES 
```

转到菜单行中的咆哮“爪子”并“重新启动” - 之后我在文件中看到一行。从命令行使用如下命令进行测试：

```
growlnotify -t programName -p normal -m 'message....' 
```

除了正常的通知之外，growlnotify 可以在脚本中用于提醒用户做某事，使用 'wait' 和 'sticky' 标志它会等到你点击它消失：

```
growlnotify -w -s -m 'tests have finished running; click this to run again' 
```

# iphone - 在应用程序中创建 UISlider 进度条和计时器（如 iPod 播放器）

> ID：13387469
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:16:44.950
> 
> 标签：iphone, ios, cocoa-touch, avaudioplayer

我在 Google 和 StackOverflow 上搜索了两天，还没有找到一个清晰、简洁的答案。

我的目标是创建一个滑块/进度条，允许用户滑动到歌曲的不同部分，两侧有两个标签，一个显示经过的时间，另一个显示歌曲的剩余时间。

我正在使用 DiracAudioPlayer，它还包含 AVAudioPlayer 功能。非常感谢任何对教程的帮助或指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:42:02.377

不确定这是否是进行擦洗或更新已用时间的问题，所以我将展示我认为您可以为两者做些什么。

为了更新进度条和时间标签，Apple 在他们的示例项目[avTouch中执行了以下操作](http://developer.apple.com/library/ios/#samplecode/avTouch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008636)

```
updateTimer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(updateCurrentTime) userInfo:player repeats:YES];
- (void)updateCurrentTime
{

    currentTime.text = [NSString stringWithFormat:@"%d:%02d", (int)self.player.currentTime / 60, (int)p.currentTime % 60, nil];
    progressBar.value = self.player.currentTime;
} 
```

然后通过设置 currentTime 来简单地进行查找

```
- (IBAction)progressSliderMoved:(UISlider *)sender
{
    player.currentTime = sender.value;
    [self updateCurrentTimeForPlayer:player];
} 
```

# c# - 如何使用 c# 和 XAML 从网站获取数据并在 Metro 应用程序中显示？

> ID：13387471
> 
> 赞同：0
> 
> 时间：2012-11-14T21:17:01.523
> 
> 标签：c#, xaml, microsoft-metro

我想将网站上的数据/文本显示到我的 Metro 应用程序中。假设网站的结构是这样的：website.html

```
<p id="name">
Peter
</p>
<p id="lastname">
Parker
</p> 
```

现在我有 2 个文本块作为“名称”和“姓氏”。如何与 www.sample.com/sample.html 建立联系并显示姓名和姓氏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:21:07.123

这不仅是一个相当复杂的过程，而且通常被认为是最好的方法，最坏的情况是不道德的。

如果您控制此网站，则认为这是一种不好的方法，因为您的网站应该能够通过使用 JSON 或 XML 的 Web 服务的方式提供这些数据。HTML 是提供数据的不良媒介。

如果您不控制此网站，您确定此信息的所有者会同意您抓取他们的网站。如果没有，那么尝试是非常不道德的。

# java - Java - 无法加载 JNI 共享库 (JDK)

> ID：13387474
> 
> 赞同：0
> 
> 时间：2012-11-14T21:17:10.940
> 
> 标签：java

我正在尝试启动一个用 Java 编写的应用程序（不是 Eclipse）。当我这样做时，我收到一条错误消息，显示“无法加载 JNI 共享库 (JDK)”以及指向文件位置的路径。

通过搜索 Google 和 StackOverflow，我只能找到人们说安装的 Java 版本需要与我的机器匹配。我的机器是 64 位的，我的 java 安装也是如此，所以我认为这不是我的问题。

我还验证了 C:\Program Files\Java\jre7\bin 在我的路径变量中。另外，为了记录，我不使用 Eclipse。我还尝试卸载并重新安装 Java 一个用 Java 编写的应用程序。最后，它抱怨的文件存在于机器上。

有谁知道还有什么可能是这个问题的原因？

更新：

感谢您的回复。我解决了它，但该解决方案似乎更像是一种黑客攻击，与我之前阅读的内容背道而驰。我在 64 位版本的 Java 7 旁边安装了 32 位版本的 Java 7。然后我将 32 位版本的路径添加到系统路径变量中。

在我这样做之后，应用程序就可以启动了。同时安装 64 位和 32 位版本的 Java 7 是否存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:46:03.363

这是您的应用程序中的错误。该应用程序使用 JNI。它抱怨它无法加载它。为什么它说（JDK）只有它的作者知道。你得问问作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:10:12.300

安装两个版本的 Java 没有问题。但是，您使用的应用程序可能附带了 32 位版本的 JNI 库。因此，它需要与 32 位 Java JRE 一起使用。

# php - 函数、SQL 连接和全局变量

> ID：13387485
> 
> 赞同：2
> 
> 时间：2012-11-14T21:17:42.667
> 
> 标签：php, sql, function, global

通过在两者之间使用 mysql_query 和 mysql_fetch_array 命令调用下面的函数来连接和关闭数据库有什么问题吗

```
<?php

function dbconnect()
{   
    $sql = "localhost"; 
    $username = "------";
    $password = "-----";
    $connection = mysql_connect($sql, $username, $password) or 
    die("unwable to cct");
    $databse = mysql_select_db("-------", $connection); 
    global $connection;
}

function close()
{
    global $connection;
    mysql_close($connection);
}

dbconnect();
$query = "Some SQL Statement";
$data = mysql_query($query, $connection); - L1
while (mysql_fetch_assoc($data))
{
  //echo something 
}
close();
?> 
```

目前，我收到一条错误消息，指出 L1 的 $connection 需要是资源，但它是 BOOL。如果我在那里给出一个 die 声明，同样会被触发。我不知道出了什么问题。请尽可能找出任何错误。我必须从编码中休假，一段时间后我回来了。

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:35:22.303

您必须在分配变量*之前*`global`使用关键字。否则，您在函数内部声明一个 local ，然后调用对尚未存在的 global 的引用。在其他功能中，使用了不存在的全局。*`$connection``$connection``$connection`*

 *```
function dbconnect()
{   
    // Global first to be sure the subsequent $connection is the global
    // rather than a new one local to this function
    global $connection;

    $sql = "localhost"; 
    $username = "------";
    $password = "-----";
    // Now this modifies the global $connection
    $connection = mysql_connect($sql, $username, $password) or die("unwable to cct");
    $databse = mysql_select_db("-------", $connection); 
} 
```

更具可读性的是使用`$GLOBALS`数组：

```
function dbconnect()
{   
    $sql = "localhost"; 
    $username = "------";
    $password = "-----";

    // Using the $GLOBALS superglobal array
    $GLOBALS['connection'] = mysql_connect($sql, $username, $password) or die("unwable to cct");
    $databse = mysql_select_db("-------", $GLOBALS['connection']); 
} 
```

`$connection`最重要的是从其他函数返回`dbconnect()`并使用该值：

```
function dbconnect()
{   
    $sql = "localhost"; 
    $username = "------";
    $password = "-----";
    $connection = mysql_connect($sql, $username, $password) or 
    die("unwable to cct");
    $databse = mysql_select_db("-------", $connection);

    // Return from the function
    return $connection; 
}

// call as 
$connection = dbconnect();
// and define your other functions to accept $connection as a parameter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:35:44.767

在调用 mysql_connect() 之前声明全局 $connection

```
function dbconnect()
{   
    global $connection;
    $sql = "localhost"; 
    $username = "------";
    $password = "-----";
    $connection = mysql_connect($sql, $username, $password) or 
    die("unwable to cct");
    $databse = mysql_select_db("-------", $connection); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:31:50.847

不太确定，但尝试使用关闭它

```
mysql_Close($Connection); 
```

其他一切看起来都不错

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:42:53.930

只需将**全局 $connection;** 改为在函数的开头行，它应该可以工作。在函数末尾使用 global 关键字意味着您要使用全局变量 $connection。但是您现在要做的是，分配全局变量 $connection “实际的连接资源 ID”。*

# c# - WiX 自定义操作未执行

> ID：13387486
> 
> 赞同：3
> 
> 时间：2012-11-14T21:17:45.447
> 
> 标签：c#, installation, wix, custom-action

我无法执行 Wix 自定义操作。即使自定义操作返回 ActionResult.Success，安装程序也会不断地自行回滚。

**自定义操作 (C#)**

```
[CustomAction]
public static ActionResult SetPermissionsToAppDataFolder(Session session)
{
    return ActionResult.Success;
} 
```

**Wix 中的自定义操作定义**

```
<!-- Custom Action -->
<Binary Id="CustomActionLibrary" SourceFile="$(var.CustomActionFolder)InstallerCustomActions.CA.dll" />
<CustomAction Id="CustomActionInstallDirectoryPermission"
              BinaryKey="CustomActionLibrary"
              DllEntry="SetPermissionsToAppDataFolder"
              Execute="deferred"
              Return="check" /> 
```

**安装序列调用自定义操作**

```
<!-- Install Sequences -->
<InstallExecuteSequence>
        <Custom Action="CustomActionInstallDirectoryPermission" Before="InstallFinalize">NOT Installed</Custom>
</InstallExecuteSequence> 
```

安装程序编译良好，因此找到自定义操作库文件没有问题。问题是安装程序在回滚之前进入了安装的最后阶段。当我们在安装序列中删除对自定义操作的调用时，安装程​​序完成。

据我了解，自定义操作 CA.dll 被嵌入到最终安装程序中。最初我认为 CA.dll 需要与安装程序一起分发，但后来发现安装程序将其编译成最终的 .msi。

我已经使用以下代码“连接”了自定义操作库：http: [//www.codeproject.com/Articles/132918/Creating-Custom-Action-for-WIX-Written-in-Managed](http://www.codeproject.com/Articles/132918/Creating-Custom-Action-for-WIX-Written-in-Managed)

无论我做什么，我都无法让安装程序完成，即使自定义操作返回“成功”。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-27T13:43:14.377

对于任何与 WiX 苦苦挣扎并在这里偶然发现的人。

一些建议：

1) 您是否尝试将*Debugger.Launch()*添加到您的 CustomAction 代码的第一行（即在*Return ActionResult.Success;*上方）？如果您没有收到要求启动调试器的对话框，那么您就知道您的 WiX 脚本没有正确引用您的 CA.dll，或者它的调用存在问题。

2) 如果您正在使用*Fragments*并且 CustomAction 元素位于其中，请尝试将它们取出并将它们放在*Product*元素下。

3）如果您要使用延迟执行，您是否在您的 CustomAction 中尝试过*Impersonate="no"属性*

# php - 确定两个时间范围是否在任何点重叠

> ID：13387490
> 
> 赞同：13
> 
> 时间：2012-11-14T21:17:55.980
> 
> 标签：php, algorithm

> **可能重复：**
> [确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)

我正在尝试确定 PHP 中的两个时间范围是否重叠。在我最初的尝试中，我一直在参考[确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)，但是，它并不匹配所有情况。如果一个时间范围嵌套在另一个时间范围的开始时间和结束时间之间，则不匹配。如果它与班次的开始或结束重叠，或者班次完全匹配，则它按预期工作。

看看我在说什么的这张图片：

![在此处输入图像描述](../Images/f3c060b1f3886bde097a8d7584e6df22.png)

基本上，如果橙色变化与任何地方的任何红色变化重叠，我会尝试隐藏它们。这是我试图用来实现这一点的代码的相关部分。

```
if(($red['start'] <= $orange['end']) && ($red['end'] >= $orange['start'])) {
    //Conflict handling
} 
```

变量的值是 UNIX 时间戳。从逻辑上处理这些数字，我理解为什么上面的陈述失败了。显然，我可以做更多的逻辑来确定一个班次是否属于另一个班次（这是我可能需要做的），但我希望有一个更普遍的捕获。

**编辑：**添加每个块的开始和结束时间的值。我同意我所拥有的*应该*工作。事实上，它不是我的问题所在。我可能忽略了一些愚蠢的事情。

```
orange-start = 1352899800
orange-end = 1352907000

red-start = 1352923200
red-end = 1352926200 
```

因此我的逻辑会说：

```
if((1352923200 <= 1352907000) && (1352926200 >= 1352899800)) 
```

因此，在此之后，第一次比较失败。

**编辑 2：**看起来我的逻辑是合理的（我认为是这种情况），我的问题与 UNIX 时间戳有关，与显示的实际时间不匹配。我感谢那些与我一起工作的人，并帮助我发现问题所在。我希望我能接受安德烈和杰森的回答。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T21:42:57.527

如果您有两个范围`[b1, e1]`and `[b2, e2]`（已经确定`b1 < e1`and `b2 < e2`），则通过以下逻辑表达式检测重叠

```
not (e2 < b1 or e1 < b2) 
```

可以重写为

```
e2 >= b1 and e1 >= b2 
```

在你的语法中

```
if(($orange['end'] >= $red['start']) && ($red['end'] >= $orange['start'])) {
   //Conflict handling
} 
```

**即你得到了正确的。**为什么您声称*“从逻辑上处理数字，我明白为什么上面的陈述失败了。”* 我不清楚。究竟是什么失败了？（而且我不知道为什么每个人都提出了可笑的“过度设计”检查，并进行了两次以上的比较。）

当然，您必须决定是否将接触范围视为重叠，并相应地调整比较的严格程度。

**PS**您在编辑中提供的样本范围不重叠，并且您的比较正确地将其识别为无冲突情况。即一切正常。你在哪里看到问题？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T22:00:43.837

[逻辑](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)是正确的。您为`$red`(8-8:50pm) 和`$orange`(1:30-3:30pm)提供的时间戳**不重叠**。

给定正确的值（反映您的屏幕截图），确实发现了重叠：

```
function show_date($value, $key) {
    echo $key, ': ', date('r', $value), PHP_EOL;
}

$red = array('start' => strtotime('today, 2pm'), 'end' => strtotime('today, 2:45pm'));
$orange = array('start' => strtotime('today, 1:30pm'), 'end' => strtotime('today, 4pm'));

array_walk($red, 'show_date');
array_walk($orange, 'show_date');

if (($red['start'] <= $orange['end']) && ($red['end'] >= $orange['start'])) {
    echo 'Conflict handling';
} 
```

我的猜测是你有一个时区转换问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:26:16.230

您需要检查您是否有一个“红色”任务，该任务在“橙色”任务的开始和结束之间开始或结束。像这样，您应该检测与“RED”任务重叠的每个“ORANGE”任务。

```
if((($red['start'] <= $orange['end']) && ($red['start'] >= $orange['start'])) ||
   (($red['end'] <= $orange['end']) && ($red['end'] >= $orange['start'])) ) {
    //Conflict handling
} 
```

编辑：正如 AndreyT 所说，这有点矫枉过正，你可以用更少的检查做得更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:32:56.320

```
if ((($red['start'] <= $orange['end']) && ($red['start'] >= $orange['start']))
    || (($red['end'] <= $orange['end']) && ($red['end'] >= $orange['start']))
    || (($red['start'] >= $orange['start']) && ($red['end'] >= $orange['end']))
   ) {
 // conflict happens if Red starts sometime between Orange start and end
 //               or if Red ends sometime between Orange start and end
 //               or if Red starts before Orange starts and ends after Orange ends

} 
```

# ravendb - 使用 session.load 进行 RavenDb 分页

> ID：13387493
> 
> 赞同：0
> 
> 时间：2012-11-14T21:18:13.400
> 
> 标签：ravendb

我正在运行一个批处理作业，它选择一批 100 个文档，然后抓取所有链接到它的文档——每个文档可能最多 25 个。

我使用第一批中的 ID 进行“加入”。所以我可能会用 25 * 100 个 ID 调用 session.load。我试图实现分页，但使用返回数组的加载方法看起来不太可能。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:57:03.497

最佳做法是使用 .Include 方法，而不是按照您的描述进行操作。[您可以在文档](http://ravendb.net/docs/client-api/querying/handling-document-relationships)中阅读更多内容。

如果您想发布一些您现在正在做的事情的代码，我可以提供更详细的回复。

# facebook-opengraph - 打开图形类型标签 Facebook 应用程序

> ID：13387504
> 
> 赞同：0
> 
> 时间：2012-11-14T21:19:06.263
> 
> 标签：facebook-opengraph

我们有一个网站 www.mywebsite.com 销售实现 Open Graph 标签的小部件，如下所示：

```
<meta property="og:title" content="This is the title of the widget model" />
<meta property="og:type" content="product" />
<meta property="og:url" content="http://mywebsite/widget/67734" />
<meta property="og:image" content="http://mywebsite/images/123456.JPG" />
<meta property="og:site_name" content="My Website" /> 
```

我们有一个开发人员被要求创建一个 Facebook 应用程序，该应用程序也销售小部件。他要求我将我们网站页面上的 og:type 值从“产品”更改为“小部件”，以便 Facebook 应用程序向用户显示包含“小部件”而不是“产品”的描述。我的理解是开放图协议有一组定义的可以使用的类型：

[http://ogp.me/#types](http://ogp.me/#types)

我担心使用协议中未定义的类型会降低我在 Facebook、Google 或任何其他 Open Graph 订阅者中的排名。它是否正确？Facebook 应用程序不应该有自定义类型值而不是我们的网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:33:59.397

Facebooks Open Graph Tutorial ( [https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/) ) 的第 3 步提供了创建自定义类型的说明，包括您自己的命名空间。但是，本文档用于创建 facebook 应用程序，并不是为了描述如何在您的网站页面上实现 OG 标签。进一步阅读后，我发现 facebook 指定 OG 类型只能是 OG 协议中指定的类型。[请参阅http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)的第 2 步，其中讨论了实现点赞按钮：

```
"You must select a type from the list of Open Graph types." 
```

最后，答案是只为您的网站页面使用 OG 定义的类型。

# c++ - 学习c++11智能指针，不会让我像指针一样使用隐式转换可以吗？

> ID：13387512
> 
> 赞同：0
> 
> 时间：2012-11-14T21:19:44.070
> 
> 标签：c++, c++11, shared-ptr, smart-pointers

我有一个 ISceneNode 接口和一个 SceneNode 基类。从 SceneNode 类派生出 MeshNode、AnimNode、LightNode、CameraNode 等...

现在我有一个演员类，它通过一个方法接收一个 shared_ptr 并将其存储在一个字段中。

我想做的是将任何 std::shared_ptr 或其他派生类发送到接受 shared_ptr 的函数中。

使用裸指针，这将是一种隐式转换。

我想出的解决方案是为每个派生编写一个重载，然后使用 dynamic_pointer_cast 在方法中对其进行强制转换。太恶心了，应该有更好的方法。

有没有办法获得隐式转换，或者我不知道有更好的方法来处理这个？处理这个问题的正确方法是什么？

```
void SomeFunc()
{
    std::shared_ptr<MeshNode> pMeshNode( new MeshNode() );
    gActor.SetNode( pMeshNode );  // won't compile.

    // or do i have to do it like this
    gActor.SetNode( std::dynamic_pointer_cast<ISceneNode> (pMeshNode) );
}

void Actor::SetNode( std::shared_ptr<ISceneNode> pNode )
{
    mpNode = pNode;
}

// or do I have to do it like this?  Making an over load for each derived.
void Actor::SetNode( std::shared_ptr<MeshNode> pMeshNode )
{
    mpNode = std::dynamic_pointer_cast<ISceneNode> (pMeshNode);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:34:14.577

您声称它不会编译，但以下测试为我编译并运行（VS2012、Clang、G++）。你应该发布你得到的错误，因为它很可能是别的东西。

```
#include <memory>

struct IBase {};

struct Derived : IBase {};

void Foo(std::shared_ptr<IBase> p) {}

int main()
{
    std::shared_ptr<Derived> d;
    Foo(d);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:48:59.333

我敢打赌你使用的是VS2010？我发现那里的智能指针支持存在一些问题？在具有更好 C++11 支持的编译器（例如 VS2012、gcc、clang）上，它应该可以正常编译。但是，我建议您进行一些扩展：

```
class Actor {
  std::shared_ptr<ISceneNode> mpNode;
public:
  void SetNode(std::shared_ptr<ISceneNode> pNode)
  { mpNode = std::move(pNode); }
};

void SomeFunc()
{
  gActor.SetNode(std::make_shared<MeshNode>());
} 
```

分配总是更好，`std::shared_ptr`可以`std::make_shared<T>()`节省一次动态分配，甚至可以节省一半的共享状态内存开销。您还应该`std::shared_ptr`作为对函数的引用传递，或者至少像我一样将其移动到新值。您还可以考虑使用`std::unique_ptr`which 使其更加有效（没有共享状态内存开销和线程安全引用计数）并使设计更好（明确所有权）。您可以以非常相似的方式使用：

```
class Actor {
  std::unique_ptr<ISceneNode> mpNode;
public:
  void SetNode(std::unique_ptr<ISceneNode> pNode)
  { mpNode = std::move(pNode); }
};

void SomeFunc()
{
  gActor.SetNode(std::unique_ptr<MeshNode>(new MeshNode));
} 
```

# apache - django rest_framework 中缺少授权标头，是 apache 的错吗？

> ID：13387516
> 
> 赞同：64
> 
> 时间：2012-11-14T21:19:56.327
> 
> 标签：apache, apache2, authorization, mod-proxy, django-rest-framework

当我使用请求会话来存储我的令牌时，我已经设法扩展`TokenAuthentication`并且我有一个工作模型，但是当我尝试[按照此处所述](http://django-rest-framework.org/api-guide/authentication.html#custom-authentication)`Authorization`作为标头参数传递时，我注意到我的响应在没有 META 变量 HTTP_AUTHORIZATION 的情况下返回。我还注意到，如果我将“Authorization2”作为标头参数传递，它在请求中可见：

```
{
    '_content_type': '', 
    'accepted_media_type': 'application/json', 
    '_request': <WSGIRequest
        path:/api/test_auth/,
        GET:<QueryDict: {}>,
        POST:<QueryDict: {}>,
        COOKIES:{
            'MOD_AUTH_CAS_S': 'ba90237b5b6a15017f8ca1d5ef0b95c1',
            'csrftoken': 'VswgfoOGHQmbWpCXksGUycj94XlwBwMh',
            'sessionid': 'de1f3a8eee48730dd34f6b4d41caa210'
        },
        META:{
           'DOCUMENT_ROOT': '/etc/apache2/htdocs',
           'GATEWAY_INTERFACE': 'CGI/1.1',
           'HTTPS': '1',
           'HTTP_ACCEPT': '*/*',
           'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
           'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',
           'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',
           'HTTP_AUTHORIZATION2': 'Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4c',
           ... 
```

我的第一个猜测是 apache 正在删除授权标头，并且我已经阅读了一些 S/O 问题，指出如果它与基本授权和身份验证不匹配，apache 将丢弃该值，但我不知道如何允许授权标头“通过”到 Django 和 WSGIRequest。有谁知道如何解决这个问题？

我也使用 mod_auth_cas 和 mod_proxy，如果这改变了任何东西..

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-09-02T02:36:40.903

如果您使用的是 Apache 和 mod_wsgi，那么我在官方 Django REST 框架网站上找到了简单的解决方案

> **Apache mod_wsgi 具体配置**
> 
> 请注意，如果使用 mod_wsgi 部署到 Apache，则默认情况下不会将授权标头传递给 WSGI 应用程序，因为假定身份验证将由 Apache 处理，而不是在应用程序级别处理。
> 
> 如果您要部署到 Apache，并使用任何基于非会话的身份验证，则需要显式配置 mod_wsgi 以将所需的标头传递给应用程序。这可以通过在适当的上下文中指定 WSGIPassAuthorization 指令并将其设置为“开”来完成。

```
# this can go in either server config, virtual host, directory or .htaccess 
WSGIPassAuthorization On 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-14T21:27:24.660

很抱歉在问了几分钟后回答了我自己的问题。但事实证明它毕竟是apache2！在爬网并查看了一些搜索结果后，我在评论中发现了这一点：

```
RewriteEngine on
RewriteCond %{HTTP:Authorization} ^(.*)
RewriteRule .* - [e=HTTP_AUTHORIZATION:%1] 
```

将以上几行添加到我的 conf 文件中似乎解决了我所有的问题！希望这对用户有所帮助！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-05-18T18:23:41.283

这取决于您进行了哪种 Django/Apache 部署。您需要告诉正确的 Apache 模块以允许通过“身份验证”HTTP 标头：

*   阿帕奇/mod_wsgi：

    `WSGIPassAuthorization On`

*   阿帕奇/mod_fcgid：

    `FcgidPassHeader Authorization`

换句话说：许多 Apache 模块过滤“身份验证”HTTP 标头，因此 Django 不会接收它。您必须确保您的 Django 应用程序在请求中接收到它。

请参阅： [django_rest 文档](http://www.django-rest-framework.org/api-guide/authentication/#apache-mod_wsgi-specific-configuration)和[Apache fcgid 文档](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidpassheader)。

注意：修改 Apache 配置后，您需要重新启动 apache 守护程序或告诉重新加载您的 .cgi 文件（即：）`touch my_site_fcgifile.fcgi`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-01T13:12:06.997

问题是 HTTP 标头中的下划线`HTTP_AUTHORIZATION`。大多数网络服务器只是忽略带有下划线的标题。

Django 开发服务器也表现出相同的情况，省略了带有下划线的标题。

这就是工作的原因`Authorization2`。

**一个快速的解决方法是用破折号替换`_`标题中的下划线，`-`**

前任。更改`HTTP_AUTHORIZATION`为**`HTTP-AUTHORIZATION`**

# java - 上传文件 - DocumentList.java 示例给出“需要授权”错误

> ID：13387518
> 
> 赞同：1
> 
> 时间：2012-11-14T21:20:02.773
> 
> 标签：java, file-upload, google-api

我正在尝试将文件从我的桌面上传到谷歌驱动器。我在 Google 提供的示例中给出了`CLIENT_ID`and 。当我作为 java 应用程序运行时，出现以下错误：`CLIENT_SECRET``DocumentList.java`

`return service.insert(buildUrl(URL_DEFAULT + URL_DOCLIST_FEED), newDocument);`

代码：

```
oauthParameters.setOAuthConsumerKey(CLIENT_ID);
oauthParameters.setOAuthConsumerSecret(CLIENT_SECRET);    
oauthParameters.setScope("https://docs.google.com/feeds/");
DocsService service = new DocsService("wise"); 
```

错误：

```
com.google.gdata.util.AuthenticationException: Authorization required
    at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:608)
    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
    at com.google.gdata.client.media.MediaService.insert(MediaService.java:400)
    at com.DocumentList.uploadFile(DocumentList.java:538)
    at com.DocumentList.login(DocumentList.java:230)
    at com.DocumentList.main(DocumentList.java:546) 
```

# c# - 其他类中的方法可以处理调用对象吗？（垃圾收集器）C#

> ID：13387524
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:20:21.513
> 
> 标签：c#, inheritance, reference, garbage-collection

这个问题很奇怪，也许我只是想完全错误。

我将解释这些课程：

有一个游戏类，它在一个字段中包含一个抽象基类（模式），因此作为该基类子类的所有类都可以在该字段中（所有模式）。现在如下： 有时游戏类会改变模式，因此该字段必须更改为其他类。这行得通，旧类被淘汰，因为没有剩下的引用（垃圾收集器）

但是：在极少数情况下，模式类本身会调用游戏类中的方法来更改其模式 - 但调试器向我显示，该对象仍然必须存在，因为在完成该方法后，它会跳回旧模式对象并完成代码（这在某些时候是可以的，否则它无处可去）。

那么，如何消除旧模式对象以避免内存泄漏？脚本完成后垃圾收集器是否会自动执行此操作（在这种情况下只需调用 return ？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:28:05.250

我认为您误解了垃圾收集。垃圾收集发生在未来的某个时间，而不是立即发生。所以你的模式类仍然存在，可能比你想象的要长，即使在你的游戏类中的引用不再引用它之后。

在未来的某个时候，垃圾收集器将启动，并看到“旧”模式类不再有任何引用并收集它。那可能是 300 毫秒后，5 分钟后，或者当过程结束时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:28:20.273

不会有内存泄漏。在您的代码完成后，将不再有对该 Mode 实例的引用，因此它最终会被 GC。

所以是的。GC 只会不时检查引用。它不关心这些引用是如何设置的。

# android - 推文的 XML 布局

> ID：13387525
> 
> 赞同：2
> 
> 时间：2012-11-14T21:20:31.937
> 
> 标签：android, android-layout

我将为单个推文自定义 XML 布局。我想尽可能以推文的标准布局为基础。有谁知道我在哪里可以找到这个布局。我不想在这里重新发明轮子，只需使用标准方式表示推文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:23:48.373

You might want to take a look at [listview](http://developer.android.com/reference/android/widget/ListView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:56:23.163

twitter_list_row.xml

```
<TextView
    android:id="@+id/username"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:textColor="#00FF00"
    android:textSize="12sp" />

<TextView
    android:id="@+id/line"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="2dp"
    android:layout_toRightOf="@id/username"
    android:text="@string/line"
    android:textColor="#777777" />

<TextView
    android:id="@+id/ago"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="2dp"
    android:layout_toRightOf="@id/line"
    android:textColor="#777777"
    android:textSize="12sp" />

<TextView
    android:id="@+id/at_line"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="2dp"
    android:layout_toRightOf="@id/ago"
    android:text="@string/line"
    android:textColor="#777777" />

<TextView
    android:id="@+id/at_username"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="2dp"
    android:layout_toRightOf="@+id/at_line"
    android:textColor="#777777"
    android:textSize="12sp" />

<TextView
    android:id="@+id/message"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/username"
    android:autoLink="web"
    android:textColor="@color/header_text"
    android:textColorLink="#00FF00" /> 
```

# visual-studio-2012 - 将现有 xaml 文件添加到 Visual Studio 2012

> ID：13387527
> 
> 赞同：20
> 
> 时间：2012-11-14T21:20:48.497
> 
> 标签：visual-studio-2012, code-behind

我想将包含 xaml 和 cs 文件以及其他目录的文件夹添加到 VS 上的不同项目中。出于某种原因，当我将文件夹从 Windows 资源管理器拖到我想要放置该目录的项目时，Visual Studio 不会让我这样做。因此，我手动添加每个文件，每次遇到目录时都必须创建它。也许是因为我使用的是团队基础服务器。

无论如何，我要手动添加文件，所以我单击要在 Visual Studio 上添加文件的文件夹，然后单击添加现有文件。然后我选择 xaml 和代码隐藏文件：

![在此处输入图像描述](../Images/d37e2203eea8563744f101966ffdc0e0.png)

当我单击添加时，文件被添加但 Visual Studio 无法识别 Bytes.xaml.cs 是背后的代码！

![在此处输入图像描述](../Images/9dc9d99bd8ac12a7329d1e5054e0a160.png)

我是否必须手动添加一个窗口，然后复制并粘贴文件的内容？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T08:59:41.917

编辑您的 .csproj 文件，在 .xaml.cs 文件的“编译”元素下方添加一个“DependentUpon”元素，这样它就会出现在 .xaml 文件的“内部”，而不仅仅是在其下方：

```
<Compile Include="BytesDisplay\SubControls\Bytes.xaml.cs">
  <DependentUpon>Bytes.xaml</DependentUpon>
</Compile> 
```

要轻松编辑 .csproj 文件：

```
Right-click the project and select "Unload Project"
Right-click the project node again and select "Edit [projectname].csproj"
Edit the XML, then close the file
Right-click the project node again and select "Reload Project" 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-12-09T19:25:10.560

如果您将 .xaml 文件从 Windows 资源管理器拖放到解决方案资源管理器窗口中，它将自动添加带有代码隐藏 .cs 文件的 .xaml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T23:43:08.623

谢谢你的报道。如果您编辑 xaml 和 .cs 文件类声明以匹配而没有类冲突 - 那么当您添加 .xaml 文件时，如果 .xaml.cs 位于同一文件夹中，它将自动拾取它。（与 2013 年相比）

# php - 无法使用 PDO 将 int 插入 mySql 数据

> ID：13387528
> 
> 赞同：1
> 
> 时间：2012-11-14T21:20:55.577
> 
> 标签：php, pdo

我正在尝试使用 PDO 将 int 插入数据库，但由于某种原因，它一直因错误而失败：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 2031 ' in C:\vhosts\jpl\admin\add_project.php:119 Stack trace: #0 C:\vhosts\jpl\admin\add_project.php(119): PDOStatement->execute() #1 C:\vhosts\jpl\admin.php(25): include('C:\vhosts\jpl\a...') #2 {main} thrown in C:\vhosts\jpl\admin\add_project.php on line 119 
```

这是代码：

```
 $projectAdd = $database->prepare("INSERT INTO projects (title, short_description, long_description, image_location, display)VALUES ('test', 'test', 'test', ?, :integer)");
        $projectAdd->bindParam(1, $test);
        $projectAdd->bindParam(':integer', $value, PDO::PARAM_INT);

        $test = "testbind";
        $value = 1;
        $projectAdd->execute(); 
```

即使我使用直接 int 它仍然失败。IE 0 而不是绑定。

*编辑在问题上犯了一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:24:00.603

Try:

```
$projectAdd = $database->prepare("INSERT INTO projects (title, short_description, long_description, image_location, display)VALUES ('test', 'test', 'test', ?, ?)");
//The variables need to be defined before binding.
$test = "testbind"; 
$testint = 1;
$projectAdd->bindParam(1, $test);
$projectAdd->bindParam(2, $testint); //change '1' to '2' 
```

# .net - 后期装订错误

> ID：13387529
> 
> 赞同：1
> 
> 时间：2012-11-14T21:20:56.697
> 
> 标签：.net, vb.net, visual-studio-2010, excel

所以我最近在我当前的项目中打开了 Option Strict On，在修复了选项引发的所有小错误之后，我碰到了这个。

```
Public Sub ExportarExcel(ByVal grilla As DataGridView)

    Dim excelApp As Excel.Application
    Dim workbook As Excel.Workbook
    Dim sheet As Excel.Worksheet
    Dim i As Integer = 1
    Dim j As Integer = 1
    excelApp = CType(CreateObject("Excel.Application"), Excel.Application)
    workbook = excelApp.Workbooks.Add
    sheet = CType(workbook.Worksheets.Add, Excel.Worksheet)

    For Each col As DataGridViewColumn In grilla.Columns
        sheet.Cells(1, i).Borders.LineStyle = Excel.XlLineStyle.xlContinuous 'Problematic line
        sheet.Cells(1, i) = col.HeaderText
        i = i + 1
    Next
    i = 2

    For Each row As DataGridViewRow In grilla.Rows
        j = 1
        For Each cell As DataGridViewCell In row.Cells
            sheet.Cells(i, j).Borders.LineStyle = Excel.XlLineStyle.xlContinuous 'Problematic line
            sheet.Cells(i, j) = cell.Value
            j = j + 1
        Next
        i = i + 1
    Next

    sheet.Columns.AutoFit()
    excelApp.Visible = True
End Sub 
```

这两行（从开头到“边界”）引发了后期绑定错误，我不确定哪些是这些行的正确转换或修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:41:19.900

根据我找到的文档（这里：http: [//msdn.microsoft.com/en-us/library/office/ff822605.aspx](http://msdn.microsoft.com/en-us/library/office/ff822605.aspx)，这里：http: [//msdn.microsoft.com/en-us/library/ office/aa612949(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa612949%28v=office.10%29.aspx) )，该`Borders`属性返回一个集合，由常量索引，表示您想要的边框（上、下、左、右等）

你的线应该是这样的，

```
sheet.Cells(1, i).Borders(xlEdgeBottom).LineStyle = Excel.XlLineStyle.xlContinuous 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:29:25.063

您可以使用`sheet.Cells(i, j).Text = cell.Value`或`sheet.Cells(i, j).Value = cell.Value`（这可能是 Value2）

# sencha-touch - Sencha Touch 中的 xclass 和 xtype 有什么区别？

> ID：13387535
> 
> 赞同：3
> 
> 时间：2012-11-14T21:21:16.513
> 
> 标签：sencha-touch

我正在尝试学习 Sencha Touch，并且正在为 xclass 和 xtype 术语苦苦挣扎。xtype 是包含命名空间的更长版本的别名吗？我需要使用别名来定义 xtype 吗？xclass 指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:29:24.363

从技术上讲，它们之间没有区别。 `xclass`可以用于不是组件的东西。

来源：[http ://www.sencha.com/forum/showthread.php?194447](http://www.sencha.com/forum/showthread.php?194447)

# java - 为什么再次使用 int ？

> ID：13387539
> 
> 赞同：-2
> 
> 时间：2012-11-14T21:21:22.440
> 
> 标签：java, types, jvm, int, long-integer

我们几乎都在使用 64 位机器和 JVM，RAM 很便宜，而且性能很少以低级 JVM 问题为中心。

那么为什么不是每个人都停止使用 int 并在 Java 和持久（数据库）存储中完全迁移到 64 位 long 。

我知道我永远不会有 2^64 个用户，也不会有 2^64 种语言，如果我在零售帝国中开设 2^64 家商店，我目前还没有建立我估计我可以给自己买一个大陆然后退休。

除了“您不需要 64 位数字来存储所有可能的宠物商店 ID”之外，还有其他缺点吗……？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:26:34.727

不管当今机器的平均 RAM 容量如何增加，当您确定您所代表的数据永远不会超过 int 的大小时，为什么还要浪费呢？

这是一个例子：我有一个包含 10 个用**int**原语表示的实例变量的类。在我的服务器上运行的这个类的实例数量可能是无限的。如果我使用**longs**代替（并且不需要它们），如果这些对象实例存储在关系数据库中，我将浪费 RAM 和硬盘空间。

因此，要回答您的问题，在您可以使用的内存中保持保守会更具可扩展性。

# .net - .NET 的 ODAC 很慢

> ID：13387540
> 
> 赞同：2
> 
> 时间：2012-11-14T21:21:25.657
> 
> 标签：.net, oracle, odp.net

我在同一个远程服务器上并排安装了一个 Microsoft SQL Server 2008 实例和 Oracle 10g 数据库，每个服务器都加载了完全相同的数据。

我编写了一个程序来计时一个简单的查询，该查询返回大约 10,000 条记录（SELECT * FROM TABLE WHERE X=X）。我通过这个测试看到的是，Oracle 的返回速度比 MSSQL 慢 4-12 倍。我已经在 LAN 连接上进行了测试，通过 VPN 远程使用 ODP.NET4、ODP.NET2，确保在 32 位操作系统上安装了正确的 32 位版本，对于 64 位也是如此。

我的结果总是一样的，因为 Oracle 总是比 SQL Server 实例慢很多倍。

我还在 SQL Developer 中尝试过相同的查询，并且该工具检索相同的记录集的速度要快得多。当我强制该工具检索所有记录时，它比 SQL Server 慢 20%，这至少在我的场景中是可以接受的。

任何帮助表示赞赏。我知道有几个类似的问题，但这些问题的答案并没有帮助解决问题。

谢谢

*   从数据库服务器：3s (Oracle) vs 0.6s (SQL Server)
*   从局域网的某个地方：22s (Oracle) vs 4s (SQL Server)
*   从远程机器通过 vpn：54s (Oracle) vs 21s (SQL Developer) vs 13s (SQL Server)

**附加问题：这是您在符合 ODP.NET + SQL Server 的应用程序中遇到的性能损失，还是我认为有问题是正确的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:47:07.590

您是否在应用程序中[设置了获取大小？](http://www.oracle.com/technetwork/issue-archive/2006/06-jul/o46odp-097508.html)如果是这样，您是否尝试过设置不同的提取大小并测量它如何影响经过的时间？我相信 SQL Developer 默认的 fetch 大小为 500（尽管我没有任何拉伸保证），因此您可以将其用作起点。

# sql - How to do math with GUIDs in SQL Server

> ID：13387541
> 
> 赞同：0
> 
> 时间：2012-11-14T21:21:34.067
> 
> 标签：sql, sql-server-2008

I need to do some math with SQL Server GUIDs in a trigger and I'm having difficulty figuring out how to convert a `uniqueidentifier` to a `numeric(38,0)`.

One potential problem: my understand is that both of these datatypes are 16-byte "integers". If I'm wrong here, please correct me.

Otherwise, how would I go about this conversion? I've tried CAST and CONVERT and keep getting **Explicit conversion from data type uniqueidentifier to numeric is not allowed.** as an error message whenever I try. I'd really like to not have to parse each character and do hex math in a UDF to do this.

Is this possible?

Here's my script to repro this real quick:

```
DECLARE @guid uniqueidentifier
SET @guid = NEWID()
DECLARE @a numeric(38,0)
SET @a = 2
PRINT CAST(@guid AS numeric(38,0)) -- fails
PRINT @guid / @a -- also fails 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:34:07.053

不幸的是，我还没有偶然发现从 a 中的十六进制值转换为一次循环一个数字`VARCHAR`的`NUMERIC`短。

```
declare @GUID as UniqueIdentifier = NewId()
declare @Binary as VarBinary(64) = @GUID
declare @String as VarChar(64) = Convert( VarChar(64), @Binary, 2 )

select @GUID as 'GUID', @Binary as 'Binary', @String as 'String' 
```

# css - background-size in IE not working

> ID：13387542
> 
> 赞同：1
> 
> 时间：2012-11-14T21:21:37.060
> 
> 标签：css, internet-explorer

hi i have looked to some questions here which have same subject as [here](https://stackoverflow.com/questions/12107846/ie-8-background-size-fix-with-ms-filter) but didnt understand how he fixed it with html as he said. and [here](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie) but didnt understand how to implement it to work , anyway i have tried mine to test it but it doesnt seem to work.

```
 <style>
 .foo {
   font-size : 14px ;
   background-size: 832px 578px;
   background-image: url("al0-2.png");
   background-repeat: no-repeat;
   width: 831px;
   height: 590px;
   filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="al0-2.png",   
           sizingMethod="scale");
  -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='al0-2.png', 
           sizingMethod='scale')";
     }
   </style> 
```

any help to fix this . im wanting to let background-size works good in all IE also as FF do

EDIT>

my html code

```
 <div class="foo" ></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:34:57.617

我做了[这个小提琴](http://jsfiddle.net/RWUtm/2/)供你试验。

它在 ie7/ff 中运行良好。

不过请注意，在 IE7 中，会有 2 个背景：1 个来自背景，1 个来自过滤器。您应该以某种方式删除背景（例如：条件注释）。

在您的代码中，如果没有显示图像，则可能是您的图像链接已损坏。

小提琴CSS：

```
#foo {
    border:2px solid red;

    font-size : 14px ;
    background-size: 832px 578px;
    background-image: url('/img/logo.png');
    background-repeat: no-repeat;
    width: 831px;
    height: 590px;    

    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
    src='/img/logo.png',
    sizingMethod='scale');

    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
    src='/img/logo.png',
    sizingMethod='scale')";
} 
```

# c# - How to populate textfields from a dropdown in MVC 4 with razor and c#?

> ID：13387545
> 
> 赞同：1
> 
> 时间：2012-11-14T21:22:02.673
> 
> 标签：c#, razor, drop-down-menu, asp.net-mvc-4, auto-populate

I am working on a "Challenge Engine" web application that allows users to create challenges and compete with each other. I am using MVC 4 C#, razor syntax.

I am trying to make a page where the user can either create a challenge, or edit the details of a challenge he has already created. The way I want this to work is to have a drop-down menu of the challenges a user owns, a submit button, and two text fields below. When a challenge is selected from the drop-down, the two text fields should populate with the challenge name and the challenge description. I am not sure how to accomplish this, although I think it may involve somehow calling additional code that needs to be put into the controller (although maybe not). It may also require JavaScript, jQuery, and/or AJAX, but my understanding of these technologies is still somewhat shaky. Can anyone help, or point me in the right direction? I have Googled this extensively the past couple of days and searched stack overflow, but couldn't find anyone doing quite what I'm trying to do. Below is the relevant code I have so far.

The Challenge Model:

```
public class ChallengeModel
{
    public int ChallengeId { get; set; }
    public String Name { get; set; }
    public String Description { get; set; }
} 
```

The Challenge Controller:

```
public class ChallengeController
public ActionResult Index()
    //Note: UserService and Challenge Service are part of the service layer;
    //They simply encapsulate the methods in the various DAOs.
    {
        ViewBag.CurrentUserName = WebSecurity.CurrentUserName;
        ViewBag.CurrentUser = UserService.GetUserByName(ViewBag.CurrentUserName);
        ViewBag.OwnedChallenges =
            ChallengeService.GetActiveChallengesByParticipant(CurrentUser);

        return View();
    } 
```

The Challenge View (index.cshtml):

```
<div class="challengeOwner">
<em>Challenges you own:</em>
<select id="selectOwnedChallenges">

    <option>Create new challenge...</option>
@foreach (ChallengeModel Challenge in ViewBag.OwnedChallenges)
{
    <option id="@Challenge.ChallengeId"
    value="@Challenge.ChallengeId"
    onclick="  [[[INSERT CODE HERE THAT WILL POPULATE TEXT FIELDS
    WITH CHALLENGE NAME AND DESCRIPTION]]]  ">@Challenge.Name</option>
}

</select>
<input id="ChallengeName" type="text" name="Name"
    value="@selectedChallenge.Name"/><br />
<input id="ChallengeDescription" type="text" name="Description"
    value="@selectedChallenge.Description"/>
<input id="updateChallenge" type="button" value="Submit" />
</div> 
```

As you can see, I thought I would use a variable @selectedChallenge to represent the challenge selected in the drop-down. I don't know how to set it, and I'm thinking this is probably not how it should be done, but I left it there for now so you can see my intention. Any help would be greatly appreciated. Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:53:20.787

您可以使用数据属性来保存每个选项的名称和描述。

```
<option value="@Challenge.ChallengeId"
        data-name="@Challenge.Name"
        data-description="@Challenge.Description">
        @Challenge.Name</option> 
```

然后在选择更改时使用 jQuery 更新输入字段：

```
// this runs when the DOM is finished loading http://api.jquery.com/ready/
$(document).ready(function() {

  // wire up the change handler http://api.jquery.com/change/
  $("#selectOwnedChallenges").change(function() {

    // get the selected option's data values http://api.jquery.com/data/
    var data = $("#selectOwnedChallenges option:selected").data();

    // set the inputs
    $("#ChallengeName").val(data.name);
    $("#ChallengeDescription").val(data.description);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:53:53.673

您需要为此使用 javascript。它相当容易。这是我编写的一个快速函数，可以满足您的需要。

```
<script type="text/javascript">

    function displaySelectedChallenge(name, description)
    {
        $("#ChallengeName").val(name);
        $("ChallengeDescription").val(description);
    }
</script> 
```

然后在做出选择后调用这个函数：

```
displaySelectedChallenge(@Challenge.Name, @Challenge.Description) 
```

# mdx - 嵌套顶部的 MDX 查询

> ID：13387547
> 
> 赞同：0
> 
> 时间：2012-11-14T21:22:06.227
> 
> 标签：mdx

帮助 mdx 查询 plz (Essbase 11.1.1) 我有 3 个维度

```
[YEAR]
[SF]
[OPR_KIND] 
```

1 级层次结构

```
Measure: [Accounts].[FCT_OPR_SUM] 
```

我必须找到：前 2 年，每年 3 个顶级 SF，每个 SF 1 个顶级 OPR_KIND

对于 1 个嵌套顶部，我这样做：

```
WITH
SET top2Year as 'TopCount( [YEAR].Generations(2).MEMBERS,2)'
SELECT {[Accounts].[FCT_OPR_SUM]} ON COLUMNS, 
NON EMPTY 
{
generate(top2Year,
crossjoin( top2Year,topcount( [SF].Generations(2).MEMBERS,3)
)
)
} 
ON ROWS
FROM cube1f.cube1f 
```

如何处理 2 个或更多嵌套顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:13:01.323

你可以用接近这个的东西来做到这一点：

```
Generate(TopCount([YEAR].Generations(2).MEMBERS, 2, [Accounts].[FCT_OPR_SUM]), 
   {[YEAR].CurrentMember} * Generate(TopCount([SF].Generations(2).MEMBERS, 3, [Accounts].[FCT_OPR_SUM]), 
           {[SF].CurrentMember} * TopCount('your OPR_KIND set', 1, [Accounts].[FCT_OPR_SUM])
   )
) 
```

# c# - 自定义与非自定义属性？

> ID：13387551
> 
> 赞同：8
> 
> 时间：2012-11-14T21:22:29.350
> 
> 标签：c#, .net, custom-attributes

实现接口的东西将允许您通过该方法`ICustomAttributeProvider`获取已应用于它的自定义属性。`GetCustomAttributes`据我了解，自定义属性基本上是一个特殊的类（以“属性”结尾并扩展类），它被创建用于使用适当的语法（就在方法/类/等之前`Attribute`）应用于方法或类之类的东西`[FooAttribute]`. 在 C# 中，例如）。但是，如果那是自定义属性，那么什么*是非*自定义属性？我曾经认为与 .NET 捆绑在一起的属性是非自定义的，但`GetCustomAttributes`我什至会返回类似`System.ThreadStaticAttribute`.NET 框架的非常核心的属性。

是否存在非自定义属性之类的东西，或者“自定义属性”只是一个重言式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:39:50.393

派生自的一切都是`Attribute`自定义属性。

“属性”是一个通用术语。现实世界中的物体具有无数的属性。类、成员和参数都有我们可以描述的属性——名称、类型、访问器、成员数量、继承信息*等。*

*自定义*属性是我们*附加*的东西——我们想要关联和用来描述的方面，但不是内在的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:40:19.433

参见[维基百科](http://en.wikipedia.org/wiki/Metadata_%28CLI%29)，引用：

> 开发人员可以通过属性将元数据添加到他们的代码中。有两种类型的属性，自定义和伪自定义属性，对于开发人员来说，它们具有相同的语法。代码中的属性是给编译器以生成元数据的消息。在 CIL 中，元数据（例如继承修饰符、范围修饰符以及几乎任何不是操作码或流的东西）也称为属性。

另请参阅有关扩展元数据的 CLI 规范，其中可以找到对术语“自定义”属性的引用（例如[http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335 中的 I.9.7。 .pdf](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf) )

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T22:01:11.713

我不知道以下是否有任何相关性，但如果你说

```
var a = typeof(string).Attributes; 
```

你会得到一个名为 的标志枚举类型的值[`TypeAttributes`](http://msdn.microsoft.com/en-us/library/system.reflection.typeattributes.aspx)。也许这些标志是该类型的“非自定义”属性？

# c# - 页面只能有一个服务器端表单标签

> ID：13387552
> 
> 赞同：1
> 
> 时间：2012-11-14T21:22:35.933
> 
> 标签：c#, asp.net, webforms

我的一个页面遇到问题。我在页面上有一个 FormView 控件，用于将新行输入到数据库表中，在同一页面上有一个 GridView 控件，用于更新/删除同一数据库表中的行。

FormView 控件上有验证器来验证在数据库中抛出的任何输入，当我尝试编辑行时，它似乎会干扰 GridView。当我尝试保存编辑时，FormView 上的验证控件被触发并出现错误，因为文本框输入为空白，因此 GridView 无法保存修改后的表数据。

也许一个可见的例子会有所帮助：

![截屏](../Images/b1b0f1cd15588b66ed0d5a4d28b341d0.png)

我有一个想法，我将这些控件封装在不同的表单中，希望一个表单的提交不会在另一个表单中触发任何内容，但后来我收到一个错误，说我在页面上不能有多个表单`runat="server"`，其中据我所知是必需的。

我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:25:59.207

你只能拥有一个`Form`。

`ValidationGroups`对你的`FormView`and使用不同的`GridView`。

[http://msdn.microsoft.com/en-us/library/ms227424(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms227424(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:26:51.607

是的，这是网络表单的一个已知限制（功能？）。您只能有 1 个带有`runat="server"`标签的表单。

在您的场景中，您可以使用`ValidationGroup`名称将验证分组在一起，以便在触发相同验证的控件时仅执行“喜欢”验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:29:12.393

我所做的是将两个表单编码为回发到页面，并自己解析 Page.Load 中的回发变量。奇怪的？是的。作品？是的。

# playframework - Play vs. Lift Pain Points

> ID：13387554
> 
> 赞同：12
> 
> 时间：2012-11-14T21:23:11.540
> 
> 标签：playframework, playframework-2.0, lift, paint, point

**EDIT**
Slow compile times are now largely mitigated by [sub project](http://www.playframework.com/documentation/2.1.1/SBTSubProjects) enabled builds, a huge win.

Have switched away from Play's built-in asset generators (i.e. for Coffeescript and LESS) and moved over to 3rd party [Grunt JS](http://gruntjs.com/); now code changes during incremental builds are limited only by scalac compilation time and not also the overhead of Play's relatively slow assets generation.

**ORIGINAL**
Overall pretty happy with Play 2.1 Scala (the 9/14/2012 release, just prior to switch to Scala 2.10); however, there are some development pain points:

> 1) routing: on route change, one's entire route-controller structure `can` be re-compiled: not good.
> 
> 2) REST appears to not be directly supported since route `POST /foo/bar/:id` conflicts with `DELETE /foo/bar/:id`; i.e. route paths must be unique, presumably for reverse routing.
> 
> 3) views: with a scala.html file per foo action, the file count grows quickly, which means slower build times, more to compile; generics not supported and blind coding due to lack of IDE support (of course no scala template engine has IDE support to-date, AFAIK) are particularly tough areas.
> 
> 4) incremental builds work, but nothing in the process can be called "snappy", even a simple change to a scala.html file will in reality take @2 seconds, which is a long time when you're wanting that instant code-change browser-refresh feedback cycle.

I know some of the above issues are being worked on by Play devs, and slow-ish build times are also directly related to sbt, scala version, and one's own code structure. Again, overall, Play has been an enjoyable development experience. This is about pain, however, and I want to know what Lift brings to the table in this regard...

Lift seems to take a different approach. Do Lift-ers suffer from the above items? Assume not since MVC, Lift is not, and the xml-style snippets approach may not incur the same compile time hit that some of Play's behind the scenes build machinery does.

What are the pain points in Lift?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T18:46:22.403

作为一个已经使用 Lift 大约 2 年的人，我个人的观点：

> 1）路由：在路由改变时，一个人的整个路由控制器结构可以重新编译：不好

有了 Lift，就没有路由。我认为最接近的相关概念是[SiteMap](https://www.assembla.com/spaces/liftweb/wiki/SiteMap)，而且我个人从未遇到过与它的编译相关的任何问题。

> 2) 似乎不直接支持 REST，因为路由 POST /foo/bar/:id 与 DELETE /foo/bar/:id 冲突；即路由路径必须是唯一的，大概用于反向路由。

用 Lift 做了很多 REST，我可以告诉你，这绝对不是问题。Lift 的 REST 支持[非常好](https://www.assembla.com/spaces/liftweb/wiki/REST_Web_Services)，并且基于 Scala 的模式匹配，它为您提供了一种非常强大、类型安全的方式来设计您的 Web 服务

> 3) 视图：每个 foo 操作都有一个 scala.html 文件，文件数量快速增长，这意味着构建时间更慢，编译更多；不支持泛型和由于缺乏 IDE 支持而导致的盲目编码（当然，迄今为止没有 scala 模板引擎支持 IDE，AFAIK）是特别困难的领域。

使用 Lift，HTML 代码只是 HTML（没有特殊符号），所以它根本不考虑编译时间。HTML，称为模板，由转换 NodeSeq => NodeSeq 的片段处理。这听起来可能很复杂，但 Lift 有一个 DSL 可以让它变得非常简单。想要将用户名添加到跨度？如果它看起来像：

```
<span id="user-name">User name goes here</span>
```

您的代码段中会有这样的代码：

```
"#user-name *" #> user.name
```

您还可以在模板中重复项目，例如表格或列表：

```
 <table id="table"><tr><td class="name"></td><td class="value"></td></tr></table> 
```

应用了这个：

```
val tuples = List(("Lift", "Is great"), ("Other web frameworks", "Eh"))
"#table" #> {
  "tr" #> {
     tuples map { case(name, value) =>
       ".name" #> name &
       ".value" #> value
     }
  }
} 
```

将产生一个有 2 行的表，每行代表列表中元素的名称/值。

我认为这确实是 Lift 的最大优势之一。模板只是 HTML，不包含任何符号或标记。您可以按原样使用您的设计师组合的内容，甚至让他们直接访问以进行更新（在某些情况下无论如何）。

另一方面，代码片段是纯 Scala，而不是某种模板语言。无论你用 Scala 能做什么，你都可以在 Snippet 中做，这一切都由编译器检查。

也可以（并且鼓励）在多个页面上使用 Snippet，因此您不必每页都需要一个 Snippet。您甚至可以将站点地图配置为对多个页面使用相同的模板，并根据请求将类型安全参数传递给页面包含的片段。

> 4）增量构建工作，但过程中没有任何东西可以称为“快速”，即使是对 scala.html 文件的简单更改实际上也需要@2秒，当您想要即时代码时，这是很长时间 -更改浏览器刷新反馈周期。

我不认为 Lift 在这方面会造成伤害，但不幸的是它也没有多大帮助。很高兴听到 Scala 2.10 将包括这方面的一些改进，因为我认为它们必须来自编译器。

为了回答一些电梯批评......

需要高级Scala吗？不，我不相信它是。这有点主观，但您可以从我发布的内容中看到，创建模板并将片段应用到它非常简单。您必须熟悉“地图”之类的概念，但如果您不熟悉，那么使用 Scala Web 框架有什么好处呢？关于您将使用的一些方法的 Scala 文档对于初学者来说可能看起来有点毛骨悚然，但与 Scala 集合非常相似，它的复杂性使库更易于使用。对于刚接触 Scala 的人来说，他们可能最好遵循[Wiki](https://www.assembla.com/spaces/liftweb/wiki) the [Cookbook](http://cookbook.liftweb.net/)和[Simply Lift](http://simply.liftweb.net/)中的示例，而不是 API 文档，但我认为这是 Scala 的习惯用法，而不是 Lift 的习惯。

您是否必须在“控制器”中混合标记？绝对不。我将回顾一下 Lift 不是 MVC 框架的事实，并假设发帖者正在谈论 Snippets。从 Snippet 输出 HTML 绝不是必要的，而且在大多数情况下是完全反模式。像我发布的 CSS 选择器允许您将所有 HTML 保存在模板文件中，并将所有逻辑保存在 Snippets 中。

Lift 是否需要太多状态？这是我遇到的第一个投诉，而且我从未见过它伴随着现实世界的问题。事实是，使用 Lift，您可以选择是否要成为有状态的。如果您正在使用 Lift 编写 Web 服务，并且您不希望在访问您的 URL 时创建 Session，您可以使用 LiftRules.statelessDispatchTable 注册该服务。这符合 Lift 的哲学，即状态既无好坏之分，但满足某些需求是必要的，而对另一些需求则不是必需的。重要的是要明确何时使用它并让开发人员决定。如果您对此感兴趣，David Pollack 有[更好的解释](http://lift.la/lift-state-and-scaling)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-15T10:01:22.000

首先，我相信解决您的一些观点是公平的：

*   第 1 点和第 4 点：Scala 2.10 在编译速度上有相关的提升，这应该不再是问题了
*   On 2：从未见过与 GET/POST 有任何冲突，但我没有尝试 DELETE。可能是 Play 或您的代码中的错误（打开一个新问题，包括完整的路线定义，包括方法）
*   第 3 点：IntelliJ 12 支持 Play 2。AFAIK 模板支持泛型（如果泛型是指传递 X[A] 或 A 类型的泛型参数）

我的电梯经验是几年前的，所以有些观点可能不适用：

*   代码库和语法（来自 Lift 的源代码）实际上是高级 Scala。这使得刚开始使用 Scala 的人在查看框架代码时很难掌握代码在做什么。
*   视图优先的方法是一团糟，在“控制器”中混合代码（返回 HTML），它打破了关注点的分离并使后续代码变得更加困难

但最重要的是：

*   有状态的。自从我离开 Java EE 世界并开始使用无状态服务器以来，已经消失的问题数量之多令人吃惊。不必担心会话和其他混乱似乎无关紧要，但它确实有所作为。特别是在云计算时代:)

# facebook - Get complete (ALL, complete) Feed of my profile with API

> ID：13387555
> 
> 赞同：0
> 
> 时间：2012-11-14T21:23:23.037
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

i want see all my last activity in Facebook with API. I want make a timeline with all, all, all action that i maked in facebook, like history timeline. I tried in JS and PHP with feed, but no there are all, dont show things like my last comments, or my last likeds

```
$user_profile = $facebook->api('/me/feed'); 
```

Thanks

# c++ - ifstream 如果文件不存在则创建文件

> ID：13387563
> 
> 赞同：6
> 
> 时间：2012-11-14T21:23:50.427
> 
> 标签：c++, linux, std

我在编写读取 apache 日志的 Linux 控制台应用程序时遇到了一些麻烦。

我需要处理 bash 脚本参数，最后一个是日志文件的路径。我的问题是，如果文件不存在，我想抛出一个异常。

但是当我尝试以只读模式打开文件时，它会创建文件而不是失败！

这是代码：

```
// logreader.h

#include <string>
#include <sstream>
#include <iostream>
#include <fstream>
#include <stdexcept>

class LogReader
{
    public:
        LogReader(int, const char **);
        virtual ~LogReader();

        // ...

    private:
        std::ifstream log_;
};

// logreader.cpp

#include <logreader.h>

LogReader::LogReader(int argc, const char ** argv):
    log_()
{
    log_.exceptions(std::ifstream::failbit | std::ifstream::badbit);
    for (int i = 1; i < argc; ++i)
    {
        std::string arg(argv[i]);
        if (i == argc - 1)
        {
            try
            {
                log_.open(arg.c_str(), std::ifstream::in);
            }
            catch (std::ifstream::failure)
            {
                throw std::runtime_error("The file " + arg + " wasn't opened");
            }
        }
    }
}

LogReader::~LogReader()
{
}

// main.cpp

#include <logreader.h>

int main(int argc, const char ** argv)
{
    LogReader(argc, argv);
    return 0;
} 
```

脚本调用：

```
jmcomets $ ./test -g -l
jmcomets $ ls -l
-rw-rw-r-- 1 jmcomets jmcomets     0 Nov 14 22:41 -l 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:27:28.330

由于您正在打开一个[`std::ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)，因此有必要根据 27.9.1.9 [ifstream.members] 第 4 段添加`std::ios_base::in`（或任何其他拼写）：该标志是通过调用自动添加的。请注意，an或 an会自动添加(27.9.1.13 [ofstream.members] paragrpah 3) 或(27.9.1.17 [fstream.members] 第 3 段)，如果新文件不存在，这两者都会导致创建新文件（并且有写权限等）。[`std::ios_base::openmode`](http://en.cppreference.com/w/cpp/io/ios_base/openmode)`open()``std::ofstream``std::fstream``std::ios_base::out``std::ios_base::in | std::ios_base::out`

如果您发布的代码创建了一个新文件，则标准 C++ 库的实现是错误的：当仅指定标志时，使用带有(27.9.1.4 [filebuf.members] 段落`std::ios_base::in`的打开模式“好像”打开文件5）。反过来，当它获得（7.21.5.3 第 3 段）的打开模式时，它不会创建新文件。`"r"``fopen()``fopen()``"r"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:27:52.160

您可以`failbit`在异常标志中设置`ifstream`：

```
std::ifstream log;
log.exceptions ( std::ifstream::failbit );
try {
    log.open ("test.txt");
}
catch (std::ifstream::failure e) {
    std::cout << "Exception opening/reading file\n";
} 
```

[来源](http://www.cplusplus.com/reference/iostream/ios/exceptions/)

我已经测试过，如果文件无法打开，`ifstream`会抛出异常，例如找不到文件，没有读取权限。`failure`它将*以*只读方式打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:26:45.290

使用与 Linux 兼容的东西进行编辑；

在写之前尝试用 fopen 打开。如果文件 DNE`FILE`指针将为空。

```
FILE * file;
file = fopen ("myfile.txt","r");

if (file == NULL)
   //throw if fopen didn't already.
else
    //do stuff with my file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:30:25.853

您需要将 ifstream::in 作为第二个参数指定为：

```
log.open(arg.c_str(), ifstream::in) 
```

你也可以这样做：

```
std::ifstream log(arg.c_str(), ifstream::in); 
```

并跳过调用`open()`

# unit-testing - NHibernate testing strategy: one test suite per root or per class/mapping

> ID：13387565
> 
> 赞同：2
> 
> 时间：2012-11-14T21:23:58.993
> 
> 标签：unit-testing, nhibernate, repository, sharp-architecture, convention-over-configur

Given that most real world applications have fairly complicated relationships between entities, is there much value in testing individual class mappings? It seems that to be truly valuable, NHibernate tests should revolve around retrieving, persisting and deleting **entire object graphs**, starting at the aggregate root level (i.e. Customer-->Order-->OrderDetails). But if I go down that road, it seems I would have to test CRUD operations at every conceivable level in the object tree to validate that the "whole" works as expected; leading to an explosion of tests:

*   Delete a Customer
*   Delete an Order
*   Delete an OrderItem
*   Insert a Customer
*   Insert an Order
*   Insert an OrderItem

So, unless I'm missing something, which I very likely am, my choices are:

1.  Write one fixture suite per class/mapping
    *   Pros: Simpler to write CRUD operations
    *   Cons: Diminished test value, as they provide no assurance that entire aggregate roots are being persisted correctly
2.  Write one fixture suite per object graph
    *   Cons: Tests harder to write/explosion of test scenarios
    *   Pros: Higher value as tests since they test persistence from the application's perspective (i.e. testing mutations against the unified/integrated object graph)

If at all relevant, I'm using the `NHibernate.Mapping.ByCode` ConventionModelMapper to generate mappings using conventions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:10:41.320

是的，当测试我的映射是否按预期工作时，我在类级别进行测试并测试每个单独的类关系。

例如，如果我有一个包含 Order 对象列表的 Customer 对象，我将为我的 Customer 对象编写集成测试，以确保我可以对该对象执行所有 CRUD 操作。然后，我将为 Customer 对象所具有的所有关系编写测试，例如具有订单、地址等列表。这些测试将涵盖诸如级联插入/更新/删除之类的内容，以及急切获取这些子集合的能力一个问题。

因此，尽管我在类级别进行测试，因为我正在测试每个类的所有关系，但我在技术上测试整个对象图，只要我在我的每个测试中继续这种测试行为映射类。

更新（添加简要示例）：

```
public class Customer
{
    public int CustomerId { get; set; }
    public string CompanyName { get; set; }
    public IList<Address> Addresses { get; set; }
    public IList<Order> Orders { get; set; }
}

public class Address
{
    public int AddressId { get; set; }
}

public class Order
{
    public int OrderId { get; set; }
    public string Status { get; set; }
    public IList<OrderDetail> OrderDetails { get; set; }
}

public class OrderDetail
{
    public int OrderDetailId { get; set; }
    public string City { get; set; }
}

[TestFixture]
public class CustomerMappingTests
{
    private ISession session;

    [SetUp]
    public void SetUp()
    {
        session = UnitOfWork.Current.GetSession();
    }

    [TearDown]
    public void TearDown()
    {
        session.Dispose();
    }

    [Test]
    public void CanGetCustomer()
    {
        // Arrange
        const int customerId = 1;

        // Act
        var customer = session.Query<Customer>()
            .Where( x => x.CustomerId == customerId )
            .FirstOrDefault();

        // Assert
        Assert.NotNull( customer );
        Assert.That( customer.CustomerId == customerId );
    }

    [Test]
    public void CanGetCustomerAddresses()
    {
        // Arrange
        const int customerId = 1;

        // Act
        var customer = session.Query<Customer>()
            .Where( x => x.CustomerId == customerId )
            .Fetch( x => x.Addresses )
            .FirstOrDefault();

        // Assert
        Assert.NotNull( customer.Addresses.Count > 0 );
    }

    [Test]
    public void CanGetCustomerOrders()
    {
        // Arrange
        const int customerId = 1;

        // Act
        var customer = session.Query<Customer>()
            .Where( x => x.CustomerId == customerId )
            .Fetch( x => x.Orders )
            .FirstOrDefault();

        // Assert
        Assert.NotNull( customer.Orders.Count > 0 );
    }

    [Test]
    public void CanSaveCustomer()
    {
        // Arrange
        const string companyName = "SnapShot Corporation";
        var customer = new Customer { CompanyName = companyName };

        // Act
        session.Save( customer );

        session.Flush(); // Update the database right away
        session.Clear(); // Clear cache

        var customer2 = session.Query<Customer>()
            .Where( x => x.CompanyName == companyName )
            .FirstOrDefault();

        // Assert
        Assert.NotNull( customer2 );
        Assert.That( customer2.CompanyName == companyName );
    }
} 
```

# java - How to dynamically add jPanels to a JScrollPane that has been added to the JFrame using NetBeans GUI creator?

> ID：13387568
> 
> 赞同：3
> 
> 时间：2012-11-14T21:24:09.380
> 
> 标签：java, swing, jframe, jpanel, jscrollpane

This may be a silly question, and I'd rather not use the NetBeans inbuilt GUI editor, but I've been asked to.

The problem I'm having is I'm attempting to add a JPanel (itself containing a few labels) to an already existing JScrollPane that is on a JFrame. The JScrollPane and JFrame have been created using the NetBeans GUI editor.

I have an ArrayList (of undetermined size) of orders, and for each order in the ArrayList I'm attempting to create a JPanel and put it in the JScrollPane.

I'm having trouble with adding a JPanel to a JScrollPane and then adding labels to the JPanel. I've looked at tutorials online but all of them need reference to the JFrame... but because I'm using the inbuilt GUI editor that comes with NetBeans I can't reference the JFrame in the code.

The code I'm currently using:

```
 FlowLayout experimentLayout = new FlowLayout(FlowLayout.CENTER);
    JPanel panel = new JPanel();
    panel.setLayout(experimentLayout);
    JPanel panel2 = new JPanel();
    JLabel label2 = new JLabel("Hello");
    scrollPane.add(panel); //ScrollPane is already on form (put there by GUI editor)
    panel.add(panel2);
    panel2.add(label2); 
```

Any help on how to add these JPanel to the JScrollPane would be very much appreciated!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:21:31.327

我想通了！我使用了 scrollPane.getViewport().add(panel); 而不仅仅是 .add :)

谢谢你的帮助 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T00:01:27.627

如果没有代码，就不可能 100% 确定，但您会像自己构建 UI 那样做。

```
jScrollPane1.setViewportView(yourPanel); 
```

如果您无法直接访问框架的内部，那么您需要提供某种访问方法来允许您这样做。

# android - Unusual behavior of scrollbar

> ID：13387570
> 
> 赞同：0
> 
> 时间：2012-11-14T21:24:12.457
> 
> 标签：android, xml, textview, scrollbar

I have a problem with scrollbar. I create a TextView in xml and enable vertical scrollbar. I have also define custom thumb thanks to

```
android:scrollbarThumbVertical="@color/blue"
android:scrollbarTrackVertical="@color/white" 
```

I run this on Android 4.0.3 and everything wrok fine, but when I am running it on Android 2.3.6 the thumb stretch to parent size ( textview size ) and covert it. What is weird is when I set default scrollbar ( my custom thumb will be removed ) everything work fine. How can I it work fine fith default scrollbar and with custom not?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:24:43.847

我将“@color/blue”替换为“@drawable/blue”，它工作正常。

# machine-learning - 差异报告的分类器

> ID：13387573
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:24:19.727
> 
> 标签：machine-learning, nlp, classification, opennlp

我是 ML 新手。我有一个 diff 报告，其中的注释表明好 diff 和坏 diff。例子 -

旧字符串新字符串差异注释

abc 好

pqr xyz 坏

lmn wxy 好

……

给定这个训练集，假设它们具有相似的内容，是否可以使用分类器来预测未来差异报告的注释。如果是这样，哪个分类器最适合这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:44:15.210

除非您尝试并调整其参数，否则无法知道哪个是“最佳分类器”。如果您是该领域的初学者，[Weka可以帮助您入门。](http://www.cs.waikato.ac.nz/ml/weka/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:10:29.300

分类器不是可以吸收任何东西并从中理解的魔杖。您需要将数据分解为“特征”或“信号”，然后分类器可以检测出一种模式，以便将来自动标记数据。鉴于您给我们的示例训练集（由 3 条短线组成），任何人都无法猜测数据中存在哪些重复出现的共性，分类器可以利用这些共性来完成其工作。
如果你能想到计算机可以研究的一些潜在信号，然后用它来做出明智的猜测，那么就有可能自动识别一条线可以得到什么注释。分类器的最佳选择主要取决于您选择的信号类型。如果每个字符串中都有重复出现的单词，那么朴素贝叶斯可能会起作用，如果您提出的信号形成数字向量，那么逻辑回归或 svm 将是不错的选择。

# javascript - 如何使用 POST 方法数据预填充表单域？

> ID：13387578
> 
> 赞同：0
> 
> 时间：2012-11-14T21:24:29.977
> 
> 标签：javascript, forms, post, input

我试图弄清楚如何使用上一页中的值预填充表单字段。

第一页的表单使用 post 方法。

需要正确的脚本，该脚本将从上一页中获取一个值并将其填充到一个表单字段中，该字段的输入只有一个名称而不是一个 ID。

我无法更改、修改或为任何输入分配 ID，因为我无法访问大部分代码。可以添加代码，但很难修改或更改现有的。这是针对功能有限的在线商店的购物车，所以我只是想添加一些以防您想知道。任何帮助深表感谢。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:33:25.663

从您所说的...您需要能够根据“名称”更改输入值：

```
<script>
$('input[name=YourFieldName]').attr(
    {value: 'YOUR POST DATA'});
});
</script> 
```

您还需要使用 ASP 来获取 POST 数据......如果您能够使用 ASP，它看起来像

```
<%
Dim TEXTBOX_A
TEXTBOX_A = Request.Form("TEXTBOX_A")
%>

<script>
$('input[name=TEXTBOX_A]').attr(
    {value: '<% Response.Write(TEXTBOX_A) %>'});
});
</script> 
```

如果我有误解，请纠正我。

# android - 我需要在某些日期执行一些任务。我可以用原生的android api来做吗

> ID：13387580
> 
> 赞同：1
> 
> 时间：2012-11-14T21:24:40.973
> 
> 标签：android

我需要在某些日期执行一些任务。我可以用原生的android api来做吗？还有一个问题，我需要在后台模式下执行 ussd 请求。我可以做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:31:39.207

要在某个日期执行任务，您应该使用警报管理器，您可以在这里查看 -

*   [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

我不太确定你在问题的第二部分中问的是什么，但这里有一个关于 android 中 ussds 的链接

*   [如何在 Android 上执行 USSD 请求？](https://stackoverflow.com/questions/5477597/how-is-it-possible-to-do-ussd-requests-on-android)

如果您想在应用程序未运行时执行此操作，您还可以使用警报管理器。

# c# - C#圆寻路

> ID：13387581
> 
> 赞同：-2
> 
> 时间：2012-11-14T21:24:44.017
> 
> 标签：c#, path-finding

昨天我在我的 C# 代码中检测到一个奇怪的行为。我的设置是（不完全是，但可以比较）以下：

用户看到一个**复选框网格**，我将中间的复选框分配为坐标 0,0。

我写了一个结构来更容易地比较两个坐标：

```
public struct Coord
{
  public int x, y;

  public static bool operator == (Coord coord1, Coord coord2)
  {
    return coord1.x == coord2.x && coord1.y == coord2.y;
  }

  public static bool operator != (Coord coord1, Coord coord2)
  {
    return coord1.x != coord2.x || coord1.y != coord2.y;
  }

  public override int GetHashCode()
  {
    return this.x.GetHashCode() ^ this.y.GetHashCode();
  }

  public override bool  Equals(object obj)
  {
    if (!(obj is Coord))
      return false;

    Coord coord = (Coord)obj;

    if (coord.x == this.x && coord.y == this.y)
      return true;
    return false;
  }
} 
```

对于一个复选框，我使用一个名为 Position 的类，它继承自标准 WinForms 复选框：

```
public class Position : CheckBox
{
  public Coord coord;
  public List<Position> nearPositions = new List<Position>();

  public Position(int x, int y)
  {
    this.coord.x = x;
    this.coord.y = y;
  }

  protected override void OnClick(EventArgs e)
  {
    if (this.Checked)
      return;

    base.OnClick(e);

    this.checkConnections();
  }

  private void checkConnections()
  {
    foreach (Position position in this.nearPositions)
    {
      Route route = new Route(this, position);
    }
  }
} 
```

如您所见，用户只能单击每个复选框一次。
**List nearPositions 仅包含此选项附近的单击复选框**。
现在在 checkConnections() 方法中，我尝试找出所有（或仅部分）单击的复选框是否可以连接到一个圆圈。因此，我为每个可能的路径创建了我的类 Route 的新对象。

```
public class Route
{
  private Position startPosition;
  private List<Position> nodes = new List<Position>();

  public Route(Position startPosition, Position nextPosition)
  {
    this.startPosition = startPosition;
    this.nodes.Add(nextPosition);
    this.findConnection();
  }

  public Route(Route route, Position nextPosition)
  {
    this.startPosition = route.startPosition;
    this.nodes = route.nodes;
    this.Add(nextPosition);
    this.findConnection();
  }

  private void findConnection()
  {
    if (this.nodes.Count > 2 && this.nodes[this.nodes.Count - 1].nearPositions.Contains(this.startPosition))
    {
      //HERE THE ROUTE IS A CIRCLE
      return;
    }
    List<Position> nextPositions = this.nodes[this.nodes.Count - 1].nearPositions.FindAll(p => !p.Equals(this.startPosition) && !this.nodes.Contains(p));
    foreach (Position position in nextPositions)
    {
      if (this.nodes[this.nodes.Count - 1].nearPositions.FindAll(p => !p.Equals(this.startPosition) && !this.nodes.Contains(p)).Contains(position)) //TODO strange problem here...bad workaround need to fix
      {
        Route route = new Route(this, position);
      }
    }
  }
} 
```

请记住，我为每种可能性创建了一个 Route 对象。因此，如果圆圈包含许多复选框，则同时存在许多 Route 对象。也许重现我的问题很重要。
Route 始终具有相同的 startPosition。它是用户单击的位置。
在列表节点中，我保存了构建 cricle 的步骤。

现在我得到的是在 findConnection() 方法内部 List nextPosition 有时包含的 Positions 甚至不存在于 this.nodes[this.nodes.Count - 1].nearPositions 列表中。这就是我在 foreach 循环中添加额外条件的原因。

我的想法是它可能是 .FindAll() 方法的错误或同时存在多个 eoutes 的问题。

所以我的问题：
1.你能重现我的问题吗？
2\. 它来自哪里？
3\. 我该如何解决？

感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:46:25.583

您应该尝试查明问题并发布更短的代码，以显示对您不起作用的东西。通读所有细节并弄清楚算法有点费时，而且大多数细节都不相关。

也就是说，我看到的一件可疑的事情是你定义`Coord`结构的方式。你给了它一个相等的运算符覆盖，它正确地比较了成员，但是在你的`Equals`覆盖中你不比较成员。

如果您的问题是`FindAll`工作不正常，并且您使用调试器验证了列表的内容是正确的，那么这个`Equal`覆盖可能是问题的原因。

您还应该更改`GetHashCode`覆盖以组合成员的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:44:28.247

我找到了解决方案。
问题出在

```
public Route(Route route, Position nextPosition)
{
  this.startPosition = route.startPosition;
  this.nodes = route.nodes;
  this.Add(nextPosition);
  this.findConnection();
} 
```

新路由只获得对前一个路由节点的引用，但它应该有自己的节点列表。
所以我把它改成了

```
public Route(Route route, Position nextPosition)
{
  this.startPosition = route.startPosition;
  this.nodes.AddRange(route.nodes);
  this.Add(nextPosition);
  this.findConnection();
} 
```

我应该早点看到的。对不起！
但无论如何感谢您的帮助！

# java - Java、EJB、所有方法的并发锁

> ID：13387587
> 
> 赞同：2
> 
> 时间：2012-11-14T21:25:02.260
> 
> 标签：java, concurrency, locking, ejb

我有两种方法的 EJB

```
@Singleton(name = "RatingCalculatorEJB")
public class RatingCalculatorBean {

    public void countRating() {}

    public void countRating(int someID) {}
} 
```

默认情况下，所有方法都有并发锁：@Lock(LockType.WRITE) 如果方法被任何线程调用 - 另一个线程将等待调用此方法。

**但我需要更多——如果一个线程调用了任何方法，那么调用 EJB 的任何**方法的所有其他线程都应该等待。我有什么办法吗？

@Stateless bean 的相同问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T13:10:51.613

@Lock(LockType.WRITE) 锁定 bean 的所有 EJB 方法，所以它已经做了你想要的。

无状态 bean 一次只处理一个客户端，因此并发应该很少成为问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:06:50.733

您可以尝试使该方法同步。这样，一次只有一个线程可以访问该方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-08T04:26:02.400

`@Lock(LockType.WRITE)`on bean 不会锁定 bean 的所有方法。`@Lock(LockType.WRITE)`与放在bean 的每个方法上相同。

注释单例类`@Lock`指定所有业务方法和单例的任何超时方法都将使用指定的锁类型，除非它们使用方法级`@Lock`注释显式设置锁类型。如果`@Lock`单例类上没有注释，则默认锁定类型 ,`@Lock(WRITE)`将应用于所有业务和超时方法。

# c# - 静态和动态 C# 之间的不良互操作性

> ID：13387588
> 
> 赞同：6
> 
> 时间：2012-11-14T21:25:05.797
> 
> 标签：c#, c#-4.0, dynamic, static

这个问题在某种程度上是对[相关帖子](https://stackoverflow.com/questions/13384666/passing-dynamic-arguments-breaks-fluent-interfaces)的说明，我相信下面的示例描述了问题的本质。

```
class Program
{
    public static IList<string> GetData(string arg)
    {
        return new string[] {"a", "b", "c"};
    }

    static void Main(string[] args)
    {
        var arg1 = "abc";
        var res1 = GetData(arg1);
        Console.WriteLine(res1.Count());

        dynamic arg2 = "abc";
        var res2 = GetData(arg2);
        try
        {
            Console.WriteLine(res2.Count());
        }
        catch (RuntimeBinderException)
        {
            Console.WriteLine("Exception when accessing Count method");
        }

        IEnumerable<string> res3 = res2;
        Console.WriteLine(res3.Count());
    }
} 
```

对 GetData 的第二次调用仅因为 GetData 收到转换为动态的参数而引发异常，这不是很糟糕吗？该方法本身可以使用这样的参数：它将其视为字符串并返回正确的结果。但是结果又被强制转换为动态，结果数据突然无法根据其底层类型进行处理。除非它被显式地转换回静态类型，正如我们在示例的最后几行中看到的那样。

我不明白为什么必须以这种方式实施。它破坏了静态和动态类型之间的互操作性。一旦使用动态，它就会感染调用链的其余部分，可能会导致类似这样的问题。

**更新**。有人指出 Count() 是扩展方法，不被识别是有道理的。然后我将调用 res2.Count() 更改为 res2.Count（从扩展方法更改为 Ilist 的属性），但程序在同一个地方引发了相同的异常！现在这很奇怪。

**更新2。**flq 指出了 Eric Lippert 关于这个主题的博客文章，我相信这篇文章为它为什么以这种方式实现提供了充分的理由：http: [//blogs.msdn.com/b/ericlippert/archive/2012/10/22/a -method-group-of-one.aspx](http://blogs.msdn.com/b/ericlippert/archive/2012/10/22/a-method-group-of-one.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T21:47:06.857

问题是 Count 是一种扩展方法。

您将如何在运行时定位扩展方法？有关哪些“在范围内”的信息基于正在编译的特定文件中的“使用”语句。但是，这些不包含在运行时编译的代码中。它应该查看所有加载的程序集中的所有可能的扩展方法吗？项目引用但尚未加载的程序集呢？如果您尝试允许动态使用扩展方法，则会出现数量惊人的边界情况。

在这种情况下，正确的解决方案是以非扩展形式调用静态方法：

`Enumerable.Count(res2)`

或者，既然您知道`IList<T>`在这种情况下，只需使用 Count 属性：

`res2.Count`<--- 编辑：这不起作用，因为它是由数组实现时显式实现的接口属性。

* * *

再次查看您的问题，我发现真正的问题不是关于扩展方法解析本身，而是为什么它无法确定可能存在单一方法解析并因此静态地知道类型。我将不得不再考虑一下，但我猜这是边界情况的类似问题，特别是当您开始考虑多个重载时。

* * *

这是一个在一般情况下可能出现的令人讨厌的边界情况（尽管不直接适用于您的情况，因为您是从 Object 派生的）。

假设您在程序集 A 中有一个类 Base。在程序集 B 中还有一个类 Derived : Base。在 Derived 类中，您有上面的代码，并且您认为 GetData 只有一种可能的解决方案。但是，现在假设发布了新版本的程序集 A，该版本具有受保护的 GetData 方法和不同的签名。您的派生类继承了这个，DLR 尽职尽责地允许动态绑定到这个新方法。突然间，返回类型可能不是您所假设的。请注意，所有这些都可以在*您不重新编译程序集 B*的情况下发生。这意味着运行前编译器不能假定 DLR 将解析为运行前编译器认为是唯一选择的类型，因为运行时的动态环境可能会产生不同的类型。

# iphone - 在状态栏顶部创建 UISwipeGestureRecognizer

> ID：13387589
> 
> 赞同：1
> 
> 时间：2012-11-14T21:25:06.183
> 
> 标签：iphone, cocoa-touch, statusbar, uiswipegesturerecognizer

我目前正在构建一个功能非常丰富的应用程序，我想实现一种由手势识别器触发的“返回”动作。由于屏幕的其余部分已被使用，唯一剩下的地方是状态栏。

所以问题是，它甚至可能吗？如果可以，怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T03:04:14.350

您可以在状态栏上方放置一个透明`UIWindow`的，然后给它`UIWindow`一个`UISwipeGestureRecognizer`.

请参阅[MTStatusBarOverlay](https://github.com/myell0w/MTStatusBarOverlay)了解如何`UIWindow`在状态栏上添加一个。

具体来说，创建一个`UIWindow`这样的：

```
UIWindow *window = [[UIWindow alloc] init];
window.frame = [[UIApplication sharedApplication] statusBarFrame];
window.windowLevel = UIWindowLevelStatusBar + 1.0f;
[window makeKeyAndVisible]; 
```

然后添加你`UISwipeGestureRecognizer`的。

如果这不能立即起作用，您可能必须将该`backgroundColor`属性设置为不清晰。清晰`UIViews`的通过触摸（尽管我相信它们仍然应该与`UIGestureRecognizers`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T02:56:41.910

不幸的是，无法检测到状态栏上的滑动，因为它是完全由操作系统本身控制的组件（类似于多任务托盘或通知中心），并且不受应用程序的管辖。

您也许可以在越狱设备上将一些东西放在一起，但对于标准 iPhone 或 iPad，没有（并且可能永远不会）用于与状态栏交互的公共 API。

# php - 输入 sanitizaton 不使用 mysqli_real_escape_string()

> ID：13387591
> 
> 赞同：0
> 
> 时间：2012-11-14T21:25:20.007
> 
> 标签：php, sql, regex

我想剥离 SQL 可执行语句的用户输入，但代码库的方式是我不想建立 mysqli_real_escape_string(connection, string) 需要的数据库连接。

什么是优雅的正则表达式/替换单线来清理字符串？

```
<?php
$naughty = array("\\", "{", "}", ")", "(", "[", "]", "\"", ";", ":", ">", "&");
$sanitized = str_replace($naughty, " ", $input_string);
?> 
```

---更新----示例解决方案。感谢您的输入。

```
<?PHP 
      $testsql = "';\"\\ bork bork bork %A 0x33\n";
      echo $testsql;
     /* $translate = array("0x" => "[HEX]",  ";" => "[SEMICOLON]", "'" => "[QUOTE]", "%" => "[PERCENT]","\"" => "[DOUBLEQUOTE]",
      "\\" => "[BACKSLASH]" ); */
      $translate = array("0x" => " ",  ";" => " ", "'" => " ", "%" => " ","\"" => " ", "\\" => " ");
      echo "<br>";
      $testsql=strtr($testsql, $translate);
      echo $testsql;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:02:18.747

虽然我绝对同意评论和回答，即使用准备好的语句，而不是自己这样做既更聪明，在很多方面也更好，并且总是推荐你在可以使用它们时。虽然您现在可能没有安全问题，但将来可能会突然出现；准备好的陈述的风险要低得多。如果你能找到解决方法，那就去做吧！

我觉得我必须给出免责声明，才能在这里得到认真对待。

因为，我也相信完全可以手动进行所有转义；鉴于环境是可控的。这与转义其他格式（例如 javascript）没有什么不同。有时这是需要的。一方面，我曾经需要创建一个没有可用数据库的 SQL 导出脚本。

要正确执行此操作，必须假设以下内容：

*   输入字符串是 UTF-8。你验证了这一点。
*   当您稍后执行 mysql 字符串时，完整的 sql 语句是 UTF-8 格式的，连接也是如此。
*   [php 的mbstring 函数重载](http://php.net/manual/en/mbstring.overload.php)不会发生任何疯狂的事情。
*   你不相信我未经测试的代码，并验证我在说什么；）

为什么 UTF-8 如此重要？[阅读这篇文章](http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string)

鉴于这两点，要模拟 mysql_real_escape_string，您必须转义以下字符：

```
NUL (ASCII 0), \n, \r, \, ', ", and Control-Z. 
```

来源：[php.net](http://de3.php.net/manual/en/mysqli.real-escape-string.php)

为此，这应该足够了：

```
$translate = array(
  "\x00" => '\\0',
  "\n"   => '\\n',
  "\r"   => '\\r',
  "'"    => '\\\'',
  "\""   => '\\"',
  "\x1a" => '\\Z',
);

$output = "'" . strtr($input, $translate) . "'"; 
```

如您所见，我仍然确保我的输出被引号包围。没有它，这种转义技术 (nor `mysqli::real_escape_string`) 是不够的。

我见过的替代技术：

*   拆分每个字节，并用 MySQL 的[CHAR](https://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_char)函数包围它。
*   在 PHP 中对字符串进行 Base64 编码，并使用 MySQL 5.6 的[FROM_BASE64](https://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_from-base64)函数对其进行 base64 解码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:25:57.897

如果没有连接，则无法正确转义查询数据，因此不了解字符集。

不要自己尝试这样做。您的实现必然是不安全的。无论如何，您应该使用准备好的查询将数据与查询分开。

# asp.net - 更新：将文件从服务器A复制到服务器B

> ID：13387592
> 
> 赞同：4
> 
> 时间：2012-11-14T21:25:21.747
> 
> 标签：asp.net, filepath, server.mappath

好的，刚刚与我们的服务器管理员交谈，两台服务器都设置了所有权限。现在我收到一个错误：**找不到网络路径。**我为这个演示提供了虚拟服务器名称我是否使用了错误的名称。我是否应该尝试使用 IP 地址并仍然收到此错误。我究竟做错了什么？

```
'File.Copy("\\sever.name.local.mil\pdf\audits\2009-05-19audit-09-01.pdf", 
 "\\sever.name.remote.mil\sigar_cms\pdf\audits\2009-05-19audit-09-01.pdf")' 
```

谁能给我一些建议，这让我脑筋急转弯。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:09:59.717

```
Dim FilePath As String = "\\sigar" & "\pdf\audits\" & "" 
```

这将创建字符串`\\sigar\pdf\audits\`。您可以将该行简化为：

```
Dim FilePath As String = "\\sigar\pdf\audits\" 
```

`Server.MapPath`用于将网站中的虚拟路径转换为服务器上的文件路径。换句话说，您根本不需要使用它。将您的第二行更改为：

```
FileUpload1.SaveAs(FilePath + FileName) 
```

如果这不起作用，则可能是您的应用程序池在其下运行的身份没有权限在指定路径中写入文件。尝试调整`sigar`.

**更新**

要仅复制文件，请使用[File.Copy](http://msdn.microsoft.com/en-us/library/c6cfw35a%28v=vs.100%29.aspx)：

```
File.Copy("\\serverA\path\to\file", "\\serverB\path\to\file") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:31:23.947

已解决：我想通了。我想使用与映射驱动器相同的网络路径。忘记使用 $ 美元符号。

```
 ''# Save files to disk
  FileUpload1.SaveAs(Server.MapPath("../pdf/audits/" & FileName))

 ''# Local Path
  Dim localPath As String = "\\localserver\folder$\pdf\audits\"

 ''# Remote Path
  Dim remotePath As String = "\\remoteserver\folder$\pdf\audits\"

 ''# Copy from Local to Remote servers
  System.IO.File.Copy(localPath + FileName, remotePath + FileName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:59:49.490

发布的代码有几处错误。如果您有更多代码，我建议您发布它。话虽如此，根据我所看到的，阅读这篇 MS 文章将回答您的问题——正如它目前所表达的那样。

**写一个文本文件**（[Basic File IO](http://support.microsoft.com/kb/304427 "基本文件 IO")）

此示例代码使用 StreamWriter 类来创建和写入文件。如果你有一个现有文件，你可以用同样的方式打开它。

```
Dim writer As StreamWriter = _
New StreamWriter("c:\KBTest.txt")
writer.WriteLine("File created using StreamWriter class.")
writer.Close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T22:44:57.640

假设两台服务器在同一个本地网络上并且您具有适当的访问权限，您应该能够使用 File.Copy 方法并为每个服务器/路径使用 UNC。

如果情况比简单地在两个对等服务器之间复制文件要复杂一些，您可能需要考虑使用 FTP 或 SSH 作为传输方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T22:46:28.510

由于您标记[asp.net](/questions/tagged/asp.net "显示标记为“asp.net”的问题")，我假设这是在 IIS 的应用程序池下运行的 Web 应用程序中。

您的**第一步**是确保您的应用程序池用户帐户对您的其他帐户具有写入权限。默认情况下，此帐户类似于`IIS_USR`.

**第二步**是将文件保存到第二台服务器。

```
Dim FilePath As String = "\\sigar\pdf\audits\"
Dim FileName As String = "MyFile.txt"

FileUpload1.SaveAs(String.Format("{0}{1}",FilePath, FileName)) 
```

您还可以创建自己的写入方法

```
Dim SourcePath As String = "C:\foo\pdf\audits\"
Dim FileName As String = "MyFile.txt"

Dim FileToCopy As String = String.Format("{0}{1}",SourcePath, FileName)

Dim DestPath As String = "\\sigar\pdf\audits\"

System.IO.File.Copy(FileToCopy, DestPath) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T17:02:32.550

@Gee 我调整了您的代码以从服务器上的一个位置复制到同一服务器上的另一个位置。此代码有效。首先在您的环境中执行此操作——只是为了确定。

在我看来，这是某种网络访问问题。跨域、用户或组权限或限制等。

```
Imports System.IO
File.Copy("\\CHI-CSD-06.mycompany.local\temp1\testfile.txt", "\\CHI-CSD-06.mycompany.local\temp2\testfile.txt") 
```

# lotus-notes - 我使用什么代码为视图中的文档发送 NotesURL？

> ID：13387594
> 
> 赞同：0
> 
> 时间：2012-11-14T21:25:37.010
> 
> 标签：lotus-notes

虽然我知道我可以使用文档的 UNID 直接从引用 Notes 的链接打开文档，但可以像在浏览器中那样使用视图名称和第一列值来完成吗？

例如，我可以发送：

```
http://mycompany.com/OpsManual.nsf/Policy/6 
```

通过浏览器客户端访问操作手册中的策略 #6。我想我可以发送：

```
Notes://mycompany.com/OpsManual.nsf/Policy/6 
```

将它们发送到 Notes 客户端中的同一位置，但它始终以默认的 Notes 打开设置打开。我有错误的表单、数据库或服务器设置吗？还是我记错了 NotesURL 的工作原理？您只能在 LotusScript 中使用 NotesURL 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:57:07.030

Notes URL 语法是

```
notes://servername/database/view/documentuniqueid 
```

您可以省略 documentuniqueID 而只包含 viewID，但您不能指定行，也不能根据列中的值跳转到某一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T14:49:18.367

（手动）生成 Notes:// URL 的最简单方法是获取文档或视图或应用程序链接，在 Notes 客户端中选择其中一项，然后选择*Edit → Copy As → ...*，然后将链接粘贴到 Sametime 聊天会话中。如果您将它粘贴到（例如）Notes 电子邮件消息中，您将获得一个 URL，而不是您将获得的图标链接。

如果您需要以编程方式生成 URL，请首先按照我描述的方式手动执行，以将结构作为起点。

另外（可能）有用的是将链接粘贴到文本编辑器中，因为它以 XML（或至少类似 XML 的格式）为您描述了结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:13:22.250

您需要 OpenDocumentByKey 参数来执行此操作，但不幸的是，它仅适用于 Web 浏览器，而不适用于客户端 - 所以这不起作用:-(

```
Notes://mycompany.com/OpsManual.nsf/Policy/6?OpenDocumentByKey 
```

或者，您可以编写一些 LotusScript 或公式来查找文档的 UNID，然后使用它。例如：

```
docUNID: = @DbLookup("":"" ; "":"" ; "Policy"; policyNumber; 1; [RETURNDOCUMENTUNIQUEID]);
"Notes://mycompany.com/OpsManual.nsf/Policy/" + docUNID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:55:35.087

在这里，您可以在 IBM 的 Lotus Notes 和 Domino wiki 中找到 notes-url 文档： [http ://www-10.lotus.com/ldd/dominowiki.nsf/dx/notes-urls](http://www-10.lotus.com/ldd/dominowiki.nsf/dx/notes-urls)

据我所知，视图可以由 UNID 或 NoteID 指定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-01T07:09:31.847

Notes:///DbReplicaId/viewUnid/YourKeyHere?OpenDocumentByKey

这适用于我使用 LN 8.5

# sql - 如何根据 SQL Server 中的下一条记录字段进行排序？

> ID：13387595
> 
> 赞同：2
> 
> 时间：2012-11-14T21:25:41.300
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表，其中包含一个键字段、一个后续键和最多两个先前的键。如何创建基于等于以下键的下一条记录排序的结果？

```
KEY,PRKEY1,PRKEY2,FLWKEY   
-------------------------------
3701401,0000000,0000000,3701403
3701403,3701401,0000000,3701421
3701402,0000000,0000000,3701404
3701404,3701402,0000000,3701421
3701421,3701404,3701403,3701405
3701405,3701421,0000000,3701423
3701299,0000000,0000000,3701210
3701210,3701299,0000000,3702007
3702007,3701210,0000000,3701005
3701005,3702007,0000000,3701423
3701423,3701405,3701005,3701411
3701413,0000000,0000000,3701411
3701411,3701423,3701413,3701431
3701431,3701411,3701005,3701455
3701451,0000000,0000000,3701455
3701455,3701431,3701451,3701443
3701443,3701455,0000000,3701445
3701445,3701443,0000000,3701432
3701432,3701445,0000000,3701434
3701434,3701432,0000000,3701435
3701435,3701434,0000000,0000000 
```

结果应如下所示：

```
KEY,PRKEY1,PRKEY2,FLWKEY
-------------------------------    
3701401,0000000,0000000,3701403
3701403,3701401,0000000,3701421
3701421,3701404,3701403,3701405
3701405,3701421,0000000,3701423
3701423,3701405,3701005,3701411
3701411,3701423,3701413,3701431
3701431,3701411,3701005,3701455
3701455,3701431,3701451,3701443
3701443,3701455,0000000,3701445
3701445,3701443,0000000,3701432
3701432,3701445,0000000,3701434
3701434,3701432,0000000,3701435
3701435,3701434,0000000,0000000 
```

提前致谢。我只有大约 50k 条记录可以通过这种方式进行整理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:42:11.670

```
WITH    q (key, prkey1, prkey2, flwkey, init, lvl) AS
        (
        SELECT  *, key, 1
        FROM    mytable
        WHERE   key = 3701401
        UNION ALL
        SELECT  mt.*, q.init, q.lvl + 1
        FROM    q
        JOIN    mytable mt
        ON      mt.key = q.flwkey
        )
SELECT  key, prkey1, prkey2, flwkey
FROM    q
ORDER BY
        init, lvl 
```

这是一个链表，您需要在递归 CTE 中遍历它。

sqlfiddle[在这里](http://sqlfiddle.com/#!6/1d4a1/5)

# r - 如何在没有数据或仅使用系数进行预测的情况下保存 glm 结果？

> ID：13387603
> 
> 赞同：11
> 
> 时间：2012-11-14T21:26:27.707
> 
> 标签：r, prediction, glm

当我使用以下 R 代码时，

```
model_glm=glm(V1~. , data=xx,family="binomial");
save(file="modelfile",model_glm); 
```

模型文件的大小将与数据一样多，在我的情况下为 1gig。如何删除model_glm结果中的数据部分，所以只能保存一个小文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T21:36:50.557

`model = FALSE`在您的调用中设置`glm`应防止`model.frame`返回。此外，设置`y = FALSE`将阻止返回响应向量。`x = FALSE`是默认设置并防止`model.matrix`返回 。

这种组合应该缩小 glm 对象的大小。

当然，您也可以使用`coef(model_glm)`or 提取系数，使用标准误差，

```
summary(model_glm)$coef 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-23T21:30:29.210

我遇到了这个问题，我在生产中将 GLM 作为 R 的一部分运行，而 GLM 的大小大大减慢了我的速度。我发现我需要杀死的不仅仅是`$data`. [这](http://datasciencethoughts.blogspot.com/2014/12/r-in-production-diaries-glm-trap-part-2.html)是我的帖子，下面有一个例子。

```
> object.size(sg)
96499472 bytes
> sg$residuals <- NULL
> sg$weights <- NULL
> sg$fitted.values <- NULL
> sg$prior.weights <- NULL
> sg$na.action<- NULL
> sg$linear.predictors <- NULL
> sg$fitted.values <- NULL
> sg$effects <-NULL
> sg$data <- NULL
> object.size(sg)
3483976 bytes
> sg$qr$qr <- NULL
> object.size(sg)
79736 bytes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-09T22:06:47.020

`object.size()`具有误导性，因为它忽略了环境属性。如果要评估真实大小，请使用：

```
length(serialize(model_glm, NULL)) 
```

除了存储的数据之外，如果您想显着减小 glm 的大小，请执行以下操作：

```
rm(list=ls(envir = attr(model_glm$terms, ".Environment")),
     envir = attr(model_glm$terms,
              ".Environment")) 
```

这来自一篇非常详细的[文章](https://blogs.oracle.com/r/is-the-size-of-your-lm-model-causing-you-headaches)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T04:50:06.810

您可以在保存之前将模型对象中的数据清空。我做了一个快速测试，仍然产生了预测。

```
model_glm$data <- NULL 
```

# java - 与 Spring 集合选择的联合和交叉点

> ID：13387611
> 
> 赞同：1
> 
> 时间：2012-11-14T21:26:48.457
> 
> 标签：java, spring

`ExpressionParser`Spring 有能力通过(Collection Selection)返回一个集合的子集。

例如，想象一个简单的类：

```
public Customer {
  private String name;
  private boolean vip;
  private boolean conferenceAttendee;
} 
```

如果我有一个`List<Customer>`以前设置为`StandardEvaluationContext`变量的集合：`evalContext.setVariable("customerList", customers);` 我可以通过“选择表达式”检索 vip 为真的所有客户的子集`<variable>.?[<selectionExpression>]`：

```
List<Customer> vipCustomers = 
       (List<Customer>)new SpelExpressionParser()
            .parseExpression("#customerList.?[vip]")
            .getValue(evalContext); 
```

是否可以在选择表达式中作为联合 (vip || ConferenceAttendee) 或交集 (vip && ConferenceAttendee) 执行相同的逻辑，而无需调用`evalContext.setVariable("customerList", vipCustomers)`中间列表并执行第二个 parseExpression？

与此类似的东西：

```
// This doesn't work...
List<Customer> vipCustomers = 
       (List<Customer>)new SpelExpressionParser()
            .parseExpression("#customerList.?[vip || conferenceAttendee]")
            .getValue(evalContext); 
```

我特别想了解我可以将哪些有效的选择表达式传递给 SpelExpressionParser 的 parseExpression，而不是其他类似的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T00:20:26.767

你非常非常亲近。您可以使用 Spring 表达式语言中的[OR 和 AND 逻辑运算符：](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)

```
 customerList.add(new Customer("jim", true, false));
    customerList.add(new Customer("bob", false, true));
    customerList.add(new Customer("rob", true, true));

    List<Customer> vipCustomers =
            (List<Customer>)new SpelExpressionParser()
                    .parseExpression("#customerList.?[vip]")
                    .getValue(evalContext);
    System.out.println(vipCustomers);
    //[Customer{name='jim'}, Customer{name='rob'}]

    List<Customer> vipANDConfAttendeesCustomers =
            (List<Customer>)new SpelExpressionParser()
                    .parseExpression("#customerList.?[vip and conferenceAttendee]")
                    .getValue(evalContext);
    System.out.println(vipANDConfAttendeesCustomers);
    //[Customer{name='rob'}]        

    List<Customer> vipORConfAttendeesCustomers =
            (List<Customer>)new SpelExpressionParser()
                    .parseExpression("#customerList.?[vip or conferenceAttendee]")
                    .getValue(evalContext);
    System.out.println(vipORConfAttendeesCustomers);
    //[Customer{name='jim'}, Customer{name='bob'}, Customer{name='rob'}] 
```

* * *

*编辑前 - 可以忽略，因为它不是真正的答案，而是建议*

请允许我介绍另一种没有 Spring 的方法，它具有更多的功能感，并且可以很好地扩展，为复杂和/或交互提供更多的表现力。以下解决方案使用[Guava 的谓词](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained#Predicates)来表达查询需求的主要构建块：

```
 Predicate<Customer> isVip = new Predicate<Customer>() {
        @Override
        public boolean apply(Customer customer) {
            return customer.isVip();
        }
    };

    Predicate<Customer> isConferenceAttendee = new Predicate<Customer>() {
        @Override
        public boolean apply(Customer customer) {
            return customer.isConferenceAttendee();
        }
    }; 
```

然后将它们组合成更复杂的查询，涉及[Predicates.and](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#and%28com.google.common.base.Predicate...%29)和[Predicates.or ，通过](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html#or%28com.google.common.base.Predicate...%29)[Iterables.filter](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#filter%28java.lang.Iterable,%20com.google.common.base.Predicate%29)过滤 Collection （一种迭代它们的功能方式）：

```
Iterables.filter(customers, isVip);
Iterables.filter(customers, Predicates.and(isVip,isConferenceAttendee));
Iterables.filter(customers, Predicates.or(isVip,isConferenceAttendee)); 
```

基于名称是唯一标识客户的假设，带有一些自动生成的 equals/hashcode/toString 方法的完整工作示例：

```
import com.google.common.base.Predicate;
import com.google.common.base.Predicates;
import com.google.common.collect.Iterables;
import com.google.common.collect.Lists;

import java.util.ArrayList;
import java.util.List;

public class GuavaTest {

    public static void main(String ...args){

        Predicate<Customer> isVip = new Predicate<Customer>() {
            @Override
            public boolean apply(Customer customer) {
                return customer.isVip();
            }
        };

        Predicate<Customer> isConferenceAttendee = new Predicate<Customer>() {
            @Override
            public boolean apply(Customer customer) {
                return customer.isConferenceAttendee();
            }
        };

        List<Customer> customers = Lists.newArrayList();

        customers.add(new Customer("jim",true,false));
        customers.add(new Customer("bob",false,true));
        customers.add(new Customer("rob",true,true));

        System.out.println("Vips:\t"+Iterables.filter(customers, isVip));
        System.out.println("Vips && ConfAttendees:\t"+Iterables.filter(customers, Predicates.and(isVip,isConferenceAttendee)));
        System.out.print("Vips || ConfAttendees:\t"+Iterables.filter(customers, Predicates.or(isVip,isConferenceAttendee)));
    }
}

class Customer {
 private String name;
 private boolean vip;
 private boolean conferenceAttendee;

    Customer(String name, boolean vip, boolean conferenceAttendee) {
        this.name = name;
        this.vip = vip;
        this.conferenceAttendee = conferenceAttendee;
    }

    public String getName() {
        return name;
    }

    public boolean isVip() {
        return vip;
    }

    public boolean isConferenceAttendee() {
        return conferenceAttendee;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Customer customer = (Customer) o;

        if (name != null ? !name.equals(customer.name) : customer.name != null) return false;

        return true;
    }

    @Override
    public int hashCode() {
        return name != null ? name.hashCode() : 0;
    }

    @Override
    public String toString() {
        return "Customer{" +
                "name='" + name + '\'' +
                '}';
    }
} 
```

# batch-file - 使用不带排序的 uniq 命令（排序）

> ID：13387612
> 
> 赞同：1
> 
> 时间：2012-11-14T21:26:49.537
> 
> 标签：batch-file

我实际上正在编写一个批处理脚本，我需要使用批处理代码（这是蹩脚的）、uniq、sort、sed 等删除重复的行，但它不能在此过程中对列表进行排序。有任何想法吗 ？

```
 sort <file> | uniq 
```

效果很好，但它对我已经排序的文件进行了排序。有什么想法吗？

```
 cat <file> | uniq 
```

失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:30:33.933

如果您的文件已经排序，您可以使用 uniq 命令，如您给出的示例，即

# 猫 | 独特的

sort 不是 uniq 的*要求*，强烈建议这样做，因为它只会消除连续的重复。如果一行在第 2、3、4、8 行重复，而管道中没有排序命令，则第 2 行和第 8 行将在输出中。使用 sort 只有第 2 行将在输出中。

希望这是你要问的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T06:35:03.310

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:47:28.820

如果您可以使用例如不太古老的版本`bash`（支持数组变量），您可以轻松地在`while`循环中执行此操作：

```
#!/bin/bash
declare -a LINES
while read; do
    for n in "${LINES[@]}"; do
        if [[ $n == $REPLY ]]; then
            continue 2
        fi
    done
    LINES=("${LINES[@]}" "$REPLY")
    echo "$REPLY"
done 
```

如果您的文件很大，awk 或 Perl 可能会更好。

# java - Java中的距离度量

> ID：13387618
> 
> 赞同：2
> 
> 时间：2012-11-14T21:27:26.297
> 
> 标签：java, machine-learning, nearest-neighbor

我正在研究最近邻搜索项目，我需要距离度量，例如 Euclidian、Manhatan 等。我可以自己实现它们，或者我想知道是否有可以使用的标准 java 代码？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:30:05.917

曼哈顿距离很容易实现[`Math.abs(x1-x2)+Math.abs(y1-y2)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)。

虽然您可以使用[`Point2D.distance(x1,y1,x2,y2)`](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Point2D.html#distance%28double,%20double,%20double,%20double%29)欧几里得距离的方法，但计算起来一点也不难：

```
double dx = x1-x2, dy = y1-y2;
Math.sqrt(dx*dx+dy*dy); 
```

如果您必须将其扩展到更高的维度，请将坐标作为数组传递，并使用循环来计算平方和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:31:08.127

有些轮子太小了，以至于无法尝试不重新发明。

```
public class Distances
{
    private Distances() {}

    public static euclidean(double a, double b)
    {
        return Math.sqrt(a * a + b * b);
    }

    public static manhatten(double a, double b)
    {
        return Math.abs(a) + Math.abs(b);
    }
} 
```

用法：

```
double x1 = 15.0, y1 = 15.0;
double x2 = 25.5, y2 = 37.25;

Distances.euclidean(x1 - x2, y1 - y2); // order does not matter
Distances.euclidean(y2 - y1, x1 - x2); // distance is the same regardless

Distances.manhatten(x1 - x2, y1 - y2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T21:40:07.513

看看实现 RealVector-Interfaces 的 Apaches ArrayRealVector。

那里有 L-1、L-inf 和 euklidian norm 的实现以及 n 维向量的 merik。

[https://code.google.com/p/symja/source/browse/trunk/commons-math/src/main/java/org/apache/commons/math3/linear/ArrayRealVector.java?r=883](https://code.google.com/p/symja/source/browse/trunk/commons-math/src/main/java/org/apache/commons/math3/linear/ArrayRealVector.java?r=883)

# javascript - Google Feed API 导致页面变为空白

> ID：13387620
> 
> 赞同：2
> 
> 时间：2012-11-14T21:27:30.620
> 
> 标签：javascript, load, feed

这听起来可能很荒谬，但有没有理由像调用一行代码这样简单的事情会迫使我的网页变为空白？

这是强制页面变为空白的代码行

```
google.load("feeds", "1"); 
```

我正在尝试简单地加载 Google Feed API 以解析 google 新闻提要并访问图像等。

我之前遇到过这个链接：[为什么 google.load 会导致我的页面变为空白？](https://stackoverflow.com/questions/9519673/why-does-google-load-cause-my-page-to-go-blank)

我试图通过 setTimeOut 加载提要 api，正如其他各种来源中所建议的那样，但不幸的是它具有完全相同的效果。

我还应该提到，在这两种情况下，我都将此代码添加到我的文档就绪函数的顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T15:48:03.553

不是答案，只是评论，我不能评论，因为你的链接说它不使用超时来修复它，超时可能是原因或类似的东西。此外，在 dom 加载后超时或类似的“修复”是添加一个空回调。您可以在您链接的帖子中看到答案。（我添加了这个答案，以便可能找到这个答案的人转到正确的链接帖子，祝你好运）

# image-processing - opencv dft 仅适用于 2 次方的图像尺寸

> ID：13387623
> 
> 赞同：1
> 
> 时间：2012-11-14T21:27:34.423
> 
> 标签：image-processing, opencv, fft, dft

我目前在 opencv 中遇到 dft 函数的奇怪行为。我正在 dft 转发一些 opencv 矩阵并在频域中进行一些计算，然后我再次将其转换回来。

对于尺寸为 2 次方（例如 256x256、512x512）的图像，结果看起来与预期的一样，但对于任何其他尺寸，我完全是胡说八道。

我的代码大致如下：

```
cv::Mat Z(Pgrads.rows, Pgrads.cols, CV_32FC2, cv::Scalar::all(0));

cv::dft(Pgrads, P, cv::DFT_SCALE | cv::DFT_COMPLEX_OUTPUT);
cv::dft(Qgrads, Q, cv::DFT_SCALE | cv::DFT_COMPLEX_OUTPUT);

/* doing some calculations */

cv::dft(Z, Z, cv::DFT_INVERSE | cv::DFT_REAL_OUTPUT); 
```

我正在做的操作称为光度立体，所以简而言之，我正在对一些渐变进行全局积分。有没有其他人遇到过opencv这个问题，可以给我一些建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:41:06.530

FFT 仅适用于 2 次幂大小的数据集

扩展图像并用常数值填充它们是正常的（这对傅立叶结果没有影响）见[http://docs.opencv.org/doc/tutorials/core/discrete_fourier_transform/discrete_fourier_transform.html](http://docs.opencv.org/doc/tutorials/core/discrete_fourier_transform/discrete_fourier_transform.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-10-11T00:07:01.270

FFT 仅适用于 2 个数据集的幂是完全不正确的。对于 OCV 的特定实现，他们声称（从 2.4.9 开始）它可以与其他尺寸一起使用，但是为了提高效率，建议使用 2 填充的力量。你会发现有 2^N 限制的非常古老的 FFT 库，但我已经很久没见过了。您可能会确保您使用的是当前版本（我知道截至提问之日，OCV 或多或少具有当前的 FFT 实现）而不是一些真正的旧代码。我不知道你是如何评估输出的，但最有可能的问题是你给它一个复杂的输入 CV_32FC2，同时使用一个告诉它期待一个真实输入的标志，DFT_COMPLEX_OUTPUT。DFT_COMPLEX_OUTPUT 的意思是“接受真正的输入并给我完整的，

# qt - 来自嵌套列表视图的列表视图的qt快速调用索引

> ID：13387627
> 
> 赞同：2
> 
> 时间：2012-11-14T21:27:58.120
> 
> 标签：qt, listview, qml, qt-quick

我在 qml 中有一个带有嵌套列表视图的列表视图，如何在嵌套列表视图委托中获取父列表视图索引的索引？

代码示例：

```
ListView {
        id: listView
        anchors.fill: parent
        delegate: delegate
        model: myModel
    }

    Component {
        id: delegate
        Item {
            id: recipe
            width: listView.width
            height: 120

            Column {

                   // some text fields
                    ListView {
                        id: listView1
                        width: listView.width
                        height: 50
                        delegate: nextLevelDelegate
                        model: nextLevelList
                    }

                }
        }
    }

    Component {
        id: nextLevelDelegate
        Item{
                                        width: listView1.width
                                        height: 20
                                        Rectangle {
                                            id: background2
                                            x: 2; y: 2; width: parent.width - x*2; height: parent.height - y*2
                                            color: "lightgray"
                                            border.color: "gray"
                                            radius: 5
                                        }
                                        Text {
                                            anchors.fill: parent
                                            id:nextLevelButton
                                            horizontalAlignment:Text.AlignHCenter
                                            text: modelData
                                        }
                                        MouseArea
                                        {
                                          anchors.fill: parent
                                          id: mouseArea
                                          onClicked: {
                                             window.buttonPressed(nextLevelButton.text,listView.currentIndex);//I need parent index here for calling c++ method with it
                                          }
                                        }
                                    }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:38:27.067

将父列表视图的索引分配给不同的属性，这样它就不会被遮蔽。

```
ListView {
   id: listView1
   property int parentIndex: index
   width: listView.width
   height: 50
   delegate: nextLevelDelegate
   model: nextLevelList 
```

}

`parentIndex`将在`nextLevelDelegate`as中提供`listView1.parentIndex`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-03T11:55:42.043

这对我有用：

```
import QtQuick 2.15
import QtQuick.Window 2.15

Window {
width: 640
height: 480
visible: true
title: qsTr("Hello World")

ListModel {
    id: listModelOne
    ListElement {vertical: 8}
    ListElement {vertical: 9}
}
ListModel {
    id: listModelTwo
    ListElement {horiz: 0}
    ListElement {horiz: 1}
}
ListView{
    id:verticalListView
    anchors.fill:parent
    model:listModelOne

    delegate: Item{
        id:vert_del
        width: 200
        height: 100
        ListView{
            property int parentIndex: index
            id:horizontalListView
            width:verticalListView.width
            height:100
            orientation: ListView.Horizontal
            model:listModelTwo
            delegate: Item{
                width:50
                height:50
            Text{
                text:horiz
                MouseArea{
                anchors.fill:parent
                    onClicked: console.debug(horizontalListView.parentIndex)
                }
            }
            }
        }
    }
}
} 
```

# extjs - 如何处理在 extjs 中存储的选中和取消选中复选框字段

> ID：13387633
> 
> 赞同：1
> 
> 时间：2012-11-14T21:28:20.227
> 
> 标签：extjs, checkbox, filter, store, extjs4.1

我有一个商店，它加载了一个显示州名、首都和寒冷天气的网格。

我还有一个复选框，根据“寒冷天气”列的“是”值过滤商店。

当我单击复选框时，网格会过滤并显示具有“是”的状态，但是当我取消选中复选框时，它什么也不做。

如何恢复商店以显示以前的商店？下面是我的复选框。请帮忙。

```
items: [
    {
        xtype: 'checkboxfield',
        boxLabel: 'Show only Cold State',
        scope: this,
        handler: function (field, value) {
            scope: this,
            this.checkValue = field.getValue();
            console.log(this.checkValue);
            if (this.checkValue == true) {
                this.store.filter('Cold', 'Yes');
            }
            else if (this.checkValue == false) {
            }
        }, 
```

**更新的代码**- 当我这样做时，我得到这个错误

> 类型错误：tempstore1 未定义

```
items: [
    {
        xtype: 'checkboxfield',
        boxLabel: 'Show only Cold State',
        scope: this,
        handler: function (field, value) {
            scope: this,
            this.checkValue = field.getValue();
            console.log(this.checkValue);
            if (this.checkValue == true) {
                var tempstore1 = Ext.StoreMgr.lookup('store');
                tempstore1.filters.add('CheckBoxFilter', new Ext.util.Filter({
                    property: 'Cold',
                    value: 'Yes',
                    root: 'myTable'
                }));
                console.log('here');
                tempstore1.load();
            }
            else if (this.checkValue == false) {
                this.store.filters.removeAtKey('CheckBoxFilter');
            }
        }, 
```

**第二次更新**- 现在我收到这个错误

> TypeError: a.getRoot.call(a, d) 未定义

代替

```
var tempstore1 = Ext.StoreMgr.lookup('store'); 
```

我在用

```
var tempstore1 = Ext.getCmp('GridArea1').store; 
```

`GridArea1`是我的网格面板的 id。

**第三次更新**- 现在我得到这个错误

```
var tempstore1 = Ext.getCmp('GridArea1').getStore(); 
```

来自chrome调试器的错误...“true”和“here”是我的console.log，“h”部分也是如此...这是tempstore1拥有的而不是我的数据..

> true
> h {hasListeners: e, scope: h, loading: false, events: Object, eventsSuspended: false...}
> 这里未捕获类型错误
> ：无法读取未定义的属性“冷”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:32:14.137

你需要使用`clearFilter()`

```
xtype: 'checkboxfield',
boxLabel: 'Show only Cold State',
scope: this,
handler: function (field, value) {
    this.checkValue = field.getValue();
    console.log(this.checkValue);
    if (this.checkValue == true) {
        this.store.filter('Cold', 'Yes');
    }
    else if (this.checkValue == false) {
        this.store.clearFilter();
    }
} 
```

可以删除特定的过滤器（`clearFilter()`全部删除）。不要使用该`store.filter('property_to_filter','value')`方法，而是使用：

```
store.filters.add('Coldfilter', new Ext.util.Filter({
    property: 'Cold',
    value: 'Yes',
    root: 'data'
}));
store.load(); 
```

要删除过滤器，请使用：

```
store.filters.removeAtKey('Coldfilter'); 
```

文档中没有任何内容`root: 'data'`要添加到过滤器中，现在它可以工作了：http: [//jsfiddle.net/vrVRP/2/](http://jsfiddle.net/vrVRP/2/)

# php - 自动传递电子邮件地址的退订链接

> ID：13387634
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:28:22.910
> 
> 标签：php, email, unsubscribe

我到处搜索，所以我开始认为这可能是不可能的。我的客户想要一个取消订阅链接，他们可以添加到个人电子邮件中（他们作为冷电话跟进发送）。他们没有数据库，所以他们的想法是他们有一个不需要编辑的标准链接，一旦点击，就会将收件人的电子邮件传递给 unsubscribe.php。通过这种方式，我的客户可以将其作为他们电子邮件的标准，而用户只需点击它。这可能吗？我不是 php 专家，所以我希望我遗漏了一些非常简单的东西。

这就是我所拥有的（并发送电子邮件，但只发送“电子邮件”）我的电子邮件链接：

```
http://www.mydomain.com/unsubscribe.php?email=$email 
```

退订.php：

```
 <?php mail("me@mydomain.com","unsubscribe", $email = $_GET['email']); ?> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:31:04.460

不，PHP 邮件功能不提供`unsubscribe`.

如果不是数据库，`email`从哪里来？您可以`direct`取消订阅链接到设置电子邮件的程序并在其中取消设置。

# c# - 具有字符串值的 ASP.NET 和 SqlDataAdapter

> ID：13387635
> 
> 赞同：1
> 
> 时间：2012-11-14T21:28:44.140
> 
> 标签：c#, asp.net, sql-server

我有以下内容：

```
 SqlConnection con = new SqlConnection(strConn);
    DataSet ds = new DataSet();
    SqlDataAdapter myda = new SqlDataAdapter("SELECT [Key], [Value] FROM [data_LookupValues] where Category = 'CanadaProvinces' ", con);
    myda.Fill(ds);
    ddlState.DataSource = ds;
    ddlState.DataTextField = "Value";
    ddlState.DataValueField = "Key";
    ddlState.DataBind(); 
```

我被卡住了，因为我需要`CanadaProvinces`在`SqlDataAdapter`.

有没有一种简单的方法可以做到这一点？当我按照我的方式进行操作时会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:33:38.057

您还没有告诉我们错误，但是，这不是有效的 sql：

```
SELECT [Key], [Value] FROM [data_LookupValues] = 'CanadaProvinces' 
```

你要查询什么，是`data_LookupValues`数据库中的一个表吗？

也许这就是你真正想要的：

```
SELECT [Key], [Value] FROM [data_LookupValues] WHERE Provinces = 'CanadaProvinces' 
```

当然，我只是假设了正确的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:54:52.903

正确的方法是做一些事情：

1.  将一次性物品包裹成`using`块
2.  使用单独的`SqlCommand`对象并使用参数化查询（而不是将您的 SQL 连接在一起）
3.  因为您只返回一组数据 - 使用 a`DataTable`而不是“更重”`DataSet`
4.  将数据的获取分离到它自己的方法中 - 并且只需从您的网页中调用 - 使其也普遍可用！（将适用于其他事情 - 不仅仅是`CanadaProvinces`）

所以你的代码应该是这样的：

```
private DataTable FetchData(string categoryValue)
{
   string query = "SELECT [Key], [Value] FROM [data_LookupValues] where Category = @Category";

   using (SqlConnection con = new SqlConnection(strConn))
   using (SqlCommand cmd = new SqlCommand(query, con))
   {
       cmd.Parameters.Add("@Category", SqlDbType.VarChar, 50).Value = categoryValue;

       SqlDataAdapter myda = new SqlDataAdapter(cmd);
       DataTable result = new DataTable();

       myda.Fill(result);
       return result;
    }
} 
```

然后在您的 ASPX web 的代码隐藏中，使用如下内容：

```
DataTable tblCanadaProvinces = FetchData('CanadaProvinces');  

ddlState.DataSource = tblCanadaProvinces;
ddlState.DataTextField = "Value";
ddlState.DataValueField = "Key";
ddlState.DataBind(); 
```

并完成它。现在您可以调用您的`FetchData`方法来检索查找表中的任何可能的类别！

# javascript - 按多个类过滤，然后从最相关的列表中排列？

> ID：13387636
> 
> 赞同：0
> 
> 时间：2012-11-14T21:28:45.143
> 
> 标签：javascript, jquery, html, css

从选择框中选择 3 个功能后，我正在使用 jquery/javascript 按多个类过滤列表。现在，它正在显示具有所有三个条件的内容，然后将其余内容放在页面上的另一个 div 中。

我想知道是否有一种方法不仅可以显示符合所有三个标准的项目，还可以显示两个或一个标准 - 然后如果它不符合任何标准，则位于列表的底部或类似的东西。

我只是在乱搞，所以完全愿意接受关于使用 jquery/javascript 做这样的事情的任何建议。

```
<form id="keys" action="results.html">
<select id="key1">
<option id="Android">Android</option>
<option id="Bluetooth">Bluetooth</option>
<option id="Camera">Camera</option>
<option id="Smartactions">Smartactions</option>
<option id="Video">Video</option>
<option id="Cat">Meow</option>
</select>

<select id="key2">
<option id="Android">Android</option>
<option id="Bluetooth">Bluetooth</option>
<option id="Camera">Camera</option>
<option id="Smartactions">Smartactions</option>
<option id="Video">Video</option>
</select>

<select id="key3">
<option id="Android">Android</option>
<option id="Bluetooth">Bluetooth</option>
<option id="Camera">Camera</option>
<option id="Smartactions">Smartactions</option>
<option id="Video">Video</option>
</select>
</form>
<button id="submit" onclick="showList()">Submit</button>

<div id="results">
<ul>
<li class="Bluetooth Camera" style="display:none">DEFY PRO</li>
<li class="Bluetooth Camera Smartactions" style="display:none">Motorola RAZR V</li>
<li class="Bluetooth Camera Smartactions" style="display:none">ATRIX HD LTE</li>
<li class="Android Bluetooth Camera Smartactions Video" style="display:none">Motorola RAZR</li>
<li class="Bluetooth Camera Video" style="display:none">MOTO LUXE</li>
</ul>
</div>

<div id="rest_results">

</div> 
```

还有我的剧本

```
function showList() {

    var key1 = keys.key1.value;
    var key2 = keys.key2.value;
    var key3 = keys.key3.value;

    var filter = $("." + key1 + "." + key2 + "." + key3 + "");
    filter.show();

    if (filter.length == 0) {
        alert("There is nothing that matches your criteria");   
    }

    var rest = $('li').not(filter);
    rest.show().appendTo("#rest_results");
} 
```

和一把[小提琴](http://jsfiddle.net/bZkp3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:11:29.303

元素的 ID 必须是**唯一的**。

您可以使用`data-*`属性来代替。

我不知道天气或不明白，但这里是更新的代码。您只能选择一个、两个或三个条件，

# HTML

```
<form id="keys" action="results.html">
  <select id="key1">
      <option></option>
      <option data-filter="Android">Android</option>
      <option data-filter="Bluetooth">Bluetooth</option>
      <option data-filter="Camera">Camera</option>
      <option data-filter="Smartactions">Smartactions</option>
      <option data-filter="Video">Video</option>
      <option data-filter="Cat">Meow</option>
  </select>

  <select id="key2">
      <option></option>
      <option data-filter="Android">Android</option>
      <option data-filter="Bluetooth">Bluetooth</option>
      <option data-filter="Camera">Camera</option>
      <option data-filter="Smartactions">Smartactions</option>
      <option data-filter="Video">Video</option>
  </select>

  <select id="key3">
      <option></option>
      <option data-filter="Android">Android</option>
      <option data-filter="Bluetooth">Bluetooth</option>
      <option data-filter="Camera">Camera</option>
      <option data-filter="Smartactions">Smartactions</option>
      <option data-filter="Video">Video</option>
  </select>
</form>
<button id="submit" onclick="showList()">Submit</button>

<br>
<div id="results">
<ul>
    <li class="Bluetooth Camera" style="display:none">DEFY PRO</li>
    <li class="Bluetooth Camera Smartactions" style="display:none">Motorola RAZR V</li>
    <li class="Bluetooth Camera Smartactions" style="display:none">ATRIX HD LTE</li>
    <li class="Android Bluetooth Camera Smartactions Video" style="display:none">Motorola RAZR</li>
    <li class="Bluetooth Camera Video" style="display:none">MOTO LUXE</li>
</ul>
</div>

<br>
<div id="rest_results">

</div> 
```

# JAVASCRIPT

```
function showList() {

    var key1 = $("#key1").find(":selected").data("filter");
    var key2 = $("#key2").find(":selected").data("filter");
    var key3 = $("#key3").find(":selected").data("filter");
    var selectorArr = [];
    var selector;

    if (typeof key1 !== "undefined")
        selectorArr.push("."+key1);
    if (typeof key2 !== "undefined")
        selectorArr.push("."+key2);
    if (typeof key3 !== "undefined")
        selectorArr.push("."+key3);
    selector = selectorArr.join(", ");

    if (selector != "") {
       var filter = $(selector);
       if (filter.length == 0)
           alert("There is no match with your criteria!");
       filter.show();
       var rest = $('li').not(selector);
       $("#rest_results").html("<b>Rest of the results</b>");
       rest.clone().show().appendTo("#rest_results");
    }
    else {
       alert("You must select at least one criteria!");  
    }

} 
```

[这是更新的 jsFiddle 演示](http://jsfiddle.net/bZkp3/3/)。

# regex - 我可以使用正则表达式来匹配一组值吗？

> ID：13387637
> 
> 赞同：1
> 
> 时间：2012-11-14T21:28:45.240
> 
> 标签：regex, postgresql, vlookup

我想检查集合中的每个元素是否包含在列中行的任何部分中。例如，

设置 A = {5013, aab, 402dha)

B栏

```
阿达夫**5013**dad344  
23**aab**yyyy  
zzz**402dha**vuuuda  
......  
...

```

1.  我不能使用“A 中的 B 列”，因为有前导字符和尾随字符；
2.  我不能使用 TRIM、SUBSTRING，因为我要搜索的元素可以在列行的任何部分；
3.  当 A 只有 3 个元素时，我可以在 where 子句中编写 3 个正则表达式，但当 A 有约 1000 个元素时，我不能这样做。

我的问题是是否有办法做到这一点？或者 Excel 中是否有类似“VLookup”的功能？

我会很感激任何想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T22:53:55.677

这是一个非常可怕的模式。通过更改它可以获得最佳结果，以便您将多个值存储在：

*   普通关系子表；
*   [数组](http://www.postgresql.org/docs/current/static/arrays.html)；或者
*   [`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)

所有这些都允许您使用相当简单和健全的 SQL 表达式来确定您想要什么，并且是可索引的（通过子表的常规 b-tree 索引，以及通过数组和 hstore 的 GiST 或 GIN 索引）以在大型表上获得更好的性能.

这当然是可能的，但性能会很糟糕。一种方法是使用`regexp_split_to_array`将列转换为数组，然后使用[数组运算符](http://www.postgresql.org/docs/current/static/functions-array.html)来测试重叠。

请参阅[此 SQLFiddle 演示](http://sqlfiddle.com/#!12/f4ed2/1)，它使用扩展的测试集，因为您的测试集不足以证明问题。

我已经显示了“任何集合出现在列中”（`%%`）和“所有集合都出现在列中”（`@>`），因为从您想要的问题中不清楚。

* * *

设置：

```
CREATE TABLE test(gah text);

INSERT INTO test(gah) VALUES
('adaf**5013**dad344'),
('23**aab**yyyy'),
('zzz**402dha**vuuuda'),
('no**matches**here**lalala'),
('5013**aab**402dha'),
('402dha**aab**somethingelse**5013'),
('402dha**aab**5013'); 
```

演示：

```
regress=> SELECT gah FROM test 
          WHERE regexp_split_to_array(gah, '\*\*') && ARRAY['5013', 'aab', '402dha'];
               gah                
----------------------------------
 adaf**5013**dad344
 23**aab**yyyy
 zzz**402dha**vuuuda
 5013**aab**402dha
 402dha**aab**somethingelse**5013
 402dha**aab**5013
(6 rows)

regress=> SELECT gah FROM test 
          WHERE regexp_split_to_array(gah, '\*\*') @> ARRAY['5013', 'aab', '402dha'];
               gah                
----------------------------------
 5013**aab**402dha
 402dha**aab**somethingelse**5013
 402dha**aab**5013
(3 rows) 
```

令人惊讶的是，您实际上可以通过利用 PostgreSQL 对表达式索引的支持来创建一个有益于该查询的索引。当然，仅仅因为你能做到并不意味着这是一个好主意：

```
regress=> CREATE INDEX test_glah_resplit_gin ON test 
          USING GIN(( regexp_split_to_array(gah, '\*\*') ));
CREATE INDEX
regress=> -- Only for testing purposes, don't use in production:
regress=> SET enable_seqscan = off;
SET
regress=> explain SELECT gah FROM test WHERE regexp_split_to_array(gah, '\*\*') @> ARRAY['5013', 'aab', '402dha'];
                                          QUERY PLAN                                           
-----------------------------------------------------------------------------------------------
 Bitmap Heap Scan on test  (cost=16.00..20.02 rows=1 width=32)
   Recheck Cond: (regexp_split_to_array(gah, '\*\*'::text) @> '{5013,aab,402dha}'::text[])
   ->  Bitmap Index Scan on test_glah_resplit_gin  (cost=0.00..16.00 rows=1 width=0)
         Index Cond: (regexp_split_to_array(gah, '\*\*'::text) @> '{5013,aab,402dha}'::text[])
(4 rows)

regress=> explain SELECT gah FROM test WHERE regexp_split_to_array(gah, '\*\*') && ARRAY['5013', 'aab', '402dha'];
                                          QUERY PLAN                                           
-----------------------------------------------------------------------------------------------
 Bitmap Heap Scan on test  (cost=16.00..20.02 rows=1 width=32)
   Recheck Cond: (regexp_split_to_array(gah, '\*\*'::text) && '{5013,aab,402dha}'::text[])
   ->  Bitmap Index Scan on test_glah_resplit_gin  (cost=0.00..16.00 rows=1 width=0)
         Index Cond: (regexp_split_to_array(gah, '\*\*'::text) && '{5013,aab,402dha}'::text[])
(4 rows) 
```

GIN 索引的更新成本很高，因此如果您使用这种方法，您将在`insert`/上付出巨大的性能代价。`update`普通数组也是如此；使用`regexp_split_to_table`动态创建它们只会让它变得更糟。请参阅[GIN 提示](http://www.postgresql.org/docs/current/static/gin-tips.html)和[GIN 索引介绍](http://www.postgresql.org/docs/current/static/gin-intro.html)。

例如，`INSERT INTO test(gah) SELECT 'aaaaabbbbb'||(x::text) FROM generate_series(1,1000000) x;`在 GIN 索引就位的情况下，将一百万行插入到我的测试表中需要 22 秒，而删除它后需要 1.6 秒。不过，由于值的一致性，这可能是一个特别糟糕的情况。

# jquery - 使用 JQuery 获取表值

> ID：13387639
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:28:48.497
> 
> 标签：jquery

我有一个带有 4 个表格单元的 html 表格： 1：复选框 2\. 标签 3\. 文本框 4\. 标签

单击复选框后，将触发一个 jquery 函数，但我试图获取复选框旁边的值。我在下面尝试过，但没有任何效果。我知道我很接近。任何帮助将不胜感激。

```
$(this).next()
$(this).nextSibling
$(this).nextSibling.childNodes[0]

 <table id="MainContent_cockpitTable" style="width:80%;">
  <tr>
<td>
      <input id="MainContent_check_FLIGHT DECK1" type="checkbox" checked="checked"/>    
    </td>
     <td>Pilot</td>
     <td><input "type="text" value="86.2" maxlength="10" id="MainContent_input_FLIGHT DECK_weight1" />
     </td>
     <td><span id="MainContent_input_FLIGHT DECK_arm1" style="display:inline-block;width:50px;">255.0</span></td>
</tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:35:37.433

```
$(this).parents('tr').find('label').text() 
```

[http://jsfiddle.net/7jnTF/2/](http://jsfiddle.net/7jnTF/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:40:14.807

```
$(this).next('td').html(); 
```

或者

```
$(this).next('td').text(); 
```

这应该有效-（我认为）你有类似的东西

```
<table>
  <tr>
    <td> <input type=checkbox .... /> </td>
    <td> YOU WANT THIS LABEL </td>
    <td> <input type=textbox ..... /> </td>
    <td> ANOTHER LABEL </td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:42:51.283

**工作演示** [http://jsfiddle.net/suSkb/](http://jsfiddle.net/suSkb/)

**您的案例特定演示** [http://jsfiddle.net/7nyn8/](http://jsfiddle.net/7nyn8/)

请注意：`classes`可以有空格，但不能`id`，并且`id`应该是唯一的。

希望它适合你的事业`:)`

**代码**

```
$('.hulk').click(function(e) {
    alert($(this).parents('tr').html());
     alert('Lable HTML = > ' + $(this).parents('tr').find('lable').text())   
});
​ 
```

**更远**

```
$('.hulk').click(function() {
    alert($(this).parents('tr').html());
    alert('Pilot here:=> ' + $(this).parent().next().html());
    alert('Lable HTML = > ' + $(this).parents('tr').find('span').text())
});​ 
```

# php - PHP ssh2_exec，一次执行多个命令

> ID：13387641
> 
> 赞同：0
> 
> 时间：2012-11-14T21:28:53.740
> 
> 标签：php, bash, libssh2

我正在使用 ssh2_exec 在我的 CentOS 服务器上从 PHP 执行一些命令，并且我已经使用了很多次，但是今天，当我尝试使用 && 使它一次执行 4 或 5 个命令时，它不起作用。下面是代码：

```
if (!($stream = ssh2_exec($con, 'cp -rf /home/shared/Tekkit_Server_3.1.2.zip /home/servers2/'.$mUsername.' && unzip /home/servers2/'.$mUsername.'/Tekkit_Server_3.1.2.zip && rm -rf /home/servers2/'.$mUsername.'/mods/mod_NetherOres.jar && mv -f /home/servers2/'.$mUsername.'/Tekkit.jar /home/servers2/'.$mUsername.'/craftbukkit.jar'))) {
    echo "fail: unable to execute command\n";
} 
```

它将 ZIP 复制到正确的目录，但是从那里什么也没做，有什么想法吗？

谢谢！

**编辑**

我试着做：

```
 if (!($stream = ssh2_exec($con, 'unzip /home/servers2/'.$mUsername.'/Tekkit_Server_3.1.2.zip'))){
                        echo "fail: unable to execute command\n";
 } 
```

它返回：失败：无法执行命令

其他命令工作正常，当我在终端中运行命令时它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:46:47.257

`-d`我测试了您的示例，如果您为命令提供选项`unzip`并指定应该解压缩文件的目录，它看起来似乎可以工作：

```
if (!($stream = ssh2_exec($con, 'unzip /home/servers2/'.$mUsername.'/Tekkit_Server_3.1.2.zip -d /home/servers2/'.$mUsername))){
    echo "fail: unable to execute command\n";
} 
```

# r - 从数组中选择一个随机数并返回它的索引

> ID：13387643
> 
> 赞同：1
> 
> 时间：2012-11-14T21:29:07.233
> 
> 标签：r, probability

我有一系列概率

```
A = c(0, 0, 1/3, 0, 1/3, 1/3) 
```

我使用的随机数公式是：

```
sample(A, 1, replace=TRUE) 
```

它给了我一种可能性。我要找的是对应概率的索引号。由于概率可以重复，我将如何获得选择的特定索引号？此外，它不应该能够选择 0 概率。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T01:52:30.940

制作一个基本上这样做的函数：

```
y <- 0 
while(y == 0) { 
  x <- sample(1:length(A), 1) 
  y <- A[x]
}
print(x) 
```

replace = TRUE 在这种情况下是多余的，因为您一次只采集一个样本。

# jquery - 悬停时jQuery切换div可见性

> ID：13387646
> 
> 赞同：0
> 
> 时间：2012-11-14T21:29:22.647
> 
> 标签：jquery, html

好的，所以我对旧的工具提示功能有一些变化。我想实现类似的东西，但是让鼠标可以追踪到工具提示 div 并单击它包含的内容中的链接。可能不是最好的描述，所以让我告诉你我的意思。看看[http://www.hsbc.co.uk](http://www.hsbc.co.uk) - 特别是顶部的灰色渐变条。如果您将鼠标悬停在“日常银行业务”部分，您可以找到下方显示的深灰色框。我将如何实现这一目标？到目前为止，这是我的代码：

```
<ul>
  <li>
    <a href="#" id="hover">
      <h2>Garage Search</h2>
      <span>Find yourself a garage</span>
    </a>
  </li>
</ul>

<div id="content">
  Content of popup div goes here
</div>

$(document).ready(function() {
  $("#hover").hover(function() {
    $("#content").show();        
  }, function() {
    $("#content").hide();
  });        
}); 
```

显然，它在当前状态下作为工具提示类型的脚本可以正常工作，但不允许我将鼠标放在弹出窗口上，因为这会触发 onmouseout 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:33:00.663

放入`#content`_`#hover`

```
<ul>
  <li id="hover">
    <a href="#">
      <h2>Garage Search</h2>
      <span>Find yourself a garage</span>
      <div id="content">
      Content of popup div goes here
      </div>
    </a>
  </li>
</ul> 
```

`#hover`这样你在里面时仍然悬停`#content` - 我将 id hover 更改为`<li>` 因为我不太确定你是否可以在标签中拥有所有其他`<span>`, `<h2>`, 和`<div>``<a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:35:40.187

您还可以做的是向您的内容项添加类

```
$(document).ready(function(){
    $("#hover").hover(function(){
        $(this).addClass("current").fadeIn();
    }, function() {
        $(this).removeClass("current").stop(true, true).css("display", "none");
    });
)}; 
```

# python - Python字符串格式错误

> ID：13387655
> 
> 赞同：0
> 
> 时间：2012-11-14T21:29:42.890
> 
> 标签：python, string, formatting

我正在尝试在 SQL 中绑定一个参数：

```
sql = "SELECT COLUMN_NAME,DATA_TYPE FROM USER_TAB_COLS WHERE TABLE_NAME=UPPER(:TABLENAME)"
print 'TABLENAME=',TABLENAME
sqlqry = sql %(TABLENAME) 
```

但得到字符串格式错误：

```
TypeError: not all arguments converted during string formatting 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:34:10.913

您的字符串中缺少占位符。

你想用我怀疑`:TABLENAME`的字符串替换。`sql``%s`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:35:33.387

您确实应该发布更多代码以使其完全清楚，但看起来字符串 'sql' 不包含任何要替换的 %-codes。您正在尝试替换一个值，但并非所有这些值都被使用（换句话说，没有任何东西被替换）。您应该使用 %s 而不是 :TABLENAME。

# html - 在jsp中插入变量表名

> ID：13387657
> 
> 赞同：0
> 
> 时间：2012-11-14T21:29:53.823
> 
> 标签：html, mysql, forms, jsp, insert

我正在尝试向表中插入一条记录，我以 html 形式选择它...我可以在 jsp 中使用类似的东西吗？

```
String queryString = "INSERT INTO ? (login,password,full_name,ulevel) VALUES (?, ?, ?, ?)"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:36:49.447

**主要答案** 如果你想使用 JDBC，我同意它可能是这样的，你可以试试这个：

```
<% String myquery = "SELECT * FROM EMPLOYEES WHERE DEPARTMENT = ?"; %>
<% PreparedStatement mystatement = connection.prepareStatement(myquery); %>
<% mystatement.setString(1, request.getParameter("myURLparam")); %>
<% ResultSet results= mystatement.execute(); %> 
```

您可以参考此链接了解如何使用它。Java Oracle 有更好的例子：[http ://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

**上一个答案：** 使用字符串格式

Java 示例：

```
String fs;
fs = String.format("The value of the float " +
               "variable is %f, while " +
               "the value of the " + 
               "integer variable is %d, " +
               " and the string is %s",
               floatVar, intVar, stringVar); 
```

[http://docs.oracle.com/javase/tutorial/java/data/strings.html](http://docs.oracle.com/javase/tutorial/java/data/strings.html) - 检查底部。

将其应用于 JSP。

```
<html>
    <head>
      <title>Concatenate String in JSP</title>
    </head>
    <body bgcolor="#fff">
        <% String tableName = "Table"; %>
        <% String login = "login"; %>
        <% String password = "myPassword"; %>
        <% String fullName = "Full Name"; %>
        <% String ulevel = "Level 1"; %>
        <% String msg = "INSERT INTO " + tableName + " (login,password,full_name,ulevel) VALUES ("+ login + ", "+password+","+fullName+", "+ulevel+")"; %>
        <% out.println(msg); %>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:26:37.673

我有：

```
<%
String login = request.getParameter("login");
String password = request.getParameter("password");
String full_name = request.getParameter("full_name");
String ulevel = request.getParameter("ulevel");
String team_id = request.getParameter("team_id");
String fs = String.format("insert into " + "%s " + "(login,password,full_name,ulevel) values " + "(%s,%s,%s,%s)", team_id, login, password, full_name, ulevel);

Connection connection = null;
PreparedStatement pstatement = null;
Class.forName("com.mysql.jdbc.Driver").newInstance();
int updateQuery = 0;
if (login != null && password != null && full_name != null && ulevel != null && team_id != null) {
    if (login != "" && password != "" && full_name != "" && ulevel != "" && team_id != "") {

        try {
            connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/coding", "root", "root");
            pstatement = connection.prepareStatement(fs);
            pstatement.setString(1, login);
            pstatement.setString(2, password);
            pstatement.setString(3, full_name);
            pstatement.setString(4, ulevel);
            updateQuery = pstatement.executeUpdate();
            if (updateQuery != 0) {

                response.sendRedirect("index.jsp");

            }
        } catch (Exception ex) {
            out.println("Unable to connect to database.");
            } finally {
            pstatement.close();
            connection.close();
        }
    }
} 
```

%>

参数`login,password,full_name,ulevel,team_id`来自其他源代码的html表单..

但这不起作用：/

# javascript - 如何在 JS 中实现动画粒子？

> ID：13387660
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:30:01.687
> 
> 标签：javascript

我的目标不是具有方向矢量的动画 gif，而是有趣地传播或创建额外的运动或视觉细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:34:46.103

所以这有三个部分。

1）如何显示粒子

2）我如何为它们设置动画

3）我如何让它们“有趣”

对，所以。

1 很简单。与往常一样，有十亿种方法。如果您愿意坚持使用现代浏览器并且对适度的质量结果感到满意，那么最简单的方法是只制作一个粒子的 PNG，然后创建一个`<img src="that">`,把它放在原点（我们现在说中心）并向外设置动画。也许淡入或其他。

2可能很容易。取决于很多选择。你能坚持只使用现代浏览器吗？如果您正在制作 iPhone 或 Win8 游戏，您确切地知道您的目标浏览器是什么，答案是肯定的。如果是网络，答案是否定的。如果您知道它是现代浏览器，请使用 CSS3 过渡，而且工作很简单。如果您不这样做，请使用 jQuery 或 Scriptaculous 之类的，而这非常简单。

3 ...呃，我的意思是，有趣是一个很难定义的词。从以波浪或螺旋形式发射它们开始。然后随机尝试。然后尝试半随机 - 你在明确定义的范围内发射它们，这样你会得到随机的外观，但你会得到很好的覆盖范围。看看子弹地狱游戏的灵感。

# vba - VBA 操作数据透视表内容

> ID：13387662
> 
> 赞同：2
> 
> 时间：2012-11-14T21:30:08.977
> 
> 标签：vba, excel

我正在使用 Excel 2010，我有一个奇怪的问题，我希望使用 VBA 来解决。

我有一个数据透视表，它从包含在单独数据表中的数据源中提取数据。此数据透视表最终将与其他人共享。

创建数据透视表后，我删除了工作表，因此原始数据不可见。最终，我想创建数据透视表中包含的内容的锁定视图，即我不想让用户在创建表后查看所有字段及其值（例如地址等）。

例如

如果我有以下数据集

```
ID  First Name  Last Name   Street            Salary
1   George  Bush            The Street        100
2   Peter   Sellers         2 The Close       200
3   Paul    Scholes         3 The Ness        400
4   David   Cameron         4 The Avenue      300
5   Robert  Redford         5 The Yard        250 
```

我创建数据透视表然后删除数据表，它仍然允许最终用户操作数据透视表中的所有列。为了简单起见，我想根据最终用户的类型隐藏某些字段，只是 Street 字段。如何从能够在数据透视表中使用的字段列表（使用 VBA）中删除此值？

# ruby-on-rails - 每个请求的 Ruby GC 执行超过 ~250-320ms

> ID：13387664
> 
> 赞同：13
> 
> 时间：2012-11-14T21:30:10.553
> 
> 标签：ruby-on-rails, ruby, performance, garbage-collection, latency

我有一个 ruby​​ on rails 应用程序。我正在调查我的 NewRelic 门户中的 Apdex 下降，我看到平均 250-320 毫秒的时间用于 GC 执行。这是一个非常令人不安的数字。我在下面包含了一个屏幕截图。

我的 Ruby 版本是：

ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]

任何调整这个的建议都是理想的。这个数字应该大大降低。

![在此处输入图像描述](../Images/ed489e3498695427c583b347e910e4bf.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T19:24:00.820

您在 GC 上花费了很多时间，因为您经常运行 GC。默认情况下，Ruby 设置适用于小型脚本而非大型应用程序的 GC 参数。尝试使用以下环境参数集启动您的应用程序：

```
RUBY_HEAP_MIN_SLOTS=800000
RUBY_FREE_MIN=100000
RUBY_GC_MALLOC_LIMIT=79000000 
```

这将做的是增加初始堆分配大小并填充 GC 编号，以便它不会经常运行。这可能会让你的应用程序使用更多的 RAM，但它应该会显着减少花费在 GC 上的时间。在默认设置下，您可能会在每个请求中多次运行 GC；理想情况下，您希望每隔几个请求运行一次（或者更好的是，在使用[Unicorn 的 OOB::GC 之](http://unicorn.bogomips.org/Unicorn/OobGC.html)类的请求之间）。

这些是我的应用程序的 GC 设置，您需要上下调整它们以最适合您的应用程序以找到正确的设置；你正在寻找一个中间地带，你不经常运行 GC，并且没有过多的内存使用。但是，这是针对每个应用程序的，因此对于这些确切设置应该是什么，我无法给出样板建议。从默认值（10k 个插槽，1.8 倍增长因子）增加应该会立即产生影响，您可以从那里上下调整以最适合您当前的情况。

[这里](http://www.coffeepowered.net/2009/06/13/fine-tuning-your-garbage-collector/)有这些参数的完整记录和更多信息[，](http://blog.evanweaver.com/2009/04/09/ruby-gc-tuning/)虽然这些帖子是为 REE 1.8.7 编写的，但它们也适用于 Ruby 1.9.2+。

这些是一些相当极端的数字，因此您可能正在应用程序中执行某些操作，导致您分配的 RAM 比应有的多得多，因此我鼓励您保持怀疑并梳理您的应用程序以寻找过度 -急切的分配。不过，GC 环境变量在任何情况下都应该有助于对情况进行分类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:33:07.837

您应该使用分配跟踪器来找出您的代码在哪里分配对象，以及分配对象的数量。我过去使用`memprof`过，效果很好……最大的缺点是它只能在 Ruby 1.8 下工作（希望你的代码与 1.8.7 兼容）。

如果您可以在 Ruby 1.8.7 下运行您的应用程序，则安装“memprof”gem，然后：

```
require 'memprof'
GC.disable
Memprof.track { run_test_code_here } 
```

这会将已分配对象计数的列表（按类和分配发生的源行分组）打印到标准输出。

当您在垃圾收集器中花费过多时间时遇到问题，分配跟踪通常会显示您的程序分配大量对象的一两个地方。不可能提前说出解决方案是什么，但通常会涉及：

1.  缓存结果以避免重复计算，
2.  在安全的情况下使用破坏性操作（例如`map!`代替`map`），
3.  在循环中重用临时对象（每次重置其状态）而不是在每次迭代时分配一个新对象，或
4.  避免在多次执行的循环中使用字符串常量（或数组/哈希字面量）（每次迭代都会分配一个新对象）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T23:42:16.713

还有[这个小技巧](https://github.com/floere/picky/blob/master/server/lib/picky/rack/harakiri.rb)，它可能会起作用。但是更大的应用程序往往会分配如此大量的内存，以至于您每次请求都会杀死一个工作人员：-/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T17:32:39.473

假设您没有错误地创建不需要的对象，我听说一种 hack/解决方案（除了使用 JRuby）是在完成发送响应后强制进行 GC。这样你就有了很大的停顿，但请求的消费者看不到它。如果你有这么多垃圾，你会看到像这样的多次停顿，那么你可能不走运。

这个技巧可能会也可能不会满足您的需求。

-JRuby 与有 MRI GC 问题的人交谈的人 :)

# javascript - HTML5 - 鼠标移动事件调用速度不够快

> ID：13387666
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:30:15.313
> 
> 标签：javascript, html, gwt

我在我的应用程序中的鼠标指针附近显示了一个小图像。我有一个错误，即图像跟随指针的速度不够快，并且因为鼠标移动事件调用速度不够快。

我想知道为什么会发生这种情况，我该如何改进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:33:27.847

如果您将鼠标移动到足够快的速度，那么它的移动方式将会有很大的跳跃——我认为您无法再完善它了。

# php - 在外部页面中间插入简码

> ID：13387671
> 
> 赞同：1
> 
> 时间：2012-11-14T21:30:30.733
> 
> 标签：php, wordpress

我在我的网站上显示来自供应商服务器的页面，并且想使用简码来设置内容布局的样式，该页面有一个 url `http://mysite.com/vendor_page`。

我做了一些研究并了解到我可以[`do_shortcode()`](http://codex.wordpress.org/Function_Reference/do_shortcode)用来回显短代码，但不确定如何在没有实际内容的外部页面上使用它，我可以使用我的 WordPress 可视化 html 编辑器进行编辑。

有点迷失在这里，希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:52:44.750

从[将 WordPress 与您的网站集成](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)：

> 为了将常规 PHP 页面转换为使用 WordPress 的页面，您需要将以下任一代码片段添加到每个页面的开头。
> 
> ```
> <?php 
> /* Short and sweet */
> define('WP_USE_THEMES', false);
> require('./wp-blog-header.php');
> ?>
> 
> <?php
> require('/the/path/to/your/wp-blog-header.php');
> ?> 
> ```

我从来没有试过这个，所以我不确定在哪里找到文件，但是在它包含之后你应该可以访问 Wordpress 功能。传递任何包含短代码的字符串，`do_shortcode()`您将获得替换后的短代码的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:53:35.700

要`do_shortcode()`在 a 中使用函数，`template/php file`您必须首先`shortcode`在您的`functions.php`喜欢中创建/注册 a

```
add_shortcode('my_test_shortCode', 'my_test_shortCode_func');
function my_test_shortCode_func()
{
    return "my_test_shortCode_func working...!"; // or whatever you want
} 
```

然后在你的模板/php文件中你可以直接调用它

```
<?php echo do_shortcode('[my_test_shortCode]');?> 
```

结果它会`my_test_shortCode_func working...!`在`do_shortcode`.

# mysql - tungsten Replicator 可以通过 ODBC 和标准 SQL 连接到 sqlserver 吗？

> ID：13387672
> 
> 赞同：1
> 
> 时间：2012-11-14T21:30:32.470
> 
> 标签：mysql, sql-server, replication, heterogeneous

Tungsten 似乎支持 ODBC 连接，但不清楚与 sqlserver 的连接是否有效。有什么想法吗？

我希望将 sqlserver 作为源，将 MySQL 作为目标。删除并替换所有数据可能没问题。

如果不是钨，还有其他工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T15:08:58.437

我使用链接服务器作为在 mysql 和 SqlServer 之间共享数据的一种方式，然后将触发器从 sqlServer 发送到 mysql 链接服务器。

如果触发器对您不起作用，另一个更好的选择是在 sqlserver 和 mysql 链接服务器之间设置复制。

[http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql/](http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql/)

[http://dbperf.wordpress.com/2010/07/22/link-mysql-to-ms-sql-server2008/](http://dbperf.wordpress.com/2010/07/22/link-mysql-to-ms-sql-server2008/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:08:38.617

**Navicat Premium**
链接： http: [//www.navicat.com/en/products/navicat_premium/premium_overview.html](http://www.navicat.com/en/products/navicat_premium/premium_overview.html)

我曾经将数据从 SQL Server 复制到 PostgreSQL它接受
DB: `MySQL`、`PostgreSQL`、`Oracle`和`SQLite``SQL Server`

# html - 将表格列的宽度与固定宽度表格中的文本匹配 (HTML/CSS)

> ID：13387676
> 
> 赞同：4
> 
> 时间：2012-11-14T21:30:40.600
> 
> 标签：html, css, html-table, formatting

我有一个日志条目表，我想用两列显示：时间戳和日志条目本身。表格具有固定宽度。我希望时间戳列拉伸以适合时间戳本身的文本并且不再进一步，然后让表格的其余宽度被消息占用。我希望时间戳文本始终为一行，并让日志消息环绕。我有那部分工作，但对于我的生活，我无法弄清楚如何使列宽适合时间戳的文本宽度。我可以做一个固定的像素宽度，但这似乎很可疑。

编辑：更新代码示例：（http://jsfiddle.net/GH7jj/7/）

```
<div class="MainDiv">
<table class="LogTableStyle">
<tr>
    <th>Time</th>
    <th>Message</th>
</tr>
<tr>
    <td class="LogTime">11/07/2012 07:38:14</td>
    <td class="LogMessage">There was something that happened at this point.  This is a pretty long message though.  It should be wrapping around.  I want the timestamp to be on that one line while giving this message as much room as possible.  That'd be cool.</td>
</tr>
</table>
</div>​ 
```

和CSS：

```
.MainDiv {
    min-width:300px;
    max-width:500px;
    height:100%;
    background-color:#F0F0FF;
    margin:auto;
}
.LogTableStyle {
    width:97%;
    margin:auto;
    border-collapse:collapse;
    table-layout:fixed;
}
.LogTableStyle th {
    font-family:Verdana, Geneva, sans-serif;
    font-size:14px;
    background-color:#333;
    color:#FFF;
    border:solid 1px #000;
    padding:3px;
    border-left-style: none;
    border-right-style: none;
}
.LogTableStyle td {
    font-family:Verdana, Geneva, sans-serif;
    font-size:11px;
}
.LogTime {
    white-space:nowrap;
}
.LogMessage {
    overflow:hidden;
    text-overflow:ellipsis;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:28:53.647

```
/* http://jsfiddle.net/oatkiller/GH7jj/9/ */

.LogTableStyle {
    width:97%;
    margin:auto;
    border-collapse:collapse;
} 
```

我刚刚从您的 CSS 中删除了 table-layout: fixed。这是你打算做的吗？

来自 w3schools 的报价：

auto
自动表格布局算法（这是默认值）：列宽由单元格中最宽的不可破坏内容设置可能很慢，因为它需要在确定最终布局之前通读表格中的所有内容

固定 固定表格布局算法：水平布局只取决于表格的宽度和列的宽度，而不是单元格的内容允许浏览器布局表格比自动表格布局更快浏览器可以开始显示表格一旦收到第一行

[http://www.w3schools.com/cssref/pr_tab_table-layout.asp](http://www.w3schools.com/cssref/pr_tab_table-layout.asp)

# java - 如何让在不同对象中创建的事件编辑变量？

> ID：13387679
> 
> 赞同：0
> 
> 时间：2012-11-14T21:30:44.513
> 
> 标签：java, object, actionlistener

这是一些具有 2 个对象的示例代码。用于轻松创建面板和侦听器的面板对象，以及用于执行代码的框架对象。目的是让代码显示在 answertext 字段中按下了哪个按钮。但是，我看不到可以编译它的方法，因为我在任何地方制作 answertext 都超出了我需要的其他东西的范围。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class myPanel extends JPanel implements ActionListener  {

public myPanel(int start, int numOfButtons){

    setLayout(new FlowLayout(FlowLayout.LEFT, 10, 20));

    JButton buttons[] = new JButton[numOfButtons];

    for (int k = start; k < start + numOfButtons; k++){

            buttons[ k ] = new JButton("Button " + k);
            this.add( buttons[k] );
            buttons[ k ].addActionListener(this); 
    }

}

public void actionPerformed(ActionEvent e)
{
    myFrame.setText(e.getActionCommand()); 
}

}

public class myFrame extends JFrame{

public myFrame()
{

super("myFrame");

myPanel buttonPanel1 =  new myPanel(1, 3);
myPanel buttonPanel2 =  new myPanel(4, 3);

JPanel answerPanel = new JPanel();

JTextField answertext;
answertext = new JTextField(10);
answertext.setEditable(false);
answerPanel.add(answertext);

setSize(300,200);
setLocationRelativeTo(null);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setLayout( new GridLayout(3,1) );
setTitle("ShowPressedButton");

add(buttonPanel1);
add(answerPanel);       
add(buttonPanel2);

pack();
setVisible(true);   
}

public void setText(string input)
{
    answertext = input;
}

public static void main(String[] args) {
    myFrame showButton = new myFrame();

    showButton.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );

}

} 
```

我放了一个公共方法来设置答案文本，以便我的面板可以设置它，但是编译器说当我尝试编译时它找不到该方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:02:25.937

向 myPanel 类添加一些变量

```
class myPanel extends JPanel implements ActionListener {
   private List<ActionListener> actionListeners = new ArrayList<ActionListener>();

   public myPanel(final int start, final int numOfButtons) {
     // same code 
   }

   public void actionPerformed(final ActionEvent e) {
     for (final ActionListener listener : actionListeners) {
       listener.actionPerformed(e);
     }
   } 

   public void addActionListener(final ActionListener listener) {
     actionListeners.add(listener)
   } 
   // todo: remove / reset ActionListener ...
} 
```

在此之后，您可以在您的类 myFrame 中添加一个 ActionListener，女巫知道 JTextfield 并可以对其进行操作。将这个新的 ActionListener 添加到 myPanel 框架后，您应该知道按下了哪个按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:34:11.960

在您的 mypanel 类中实现此功能

```
public JTextField get(){
  return answerText;
} 
```

然后在 myframe 中，使用您的 mypanel 类对象调用上述方法

# java - Android - 如何检测 SIP/Voip 通信正在发生。

> ID：13387689
> 
> 赞同：1
> 
> 时间：2012-11-14T21:31:38.207
> 
> 标签：java, android, events, sip, voip

我正在尝试编写一个听众，它可以告诉我我通过 Voip 交谈了多长时间。由于 SIP 接缝是最流行的，所以到目前为止我一直专注于这一点。我有一个作为后台服务运行的应用程序来执行此检测。

有什么方法可以检测到其他应用程序是否发生了 SIP/Voip 通信？就 SIP 而言，到目前为止我所看到的一切都要求我了解 SIP 配置文件。我的应用程序是完全独立的。除了检测到 Voip 呼叫已经开始和结束之外，我不需要对它做任何事情。

因此，我考虑过检查麦克风和耳机是否同时处于活动状态，然后使用[TrafficStats](http://developer.android.com/reference/android/net/TrafficStats.html)来查看应用程序是否正在发送和接收数据。但到目前为止，我也无法让这个工作。

有人对如何做到这一点有一些建议吗？示例代码非常感谢。

干杯!

# reporting-services - SSRS参数取值关系

> ID：13387690
> 
> 赞同：3
> 
> 时间：2012-11-14T21:31:39.093
> 
> 标签：reporting-services, parameters

我知道这可能很容易解决，但我一直在尝试正确编码。

我从数据集中的查询中提取了一列`customerID`和一列。用于其他查询（等）。当我设计报告时，我希望能够将匹配项放在一个文本框中，而不是我在其他查询中实际用作参数的（我可以简单地通过拖放来完成）。`CustomerName``Customers``customerID``GetBalance``@CustomerName``@customerID`

我感觉它与“查找”表达式有关，但我不确定如何写

我试过了，但没有用

```
=Lookup(Parameters!customerID.Value, 
        Fields!CustID.Value, Fields!CustAlias.Value, "Customers")` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:46:22.650

参数是具有属性`Value`（由@ParameterName 引用）和`Label`（为选择该参数值而显示的内容）的对象。在您的情况下，`customerID`参数从您的查询中获取其值和标签。因此，`@customerID`将是参数的值。但是，参数的所有属性都可以通过`Parameters`集合引用。

使用它作为你的文本框表达式：

```
=Parameters!customerID.Label 
```

# assembly - 如何使用windbg到达入口点

> ID：13387691
> 
> 赞同：4
> 
> 时间：2012-11-14T21:31:40.960
> 
> 标签：assembly, windbg

嗨，我在理解如何使用 windbg 时遇到了一些麻烦。到目前为止，我只使用 IDA pro free 和 ollydbg 来读取由 Visual Studio 编译器 cl.exe 生成的程序集，而这正是我只想使用 windbg 来做的。我没有在我的程序中添加任何调试信息，我只想查看程序集。基本上我遇到的问题是我无法进入我的可执行文件的入口点。加载可执行文件后，windbg 会打印一些关于未找到符号文件的警告，我不在乎，因为断点无法让我到达任何地方，我决定只需重复“越过”几次即可到达那里（这是“p”对吗？ ）。调试从 ntdll 中的一些高地址开始，经过几个步骤后，它会在调用 NtContinue 并显示“无调试错误”后停止调试。谢谢你，斯图。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T19:55:57.913

`$exentry`当前进程的第一个可执行文件的入口点地址。注意：如果您使用 CRT，那么这将是 CRT 的 main，最终会调用您的 main。

于是试着`u $exentry`开始拆机。你最终会找到调用你的 main 的调用指令。

# javascript - 我可以在javascript中覆盖构造函数吗？

> ID：13387692
> 
> 赞同：6
> 
> 时间：2012-11-14T21:31:42.713
> 
> 标签：javascript

我刚刚了解到我[可以覆盖](https://stackoverflow.com/questions/13383345/how-do-i-access-this-javascript-property)Javascript 类中的方法，如下所示，但是实际的构造函数呢？

如果可能的话，如何在不实例化类的情况下做到这一点？

```
var UserModel = (function() {
  var User;
  User = function() {}; // <- I want to overwrite this whilst keeping below methods
  User.prototype.isValid = function() {};
  return User;
})(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T21:39:52.517

只是暂时保存`prototype`对象，然后替换构造函数：

```
var proto = UserModel.prototype;
UserModel = function () { /* new implementation */ };
UserModel.prototype = proto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:41:14.483

基本上，您创建一个什么都不做的临时函数，您将其原型设置为具有父类的原型，然后您可以将基类用作父类而不调用其构造函数。

如果需要从子类的构造函数中引用父类的构造函数，只需要使用`Function.prototype.apply`转发构造函数调用即可。

Javascript继承模型：

```
// Base class

var Base = function ( ) {
    this.foo = 40;
};

Base.prototype.bar = function ( ) {
    return this.foo;
};

// Inherited class

var Child = function ( ) {
    Base.apply( this, arguments );
    this.foo += 2;
};

var F = function ( ) { };
F.prototype = Base.prototype;
Child.prototype = new F( ); 
```

# r - ggplot2箱线图对齐绘制一张图

> ID：13387697
> 
> 赞同：0
> 
> 时间：2012-11-14T21:31:58.897
> 
> 标签：r, ggplot2, boxplot

我正在努力从数据框中绘制箱线图。我有一个数据框 df ，其中包含 3 列：`df$A`, `df$B`, `df$C`. 我想`df$C`在 X 轴上绘制一个图表`df$A`，并`df$B`在 Y 轴上绘制箱线图。因此，对于 x 轴的每个值，它应该是两个值`df$A`和`df$B`。我想让框为 X 轴 ( `df$C`) 的每个值对齐。我尝试使用交互在列中组合 ( `A`, `B`) 然后像这样绘制它：

```
df$AandB <- interaction(df$A, df$fB)

ggplot(aes(y = AandB, x = df$C), data = df) + geom_boxplot() 
```

但它没有用。它只显示了水平线-抱歉，我是新用户，无法上传图像。

我发现了一些使用填充或颜色的建议，但没有奏效。

有什么建议么？

我的df样本：

```
 A         B         C  
 200.12    30.11       28.75 
 100.75    26.17       29.98        
 27.33      25.58      34.98 
 25.19      22.6       35.56 
 40.03      21.02      37.51 
 20.3       18.31      44.75 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:33:55.407

数据：

```
df <- read.table(text="A         B         C  
200.12    30.11       28.75 
100.75    26.17       29.98        
27.33      25.58      34.98 
25.19      22.6       35.56 
40.03      21.02      37.51 
20.3       18.31      44.75", header = TRUE) 
```

首先，数据需要以长格式排列。和的值`A`与包`B`合并在一列中`reshape2`。

```
library(reshape2)
df_l <- melt(df, id.vars = "C") 
```

现在，可以创建绘图：

```
library(ggplot2)
ggplot(df_l, aes(x = C, y = value)) + 
  stat_summary(aes(group = C),
               fun.y = mean, fun.ymin = min, fun.ymax = max, geom = "crossbar") 
```

横线表示数据的范围和平均值。 ![在此处输入图像描述](../Images/33842fda2681a33b7d80d9fea961f93c.png)

# authentication - 当“隐式”流程运行良好时，为什么 OAuth2 中有“授权码”流程？

> ID：13387698
> 
> 赞同：317
> 
> 时间：2012-11-14T21:32:00.263
> 
> 标签：authentication, oauth, oauth-2.0

通过“隐式”流程，在资源所有者（即用户）授予访问权限后，客户端（可能是浏览器）将获得访问令牌。

然而，使用“授权码”流程，客户端（通常是 Web 服务器）只有在资源所有者（即用户）授予访问权限后才能获得授权码。然后，客户端使用该授权代码再次调用 API，将 client_id 和 client_secret 与授权代码一起传递以获取访问令牌。[一切都在这里描述得很好](https://aaronparecki.com/articles/2012/07/29/1/oauth2-simplified)。

两个流程都有完全相同的结果：访问令牌。但是，“隐式”流程要简单得多。

问题：**当“隐式”流接缝很好时，为什么还要打扰“授权码”流？为什么不对网络服务器也使用“隐式”？**

对于提供者和客户来说，这都是更多的工作。

* * *

## 回答 #1

> 赞同：351
> 
> 时间：2012-11-14T23:41:47.690

**tl;dr：**这都是出于安全原因。

OAuth 2.0 希望满足这两个标准：

1.  您希望允许开发人员使用非 HTTPS 重定向 URI，因为并非所有开发人员都拥有启用 SSL 的服务器，并且如果他们这样做，则并不总是正确配置（非自签名、受信任的 SSL 证书、同步的服务器时钟......）。
2.  您不希望黑客能够通过拦截请求来窃取访问/刷新令牌。

**详情如下：**

由于安全原因，隐式流仅在浏览器环境中是可能的：

在**隐式流**中，访问令牌直接作为散列片段（而不是 URL 参数）传递。关于散列片段的一件重要事情是，一旦您点击包含散列片段的链接，只有浏览器知道散列片段。浏览器会将哈希片段直接传递到目标网页（重定向 URI / 客户端网页）。哈希片段具有以下属性：

*   它们不是 HTTP 请求的一部分，因此它们不能被服务器读取，因此它们不能被中间服务器/路由器拦截（这很重要）。
*   它们只存在于浏览器 - 客户端 - 因此读取哈希片段的唯一方法是使用在页面上运行的 JavaScript。

这使得可以将访问令牌直接传递给客户端，而不会被中间服务器拦截。这有一个警告，即仅可能是客户端，并且需要运行客户端的 javascript 才能使用访问令牌。

隐式流程还存在安全问题，需要进一步的逻辑来解决/避免，例如：

*   攻击者可以从不同网站/应用程序上的用户获取访问令牌（假设他是另一个网站/应用程序的所有者），在他们的网站上记录令牌，然后将其作为 URL 参数传递到您的网站因此在您的网站上冒充用户。为避免这种情况，您需要检查与访问令牌关联的客户端 ID（例如，对于 Google，您可以使用 tokeninfo 端点）以确保令牌是使用您自己的客户端 ID（即由您自己的应用程序）颁发的或检查签名如果您使用的是 IDToken（但这需要您的客户端密码）。
*   如果身份验证请求不是来自您自己的财产（称为会话固定攻击），为避免这种情况，您需要从您的网站生成随机散列，将其保存在 cookie 中并在状态 URL 参数中传递相同的散列身份验证请求，当用户回来时，您使用 cookie 检查状态参数，它必须匹配。

在**授权代码流**中，无法直接在 URL 参数中传递访问令牌，因为 URL 参数是 HTTP 请求的一部分，因此您的请求将通过的任何中间服务器/路由器（可能是数百个）都可以如果您没有使用允许所谓的中间人攻击的加密连接 (HTTPS)，请阅读访问令牌。

理论上，直接在 URL 参数中传递访问令牌是可能的，但身份验证服务器必须确保重定向 URI 使用带有 TLS 加密的 HTTPS 和“受信任的”SSL 证书（通常来自非免费的证书颁发机构）以确保目标服务器是合法的并且 HTTP 请求是完全加密的。让所有开发人员都购买 SSL 证书并在他们的域上正确配置 SSL 将是一个巨大的痛苦，并且会大大减慢采用率。这就是为什么提供了一个中介一次性使用“授权码”，只有合法的接收者才能交换（因为您需要客户端密码），并且该代码对于拦截未加密交易请求的潜在黑客将无用（因为他们不

您还可以争辩说隐式流的安全性较低，存在潜在的攻击媒介，例如在重定向时欺骗域 - 例如通过劫持客户端网站的 IP 地址。这就是为什么隐式流只授予访问令牌（应该有有限的时间使用）并且从不刷新令牌（时间是无限的）的原因之一。为了解决这个问题，我建议您尽可能将您的网页托管在支持 HTTPS 的服务器上。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-10-02T17:44:04.630

**隐式流程使整个流程非常容易，但也不太**安全。
由于客户端应用程序（通常是在浏览器中运行的 JavaScript）不太受信任，因此不会返回用于长期访问的刷新令牌。
您应该将此流程用于需要临时访问（几个小时）用户数据的应用程序。
将访问令牌返回给 JavaScript 客户端还意味着您的基于浏览器的应用程序需要特别小心——想想可能会将访问令牌泄漏到其他系统的 XSS 攻击。

[https://labs.hybris.com/2012/06/05/oauth2-the-implicit-flow-aka-as-the-client-side-flow](https://labs.hybris.com/2012/06/05/oauth2-the-implicit-flow-aka-as-the-client-side-flow)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-09-08T10:19:04.670

**对于 Google 员工：**

*   您将 Gmail 联系人的访问权限授予第 3 方
*   以令牌的形式授予访问权限
*   任何拥有有效令牌的人都将获得访问权限
*   所以你不想暴露代币，并尽量减少它的转移
*   通过隐式流程，（不受控制的）浏览器获取访问令牌，从而将令牌公开
*   使用身份验证代码流，浏览器只会获得临时身份验证代码，但不会获得访问令牌，身份验证代码也无用，没有只有第 3 方和 Gmail 知道的秘密

**结论**

*   攻击者要获得对您的 Gmail 联系人的访问权限，它必须侵入您的第 3 方帐户
*   但是，攻击者永远不会保留访问令牌，因此无法直接对您的 Gmail 联系人执行操作
*   您可以授权第 3 方访问许多服务，因此您不希望将所有重要令牌本地存储在您的计算机上
*   但是，有一种情况只能使用隐式流：当第 3 方在本地运行，并且没有后端来存储令牌时
*   那么它只能依靠前端来存储令牌，它几乎没有控制权

**隐喻**

*   隐式流程：您向 PROVIDER 索要密钥，您将其存放在您的钱包中，您负责保管它，您直接小心使用密钥，并及时将其换成新密钥
*   验证码流程：您要求一个代码，代码被交给您的代客，您的代客将代码和一个秘密文本结合起来，然后与提供者交换一个密钥，您要求您的代客在需要时使用密钥，但永远不会看到密钥你自己，你的代客负责交换新的钥匙
*   大多数时候，您的代客比您更具有安全意识 :)
*   当您没有代客泊车时，您只能靠自己

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-24T08:44:34.153

从[OAuth 规范](https://www.rfc-editor.org/rfc/rfc6749#section-4.2)：

> 4.2\. 隐式授权
> 
> 隐式授权类型用于获取访问令牌（它不支持发布刷新令牌）并针对已知操作特定重定向 URI 的公共客户端进行了优化。这些客户端通常使用 JavaScript 等脚本语言在浏览器中实现。
> 
> 由于这是一个基于重定向的流程，客户端必须能够与资源所有者的用户代理（通常是 Web 浏览器）进行交互，并且能够接收来自授权服务器的传入请求（通过重定向）。
> 
> 与授权码授予类型不同，在这种授权类型中，客户端分别发出授权请求和访问令牌请求，客户端接收访问令牌作为授权请求的结果。
> 
> 隐式授权类型不包括客户端身份验证，并且依赖于资源所有者的存在和重定向 URI 的注册。因为访问令牌被编码到重定向 URI 中，所以它可能会暴露给资源所有者和驻留在同一设备上的其他应用程序。

所以我们可以考虑：

1.  这适用于公共 OAuth，即当客户端不需要注册并且没有自己的客户端机密时。但是什么身份验证服务器检查重定向 url，这实际上足以保证安全。

2.  访问令牌出现在浏览器的地址栏中，因此用户可以复制 url 并将其发送给其他人，它也会以用户身份登录，即类似于会话固定。但是浏览器会通过替换历史记录来进行额外的重定向，以从 url 中删除哈希片段。黑客也可以通过嗅探 HTTP 流量来窃取访问令牌，但这很容易被 HTTPS 保护。一些恶意浏览器扩展可以从地址栏访问 url，但这最终是糟糕的情况，比如损坏的 HTTPS 证书。甚至 Auth 代码流在这里也无济于事。所以我可以看到，通过 url 的哈希片段传递访问令牌是绝对安全的。

3.  在使用 HTTPS 时，临时访问令牌和刷新令牌的分离是没有用的，老实说，即使在原始 HTTP 上也没那么有用。但是客户端通过隐式流无法接收刷新令牌的事实也是无稽之谈。

因此我认为我们应该引入一个新的“安全隐式”授权流程，它严格在 https 上工作，允许刷新令牌（或者我们应该完全摆脱它们），并且比 Auth Cose 授权流程更可取

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-01-13T17:57:26.830

对我们来说，我们的客户希望能够在他们的手机上使用我们的应用程序进行一次身份验证，而不必一次重新登录数周。使用代码流，您将获得一个刷新令牌以及您的访问令牌。隐式流程不会为您提供刷新令牌。访问令牌的有效期相对较短，但刷新令牌的有效期最长为 90 天。每当访问令牌过期时，客户端和服务器代码都可以使用该刷新令牌来获取新的访问令牌和刷新令牌，所有这些都在后台进行，无需任何用户干预。刷新令牌只能使用一次。你不能用隐式流来做到这一点。如果您使用的是隐式流程，并且您的用户超过一个小时没有与您的应用程序交互，那么当他们回来时，他们将不得不再次登录。这在我们的用例中是不可接受的，

这有效且安全，因为可以撤销刷新令牌。如果客户说他们丢失了手机或笔记本电脑，或者黑客进入了他们的桌面，我们可以简单地撤销该用户的所有刷新令牌。在整个过程中，任何个人身份信息 (PII) 都不会触及我们的代码——即用户密码。

代码流很棒，但确实需要更多的工作。MS 目前没有 Angular 库来处理它，所以我不得不写一个。如果你有兴趣，我可以帮你。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-29T21:54:39.007

我的回答是：你不能用 web-app 服务器以安全简单的方式实现隐式流。

Web 应用授权过程涉及用户交互，因此身份验证服务器应在用户身份验证和同意后将用户的浏览器*重定向*回 Web 应用的目标页面（在与认证服务器）。

所以应该使用重定向 URL 将令牌传递给 web-app，对吗？

正如@NicolasGarnier 在他的回答和评论中解释的那样，没有办法将令牌作为 URL 片段传递 - 它不会到达网络应用服务器。

即使在 HTTPS 下，将令牌作为重定向 URL 的 URL 参数传递也是不安全的：如果目标页面（让它成为“问候页面”）包含资源（图像、脚本等），则该资源将由浏览器通过系列获取HTTP(S) 请求的数量（每个请求都有`Referer`HTTP 标头，其中包含“问候页面”的确切 URL，包括 URL 参数）。这就是令牌泄漏的方式。

所以似乎没有办法在重定向 URL 中传递令牌。这就是为什么您需要第二次调用（从身份验证服务器到客户端（但到哪个 URL？）或从客户端到身份验证服务器（授权代码流中的第二次调用））

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-06T07:26:51.030

在“隐式”流程中，客户端（可能是浏览器）将通过浏览器重定向（GET 操作）获得访问令牌。基于浏览器的通信不安全，您的客户端机密或令牌可能会被拦截或窃取。

在“授权码”流程中，客户端（通常是 Web 服务器）仅通过浏览器重定向（GET 操作）获得授权码。然后服务器通过对授权服务器进行（非浏览器）POST 调用来将此代码与令牌交换。服务器仅包含用于令牌访问调用的客户端密码。

注意 - 根据[oauth 最佳实践](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics-15)，“客户端不应使用隐式授权（响应类型“令牌”）或其他响应类型在授权响应中发布访问令牌”。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-21T14:28:51.693

谈到授权代码授予类型，我们通过删除对客户端（用户代理或网站）的最终资源的特权访问来获得更高的安全性，其中客户端（网站所有者）使用您的授权假装是您代码，以及避免黑客在您的浏览器上使用 XSS（网站漏洞）进行 CRSF，如果使用隐式方法可能会发生这种情况。

关键成分是客户端 ID，它出现在向 Auth 服务器发出的第一个请求中。您可以将 Auth Code 步骤视为签名验证。

此外，即使完成了获取访问令牌的授权代码步骤，最终，access_token 最终还是在客户端手中。那时，验证服务器不再需要客户端 ID 来进行签名验证。因此，我不确定授权代码方法是否也完全安全（来自客户端本身）。这就是为什么即使在提供登录凭据后，身份验证服务器也会要求您同意的原因。这意味着您使用访问令牌信任客户端。

# iphone - 编辑时如何更改 UITextField 中的颜色

> ID：13387701
> 
> 赞同：0
> 
> 时间：2012-11-14T21:32:05.347
> 
> 标签：iphone, objective-c, ios, uitextfield

我有带有灰色文本“用户名”的 UITextField，而该字段不是由 user 选择的。当用户选择此字段并开始输入他的用户名时，如何将颜色更改为黑色？对不起我的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:42:25.553

我认为你以错误的方式接近它。根据我的阅读，我认为您需要使用“占位符”文本。
打开您的 xcode 项目，转到您的 .xib 或 .storyboard 文件，单击您的`UITextField`并在文本字段中输入“用户名” `Placeholder`，如下图所示：
![在此处输入图像描述](../Images/eded3fe5f806b72541ccea5a01985adb.png)

`placeholder`文本是灰色文本，当您为`UITextField`空时显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:41:25.177

将`placeholder`UITextField 的属性用于将替换为任何用户输入的灰色文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:48:12.027

只需将`placeHolder`文本设置为“用户名”，它将以灰色显示，然后将 textField 的 textColor 设置为黑色，这样当您开始编辑时，您将使用 blackcolor 进行编辑

# entity-framework - 将 EF 5 数据库的第一个 Poco 类移动到单独的项目 vs2012 EF5

> ID：13387706
> 
> 赞同：1
> 
> 时间：2012-11-14T21:32:39.137
> 
> 标签：entity-framework, visual-studio-2012, entity-framework-5, poco, database-first

关于如何将`model.tt`（包含 POCO 实体类）文件移动到 Vs2010 中的单独项目的问题，我已经看到了几个答案

这似乎在 EF5 中不起作用，原因似乎是该`model.tt`文件是 edmx 文件的子项。

如何在 Entity Framework 5 / VS 2012 中实现相同的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:43:37.997

我知道的最佳答案是简单地从当前项目中剪切 model.tt（插入适当的名称）文件并将其添加到所需的项目中。出于这个原因，我甚至重写了 EF 使用的 .tt 文件。

我喜欢关注点分离，并将适当的 .tt 文件放在以下项目中：DataAccess (model.context.tt)、Entity (model.tt) 和 Repository (model.repository.tt)。当然，您必须摆弄 .tt 文件的内容才能将其指向 .edmx，但这很简单。要使所有 t4 转换发生，VS2012 中有一个选项，Build | 转换所有 T4，这将处理解决方案中的所有 T4 文件。

遵循这个过程：

如果 .edmx 尚不存在，请创建它。

右键单击，选择“添加代码生成项”以添加 EF DbContext 5.0 生成器（如果您尚未这样做）（我假设这是您想要修改的，但此过程适用于任何 t4）。

这将为您提供两个 .tt 文件 - 模型和 model.context。

拖放到 Windows 资源管理器，在目录中找到 model.tt 文件，将其复制到“实体”目录（您希望 t4 生成到的任何位置）。

回到 VS，将其从 .edmx 项目中删除，然后将“添加现有项”添加到新项目中。

例如，如果您的两个项目如上命名（DataAccess 包含 .edmx，Entity 包含模型信息），那么您需要在值中更改 model.tt 文件中输入文件的名称（行5) "const string inputFile = "name of .edmx" 到 "..\Directory contains .edmx\name of .edmx"。

运行 T4，它就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:10:09.030

如果您的意思是未生成代码，则它是一个错误。这是我们用来跟踪它的错误[http://entityframework.codeplex.com/workitem/453](http://entityframework.codeplex.com/workitem/453) - 它包含一些解决方法。另一个选项是通过右键单击 tt 文件并选择“运行自定义工具”来强制生成代码

# android - 试图建立“你好，世界！” 使用 Jelly Beans 新的低级媒体 API 的媒体播放器活动

> ID：13387707
> 
> 赞同：3
> 
> 时间：2012-11-14T21:32:44.520
> 
> 标签：android, media-player, android-4.2-jelly-bean, audiotrack

我正在尝试测试新的低级媒体 API 功能、MediaExtractor 和 MediaCodec。我正在遵循本指南：

[http://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/](http://dpsm.wordpress.com/2012/07/28/android-mediacodec-decoded/)

我把这个函数放在一起，其中`songsList.get(songIndex).get("songPath")`是另一个函数给出的 mp3 文件的路径。

```
 /**
 * Attempts at API level 16 implementation
 * 
 * MediaExtractor, MediaCodec and AudioTrack to play audiofiles
 * 
 * */

public void JBPlay(int songIndex) {
    String LOG_TAG="JB";

    //AssetFileDescriptor sampleFD = getResources().openRawResourceFd(R.raw.sample);
    //AssetFileDescriptor sampleFD = getAssets().openFd(songsList.get(songIndex).get("songPath"));
    // getResources().openRawResourceFD(songsList.get(songIndex).get("songPath"));

    //Log.d("FD: ", sampleFD.toString());

    MediaExtractor extractor;
    MediaCodec codec;
    ByteBuffer[] codecInputBuffers;
    ByteBuffer[] codecOutputBuffers;

    extractor = new MediaExtractor();
    extractor.setDataSource(songsList.get(songIndex).get("songPath"));
    //extractor.setDataSource(sampleFD.getFileDescriptor(),
        //  sampleFD.getStartOffset(), sampleFD.getLength());

    Log.d(LOG_TAG, String.format("TRACKS #: %d", extractor.getTrackCount()));
    MediaFormat format = extractor.getTrackFormat(0);
    String mime = format.getString(MediaFormat.KEY_MIME);
    Log.d(LOG_TAG, String.format("MIME TYPE: %s", mime));

    codec = MediaCodec.createDecoderByType(mime);
    codec.configure(format, null /* surface */, null /* crypto */, 0 /* flags */);
    codec.start();
    codecInputBuffers = codec.getInputBuffers();
    codecOutputBuffers = codec.getOutputBuffers();

    extractor.selectTrack(0); // <= You must select a track. You will read samples from the media from this track!

    boolean sawInputEOS=false;
    int inputBufIndex = codec.dequeueInputBuffer(1000);//1 second timeout ???
    if (inputBufIndex >= 0) {
        ByteBuffer dstBuf = codecInputBuffers[inputBufIndex];

        int sampleSize = extractor.readSampleData(dstBuf, 0);
        long presentationTimeUs = 0;
        if (sampleSize < 0) {
            sawInputEOS = true;
            sampleSize = 0;
        } else {
            presentationTimeUs = extractor.getSampleTime();
        }

        codec.queueInputBuffer(inputBufIndex,
                               0, //offset
                               sampleSize,
                               presentationTimeUs,0);
                               //sawInputEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : 0);
        if (!sawInputEOS) {
            extractor.advance();
        }
     }

    AudioTrack audioTrack = null;
    BufferInfo info = null;
    Boolean sawOutputEOS=false;
    final int res = codec.dequeueOutputBuffer(info, 1000);
    if (res >= 0) {
     int outputBufIndex = res;
     ByteBuffer buf = codecOutputBuffers[outputBufIndex];

     final byte[] chunk = new byte[info.size];
     buf.get(chunk); // Read the buffer all at once
     buf.clear(); // ** MUST DO!!! OTHERWISE THE NEXT TIME YOU GET THIS SAME BUFFER BAD THINGS WILL HAPPEN

     if (chunk.length > 0) {
     audioTrack.write(chunk, 0, chunk.length);
     }
     codec.releaseOutputBuffer(outputBufIndex, false /* render */);

     if ((info.flags & MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {
     sawOutputEOS = true;
     }
    } else if (res == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
     codecOutputBuffers = codec.getOutputBuffers();
    } else if (res == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
     final MediaFormat oformat = codec.getOutputFormat();
     Log.d(LOG_TAG, "Output format has changed to " + oformat);
     audioTrack.setPlaybackRate(oformat.getInteger(MediaFormat.KEY_SAMPLE_RATE));
    }
           // EDIT nov. 16: addition of play() causes crash!
           //audioTrack.play()

} 
```

它似乎没有抛出任何重大错误，但没有声音，并且在日志中有一条消息“libwvm.so not found”和“OMX_getExtensionIndex failed”。在我尝试使用日志编写代码之前，也许有人有一些想法。我正在使用 Jelly Bean 版本 4.1.2 运行 AVD，我无法从 Eclipse 进行调试，所以我只使用日志来捕获错误。

编辑十一月 16：我忘记了明显的 audioTrack.play() 函数，但这会导致崩溃，因此再次将其注释掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T11:39:44.550

在我的代码中，我在构建 AudioTrack 之后就获得了 audioTrack.play() 并且它可以工作。您是否确定已在设备上调高音量？起初我犯了那个错误，显然什么也听不见。您还可以使用 AudioManager 调高音量。

# typescript - TypeScript 语言服务示例

> ID：13387728
> 
> 赞同：18
> 
> 时间：2012-11-14T21:34:18.887
> 
> 标签：typescript

TypeScript 带有源代码、测试和一些示例，并且编译器显然具有用于 AST 操作以及代码完成和着色等功能的 API。

但是，我找不到任何有关如何使用该 API 的示例。有没有人试图理解它？也许一些博主？

我能找到的唯一例子是[一些基本的 Sublime Text 插件](https://github.com/stoffera/sublimetext2-typescript-plugin/blob/master/sublimeTS/scriptInfo.ts)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-05-05T17:00:32.070

我处于同样的情况 - 这是我到目前为止的进步：

我制作的教程 - 实现一个语言服务插件，添加自动完成和重构建议，源代码记录了很多细节：[https ://cancerberosgx.github.io/typescript-plugins-of-mine/sample-ts-插件1/src/](https://cancerberosgx.github.io/typescript-plugins-of-mine/sample-ts-plugin1/src/)

有关文档，请从此处开始：[https](https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API) ://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API - 其中包含使用编译器的片段，除其他外，如何将 ts 代码编译为 AST，如何使用服务语言，转译为 js，访问 ast ，修改并打印回 ts 字符串。

如果你想实现代码完成、重构等，那么你想开发一个服务语言插件。这是一个“入门” [https://github.com/Microsoft/TypeScript/wiki/Writing-a-Language-Service-Plugin](https://github.com/Microsoft/TypeScript/wiki/Writing-a-Language-Service-Plugin)

然后你可以开始玩我的 TypeScript 编译器 API Playground。它包含几个可以在线编辑和执行的示例 [https://typescript-api-playground.glitch.me/](https://typescript-api-playground.glitch.me/)

此外，我强烈建议尽可能使用此库，因为它具有高级 API：[https ://github.com/dsherret/ts-simple-ast/](https://github.com/dsherret/ts-simple-ast/)

最后，我收集的带有有用重构的 TypeScript 语言服务插件（基于 ts-simple-ast）[https://github.com/cancerberoSgx/typescript-plugins-of-mine/tree/master/typescript-plugin-proactive-代码修复](https://github.com/cancerberoSgx/typescript-plugins-of-mine/tree/master/typescript-plugin-proactive-code-fixes)

我对这个问题很满意，因为文档不好，它是一个重要的 API，也许这有助于组织打字稿插件的集中目录，有人知道这样的东西是否存在吗？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T21:56:25.320

如果您看一下，`src\harness\fourslash.ts`您会看到测试语言服务 (in `tests\ls\fourslash\`) 的测试是如何编写的。该文件使用在`src\harness\harness.ts`管理语言服务运行的环境中实现的模拟“主机”。这些测试处理成员和完成列表、类型信息、格式设置、重命名、查找引用等内容。

# php - 将数组从控制器传递到视图 - Codeigniter

> ID：13387729
> 
> 赞同：3
> 
> 时间：2012-11-14T21:34:24.020
> 
> 标签：php, codeigniter, undefined, pass-data

我尝试在控制器中打印数组，然后将其传递给视图，这是输出

```
Array ( [annunci] => Array ( [0] => stdClass Object ( [EmailDatore] => you@welcom.it [Nome] => asdasd [Cognome] => asdas [IdAnnuncio] => 9 [Titolo] => sfsdfdsfshrea [Testo] => agrefdgdagdfg [Categoria] => [Sede] => [TipoContratto] => [Add_Date] => [Drop_Date] => ) 
[1] => stdClass Object ( [EmailDatore] => you@welcom.it [Nome] => asdasd [Cognome] => asdas [IdAnnuncio] => 10 [Titolo] => fafa [Testo] => fafaerea asdasdas dafasfd [Categoria] => [Sede] => [TipoContratto] => [Add_Date] => [Drop_Date] => ) ) ) 
```

我在我的主控制器中从此方法获取数组

```
 public function get_annunci(){

    $query=$this->user_model->annunci($this->email);        
    print_r($query);        
    } 
```

我想将此数组传递给视图，然后读取数据。所以我像这样重写我的方法

```
public function get_annunci(){
    $query=$this->user_model->annunci($this->email);        
    $this->load->view('main_view',$query);      
} 
```

在主视图中我有这个

```
<div class="tab-pane active" id="annunci">
    <ul>
        <?php
        print_r($annunci);
        ?>
    </ul>
</div> 
```

这是我的错误

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: annunci

Filename: views/tab_annunci_view.php

Line Number: 4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:41:14.857

这是因为您尚未定义 $annunci 并使其可用于视图。您需要先将其加载到视图中

**控制器**

```
$data['id'] = $yourArray;
$this->load->view('your_view_file', $data); 
```

**看法**

```
 <?php print_r($id); ?> //prints $yourArray 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-20T06:36:29.020

```
public function index()
    {
        $data=$this->model->viewBlog();
        $this->load->view('blog/index',['data'=>$data]);
    } 
```

我希望这是工作。如果您处理 n 条记录，请使用此方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T21:38:29.890

（更改`$query`为`$query ['annunci']`）好的，`$query`已经是一个数组，然后只需将视图文件更改为'tab_annunci_view'

所以：

```
public function get_annunci(){
    $query=$this->user_model->annunci($this->email);        
    $this->load->view('tab_annunci_view',$query);      
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T22:25:25.920

```
public function get_annunci(){
    $query['annunci']=$this->user_model->annunci($this->email);        
    $this->load->view('main_view',$query);      
} 
```

您正在传递数组，但没有将 anninci 作为变量传递。

# html - 如何让视频标签与 fanxybox 一起使用？

> ID：13387730
> 
> 赞同：0
> 
> 时间：2012-11-14T21:34:35.580
> 
> 标签：html, fancybox, html5-video

我想使用 HTML5`<video>`标签和 fancybox 播放视频，链接指向 youtube 视频？

到目前为止，这是我的代码

```
<video width="480" height="270" controls="controls" poster="../images/youtube-logo.png">
  <source src="http://o-o---preferred---sn-5hn7snl7---v12---lscache8.c.youtube.com/videoplayback?upn=paJG2CcEhGw&amp;sparams=cp%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&amp;fexp=906356%2C910014%2C914093%2C922401%2C920704%2C912806%2C927201%2C922403%2C925003%2C913546%2C913556%2C916805%2C920201%2C901451&amp;ms=au&amp;expire=1352949266&amp;itag=46&amp;ipbits=8&amp;gcr=nl&amp;sver=3&amp;ratebypass=yes&amp;mt=1352923510&amp;ip=83.83.121.109&amp;mv=m&amp;source=youtube&amp;key=yt1&amp;cp=U0hUR1lPV19LUENONF9RSUFDOjBkVU41a1M4UEVp&amp;id=d72f1d6250563a1e&amp;signature=6C5130076CA770F67B4C797191BC0997EA040B74.10D3AEAA60E7AE1CF1D49DACF7178F3FCBBD56AE" type="video/mp4">
  <source src="http://o-o---preferred---sn-5hn7snl7---v12---lscache8.c.youtube.com/videoplayback?upn=paJG2CcEhGw&amp;sparams=cp%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&amp;fexp=906356%2C910014%2C914093%2C922401%2C920704%2C912806%2C927201%2C922403%2C925003%2C913546%2C913556%2C916805%2C920201%2C901451&amp;ms=au&amp;expire=1352949266&amp;itag=46&amp;ipbits=8&amp;gcr=nl&amp;sver=3&amp;ratebypass=yes&amp;mt=1352923510&amp;ip=83.83.121.109&amp;mv=m&amp;source=youtube&amp;key=yt1&amp;cp=U0hUR1lPV19LUENONF9RSUFDOjBkVU41a1M4UEVp&amp;id=d72f1d6250563a1e&amp;signature=6C5130076CA770F67B4C797191BC0997EA040B74.10D3AEAA60E7AE1CF1D49DACF7178F3FCBBD56AE" type="video/ogg">
  <source src="http://o-o---preferred---sn-5hn7snl7---v12---lscache8.c.youtube.com/videoplayback?upn=paJG2CcEhGw&amp;sparams=cp%2Cgcr%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&amp;fexp=906356%2C910014%2C914093%2C922401%2C920704%2C912806%2C927201%2C922403%2C925003%2C913546%2C913556%2C916805%2C920201%2C901451&amp;ms=au&amp;expire=1352949266&amp;itag=46&amp;ipbits=8&amp;gcr=nl&amp;sver=3&amp;ratebypass=yes&amp;mt=1352923510&amp;ip=83.83.121.109&amp;mv=m&amp;source=youtube&amp;key=yt1&amp;cp=U0hUR1lPV19LUENONF9RSUFDOjBkVU41a1M4UEVp&amp;id=d72f1d6250563a1e&amp;signature=6C5130076CA770F67B4C797191BC0997EA040B74.10D3AEAA60E7AE1CF1D49DACF7178F3FCBBD56AE" type="video/webm">
Your browser does not support the video tag.
<iframe width="480" height="270" type="application/x-shockwave-flash"
src="http://www.youtube.com/embed/1y8dYlBWOh4?wmode=opaque">
</iframe>
</video> 
```

如您所见，我还添加了一个`iframe`标签来支持旧版浏览器。

但是经过一些调整后，我无法在视频标签中的任何视频中打开所有内容？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:57:16.637

直接的 YouTube 链接被“刷新”，虽然它们在第二天工作了片刻，但它们不再工作，因为链接被“损坏”。

在 html5 中播放 youtube 视频的最佳方式是这样的

```
<iframe width="480" height="270"
src="http://www.youtube.com/embed/1y8dYlBWOh4?html5=1">
</iframe> 
```

`html5=1`告诉 Youtube 使用 html5 来播放视频，而不是 flash ！

# c# - 使用 EF 5.0 查找表

> ID：13387731
> 
> 赞同：1
> 
> 时间：2012-11-14T21:34:39.383
> 
> 标签：c#, entity-framework

我是使用 EF 的新手，但我无法抗拒这个概念，现在我被困住了。我正在开发一个网络表单来代替纸质调查。数据结构有大量的查找表。我已经构建了基于 EF 的数据访问层 (DAL)。我想创建一个用户控件，它可以传递与查找表关联的实体，然后简单地将该实体绑定到下拉列表，但是，我正在努力实现这一点所需的反射。

我的代码如下：

```
 using System;
    using System.Collections.Generic;
    using System.Data.Entity;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;

namespace ABC.ABC.Controls
{
    public partial class ABCQuestionSingle : System.Web.UI.UserControl
    {
        CareDAL.ABC.Entities DAL = new CareDAL.ABC.Entities();

        private string dataTextField;
        public string DataTextField
        {
            get { return dataTextField; }
            set { dataTextField = value; }
        }

        private string dataValueField;
        public string DataValueField
        {
            get { return dataValueField; }
            set { dataValueField = value; }
        }

        private string entityName;
        public string EntityName
        {
            get { return entityName; }
            set { entityName = value; }
        }

        //I've tried this unsuccessfully!
        public List<TEntity> GetList<TEntity>(string _name)
        {
            IEnumerable<TEntity> enumerable = (IEnumerable<TEntity>)(typeof(CareDAL.NDNQI.DST_ABCEntities).GetProperty(_name).GetValue(DAL, null));
            return enumerable.ToList();
        }

        protected void Page_Load(object sender, EventArgs e)
        {

            ddlResponse.DataTextField = "PrimaryReason";
            ddlResponse.DataValueField = "ReasonId";
            ddlResponse.DataSource = DAL.PrimaryReasons.ToList();
            ddlResponse.DataSource = GetList(entityName); //Obvious error, but not sure how to handle this!
            ddlResponse.DataBind();
        }
    }
} 
```

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:50:33.777

```
public partial class ABCQuestionSingle : System.Web.UI.UserControl
{
    public void LoadDropDown<T>(string valueProperty, string textProperty)
        where T : class
    {
        ddlResponse.DataTextField = textProperty;
        ddlResponse.DataValueField = valueProperty;
        ddlResponse.DataSource = new CareDAL.ABC.Entities().Set<T>();
        ddlResponse.DataBind();
    }
} 
```

然后，您可以从调用页面的加载事件（或任何其他事件）调用此方法

# c++ - 用相同的数据填充数组对象还是使用指针？

> ID：13387735
> 
> 赞同：1
> 
> 时间：2012-11-14T21:34:49.503
> 
> 标签：c++, object, pointers

我正在使用 c++ 开发游戏，但我不知道解决我的问题的更好方法是什么。我有一个包含`gameObject`对象的数组，每个对象都有一个包含动画帧的数组，我循环播放这些动画帧以显示游戏中的动画。动画是基于时间的，我必须告诉对象自显示最后一帧以来已经过去了多少时间（`deltaTime`）来计算我将在此迭代中显示的帧。一切都还好，直到这里。可以`deltaTime`使用 setter 方法将对象提供给对象吗？或者如果我在每个对象中都有一个指向全局变量的指针会更好？还是在性能和​​组织方面有另一种更好的方法？请记住，将有数百个对象。感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:41:10.730

一般来说，避免使用全局变量。只需遍历对象，传递`deltaTime`给每个对象：

```
for (auto &gameObject : gameObjects)
{
    gameObject.Update(deltaTime);
} 
```

不建议将时间存储在每个对象中，因为您认为“将来”可能需要它的任何事情，您都应该在`Update`.

# javascript - 在 javascript 中有条件地实例化模块模式的一个实例

> ID：13387736
> 
> 赞同：3
> 
> 时间：2012-11-14T21:34:51.010
> 
> 标签：javascript, module-pattern

我正在尝试公开一个模块。我只想向所有调用者公开它的一个实例，并且我想等到调用模块来实例化它。我试图这样做：

```
var obj = {};

var foobar = function(){
 var id=22;
 function GetId(){ return ++id; }
 return{ GetId: GetId };
};

obj.foobar = (function(){
    if (obj.foobar instanceof foobar) {
         return obj.foobar;
    }
    return new foobar();
})();

console.log(obj.foobar.GetId());//23
console.log(obj.foobar.GetId());//24 
```

但实际上它只是一个混淆

```
obj.foobar = new foobar(); 
```

我的意图是在第一次调用`obj.foobar = new foobar()`时实例化`obj.foobar.GetId()`，第二次`obj.foobar.GetId()`调用使用已经实例化的版本。尽管此处不存在，但存在需要等待实例化的依赖项，`new foobar();`因此无法立即执行。

我怎么能做到这一点，我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:52:28.777

每次访问时都可以使用函数调用`foobar`：

```
obj.foobar = (function() {
  var inst;
  return function() {
    return inst || (inst = foobar());
  };
})();

console.log(obj.foobar().GetId()); // 23 
```

如果目标执行环境支持它们，您还可以使用 ECMAScript 5 的命名访问器属性：

```
Object.defineProperty(obj, "foobar", {
  get: (function() {
    var inst;
    return function() {
      return inst || (inst = foobar());
    };
  })()
});

console.log(obj.foobar.GetId()); // 23 
```

或者，如果您知道可以调用的方法列表`foobar`，您可以使用更复杂的解决方案：

```
obj.foobar = (function() {
  var inst, res = {}, methods = ["GetId"];
  function createLazyMethod(method) {
    return function() {
      if (!inst) {
        obj.foobar = inst = foobar();
      }

      return inst[method].apply(inst, methods.slice.call(arguments, 0));
    };
  }

  for (var i = 0; i < methods.length; ++i) {
    res[methods[i]] = createLazyMethod(methods[i]);
  }

  return res;
})();

console.log(obj.foobar.GetId()); // 23 
```

使用此解决方案，一旦`foobar`被实例化，对其方法的调用就会以零成本进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:50:50.513

> 我的意图是在第一次调用`obj.foobar = new foobar()`时实例化`obj.foobar.GetId()`

不，那行不通。如果调用该`getId`方法，则必须已经存在一个对象。`foobar`您可以为在访问时创建实例的属性定义一个 getter 函数`obj`，或者您只是在之前实例化它（就像您在 IEFE 中所做的那样，并且可以更短地完成分配，正如您所说的那样）。

通常，您会使用每次调用的函数（也可以是构造函数），如果它已经创建，则返回单例，否则它会创建一个并存储它：

```
var obj = {
    foobar: (function iefe() {
        var id, instance;
        return function constructor() {
            if (!instance) { // create it
                id = 22;
                instance = {
                    getId: function getID(){
                        return ++id;
                    }
                };
            }
            return instance;
        };
    })();
};

obj.foobar().getId() // 23
obj.foobar().getId() // 24 
```

# r - 使用 Knitr 和 stargazer 的回归表

> ID：13387738
> 
> 赞同：5
> 
> 时间：2012-11-14T21:34:56.750
> 
> 标签：r, latex, regression, knitr

我正在尝试使用 knitr 和 stargazer 将回归表从 R 导出到 Latex。不幸的是，我收到以下错误消息 *“缺少 $ 已插入”我已经插入了一个 begin-math/end-math 符号，因为我认为你遗漏了一个。继续，手指交叉。*
我是否遗漏了代码中的任何内容，或者这可能是 stargazer 包中的错误？
关于如何一起使用 knitr 和 stargazer 的任何提示？

```
\documentclass{article}   
\begin{document}   
%Load dataset and run regression    

 << lm, echo=FALSE >>=  
load('dataset.RData')  
library(stargazer)  
lm1 <- lm(y~ x ,data=dataset)  
@

<< table_texstyle, echo=FALSE, comment=NA, results='asis' >>=  
stargazer(lm1)  
@  
\end{document} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T03:54:00.393

stargazer v.2.0 现已在 CRAN 上推出，应该能够毫无问题地处理包含美元符号和下划线的变量名。尝试安装新版本，然后再次运行您的代码 - 您应该没有任何问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T00:26:45.620

它适用于我在 Ubuntu 12.04、TeXLive 2012 和 R 2.15.2 下。

```
\documentclass{article}   
\begin{document}   
<<lm, echo=FALSE >>=  
df <- data.frame(x=1:10, y=rnorm(10))
library(stargazer)  
lm1 <- lm(y ~ x ,data=df)  
@

<<table_texstyle, echo=FALSE, results='asis' >>=  
stargazer(lm1)  
@  
\end{document} 
```

你没有告诉我们是什么`dataset`（我们不知道你的`dataset.RData`），所以我们不能真正知道失败的原因是什么。至少您需要粘贴 tex 输出，例如

```
% Table created by StarGazer v.1.0 by Marek Hlavac, Harvard University. E-mail: mhlavac at alumni.princeton.edu
% Date and time: Wed, Nov 14, 2012 - 06:20:12 PM
\begin{table}[htb] \centering 

....

\end{table} 
```

所以我们知道问题是否来自 LaTeX。

# r - 如何在R中的grid_legend中将符号设置为行

> ID：13387740
> 
> 赞同：1
> 
> 时间：2012-11-14T21:35:04.940
> 
> 标签：r, r-grid

我在 R 的新网格页面中绘制图例。代码如下：

```
grid.newpage()
grid_legend(x=unit(0.5, "npc"),y=unit(0.1, "npc"), pch = c(1,1), col = c("red", "blue"), labels = c("Loess Regression", "Linear Regression"), title = "Line") 
```

我想将符号更改为线，因为我正在绘制回归线。另外，我想在一行中制作两个标签。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T07:50:28.340

我猜你指的是 R 包 vcd 中的函数 grid_legend() 。

在下面找到更灵活的修改版本，允许绘制线条而不是符号。

（生成该图的代码也已发布。）

![在此处输入图像描述](../Images/9dc21705881e6470b3c4e3d0d2542a02.png)

```
grid_legend <- function (x, y, pch = NA, col = par('col'), labels, frame = TRUE, 
  hgap = unit(0.8, "lines"), vgap = unit(0.8, "lines"), default_units = "lines", 
  gp = gpar(), draw = TRUE, title = NULL, just = 'center', lwd = NA, lty = NA, 
  gp.title = NULL, gp.labels = NULL, gp.frame = gpar(fill = "transparent")) 
{

  if(is.character(x))
    switch(x,
           topleft = {x = unit(0,'npc'); y = unit(1,'npc'); just = c(0,1)},
           topright = {x = unit(1,'npc'); y = unit(1,'npc'); just = c(1,1)},
           bottomright = {x = unit(1,'npc'); y = unit(0,'npc'); just = c(1,0)},
           bottomleft = {x = unit(0,'npc'); y = unit(0,'npc'); just = c(0,0)})

  labels <- as.character(labels)
  nlabs <- length(labels)

  if(length(pch) == 1)
    pch <- rep(pch, nlabs)
  if(length(lwd) == 1)
    lwd <- rep(lwd, nlabs)
  if(length(lty) == 1)
    lty <- rep(lty, nlabs)
  if(length(col) == 1)
    col <- rep(col, nlabs)
  if(length(gp.labels) == 1)
    gp.labels <- rep(list(gp.labels), nlabs)

  if (is.logical(title) && !title) 
    title <- NULL
  ifelse(is.null(title), tit <- 0, tit <- 1)

  if (!is.unit(hgap)) 
    hgap <- unit(hgap, default_units)
  if (length(hgap) != 1) 
    stop("hgap must be single unit")
  if (!is.unit(vgap)) 
    vgap <- unit(vgap, default_units)
  if (length(vgap) != 1) 
    stop("vgap must be single unit")

  if(tit)
    legend.layout <- grid.layout(nlabs + tit, 3,
                                 widths = unit.c(unit(2, "lines"),
                                 max(unit(rep(1, nlabs), "strwidth", as.list(c(labels))),
                                 unit(1, "strwidth", title) - unit(2, "lines")), hgap),
                                 heights = unit.pmax(unit(1, "lines"),
                                 vgap + unit(rep(1, nlabs + tit ),
                                           "strheight", as.list(c(labels,title)))))
  else
     legend.layout <- grid.layout(nlabs, 3, widths = unit.c(unit(2, 
      "lines"), max(unit(rep(1, nlabs), "strwidth", as.list(labels))), 
      hgap), heights = unit.pmax(unit(1, "lines"), vgap + unit(rep(1, 
      nlabs), "strheight", as.list(labels))))

  fg <- frameGrob(layout = legend.layout, gp = gp)

  if (tit)
    fg <- placeGrob(fg, textGrob(title, x = .2, y = 0.5, just = c("left", "center"), gp = gp.title), col = 1, row = 1)

  for (i in 1:nlabs) {
    if(!is.na(pch[i]))
      fg <- placeGrob(fg, pointsGrob(0.5, 0.5, pch = pch[i], gp = gpar(col = col[i])), col = 1, row = i + tit)
      else if(!is.na(lwd[i]) || !is.na(lty[i]))
        fg <- placeGrob(fg, linesGrob( unit(c(0.2, .8), "npc"),  unit(c(.5), "npc"), 
                                gp = gpar(col = col[i], lwd = lwd[i], lty=lty[i])), col = 1, row = i + tit)

    fg <- placeGrob(fg, textGrob(labels[i], x = .1, y = 0.5, just = c("left", "center"), gp = gp.labels[[i]]), col = 2, row = i + tit)
  }

  pushViewport(viewport(x, y, height = grobHeight(fg), width = grobWidth(fg), just = just ))

  if (frame) 
    fg <- placeGrob(fg, rectGrob(gp = gp.frame))
  if (draw) 
    grid.draw(fg)
  popViewport(1)
  invisible(fg)
} 
```

例子

```
require(grid)
png("grid_legend.png", 500, 400)
grid.newpage()
pushViewport(viewport(height = .9, width = .9 ))
grid.rect(gp = gpar(lwd = 2, lty = 2))

grid_legend(x = unit(.05,'npc'),
            y = unit(.05,'npc'),
            just = c(0,0),
            pch = c(1,2,3),
            col = c(1,2,3),
            lwd=NA, 
            lty=NA,
            labels = c("b",'r','g'),
            title = NULL,
            gp=gpar(lwd=2, cex=1),
            hgap = unit(.8, "lines"),
            vgap = unit(.9, "lines"))

grid_legend(x = unit(1,'npc'),
            y = unit(1,'npc'),
            just = c(1,1),
            pch = NA,
            col = c(1,2,3,4),
            lwd=c(1,1,1,3), 
            lty=c(1,2,1,3),
            labels = c("black",'red','green','blue'),
            gp.labels = list(gpar(col = 1), gpar(col = 2), 
                             gpar(col = 3), gpar(col = 4)),
            title = NULL,
            gp=gpar(lwd=2, cex=1),
            hgap = unit(.8, "lines"),
            vgap = unit(.9, "lines"))

grid_legend(x = 'topleft',
            pch = c(1,NA,2,NA),
            col = c(1,2,3,4),
            lwd=NA, 
            lty=c(NA,2,NA,3),
            labels = c("black",'red','green','blue'),
            title = 'Some LONG Title',
            gp.title = gpar(col = 3),
            gp.frame = gpar(col = 4, lty = 2, fill = "transparent"),
            gp.labels = gpar(col = 6),
            gp=gpar(lwd=2, cex=2, col = 1),
            hgap = unit(.8, "lines"),
            vgap = unit(.9, "lines"))

grid_legend(x = .7,
            y = .7,
            pch = c(1,NA,2,NA),
            col = c(1,2,3,4),
            lwd=1, 
            lty=c(NA,2,NA,3),
            labels = c("black",'red','green','blue'),
            title = 'short T',
            gp=gpar(lwd=1, cex=.7,col = 1),
            hgap = unit(.8, "lines"),
            vgap = unit(.9, "lines"))

grid_legend(x = 'bottomright',
            pch = c(1,NA,2,NA),
            col = c(2),
            lwd=NA, 
            lty=c(NA,2,NA,3),
            labels = c("black",'red','green','blue'),
            title = NULL,
            gp=gpar(lwd=2, cex=1,col = 1),
            hgap = unit(.8, "lines"),
            vgap = unit(.9, "lines"))
dev.off() 
```

# java - 使用 .equals() 和 == 运算符比较两个对象

> ID：13387742
> 
> 赞同：89
> 
> 时间：2012-11-14T21:35:08.390
> 
> 标签：java, class, object, methods, equals

我用一个`String`字段构建了一个类。然后我创建了两个对象，我也必须使用`==`运算符来比较它们`.equals()`。这是我所做的：

```
public class MyClass {

    String a;

    public MyClass(String ab) {
        a = ab;
    }

    public boolean equals(Object object2) {
        if(a == object2) { 
            return true;
        }
        else return false;
    }

    public boolean equals2(Object object2) {
        if(a.equals(object2)) {
            return true;
        }
        else return false;
    }

    public static void main(String[] args) {

        MyClass object1 = new MyClass("test");
        MyClass object2 = new MyClass("test");

        object1.equals(object2);
        System.out.println(object1.equals(object2));

        object1.equals2(object2);
        System.out.println(object1.equals2(object2));
    }

} 
```

编译后，结果显示两次错误。如果两个对象具有相同的字段 - “测试”，为什么它是错误的？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-11-14T21:38:53.127

`==`比较对象引用，它检查两个操作数是否指向同一个对象（不是*等价*对象，**同一个**对象）。

如果要比较字符串（查看它们是否包含相同的字符），则需要使用`equals`.

在您的情况下，如果真的两个实例`MyClass`在字符串匹配时被认为是相等的，那么：

```
public boolean equals(Object object2) {
    return object2 instanceof MyClass && a.equals(((MyClass)object2).a);
} 
```

...但是通常，如果您要定义一个类，则等效性不仅仅是单个字段的等效性（`a`在这种情况下）。

* * *

旁注：如果您覆盖`equals`，您几乎总是需要覆盖[`hashCode`](http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--)。正如它在[`equals`JavaDoc](http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-)中所说：

> 请注意，每当重写此方法时，通常都需要重写该`hashCode`方法，以维护该`hashCode`方法的通用合同，该合同规定相等的对象必须具有相等的哈希码。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-07-15T11:38:20.277

你应该覆盖等于

```
 public boolean equals (Object obj) {
     if (this==obj) return true;
     if (this == null) return false;
     if (this.getClass() != obj.getClass()) return false;
     // Class name is Employ & have lastname
     Employe emp = (Employee) obj ;
     return this.lastname.equals(emp.getlastname());
 } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-22T20:25:03.973

比较 2 个对象的最佳方法是将它们转换为 json 字符串并比较字符串，这是处理复杂的嵌套对象、字段和/或包含数组的对象时最简单的解决方案。

样本：

```
import com.google.gson.Gson;

Object a = // ...;
Object b = //...;
String objectString1 = new Gson().toJson(a);
String objectString2 = new Gson().toJson(b); 

if(objectString1.equals(objectString2)){
    //do this
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-01T13:00:32.443

覆盖函数 equals() 是错误的。对象“a”是**String**类的一个实例，“object2”是**MyClass**类的一个实例。它们是不同的类，所以答案是“假的”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-14T21:38:38.447

看起来`equals2`只是在打电话`equals`，所以它会给出相同的结果。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-14T21:38:02.177

您的`equals2()`方法将始终返回与`equals()`!!

**你的代码**和我的评论：

```
public boolean equals2(Object object2) {  // equals2 method
    if(a.equals(object2)) { // if equals() method returns true
        return true; // return true
    }
    else return false; // if equals() method returns false, also return false
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-01T09:01:27.963

语句`a == object2`和 `a.equals(object2)`两者都将始终返回`false`，因为`a`is a `string`while`object2`是`MyClass`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-10-31T15:52:12.153

您的实现必须像：

```
public boolean equals2(Object object2) {
    if(a.equals(object2.a)) {
        return true;
    }
    else return false;
} 
```

有了这个实现，你的两种方法都可以工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-10-09T19:09:13.180

您的类可能会实现 Comparable 接口以实现相同的功能。你的类应该实现接口中声明的 compareTo() 方法。

```
public class MyClass implements Comparable<MyClass>{

    String a;

    public MyClass(String ab){
        a = ab;
    }

    // returns an int not a boolean
    public int compareTo(MyClass someMyClass){ 

        /* The String class implements a compareTo method, returning a 0 
           if the two strings are identical, instead of a boolean.
           Since 'a' is a string, it has the compareTo method which we call
           in MyClass's compareTo method.
        */

        return this.a.compareTo(someMyClass.a);

    }

    public static void main(String[] args){

        MyClass object1 = new MyClass("test");
        MyClass object2 = new MyClass("test");

        if(object1.compareTo(object2) == 0){
            System.out.println("true");
        }
        else{
            System.out.println("false");
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-10-19T18:23:25.057

仅当两个引用指向内存中的同一对象时，“==”运算符才返回 true。另一方面，equals() 方法根据对象的内容返回 true。

例子：

```
String personalLoan = new String("cheap personal loans");
String homeLoan = new String("cheap personal loans");

//since two strings are different object result should be false
boolean result = personalLoan == homeLoan;
System.out.println("Comparing two strings with == operator: " + result);

//since strings contains same content , equals() should return true
result = personalLoan.equals(homeLoan);
System.out.println("Comparing two Strings with same content using equals method: " + result);

homeLoan = personalLoan;
//since both homeLoan and personalLoan reference variable are pointing to same object
//"==" should return true
result = (personalLoan == homeLoan);
System.out.println("Comparing two reference pointing to same String with == operator: " + result); 
```

输出：使用 == 运算符比较两个字符串：false 使用 equals 方法比较两个具有相同内容的字符串：true 使用 == 运算符比较指向同一字符串的两个引用：true

您还可以从以下链接获取更多详细信息：http: [//javarevisited.blogspot.in/2012/12/difference-between-equals-method-and-equality-operator-java.html ?m=1](http://javarevisited.blogspot.in/2012/12/difference-between-equals-method-and-equality-operator-java.html?m=1)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-01T07:16:44.133

如果不需要自定义默认的 toString() 函数，另一种方法是重写 toString() 方法，该方法返回所有要比较的属性。然后比较两个对象的 toString() 输出。我使用 IntelliJ IDEA IDE 生成了 toString() 方法，该方法在字符串中包含类名。

```
public class Greeting {
private String greeting;

@Override
public boolean equals(Object obj) {
    if (this == obj) return true;
    return this.toString().equals(obj.toString());
}

@Override
public String toString() {
    return "Greeting{" +
            "greeting='" + greeting + '\'' +
            '}';
}
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-08-06T20:36:20.157

object.equals 的返回类型已经是布尔值。无需将其包装在带有分支的方法中。因此，如果您想比较 2 个对象，只需比较它们：

```
boolean b = objectA.equals(objectB); 
```

b 已经是真或假。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-09-08T03:59:30.733

当我们使用 == 时，比较的是对象的引用而不是实际的对象。我们需要重写 equals 方法来比较 Java 对象。

一些附加信息 C++ 有运算符重载，而 Java 不提供运算符重载。Java中的其他可能性也是实现**比较接口**。它定义了一个比较方法。

**比较器接口**也用于比较两个对象

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-07-06T14:26:40.977

这里的输出将是 false ， false 因为在第一个 sopln 语句中您试图将 Myclass 类型的字符串类型变量与其他 MyClass 类型进行比较，并且由于两者都是 Object 类型并且您使用了“==”运算符将检查保存实际内存的参考变量值，而不是内存中的实际连接。在第二个 sopln 中，它也与您再次调用 a.equals(object2) 相同，其中 a 是 object1 内部的一个变量。请让我知道您对此的发现。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2014-05-14T15:17:11.757

在下面的代码中，您正在调用重写方法 .equals()。

public boolean equals2(Object object2) { if(a.equals(object2)) { // 这里你调用了被覆盖的方法，这就是你得到 false 2 次的原因。返回真；} 否则返回假；}

# objective-c - 在仅单例类的非初始化方法名称中使用“init”的 ARC 含义是什么

> ID：13387744
> 
> 赞同：2
> 
> 时间：2012-11-14T21:35:18.230
> 
> 标签：objective-c, ios, ios6, singleton, automatic-ref-counting

因此，我的理解是，如果该方法没有实现初始化对象的新实例，则不建议在方法名称中使用 init。但是，单例类型类是什么情况？如果我做这样的事情：

```
+ (MyClass*) sharedInstance {

    __block MyClass *sharedInstance = nil;
    static dispatch_once_t once_token;
    dispatch_once(&once_token, ^{
        sharedInstance = [[MyClass alloc] init];
    });

    return sharedInstance;
} 
```

然后有另一种方法：

```
- (void) initializeInstance {
  // Do some stuff
  // Never call the init method
} 
```

如果我这样做，是否会有额外的保留周期或其他奇怪的 ARC 行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T21:44:23.760

方法`-initializeInstance`不是问题。这并没有被归入该`init`家族，因此编译器不会对其进行特殊处理。根据[文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#family)，要归入`init`家族，必须满足以下规则：

1.  选择器的第一个组件必须是`init`，或者必须以 开头，`init`后跟小写字母以外的任何字符。`initializeInstance`不符合这个规则。
2.  此外，该`init`方法必须返回一个 Obj-C 对象。`initializeInstance`也不符合这个规则。我相信如果违反此规则会导致编译时错误，而不是简单地不将该方法视为`init`.

# facebook - 如何修改 Facebook Like 看起来像这样

> ID：13387745
> 
> 赞同：0
> 
> 时间：2012-11-14T21:35:19.690
> 
> 标签：facebook, facebook-like

我正在尝试在我的网站上实现 Facebook Like 按钮，但在自定义其外观时遇到问题。我一直在使用[Facebook Like Button Generator](http://developers.facebook.com/docs/reference/plugins/like/)，我认为将布局样式更改为 Button_Count 可以解决我的问题，但它似乎并没有以任何方式改变外观。

生成器吐出的代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.google.ca" data-send="true" data-width="450" data-show-faces="true"></div> 
```

我更关心Like按钮右侧的文字。目前，右边的文字对于我的网站来说太长了。我想知道是否有替代方法，以便我可以缩短文本以显示我有多少喜欢？

![在此处输入图像描述](../Images/a477a5ae7adfd9c307d50ef4eeb4f15b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:39:27.977

将`data-layout="button_count"`属性添加到按钮元素，因为它似乎丢失了。这将呈现更紧凑的按钮版本。

来源：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# php - 使用 mysqli 在表中显示结果

> ID：13387758
> 
> 赞同：1
> 
> 时间：2012-11-14T21:36:19.820
> 
> 标签：php, mysqli

所以我的朋友刚刚更改了我的 php，所以我正在使用 mysqli，在对我的代码稍作修改后，我仍然收到：致命错误：调用 C:\wamp\www\web2\database.php 中未定义的方法 mysqli::fetch_object()在第 44 行

```
 <?php
class Database 
{ 
 public $server = "localhost";
 public $database = "database"; 
 public $user = "root"; 
 public $password = ""; 
 public $row;
 public $result;
 public $sqlExtra = " ORDER BY firstname ASC";
 public $dbLocalHost;

 //call connection method upon constructing 
 public function __construct(){
  $this->createConnection(); 
 }

 //connection to the database
 public function createConnection() 
    { 
     $this->dbLocalhost = new mysqli($this->server, $this->user, $this->password, $this->database)
                or die("could not connect:");

      //mysql_select_db($this->database)
       //
       //  or die("Could not find the database: ".mysql_error());

 } 

 //execute query string 
 public function query($queryString) 
    {

        $result = $this->dbLocalhost->query($queryString);

        while($row = $this->dbLocalhost->fetch_object($result))
        {
            echo "<tr><td>".$row[0]."</td><td>".$row[1]."</td><td>".$row[2]."</td></tr>";
        }

    } 

    public function newRecord($fname, $lname)
    {
        $firstname = $fname;
        $lastname = $lname;

        $this->emptyCheck($firstname, $lastname);
        $this->insert($firstname, $lastname);
    }

    function insert($fname, $lname)
    {
        $insert = "INSERT INTO table (firstname, lastname)
            VALUES ('$fname','$lname')";
        mysql_query($insert)
        or die("could not insert:".mysql_error());
        header('Location: blah.php');

    }

    function emptyCheck($fname, $lname)
    {
        if ($fname == "" || $lname == "")
        {
            echo "Please fill in all the fields.";
        }
    }

} 

?> 
```

这个页面显示它：

```
 <?php

include('database.php');
$db = new Database();
$sql = "SELECT * 
    FROM tables"; 

if ($_GET['sort'] == 'id')
{
    $sql .= " ORDER BY id";
}
elseif ($_GET['sort'] == 'fn')
{
    $sql .= " ORDER BY firstname";
}
elseif ($_GET['sort'] == 'ln')
{
    $sql .= " ORDER BY lastname";
}

?>

<html>
<body>

    <table>
  <tr>
    <td>

      <table border="1" align="center">
      <tr>
        <th><a href="blah.php?sort=id">ID</a></th>
        <th><a href="blah.php?sort=fn">First Name</a></th>
        <th><a href="blah.php?sort=ln">Last Name</a></th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
<?php
$db->query($sql);
?>
      </table>
</table>
    <a Href="new.php">Add new Record</a>

</body>
</html> 
```

对不起，如果这真的很明显，我在 webdev 和 mysqli 新手上很糟糕。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:38:56.293

您应该使用`fetch_object`查询结果而不是数据库连接：

```
$result = $this->dbLocalhost->query($queryString);

while($row = $result->fetch_object())    // here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:39:44.340

这条线`while($row = $this->dbLocalhost->fetch_object($result))`需要

```
 $result = $this->dbLocalhost->query($queryString);
 while($row = $result->fetch_object()) 
```

此外，该`insert`函数使用 mysql，而不是`mysqli`.

# android - 媒体查询 Android FireFox

> ID：13387759
> 
> 赞同：2
> 
> 时间：2012-11-14T21:36:27.650
> 
> 标签：android, iphone, css, styles, media

这是我正在处理的网站的链接...

[http://www.trenzhairstudio.ca/newlook/](http://www.trenzhairstudio.ca/newlook/)

现在网站在 comp 浏览器、iPhone、Android（Chrome）上运行完美，但在 Andorid 上的 FireFox 中，它看起来不同，就像它不阅读媒体查询一样。

任何人都可以提出一些建议，使其在所有 Android 浏览器上都能正常工作。

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:29:12.687

尝试按照此答案[https://stackoverflow.com/a/8177670/1287608](https://stackoverflow.com/a/8177670/1287608)中的说明添加设备分辨率检测，希望对您有所帮助。

# r - 为什么 savePlot("file.pdf", type="pdf") 默认不工作？

> ID：13387762
> 
> 赞同：0
> 
> 时间：2012-11-14T21:36:34.350
> 
> 标签：r

有谁知道为什么 savePlot 默认无法在 linux 中保存为 pdf？

```
> savePlot("rv-3.pdf", type="pdf")
Error in match.arg(type) : 
  'arg' should be one of “png”, “jpeg”, “tiff”, “bmp”

lizard:~images$ R --version
R version 2.14.1 (2011-12-22)
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:43:42.347

`?savePlot`对此非常清楚：

> 这是通过将图像表面复制到文件来实现的。

因此，您从栅格表示开始，因此只能转到栅格表示。在 PDF 中传输栅格版本的绘图有点不合常理，这是一种矢量格式（是的，我知道您*可以*在 PDF 中包含栅格）。

该功能仅限于基于 cario 的`X11`设备，文档涉及复制“屏幕上”表示，因此存在限制。

我想您的问题的另一个答案是：该功能尚未实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:37:41.997

尝试这个：

```
pdf(file="rv-3.pdf")
plot(x,y)
dev.off() 
```

您还可以通过将 height= 或 width= 添加到 pdf 函数来更改大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T22:56:02.007

`dev.copy2pdf`做你想做的事：

```
plot(1:10)
dev.copy2pdf(file="~/test.pdf") 
```

通过阅读帮助文件，我认为这将有效地将您的图形重新绘制为文件中的矢量图像，这通常比将矢量图像导出为光栅格式更可取，就像`savePlot`看起来那样。

# wpf - Wpf 自定义窗口 TabControl 类模板

> ID：13387766
> 
> 赞同：1
> 
> 时间：2012-11-14T21:36:55.723
> 
> 标签：wpf, custom-controls, tabcontrol, window-chrome

我想创建一个`CustomWindow`以这种方式运行的类： 1\. 也利用了窗口的非客户区，出现了 TabControl 的选项卡，而不是像 Google Chrome 中的窗口标题。2\. 选项卡是靠右填充的，所以当窗口太小时，最小/最大/关闭按钮不会与选项卡发生冲突——这在 TabControl 模板中应该是可行的。3.标签后面有一个按钮，很像谷歌浏览器中的“新标签”按钮。同样，这应该可以通过 TabControl 的自定义实现来实现，并创建一个假的孩子来渲染我猜。4\. 我的类继承自 Window 类，并且 children 集合中的每个子项都映射到 TabControl 选项卡，就像 TabControl.ItemsSource 绑定到 Window.Children 一样。5\. Window 暴露了 ItemsSource 属性，其行为也类似于子集合。6\. Window 提供了一种方法来设置 TabControl 识别为 ItemTemplate 的样式。`CustomWindow.ItemsSource = new string[] { "a", "b", "c" };`我为项目填充模板，将创建三个选项卡，其中选项卡标题样式在 CustomWindow 类中硬编码，选项卡项目内容区域由用户模板化。

正如你所看到的，这基本上是谷歌浏览器窗口的轮廓，这正是我想要完成的。我知道如何以我想要的方式弯曲窗口的镶边，处理系统菜单、双击最大化等。但是我不知道如何从 Window 继承类，这将迫使它是唯一的孩子成为我选择的 TabControl（标签标题是样式的），但实际上它的子集合将是 TabControls 子集合。我对 WPF 的经验没有我想的那么丰富，我想以正确的方式开始，所以我以后不需要重写它。

另外，当这个问题得到解决时，我想给用户一种方法来告诉它被固定的选项卡，我猜这最好通过在 CustomWindow 中定义一个附加属性来完成，比如 CustomWindow.IsPinned 用于任何子控件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:40:54.517

将 DependencyProperty ItemsSource 添加到您的窗口（类型`IEnumerable<object>`和在您的窗口模板中将 tabcontrol 设置为`ItemsSource="{TemplateBinding ItemsSource}"`。这将使窗口拥有自己的子集合，然后将其呈现为 tabcontrol 中的选项卡项。

# ruby - Ruby /在匹配的键/哈希数组后删除所有内容

> ID：13387771
> 
> 赞同：3
> 
> 时间：2012-11-14T21:37:33.610
> 
> 标签：ruby

假设我有以下哈希数组：

```
h = [{"name" => "bob"}, {"car" => "toyota"}, {"age" => "25"}] 
```

我有以下要匹配的键：

```
k = 'car' 
```

如何将“k”匹配到“h”并在匹配后删除每个元素以使其返回：

```
h = [{"name" => "bob"}, {"car" => "toyota"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:48:24.483

只需将哈希转换为数组，完成您的任务，然后再转换回来

```
h = {"name" => "bob", "car" => "toyota", "age" => "25"}

array = h.to_a.flatten
index = array.index('car') + 1

h = Hash[*array[0..index]]
=> {"name"=>"bob", "car"=>"toyota"} 
```

顺便说一下，哈希是从 Ruby 1.9 开始排序的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T22:22:28.557

```
ar = [{"name" => "bob"}, {"car" => "toyota"}, {"age" => "25"}]
p ar[0 .. ar.index{|h| h.key?('car')}] #=>[{"name"=>"bob"}, {"car"=>"toyota"}] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T22:09:02.547

我喜欢 megas 的版本，因为它短小精悍。另一种更明确的方法是遍历每个散列的键数组。散列的键保存在有序数组（[http://ruby-doc.org/core-1.9.3/Hash.html](http://ruby-doc.org/core-1.9.3/Hash.html)）中。它们按首次进入时的顺序排列。因此，您可以尝试以下操作：

```
newArray = Array.new
h.each do |hash| # Iterate through your array of hashes
    newArray << hash
    if hash.has_key?("car") # check if this hash is the "car" hash.
      break # exits the block
    end
end 
```

当然，这一切都取决于数组是否以正确的顺序创建。如果是，那你就是金子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:44:25.533

根据定义，哈希是无序集，因此您请求的内容有些不确定。但是，您可以执行类似 hack 的操作：

```
h = {"name" => "bob", "car" => "toyota", "age" => "25"}
matched = false
key_given = "car"
h.each do |k,v|
  if matched 
    h.delete(k)
  end

  if k == key_given
    matched = true
    next
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-19T20:39:37.863

我在这里参加聚会已经很晚了。我一直在寻找解决同样问题的方法，但我不喜欢这些答案。所以，这是我的方法：

```
class Array
  def take_until(&blk)
    i = find_index &blk
    take(i + 1)
  end
end

h = [{"name" => "bob"}, {"car" => "toyota"}, {"age" => "25"}]
k = 'car'
h.take_until { |x| x.has_key?(k) }
=> [{"name"=>"bob"}, {"car"=>"toyota"}] 
```

# lisp - 所见即所得的 Scheme 函数

> ID：13387777
> 
> 赞同：1
> 
> 时间：2012-11-14T21:38:12.723
> 
> 标签：lisp, scheme

所以在这里我有几个我想使用的已定义列表：

```
(DEFINE list0 (LIST 'j 'k 'l 'm 'n 'o 'j) )
(DEFINE list1 (LIST 'a 'b 'c 'd 'e 'f 'g) )
(DEFINE list2 (LIST 's 't 'u 'v 'w 'x 'y 'z) )
(DEFINE list3 (LIST 'j 'k 'l 'm 'l 'k 'j) )
(DEFINE list4 (LIST 'n 'o 'p 'q 'q 'p 'o 'n) )
(DEFINE list5 '( (a b) c (d e d) c (a b) ) )
(DEFINE list6 '( (h i) (j k) l (m n) ) )
(DEFINE list7 (f (a b) c (d e d) (b a) f) ) 
```

我想做的是为'endsmatch'函数创建一个递归函数，它会这样做：

ENDSMATCH： `(endsmatch 1st)`如果`#t`列表中的第一个元素与列表中的最后一个元素相同则返回， `#f`否则返回。那是，

`(endsmatch '(s t u v w x y z) )` 将/应该返回： `#f`

```
(endsmatch (LIST 'j 'k 'l 'm 'n 'o 'j) 
```

将/应该返回： `#t`

和

两者都`(endsmatch '())`应该`(endsmatch '(a))` 返回`#t`，等等。

该函数还可以读取复杂的列表，例如： `(endsmatch '((a b) c (d e d) c (a b)) )` 然后返回： `#t` 和：

```
(endsmatch '((a b) c (d e d) c (b a)) )

(endsmatch '((y z) y) ) 
```

都应该返回`#f`

这个函数如何编码，因为我是方案新手，会看到它的样子，提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:09:10.360

试试这个，它很简单：

```
(define (endsmatch lst)
  (if (null? lst)
      #t
      (equal? (first lst) (last lst)))) 
```

如果您的 Scheme 解释器不包含过程`first`和`last`，它们的实现非常简单：

```
(define (first lst)
  (car lst))

(define (last lst)
  (cond ((null? lst) #f)
        ((null? (cdr lst)) (car lst))
        (else (last (cdr lst))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:19:25.527

我想出了这个解决方案，但是对于您描述的最后两个测试它失败了：

```
(define (endsmatch lst)
  (let loop ((lst lst) (first '()) (last '()))
    (cond
      ((null? lst)         (eq? first last))
      ((pair? (car lst))   (loop (car lst) first last)
                           (loop (cdr lst) first last))
      ((null? first)       (loop (cdr lst) (car lst) (car lst)))
      (else                (loop (cdr lst) first (car lst))))))

; racket test code
(require rackunit)
(check-eq? (endsmatch '(s t u v w x y z)) #f)
(check-eq? (endsmatch (list 'j 'k 'l 'm 'n 'o 'j)) #t)
(check-eq? (endsmatch '()) #t)
(check-eq? (endsmatch '(a)) #t)
(check-eq? (endsmatch '((a b) c (d e d) c (b a))) #t)
; these fail
(check-eq? (endsmatch '((a b) c (d e d) c (b a))) #f)
(check-eq? (endsmatch '((y z) y)) #f) 
```

确实你说的都是

```
"(endsmatch '((a b) c (d e d) c (b a)) ) which would then return: #t" 
```

和

```
"(endsmatch '((a b) c (d e d) c (b a)) ) should return #f" 
```

这是矛盾的。

# android - 按下返回按钮

> ID：13387778
> 
> 赞同：5
> 
> 时间：2012-11-14T21:38:13.943
> 
> 标签：android

我有 5 个不同屏幕的多项活动。如果在第一个屏幕和其他屏幕中按下后退键，我应该如何处理？finish() 和 System.exit() 不起作用..如果按下后退按钮，我应该怎么做才能退出我的应用程序？以下编码不起作用？请建议我退出具有多个屏幕的应用程序的方法

```
 public boolean onKeyDown(int keyCode, KeyEvent event) 
 {
    if (keyCode == KeyEvent.KEYCODE_BACK) 
     {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                this);

        new AlertDialog.Builder(this) .setMessage("Are you sure you want to exit?")
           .setCancelable(true)
          .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
           { 
             public void onClick(DialogInterface hi, int dd) 
             {

                Intent exitIntent = new Intent(Mapper.this,SplashActivity.class);
                exitIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP|Intent.FLAG_ACTIVITY_CLEAR_TOP);
                SplashActivity.mHandler.sendEmptyMessage(0);                   
                startActivity(exitIntent);    

             }
           }
          )
         .setNegativeButton("Cancel", new DialogInterface.OnClickListener() 
         { 
           public void onClick(DialogInterface hi, int dd) 
           {

           }
         }
         );
        AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
      //AlertDialog alert1 = alt_bld.create();
      //alert1.setTitle("EXIT");
      //alert1.show(); 
       return true; 
     }
     return super.onKeyDown(keyCode, event);
 }

  And in Start.Class:
  public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if (keyCode == KeyEvent.KEYCODE_BACK || keyCode == KeyEvent.KEYCODE_HOME) 
    {
        mHandler.removeCallbacksAndMessages(null);
        SplashActivity.this.finish();
    }

    return super.onKeyDown(keyCode, event); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:45:52.247

像这样覆盖`onBackPressed()`...

```
@Override
public void onBackPressed()
{
    finish();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:36:22.457

首先，你是想说你想要这样吗？

```
Activity1 --> Activity2 --> Activity3 --> Activity4 --> Activity5 
```

当前活动是 Activity5。后压。退出整个应用程序？您是否想在您当前正在进行的任何活动中退出应用程序？像Activity3一样，按下然后退出？如果是，您可以在调用者活动的每次 startActivity() 调用之后调用 finish() 。或者您可以选择在您调用的每个活动上使用结果变量。例如，您可以从 Activity1 调用 Activity2，方法是通过 staryActivityWithResult() 调用它并在源 Activity - Acitivity1 的 onActivityResult() 方法中等待其结果。因此，如果在 Activity2 上按下背面，则在完成之前将一些变量传递给 Activity2 的 setResult() 方法。然后这个结果将被传递给调用者 Activity1，然后你现在可以根据你传递的结果做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:56:28.630

为什么要在按下后退按钮时退出？这不是类似android的行为。通过按下返回，用户通常想要返回到之前的活动，而不是退出您的应用程序。Android 将在需要时自行销毁活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:49:13.213

您肯定在寻找的是 onBackPressed：

```
@Override
public void onBackPressed() {
    //do your intent here
} 
```

我不确定从上下文中是什么：

```
SplashActivity.mHandler.sendEmptyMessage(0); 
```

这条线确实如此，但除此之外，您的原始意图应该回到您的初始屏幕。我会做什么，如果你真的想在后按时退出你的应用程序，我会在那里放一些数据，比如

```
exitIntent.putExtra("toExit", true); 
```

基本上只是一个标志，您的启动活动可以读入并决定自行调用 finish() 。手动关闭应用程序的唯一“好”方法是完成第一个活动（尽管实际上很少强制用户退出您的应用程序）

编辑：好的，所以在您返回的应用程序中（看起来像 SplashActivity），您将在 onCreate 中寻找一个意图，如下所示：

```
Intent i = getIntent();
Bundle extras = i.getExtras();

Boolean toExit = extras.getString("toExit");
if(toExit){
    finish();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-22T10:52:12.267

在任何活动中退出您的应用程序。按着这些次序：

1-在活动中制定意图，从您要退出应用程序的位置：

`Intent intent = new Intent(thisActivity.this, FirstActivity.class); intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); intent.putExtra("EXIT", true); startActivity(intent);`

2-在您的第一个活动中，在 onCreate() 方法中将其写为：

```
if (getIntent().getData()!= null) {

if (getIntent().getBooleanExtra("EXIT", false)) 
{
    finish();
}
} 
```

# python - Python中复数的格式

> ID：13387782
> 
> 赞同：20
> 
> 时间：2012-11-14T21:38:29.277
> 
> 标签：python, complex-numbers

我想知道 Python (3.3.0) 打印复数的方式。我正在寻找解释，而不是更改打印的方法。

例子：

```
>>> complex(1,1)-complex(1,1)
0j 
```

为什么它不只打印“0”？我的猜测是：保持复杂类型的输出。

下一个例子：

```
>>> complex(0,1)*-1
(-0-1j) 
```

好吧，一个简单的“-1j”或“(-1j)”就可以了。为什么是“-0”？这不是和+0一样吗？这似乎不是一个四舍五入的问题：

```
>>> (complex(0,1)*-1).real == 0.0
True 
```

当虚部变为正数时，-0 消失：

```
>>> complex(0,1)
1j
>>> complex(0,1)*-1
(-0-1j)
>>> complex(0,1)*-1*-1
1j 
```

还有一个例子：

```
>>> complex(0,1)*complex(0,1)*-1
(1-0j)
>>> complex(0,1)*complex(0,1)*-1*-1
(-1+0j)
>>> (complex(0,1)*complex(0,1)*-1).imag
-0.0 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T21:56:38.910

它打印`0j`表明它仍然是一个`complex`值。您也可以用这种方式输入它：

```
>>> 0j
0j 
```

其余的可能是[IEEE 754 浮点表示](http://en.wikipedia.org/wiki/IEEE_floating_point)法的神奇结果，它区分了 0 和 -0，即所谓的有[符号零](http://en.wikipedia.org/wiki/Signed_zero)。基本上，有一个位表示数字是正数还是负数，而不管数字是否恰好为零。这解释了为什么`1j * -1`给出一个负零实部的东西：正零乘以 -1。

标准要求 -0 比较等于 +0，这解释了为什么`(1j * -1).real == 0.0`仍然成立。

Python 仍然决定打印 -0 的原因是，在复杂的世界中，这些对分支切割产生了影响，例如在[函数`phase`中](http://docs.python.org/3.3/library/cmath.html#cmath.phase)：

```
>>> phase(complex(-1.0, 0.0))
3.141592653589793
>>> phase(complex(-1.0, -0.0))
-3.141592653589793 
```

这是关于虚部，而不是实部，但很容易想象实部的符号会产生类似差异的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T22:11:24.847

答案在于 Python 源代码本身。

我将使用您的一个示例。让

```
a = complex(0,1)
b = complex(-1, 0) 
```

当你这样做时，`a*b`你正在调用[这个函数](http://hg.python.org/cpython/file/399e59ad0a70/Objects/complexobject.c#l42)：

```
real_part = a.real*b.real - a.imag*b.imag
imag_part = a.real*b.imag + a.imag*b.real 
```

如果你在 python 解释器中这样做，你会得到

```
>>> real_part
-0.0
>>> imag_part
-1.0 
```

从 IEEE754，你得到一个[负零](http://en.wikipedia.org/wiki/Signed_zero)，因为[那不是 +0](http://hg.python.org/cpython/file/399e59ad0a70/Objects/complexobject.c#l345)，你在打印时得到括号和实部。

```
if (v->cval.real == 0\. && copysign(1.0, v->cval.real)==1.0) {
    /* Real part is +0: just output the imaginary part and do not
       include parens. */
...
else {
    /* Format imaginary part with sign, real part without. Include
       parens in the result. */
... 
```

我猜想（但我不确定）其基本原理来自使用基本复数函数计算时该符号的重要性（维基百科文章中有关带符号的零对此有参考）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T00:54:07.937

*   `0j`是一个[虚构的文字](http://docs.python.org/3.3/reference/lexical_analysis.html#imaginary-literals)，它确实表示一个复数而不是整数或浮点数。

*   ( `+-0`"signed zero") 是 Python 符合[IEEE 754 浮点表示](http://en.wikipedia.org/wiki/IEEE_floating_point)[的](http://docs.python.org/3.3/library/stdtypes.html#typesnumeric)结果，因为在 Python 中，[`complex`根据定义是一对*浮点数*](http://docs.python.org/3.3/library/stdtypes.html#typesnumeric)。由于后者，也不需要为 a 打印或指定零分数部分`complex`。

*   *打印*该`-0`部分是为了准确地将内容表示[为](http://docs.python.org/3.3/library/functions.html#repr)[文档要求](http://docs.python.org/3.3/library/functions.html#repr)（每当操作结果输出到控制台时都会隐式调用）。*[`repr()`](http://docs.python.org/3.3/library/functions.html#repr)`repr()`*

**   关于**为什么`(-0+1j) = 1j`但是的问题`(1j*-1) = (-0+1j)`。** 请注意，`(-0+0j)`or`(-0.0+0j)`不是单个复数，而是*表达式*- 将`int`/`float`添加到`complex`. 为了计算结果，首先将第一个数字转换为`complex`( `-0`->`(0.0,0.0)`因为整数没有带符号的零，`-0.0`-> `(-0.0,0.0)`)。然后它的`.real`和`.imag`被*添加*到相应的`1j`是`(+0.0,1.0)`。结果是`(+0.0,1.0)`:^) 。要直接构造复合体，请使用`complex(-0.0,1)`.* 

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T21:59:44.530

就第一个问题而言：如果它只是打印出来`0`，它在数学上是正确的，但你不会知道你正在处理一个`complex`对象与一个`int`. 只要你不指定`.real`，你总是会得到一个 J 组件。

我不知道你为什么会得到`-0`；这在技术上并不正确`(-1 * 0 = 0)`，但在语法上很奇怪。

至于其余部分，奇怪的是它并不一致，但是在技术上没有一个是正确的，只是实现的一个工件。*

# wordpress - Wordpress 重定向到父页面或类别

> ID：13387785
> 
> 赞同：0
> 
> 时间：2012-11-14T21:38:44.000
> 
> 标签：wordpress, .htaccess, redirect

我想要做的是将 404 重定向到下一个可能的页面/类别。以下是我想要的详细说明：

如果用户遇到以下情况：

*   `www.domain.com/about/(any text that generates 404)`它应该自动重定向到`www.domain.com/about`
*   `www.domain.com/category/(any text that generates 404)`它应该自动重定向到`www.domain.com/category`
*   `www/domain.com/about/sub-about/(any text that generates 404)`它应该自动重定向到`www.domain.com/about/sub-about`

我希望这能描述我正在寻找的东西。如果我的同事在这里发布解决方案，我会很高兴。我曾尝试使用 404 重定向插件，但它不是自动重定向。只要它适用于 wordpress，我对任何解决方案都持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:17:52.363

在 404 脚本中插入这样的代码可能会起作用：

```
<?php
$Referrer = wp_get_referer( ) ;
if ( $Referrer = 'http://www.domain.com/' ) {
  echo '<script type="text/javascript">window.location ="http://www.domain.com/about/";</script>' ;
}
elseif ( $Referrer = 'http://www.domain.com/about/' ) {
  echo '<script type="text/javascript">window.location ="http://www.domain.com/about www.domain.com/category/";</script>' ;
}
elseif ( $Referrer = 'http://www.domain.com/about www.domain.com/category/' ) {
  echo '<script type="text/javascript">window.location ="http://www.domain.com/category www/domain.com/about/sub-about/";</script>' ;
}
else {
  echo "404 Message" ;
}
?> 
```

# java - 如何在 Mac 中为 Tomcat 获取堆转储和线程转储

> ID：13387794
> 
> 赞同：0
> 
> 时间：2012-11-14T21:39:09.217
> 
> 标签：java, tomcat, memory, heap-memory, tomcat6

我正在尝试分析部署在 Tomcat 中的应用程序的内存使用情况。

当应用程序在 tomcat 中运行时，我需要获取堆转储和线程转储。

任何人都可以让我知道如何从 Tomcat 的终端获取这些转储文件。

我尝试使用“ps ux | grep apache”获取 tomcat PID，然后执行“kill -3 PID”，但没有任何反应......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:05:24.543

这取决于您用来运行 Tomcat 的 JVM。我强烈建议使用 JDK 运行所有应用程序和服务器（如果是 HotSpot，您可能会使用它）。那么你手头应该有多个实用程序：

*   jps - 用于查找您的 pid
*   jstack - 用于获取线程转储
*   jmap - 用于获取堆转储。

或者您使用 jvisualvm 将所有工具捆绑到一个漂亮的 ui 中。最后但并非最不重要的一点是，您可能得到了错误的 PID :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T07:50:49.790

执行 kill -3 PID 后，Apache Tomcat 的 PID 进程 id ，线程转储将写入 /tomcat/logs/catalina.out

# java - 套接字和 Java 聊天

> ID：13387795
> 
> 赞同：2
> 
> 时间：2012-11-14T21:39:14.013
> 
> 标签：java, sockets

我是java新手，我正在尝试学习如何使用套接字。

我正在尝试编写一个简单的文本信使，服务器 - 客户端，但我不知道如何让服务器始终监听客户端的流：

这是服务器代码，现在它只管理 1 个传入连接，当客户端连接时，服务器向它发送一条消息：

```
import java.net.*;
import java.io.*;

public class SocketServer {

private InetAddress ServerAddress;
private int ServerPort;
private int ServerQueue;
private ServerSocket Server;

public SocketServer(String ServerAddress, int ServerPort, int ServerQueue)
{
    try
    {
        this.ServerAddress = InetAddress.getByName(ServerAddress);
    }
    catch (UnknownHostException uhe)
    {
        uhe.printStackTrace();
    }
    this.ServerPort = ServerPort;
}

public boolean ServerCreate()
{
    try
    {
        Server = new ServerSocket(this.ServerPort, 10, this.ServerAddress);
        System.out.println("System Message: Server started!");
        return true;
    }
    catch(IOException ioe)
    {
        ioe.printStackTrace();
        System.out.println("System Message: Can't start server!");
        return false;
    }
}

public void ServerStartListening()
{
    int exit = -1;
    while(exit < 1)
    {
        try 
        {
            Socket client = this.Server.accept();
            OutputStream clientout = client.getOutputStream();
            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(clientout));
            bw.write("Welcome: "+client.toString());
            bw.close();
        } 
        catch (IOException ex) 
        {
            ex.printStackTrace();
        }  
    }
}
} 
```

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:46:45.887

您需要实现多线程以侦听多个传入请求。请参考此[链接](http://www.oracle.com/technetwork/java/socket-140484.html#multi)：oracle 提供的一个非常好的多线程服务器示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:48:31.637

你需要阅读某事。关于线程。这是一个初始代码：

```
ServerSocket socketListener;
DoSthWithThisSocket doSthWithThisSocketObj;
socketListener = new ServerSocket(LISTENINGPORT);
Socket socket;
Thread doSthWithThisSocketThread;

while (continueSocketListening()) {
    socket = socketListener.accept();
    doSthWithThisSocketObj = new DoSthWithThisSocket(socket);
    doSthWithThisSocketThread = new Thread(doSthWithThisSocketObj);
    doSthWithThisSocketThread.start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T22:13:23.517

在 Java 中创建多客户端套接字服务器有两个主要选项：

*   正如之前的响应者建议的那样，为每个新的客户端 TCP 连接启动一个新线程。这适用于小型/玩具服务器，以及刚开始使用套接字时。这里最大的缺点是这种方法无法扩展 - 只需考虑拥有一千个并发客户端......
*   [将 IO 多路复用与 Java NIO 包](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/example/index.html)提供的非阻塞套接字一起使用，将接受/读/写事件分派给已注册的回调。您可以使用工作项队列和预先分配的工作线程池来扩展它，以利用硬件中的多个内核/CPU。

# powershell - PowerShell - 搜索数组时使用 -pattern

> ID：13387796
> 
> 赞同：0
> 
> 时间：2012-11-14T21:39:19.163
> 
> 标签：powershell

我的脚本与当前数组值正常工作；但是，实际文件名的前缀中大约有五个我想忽略的字符：文件名之一的示例： 03_R_ **__1087010076_9999992_35_401_01_20121107_134029_0667.I00.asd 。我要解析的文件名的唯一部分是 "108701####" 忽略前缀 03_R___**。

```
$source ="\\127.0.0.1\baunhof\*"
$File_Array_8HP70=@("108701") 
$File_Array_8HP70X=@("108702")
$File_Array_9HP48=@("109401", "1094080", "1094090")
$File_Array_9HP48X=@("109402", "1094091", "1094082", "1094092")

$File_Array_8HP70_start = $File_Array_8HP70 | % {$_+"*"}
$File_Array_8HP70X_start = $File_Array_8HP70X | % {$_+"*"}
$File_Array_9HP48_start = $File_Array_9HP48 | % {$_+"*"}
$File_Array_9HP48X_start = $File_Array_9HP48X | % {$_+"*"}

$files = get-childitem $source -include $File_Array_8HP70_start -recurse 
$files1 = get-childitem $source -include $File_Array_8HP70X_start -recurse
$files2 = get-childitem $source -include $File_Array_9HP48_start -recurse 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:05:46.880

You can ignore first N characters, by filtering manually:

```
get-childitem $source -recurse | where { $_.Name -like "???????108701*" } 
```

If you want to enumerate through an array of patterns this way, here is how you can do it:

```
get-childitem $source -recurse | foreach {
  foreach($pattern in $likes) {
    if($_.Name -like $pattern) {
      $_
      break;
    }
  }
} 
```

# php - 从 .py 文件调用 .php 文件

> ID：13387797
> 
> 赞同：0
> 
> 时间：2012-11-14T21:39:19.117
> 
> 标签：php, python, sendmail

我目前有一些 JavaScript 代码调用 .php 文件，使用点击功能从 .jsp 中向我发送电子邮件。它还包括几个变量，见下文。

```
<script>
function sendMail(video, user) {
var xmlhttp;
     if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
     } else {// IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
     }
     xmlhttp.open("GET", "http://www.mydomain.com/sendemail.php?video="+video+"&user="+user+'&ip=<%= request.getHeader("X-Real-IP") %>', false);
     xmlhttp.send();
}
</script> 
```

在 .jsp 文件中调用脚本：

```
 <a href="${videoUrl}" target="main" onclick="sendMail(parentElement.parentElement.getElementsByTagName('span')[2].attributes['title'].value, '${model.user.username}')"> 
```

现在我有一个 .py（与上面不同的应用程序）文件，我想调用这个 sendMail 函数。我想在 .py 文件中调用 sendMail 函数的部分

```
def play(self, song_id):
    Addon.log('play: ' + song_id)
    if Addon.get_setting('transcode') == 'true':
        bitrate = self.bitrates[int(Addon.get_setting('bitrate'))]
        Addon.resolve_url(self.build_rest_url('stream.view', 
                                              {'id': song_id,
                                               'maxBitRate': bitrate}))
    else:
        Addon.resolve_url(self.build_rest_url('download.view', 
                                              {'id': song_id})) 
```

现在有没有办法从 python 文件中完成这个 sendMail 函数？我可以调用 URL 而不是使用该函数？

我弗兰肯斯坦我正在运行一个 web 应用程序来向我发送电子邮件通知，我发现最简单的方法是创建 JavaScript 函数，然后调用一些 PHP 来发送电子邮件。现在 python 是一个完全不同的应用程序，只是想弄清楚如何做同样的事情，调用 URL 发送电子邮件，但使用 Python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:03:25.360

直接从 Python 代码调用 PHP 代码并不简单，但如果我正确理解您的情况，您真正想做的就是向服务器发送 HTTP 请求，对吧？碰巧您发送 HTTP 请求的服务器正在运行 PHP 应用程序，但这与您的 Python 代码完全无关？

只是`import urllib2`。将 URL 构造为字符串（以与 Javascript 的执行方式类似的方式，或者使用字典和具有更高级的功能`urllib2.urlencode()`）。然后`urllib2.urlopen(url)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:07:25.227

要调用 url，请尝试[urllib2](http://docs.python.org/2/library/urllib2.html)模块，例如：

```
>>> import urllib2
>>> f = urllib2.urlopen('http://www.python.org/')
>>> print f.read(100) 
```

要发送电子邮件，请尝试从[这些示例中的任何一个](http://docs.python.org/2/library/email-examples.html)开始的[电子邮件模块](http://docs.python.org/2/library/email.html#module-email)。

要在同一台机器上启动外部进程（例如 php 脚本），请尝试[SubProcess](http://docs.python.org/2/library/subprocess.html)模块

# ios - Facebook iOS 3.1 SDK：可以使用 Safari 登录，但不能本地登录

> ID：13387798
> 
> 赞同：5
> 
> 时间：2012-11-14T21:39:21.033
> 
> 标签：ios, facebook-ios-sdk

我正在集成 iOS 3.1 Facebook SDK。在使用 Facebook 功能实现登录时，我调用`FBSession openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:`. 在模拟器上调用时（我没有本地设置 FB 帐户），我可以成功登录。

但是，从具有本机 Facebook 帐户设置的设备，当调用`openActiveSessionWithReadPermissions...`完成处理程序中返回的会话类型时，始终`sessionStateClosedLoginFailed`为 ，无论我是否允许或禁止我的应用程序在警报对话框中使用 Facebook。调用该方法之前的会话状态是`sessionStateCreated`.

这是`NSError`来自完成处理程序： `Error Domain=com.facebook.sdk Code=2 "The operation couldn’t be completed. (com.facebook.sdk error 2.)" UserInfo=0x20a80820 {com.facebook.sdk:ErrorLoginFailedReason=com.facebook.sdk:ErrorLoginFailedReason, com.facebook.sdk:ErrorInnerErrorKey=Error Domain=NSCocoaErrorDomain Code=3840 "The operation couldn’t be completed. (Cocoa error 3840.)" (No value.) UserInfo=0x208ed930 {NSDebugDescription=No value.}}`

我做错了什么会导致这个问题？

*更新*：我刚刚注意到我的应用程序没有出现在“设置”>“Facebook”>“允许这些应用程序使用您的帐户”部分中。（今天早些时候肯定有）。

*更新 2*：如果我从 iOS 设置应用程序中删除我的帐户，然后将我的测试用户登录到 Facebook iPhone 应用程序，我可以通过快速应用程序切换登录。因此，这似乎只是本机帐户的问题。

*Update3*：我运行了示例 Facebook 应用程序 Scrumptious 我有同样的问题。单击“登录”后，`openActiveSessionWithRead...`我得到了同样的错误。

*Update4*：可能与此错误有关？[http://developers.facebook.com/bugs/450137751688028?browse=search_50a43a39b37ae4868318658](http://developers.facebook.com/bugs/450137751688028?browse=search_50a43a39b37ae4868318658)

*更新 5*：我应该在前面提到过，但它是一个 Facebook 测试用户帐户有这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:31:44.310

我从使用 Facebook 测试用户帐户切换到普通帐户，这解决了 Scrumptious 应用程序和我的应用程序的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:53:26.680

你`FacebookAppID`在你的plist中设置了吗？[请参阅Facebook SDK 入门](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)第 5 节中的“添加您的 Facebook 应用程序 ID” 。此外，请检查您设备设置的“Facebook”部分，以确保您的应用未被授权（在这种情况下，除非您手动授权，否则它不会被授权）。

# php - PHP 和 Obj-c（或其他）之间的安全身份验证

> ID：13387808
> 
> 赞同：0
> 
> 时间：2012-11-14T21:40:05.767
> 
> 标签：php, objective-c, authentication

我坐在这里做一个小项目，在这种情况下它介于 PHP 和 Obj-c 之间。

在这些之间进行安全身份验证的最佳实践是什么？

就像是

```
myhost?do=login&user=my_username&password=my_password 
```

感觉有点不安全，因为用户名和密码是公开的。

我想我可以为此做一些 SSL（？），但是有没有人有另一个好的解决方案的好例子？

我的想法是登录为用户表（MySQL）设置了一个 auth_key，如果上面的 GET 变量是正确的，它将返回 userid 和这个 auth 密钥。然后，在我对 PHP 所做的每一件事上，此身份验证密钥都会更新并返回给用户（obj-c 程序），并且在服务器上完成的所有操作都针对此密钥进行身份验证，这只是为了不“显示”每个密码时间和使用密钥时，它没用，因为它已更新...

但是，这不能阻止任何人手动执行此操作，因为密钥是在登录时收到并更新的。

有什么想法可以让这更安全，还是我只是偏执？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:44:53.477

将 POST 与 SSL 一起用于用户名和密码表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:56:34.073

GET 和 POST 之间的区别实际上并不重要 - 两者都是 HTTP 请求，只要您不加密数据，就可以嗅探请求的纯正文。当然，登录应该作为 POST 请求，但只是因为它不是幂等的，并且可能有副作用 [db 写入、会话启动等]。

您可能只想通过 HTTPS 协议切换到 SSL，以确保您的数据安全。

作为 [真正] 最低限度的保护，您可以使用[Basic HTTP Auth](http://en.wikipedia.org/wiki/Basic_access_authentication)，它在发送登录凭据之前在 Base64 中进行编码 - 您可以使用[RestKit](http://restkit.org/)轻松完成此操作。

# android - 将样式从 xml 设置为 ViewPager 中的元素

> ID：13387815
> 
> 赞同：0
> 
> 时间：2012-11-14T21:40:39.633
> 
> 标签：android, styles, android-viewpager

我喜欢从外部 styles.xml 文件中为我的 android 视图设置样式。我想知道我可以采取什么方法将外部化样式应用于以编程方式而不是在 XML 布局文件中创建的视图，例如，要插入到 ViewPager 上的视图。

另一个用例是从没有相应 XML 布局的 XML 文件自定义组件中进行样式设置。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:22:21.870

理想情况下，您可以使用接受 int defStyle 属性的视图构造函数。虽然我没有使用此构造函数，但可能存在未应用样式的[问题](http://code.google.com/p/android/issues/detail?id=12683)。听起来标准视图可能无法以预期的方式处理样式。不幸的是，听起来您最好的选择可能是子类化视图并覆​​盖构造函数以确保正确应用您的样式。我还要看一下 view 的[源代码](http://www.netmite.com/android/mydroid/frameworks/base/core/java/android/view/View.java)，看看在 View.java 的构造函数中是如何处理样式的。希望这可以帮助。

# excel - excel文件的每周任务 - 查找和替换

> ID：13387817
> 
> 赞同：0
> 
> 时间：2012-11-14T21:40:44.860
> 
> 标签：excel, replace, openoffice-calc

我将每周收到一个 excel 文件

这个 excel 文件将包含大约 10,000 行。我需要每周做以下事情。

```
1\. Add a column titled Condition between B and C
2\. Any item in column A that ends in -LP needs to have -LP changed to -CMP
3\. Any item in column A that ends in -OR or -RX needs to have colum C say REF
4\. Any item in column A that ends in -LP, -3, -K3, or -CMP needs to have column C say OEMREF
5\. Any item in column A that ends in -X, or has no - ending, column C should say OEM
6\. a list of all items from column A that did not match the rules above should be placed in a new sheet (IE create a sheet) 
```

每周自动执行此操作的最佳方法是什么。（IE我可以点击“go”或其他任何东西，它只是做了这一切然后给我结果数据）

我对程序、脚本或任何真正可以做到这一点的东西持开放态度，只是在寻找一些关于前进方向的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:58:32.533

我只有 Office XP，但我想你仍然可以做类似的事情：

打开控件工具箱工具栏。使用它，您应该能够创建将要进行处理的按钮。接下来，确保您处于设计模式（它是控制工具箱工具栏上的一个开关）。右键单击该按钮，然后从上下文菜单中选择“查看代码”。这将打开 Excel 的 Visual Basic 编辑器。从这里您应该能够访问工作表中的所有数据，并以您希望的任何方式操作它们。这是一个可以进一步引导您的教程：[Anthony's VBA Page](http://www.anthony-vba.kefra.com/vba/vbabasic1.htm)。一定要听从他关于录制宏的建议，因为查看宏生成的代码通常会消除阅读文档的麻烦。

对于您上面概述的简单任务，使用 Office 附带的工具可能是可行的方法。

# java - 为什么使用 Jni onload 但不使用 javah 的输出时出现错误？

> ID：13387827
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:41:19.237
> 
> 标签：java, android, java-native-interface, javah

我有这个java方法：

public static native void processBuffer(ByteBuffer bb);

用javah

```
JNIEXPORT void JNICALL Java_com_lan_factorial_IssmJni_processBuffer
  (JNIEnv *env, jclass klass , jobject buf) 
```

完美工作

使用 Jni 加载

```
static JNINativeMethod method_table[] = {
        {"fac"      ,     "(J)J" , (void *) factorial},
        {"getBuffer",     "()[D" , (void *) getBufferNative},
        //{"processBuffer", "(Ljava/nio/ByteBuffer)V", (void *) fillBuffer}}; 
```

此表中的其他方法有效，除了对应于上面从 javah 生成的方法的最后一个方法。当然，如果我执行 JNI onload，我将有一个方法调用 fillBuffer。

有人可以解释为什么 javah 有效但 jni_onload 无效。我做错什么了吗？我有其他使用 jni_onload 的方法，所以我想远离 javah。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:13:00.767

方法签名中缺少分号。它根本不“对应”。不要猜测本机方法签名：使用 javap -s 的输出。剪切和粘贴。

# jquery - 是否可以使用鼠标滚轮滚动调整元素字体大小？

> ID：13387829
> 
> 赞同：0
> 
> 时间：2012-11-14T21:41:24.880
> 
> 标签：jquery, css, scroll, bind, font-size

我没有任何代码，但我只是想知道在 jQuery 中是否可以根据向上/向下滚动来增加/减少元素的字体大小？

在最好的情况下，我想仅当鼠标在该元素上时才使用滚动来增加字体大小，只需要有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:11:33.157

一些半伪代码

```
$('#mydiv').bind('mousewheel DOMMouseScroll',function(e){
  // determines direction of scroll
  var delta = e.originalEvent.wheelDelta || -e.originalEvent.detail; 
  var current = $(this).css('font-size');
  // scroll down
  if(delta>0){
    //var pixels = (create a negative pixel ratio system); 
  }else{ //scroll up
    //var pixels = (create a positive pixel ratio system); 
  }
  $(this).css({"font-size" : pixels+"px"});
}); 
```

创建类似的东西会起作用，*但是当元素上没有**滚动条*时，您可能会遇到*元素*不触发*滚动*事件的问题。

 *当然，这完全取决于浏览器，不幸的是，鼠标滚轮事件在跨浏览器兼容性方面并不是*最好*的（截至本文发布之日）。

虽然在这里有效！（在铬）：http: [//jsfiddle.net/KqwY2/1/](http://jsfiddle.net/KqwY2/1/)*

# ipython - iPython 提示混乱

> ID：13387832
> 
> 赞同：1
> 
> 时间：2012-11-14T21:41:37.587
> 
> 标签：ipython, prompt

我无法获得在 Windows 中运行的 iPython 0.13.1 中显示当前工作目录的提示。如下所示，将当前工作目录更改为 后`'C:\Users\Lou\Documents\Lou's Software\projects\loutilities'`，`\Y3`仅显示`'C:/Users/Lou'`. `\w`使用和`{cwd}`配置可以看到相同的行为。

我确定这是我正在做的愚蠢的事情，但我无法弄清楚，或者通过 Google 或 Stack Overflow 找到任何东西。

```
Python 2.7.1 (r271:86832, Nov 27 2010, 18:30:46) [MSC v.1500 32 bit (Intel)]
Type "copyright", "credits" or "license" for more information.

IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.
[IPKernelApp] To connect another client to this kernel, use:
[IPKernelApp] --existing kernel-9572.json

C:/Users/Lou> cd "C:\Users\Lou\Documents\Lou's Software\projects\loutilities"
C:\Users\Lou\Documents\Lou's Software\projects\loutilities

C:/Users/Lou> config PromptManager
PromptManager options
-------------------
PromptManager.color_scheme=<Unicode>
    Current: u'Linux'
PromptManager.in2_template=<Unicode>
    Current: u'   .\\D.: '
    Continuation prompt.
PromptManager.in_template=<Unicode>
    Current: u'\\Y3> '
    Input prompt.  '\#' will be transformed to the prompt number
PromptManager.justify=<Bool>
    Current: False
    If True (default), each prompt will be right-aligned with the preceding one.
PromptManager.out_template=<Unicode>
    Current: u'Out[\\#]: '
    Output prompt. '\#' will be transformed to the prompt number 
```

Thomas 要求输出`os.getcwdu()`. 我使用 config 命令更改了提示（我已经回到`In [#n]`提示），`In [#n]`提示仍然存在。线索？

```
In [1]: config PromptManager.in_template='\\Y3'

In [3]: config PromptManager
PromptManager options
-------------------
PromptManager.color_scheme=<Unicode>
    Current: u'Linux'
PromptManager.in2_template=<Unicode>
    Current: u'   .\\D.: '
    Continuation prompt.
PromptManager.in_template=<Unicode>
    Current: u'\\Y3'
    Input prompt.  '\#' will be transformed to the prompt number
PromptManager.justify=<Bool>
    Current: True
    If True (default), each prompt will be right-aligned with the preceding one.
PromptManager.out_template=<Unicode>
    Current: u'Out[\\#]: '
    Output prompt. '\#' will be transformed to the prompt number

In [4]: import os

In [5]: os.getcwdu()
Out[5]: u'C:\\Users\\Lou'

In [6]: cd weather
(bookmark:weather) -> C:\Users\Lou\Documents\Lou's Software\projects\weather
C:\Users\Lou\Documents\Lou's Software\projects\weather

In [7]: os.getcwdu()
Out[7]: u"C:\\Users\\Lou\\Documents\\Lou's Software\\projects\\weather" 
```

原来的测试重复了……

```
C:/Users/Lou> cd weather
(bookmark:weather) -> C:\Users\Lou\Documents\Lou's Software\projects\weather
C:\Users\Lou\Documents\Lou's Software\projects\weather

C:/Users/Lou> import os

C:/Users/Lou> os.getcwdu()
      Out[3]: u"C:\\Users\\Lou\\Documents\\Lou's Software\\projects\\weather"

C:/Users/Lou> config PromptManager
PromptManager options
-------------------
PromptManager.color_scheme=<Unicode>
    Current: u'Linux'
PromptManager.in2_template=<Unicode>
    Current: u'   .\\D.: '
    Continuation prompt.
PromptManager.in_template=<Unicode>
    Current: u'\\Y3> '
    Input prompt.  '\#' will be transformed to the prompt number
PromptManager.justify=<Bool>
    Current: True
    If True (default), each prompt will be right-aligned with the preceding one.
PromptManager.out_template=<Unicode>
    Current: u'Out[\\#]: '
    Output prompt. '\#' will be transformed to the prompt number 
```

11/21/12 - 检查`get_ipython().prompt_manager.templates`：

```
C:/Users/Lou> pwd
      Out[1]: u'C:\\Users\\Lou'

C:/Users/Lou> get_ipython().prompt_manager.templates
      Out[2]:
{'in': u'{cwd_y[3]}> ',
 'in2': u'   .{dots}.: ',
 'out': u'Out[{color.number}{count}{color.prompt}]: '}

C:/Users/Lou> cd weather
(bookmark:weather) -> C:\Users\Lou\Documents\Lou's Software\projects\weather
C:\Users\Lou\Documents\Lou's Software\projects\weather

C:/Users/Lou> pwd
      Out[4]: u"C:\\Users\\Lou\\Documents\\Lou's Software\\projects\\weather"

C:/Users/Lou> get_ipython().prompt_manager.templates
      Out[5]:
{'in': u'{cwd_y[3]}> ',
 'in2': u'   .{dots}.: ',
 'out': u'Out[{color.number}{count}{color.prompt}]: '} 
```

# javascript - 如何更改 Youtube 视频 点击？

> ID：13387836
> 
> 赞同：0
> 
> 时间：2012-11-14T21:41:45.093
> 
> 标签：javascript, youtube, youtube-api

我正在尝试更改嵌入中播放的视频。我想知道这是否可以通过单击 LI 项目来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:50:27.147

您可以使用[jQuery](http://jquery.com/) javascrip 库将 onclick 事件添加到您的`<li>`.

```
$('li').click(function() {
    var newId = $(this).text(); 
    player.loadVideoById(newId, 0, "large");
}); 
```

如果视频在里面，`<li>`你可能需要创建一个透明的覆盖层来响应用户的点击。请注意，您可能必须更改 iframe 的 z-index。

如果您需要更多帮助，请提供有关您的页面布局的更多信息。

# r - R循环中的变量作为函数的结果

> ID：13387838
> 
> 赞同：-1
> 
> 时间：2012-11-14T21:41:50.020
> 
> 标签：r, loops

我在 R 的循环中将文件名作为变量处理时遇到问题

```
files <- list.files(pattern = "*.tab",full.name=T)
for (a in files) { aname <- strsplit(basename(a), "\\.")[[1]][1]
                   aname <- read.table(a,header=TRUE, sep="\t",comment.char="")
                } 
```

它只产生一个对象：`aname`，如果我使用以下：

```
for (a in files) { c(strsplit(basename(a), "\\.")[[1]][1]) <- read.table(a,header=TRUE,
                        sep="\t",comment.char="")
                } 
```

它产生：找不到函数“c<-”。但如果我这样做

```
for (a in files) { aname <- strsplit(basename(a), "\\.")[[1]][1]
                   print(aname)
                } 
```

正如预期的那样，输出是一个没有扩展名的文件列表。所以，问题是：如何使函数的结果成为变量名？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:54:05.510

问题不在于处理文件名，而在于您编写循环的方式。基本上你在做：

```
for(i in list.of.files) {
  foo <- processName(i)
  foo <- read.table(foo)
} 
```

当这样看时，很明显`foo`循环的每次迭代都会被写入两次，因此只能取最后一次`read.table()`调用的值。

您要做的是在进入循环之前为文件列表分配存储空间，然后随时填写该列表。例如：

```
aname <- vector("list", length = length(files))
fnames <- character(length(files))
for(i in seq_along(aname)) {
  fnames[i] <- strsplit(basename(files[i]), "\\.")[[1]][1]
  aname[i] <- read.table(a, header=TRUE, sep="\t", comment.char="")
}
names(aname) <- fnames 
```

将对象包含在列表中是一个有用的功能，因此您不会让所有这些对象四处乱窜。由于它们包含在列表中，因此您可以使用`lapply()`或类似方法对每个对象进行操作。

如果你真的想要一个单独的对象，它的文件名没有扩展名作为所有文件的名称，那么你可以使用`assign()`，但我不推荐它

```
files <- list.files(pattern = "*.tab", full.name=TRUE)
for (a in files) {
  aname <- strsplit(basename(a), "\\.")[[1]][1]
  assign(aname, read.table(a, header=TRUE, sep="\t", comment.char="")
} 
```

查看`?assign`更多。

# java - 如何将文件写入 PC 上可见的 Android SD 卡

> ID：13387839
> 
> 赞同：1
> 
> 时间：2012-11-14T21:41:49.680
> 
> 标签：java, android, eclipse, file-io

我试图在我的应用程序运行时将数据存储在一个文件中，以便在我将其连接到 PC 时轻松地将其从设备中取出。

现在，我可以创建文件并写入文件，但我的计算机看不到该文件。

请注意，我真的不想使用 DDMS，因为我会要求经验有限的人这样做。

我知道它正在写入文件，因为我可以在设备的文件管理器上看到它。如果我将文件复制到设备上的另一个目录中，然后我可以在计算机上看到它，但这对于我的情况来说不是一个有效的解决方法。

这是我所拥有的：

```
String fileName = "test";
String stuffToWrite = "testString";
try
{

  File sdCard = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
  File dir = new File (sdCard.getAbsolutePath());
  dir.mkdirs();
  File file = new File(dir, fileName + ".csv");

  file.setReadable(true,false);

  FileOutputStream fOut = new FileOutputStream(file);

  OutputStreamWriter osw = new OutputStreamWriter(fOut); 

  // Write the string to the file
  osw.write(stuffToWrite);

  /* ensure that everything is
   * really written out and close */
  osw.flush();
  osw.close();
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:04:06.137

以下示例将在 Android 外部存储根目录中创建一个名为“hello.txt”的文件：

```
package external.com;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import java.io.File;
import java.io.FileWriter;
import java.io.PrintWriter;

public class WriteExStorage extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String ex_storage_directory;

        ex_storage_directory = Environment.getExternalStorageDirectory().toString();

        File f = new File(ex_storage_directory, "hello.txt");

        try
        {
          PrintWriter p = new PrintWriter(new FileWriter(f));

          p.println("Hello External Storage!");
          p.close();
        }
        catch(java.io.IOException e)
        {
          return;
        }
    } 
```

如果外部存储设备不可用，对 getExternalStorageDirectory() 的调用将失败。有关详细信息，请参阅[getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:03:31.707

尝试添加 file.createNewFile();

```
File file = new File(dir, fileName + ".csv");
file.createNewFile(); 
```

# java - Java：获取带有布尔填充的圆的点

> ID：13387840
> 
> 赞同：1
> 
> 时间：2012-11-14T21:41:54.947
> 
> 标签：java, loops, vector, geometry, minecraft

我需要一种方法来获取圆的点，我有一个在网上找到的方法，但不幸的是我想在其中添加一个布尔值：

```
public static Location[] getCylinderAt(Location loc, int r, int height) {
    ArrayList<Location> list = new ArrayList<>();

    int cx = loc.getBlockX();
    int cy = loc.getBlockY();
    int cz = loc.getBlockZ();
    World w = loc.getWorld();
    int rSquared = r * r;

    for (int x = cx - r; x <= cx + r; x++) {
        for (int y = cy - height; y <= cy + height; y++) {
            for (int z = cz - r; z <= cz + r; z++) {
                if ((cx - x) * (cx - x) + (cz - z) * (cz - z) <= rSquared) {
                    list.add(new Location(w, x, y, z));
                }
            }
        }
    }
    return list.toArray(new Location[list.size()]);
} 
```

我无法真正理解与此相关的数学知识，并且一直在搜索非我的世界资源以创建自己的资源，但无济于事。

理想情况下，我希望能够将方法更改为：

```
public static Location[] getCylinderAt(Location loc, boolean filled, int r, int height) 
```

多谢你们！如果你喜欢我可以删除所有的 minecraft 引用，但我认为没有必要，因为 Location 基本上是一个 Vector，添加了一些 minecraft 唯一变量！

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:59:06.090

您是否正在寻找一种方法来计算圆的边缘上的像素，而不是内部的像素，对于 where 的`filled`情况`false`？如果是这样，请查看[中点圆算法](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)。它描述了如何在光栅图像中绘制圆。

# c# - 创建新列不显示正确的项目数

> ID：13387849
> 
> 赞同：1
> 
> 时间：2012-11-14T21:42:13.397
> 
> 标签：c#, wpf

我有一个列表（集合），共有 7 个项目，我正在循环以在列表视图中创建一个网格视图。我还有一个检查，例如，如果行数为 5，这将通过向其添加 1 创建一个新列。问题是当行数等于 5 并且为真时，第一列将有 7 个项目，而当创建第二列时，它不会显示剩余的 2 个项目。相反，它再次显示所有 7 个项目。

谁能帮忙，我做错了什么？

```
foreach (var item in lstOfSoda)
{
    GridLength rowheight1 = new GridLength();
    RowDefinition rowDef1 = new RowDefinition { Height = rowheight1 };
    grdSoda.RowDefinitions.Add(rowDef1);

    GridLength rowheight2 = new GridLength();
    RowDefinition rowDef2 = new RowDefinition { Height = rowheight2 };
    grdSoda.RowDefinitions.Add(rowDef2);

    GridLength columnwidth1 = new GridLength(231);
    ColumnDefinition colDef1 = new ColumnDefinition { Width = columnwidth1 };
    grdSoda.ColumnDefinitions.Add(colDef1);

    GridLength columnwidth2 = new GridLength(5);
    ColumnDefinition colDef2 = new ColumnDefinition { Width = columnwidth2 };
    grdSoda.ColumnDefinitions.Add(colDef2);

    ListView lvSoda = new ListView();
    lvSoda.SetValue(Grid.RowProperty, row + 1);
    lvSoda.SetValue(Grid.ColumnProperty, column);
    grdSoda.Children.Add(lvSoda);

    GridView gridView = new GridView();

    GridViewColumn gvcSodaName = new GridViewColumn();
    gvcSodaName.DisplayMemberBinding = new Binding("SodaName");
    gridView.Columns.Add(gvcSodaName);

    GridViewColumn gvcSodaFlavor = new GridViewColumn();
    gvcSodaFlavor.DisplayMemberBinding = new Binding("SodaFlavor");
    gridView.Columns.Add(gvcSodaFlavor);

    lvSoda.ItemsSource = lstOfSoda;
    lvSoda.View = gridView;
    rowCount++;

    if (rowCount == 5)
    {
        column = column + 2;
        rowCount = 0;
    }
} 
```

# wpf - 在 Windows XP (WPF) 上打印时 Crystal Reports 应用程序崩溃

> ID：13387850
> 
> 赞同：0
> 
> 时间：2012-11-14T21:42:16.297
> 
> 标签：wpf, printing, crystal-reports

此问题发生在使用 WPF的版本**13.0.4**（[从此处下载](http://scn.sap.com/docs/DOC-7824)）**（32 位）上。**

我正在使用 WPF 水晶报表查看器。如果我单击打印按钮，应用程序就会崩溃，并显示一个告诉您可以将此信息发送给 microsoft 的窗口。

为了避免任何其他错误的机会，我开发了一个示例应用程序，其中包含一个仅显示一个标签的报告。然后问题出现在装有 Windows XP Service Pack 3 的机器上

**编辑：我跟踪了以下堆栈跟踪**

```
at System.Windows.Size..ctor(Double, Double)
at SAPBusinessObjects.WPF.Viewer.ReportPaginator.GetPage(Int32)
at System.Windows.Xps.Serialization.Toolbox.GetPage(System.Windows.Documents.DocumentPaginator, Int32)
at System.Windows.Xps.Serialization.NgcDocumentPaginatorSerializer.SerializeObject(System.Object)
at System.Windows.Xps.Serialization.NgcSerializationManager.SaveAsXaml(System.Object)
at System.Windows.Xps.XpsDocumentWriter.SaveAsXaml(System.Object, Boolean)
at System.Windows.Xps.XpsDocumentWriter.Write(System.Windows.Documents.DocumentPaginator)
at System.Windows.Controls.PrintDialog.PrintDocument(System.Windows.Documents.DocumentPaginator, System.String)
at SAPBusinessObjects.WPF.Viewer.PrintControl.Print()
at SAPBusinessObjects.WPF.Viewer.ReportAlbum.PrintReport()
at SAPBusinessObjects.WPF.Viewer.CrystalReportsViewer.PrintReport_Executed(System.Object, System.Windows.Input.ExecutedRoutedEventArgs)
at System.Windows.Input.CommandBinding.OnExecuted(System.Object, System.Windows.Input.ExecutedRoutedEventArgs)
at System.Windows.Input.CommandManager.ExecuteCommandBinding(System.Object, System.Windows.Input.ExecutedRoutedEventArgs, System.Windows.Input.CommandBinding)
at System.Windows.Input.CommandManager.FindCommandBinding(System.Windows.Input.CommandBindingCollection, System.Object, System.Windows.RoutedEventArgs, System.Windows.Input.ICommand, Boolean)
at System.Windows.Input.CommandManager.FindCommandBinding(System.Object, System.Windows.RoutedEventArgs, System.Windows.Input.ICommand, Boolean)
at System.Windows.Input.CommandManager.OnExecuted(System.Object, System.Windows.Input.ExecutedRoutedEventArgs)
at System.Windows.UIElement.OnExecutedThunk(System.Object, System.Windows.Input.ExecutedRoutedEventArgs)
at System.Windows.Input.ExecutedRoutedEventArgs.InvokeEventHandler(System.Delegate, System.Object)
at System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)
at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
at System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject, System.Windows.RoutedEventArgs)
at System.Windows.UIElement.RaiseEvent(System.Windows.RoutedEventArgs, Boolean)
at System.Windows.Input.RoutedCommand.ExecuteImpl(System.Object, System.Windows.IInputElement, Boolean)
at System.Windows.Input.RoutedCommand.ExecuteCore(System.Object, System.Windows.IInputElement, Boolean)
at MS.Internal.Commands.CommandHelpers.CriticalExecuteCommandSource(System.Windows.Input.ICommandSource, Boolean)
at System.Windows.Controls.Primitives.ButtonBase.OnClick()
at System.Windows.Controls.Button.OnClick()

at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(System.Windows.Input.MouseButtonEventArgs)
at System.Windows.UIElement.OnMouseLeftButtonUpThunk(System.Object, System.Windows.Input.MouseButtonEventArgs)
at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(System.Delegate, System.Object)
at System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)
at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
at System.Windows.UIElement.ReRaiseEventAs(System.Windows.DependencyObject, System.Windows.RoutedEventArgs, System.Windows.RoutedEvent)
at System.Windows.UIElement.OnMouseUpThunk(System.Object, System.Windows.Input.MouseButtonEventArgs)
at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(System.Delegate, System.Object)
at System.Windows.RoutedEventArgs.InvokeHandler(System.Delegate, System.Object)
at System.Windows.RoutedEventHandlerInfo.InvokeHandler(System.Object, System.Windows.RoutedEventArgs)
at System.Windows.EventRoute.InvokeHandlersImpl(System.Object, System.Windows.RoutedEventArgs, Boolean)
at System.Windows.UIElement.RaiseEventImpl(System.Windows.DependencyObject, System.Windows.RoutedEventArgs)
at System.Windows.UIElement.RaiseTrustedEvent(System.Windows.RoutedEventArgs)
at System.Windows.UIElement.RaiseEvent(System.Windows.RoutedEventArgs, Boolean)
at System.Windows.Input.InputManager.ProcessStagingArea()
at System.Windows.Input.InputManager.ProcessInput(System.Windows.Input.InputEventArgs)
at System.Windows.Input.InputProviderSite.ReportInput(System.Windows.Input.InputReport)
at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr, System.Windows.Input.InputMode, Int32, System.Windows.Input.RawMouseActions, Int32, Int32, Int32)
at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr, MS.Internal.Interop.WindowMessage, IntPtr, IntPtr, Boolean ByRef)
at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
at MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
at MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
at System.Windows.Threading.Dispatcher.InvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)
at MS.Win32.UnsafeNativeMethods.DispatchMessage(System.Windows.Interop.MSG ByRef)
at System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame)
at System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame)
at System.Windows.Application.RunDispatcher(System.Object)
at System.Windows.Application.RunInternal(System.Windows.Window)
at System.Windows.Application.Run(System.Windows.Window)
at System.Windows.Application.Run()
at TestCrystalReports.App.Main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:38:14.807

您是否尝试在报告的页面设置中删除打印机关联？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T14:19:28.243

**我的解决方案** 我别无选择，我在 Crystal Report Viewer 的按钮上放了一个按钮，然后调用了 ReportDocument 的 PrintToPrinter 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:57:11.960

我遇到过同样的问题。崩溃与 PrintDialog 和现有打印机的枚举有关。

经过数小时的调试和谷歌搜索，我找到了一个可行的解决方案：安装（或重新安装）.NET framework 3.5 SP1。这将安装“Microsoft XPS Document Writer”打印机驱动程序。

真的不知道为什么，但安装后问题神奇地消失了。

# css - CSS 大纲属性未在 Firefox 中显示为 SVG 图像？

> ID：13387851
> 
> 赞同：3
> 
> 时间：2012-11-14T21:42:21.020
> 
> 标签：css, image, firefox, svg

我正在尝试设计一个使用 SVG 画布（完整的应用程序使用 d3）和画布上绘制的图像元素的交互。我希望每个图像在用户悬停或单击图像时以某种方式发生变化，以表明它已被选中。我能想到的最基本的样式更改是更改图像的轮廓（即在其周围画一个边框），这在 Chrome 23/Chromium 20 上运行良好。但是它对 Firefox 16 没有任何影响。

jsFiddle：http: [//jsfiddle.net/RSLsy/](http://jsfiddle.net/RSLsy/)

代码：

```
<!DOCTYPE HTML>
<html>
<body>

<style>
.map {
    background-color: blue;
}
.button:hover {
    outline: solid medium black;
}
</style>

<div>
<svg width="400" height="300" class="map">
    <image class="button" xlink:href="http://www.gstatic.com/ui/v1/button/search-white.png"
        x="10" y="10" width="20" height="20"/>
</svg>
</div>

</body>
</html> 
```

关于如何实现这种跨浏览器效果的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:08:16.053

如果您不限于使用 png 图像，并且可能将图标形状图像（如放大镜）用作 svg 路径，则可以使用 JQuery 为其填充、描边等设置动画。这是我为另一个关于动画的 SO 问题制作的小提琴悬停时的颜色变化，您可能可以重新调整用途。

[http://jsfiddle.net/webchemist/hBHBn/](http://jsfiddle.net/webchemist/hBHBn/)

在您的情况下，您希望将 JQuery UI Color 插件挂钩更改为

`jQuery.Color.hook('stroke');`

以获得轮廓效果。那个小提琴应该在 IE9 和所有当前版本的 Firefox、Opera、Chrome 和 Safari 中工作

**编辑**

我更新了你的小提琴，通过将图像元素包装在一个具有相同大小和图像位置的空矩形组中，在 chrome 和 firefox w css（尚未测试其他浏览器）中获得相同的效果。不知道为什么它不会在没有 rect 元素保持打开的情况下使 group 元素成为图像元素的大小。为每个图像元素添加重复的空矩形可能并不理想，但可能比为我的原始小提琴制作 svg 路径更容易解决方案

[http://jsfiddle.net/RSLsy/2/](http://jsfiddle.net/RSLsy/2/)

# .htaccess - 带有 CartThrob 的 SSL - 基于 URL 段的模板内重定向或 htaccess？

> ID：13387855
> 
> 赞同：0
> 
> 时间：2012-11-14T21:42:42.977
> 
> 标签：.htaccess, ssl, expressionengine, cartthrob

这是一个比我可能会问 CartThrob 人的更广泛的问题，这就是我在这里发布它的原因。就 SSL 与 CartThrob 的关系而言，社区会推荐什么？商店功能仅限于几个关键模板组。所以我的想法可能是处理它的最好方法是基于这些 URL 段的存在的 htaccess。当他们不在商店区域时，我想将用户返回到非 SSL 连接。例如，触发器可能是第一个段是“篮子”或“帐户”。或者模板内重定向到安全 URL 怎么样？非常有兴趣听到社区关于如何最好地在 EE 站点的给定区域内处理 SSL 的建议。我对最有意义的实施方式感兴趣，同时还要确保，例如，所有资产——即使是那些加载了路径变量的资产——都是通过 SSL 加载的。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:37:52.307

我一直在结帐屏幕上使用 CartThrob 的`https_redirect`标签 ( [docs](http://cartthrob.com/legacy_docs/tags_detail/https_redirect) )，它会重写您`{path}`(`{permalink}`等) 创建的 URL 以使用**https**，并在必要时将您重定向到页面的**https://版本。**

结合使用调用脚本和样式表的与协议无关的风格，应该可以让您在浏览器中获得安全图标。

（例子：）

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script> 
```

# ruby-on-rails - Rails - 构建不会在数据库中创建记录

> ID：13387856
> 
> 赞同：0
> 
> 时间：2012-11-14T21:42:47.970
> 
> 标签：ruby-on-rails, authentication, devise, omniauth

我正在尝试为我当前的设计系统添加身份验证控制器，以便通过 facebook 和 twitter 提供多个登录。为此，我正在关注本教程：[http ://railscasts.com/episodes/236-omniauth-part-2](http://railscasts.com/episodes/236-omniauth-part-2)

我的问题是，对于尚未注册并尝试在 Twitter 上注册的人。所以我需要为此创建用户和身份验证。

我的代码如下：

```
 user = User.new
      token = omni['credentials'].token
      token_secret = omni['credentials'].secret
      user.provider = omni.provider
      user.uid = omni.uid

      user.authentications.build(:provider => omni['provider'], :uid => omni['uid'], :token => token, :token_secret => token_secret)

      if user.save
        flash[:notice] = "Logged in."
        sign_in_and_redirect(:user, user)                
      else
        session["devise.user_attributes"] = user.attributes
        redirect_to new_user_registration_path
      end 
```

因此，在注册过程结束时，会创建新用户。但是在数据库中，我没有看到任何关于该用户的 Twitter 身份验证记录。

那是因为 user.authentications.build 吗？

如果你能帮助我，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:00:33.573

作为数据点：您所指的 railscasts 引用了 Omniauth pre-1.0，它的策略与 railscsts 引用的策略略有不同。（注意：我使用的是您在实时站点上引用的确切方法）。在这种情况下，构建调用“apply_omniauth” -

确保您已创建（正如他们在视频中引用的那样），一个用于构建资源的注册控制器。这是我当前的工作示例：

```
 class RegistrationsController < Devise::RegistrationsController
  def create
    super
    session[:omniauth] = nil unless @user.new_record?
  end

  private

  def build_resource(*args)
    super
    if session[:omniauth]
      # apply omniauth calls the user model and applies omniauth session to the info
      @user.apply_omniauth(session[:omniauth])

      #
      @user.valid?
    end
  end
end 
```

但是，您仍然需要创建身份验证记录，这是我的确切调用：

```
current_user.authentication.create!(:provider => omniauth['provider'], :uid => omniauth['uid']) 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:58:49.057

是的，这是因为构建

```
User.build # allocates a new record for you
User.create # allocates and then saves a new record for you 
```

所以我想你想要

```
user.authentications.create(:provider => omni['provider'], 
                            :uid => omni['uid'], 
                            :token => token, 
                            :token_secret => token_secret) 
```

另外，你应该处理创建不保存的情况（验证问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:57:33.923

我想如果你使用的是 Devise+Omniauth ，你可以看看这个更新的[Railscast](http://railscasts.com/episodes/235-devise-and-omniauth-revised)。新版本的 Devise gem 原生支持 OmniAuth。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T22:27:10.017

是的，这是因为构建，它用于构建记录而不将其保存在数据库中（就像新的一样）。

如果在您的模型中`User` `has_many :authentications`，您可以将`autosave`选项设置为 true 以在保存用户时自动保存身份验证：

`has_many :authentications, autosave: true`

# c# - 实施存储库 返回从 EF 实体映射的域模型

> ID：13387858
> 
> 赞同：2
> 
> 时间：2012-11-14T21:42:50.940
> 
> 标签：c#, entity-framework, repository-pattern

我有以下应用程序结构，基于 Jeffery Palermo 的洋葱架构[（参考链接）](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)。所以我的核心不依赖于任何东西，我的基础设施依赖于我的核心

我的核心有存储库合同，我的基础设施实现了它。实现被我的 IoC 容器注入

```
Core
-Interfaces
--IRepository<TDomainModel>
-Domain
--Person

Infrastructure
-Data
--Repository<TDomainModel> (Implementation)
-Entities
--Ef.edmx 
```

因此，如果我写出一个具体的存储库实现（例如 PersonRepository），这将不是问题，因为我也知道要投影/映射的类型。

示例具体实现：

```
public class PersonRepository
{
 ...
   public IQueryable<PersonDomainClass> GetByName(string name)
   {
      return Dbcontext.Person.Where(x => x.name == name).Select(x => new Person());
   }
  ...
} 
```

我想要什么：

```
 public class Repository<TDomainModel> : IRepository<TDomainModel>
 {
     //Problem 1\. We can't set the DbSet to a Domain Model
     private DbSet<TDomainModel> dbEntity; 
     ...
       public IQueryable<TDomainModel> GetWhere((Expression<Func<TDomainModel, bool>> predicate))
       {
           //Problem 2\. I Don't think this will work because the predicate is ofType TDomainModel    
           //and not an EF Entity!? 
           var entities = dbEntity.Where(predicate);

        var domainObjects = Mapper.Map <IQueryable<TDomainModel>, IQueryable<TEntityModel>> (entities);

        return domainObjects;
       }
      ...
} 
```

我可能会以错误的方式解决这个问题，所以我打开了其他实现。

**更新**

好吧，谢谢大家的想法和建议。[usr](https://stackoverflow.com/users/122718/usr)提出了一个我忽略的非常好的观点——如果我对我的 ORM 进行抽象，我将失去 ORM 提供的所有好处。

我正在使用 EF Database First 开发。所以我的实体与我的存储库实现一起在我的基础设施中。

域与此分开，因为我正在基于洋葱架构构建我的应用程序。

如果我在做 Code First，似乎要做的事情是先构建您的域，然后使用 EF Code 首先将其转换为数据库。

我不能先写代码:(

因此，EF 团队 @Microsoft 的实体框架 DbCotnext POCO 生成器分步进行。这会根据我的 edmx 文件生成持久的无知 POCO 类

到目前为止，这似乎很棒，我拥有延迟加载和更改跟踪的所有好处，甚至更好地为我生成了我的域，并且实体框架在内部处理映射。这简化了我的应用程序:)

所以这不是我的架构的高级视图

```
Core
-Interfaces
--IRepository<TEntity>
---IPersonRepository<Person>
---IFooRepository<Foo>
-Domain
--Person (Auto Generated)
--Foo (Auto Generated)

Infrastructure
-Data
--Repository<TEntity> (Implementation)
---PersonRepository<Person>
---FooRepository<Foo>
-Entities
--Ef.edmx 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:10:16.727

存储库模式用于为数据层提供抽象？正确的？

考虑到这一点，让我们考虑一下 LINQ to SQL（无论是通过 EF、nhibernate 还是其他方式）。没有与 LINQ 100% 完全兼容的 LINQ to SQL 提供程序。总有不能用的情况。因此 LINQ to SQL 是一个有漏洞的抽象。

这意味着如果您使用暴露的存储库接口，`IQueryable<TDomainModel>`或者`Expression<Func<TDb, bool>> where`您必须了解这些限制。因此，它不是一个完整的抽象。

相反，我建议您只提供一个基本的通用存储库，如下所示：

```
interface IRepository<TEntity, TKey>
{
    TEntity Get(TKey key);
    void Save(TEntity entity);
    void Delete(TEntity entity);
} 
```

然后创建根聚合特定接口：

```
interface IUserRepository : IRepository<User, int>
{
    User GetByUserName(string userName);
    IEnumerable FindByLastName(string lastName);
} 
```

这意味着实现看起来像：

```
public class UserRepository : EfRepository<User>, IUserRepository
{
    //implement the interfaces declared in IUserRepository here
} 
```

它现在是一个 100% 工作的抽象，可以更容易地判断存储库提供了哪些功能。您现在必须编写更多代码，但以后不必为泄漏的抽象而苦苦挣扎。

您也可以切换到我在这里演示的查询：http: [//blog.gauffin.org/2012/10/griffin-decoupled-the-queries/](http://blog.gauffin.org/2012/10/griffin-decoupled-the-queries/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:09:03.547

看看[AutoMapper](http://automapper.org/)。这可能有助于通用映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:12:30.113

您正在以正确的方式进行，但我建议在您的解决方案中添加额外的抽象：

```
public abstract class RepositoryBase<T, TDb> : where T : new() where TDb : class, new()
{
    protected IQueryable<T> GetBy(Expression<Func<TDb, bool>> where = null,
                                  PagingSortOptions? pagingSortOptions = null)
    {
        //GetDbSet basic method to get DbSet in generic way 
        IQueryable<TDb> query = GetDbSet();

        if (where != null)
        {
            query = query.Where(where);
        }

        if (pagingSortOptions != null)
        {
            query = query.InjectPagingSortQueryable(pagingSortOptions);
        }

        return query.Select(GetConverter());
    }

    protected virtual Expression<Func<TDb, T>> GetConverter()
    {
        return dbEntity => Mapper.Map<TDb, T>(dbEntity);
    }
}

public class CountryRepository : RepositoryBase<CountryDomainModel, CountryDb>, ICountryRepository
{
    public Country GetByName(string countryName)
    {
        return GetBy(_ => _.Name == countryName).First();
    }
}

public interface ICountryRepository : IRepository<CountryDomainModel>
{
    Country GetByName(string countryName);
}

public interface IRepository<TDomainModel>
{
    //some basic metods like GetById
} 
```

比您将使用的外部数据库层`ICountryRepository`。

# java - 将 int 转换为 String，然后使用 XOR 对其进行加密

> ID：13387862
> 
> 赞同：2
> 
> 时间：2012-11-14T21:43:17.703
> 
> 标签：java, string, encryption, character-encoding, int

我正在尝试将整数转换为字符串，然后使用 XOR 加密对字符串进行加密。但是当我再次解密我的 Strin 时，我得到了一个不同的答案，即我在加密之前输入的字符串，我不知道我做错了什么？

```
public class Krypte {
public static void main (String [] args) {
    int i = 12345;

    String k = Integer.toString(i);
    String G = secure(k.getBytes());
    System.out.println("Encrypted: " + G);

    String U = secure(G.getBytes());
    System.out.println("Decrypted: " + U);
    int X = Integer.parseInt(U);
    System.out.println("As an int: " + X);

}

public static String secure(byte[] msg) {
    // Variables
    int outLength = msg.length;
    byte secret = (byte) 0xAC; // same as 10101100b (Key)
    // XOR kryptering
    for (int i = 0; i < outLength; i++) {
        // encrypting each byte with XOR (^)
        msg[i] = (byte) (msg[i] ^ secret);
    }
    return new String(msg);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T22:45:10.137

`char`和`byte`类型之间存在微妙（但非常重要）的区别。考虑一下：

```
class Krypte {
    public static void main (String [] args) {
        int i = 12345;
        String k = Integer.toString(i);
        System.out.println("Before: " + k);    
        String G = secure(k.toCharArray());
        System.out.println("Encrypted: " + G);
        String U = secure(G.toCharArray());
        System.out.println("Decrypted: " + U);
        int X = Integer.parseInt(U);
        System.out.println("As an int: " + X);
    }

    public static String secure(char[] msg) {
        // Variables
        int outLength = msg.length;
        byte secret = (byte) 0xAC; // same as 10101100b (Key)
        // XOR kryptering
        for (int i = 0; i < outLength; i++) {
            // encrypting each byte with XOR (^)
            System.out.println("Byte before: " + msg[i]);
            msg[i] = (char) (msg[i] ^ secret);
            System.out.println("Byte after: " + msg[i]);
        }
        return new String(msg);
    }
} 
```

这行得通（[证明](http://ideone.com/DLGpZE)），因为用一个字节对某些*字符值进行异或（*[很可能](http://en.wikipedia.org/wiki/UTF-8#Invalid_code_points)）会给你一个有效的*字符*。

不要让我们看看[原始代码段](http://ideone.com/CMFxx8)中发生了什么- 通过将此调试输出添加到方法的主循环中`secure`：

```
 System.out.println("Byte before: " + msg[i]);
 msg[i] = (byte) (msg[i] ^ secret);
 System.out.println("Byte after: " + msg[i]); 
```

输出将是：

```
Byte before: 49
Byte after: -99
Byte before: 50
Byte after: -98
Byte before: 51
Byte after: -97
Byte before: 52
Byte after: -104
Byte before: 53
Byte after: -103 
```

没关系：第一个`getBytes`函数使用平台的*默认 charset将给定的字符串**编码*为字节数组。字符被编码为字节值；变成等*`'1'``49``'2'``50`*

 *然后我们用我们的键对这些值进行异或运算 - 并得到这个字节序列：

```
-99 -98 -97 -104 -103 
```

最后一步似乎很简单：我们只是从这个字节序列中创建（并返回）一个新的字符串，这里会出现什么问题？但事实上，这正是风扇受到打击的那一步。)

看，`String`构造函数尝试*使用平台的默认字符集*来处理这个字节序列。实际上，对于某些字符集，这些字节代表一系列有效字符就可以了——但对于 UTF-8 则不行！

...您可能已经猜到接下来会发生什么。对于每个“不可解码”的字节序列，如此处[所述](http://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences)，第*一个*字节被转换为所谓的[替换字符](http://en.wikipedia.org/wiki/Replacement_character#Replacement_character)，并重试其他字节。`secure`在此特定示例中，第一次调用返回的字符串中将有五个失败迹象。

解码这个字符串是毫无意义的——因为它不存储关于目标字符串的任何信息（长度除外）。这就是原始代码最终失败的原因。*

# php - 私有 HTTP/POST

> ID：13387863
> 
> 赞同：-3
> 
> 时间：2012-11-14T21:43:20.313
> 
> 标签：php, javascript, post

我有一个向 PHP 服务器请求的 HTML 代码。我只想参加完成我的 HTML 代码的请求，而不是其他请求。我想用 javascript 做一些类似于令牌的事情，并且只回答正确的令牌，但我有一个问题：我使用 MediaWiki，而 javascript 代码是“开源的”（是的，POST 请求是从 MediaWiki 完成的）。

有谁知道如何进行私人 POST 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:02:30.893

生成一个随机令牌，如

`$_SESSION['token']=sha1(uniqid(mt_rand(), true));`

将令牌值放入隐藏输入中

`<input type='hidden' name='token' value=$_SESSION['token'] />`

然后，在您的 php 中检查令牌是否已发送

```
if($_REQUEST['token']!=$_SESSION['token']){
    syslog(LOG_ERR, "Request from other site ...");
    die("Request failed. (Disabled cookies?) Contact administrator: ...");
} 
```

看这个链接：[http ://en.wikipedia.org/wiki/Cross-site_request_forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:49:09.830

您想了解[身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)。

# c# - 强制自动 linq to sql 类具有 pascal case 属性？

> ID：13387868
> 
> 赞同：1
> 
> 时间：2012-11-14T21:43:42.367
> 
> 标签：c#, linq-to-sql, properties, camelcasing, pascalcasing

我的 SQL 数据库有驼峰式的列名。我正在使用带有 C# 的 Linq to SQL。

有没有办法强制在帕斯卡情况下自动生成属性？

驼峰式属性不符合 C# 标准，每次我需要重新创建类时手动执行它很痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:12:40.333

如果您的数据库非常大并且手动重命名实体非常耗时，那么：

*   下载[T4 的 LINQ to SQL 模板](http://l2st4.codeplex.com/)并将两个文件添加到您的项目`CSharpDataClasses.tt`和`L2ST4.ttinclude`.
*   重命名``CSharpDataClasses.tt`以匹配您的`dbml`文件名（例如`Northwind.tt`）
*   选择`dmbl`文件（例如`Northwind.dbml`）并`MSLinqToSQLGenerator`从`Custom Tool`属性中删除。
*   `L2ST4.ttinclude`按照进一步描述打开并更改它
*   选择`Northwind.tt`文件并按下`Ctrl+S`（这将运行 LINQ 2 SQL 类生成）。

**L2ST4.ttinclude 文件更改：**

找到类的定义`Data`（在文件的顶部）并将此代码粘贴到它之前：

```
class Lazy
{
   public static string FirstLetterToUpper(string str)
   {
       return Char.ToUpper(str[0]) + str.Substring(1);
   }
} 
```

然后找到类的定义`Table`并在构造函数中将`Member`属性初始化替换为

```
Member = Lazy.FirstLetterToUpper((String)xe.Attribute("Member")); 
```

查找类`Class`并在构造函数中将`Name`属性初始化替换为

```
Name = Lazy.FirstLetterToUpper((String) xe.Attribute("Name")); 
```

最后，`Association`在其构造函数集中找到类

```
typeName = Lazy.FirstLetterToUpper((String) xe.Attribute("Type")); 
```

* * *

PS如果你真的很懒，那么使用我已经更改的[这个 L2ST4.ttinclude 文件](http://www.mediafire.com/?5pfamnrb3y506r9):)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:50:21.107

我建议 T4 项目[l2st4.codeplex.com](http://l2st4.codeplex.com/)的 LINQ to SQL 模板。您可以根据需要自定义它。

# mysql - 在mysql中创建索引不起作用

> ID：13387870
> 
> 赞同：2
> 
> 时间：2012-11-14T21:43:44.417
> 
> 标签：mysql, sql, indexing

我正在使用 MYSQL Server 5.0 并且我试图使用 SQL Server 的下一句并且根本不工作。请问有什么方法可以将此应用到Mysql。非常感谢你。

```
CREATE NONCLUSTERED INDEX [IX_Dave_General] ON [dbo].[Stock]

    (
            [ArticleID] ASC,
              [TranDate] DESC,
            [TranCode] ASC
    )
    INCLUDE ( [Items],
    [Price]) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:54:20.393

原始`SQL Server`索引使用了两个特性：覆盖索引（下有非键列`INCLUDE`）和混合排序方向（`ASC`和`DESC`列）。

这些都不支持`MySQL`。

如果您仍然需要索引（例如所有三列的完全匹配），请使用@Ray 的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T21:46:29.250

假设您的表是“Stock”，并且您想要一个包含（ArticleID、TranDate、TranCode）的复合索引。

```
CREATE INDEX your_index_name ON Stock (ArticleID,TranDate, TranCode); 
```

对于 myISAM 或 InnoDb 存储引擎，我不知道 MySQL 中是否有任何其他信息。

要包含其他字段以创建覆盖索引，只需将它们添加到声明中：

```
CREATE INDEX your_index_name ON Stock (ArticleID,TranDate, TranCode, Items, Price); 
```

我假设您声明中“包含”的商品和价格是 Stock 表的一部分。

请注意，这里的巨大牺牲是插入和磁盘空间以拥有如此大的覆盖索引。

# java - Java Parse Xml Vimeo - 提取缩略图 url

> ID：13387877
> 
> 赞同：1
> 
> 时间：2012-11-14T21:44:43.680
> 
> 标签：java, xml, parsing

我有以下来自 vimeo 的 xml 文件：http: [//vimeo.com/api/v2/video/21331554.xml](http://vimeo.com/api/v2/video/21331554.xml)

我正在尝试使用以下代码提取缩略图媒体：

```
File fXmlFile = new File("http://vimeo.com/api/v2/video/" + linkId + ".xml");
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(fXmlFile);
doc.getDocumentElement().normalize();
return ((Node) doc.getElementsByTagName("thumbnail_medium")).getNodeValue(); 
```

但我得到“未定义”作为回报

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:13:10.963

您不能将[NodeList 强制](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/NodeList.html)转换为[Node](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Node.html)所以这一行：

```
return ((Node) doc.getElementsByTagName("thumbnail_medium")).getNodeValue(); 
```

抛出一个 ClassCastException。因此，您需要获取 NodeList 中的唯一项目并使用以下行获取其文本值：

```
return doc.getElementsByTagName("thumbnail_medium").item(0).getTextContent(); 
```

我用这两种方法对此进行了测试：

```
@Test
public void domTestVimeo() throws ParserConfigurationException,
        SAXException, IOException {

    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(new ClassPathResource("vimeo.xml")
            .getInputStream());
    doc.getDocumentElement().normalize();

    String val = ((Node) doc.getElementsByTagName("thumbnail_medium"))
            .getNodeValue();

    System.out.println(val);

} 
```

和

```
@Test
public void yourTest() throws ParserConfigurationException, SAXException,
        IOException {
    // File fXmlFile = new File("http://vimeo.com/api/v2/video/" + 21331554
    // + ".xml");

    InputStream is = new ClassPathResource("vimeo.xml").getInputStream();

    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(is);
    doc.getDocumentElement().normalize();
    String val = doc.getElementsByTagName("thumbnail_medium").item(0)
            .getTextContent();

    System.out.println(val);

} 
```

第一个抛出 ClassCastException ，第二个打印`http://b.vimeocdn.com/ts/137/151/137151977_200.jpg`我认为这是您正在寻找的值。

另外，您是如何从传递 URL 的 File 对象中读取的？

# haskell - Haskell：泛型函数中的绑定值

> ID：13387881
> 
> 赞同：1
> 
> 时间：2012-11-14T21:44:51.610
> 
> 标签：haskell

我想做类似的事情：

```
succ' :: (Bounded a, Eq a, Enum a) => a -> a
succ' n
| n == (maxBound :: a) = minBound :: a
| otherwise = succ n 
```

但这不起作用。如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T21:50:07.583

几种可能性，Haskell2010方式，

```
succ' :: (Bounded a, Eq a, Enum a) => a -> a
succ' n
  | n == maxBound = minBound
  | otherwise = succ n 
```

类型由两者的用途、类型确定，`maxBound`并且`minBound`必须是参数的类型。

或者您可以使用`ScopedTypeVariables`扩展，将类型变量带入范围，以便可以在本地类型签名中使用，

```
{-# LANGUAGE ScopedTypeVariables #-}

succ' :: forall a. (Bounded a, Eq a, Enum a) => a -> a
succ' n
  | n == (maxBound :: a) = minBound :: a
  | otherwise = succ n 
```

但是，如上所示，这里没有必要这样做。

第三种可能性是使用`asTypeOf :: a -> a -> a`,

```
succ' :: (Bounded a, Eq a, Enum a) => a -> a
succ' n
  | n == (maxBound `asTypeOf` n) = minBound `asTypeOf` n
  | otherwise                    = succ n 
```

同样，这里不需要它，但在其他情况下可能很有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T21:49:21.127

您不需要类型注释，它们是您得到的错误的来源：

```
succ' :: (Bounded a, Eq a, Enum a) => a -> a
succ' n
 | n == maxBound = minBound
 | otherwise = succ n 
```

（这在 Haskell 98 和 Haskell 2010 中有效，所以几乎所有的编译器都在你身边。）另外，我缩进`|`了一点，因为它们不能与函数的开头对齐；它们是定义的一部分`succ'`，而不是独立代码。

下面是一些测试数据：

```
data Test = A | B | C 
   deriving (Bounded, Eq, Enum, Show)

test = map succ' [A .. C] 
```

我得到了`[B,C,A]`。

# casting - 错误从“Int32”到“DateTime”的无效转换

> ID：13387883
> 
> 赞同：1
> 
> 时间：2012-11-14T21:44:51.853
> 
> 标签：casting

在我的数据库中，我有表：

```
ID          int 
UserName    nvarchar(50)    
NoiDung         ntext   
Trangthai   nvarchar(50)    
GhiChu          ntext
NgayThucHien    datetime    
ThoiHan         datetime 
```

和要插入的 SQL 过程：

```
GO
ALTER PROCEDURE [dbo].[Insert_DBangKe]
@UserName nvarchar(50),
@NoiDung ntext,
@TrangThai nvarchar(50),
@GhiChu ntext,
@Ngay datetime,
@Han datetime
AS
    INSERT INTO DBangKe
    (
        UserName,
        NoiDung,
        TrangThai,
        GhiChu,
        NgayThucHien,
        ThoiHan
    )VALUES
    (
        @UserName,
        @NoiDung,
        @TrangThai,
        @GhiChu,
        @Ngay,
        @Han
    ) 
```

在我的 Project Web 中，我有 APSxGridView 来显示并允许插入、删除、编辑。

1.  APSxGridView 加载无行
2.  当我单击插入并键入值时，然后从 AspxDateedit 中选择日期。单击更新，其显示错误：从“Int32”到“日期时间”的无效转换。我怎样才能修复这个？

# django - django模板上的动态名称变量

> ID：13387885
> 
> 赞同：0
> 
> 时间：2012-11-14T21:45:02.880
> 
> 标签：django, django-templates

我在使用 django 时遇到问题。我有一个包含我所有网站文本的字典以供翻译。例如：

```
term = {"level_1": "Noob",
        "level_2": "Noob 2"} 
```

问题是，如何在 django 模板上访问此密钥？

我有

```
img src="/images/level_{{player.level.id}}.jpg" 
    title="{{term.level??????? }}" 
```

我试过了：

```
title="{{term.level{{player.level.id}}}} 
```

但这当然没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:00:28.660

Django 的模板语言（按设计）非常愚蠢/受限。在他的评论中，Davind Wolever 指出[在 Django 模板中通过变量访问字典？](https://stackoverflow.com/questions/2067006/accessing-a-dict-by-variable-in-django-templates)，其中一个答案建议制作自定义模板标签。

我认为在您的情况下，最好在您的视图代码中处理它。不仅将 a 传递`player`到您的上下文中，还传递关卡 ID 和关卡名称。

可能你甚至可以直接传递图像 url 和关卡名称？不在模板中构建 URL 会使其更具可读性。

# php - 在包含的 html 中使用 php 变量

> ID：13387887
> 
> 赞同：2
> 
> 时间：2012-11-14T21:45:21.100
> 
> 标签：php, include, var

我正在寻找类似于[在 HTML 标记中使用 PHP 变量的东西？](https://stackoverflow.com/questions/6130596/using-php-variables-inside-html-tags)问题，但有点不同。

就我而言，我想使用这样的代码：

```
$somevar = 'a test';

include("file.html"); 
```

和 file.html 将包含

```
<b>hello, this is {$somevar}</b> 
```

问题是它只是打印 **`hello, this is {$somevar}`**.

如何让 HTML 读取包含文件中的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:46:26.437

```
echo "<b>hello, this is {$somevar}</b>"; 
```

或者

```
<b>hello, this is <?=$somevar?></b> 
```

或者

```
<b>hello, this is <?php echo $somevar; ?></b> 
```

或者

```
<b>hello, this is <?php print $somevar; ?></b> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:46:51.493

您需要在想要访问它的其他程序中包含变量定义程序。例子：

```
 Say test.html has $somevar.
   in file.html you do,

   <?php
   include('test.html');
    echo "<b>hello, this is $somevar</b>"; 
   ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:49:10.767

```
<?php
include "stuff.php";
$somevar = "test";
?>

<html>
    <body><p><?php echo($somevar); ?></p></body>
</html> 
```

# python-2.7 - 为什么一个对象不能在 Python 包 ComplexNetworkSim 中使用方法作为属性？

> ID：13387898
> 
> 赞同：3
> 
> 时间：2012-11-14T21:46:23.860
> 
> 标签：python-2.7, agent-based-modeling

我正在尝试使用继承自[networkx](http://networkx.lanl.gov/)和[SimPy的 Python 包](http://simpy.sourceforge.net/)[ComplexNetworkSim](http://pypi.python.org/pypi/ComplexNetworkSim)来模拟消息如何在网络中传播[的基于代理的模型](http://en.wikipedia.org/wiki/Agent-based_model)。

这是我的代码：

```
from ComplexNetworkSim import NetworkSimulation, NetworkAgent, Sim
import networkx as nx

#define constants for our example of states
NO_MESSAGE = 0 
MESSAGE = 1

class Message(object):
    def __init__(self,topic_pref):
        self.relevance = topic_pref

class myAgent(NetworkAgent):
    def __init__(self, state, initialiser):
        NetworkAgent.__init__(self, state, initialiser)
        self.state = MESSAGE
        self.topic_pref = 0.5

    def Run(self):
        while True:
            if self.state == MESSAGE:
                self.message = self.Message(topic_pref, self, TIMESTEP)
                yield Sim.hold, self, NetworkAgent.TIMESTEP_DEFAULT
            elif self.state == NO_MESSAGE:
                yield Sim.hold, self, NetworkAgent.TIMESTEP_DEFAULT

# Network and initial states of agents
nodes = 30 

G = nx.scale_free_graph(nodes)
states = [MESSAGE for n in G.nodes()]  

# Simulation constants
MAX_SIMULATION_TIME = 25.0
TRIALS = 2

def main():
    directory = 'test' #output directory

    # run simulation with parameters
    # - complex network structure
    # - initial state list
    # - agent behaviour class
    # - output directory
    # - maximum simulation time
    # - number of trials
    simulation = NetworkSimulation(G,
                                   states,
                                   myAgent,
                                   directory,
                                   MAX_SIMULATION_TIME,
                                   TRIALS)
    simulation.runSimulation()

if __name__ == '__main__':
    main() 
```

（此代码下游可能存在其他问题，并且尚未经过全面测试。）

我的问题是**myAgent 对象没有正确调用方法 Run as a attribute**。具体来说，这是我尝试运行上述代码时收到的错误消息：

```
Starting simulations...
---Trial 0 ---
set up agents...
Traceback (most recent call last):
  File "simmessage.py", line 55, in <module>
    main()
  File "simmessage.py", line 52, in main
    simulation.runSimulation()
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/ComplexNetworkSim-0.1.2-py2.7.egg/ComplexNetworkSim/simulation.py", line 71, in runSimulation
    self.runTrial(i)
  File "/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/site-packages/ComplexNetworkSim-0.1.2-py2.7.egg/ComplexNetworkSim/simulation.py", line 88, in runTrial
    self.activate(agent, agent.Run())            
AttributeError: 'myAgent' object has no attribute 'Run' 
```

有人知道这是为什么吗？我无法弄清楚我的代码与[ComplexNetworkSim](http://packages.python.org/ComplexNetworkSim/start.html)中的示例有何本质不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:48:42.670

我已经在我的机器上运行了你的代码，并在那里调用了 Run 方法。

我最好的猜测是 Paulo Scardine 写的，但由于我无法重现该问题，我实际上无法调试它。

# c++ - 谐波级数和 c++ openMP

> ID：13387900
> 
> 赞同：2
> 
> 时间：2012-11-14T21:46:25.547
> 
> 标签：c++, parallel-processing, openmp

我正在尝试使用 opemMP 制作“Harmonic Progression Sum”问题的并行版本。但是输出因输入而异。（并行和顺序）

**程序：**

```
#include "stdafx.h"
#include <iostream>
#include <sstream>
#include <omp.h>
#include <time.h>

#define d 10    //Numbers of Digits (Example: 5 => 0,xxxxx)
#define n 1000  //Value of N (Example: 5 => 1/1 + 1/2 + 1/3 + 1/4 + 1/5)

using namespace std;

void HPSSeguencial(char* output) {
    long unsigned int digits[d + 11];

    for (int digit = 0; digit < d + 11; ++digit)
        digits[digit] = 0;

    for (int i = 1; i <= n; ++i) {
        long unsigned int remainder = 1;
        for (long unsigned int digit = 0; digit < d + 11 && remainder; ++digit) {
            long unsigned int div = remainder / i;
            long unsigned int mod = remainder % i;
            digits[digit] += div;
            remainder = mod * 10;
        }
    }

    for (int i = d + 11 - 1; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    if (digits[d + 1] >= 5) {
        ++digits[d];
    }

    for (int i = d; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    stringstream stringstreamA;
    stringstreamA << digits[0] << ",";

    for (int i = 1; i <= d; ++i) {
        stringstreamA << digits[i];
    }
    string stringA = stringstreamA.str();
    stringA.copy(output, stringA.size());
}

void HPSParallel(char* output) {
    long unsigned int digits[d + 11];

    for (int digit = 0; digit < d + 11; ++digit)
        digits[digit] = 0;

    int i;
    long unsigned int digit;
    long unsigned int remainder;
    #pragma omp parallel for private(i, remainder, digit)
    for (i = 1; i <= n; ++i) {
        remainder = 1; 
        for (digit = 0; digit < d + 11 && remainder; ++digit) {
            long unsigned int div = remainder / i;
            long unsigned int mod = remainder % i;
            digits[digit] += div;
            remainder = mod * 10;
        }
    }

    for (int i = d + 11 - 1; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    if (digits[d + 1] >= 5) {
        ++digits[d];
    }

    for (int i = d; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    stringstream stringstreamA;
    stringstreamA << digits[0] << ",";

    for (int i = 1; i <= d; ++i) {
        stringstreamA << digits[i];
    }
    string stringA = stringstreamA.str();
    stringA.copy(output, stringA.size());
}

int main() {
    //Sequential Method
    cout << "Sequential Method: " << endl;
    char outputSeguencial[d + 10];
    HPSSeguencial(outputSeguencial);
    cout << outputSeguencial << endl;

    //Cleaning vector
    string stringA = "";
    stringA.copy(outputSeguencial, stringA.size());

    //Parallel Method
    cout << "Parallel Method: " << endl;
    char outputParallel[d + 10];
    HPSParallel(outputParallel);
    cout << outputParallel << endl;

    system("PAUSE");
    return 0;
} 
```

**例子：**

***输入：***

```
#define d 10
#define n 1000 
```

***输出：***

```
Sequential Method:
7,4854708606╠╠╠╠╠╠╠╠╠╠╠╠
Parallel Method:
6,6631705861╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠ÇJ^ 
```

***输入：***

```
#define d 12
#define n 7 
```

***输出：***

```
Sequential Method:
2,592857142857╠╠╠╠╠╠╠╠╠╠╠╠╠╠ÀÂ♂ü─¨@
Parallel Method:
2,592857142857╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠ÇJJ 
```

**问候**

***粘贴代码***

[http://pastecode.org/index.php/view/62768285](http://pastecode.org/index.php/view/62768285)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:22:43.897

`digits`更新数组时，您的线程会互相踩踏。因此，一些添加会丢失，并且您会得到虚假的结果（几乎可以肯定，在不同的运行中会出现不同的结果）。

您必须将写入同步到`digits`，例如与原子（或关键）部分：

```
// ... <snip>
#pragma omp parallel for private(i, remainder, digit)
for (i = 1; i <= n; ++i) {
    remainder = 1; 
    for (digit = 0; digit < d + 11 && remainder; ++digit) {
        long unsigned int div = remainder / i;
        long unsigned int mod = remainder % i;
        #pragma omp atomic     // <- HERE, could also be #pragma omp critical
        digits[digit] += div;
        remainder = mod * 10;
    }
}
// <snip> ... 
```

这样一次只有一个线程可以更新数组。但是，对于这样的任务，这可能会抵消将任务拆分为多个线程的任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:27:37.613

正如[Daniel Fischer](https://stackoverflow.com/a/13388427/1380707)指出的那样，你有一个写冲突，但你可以比使用一个`omp critical`部分更优雅地避免它，例如通过给每个线程它自己的副本`digits`并在循环结束时将它们全部聚合。

# python - 如何返回 Instagram 实时订阅挑战？

> ID：13387911
> 
> 赞同：2
> 
> 时间：2012-11-14T21:47:06.187
> 
> 标签：python, google-app-engine, instagram

我正在尝试订阅标签。`hub.challenge`似乎使用and正确调用了回调 URL `hub.mode`，我想出了如何使用`self.request.get('hub.challenge')`. 我以为我只是应该回应挑战，但这似乎不起作用，因为我在 GAE 日志中收到以下错误：

```
InstagramAPIError: (400) APISubscriptionError-Challenge verification failed. Sent "647bf6dbed31465093ee970577ce1b72", received "
647bf6dbed31465093ee970577ce1b72
". 
```

这是完整的处理程序：

```
class InstagramHandler(BaseHandler):
    def get(self):
        def process_tag_update(update):
            update = update

        mode         = self.request.get('hub.mode')
        challenge    = self.request.get('hub.challenge')
        verify_token = self.request.get('hub.verify_token')
        if challenge:
            template_values = {'challenge':challenge}
            path = os.path.join(os.path.dirname(__file__), '../templates/instagram.html')
            html = template.render(path, template_values)
            self.response.out.write(html)
        else:
            reactor = subscriptions.SubscriptionsReactor()
            reactor.register_callback(subscriptions.SubscriptionType.TAG, process_tag_update)

            x_hub_signature = self.request.headers.get('X-Hub-Signature')
            raw_response    = self.request.data
            try:
                reactor.process('INSTAGRAM_SECRET', raw_response, x_hub_signature)
            except subscriptions.SubscriptionVerifyError:
                logging.error('Instagram signature mismatch') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:03:36.940

所以将它作为字符串返回是可行的。我应该更仔细地注意错误消息，但是 Python IRC 上的一位乐于助人的人指出了消息中的额外换行符。一旦我将模板文件放在一行上，它似乎就可以工作了。我现在可以确认我的应用已通过 Instagram 的列表订阅 URL 获得授权。

# scala - 如何使用不可变集合和 if 语句编写正确的 Scala？

> ID：13387914
> 
> 赞同：1
> 
> 时间：2012-11-14T21:47:16.420
> 
> 标签：scala, collections, scala-collections

我想要以下功能：采用以下参数：

*   `def filters: Map[String, String]`
*   `def queryString: Map[String, Seq[String]]`（来自 request.queryString）
*   `def key: String`

..如果`queryString`包含`key`指定的参数，我想将相应的值添加到`filters`。

一个工作函数是：

```
private def getUpdatedFiltersIfQueryStringContains(filters: Map[String, String], queryString: Map[String, Seq[String]], key: String): Map[String, String] = {
  var updatedFilters: Map[String, String] = filters

  if (queryString.contains(key)) {
    updatedFilters = updatedFilters ++ Map(key -> queryString.get(key).get.head)
  }

  updatedFilters
} 
```

这看起来很可怕，对吧？

由于`if`语句在 Scala 中返回内容，因此我期待更多类似的内容：

```
private def getUpdatedFiltersIfQueryStringContains(filters: Map[String, String], queryString: Map[String, Seq[String]], key: String): Map[String, String] = {
  if (queryString.contains(key)) {
    filters ++ Map(key -> queryString.get(key).get.head)
  }
} 
```

但这不会编译，错误是：

> 类型不匹配; 找到：所需单位：地图[字符串，字符串]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T22:00:11.687

你可以使用更一元的

`queryString.get(key) map { v => filters ++ Map(key -> v.head) } getOrElse filters`

哪个做你想要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T22:53:49.660

这是一个不使用的更惯用的实现`if`：

```
def getUpdatedFiltersIfQueryStringContains(filters: Map[String, String], queryString: Map[String, Seq[String]], key: String): Map[String, String] =
  filters ++ queryString.get(key).map(key -> _.head) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T21:59:42.023

您的函数签名说明`Map[String, String]`应该返回，但是......稍等片刻，想象一下，如果 queryString 不包含键怎么办？好吧，看起来什么都不会返回，并且 Unit 在 Scala 中什么都不是（至少是无类型之一）。

要解决该问题，您需要提供替代方案：

```
private def getUpdatedFiltersIfQueryStringContains(filters: Map[String, String], queryString: Map[String, Seq[String]], key: String): Map[String, String] = {
    if (queryString.contains(key)) {
      filters ++ Map(key -> queryString.get(key).get.head)
    } else filters
  } 
```

*顺便说一句，函数名真的吓到我了*

# java - 在 OpenGL ES 2.0 上绘制多个不同颜色的三角形

> ID：13387919
> 
> 赞同：1
> 
> 时间：2012-11-14T21:47:36.797
> 
> 标签：java, android, opengl-es, sdk, geometry

我试图弄清楚如何在 OpenGL for SDK 上使用 Java 中的 OpenGL ES 2.0 实现这一点。我想用不同的颜色绘制多个三角形（最像任意的）。我目前有一个`Triangle`类可以绘制一个带有颜色的三角形，作为 a 传入的坐标`FloatBuffer`和作为数组传入的颜色（几乎遵循[这个](http://developer.android.com/training/graphics/opengl/shapes.html)示例，因为我只是 OpenGL 的初学者）。

我尝试在将坐标数组放入之前向坐标数组添加更多点`FloatBuffer`，但不幸的是，这只是将三角形绘制为一个多边形，并且我无法更改每个单独三角形的颜色。

我可以就如何最好地开始这个问题获得一些帮助吗？我正在考虑为每个三角形创建每个类，但我不知道在绘制一堆不同颜色的三角形时这是否有效。如果还有其他简单的方法，我真的很想听听。

# java - 从一个文本文件中读取两个矩阵

> ID：13387921
> 
> 赞同：0
> 
> 时间：2012-11-14T21:47:43.840
> 
> 标签：java, file, matrix, filereader

这是一个很长的。

我有一个非常奇怪的问题。我需要从文本文件中读取两个矩阵，将它们相乘，然后打印出结果。这一切都很容易。问题是包含矩阵的文件如下所示：

```
1 2 1 2 3
3 4 4 5 6
5 6
7 8 
```

这个疯狂的东西是如何工作的（仅供参考，可以跳过这部分）：

1.  阅读第一栏。一旦你点击空格或文件的末尾，你就有了 FIRST 矩阵中的行数。

2.  逐行计算每行的整数个数。一旦该计数下降，您就会知道第二个矩阵有多少行。如果第一个矩阵比文件“短”，那么这一步是不必要的，因为第二个只是文件中的行数。

3.  由于乘法要求矩阵一的列数与矩阵二的行数相同（[3x6 * 6x4] 有效，[3x6 * 5x4] 无效），因此通过知道矩阵一中的列数，我们可以找到行数在矩阵二中，反之亦然。

我需要找到任何一个值。

因此，从该文件矩阵中，一个将是

```
1 2
3 4
5 6
7 8 
```

二是

```
1 2 3
4 5 6 
```

所以你会认为你可以只计算第一列中的行数和最后一行中的列数来查找所有内容，但有时文件看起来像这样：

```
1 2 1 2 3
3 4 4 5 6
      7 8 
```

所以我只需要根据左下角是 int 还是 whitespace 进行一些条件处理。我正在考虑将整个文件读入二维数组并从那里进行操作。

***所以这是我的正式问题：***

我需要单独读取文件的每个字符，无论是 int 还是空格，所以我可以构建一个忠实的 Array[][]。这样做的最佳方法是什么？我尝试过 Scanner、StringTokenizer、FileInputStream、BufferedInputStream、Reader 和 FileReader，但它们都没有给我一个简单的 char by char。

其次，关于将矩阵从统一的 Array[][] 拆分为两个较小的 Array[][] 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:20:45.770

看来，对于两个矩阵，最大行数是行数，最大列数是行长 + 1 / 2，不包括用于行尾的任何内容（例如 CRLF）

当您扫描文件以获取这两位信息时，如果第一个字符扫描时都没有跳过，则还要查找第一个或最后一个字符是否为空格，直到碰到第二个数组（如果最后一个是），则向后扫描直到碰到进入第一个其他可能性当然是两个具有相同维度的数组。

有了这些信息，您可以创建两个数组，然后再次扫描文件并将值插入适当的位置。

这有点残酷，但它会起作用并且易于测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T22:24:40.997

我建议将问题分为 4 个阶段：阅读文本、构建字符串单元格数组、构建整数矩阵数组、做矩阵的乘积：

```
import java.util.ArrayList;
import java.util.List;

public class MatrixMul {
   static String[][] text2StrMatrices( String[] text ) {
      List< String[] > w = new ArrayList<>( 12 );
      for( String line : text )
      {
         List< String > l = new ArrayList<>( line.length() / 2 );
         for( int i = 0; i < line.length(); ++i )
         {
            char c = line.charAt( i );
            if( c == ' ' )
            {
               l.add( " " );
               ++i;
            }
            else {
               String num = "";
               while( c != ' ' && i < line.length()) {
                  num += c;
                  if( ++i < line.length()) {
                     c = line.charAt( i );
                  }
               }
               l.add( num );
            }
         }
         w.add( l.toArray( new String[l.size()]));
      }
      return w.toArray( new String[w.size()][] );
   }

   static int countValues( String[] row )
   {
      int count = 0;
      for( String value : row ) {
         if( value.trim().length() > 0 ) {
            ++count;
         }
      }
      return count;
   }

   static int[][][] strMatrices2IntegerMatrices( String[][] str ) {
      int count = str[0].length;
      int row = 0;
      while( row < str.length && count == countValues( str[row] )) {
         ++row;
      }
      int first = -1;
      for( int i = 0; first == -1 && i < str[row].length; ++i ) {
         if( str[row][i].trim().length() > 0 ) {
            first = i;
         }
      }
      int columns = 0;
      if( first > 0 ) {
         columns = first;
      }
      else {
         columns = countValues( str[row] );
      }
      List<int[]> w = new ArrayList<>(4);
      for( int r = 0; r < ( first == 0 ? str.length : row ); ++r )
      {
         int[] aRow = new int[columns];
         for( int c = 0; c < columns; ++c ) {
            aRow[c] = Integer.parseInt( str[r][c] );
         }
         w.add( aRow );
      }
      int[][][] result = new int[2][][];
      result[0] = w.toArray( new int[w.size()][] );
      w.clear();
      for( int r = 0; r < ( first == 0 ? row : str.length ); ++r )
      {
         int[] aRow = new int[str[0].length-columns];
         for( int c = columns; c < str[r].length; ++c ) {
            aRow[c-columns] = Integer.parseInt( str[r][c] );
         }
         w.add( aRow );
      }
      result[1] = w.toArray( new int[w.size()][] );
      return result;
   }

   private static int[][] matricesProduct( int[][] a, int[][] b )
   {
      int m = a.length;
      int n = b[0].length;
      int p = b.length;
      assert ( m == n ) || ( a[0].length == p ): "Incompatible dimensions";
      int[][] prod = null;
      if( p > -1 ) {
         prod = new int[m][n];
         for( int i = 0; i < m; ++i ) {
            for( int j = 0; j < n; ++j ) {
               for( int k = 0; k < p; ++k ) {
                  prod[i][j] += a[i][k] * b[k][j];
               }
            }
         }
      }
      return prod;
   }

   static void test(
      String     title,
      String[]   text,
      String[][] expectedStrMatrices,
      int[][][]  expectedMatrices,
      int[][]    expectedProduct )
   {
      System.out.println( title );
      final String[][] observedStrMatrices = text2StrMatrices( text );
      assert compare( expectedStrMatrices, observedStrMatrices ):
         "text2StrMatrices() failed";
      final int[][][] observedMatrices =
         strMatrices2IntegerMatrices( observedStrMatrices );
      assert compare( expectedMatrices, observedMatrices ):
         "strMatrices2IntegerMatrices() failed";
      final int[][] observedProduct =
         matricesProduct( observedMatrices[0], observedMatrices[1] );
      displayMatrix( observedProduct );
      assert compare( expectedProduct, observedProduct ):
         "matricesProduct() failed";
   }

   public static void main( String[] args ) {
      final String[] text1 = {
         "1 2 1 2 3",
         "3 4 4 5 6",
         "5 6",
         "7 8",
      };
      final String[][] expectedStrMatrices1 = {
         { "1", "2", "1", "2", "3" },
         { "3", "4", "4", "5", "6" },
         { "5", "6" },
         { "7", "8" },
      };
      final int[][][] expectedMatrices1 = {{
            { 1, 2 },
            { 3, 4 },
            { 5, 6 },
            { 7, 8 },
         },{
            { 1, 2, 3 },
            { 4, 5, 6 },
         }};
      final int[][] expectedProduct1 = {
         {  9, 12, 15 },
         { 19, 26, 33 },
         { 29, 40, 51 },
         { 39, 54, 69 },
      };
      test( "First test case", text1, expectedStrMatrices1, expectedMatrices1, expectedProduct1 );
      final String[] text2 = {
         "1 2 1 2 3",
         "3 4 4 5 6",
         "      7 8",
      };
      final String[][] expectedStrMatrices2 = {
         { "1", "2", "1", "2", "3" },
         { "3", "4", "4", "5", "6" },
         { " ", " ", " ", "7", "8" },
      };
      final int[][][] expectedMatrices2 = {{
            { 1, 2, 1 },
            { 3, 4, 4 },
         },{
            { 2, 3 },
            { 5, 6 },
            { 7, 8 },
         }};
      final int[][] expectedProduct2 = {
         { 19, 23 },
         { 54, 65 },
      };
      test( "Second test case", text2, expectedStrMatrices2, expectedMatrices2, expectedProduct2 );
   }// void main( String[] args )

   private static void displayMatrix( int[][] matrix ) {
      for( int i = 0; i < matrix.length; ++i ) {
         for( int j = 0; j < matrix[i].length; ++j ) {
            System.out.printf( "%2d ", matrix[i][j] );
         }
         System.out.println();
      }

   }

   static boolean compare( String[][] left, String[][] right ) {
      if( left.length != right.length ) {
         return false;
      }
      for( int i = 0; i < left.length; ++i ) {
         if( left[i].length != right[i].length ) {
            return false;
         }
         for( int j = 0; j < left[i].length; ++j ) {
            if( ! left[i][j].equals( right[i][j] )) {
               return false;
            }
         }
      }
      return true;
   }

   static boolean compare( int[][][] left, int[][][] right ) {
      if( left.length != right.length ) {
         return false;
      }
      for( int i = 0; i < left.length; ++i ) {
         if( left[i].length != right[i].length ) {
            return false;
         }
         for( int j = 0; j < left[i].length; ++j ) {
            if( left[i][j].length != right[i][j].length ) {
               return false;
            }
            for( int k = 0; k < left[i][j].length; ++k ) {
               if( left[i][j][k] != right[i][j][k] ) {
                  return false;
               }
            }
         }
      }
      return true;
   }

   private static boolean compare( int[][] left, int[][] right )
   {
      if( left.length != right.length ) {
         return false;
      }
      for( int i = 0; i < left.length; ++i ) {
         if( left[i].length != right[i].length ) {
            return false;
         }
         for( int j = 0; j < left[i].length; ++j ) {
            if( left[i][j] != right[i][j] ) {
               return false;
            }
         }
      }
      return true;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:15:05.167

文本文件只能逐行读取。因此读取一行，使用 String.split(" ") 将其拆分，并将结果数据填充到包含 Integer 链表的链表中。请记住，您必须跟踪拆分数据的位置在您的第二种情况下，在输入字符串中记住第二个矩阵的起始位置。

```
LinkedList<LinkedList<Integer>> 
```

读取文件的所有行后，您拥有“最高”矩阵的完整行数，并且您可以将第一个矩阵的数据放入数组中，同时从链表中删除相同时间点的相同数据（Lisp 。流行音乐（））。

*   我无法想象一次运行就可以读取数组数组，因为您在读取文件时事先不知道行数。因此，您需要使用集合类。
*   我建议使用 LinkedList，因为删除 wit pop 比使用由数组支持的集合非常有效且更快。
*   LinkedList 还可以在通过列表时有效地进行矩阵乘法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T22:07:30.377

您应该能够使用 FileInputStream 逐个字符地读取文件。

请注意，该`read()`方法在 EOF 处返回 -1。否则将返回值转换为字符。

# mysql - mysql where + group by 很慢

> ID：13387927
> 
> 赞同：1
> 
> 时间：2012-11-14T21:47:52.517
> 
> 标签：mysql, group-by, key

我应该能够回答自己的一个问题，但我没有，而且我在谷歌也找不到任何答案：

我有一个包含 500 万行的表，其结构如下：

```
CREATE TABLE IF NOT EXISTS `files_history2` (
  `FILES_ID` int(10) unsigned DEFAULT NULL,
  `DATE_FROM` date DEFAULT NULL,
  `DATE_TO` date DEFAULT NULL,
  `CAMPAIGN_ID` int(10) unsigned DEFAULT NULL,
  `CAMPAIGN_STATUS_ID` int(10) unsigned DEFAULT NULL,
  `ON_HOLD` decimal(1,0) DEFAULT NULL,
  `DIVISION_ID` int(11) DEFAULT NULL,
  KEY `DATE_FROM` (`DATE_FROM`),
  KEY `FILES_ID` (`FILES_ID`),
  KEY `CAMPAIGN_ID` (`CAMPAIGN_ID`),
  KEY `CAMP_DATE` (`CAMPAIGN_ID`,`DATE_FROM`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

当我执行

```
SELECT files_id, min( date_from )
FROM files_history2
WHERE campaign_id IS NOT NULL
GROUP BY files_id 
```

查询停留在“发送数据”状态超过八小时（然后我终止了该进程）。

这里解释一下：

```
id  select_type     table           type    possible_keys           key     key_len     ref     rows        Extra
1   SIMPLE          files_history2  ALL     CAMPAIGN_ID,CAMP_DATE   NULL    NULL        NULL    5073254     Using where; Using temporary; Using filesort 
```

我假设我生成了必要的密钥，但是查询应该花费那么长时间，是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T00:24:21.623

我建议使用不同的索引... (Files_ID, Date_From, Campaign_ID) 上的索引...

由于您的分组依据是 Files_ID，因此您希望将 THOSE 分组。然后是 MIN(Date_From)，所以它在第二个位置......然后最后是 Campaign_ID 符合非空的条件，这就是为什么......

如果您将所有广告系列 ID 放在首位，那太好了，将所有 NULL 排除在外……现在，您有 1,000 个广告系列，并且 Files_ID 跨越了许多广告系列，而且它们也跨越了许多日期，您会窒息的。

通过我投影的索引，首先通过 Files_ID，您已经订购了每个“files_id”以匹配您的组。然后，在其中，所有最早的日期都在索引列表的顶部……很好，几乎在那里，然后，按活动 ID。跳过可能存在的任何 NULL 并完成，进入下一个 Files_ID

希望这是有道理的——除非您有大量具有 NULL 值活动的条目。

此外，通过使索引的所有 3 个部分与查询的条件和输出列匹配，它永远不必返回原始数据文件来获取数据，它直接从索引中获取所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T22:11:30.303

好吧，由于聚合（函数 MIN ）以及分组，查询很慢。解决方案之一是通过将聚合子查询从 WHERE 子句移动到 FROM 子句来更改查询，这将比您使用的方法快得多。

尝试以下：

```
SELECT f.files_id 
FROM file_history2 AS f 
JOIN ( 
SELECT campaign_id, MIN(date_from) AS datefrom 
FROM file_history2 
GROUP BY files_id 
) AS f1 ON f.campaign_id = f1.campaign_id AND f.date_from = f1.datefrom; 
```

这应该有更好的性能，如果不工作临时表只会是选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:53:29.383

我会创建一个覆盖索引（CAMPAIGN_ID、files_id、date_from）并检查该性能。我怀疑您的问题是由于分组 not 和 date_from 无法使用相同的索引。

```
CREATE INDEX your_index_name ON files_history2 (CAMPAIGN_ID, files_id, date_from); 
```

如果这可行，您可以删除点索引`CAMPAIGN_ID`，因为它包含在复合索引中。

# javascript - 如何防止 Closure Compiler 在全局命名空间中创建特定的变量名？

> ID：13387931
> 
> 赞同：4
> 
> 时间：2012-11-14T21:48:07.713
> 
> 标签：javascript, global-variables, minify, google-closure-compiler

我熟悉使用字符串文字和导出以防止 Closure 重命名变量的概念，但是如何防止 Closure 使用其他代码用作全局变量的变量名（我没有写）？

例如，下面是为闭包的成员函数创建的：

```
 function $() {
  var a;
  if(1 > N) {
        return-1
  }
  a = Math.pow(1 + Q, F);
  return .....
  } 
```

加载 jQuery 时，上面的内容会被破坏。

我正在使用命令行编译器，这是我的命令行：

> java -jar compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --formatting=pretty_print --output_wrapper PGS --js common.v2.0.raw.js --module common_min:1 --js page_code.raw.js --module page_code_min: 1:common_min

我认为该`output_wrapper`选项用于解决此问题，但要么我误解了它的目的，要么我滥用了它。

TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T21:55:13.297

答案是[externs](https://developers.google.com/closure/compiler/docs/api-tutorial3#externs)。

外部定义外部代码中的符号。它们有两个主要目的：

*   为外部符号提供定义和类型信息，以便您的代码可以在没有错误/警告的情况下调用它们。
*   防止编译器使用在您的代码之外定义的符号名称

在您的情况下，您可以为 jQuery 包含一个现有的外部。[项目 contrib 文件夹](http://code.google.com/p/closure-compiler/source/browse/#svn/trunk/contrib/externs)中的每个主要版本都有一个。

# css - 样式 Drupal 的打印模块 PDF

> ID：13387932
> 
> 赞同：1
> 
> 时间：2012-11-14T21:48:10.693
> 
> 标签：css, pdf, drupal-7, tcpdf, print-module

在 Drupal 7 中如何做到这一点？我想为 PDF 输出的方式添加一些小的样式编辑。我正在使用 TCPDF。我在某处读到它不适用于 TCPDF，但其他消息来源说它是。我应该切换到 dompdf 吗？我已阅读文档，但似乎无法理解生成 PDF 的文件。

我有模块成功地从视图生成 PDF，所以这是继续这个项目的最后一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T22:18:57.153

任何时候您想使用 PDF 样式`DOMPDF`，它都不会那么痛苦。`print.css`然后在 sites/domain.com/themes/yourtheme/css 文件夹中设置您的 pdf 样式。

您还可以`print.tpl.php`从模块的文件夹中复制文件并将其粘贴到 sites/domain.com/themes/yourtheme/templates 中，以准确选择要在 pdf 中显示的内容。

# iphone - 如何通过 App Store 分发内部应用程序？

> ID：13387935
> 
> 赞同：1
> 
> 时间：2012-11-14T21:48:40.733
> 
> 标签：iphone, ios, xcode, ipad

我正在开发三个内部应用程序，我们希望将这些应用程序分发到 40 台 iPad。但我们不希望它们都注册为开发设备，我们希望将应用程序放在商店中。当我尝试临时分发时，它从未奏效。我在注册设备后尝试安装应用程序。

所以我想我们是否可以通过应用商店分发内部应用，而不是通过这种痛苦的应用分发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T22:02:27.597

大概您将拥有一个 Enterprise Developer 许可证（每年 299 美元），这正是您所拥有的场景：您想要开发应用程序并将其分发给您的组织。这种类型的许可证正是为此目的而存在的，因为 Apple 并不真正希望这些类型的应用程序（通常不适合所有人的应用程序）出现在 App Store 上。

要在此许可下分发您的应用程序，您需要查看 Apple 的移动设备管理架构。它基本上允许您设置自己的合法“商店”，您的应用程序将通过该“商店”分发到您组织的设备。它不打算让您绕过 Apple 向公众出售您的应用程序。不，不。

我似乎找不到适合您的链接。谷歌为“苹果移动设备管理文档”或“苹果 mdm”；出现了很多有趣的 PDF。

底线是，我认为这是设置此基础架构的大量工作。但是，如果您想以正确的方式进行内部应用分发，这是必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:54:21.360

[https://testflightapp.com/](https://testflightapp.com/)这是一个非常好的网站，可以将应用程序分发给您想要的人。你真的应该检查一下。
不过，它不是通过 App Store。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:57:19.797

查看 Apple 的此文档，应该为您提供内部分发的必要信息：http: [//help.apple.com/iosdeployment-apps/mac/1.1/#app43ad6a6a](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad6a6a)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T15:55:43.313

我的组织在使用[MobileIron](http://www.mobileiron.com/en/multi-os-management/ios-management/overview)时遇到了一些运气。我相信这件作品被称为“企业应用店面”。您设置了 MobileIron 服务器并（一种选择是）直接从 App Store 获取 MobileIron 管理的应用程序以连接到它。

# entity-framework - 如何重构部分 EF 选择

> ID：13387937
> 
> 赞同：1
> 
> 时间：2012-11-14T21:48:46.057
> 
> 标签：entity-framework

假设我有以下 EF 代码：

```
context.Employees.Select(e => e
{
    FullName = e.FirstName + " " + e.LastName,
    StartDate = e.StartDate,
    ... // Grab other data
}; 
```

现在，也许我注意到我在多个地方构建了全名，但希望集中。有可能重构这个吗？

如果我将其设为方法或 Func，则会出现 EF 错误，因为它无法将其转换为 SQL。

注意：这是一个简单的示例，假设在分配中使用“Select”、“Where”等任何内容都会变得更加复杂，因此添加 ToList 然后运行其他代码将不是最佳的，并且不符合重构，因为我必须改变功能，而不仅仅是让它更易于维护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:32:12.020

一种解决方案是使用[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)`AsExpandable`中的方法：

```
Expression<Func<Employee,string>> fullName = e => e.FirstName + " " + e.LastName;
context.Employees.AsExpandable().Select(e => e
{
    FullName = fullName.Compile().Invoke(e),
    StartDate = e.StartDate,
    ... // Grab other data
}; 
```

从链接的文章：

> Compile 是 Expression 类中的内置方法。它将表达式转换为满足编译器的普通 Func。当然，如果这个方法实际运行，我们最终会得到编译的 IL 代码而不是表达式树，并且 LINQ to SQL 或实体框架会抛出异常。但这是聪明的部分：编译从来没有真正运行过；LINQ to SQL 或实体框架也没有看到它。对 Compile 的调用被一个通过调用 AsExpandable 创建的特殊包装器完全剥离，并替换为正确的表达式树。

或者，您可以考虑使用实体框架创建[模型定义函数。](http://msdn.microsoft.com/en-us/library/dd456857.aspx)如果要在 Employee 类本身上定义 FullName 属性，还有[Microsoft.Linq.Translations库。](http://damieng.com/blog/2009/06/24/client-side-properties-and-any-remote-linq-provider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:36:27.640

我认为在实体类本身中实现它的更好的集中方式。您可以将 ReadOnly 属性添加到您的实体类中，该属性应该是`NotMapped`数据库以返回所需的格式化数据。

```
Public class Employee
{
//...

public string fullName{get { return  FirstName + " " + LastName;}}
} 
```

# javascript - 动态/迭代地构建页面内容

> ID：13387938
> 
> 赞同：3
> 
> 时间：2012-11-14T21:48:54.450
> 
> 标签：javascript, html, mysql, ajax, perl

我计划创建一个网站，让您迭代地构建`SQL`查询。

思路如下：

```
while(user wants more where clauses)
{
    show selection (html select) for table columns
    let user choose one column
    upon selection, show distinct values of that column
    let user choose one/multiple value(s)
} 
```

我知道如何处理该`SQL`部分，但我不确定如何处理页面的迭代构建。

所以我的问题是：

1.  使用上面概述的想法迭代构建页面的最佳方法是什么？
2.  如果用户更改了之前的选择之一，我该怎么办？

该网站将建立，`Perl`我正在考虑将其`Ajax`用于动态部分。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:01:21.377

如果我要这样做，我会使用[SQL::Abstract](https://metacpan.org/module/SQL%3a%3aAbstract)。

更新：

如果您不想重绘整个页面，您将使用 AJAX。因此，请为自己找到一个您觉得很舒服的 JavaScript 库，其中包括 ajax 调用。Jquery 有这个，其他一些也有。人们对各种图书馆有不同的看法。

无论如何，您的工作流程如下所示：

1.  用户提交表单
2.  javascript 执行客户端验证
3.  javascript 向服务器提交 AJAX 样式
4.  服务器执行服务器端验证、数据操作等。
5.  服务器响应数据paylod
6.  客户端根据有效负载的内容更新了屏幕。

因此，让我们专注于 5 和 6。

数据负载：AJAX 中的 X 表示 XML，但许多应用程序会发回 JSON 或 HTML。

更新屏幕：

您可以通过设置标签的 innerHTML 或 outerHTML 属性直接将 HTML 应用到现有页面。但这不会更新 DOM。如果您不在 clcinet 代码中挖掘 DOM，那么这就足够了。如果您四处寻找，那么您需要构建节点并将它们添加到您页面的 DOM 中，因此您可能需要考虑发回 JSON 或 XML。

因此，假设您有一个 id='generatedSQL' 的 div，当您的 AJAX 调用重新运行时，它将触发一个回调方法（我们称之为 updateSQL()），并且在回调中，您将拥有类似于以下的代码：

```
$(#generatedSQL).innerHTML = theVariableHoldingTheHtml; 
```

您的另一个选择是解析 JSONXML/等。并使用 createNode() 等，构建新的 DOM 位并将它们插入您的页面。我没有为你写这个的 jquery 印章。每次我需要做类似的事情时，我都会查找它。

如果查询文本只是仅显示，并且您从不尝试在客户端对其进行挖掘，则只需使用 innerHTML 方法，无论您传递 HTML 还是传递 JSON 并从中生成 HTML。如果查询文本对客户端的内部工作很重要，那么您将需要编写一堆 DOM 操作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:57:09.463

不确定您将使用什么，但是，如果使用单击某物然后使用带有 ajax 调用脚本的元素的 Onload 事件，该脚本会带回数据/内容，并且在 readystate 上只需更新容器 DIV 的 innerHTML。希望下面的链接能帮助您理解这个概念，也将为您提供一个开始的代码。 [http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

# android - 如何在 android 和 PC 或其他 android 设备中使用蓝牙传输文件

> ID：13387941
> 
> 赞同：2
> 
> 时间：2012-11-14T21:49:06.737
> 
> 标签：android, java-me, bluetooth, uuid

我正在尝试将文件从 PC 传输到 android 手机，然后反之亦然或 b/w 到 android 手机但卡住了。

我知道专家级别的 android 编程，我知道 android 和 J2ME 中的蓝牙 API，我知道蓝牙聊天应用程序，但不知道从中得到确切的想法。请帮助我任何适用于任何概念的代码，任何有帮助的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:57:04.790

这里有几个链接，我不知道它们会对你有多大帮助，因为你非常了解编程，但它们在这里

从编程的角度来看，这是一个非常好的蓝牙 PDF，它在一系列不同的平台上都有很多细节（虽然遗憾的是不是 android）。你可能会发现它非常有用

*   people.csail.mit.edu/rudolph/Teaching/Articles/BTBook.pdf

这是另一篇询问蓝牙代码的SO帖子

*   [Android蓝牙编程的代码示例](https://stackoverflow.com/questions/5619850/code-samples-for-android-bluetooth-programming)

# java - JAVA - Map 类型的对象不支持索引或映射属性：

> ID：13387947
> 
> 赞同：0
> 
> 时间：2012-11-14T21:49:15.620
> 
> 标签：java, apache-commons-beanutils

我的堆栈跟踪如下所示：

```
java.lang.IllegalArgumentException: Indexed or mapped properties are not supported on objects of type Map: get(1)
at org.apache.commons.beanutils.PropertyUtilsBean.getPropertyOfMapBean(PropertyUtilsBean.java:813)
at org.apache.commons.beanutils.PropertyUtilsBean.getNestedProperty(PropertyUtilsBean.java:764)
at org.apache.commons.beanutils.BeanUtilsBean.getNestedProperty(BeanUtilsBean.java:715)
at org.apache.commons.beanutils.BeanUtilsBean.getProperty(BeanUtilsBean.java:741)
at org.apache.commons.beanutils.BeanUtils.getProperty(BeanUtils.java:382) 
```

当我尝试访问地图的一部分时，我在这里得到它：

```
//Property Names
for ( int i=1; i < planMonthList.size(); i++ )
{
  planTab.add("planPosition....get" + "(" + i + ")");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:00:09.723

您不能直接迭代地图。您必须遍历`keySet`、`entrySet`或`values`集合

**例子：**

```
Map <String,Integer> m = new HashMap<String,Integer>();

m.put("A", 1);
m.put("B", 2);
m.put("C", 3);

// Iterate over keys
for (String key : m.keySet()) {
    System.out.println("Key=["+key+"], value=["+m.get(key)+"]");
}

// Iterate over values
for (Integer value : m.values()) {
    System.out.println("Value=["+value+"]");
}

// Iterate over entrySet
for (Map.Entry<String,Integer> entry : m.entrySet()) {
    System.out.println("Key=["+entry.getKey()+"], value=["+entry.getValue()+"]");
} 
```

# php - 运行代码前的 JQuery SetTimeout

> ID：13387949
> 
> 赞同：0
> 
> 时间：2012-11-14T21:49:22.373
> 
> 标签：php, jquery

我正在尝试在 JQuery 中运行一个基本上关闭或启动服务器的函数。到目前为止我的代码是这样的 -

```
$(".stopServer").click(function(){
    $.post("controller.php",{stop: 'true', server: this.name});
    $('#test'+this.name).load('controller.php?status=true&server='+this.name);
}); 
```

问题显然是它可以很好地停止服务器，但它会立即更新状态 div ('#test'+this.name)。这不好，因为服务器需要一段时间才能关闭。我一直试图让 SetTimeout 工作，但无法弄清楚......任何帮助将不胜感激。

谢谢大家，你们是最棒的：）

更新：

完整的功能在这里：

```
$(document).ready(function() {

$(".startServer").click(function(){
    $.post("controller.php",{server: this.name});
    setTimeout("showStatus('"+this.name+"')", 3000);
});

$(".stopServer").click(function(){
    $.post("controller.php",{stop: 'true', server: this.name});
    setTimeout("showStatus('"+this.name+"')", 3000);
});

function showStatus(name) {
    alert(name);
    $('#test'+name).load('controller.php?status=true&server='+name);
}
}); 
```

更新

放弃了它的想法，而是每秒轮询一次状态。

```
var refreshId = setInterval(function()
{
    $('.status').each(function() {
    var $name = $(this).attr('name');
    $(this).load("controller.php?status=true&server=" + $name);

});
}, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:04:57.050

我不知道当服务器实际关闭时你是否会从“controller.php”得到响应，如果你没有，试试这个......

```
$(".stopServer").click(function(){
    $.post("controller.php",{stop: 'true', server: this.name});
    setTimeout("showStatus('"+this.name+"')", 10000);
});

function showStatus(name) {
    $command = $('#test'+name).load('controller.php?status=true&server='+name);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T23:11:37.917

我添加了一个将函数包装在`setTimeout`

```
​$(document).ready(function(){
    $('#test').click(function(){
        var message = 'hello';
        setTimeout(function(){ callback(message) },1000); 
    });
    function callback(name){
        alert(name);
    }        
});​ 
```

[JSFiddle 演示](http://jsfiddle.net/GQvt9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:53:29.740

ajax 调用是异步的。$.post() 调用立即返回，并让实际的后期工作在后台完成。要么将其更改为同步调用（通常不是一个好主意），要么将后续代码放在 .post 调用的“成功”部分，例如

```
$.post('controller.php', success: function(data) {
    $command = etc....
}); 
```

# reporting-services - 将 ssrs 参数中的多个值发送到子报表

> ID：13387950
> 
> 赞同：1
> 
> 时间：2012-11-14T21:49:38.740
> 
> 标签：reporting-services, parameters, sql-server-2008-r2, bids, subreport

目前有三个子报表，一个主报表。

主报告有两个参数 -`SELECTDATE`和`EMP_ID`。主报表将 Order_Nbr 发送到所有子报表。

当我只选择 1 个员工和 1 个日期时，所有子报表都可以正常工作，但如果我选择多个值，它就会爆炸。

SQL 将该列作为 INT。我在主报表和子报表中都有两个参数，SELECTDATE 设置为具有多个值的文本，并且 EMP_ID 设置为具有多个值的整数。我的查询包含我的日期 IN (@SELECTDATE) 和 emp_id IN (@EMP_ID)。

它显然会向子报表发送正确的信息，因为它可以工作，但我希望它能够处理更多传递的值。喜欢当前检查和取消检查员工和月末日期的能力，就像它目前在我的查询中使用 IN 函数设置的一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:46:36.603

使您的子报表上的参数为非多值，删除任何“可用值”集。使用 join 方法将父报表中的多值参数作为字符串传递

```
=Join(Parameters!Emp_ID,",") 
```

EMP_ID 参数将设置为逗号分隔列表，这是多值参数发送给查询的内容

我不确定这如何与文本查询一起使用，但它适用于存储过程。

如果子报表也用作独立报表，您将需要添加一个新参数以允许用户从用户可以设置的参数将参数值发送到 @Emp_Id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T15:29:31.660

我猜您没有将子报告中的参数设置为多选。如果您已将子报表中的参数设置为多选，那么您可以直接将参数从主报表发送到子报表。[在这里](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/ae5ac615-1076-428d-9fcf-6c27e5fee1f0/parameter-passing-from-master-to-subreport?forum=sqlreportingservices)查看更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-23T09:00:10.903

我使用了以下解决方案，该解决方案适用于 SSRS2016。这也适用于文本参数。

1.  就像上面建议的那样，通过加入值将参数作为字符串传递给子报表。

`Join(Parameters!EmpID, ",")`

2.  在您的子报表中，接受参数作为文本。
3.  在子报表的 SQL 中，使用`string_split`SQL 2016 的函数返回值表，然后将其连接到主查询。所以基本上如果你的参数被命名为“EmpID_Multi”

`... JOIN (SELECT value FROM string_split ( @EmpID_Multi, ",")) mv ON mv.value= ...`

注意：您可能会考虑将值拉入临时表以进行 SQL 优化（有时优化器会做一些有趣的事情......）。

# simulation - OpenOffice Calc 中的 Monte Carlo 结果

> ID：13387956
> 
> 赞同：0
> 
> 时间：2012-11-14T21:50:15.493
> 
> 标签：simulation

我在 OpenOffice 中设置了一个模拟。我想显示模拟的结果，比如 100 次复制，但我似乎不知道该怎么做。显然，如果您只是将结果复制到一个单元格并将其向下拖动 100 行，它们都会显示相同的数字。

要么需要宏，要么有内置方式。我都不知道。

基本上相当于[http://www.youtube.com/watch?v=tpIhQuxQeNs](http://www.youtube.com/watch?v=tpIhQuxQeNs)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T02:10:53.833

我这样创建了一个宏：

```
Sub PasteSpecialNoFormula 
dim args3(0) as new com.sun.star.beans.PropertyValue
args3(0).Name = "SelectedFormat"
args3(0).Value = 1
Dim document As Object
document   = ThisComponent.CurrentController.Frame
dispatcher = createUnoService("com.sun.star.frame.DispatchHelper")

oDesktop = createUnoService("com.sun.star.frame.Desktop") 
oDocument = ThisComponent 
oSheet1 = oDocument.Sheets.getByIndex(0) 
oSheet2 = oDocument.Sheets.getByIndex(0) 

Dim i As Long, n As Long
n = 1000
for i = 1 to n

oFromRange = oSheet1.getCellRangeByName("B464:C464") 
oToCell = oSheet2.getCellByPosition(1,466+i) 

oDocument.CurrentController.Select(oFromRange) 
dispatcher.executeDispatch(document, ".uno:Copy", "", 0, Array()) 

oDocument.CurrentController.Select(oToCell) 

dispatcher.executeDispatch(document, ".uno:ClipboardFormatItems", "", 0, args3())

 next i
 End Sub 
```

# ajax - 如果带有 keyup 触发器的字段出现错误，如何停止 AJAX 调用

> ID：13387958
> 
> 赞同：0
> 
> 时间：2012-11-14T21:50:19.313
> 
> 标签：ajax, firefox, jquery, keyup

我有这个触发的 jquery ajax 调用`keyup`。如果用户快速输入击键，它会触发多次错误处理（例如使用 Firefox）。有没有一种快速的方法来停止显示多个警报窗口？

```
$('input[name$="_LOC"]').keyup(function(){

    if ($(this).val().length >=4){

        $.ajax({
            type: 'POST',
            url: 'red.asp?q='+$(this).val(),
            beforeSend: function() {
                    [...]   
            },
            success: function(data) {
                [...]
            },
            error: function() {
                alert("Oops!")
            }
        }); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:56:02.213

每次触发 onkeyup 时都会重新启动计时器，这意味着该事件仅在用户完成输入（或至少暂停一秒钟或其他任何时间）时发生。

利用`timer = setTimeout(yourFunction, yourDelay);`

让计时器用户休息`clearInterval(timer)`并再次启动 setTimeout。

```
var typing = false;
var timer;

$('input[name$="_LOC"]').keyup(function(){
 if(typing) {
   clearInterval(timer);

 }
timer = setTimeout(sendAjax, 500, [this]);
 typing=true;
});

function sendAjax(element) 
{
    if ($(element).val().length >=4){

        $.ajax({
            type: 'POST',
            url: 'red.asp?q='+$(element).val(),
            beforeSend: function() {
                    [...]   
            },
            success: function(data) {
                [...]
            },
            error: function() {
                alert("Oops!")
            }
        }); 
    typing = false;   
   } 
```

这是 JSFiddle 示例： http: [//jsfiddle.net/X8US5/](http://jsfiddle.net/X8US5/)，您需要您的浏览器 console.log 查看器准备好查看内容（否则将 console.logs 编辑为警报，尽管它们会中断 JS，因此时间会关闭）

**编辑：** IE9 兼容（hack）版本[http://jsfiddle.net/5ndM5/1/](http://jsfiddle.net/5ndM5/1/) 试图找到一个 jQuery 替代方案，但似乎没有。如果您不想要全局 var，则覆盖函数替代方案很好，但如果您只打算在一种形式上使用此代码，那么全局是可以接受的（无论如何，JS 代码通常都充满了它们）

# javascript - 如果禁用 JavaScript，则在 IE 8 中回退 HTML 5

> ID：13387961
> 
> 赞同：2
> 
> 时间：2012-11-14T21:50:33.197
> 
> 标签：javascript, html, internet-explorer, internet-explorer-8

我最近开始使用 HTML 5 而不是 XHTML，我看到了很多好处。它更清洁、更简单、更易于使用。标签更好，元素更有意义，这只是一种更好，更简单的编码方式。

但是，IE 8 及以下版本不支持回退。要使其工作，您必须使用 HTML 5 JavScript shiv。除非用户关闭了 JavaScript，否则这非常有用。

在这里做一些非常粗略的计算，如果大约 13% 的用户使用 IE 8 及以下版本（截至 2012 年 11 月 14 日）并且 2% 的用户禁用了 JavaScript，那么 0.26% 的用户使用旧版浏览器JavaScript 已关闭。这将导致 HTML 5 网站中断。Progressive Enhancement 的负责人说，一个网站应该在禁用 JS 的情况下仍然可以工作，但是在这种情况下，该网站将根本无法工作——它会崩溃并变成乱码。

一个 noscript 标签，上面写着“请打开你的 JavaScript”。可以工作，但除非你可以让它非常明显，否则它可能不会在混乱的文本和内容中看到。

由于 head 中的 noscript 标记在 HTML 5 中有效，因此以下是解决此问题的正确方法吗？

```
 <!DOCTYPE HTML>
 <html>
 <head>
     <noscript>
         <!--[if lte IE 8]>
             <meta http-equiv="refresh" content="0"; ,URL=http://www.example.com/no-js">
         <![endif]-->
     <noscript>
 </head> 
```

总结上面的代码，代码检查用户是否禁用了 JavaScript，然后检查它是否是 IE 8 及以下版本，如果是，则重定向到另一个页面。

重定向页面可以用 XHTML 制作，并说明该网站是用 HTML 5 制作的，需要在旧浏览器中启用 JavaScript 才能正确运行。然后，一旦用户启用了他们的 JavaScript，你就可以在头脑中使用这样的东西：

```
<script>
    window.history.back();
</script> 
```

所以用户会自动被重新发送回上一页。

这是解决这个问题的正确方法吗？还是只对所有用户的 0.26% 值得？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T22:15:52.943

老实说，我认为您的最后一行总结了它-不值得付出努力。我们都放弃了对 IE6 和 IE7 的支持，而它们的百分比仍然高于此。

If you're really worried about that fraction of a percent, just don't use the HTML5 tags -- it's not as if they're adding any functionality to the site; they're just there for semantics.

If OldIE users with Javscript disabled are that important to you, you can live without the HTML5 tags.

# grid - 网格单元有多行，每一行都可以编辑

> ID：13387963
> 
> 赞同：0
> 
> 时间：2012-11-14T21:50:36.177
> 
> 标签：grid, inline-editing

我想建立一个网格，每个单元格可以有多行，每一行都可以编辑。每个单元格也可以右键单击该单元格。我正在考虑使用 jquery 来选择网格。但是有一些工作需要完成。是否有任何其他网格非常接近我的要求，并且不需要太多的工作会很好。感谢您回答我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:44:43.103

jqGrid 具有您指定的功能。请参阅在线文档： [http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)

# jquery - jquery 中的多个周期性 ajax 更新；正确的？

> ID：13387964
> 
> 赞同：1
> 
> 时间：2012-11-14T21:50:40.327
> 
> 标签：jquery, django, celery

经过一个晚上的浏览和尝试，我有一些工作，但我想知道这是否都是正确的，或者可以改进。我问，因为我不经常使用 javascript 或 jquery/ajax....

在 django 应用程序中，我有一个 celery 任务正在运行，我想在任务完成后用结果更新浏览器。

为此，我使用 setTimeout 创建了一个 javascript 计时器（因此我可以在成功时停止它）。

现在我希望能够支持多个计时器；我要更新的每个字段（或任务）一个；我不确定如何在匿名函数上设置新的超时，所以我给它起了一个名字并使它成为全局的；那是对的吗？有没有更好的方法来做到这一点？

保罗·博尔曼斯

```
{% block jscript %}
<script>
function updateTaskResult(i, e) {
$.ajax({
  type: "GET",
  url: "{% url 'task_status' %}",
  cache: false,
  data: {task_id: e.id},
  context: e
}).done(function(json) {
    $(e).html("state=" + json.state + " result=" + json.result);
    if(json.state !== "{{ success }}") {
        setTimeout(updateTaskResult, 1000, i, e);
    }
});
}

$("div.status").each(function(i, e) {
    updateTaskResult(i,e);
});
</script>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:07:21.693

为了避免全局变量，您可以将代码包装在立即运行的匿名函数中。这会创建一个私有变量范围供您使用。

此外，由于您不在 AJAX 回调中使用关键字**this**，因此无需将上下文设置为**e**。

```
<script>
    (function() {
        var updateTaskResult = function (i, e) {
            $.ajax({
                type: "GET",
                url: "{% url 'task_status' %}",
                cache: false,
                data: {task_id: e.id},
            }).done(function(json) {
                $(e).html("state=" + json.state + " result=" + json.result);

                if(json.state !== "{{ success }}") {
                    setTimeout(updateTaskResult, 1000, i, e);
                }
            });
        }

        $("div.status").each(function(i, e) {
            updateTaskResult(i,e);
        });
    })();
</script> 
```

匿名函数可以与 setTimeout 一起使用，如下所示：

```
<script>
    setTimeout(function () {
        // Do stuff.
    }, 1000);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:01:50.903

您必须意识到这是对资源的浪费。这不是正确的做法。您要做的是实施`PUSH`.

对于 django，[请查看 evserver](http://code.google.com/p/evserver/wiki/Documentation)，“轻量级异步 Python WSGI 服务器”。看起来很有希望。另外，检查[diesel.io](http://diesel.io/)。这样，只有当有一些数据要推送时，您的服务器才会将数据推送到浏览器中（您不需要从客户端检查 t ）。

如果你使用 celery，我想你不害怕修补 python，所以要正确。

# javascript - 为什么这不是无限循环？

> ID：13387966
> 
> 赞同：2
> 
> 时间：2012-11-14T21:50:52.917
> 
> 标签：javascript

我正在阅读这个[例子](http://www.adobe.com/devnet/html5/articles/javascript-design-patterns-pt1-singleton-composite-facade.html#articlecontentAdobe_numberedheader_0)，但我一直在理解一行。我需要了解一切，所以我不能继续前进。

这个函数应该隐藏对象内的所有元素。它应该可以工作。但对我来说，那个 for 循环看起来像是一个无限循环。为什么不是？

```
getChild: function (i) {
    return this.children[i];
},

hide: function () {
    for (var node, i = 0; node = this.getChild(i); i++) {
        node.hide();
    }

    this.element.hide(0);
}, 
```

据我所知，该函数使用 getChild(0) 获取对象的第一个元素，然后在该 0 维对象上再次调用 hide。然后它重置计数器 (i) 并获取 0 维对象（即相同的 0 维对象）的第一个元素并再次调用该函数。

我知道我错了，但这就是我所看到的。请给我看光！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T21:52:23.740

在`for`像上面这样的循环中，第一位 ( `var node, i = 0`) 仅在循环开始时执行一次。当中间部分 ( `node = this.getChild(i);`) 返回 false 时，循环停止执行。 `getChild`当 index 没有任何内容时将返回 false `i`。（从技术上讲，它会返回`undefined`，但在这种情况下相当于`false`）。

其次，即使`hide()`在 for 循环中被调用，`i`也不会被重置。为什么？这个递归调用创建了一个`hide()`与原始实例分离的新实例。这个新变量中的所有变量`hide()`都与原始变量分开。（等等，在兔子洞里）。

有关for 循环的更多信息，请参阅[http://www.tizag.com/javascriptT/javascriptfor.php 。](http://www.tizag.com/javascriptT/javascriptfor.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:53:00.277

该变量`i`不会在每次迭代时重置。唯一递归执行的动作是布尔表达式和`i++`。`node.hide()`不一样`this.hide()`。后者是被调用的不同函数。如果它是同一个函数，那么是的，会有一个无限循环。

“外部”隐藏功能用于“隐藏” `this.getChild(i)`. `node.hide()`将在这些元素上调用该`hide()`方法，因此它们被隐藏。没有无限循环`node.hide()`，因为尽管它与正在使用的函数同名，但**不是**同一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:53:51.850

1.  编码

    `node.hide();`

    仍然是树的成员并且仍然可以遍历。它只是被隐藏而无法显示。

2.  for循环的初始化部分

    `var node, i=0`

    在循环开始之前只执行一次。

3.  有条件的

    `node = this.getChild(i)`

    当有子节点时计算为真（非空），当它的后代用完时计算为假（空），从而跳出循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:54:00.803

如果 , 没有孩子`i`，`getChild`将返回`undefined`并跳出循环。

考虑文章中的以下文本：

> 现在创建 GalleryImage 类。请注意，它使用与 GalleryComposite 完全相同的所有方法。换句话说，它们实现了相同的接口，**只是图像是一个叶子，所以它实际上并没有为关于孩子的方法做任何事情，因为它不能有任何**. 复合元素需要使用相同的接口才能工作，因为复合元素不知道它是添加另一个复合元素还是叶，所以如果它试图在其子元素上调用这些方法，它需要在没有任何错误的情况下工作。

并考虑构造函数`GalleryImage`：

```
var GalleryImage = function (src, id) {
  this.children = [];

  this.element = $('<img />')
  .attr('id', id)
  .attr('src', src);
} 
```

以及如何构建图像和合成：

```
var container = new GalleryComposite('', 'allgalleries');
var gallery1 = new GalleryComposite('Gallery 1', 'gallery1');
var gallery2 = new GalleryComposite('Gallery 2', 'gallery2');
var image1 = new GalleryImage('image1.jpg', 'img1');
var image2 = new GalleryImage('image2.jpg', 'img2');
var image3 = new GalleryImage('image3.jpg', 'img3');
var image4 = new GalleryImage('image4.jpg', 'img4');

gallery1.add(image1);
gallery1.add(image2);

gallery2.add(image3);
gallery2.add(image4);

container.add(gallery1);
container.add(gallery2); 
```

由于图像不能包含子图像，因此`this.children`它将保持为空数组。因此，当`hide`函数最终在图像上被调用时（在复合树的叶子之一处），循环将尝试评估`this.children[0]`哪个将返回`undefined`。这将导致代码`node = this.getChild(i)`评估为“假”值，并且该特定`for`循环将终止。从而防止死循环。

# linux - wget：非 http URL 上不支持的方案

> ID：13387970
> 
> 赞同：2
> 
> 时间：2012-11-14T21:51:17.970
> 
> 标签：linux, shell, wget

我的 shell 脚本中有以下行：

```
export URL=file://myhost/system.log
wget -v $URL 
```

当我尝试运行脚本时，它给了我以下错误：

```
file://myhost/system.log: Unsupported scheme. 
```

这是否意味着 wget 仅支持 http 和 ftp？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T22:00:17.210

`man wget`显示：

> 它支持 HTTP、HTTPS 和 FTP 协议，以及通过 HTTP 代理进行检索。

试试 curl，它支持文件 URL。另请注意，您可能需要在此处使用三个斜杠。两个属于协议指示符（file://），一个属于路径（/myhost/system.log）

```
export URL=file:///myhost/system.log 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-24T10:06:59.390

wget for windows 不支持 https

> 不支持的方案

测试：GNU Wget 1.9.1，非交互式网络检索器

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T22:10:25.173

有2个错误：

*   `wget`不支持 file:// 方案
*   ，`Linux`变量被称为 like `"$URL"`，而`%URL%`不像 windows

# php - 简单的外键连接以检查是否存在任何值

> ID：13387973
> 
> 赞同：1
> 
> 时间：2012-11-14T21:51:24.413
> 
> 标签：php, mysql, sql, inner-join

我只是想看看一个特定的用户是否在这两个表之间有一个内部连接的结果行：

```
create table course
(
  id int primary key auto_increment,
  name varchar(255)
);

create table persons
(
  id int primary key auto_increment,
  username varchar(255),
  courseid int,
  foreign key (courseid) references course(id)
) 
```

基本上我的查询是：

“如果用户`SERGIO`在任何以字母开头的课程`SVU`？” 如果有任何结果行，我想在我的 PHP 代码中返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:52:47.313

如果找到以via[函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)`found`开头的课程，则以下将简单地返回单行和一列。如果用户匹配多个以 开头的课程，则用于对多行进行重复数据删除。`SVU`[`LEFT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)`SERGIO``DISTINCT``SVU`

```
SELECT DISTINCT 1 AS found
FROM
  persons 
  JOIN course ON persons.courseid = course.id
WHERE 
  LEFT(course.name, 3) = 'SVU'
  AND username = 'SERGIO' 
```

### [这是一个例子](http://sqlfiddle.com/#!2/c4dba/1)

我假设您已经知道如何在 PHP 中查询它并使用您正在使用的任何 MySQL API（MySQLi、PDO 或旧的`mysql_*()`）获取结果

# php - 如何保护 PHP 文件不被下载？

> ID：13387978
> 
> 赞同：0
> 
> 时间：2012-11-14T21:51:39.670
> 
> 标签：php, html, apache, webserver

我对 PHP、Apache、服务器解释有疑问...我知道当浏览器从 Apache+PHP 服务器加载 PHP 文件时，它会被解释并且只显示 HTML 和纯文本，但有没有办法下载这些文件而不是解释它们？在这种情况下，它会非常不安全，因为 MySQL 密码是不安全的。

是否有任何安全措施来防止这种情况或无法下载此文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T21:55:57.750

只要您的服务器设置正确，它就不会发生。

一个好的步骤是将所有实际密码和诸如此类的东西放在 config.php 中并包含它。这样，您也可以使用 htacces 阻止该文件，这样如果您的服务器开始提供原始页面，该文件将无论如何都无法访问。

为了澄清您是否创建了**.htaccess**文件并将其放在与 config.php 相同的文件夹中，并提供以下信息，即使直接请求该文件也不会被提供。只需在此文件中定义您的配置内容（数据库名称、用户名、密码、哈希等），然后在需要它的每个页面的顶部将其 include_once 即可。

```
<files config.php>
    order allow,deny
    deny from all
</files> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T21:55:12.250

无法“下载”PHP 文件，但为了提高安全性，您可以将“核心”PHP 文件放在 public_html 文件夹之外

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:57:03.743

除非 PHP 解释器由于某种原因停止工作，否则不必担心。大多数服务器设计为在每次请求 PHP 文件时对其进行解释，并且只提供解释后的 HTML 文本。为了以防万一，可以保护敏感的 PHP 设置文件 - 通常通过将它们放置在具有修改权限的根目录之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:54:32.737

有人可以下载文件的唯一方法是设置一个为原始文件提供服务的服务器。只要您没有设置这样的服务器，它们就无法访问。如果您系统上唯一的服务器软件是 Apache 并且配置正确，那么人们就看不到您的源代码。

但是，如果有人看到您的源代码会使您的应用程序易受攻击，您可能需要考虑如何解决该问题。存在许多安全的开源软件——为什么你的开源软件会导致问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T21:55:07.477

通过**正确的配置**，apache 保证文件将始终被解释并且不会被提供下载。

您总是可能会安装错误更新或进行错误配置，但如果有熟练的管理员和稳定版本，这些情况就不会发生。

# google-chrome - 如何确定是否安装了特定的 Chrome 浏览器扩展，与扩展提供程序无关

> ID：13387979
> 
> 赞同：4
> 
> 时间：2012-11-14T21:51:41.897
> 
> 标签：google-chrome, google-chrome-extension

如何确定是否安装了特定的 Chrome 浏览器扩展，与扩展提供程序无关？

它是一个“内容脚本”（即在网页上下文中运行的 javascript），因此无法访问 chrome.i18n、chrome.extension、chrome.management 对象。

场景是，一个人点击了一个指向 RSS 提要的链接。但是目前 Chrome 本身并不支持 RSS/atom 提要协议，并且 Google Chrome 中 RSS 提要的呈现最好由几个可用的 RSS 提要阅读器扩展中的一个或另一个来调解。

我们建议使用“RSS 订阅扩展（由 Google）”，并希望向用户提供他们安装此 Chrome 扩展的建议 - 下载链接和所有 -**但当然，只有在他们没有的情况下已经安装了。**

如何查询安装到正在运行的 Chrome 浏览器中的扩展程序列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:37:32.000

您可以尝试 chrome.extension.getViews(object fetchProperties) 它将为当前扩展中运行的每个页面返回一个 JavaScript“窗口”对象的数组，或者 chrome.management.getAll(function callback) 返回一个信息列表关于已安装的扩展程序和应用程序。

# javascript - 如何从字符串而不是文件将动态 javascript 添加到 head 标记？

> ID：13387980
> 
> 赞同：5
> 
> 时间：2012-11-14T21:51:42.930
> 
> 标签：javascript

我正在使用 Javascript 生成其他自定义 javascript，然后将其添加到 HEAD 标记中。下面的代码可以很好地添加一个 javascript 文件，但是如果脚本位于刚刚生成的变量中怎么办？

```
var scriptTag = document.createElement("script");
scriptTag.setAttribute("type", "text/javascript");
scriptTag.setAttribute("src", "myfile.js");
document.getElementsByTagName("head")[0].appendChild(scriptTag); 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T21:53:51.210

```
 // script text
var txt = "alert('foo');";

var scriptTag = document.createElement("script");
scriptTag.setAttribute("type", "text/javascript");

   // append it in a text node
scriptTag.appendChild(document.createTextNode(txt));
document.getElementsByTagName("head")[0].appendChild(scriptTag); 
```

* * *

FWIW，您不需要脚本标签。您可以改用`Function`构造函数。

```
var txt = "alert('foo');";

Function(txt)(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T21:53:01.003

```
var scriptTag = document.createElement("script");
scriptTag.setAttribute("type", "text/javascript");

scriptTag.innerHTML = "What you want here";///....

document.getElementsByTagName("head")[0].appendChild(scriptTag); 
```

[**现场演示**](http://jsfiddle.net/fPM74/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:10:11.623

这两个答案似乎都不错，特别是来自@gdoron 的答案。

我写了一个简单的例子，以防你想在 jquery 中做同样的事情：http: [//jsfiddle.net/bitoiu/EKpGg/](http://jsfiddle.net/bitoiu/EKpGg/)

片段：

```
$(function(){

    var script = document.createElement( 'script' );
    script.type = 'text/javascript';
    // script.url = 'some valid url';
    $('head').append( script );
});​ 
```

# c# - C# WinForms：如何知道/检测是否正在显示/显示工具提示

> ID：13387982
> 
> 赞同：4
> 
> 时间：2012-11-14T21:51:47.483
> 
> 标签：c#, winforms, reflection, tooltip

我创建了一个工具提示。当鼠标悬停在图标上时，通过调用工具提示的 show 方法显示此工具提示。我想知道当前是否正在显示此工具提示。这个怎么做？也许通过反思？

```
System.Reflection.FieldInfo fi = typeof(ToolTip).GetField("window", BindingFlags.NonPublic | BindingFlags.Instance);
fi.GetValue(someObject...) ... 
```

然后请求是否可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:04:12.577

ToolTip 类在开始显示工具提示之前引发其 Popup 事件。您可以将其视为显示 TT 的时间跨度的开始。该跨度的结束是两件事中的第一件事；显示 ToolTip 的控件上的 MouseLeave 事件，指示用户不再将鼠标指向您已为其显示 ToolTip 的任何内容，或者在 ToolTip 的 AutoPopDelay 时间段过后，气球将淡出.

因此，您可以使用 Form 或其他包含 ToolTip 的控件中的代码来处理此问题，如下所示：

```
private System.Windows.Forms.Timer ToolTipTimer = new Timer();

public MyControl()
{
    myToolTip.Popup += ToolTipPopup;
    ToolTipTimer.Tick += ToolTipTimerTick;
    ToolTipTimer.Enabled = false;
}

private bool IsToolTipShowing { get; set; }

private Control ToolTipControl { get; set; }

private void ToolTipPopup(object sender, PopupEventArgs e)
{
   var control = e.AssociatedControl;

   //optionally check to see if we're interested in watching this control's ToolTip    

   ToolTipControl = control;
   ToolTipControl.MouseLeave += ToolTipMouseLeave;
   ToolTipAutoPopTimer.Interval = myToolTip.AutoPopDelay;
   ToolTipTimer.Start(); 
   IsToolTipShowing = true;
}

//now one of these two should happen to stop the ToolTip showing on the currently-watched control
public void ToolTipTimerTick(object sender, EventArgs e)
{
   StopToolTip();
}

public void ToolTipMouseLeave(object sender, EventArgs e)
{
   StopTimer();
}

private void StopTimer()
{
   IsToolTipShowing = false;
   ToolTipTimer.Stop();
   ToolTipControl.MouseLeave -= ToolTipMouseLeave;
} 
```

# javascript - 从 jscript 中的值中查找属性名称

> ID：13387988
> 
> 赞同：1
> 
> 时间：2012-11-14T21:52:15.560
> 
> 标签：javascript, jquery

如果我知道来自定义为的对象的值，我正在尝试获取属性名称

```
expOperators = {
    "0": "Select operator",
    "GREATERTHAN": "After",
    "LESSTHAN": "Before",
    "GREATERTHANEQUALTO": "On or After",
    "LESSTHANEQUALTO": "On or Before",
    "EQUALS": "On",
    "BETWEEN": "Between",
    "ISNULL": "Is Null",
    "ISNOTNULL": "Is not Null"
}; 
```

显然，如果我需要找到价值，那将很容易，但我需要完成相反的任务，知道价值找出属性是什么。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:13:18.630

使用这样的东西

```
 for(var name in expOperators ) {
    if(expOperators.hasOwnProperty(name)){
      if(expOperators[name] === "Between"){
         alert(name);
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:57:11.010

您将遍历对象并将对象值与您要查找的值进行比较。

```
expOperators = {
    "0": "Select operator",
    "GREATERTHAN": "After",
    "LESSTHAN": "Before",
    "GREATERTHANEQUALTO": "On or After",
    "LESSTHANEQUALTO": "On or Before",
    "EQUALS": "On",
    "BETWEEN": "Between",
    "ISNULL": "Is Null",
    "ISNOTNULL": "Is not Null"
};

for(var name in expOperators ) {
    if(expOperators[name] === "Between"){
        document.write(name);
    }
} 
```

[http://jsfiddle.net/WsjyS/2/](http://jsfiddle.net/WsjyS/2/)

# web-services - 为什么对 Web 服务方法的调用几乎会立即超时？

> ID：13387989
> 
> 赞同：0
> 
> 时间：2012-11-14T21:52:17.047
> 
> 标签：web-services, .net-4.0, windows-server-2003

使用 .NET 1.1 的此 Web 服务的生产版本不存在此问题。这是在 Windows Server 2003 上运行 .NET 4.0 的测试环境中进行的。

我收到以下异常时遇到问题：

```
 System.Net.WebException: The operation has timed out    
at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)    
at System.Net.HttpWebRequest.GetRequestStream()    
at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)    
at HTP.RHIO.PIRManager.TargetWS.PIRService.Upload(Transmission t_request)    
at HTP.RHIO.PIRManager.Manager.PIRManager.Upload(Transmission request) 
```

当我的 web 服务的 Upload 方法调用另一个 web 服务的 Upload 方法时会发生这种情况。超时几乎立即发生，大约 1/3 秒（注意 log_datetime 列）

![日志](../Images/3f9722a8c936523261e37c3b0f3923ef.png)

代码：（它在异常输出中记录间隔的行尚未实现，这就是它没有出现在输出中的原因。它应该下降到默认值间隔 = 60 [*1000]）

```
int interval = 0;                                                                           
try 
{

    try
    {
        interval = Convert.ToInt16(System.Configuration.ConfigurationSettings.AppSettings["RealTimeTimeOutSeconds"]);
    }
    catch(Exception ex)
    {
        interval = 60;
    }

    interval = interval * 1000;
    target.Timeout = interval;
    trans = target.Upload(trans);
    }                               
    catch(System.Net.WebException ex)
    {               
        request.TransmissionHeader.MessageCode = GetReturnMessageCode(ex); 
        request.TransmissionHeader.Message = ex.Message;
        Log(request.TransmissionHeader, "Upload", "FAILED", "(Timeout = " + interval.ToString() + ") " + ex.ToString(), 1);

        trans = TA1forFailedRealtimeUpload(trans.TransmissionHeader);                                       
        request = ConvertToLocal(trans, request);
        Log(request.TransmissionHeader, "Upload", "SENDING", "Responding to sender with TA1", 1);
        return request;                             
    }
} 
```

并从我的网络服务的 web.config 文件中：

```
<httpRuntime executionTimeout="600" maxRequestLength="2000000"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:00:43.310

`Convert.ToInt16`可能不会完全符合您的预期。从[手册](http://msdn.microsoft.com/en-us/library/basyfs27.aspx)；

> 返回值
> 
> 类型：System.Int16
> 一个 16 位有符号整数，等效于 value 中的数字，**如果 value 为 null，则为 0（零）。**

如果`RealTimeTimeOutSeconds`未在您的配置中设置，您将转换为 NULL，这将导致零超时。

# android - 安卓，布局问题，480x854

> ID：13387994
> 
> 赞同：0
> 
> 时间：2012-11-14T21:52:42.227
> 
> 标签：android, layout, text, checkbox

我有复选框，我为文本设置了 paddingLeft="150dp"，当我使用分辨率为 480x854 的手机（例如 neo v）时，复选框位于文本上方。布局对于其他分辨率来说很好。

在 res 我只有“布局”。怎么了？为什么只适用于 480x854

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:05:15.997

不要使用 dp 来定位视图，因为切换设备时肯定会遇到问题。而是使用 RelativeLayout 及其属性，例如 android:layout_toLeftOf、android:layout_centerHorizo​​ntal 等。

您可以在此处阅读有关 RelativeLayouts 的更多信息：http: [//developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)