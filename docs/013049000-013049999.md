# StackOverflow 问答 13049000-13049999

# node.js - Node.js：当 TCP 连接关闭时客户端不会死

> ID：13049005
> 
> 赞同：5
> 
> 时间：2012-10-24T12:14:50.547
> 
> 标签：node.js, tcpclient

我在 Node.js 中构建了一个简单的 TCP 服务器和一个简单的 TCP 客户端

现在，当客户端向服务器发送“exit”时，连接成功关闭。服务器从其套接字列表中删除该套接字并发送“Bye bye!”。给客户。

客户端上的连接也关闭了，但应用程序仍在等待其他输入，所以它不会死，我被迫输入 CTRL+C。

我尝试`process.exit()`在连接关闭后添加，但它不起作用：

**客户代码：**

```
var net = require('net'),
    config = require(__dirname + '/config.json'),
    connection = net.createConnection(config.port, config.host);

connection.setEncoding('utf8');

connection.on('connect', function () {
    console.log('Connected');
});

connection.on('error', function (err) {
    console.error(err);
});

connection.on('data', function (data) {
    console.log('» ' + data);
});

connection.on('close', function() {
    console.log('Connection closed');
});

process.stdin.on('data', function (data) {

    if ((new String(data)).toLowerCase() === 'exit') {
        connection.end();
        process.exit();
    }
    else {
        connection.write(data);
    }

});

process.stdin.resume(); 
```

**服务器代码：**

```
var server = require('net').createServer(),
    config = require(__dirname + '/config.json'),
    sockets = [];

server.on('connection', function (socket) {
    socket.setEncoding('UTF-8');

    socket.on('data', function (data) {

        console.log('Received data: ' + data);

        if (data.trim().toLowerCase() === 'exit') {
            socket.write("Bye bye!\n");
            socket.end();
        }
        else {
            sockets.forEach(function (client) {
                if (client && client != socket) {
                    client.write(data);
                }
            });
        }

    });

    socket.on('close', function () {
        console.log('Connection closed');
        sockets.splice(sockets.indexOf(socket), 1);

        console.info('Sockets connected: ' + sockets.length);
    });

    sockets.push(socket);
});

server.on('listening', function () {
    console.log('Server listening');
});

server.on('close', function () {
    console.log('Server is now closed');
});

server.on('error', function (err) {
    console.log('error:', err);
});

server.listen(config.port); 
```

**编辑：**

我添加了一个客户端连接“关闭”事件处理程序。因此，字符串“Connection closed”现在由服务器和客户端打印。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-30T05:07:20.370

我想你正在寻找这个：socket.unref()。

从 Node.js 文档（[https://nodejs.org/api/net.html#net_socket_unref](https://nodejs.org/api/net.html#net_socket_unref)）：

> socket.unref()#
> 
> 如果这是事件系统中唯一的活动套接字，则在套接字上调用 unref 将允许程序退出。如果套接字已经是 unrefd，再次调用 unref 将无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T02:21:31.120

前段时间在改进[node-cubrid](https://github.com/CUBRID/node-cubrid)模块的测试套件时，我遇到了同样的问题。在所有测试都通过后，nodeunit 进程没有退出，因为 node-cubrid`connection.end()`在超时发生时用来关闭客户端套接字，就像你做的那样。

然后我[替换](https://github.com/CUBRID/node-cubrid/commit/8cdd7c80c69d49bcc2f3671cfeb20f510fc2ceb0#L1R195) `connection.end()`为`connection.destroy()`一种更简洁的方法，以确保套接字**真正**关闭而不实际终止正在运行的进程，我认为这是比上述建议更好的解决方案`process.exit()`。因此，在您的客户端代码上下文中，我会这样做：

```
process.stdin.on('data', function (data) {
    if ((new String(data)).toLowerCase() === 'exit') {
       connection.destroy();
    }
    else {
       connection.write(data);
    }
}); 
```

根据[Node.js 文档](http://nodejs.org/api/net.html#net_socket_destroy)：

> **socket.destroy()**
> 
> 确保此套接字上不再发生 I/O 活动。仅在出现错误时才需要（解析错误左右）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:09:54.880

我怀疑这`if ((new String(data)).toLowerCase() === 'exit')`是否成功，因为`data`很可能有一个尾随换行符（在您的服务器中，您`trim()`在进行比较之前，而不是在客户端中）。

如果这个问题解决了，你就会遇到一个逻辑问题：当得到“exit”时，你关闭了连接而不向服务器发送“exit”，因此寻找“exit”的服务器代码将永远不会执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T15:34:18.680

在服务器中尝试事件：'close'： [http ://nodejs.org/api/net.html#net_event_close](http://nodejs.org/api/net.html#net_event_close)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T07:28:31.587

您必须`process.exit()`仅将指令放在最后一个事件处理程序上。因此，在这种情况下，您必须将其放在客户端连接“关闭”事件处理程序中：

**客户：**

```
connection.on('close', function() {
    console.log('Connection closed');
    process.exit();
}); 
```

# r - 重新排序因子后正确绘制 xyplot 线

> ID：13049009
> 
> 赞同：3
> 
> 时间：2012-10-24T12:15:08.543
> 
> 标签：r, plot, data-visualization, lattice

当我`xyplot`在重新排序因子之前使用线连接时，它给了我一个很好的数据点之间的顺序连接：

```
library(lattice)
fin <- read.csv("http://dl.dropbox.com/u/2505196/unc_vall.csv", header=T)
xyplot(acceptability ~ character | motion, data=fin, col=1, 
       aspect="xy", layout=c(6,1), type="o", scales = list(x = list(rot = 90))) 
```

![在此处输入图像描述](../Images/47a6d000a66e2833eb5debefa210d223.png)

然后我重新排序因子，一切都搞砸了：

```
fin$character <- factor(fin$character, levels = c("battle","klank","manny",
                        "skelly","zombie","loman","himan")) 
```

![在此处输入图像描述](../Images/0d91e2d5aaea580a2a086cfbeca53298.png)

重新排序因素的水平工作正常，值去他们应该的地方，但不知何故线路连接的顺序保持不变。我没有想到如何更改重新排序以使其正常工作。

编辑：我应该补充一点，解决方案应该足够通用，可以同时适用`xyplot`于`xYplot`package `Hmisc`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:38:57.480

我认为线条是按照它们在数据中出现的顺序绘制的。因此，如果您想获得正确的顺序，您可以这样做：

```
xyplot(acceptability ~ character | motion, data=fin[order(fin$character),], col=1, 
aspect="xy", layout=c(6,1), type="o", scales = list(x = list(rot = 90))) 
```

请注意，只有`data`参数发生了变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:47:38.420

设置`type=c("a", "p")`（代替`type="o"`）可以解决问题：

```
xyplot(acceptability ~ character | motion, data=fin, col=1,
       aspect="xy", layout=c(6,1), type=c("a", "p"), 
       scales = list(x = list(rot = 90))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:52:12.543

我认为更好的解决方案是按原样处理数据而不是假数据——这里的 x 轴是一个因素，你应该尊重这一点。您可以实现您想要使用的功能，`panel.average()`但我们也需要`panel.xyplot()`在自定义`panel`函数中调用：

```
xyplot(acceptability ~ character | motion, data=fin, col=1, 
       aspect="xy", layout=c(6,1), scales = list(x = list(rot = 90)),
       panel = function(x, y, ...) {
           panel.xyplot(x, y, ...)
           panel.average(x, y, horizontal = FALSE, ...)
       }) 
```

完全感谢有一种更简单的方法，因为`type = "a"`快捷方式会`panel.average()`为我们添加呼叫，因此将情节更改为：

```
xyplot(acceptability ~ character | motion, data=fin, col=1, 
       aspect="xy", layout=c(6,1),
       type = c("p","a"), ## specify the type!
       scales = list(x = list(rot = 90))) 
```

# c# - 哪种数据库类型更适合高性能目的？

> ID：13049013
> 
> 赞同：1
> 
> 时间：2012-10-24T12:15:27.250
> 
> 标签：c#, database, database-design, nosql, database-engine

我正在寻找设计一个具有以下数据功能的系统：

1.  多源高写入率，每秒 50K - 100K 条记录（来自 ）。
2.  单源快读，单IO取操作。

这是基本的数据库表/集设计：

```
 Type name
--------------
Date
Amount 
```

*   对于每个新**类型**，将创建一个新表/集。
*   唯一的获取操作是`SELECT`按日期（应该是集群主键或类似的东西）。
*   超过 1 个月的表格将被存档。

到目前为止，我收到的提供的解决方案是：

*   纯 DB 引擎，例如**Berkeley**或**MS Jet**。
*   NoSQL，例如**Mongo DB**。

PS - 系统将用**C#**编写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:32:31.903

看看C# 的[Redis](http://redis.io/)和[ServiceStack](https://github.com/ServiceStack/ServiceStack.Redis)。

这是 [NoSQL DB 比较的](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:36:23.107

**Redis**将是完美的解决方案，但要求比这要简单得多，而且**Berkeley DB**似乎很适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:17:11.860

如果您所做的只是从许多作者那里写入并按顺序读取一次，那么您不需要数据库，而是需要一个队列系统。ZeroMQ 非常快。

# google-apps-script - 谷歌应用脚 本小工具创建动态链接

> ID：13049021
> 
> 赞同：2
> 
> 时间：2012-10-24T12:15:44.987
> 
> 标签：google-apps-script

我正在尝试为我的 google 站点页面创建一个 Google Apps 脚本小工具。该小工具应根据搜索字符串显示站点内链接的 3 个 URL 列表。

例如，一个网站包含许多关于狗的文章。一位用户打开了一篇关于“如何训练你的狗”的文章。页面底部的小工具列出了 3 篇具有相似关键词的其他文章。

```
//global constants
var SEARCH_KEY = "train your dog"

// Script-as-app template.
function doGet() {
  var app = UiApp.createApplication();
  var mySite = SitesApp.getSite('mysite.com','mysite');

  var advancedArgs = {max:"3"};
  var page = mySite.search(SEARCH_KEY, advancedArgs);

  for (i = 0; i < page.length;i++)
  {
    app.add(app.createHTML('<a href=\"' + page[i].getUrl() + '\">' + page[i].getTitle() + '</a>'));
    app.create
  }

  return app;
} 
```

但是，createHTML 函数似乎只接受粗体、斜体等基本格式。有人对如何在小工具中创建 URL 列表有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:42:43.970

为此目的有一个特殊的小部件：[createAnchor("a link", "www.google.com");](https://developers.google.com/apps-script/class_anchor)

您可以在其中定义显示的字符串和链接...

编辑：有关信息，这里是 UiApp HTML 小部件中允许的 HTML 标签列表：（2012 年 3 月 7 日[发布说明）](https://developers.google.com/apps-script/release_notes)

*添加了在使用 UiApp 小部件时包含一组有限的 HTML 标记的功能，以响应此问题。以下是允许的 HTML 标记列表：B、BLOCKQUOTE、BODY、BR、CENTER、CAPTION、CITE、CODE、DIV、EM、H1、H2、H3、H4、H5、H6、HR、I、LABEL、LEGEND , LI, OL, P, SPAN, STRONG, SUB, SUP, TABLE, TBODY, TD, THEAD, TITLE, TR, TT, UL*

# iphone - 使用 REST api 后端开发 iOS 应用程序（基于数据的支持）

> ID：13049023
> 
> 赞同：3
> 
> 时间：2012-10-24T12:15:59.803
> 
> 标签：iphone, objective-c, ios, django, ipad

我正在开发一个 iPad 应用程序，它连接到后端的 Django 服务器。服务器主要是数据库之上的一个 REST API（这是用 TastyPi 完成的，为了记录）。

由于我是 iOS 新手，因此我正在尝试了解开发此功能的最佳方式。

所以有几个相关的问题：

1.  是否有一个库可以简化在您的代码中制作“模型”以镜像服务器上的模型的工作？

我想像 Django 的 ORM 之类的东西，它允许您在 Objective C 中定义对象，这些对象一对一地映射到 REST Api 提供给您的对象。

该库可以抽象本地对象和服务器上的对象之间的所有缓存和转换。

1.  如果这种库不存在，是否有适合此类项目的一组最佳实践？例如，我什至*应该*有反映数据库的本地对象吗？我应该有一个类来处理处理 API 的所有代码，还是应该在作为 API 一部分的许多不同对象中编写请求？

简而言之，我在哪里可以学习编写由暴露数据库的 REST Api 支持的 iOS 应用程序的“正确”方法？最好是教程，而不是查看现有项目的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:02:22.080

1) 对于 ORM，iOS 有 Core Data，可让您构建实体并使用对象，而不是 SELECT、LEFT JOIN 等 SQL 语句。

不知道其他人，但这是我通常的做法：

1) 应用程序使用 ASIHttpRequest 库之类的库向 Web 服务发出 HTTP POST 请求。（注意，对于后端，我使用 Symfony Web 框架编写了我的 Web 服务）

2) 应用程序发回 JSON 响应。

例如

{数据{名称：鲍勃年龄：20}}

3) 使用 JSONKit 之类的 JSON 解析器或 ASIHttpRequest 提供的解析器解析 JSON，并将 JSON 服务器响应转换为 NSDictionary。

NSDictionary *data = [[request responseString] objectFromJSONString];

4）现在是否将数据存储在应用程序上取决于应用程序的性质。如果该应用程序要搜索本地餐馆，那么您可能不想保留返回结果的本地副本，因为该应用程序的本质是搜索餐馆。

但是，如果您有一个登录系统，可以从他们的帐户下载用户的家庭作业，那么您可能会将这些数据存储在本地设备上。

这就是 Core Data 的用武之地，您构建复制服务器模型的模型，并在服务器和客户端模型之间进行简单的 1 对 1 映射。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:18:04.227

查看[休息套件](http://restkit.org/)

> RestKit 是一个用于 iOS 的 Objective-C 框架，旨在使与 RESTful Web 服务的交互变得简单、快速和有趣。它结合了干净、简单的 HTTP 请求/响应 API 和强大的对象映射系统，减少了完成工作所需编写的代码量。

它还支持将远程加载的对象直接持久化回本地存储

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T12:25:00.547

Parse.com api 是 RESTful 的，[负责](http://www.parse.com)为数据库构建数千小时的样板代码。我不为他们工作，但我确实喜欢这项服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-27T22:27:21.490

对于 #1，[helios.io](http://helios.io/)可以解决问题。从 github 上的[文档](https://github.com/helios-framework/helios#linking-a-core-data-model)，

> 为了使您的数据模型和 REST Web 服务保持同步，您可以将其链接到您的 helios 应用程序：
> 
> $ helios 链接路径/到/DataModel.xcdatamodel
> 
> 这会在 Xcode 和 Helios 项目中的数据模型文件之间创建硬链接——对任一文件所做的任何更改都会影响两者。下次启动服务器时，Helios 将自动迁移数据库以创建表并插入列以容纳任何新实体或属性

# .htaccess - HTaccess 动态 URL 到静态重写，无需循环即可双向工作

> ID：13049024
> 
> 赞同：1
> 
> 时间：2012-10-24T12:16:06.407
> 
> 标签：.htaccess

我查看了堆栈溢出，但找不到我正在寻找的确切答案，所以就到这里。

我有一个 URL [http://holtplantandmachinery.co.uk/cat/wheel-loaders](http://holtplantandmachinery.co.uk/cat/wheel-loaders)重定向到[http://holtplantandmachinery.co.uk/category.php?name=wheel-loaders](http://holtplantandmachinery.co.uk/category.php?name=wheel-loaders)

但是，当您输入动态 URL 时，我需要它以相反的方式工作，它会重写为上面的静态（文件夹查找）URL，反之亦然。本质上，无论叫什么，它都应该重写为静态的。现在我知道我需要设置一个与上述方式相反的重写，然后有一个条件来停止无限循环，但我似乎无法得到任何工作，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:43:08.753

当有人`http://holtplantandmachinery.co.uk/category.php?name=wheel-loaders`在浏览器的 URL 地址栏中键入内容时，发送到*holtplantandmachinery.co.uk*服务器的请求如下所示：

```
GET /category.php?name=wheel-loaders HTTP/1.1
Host: holtplantandmachinery
some other headers
etc 
```

您可以使用`%{THE_REQUEST}`var 匹配第一行：

```
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ category\.php\?name=([^&\ ]+)
RewriteRule ^ /cat/%2? [L,R=301] 
```

这会将请求重定向到，`http://holtplantandmachinery.co.uk/cat/wheel-loaders`并且该 URL 将显示在浏览器的 URL 地址栏中。您使用`%{THE_REQUEST}`而不是的原因`%{QUERY_STRING}`是因为当您的其他规则将更好看的 URL 重写为带有查询字符串的 URL 时，它会看起来并且`%{QUERY_STRING}`匹配，该规则将被应用并导致重定向循环。或者，您可以匹配查询字符串并使用：

```
RewriteCond %{ENV:REDIRECT_STATUS} !200 
```

确保 URI 不是来自先前重写的内部重定向。

然后你会有你的内部重写规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?cat/(.*)$ /category.php?name=$1 [L] 
```

# sql - 想在现有的 select 语句中再添加两列

> ID：13049031
> 
> 赞同：3
> 
> 时间：2012-10-24T12:16:24.483
> 
> 标签：sql, sql-server, sql-server-2005

我有一个示例查询

```
select 
    x as 1, y as 2 , z as 3 
from 
    table abc, xyz
where 
    a = x and x = 123 
```

`SELECT`现在我想在这个语句中再添加两列，如下所示：

1.  第 4 列将显示行序号。
2.  第 5 列：此列将取决于行 - 它将显示`start`在第一行、`Last`最后一行以及`Middle`其间的任何行中。

请建议最好的优化方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T12:18:33.097

除非您指定，否则数据没有顺序。

```
select 
    x as 1, 
    y as 2 , 
    z as 3 ,
    row_number() over (order by whatever),
    case when row_number() over (order by whatever) = 1 then 'first' 
    else
        case when row_number() over (order by whatever desc) = 1 then 'last' 
        else 'middle' 
        end
    end
from table abc 
    inner join xyz on a = x 
where x= 123 
```

请注意在上述查询中使用 ANSI-92 连接而不是 where 子句。

您可以使用公用表表达式进一步优化它

```
;with cte as 
(
    select 
        x , 
        y , 
        z  ,
        row_number() over (order by whatever) rn
    from table abc 
        inner join xyz on a = x 
    where x= 123
)
    select x,y,z,rn,
        case rn when 1 then 'first'
        when (select MAX(rn) from cte) then 'last'
        else 'middle'
    end
    from cte 
```

或者没有这样的 CTE：

```
select 
    x as 1, 
    y as 2 , 
    z as 3 ,
    row_number() over (order by whatever),
    case row_number() over (order by whatever)
        when 1 then 'first' 
        when count(*) over () then 'last' 
        else 'middle' 
    end
from table abc 
    inner join xyz on a = x 
where x= 123 
```

# php - PHP 循环未应用于特定的 HTML 元素

> ID：13049032
> 
> 赞同：0
> 
> 时间：2012-10-24T12:16:25.997
> 
> 标签：php, wordpress, while-loop

我有一个 PHP while 循环如下：

```
<?php while (have_posts()) : the_post(); ?>

<li> 
<?php
    $args = array(
      'post_type' => 'attachment',
      'numberposts' => -1,
      'post_status' => null,
      'post_parent' => $post->ID,
      'orderby' => 'menu_order',
      'order' => 'ASC'
    ); 

    $attachments = get_posts($args);

    if ($attachments) {
      foreach ( $attachments as $attachment ) {
        $image_attributes = wp_get_attachment_image_src( $attachment->ID, large );
        $alt_text_title = $attachment->post_title ;
        //print_r($attachment); 

        echo "<img src=\"$image_attributes[0]\" alt=\"$alt_text_title\">";
        }
    }
?>
<h3><a href="http://<?php the_title(); ?>"><?php the_title(); ?></a></h3>
<?php the_content(); ?>
</li>
<?php endwhile;?> 
```

h3 中的 a 标签使所有标题成为超链接，但是我希望其中一个标题不是链接，因此根本不受 a 标签的影响。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:23:08.543

编辑。一种更安全的方法是通过帖子 ID 进行操作。

```
<?php $postID = $post->ID;

echo $postID; 
// You could delete this line once you have the PostID. 

if($postID == '1') { ?>
  <h3><?the_title();?></h3>
<?php } else { ?>
  <h3><a href="<?php the_permalink();?>" title="<?php the_title();?>"><?the_title();?></a></h3>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:24:23.240

您始终可以`the_title()`使用 if 检查内容并仅在必要时显示 a 标签。

```
<?php if(the_title() === "your title") {?>
    <h3><?php the_title(); ?></h3>
<?php } else {?>
    <h3><a href="http://<?php the_title(); ?>"><?php the_title(); ?></a></h3>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:24:37.607

```
$title=get_the_title();
if( /*post meets some condition*/) {
  ?><h3>$title</h3><?php
} else {
  ?><h3><a href="http://<?php the_title(); ?>"><?php the_title(); ?></a></h3><?php
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:25:16.727

你只需要一个简单的 if 语句。您可以在示例中的任意数量的事物上构建条件，使用完整的标题，但使用帖子的 id 或类似的东西可能会更好：

```
<?php if('Ignore this title' == get_the_title()): ?>
  <h3><?php the_title() ?></h3>
<?php else: ?>
  <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
<?php endif; ?> 
```

# python - 在python的闭包中调用函数

> ID：13049035
> 
> 赞同：1
> 
> 时间：2012-10-24T12:16:38.620
> 
> 标签：python

我正在尝试做这样的事情：

```
import threading
def func1(a,b):
    def func2():
        t=threading.Thread(target=func3)
        return t
    return func2

func2=func1(a,b)
func2() 
```

我有一个限制（我使用的语言是带有一些受限功能的python）不要将 args 参数用于 Thread 函数，而是我想将 a 和 b 作为参数传递给 func3。如何使用闭包做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:19:18.433

您可以使用 lambda：

```
t=threading.Thread(target=lambda: func3(a,b)) 
```

`a`和的值`b`将被保存在一个闭包中，即使在`func1`退出之后也是如此。

您可以创建一个命名函数，而不是 lambda：

```
def thread_func():
    func3(a,b)
t = threading.Thread(target=thread_func) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:37:50.523

在没有`lambda`我可能会调查`functools.partial`。如果不允许这样做，您可能会这样做：

```
import threading
def func1(a,b):
    def func2():
        def func4():
            return func3(a,b)
        return threading.Thread(target=func4)
    return func2

func2=func1(a,b)
func2() 
```

# php - AJAX/JQUERY 发布并包含

> ID：13049038
> 
> 赞同：0
> 
> 时间：2012-10-24T12:16:49.417
> 
> 标签：php, jquery, ajax, include

发现这令人困惑...

如果用户填写联系表单 (contactus.php) 并使用 AJAX/JQuery 将表单提交到 (process.php) 并且在 (process.php) 上有一个包含函数但未包含 PHP 文件。 .

为什么会这样？？

哈哈，如果有意义的话。所有帮助将不胜感激。

```
include("file_name_goes_here.php"); 
```

OR_ ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_***

如何使（index.php）将文本文件的内容读取为 php 编码，然后执行它？

```
$data = file_get_contents("file.txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:39:14.803

您可以将 txt 文件加载为字符串并使用[eval](http://www.php.net/manual/en/function.eval.php)吗？注意：我并不是说这是一个好主意！

# c# - 如何在 WPF 的 Combobox 中有效地添加多个项目

> ID：13049039
> 
> 赞同：1
> 
> 时间：2012-10-24T12:16:52.267
> 
> 标签：c#, .net, wpf, mvvm, combobox

我的 wpf 应用程序中有一个组合框，我需要在 0 到 255 之间添加 256 个项目。这看起来很简单，但我担心代码长度。

**XAML：**

```
<ComboBox ItemsSource="{Binding ChannelBitLengthList}" SelectedItem="{Binding SelectedChannelBitLengthList, Mode=TwoWay}" SelectedIndex="0" /> 
```

**视图模型：**

```
public ObservableCollection<string> ChannelBitLengthList
    {
        get { return _ChannelBitLengthList; }
        set
        {
            _ChannelBitLengthList = value;
            OnPropertyChanged("ChannelBitLengthList");
        }
    }

    private string _SelectedChannelBitLengthList;
    public string SelectedChannelBitLengthList
    {
        get { return _SelectedChannelBitLengthList; }
        set
        {
            _SelectedChannelBitLengthList = value;
            OnPropertyChanged("SelectedChannelBitLengthList");
        }
    }

Constructor:

//List of Channels
_ChannelBitLengthList.Add("0");
_ChannelBitLengthList.Add("1");
_ChannelBitLengthList.Add("2");
_ChannelBitLengthList.Add("3");
.......... till .Add("255"); 
```

我不想有这么多`.Add()`的语句才能输入项目。有没有另一种更有效的方法可以添加所有这 255 个项目而没有太多代码长度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:20:16.880

由于您要插入最多 255 个项目（不是 254 个），因此您可以使用：

```
for(int i=0;i<=255;i++)
{
  _ChannelBitLengthList.Add(i.ToString());
} 
```

或者，如果您想使用 LINQ：

```
ChannelBitLengthList = new ObservableCollection<string>(Enumerable.Range(0, 256).Select(str=>str.ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:19:07.280

如果项目是 1...255，你可以这样写 for 循环

```
for(int i=0;i<=255;i++)
  _ChannelBitLengthList.Add(i.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T12:19:43.313

这不工作 -

```
for (int i =0 ;i <256;i++)
{
   _ChannelBitLengthList.Add(i.ToString());
} 
```

这个怎么样 -

```
ObservableCollection<string> ChannelBitLengthList =
       new ObservableCollection<string>(Enumerable.Range(0, 256)
               .Select(t => t.ToString())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T12:23:36.277

怎么样：

```
ChannelBitLengthList = new ObservableCollection<string>(Enumerable.Range(0, 256).Select(x=>x.ToString())); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T14:53:27.967

这种方法的一个问题是，每次更新时，可观察集合都会通知 UI。因此，每次都会不必要地重新渲染界面。如果你想阻止这种情况发生（类似于 winforms 中旧的 Suspend&ResumeLayout 方法），你可以这样做：

```
using (Dispatcher.DisableProcessing())
{
  for(int i=0;i<=255;i++)
    _ChannelBitLengthList.Add(i.ToString());
} 
```

禁用处理将停止 UI 更新。当 DispatcherProcessingDisabled 在 Using 范围的末尾被释放时，它将再次重新启用 UI 布局处理。

# javascript - 使用主干.d.ts

> ID：13049041
> 
> 赞同：5
> 
> 时间：2012-10-24T12:16:59.997
> 
> 标签：javascript, typescript

当模块未定义为字符串时，我似乎无法让任何导入工作。到底是怎么回事？

*测试.ts*

```
import b = module('Backbone') 
```

**不起作用**： *backbone.d.ts*

```
declare module Backbone {

    export class Events {
    ... 
```

**作品**： *backbone.d.ts*

```
declare module "Backbone" {

    export class Events {
    ... 
```

***编辑 1***：

仅供参考 从[10.1.4](http://go.microsoft.com/fwlink/?LinkId=267121)

> 带有 StringLiteral 的 AmbientModuleIdentification 声明了一个外部模块。这种类型的声明只允许在全局模块中。StringLiteral 必须指定顶级外部模块名称。不允许使用相对的外部模块名称

我不明白*不*将其指定为[此处](https://github.com/borisyankov/DefinitelyTyped)和[此处](http://gh.codehum.com/sekistner/backbone.d.ts)的字符串文字格式有何用处。如果您在`///<reference...`没有字符串文字模块的情况下使用它，但我正在尝试生成依赖于这些库的 AMD 模块，所以我需要导入才能工作。我是少数，我必须去修改每个*.d.ts*为字符串文字版本吗？

***编辑 2***：

使用字符串文字声明模块要求您的导入与该字符串文字完全匹配。您不能再使用此模块/模块定义位置的相对或绝对路径，即使它与尝试导入它的文件不在同一目录中。这使得 a`///<reference`和 import 是必需的，但会生成一个具有`tsc --module AMD`确切查找的模块（模块的路径由模块字符串文字指示`"Backbone"`）。

例如。

```
+- dep/
   |- backbone.d.ts
|- test.ts 
```

*骨干.d.ts*：

```
declare module "Backbone" {
    export class Events { 
```

**作品**：*test.ts*：

```
///<reference path="../dep/backbone.d.ts" />
import b = module('Backbone')

// generates
// define(["require", "exports", 'Backbone'] 
```

**不起作用**：*test.ts*：

```
import b = module('./dep/Backbone') 
```

*请注意，这也有效......*

```
declare module "libs/Backbone" {
...
///<reference path="dep/backbone.d.ts" />
import b = module('libs/Backbone')
...
// generates
define(["require", "exports", 'libs/Backbone'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:32:48.090

当你写这个：

```
declare module Backbone { 
```

这意味着您已经有一个位于全局范围内的模块（因此您可以立即使用它，不需要导入）。但是当你写这个时：

```
declare module "Backbone" { 
```

这意味着您指定导入的模块 (import ... = module("...")) 的外观。

# bash - 如何显示用户按下的键？

> ID：13049045
> 
> 赞同：0
> 
> 时间：2012-10-24T12:17:09.620
> 
> 标签：bash

请帮助如何在此脚本中添加变量，有人知道吗？谢谢你们。

```
#!/bin/bash

ARROW_UP=???    # I do not know
ARROW_DOWN=???  # I do not know
ARROW_LEFT=???  # I do not know
ARROW_RIGHT=??? # I do not know
ARROW_ENTER=??? # I do not know

case "$KEY" in "$ARROW_UP")    echo "press the up arrow key"
               "$ARROW_DOWN")  echo "press the down arrow key";;
               "$ARROW_LEFT")  echo "press the left arrow key"
               "$ARROW_RIGHT") echo "press the right arrow key"
               "$ARROW_ENTER") echo "press the enter key"
esac 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:30:56.797

试试这样的事情（你可能想添加一个案例来打破循环）：

```
#!/bin/bash

# Reset terminal to current state when we exit.
trap "stty $(stty -g)" EXIT

# Disable echo and special characters, set input timeout to 0.2 seconds.
stty -echo -icanon time 2 || exit $?

# String containing all keypresses.
KEYS=""

# Set field separator to BEL (should not occur in keypresses)
IFS=$'\a'

# Input loop.
while [ 1 ]; do

    # Read more input from keyboard when necessary.
    while read -t 0 ; do
        read -s -r -d "" -N 1 -t 0.2 CHAR && KEYS="$KEYS$CHAR" || break
    done

    # If no keys to process, wait 0.05 seconds and retry.
    if [ -z "$KEYS" ]; then
        sleep 0.05
        continue
    fi

    # Check the first (next) keypress in the buffer.
    case "$KEYS" in
      $'\x1B\x5B\x41'*) # Up
        KEYS="${KEYS##???}"
        echo "Up"
        ;;
      $'\x1B\x5B\x42'*) # Down
        KEYS="${KEYS##???}"
        echo "Down"
        ;;
      $'\x1B\x5B\x44'*) # Left
        KEYS="${KEYS##???}"
        echo "Left"
        ;;
      $'\x1B\x5B\x43'*) # Right
        KEYS="${KEYS##???}"
        echo "Right"
        ;;          
    esac
done 
```

更多细节[在这里](http://www.linuxquestions.org/questions/blog/nominal-animal-554844/bash-scripts-and-keyboard-input-34422/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:33:08.103

简短的回答是你不能。使用真正的编程语言。

可以在[这里](http://mywiki.wooledge.org/ReadingFunctionKeysInBash)找到一些过于复杂的解决方案，但我不认可它们。同页底部的KEYBD陷阱解决方案不错，但需要ksh93。

# c - 如何知道中断是否被禁用？

> ID：13049049
> 
> 赞同：5
> 
> 时间：2012-10-24T12:17:23.800
> 
> 标签：c, linux-kernel

有什么方法（或有用的功能）可以知道中断是否被禁用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T12:40:26.963

您可以使用`irqs_disabled()`功能：

```
#include <linux/irqflags.h>

int i = irqs_disabled(); 
```

# javascript - 使用 d3.js 时可以在文本中插入换行符吗？

> ID：13049050
> 
> 赞同：56
> 
> 时间：2012-10-24T12:17:25.393
> 
> 标签：javascript, d3.js

我正在寻找一种使用 d3.js 在工具提示文本元素中使用换行符的方法。

```
.text("test" +  "</br>" + "test") 
```

上述以及其他类似的努力似乎不起作用。

这里有一个线程似乎可以回答它：

[https://groups.google.com/forum/?fromgroups=#!topic/d3-js/GgFTf24ltjc](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/GgFTf24ltjc)

但解决方案不是很清楚。在上述情况下如何使用 .html？

.text(.html("test" + "" + "test"))

没用？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-07-25T00:23:17.910

由于您已经知道要在哪里打断文本，您可以考虑只添加单独的元素。

```
.append("text")
  .attr("dy", "0em")
  .text("line 1")   // "line 1" or whatever value you want to add here. 
```

然后对于第二行，只需添加一个偏移量

```
.append("text")
  .attr("dy", "1em") // you can vary how far apart it shows up
  .text("line 2")   // "line 2" or whatever value you want to add here. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-01T06:32:39.230

最好对第 1 行和第 2 行使用 'tspan' 属性 dy = 0em 和 dy = 1.2em

# android - android NDK中的颜色叠加

> ID：13049052
> 
> 赞同：14
> 
> 时间：2012-10-24T12:17:37.447
> 
> 标签：android, c++, bitmap, android-ndk

我想实现色相/颜色/饱和度颜色叠加。我看到了宏：

```
#define ColorBlend_Saturation(T,A,B) ColorBlend_Hls(T,A,B,HueA,LuminationA,SaturationB) 
```

我试图在 Adob​​e Photoshop 中用颜色重现它`#332244`并`#557711`获得结果颜色 - `#431076`。但是，在应用这些宏之后，我得到`#320C59`了颜色 - 结果。

**问题 1**：如何重现 Photoshop 的色调、饱和度和颜色算法？

**问题 2**：如何调整 Alpha 通道？例如，在我的颜色和光学 == 50 上，这应该在 photoshop 中 - #3b195d

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:52:48.860

以下是不同 Photoshop 混合模式的方程式：

```
 inline float Blend_Normal( float Base, float Overlay )
    {
        return Base;
    }
    inline float Blend_Lighten( float Base, float Overlay )
    {
        return ( Overlay > Base ) ? Overlay : Base;
    }
    inline float Blend_Darken( float Base, float Overlay )
    {
        return ( Overlay > Base ) ? Base : Overlay;
    }
    inline float Blend_Multiply( float Base, float Overlay )
    {
        return Base * Overlay;
    }
    inline float Blend_Average( float Base, float Overlay )
    {
        return ( Base + Overlay ) / 2.0f;
    }
    inline float Blend_Add( float Base, float Overlay )
    {
        return LMin( Base + Overlay, 1.0f );
    }
    inline float Blend_Subtract( float Base, float Overlay )
    {
        return LMax( Base + Overlay - 1.0f, 0.0f );
    }
    inline float Blend_Difference( float Base, float Overlay )
    {
        return fabs( Base - Overlay );
    }
    inline float Blend_Negation( float Base, float Overlay )
    {
        return 1.0f - fabs( 1.0f - Base - Overlay );
    }
    inline float Blend_Screen( float Base, float Overlay )
    {
        return 1.0f - ( 1.0f - Base ) * ( 1.0f - Overlay );
    }
    inline float Blend_Exclusion( float Base, float Overlay )
    {
        return Base + Overlay - 2 * Base * Overlay;
    }
    inline float Blend_Overlay( float Base, float Overlay )
    {
        return ( Overlay < 0.5f ) ? ( 2.0f * Base * Overlay ) : ( 2.0f * Base - 1.0f ) * ( 1.0f - Overlay );
    }
    inline float Blend_SoftLight( float Base, float Overlay )
    {
        return ( Overlay < 0.5f ) ? ( Base + 0.5f ) * Overlay : ( Base - 0.5f ) * ( 1.0f - Overlay );
    }
    inline float Blend_HardLight( float Base, float Overlay )
    {
        return Blend_Overlay( Overlay, Base );
    }
    inline float Blend_ColorDodge( float Base, float Overlay )
    {
        return ( Overlay > 1.0f - Math::EPSILON ) ? Overlay : LMin( 1.0f, Base / ( 1.0f - Overlay ) );
    }
    inline float Blend_ColorBurn( float Base, float Overlay )
    {
        return ( Overlay < Math::EPSILON ) ? Overlay : LMax( 0.0f, 1.0f - ( 1.0f - Base ) / Overlay );
    }
    inline float Blend_LinearDodge( float Base, float Overlay )
    {
        return Blend_Add( Base, Overlay );
    }
    inline float Blend_LinearBurn( float Base, float Overlay )
    {
        return Blend_Subtract( Base, Overlay );
    }
    inline float Blend_LinearLight( float Base, float Overlay )
    {
        return ( Overlay < 0.5f ) ? Blend_LinearBurn( Base, 2 * Overlay ) : Blend_LinearDodge( Base, ( 2 * ( Overlay - 0.5f ) ) );
    }
    inline float Blend_VividLight( float Base, float Overlay )
    {
        return ( Overlay < 0.5f ) ? Blend_ColorBurn( Base, 2 * Overlay ) : Blend_ColorDodge( Base, ( 2 * ( Overlay - 0.5f ) ) );
    }
    inline float Blend_PinLight( float Base, float Overlay )
    {
        return ( Overlay < 0.5f ) ? Blend_Darken( Base, 2 * Overlay ) : Blend_Lighten( Base, ( 2 * ( Overlay - 0.5f ) ) );
    }
    inline float Blend_HardMix( float Base, float Overlay )
    {
        return ( Blend_VividLight( Base, Overlay ) < 0.5f ) ? 0.0f : 1.0f;
    }
    inline float Blend_Reflect( float Base, float Overlay )
    {
        return ( Overlay  > 1.0f - Math::EPSILON ) ? Overlay : LMin( 1.0f, Base * Base / ( 1.0f - Overlay ) );
    }
    inline float Blend_Glow( float Base, float Overlay )
    {
        return Blend_Reflect( Overlay, Base );
    }
    inline float Blend_Phoenix( float Base, float Overlay )
    {
        return LMin( Base, Overlay ) - LMax( Base, Overlay ) + 1.0f;
    } 
```

来自[Linderdaum 引擎 SDK](http://www.linderdaum.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T04:08:48.793

**问题1：**

> Photoshop 的色相、饱和度、颜色和亮度混合模式基于颜色空间，其尺寸被 HSL 和 HSV 文章称为色相、色度和亮度。注意这个空间与HSL和HSV都不同，只有色调维度在三者之间共享；有关详细信息，请参阅该文章。
> 
> 色调混合模式保留了底层的亮度和色度，同时采用了顶层的色调。
> 
> 饱和度混合模式保留底层的亮度和色调，同时采用顶层的色度。
> 
> 颜色混合模式保留底层的亮度，同时采用顶层的色调和色度。
> 
> 来自[http://en.wikipedia.org/wiki/Blend_modes](http://en.wikipedia.org/wiki/Blend_modes)

经过 3 个多小时的试验，我成功地将 HSV -> RGB 转换器升级为工作饱和度搅拌器。其他混合模式应该类似。

这是代码：

```
#include <cmath>
#include <iostream>

using namespace std;

struct HSVColor
{
    float H,S,V;
};

struct RGBColor
{
    float R,G,B;
    RGBColor() = default;
    RGBColor(int r,int g, int b):
        R(r/255.0),
        G(g/255.0),
        B(b/255.0)
    {
    }
};

HSVColor RGBToHSV(const RGBColor& RGB)
{
    float Max;
    float Min;
    float Chroma;
    HSVColor HSV;

    Min = min(min(RGB.R, RGB.G), RGB.B);
    Max = max(max(RGB.R, RGB.G), RGB.B);
    Chroma = Max - Min;

    //If Chroma is 0, then S is 0 by definition, and H is undefined but 0 by convention.
    if(Chroma != 0)
    {
        if(RGB.R == Max)
        {
            HSV.H = (RGB.G - RGB.B) / Chroma;

            if(HSV.H < 0.0)
            {
                HSV.H += 6.0;
            }
        }
        else if(RGB.G == Max)
        {
            HSV.H = ((RGB.B - RGB.R) / Chroma) + 2.0;
        }
        else //RGB.B == Max
        {
            HSV.H = ((RGB.R - RGB.G) / Chroma) + 4.0;
        }

        HSV.H *= 60.0;
        HSV.S = Chroma / Max;
    }

    HSV.V = Max;

    return HSV;
}

RGBColor Saturate(const HSVColor& HSV,const HSVColor& overlay)
{
    float os = overlay.S;
    float ov = overlay.V;

    float Min;
    float Chroma;
    float Hdash;
    float X;
     RGBColor RGB{0,0,0};

    Chroma = os * ov; // Orginal was HSV.S * HSV.V
    Hdash = HSV.H / 60.0;
    X = Chroma * (1.0 - abs(fmod(Hdash , 2.0) - 1.0));

    if(Hdash < 1.0)
    {
        RGB.R = Chroma;
        RGB.G = X;
    }
    else if(Hdash < 2.0)
    {
        RGB.R = X;
        RGB.G = Chroma;
    }
    else if(Hdash < 3.0)
    {
        RGB.G = Chroma;
        RGB.B = X;
    }
    else if(Hdash < 4.0)
    {
        RGB.G= X;
        RGB.B = Chroma;
    }
    else if(Hdash < 5.0)
    {
        RGB.R = X;
        RGB.B = Chroma;
    }
    else if(Hdash <= 6.0)
    {
        RGB.R = Chroma;
        RGB.B = X;
    }

    Min = ov - Chroma; // Orginal was HSV.V - Chroma

    RGB.R += Min;
    RGB.G += Min;
    RGB.B += Min;

    return RGB;
}

int main(){
    RGBColor base{51, 34, 68};
    RGBColor overly{85, 119, 17};

    RGBColor r = Saturate(RGBToHSV(base),RGBToHSV(overly));

    cout << int(r.R*255) << endl;
    cout << int(r.G*255) << endl;
    cout << int(r.B*255) << endl;
} 
```

原始 HSV <-> RGB 转换器代码在这里：[http ://wiki.beyondunreal.com/HSV-RGB_Conversion](http://wiki.beyondunreal.com/HSV-RGB_Conversion)

**问题2。**

使用饱和度，这实际上很容易，在饱和度混合后，在 rgb 颜色空间中使用正常的 alpha 混合。

```
RGBColor base;
RGBColor overly;    
RGBColor saturated = Saturate(base,overly);
RGBColor result = AlphaBlend(base,saturated,overly.alpha); 
```

注意：这可能不适用于其他混合模式。

# objective-c - UICollectionView 和图像

> ID：13049056
> 
> 赞同：0
> 
> 时间：2012-10-24T12:17:56.563
> 
> 标签：objective-c, ios, xcode, uicollectionview, uicollectionviewcell

我有一个`UICollectionView`，而且效果很好，但我有一个疑问。在我看来`UICollectionViewCell`，我有一个并且里面有一个 UIImage。该单元格链接到一个空白视图控制器，在其中我有一个`UIScrollView`（用于管理缩放）和一个`UIImage`（全尺寸图像）。

我想知道是否有一些委托或可以自动处理图像打开过程的东西（使用缩放等）。

现在我正在用`UIScrollViewDelegate`委托和方法处理缩放效果`viewForZoomingInScrollView:`......但结果很差，绝对不是流体！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:47:52.817

没有内置视图可以做你想做的事，没有。你用`UIImageView`inside做正确的事`UIScrollView`。如果它不是很流畅，那么很可能是因为您的图像很大。解决这个问题的方法是为不同的缩放级别加载不同的图像。因此，当您放大时，请听`UIScrollViewDelegate`调用的方法`scrollViewDidZoom:`并在放大时将图像更改为更好的分辨率。或者，看看`CATiledLayer`.

请注意，这与您的`UICollectionView`.

# android - Android中的线性布局

> ID：13049058
> 
> 赞同：0
> 
> 时间：2012-10-24T12:18:02.843
> 
> 标签：android, android-layout, android-linearlayout

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

     int N = 10; 
     TextView[] myTextViews = new TextView[N]; 
    LinearLayout myLinearLayout = (LinearLayout) findViewById(R.id.test);
    for (int i = 0; i < N; i++) {
         TextView rowTextView = new TextView(this);
        rowTextView.setText(message);

        myLinearLayout.addView(rowTextView);
        myTextViews[i] = rowTextView; } 
```

上述代码中的错误是什么？显示“不幸的是应用程序已停止”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:19:14.503

你没有`setContentView()`在任何地方打电话。尝试使用：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.id.<yourlayout>);
    //Your code 
```

你不能在你的布局中引用视图，除非它被夸大了。调用`findViewById()`在当前布局中查找视图。由于您没有设置布局，您将获得`myLinearLayout`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:25:15.313

如果您要显示 10 个简单的文本项，一个在另一个之上，您可能需要考虑使用 ListView。Eclipse 插件将为您生成一个示例应用程序，其中的 ListView 是从一个开箱即用的静态数组中填充的。只需选择`New > Other... > Android > Android Application Project > [name app] > [create icon (optional)] > MasterDetailFlow`

# eclipse - PyDev 中只有“部分”自动完成

> ID：13049063
> 
> 赞同：1
> 
> 时间：2012-10-24T12:18:10.417
> 
> 标签：eclipse, autocomplete, pydev

我正在使用 Ecipe Juno（版本：4.2.1，内部版本号：M20120914-1800），由于某种原因，变量/函数名称的 Alt+/ 自动完成功能无法正常工作 - 它完成了与匹配的最后一个变量的类型前缀前缀，而无需像以前版本那样循环使用其他选项。

我正在编写 python 代码并使用 pydev 例如，具有以下几行：

```
var1 = 0
var2  = 1
var14444444444 = -1 
```

然后输入：

```
va 
```

然后点击 Alt+/ 组合将完成 'va' 到 var14444444444。按住 Alt 并再次（再次）按下 / 键将无济于事，因为编辑器认为 var14444444444 是要完成的前缀，因此找不到匹配项。

如果我有代码：

```
var1 = 0
var14444444444XXXXXXX = -1
var2  = 1
var14444444444 = -1 
```

打字

```
va 
```

然后 Alt+/ 完成到 var14444444444 并按住 Alt 并再次点击 / 将自动完成到 var14444444444XXXXXXX。

这种行为非常烦人，并且与以前的版本不一致。有没有办法配置它？（我查看了编辑器选项，但找不到任何东西）

我将补充一点，Ctrl+space 确实会打开一个包含所有可能补全的下拉菜单，但这需要太多的击键（Ctrl+space，+ 一系列箭头才能达到首选补全，然后 Enter），这会破坏生产力目的。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T19:32:40.303

去

1.  Eclipse 首选项
2.  PyDev
3.  编辑
4.  代码完成
5.  检查“**请求完成所有字母字符和_？** ”

***重新启动 Eclipse。***

# objective-c - 将对象传递给选择器操作

> ID：13049064
> 
> 赞同：0
> 
> 时间：2012-10-24T12:18:10.323
> 
> 标签：objective-c, ios, xcode

好的简单问题，但找不到答案。

我有一个按钮可以在我的应用程序中保存信息。我有

```
 NSMutableArray *textFields = [[NSMutableArray alloc] initWithCapacity:5];
    UITextField *textField = nil; 
```

这是我要保存的信息，我在 textFields mutablearray 中有 5 个文本字段。

```
[save addTarget:self action:@selector(saveInfo)
 forControlEvents:UIControlEventTouchUpInside]; 
```

和

```
-(void)saveInfo {
    [[[NSUserDefaults standardUserDefaults] setValue: ????? forKey:@"Phone"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

问题是如何在我的 saveInfo void 中访问和获取类似 textFields[1].text 的信息？

好的为了让事情更清楚一点，我添加了整个班级。它不是很大，也许有人可以看到这就是我的实现的问题。

```
@implementation Settings

- (id)init: (TableViewController*) TableControll {
  NSMutableArray *textFields = [[NSMutableArray alloc] initWithCapacity:5];
    UITextField *textField = nil;

    for (int i = 0; i < 3; i++) {
        textField = [[UITextField alloc] initWithFrame:CGRectMake(0.0f, 0.0f+(i*35), 120.0f, 30.0f)];
        textField.backgroundColor = [UIColor whiteColor];
        [textField setBorderStyle:(UITextBorderStyleRoundedRect)];
        [TableControll.view addSubview:textField];

        [textFields addObject:textField];
        [textField release]; textField = nil;
    }
    UITextField *textName = textFields[0];
    textName.placeholder = @"Vardas";

    UITextField *textNo = textFields[1];
    textNo.placeholder = @"Telefonas";
    textNo.keyboardType = UIKeyboardTypeNumberPad;
    UITextField *textPin = textFields[2];
    textPin.keyboardType = UIKeyboardTypeNumberPad;
    textPin.placeholder = @"Pin";

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(150, 20, 160, 30);
    [button setTitle:@"Advanced settings" forState:UIControlStateNormal];
    [TableControll.view addSubview:button];
    UIButton *save = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    save.frame = CGRectMake(150, 60, 160, 30);
    [save setTitle:@"Save settings" forState:UIControlStateNormal];
    [TableControll.view addSubview:save];
    [button addTarget:self action:@selector(goAdvanced)
     forControlEvents:UIControlEventTouchUpInside];
    [save addTarget:self action:@selector(saveInfo)
     forControlEvents:UIControlEventTouchUpInside];

    return self;
}

-(void)goAdvanced {
    AppDelegate *newControll = (AppDelegate*)[UIApplication sharedApplication].delegate;
    [newControll ChangeController];
}

-(void)saveInfo {

    for(int i=0;i<5;i++) {
        UITextField *tempTxtField=[_textFields objectAtIndex:i];
        NSLog(@"do it %@",tempTxtField.text);
    }

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:24:15.363

如果您使用界面构建器，您想要做的是`IBOutlet`为您的文本字段创建一堆，而不是将它们保存在一个数组中。看看这个：[教程](http://oleb.net/blog/2011/06/creating-outlets-and-actions-via-drag-and-drop-in-xcode-4/)

现在看起来您正在手动创建东西，所以在这种情况下，您可能只想声明您的数组，`@property`以便可以通过您的保存方法访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:26:28.957

要从您的数组中访问`text`a 的属性，`UITextField`您可以编写：

```
((UITextField *)[textFields objectAtIndex:1]).text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:30:06.487

如果要访问所有文本字段，

```
 for(int i=0;i<[textFields count];i++) {
    UITextField *tempTxtField=[textFields objectAtIndex:i];
    NSlog(@"%@",tempTxtField);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:56:35.700

```
-(void)saveInfo {
    NSMutableArray *tempArr = [NSMutableArray array];
    for(int i = 0; i < [textFieldsArray count]; i++){
        [tempArr addObject:[(UITextField*)[textFieldsArray objectAtIndex:i]text]];
    }
    [[[NSUserDefaults standardUserDefaults] setValue:tempArr forKey:@"Phone"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:55:07.243

我不完全确定我理解你的问题，但这就是我会代替你做的事情。我没有创建一个数组来保存每个文本字段，而是为它们分配一个自定义标签。任何数字都可以（尽管避免零，因为这是所有视图的默认标记）。所以你的 init 方法看起来像这样：

```
for (int i = 0; i < 3; i++) {
    textField = [[UITextField alloc] initWithFrame:CGRectMake(0.0f, 0.0f+(i*35), 120.0f, 30.0f)];
    textField.backgroundColor = [UIColor whiteColor];
    textField.tag = (i+1);
    [textField setBorderStyle:(UITextBorderStyleRoundedRect)];
    [TableControll.view addSubview:textField];
    [textField release]; textField = nil;
} 
```

然后在要引用文本字段的代码中，您将通过其标记检索视图，确保将其转换为 UITextField。

-（无效）保存信息{

```
for(int i=0;i<5;i++) {
    UITextField *textField = nil;
    UIView *view = [self.view viewsWithTag:i];
    if ([view isKindOfClass:[UITextField class]]) {
        textField = (UITextField *) view;
        NSLog(@"do it %@",textField.text)
    }

} 
```

}

注意：我引用的是 self.view，但您需要引用 TableControll.view。您需要在代码中的某处保留对它的引用。另外，我建议您开始使用 ARC。

希望有帮助！祝你好运！

# django - Django模型过滤器不拉入对象

> ID：13049065
> 
> 赞同：0
> 
> 时间：2012-10-24T12:18:14.580
> 
> 标签：django, django-models, django-views

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

我有一个模板应该显示一个产品和每个产品的产品功能列表，出于某种原因，这些功能没有显示在模板中。

这是视图：

```
@login_required
def view_products(request):
    """
    ..  function:: view_products()

        View the Products

        :param request: Django Request object
    """

    data = { 'user' : request.user }
    if (request.user.is_authenticated() and request.user.is_superuser):
        products = Products.objects.all()

        add_feature_form = rsb.forms.AddProductFeatureForm();
        data.update({ 'form' : add_feature_form })
        data.update({ 'products' : products })
        data.update(csrf(request))

        return render_to_response("view_products.html", data)

    return render_to_response("index.html", data) 
```

以下是使用产品功能的模板部分：

```
<table>
    {% for product in products %}
        <tr>
            <td align="right">Product Name:</td><td>{{ product.name }}</td>
        </tr>
        <tr>
            <td align="right">Price:<br /></td><td>${{ product.price }}</td>
        </tr>
        <tr>
            <ul>
            {% for productfeature in product.productfeature_set.all %}
                <form action="/removeProductFeature/" method="post">{% csrf_token %}
                <li>
                    {{ productfeature.feature }}
                    <input type="hidden" name="feature" value={{ productfeature.feature }}>
                    <input type="hidden" name="product_id" value={{ product.id }}>
                    <label class="formlabel">&nbsp;</label><input type="submit" value="Remove  &#9658;">
                </tr>
                </form>
            {% endfor %}
            </ul>
        </tr>
        <tr>
            <form action="/addProductFeature/" method="post">{% csrf_token %}
            <table>
                <tr>
                    <td align="right"><label class="formlabel">Add Feature:<br /></label></td><td>{{ form.feature }}</td>
                </tr>
                <input type="hidden" name="product_id" value={{ product.id }}>
                <tr>
                    <td align="right"><label class="formlabel">&nbsp;</label></td><td><input type="submit" value="Add  &#9658;"></td>
                </tr>
            </form>
            </table>
        </tr>
   {% endfor %}
</table> 
```

基本上这个模板应该向你展示一个产品。每个功能都将列在其下方，并带有“删除”该功能的选项。然后，在底部，一个允许您添加附加功能的字段。

现有功能根本不显示。关于我可能做错了什么的任何建议？

更新 1：

我错过了`s`模板中的一个。 `product.productfeatures_set.all`不是`product.productfeature_set.all`。我可以走了。谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:21:25.257

请不要这样做：

```
product_features = []
for product in products:
    features = ProductFeatures.objects.filter(product = product)
    product_features.append(features)
    product.features = product_features 
```

相反，只需将您的 products 变量传递给模板上下文。

在模板中做：

```
{% for product in products %}
    Product id: {{ product.pk }}
    {% for productfeature in product.productfeature_set.all %}
        {{ productfeature.feature }}
    {% endfor %}
{% endfor %} 
```

你会问什么`productfeature_set`（或者，我希望你会问：D），这是一个非常好的问题。不要惊慌，这一切都有[记录](https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects)。

现在，这将导致子查询产生。解决方案是使用[prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)。但我认为你暂时不必担心这个:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:23:29.640

是的，你正在尝试实现一些已经内置到 Django 中的东西！

您应该在 django 的反向关系中使用构建。

```
# give an Product instance product
# this should work
product.productfeature_set.all() 
```

可以从模板 a 访问`product.productfeature_set.all` 并且可以迭代。

# php - Jquery AJAX 函数总是返回 false

> ID：13049066
> 
> 赞同：0
> 
> 时间：2012-10-24T12:18:16.677
> 
> 标签：php, jquery, ajax

我的 JS 和 PHP 文件都正常工作，我遇到的问题是，即使我看到 PHP 脚本导致输出“继续” ，它也**总是说提交错误。**数据库插入从表单中正常工作，并且计数存储了我的表中的行数。有什么我忽略的吗？

## JS

```
var dataString = $("form").serialize();
var msg = '<?php echo $msg; ?>';

$.ajax({
    type: "POST",
    url: 'submit_form.php',
    data: dataString,
    datatype: 'html',
    error: function() {
        alert('Error');
    },
    success: function(msg) {
        if (msg == 'proceed') {
            $('#contact_form').html("<div id='message'></div>");
            $('#message').html("<h2>Contact Form Submitted!</h2>").append("<p>We will be in touch soon.</p>");
        }
        else {
            $('#contact_form').html("<div id='message'></div>");
            $('#message').html("<h2>Error with Submission!</h2>").append("<p>Please Try again.</p>");
        }
    }
});
return false;​ 
```

## PHP

```
if ($count > 15)
{
    $msg = 'error';
    echo $msg;
    exit();
}
elseif ($stmt = $mysqli->prepare("INSERT INTO Comments (Name, Email, Comment) values (?, ?, ?)"))
{
    //do sql logic here 
    $msg = 'proceed';
    echo $msg;
}
else
{
    /* Error */
    printf("Prepared Statement Error: %s\n", $mysqli->error);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:30:41.953

您可能会在“继续”响应中输出空格或其他字符，这会使成功处理程序中的条件为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:35:05.123

```
var dataString = $("form").serialize();
var msg = '<?php echo $msg; ?>';

$.ajax({
    type: "POST",
    url: 'submit_form.php',
    data: dataString,
    dataType: 'html',
    error: function() {
        alert('Error');
    },
    success: function(msg) {
        if (msg == 'proceed') {
            $('#contact_form').html("<div id='message'></div>");
            $('#message').html("<h2>Contact Form Submitted!</h2>").append("<p>We will be in touch soon.</p>");
        }
        else {
            $('#contact_form').html("<div id='message'></div>");
            $('#message').html("<h2>Error with Submission!</h2>").append("<p>Please Try again.</p>");
        }
    }
});
return false;​ 
```

尝试这个 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T14:17:16.803

I had the same problem and the error is in php not ajax.

Define $MySQLi at the top of submit_form.php and try ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:35:20.857

试试这个：使用修剪来清理响应

```
success: function(msg) {
    if ($.trim(msg) == 'proceed') {
        $('#contact_form').html("<div id='message'></div>");
        $('#message').html("<h2>Contact Form Submitted!</h2>").append("<p>We will be in touch soon.</p>");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T20:40:04.603

我看到你的 ajax 可能总是运行错误方法的两个最常见的原因。

```
 dataType=json 
```

如果不是 json 删除此行

```
 async : true 
```

考虑改变这个

# android - 清除以前的视图并在同一活动中单击按钮时显示新视图

> ID：13049069
> 
> 赞同：0
> 
> 时间：2012-10-24T12:18:27.333
> 
> 标签：android, android-layout, view

我创建了一个顶部有两个按钮的活动。一键显示“短信记录”，二键显示“通话记录”。

单击“短信日志”按钮时，我正在动态创建文本视图和线性布局以显示短信日志。

单击“通话记录”时，我正在动态创建另一个文本视图和线性布局以显示通话记录。

但问题是，一旦我们点击“sms log”按钮，然后我们点击“call log”按钮，之前创建的线性布局不会被删除，并且两者（以前的布局和当前布局）都会同时显示。

但是我希望在单击第二个按钮时应该删除以前的布局。

我应该使用哪个功能来删除以前的视图组或布局。告诉我你是否需要阅读我的课程文件。

**编辑：**

这是我的活动代码，

```
public class General extends Activity
{
    String phone, message;
    TextView Logs;
    View layout, callLayout;
    TextView data, callData, line, callLine;
    Button smsLog, callLog;
    LinearLayout ll, callll;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.general_main);
        Logs = (TextView)findViewById(R.id.Logs);
        layout = findViewById(R.id.layout);
        callLayout = findViewById(R.id.layout);
        smsLog = (Button)findViewById(R.id.smsLogs);
        callLog = (Button)findViewById(R.id.callLogs);
        smsLog.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) 
            {
                callLayout.setVisibility(View.GONE);
                       ll = new LinearLayout(getApplicationContext());
                       ll.setOrientation(LinearLayout.VERTICAL);
                       data = new TextView(getApplicationContext());
                        data.setText("First Line");
                        data.setTextColor(Color.YELLOW);
                        line = new TextView(getApplicationContext());
                        line.setText("Second Line");
                        ((ViewGroup) ll).addView(data);
                        ((ViewGroup) layout).addView(line);
                        ((ViewGroup) layout).addView(ll);
            }
        });

        callLog.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v) 
            {
                layout.setVisibility(View.GONE);
                        callll = new LinearLayout(getApplicationContext());
                        callll.setOrientation(LinearLayout.VERTICAL);
                         callData = new TextView(getApplicationContext());
                            callLine = new TextView(getApplicationContext());
                        callData.setText("Third Line");
                        callLine.setText("Fourth Line");
                        ((ViewGroup) callll).addView(callData);
                        ((ViewGroup) callLayout).addView(callLine);
                        ((ViewGroup) callLayout).addView(callll);
            }
        });
    }
} 
```

我已经删除了额外的代码并使其易于理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:28:31.463

您可以使用 FrameLayout 来解决您的问题。
但我建议你使用 tabview。
[这](http://adilsoomro.blogspot.in/2011/06/iphone-like-tabs-in-android.html)是演示如何开发选项卡式应用程序的链接。
祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:24:14.030

你可以实现一个`TabView`.

但是，您当前的设置只是将一个视图组的可见性更改为，将另一个视图组更改`GONE`为`VISIBLE`.

[`GONE`](http://developer.android.com/reference/android/view/View.html#GONE)将使视图不可见，并且不再占用任何空间。

**根据添加到问题的代码进行**编辑****

 **您`layout`和您`callLayout`都使用相同的`XML`视图。在你的中实现 2 个相同的视图，`xml`并保持一个可见，一个消失。这样，当您设置`layout`或对它们的`callLayout`可见性时，`GONE`它们是 2 个不同的不一样的。所以你`onClick()`会有这样的东西：

对于`smsLog`：

```
layout.setVisibility(View.GONE);
callLayout.setVisibility(View.VISIBLE); 
```

对于`callLog`：

```
callLayout.setVisibility(View.GONE);
callLayout.setVisibility(View.VISIBLE); 
```**

# c - RGB888（24 位）转 PNG/JPEG 图像算法

> ID：13049071
> 
> 赞同：1
> 
> 时间：2012-10-24T12:18:32.877
> 
> 标签：c, png, jpeg, rgb, image-conversion

我需要将 24 位 RGB(888) 图像数据转换为 PNG 或 JPEG 图像（尽可能）。需要更简单的方法来执行此操作，例如将 RGB888 转换为 BMP 而无需任何压缩。如果在 RGB 数据中添加 PNG/JPEG 标头，只需稍加修改，那就太好了。准备根据要求提供更多详细信息..

提前致谢..

语言/平台：C/Linux

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:35:12.657

使用[miniz](http://code.google.com/p/miniz/) - 也就是单个 C 源文件 Deflate/Inflate 压缩库，具有 zlib 兼容的 API、ZIP 存档读取/写入、PNG 写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:53:22.080

如果您只需要一种图像格式，那么最简单的可能是[ppm](http://netpbm.sourceforge.net/doc/ppm.html)（或 pgm 表示灰度）

您只需在未压缩的二进制数据中添加一个小的 ascii 标头，大多数图像应用程序都会读取它。

```
P6   <-- magic value for binary data
# a comment if you want
640 480    <-- width x height
255      <-- max pixel value
.... binary data here ....... 
```

# iphone - 滚动视图委托方法应用程序崩溃

> ID：13049075
> 
> 赞同：0
> 
> 时间：2012-10-24T12:18:49.587
> 
> 标签：iphone, uiscrollview

如果我水平移动滚动视图，它必须一次显示一个带有新标签的新表格。问题的数量可能是 10 或 20 ..意味着我们每次都必须创建新表格和新标签滚动视图水平移动..

当用户第一次选择委托方法将调用的类别时。在这个方法中，我也创建了表格视图和标签，如下所示。

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{ 
```

{ @尝试 {

```
cancelScroll = NO;

if (scrollEnabled) {

    scrollEnabled = NO;
NSLog(@"Begin Scroll Dragging");
NSLog(@"%f -- %f",scrollView.contentOffset.x,scrollView.contentOffset.y);

if (scrollDirection == 1) {

    scrollDirection = 0;

    CGRect rect = mainTable.frame;
    [scrollTableView scrollRectToVisible:rect animated:NO];
    return;
}

else if (scrollDirection == 2) {

    scrollDirection = 0;
    HUDProgress.alpha=0;

    CGFloat pageWidth = scrollTableView.frame.size.width;
    int page;
    if (pageControlBeingUsed) {

        page = pageControl.currentPage;
     //   pageControlBeingUsed = NO;

    }

    else {

        page= floor((scrollTableView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    }

    NSLog(@"%d",page);

    if (page == [questionTextArray count] - 1) {

        if (maxValueReached) {

            CGRect rect = mainTable.frame;
            [scrollTableView scrollRectToVisible:rect animated:NO];
            return;
        }

    }

    photoAlbumView.alpha = 0;
    photoView.alpha = 0;
    FileAddView.alpha = 0;
    settingsView.alpha = 0;
    refreshView.alpha = 0;

    photoAlbumViewPortrait.alpha = 0;
    FileAddViewPortrait.alpha = 0;
    settingsViewPortrait.alpha = 0;
    refreshViewPortrait.alpha = 0;

    checkValueForTableView = TRUE;

    if (orientation == 1 ) {

        if (!expandAction) {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 720.0, 596.0);

        }
        else {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 930.0, 596.0);

        }
    }
    else {
        if (!expandAction) {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 520.0, 680.0);

        }
        else {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 720.0, 680.0);

        }

    }

    if (page >= 0) {

        if (page > tempPage) {

            int difference = page - tempPage;

            NSLog(@"%d",difference);
            NSLog(@"%f",tableXPosition);

            tableXPosition =  (tableXPosition  + (difference * tableWidthPosition));
            NSLog(@"%f",tableXPosition);
        }

        else if (page < tempPage){

            int difference = tempPage - page;

            NSLog(@"%d",difference);

            tableXPosition = abs ((difference * tableWidthPosition) - tableXPosition);

            NSLog(@"%f",tableXPosition);

        }

        else {

            CGRect rect = mainTable.frame;
            [scrollTableView scrollRectToVisible:rect animated:NO];

        }

    }

    if([questionTextArray count] > 1)
    {
        pageControl.numberOfPages = [questionTextArray count];

        [pageControl addTarget:self action:@selector(changePage) forControlEvents:UIControlEventValueChanged];

        if(scrollTableView != nil)
        {
            if (mainTable != nil) {

                [mainTable release];
                mainTable = [[UITableView alloc] initWithFrame:CGRectMake(tableXPosition , 45.0, tableWidthPosition, 565.0) style:UITableViewStyleGrouped];
            }

            mainTable.delegate = self;
            mainTable.dataSource = self;
            mainTable.scrollEnabled = YES;
            mainTable.backgroundColor = [UIColor clearColor];
            [mainTable reloadData];
            [scrollTableView addSubview:mainTable];

        }

        NSLog(@"%d  %d",page,previousPage);

        if (page >= 0) {

            if (previousPage != page) {

                pageControl.currentPage= page;
            }
        }

        if (page >= 0) {

            if (previousPage != page) {

                UIImageView *imgView = [[UIImageView alloc] init];
                UILabel *questionTextLbl1 = [[UILabel alloc] init];
                UILabel *questionNumberLbl1 = [[UILabel alloc] init];

                if (orientation == 1) {
                      if (!expandAction) {

                        imgView.frame = CGRectMake(tableXPosition, 0.0, 710.0, 39.0);
                        questionTextLbl1.frame =  CGRectMake(10.0, 2.0, 430.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(550.0, 2.0, 200.0, 35.0);
                    }
                    else {

                        imgView.frame = CGRectMake(tableXPosition, 0.0, 920.0, 39.0);
                        questionTextLbl1.frame =  CGRectMake(50.0, 2.0, 500.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(800.0, 2.0, 150.0, 35.0);

                        compressButton = [UIButton buttonWithType:UIButtonTypeCustom];
                        compressButton.frame = CGRectMake(10.0, 10.0, 25.0, 25.0);
                        [compressButton setImage:[UIImage imageNamed:@"Drop Down small2.png"] forState:UIControlStateNormal];
                        [compressButton addTarget:self action:@selector(compressAction) forControlEvents:UIControlEventTouchUpInside];

                    }

                    imgView.contentMode = UIViewContentModeScaleToFill;
                    imgView.backgroundColor = [UIColor clearColor];
                    imgView.image = [UIImage imageNamed:@"Top gary header.png"];
                    [scrollTableView addSubview:imgView];
                    if (!expandAction) {

                    }
                    else {
                        compressButton.backgroundColor = [UIColor clearColor];
                        [compressButton addTarget:self action:@selector(compressAction) forControlEvents:UIControlEventTouchUpInside];
                      [imgView addSubview:compressButton];
                        imgView.userInteractionEnabled = YES;

                    }

                    questionTextLbl1.backgroundColor = [UIColor clearColor];
                    questionTextLbl1.numberOfLines = 0;
                    questionTextLbl1.text = [NSString stringWithFormat:@"%d.%@?",page + 1,[questionTextArray objectAtIndex:page]];
                    NSLog(@"Question arry %@", questionTextArray);
                    [imgView addSubview:questionTextLbl1];

                    if([questionTextArray count] > 1)
                    {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question %d/%d",page + 1,[questionTextArray count]];

                    }
                    else {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question 1"];
                    }

                    questionNumberLbl1.backgroundColor = [UIColor clearColor];
                    questionNumberLbl1.numberOfLines = 0;
                    [imgView addSubview:questionNumberLbl1];
                }

                else {

                    if (!expandAction) {

                        imgView.frame = CGRectMake(tableXPosition, 0.0, 530.0, 38.0);
                        questionTextLbl1.frame =  CGRectMake(10.0, 2.0, 350.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(380.0, 2.0, 150.0, 35.0);
                    }
                    else {
                        imgView.frame = CGRectMake(tableXPosition, 0.0, 720.0, 38.0);
                        questionTextLbl1.frame =  CGRectMake(40.0, 2.0, 500.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(550.0, 2.0, 150.0, 35.0);

                        compressButton = [UIButton buttonWithType:UIButtonTypeCustom];
                        compressButton.frame = CGRectMake(10.0, 10.0, 25.0, 25.0);
                        [compressButton setImage:[UIImage imageNamed:@"Drop Down small2.png"] forState:UIControlStateNormal];
                        [compressButton addTarget:self action:@selector(compressAction) forControlEvents:UIControlEventTouchUpInside];

                    }

                    imgView.contentMode = UIViewContentModeScaleToFill;
                    imgView.backgroundColor = [UIColor clearColor];
                    imgView.image = [UIImage imageNamed:@"Top gary header.png"];
                    [scrollTableView addSubview:imgView];

                    if (!expandAction) {

                    }
                    else {
                    [imgView addSubview:compressButton];
                    imgView.userInteractionEnabled = YES;

                    }

                    questionTextLbl1.backgroundColor = [UIColor clearColor];
                    questionTextLbl1.numberOfLines = 0;
                    questionTextLbl1.font = [UIFont systemFontOfSize:14.0];
                    questionTextLbl1.text = [NSString stringWithFormat:@"%d.%@?",page + 1,[questionTextArray objectAtIndex:page]];
                    NSLog(@"Question arry %@", questionTextArray);
                    [imgView addSubview:questionTextLbl1];

                    if([questionTextArray count] > 1)
                    {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question %d/%d",page + 1,[questionTextArray count]];

                    }
                    else {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question 1"];
                    }

                    questionNumberLbl1.backgroundColor = [UIColor clearColor];
                    questionNumberLbl1.numberOfLines = 0;
                    [imgView addSubview:questionNumberLbl1];

        }

                [mainTable reloadData];
           //     [scrollTableView  addSubview:mainTable];

                [imgView release];
                [questionNumberLbl1 release];
                [questionTextLbl1 release]; 
```

//
CGRect rect = mainTable.frame;

```
 if (pageControlBeingUsed) {

                    [scrollTableView scrollRectToVisible:rect animated:YES];
                    pageControlBeingUsed = NO;

                }

                else {

                    [scrollTableView scrollRectToVisible:rect animated:NO];
                }

                tempPage = page;
                previousPage = page;

                if (page == [questionTextArray count] - 1){

                    maxValueReached = YES;
                }

                else {

                    maxValueReached = NO;
                }
            }

        }

        NSLog(@"page:%d  previous page:%d temp page:%d",page,previousPage,tempPage);
  //      sleep(0);

    }

} 
```

}

```
else {

    [self killScroll];
    scrollDirection = 0;

} 
```

} @catch (NSException *异常) {

```
 NSLog(@"Exception: %@---%@",[exception name],[exception reason]);
}
@finally {

    NSLog(@"Finally block");
} 
```

它在模拟器中运行良好，但在 iPad 中运行了一段时间，在滚动时运行良好

滚动 15 或 20 次后它崩溃了..

有时在使用仪器运行时也会崩溃日志不显示任何内容，有时它会显示内存警告..

# jquery - 对 jQuery 中的“this”关键字感到困惑

> ID：13049077
> 
> 赞同：3
> 
> 时间：2012-10-24T12:18:54.923
> 
> 标签：jquery

我试图弄清楚为什么以下 3 种使用 `this`关键字的方法不起作用

这是HTML：

```
<ul>
    <li><a id="i1" href="#">Item 1</a></li>
    <li><a id="i2" href="#">Item 2</a></li>
    <li><a id="i3" href="#">Item 3</a></li>
</ul> 
```

这是jQuery：

```
// Output a list of href ids and append them to the ul element
$('ul li a').each(function() {
    $('<li>' + this.id + '</li>').appendTo('ul') // this works
    // $(this.id).appendTo('ul') // this doesn't work
    // (this.id).appendTo('ul') // this doesn't work
    // $(this).attr('id').appendTo('ul') // this doesn't work
}); 
```

这里也是[jsFiddle](http://jsfiddle.net/DZPnP/2/)

有人可以解释为什么被注释掉的 3 个代码片段都不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:22:46.707

`$(this.id).appendTo('ul')`与 相同`$("i1").appendTo('ul')`。查找标签名称为“i1”的所有元素，没有找到，所以什么都不做。

`(this.id).appendTo("ul")`一样`"i1".appendTo("ul")`，字符串中不存在这样的方法

第三个注释掉的片段与第二个完全相同 - 调用`.appendTo`字符串的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:22:52.317

```
$(this.id).appendTo('ul') // this doesn't work 
```

这不起作用，因为 jQuery 期望您在`$()`构造中提供元素、元素数组或字符串选择器。通过提供一个不会匹配任何内容的字符串选择器`i1`，`appendTo`它将不知道它应该处理哪个对象。

```
(this.id).appendTo('ul') // this doesn't work 
```

这不起作用，因为返回的值`id`没有`appendTo`方法 - 请注意，您没有使用`$`here 来调用 jQuery。

```
$(this).attr('id').appendTo('ul') // this doesn't work 
```

这不起作用，因为`appendTo`将附加`li`对象，而不是返回的字符串`attr('id')`

问题本身似乎源于您似乎有点困惑的事实`appendTo()`- 基本上它附加元素，而不是字符串值。阅读[API](http://api.jquery.com/appendTo/)以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:21:16.193

`this`指的是您在每次`each`迭代中使用的 jQuery 对象的基础 DOM 元素。

在您的示例中，以下代码：

```
$("ul li a").each(function() {
    console.log(this.href);
}); 
```

将以与以下相同的方式工作：

```
console.log(document.getElementById("i1").href);
console.log(document.getElementById("i2").href);
console.log(document.getElementById("i3").href); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:21:34.597

```
// $(this.id).appendTo('ul') // this doesn't work
$('#'+this.id).appendTo('ul') // this will work 
```

要使用 ID 选择器，您需要添加`#`前缀。

* * *

```
// (this.id).appendTo('ul') // this doesn't work 
```

`(this.id)` 它不是 jQuery 对象，所以`.appendTo`是未定义的。

* * *

```
// $(this).attr('id').appendTo('ul') // this doesn't work 
```

`$(this).attr('id')`不是 jQuery 对象，所以`.appendTo`是未定义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T12:21:55.940

*   `$(this.id)`尝试使用 ID（字符串）值作为 jQuery 选择器。那不是你想要的。
*   `(this.id)`是一样的`this.id`- 括号只是在这里分组。它们不是函数调用。在这两种情况下，字符串对象都没有`.appendTo`函数，就是这样`this.id`。
*   与上一个要点中的问题几乎相同`$(this).attr('id')`。该表达式的计算结果是一个没有`.appendTo`函数的字符串。

在所有情况下，您都应该养成使用调试器的习惯，并查看 JavaScript 错误控制台，因为 #2 和 #3 会打印出描述问题的非常明显的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T12:22:14.347

```
// $(this).attr('id').appendTo('ul') // this doesn't work 
```

不起作用，因为`.attr()`返回一个值，而不是实际项目。改用`.find()`！

```
// (this.id).appendTo('ul') // this doesn't work 
```

不起作用，因为`this.id`它不是有效的 jquery 项。

所以如果你想使用一个id，你需要使用

```
$('#'+this.id).appendTo('ul') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T12:33:11.990

就个人而言，我觉得如果您在这种情况下完全避免使用“this”，您的代码会更简洁：

[http://jsfiddle.net/DZPnP/3/](http://jsfiddle.net/DZPnP/3/)

```
$ul = $('#someULid');

$('ul li a').each(function( index, linkElement) {
    $linkElement = $(linkElement);
    $('<li>' + $linkElement.attr('id') + '</li>').appendTo( $ul );
}); 
```

# c# - 仅当我首先使用 'ToList()' 时，使用 'ReplaceWith' 迭代 XElement 集合才有效

> ID：13049078
> 
> 赞同：1
> 
> 时间：2012-10-24T12:18:56.653
> 
> 标签：c#, linq-to-xml, iteration

此代码有效：

```
var element = XElement.Parse("<div><span><em>Content</em></span><span><em>Content2</em></span></div>");

var spans = element.Descendants("span").ToList();

foreach(var span in spans)
{
    span.ReplaceWith(span.Nodes());
} 
```

这不会，给出错误“对象引用未设置为对象的实例。”：

```
var element = XElement.Parse("<div><span><em>Content</em></span><span><em>Content2</em></span></div>");

var spans = element.Descendants("span");

foreach(var span in spans)
{
    span.ReplaceWith(span.Nodes());
} 
```

唯一的区别是我在创建后代节点列表时删除了“ToList()”。为什么是这样？

IQueryable 实现了 IEnumerable，我认为迭代强制延迟执行，那么为什么 'ToList()' 在这里有所作为呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:30:24.907

在第二种情况下，您`spans`在迭代集合时正在更改集合，所以会发生不好的事情。也许它试图给你它所记得的 next `span`，但你已经删除了它。

（在诸如列表之类的核心集合中，您会得到一个明确说明该集合已被修改的异常。例如，在 a`List<.>`中，每次修改列表时都会更改版本号；当您调用`ToNext`列表枚举器时，如果版本号已更改，抛出异常。

在 LINQ-to-XML 中，开发人员似乎没有添加这种行为。）

在第一种情况下，`ToList`当您修改原始树时，不会修改由创建的列表。

我会尝试这样的事情：

```
XElement span = null; // or whatever class this should be
while ((span = element.Descendants("span").FirstOrDefault()) != null)
    span.ReplaceWith(span.Nodes()); 
```

即一个接一个地替换跨度，而不是试图一口气将它们全部替换然后替换它们。

# c - 重新分配（再次）

> ID：13049079
> 
> 赞同：-9
> 
> 时间：2012-10-24T12:18:58.840
> 
> 标签：c, realloc

又是 realloc 问题。在之前的许多 realloc 语句中，我似乎找不到任何类似的问题。我会很感激你的兴趣。

我正在尝试读取格式为： 的文本输入 `g:<expression>;0,1,0,1,0`。我在源文本文件中有一组这种格式的行，还有一段代码（如下）在“for”循环中读取这一行。和之间的*表达式*被读入二维字符数组。之后的所有内容都确定了一个由逗号分隔的数字向量（大小） 。这个向量被读入（就像一个字符串），然后通过函数转换成整数数组。在循环的每次迭代中，都用于调整上述数组（和）的大小。到目前为止在循环中读取的行数是。这是代码：`:``;``propstr``;``DIM``,``upstr``upvec``process_update_vector``realloc``propstr``upstr``upvec``NREAC`

```
/*Before this point, current line in the source is read into `temp'*/
NREAC++;
for(i=0;i<strlen(temp);i++){
 if(temp[i]==':') colon=i;//Here we find colon
 if(temp[i]==';') semicolon=i;//...and semicolon positions
}
memset(temp1,'\0',STRLEN);
if(NREAC==1)
 ptrchar=(char **)malloc(sizeof(char *));
else
 ptrchar=realloc(propstr,NREAC*sizeof(char *));
if(ptrchar==NULL){
 fprintf(stderr,"Error: could not allocate memory for propstr\n");
 if(propstr!=NULL) free(propstr);
 return 1345;
}else{propstr=ptrchar;ptrchar=NULL;}
propstr[NREAC-1]=(char *)malloc((semicolon-colon)*sizeof(char));
if(propstr[NREAC-1]==NULL){
 fprintf(stderr,"Error: couldn't get memory for propstr[NREAC-1]\n");
 return 1344;
}
for(i=colon+1;i<semicolon;i++)/*Copy the propensity part of the line*/
 temp1[i-colon-1]=temp[i];
temp1[i-colon-1]='\n';/*Include newline symbol for correct parsing*/
strcpy(propstr[NREAC-1],temp1);
memset(temp1,'\0',STRLEN);
if(NREAC==1)
 ptrchar=(char **)malloc(sizeof(char *));
else
 ptrchar=realloc(upstr,NREAC*sizeof(char *));
if(ptrchar==NULL){
 fprintf(stderr,"Error could not allocate memory for upstr\n");
 if(upstr!=NULL) free(upstr);
 return 1343;
}else{upstr=ptrchar;ptrchar=NULL;}
upstr[NREAC-1]=(char *)malloc((strlen(temp)-semicolon-1)*sizeof(char));
if(upstr[NREAC-1]==NULL){
 fprintf(stderr,"Error: couldn't get memory for upstr[NREAC-1]\n");
 return 1342;
}
if(strlen(temp)-semicolon==2){/*No vector is specified*/
 fprintf(stderr,"Error: no update vector found:\n");
 fprintf(stderr,"`%s'",temp);
 return 1;
}
if(NREAC==1)
 ptrint=(int **)malloc(sizeof(int *));
else
 ptrint=(int **)realloc(upvec,NREAC*(sizeof(int *)));/*!!!!!!!!!!!!!!!!!!!!*/
if(ptrint==NULL){
 fprintf(stderr,"Error: could not allocate memory for upvec\n");
 if(upvec!=NULL) free(upvec);
 return 1341;
}else{upvec=ptrint;ptrint=NULL;}
upvec[NREAC-1]=(int *)malloc(DIM*sizeof(int));
if(upvec[NREAC-1]==NULL){
 fprintf(stderr,"Error: couldn't get memory for upvec[NREAC-1]\n");
 return 1340;
}
for(i=semicolon+1;i<strlen(temp)-1;i++)
 temp1[i-semicolon-1]=temp[i];
temp1[i-semicolon-1]='\n';/*Include newline for more convenient way of parsing*/
strcpy(upstr[NREAC-1],temp1);
/*Get update vector*/
upvec[NREAC-1]=process_update_vector(upstr[NREAC-1],upvec[NREAC-1]);

memset(temp1,'\0',STRLEN);
memset(temp,'\0',STRLEN);
continue; 
```

此代码段出现在 for 循环中。“无效指针”错误出现在标有 的地方`/*!!!!!!!!!!!!!!!!!!!!*/`。

错误的条件。对于足够小的`DIM`一切工作正常并且总是有效。在某些时候，我不得不增加到`DIM`11，然后错误发生在解析过程的中间（我猜这是通常的错误，`*** glibc detected *** dinamica: realloc(): invalid pointer: 0x000000000165d190 ***`）。的值`NREAC`似乎不会影响 realloc 行为。它总是在代码中发生错误的相同位置。我是否错误地为`int`类型变量分配内存，因为类型分配`char`从来都不是问题？

`process_update_vector`功能：

```
int * process_update_vector(const char *upstr,int *upvec)
{
   int i,j,k;
   char symbuf[5];/*5 symbols, max 99999 is possible*/
   i = 0;
   j = 0;
   k = 0;
   while(upstr[i] != '\n'){
      if(upstr[i] == ','){/*',' is the delimiter*/
         symbuf[j] = '\0';
         j = 0;
         upvec[k] = atoi(symbuf);
         k++;
         i++;
         continue;
      }
      symbuf[j] = upstr[i];
      j++;
      i++;
   }
   /*For the last entry*/
   upvec[k] = atoi(symbuf);
   k++;
   return upvec;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:33:08.343

好的，我试着看看你的代码。我的眼睛很痛，但我设法通过了代码。这是我对第一部分的更改，您在其中阅读了冒号和分号之间的表达式。我改变了一些类型，但让或多或少相同的错误处理，即使我认为它是矫枉过正或更好的说法，它是在错误的地方（我倾向于将分配/错误工作与业务代码分开，这样更容易调试）。

```
/*Before this point, current line in the source is read into `temp'*/

char **propstr=NULL;         /* I hope this variable was initialized to NULL or else you get problems */
NREAC++;                     /* This is bad naming, all uppercase is by convention reserved for macros */
char *colon = strchr(temp, ':');     /* There a lib function to do the searching, use them */
char *semicolon = strchr(temp, ';');

if(!colon || !semicolon) {
  fprintf(stderr,"Error: syntax error\n");
  return 2112;  /* whatever */
}

ptrchar=realloc(propstr,NREAC*sizeof(char *));     /* realloc called with a NULL pointer is the same as a malloc, typecasts of mallocs/reallocs are not good. */
if(!ptrchar) {
 fprintf(stderr,"Error: could not allocate memory for propstr\n");
 free(propstr);   /* The check against NULL is also done by free, it's therefoe redundant */
 return 1345;
}
else
  propstr=ptrchar;   /* There's no point in NULLing a variable that will be overwritten anyway */

size_t lenexpr = semicolon-colon;   /* The length of the expression can be found by subtracting both pointers */
propstr[NREAC-1]=malloc(lenexpr+1);  /* +1 for the \n */
if(!propstr[NREAC-1]) {
 fprintf(stderr,"Error: couldn't get memory for propstr[NREAC-1]\n");
 return 1344;
}
memcpy(propstr[NREAC-1], colon+1, lenexpr);   /* We copy directly without a temporary that way */
propstr[NREAC-1][lenexpr] = '\n';             /* add the linefeed */
propstr[NREAC-1][lenexpr+1] = 0;              /* terminate the string */ 
```

在这里我停了下来，因为你的第二部分有一个我不明白的基本错误。您要将向量存储为字符串还是整数数组。如果是前者，那么你必须分配 chars 而不是`sizeof (int)`，如果后者必须有一些`atoi`或`strtol`某处。

当您向 SO 提交问题时，还有其他几件事会很好，您应该包括您使用的变量的声明，您应该显示您使用的宏的定义。

**编辑：**第二部分

```
// Edit3 ptrchar=realloc(upstr, NREAC*sizeof(char *));

// Edit3 if(!ptrchar) {
// Edit3   fprintf(stderr,"Error could not allocate memory for upstr\n");
// Edit3   free(upstr);
// Edit3   return 1343;
// Edit3 }
// Edit3 else
// Edit3   upstr=ptrchar;

// Edit3 upstr[NREAC-1] = malloc(strlen(semicolon)+1);   /* +1 for the \n */

// Edit3 if(!upstr[NREAC-1]) {
// Edit3  fprintf(stderr,"Error: couldn't get memory for upstr[NREAC-1]\n");
// Edit3  return 1342;
// Edit3 }
if(strlen(semicolon)<2) {/*No vector is specified*/
  fprintf(stderr,"Error: no update vector found:\n'%s'", temp);
  return 1;
}
ptrint = realloc(upvec, NREAC*sizeof(int *));/*!!!!!!!!!!!!!!!!!!!!*/
if(!ptrint) {
  fprintf(stderr,"Error: could not allocate memory for upvec\n");
  free(upvec);
  return 1341;
}
else
  upvec=ptrint;

upvec[NREAC-1] = malloc(DIM*sizeof(int));
if(!upvec[NREAC-1]) {
  fprintf(stderr,"Error: couldn't get memory for upvec[NREAC-1]\n");
  return 1340;
}
// Edit3 memcpy(upstr[NREAC-1], semicolon+1, strlen(semicolon+1)+1);  /* +1 will include the \0 */
// Edit3 strcat(upstr[NREAC-1], "\n"); /*Include newline for more convenient way of parsing*/

/*Get update vector*/
// Edit3 upvec[NREAC-1] = process_update_vector(upstr[NREAC-1], upvec[NREAC-1]);
// Edit3, let's reuse our initial pointer, it's still valid.
process_update_vector(semicolon+1, upvec[NREAC-1]);
continue; 
```

该函数的签名`process_update_vector`似乎很奇怪，它 realloc`upvec[NREAC-1]`吗？如果没有，则返回并重新分配它是没有意义的。因此，展示该功能也是一个好主意。

结论：我在您的代码中检测到的唯一错误是，由于附加了 \n，分配的长度太短了 1。另一点：通过用`if(first) malloc else realloc`my替换，`realloc`您必须确保指针最初为 NULL，否则您会遇到问题。

**EDIT2：**这里是 process_update_vector 的更新版本，这本身并没有错，但它的作用有点复杂。它也有很高的缓冲区溢出风险，临时缓冲区只有 5 个字符！

此版本不需要临时缓冲区。

```
void process_update_vector(const char *upstr, int *upvec)
{
const char *p = strchr(upstr, ',');     /* There are fine library functions for string handling */
int k = 0;
  while(p) {
    upvec[k++] = atoi(upstr);
    upstr = p+1;                        /* Position upstr to after , */

    p = strchr(upstr, ',');
  }
  upvec[k++] = atoi(upstr);
  /* We don't need to return upvec, it doesn't change in the function */
} 
```

两条评论： - 没有检查 DIM，所以如果输入中断，我们可以有一个缓冲区溢出。- 没有任何空格处理，通常在逗号后用空格输入字符串（它更具可读性），这种情况在这种情况下不起作用，但`while(*p==' ') p++;`放置在正确位置的几个可以解决这个问题。

**EDIT3：** 被调用函数的变化也改变了调用者，你不需要复制到upstr，这样就可以完全删除分配。我`// Edit3`在第二个清单中添加了评论。当然，除非您打算在其他地方重用复制的字符串。

PS：在SO上，感谢是通过对答案进行投票来完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:53:41.880

我使用 Microsoft Visual Studio 2005 将代码粘贴到一个临时文件中，并使用重新格式化命令将其重新格式化为下面的文本。

请参阅[这篇关于编程风格的 Wikipedia 文章，](http://en.wikipedia.org/wiki/Programming_style)它可以帮助您避免因 stackoverflow 提交而受到抨击。

另请参阅此[C 编码样式文档示例](http://www.possibility.com/Cpp/CppCodingStandard.html)。

**编辑开始** 运行时抱怨一个无效的指针，这表明您传递给`realloc()`的指针不是通过调用创建的指针`malloc()`或`calloc()`。它知道，因为每当您执行 malloc() 时，都会有一个内存管理标头，它是数据区域的一部分，并且给您的指针是指向标头之后分配的内存的指针。看到这个问题[realloc 如何知道要复制多少？](https://stackoverflow.com/questions/3476448/how-does-realloc-know-how-much-to-copy)

最后，我使用[状态机方法](http://www.shopify.com/technology/3383012-why-developers-should-be-force-fed-state-machines)重写了它（另请参阅[状态机说明](http://blog.markwshead.com/869/state-machines-computer-science/)）并将该源代码放在重新格式化示例的底部。 **编辑结束**

查看源代码，这似乎是循环的一部分。看来变量 upvec 可能没有被初始化，它是某种数组，所以它实际上是否被分配了？

请参阅带`//--------------------`指示的部分。

重新格式化的来源如下：

```
 /*Before this point, current line in the source is read into `temp'*/
    NREAC++;
    for(i=0;i<strlen(temp);i++){
        if(temp[i]==':') colon=i;//Here we find colon
        if(temp[i]==';') semicolon=i;//...and semicolon positions
    }
    memset(temp1,'\0',STRLEN);

    if(NREAC==1)
        ptrchar=(char **)malloc(sizeof(char *));
    else
        ptrchar=realloc(propstr,NREAC*sizeof(char *));
    if(ptrchar==NULL){
        fprintf(stderr,"Error: could not allocate memory for propstr\n");
        if(propstr!=NULL) free(propstr);
        return 1345;
    } else {
        propstr=ptrchar;
        ptrchar=NULL;
    }
    propstr[NREAC-1]=(char *)malloc((semicolon-colon)*sizeof(char));
    if(propstr[NREAC-1] == NULL){
        fprintf(stderr,"Error: couldn't get memory for propstr[NREAC-1]\n");
        return 1344;
    }
    for(i=colon+1;i<semicolon;i++)/*Copy the propensity part of the line*/
        temp1[i-colon-1]=temp[i];
    temp1[i-colon-1]='\n';/*Include newline symbol for correct parsing*/
    strcpy(propstr[NREAC-1],temp1);
    memset(temp1,'\0',STRLEN);
    if(NREAC==1)
        ptrchar=(char **)malloc(sizeof(char *));
    else
        ptrchar=realloc(upstr,NREAC*sizeof(char *));
    if(ptrchar==NULL){
        fprintf(stderr,"Error could not allocate memory for upstr\n");
        if(upstr!=NULL) free(upstr);
        return 1343;
    } else {
        upstr=ptrchar;
        ptrchar=NULL;
    }
    upstr[NREAC-1]=(char *)malloc((strlen(temp)-semicolon-1)*sizeof(char));
    if(upstr[NREAC-1]==NULL){
        fprintf(stderr,"Error: couldn't get memory for upstr[NREAC-1]\n");
        return 1342;
    }
    if(strlen(temp)-semicolon==2){/*No vector is specified*/
        fprintf(stderr,"Error: no update vector found:\n");
        fprintf(stderr,"`%s'",temp);
        return 1;
    }

  // -----------------------------------------------------
    if(NREAC==1)
        ptrint=(int **)malloc(sizeof(int *));
    else
        ptrint=(int **)realloc(upvec,NREAC*(sizeof(int *)));/*!!!!!!!!!!!!!!!!!!!!*/
    if(ptrint==NULL){
        fprintf(stderr,"Error: could not allocate memory for upvec\n");
        if(upvec!=NULL) free(upvec);
        return 1341;
    } else {
        upvec=ptrint;
        ptrint=NULL;
    }

    upvec[NREAC-1]=(int *)malloc(DIM*sizeof(int));
    if(upvec[NREAC-1]==NULL){
        fprintf(stderr,"Error: couldn't get memory for upvec[NREAC-1]\n");
        return 1340;
    }
  // ---------------

    for(i=semicolon+1;i<strlen(temp)-1;i++)
        temp1[i-semicolon-1]=temp[i];
    temp1[i-semicolon-1]='\n';/*Include newline for more convenient way of parsing*/
    strcpy(upstr[NREAC-1],temp1);
    /*Get update vector*/
    upvec[NREAC-1]=process_update_vector(upstr[NREAC-1],upvec[NREAC-1]);

    memset(temp1,'\0',STRLEN);
    memset(temp,'\0',STRLEN);
    continue; 
```

**编辑** 使用具有解析每一行文本的函数的状态机来解决此问题的建议方法。

```
#include <malloc.h>
#include <stdlib.h>

// pLine is a line of text containing a zero terminated string of the format of
//    g:<expression>;0,1,0,1,0
// This function will process the line and return the expression as a string
// and a list of the integers.
void processExpression (char *pLine, char *pExpression, int **pIntList)
{
    int  stateMachineIndex = 1;
    int  integerCount = 0;
    char *pLineSave = 0;
    int  iIntListIndex = 0;

    *pIntList = 0;

    while (*pLine) {
        switch (stateMachineIndex) {
            case 1:
                // initial state
                if (*pLine == ':') {
                    // colon found so now start getting the expression
                    stateMachineIndex = 2;
                }
                pLine++;
                break;
            case 2:
                if (*pLine != ';') {
                    *pExpression++ = *pLine++;
                } else if (*pLine) {
                    // if we have not reached end of string yet then go to the
                    // next state of parsing the list of integers.
                    stateMachineIndex = 3;
                    pLine++;
                    pLineSave = pLine;
                }
                break;
            case 3:
                // at this point we begin to process the list of integers.
                // however we are not sure how many there are so we will count them first
                if (*pLine == ',') {
                    integerCount++;
                }
                pLine++;
                break;
            case 4:
                // we now have a count of the integers we expect however it
                // may be off by one so we will allocate a smidge more space
                *pIntList = (int *)calloc ((integerCount + 2), sizeof(int));
                stateMachineIndex = 5;
                *pExpression = 0;         // and while we are at it lets terminate our expression string
                break;
            case 5:
                // now we get an integer value from the list of integers
                (*pIntList)[iIntListIndex++] = atoi (pLine);
                // eat up characters to the next integer in the list
                while (*pLine && *pLine != ',') pLine++;
                if (*pLine == ',') pLine++; // if we found a comma, skip it to the next field
                break;
            default:
                break;
        }
        if (*pLine == 0 && stateMachineIndex < 4) {
            // end of the string so now lets do our integer thing
            // if we are still in the first phase of processing
            if (pLineSave && *pLineSave && integerCount > 0) {
                stateMachineIndex = 4;
                pLine = pLineSave;    // restart our parser back to the integer area
            } else {
                break;
            }
        }
    }
}

// simple test harness to test the concept.
int main(int argc, char* argv[])
{
    char *pLine = "g:expression and stuff;1,2,3,4,5";
    char expressionBuffer[128];
    int  *pIntList = 0;

    processExpression (pLine, expressionBuffer, &pIntList);
    return 0;
} 
```

# wpf - 将 IsEnabled 绑定到 Text.Length 仅适用于一种方式

> ID：13049086
> 
> 赞同：1
> 
> 时间：2012-10-24T12:19:19.347
> 
> 标签：wpf, xaml, binding, textbox, isenabled

我有一个 TextBox，只有在另一个 TextBox 中有文本时才想启用它。我将第一个 TextBox 的 Text.Length 属性绑定到第二个框的 IsEnabled 属性。我还尝试绑定第一个框的 Text 属性并使用转换器转换为布尔值。这两种方法都会导致在第一个框中输入文本时启用第二个框，但在删除文本时不会禁用第二个框。

我尝试将 NotifyOnSourceUpdated 和 NotifyOnTargetUpdated 设置为 true，但都没有任何效果。

```
<TextBox Name="textBox1"/>
<TextBox Name="textBox2" IsEnabled="{Binding ElementName=textBox1, Path=Text.Length}"/> 
```

所以我的问题是删除 textBox1 中的文本时需要禁用 textBox2 什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:38:27.063

这应该工作 -

```
<TextBox Name="textBox1"/>
<TextBox Name="textBox2">
   <TextBox.Style>
       <Style TargetType="TextBox">
           <Style.Triggers>
               <DataTrigger Binding="{Binding Text.Length, ElementName=textBox1}"
                                     Value="0">
                    <Setter Property="IsEnabled" Value="False"/>
                </DataTrigger>
            </Style.Triggers>
       </Style>
    </TextBox.Style>
</TextBox> 
```

您的代码的问题是您将`IsEnabled` `bool`属性绑定到`Text.Length`类型为`int`. 所以，要么你需要使用，要么按照我上面发布的那样`converter`完成`triggers`。

# wpf - 当 TabItem 不可见时，TabItem 的预览无法正确显示

> ID：13049088
> 
> 赞同：1
> 
> 时间：2012-10-24T12:19:25.173
> 
> 标签：wpf, tabcontrol, preview, tabitem, visualbrush

我有一个 TabControl，我想要一个预览窗口，就像 Windows 7 中的任务栏一样。

当我将鼠标悬停在 tabItem1 上时，我得到了我想要的结果。当我选择第二个或第三个选项卡（tabItem1 的内容现在不可见）然后将鼠标悬停在 tabItem1 上时，我希望看到相同的预览。但现在内容不成比例。我究竟做错了什么？

我有以下主窗口：

```
<Window.Resources>
    <Style x:Key="TabItemContainerStyle" TargetType="{x:Type TabItem}">
        <Setter Property="HeaderTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Label Content="{Binding}">
                        <Label.Style>
                            <Style TargetType="Label">
                                <EventSetter Event="MouseEnter" Handler="TabItem_MouseEnter"/>
                                <EventSetter Event="MouseLeave" Handler="TabItem_MouseLeave"/>
                            </Style>
                        </Label.Style>
                    </Label>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</Window.Resources>
<Grid>
    <TabControl Name="tabControl" ItemContainerStyle="{StaticResource TabItemContainerStyle}" Grid.Row="1">
        <TabItem Header="tabItem1" Name="tabItem1">
            <Grid>
                <Grid Name="grid1" Background="#4700D700">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0*" />
                        <ColumnDefinition Width="200*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Hello, world!" Height="28" HorizontalAlignment="Left" Margin="37,29,0,0" Name="label1" VerticalAlignment="Top" Grid.Column="1" />
                </Grid>
            </Grid>
        </TabItem>
        <TabItem Header="Tab 2"></TabItem>
        <TabItem Header="Tab 3"></TabItem>
    </TabControl>
</Grid> 
```

这是背后的代码：

```
public partial class MainWindow : Window
{
    private Window _previewWindow;

    public MainWindow()
    {
        InitializeComponent();
    }

    private static TabItem GetTabItem(object sender)
    {
        var control = sender as Control;
        if (control == null)
            return null;
        var parent = control.TemplatedParent as ContentPresenter;
        if (parent == null)
            return null;
        return parent.TemplatedParent as TabItem;
    }

    void previewWindow_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        var window = sender as Window;
        if (window != null)
            window.Top -= window.ActualHeight;
    }

    private void TabItem_MouseEnter(object sender, MouseEventArgs e)
    {
        var tabItem = GetTabItem(sender);

        if (tabItem != null)
        {
            var vb = new VisualBrush(tabItem.Content as Visual)
            {
                Viewport = new Rect(new Size(160, 80)),
                Viewbox = new Rect(new Size(160, 80)),
            };

            var myRectangle = new Rectangle
            {
                Width = 160,
                Height = 80,
                Stroke = Brushes.Transparent,
                Margin = new Thickness(0, 0, 0, 0),
                Fill = vb
            };

            Point renderedLocation = ((Control)sender).TranslatePoint(new Point(0, 0), this);

            _previewWindow = new Window
            {
                WindowStyle = WindowStyle.ToolWindow,
                SizeToContent = SizeToContent.WidthAndHeight,
                ShowInTaskbar = false,
                Content = myRectangle,
                Left = renderedLocation.X + Left,
                Top = renderedLocation.Y + Top,
            };
            // Top can only be calculated when the size is changed to the content, 
            // therefore the SizeChanged-event is triggered.
            _previewWindow.SizeChanged += previewWindow_SizeChanged;
            _previewWindow.Show();
        }

        e.Handled = true;
    }

    private void TabItem_MouseLeave(object sender, MouseEventArgs e)
    {
        if (_previewWindow != null)
            _previewWindow.Close();
        _previewWindow = null;
    }
} 
```

# mysql - MYSQL用日期时间查询数据库？

> ID：13049092
> 
> 赞同：0
> 
> 时间：2012-10-24T12:19:39.087
> 
> 标签：mysql

我有一个日期时间变量：

```
string(19) "2012-09-14 00:00:00" 
```

我想在表中找到此日期时间之前的 5 行。

我怎么能这样做？

```
$db->query("SELECT id, title FROM news WHERE datetime < " . $db->escape($datetime) . "); 
```

以上似乎不起作用。

我正在使用 mySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:21:33.867

用引用日期时间值括起来，用反引号日期时间列名括起来。

```
$db->query("SELECT id, title FROM news WHERE `datetime` < '" . $db->escape($datetime) . "' order by `datetime` desc limit 5"); 
```

# c# - 在后面的代码中查找图像

> ID：13049095
> 
> 赞同：1
> 
> 时间：2012-10-24T12:19:50.120
> 
> 标签：c#, asp.net

我想使用查找控件方法在设计器上查找图像并使其可见，但我一直得到一个空值

这是我的代码：

```
foreach (ImageShow image in imageList)
{
    Image Showimage = (Image)FindControl(image.imageName);
    Showimage.Visible = true;
} 
```

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:36:03.460

FindControl 不会搜索整个控件层次结构，我认为这是一个问题。

尝试使用以下方法：

```
public static T FindControlRecursive<T>(Control holder, string controlID) where T : Control
{
  Control foundControl = null;
  foreach (Control ctrl in holder.Controls)
  {
    if (ctrl.GetType().Equals(typeof(T)) &&
      (string.IsNullOrEmpty(controlID) || (!string.IsNullOrEmpty(controlID) && ctrl.ID.Equals(controlID))))
    {
      foundControl = ctrl;
    }
    else if (ctrl.Controls.Count > 0)
    {
      foundControl = FindControlRecursive<T>(ctrl, controlID);
    }
    if (foundControl != null)
      break;
  }
  return (T)foundControl;
} 
```

用法：

```
Image Showimage = FindControlRecursive<Image>(parent, image.imageName); 
```

在您的情况下，父母是这样的，例如：

```
Image Showimage = FindControlRecursive<Image>(this, image.imageName); 
```

您可以在没有 ID 的情况下使用它，然后会找到第一次出现的 T ：

```
Image Showimage = FindControlRecursive<Image>(this, string.Empty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:34:51.200

```
foreach (ImageShow image in imageList)
{
    Image showimage = FindControl(image.imageName) as Image;
    if(showimage != null)
    {
         showimage .Visible = true;
    }
} 
```

# ruby-on-rails - 在 rails app /public 目录中所做的更改未反映在服务器上

> ID：13049096
> 
> 赞同：0
> 
> 时间：2012-10-24T12:19:53.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, nginx

我有一个部署在服务器上的实时应用程序的副本。我做了一些更改：例如在 /public 目录中插入了 2 个 css 和 js 文件，这些文件为我的资产提供服务，并包含在需要它们的视图中。它在我的本地机器上运行良好，但是当我将更改推送到服务器时它是不反映在那里。我正在使用 Nginx，我也尝试过重新启动它，但它也没有帮助。由于我是 NGINX 的新手，并且该应用程序部署在 centos 上，因此我不知道它是如何工作的。我已经有预编译的资产，所以我不知道如何让它运行。我努力了

> 从 tmp 目录清除缓存但没有用。

我已经设置了我的

> config.serve_static_assets = false

在我的 production.rb 中并尝试重新启动但也没有工作

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:23:03.410

您的视图缓存在网络服务器工作者中。您是否重新启动了网络工作者？

# magento - Magento 上的 Cron 作业无法正常工作

> ID：13049100
> 
> 赞同：3
> 
> 时间：2012-10-24T12:20:01.647
> 
> 标签：magento, cron

我对 Magento cron 表达式有疑问。几分钟就可以正常工作：

```
 <crontab>
    <jobs>
        <namespace_module_cron>
            <schedule>
                <cron_expr>*/15 * * * *</cron_expr>
            </schedule>
            <run>
                <model>namespace_module/observer::myMethod</model>
            </run>
        </namespace_module_cron>
    </jobs>
</crontab> 
```

但是当我设置时间时它不起作用：

```
<cron_expr>0 1 * * *</cron_expr> 
```

或者

```
<cron_expr>0 */1 * * *</cron_expr> 
```

我在管理面板中尝试了不同的时间设置。目前有：

*   15
*   1
*   60
*   120
*   120
*   3000

PS Magento 版本。1.7.0.1

**更新**

我离开每小时的工作（0 */1 * * *）一天，它实际上运行：

*   14:15
*   16:15
*   21:15
*   22:15
*   03:15
*   04:15

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:21:20.893

我已经弄清楚出了什么问题。它是设置（系统/配置/系统/Cron）。当我将**“提前计划”设置为 60**时，它开始正常工作（每小时和每天的时间表）。现在数据库中的计划出现在 15:20，而我需要在 16:00 执行它。

设置：

*   生成时间表每：15
*   提前安排：60
*   如果未在范围内运行则错过：60
*   历史清理每：120
*   成功历史终身：120
*   故障历史寿命：3000

**如果你有同样的问题，你应该注意前两个设置：“Generate Schedules Every”和“Schedule Ahead for”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:22:25.873

对于 0 分钟的每个小时（00:00、01:00；02:00 等），您必须输入：

```
<cron_expr>0 * * * *</cron_expr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T13:16:45.963

我已经这样定义了玉米工作。03 16 * * *

当您的 cron.php 在 16:02 点运行时，它将仅在数据库表 cron_schedule 中创建有关此 cron 作业的条目，并且不会运行 cron 作业。要运行这个 cron 作业，我需要运行 cron.php 两次，这意味着在表中创建一个条目后，您应该在 15 分钟内运行 cron，否则该条目将被忽略。因此，要运行 cron 作业，您应该定期运行 cron.php。

我的 cron 作业每天 16:03 运行，每隔 10 分钟运行一次 cron.php

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-04T18:24:02.000

我知道这是旧的，但它可能仍然是相关的，因为我遇到了类似的事情。您的 cron.sh 计划在您的服务器上运行的频率。如果调度程序设置为每 60 分钟一次并且每小时运行一次（中午 12 点、下午 1 点、下午 2 点...等），并且您的预定提前时间设置为 20 分钟（我认为默认设置），并且您的 magento cron 表达式是，例如, 30 * * * *, 或每隔半小时，你的工作将永远不会运行。您的 cron.sh 最多只能提前 20 分钟设置 magento cron 作业，因此 12:30 的作业不会被安排，但由于 magento 的 cron.sh 设置为按小时运行，它永远不会被安排。我怀疑你原来的问题是类似的，因为调整“提前计划”的时间超过了应该安排 magento cron 的时间来解决这样的问题。只是需要注意的事情。

# r - 使用 R 代码在 microsoft access 2007 中选择特定表

> ID：13049106
> 
> 赞同：0
> 
> 时间：2012-10-24T12:20:20.427
> 
> 标签：r, ms-access, rodbc

我有一个带有几个表的 Access 数据库，我只想在其中一个中工作。我正在使用库`RODBC`。假设我想要使用它的表称为`dtsample`. 我的 Access 数据库被称为`database.accdb`

这是我的代码：

```
library(RODBC) 
dataconnect <- odbcConnectAccess2007("database.accdb")
data <- sqlQuery(dataconnect,"SELECT*dtsample columb1, columb2...) 
```

但它不起作用。如何在 Access 中定义要使用的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:06:03.650

您的解决方案不是一个真正的解决方案，因为您刚刚了解了 SELECT

```
data <- sqlQuery(dataconnect, "SELECT * from dtsample where Columb1 = 'a' or Columb1 ='b') 
```

我的建议是你不熟悉 SQL：在 Access 中使用查询设计器，当它工作时，获取生成的 SQL 代码（View:SQL）并将其粘贴到 R 中。

# c# - 在外部函数之后尝试读取或写入受保护的内存

> ID：13049115
> 
> 赞同：0
> 
> 时间：2012-10-24T12:21:16.917
> 
> 标签：c#, dll

从 dll 代码调用函数后，此消息出现在 C# 代码中是这样的

```
function();
int i = 0; 
```

在第二行它说有一个“System.AccessViolationException”类型的未处理异常......试图读取或写入受保护的内存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:10:24.613

如果函数是外部的，则声明有问题。发生这种情况是因为您的返回值或参数类型的大小没有错误，并且从堆栈中“弹出”的数据会发生错误

# c# - 无法声明接口“异步任务 我的方法（对象 myObj）；"

> ID：13049128
> 
> 赞同：62
> 
> 时间：2012-10-24T12:21:57.837
> 
> 标签：c#, async-await, interface, asp.net-4.5

我无法申报

```
interface IMyInterface
{
   async Task<myObject> MyMethod(Object myObj);
} 
```

编译器告诉我：

*   修饰符 async 对此项目无效
*   async 修饰符只能用于具有主体的方法

这是应该实施的事情，还是 async & await 的性质禁止这种情况发生？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-24T12:24:41.413

> 是否使用`async`/`await`是否 实现方法是*实现*细节。该方法的*行为方式*是合同细节，应该以正常方式指定。
> 
> 请注意，如果您使方法返回 a`Task`或 a `Task<T>`，则更明显的是它是异步的，并且如果不异步可能很难实现。

来自[https://stackoverflow.com/a/6274601/4384](https://stackoverflow.com/a/6274601/4384)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-24T12:25:55.710

无论您的实现是否异步，都与您的界面无关。换句话说，接口不能指定给定方法必须以异步方式实现。

只需`async`从您的界面中取出，它就会编译；然而，没有办法仅仅通过指定一个接口来强制执行异步实现。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-08T21:30:06.970

如果您有一个具有两个实现的接口（一个是真正异步的，另一个是同步的），这就是每个实现的样子——两者都返回一个`Task<bool>`.

```
public interface IUserManager
{
    Task<bool> IsUserInRole(string roleName);
}

public class UserManager1 : IUserManager
{
    public async Task<bool> IsUserInRole(string roleName)
    {
        return await _userManager.IsInRoleAsync(_profile.Id, roleName);
    }
}

public class UserManager2 : IUserManager
{
    public Task<bool> IsUserInRole(string roleName)
    {
        return Task.FromResult(Roles.IsUserInRole(roleName));
    }
} 
```

如果它是 void 方法，您需要`return Task.CompletedTask;`从非异步方法（我认为 .NET 4.5 及更高版本）

另请参阅：[立即返回 Task<bool>](https://stackoverflow.com/questions/19846507/return-taskbool-instantly)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-14T21:49:23.757

`async`修饰符是一个“实现细节”，它影响方法*如何*异步执行操作，而不是*如果*它这样做。

因此`async`，在接口内部没有任何业务。

```
interface IService { Task DoSomethingAsync(); }

class A : IService { public async Task DoSomethingAsync() { ... } }

class B : IService { public Task DoSomethingAsync() { ... } } 
```

A 类和 B 类都是完全有效的。两种方法都可以等待。接口的使用者不知道也不关心他们是否使用`async`.

`B.DoSomethingAsync()`可以并且可能会是异步的。

# drupal - vBulletin 注册时的默认用户组插件不起作用

> ID：13049129
> 
> 赞同：0
> 
> 时间：2012-10-24T12:21:57.977
> 
> 标签：drupal, vbulletin

我正在准备在 vBulletin 3.6.8 [http://www.vbulletin.org/forum/showthread.php?p=2375613上制作这个附加组件](http://www.vbulletin.org/forum/showthread.php?p=2375613)

它似乎不起作用。新注册的用户没有分配到我想要的自定义组。

这是我想要做的[http://www.ajaykumarsingh.com/vbulletin/vbulletin-how-to-moderate-first-post-from-new-users.html](http://www.ajaykumarsingh.com/vbulletin/vbulletin-how-to-moderate-first-post-from-new-users.html)

我的论坛使用 drupalvb 模块连接到 Drupal，这可能是原因吗？

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:22:33.000

我将发布此内容，就好像您是 vbulletin 的新手一样。我不是说你是或试图侮辱。一是该模组无法与您的版本兼容。dupalvb 网桥，可能是导致问题的原因。您是否尝试过禁用插件并继续？

# java - 休眠本机查询，计数

> ID：13049137
> 
> 赞同：6
> 
> 时间：2012-10-24T12:22:44.373
> 
> 标签：java, sql, hibernate, count

> **可能重复：**
> [我们如何使用 Hibernate 计算行数？](https://stackoverflow.com/questions/1372317/how-do-we-count-rows-using-hibernate)

我想按数据库中的标准计算记录数。
我尝试使用下一个查询

```
String queryString = "SELECT Count(*) FROM my_table";  
Query query = entityManager.createNativeQuery(queryString); 
```

但是没有方法可以执行此操作`Query query`并获得结果。
我知道，我可以使用

```
String queryString = "SELECT * FROM my_table";  
Query query = entityManager.createNativeQuery(queryString); 
query.getResultList().size(); 
```

所以问题，查询是否具有`Count(*)`更高的性能，如果是`yes`，那么我该如何执行查询`Count(*)`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T12:30:12.917

您可以通过调用来执行您的第一个查询`Query.getSingleResult()`，例如。

```
String queryString = "SELECT Count(*) FROM my_table";  
Query query = entityManager.createNativeQuery(queryString); 
System.out.println(query.getSingleResult()); 
```

如果要将计数分配给变量，则需要将其转换为正确的类型（它可以取决于 DB，但很可能是 Long）。第二个查询效率很低，因为 Hibernate 需要从 DB 中检索整个表，对其进行分析，然后对所有行进行计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:26:32.177

您是否尝试过调用 query.getSingleResult()？

# c++ - windows中控制台输出流的编码

> ID：13049151
> 
> 赞同：2
> 
> 时间：2012-10-24T12:23:42.387
> 
> 标签：c++, c, winapi, encoding

> **可能重复：**
> [如何在 Windows 控制台上输出 Unicode 字符串](https://stackoverflow.com/questions/3130979/how-to-output-unicode-strings-on-the-windows-console)

我尝试在 win32console 应用程序中将 UTF-16 字符输出到控制台，但我无法更改输出流的编码，我尝试使用 SetConsoleOutputCP() 函数但是当我使用下一个代码进行测试时

```
 std::wcout << GetConsoleOutputCP() << std::endl;//output 866
    SetConsoleOutputCP(CP_WINUNICODE);              //if i set CP_UTF8 it works
    std::wcout << GetConsoleOutputCP() << std::endl;//output 866 
```

对于两种情况，我得到相同的结果（866）。当我尝试设置`CP_UTF8`它可以正常工作但我需要 UTF-16 时，为什么我的尝试失败了，如何将输出流的编码设置为 UTF-16？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:05:47.420

您不能将编码设置为 UTF-16，因为`cout`和都`wcout`写入相同*的面向字节的*流 (STD_OUTPUT_HANDLE)，并且仅支持面向字节的编码。UTF-16 是面向单词的。这意味着唯一可以写入标准输出的 Unicode 编码是 UTF-8。

# php - PHP PECL oauth 错误“未知签名方法”

> ID：13049154
> 
> 赞同：1
> 
> 时间：2012-10-24T12:23:46.327
> 
> 标签：php, oauth, provider, pecl

当我尝试从 pecl 包 oauth 实例化类“OAuthProvider”时，我的生产服务器上出现异常。

```
try {
    $oauth = new OAuthProvider();
} catch(Exception $e) {
    // Get the error here
} 
```

错误消息是：“未知的签名方法”

有人遇到这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:17:13.183

如果您运行非 CLI SAPI，OAuthProvider 会在 Authorization 标头或 REQUEST 参数（分别）中查找 oauth_signature_method。

在 CLI SAPI 下，您可以在 ctor 中设置参数：

```
$op = new OAuthProvider(array("oauth_signature_method" => OAUTH_SIG_METHOD_HMACSHA1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T18:53:45.460

这是[PHP 错误 #68168](https://bugs.php.net/bug.php?id=68168) - 某些服务器有一个空`$_SERVER[HTTP_AUTHORIZATION]`值，php oauth 扩展无法正确检测到该值。

# python - WxPython 按钮运行脚本

> ID：13049156
> 
> 赞同：1
> 
> 时间：2012-10-24T12:23:51.870
> 
> 标签：python, user-interface, button, wxpython

我使用代码创建了一个自定义位图按钮

```
PlayButton=wx.Bitmap('play.jpg', wx.BITMAP_TYPE_ANY)
self.PlayButton=wx.BitmapButton(self.bitmap, -1, PlayButton, pos=(190,300))
self.PlayButton.Bind=(wx.EVT_BUTTON, self.playGame) 
```

只是想知道在定义我的函数 playGame 时，单击它时如何在同一目录中运行外部 python 文件“game.py”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:32:10.530

您可以将脚本作为模块导入。

```
import game

...

def playGame(self):
    game.start() 
```

# xml - 无论如何我可以使用 Sandcastle 从安装了 Microsoft Visual Web Developer 2010 Express 的 .xml 文件创建 .chm 文件吗？

> ID：13049157
> 
> 赞同：3
> 
> 时间：2012-10-24T12:23:51.510
> 
> 标签：xml, visual-studio-express, chm, sandcastle, visual-web-developer-2010

我找到了一个非常好的文档，用于使用 Sandcastle 从 .xml 文件创建 .chm 文件：http: [//social.msdn.microsoft.com/Forums/en-US/devdocs/thread/3a631356-638e-451e-816c-c60d459c3775](http://social.msdn.microsoft.com/Forums/en-US/devdocs/thread/3a631356-638e-451e-816c-c60d459c3775)。唯一的问题是，在安装过程快要结束时，我看到需要安装 Microsoft Visual Studio Professional 2010 或 2012，但我的项目使用的是 Microsoft Visual Web Developer 2010 Express。无论如何我可以使用 Sandcastle 从安装了 Microsoft Visual Web Developer 2010 Express 的 .xml 文件创建 .chm 文件吗？

或者

是否有 Sandcastle 的替代品（免费）以获得 .chm 文件而不安装另一个版本的 VS ？我找不到任何其他将 .xml 文件转换为 .chm 文件的程序。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T15:33:53.780

Sandcastle 带有自己的用于管理 Sandcastle 项目的 GUI。

1.  使用提供的安装程序安装 Sandcastle
    *   [https://shfb.codeplex.com/](https://shfb.codeplex.com/)
2.  点击开始
3.  搜索`Sandcastle`（我在开始菜单中找不到）
4.  选择`Sandcastle Help File Builder GUI`

打开的 GUI 与 Visual Studio 中显示的“属性”编辑器完全相同。

从`File`菜单中，您可以选择打开现有的沙堡项目，也可以创建一个新项目。

如果您在 Visual Studio 之外创建文档（例如操作手册），这将非常有用

# .net - Rally .NET REST API 与 windows（桌面）应用程序，参考问题

> ID：13049158
> 
> 赞同：1
> 
> 时间：2012-10-24T12:23:53.603
> 
> 标签：.net, rally

我正在尝试在我的 Windows（桌面）应用程序中使用 Rally REST API。我添加了一个参考，它允许我使用函数。但是，我在编译时遇到问题，它说存在引用问题：“找不到类型或命名空间名称'Rally'（您是否缺少 using 指令或程序集引用？）”

请注意，问题仅与 Windows 应用程序有关，而 Web 应用程序运行良好。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:56:39.577

正如[这里](https://stackoverflow.com/questions/10051382/type-or-namespace-name-could-not-be-found-are-you-missing-a-using-directi)所建议的，检查您的项目是否设置为针对客户端配置文件或完整框架。

我刚刚使用我在这里拥有的工作 .net 应用程序进行了验证，当将目标框架从“.NET Framework 4”更改为“.NET Framework 4 Client Profile”时，我得到了与您报告的相同的错误。撤消更改再次解决了问题。

# html - CSS 列未对齐

> ID：13049160
> 
> 赞同：1
> 
> 时间：2012-10-24T12:24:06.180
> 
> 标签：html, css, css-float, footer

所以我一直在为这个 CSS 绞尽脑汁，需要有人用全新的眼光来审视它......基本上发生的事情是我有 4 列在页脚中彼此相邻，但最后一列会自动移动到第三列下方。我看不出发生了什么让它做到这一点？！

查看以下链接：

[test.snowflakesoftware.com](http://test.snowflakesoftware.com/)

下面是CSS：

```
 #mod_footer {
    width: 100%;
    background: url(images/footer.jpg);
    background-position: center top;
    background-repeat: no-repeat;
    background-color: #212530;
}
    .mod_footer_container {
        margin: 0 auto;
        width: 1200px;
        padding-top: 25px;
    }
        .mod_footer_col {
            float: left;
            width: 25%;
            padding-right: 25px;
        }
        #mod_footer_col_end {
            float: left;
            width: 25%;
        }
            #nav-bottom-left,
            #nav-bottom-left ul {list-style-image: url(images/bullet.png); font-family: Helvetica, Arial, Verdana, sans-serif; font-size: 12px; color: #FFF;}
            #nav-bottom-left a {}
            #nav-bottom-left li {margin-left: 25px;}

            #nav-bottom-right,
            #nav-bottom-right ul {list-style-image: url(images/bullet.png); font-family: Helvetica, Arial, Verdana, sans-serif; font-size: 12px; color: #FFF;}
            #nav-bottom-right a {}
            #nav-bottom-right li {}

            p.footer_title {color: #9bcbf3;}
            p.footer {font-family: Helvetica, Arial, Verdana, sans-serif; font-size: 12px; line-height: 18px; color: #FFF;}
            p.footer .menu-item {list-style-image: url(http://www.snowflakesoftware.com/wp-content/themes/images/bullet.png);}

    .mod_footer_container_bottom {
        clear: both;
        margin: 0 auto;
        width: 1200px;
        padding-top: 25px;
        padding-bottom: 25px;
    }
        #mod_footer_bottom_col {
            width: 100%;
        } 
```

下面是 HTML：

```
<div id="mod_footer"><footer>

    <div class="mod_footer_container">

        <div class="mod_footer_col">
        <p class="footer_title">Quick Links</p>
        <br />
            <div id="nav-bottom-left" class="nav"><nav>
                <p class="footer"><?php wp_nav_menu( array('theme_location' => 'footer-menu-one' )); /* editable within the Wordpress backend */ ?></p>
            </nav></div><!--#nav-bottom-left-->
        </div><!--mod_footer_col-->

        <div class="mod_footer_col">
        <p class="footer_title">In our Labs</p>
        <br />
            <div id="nav-bottom-right" class="nav"><nav>
                <p class="footer"><?php wp_nav_menu( array('theme_location' => 'footer-menu-two' )); /* editable within the Wordpress backend */ ?></p>
            </nav></div><!--#nav-bottom-right-->
        </div><!--mod_footer_col-->

        <div class="mod_footer_col">
        <p class="footer_title">Become a Partner</p>
        <br />
        <p class="footer">We're always looking for new partners to team up with in order to encourage and facilitate the use of geospatial data and components within mainstream IT systems. Want to join us? All you need to do is contact us and we can get the ball rolling...</p>
        <br />
        <p class="footer">Join our Partner Programme</p>
        </div><!--mod_footer_col-->

        <div id="mod_footer_col_end">
        <p class="footer">Interoperable data exchange via open standards - It's what we're all about.</p>
        <br />
        <p class="footer">Whether you want to load OS MasterMap, publish INSPIRE compliant data or know how to deliver AIXM via web services or any other GML data, we can help. Our software is enabling geographic information specialists around the world to easily load, publish, visualise and share geospatial data....</p>
        </div><!--mod_footer_col_end-->

    </div><!--mod_footer_container-->

    <div class="mod_footer_container_bottom">

    <div id="mod_footer_bottom_col">
        <p class="footer">&copy; <?php echo date("Y") ?> <a href="<?php bloginfo('url'); ?>/" title="<?php bloginfo('description'); ?>"><?php bloginfo('name'); ?></a>. <?php _e('All Rights Reserved.'); ?></p>
    </div><!--mod_footer_bottom_col-->

    </div><!--mod_footer_container_bottom-->

</footer></div><!--mod_footer--> 
```

正如您通过访问链接所看到的，第 4 列以“通过开放标准进行的可互操作数据交换”开头

希望有人能帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:28:38.640

你的 cols 都是 25% 的宽度。所以其中 4 个应该占页脚宽度的 100%。

您出错的地方是向它们添加 25px 的填充。所以你基本上说 100% + 75px 这迫使你的最后一个 col 做它正在做的事情。

要么在你知道页脚宽度的情况下以像素为单位进行测量，然后从宽度中减去 25px 的填充，要么以百分比进行测量，但确保宽度 + 填充不 > 100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:34:05.880

我同意 Spacebeer 的回答，这是该问题的另一种解决方案：

css3 box-sizing: [http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

使用它作为

```
.mod_footer_col{box-sizing:border-box;} 
```

将允许您保留填充。

注意：这在古代浏览器中不起作用。(即7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:47:00.667

`padding-right:25px`从您的列中删除，`.mod_footer_col`因为每个列都有宽度`25%`。当在列宽度中添加此`25px`填充时，它会将您的第 4^列向下推。`25%`

您可以添加填充`p.footer`以保持列段落之间的间距。

# android - 在 Android 上使用 Youtube DATA API 创建播放列表

> ID：13049167
> 
> 赞同：0
> 
> 时间：2012-10-24T12:24:39.417
> 
> 标签：android, youtube-api

我正在尝试使用 Youtube GDATA API 向 youtube 帐户添加新的播放列表。我的代码基于文档：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Adding_a_playlist](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Adding_a_playlist)

我首先获得一个访问令牌并适当地使用我的开发人员密钥。该帖子似乎工作得很好，但是当我试图取回响应时，我在调用 getInputStream 时收到一个文件未找到异常。

有人有想法吗？谢谢

这是连接代码（更新的清洁版本）：

```
@Override
protected Boolean doInBackground(Void... arg0) {
    BufferedReader input = null;
    InputStreamReader inputStreamReader = null;
    StringBuilder postContentXml = new StringBuilder();

    postContentXml.append("<?xml version='1.0' encoding='UTF-8'?>").
        append("<entry xmlns='http://www.w3.org/2005/Atom'") .
        append(" xmlns:yt='http://gdata.youtube.com/schemas/2007'>").
        append("<title type='text'>Sports Highlights Playlist</title>").
        append("<summary>A selection of sports highlights</summary>").
        append("</entry>");

    byte[] buffer = postContentXml.toString().getBytes();
    StringBuilder response = new StringBuilder();

    try {
        URL url = new URL("https://gdata.youtube.com/feeds/api/users/default/playlists");
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        // Initialize connection parameters
        urlConnection.setConnectTimeout(30000);
        urlConnection.setReadTimeout(30000);
        urlConnection.setDoOutput(true);
        urlConnection.setRequestMethod("POST");

        // Headers initialization
        urlConnection.setRequestProperty("Content-Type", "application/atom+xml");
        urlConnection.setRequestProperty("Content-Length", String.valueOf(buffer.length));
        urlConnection.setRequestProperty("Authorization", mAuthToken);
        urlConnection.setRequestProperty("GData-Version", "2");
        urlConnection.setRequestProperty("X-GData-Key", YoutubeUtils.getDevKey());

        OutputStream os = urlConnection.getOutputStream();
        os.write(buffer, 0, buffer.length);
        os.flush();
        os.close();

        InputStream inputStream = urlConnection.getInputStream();

        inputStreamReader = new InputStreamReader(inputStream, "UTF-8");

        input = new BufferedReader(inputStreamReader, 4096);

        String strLine = null;
        while ((strLine = input.readLine()) != null) {
            response.append(strLine);
        }

        input.close();
        inputStreamReader.close();
        inputStream.close();
        urlConnection.disconnect();

        Log.d("CreatePlaylistTask", "Response: " + response);
    }
    catch(Exception e) {
        Log.d("CreatePlaylistTask", "Error occured: " + e.getMessage());
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:04:47.787

我假设 POST 实际上并不成功。

如果我不得不通过查看您的代码来猜测，我认为问题可能出在`Authorization`标头值上。它`myAuthToken`看起来像什么，它是什么类型的令牌？例如，如果它是 OAuth 2 令牌，那么值必须是`Bearer TOKEN_VALUE`，而不仅仅是`TOKEN_VALUE`。

另外，请注意，[YouTube 数据 API v3](https://developers.google.com/youtube/v3/)将在不久的将来发布，它将使用新[的 Java 版 Google API 客户端库为](http://code.google.com/p/google-api-java-client/)Android 提供更好的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T08:55:16.097

我整理了一个示例 Android 应用程序，它使用 YouTube Data v3 API 来演示如何将播放列表加载到 ListView 中。

[https://github.com/akoscz/YouTubePlaylist](https://github.com/akoscz/YouTubePlaylist)

请注意，您**必须**拥有有效的 API 密钥才能使此示例应用程序正常工作。[您可以在Google Developer Console](https://developers.google.com/youtube/registering_an_application)中注册您的应用程序并启用 YouTube 数据 API。您需要注册 Web 应用程序而不是 Android 应用程序，因为此示例应用程序使用的 API 密钥是“浏览器密钥”。

# facebook-graph-api - 即使权限被拒绝，也允许读取状态？

> ID：13049168
> 
> 赞同：0
> 
> 时间：2012-10-24T12:24:40.277
> 
> 标签：facebook-graph-api, user-permissions

我正在学习使用 Flash/Flex 和 Facebook 进行编程的教程（请参阅[http://www.adobe.com/devnet/facebook/articles/flex_fbgraph_pt1.html](http://www.adobe.com/devnet/facebook/articles/flex_fbgraph_pt1.html)）。这是一个连接到 Facebook 的桌面应用程序，而不是一个网络应用程序。

当第一次测试读取状态的能力时，我允许应用程序（显然）在被问到时读取它们，所以效果很好。

见鬼，然后我撤销了许可，当它再次问我时，Skip 说。它仍然被允许阅读它们！（结果对象有效，失败对象为空）。

于是我又试了一遍（它又问我，因为它仍然没有权限），这次我特意点击了十字架*拒绝*许可……它仍然能够读取它们！

我可能错过了什么吗？这是我正在使用的代码：

```
private function showStatus(): void 
{ 
    FacebookDesktop.requestExtendedPermissions(onGetStatusGranted,"read_stream"); 

} 
private function onGetStatusGranted(resultData: Object, failData: Object): void 
{ 
    FacebookDesktop.api("/me/statuses", onGotStatus); 

} 
private function onGotStatus(resultData: Object, failData: Object): void 
{ 
    if (failData != null && failData.error.code == 200) 
    {
        // User didn't allow it. 

        return ; **** Doesn't get here! **** 

    }

    if (failData == null && resultData != null && resultData.length > 0) 
        this.userStatusLabel.text = "Status: " + resultData[0].message ; **** Always gets here ***

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:18:49.507

您很可能遇到了错误。`read_stream`除非您是公共页面，否则状态需要许可。

# paypal - 贝宝自适应支付和权限

> ID：13049172
> 
> 赞同：1
> 
> 时间：2012-10-24T12:24:55.660
> 
> 标签：paypal, sandbox, paypal-sandbox, paypal-adaptive-payments

当我使用主账户并拥有两个测试账户时，链式支付没有任何问题，因为它是一个沙盒，两个账户都属于我。

它在生产中的表现如何？

我的意思是：-我可以将完全随机的贝宝会员定义为第一个接收者，将我自己定义为第二个链接吗？- 用户何时必须接受付款？因为有时我看到我必须接受一些用户的付款表格，而其他时候我不必。这是什么原因？- 如果用户点击网站上的“购买”按钮，我是否必须先显示摘要窗口，或者我可以使用重定向直接将用户重定向到贝宝帐户，然后再次使用重定向来显示用户批准贝宝网站？

# servlets - 处理 doGet 请求后使用的堆没有缩小

> ID：13049173
> 
> 赞同：0
> 
> 时间：2012-10-24T12:24:56.127
> 
> 标签：servlets, heap-memory

我有一个 java 客户端，每当用户单击按钮时，它都会调用服务器上的 servlet（获取请求）。服务器从数据库中获取一些数据，生成一个文件并将一个布尔值发送回客户端，说明文件是否已成功创建。我面临的问题是，每次用户单击按钮（客户端）时，服务器堆都会增加大约 50MB，并且当成功处理 doGet 请求时，它永远不会缩小到请求之前的大小。我错过了什么吗？我应该以某种方式关闭来自客户端的连接吗？如何说服服务器在处理 doGet 请求时释放他创建的对象？

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:33:19.823

您是否在 finalize 块中明确释放内存资源？明智地使用 finally 和 finalize 可以帮助您释放额外的资源/内存空间。请在此处复制您的代码以获得一些内存建议。这将有助于纠正您是否不必要地使用 PermGen 空间而不是 HeapSpace 内存。例如，如果您使用 String str1="foo"; 会有所不同 和 Vs String str2 = new ("foo");

其中 str1 作为 PermGen 的一部分不可回收，而其他 str2 在堆内存空间中。

# java - Java 应用架构 - 需要一个日志名称，希望保持类解耦

> ID：13049175
> 
> 赞同：2
> 
> 时间：2012-10-24T12:25:04.977
> 
> 标签：java, logging, architecture

我正在使用带有这样的日志原型的第三方软件库：

```
runtime.getInstance().log(int logtype, String moduleName, String logtext); 
```

我有一个实用程序库，我希望它独立于库，但我也希望能够从我自己的类中将内容记录到软件包中。这很好，因为短信很普遍，比如“你传递了错误的数据！” 和“等等等等成功了！” 此外，我已经封装了软件供应商的日志功能，所以我什至不担心符合一些随机 API。

我担心（我为什么要写这篇文章）是我的系统中会有各种不同的模块。所以问题是这样的：

```
ModuleFoo extends com.thirdpartyvendor.BaseModule
ModuleBar extends com.thirdpartyvendor.BaseModule 
```

`ModuleFoo`---包含 ---> 的实例`IndependentDataStructure`---尝试将日志条目写入我的`WrappedLogger`---> 但数据结构没有对`ModuleFoo`.

`ModuleBar`---包含 ---> 的实例`IndependentDataStructure`---尝试将日志条目写入我的`WrappedLogger`---> 但数据结构没有对`ModuleBar`.

目前我的系统传递了一个字段`String moduleName`，坦率地说让我感到恶心......但我希望日志条目告诉我我的模块是什么！如果不包含对 a （或 a ）的引用，记录器如何知道实例是否`IndependentDataStructure`正在使用（或其他模块）？`ModuleFoo``ModuleBar``IndependentDataStructure``BaseModule``String moduleName`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:41:36.487

Log4J 和 SLF4J 等日志 API 具有*诊断上下文*的概念，这是一种在映射中存储各种上下文信息位的方式，`ThreadLocal`日志消息格式化程序可以访问该映射来装饰消息。对此的典型用途是将当前经过身份验证的用户的名称放入 Web 应用程序的日志消息中（使用 servlet 过滤器将每个请求的用户名存储在 MDC 中），您是否能够在您的系统？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:31:57.893

```
runtime.getInstance().log(int logtype, 
                          this.getClass().getSimpleName(), 
                          String logtext); 
```

如果我做对了...

编辑：对于自动化（但有点慢）自动方法名称：

```
Thread.currentThread().getStackTrace()[level].getMethodName(); 
```

（其中level是一个整数，指定通过日志请求传递的类数）

# c++ - 在 VC++ 中通过正则表达式拆分字符串

> ID：13049180
> 
> 赞同：0
> 
> 时间：2012-10-24T12:25:23.520
> 
> 标签：c++, visual-c++

我在一个项目中使用 VC++ 10。作为 C/C++ 的新手，我刚刚在 Google 上搜索过，似乎标准[C++ 中没有正则表达式](https://stackoverflow.com/a/1085120/292291)？VC++ 10 似乎有正则表达式。但是，如何进行正则表达式拆分？我需要为此提升吗？

在网上搜索，我发现许多人推荐 Boost 用于许多事情，标记/拆分字符串，解析（PEG），现在甚至是正则表达式（尽管这应该内置......）。我可以得出结论，提升是必须的吗？它的 180MB 仅用于琐碎的事情，在许多语言中都天真地支持？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T12:38:12.427

C++11 标准有[`std::regex`](http://en.cppreference.com/w/cpp/regex/basic_regex). 它也包含在[`TR1 for Visual Studio 2010`](http://msdn.microsoft.com/en-us/library/bb982727%28v=vs.100%29.aspx). 实际上 TR1 从 VS2008 开始可用，它隐藏在`std::tr1`命名空间下。因此，对于 VS2008 或更高版本，您不需要 Boost.Regex。

可以使用以下方法执行拆分`regex_token_iterator`：

```
#include <iostream>
#include <string>
#include <regex>

const std::string s("The-meaning-of-life-and-everything");
const std::tr1::regex separator("-");
const std::tr1::sregex_token_iterator endOfSequence;

std::tr1::sregex_token_iterator token(s.begin(), s.end(), separator, -1);
while(token != endOfSequence) 
{
   std::cout << *token++ << std::endl;
} 
```

如果您还需要获取分隔符本身，则可以从`sub_match`指向的对象中获取它`token`，它是包含令牌的开始和结束迭代器的对。

```
while(token != endOfSequence) 
{
   const std::tr1::sregex_token_iterator::value_type& subMatch = *token;
   if(subMatch.first != s.begin())
   {
      const char sep = *(subMatch.first - 1);
      std::cout << "Separator: " << sep << std::endl;
   }

   std::cout << *token++ << std::endl;
} 
```

这是您有单个字符分隔符时的示例。如果分隔符本身可以是任何子字符串，则您需要做一些更复杂的迭代器工作并可能存储以前的标记子匹配对象。

或者您可以使用正则表达式组并在第一组中放置分隔符，在第二组中放置真正的标记：

```
const std::string s("The-meaning-of-life-and-everything");
const std::tr1::regex separatorAndStr("(-*)([^-]*)");
const std::tr1::sregex_token_iterator endOfSequence;

// Separators will be 0th, 2th, 4th... tokens 
// Real tokens will be 1th, 3th, 5th... tokens 
int subMatches[] = { 1, 2 };
std::tr1::sregex_token_iterator token(s.begin(), s.end(), separatorAndStr, subMatches);
while(token != endOfSequence) 
{
   std::cout << *token++ << std::endl;
} 
```

不确定它是否 100% 正确，但只是为了说明这个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:02:59.007

这里是[这个博客的一个例子。](http://www.johndcook.com/cpp_regex.html)

你会得到你所有的比赛`res`

```
std::tr1::cmatch res;
str = "<h2>Egg prices</h2>";
std::tr1::regex rx("<h(.)>([^<]+)");
std::tr1::regex_search(str.c_str(), res, rx);
std::cout << res[1] << ". " << res[2] << "\n"; 
```

# google-app-engine - AttributeError：“消息”对象没有属性“放置”

> ID：13049181
> 
> 赞同：1
> 
> 时间：2012-10-24T12:25:23.567
> 
> 标签：google-app-engine, object, put

以下代码：

```
class Message(db.Model):
    content = db.StringProperty()

class Message(webapp2.RequestHandler):

    def get(self):
        doRender(self,'message.htm')

    def post(self):

        message = Message()
        message.content = self.request.get('content')
        message.put();
        self.redirect('/view') 
```

给我下面的错误信息：

```
AttributeError: 'Message' object has no attribute 'put' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:29:17.790

这不是你的做法。

你`.put`是模特，不是`Message`班级。您需要先使用 db 或 ndb 制作模型。

对于您的示例：

```
class Greeting(ndb.Model):
  content = ndb.StringProperty()
  date = ndb.DateTimeProperty(auto_now_add=True)

def post(self):

    message = Greeting()
    message.content = self.request.get('content')
    message.put();

    self.redirect('/view') 
```

[https://developers.google.com/appengine/docs/python/ndb/overview#storing](https://developers.google.com/appengine/docs/python/ndb/overview#storing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:42:54.560

问题在于您有两个名为“Message”的类。选择唯一的名称。

# ajax - 如何将 URL 作为参数传递给 Spring 3.1 控制器

> ID：13049182
> 
> 赞同：0
> 
> 时间：2012-10-24T12:25:22.707
> 
> 标签：ajax, spring, url, parameters, controller

这是相当简单的。我需要通过 AJAX 调用从前端将 url 传递给我的控制器，即“http://www.x.com/some/path”。Spring 控制器将路径的一部分解释为变量，用“/”描述，所以这显然不起作用：“http://myserver.com/myapp/controller/http://www.x.com/some/path ”。

所以我的问题是，我怎样才能将这个值传递给我的控制器？

编辑：我在前端使用 Dojo 1.8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:10:22.750

尝试在 JavaScript 中对 url 的变量进行编码。

```
var url = encodeURIComponent("http://www.x.com/some/path");
// http%3A%2F%2Fwww.x.com%2Fsome%2Fpath 
```

然后您可以通过在 Java 中解码来检索原始值：

```
URLDecoder.decode("http%3A%2F%2Fwww.x.com%2Fsome%2Fpath", "UTF-8")
// http://www.x.com/some/path 
```

# jquery - 修复了点击空白区域时页脚隐藏的问题

> ID：13049188
> 
> 赞同：1
> 
> 时间：2012-10-24T12:25:43.187
> 
> 标签：jquery, jquery-mobile

我的 Jquery Mobile 应用程序有一个固定的页脚（里面有一个导航栏）。我遇到的问题是，当用户在应用程序（最有可能是空白区域）上单击/点击或类似操作时，页脚会隐藏。

它使用某种动画（向下滑动），所以我猜这不是错误，但是我缺少 data-* 属性来防止这种情况发生。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:13:39.660

听起来您已`data-fullscreen="true"`应用该属性。此属性将导致您按设计描述的行为。

只需删除该属性并保留您的`data-position="fixed"`，您就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:14:20.837

我也有一个带导航栏的页脚，我的页脚在点击时不会隐藏。试试这是否适合你：

```
<div data-role="footer" data-id="nav">      
            <div data-role="navbar" data-iconpos="top" data-position="fixed">
                <ul>
                    <li><a data-icon="grid" href="#one">One</a></li>
                    <li><a data-icon="grid" href="#two">Two</a></li>
                    <li><a data-icon="grid" href="#three">Three</a></li>
                    <li><a data-icon="grid" href="#four">Four</a></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer --> 
```

# php - php shell_exec & 权限

> ID：13049190
> 
> 赞同：1
> 
> 时间：2012-10-24T12:25:48.997
> 
> 标签：php, permissions

我有以下目录：

```
/var/www/temp
/var/www/users (S3 mount) 
```

运行以下 php 的用户是`www-data`：

```
mkdir("temp/id247439757");
addSomeFilesInTheAboveDirectory();
shell_exec("temp/id247439757 users/id247439757"); 
```

问题是它没有将目录从 temp/ 移动到 users/！所有文件都保留在临时目录中。

我认为执行 shell_exec 的用户也是 www-data ！我怎样才能解决这个问题？请注意，这个问题*无法解决*，因为它是一个挂载目录，因为如果我在目录中执行 mkdir("users/id247439757") 它*确实*有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:30:15.440

您忘记了 shell_exec 调用中的“mv”命令：

```
shell_exec("mv temp/id247439757 users/id247439757"); 
```

# c# - C#如何分离控件和控件的自定义设计器

> ID：13049194
> 
> 赞同：2
> 
> 时间：2012-10-24T12:25:55.657
> 
> 标签：c#, windows-forms-designer

是否可以将自定义控件实现与自定义控件设计器实现分开？例如：

> MyAsembly.dll
> 
> MyAssembly.Design.dll

我的意思是自定义设计器是一个从该类继承的`ControlDesigner`类（请参阅：[MSDN ControlDesigner](http://msdn.microsoft.com/en-us/library/system.windows.forms.design.controldesigner.aspx)）（不是设计器生成的代码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:57:01.613

自定义设计器 ( `ControlDesigner`) 是一个独立于控件本身的类。它通过 `DesignerAttribute`. 只需在您的解决方案中创建一个新的类库项目并将设计器放置在那里。在 .NET 中，每个项目都会创建自己的 dll 或 exe 文件。

# c# - 过滤器表达式 'FirstName' 不计算为布尔项

> ID：13049195
> 
> 赞同：0
> 
> 时间：2012-10-24T12:26:01.990
> 
> 标签：c#, asp.net, datatable, dataset

我正在绑定一个 DropDownList，我在第一列中有 FirstName，在第二列中有 LastName 作为 DDL

```
protected void GridView1_RowDataBound1(object sender, GridViewRowEventArgs e)
{ 
    DataTable myTable = new DataTable();
    DataColumn productIDColumn = new DataColumn("FirstName");
    DataColumn productNameColumn = new DataColumn("LastName");

    myTable.Columns.Add(productNameColumn);
    DataSet ds = new DataSet();

    ds = get();
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var categoryID = (e.Row.Cells[0].Text);
        var expression = "FirstName "+categoryID;

        DropDownList ddl = (DropDownList)e.Row.FindControl("DropDownList1");

        DataRow[] rows = ds.Tables[0].Select(expression);
        foreach (DataRow row in rows)
        {
            DataRow newRow = myTable.NewRow();
            newRow["UserId"] = row["UserId"];
            newRow["LastName"] = row["LastName"];
            myTable.Rows.Add(newRow);
        }

        ddl.DataSource = myTable;
        ddl.DataTextField = "LastName";
        ddl.DataValueField = "UserId";
        ddl.DataBind();
    }
} 
```

我收到一个错误，例如`Filter expression 'FirstName ' does not evaluate to a Boolean term`DataRow[] rows = ds.Tables[0].Select(expression);

谁能帮我这个？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:28:47.063

你的表达没有任何意义。我会期待一些类似的东西：

```
var expression = "FirstName = 'John'"; 
```

或者

```
var expression = "CategoryId = 42"; 
```

查看 Select 方法的文档：http: [//msdn.microsoft.com/en-us/library/det4aw50.aspx](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:30:06.007

您需要比较表达式中的 2 个值。阅读本文：[C# 数据表选择](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)

# javascript - 使用 Mustache.js 呈现来自 JSON 响应的值列表

> ID：13049197
> 
> 赞同：1
> 
> 时间：2012-10-24T12:26:13.253
> 
> 标签：javascript, jquery, json, mustache

我正在使用 Mustache.js 格式化来自 jQuery getJSON() 请求的响应。getJSON 请求获取图像名称列表。拨打电话时，我想在现有内容的末尾显示一系列这些图像。

返回的 JSON 如下所示：

```
[
  {"id":{"_time":1351063373,"_machine":56912161,"_inc":1690583039,"_new":false},"url":"5.jpg","tags":[]},
  {"id":{"_time":1351063237,"_machine":56912161,"_inc":1690583038,"_new":false},"url":"Repinzle-Logo.png", "tags":[]},
  {"id":{"_time":1351063186,"_machine":56912161,"_inc":1690583037,"_new":false},"url":"21.jpg","tags":[]}}
] 
```

我正在用每个函数解析它......我的 AJAX 请求（使用 jQuery 看起来像这样）：

```
<script type="text/javascript">
    var imageNum=20;
    var imageCount=0;

    function getMoreImages(){
        imageCount=imageCount+imageNum;
        $.getJSON("/getImages", { start: imageNum, count: imageCount },
            function(data){
            $.each(data, function(key, val) {
                // do stuff with val.url

                var url = val.url;
                var template = $('#item-tpl').html();
                var newitem = Mustache.to_html(template, url);
                    $('#main').append(newitem);
                });     
              });
    }
</script> 
```

这是 mustache.js 模板

```
<script id="item-tpl" type="text/html">
    <div><img src="https://myurlstem.com/mydir/{{url}}" class="item"></div>
</script> 
```

据我所见，我已经正确设置了所有内容，但由于某种原因`url`没有正确发送到模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:37:15.243

您需要将对象传递给该`to_html`方法。

```
var newitem = Mustache.to_html(template, { url: url }); 
```

通常，我认为您会传递整个模型或集合。

# c++ - 将数据存储到数组中的问题

> ID：13049200
> 
> 赞同：1
> 
> 时间：2012-10-24T12:26:29.313
> 
> 标签：c++, arrays, fstream

我的程序允许用户在输入用户名时删除指定的记录。当它们传入名称时，它会调用一个方法将它们存储到一个数组中，并将它们写回文件而不附加，以便重新写入文件。但是在存储部分存在一些问题，我的文本文件的最后一行没有正确存储，而是从第二行复制并复制到包含名称的最后一行。希望 no1 会感到困惑：/。存储在我的数组中的文本文件和数据的示例在下面，我将其设为粗体和斜体以获得更清晰的图片，以及 deleteRec 的方法。

这是我的文本文件包含的内容。

```
user;pass;1234;John;1111
user1;pass1;2345;May;2222
user2;pass2;3456;Mary;3333
user3;pass3;4567;Andy;4444
hr;hr;5678;Jonathan;5555
admin;admin;6789;Aili;6666
user10;pass10;7890;eggy;9999
user11;pass11;9807;Mary;7777 
```

这是我运行要删除的程序时的输出。

```
Data stored in store[] array: user1;pass1;2345;May;2222
Data stored in store[] array: user2;pass2;3456;Mary;3333
Data stored in store[] array: user3;pass3;4567;Andy;4444
Data stored in store[] array: hr;hr;5678;Jonathan;5555
Data stored in store[] array: admin;admin;6789;Aili;6666
Data stored in store[] array: user10;pass10;7890;eggy;9999
***Data stored in store[] array: ;pass10;7890;eggy;9999***
Data stored in store[] array: 
```

```
bool Employee::deleteRec(string nm)
{
    int count;
    int i=0;//for looping
    ifstream file("login1.txt");
    string fusername,empty;
    string store[100];//initialize a array to store textfile contents
    while (!file.fail()) 
    {       
        getline(file,fusername,';');// use ; as delimiter
        getline(file,empty);// use line end as delimiter, and to skip the rest of the information
        string add="";//initialize add string to nothing when it loops
        add += fusername+';'+empty; //adds back the username and rest of the line together back
        if(fusername!=nm)//to check if the username in textfile do not match the user input name
        {
            store[i]=add; //store into an array
            cout<<"i is: "<<i<<endl;
            cout<<"store array[] = "<<store[i]<<endl;
            i++;
        }
        else{}
    }

    //ofstream pwd2_file ("login1.txt", ios::app); //suppose to user this if im writing to file

    for(int x=0;x<i+1;x++)
    {
        cout<<"Data stored in store[] array: "<<store[x]<<endl;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:30:57.803

您的循环的问题是，当您到达文件末尾时，您的流还没有失败。它只会在下一次读取时失败，但您没有对此进行验证。

因此，您的数组包含最后一条记录两次。

你有一个空字符串作为第一个字段可能是因为它将这个设置为空以读取它，（流尚未处于失败状态）或者因为在你的输入文件末尾有一个空行得到读入。

为您的用户及其数据创建一个结构，并从流中读取。如果整个读取成功，您可以附加到您的数据集。

我建议你使用`std::vector`这个和`push_back()`.

正确的循环方式如下：

```
struct EmployeeData
{
    std::string name;
    // fill in members
;

std::istream& operator>>( std::istream& is, EmployeeData& emp )
{
     std::getline( is, emp.name(), ';' );
     // etc.

     return is;
}

std::vector< EmployeeData > emps;
EmployeeData emp;
while( is >> emp )
{ 
   emps.push_back( emp );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:37:50.480

我建议使用调试器，然后弄清楚什么被忽略了。在输出存储在数组中的位置或将其重写到文件时，看起来像是一个错误。可以解释您缺乏边界用户。

# c# - 引用外部类型枚举和包含方法

> ID：13049202
> 
> 赞同：4
> 
> 时间：2012-10-24T12:26:32.890
> 
> 标签：c#, enums, mapping, entity-framework-5, ef-model-first

自从我切换到 .net 4.5 和 EF 5.0 后，我开始使用枚举映射。在我的项目中，我首先使用模型。因为所有枚举都在前面声明，所以我决定在 EDM 中将字段转换为枚举时使用用户选项“引用外部类型”。一切正常，但是当我尝试执行代码时

```
public enum SomeEnum : int
{
    value1 = 0,
    value2 = 1
}

class Program
{
    static void Main(string[] args)
    {
        TestDbEntities context = new TestDbEntities();
        var enumList = new List<SomeEnum>() { SomeEnum.value1, SomeEnum.value2 };
        var items = context.Table1.Where(e => enumList.Contains(e.EnumField));
        foreach (var item in items)
        {
            Console.Write(item.Id);
        }
        context.Dispose();
    }
} 
```

我收到带有消息的 ArgumentException：

```
The type 'SomeEnum' does not match the EDM enumeration type 'SomeEnum' or its underlying type 'Int32' Parameter name: value. 
```

连线的是，当我不使用引用外部类型时，一切都很好。我了解 EDM 背后的内容，但我不明白为什么当枚举在模型中定义并随后由 T4 生成时这段代码正在工作

```
 <EntityContainer Name="TestDbEntities" p1:LazyLoadingEnabled="true">
      <EntitySet Name="Table1" EntityType="TestDbModel.Table1" />
    </EntityContainer>
    <EntityType Name="Table1">
      <Key>
        <PropertyRef Name="Id" />
        <PropertyRef Name="EnumField" />
      </Key>
      <Property Name="Id" Type="Int32" Nullable="false" />
      <Property Name="EnumField" Type="TestDbModel.SomeEnum" Nullable="false" />
    </EntityType>
    <EnumType Name="SomeEnum" a:ExternalTypeName="ConsoleApplication1.SomeEnum" xmlns:a="http://schemas.microsoft.com/ado/2006/04/codegeneration" /> 
```

我想使用引用外部类型，但这是一些限制。我知道我可以转换为基础类型，但这是一个 hack。

----edit 这是一个堆栈跟踪

```
at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.ArgumentValidation.ValidateConstant(TypeUsage constantType, Object value)
at System.Data.Objects.ELinq.ExpressionConverter.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.NewArrayInitTranslator.<>c__DisplayClass88.<TypedTranslate>b__86(Expression e)
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.EnumerableValidator`3.Validate(IEnumerable`1 argument, String argumentName, Int32 expectedElementCount, Boolean allowEmpty, Func`3 map, Func`2 collect, Func`3 deriveName)
at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.EnumerableValidator`3.Validate()
at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.ArgumentValidation.CreateExpressionList(IEnumerable`1 arguments, String argumentName, Boolean allowEmpty, Action`2 validationCallback)
at System.Data.Common.CommandTrees.ExpressionBuilder.Internal.ArgumentValidation.ValidateNewCollection(IEnumerable`1 elements, DbExpressionList& validElements)
at System.Data.Common.CommandTrees.ExpressionBuilder.DbExpressionBuilder.CreateNewCollection(IEnumerable`1 elements)
at System.Data.Objects.ELinq.ExpressionConverter.NewArrayInitTranslator.TypedTranslate(ExpressionConverter parent, NewArrayExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.ContainsTranslator.TranslateContains(ExpressionConverter parent, Expression sourceExpression, Expression valueExpression)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.ContainsTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
at System.Data.Objects.ELinq.ExpressionConverter.Convert()
at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
at ConsoleApplication1.Program.Main(String[] args) in c:\Users\Pawel\Documents\Visual Studio 2012\Projects\ClassLibrary1\ConsoleApplication1\Program.cs:line 22
at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:16:01.510

这是一个错误。我在 EntityFramework Codeplex 网站上提交了它：http: [//entityframework.codeplex.com/workitem/623](http://entityframework.codeplex.com/workitem/623)。目前的解决方法是使用 || 或在 EDM 枚举类型中指定您在 CLR 枚举类型中拥有的所有成员。设置外部枚举类型会向 EDM 枚举类型 (a:ExternalTypeName="ConsoleApplication1.SomeEnum") 添加一个注释，告诉代码 gen 不生成此类型，而是在生成的代码中使用该类型的任何地方使用属性的值。如果没有此注释，将生成与 EDM 枚举类型完全匹配的 CLR 枚举。顺便提一句。前段时间我写了一篇关于 EF5 和外部枚举类型的博文。你可以在这里找到它：http: [//blog.3d-logic.com/2012/09/11/using-exisiting-enum-types-in-entity-framework-5/](http://blog.3d-logic.com/2012/09/11/using-exisiting-enum-types-in-entity-framework-5/). 我将在博客上添加有关该错误的信息。也可以随意评论它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T06:34:16.053

不是直接的解决方案，但这种解决方法适用于我的要求。

```
var enumList = new List<int>() { (int)SomeEnum.value1, (int)SomeEnum.value2 }; 
var items = context.Table1.Where(e => enumList.Contains((int)e.EnumField)); 
```

# jquery - 在不同页面中获取特定 div 的内部 HTML

> ID：13049203
> 
> 赞同：0
> 
> 时间：2012-10-24T12:26:40.393
> 
> 标签：jquery, asp.net

我想要一个网页，我会在其中放置很多 div，并且在每个 div 中都会有不同的内容。根据条件，我想在 JQuery 对话框中显示特定 div 的内容。是否可以在网页中获取特定 div 的 html 内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:18:37.330

```
var x, y;
x = 0;
y = 1;

switch (myCondition)
{
case 'condition (n)' || x = y:
    $.ajax({
            url: 'http://samedomain.com/pageWithContent.php',
            dataType: 'html',
            cache: false,
            success: function (data) {
                $('#targetDiv').html(data);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert('Error occurred while loading content.');
            }
    });
    break;
default:
    break;
} 
```

如果您要显示的内容需要加载一些数据，那么这是一个不错的选择，但如果数据不多，请尝试以下操作：

```
$(document).ready(function () {
    $('#itemChangingMyCondition').bind('change', function() {
        switch ($(this).attr('value')) 
        {
            case 'First item':
                $('#targetDiv').html($('#relativeDiv')).html());
                break;
            case 'Second item':
                $('#targetDiv').html($('#relativeDiv')).html());
                break;
            default:
                $('#targetDiv').html($('#defaultDisplayDiv')).html());
                break;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:45:56.000

```
$.post("some.php",function(data) {
    var content = $(data).find(".someClass");
}); 
```

只允许同一个域

像这样 ？还是我误解了？

# java - 如何在 Servlet 中读取图像（或其他文件）并将其编码为 base64

> ID：13049206
> 
> 赞同：-1
> 
> 时间：2012-10-24T12:27:01.183
> 
> 标签：java, servlets, base64

在 servlet 中，我必须从磁盘读取图像文件，将其编码为 Base64，然后发送回客户端。因为我只找到了 iOS、Python 和其他一些类型的示例（主要都是以相同的方式），所以我想我在这里发布我的代码来帮助其他人；）

**警告！** 这仅适用于最大 2GB 的文件：设置容量`ByteBuffer`仅需要`int`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:27:01.183

```
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    FileInputStream in = null;
    try {
        File file = new File(getServletContext().getRealPath("/<thePath>/<fileName>"));
        ByteBuffer buff = ByteBuffer.wrap(new byte[(int)image.length() + (image.length() % 1024 > 0 ? 1024 : 0)]);
        byte[] b = new byte[1024]; 
        in = new FileInputStream(file);
        while(in.read(b) != -1) {
            buff.put(b);
        }
        response.getWriter().write(Base64.encode(buff.array()));
    } catch(Exception e) {
        String msg = "Fehler beim lesen des Bildes";
        LOG.log(Level.SEVERE, msg, e);
        response.sendError(500, msg);
        return;
    } finally {
        if(in != null) in.close();
    }
} 
```

**警告！** 这仅适用于最大 2GB 的文件：设置容量`ByteBuffer`仅需要`int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:01:35.160

为什么这么复杂，为什么要将完整的图像读入内存？一个更简单的解决方案：

```
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { 
    sun.misc.BASE64Encoder enc = new sun.misc.BASE64Encoder();
    enc.encode(new FileInputStream("/path/to/file.whatever"), response.getOutputStream());
} 
```

# wpf - 在代码中设置 ListView ItemSource 绑定

> ID：13049209
> 
> 赞同：0
> 
> 时间：2012-10-24T12:27:26.593
> 
> 标签：wpf, listview, binding

我有一个这样的工作 ListView

```
<ListView Name="passageListView" ItemsSource="{Binding Path=Passages, NotifyOnTargetUpdated=True}" TargetUpdated="PassageListViewTargetUpdated"> 
```

哪里`Passages`是`ObservableCollection<>`。

现在，我如何在代码中进行相同的绑定？（注意`NotifyOnTargetUpdated=True`必须设置）

我试图分配 a `Binding`，`passageListView.ItemsSource`但这是不允许的，我不能使用`SetBinding()`，因为`passageListView.ItemsSource`is not a `DependencyProperty`?

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:40:33.600

在控件的构造函数中尝试这个`ListView`：

```
passageListView.SetBinding(ListView.ItemsSourceProperty, 
                new Binding
                      {
                          Path = new PropertyPath("Passages"),
                          NotifyOnTargetUpdated = true
                      }); 
```

如果 DataContext 设置正确，这应该可以工作。
DependencyProperty 也可以是`ItemsControl.ItemsSourceProperty`，因为那是基类。

# asp.net-mvc - OpenXml 和 HttpResponse.OutputStream

> ID：13049215
> 
> 赞同：2
> 
> 时间：2012-10-24T12:28:02.177
> 
> 标签：asp.net-mvc, openxml, httpresponse, openxml-sdk

我有一个 Asp.Net Mvc 应用程序。在此应用程序中，我具有将数据从数据库下载到 Excel 文件的功能（使用 OpenXml Sdk）。现在可以了。但是当数据很大时，从用户请求到响应下载窗口的时间变成了 10+ 分钟。这是因为两个漫长的过程：

1.  从 MSSQL 服务器获取数据。
2.  在服务器的内存中生成 Excel 文档。（只有在 Excel 文档完成后才开始下载）

第一个问题是通过使用 DataReader 解决的。现在 excel 文件的生成在用户请求进入网络服务器后开始。

为了解决第二个问题，我们需要在 HttpResponse.OutputStream 上生成 Excel 文档，但是这个流不是 Seekable 并且在开始之前生成失败。

**有谁知道任何可以帮助解决此问题的解决方法？**

我的生成函数示例：

```
 public void GenerateSpreadSheetToStream(IDataReader dataReader, Stream outputStream)
    {
        var columnCaptions =                FillColumnCaptionsFromDataReader(dataReader.GetSchemaTable());
//fails on next line with exception "Cannot open package because FileMode or FileAccess value is not valid for the stream."
        using (var spreadsheetDocument = SpreadsheetDocument.Create(outputStream, SpreadsheetDocumentType.Workbook)) 
        {
            spreadsheetDocument.AddWorkbookPart();
            var workSheetPart = spreadsheetDocument.WorkbookPart.AddNewPart<WorksheetPart>();
            OpenXmlWriter writer;
            using (writer = OpenXmlWriter.Create(workSheetPart))
            {
                using (writer.Write(new Worksheet()))
                {

                    using (writer.Write(new SheetData()))
                    {
                        using (writer.Write(w => 
                            w.WriteStartElement(new Row(), new[] {new OpenXmlAttribute("r", null, 1.ToString(CultureInfo.InvariantCulture))})))
                        {
                            var cells =
                                columnCaptions.Select(caption => new Cell()
                                    {
                                        CellValue = new CellValue(caption.Item2),
                                        DataType = CellValues.String
                                    });
                            foreach (var cell in cells)
                            {
                                writer.WriteElement(cell);
                            }
                        }
                        var i = 2;
                        while (dataReader.Read())
                        {
                            var oxa = new[] { new OpenXmlAttribute("r", null, i.ToString(CultureInfo.InvariantCulture)) };
                            using (writer.Write(w => w.WriteStartElement(new Row(), oxa)))
                            {
                                var cells =
                                    columnCaptions.Select(
                                        (c, j) =>
                                        new Cell
                                            {
                                                CellValue = new CellValue(dataReader[c.Item1].ToString()),
                                                DataType = CellValues.String,
                                                CellReference = new StringValue(GetSymbolByCellNumber(j))
                                            });
                                foreach (var cell in cells)
                                {
                                    writer.WriteElement(cell);
                                }
                            }
                            i++;
                        }
                    }
                }
            }
            using (writer = OpenXmlWriter.Create(spreadsheetDocument.WorkbookPart))
            {
                using (writer.Write(new Workbook()))
                {
                    using (writer.Write(new Sheets()))
                    {
                        var sheet = new Sheet
                        {
                            Id = spreadsheetDocument.WorkbookPart.GetIdOfPart(workSheetPart),
                            SheetId = 1,
                            Name = SheetName
                        };
                        writer.WriteElement(sheet);
                    }
                }
            }
        }
    }
    private static string GetSymbolByCellNumber(int number)
    {
        var r = number/26;
        var s = (char) ((number%26) + 65);
        return new string(s, r);
    } 
```

我的 FileStreamResultWithTransformation（用于使用 HttpResponse.OutputStream）：

```
public class FileStreamResultWithTransformation : FileResult
{
    private readonly Action<Stream> _action;
    public FileStreamResultWithTransformation(Action<Stream> action, string contentType, string fileName) : base(contentType)
    {
        _action = action;
        FileDownloadName = fileName;
    }

    protected override void WriteFile(HttpResponseBase response)
    {
        response.BufferOutput = false;
        _action(response.OutputStream); ->> it fails there  
    }
} 
```

堆栈跟踪：

> [IOException：无法打开包，因为 FileMode 或 FileAccess 值对流无效。]
> System.IO.Packaging.Package.ValidateModeAndAccess(Stream s, FileMode mode, FileAccess access) +784533
> System.IO.Packaging.Package.Open( Stream stream, FileMode packageMode, FileAccess packageAccess, Boolean streaming) +89
> System.IO.Packaging.Package.Open(Stream stream, FileMode packageMode, FileAccess packageAccess) +10
> DocumentFormat.OpenXml.Packaging.OpenXmlPackage.CreateCore(Stream stream) +192
> DocumentFormat.OpenXml.Packaging.SpreadsheetDocument.Create（流流，SpreadsheetDocumentType 类型，布尔自动保存）+215
> DocumentFormat.OpenXml.Packaging.SpreadsheetDocument.Create（流流，SpreadsheetDocumentType 类型）+44
> --------.GenerateSpreadSheetToStream(IDataReader dataReader, Stream outputStream) 在 d:\Work\Epsilon\development\Web\trunk\Sources\Epsilon.DocumentGenerator\XlsXGenerator.cs:119

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:10:44.230

在我看来，这个问题无法解决。在写入完成时，OpenXmlWriter 在流的不同位置寻找、读取和写入，如果没有这个动作，xlsx 文件就会被破坏。我认为，OpenXml 库的设计有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T09:42:28.307

问题有点深。Xlsx 文件是 zip 存档，OpenXml 内部使用 ZipArchive 类。存档中的每个文件都有一个标题，它位于数据之前。ZipArchive 将数据写入流，然后返回文件开头并写入文件头。它使用 Stream.Seek 方法，而 HttpResponse.OutputStream 不能以这种方式工作。

# ruby-on-rails - 是否可以在没有模型/数据库的情况下使用 gmaps4rails？

> ID：13049219
> 
> 赞同：2
> 
> 时间：2012-10-24T12:28:19.283
> 
> 标签：ruby-on-rails, google-maps, gmaps4rails

据我从[gmaps4rails gem](https://github.com/apneadiving/Google-Maps-for-Rails/wiki)的文档和自述文件中可以看出，您需要将模型设置为acts_as_gmappable 才能使用此包装器。

在我的情况下，我使用简单的 form_tag 和 text_field_tag 元素来收集我想要显示的地址，然后我想通过包装器传递它以呈现谷歌地图。我没有将收集到的数据存储在数据库或模型中。

我的问题是：

1.  这可以用 gmaps4rails 完成吗？如果是的话，你能指导我看一个无模型用例的例子，或者给我任何关于如何做到这一点的提示吗？
2.  如果不能用 gmaps4rails 完成，是否还有另一个可以工作的 gem/wrapper？（我最终想显示路线和方向）

我知道我可以使用原始的 Google Maps JS V3 API，但是如果可能的话，我会尝试将它保留在 Rails 中，因为我是一个完全的新手（决定学习 Rails 并自己制作原型以吸引技术联合创始人），似乎使用包装器比尝试与 API 集成更容易。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:38:25.133

你可以用 gmaps4rails 做到这一点。

无需对`acts_as_gmappable`地址进行地理编码。

只需为视图提供如下内容：

```
@markers_json = [{lat: , lng:, description: }, {lat: , lng:, description: }].to_json 
```

`description`将显示在信息窗口中。

# android - 从静态 ListFragment 中构造 DialogFragment

> ID：13049221
> 
> 赞同：0
> 
> 时间：2012-10-24T12:28:26.733
> 
> 标签：android, android-fragments, actionbarsherlock

我正在使用**Actionbarsherlock**并在我的 Fragment 活动中有一个**ListFragment**和一个**DialogFragment 。**

```
 public class RemainingTasks extends SherlockFragmentActivity{
        public static class CurrentListFragment extends SherlockListFragment{
                 //##need to call addDialog() from within one of the methods here
            }

    public void addDialog() {
          //Create and show the dialog.
          DialogFragment newFragment = MyDialogFragment.newInstance();
          newFragment.show(ft, "dialog");
    }

    public static class MyDialogFragment extends SherlockDialogFragment{

    }
} 
```

现在，我需要从静态**CurrentListFragment**`addDialog()`中调用该方法（这将显示一个新对话框），但无法调用。

 **我尝试了什么：

1.  当我做 a`getActivity()`时，我最终得到的是 SherlockActivity，而不是 FragmentActivity。

2.  无法调用`getSupportFragmentManager()`（错误：对非静态方法的静态引用）

有没有办法做到这一点？另外，我的方法是正确的，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:49:06.713

固定的。将以下函数移至我的 MainActivity（它扩展了 SherlockFragmentActivity，并充当`RemainingTasks`片段的宿主）

```
public void addDialog() {} 
```

和

```
public static class MyDialogFragment extends SherlockDialogFragment{

    } 
```

然后我现在用`((MainActivity)getActivity()).addDialog()`**

# java - Java HashMap - 深拷贝

> ID：13049222
> 
> 赞同：19
> 
> 时间：2012-10-24T12:28:27.190
> 
> 标签：java, hashmap, deep-copy

我只是想找出如何制作深拷贝的最佳解决方案`HashMap`。此地图中没有实现 的对象`Cloneable`。我想找到比序列化和反序列化更好的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T12:38:09.887

看看*Deep Cloning*，在 Google Code 上你可以找到一个库。[您可以在https://github.com/kostaskougios/cloning](https://github.com/kostaskougios/cloning)上阅读它。

它的工作原理很简单。这可以克隆任何对象，并且对象不必实现任何接口，如可序列化。

```
Cloner cloner = new Cloner();
MyClass clone = cloner.deepClone(o);
// clone is a deep-clone of o 
```

但请注意：这可能会克隆数千个对象（如果克隆的对象有那么多引用）。此外，复制文件或流可能会使 JVM 崩溃。

但是，您可以忽略某些类的实例，例如流等。值得检查这个库及其来源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:34:58.727

我认为它不能以通用方式实现。

*   如果您有机会简单地实现克隆，我会这样做。
*   更复杂的是创建一个类型映射，您可以在其中根据每个对象的类查找某种克隆实现类
*   当对象可能形成有向无环图时，我通常会保留一个从原始到我见过的每个对象的克隆的 Map，并检查我是否已经制作了它
*   当你有一个通用图表时，问题会变得非常糟糕。您可能对对象创建顺序有奇怪的限制，当您有最终字段时甚至可能是不可能的。

现在，我建议以一种不太一般的方式重写你的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-04T08:31:11.983

这并不容易，我们正在使用某种解决方法：

1）将地图转换为json字符串。（例如，使用 Google Gson）

2）将json字符串转换回map。

请注意存在性能问题，但这是一种最简单的方法。

# c# - 为什么 Marshal.DestroyStructure 被认为是纯的？

> ID：13049227
> 
> 赞同：6
> 
> 时间：2012-10-24T12:28:54.000
> 
> 标签：c#, .net, unmanaged, code-contracts

Marshal.DestroyStructure 在 .NET Framework 中被标记为 Pure 属性，但我不确定为什么它明显对调用它的上下文有影响。

状态被修改（指针被释放），即使它不直接修改指针实例本身。

问题中隐含的是：开发人员是否可以善意地将某些东西标记为纯，即使她知道它间接修改了上下文的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:09:48.050

从某种意义上说它是纯的，它对可见的托管状态没有影响，这意味着，出于代码契约的目的，调用该方法不能违反类不变量。

诚然，将方法视为纯方法有点误导，因为它确实有副作用，即使这些副作用是不可见的。它们是可观察的（如果您在释放指针后尝试使用指针，则会导致失败），但并不完全可见（如果不尝试使用指针就无法判断出问题所在。）我不确定将方法标记为 Pure 的动机是什么，因为我不明白为什么它会在 Contracts 块中使用，但我猜在 BCL 合约的深处一定有某种原因需要它。

# intellij-idea - 搜索子类方法的用法

> ID：13049233
> 
> 赞同：6
> 
> 时间：2012-10-24T12:29:14.570
> 
> 标签：intellij-idea

我有父类 Parent 方法`getToken()`。而且我有它的子类 - `ChildA`and `ChildB`，它不会覆盖 method `getToken()`。

如何搜索`getToken()`类实例使用的方法的用法`ChildA`？

对不起我的英语不好。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-04-08T12:30:07.043

由于我花了半个小时通过所有复杂和过时的文档和示例找到确切的解决方案，我只是在这里使用 SSR （Intellij 15.0.5）提供了完整的答案：

打开 SSR 对话框（Edit > Find > Search Structurally...）并在屏幕截图中输入模板，然后单击“Edit variables...”以查看第二个对话框并编辑“Expression type (regexp)”，如图所示：

[![在此处输入图像描述](../Images/2d8deead69c75680f656aae60874c4f4.png)](https://i.stack.imgur.com/C5S2Y.png)

如果您也想包含 ChildA 的子类，只需选中表达式类型下方的“在类型层次结构中应用约束”框：

[![在此处输入图像描述](../Images/ff79404890268e3c1b499cb5d5a37962.png)](https://i.stack.imgur.com/uXnIh.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T13:26:35.807

您可以添加`getToken()`到`ChildA`，仅对该方法执行搜索，然后将其删除。另一种方法是使用[结构搜索和替换](http://wiki.jetbrains.net/intellij/Basics_of_working_with_structural_search)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T09:59:20.090

`Ctrl`如果您使用++++进行搜索， `Alt`Intellij会询问此问题。首先，正如 CrazyCoder 建议的那样，您必须显式覆盖子类/子接口中的方法。`Shift``F7`

# php - 创建 Google 联系人 --> 为什么只有“NAME”没有插入新联系人？

> ID：13049238
> 
> 赞同：4
> 
> 时间：2012-10-24T12:29:25.087
> 
> 标签：php, oauth, google-api, oauth-2.0, google-api-client

**这是我提出的要求**：-

```
 // create new entry
$doc = new DOMDocument();
$doc->formatOutput = true;

$entry = $doc->createElement('atom:entry');
$entry->setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:atom', 'http://www.w3.org/2005/Atom');
$entry->setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:gd', 'http://schemas.google.com/g/2005');
$doc->appendChild($entry);

$cat = $doc->createElement('atom:category');
$cat->setAttribute('scheme', 'http://schemas.google.com/g/2005#kind');
$cat->setAttribute('term', 'http://schemas.google.com/contact/2008#contact');
$entry->appendChild($cat);

// add name element
$name = $doc->createElement('gd:name');
$entry->appendChild($name);
$givenName = $doc->createElement('gd:givenName', $_POST['fname']);
$familyName = $doc->createElement('gd:familyName', $_POST['lname']);
$fullName = $doc->createElement('gd:fullName', $_POST['fname'] . $_POST['lname']);
$name->appendChild($givenName);
$name->appendChild($familyName);
$name->appendChild($fullName);

$content = $doc->createElement('atom:content', 'Notes');
$content->setAttribute('type', 'text');
$entry->appendChild($content);
// add email element
$email = $doc->createElement('gd:email');
$entry->appendChild($email);
$email->setAttribute('address', $_POST['email_id']);
$email->setAttribute('displayName', $_POST['fname']);
$email->setAttribute('primary', 'true');
$email->setAttribute('rel', 'http://schemas.google.com/g/2005#work');

// add im element
$im = $doc->createElement('gd:im');
$entry->appendChild($im);
$im->setAttribute('address', $_POST['email_id']);
$im->setAttribute('protocol', 'http://schemas.google.com/g/2005#GOOGLE_TALK');
$im->setAttribute('primary', 'true');
$im->setAttribute('rel', 'http://schemas.google.com/g/2005#home');
// add phone element
$ph = $doc->createElement('gd:phoneNumber', $_POST['phone']);
$entry->appendChild($ph);
$ph->setAttribute('rel', 'http://schemas.google.com/g/2005#home');

//insert Address
$address = $doc->createElement('gd:structuredPostalAddress');
$address->setAttribute('primary', 'true');
$address->setAttribute('rel', 'http://schemas.google.com/g/2005#work');
$entry->appendChild($address);
$postal = $doc->createElement('gd:postcode', $_POST['postal']);
$country = $doc->createElement('gd:country', $_POST['country']);
$fulladd = $doc->createElement('gd:formattedAddress', $_POST['address']);
$address->appendChild($postal);
$address->appendChild($country);
$address->appendChild($fulladd);

return $doc->saveXML(); 
```

我的 curl POST 数据代码是：-

```
$url = 'https://www.google.com/m8/feeds/contacts/default/full?oauth_token=' . $accesstoken;
        $curl = curl_init();
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_POST, 5);
        curl_setopt($curl, CURLOPT_POSTFIELDS, $contact_detail);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE);

        $curlheader[0] = "Content-Type: application/atom+xml";
        $curlheader[2] = "Content-length:" . strlen($contact_detail);
        $curlheader[1] = "Content-Transfer-Encoding: binary";
        curl_setopt($curl, CURLOPT_HTTPHEADER, $curlheader);

        $xmlresponse = curl_exec($curl); 
```

这里`$contact_detail`只是上面生成的 XML。并成功创建新联系人，但无法添加联系人姓名。

请建议我更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T16:14:45.260

尝试在您的授权请求标头中设置“ **GData-Version:3.0** ”，或在您的请求 URL (?v=3) 中指定当前 API 版本，这可能会有所帮助。

# javascript - jquery侧类别菜单

> ID：13049239
> 
> 赞同：0
> 
> 时间：2012-10-24T12:29:29.927
> 
> 标签：javascript, jquery, asp.net

我已经创建了一个动态侧面类别菜单.....在 jquery 中，但它有时不能正常工作......我不知道背后的原因，，，，我给出了静态代码（从萤火虫中挑选） . 请尽快看到它&如果**代码可以更好并且菜单可以**比它更流畅地工作（给定），那么请提供我该代码或链接... **thnku**

**javascript（带有静态ID等）**

**问题：**

**如果我快速多次在该 li 上悬停，它会向上滑动和向下滑动重复次数与悬停在其上的次数一样多.......... ??????????**

```
 $(document).ready(function () { $(' #cate_id2 > ul').show(); });
        $(document).ready(function () {
            $(' #cate_id2 > ul > #subcate_id4 > div').hide();

            $(' #cate_id2 > ul > #subcate_id4 ').hover(function () {
                $(' #cate_id2 > ul > #subcate_id4 > div').slideDown("fast");
            },

           function () {
               $(' #cate_id2 > ul > #subcate_id4 > div').slideUp("fast");
           });
        }); 
```

**html（静态代码）**

```
 <li id="cate_id2">
               <a href="CateProducts.aspx">Laptops &amp; Notebooks</a>  
            <ul style="display: block;">
               <li id="subcate_id3">
                     <a href="SubCateProducts.aspx"> MACS</a>
               </li>
               <li id="subcate_id4">
                     <a href="SubCateProducts.aspx"> Windows</a>
                <div style="border: 1px solid black; display: none;">
                   <ul style="border: 1px solid black; display: block;">
                      <li><a href="SubSubCateProducts.aspx">notebook</a></li>
                      <li><a href="SubSubCateProducts.aspx">probook</a></li>
                   </ul>
                </div>
               </li>
             </ul>
          </li> 
```

如果你能给我提供代码，那么上面给出的更好，我会自己将那个（你的）代码转换成动态的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:36:29.063

你可以更清洁：

```
$(function () {
   $('#cate_id2 > ul').show();
   $('#cate_id2 > ul > li')
        .on('mouseover', function () {
            $(this).find('div').stop(true, true).slideDown();
        })
        .on('mouseout', function () {
            $(this).find('div').stop(true, true).slideUp();
        });
}); 
```

# powerpoint - 使用投影仪的两个单独的 Powerpoint？

> ID：13049241
> 
> 赞同：0
> 
> 时间：2012-10-24T12:29:36.780
> 
> 标签：powerpoint

我想要做的是将我的笔记本电脑连接到投影仪并使其成为扩展，而扩展（投影仪）显示我的 Powerpoint 的幻灯片，我的笔记本电脑中也显示了不同的幻灯片。这样我就可以查看我的笔记本电脑，显示我每张幻灯片的演讲笔记。我想要它，以便当我转到幻灯片中的幻灯片 1（由投影仪显示）时，我在幻灯片 1 中的演讲笔记将显示在我的笔记本电脑中。那可能吗？我可能实际上可以根据我的需要制作一个程序，但我想知道是否已经有一种方法，如果没有，可以使用哪些替代方法来实现类似的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:34:28.103

您可以在 PowerPoint 中写笔记，然后切换到“演示者视图”。

这将在外接显示器上显示您的幻灯片，并在笔记本电脑屏幕上显示您的笔记 + 即将播放的幻灯片的微型预览。

另请参阅[http://office.microsoft.com/en-us/powerpoint-help/presenter-view-tools-for-running-a-powerpoint-presentation-HA001056547.aspx](http://office.microsoft.com/en-us/powerpoint-help/presenter-view-tools-for-running-a-powerpoint-presentation-HA001056547.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T05:04:24.343

当您连接到投影仪时，您必须选择扩展模块（例如，在索尼实验室选项卡中按 FN+F7 并选择扩展模块），然后在幻灯片放映中的电源点中选择监视器->双监视器。同样在 Office 2013 中，当您连接到投影仪时，它会自动执行类似的操作。

# request - 打开 Graph 请求修饰符 'With'

> ID：13049244
> 
> 赞同：0
> 
> 时间：2012-10-24T12:29:56.470
> 
> 标签：request, facebook-opengraph

在发出开放图形请求时，是否有任何关于使用“with”修饰符的信息/文档？...我到处找，什么也找不到。

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:12:16.307

据我所知，目前的用法是

```
with=location 
```

这可用于用户的[提要](http://developers.facebook.com/docs/reference/api/user/#feed)、主页或帖子

```
https://graph.facebook.com/me/feed?with=location
https://graph.facebook.com/me/home?with=location
https://graph.facebook.com/me/posts?with=location 
```

我相信它只适用于用户，而不适用于页面。

# c# - 如何根据区域设置中定义的语言本地化 DatePicker 的日期格式

> ID：13049252
> 
> 赞同：4
> 
> 时间：2012-10-24T12:30:12.380
> 
> 标签：c#, wpf, datepicker

我的机器上安装了英语 Windows 7，并且选择的默认语言是英语（使用“区域和语言设置”）。当我阅读`DateTimeFormat.ShortDatePattern`使用以下 C# 语句时：

```
System.Threading.Thread.CurrentThread.CurrentUICulture.DateTimeFormat.ShortDatePattern 
```

我得到了这个结果

```
"M/d/yyyy" 
```

我也试过这个语句，仍然得到相同的字符串。

```
System.Globalization.CultureInfo.CurrentUICulture.DateTimeFormat.ShortDatePattern  
"M/d/yyyy" 
```

但是，现在我将语言从“区域和语言设置”更改为丹麦语。现在，如果我切换到“格式”选项卡并在短日期格式下显示`"M/d/åååå"`哪个已本地化为丹麦语。这意味着通过更改语言，日期时间格式也会发生变化。

但是，在我的应用程序中，即使加载的 CurrentUICulture 是正确的，即丹麦语的 da-DK，我仍然会得到上述英文格式字符串。我想显示本地化的 ShortDateFormat，如区域设置中所示。我是否需要自己进行本地化，或者是否有任何构建方法可以做到这一点。如果我在这里遗漏了什么，请告诉我。

编辑：添加此信息是为了根据与彼得的讨论进一步澄清问题。

格式组合框说丹麦语（丹麦）。格式读得很好，即丹麦语，但字符串仍然显示 M/d/yyyy 而不是 M/d/åååå。这是我想在 DatePicker 控件中显示的确切字符串 M/d/åååå。换句话说，水印应该显示本地化的 ShortDatePattern。还在挣扎...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:13:43.150

尝试设置 CurrentCulture，而不是 CurrentUICulture。例如：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("da-DK"); 
```

CurrentUICulture 指定应用程序需要的资源。

CultureInfo 指定日期、时间、数字、货币值、文本排序顺序、大小写约定和字符串比较的默认格式，并且是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-07T23:57:31.373

Here is a C# example of what you can do. (Dump is a linqpad extension method which you can ignore in your own code).

A full list of date format string is available [here](https://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo(v=vs.90).aspx)

```
var languages =  new List<string>{"de-DE", "en", "es-ES", "es-MX", "fr-FR", "it-IT", "pt-BR", "sv-SE"};
    var date = DateTime.Now;
    languages.Select (l => new {
        Lang=l,

        d_shortDate =  date.ToString("d", new CultureInfo(l)),
        D_longDate =  date.ToString("D", new CultureInfo(l)),
        g_generalDate1 =  date.ToString("g", new CultureInfo(l)),
        m =  date.ToString("m", new CultureInfo(l)),
        y =  date.ToString("y", new CultureInfo(l)),
        dd = date.ToString("dd", new CultureInfo(l)),
        mm = date.ToString("mm", new CultureInfo(l)),
        yy = date.ToString("yy", new CultureInfo(l)),
    }) .Dump(); 
```

[![Date formats](../Images/fa9e49b7f9ac9a045ba8550d0c027075.png)](https://i.stack.imgur.com/Bbcc5.png)

# c - 尝试释放二维数组时堆损坏

> ID：13049254
> 
> 赞同：0
> 
> 时间：2012-10-24T12:30:23.817
> 
> 标签：c, heap-memory, heap-corruption

为什么执行此代码时堆会损坏？我还没有过多地使用内存分配。

```
#include <stdlib.h>

void main()
{
    char **field, x, _fieldsX, _fieldsY;

    _fieldsX = 8;
    _fieldsY = 16;

    // Allocation
    field = malloc(sizeof(char*) * _fieldsX);
    for (x = 0; x < _fieldsY; x++)
        field[x] = malloc(sizeof(char) * _fieldsY);

    // Freeing
    for (x = 0; x < _fieldsY; x++)
        free(field[x]);
    free(field);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:33:02.480

您在第一个循环中超出了分配区域的范围：

```
field = malloc(sizeof(char*) * _fieldsX);

for (x = 0; x < _fieldsY; x++)
    field[x] = malloc(sizeof(char) * _fieldsY); 
```

请注意，您正在分配`_fieldsX`项目，但循环`_fieldsY`在该区域上运行了多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:35:40.413

代码将字段分配为 _fieldsX 长度，但设置 _fieldsY 元素。这是不正确的。

# mysql - 在 30,000 多个数据集之间查找匹配项

> ID：13049261
> 
> 赞同：-1
> 
> 时间：2012-10-24T12:30:49.500
> 
> 标签：mysql, sql, algorithm, graph-algorithm

为简单起见，让我们使用 3 种颜色和相应数字的案例示例（尽管现实生活中实际上有 30,000 多种不同的“颜色”和 254 种不同的“数字”）

红色 - 0、1、2、3、10、15

绿色 - 0、2、3、20

蓝色 - 2、10、11、12

我想找到它们之间的匹配项（rgb、rg、rb），并记录集合之间共享的#s 数量：

RGB = 1

rg = 2

rb = 2

最后，它需要确定共享的#s 数量与集合中不同#s 数量的比率。

rgb = 1/9（因为它有一个不同的：0、1、2、3、10、11、12、15、20）

rg = 2/7 (0, 1, 2, 3, 10, 15, 20)

rb = 2/8 (0, 1, 2, 3, 10, 11, 12, 15)

* * *

所以总输出将是

比赛 | # 匹配数 | % |

RGB | 1 | 1/9

rg | 2 | 2/7

RB | 2 | 2/8

* * *

我能够提出的算法是您在表格中拥有每种颜色并映射与之关联的数字（又名红色（表格名称）、0、1、2、3、10、15（数据））。然后取“数字”最多的颜色，并将其与其他颜色的小时数进行比较，找到匹配项。完成该颜色后，您可以 100% 忽略它并移至下一种颜色并与 n-1 进行比较。

举个例子：

1) 选择红色

2) 其他颜色是否共享 0

3) 是否有其他颜色共享 1

....ETC

4）选择蓝色 5）任何其他颜色减去红色共享.....

我知道必须有一种更有效的方法来做到这一点，有什么建议吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:11:45.933

由于只有 254 个（如果您的 0-254 注释正确，则为 255 个），因此您可以将每个“颜色”的“数字”集表示为 256 位整数。那么 r 和 g 的共享数字的数量只是（r 和 b）的位数，不同数字的数量是（r 或 b）的位数，所以使用你的例子，

如果 R 是红色的位集，G 是 B 的位集等：

```
match | # of matches            | %                                             |
rgb   | bitcount(R and G and B) | bitcount(R and G and B)/bitcount(R or G or B) |
rg    | bitcount(R and G)       | bitcount(R and G)/bitcount(R or G)            |
rb    | bitcount(R and B)       | bitcount(R and B)/bitcount(R or B)            | 
```

# asp.net - 损坏后恢复 ASPX 文件

> ID：13049266
> 
> 赞同：0
> 
> 时间：2012-10-24T12:31:00.373
> 
> 标签：asp.net, visual-studio-2010, corruption, recover

我真的希望你能提供帮助...... Visual Studio 2010 今天早上早些时候在我身上崩溃了。通常情况下，当这种情况发生时，我会选择恢复文件，不幸的是，这从未出现过，当我打开解决方案时，我正在处理的 aspx 页面丢失了大约 99% 的编码（近一周工作 4000 行！！！ ）。

我已经签入了 Visual Studio 文件夹，并且没有备份文件，因此路由不在窗口中。由于某种原因，与该 aspx 文件关联的 .cs 文件很好，但 aspx 代码不见了。令人讨厌的是，这个页面已经被困在版本控制中，但还没有提交（是的，我知道，生活和学习......）所以这个选项也在窗外。

我曾尝试使用 .NET Reflector 对 dll 文件进行逆向工程，但这只会让我返回我已经拥有的 .cs 文件。

所以我想我真正要问的是......无论如何要恢复 aspx 页面而不仅仅是 .cs 文件？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:35:50.123

除非您有备份或将 ASPX 文件提交到源代码控制（例如 TFS、git、SVN），否则该文件可能会丢失。

即使您的组织不赞成提交部分实现的代码，您也可以始终使用自己的源代码控制系统，例如本地 git 或 SVN 存储库。它现在对您没有帮助，但将来可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:54:50.697

一种快速而肮脏的方法是，如果您正在预览页面，则复制该页面的源并粘贴到您的 aspx 页面中。

如果不是，那么我很遗憾地说您丢失了更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T14:05:38.970

您可以尝试在您的系统上进行文件搜索，以查找正确时间段的临时文件。当然，不能保证，但它可能仍然存在，即使 VS 没有保留它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T04:32:38.717

在这里查看我的答案：[在保存文件之前在计算机重新启动时丢失了 ASPX 页面的内容](https://stackoverflow.com/questions/16344290/lost-the-content-of-aspx-page-on-computer-restart-before-saving-the-file/16740939#16740939)

下次你会得救的......：D

# javascript - 使用提交的表单填充表格 (javascript)

> ID：13049268
> 
> 赞同：0
> 
> 时间：2012-10-24T12:31:06.903
> 
> 标签：javascript, appendchild

我正在尝试学习javascript，但到目前为止我完全停止了。我制作了一个带有表单的 html 网页（3 个字段：姓名、姓氏、性别）和下表。我正在尝试列出用户在该表单中输入的数据，并使用 javascript (appendChild) 在表格下方显示

我怎么能轻松做到这一点？高度赞赏示例。

```
<HTML>
  <HEAD>
    <TITLE>Test1</TITLE>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
    <link rel="stylesheet" href="style.css" type="text/css" />

    <script language="javascript">

function addRow(){
...

    </script>

  </HEAD>
  <BODY>

<form>
Name:<br>
<input type="text" id="name"><br>
Last Name: <br> 
<input type="text" id="lname"><br>
Gender: <br>
<input type="text" id ="gender"> <br>
<input type="submit" id ="submit" value="Submit" onclick="addRow()">
</form> 

<table border="1">
<tr>
<th>Name</th>
<th>Last Name</th>
<th>Age</th>
</tr>
<tr>
<td>test, test</td>
<td>test, test</td>
</tr>
<tr>
<td>test2, test1</td>
<td>test2, test1</td>
</tr>
</table>

  </BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:58:29.027

**第1步：**

给你的表一个标识符：

```
<table border="1" id="results"> 
```

**第2步：**

获取对该表的 DOM 引用：

```
var table = document.getElementById('results'); 
```

**第三步：**

制作您将插入的元素：

```
var row = document.createElement('tr');
var td1 = document.createElement('td');
var td2 = document.createElement('td');
var td3 = document.createElement('td'); 
```

**第4步：**

设置它们的值：

```
td1.innerHTML = document.getElementById('name').value;
td2.innerHTML = document.getElementById('lname').value;
td3.innerHTML = document.getElementById('gender').value;
row.appendChild(td1);
row.appendChild(td2);
row.appendChild(td3); 
```

**第五步：**

插入 DOM：

```
table.children[0].appendChild(row); 
```

结合起来，我们有：

```
function addRow(){
    var table = document.getElementById('results');
    var row = document.createElement('tr');
    var td1 = document.createElement('td');
    var td2 = document.createElement('td');
    var td3 = document.createElement('td');
    td1.innerHTML = document.getElementById('name').value;
    td2.innerHTML = document.getElementById('lname').value;
    td3.innerHTML = document.getElementById('gender').value;
    row.appendChild(td1);
    row.appendChild(td2);
    row.appendChild(td3);
    table.children[0].appendChild(row);
} 
```

如果要添加一行，可以使用以下内容：

```
table.children[0].insertBefore(row,table.children[0].childNodes[1]); 
```

而不是`appendChild`用来追加行。其余的都是一样的。请参阅[此](http://jsfiddle.net/xnWSV/6/)示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:50:07.387

这是我的尝试：

[**小提琴**](http://jsfiddle.net/xnWSV/)

JavaScript：

```
(function setup() {
    "use strict";

    var fNameElem = document.getElementById("fName");
    var lNameElem = document.getElementById("lName");
    var genderElem = document.getElementById("gender");
    var ageElem = document.getElementById("age");
    var tableElem = document.getElementById("table");
    document.getElementById("display").addEventListener("click", function () {
        var newRow = tableElem.insertRow(-1);
        var newCell = newRow.insertCell(0);
        var newText = document.createTextNode(lNameElem.value + ", " + fNameElem.value);
        newCell.appendChild(newText);
        newCell = newRow.insertCell(1);
        newText  = document.createTextNode(genderElem.value);
        newCell.appendChild(newText);
        newCell = newRow.insertCell(2);
        newText  = document.createTextNode(ageElem.value);
        newCell.appendChild(newText);
        fNameElem.value = "";
        lNameElem.value = "";
        ageElem.value = "";
        tableElem.value = "";
    });
})();​ 
```

HTML：

```
First Name:<br>
<input type="text" id="fName" /><br>
Last Name: <br> 
<input type="text" id="lName" /><br>
Gender: <br>
<input type="text" id="gender" /><br>
Age: <br>
<input type="text" id ="age" /> <br>
<input type="button" id ="display" value="Display" /><br>
<table id= "table" border="1">
<tr>
<th>Name</th>
<th>Gender</th>
<th>Age</th>
</tr>
</table> 
```

# c++ - Visual Studio：如何在不弹出控制台窗口的情况下启动项目

> ID：13049269
> 
> 赞同：3
> 
> 时间：2012-10-24T12:31:18.247
> 
> 标签：c++, visual-studio, ide

> **可能重复：**
> [隐藏 Windows 应用程序的控制台](https://stackoverflow.com/questions/2139637/hide-console-of-windows-application)

所以我通过lazyfoo的教程为Visual Studio安装了opengl。
当我运行项目时，我得到 2 个菜单。
一个是老式的控制台窗口，一个是游戏窗口。
我想在没有控制台窗口的情况下启动我的项目。我应该如何实现这一目标？
在lazyfoo中，他告诉我将链接器/子系统设置更改为windows，这样控制台就不会弹出，但是当我这样做时，我得到了这个奇怪的错误。
有没有更好的方法来防止控制台窗口弹出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:47:37.247

这是我希望有帮助的东西！:[使我的控制台应用程序不可见](https://stackoverflow.com/questions/3497652/making-my-console-application-invisible)

隐形算不算不存在？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:55:23.647

您的问题已在教程中得到解答。

> 在 System 菜单中的 Linker 下，设置子系统。如果您不想要控制台输出，我建议将其设置为 windows，如果您确实想要控制台输出，我建议将其设置为控制台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:04:58.550

我在这里回答：

[https://stackoverflow.com/a/6882500/524368](https://stackoverflow.com/a/6882500/524368)

全文引用如下：

* * *

在项目构建链接器选项集中

```
/SUBSYSTEM:windows
/ENTRY:mainCRTStartup 
```

或者在源文件中使用以下*#pragma*`int main(...)`

```
#pragma comment(linker, "/SUBSYSTEM:windows /ENTRY:mainCRTStartup") 
```

# javascript - JSON stringify 在从 Dreamweaver 中预览时有效，但在创建应用程序时从 .AIR 文件中无效

> ID：13049270
> 
> 赞同：1
> 
> 时间：2012-10-24T12:31:19.810
> 
> 标签：javascript, html, json, air, dreamweaver

我一直在使用 HTML 和 javascript 版本的 Adob​​e AIR 开发一个简单的应用程序。

应用程序向在线 URL 提交表单。

表单的值是 JSON 字符串。

我正在使用此功能提交数据：

```
function fetchStudents()
{

    var stmt = new air.SQLStatement();
        stmt.sqlConnection = conn;
        stmt.text = "SELECT * FROM studentsTable2 WHERE deleted='0'";
        stmt.addEventListener(air.SQLEvent.RESULT, function(event){ 

            var result = event.target.getResult();
            sync_students = JSON.stringify(result.data);

            fetchCourses(); 
        });
        stmt.addEventListener(air.SQLErrorEvent.ERROR, errorHandler);
        stmt.execute();
} 
```

`JSON.stringify`当我使用以下方法在 DREAMWEAVER 中测试应用程序时工作：在 ADOBE AIR 中预览。

`sync_students`然后是一个 JSON 字符串，其中填充了正确格式化的表中的所有数据。

但是，当我创建了 AIR 文件并安装了应用程序并运行它时，它就不再工作了。

`sync_students`然后是一个 JSON 字符串，但它是完全空的......`[{},{},{}]`

我已经阅读了很多，看到了使用 JSON2.js 等的建议，我已经尝试了这些，但我没有成功。

这让我发疯，任何帮助将不胜感激。

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:11:52.103

看看这个问题的公认答案。这里的问题是垃圾收集“太快”回收了一些 var：换句话说，范围是 baaad。：

[AIR Sqlite：SQLEvent.RESULT 未触发，但语句正在正确执行](https://stackoverflow.com/questions/3330971/air-sqlite-sqlevent-result-not-firing-but-statemet-is-executing-properly)

编辑：所有这些都是范围问题。您应该查看“javascript 范围”和“javascript 闭包”关键字以更好地理解这一点（如果我可能建议的话）。

下面只是一个（非常）简短的总结，关于在*javascript*中定义“类”的一种方法：

```
var MyNameSpace = {};  
var MyNameSpace.SchoolDataSource = function() {
  this.publicMember = 2;
  this.publicFunction = function(x) {
        var newValue = this.publicMember + _privateMemberOne + x;   
        return _privateFunctionMul2(newValue); 
     } ;
  var _privateMemberOne = 1;
  var _privateFunctionMul2 = function (y) { return 2*y; } ;
};

var mySchoolDataSource = new MyNameSpace.SchoolDataSource();

mySchoolDataSource.publicFunction(3); // ok. (returns (3+2+1) * 2 = 12)
var bar = mySchoolDataSource.publicMember; // ok. ( === 2)
mySchoolDataSource._privateFunctionMul2(4); does not work, which is what we want.
var foo= mySchoolDataSource._privateMemberOne; // does not work, which is what we want. 
```

# joomla - joomla 3.0 tiny mce 编辑器问题

> ID：13049275
> 
> 赞同：1
> 
> 时间：2012-10-24T12:31:35.007
> 
> 标签：joomla

我正在使用 joomla 3.0。在保存任何文章转义序列时都会插入到文本中。例如：

```
<div class="txt">Hello</div> 
```

这条线变成

```
<div class=\"txt\">Hello</div> 
```

我不知道如何摆脱这些转义序列。请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:41:23.567

在 Joomla 3 中，您需要禁用魔术引号。您可能需要询问您的主机如何做到这一点，程序因主机而异，但最终您需要在某处修改或添加 php.ini 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:25:08.933

我通过 forum.joomla.com 查看了有关摆脱 Joomla 3 魔术引号的信息，并且我尝试了该论坛中的所有建议，但都没有运气。但是当我向我的托管服务提供商 (ventraip.com.au) 记录一张票时，我立即得到了解决方案。他们的建议是使用他们的 PHP.INI 定制工具。所以最终解决方案是立竿见影的，但那是在浪费了几个小时手动修改 php.ini 和 .htaccess 之后，正如 Joomla 论坛中所建议的那样。

所以总而言之，我和艾琳的观点是一样的。请联系您的托管服务提供商。

# nunit - NUnit 测试未执行

> ID：13049279
> 
> 赞同：2
> 
> 时间：2012-10-24T12:31:54.557
> 
> 标签：nunit, teamcity, teamcity-7.0

我正在尝试配置 TeamCity 来运行我们拥有的测试。

我创建了一个 NUnit 构建步骤，并选择了以下参数：

运行器类型：NUnit 步骤名称：测试 执行步骤：仅当所有先前的步骤都成功时 NUnit 运行器：NUnit 2.6.1 .NET 运行时：x64，v4.0 从以下位置运行测试：'Tests**\bin\Debug\Tests.* .dll'

其余为空白。

这是构建日志中的输出

```
[14:03:31]Step 2/2: Tests (NUnit) (14s)
[14:03:31][Step 2/2] Starting: C:\BuildAgent\plugins\dotnetPlugin\bin\JetBrains.BuildServer.NUnitLauncher.exe #TeamCityImplicit
[14:03:31][Step 2/2] in directory: C:\BuildAgent\work\743f6358429d804a
[14:03:39][Step 2/2] Start TeamCity NUnit Test Runner
[14:03:39][Step 2/2] Running NUnit-2.6.1 tests under .NET Framework v4.0 x64
[14:03:40][Step 2/2] Tests.Application.XmlImport.dll
[14:03:44][Step 2/2] Start TeamCity NUnit Test Runner
[14:03:44][Step 2/2] Running NUnit-2.6.1 tests under .NET Framework v4.0 x64
[14:03:45][Step 2/2] Tests.Infrastructure.Framework.dll
[14:03:45][Step 2/2] Process exited with code 0 
```

为了确保测试没有运行，每个程序集都有一个 Assert.Fail() 测试。

仅供参考：该项目使用 .NET 4.5，NUnit 程序集为 2.6.2

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T11:29:17.800

最后，我发现 TeamCity 没有重新构建测试并且程序集仍在使用 MSTest 属性，因此 NUnit 找不到它们。

# android - ListView 获得新适配器后强制对话框无效

> ID：13049289
> 
> 赞同：2
> 
> 时间：2012-10-24T12:32:35.320
> 
> 标签：android, dialog, adapter, invalidation

我在 Dialog 中有一个 ListView...我有自己的数据适配器，但我的 Dialog 中也有一个 Spinner，在其上创建/更改了适配器。

现在在 Spinner 选择改变时，适配器被创建并且 ListView 的适配器被设置为新的适配器......

一切正常，但我的对话框在适配器更改后并没有使其布局无效，它总是落后一步......这意味着，对话框总是具有它之前在 Spinner 选择时应该具有的大小......

编辑：我只在微调器的 onItemSelected 事件中执行以下操作

```
public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) 
{ 
    if (adapterView.getId() == R.id.spMG) 
    {
        long mg_id = ((MG)sp.getSelectedItem()).getID();
        adapter.clear();
        adapter.addAll(DBDataManager.getExercises(mg_id, true));

        adapter.notifyDataSetChanged();
        ((View)lv).invalidate();
    }
} 
```

我使用了一个 ArrayAdapter，我只是向适配器添加了一个 ArrayList。

# android - 再次单击时，android浏览器不会打开url

> ID：13049303
> 
> 赞同：0
> 
> 时间：2012-10-24T12:33:13.050
> 
> 标签：android

```
HERE İS MY MAİN XML:

<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dp">

<TabWidget
    android:id="@android:id/tabs"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:tag="tabPane" />

<RelativeLayout
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<EditText
    android:id="@+id/address_bar"
    android:layout_width="270px"
    android:layout_height="50px"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="http://" />

<Button
    android:id="@+id/go_Button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/address_bar"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/address_bar"
    android:text="GO" />

<Button
    android:id="@+id/new_Tab"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/go_Button"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/go_Button"
    android:text="NewTab" />

</RelativeLayout>
<FrameLayout
android:id="@android:id/tabcontent"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="2dp" />
</LinearLayout> 
</TabHost> 
```

这是我的主要活动文件：

```
package com.example.androidtablayoutactivity;

import java.net.MalformedURLException;
import java.net.URL;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;
import android.widget.TextView;

public class AndroidTabLayoutActivity extends TabActivity {
    /** Called when the activity is first created. */
    TabHost tabHost;
    TabSpec photospec;
    TabSpec songspec;
    Intent songsIntent;
    Button go;
    Button newTab;
   TextView text;
   Intent photosIntent ;
   private int counter=0;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_android_tab_layout);
       go=(Button)findViewById(R.id.go_Button);
       newTab=(Button)findViewById(R.id.new_Tab);
       text=(TextView)findViewById(R.id.address_bar);
       tabHost = getTabHost();
       go.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            // Tab for Photos
            go();
        }
    });

    }
    public void go(){
         photospec = tabHost.newTabSpec("");
            // setting Title and Icon for the Tab
         URL url = null;
        try {
            url = new URL( text.getText().toString());
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

            if(counter==0){
                photospec.setIndicator(url.getHost().replace("www."," ").replace(".com"," "));
                photosIntent = new Intent(Intent.ACTION_VIEW);
                photosIntent.setClass(this, PhotosActivity.class);
                photosIntent.putExtra("URL1", text.getText().toString());

            photospec.setContent(photosIntent); 
            tabHost.addTab(photospec);
            }
            else{

                tabHost.getTabWidget().removeView(tabHost.getTabWidget().getChildTabViewAt(0));
                photospec.setIndicator(url.getHost().replace("www."," ").replace(".com"," "));
                photosIntent = new Intent(Intent.ACTION_VIEW);
                photosIntent.putExtra("URL1", text.getText().toString());
                photosIntent.setClass(this, PhotosActivity.class);

            photospec.setContent(photosIntent); 
            tabHost.addTab(photospec);
            }
            counter++;
    }

} 
```

这是我制作浏览器进程的其他活动

```
package com.example.androidtablayoutactivity;

import com.example.androidtablayoutactivity.SongsActivity.web;

import android.app.Activity;
import android.app.TabActivity;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.TabHost;
import android.widget.TextView;
import android.widget.TabHost.TabSpec;

public class PhotosActivity extends Activity{

     WebView web;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photos_layout);

        web=(WebView)findViewById(R.id.web);
        web.setWebViewClient(new web());
        web.getSettings().setJavaScriptEnabled(true);
        Bundle extras = getIntent().getExtras();
        if(extras==null){
            web.loadUrl("");
        }
        else
        {
            web.loadUrl(extras.getString("URL1"));
        }

    }
      public class web extends WebViewClient{

            @Override
            public boolean shouldOverrideUrlLoading(WebView webview,String url){
                webview.loadUrl(url);
                return true;
            }

        }

} 
```

这是它的布局文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <WebView
        android:id="@+id/web"
        android:layout_width="385dp"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

当我第一次单击 go 按钮时，我正在使用 go 和新选项卡按钮在 android 中使用浏览器 mybrowser 将转到我想要的 url 但是当我再次单击时，我的地址不会改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:40:09.417

我正在删除其余部分，因为它不是您要查找的内容， **请**单击[此处](http://sankarganesh-info-exchange.blogspot.in/2011/04/adding-tabs-dynamically-in-android.html)

# mysql - mysql 上的全文搜索，包含 3 个字母的单词

> ID：13049306
> 
> 赞同：9
> 
> 时间：2012-10-24T12:33:20.993
> 
> 标签：mysql, search, full-text-search

我试图在包含“The Zen Circus”的字段中找到“the zen”字符串。我有一个全文索引。

```
select url,name,
,   MATCH(name) AGAINST ( 'zen*' IN BOOLEAN MODE) as A
,   MATCH(name) AGAINST ( '"the zen*"' IN BOOLEAN MODE) as B
,   MATCH(name) AGAINST ('>the* zen' IN BOOLEAN MODE) as C
,   MATCH(name) AGAINST ('thezen*' IN BOOLEAN MODE) as D
,   MATCH(name) AGAINST ('cir*' IN BOOLEAN MODE) as E
,   MATCH(name) AGAINST ('circus*' IN BOOLEAN MODE) as F
from pages where url='thezencircus' 
```

我得到了这个结果：

```
url = thezencircus
name = The Zen Circus
A = 0   (why?)
B = 0   (why?)
C = 0   (why?)
D = 0   (ok)
E = 1   (ok)
F = 1   (ok) 
```

我还在 msyql 配置文件中加入了 ft_min_word_len = 2 。

任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T13:02:09.940

查看这个答案[MySQL全文搜索三个或更少字母的单词](https://stackoverflow.com/questions/1585611/mysql-full-text-search-for-words-with-three-or-less-letters)

> [mysqld]
> ft_min_word_len=3
> 然后你必须重新启动服务器并重建你的 FULLTEXT 索引。

请记住重新启动和重建索引。

* * *

**编辑**
运行`show variables like 'ft_%';`以确认字长与您设置的匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-06T13:21:47.027

Kao 是对的，但这对我一点帮助都没有——为什么？InnoDB 表使用不同的设置 - 尝试更新这个并检查它：

```
 show variables like 'innodb_ft_min_token_size'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-05T16:11:38.460

SELECT *, MATCH (title) AGAINST('$aranan*' IN BOOLEAN MODE) AS score FROM vod WHERE MATCH (title) AGAINST ('$aranan*' IN BOOLEAN MODE) ORDER BY score DESC LIMIT 10

# matlab - 如何通过 MATLAB 与 USB 端口通信？

> ID：13049308
> 
> 赞同：-2
> 
> 时间：2012-10-24T12:33:43.003
> 
> 标签：matlab

我正在为我的最后一年学期工作做项目，我想将数字数据发送到 Arduino -ATMega-328 控制器。我的数据将在 Matlab 中采用这样的形式 `a=0001 b=0010 c=0011 d=0100 e=0101 f=0111`

数据可以在 USB 端口的帮助下传输。所以问题是如何从 MATLAB 通过 USB 传输数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:40:02.110

如果您的控制器接口是 USB 串行接口，您可以像打开任何普通文件一样简单地打开设备端口，然后写入：

```
datastring = 'a=0001 b=0010 c=0011 d=0100 e=0101 f=0111'
fileID = fopen(portname,'w');    // open port with write permissions
fprintf(fileId,'%s',datastring); // write text to port 
```

如果不是这种情况，您可能想在[这里](http://www.mathworks.com/matlabcentral/fileexchange/27843-arduino-io-package-slides-and-examples)或[这里](http://www.mathworks.com/academia/arduino-software/arduino-matlab.html)尝试。

# javascript - 创建类似堆栈的行为是 JavaScript/Node

> ID：13049309
> 
> 赞同：1
> 
> 时间：2012-10-24T12:33:47.953
> 
> 标签：javascript, node.js

所以我有一个看起来像这样的代码块：

```
 stack.forEach(function(element){
    //sys.puts(sys.inspect(element, false, null));
    console.log('-----element start-----');
    console.log(element.type + ':' + element.raw);
    console.log('-----element end-----');

    if(element.children){
      element.children.forEach(function(childElement){
        stack.push(childElement);
      });
    }
  }); 
```

问题是这不像我想的那样，除了一个堆栈来表现，并想知道这是否与 JavaScript 本身有关。我看到的问题是，当我为每个孩子调用 stack.push 以将其添加到堆栈中进行处理时，初始 stack.forEach() 似乎没有拾取它，它只记录到顶级元素. 如果我尝试在此之后直接执行另一个 stack.forEach() ，则它会显示下一级子元素，因此我知道 .push 正在将子元素添加到堆栈中。

似乎 .forEach() 按原样抓取数据，如果它们发生在 foreach 中，则不会获得更新。JavaScript 是这样吗？有没有不同的方法可以完成同样的事情（能够处理顶级元素和它下面的所有级别的子元素）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:26:03.013

你的假设是正确的。ForEach 函数获取数组的快照，并且不会处理任何更新。

您正在尝试实现一个经典的树遍历算法，该算法最容易编码为递归函数，如下所示：

```
 var stack = [];

  function traverse (element) {
    //sys.puts (sys.inspect(element, false, null));
    console.log ('-----element start-----');
    console.log (element.type + ':' + element.raw);
    console.log ('-----element end-----');

    stack.push (element);  // for preorder traversal (parent before children)

    if (element.children)
      element.children.forEach (traverse);

    // stack.push (element);  // for postorder traversal (children before parent)
  };

  traverse (document.body);  // for example 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:22:41.047

是的，[`.forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)仅迭代数组最初具有的范围，它与`.length`值的副本一起使用。如果你想改变这种行为，我推荐一个经典的循环，`length`每次都查询属性：

```
var stack = […];
for (var i=0; i<stack.length; i++) {
    // process stack[i]
    stack.push(…);
} 
```

甚至更类似于列表的行为

```
var stack = […];
while (stack.length) {
    var cur = stack.shift();
    // process cur
    stack.push(…); // with variable arguments, you want to stop somewhen :-)
} 
```

如果您不想/不需要自己维护堆栈，则递归函数是树遍历的正确选择。

# wordpress - 如何更改 wordpress 中的 human_time_diff 函数语言？

> ID：13049311
> 
> 赞同：0
> 
> 时间：2012-10-24T12:33:50.383
> 
> 标签：wordpress, wordpress-theming

我有一个 wordpress 网站，我想在我的帖子列表中添加“X 小时前发布”。我发现这可以通过调用 human_time_diff 函数轻松完成。

问题是它返回英文字符串（例如 2 HOURS）。我的网站是葡萄牙语的，所以我想用葡萄牙语。

如何更改此函数返回的语言？

谢谢，奥斯卡

编辑：我找到[了这个链接](http://limbotech.net/alterando-o-sistema-de-data-do-wordpress-para-o-tempo-humano/)，但这个解决方案很简单，重写了函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:27:59.120

你的wordpress安装是英文还是葡萄牙文？

通常使用葡萄牙语安装会强制 wordpress 使用葡萄牙语文件，然后以正确的葡萄牙语打印时差。原始代码中的函数`_n(...)`用于翻译。

之后您也可以更改安装的语言。

之后更改语言要求您能够更改`wp-config.php`-file。[此处](http://codex.wordpress.org/Installing_WordPress_in_Your_Language#Manually_Installing_Language_Files)描述了进一步的步骤

# matlab - Matlab：帕累托分布的马尔可夫链

> ID：13049316
> 
> 赞同：3
> 
> 时间：2012-10-24T12:34:05.343
> 
> 标签：matlab, markov-chains

我经常使用马尔可夫链来近似一阶自回归过程 AR(1)。现在我想从帕累托分布中提取值。有人知道如何为这种分布构建马尔可夫链吗？关键是我用 n 个网格点来近似 Pareto 的无限状态空间。马尔可夫链模拟的时间序列应该看起来与模拟帕累托分布时的时间序列“相似”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:09:00.577

如果你想从帕累托分布中提取，你为什么不只是反转它的累积密度，并评估它的零和一之间的随机值？

帕累托分布的累积密度比较简单，求逆也没问题（除了输入1，导致理论极限为无穷大）

当然，这只是一种解决方法，并不能完全按照您的要求执行（我认为这更像是一个理论练习）。

# c++ - Lua 项目编译出错 (luabind)

> ID：13049318
> 
> 赞同：5
> 
> 时间：2012-10-24T12:34:12.550
> 
> 标签：c++, visual-studio-2010, compiler-errors, lua, luabind

我试图在 Visual Studio 2010 中使用 Lua + Luabind 制作一些 HelloWorld。我从[这里](http://www.lua.org/ftp/)下载了 Lua src并将它的源文件添加到项目中。然后我下载并添加了[luabind](http://sourceforge.net/projects/luabind/files/luabind/)的源代码。最后添加了 main.cpp。因此，在那之后尝试编译项目并在大多数 luabind 文件中出现错误：

```
error C3861: 'lua_strlen': identifier not found
error C2065: 'LUA_GLOBALSINDEX' : undeclared identifier 
```

请帮助我我做错了什么？我必须将哪些文件添加到项目中？也许一些额外的图书馆？组织 lua 项目的最佳实践是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T12:47:51.963

似乎 luabind 是为 Lua 5.1 编写的，而您已经下载了 Lua 5.2。

# android - 解析xml时使用progressDialog

> ID：13049319
> 
> 赞同：2
> 
> 时间：2012-10-24T12:34:24.570
> 
> 标签：android, xml-parsing, android-asynctask, progressdialog

这是我在 stackoverflow 上的第一篇文章，我是 Android 新手。我已经在论坛上搜索了一个类似的问题，发现了这个问题：[SAX 解析器进度监控](https://stackoverflow.com/questions/5015856/android-sax-parser-progress-monitoring)。但不幸的是，它对我没有帮助。我的应用程序必须在日历中注册事件。我实现的第一件事是推进 xml 文件的下载。您可以在附加的代码中看到这一点。之后，我希望progressDialog 重置并开始跟踪解析的进度。如果这可以通过新的 setMessage() 和百分比值来完成，那就太好了。解析后的数据用于在日历中注册事件，同样使用相同的 progressDialog。

但起初我想知道如何跟踪解析的进度。如果有一些想法会很棒。谢谢

```
public class AddCoursesToCalendar extends Activity {

public static final int progress_bar_type = 0; 
ArrayList<String> selectedCourses;
public ProgressDialog progressDialog;

@Override
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.activity_add_courses_to_calendar);
    if (bundle != null) {
        selectedCourses = bundle.getStringArrayList("selectedCourses");
    }
    new GetDataTask().execute();
}

private Boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if (ni != null && ni.isConnected())
        return true;

    return false;
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case progress_bar_type: 
        progressDialog = new ProgressDialog(this);
        progressDialog.setMessage("Downloading file. Please wait...");
        progressDialog.setIndeterminate(false);
        progressDialog.setMax(100);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.setCancelable(true);
        progressDialog.show();
        return progressDialog;
    default:
        return null;
    }
}

public class GetDataTask extends AsyncTask<String, String, Integer> {

    private static final String URL = "http://10.0.2.2/WIN2.xml";
    private static final String KEY_ITEM = "Item"; 
    private static final String KEY_DAUER = "Duration"; 
    private static final String KEY_ENDE = "End";
    private static final String KEY_SEMESTER_DOZENT = "Location";
    private static final String KEY_RAUMMITSTOCKWERK = "Organizer"; 
    private static final String KEY_START = "Start";
    private static final String KEY_VERANSTALTUNGSNAME = "Subject";

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        onCreateDialog(progress_bar_type);
    }

    @Override
    protected Integer doInBackground(String... params) {

        if (isOnline()) {
            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL, this);
            long id = 0;

            Document doc = parser.getDomElement(xml, this);

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);

            for (int i = 0; i < nl.getLength(); i++){
                Element e = (Element) nl.item(i);

                for (String s : selectedCourses) {
                    if (parser.getValue(e, KEY_VERANSTALTUNGSNAME)
                            .contains(s)) {

                        String dozent = null;
                        int spaceIndex = parser.getValue(e,
                                KEY_SEMESTER_DOZENT).indexOf(" ");
                        int lastIndex = parser.getValue(e,
                                KEY_SEMESTER_DOZENT).length();
                        if (spaceIndex != -1) {
                            dozent = parser
                                    .getValue(e, KEY_SEMESTER_DOZENT)
                                    .substring(spaceIndex, lastIndex);
                        }

                        addEvent(
                                parser.getValue(e, KEY_VERANSTALTUNGSNAME),
                                parser.getValue(e, KEY_START),
                                parser.getValue(e, KEY_ENDE),
                                parser.getValue(e, KEY_DAUER),
                                dozent,
                                parser.getValue(e, KEY_RAUMMITSTOCKWERK),
                                id);

                    } id++;
                }
            }
        } else {
            Toast.makeText(AddCoursesToCalendar.this, "No Connection..",
                    Toast.LENGTH_LONG).show();
        }
        return 1;
    }

      public void doProgress(String value){
            publishProgress(value);
        }

    @Override
    protected void onPostExecute(Integer result) {
        progressDialog.dismiss();
        super.onPostExecute(result);
    }

    protected void onProgressUpdate(String... progress) {
        progressDialog.setProgress(Integer.parseInt(progress[0]));
   }

    protected void addEvent(String title, String start, String end,
            String duration, String organizer, String location, long id) {

        SimpleDateFormat format = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss");
        long startInMillis = 0, endInMillis = 0;
        Date startDate, endDate;
        try {
            startDate = format.parse(start);
            endDate = format.parse(end);
            startInMillis = startDate.getTime();
            endInMillis = endDate.getTime();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }

        TimeZone timeZone = TimeZone.getDefault();
        ContentResolver cr = getContentResolver();
        ContentValues values = new ContentValues();
        values.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID());
        values.put(CalendarContract.Events.DTSTART, startInMillis);
        values.put(CalendarContract.Events.DTEND, endInMillis);
        values.put(CalendarContract.Events.TITLE, title);
        values.put(CalendarContract.Events.EVENT_LOCATION, "Location: " + location);
        values.put(CalendarContract.Events.CALENDAR_ID, 1);
        Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);
        ContentUris.withAppendedId(uri, id);
    }

} 
```

}

这里是负责下载和解析的类：

```
public class XMLParser {

public String getXmlFromUrl(String url, AddCoursesToCalendar.GetDataTask task) {
    String xml = null;

    try {
        int count;
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);

        HttpEntity httpEntity = httpResponse.getEntity();
        long lenghtOfFile = httpEntity.getContentLength();

        byte data[] = new byte[1024];
        long total = 0;
        while ((count = httpEntity.getContent().read(data)) != -1) {
            total += count;
          task.doProgress(""+(int)((total*100)/lenghtOfFile));
        }

        xml = EntityUtils.toString(httpEntity, "UTF-8");

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return xml;
}

public Document getDomElement(String xml, AddCoursesToCalendar.GetDataTask task) {
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource();
        StringReader reader = new StringReader(xml);
        is.setCharacterStream(reader);
        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }
    return doc;
}

public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
}

public final String getElementValue(Node elem) {
    Node child;
    if (elem != null) {
        if (elem.hasChildNodes()) {
            for (child = elem.getFirstChild(); child != null; child = child
                    .getNextSibling()) {
                if (child.getNodeType() == Node.TEXT_NODE) {
                    return child.getNodeValue();
                }
            }
        }
    }
    return "";
} 
```

}

我希望我的第一篇文章的风格是好的，如果不是请告诉我。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:03:21.187

我假设 XML**非常大**，并且解析**至少**需要30 秒。否则，帮自己一个忙，只显示一个不确定的指标；）

此外，为了简化您的代码，您可能希望使用[`URL.openStream()`](http://developer.android.com/reference/java/net/URL.html#openStream%28%29)而不是 full features `HttpClient`，并切换到 simple `GET`（因为您不发送任何参数，我想知道为什么您的服务器需要 a `POST`）。

假设文件非常大（当然对于手机而言），必须考虑内存使用情况，并且您将从 DOM 切换到[SAX 接口](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)来处理 XML。SAX 在扫描流时为您提供了一个基于事件的接口，因此您不必在开始处理之前将整个文件加载到内存中。请记住，这是一个大文件，我们不想耗尽内存。

使用 SAX，我们可以在文件下载时解析文件，因此我们可以在计算总时间和剩余时间时关闭网络延迟。此时，进度可以近似为*current item / total*。您可以更新内部计数器以跟踪当前项目，但现在的问题是如何计算总数。你可以从以下方面思考

1.  字节（例如`processed 12932/2791290 Bytes`）
2.  业务项目（例如`processed 80/291 Items`）

在这两种情况下，您都需要服务器的一些支持。它应该提供`Content-Length`HTTP 标头或序言（`<manifest>`在此代码段中调用）：

```
<root>
  <manifest>
    <total>291</total>
  </manifest>
  ...
  <item id="foobar1">
    <foo>Foo</foo>
    <bar>Bar</bar>
  </item>
  ...
</root> 
```

这`AsyncTask`部分很简单：你可以[`publishProgress()`](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)在你的内部使用`doInBackground()`，然后它会`onProgressUpdate()`在 UI 线程上调用。在此方法中，您将[更新对话框的进度](http://developer.android.com/reference/android/app/ProgressDialog.html#setProgress%28int%29)。

最后几点说明：当屏幕旋转时（假定默认配置），您的活动被销毁，然后重新创建。请注意，显示的对话框`Activity.showDialog`由系统自动重新创建，但旧的`AsyncTask`继续运行，并且它可能保留对旧的（现在可能已销毁但不是垃圾收集）Activity 和旧对话框的引用。你必须自己解决这个问题，有[太多](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/4dW4-KMUKJI)的选择（包括 Loader 框架）。

我希望你现在明白这个任务并不像听起来那么简单，所以我的建议是仔细检查业务需求并提出最简单、更健壮的解决方案——毕竟，下载 XML 并显示进度对话框不是您的应用程序的主要任务；）

# javascript - 如何将 javascript 的值传递给 Mako 模板

> ID：13049320
> 
> 赞同：2
> 
> 时间：2012-10-24T12:34:26.247
> 
> 标签：javascript, python, cherrypy, mako

我正计划用 python 和 mako 编程服务器的cherrypy。现在我有一个问题，因为我知道将 Mako 模板的值传递给 Javascript

```
<script type="text/javascript"> 
var contapara=${input_nparams}; 
</script> 
```

反之亦然？反之亦然 Mako<---JAvascript?

谢谢

编辑：

因为我有一个 Mako (kwargs) 变量，其中包含发送的所有表单的数据。用户输入一个词，即“clave”并存储在 Javascript 中。在此之后，我传入 Mako 以搜索变量（kwargs）。调用函数的 MAko。存在后，我用 textarea（新表单）打开一个窗口，我必须写入数据。在用户更改数据并发送表单之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:39:59.487

创建一个包含您想要发送给 mako 的参数的视图，然后在您的 javascript 中使用 ajax。例如：

```
jQuery.ajax(
    {
        url       : url_of_the_mako_view,
        data      : {foo:bar,foo2:bar2},
        type      : 'POST',
        success   : function(data)
        {
            /*
             when the mako template is rendered by your view then the result will
             be passed to this function in the variable data
            */
        }
    }
) 
```

如果您追求的更像是页面重定向，那么您可以执行以下操作：

1.  制作一个重定向到正确位置的表单
2.  放入隐藏字段
3.  使用 json 字符串填充隐藏字段，该字符串表示您要传递给 mako 的参数
4.  提交表单然后在获取表单数据的视图中，您需要将 json 转换为字典并将其传递给 mako

# c++ - 使显式堆栈算法更快

> ID：13049321
> 
> 赞同：2
> 
> 时间：2012-10-24T12:34:27.690
> 
> 标签：c++, recursion

有一些递归算法可以很快填满堆栈。一种解决方案是使堆栈显式化，从而将算法转变为迭代算法。

但是我注意到拥有显式堆栈会使算法变得相当慢（这可能不应该让我感到惊讶）。是否有任何使显式堆栈更快的通用 C++ 指南？它们是否有可能比原来的递归算法运行得更快？

* * *

**编辑：**我为其编写显式堆栈的函数如下。我还粘贴了迭代代码。出于某种原因，使用`std::vector`而不是`std::stack`更快，这非常令人惊讶。

```
// A(m, n) = n + 1                 if m = 0
//         = A(m - 1, 1)           if m > 0 and n = 0
//         = A(m - 1, A(m, n - 1)) if m, n > 0

int A(int m, int n, long& iterations,
    std::vector<std::pair<int, int> >& stack)
{
    stack.push_back(std::make_pair(m, n));
    long result = 0;
    bool result_available = false;

    while (stack.size() > 0)
    {
        iterations += 1;

        if (result_available) {
            stack.back().second = result;
            result_available = false;
        }

        m = stack.back().first;
        n = stack.back().second;
        stack.pop_back();

        if (m == 0) {
            result = n + 1;
            result_available = true;
        }
        else if (m > 0 && n == 0) {
            stack.push_back(std::make_pair(m - 1, 1));
        }
        else if (m > 0 && n > 0) {
            stack.push_back(std::make_pair(m - 1, n));
            stack.push_back(std::make_pair(m, n - 1));
        }
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:43:57.360

对于最新版本 gcc 的幸运用户，还有另一种解决方案：`-fsplit-stack`.

拆分堆栈并不是一个新想法，当时 Lisp 就有它……它只是意味着编译器创建了一个程序，该程序不必预先设置其完整堆栈，而是能够根据需要对其进行扩展。因此堆栈变得不连续。

当然，这需要所有（或大多数）库都适应这种新的堆栈机制（因此需要重新编译整个软件堆栈）。忽略它的库可能仍会创建堆栈溢出异常，如果您避免在此类库中使用深度递归函数，这不是什么大问题。

使用这种机制，只要您有可用内存，堆栈就会增长以适应您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:53:02.850

1.  尝试尽可能少地从堆中分配内存。它很慢。

2.  消除尾递归——对他们来说，你不需要递归调用。它看起来不像递归解决方案那样优雅，但它更快。有关如何完成此操作的示例，请搜索 Fibonacci 实现。有 2 个递归变体和一个非递归变体。

3.  显式堆栈不会更快，因为函数调用和通过堆栈传递参数是一些最快的汇编指令，因为它们经常使用。

# sql - Linq to sql - 从 db 函数而不是直接从 db 字段获取值（映射属性时）

> ID：13049327
> 
> 赞同：1
> 
> 时间：2012-10-24T12:34:44.037
> 
> 标签：sql, linq, orm

当您将表映射到对象时，创建的每个属性都对应一个 db 列。我想在列映射到属性之前对列执行 db 函数，因此属性获取 db 函数返回的值，而不是列

我试图通过 ColumnAttribute 的 Expression 属性来实现这一点（如下例所示），所以不是`BirthDate`返回**`usrFn_UTCToLocalTime(BirthDate)`**但它似乎没有工作并且仍然获得列的纯值。

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Storage = "_BirthDate", DbType = "DateTime", UpdateCheck = UpdateCheck.Never, Expression = "dbo.usrFn_UTCToLocalTime(BirthDate)")]
    public System.Nullable<System.DateTime> BirthDate
    {
        get
        {
            return this._BirthDate;
        }
    } 
```

我还修改了 DBML XML，如下所示： [stackoverflow 上的其他帖子，](https://stackoverflow.com/questions/201636/linq-to-sql-how-to-have-property-not-from-table-but-from-db) 但也没有结果。

这是否可能通过使用 LINQ 或者我必须覆盖一个花费往返服务器的吸气剂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:51:49.517

正如我在问题中所建议的那样，现在我已经覆盖了 get 方法，所以我有：

```
get
        {
            using (var context = DB.Data.DataContextFactory.CreateContext())
            {
                return context.usrFn_UTCToLocalTime(_BirthDate);
            }

            //return this._BirthDate;
        } 
```

但是每次访问该属性时，都会进行往返 - 这不是我的意图，但会给出正确的结果。我的问题仍然悬而未决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:35:46.977

根据[此](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.columnattribute.expression%28v=vs.100%29.aspx)MSDN 页面上的备注部分，调用 CreateDatabase 时会使用 ColumnAttribute 的 Expression 属性，因此除非您使用 Linq to Sql 创建数据库，否则它不会按您想要的方式工作。

您可以创建一个 Linq 查询来选择各种列并在这样的一个语句中调用 db 函数（基于 MSDN[示例](http://msdn.microsoft.com/en-us/library/bb399416%28v=vs.100%29.aspx)）：

```
var qry = from person in db.Persons
          select new {
              FirstName = person.FirstName,
              LastName = person.LastName,
              BirthDate = person.BirthDate,
              Dob = db.usrFn_UTCToLocalTime(person.BirthDate)
          }; 
```

这项目为匿名类型，但您也可以使用非匿名类型。对于示例，我有一个名为 Person 的表，其中包含 FirstName、LastName 和 BirthDate 列，以及一个名为 usrFn_UTCToLocalTime 的用户定义的标量函数。发送到服务器的sql语句为：

```
SELECT [t0].[FirstName], [t0].[LastName], [t0].[BirthDate], CONVERT(DateTime,[dbo].[usrFn_UTCToLocalTime]([t0].[BirthDate])) AS [Dob]
FROM [dbo].[Person] AS [t0] 
```

# java - Eclipse 插件：将数据绑定到列表并刷新视图

> ID：13049333
> 
> 赞同：1
> 
> 时间：2012-10-24T12:35:01.833
> 
> 标签：java, eclipse, plugins, eclipse-plugin, swt

我正在开发一个 Eclipse**插件项目**，我有多个服务必须将自己**注册**到主项目（存储在列表中）。我有一个**视图，我想在其中列出每个服务**（成功注册自身）**及其状态（如果启用/禁用 -> 从设置中），如果****状态发生变化**，应该更新。

**我尝试了什么：** 添加按预期工作，主项目中的列表知道单个服务。现在我无法显示详细信息（服务+它的状态）。我尝试为每个服务添加一个新标签（使用 for-each-loop）。基本上这是可行的，但我不知道在获得添加服务的事件（在视图中）后如何刷新视图。此外，我不知道如何将 propertychanged-event 绑定到这样的标签。（如果标签是硬编码的，我知道该怎么做，但这在这里是不可能的）。

我怎样才能达到我想要的？（显示每个注册服务的标签和状态，如果它发生变化则刷新状态）

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:57:02.900

为了完整起见，我添加了我在这里找到的答案/解决方案： [Eclipse 插件：将数据绑定到列表并刷新视图](https://stackoverflow.com/questions/13049333/eclipse-plug-in-bind-data-to-a-list-and-refresh-view)

# ruby-on-rails - S3 使用 rake 脚本、载波和雾上传文件不起作用

> ID：13049334
> 
> 赞同：3
> 
> 时间：2012-10-24T12:35:02.410
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, rake

我需要将一堆文件上传到 S3。我在使用carrierwave + fog上传文件的rails项目中......如果我执行以下操作，控制台一切正常：

```
image = ImageUploader.new
image.store!(File.open("image.jpg")) 
```

这是为了测试，现在我必须上传一堆文件，所以我在 lib/tasks 文件夹中创建了一个名为 upload.rake 的 rake 脚本...在这个 upload.rake 中，我执行以下操作：

```
task :upload => :environment do

    path = "app/assets/images"

    Dir.foreach(path) do |file|
        if file != "." && file !=".."
            uploader = ImageUploader.new
            uploader.store!(File.open(File.join(path,file)))    
            puts file
        end
    end 
end 
```

但它只是不起作用，我不明白为什么......它给出了这个错误：

```
rake aborted!
Broken pipe (Errno::EPIPE) 
```

任何人都知道可能会发生什么？这让我发疯......这是 --trace 的最后一部分

```
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/openssl/buffering.rb:292:in `syswrite_nonblock'
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/openssl/buffering.rb:292:in `write_nonblock'
.rvm/gems/ruby-1.9.2-p320/gems/excon-0.16.7/lib/excon/socket.rb:139:in `write'
.rvm/gems/ruby-1.9.2-p320/gems/excon-0.16.7/lib/excon/ssl_socket.rb:84:in `write'
.rvm/gems/ruby-1.9.2-p320/gems/excon-0.16.7/lib/excon/connection.rb:269:in `request_kernel'
.rvm/gems/ruby-1.9.2-p320/gems/excon-0.16.7/lib/excon/connection.rb:103:in `request'
.rvm/gems/ruby-1.9.2-p320/gems/fog-1.6.0/lib/fog/core/connection.rb:20:in `request'
.rvm/gems/ruby-1.9.2-p320/gems/fog-1.6.0/lib/fog/aws/storage.rb:392:in `request'
.rvm/gems/ruby-1.9.2-p320/gems/fog-1.6.0/lib/fog/aws/requests/storage/put_object.rb:43:in `put_object'
.rvm/gems/ruby-1.9.2-p320/gems/fog-1.6.0/lib/fog/aws/models/storage/file.rb:133:in `save' 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:08:04.663

几天前我遇到了这个问题，解决方案是我没有正确指定我的存储桶-因此可能值得一看以确保您的存储桶名称正确并且权限设置正确。当没有指定存储桶时，这似乎是一个可笑的普遍错误！

# layout - 避免平铺 SVG 形状之间的线条

> ID：13049336
> 
> 赞同：26
> 
> 时间：2012-10-24T12:35:04.383
> 
> 标签：layout, svg, rendering

我正在使用多个不同颜色的矩形来构建 SVG 数据可视化。这很好用，但有时背景颜色会在矩形之间渗出。我正在使用 Chrome 浏览，但其他浏览器似乎也受到了类似的影响。

[http://jsfiddle.net/dVEPk/](http://jsfiddle.net/dVEPk/)

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <rect x="10.5" y="10" height="100" width="100"
          style="stroke:none; fill: #00cc00"/>
  <rect x="110.5" y="10" height="100" width="100"
          style="stroke:none; fill: #00cc00"/>
</svg> 
```

在 Chrome 中，如果 x 偏移量是整数，则该行不可见。

我确信我可以通过使矩形比它们必须占据的空间大一点来避免线条。但这似乎是一个 hack：是否有 SVG 习惯用法或最佳实践来实现没有“灌浆”的完美平铺形状？

我还担心渲染性能，因为我的可视化可能非常大（比如 100MB XML .svg）。我希望能够给渲染器提示，例如“其中没有一个形状`<g>`是重叠的”？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-24T12:38:48.290

这是在形状和背景之间工作的抗锯齿。如果要关闭它，请在形状上设置 shape-rendering="crispEdges"。您可以在 rect 元素上设置它，也可以`<svg>`在 rect 元素将继承它的情况下设置它。

您可以通过向坐标添加 0.5 来调整线的位置。有关这方面的更多详细信息，请参阅[cairo FAQ](http://cairographics.org/FAQ/#sharp_lines)。

# node.js - node.js 上的 Socket.io-client 只工作一次

> ID：13049339
> 
> 赞同：4
> 
> 时间：2012-10-24T12:35:13.287
> 
> 标签：node.js, socket.io

每次服务器收到请求时，我都想在服务器端（使用 node.js）创建新的 sockei.io-client。但是下面的代码只工作一次，然后 sockei.io-client 没有响应。应用程序不会停止，没有错误。

```
var http = require("http");

http.createServer(function(request, response) {

var io = require('socket.io-client'); 
localSocket = io.connect('http://localhost:9876/');
localSocket.on('connect', function (data) {
                         response.writeHead(200, {"Content-type": "text/plain"});
                         response.write(data.name);
                         response.end();
                         localSocket.disconnect();
       });

}).listen(8080); 
```

Socket.io 服务器（在 localhost:9876 上）运行良好 - 它为具有名称的客户端提供服务（即

```
 data.name 
```

在这里的代码中）。

怎么了？

**更新：**问题由我自己解决：要为 socket.io-client 运行多个连接，需要添加连接选项 {'force new connection': true}，如下所示：

```
localSocket = io.connect('http://localhost:9876/', {'force new connection': true}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:00:58.980

> 对于那些在谷歌上找到这个的人 - 现在有一个解决方案：
> 
> Socket.disconnect() 踢客户端（服务器端）。客户没有机会保持联系:)

[使用 socket.io 和 nodejs 强制客户端与服务器断开连接](https://stackoverflow.com/questions/5048231/force-client-disconnect-from-server-with-socket-io-and-nodejs)

我认为您只需要删除 disconnect() 行。

# c++ - 预先知道大小时初始化 std::map

> ID：13049340
> 
> 赞同：47
> 
> 时间：2012-10-24T12:35:13.213
> 
> 标签：c++, dictionary, std

我想初始化一个`std::map`. 现在我正在使用`::insert`，但我觉得我在浪费一些计算时间，因为我已经知道我想要分配的大小。有没有办法分配一个固定大小的地图然后填充地图？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-24T12:43:45.317

不，地图的成员在内部存储在树结构中。在您知道要存储的键和值之前，无法构建树。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-24T14:13:12.683

简短的回答是：是的，这是可能的，但这不是微不足道的。您需要为您的地图定义一个自定义分配器。基本思想是您的自定义分配器将为地图留出一块内存。由于映射需要新节点，分配器将简单地为它们分配预分配块内的地址。像这样的东西：

```
std::map<KeyType, ValueType, std::less<KeyType>, MyAllocator> myMap;

myMap.get_allocator().reserve( nodeSize * numberOfNodes ); 
```

但是，您必须处理许多问题。

首先，您并不真正知道每个映射节点的大小或映射将执行多少次分配。这些是内部实现细节。您可以尝试找出答案，但不能假设结果将适用于不同的编译器（甚至是同一编译器的未来版本）。因此，您不必担心分配“固定”大小的地图。相反，您的目标应该是将所需的分配数量减少到少数。

其次，如果你想支持删除，这个策略会变得相当复杂。

第三，不要忘记内存对齐问题。分配器返回的指针必须针对内存将存储的各种类型的对象正确对齐。

话虽如此，在你尝试这个之前，确保它是必要的。内存分配可能非常昂贵，但您仍然不应该认为这对您的程序来说是个问题。测量以找出答案。您还应该考虑更自然地允许预先分配的替代策略。例如，排序列表或 std::unordered_map。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-26T09:51:27.453

不确定这是否回答了您的问题，但*Boost.Container*有一个`flat_map`您可以在其中保留空间的地方。基本上，您可以将其视为（键，值）对的排序向量。提示：如果您还知道您的输入已排序，则可以使用带有提示的插入来获得最大性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T12:44:15.473

你在谈论`block allocators`。但实施起来很困难。在考虑这些困难的事情之前先衡量一下。不管怎样， [Boost](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/index.html)有一些关于实现块分配器的文章。或者使用已经实现的预分配地图[Stree](http://www.codeproject.com/Articles/27799/Stree-A-fast-std-map-and-std-set-replacement)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-23T08:39:31.550

*这个问题已经有几个很好的答案，但他们错过了一些要点。*

# 直接初始化地图

如果直接使用迭代器初始化，则映射预先知道大小：

```
auto mymap = std::map(it_begin, it_end); 
```

这是*回避*问题的最佳方法。如果您对实现不了解，则映射可以从迭代器预先知道大小，然后您将问题转移到`std::`实现来担心。

*或者*与迭代器一起使用`insert`，即：

```
mymap.insert(it_begin, it_end); 
```

请参阅：[https ://en.cppreference.com/w/cpp/container/map/insert](https://en.cppreference.com/w/cpp/container/map/insert)

## 提防过早的优化

> 但我*觉得*我在浪费一些计算时间。

这听起来很像您过早地进行优化（这意味着您不*知道*瓶颈在哪里 - 您正在猜测或看到一个不是真正的问题）。相反，首先测量然后进行优化 - 如有必要，重复。

## 内存分配已经在很大程度上得到优化

为地图滚动你自己的块分配器可能几乎没有结果。在现代系统上（这里我包括操作系统/硬件*和*C++ 语言级别）内存分配已经针对一般情况进行了很好的优化，如果滚动您自己的块分配器，您可能会看到很少或没有改进。即使您非常小心并将地图放入一个连续的数组中 - 虽然本身是一种改进 - 您仍然可能面临这样的问题，即最终元素可能会随机放置在数组中（例如插入顺序）并且无论如何都要对缓存不那么友好（这在很大程度上取决于您的实际用例 - 我假设一个超大数据集）。

## 使用其他容器或第三方地图

如果您仍然面临这个问题 - 最好的方法可能是使用另一个容器（例如，排序的`std::vector`-`std::lower_bound`用于查找）或使用针对您使用地图的方式优化的第三方地图。一个很好的例子`flat_map`来自[boost](/questions/tagged/boost "显示标记为“提升”的问题") - 请参阅这个[答案](https://stackoverflow.com/a/13049491/2261538)。

## 结论

1.  让 std::map 担心这个问题。
2.  当性能是*主要*问题时：使用最适合您的数据使用方式的数据结构（可能是第 3 方）（随机插入或批量插入/主要是迭代或主要是查找等）。然后，您**需要**分析和收集性能指标以进行比较。

# android - Android中Toast消息参数的问题

> ID：13049345
> 
> 赞同：0
> 
> 时间：2012-10-24T12:35:22.353
> 
> 标签：android

我想在静态类中显示 Toast 消息，但这是 Toast 消息参数传递应用程序上下文的问题。请帮助我，如何在静态类中显示 toast 消息。请推荐我需要做的改变，我将非常感谢你。这是我的代码的一部分。

```
 public class MainActivity extends Activity {
         public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.training_four_position);
            mEndlessRunnable = (Runnable) new UpdateRunnable();
            mEndlessRunnable.run();
    }

   private static class UpdateRunnable implements Runnable  {
   private int mState; 

   public UpdateRunnable(Handler handler, Button[] buttons) {
         mHandler = handler;
         mButtons = buttons;
   }

    public void run() {
        switch (mState) {
        case 0:
               mState = 1;
               break;
        case 1:

            mState = 0;
               // Here is the issue in my toast message
               Toast.makeText(CONTEXT, "Toast message.",Toast.LENGTH_LONG).show();
                break;
     }

  mHandler.postDelayed(this,1000)); 

  }// End of run()
  }//End of class UpdateRunnable
  } //End of MainActivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:41:52.133

您可以将 Activity 的 Context 传递给构造函数中的 UpdateRunnable 类，然后在 run() 函数中使用它。

但是，如果您从内部类显示 Toast，那么该内部类可能根本不应该是静态类。您可以删除 static 关键字，然后在 run() 中使用 Activity 的 getContext() 。

为什么你想要你的内部类是静态的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:50:32.720

你可以尝试为你的吐司制作一个单独的方法

```
public void showToast(String message){

    Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();

}//end showToast 
```

然后在你的内部类中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:43:38.573

好吧，其中一种方法是在您的活动中使用静态变量。

公共静态上下文 myContext;

然后在 onCreate.. 中更新它

```
onCreate()
{
    myContext = getApplicationContext();
} 
```

另一种方法是在类的构造函数中传递上下文......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:55:24.093

我猜 getParent() 或 getApplicationContext() 应该完成工作，将参数传递给类并拥有一个本地上下文对象。如果失败，请告诉我

# android - Android：Facebook 登录不起作用

> ID：13049346
> 
> 赞同：1
> 
> 时间：2012-10-24T12:35:26.377
> 
> 标签：android, facebook

我在这里使用这个简单的代码：

[https://developers.facebook.com/docs/mobile/android/build/#sig](https://developers.facebook.com/docs/mobile/android/build/#sig)

```
public class MainActivity extends Activity {

    Facebook facebook = new Facebook("xxxxxxxxxxxxxx");
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    private SharedPreferences mPrefs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if (access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid()) {
            facebook.authorize(this, new String[] {}, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires",
                            facebook.getAccessExpires());
                    editor.commit();
                }

                @Override
                public void onFacebookError(FacebookError error) {
                }

                @Override
                public void onError(DialogError e) {
                }

                @Override
                public void onCancel() {
                }
            });
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
        try {
            JSONObject json = Util.parseJson(facebook.request("me"));
            String facebookID = json.getString("id");
            String firstName = json.getString("first_name");
            String lastName = json.getString("last_name");
            String email = json.getString("email");
            String gender = json.getString("gender");

        } catch (Exception e) {

            //If i click Okay i get Exception saying You need an Active access token to get the current user details
        }

    }
} 
```

使用这个得到哈希键：

![在此处输入图像描述](../Images/96f4f2e5a7d7f836b98427f8c2c89a45.png)

要求输入密码（“android”）

并给我这样的代码：

**xLYMxxxxxx/0enePexxf4DORUfR8=**

在 facebook 应用程序中，我的配置是：

![在此处输入图像描述](../Images/2d27b61ff8e5ef88d555ba91ffe88c6b.png)

但我得到这个错误：

![在此处输入图像描述](../Images/07358b337bae255c6a40a4851f16643b.png)

如果我按下 Okay，我会得到一个异常，说你需要一个 Active 访问令牌来获取当前用户详细信息。

我尝试了 SOF 上给出的所有可能的解决方案。但是没有用。请帮忙

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:03:29.593

似乎您没有从终端正确获取哈希密钥。

试试这个

1.  通过转到 Facebook SDK 源`Util.java`并设置`ENABLE_LOG`为 true 来启用日志记录。
2.  尝试再次登录您的应用程序，您仍然应该看到红色错误消息。按确定。
3.  转到您的 logcat 并找到一个看起来像这样的条目：

> D/Facebook-authorize(24739)：登录失败：invalid_key：Android 密钥不匹配。您的密钥“uk3udeH7vrOGNFH2FJjdJbdWJWI”与您的应用程序设置中指定的允许密钥不匹配。[在http://www.facebook.com/developers](http://www.facebook.com/developers)检查您的应用程序设置

将该密钥复制并粘贴到您的仪表板中，然后重试。

请参阅此 SO 线程：[App 为 Facebook 登录配置错误：Android Facebook 集成问题](http://facebook.stackoverflow.com/questions/12382558/app-is-misconfigured-for-facebook-login-android-facebook-integration-issue/12433933#12433933)

# php - 警告：mysql_fetch_array() 期望参数 1 是资源，问题中给出的布尔值 con el wile

> ID：13049348
> 
> 赞同：0
> 
> 时间：2012-10-24T12:35:35.260
> 
> 标签：php, sql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

并试图修复这个错误，但我不能

此错误仅发生在某些结果中，例如我的表有每个 id 的 8 个注释资格，但有些表明我不是

这是代码

```
 <?php 

    while($rs = mysql_fetch_array($sql)) { 

        echo "<tr>" ?>

       <form id="ingreso_nota" method="post" action="editnotasql.php">

        <td><input type="text" name="nota_1" value="<?php echo $rs["nota_1"] ?>" /></td> 

        <td><input type="text" name="nota_2" value="<?php echo $rs["nota_2"] ?>" /></td> 

        <td><input type="text" name="nota_3" value="<?php echo $rs["nota_3"] ?>" /></td>

        <td><input type="text" name="nota_4" value="<?php echo $rs["nota_4"] ?>" /></td>

        <td><input type="text" name="nota_5" value="<?php echo $rs["nota_5"] ?>" /></td>

        <td><input type="text" name="nota_6" value="<?php echo $rs["nota_6"] ?>" /></td>

        <td><input type="text" name="nota_7" value="<?php echo $rs["nota_7"] ?>" /></td>

        <td><input type="text" name="nota_8" value="<?php echo $rs["nota_8"] ?>" /></td> 

        <input type="hidden" name="rut" value="<?php echo $rs["rut"] ?>">

        <input type="hidden" name="id_asig" value="<?php echo $rs["id_asig"] ?>">

       <?php 

       echo "</tr>"; 

       } 
```

这我生成了一个包含多行的表，但只有其中一个给出了这个错误

这是查询 SQL

```
 $rut =$_GET["rut"];

            $id_asig =$_GET["asignatura"];
            $nombre =$_GET["nombre"];
            $curso =$_GET["curso"];
$sql = "SELECT * FROM calificaciones WHERE rut=$rut AND id_asig=$id_asig" ; 
            $sql = mysql_query($sql, $con)  ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:36:58.157

你有 sql 语法错误，所以你没有得到结果集。使用 mysql_error() 函数在查询数据库时知道错误。

改变

```
$sql = "SELECT * FROM calificaciones WHERE rut=$rut AND id_asig=$id_asig" ; 
```

到

```
$sql = "SELECT * FROM calificaciones WHERE rut='{$rut}' AND id_asig='{$id_asig}'" ; 
```

注意：您的查询必须受到 MySQL 注入的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:11:51.153

有时那个警告是，如果查询的结果在while 内没有返回值，也就是当表上没有记录时。

我的意思是，在某些情况下，您的代码和应用程​​序是正确的，但仍会出现警告。

隐藏警告使用字符@。

例如

```
while(@$rs = mysql_fetch_array($sql)) {
   ...
} 
```

最好的祝福

# python - 如何有效地改变类实现

> ID：13049349
> 
> 赞同：0
> 
> 时间：2012-10-24T12:35:37.587
> 
> 标签：python

我想根据构造函数参数更改实现。下面是一个例子，说明我的意思：

```
class Device(object):
    def __init__(self, simulate):
        self.simulate = simulate

    def foo(self):
        if simulate:
            self._simulate_foo()
        else:
            self._do_foo()

    def _do_foo(self):
        # do foo

    def _simulate_foo(self):
        # simulate foo 
```

现在每次调用都会`foo()`调用一个`if`子句。为避免这种情况，我可以将正确的方法动态绑定到`foo`.

```
class Device(object):
    def __init__(self, simulate):
        if simulate:
            self.foo = self._simulate_foo
        else:
            self.foo = self._do_foo()

    def _do_foo(self):
        # do foo

    def _simulate_foo(self):
        # simulate foo 
```

是否有任何不应该这样做的缺点或我不知道的其他缺点？这真的更快吗？（我知道继承是另一种选择）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:00:12.097

我想建议[用多态性](http://sourcemaking.com/refactoring/replace-conditional-with-polymorphism)重构替换条件，因为它以比当前代码和建议的替代方案更优雅的方式解决了您的问题：

```
class Device(object):
    def foo(self):
        # do foo

class SimulatedDevice(object):
    def foo(self):
        # simulate foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:41:06.967

您正在做的事情非常好，您会发现许多 Python 框架中使用的技术。但是，您可能希望使用它[`timeit`](http://docs.python.org/library/timeit.html)来检查这是否真的更快。

当你访问 时`instance.foo`，Python 会先在类定义中查找它以确保它不是数据描述符（例如属性），然后在实例命名空间中查找它，但这是一个非常快速的查找，因为`foo`在类（设置`self.foo`将其存储在实例`__dict__`命名空间中）。

该`if`语句几乎肯定比双重查找慢，因为*语句*`if`本身需要以`self.simulate`相同的方式查找，但差异可以忽略不计。

# python - PIL 1.1.7 和 python 3.x

> ID：13049352
> 
> 赞同：0
> 
> 时间：2012-10-24T12:35:45.267
> 
> 标签：python, python-imaging-library

> **可能重复：**
> [Python 3 的图像库](https://stackoverflow.com/questions/3896286/image-library-for-python-3)

如何在 python 3.x 中使用 PIL 1.1.7，它说它需要 2.4 版本。的python，但我已经看到它被使用（只是从来没有问过它是如何完成的）。

我看到的版本是以某种方式定义了 PIL 1.1.7，然后在 python 3.x 代码中使用。

感谢您事先提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:34:19.867

请参阅[此处](http://www.lfd.uci.edu/~gohlke/pythonlibs/)以获取一些非官方的 PIL 下载。为我工作。

# objective-c - Xcode - 用正则表达式和两位数捕获组替换函数（反向引用）

> ID：13049356
> 
> 赞同：0
> 
> 时间：2012-10-24T12:35:56.807
> 
> 标签：objective-c, regex, xcode, replace

我想使用 Xcode 的 find in project 选项来规范方法的签名。

我写了 find 表达式：

```
^\s*([+-])\s*\((\w+)\s*(\*?)\s*\)\s*(\w+)(\s*(:)\s*(\()\s*(\w+)\s*(\*?)\s*(\))\s*(\w+))? 
```

和替换表达式：

```
\1 \(\2\3\)\4\6\7\8\9\10\11 
```

测试字符串是：

```
 +(NSString *) testFunction : (NSInteger ) arg1 
```

和期望的结果：

```
+ (NSString*)testFunction:(NSInteger)arg1 
```

不幸的是，Xcode 无法识别两位数捕获组 \10 并将其转换为 \1 和 '0' 字符等等。如何解决这个问题或错误？

提前致谢，

米哈乌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:40:37.140

我相信@trojanfoe 是正确的；正则表达式只能有九个捕获组。不过，这*比*您的特定示例所需的要多。

```
^\s*([+-])\s*\((\w+)\s*(\*?)\s*\)\s*(\w+)(\s*(:)\s*(\()\s*(\w+)\s*(\*?)\s*(\))\s*(\w+))?

\1 \(\2\3\)\4\6\7\8\9\10\11 
```

我注意到的第一件事是您没有使用`\5`，因此根本没有理由捕获它。接下来，我注意到它`\6`对应于 regex `(:)`，因此您可以避免捕获它并在输出中`\6`替换为。对应于，因此您可以在输出中替换为。...迭代这种方法会产生一*对*更简单的正则表达式：一个用于零参数方法，一个用于单参数方法。`:``\7``(\()``\7``(`

 *```
^\s*([+-])\s*\((\w+)\s*(\*?)\s*\)\s*(\w+)
\1 \(\2\3\)\4

^([+-] \(\w+\*?\)\w+)\s*:\s*\(\s*(\w+)\s*(\*?)\s*\)\s*(\w+)
\1:\(\2\3\)\4 
```

`[+-] \(\w+\*?\)\w+`请注意，我可以在没有所有那些嘈杂的 s 的情况下捕获整个正则表达式`\s*`，因为它已经通过第一个正则表达式的传递进行了规范化。

然而，这整个想法是一个巨大的错误。考虑以下 Objective-C 方法声明：

```
-(const char *)toString;
-(id)initWithA: (A) a andB: (B) b andC: (C) c;
-(NSObject **)pointerptr;
-(void)performBlock: (void (^)(void)) block;
-(id)stringWithFormat: (const char *) fmt, ...; 
```

这些都不会被您的正则表达式正确解析。第一个包含双词类型`const char`而不是单个词；第二个有多个参数；第三个有一个双指针；第四个有一个*非常*复杂的类型而不是一个单词；第五个不仅`const char`有一个可变参数列表。我可以继续，通过`out`参数和数组和`__attribute__`语法，但你肯定开始明白为什么正则表达式不适合这个问题。

您真正需要的是*缩进程序*（以 GNU 命名`indent`，不幸的是它不支持 Objective-C）。最著名和最受支持的 Objective-C 缩进程序称为`uncrustify`; [在这里](https://github.com/bengardner/uncrustify)得到它。*

# matlab - 在 MATLAB 中设置滑块的默认值

> ID：13049357
> 
> 赞同：2
> 
> 时间：2012-10-24T12:35:57.897
> 
> 标签：matlab, user-interface, matlab-figure

我正在尝试为我的滑块设置一个默认值，但由于某种原因，句柄值不等于滑块的值。我尝试在 CreateFcn 函数中设置它，然后在我的主函数中调用它，但由于某种原因它没有保存在句柄中。

```
 set(gcbo,'Value',1)
 handles.fuel_slider1 = get(gcbo,'Value')*100
 assignin('base','handles',handles);
 guidata(hObject,handles); 
```

分配和 guidata 都不会保留句柄值，我不能在任何地方调用它。

我基本上需要将 6 个滑块设置为 100%，并在句柄中提供这些值。目前它返回实际的句柄“代码”值或任何它被调用的值 (fuel_slider2: 720.0043)

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:43:33.330

不要使用`gcbo`. 如果您在 GUIDE 中开发 UI，您可以通过结构访问所有滑块`handles`。您也可以访问当前的滑块/uicontrol。

例如：

```
 set(handles.fuel_slider,'Value',1);
    guidata(hObject,handles); 
```

# javascript - 是否可以测试页面上控件的高度和宽度

> ID：13049359
> 
> 赞同：1
> 
> 时间：2012-10-24T12:36:07.440
> 
> 标签：javascript, unit-testing, qunit

使用多个浏览器时，某些控件会出现在页面范围之外，而某些控件在使用不同的浏览器时会显得分散。有没有办法为所有这些布局编写单元测试。我正在探索使用 qunit、js-test-driver 进行 jquery 测试。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:27:59.290

像这样编写单元测试（例如使用 QUnit）：

```
var range = 10;

function rangeCheck(number1, number2) {
    return (number1 >= number2 - range) && (number1 <= number2 + range);
};

test("#main size", function() {
    var $main = $('#main');
    ok(rangeCheck($main.width(), 500), "Width ok.");
    ok(rangeCheck($main.height(), 500), "Height ok.");
}); 
```

当然这只是一个例子，你可以改进它，但是用少量的代码就可以改进工作流程。

# position - JavaFX：如何设置正确的工具提示位置？

> ID：13049362
> 
> 赞同：5
> 
> 时间：2012-10-24T12:36:19.543
> 
> 标签：position, tooltip, javafx-2, javafx

我有一个`TextField`我希望`Tooltip`在某些情况下显示的 a。

执行检查后，我运行以下代码：

```
textFieldUsername.setTooltip(new Tooltip("Enter username!"));
textFieldUsername.getTooltip().setAutoHide(true);
textFieldUsername.getTooltip().show(textFieldUsername, 1, 1); 
```

因此，当有人尝试使用空用户名登录时，他会收到`Tooltip`“用户名”的提示`TextField`。

但是当涉及到行动时，`Tooltip`屏幕左上角会弹出 。

我应该计算我的场景的坐标，然后将我的`TextField`坐标添加到它们，或者有一种方法可以将这些`1, 1`参数从调用中`show()`设置为相对于`TextField`位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T16:24:34.523

I think the coordinates are always relative to the screen. To calculate component coordinates you need to incorporate scene and window coordinates.

```
Point2D p = label.localToScene(0.0, 0.0);
label.getTooltip().show(label,
        p.getX() + label.getScene().getX() + label.getScene().getWindow().getX(),
        p.getY() + label.getScene().getY() + label.getScene().getWindow().getY()); 
```

# iphone - 我们如何在 AVAudioPlayer 中在 iphone 中播放之前找到流式音频持续时间

> ID：13049363
> 
> 赞同：2
> 
> 时间：2012-10-24T12:36:19.650
> 
> 标签：iphone, ios

我想用 UISlider 在 AVAudioPlayer 中添加计时器。但问题是我想播放一个 url 流音频（不是源文件），我不知道如何在播放之前找到该音频文件的持续时间并添加带有时间间隔的 UISlider。我看过很多教程，但没有一个有效。请指导我使用 UISlider 添加计时器。

# c# - 在条件下使用赋值是否安全？C/C++, C#

> ID：13049369
> 
> 赞同：4
> 
> 时间：2012-10-24T12:36:44.397
> 
> 标签：c#, c++, c

今天我们上了编程课。在控制台中非常容易练习。我编写了一个循环，通过 getchar() 从控制台逐字符加载，并进行赋值，所有这些都在循环术语中。

```
char c;
while((c = getchar()) != '\n'){
... 
```

有人说，这不安全使用，其他人说，在 C/C++ 中我可以做到这一点，但在 C# 中不行。

我试过这个

```
string s;
if((s = Console.ReadLine()) != ""){
... 
```

但这也有效，所以我不明白为什么这是不安全的。或者不是吗？

**编辑：\**我也读过这个[为什么你会在条件中使用赋值？](https://stackoverflow.com/questions/151850/why-would-you-use-an-assignment-in-a-condition)但这根本不是我的问题的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T12:45:01.850

人们可能会争论此类代码的可读性（而且在我工作过的大多数地方，它都无法通过代码审查），但问题不在于存在分配这一事实。问题是`getchar()` 它不返回 a `char`，而是返回 a `int`。并且可能的返回值集不适合`char`. 如果您将代码更改为：

```
int c;
while ( (c = getchar()) != EOF && c != '\n' ) {
... 
```

这将是“安全的”（但我仍然不想维护它）。如果您确实想要更新`c`循环控制，请使用`for`循环：

```
for ( int c = getchar(); c != EOF && c != '\n'; c = getchar() ) {
... 
```

这至少是可读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:44:33.880

您的示例中的主要操作`!=`不是分配。在 C# 中你不能做的事情（我认为这是正确的设计决定）是这样的：

```
if (s = "")
... 
```

这里的问题是它与通常的 equals operator 非常相似`==`。在某些情况下，这段代码是故意的，但通常是一个很难找到的错字。将其与此进行比较：

```
if (s == "")
... 
```

当您在代码中寻找错误时，您很容易忽略这一点。

# javascript - 有没有办法用 zen 编码创建 dom？

> ID：13049371
> 
> 赞同：2
> 
> 时间：2012-10-24T12:36:50.783
> 
> 标签：javascript, zen

例如我想写这个JS代码

```
$(document).ready(function() {
    var parent = $('#mydiv');
    var data = {somekey: 'Hello world!'};
    parent.append(zen('table>tr>td.someClass{somekey}', data));
}); 
```

结果如下：

```
<div id="mydiv">
    <table>
        <tr>
            <td class="someClass">
                Hello wolrd!
            </td>
        </tr>
    </table>
</div> 
```

有没有 JS 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:39:16.050

这是一个 jQuery 插件，可以执行您锁定的操作：[https ://github.com/zodoz/jquery-ZenCoding](https://github.com/zodoz/jquery-ZenCoding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T08:32:03.100

这是一个纯 js 的：[https](https://github.com/Sjeiti/zen) ://github.com/Sjeiti/zen 。它实际上只是[Emmet](https://github.com/emmetio/emmet)的包装器（因此没有未实现的语法问题）。

# rest - 从 servicestack url 中删除 project.serviceclass 名称

> ID：13049372
> 
> 赞同：2
> 
> 时间：2012-10-24T12:36:55.283
> 
> 标签：rest, servicestack

我正在玩一些 ServiceStack 演示和示例代码，我试图看看是否有办法消除在 url 中包含 project.serviceclass 名称的需要。我使用了 nuget 包并创建了一个名为 MvcMovieApp 的 ASP.NET MVC 应用程序，并创建了一个名为`MovieService`.

```
[Route("/Movie")]
[Route("/Movie/{Name}")]
public class Movie
{
    public long Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Genre { get; set; }
}
public class MovieResponse
{
    public string Result { get; set; }
}

public class MovieService : Service
{
    public object Any(Movie request)
    {
        return new MovieResponse { Result = "The best Movie is " + request.Name };
    }
} 
```

所以要得到回应，我必须要求：

> localhost/api/MvcMovieApp.MovieService/Movie/MyMovie

但我希望能够提出请求

> 本地主机/api/电影/MyMovie

有没有办法做到这一点？

**更新**

```
<httpHandlers>
  <add path="api*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
</httpHandlers>
<location path="api">
  <system.web>
    <httpHandlers>
      <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
    </httpHandlers>
  </system.web>
  <!-- Required for IIS 7.0 -->
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
    </handlers>
  </system.webServer>
</location> 
```

更新 2：

我能够让它工作。我试图将 ServiceStack 与 MVC 应用程序集成。所以我`Application_Start`有以下内容：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    // RouteConfig.RegisterRoutes(RouteTable.Routes);
} 
```

注释掉 MVC`RouteConfig`解决了这个问题，让我可以正确调用 ServiceStack api。这是`RegisterRoutes`方法。我有这条线，因此 MVC 应该忽略所有进入 API 的内容。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    //routes.MapHttpRoute(
    //    name: "DefaultApi",
    //    routeTemplate: "api/{controller}/{id}",
    //    defaults: new { id = RouteParameter.Optional }
    //);

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
    routes.IgnoreRoute("api/{*pathInfo}");
    routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" }); //Prevent exceptions for favicon
} 
```

任何想法我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:32:28.957

每个配置文件中的 httpHandlers 部分只能出现一次。此外，当它是位置的子项时，您不需要在 httpHandler 中包含 path=api* 。

仅将其用于您的配置：

```
<location path="api">
  <system.web>
    <httpHandlers>
      <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
    </httpHandlers>
  </system.web>
  <!-- Required for IIS 7.0 -->
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
    </handlers>
  </system.webServer>
</location> 
```

# sql-server - SQL - 批量插入和数据类型

> ID：13049373
> 
> 赞同：3
> 
> 时间：2012-10-24T12:36:56.390
> 
> 标签：sql-server, bulkinsert

今天我有一个固定宽度文件的批量插入，如下所示：

```
BULK INSERT #TBF8DPR501
FROM 'C:\File.txt' WITH (
        FORMATFILE = 'C:\File.txt.xml'
        ,ROWTERMINATOR = '\n'
        ) 
```

格式文件只是设置每个字段的宽度，批量插入临时表后，我创建了一个`INSERT INTO X SELECT FROM temp`用于转换一些批量无法转换的列。

我的问题是，是否有可能使批量插入能够转换值，例如：

*   日期格式`dd.MM.yyyy`或`ddMMyyyy`
*   像这样的十进制值`0000000000010022`（它在哪里`100.22`）

无需将批量插入临时表以转换值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:30:04.020

不，它不是：`BULK INSERT`只是尽可能快地复制数据，它不会以任何方式转换数据。您当前使用临时表的解决方案是数据仓库和报告方案中非常常用的解决方案，因此如果它按您希望的方式工作，我会继续使用它。

如果您确实想在加载期间进行转换，那么您可以使用[ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)工具，例如[SSIS](http://en.wikipedia.org/wiki/SQL_Server_Integration_Services)。但是您当前的方法没有任何问题，SSIS 将是一个非常“重”的选择。

# asynchronous - Castle MonoRail 异步操作

> ID：13049379
> 
> 赞同：1
> 
> 时间：2012-10-24T12:37:16.637
> 
> 标签：asynchronous, action, castle-monorail

我想在 MonoRail 基本控制器中进行异步操作。

我阅读了有关异步操作的文档 [http://docs.castleproject.org/Default.aspx?Page=Controllers&NS=MonoRail&AspxAutoDetectCookieSupport=1#Asynchronous_Actions_1](http://docs.castleproject.org/Default.aspx?Page=Controllers&NS=MonoRail&AspxAutoDetectCookieSupport=1#Asynchronous_Actions_1)

所以这就是我所做的：

```
public IAsyncResult BeginUploadTags(HttpPostedFile xmlFile, Boolean doUpload)
{
  if(IsPost)
  {
            IAsyncResult iAsyncResult = new AsyncDelegate(upload).BeginInvoke(queryResult, doUpload, ControllerContext.Async.Callback, ControllerContext.Async.State);
            return iAsyncResult;
   }
   // TODO
   // if IsPost is false do nothing but return a IAsyncResult object
}

public void EndUploadTags()
{

}

private delegate void AsyncDelegate(List<String> queryResult, Boolean doUpload);
private void upload(List<String> queryResult, Boolean doUpload)
{
   // do upload stuff
} 
```

但是当 IsPost 为假时我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:10:21.050

您将需要返回一个完整的 IAsyncResult（具有空 AsyncResult 值）。

您可以创建一个类似于[此 SO question的完整结果](https://stackoverflow.com/questions/5037422/how-to-create-an-iasyncresult-that-immediately-completes)

# java - jsf中的会话超时

> ID：13049380
> 
> 赞同：1
> 
> 时间：2012-10-24T12:37:20.870
> 
> 标签：java, session, jsf-2, session-timeout, ajax4jsf

我有一个问题，我的整个 JSF 应用程序都是基于 Ajax 请求的

我们使用 Ajax 处理所有请求

问题是当会话超时并且用户尝试在页面上做任何事情时它什么也不做。

我知道会话已超时，但我无法抓住它。经过一番尝试，我终于能够在每次请求后会话超时时捕捉到。但现在的问题是再次将用户从过滤器或托管 bean 重定向到登录屏幕，甚至使用 js

请任何人都可以告诉我如何将用户重定向到登录屏幕

还请记住，我的应用程序中有三个页面：登录和索引以及仅注销，所有内容都在索引页面中

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:54:20.833

您可以使用类似的东西在超时过滤器中进行 ajax 重定向。你可以参考[这个线程](https://stackoverflow.com/questions/1438351/redirecting-on-session-timeout-in-jsf-richfaces-facelet/10431023#10431023)

```
String facesRequestHeader = httpServletRequest
        .getHeader( "Faces-Request" );

boolean isAjaxRequest = facesRequestHeader != null
        && facesRequestHeader.equals( "partial/ajax" );

if( isAjaxRequest )
{
        String url = MessageFormat.format( "{0}://{1}:{2,number,####0}{3}",
        request.getScheme(), request.getServerName(),
        request.getServerPort(), timeoutPath );

        PrintWriter pw = response.getWriter();
            pw.println( "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" );
        pw.println( "<partial-response><redirect url=\"" + url
        + "\"></redirect></partial-response>" );
        pw.flush(););
}
else
{
    httpServletResponse.sendRedirect( timeoutPath );
} 
```

# java - 在 Java 正则表达式中使用“<”

> ID：13049383
> 
> 赞同：0
> 
> 时间：2012-10-24T12:37:28.250
> 
> 标签：java, regex

我有一个小于符号的正则表达式：

```
String s="<99";
if(s.matches("[<]*")){
    \\code
} 
```

不幸的是，这对我不起作用。谁能解释为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:42:51.790

怎么样

```
if(s.matches("<.*")) 
```

点将匹配任何字符。所以这是 < 后跟任意数量的任意字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:43:28.013

对于这个特定的字符串，您可以使用这个正则表达式：-

```
s.matches(".*?<*.*") 
```

*   如果使用 [<]*，它只会匹配 0 或更多的字符串`<`

# liferay - 如何在 liferay 6.1.1 GA2 中进行远程登台？

> ID：13049384
> 
> 赞同：1
> 
> 时间：2012-10-24T12:37:33.130
> 
> 标签：liferay, liferay-6

我有一个站点，当我尝试应用本地登台时，它运行良好，但我们尝试通过远程服务器连接它，它无法正常工作，给出错误连接无法建立。有人试过吗？

这是带有错误消息的配置：

![带有错误消息的配置](../Images/79aa30c2745f95f52996f62e3b422ab3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:41:48.833

[这篇博文](https://www.liferay.com/web/olaf.kock/blog/-/blogs/setting-up-remote-staging-through-https)（免责声明：我自己的）解释了如何使用 https 进行操作 - 如果您不想加密，可以省略其中的长部分。它也涵盖了 6.0，但大体原理还是一样的。

您要特别注意该文章中的*允许访问网络服务*段落，并检查您的发布服务器（“阶段”）是否可以访问实时服务器。通常，如果这不在 localhost 上，则需要按照该文章中的说明进行配置。

当您指出您无法从暂存服务器连接到生产服务器时，请打开浏览器进行检查，在暂存服务器上运行并将其连接到生产服务器 - 转到`http://production-server-name:8080/api/axis`并验证您是否可以连接（注意：您仅当不访问 localhost 作为生产系统时才能获得此测试的权威结果：请在暂存系统上运行浏览器！） - 通过此测试，您可以消除远程系统被禁止的第一次机会。一旦成功，您将需要在登台服务器上输入生产服务器的凭据 - 您使用的帐户需要有权更改发布内容（和页面等）时需要更改的所有数据

当登台的当前用户无权访问生产系统（使用所使用的凭据）时，您在添加的屏幕截图中给出的错误消息可能会出现 - 验证您是否拥有与登台系统上使用的用户帐户相同的用户帐户（一个从屏幕截图中获取错误消息的）在您的生产系统中。同步两者的密码。

在您的评论中，您提供的信息是您正在为登台和生产环境使用不同的版本 - 我不希望这会起作用，所以这可能是根本原因。使用相同版本的两个系统进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T21:53:59.337

远程发布需要牢记的几个要点：

1.  如果您不在 LDAP 上（或者您对不同的环境有不同的 LDAP），您应该验证您的用户帐户在源环境和目标环境中是否完全相同。因此，如果您在 QA 站点上并且想要远程发布到生产环境，那么您的屏幕名称、电子邮件地址和密码都应该相同。

2.  电子邮件地址非常重要。根据您使用的 Liferay 发行版（版本），远程发布代码使用您的电子邮件地址，而不管您是否将 portal-ext.properties 配置为使用屏幕名称。

3.  您应该在双方都有管理员角色。可能并非在每种情况下都需要它，但是将这个角色分配给进行远程发布的用户可以节省我调试某人远程发布为什么不起作用的时间和精力。调试这个过程需要很长时间。

4.  如果远程发布给您带来了问题（可能是或者您不会在这里），请尝试执行 lar 文件导出/导入。这很重要，因为远程发布失败并不能完全帮助您告诉您失败的原因，它们只是告诉您然后失败了。令人惊讶的是，在导出过程中经常会出现问题，有时您可以使用全局范围和 portlet 首选项来查明导致 RP 失败的一些错误文档或您所做的时髦开发工作。在这种情况下，我通常使用此顺序 a) 控制面板中的扳手图标中的文档和媒体 [排除缩略图，否则您的 lar 文件可能会加倍，如果您不使用它们，也排除排名] b) 来自控制面板中的扳手图标 c) 公共页面 [包括数据 > 网页内容显示，

5.  如果您已经拥有管理员角色，并且表示您没有 RP 到远程站点的权限，请使用“站点管理员”或“站点所有者”角色在目标环境中设置您的用户。

6.  首先有点晚了，但是任何时候你有什么不工作的东西（远程发布或其他），在你做任何其他事情之前检查日志。Liferay 代码库不包括很多有用的日志记录，但您偶尔会得到一些信息，这些信息可以帮助您拼凑足够多的信息来进行根本原因分析。

干杯! 高温高压

# vba - 复制的范围连续搜索下一个空单元格，但跳过合并的单元格

> ID：13049391
> 
> 赞同：0
> 
> 时间：2012-10-24T12:38:01.803
> 
> 标签：vba, excel, merge, excel-2007, range

我见过很多人谈论这个问题，但更多是从将合并的单元格复制到单个单元格的角度来看。我有一个从工作簿获取范围的过程，打开第二个工作簿并尝试将其粘贴到指定行的下一个空白单元格中；

```
Public Sub BankBalances()
Dim fname As String
Dim fname2 As String
Dim mt As String, yr As String
'get the selected month
mt = MonthBox.Value
'get the selected year
yr = YearBox.Value
'set the file path to the selected year, month and the saving format
fname = yr & mt & "DB" & ".xlsx"
'set the file path to the selected year, month to open the trial balance sheet
fname2 = yr & mt & "TB" & ".xlsx"
'get the ranges
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = Workbooks(fname2).Worksheets("excel").Range("I100")
'check for the next empty cell in row 55
Set rng2 = Workbooks(fname).Worksheets("UK monthly dashboard").Cells(55, Columns.Count).End(xlToLeft).Offset(0, 1)
'set the new range to hold the data from the original range
rng2.Value = rng1.Value
'set the result to format according to the other information in the workbook
rng2.Value = Round(rng1.Value / 1000, 0)

End Sub 
```

上面的代码会将数据粘贴到未合并行的下一个空白单元格中。我需要它能够粘贴到合并的单元格中。

我想知道是否有办法使用 VBA 将数据放入合并的单元格，或者我是否需要执行单独的过程来检查合并的单元格，取消合并它们，然后在数据复制后合并它们。

如果是这样，我是否能够以类似于检查下一个空单元格的方式执行此操作，然后检查它是否已合并，然后执行取消合并并再次合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:45:03.637

> 如果我明白你在说什么，那么是的，但如果我可以改变你的例子，我希望将 A1 的内容放入合并的 D1:D2 中。所以它是一个单元格进入两个合并在一起的值 – JamesDev 4 小时前

这是你正在尝试的吗？

```
Sub Sample()
    Dim Rng1 As Range
    Dim Rng2 As Range
    Dim ws As Worksheet

    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        Set Rng1 = .Range("A1")
        Set Rng2 = .Range("D1:D2")

        '~~> Check if cells are merged
        If Rng2.MergeCells Then
            '~~> If merged then write to first cell
            Rng2.Cells(1, 1).Value = Rng1.Value
        Else
            Rng2.Value = Rng1.Value
        End If
    End With
End Sub 
```

# c# - 在 TextEdit 中设置字符串，它只允许 int

> ID：13049392
> 
> 赞同：0
> 
> 时间：2012-10-24T12:38:01.510
> 
> 标签：c#, textbox, devexpress

我正在使用 DevExpress。在我的项目中，我有控件（textEdit），其中 EditValue 绑定到“int”类型的属性。问题是控件只允许输入数字。

我的任务是：当表单处于编辑模式时，textEdit 应该显示单词“Automatic”，并且只有在按下安全按钮后才会生成数字。现在在编辑模式下文本框显示“0”，是否可以在“0”的情况下使其显示“自动”。

有文本框绑定到的属性：

```
int fEventNr;
public int EventNr {
    get { return fEventNr; }
    set { SetPropertyValue<int>("EventNr", ref fEventNr, value); }
} 
```

一切正常，除了它显示“0”而且我不知道如何让他显示“自动”也许有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:03:43.487

这是您的问题的解决方案：

```
textEdit1.Properties.CustomDisplayText += new Properties_CustomDisplayText;

void Properties_CustomDisplayText(object sender, DevExpress.XtraEditors.Controls.CustomDisplayTextEventArgs e)
{
    if (yourCondition)
        e.DisplayText = "Automatic";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:39:42.743

```
txtEdit.Properties.NullText = "Automatic";
txtEdit.EditValue = null; 
```

考虑更改`public int EventNr`为，`public int? EventNr`以便您可以确定如果 EditValue 为空，则用户没有提供任何值，并且您应该“自动”生成它：) 我认为将 0 视为 [未设置值] 是一种不好的做法。这就是他们发明空值的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T07:24:23.027

在属性面板上，转到 Properties ->`Mask . Set "MaskType" to RegEx`并设置`"EditMask"`为`\d*`. 如果您不希望整数以零开头，则改为设置`"EditMask"`为`[1-9]+\d*`。或者，您可以通过代码执行此操作：

```
this.textEditIntegersOnly.Properties.Mask.EditMask = "[1-9]+\\d*";
this.textEditIntegersOnly.Properties.Mask.MaskType = DevExpress.XtraEditors.Mask.MaskType.RegEx; 
```

# ios - RestKit 将 XML 映射到 Core Data

> ID：13049396
> 
> 赞同：0
> 
> 时间：2012-10-24T12:38:15.930
> 
> 标签：ios, xml-parsing, restkit

我用它工作了两天...我想获取远程 xml，然后将其解析/映射到核心数据。我已经阅读了一堆教程，所以此时我可以连接本地服务器（yyuupii！），获取 xml，但我在映射时遇到了问题。我明白了

> -[RKObjectLoader canParseMIMEType:] 找不到 MIME 类型“application/xml”的解析器
> 
> -[RKObjectLoader isResponseMappable] 遇到意外响应，状态码：200（MIME 类型：application/xml -> URL：http:///list.xml -- http:/// -- http:/// -- http: ///) 2012-10-24 14:13:12.201 Sierpien[4650:907] Error Domain=org.restkit.RestKit.ErrorDomain Code=4 "操作无法完成。(org.restkit.RestKit.ErrorDomain错误 4.)"

你能给我一些建议吗，我将不胜感激。

我的 XML

```
<packs>
    <pack>
        <cover>cover.png</cover>
        <info>Jakis.adres.pl</info>
        <link>Opis</link>
        <name>wrzesień</name>
        <price>5.00</price>
    </pack>
    <pack>
        <cover>cover2.png</cover>
        <info>Jakis1.adres.pl</info>
        <link>Opis31</link>
        <name>wrzesień12</name>
        <price>15.00</price>
    </pack>
</packs> 
```

我的实体

```
@interface Pack : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * link;
@property (nonatomic, retain) NSString * price;
@property (nonatomic, retain) NSString * info;
@property (nonatomic, retain) NSString * cover;

@end 
```

我的实现

```
- (id)initClient
{
    self = [super init];
    if (self) {
        RKObjectManager *client = [RKObjectManager objectManagerWithBaseURL:[RKURL URLWithString:@"http://10.1.1.5:8888/"]];
        NSLog(@"I am your RKObjectManager singleton : %@", [RKObjectManager sharedManager]);
        client.serializationMIMEType = RKMIMETypeXML;

        RKObjectMapping* listMapping = [RKObjectMapping mappingForClass:[Pack class]];
        [listMapping mapKeyPath:@"cover" toAttribute:@"cover"];
        [listMapping mapKeyPath:@"name" toAttribute:@"name"];
        [listMapping mapKeyPath:@"info" toAttribute:@"info"];
        [listMapping mapKeyPath:@"link" toAttribute:@"link"];
        [listMapping mapKeyPath:@"price" toAttribute:@"price"];

        [[RKObjectManager sharedManager].mappingProvider setMapping:listMapping forKeyPath:@"packs.pack"];
    }
    return self;
}

- (void)loadPacks {
    [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/list.xml" delegate:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:15:20.380

好的，我扔掉 RKObjectManager，现在我连接 RKClient，获取 xml

`[[RKClient sharedClient] get:@"/list.xml" delegate:self];`

然后我通过 GDataXML 解析 Xml，用解析后的数据填充 Pack。有用。

# sql - 将变量设置为选择查询 SQL Server 2012 的结果

> ID：13049400
> 
> 赞同：0
> 
> 时间：2012-10-24T12:38:32.060
> 
> 标签：sql, sql-server-2012

我试图找到一种最经济的方法来实现返回我想要的数据并更新同一个存储过程中的另一个表。

我在下面大大简化了我的 SQL 来说明我的问题。这是我想要实现的目标：

```
DECLARE @UserID INT
SELECT TOP(1) @UserID = UserID, UserName, email, (#Loads of other columns#) FROM Users
UPDATE Logins SET LoggedIn = 1 WHERE UserID = @UserID 
```

我知道我可以通过确保所有返回的列都分配给一个局部变量来做到这一点，但是有太多的列不能成为一个有效的 SPROC。

我不想执行两次 SELECT 语句（一次返回数据，一次设置变量，准备更新语句）

有什么建议吗？谢谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:55:33.250

您可以使用`OUTPUT`来获取本地表变量的值，但您仍然必须使用本地`SELECT`来从表变量中获取单个值。

```
DECLARE @TBL TABLE(userid int, username varchar(50), email varchar(50), logged bit)

DECLARE @userid int

UPDATE TOP (1) Users
SET logged = 1
OUTPUT deleted.* INTO @TBL

SELECT top (1) @userid = userid from @TBL

SELECT @userid 
```

[小提琴示例](http://www.sqlfiddle.com/#!3/778a6/4/0)

# asp.net - 如何避免 Global.asax 用于“VaryByCustom”缓存

> ID：13049401
> 
> 赞同：4
> 
> 时间：2012-10-24T12:38:35.920
> 
> 标签：asp.net, caching, outputcache

我正在写一个自定义`HttpModule`，我需要使用：

```
Response.Cache.SetVaryByCustom("role"); 
```

基本上，我需要根据用户的成员身份缓存响应。我所有的研究都指向了这个页面：

[http://msdn.microsoft.com/en-us/library/5ecf4420(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/5ecf4420%28v=vs.100%29.aspx)

建议在 Global.asax中覆盖的位置`GetVaryByCustomString`。

有没有办法可以避免在 global.asax 中这样做？让我们假设我正在构建一个收缩包装的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:56:42.290

为什么“shrinkwrapped”应用程序会排除 Global.asax？

尝试这个：

```
 public override string GetVaryByCustomString(HttpContext context, string custom)
    {
        if (custom == "role")
            return Roles.GetRolesForUser().Aggregate((a,b) => a = a+b);
    } 
```

# c# - 在 C# 中跨两个文件拆分方法

> ID：13049403
> 
> 赞同：5
> 
> 时间：2012-10-24T12:38:54.317
> 
> 标签：c#, methods, partial

是否可以在 C# 中将方法拆分为两个文件？我知道有部分方法，但他们似乎无法做到这一点。

这是场景。我正在使用一个开源库，需要在一个或多个文件中添加一些自定义项。例如，我想在类中添加两个新字段`Employee`，然后在该类的`InitializeFields()`方法中对其进行初始化。由于开源项目不断发展并且不时发布新版本，我希望将我的自定义项与原始项目分开，以便轻松升级到更新版本的库。

我已经将所有必需的类拆分为语法`Orig.cs`并`Custom.cs`使用`partial class`语法，并将我的自定义字段添加到`Custom.cs`. 现在的问题是我无法拆分`InitializeFields()`方法，以便我的自定义代码进入`Custom.cs`文件。

请注意，我不能使用继承来解决问题。开源库将包含对 Employee 类的大量引用，我无法更改所有这些引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:48:11.113

当你这样做时，你是在自己编译库，对吧？

我知道你不想 subclass `Employee`，因为那样做的所有库代码都`new Employee()`不起作用。但是，如果您在 Orig.cs 中重命名`Employee`为`EmployeeBase`，并在 Custom.cs 中提供类`Employee`怎么办？这样，当编译库代码时，`new Employee()`将引用您的类，而不是库。由于您在同一个项目中编译库和自定义项，因此您可以进行此替换。

# css - 屏幕上的 CSS 1x1 英寸框

> ID：13049411
> 
> 赞同：1
> 
> 时间：2012-10-24T12:39:15.967
> 
> 标签：css

我怎样才能将一个盒子指定为 1x1 英寸。这应该打印为 1x1 英寸的盒子，在屏幕上将被视为 1x1 英寸的盒子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T12:40:58.250

JSFiddle：http: [//jsfiddle.net/eR9CS/](http://jsfiddle.net/eR9CS/)

**英寸：**

```
<div style="background-color: red; width: 1in; height: 1in;"></div>​ 
```

**厘米：**

```
<div style="background-color: red; width: 1cm; height: 1cm;"></div>​ 
```

**相对长度单位**

*   `em`计算的字体大小。
*   `ex`小写“x”的高度。
*   `px`像素，相对于查看设备。
*   `%`百分比。
*   `rem`根元素的字体大小。
*   `vw`视口宽度。
*   `vh`视口高度。
*   `vm`视口宽度或高度的较小值。
*   `ch`零宽度（渲染字体中零字形的宽度）。

**绝对长度单位**

*   `in`英寸（1 英寸 = 2.54 厘米）。
*   `cm`厘米。
*   `mm`毫米。
*   `pt`点（1 点 = 1/72 英寸）。
*   `pc`皮卡斯（1 皮卡 = 12 分）。

如果您想在任何地方使用厘米但想要一英寸，请使用`style="width: 2.54cm; height: 2.54cm;"`since `1 inch = 2.54cm`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T13:02:47.883

这是不可能的。你只能得到一些近似值。将宽度和高度设置为`1in`是您的最佳拍摄，但这不是一个特别好的拍摄，因为您可以看到您是否测量尺寸（在不同的设备上）。正如 CSS3 单位模块[所描述](http://www.w3.org/TR/css3-values/#absolute-lengths)的，所谓的绝对单位可以锚定到物理单位或像素。`1in`像= then这样的固定关系`96px`意味着（除了意外）CSS`in`不是真正的物理英寸或 CSS`px`不是真正的物理像素。

在纸面上，你可以期望一个物理单位是锚单位，所以这`in`实际上是英寸。但即使是这种期望也经常失败。

# javascript - 在javascript中调用链方法

> ID：13049412
> 
> 赞同：1
> 
> 时间：2012-10-24T12:39:20.647
> 
> 标签：javascript

我正在使用以下代码，但它不断给我错误：

> TypeError: container("accounts").atPosition("#left-top") 未定义

代码是：

```
function container(name, position) {
    return {
        pos: null,
        atPosition: function(position) {

            $(position).html(this.newContainer());
            //$(position+" .main").html("yes");
            this.pos = position;
        },
        populateData: function(rdata) {
            $("#left-top .main").html(rdata);
        },
        newContainer: function() {
            //alert(this.pos);
            return '<h3>' + name.toTitleCase() + '</h3>\
                <div class="main">\
                </div>';
        }
    };
}

container('accounts').atPosition('#left-top').populateData("yahoo!!!!");​ 
```

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T12:43:41.230

您应该从函数返回`this`以进行链接。默认情况下函数返回未定义（如果你不使用`new operator`）。通过从没有任何返回内容的函数返回 this 将有助于链接。

```
function container(name, position) {
    return {
        pos: null,
        atPosition: function(position) {
            $(position).html(this.newContainer());
            //$(position+" .main").html("yes");
            this.pos = position;

            return this;
        },
        populateData: function(rdata) {
            $("#left-top .main").html(rdata);
            return this;
        },
        newContainer: function() {
            //alert(this.pos);
            return '<h3>' + name.toTitleCase() + '</h3>\
                <div class="main">\
                </div>';
        }
    };
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:43:46.717

您分配给的函数`atPosition`没有`return`语句。

所以当你调用时`atPosition('#left-top')`，你会得到默认的返回值`undefined`

您需要返回要调用的对象`populateData`（应该是`this`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-16T23:26:36.737

函数链接**不是一种特殊的 javascript 语法**，如果你愿意，你可以用 Java、Python 或任何支持 OOP 的东西来实现它。

`a.functionX().functionY()`**有效**，因为`functionX()`再次返回**一个对象**，该对象具有一个名为**`functionY()`**

 **在您的情况下，`functionX()`应该返回调用它的相同对象，因此`return this;`将解决您的问题

**但这不是故事的结局！！！**

@Rich S 在他的回答中提到：

> 为了使链接工作，您需要“返回这个；” 在您要链接的任何功能的末尾。

这**不是必需的 true**，只要您返回**一个对象（或任何对象）**，链接就会起作用，这是一个示例：

```
var str ="abc";
var strFromChain = str.replace('a','x').toUpperCase();
// use function chainning
document.write(strFromChain+'\n');
// result should be XBC

var str1 = "abc";
str1.replace('a','x');
var str1NotFromChain = str1.toUpperCase();
// if replace() returned this, str1NotFromChain should also be XBC
document.write(str1NotFromChain)
// but is it???????
```

显然`replace()`方法 of`str`没有返回`this`，而是返回一个具有不同值的新字符串，这很容易理解，因为**字符串是不可变的**，无论你调用什么方法`str`，它的值总是`"abc"`.

我只是在这里说明一点，**链接方法没有必要返回`this`，它可以返回一个新对象，如果它愿意**。即使在线教程教您`this`在实现链接函数时使用（即[javascript.issexy](http://javascriptissexy.com/beautiful-javascript-easily-create-chainable-cascading-methods-for-expressiveness/)），您也应始终注意使用第三方库时返回的内容（即 expressjs 中的路由[链接](http://expressjs.com/en/guide/routing.html)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T12:48:27.933

链接不会自动发生。

为了使链接工作，您需要“返回这个；” 在您要链接的任何功能的末尾。

实际上，您所做的只是在返回的任何内容上调用该函数。如果你“返回这个；” 然后你会得到一个很好的链接语法，它会影响同一个对象。

鉴于您的问题，jQuery 开发人员指南是获取优质 JavaScript 技巧的好地方，我建议您查看[http://docs.jquery.com/Plugins/Authoring#Maintaining_Chainability](http://docs.jquery.com/Plugins/Authoring#Maintaining_Chainability)**

# jquery - JQuery-File-Upload Button 依赖项

> ID：13049415
> 
> 赞同：1
> 
> 时间：2012-10-24T12:39:48.480
> 
> 标签：jquery

我正在使用这个[应用程序示例](https://github.com/tors/jquery-fileupload-rails-paperclip-example)并尝试对其进行建模以满足我的需求。

我正在为您的 index.html.erb 建模以满足我的需求。我想摆脱“开始”按钮以防止单文件上传（我不想要它），但似乎“开始上传”（多个上传）按钮依赖于“开始”按钮，我不能了解如何修改脚本以摆脱“开始”按钮但保留“开始上传”按钮的功能。

你能给我一些提示如何摆脱这些依赖吗？

Hier 是短代码截断：我已经用 !!! 标记了“开始上传”和“开始”按钮所在的行。

```
<div class="container">
      <h2>Upload file</h2>
      <%= form_for Upload.new, :html => { :multipart => true, :id => "fileupload" } do |f| %>
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
          <div class="span7">
            <!-- The fileinput-button span is used to style the file input field as button -->
            <span class="btn btn-success fileinput-button">
              <i class="icon-plus icon-white"></i>
              <span>Add files...</span>
              <%= f.file_field :upload %>
            </span>
            <button type="submit" class="btn btn-primary start">
              <i class="icon-upload icon-white"></i>
 !!!!            <span>Start upload</span>
            </button>
            <button type="reset" class="btn btn-warning cancel">
              <i class="icon-ban-circle icon-white"></i>
              <span>Cancel upload</span>
            </button>
            <button type="button" class="btn btn-danger delete">
              <i class="icon-trash icon-white"></i>
              <span>Delete</span>
            </button>
            <input type="checkbox" class="toggle">
          </div>
          <div class="span5">
            <!-- The global progress bar -->
            <div class="progress progress-success progress-striped active fade">
              <div class="bar" style="width:0%;"></div>
            </div>
          </div>
        </div>
        <!-- The loading indicator is shown during image processing -->
        <div class="fileupload-loading"></div>
        <br>
        <!-- The table listing the files available for upload/download -->
        <table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody>
        </table>
      <% end %>

    </div>

    <!-- The template to display files available for upload -->
    <script id="template-upload" type="text/x-tmpl">
      {% for (var i=0, file; file=o.files[i]; i++) { %}
      <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
        <td>
          <div class="progress progress-success progress-striped active"><div class="bar" style="width:0%;"></div></div>
        </td>
   !!!     <td class="start">{% if (!o.options.autoUpload) { %}
          <button class="btn btn-primary">
            <i class="icon-upload icon-white"></i>
            <span>{%=locale.fileupload.start%}</span>
          </button>
          {% } %}</td>
        {% } else { %}
        <td colspan="2"></td>
        {% } %}
        <td class="cancel">{% if (!i) { %}
          <button class="btn btn-warning">
            <i class="icon-ban-circle icon-white"></i>
            <span>{%=locale.fileupload.cancel%}</span>
          </button>
          {% } %}</td>
      </tr>
      {% } %}
    </script>
    <!-- The template to display files available for download -->
    <script id="template-download" type="text/x-tmpl"></script>

    <script type="text/javascript" charset="utf-8">
      $(function () {
          // Initialize the jQuery File Upload widget:
          $('#fileupload').fileupload();
          //
          // Load existing files:
          $.getJSON($('#fileupload').prop('action'), function (files) {
            var fu = $('#fileupload').data('fileupload'),
              template;
            fu._adjustMaxNumberOfFiles(-files.length);
            console.log(files);
            template = fu._renderDownload(files)
              .appendTo($('#fileupload .files'));
            // Force reflow:
            fu._reflow = fu._transition && template.length &&
              template[0].offsetWidth;
            template.addClass('in');
            $('#loading').remove();
          });

      });
    </script> 
```

谢谢你。干杯，卡佳

# php - PHP 会话不打球

> ID：13049416
> 
> 赞同：0
> 
> 时间：2012-10-24T12:39:54.443
> 
> 标签：php, mysql, session

所以我现在基本上是在搞乱我自己的 cms 类型系统，并且遇到了 php 会话的一些问题。以下是我所拥有的粗略解释，

所有 SQL 都运行良好，就好像我删除了没有登录错误的会话（除非我输入了不正确的凭据），

```
$query = "SELECT * FROM `test` WHERE username='$user' AND password='$pass_md'";
$result = mysql_query($query) or die("Error: " . mysql_error());
$rows = mysql_num_rows($result);
$data = mysql_fetch_assoc($result);

if($rows == 1){
 $_SESSION['expire'] = time() + (10 * 60); 
 $_SESSION['id'] = $data['id'];
 header("Location: admin.php");
} 
else {
header("Location: ulogin.php?login=failed");
} 
```

所以在 admin.php 我有这个，

```
<?php
session_start();
if(!(isset($_SESSION['id']))){
 header("Location: ulogin.php");
}
?> 
```

我的问题是它让我登录，然后将我直接传回 ulogin.php，所以我假设我有一个空会话但是我将用户 ID 插入到会话中。

任何帮助将不胜感激，我可能遗漏了一些非常明显的东西，我不是最先进的 php 开发人员，所以是的，需要更多的关注。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:54:56.970

发现了问题，因为我使用了 2 个单独的登录页面（一个用于前端，一个用于后端）我丢失了；

```
<?php
session_start();
?> 
```

从我的一个登录页面，现在排序，感谢所有的评论，实际上让我三重检查！

# java - Java：如何重写这个泛型方法？

> ID：13049420
> 
> 赞同：11
> 
> 时间：2012-10-24T12:40:05.500
> 
> 标签：java, generics, overriding, type-erasure

```
public <S extends T> List<S> save(Iterable<S> entities) {
        //...
} 
```

如果我使用以下方法覆盖

```
@Override
public List<MyType> save(Iterable<MyType> structures) {
    List<MyType> result = new ArrayList<>();
    //...
    return result;
} 
```

我收到以下错误：

```
method does not override or implement a method from a supertype

name clash: save(Iterable<MyType>) in MyTypeRepositoryImpl and <S>save(Iterable<S>) in SimpleJpaRepository have the same erasure, yet neither overrides the other
  where S,T are type-variables:
    S extends T declared in method <S>save(Iterable<S>)
    T extends Object declared in class SimpleJpaRepository 
```

我该如何解决这个问题？我不需要该方法是通用的，实际上它不应该是通用的。我的意思是

```
@Override
public <S extends MyType> List<S> save(Iterable<S> structures) {
    List<S> result = new ArrayList<>();
    //...
    return result;
} 
```

将不起作用，因为该方法可以创建与 List 不“兼容”的 MyType 新对象。

我怎样才能使这项工作？

编辑：

为了澄清。我正在尝试覆盖 Spring 数据 SimpleJpaRepository 的不同 save() 方法（由 QuerydslJpaRepository 扩展）

类定义：

```
public class MyTypeRepositoryImpl
    extends QueryDslJpaRepository<MyType, Long>
    implements MyTypeRepository

@NoRepositoryBean
public interface MyTypeRepository
    extends JpaRepository<MyType, Long>,
    QueryDslPredicateExecutor<MyType> 
```

而这个（来自 Spring Data）

```
public class QueryDslJpaRepository<T, ID extends Serializable> 
extends SimpleJpaRepository<T, ID> 
implements QueryDslPredicateExecutor<T> 
```

编辑2：

该方法为每个元素调用 save(MyType entity) ，该方法包含以下逻辑：

1.  实体有一个唯一的字段
2.  获取该字段值并检查具有该值的实体是否已存在
3.  如果是，则使用该实体（调用 entityManager.merge）-> 不起作用返回 MyType 而不是 S
4.  如果没有，则创建一个新对象-> 此处创建新对象。不适用于泛型类型

对于 4\. 我可以设置 id = null 并使用传入的对象。这对 3 不起作用。

所以我很疑惑为什么这个方法有这个签名。它使我无法使用它，我不明白为什么我会使用 Ts DAO 保存 T 的子类。保存方法是唯一带有 . 所有其他人都只使用 T。我可以将其转换为 S 以使其编译，但这看起来也很丑陋……因为除 T 之外的任何其他类型都会导致异常。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T12:56:00.960

对于一种方法来覆盖另一种方法，它必须至少应用于被覆盖方法的所有有效参数。您的基本方法是通用的`public <S extends T> List<S> save(Iterable<S> entities)`。所以它会接受任何`S`扩展的类型`T`。但是，您的覆盖更具限制性，因为它只接受 的集合`MyType`，因此它不是有效的覆盖。

如果您使用 定义了基类`T`，并且只接受了方法`T`，并且派生类锁定`T`给`MyType`您应该没问题。

为了给出更好的答案，我们需要查看这两个类的类声明。我建议如下：

```
class MyClass<T>{
  public List<T> save(Iterable<T> entities);
}

class OtherClass extends MyClass<MyType>{
  public List<MyType> save(Iterable<MyType> entities);
} 
```

编辑：

如果您无法控制基类（您似乎没有），那么您将被`public <S extends MyType> List<S> save(Iterable<S> structures)`签名卡住。这是因为被覆盖的方法是泛型的，所以覆盖的方法也必须是

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T13:05:23.150

取决于您如何定义，以下工作

```
public class TestGenerics2<T> {
    public <S extends T> List<S> save(Iterable<S> entities) {
        return new ArrayList<S>();
    }
}

public class TestGenerics3 extends TestGenerics2<Number> {
    @Override
    public <S extends Number> List<S> save(Iterable<S> entities) {
        return super.save(entities);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:03:25.763

这是一个编译的例子，它展示了如何使用它：

```
abstract class A<T> {
    abstract public <S extends T> List<S> save(Iterable<S> entities); 
}

class B extends A<List<Integer>> {

    @Override
    public <S extends List<Integer>> List<S> save(Iterable<S> entities) {
        return null;
    }
}

class C {
    public void useIt() {
        B b = new B();
        Iterable<ArrayList<Integer>> it = new ArrayList<ArrayList<Integer>>();
        b.save(it);
    }
} 
```

类`A`定义具有原始签名的方法。类`B`实现它并选择`List<Integer>`类型参数`T`。最后，class`C`使用这个方法，`Iterable`泛型类型是`List<Integer>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T13:00:55.853

自从

```
public <S extends T> List<S> save(Iterable<S> entities) 
```

给出，你的覆盖必须是

```
public <S extends MyType> List<S> save(Iterable<S> structures) 
```

并且您的实现必须尊重 S 可能是 MyType 的真正子类型。

你的方法

```
public List<MyType> save(Iterable<MyType> structures) 
```

不是正确的覆盖：

*   由于 Java >=1.5 允许[协变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29#Java)返回类型并且`List<MyType>`是 的子类型`List<S extends MyType>`，这没关系，但是
*   Java 只允许不变参数类型，但`Iterable<MyType>`它是 的子类型`Iterable<S extends MyType>`，因此您的编译器错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T09:28:43.063

我的解决方案是根本不覆盖它，而是创建一个服务类来执行所需的逻辑并使存储库保持不变。

# jquery - 基于 Symfony 2.1 中的另一个 Select Box 显示 Select Box 的内容

> ID：13049422
> 
> 赞同：4
> 
> 时间：2012-10-24T12:40:11.630
> 
> 标签：jquery, symfony, listbox, symfony-2.1

[如何使用与另一个选择框相关的选择框](https://stackoverflow.com/questions/9052916/how-to-use-select-box-related-on-another-select-box)的答案？帮助我开始，如果我将第一个选择框的 id 硬编码到第二个选择框中，我的代码就可以工作。但是，如果我尝试使用实际的表单值，我会得到一个

> 注意：未定义索引：my_group

这是我要基于组选择下拉框显示的下拉框的代码：

```
 $builder->add('subscriptiontype', 'entity',
        array(
            'label' => 'profile.edit.my_subscription_type', 
            'translation_domain' => 'FOSUserBundle',
            'empty_value' => 'Select subscription type',
            'property' => 'subscription_title',
            'class' => 'SDMarketplaceBundle:SubscriptionType',
            'multiple' => false,
            'attr' => array('onchange' => '',  'class' => ''),
            'query_builder' => function($repository) use ($options){ 
                return $repository
                    ->createQueryBuilder('j')
                        ->where('j.isActive = :active AND j.valid_until > :timenow AND j.group = :group_id')
                        ->setParameter('active', 1)
                        ->setParameter('timenow', new \DateTime('now'))
                        ->setParameter('group_id', $options['my_group'])
                    ->orderBy('j.subscription_title', 'ASC');
                    }
        )
    ); 
```

如果我将**$options['my_group']**更改为作为组 ID 的实际数字，它会正确显示。这是我实际放置 id 代替**$options['my_group']**时的 html 代码输出：

```
<select id="fos_user_profile_form_my_group" name="fos_user_profile_form[my_group]" required="required"><option value="">Select group</option><option value="5">administrator</option><option value="2" selected="selected">instructor</option><option value="3">proofreader</option><option value="1">student</option><option value="4">translator</option></select> 
```

对我做错或遗漏的事情有任何帮助吗？

----为我迟到的回复道歉，因为我没有看到你的帖子（但谢谢你。）这是我的 showAction 控制器代码：

```
public function showAction()
    {
        $user = $this->container->get('security.context')->getToken()->getUser();
        if (!is_object($user) || !$user instanceof UserInterface) {
            throw new AccessDeniedException('This user does not have access to this section.');
        }

        $myGroup = $this->getEntityManager()->getRepository('SDMarketplaceBundle:Groups')->findOneBy(array('id' => $user->getMyGroup())); //retrieve the group selected by this user
        $subscriptiontype = $this->getEntityManager()->getRepository('SDMarketplaceBundle:Subscriptiontype')->findOneBy(array('id' => $user->getSubscriptiontype())); //retrieve the subscription type title for this user
        $accounttype = $this->getEntityManager()->getRepository('SDMarketplaceBundle:AccountType')->findOneBy(array('id' => $user->getMyAccountType())); //retrieve the account type name for this user
        return $this->container->get('templating')->renderResponse('FOSUserBundle:Profile:show.html.'.$this->container->getParameter('fos_user.template.engine'), 
        array(
            'user' => $user, 
            'myGroup' => $myGroup,
            'subscriptiontype' => $subscriptiontype->getSubscriptionTitle(),
            'accounttype' => $accounttype->getAccountName(),
            'statusCode' => $user->getStatusName($user->getStatusCode())
        ));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:33:09.293

看看这个 [http://showmethecode.es/php/symfony/symfony2-selects-dependientes-mediante-eventos/?utm_source=rss&utm_medium=rss&utm_campaign=symfony2-selects-dependientes-mediante-eventos](http://showmethecode.es/php/symfony/symfony2-selects-dependientes-mediante-eventos/?utm_source=rss&utm_medium=rss&utm_campaign=symfony2-selects-dependientes-mediante-eventos)

你可以在这里看到一个演示：http: [//sf2.showmethecode.es/app.php/ejemlo/selects-dependientes](http://sf2.showmethecode.es/app.php/ejemplo/selects-dependientes)

# jsoup - JSoup 添加额外 的

> ID：13049423
> 
> 赞同：1
> 
> 时间：2012-10-24T12:40:14.667
> 
> 标签：jsoup

JSoup 似乎在我的输出中添加了额外的 br 标签，如下所示。有没有办法阻止这种情况发生？

JUnit 测试：

```
@Test
public void testJsoup () throws MLException {
    String htmlBody = "<body> <div> <br class='calibre1'></br> <br class='calibre1'></br></div> </body>"; 
    Document doc = Jsoup.parse(htmlBody);
    htmlBody = doc.select("body").first().toString();
    System.out.println(htmlBody);
} 
```

控制台输出：

```
<body> 
 <div> 
   <br class="calibre1" />
   <br /> 
   <br class="calibre1" />
   <br />
 </div> 
</body> 
```

问候，丹尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T19:05:09.353

我在这里没有看到任何额外的`<br />`-Tags ......你的意思是换行吗？
如果是，请看这里：[jsoup line feed](https://stackoverflow.com/questions/12503117/jsoup-line-feed/12503413)

**你可以做的是`prettyPrint`关闭：**

```
final String html = "<body> <div> <br class='calibre1'></br> <br class='calibre1'></br></div> </body>";

Document doc = Jsoup.parse(html);

// This line will keep your Html in one line
doc.outputSettings().prettyPrint(false);

System.out.println(doc.body()); 
```

**输出：**

```
<body> <div> <br class="calibre1" /><br /> <br class="calibre1" /><br /></div> </body> 
```

# c# - C# 多个异常的 XML 文档

> ID：13049427
> 
> 赞同：4
> 
> 时间：2012-10-24T12:40:26.857
> 
> 标签：c#, visual-studio-2010, exception-handling, xml-documentation

我实际上正在寻找一个指导方针，如何在 C#-DLL 内的公共方法中记录多个异常。

例子：

```
/// <summary>
/// This method does something
/// </summary>
/// <param name="p_Parameter1">First parameter</param>
/// <param name="p_Parameter2">Second parameter</param>
/// <param name="p_Number">A number</param>
/// <exception cref="ArgumentNullException">
/// Thrown if p_Parameter1 is null</exception>
/// <exception cref="ArgumentNullException">
/// Thrown if p_Parameter2 is null</exception>
/// <exception cref="ArgumentNullException">
/// Thrown if any element of p_Parameter2 is null</exception>
/// <exception cref="ArgumentOutOfRangeException">
/// Thrown if p_Number is below or equal 0</exception>
/// <returns>A object</returns> 
```

```
public static object DoSomething(
    object p_Parameter1, IList<object> p_Parameter2, 
    object p_Parameter3, int p_Number)
{
    if(p_Parameter1 == null)
        throw new ArgumentNullException(
            paramName:"p_Parameter1", 
            message:"Parameter is needed");
    if (p_Parameter2 == null)
        throw new ArgumentNullException(
            paramName: "p_Parameter2", 
            message: "Parameter is needed");

    for (int i = 0; i < p_Parameter2.Count; i++)
    {
        if(p_Parameter2[i] == null)
            throw new ArgumentNullException(
                paramName: String.Format("p_Parameter2[{0}]", i),
                message: "All elements have to be initialized");
    }

    if(p_Number < 0)
        throw new ArgumentOutOfRangeException(
            paramName: "p_Number", 
            message: "Parameter should be bigger then zero");

    var returnValue = new object();

    // do something where p_Parameter3 == null is allowed

    return returnValue;
} 
```

记录这些例外情况是否正确？我应该为每种情况添加一个异常标签，还是应该只为所有不允许使用空值的参数添加一个？

```
/// <exception cref="ArgumentNullException">
/// Thrown if p_Parameter1, p_Parameter2
/// or any element of p_Parameter2 are null</exception> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:59:16.297

我肯定会按类型对异常进行分组，即`Thrown if p_Parameter1, p_Parameter2 or any element of p_Parameter2 are null`.

作为参考，请查看 MSDN 上的文档。一个[例子](http://msdn.microsoft.com/en-us/library/dd383356.aspx)：

```
ArgumentNullException   |   Either path, contents, or encoding is null. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:59:25.903

在这种情况下，MSDN 是一个很好的模拟来源，并且对[那里的](http://msdn.microsoft.com/en-us/library/sdx2bds0.aspx)[一些](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx) [函数](http://msdn.microsoft.com/en-us/library/7cb5zb8y.aspx) 进行了调查，看起来它们倾向于使用一个块并枚举其中的不同参数。`exception`

这样做可以使代码的使用者更容易知道可能捕获哪些异常，因为查看不同异常的列表比包含重复的列表更容易理解。

# php - Codeigniter 表单验证回调不起作用

> ID：13049431
> 
> 赞同：2
> 
> 时间：2012-10-24T12:40:42.650
> 
> 标签：php, codeigniter

我正在尝试用我自己的函数扩展验证类，但它似乎跳过了检查。

**我的代码**

```
public function login_validation(){
 $this->load->library('form_validation');
 $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email|xss_clean|callback_validate_credentails');
 $this->form_validation->set_rules('password', 'Password', 'trim|required|md5');
    if($this->form_validation->run()){
        #redirect('home');
        //Just to check 
        echo "login success";
    }
    else{
        $this->load->view('view_login');
    }
} 
```

我的 validate credentails 函数是这样的；

```
public function validate_credentials(){
   //loads model_user
   $this->load->model('model_users');
   //checks if login_validate function in model_users return true
    if($this->model_users->login_validate()){
        return true;
    }
    else{
        //set validation message
        $this->form_validation->set_message('validate_credentails','Incorrect Username/Password');
        return false;
    }

} 
```

如果需要，我在 model_users 中的 login_validate 函数；

```
public function login_validate(){
    $this->db->where('email', $this->input->post('email'));
    $this->db->where('password', md5($this->input->post('password')));
    $query = $this->db->get('users');
    if($query->num_rows() == 1){
        return true;
    }
    else {
        return false; 
        }

} 
```

这是我第一次遇到这个问题，我做错了吗？我在这上面花了太多时间:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:04:26.623

我刚刚找到了解决方案。我需要`form_validation`按照 Nish 的建议更改类的名称并添加此功能。

```
class MY_Form_validation extends CI_Form_validation {
    function run($module = '', $group = ''){
        is_object($module) AND $this->CI = &$module;
        return parent::run($group);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:53:43.657

你的回调是`callback_validate_credentails`（tails），你的函数名是`validate_credentials`（tials）。可能是错字？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T12:45:04.407

我认为最好的建议是您的 LOGIN_validation 检查是在您的模型中而不是在表单验证类中......它是不同的东西！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-16T11:37:10.383

如果您将该`Callback_`功能移动到同一个控制器，它将正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-11T04:23:02.867

**对于 Codeigniter 3 表单验证回调** 只需添加`public $CI`MY_Form_validation

路径：应用程序/库/MY_Form_validation

```
class MY_Form_validation extends CI_Form_validation
{
    public $CI;
} 
```

然后在您的控制器构造函数上：

```
$this->load->library('form_validation');
$this->form_validation->CI =& $this; 
```

这是一个与 HMVC 相关的回调问题。通过这个解决方案，当前控制器作为 $CI 变量分配给 form_validation 库。这将允许您的回调方法正常运行。

# jquery - 延迟加载导航菜单项

> ID：13049433
> 
> 赞同：1
> 
> 时间：2012-10-24T12:41:01.570
> 
> 标签：jquery, asp.net, jquery-ui

我的网站有一个顶部导航菜单。要求是在单击每个顶部导航菜单项时打开一个巨大的菜单。出于性能原因，我想加载页面，然后在后台完成大型菜单项的加载。实现这一目标的最佳方法是什么。

1) 我可以从 java 脚本加载用户控件/Web 控件吗？2）有一个隐藏面板加载从我的服务层获取JSON响应并在这个隐藏的div中呈现HTML会更好吗？

任何方向或示例都会有所帮助。

# java - NTEventLogAppender 不适用于我的 Java 应用程序

> ID：13049434
> 
> 赞同：1
> 
> 时间：2012-10-24T12:41:05.143
> 
> 标签：java, logging, log4j, event-log

我正在尝试写入 Windows 事件日志，但我遇到了一个烦人的问题。

首先，我使用此处找到的步骤创建了 NTEventAppender。
[如何根据需要创建 NTEventlogAppender.dll 以使用 log4cplus 在事件日志中记录事件](https://stackoverflow.com/questions/6697456/how-to-create-nteventlogappender-dll-as-required-for-logging-event-in-the-eventl)

我将 .dll 放在 System32 文件夹中。当我在 Eclipse 中构建并运行程序时，我收到了这个错误

```
java.lang.UnsatisfiedLinkError: org.apache.log4j.nt.NTEventLogAppender.registerEventSource(Ljava/lang/String;Ljava/lang/String;)I
    at org.apache.log4j.nt.NTEventLogAppender.registerEventSource(Native Method)
    at org.apache.log4j.nt.NTEventLogAppender.<init>(NTEventLogAppender.java:79)
    at org.apache.log4j.nt.NTEventLogAppender.<init>(NTEventLogAppender.java:49)
    at mahle.eolx.ws.Main.<clinit>(Main.java:30)
Exception in thread "main" 
```

我是否需要做一些不同的事情，因为这是一个 Java 应用程序，上面链接的问题是针对 C++ 应用程序的。

如果是这样，我需要做什么。

编辑：我发现我应该使用 log4j 下载中包含的 NTEventLogAppender.dll，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:18:04.913

我无法让它工作，但是我能够通过将 log4jna 用于 NTEventLogAppender (https://github.com/dblock/log4jna) 登录到事件查看器。

我采取了这些步骤

下载 log4j 并将 .jar 文件包含在您的项目中[http://logging.apache.org/log4j/1.2/download.html](http://logging.apache.org/log4j/1.2/download.html)

下载用于替换 NTEventLogAppender 的 log4jna 并将必要的 jars 添加到您的项目（log4jna、jna、平台）[http://log4jna.codeplex.com/](http://log4jna.codeplex.com/)

您需要在应用程序目录中的某处添加 Win32EventLogAppender.dll。

要让记录器记录有意义的消息，您需要更改注册表

```
 Windows Registry Editor Version 5.00

 [HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\eventlog\Application\"YourAppNameHere"]
 "EventMessageFile"="C:\\Program Files\\"Your Application"\\Win32EventLogAppender.dll"
 "CategoryMessageFile"="C:\\Program Files\\"Your Application"\\Win32EventLogAppender.dll"
 "TypesSupported"=dword:00000007
 "CategoryCount"=dword:00000006 
```

# jquery - 如何在 jqgrid 中实现组合框

> ID：13049444
> 
> 赞同：3
> 
> 时间：2012-10-24T12:41:40.507
> 
> 标签：jquery, jqgrid, combobox

我已经在 jqGrid 中实现了一个组合框。使用的插件如下：

[演示](http://jqueryui.com/resources/demos/autocomplete/combobox.html)

我遇到了一个问题，因为当我单击添加时，我会得到组合框，但是当我输入它并单击提交时，我无法获得我输入到 jqGrid 的值。我将我的 jqgrid 附加如下：

```
 var listData = [
                         { id: "1",listName: "List1",level: "level1"},
                         { id: "2",listName: "List3",level: "level3"}
                     ],
    $listgrid = $("#list");
    $listgrid.jqGrid({
        datatype:'local',
        data: listData,
        colNames:['id','Name','Level'],
        colModel:[
                    {name:'id',index:'id',width:70,align:'center',sorttype: 'int',hidden:true},
                    {name:'listName',index:'listName', width:65,editable: true, formatter: 'select',
                        edittype: 'select', editoptions: {
                            value: 'list1:List1;list2:List2;list3:List3',
                            dataInit: function (elem) {
                                setTimeout(function () {
                                    $(elem).combobox();
                                    $( "#toggle" ).click(function() {
                                        $(elem).toggle();
                                    });
                                 }, 50);
                             },
                         }
                     },
                     {name: 'level', index: 'level', width: 105, align: 'center', editable: true,
                         edittype: 'select', editoptions: {
                             value: 'level1:level1;level2:level2;level3:level3'
                         }
                     }
                ],
                rowNum:10,
                rowList:[5,10,20],
                pager: '#list_pager',
                gridview:true,
                ignoreCase:true,
                rownumbers:true,
                sortname: 'id',
                viewrecords: true,
                sortorder: 'desc',
                caption: "Soft Skills",
                height: '100%',
                width:'750',
                editurl: 'test.aspx',
                gridComplete: function() {
                    $("#list").addClass("nodrag nodrop");
                    $("#list").tableDnDUpdate();
                }
             });
             $listgrid.jqGrid('navGrid', '#list_pager', {edit: true, add: true, del: false, search: false, refresh:false},{height:280,reloadAfterSubmit:false},{reloadAfterSubmit:false}); 
```

请让我知道如何获取我输入到 jqGrid 的值。有可能吗？如果不可能，是否有任何组合框适用于 jqgrid。我已经搜索了其他组合框并尝试实现以下内容，但我无法在 jqGrid 中工作。

[组合框](http://source.dellsala.com/jquery-combobox/demo/)

是否可以在 jqGrid 中使用它，请任何人帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-01T12:45:17.580

您提供的[演示](http://jqueryui.com/resources/demos/autocomplete/combobox.html)链接没有显示它与 jqGrid 的关系。您提到的第二个链接（[http://source.dellsala.com/jquery-combobox/demo/](http://source.dellsala.com/jquery-combobox/demo/)）似乎已损坏。

因此，我试图根据您问题中的源代码向您展示一个示例。jqGrid 组件支持组合框。我根据[此处](https://free-jqgrid.github.io/examples/index.html)的文档修改了您的示例。您可以运行该片段并尝试一下，它现在显示组合框 - 如果您单击您选择的一行，它会启用编辑。

缺少事件`onSelectRow:`和一些设置：

```
// see: https://free-jqgrid.github.io/getting-started/
// CDN used: https://cdnjs.cloudflare.com/ajax/libs/free-jqgrid
$(function() {

  var listData = [
        {id: "1", listName: "List1", level: "level1"}, 
        {id: "2", listName: "List3", level: "level3"}
    ],
  $listgrid = $("#list");

  $listgrid.jqGrid({
    datatype: 'local',
    data: listData,
    colNames: ['id', 'Name', 'Level'],
    colModel: [{
        name: 'id', index: 'id',
        width: 70, align: 'center',
        sorttype: 'int',
        hidden: true, key: true
      },
      {
        name: 'listName', index: 'listName',
        width: 65, align: 'center',
        editable: true,
        formatter: 'select', edittype: 'select', stype: 'select',
        editoptions: {
          value: 'list1:List1;list2:List2;list3:List3',
          defaultValue: 'list1'
        }
      },
      {
        name: 'level', index: 'level',
        width: 105, align: 'center',
        editable: true,
        formatter: 'select', edittype: 'select', stype: 'select',
        editoptions: {
          value: 'level1:level1;level2:level2;level3:level3',
          defaultValue: 'level1'
        }
      }
    ],
    inlineEditing: {
      keys: true, defaultFocusField: "listName", focusField: "listName"
    },
    cmTemplate: {
      autoResizable: true, editable: true
    },
    iconSet: "fontAwesome",
    rowNum: 10, rowList: [5, 10, 20],
    pager: '#list_pager',
    gridview: true, ignoreCase: true, rownumbers: true,
    sortname: 'id', viewrecords: true,
    sortorder: 'desc',
    caption: "Soft Skills",
    height: '100%', width: '750'

    ,gridComplete: function() {
      $("#list").addClass("nodrag nodrop");
      //$("#list").tableDnDUpdate();
    }

    ,onSelectRow: function(rowid, status, e) {
      var $self = $(this),
          savedRow = $self.jqGrid("getGridParam", "savedRow");

      if (savedRow.length > 0 && savedRow[0].id !== rowid) {
        $self.jqGrid("restoreRow", savedRow[0].id);
      }

      $self.jqGrid("editRow", rowid, { focusField: e.target });
    }    
  }).jqGrid('navGrid', '#list_pager', 
    { edit: true, add: true, del: false, search: false, refresh: false }, 
    { height: 280, reloadAfterSubmit: false }, 
    { reloadAfterSubmit: false }
  );
});
```

```
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>Canonical jqGrid example</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/themes/redmond/jquery-ui.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/free-jqgrid/4.15.2/css/ui.jqgrid.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/free-jqgrid/4.15.2/jquery.jqgrid.min.js"></script>

<table id="list"></table>
<table id="list_pager"></table>
<div><br/><b>Click inside of any cell to activate combobox (edit mode).</b></div>
```

正如我在 Stackoverflow 中的不同答案中解释的那样，可以读取这些值。也可以**[在这里](https://stackoverflow.com/a/47330980/1016343)**查看更多代码示例。

# sql - SQL Server 审核注销会产生大量读取

> ID：13049452
> 
> 赞同：25
> 
> 时间：2012-10-24T12:42:03.627
> 
> 标签：sql, sql-server, sql-server-2008, database-tuning, sql-tuning

我正在使用 SQL Server Profiler 来找出正在消耗 SQL 进程的进程，我发现事件类`Audit Logout`导致大量读取并消耗 cpu 进程。

正常吗？还是我的 SQL Server 配置有问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-24T12:54:46.377

审计注销事件从连接打开时聚合了许多值，例如读/写、连接时间等。

请参阅[http://msdn.microsoft.com/en-us/library/ms175827.aspx](http://msdn.microsoft.com/en-us/library/ms175827.aspx) - 在此处添加的特定问题的定义：

`Reads` `Number of logical read I/Os issued by the user during the connection.`

所以基本上，您看到的数字不是针对审计事件本身，而是针对正在注销的连接所做的所有操作。

# html - 如何成功地将图像嵌入 HTML 以在 webmail 客户端中显示？

> ID：13049453
> 
> 赞同：26
> 
> 时间：2012-10-24T12:42:03.770
> 
> 标签：html, format, base64, webmail

我正在尝试使用以 base 64 数据 URL 编码的图像在 HTML 中进行签名。这是一个例子：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAAN...kJggg=="> 
```

它与 Mac 上的 Mail 或 Thunderbird 等邮件软件很好用，但不适用于 gmail、outlook、roundcube、hotmail 等 webmail ......

你知道如何让它工作吗？我真的很想把那些图片直接放在源代码中，这样更实用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-24T14:18:00.390

简单的答案？

你不能。Gmail、outlook 等将忽略 base64 图像。

[查看此站点以了解有关此的更多信息](http://www.campaignmonitor.com/blog/post/1761/embedding-images-in-email/)

[![在此处输入图像描述](../Images/e5267c409689ee9a476055c82fba2be1.png)](https://i.stack.imgur.com/SlTxa.png)

> 因此，根据我们的结果，显然不值得在您的电子邮件中使用嵌入式图像。您将要做的就是强迫人们下载他们无法查看的编码图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-17T21:41:50.833

我正在使用嵌入式 SVG，原因如下：

*   它看起来不错（矢量图形适用于徽标）。
*   没有附件（即使是所谓的隐藏电子邮件附件邮寄的图像在许多电子邮件客户端中也是可见的）。
*   没有额外的 http 请求（离线工作，一旦下载）。
*   没有“你想加载图像..”的问题。
*   如果 Gmail 和 Outlook 中不显示它，对我来说没关系。这是一种优雅的退化。

但如果您真的想在 Gmail 和 Outlook 中显示图像，则需要通过 HTTP 加载这些图像。

来自 CSS-tricks 的人在电子邮件中对 SVG 有一个很好的指南：[https ://css-tricks.com/a-guide-on-svg-support-in-email/](https://css-tricks.com/a-guide-on-svg-support-in-email/)

最终解决方案如下：

```
/* Resize an element that has a width and height of zero to full size */
.showy {
  height: 100% !important;
  width: 100% !important;
}
```

```
<!-- Image: SVG -->
<img class="showy" width="0" height="0" src="my-image.svg">
<!-- Image: JPG -->
<img class="no-showy" src="my-image.jpg">
```

但我个人不喜欢这样，因为我不希望客户端询问用户是否要加载额外的资源。

# 3d - 假想三角形面积

> ID：13049455
> 
> 赞同：1
> 
> 时间：2012-10-24T12:42:14.453
> 
> 标签：3d, geometry, area

我正在尝试计算 3D 空间中三角形的面积，并且我使用的是 Heron 公式。

我得到一个虚构的结果，实部为 0。

你知道这意味着什么吗？

我正在尝试确定三角形的点是否共线（三角形 0 的区域）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:54:29.537

如果三个边不形成三角形（不满足三角形不等式），Heron 公式将失败。

请注意，当使用浮点数时，您不能测试为零，因为浮点数由于舍入误差而几乎从不为零。

检查共线性的另一种方法：

要确定 A、B、C 是否共线，请计算叉积 (AB)x(AC)。如果它的长度小于一个固定的 epsilon，那么这些点在一定的公差范围内是共线的。如果您的输入以整数形式给出，您可以测试一个精确的零。

如果叉积返回非零结果，则其长度是三角形面积的两倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-20T11:58:56.240

Heron 的公式实际上对于具有非常小角度的三角形是不稳定的 [此链接具有公式的稳定替代方案，](https://i.stack.imgur.com/ctI4L.png) 其中 a ≥ b ≥ c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T01:07:04.120

这意味着您在计算中犯了错误。3D 空间中任意三个不共线的点组成一个三角形。该三角形边的长度，当代入 Heron 公式时，将产生一个大于 0 的实面积。在数学上，不可能有其他结果。如果这三个点共线，则面积将为 0。

从调试的角度来看，我会说您应该检查您插入 Heron 公式的三个长度。如果他们没有通过三角不等式，那么你就错误地计算了他们。如果他们通过了，那么你没有正确应用 Heron 的公式。

# eclipse - 为什么在 Eclipse Juno 中安装 M2E 时出现 OutOfMemory 错误？

> ID：13049456
> 
> 赞同：1
> 
> 时间：2012-10-24T12:42:19.743
> 
> 标签：eclipse, maven, m2eclipse, m2e

我正在为 JavaEE 开发人员运行 Eclipse Juno 版本。我在尝试

“关于 Eclipse”给了我以下信息

> 面向 Web 开发人员的 Eclipse Java EE IDE。
> 
> 版本：Juno Service Release 1
> 
> 版本号：20120920-0800

此版本默认未安装 M2E，但可在标准更新站点中使用。

我尝试在其中安装 M2E，方法是转到帮助 --> 安装新软件，然后选择“Juno - [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno) ”，然后搜索 m2e。

它在那里显示为“m2e - Eclipse 1.2.0.20120903-1050 的 Maven 集成”

我选择了它并继续安装它（接受许可协议等）

在下载/安装时，我收到以下错误

> 在“安装软件”期间发生内部错误。
> 
> java.lang.OutOfMemoryError

知道为什么会发生这种情况吗？

这是一个默认的 Eclipse Juno 安装，从网上下载。我在其中做的唯一一件事就是安装 Subversive SVN 插件。

我试过从 Marketplace 安装，也直接形成 M2E 更新站点。同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:47:23.593

只需尝试在 eclipse 的 config.ini 中确定分配的内存大小：

对于 512MB 内存：-Xms256m -Xmx256m -XX:PermSize=64m -XX:MaxPermSize=64m

对于 1024MB 内存：-vmargs -Xms512m -Xmx512m -XX:PermSize=128m -XX:MaxPermSize=128m

您还可以通过尝试安装[http://eclipse.org/mpc/](http://eclipse.org/mpc/)来避免此内存问题，然后从那里进行安装

# c# - C# 防止对列表所做的更改

> ID：13049457
> 
> 赞同：1
> 
> 时间：2012-10-24T12:42:25.577
> 
> 标签：c#, arrays, list

```
List<Box[]> boxesList = new List<Box[]>(); // create a new list that contains boxes
Box[] boxes = new Box[9];                  // create an array of boxes
boxesList.Add(boxes);                      // add the boxes to the list
boxesList[0][0] = new Box(2, new Point(0, 0)); // change the content of the list
boxes[0] = new Box(1,new Point(0,0));      //  change content of the boxarray 
```

问题是在初始化 box 数组的第一个元素之后。boxList 也发生了变化。我认为问题在于盒子数组作为引用存储在列表中。有没有解决的办法？这样boxlist就不会通过改变box数组来改变

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T12:45:38.103

> 问题是在初始化 box 数组的第一个元素之后。boxList 也发生了变化。

不，这不对。与之前的`boxesList`内容*完全相同*：对盒子数组的*引用。*这里只有*一个*数组。如果你改变它，无论是通过`boxesList[0]`还是`boxes`，你都在改变同一个数组。

如果要获取数组的副本，则需要明确地这样做。是否创建数组的副本并将对副本的引用放在列表中，或者之后复制数组，这取决于您。

有关更多信息，请参阅我关于[引用类型和值类型](http://pobox.com/~skeet/csharp/references.html)的文章，记住所有数组类型都是引用类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:45:55.263

数组是引用。当您将数组放入列表时，它只是在复制*引用*。如果您想要一个新的*单独*数组（相同的实际对象），那么您需要复制该数组：

```
boxedList.Add((Box[])boxes.Clone()); 
```

请注意，这只是一个浅拷贝；该行：

```
boxes[0].SomeProp = newValue; 
```

仍然会在两个地方显示。如果这不行，那么深拷贝可能会很有用，但坦率地说，我建议将其设为`Box`不可变会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:54:53.473

您正在覆盖列表中第一个元素的索引。将代码更改为此两个框以显示在列表中。

```
 List<Box[]> boxesList = new List<Box[]>(); // create a new list that contains boxes
        Box[] boxes = new Box[9];                  // create an array of boxes
        boxesList.Add(new Box[] { new Box(2, new Point(0, 0))}); // change the content of the list
        boxes[0] = new Box(1, new Point(0, 0)); 
        boxesList.Add(boxes);                      // add the boxes to the list 
```

# java - 如何将 Java 应用程序粘贴到屏幕顶部

> ID：13049468
> 
> 赞同：2
> 
> 时间：2012-10-24T12:42:49.383
> 
> 标签：java, swing, modal-dialog, toolkit

我一直在寻找很多东西，但无法找到有关如何完成我正在尝试做的事情的任何细节。我希望我的 Java 应用程序“捕捉/安装/粘贴”到屏幕顶部，以便在它之后打开的任何内容（例如电源点）在最大化时只会使用剩余空间而不是整个屏幕。

我什至不确定这是否可能，但如果有人能指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:31:53.967

您不能使用标准 Java 功能来做到这一点 - 只有一些本机代码辅助才能修改其他应用程序的行为，以便它们将自己打包到剩余的屏幕“空间”中。但是您必须为要支持的每个操作系统编写本机部分。而且您还必须使用 JNI 从 Java 调用这些本机功能。当您尝试修改它们的大小时，某些应用程序可能会出现意外行为。

无论如何，在你的 Java 应用程序中做这样一个“特性”是个坏主意——你将来支持它会很头疼。

# android - 安卓 ARM 说明

> ID：13049473
> 
> 赞同：2
> 
> 时间：2012-10-24T12:43:11.493
> 
> 标签：android, arm

1) 如何使用 ARM 指令为 android 的媒体播放器等创建应用程序？
2) 我们可以在 Android 中使用 Emulator 学习 ARM 指令吗？
请指导我从哪里开始任何教程提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:01:24.763

1.  您无需使用 ARM 指令（ARM 的汇编级编程）来创建媒体播放器等应用程序。
2.  您可以通过 Android 的模拟器 ( [QEMU](http://www.qemu.org/) ) 学习 ARM 指令。但是也有其他模拟器。

如果您想学习 ARM 指令集或针对 ARM (Cortext A) 特定事物的一般编程，请从[Cortex™-A 系列程序员指南](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.den0013c/index.html)开始。

如果您想在 Android 中进行原生开发 (c/c++)，您将使用 Android [NDK](http://developer.android.com/tools/sdk/ndk/index.html)。

如果您想像媒体播放器一样进行 Android 应用程序开发，您将使用 Android [SDK](http://developer.android.com/sdk/index.html)。

用更简单的术语（上面的相反顺序）；如果您不知道从哪里开始 Android 开发，您应该获取 SDK。如果这对您来说还不够，因为 Java 很慢（并且您已经检查了[Render Script](http://developer.android.com/guide/topics/renderscript/index.html)）或者您需要某种无法在 Java 级别完成的访问，那么您应该研究 NDK，如果这对您来说仍然不够你应该去查看 ARM 文档。

# jquery - asp.net MVC4中的全球化

> ID：13049481
> 
> 赞同：3
> 
> 时间：2012-10-24T12:43:41.447
> 
> 标签：jquery, asp.net-mvc

我想在我的 ASP.NET MVC 应用程序中实现`Globalization`和。`Localization`

我经历了几个这样的[教程](http://afana.me/post/aspnet-mvc-internationalization.aspx)。

但问题是他正在为每种语言创建多个视图。

因此，如果有 10 个视图，那么我们必须为每种语言创建 10 个视图，总计 100 个。请指导我使用单一视图创建多语言（即 8 种语言）应用程序的最佳方法，如果可能的话，使用 PO 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:40:06.450

在我看来，做多个视图是最好的方法。如果你觉得它太麻烦，可能是因为你的 MVC 应用程序没有遵循正确的 MVC 模式。视图应该永远是愚蠢的。如果一个视图是愚蠢的，它唯一的东西就是文字和布局。

也就是说，你当然可以去做某种文化服务。所有你需要的是：

*   文化服务（实例、单例或静态。这取决于您的需求）
*   用于保存每种语言的每个字符串的键值对的 XML 文件

图案

*   应用程序负载
*   实例或静态配置服务
*   服务根据您想要的内容加载适当的 XML
*   View 从 Context 或 Static 方法调用服务`@String.Format(Context.CultureService.GetFormat("HELLOWORLD"), "World")`
*   服务返回格式字符串，如`"Hello %s!"`从加载的 XML 中获取

**编辑**

哦，为了允许十进制/货币/日期默认全球化，您还应该考虑一个`Current`返回当前文化实例的属性。这样你就可以像这样使用它：`@ViewModel.SomeDate.ToString(Context.CultureService.Current.DateTimeFormat)`

**编辑2**

还有2件事。

因为这整件事`@String.Format(Context.CultureService.GetFormat(), "")`太长了，考虑写一个助手，这样你就可以写出类似的东西`@Globalize("HELLOWORLD", "World")`

考虑使用枚举来概括字符串数据。通过摆脱魔术字符串，视图将更加清晰，并且可以更轻松地进行重构。结果可能类似于`@Globalize(HOME.Hello, User.Name)`

# android - 访问android列表视图的非数据库项

> ID：13049482
> 
> 赞同：1
> 
> 时间：2012-10-24T12:43:41.380
> 
> 标签：android, listview

我有一个列表视图，其中显示了两个数据库元素以及一个不会与数据库列关联的复选框元素。我想使用复选框来允许用户从列表视图中选择要处理的行。

我为 listView 创建了以下布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip">

     <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"    
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="6dip" />

    <TextView  
        android:id="@+id/dbCol1View"

        android:layout_width="fill_parent"
        android:layout_height="26dip" 

        android:layout_toRightOf="@id/checkBox1"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"

        android:singleLine="true"
        android:ellipsize="marquee" />

    <TextView
        android:id="@+id/dbCol2View"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

        android:layout_toRightOf="@id/checkBox1"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_above="@id/dbCol1View"
        android:layout_alignWithParentIfMissing="true"

        android:gravity="center_vertical" />

</RelativeLayout> 
```

然后我有一个数据库对象，如下所示：

```
public class DbObj{
private int id;
private String dbCol1;
private String dbCol2;

public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}
public String getDbCol1() {
    return dbCol1;
}
public void setDbCol1(String dbCol1) {
    this.dbCol1 = dbCol1;
}
public String getDbCol2() {
    return dbCol2;
}
public void setDbCol2(String dbCol2) {
    this.dbCol2 = dbCol2;
} 
```

}

然后我在我的代码中使用 SimpleCursorAdapter，如下所示：

```
 String cols[] = { "dbCol1", "dbCol2" };
int views[] = { R.id.dbCol1View, R.id.dbCol2View };
cursor = dbObjDAO.getByCriteria(criteria);

SimpleCursorAdapter ca = new SimpleCursorAdapter(rootActivity,
            R.layout.list_layout, cursor, cols, views);

startManagingCursor(cursor);

listView.setAdapter(ca); 
```

该列表显示良好，并且复选框在那里并且可以被选中。我的问题是如何遍历 listView 以查找已选中复选框的项目？

# azure - 为什么我们要将 Azure 存储帐户链接到云服务？

> ID：13049483
> 
> 赞同：4
> 
> 时间：2012-10-24T12:43:41.910
> 
> 标签：azure, azure-storage

为什么我们要将 Azure 存储帐户链接到云服务？它有什么帮助？如果我不链接它们会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:12:12.080

两个原因：

1.  更轻松的管理 - 您可以更好地了解特定部署的整体配置是什么
2.  更轻松的管理 - 删除资源时，系统会询问您是否还想删除链接的资源

顺便说一句，您还可以将 Windows Azure SQL 数据库链接到云服务。

整个想法是帮助您更好地管理服务。没有其他原因，如果您不链接，则不会发生任何事情。但想一想 - 如果您管理 3 个订阅，每个部署 2 个云服务，每个部署 2 个存储帐户。即 6 个云服务，12 个存储帐户。您能否轻松分辨出哪个服务正在使用哪个帐户？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-29T06:42:03.243

云服务取决于存储帐户。在部署云服务时，它将创建一个名为 vsdeploy 的容器，其中包含一个用于其创建的 VM 的块 blob。

它还在容器 wad-crashdumps 下存储故障转储文件。文件夹结构是 WAD{GUID}{worker role}{instance}。然后它将所有 .dmp 文件存储为块 blob。

# php - javascript语句执行

> ID：13049490
> 
> 赞同：1
> 
> 时间：2012-10-24T12:44:14.493
> 
> 标签：php, javascript

谁能指出这个javascript中可能出现的错误。第一条语句执行得很好，但是当我添加另一个要同时执行的语句时，它不起作用。

```
 echo '<script language="JavaScript" type="text/javascript">
        //<![CDATA[
      window.open(\'./index_pdf.php?'.$query_string.'\',\'Einlagerung_EV\',\'location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes,toolbar=no\');
        //]]>
    </script>';
    echo'<script language = "JavaScript" type="text/javascript">
        //<![CDATA[
        window.open('./save.php?','location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes');
        //]]>
        </script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:45:10.993

您在此处停止脚本：`window.open('./save.php?','location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes');`

像这样使用它：

```
echo'<script language = "JavaScript" type="text/javascript">
    //<![CDATA[
    window.open(\'./save.php?\',\'location=no,menubar=no,resizable=yes,scrollbars=yes,status=yes\');
    //]]>
    </script>'; 
```

正如您在第一个示例中看到的那样，它使用的是`\'`，但您使用的是 plain `'`。由于您使用 . 打开标签`'`，因此您不能在脚本中使用该符号，除非您想故意破坏它。该符号`\`允许您使用引号，而无需中断脚本。

# java - MongoDB 数据模型，支持每个事件、每个日期范围的唯一访问者

> ID：13049494
> 
> 赞同：1
> 
> 时间：2012-10-24T12:44:35.237
> 
> 标签：java, mongodb, aggregation-framework

我有多个网站，每个网站都有访问者“触发”我想要跟踪的多个事件。我有来自所有网站的这些事件的日志，每个事件都填充了网站 ID、事件名称和执行该事件的用户 ID（为了简单起见，假设就是这样）。

要求：

1.  能够根据网站 ID 和事件名称获取有多少唯一访问者获得了它。
2.  这也应该支持日期范围（范围内不同的唯一访问者）。

我正在考虑使用以下数据模型（例如）为每个“网站 ID”创建一个集合：

```
collection ev_{websiteId}:
[
    {
        _id: "error"
        dailyStats: [
            {
                _id: 20121005 <-- (yyyyMMdd int, should be indexed!)
                hits: 5
                users: [ 
                         {
                            _id: 1, <-- should be indexed!
                            hits: 1
                         }, 
                         {
                            _id: 2
                            hits: 3
                         },
                         {
                            _id: 3,
                            hits: 1
                         }
                ]
            },
            {
                _id: 20121004 
                hits: 8
                users: [ 
                         {
                            _id: 1,
                            hits: 2
                         }, 
                         {
                            _id: 2
                            hits: 3
                         },
                         {
                            _id: 3,
                            hits: 3
                         }
                ]
            },
        ]
    },
    {
        _id: "pageViews"
        dailyStats: [
            {
                _id: 20121005 
                hits: 500
                users: [ 
                         {
                            _id: 1, 
                            hits: 100
                         }, 
                         {
                            _id: 2
                            hits: 300
                         },
                         {
                            _id: 3,
                            hits: 100
                         }
                ]
            },
            {
                _id: 20121004
                hits: 800
                users: [ 
                         {
                            _id: 1, 
                            hits: 200
                         }, 
                         {
                            _id: 2
                            hits: 300
                         },
                         {
                            _id: 3,
                            hits: 300
                         }
                ]
            },
        ]
    },
] 
```

我正在使用 _id 来保存事件 ID。我正在使用 dailyStats._id 来保存它发生的时间（yyyyMMdd 格式的整数）。我使用 dailySattes.users._id 来表示用户的唯一 ID 哈希。

为了获得唯一用户，我基本上应该能够在给定的日期范围内运行（mapreduce？）数组中不同的计数项目（我会将日期范围转换为 yyyyMMdd）。

我的问题：

1.  这个数据模型对你有意义吗？我担心随着时间的推移这个模型的可扩展性（如果我在某些客户端中有很多每日唯一访问者，它会导致一个巨大的文档）。我正在考虑按 _id < [date as yyyyMMdd] 删除 dailyStats 文档。通过这种方式，我可以将文档大小保持在合理的范围内，但这里仍然存在限制。
2.  是否有一种简单的方法来运行“upsert”，如果尚未创建也将创建 dailyStats，添加用户（如果尚未创建）并增加两者的“hits”属性？
3.  map-reduce 怎么样？您将如何处理它（需要在给定日期范围内的所有子文档的 users._id 上运行不同）？新的聚合框架有没有更简单的方法？

顺便说一句 - 解决唯一访问者的另一种选择是使用 Redis 位图，但我不确定是否值得持有多个数据存储（维护方面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:14:11.487

对当前上述架构的评论很少。

正如您所指出的可扩展性以及您真正在做多少预聚合，我有点担心。

我在做指标时使用过的大多数 Mongo 实例都与您指出的情况相似，但您似乎确实严重依赖于对单个文档进行更新并插入其中的各个部分，这将减慢速度并可能导致有点锁定..

我可能会建议一条不同的路径，Mongo 甚至在与他们谈论做指标时建议的路径。看到你已经有了一个你想要做的结构，我会按照以下方式创建一些东西：

```
{
  "_id":"20121005_siteKey_page",
  "hits":512,
  "users":[
   {
     "uid":5, 
     "hits":512,
   }
} 
```

通过这种方式，您可以将文档大小限制为可以合理进行快速 upserts 的内容。从这里您可以批量执行 mapreduce 作业，以进一步扩展您想要查看的内容。

这还取决于您的最终目标，您是否希望提供实时指标？你试图获得什么样的粒度？Redis Maps 可能是您至少想看看的东西：Great article [here](http://blog.getspool.com/2011/11/29/fast-easy-realtime-metrics-using-redis-bitmaps/)。

不管这是一个有趣的问题要解决:)

希望这有帮助！

# php - 在 Windows 7 上使用 shell_exec 打印

> ID：13049496
> 
> 赞同：-1
> 
> 时间：2012-10-24T12:44:46.780
> 
> 标签：php, windows, shell-exec

您好会使用 shell_exec 直接打印 PDF 文件。我的代码是：

```
<?php
shell_exec( 'print /d:"EPSON MFC-J265W" c:\file.txt');
?> 
```

当我尝试运行此代码时，我收到此错误：

**无法初始化设备 Epson**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:45:55.467

我敢打赌你需要把它放在引号里。

```
<?php
shell_exec( 'print /d:"EPSON MFC-J265W" c:\file.txt');
?> 
```

最终，您应该在命令行上对此进行测试，看看实际需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T11:11:24.680

我刚刚找到了解决方法！

```
$updateCommand = "w32tm /config /syncfromflags:manual /manualpeerlist:\\\"".$timeServers."\\\" /update";

$updateCommandCmd = 'cmd /c " '.$updateCommand.' "';

$updateResult = shell_exec($updateCommandCmd); 
```

使用 cmd /c 并转义 \ 和 " 创建类似的东西

```
cmd /c " w32tm /config /syncfromflags:manual /manualpeerlist:\"0.europe.pool.ntp.org 1.europe.pool.ntp.org\" /update " 
```

仅在 Windows 7 上起作用（抱歉）

# jsf-2 - 服务器启动期间的 JSF2 IllegalStateException

> ID：13049497
> 
> 赞同：0
> 
> 时间：2012-10-24T12:44:46.840
> 
> 标签：jsf-2

我在 WAS7 应用服务器下使用 JSF2.0 (Mojarra 2.0.6)。我的 Web 模块方面设置为支持（servlet API）版本 - 2.5。我也在使用 RSA8.0.4。我可以在服务器启动期间看到以下异常。有人可以建议吗？

```
com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0100E: Uncaught init() exception created by servlet Faces Servlet in application FATCAKycApplication: 
java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.context.FacesContextFactory
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:851)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:309)
    at javax.faces.webapp.FacesServlet.init(FacesServlet.java:219) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:12:21.337

我认为这个[问题](https://stackoverflow.com/questions/8984578/application-was-not-properly-initialized-at-startup-jsf-1-2-ws-7)与您所遇到的非常相似，您可以尝试 BalusC 的回答中描述的方法

# ruby-on-rails - Rails Route 仅带有数字参数

> ID：13049498
> 
> 赞同：3
> 
> 时间：2012-10-24T12:44:48.480
> 
> 标签：ruby-on-rails, regex, routing

我在我的应用程序中有一个自定义路由，每次参数是一个数字或一个数字列表时都需要匹配`|`

这是我的代码：

```
get '/lists' => 'cidades#list'
get '/list(/:id)' => 'cidades#list', :constraints => { :id => /[0-9|]+/ }
get '/list(/:name)' => 'cidades#list' 
```

我希望完成的是这样的：

```
/lists => cidades#list

/list/1 => cidades#list & param[:id] = "1"
/list/1|2|3|4 => cidades#list & param[:id] = "1|2|3|4"

/list/1a => cidades#list & param[:name] = "1a" 
```

如果我使用这个正则表达式：`/[0-9|]+/`我会`1a`变得有效，但我不想要这个。我找到了这个正则表达式：`/\A[0-9|]+\Z/`但这给了我这个错误：

```
ArgumentError (Regexp anchor characters are not allowed in routing requirements: /\A[0-9|]+\Z/): 
```

如何创建仅匹配数字字符串的约束？（只有数字的字符串）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:35:28.803

默认情况下，rails 锚定路由正则表达式，因此不需要`\A`and `\Z`。我认为您正在寻找遵循这种模式的东西：

```
:constraints => { :id => /[0-9]+(\%7C[0-9]+)*/ } 
```

这将强制路由至少有一个整数 (0-9)。可选地，该路线后面可以跟一个 | 字符（由浏览器转换为`%7C`）。该| 字符后跟一个额外的整数 (0-9)。将这种模式放在自己的组中可以防止任何挥之不去 | 在整数 ID 之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:34:00.970

您必须使用特殊字符以外的其他内容| 网址中不允许。

我不确定您要在这里做什么。但是，您可以将 :id 作为 id 数组传递。

ID = [1,2,3,4]

# javascript - 构建一个包含所有被选中和未被选中的元素的集合

> ID：13049502
> 
> 赞同：1
> 
> 时间：2012-10-24T12:45:01.413
> 
> 标签：javascript, jquery, underscore.js

我想收集所有被选中和未被选中的元素。

dom 元素由几个`multiple select`.
他们每个人都有相同的用户。
我的目标是创建所有用户的集合，并为选定的用户添加具有特定值的属性。

这是我的代码 js 代码 (1)，这里是链接[http://jsfiddle.net/vxRtb/9/](http://jsfiddle.net/vxRtb/9/)。

我的代码可以工作，但我想干掉代码，因为可能不需要在第一次选择时跳过所有用户。
任何提示如何干燥以下 js 代码？
请阅读关于 js 代码的评论以获取更多信息；谢谢

PS：
1）我正在使用`jQuery`和`underscore`
2）我从服务器获取 html 代码，与 jsfiddle.net/vxRtb/9 中的相同

* * *

```
$(function () {
    var $selectElements = $('form .controls select');
    var userCollection = []; 

    // Subroutine_1
    // TODO Subroutine_1 and Subroutine_2 seems too close; any idea how to dry this code?
    $.each($($selectElements[0]), function (i, teamElement) {
        var $users = $(teamElement).find('option')

        $.each($users, function (i, user) {
            userCollection.push({
                id: $(user).val(),
                name: $(user).text(),
            });            
        });
    });

    // Subroutine_2
    $.each($selectElements, function (i, teamElement) {
        var $teamElement = $(teamElement);
        //var teamId = $teamElement.attr('id');
        var teamName = $teamElement
            .parent().parent().closest('.controls')
            .find('input').val();
        var $users = $teamElement.find('option:selected');

        $.each($users, function (i, user) {
            _.where(userCollection, {id: $(user).val()})[0].team = teamName;           
        });
    });

    console.log(userCollection);
});
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T20:49:34.733

这是一个相当古老的问题，您可能已经离开了它，但是，我尝试了一下，这就是我想出的。

## 分析

这些循环非常相似，主要区别在于一个循环建立团队成员，另一个循环确定他们的团队。我认为 DRY 选项是只使用一个循环并测试成员是否有团队。由于用户 ID 不唯一，因此会有重复，因此需要应用一些逻辑。

## 伪代码

1.  根据`<option>`标签创建用户对象集合。
    1.  使用 getMyTeam 生成团队名称
2.  按 ID 对用户对象进行分组。
3.  过滤用户对象，仅采用具有团队名称的对象
4.  过滤没有团队名称的用户对象以仅显示 uniq 记录

## 代码

我不确定这是否更好。在性能方面，由于所有的嵌套，这应该是相当糟糕的。但是，我想优点是代码变得更加模块化，并且您可以在需要时轻松更改规则。[jsFiddle](http://jsfiddle.net/vxRtb/13/)

```
$(function () {

    // Helper to find a team based on an options element
    function getMyTeam() {
        if (this.is(':selected')) {
            var select = this.parent();
            var teamId = select.attr('id').replace(/_participations$/, '_name');
            return $('#' + teamId).val();
        }
        return undefined;
    };

    // Helper to return an object's id
    function getId(obj) {
        return obj.id;
    };

    // Helper to filter the team members by team name.
    function filterMembersByTeam(members) {
        var result = _.filter(members, function(record) {
            return !_.isUndefined(record['team']);
        });
        if (result.length === 0) { 
            result = _.uniq(members, true, function(member) {
                return JSON.stringify(member);
            })
        };
        return result;
    };

    // 1\. Select the users
    var options = $('form .controls select option');

    // 2\. Build up the user data
    var userCollection = _.map(options, 
                          function(option) {
                            return { 
                                    id: $(option).val(),
                                    name: $(option).text(),
                                    team: getMyTeam.apply($(option)) 
                                };
                          }); 

    // 3\. Clean & filter the user data
    userCollection = 
        _.flatten( 
            _.map( _.groupBy(userCollection, getId), filterMembersByTeam) 
        );

    console.log(userCollection);
}); 
```

# matplotlib - 如何将图形/数组向右移动

> ID：13049510
> 
> 赞同：2
> 
> 时间：2012-10-24T12:45:13.470
> 
> 标签：matplotlib

我已经为我的问题寻找各种解决方案，但无法获得任何帮助。我正在创建一个正弦波并将其切割成缓冲区。即切割成部分。该程序似乎运行良好，但所有部分都从 0 开始，与所需的起点相反。

代码：

```
slice= 2048
arr2= arr1[:slice]    # 1st buffer from 0-2048
arr3= arr1[slice:2*slice]  #2nd buffer from 2048-4096

pylab.plot(arr2)   
pylab.draw()      
pylab.figure()
pylab.plot(arr3)

pylab.show() 
```

这会打印两个部分的正确外观图，但第二个图从 0 开始（与 2048-4096 范围相反）我正在使用 pylab.plot 函数-有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:38:00.807

在您的`plot()`函数中，您需要指定 X 轴：

```
pylab.plot(range(0,2048),arr2)   
pylab.draw()      
pylab.figure()
pylab.plot(range(2048,4096),arr3)

pylab.show() 
```

# assembly - 获取后测试为 0

> ID：13049512
> 
> 赞同：1
> 
> 时间：2012-10-24T12:45:26.953
> 
> 标签：assembly, control-flow, instructions

嘿，我有一段对我来说没有意义的汇编代码

```
.text:004016C5 prompt_uid:             ; "[ User %d    ]\t"
.text:004016C5 mov     [esp+0Ch+var_C], offset aUserD
.text:004016CC mov     ecx, [ebp+arg_0]
.text:004016CF mov     [esp+0Ch+var_8], ecx
.text:004016D3 call    printf
.text:004016D8 mov     [esp+0Ch+var_C], esi
.text:004016DB call    gets
.text:004016E0 test    eax, eax        ; test eax=0
.text:004016E2 jz      short prompt_uid 
```

起初我对`test eax,eax`和`jz`跟随 a感到困惑`gets`。

“为什么任何输入都是0？”。然后我想“好的。字符串由一个空字节终止，所以一个空字符串应该导致测试设置 ZF”

但是当我在实践中对其进行测试时，jz 从未被使用过。即使我只是在提示符下按回车。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:50:17.557

[gets() 引用](http://pubs.opengroup.org/onlinepubs/007904975/functions/gets.html)给出了何时返回 NULL 的答案；

> 返回值
> 
> 成功完成后，gets() 将返回 s。**如果流位于文件**末尾，则应设置流的文件结束指示符，gets() 应返回空指针。**如果发生读取错误**，则应设置流的错误指示符，gets() 应返回空指针 [CX] 并设置 errno 以指示错误。

换句话说，`gets()`可能在文件结尾或读取错误时返回 NULL，而不是在正常的“按返回”操作中。

# asp.net - 错误 500 仅由 IPN Paypal 模拟器返回，手动检查正常

> ID：13049514
> 
> 赞同：1
> 
> 时间：2012-10-24T12:45:32.690
> 
> 标签：asp.net, asp.net-mvc, iis, paypal, paypal-ipn

在我的 ASP MVC 2 项目中存在 Paypal 支持，但服务器（应用程序？）不接受应作为 POST 消息发送的 IPN。首先我尝试使用 IPN 模拟器，它总是返回错误 500。

奇怪的是，我自己的测试脚本可以发送一些表单数据来指定为 IPN 定义的操作！至少我从 IPN 控制器/操作中删除了所有功能代码，只让简单的日志记录和操作通过以下方式完成：`return Content("some result text");`

我从 IIS 读取了一些日志，但我发现只有这个：

```
Thread information:
Thread ID: 10 
Thread account name: NT AUTHORITY\NETWORK SERVICE 
Is impersonating: False 
Stack trace: at System.RuntimeType.CreateInstanceImpl(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean fillCache) at System.Activator.CreateInstance(Type type, Boolean nonPublic) at System.Web.Mvc.ControllerBuilder.<>c__DisplayClass5.<SetControllerFactory>b__4() 
```

真的很有趣，我自己的测试脚本作为 IPN 发送数据正在工作，但沙盒 IPN 模拟器没有。感谢您的任何建议或提示

# python - Webapp2 + WTForms 问题：如何将值和错误传回给用户？

> ID：13049515
> 
> 赞同：1
> 
> 时间：2012-10-24T12:45:34.893
> 
> 标签：python, google-app-engine, webapp2, wtforms

我遇到了 webapp2 和 wtforms 的问题。更具体地说，我在两个不同的处理程序中定义了两种方法，称为：

*   `create`，这是一个监听特定路由的 GET 方法
*   `save`，这是一个监听另一个路由的 POST 方法

在`save`我验证表单的方法中，如果失败，我想`create`通过`redirect`_to 方法重定向到该方法，在那里我可以使用表单呈现模板。这有可能吗？`get`我找到了一个示例，说明如果相同的处理程序具有和方法，如何做到这一点`post`，但是这可能在不同处理程序的方法中吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:47:13.650

我认为如果路线是同一个应用程序的一部分，这将起作用。

但是为什么不使用带有 get 和 put 以及方法 _create 的单个处理程序，可以通过 get 和 put 调用（self._create 而不是重定向）以使用表单呈现模板。它比浏览器重定向更快，您可以以简单的方式传递参数。

# php - 画廊分页错误

> ID：13049517
> 
> 赞同：0
> 
> 时间：2012-10-24T12:45:46.597
> 
> 标签：php, image, gallery

我已经根据我的需要调整了一个简单的分页画廊，但它并没有按预期工作：通常它会很好地放置第一“页”图片然后在某些情况下它只是跳过一些图片然后转到更多图片，在其他情况下情况下它只是不加载任何其他页面（我使用的是无限滚动）

这是php函数：

```
function makeGallery($path, $directory, $seo){
$dir = $path . "/" . $directory;
$handle = opendir($dir);
while ($file = readdir($handle)){
    if($file == '.' OR $file == '..' or $file == 'thumbs' or $file == '.DS_Store')
        continue;
    else
        $result_array[]=$file;
}

$filecount = count(glob("" . $dir . "*.jpg"));

closedir($handle);
array_multisort($result_array, SORT_ASC);
$rows = 3;
$cols = 8;

if(isset($_GET['page'])){
    $page = $_GET['page'];
}else{
    $page = 0;
}

$num_pics = count($result_array);
$cells = $rows * $cols;
$pages = ceil($num_pics / $cells);
$num_pages = $pages - 1;
$output = array();
$slices = array();
$push = 0;
$showpage = $page + 1;

for($k=0;$k<$pages;$k++){
    array_push($slices, $push);
    $push = $push + $cells;
}

for($k=0;$k<$pages;$k++){
    if($page == key($slices)){
        $output = array_slice($result_array, current($slices), $cells);
    }
    next($slices);
}

reset($output);
print '<div class="container-fluid">
    <div class="row">';
print "<ul id='photoswipe'  class='thumbnails'>";

for($i=0;$i<$rows;$i++){
    for($j=0;$j<$cols;$j++){
        if(current($output) != false){
            $value = current($output);
            $parts = Explode('.', $value);
        $title = $parts[count($parts) - 2];
        $parts = Explode('-', $title);
        $title = $parts[1];
        if ($title == "") $title = $value;
            print "<li class='box'><a title='$title' rel='group' class='thumbnails' href='$dir/$value'><img width='$width' height='inherrit' src='$dir/thumbs/$seo-$value' /></a></li>";
            next($output);
        }else{
            print "</ul>";
        }
    }
}

$ref = $_SERVER['PHP_SELF'];

if($num_pages == '0'){
    print " ";
    print " ";
}elseif(($page == '0')||($page == '')){
    $next = $page + 1;
    print " ";
    print "<a id='next' href='$ref?page=$next'> </a>";
}elseif($page == $num_pages){
    $prev = $page - 1;
    print "<a id='prev' href='$ref?page=$prev'> </a>";
    print " ";
}else{
    $next = $page + 1;
    $prev = $page - 1;
    print "<a id='prev' href='$ref?page=$prev'> </a>";
    print "<a id='next' href='$ref?page=$next'> </a>";
}

echo "<nav id='page-nav'>
<a href='$ref?page=$next'></a>
</nav></div></div>";
} 
```

我确信应该有一些我没有发现的愚蠢错误，我希望一些有经验的 php 程序员可以很容易地找到它。

[您可以在http://eikonabox.com/page/portrait.php](http://eikonabox.com/page/portrait.php)上看到画廊（及其问题） （在肖像画廊中，您可以看到它从 24 号直接跳到 49 号）

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T10:22:19.877

如果有人陷入这种问题，我已经通过这种方式解决了：

```
 function makeGallery($path, $directory, $seo){
$dir = $path . "/" . $directory;

$filearray = array(); 
if ($fil = opendir($dir)) {
    while (($file = readdir($fil)) !== false) {
        if ($file != "." && $file != ".." && $file != "thumbs" && $file != ".DS_Store") { 
            $filearray[] = $file;
            $page = empty($_GET['page']) ? 1 : $_GET['page'];
            $num_per_page = 25;
            $total_pages = ceil(count($filearray)/$num_per_page);
        }
    }

array_multisort($filearray, SORT_ASC);

print '<div class="container-fluid">
    <div class="row">';
print "<ul id='photoswipe'  class='thumbnails'>";

for($i = ($page - 1) * $num_per_page; $i < $page * $num_per_page; $i++){
            $value = basename($filearray[$i]);
            $parts = Explode('.', $value);
        $title = $parts[count($parts) - 2];
        $parts = Explode('-', $title);
        $title = $parts[1];
        if ($title == "") $title = $value;
        if($value != "")
                print "<li class='box'><a title='$title' rel='group' class='thumbnails' href='$dir/$value'><img width='$width' height='inherrit' src='$dir/thumbs/$seo-$value' /></a></li>";
}
closedir($fil);
}

print "</ul>";

$ref = $_SERVER['PHP_SELF'];

if($num_pages == '0'){
    print " ";
    print " ";
}elseif(($page == '0')||($page == '')){
    $next = $page + 1;
    print " ";
    print "<a id='next' href='$ref?page=$next'> </a>";
}elseif($page == $num_pages){
    $prev = $page - 1;
    print "<a id='prev' href='$ref?page=$prev'> </a>";
    print " ";
}else{
    $next = $page + 1;
    $prev = $page - 1;
    print "<a id='prev' href='$ref?page=$prev'> </a>";
    print "<a id='next' href='$ref?page=$next'> </a>";
}

echo "<nav id='page-nav'>
<a href='$ref?page=$next'></a>
</nav></div></div>";
    } 
```

# serial-port - 从 gradle 中的 /dev/ttyUSB0 读取测试结果

> ID：13049520
> 
> 赞同：1
> 
> 时间：2012-10-24T12:45:55.170
> 
> 标签：serial-port, gradle

我使用 gradle 在 Arduino（一个微控制器）上上传测试。我可以通过 /dev/ttyUSB0 获得测试输出（在我的 ubuntu 上）。

我现在正在寻找在 gradle 中获取测试输出的最简单方法。我用*cat* (ant.exec) 做了一些实验：

```
def checkTestResults = {
    ant.exec(
        outputproperty:"cmdOut",
        errorproperty: "cmdErr",
        resultproperty: "cmdExit",
        failonerror:"true",
        dir: './MyArduinoTests',
        searchpath:"true",
        executable: 'cat') {    
            arg(value:"/dev/ttyUSB0")
        }
        println ant.cmdOut  
} 
```

它不能很好地工作。我没有得到串口的完整输出。有时，我没有得到任何输出。

如何在不编写读取端口的单独程序的情况下完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:14:03.780

解决方案是编写一个单独的程序来读取端口。我的同事只写了 8 行 python 代码。

# css - 将 div 的高度作为其内容，如果它更小，则作为其父级

> ID：13049525
> 
> 赞同：0
> 
> 时间：2012-10-24T12:46:06.937
> 
> 标签：css, layout, html

一些html：

```
<div style="height: 300px">
  <div id="inner">
    <div id="title">
       ...
    </div>
    <div id="content">
       ....
    </div>
    <div>
       ..another div
    </div>
  </div>
</div> 
```

我希望我的内部 div 高度不大于父 div 的高度，如果它更大，那么内容 div 应该有滚动，但如果它更小，它应该与它的内容大小相同。

我试图设置内部的 max_height=100%，但我不能让我的内容有滚动。我想在没有js的情况下做到这一点

UPD：我不知道主 div 的高度（300px 不是恒定的）

UPD2：我的主 div 有“最大高度：100%”，所以我不知道确切的值

演示：http: [//jsfiddle.net/kzfRk/7/](http://jsfiddle.net/kzfRk/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T01:07:15.017

您需要将内部 div 最大高度设置为与根 div 高度相同。使用您的小提琴，将下面的 CSS 复制并粘贴到您的 CSS 文件中，它将起作用...

```
.container{
    max-height: 100%;
    border: 1px solid #000;
}
.inner{
    max-height: 100px;
    overflow-y: auto; border: 1px solid #f00;
}
.root{
    height: 100px;
    border: 1px solid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:49:20.960

不确定我是否理解，但如果您的滚动条没有出现，请尝试：

```
#inner{overflow-y:scroll;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:49:56.420

你设置你的高度，然后使用溢出来控制滚动。

```
​#inner{max-height:100%;overflow-y:scroll;}​ 
```

示例： http: [//jsfiddle.net/calder12/drC3L/](http://jsfiddle.net/calder12/drC3L/)将外部 div 的大小更改为您想要的任何内容，如果内容过多，内部 div 将滚动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:39:07.743

你有一个活生生的例子吗？很难弄清楚你想要做什么。

您是否希望父 div 填充屏幕并滚动内容？如果是这样，给你的父 div 100% 的高度，并尝试将以下样式应用于你的内部 div：

```
height:100%; min-height: 100%; overflow:auto; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:13:43.923

这是你的想法吗？（颜色只是为了便于观看）[在这里](http://jsfiddle.net/kzfRk/5/)观看直播。

## css

```
.container{
    height: 300px;
    overflow: hidden;
    border: 1px solid #000;
}
#inner{
    max-height:300px;
    overflow-y: auto; border: 1px solid #f00;
}
#title{ background-color: #eed;}
#content{background-color: #fee;} 
```

## html

```
<div class='container'>
  <div id="inner"> 
    <div id="title"> 
       ... 
    </div> 
    <div id="content"> 
        ....    
    </div>    
    <div>    
       ..another div    
    </div>    
  </div>    
</div> 
```

# c# - 动态表单上的 MVC 模型验证？

> ID：13049529
> 
> 赞同：6
> 
> 时间：2012-10-24T12:46:39.400
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我有以下型号：

```
public class FileModel
{
    public int Id { get; set; }

    [Required(ErrorMessage = "Required")]
    [StringLength(100, ErrorMessage = "Max is 100, Min is 3", MinimumLength = 3)]
    public string Name { get; set; }

    public string Path { get; set; }

    [Required(ErrorMessage = "Required")]
    public string FileTypeId { get; set; }

    public DateTime RegistrationDate { get; set; }
} 
```

以下是我的看法：

```
@using (Html.BeginForm("Index", "FileManagement", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <table class="content-table" style="min-width: 600px; border-spacing: 15px;">
        <tr>
            <td colspan="4" class="table-header">New File
                <div class="add-icon">+</div>
            </td>
        </tr>
        <tr>
            <td>Name: </td>
            <td>@Html.TextBoxFor(q => q.NewFile.Name, new { maxlength = "100", id = "NewFile_Name1", name = "NewFile.Name1" })
                <br />@Html.ValidationMessageFor(q => q.NewFile.Name)
            </td>
            <td>
                <input type="file" id="FileUploadField1" /></td>
            <td style="width: 16px; text-align: center;">&nbsp;</td>
        </tr>
        <tr>
            <td colspan="4" style="text-align: center;">
                <input type="submit" value="Submit" />
            </td>
        </tr>
    </table>
    <script type="text/javascript">

        $('.content-table .add-icon').click(function () {
            var lastFileField = $('.content-table input[type="file"]').last();
            var lastId = lastFileField.attr('id').replace(/\D*/g, '');
            lastId = parseInt(lastId) + 1;
            var newFields = '<tr>' +
                '<td>Name : </td>' +
                '<td><input data-val="true" data-val-length="Max chars is 100, Min chars is 3" data-val-length-max="100" data-val-length-min="3" data-val-required="Required" id="NewFile_Name' + lastId + '" name="NewFile.Name' + lastId + '" type="text" value="" /><br /><span class="field-validation-valid" data-valmsg-for="NewFile.Name' + lastId + '" data-valmsg-replace="true"></span></td>' +
                '<td><input type="file" id="FileUploadField' + lastId + '"/></td>' +
                '<td style="text-align:right;"><div class="delete-icon"></div></td>' +
                '</tr>';
            var lastTr = $(lastFileField).parents('tr:first')[0];
            $(lastTr).after(newFields);
        });

        $('.content-table .delete-icon').live('click', function () {
            $(this).parents('tr:first').remove();
        });
    </script>
} 
```

如您所见，我们有一个用于上传一个或多个文件的表单。因此，我为用户添加了一个 + 按钮，他们可以将文件字段添加到表单中。

用户必须输入文件名并选择要上传的文件。但是 MVC 客户端验证器只验证添加了`Razor`.

如何强制 MVC 验证器验证客户端和服务器端的所有字段。

**另一个问题是：**
我们如何处理在 MVC 控制器上获取字段值。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T13:18:04.080

[这个很棒的博客](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)将帮助您了解默认模型绑定器将如何绑定列表和数组。只需为您的页面创建一个看起来像这样的 ViewModel：

```
public class FileUploadViewModel
{
    public List<FileModel> lFileModels { get; set; }
} 
```

然后在您的“+”jQuery 函数中，确保生成的输入名称类似于`lFileModels.[0].Title`（或者可能是`lFileModels[0].Title`，只需单击该链接，您就会明白）

然后在控制器中获取该信息，就像任何其他形式一样！

```
[HttpPost]
public ActionResult Index(FileUploadViewModel viewModel)
{

} 
```

**编辑**

MVC文件上传的[另一个链接](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

**编辑 2**

再次阅读您的代码后，我现在意识到验证问题是由于在加载库后添加了不显眼的验证。您必须重新解析验证器。

```
$("form").data("validator", null);
$.validator.unobtrusive.parse($("form")); 
```

绑定适用于服务器端验证和问题的第二部分。

**编辑 3**

要添加字段，而不是直接在 JS 中进行，您应该使用 Ajax 加载带有文件字段的表单部分。当您单击添加按钮时，它会请求文件字段的部分视图，并在其发布数据中包含当前项目的列表。局部视图然后返回一个带有额外字段的渲染视图。这只是一个想法。我没有尝试过，甚至没有看到过这个想法。我只是想了一下，想我可以分享一下。

# joomla - 如何在joomla中获得子类别的最高父级？

> ID：13049530
> 
> 赞同：0
> 
> 时间：2012-10-24T12:46:43.703
> 
> 标签：joomla

joomla 是否有任何功能可以提供子类别的最高父级？就像，我有这个结构-

![在此处输入图像描述](../Images/e8afdd01f3cb0feb9b2b4104b2f298eb.png)

如果我有“ `Components`”的 id，我怎么能得到“ `Sample Data-Articles`”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:58:42.520

您可以使用 getPathRoot 并选择倒数第二个节点（最后一个节点是类别根，它本身不是类别）。 [https://github.com/joomla/joomla-platform/blob/staging/libraries/joomla/table/nested.php#L126](https://github.com/joomla/joomla-platform/blob/staging/libraries/joomla/table/nested.php#L126) 或 [https://github.com/joomla/joomla-platform/blob/staging/libraries/遗留/类别/categories.php#L932](https://github.com/joomla/joomla-platform/blob/staging/libraries/legacy/categories/categories.php#L932)

# c# - 在 C# cf 中显示下一个表单后尝试关闭表单

> ID：13049531
> 
> 赞同：6
> 
> 时间：2012-10-24T12:46:48.837
> 
> 标签：c#, winforms, compact-framework

我最近一直在研究 Android，并尝试将其功能之一移植到 C# 紧凑框架。

我所做的是创建一个抽象类，我称之为 Activity。这个类看起来像这样

```
 internal abstract class Activity
  {
      protected Form myForm;
      private static Activity myCurrentActivity = null;
      private static Activity myNextActivity = null;

      internal static void LoadNext(Activity nextActivity)
      {
         myNextActivity = nextActivity;
         if (myNextActivity != null)
         {
            myNextActivity.Show();
            if (myCurrentActivity != null)
            {
               myCurrentActivity.Close();
               myCurrentActivity = null;
            }
            myCurrentActivity = myNextActivity;
            myNextActivity = null;
         }
      }

      internal void Show()
      {
        //PROBLEM IS HERE
         Application.Run(myForm);
         //myForm.Show();
         //myForm.ShowDialog();
        //
      }

      internal void Close()
      {
         myForm.Close();
      }

      internal void GenerateForm()
      {
      ///Code that uses the Layout class to create a form, and then stores it in myForm
      //then attaches click handlers on all the clickable controls in the form
      //it is besides the point in this problem
      }

      protected abstract void Click(Control control);
      //this receives all the click events from all the controls in the form
      //it is besides the point in this problem

   } 
```

我遇到的问题是运行`Show()`命令的一部分

基本上我所有的类都实现了上面的类，加载一个xml文件并显示出来。当我想转换到一个新的类/表单时（例如从 ACMain 到 ACLogIn）我使用这个代码

```
Activity.LoadNext(new ACLogIn); 
```

应该加载下一个表单，显示它，然后卸载当前表单

我已经尝试过这些解决方案（在`Show()`方法中），这是每个解决方案的问题

1.  using `myForm.ShowDialog()`
    This works, but blocks execution, 这意味着旧表单不会关闭，并且我在表单之间移动的越多，进程堆栈增加的越多

2.  using `myForm.Show()`
    This works，在显示旧表单后关闭旧表单，但在此之后立即关闭程序并终止它

3.  使用`Application.Run(myForm)`
    这仅适用于加载的第一个表单，当我移动到下一个表单时，它会显示它然后抛出一个异常，说“值不在预期范围内”

有人可以帮我解决这个问题或找到替代方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:23:06.457

如果您真的在为此导航创建自己的框架之后，您需要重新思考。传入的 Form 实例`Application.Run`永远不能关闭 - 当它关闭时，Application.Run 完成执行并且（通常）您的`static void Main`入口点退出并且应用程序终止。

我建议您将 Activity 更改为 UserControl：

```
public abstract class Activity : UserControl
{
  .... 
} 
```

或作曲

```
public abstract class Activity
{
    private UserControl m_control;
  .... 
} 
```

然后，不是关闭和显示表单，而是将主表单内的*所有*活动作为容器的父级。

As fair warning, this is going to get complex when you start wanting to show things in a Tab motif instead of a Stack, or having split views. Frameworks seem simple to create, but they're not so I'd at least consider using something already done unless you have compelling reasons to want to roll your own.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:06:43.193

`Application.Run`通常与带`Form`参数的重载一起使用。这将是负责启动/显示其他表单的“主要”表单。这种“主要”形式可能是“隐藏的”。但是，我觉得这有点尴尬。

或者，您*不需要*主窗体，您可以使用`Application.Run()`启动消息泵来处理 Windows 消息；但是，线程正忙于处理消息并且无法显示对话框（它们必须显示在正在运行的线程中`Application.Run`）。您可以通过在调用*之前*`Application.Run`创建一个或多个表单对象来解决此问题，这些表单对象可以创建一个`Timer`对象，该对象将调用`Form.Show()`或`Form.ShowDialog()`在`Timer.Tick`事件处理程序上，以便在调用`Run`. 我觉得这也有点尴尬。

这两种解决方案都规避了您使用 Windows 和 WinForms 的方式；因此，我认为您需要考虑重新设计此应用程序以使用 Windows 和 .NET 的工作方式。

# ios - 适用于 iOS 的 AIR 应用程序

> ID：13049532
> 
> 赞同：2
> 
> 时间：2012-10-24T12:46:50.927
> 
> 标签：ios, air

我正在使用 Flash 和 Flash Builder 4.6 开发 AIR 应用程序。我已经把其中的几个放在我的服务器上。当我尝试从 iPad / iPhone 下载时，它会出错并说无法安装该应用程序。iOS 设备是否需要安装 AIR sdk 才能查看 AIR 应用程序？提前致谢。抢 - [http://www.putnamassociates.com/Apps/newApps.html](http://www.putnamassociates.com/Apps/newApps.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T05:10:18.463

您需要将您的应用程序提交到 App-Store，或者您需要购买一个“企业”帐户，您可以使用它在没有应用程序商店的情况下安装应用程序。

# jquery-ui - Droppable 无法识别可拖动对象

> ID：13049533
> 
> 赞同：2
> 
> 时间：2012-10-24T12:46:57.980
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我正在使用 jQuery 创建一个可放置的元素 - 这似乎工作正常，因为该元素获取了类 ui-droppable。

我已经这样设置了：

```
 $('#trashcan').droppable({
            drop: function( event, ui ) {
                alert('Dropped');
            }
        }); 
```

图像在哪里`#trashcan`。

后来，为了响应用户操作，我设置了一些可拖动对象。这些是表格行，我像这样设置它们（“元素”只是创建的表格行）：

```
 $(element).draggable({
                revert: false, 
                helper: 'clone', 
                intersect: 'pointer',
                stop: function() {
                    alert('dropped');
                }}); 
```

之后，它们看起来像这样：

```
 <tr class="ui-draggable">
    <td>First</td>
    <td>Name</td>
</tr> 
```

所以这一切看起来都设置好了。但是，当我将表格行拖到垃圾桶上时，我会从可拖动代码中“删除”，而不是从可放置代码中。所以draggable已经被拖了，但是droppable还没有识别出来。

我不确定在这里检查什么。例如，有什么理由不能在表格行上工作吗？我已经检查了 z-index 之类的东西，这似乎不是问题。在创建可拖动对象后，我是否必须做一些特殊的事情来连接可拖动对象和可放置对象（即在创建可放置对象时完成的事情，因为稍后会创建可拖动对象，所以我需要重新执行此操作）？

# android - Android：第 3 方应用程序能否使用 AT 命令自动接听电话...？

> ID：13049537
> 
> 赞同：4
> 
> 时间：2012-10-24T12:47:11.790
> 
> 标签：android, at-command, phone-call

我需要开发一个自动应答（GSM 呼叫）Android 应用程序。

我搜索了互联网并了解到第 3 方应用程序没有权限“android.permission.MODIFY_PHONE_STATE”，因此我的应用程序无法自动接听电话。

然后，我阅读了这些 AT 命令。在阅读了不同的链接后，我仍然不确定我想问的两件事：

1.  第三方应用程序可以使用这些 AT 命令自动接听电话吗...？
2.  它需要root访问权限吗？

我认为它需要root访问权限（但我需要确认），因为在我的无根手机上我使用了命令

```
"busybox microcom -t 5000 /dev/ttyGS0" 
```

但我得到了

```
"busybox: permission denied" 
```

（我试图root手机，但由于一些问题我无法root它。）

因为，我没有任何使用 AT 命令的背景，所以，在开始编写完整的 AT 命令代码之前，我需要确认以上两点，以确保我的方向是正确的。

（我很困惑，因为我编写了简单的代码来获取端口的名称，但程序没有显示任何输出（对于我的无根手机）......）

# javascript - 错误：无法读取 null 的属性“值”

> ID：13049541
> 
> 赞同：4
> 
> 时间：2012-10-24T12:47:25.027
> 
> 标签：javascript

我对javascript非常陌生，因此对于我提出问题的方式有任何问题，我提前道歉。如果未填写所有字段，我正在尝试发布数据并弹出警告。其中一个字段是无线电类型。这是一个带有我的脚本[http://jsfiddle.net/J2yWQ/64/的 jsfiddle 的链接](http://jsfiddle.net/J2yWQ/64/)

这是我目前拥有的

```
function emailWarning() {
    var check = document.getElementById("check");
    check.className = 'show';
}

function validateEmail(xem) {
    var re = /\S+@\S+\.\S+/;
    return re.test(xem);
}

function postData() {
        email = 'email'+document.getElementById('email').value;
    var tt = validateEmail(email);
    if (tt == true) {
        xmlhttp.open('POST', 'payment.php', true);
        xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xmlhttp.send(myProps.join("&"));
    } else {
        emailWarning();
    }
}

function insert() {
    try {
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else {
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
        }

    var myProps = [];

    function addProp(id) {
            var value = encodeURIComponent(document.getElementById(id).value);
            myProps.push(id + "=" + value);
    }

    addProp('child_name');
    addProp('age');
    addProp('hometown');
    addProp('boy_girl');
        addProp('first_name');
    addProp('last_name');
    addProp('email');
    addProp('address1');
    addProp('address2');
    addProp('city');
    addProp('state');
    addProp('zip');
    addProp('country');

    var flagInvalid = false;
    var tempArray = document.getElementsByClassName("required");
    for (var i = 0; i < tempArray.length; i++) {
        if (tempArray[i].value == "") {
            flagInvalid = true;
            break;
        }
    }

    if (flagInvalid == false) {
        postData();

    } else {

        var log = document.getElementById("log");
        log.className = 'show';
        var log1 = document.getElementById("log1");
        log1.className = 'show';
        var log2 = document.getElementById("log2");
        log2.className = 'show';
        var log3 = document.getElementById("log3");
        log3.className = 'show';
        var log4 = document.getElementById("log4");
        log4.className = 'show';
        var log5 = document.getElementById("log5");
        log5.className = 'show';
        var log6 = document.getElementById("log6");
        log6.className = 'show';
        var log7 = document.getElementById("log7");
        log7.className = 'show';
        var log8 = document.getElementById("log8");
        log8.className = 'show';
        var log9 = document.getElementById("log9");
        log9.className = 'show';
        var log0 = document.getElementById("log0");
        log0.className = 'show';
        var logA = document.getElementById("logA");
        logA.className = 'show';
            }   

    } catch (e) {
        alert('An error occured in inert: ' + e);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:56:12.257

当`addProp`body 更改为此问题时，很容易发现问题：

```
function addProp(id) {
  var el = document.getElementById(id);
  if (el) {
    myProps.push(id + "=" + encodeURIComponent(el.value));
  }
  else {
    alert('Not found: ' + id);
  }
} 
```

此HTML中不存在`boy_girl`和ID：`email`

```
Boy: <input type="radio" name="boy_girl" id="boy_girl_b" value="boy"/>
Girl:<input type="radio" name="boy_girl" id="boy_girl_g" value="girl"/></li>
...
<input type="text" name="email" id="check" maxlength="64" class="required" /> 
```

您可以使用以下方法修复它：

```
function addProp(name) {
    var els = document.getElementsByName(name);
    if (els.length) {
       myProps.push(name + "=" + encodeURIComponent(els[0].value));
    }
    else {
       alert('Not found: ' + name);
    }
} 
```

* * *

但事实上，这只是故事的开始。`myProps`对函数来说是本地的，`insert`但在函数中被引用`postData`；无论实际填写了哪些字段，您都会显示所有字段的验证错误标志......此外，您的代码有点湿 - 例如，所有这些

```
 var log = document.getElementById("log");
            log.className = 'show';
            var log1 = document.getElementById("log1");
            log.className = 'show';
            ... 
```

...可以很容易地转化为：

```
var showValidationError = function(id) {
    var el = document.getElementById(id);
    if (el) { 
        el.className = 'show'; 
    } 
    else { 
        alert('Missing element #' + id);
    }
}
...
showValidationError('log');
for (var i = 1; i < 10; i++) {
  showValidationError('log' + i);
} 
```

我明白你对 JS 很陌生；但这不是关于新鲜度，而是关于组织你的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:54:25.707

我打赌其中一条 addProp 行不正确。

调试这个，看看抛出错误之前的最后一个 id 是什么。

```
function addProp(id) {
        console.log(id);
        var value = encodeURIComponent(document.getElementById(id).value);
        myProps.push(id + "=" + value);
} 
```

当你这样做时，你会发现这条线

```
addProp('boy_girl'); 
```

将失败，因为没有 id

```
 <span id="log4" class="hidden" style="color:red"><b>*</b></span>
        Boy: <input type="radio" name="boy_girl" id="boy_girl_b" value="boy"/>
        Girl:<input type="radio" name="boy_girl" id="boy_girl_g" value="girl"/></li> 
```

因此，让我们更改函数以检查 id，如果 id 不存在则检查名称。

```
function addProp(id) {
    var input = document.getElementById(id);
    if (!input) {
        input = document.forms[0][id];
    }
    var value = encodeURIComponent(input.value);
    myProps.push(id + "=" + value);
} 
```

更改它，使 myProps 在函数之外。

```
var myProps = [];  //<--- Added this line
function insert() {
        try {
            if (window.XMLHttpRequest) {
                xmlhttp = new XMLHttpRequest();
            } else {
                xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
            }

            myProps = [];  //<---- Changed this line

            function addProp(id) {
                var input = document.getElementById(id);
                if(!input) {
                   input = document.forms[0][id];   
                }
                console.log(input);
                var value = encodeURIComponent(input.value);
                myProps.push(id + "=" + value);
            }

            addProp('child_name'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:27:25.700

如果您收到此类错误：

如果它们不返回 null，请始终检查您的所有 document.getElementById

```
var node = document.getElementById('someid');

if(node){
    do something;
} 
```

但请注意

```
var node = document.getElementById('someid').value; 
```

或者

```
var node = document.getElementById('someid');

if(node.value){ 
    do something;
} 
```

仍然可以抛出错误“无法读取 null 的属性”，因为您不检查节点是否真的存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:01:30.673

确保您设计的 ID 存在于页面上！比如`boy_girl`不存在！只有`boy_girl_b`和`boy_girl_g` 这同样适用于邮件。这个有 id`check`而不是 mail。

使用 Opera Dragonfly 或类似工具进行基本故障排除

# android - 根据安装的库从 MapActivity 或 Activity 扩展一个类

> ID：13049543
> 
> 赞同：3
> 
> 时间：2012-10-24T12:47:35.123
> 
> 标签：android, google-maps, google-api

想象一下，我有一个相机应用程序，我在其中一个角落显示一个小的 MapView，显示设备所在的位置。所以我必须从 MapActivity 扩展我的活动才能做到这一点。

然后想象一下，我想在没有 Google API 的设备上发布我的应用程序，例如 Kindle。由于 MapActivity 不再存在，我应该从常规 Activity 扩展。

我知道我可以设置

```
<uses-library
        android:name="com.google.android.maps"
        android:required="false" /> 
```

即使缺少库，也让用户安装应用程序。然后使用

```
 try {
        Class.forName("com.google.android.maps.MapView");
        googleMapsEnabled = true;
    } catch( ClassNotFoundException e ) {
        googleMapsEnabled = false;
    } 
```

检查 MapView 类是否存在。

但问题是我扩展的基类，如果 Google 地图不可用，它应该是 Activity 而不是 MapActivity。

我的问题是，如何使用相同的代码来支持这两个选项，而不根据安装的库将整个代码复制到不同的类中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:56:30.650

对于它的价值，我通常处理这样的事情的方法（即：我*必须*在不同的场景中从两个不同的基类继承，但最终想要相同或几乎相同的行为）就像我一样爆发可以将通用功能放入我从两个类中调用的静态帮助器类中。

# java - 为什么我生成的 Javadocs 看起来很糟糕？

> ID：13049548
> 
> 赞同：7
> 
> 时间：2012-10-24T12:48:01.990
> 
> 标签：java, maven, javadoc

我正在尝试为我的项目生成 Javadoc HTML 文件。我通过 Maven Javadoc 插件 (maven-javadoc-plugin) 生成它们。我正在使用 Maven 2.2.1。一切都会生成，以便所有正确的信息都在那里，但 HTML 看起来很糟糕。太糟糕了，我不想那样发布它。这是一个屏幕截图：

（**注意：**是的，我看到“您的浏览器上禁用了 JavaScript”消息。即使我单击有关活动内容的 IE 8 警告并启用它，也没有什么区别）

![混乱的 Javadoc 格式的屏幕截图](../Images/924478004d24577650908d6d069b532c.png)

各种不必要的换行符，基本的格式都是废话。我错过了什么吗？如果我将鼠标悬停在一个类或方法上并看到弹出的 Javadoc 面板，我希望看到生成的 Javadocs 看起来与我在 Eclipse 中看到的类似。

我尝试在我的 POM 文件中添加设置，但在配置 Javadoc 生成器时我真的不知道我在做什么。这是我目前拥有的（在`<reporting>`元素内部）：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <configuration>
        <javadocExecutable>C:\Java\jdk1.7.0_05\bin\javadoc.exe</javadocExecutable>
        <javadocVersion>1.7</javadocVersion>
        <locale>en_US</locale>
        <show>package</show>
        <verbose />
    </configuration>
</plugin> 
```

有什么建议么？

* * *

**更新：**

Paulius 提供的解决方案非常有效。我从我的部分中删除了上面的`<reporting>`部分，因为它完全没有必要。我添加了`<plugin>`他在下面指定的新元素。我的 POM 文件现在包含这个新块：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.8.1</version>
            <executions>
                <execution>
                    <id>attach-javadocs</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>           
        ...
    </plugins>
</build> 
```

这是固定输出的样子：

![正确生成的 Javadoc](../Images/6a4b62f2e6ec66c377563ef3f187e44a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:10:21.720

尝试`maven-javadoc-plugin`从`reporting`部分中删除。如果您使用的是 Maven 3，则报告部分已弃用，应删除。

尝试添加以下内容：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.8.1</version>
    <executions>
        <execution>
            <id>attach-javadocs</id>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

到你的 Maven`plugins`部分并运行它。我`maven-javadoc-plugin`像这样使用它，它会生成正常的 javadocs。

希望这可以帮助。

# php - NuSoap - 设置自定义内容类型

> ID：13049550
> 
> 赞同：2
> 
> 时间：2012-10-24T12:48:07.010
> 
> 标签：php, web-services, webservice-client, nusoap

我正在使用 NuSoap 向 Web 服务发出肥皂请求，因为 Soap 未安装在我使用的 Web 服务器上，但得到以下响应：

```
Response

HTTP/1.1 415 Cannot process the message because the content type 'text/xml; charset=ISO-8859-1' was not the expected type 'multipart/related; type="application/xop+xml"'.
Server: Microsoft-IIS/7.5
MIME-Version: 1.0
X-Powered-By: ASP.NET
Date: Wed, 24 Oct 2012 12:37:06 GMT
Content-Length: 0 
```

如何设置内容类型以适应上述请求？

这是我的代码

```
require_once('lib/nusoap.php');
$client = new soapclient('https://www.propctrl.com/v2/Integration.svc?wsdl',array('soap_version'=>1));
$headers = '
<CredentialsHeader>\n
<Username>username</Username>\n
<Password>password</Password>\n           
</CredentialsHeader>
';

$client->setHeaders($headers);

//var_dump($client);
$err = $client->getError();
if ($err) {
    echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
}
//$result = $client->call('getCredits',array('roland','r0l@nd'));
$result = $client->call('EchoAuthenticated',array("text"=>"Some text"));

echo '<h2>Request</h2><pre>' . htmlspecialchars($client->request, ENT_QUOTES) . '</pre>';
echo '<h2>Response</h2><pre>' . htmlspecialchars($client->response, ENT_QUOTES) . '</pre>'; 
```

任何帮助，将不胜感激

# python - 内联 Python 文档的行长

> ID：13049553
> 
> 赞同：0
> 
> 时间：2012-10-24T12:48:20.480
> 
> 标签：python, coding-style, documentation, inline

在编写内联文档时，是否有标准的换行方法来处理较长的文本行（显然这不应该经常发生）？

例如：

```
“这个模块做的废话废话废话废话废话废话废话废话废话”

```

或者应该是：

```
“这个模块可以做 blah blah blah blah blah blah blah blah blah blah blah
哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈
哈哈哈哈哈哈”

```

如果对此没有明确定义的标准或传统，我并不是真的在寻找辩论，在这种情况下，问题可能应该被关闭。但是，如果有标准或非常普遍的做法，我想知道它是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:52:51.660

对于像您问题中的示例这样的多行评论，您还可以使用 """三引号""" 让您的评论跨越换行符。

[PEP 8](http://www.python.org/dev/peps/pep-0008/)风格指南建议

> 将所有行限制为最多 79 个字符

并且：

> 对于流动的长文本块（文档字符串或注释），建议将长度限制为 72 个字符。

样式指南中有一个关于 docstrings 的特定部分，这是一种特定类型的内联文档，您可以在[此处](http://www.python.org/dev/peps/pep-0008/#documentation-strings)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:53:37.143

在计算机世界中，行通常限制为 80 个字符，PEP 风格指南建议最多为 79 个。

# base64 - 如何从谷歌应用脚 本设置谷歌驱动器中的图像/png mime 类型？

> ID：13049558
> 
> 赞同：0
> 
> 时间：2012-10-24T12:48:43.690
> 
> 标签：base64, google-apps-script, mime-types, google-drive-api

我有一个编码为 base64 blob 的图像，我可以从 Google Apps 脚本成功提供该图像 - 按照[这个 jsfiddle](http://jsfiddle.net/brucemcpherson/HW2Ae/)

我现在正在尝试使用 Google 应用脚本将其保存为 Google Drive 上的图像。虽然我可以写文件，当我下载它时访问它，它确实是一个图像，谷歌文档查看器无法预览它。这是保存它的代码 - 它有效，并且正确地将内容类型报告为 image/png。

```
 function writeToDrive() {
      var blobOb = blobObGet("googleLogoBlob");
      if (!blobOb.error) {
          var imgBlob = Utilities.newBlob(Utilities.base64Decode(blobOb.blob),"image/png",blobOb.name + ".png" );
          Logger.log (imgBlob.getContentType());
          var file = DocsList.createFile(imgBlob);
      }
    } 
```

如何从谷歌应用程序脚本访问文件元数据，以便为谷歌文档查看器设置正确的 mime/类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:06:31.877

恐怕这可能与jpegs 的[这个问题有关......这个问题已于 2012 年 4 月发布，但尚未修复。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1239)

# xml - 使用 xslt 加入两个基于节点文本的 xml 文件

> ID：13049561
> 
> 赞同：1
> 
> 时间：2012-10-24T12:48:52.610
> 
> 标签：xml, xslt, join

是否可以根据 SQL 等节点值连接两个 xml 文件？

我有两个 xml 文件：

```
<MailPackage>
   <Mail>
      <id>1</id>
      <field_1>foo</field_1>
      ...
      <field_n>bar</field_n>
   </Mail>
   <Mail>
      <id>2</id>
      <field_1>... </field_1>
       ...
   </Mail>
   ....
</MailPackackage> 
```

和

```
<Transaction_data>
   <Transaction>
     <id>1</id>
     <account_number>10 </account_number>
     ....
   </Transaction>
   <Transaction>
     <id>1</id>
     <account_number> 50 </account_number>
      ....
   </Transaction>
   <Transaction>
     <id>2</id>
     <account_number> 20 </account_number>
      ....
   </Transaction>
</Transaction_data> 
```

现在我想通过 'id' 节点的值加入这两个 xml 文件。预期结果是：

```
<MailPackage>
   <Mail>
      <id>1 </id>
      <field_1>foo </field_1>
      ...
      <field_n>bar </field_n>
      <Transaction_data>
         <Transaction>
            <Account_number>10</Account_number>
             ...
         </Transaction>
         <Transaction>
            <Account_number>50 </Account_number>
             ...
         </Transaction>
      </Transaction_data>
   </Mail>
   <Mail>
      <id> 2 </id>
      <Field_1> ...</Field_1>
       ...
      <Transactions>
         <Transaction>
            <Account_number> 20 </Account_number>
             ....
         </Transaction>
      </Transactions>

   </Mail>
</MailPackage> 
```

各位大神可以帮忙看看，如何入手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:19:39.837

您可以定义一个按 ID`<xsl:key>`对元素进行分组`Transaction`，然后将它们插入到主文件中的适当位置。 [本文](http://clover.slavic.pitt.edu/repertorium/plectogram/keys/keys.html)介绍了一种`<xsl:for-each>`用于从辅助文档中选择与键匹配的节点的技巧 - 如果您有 XSLT 2.0，则不需要此技巧，只需使用该`key()`函数的三参数形式。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:strip-space elements="*"/>
  <xsl:output method="xml" indent="yes" />

  <xsl:key name="trans" match="Transaction" use="id" />

  <!-- Identity template to copy everything we don't specifically override -->
  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <!-- override for Mail elements -->
  <xsl:template match="Mail">
    <xsl:copy>
      <!-- copy all children as normal -->
      <xsl:apply-templates select="@*|node()" />
      <xsl:variable name="myId" select="id" />
      <Transaction_data>
        <xsl:for-each select="document('transactions.xml')">
          <!-- process all transactions with the right ID -->
          <xsl:apply-templates select="key('trans', $myId)" />
        </xsl:for-each>
      </Transaction_data>
    </xsl:copy>
  </xsl:template>

  <!-- omit the id element when copying a Transaction -->
  <xsl:template match="Transaction/id" />
</xsl:stylesheet> 
```

您将该`<MailPackage>`文档作为主要输入文档进行处理，并且样式表在内部引用交易文档。

这一切都假设您的`Mail`元素都有唯一的 ID。

# python - sys.argv 没有在 python 3 中使用提供的参数

> ID：13049562
> 
> 赞同：2
> 
> 时间：2012-10-24T12:48:57.093
> 
> 标签：python, command-line

我在 Windows 8 中使用 python 3.3.0。

这是我要处理的代码：-

```
import sys

for arg in sys.argv:
    if arg == "-u":
        url = sys.argv[2]
        print (url)
        sys.exit(1) 
```

所以，当我在 cmd 中运行我的程序时：

```
python my.py -u http://www.aytelecom.ae/news-details.php?id=5&type=2 
```

我只得到`'http://www.aytelecom.ae/news-details.php?id=5`' 作为我的`sys.argv[2]`或`url`变量！

那么，谁能告诉我为什么它会跳过`'&type=2'`？我在任何地方都犯了错误还是python 3有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T12:53:02.913

& 是 shell 中的元字符。将网址放在引号中。

# java - CommunicationsException：通信链路故障

> ID：13049563
> 
> 赞同：5
> 
> 时间：2012-10-24T12:48:57.547
> 
> 标签：java, mysql, jdbc, group-concat, sqlexception

我用java从Mysql中查询了一些记录。但是在某些持续时间的查询中，我遇到了一个使查询失败的问题，但在其他查询中，它查询成功。接下来是错误消息：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 90 milliseconds ago.  The last packet sent successfully to the server was 1,674 milliseconds ago.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3090)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2979)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3520)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:935)
    at com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1433)
    at com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2924)
    at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:477)
    at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:2619)
    at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1788)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2209)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2619)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2569)
    at com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1521)
    ......
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: java.io.IOException: Packets received out of order
    at com.mysql.jdbc.MysqlIO.readRemainingMultiPackets(MysqlIO.java:3152)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3077)
    ... 23 more 
```

我尝试了一些方法，例如：

*   设置 `max_allowed_packet = 128 * 1024 * 1024`在`/etc/my.conf`
*   添加 `?autoReconnect=true&failOverReadOnly=false&maxReconnects=10`到我的连接网址

但什么也没发生。

我的环境是：

*   mysql: 5.5.3-m3-log 源码分布
*   爪哇：1.6.0_16
*   Jdk：HotSpot(TM) 64 位服务器 VM（内部版本 14.2-b01，混合模式）
*   JDBC：mysql-connector-java-5.1.18

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T09:26:55.893

问题解决了。因为结果太大了。在我的查询中，我使用了默认游标，即客户端游标，这意味着 SELECT 的整个结果记录集都返回给客户端（应用程序）并在那里完成分页。所以总的结果集太大，导致 jdbc 客户端内存不足。解决方案是：

1.  在 JDBC URL 配置参数中添加“useCursorFetch=true”
2.  调用 statement.setFetchSize(100)

您可以从以下网址阅读更多详细信息：[http ://wiki.gxtechnical.com/commwiki/servlet/hwiki?Client%20and%20server%20cursors%20-%20using%20MySQL](http://wiki.gxtechnical.com/commwiki/servlet/hwiki?Client%20and%20server%20cursors%20-%20using%20MySQL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:09:05.423

当您尝试使用陈旧的连接提交时，可能会发生这种情况。在提交之前尝试检查连接状态。

# iphone - 使用带有 ID 的非消耗性应用内购买

> ID：13049567
> 
> 赞同：0
> 
> 时间：2012-10-24T12:49:11.707
> 
> 标签：iphone, ios, xcode, in-app-purchase, identifier

我在我的应用程序中使用应用程序内购买，以将一些声音从应用程序发送到 iPhone 作为铃声。

我使用“Consumable”作为应用内购买的类型，这样用户就可以购买铃声并直接下载。

然而这个应用程序被苹果拒绝了，因为他们希望这个功能是非消耗性的（所以你可以多次检索这个铃声）。我只是不知道如何在我的应用程序中进行设置，因为有超过 200 种可能的铃声。实际购买并不是困难的部分，但作为应用内购买的标准，您需要能够恢复以前的交易。由于我只使用一个产品标识符，我想我在恢复时无法识别购买了哪个铃声。

所以我的最后一个问题： 1\. 我如何识别购买了哪些商品（即通过在购买中使用标签）？2\. 我只能使用 1 个产品标识符来进行此应用内购买吗？还是我需要为每个铃声制作一个产品标识符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:30:35.503

您必须为每个铃声创建一个非消耗品产品，每个铃声都有不同的标识符，如果 Apple 拒绝您的应用程序，我认为您别无选择。

# java - 将字符串数组传递给 NDK JNI 方法

> ID：13049570
> 
> 赞同：0
> 
> 时间：2012-10-24T12:49:23.300
> 
> 标签：java, android, android-ndk, java-native-interface

我正在尝试按照 cpp 文件中的代码从 java 文件中接收 arraylist。这是代码

```
jobjectArray trackables;
JNIEXPORT void JNICALL
Java_com_putitout_buck_VideoPlayback_setTrackables(JNIEnv *env, jobject obj, jobject trackables_)
{

    // use the Array list
    jclass  ArrayList_class = env->FindClass( "java/util/ArrayList" );

    // to conver jobject to jstring
    jmethodID caster = env->GetMethodID(ArrayList_class, "toString", "()Ljava/lang/String;");

    // get two methods
    jmethodID Get_method            = env->GetMethodID( ArrayList_class, "get", "(I)Ljava/lang/Object" );
    jmethodID Size_method           = env->GetMethodID( ArrayList_class, "size", "()I" );

    // call java.lang.ArrayList.get()
    int NumElts = env->CallIntMethod(trackables_, Size_method);

    // allocate output array
    jclass objClass = env->FindClass("java/lang/String");
    trackables = env->NewObjectArray(NumElts, objClass, 0);

    // fetch all the items
    for(int i = 0 ; i < NumElts ; i++)
    {
        // call java.lang.ArrayList.get(int index) method
        // Not sure about the parameter passing here
        jobject Tmp = env->CallObjectMethod(trackables_, Get_method, i);

        jstring Str = (jstring)env->CallObjectMethod(Tmp, caster);

        __android_log_print(ANDROID_LOG_ERROR, "TRACKERS", "%s", Str);

        // get the length
        int StrLen = env->GetStringLength(Str);

        env->SetObjectArrayElement(trackables, i, Str);
    }
} 
```

以下是我在 java 文件中声明的代码

```
public native void setTrackables(ArrayList<String> trackables); 
```

以下是在日志中。

```
10-24 17:45:44.555: W/dalvikvm(27400): JNI WARNING: JNI method called with exception pending
10-24 17:45:44.555: W/dalvikvm(27400):              in Lcom/putitout/buck/VideoPlayback;.setTrackables:(Ljava/util/ArrayList;)V (GetMethodID)
10-24 17:45:44.555: W/dalvikvm(27400): Pending exception is:
10-24 17:45:44.555: E/dalvikvm(27400): VM aborting
10-24 17:45:44.560: A/libc(27400): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:22:53.970

为什么要使用 JNI 将 ArratList 对象转换为字符串数组？最好在 Java 中做到这一点——更简洁的代码——并将字符串数组传递给 JNI。

也就是说，LogCat 说您的一个 Java 方法调用导致了异常。它没有说是哪一个。要进行调试，请在每个 CallXXXMethod 之后插入一个检查：

```
if(env->ExceptionOccurred())
{
    __android_log_write(ANDROID_LOG_ERROR, "TRACKERS", "Error in (MethodName)");     
    env->ExceptionDescribe();
} 
```

还有，“有什么帮助吗？” 评论不具建设性。请不要急于社区。这是一项免费服务，这里没有人**欠**您一个答案。

# web-services - 给定国家/地区的所有城市 Google-map

> ID：13049571
> 
> 赞同：5
> 
> 时间：2012-10-24T12:49:26.897
> 
> 标签：web-services, google-maps

是否可以使用 Google-Map 的服务来获取给定国家/地区的所有城市？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:21:25.657

不，所有 Google 服务都是有限的。尝试查看[geonames](http://geonames.org)，他们提供的服务可以满足您的需求，或者您可以从那里下载所需的数据并在本地提供服务。

免责声明，现在不可能。通常，如果我做出这样的绝对声明，该功能稍后就会变得可用。您可以尝试将[增强请求添加到问题列表](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3aJavascript3%20type%3aEnhancement&sort=-stars&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Internal%20Stars)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T12:57:58.727

看看[Google Places API](https://developers.google.com/places/documentation/)

# visual-studio-2012 - Silverlight 5\. VS 2012 不支持 ControlStoryboardAction？

> ID：13049574
> 
> 赞同：2
> 
> 时间：2012-10-24T12:49:31.250
> 
> 标签：visual-studio-2012, expression-blend, silverlight-5.0

在 Visual studi0 2012 中制作的 Silverlight 5 应用程序有一个奇怪的问题。

问题：

使用 Silverlight 5 的 Expression Blend Preview，我成功地将情节提要添加到视图中，并使用**ControlStoryboardAction**在网格加载时触发情节提要。这将在 Expression Blend 中呈现良好，但在 VS2012 中查看 xaml 它将失败并出现以下错误：

```
The type 'ControlStoryboardAction' from assembly 'Microsoft.Expression.Interactions' is built with an older version of the Blend SDK, and is not supported in a Silverlight 5 project. 
```

应用程序在浏览器中构建并运行良好，即故事板被触发，但是VS2012会抛出错误仍然很烦人。

我看到这似乎是一个程序集版本问题，但一切都是为 Silverlight 5 设置的。

以下是有问题的xaml：

```
<Grid x:Name="LayoutRoot" Background="White">
    <i:Interaction.Triggers>
        <i:EventTrigger>
            <ei:ControlStoryboardAction x:Name="GridLoadedTriggerEvent" Storyboard="{StaticResource StoryBoardWindowFadeIn}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Grid.RowDefinitions>
        <RowDefinition Height="60" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    ...Excluded text...
</Grid> 
```

问题在于使用：

```
<ei:ControlStoryboardAction x:Name="GridLoadedTriggerEvent" Storyboard="{StaticResource WindowFadeIn}"/> 
```

从命名空间：`xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"`

是否有人对为什么似乎存在此版本问题有解决方案或解释。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:26:40.180

我无法重现这个确切的问题（在 Blend Preview 中工作正常，能够在浏览器中运行和构建，但在 VS 2012 中显示 XAML 错误），但是当我引用该`\Silverlight\v4.0\`版本时，我在 VS 2012 中确实遇到了类似的错误的版本`Microsoft.Expression.Interactions.dll`与 的`\Silverlight\v5.0\`版本结合使用`System.Windows.Interactivity.dll`。

那么您能否验证这两个 DLL：

> `Microsoft.Expression.Interactions.dll`
> 
> `System.Windows.Interactivity.dll`

都引用位于 的 Blend Silverlight 5.0 程序集`C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\Silverlight\v5.0\Libraries`。

如果不是，请尝试从 v5.0 版本中删除并重新添加这些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:20:45.323

我有一个类似的问题——可能是同一个问题——我的问题是`System.Windows.Interactivity.dll`.

我们在我的项目中使用[MVVM Light](http://mvvmlight.codeplex.com/)，显然它提供了自己的版本`System.Windows.Interactivity.dll`。据我所知，版本信息是正确的，但 VS2012 错误仍然存​​在。

一旦我删除并重新添加了参考（与 Scott Koland 11 月 16 日的注释相同的位置），一切都清理干净了，现在可以正常工作了。

# r - R - 矩阵中非对角线元素的最小值、最大值和平均值

> ID：13049575
> 
> 赞同：13
> 
> 时间：2012-10-24T12:49:34.657
> 
> 标签：r, sum, mean

我在 R 中有一个矩阵，我想得到：

```
Max off - diagonal elements
Min off – diagonal elements
Mean off –diagonal elements 
```

对角线我使用 max(diag(A)) ， min(diag(A)) ， mean(diag(A)) 并且工作得很好

但是对于非对角线我试过

```
dataD <- subset(A, V1!=V2)

Error in subset.matrix(A, V1 != V2) : object 'V1' not found 
```

使用：

```
colMeans(dataD) # get the mean for columns 
```

但我无法获取 dataD b/c 它说找不到对象“V1”

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-24T13:02:06.600

这里的`row()`和`col()`辅助函数很有用。使用 @James `A`，我们可以使用这个小技巧获得上非对角线：

```
> A[row(A) == (col(A) - 1)]
[1]  5 10 15 
```

和通过这个降低对角线：

```
> A[row(A) == (col(A) + 1)]
[1]  2  7 12 
```

这些可以概括为您想要的任何对角线：

```
> A[row(A) == (col(A) - 2)]
[1]  9 14 
```

并且不需要任何子集。

然后，在这些值上调用您想要的任何函数是一件简单的事情。例如：

```
> mean(A[row(A) == (col(A) - 1)])
[1] 10 
```

如果根据我的评论，您的意思*是对角线以外的所有内容*，请使用

```
> diag(A) <- NA
> mean(A, na.rm = TRUE)
[1] 8.5
> max(A, na.rm = TRUE)
[1] 15
> # etc. using sum(A, na.rm = TRUE), min(A, na.rm = TRUE), etc.. 
```

所以这不会丢失，Ben Bolker 建议（在评论中）上面的代码块可以使用我上面提到的`row()`and`col()`函数更巧妙地完成：

```
mean(A[row(A)!=col(A)])
min(A[row(A)!=col(A)])
max(A[row(A)!=col(A)])
sum(A[row(A)!=col(A)]) 
```

这是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T14:26:44.083

在一行简单的代码中：

对于矩阵 A，如果您希望找到上下对角线的最小值、**第一****四分**位数、中位数、**平均值**、第三四分位数和**最大值：**

 **`summary(c(A[upper.tri(A)],A[lower.tri(A)]))`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T12:59:08.587

适当子集的`diag`矩阵将为您提供非对角线。例如：

```
A <- matrix(1:16,4)
#upper off-diagonal
diag(A[-4,-1])
[1]  5 10 15
#lower off-diagonal
diag(A[-1,-4])
[1]  2  7 12 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-20T12:12:43.810

*要获得一个包含矩阵每个列或行*的非对角元素的最大值的向量，还需要几个步骤。在寻求帮助时，我被指引到这里。也许其他人也会这样做，所以我提供了这个解决方案，我发现它使用了我在这里学到的东西。

诀窍是创建一个仅包含非对角元素的矩阵。考虑：

```
> A <- matrix(c(10,2,3, 4,10,6, 7,8,10), ncol=3)
> A
     [,1] [,2] [,3]
[1,]   10    4    7
[2,]    2   10    8
[3,]    3    6   10
> apply(A, 2, max)
[1] 10 10 10 
```

使用建议的索引进行子集`A[row(A)!=col(A)]`化，按列顺序生成一个非对角元素向量：

```
> v <- A[row(A)!=col(A)]
> v
[1] 2 3 4 6 7 8 
```

将其返回到矩阵允许使用`apply()`将选择函数应用于仅非对角元素的边距。以`max`函数为例：

```
> A.off <- matrix(v, ncol=3)
> A.off
     [,1] [,2] [,3]
[1,]    2    4    7
[2,]    3    6    8
> v <- apply(A.off, 2, max)
> v
[1] 3 6 8 
```

整个操作可以在一行中紧凑地——而且相当隐秘地——编码：

```
> v <- apply(matrix(A[row(A)!=col(A)], ncol=ncol(A)), 2, max)
> v
[1] 3 6 8 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-06T14:45:20.057

只需将矩阵 A 乘以 1-diag (nofelements)

例如，如果 A 是一个 4x4 矩阵，那么

平均值(A*(1-diag(4)) 或 A*(1-diag(nrow(A)))

当您需要多次运行同一行代码时，这会更快

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T13:41:27.430

除了詹姆斯的回答，我想补充一点，您可以使用 diag 函数直接排除矩阵的所有对角线元素`A[-diag(A)]`。例如，考虑： `summary(A[-diag(A)])`**

# ios - 在 iOS 代码中嵌入 API 凭据

> ID：13049579
> 
> 赞同：0
> 
> 时间：2012-10-24T12:49:56.243
> 
> 标签：ios, security

我必须从 iOS 代码调用支付网关 API。问题是它需要商家凭据，我觉得将商家凭据嵌入代码中是不安全的。如果有人以某种方式对代码进行逆向工程并获得凭据，那么客户端就死了。有什么建议吗？

我发现这篇文章[苹果会修改提交到 App Store 的应用程序上的 iOS 应用程序可执行文件吗？](https://stackoverflow.com/questions/5784169/does-apple-modify-ios-application-executables-on-apps-submitted-to-the-app-store/5784332#5784332)这表示应用程序二进制文件默认由 Apple 加密。这是否意味着我可以安全地将凭据嵌入代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:24:37.140

不！您应该考虑设置一个处理与 API 交互的服务器，而不是向 iOS 应用程序添加凭据，您正在谈论，并让应用程序只与您的服务器交互。因此，您可以将 API 密钥存储在您的服务器上，并可以限制服务器端用户的可能操作（这将更难滥用）。

# uiscrollview - UIScrollView 在 IOS6 中无法正常工作

> ID：13049580
> 
> 赞同：1
> 
> 时间：2012-10-24T12:50:02.977
> 
> 标签：uiscrollview, ios6, uitabbar

我在一个 TabBarViews 中使用了一个简单的 UIScrollview。我希望这适用于自动布局，所以我做了一些搜索，发现 ViewDidappear 方法适用于自动布局。滚动条使用 viewdidAppear 而不是 viewDidLoad 可以正常工作，但是当我切换到另一个选项卡而不滚动回顶部时，它不会释放或其他东西。当我回到滚动视图选项卡时，滚动条无法一直到顶部？它从我离开的地方开始并从那里滚动所有长度。

[http://tinypic.com/r/24dmys8/6](http://tinypic.com/r/24dmys8/6) 滚动开始，当我继续向下滚动并切换选项卡时。

[http://tinypic.com/r/2e37vb9/6](http://tinypic.com/r/2e37vb9/6) 当我从另一个选项卡回来时，滚动从此时开始。我认为这是某种发布问题......但我无法解决什么问题？！

这是我使用的代码：

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

[self.ScrollviewVT2 setContentSize:CGSizeMake(320.0,1440.0)];
[self.ScrollviewVT2 setContentOffset:CGPointZero animated:YES];
   } 
```

# c# - Outlook COM 插件已安装但未在 Outlook 中加载

> ID：13049588
> 
> 赞同：4
> 
> 时间：2012-10-24T12:50:50.920
> 
> 标签：c#, visual-studio-2010, outlook, vsto, add-in

我已经使用 Visual Studio 2010 创建了一个 Outlook 插件，它可以正常安装并在程序文件 (x86) 中创建适当的注册表项和文件夹，正如我指定的那样，它显示在添加和删除程序中。

但是，当我启动 Outlook 2010 时 - 它没有出现，当我检查 COM 插件时，它在列表中不可用。我在 VS 中创建了安装程序，并像往常一样在文件系统中添加了主项目的输出，并且还包含了该`.vsto`文件。

任何人请指点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:37:15.667

由于您正在运行**x64 OS**和**x64 Office**，因此您不使用`Wow6432Node`- 它[仅用于x64 OS 上的 32 位应用程序的**注册表反射**](https://stackoverflow.com/a/10734645/175679)。供您使用的正确注册表配置单元如下......

### 所有用户 Hive（x64 操作系统上的 x64 Office）

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Office\Outlook\Addins\[add-in ID] 
```

请参阅[有关正确 VSTO 注册表路径的相关 SO 帖子](https://stackoverflow.com/a/8606087/175679)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-16T21:16:48.287

您可以通过 HKLM 为所有用户运行您的加载项，而无需 ClickOnce 使用这个难以找到的技巧：

在您的 VSTO 清单路径值之后放置一个管道和一个“vstolocal”标志，因此：

在**HKLM\Software\Microsoft\Office\Outlook\Addins\MyVSTOAddIn**
manifest="C:\Program Files\Publisher\MyVSTOAddIn\MyVSTOAddIn.vsto|vstolocal"

（参见：http: [//blogs.msdn.com/b/vsto/archive/2010/03/08/deploying-your-vsto-add-ins-to-all-users-saurabh-bhatia.aspx](http://blogs.msdn.com/b/vsto/archive/2010/03/08/deploying-your-vsto-add-ins-to-all-users-saurabh-bhatia.aspx)）

并像这样设置 EnableLocalMachineVSTO 标志：

在**HKLM\Software\Microsoft\Office\14.0\Common\General**
(DWORD) EnableLocalMachineVSTO=1

（参见：[http](http://social.msdn.microsoft.com/Forums/vstudio/en-US/e724cdcb-ccad-4d9f-826a-65a6816409f9/vsto-alluser-addin-fails-to-load-on-several-clients) ://social.msdn.microsoft.com/Forums/vstudio/en-US/e724cdcb-ccad-4d9f-826a-65a6816409f9/vsto-alluser-addin-fails-to-load-on-several-clients )

此外，如果要安装到 64 位版本的 Windows，则必须在另一个位置使用两个值启用本地计算机安装：

在**HKLM64\SOFTWARE\Microsoft\VSTO Runtime Setup\v4**
(DWORD) EnableVSTOLocalUNC=1
(DWORD) EnableLocalMachineVSTO=1

（见： http: [//support.microsoft.com/kb/2022442](http://support.microsoft.com/kb/2022442)）

无需 SideBySide、PromptingLevel、VSTO\Security\Inclusion 和 Active Setup\Installed Components “StubPath”！只需安装并运行。

***添加于 2013 年 10 月 3 日...***

事实证明，Win64 中的 Outlook 2010 在信任 VSTO 加载项方面存在进一步的困难，除非您使用真正的代码签名 PFX 对它们进行签名并将证书放在用户计算机的**受信任的发布**者存储中。我编写了这个命令行实用程序，其中嵌入了可执行文件中的 PFX，以使证书成为安装过程的一部分。要访问本地计算机 Trusted Publishers 存储，必须以管理员身份运行：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;
using System.Text;
using System.IO;

namespace TrustCert
{
    class Program
    {
        static void Main(string[] args)
        {
            string msg = "";
            try
            {
                byte[] pfx;
                var assembly = typeof(Program).Assembly;
                string pfxName = "";
                foreach (string mr in assembly.GetManifestResourceNames())
                {
                    if (mr.Contains("MyPfxName"))
                    {
                        pfxName = mr;
                        break;
                    }
                }
                using (var stream = assembly.GetManifestResourceStream(pfxName))
                {
                    pfx = new byte[stream.Length];
                    stream.Read(pfx, 0, pfx.Length);
                }
                X509Certificate2 cert = new X509Certificate2(pfx, "pfxPassword");
                X509Store store = new X509Store(StoreName.TrustedPublisher
                    , StoreLocation.LocalMachine);
                store.Open(OpenFlags.ReadWrite);
                store.Add(cert);
                store.Close();
                msg = "Certificate installed";
            }
            catch (Exception e)
            {
                msg = e.ToString();
            }
            Console.WriteLine(msg);
        }
    }
} 
```

# annotations - 自定义 java 注释 ind javadoc / doxygen

> ID：13049589
> 
> 赞同：2
> 
> 时间：2012-10-24T12:50:58.680
> 
> 标签：annotations, javadoc

我已经建立了一个自定义注释，例如

```
 package com.uc4.ucdf.control.xgui;
import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Documented
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface XGUIElement {

    public String Name();

    public String Description();

    public XGUIAttribute[] Attributes();

    public String CodeSnipet();
} 
```

和

```
package com.uc4.ucdf.control.xgui;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Documented
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface XGUIAttribute {

    public String Name();

    public String ValueType();

    public String Description();
} 
```

在我的类文件中，我得到了这个注释

```
@XGUIElement(   Name = "dialog", 
                Description = "this component provides a empty internal window with a title and some properties like if its minimizable, maximizable", 
                CodeSnipet = "<dialog id=\"myDialog\" text=\"Hello World\">", 

                Attributes = {
                    @XGUIAttribute(Description = "Set the width of the Dialog", Name = "width", ValueType = "Integer"),
                    @XGUIAttribute(Description = "Set the height of the Dialog", Name = "height", ValueType = "Integer"),
                    @XGUIAttribute(Description = "1 for true; 0 for false", Name = "top", ValueType = "Integer"),
                    @XGUIAttribute(Description = "Set the left position of this dialog", Name = "left", ValueType = "Integer"),
                    @XGUIAttribute(Description = "Allows you to set the dialog over all not ontop dialogs 1 for true; 0 for false ", Name = "ontop", ValueType = "Integer")
                }

) 
```

这工作创建，我可以读取我的 swingComponent 中的单个值，但我应该将此注释带入使用 Doxygen 构建的 javaDoc 中。

那么为什么我在我的 javadoc 中看不到注释以及如何将其转换为所有属性的表格列表。

# javascript - jquery.transit 在滚动期间没有动画

> ID：13049590
> 
> 赞同：0
> 
> 时间：2012-10-24T12:51:01.603
> 
> 标签：javascript, jquery, cordova, css-transitions

我正在使用 phonegap 制作一个 iPad 应用程序，在这方面我喜欢[jquery.transit](http://ricostacruz.com/jquery.transit/)，它可以轻松地帮助我制作 css3 动画。

然而，我遇到了一个障碍。我正在制作一个在线列表，将在他们登录时添加新用户。在滚动页面时添加 DOM 元素没有问题，但是，当添加 css3 动画以“展开”元素时，动画仅在不滚动时有效。结果元素高度为：0；不会产生所需的高度：56px；在上面运行动画时。

- - 编辑 - -

看来这个问题与在其他 div 中滚动而不是运行动画有关。如果我滚动包含friendList（通过溢出自动修复）的div，它在滚动时工作正常。只有在滚动实际页面和 iOS 原生滚动时才会出现问题。

- - 编辑 - -

代码如下所示：

```
<ul class="friendList">
  <li class="friendElement">
     <div class="friendWrapper">
     (content here)
     </div>
  </li>
</ul> 
```

在哪里

```
.friendWrapper.entering{
   height:0;
} 
```

并在朋友登录时：

```
var $friendTemplate = (... appropriate template goes here ...);

function friendLogsOn(){
   var $newFriend = $friendTemplate.clone(),
   $friendList = $(".friendList"),
   nmbElements = $friendList.children().length,
   rand = Math.floor(Math.random()*nmbElements);
   $newFriend.find(".friendWrapper").addClass("entering");
   $newFriend.insertAfter($friendList.children().eq(rand));
   $newFriend.find(".friendWrapper").transition({ height: '56px' },function(){
      $(this).removeClass("entering");
   });
} 
```

我无法在用户滚动时让 jquery.transition 激活动画，有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:20:29.480

在进行常规页面滚动时无法设置动画，因为 iOS 在滚动开始时会渲染整个页面。

这样做是为了提高性能。其他智能手机和桌子也做同样的事情。

您可以使用 iScroll4 之类的插件来实现结果。iScroll 不做常规滚动，而是监听鼠标/触摸事件，然后移动元素来模拟滚动。 [http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

如果您想测试动画是否在滚动时停止，我制作了一个简单的 jsfiddle，您可以尝试一下。（在 iPad、iPhone、android 设备等） [http://jsfiddle.net/3ntKM/4/embedded/result/](http://jsfiddle.net/3ntKM/4/embedded/result/)

```
<style>
    #square {
        width: 200px;
        height: 200px;
        margin: auto;
        background: red;
        -webkit-animation: rotate 4s infinite linear;
    }
    @-webkit-keyframes rotate {
        from { -webkit-transform: rotate(0deg); }
        to { -webkit-transform: rotate(360deg); }
    }
</style>
<div id="square"></div> 
```

# c# - 在他离线时在 Facebook 用户帐户上上传照片

> ID：13049595
> 
> 赞同：0
> 
> 时间：2012-10-24T12:51:25.063
> 
> 标签：c#, facebook, permissions

我正在使用 ASP.NET 和 C# 和 Facebook C# SDK (http://cshapsdk.org/) 开发服务器端应用程序。

此应用程序在用户第一次登录时获得用户权限 publish_stream 然后应用程序在后台运行，无需用户交互。

该应用程序将定期在用户照片上上传自定义图像，并将其发布在用户墙上。我需要知道它是否可能，我的意思是是否可以构建一个上传照片的应用程序，而他没有通过应用程序的身份验证。

在我的测试中，我注意到使用应用程序访问令牌的状态是可能的，但是对于照片我遇到了问题：我收到以下消息：

```
A user access token is required to request this resource. 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:33:42.990

虽然在没有用户身份验证的情况下无法上传照片，但没有什么能阻止您实施下一个流程：

*   [验证用户](https://developers.facebook.com/docs/technical-guides/login/)
*   [扩展用户的`access_token`](https://developers.facebook.com/docs/howtos/login/extending-tokens/)
*   商店`access_token`在您的末端扩展
*   使用存储上传照片`access_token`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:09:19.883

> 我需要知道它是否可能，我的意思是是否可以构建一个上传照片的应用程序，而他没有通过应用程序的身份验证。

当然这是不可能的，要发布照片，您必须获得许可。

> 在我的测试中，我注意到使用应用程序访问令牌可能会出现状态，但是对于照片我遇到了问题：我收到以下消息：需要用户访问令牌才能请求此资源。

这清楚地表明您需要一个身份验证令牌来执行此操作。

如果令牌已过期，您应该能够在没有用户交互的情况下更新/扩展令牌。

# iphone - 应用程序不会在 iOS6 上开始使用 testflight

> ID：13049598
> 
> 赞同：2
> 
> 时间：2012-10-24T12:51:43.040
> 
> 标签：iphone, ios, ipad, xcode4, testflight

我有一个应用程序，我想在 iOS 设备上对其进行测试。该应用程序使用**NIB 文件**，没有故事板。

目标框架设置为 - 5.1 设备 - 通用。

我已经创建了 IPA 文件并上传到了 TestFlightApp。

我已经在我的 iPad 上下载并安装了该应用程序。奇怪的是，当我点击图标时，会显示黑屏，但没有其他任何反应。

我做了以下设置。

主界面 -`SSDMainViewController` 主故事板 - 未设置，因为我在应用程序中没有任何故事板。

这不是 IOS 版本的问题，因为其他应用程序运行良好。

> 编辑：当我双击 iPad 按钮时，我看到应用程序没有崩溃。它在后台运行。
> 
> 编辑 2：有关该问题的更多信息。

好吧，我采用了一个基于视图的应用程序，它所有的 NIB 都没有故事板。它最初是一个针对 IOS 5.1 的 iPhone 应用程序，但后来我将项目下拉列表中的值更改为**UNIVERSAL**。但我认为这没问题，因为当我将它安装在我的 iPad 上时，它什么也没显示。它还显示带有 iPhone 框架的黑屏，然后什么也没有。该应用程序仍然存在于线程中。

困扰我的是我在以下方面做到了这一点`AppDelegate`：

我已经设置

```
self.mainViewController = [[SSDMainViewController alloc] initwithnibname:@"SSDMainViewController" bundle:nil]; 
```

然后我设置了导航控制器，然后将视图推送给它。

**我找到了更多信息**

在控制台中它说。

该应用程序应在应用程序启动结束时设置其根视图。

> 我的应用程序代表

ftipValue=0.25；

```
cardtype = @"American Express";
[cardtype retain];

[self CallFunctionForLogout];

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// Create an instance of YourViewController

//SSDMainViewController *yourViewController = [[SSDMainViewController alloc] init];
self.mainViewController = [[[SSDMainViewController alloc] initWithNibName:@"SSDMainViewController" bundle:nil] autorelease];

// Create an instance of a UINavigationController

// its stack contains only yourViewController

UINavigationController *navController = [[UINavigationController alloc]

                                                  initWithRootViewController:self.mainViewController];

navController.navigationBarHidden = YES;

// Place navigation controller's view in the window hierarchy

[[self window] setRootViewController:navController];

[self.window makeKeyAndVisible];

return YES; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:16:54.060

请使用两个 xib 文件，通用应用程序我们想要两个 xib (nib)

*   一个用于 iPhone - ViewController_iPhone
*   iPad 的第二个 - ViewController_iPad

将以下代码添加到您的 AppDelegate.m 文件。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        // Override point for customization after application launch.
       if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
       {
           self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
        } 
       else {
           self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
        }
        self.window.rootViewController = self.viewController;
        [self.window makeKeyAndVisible];
        return YES;
    } 
```

我已经这样做了，它对我来说很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T07:17:00.210

该错误意味着您没有正确设置应用程序。

您说您已将 SSDMainController 设置为主界面文件-这适用于 iPhone 和 iPad 吗？通用应用程序的摘要选项卡的该部分中有两组条目。

我希望为 iPad 指定一个不同的 xib 文件，因为将使用不同大小的视图和不同的布局。

您要么没有设置 iPad xib，所以应用程序无法设置带有根视图控制器的窗口，或者您没有设置有效的 iPad xib，所以它根本没有加载，结果相同。

如果您只想让应用程序在带有 2x 按钮的 mini-iPhone 窗口中运行，请将其保留为仅限 iPhone 的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T21:31:14.227

如果您收到“应用程序应在应用程序启动结束时设置其根视图”。有多种可能性。显然，这*就是*问题所在，因为你有一个黑屏，里面什么都没有……

看看这个 SO 问题：[应用程序窗口应该在应用程序启动警告结束时有一个根视图控制器](https://stackoverflow.com/questions/11515818/application-windows-are-expected-to-have-a-root-view-controller-at-the-end-of-ap) Rob Mayoff 很好地描述了应用程序初始化时应该发生的事情。

此外，在上面的帖子中链接到的是[这篇帖子](https://stackoverflow.com/questions/7520971/applications-are-expected-to-have-a-root-view-controller-at-the-end-of-applicati)，其中还有 35 个答案，其中包含可能发生的各种情况。

除了浏览这些链接之外，您还需要发布额外的代码和/或说明您的 nib 是如何连接的，以便任何人帮助您——正如可能削弱初始化序列的无数方法所证明的那样。

# dojo - Dijit Layout：如何内联显示 ContentPanes？

> ID：13049599
> 
> 赞同：0
> 
> 时间：2012-10-24T12:51:43.913
> 
> 标签：dojo, dijit.layout

在下面的 HTML 中，我想在顶部区域中并排显示两个 ContentPanes。在普通的 HTML 中，这可以使用 spans 或 display: inline 来完成。如何在 Dijit 中实现这一点？

```
<div>
<div data-dojo-attach-point="_containerNode" data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="gutters: false, design: 'headline'">
    <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'top'">
    </div>
    <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'top'">
    </div>
    <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'center'">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:04:56.577

将两个 div 包装在另一个 BorderContainer 中，例如：

```
<div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="gutters: false, design: 'headline'">
    <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="region: 'top', gutters: false">
        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'left'"> </div>
        <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'right'"> </div>
    </div>
    <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'center> </div>
</div> 
```

# c# - 远程服务器返回错误：(405) Method Allowed

> ID：13049601
> 
> 赞同：4
> 
> 时间：2012-10-24T12:52:05.700
> 
> 标签：c#, asp.net, c#-4.0, iis

我知道这是一个常见的问题，但是我在不同的情况下遇到了这个问题。我将在这里解释场景

我在一个解决方案中创建了两个不同的项目。包含我要用于保存的文件夹的图像，即上传在上述项目之外，但在相同的解决方案下。实际上我在这个文件夹的 IIS 服务器上直接创建了虚拟（我的文件服务器）

这是我的代码。

```
private void SaveData()
        {

            string filename = Path.GetFileName(ImageUpload.PostedFile.FileName);
            string servpath = Server.MapPath(ConfigurationManager.AppSettings["TempFolder"]);
            ImageUpload.SaveAs(servpath + filename);
            string remoteServerPath = ConfigurationManager.AppSettings["ProductImagesPath"] + filename;
            try
            {

                WebClient client = new WebClient();

                client.UploadFile(remoteServerPath, servpath + filename);
            }
            catch (Exception ex)
            {
                throw ex;

            }
            objProductsCustom.ProductName = txtProductName.Text;
            objProductsCustom.ProductDiscription = txtAddDiscription.Text;
            objProductsCustom.ProductPrice = txtPrice.Text;
            objProductsCustom.Quantity = txtQuantity.Text;
            objProductsCustom.ImagePath = "servpath" + filename;
            int productID = objProductsManager.CreatProduct(objProductsCustom);

        } 
```

在 try-catch 中，我发现“远程服务器返回错误：(405) Method Allowed。” 错误。我被困住了。

**编辑** 这是远程服务器路径：

```
http://localhost/ProductImages/untitled.bmp 
```

这是我上传到远程服务器路径的文件：

```
C:\Documents and Settings\saltaf\My Documents\Visual Studio 2010\Projects  \OnlineShoppingSystem\OnlineShoppingSiteAdminPanel\Temp\Images\untitled.bmp 
```

这是我的电话：

```
 webclient.UploadFile(http://localhost/ProductImages/untitled.bmp,C:\Documents and  Settings\saltaf\My Documents\Visual Studio 2010\Projects\OnlineShoppingSystem\OnlineShoppingSiteAdminPanel\Temp\Images\untitled.bmp) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:06:27.033

您是否尝试过检查要保存文件的文件夹的权限？它应该在那里包含“IIS_IUSRS”配置文件（它还应该对目标文件夹具有 WRITE 权限）。

希望这可以帮助。

# android - 如何阻止TextView在LinearLayout中拉伸

> ID：13049606
> 
> 赞同：2
> 
> 时间：2012-10-24T12:52:13.407
> 
> 标签：android, android-layout, android-linearlayout, textview

我有一个垂直的 LinearLayout 和 TextView。

文件：unitdetails.xml

```
<LinearLayout
  android:id="@+id/unit_details_person"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:layout_below="@id/unit_person_header"
  android:orientation="vertical" /> 
```

文件：person_phone.xml

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_weight="0"
    android:background="@android:color/darker_gray"
    android:singleLine="true"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:paddingLeft="15dp"
    android:text="Some text">
</TextView> 
```

我在我的活动代码中添加了 TextView

```
while (iterator.hasNext()) {

            Person person = iterator.next();

            TextView positionTV = (TextView) getLayoutInflater().inflate(R.layout.person_position, null);
            TextView personTV = (TextView) getLayoutInflater().inflate(R.layout.person_person, null);
            TextView phoneTV = (TextView) getLayoutInflater().inflate(R.layout.person_phone, null);
            TextView emailTV = (TextView) getLayoutInflater().inflate(R.layout.person_email, null);

            positionTV.setText(person.getPosition());
            personTV.setText(person.getPerson());
            phoneTV.setText(person.getPhone());
            emailTV.setText(person.getEmail());

            Linkify.addLinks(phoneTV, Linkify.PHONE_NUMBERS);
            Linkify.addLinks(emailTV, Linkify.EMAIL_ADDRESSES);

            personLinearLayout.addView(positionTV);
            personLinearLayout.addView(personTV);
            personLinearLayout.addView(phoneTV);
            personLinearLayout.addView(emailTV);
        } 
```

添加后，当我单击电话号码的右侧时，TextView 会扩展整个屏幕宽度和系统启动拨号器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:03:36.400

您是否尝试过像这样以编程方式设置参数：

```
myTextView.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

并删除

```
android:layout_weight="0" 
```

这里哪个没用？

# qt - Qt 使用 QIconvCodec 作为 Mac 上的默认编解码器，而 QString::fromLocal8Bit() 无法正常工作

> ID：13049607
> 
> 赞同：1
> 
> 时间：2012-10-24T12:52:17.417
> 
> 标签：qt, locale, codec, qt4.7, qstring

我的代码在 Windows 和 Mac 上运行。现在 QString::fromLocal8bit() 在 Win 上可以正常工作，但不能在 Mac 上处理非拉丁字符（即 CJK 字符）。我查看了源代码，发现在两个平台上 Qt 都会像这样初始化它的编解码器：

```
localeMapper = QTextCodec::codecForName("System"); 
```

在这个函数中执行，Qt在 Win 上使用**QWindowsLocalCodec** ，而在 Mac 上使用**QIconvCodec 。**我发现如果我将首选系统语言设置为“中文”，那么函数**getMacLocaleName()**和**getWinLocaleName()**分别返回“ **zh_CH.lproj** ”和“ **en_US_POSIX** ”（*qlocale.cpp*）。我想我应该为 iconv 库设置一些东西，这样它就会知道当前的语言环境，并且**QString::fromLocal8bit()**会正常工作。谁能告诉我如何正确处理所有事情以及 Qt 编解码器的机制是什么？

# python - 在 Python 中，%25s、%28s、%15s、%3s 等是什么意思？

> ID：13049610
> 
> 赞同：1
> 
> 时间：2012-10-24T12:52:43.453
> 
> 标签：python, string, syntax, string-formatting

我听说过字符串格式，但是这个片段中的这些 %25s、%28s、%15s、%3s 到底是什么：

```
return "Scan Name: %25s\nTarget(s): %25s\nPolicy: %28s\n\nRisk Summary\n%s\n%15s %3s\n%15s %3s\n%15s %3s\n\n%15s %3s" % ( report, prefs['TARGET'], policy,'-'*36,'High', severity['3'], 'Medium', severity['2'], 'Low', severity['1'], 'Open Ports', severity['0']) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:55:57.127

这是一个[格式规范](http://docs.python.org/library/stdtypes.html#string-formatting-operations)。

例如，在您的情况下，`%25s`会将适当的值格式化为最小字段宽度为 25 个字符的字符串。

# android - 为什么当我退出应用程序时，其他 URI 的意图也越来越接近？

> ID：13049619
> 
> 赞同：0
> 
> 时间：2012-10-24T12:52:58.773
> 
> 标签：android, android-intent

当我尝试打开 dilar 并关闭应用程序后，即使拨号器也关闭了一切。

```
 callBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            String uri = "tel:" + userDetails.getNumber().trim() ;
             Intent callIntent = new Intent(Intent.ACTION_DIAL,Uri.parse(uri));
             callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
             startActivity(callIntent);

            Intent intent = new Intent();
             intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
             intent.setClass(QuickActivity.this, com.example.attention.AlertMsg.class);
             intent.putExtra("isExit", true);
             startActivity(intent);

        finish();

        }
    }); 
```

我 AlertMsg 是我的主要活动，退出时我将以下代码放入 AlertMsg

```
 if(getIntent().getBooleanExtra("isExit", false))
    {
        if(mp!=null)
        {
            mp.stop();
        }
        finish();
    } 
```

任何人都知道如何独立打开拨号器（如果应用程序退出将不会关闭）并退出应用程序活动？

# visual-studio - 使用 ACML dgesv

> ID：13049621
> 
> 赞同：1
> 
> 时间：2012-10-24T12:53:05.230
> 
> 标签：visual-studio

我在使用 ACML 时遇到问题。我在 Visual Studio 2010 工作

这是我的代码，当我启动此代码时，我遇到了一条消息“内部错误：无效线程 id”，但是，使用“acml_imax2”函数没有问题。

请让我的代码有什么问题。

提前致谢。金。

===

```
#include "acml.h"
#include "iostream"
#include <stdio.h>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{

int N=4;
int NRHS=1;
double A[16];
int LDA=4;
int IPIV[4];
double B[4];
int LDB=4;
int info=0;

A[0]=1; A[1]=0; A[2]=0; A[3]=0;
A[4]=2; A[5]=1; A[6]=0; A[7]=0;
A[8]=0; A[9]=0; A[10]=1;A[11]=0;
A[12]=0;A[13]=0;A[14]=0;A[15]=1;

B[0]=1;
B[1]=2;
B[2]=3;
B[3]=4; 

for(int i=0; i<4;i++)
    IPIV[i]=1;

for(int i=0; i<4; i++)
{
    for(int j=0; j<4;j++)
    {
        cout<<A[j*4+i]<<" ";
    }
    cout<<endl;
}

dgesv(N, NRHS, A, LDA, IPIV, B, LDB, &info);

cout<<x;
for(int i=0;i<4;i++)
{
    cout<<B[i]<<" ";
}

cout<<"info: "<<info;

return 0;
}
//  int a=10;
//  int b=8;
//  int x=0;
//  x = acml_imax2( a,  b); 
```

# progress-4gl - 在进度应用程序中使用直接 sql 语句

> ID：13049622
> 
> 赞同：0
> 
> 时间：2012-10-24T12:53:08.047
> 
> 标签：progress-4gl, openedge

在进度应用程序中运行直接 sql 语句的语法是什么？

```
 SELECT count(distinct myField2) FROM myTable WHERE myField = myVariable); 
```

我已经想出了如何使用 for each 来做到这一点，但我仍然想运行这个命令。对每个使用一个：

```
def var iTmpCount as int no-undo.
for each myTable no-lock where myField = myVariable break by myField2:
  if first-of (myTable.myField2) then 
    iTmpCount = iTmpCount + 1.
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:26:32.973

4GL 有一个古老且已弃用的 SQL-89 实现。

你可以成功地做一些简单的事情。它有时对临时查询很有帮助。

文档是有限的，因为它是一个弃用的特性，它永远不会被改进或增强。

4GL 不是 SQL 工具，不应使用嵌入式 SQL 支持。不要试图将 SQL 思维应用到 4GL，你只会后悔。

通过 ODBC 和 JDBC 驱动程序支持 SQL-92。但那是在 4GL 之外。

# r - table() 行全为零

> ID：13049624
> 
> 赞同：3
> 
> 时间：2012-10-24T12:53:23.050
> 
> 标签：r

这看起来很简单，但我在任何地方都找不到简单的答案。

如果我们有以下数据并使用`table()`：

```
df <- data.frame(x=c("a","b","a"),y=c("b","a","c"))

table(df)
   y
x   a b c
  a 0 1 1
  b 1 0 0 
```

什么是最简单的方法：

```
 y
x   a b c
  a 0 1 1
  b 1 0 0
  C 0 0 0 
```

之后无需`c`手动添加行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T12:57:31.023

这是一种方法。本质上，您需要确保`x`两者`y`具有相同的级别。我通过计算`union()`它们各自的`levels()`，然后`transform()`是原始的`x`，并且`y`两者都有这组共同的级别来做到这一点：

```
> df <- data.frame(x=c("a","b","a"),y=c("b","a","c"))
> lev <- with(df, sort(union(levels(x), levels(y))))
> lev
[1] "a" "b" "c"
> df <- transform(df, x = factor(x, levels = lev), y = factor(y, levels = lev))
> table(df)
   y
x   a b c
  a 0 1 1
  b 1 0 0
  c 0 0 0 
```

您的示例有一个简单的解决方案 - 只需给出`x`与 相同`y`的级别，因为级别`y`是完整的。在更一般的情况下，既`x`没有也没有`y`完整的关卡集，我展示的代码将为您获得完整的集，因此在这两种情况下都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:09:37.550

一个更简单的方法是：

```
levels(df$x) <- levels(df$y) <- union(levels(df$x), levels(df$y)) 
```

一般或

```
levels(df$x) <- levels(df$y) 
```

针对你的具体情况。

然后调用表（df）。基本上，您需要为您的表指定*可能的“级别”。*

# objective-c - 不稳定的 NSTimer 导致计数波动

> ID：13049626
> 
> 赞同：0
> 
> 时间：2012-10-24T12:53:35.207
> 
> 标签：objective-c, nstimer

我使用 NSTimer 从某个时刻开始计数。

```
int totalSeconds;
int totalMinutes;
int totalHours; 
```

如果 totalSeconds 为 60，totalMinuts 变为 +1。它非常简单，应该可以工作。例如，我将 NSTimer 与我的 mac 的时钟一起启动。（在模拟器上运行）。当我查看我的 mac 的时钟和计时器并比较前 10-20 秒的时间时，它的计数完全同步。之后它会波动或前进 5 秒或更长时间。所以我输出了我的计时器并发现了这个：

*   2012-10-24 14:45:44.002 xxApp 驱动时间：0:0:44
*   2012-10-24 14:45:45.002 xxApp 驱动时间：0:0:45
*   2012-10-24 14:45:45.813 xxApp 驱动时间：0:0:46
*   2012-10-24 14:45:46.002 xxApp 驱动时间：0:0:47

如您所见，毫秒计时为 002。但在第三行是 813。这非常随机地发生并导致波动。

有没有更稳定的计数方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:39:26.300

来自[NSTimer 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

> 定时器不是实时机制；它仅在已添加计时器的运行循环模式之一正在运行并且能够检查计时器的触发时间是否已过时触发。由于典型的运行循环管理的各种输入源，计时器的时间间隔的有效分辨率被限制在 50-100 毫秒的数量级。

如果您的目标是计算自程序开始运行以来经过的总时间，这很容易。一旦你想开始跟踪时间，就存储`-[NSDate date]`到一个变量中。每当您想计算已经过去了多少时间时，`-[NSDate date`再次调用并执行以下操作，假设`originalDate`是您存储第一次调用结果的属性`-[NSDate date]`：

```
NSDate *presentDate = [NSDate date];
NSTimeInterval runningTime = [presentDate timeIntervalSinceDate:originalDate]; 
```

`runningTime`将是自您开始跟踪时间以来经过的总秒数。为了获得小时数、分钟数、秒数等，`NSDateComponents`应该使用一个对象。

这种机制将允许您使用计时器“大约每秒一次”更新您的总运行时间，而不会失去准确性。

# android - 使用 android:configChanges="orientation" 没有预期的效果

> ID：13049631
> 
> 赞同：-1
> 
> 时间：2012-10-24T12:53:51.243
> 
> 标签：android, reload, screen-orientation

当我使用`android:configChanges="orientation"`. 我想在更改 acreen 方向后防止重新加载活动（xml 参数以上适用于其他应用程序），但这次它失败了。

问题是，我希望我的活动（`SherlockActivity`）在开始时保持肖像，但在 OnClickListener 事件之后我需要启用它：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

是否应该运行任何其他方法来防止重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:00:30.957

该`android:configChanges`参数应该可以工作（它对我来说完美无缺）。只是盲目猜测 - 如果您的目标是 API 级别 13 或更高，您还必须包括`screenSize`：

> 注意：从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明）进行开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外，还必须包含“screenSize”值。也就是说，您必须声明 android:configChanges="orientation|screenSize"。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

（摘自[这里](http://developer.android.com/guide/topics/resources/runtime-changes.html)）

# ruby-on-rails-3 - rails carrierwave / s3 签名不匹配。错误的私钥

> ID：13049633
> 
> 赞同：0
> 
> 时间：2012-10-24T12:53:53.300
> 
> 标签：ruby-on-rails-3, amazon-s3, carrierwave

我正在尝试让carrierwave 与S3 一起工作，但我收到了一个签名不匹配错误。奇怪的是，carrierwave 似乎没有发送正确的密钥。在错误中，帖子给出为：

```
"Authorization"=>"AWS AKIAIOLWQKSJFH6E3I5Q:vKgyAw2z4c8zzqGWoxLUbw7I5oI=" 
```

我认为应该是我的公钥：私钥。问题是 vKgyAw2z4c8zzqGWoxLUbw7I5oI= 不是我存储在fog.rb 中的私钥。那正确吗？

任何帮助表示赞赏。

请求/响应：

```
 request => {:chunk_size=>1048576, :connect_timeout=>60, :headers=>{"Content-Length"=>1557, "Content-Type"=>"image/
gif", "x-amz-acl"=>"public-read", "Date"=>"Wed, 24 Oct 2012 12:45:17 +0000", "Authorization"=>"AWS AKIAIOLWQKSJFH6E3
I5Q:vKgyAw2z4c8zzqGWoxLUbw7I5oI=", "Host"=>"s3.amazonaws.com:443"}, :instrumentor_name=>"excon", :mock=>false, :nonb
lock=>true, :read_timeout=>60, :retry_limit=>4, :ssl_ca_file=>"/home/tim/.rvm/gems/ruby-1.9.3-p194/gems/excon-0.16.5
/data/cacert.pem", :ssl_verify_peer=>true, :write_timeout=>60, :host=>"myeasybnb.s3.amazonaws.com", :host_port=>"s3.
amazonaws.com:443", :path=>"/images%2Fb1bb6639-dc08-4981-9a9b-7175093ac970.gif", :port=>"443", :query=>nil, :scheme=
>"https", :body=>#<File:/home/tim/Dropbox/myeasybnb/tmp/uploads/20121024-0845-20225-1170/240x240.gif>, :expects=>200
, :idempotent=>true, :method=>"PUT"}
  response => #<Excon::Response:0xa7a1098 @body="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Error><Code>SignatureD
oesNotMatch</Code><Message>The request signature we calculated does not match the signature you provided. Check your
 key and signing method.</Message> 
```

雾.rb：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',       # required
    :aws_access_key_id      => 'AKIAIOLWQKSJFH6E3I5Q',       # required
    :aws_secret_access_key  => '[my secret key]'      # required

  }
  config.fog_directory  = 'myeasybnb'                             # required
  config.fog_public     = true                                   # optional, defaults to true

end 
```

上传者.rb：

```
# encoding: utf-8

class PhotoUploader < CarrierWave::Uploader::Base

  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
   include Sprockets::Helpers::RailsHelper
   include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  # storage :file
   storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "images"
  end

  # Provide a default URL as a default if there hasn't been a file uploaded:
class MyUploader < CarrierWave::Uploader::Base
  def default_url 
     asset_path("seeds/" + [version_name, "default.png"].compact.join('_'))
  end
end

  # Process files as they are uploaded:
  # process :scale => [200, 300]
  #

  # Create different versions of your uploaded files:

  process :convert => 'jpg'
  version :sidecarousel, :if => :is_side_carousel? do
      process :resize_to_fit => [2000,1000]
  end
    version :thumbnail, :if => :is_thumbnail? do
       process :resize_to_fill => [240,240]        
    end

    version :linetext, :if => :is_line? do
         process :resize_to_fill => [400,200]
    end
    version :carousel, :if => :is_carousel? do
      process :resize_to_fit => [2200, 1000]
    end  

    version :phone do
      process :resize_to_fit => [900,900]
    end
  # def scale(width, height)
  #   # do something
  # end

  def is_side_carousel? photo
    model.location == 1
  end

  def is_thumbnail? photo
  model.location == 2
  end
  def is_line? photo
    model.location == 3
  end
  def is_carousel? photo
    model.location == 4
  end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  def extension_white_list
    %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
 def filename
    file.nil? ?  @filename = nil : @filename = "#{secure_token}.#{file.extension}" 

 end 

    def secure_token
    var = :"@#{mounted_as}_secure_token"
    model.instance_variable_get(var) or model.instance_variable_set(var, SecureRandom.uuid)
  end
  def cache_dir
"#{Rails.root}/tmp/uploads"
end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:40:16.510

我设法解决了这个问题。我不确定我做了什么，但有几个问题。(1) 我认为我收到了身份验证错误，因为我在上传器中指定了一个文件夹。现在，我将上传器中的目录设置为“”，并通过雾配置指定文件夹。

(2) 我得到的另一个错误是时间不匹配。我在虚拟机中运行 mint 进行开发，时间与现实不同。亚马逊对此抛出了一个错误。一旦我设置了正确的时间，它就消失了。

# html - 将 Apple 图标添加到网站

> ID：13049636
> 
> 赞同：5
> 
> 时间：2012-10-24T12:54:01.847
> 
> 标签：html, favicon

我已经使用 Woorank 测试了我的网站，并显示了有关缺少 Apple 图标的警告。

我已经搜索过，但我不确定如何包含这个图标，我找到了这个代码

```
<link rel="apple-touch-icon-precomposed" href="apple-touch-iphone.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-ipad.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-iphone4.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-ipad-retina.png" /> 
```

我必须以与标准图标相同的方式将这些行包含在头部吗？（我的网站是 HTML5 的）

这些行*“apple-touch-iphone.png”中第一张图片的分辨率是多少*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:56:45.573

最小的图标应该是 57×57 像素。

请注意，“-precomposed”声明链接的图标文件已经是闪亮的并且是 3D 的。如果省略“-precomposed”，iOS 会为图像添加 3D 光彩效果。

是的，您当然需要将`link`-tags 插入到`head`.

完整图标集的示例：

```
<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="icon.57.png"><!-- iPhone -->
<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="icon.72.png"><!-- iPad -->
<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="icon.114.png"><!-- iPhone4 -->
<link rel="icon" type="image/png" href="icon.114.png"><!-- Opera Speed Dial, at least 144×114 px --> 
```

关于 Apple iOS 图标的文档：http: [//developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/ConfiguringWebApplications/ConfiguringWebApplications.html](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/ConfiguringWebApplications/ConfiguringWebApplications.html)

关于 Opera 快速拨号图标的文档：[http ://dev.opera.com/articles/view/opera-speed-dial-enhancements/](http://dev.opera.com/articles/view/opera-speed-dial-enhancements/)

# ios - iOS 在加载时设置/更改背景图像

> ID：13049637
> 
> 赞同：0
> 
> 时间：2012-10-24T12:54:09.607
> 
> 标签：ios, cocoa-touch, uiimage

我必须对 iPhone 应用程序进行一些更改...

如何在加载时更改 UIViewController 的背景 (viewDidLoad) .. 我必须从 URL 显示 .png .. 这可能吗？

我试过了：

```
NSURL *url = [NSURL URLWithString:@"http://url_to_my_project/xmas-bg-test.png"];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];

self.view.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

这是来自我的：“-（void）viewDidLoad”方法..当我启动我的应用程序时没有发生任何事情..以太没有错误。

我也尝试过我的 .. viewDidAppear

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:58:18.883

这不是向视图控制器添加背景的方式。将一个新的[`UIImageView`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImageView_Class/Reference/Reference.html)ivar 添加到您的视图控制器子类并使用它。

```
- (void)viewDidLoad {
    ...
   imageView.image = [UIImage imageWithData:data];
} 
```

您必须确保正确创建此图像视图。通过在 Interface Builder 中添加图像视图并将其链接到您的`imageView`ivar，或者通过在`awakeFromNib`or中自己创建它`loadView`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:58:28.197

您必须创建`UIImageView`为背景图像。删除`self.view.backgroundColor = ...`行并添加：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
imageView.frame = self.view.frame;
[self.view addSubview:imageView];
[self.view sendSubviewToBack:imageView]; 
```

在`viewDidLoad:`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:07:06.167

其他答案对于说您应该使用图像视图来显示图像是正确的。但是，您应该考虑对图像提出请求。这样，如果请求失败，您可以通过显示不同的图像或您想要的任何内容来处理它。这是一个**粗略**的例子。

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://url_to_my_project/xmas-bg-test.png"] cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:5.0];
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    if (response && !error) {
        UIImage *image = [UIImage imageWithData:data];
        UIImageView *imageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
        [imageView setImage:image];
        [self.view addSubview:imageView];
    }
}]; 
```

# python - 数组调整大小中的numpy数组

> ID：13049644
> 
> 赞同：4
> 
> 时间：2012-10-24T12:54:29.930
> 
> 标签：python, numpy

假设我做了一个奇怪的小数组：

```
>>> a = np.array([[[1,2,3],4],[[4,5,6],5]])
>>> a
array([[[1, 2, 3], 4],
       [[4, 5, 6], 5]], dtype=object) 
```

然后将第一列作为切片：

```
>>> b = a[:,0]
>>> b
array([[1, 2, 3], [4, 5, 6]], dtype=object)
>>> b.shape
(2,) 
```

假设我现在想重塑 b 使其形状为 (2,3)：

```
>>> b.reshape((-1,3))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: total size of new array must be unchanged 
```

我假设 numpy 将 b 中的每个数组视为一个对象，而不是一个数组本身。问题是，有没有一种很好的方法来进行所需的调整大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:06:46.883

在您的特定示例中，您可以使用 numpy.vstack ：

```
import numpy as np

a = np.array([[[1,2,3],4],[[4,5,6],5]])
b = a[:,0]

c = np.vstack(b)
print c.shape # (2,3) 
```

**编辑：**由于您的数组`a`不是真正的矩阵，而是数组的集合（如 wim 所指），您还可以执行以下操作：

```
 b = np.array([ line for line in a[:,0]])
   print b.shape #(2,3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:05:07.417

您不能`b`就地更改形状，但您可以使用 创建所需形状的副本`np.vstack(b)`。我想你可能已经知道了这么多。

请注意，您没有在 的第一列中创建数组`a`，如果您检查，`type(a[0,0])`您会发现那里实际上有一个列表。即您的切片`a[:,0]`实际上是两个列表对象的列向量，它本身不是（也从来不是）一个数组。

# ruby - 安装 RVM 后找不到 Ruby 1.9.2

> ID：13049646
> 
> 赞同：2
> 
> 时间：2012-10-24T12:54:33.643
> 
> 标签：ruby, ubuntu, rvm, octopress

我在 Linux Ubuntu 12.04 上，我首先安装了 Ruby 1.9.2。

在我尝试安装 rvm 以使用 Octopress 后，`ruby --version`在 bash 中会导致`ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]`

如何在 ruby​​ 1.9.2 中使用 RVM？

我真的不明白 RVM 是什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:20:17.947

您首先安装的`1.9.2 version`无法从`rvm`.

在使用 时`rvm`，只提供通过 rvm 安装的 rubies 列表。以前安装的 ruby​​ 版本 - 虽然仍然存在于文件系统中 - 不包括在内。

到目前为止，您已经完成了这些步骤，您已经`1.9.2 version`在一个位置安装了一个，并将一个`1.8.7 version`作为`rvm`.

`1.9,2 version`通过运行`rvm install 1.9.2`命令安装。之后，当您运行该`rvm list`命令时，您应该会看到类似于以下内容的输出：

```
$ rvm list

rvm rubies

   ruby-1.8.7-p358 [ i686 ]
=* ruby-1.9.2-p320 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

`rvm`您可以使用`rvm use 1.8.7`/`rvm use 1.9.2`命令在不同版本的 ruby​​ 之间切换。

这是一篇简短的博文，对 rvm 进行了很好的介绍：[RVM 入门](http://sirupsen.com/get-started-right-with-rvm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:03:11.863

也许您还没有切换到 ruby​​ 版本：

```
rvm use 1.9.2 (assuming you did rvm install 1.9.2) 
```

对于更一般的解释，我[在这里给出了一个答案，这可能会有所帮助](https://stackoverflow.com/questions/12577123/upgrading-ruby-1-8-6-to-ruby-1-9-2/12580249#12580249)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:27:05.183

RVM 是一个版本管理器，它使您能够决定要在当前的 shell 会话中使用多个已安装的 Ruby 版本中的哪一个。RVM 通过提供一个名为的 shell 函数来做到这一点，该函数`rvm`可用于在当前会话中的版本之间切换。这会更改环境变量，尤其是 GEM_HOME 和 PATH，以匹配当前选择的 Ruby 安装。

每个已安装的 Ruby 版本都可以通过特定的标识符字符串进行选择。如果您在安装 RVM 之前已经安装了系统范围的 Ruby，则该字符串应该被引用`system`。在您的情况下，新安装的版本应该被称为`1.9.2`.

为了使 RVM 按预期工作，有必要将`rvm`shell 函数加载到 shell 中。如何做到这一点在[RVM 安装文档](https://rvm.io/rvm/install/)的第 2 节 - “将 RVM 作为函数加载到您的 shell 会话中”中进行了描述。

`type rvm | head -n1`当命令响应时，您可以查看 shell 函数是否正确加载：

```
rvm is a shell function 
```

如果没有正确加载，它会告诉你这样的事情：

```
rvm is /home/someone/.rvm/bin/rvm 
```

`rvm 1.9.2`如果你终于让它工作了，你可以使用或之类的命令切换你的活动 Ruby 版本`rvm system`。您可以通过命令获取 RVM 识别的所有 Ruby 版本及其标识符字符串的列表`rvm list`。

您还可以通过发出以下命令从一开始就指定应在所有新的 shell 会话中启用哪个 Ruby 版本：

```
rvm --default 1.9.2 
```

# fortran - MPI_Recv 覆盖它不应访问的部分内存

> ID：13049648
> 
> 赞同：2
> 
> 时间：2012-10-24T12:54:49.683
> 
> 标签：fortran, mpi

在下面的代码中`xysize`，如果我不将其声明为参数（我通常不能这样做），则它的值会发生变化。它只发生在 gfortran 4.7.2 和 OpenMPI 1.6 中的优化 -O2 和更多。这怎么可能？我找不到确切的接口，我从中导入`mpi.mod`，但 C 原型清楚地表明它`count`是按值传递的，因此它不能改变。

```
 write(*,*) im,"receiving from",image_index([iim,jim,kim+1]),"size",&
      size(D%A(D%starti:D%endi,D%startj:D%endj,D%endk)),xysize

    call MPI_RECV(D%A(D%starti:D%endi,D%startj:D%endj,D%endk+1),xysize , MPI_REAL, image_index([iim,jim,kim+1])-1,&
           5000, comm, status, ierr)

    write(*,*) im,"received size",&
      size(D%A(D%starti:D%endi,D%startj:D%endj,D%endk)),xysize 
```

输出：

```
1 receiving from           2 size        4096        4096
1 received size        4096        5000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:37:10.937

为了将来的访问者，我想我会回答这个问题，即使上面的评论都回答了。

据我所知，如果您的程序运行正常，则无法在调用`MPI_Recv`.

您的参数`status`太小，它应该是一个数组`status(MPI_STATUS_SIZE)`，并且您遇到了缓冲区溢出——这通常会导致分段错误，但有时（取决于编译器如何将变量打包到内存中），它可能会导致像这样的有趣行为。

# java - Java：为什么这个函数从来没有被调用过？

> ID：13049652
> 
> 赞同：0
> 
> 时间：2012-10-24T12:54:56.270
> 
> 标签：java, class, inheritance, compilation

```
package main;

class F {
    void f() {
        System.out.print("F.f() ");
        this.g();
    }

    void g() {
        System.out.print("F.g() ");
    }
}

class Fbis extends F {
    void f() {
        System.out.print("Fbis.f() ");
        this.g();
    }

    void g() {
        System.out.print("Fbis.g() ");
        super.f();
    }
}

public class Main {
    public static void main(String[] args) {
        F f = new Fbis();
        ((F) f).f();
    }
} 
```

嗨，我想了解为什么永远不会调用 F 类中的 g() 函数。此代码编译并运行，但会导致显示如下的无限循环：

```
Fbis.f() Fbis.g() F.f() Fbis.g() F.f() Fbis.g() F.f() Fbis.g() F.f() Fbis.g() F.f() Fbis.g() F.f() Fbis.g() F.f() Fbis.g() F.f() ... 
```

所以会发生什么，就是`Fbis.f`调用，调用`Fbis.g`，调用，`F.f`而不是调用`F.g`，`F.f`调用`Fbis.g`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T12:57:52.033

基本上，这就是继承的工作方式。该类`Fbis`覆盖该`g()`方法，因此对于任何`Fbis`调用实例都`g()`将运行该类中的代码`Fbis`，即使它是从`F`类本身内部调用的。

这通常是可取的行为。例如，想象一个`delete()`方法。在父类中，当您的应用程序删除对象时，这会进行一些清理。在子类中，它会针对这个孩子进行额外的清理。您会希望在每次调用时都进行额外的清理`delete()`，即使这是在父类中进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:59:08.180

> Ff 但不是调用 Fg，而是 Ff 调用 Fbis.g。

你的代码说

```
void f(){System.out.print("F.f() ");this.g();} 
```

这意味着`F.f()`应该调用`g();`这个类实现的类。

如果你想让 Fbis.g 调用 Fg 你会写

```
void g(){System.out.print("Fbis.g() "); super.g();} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:59:20.627

当你重写一个方法时，总是使用被重写的版本，不管你从哪里调用它。

当你`this.g()`在基类中做，并且当前对象属于一个子类时，你`g()`在子类中调用。

当您在基类中有任何从基类调用的方法，并且您不想让它们被派生类替换时，您应该将该方法设为私有且最终的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:00:16.150

你的`Fbis`类覆盖了方法`g()`。如果您创建一个新对象，`Fbis`则唯一命名的方法`g`是在`Fbis`. 即使您从继承的方法中调用它，它仍然是唯一的方法。否则，如果您创建一个指向该对象的对象，那么如果它在超类中使用也是如此`Fbis`。`this`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T13:01:08.617

### 方法 Fg() 不再存在于 Fbis 中！

因为您正在“覆盖” Fbis 中的 g() 方法。了解仅使用“super.g”将保留覆盖。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T13:24:05.527

```
class F {
    void f() {
        System.out.print("F.f() ");
        this.g(); //<----- This line calls Fbis.g() not F.g() 
                  // because this is the instance of Fbis
    } 
```

# javascript - 从“主页”视图触发的 javascript onsave 事件

> ID：13049655
> 
> 赞同：0
> 
> 时间：2012-10-24T12:55:01.613
> 
> 标签：javascript, dynamics-crm-2011

我编写了一些 javascript 并将其附加到实体的 onSave 事件上，以便在记录被停用时执行一些操作。这在表单上工作正常，但如果用户决定从实体视图停用记录，则不会触发此代码。有没有办法可以将此事件附加到从这里停用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:22:07.090

如果您想要执行一些不会在实际表单本身或功能区上的按钮上发生的操作，则必须创建插件。看到[这个](https://stackoverflow.com/questions/11939071/updating-field-in-crm-2011-through-javascript-from-ribbon-button-on-homegrid-vie)类似的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:33:05.680

您可以使用功能区编辑器编辑主页网格中的“停用”功能区按钮，以在 web 资源中包含 javascript 函数。因此，当它被单击时，该按钮将触发您的 javascript 代码。

您必须进行的唯一调整是接受功能区按钮提供的输入参数。

您只需要制作一个 RibbonButton 并设置一个控件，以便它返回活动网格的所有 id。在链接中，您将拥有“SelectedControlSelectedItemIds”，但您有更多可用选项。

如果您更改解决方案的 XML。您的函数将需要一个参数。

```
function getSelectedItems(arrayOfIDS){
     for(var i = 0; i < arrayofIDS.length;i++)
     {
         //Your implementation here
     }
} 
```

或者，您可以选择像 Daryl 建议的那样编写插件

编辑：[功能区工作台](http://www.develop1.net/public/page/Ribbon-Workbench-for-Dynamics-CRM-2011.aspx)：使用此工具，您可以使用无法使用的可视功能区按钮自定义系统按钮。

# cycle - 想用一个寻呼机为多个周期的第一张幻灯片制作动画

> ID：13049656
> 
> 赞同：2
> 
> 时间：2012-10-24T12:55:04.737
> 
> 标签：cycle, jquery-cycle

我正在使用[两个带有单个寻呼机的循环幻灯片，](http://www.malsup.com/jquery/cycle/pager-double.html)每个幻灯片都有不同的效果（使用元数据插件）。

我还想为每个幻灯片的第一张幻灯片制作动画，如此[处](http://jquery.malsup.com/cycle/fade-in-first.html)所述，但我在语法上遇到了问题。

这是我目前的 js

```
$(document).ready(function() {
    $('.slideshow').each(function(index) {
        $(this).cycle({
            pager:  '#pager',
            pagerAnchorBuilder: function(i) {
                if (index == 0)
                    // for first slideshow, return a new anchro
                    return '<a href="#">'+(i+1)+'</a>';
                // for 2nd slideshow, select the anchor created previously
                return '#pager a:eq('+i+')';
            }
        });
    });
}); 
```

效果在 .slideshow div 上编码（使用元数据插件）

```
<div class="slideshow { fx: 'scrollRight', timeout: 0, cleartypeNoBg: true, speed: 750, easing: 'easeInOutBack' }">
<div class="slideshow { fx: 'scrollLeft', timeout: 0, cleartypeNoBg: true, speed: 750, easing: 'easeInOutBack' }"> 
```

# c# - 将带逗号的字符串数字转换为特定于区域性的双精度数字

> ID：13049659
> 
> 赞同：2
> 
> 时间：2012-10-24T12:55:15.813
> 
> 标签：c#

```
NumberFormatInfo numberInfo = CultureInfo.CurrentCulture.NumberFormat;
double result = Convert.ToDouble("2,75", numberInfo); 

result = 2.75 
```

我当前的 UI/文化是“de-DE”。

为什么我没有得到 2,75 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T12:58:07.387

因为你得到的不是`string`结果，而是`double`. 以后如何*显示*该双精度不受上面代码的影响。

如果您想在屏幕上看到“2,75”，您需要将 double 格式化为字符串，并添加 numberInfo。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T12:57:28.883

试试这个得到 2,75：-

```
 string.Format(System.Globalization.CultureInfo.GetCultureInfo("de-DE"), "{0:0.0}", 2.75); 
```

或者你也可以试试这个： -

```
 NumberFormatInfo n= new NumberFormatInfo();
  n.NumberDecimalSeparator = ",";
  n.NumberGroupSeparator = ".";

  double d= 2.75;
  string s= d.ToString(n); //2,75 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:00:28.490

你得到`2.75`. 只是显示数字的方式不同。

该`double`值不包含有关格式的信息。既不是`2.75`也不是`2,75`，它只是一个数值。

如果您使用使用逗号作为小数分隔符的区域性显示数字，您将得到您期望的结果，例如：

```
Console.WriteLine(result.ToString(CultureInfo.GetCultureInfo(1053))); 
```

输出：

```
2,75 
```

# firefox - Windows XP 上带有 CSS 3D 变换的锯齿状图像

> ID：13049664
> 
> 赞同：1
> 
> 时间：2012-10-24T12:55:32.033
> 
> 标签：firefox, css, css-transforms

我对图像上的 3D 变换有疑问。例如：

```
transform: rotateY(60deg); 
```

除了 Windows XP 上的 Firefox，它在任何地方都可以正常工作。图像在那里显示为锯齿状（没有抗锯齿？）。在 Windows 7 和 Mac OS X 上使用 Safari、Chrome 和 Firefox 看起来不错。还测试了不同版本的 Firefox，没有其他结果。

我找不到相同问题的任何描述或解决方案。有些人写道，提供（透明）边框/轮廓有助于改善边缘，但对图像内部没有帮助。

我在这里做了一个小提琴：http: [//jsfiddle.net/8Tx6X/4/](http://jsfiddle.net/8Tx6X/4/)

与 Windows XP 上的 Firefox 16.0.1 相比，它在 Windows 7（和其他浏览器）上的 Firefox 16.0.1 中的外观如下：http: [//i.stack.imgur.com/NePyd.png](http://i.stack.imgur.com/NePyd.png)

有人经历过同样的行为吗？

可能是硬件/软件渲染的问题吗？（我在 XP 上使用虚拟机和旧笔记本电脑进行了测试）

我很想找到一个黑客或至少一种方法来检测它是否正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:18:46.397

更多的调查让我更进一步。正如我首先想到的那样，这不是 Windows XP 的问题。如果 Firefox 不使用硬件加速，则会出现此问题。当我关闭它时（在选项 -> 高级 -> 常规 -> 可用时使用硬件加速），它在 Windows 7 上看起来也参差不齐。我还在另一台装有 WinXP 的计算机上进行了测试，图像看起来不错。当您输入“about:support”并查找“WebGL Renderer”和“GPU Accelerated Windows”时，您可以查看 Firefox 是否正在使用硬件加速。

所以我猜 Firefox 的软件渲染器现在不能做得更好。

我现在要做的是检测 WebGL 是否被激活，因此硬件加速是否可用。这是我使用的代码（来自旧版本的 Modernizr）：

```
try {
    var canvas = document.createElement('canvas'),ret;
    ret = !!(window.WebGLRenderingContext && (canvas.getContext('experimental-webgl') || canvas.getContext('webgl')));
        canvas = undefined;
} catch (e){
    ret = false;
}
return ret; 
```

如果测试通过，我会提供 CSS-3D-Transforms。否则，用户会看到闪退。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:40:53.383

我在 Windows 7 上使用 Firefox 时遇到了同样的问题。正如你所说，边缘可以修复，但内容（我没有使用图像，但绝对定位的 HTML 元素）看起来很糟糕，但在 Chrome 和 Safari 中它们很好.

# wpf - WPF 数据网格选择问题

> ID：13049666
> 
> 赞同：4
> 
> 时间：2012-10-24T12:55:39.590
> 
> 标签：wpf, list, datagrid, selection

在我的 WPF 应用程序中，我有一个数据网格和一个文本框。在文本框的 textChanged 事件中，我输入了这个：

```
myDatagrid.ItemsSource = 
myListOfObjects.Where(item => item.Name.Contains(MyTextBox.Text)); //Filter

if (myDatagrid.Items.Count > 0)  // If no itens, then do nothing
{
     myDatagrid.SelectedIndex = 0;  // If has at least one item, select the first
}

myDatagrid.Items.Refresh(); 
```

请注意，当文本更改时，我在 DataGrid 的第一行强制选择。

但不幸**的是，该行的颜色不会变为 blue**，因此很难看到选择。

我真的需要这个，因为在文本框的 PreviewKeyDown 事件中我有这个：

```
 private void myTextBox_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Up)
        {
            if (!(myDataGrid.SelectedIndex <= 0))
            {
                myDataGrid.SelectedIndex--;  // Go one position Up
            }
        }

        if (e.Key == Key.Down)
        {
            if (!(myDataGrid.SelectedIndex == myDataGrid.Items.Count - 1))
            {
                myDataGrid.SelectedIndex++;  // Go one position Down
            }
        }
    } 
```

因此，当文本框获得焦点并且用户按下向上或向下键时，选择似乎不会改变。

关于如何使数据网格上的选定项目将其颜色更改为蓝色的任何想法？

另一件事：在我的虚拟机中，它可以工作！使用相同的代码！怎么可能？

我认为那是航空玻璃，但我将主题更改为 Windows 7 Basic（在虚拟机中相同）并且仍然无法正常工作。

谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:25:52.037

您可以尝试使用 SelectedItem 吗？您始终可以创建一个新属性并绑定到此属性，然后直接设置此项目，而不是使用选定的索引。希望这会触发 DataGrid 控件中的任何其他逻辑:)

```
//Declare property outside of method
public ObjectType SelectedItem { get; set; }

//Set datacontext on load
DataContext = this;

myDatagrid.ItemsSource = myListOfObjects.Where(item => item.Name.Contains(MyTextBox.Text)); //Filter

if (myDatagrid.Items.Count > 0)  // If no itens, then do nothing
{
     SelectedItem = myDatagrid.ItemSource[0];  // If has at least one item, select the first
}

myDatagrid.Items.Refresh(); 
```

也不要忘记设置绑定！

```
SelectedItem="{Binding SelectedItem}" 
```

希望有帮助！

# ios - 两个视图控制器之间的 Segue

> ID：13049668
> 
> 赞同：13
> 
> 时间：2012-10-24T12:55:56.040
> 
> 标签：ios, ios6, uistoryboard

![在此处输入图像描述](../Images/3a3b86b796727d5ca50e06af6ecb3c4b.png)

在我的故事板上（如上所示），我有一个 ViewController，它包含一个带有注释的 MKMapView。这些注释包含一个显示图标，当点击它时，应该将用户导航到另一个 ViewController。为此，我在视图控制器之间创建了一个 push segue。然后我给它一个标识符“showDetail”并实现了以下代码。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    [self performSegueWithIdentifier:@"showDetail" sender:self];
} 
```

但是我收到以下错误。

```
Could not find a navigation controller for segue 'showDetail'. Push segues can only be used when the source controller is managed by an instance of UINavigationController.' 
```

我哪里错了？我尝试将我的源 UIViewController 更改为 UINavigationController，但视图随后仅显示为黑屏。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-30T03:20:32.383

最简单的方法是选择您想要成为导航层次结构根的视图控制器并选择

```
Editor > Embed In > Navigation Controller 
```

这将创建新的导航控制器并为您连接所有内容。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-24T13:04:57.457

您实际上必须将 UIViewController 设置为 UINavigationController 的根控制器（或从带有导航控制器的视图控制器推送）。要做到这一点

*   将一个新的导航控制器拖到您的故事板中 - 默认情况下，它将附加到一个 tableview 控制器
*   删除 tableview 控制器右键单击导航控制器，并将“根视图控制器”属性连接到现有视图控制器
*   将入口点箭头从视图控制器移动到根视图控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-06T11:37:06.797

检查这个步骤： 1.点击两个视图控制器之间的连接。2\. 单击属性检查器 3\. 将标识符设置为“showDetail”。4.保存并运行。

# php - 使用 preg_match 获取图片 url

> ID：13049669
> 
> 赞同：-1
> 
> 时间：2012-10-24T12:55:56.150
> 
> 标签：php, html, preg-match, image, src

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我必须遵循代码：

```
 <div class="thumbinner" style="width:252px;"><img alt="" src="/images/thumb/0/03/HettyBlok.jpg/250px-HettyBlok.jpg" width="250" height="278" class="thumbimage" /></div> 
```

现在我想用 preg_match 获取图像 url。

但我不知道如何得到这个。

我怎样才能得到图片的网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:58:16.887

```
$string = '<div class="thumbinner" style="width:252px;"><img alt="" src="/images/thumb/0/03/HettyBlok.jpg/250px-HettyBlok.jpg" width="250" height="278" class="thumbimage" /></div>';
$url = preg_replace('#.*src="([^\"]+)".*#', '\1', $string); 
```

现在你在`$url`var 中有你的图片 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:58:21.550

```
preg_match("#src=\"\(S\+)"#",$my_code,$my_link); 
```

应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:06:15.627

您还可以进行 DOM 解析，如下所示

```
$dom = new DOMDocument;
$dom->loadHTML('<div class="thumbinner" style="width:252px;"><img alt="" src="/images/thumb/0/03/HettyBlok.jpg/250px-HettyBlok.jpg" width="250" height="278" class="thumbimage" /></div>');
$x = new DOMXPath($dom); 

foreach($x->query("//img") as $node) 
{
    echo $node->getAttribute("src");
} 
```

工作示例：[http ://codepad.org/szqI92Z8](http://codepad.org/szqI92Z8)

# jquery - 将方法添加到 jquery 插件的最佳方法

> ID：13049676
> 
> 赞同：3
> 
> 时间：2012-10-24T12:56:12.787
> 
> 标签：jquery

“官方”文档[http://docs.jquery.com/Plugins/Authoring#Namespacing](http://docs.jquery.com/Plugins/Authoring#Namespacing)声明方法应该添加到 jQuery 插件中，如下所示。我还没有看到这种设计模式经常实现。看起来如果其他插件使用 var 方法，可能会有冲突。这真的是首选方法，还是我应该采取不同的做法？

```
(function( $ ){

 var methods = {
  method1: function( options ) {},
  method2: function( ) {}
 };

 $.fn.tooltip = function( method ) {
  if ( methods[method] ) {
   return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
  } else if ( typeof method === 'object' || ! method ) {
   return methods.init.apply( this, arguments );
  }
 };

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:02:31.703

如果您想让这些方法公开访问，那么可以，这是首选方法。如果插件非常复杂，另一个可能且有时建议的选项是实际创建一个完整的构造对象，而不仅仅是使用方法哈希。我不知道这真的需要再做，因为您可以`.data()`在每个实例的根元素上管理状态使用，但它是我以前见过并且也欣赏过的模式。

<rant>此外，我最近对很多插件感到不满……如果你打算开源，请确保你至少包含一个`destroy`方法来解除你所做的一切。</rant>

# xslt-2.0 - XSLT 2.0。在函数内部循环

> ID：13049680
> 
> 赞同：0
> 
> 时间：2012-10-24T12:56:35.783
> 
> 标签：xslt-2.0

在这里撞到我的墙...

我有以下数据，其中主要员工可能有多个家属。我需要创建一个函数，将员工的 SSN (ab:SSN) 与 Dependent_SSN 进行匹配，并确定其中一个是否是“配偶”。如果是这样，那么我们将返回“配偶”的 Dependent_SSN。如果没有，我们将继续并返回下一个非“配偶”Dependent_SSN。

我正在尝试创建一个函数，因为我认为我会不止一次需要它。代码片段位于执行其他循环功能的现有模板中。

我已经尝试过了，但 Oxygen 返回错误：

```
<xsl:function name="ab:PQB">
    <xsl:param name="EE_SSN">
    </xsl:param>

    <xsl:for-each select="/ab:Report_Data/ab:Report_Entry[ab:Employee_ID=$EE_SSN]/ab:Report_Data/ab:Report_Entry[ab:Employee_ID=$EE_SSN]ab:dependents/ab:Dependent_SSN">

    </xsl:for-each> 
```

返回的错误是：

“引擎名称：Saxon-PE 9.3.0.5 严重性：致命描述：意外的令牌名称“wd:dependents”超出了表达式的结尾”

我知道我需要测试更高级别的 SSN 以防止循环通过家属，但就像我说的“我靠墙”:)

数据在这里：

```
<ab:Report_Entry>
<ab:SSN>888881006</ab:SSN>
<ab:Last_Name>Smith</ab:Last_Name>
<ab:First_Name>Kimberly</ab:First_Name>
<ab:dependents>
<ab:Dependent_SSN>888881009</ab:Dependent_SSN>
<ab:Relation ab:Descriptor="Spouse">
</ab:Relation>
</ab:dependents>
<ab:dependents>
<ab:Dependent_SSN>888881004</ab:Dependent_SSN>
<ab:Relation ab:Descriptor="Child">
</ab:Relation>
</ab:dependents>
<ab:dependents>
<ab:Dependent_SSN>888881003</ab:Dependent_SSN>
<ab:Relation ab:Descriptor="Child">
<ab:ID ab:type="Related_Person_Relationship_ID">Child</ab:ID>
</ab:Relation>
</ab:dependents>
<ab:dependents>
<ab:Dependent_SSN>888881001</ab:Dependent_SSN>
<ab:Dependent_ID>1032D-4</ab:Dependent_ID>
<ab:Relation ab:Descriptor="Child">
<ab:ID ab:type="Related_Person_Relationship_ID">Child</ab:ID>
</ab:Relation>
</ab:dependents>
</ab:Report_Entry> 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:22:19.583

您可能想要定义输入参数的类型和函数结果的类型，然后您应该编写一个返回该类型值的函数体。目前，您的描述听起来相当程序化，这不适用于 XSLT/XPath。

至于错误，我认为在路径中`/ab:Report_Data/ab:Report_Entry[ab:Employee_ID=$EE_SSN]/ab:Report_Data/ab:Report_Entry[ab:Employee_ID=$EE_SSN]ab:dependents/ab:Dependent_SSN`您需要多一个斜杠`/ab:Report_Data/ab:Report_Entry[ab:Employee_ID=$EE_SSN]/ab:Report_Data/ab:Report_Entry[ab:Employee_ID=$EE_SSN]/ab:dependents/ab:Dependent_SSN`才能获得语法正确的路径。那应该避免您得到的语法错误，但不太可能返回您想要的结果。

# javascript - 使用 jQuery 更改，仅通过 ajax 加载的元素

> ID：13049683
> 
> 赞同：0
> 
> 时间：2012-10-24T12:56:47.970
> 
> 标签：javascript, ajax, jquery

对于网页上的每个复选框，我将其替换为从 jsfiddle.net/gnQUe/170/ 借来的滑块

这是通过在加载文档时遍历元素来完成的。

现在的问题是，当通过 ajax 加载更多内容时，新的复选框不会被转换。

为了解决这个问题，我使用 AjaxComplete 事件再次遍历所有元素并将复选框替换为滑块。现在问题发生了，已经被替换的元素，得到了两个滑块。为避免这种情况，我检查复选框是否隐藏并且下一个元素是类“slider-frame”的 div，然后不处理重新处理元素。

但我也有很多其他这样的控件，我想我不是唯一一个有这个问题的人。还有其他简单的方法吗？

存在 jQuery live/on( [http://api.jquery.com/on/](http://api.jquery.com/on/) ) 事件，但它需要一个事件作为参数？而我想在渲染控件时更改控件的外观。

另一个相同问题的示例是使用 jQuerys 自动完成插件扩展一些通过 ajax 加载的控件。

除了更改元素上的某些属性之外，是否有更好的方法来完成此操作。

总而言之，在文档加载时，我想处理 DOM 中的每个元素，但是当通过 ajax 加载更多元素时，我只想更改新元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:03:46.983

我假设当元素转换为滑块时，会向它们添加一个类。所以只需添加一个 not 子句。

```
$(".MySelector").not(".SomeClassThatSliderAddsToElement").slider({}); 
```

所以在你的代码的情况下做这样的事情

```
$('.slider-button').not(".sliderloaded").addClass("sliderloaded").toggle(function(){
    $(this).addClass('on').html('YES');
    $('#slider').val(true);
},function(){
    $(this).removeClass('on').html('NO');
    $('#slider').val(false);
}); 
```

既然您说您不想添加任何其他内容，那么您将切换功能更改为单击如何。

```
$(document).on("click", ".slider-button", function(){
   var elem = $(this);
   elem.toggleClass("on");
   var state = elem.hasClass("on");
   elem.text(state?"YES":"NO");
   elem.parent().next().val(state);    
}); 
```

运行小提琴：http: [//jsfiddle.net/d9uFs/](http://jsfiddle.net/d9uFs/)

# php - Html 中的两个表

> ID：13049685
> 
> 赞同：-2
> 
> 时间：2012-10-24T12:57:01.193
> 
> 标签：php, mysql, css, html

我需要你的帮助。我怎么能把两张桌子排成一行，因为第二张桌子在第一张桌子下面，我不明白如何把它们放在一起。

我的代码：

```
<html>
  <head>
   </head>
    <body>
     <h3>Tests</h3>
 <div  style="display: inline;">
    <table border="3">      
     <tr>
       <th>

<?php
  $con = mysql_connect("localhost","root","sergios.com");
 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

  mysql_select_db("phptests", $con);

  $result1 = mysql_query("SELECT * FROM question");

   for($i=1;$i<93;++$i)
   { 
   $result = mysql_query("SELECT * FROM Category"); 
  echo "Number:".$i."<br />";
   echo "<select>";
   while ($line = mysql_fetch_array($result, MYSQL_ASSOC))
  {
  echo "<option>" .  $line['name'] . "</option>";
   }
  echo "</select>"; 
  ?>
 <canvas id="myCanvas" width="20" height="20" style="border:1px solid #c3c3c3;">
    </canvas>
            <?php 
  }
   ?>
 </table>              
<table border="2">
      <tr>
        <th>
  <?php
 for($i=1;$i<92;++$i)
    { 
  $result2 = mysql_query("SELECT * FROM question");
     echo "<select>";
    while($row1 = mysql_fetch_array($result2))
     {
    echo "<option>" . $row1['number'] . "</option>";
    }
   echo "</select>";         
   echo "<hr />";  
 }
mysql_close($con);          
 ?>
      </tr>
  </table>
 </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:59:49.930

将您的两个表格放入 HTML 块中：

```
<div class="table-container> 
```

然后使用以下 CSS ：

```
.table-container {
    display: inline-table;
} 
```

您已经做了等效的操作，但仅针对第**一个**表，对两者（或至少第二个）都执行此操作。**并为each**做 if ，不是“两个表的一个 div”，而是“两个表的两个 div”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T13:03:09.850

将第一个和第二个表格放在两个不同的元素中，然后将它们浮动。例如

```
 <div style="float:right">
    <table>
    -----
    -----
    </table>
    </div>

    <div style="float:left">
    <table>
    ----
    ----
    </table>
</div> 
```

然后使用 css 进行相应的样式设置

# asp.net - 发表评论时出现 Umbraco / uBlogsy ASP.Net 错误

> ID：13049687
> 
> 赞同：0
> 
> 时间：2012-10-24T12:57:07.903
> 
> 标签：asp.net, umbraco

我有一个 umbraco 安装，它使用博客的 uBlogsy 插件，它有问题，除了我在发表评论时得到的最后一个之外，我已经设法解决了所有问题。有谁知道这意味着什么或以前遇到过这个？

```
Server Error in '/' Application.
Method not found: 'System.Collections.Generic.List`1<umbraco.interfaces.INode> umbraco.MacroEngines.DynamicNode.get_ChildrenAsList()'.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.MissingMethodException: Method not found: 'System.Collections.Generic.List`1<umbraco.interfaces.INode> umbraco.MacroEngines.DynamicNode.get_ChildrenAsList()'.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[MissingMethodException: Method not found: 'System.Collections.Generic.List`1<umbraco.interfaces.INode> umbraco.MacroEngines.DynamicNode.get_ChildrenAsList()'.]
   uBlogsy.Web.usercontrols.uBlogsy.Contact.CreateComment() in D:\_PROJECTS\uBlogsy\Branches\1.32_bugs_search\uBlogsy\uBlogsy\usercontrols\uBlogsy\Contact.ascx.cs:116
   uBlogsy.Web.usercontrols.uBlogsy.Contact.btnSubmit_Click(Object sender, EventArgs e) in D:\_PROJECTS\uBlogsy\Branches\1.32_bugs_search\uBlogsy\uBlogsy\usercontrols\uBlogsy\Contact.ascx.cs:60
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

# django - 如何知道用户是否已登录 Facebook？姜戈

> ID：13049692
> 
> 赞同：0
> 
> 时间：2012-10-24T12:57:36.347
> 
> 标签：django, django-facebook

如标题所示，我想知道如何区分使用 facebook 登录的用户和通过邮件登录的用户。我正在使用 django-facebook。

看起来

```
 request.user.is_authenticated() 
```

适用于各种身份验证。

欢迎任何帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:03:36.933

我认为您可以检查 request.user 是否有[FacebookProfile](https://github.com/tschellenbach/Django-facebook/blob/master/django_facebook/models.py#L177)：

```
{% if request.user.facebookprofile %}user has facebook profile{% endif %} 
```

或者在 python 中：

```
if request.user.facebookprofile_id:
    print 'has facebookprofile' 
```

# jquery - 将 DIV 多次附加到 DIV - 如果重复则不会出现

> ID：13049695
> 
> 赞同：3
> 
> 时间：2012-10-24T12:57:52.140
> 
> 标签：jquery, html, append

多年来，通过阅读各种帖子从该网站获得了很多帮助，但我有点卡在这个帖子上，似乎找不到答案：

我正在显示/替换一个下拉列表，该列表取决于选择的“表格”类型（通过单选按钮）

一切都很好...直到我尝试显示之前显示的列表...即当我单击单选按钮两次时，我无法让它重新显示列表。我还尝试将所有 DIV HTML 加载到一个数组中并调用它，所以它必须（？）与追加有关？

这是我正在使用的 HTML。（HTML 中的 'max@times' 是我用动态生成的内容替换列表的地方 - 并一次性创建所有各种下拉列表，并且不会不断地从服务器获取它们）

```
<div id="selectarea"></div>
<div id="tables">
 <div id="tables2"><p><select id="select2" class="tables" name="tables2"><option value="">Please Select</option>" & max2times & "</select></p></div>"
 <div id="tables4"><p><select id="select4" class="tables" name="tables4"><option value="">Please Select</option>" & max4times & "</select></p></div>"
 <div id="tables6"><p><select id="select6" class="tables" name="tables6"><option value="">Please Select</option>" & max6times & "</select></p></div>"
 <div id="tables8"><p><select id="select8" class="tables" name="tables8"><option value="">Please Select</option>" & max8times & "</select></p></div>"
 <div id="continue"><p style="text-align:center;"><input type="button" id="now" value="Continue" name="now"></p></div>
</div> 
```

我的 JQuery 看起来像这样并且功能正常（我使用警报只是为了检查它是否正在触发并且正在传递正确的值！）

```
$("input:radio[name=tabletype]").live("click",function() {
                var value = $(this).val();
                alert("Button Click " + value);
                $("#selectarea").html("");
                var tblSel = $("#tables"+value);
                $("#selectarea").append(tblSel);
                }); 
```

任何帮助/想法将不胜感激！！！

谢谢，

GS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:39:22.280

您可以使用克隆来获取选择区域内的整个表格。您可以使用“html()”而不是清空该区域并附加内容。

```
$("input:radio[name=tabletype]").live("click",function() {
    var value = $(this).val();
    var tblSel = $("#tables"+value);
    $("#selectarea").html(tblSel.clone().removeAttr("id"));
}); 
```

如果您只想在区域内复制内容，请使用“html()”本身，如下所示。它将确保 div 将具有唯一的 ID，即您无需从复制的内容中删除 ID。

```
$("input:radio[name=tabletype]").live("click",function() {
    var value = $(this).val();
    var tblSel = $("#tables"+value);
    $("#selectarea").html(tblSel.html());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:59:36.657

您应该附加您的`div`. 否则将附加相同的元素引用，因此将创建新的 div。

```
$("input:radio[name=tabletype]").live("click",function() {
                  var value = $(this).val();
                     alert("Button Click " + value);
                      $("#selectarea").html("");
                     var tblSel = $("#tables"+value);
                     $("#selectarea").append(tblSel.clone(true).removeAttr("id"));
                }); 
```

# logging - 如何将日志消息添加到将出现在 nant 构建执行中的 NUnit 测试？

> ID：13049700
> 
> 赞同：36
> 
> 时间：2012-10-24T12:58:07.433
> 
> 标签：logging, nunit, nant

使用 NUnit，如果您在测试中添加 Debug.Print 语句，它们会出现在测试输出中。（至少他们在 ReSharper 单元测试窗口中这样做。）

当使用执行相同测试的 NAnt 构建文件时，这些 Debug.Print 语句不会出现。

如何将消息添加到单元测试中，这些消息将同时出现在 NUnit 输出和 NAnt 的构建日志输出中？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2016-01-27T15:32:34.393

NUnit 3 在测试期间的记录方式是通过`TestContext`类。它有大量静态写入变体。每个都向测试结果发出一般内容。

`TestContext.Out`产生一个`TextWriter`也可用于将日志记录信息发送到测试结果中。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-24T18:05:03.553

`Console.WriteLine()`应该保留（至少适用于我的 NUnit 版本）。

也就是说，请考虑 - 每次您想要添加一些文本输出时 - 如何将其转换为带有消息的断言。你的测试会变得更好。

# json - JSON.parse 返回未定义的值

> ID：13049706
> 
> 赞同：0
> 
> 时间：2012-10-24T12:58:23.673
> 
> 标签：json, jsonp

`password.json`由组成

```
{    
    "passwd":"pavankumar",
     "name":"pavan"

}; 
```

在 Mozilla 和 Chrome 中尝试使用分号和不使用分号

```
function ajax_post(){

  var hr=  new XMLHttpRequest();

  hr.open("GET", "password.json", true);

  hr.setRequestHeader("Content-type", "application/json",true);

  hr.onreadystatechange = function(){

    if(hr.readyState == 4 && hr.status == 200){

       var data = JSON.parse(hr.responseText);
       alert(data);   // At this stage the json file is displayed. correctly..
       var status = document.getElementById("status");
       status.innerHTML= data.name;     //returning the undefined value....     
    }
  }

  hr.send(null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:11:26.390

`hr.responseText`将是一个表示对象的 JSON 编码的字符串，所以你*不*想要`JSON.stringify`它；这会将其转换为单个字符串的 JSON 表示。直接点就`JSON.parse`行了。

# ios - 如何计算2个非相似矩形之间的比例因子

> ID：13049709
> 
> 赞同：2
> 
> 时间：2012-10-24T12:58:27.430
> 
> 标签：ios, image, map, scale

希望有人可以帮助我:)

我正在尝试将一个点从地图（纬度，经度）缩放到图像（x，y）。为此，我需要找到 2 个非相似矩形之间的比例因子（我认为）。

我会澄清一下，让我们说：

矩形 1：A(40.0, 50.0) B(40.0, 56.0) C(43.0, 56.0) D(43.0, 50.0)

（纬度三角洲 = 3，经度三角洲 = 6）。

矩形 2：E(0, 0) F(500, 0) G(500, 300) H(0, 300)

（X 增量 = 500，Y 增量 = 300）。

如何将点 P(41.5, 52.5) 从矩形 1 缩放到矩形 2 上的点 (x, y)？

**更新：**

大概的概念：

我正在尝试在自定义图像（不是地图图像，我自己的绘图）上显示用户当前位置（纬度，经度），因此我不能使用地图（MKMapKit，谷歌，汤姆汤姆）。

我有用户当前位置（通过 CoreLocation）和图像（800x460）。

我正在绘制的区域很小，所以我不需要担心地球的曲线。

我正在尝试找到一个公式来帮助我将我的用户（经纬度）位置缩放到我的图像中（在我的 iPhone 屏幕上）

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:32:00.940

好吧，得到与第一个相似但适合第二个的矩形并不难。就是这样：

```
CGRect rect1, rect2; //your rectangles.
float scale = MIN(rect1.size.width / rect2.size.width , rect1.size.height / rect2.size.height);
CGRect resultedRect;
resultedRect.origin = rect2.origin;
resultedRect.size = CGSizeMake(rect2.size.width * scale, rect2.size.height * scale); 
//resultedRect is similar with rect1 but fits in rect2\. You can now multiply your point with "scale" and get the new position. 
```

我不确定这是你想要达到的目标。

问候，

乔治

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:27:17.810

如果您对它引入的扭曲感到满意，您可以分别处理`x`( `latitude`) 和`y`( `longitude`) 坐标。

如果你认为你不会对这种扭曲感到满意，你打算如何处理 和 中不相称的`latitude`尺度`longitude`？ `1°lat != 1°long`在你的问题的纬度。

如果您需要帮助从一种长度的线缩放到另一种长度的线，请更新您的问题。

**编辑**以下 OP 的评论。

好的，所以你想将纬度 3° 的间隔映射到 Y 中 300 像素的间隔（我猜），将经度 6° 的间隔映射到 X 中 500 像素的间隔。

我仍然不完全确定您是否担心引入进一步的扭曲；如果你不是这很容易。我假设屏幕区域的左下角是像素 (1,1)，这就是您想要映射 (40°,56°) 的位置。对于该点以东的每分钟经度，`(500/360)`向右移动像素。对于角落以北的每一分钟纬度，向上移动`(300/180)`像素。

这种粗略的现成投影不会保留 2D 形状的外观（例如，正方形将投影为矩形），但有许多广泛使用的地图投影不保留形状。

# css - 如何使用 Compass 从多个文件夹中生成一个精灵？

> ID：13049712
> 
> 赞同：11
> 
> 时间：2012-10-24T12:58:36.713
> 
> 标签：css, compass-sass, sass

我有一个包含图像的文件夹，其中还有一个包含图像的子文件夹。我只需要生成一个精灵，而不是现在发生的两个精灵，而且我还想根据文件夹/子文件夹控制生成的类：

```
@import "mobile/*.png";
@import "mobile/icons/*.png"; 
```

如何让指南针只生成一个精灵？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:04:57.947

直到 Compass 0.12.1 你可以使用这个：

```
@import "mobile/**/*.png"; 
```

回归可能会出现在版本 0.12.2 中，从而阻止此语法工作。相反，您可以浏览目录列表：

```
@import "mobile/{,icons}/*.png"; 
```

确保以逗号开始列表以定位当前目录`mobile`。

然而我的 application.html.erb 是这样开始的： <title>Rstest</title> <%= stylesheet_link_tag "application", :media => "all" %> <%= javascript_include_tag "application" %> <%= csrf_meta_tags %> 我想不出会导致这种情况的场景...... 以下是来自日志的更多详细信息： Rendered reports/report.html.erb within layouts/reptabs (1093.5ms) Rendered layouts/application.html.erb (12.8ms) 以下是相关观点： 应用程序.html.erb： <title>Rstest</title> <%= stylesheet_link_tag "application", :media => "all" %> <%= javascript_include_tag "application" %> <%= csrf_meta_tags %><%= link_to "Repeat Survey", '#', id: "logo" %>

*   <%= link_to "Home", '#' %>
*   <%= link_to "About", '#' %>
*   <%= link_to "Contact", '#' %>
*   <%= link_to "Help", '#' %>

<%= content_for?(:content) ? yield(:content) : yield %>reptabs.html.erb： <% content_for :content do %>

*   <%= link_to "Reports", report1_path(@program_id) %>
*   <%= link_to "Settings", edit_program_path(@program_id) %>
*   <%= link_to "Rounds", program_rounds_path(@program_id) %>
*   <%= link_to "Participants", program_participants_path(@program_id) %>
*   <%= link_to "Questions", program_questions_path(@program_id) %>

*   <%= link_to("q r p", report1_path(@program_id)) %>
*   <%= link_to("r q p", report2_path(@program_id)) %>
*   <%= link_to("p r q", report3_path(@program_id)) %>
*   <%= link_to("p q r", report4_path(@program_id)) %>

<%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %> <% end %><%= render :template => 'layouts/application' %> 报告.html.erb：

## Report

<%= @presenter.to_s %>

<% @presenter.headers.each do |hdr| %> <% end %> <% @presenter.rows.each do |row_instance| %> <% @presenter.cols.each do |col_instance| %> <% end %> <% end %>

| .... | <%= hdr %> |
| --- | --- |
| <%= @presenter.row_label(row_instance) %> | <%= @presenter.cell(row_instance, col_instance).count %> => <%= @presenter.cell(row_instance, col_instance).join(", ") %> |

我想知道我的 content_for 语句是否搞砸了？ 您应该像这样 reptabs.html.erb 一样将 content_for 循环中的末尾移动： <% content_for :content do %>

*   <%= link_to "Reports", report1_path(@program_id) %>
*   <%= link_to "Settings", edit_program_path(@program_id) %>
*   <%= link_to "Rounds", program_rounds_path(@program_id) %>
*   <%= link_to "Participants", program_participants_path(@program_id) %>
*   <%= link_to "Questions", program_questions_path(@program_id) %>

*   <%= link_to("q r p", report1_path(@program_id)) %>
*   <%= link_to("r q p", report2_path(@program_id)) %>
*   <%= link_to("p r q", report3_path(@program_id)) %>
*   <%= link_to("p q r", report4_path(@program_id)) %>

<%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %><% end %> <%= render :template => 'layouts/application' %> htmlruby-on-railsviews 4 1 回答 1 This answer is useful 1 您应该像这样 reptabs.html.erb 一样将 content_for 循环中的末尾移动： <% content_for :content do %>

*   <%= link_to "Reports", report1_path(@program_id) %>
*   <%= link_to "Settings", edit_program_path(@program_id) %>
*   <%= link_to "Rounds", program_rounds_path(@program_id) %>
*   <%= link_to "Participants", program_participants_path(@program_id) %>
*   <%= link_to "Questions", program_questions_path(@program_id) %>

*   <%= link_to("q r p", report1_path(@program_id)) %>
*   <%= link_to("r q p", report2_path(@program_id)) %>
*   <%= link_to("p r q", report3_path(@program_id)) %>
*   <%= link_to("p q r", report4_path(@program_id)) %>

<%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %><% end %> <%= render :template => 'layouts/application' %> 于 2012-10-24T13:18:59.430 回答 Related 1 xpath - 有什么方法可以进行反向 XPath 查询？ 2 ios - 保留阅读推送通知 2 c# - 为什么用户控件内的按钮的 OnClick 事件没有发生 1 r - 在一个图中对不同范围的数据使用多个 scale_colour_gradient 比例 2 solr - solr: 未定义字段 ------------------4566bce013ce 1 model-view-controller - IE8无法下载pdf文件 1 security - JBoss - server.xml 连接器未正确配置证书识别 4 .net - app.config 中的 ConnectionStrings 带有 .config 文件不喜欢的字符 1 c++ - 在不同的标题中安排模板相关的代码 1 java - 如何在绘图中使用 graphics2D 或者有更好的方法来做到这一点？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# html - Rails 之前正在生成 html 我无法理解这是怎么发生的。在我的页面上显示源代码是这样开始的——是的，那是 html 的开始，我在 Chrome 和 Safari 中仔细检查了它......

< 问问题 问问题 2012-10-24T12:58:41.410 471 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我无法理解这是怎么发生的。在我的页面上显示源代码是这样开始的——是的，那是 html 的开始，我在 Chrome 和 Safari 中仔细检查了它...... <title>Rstest</title> <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css"> <link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css"> <link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css"> 然而我的 application.html.erb 是这样开始的： <title>Rstest</title> <%= stylesheet_link_tag "application", :media => "all" %> <%= javascript_include_tag "application" %> <%= csrf_meta_tags %> 我想不出会导致这种情况的场景...... 以下是来自日志的更多详细信息： Rendered reports/report.html.erb within layouts/reptabs (1093.5ms) Rendered layouts/application.html.erb (12.8ms) 以下是相关观点： 应用程序.html.erb： <title>Rstest</title> <%= stylesheet_link_tag "application", :media => "all" %> <%= javascript_include_tag "application" %> <%= csrf_meta_tags %><%= link_to "Repeat Survey", '#', id: "logo" %>

*   <%= link_to "Home", '#' %>
*   <%= link_to "About", '#' %>
*   <%= link_to "Contact", '#' %>
*   <%= link_to "Help", '#' %>

<%= content_for?(:content) ? yield(:content) : yield %>reptabs.html.erb： <% content_for :content do %>

*   <%= link_to "Reports", report1_path(@program_id) %>
*   <%= link_to "Settings", edit_program_path(@program_id) %>
*   <%= link_to "Rounds", program_rounds_path(@program_id) %>
*   <%= link_to "Participants", program_participants_path(@program_id) %>
*   <%= link_to "Questions", program_questions_path(@program_id) %>

*   <%= link_to("q r p", report1_path(@program_id)) %>
*   <%= link_to("r q p", report2_path(@program_id)) %>
*   <%= link_to("p r q", report3_path(@program_id)) %>
*   <%= link_to("p q r", report4_path(@program_id)) %>

<%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %> <% end %><%= render :template => 'layouts/application' %> 报告.html.erb：

## Report

<%= @presenter.to_s %>

<% @presenter.headers.each do |hdr| %> <% end %> <% @presenter.rows.each do |row_instance| %> <% @presenter.cols.each do |col_instance| %> <% end %> <% end %>

| .... | <%= hdr %> |
| --- | --- |
| <%= @presenter.row_label(row_instance) %> | <%= @presenter.cell(row_instance, col_instance).count %> => <%= @presenter.cell(row_instance, col_instance).join(", ") %> |

我想知道我的 content_for 语句是否搞砸了？ 您应该像这样 reptabs.html.erb 一样将 content_for 循环中的末尾移动： <% content_for :content do %>

*   <%= link_to "Reports", report1_path(@program_id) %>
*   <%= link_to "Settings", edit_program_path(@program_id) %>
*   <%= link_to "Rounds", program_rounds_path(@program_id) %>
*   <%= link_to "Participants", program_participants_path(@program_id) %>
*   <%= link_to "Questions", program_questions_path(@program_id) %>

*   <%= link_to("q r p", report1_path(@program_id)) %>
*   <%= link_to("r q p", report2_path(@program_id)) %>
*   <%= link_to("p r q", report3_path(@program_id)) %>
*   <%= link_to("p q r", report4_path(@program_id)) %>

<%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %><% end %> <%= render :template => 'layouts/application' %> htmlruby-on-railsviews 4 1 回答 1 This answer is useful 1 您应该像这样 reptabs.html.erb 一样将 content_for 循环中的末尾移动： <% content_for :content do %>

*   <%= link_to "Reports", report1_path(@program_id) %>
*   <%= link_to "Settings", edit_program_path(@program_id) %>
*   <%= link_to "Rounds", program_rounds_path(@program_id) %>
*   <%= link_to "Participants", program_participants_path(@program_id) %>
*   <%= link_to "Questions", program_questions_path(@program_id) %>

*   <%= link_to("q r p", report1_path(@program_id)) %>
*   <%= link_to("r q p", report2_path(@program_id)) %>
*   <%= link_to("p r q", report3_path(@program_id)) %>
*   <%= link_to("p q r", report4_path(@program_id)) %>

<%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %><% end %> <%= render :template => 'layouts/application' %> 于 2012-10-24T13:18:59.430 回答 Related 1 xpath - 有什么方法可以进行反向 XPath 查询？ 2 ios - 保留阅读推送通知 2 c# - 为什么用户控件内的按钮的 OnClick 事件没有发生 1 r - 在一个图中对不同范围的数据使用多个 scale_colour_gradient 比例 2 solr - solr: 未定义字段 ------------------4566bce013ce 1 model-view-controller - IE8无法下载pdf文件 1 security - JBoss - server.xml 连接器未正确配置证书识别 4 .net - app.config 中的 ConnectionStrings 带有 .config 文件不喜欢的字符 1 c++ - 在不同的标题中安排模板相关的代码 1 java - 如何在绘图中使用 graphics2D 或者有更好的方法来做到这一点？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13049713
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, ruby-on-rails, views

我无法理解这是怎么发生的。在我的页面上显示源代码是这样开始的——是的，那是 html 的开始，我在 Chrome 和 Safari 中仔细检查了它......

```
 </div>
    </div>
  </div>
<!DOCTYPE html>
<html>
<head>
  <title>Rstest</title>
  <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
```

然而我的 application.html.erb 是这样开始的：

```
<!DOCTYPE html>
<html>
<head>
  <title>Rstest</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %> 
```

我想不出会导致这种情况的场景......

以下是来自日志的更多详细信息：

```
Rendered reports/report.html.erb within layouts/reptabs (1093.5ms)
Rendered layouts/application.html.erb (12.8ms) 
```

以下是相关观点：

应用程序.html.erb：

```
<!DOCTYPE html>
<html>
<head>
  <title>Rstest</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "Repeat Survey", '#', id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home", '#' %></li>
          <li><%= link_to "About", '#' %></li>
          <li><%= link_to "Contact", '#' %></li>
          <li><%= link_to "Help", '#' %></li>
        </ul>
      </nav>
    </div>
  </div>
</header>

<div class="container">
    <%= content_for?(:content) ? yield(:content) : yield %>
</div>

</body>
</html> 
```

reptabs.html.erb：

```
<% content_for :content do %>
  <div class="container">
    <ul class="nav nav-tabs">
      <li><%= link_to "Reports", report1_path(@program_id) %></li>
      <li><%= link_to "Settings", edit_program_path(@program_id) %></li>
      <li><%= link_to "Rounds", program_rounds_path(@program_id) %></li>
      <li><%= link_to "Participants", program_participants_path(@program_id) %></li>
      <li><%= link_to "Questions", program_questions_path(@program_id) %></li>
    </ul>

    <div class="container">
      <div class="row">
        <div class="span2">
          <ul class="nav nav-pills nav-stacked">
            <li><%= link_to("q r p", report1_path(@program_id)) %></li>
            <li><%= link_to("r q p", report2_path(@program_id)) %></li>
            <li><%= link_to("p r q", report3_path(@program_id)) %></li>
            <li><%= link_to("p q r", report4_path(@program_id)) %></li>
          </ul>
        </div>
        <div class="span9">
            <%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %>
          <% end %>
        </div>
    </div>
  </div>
<%= render :template => 'layouts/application' %> 
```

报告.html.erb：

```
<h2>Report</h2>
  <p>
    <%= @presenter.to_s %>
  </p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>....</th>
      <% @presenter.headers.each do |hdr| %>
        <th><%= hdr %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @presenter.rows.each do |row_instance| %>
      <tr>
        <td><%= @presenter.row_label(row_instance) %></td>
        <% @presenter.cols.each do |col_instance| %>
          <td>
            <%= @presenter.cell(row_instance, col_instance).count %> =>
            <%= @presenter.cell(row_instance, col_instance).join(", ") %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table> 
```

我想知道我的 content_for 语句是否搞砸了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:18:59.430

您应该像这样 reptabs.html.erb 一样将 content_for 循环中的末尾移动：

```
<% content_for :content do %>
  <div class="container">
    <ul class="nav nav-tabs">
      <li><%= link_to "Reports", report1_path(@program_id) %></li>
      <li><%= link_to "Settings", edit_program_path(@program_id) %></li>
      <li><%= link_to "Rounds", program_rounds_path(@program_id) %></li>
      <li><%= link_to "Participants", program_participants_path(@program_id) %></li>
      <li><%= link_to "Questions", program_questions_path(@program_id) %></li>
    </ul>

    <div class="container">
      <div class="row">
        <div class="span2">
          <ul class="nav nav-pills nav-stacked">
            <li><%= link_to("q r p", report1_path(@program_id)) %></li>
            <li><%= link_to("r q p", report2_path(@program_id)) %></li>
            <li><%= link_to("p r q", report3_path(@program_id)) %></li>
            <li><%= link_to("p q r", report4_path(@program_id)) %></li>
          </ul>
        </div>
        <div class="span9">
            <%= content_for?(:reptabs_content) ? yield(:reptabs_content) : yield %>
          <!--not here -->
        </div>
    </div>
  </div>
<% end %><!--but here -->
<%= render :template => 'layouts/application' %> 
```

# c# - TeamCity 上的偶发错误“无法将配置保存到文件 '...\web.config'”

> ID：13049717
> 
> 赞同：1
> 
> 时间：2012-10-24T12:58:57.530
> 
> 标签：c#, .net, web-config, teamcity

我们偶尔会在我们的持续集成服务器 (TeamCity) 上收到此错误：

```
Unable to save config to file '...\web.config'. 
```

**这发生在不到 10% 的构建和不同的构建代理上，所以我认为这不是权限问题。**

失败的测试调用写入另一个服务的 web.config 文件的 WCF 服务。它**不是 THREAD-SAFE**，但据我所知 TeamCity 不会并行运行测试，否则我们的许多其他测试将一直失败。

我试图通过产生大量调用配置服务的线程来重现错误并得到另一个异常：

```
The process cannot access the file '...\web.config' because it is being used 
by another process 
```

谁能帮我找出问题的原因，这样我至少可以通过稳定的测试来重现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:34:54.757

web.config 上的文件锁定未及时释放。当测试 A 导致对 web.config 的写入时，不能保证在测试完成时 web.config 上的文件锁定将被释放。当测试 B 运行并尝试写入 web.config 时，锁可能仍然存在。这不太可能发生，因为锁通常会很快释放。但是，它确实偶尔会发生，这可能会导致您 10% 的失败率。

写入 web.config 时使用 try catch 块，并在发生异常时重试写入。这不是 100% 可靠的，因此您可能需要考虑自定义文件锁定。

# java - 如何为 BouncyCastleProvider 安全添加库

> ID：13049720
> 
> 赞同：0
> 
> 时间：2012-10-24T12:59:06.637
> 
> 标签：java, security

我很困惑在哪里添加 jar 文件（bcprov-jdk15-145.jar）来为 BouncyCastleProvider 添加安全文件。在应用程序库或 JRE jre6\lib\ext\ 文件夹中。

```
 Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:09:17.587

除非您有特定原因将 JAR 文件添加到 JRE 的`lib/ext`目录中，否则不要在其中放置任何内容。此目录用于[Installed Extensions](http://docs.oracle.com/javase/tutorial/ext/basics/install.html)，而不仅仅是应用程序的依赖项。

只需将`bcprov-jdk15-145.jar`文件添加到应用程序的 Classpath 即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:05:24.913

一般的答案是：“在类路径上”。大多数情况下，这将与您的应用程序有关，例如。在 EAR 或 WAR 文件中。

干杯，

# symfony - 在 Symfony 2 中动态创建表单

> ID：13049723
> 
> 赞同：1
> 
> 时间：2012-10-24T12:59:08.623
> 
> 标签：symfony, symfony-forms

一个简单的问题：

我有一个表格，它返回一个数字，我需要**在 Controller 中创建这个数量的标签。**

我尝试：

```
$form2 = $this->createFormBuilder();

for($i = 0; $i < $num; $i++) {
    $name = 'column'.$i;
    $form2->add($name,'number');
}

$form2->getForm(); 
```

我认为它应该很简单，但我不能..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:42:32.130

是的，您可以使用数组/哈希映射而不是真实对象来做到这一点。

这是一个例子：

```
// Create the array
$dataObj = array();

$dataObj['data1'] = '';
$dataObj['data2'] = 'default';
// ... do a loop here
$dataObj['data6'] = 'Hello';

// Create the form
$formBuilder = $this->createFormBuilder($dataObj);
foreach($dataObj as $key => $val)
{
    $fieldType = 'text'; // Here, everything is a text, but you can change it based on $key, or something else
    $formBuilder->add($key, $fieldType);
}
$form = $formBuilder->getForm();

// Process the form
$request = $this->get('request');
if($request->getMethod() == 'POST')
{
    $form->bind($request); // For symfony 2.1.x
    // $form->bind($this->get('request')->request->get('form')); // For symfony 2.0.x
    if($form->isValid())
    {
        $dataObj = $form->getData();
        foreach($dataObj as $key => $val)
        {
            echo $key . ' = ' . $val . '<br />';
        }
        exit('Done');
    }
}

// Render
    return $this->render('Aaa:Bbb:ccc.html.twig', array(
    'requestForm' => $form->createView())); 
```

# sql-server - MS Sql Server Triggers (2) 同时执行：如何捕捉是什么原因造成的？

> ID：13049724
> 
> 赞同：0
> 
> 时间：2012-10-24T12:59:07.807
> 
> 标签：sql-server, sql-server-2008, triggers, datatrigger

所以我的数据库中有 2 个触发器。它的目的是记录用户或第三方导入/导出所做的任何数据操作活动。它保存它的表有一个日期戳，显然标记了它的执行时间。出于某种原因，当此第三方 SSIS 包向其写入记录时，它会触发触发器（如预期的那样），但时间完全相同。一条记录用于插入记录，另一条记录用于更新记录。问题是日期戳在毫秒之前是完全相同的。

关于如何跟踪其原因的任何想法？我应该查看 SSIS 包吗？我认为这不会导致 2 个触发器。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:08:53.367

尝试使用 SQL 探查器查看正在调用的内容。但我怀疑是SSIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:40:54.373

在 SQL Server 中，DATETIME 数据类型的分辨率为 3 毫秒。虽然这听起来很短，但足以在现代 CPU 上执行数千条指令。因此，如果插入后直接进行更新，则它们很有可能以相同的 DATETIME 值结束。

您可以通过使用 DATETIME2 数据类型和 SYSDATETIME() 函数来将分辨率提高到 100 纳秒。但即便如此，您最终可能会得到重复的值。

获取执行顺序的最简单方法是在日志表中添加一个 IDENTITY 列。从它不断增加的价值中，您可以直接辨别订单。

# php - 如何使用准备好的语句获取 SQL_CALC_FOUND_ROWS 值？

> ID：13049725
> 
> 赞同：6
> 
> 时间：2012-10-24T12:59:11.223
> 
> 标签：php, mysql, mysqli, prepared-statement, sql-calc-found-rows

我目前正在为如何`SQL_CALC_FOUND_ROWS`使用准备好的语句来实现而摸不着头脑。

我正在编写一个分页类，显然我想将 LIMIT 添加到查询中，但还要找到总行数。

这是相关课程的一个示例。

```
$query = "select SQL_CALC_FOUND_ROWS id,title,location,salary,employer from jobs where region=38 limit 0,3";

if($stmt = $connection->prepare($query)) {
    $stmt->execute()or die($connection->error); //execute query
    $stmt->bind_result($id,$title,$location,$salary,$employer,$image);
    while($stmt->fetch()){
        $jobs[$x]['id']=$id;
        $jobs[$x]['title']=$title;
        $jobs[$x]['location']=$location;
        $jobs[$x]['salary']=$salary;
        $jobs[$x]['employer']=$employer;
        $jobs[$x]['image']=$image;
        $x++;
    }
    $stmt->close();//close statement
} 
```

我对如何获得`SQL_CALC_FOUND_ROWS`实际价值感到有些困惑？我曾想过添加类似的内容：

```
$stmt->store_result();
$count=$stmt->num_rows; 
```

但这只给出了一个基于 LIMIT 的数字，所以在上面的例子中它是 3 而不是它应该是完整的 6。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T13:50:59.110

设法弄清楚了，我将在下面为任何对未来感兴趣的人详细说明我的答案。

**原始代码**

```
$query="select SQL_CALC_FOUND_ROWS id,title,location,salary,employer from jobs where region=38 limit 0,3";

if($stmt = $connection->prepare($query)) {
        $stmt->execute()or die($connection->error); //execute query
        $stmt->bind_result($id,$title,$location,$salary,$employer,$image);
        while($stmt->fetch()){
            $jobs[$x]['id']=$id;
            $jobs[$x]['title']=$title;
            $jobs[$x]['location']=$location;
            $jobs[$x]['salary']=$salary;
            $jobs[$x]['employer']=$employer;
            $jobs[$x]['image']=$image;
            $x++;
        }
        $stmt->close();//close statement
    } 
```

**更新代码**

```
$query="select SQL_CALC_FOUND_ROWS id,title,location,salary,employer from jobs where region=38 limit 0,3";

if($stmt = $connection->prepare($query)) {
        $stmt->execute()or die($connection->error); //execute query
        $stmt->bind_result($id,$title,$location,$salary,$employer,$image);
        while($stmt->fetch()){
            $jobs[$x]['id']=$id;
            $jobs[$x]['title']=$title;
            $jobs[$x]['location']=$location;
            $jobs[$x]['salary']=$salary;
            $jobs[$x]['employer']=$employer;
            $jobs[$x]['image']=$image;
            $x++;
        }
            //get total number of rows.
            $query="SELECT FOUND_ROWS()";
            $stmt = $connection->prepare($query);
            $stmt->execute();
            $stmt->bind_result($num);
            while($stmt->fetch()){
                $count=$num;
            }

        $stmt->close();//close statement
    } 
```

可能可以通过另一种方式做得更好，但似乎在网上的任何地方都找不到任何好的例子，这很有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-27T21:25:14.780

如果你想得到`SQL_CALC_FOUND_ROWS`你需要`SELECT FOUND_ROWS()`在 MySQL 中运行查询的结果。为此，您不需要准备好的声明。你可以只使用`query()`方法。

```
$connection->query('SELECT FOUND_ROWS()')->fetch_row()[0]; 
```

如果您使用的是 mysqlnd（如果您使用的是受支持的 PHP 版本之一，则应该使用它），您可以使您的代码更简单。

```
// Enable error reporting instead of using or die($connection->error)
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);

$query = "SELECT SQL_CALC_FOUND_ROWS id,title,location,salary,employer 
    FROM jobs 
    WHERE region=38 
    LIMIT 0,3";
$stmt = $connection->prepare($query);
$stmt->execute();
$jobs = $stmt->fetch_all(MYSQLI_ASSOC);

// There is no need for prepared statement when using FOUND_ROWS()
$connection->query('SELECT FOUND_ROWS()')->fetch_row()[0]; 
```

正如你所看到的，它使用起来`fetch_all()`比`while`循环更干净。

[**警告**](https://dev.mysql.com/doc/refman/8.0/en/information-functions.html#function_found-rows)

> SQL_CALC_FOUND_ROWS 查询修饰符和随附的 FOUND_ROWS() 函数自 MySQL 8.0.17 起已弃用，并将在未来的 MySQL 版本中删除。作为替代，考虑使用 LIMIT 执行您的查询，然后使用 COUNT(*) 且没有 LIMIT 的第二个查询来确定是否还有其他行。例如，代替这些查询：
> 
> ```
> SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name WHERE id > 100 LIMIT 10;
> SELECT FOUND_ROWS(); 
> ```
> 
> 请改用这些查询：
> 
> ```
> SELECT * FROM tbl_name WHERE id > 100 LIMIT 10;
> SELECT COUNT(*) WHERE id > 100; 
> ```

# android - 如何在 Android 中创建圆形较小的微调器？

> ID：13049730
> 
> 赞同：0
> 
> 时间：2012-10-24T12:59:28.357
> 
> 标签：android, android-spinner

我想创建一个带有圆角的微调器，并且它不应该像默认微调器盖一样覆盖屏幕的整个宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:07:53.453

您可以使用这样的图像创建动画：

```
ImageView spinner = (ImageView) findViewById(R.id.spinner);
        spinner.startAnimation(AnimationUtils.loadAnimation(this, R.anim.rotate_indefinitely)); 
```

使用 rotate_indefinitely 动画：

```
<?xml version="1.0" encoding="UTF-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:duration="1000" /> 
```

# c# - 如果文件已以 Windows 方式存在，则自动重命名文件

> ID：13049732
> 
> 赞同：60
> 
> 时间：2012-10-24T12:59:30.820
> 
> 标签：c#, .net

我的 C# 代码根据输入生成多个文本文件并将它们保存在文件夹中。此外，我假设文本文件的名称将与输入相同。（输入仅包含字母）如果两个文件具有相同的名称，那么它只是覆盖前一个文件。但我想保留这两个文件。

我不想将当前日期时间或随机数附加到第二个文件名。相反，我想像 Windows 一样做。如果第一个文件名是 AAA.txt，那么第二个文件名是 AAA(2).txt，第三个文件名是 AAA(3).txt.....第 N 个文件名是 AAA(N).txt .

```
string[] allFiles = Directory.GetFiles(folderPath).Select(filename => Path.GetFileNameWithoutExtension(filename)).ToArray();
        foreach (var item in allFiles)
        {
            //newFileName is the txt file which is going to be saved in the provided folder
            if (newFileName.Equals(item, StringComparison.InvariantCultureIgnoreCase))
            {
                // What to do here ?                
            }
        } 
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-10-24T13:09:10.490

这将检查带有 tempFileName 的文件是否存在，并将数字加一，直到找到目录中不存在的名称。

```
int count = 1;

string fileNameOnly = Path.GetFileNameWithoutExtension(fullPath);
string extension = Path.GetExtension(fullPath);
string path = Path.GetDirectoryName(fullPath);
string newFullPath = fullPath;

while(File.Exists(newFullPath)) 
{
    string tempFileName = string.Format("{0}({1})", fileNameOnly, count++);
    newFullPath = Path.Combine(path, tempFileName + extension);
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-03-13T09:00:10.397

使用此代码，如果文件名是“Test (3).txt”，那么它将变为“Test (4).txt”。

```
public static string GetUniqueFilePath(string filePath)
{
    if (File.Exists(filePath))
    {
        string folderPath = Path.GetDirectoryName(filePath);
        string fileName = Path.GetFileNameWithoutExtension(filePath);
        string fileExtension = Path.GetExtension(filePath);
        int number = 1;

        Match regex = Regex.Match(fileName, @"^(.+) \((\d+)\)$");

        if (regex.Success)
        {
            fileName = regex.Groups[1].Value;
            number = int.Parse(regex.Groups[2].Value);
        }

        do
        {
            number++;
            string newFileName = $"{fileName} ({number}){fileExtension}";
            filePath = Path.Combine(folderPath, newFileName);
        }
        while (File.Exists(filePath));
    }

    return filePath;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-24T13:16:24.660

其他示例不考虑文件名/扩展名。

干得好：

```
 public static string GetUniqueFilename(string fullPath)
    {
        if (!Path.IsPathRooted(fullPath))
            fullPath = Path.GetFullPath(fullPath);
        if (File.Exists(fullPath))
        {
            String filename = Path.GetFileName(fullPath);
            String path = fullPath.Substring(0, fullPath.Length - filename.Length);
            String filenameWOExt = Path.GetFileNameWithoutExtension(fullPath);
            String ext = Path.GetExtension(fullPath);
            int n = 1;
            do
            {
                fullPath = Path.Combine(path, String.Format("{0} ({1}){2}", filenameWOExt, (n++), ext));
            }
            while (File.Exists(fullPath));
        }
        return fullPath;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T13:03:32.590

怎么样：

```
int count = 1;
String tempFileName = newFileName;

foreach (var item in allFiles)
{
  if (tempFileName.Equals(item, StringComparison.InvariantCultureIgnoreCase))
  {
    tempFileName = String.Format("{0}({1})", newFileName, count++);
  }
} 
```

如果它不存在，这将使用原始文件名，如果不存在，它将采用带有括号中索引的新文件名（尽管此代码没有考虑扩展名）。如果使用新生成的名称“text(001)”，那么它将递增，直到找到有效的未使用文件名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-27T09:26:48.657

```
int count= 0; 
```

文件是文件名

```
while (File.Exists(fullpathwithfilename))  //this will check for existence of file
{ 
// below line names new file from file.xls to file1.xls   
fullpathwithfilename= fullpathwithfilename.Replace("file.xls", "file"+count+".xls"); 

count++;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-05T01:31:56.553

```
public static string AutoRenameFilename(FileInfo file)
    {
        var filename = file.Name.Replace(file.Extension, string.Empty);
        var dir = file.Directory.FullName;
        var ext = file.Extension;

        if (file.Exists)
        {
            int count = 0;
            string added;

            do
            {
                count++;
                added = "(" + count + ")";
            } while (File.Exists(dir + "\\" + filename + " " + added + ext));

            filename += " " + added;
        }

        return (dir + filename + ext);
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-26T16:26:47.490

关于 Giuseppe 对 windows 重命名文件方式的评论，我在一个版本上工作，该版本在文件名中找到任何现有索引，即 (2)，并根据 windows 相应地重命名文件。假定 sourceFileName 有效，并且此时假定用户对目标文件夹具有写权限：

```
using System.IO;
using System.Text.RegularExpressions;

    private void RenameDiskFileToMSUnique(string sourceFileName)
    {
        string destFileName = "";
        long n = 1;
        // ensure the full path is qualified
        if (!Path.IsPathRooted(sourceFileName)) { sourceFileName = Path.GetFullPath(sourceFileName); }

        string filepath = Path.GetDirectoryName(sourceFileName);
        string fileNameWOExt = Path.GetFileNameWithoutExtension(sourceFileName);
        string fileNameSuffix = "";
        string fileNameExt = Path.GetExtension(sourceFileName);
        // if the name includes the text "(0-9)" then we have a filename, instance number and suffix  
        Regex r = new Regex(@"\(\d+\)");
        Match match = r.Match(fileNameWOExt);
        if (match.Success) // the pattern (0-9) was found
        {
            // text after the match
            if (fileNameWOExt.Length > match.Index + match.Length) // remove the format and create the suffix
            {
                fileNameSuffix = fileNameWOExt.Substring(match.Index + match.Length, fileNameWOExt.Length - (match.Index + match.Length));
                fileNameWOExt = fileNameWOExt.Substring(0, match.Index);
            }
            else // remove the format at the end
            {
                fileNameWOExt = fileNameWOExt.Substring(0, fileNameWOExt.Length - match.Length);
            }
            // increment the numeric in the name
            n = Convert.ToInt64(match.Value.Substring(1, match.Length - 2)) + 1;
        }
        // format variation: indexed text retains the original layout, new suffixed text inserts a space!
        do
        {
            if (match.Success) // the text was already indexed
            {
                if (fileNameSuffix.Length > 0)
                {
                    destFileName = Path.Combine(filepath, String.Format("{0}({1}){2}{3}", fileNameWOExt, (n++), fileNameSuffix, fileNameExt));
                }
                else
                {
                    destFileName = Path.Combine(filepath, String.Format("{0}({1}){2}", fileNameWOExt, (n++), fileNameExt));
                }
            }
            else // we are adding a new index
            {
                destFileName = Path.Combine(filepath, String.Format("{0} ({1}){2}", fileNameWOExt, (n++), fileNameExt));
            }
        }
        while (File.Exists(destFileName));

        File.Copy(sourceFileName, destFileName);
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-20T15:37:03.113

我正在寻找一种可以移动文件的解决方案，并确保目标文件名是否尚未被使用。它将遵循与 Windows 相同的逻辑，并在重复文件后附加一个数字，并带有括号。

感谢@cadrell0，最佳答案帮助我找到了以下解决方案：

```
 /// <summary>
    /// Generates full file path for a file that is to be moved to a destinationFolderDir. 
    /// 
    /// This method takes into account the possiblity of the file already existing, 
    /// and will append number surrounded with brackets to the file name.
    /// 
    /// E.g. if D:\DestinationDir contains file name file.txt,
    /// and your fileToMoveFullPath is D:\Source\file.txt, the generated path will be D:\DestinationDir\file(1).txt
    /// 
    /// </summary>
    /// <param name="destinationFolderDir">E.g. D:\DestinationDir </param>
    /// <param name="fileToMoveFullPath">D:\Source\file.txt</param>
    /// <returns></returns>
    public string GetFullFilePathWithDuplicatesTakenInMind(string destinationFolderDir, string fileToMoveFullPath)
    {
        string destinationPathWithDuplicatesTakenInMind;

        string fileNameWithExtension = Path.GetFileName(fileToMoveFullPath);
        string fileNameWithoutExtension = Path.GetFileNameWithoutExtension(fileToMoveFullPath);
        string fileNameExtension = Path.GetExtension(fileToMoveFullPath);

        destinationPathWithDuplicatesTakenInMind = Path.Combine(destinationFolderDir, fileNameWithExtension);

        int count = 0;
        while (File.Exists(destinationPathWithDuplicatesTakenInMind))
        {
            destinationPathWithDuplicatesTakenInMind = Path.Combine(destinationFolderDir, $"{fileNameWithoutExtension}({count}){fileNameExtension}");
            count = count + 1; // sorry, not a fan of the ++ operator.
        }

        return destinationPathWithDuplicatesTakenInMind;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-24T14:40:42.257

现在工作正常。谢谢大家的回答。。

```
string[] allFiles = Directory.GetFiles(folderPath).Select(filename => Path.GetFileNameWithoutExtension(filename)).ToArray();
        string tempFileName = fileName;
        int count = 1;
        while (allFiles.Contains(tempFileName ))
        {
            tempFileName = String.Format("{0} ({1})", fileName, count++); 
        }

        output = Path.Combine(folderPath, tempFileName );
        string fullPath=output + ".xml"; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-24T13:17:03.053

您可以声明 a`Dictionary<string,int>`来保存每个根文件名的保存次数。之后，在您的`Save`方法上，只需增加计数器并将其附加到基本文件名：

```
var key = fileName.ToLower();
string newFileName;
if(!_dictionary.ContainsKey(key))
{
    newFileName = fileName;
    _dictionary.Add(key,0);
}
else
{
    _dictionary[key]++;
   newFileName = String.Format("{0}({1})", fileName, _dictionary[key])
} 
```

这样，每个不同的文件名都有一个计数器：AAA(1), AAA(2); BBB(1)...

# html - 插入更多文本时，增加 div 高度并动态下移其他 div

> ID：13049733
> 
> 赞同：0
> 
> 时间：2012-10-24T12:59:31.800
> 
> 标签：html, css

当文本增加时，我很难在主 div 下用文本向下移动其他 div。我用 css 尝试了很多次。当文本随着大量输入而增加时，按文本 div 的高度会增加，但其他潜水不会移动。我很抱歉我的英语。我能为此做些什么？

这是在插入文本之前 [http://i.stack.imgur.com/SeY8Y.png](http://i.stack.imgur.com/SeY8Y.png)

这是在插入文本 [http://i.stack.imgur.com/k5Ik6.png](http://i.stack.imgur.com/k5Ik6.png)

这是我的代码

```
 <div style="width:795px; min-height:40px; background-color:#0099FF; position:absolute; left: 60px; top: 0px;padding-top:10px;padding-left:5px; color:#FFF;font-size:14px"></div>
<span style="width:795px; min-height:40px; background-color:#0099FF; position:absolute; left: 60px; top: 0px;padding-top:10px;padding-left:5px; color:#FFF;font-size:14px"><strong>Tomorrow can be too late..</strong></span>
<div style="width:100px; height:30px; background-color:#FBC81A; position:absolute; left: 757px; top: 40px; border-bottom-left-radius:5px;z-index:1;">
  <div style="width:50px;height:30px; position:absolute; padding-top:3px;padding-left:13px;">
    <input type="submit" name="btn_report" id="btn_report" value="" style="background-image:url(images/report.png);background-repeat:no-repeat;width:23px;height:23px;border:none;background-color:#FBC81A;cursor:pointer;" title="Report this post" />
  </div>
<div style="width:50px; height:30px; position:absolute; left: 50px; background-color:#0C0; top: 0px;text-align:center;">
<div style="margin-top:7px;color:#FFF;font-weight:bold;cursor:pointer;" title="Post reputations">102</div>

</div></div>
  <div style="width:795px; min-height:340px; background-color:#F3F8F8; position:absolute ; left: 59px; border-bottom-left-radius:10px; border-bottom-right-radius:10px; top: 40px;  border-left:3px #0099FF solid;border-right:3px #0099FF solid;" >
    <p>sds</p>
    <p>d</p>
    <p>sa</p>
    <p>d</p>
    <p>sad</p>
    <p>s</p>
    <p>&nbsp;</p>
    <p>ds</p>
    <p>ad</p>
    <p>s</p>
    <p>&nbsp;</p>
    <p>d</p>
    <p>dsa</p>
    <p>das</p>
    <p>d</p>
    <p>sa</p>
    <p>d</p>
    <p>as</p>
    <p>das</p>
    <p>d</p>
    <p>as</p>
    <p>das</p>
    <p>d</p>
    <p>sa</p>
    <p>d</p>
  </div>
  <div style="width:800px; min-height:25px; background-color:#0099FF; position:absolute; left: 60px; border-bottom-left-radius:10px; border-bottom-right-radius:10px; top: 355px;" ></div>
   <div style="width:798px; min-height:20px;  position:absolute; left: 62px; border-bottom-left-radius:10px; border-bottom-right-radius:10px; top: 380px;background-image:url(shadow_9.png);background-repeat:no-repeat;"  ></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:22:59.057

这是因为`position: absolute`,`left: 60px`和`top: 355px`. 这样，容器将始终位于屏幕上的相同位置。你将不得不使用`position: relative`,`margin`代替`left`and `right`。div也没有正确嵌套。

看看[http://jsfiddle.net/skeurentjes/2xd88/1/](http://jsfiddle.net/skeurentjes/2xd88/1/)

它认为它按照你想要的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:18:52.283

只需移动底部栏`<div>`：

```
<div style="width:800px; min-height:25px; background-color:#0099FF; position:absolute; left: 60px; border-bottom-left-radius:10px; border-bottom-right-radius:10px; top: 355px;" ></div> 
```

在`<div>`您放置文本的位置（在`<p>`标签下）并将其更改为：

```
<div style="width:800px; min-height:25px; background-color:#0099FF; position:relative; left: 0px; border-bottom-left-radius:10px; border-bottom-right-radius:10px; bottom: 0px;" ></div> 
```

它会随着您的文本内容动态移动`<div>`

# spring - JNDI 不适用于 HornetQ 和 tomcat

> ID：13049736
> 
> 赞同：2
> 
> 时间：2012-10-24T12:59:38.950
> 
> 标签：spring, tomcat, jms, jndi, hornetq

我正在尝试在 tomcat 上使用 hornetq 运行 JMS 应用程序！我尝试关注[这篇文章](http://wash-inside-out.blogspot.com/2010/08/hornetq-jms-integration-with-tomcat.html)。我将 jndi.properties 放在我的客户端类路径中；jndi.properties：

```
java.naming.factory.initial=org.apache.naming.java.javaURLContextFactory 
java.naming.factory.url.pkgs=org.apache.naming 
```

我将这些依赖项添加到 pom.xml：

```
<dependency> 
    <groupId>tomcat</groupId> 
    <artifactId>naming-factory</artifactId> 
    <version>5.5.23</version> 
    <scope>test</scope> 
</dependency> 
<dependency> 
     <groupId>tomcat</groupId> 
     <artifactId>naming-resources</artifactId> 
     <version>5.5.23</version> 
     <scope>test</scope> 
 </dependency> 
```

我的 JMS 春豆：

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
        <property name="environment">
            <props>
                <prop key="java.naming.factory.initial">org.apache.naming.java.javaURLContextFactory</prop>
                <prop key="java.naming.factory.url.pkgs">org.apache.naming</prop>
            </props>
        </property>
    </bean>

<!-- Connection Factory -->
<bean id="hornetqConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jndiTemplate"/>
    <property name="jndiName" value="/ConnectionFactory" />
</bean>

<!-- Destinations -->
<bean id="annotationDeleteCommandDestination" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jndiTemplate"/>
    <property name="jndiName" value="/queue/command/annotation/deleteQueue" />
</bean> 
```

我正在使用 HornetQ 默认服务器（独立，非集群）

hornetq-jms.xml：

```
<queue name="annotationDeleteCommandQueue">
    <entry name="/queue/command/annotation/deleteQueue"/>
</queue>

<connection-factory name="NettyConnectionFactory">
      <xa>false</xa>
      <connectors>
         <connector-ref connector-name="netty"/>
      </connectors>
      <entries>
         <entry name="/ConnectionFactory"/>
      </entries>
   </connection-factory> 
```

但是当我启动tomcat时，我得到了这个错误：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hornetqConnectionFactory' defined in ServletContext resource [/WEB-INF/classes/config/spring/applicationContext-jms.xml]: 
Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: Name ConnectionFactory is not bound in this Context ......... 
```

怎么了？我应该将任何 jar 文件放在 tomcat 类路径中吗？（哪些罐子？）我应该将队列和连接工厂定义放在 tomcat 配置中吗？（如何？）我可以在 tomcat 中禁用 JNDI 并改用 hornetq 独立 JNDI 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:55:48.403

我通过修改 jndiTemplate（使用 jboss 命名）并将 jnp-client.jar 添加到客户端类路径解决了这个问题：

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory</prop>
            <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces</prop>
            <prop key="java.naming.provider.url">jnp://localhost:1099</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:31:17.750

您是否正确启动了 HornetQ？错误日志似乎表明 `ConnectionFactory`不存在。

您是否尝试过使用其他工具访问 HornetQ？您应该能够使用 JMX 或 HermesJMS (http://www.hermesjms.com) 来验证您的存在`ConnectionFactory`

# macos - 为什么 apache 不从 httpd.conf 加载文档根目录

> ID：13049737
> 
> 赞同：0
> 
> 时间：2012-10-24T12:59:40.277
> 
> 标签：macos, apache, httpd.conf

我在我的本地机器上运行 apache（Mac OS X）

监听 80 端口：

```
Not Found

The requested URL /index.html was not found on this server.

Apache/2.2.22 (Unix) DAV/2 Server at localhost Port 80 
```

我可以停止服务器`sudo apachectl -v stop`并重新启动它，但找不到或更新文档根目录。

尝试了以下方法：

```
sudo apachectl -V | grep -i SERVER_CONFIG_FILE | cut -f2 -d'"' | xargs grep -i '^DocumentRoot' | cut -f2 -d'"' 
```

从 .conf 文件打印出文档根目录并返回：

```
DocumentRoot /var/empty
/Library/WebServer/Documents 
```

尝试为 Web 服务器创建测试文件以提供服务

```
echo 'Hello World1!' > /var/empty/index.html
echo 'Hello World2!' > /Library/WebServer/Documents/index.html 
```

重新启动 apache 但“Hello World”仍然没有显示 404 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:51:37.580

系统偏好设置中的网络共享选项 -> 共享未启用

![在此处输入图像描述](../Images/b47c19fe7e838c5d01105b280736cac4.png)

如果您遇到同样的问题，但您的共享面板没有“网络共享”选项，您可以尝试关注[CLICKONTYLER 博客文章](http://clickontyler.com/blog/2012/02/web-sharing-mountain-lion/)

# php - MySQL WHERE ORDER BY on INSERT

> ID：13049742
> 
> 赞同：0
> 
> 时间：2012-10-24T13:00:06.450
> 
> 标签：php, mysql, forms, insert

我查看了文档，似乎没有找到任何描述如何做我正在尝试的事情。再说一次，我没有找到任何说你不能的东西。

```
$querytotal = "insert into offer_det where where fname = '".$fname."' and lname = '".$lname."' ORDER BY id DESC LIMIT 1 (`t1`, `t2`, `t3`, `t4`)
values($t1, $t2, $t3, $t4)";
$resultotal = mysql_query($querytotal); 
```

我的问题：这是一个合适的 INSERT 语句吗？本质上，我只需要匹配名字和姓氏，然后为它们选择最新的表条目，因为可能有多个表条目具有相同的名字和姓氏。从那里我需要做的就是用我的变量 $t1-4 插入四个值 t1-4。

我看到了这个[链接](https://stackoverflow.com/questions/8747973/where-do-i-insert-the-order-by-in-my-mysql-query)，但它并没有多大意义。

感谢您在这件事上与我相处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:10:05.813

我想你想要这样的东西......

```
$querytotal = "insert into offer_det (t1, t2, t3, t4) " .
"select t1, t2, t3, t4 from offer_det where fname = '$fname' and lname = '$lname' order by id desc limit 1";
$resultotal = mysql_query($querytotal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:03:50.853

你的sql不正确。尝试这个。

重新编辑：

```
$querytotal = "insert into offer_det (`t1`, `t2`, `t3`, `t4`) values(’$t1’, ’$t2’, ’$t3’, ’$t4’) where  id = (SELECT max(id) FROM offer_det where fname = '".$fname."' and lname = '".$lname."')"; 
$resultotal = mysql_query($querytotal); 
```

但是您确定需要插入而不是更新查询吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:11:26.033

我不确定你想要什么，但也许你需要这样的东西

```
 $query = "Insert into offer_det (t1, t2, t3, t4)
               (SELECT $t1, $t2, $t3, $t4 FROM offer_det where
              fname = '".$fname."' and lname = '".$lname."' ORDER BY ID DESC Limit 1)"; 
```

这将根据来自同一个表的 fname 和 lnam 的最后结果在此表中插入 (t1, t2, t3, t4)。

# gzip - 在这种情况下我应该使用 Gzip 吗？

> ID：13049743
> 
> 赞同：1
> 
> 时间：2012-10-24T13:00:09.367
> 
> 标签：gzip, cpu-usage

我有一个安静的 java api，它为 Node.js 客户端提供数据（即 gzip 数据给用户）。问题是，**如果它们在同一台机器上运行**，我应该将数据从 java api 压缩到 node.js 应用程序吗？

我问这个是因为这种情况下，我不必担心网络延迟，但 Gzip 压缩可能会增加 CPU 利用率。

这种情况值得使用 gzip 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T06:21:13.970

如果目标是提高整个系统的速度，那么使用 gzip 跨进程边界传输将不是很有用，特别是当消息大小足够小以适合内存时。如果消息太大而无法放入内存，并且会产生一些分页开销，则 gzip 的好处可能更大，但仍然不足以证明使用它是合理的。Gzip 仅在压缩速度明显大于通信速度时才有意义。进程间通信通常不是这种情况（即使它会产生页面错误开销。）

# javascript - 如何将支持 bean 值传递给 JavaScript？

> ID：13049745
> 
> 赞同：3
> 
> 时间：2012-10-24T13:00:14.353
> 
> 标签：javascript, jsf-2, xhtml, managed-bean

我想读取 JSF 中的支持 bean 值，然后传递给 JavaScript，我可以知道如何做到这一点吗？

支持 bean 示例代码：

```
@ManagedBean(name="enquiry")
@SessionScoped
public class Enquiry {

  public boolean noQuery;

  /** getter and setter **/
} 
```

在 XHTML 示例代码中，我想传递支持 bean 的值，然后`showNoQueryPrompt()`像这样传递：

```
<h:commandLink onClick="showNoQueryPrompt(#{enquiry.noQuery})">
</h:commandLink> 
```

然后在 JavaScript 代码中，我可以读取布尔值来确定是否应该提示。这是代码：

```
<script ...>
   var showNoQueryPrompt(Boolean showPrompt) {

     if( showPrompt == "true" ) {
        alert('No query');
     }
   }
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:20:07.200

至此，您需要了解 JSF 仅生成 HTML 代码，而 JS 是 HTML 的一部分。因此，您需要做的就是相应地编写 JSF/EL 代码以*生成*有效的 HTML/JS 代码。实际上，就像您尝试的那样，使用 EL 在生成的 JavaScript 代码中内联 bean 属性是正确的方法之一。

假设这确实是*真正*的代码，但是您犯了一些语法错误。该`onClick`属性无效。它必须全部小写。否则 JSF 根本不会呈现该属性。

```
<h:commandLink value="link" onclick="showNoQueryPrompt(#{enquiry.noQuery})" /> 
```

JavaScript 没有强类型的概念。函数参数中的`Boolean`类型无效。去掉它。否则你将面临一个很好的 JS 语法错误（在浏览器的 JS 控制台中）。

```
function showNoQueryPrompt(showPrompt) {
   if (showPrompt) {
      alert('No query');
   }
} 
```

请注意，我希望您了解它在调用自己的 commandlink*之前*`action`运行（您现在应该已经了解；JSF 生成 HTML；在浏览器中右键单击页面并*查看源代码*以自己查看）。但是你没有在你的具体问题中提到这一点（更重要的是，你根本没有描述问题中给定代码的具体问题），所以我不能对此给出详细的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T13:07:08.083

[您可以从这里](http://www.mkyong.com/jsf2/how-to-pass-new-hidden-value-to-backing-bean-in-jsf/)尝试该方法

并将您的 bean 字段保存在：

```
<h:inputHidden id="hidden2" value="#{enquiry.noQuery}" /> 
```

然后，使用该字段的值调用您的方法。

# ajax - 显示结果的编辑表单中的自定义按钮

> ID：13049748
> 
> 赞同：0
> 
> 时间：2012-10-24T13:00:16.950
> 
> 标签：ajax, json, asp.net-mvc-3, jqgrid

我对 .NET 和 MVC3 相当陌生——甚至是 Ajax 和 Json，并且正在使用 jqGrid 开发一个 MVC3（剃刀）应用程序，到目前为止它是巨大的（即 jqgrid！）并且已经处理了我抛出的所有问题在它。但是，我有一个出色的功能，我不知道如何完成。

在行的编辑表单中，我放置了一个名为“重置密码”的自定义按钮。我需要 Onclick 事件来调用我的控制器中的一个功能来执行一些逻辑，生成密码，并将新密码返回到屏幕。

谁能告诉我我怎样才能做到这一点？

可能会提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:54:07.330

您可以从操作返回部分视图结果或 json 数据。

[请参阅此处](http://evolpin.wordpress.com/2011/04/26/asp-net-mvc-partial-view-and-ajax-real-world-example/)的部分视图方法

# mysql - MYSQL - 没有足够的结果，更改查询？

> ID：13049755
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:00:36.023
> 
> 标签：mysql

我有一个查询在输入日期时间之前选择 5 行。

当输入日期时间接近表中最早的日期时，我没有得到 5 个结果，有时我得到 4、3、2、1 或没有。

有没有办法告诉它从表中的随机位置选择剩余的缺失结果（比如第一个查询有 3 个结果，所以我需要另外 2 个）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:03:58.373

类似于：

```
select * from 
    (select 1 as resultOrder, *
    from    actualResults
    order by date desc
    limit 5
    union
    select  2 as resultOrder, *
    from    randomResults
    limit 5)
order by resultOrder
limit 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:07:32.097

假设您想要的结果早于 $date_selected，最新的优先，

```
...
ORDER BY
  date_add<$date_selected, date_add, 0) DESC,
  RANDOM()
LIMIT 5 
```

读作：按日期选择所选日期之前的那些，然后选择所选日期之后的那些。

# java - 打开 amarino 连接时 Android 应用程序强制关闭

> ID：13049756
> 
> 赞同：0
> 
> 时间：2012-10-24T13:00:43.943
> 
> 标签：java, android

我是 android 开发的新手，遇到了一个我似乎无法解决的问题。我的 android 应用程序应该能够与我的 arduino 设备通信，向我的设备发送信息和从我的设备检索信息。我已经使用蓝牙设备在两者之间建立了连接，并且我正在使用 amarino 来促进通信。

现在我可以连接 amarino 并发送数据和接收数据，现在我想从我的应用程序中执行此操作。当我输入这一行时，问题就来了：

```
private static final String DEVICE_ADDRESS = "07:12:04:16:68:18"; 
Amarino.connect(this, DEVICE_ADDRESS); 
```

该数字是连接到我的 arduino 设备的蓝牙适配器的 MAC 地址。一旦我在手机上运行我的应用程序，它就会由于意外错误而强制关闭。现在正如我所说，我对 android 有点菜鸟，所以我安装了 logCat 来尝试从中获取一些日志信息。我从中得到的只是这个有点无益的错误消息：

> com.example.projectgreetv3/.StartingPlace 10-24 15:22:55.140 E/AndroidRuntime(4906): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com.example.projectgreetv3/com.example.projectgreetv3.StartingPlace}： java.lang.ClassNotFoundException: com.example.projectgreetv3.StartingPlace 在加载器 dalvik.system.PathClassLoader[/data/app/com.example.projectgreetv3-1.apk] 10-24 15:22:55.140 E/AndroidRuntime(4906) ：引起：java.lang.ClassNotFoundException：com.example.projectgreetv3.StartingPlace in loader dalvik.system.PathClassLoader[/data/app/com.example.projectgreetv3-1.apk] 10-24 15:22:55.148 W/ ActivityManager(539): 强制完成活动 com.example.projectgreetv3/.StartingPlace 10-24 15:21:51.726 I/UinboxLogger(4585): [UinboxReceiver] onReceive() >> intent.getData() : com.example.projectgreetv3 10-24 15：21:52.382 I/UninstallAppProgress(4575): 完成卸载 pkg: com.example.projectgreetv3 10-24 15:22:52.523 D/PackageManager(539): 扫描包 com.example.projectgreetv3

我希望有人可以帮助我解决这个问题，因为我已经束手无策了。

有关以下信息的更多信息：- Arduino：- [http://www.arduino.cc/](http://www.arduino.cc/) - Amarino： [http ://www.amarino-toolkit.net/](http://www.amarino-toolkit.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:32:03.827

如果您进一步查看堆栈跟踪（在 logcat 中），您可能会发现此崩溃的原因是 NetworkOnMainThreadException。（如果您运行的是 Android 3.0 或更高版本）

请确保您在单独的线程 (Thread/ASyncTask) 上进行所有网络通信。

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# c++ - 在 C++ 中创建结构数组

> ID：13049769
> 
> 赞同：6
> 
> 时间：2012-10-24T13:01:28.603
> 
> 标签：c++, arrays, struct

我在 C++ 中有一个新手问题。
我有一个`Edge`定义如下的结构：

```
struct Edge {
    int position[4];
    int average;
}; 
```

现在我需要创建很多这样的结构，并为此创建了一个辅助方法，它根据一些参数创建这些结构的数组：

```
Edge* createEdges(int some_parameters){
    Edge *edges = new Edge[8];

    for(int i = 0 ; i < 8; i++){
        Edge edge;
        edge.position[0] = 1; //fill the rest of the edge array in the same manner
        edge.average = 10;

        edges[i] = edge;
    }

    return edges;
} 
```

但是，当我现在打电话时：`Edge *edges = createEdges(int some_parameters)`Edge 数组中没有合理的数据（超出范围？）。

我想我在这里混合了一些东西，但如果我可以在不诉诸数据结构的情况下完成这项工作，我会更喜欢`vector`。这是处理这个问题的正常方式还是我应该自己声明边缘数组并将其传递给辅助方法来填充它？

**编辑：**

首先，我要感谢大家的评论/提示/提示/建议/......他们帮助我找到了我很容易忽略的问题。
在我看到代码应该可以工作的回复之后，我也测试了简化的代码（我应该在第一个地方做的事情），令人惊讶的是，它工作了！因此，我检查了为什么我的真实代码不起作用而简化版本起作用。
我的真实代码如下所示：

```
Edge* createEdges(int some_parameters){
     Edge* edges = new Edge[8];
     if(some_parameter != 0){
          //create the edges as in my 1st snippet
          return NULL; //doh, should return edges here !
     } else { 
          return NULL;
     }
} 
```

我没有看到我只是返回错误值（NULL）的原因是因为调试器向我显示了一些`0xf6f6f6`带有一些负值的地址`edge.position`（我不太明白，它应该只是显示给我`0x000000`，也许我是只是想象事物）。

总而言之，这是一个重要的教训，为什么在凌晨 3 点之后永远不要编码，不会有任何好处！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:07:52.757

这是 C++ 使用`std::vector`：

```
std::vector<Edge> createEdges(int some_parameters){
    std::vector<Edge> edges;

    for(int i = 0 ; i < 8; i++){
        Edge edge;
        edge.position[0] = 1;
        edge.average = 10;
        edges.push_back(edge);
    }

    return edges;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:19:31.950

你在这里的工作正常。我觉得你忘记的是，当你打电话时

```
Edge *edges = createEdges(int some_parameters) 
```

该边缘变量是指向列表中第一个元素的指针。如果你要这样做：

```
edges[0] 
```

或者：

```
edges[1] 
```

您会看到这些是不同的值，您现在需要循环访问数组。请记住，您不会在循环期间通过数组的末尾。这就是大多数人说使用向量的原因，因为您可以通过迭代器使用更多的安全功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T13:19:44.450

欢迎使用 C++！用于创建类实例（C++ 中的结构是所有字段都是公共的类）的辅助方法称为构造函数。下面是我如何使用构造函数创建边缘类的实例。

```
class Edge {
public:
    int position[4];
    int average;
    Edge();
};

Edge::Edge() //constructor
{
    position[0] = 1;//fill the rest of the edge array in the same manner
    average = 10;
}

int main()
{
    Edge* myEdge = new Edge(); //constructor called
    Edge* myEdges[8];
    for (int i = 0; i < 8; i++)
    {
        myEdges[i] = new Edge();
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T13:16:14.373

这是一个稍微修改的版本，它在函数中创建边，并返回一个包含所有创建边的向量。

```
#include <iostream>
#include <vector>

struct Edge {
    int position[4];
    int average;
};

std::vector< Edge > createEdges(int some_parameters){
    std::vector< Edge > edges( 8 );

    for(int i = 0 ; i < 8; i++){
        const Edge edge{ { 1, 0, 0, 0 }, 10 };

        edges[i] = edge;
    }

    return edges;
}

int main()
{
    auto e( createEdges(5));

    std::cout<<e[0].average<<std::endl;
} 
```

有一些修改：

1.  我没有分配边数组并返回指针，而是返回向量
2.  创建和初始化边缘对象的方式（我认为这是所要求的）

# expressionengine - ? 从 ExpressionEngine 2.2.1 升级到 ExpressionEngine 2.5.3 后，ACT 不再工作

> ID：13049774
> 
> 赞同：6
> 
> 时间：2012-10-24T13:01:47.890
> 
> 标签：expressionengine

我完全不知道为什么在升级到 EE 2.5.3 后我的 EE 安装突然不允许某些标准 ?ACT 例如搜索 (?ACT=2)、发送联系表或注销 (?ACT=10)前端。

操作被重定向到主页。

升级后没有安装额外的模块。

我的 htaccess 文件只包含一个基本的重定向

```
 RewriteEngine On 
    RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteCond %{REQUEST_FILENAME} !-d 
    RewriteRule (.*) index.php?$1 [L] 
```

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T15:05:38.950

您可能应该在 .htaccess 中包含以下内容 - 这很可能是原因。

`RewriteRule (.*) /index.php/$1 [L]`

更换您的线路：

`RewriteRule (.*) index.php?$1 [L]`

与上述，它应该工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T14:57:59.630

通常在我的 .htaccess 中有这三行

```
RewriteCond %{QUERY_STRING} !^(ACT=.*)$ [NC]
RewriteCond %{QUERY_STRING} !^(URL=.*)$ [NC]
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# opencv - 从相机读取多帧后，OpenCV 突然总是无法读取帧。我该如何诊断？

> ID：13049777
> 
> 赞同：4
> 
> 时间：2012-10-24T13:01:52.423
> 
> 标签：opencv

我运行一个类似于这个问题的程序：[https ://stackoverflow.com/a/8719192/26070](https://stackoverflow.com/a/8719192/26070)

```
#include <opencv/highgui.h>

#include <iostream>

/** @function main */
int main( int argc, char** argv )
{
    cv::VideoCapture vcap;
    cv::Mat image;

    const std::string videoStreamAddress = "rtsp://192.0.0.1:8081/live.sdp";

    //open the video stream and make sure it's opened
    if(!vcap.open(videoStreamAddress)) {
        std::cout << "Error opening video stream or file" << std::endl;
        return -1;
    }

    for(;;) {
        if(!vcap.read(image)) {
            std::cout << "No frame" << std::endl;
            cv::waitKey(500);
        } else {
            cv::imshow("Output Window", image);
        }
        if(cv::waitKey(1) >= 0) break;
    }
} 
```

程序在一定时间内（大约一分钟左右）运行良好，然后对 read() 的调用（来自 cv::VideoCapture 的方法）总是返回`false`。

输出如下：

```
[mpeg4 @ 00da27a0] ac-tex damaged at 22 7
[mpeg4 @ 00da27a0] Error at MB: 309
No frame
No frame
No frame 
```

注意：前两行并不总是存在。

那么，如何确定问题的根源是什么？

# c# - 处理表适配器和数据集的正确方法是什么？

> ID：13049784
> 
> 赞同：1
> 
> 时间：2012-10-24T13:02:21.987
> 
> 标签：c#, database, idisposable

我一直在从事一个使用表适配器和数据集来访问访问数据库的项目。我即将完成并从 Visual Studio 运行代码分析，它提出了一些关于需要在我使用这些方法的特定类上实现 IDisposable 的错误。虽然我已经查看了一些关于使用 dispose 方法或使用 using 块的不同内容，但我不确定如何使其工作。数据集和表适配器被创建为供整个类使用的全局变量，许多类将调用其他类，这些类也将使用不同的表适配器和数据集。我试过创建一个 Dispose 方法，但我不知道什么时候调用它，我想知道是否在错误的时间调用它会导致我的程序崩溃。

```
 using System;
   using System.Collections.Generic;
   using System.Linq;
    using System.Text;

 namespace recipeDataBase 
 {
     class NewRecipe : IDisposable
     {
         recipiesNewDataSet recipeDataSet = new recipiesNewDataSet();
         recipiesNewDataSetTableAdapters.RecipeTableAdapter recipeTableAdapter = new      recipiesNewDataSetTableAdapters.RecipeTableAdapter();
    recipiesNewDataSetTableAdapters.RecipeIngredientTableAdapter recipeIngredientTableAdapter = new recipiesNewDataSetTableAdapters.RecipeIngredientTableAdapter();
    recipiesNewDataSetTableAdapters.RatingTableAdapter ratingTableAdapter = new recipiesNewDataSetTableAdapters.RatingTableAdapter();
    recipeDataBase.recipiesNewDataSetTableAdapters.IngredientTableAdapter ingredientTableAdapter = new recipiesNewDataSetTableAdapters.IngredientTableAdapter();
    private RecipeInfo newRecipe;
    private RatingNum originalRatingNum;
    private RatingNum newRating;
    private RecipeInfo originalRecipe;
    private string[] ingredients;

    public NewRecipe(RecipeInfo incommingNewRecipe, RatingNum IncommingNewRating, string[] incommingIngredients)
    {
        newRecipe = incommingNewRecipe;
        newRating = IncommingNewRating;
        ingredients = incommingIngredients;
        CreateNewRecipe();
        UpdateNewRecipe();
    }
    public void CreateNewRecipe()
    {
        originalRatingNum = new RatingNum();
        originalRecipe = new RecipeInfo();
        originalRatingNum.cookingTime = 0;
        originalRatingNum.easeOfCooking = 0;
        originalRatingNum.familyRating = 0;
        originalRatingNum.healthRating = 0;
        originalRatingNum.userRating = 0;

        ratingTableAdapter.Fill(recipeDataSet.Rating);
        ratingTableAdapter.Insert(originalRatingNum.userRating, originalRatingNum.familyRating, originalRatingNum.healthRating, originalRatingNum.easeOfCooking, originalRatingNum.cookingTime);
        Query getNewRecipeNumbers = new Query();
        int newRatingNumber = getNewRecipeNumbers.newRatingNum();

        originalRatingNum.ratingNum = newRatingNumber;
        newRating.ratingNum = newRatingNumber;
        newRecipe.ratingNum = newRatingNumber;
        originalRecipe.recipeName = "newRecipe";
        originalRecipe.nationality = "newRecipe";
        originalRecipe.recipeEvent = "newRecipe";
        originalRecipe.source = "newRecipe";
        originalRecipe.type = "newRecipe";
        originalRecipe.servings = "0";
        originalRecipe.ratingNum = newRatingNumber;

        recipeTableAdapter.Fill(recipeDataSet.Recipe);
        recipeTableAdapter.Insert(originalRecipe.recipeName, originalRecipe.nationality, originalRecipe.recipeEvent, originalRecipe.source, originalRecipe.type, originalRecipe.servings, originalRecipe.ratingNum); 
        int newRecipeNum = getNewRecipeNumbers.newRecipeNum();
        newRecipe.recipeNum = newRecipeNum;
        originalRecipe.recipeNum = newRecipeNum;
        recipeDataSet.AcceptChanges();
    }

    public void UpdateNewRecipe()
    {
        UpdateRatingNum updateRatingNum = new UpdateRatingNum(originalRatingNum, newRating);
        UpdateRecipe updateRecipe = new UpdateRecipe(newRecipe, originalRecipe);

        UpdateIngredients updateIngredients = new UpdateIngredients(ingredients);
        UpdateRecipeIngredient updateRecpeIngredients = new UpdateRecipeIngredient(ingredients, newRecipe.recipeNum);
        recipeDataSet.AcceptChanges();

    }

    public void Dispose()
    {
        ratingTableAdapter.Dispose();
        recipeTableAdapter.Dispose();
        recipeTableAdapter.Dispose();
        ingredientTableAdapter.Dispose();
        recipeDataSet.Dispose();
        throw new NotImplementedException();
    }
} 
```

}

如您所见，我确实实现了 Idisposable 并使用自动创建的方法将所有表适配器和数据集放入其中以进行处置，但是我如何使用它以及在哪里使用它？

谢谢您的帮助

克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:05:36.280

正常模式：

```
using (var nr = new NewRecipe() )
{
   ...
} 
```

但这里有一些注意事项：

*   DataSet 和 DataAdapter 上的 IDisposable 接口是假的，跳过它们不会损失太多。
*   您的类具有存储库和域对象的双重角色。考虑将其分为 2 个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:38:23.123

**如其他答案中所述，使用**实现的对象的正确方法是`IDisposable`使用 using 块，如下所示：

```
using (var recipe = new NewRecipe())
{
    //put your code that uses recipe here
} 
```

我想指出的是 IDisposable 模式的正确**实现**。请注意，在[MSDN 文章中有一个 IDisposable 接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的完整示例。

```
class Recipe : IDisposable
{
    bool isDisposed = false;
    TableAdapter myDisposableMember;

    public void Dispose()
    {
        Dispose(true);
        GC.SupressFinalize(this);
    }

    public virtual Dispose(bool isDisposing)
    {
        if (!isDisposed) //only clean up once
        {
            //clean up unmanaged resource here
            //in this case we don't have any

            //clean up managed resources (IE those that implemetn IDisposable only if
            //Dispose() was called (not the case when invoked during finalisation)
            if (isDisposing)
            {
                if(myDisposableMember == null)
                {
                    myDisposableMember.Dispose()
                    myDisposablemember = null;
                }
            }

            //mark this instance as cleaned up
            isDisposed = true;
        }
    }

    //if our class has any unmanaged resources you implement a destructor to guarantee
    //that they're freed. We don't have any here so we don't implement it.
    //~Recipe()
    //{
    //    Dispose(false);
    //}
} 
```

另请注意，在完成过程中您永远不应该抛出异常（IE: `~Recipe()`）。因此`Dispose(bool)`永远不应该抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:09:37.127

正确的使用方法是`using`。只是不要把它拿在手里——

```
using(DataAdapter ratingTableAdapter = new DataAdapter())
{

} 
```

*一旦代码从 using 块中出来，*ratingTableAdapter将被释放。**

# c# - 从键盘读取

> ID：13049790
> 
> 赞同：-2
> 
> 时间：2012-10-24T13:02:33.287
> 
> 标签：c#, focus, keypress

`C#`我用两个文本框和按钮制作了一个复杂的计算器。我想只使用键盘来操作计算器。我将相同的代码放入`textbox1_Keypress`,`textbox2_Keypress`和`Form_Keypress`.

1.  如果焦点在任何文本框中，则代码运行良好，但它会在文本框中写入算术符号，我必须手动擦除它才能输入另一个值。如何让它不显示在文本框中？
2.  虽然我也使用了相同的代码，`Form_keypress`但每当我离开文本框时，代码就不起作用。

关于如何随时随地为键盘立即做出表单响应的任何建议，无论焦点在哪里？

```
private void textBox1_TextChanged(object sender, EventArgs e)
    {

        if (textBox1.Text != "")
        {
            double d;

            if (flag == 1)
            {
                Double.TryParse(textBox1.Text, out d);
                getOperand.Real = d;
            }
            else if (flag == 2)
            {
                Double.TryParse(textBox1.Text, out d);
                getOperand.Magnitude = d;
            }

        }
    }

    private void textBox2_TextChanged(object sender, EventArgs e)
    {
        if (textBox2.Text != "")
        {
            double d;
            if (flag == 1)
            {
                Double.TryParse(textBox2.Text, out d);
                getOperand.Imag = d;
            }
            else if (flag == 2)
            {
                Double.TryParse(textBox2.Text, out d);
                getOperand.Angle = d;
            }

        }
    }

 private void textBox2_KeyPress(object sender, KeyPressEventArgs e)
        {

        if (e.KeyChar == '+')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 1;
        }
        else if (e.KeyChar == '-')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 2;
        }
        else if (e.KeyChar == '*')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 3;
        }
        else if (e.KeyChar == '/')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 4;
        }
        else if (e.KeyChar == '=')
        {
            operand2.Real = getOperand.Real;
            operand2.Imag = getOperand.Imag;

            switch (flag1)
            {
                case 1:
                    operand1 = operand1 + operand2;
                    break;
                case 2: operand1 = operand1 - operand2;
                    break;
                case 3:
                    operand1 = operand1 * operand2;
                    break;
                case 4:
                    operand1 = operand1 / operand2;
                    break;
            }
            if (flag == 1)
            {
                textBox1.Text = string.Format("{0:F2}", operand1.Real.ToString());
                textBox2.Text = string.Format("{0:F2}", operand1.Imag.ToString());
            }
            else if (flag == 2)
            {
                textBox1.Text = string.Format("{0:F2}", operand1.Magnitude.ToString());
                textBox2.Text = string.Format("{0:F2}", operand1.Angle.ToString());
            }

            //   MessageBox.Show(string.Format("{0:D2}", operand1.Real.ToString()));

            //  MessageBox.Show(string.Format("{0:D2}", operand1.Imag.ToString()));

            listBox1.Items.Add(operand1);
        }
    }

    private void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {

        if (e.KeyChar == '+')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 1;
        }
        else if (e.KeyChar == '-')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 2;
        }
        else if (e.KeyChar == '*')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 3;
        }
        else if (e.KeyChar == '/')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 4;
        }
        else if (e.KeyChar == '=')
        {
            operand2.Real = getOperand.Real;
            operand2.Imag = getOperand.Imag;

            switch (flag1)
            {
                case 1:
                    operand1 = operand1 + operand2;
                    break;
                case 2: operand1 = operand1 - operand2;
                    break;
                case 3:
                    operand1 = operand1 * operand2;
                    break;
                case 4:
                    operand1 = operand1 / operand2;
                    break;
            }
            if (flag == 1)
            {
                textBox1.Text = string.Format("{0:F2}", operand1.Real.ToString());
                textBox2.Text = string.Format("{0:F2}", operand1.Imag.ToString());
            }
            else if (flag == 2)
            {
                textBox1.Text = string.Format("{0:F2}", operand1.Magnitude.ToString());
                textBox2.Text = string.Format("{0:F2}", operand1.Angle.ToString());
            }

            //   MessageBox.Show(string.Format("{0:D2}", operand1.Real.ToString()));

            //  MessageBox.Show(string.Format("{0:D2}", operand1.Imag.ToString()));

            listBox1.Items.Add(operand1);
        }

    }

    private void textBox2_KeyDown(object sender, KeyEventArgs e)
    {

    }

    private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {

        if (e.KeyChar == '+')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 1;
        }
        else if (e.KeyChar == '-')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 2;
        }
        else if (e.KeyChar == '*')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 3;
        }
        else if (e.KeyChar == '/')
        {
            operand1.Real = getOperand.Real;
            operand1.Imag = getOperand.Imag;
            flag1 = 4;
        }
        else if (e.KeyChar == '=')
        {
            operand2.Real = getOperand.Real;
            operand2.Imag = getOperand.Imag;

            switch (flag1)
            {
                case 1:
                    operand1 = operand1 + operand2;
                    break;
                case 2: operand1 = operand1 - operand2;
                    break;
                case 3:
                    operand1 = operand1 * operand2;
                    break;
                case 4:
                    operand1 = operand1 / operand2;
                    break;
            }
            if (flag == 1)
            {
                textBox1.Text = string.Format("{0:F2}", operand1.Real.ToString());
                textBox2.Text = string.Format("{0:F2}", operand1.Imag.ToString());
            }
            else if (flag == 2)
            {
                textBox1.Text = string.Format("{0:F2}", operand1.Magnitude.ToString());
                textBox2.Text = string.Format("{0:F2}", operand1.Angle.ToString());
            }

            //   MessageBox.Show(string.Format("{0:D2}", operand1.Real.ToString()));

            //  MessageBox.Show(string.Format("{0:D2}", operand1.Imag.ToString()));

            listBox1.Items.Add(operand1);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:43:22.020

在 KeyPress 事件中，您必须将[KeyPressEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.handled.aspx)`Handled`的属性设置为 true 以避免通常的事件处理（即避免将“+”附加到您的 TextBox）。

对于 Form1_KeyPress 方法，“不起作用”的确切含义还不是很清楚。我想正在发生的事情是代码永远不会执行。这是因为 KeyPress 事件总是被发送到位于表单上的控件之一（我想你不只有 2 个文本框）。这意味着，如果您希望无论焦点在哪里都具有相同的行为，那么您必须注册到表单上每个控件的 KeyPress 事件。

顺便说一句，我会重构只有一个方法处理 KeyPress 的代码，当您需要根据获得输入的控件做一些稍微不同的事情时检查发送者对象。

# c# - 如何在 C# 中格式化美式和欧式数字？

> ID：13049791
> 
> 赞同：1
> 
> 时间：2012-10-24T13:02:35.280
> 
> 标签：c#, .net, formatting

我希望能够以美国和欧洲风格格式化一个数字（双精度型）。根据用户的选择，数字 123123123.456 应格式化为：

*   123,123,123.456 // 美式格式
*   123.123.123,456 // 欧洲格式

另一个要求是能够设置小数位数。我相信我可以使用`double.ToString(string format, IFormatProvider provider)`和 put `"F2"`as the`format`但是 msdn 似乎并没有说明太多关`IFormatProvider`​​于解释我可以自己实现它的信息。

```
double x = 123123123.456
IFormatProvider myFormatProvider = whatToDo ?
x.ToString("F2", myFormatProvider); // I need 2 decimal digits hence F2 
```

是否有任何预制编号的 IFormatProvider 对象可以用于该目的？或者也许还有其他解决方案，我走错路了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T13:05:17.987

```
IFormatProvider myFormatProvider = new CultureInfo("en-us").NumberFormat; 
```

或者

```
IFormatProvider myFormatProvider = new CultureInfo("fr").NumberFormat; 
```

（这里只使用法国作为文化，但它几乎可以是任何欧洲国家）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:06:50.500

IFormatProvider 可以是 CultureInfo：

```
double x = 123123123.456
System.Globalization.CultureInfo EnglishCulture = new System.Globalization.CultureInfo("en-EN");
x.ToString("F2",EnglishCulture); 
```

或者

```
x.ToString("F2",EnglishCulture.NumberFormat); 
```

# java - Rubymine - 在 mac os 上找不到 Java 运行时，但它在终端中

> ID：13049796
> 
> 赞同：2
> 
> 时间：2012-10-24T13:03:00.593
> 
> 标签：java, macos, rubymine

我正在运行 Mac OS X 10.7.4，并且刚刚安装了 java 1.7。

如果我从命令行运行 java -version，我会得到：

> java版本“1.7.0_09”

但我正在尝试安装 RubyMine，我收到以下消息：

> 要打开“RubyMine”，您需要一个 Java 运行时。您现在要安装一个吗？

如果我在弹出此消息时单击安装，则它会抱怨并说

> 该软件目前不可用

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:07:16.340

RubyMine 需要 Apple Java 1.6 才能运行，它不适用于 JDK 1.7。您需要从 Apple 安装 Java 1.6。

如果安装不起作用，[请检查此](http://mattryall.net/blog/2011/08/manually-installing-java-on-os-x-lion)。

# opencv - 查看仿射变换的结果

> ID：13049800
> 
> 赞同：0
> 
> 时间：2012-10-24T13:03:16.250
> 
> 标签：opencv, affinetransform

我试图找出原因，当我在 OpenCV 中的图像上应用仿射变换时，它的结果在预览窗口中不可见，但整个窗口都是黑色的。我怎样才能找到解决这个问题的方法，以便我无论应用了何种变换，都可以在窗口中查看我的变换图像（仿射变换的结果）吗？
更新：我认为发生这种情况是因为所有转换都是相对于坐标系的原点（图像的左上角）计算的。虽然对于旋转，我可以指定旋转的中心，并且我可以查看结果，但当我执行缩放时，我无法控制转换后的图像的去向。是否可以以某种方式移动坐标系以使图像适合窗口？

Update2：我有一个图像，其中某个位置仅包含 ROI（图像的其余部分为黑色），我需要对其应用一组仿射变换。为了让事情变得更简单并查看每个单独变换的效果，我一个一个地应用了每个变换。我注意到的是，每当我移动（平移）图像以使 ROI 的中心位于坐标系的中心（视图窗口的左上角）时，所有仿射变换都会在不移动的情况下正确执行。但是，通过在坐标系的中心平移 ROI 的中心，ROI 的上半部分和左半部分仍然被切出当前视图窗口。如果我将 ROI 的中心点移动到视图窗口中的另一个点（例如窗口中心），则会出现以下类型的仿射变换： A=[a 0 0; 0 b 0] (A 是 2x3 矩阵，warpAffine 函数的参数）将图像 (ROI) 移动到视图窗口之外（如果 ROI 的中心位于左上角，则不会发生这种情况）。如何修改仿射变换以使图像不会移出其位置（与 ROI 中心位于坐标系中心时的行为相同）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:41:37.753

如果您希望能够应用任何仿射变换，您将无法始终查看它。一个更好的主意可能是手动将您的变换应用于正方形的 4 个角，然后查看这 4 个点最终的坐标。这将告诉您图像的去向。

如果您有多个变换，只需将它们组合成一个变换即可。如果你有 3 个变换

```
[A],[B],[C] 
```

用 A, 然后 B, 然后 C 变换图像相当于将图像变换一次

```
[C]*[B]*[A] 
```

如果您的变换在 2x3 矩阵中，只需通过添加将它们转换为 3x3 矩阵

```
[0,0,1] 
```

作为新的底行，然后将 3x3 矩阵相乘，完成后底行将保持不变，然后将其放下以获得新的组合仿射变换

**更新** 如果您想对对象应用变换，就好像该对象在其他地方一样。您可以组合 3 个变换。首先使用仿射变换 [A] 将对象转换到您想要转换的位置（在您的情况下为坐标系的中心）。然后应用您的缩放变换 [B]，然后平移回到您开始的位置。翻译回来应该是[A]的倒数。这意味着您的最终转换将是

```
final_transform = [A].inv()*[B]*[A] 
```

进行矩阵乘法时，操作顺序从右到左读取。

# jquery - 正则表达式，允许文本之间有空格

> ID：13049801
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:03:16.870
> 
> 标签：jquery, regex, jquery-validate

我有以下验证代码，其中它仅过滤字母数字+空格文本...但是在测试两个带有空格的字母数字单词时，它失败了...

```
$.validator.addMethod("alphaNumeric", function(value, element) {
    $(element).val(value.replace(/^\s+|\s+$/g,''));
    return /^[a-zA-Z0-9 ]*$/.test(value);
}, " AlphaNumeric Only!"); 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:12:32.907

您更改了输入值，但它不是您正在检查验证的值：

```
$.validator.addMethod("alphaNumeric", function(value, element) {
    value = value.replace(/^\s+|\s+$/g,'');
    $(element).val(value); //element.value = value
    return /^(?:(?:[a-zA-Z0-9]+ *)+)$/.test(value);
}, " AlphaNumeric Only!"); 
```

我不知道替换/修剪方法应该在验证规则中。但这应该有效。

# ruby-on-rails - Rails：不带括号的错误消息

> ID：13049804
> 
> 赞同：1
> 
> 时间：2012-10-24T13:03:25.187
> 
> 标签：ruby-on-rails

如何在没有括号和引号的情况下显示 Rails 错误消息？

当出现错误消息时，它看起来像：

```
["please fill out domain"]["please fill out email"] 
```

如何删除括号和引号？

**模型**

```
validates :domain,
          :presence => { :message => 'please fill out domain'},
          :uniqueness => { :message => 'domain already registered', :case_sensitive => true }
validates :email,
          :presence => { :message => 'please fill out email'},
          :uniqueness => { :message => 'email already registered', :case_sensitive => true } 
```

**控制器**

我指定了模板的 url（请参阅`format.html`），因为我使用的是不同的控制器

```
def create

  respond_to do |format|
    # save form data
    @login = Login.new(params[:login])

    # if validation fails, throw error messages
    if !@login.save
      flash[:error] = @login.errors.to_a if @login.invalid?
    end

    # render landingpage
    format.html { render :template => 'landingpage/index' }
    format.js { render :action => 'create' }

  end

end 
```

**创建.js.erb**

```
<% if @login.errors.any? %>
  // error

  var error_string = "";
  <% @login.errors.values.each do |msg| %>
    error_string += "<%= msg %>";
  <% end %>

  $("#flash_messages").html(error_string);

<% else %>
 // no error
<% end %> 
```

**看法**

```
<div id="flash_messages"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:12:58.793

当您遍历完整的错误消息时，您将收到干净的文本

在您的 create.js.erb 中，编写如下迭代：

```
@login.errors.full_messages.each do |msg| 
```

# php - 嵌套集中兄弟姐妹前面的mySql强制项

> ID：13049811
> 
> 赞同：0
> 
> 时间：2012-10-24T13:03:36.647
> 
> 标签：php, mysql, nested-sets

我使用嵌套集模型将分层数据（类别）存储在 mySql 数据库中。

一切正常，只有我现在需要能够向任何节点（`force_to_top`）添加属性，这会将节点设置为暂时强制到其兄弟节点的顶部，而且我不能 100% 确定如何在不物理更改的情况下执行此操作`lft`和`rgt`价值观。

打开节点`force_to_top`属性时，我不想将原始值`lft`和`rgt`值存储在其他位置，更改`lft`和`rgt`值以将节点移动到正确位置，然后在删除属性后重置它们的原始值`lft`和`rgt`值。`force_to_top`我认为这会进一步导致严重的问题，而且这似乎是一种非常迂回的做事方式？（如果这实际上是最简单的方法，请纠正我！但我想找到另一个，最好只使用 sql 不更新数据库中的任何值）

我想知道是否有可能根据`force_to_top`属性以某种方式操纵 sql 的输出？

例如，如果我们有以下结构

```
 Cars
        |
-----------------
|       |       |
Audi    Ford    VW 
```

这将具有以下 lft/rgt/force_to_top 值：

```
node    lft    rgt  force_to_top
Cars    1      8    false
Audi    2      3    false
Ford    4      5    false
VW      6      7    false 
```

当我们输出“Cars”的子节点时，我们会得到：

```
Audi
Ford
VW 
```

但是假设节点'VW'的`force_to_top`属性设置为`true`，我真正需要的是'Cars'的子节点的输出现在是：

```
VW
Audi
Ford 
```

正如我所提到的，我考虑过存储原始值`lft`和值并在删除属性`rgt`后重置它们。`force_to_top`不这样做的好处是关闭`force_to_top`属性的速度，这意味着除了实际将`force_to_top`值`false`再次设置为之外没有数据操作，并且节点将立即回落到其原始位置。并且也意味着我不需要为每个节点的原始值`lft`和值创建存储区域/额外的表/额外的字段。`rgt`

在获取结果后，我也考虑过在 php 中执行此操作，但对于大型数据集可能会真正减慢速度。

我最初必须将`force_to_top`节点设置为所有内容的顶部，这非常简单`ORDER BY force_to_top, lft`，但是现在只强制到其兄弟节点的顶部要复杂得多，因为节点可能位于庞大层次结构的中心。

任何建议或正确方向的观点将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:01:24.503

以防万一有人在这里遇到类似的问题（非常不可能！）：

最后，我能找到实现此功能的唯一方法是存储类别的当前值`parent_id`以及`nearest_sibling_id`何时将其`force_to_top`值设置为 true。

这样，我可以通过更新其`lft`和`rgt`值将类别移动到其父级的顶部，然后当`force_to_top`被删除时，我可以检查`nearest_sibling_id`仍然存在，并且它仍然在原始`parent_id`. 如果是这样，请将类别移回其`nearest_sibling_id`;旁边。如果不是，只需将类别移至其原始类别的底部，`parent_id`因为我们无法确定它最初的真正位置，因为我们的`nearest_sibling_id`值已过时。

# vb.net - Visual Studio 2010 不再显示错误

> ID：13049814
> 
> 赞同：0
> 
> 时间：2012-10-24T13:03:46.967
> 
> 标签：vb.net, visual-studio-2010

我已经有 2 周没有使用我的 Visual Studio 2010 了。甚至没有碰我的电脑，现在我正在尝试做一个项目。加载到项目中并且没有显示任何错误（甚至在错误列表窗口中也没有）。当我单击构建时，它说：构建成功（但对我来说有点太快了）。我试图重新加载引用，甚至创建了一个新项目并将代码复制到其中。这些都不起作用。如果我然后运行该项目，我会收到当前错误：

```
A first chance exception of type 'System.MissingMemberException' occurred in Microsoft.VisualBasic.dll
System.MissingMemberException: Der öffentliche Member Domains für den Typ Iref wurde nicht gefunden.
bei Microsoft.VisualBasic.CompilerServices.LateBinding.LateGet(Object o, Type objType, String name, Object[] args, String[] paramnames, Boolean[] CopyBack)
bei Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateGet(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack)
bei myprogram.myfunction() in projectpath/myprogram.vb:Line 132. 
```

Iref 是一个参考，我 100% 确定 Domains 成员仍然存在于这个参考中。任何人有任何想法我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:34:38.797

我遇到了同样的问题。我通过将**Active Solution Platform**更改为**Mixed Platform**解决了这个问题。为此，请转到配置管理器并在右上角设置活动解决方案平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:57:53.950

通过将 Option Strict 设置为 ON 来解决此问题。不是最好的解决方案，但同时会做

# asp.net - asp.net menuitem 添加类

> ID：13049816
> 
> 赞同：0
> 
> 时间：2012-10-24T13:03:52.720
> 
> 标签：asp.net

大家好我有一个MenuItem，我使用以下代码动态添加childst

```
MenuItem c1 = new MenuItem("text","value");
parent.ChildItems.Add(c1); 
```

但是我需要同时向它添加一个css类，例如

```
c1.cssClass = "cssclass";
or 
c1.attributes.Add("Class","cssclass"); 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:14:42.953

`MenuItem`没有 CSS 类属性，而是将类添加到父级`Menu`：

```
Menu menu = new Menu();
menu.CssClass = "myclass"; 
```

如果您想动态地将类添加到菜单中，请尝试创建一个辅助方法（[C# 中的扩展方法](http://www.codeproject.com/Articles/31050/String-Extension-Collection-for-C)）：

```
public static class MenuExtension
{
    public static void AddCSSClass(this Menu menu, string className)
    {
        // additional code here to tidy / remove duplicates etc.

        menu.CssClass = string.Concat(menu.CssClass, " ", className);
    }
} 
```

由于我们的`Menu`渲染，`UL`您可以使用 CSS 选择器将样式级联到所有子`LI`元素：

```
.myclass > li {
    // your attributes
} 
```

或者，特定`LI`元素（如 nth-child 等仅在 CSS 3.0 中受支持）：

```
.myclass > li:first-child {
    // your attributes
}

.myclass > li:nth-child(1) {
    // your attributes
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T13:18:27.840

你可以试试`MenuItemStyle property`你的菜单

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.menuitemstyle.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.menuitemstyle.aspx)

# excel - 根据另一列vba excel中的条件复制唯一列表

> ID：13049817
> 
> 赞同：1
> 
> 时间：2012-10-24T13:03:55.450
> 
> 标签：excel, vba

我想使用 VBA 根据另一列中的条件提取一个唯一的有序列表。所以，我有两列A，B。

```
A    B
========
a   FALSE
b   FALSE
c   TRUE
a   TRUE
b   FALSE
c   TRUE 
```

应该产生一个列表

```
C
==
a
c 
```

我对 VBA 非常非常陌生，因此将不胜感激。

哦，第二个列表将随着第一个列表的每次更改而更新，因此需要擦除以确保没有剩余，例如，如果第二个“a”设置为 FALSE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:02:41.717

这是一种仅限公式的方法。是否实用取决于您的情况，但我已经使用类似于原始问题中的数据样本对其进行了测试：

1.  在电子表格顶部插入一个空白行作为标题行。
2.  创建一个新的公式列，仅当列“B”为真时才会列出列“A”的元素。例如，将以下公式放在单元格 D2 中，然后将其复制下来：`=IF(B2,A2,"")`。
3.  现在您可以应用上面 t.thielemans 链接的第二页中描述的技术。

这种方法的一个潜在缺点是，当 B 列为“FALSE”时，公式返回的空白单元格不会消失 - 您的过滤视图中仍然会有空白结果。

为方便起见，我将在此处复制参考： [Getting unique values in Excel by using formulas only](https://stackoverflow.com/questions/1429899/getting-unique-values-in-excel-by-using-formulas-only)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:43:40.050

你觉得这怎么样？首先添加 MS 脚本库。

选项显式

```
Sub Test()

Dim oRange As Range

Dim dict As Dictionary
Dim vArray As Variant
Dim vItem As Variant
Dim sKey As String
Dim sValue As String
Dim iCompare_TRUE As Integer

Dim lCnt As Long
Dim lCnt_Rows As Long

Set dict = New Dictionary

Set oRange = ThisWorkbook.Sheets(1).Range("A1:B6")

For lCnt = 1 To oRange.Rows.Count
    sKey = oRange(lCnt, 1)
    sValue = oRange(lCnt, 2)
    iCompare_TRUE = StrComp(sValue, "True")
    If Not dict.exists(sKey) And iCompare_TRUE = 0 Then
        With dict
            .Add sKey, sValue
        End With
    End If
Next lCnt

ReDim vArray(1 To dict.Count)
vArray = dict.Keys
lCnt_Rows = UBound(vArray) + 1

Set oRange = ThisWorkbook.Sheets(1).Range(Cells(1, 3), Cells(lCnt_Rows, 3))
oRange.Value = Application.Transpose(vArray)

End Sub 
```

# c# - 保存创建的 Excel 文件后无法断开 Excel Introp 表单 - C#

> ID：13049819
> 
> 赞同：-1
> 
> 时间：2012-10-24T13:03:59.710
> 
> 标签：c#, excel, excel-interop

我正在尝试保存一个使用 Excel 互操作通过 C# 应用程序创建和写入的 excel 文件。我和其他人一样浏览了整个网站，以找到可以正常工作的代码，但我还没有找到。我的 excel 互操作函数使用工作簿、工作表、应用程序和 workshee_range 对象。有没有人有什么建议。解决方案越简单越好。我是初学者到中级 C# 程序员，高级解决方案可能超出我的知识范围。保存并关闭 excel 文件后尝试断开与 excel 互操作连接时遇到的未处理异常显示“对象引用未设置为对象的实例。”

这是我用来执行上述过程的代码：

```
 workbook.SaveAs(startForm.excelFileLocation);
            workbook.Close();
            app.Quit();
            Marshal.ReleaseComObject(workSheet_range);
            Marshal.ReleaseComObject(worksheet);
            Marshal.ReleaseComObject(workbook);
            Marshal.ReleaseComObject(app);
            app = null;
            workbook = null;
            worksheet = null;
            workSheet_range = null; 
```

这是完整的代码：

```
 class CreateExcelDoc
    {
        string newFormString = trialReportForm.newFormString;
       string fileString=trialReportForm.fileString;
       int sheetCount;
       string trialString = trialReportForm.trialString;
       string dateString = trialReportForm.dateString;
       string saveString = trialReportForm.saveSting;
       System.Windows.Forms.Timer excelTimer = new System.Windows.Forms.Timer();
        private Excel.Application app = null;
        private Excel.Workbook workbook = null;
        private Excel.Worksheet worksheet = null;
        private Excel.Range workSheet_range = null;
        public CreateExcelDoc()

        {
            createDoc();
        }

        public void createDoc()
        {

            try
            {
                app = new Excel.Application();
                //app.Visible = false;
                if (startForm.exportOwnerString == "Yes")
                {
                    app.Visible = true;
                    startForm.exportOwnerString = " ";
                }
                else
                {
                    app.Visible = false;
                }
                if (startForm.excelActionFlag=="addNewTrialReport")
                {
                    workbook = (Excel.Workbook) app.Workbooks.Add(1);
                    //workbook.SaveAs(newFileForm.desktopPath + "\\" + "OB "+trialReportForm.otrClubNameString+" - "+trialReportForm.otrDateString);
                    worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                    //fileNameString = newFileForm.desktopPath + "\\OB " + trialReportForm.otrClubNameString + " " + trialReportForm.otrDateString;
                    workbook.Worksheets[1].Name = trialReportForm.trialReportDate+" Trial "+trialReportForm.trialReportTrialNumber;
                }
                else if (startForm.excelActionFlag == "ownerContacts")
                {
                    workbook = (Excel.Workbook)app.Workbooks.Add(1);
                    worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                    workbook.Worksheets[1].Name = "Owner Contacts";
                }
                else if (startForm.excelActionFlag == "newExcelResults")
                {
                    string testFile = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\test";
                    workbook = (Excel.Workbook)app.Workbooks.Add(1);

                    worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                    workbook.Worksheets[1].Name = "Event 1 Results";
                    //workbook.SaveAs(testFile, Missing.Value, Missing.Value, Missing.Value, false);
                    //workbook.SaveAs(Environment.GetFolderPath(Environment.SpecialFolder.Desktop)+"\\Results", Missing.Value, Missing.Value, Missing.Value, false);

                    //workbook.SaveAs(startForm.excelFileLocation, Missing.Value, Missing.Value, Missing.Value, false);

                    //fileNameString = registrationForm.regFileLocation + "\\OB " + registrationForm.regClubName + " " + registrationForm.regDateString;
                }
                else if (dogForm.dogRegistrationExcel == "Yes")
                {
                    workbook = (Excel.Workbook)app.Workbooks.Add(1);
                    workbook.SaveAs(dogForm.filePath, Missing.Value, Missing.Value, Missing.Value, false);

                }
                else if (newFormString == "No")
                {

                    //workbook = app.Workbooks.Open(fileString, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                    // workbook.Close(true,fileString,Missing.Value);
                    workbook = (Excel.Workbook)app.Workbooks.Open(fileString, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                }
                if (newFormString=="Yes"&registrationForm.formString=="OTR")
                {
                    //string sheetName = "Trial Report - " + dateString + " " + trialString;
                worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                workbook.Worksheets[1].Name =trialReportForm.otrDateString+" Trial " + trialReportForm.otrTrialString;
                //workbook.Worksheets[1].Name = "Trial Report - " + dateString + " " + trialString;
                //workbook.Worksheets[1].Name = "Hello";
                //Excel.Name name1 = worksheet.Names.Add("Trial Report - " + dateString + " " + trialString, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                //worksheet.Name = "Trial Report - " + dateString + " " + trialString;

                }
                else if (newFormString == "Yes" & registrationForm.formString == "Registration")
                {
                    //string sheetName = "Trial Report - " + dateString + " " + trialString;
                    worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                    workbook.Worksheets[1].Name = "Results: "+registrationForm.selectedEvent;
                    //workbook.Worksheets[1].Name = "Trial Report - " + dateString + " " + trialString;
                    //workbook.Worksheets[1].Name = "Hello";
                    //Excel.Name name1 = worksheet.Names.Add("Trial Report - " + dateString + " " + trialString, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                    //worksheet.Name = "Trial Report - " + dateString + " " + trialString;

                }
                else if (startForm.excelActionFlag == "addExistingTrialReport")
                {
                    workbook = (Excel.Workbook)app.Workbooks.Open(startForm.excelFileLocation, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                   sheetCount = workbook.Worksheets.Count;
                   int sheetCountPlusONe=sheetCount+1;
                   worksheet = (Excel.Worksheet)workbook.Worksheets.Add(Missing.Value,workbook.Worksheets[sheetCount],Missing.Value,Missing.Value);
                   workbook.Worksheets[sheetCountPlusONe].Name = trialReportForm.trialReportDate + " Trial " + trialReportForm.trialReportTrialNumber;

                   //worksheet.Move(Missing.Value, workbook.Worksheets[sheetCount]);

                }
                else if (startForm.excelActionFlag == "existingExcelResults")
                {

                    workbook = (Excel.Workbook)app.Workbooks.Open(startForm.excelFileLocation, Missing.Value, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, true, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
                    sheetCount = workbook.Worksheets.Count;
                    int sheetCountPlusONe = sheetCount + 1;
                    worksheet = (Excel.Worksheet)workbook.Worksheets.Add(Missing.Value, workbook.Worksheets[sheetCount], Missing.Value, Missing.Value);
                    workbook.Worksheets[sheetCountPlusONe].Name = "Event " + sheetCountPlusONe.ToString() + " Results";

                    //worksheet.Move(Missing.Value, workbook.Worksheets[sheetCount]);

                }
                else if (dogForm.dogRegistrationExcel == "Yes")
                {
                    worksheet = (Excel.Worksheet)workbook.Worksheets[1];
                    workbook.Worksheets[1].Name = dogForm.dogUKCNumber;
                }
            }
            catch (Exception e)
            {
                Console.Write("Error");
            }
             /* if (trialReportForm.saveMe=="Yes")
                {
                    workbook.Save();
                    workbook.Close();
                }
            */

        }

        public void createHeaders(int row, int col, string htext, string cell1,
        string cell2, int mergeColumns, string b, bool font, int size, string
        fcolor)
        {
            worksheet.Cells[row, col] = htext;
            workSheet_range = worksheet.get_Range(cell1, cell2);
            workSheet_range.Merge(mergeColumns);
            switch (b)
            {
                case "BLUE":
                    workSheet_range.Interior.Color = System.Drawing.Color.Red.ToArgb();
                    break;
                case "GAINSBORO":
                    workSheet_range.Interior.Color =
            System.Drawing.Color.Gainsboro.ToArgb();
                    break;
                //case "Turquoise":
                   // workSheet_range.Interior.Color =
            //System.Drawing.Color.Turquoise.ToArgb();
                    //break;
                case "PeachPuff":
                    workSheet_range.Interior.Color =
            System.Drawing.Color.PeachPuff.ToArgb();
                    break;
                default:
                    //  workSheet_range.Interior.Color = System.Drawing.Color..ToArgb();
                    break;
            }

            //workSheet_range.Borders.Color = System.Drawing.Color.Black.ToArgb();
            //workSheet_range.Borders = null;
            workSheet_range.Font.Bold = font;
            workSheet_range.ColumnWidth = size;
            //workSheet_range.HorizontalAlignment = ContentAlignment.BottomCenter;
            if (startForm.excelActionFlag == "existingExcelResults" | startForm.excelActionFlag=="newExcelResults")
            {
                workSheet_range.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignCenter;
            }
            //workSheet_range.Cells.HorizontalAlignment = ContentAlignment.MiddleCenter;
            workSheet_range.Font.Color = System.Drawing.Color.FloralWhite.ToArgb();

        }

        public void addData(int row, int col, string data,
            string cell1, string cell2, string format)
        {
            worksheet.Cells[row, col] = data;
            workSheet_range = worksheet.get_Range(cell1, cell2);
            //workSheet_range.Borders.Color = System.Drawing.Color.Black.ToArgb();
            workSheet_range.NumberFormat = format;
            workSheet_range.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignLeft;

            excelTimer.Tick += new EventHandler(excelTimer_Tick);
            excelTimer.Interval = 6000;
            excelTimer.Start();
        }
        void excelTimer_Tick(object sender, EventArgs e)
        {
            if (startForm.excelActionFlag != "ownerContacts")
            {
                if (startForm.excelActionFlag == "existingExcelResults" | startForm.excelActionFlag == "newExcelResults")
                {
                   /* Excel.Range sortRange;
                    sortRange = worksheet.get_Range("A14", "K32");
                    Excel.Range scoreColumn;
                    scoreColumn = worksheet.get_Range("C14", "C32");
                    sortRange.Sort(scoreColumn, Excel.XlSortOrder.xlDescending);*/
                    Excel.Range valueRange;
                    Excel.Range placeRange;
                    placeRange = worksheet.get_Range("A14", "A" + (14 + (registrationForm.numberofCompetitors - 1)).ToString());
                    valueRange = worksheet.get_Range("A14", "K"+(14+(registrationForm.numberofCompetitors-1)).ToString());
                    valueRange.Sort(valueRange.Columns[3, Type.Missing], Excel.XlSortOrder.xlDescending, Type.Missing, Type.Missing, Excel.XlSortOrder.xlAscending, Type.Missing, Excel.XlSortOrder.xlAscending, Excel.XlYesNoGuess.xlGuess, Type.Missing, Type.Missing, Excel.XlSortOrientation.xlSortColumns, Excel.XlSortMethod.xlPinYin, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal);
                    placeRange.Sort(placeRange.Columns[1, Type.Missing], Excel.XlSortOrder.xlAscending, Type.Missing, Type.Missing, Excel.XlSortOrder.xlAscending, Type.Missing, Excel.XlSortOrder.xlAscending, Excel.XlYesNoGuess.xlGuess, Type.Missing, Type.Missing, Excel.XlSortOrientation.xlSortColumns, Excel.XlSortMethod.xlPinYin, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal, Excel.XlSortDataOption.xlSortNormal); 
                }
                // workbook.Close(true, Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Results.xls", Missing.Value);
/*
                GC.Collect(); 
                GC.WaitForPendingFinalizers();
                GC.Collect();
                GC.WaitForPendingFinalizers(); 
                Marshal.FinalReleaseComObject(workSheet_range); 
                Marshal.FinalReleaseComObject(worksheet); 
                workbook.Close(Type.Missing, Type.Missing, Type.Missing); 
                Marshal.FinalReleaseComObject(workbook);
                app.Quit();
                Marshal.FinalReleaseComObject(app);

                */
                //workbook.Close(true, startForm.excelFileLocation, Missing.Value);
                workbook.SaveAs(startForm.excelFileLocation);
                workbook.Close();
                //app.Application.Quit();
                app.Quit();
                Marshal.ReleaseComObject(workSheet_range);
                Marshal.ReleaseComObject(worksheet);
                Marshal.ReleaseComObject(workbook);
                Marshal.ReleaseComObject(app);
                app = null;
                workbook = null;
                worksheet = null;
                workSheet_range = null;
                //Application.Exit();

                /* workSheet_range = null;
                 worksheet = null;
                 workbook = null;
                 app = null;*/
                //Thread.Sleep(5000);
                // File.Move(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Results.xls", startForm.excelFileLocation);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:29:48.417

这意味着在`excelTimer_Tick`执行时，`workbook`is `null`(`startForm`不能为 null ，否则您将在`if (startForm.excelActionFlag != "ownerContacts")`) 上出现错误。

我会在该行上放置一个断点，并在 Watch 窗口（或 QuickWatch）中检查它是否为空。

要查看它为什么为空，您可以将您的`workbook`字段重构为一个属性并将断点放在设置器中以查看它何时设置为空（或是否`excelTimer_Tick`在设置字段之前调用）。

# tinymce - Tinymce，我的 textarea 编辑器中的 textarea

> ID：13049821
> 
> 赞同：4
> 
> 时间：2012-10-24T13:04:04.343
> 
> 标签：tinymce, textarea

我使用 TinyMCE。

如果我在我的 textarea（编辑器）中插入另一个 texarea，tinymce 认为该标签的结束标签与此相关，因此他关闭了编辑器。所有代码都可以在编辑器之外找到...

你有什么想法吗？

下面的代码有效：

```
<textarea id="elm1" name="elm1">
    <input type="text" value="okokokok"/>
</textarea> 
```

下面的代码不起作用：

```
<textarea id="elm1" name="elm1">
    <textarea>Blablablabla</textarea>
    <input type="text" value="okokokok"/>
</textarea> 
```

在这里，`"<input type="text" value="okokokok"/></textarea>"`将在外部编辑器中找到...

你明白我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-12T15:37:01.943

我有同样的问题，而不是删除 id attr 给他们一个 id 值，不要使用“id”less textarea。它适用于tinymce 4。

一个 `<textarea id="try">textarea in </textarea>`出textarea

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T22:01:49.453

删除“textarea”元素的所有 ID 属性。
这将修复在编辑器中出现文本区域的问题。

# solr - SOLR 在 XML 和 JSON 输出上的行为不同

> ID：13049825
> 
> 赞同：0
> 
> 时间：2012-10-24T13:04:27.893
> 
> 标签：solr, lucene

我尝试那些请求：

`http://localhost:8080/solr/core/select/?q=title:mario&start=0&rows=10&wt=xml`工作正常

`http://localhost:8080/solr/core/select/?q=title:mario&start=0&rows=10&wt=json`不工作！返回

HTTP 状态 400 - 未定义的字段标签

类型状态报告

消息未定义字段标签

描述 客户端发送的请求在语法上不正确（未定义的字段标签）。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:48:55.113

我解决了这个问题。对于可能遇到同样奇怪行为的人，我是如何到达那里的：

我将**data-dir**属性更改为另一个目录（另一个 SOLR 核心的 data-dir，具有不同的数据库、字段..）

只需重新索引索引即可解决问题。

# networking - TCP 连接中的 FIN 与 RST

> ID：13049828
> 
> 赞同：44
> 
> 时间：2012-10-24T13:04:40.817
> 
> 标签：networking, tcp

据我了解，有两种方法可以关闭 TCP 连接：

*   发送 FIN 标志
*   发送 RST 标志

RST 会导致连接立即终止，而在 FIN 中您会得到确认。

我是否理解这一点，两者之间还有其他区别吗？这两个标志可以一起使用吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-10-24T13:15:08.920

*   FIN 说：“我已经和你谈完了，但我仍然会听你说的一切，直到你说你已经完成了。”

*   RST 说：“没有对话。我不会说什么，也不会听你说什么。”

    如果您的 TCP 连接持久且流量很小，RST 很有用。如果其中一台计算机重新启动，它会忘记连接，并且另一台计算机在发送另一个数据包后立即获得 RST。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-06T06:01:53.247

在以下情况下将发送 FIN 或 RST

*   您的进程关闭套接字
*   当您的进程退出而不关闭套接字时，操作系统正在执行资源清理。

    如果您的进程调用 close()，则默认情况下会从关闭端发送 FIN（注意：您可以设置套接字选项 SO_LINGER 以使其发送 RST 而不是 FIN）

    如果您的进程在没有关闭套接字的情况下退出，内核将关闭 tcp 连接并为您的进程进行清理。可以发送 FIN 或 RST。如果您的接收队列中有数据，则会发送 RST。否则，将发送 FIN。

    您可以通过 tcp.c 中的 tcp_close() 循环了解更多详细信息。（我使用的是 redhat 分支的 kernel-2.6.32-573.7.1）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-24T21:23:00.663

来自 RFC 1122，每个人都在引用，*但实际上并没有引用，*反对我：

> TCP 连接可能以两种方式终止：(1) 使用 FIN 握手的正常 TCP 关闭序列，以及 (2) 发送一个或多个 RST 段并立即丢弃连接状态的“中止”。

不能同时使用两者。这个概念甚至没有开始变得有意义。

可以通过我不会在这里描述的诡计来关闭使用 RST 而不是 FIN 的 TCP 连接，但这是一个愚蠢的想法，这就是为什么我没有记录它的原因。一方面，所有待处理的数据都丢失了。

# python - 如何查看 RabbitMQ 中的排队任务？

> ID：13049829
> 
> 赞同：9
> 
> 时间：2012-10-24T13:04:47.587
> 
> 标签：python, rabbitmq, celery

我使用 RabbitMQ 作为我的消息代理，我的工作人员是 Celery 任务。我正在尝试诊断一个问题，即我将任务排入 RabbitMQ 但 Celery 没有接听。

有没有办法可以检查 RabbitMQ 中排队的任务是什么？我想查看它们入队的日期和时间、指定的任何 ETA、参数和任务名称。

我无法在文档中找到这些信息——也许我忽略了它——并且希望你们中的一些人可能知道一种检查任务队列的简单方法。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T13:38:58.243

您可以使用 Flower 实时监控任务。

[https://github.com/mher/flower](https://github.com/mher/flower)

还检查检查 RabbitMQ 服务器状态的*rabbitmqclt命令：*

[http://www.rabbitmq.com/man/rabbitmqctl.1.man.html](http://www.rabbitmq.com/man/rabbitmqctl.1.man.html)

```
rabbitmqctl list_queues 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T14:11:29.437

还有一些 celery 任务来监控队列：

[http://docs.celeryproject.org/en/latest/userguide/monitoring.html](http://docs.celeryproject.org/en/latest/userguide/monitoring.html)

查看这些命令：

```
#shows status of all worker nodes
celery status
#List active tasks
celery inspect active
#Show worker statistics (call counts etc.)
celery inspect stats 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-21T09:52:39.207

我相信您正在寻找的命令是：

```
celery inspect reserved 
```

文档[1] 有以下描述：

> 保留任务是已经收到，但仍在等待执行的任务。

*   [1] [http://docs.celeryproject.org/en/latest/userguide/workers.html?highlight=inspect%20reserved](http://docs.celeryproject.org/en/latest/userguide/workers.html?highlight=inspect%20reserved)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T15:23:53.733

只要[启用了](http://www.rabbitmq.com/plugins.html)[管理插件](http://www.rabbitmq.com/management.html)，就可以从队列中消费任意数量的消息，并且可以选择重新排队：

```
rabbitmqadmin get queue=queue_name requeue=true count=100 
```

# android - 列表视图的复杂使用

> ID：13049832
> 
> 赞同：0
> 
> 时间：2012-10-24T13:04:54.733
> 
> 标签：android, android-layout, android-widget

我在列表视图中显示消息列表。但我需要按消息日期显示消息组。像这样的东西——>这个日期的日期和消息列表，然后是下一个日期和列表消息等等。如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:31:29.527

我认为您应该使用像您说的那样提供实现的 Expandable ListView。试试这个链接： -

[http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html](http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html)

[http://developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

这肯定会帮助你。

# html - 将 div 与使用 margin: 0 auto 的 div 对齐

> ID：13049834
> 
> 赞同：5
> 
> 时间：2012-10-24T13:04:56.657
> 
> 标签：html, css

这是我第一次在这个论坛上，我想尽可能清楚，我在为自己创建一个小网站时遇到了问题，特别是标题。我正在尝试创建一个具有 1024px 中心（边距：0 auto;）的包装器的页面，并且我想要 2 个 div，在这个包装器的两侧，我可以使用另一张图片作为背景。我当前的 css 如下所示：

```
body, html      
background: url(../images/bg.jpg);
background-repeat: no-repeat;
background-position: top center;
margin: 0;
padding: 0;
}
#wrapper
margin: 0 auto;
width: 1024px;
}
#header {
width: 1024px;
height: 254px;
background-image: url(../images/header2.png);
background-repeat: none;
position: relative;
}
#header_right {
width: 50%;
right: 0;
background-image: url(../images/header_right2.png);
position: absolute;
height: 254px;
}
#header_left {
width: 50%;
left: 0px;
background-image: url(../images/header_left.png);
position: absolute;
background-position: right;
margin-left: -512px;
height: 254px;
} 
```

我的 html 看起来像：

```
<body>
<div id="header_right"></div><!--End header right!-->
<div id="header_left"></div><!--End header right!-->
<div id="wrapper">
<div id="header"></div><!--End header!-->
<div id="content"></div><!--End Content!-->
</div><!--End wrapper!-->
</body> 
```

我想要完成的是有一个在左右两边都继续的标题（两个标题都使用不同的背景），在这种情况下它确实在左边工作，因为我使用负边距，因为我使用 50% 宽度并且恰好是包装器的一半（-512px），这是可行的，但是如果我尝试在右侧使用负边距（margin-right：-512px），这会将右侧的页面扩展为额外的 512px，这不是我的本意。

我整天都在谷歌搜索，但似乎找不到我的问题的任何答案，还尝试用 float: left 制作 3 个 div，但无法弄清楚如何在中心制作 1 宽度为 1024px 的 div 其余部分100% 宽度，如果有人能帮助我，那将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:23:54.350

我不完全确定你希望它是什么样子，但我会试一试。
如果我走得很远，也许你可以给我提供一个示意图？

在任何情况下，下面给出的示例都没有使用您的特定代码，但它应该让您了解它是如何完成的。

* * *

结果：![第一个例子](../Images/b42319522a034b9119eb3a9fa8173c4a.png)

左右标题是“无限的”，因为它们总是填满整个页面的宽度。
中间的标题覆盖了其余部分。如果您有背景图像，您可以使用`background-position`它们来定位它们，以便它们与中间页眉的左右边缘对齐。

* * *

代码 | [JSFiddle 示例](http://jsfiddle.net/3gLRv/)

HTML

```
<div class='side_wrapper'>
    <div class='left_header'></div><div class='right_header'></div>
</div>
<div class='header'></div>
<div class='content'>
    Content here
</div> 
```

CSS

```
.header, .side_wrapper, .left_header, .right_header{
    height: 100px;
}

.header, .content{
    width: 400px;
    margin: 0 auto;
}

.side_wrapper{
    width: 100%;
    white-space: nowrap;
}

.left_header, .right_header{
    width: 50%;
    display: inline-block;
}

.left_header{
    background-color: blue;
}

.right_header{
    background-color: lightblue;
}

.header{
    position:absolute;
    top: 0;
    left: 50%;
    margin-left: -200px;
    background-color: red;
}

.content{
    background-color: green;
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:14:50.303

您希望将两个标头从包装器中取出并放在一边，对吗？如果我是对的，试试这个：

```
<body>

<div id="header_left"></div><!--End header right!-->
<div id="wrapper">
<div id="header"></div><!--End header!-->
<div id="content"></div><!--End Content!-->
</div><!--End wrapper!-->
<div id="header_right"></div><!--End header right!-->
</body> 
```

和 ：

```
display: inline; float: left; 
```

在每个元素中（header-left，header-right，wrappper），并离开负边距

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:27:44.107

在你的 div 中使用 float:left; 这应该意味着在包装器中，只要有足够的空间，它们就会彼此相邻浮动，例如 css：

```
#divWrapper
{
width:500px;
float:left;
background-color:red;
}
#divLeft
{
width:250px;
float:left;
background-color:blue;
}
#divRight
{
width:250px;
float:left;
background-color:green;
} 
```

html

```
<div id "divWrapper">
   <div id = "divLeft">content here</div>
   <div id = "divRight">content here</div>
</div><!--this is the end of the wrapper div --> 
```

用于操作 css 的一个非常好的工具是 Firefox 中的 Firebug [https://getfirebug.com/](https://getfirebug.com/)

如果你想要一个中心 div 试试这个：http: [//jsfiddle.net/kzfu2/1/](http://jsfiddle.net/kzfu2/1/)

# python - 正则表达式日期匹配：“Date of death\n27 January 1756”中的“27 January 1756”而不返回字符串的“Date of death”部分

> ID：13049840
> 
> 赞同：0
> 
> 时间：2012-10-24T13:05:01.737
> 
> 标签：python, regex

假设给出以下字符串：

```
stri = "Date 26 March 1256\nDate of death\n27 January 1756\n25 January 1567\n death" 
```

现在我只想提取紧随其后的日期`Date of death`，即`27 January 1756`。

我做到了这一点：

```
>>> regex = re.compile(r"Date of death.*?[0-9][0-9]? [A-z]+ [0-9]{4}", re.DOTALL)
>>> print regex.findall(stri)
['Date of death\n27 January 1756'] 
```

但我只想`27 January 1756`进行一次正则表达式搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:06:37.400

您需要在要`findall`返回的匹配部分周围使用捕获组（括号）：

```
>>> regex = re.compile(r"Date of death.*?([0-9][0-9]? [A-z]+ [0-9]{4})", re.DOTALL)
>>> print regex.findall(stri)
['27 January 1756'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:07:11.697

改用lookbehind：

```
regex = re.compile(r"(?<=Date of death\n)[0-9][0-9]? [A-z]+ [0-9]{4}", re.DOTALL) 
```

这将检查当前位置是否在前面`Date of death\n`而不实际包含在匹配中。

请注意，您现在不能使用`.*?`，因为大多数正则表达式引擎不支持可变长度的lookbehinds。

您还可以通过使用内置字符类来稍微缩短您的正则表达式`\d`：

```
regex = re.compile(r"(?<=Date of death\n)\d{1,2} [A-z]+ \d{4}", re.DOTALL) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:06:47.280

使用捕获组。

```
regex = re.compile(r"Date of death (.*?[0-9]{1,2} [A-z]+ [0-9]{4})", re.DOTALL) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T13:19:28.810

这个怎么样：

```
In [64]: m=re.search("(?<=Date of death)\s+(\d+ \w+ \d+)",stri)

In [65]: m.groups()
Out[65]: ('27 January 1756',)

In [66]: m.groups()[0]
Out[66]: '27 January 1756' 
```

# ruby-on-rails - 向 rspec 输出添加额外的文档

> ID：13049841
> 
> 赞同：3
> 
> 时间：2012-10-24T13:05:04.850
> 
> 标签：ruby-on-rails, rspec

因此，虽然我喜欢 Cucumber 的集成测试可读性以及它能够为我们提供可以轻松与客户共享的文档的能力，但从开发和测试速度的角度来看，我也觉得它很麻烦。

今天我开始思考，如果我可以将消息打印到记录“步骤”的 RSpec 文档格式，那么我可以轻松地复制 Gherkin 的业务功能，但同时使用 RSpec 的简单性。但我想不出办法做到这一点。

我想要的是这样的：

```
describe "Login and Authorization Tests" do
  before (:each) do
    docs "Given I have a user"
    @user = FactoryGirl.create(:user)
  end

  it "A user can belong to one or more user roles" do
    docs "And the user has no roles assigned"
    @user.roles.length.should eq 0
    docs "When I add two roles"
    @user.roles << FactoryGirl.create(:role)
    @user.roles << FactoryGirl.create(:role)

    @user.reload
    docs "Then the user should have two roles assigned"
    @user.roles.length.should eq 2        
  end
end 
```

并在文档中得到这个

```
User
  Login and Authorization Tests
    A user can belong to one or more user roles
      Given I have a user
      And the user has no roles assigned"
      When I add two roles
      Then the user should have two roles assigned 
```

请注意，来自“之前”的消息也显示在文档中，并且会在其下方的每个测试中显示该行。

我正在考虑分叉，看看我是否可以添加这样的东西，但在我这样做之前，有谁知道这样的事情是否已经可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:33:17.010

我还联系了 RSpec 开发团队，那里的某个人发布了这个名为 rspec-longrun 的附加组件，它可以重新用于此目的。我还没有机会尝试它，但它看起来很有希望。作为奖励，它包括时间信息。

rspec-longrun：[https ://github.com/mdub/rspec-longrun](https://github.com/mdub/rspec-longrun)

rspec-dev 上的线程：[https ://github.com/rspec/rspec-dev/issues/34](https://github.com/rspec/rspec-dev/issues/34)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:12:53.847

你可以试试[Steak](https://github.com/cavalle/steak)，但差别不大。或者你可以试试 Cucumber 和 RSpec 匹配器。在最后一种情况下，您可以分叉 RSpec 并添加一个新[的格式化程序](https://github.com/rspec/rspec-core/tree/master/lib/rspec/core/formatters)

# php - PHP 数字缩写

> ID：13049851
> 
> 赞同：9
> 
> 时间：2012-10-24T13:05:28.450
> 
> 标签：php, function, math, exponent

编辑：下面的函数现在正确地做了缩写，实现了@Asad 的解决方案

嗨，我目前正在开发一个点赞按钮，我的所有基本功能都运行良好，但是我已经开始使用数字缩写代码并碰壁，因为我不知道如何使缩写更精确。

我有一个数字，例如 1000、1230、1500、154000、1500000、1000000

我想用缩写格式化它们。IE

如果是一千，则为 1k、1.1k、2k、10k、10.5k 等...

等等数万，数十万和数百万等......

目前我有以下功能，但还不够具体：

```
function abreviateTotalCount($value) 
{

    $abbreviations = array(12 => 'T', 9 => 'B', 6 => 'M', 3 => 'K', 0 => '');

    foreach($abbreviations as $exponent => $abbreviation) 
    {

        if($value >= pow(10, $exponent)) 
        {

            return round(floatval($value / pow(10, $exponent))).$abbreviation;

        }

    }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:13:52.253

如果要保留小数位，请使用 floatval 而不是 intval：

```
return round(floatval($value / pow(10, $exponent)),1).$abbreviation; 
```

获取浮点表示并四舍五入到小数点后 1 位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:16:46.043

检查该项目 [https://github.com/gburtini/Humanize-PHP/blob/master/Humanize.php](https://github.com/gburtini/Humanize-PHP/blob/master/Humanize.php)

```
php > echo HumanizePHP::intword(256,0,0);
3 hundred
php > echo HumanizePHP::intword(256,0,1);
2.6 hundred
php > echo HumanizePHP::intword(256,0,2);
2.56 hundred 
```

至少你可以从这个实现中得到灵感

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:19:08.270

代替 intval()，使用[number_format()](http://us3.php.net/manual/en/function.number-format.php)为您提供具有所需小数位数的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T12:38:57.073

您可以宁愿使用来自 GITHUB [https://github.com/prezine/numb的这些解决方案](https://github.com/prezine/numb)

`$numb = new numbConverter() echo $numb->__main('1400000'); //output => 1.4M`

一个非常易于使用的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T14:20:41.580

如果您希望支持 0、负数和更大的数字，例如 Decillions，您可以试试这个 :)

```
function numberAbbreviation($number, $floating_points = 1) {

    $a = ['', 'K', 'M', 'B', 't', 'q', 'Q', 's', 'S', 'o', 'n', 'd'];
    $n = intval($number);
    $i = intdiv(strlen((string) $n) - 1, 3);
    $m = isset($a[$i]) ? $a[$i] : '';
    $e = $floating_points;

    return number_format($n / (1000 ** $i), $m ? $e : 0) . $m;
} 
```

# jsf - 特殊字符编码错误 utf-8 iso-8859-1

> ID：13049852
> 
> 赞同：0
> 
> 时间：2012-10-24T13:05:28.717
> 
> 标签：jsf, utf-8, character-encoding, special-characters, iso-8859-1

我在我的 jsf 应用程序中显示特殊字符（如 é 和 à）时遇到问题。这些字符显示为问号或 Ã©。因此我尝试了一个简单的事情。我有一个带有表单发布到结果页面的页面，显示发布的参数。

第 1 页

```
<head>
<meta http-equiv="Content-Type" content="text/html; UTF-8">
</head>
<body>
<form method="POST" action="http://localhost:8080/test/result.xhtml" name="data"  target="_blank">
<input type="hidden" value="Pierre;DUPONT;5300;Seilles;;Rue des écoles 18;fr;;" name="customer"/> 
```

页面结果

```
<head>
<meta http-equiv="Content-Type" content="text/html; UTF-8"/>
</head>
<body >

test

    <h:inputText value="${param.customer}"/>

</body></html> 
```

结果显示为 ue des écoles 而不是 ue des écoles

我正在 Eclipse 中使用 UTF-8 上的文本文件编码并在 tomcat 6.024 上运行

我究竟做错了什么？

# keyevent - 什么时候应该使用 keydown 和 keyup？

> ID：13049855
> 
> 赞同：7
> 
> 时间：2012-10-24T13:05:36.157
> 
> 标签：keyevent, user-friendly

哪个事件应该用于按键处理按键向下/按键向上？可以肯定的是，在这两种情况下程序都会成功运行。但是哪一个会更用户友好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:08:09.137

这取决于你。没有这样的最佳实践。两者都根据您的程序的需要和用户的方便使用。

**keyup** 当用户释放一个键时触发，该键的默认操作已经执行。

**keydown** 当用户按下某个键时触发。它在用户按住键时重复。

查看[描述差异的此页面](https://web.archive.org/web/20160708235602/http://www.bloggingdeveloper.com/post/KeyPress-KeyDown-KeyUp-The-Difference-Between-Javascript-Key-Events.aspx)。

# css - 背景图片被截断

> ID：13049856
> 
> 赞同：0
> 
> 时间：2012-10-24T13:05:36.620
> 
> 标签：css

请查看此页面：[http ://www.1001locaties.nl/beachclub-the-sunset-1993](http://www.1001locaties.nl/beachclub-the-sunset-1993)

如您所见，背景被切断。我不知道 CSS 哪里出了问题……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:30:30.393

你需要一个

```
<div style="clear:both;"></div> 
```

在您的页脚 div 之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:17:14.250

您可以添加`background-image: url('/images/bg_grey_white.jpg')`到`<html>`标签。

您应该将背景添加到`<body>`，但问题是您的正文不包括整个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:27:10.003

我会尝试从 CSS 重置开始，然后从那里开始： [http ://www.cssreset.com/](http://www.cssreset.com/)

此外，如果您添加上述内容，则必须将 margin: 0 auto 设置为 html 属性。

# google-apps-script - 如何在 Google 协作平台内的 Google Drive 中列出我的文档

> ID：13049858
> 
> 赞同：0
> 
> 时间：2012-10-24T13:05:50.653
> 
> 标签：google-apps-script, google-drive-api, google-sites

我在 Google 驱动器中有一堆 pdf 文档，我希望将它们列为带有 pdf 缩略图和 pdf 名称的表格，并链接到它在我的 Google 网站网页上的 Google 驱动器中的位置。我希望它是自动化的，所以每次我在谷歌驱动器上上传文件时，它都会自动出现在谷歌网站上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:11:25.153

你看过这个[教程](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites)吗？

这可能是您开发自己的应用程序的良好开端...

# jquery - 用于旋转和调整图像大小的 Jquery 插件

> ID：13049859
> 
> 赞同：2
> 
> 时间：2012-10-24T13:05:57.327
> 
> 标签：jquery, jquery-plugins, resize, rotation

我正在寻找一个用于调整图像大小和旋转图像的 jquery 插件。通过我的研究，我发现这个女巫是我想做的事情，但它在 IE 中不起作用。 [http://vremenno.net/examples/jquery-ui-rotation/](http://vremenno.net/examples/jquery-ui-rotation/)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:31:25.340

您是否尝试过名为 sizzlepig 的新批量图像大小调整工具？它不是插件，它是基于网络的。您不能使用该工具旋转您的图像（这似乎是一个重要的优先事项），并且从您的第二条评论听起来最终用户将与此交互，而不是您只是在做生产工作。无论如何，您可以一次批量调整大量图像的大小，还可以裁剪和缩放。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:09:29.913

对于它的价值，您可以[使用 CSS 进行旋转](http://davidwalsh.name/css-transform-rotate)`height`，并且您可以仅使用and`width`属性（或使用 CSS 的`height`和属性）调整图像大小`width`。正如您在链接文章中所读到的，IE 总是对旋转之类的东西很挑剔，所以我并不感到惊讶的是，有问题的 jQuery 插件在 IE 上存在一些问题。

# php - 包罗万象的 MySQL 数据验证

> ID：13049860
> 
> 赞同：0
> 
> 时间：2012-10-24T13:06:00.120
> 
> 标签：php, mysql, database, validation, input

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我正在建立我的第一家在线商店，我正在自己编写 PHP 代码并使用 MySQL 数据库。我被告知，对输入进行数据验证非常重要，这样我的数据库就不会受到损害。有人可以告诉我要包括什么验证，或者推荐一个值得信赖的教程。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:12:15.440

在此站点中搜索“Sql 注入”。sql 注入攻击的一个常见来源是未经验证的用户输入，然后在发送到数据库之前进行可信连接。

例如，如果您的陈述是这样的：

```
select col1, col2 from mytable where id =' + <some variable> + ' and xyz = abc 
```

（其中“某个变量”是刚刚传递给 SQL 的用户输入）

然后用户可以输入`'xxx''; delete from mytable; --'`

数据库得到的是：

```
select col1, col2 from mytable 
where id ='xxx'; delete from mytable; --' and xyz = abc 
```

造成破坏。

所以这里的关键问题是：**不要将未经验证的连接文本传递给您的数据库以供其执行**。

您可以通过多种方式实现此目的：

*   检查输入是否有不需要的字符（很难涵盖所有内容）
*   将您的 SQL 构建为参数化 SQL，即将用户输入绑定到参数
*   调用存储过程（我喜欢它们，但它们不是每个人的一杯茶）

我会选择参数化 SQL，因为数据库驱动程序会将用户输入的*所有内容*绑定为单个值，同时将您的业务逻辑排除在数据库之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:17:04.710

Mysql Validation 意味着你必须防止你的查询被 MySql 注入。请阅读以下内容以避免 mysql 注入。

[http://rosstanner.co.uk/2012/01/php-mysql-preventing-mysql-injection/](http://rosstanner.co.uk/2012/01/php-mysql-preventing-mysql-injection/)

# python - Django 装饰器视图不可调用

> ID：13049863
> 
> 赞同：0
> 
> 时间：2012-10-24T13:06:25.430
> 
> 标签：python, django, decorator

我为我的 django 应用程序编写了两个非常简单的装饰器：

```
def login_required_json(f):
    def inner(request, *args, **kwargs):
        #this check the session if userid key exist, if not it will redirect to login page
        if not request.user.is_authenticated():
            result=dict()
            result["success"]=False
            result["message"]="The user is not authenticated"
            return HttpResponse(content=simplejson.dumps(result),mimetype="application/json")
        else:
            return f(request, *args, **kwargs)

def catch_404_json(f):
    def inner(*args,**kwargs):
        try:
            return f(*args, **kwargs)
        except Http404:
            result=dict()
            result["success"]=False
            result["message"]="The some of the resources throw 404"
            return HttpResponse(content=simplejson.dumps(result),mimetype="application/json") 
```

但是当我将它们应用于我的视图时，我在模板中收到“ViewDoesNotExist”错误，说它无法导入视图，因为它不可调用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:21:49.727

```
def login_required_json(f):
    def inner(request, *args, **kwargs):
        #this check the session if userid key exist, if not it will redirect to login page
        if not request.user.is_authenticated():
            result=dict()
            result["success"]=False
            result["message"]="The user is not authenticated"
            return HttpResponse(content=simplejson.dumps(result),mimetype="application/json")
        else:
            return f(request, *args, **kwargs)

    return inner   # <--- Here 
```

您的装饰器返回 None，而不是实际视图。所以返回我上面演示的内部函数。

# android - Android 是否支持使用 phonegap 的德语（不显示德语变音 Ü）

> ID：13049864
> 
> 赞同：1
> 
> 时间：2012-10-24T13:06:27.507
> 
> 标签：android, cordova

`Übersicht`-`ÄÖÜ`
使用 phonegap 的 android 不支持这些类型的字符。
任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:59:25.650

*   请首先检查您的文档是否以正确的编码保存。
    这里：UTF-8

    您通常可以通过编辑器
    *程序员记事本的文件属性进行更改：*   文件 - 属性 - 编码 - UTF-8
    *Eclipse：*   项目 - 属性 - 资源：文本文件编码 - 其他 [UTF-8]

*   确保您的文档中有正确的元标记。

    html:`<meta http-equiv="Content-Type" content="text/html; charset=utf-8;" lang="de" />`

*   使用特殊字符的 HTML 表示法。

    `&Uuml;`代替`Ü`

    查看[此](http://www.degraeve.com/reference/specialcharacters.php)参考。

# vb.net - 与其副本共享 TEXT 的程序（打开两次）

> ID：13049865
> 
> 赞同：0
> 
> 时间：2012-10-24T13:06:29.290
> 
> 标签：vb.net, vb.net-2010

我正在尝试做的是一个简单的程序，其中我有 2 个文本框和一个按钮。（还有更多但无需多说来解决我的问题）
当我在第一个文本框中编写文本并单击按钮时，它将写在第二个文本框中。这里一切正常。
现在，当我多次运行该程序时，我希望将文本写入其他程序的第二个文本框中。
抱歉我之前给你的解释不好，希望它更好:)

> 旧描述
> 我实际上正在尝试制作一个非常像信使的程序（基本上是2个文本框，1个发送，1个查看和一个发送按钮），我不知道如何将程序与本身（副本）。
> 我希望它能够读取其他副本中包含的文本框，并且我不希望它是具有 2 个表单的 1 个程序，而是 1 个单个表单，运行严重时间（2 个或更多）
> 我该怎么做？
> /!\ 注意：它将在一台计算机上，就像 2 个表单一样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:35:55.963

我假设您在 WinForms 中执行此操作并且只运行一个可执行文件。

听起来您想创建在多个表单之间共享的类的单个实例。当值发生变化时，它应该引发一个事件。创建表单的每个实例后，您将传入该类。以您要声明的形式`With Events`。当一个表单更新类时，它会引发一个事件，通知其他表单刷新自己。

如果您熟悉 WPF 和 MVVM，那么这种设计会更简洁一些，但这需要一些时间来加快速度。

如果您想运行单独的应用程序并在它们之间进行通信，则此设计不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:36:25.723

您将不得不做某种[*IPC*](http://en.wikipedia.org/wiki/Inter-process_communication)，分别*远程处理*。

你可以使用：

*   [匿名管道](http://msdn.microsoft.com/en-us/library/bb546102.aspx)
*   [命名管道](http://msdn.microsoft.com/en-us/library/bb546085.aspx#Y0)
*   [UDP](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)
*   [TCP](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)
*   [WCF](http://msdn.microsoft.com/en-us/library/vstudio/ms735119%28v=vs.90%29.aspx)（恕我直言，会矫枉过正）
*   [Windows消息传递](http://www.codeproject.com/Articles/17606/NET-Interprocess-Communication)（将是最简单的方法）

# linq - Linq 仅包含一对多关系中的一个对象

> ID：13049866
> 
> 赞同：1
> 
> 时间：2012-10-24T13:06:29.813
> 
> 标签：linq

我有两个具有一对多关系的表。

一个订单有很多产品。

我想列出一个订单列表，每个订单都有免费产品（每个订单一个）。

我试过这样的事情：

```
this.ObjectContext.ORDERS.Include("PRODUCTS").Where(e=>e.PRODUCTS.price == 0).OrderBy(e => e.Order); 
```

但这不起作用。

还有其他方法吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:09:59.807

如果`PRODUCTS`是一个集合，您可以使用`Any()`扩展方法来查找任何产品是否免费（或者，`All()`查找所有产品是否免费的方法）：

```
this.ObjectContext.ORDERS
                  .Include("PRODUCTS")
                  .Where(o => o.PRODUCTS.Any(p => p.price == 0))
                  .OrderBy(e => e.Order); 
```

根据您对所需输出的澄清（所有带有可选免费产品的订单），您可以使用以下查询：

```
this.ObjectContext.ORDERS
                  .Include("PRODUCTS")
                  .Select(o => new {
                      Order = o, 
                      FreeProduct = o.PRODUCTS.FirstOrDefault(p => p.price == 0)
                  }); 
```

它将返回包含订单和免费产品的异常类型的序列（如果不存在免费产品，则返回 null）。

# xcode - Mountain Lion 上 xCode 4.5.1 中的 iOS 4 和 iOS 5 SDK

> ID：13049874
> 
> 赞同：2
> 
> 时间：2012-10-24T13:06:56.433
> 
> 标签：xcode, ios5, osx-mountain-lion

我已迁移到 Mountain Lion 操作系统版本 10.8.2。从山狮开始，安装了 xCode 4.5.1。现在我只获得了开发目标 iOS 6。但是，我必须在 xCode 4.5.1 中部署两个版本的 sdk（iOS 5 和 iOS 4）。

**如何在 xCode4.5.1 中同时拥有 iOS 5 和 iOS 4 SDK（模拟器）？**

请帮忙。

谢谢，鲁比尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:05:48.300

这是你需要做的..

*   从 developer.apple.com 下载 XCode 4.3.* dmg 并安装应用程序
*   双击 dmg 文件
*   右键单击 XCode 图标并选择“显示包内容”
*   导航到目录 /Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs
*   将目录 iPhoneSimulator5.1.sdk 拖到桌面
*   打开终端会话并执行以下命令

    cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs

    sudo mv $HOME/Desktop/iPhoneSimulator5.1.sdk 。

    sudo chmod -R root:wheel iPhoneSimulator5.1.sdk

*   重启 XCode

*   现在，如果您启动模拟器，您应该能够切换到硬件下的 iOS 5.1 选项
*   如果你还想在 iOS5 上测试，从 iPhoneOS.platform 目录复制相关的 SDK

# android - Custom button: glass effect

> ID：13049876
> 
> 赞同：1
> 
> 时间：2012-10-24T13:07:07.210
> 
> 标签：android, button, graphic

I need to create a custom button graphic with a border, a gradient background and a glass effect:

![Custom button graphics with ](../Images/77c4f0d098e9aa8bd600050318c8c0e2.png)

I **don't want to use** 9patch or code a custom class, just xml (shapes, layers, ...).

Here the XML code I use to draw the button (it doesn't not include the "glass effect" yet!):

```
<layer-list>
</shape>

    <!-- item to draw the inner border and the background -->
    <item>
        <shape>
            <stroke
                android:width="4px"
                android:color="#5f87aa" />

            <corners android:radius="10dp" />

            <gradient
                android:angle="270"
                android:endColor="#034b89"
                android:startColor="#03437b" />
        </shape>
    </item>

    <!-- item to draw the outer border (transparent background) -->
    <item>
        <shape>

            <stroke
                android:width="2px"
                android:color="#212121" />

            <corners android:radius="10dp" />

        <solid android:color="#00000000" />
    </item>
</layer-list> 
```

it looks like this:

![Custtom button whit no ](../Images/f9e3ee2bc0923880b729e7fb8ff901a2.png)

So what can I do to have also the glass effect on it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:28:21.640

I answer my own question: seems there are no solution to my problem. Only code (and 9-patch) can solve it. So, I make my own button extending the standard "Button".

This is the code used to draw the shine effect when regenerating the button graphic:

```
//get the drawing rectangle (calculate inner/outer border width)
RectF sr = new RectF();

sr.set(cr.left + innerBorderScaledSize / 2f, 
       cr.top + innerBorderScaledSize / 2f, 
       cr.right - innerBorderScaledSize / 2f,
(cr.top - innerBorderScaledSize / 2f 
+ cr.bottom - innerBorderScaledSize / 2f) / 2f);

RectF cor = new RectF();
cor.set(sr.left, sr.top, sr.left + cornerScaledRaius, sr.top + cornerScaledRaius);

//here the interesting part: draw the shape   
Path path = new Path();
path.reset();
path.moveTo(sr.left, sr.bottom);
path.lineTo(sr.left, sr.top + cornerScaledRaius);
path.arcTo(cor, 180, 90);
cor.set(sr.right - cornerScaledRaius, sr.top, sr.right, sr.top + cornerScaledRaius);
path.arcTo(cor, 270, 90);
path.lineTo(sr.right, sr.bottom);
path.close();
canvas.drawPath(path, shinePaint); 
```

So I simply draw a custom and rounded semi-transparent shape on the background using a Paint

```
Paint shinePaint = new Paint();
shinePaint.setAntiAlias(true);
shinePaint.setStyle(Paint.Style.FILL);
shinePaint.setColor(0x16ffffff); 
```

u

here the XML code for the button layout:

```
<xxx.uicomponents.iconbutton.IconButton
android:layout_height="match_parent"
android:layout_width="match_parent"
android:background="@drawable/standard_button_background"
android:textColor="@drawable/standard_button_text"
android:textStyle="bold"
android:textSize="14dp"
android:text="Click me" /> 
```

Hope this help!

# java - 从 Java/SQL 文件中提取 SQL 语句

> ID：13049878
> 
> 赞同：0
> 
> 时间：2012-10-24T13:07:07.027
> 
> 标签：java, sql, regex, text-extraction

我有一个巨大的代码库，里面有很多 JAVA 和 .sql 文件。我打算从所有这些文件中提取所有 SQL 语句。

这是我打算实现这一目标的方式 -

1.  构建一个正则表达式文件，其中包含我打算提取的选择、插入、删除、更新等模式。
2.  在代码库中逐行解析文件并与正则表达式匹配。如果找到匹配项，则注册代码行、文件名、模式等。

当 SQL 查询被分成多行时，问题就出现了。

当我使用 Buffered Reader 读取行时，我正在使用 java.util.regex.Matcher 和 java.util.regex.Pattern 方法来构建/匹配正则表达式模式。

```
 pattern = Pattern.compile(regexString,Pattern.CASE_INSENSITIVE);
  .
  .
  matcher = pattern.matcher(lineBuffer.readline().trim());
  if( matcher.find()){
    //Do something
  } 
```

对于多行语句，我应该寻找行终止符“;” - 如果找不到，我可以读取下一行并将输出附加到匹配的字符串中，以便将其理解为单个查询。

```
 while(!lineString.endsWith(";")) {
   lineString = lineString + lineBfr.readLine().trim();
 } 
```

有没有更好的方法来解决这里的需求，使用 Pattern.MULTILINE 或使用 StreamBuffers 我将整个文件读入单个缓冲区并进一步处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:11:55.000

您可以利用[Apache Commons](http://commons.apache.org/io/)及其出色的方法[FileUtils#readFileToString(File file)](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString%28java.io.File%29)。
这与`Pattern.MULTILINE`您提到的相结合似乎是一个非常简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:22:31.970

除非您的文件仅包含一致可预测格式的 SQL 语句，否则我认为使用正则表达式解析 SQL 语句将变得非常复杂。

表面上看起来很简单，但是有很多很多特殊情况需要处理。

*   如何正确处理评论？
*   那么字符串中包含的单词 SELECT 或分号呢？
*   字符串转义字符呢？

等等。如果你不处理所有这些，你甚至无法做像获取所有语句这样简单的事情。

更好的方法是使用现有库为您解析 SQL。在这个问题中，Java 似乎有几个不错的选择：[SQL parser library for Java](https://stackoverflow.com/questions/660609/sql-parser-library-for-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T19:12:38.847

对于 Java 文件，或者更准确地说，编译的 Java 类，我正在尝试类似的东西，但我正在使用 Java 反编译器`javap -verbose`来搜索以 SQL 语句开头`select`或以其他方式显示为 SQL 语句的字符串（Utf8 类型）。

这是一项正在进行的工作，我自己也很困惑，所以我不能发布一个完整的解决方案，但这应该足以建立起来。

# functional-programming - 标准 ML 函子示例

> ID：13049882
> 
> 赞同：10
> 
> 时间：2012-10-24T13:07:18.133
> 
> 标签：functional-programming, sml, functor, ml

标准 ML 中的函子与模块系统相关，可以基于其他结构生成结构。下面给出了一个为各种类型的列表生成列表组合子的仿函数的例子，但是这个例子有一个问题：

各种类型的列表都有优点——例如，惰性列表可以无限长，串联列表有一个 O(1) 的串联运算符。但是当所有这些列表类型都符合相同的签名时，仿函数只能使用它们的一般属性。

因此，我的问题是：什么是函子有用并且各种生成的结构不会失去其特殊能力的好例子？

```
signature MYLIST =
sig
  type 'a t
  val null : 'a t -> bool
  val empty : 'a t
  val cons : 'a * 'a t -> 'a t
  val hd : 'a t -> 'a
  val tl : 'a t -> 'a t
end

structure RegularList : MYLIST =
struct
  type 'a t = 'a list
  val null = List.null
  val empty = []
  val cons = op::
  val hd = List.hd
  val tl = List.tl
end

structure LazyList : MYLIST =
struct
  datatype 'a t = Nil | Cons of 'a * (unit -> 'a t)
   val empty = Nil
   fun null Nil = true
    | null _ = false
   fun cons (x, xs) = Cons (x, fn () => xs)
   fun hd Nil = raise Empty
    | hd (Cons (x, _)) = x
   fun tl Nil = raise Empty
    | tl (Cons (_, f)) = f ()
end

structure ConcatList : MYLIST =
struct
  datatype 'a t = Nil | Singleton of 'a | Concat of 'a t * 'a t
  val empty = Nil
  fun null Nil = true
    | null (Singleton _) = false
    | null (Concat (xs, ys)) = null xs andalso null ys
  fun cons (x, xs) = Concat (Singleton x, xs)
  fun hd Nil = raise Empty
    | hd (Singleton x) = x
    | hd (Concat (xs, ys)) = hd xs
  fun tl Nil = raise Empty
    | tl (Singleton x) = Nil
    | tl (Concat (xs, ys)) = (* exercise *)
end

signature MYLISTCOMB =
sig
  type 'a t
  val length : 'a liste -> int
  val map : ('a -> 'b) -> 'a liste -> 'b liste
  val foldl : ('a * 'b -> 'b) -> 'b -> 'a liste -> 'b
  val append : 'a liste * 'a liste -> 'a liste
  val concat : 'a liste liste -> 'a liste
  val sort : ('a * 'a -> order) -> 'a t -> 'a t
end

functor ListComb (X : MYLIST) : MYLISTCOMB =
struct
  type 'a t = 'a X.t
  open X

  fun length xs =
      if null xs then 0
      else 1 + length (tl xs)

  fun map f xs =
      if null xs then empty
      else cons(f (hd xs), map f (tl xs))

  fun foldl f e xs =
      if null xs then e
      else foldl f (f (hd xs, e)) (tl xs)

  fun append (xs, ys) =
      if null xs then ys
      else cons (hd xs, append (tl xs, ys))

  fun concat xs =
      if null xs then empty
      else append (hd xs, concat (tl xs))

  fun sort cmp xs = (* exercise *)
end

structure RegularListComb = ListComb (RegularList)
structure LazyListComb = ListComb (LazyList)
structure ConcatListComb = ListComb (ConcatList) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T08:51:36.970

不确定我是否完全理解你的问题。显然，函子对于定义模块化抽象很有用，这些抽象 (1) 是多态的，(2) 需要对其类型参数进行一整套操作，以及 (3) 提供类型作为其结果的一部分（特别是*抽象*类型），以及(4)提供一整套操作。

请注意，您的示例没有使用 (3)，这可能是函子最有趣的方面。想象一下，例如，实现一个抽象矩阵类型，您希望对它所基于的向量类型进行参数化。

ML 函子以及核心语言多态函数的一个特定特征是它们是*参数化*的。参数性是一种语义属性，表示（多态代码的）评估忽略了它实例化的具体类型。这是一个重要的属性，因为它暗示了各种语义上的好处。特别是，它提供了非常强大的抽象和推理原则（例如，参见 Wadler 的[“Theorem's for free！” ，或者我在](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.38.9875)[回答另一个问题](https://stackoverflow.com/a/10813898/1097780)时给出的简短解释）。它也是类型擦除编译的基础（即，运行时不需要类型）。

参数化意味着*单个*函子不能对不同类型有不同的实现——这似乎是你要问的。但是，当然，您可以自由编写多个函子，对它们的参数做出不同的语义/复杂性假设。

希望那种回答你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T14:26:13.317

下面是一些有用的 SML 仿函数示例。它们是在以下前提下制作的：如果您可以做一组事情，那么您就可以做另一组事情。

**集合的函子：**如果您可以比较元素，则可以使用平衡的数据结构（例如二叉搜索树或其他类型的树）创建集合。

```
signature SET =
sig
    type elem
    type set
    val empty : set
    val singleton : elem -> set
    val union : set -> set -> set
    val intersect : set -> set -> set
end

signature ORD =
sig
    type t
    val compare : t * t -> order
end

functor BalancedSetFunctor(structure Cmp : ORD) :> SET =
struct
    type elem = Cmp.t
    type set = ...

    val empty = ...
    fun singleton x = ...
    fun union s1 s2 = ...
    fun intersect s1 s2 = ...
end 
```

**迭代函子：**对于任何类型的事物集合（例如列表），如果可以迭代它们，则可以自动折叠它们。您还可以为折叠同一数据类型的不同方式创建不同的结构（例如，树的前序、中序和后序遍历）。

```
signature ITERABLE =
sig
    type elem
    type collection
    val next : collection -> (elem * collection) option
end

signature FOLD =
sig
    type elem
    type collection
    val fold : (elem * 'b -> 'b) -> 'b -> collection -> 'b
end

functor FoldFunctor(Iter : ITERABLE) :> FOLD =
struct
    type elem = Iter.elem
    type collection = Iter.collection

    fun fold f e xs =
        case Iter.next xs of
            NONE => e
          | SOME (x, xs') => fold f (f (x, e)) xs'
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T01:18:16.423

函子是“提升者”——它们*提升*（这个动词是标准的 FP 术语）：对于给定的一组类型和值，它们允许您在它们之上创建一组新的类型和值。所有符合所需模块接口的模块都可以从函子中“受益”，但它们不会失去其特殊能力，如果您所说的能力是指实现特定的优势。

例如，你的例子很好地证明了我的观点：连接列表有一个非常快的`concat`运算符，正如你所写的，当用函子提升时，这种“能力”不会消失。它仍然存在，甚至可能被仿函数代码使用。所以在这个例子中，仿函数代码实际上从列表实现中受益，*而不*知道它。这是一个非常强大的概念。

另一方面，由于模块在被函子提升时必须适合接口，因此多余的值和类型会在此过程中丢失，这可能很烦人。尽管如此，根据 ML 方言，此限制可能会有所放松。

# php - 如何在 PHP 中从 XML 中删除空节点

> ID：13049883
> 
> 赞同：1
> 
> 时间：2012-10-24T13:07:16.933
> 
> 标签：php, xml, nodes

我正在提交一个表单（经过一些验证）并像这样编译一些 xml：

```
$sxe = new SimpleXMLElement($xmlstr);
$MyFirstNode = $sxe->addChild('MyFirstNode', $_POST["MyTitle"]); 
$MySecondNode = $sxe->addChild('MySecondNode');
$MyTHIRDNode = $MySecondNode->addChild('MyTHIRDNode', $_POST["FormElementName"]); 
```

在此之后，我使用以下代码将 xml 写入文档；

```
$myFile = "myfilename.xml";
$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $sxe->asXML());
fclose($fh); 
```

在一种情况下，我需要生成包含任何空节点的 XML。所以在上面的例子中，如果`FormElementName`是空的就可以了（产生类似的东西`<MyTHIRDNode></MyTHIRDNode>`

但是，在另一种情况下，我需要删除所有这些空节点，所以我只剩下包含某种数据的节点：

```
<node>
    <one>Hello</one>
    <two></two> // <- Empty
    <three>World!</three>
</node>

// Becomes...
<node>
    <one>Hello</one>
    <three>World!</three> 
</node> 
```

我准备了一个 if 语句来区分这两种情况：

```
if ($_POST["operation"] == "UPDATE") {
    //do something
} 
```

但是，我不确定如何遍历我的 '$sxe' 并删除这些空节点。

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:20:09.703

**如果（感觉很懒）这样做：**

```
$xmlsz = $xml->asXML(); // Get XML code from your SXE
// Keep retrying as some empty nodes may contain other empty nodes
while(true){
    $xmlsz_ref = $xmlsz; // keep old version as reference
    // Remove <node></node> empty nodes
    $xmlsz = preg_replace('~<[^\\s>]+>\\s*</\\1>~si', null, $xmlsz);
    // Remove <node /> empty nodes
    $xmlsz = preg_replace('~<[^\\s>]+\\s*/>~si', null, $xmlsz);
    if($xmlsz_ref === $xmlsz) break; // If not changed, break!
}
$xmlsz = simplexml_load_string($xmlsz); // reparse XML code to your SEX 
```

*代码是在这里编写的，没有经过测试。*应该管用！

# php - 当字符串由数字和字母组成时使用 Order By 仅按数字排序

> ID：13049887
> 
> 赞同：0
> 
> 时间：2012-10-24T13:07:37.743
> 
> 标签：php, mysql

我有一列是我需要排序的，其中包含字母字符和数字

现在以下值

ABC223 ABC12

现在我只需要通过忽略字符串中的字母字符的数字对其进行排序，

需要记住的是，有时值可以以 GD 开头，有时只有 A 有时 123AB 等

这是可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:10:26.200

你可以这样做：

```
ORDER BY SUBSTRING(YourColumn, 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:20:51.960

看看：[https](https://launchpad.net/mysql-udf-regexp) ://launchpad.net/mysql-udf-regexp和[如何在 MySQL 中进行正则表达式替换？](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)

如果您使用`udf`，您可以使用正则表达式替换执行 ORDER BY。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:23:22.597

您可以使用[`uasort`](http://www.php.net/manual/en/function.uasort.php)对包含该值的数组进行排序。

例如：

```
$pattern = "/\d+/";
$values = array('ABC123', 'ABC12', 'GD44'); //Just for example

uasort($values, function ($a, $b) use ($pattern)
   {
       $matches = array();
       preg_match($pattern, $a, $matches);
       $a = $matches[0];
       preg_match($pattern, $b, $matches);
       $b = $matches[0];

       return $a - $b;
   });

var_dump($values); 
```

Also you can use `udf` for manipulating `regex` using sql query.

# c - scanf 的工作并检查输入是否为 int

> ID：13049893
> 
> 赞同：3
> 
> 时间：2012-10-24T13:07:54.347
> 
> 标签：c, int, scanf

我想检查给定的输入是否是整数输入。我不想将输入存储在字符串中。在看到有关 stackoverflow 的几个问题并通过点击和试用后，我创建了以下代码

```
while(scanf("%d%c",&num,&a) != 2 || a != '\n')
{
    printf("Please enter an integer only : ");
    if(a == '\n')
        scanf("%c",&a);
    else
    {
        while(a != '\n')
            scanf("%c",&a);
    }
} 
```

它有效，但根据我的理解，以下内容也应该有效

```
while(scanf("%d%c",&num,&a) != 2 || a != '\n')
{
    printf("Please enter an integer only : ");
    while(a != '\n')
        scanf("%c",&a);
} 
```

有人可以告诉我为什么上面没有工作吗？另外，如果有人有更好的解决方案，请也提供。

注意：我将 12qwe 也视为无效输入。我只想要整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:23:04.567

问题与

```
while(scanf("%d%c",&num,&a) != 2 || a != '\n')
{
    printf("Please enter an integer only : ");
    while(a != '\n')
        scanf("%c",&a);
} 
```

是如果在扫描之前`a`恰好包含`'\n'`，并且扫描失败，则内部`while`循环根本不会运行。所以

*   如果扫描尝试`int`从输入流中解析 an 失败，因为输入是 eg `"ab c\n"`，有问题的输入仍保留在输入流中，`scanf`外`while`循环控制中的下一个`int`再次解析失败，`a`保留`'\n'`，重复。

*   如果在将字符从流中读取到 之前发生输入错误`a`，`scanf`则外部循环控制由于流损坏而失败，请重复。

在另一个版本中，

```
while(scanf("%d%c",&num,&a) != 2 || a != '\n')
{
    printf("Please enter an integer only : ");
    if(a == '\n')
        scanf("%c",&a);
    else
    {
        while(a != '\n')
            scanf("%c",&a);
    }
} 
```

只要有要从流中读取的输入，您至少会取得一些进展，因为无论`a`包含什么，在尝试下一次解析`int`. 如果输入流被损坏/关闭/过早结束，它也会导致无限循环，例如，如果您从空文件重定向标准输入。您还可以`"Please enter an integer only : "`通过输入“a\nb\nc\nd\n”之类的输入来让该循环输出多条消息。

因此，在从输入转换任何内容之前，您应该检查是否`scanf`遇到了流的结尾或其他一些读取错误，并在这种情况下中止：

```
int reads;
while(((reads = scanf("%d%c", &num, &a)) != 2 && reads != EOF) || a != '\n')
{
    printf("Please enter an integer only : ");
    // read at least one character until the next newline
    do {
        reads = scanf("%c", &a);
    }while(reads != EOF && a != '\n');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:11:54.007

这是一种错误的做法。您可以使用读取输入`fgets()`，然后将字符串解析为整数 ASCII 范围。

```
fgets(s, 1024, stdin)

for (i=0; s[i] ! = '\0';i++) {
if( s[i] <'0' && s[i] >'9')
  // not an integer<br> 
```

您还可以使用标准函数，如`isalnum`等`isalpha`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T14:44:07.110

它工作......</p>

```
while(scanf("%d%c",&num,&a) != 2 || a != '\n')
{
    printf("Please enter an integer only : ");
    do{
        scanf("%c",&a);
    }while(a != '\n');
} 
```

# matlab - 什么设计模式提供静态方法来产生类实例

> ID：13049894
> 
> 赞同：2
> 
> 时间：2012-10-24T13:07:54.250
> 
> 标签：matlab, design-patterns

我正在尝试了解我正在绊倒的设计模式......请耐心等待我使用的语言是 Matlab 并且 OO 在某些领域有点弱，而且我在实现设计模式方面相对缺乏经验。

我有一个 ComplexObject，其中构造函数变得过于复杂。首先，我的构造函数允许 0、1 或 2 个参数，即“空”ComplexObject、从 ModelObject 构建的 ComplexObject 或从 ModelObject+ConfigObject 构建的 ComplexObject。（ModelObject 和 ConfigObject 是基本的文件解析器）。

我不能在 Matlab 中重载构造函数，所以在我将其中的一些更改为静态方法以使构造函数只是一个空的类初始化程序之后，我基本上将输入参数的类类型切换到构造函数，并且静态 ComplexObject.createFromModel 和 ComplexObject.createFromModelAndConfig 类产生了 ComplexObjects。

然后我决定我的 ComplexObject 代码被所有这些构造东西所支配，并且业务逻辑不清晰，所以我编写了一个 ComplexObjectFactory 类，并且基本上将静态方法移到了该类中。现在，由于静态方法实际上调用了更多私有（静态！？）方法来构建 ComplexObject，我对这些私有静态方法的调用约定感到有些困惑:(

最后，我现在尝试添加一些代码以将 ComplexObject 的一部分写回磁盘。有趣的是，这实际上是用于构建 ConfigObject 的同一个磁盘文件...所以我想要类似 ComplexObject.writeConfigFile... 或者应该是 ComplexObjectFactory.writeConfigFile(myComplexObject)。为了使事情进一步复杂化，我想要多种类型的“配置”文件格式。

我目前的课程看起来像：

```
classdef ComplexObjectFactory
    methods (Static)
        function product = createFromModel(modelObj)
            product = ComplexObject()
            ComplexObjectFactory.helper1(product)
        end
        function product = createFromModelAndConfig(modelObj, configObj)
            product = ComplexObjectFactory.createFromModel(modelObj)
            ComplexObjectFactory.helper2(product, configObj)
        end
    end
    methods (Private, Static)
        function helper1(product)
        function helper2(product)
    end
end
classdef ComplexObject
    methods
        function self = ComplexObject(varargin)
            <init>
        end
    end
end

classdef ComplexObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:16:37.613

不确定我是否完全理解你的问题，如果我在这里偏离主题，请告诉我。

就像您写的那样，创建对象的设计模式称为工厂。您提到的其他功能，例如写入磁盘应该是对象本身的责任。

# c++ - QML：来自设计感知的 qml 页面之间的导航

> ID：13049896
> 
> 赞同：8
> 
> 时间：2012-10-24T13:08:24.053
> 
> 标签：c++, qt, qml, qt-quick

我们需要开发一个 QtQuick 项目，其中有大约 100 个屏幕。

我曾尝试为导航制作一个演示项目，该项目在按钮单击时具有三个屏幕。我在页面之间的导航中使用了“状态”的概念。最初我使用“加载器”尝试了相同的操作，但加载器无法保留页面的先前状态，它在导航期间重新加载了整个页面。

下面是 main.qml 的代码片段

```
// import QtQuick 1.0 // to target S60 5th Edition or Maemo 5
import QtQuick 1.1

Rectangle {
    id:main_rectangle
    width: 360
    height: 640

    Page1{
        id:page1
    }

    Page2{
        id:page2
    }

    Page3{
        id:page3
    }

    states: [
        State {

            name: "page2"

            PropertyChanges { target: page3; visible:false; }
            PropertyChanges { target: page1; visible:false; }
            PropertyChanges { target: page2; visible:true; }
        },
        State {
            name: "page1"
            PropertyChanges { target: page3; visible:false; }
            PropertyChanges { target: page2; visible:false; }
            PropertyChanges { target: page1; visible:true; }
        },

        State {
            name: "page3"
            PropertyChanges { target: page1; visible:false; }
            PropertyChanges { target: page2; visible:false; }
            PropertyChanges { target: page3; visible:true; }
        }

    ]

} 
```

这在具有三个屏幕的小型 POC 上运行良好，但为 100 个屏幕定义状态是不可行的。

从设计方面我们得出结论，要制作一个 C++ 控制器，我们可以控制各种页面的状态和可见性。

需要有关如何在 C++ 中实现“状态”逻辑的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:04:31.507

这是纯 QML 中最简单的解决方案，使用可配置的页面列表（如模型）+ 中继器 + 加载器项目在启动时不加载所有内容（延迟实例化）并且在隐藏页面后不破坏页面（不必重新加载它如果我们回到它）：

```
import QtQuick 1.1

Rectangle {
    id: main_rectangle;
    width: 360;
    height: 640;

    // Put the name of the QML files containing your pages (without the '.qml')
    property variant pagesList  : [
        "Page1",
        "Page2",
        "Page3",
        "Page4",
        "Page5"
    ];

    // Set this property to another file name to change page
    property string  currentPage : "Page1";

    Repeater {
        model: pagesList;
        delegate: Loader {
            active: false;
            asynchronous: true;
            anchors.fill: parent;
            visible: (currentPage === modelData);
            source: "%1.qml".arg(modelData)
            onVisibleChanged:      { loadIfNotLoaded(); }
            Component.onCompleted: { loadIfNotLoaded(); }

            function loadIfNotLoaded () {
                // to load the file at first show
                if (visible && !active) {
                    active = true;
                }
            }
        }
    }
} 
```

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:04:02.917

我建议使用 Qt Quick Components 中的 StackView。[这](http://doc.qt.io/qt-5/qml-qtquick-controls-stackview.html)是它的文档。

# c# - 为数据绑定的 datagridview 实现虚拟模式

> ID：13049899
> 
> 赞同：4
> 
> 时间：2012-10-24T13:08:30.530
> 
> 标签：c#, .net, data-binding, datagridview, virtualmode

一个关于实施建议的一般问题。

我有一个绑定到`datagridview`.

```
BindingList<Line> allLines = new BindingList<Line>();
dataGridView1.DataSource = allLines; 
```

我想实现`virtual mode`是因为集合可能包含数百万个条目（`Line`对象），所以我认为一次只“缓存”或显示一些需要的条目可能会更快。我理解虚拟模式的用途是什么？

我看过：http: [//msdn.microsoft.com/en-us/library/2b177d6d.aspx](http://msdn.microsoft.com/en-us/library/2b177d6d.aspx)

但我无法让它为 a `datagridview`that is工作`databound`。

我无法指定行数：

```
this.dataGridView1.RowCount = 20;
`RowCount property cannot be set on a data-bound DataGridView control.` 
```

编辑：此链接表明我可能必须完全删除绑定。是这样吗？[http://msdn.microsoft.com/en-us/library/ms171622.aspx](http://msdn.microsoft.com/en-us/library/ms171622.aspx)

“如果绑定模式不能满足您的性能需求，您可以通过虚拟模式事件处理程序管理自定义缓存中的所有数据。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T13:32:04.067

如果要使用[DataGridView.VirtualMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.virtualmode.aspx)，则不应使用绑定数据集。他们是对立的。因此，您无需设置`DataSource`，只需设置属性并为[DataGridView.CellValueNeeded Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvalueneeded.aspx)`RowCount`提供事件处理程序。

除了你需要先设置`dataGridView.VirtualMode`属性`true`，可能写在设计器中。默认情况下它设置为`false`，这就是为什么你得到一个异常，说你不能设置`RowCount`。

可能您必须手动初始化网格的列。

在刷新网格时（例如，单击按钮），您必须

```
dataGridView.RowCount = 0;
\\refresh your cache, where you store rows for the grid
\\...
dataGridView.RowCount = yourCache.Count;//or some other property, getting the number of cached rows. 
```

该`CellValueNeeded`事件将为每一行的每一列触发，具体取决于 RowCount 和列数。您应该`e.Value`在事件处理程序中设置已处理单元格的值，具体取决于`e.RowIndex`和`e.ColumnIndex`。

因此，要使其正常工作，您至少需要处理`CellValueNeeded`. 如果您的 DataGridView 是只读的，则不需要其他事件。

[Windows 窗体 DataGridView 控件中的虚拟模式](http://msdn.microsoft.com/en-us/library/ms171622.aspx)提供了更完整和连续的概述。

# mysql - mysql 根据关联表中的数据更新重复记录

> ID：13049901
> 
> 赞同：0
> 
> 时间：2012-10-24T13:08:32.450
> 
> 标签：mysql

好的，我将尝试再次提出这个问题。我的上一篇文章已关闭，因为它不是一个更详细的问题，所以我会尝试更具体。

用户收到消息并标记状态`unread`或`read`基于他们是否点击了他们已阅读消息的帽子。

好吧，有些用户说他们收到了重复的消息。问题是跟踪消息的记录在第二个表中。所以两张桌子看起来像这样

主题表

```
id     user_id     message_id        created        status
1      34          81                03/11/12       read
2      34          82                06/15/12       unread
3      34          83                06/16/12       unread
4      35          84                07/10/12       read
5      35          85                07/12/12       unread
6      35          86                07/14/12       unread
7      35          87                07/14/12       unread
8      24          88                08/09/12       read 
```

消息表

```
id     message     
81     'welcome'         
82     'welcome'  //duplicate for user 34, associated table needs to be set to read      
83     'welcome'  //duplicate for user 34, this record needs to be set to read        
84     'welcome'          
85     'welcome'
86     'welcome'
87     'pretty cool' //not a duplicate for user 35
88     'welcome'  // not a duplicate for user 24 
```

这个问题与第一个问题的不同之处在于这里有一个关联表。我需要遍历每个表，并且只更新具有重复消息的表。看到 message_table 中的记录 87？好吧，没有重复，所以被忽略了。

所以我的问题是如何根据与关联表的重复来更新表 1。

# [编辑]

当我的意思是重复时，我的意思是所有具有相同消息值的关联消息的用户。所以看这个例子。`user_id`34 有 3 条记录。如果我们查找`message_id`每条记录，我们会发现相同的消息“欢迎”重复了 3 次。这是`user_id`34的重复记录

## 以下为失败

```
UPDATE subject_table
SET `status` = 'read'
WHERE
    user_id IN (
        SELECT
            s.user_id
        FROM
            subject_table s
        INNER JOIN messages m ON m.id = s.message_id
        WHERE
            m.message LIKE '%welcome%'
        GROUP BY
            s.user_id
        HAVING
            count(s.user_id) > 1); 
```

我在这里尝试做的是在我的子查询中，获取具有多个重复记录的 id 列表，然后更新关联的记录状态以读取。但是我遇到的问题是以下错误

```
Error : You can't specify target table 'subject_table' for update in FROM clause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:20:01.227

假设对于要重复的消息，所有`user_id`和`message`必须`created`相同，则应使用以下语句：

```
UPDATE subject_table, message_table
SET    subject_table.status = <status>
WHERE  subject_table.message_id = message_table.id
AND    subject_table.user_id = <user-id>
AND    message_table.message = <message>
AND    subject_table.created = <created> 
```

（其中`<user_id>`和是各列实际值的占位符，`<message>`是新状态的值）`<created>``<status>`

这称为多表 UPDATE 语法，并在此处描述：http: [//dev.mysql.com/doc/refman/5.6/en/update.html](http://dev.mysql.com/doc/refman/5.6/en/update.html)

# tsql - 参数中的 T SQL 用例

> ID：13049903
> 
> 赞同：0
> 
> 时间：2012-10-24T13:08:50.053
> 
> 标签：tsql

我正在尝试使用案例语句设置变量值以确定财政年度，具体取决于月份，但我得到了财政年度返回的 Null 值：

```
declare
@Costcentre varchar(50)
,@dt date
,@dty int
,@dtm int

select @Costcentre = 'CAM'
SELECT @dt = '2012-09-30'
select @dtm = DATEPART(month,@dt)
select 
@dty = case when @dtm between 4 and 12 then DATEPART(year,@dt) + 1 end
,@dty = case when @dtm between 1 and 3 then DATEPART(year,@dt) end

select @dty 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:13:39.270

您只需要分配`@dty`一次：

```
select  @dty = case 
    when @dtm between 4 and 12 then DATEPART(year,@dt) + 1 
    when @dtm between 1 and 3 then DATEPART(year,@dt) 
end 
```

`@dty`否则，如果`@dtm`不在 1 和 3 之间，则只是覆盖。

# objective-c - 视图之间的转换，就好像一个是模态的

> ID：13049904
> 
> 赞同：1
> 
> 时间：2012-10-24T13:08:51.610
> 
> 标签：objective-c, ios, views

我有一个我想隐藏的登录屏幕：

```
[self dismissModalViewControllerAnimated:true]; 
```

但问题是我需要像这样显示它：

```
-(void)viewDidAppear:(BOOL)animated {
    [self presentModalViewController:loginScreen animated:false];
} 
```

这意味着我会在弹出登录屏幕之前闪烁当前屏幕。

所以我正在寻找一种立即显示登录屏幕并使用与 dissmissModalViewControllerAnimated:true 相同的动画过渡到主屏幕的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:11:12.040

你应该能够禁用动画所以它的瞬间？

```
[self presentModalViewController:loginScreen animated:NO]; 
```

如果它仍然短暂闪烁，请在 viewWillAppear 中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:14:55.547

我做了什么（也许不是最好的解决方案）：

```
- (void)viewDidLoad
{
    // Initial set to hidden for avoiding a flickering UI
    self.view.hidden=YES;
}
-(void)viewWillAppear:(BOOL)animated
{
    [NSTimer scheduledTimerWithTimeInterval:0 block:^{
        [self presentModalViewController:self.loginViewController animated:NO];
    } repeats:false];

} 
```

就在您调度您设置的 ModalViewController 之前`self.view.hidden=NO`。有关使用块的 NSTimer，请参阅[https://github.com/jivadevoe/NSTimer-Blocks](https://github.com/jivadevoe/NSTimer-Blocks)

# c++ - 特殊结构：分组（函数指针和函数指针分组）

> ID：13049911
> 
> 赞同：0
> 
> 时间：2012-10-24T13:09:13.250
> 
> 标签：c++, struct, unions

我需要声明一个包含函数指针列表的“事物”，并且需要以两种方式访问​​它们：

*   直接调用`function.myStructVar.attr1`

*   循环通过它们，因为它是`vector.myStructVar.vec[1]`

因此，我想：“struct + union 是我的解决方案”我将声明一个包含我想要的变量的结构，然后声明一个与该结构和一个函数指针向量的联合。

但事情变得更加复杂了。现在，我想将指向函数的指针与指向函数的指针容器混合在一起，而不是只有指向函数的指针。（我知道，这很奇怪，我不太清楚：S）

恢复：我想要一组（指向函数的指针和指向函数的指针分组）。而且我希望能够以一种我不需要知道它们的结构的方式访问它们。

可能吗？如何？

最终目标：我想要这样的对象：

对象A：

```
-Eat Apple
-Eat Bannana
--DoDigestion(this is a:
-->DigestApple
-->DigestBannana
-->AddAcid
) 
```

对象B：

```
-Eat Potato
-Eat Bannana
--DoDigestion(this is a:
-->DigestBannana
-->AddWater
) 
```

最后，这个想法是定义某种将要做什么的规范，并将其发送到将要执行的函数：

执行人：

```
 void execute(Object):
       foreach(Action a in Object) do(a);
       foreach(GroupOfAction g in Object) execute(g); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:08:27.560

简单的解决方案是把你`GroupOfAction`变成`Action`它自己。然后给出你正在寻找的“东西” `GroupOfAction`，它现在可以包含子组。

C++11 已经有一个“ `Action`”类，`std::function<void(void)>`. 所以：

```
typedef std::function<void(void)> Action;
typedef std::list<Action> GroupOfAction;
Action Group(GroupOfAction const& list)
{
  return [list](){ for (Action& a : list) { a(); } }
} 
```

# ios - 什么是 iPad mini 用户代理？

> ID：13049914
> 
> 赞同：10
> 
> 时间：2012-10-24T13:09:17.543
> 
> 标签：ios, ipad, ipad-mini

什么是 iPad mini 用户代理？

如何区分 iPad 和 iPad mini？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T19:06:06.770

在我的 16 gig iPad mini [whatsmyuseragent.com](http://whatsmyuseragent.com/)返回：

> Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A406 Safari/8536.25

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T13:13:50.970

iPad Mini 的分辨率与 iPad 2 相同，它不应该是视网膜显示器，因此您可以使用以下代码通过 JavaScript 获取该信息：

```
if (window.devicePixelRatio >= 2) {
    // retina display...
} else {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-18T03:08:14.610

关于检测 iPad mini (vs iPad 2)，[本文](http://www.mobilexweb.com/blog/ipad-mini-detection-for-html5-user-agent)建议**无法**以编程方式确定您是在 iPad mini (v1) 还是 iPad 2 上运行。这似乎是 Apple 非常慎重的选择。

我很高兴被证明是错误的。有谁知道更好吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T23:41:59.480

console output of Navigator:

```
Navigator
appCodeName: "Mozilla"
appName: "Netscape"
appVersion: "5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A406 Safari/8536.25"
cookieEnabled: true
geolocation: Geolocation
language: "en-us"
mimeTypes: MimeTypeArray
onLine: true
platform: "iPad"
plugins: PluginArray
product: "Gecko"
productSub: "20030107"
standalone: false
userAgent: "Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A406 Safari/8536.25"
vendor: "Apple Computer, Inc."
vendorSub: ""
__proto__: NavigatorPrototype 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-10T19:17:07.717

以下是来自我的 32GB iPad Mini 的信息，以防它对任何人有所帮助：

```
32GB iPad Mini
Version 8.0.2 (12A405)
Model ME280LL/A 
```

根据 WhatsMyUserAgent.com 我的用户代理：

```
Mozilla/5.0 (iPad; CPU OS 8_0_2 like Mac OS X)
AppleWebKit/60.1.4 (KHTML, like Gecko) Version/8.0
Mobile/12A405 Safari/600.1.4 
```

# module - 系统包与应用程序包？

> ID：13049918
> 
> 赞同：1
> 
> 时间：2012-10-24T13:09:34.737
> 
> 标签：module, operating-system, software-distribution, software-packaging

以下是场景。我正在为开源应用程序开发一个开源模块。（例如：magento / wordpress / drupal）

现在，所有这个应用程序都提供了内置的模块安装界面。

我应该为我开发的每个模块构建一个 debiab 包并单独提供它以进行安装，这应该是一个好的解决方案吗？

我采用这种方法的原因是在更新操作系统和定期维护期间一次性更新实例数量。

这是一个可行的解决方案吗？还是我应该坚持经典结构。

干杯，迈克

# mysql - 左连接 - 未知列错误 1054

> ID：13049920
> 
> 赞同：0
> 
> 时间：2012-10-24T13:09:40.053
> 
> 标签：mysql, sql, database

我不断收到 #1054 - 'where 子句' 中的未知列 'color'。

我的查询的简化版本如下。

```
SELECT *, "red" AS colour
FROM (
    SELECT *,'calls' AS 'tbl', id AS cid FROM calls) as c
WHERE colour='red' 
ORDER BY colour ASC, c.created_date DESC 
```

如果我删除 WHERE 行，查询执行得很好并且颜色被识别并且一切都很好。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:26:48.817

对于您更新的问题，我认为您可以

```
SELECT * FROM (
SELECT *, "red" AS colour
FROM (
    SELECT *,'calls' AS 'tbl', id AS cid FROM calls) as c
) as v
WHERE colour='red' 
ORDER BY colour ASC, v.created_date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:17:00.363

尝试这个`WHERE c.status !='1'`

```
SELECT *, IF(c.status = '1', "green", "red") AS colour
FROM (
    SELECT *,'calls1' AS 'tbl', id AS cid FROM calls1  
    WHERE uid LIKE '%1111%' 
    ORDER BY timestamp DESC
    UNION
    SELECT *,'calls2' AS 'tbl', id AS cid FROM calls2  
    WHERE uid LIKE '%1111%' 
    ORDER BY timestamp DESC
) as c
LEFT JOIN objects AS o ON o.call_id = c.id 
WHERE c.status != '1'
ORDER BY colour ASC, c.timestamp DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:12:46.390

这是因为您不能在`WHERE`and`ORDER BY`子句中使用别名

所以你必须做类似的事情

```
SELECT *, IF(c.status = '1', "green", "red") AS colour
FROM (
    SELECT *,'calls1' AS 'tbl', id AS cid FROM calls1  
    WHERE uid LIKE '%1111%' 
    ORDER BY timestamp DESC
    UNION
    SELECT *,'calls2' AS 'tbl', id AS cid FROM calls2  
    WHERE uid LIKE '%1111%' 
    ORDER BY timestamp DESC
) as c
LEFT JOIN objects AS o ON o.call_id = c.id 
WHERE c.status = 'the color id you want' // or you can rewrite your if here
ORDER BY c.status ASC, c.timestamp DESC 
```

或者这用于您的简化查询

```
SELECT *, "red" AS colour
FROM (
    SELECT *,'calls' AS 'tbl', id AS cid FROM calls) as c
WHERE c.status = 'the color id you want' 
ORDER BY c.created_date DESC 
```

如果总是红色，为什么要按颜色排序？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:55:25.237

在 where 子句中为列使用别名不是一个好方法。请参考以下链接。

[http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)

* * *

标准 SQL 不允许在 WHERE 子句中引用列别名。施加此限制是因为在评估 WHERE 子句时，可能尚未确定列值。例如，以下查询是非法的：

```
SELECT id, COUNT(*) AS cnt FROM tbl_name  WHERE cnt > 0 GROUP BY id; 
```

* * *

对别名使用 HAVING 或更改条件以在 WHERE 子句中使用确切的列名。

# sql-server - SSAS - 我应该使用视图还是基础表？

> ID：13049922
> 
> 赞同：5
> 
> 时间：2012-10-24T13:09:53.103
> 
> 标签：sql-server, sql-server-2008-r2, ssas

我在 SQL Server 中设置了一组视图，它们准确输出我想包含在 SQL Server Analysis Services 多维数据集中的结果，包括计算多个维度（例如使用 DATEDIFF 的年龄、使用 DATENAME 的业务季度等） .)。我想知道的是使用这些视图作为多维数据集的数据源是否有意义，或者我是否应该使用基础表来重现 SSAS 中的逻辑。走任何一条路线都有什么影响？

我的担忧是：

*   数据集非常庞大，但我们需要快速访问结果，因此我希望将视图中完成的尽可能多的计算保留在 SSAS 数据仓库中
*   同样，因为数据集很大，我希望任何立方体的重新计算速度尽可能快

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T16:49:42.743

许多专家实际上建议在 SSAS 的数据源视图中使用视图。John Welch（Pragmatic Works、Microsoft MVP、Analysis Services Maestro）在今年的 SQL Rally Dallas 上谈到了他更喜欢在 DSV 中使用视图的方式。原因是它在多维数据集和物理表之间创建了一个层。

在多维数据集处理期间，计算视图中的列将花费一些额外的时间和资源。如果处理时间没问题，则将计算留在视图中。如果这是一个问题，您始终可以将持久计算列直接添加到事实表中，以便在事实表的插入/更新期间完成计算。这样做的缺点是您必须将列物理存储在事实表中。优点是不必在每次处理多维数据集时都计算它们。这些是您需要权衡的权衡，以决定走哪条路。

只需确保将源查询调整为尽可能高效即可。视图适用于 DSV。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T10:21:38.727

观点，永远！在 DSV 上使用表的唯一优点是它会自动映射您的键 :) 这可以为您节省 5 分钟的开发时间哈哈。

另外，“使用基础表重现 SSAS 中的逻辑”是指在 SSAS DSV 上创建计算列吗？这也是一个选项，但我宁愿将计算添加到视图中，因为如果我必须升级它们，重新部署视图比重新部署完整的多维数据集更容易（并且更不容易失败）。

# python - 带有 check_output 的 Python subprocess.call 错误消息

> ID：13049927
> 
> 赞同：0
> 
> 时间：2012-10-24T13:10:21.230
> 
> 标签：python, subprocess

所以我有：

```
result = subprocess.check_output(['wine',
                    os.getcwd()+'/static/sigcheck.exe',
                    '-a','-i','-q',
                    self.tmpfile.path()]) 
```

但是每当我运行它时，我都会收到此错误

```
CalledProcessError: Command '['wine', '/home/static/sigcheck.exe', '-a', '-i', '-q',     '/tmp/tmpxnsN5j']' returned non-zero exit status 1 
```

但如果我改成`check_output`它`call`可以正常工作：

```
Z:\tmp\tmpvOybcm:
    Verified:       Unsigned
    File date:      9:08 AM 10/24/2012
    Publisher:      Hardcore Computer
    Description:    Farthest Emitters Converter
    Product:        Farthest Emitters Converter
    Version:        3.2.0
    File version:   3.2.0
fixme:mscoree:StrongNameSignatureVerificationEx (L"Z:\\tmp\\tmpvOybcm", 1, 0x33ec13): stub
    Strong Name:    Unsigned
    Original Name:  n/a
    Internal Name:  Farthest Emitters Converter
    Copyright:      Hardcore Computer 2006
    Comments:       n/a 
```

有什么理由`check_output`不工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T13:12:58.383

非零返回码（通常）是指示程序错误退出的一种方式。`subprocess.check_output`如果进程的返回码不为零，那么将引发异常。如果您使用：

`retcode = call(...)`

然后打印返回码，我猜你会看到它返回 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T13:21:13.113

要在字符串中输出而不在非零退出状态上引发错误：

```
p = Popen(['wine',...], stdout=PIPE)
output = p.communicate()[0] 
```

`check_output()``rc = p.poll()`在 if之后执行`p.communicate()`并引发错误`bool(rc) == True`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:19:29.463

替代方式

```
proc = subprocess.Popen(['wine',
                    os.getcwd()+'/static/sigcheck.exe',
                    '-a','-i','-q',
                    self.tmpfile.path()], stdin=subprocess.PIPE,  stdout=subprocess.PIPE)
stdout = proc.stdout.read() 
```

# joomla - 在 Joomla 注册表单上添加额外字段

> ID：13049930
> 
> 赞同：0
> 
> 时间：2012-10-24T13:10:29.943
> 
> 标签：joomla

如何在 Joomla2.5 注册表单中添加额外字段？我正在使用配置文件插件，但我也想更改字段的顺序。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:46:04.727

复制配置文件插件并将其更改为您想要的，然后安装它并取消发布旧的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T11:12:11.290

有手册怎么做。打开字幕访问[http://www.youtube.com/watch?v=a6xsKLiXF40](http://www.youtube.com/watch?v=a6xsKLiXF40)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T19:01:23.913

您可以通过更改数据库和核心组件文件向注册表单添加其他字段。

首先查看 components\com_users\models\forms 目录，其中有一个名为 registration.xml 的 XML 文件。这是 joomla 创建注册表单字段的文件。我希望你能理解这个文件并添加你想要的任何必要的字段。

然后检查您的名为#__users 的数据库表并添加您想要的额外字段。（例如：如果您想添加电话号码，请添加字段 calld tp_no）。并确保使用与数据库表列的 XML 文件“字段名称”相同的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:29:23.233

我想你正在寻找这样的东西？

[http://extensions.joomla.org/extensions/access-a-security/site-access/authentication/14303](http://extensions.joomla.org/extensions/access-a-security/site-access/authentication/14303)

可能是短期和长期内最安全的解决方案。我没有使用它，但它看起来像你想要的并且从界面而不是更改硬代码。

# javascript - 在 Backbone View 渲染后将焦点设置在输入上

> ID：13049937
> 
> 赞同：0
> 
> 时间：2012-10-24T13:10:49.507
> 
> 标签：javascript, jquery, backbone.js, coffeescript

我有一个带有登录表单的视图，并且我试图在呈现视图后设置焦点。我试过这个，但没有奏效：

```
class App.Views.Login extends Backbone.View
  template: template("login")

  events:
    "click button": "login"

  render: ->
     @$el.html @template(@)
     @$el.find("#email").focus() 
```

也试过这个；

```
class App.Views.Login extends Backbone.View
  template: template("login")

  events:
    "click button": "login"

  render: ->
     @$el.html(@template(@)).ready =>
       @$el.find("#email").focus() 
```

添加了路由器以显示如何将 Login 附加到 DOM：

```
class App.Routers.App extends Backbone.Router
  initialize: ->
    chrome = new Spokely.Views.Chrome el: $("#app")
    chrome.render()
    @mainEl = $("#main")

  routes:
    "": "index"
    "ad/:id": "show"
    "about": "about"
    "login": "login"
    "signup": "signup"

  login: ->
    view = new Spokely.Views.Login()
    @mainEl.html view.render().el 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:41:59.623

似乎虽然您在视图中设置了焦点，但是当您将登录视图附加到主 DOM 时，焦点被重置（不再聚焦）。尝试：

```
login: ->
    view = new Spokely.Views.Login()
    @mainEl.html view.render().el    
    $("#email").focus() 
```

`Login`将视图附加到主 DOM后，使用 Jquery 调用 focus 方法。这肯定会奏效。

或者，您可以将“#main”作为 el 传递给登录视图本身。喜欢：

```
login: ->
        view = new Spokely.Views.Login el: $("#main")
        view.render() 
```

然后你不需要向路由器添加代码，你的初始代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T09:08:38.543

帖子很旧，但我仍然想在这里回答，因为它可能会对某人有所帮助。有更好更简单的方法。我们可以使用 onDomRefresh 事件来设置焦点。onDomRefresh 事件将在视图被渲染、显示然后重新渲染时调用。我们可以如下使用它：

```
onDomRefresh:function(){
  @$el.find("#email").focus()
} 
```

希望这可以帮助某人。

# java - 一维数组和二维数组

> ID：13049944
> 
> 赞同：0
> 
> 时间：2012-10-24T13:11:18.820
> 
> 标签：java, multidimensional-array

我想知道如何在java中将一维数组拆分为二维数组？我知道如何设置它们，并且我知道我必须使用 for 循环对它们进行迭代，我只是不确定我将如何去做。我有一个学生姓名数组，我希望前 5 个在顶行，然后下一个 5 在二维数组的底行，以便创建 5 个学生组。

到目前为止，我有：

```
public void main(String[] args)

{

  for (int x=0; x<5;x++)
  {
      for (int y=0; y<5;y++)
      {
          board[x][y] = (letters)y;
          System.out.print(board[x][y]);
          System.out.print("");
      }
  }
 } 
```

如何告诉它我希望它连接到数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:31:17.600

您可以将二维数组设为 5x（学生人数 / 5）或每组人数按学生人数 / 每组人数 /* 组数 */ 使其更具动态性。

您只需要一个循环即可实现这一目标。循环遍历一维数组中的每个名称，一一获取名称并将其分配给二维数组中的适当索引。

要找出索引，其中一个可能只是每组循环 mod(%) 人的计数器，这将使索引保持在 0 到 4 之间。要找出另一个索引，您可以使用 (每组学生人数/人）

所以看起来`board[i%ppg][i%nog]`ppg 是每组的人，而 nog 是组的数量。您可以轻松计算组数。

编辑：如果您有一种非常简单的方法来可视化它们，那么二维数组很容易。我在学习 2d 数组时所做的技巧是将它们视为棋盘。棋盘有由字母和数字表示的垂直和水平索引，就像二维数组一样，除了在编程中它只是数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:17:36.203

所以，听起来你唯一的问题是`letters`指数的计算。尝试这个：

```
for (int x = 0; x < 2; x++) {
    for (int y = 0; y < 5; y++) {
        board[x][y] = letters[x * 5 + y];
        System.out.print(board[x][y]);
        System.out.print("");
    }
} 
```

这将创建 2 个“行”，每行 5 个学生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:20:41.770

仔细看看这段代码，即使你的一维数组有许多不能被 5 整除的元素，它也会计算索引。

```
String[] names = new String[104];
double size = names.length;

String[][] yetAnother = new String[(int) Math.ceil(size / 5)][5];

for (int i = 0; i < size; i++)
    yetAnother[(int) Math.ceil(i / 5)][i % 5] = names[i]; 
```

# firefox - LESS 线性梯度混合

> ID：13049951
> 
> 赞同：2
> 
> 时间：2012-10-24T13:11:27.233
> 
> 标签：firefox, css, less

我使用 mixin 进行线性渐变，如下所示：

```
.linear-gradient (@color1:#ccc, @color2:#fff, @stop1:0, @stop2:100%, @dir:top) {
    background-color: @color2;
    background: -webkit-linear-gradient(@dir, @color1 @stop1, @color2 @stop2);
    background:    -moz-linear-gradient(@dir, @color1 @stop1, @color2 @stop2);
    background:     -ms-linear-gradient(@dir, @color1 @stop1, @color2 @stop2);
    background:      -o-linear-gradient(@dir, @color1 @stop1, @color2 @stop2);
    background:         linear-gradient(@dir, @color1 @stop1, @color2 @stop2);
    filter: e(%       ("progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=%d,endColorstr=%d)", @color1, @color2));
} 
```

到目前为止它运行良好.. 但是在 w3c 发布了一个新的[正确渐变方向](http://dev.w3.org/csswg/css3-images/#linear-gradients)并且 Mozilla 将 FireFox 更新到 16.0.1 之后 - 我不能使用这个 mixin，因为 FireFox 16 使用没有 prefix 的线性渐变`-moz`。

现在我不能使用`.linear-gradient(#ffffff, #000000, 0, 100%, top)`，因为`top`- 方向不正确，现在*从上到下*正确的线性渐变是`to bottom`.

`0deg`, `90deg`— 不能跨浏览器工作，因为在所有浏览器中`90deg`它的方向是从下到上，但在 FireFox 16 中它是从右到左。

关于新方向[https://hacks.mozilla.org/2012/07/aurora-16-is-out/](https://hacks.mozilla.org/2012/07/aurora-16-is-out/)

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:20:29.663

使用局部变量并为尚不支持新方向的浏览器添加 90 度应该可以解决问题：

（只有在 jsFiddle 中度数的操作不起作用）。

```
.linear-gradient(@color1:#ccc, @color2:#fff, @stop1:0, @stop2:100%, @deg:0deg) {
  @old-deg: @deg + 90deg;
  background-color: @color2;
  background: -webkit-linear-gradient(@old-deg, @color1 @stop1, @color2 @stop2);
  background:    -moz-linear-gradient(@old-deg, @color1 @stop1, @color2 @stop2);
  background:     -ms-linear-gradient(@old-deg, @color1 @stop1, @color2 @stop2);
  background:      -o-linear-gradient(@old-deg, @color1 @stop1, @color2 @stop2);
  background:         linear-gradient(@deg, @color1 @stop1, @color2 @stop2);
  filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr='#cccccc', endColorstr='#000000')";
}

.test {
  width:100px;
  height:100px;
  .linear-gradient(#000, #ff0, 0, 100%, 0deg);
} 
```

（请注意，我更改了 IE 行上的转义语法）。

# ruby-on-rails - 支持的数据库列表？

> ID：13049952
> 
> 赞同：4
> 
> 时间：2012-10-24T13:11:28.193
> 
> 标签：ruby-on-rails

是否有支持 RoR 的数据库列表？我正在寻找 MongoDB 支持，但找不到任何官方信息。

我是 python/djangoist，不知道应该在 RoR 世界中搜索什么关键字。:(

我能找到的所有官方文件都是那个[小清单](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)，上面写着：

*MySQL、PostgreSQL、SQLite、SQL Server、Sybase 和 Oracle（除 DB2 之外的所有支持的数据库）当前都支持迁移。*

这些都是吗？或者是否有我可以使用的 RoR 应用程序/插件/无论什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:19:20.600

第一个问题：

您正在寻找 activerecord 正式涵盖的受支持数据库，这是 ruby​​ on rails 中的 ORM 默认实现。

这些是开箱即用的受支持连接适配器，没有 gem 增强功能。

只有这些数据库： **MySQL、PostgreSQL、SQLite**

源代码： [https ://github.com/rails/rails/tree/master/activerecord/lib/active_record/connection_adapters](https://github.com/rails/rails/tree/master/activerecord/lib/active_record/connection_adapters)

第二个问题：

Mongo-Mapper 是用于将 MongoDB 集成到 Ruby On Rails 3 中的 gem。

红宝石宝石： [http ://rubygems.org/gems/mongo_mapper](http://rubygems.org/gems/mongo_mapper)

说明： [http ://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started](http://www.mongodb.org/display/DOCS/Rails+3+-+Getting+Started)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:17:24.283

作为开始，您可能需要查看[MongoDB 客户端](https://www.ruby-toolbox.com/categories/mongodb_clients)类别中的[Ruby 工具箱](https://www.ruby-toolbox.com)。

# ios - 如何在 Apache 服务器上隐藏 iOS 应用程序（.plist 和 .ipa 文件）？

> ID：13049954
> 
> 赞同：0
> 
> 时间：2012-10-24T13:11:32.587
> 
> 标签：ios, apache

我必须在我的 Apache 服务器上隐藏我的 iOS 应用程序（确切地说是带有 app 和 .plist 的文件夹），并且我尝试了许可（750），但下载应用程序的链接不起作用：

```
<a href="itms-services://?action=download-manifest&url=http://example.com/prova/xxx.plist">Download App</a> 
```

如何隐藏文件夹并同时允许下载应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:17:30.977

如果您启用了 Apache 的索引模块（默认情况下），Apache 在浏览没有 index.html（或类似）文件的目录时会向您显示索引。

要禁用此行为，请将以下行添加到您的`.htaccess`文件中：

```
Options -Indexes 
```

如果您还没有`.htaccess`文件，只需在要隐藏的目录中创建一个空白文件并添加该行。

如果您只想隐藏所有带有结尾的文件`plist`并`app`从索引中添加以下行到您的 .htaccess 中：

```
IndexIgnore *.plist *.app 
```

# iphone - iOS 6 4英寸模拟器-标签栏没有响应

> ID：13049955
> 
> 赞同：2
> 
> 时间：2012-10-24T13:11:36.967
> 
> 标签：iphone, ios6

当我在 iOS6 4 英寸视网膜模拟器上运行为 Iphone 4S 和更早版本设计的 iOS 应用程序时，应用程序内容下方出现紫色条，底部有标签栏。选项卡没有响应。我添加了填满屏幕的 Default-568h@2x 启动图像，但即使大多数笔尖设置为 AutoResize 子视图，我的内容也不会调整大小。当我在文本视图中点击时，键盘也不会从底部出现。

模拟器有问题吗？我认为如果不进行修改，应用程序会以黑条代替额外的屏幕尺寸运行。使用这样的模拟器，我不知道应用程序在 iPhone 5 上的外观。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:17:58.920

`UIWindow`包含您的`UITabBarController`帧大小小于 iOS 6 支持的 iPhone 5 分辨率。

要解决此问题，请将 Interface Builder 中的属性设置`UIWindow->Size`为`Retina 4 Full Screen`

或者，要在您的代码中处理此问题，请将框架设置为主屏幕边界：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

一旦我这样做了，我就`UITabBarController`开始按设计再次工作。

# php - Smarty 将 var 分配给配置文件 vars

> ID：13049956
> 
> 赞同：0
> 
> 时间：2012-10-24T13:11:37.027
> 
> 标签：php, smarty, variable-assignment, configuration-files

我的问题看起来与此几乎相同[是否可以将变量放入配置文件中？](https://stackoverflow.com/questions/3863310/is-it-possible-to-put-variables-inside-config-files)

我有一个控制语言的配置文件。我也有一个显示反馈的反馈 div。

现在我想分配这样的反馈：

`$smarty->assign('feedback', 'the_age_of_user_' . $user->name . '_is_changed_to_' . $user->age . '_years');`

## nl.conf

`the_age_of_user_%s_is_changed_to_%s_years`=`De leeftijd van gebruiker %s gewijzigd naar %s jaar`

## 配置文件

`the_age_of_user_%s_is_changed_to_%s_years`=`The age of user %s is changed to %s years`

有谁知道我怎么能做到这一点？还是有更好的解决方案将变量分配给配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:38:19.123

对不起，但我不完全明白你想要完成什么。

在我们的项目中，我们有以下类似问题的解决方案：

语言文件：

`the_age_of_user_is_changed = The age of user {user} is changed to {year} years`

请注意，左侧没有 %s 或任何变量。它总是不变的。

**选项1：**

1.  Smarty/代码分配： `$smarty->assign("VARIABLE_TO_USE_IN_TEMPLATE", getLang('the_age_of_user_is_changed', array('user' => $user->name,'year' => $user->age));`

2.  然后，在 Smarty 中，您可以使用以下代码：`{$VARIABLE_TO_USE_IN_TEMPLATE}`

函数 getLang 从语言文件中读取字符串信息并将所有 {symbol} 替换为相应的数据。

**选项 2：**

1.  在模板中，我们有 smarty 用户空间函数： `{LANG key='the_age_of_user_is_changed' name=$user->name year=$user->age}` Lang 实际上是调用前面例子中的函数 getLang。

2.  在代码中，您必须分配 user: `$smarty->assign("user", $user);`。之后，smarty 会自己做所有事情。

# ios - iPad mini 上会显示什么版本的网站？

> ID：13049957
> 
> 赞同：0
> 
> 时间：2012-10-24T13:11:41.587
> 
> 标签：ios, ipad, ipad-mini

一些网站在 iPad 和 iPhone 上提供不同的版本。

iPad mini 上会显示什么版本的网站？

与 iPhone 一样的移动版或与 iPad 一样的普通版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:34:05.277

我想这取决于特定网站如何检测设备。如果网站只是检查显示器的像素宽或高，iPad Mini 的评估结果与 iPad 或 iPad 2 相同，因此以相同的方式显示网站。

另一方面（不太可能）该站点可能正在通过 PPI 检查设备。但是从我读过的关于这个主题的所有内容来看，检查 PPI 通常是不准确的并且非常不可靠。

相关：[从 JS/CSS 检测系统 DPI/PPI？](https://stackoverflow.com/q/279749/716216)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:15:00.680

由于 iPad mini 与 iPad 和 iPad2 具有相同的分辨率，因此将显示在这些设备上显示的版本。

# css - 流畅的布局背景 100% 宽，每边有 50 像素的填充

> ID：13049972
> 
> 赞同：0
> 
> 时间：2012-10-24T13:12:41.143
> 
> 标签：css

好的，所以我需要添加一个背景图像来重复 100%，但我需要在每一侧留出边距。

```
******************************************
*    *                              *    *
* 50 *                              * 50 *
* px * This background image should * px *
*    * repeat-x 100% minus 100px.   *    *
*    *                              *    *
****************************************** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:18:38.153

我会在 div 中使用 div。这样，您可以将背景应用到第二个 div 并让第一个 div 担心边距。

```
#div1 {
    margin: 0 50px;
}

#div2 {
    background: url('XXX') no-repeat;
    background-size: 100% 100%;
} 
```

请注意：background-size 是 CSS3 属性，受 IE9+、Firefox 4+、Opera、Chrome 和 Safari 5+ 支持。

或者使用：

```
#div {
    background: url('XXX') repeat-x;
    margin: 0 50px;
} 
```

这不是很好的做法，我不确定哪个是最佳解决方案，具体取决于您的背景是颜色/图案还是图像。如果不是图像，请使用后一种解决方案。

# c++ - 使用动态内存复制类

> ID：13049974
> 
> 赞同：1
> 
> 时间：2012-10-24T13:12:45.640
> 
> 标签：c++, copy-constructor, dynamic-memory-allocation

> **可能重复：**
> [深拷贝与浅拷贝](https://stackoverflow.com/questions/2657810/deep-copy-vs-shallow-copy)
> [重载 operator= 和重载复制构造函数有什么区别？](https://stackoverflow.com/questions/6418503/what-is-the-difference-between-overloading-operator-and-overloading-the-copy-co)

我看到了两种复制课程的方法：

1.  复制构造函数

2.  运算符=

我的问题是，哪个应该制作动态分配内存的新副本（2 个具有相同数据的类和 2 个动态内存实例），哪个应该简单地将类移动到新的内存位置（一个具有相同动态分配内存的类但是班级在不同的地方）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:34:05.807

复制构造函数创建一个新对象并根据现有对象初始化其状态：

```
A x(y); // x is now in the same state as y 
```

赋值运算符接受现有对象并更改其状态以匹配另一个现有对象：

```
A x; // x is in the default state
x = y; // x is now in the same state as y 
```

无论你对国家做出什么决定，都应该同样适用于两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:18:24.970

您必须同时实现这两者，因为您可以通过复制构造函数声明变量。您可以分配给变量。例如：

```
Class a; //some heap allocations inside
Class b(a); //must be valid
Class c = a; //must be valid too 
```

并且不要忘记析构函数。简单的方法是实现复制和分配运算符是在分配时使用复制然后交换（复制和交换）。[复制和交换](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)和[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

# javascript - 如何通过 DOM 容器访问 Highcharts 图表？

> ID：13049977
> 
> 赞同：87
> 
> 时间：2012-10-24T13:12:54.987
> 
> 标签：javascript, jquery, html, dom, highcharts

当我将 highcharts-chart 渲染到 div 容器时，如何通过 div-Container 访问图表对象？

我不想让图表变量成为全局变量。

```
 var chart = new Highcharts.Chart({
            chart: {
                renderTo: "testDivId",
                                ... 
```

我想像这样（伪代码）访问上面上下文之外的图表，以调用函数：

```
var chart = Highcharts.Chart("testDivId"); //access from id
chart.redraw(); 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-10-24T14:55:31.947

## 海图 3.0.1

用户可以使用 highcharts 插件

```
var chart=$("#container").highcharts(); 
```

## 海图 2.3.4

从[Highcharts.charts](http://api.highcharts.com/highstock#Highcharts.charts)数组中读取，对于 2.3.4 及更高版本，图表的索引可以从上的数据中找到`<div>`

```
 var index=$("#container").data('highchartsChart');
 var chart=Highcharts.charts[index]; 
```

## 所有版本

按容器 ID 跟踪全局对象/地图中的图表

```
var window.charts={}; 
function foo(){
  new Highcharts.Chart({...},function(chart){  
      window.charts[chart.options.chart.renderTo] = chart;
  });
}

function bar(){
  var chart=window.charts["containerId"];
} 
```

[阅读模式 @ Highcharts 技巧 - 从容器 ID 访问图表对象](http://ahumbleopinion.com/highcharts-tips-accessing-chart-object-from-container-id/)

## 附言

自编写此答案以来，在 Highcharts 的较新版本中添加了一些内容，这些**内容取自 @davertron、@Moes 和 @Przy 的答案，请为他们的评论/答案投票，因为他们应该得到这些荣誉**。在此处添加它们，因为如果没有这些，这个公认的答案将是不完整的

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-04-15T04:57:34.620

你可以这样做

```
var chart = $("#testDivId").highcharts(); 
```

[检查提琴手的例子](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/axis-setcategories/)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-05-03T22:33:54.603

```
var $chartCont = $('#container').highcharts({...}),
    chartObj = Highcharts.charts[$chartCont.data('highchartsChart')]; 
```

chartCont 是 jQuery 对象。chartObj 是 Highchart 图表对象。

这是使用 Highcharts 3.01

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-01-10T22:11:49.330

只需使用纯 JS ：

```
var obj = document.getElementById('#container')
    Highcharts.charts[obj.getAttribute('data-highcharts-chart')]; 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-19T11:09:51.017

我找到了另一种方法......主要是因为我使用的是嵌入在 OutSystems Platform 中的 Highcharts，而且我没有办法控制图表的创建方式。

我发现的方法如下：

1.  `className`使用属性为图表提供标识类

    ```
    chart: {
        className: 'LifeCycleMasterChart'
    } 
    ```

2.  定义一个辅助函数，通过类名获取图表

    ```
    function getChartReferenceByClassName(className) {
    var cssClassName = className;
    var foundChart = null;

    $(Highcharts.charts).each(function(i,chart){    
        if(chart.container.classList.contains(cssClassName)){
            foundChart = chart;
            return;
        }
    });

    return foundChart; 
    ```

    }

3.  随时随地使用辅助功能

    ```
    var detailChart = getChartReferenceByClassName('LifeCycleDetailChart'); 
    ```

希望对你有帮助！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-01-05T10:37:47.250

没有 jQuery（香草 js）：

```
let chartDom = document.getElementById("testDivId");
let chart = Highcharts.charts[Highcharts.attr(chartDom, 'data-highcharts-chart')] 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-24T13:41:12.550

```
var chart1; // globally available
$(document).ready(function() {
      chart1 = new Highcharts.Chart({
         chart: {
            renderTo: 'container',
            type: 'bar'
         },
         title: {
            text: 'Fruit Consumption'
         },
         xAxis: {
            categories: ['Apples', 'Bananas', 'Oranges']
         },
         yAxis: {
            title: {
               text: 'Fruit eaten'
            }
         },
         series: [{
            name: 'Jane',
            data: [1, 0, 4]
         }, {
            name: 'John',
            data: [5, 7, 3]
         }]
      });
   }); 
```

var chart1 是全局的，因此您可以使用它来访问 de highchart 对象与容器无关

```
chart1.redraw(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-19T13:50:35.787

...在同事的帮助下...更好的方法是...

```
getChartReferenceByClassName(className) {
    var foundChart = $('.' + className + '').eq(0).parent().highcharts();

    return foundChart;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-22T21:29:38.540

**@elo**的答案是正确的并且被赞成，尽管我不得不稍微整理一下以使其更清楚：

```
const myChartEl = document.getElementById('the-id-name');
const myChart = Highcharts.charts[myChartEl.getAttribute('data-highcharts-chart')]; 
```

`myChart`然后成为一个实时的**Highcharts**对象，它公开了呈现在`myChartEl`. 由于`myChart`它是一个**Highcharts**对象，因此可以在它之后链接原型方法、扩展它或引用它。

```
myChart.getTable();
myChart.downloadXLS();
setTimeout(() => Highcharts.fireEvent(myChart, "redraw"), 10); 
```

也可以`myChart`通过`.highcharts()`，这是一个`jQuery`插件：

```
var myChart = $("#the-id-name").highcharts(); 
```

上面的*`jQuery`插件*方法需要`jQuery`在使用插件之前加载，当然还有插件本身。*正是由于没有这个插件，我才开始寻找替代方法来使用纯原生 JavaScript 完成同样的任务。*

**通过使用纯 JS 方法，我能够做我需要的事情（第二个代码片段），而不必依赖`jQuery`**：

# c++ - 致命错误：iostream.h 没有这样的文件或目录

> ID：13049978
> 
> 赞同：45
> 
> 时间：2012-10-24T13:12:56.390
> 
> 标签：c++, codeblocks

> **可能重复：**
> [包含时没有这样的文件 iostream.h](https://stackoverflow.com/questions/7338584/no-such-file-iostream-h-when-including)

即使在使用 .cpp 扩展名命名源文件之后。我的编译器在命令提示符和代码块中都给出了这个错误。我该如何解决这个问题？

```
#include <iostream.h>

int main(){

    cout<<"Hello World!\n";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-24T13:14:13.903

该标头在标准 C++ 中不存在。它是 1990 年代之前的一些编译器的一部分，但它肯定不是 C++ 的一部分。

改为使用`#include <iostream>`。并且所有库类都在`std::`命名空间中，例如`std::cout`.

另外，扔掉任何提到你所说的事情的书或笔记。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T13:14:48.623

使用标准 C++ 调用（请注意，您应该使用 namespace *std* for *cout*或添加*using namespace std;*）

```
#include <iostream>

int main()
{
    std::cout<<"Hello World!\n";
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-24T13:14:05.793

您应该在`iostream` *没有*`.h`.

早期的实现使用了`.h`变体，但标准要求更现代的风格。

# android - 如何确保应用程序可以在大多数 Android 版本中运行？

> ID：13049983
> 
> 赞同：1
> 
> 时间：2012-10-24T13:13:21.283
> 
> 标签：android, debugging, version

我开发了我的第一个应用程序，它在我的手机（Android 2.2）上运行良好。但是，当我在 Xoom（Android 3.2）中进行测试时，它有很多错误。我需要这个应用程序在许多不同版本的 Android 中运行。我如何开发它并确保它会，只有一个 Android 2.2 用于测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:41:14.510

使用清单中针对的最后一个版本进行开发，同时密切关注向后兼容性，这是您以最佳效率实现这一目标的方式。

许多库（ActionBar Sherlock、NotificationCompat2、....）将帮助您使您的应用程序恢复兼容而不会出现问题。

我强烈建议为最后一个版本的 Android 制作应用程序，以便在此版本获得一些动力时准备好，而不是针对当前最流行的任何版本。刚开始做的工作要多一些，但以后会省去很多麻烦。

模拟器将帮助您测试这一点，最好的配置是拥有一个带有最新版本 android 的终端供您使用（这就是为什么 nexus 对开发人员来说是一个非常好的选择）和模拟器上的不同配置来测试向后兼容性或其他形式因素。

# c - char数组的指针指向c中的整数

> ID：13049991
> 
> 赞同：2
> 
> 时间：2012-10-24T13:13:46.357
> 
> 标签：c, atoi

这是我的代码：

```
char str[] ="";
scanf("%s",&str);
char * pch;
pch = strtok (str,"#");
printf ("%s\n",pch);
return 0; 
```

我需要将“1#2#3”的输入渲染为第一个、第二个和第三个三个整数。我上面的代码只处理第一个变量并打印第一个字符串“1”，但我想将它保存到一个 int 变量中。

我试过：

```
int first = atoi(&pch) 
```

但是“第一个”得到的值是 0 而不是 1。如何将数组 char 的指针解析为 int？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:16:01.897

该代码具有未定义的行为，因为`str`不足以处理任何输入。`str`最多可以容纳 1`char`并且`scanf()`在读取字符串时会附加一个空终止符。如果用户输入单个字符并点击返回，`scanf()`则将超出范围写入数组`str`。

要更正，请确定可接受的最大字符串长度，并`scanf()`通过阅读更多内容来防止：

```
char str[1024];
if (1 == scanf("%1023s", str))
{
} 
```

请注意，这`atoi()`会产生`0`for invalid input 或 for的结果`"0"`，这是没有帮助的。改用[`strtol()`](http://en.cppreference.com/w/c/string/byte/strtol)或查看[dasblinkenlight](https://stackoverflow.com/users/335858/dasblinkenlight)的答案以获得更简单的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T13:16:20.520

如果您知道输入的精确布局，以及`int`s 的确切数量，您可以大大简化此过程：

```
scanf("%d#%d#%d", &a, &b, &c); 
```

这是[ideone 上演示的链接](http://ideone.com/Rt0enP)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T13:16:14.203

您将 a 传递`char*`给 atoi()，而不是`char**`. 只需将其称为`atoi(pch)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T13:17:51.163

您已将 str 声明为 char str[] ="";。这将只分配一个字节给 str。是否正常工作。我希望我不会在这里错过任何东西。
至于strtok，需要在while循环中使用
`pch = strtok (str,"#");`
`while (pch != NULL)`
`{`
`printf ("%s\n",pch);`
`pch = strtok (NULL, "#");`
`}`

# javascript - 单击并启动计时器后显示 div

> ID：13049992
> 
> 赞同：1
> 
> 时间：2012-10-24T13:13:46.950
> 
> 标签：javascript, jquery, show, fadein

想要在单击按钮后显示一个 div，然后时间开始并从 10 计数到 0 。

我的问题是我不知道如何开始计数？

javascript：

```
<script>
$("button").click(function() {
$('div#test').hide().delay(200).fadeIn('slow');
});
</script> 
```

按钮 ：

```
 <div id="test" style="display:none;">click</div> 
```

html：

```
<div id="test" style="display:none;">here you are !</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:15:47.383

您可以`setInterval`用于计数。

```
var count = 10;
var temp = setInterval(function(){
  if(count < 0) {
      clearInterval(temp);
   }
  // show count 
  count--;

}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:17:57.903

```
var count = 15;
var timerID = 0;
$("button").click(function() {
    $('div#test').hide().delay(200).fadeIn('slow', function() {
         timerID = setInterval(function() {countDown();}, 1000);  // count every 1000 ms, change this to whatever you want
    });
    $("#wait").show();  // or you could fade this in if you want. Maybe that's what you intended with #test.
});

function countDown() {
    count--;
    $("#count").text(count);
    // do whatever you want to do with your count
    if (count <= 0) {
         clearInterval(timerID);
    }
} 
```

HTML：

```
<p id="wait" style="display:none">Please wait<span id="count">15</span> seconds...</p> 
```

假设您想在淡入之后开始倒计时。否则，只需拉出该部分并在第一次单击按钮时开始倒计时的fadeIn 行之后设置Interval。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T01:32:36.387

您可以使用 setTimeout() 或 setInterval() 让它工作：

以下是我的做法：

```
 $(function() {
$("button").click(function() {
    function counter()  {  
        var i = 10;
        $("body").append('<div style="border:1px solid red;">Div Created on the Fly</div>')
        function showDIV() {

        if (i < 0)
            return 
        setTimeout(showDIV, 1000);
        $("span").text(i);
        i--;        

    }

    showDIV();
}
counter(10);
});

}); 
```

[**演示**](http://jsfiddle.net/4XVMe/4/)

# unit-testing - 类似于 Java 中的 REST-driver 的 PHP 库

> ID：13049993
> 
> 赞同：1
> 
> 时间：2012-10-24T13:13:46.837
> 
> 标签：unit-testing, mocking, phpunit

我发现这个[小图书馆](https://github.com/rest-driver/rest-driver/wiki/Client-driver)是我问题的完美解决方案。它允许您轻松地存根 REST 服务响应。现在我需要在我们库的 PHP 版本中复制相同的测试用例集。你知道 PHP 中有什么类似的库/框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:18:19.237

你可以使用[Guzzle](http://guzzlephp.org/)。Guzzle 是一个 PHP HTTP 客户端和框架，用于构建 RESTful Web 服务客户端。问题是您可以创建 Response 对象。在这个库中，您有一个[Response 类](https://github.com/guzzle/guzzle/blob/master/src/Guzzle/Http/Message/Response.php)。您可以只创建您想要的 Guzzle 响应（选择所需的状态代码、内容等），然后模拟您的 HTTP 客户端，以便它返回您刚刚创建的响应对象。

如果您阅读文档，似乎有[一个模拟响应的插件](http://guzzlephp.org/guide/service/testing_clients.html#queueing-mock-responses)，尽管我从未使用过它。

# asp.net - 在运行时动态公开 WebPart 连接

> ID：13049994
> 
> 赞同：0
> 
> 时间：2012-10-24T13:13:47.897
> 
> 标签：asp.net, sharepoint, web-parts

我想尝试在运行时为 webpart 公开一些连接，在编译时我不知道它们是什么，我想知道是否有人可以就从哪里开始提供任何建议。我读过的所有示例似乎都是静态使用`[ConnectionConsumer]`的`[ConnectionProvider]`，显然需要在代码中完成，但是我不知道此时我需要公开什么。

我的用例类似于使用 DataTable 的网格。使用 SQL 语句检索 DataTable：

```
select * from myTable 
```

我要公开的连接是当它更改为

```
select * from myTable where columnA = myConnection1 
```

此时，我想为我的 WebPart 公开一个名为“myConnection1”的连接，如果我添加多个 where 子句，我想要多个可以从其他 WebPart 链接的连接。

**编辑**
这方面的一个例子就像 SharePoint 中的 ReportingServices 如何处理连接。它似乎使用了一个自定义 WebPartManager，它在运行时确定需要公开的连接的数量、名称和类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:04:20.957

最后，我确定最好的方法是使用 IWebPartParameters 接口并手动公开它们。

[http://blog.mindbusiness.de/blog/2011/09/05/implementation-of-iwebpartparameters-web-part/](http://blog.mindbusiness.de/blog/2011/09/05/implementation-of-iwebpartparameters-web-part/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:44:22.713

您可以动态创建 Web 部件之间的连接：

```
wpMgr.ConnectWebParts(wp1, cp1, wp2, cp2) 
```

泰德帕蒂森：http: [//msdn.microsoft.com/en-us/magazine/cc188696.aspx#S6](http://msdn.microsoft.com/en-us/magazine/cc188696.aspx#S6)

不确定您的问题是动态的：

- 流经连接的数据架构或

- 在运行时创建从提供者到消费者 Web 部件的这些连接？

希望这可以帮助？

# haskell - Haskell 基础类

> ID：13049997
> 
> 赞同：3
> 
> 时间：2012-10-24T13:13:53.233
> 
> 标签：haskell

菜鸟问题，为什么这在 H​​askell 中不正确？

```
class BasicEq a where
    isEqual :: a -> a -> Bool
    isNotEqual :: a -> a -> Bool
    isNotEqual = not . isEqual 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T13:18:42.740

让我们打开 GHC 提示，看看事物的类型：

```
Prelude> :t not
not :: Bool -> Bool
Prelude> :t (not .)
(not .) :: (a -> Bool) -> a -> Bool 
```

所以你可以看到`(not .)`需要一个`a -> Bool`，而不是一个`a -> a -> Bool`。我们可以将函数组合加倍以获得工作版本：

```
Prelude> :t ((not .) .)
((not .) .) :: (a -> a1 -> Bool) -> a -> a1 -> Bool 
```

所以正确的定义是：

```
isNotEqual = (not .) . isEqual 
```

或者等价地，

```
isNotEqual x y = not $ isEqual x y
isNotEqual = curry $ not . uncurry isEqual 
```

等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T13:17:35.313

运算符需要两个“`.`一元函数”（“x -> y”），但`isEqual`它是一个“二元函数”（“x -> y -> z”），所以它不起作用。你可以不使用无点形式：

```
isNotEqual x y = not $ isEqual x y 
```