# StackOverflow 问答 13948000-13948999

# java - Android ID 及其可靠性

> ID：13948009
> 
> 赞同：2
> 
> 时间：2012-12-19T08:11:09.433
> 
> 标签：java, android, security, encryption, uuid

我想为我的应用程序生成 Uuid，所以我为此尝试了很多方法。

1）获取设备的序列号使用`android.os.Build.SERIAL`（这将返回“未知”作为结果）

2）处理设备ID（我不知道平板设备会返回什么）

3）使用获取Android id `android.provider.Settings.Secure.ANDROID_ID`（android 2.2版本似乎有些问题）

4）使用生成Uuid`java.util.UUID`

`android.os.Build`5）使用属性生成伪Uuid

所有这些方法都显示出一些问题。所以我很困惑该选择哪个？有人可以建议我最好的方法吗？

[Android 开发者博客](http://android-developers.blogspot.in/2011/03/identifying-app-installations.html)说 android id 将是唯一的

另外我听说可以在出厂重置或操作系统更新时更改设备的 Android id。

那么在工厂重置或操作系统更新期间是否有可能复制新的android id？

注意：假设一个条件

我的问题是会发生什么相同制造的相同 2 设备型号将进行还原或操作系统更新。Android id 将更改。我在问这个新身份证。两个设备中的android id是否有机会相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:03:39.723

是的，有重复 ID 的可能性，但可以忽略不计。

ANDROID_ID 有 2^64 个可能的值，它们是用一些随机函数生成的。但是，您很少会看到重复的值 - 搜索有关 GUID 唯一性的讨论以了解重点。

简而言之：您可以假设 ANDROID_ID 是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:03:51.267

`ANDROID_ID`每次初始化设备时都会生成（在重置后等）。它不依赖于型号、序列号等。即使你有两个相同的设备，它们`ANDROID_ID`的重置后的值也应该不同。ID 不是特别特殊，只是它对设备来说是全局的。您可以使用应用程序的 UUID 实现相同的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:15:27.460

为 android 设备创建唯一 id 已在此[链接](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)中进行了生动的讨论。简而言之，使用它。

```
import android.provider.Settings.Secure;

private String android_id = Secure.getString(getContext().getContentResolver(),
                                                        Secure.ANDROID_ID); 
```

# varnish - Varnish 能否评估响应中的 HTML 以确定是否缓存？

> ID：13948011
> 
> 赞同：0
> 
> 时间：2012-12-19T08:11:13.910
> 
> 标签：varnish, varnish-vcl

我想根据页面的内容从清漆缓存中排除某些页面（例如，如果表单使用特定的隐藏字段，这是一项安全功能，并且在每次页面刷新时都需要唯一）。

我有几十个表单，所以我不想从缓存中单独排除每个唯一页面。

这在VCL中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:35:06.530

不，通常不会。正确的做法是在您的页面上设置缓存头（例如“Cache-Control: no-cache, must-revalidate”），并使用 varnish 依次读取的不可缓存的表单。

作为一个很好的副作用，它还将取消大多数客户端缓存，这些缓存通常也会导致 CAPTCHA 等问题。

# jquery - 你能解释一下 $.fancybox.open( [group], [options] ) 参数，如果我可以将 youtube 链接添加为 href 吗？

> ID：13948019
> 
> 赞同：4
> 
> 时间：2012-12-19T08:11:45.077
> 
> 标签：jquery, fancybox, fancybox-2

我正在阅读文档：

[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

和 $.fancybox.open( [group], [options] ) 和开放的解释很好，但我想知道是否可以在组数组中使用指向 youtube 视频的链接？我正在尝试在 dom 准备好后播放 youtube 视频，如下所示：

[http://jsfiddle.net/STgGM/](http://jsfiddle.net/STgGM/)

```
$.fancybox.open([
    {
        href : 'http://fancyapps.com/fancybox/demo/1_b.jpg',
        title : '1st title'
    },
    {
        href : 'http://fancyapps.com/fancybox/demo/2_b.jpg',
        title : '2nd title'
    }    
], {
    padding : 0   
}); 
```

我能够让我的视频出现在一个fancybox中，这很棒，但我希望它在页面自动加载后出现，而无需单击链接，例如fancybox在上面的jsfiddle示例中使用.open .

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T08:17:03.770

你试过这样做吗？

```
$(function () {
    $.fancybox.open([
        {
            type: 'iframe',
            href : 'http://www.youtube.com/embed/L9szn1QQfas?autoplay=1&wmode=opaque',                
            title : '1st title'
        }
    ], {
        padding : 0
    });
}); 
```

工作示例：http: [//jsfiddle.net/NDM5F/](http://jsfiddle.net/NDM5F/)

# java - Eclipse调试视图中端口的含义

> ID：13948020
> 
> 赞同：12
> 
> 时间：2012-12-19T08:11:51.310
> 
> 标签：java, eclipse, debugging

在 Eclipse 调试视图中：

![在此处输入图像描述](../Images/dbd3d175e672cbe45c213e48b2f4a997.png)

是什么意思`localhost:51883`？是远程调试的连接端口吗？还是别的什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T08:25:36.767

这是 Eclipse 调试器与虚拟机通信的端口。VM 有一个 JPDA（Java 平台调试器架构），它提供接口（JVM TI - Java VM 工具接口，JDI - Java 调试接口），像 eclipse 调试器这样的工具用于连接和调试。他们连接的端口显示在该视图中。

你看，在这种情况下，你的虚拟机在你的本地主机上，所以它显示 localhost:51883 ，如果你进入远程调试，它会显示`serverIP:availableport`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:19:57.580

Eclipse 调试器使用此端口通过 TPC 与 VM 通信。它像远程调试一样工作，但它连接到本地主机。

# c# - 使用 LINQ to Entities 的外部连接查询

> ID：13948021
> 
> 赞同：6
> 
> 时间：2012-12-19T08:11:53.390
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我公司有 0 到 n 个部门，1 个部门有 0 到 n 个办公室，1 个办公室有 0 到 n 个员工。现在我需要使用 linq 查询按部门列出员工的平均年龄，如果部门中没有人则默认平均值为0。代码如下：

```
 DataContext ctx = new DataContext();

    var q0 = from d in ctx.Departments
             join o in ctx.Offices on d.Id equals o.DepartmentId
             join e in ctx.Employees on o.Id equals e.OfficeId
             group e by d into de
             select new {
                DepartmentId = de.Key.Id,
                AverageAge = de.Count() == 0 ? 0 : de.Average(e => e.Age),
             };

    var q1 = from d in ctx.Departments
             join de in q0 on d.Id equals de.DepartmentId into des
             from de in des.DefaultIfEmpty()
             select new
             {
                 DepartmentName = d.Name,
                 AverageAge = de == null ? 0 : de.AverageAge
             };

    var result = q1.ToList();
    foreach (var item in result)
    {
        Console.WriteLine("{0}-{1}", item.DepartmentName, item.AverageAge);
    }
    ctx.Dispose(); 
```

但是如何将 q0 和 q1 组合到一个查询中呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T08:18:58.313

你的意思是这样的：

```
var newQ2 = from d in ctx.Departments
                 outer left join o in ctx.Offices on d.Id equals o.DepartmentId
                 outer left join e in ctx.Employees on o.Id equals e.OfficeId
                 group e by d into de
                 select new {
                    DepartmentId = de.Key.Id,
                    AverageAge = de.Count() == 0 ? 0 : de.Average(e => e.Age),
                 }; 
```

* * *

变成：

```
var newQ2 = from d in ctx.Departments
                     join o in ctx.Offices on d.Id equals o.DepartmentId
                     join e in ctx.Employees on o.Id equals e.OfficeId
                     group e by d into de.DefaultIfEmpty()
                     select new {
                        DepartmentId = de.Key.Id,
                        DepartdentName = select d.Name from d where d.id = de.Key.Id,
                        AverageAge = de.Count() == 0 ? 0 : de.Average(e => e.Age),
                     }; 
```

附录：我会使用子选择来匹配额外的名称，不知道我从您的代码中即兴创作的数据库布局，但您可以提高效率并基于子选择进行多部分连接。抱歉，我无法在工作中测试此代码，我可以很好地近似，但如果您需要更详细的答案，则需要更多关于您的部门名称所在位置的信息：) 我已将外部左联接改回联接，抱歉我忘记了在带有 linq 的 C# 中，您可以使用 DefaultIfEmpty() 来导致代码中的左外连接行为。

外左连接将在没有对应值的地方返回空值，但允许在任何有对应值的部分上返回。但是，加入不会返回任何空条目，我怀疑这就是您有两个查询的原因？

我提出的查询的唯一警告是，如果它们是空值，您需要在使用它们之前填充所需的任何值，例如，如果 DE 为空，DepartmentId 将需要一些逻辑来填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T02:06:52.990

谢谢大家，我已经得到答案了：

```
 var q1 = 
                 from d in ctx.Departments 
                 from o in ctx.Offices.Where(o => o.DepartmentId == d.Id).DefaultIfEmpty()
                 from e in ctx.Employees.Where(e =>  e.OfficeId == o.Id).DefaultIfEmpty()
                 group e by d into de
                 select new {
                    DepartmentName = de.Key.Name,
                    AverageAge = de.Average(e => e == null ? 0 : e.Age),
                 }; 
```

# c# - 无法连接到远程 WCF 服务 - TimeoutException

> ID：13948026
> 
> 赞同：3
> 
> 时间：2012-12-19T08:12:10.967
> 
> 标签：c#, wcf

我之前在尝试从远程计算机访问 WCF 服务时问了一个[问题来解决 SecurityNegotiationException。](https://stackoverflow.com/questions/13823487/unable-to-connect-to-remote-wcf-service-securitynegotiationexception)由于 ValtasarIII 的回答，该异常已得到解决。

现在我有一个不同的问题。我在服务器上托管了我的服务，并希望使用客户端应用程序连接到它。但是，当我尝试从客户端应用程序订阅服务时，什么也没有发生，最后我得到了异常：

```
The open operation did not complete within the allotted timeout of 00:00:59.9939996\. The time allotted to this operation may have been a portion of a longer timeout. 
```

（如有必要，我可以共享堆栈跟踪）

虽然当我尝试测试服务是否正在运行时，我可以通过客户端机器上的浏览器成功访问它。

这是我的配置：

**服务 - web.config**

```
<configuration>
  <system.serviceModel>
    <bindings>
      <wsDualHttpBinding>
        <binding name="wsHttpDual">
          <security mode="None">
            <message clientCredentialType="None" algorithmSuite="Default" />
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <protocolMapping>
      <add scheme="http" binding="wsDualHttpBinding" bindingConfiguration="wsHttpDual"/>
    </protocolMapping>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

**客户端 - app.config**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <wsDualHttpBinding>
        <binding name="WSDualHttpBinding_ISampleContract" clientBaseAddress="http://95.138.188.232:8000/myClient/">
          <!--<security mode="Message">
            <message clientCredentialType="Windows" algorithmSuite="Default" />
          </security>-->
          <security mode="None">
            <message clientCredentialType="None" algorithmSuite="Default" />
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://95.138.188.232/autofxtools/service.svc"
          binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_ISampleContract"
          contract="ISampleContract" name="WSDualHttpBinding_ISampleContract">
        <identity>
          <servicePrincipalName value="host/95.138.188.232" />
        </identity>
      </endpoint>

    </client>
  </system.serviceModel>
</configuration> 
```

我一直在寻找解决方案，但对我没有任何帮助。服务配置似乎表明没有安全要求。但是，具有相同配置的客户端实际上与服务在同一台机器上工作，而不是在远程机器上工作。这是否意味着仍然存在 Windows 身份验证（根据 wsDualHttpBinding 的默认设置）？如果是这样，那么我哪里出错了？

希望能得到一些积极的反馈。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:15:42.200

这可能是防火墙问题。我假设您在 ISS 中托管服务 - 您确定相应的端口是开放的吗？当您尝试通过浏览器访问服务时会发生什么？

另外，我在一个德国论坛上读到以下内容：

> Anscheinend tritt das Problem nur bei WsDualBinding auf, wenn der Port 80 belegt ist。Gibt wohl keine Möglichkeit den Port mit Hilfe von ClientBaseAdress zu ändern。Einzige Möglichkeit ist hier wohl netTcpBinding。

这在英语中的意思是：

> 显然，在端口 80 已被占用的情况下使用 WsDualBinding 时会出现此问题。似乎没有办法使用 ClientBaseAddress 更改端口。唯一的方法似乎是使用 netTcpBinding。

# wpf - 图像选择画布

> ID：13948029
> 
> 赞同：1
> 
> 时间：2012-12-19T08:12:23.123
> 
> 标签：wpf, image, xaml, button

Acutally 我正在做一个 WPF 应用程序，用户可以`Image`从面板中进行选择。面板内部有两个`Button`（右箭头和左箭头）。我不确定面板的名称是什么，但我在我的问题中附上了一张图片。所以，我想问我如何创建面板？使用画布并将图像放在画布内？嗯...和按钮，我完全没有任何理想的方法。

p/s: 我是wpf新手

图片：

![在此处输入图像描述](../Images/5630d8a9dd39e7b395c532d4d3b7fe67.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:38:26.163

Here is one way to do it, using the standard ListBox control:

First, we need a pair of Previous/Next buttons and a ListBox. We make the ListBox lay out its items horizontally by changing its ItemsPanel:

```
<DockPanel Width="200" >
    <Button x:Name="_prev" Content="&lt;&lt;" />
    <Button x:Name="_next" Content="&gt;&gt;" DockPanel.Dock="Right" />

    <ListBox x:Name="_myList" Loaded="OnMyListLoaded" >
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>

        <TextBlock Text="Image1  " />
        <TextBlock Text="Image2  " />
        <TextBlock Text="Image3  " />
        <TextBlock Text="Image4  " />
        <TextBlock Text="Image5  " />
        <TextBlock Text="Image6  " />
        <TextBlock Text="Image7  " />
    </ListBox>
</DockPanel> 
```

In the ListBox' Loaded event, we use VisualTreeHelper to search through its [Template](http://msdn.microsoft.com/en-us/library/ms754242) and find its built-in ScrollViewer. Once we find it, we hook it up to the two buttons we created:

```
private void OnMyListLoaded(object sender, RoutedEventArgs e)
{
    var scroller = VisualTreeHelper.GetChild(VisualTreeHelper.GetChild(_myList, 0), 0) as ScrollViewer;
    if (scroller != null)
    {
        _prev.Command = ScrollBar.LineLeftCommand;
        _prev.CommandTarget = scroller;

        _next.Command = ScrollBar.LineRightCommand;
        _next.CommandTarget = scroller;

        scroller.HorizontalScrollBarVisibility = ScrollBarVisibility.Hidden;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:33:03.457

这可能会帮助您：

```
<Grid>
     <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
     </Grid.ColumnDefinitions>

     <Button Name="LeftB" Grid.Column="0" />
     <Button Name="RightB" Grid.Column="2" />
     <StackPanel Orientation="Horizontal" Name="Images" Grid.Column="1" />
</Grid> 
```

图像可以是 StackPanel 的子项。
当然，您应该将图像的大小设置为图像数量和 StackPanel 宽度的函数。最好的方法可能是处理 StackPanel 的宽度更改事件。

# javascript - 我应该使用哪个 JavaScript 框架来实现 MVVM 模式？

> ID：13948031
> 
> 赞同：1
> 
> 时间：2012-12-19T08:12:38.100
> 
> 标签：javascript, web-applications, mvvm, client-side

我可以使用一些 JavaScript 框架实现以及如何实现基于[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)模式（不是 MVC）的 Web 应用程序的客户端，哪个框架对此有好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:17:09.780

是的，有 MVVM 实现。你可以试试 Knockout.js。我认为 KendoUI 有类似的框架 MVVM 框架。您可以使用的另一个框架是[Knockback](http://kmalakoff.github.com/knockback/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:17:33.530

你应该使用[knockout.js](http://knockoutjs.com/)很好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:18:21.243

有许多框架包含了 MVVM 模式。以下是一些适合该法案的：

1.  [昏死](http://knockoutjs.com/)

2.  [骨干](http://backbonejs.org/)

这是一个很好的比较指南。

[http://www.faridesign.net/2012/04/20-javascript-frameworks-mvvm-templating-licenses-etc/](http://www.faridesign.net/2012/04/20-javascript-frameworks-mvvm-templating-licenses-etc/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T08:23:14.800

[Knockout.js](http://knockoutjs.com/)是我尝试过的著名的 MVVM 框架之一。

[这](http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/)是 Backbone.js 和 Knockout 之间的比较以及一篇关于 MVVM 的精彩介绍文章。

# dynamics-nav - Navision 报告过滤器

> ID：13948033
> 
> 赞同：1
> 
> 时间：2012-12-19T08:12:40.877
> 
> 标签：dynamics-nav, navision

给定一个包含数据项*Customer*和数据项*SalesLine*的报告。

我显示每个客户的所有销售线。如何过滤掉这些没有销售线的客户？我需要把过滤器放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:17:25.087

在`OnAfterGetRecord`每个*Customer*的触发器中，对他们的 SalesLines 进行计数，如果计数为零，则使用`CurrReport.Skip()`跳过该数据项（*Customer*）。

像这样的东西：

```
IF SalesLines.COUNT = 0 THEN BEGIN
  CurrReport.SKIP()
END 
```

# html - 打印时 IE 7 中的 Html 页边距

> ID：13948047
> 
> 赞同：4
> 
> 时间：2012-12-19T08:13:46.897
> 
> 标签：html, css, internet-explorer-7

打印html时如何在html中设置页边距？

我知道@page 适用于 IE 8、IE 9。但是，它不适用于 IE 7。所以，我想知道如何在 IE 7 上实现相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:19:40.570

正如您所指出的，并由本文确认[http://blog.orite.com.au/web_development/2009-04-09/css-implementation-chart-ie6-ie7-ie8/](http://blog.orite.com.au/web_development/2009-04-09/css-implementation-chart-ie6-ie7-ie8/)，IE7 不支持 @page指令。

如果您绝对需要在 IE7 中控制它，那么您可以考虑的一个选项是`body`在打印样式表中的元素上设置填充。您当然可以按照您选择的尺寸或任何其他尺寸进行此`cm`操作`in`。正如您在打印表中设置的那样，结果不会影响正常的页面查看器。这样做的缺点是您无法控制每页的顶部和底部边距。但是，如果您只关注左右边距，这对您来说可能是一个可行的解决方法。

这是一个快速的 CSS hack，仅针对 IE6 和 7，您可以使用它来防止此规则感染所有其他浏览器中的打印页面：http: [//briancray.com/posts/target-ie6-and-ie7-with -only-1-extra-character-in-your-css/](http://briancray.com/posts/target-ie6-and-ie7-with-only-1-extra-character-in-your-css/)。

# delphi - 确定 WebService 是否可用或是否有有效的 url？

> ID：13948049
> 
> 赞同：3
> 
> 时间：2012-12-19T08:14:11.030
> 
> 标签：delphi

如何检查 WebService 是否可用或是否有有效的 url？

我正在使用 Delphi 向导来导入和自动生成必要的 WSDL 函数。

如果 WSDL 或 URL 错误，向导为我创建的函数不会引发异常也不会返回空对象。只有当我调用返回的 WSDL 类的函数时，它才会抛出一个奇怪的异常，即 XML-String 没有有效的“text/html”样式。

这是自动生成的 WSDL 函数：

```
function GetcheckVatPortType(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): checkVatPortType;
const
  defWSDL = 'http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl';
  defURL  = 'http://ec.europa.eu/taxation_customs/vies/services/checkVatService';
  defSvc  = 'checkVatService';
  defPrt  = 'checkVatPort';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as checkVatPortType);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

  // ************************************************************************ //
  // Namespace : urn:ec.europa.eu:taxud:vies:services:checkVat
  // Transport : http://schemas.xmlsoap.org/soap/http
  // Stil     : document
  // Verwenden von       : literal
  // Bindung   : checkVatBinding
  // Service   : checkVatService
  // Port      : checkVatPort
  // URL       : http://ec.europa.eu/taxation_customs/vies/services/checkVatService
  // ************************************************************************ //
  checkVatPortType = interface(IInvokable)
  ['{0F901373-2432-32E2-C99D-95B53AE83C79}']

    // Entpacken nicht möglich: 
    //     - Mehrere strenge out-Elemente gefunden
    function  checkVat(const parameters: checkVat): checkVatResponse; stdcall;

    // Entpacken nicht möglich: 
    //     - Mehrere strenge out-Elemente gefunden
    function  checkVatApprox(const parameters: checkVatApprox): checkVatApproxResponse; stdcall;
  end; 
```

如果`defWSDL`or`defURL`无效或不可用，则返回一个初始化的`checkVatPortType`类/接口。之后在返回的接口上调用函数 ( `checkVatPortType.checkVat`)，我得到了奇怪的异常。

这意味着，如果 WebService 不可用，用户会收到一条消息，指出“XML-String 没有有效的“text/html”格式”。这没有描述问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:43:21.353

这是“按设计”。只有调用 Web 服务才会导致网络运行，只有这样网络层才会失败或成功。

创建 web 服务引用就像拿起电话，执行 web 服务方法就像“拨号”。

更新：检测无效 URL/不存在服务器的一种解决方法是在启动时使用 HTTP 客户端组件（Indy、Synapse），仅用于进行健康检查。将 WSDL URL 传递给它，然后尝试获取它。如果失败，您将知道服务器不可访问。

您还可以使用 Web 服务端点 URL（针对特定服务方法）执行 GET 或 POST。如果您使用 HTTP GET，许多 SOAP 服务器会以“方法不支持”之类的错误消息进行响应，但至少会有响应。

# objective-c - 调试初学者的 Objective-C 程序

> ID：13948054
> 
> 赞同：1
> 
> 时间：2012-12-19T08:14:41.717
> 
> 标签：objective-c, calculator

好的，我对 Objective-C 有点陌生，但我对 OOP 原则非常熟悉。我认为这只是让我明白这一点的语法。

作为我自己的练习，我正在尝试构建一个简单的命令行计算器。我在查看我的书（Stephen Kochan 的*Objective-C 编程：第三版*）时输入了这个程序，但它给我带来了很多错误。

```
// Command line calculator in Objective-C

#import <Foundation/Foundation.h>

// -------- Interface -------- //

@interface calc: NSObject{
    float x, y, result;
    char op;
}

- (float) add: (float) x, (float) y;
- (float) sub: (float) x, (float) y;
- (float) mul: (float) x, (float) y;
- (float) div: (float) x, (float) y;
+ (void) evaluate;

@end

// -------- Implementation -------- //

@implementation calc

    -(float) add: (float) x, (float) y{
    return x+y;
    }

    -(float) sub: (float) x, (float) y{
        return x-y;
    }

    -(float) mul: (float) x, (float) y{
        return x*y;
    }

    -(float) div: (float) x, (float) y{
        return x/y;
    }

    +(void) evaluate: (float) x, (char) op, (float) y{
        float result;
        switch(op){
            case '+':
                result = [add: x, y]; break;
            case '-':
                result = [sub: x, y]; break;
            case '*':
            case 'x':
                result = [mul: x, y]; break;
            case '/':
            case '÷':
                result = [div: x, y]; break;
        }
        NSLog(@"%s%f", "=", result);
    }

@end

// -------- Driver -------- //

int main(int argc, const char argv[]){
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    calc *cal = [[calc alloc] init];

    float x, y;
    char op;

    NSLog(@"%s", "Welcome to the calculator!\n Please enter a simple expresion (ex. 4+3)...");
    scanf("%f%c%f", &x, &op, &y);

    [cal evaluate: x, op, y];

    [pool drain];
} 
```

我在 Mac 上，所以我用 编译它`gcc -framework Foundation main.m -o calc`，它抛出

```
calcBundle.m:14: error: expected declaration specifiers or ‘...’ before ‘(’ token
calcBundle.m:15: error: expected declaration specifiers or ‘...’ before ‘(’ token
calcBundle.m:16: error: expected declaration specifiers or ‘...’ before ‘(’ token
calcBundle.m:17: error: expected declaration specifiers or ‘...’ before ‘(’ token
calcBundle.m:26: error: expected declaration specifiers or ‘...’ before ‘(’ token
calcBundle.m:30: error: expected ‘{’ before ‘,’ token
calcBundle.m:34: error: expected declaration specifiers or ‘...’ before ‘(’ token
calcBundle.m:38: error: expected ‘{’ before ‘,’ token
calcBundle.m:42: error: expected declaration specifiers or ‘...’ before ‘(’ token
calcBundle.m:42: error: expected ‘{’ before ‘,’ token
calcBundle.m:53:9: warning: multi-character character constant
calcBundle.m:59: warning: incomplete implementation of class ‘calc’
calcBundle.m:59: warning: method definition for ‘+evaluate’ not found
calcBundle.m:59: warning: incomplete implementation of class ‘calc’
calcBundle.m:59: warning: method definition for ‘-div:’ not found
calcBundle.m:59: warning: method definition for ‘-mul:’ not found
calcBundle.m:59: warning: method definition for ‘-sub:’ not found
calcBundle.m:59: warning: method definition for ‘-add:’ not found
calcBundle.m: In function ‘main’:
calcBundle.m:73: warning: ‘calc’ may not respond to ‘-evaluate:’
calcBundle.m:73: warning: (Messages without a matching method signature
calcBundle.m:73: warning: will be assumed to return ‘id’ and accept
calcBundle.m:73: warning: ‘...’ as arguments.) 
```

我知道这可能是微不足道的事情，但我已经对照几个例子进行了检查，似乎无法弄清楚这些问题的根源是什么。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:18:34.700

你真的应该阅读一个客观的C初学者教程......

您的方法声明是错误的。他们应该看起来像

```
-(float) add: (float) x to: (float) y
{
    return x+y;
} 
```

您不使用逗号分隔参数，而是尝试创建一个“句子”来说明该方法的作用，在本例中为“将 x 添加到 y”。

# matlab - 如何为正值求解这个受约束的非线性方程组？

> ID：13948055
> 
> 赞同：3
> 
> 时间：2012-12-19T08:14:41.850
> 
> 标签：matlab, optimization

对于 x 的正值，我如何解决这个系统？我使用了 fval 但它找不到答案并要求更大的迭代这是无益的......
**a 必须是正数并且小于 0.05
b 必须大于 88**

```
function F = Final_Project_2(x)
 F = [(1/x(1)) + (1/x(2))- (2/(7*x(3)));
       (x(3)+2*x(4))*(15*x(2))/((x(1)+x(2))*x(3)-0.7/x(3))-14;
       (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) - a;
       ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-b]; 
```

**编辑：** 这个问题如何“过于本地化”？！
我从设计一个公共发射极放大器推导出这个方程组。第一个等式来自 $/betha /$ 的独立性。第二个是从 Collector 到 Emitter 的 kvl。第三个是 CE 增益。最后一个是 R_in

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:03:27.653

这很适合非线性约束优化类别， fmincon 在这里很有帮助。Fmincon 允许您求解非线性系统，同时在解向量上设置上限和下限。问题是解决方案将取决于您的起点......因此，如果您对解决方案的位置有一个很好的猜测，那将*有****很大***帮助。

打个比方，就好像让求解器爬到它前面的山顶，或者让它从某个随机起点背包徒步找到欧洲最高峰。当您靠近时，您可以“向上”走。

无论如何，这就是你如何做到这一点。

```
function test()

    a = .05
    b = 88

    xo = [100 100 100 100 a b]

    options = optimset('MaxFunEvals',1E5, ...
        'MaxIter', 1E5, ...
        'TolFun', 1E-32, ...
        'TolX', 1E-32, ...
        'TolCon', 1E-32);

    x = fmincon(@(X) Ftest(X), xo, [], [], [], [], ...
        [-inf -inf -inf -inf a b], [], [],  options)

    Final_Project_2(x)

    function F = Ftest(x)
        F = norm(Final_Project_2(x))
    end

    function F = Final_Project_2(x)
        F = [(1/x(1)) + (1/x(2))- (2/(7*x(3)));
               (x(3)+2*x(4))*(15*x(2))/((x(1)+x(2))*x(3)-0.7/x(3))-14;
               (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) - x(5);
               ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-x(6)];
    end

end 
```

> x =
> 
> 258.0438 84.3372 24.9576 34.8035 3.0926 88.0000
> 
> 答案=
> 
> ```
> 0.0043    -0.0000
> 0.0001    -0.0000 
> ```

请注意求解器如何撞击 b 的下限。您可以尝试使用初始猜测，看看是否可以找到更好的最小值。不能保证解决方案...

***这是有趣的部分***，你可以做得更好。您的系统不仅是成本函数，而且*是对 x 的约束*。类似的代码，但使用这些信息，你就有了一个强大的解决方案。

```
function test()

    a = .05
    b = 88

    xo = [100 100 100 100 a b]

    options = optimset('MaxFunEvals',1E4, ...
        'MaxIter', 1E4, ...
        'TolFun', 1E-32, ...
        'TolX', 1E-32, ...
        'TolCon', 1E-32);

    x = fmincon(@(X) Ftest(X), xo, [], [], [], [], ...
        [-inf -inf -inf -inf a b], [], @(X) xcon(X),  options)

    Final_Project_2(x)

    function F = Ftest(x)
        F = norm(Final_Project_2(x))
    end

    function [c,ceq] = xcon(x)
        c = []
        ceq = [(1/x(1)) + (1/x(2))- (2/(7*x(3)));
            (x(3)+2*x(4))*(15*x(2))/((x(1)+x(2))*x(3)-0.7/x(3))-14;
            (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) - x(5);
           ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-x(6);
           (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) - x(5);
            ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-x(6)];
    end

    function F = Final_Project_2(x)
        F = [(1/x(1)) + (1/x(2))- (2/(7*x(3)));
               (x(3)+2*x(4))*(15*x(2))/((x(1)+x(2))*x(3)-0.7/x(3))-14;
               (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) - x(5);
               ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-x(6)];
    end

end 
```

> x =
> 
> 360.8859 132.2940 27.6590 34.2885 3.6943 117.8688
> 
> 答案=
> 
> 1.0e-14 *
> 
> -0.0002 0.1776 -0.0444 0

将第二种方法想象为给背包客一组可供使用的小径/道路。它引导求解器通过 R^6 空间。

# java - 键盘按键重复率和延迟

> ID：13948057
> 
> 赞同：2
> 
> 时间：2012-12-19T08:14:45.467
> 
> 标签：java, keyboard, keyboard-events

无论如何，是否可以以独立于平台的方式从 Java 中确定键重复率和键重复延迟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:35:43.690

如果是 Windows，您可以在注册表中查找重复率：HKEY_CURRENT_USER\Control Panel\Keyboard\KeyboardSpeed

在 Java 中访问 reg 值的各种方法，这里是其中之一：

[http://transoceanic.blogspot.co.uk/2011/12/java-read-key-from-windows-registry.html](http://transoceanic.blogspot.co.uk/2011/12/java-read-key-from-windows-registry.html)

# opengl - 顶点属性绑定范围

> ID：13948060
> 
> 赞同：3
> 
> 时间：2012-12-19T08:14:59.050
> 
> 标签：opengl

以下代码不起作用：

```
self._program1 = glCreateProgram()
... attach shaders, link ...
glUseProgram(self._program1)
self._fooLoc = glGetAttribLocation(self._program1, 'foo')
glBindBuffer(GL_ARRAY_BUFFER, self._fooBuffer)                    #!!!!!
glVertexAttribPointer(self._fooLoc, 4, GL_FLOAT, False, 0, None)  #!!!!!
glEnableVertexAttribArray(self._fooLoc)
glUseProgram(0)

... lots of stuff, but self._program1 is never used ...

glUseProgram(self._program1)
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4)
glUseProgram(0) 
```

但是，如果我按如下方式修改代码，那么它确实有效：

```
self._program1 = glCreateProgram()
... attach shaders, link ...
glUseProgram(self._program1)
self._fooLoc = glGetAttribLocation(self._program1, 'foo')
glEnableVertexAttribArray(self._fooLoc)
glUseProgram(0)

... lots of stuff, but self._program1 is never used ...

glUseProgram(self._program1)
glBindBuffer(GL_ARRAY_BUFFER, self._fooBuffer)                    #!!!!!
glVertexAttribPointer(self._fooLoc, 4, GL_FLOAT, False, 0, None)  #!!!!!  
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4)
glUseProgram(0) 
```

请注意，我只是移动了标有感叹号的两行。

这种行为的原因可能是什么？我认为如果我使用 将数组缓冲区与顶点属性`glVertexAttribPointer`相关联，那么该关联将成为程序状态的一部分并一直有效，直到它被显式更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:55:52.607

顶点属性~~和统一~~绑定与程序无关。属性或统一位置只是一个数字，如果多个程序具有相同的位置设置（因为它可以在更高版本的 GLSL 中明确完成），那么相同的属性~~和统一绑定可以被多个程序重用~~。这也意味着，glUseProgram 不会恢复绑定，这些绑定可能已在其他地方进行了更改。

# php - 获取大链接的主要网址部分

> ID：13948065
> 
> 赞同：1
> 
> 时间：2012-12-19T08:15:28.270
> 
> 标签：php

> **可能重复：**
> [在 php 中获取部分 url](https://stackoverflow.com/questions/10140504/get-part-of-url-in-php)

我想得到`http://aoup.net/manage/preForm/test.php`

从这个网址

```
http://aoup.net/manage/preForm/test.php?op=Results&form_id=1&form_name=%D8%A7%D9%86%D8%AA%D8%AE%D8%A7%D8%A8%20%D8%AD%D9%88%D8%B2%D9%87%20%D8%A7%D9%85%D8%AA%D8%AD%D8%A7%D9%86%DB%8C%28%D8%AF%D9%88%D8%B1%D9%87%20228%29&hash=406ce38266577b8dff3102e476fdf587 
```

这是我的 php 代码无法正常工作：

```
echo 'http://'.$_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF']); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:18:35.560

您可以使用`parse_url`函数来实现这一点：[http ://es2.php.net/manual/en/function.parse-url.php](http://es2.php.net/manual/en/function.parse-url.php)

例如：

```
<?php

$url = 'http://aoup.net/manage/preForm/test.php?op=Results&form_id=1&form_name=%D8%A7%D9%86%D8%AA%D8%AE%D8%A7%D8%A8%20%D8%AD%D9%88%D8%B2%D9%87%20%D8%A7%D9%85%D8%AA%D8%AD%D8%A7%D9%86%DB%8C%28%D8%AF%D9%88%D8%B1%D9%87%20228%29&hash=406ce38266577b8dff3102e476fdf587';
$parsed_url = parse_url($url);
$new_url = $parsed_url['scheme'] . '://' . $parsed_url['host'] . $parsed_url['path'];
echo $new_url; 
```

将打印`http://aoup.net/manage/preForm/test.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:17:18.887

```
echo $_SERVER['HTTP_HOST'] . $_SERVER['SCRIPT_NAME']; 
```

# javascript - Jquery获取元素的最新ID并提取数字

> ID：13948068
> 
> 赞同：3
> 
> 时间：2012-12-19T08:15:36.680
> 
> 标签：javascript, jquery

我有这样的事情：

```
<div id="row1">Some content</div>
<div id="row2">Some content</div>
<div id="row3">Some content</div>
<div id="row4">Some content</div>
<div id="row7">Some content</div>
<div id="row15">Some content</div>
<div id="row915">Some content</div>
<div id="row919">Some content</div> 
```

行实际上是从 PHP 数组中提取的，现在我需要提取最后一行的编号，例如在本例中为 919。（所以当我使用 append 通过 jQuery 生成更多行时，我可以将 +1 添加到行 ID）...。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:18:22.097

我建议您保留一个带有最后一个值的变量，而不是这样做。然后追加时，您可以更改此值。这样可以节省获取 id 并对其进行解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:18:02.200

假设它们在同一个 div 中，并假设 row919 是最后一个元素，您可以执行以下操作：

```
var last_element_id = $('.parentDiv').last().attr('id');
var number = last_element_id.replace('row',''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:26:48.627

如果你不能按照 Jon 的建议去做，你可以试试这个：

```
var max = -Infinity;
$('div')​​.each(function () {
    var match = this.id.match(/^row([0-9]+)$/)
    if (max < match[1]) {
        max = match[1];            
    }
});

$('#row' + max).html('Max!');
​ 
```

这是一个示例小提琴：http: [//jsfiddle.net/HTkkb/](http://jsfiddle.net/HTkkb/)

上面的脚本查找所有 div 的 id 的后缀的最大数量，并获取具有 id 的元素`row + max`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:18:59.620

更容易使用`data-`属性和类：

```
<div class="row" data-id="1">Some content</div>
<div class="row" data-id="2">Some content</div> 
```

正如其他答案所说，存储变量并递增会更好地获得下一个增量。但是，您仍然应该考虑 data-id 结构，而不是尝试将其解析出带有标签的 id 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T08:41:36.850

使用：最后

```
alert($('div:last').attr('id').split('row')[1]); 
```

小提琴示例[jsfiddle](http://jsfiddle.net/shree/tjXvG/1/)

# ios - 核心数据 + '声明仍然有效'

> ID：13948069
> 
> 赞同：8
> 
> 时间：2012-12-19T08:15:36.837
> 
> 标签：ios, core-data

对于这个核心数据错误，我真的很糟糕。

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason:     'statement is still active' 
```

我的应用程序和代码都可以正常工作，除了偶尔快速调用请求时。当我试图破坏应用程序时会发生这种情况。从一个屏幕转到下一个屏幕，下载数据并执行获取请求。

我知道这与线程和核心数据有关。

我从后台线程调用这段代码，它有自己的托管对象上下文。

```
+ (AN_User *)updateWithRecord:(NSDictionary *)record moc:(NSManagedObjectContext *)moc{

    NSNumber *userID = nil;
    NSString *username = nil;

    if([record objectForKey:@"user_id"]){
        userID = [NSNumber numberWithInt:[[record objectForKey:@"user_id"] intValue]];
    }else if([record objectForKey:@"id_member"]){
        userID = [NSNumber numberWithInt:[[record objectForKey:@"id_member"] intValue]];
    }

    if([record objectForKey:@"username"]){
        username = [NSString stringWithFormat:@"%@", [record objectForKey:@"username"]];
    }else if([record objectForKey:@"member_name"]){
        username = [NSString stringWithFormat:@"%@", [record objectForKey:@"member_name"]];
    }

    if(!userID||!username){
        return nil;
    }

    __block AN_User *user = nil;

    [moc performBlockAndWait:^{

        NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];

        NSEntityDescription *entity = [NSEntityDescription entityForName:@"AN_User" inManagedObjectContext:moc];
        [request setEntity:entity];

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(user_id == %@) OR (username == %@)", userID, username];
        [request setPredicate:predicate];

        if([moc countForFetchRequest:request error:nil]==0){
            user = (AN_User *)[NSEntityDescription insertNewObjectForEntityForName:@"AN_User" inManagedObjectContext:moc];
        }else{
            NSArray *fetchResults = [moc executeFetchRequest:request error:nil];
            if(fetchResults.count>0){
                user = [fetchResults objectAtIndex:0];
            }
        }

        if(user){

            user.user_id = userID;
            user.username = username.lowercaseString;

            //Parse profile image url
            NSString *avatar = [record objectForKey:@"avatar"];
            NSString *fileName = [record objectForKey:@"filename"];
            if([avatar isKindOfClass:[NSString class]]&&avatar.length>0){
                user.profile_image_url = [NSString stringWithFormat:@"%@", avatar];
            }else if([fileName isKindOfClass:[NSString class]]&&fileName.length>0){
                user.profile_image_url = [NSString stringWithFormat:@"http://www.example.com/forum/avs/%@", fileName];
            }

            if([record objectForKey:@"gpbp_respect"]){
                user.respect = [NSNumber numberWithFloat:[[record objectForKey:@"gpbp_respect"] floatValue]];
            }

        }
    }];
    return user;
} 
```

我知道这可能很难分辨，但是任何人都可以告诉我，如果我做错了什么，这些请求是显而易见的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T06:17:17.813

如果您滚动在 ab/g 线程上调用核心数据的表，则会发生这种情况，并且核心数据希望将上下文全部放在一个线程上。

另一个 SO 海报通过为每个线程创建一个 MOContext 来解决这个问题，但我不喜欢在多个线程上使用 CRUD 的想法，所以我只是在我的代码周围放置了一个 dispatch_async (dispatch_get_main_queue(), ) 包装函数。到目前为止还没有崩溃，但这种情况很少见，所以我对此并不确定。

# java - xsl变量初始化，方法不被调用

> ID：13948074
> 
> 赞同：3
> 
> 时间：2012-12-19T08:15:52.250
> 
> 标签：java, xml, xslt, xsl-variable

我是 xslt 的新手，有一个问题。

我有一个包含所有必要的 setter 和 getter 的 validate 类。例如它有这样的方法：

```
public void setProducer(String producer) {
    this.producer = producer;
    System.out.println("TEST");
} 
```

当我启动我的应用程序时，我看到这个方法没有被调用。

当我在我的 xsl 文件中添加这样的代码时，我只在控制台中看到我的测试消息：

```
<xsl:value-of name="producerName" /> 
```

那么在第一次使用时我的错误或 xsl:variable 在哪里初始化？

* * *

我有这个代码：

```
<xsl:param name="category-name" />
<xsl:param name="subcategory-name" />
<xsl:param name="producer" />
<xsl:param name="model" />
<xsl:param name="color" />
<xsl:param name="date_of_issue" />
<xsl:param name="price" />
<xsl:param name="not_in_stock" />
<xsl:variable name="validator" select="validation:new()" />
<xsl:template match="/">
    <xsl:for-each select="products/category">
        <xsl:if test="name() = 'category' and @name=$category-name">
            <xsl:apply-templates select="subcategory[@name=$subcategory-name]" />
        </xsl:if>
    </xsl:for-each>
</xsl:template>

<xsl:template match="subcategory">
    <xsl:apply-templates select="good" />
    <xsl:variable name="errorSize"
        select="validation:getErrorListSize($validator)" />
    <xsl:if test="$errorSize = 0">
        <xsl:variable name="producerName"
            select="validation:setProducer($validator, $producer)" />

        <xsl:variable name="setModel"
            select="validation:setModel($validator, $model)" />
        <xsl:variable name="setColor"
            select="validation:setColor($validator, $color)" />
        <xsl:variable name="setDateOfIssue"
            select="validation:setDateOfIssue($validator, $date_of_issue)" />
        <xsl:if test="$not_in_stock != null">
            <xsl:variable name="setPrice"
                select="validation:setPrice($validator, $price)" />
        </xsl:if>
        <xsl:variable name="validationResult"
            select="validation:validateAllFields($validator)" />
        VALIDATION FINISHED
        <xsl:variable name="errors"
            select="validation:getErrorListSize($validator)" />
            <xsl:value-of select="$errors"/>

    </xsl:if>
    <xsl:if test="$errorSize != 0">
        REDIRECT. ERROR EXISTS
    </xsl:if>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:35:51.563

第一点：XSLT 中的扩展函数高度依赖于产品，所以如果不告诉我们您使用的是什么 XSLT 处理器，就不能真正问我们这个问题。

混合声明性语言和程序性语言总是很棘手（最好的办法是避免它）。当然，在 XSLT 中，优化处理器会懒惰地评估变量，这意味着如果一个变量没有被引用，那么它就不会被评估。

在撒克逊人中，如果您“假装”在结果树中使用方法的结果，通常可以避免调用具有副作用的 Java 方法；您可以通过从 xsl:value-of 指令调用该方法来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:47:38.267

一些 XSLT 处理器（例如 Saxon）使用惰性求值，因此在实际需要之前不会对变量求值。所以，你还没有使用这种方法，还有其他调用方法的可能性。如果变量在您的 xsl 文档中无用，请改用以下内容：

```
<xsl:value-of select="validation:setProducer($validator, $producer)"/> 
```

# android - tinycarousel 滚动在默认的 android 浏览器中不起作用

> ID：13948076
> 
> 赞同：2
> 
> 时间：2012-12-19T08:16:06.953
> 
> 标签：android, jquery

我为我的小项目实现了 tinycarousel，它几乎适用于所有浏览器，但滚动在默认的 android 浏览器中不起作用，我不知道如何调试或修复它，请任何人帮助我。也许有人有同样的问题？

这是一个简单的代码，我用于这个轮播：

```
$('#videoResume .videoResumeHolder').tinycarousel({interval: false, pager: true}); 
```

# android - 如何在布局中设计可滚动的文本视图？

> ID：13948078
> 
> 赞同：2
> 
> 时间：2012-12-19T08:16:32.437
> 
> 标签：android, android-layout

![在此处输入图像描述](../Images/dad50a01d40efcd63621e72b3a370716.png)

我没有得到这个“可滚动文本视图”部分..它搞砸了..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:18:35.607

您实际上不需要使用 ScrollView。

只需设置

```
android:maxLines = "a number"
android:scrollbars = "vertical" 
```

布局的 xml 文件中 TextView 的属性。

然后使用：

```
yourTextView.setMovementMethod(new ScrollingMovementMethod()) 
```

在你的代码中。

它会自动滚动。

# php - SERVER_NAME 返回 www 作为子域

> ID：13948080
> 
> 赞同：-1
> 
> 时间：2012-12-19T08:16:39.020
> 
> 标签：php, codeigniter, redirect, mobile, hook

我想做的是创建与移动网站相同的基于 CodeIgniter 的网站副本。它的 url 应该是这样的`m.example.com`。

正如我之前在[这里](https://stackoverflow.com/questions/13928677/mobile-version-of-site-using-codeigniter)提到的，我使用钩子进行重定向。现在我有另一个问题。在使用 HTTP_USER_AGENT 检查用户代理是否移动后，我使用 php 标头函数重定向`www.example.com`到。`m.example.com`尽管我重定向了，当我`$_SERVER["SERVER_NAME"]`在 m.example.com 中打印时，它看起来仍然像`www.example.com`. 这里有什么问题？我的钩子代码如下：

```
class Mobile
{
public function isMobile()
{
    $useragent = $_SERVER['HTTP_USER_AGENT'];

    if(preg_match('/android.+mobile|Android 4.1.1|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i',substr($useragent,0,4)))
    {
        $fullUrl = $_SERVER["SERVER_NAME"] . $_SERVER["REQUEST_URI"];
        $fullUrl = str_replace('http://', '', $fullUrl);

        if(substr($fullUrl, 0, 3) == 'www')
        {
            $fullUrl = 'http://' . str_replace('www', 'm', $fullUrl);
            header("Location:" . $fullUrl);
            exit;
        }
        if(substr($fullUrl, 0, 3) == 'new')
        {
            $fullUrl = 'http://m.' . $fullUrl;

            header("Location:" . $fullUrl);
        }
        else if(substr($fullUrl, 0, 4) == 'beta')
        {
            $fullUrl = 'http://m.' . $fullUrl;

            header("Location:" . $fullUrl);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:22:06.557

好的，我发现了问题。问题出在 index.php 文件中。当我将 index.php 文件更改为 default.php 时，问题就解决了。

另一种解决方案是在 nginx 服务器中定义 m 个子域。

# apache - mod_rewrite 忽略现有文件

> ID：13948083
> 
> 赞同：2
> 
> 时间：2012-12-19T08:17:01.720
> 
> 标签：apache, mod-rewrite

有许多类似的问题，但没有一个有帮助。我的 .htaccess 中有以下规则

```
RewriteRule ^images/.*$ - [F] 
```

所以对于像 /images/goods/ 或 /images/nonexistentfile.jpg 这样的文件夹，我会得到“禁止”，这就是我想要的。问题是，如果请求了现有文件，我的规则将被忽略并提供文件。事实上，如果我在 .htaccess 中故意犯错，我不会像在请求文件夹或不存在的文件时那样收到内部服务器错误。我应该寻找什么？

* * *

apache2.conf

```
<VirtualHost 1.2.3.4:8080>
    ServerName domain.com
    DocumentRoot /var/www/s3/data/www/domain.com
    SuexecUserGroup s3 s3
    CustomLog /var/www/httpd-logs/domain.com.access.log combin$
    ErrorLog /var/www/httpd-logs/domain.com.error.log
    ServerAlias www.domain.com
    ServerAdmin example@domain.com
    AddDefaultCharset utf-8
    php_admin_value open_basedir "/var/www/s3/data:.:/tmp"
    php_admin_value sendmail_path "/usr/sbin/sendmail -t -i -f example@domain.com
    php_admin_value upload_tmp_dir "/var/www/s3/data/mod-tmp"
    php_admin_value session.save_path "/var/www/s3/data/mod-tmp"
    AddType application/x-httpd-php .php .php3 .php4 .php5 .phtml
    AddType application/x-httpd-php-source .phps
</VirtualHost> 
```

还有什么我应该在这里发布的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:45:57.247

我有一个类似的问题。我将以下 .htaccess 放入 images 文件夹以禁止访问 jpg 文件（在我的情况下）

```
IndexIgnore */*
<Files ~ ".*\.jpg$">
    Order deny,allow
    Deny from all
</Files> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:05:23.240

看起来你的 htaccess 文件没有被应用。尝试在您的虚拟主机配置中添加[AllowOverride 指令：](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)

```
<Directory "/var/www/s3/data/www/domain.com/">
    AllowOverride All
</Directory> 
```

默认情况下，AllowOverride 应设置为`All`，但您的主机可能在服务器配置级别将其设置为其他值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:58:01.913

万一有人有同样的问题，那是微不足道的。默认的 ISPManager 安装将 nginx 放在 Apache 前面用于静态文件...

# winforms - 以 windows 形式定义全局 ofstream

> ID：13948084
> 
> 赞同：0
> 
> 时间：2012-12-19T08:17:01.403
> 
> 标签：winforms, visual-c++, ofstream

我需要这样做：

```
 #include <fstream>

    ...

ofstream myStream

    private: System::Void start_Click(System::Object^  sender, System::EventArgs^  e) {
    //open ofstream
                 }

    private: System::Void timer1_Tick(System::Object^  sender, System::EventArgs^  e) {
    //write to ofstream
    } 
```

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:39:46.287

代码片段显示了您想要声明它的位置，但没有显示声明的样子。无论如何，问题是您不能在托管（.NET CLR）代码中使用非托管（C++ 本机）对象。您可以声明一个`ofstream*`变量，但不能声明`ofstream`or `ofstream&`。

如果你想使用`ofstream`而不是`System.IO.StreamWriter`，你必须在一个单独的只包含hative代码的类中创建一个类，并从你的.NET代码中实例化那个类。[这](http://www.codeproject.com/Articles/35041/Mixing-NET-and-native-code)是一篇解决此问题的 CodeProject 文章。

# c# - 我需要 .NET Framework 2 的 Twitterizer 替代品

> ID：13948088
> 
> 赞同：3
> 
> 时间：2012-12-19T08:17:11.947
> 
> 标签：c#, twitter, twitterizer

我曾尝试使用 Twitterizer，但它只能在 .NET 3.5 和 4 中编译。

我需要更新一个需要恢复用户推文的项目，但它是一个 .NET 2.0 Sharepoint 项目。

你知道任何图书馆吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:20:40.657

.NET 的 Twitter 库

*   [SpringSource为 Twitter](http://www.springframework.net/social-twitter/)提供的 Spring.NET 社交扩展 – 一个 Spring.NET 社交扩展，具有连接支持和 Twitter 的 API 绑定。

*   [Andrew Arnott 的DotNetOpenAuth](http://sourceforge.net/projects/dnoa/) – OpenID、OAuth 和 InfoCard 库

*   [Daniel Crena 的Hammock](https://github.com/danielcrenna/hammock) – 支持 OAuth 身份验证的 HTTP API 客户端。

*   [Joe Mayo 的LINQ to Twitter](http://linqtotwitter.codeplex.com/) – Twitter API 的 LINQ 提供程序

*   Chris 的[OAuth-Dot-Net – 用于客户端和提供者的 OAuth 库](http://code.google.com/p/oauth-dot-net/)

*   [Daniel Crenna 和 Jason Diller 的TweetSharp](http://tweetsharp.com/) – 使用 Hammock 构建的 Twitter API 库

*   [DigitallyBorn 的Twitterizer](http://www.twitterizer.net/) – Twitter API 库（需要 .NET > 3.5）

*   [Duane Roelands](http://twittervb.codeplex.com/)的 TwitterVB – 一个 VB.NET Twitter API 库

*   [Matt Hamilton 的Budgie](https://bitbucket.org/mabster/budgie) - 一个非常简单的库，可通过其 HTTP API 访问 Twitter。类库中的所有方法都是异步的，返回 Task，因此如果您使用 C# 5，您可以等待它们。 Budgie 是一个支持 .NET 4（及更高版本）和 Windows 应用商店的可移植类库。

检查这个：

[Twitter 库 .Net](https://dev.twitter.com/docs/twitter-libraries#dotnet)

# gwt - 如何使用 Vaadin/GWT 访问 Image Dom 元素？

> ID：13948089
> 
> 赞同：1
> 
> 时间：2012-12-19T08:17:11.900
> 
> 标签：gwt, dom, vaadin

我有一个看起来像这样的 HTML Dom：

```
<div class="mydiv" id="mydivId">
  <img src="../xyz.png" class="gwt-Image imgWrapper" draggable="false">
</div> 
```

我正在尝试更改 img 源，因此我进行了以下操作以访问图像但没有成功：

```
Image imageElement = (Image) Document.get()
                    .getElementById("mydivId")
                    .getElementsByTagName("img").getItem(0); 
```

如何将`<img>`dom 元素作为 Image 然后更改其来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:51:43.043

获取`ImageElement`与

```
ImageElement image = (ImageElement) DOM.getElementById("mydivId").getFirstChildElement(); 
```

`Image`或通过包装现有的 img 元素来创建一个小部件，如

```
Image img = Image.wrap(DOM.getElementById("mydivId").getFirstChildElement()); 
```

正如 Saeed Zarinfam 所提到的，如果您为图像本身分配一个唯一的 ID，它会变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:48:35.900

您必须为您的图像标签分配一个 id：

```
<div class="mydiv" id="mydivId">
  <img src="../xyz.png" class="gwt-Image imgWrapper" draggable="false" id="myImgId">
</div> 
```

然后您可以使用以下代码访问它：

```
Element elem = DOM.getElementById("myImgId");
Window.alert(elem.getAttribute("src")); 
```

或者，如果您不想为图像标签分配 id，则可以使用以下代码：

```
Element elem = DOM.getElementById("mydivId");
Window.alert(elem.getFirstChildElement().getAttribute("src")); 
```

# c# - SharePoint 注释以编程方式写入错误

> ID：13948097
> 
> 赞同：1
> 
> 时间：2012-12-19T08:17:35.630
> 
> 标签：c#, list, sharepoint

我的问题与以编程方式写入“Note”类型的 Sharepoint 列表字段有关。从现场读取是直截了当的。

```
//Retrieving the list row
SPListItem baseItem = baseList.GetItemById(itemId) as SPListItem;  

string value = Convert.ToString(baseItem["NameOfTheNoteField"]); 
```

但后来我尝试写入一个注释字段；

```
SPListItem item ...;
item["NameOfTheNoteField"] = "MyValue"; 
```

它会导致以下错误：

> 值不在预期范围内...

如果不是字符串，Note 字段期望什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:34:45.930

您实际上不应该将其视为*Note*字段，而应将其视为[`SPMultiLineText`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldmultilinetext.aspx)字段。

要更新它，您首先需要获取当前值并对其进行编辑-您也不应该使用`Convert.ToString()`它，但是`GetFieldValueAsHtml`or `GetFieldValueAsText`。最终，您设置值的方式应该有效。`Value does not fall within the expected range`也可能来自其他地方 - 例如，您没有使用正确的字段名称，因此`item["NameofNoteField"]`会引发错误。尝试调试它。

以您的示例并更新该字段中的当前文本：

```
SPListItem baseItem = baseList.GetItemById(itemId) as SPListItem;
SPFieldMultiLineText mlfield = baseItem.Fields.GetField("NameOfTheNoteField") as SPFieldMultiLineText;
string fieldtext = multilineField.GetFieldValueAsHtml(item["NameOfTheNoteField"], baseItem );
//or use GetFieldValueAsText
fieldtext += "I am the update of the text";
baseItem ["NameOfTheNoteField"] = fieldtext;
baseItem.Update() 
```

# liferay - 使用 OrganizationLocalServiceUtil.addOrganization 在 Liferay 中创建组织？

> ID：13948098
> 
> 赞同：3
> 
> 时间：2012-12-19T08:17:40.560
> 
> 标签：liferay

我正在`Organization`使用以下方法在 Liferay 中创建一个：

```
OrganizationLocalServiceUtil.addOrganization (
                userId, parentOrganizationId, name,
                type, recursable, regionId, countryId,
                statusId, comments, false, serviceContext); 
```

以下是我的困惑：

1.  为什么我们需要`parentOrganizationId`？
2.  组织`status`指的是什么？
3.  为什么`ServiceContext`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:04:05.793

简短的回答：[有 javadoc](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/OrganizationLocalService.html#addOrganization%28long,%20long,%20java.lang.String,%20java.lang.String,%20boolean,%20long,%20long,%20int,%20java.lang.String,%20boolean,%20com.liferay.portal.service.ServiceContext%29)

有点长：

*   组织具有隐式层次结构 - 因此，如果您创建一个组织，您不妨在层次结构中的预期位置创建它，即 parentOrganizationId。
*   您可能想尝试 ListTypeConstants.ORGANIZATION_STATUS_DEFAULT 作为您提供的状态
*   通常，Liferay 将所有者或其他数据与创建的实体一起存储（例如，用于以后的权限检查）。这是可以从 serviceContext 中检索到的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:02:03.870

答案就在这个[文档](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/OrganizationLocalServiceUtil.html#addOrganization%28long,%20long,%20java.lang.String,%20java.lang.String,%20boolean,%20long,%20long,%20int,%20java.lang.String,%20boolean,%20com.liferay.portal.service.ServiceContext%29 "Liferay 官方 API 文档：OrganizationLocalServiceUtil#addOrganization")中。

从文档原样：

`userId`- 组织的创建者/所有者的
`parentOrganizationId`主键 - 组织的上级组织的主键
`name`- 组织的名称
`type`- 组织的类型
`recursable`- 组织的权限是否由其子组织继承 - 组织
`regionId`的主键组织区域
`countryId`- 组织国家的主键
`statusId`- 组织的工作流状态
`comments`- 关于组织的评论
`site`- 组织是否要与主站点关联
`serviceContext`- 组织的服务上下文（可选为空）。可以为组织设置资产类别 ID、资产标签名称和扩展桥属性。

**要在上述文档中添加一些细节以回答您的问题：**

> 为什么我们需要`parentOrganizationId`？

Liferay 有一个层次组织结构的概念，所以你可以有层次的组织。所以如果你想创建顶级组织然后使用[`com.liferay.portal.model.OrganizationConstants.DEFAULT_PARENT_ORGANIZATION_ID`](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/model/OrganizationConstants.html#DEFAULT_PARENT_ORGANIZATION_ID "Liferay 官方 API 文档：OrganizationConstants")传递 `parentOrganizationId`

> 组织状态指的是什么？

Liferay 有各种资产的工作[流程](http://en.wikipedia.org/wiki/Workflow)（如 Kaleo 工作流程）。如果您不想使用它，请通过 [`com.liferay.portal.kernel.workflow.WorkflowConstants.STATUS_APPROVED][4]`

> 为什么选择 ServiceContext？

您可以`null`按照说明通过。
基本上，您可以将此类视为不同通用方法和属性的集合，例如 Expando、资产标签、资产类别等，它们可以作为单个参数传递，方法是包含在 ServiceContext 对象中，而不是作为单个参数并制作方法调用繁琐。这是[文档](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/ServiceContext.html)。
这里有一些更多细节让您更好地理解这一点：[开发指南](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/service-conte-1 "ServiceContext 的 Liferay 开发指南")和[维基](http://www.liferay.com/community/wiki/-/wiki/Main/ServiceContext+Pattern "ServiceContext 模式的 Liferay Wiki")。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-17T12:51:13.167

适用于顶级组织的 Liferay 6.2 的工作片段是：

```
ServiceContext serviceContext = ServiceContextFactory.getInstance(request); //or null
Organization organization = OrganizationServiceUtil.addOrganization(
                OrganizationConstants.DEFAULT_PARENT_ORGANIZATION_ID,
                organizationName,
                OrganizationConstants.TYPE_REGULAR_ORGANIZATION,
                RegionConstants.DEFAULT_REGION_ID,
                CountryConstants.DEFAULT_COUNTRY_ID,
                ListTypeConstants.ORGANIZATION_STATUS_DEFAULT,
                "",
                false,
                serviceContext
        ); 
```

之前 Olaf Kock 的评论是正确的，并且使用

```
WorkflowConstants.STATUS_APPROVED 
```

对于状态将产生一个

```
com.liferay.portal.NoSuchListTypeException. 
```

如果这不是一个新帐户，我会支持他。

# android - 在videoview上添加按钮全屏

> ID：13948100
> 
> 赞同：2
> 
> 时间：2012-12-19T08:17:54.307
> 
> 标签：android, button, fullscreen, android-videoview

我需要添加功能以全屏查看我的视频。

Videoview 是否只在他的控制面板上提供 3 个按钮 (<<) (>) (>>)，因为它可以添加第四个按钮以全屏显示视频？

要全屏查看视频，只需将嵌入的布局参数更改为 fill_parent。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:34:50.827

最后，我通过手动将按钮添加到相对布局来解决它：

```
LinearLayout lLinLayout = new LinearLayout(this);
lLinLayout.setId(1);
lLinLayout.setOrientation(LinearLayout.VERTICAL);
lLinLayout.setGravity(Gravity.CENTER);
lLinLayout.setBackgroundColor(Color.BLACK);

LayoutParams lLinLayoutParms = new LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
     ViewGroup.LayoutParams.FILL_PARENT);
lLinLayout.setLayoutParams(lLinLayoutParms);

this.setContentView(lLinLayout);

RelativeLayout lRelLayout = new RelativeLayout(this);
lRelLayout.setId(2);
lRelLayout.setGravity(Gravity.CENTER);
lRelLayout.setBackgroundColor(Color.BLACK);
android.widget.RelativeLayout.LayoutParams lRelLayoutParms = 
    new android.widget.RelativeLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
       ViewGroup.LayoutParams.FILL_PARENT);
lRelLayout.setLayoutParams(lRelLayoutParms);
lLinLayout.addView(lRelLayout);

mVideoView = new VideoView(this);
mVideoView.setId(3);
android.widget.RelativeLayout.LayoutParams lVidViewLayoutParams =
  new android.widget.RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
     ViewGroup.LayoutParams.WRAP_CONTENT);
lVidViewLayoutParams.addRule(RelativeLayout.CENTER_IN_PARENT);
mVideoView.setLayoutParams(lVidViewLayoutParams);
lRelLayout.addView(mVideoView);

Button myButton = new Button(this);
myButton.setId(3);
android.widget.RelativeLayout.LayoutParams buttonParams =
   new android.widget.RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
     ViewGroup.LayoutParams.WRAP_CONTENT);
buttonParams.addRule(RelativeLayout.CENTER_IN_PARENT);
myButton.setLayoutParams(buttonParams);
myButton.setText("My Button!");
lRelLayout.addView(myButton); 
```

# c# - C# - 使用 XmlNode 类查找 acroform 或 xfa 表单

> ID：13948101
> 
> 赞同：2
> 
> 时间：2012-12-19T08:17:54.820
> 
> 标签：c#, c#-4.0, xmlnode, xmlnodelist

我正在使用 Xmlnode 类来查找 acroform 或 xfa 表单我认为区别在于 xml 内容中的某些东西我想要找出的是模板节点

所以例如我得到了我想利用这个类来找出的xml

```
"template" node 
```

如果“模板”节点在那里，我想打印一条关于模板部分的消息，如果它不在那里，我将打印一些其他消息

我已经到了这一步：

```
private void getFormType(string reasonstring)
{      
    XmlDocument docxml = new XmlDocument();
    docxml.LoadXml(reasonstring);
    System.Xml.XmlNode xmlNode = docxml.SelectSingleNode("xml");           
} 
```

# jakarta-ee - 默认 servlet 的静态资源路径

> ID：13948104
> 
> 赞同：1
> 
> 时间：2012-12-19T08:18:07.797
> 
> 标签：jakarta-ee, servlets

我是 Java-Servlets 的新手（来自 PHP-Zend），我面临一些获取静态内容（如 js、css、...）的问题。

所以首先这里是项目的文件夹结构：

```
com.a.b.c.servlet
    bin
       com
          ...
             LoginServlet.class
             ResourceServlet.class
    resources
       languages
       templates
          login.html
       static
          css
             style.css
          js
             script.js
    src
       com
          ...
             LoginServlet.java
             ResourceServlet.java
    WebContent
       META-INF
       WEB-INF 
```

首先，我编写了一个 Resource Servlet 来获取像这样的静态内容......

```
 InputStreamReader resource = new InputStreamReader(getServletContext().getResourceAsStream("/WEB-INF/resources/static" + request.getPathInfo()), "UTF-8");
    OutputStream out = response.getOutputStream();
    for ( int c; ( c = resource.read() ) != -1; )

        out.write(c);
    } 
```

...但是我在图像方面遇到了一些问题，所以我寻找了最佳实践并发现了这一点：

[https://stackoverflow.com/a/2129960/363323](https://stackoverflow.com/a/2129960/363323)

选项 3 对我来说似乎是一个不错的选择，所以我已将此行添加到我的 web.xml（并删除了 ResourceServlet 映射）

```
 <servlet-mapping>
    <servlet-name>LoginServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

 <servlet-mapping>
    <servlet-name>ResourceServlet</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
    <url-pattern>*.js</url-pattern>
    <url-pattern>*.css</url-pattern>
</servlet-mapping> 
```

但是资源没有加载......我尝试了几个路径，比如

```
<link rel="stylesheet" href="static/css/style.css" />
<link rel="stylesheet" href="css/style.css" /> 
```

并将静态文件夹放在不同的地方....

任何想法？

# c++ - C ++ Windows中的高分辨率计时器库？

> ID：13948105
> 
> 赞同：4
> 
> 时间：2012-12-19T08:18:10.780
> 
> 标签：c++

> **可能重复：**
> [Windows 中的 C++ 高精度时间测量](https://stackoverflow.com/questions/1825720/c-high-precision-time-measurement-in-windows)

我正在开发一个从 ftp 下载文件的程序，并且正在寻找一个高分辨率计时器库来计算下载速度，现在我使用的是 c++ time(NULL)，但结果不准确。

是否有用于 Windows 平台的简单/易于使用、即插即用的 C++ 库？自上次通话后以秒为单位的时间或类似的东西。

**编辑：**

所以 QueryPerformanceCounter() 被多次提到，但通过其他线程，这是我发现的：

*您应该被警告它是基于 CPU 频率的。例如，当启用省电模式时，该频率不稳定。如果要使用此 API，请确保 CPU 处于恒定频率。*

*但是请注意，英特尔的 SpeedStep 技术可能会在您的代码没有注意到的情况下改变 PerformanceFrequency*

*我们还尝试为我们的线程修复线程关联性，以确保每个线程始终从 QueryPerformanceCounter 获得一致的值，这很有效，但它绝对会影响应用程序的性能。*

那么考虑到情况是否建议使用它？程序的性能和定时器的可靠性很重要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:21:50.347

你有 QueryPerformanceCounter 只要你不落入[MSDN 文档评论中描述的错误用例](http://msdn.microsoft.com/en-us/library/ms644904%28VS.85%29.aspx)

示例来自：[如何使用 QueryPerformanceCounter？](https://stackoverflow.com/questions/1739259/how-to-use-queryperformancecounter)

```
#include <windows.h>

double PCFreq = 0.0;
__int64 CounterStart = 0;

void StartCounter()
{
    LARGE_INTEGER li;
    if(!QueryPerformanceFrequency(&li))
    cout << "QueryPerformanceFrequency failed!\n";

    PCFreq = double(li.QuadPart)/1000.0;

    QueryPerformanceCounter(&li);
    CounterStart = li.QuadPart;
}
double GetCounter()
{
    LARGE_INTEGER li;
    QueryPerformanceCounter(&li);
    return double(li.QuadPart-CounterStart)/PCFreq;
}

int main()
{
    StartCounter();
    Sleep(1000);
    cout << GetCounter() <<"\n";
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:26:34.363

如果您有一个支持 C++11 的编译器，那么您可以简单地使用`std::chrono`，如果没有，那么您可以`boost::chrono`使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:43:01.097

使用`timeGetTime`，分辨率应该足以满足你的需要。

# asp.net - 如何将模型传递给 FormsAuthentication.RedirectFromLoginPage()？

> ID：13948109
> 
> 赞同：1
> 
> 时间：2012-12-19T08:18:29.933
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

如果用户通过身份验证，我想将他带到“主页”页面，但使用包含用户配置文件的模型，否则，我想回发包含模型错误的同一页面。这是我所做的：

```
[HttpPost]
        [AllowAnonymous]
        public ActionResult Index(Login loginViewModel)
        {
            if (ModelState.IsValid)
            {
                IUserProfile userProfile = ValidateUser(loginViewModel);

                if (userProfile != null)
                {
                    FormsAuthentication.RedirectFromLoginPage(loginViewModel.UserName, loginViewModel.RememberMe);
                    // return View(userProfile); This obviously won't work
                }
                else
                {
                    ModelState.AddModelError("InvalidCredentials", "Invalid password. Please try again.");
                }
            }

            return View();
        } 
```

问题是，我如何将视图模型（`IUserProfile`）传递给`Home/Index.cshtml`视图，因为我没有明确地将他重定向到主页；它是通过`FormsAuthentication.RedirectFromLoginPage`方法完成的。

我也不能在调用`View(userProfileViewModel)`后调用返回，`FormsAuthentication.RedirectFromLoginPage`因为如果这样做，按照惯例，它将尝试使用控制器`Index`上的名称创建视图，并尝试将视图模型传递给它，这是错误的，将导致一个例外。`Login``UserProfile`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:27:19.390

您需要在 Home 控制器的 Index 操作中传递模型。

实际上，RedirectFromLoginPage 只会向浏览器发送一个 HTTP 状态代码 (302)，告诉它重定向到新页面，然后调用所需的操作。正是在此操作中（在您的主页中的索引）中，您必须传递您的视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:54:36.890

首先，您的行动应该只做一件事和一件事……而不是两件事。您想使用索引作为登录和主页。为什么不将登录逻辑与主页逻辑分开？当您对用户进行身份验证时，此时会将他/她重定向到 Home/Index，如果登录失败，则再次显示登录。接下来，不是在登录身份验证期间加载用户配置文件，而是在将用户重定向到他们的主页时执行此操作（主页是我的逻辑）。到达页面后，加载他们的配置文件并通过会话或其他机制以某种方式缓存它。

除此之外，你为什么不使用`FormsAuthetnication.SetAuthCookie(username, rememberMe)`代替`FormsAuthentication.RedirectFromLoginPage`. 创建 cookie 后调用`return RedirectToAction("Index", "Home")`. 在此操作中，您可以使用`HttpContext.Current.User.Identity.Name`读取用户名并将其传递给您的方法以加载配置文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T08:55:41.517

尝试这个

`if (Session["SessionName"].ToString() != "Role") { return RedirectToAction("UnAuthorised", "Login"); }`

在您的索引页面中使用此代码

# android - Java.Lang.NoClassDefFoundError: com.facebook.android.R$drawable 使用 ForceAuthDialog 时出错

> ID：13948115
> 
> 赞同：0
> 
> 时间：2012-12-19T08:18:51.310
> 
> 标签：android, xamarin.android, facebook-android-sdk

我注意到在我更新了我的 Monodroid SDK 并尝试使用以下内容后：

```
facebook.Authorize(activity, FB_PERMISSIONS, Facebook.ForceDialogAuth, new LoginDialogListener()); 
```

我收到此错误：Java.Lang.NoClassDefFoundError: com.facebook.android.R$drawable。

我卸载了我的 Facebook 应用程序，以便我的应用程序不使用 SSO，并且每次都将被迫显示与 SDK 一起打包的本机 Facebook SDK 登录对话框。

当我尝试部署 monodroid-samples 文件夹中的 Facebook 示例时，它也存在同样的问题。

我在某处读到我必须将我的命名空间重命名为`Com.Facebook.Android`来解决这个问题。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:40:30.900

我下载了新的 Monodroid Facebook 示例并获得了最新版本并且它工作正常。

# java - 绘制边界矩形以选择要记录的区域

> ID：13948122
> 
> 赞同：9
> 
> 时间：2012-12-19T08:19:13.757
> 
> 标签：java, swing, video, screenshot

![边界](../Images/10b550a695f81d76640cee447c9d8d72.png)

如何在屏幕上绘制那个半透明的矩形？这不可能，`JFrame`因为 JFrame 在右上角有通常的关闭、最小化、最大化选项。
如果它确实是一个挥杆能力，它是如何凭空抽出来的？无需将其插入`JFrame`任何内容？请告诉我它是什么以及如何实现它...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T08:24:49.450

想到的直接想法是使用[`java.awt.Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)捕获屏幕截图，将其绘制到无框窗口。从那里你可以简单地在它上面画一个矩形

**更新了示例**

...花了一些时间...

![在此处输入图像描述](../Images/b5797099f4dd0083bd30e01eb2a892a4.png)

```
public class SelectionRectangle {

    public static void main(String[] args) {
        new SelectionRectangle();
    }

    public SelectionRectangle() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setUndecorated(true);
                frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BackgroundPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class BackgroundPane extends JPanel {

        private BufferedImage background;
        private Point mouseAnchor;
        private Point dragPoint;

        private SelectionPane selectionPane;

        public BackgroundPane() {
            selectionPane = new SelectionPane();
            try {
                Robot bot = new Robot();
                background = bot.createScreenCapture(getScreenViewableBounds());
            } catch (AWTException ex) {
                Logger.getLogger(SelectionRectangle.class.getName()).log(Level.SEVERE, null, ex);
            }

            selectionPane = new SelectionPane();
            setLayout(null);
            add(selectionPane);

            MouseAdapter adapter = new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    mouseAnchor = e.getPoint();
                    dragPoint = null;
                    selectionPane.setLocation(mouseAnchor);
                    selectionPane.setSize(0, 0);
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    dragPoint = e.getPoint();
                    int width = dragPoint.x - mouseAnchor.x;
                    int height = dragPoint.y - mouseAnchor.y;

                    int x = mouseAnchor.x;
                    int y = mouseAnchor.y;

                    if (width < 0) {
                        x = dragPoint.x;
                        width *= -1;
                    }
                    if (height < 0) {
                        y = dragPoint.y;
                        height *= -1;
                    }
                    selectionPane.setBounds(x, y, width, height);
                    selectionPane.revalidate();
                    repaint();
                }

            };
            addMouseListener(adapter);
            addMouseMotionListener(adapter);

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.drawImage(background, 0, 0, this);
            g2d.dispose();
        }

    }

    public class SelectionPane extends JPanel {

        private JButton button;
        private JLabel label;

        public SelectionPane() {
            button = new JButton("Close");
            setOpaque(false);

            label = new JLabel("Rectangle");
            label.setOpaque(true);
            label.setBorder(new EmptyBorder(4, 4, 4, 4));
            label.setBackground(Color.GRAY);
            label.setForeground(Color.WHITE);
            setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(label, gbc);

            gbc.gridy++;
            add(button, gbc);

            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.getWindowAncestor(SelectionPane.this).dispose();
                }
            });

            addComponentListener(new ComponentAdapter() {
                @Override
                public void componentResized(ComponentEvent e) {
                    label.setText("Rectangle " + getX() + "x" + getY() + "x" + getWidth() + "x" + getHeight());
                }
            });

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(new Color(128, 128, 128, 64));
            g2d.fillRect(0, 0, getWidth(), getHeight());

            float dash1[] = {10.0f};
            BasicStroke dashed =
                            new BasicStroke(3.0f,
                            BasicStroke.CAP_BUTT,
                            BasicStroke.JOIN_MITER,
                            10.0f, dash1, 0.0f);
            g2d.setColor(Color.BLACK);
            g2d.setStroke(dashed);
            g2d.drawRect(0, 0, getWidth() - 3, getHeight() - 3);
            g2d.dispose();
        }

    }

    public static Rectangle getScreenViewableBounds() {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();

        return getScreenViewableBounds(gd);
    }

    public static Rectangle getScreenViewableBounds(GraphicsDevice gd) {
        Rectangle bounds = new Rectangle(0, 0, 0, 0);
        if (gd != null) {
            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            bounds = gc.getBounds();

            Insets insets = Toolkit.getDefaultToolkit().getScreenInsets(gc);

            bounds.x += insets.left;
            bounds.y += insets.top;
            bounds.width -= (insets.left + insets.right);
            bounds.height -= (insets.top + insets.bottom);
        }
        return bounds;
    }
} 
```

**使用 SnipIt 示例更新**

有些人建议使用放置在屏幕顶部的透明窗口，这实际上是行不通的，因为透明窗口实际上不会响应鼠标点击，除非它们有要在上面绘制的东西以允许鼠标事件被困。

还建议您使用 Window 作为选择机制，这是一个有效的答案，但是，我（个人）会发现这是一个不合适的解决方案，因为您希望用户只需单击并拖动选择矩形（恕我直言）。

另一种方法是使用类似 SnipIt 的东西。

![在此处输入图像描述](../Images/89ef53fbbfb5f98943fce58bd3ebd73d.png)

```
public class SnipIt {

    public static void main(String[] args) {
        new SnipIt();
    }

    public SnipIt() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setUndecorated(true);
                // This works differently under Java 6
                frame.setBackground(new Color(0, 0, 0, 0));
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SnipItPane());
                frame.setBounds(getVirtualBounds());
                frame.setVisible(true);
            }
        });
    }

    public class SnipItPane extends JPanel {

        private Point mouseAnchor;
        private Point dragPoint;

        private SelectionPane selectionPane;

        public SnipItPane() {
            setOpaque(false);
            setLayout(null);
            selectionPane = new SelectionPane();
            add(selectionPane);
            MouseAdapter adapter = new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    mouseAnchor = e.getPoint();
                    dragPoint = null;
                    selectionPane.setLocation(mouseAnchor);
                    selectionPane.setSize(0, 0);
                }

                @Override
                public void mouseDragged(MouseEvent e) {
                    dragPoint = e.getPoint();
                    int width = dragPoint.x - mouseAnchor.x;
                    int height = dragPoint.y - mouseAnchor.y;

                    int x = mouseAnchor.x;
                    int y = mouseAnchor.y;

                    if (width < 0) {
                        x = dragPoint.x;
                        width *= -1;
                    }
                    if (height < 0) {
                        y = dragPoint.y;
                        height *= -1;
                    }
                    selectionPane.setBounds(x, y, width, height);
                    selectionPane.revalidate();
                    repaint();
                }
            };
            addMouseListener(adapter);
            addMouseMotionListener(adapter);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            Rectangle bounds = new Rectangle(0, 0, getWidth(), getHeight());
            Area area = new Area(bounds);
            area.subtract(new Area(selectionPane.getBounds()));

            g2d.setColor(new Color(192, 192, 192, 64));
            g2d.fill(area);

        }
    }

    public class SelectionPane extends JPanel {

        private JButton button;
        private JLabel label;

        public SelectionPane() {
            button = new JButton("Close");
            setOpaque(false);

            label = new JLabel("Rectangle");
            label.setOpaque(true);
            label.setBorder(new EmptyBorder(4, 4, 4, 4));
            label.setBackground(Color.GRAY);
            label.setForeground(Color.WHITE);
            setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(label, gbc);

            gbc.gridy++;
            add(button, gbc);

            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.getWindowAncestor(SelectionPane.this).dispose();
                }
            });

            addComponentListener(new ComponentAdapter() {
                @Override
                public void componentResized(ComponentEvent e) {
                    label.setText("Rectangle " + getX() + "x" + getY() + "x" + getWidth() + "x" + getHeight());
                }
            });

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            // I've chosen NOT to fill this selection rectangle, so that
            // it now appears as if you're "cutting" away the selection
//            g2d.setColor(new Color(128, 128, 128, 64));
//            g2d.fillRect(0, 0, getWidth(), getHeight());

            float dash1[] = {10.0f};
            BasicStroke dashed =
                    new BasicStroke(3.0f,
                    BasicStroke.CAP_BUTT,
                    BasicStroke.JOIN_MITER,
                    10.0f, dash1, 0.0f);
            g2d.setColor(Color.BLACK);
            g2d.setStroke(dashed);
            g2d.drawRect(0, 0, getWidth() - 3, getHeight() - 3);
            g2d.dispose();
        }
    }

    public static Rectangle getVirtualBounds() {

        Rectangle bounds = new Rectangle(0, 0, 0, 0);

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice lstGDs[] = ge.getScreenDevices();
        for (GraphicsDevice gd : lstGDs) {

            bounds.add(gd.getDefaultConfiguration().getBounds());

        }

        return bounds;

    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T09:37:58.803

将多显示器支持更新为来自@MadProgrammer 的示例答案。

没有`ExtendedState(JFrame.MAXIMIZED_BOTH)`和`pack()`

![在此处输入图像描述](../Images/d976c67a7f5d9b1fe75f59cdce75bf0b.png)

```
public SelectionRectangle() {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
            }

            JFrame frame = new JFrame("Test");
            frame.setUndecorated(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLayout(new BorderLayout());
            frame.add(new BackgroundPane());

            frame.setResizable( false );
            frame.setBounds( getScreenViewableBounds() );

            frame.setVisible(true);
        }

    });
} 
```

* * *

```
public static Rectangle getScreenViewableBounds() {
    GraphicsDevice[] devices = GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices();
    int minx = Integer.MAX_VALUE;
    int miny = Integer.MAX_VALUE;
    int maxx = Integer.MIN_VALUE;
    int maxy = Integer.MIN_VALUE;
    for( GraphicsDevice device : devices ) {
        for( GraphicsConfiguration config : device.getConfigurations() ) {
            Rectangle bounds = config.getBounds();
            minx = Math.min( minx, bounds.x );
            miny = Math.min( miny, bounds.y );
            maxx = Math.max( maxx, bounds.x + bounds.width );
            maxy = Math.max( maxy, bounds.y + bounds.height );
        }
    }
    return new Rectangle( new Point(minx, miny), new Dimension(maxx - minx, maxy - miny) );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T08:27:32.533

您可以使用透明、未装饰的框架来创建基本边框。

```
public class ScreenRectangle extends JFrame {

    public ScreenRectangle() {
        this.setUndecorated(true);
        this.setBackground(new Color(0, 0, 0, 0.25F));
        // opacity ranges 0.0-1.0 and is the fourth paramater
        this.add(new DrawPanel());
    }

    private class DrawPanel extends JPanel {

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.drawRect(0, 0, this.getWidth(), this.getHeight());
            // any other drawing
        } 
    }
} 
```

框架也`setOpaque`可能需要处理，或者面板尺寸可能需要处理，但这是它的总体思路。

# java - 数组列表 抛出 NullPointerException

> ID：13948123
> 
> 赞同：1
> 
> 时间：2012-12-19T08:19:21.427
> 
> 标签：java, arraylist, nullpointerexception

我有一个返回`ArrayList <Integer>`. 当我返回它并且如果它为 null 我得到一个`nullPointerException`. 现在我想进行某种验证并防止空指针异常发生。

这些是我尝试过的，但我仍然得到`nullpointerexception`

```
Map<Integer,ArrayList<Integer>> personMap = new HashMap<Integer,ArrayList<Integer>>();

public ArrayList<Integer> method(int departmentID){
  if (personMap.get(new Integer(departmentID)) !=null)
     return personMap.get(new Integer(departmentID));
  else 
     return null;

} 
```

我仍然得到`nullPointerException`.

方法2。

```
public ArrayList<Integer> method(int departmentID){
  if (personMap.get(new Integer(departmentID)).isEmpty()) return null;
  else return personMap.get(new Integer(departmentID));

} 
```

我仍然得到`nullpointerexception`. 有人可以帮我解决这个问题吗？

从测试类中，我将调用该方法，如下所示；

```
Class1 cl = new Class1();

if (c1.method(112121)) // do something 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:23:37.117

首先，您的`Map`声明将无法编译：-

```
Map<Integer,ArrayList<Integer>> personMap = new ArrayList<Integer,ArrayList<Integer>>(); 
```

你应该`new HashMap<Integer,ArrayList<Integer>>();`在 RHS 上。

其次，您的`if`声明将再次无法编译：-

```
if (c1.method(112121)) 
```

您`method()`返回一个`ArrayList`，而在​​ 中`Java`，您只能将`boolean`值作为 中的条件`if`。

* * *

**需要修改：-**

你应该改变你的*if*： -

```
if (c1.method(112121) != null) 
```

并使用第一种方法。

事实上，你不需要`if-else`那里。您可以简单地从地图中返回值：-

```
public ArrayList<Integer> method(int departmentID){ 
     return personMap.get(new Integer(departmentID));
} 
```

现在，这将返回`null`，如果键不在 中`HashMap`，否则将返回对应的`ArrayList`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:22:10.980

如果地图没有键条目，则`get()`返回`null`。
如果你再打电话`.isEmpty()`给你，你会得到一个 NPE。

而是测试`map.get(key) == null`或更好，`!map.contains(key)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:43:29.567

首先，我不建议从方法中返回 null。您应该返回空的 ArrayList。

```
Map<Integer,ArrayList<Integer>> personMap = new HashMap<Integer, ArrayList<Integer>> ();

public ArrayList<Integer> someMethod(int departmentID){

    if (personMap.get(departmentID) !=null)
        return personMap.get(departmentID);
    else
        return new ArrayList<Integer>();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:27:54.150

您的第一种方法与以下方法相同：

```
public ArrayList<Integer> method(int departmentID){
    return personMap.get(new Integer(departmentID));
} 
```

第二个显然能够抛出 NPE：

```
public ArrayList<Integer> method(int departmentID){
  if (personMap.get(new Integer(departmentID)).isEmpty()) return null;
  else return personMap.get(new Integer(departmentID));
} 
```

如果`personMap.get(new Integer(departmentID))`返回 null （它会这样做，当映射没有此键的条目时）然后调用一个抛出 NPE 的方法：

`if (personMap.get(new Integer(departmentID)).isEmpty())`

# c++ - 编写 OpenMAX IL 组件，从哪里开始

> ID：13948124
> 
> 赞同：4
> 
> 时间：2012-12-19T08:19:27.623
> 
> 标签：c++, raspberry-pi, openmax

我即将获取我的树莓派的视频输出，将其传递给有点像 adalight 的环境闪电系统。XBMC 的播放器为 PI、[omxplayer](https://github.com/xbmc/xbmc/blob/master/xbmc/cores/omxplayer/OMXVideo.cpp)，用户使用 OpenMAX API 进行解码等功能。

查看代码给出以下信息：
`m_omx_tunnel_sched.Initialize(&m_omx_sched, m_omx_sched.GetOutputPort(), &m_omx_render, m_omx_render.GetInputPort());`

据我了解，这在视频调度程序和渲染器 [S]-->[R] 之间设置了一个管道。

现在我的想法是编写一个抓取器组件并将其插入管道[S]-->[G]->[R]。抓取器将从帧缓冲区中提取像素并将其传递给驱动 LED 的守护程序。

现在我要深入研究 OpenMAX API，这似乎很奇怪。我应该从哪里开始？这是一种可行的方法吗？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:16:04.710

如果您想要解码数据，则不要发送到渲染器。代替渲染，获取数据并做任何你想做的事情。解码数据应取自[video_decode](https://github.com/raspberrypi/firmware/blob/master/documentation/ilcomponents/video_decode.html) OpenMAX IL 组件的输出端口。我想您还需要设置正确的输出像素格式，因此将组件输出端口设置为您需要的正确格式，以便由 GPU 完成转换（可以使用 YUV 或 RGB565）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T16:32:28.790

起初我认为您应该将缓冲区附加到相机组件的输出，在 CPU 中使用该帧执行您想要的所有操作，并通过连接到渲染器输入端口的缓冲区发送帧，这不会是一件小事任务，因为在树莓上几乎没有关于 OpenMax 的文档。

最佳起点： [https ://jan.newmarch.name/RPi/](https://jan.newmarch.name/RPi/)

手头最好的地方： [http ://home.nouwen.name/RaspberryPi/documentation/ilcomponents/index.html](http://home.nouwen.name/RaspberryPi/documentation/ilcomponents/index.html)

下一个最佳位置：分布在互联网上的源代码。

祝你好运。

# c# - C# 读取和过滤文本

> ID：13948129
> 
> 赞同：-2
> 
> 时间：2012-12-19T08:19:42.950
> 
> 标签：c#, console

我试图让我的代码过滤并从 txt 文件中的特定单词开始和结束。

是的，对不起。问题是，如何告诉它从一条线开始，在另一条线停止？

```
foreach (string line in File.ReadLines(@"C:\test.txt"))
{
  if (line.Contains("text"))
  {
    Console.WriteLine(line);
  }
} 
```

我将详细说明我打算实现的目标。

它必须从“命令：更新”行开始并在最后停止。棘手的部分是，它必须从最后一个“命令：更新”开始。

```
Command              : Update
Updating             : C:\somepath\somepath\somefile1.doc
Completed            : C:\somepath\somepath\somefile1.exe
External             : C:\somepath\somepath\somefile1.fla
Completed            : C:\somepath\somepath\somefile1.txt
Completed            : C:\somepath\somepath\somefile1.doc
Completed            : C:\somepath\somepath\somefile1.exe
Command              : Update
Updating             : C:\somepath\somepath\somefile222.fla
External             : C:\somepath\somepath\somefile222.txt
Updating             : C:\somepath\somepath\somefile222.doc
Completed            : C:\somepath\somepath\somefile222.exe
External             : C:\somepath\somepath\somefile222.fla
Completed            : C:\somepath\somepath\somefile222.txt
Completed            : C:\somepath\somepath\somefile222.doc
Completed            : C:\somepath\somepath\somefile222.exe 
```

首选输出是

```
C:\somepath\somepath\somefile222.doc
C:\somepath\somepath\somefile222.doc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:58:32.337

这不是最好的代码，可能会被清理一些，但这应该让你开始。此代码将读取行以查找指示开始写入的文本。然后它将输出行，直到找到指示已完成写入的文本。此时它将不再读取任何行并退出循环。

```
bool output = false;
foreach (var line in File.ReadLines("C:\\test.txt"))
{
    if (!output && line.Contains("beginText"))
    {
        output = true;
    }
    else if (output && line.Contains("endText"))
    {
        break;
    }

    if (output)
    {
        Console.WriteLine(line);
    }
} 
```

**根据问题更新进行**编辑：****

 **我将把结果行中的过滤留给你，因为我不确定定义应该输出什么和不应该输出什么的规则是什么，但这是一种至少在最后一个更新行之后获得结果的方法：

```
var regex = new Regex(@"Command\s+:\s+Update");
List<string> itemsToOutput = null;
foreach(var line in File.ReadLines("C:\\test.txt"))
{
    if (regex.IsMatch(line))
    {
        itemsToOutput = new List<string>();
        continue;
    }

    if (itemsToOutput != null)
    {
        itemsToOutput.Add(line);
    }
} 
```**

# html - 隐藏特定列的html表单

> ID：13948140
> 
> 赞同：2
> 
> 时间：2012-12-19T08:20:30.797
> 
> 标签：html

我有一个带有表格数据的 HTML 表单：

```
Name
Place 
ID 
```

对于用户名，仅应显示地点。但不应显示 ID。我的意图是在 UI 上我不希望用户看到 ID。但在后台应该有那个ID。这样当他使用提交服务器更新和发送表单时，就可以按照它想要的方式获取信息。

示例：实际表数据

```
Greg xxx 11111
Adam yyy  11112 
```

对用户来说，它应该显示为

```
Greg xxx 
Adam yyy 
```

我尝试使用`hidden`关键字但它不起作用

```
 <td>   
    <input readonly="hidden" type="text" name="id" id="mytext" size="9" value="1111 />    </td>
  <td>   
    <input readonly="readonly" type="text" name="name" id="mytext" size="9" value="Greg" /> 
  </td>
  <td>  
    <input readonly="readonly" type="text" name="location" id="mytext1" size="25" value="xxxx" /> 
  </td> 
```

我错过了告诉我，我也有问题对齐搞砸了，我只能显示 1 个元素的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:22:20.020

readonly 属性仅用于使元素可编辑或不可编辑。

改为使用`type="hidden"`。

[输入元素](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)，[输入类型](http://www.w3.org/TR/html401/sgml/dtd.html#InputType)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:22:11.960

使用`type="hidden"`. 你可能不想把它放在一个单独的`<td>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:22:48.083

用于`<input type="hidden" name="id" id="mytext" size="9" value="111" />`身份证

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:35:37.130

```
table tr td:nth-child(1) {
  display:none;
}
table tr th:nth-child(1) {
  display:none;
} 
```

# android - 在活动之间接收带有空数据的意图

> ID：13948145
> 
> 赞同：-1
> 
> 时间：2012-12-19T08:21:26.910
> 
> 标签：android, android-intent, android-activity, bundle

我有一个活动，它使用如下意图将数据发送到另一个活动：

```
public void periodDateSharedPreferences(int calculatedPeriodYear, int calculatedPeriodMonth, int calculatedPeriodDay)
{
  SharedPreferences periodDatePreferences = PreferenceManager.getDefaultSharedPreferences(this);
  SharedPreferences.Editor editor = periodDatePreferences.edit();
  editor.putInt("periodChosenDay",calculatedPeriodDay);
  editor.putInt("periodChosenMonth",calculatedPeriodMonth);
  editor.putInt("periodChosenYear",calculatedPeriodYear);
  editor.commit();
    Toast.makeText(birthDate.this,"The date was saved", Toast.LENGTH_LONG).show();
    Intent saved2 = new Intent(birthDate.this,MenuActivity.class);
      saved2.putExtra("DueDateChanged", true);
startActivity(saved2);
    finish();
 } 
```

和其他活动收到此意图如下：

```
static String DueDateChanged = "com.app.antiwal7amel.DueDateChanged"; 
```

* * *

```
Intent intent = getIntent();
        String message = intent.getStringExtra(MenuActivity.DueDateChanged);
        tv.setText(message);
        super.onResume(); 
```

但是当我运行它时，我在意图中收到了一个空数据！哪里有问题 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:23:50.360

您应该使用与放置数据相同的键来检索数据：

```
String message = intent.getStringExtra("DueDateChanged"); 
```

正如你所使用的

```
saved2.putExtra("DueDateChanged", true); 
```

**注意：** 您放置的是布尔值而不是字符串，以添加字符串

```
saved2.putExtra("DueDateChanged", "yourString"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:33:42.240

```
 Intent intent = new Intent(this, MenuActivity.class);
    intent.putExtras("yourBoolName", true); 
```

额外检索意图：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    Boolean yourBool = getIntent().getExtras().getBoolean("yourBoolName");
} 
```

# objective-c - ASIHTTPRequest 在运行时重新加载/刷新

> ID：13948147
> 
> 赞同：2
> 
> 时间：2012-12-19T08:21:40.943
> 
> 标签：objective-c, ios, xcode, asihttprequest

在我的应用程序中，我希望每当使用新数据更新 Web 服务时，我的应用程序都会与之同步。但目前发生的事情是我必须注销然后再次登录应用程序才能看到更新的结果。有什么方法可以在不注销并重新登录的情况下更新我的应用程序？

# objective-c - 将正则表达式与字符串（文件名）匹配

> ID：13948151
> 
> 赞同：6
> 
> 时间：2012-12-19T08:21:55.293
> 
> 标签：objective-c, ios, cocoa-touch

我试图区分 2 个文件（以 NSString 格式）。据我所知，这可以通过比较和匹配正则表达式来完成。我拥有的 2 个 jpg 文件的格式是：

**黄油.jpg**

**黄油-1.jpg**

我的问题是我可以编写什么正则表达式来匹配上面的 2 个字符串？我已经搜索并找到了一个示例表达式，但我不确定它是如何阅读的并且认为它是错误的。

这是我的代码：

```
NSString *exampleFileName = [NSString stringWithFormat:@"butter-1.jpg"];

NSString *regEx = @".*l{2,}.*";    

NSPredicate *regExTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regEx];

if ([regExTest evaluateWithObject:exampleFileName] == YES) {
    NSLog(@"Match!");
} else {
    NSLog(@"No match!");
} 
```

**编辑：**

我尝试使用以下内容：

```
NSString *regEx = @"[a-z]+-[0-9]+.+jpg"; 
```

尝试匹配：

```
NSString *exampleFileName = [NSString stringWithFormat:@"abcdefg-112323.jpg"]; 
```

经测试：

abc-11.jpg（匹配）

abcsdas-.jpg（不匹配）

abcdefg11\. （不匹配）

abcdefg-3123.jpg（匹配）

截至目前它有效，但我想消除它可能不起作用的任何机会，任何输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:35:49.097

```
NSString *regEx = @"[a-z]+-[0-9]+.+jpg"; 
```

将失败`butter.jpg`，因为它需要有一个`-`并且至少有一个数字。

```
NSString *regEx = @"[a-z]+(-[0-9]+){0,1}.jpg"; 
```

如果你这样做

```
NSString *regEx = @"([a-z])+(?:-([0-9])+){0,1}.jpg"; 
```

您可以访问您以后可能希望作为捕获组获得的信息。

> (...) |捕获括号。匹配括号内的子表达式的输入范围在匹配后可用。

如果您不需要捕获组

```
NSString *regEx = @"(?:[a-z])+(?:-[0-9]+){0,1}.jpg"; 
```

> (?:...)| 非捕获括号。对包含的模式进行分组，但不提供匹配文本的捕获。比捕获括号更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:44:10.433

您可以使用 . 匹配字母字符（任何语言）`\p{L}`。您可以使用 匹配数字`\d`。您需要转义，`.`因为在正则表达式中，`.`表示“任何字符”。

解析一个正则表达式是昂贵的，所以你应该只做一次。

```
BOOL stringMatchesMyPattern(NSString *string) {
    static dispatch_once_t once;
    static NSRegularExpression *re;
    dispatch_once(&once, ^{
        re = [NSRegularExpression regularExpressionWithPattern:
            @"^\\p{L}+-\\d+\\.jpg$" options:0 error:NULL];
    }

    return nil != [re firstMatchInString:string options:0
        range:NSMakeRange(0, string.length)];
} 
```

# php - 嵌套 Silex 应用程序

> ID：13948152
> 
> 赞同：1
> 
> 时间：2012-12-19T08:21:57.620
> 
> 标签：php, web-applications, routing, silex

如何嵌套 Silex 应用程序？

我正在为我的客户设置一个项目演示，以便他们能够访问`mydomain.net/project/demo`并实时查看他们的网站。

我的目录结构：

```
www
  mydomain.net
    projects
        client_project
          app
            web
              index.php    <-client project front controller
        another_client_project
          app
            web
              index.php    <-another client project front controller
    src
    vendor
    web   <-apache docroot
      index.php    <-front controller for my site 
```

所以我的想法是我应该能够在我的前端控制器上创建一个路由，它将用户代理引用到嵌套的、客户端项目特定的前端控制器之一。网址可能如下所示：`http://mydomain.net/projects/client_project/`

Silex 有一个方便的工具来发出他们所谓的子请求，如下所示：

```
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpKernel\HttpKernelInterface;

$app->get('/', function () use ($app) {
    // redirect to /hello
    $subRequest = Request::create('/hello', 'GET');

    return $app->handle($subRequest, HttpKernelInterface::SUB_REQUEST);
}); 
```

所以...这就是我搁浅的地方。我可以只制作一个引用给定嵌套前端控制器的请求吗？这需要一些 mod_rewrite 操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T00:30:30.807

由于您可能使用 mod_rewrite（或其在 nginx、lighttpd 等中的类似物）将所有内容提供给 index.php 以进行路由，因此您也可以使用它来构建这些嵌套应用程序。只需为每个客户端项目构建一个重写模式并将其发送到特定于客户端的 index.php

# azure - Azure 与 Cloud Foundry

> ID：13948153
> 
> 赞同：4
> 
> 时间：2012-12-19T08:22:00.657
> 
> 标签：azure, cloud-foundry

我是 Cloud Foundry 的新手，想在 Windows Azure 和 Cloud Foundry 之间做一个详细的比较。我已经搜索了很多，但找不到任何有用的东西。是否有一个好的帖子或一些材料可以对两者进行详细的功能比较？

问候，维克拉姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:24:14.847

您在这里并没有*完全*比较喜欢。Azure 具有 IaaS 类型的能力以及 PaaS，不仅可以将应用程序推送到它，还可以部署 VM 映像，包括 Linux。

然而，由于 Cloud Foundry 是开源的，运行时和框架的数量（如果支持）随着 VMWare 公开鼓励来自 OSS 社区的贡献而迅速发展。如果我错了，请纠正我，但在很多情况下，对于 Azure，您必须提供您希望使用的运行时，因为 Cloud Foundry“本机”支持它们，如果这是正确的话？！

目前，Cloud Foundry 支持以下运行时和框架；

### 运行时

java - 1.6.0_24
java7 - 1.7.0_04
节点 - 0.4.12
node06 - 0.6.8
node08 - 0.8.2
ruby​​18 - 1.8.7p357
ruby​​19 - 1.9.2p180

### 构架

grails
java_web
lift
node
play
rack
rails3
sinatra
spring
独立

他们还提供所有主要的存储服务，包括 MySQL、Postgres、RabbitMQ 和 Redis。

实际的开源项目也支持更多！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:50:34.180

同样，我对 Cloud Foundry 了解不多，但我正在将 Windows Azure 用于几个客户端项目，我不得不说我现在对开发环境印象深刻。我正在通过 BitBucket 使用网站预览功能和持续的 Git 部署。设置起来轻而易举，让我可以将更改推送到 BitBucket 并让 Windows Azure 自动为我部署它们。目前还没有能力像其他云平台（例如 AppHarbor）一样在部署周期中运行单元测试，但是用于启动和运行 .NET 应用程序和 SQL Azure 数据库的功能集现在非常灵活。这里有几个链接：

[将 ASP.NET Web 应用程序部署到 Windows Azure 网站和 SQL 数据库](http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

[使用 Windows Azure 网站和 Bitbucket 进行持续部署](http://fabriccontroller.net/blog/posts/continuous-deployment-with-windows-azure-websites-and-bitbucket/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:33:39.727

我对 Azure 了解不多。但是，我使用过 Cloudfoundry。它非常适合 Java 部署。我使用 Ruby gem 中的 VMC 进行部署，它只需 3 到 4 步即可将您的 WAR 推送到 cloudfoundry 服务器。它们还为配置和设置提供了简洁的文档。哦，添加服务（如 Mongo DB、MySql）也很简单。尽管有时调试服务器相关问题很烦人。但是，总的来说，它对我有好处:)

[http://docs.cloudfoundry.com/tools/deploying-apps.html](http://docs.cloudfoundry.com/tools/deploying-apps.html)

# sql - 找出运行缓慢的存储过程

> ID：13948158
> 
> 赞同：5
> 
> 时间：2012-12-19T08:22:14.380
> 
> 标签：sql, stored-procedures, sql-server-2008-r2, sql-execution-plan

> **可能重复：**
> [如何找到最慢的查询](https://stackoverflow.com/questions/820219/how-to-find-slowest-queries)

在 Sql Server 2008 中，是否有任何选项可以找出运行缓慢的存储过程（当存储过程的数量很大时。例如：500）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:12:20.357

嘿基兰请参考这个问题可能会回答你

[如何找到最慢的查询](https://stackoverflow.com/questions/820219/how-to-find-slowest-queries)

# sql - 选择查询以获取联结表中的所有数据到一个字段

> ID：13948160
> 
> 赞同：0
> 
> 时间：2012-12-19T08:22:15.957
> 
> 标签：sql, sql-server-2008

我有 2 个表和 1 个联结表：

```
table 1 (Log):      | Id | Title | Date | ...
table 2 (Category): | Id | Title | ... 
```

表 1 和表 2 之间的连接表：

```
LogCategory: | Id | LogId | CategoryId 
```

现在，我想要一个 sql 查询来获取一个字段中所有类别标题的所有日志，如下所示：

```
LogId, LogTitle, ..., Categories(that contains all category title assigned to this log id) 
```

谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:41:08.057

试试这个代码：

```
DECLARE @results TABLE
( 
  idLog int,
  LogTitle varchar(20), 
  idCategory int,
  CategoryTitle varchar(20)
)

INSERT INTO @results
SELECT l.idLog, l.LogTitle, c.idCategory, c.CategoryTitle
FROM
  LogCategory lc
  INNER JOIN Log l 
    ON lc.IdLog = l.IdLog
  INNER JOIN Category c
    ON lc.IdCategory = c.IdCategory

SELECT DISTINCT 
    idLog,
    LogTitle,
    STUFF (
        (SELECT ', ' + r1.CategoryTitle
        FROM @results r1
        WHERE r1.idLog = r2.idLog
        ORDER BY r1.idLog
        FOR XML PATH ('')
        ), 1, 2, '')
FROM 
    @results r2 
```

这里有一个简单的[**SQL Fiddle 示例**](http://sqlfiddle.com/#!3/2db57/12)

我确信这个查询可以只使用一个选择来编写，但是这样它是可读的，我可以解释代码的作用。

第一个选择将所有 Log - Category 匹配项放入表变量中。

第二部分用于`FOR XML`选择类别名称并以 XML 而不是表的形式返回结果。通过在选择中使用`FOR XML PATH ('')`并放置一个“，”，所有 XML 标记都将从结果中删除。最后，该`STUFF`指令替换了每行的初始 ', ' 字符并写入一个空字符串，这样字符串格式是正确的。

# ios - 如何测量给定字体类型和字体大小中最大字符的最大大小？

> ID：13948162
> 
> 赞同：3
> 
> 时间：2012-12-19T08:22:18.773
> 
> 标签：ios, fonts

我想缓存给定字体类型和字体大小的字符的一些纹理，但我无法确定最大字符在整个 unicode 字符集中可能采用的最大大小。

我如何计算这个尺寸？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-19T08:53:19.693

您正在寻找的是字体边界框（或 BBox）。在 iOS 中，你需要一个 CGFontRef 然后可以使用这个函数：

```
CGRect CGFontGetFontBBox (
   CGFontRef font
); 
```

这将返回字体边界框，它是字体中所有字形边界框的并集​​。*它以字形单位*返回值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T09:41:50.780

好吧，你可以使用 sizeWithFont：

并检查最大的（或最高或最大的区域）

它适用于宽度和面积，但似乎所有字符都有相同的高度，甚至点“。”

无论如何，我想这样的事情应该回答你的问题：

```
UIFont* aFont = [UIFont fontWithName:@"HelveticaNeue" size:15];
NSString* charsToTest = @"abcdf...xyz, ABCD...XYZ, 0123...";
float maxArea = 0;
float maxWidth = 0;
float maxHeight = 0;
NSString* largerChar;
NSString* tallerChar;
NSString* biggerChar;
for (int i = 0; i<charsToTest.length; i++) {
    NSRange currentRange;
    currentRange.length = 1;
    currentRange.location = i;
    NSString* currentCharToTest = [charsToTest substringWithRange:currentRange];
    CGSize currentSize = [currentCharToTest sizeWithFont:aFont];
    if (currentSize.width > maxWidth) {
        maxWidth = currentSize.width;
        largerChar = currentCharToTest;
        NSLog(@"char:%@, new record width: %f", largerChar, maxWidth);
    }
    if (currentSize.height > maxHeight) {
        maxHeight = currentSize.height;
        tallerChar = currentCharToTest;
        NSLog(@"char:%@, new record height:%f", tallerChar, maxHeight);
    }
    float currentArea = currentSize.height * currentSize.width;
    if ( currentArea > maxArea) {
        maxArea = currentArea;
        biggerChar = currentCharToTest;
        NSLog(@"char:%@, new area record: %f", biggerChar, maxArea);
    }
}
// final resut:
NSLog(@"\n\n");
NSLog(@"char:%@ --> MAX WIDTH IS: %f", largerChar, maxWidth);
NSLog(@"char:%@ --> MAX HEIGHT IS: %f", tallerChar, maxHeight);
NSLog(@"char:%@ --> MAX AREA IS: %f\n\n", biggerChar, maxArea); 
```

# java - azure 上的 Java 应用程序部署错误

> ID：13948164
> 
> 赞同：0
> 
> 时间：2012-12-19T08:22:24.247
> 
> 标签：java, deployment, azure, eclipse-plugin

我已经编写了简单的 hello world Java Web 应用程序并使用 Eclipse 创建了用于 azure 部署的包。

在部署时，我在部署完成 40% 时收到以下错误：

> 2012 年 12 月 19 日 09:40:46 - 配置远程桌面
> 2012 年 12 月 19 日 09:40:50 - 上传部署包
> 2012 年 12 月 19 日 09:44:58 - 上传部署包 (.cspkg) 失败。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:43:08.103

你如何上传包？直接来自 Eclipse，还是通过门户？

Eclipse 工具自动为所有角色启用远程桌面。RDP for Azure 使用证书。此失败的最可能原因是 Eclipse 工具默认使用的证书未上传到云服务。查看[本文](http://msdn.microsoft.com/en-us/library/windowsazure/hh690951.aspx)以了解有关 Azure 和 Eclipse 上的 RDP 的更多信息。

至于试用，我建议从您的`.csdef`文件中删除以下所有部分：

```
 <Import moduleName="RemoteAccess" />
  <Import moduleName="RemoteForwarder" /> 
```

同时打开您的`.cscfg`文件并删除以下所有部分：

```
 <Certificates>
      <Certificate name="Microsoft.WindowsAzure.Plugins.RemoteAccess.PasswordEncryption" thumbprint="C82D51307BCF04EB7401FDBB703FFE517A7F4DD9" thumbprintAlgorithm="sha1" />
    </Certificates> 
```

这只是为了尝试上传干净的包。如果可行，请查看有关如何配置远程桌面访问的参考文章。该向导会将适当的模块导入和证书部分放入您的文件中。

# php - Jquery Button 使表单可见

> ID：13948165
> 
> 赞同：7
> 
> 时间：2012-12-19T08:22:33.527
> 
> 标签：php, javascript, jquery, forms

我想问一下如何在单击按钮时使表单不可见？所以，如果我有一个名为“隐藏”的按钮和一个包含许多按钮、文本框等的表单。

然后，当我单击“隐藏”按钮时，它将隐藏所有表单和表单中的所有内容，例如文本框、按钮等。我用谷歌搜索但没有结果。我接受使用 Jquery、JS 或 php 语言的答案，因为我正在使用该语言程序。

例如我的表格是这样的：

```
<form name="myform" method="post" action="<?php $_SERVER['PHP_SELF']; ?>">
    <table>
        <tr>
            <td>ID</td>
            <td>:</td>
            <td><input type="text" maxlength="15" name="clientid" /></td>
            <td><input type="submit" name="cariclientid" value="Search" /></td>
            <td width="50px"></td>
            <td>ID</td>
            <td>:</td>
            <td><input type="text" maxlength="15" name="orderid" /></td>
            <td><input type="submit" name="cariorderid" value="Search" /></td>
        </tr>
        <tr>
            <td>No.</td>
            <td>:</td>
            <td><input type="text" maxlength="15" name="veh" /></td>
            <td><input type="submit" name="carikendaraan" value="search" /></td>
            <td></td>
            <td>Nama Sopir</td>
            <td>:</td>
            <td><input type="text" maxlength="15" name="sopir" /></td>
            <td><input type="submit" name="carisopir" value="Cari" /></td>
        </tr>
        <tr>
            <td>Waktu Berangkat</td>
            <td>:</td>
            <td><input type="text" name="tglb" id="datetimepicker" /></td>
            <td><input type="submit" name="cariberangkat" value="Cari" /></td>
            <td></td>
            <td>Waktu Pulang</td>
            <td>:</td>
            <td><input type="text" name="tglp" id="datetimepicker2" /></td>
            <td><input type="submit" name="caripulang" value="Cari" /></td>
        </tr>
    </table>
</form> 
```

也许有一种方法可以通过按钮使其不可见？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T08:24:18.700

你想要这样的东西：

```
// code for only hide
$('#hide_button').on('click', function() {
  $('form[name="myform"]').hide();
}); 
```

***[隐藏演示](http://jsfiddle.net/ggdK7/1/)***

对于使用单个按钮切换表单，您可以尝试：

```
$('#your_button').on('click', function() {
   $('form[name="myform"]').toggle();
}); 
```

***[切换演示](http://jsfiddle.net/ggdK7/2/)***

* * *

根据*[评论](https://stackoverflow.com/questions/13948165/jquery-button-to-make-visible-a-form/13948191#comment19235652_13948191)*

为了防止提交：

```
$('form[name="myform"]').submit(function(e) {
   e.preventDefault();
   // Your code
}); 
```

请参阅此处了解***[.perventDefault()](http://api.jquery.com/event.preventDefault/)***

# gwt - 如何从 GWT 应用程序进行 YouTube API 调用

> ID：13948168
> 
> 赞同：5
> 
> 时间：2012-12-19T08:22:39.053
> 
> 标签：gwt, youtube-api

我需要将 YouTube API 集成到我的 GWT Web 应用程序中。我需要进行**YouTube API 调用**，如下所示：

*   **上传：** [https ://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading)
*   **检查状态：** [https ://developers.google.com/youtube/2.0/developers_guide_protocol_checking_video_status](https://developers.google.com/youtube/2.0/developers_guide_protocol_checking_video_status)
*   **设置开发者标签：** [https ://developers.google.com/youtube/2.0/developers_guide_protocol_uploading_videos#Assigning_Developer_Tags](https://developers.google.com/youtube/2.0/developers_guide_protocol_uploading_videos#Assigning_Developer_Tags)

为了规避浏览器的**同源限制**，调用必须是**CORS**调用。

如何从我的**GWT Web 应用程序进行这些****YouTube API 调用**？一个小的代码示例将不胜感激。

 ***请注意，我曾尝试使用**YouTube Direct Lite**，但它似乎不允许设置**开发者标签**，这对我来说**至关重要**。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:24:16.073

YouTube 提供了一个示例，展示了应如何进行 YouTube API CORS 调用：

*   [示例的源代码](http://code.google.com/p/gdata-samples/source/browse/trunk/gdata/youtube_upload_cors.html?r=246)
*   [样品演示](http://gdata-samples.googlecode.com/svn/trunk/gdata/youtube_upload_cors.html)

您可以使用 GWT 的 JavaScript 本机接口 (JSNI) 将示例中的 JavaScript 集成到您的 GWT 应用程序中：

*   [更多关于 JSNI 的信息](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)

请注意，[`XMLHttpRequest`](http://www.w3.org/TR/XMLHttpRequest/)某些浏览器版本不支持的示例 JavaScript 使用：

*   [CORS/`XMLHttpRequest`支持矩阵](http://caniuse.com/cors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T03:24:23.567

我没有亲自使用过 YouTube API，但从我可以从 API 中推断出，您基本上需要完成三件事

1.  [如此处所述，](https://developers.google.com/web-toolkit/doc/1.6/DevGuideServerCommunication#DevGuideHttpRequests)通过GWT 中的[RequestBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/http/client/RequestBuilder.html)进行HTTP POST 请求调用
2.  [通过 XML 创建和解析](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsXML)
3.  使用带有[FileUpload Widget 的](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/FileUpload.html)[FormPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/FormPanel.html)来处理实际的文件上传

我链接的内容提供了一些很好的代码示例，当然应该可以帮助您按照 YouTube 的要求在 GWT 中进行 API 调用。要进行 HTTP 调用 CORS，请参阅[此 SO 帖子。](https://stackoverflow.com/questions/10910185/making-cross-site-asynchronous-http-post-from-gwt-client)**

# java - 静态初始化器在构造函数之后运行，为什么？

> ID：13948170
> 
> 赞同：25
> 
> 时间：2012-12-19T08:22:45.843
> 
> 标签：java, constructor, static-initialization

我有 2 节课：

A类：

```
public class A {
    static B b = new B();

     static {
         System.out.println("A static block");
     }

     public A() {
         System.out.println("A constructor");
     }
} 
```

B类：

```
public class B {
     static {
         System.out.println("B static block");
         new A();
     }

     public B() {
         System.out.println("B constructor");
     }
} 
```

我创建了一个 Main 类，它只创建了新的 A：

```
public class Main {
    public static void main(String[] args) {
        new A();
    }
} 
```

我得到的输出是：

```
B static block
A constructor
B constructor
A static block
A constructor 
```

如您所见，A 的构造函数在其静态初始化程序之前被调用。

我知道这与我创建的循环依赖有关，但我的印象是静态初始化程序应该始终在构造函数之前运行。

**发生这种情况的原因是什么（技术上在java实现中）？**

**是否建议一起避免使用静态初始化程序？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-19T08:30:22.210

```
static B b = new B(); 
```

是之前

```
static {
     System.out.println("A static block");
} 
```

因此，您需要在 print 之前初始化 B 实例`"A static block"`。

并且初始化 B 类意味着您需要创建一个 A 实例。因此，在构造 A 实例之前无法打印“静态块”。

是的，A 的静态初始化是在构造函数**启动**之前启动的，但是除了死锁之外，您需要的序列没有其他解决方案。

[请注意规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)中的警告：

> 因为 Java 编程语言是多线程的，所以类或接口的初始化需要仔细同步，因为其他一些线程可能同时尝试初始化同一个类或接口。**还有一种可能性是，作为该类或接口初始化的一部分，可以递归地请求类或接口的初始化；例如，类 A 中的变量初始化器可能调用不相关类 B 的方法，而后者又可能调用类 A**的方法。Java 虚拟机的实现负责通过使用以下程序[文档继续完整程序]

在 Java 和其他语言中，最佳实践基本上是避免循环依赖，因为它们的解决方案可能很难预测。

# css - 为什么 wordpress 会自动为图像添加内联 CSS 样式？

> ID：13948171
> 
> 赞同：0
> 
> 时间：2012-12-19T08:22:47.197
> 
> 标签：css, image, wordpress

我已将图像放置在没有任何内联样式属性的 wordpress 页面模板上，但似乎 wordpress 会自动添加宽度和高度设置为零的样式标签。

```
<img src="wp-content/themes/ecoblog/images/hiw-image-1.png" style="width: 0px; height: 0px;"> 
```

有时高度设置为其原始尺寸，有时在完全刷新后其值为零。

这是什么原因造成的？

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:35:47.973

这是因为模板 CSS 样式会覆盖您的图像样式属性 ..，简单的方法是包装您的图像内容并提供 div id 并将您的样式代码放在模板 CCS 文件中（style.css）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:26:25.227

可能是由不正确的 CSS 引起的。零值不应该有维度，比如`px`or `pt`。像这样：

```
<img src="wp-content/themes/ecoblog/images/hiw-image-1.png" style="width:0; height:0;"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T09:03:36.857

它的工作原理是：

```
.class{
  width:20px !important;
  height:20px !important;
} 
```

或者如果你想完全删除内联 CSS，这个内联 CSS 可能在 .php 文件或 in.js 文件中。

您可以在整个项目中搜索样式，如果您使用的是netbeans代码编辑器，则更容易搜索。希望它可以解决。

# wix - WiX：InstallUISequence + 自定义操作

> ID：13948173
> 
> 赞同：2
> 
> 时间：2012-12-19T08:22:47.850
> 
> 标签：wix

```
<InstallUISequence>
  <Custom Action="myActionid"
          Before="ExecuteAction">NOT Installed</Custom>
</InstallUISequence> 
```

我用它来设置我的 customAction 何时运行，但它似乎在我想要的时候运行。在详细日志中我看到了这个

*

*

![在此处输入图像描述](../Images/f5bc857436055f0d3653e48bf2a5c367.png)

我的动作运行得太快了我需要它在执行动作之前运行（或在中间粗体部分和执行动作之间）

因为在那之后属性发生了变化，我无法获得正确的值

或者使属性停止更改，这也可以。

这些属性是`INSTALLDIR`我复制的含义的副本，`BrowseDlg`并将 installdir 对话框制作成一个对话框，询问我的程序需要的三个路径。如果您认为有必要，我也会发布该代码，但感觉就像我可以指定我的自定义操作何时运行以获得正确的值！

谢谢你的回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:03:36.750

`INSTALLDIR`好吧，我仍然不知道如何将 mycustomAction 设置为我想要的特定运行时，但我不再需要了，因为我发现了为什么我的属性像`costfinalize`

我不知道它以这种方式工作的原因，但我的目录在 id 中有小写字母，然后`costfinalize`在安装顺序后将它们改回默认值

所以有这样的所有大写

```
<Directory Id="SPCSFOR" Name="Företag">
</Directory>
<Directory Id="SPCSGEM" Name="Gemensamma filer">
</Directory>
<Directory Id="VISMAADMIN" Name="SPCS Administration">
</Directory> 
```

是使我自己的`InstallDirDlg`工作更像原始作品的最后一块，并且属性保持用户更改它们的方式`BrowseDlg`

之后我很容易设置 mycustomAction

```
<InstallExecuteSequence>
  <Custom Action="myActionid"
          After="InstallFinalize">NOT Installed</Custom>
</InstallExecuteSequence> 
```

像那样并从那里读取属性，并且尝试正确地计时以获得我想要的值没有问题！

# python - 使用 cygwin 安排 `at` 作业

> ID：13948176
> 
> 赞同：2
> 
> 时间：2012-12-19T08:22:58.123
> 
> 标签：python, cmd, cygwin, scheduled-tasks

我在几台（非等效）客户端机器上运行一堆模拟。为了确保每个模拟只运行一次，客户端连接到 Linux 服务器并在其上安排任务。linux 服务器运行计划任务，该任务`ssh`返回客户端并计划运行下一个要运行的模拟。

由于部分客户端运行windows XP（运行cygwin），客户端的部分调度脚本会检查客户端运行的是linux还是cygwin，并使用相应`at`的命令调度模拟的运行（cygwin的`at`命令使用[WinXP`at`命令](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/at.mspx?mfr=true)，它有不同的语法）。

我能够在 Windows 客户端上成功调度，调用的脚本运行模拟。但是，我发现尽管执行了计划任务，但从未运行过模拟。
但是如果我从命令行调用模拟（复制粘贴预定的命令），那么它工作得很好。

谁能帮我解决这个问题？

**更多技术细节**：

模拟是一个python脚本，它位于客户端文件系统
中以及cygwin中的变量`cmd``H:\>``c: &&`
`$PATH`

**我的预定脚本**（相关部分）：

```
import subprocess
import sys
import smtplib

scenario, p,h,t,c,m,run, IP = sys.argv[1:]

homedir = 'myUserName'
if IP == "137.122.88.124":
    homedir = 'myOtherUserName'

subprocess.check_call("""c: && cd \"c:\\cygwin\\home\\%(home)s\\project\\dir\\scenario%(scenario)s\\p%(popsize)sh%(height)st%(tournsize)sc%(crossprob)sm%(mutprob)s\" && python "c:\\cygwin\\home\\%(home)s\\project\\dir\\scenario%(scenario)s\\p%(popsize)sh%(height)st%(tournsize)sc%(crossprob)sm%(mutprob)s\\GP%(run)s.py" """ %{'home':homedir, 'scenario':scenario, 'popsize':p, 'height':h, 'tournsize':t, 'crossprob':c, 'mutprob':m, 'run':run}, shell=True) 
```

为清楚起见，以下是我在上面调用的命令，`subprocess.check_call`由换行符分隔：

```
c: &&
cd \"c:\\cygwin\\home\\%(home)s\\project\\dir\\scenario%(scenario)s\\p%(popsize)sh%(height)st%(tournsize)sc%(crossprob)sm%(mutprob)s\" &&
python "c:\\cygwin\\home\\%(home)s\\project\\dir\\scenario%(scenario)s\\p%(popsize)sh%(height)st%(tournsize)sc%(crossprob)sm%(mutprob)s\\GP%(run)s.py" 
```

**编辑 1**：

为了测试是否调用了预定脚本，我在脚本顶部添加了以下几行：

```
f = open("C:\\Documents and Settings\\user\\Desktop\\somesimfile.txt", 'w')
f.write('I actually ran')
f.close() 
```

因此，如果脚本在 python 下运行，它会留下一个碎片文件来确认它已经运行。

调度程序显示作业已执行后，碎片文件丢失。因此，该脚本从未运行。

**编辑 2**：

考虑到调度程序可能会在 cygwin 环境中运行命令，我将碎片文件路径更改为`/home/user/somesimfile.txt`

尽管如此，没有创建碎片文件。

我只能得出结论，即使任务已安排，它也没有运行。
认为这可能是权限问题，我检查了一下，我所有的模拟脚本都有`755`权限。

**编辑 3**：

这似乎也不是我登录权限的限制。我可以`cmd`使用我的登录名直接安排任务并获得结果。不过，我无法直接从`cmd`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:56:17.460

问题是，即使python的路径在系统路径中，但在调度任务时，这条路径并没有生效。`python.exe`因此，需要明确提供路径。因此，更换

```
python "c:\\cygwin\\home\\%(home)s\\project\\dir\\scenario%(scenario)s\\p%(popsize)sh%(height)st%(tournsize)sc%(crossprob)sm%(mutprob)s\\GP%(run)s.py" 
```

和

```
"c:\\python27\python.exe" "c:\\cygwin\\home\\%(home)s\\project\\dir\\scenario%(scenario)s\\p%(popsize)sh%(height)st%(tournsize)sc%(crossprob)sm%(mutprob)s\\GP%(run)s.py" 
```

解决问题

# android - 2013 年 2 月之后在朋友墙上发帖的另一种方式是什么？

> ID：13948180
> 
> 赞同：-1
> 
> 时间：2012-12-19T08:23:08.763
> 
> 标签：android

[https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)

在 2013 年 2 月发生重大变化后，Facebook 用户无法使用 firendsid/feed 发布我想要另一种方式，我们如何使用 android SDK 在 friensds 墙上发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:29:19.287

如果您继续阅读更改，它确实提到如果您想发布到朋友墙，那么您将需要使用[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)。我认为这是为了限制发布到朋友墙上的垃圾邮件数量。

# javascript - 如何在使用 tab-lib 时转义从 jsp 文件发送的 Ajax 响应

> ID：13948185
> 
> 赞同：0
> 
> 时间：2012-12-19T08:23:38.443
> 
> 标签：javascript, jsp, jquery, jspinclude

我有一个jsp页面。在其中我导入了一个 jspf 文件。在 jspf 文件中，我使用了与此类似的选项卡库

```
<a href="javascript:moveToPage('<c:out value="${requestScope.PREVIOUS_LINK}"/>')">
<img align="absmiddle" src="images/<c:out value='${selectedTheme}'/>/previous.gif" width="23" height="14" alt="Previous" title="<fmt:message key="jsp.imagetitle.Previous"/>" border="0"></a> 
```

jsp文件看起来像

```
<div id="someId">
<%@ include file='jspf/myNewPage.jspf'%>
</div> 
```

这个jsp页面使用ajax调用到另一个jsp页面并使用填充一个div

```
$('#divid').html(response.responseText); 
```

当我在屏幕上获得输出时，它显示打印了一些 html 标签，而 img 标签中的图像未打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:51:38.643

如果您看到 HTML 标记，那么代码中的某人/某事会将 HTML 转换为文本（即，它会转义所有特殊字符，例如`<`to`&lt;`等）。在浏览器中查看 HTML 源代码时，您应该会看到这一点。

这对我来说看起来很奇怪：

```
<a href="javascript:moveToPage('<c:out value="${requestScope.PREVIOUS_LINK}"/>')"> 
```

`<`不允许在元素内部，因此这应该会给出错误，或者您在上面粘贴的代码不是来自您的 jspf 文件的 1:1 副本。

这将是有效的：

```
<a href="javascript:moveToPage('&lt;c:out... 
```

但不会再执行`c:out`了。

使用[fn:escapeXml()](http://download.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/escapeXml.fn.html)代替：

```
<a href="javascript:moveToPage('${fn:escapeXml(requestScope.PREVIOUS_LINK)}'"> 
```

# iphone - 我可以暂停 CCAnimation 吗？

> ID：13948187
> 
> 赞同：1
> 
> 时间：2012-12-19T08:23:44.433
> 
> 标签：iphone, cocos2d-iphone, box2d

> **可能重复：**
> [如何暂停和恢复应用于 ccSprite 的操作？](https://stackoverflow.com/questions/6654468/how-to-pause-and-resume-action-applied-to-the-ccsprite)

我是box2d的新手。我正在使用 CCAnimation，它工作正常，但我想同时暂停动画。过得去吗？

```
[mySprite runAction:[CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim]]]; 
```

任何帮助我...

# ruby - rufus调度程序不工作

> ID：13948189
> 
> 赞同：0
> 
> 时间：2012-12-19T08:23:52.670
> 
> 标签：ruby, time, scheduler

我有一个非常简单的脚本，我正在尝试使用 Rufus 运行：

```
scheduler = Rufus::Scheduler.start_new  
start_time = Time.now   
data = [[0, 1, 15], [1, 2, 15]]

data.each do |datum|  
    scheduler.at start_time + datum[0] do   
       puts datum.inspect  
    end  
end 
```

但是，我发现脚本将简单地终止而不执行。我尝试在 do end 块的末尾附加一个“scheduler.join”，虽然这会执行脚本，但它会使调度程序挂起。有没有退出进程的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:11:50.733

对于这样一个简单的用例，为什么要使用 rufus-scheduler？似乎 sleep(datum[0]) 就足够了。

# jquery - 在 Jquery UI Datepicker 上阻止日历

> ID：13948190
> 
> 赞同：2
> 
> 时间：2012-12-19T08:24:15.530
> 
> 标签：jquery, jquery-ui

我在**Asp.net MVC**应用程序中使用**Jquery UI Datepicker**，如下所示。

 ****问题**

1.  如何**阻止或移除压延机**？（我不需要）

2.  我仍然**想要**那个 Datepicker 上的其他东西。如**日期格式、默认日期**等

**原因**

**不允许**用户从日历中选择日期。但需要维护日期格式。

**HTML**

```
<td>
     @Html.EditorFor(m => m.CheckIn.DateCheckIn)
</td> 
```

**jQuery代码**

```
 $('#CheckIn_DateCheckIn').datepicker({ dateFormat: 'm/d/yy', altFormat: 'yy-m-d',  onSelect: function () { $(this).parents('form:first').submit(); } }); 
```

**用户界面**

![在此处输入图像描述](../Images/22bfd7d0c0021c95ac4eb3010631537d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:30:39.337

HTML

```
<input type="text" id="datepicker" /> 
```

查询

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
    </script> 
```

从 jquery 代码中删除了#datepicker。就是这样。或者从完整的 jquery 代码中删除

如果您想使用默认日期并从用户禁用它，请使用以下代码

```
<p>Date: <input type="text" value="12/19/2012" id="datepicker" disabled></p> 
```

[小提琴示例](http://jsfiddle.net/tutspack/QmvwN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:37:42.857

“禁用”日历部分的一种方法是将[showOn](http://api.jqueryui.com/datepicker/#option-showOn)设置为`"button"`：

```
$("#datepicker").datepicker({ showOn: "button" }); 
```

然后只需使用 css 隐藏按钮：

```
.ui-datepicker-trigger { display: none; }​ 
```

见[http://jsfiddle.net/ukHLT/](http://jsfiddle.net/ukHLT/)

* * *

或者只是设置禁用的 html 属性：

```
@Html.TextBoxFor(m => m.CheckIn.DateCheckIn, new { disabled = "disabled" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:08:12.217

我只是**按照@Mario**所说的话。

现在我的文本框**有日期格式**，也**不能选择日期**。

```
@Html.TextBoxFor(m => m.CheckIn.DateCheckIn, new { disabled = "disabled" }) 
```**

# c# - 如何对名称中带有句点的列进行行过滤？

> ID：13948199
> 
> 赞同：1
> 
> 时间：2012-12-19T08:25:03.910
> 
> 标签：c#, winforms, datatable, cube

我有一个从多维数据集填充的 DataTable，其列名声明为：

> [措施].[库存数量]

DataTable 正确填充，但是当尝试使用 RowFilter 应用时：

> “[措施].[库存数量] >= 2000”

我收到以下错误：

> “[Measures.StockQty] 未找到

我也尝试只使用列名：

> “[库存数量] >= 2000”

但这也因未找到错误而失败。

是否可以使用包含句点的列名来过滤 DataTable，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:36:31.403

你为什么要使用`RowFilter`？如果您使用的是 .NET 3.5 或更高版本，我建议您改用 Linq-To-DataTable，它更强大且可读性更强：

```
IEnumerable<DataRow> filteredRows = tblMeasures.AsEnumerable()
    .Where(r => r.Field<int>("Stock Qty") >= 2000); 
```

如果您`DataTable`再次需要：

```
DataTable tblFiltered = filteredRows.CopyToDataTable(); 
```

顺便说一句，如果您的最后一种方法中的列名称`DataTable`应该`"Stock Qty"`可以工作，因为您需要将其括在括号中。

```
tblMeasures.DefaultView.RowFilter = "[Stock Qty] >= 2000"; 
```

所以你应该使用调试器来查看列的真实名称和类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:36:39.253

您可以重命名数据表列（用“_”替换句点）&他们尝试行过滤器。

例如。：

```
dataTable.Columns["Stock Qty"].ColumnName = 
                 dataTable.Columns["Stock Qty"].ColumnName.Replace(" ", "_"); 
```

# jquery - 使用 Facebook 的 YQL 获取 JSON 数据

> ID：13948201
> 
> 赞同：3
> 
> 时间：2012-12-19T08:25:06.127
> 
> 标签：jquery, ajax, json, yql

我想知道如何使用[YQL](http://developer.yahoo.com/yql/)获取 JSON 数据。

这是我的 JSON 网址：

```
https://www.facebook.com/feeds/page.php?id=397319800348866&format=json 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T09:13:35.137

这是一个使用 jQuery 的快速示例，它可能会对您有所帮助

```
$(function () {
    $.ajax({
        url: "http://query.yahooapis.com/v1/public/yql",
        dataType: "jsonp",
        success: function (data) {
            console.log(data.query.results.json);
            $.each(data.query.results.json.entries, function (i, v) {
                //console.log(data.query.results.json.entries[i]);
                $('#entries').append(data.query.results.json.entries[i].title + '<br />');
            });
        }, data: {
            q: 'select * from json where url="https://www.facebook.com/feeds/page.php?id=397319800348866&format=json"',
            format: "json"
        }
    });
}); 
```

在带有上述 url 的 console.log 中，我能够得到以下结果：

```
entries: Array[29]
icon: "http://www.facebook.com/favicon.ico"
link: "http://www.facebook.com/"
self: "https://www.facebook.com/feeds/page.php?id=397319800348866&format=json"
title: "Doers Inc's Facebook Wall"
updated: "2012-12-19T01:08:44-08:00" 
```

工作示例供参考：http: [//jsfiddle.net/DtNxb/1/](http://jsfiddle.net/DtNxb/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:10:16.413

如果您使用[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/) ，这比您想象的要容易。

试试这个：

```
$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22your_url&format=json",
          function(data) {
              var id = data.query.results.div;
              $('#table').append('<li>'+id.h1+'</li>');
              $('#table').listview('refresh');
          }
); 
```

**[这里有一个简单的演示](http://jsfiddle.net/xu2FJ/)**

# android - 我使用 traceView，我看到 android.view.ViewRoot.handleMessage 76.4%

> ID：13948204
> 
> 赞同：7
> 
> 时间：2012-12-19T08:25:26.640
> 
> 标签：android

我使用traceView，我看到android.view.ViewRoot.handleMessage 76.4% 这是什么意思？以及如何在我的源代码中找到这个错误？

![在此处输入图像描述](../Images/8cdc5b770a6e45d055f86268829ac67a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:43:42.860

这可能没问题。该值显示了整个渲染过程占用了多少 cpu（因此遍历所有视图以查找要失效的视图，调用 View.draw() 和 View.onDraw() 方法，锁定/解锁画布）。这 76% 中的大部分可能是你的代码，所以你应该开始检查你的课程花费的时间。

# php - Php 警告：Socket_Read()：无法从套接字读取 [104]

> ID：13948206
> 
> 赞同：2
> 
> 时间：2012-12-19T08:25:42.710
> 
> 标签：php, php-socket

```
<?php
ini_set('error_reporting', E_ALL ^ E_NOTICE);
ini_set('display_errors', 1);
require_once '../includes/session.php';
require_once '../includes/connection.php';
require_once '../classes/logfile.php';
require_once '../classes/Tracker.php';
?>
<?php

/////////////////////////////////////////////////////////
function mysql_prep($value)
{
    $magic_quotes_active = get_magic_quotes_gpc();
    $new_enough_php = function_exists("mysql_real_escape_string"); // i.e. PHP >= v4.3.0
    if ($new_enough_php) { // PHP v4.3.0 or higher
        // undo any magic quote effects so mysql_real_escape_string can do the work
        if ($magic_quotes_active) {
            $value = stripslashes($value);
        }
        $value = mysql_real_escape_string($value);
    } else { // before PHP v4.3.0
        // if magic quotes aren't already on then add slashes manually
        if (!$magic_quotes_active) {
            $value = addslashes($value);
        }
        // if magic quotes are active, then the slashes already exist
    }
    return $value;
}
/////////////////////////////////////////////////////////
$address = '192.168.1.225'; // IP Address
$port = 9000; //Port

$sock = socket_create(AF_INET, SOCK_STREAM, getprotobyname('tcp'));
socket_bind($sock, $address, $port) or die("cannot bind to address.");
echo socket_strerror(socket_last_error());
socket_listen($sock, 20);
$i = 0;
while (1) {
    $result = $client[++$i] = socket_accept($sock);
    $input = socket_read($client[$i], 1024000);

    if ($result):
        $data = 'Thank you for your request!' . " \r\n";
        socket_write($client[$i], $data, 1024000);
    endif;

    socket_write($client[$i], $input, 1024000);
    //$finInput = mysql_prep($input);
    $finInput = $input;
    //$input = preg_replace('/\?\//', '?', $input);
    echo $finInput . "\r\n";

    $lf = new Logfile();
    $lf->write($finInput);

    $tracker = new Tracker();
    // split client request database
    //$data = '1204270959,Éîe}…Í}äÞÌ–wäŸÕíe,GPRMC,095929.000,A,0652.2527,N,07953.3028,E,0.53,219.64,270412,,,A*6E,F,imei:355689011882595,112+ä';
    $data_array = $tracker->splitdata($finInput);
    $location = $tracker->getlatlng($data_array[5], $data_array[7]);

    $newloc = array();

    $newloc['lat'] = $location['lat'];
    $newloc['lng'] = $location['lng'];
    $newloc['imei'] = $data_array[16];
    $newloc['signal'] = $data_array[15];
    $newloc['speed'] = $data_array[9];
    $tracker->addlocation($newloc);
    echo "\r\n";
    print_r($newloc);

    socket_close($client[$i]);
}
socket_close($sock);
?> 
```

我正在使用此脚本通过 tcp 从 gps 跟踪器获取 gps 数据，并且上面的脚本工作正常。但几个小时后，这个脚本显示下面的 php 警告消息。

```
PHP Warning: socket_read(): unable to read from socket [104]: Connection reset by peer in /var/www/gpssys/bin/deamon_test.php on line 41

Warning: socket_read(): unable to read from socket [104]: Connection reset by peer in /var/www/gpssys/bin/deamon_test.php on line 41
PHP Warning: socket_write(): unable to write to socket [32]: Broken pipe in /var/www/gpssys/bin/deamon_test.php on line 45

Warning: socket_write(): unable to write to socket [32]: Broken pipe in /var/www/gpssys/bin/deamon_test.php on line 45
PHP Warning: socket_write(): unable to write to socket [32]: Broken pipe in /var/www/gpssys/bin/deamon_test.php on line 51

Warning: socket_write(): unable to write to socket [32]: Broken pipe in /var/www/gpssys/bin/deamon_test.php on line 51 
```

请帮我解决这个问题。

谢谢，

# c++ - 错误 LNK2019：无法解析的外部符号“extern”C”这是什么错误？

> ID：13948208
> 
> 赞同：0
> 
> 时间：2012-12-19T08:25:53.367
> 
> 标签：c++, visual-c++, clr, cimg, language-interoperability

我试图将 cimg 库包装在 c++/clr 中，当我尝试构建它时，我得到了一堆链接错误。

```
 Error  20  error LNK2028: unresolved token (0A0002AC) "extern "C" int __stdcall DestroyWindow(struct HWND__ *)" (?DestroyWindow@@$$J14YGHPAUHWND__@@@Z) referenced in function "public: void __thiscall cimg_library::CImgDisplay::_desinit_fullscreen(void)" (?_desinit_fullscreen@CImgDisplay@cimg_library@@$$FQAEXXZ)   c:\Users\serakpc\documents\visual studio 2012\Projects\CimgWrapper\CimgWrapperCLI\Stdafx.obj    CimgWrapperCLI 
```

Stdafx.h 中的源代码

```
#pragma once

#include "cimgheader\CImg.h" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:28:50.837

仅仅包括标题是不够的。如果您有静态编译库，则需要将其包含在您的解决方案中，以便链接器能够找到二进制代码并生成可执行文件。如果您有库的源代码，则需要将其包含在解决方案中并使用您自己的代码进行编译。

# c# - 从 windows server 2008 访问 windows server 2003 共享文件夹

> ID：13948213
> 
> 赞同：3
> 
> 时间：2012-12-19T08:26:11.660
> 
> 标签：c#, .net-4.0, windows-services, windows-server-2008, windows-server-2003

我正在创建一个 Windows 服务应用程序以在 Windows Server 2008 上运行。存在另一个在不同实时 IP 上运行的 Windows Server 2003 服务器。这两个服务器都来自同一个提供商，并且属于同一个网络。WS2003 服务器上存在共享文件夹。

从 Windows 服务中，我尝试使用 UNC 路径 (\Server2003IP\SMSFiles) 访问共享文件夹，但出现错误。

```
if (!System.IO.Directory.Exists(PATH_SMS))
 throw new ApplicationException("Could not find or access SMS folder"); 
```

Windows 服务已安装，我也尝试以系统管理员身份登录。但没有运气。

仅供参考 - 通过将共享文件夹保留在 WS 2008 上并在 WS 2003 上安装服务，整个事情运行良好。

请任何帮助的手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:56:15.360

在网上搜索并测试了各种场景后，我能够解决这个问题。

解决方案：两台服务器都应该有一个具有相同用户名和密码的用户，并授予文件夹权限。还要在这个特定的登录用户下运行 windows 服务。

:-)

# java - 为什么 Java 标准库不实现 toString 方法？

> ID：13948219
> 
> 赞同：9
> 
> 时间：2012-12-19T08:26:43.000
> 
> 标签：java

`Object.toString()`JavaDoc 说：

> 返回对象的字符串表示形式。通常，*toString*方法返回一个“以文本方式表示”该对象的字符串。

尽管如此，许多标准的 java 类（如`Collections`（Sets、Lists 等）可能有非常有用的`toString()`方法，但不必费心去实现它。这种愚蠢有原因吗？

或者，嘿，你想要一个十六进制字符串吗？:)

编辑：糟糕，这是我使用 IDE 的失败。我遵循了接口而不是实现，并且出于某种原因直接将我带到了`Object.toString()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:30:14.987

**升级版：**

如果您的意思是`Collection`课程，那么答案将是：这不完全是这样。许多`Collection`类覆盖了这个方法；例如，`AbstractCollection`类，它有自己的`toString`实现——对于所有继承的类都是通用的。

如果你的意思是`Collection[s]`，那么这个类有一个私有构造函数并且不能被实例化；所以特殊的`toString`方法是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:30:40.863

如果您在谈论[Collections](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)类，它是实用程序类，则不必重写 toString() 方法。通常在实用程序类的情况下，我们将构造函数设为私有并提供静态方法。

还要检查你不能创建 Collections 类的对象，因为它的构造函数是私有的。检查`java.util.Collections` [来源](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java.util/Collections.java.html)，第 56 行

# sql-server - 获取客户的待处理发票

> ID：13948221
> 
> 赞同：0
> 
> 时间：2012-12-19T08:27:00.280
> 
> 标签：sql-server, join

我有两张桌子。

tbl_Invoice

![发票](../Images/6a1afedd8d77b66a35865357e01c41e6.png)

tbl_Payment

![付款](../Images/5f474cc2fa80139d65d51d5cee52984d.png)

**我想要的是`List of Pending/Partial Invoices`一个特定的客户。**

我尝试过的是：

```
Select * from tbl_Invoice I 
    left join tbl_payment P on (I.client_id = P.client_id 
        AND I.invoice_id <> P.invoice_Id)
    left join tbl_client C on I.client_id = C.client_id
    WHERE I.client_id = 8 
```

但它给了我一些错误的输出。

```
Invoice No  Client Name Date    details             Amount  Paid
----------------------------------------------------------------
ATPL00001   Vishal  10 Dec,2012 Web Designing       100.00  50.00
ATPL00001   Vishal  10 Dec,2012 Web Designing       100.00  10.00
ATPL00001   Vishal  10 Dec,2012 Web Designing       100.00  100.00
ATPL00001   Vishal  10 Dec,2012 Web Designing       100.00  100.00
ATPL00002   Vishal  07 Dec,2012 Software Development        1000.00 
```

所以我不知道如何获得待处理/部分支付的发票。

谁能帮忙啊！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:48:32.600

试试这个（*您可以根据需要向发票表中的第二个选择查询添加更多列*）

```
;WITH cte (clientid, invoiceid,  amountPaid)
As
(
   Select client_id clientId, invoice_id invoiceId,  sum(amt) amountPaid
   From tbl_Payment
   Where client_id = @YourClientId
   Group by invoice_id, client_id
)
Select client_id, invoice_id, (total_Price - Isnull(amountPaid,0)) toBePaid
From tbl_invoice I Left join cte On I.clinet_id = cte.clientId 
           And I.invoice_id = cte.invoiceid
Where (total_Price - Isnull(amountPaid,0)) > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:34:20.380

```
Select invoice_ID,Client,total_price - Coalesce(AMT,0) as [open]
from
(
select invoice_ID,Client,total_price
,(Select sum(AMT) as AMT from tbl_Payment where tbl_Payment.invoice_ID=tbl_Invoice.invoice_ID) as payed
 from tbl_Invoice left join tbl_client C on tbl_Invoice.client_id = C.client_id
 ) a
 where total_price - Coalesce(AMT,0)>0 
```

# c# - 向我的 C# 应用程序添加横幅

> ID：13948230
> 
> 赞同：0
> 
> 时间：2012-12-19T08:27:36.753
> 
> 标签：c#, winforms, banner-ads

是否可以在已编译的应用程序中添加动态横幅字段，从某处的云服务器上的数据库中提取图像和超链接？

我目前在我的应用程序中有一个静态横幅 - 使用以下代码，但我希望能够在某处的服务器上更改它，而不必为新赞助商创建自动更新。

```
private void BannerAd_Click(object sender, EventArgs e)
{
    Process.Start("http://www.DatabaseLinkToSponseredAdvertiserLinkGoesHere");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:32:06.007

可以做到，但是您将什么用于 DBMS？

例如，在我的工作场所，我们在我当前的项目中使用带有 T-SQL 的 SQL Server，并且我们使用图像数据类型来帮助实现您正在寻找的内容（[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms187993.aspx)）

执行上述操作可能会很昂贵，尤其是在您有很多高分辨率图像的情况下。因此，考虑到这一点，您也可以有一个表，其中包含指向应用程序服务器上图像路径的键字段和值字段。

例如

```
KEY      |    VALUE
BannerX  |    ~/Images/Sponsored/BannerX.png
BannerY  |    ~/Images/Sponsored/BannerY.png
BannerZ  |    ~/Images/Sponsored/BannerY.png 
```

如果您将 Key 字段设为主键，那么如果您向数据库添加新键，则只需添加未来的 C# 代码。

# c# - 触发 ItemCommand 事件后无法刷新 Listview

> ID：13948231
> 
> 赞同：1
> 
> 时间：2012-12-19T08:27:45.443
> 
> 标签：c#, asp.net, listview, webforms

我有一个允许编辑和删除的列表视图。当我单击列表视图中的链接按钮时，它会启动 page_load 然后到 OnItemCommand。在命令结束时，我添加了 DataBind，它不会刷新我的列表视图但删除了我的条目。如果我将 DataBind 更改为使用 (...aspx?ID=...) 重定向回同一页面，它将返回一个全新的页面。但在调试模式下，我看到它通过 page_load 和 Databind 运行。

```
<asp:UpdatePanel ID="UpdateOptions" runat="server" >
    <ContentTemplate>
        <asp:Panel ID="OPanel" runat="server" width="350px">
            <asp:ListView runat="server" ID="lvPollOptions" DataKeyNames="POptionID" OnItemCommand="lvPollOptions_ItemCommand" OnDataBound="lvPollOptions_ItemDataBound" >
                <LayoutTemplate>
                    <table cellpadding="0" cellspacing="0" border="0" width="300px">
                        <tr class="AdminListHeader">
                        </tr>

                        <tr id="itemPlaceholder" runat="server">
                        </tr>

                    </table>
                </LayoutTemplate>

                <ItemTemplate>
                    <tr>
                        <td>
                            <%#Eval("OptionText")%>
                        </td>

                        <td>
                            <%#Eval("Votes")%>
                        </td>

                        <td align="center">
                            <asp:ImageButton runat="server" ID="ibtnEditOption" CommandArgument='<%# Eval("POptionID").ToString() %>' CommandName="Edit" ImageUrl="~/images/buttons/EditPencil.gif" AlternateText="Edit" CssClass="AdminImg" />
                        </td>

                        <td>
                            <asp:ImageButton runat="server" ID="ibtnDeleteOption" CommandArgument='<%# Eval("POptionID").ToString() %>' CommandName="Delete" ImageUrl="~/images/buttons/delete.gif" AlternateText="Delete" CssClass="AdminImg" OnClientClick="return confirm('Warning: This will delete the Poll Option from the database.');" />
                        </td>
                    </tr>
                </ItemTemplate>

            </asp:ListView>

            <asp:Label ID="lblNoOption" runat="server" Text="No Options Added"></asp:Label>

            <table width="345px">
                <tr>
                    <td width="100px">
                        Option:
                    </td>

                    <td>
                        <asp:TextBox ID="txtOption" runat="server" width="200px"></asp:TextBox>
                    </td>
                </tr>
            </table>
        </asp:Panel>
    </ContentTemplate>
</asp:UpdatePanel> 
```

代码背后

```
protected void PollBindData()
{
    SqlConnection connOption = new SqlConnection(connStr);
    connOption.Open();
    SqlDataAdapter da = new SqlDataAdapter("SELECT POptionID, OptionText, Votes FROM [PollOptions] Where PollID = '" + PID + "'", connOption);
    DataSet dsSel = new DataSet();
    da.Fill(dsSel);
    lvPollOptions.DataSource = dsSel;
    lvPollOptions.DataBind();
    connOption.Close();
}

protected void Page_Load(object sender, EventArgs e)
{
    string PID = Request.QueryString["ID"];

    if (!IsPostBack)
    {
        if (PID == null)
        {

        }
        else if (PID != null)
        {
            PollBindData();
        }
    }
}

protected void lvPollOptions_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    string PID = Request.QueryString["ID"];

    SqlConnection connOption = new SqlConnection(connStr);
    connOption.Open();
    SqlDataAdapter da = new SqlDataAdapter("SELECT POptionID, OptionText, Votes      FROM [PollOptions] Where PollID = '" + PID + "'", connOption);
    DataSet dsSel = new DataSet();
    da.Fill(dsSel);
    lvPollOptions.DataSource = dsSel;
    lvPollOptions.DataBind();
    connOption.Close();
}

protected void lvPollOptions_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    if (e.CommandName == "Delete")
    {
        string selectedID = e.CommandArgument.ToString();
        SqlConnection connDeleteOption = new SqlConnection(connStr);
        connDeleteOption.Open();
        SqlCommand cmdDeleteOption = new SqlCommand("DELETE FROM [PollOptions] WHERE POptionID = '" + selectedID + "'", connDeleteOption);
        cmdDeleteOption.ExecuteNonQuery();
        connDeleteOption.Close();

        PollBindData();
        //Response.Redirect("aAddEditPoll.aspx?ID=" + selectedID);
    }

    if (e.CommandName == "Edit")
    {
        string EditID = e.CommandArgument.ToString();
        SqlConnection conn = new SqlConnection(connStr);
        conn.Open();
        SqlCommand cmdView = new SqlCommand("SELECT OptionText From [PollOptions] Where POptionID = '" + EditID + "'", conn);
        SqlDataReader dr1 = cmdView.ExecuteReader();

        if (dr1.Read())
        {
            txtOption.Text = dr1["OptionText"].ToString();
        }

        Session["OptionID"] = txtOption.Text;
        dr1.Close();
        conn.Close();

        lbOInsert.Visible = false;
        lbOUpdate.Visible = true;

        PollBindData();
        //Response.Redirect("aAddEditPoll.aspx?ID=" + EditID);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:03:24.057

在我们开始之前 - 您的代码存在**安全风险**，因为它容易发生**[Sql Injection](http://en.wikipedia.org/wiki/SQL_injection)**，请确保您[参数化](http://www.dotnetperls.com/sqlparameter)您的查询......

现在，您的问题不是很清楚，但如果我理解正确，您是说在删除对象后，回发后不会刷新 Listview（例如，您仍然看到已删除的项目）。由于您在 UpdatePanel 中运行，因此请确保在 DataBind 之后更新面板...

`PoolBindData`像这样更新

```
protected void PollBindData()
{
    SqlConnection connOption = new SqlConnection(connStr);
    connOption.Open();

    // POTENTIAL SECURITY RISK - MAKE SURE YOU PARAMETRIZE THE QUERY!!
    SqlDataAdapter da = new SqlDataAdapter("SELECT POptionID, OptionText, Votes FROM [PollOptions] Where PollID = '" + PID + "'", connOption);

    DataTable dsSel = new DataTable();
    da.Fill(dsSel);
    lvPollOptions.DataSource = dsSel;
    lvPollOptions.DataBind();
    connOption.Close();

    // Update panel
    UpdateOptions.Update();
} 
```

# c# - 从 SqlDataReader 获取字节 []？

> ID：13948235
> 
> 赞同：18
> 
> 时间：2012-12-19T08:27:59.610
> 
> 标签：c#, asp.net, sql, bytearray

我有带有**varbinary(MAX)**参数的表。执行查询后，我会将结果存储在 SqlDataReader 中，因为它有多个列作为输出。

```
SqlCommand cmd = new SqlCommand("select leave_details from LeaveTable");
SqlDataReader obj;
con.Open();
obj = cmd.ExecuteReader(); 
```

现在我想将每一行的结果转换为 byte[]。

这个不工作::

```
byte[] b=null;
obj.GetBytes(0,0,b,0,1024); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-19T08:30:20.790

试试`GetValue()`方法。

```
byte[] b=null;
b=(byte [])obj.GetValue(0);
//OR
b=(byte [])obj[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:33:27.607

```
string bytesfromsql = "01010101010110010111010001"; //for example
byte[] bytes = new byte[bytesfromsql.Length];
for (int i = 0; i < bytes.Count(); i++)
{
   bytes[i] = byte.Parse(bytesfromsql[i].ToString());
} 
```

# c# - Silverlight 5 自定义控件无法正常工作

> ID：13948237
> 
> 赞同：1
> 
> 时间：2012-12-19T08:28:17.810
> 
> 标签：c#, custom-controls, silverlight-5.0

这段代码有什么问题。我完全一无所知。

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Windows.Data;

namespace CustomControls
{
    public class PercentFiller: StackPanel 
    {
        public Rectangle _FillerRectangle = null;

        public PercentFiller()
        { 
            _FillerRectangle = new Rectangle();
            _FillerRectangle.Height = this.Height;
            _FillerRectangle.Width = 20;

            _FillerRectangle.SetBinding(Rectangle.FillProperty, new Binding() {
                Source = this,
                Path = new PropertyPath("FillColorProperty"),
                Mode = BindingMode.TwoWay 
            });
            this.Background = new SolidColorBrush(Colors.LightGray); 
            this.Children.Add(_FillerRectangle);
            this.UpdateLayout();

        }

        public static readonly DependencyProperty FillColorProperty = DependencyProperty.Register(
            "FillColor",
            typeof(Brush),
            typeof(Compressor),
            new PropertyMetadata(new SolidColorBrush(Color.FromArgb(255, 134, 134, 134))));

        [Description("Gets or sets the fill color")]
        public Brush FillColor
        {
            get { return (Brush) GetValue(FillColorProperty); }
            set { SetValue (FillColorProperty, value); }
        } 
    }
} 
```

当我将此控件添加到另一个项目时，没有显示矩形控件。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:23:42.323

您的绑定错误（您`_FillerRectangle`没有`DataContext`）。此外，您可以将依赖属性本身传递给`PropertyPath`.

尝试像这样更改您的绑定：

```
_FillerRectangle.DataContext = this; //#1: add this line
_FillerRectangle.SetBinding(Rectangle.FillProperty, new Binding()
{
    Path = new PropertyPath(FillColorProperty), // #2: no longer a string
    Mode = BindingMode.TwoWay
}); 
```

“`DataContext`告诉”绑定您要绑定的依赖属性所在的位置。

`DependencyProperty`此外，您的声明中有一个错误：

```
public static readonly DependencyProperty FillColorProperty = DependencyProperty.Register(
    "FillColor",
    typeof(Brush),
    typeof(Compressor), // <- ERROR ! should be typeof(PercentFiller)
    new PropertyMetadata(new SolidColorBrush(Color.FromArgb(255, 134, 134, 134)))); 
```

标记的行应该是属性包含对象的类型，所以在这种情况下它应该是`typeof(PercentFiller)`.

更新：

我忘了补充：`StackPanel`本身没有尺寸，所以：

```
_FillerRectangle.Height = this.Height; 
```

Is meaningless in this context. Either set a fixed size *or* change your control to inherit `Grid` instead of `StackPanel`.

# ruby-on-rails - 如何消除rails erb文件中的重复代码

> ID：13948240
> 
> 赞同：0
> 
> 时间：2012-12-19T08:28:25.650
> 
> 标签：ruby-on-rails, erb, railstutorial.org

我该怎么做才能消除正在发生的双重密码？

**在 about.html.erb 我有以下代码：**

```
<!DOCTYPE html>
<html>
<head>
    <title>Ruby on Rails Tutorial Sample App | <%= @title %></title>
</head>
<body>
    <h1>Pages#about</h1>
    <p>Find me in app/views/pages/about.html.erb</p>
</body>
</html> 
```

**在 localhost:3000/pages/about 的浏览器中**

```
<!DOCTYPE html>
<html>
<head>
  <title>SampleApp</title>
  <link href="/stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />
  <script src="/javascripts/application.js" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="ra/NXpqBo1ccudzQ2HGHoo3OrZB2bLX732MQl+EJHU4=" name="csrf-token" />
</head>
<body>

<!DOCTYPE html>
<html>
<head>
    <title>Ruby on Rails Tutorial Sample App | About</title>
</head>
<body>
    <h1>Pages#about</h1>
    <p>Find me in app/views/pages/about.html.erb</p>
</body>
</html>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:37:17.973

副本是 app/views/layouts/application.html.erb 的一部分

# java - 解释 Wicket Debugbar 输出

> ID：13948247
> 
> 赞同：3
> 
> 时间：2012-12-19T08:29:08.310
> 
> 标签：java, wicket

我正在借助 Debugbar 组件[http://ci.apache.org/projects/wicket/apidocs/6.0.x/调查 Wicket 6.3.0 中的模型分离问题](http://ci.apache.org/projects/wicket/apidocs/6.0.x/)

但是我在解释输出时遇到了一些困难。是否有可用的文档来解释这些值的含义（检查器输出/会话大小/页面大小）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T08:25:23.073

检查器链接显示有关某些应用程序设置、会话和当前页面（整个组件树）的详细信息。组件树表显示它们的属性和大小。

会话链接显示包含活动会话及其统计信息的页面。

默认情况下使用序列化策略计算大小。这意味着所有可能的东西都被序列化并测量结果输出流的大小。对于 Session，它是 Wicket Session 对象。对于 Component，它是以当前组件为根的组件树。

由于 Wicket 6.3.0 组件和 IDetachable 在序列化之前被分离，从 Wicket 6.6.0 开始，分离和序列化是在克隆对象上执行的。

大小是（大致）将由 DefaultPageStore 写入 IDataStore 的字节数。

# java - 使用 itext 时的 NPE

> ID：13948249
> 
> 赞同：1
> 
> 时间：2012-12-19T08:29:20.227
> 
> 标签：java, pdf, itext, livecycle-designer

我有一个用 LC Designer 制作的可填写的 pdf 表格。我想使用 iText 自动填写：

```
 public void fillOut(String input, String output, boolean remove, boolean preserve) throws IOException, DocumentException{
    PdfReader reader = new PdfReader(input);
    if (remove) 
        reader.removeUsageRights();
    PdfStamper stamper;
    if(preserve){
        System.out.println("preserve");
        stamper = new PdfStamper(reader, new FileOutputStream(input), '\0', true);
    }else{
        System.out.println("don't preserve");
        stamper = new PdfStamper(reader, new FileOutputStream(output));
    }
    AcroFields form = stamper.getAcroFields();
    Map<String,Item> fields = form.getFields();
    System.out.println(fields.size());
    for (Entry<String, Item> ent: fields.entrySet()) {
        System.out.println("[" + ent.getKey() + "] [" + ent.getValue() + "]");
    }
    form.setField("Text", "test text");

    stamper.close();
} 
```

但是这段代码会产生 NPE：

```
Exception in thread "main" java.lang.NullPointerException
    at com.itextpdf.text.pdf.XfaForm.findFieldName(XfaForm.java:294)
    at com.itextpdf.text.pdf.AcroFields.setField(AcroFields.java:1387)
    at com.itextpdf.text.pdf.AcroFields.setField(AcroFields.java:1316)
    at FillOutForm.fillOut(FillOutForm.java:40)
    at AcroTest.main(AcroTest.java:13) 
```

同时，当我使用相同的方法 fillOut(String input, String output, boolean remove, boolean preserve) 来填写之前使用 iText 创建的表单时 - 一切正常。

[这是](https://dl.dropbox.com/u/45422316/PDFforms.7z)包含两个 pdf 的 7z 存档，LCtest.pdf 由 LC 设计器制作，并生成错误， itest.pdf - 由 itext 制作并且工作正常。那么，有什么问题呢？我的代码有问题，还是错误？

**PS：**我使用的 iText 版本是 5.1.3，5.3.5 的行为方式相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:35:56.440

NPE 没有发生在您的代码中，它发生在您正在使用的库中：`com.itextpdf.text.pdf`

我建议跟进这个库的提供者以获得他们的支持——他们不太可能故意`NullPointerException`从他们的 API 中抛出一个。

如果这不可能，也许您可​​以获取源代码的副本并对其进行调试，以研究有效案例和崩溃案例之间的差异。

# eclipse - 构建插件的捆绑名称

> ID：13948257
> 
> 赞同：0
> 
> 时间：2012-12-19T08:29:52.100
> 
> 标签：eclipse, eclipse-pde, pde

构建插件后，包名称包含时间戳，例如 org.apache.batik.transcoder.source_1.6.0.v201011041432.jar

同样在 manifest.mf 中，Bundle Version 包含相同的时间戳。

我想在 manifest.mf 中保留时间戳，但在捆绑文件名中删除。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:26:16.883

据我所知，PDEBuild 不允许您自定义生成的名称...

您可能需要考虑使用[Tycho](http://eclipse.org/tycho/)进行构建，因为这是当今Eclipse[的首选工具。](http://wiki.eclipse.org/CBI)

# php - 来自 $_SERVER['HTTP_REFERER'] 的结果，当引用标头未发送到服务器时

> ID：13948267
> 
> 赞同：15
> 
> 时间：2012-12-19T08:30:26.197
> 
> 标签：php, url, http-headers

当浏览器向服务器发送 header 信息时，`$_SERVER['HTTP_REFERER']`应该给我们上一页的 URL 对吗？

`$_SERVER['HTTP_REFERER']`当标头信息未发送到服务器时，返回什么？空字符串？错误的？空值？或者... ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T08:32:05.140

如果未发送 HTTP 引用请求标头，`$_SERVER['HTTP_REFERER']`则可能未设置，尽管它可能是空字符串。在这种情况下是否设置它可能取决于服务器。

与所有 HTTP 请求标头一样，在阅读时检查其是否存在：

```
$httpReferer = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : null; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T08:32:03.407

`$_SERVER['HTTP_REFERER']`不是很可靠，因为用户浏览器上的特定设置可能会破坏它。但是是的，它应该包含以前的 URL，并且在未发送标头时它将返回空字符串或 NULL，具体取决于服务器配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:40:04.793

$_SERVER 是一个全局数组变量，referrer 值是带有键 HTTP_REFERER 的数组元素。如果浏览器没有发送referrer 标头，则该元素只是从数组中丢失。[您可以使用array_key_exists](http://php.net/manual/en/function.array-key-exists.php)检查数组是否有元素；在这种情况下：

`array_key_exists('HTTP_REFERER', $_SERVER)`

# android - 在没有图形加速的硬件上优化 Android 2.3

> ID：13948269
> 
> 赞同：2
> 
> 时间：2012-12-19T08:30:31.897
> 
> 标签：android, rendering, surfaceflinger

我有一些带有 Android 2.3 的基于 arm 的设备。不幸的是，没有图形加速，所以在表面抛掷器中合成最终图像是使用软件 opengl 完成的——这真的很慢。

主要问题在于 glDrawArrays 方法（在 LayerBase::drawWithOpenGl 中调用）。我检查了 glDrawTexiOES 比 glDrawArrays 快得多，但我不能使用它（它不支持 90 度旋转）。

所以我正在寻找任何可以改善我的渲染的想法。我试图实现自定义方法来快速旋转 90 度，但我不确定如何获取指向源和目标内存的指针来执行此操作。你还有其他建议吗？

# sql-server - 使用 OPENROWSET 将文本文件插入数据库

> ID：13948277
> 
> 赞同：0
> 
> 时间：2012-12-19T08:31:40.773
> 
> 标签：sql-server, tsql, alias, openrowset

我有一堆文本文件，它们的电话号码用回车符分隔。我知道这些都是数字。我想将所有这些数字插入到我的 SQL 数据库中的表中。但问题是文本文件以第一个数字开头；不是列名。这意味着我每次尝试插入数据时都不知道列名。

为了澄清这一点，我向您展示了我编写的 SQL：

```
INSERT into dbo.IranCellPhoneNumbers
SELECT PostalCode = null, mobile as Number,CityId= 20
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Text;Database=D:\Projects\Sepanta\ExcelImporter\ExcelImporter\bin\Debug\k1\,
'SELECT * FROM etebari.txt') 
```

我将 postalCode 设置为 null 因为我希望表定义匹配。并设置 CityId 硬编码，因为我知道我的意思是哪个城市。但问题是数字列..它不匹配，因为文本文件以数字而不是“移动”列名开头。

如果我想让这段代码工作，在插入之前我必须打开这些文本文件并在列表顶部添加“移动”，这是不可取的。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:48:26.083

尝试使用类似于此处评论的内容

[http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/cfbe56cc-70b7-462a-b106-0dd9a33304eb](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/cfbe56cc-70b7-462a-b106-0dd9a33304eb)

即沿着这些思路：

```
"Text;Database=D:\Projects\Sepanta\ExcelImporter\ExcelImporter\bin\Debug\k1\;Extended Properties="Excel 12.0;HDR=No" 
```

这里有更多示例：

[http://www.codeproject.com/Articles/37055/Working-with-MS-Excel-xls-xlsx-Using-MDAC-and-Oled](http://www.codeproject.com/Articles/37055/Working-with-MS-Excel-xls-xlsx-Using-MDAC-and-Oled)

或者运行这个 DOS 命令来自动添加标题：

```
COPY HEADERFILE.TXT + YourFile.TXT OUTPUTFILE.TXT 
```

其中 HEADERFILE.TXT 包含标题和回车符

拥有特定国家/地区的表格通常不是好的表格设计，但那是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:37:23.290

您不需要列名。只需这样做：

```
INSERT into dbo.IranCellPhoneNumbers
SELECT PostalCode = null, *, CityId= 20
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0',
'Text;Database=D:\Projects\Sepanta\ExcelImporter\ExcelImporter\bin\Debug\k1\;HDR=NO',
'SELECT * FROM etebari.txt') 
```

# java - 带有 jComboBox 的登录窗口不起作用

> ID：13948278
> 
> 赞同：1
> 
> 时间：2012-12-19T08:31:53.970
> 
> 标签：java, sql

我创建了一个登录名，用户可以在其中输入他们的用户名、密码并选择他们的角色。当我按下登录按钮时，没有任何反应。你能否看看我的代码并告诉我我做错了什么:)

类登录.java：

```
 import java.sql.*;

    public class Login extends javax.swing.JFrame {
        Connection con =null;
        PreparedStatement stmt = null;
        ResultSet rs = null;

    Control c = new Control();

        /**
         * Creates new form Login
         */
        public Login() {
            try {
                initComponents();
                con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xxx?user=yyyy&password=zzzzz");
            } catch (SQLException e) {
                e.toString();
            }

        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">
        private void initComponents() {

            jLabel5 = new javax.swing.JLabel();
            jPanel1 = new javax.swing.JPanel();
            jComboBox1 = new javax.swing.JComboBox();
            user_f = new javax.swing.JTextField();
            pass_f = new javax.swing.JPasswordField();
            jLabel1 = new javax.swing.JLabel();
            jLabel2 = new javax.swing.JLabel();
            jLabel3 = new javax.swing.JLabel();
            jButton1 = new javax.swing.JButton();
            jButton2 = new javax.swing.JButton();
            jLabel6 = new javax.swing.JLabel();

            jLabel5.setText("jLabel5");

            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
            setTitle("MyWindow");

            jComboBox1.setMaximumRowCount(2);
            jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Manager", "Staff" }));
            jComboBox1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

            jLabel1.setText("Username");

            jLabel2.setText("Password");

            jLabel3.setText("Role");

            jButton1.setText("Login");
            jButton1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
            jButton1.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton1ActionPerformed(evt);
                }
            });

            jButton2.setText("Exit");
            jButton2.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
            jButton2.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    jButton2ActionPerformed(evt);
                }
            });

            jLabel6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/fish/oie_transparent (2).png"))); // NOI18N

            javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
            jPanel1.setLayout(jPanel1Layout);
            jPanel1Layout.setHorizontalGroup(
                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addGap(62, 62, 62)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                            .addComponent(jButton1)
                            .addGap(37, 37, 37)
                            .addComponent(jButton2))
                        .addGroup(jPanel1Layout.createSequentialGroup()
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel2)
                                .addComponent(jLabel3)
                                .addComponent(jLabel1))
                            .addGap(34, 34, 34)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(pass_f)
                                .addComponent(user_f)
                                .addComponent(jComboBox1, 0, 120, Short.MAX_VALUE))))
                    .addContainerGap(121, Short.MAX_VALUE))
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel6)
                    .addGap(51, 51, 51))
            );

            jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jLabel1, jLabel2, jLabel3});

            jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jButton1, jButton2});

            jPanel1Layout.setVerticalGroup(
                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanel1Layout.createSequentialGroup()
                            .addGap(19, 19, 19)
                            .addComponent(jLabel6)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jLabel1))
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                            .addContainerGap()
                            .addComponent(user_f, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGap(18, 18, 18)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanel1Layout.createSequentialGroup()
                            .addComponent(pass_f, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(18, 18, 18)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel3)))
                        .addComponent(jLabel2))
                    .addGap(18, 18, 18)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(jPanel1Layout.createSequentialGroup()
                            .addGap(0, 0, Short.MAX_VALUE)
                            .addComponent(jButton2)
                            .addGap(29, 29, 29))
                        .addGroup(jPanel1Layout.createSequentialGroup()
                            .addComponent(jButton1)
                            .addContainerGap())))
            );

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
            getContentPane().setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 225, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            );

            pack();
        }// </editor-fold>

        private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
            // TODO add your handling code here:
            System.exit(0);
        }                                        

        private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

               try{
               String user = user_f.getText();
               String pass = pass_f.getText();
               String role = jComboBox1.getSelectedItem().toString();
               String sql = "Select Log, Pass, Role from Logpass where Log = '"+user+"' Pass = '"+pass+"' Role = '"+role+"' ";
              stmt=con.prepareStatement(sql);
             rs= stmt.executeQuery();

                if(rs.next()){

                 this.setVisible(false);
               c.setVisible(true);

                    }

                else{
                JOptionPane.showMessageDialog(null, "Wrong username or password!");

                }
               }
               catch(SQLException e){
               System.out.println(e);
               }

        }                                        

        /**
         * @param args the command line arguments
         */
        public static void main(String args[]) {
            /*
             * Set the Nimbus look and feel
             */
            //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
            /*
             * If Nimbus (introduced in Java SE 6) is not available, stay with the
             * default look and feel. For details see
             * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
             */
            try {
                for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        javax.swing.UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (ClassNotFoundException ex) {
                java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (InstantiationException ex) {
                java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                java.util.logging.Logger.getLogger(Login.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            }
            //</editor-fold>

            /*
             * Create and display the form
             */
            java.awt.EventQueue.invokeLater(new Runnable() {

                public void run() {
                    new Login().setVisible(true);
                }
            });
        }
        // Variables declaration - do not modify
        private javax.swing.JButton jButton1;
        private javax.swing.JButton jButton2;
        private javax.swing.JComboBox jComboBox1;
        private javax.swing.JLabel jLabel1;
        private javax.swing.JLabel jLabel2;
        private javax.swing.JLabel jLabel3;
        private javax.swing.JLabel jLabel5;
        private javax.swing.JLabel jLabel6;
        private javax.swing.JPanel jPanel1;
        private javax.swing.JPasswordField pass_f;
        private javax.swing.JTextField user_f;
        // End of variables declaration
    } 
```

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:38:21.153

```
Select Log, Pass and Role from Logpass where Log = '"+user+"' Pass = '"+pass+"' Role = '"+role+"' 
```

对我来说，这似乎不是一个正确的 SQL 查询。尝试

```
Select Log, Pass, Role from Logpass where Log = '"+user+"' and Pass = '"+pass+"' and Role = '"+role+"' 
```

此外，`e.toString();`不打印执行查询时可能引发的异常。

# javascript - jQuery jEditables - 使用 optgroup 选择

> ID：13948279
> 
> 赞同：6
> 
> 时间：2012-12-19T08:31:55.097
> 
> 标签：javascript, jquery, jeditable

我正在使用[jEditable](http://www.appelsiini.net/projects/jeditable)并且想知道是否可以使用 optgroups 进行**选择****（** type *=select*）？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:23:48.203

我设法通过创建自定义输入类型（我称之为*optgroup*）来做到这一点。

它的工作原理是假设数据的 json 格式为；

```
var json = [{"Foo":[{"id":1,"name":"aaa"},{"id":2,"name":"bbb"}]},{"Bar":[{"id":3,"name":"ccc"},{"id":4,"name":"ddd"}]}]; 
```

这是代码；

```
optgroup: {
   element : function(settings, original) {
        var select = $('<select class="opt" />');
        $(this).append(select);
        return(select);
    },
    content : function(data, settings, original) {
        if (String == data.constructor) {      
            eval ('var json = ' + data);
        } else {
            var json = data;
        }

        var addto = $('select', this);
        $.each(json, function(i, optgroups) {
            $.each(optgroups, function(groupName, options) {
                var $optgroup = $("<optgroup>", {label: groupName});
                $optgroup.appendTo(addto);
                $.each(options, function(j, option) {
                    var $option = $("<option>", {text: option.name, value: option.id});
                    $option.appendTo($optgroup);
                });
            });
        });
    }
} 
```

使用;

```
$('.editable').find('td').editable(
    function(v, s) {
        // do whatevere you need to...
    }, 
    {
        "data"   : [{"Foo":[{"id":1,"name":"aaa"},{"id":2,"name":"bbb"}]},{"Bar":[{"id":3,"name":"ccc"},{"id":4,"name":"ddd"}]}],
        "indicator": 'Saving ...',
        "tooltip": 'Double Click to edit',
        "type": 'optgroup',
        "submit": 'Save changes',
        "event": 'dblclick'
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-24T05:16:29.393

你必须添加

```
optgroup: {
    element: function (settings, original) {
        var select = $('<select />');
        $(this).append(select);
        return (select);
    },

    content: function (data, settings, original) {
        if (String == data.constructor) {
            eval('var json = ' + data);
        } else {
            var json = data;
        }

        var addto = $('select', this);
        $.each(json, function (i, optgroups) {
            $.each(optgroups, function (groupName, options) {
                var $optgroup = $("<optgroup>", {
                    label: groupName
                });

                $optgroup.appendTo(addto);

                $.each(options, function (j, option) {
                    var $option = $("<option>", {
                        text: option.name,
                        value: option.id
                    });

                    if (option.selected !== null && option.selected !== undefined && option.selected) {
                        $option.attr('selected', 'selected');
                    }
                    $option.appendTo($optgroup);
                });
            });
        });
    }
} 
```

进入您的 jquery.jeditable.js，找到“类型”并粘贴到该数组中。之后，您的文件应如下所示：

```
types: {
   textarea:...,
   select:...
   number:...
   ...
   optgroup:...
} 
```

接下来你必须使用它。

```
$("#yourControlSelect").editable("/controllerName/ActionToExecute", {
   data: @Html.Action("JEditbaleOptGroup", "ControllerName"),
   type: 'optgroup', //Same as you created before
   ...
}); 
```

记住数据的格式，它必须是：

```
[
   {"Category1": [{"id": 1,"name": "Product1"}, {"id": 2,"name": "Product2"}]}, 
   {"Category2": [{"id": 3,"name": "Product3"}, {"id": 4,"name": "Product4"}]}, 
   {"Category3": [{"id": 5,"name": "Product5"}, {"id": 6,"name": "Product6"}]}
] 
```

最后，这是创建和返回它的模型

```
 public class JEditable
    {
        public string Id { get; set; }
        public string Descripcion { get; set; }
    }

    public class JEditableOptGroup
    {
        public string Nombre { get; set; }        
        public IEnumerable<JEditable> Hijos { get; set; }
    } 
```

填充模型

```
var grupos = Repositorio.SelectListOfYourDataType(x => true).GroupBy(x => x.ColToGrouping);

foreach (var grupo in grupos)
{
   List<JEditable> hijos = new List<JEditable>();
   foreach (var item in grupo.OrderBy(x=>x.nombre_g5))
      hijos.Add(new JEditable() { Id = item.Id_g5, Descripcion = item.nombre_g5.Trim() + " (" + item.Balance_g5 + ") " + item.cuenta_g5.Trim() });

      jEditable.Add(new JEditableOptGroup() { Nombre = grupo.Key + " " + grupo.FirstOrDefault().cuenta_g4.Trim(), Hijos = hijos });
 }
return Funciones.JEditableDropDownList(jEditable); 
```

将数据转换为正确的格式：

```
internal static string JEditableDropDownList(List<JEditableOptGroup> grupos)
   {
       StringBuilder sb = new StringBuilder();
       sb.Append("[");
       foreach (var grupo in grupos)
       {
         StringBuilder hijos = new StringBuilder();    
         foreach (var item in grupo.Hijos)
           hijos.Append("{" + string.Format("id:'{0}',name:'{1}'", item.Id, item.Descripcion) + "},");

           sb.Append("{" + string.Format("'{0}':[{1}]", grupo.Nombre, hijos) + "},");
                }
           sb.Append("]");
           return sb.ToString();
        } 
```

好好享受！**

# c# - 如何在静态 webmethod 中编写 cookie

> ID：13948286
> 
> 赞同：3
> 
> 时间：2012-12-19T08:32:12.267
> 
> 标签：c#, asp.net, cookies, static-methods

我正在使用 John Culviner 的[jquery.filedownload](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx) 插件。

为此，我需要编写一个 cookie。如何从静态网络方法中编写 cookie？作为页面。响应是一个实例字段，我无法从静态方法访问它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T08:38:04.083

```
var myCookie = new HttpCookie("CookieName");
myCookie["key"] = "val";

HttpContext.Current.Response.Cookies.Add(myCookie); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T08:37:56.137

在`HttpContext.Current`您的`WebMethod`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:38:04.417

```
HttpContext.Current.Response.Cookies.Get("CookieName"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T08:40:58.147

使用 ff: 代码：

```
HttpCookie objHTTPCk = HttpContext.Current.Request.Cookies.Get("Cookie name"); 
```

# windows - 使用 dxva 解码 h264 视频

> ID：13948288
> 
> 赞同：6
> 
> 时间：2012-12-19T08:32:26.793
> 
> 标签：windows, dxva

我正在开发一个需要使用 dxva2.0 解码 h264 视频的项目。我根据文档[http://msdn.microsoft.com/en-us/library/windows/desktop/aa965245%28v=vs.85%29.aspx编写代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965245%28v=vs.85%29.aspx). 也就是说，我创建了一个IDirectXVideoDecoder的接口，然后调用dxva api“BeginFrame”、“Execute”和“EndFrame”。然后问题就出来了。当我在 Intel Core i5 CPU（GPU 是 CPU 内的 Intel 高清显卡）上执行我的程序时，一切正常。但是当我在英特尔 ATOM 处理器（使用英特尔 GMA3000 系列图形硬件）上执行它时，我无法得到正确的结果：一些视频帧被正确解码，而另一些则完全一团糟。我使用的数据是从另一台电脑发送过来的，数​​据可以直接填充到dxva的缓冲区中。在 h264 中，缓冲区是 DXVA2_PictureParameter、DXVA2_Bitstream、DXVA2_InverseQuantization 和 DXVA2_SliceControl。所以没有必要使用ffmpeg或ffdshow（而且ffdshow是gpl，我不能使用它）。这 ”

# ruby-on-rails-3 - 如何在 apache + 乘客中启用完整的错误消息

> ID：13948291
> 
> 赞同：0
> 
> 时间：2012-12-19T08:32:42.367
> 
> 标签：ruby-on-rails-3, apache, passenger

我在 Ubuntu 服务器机器上构建我的第一个 Rails 应用程序服务器。我来到了我正在测试位于服务器上的简单添加的地步。当我点击根页面时，默认 rails 消息

“欢迎加入，您正在使用 Ruby on Rails！”

那很好，我怀疑。但是当我点击服务器/待办事项时，我只会收到此错误消息

“我们很抱歉，但有些不对劲。”

如何查看完整的错误消息？我对 Apache 和Passenger 完全陌生。我怀疑如果我从服务器运行但没有安装 GUI 或浏览器，我可能会收到完整的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:25:07.627

好的，发现这都与 Rails 应用程序有关，而不是 Apache 或乘客设置。

```
 # environments/production.rb
 config.consider_all_requests_local = true 
```

# mysql - 您好有人可以帮我对这个表进行特定的 SQL 查询

> ID：13948294
> 
> 赞同：2
> 
> 时间：2012-12-19T08:32:49.553
> 
> 标签：mysql, sql

这是表格：

```
CREATE TABLE `incidencias` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `impact` int(10) NOT NULL,
  `date` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1 
```

我需要按“影响”分组并获取每个的最近日期

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:34:28.180

应该是这样的：

```
SELECT * FROM incidencias group by impact order by date desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:35:15.933

用这个：

`SELECT * FROM incidencias GROUP BY impact ORDER BY date DESC`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:53:02.573

应该是这样的：

```
SELECT * FROM incidencias GROUP BY Impact ORDER BY date DESC
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:36:22.370

> SELECT Impact,MAX (date) from incidencias GROUP BY Impact

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T08:36:27.867

这应该有效。

```
select max(date) from incidencias group by impact; 
```

# c# - Linq 分组项目

> ID：13948299
> 
> 赞同：0
> 
> 时间：2012-12-19T08:33:36.453
> 
> 标签：c#, linq

我有一个 myobject 列表（让列表名称为 Mylist）

每个`myobject`都有属性

```
SiteName ,
PersonName ,
numberOfClicks 
```

我必须从*Mylist中获取**SiteName*、*PersonName*、 totalnumberOfClicks 的列表，即一个*siteName*一个*PersonName*和 站点中这个 perticlaur 人的*numberOfClicks的总和*

这在 linq 中是如何实现的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:36:20.513

```
var query = from x in Mylist
            group x by new { x.SiteName, x.PersonName } into g
            select new { 
               g.Key.SiteName,
               g.Key.PersonName,
               totalnumberOfClicks = g.Sum(i => i.numberOfClicks)
            }; 
```

查询将返回具有 SiteName、PersonName、totalnumberOfClicks 属性的匿名对象的 IEnumerable。

*顺便说一句*，在 C# 中，我们使用 PascalCase 进行属性命名，使用 camelCase 命名变量（即 TotalNumberOfClicks、NumberOfClicks 和 myList）。

# android - 如何使用 MediaPlayer 播放 flv 流

> ID：13948302
> 
> 赞同：0
> 
> 时间：2012-12-19T08:33:40.620
> 
> 标签：android, stream, media-player

在我的应用程序中，我有一个接收 flv 流数据的缓冲区。由于安卓不支持flv，那怎么玩呢？如果我将flv流缓冲区转换为mp4，另一个问题来了，那就是：
如何定义MediaPlayer的数据源，因为它通常是文件路径或url。任何人都可以帮助或给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:37:50.443

我个人使用`VideoView.setVideo(uri)`在`VideoView`. [您可以使用以下ffmpeg](http://www.ffmpeg.org/)命令行简单地在服务器端或您自己的电脑上转换视频：

```
ffmpeg -i infile.flv outfile.mp4 
```

就像您应该知道函数`VideoView.setVideo()`期望的第一个参数 a 一样`Uri`，它可以是本地路径或 http/https url。

如果您需要通过网络服务器发送 cookie 以进行下载/流式传输，您可以使用`setVideo(Uri, Map<String, String>)`带反射的隐藏功能：

```
HashMap<String, String> header = new HashMap<String, String>();
header.put("Cookie", "--value--");
Method setVideo = videoView.getClass().getMethod("setVideoURI", Uri.class, Map.class);
setVideo.invoke(videoView, Uri.parse(url), header); 
```

但请注意，您需要捕获可能引发的异常，为简化起见，我在上面的代码中删除了它们。

# dart - 如何在 Dart 中设置文本框的值？

> ID：13948305
> 
> 赞同：11
> 
> 时间：2012-12-19T08:33:58.277
> 
> 标签：dart

我有一个文本框字段`id="textbox1"`。我如何设置它的值？

这是我尝试过的：

```
query('#textbox1').text = 'test 123'; 
```

但它没有用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T08:36:45.167

```
InputElement input = querySelector("#textbox1");
input.value = "test123"; 
```

提示：当您使用时，`querySelector(selector)`您可以输入您期望的结果（[`InputElement`](http://api.dartlang.org/docs/bleeding_edge/dart_html/InputElement.html)此处为a）。因此，编辑器将提供内容帮助来帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T23:41:34.020

请注意，`query`现在已弃用。对于所有像我一样通过谷歌找到这个的人，这里更新了

```
InputElement input = querySelector("#textbox1");
input.value = "test123"; 
```

# android - 连接手机时 Eclipse ADT 包挂起

> ID：13948306
> 
> 赞同：7
> 
> 时间：2012-12-19T08:33:59.947
> 
> 标签：android, eclipse, adt

带有 ADT 的 Eclipse 在 Ubuntu 12.04 64 位上运行良好。但是，每当我在 Eclipse 打开的情况下插入手机时，它往往会无限期地挂起并最大化我的 CPU。即使在插入我的手机后它没有立即挂起，如果手机完全连接，它也会间歇性地卡住并且不响应任何输入，从一分钟到 10 多分钟不等。在命令行上运行时，这是唯一的输出：

```
(ADT:11808): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:11808): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed 
```

ETC...

在研究了这些错误之后，我相信这不是根本原因，因为即使我的手机没有连接并且运行良好，Eclipse 也会这样做。

日志同样没用，只提到在我被迫关闭 Eclipse 后工作区没有保存。

作为参考，我连接的手机是运行 Android 2.3.4 的 Droid 2 Global。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T10:05:44.370

我看到您正在运行 64 位 Ubuntu ...我在 64 位 Debian 7 (Wheezy) 下遇到了类似的问题，并通过在 32 位 Java 1.7 下运行 32 位 Eclipse Juno 解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:26:09.433

处理 ADT + Eclipse 时的错误很常见。

> ***更新到最新的 ADT，这必须修复***

我也在使用我的手机，使用最新的 ADT 进行调试，并且没有遇到任何问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T10:41:41.627

我有这个问题 - 你需要清除 logcat 缓冲区（adt 中的错误）。

在插入手机之前，打开终端并运行“adb logcat”，这不是 100% 修复，但它减少了崩溃的数量。此外，减少您的应用程序产生的日志数据量将有很大帮助（同样，太多的日志会使插件崩溃）。

有趣的是，这是在圣诞节前修复的，但在接下来的更新中倒退了。

无论如何，我在输入此内容时提交了一份错误报告。

# html5-audio - 如何通过 html5 播放 .spx 文件？

> ID：13948307
> 
> 赞同：6
> 
> 时间：2012-12-19T08:34:02.350
> 
> 标签：html5-audio, speex

从 html5 规范来看，它似乎支持 spx： [http ://dev.w3.org/html5/spec-preview/the-source-element.html](http://dev.w3.org/html5/spec-preview/the-source-element.html)

使用：

但从我的尝试来看，它不能在 Firefox 17 和 Chrome 中播放，你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-04T01:19:26.800

我发现 GitHub ( [https://github.com/jpemartins/speex.js](https://github.com/jpemartins/speex.js) ) 上的 speex.js 可以解决您的问题。使用 speex.js，您可以即时将 speex 文件（*.spx 或 *.ogg）解复用和解码为 wav，Chrome/Firefox 和许多其他支持 HTML5 的现代浏览器都支持。

*   [在您的 html 中包含https://github.com/jpemartins/speex.js/tree/master/public/js/lib](https://github.com/jpemartins/speex.js/tree/master/public/js/lib)下的 thoese *.js 文件

> ```
> <script src="bitstring.js"></script>
> <script src="pcmdata.min.js"></script>
> <script src="speex.js"></script> 
> ```

*   下面的函数将完成将 spx 转换为 wav 编解码器的技巧：

> ```
> /**
>   * @param bufSpx ArrayBuffer (Uint8Array) holding content of speex file (*.spx or *.ogg)
>   */
> function decodeFile(bufSpx) {
>   var stream, samples, st;
>   var ogg, header, err;
> 
>   ogg = new Ogg(bufSpx, {file: true});
>   ogg.demux();
>   stream = ogg.bitstream();
> 
>   header = Speex.parseHeader(ogg.frames[0]);
>   console.log(header);
> 
>   comment = new SpeexComment(ogg.frames[1]);
>   console.log(comment.data);
> 
>   st = new Speex({
>     quality: 8,
>     mode: header.mode,
>     rate: header.rate
>   });
> 
>   samples = st.decode(stream, ogg.segments);
> 
>   var waveData = PCMData.encode({
>       sampleRate: header.rate,
>       channelCount: header.nb_channels,
>       bytesPerSample: 2,
>       data: samples
>     });
> 
>   // array buffer holding audio data in wav codec
>   var bufWav = Speex.util.str2ab(waveData);
>   // convert to a blob object
>   var blob = new Blob([bufWav], {type: "audio/wav"});
>   // return a "blob://" url which can be used as a href anywhere
>   return URL.createObjectURL(blob);
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:26:18.317

规范说：

> type 属性给出媒体资源的类型，以帮助用户代理在获取该媒体资源之前确定它是否可以播放该媒体资源。

规范本身并没有指定要支持的任何音频或视频格式，并且支持取决于各个浏览器。

...据我所知，没有浏览器支持 .spx 。

# javascript - 如何打印pdf？

> ID：13948313
> 
> 赞同：3
> 
> 时间：2012-12-19T08:34:47.967
> 
> 标签：javascript, pdf

我有一个 pdf url，嵌入在 iframe 的矩形区域中。我正在尝试单击按钮打印它。我的代码如下所示：

**JavaScript 打印：**

```
function printPDF(pdfUrl)
{
var w = window.open(pdfUrl);
w.print();
w.close();
} 
```

**HTML代码：**

```
<table>
<tr>
<td><input type="submit"  value="Print"
name="Submit" id="printbtn"
onclick="printPDF('http://www.irs.gov/pub/irs-pdf/fw4.pdf')" /></td>
</tr> 
```

现在在 MF 中是这样的：

![在此处输入图像描述](../Images/8d924c3165975336826eff9bcac00487.png)

问题，它在 chrome 和 IE 中无法正常工作。我有 chrome 20 和 IE 8。在 chrome 中，打印窗口被加载到一个新选项卡中（没关系），但 pdf 没有在预览中加载。在 IE 中，pdf 只是在新选项卡中打开，并且没有出现打印提示。

在有人问我之前，pdf 可能具有固有的打印功能。但我正在处理的 pdf 文件需要有一个打印按钮。人们，请在这里帮助我。是否有适用于所有 3 个浏览器的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:06:36.463

伙计们，刚刚得到了一个解决方案，这对我来说很好。

```
function printPage(htmlPage)
{
    var w = window.open("about:blank");
    w.document.write(htmlPage);
    if (navigator.appName == 'Microsoft Internet Explorer') window.print();
    else w.print();
} 
```

所以，如果是 MSIE，那么我们可以使用：window.print();

# sql-server-2008 - 如何将项目列表作为参数传递给存储过程

> ID：13948314
> 
> 赞同：3
> 
> 时间：2012-12-19T08:34:50.187
> 
> 标签：sql-server-2008, stored-procedures

我有一个存储过程

```
create PROCEDURE [dbo].[SP] 
(
    @OrderList varchar(500)
)
AS
Begin
    select * 
    from table 
    where id in ('+ @OrderList +') 
```

在这里，我正在传递订单列表....

当我这样执行时

```
exec sp 'iss005,iss006' 
```

我没有得到数据

但是当我像这样在sp中硬编码时......

```
 select * from table where id in ('iss005','iss006') 
```

然后我正在获取数据...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:37:59.443

不幸的是，它不会那样工作。如果您将程序更改为以下内容，这将起作用：

```
Create Procedure dbo.SP
    @OrderList varchar(500)
AS

Declare @SQL VarChar(1000)

Select @SQL = 'SELECT * FROM table '
Select @SQL = @SQL + 'WHERE id in (' + @OrderList +')'

Exec ( @SQL)

GO 
```

更多地查看您的查询，您的 ID 值`varchar`，因此该过程将失败，因为您仍然会得到：

`WHERE id in (iss005,iss006)`

当你想要的时候 ：

`WHERE id in ('iss005','iss006')`

您需要传入报价值，例如：

`@OrderList = 'iss005','iss006'`

或者制定一些 SQL 来拆分`@OrderList`逗号并使用该`QUOTENAME()`函数将引号添加到新变量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-09T18:39:20.457

我强烈推荐在这种情况下使用 XML 参数，会给你很大的灵活性。

您的 XML 可能类似于

```
<ids>
   <id>iss006</id>
   <id>iss005</id>
</ids> 
```

你的程序应该是这样的：

```
create PROCEDURE [dbo].[SP] 
(
    @OrderList XML
)
AS
Begin
    select *  from table 
    where id in (
            select ParamValues.ID.value('.','VARCHAR(50)') 
                    FROM @OrderList.nodes('/ids/id') as ParamValues(id)
            ) 
```

除了使用存储过程输出之外，我还建议使用函数，但这取决于你。问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T11:08:07.190

我有同样的要求。我在一个 int 列表变量中获取用户列表，我需要获取这些用户的所有顺序。我使用了一个非常简单的技巧来解决我的问题。请找到代码。

```
public DataTable GetAllOrderData(List<int> UserID)
    {
        try
        {
            string listofuser = String.Join(",", UserID.ToArray());
            SqlParameter[] parameters = new SqlParameter[]
            {                
                new SqlParameter("@USERID", listofuser)
            };
            return SqlDBHelper.ExecuteParamerizedSelectCommand("GetOrderByUserID", System.Data.CommandType.StoredProcedure, parameters);
        }
        finally { UserID = null; }

    } 
```

这是存储过程

```
CREATE PROCEDURE [dbo].[GetOrderByUserID] (@USERID varchar(700))
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
Declare @SQL VarChar(1000)
Select @SQL = 'SELECT *,ORM.OrganisationName FROM OrderTransaction ORT LEFT JOIN OrganisationMaster ORM ON (ORT.OrganisationID=ORM.OrganisationID) '
Select @SQL = @SQL + 'WHERE ORT.CreatedBy IN (' + @USERID +')'

Exec ( @SQL)
END 
```

# jquery - 子 div 的每个短子的边距底部

> ID：13948316
> 
> 赞同：0
> 
> 时间：2012-12-19T08:34:53.817
> 
> 标签：jquery

我有 3 个`.items_row`div，每个包含 4 个`.item`，每个`.item`包含一个`.item_img`. 我正在使用以下脚本`.item_img`在 each`.item`中找到最高的`.items_row`，并为最短的添加底部边距，即最高`.item_img`高度减去每个最短的高度。

```
$('.items_row').each(function(){
    var tallestimg = -1;
    $(this).children().each(function() {
        $(this).find('.item_img').each(function(i) {
            tallestimg = $(this).height() > tallestimg ? $(this).height() : tallestimg;
            if ($(this).height() < tallestimg) {
                $(this).css({ 'margin-bottom': tallestimg - $(this).height() });
            }
        });
    });
}); 
```

该脚本完全按照我的意愿工作，但如果最高的`.item_img`div 不在第一个`.item`div 中，那么最短的 div 在它根本没有得到之前`margin-bottom`。例如，如果最高的`.item_img`div 位于 的第二个`.item`中`.items_row`，则`.item_img`前面的 div 会忽略`margin-bottom`。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:01:34.540

您的解决方案不起作用，因为您没有为最高之前的图像设置边距底部。如果您的图像从最短到最高排序，则所有图像的 margin-bottom = 0。

您应该首先搜索最高的图像，然后再次遍历图像以应用所需的边距底部。

我认为这应该有效：

```
$('.items_row').each(function(){
    var tallestimg = -1;
    $(this).children().each(function() {
        $(this).find('.item_img').each(function(i) {
            tallestimg = $(this).height() > tallestimg ? $(this).height() : tallestimg;            
        });
    });

    $(this).children().each(function() {
        $(this).find('.item_img').each(function(i) {
            if ($(this).height() < tallestimg) {
                $(this).css({ 'margin-bottom': tallestimg - $(this).height() });
            }
        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:58:21.340

试试这个：

```
$('.items_row').each(function() {
    var $rowItems = $('.items', this)

    // get the height of the tallest .item in the row
    var maxHeight = $rowItems.map(function(index, element) {
        return $(element).height();
    }).get();

    // apply the required margin-bottom to each .item
    $rowItems.each(function() {
        $(this).css({ 'margin-bottom': maxHeight - $(this).height() })
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:03:24.127

首先得到最高的图像：

```
var max_height = Math.max.apply(
    null,
    $('.item_img').map(function(ix, el){ 
        return $(el).height(); 
    }).get()
) 
```

然后应用边距：

```
$('.item_img').each(function(){
    $(this).css({'margin-bottom': max_height - $(this).height()});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:18:07.817

看到这个：http: [//jsfiddle.net/pPTkL/1/](http://jsfiddle.net/pPTkL/1/)

```
$('.items_row').each(function() {
 var height= -1;
 $(this).find('.item_img').each(function() {
     height = Math.max(height, $(this).height()); 
 });

 $(this).find('.item_img').each(function() {
     $(this).css('margin-bottom',(height - $(this).height()));
 });
});​ 
```

# xcode - 我的 Xcode 4 项目中的关于菜单仍然处于禁用状态

> ID：13948318
> 
> 赞同：1
> 
> 时间：2012-12-19T08:35:06.537
> 
> 标签：xcode, macos, disabled-control, about-box

不幸的是，我的项目的关于菜单被禁用，我无法启用它。

我建立了一个 IBOUTLET

```
IBOutlet NSMenuItem *aboutMenu; 
```

然后我尝试在 applicationDidFinishLaunching 中像这样启用它，尽管我认为在我这样说之前不应该禁用它：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification   {
   [aboutMenu setEnabled:TRUE];
} 
```

无论如何，它仍然被禁用。

知道有什么问题吗？

我只在一个项目中遇到这个问题。在我的其他项目中，它总是自动启用。

# bash - 查找特定文件，然后通过管道传输到 stdout/awk

> ID：13948320
> 
> 赞同：5
> 
> 时间：2012-12-19T08:35:10.013
> 
> 标签：bash, find, stdout

我正在寻找一种递归遍历目录以查找特定文件的方法，然后停止搜索并将文件名路径传递给 awk 函数或类似的东西。[我之前问过一个类似的问题](https://stackoverflow.com/questions/13943713/bash-locate-file-awk-copy-not-working-correctly)，但是在我以外的机器上进行测试后发现该`locate`命令不起作用，因为不是每个人都在他们的系统上使用它。

我与定位一起使用的代码：

```
dir="/path/to/destination/";
mkdir "$dir";
locate -l 1 target_file.txt | \
   awk -v dir="$dir" '{printf "cp \"%s\" \"%s\"\n", $1, dir}' | \
   sh 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:39:00.423

该`find(1)`命令将执行此操作。要只获得一条线，请使用`head(1)`.

```
dir="/path/to/destination/";
mkdir "$dir";
find /path/location -name target_file.txt |
    head -n 1 |
    awk -v dir="$dir" '{printf "cp \"%s\" \"%s\"\n", $1, dir}' |
    sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:59:02.050

如果您知道只有一个文件存在，那么您可以使用

`find ./ -name "target_file.txt" -exec cp -r {} $dir \;`

如果您不确定，请使用 head 限制 1 并使用 xargs

`find ./ -name "target_file.txt" | head -1 | xargs -I {} cp -r {} $dir/`

# java - 螺纹库存控制

> ID：13948328
> 
> 赞同：3
> 
> 时间：2012-12-19T08:35:36.843
> 
> 标签：java, multithreading

这是我创建的用于管理仓库库存的基本应用程序。基本上五个线程或 IT 公司每个生产 100 个小部件，然后将其存储在仓库中。这很好用，但偶尔会超过 500 个的仓库限制。所以我希望五个独立的公司分别生产 100 个小部件并将它们存储在仓库中，并停止在 500 个小部件。然而，目前它有时但并不总是超过限制。因此，如果我运行它 3 次，它会工作 2/3，它只会不断地向仓库中添加无穷无尽的小部件。所以我的问题是我该如何解决这个问题？

这是代码

```
public class mainClass {

    public static void main(String[] args) {

        warehouse acct1 = new warehouse(0); // create warehouse with nothing in it
        System.out.print("Reciving widgets...");
        acct1.checkBal();
        manufacturer t1 = new manufacturer(acct1, "Calcutta");  // create 5 threads (manufacturers)
        manufacturer t2 = new manufacturer(acct1, "New York");
        manufacturer t3 = new manufacturer(acct1, "Chicargo");
        manufacturer t4 = new manufacturer(acct1, "Liverpool");
        manufacturer t5 = new manufacturer(acct1, "Tokyo");

        t1.start();                 
        t2.start();
        t3.start();                 
        t4.start();
        t5.start();                 

    }
} 
```

制造商类

```
 import java.util.*;
    public class manufacturer extends Thread {
    warehouse myAcct;               //class 'warehouse' assigned to variable MyAcct
     String name;        
        int time;
        Random r = new Random();     // imported from java.util this can be used to create a random amount of time
        int amount = 100;            // This variable is the manufacturing goal of each individual manufacture (thread)`

    public manufacturer(warehouse acct, String x) { 
        myAcct = acct;
        name = x;   // name of the thread
        time = r.nextInt(4000); // This creates the random time of anywhere between 0 and 9999

    }
    public void run() {
        while (true) {              // run forever
            try {
                sleep (time);       // Create new widgets 
            } catch (InterruptedException e) { }
                //  100 by each manufacturer
               try{
                   Thread.sleep(time);
                    System.out.printf("%s has successfully manufactured %d widgets \n", name, amount);

                     //how long do u want to sleep for?
                    //System.out.printf("%s is done\n", name);

                   myAcct.adjustBal(100); System.out.println("widgets have been stored at the central warehouse");
                   System.out.println();
                   Thread.sleep(time);
                }catch(Exception e){}

                    if (myAcct.getBal()  == 500)
                    {
                        System.out.println("The target goal of 500 widgets have been created and delivered to the central warehouse");
                        System.exit(0);
                        //myAcct.adjustBal(100);// with 100 if necessary 

                    }

            } 
            }
        }

    public class warehouse {
    int balance = 0;
    public warehouse(int openingBal) {      // constructor method
        balance = openingBal;
    }
    public synchronized void adjustBal(int amt) {
        balance += amt;         // process a transaction
        checkBal();             // then show the balance
    }
    public void checkBal() {
        System.out.print (balance);

        System.out.println();
    }
    public int getBal() {
        return balance;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:53:37.720

这里有一个竞争条件：

```
 if (myAcct.getBal()  == 500)
        {
            System.out.println("The target goal of 500 widgets have been created and delivered to the central warehouse");
            System.exit(0);
            //myAcct.adjustBal(100);// with 100 if necessary 

        } 
```

在检查和 System.exit(0) 之间，在系统退出之前，另一个线程仍然可以添加到仓库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:54:30.533

您需要同步对共享变量的读取和写入，`balance`以确保更改可见 =>`getBalance()`也使同步。

但问题更可能是由于另一个答案中提到的竞争条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:55:33.800

您遇到的问题是由以下情况引起的：

假设你有 400 个项目，现在线程 X 又增加了 100 个。当线程 X 达到余额检查`if statement`时，另一个线程 Y 可能会获得 cpu 时间并添加另外 100 个（总共给你 600 个项目），然后余额检查将永远不会经过。

您应该在该`adjustBalance`方法中进行限制检查，因为它是同步的，并确保一次只有一个线程添加检查限制。

一个非常重要的注意事项：使用 System.exit(0) 在中间中止您的进程是一种非常糟糕的编程。您应该阅读生产者/消费者，了解如何在单个数据结构上管理多个线程。

# visual-studio-2010 - 在 vs2010 中，我看不到任何模板，例如空的 asp .net 网站

> ID：13948330
> 
> 赞同：4
> 
> 时间：2012-12-19T08:35:38.563
> 
> 标签：visual-studio-2010

当我打开 vs2010 然后点击创建新网站时，我看不到任何模板，如空的 asp .net 网站，它显示没有模板，我怎样才能取回所有模板，帮助我，提前谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:22:24.463

完全取自[Mitch Wheat关于](https://stackoverflow.com/users/16076/mitch-wheat)[Visual Studio 2010 缺少 ASP.NET 项目模板](https://stackoverflow.com/questions/6887270/visual-studio-2010-missing-asp-net-projects-templates/6887281#6887281)的回答 ？

> [Visual Studio 中的默认项目模板](http://msdn.microsoft.com/en-us/library/0fyc0azh.aspx)
> 
> > 可用模板可能因 Visual Studio 版本、SKU、安装选项和其他自定义而异。如果您缺少安装随附的模板，请***使用 /installvstemplates 开关运行 devenv.exe***。有关更多信息，请参阅[如何：恢复默认项目模板](http://msdn.microsoft.com/en-us/library/ms247116.aspx)。

# visual-studio-2010 - Visual Studio 调试器将 char 显示为 unsigned char

> ID：13948333
> 
> 赞同：1
> 
> 时间：2012-12-19T08:35:45.770
> 
> 标签：visual-studio-2010, visual-c++

在调试器中，即使使用[/J（默认字符类型为无符号）](http://msdn.microsoft.com/en-us/library/0d294k5z.aspx)编译器选项，调试器也会在底部显示已签名的字符。我如何让它显示为未签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:54:14.673

监视窗口允许您向正在监视的变量添加[格式说明符。](http://msdn.microsoft.com/en-us/library/75w45ekt.aspx)如果您有一个`ch`类型为 的变量，您可以通过在 Watch 窗口中`char`指定来将其视为无符号。`ch,u`但是，您不能在 Autos 和 Locals 窗口中添加格式说明符。格式说明符也可以应用于数组。

# c++ - 为什么从线程执行方法时使用 QMetaObject::invokeMethod

> ID：13948337
> 
> 赞同：18
> 
> 时间：2012-12-19T08:35:52.933
> 
> 标签：c++, multithreading, qt, qthread

我有以下代码：

```
class A : public QObject
{
    Q_OBJECT
public:
    A() : QObject()
    {
         moveToThread(&t);
         t.start();
    }
    ~A()
    {
         t.quit();
         t.wait();
    }

    void doSomething()
    { 
         QMetaObject::invokeMethod(this,"doSomethingSlot");
    }
public slots:
    void doSomethingSlot()
    {
         //do something
         emit ready();
    }
signals:
    void ready();
private:
    QThread t;
} 
```

为什么`doSomething`必须通过调用它的问题`QMetaObject::invokeMethod`。我知道有一些与连接类型有关的东西。**有人可以解释引擎盖下的内容吗？**

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-19T08:56:13.497

由于您没有指定 a `Qt::ConnectionType`，因此该方法将被调用为`Qt::AutoConnection`，这意味着如果对象的线程亲和性与当前线程相关，它将被同步调用（如普通函数调用），否则异步调用。“异步”意味着a`QEvent`被构造并推送到消息队列中，并在事件循环到达它时被处理。

如果接收对象可能在另一个线程中，则使用它的原因`QMetaObject::invokeMethod`是尝试直接在另一个线程中的对象上调用插槽可能会导致损坏或更糟，如果它访问或修改非线程安全数据。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-19T09:27:27.470

我喜欢这个技巧：

```
void A:doSomethingSlot()
{
     if (thread()!=QThread::currentThread()) {
         QMetaObject::invokeMethod(this,"doSomethingSlot", Qt::QueuedConnection);
         return;
     }
     // this is done always in same thread
     ...
     emit ready();
} 
```

# sql-server - SQL Server getdate() 格式

> ID：13948339
> 
> 赞同：1
> 
> 时间：2012-12-19T08:35:58.517
> 
> 标签：sql-server

如何`19 Dec 2012`从 tsql 中的 getdate() 函数中获取格式

```
select convert(varchar(11),getdate(),?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:39:35.257

`select convert(varchar(11),getdate(),106)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:40:49.260

[Cast and Convert](http://msdn.microsoft.com/en-us/library/ms187928.aspx)列出了可用的格式：

```
106     dd mon yy 
```

看起来差不多。

我通常会避免对数据库进行任何格式化。尽可能长地保留日期 - 仅在向用户显示的最后一刻转换（类似地，对于任何输入，希望尽早将其从字符串转换为正确的数据类型）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:42:40.160

```
 -- Can use if SQL 2008 and above (precision to nanoseconds)
 SELECT CONVERT(VARCHAR(12), SYSDATETIME(), 106)

 -- otherwise (precision to miliseconds)
 SELECT CONVERT(VARCHAR(12), GETDATE(), 106) 
```

# sql-server - 使用 SQL Server 数据库中的脚本删除主键

> ID：13948344
> 
> 赞同：54
> 
> 时间：2012-12-19T08:36:21.837
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我需要删除`Student`SQL Server 数据库中表的主键。

我在表格中进行了编辑，我得到的脚本是

```
ALTER TABLE dbo.Student
    DROP CONSTRAINT PK__Student__9CC368536561EF8B 
```

但是当我在 SQL Server 查询浏览器中运行此脚本以删除主键时

它显示了消息

> *消息 3728，级别 16，状态 1，第 1 行
> “PK__Student__9CC368536561EF8B”不是约束。
> 消息 3727，第 16 级，状态 0，第 1 行*

就我而言，我认为`PK__Student__9CC368536561EF8B`这将是随机生成的，请帮助我使用**script**删除主键约束。

提前致谢

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-19T08:54:19.113

您可以在 sys.key_constraints 表中查找约束名称：

```
SELECT name
FROM   sys.key_constraints
WHERE  [type] = 'PK'
       AND [parent_object_id] = Object_id('dbo.Student'); 
```

如果你不在乎名字，而只是想删除它，你可以使用这个和动态sql的组合：

```
DECLARE @table NVARCHAR(512), @sql NVARCHAR(MAX);

SELECT @table = N'dbo.Student';

SELECT @sql = 'ALTER TABLE ' + @table 
    + ' DROP CONSTRAINT ' + name + ';'
    FROM sys.key_constraints
    WHERE [type] = 'PK'
    AND [parent_object_id] = OBJECT_ID(@table);

EXEC sp_executeSQL @sql; 
```

此代码来自 Aaron Bertrand（[来源](https://stackoverflow.com/a/6683972/1220971)）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-04T09:23:02.507

只需点击

> '数据库'>表>你的表名>键>复制像'PK__TableName__30242045'这样的约束

并运行以下查询是：

```
Query:alter Table 'TableName' drop constraint PK__TableName__30242045 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T10:05:42.097

我得到的答案是变量和子查询不起作用，我们必须使用动态 SQL 脚本。以下作品：

```
DECLARE @SQL VARCHAR(4000)
SET @SQL = 'ALTER TABLE dbo.Student DROP CONSTRAINT |ConstraintName| '

SET @SQL = REPLACE(@SQL, '|ConstraintName|', ( SELECT   name
                                               FROM     sysobjects
                                               WHERE    xtype = 'PK'
                                                        AND parent_obj =        OBJECT_ID('Student')))

EXEC (@SQL) 
```

# spring-aop - 如何在抛出建议后拆分仅来自 aop 的日志...

> ID：13948349
> 
> 赞同：1
> 
> 时间：2012-12-19T08:36:36.317
> 
> 标签：spring-aop

```
Logger logger = Logger.getLogger(ThrowsLoggingAdvice.class);

public void afterThrowing(Method method, Object[] arguments, Object target, BatchException ex) throws Throwable {
    BatchException batchException=ex;
    Logger.getLogger(target.getClass()).debug("afterThrowing: BatchException");
    logger.error(ex.getMessage());
} 
```

# android - 已发布的 android 应用在 google play 中的任何位置均不可见

> ID：13948359
> 
> 赞同：0
> 
> 时间：2012-12-19T08:37:22.923
> 
> 标签：android

我在 google play 中发布了一个 android 小部件。从我发布我的应用程序之日起已经一周了，我无法在谷歌游戏的任何地方找到这个应用程序。

我可以看到在 google play 中发布的状态，但我什至无法使用直接链接访问，正如一些人在其他类似问题中所说的那样。

我在 google play 中有大约 10 个应用程序，这是我的第 11 个应用程序。

[https://play.google.com/store/apps/developer?id=Induz+App+Developers](https://play.google.com/store/apps/developer?id=Induz%20App%20Developers)

我以与其他应用程序类似的方式发布了应用程序。唯一的区别是所有其他应用程序都有启动器活动，但由于这是小部件，我在清单文件中没有任何活动。

有人可以在这里给出一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:13:54.187

它的本机应用程序或混合应用程序，因为我们已经看到混合应用程序的此类问题。

# android - Android 何时实际执行备份

> ID：13948360
> 
> 赞同：1
> 
> 时间：2012-12-19T08:37:23.200
> 
> 标签：android, android-backup-service

我正在使用 Android`BackupManager`来备份我的应用程序数据。但正如文档中所述，Android 执行延迟备份，因为它不会在我调用它的`dataChanged()`方法时立即执行它，而是等待适当的时间。我只想知道是否有任何标志集或在它执行时发生了一些值得注意的事情云端备份。。

# javascript - chrome中的框架问题

> ID：13948361
> 
> 赞同：0
> 
> 时间：2012-12-19T08:37:30.567
> 
> 标签：javascript, facebook-javascript-sdk

我正面临与此特定代码引发错误的框架的问题：

```
window.parent.frames["searchoutput"].document.open("text/html"); 
```

**错误：未捕获的类型错误：无法调用未定义的方法“打开”**

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:40:24.033

```
var frame = window.parent.frames["searchoutput"];
var frameDocument = (frame.contentWindow.document || frame.contentDocument);
frameDocument.open("text/html"); 
```

或更全面的版本来检查如何获取文档：

```
var doc;
if (iframe.document)
    iframe.doc = iframe.document;
else if (iframe.contentDocument)
    iframe.doc = iframe.contentDocument;
else if (iframe.contentWindow)
    iframe.doc = iframe.contentWindow.document; 
```

# linux - 使用两个不同的密码以 root 身份登录

> ID：13948366
> 
> 赞同：0
> 
> 时间：2012-12-19T08:37:45.473
> 
> 标签：linux, ssh, passwords, root

是否可以使用为 root 设置的两个（或多个）密码之一在 linux 机器上通过 ssh 登录？我想要一个我会经常更改的主密码，但在紧急情况下，我想要一个可以让我登录的“备份”密码。我希望我清楚地说明了这个问题。;)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:44:21.890

不要使用root帐户。使用[sudo](http://en.wikipedia.org/wiki/Sudo)。

当您为普通帐户配置 sudo 时，您可以将 root 密码更改为复杂的密码，并使用 sudo 进行日常工作。当出现问题时，您将使用复杂的密码登录到 root。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:01:37.393

您可以创建多个用户 ID 为 0 的帐户，每个帐户都有不同的密码。对权限而言重要的是用户 ID，而不是名称。

但是，有些脚本可能会检查您是否以 root 身份运行，它们可能会检查登录名而不是 ID。但是，如果您只是将备份帐户用于紧急目的，那么这些故障应该不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:42:03.600

通过 ssh 禁用 root 登录并创建两个用户帐户，一个为我自己和一个默认帐户（在我所有具有有限 sudo 访问权限的机器上都有），我所做的就是对这两个帐户进行 sudo 访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:07:24.627

如果都是关于`ssh`，那么您可以使用基于密钥的**身份验证**，而不是基于密码的身份验证。这样，两个（或更多）用户可以登录（作为根用户，作为给定用户）而无需共享密码。

# asp.net - IIS7：限制服务器的流量

> ID：13948372
> 
> 赞同：7
> 
> 时间：2012-12-19T08:38:02.557
> 
> 标签：asp.net, iis, iis-7, windows-server-2008, windows-server-2008-r2

如何使用 IIS7 限制整个服务器的流量？

站点有限制功能，但它仅适用于单独的站点：

![在此处输入图像描述](../Images/ab791346f05ae9e11196b402cf4b1f9d.png)

还有用于 IIS 的比特率限制插件，但据我所知，它只能为单独的用户配置：

![在此处输入图像描述](../Images/65d9731039fa189f87296df1c4471bf9.png)

有没有办法为整个服务器而不是单个网站配置流量限制？

**更新：** 解决方案是（感谢@Arpit）设置`<webLimits maxGlobalBandwidth="1000000" />`为机器配置。不过要小心！IIS 文档中有一个错误：您应该输入`maxGlobalBand[w]idth`（小写字母`w`），而不是`maxGlobalBand[W]idth`（大写字母`W`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T11:29:56.883

好吧，我还没有尝试过，但你可以试一试 -

在 IIS7 中，选择服务器并打开**配置编辑器**。在右侧窗格中，有一个用于搜索配置的选项。我们在这里寻找`webLimits`。

这可能是关键。更多信息`webLimits`可以在[这里找到](http://www.iis.net/configreference/system.applicationhost/weblimits)

**编辑**- 我发现这个属性`webLimits`应该有所帮助：

*`maxGlobalBandwidth`- 指定服务器的最大总带宽。将该值设置为 0 可为服务器启用无限带宽。默认值为 4294967295。*

# javascript - 是否有可以通过 Javascript 进行智能导航的 IDE？

> ID：13948375
> 
> 赞同：1
> 
> 时间：2012-12-19T08:38:07.203
> 
> 标签：javascript, web, ide, navigation, aptana

在 Java 世界中，如果我想跳入方法或类、变量……任何东西，我总是按**F3 。**

我现在正在开发一个 Javascript 项目，我发现 F3（Open Decleration）在 Eclipse 和 Aptana 中非常有限。它实际上几乎不存在，仅适用于方法中声明的变量。

我们的项目已经发展到大约 50 个 Javascript 文件（约 60 个 Javascript“对象”），由于以下情况，事情变得几乎无法管理：

```
this.url = Util.buildURLFor(URLs.ticketPrefillData); 
```

**Util**对象位于名为**Toolbox**的*文件*中，而**URLs**对象位于名为**URLManager的***文件*中。问题是，任何人都应该知道它在 Toolbox 文件中吗？还有为什么IDE不能把所有文件中的对象都挑出来，这样F3就知道去哪里了。

 *******随着 javascript 文件的增长，它变得难以管理（在敏捷项目中这可能是致命的），我们正在考虑以 Vaadin 或 ZK 的形式切换回 Java，除非我们能找到一个体面的智能 IDE 来进行代码导航。

总之，我需要一个可以做到这一点的 JS IDE：

我在文件 A 中有一个方法，它调用文件 B 中的类 B1 上的一个方法。似乎我遇到的任何 IDE 都无法建立这种关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:39:33.283

查看 JetBrains 的[WebStorm](http://www.jetbrains.com/webstorm/)。我没有使用它，但听说过它的好消息。它支持[代码导航](http://www.jetbrains.com/webstorm/features/index.html#Code_Navigation_and_Usages_Search)，从 ReSharper 来看，JetBrains 非常擅长。

目前，我使用 Visual Studio 2012，当您添加对使用过的 javascript 文件的引用时，它具有出色的导航功能（对我来说已经足够了）。因此，在文件 A 中，当您使用文件 B 中的代码时，只需将其添加到文件顶部：

```
/// <reference path="./B.js" /> 
```

从现在开始，您将拥有 Intellisense 和代码导航。（如果我没记错的话，VS2010 有类似的功能，但没有那么强大）

（但是，您的问题有点主观，因此可能会被关闭/标记；尽量避免在询问人们使用/喜欢什么的地方提问；有关更多信息，请参阅[常见问题解答）](https://stackoverflow.com/faq#dontask)*******

# razor - 视图中的 T4MVC ArgumentOutOfRangeException

> ID：13948377
> 
> 赞同：0
> 
> 时间：2012-12-19T08:38:10.850
> 
> 标签：razor, asp.net-mvc-4, t4mvc

我刚刚在我的项目中安装了 T4MVC，但遇到了一些问题。

在我的控制器中，我可以毫无问题地调用重定向到操作：

```
 return RedirectToAction(Actions.Index()); 
```

如果我确实从我的角度调用它，我会得到一个 ArgumentOutOfRangeException。

```
@Html.ActionLink("Delete Dinner", MVC.Home.Index()) 
```

为了确保我做得正确，我创建了一个新的 MVC 解决方案并且该行有效。我从我的 HomeController 中删除了我的“baseController”继承并重新安装了 T4MVC 以确保它不会干扰。我不知道从哪里开始寻找这个，调试对我没有帮助，因为它似乎在扩展方法中爆炸：

```
[ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index]
   System.ThrowHelper.ThrowArgumentOutOfRangeException() +72
   System.Collections.ObjectModel.Collection`1.set_Item(Int32 index, T value) +10419142
   System.Web.Mvc.ControllerContext.get_RequestContext() +25
   System.Web.Mvc.Html.LinkExtensions.RouteLink(HtmlHelper htmlHelper, String linkText, String routeName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes) +47
   System.Web.Mvc.T4Extensions.ActionLink(HtmlHelper htmlHelper, String linkText, ActionResult result, IDictionary`2 htmlAttributes, String protocol, String hostName, String fragment) +196
   System.Web.Mvc.T4Extensions.ActionLink(HtmlHelper htmlHelper, String linkText, ActionResult result) +72
   ASP._Page_Views_Home_Index_cshtml.Execute() in c:\Thva\Misc\DropBox\Work\MyProjects\Wims\Wims.Website\Views\Home\Index.cshtml:53 
```

任何的想法？提前致谢

**编辑**：我刚试过这个，它仍然不起作用：创建一个新控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Wims.Website.Controllers
{
    public partial class MyTestController : Controller
    {
        //
        // GET: /MyTest/

        public virtual ActionResult Index()
        {
            return View();
        }

    }
} 
```

运行 AutoT4MVC，查看：

```
@{
    ViewBag.Title = "Index";
}
@Html.ActionLink("aiaieiae", MVC.MyTest.Index())
<h2>Index</h2> 
```

为了确保我没有依赖，如果我调用我的页面它仍然不起作用：

```
http://localhost:2303/MyTest/index 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T15:32:59.983

我遇到过同样的问题。然后我在构建日志中发现了以下警告：

```
> Consider app.config remapping of assembly "System.Web.Mvc, Culture=neutral, PublicKeyToken=31bf3856ad364e35" from Version "3.0.0.0" [C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll] to Version "4.0.0.0" to solve conflict and get rid of warning.
...and same warnings for System.Web.WebPages, System.Web.Razor, System.Web.WebPages.Deployment, System.Web.WebPages.Razor
> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1605,5): warning MSB3247: Found conflicts between different versions of the same dependent assembly. 
```

我通过在 web.config 中添加以下行来完成警告消息的建议：

```
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
            </dependentAssembly>
        </assemblyBinding>
        ...the same for the other assemblies
    </runtime>
</configuration> 
```

就是这样 - T4MVC 工作正常。有时，NuGet 会自动添加这些行，我不知道为什么这次没有。

该解决方案还解释了为什么创建新的 Web 项目并复制源代码可能会解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:18:19.370

根据堆栈，它似乎无法访问与 T4MVC 无关的请求上下文。为了隔离，您可以删除 T4MVC 行并简单地尝试编写：

```
@ViewContext.RequestContext 
```

在你看来？你也可以试试`@Html.ViewContext.RequestContext`。我猜你会看到同样的例外。如果是这样，我不确定是什么原因造成的，但至少它让你更近了一步。

要尝试的另一件事：常规 MVC`ActionLink`是否有效，还是只有 T4MVC`ActionLink`失败？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:17:37.230

我已经和 David Ebbo 一起研究过这个问题（非常感谢他的时间），但找不到它为什么不起作用的原因。

在我的项目中使用我自己的名称空间复制粘贴 T4MVC 代码并使用它正在工作的那些方法之后..

所以，我刚刚重新创建了一个新的 MVC 网站并重新导入了所有内容.. 不好玩，但我相信 T4MVC 值得麻烦 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T14:50:58.567

好的，所以我知道我的回答比较晚，但它可能对其他人有所帮助。就我而言，一切都很顺利，直到突然我遇到了这个错误：

```
[ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index]
   System.Collections.ObjectModel.Collection`1.set_Item(Int32 index, T value) +14406551
   System.Web.Mvc.Html.LinkExtensions.RouteLink(HtmlHelper htmlHelper, String linkText, String routeName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues, IDictionary`2 htmlAttributes) +89
   System.Web.Mvc.T4Extensions.ActionLink(HtmlHelper htmlHelper, String linkText, ActionResult result, Object htmlAttributes, String protocol, String hostName, String fragment) +338
   System.Web.Mvc.T4Extensions.ActionLink(HtmlHelper htmlHelper, String linkText, ActionResult result, Object htmlAttributes) +107
   ASP._Page_Views_Shared__Layout_cshtml.Execute() in c:\work\[...]\Views\Shared\_Layout.cshtml:29
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +280
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +126
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +196
   System.Web.WebPages.WebPageBase.Write(HelperResult result) +89
   System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body) +233
   System.Web.WebPages.WebPageBase.PopContext() +291
   Castle.DynamicProxy.AbstractInvocation.Proceed() +116
   Glimpse.Core.Extensibility.ExecutionTimer.Time(Action action) +85
   Glimpse.Core.Extensibility.AlternateMethod.NewImplementation(IAlternateMethodContext context) +186
   Castle.DynamicProxy.AbstractInvocation.Proceed() +604
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +378
   Castle.Proxies.AsyncControllerActionInvokerProxy.InvokeActionResult_callback(ControllerContext controllerContext, ActionResult actionResult) +21
   Castle.DynamicProxy.AbstractInvocation.Proceed() +116
   Glimpse.Core.Extensibility.ExecutionTimer.Time(Action action) +85
   Glimpse.Core.Extensibility.AlternateMethod.NewImplementation(IAlternateMethodContext context) +186
   Castle.DynamicProxy.AbstractInvocation.Proceed() +604
   System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +33
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +853420
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +265
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +837892
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +65
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +51
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

就我而言，问题是在 web.config 中，我向*配置*元素添加了一个*xmlns*属性：

 *```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0"> 
```

原本只是

```
<configuration> 
```

通过删除 xmlns，我得到了我的 web.config 警告，但我的网站再次运行，我可以继续我的工作。

**[更新]**

我想添加我认为是这个问题的真正解决方案，但我看到 gius bellow 已经写了它。所以是的，问题是网络配置中缺少 <bindingRedirect> ：

```
<dependentAssembly>
   <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
   <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
</dependentAssembly> 
```*

# sharepoint - 签入 SharePoint 文档库

> ID：13948378
> 
> 赞同：0
> 
> 时间：2012-12-19T08:38:19.067
> 
> 标签：sharepoint

有人可以告诉我如何在使用 Web 服务上传文件后将文件签入到 SharePoint 吗？有没有可以更改的选项？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:16:49.357

[`Lists.CheckInFile`](http://msdn.microsoft.com/en-us/library/lists.lists.checkinfile%28v=office.12%29.aspx)只要您与上传文档的用户相同，您就可以使用此操作，幸运的是您的场景。另请参阅一些[社区代码示例](http://social.msdn.microsoft.com/Forums/en/sharepointdevelopmentlegacy/thread/8d8ab053-205e-49c2-a811-92c55925ca4e)。

如果要更改此行为，请从文档库[中删除签出要求。](http://office.microsoft.com/en-001/sharepoint-server-help/configure-a-site-library-to-require-check-out-of-files-HA101853114.aspx#_Toc270603902)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:19:54.803

在 Sharepoint 文档库中成功上传文件后，您必须编写代码以进行实用的签入、发布和批准文档。

采用[`[Lists.CheckInFile]`](http://msdn.microsoft.com/en-us/library/lists.lists.checkinfile%28v=office.12%29.aspx)

为此目的的方法

# javascript - 在 JS 中为 foreach 问题中的每个项目调用 QTip

> ID：13948382
> 
> 赞同：5
> 
> 时间：2012-12-19T08:38:41.423
> 
> 标签：javascript, asp.net-mvc-3, qtip

我认为这是：

```
 <%--
  The training module list
  --%>
  <div id="training-mod-list-<%: categoryName.Replace(' ', '-') %>" class="training-module-list">
  <% foreach (var module in categoryGroup)
  { %>
    <div class="training-module-row">                                 
      <div class="training-module-name-<%: module.TrainingModuleId %>">    
          <script type="text/javascript">
             <%: Html.GetQTip(module.TrainingModuleId, "", "", QTipPosition.Right,true,""); %> //get error here it has some invalid arguments?
          </script> 
         <%: module.TrainingModuleName %>
      </div>
    </div>
 <% } %> 
```

当我将鼠标悬停在每个培训模块名称上时，我希望显示一个 QTip。

然后获取Qtip：

```
 public static MvcHtmlString GetQTip(this HtmlHelper htmlHelper, string propertyName, string message, string propertyNameOverride = "", QTipPosition position = QTipPosition.Right, bool includeEvents = true, string title = "")
 {
  string qtipPosition = String.Empty;

  switch (position)
  {
    case QTipPosition.Right:
      qtipPosition = "my: 'left center', at: 'right center'";
      break;
    case QTipPosition.Left:
      qtipPosition = "my: 'right center', at: 'left center'";
      break;
    case QTipPosition.Top:
      qtipPosition = "my: 'top middle', at: 'bottom middle'";
      break;
    case QTipPosition.Bottom:
      qtipPosition = "my: 'bottom middle', at: 'top middle'";
      break;
  }

  if (!String.IsNullOrWhiteSpace(propertyNameOverride))
    propertyName = propertyNameOverride;

  if (String.IsNullOrWhiteSpace(title))
    title = htmlHelper.Resource(Resources.Global.Title.Information);

  StringBuilder sb = new StringBuilder();
  sb.Append(String.Concat("$('#", propertyName, "').removeData('qtip').qtip({content: {text:"));
  sb.Append(String.Concat("'", message, "', title: { text: '", title, "', button: false }}, position: { ", qtipPosition, " }"));
  if (includeEvents)
    sb.Append(", show: { event: 'focus mouseenter', solo: true, ready: false }, hide: 'blur'");
    sb.Append(", style: { classes: 'ui-tooltip-shadow ui-tooltip-yellow' } });");

    return new MvcHtmlString(sb.ToString());
  }
} 
```

现在消息参数可以只是任何字符串有人可以向我解释它如何工作以显示每个培训模块ID的qtip吗？message 参数稍后将包含特定于每个训练模块 id 的点，这些点由 html 字符串组成

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T18:25:40.387

将 HTML 帮助程序的`TrainingModuleId`参数从 an转换`int`为 a `String`。

```
<%: Html.GetQTip(module.TrainingModuleId.ToString(), "", "", QTipPosition.Right,true,""); %> 
```

# javascript - 从 JS 文件而不是视图调用动作 (MVC 4)

> ID：13948383
> 
> 赞同：2
> 
> 时间：2012-12-19T08:38:42.080
> 
> 标签：javascript, asp.net-mvc, razor, asp.net-mvc-4

我正在使用 MVC 4。

在我看来，我可以使用 @Url.Action 简单地获取操作的 url

现在我想用所有视图的javascript制作一个javascript文件，而不是把它全部写在视图中，问题是我不能再使用剃须刀的东西了。

所以我的问题是如何从 javascript 分隔文件中获取操作的 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:47:37.357

您需要在视图中定义一个 JavaScript 变量，然后您可以在脚本中使用该变量。显然，这必须首先声明。

我在我的布局页面上使用了一个助手，它包含所有这些变量和一个我想要特定于页面的部分。请注意，这些将出现在 body 标记之前的任何其他脚本引用之前。

```
@Scripts.Variables()
@RenderSection("ScriptVariables", false) 
```

`Scripts.Variables`是这样的

```
@helper Variables()
{
    <script language="javascript" type="text/javascript">
        var ActionGetallAdmin = '@Url.Action("GetAll", "Admin")';
        var ActionAccountLogin = '@Url.Action("Login", "Account")';
    </script>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:28:51.090

我之前这样做的一种方法是创建提供 JS 文件（实际上是 CSS 文件）的视图，而不是 HTML 文件。这利用了在 MVC 范例中视图不一定总是 HTML 文件的事实。

你可以通过为它创建一个控制器来做到这一点：

```
public class AssetController : Controller {

    protected void SetMIME(string mimeType) {

        // implementation largely removed
        this.Response.Headers["Content-Type"] = mimeType;
        this.Response.ContentType = mimeType;
    }

    // this will render a view as a Javascript file
    public void ActionResult MyJavascript() {

        this.SetMIME("text/javascript");
        return View();
    }

} 
```

完成此操作后，您可以创建一个视图（使用通常在 ASP.NET MVC 中执行的方式），然后将其编写为 Javascript。请记住不要使用布局，因为您显然不希望这样。

MVC 中视图必须提供的所有内容都可供您使用，因此请随意使用模型等。

```
@model IList<Entity>
@{
    Layout = null;
}

(function ($) {

    // javascript!

    @foreach(var entity in Model) {
        $('#@entity.Id').on('click', function () {
            console.log('@entity.Name');
        });
    }

})(jQuery); 
```

然后，您可以在其他视图中使用老式 Razor 将其连接起来。

```
<script src="@Url.Action("MyJavascript","Asset")"></script> 
```

这将推出类似的东西

```
<script src="http://your.domain/asset/myjavascript"></script> 
```

奇迹般有效。当然，视图是动态创建的，所以如果你对此很挑剔，请小心。但是，由于它们*是*MVC 控制器操作和视图，因此您可以在它们上设置缓存选项，就像使用任何其他视图一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:30:01.173

嗯...我认为您可以定义一个特殊的路线，例如“actionsjs”，它指向一个动作。

```
routes.MapRoute(name: "actionsJs",
                url: "actionsjs",
                defaults: new { controller = "Home", action = "GetActions" }); 
```

在您必须将内容设置为正确类型的操作中：

```
Response.ContentType = "text/javascript"; 
```

然后，您将返回一个特定的视图，其中包含带有一些 Razor 的 javascript 代码。

```
@{
    Layout = "";
}

$(function() {
    var a = @(1 + 2);
}); 
```

此时，您将能够将此“脚本文件”添加到您的站点：

```
<script type="text/javascript" scr="@Url.Action("GetActions", "Home")"></script> 
```

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T19:07:16.450

如果您想要根路径，请在布局上使用变量并在 JavaScript 文件中使用该变量，例如

```
// In layout view
<script>
  var rootPath = @Url.Content("~/")
</script> 
```

用户`rootPath`应用程序 JavaScript 文件中的任何位置

如果您想获得带有动作的控制器的完整路径，那么

```
// View
<script>
  var url = @Url.Content("ActionName", "ControllerName")
</script> 
```

在你的 JavaScript 文件中使用 url。

# java - 删除特定侦听器

> ID：13948389
> 
> 赞同：1
> 
> 时间：2012-12-19T08:38:53.593
> 
> 标签：java, listener, software-design

目前我遇到了以下问题：我们在项目中使用了一些第三方库，并且有一个模型支持添加和删除（不获取！）某些类型的侦听器。问题是添加侦听器然后将其删除到其他地方，我们没有它的实例。解决方案之一是：制作它`singleton`以便您可以添加它并删除相同的实例（但这很难看，恕我直言）。第二个如下：

```
class MyListener implements CoolThirdPartyModelListener{
...
  @Override
  public boolean equals(Object obj){
    if (obj == null){
      return false;
    }
    if(obj == this){
      return true;
    }
    return obj instanceof MyListener;
  }
} 
```

并通过调用将其从侦听器列表中删除：

```
coolThirdPartyModelInstance.removeListener(new MyListener()); 
```

但是第二个有丑陋的`equals()`方法：（我被告知以这种方式删除听众有点棘手。

所以我想问问你对这两个变体的看法，也许（那太棒了）你可以建议一些比我发现的更酷的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:53:44.983

您可以引入某种单例管理器，而不是使用单例侦听器，如下所示：

```
interface CoolThirdPartyListenerManager {
    public void addListenerForModel(CoolThirdPartyModel model, CoolThirdPartyModelListener listener);
    /*
     * return value should indicate success of operation, i.g. return false if no
     * listeners were added to model.
     * it can also throw some sort of exception, if it suits your needs better.
     */
    public boolean removeListenerFromModel(CoolThirdPartyModel model);
} 
```

（或者你可以用一堆静态方法创建一个类）

内部实现可以有类似的东西

```
private Map<CoolThirdPartyModel, CoolThirdPartyModelListener> mAddedListeners; 
```

它将存储为特定模型添加的侦听器实例。

然后，`removeListenerFromModel()`您可以获取侦听器，该侦听器是从地图中为该模型添加的并将其删除。

# java - 通过映射将 2 个列表合并为 1 个列表

> ID：13948391
> 
> 赞同：1
> 
> 时间：2012-12-19T08:39:00.300
> 
> 标签：java

我有两个列表，每个列表都包含来自 sql 查询的行，其中包含 2 个元素（列）运算符和 id 我想用两个列表映射运算符并打印两个列表中的 id（对应于两个列表中的运算符的 id 将不同）

在这种情况下，操作员不能成为关键。

```
 **List 1**            **Lists 2**
  operator1, id1       operator4, id7
  operator1, id2       operator3, id8
  operator2, id3       operator2, id9
  operator2, id4       operator2, id10
  operator3, id5       operator1, id11
  operator4, id6       operator1, id12 
```

最终输出应该是这样的

```
 **List3**
operator1, id1,id2,id11,id12
operator2, id3,id4,id9,id11
operator3, id5,id8
operator4, id6,id7 
```

我可以通过什么方式实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:58:27.687

而不是 List3 创建一个地图作为目标源。Map 将以运算符为键，以逗号分隔的 id 作为值。

*   通过迭代读取列表的内容。
*   用逗号作为分隔符分割内容。
*   如果地图中不存在运算符，则添加它，否则读取值，附加 id 并将其放回地图中。
*   最后，只需迭代地图以打印您需要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:01:59.230

最简单的方法是使用 Map 按运算符进行分组。实际上，您可以使用 Map 而不是 List，但您也可以遍历 map 以附加键和值并将它们插入回列表中。您可以使用以下代码来实现您想要的结果。

```
public static void main(String[] args) {
    List<Object> list1 = new ArrayList<Object>();
    list1.add("operator1, id1");
    list1.add("operator1, id2");
    list1.add("operator2, id3");
    list1.add("operator2, id4");
    list1.add("operator3, id5");
    list1.add("operator4, id6");

    List<Object> list2 = new ArrayList<Object>();
    list2.add("operator4, id7");
    list2.add("operator3, id8");
    list2.add("operator2, id9");
    list2.add("operator2, id10");
    list2.add("operator1, id11");
    list2.add("operator1, id12");

    Map<String, String> map = new HashMap<String, String>();
    List<Object> list3 = new ArrayList<Object>();

    Iterator<Object> it1 = list1.iterator();
    Iterator<Object> it2 = list2.iterator();

    while (it1.hasNext() && it2.hasNext()) {
        String[] line1 = ((String) it1.next()).split(",");
        map.put(line1[0], map.get(line1[0]) == null ? line1[1] : map.get(line1[0]) + ", " + line1[1]);

        String[] line2 = ((String) it2.next()).split(",");
        map.put(line2[0], map.get(line2[0]) == null ? line2[1] : map.get(line2[0]) + ", " + line2[1]);
    }

    for (Map.Entry<String, String> entry : map.entrySet()) {
        String item = entry.getKey() + "," + entry.getValue();
        System.out.println(item);
        list3.add(item);
    }
} 
```

运行上面的代码后，结果将是：

```
operator4, id6,  id7
operator1, id1,  id2,  id11,  id12
operator3, id5,  id8
operator2, id3,  id4,  id9,  id10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:13:22.920

一种稍微紧凑且可能有用的方法：

```
Map<String, List<String>> map = new HashMap<String, List<String>>();
for ( List<String> list : lists ) // List1 and List2 specifically
{
    for ( String s : list )
    {
        if ( map.get( getOperator( s ) ) == null ) 
        { 
            map.put( getOperator( s ) , new ArrayList<String>() ); 
        }
        map.get( getOperator( s ) ).add( getId( s );
    }
}

map.entrySet(); // will be a more useful version of your List3 
```

方法`getOperator( String )`和`getId( String )`做的很明显。

# android - cocos2d-x 使用 pugixml 解析 android 上的 xml 错误 'void* pugi::impl::(anonymous namespace)::xpath_allocator::allocate(size_t)'

> ID：13948398
> 
> 赞同：0
> 
> 时间：2012-12-19T08:39:26.620
> 
> 标签：android, c++, xml-parsing, cocos2d-x

我使用 pugixml 解析 xml，它在 ios 上运行良好。但是，当我更改为 android 时，使用 './build_native.sh' (cocos2d-x for android) 来构建我的项目。有一些错误：

```
pugi/pugixml.cpp: In member function 'void* pugi::impl::(anonymous namespace)::xpath_allocator::allocate(size_t)'
pugi/pugixml.cpp:5722:26: error: exception handling disabled, use -fexceptions to enable 
```

有人可以帮助我。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:45:28.173

你有两个选择：

1.  如果您的平台支持，则使用 -fexceptions 启用异常处理
2.  `#define PUGIXML_NO_EXCEPTIONS`通过添加或添加到`pugiconfig.hpp`您的构建设置来禁用 pugixml 中的异常处理。

# mysql - MySQL用FK表中的数据替换结果表中的外键

> ID：13948407
> 
> 赞同：12
> 
> 时间：2012-12-19T08:40:03.763
> 
> 标签：mysql, sql, database

我有一张这样的桌子：

```
id (PK)   name    teacher (FK)    student (FK)
   1      Ron         3               6 
```

老师和学生都在另一个名为 的表中`people`。

```
 people
 id (PK)   name   age
    3      Ali    42
    6      Jon    12 
```

我想执行查询以获得以下信息

```
name    teacher's name   student's name
 Ron         Ali              Jon 
```

这可能吗？我知道我可以执行两个单独的连接，但是我只剩下两行，没有迹象表明哪个名字是老师，哪个是学生

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T08:43:34.380

```
select t.name, p1.name teacher_name, p2.name student_name 
       from t
left join people p1 on (t.teacher=p1.id)
left join people p2 on (t.student=p2.id) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T08:44:45.213

试试这个：

```
SELECT a.name, b.name 'teacher name', c.name 'student name'
FROM mainTablle a 
LEFT JOIN people b ON a.teacher = b.id 
LEFT JOIN people c ON a.student = c.id 
WHERE a.id = 1; 
```

# breeze - 验证导航属性、错误或功能？

> ID：13948409
> 
> 赞同：3
> 
> 时间：2012-12-19T08:40:10.283
> 
> 标签：breeze

我在验证导航属性时遇到问题。我不知道这是一个错误还是没有按我的预期工作。

当您的外键（在我的情况下为 int 类型）需要导航属性时，成功添加了验证器，并且作为 int 不能为空，分配默认值 0，但在验证实体时，作为属性具有值 (0)，给出正确的值。我预计该实体无效。

这是错误还是正确的行为？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T01:02:45.997

这**是**一个很好的问题。我不认为这是一个错误或功能。我也不会考虑异步验证选项。

相反，我会在 FK（或属性）上添加自定义验证，声明 FK 属性在为 0 时无效。是的，这意味着实体在创建时处于无效状态。对此无能为力。您使用“0”作为标记值，​​表示“*我还不知道*”。验证意味着“ *……在我知道之前，实体是无效的。* ”

顺便说一句，Breeze 不能假设 0 是无效的。这可能是相关实体的有效 FK。

这个问题并不是 FK 独有的。您在使用“数量=0”创建新订单项目时拥有它，并且您的业务规则说它必须大于 0。该类型要求您指定 SOMETHING ，但您无法*先验地*提供正确答案。同样，Breeze 不能假设 '0' 是一个坏值。你必须指定。

*在这两种情况下，本身*都没有错误。两者都需要开发人员额外关注“做正确的事”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:28:29.707

这是个好问题。

Breeze 无法在不执行数据存储/数据库往返的情况下单独验证外键，如果这样做，验证将成为异步操作。目前，Breeze 不支持异步验证，但是，在某些情况下，这可能正是您想要的。

我们需要解决异步验证的一些问题。最重要的是，在第一次验证完成之前，可能会发生另一个操作，例如保存或重新查询或对 fk 字段的另一个更改。这些都可以处理，但有额外的复杂性。

如果您认为这将是一个有用的补充，请将其添加到[Breeze UserVoice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/filters/top)。我们认真对待这些意见。

# html - 如何缓慢移动帆布车速表指针？

> ID：13948410
> 
> 赞同：8
> 
> 时间：2012-12-19T08:40:16.183
> 
> 标签：html, canvas, html5-canvas, image-rotation

我使用以下代码为我的速度计在画布中移动图片。

```
var meter = new Image,
    needle = new Image;
window.onload = function () {
    var c = document.getElementsByTagName('canvas')[0];
    var ctx = c.getContext('2d');
    setInterval(function () {
        ctx.save();
        ctx.clearRect(0, 0, c.width, c.height);
        ctx.translate(c.width / 2, c.height / 2);
        ctx.drawImage(meter, -165, -160);
        ctx.rotate((x * Math.PI / 180);
        / x degree   
            ctx.drawImage( needle, -13, -121.5 );
            ctx.restore();
        },50);
    };
    meter.src = 'meter.png';
    needle.src = 'needle.png';
} 
```

但是，我想将针慢慢移动到我输入的程度，例如速度测试网页。任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T08:56:27.353

像这样的东西应该工作：

```
var meter = new Image,
    needle = new Image;
window.onload = function () {
    var c = document.getElementsByTagName('canvas')[0],
        ctx = c.getContext('2d'),
        x,        // Current angle
        xTarget,  // Target angle.
        step = 1; // Angle change step size.

    setInterval(function () {
        if(Math.abs(xTarget - x) < step){
            x = xTarget; // If x is closer to xTarget than the step size, set x to xTarget.
        }else{
            x += (xTarget > x) ?  step : // Increment x to approach the target.
                 (xTarget < x) ? -step : // (Or substract 1)
                                  0;
        }
        ctx.save();
        ctx.clearRect(0, 0, c.width, c.height);
        ctx.translate(c.width / 2, c.height / 2);
        ctx.drawImage(meter, -165, -160);
        ctx.rotate((x * Math.PI / 180); // x degree  
            ctx.drawImage( needle, -13, -121.5 );
            ctx.restore();
        },50);
    };
    dial.src = 'meter.png';
    needle.src = 'needle.png';
} 
```

我在`if / else`这里使用速记来确定是添加`1`到`x`、减法`1`还是什么都不做。从功能上讲，这与以下内容相同：

```
if(xTarget > x){
    x += step;
}else if(xTarget < x){
    x += -step;
}else{
    x += 0;
} 
```

但它更短，而且在我看来，只要你知道 if ([三元运算符](http://msdn.microsoft.com/en-us/library/ie/be21c7hw%28v=vs.94%29.aspx)) 的简写是什么样子，它就很容易阅读。

请记住，此代码假定`x`是一个整数值（所以，不是浮点数，只是一个四舍五入的 int）。

# php - 如何禁止致命错误：调用成员函数？

> ID：13948412
> 
> 赞同：-4
> 
> 时间：2012-12-19T08:40:21.347
> 
> 标签：php, magento

> **可能重复：**
> [Mage::registry('current_category') 会返回 NULL 的任何原因？](https://stackoverflow.com/questions/6264514/any-reason-why-mageregistrycurrent-category-would-return-null)
> [参考 - 这个错误在 PHP 中是什么意思？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

致命错误：在...中的非对象上调用成员函数 getParentCategory()

编码：

```
$_category_detail=Mage::registry('current_category');
$id=$_category_detail->getParentCategory()->getId(); 
```

现在，当页面不能使用 getParentCategory() 我使用以下但不能工作。

```
 if( isset(getParentCategory()){
        $id=$_category_detail->getParentCategory()->getId();  
    } 
```

为什么？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:42:16.497

看起来那`$_category_detail`不是一个对象。因此`Mage::registry('current_category')`不返回对象。

它很可能在失败时返回某种`NULL`或值。`false`而 PHP 让你注意到这`(NULL)->getParentCategory()`是毫无意义的。

在您的特定情况下，它返回 NULL 因为`current_category`未在您的注册表中设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:43:37.523

您需要使用`method_exists()`而不是尝试调用不存在的函数：

```
if (method_exists($_category_detail, "getParentCategory")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:43:41.773

isset() 只检查成员变量。使用 method_exists()。

PHP 手册： http: [//php.net/manual/de/function.method-exists.php](http://php.net/manual/de/function.method-exists.php)

```
if (method_exists($_category_detail, 'getParentCategory')) {
    $id = $_category_detail->getParentCategory()->getId()
} 
```

# xsd - 解组从两个 XSD 生成的 XML

> ID：13948413
> 
> 赞同：2
> 
> 时间：2012-12-19T08:40:23.300
> 
> 标签：xsd, jaxb2

这里有两个xsd的定义，几乎90%相似。下面是第一个xsd的骨架：

```
XSD1 :

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="apf2doc">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="request"/>
                <xs:element ref="account"/>
                <xs:element ref="financial_transaction"/>
                <xs:element ref="event_data" minOccurs="0"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

第二个xsd是：

```
XSD2:

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="apf2doc">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="request"/>
                <xs:element ref="account"/>
                <xs:element ref="message"/>
                <xs:element ref="event_data" minOccurs="0"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

现在这两个 xsd 在两个不同的包中生成两组类。我正在使用 JAXB 来解组收到的 xml。xmls 是从这两个 xsd 生成的。

在创建 JAXB 上下文时，它会引发错误，因为我相信大多数类都会导致冲突。

这是错误跟踪：

```
The element name {}userid has more than one mapping. This problem is related to the     following location: 
at public javax.xml.bind.JAXBElement   
generated.order.ObjectFactory.createUserid(java.lang.String) at   
generated.order.ObjectFactory this problem is related to the following location:
at public javax.xml.bind.JAXBElement   
generated.usage.ObjectFactory.createUserid(java.lang.String) at 
generated.usage.ObjectFactory 
```

如果有人可以建议我任何解决方案，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:04:57.090

由于您的 2 个 XML 模式具有具有相同名称和名称空间的全局元素，因此您将无法`JAXBContext`在两个模型上创建一个。您可以执行以下操作之一：

1.  `JAXBContext`为每个模型创建一个单独的。
2.  使用名称空间来区分这 2 个 XML 模式。

# listview - android 单声道中的 AddTextChangedListener

> ID：13948428
> 
> 赞同：2
> 
> 时间：2012-12-19T08:41:22.350
> 
> 标签：listview, xamarin.android, filtering, textchanged

我有一个用于填充列表视图的数据库。在此列表视图上方有一个编辑文本，用户在其中搜索列表视图中的项目。根据输入，我希望对列表视图进行细化和过滤，以仅包含与输入相似的项目。这在 java 中很简单，但在 xamarin 的单声道中很难。这是我的 onCreate() 方法，数据库填充列表视图。

```
string[] categories;
protected override void OnCreate (Bundle bundle)
{
    base.OnCreate (bundle);
    SetContentView(Resource.Layout.b);
    var destPath = Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "DDxDDB"); 
    System.IO.Stream source = Assets.Open("DDxDDB");
    var dest = System.IO.File.Create (destPath);
    source.CopyTo (dest); 
    var sql = "SELECT _id FROM Sx;";
    var conn = new SqliteConnection ("Data Source=" + destPath.ToString());
    conn.Open ();
    var cmd = conn.CreateCommand ();
    cmd.CommandText = sql;
    SqliteDataReader reader = cmd.ExecuteReader ();
    List<string> categ = new List<string>();
    while (reader.Read()) 
    {
        categ.Add(reader.GetString(0));
    }
    categories = categ.ToArray();
    ArrayAdapter<string> dataAdapter = new ArrayAdapter<String>(this, Resource.Layout.Main, categories);
    ListView listView = (ListView) FindViewById(Resource.Id.listView1);
    listView.Adapter = dataAdapter; 
    listView.TextFilterEnabled = true;
    EditText myFilter = (EditText)FindViewById(Resource.Id.myFilter);
    myFilter.AddTextChangedListener(New MyTextWatcher);    
} 
```

这是我也包含在此活动中的类，但我不知道将哪些代码添加到方法中以导致我过滤列表视图。

```
public class MyTextWatcher: Java.Lang.Object, ITextWatcher
{
    public void AfterTextChanged(IEditable s) {}
    public void BeforeTextChanged(Java.Lang.ICharSequence arg0, int start, int count, int after) {}
    public void OnTextChanged(Java.Lang.ICharSequence arg0, int start, int before, int count) {}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T23:29:25.947

正如 aaronmix 所说`EditText`，您可以使用三个事件，而不必实现一个`ITextWatcher`类。

因此，您可以附加`EventHandler`到`AfterTextChanged`并`Editable`从以下参数中获取`Event`：

```
var editText = FindViewById<EditText>(Resource.Id.MyEditText);
editText.AfterTextChanged += (sender, args) =>
{
    //do your stuff in here
    //args.Editable is the equivalent of the `s` argument from Java
    //afterTextChanged(Editable s)
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:07:56.797

在 Mono for Android 的实现中，`EditText`已经有三个事件和`TextChanged`，因此您可以为每个事件添加委托。`AfterTextChanged``BeforeTextChanged`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:37:22.573

是的，谢谢你们俩的帮助。我正在做类似的事情，而且效果很好。这里是：

```
string[] categories;

protected override void OnCreate (Bundle bundle)
{
    base.OnCreate (bundle);
    SetContentView(Resource.Layout.b);
    var destPath = Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "DDxDDB"); 
    System.IO.Stream source = Assets.Open("DDxDDB");
    var dest = System.IO.File.Create (destPath);
    source.CopyTo (dest); 
    var sql = "SELECT _id FROM Sx;";
    var conn = new SqliteConnection ("Data Source=" + destPath.ToString());
    conn.Open ();
    var cmd = conn.CreateCommand ();
    cmd.CommandText = sql;
    SqliteDataReader reader = cmd.ExecuteReader ();
    List<string> categ = new List<string>();
    while (reader.Read()) 
    {
        categ.Add(reader.GetString(0));
    }
    categories = categ.ToArray();
    ArrayAdapter<string> dataAdapter = new ArrayAdapter<String>(this, Resource.Layout.Main, categories);
    ListView listView = (ListView) FindViewById(Resource.Id.listView1);
    listView.Adapter = dataAdapter; 
    listView.TextFilterEnabled = true;
    EditText myFilter = (EditText)FindViewById(Resource.Id.myFilter);
    myFilter.TextChanged += new EventHandler<TextChangedEventArgs>(OnTextChange);
}

public void OnTextChange(object sender, EventArgs e)
{           
    EditText myFilter = (EditText)FindViewById(Resource.Id.myFilter);
    string val = myFilter.Text.ToString();
    List<string> categ2 = new List<string>();
    foreach (string value in categories) 
    {
        if (value.IndexOf(val, StringComparison.CurrentCultureIgnoreCase) != -1)
        {
            categ2.Add(value);
        }
    }
    string[] categories2 = categ2.ToArray();
    ArrayAdapter<string> dataAdapter = new ArrayAdapter<String>(this, Resource.Layout.Main, categories2);
    ListView listView = (ListView) FindViewById(Resource.Id.listView1);
    listView.Adapter = dataAdapter; 
    listView.TextFilterEnabled = true;
} 
```

# c# - 查找两个文件夹的差异并删除文件

> ID：13948432
> 
> 赞同：-4
> 
> 时间：2012-12-19T08:41:39.897
> 
> 标签：c#, performance, file-io

我有两个文件夹：FolderA 和 FolderB 我想删除 FolderA 中也存在于 FolderB 中的文件。（即常用文件将从文件夹A中删除）

如何在 C# 中最有效地做到这一点？（这是项目中的一个关键点，它必须尽可能高效）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:49:17.720

这是简单、易读且高效的：

```
var common = from f1 in Directory.EnumerateFiles(folderA, "*.*", SearchOption.AllDirectories)
             join f2 in Directory.EnumerateFiles(folderB, "*.*", SearchOption.AllDirectories)
             on Path.GetFileName(f1) equals Path.GetFileName(f2)
             select f1;

foreach (string file in common)
{
    File.Delete(file);
} 
```

假设您只想比较文件名（和扩展名）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:48:56.003

您可以在 LINQ 的帮助下做到这一点。见[这里](http://msdn.microsoft.com/en-us/library/bb546137.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:49:46.660

如果您只想比较文件名，可以这样做，我对此代码进行了快速测试，它可以工作：

```
 string pathA = @"C:\New FolderA";
        string pathB = @"C:\New FolderB";

        var filesA = Directory.GetFiles(pathA).Select(path => Path.GetFileName(path));
        var filesB = Directory.GetFiles(pathB).Select(path => Path.GetFileName(path));

        var toBeDeleted = filesA.Intersect(filesB);
        foreach (string filename in toBeDeleted)
            File.Delete(Path.Combine(pathA, filename)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:51:07.520

```
 string[] FolderAFiles = Directory.GetFiles(@"Path");
            string[] FolderBFiles = Directory.GetFiles(@"BPath");
            foreach (string Files in FolderAFiles)
            {
                if (FolderBFiles.Contains(Files))
                {
                    File.Delete(Files);
                }
            } 
```

试试这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T08:55:58.467

这是另一种解决方案。

```
var filesInB = System.IO.Directory.GetFiles("FolderB");
Array.ForEach(System.IO.Directory.GetFiles("FolderA"), delegate(string fileName){
    if (filesInB.Contains(fileName)) System.IO.File.Delete(fileName);
}); 
```

# windows - Sharepoint 2010 本地 - 登录

> ID：13948433
> 
> 赞同：0
> 
> 时间：2012-12-19T08:41:42.950
> 
> 标签：windows, iis, networking, sharepoint-2010, localhost

我正在尝试设置本地 Sharepoint Server 2010 以进行测试。我以前从未与 SP 合作过，但这是根据客户的要求。我是“边做边学”的忠实拥护者。

一切都设置得很好，但是当我尝试访问管理中心站点时，它一直在询问我的用户名和密码，我不知道那是什么。有什么我在某处遗漏或忘记设置的东西。我在 IIS 设置中启用了匿名登录，但这似乎没有任何区别。

我使用标准 Windows 用户“Morten”登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:40:10.113

您是否使用 Domail Controller Active Directory 用户登录？

如果是，则检查您的 PC 在域控制器中是否可用

还要检查，

转到 IIS > 您的站点 > 右键单击​​您的站点，然后转到高级设置 > 检查 Process Model Section 下的 Identiy。

它应该与您的登录名相同。

让我知道结果

# wcf - WCF 轮询双工绑定的可靠性

> ID：13948435
> 
> 赞同：2
> 
> 时间：2012-12-19T08:41:49.233
> 
> 标签：wcf, silverlight, duplex, pollingduplexhttpbinding

我有一个用于 silverlight 客户端的 WCF 轮询双工服务。我想为服务添加可靠性，但首先我得到了这个错误。

> 传出消息的消息版本 (Soap11 (http://schemas.xmlsoap.org/soap/envelope/) AddressingNone (http://schemas.microsoft.com/ws/2005/05/addressing/none)) 不匹配编码器（Soap12 (http://www.w3.org/2003/05/soap-envelope) Addressing10 (http://www.w3.org/2005/08/addressing)）。确保绑定配置为与消息相同的版本。

我更改了配置文件，现在出现以下错误。WCF 轮询双工是否支持可靠性？

> 服务参考配置中无法识别的元素“reliableSession”。请注意，Silverlight 中只有一部分 Windows Communication Foundation 配置功能可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:04:43.470

我认为问题不在于 WCF 轮询双工的使用，而在于 Silverlight。它仅支持 WCF 的一个子集，并且根据[本文](http://msdn.microsoft.com/en-us/library/cc896571%28v=vs.95%29.aspx)不支持可靠会话。报价单：

“更高级的绑定和绑定元素，例如处理队列、**可靠会话**、事务、消息级安全性（例如 WS-Security）、对等消息传递以及 HTTP、HTTPS 和 TCP 以外的传输Silverlight 4 中没有提供。”

# java - Java 日历，行为不同 OSX Windows

> ID：13948436
> 
> 赞同：6
> 
> 时间：2012-12-19T08:41:50.470
> 
> 标签：java, windows, macos, jsp, jdk1.6

基本上我已经使用 java servlet 构建了一个约会调度程序 webapp。它严重依赖于 javas 日历。整个事情是在我的macbook上用jdk 1.6运行山狮开发的。

现在在我的电脑上测试它时，我得到了一些奇怪的结果。

跑步：

```
 System.out.println("selected = "+selected);
   Calendar now  = Calendar.getInstance();
        System.out.println("a "+now.getTime());
    now.setTimeInMillis(selected);
        System.out.println("b "+now.getTime());

    now.set(Calendar.MILLISECOND,0);
    now.set(Calendar.SECOND,0);
    now.set(Calendar.MINUTE,0);
    now.set(Calendar.HOUR_OF_DAY,6);//start from 6am
        System.out.println("d "+now.getTime());

    now.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
        System.out.println("e "+now.getTime()); 
```

在 PC 上将输出：

```
 selected = 1355835600000
    a Wed Dec 19 19:35:36 EST 2012
    b Wed Dec 19 00:00:00 EST 2012
    d Wed Dec 19 06:00:00 EST 2012
    e Sun Dec 23 06:00:00 EST 2012 
```

然而在mac上它会输出：

```
 selected = 1355835600000
    a Wed Dec 19 19:33:57 EST 2012
    b Wed Dec 19 00:00:00 EST 2012
    d Wed Dec 19 06:00:00 EST 2012
    e Sun Dec 16 06:00:00 EST 2012 
```

正如我们在这里看到的，如果我根据这些值构建一个代表每周计划的表，则 mac 将在本周包含的星期日早上 6 点开始。但是电脑将在下周包含的星期日早上 6 点开始。

这意味着我创建的任何约会在电脑上都不同步（与预期不同的日子）注意：电脑已经过 jdk1.6 和 jdk1.7 测试

有谁知道这背后的任何解决方案或原因？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:05:00.227

可能这是一个区域设置/时区问题，可能在两台机器上有所不同。
通过硬编码确保两个实例使用相同的语言环境，例如：

```
Calendar.getInstance(Locale.US); 
```

否则 getInstance() 将使用您系统的默认语言环境。

# macos - 如何在沙盒应用程序中添加快速查看生成器？

> ID：13948437
> 
> 赞同：2
> 
> 时间：2012-12-19T08:41:55.010
> 
> 标签：macos, cocoa, sandbox, quicklook

我为我的应用程序创建了一个 QuickLook 生成器，并`Containers/com.Aravindh.EgApp/Data/Library/QuickLook/QuickLookGenerator.qlgenerator`使用以下代码将 quicklook 生成器复制到了这个位置。

```
 NSString *path1 = [[NSBundle mainBundle] pathForResource:@"QuickLookGenerator" ofType:@"qlgenerator"];
    NSError *error;
    NSArray *paths = [[NSFileManager defaultManager] URLsForDirectory:NSLibraryDirectory inDomains:NSUserDomainMask];
    NSString *librayPath = [[paths objectAtIndex:0] path];
    librayPath = [NSString stringWithFormat:@"%@/Quicklook/QuickLookGenerator.qlgenerator",librayPath];
    if(![[NSFileManager defaultManager] fileExistsAtPath:librayPath]) {
        [[NSFileManager defaultManager] copyItemAtPath:path1 toPath:librayPath error:&error];
    } 
```

但我收到此错误：

```
Error Domain=NSCocoaErrorDomain Code=513 "“QuickLookGenerator.qlgenerator” couldn’t be copied because you don’t have permission to access “QuickLook”." UserInfo=0x101518250 {NSSourceFilePathErrorKey=/Users/Aravindh/Desktop/EgApp/EgApp/build/Release/EgApp.app/Contents/Resources/QuickLookGenerator.qlgenerator, NSUserStringVariant=(
    Copy
), NSDestinationFilePath=/Users/Aravindh/Library/Containers/com.Aravindh.EgApp/Data/Library/Quicklook/QuickLookGenerator.qlgenerator, NSFilePath=/Users/Aravindh/Desktop/EgApp/EgApp/build/Release/EgApp.app/Contents/Resources/QuickLookGenerator.qlgenerator, NSUnderlyingError=0x10154dbb0 "The operation couldn’t be completed. Operation not permitted"} 
```

我是否必须在 Entitlementes.plist 中提及任何内容？如何在沙盒环境中安装 QuickLookGenerator？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T08:48:33.370

您无需将 QuickLook 插件复制到`~/Library/QuickLook`. [如果它在，`YourApp.app/Contents/Library/QuickLook/`](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/Quicklook_Programming_Guide/Articles/QLArchitecture.html#//apple_ref/doc/uid/TP40005020-CH4-SW4)那么系统将使用它 - 这适用于沙箱，因为除了将插件与您的应用程序捆绑在一起之外，您不需要做任何事情。

# java - 如何在多个文件中分解 Android 活动

> ID：13948438
> 
> 赞同：9
> 
> 时间：2012-12-19T08:42:00.297
> 
> 标签：java, android

在 Android 中，很多功能都在`Activity`派生类中。当一个活动变得很大（有很多事件处理程序等）时，Java 文件会变得很大并且非常混乱。

有没有办法“分解”一个 Java 类代码文件，就像 C# 有`partial`关键字一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:47:33.370

简短的回答？不。

引用自[维基百科](http://en.wikipedia.org/wiki/Comparison_of_Java_and_C_Sharp)

Sun Microsystems Java 编译器要求源文件名必须与其中唯一的公共类匹配，而 C# 允许同一文件中有多个公共类，并且对文件名没有限制。C# 2.0 及更高版本允许通过在源代码中使用 partial 关键字将类定义拆分为多个文件。在 Java 中，公共类总是在它自己的源文件中。在 C# 中，源代码文件和逻辑单元分离并不是紧密相关的。

因此，虽然您可能会重新设计您的设计并将某些代码归类为实用程序类以整理代码，但您不能在 java 中将单个类的代码分离到两个文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:00:16.863

正如其他人指出的那样，您不能拆分实际文件（我认为这是一件好事）。

您可以在自定义视图和片段中提取与视图相关的功能。其他所有内容（业务逻辑、Web 服务访问、数据库访问等）都可以在您在活动中使用的“帮助”类中。尽管 Activity 是 Android 中的上帝对象，但您不必在实际的 Activity 类中编写所有内容。它应该只协调东西并实现必要的回调和事件处理程序（从技术上讲，它们也可以在它们自己的类中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:49:47.587

不可以。Java 源代码不能跨多个文件拆分。

来自[http://en.wikipedia.org/wiki/Comparison_of_Java_and_C_Sharp](http://en.wikipedia.org/wiki/Comparison_of_Java_and_C_Sharp)

Sun Microsystems Java 编译器要求源文件名必须与其中唯一的公共类匹配，而 C# 允许同一文件中有多个公共类，并且对文件名没有限制。C# 2.0 及更高版本允许通过在源代码中使用 partial 关键字将类定义拆分为多个文件。在 Java 中，公共类总是在它自己的源文件中。在 C# 中，源代码文件和逻辑单元分离并不是紧密相关的。

# android - 如何显示 Eclipse 的控制台输出？

> ID：13948440
> 
> 赞同：0
> 
> 时间：2012-12-19T08:42:12.673
> 
> 标签：android, console

我使用 Java 输入 XML 内容。目前它只显示输出的最后一部分，第一部分看不到。

如何向控制台显示 Eclipse 的所有输出？我在哪里可以设置这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:44:59.550

不幸的是，eclipse 不能显示你所有的输出（甚至 logcat 也不能​​这样做）。要显示所有 put，您需要实现一个记录器，该记录器可以在某处写入和保存所有输出。

查看本教程以了解如何操作 [http://www.tutorialspoint.com/log4j/log4j_sample_program.htm](http://www.tutorialspoint.com/log4j/log4j_sample_program.htm)

# .net - 如何重构同时使用 Serialisable 和 DataContract 的项目以仅使用 DataContract

> ID：13948444
> 
> 赞同：1
> 
> 时间：2012-12-19T08:42:31.497
> 
> 标签：.net, refactoring, datacontractserializer, datacontract, serializable

我有一个项目，它使用`DataContractSerializer`. 不幸的是，并非所有可持久类都带有标签`DataContract`-有些带有标签，`Serializable`有些带有两者。

我想删除`Serializable`引用并仅`DataContract`用于所有可持久对象，但我不知道该怎么做。

如何重新标记类，以便我可以反`Serializable`序列化 using 然后序列化 using `DataContract`？

# cocos2d-x - 如何在 Cocos2d X 中制作在线 2 人游戏？

> ID：13948449
> 
> 赞同：-4
> 
> 时间：2012-12-19T08:42:58.553
> 
> 标签：cocos2d-x, multiplayer

我制作了一款像《洛克人》这样的平台游戏，希望人们能够相互联系，一起玩。它必须适用于 Android 和 Iphone。我正在使用 Cocos2d X，因此很难找到不使用已弃用或删除的方法/对象的好信息。

什么是简单的方法并获得足够的 fps 使其看起来不错？

编辑：人们只是对这个问题投了反对票，这很糟糕，因为我真的不知道如何更好地指定它。我不知道如何开始。感谢大家投票！:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:08:25.800

```
with help of apple game center you can implement multiplayer very early.

for example

#import <Foundation/Foundation.h>
#import <GameKit/Gamekit.h>

@interface GCHelper : NSObject<GKMatchmakerViewControllerDelegate, GKMatchDelegate>
{
    BOOL isUserAuthenticated;

    UIViewController *presentingViewController;
    GKMatch *match;
    BOOL matchStarted;

    GKInvite *pendingInvite;
    NSArray *pendingPlayersToInvite;
    NSMutableDictionary *playersDict;

    NSString *MultiplayerID;
    NSData *MultiData;
    NSString *otherPlayerID;

    char AlertMessageBoxNo;

    BOOL isDataRecieved;
}

//variables

@property (assign, readonly) BOOL gameCenterAvailable;
@property (retain) UIViewController *presentingViewController;
@property (retain) GKMatch *match;
@property (retain) GKInvite *pendingInvite;
@property (retain) NSArray *pendingPlayersToInvite;
@property (retain) NSMutableDictionary *playersDict;

@property (retain) NSString *MultiplayerID;
@property (retain) NSData *MultiData;

-(NSString*)getOtherPlayerId;
-(void)setOtherPlayerId;
//Functions
+ (GCHelper *)sharedInstance;
-(BOOL)isGameCenterAvailable;
-(void)authenticationChanged;
-(void)authenticateLocalUser;

-(void)gameOver:(NSString*)message;

-(void)setDataRecieved:(BOOL)d;
-(BOOL)getDataRecieved;

- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController;

///////////

#import "GCHelper.h"
#import "IPadSharebleClass.h"

@implementation GCHelper

@synthesize gameCenterAvailable;
@synthesize presentingViewController;
@synthesize match;
@synthesize pendingInvite;
@synthesize pendingPlayersToInvite;
@synthesize playersDict;
@synthesize MultiData;
@synthesize MultiplayerID;

static GCHelper *sharedHelper = nil;

+(GCHelper *) sharedInstance
{
    if (!sharedHelper)
    {
        sharedHelper = [[GCHelper alloc] init];
    }
    return sharedHelper;
}

- (BOOL)isGameCenterAvailable
{
    Class gcClass = (NSClassFromString(@"GKLocalPlayer"));
    NSString *reqSysVer = @"4.1";
    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
    BOOL osVersionSupported = ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending);
    return (gcClass && osVersionSupported);
}

- (id)init
{
    if ((self = [super init]))
    {
        gameCenterAvailable = [self isGameCenterAvailable];
        if (gameCenterAvailable)
        {
            NSNotificationCenter *nc =
            [NSNotificationCenter defaultCenter];
            [nc addObserver:self
                   selector:@selector(authenticationChanged)
                       name:GKPlayerAuthenticationDidChangeNotificationName
                     object:nil];
        }
        else
        {
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Center Not Available" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert show];
            [alert release];
        }
    }
    return self;
}

-(void)authenticationChanged
{
    if ([GKLocalPlayer localPlayer].isAuthenticated && !isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player authenticated.");
        isUserAuthenticated = TRUE;

        [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite)
        {
            NSLog(@"Received invite");
            self.pendingInvite = acceptedInvite;
            self.pendingPlayersToInvite = playersToInvite;
            IPadCallAnyWhereF.inviteReceived();
        };

    }
    else if (![GKLocalPlayer localPlayer].isAuthenticated && isUserAuthenticated)
    {
        NSLog(@"Authentication changed: player not authenticated");
        isUserAuthenticated = FALSE;
    }
}

- (void)authenticateLocalUser
{
    if (!gameCenterAvailable) return;

    NSLog(@"Authenticating local user...");
    if ([GKLocalPlayer localPlayer].authenticated == NO)
    {
        [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];
    }
    else
    {
        NSLog(@"Already authenticated!");
    }
}

-(void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController
{
    if (!gameCenterAvailable) return;

    matchStarted = NO;
    self.match = nil;
    self.presentingViewController = viewController;
    if (pendingInvite != nil)
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];
        mmvc.matchmakerDelegate = self;
        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;
    }
    else
    {
        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
        request.minPlayers = minPlayers;
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
        mmvc.matchmakerDelegate = self;

        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;

    }

}

#pragma mark GKMatchmakerViewControllerDelegate
- (void)matchmakerViewControllerWasCancelled:(GKMatchmakerViewController *)viewController
{
    [presentingViewController dismissModalViewControllerAnimated:YES];

    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Game Cancel By you" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='E';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFailWithError:(NSError *)error
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    NSLog(@"Error finding match: %@", error.localizedDescription);
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Connection Time out" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='A';
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    self.match = theMatch;
    match.delegate = self;
    if (!matchStarted && match.expectedPlayerCount == 0)
    {
        NSLog(@"***************Ready to start match!**************");
        [self lookupPlayers];
    }
}

- (void)lookupPlayers
{
    NSLog(@"Looking up %d players...", match.playerIDs.count);
    [GKPlayer loadPlayersForIdentifiers:match.playerIDs withCompletionHandler:^(NSArray *players, NSError *error)
     {
         if (error != nil)
         {
             NSLog(@"Error retrieving player info: %@", error.localizedDescription);
             matchStarted = NO;
             //IPadCallAnyWhereF.matchEnded();
             UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Error retrieving player info" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
             [alert show];
             [alert release];
             AlertMessageBoxNo='F';
         }
         else
         {
             self.playersDict = [NSMutableDictionary dictionaryWithCapacity:players.count];
             for (GKPlayer *player in players)
             {
                 NSLog(@"Found player: %@", player.alias);
                 [playersDict setObject:player forKey:player.playerID];
             }
             NSLog(@"Total Number of Players : %d",players.count);
             matchStarted = YES;
             IPadCallAnyWhereF.matchStarted();
         }
     }];

}

#pragma mark GKMatchDelegate
- (void)match:(GKMatch *)theMatch didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID
{
    if (match != theMatch) return;

    MultiData=data;
    MultiplayerID=playerID;
    if(otherPlayerID==nil)
    {
        otherPlayerID=[playerID retain];
    }
    IPadCallAnyWhereF.match();
}

-(void)setDataRecieved:(BOOL)d
{
    isDataRecieved=d;
}
-(BOOL)getDataRecieved
{
    return isDataRecieved;
}

-(NSString*)getOtherPlayerId
{
    return otherPlayerID;
}

-(void)setOtherPlayerId
{
    otherPlayerID=nil;
}

- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state
{
    if (match != theMatch) return;
    switch (state)
    {
        case GKPlayerStateConnected:
            NSLog(@"New Player connected!");
            if (!matchStarted && theMatch.expectedPlayerCount == 0)
            {
                NSLog(@"&&&&&&&&&& Ready to start match in the match!");
                [self lookupPlayers];
            }
            break;
        case GKPlayerStateDisconnected:
            NSLog(@"--------Player disconnected!--------");
            matchStarted = NO;
            UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Player Disconnected" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
            [alert show];
            [alert release];
            AlertMessageBoxNo='B';
            //IPadCallAnyWhereF.matchDisconnect();
            break;
    }
}

- (void)match:(GKMatch *)theMatch connectionWithPlayerFailed:(NSString *)playerID withError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Failed to connect to player with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Failed to connect to player" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='C';

}

- (void)match:(GKMatch *)theMatch didFailWithError:(NSError *)error
{
    if (match != theMatch) return;

    NSLog(@"Match failed with error: %@", error.localizedDescription);
    matchStarted = NO;
    //IPadCallAnyWhereF.matchEnded();
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:@"Match failed" delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='D';

}

-(void)gameOver:(NSString*)message
{
    UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"Game Center Alert" message:message delegate:self cancelButtonTitle:@"Try Again" otherButtonTitles:@"Main Menu", nil];
    [alert show];
    [alert release];
    AlertMessageBoxNo='G';
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Try Again"])
    {
        IPadCallAnyWhereF.matchDisconnect();
    }
    else if([title isEqualToString:@"Main Menu"])
    {
        IPadCallAnyWhereF.gotoMainMenu();
    }

} 
```

# c - lib pthread：单线程性能与多线程

> ID：13948457
> 
> 赞同：0
> 
> 时间：2012-12-19T08:43:37.557
> 
> 标签：c, multithreading, pthreads, bioinformatics

（注意：我看到了这篇文章，告诉我这是不是同样的问题：[C：pthread 的性能，低于单线程](https://stackoverflow.com/questions/13874117)）

我正在学习**pthread**库。我编写了同一个 C 程序的两个版本。该程序采用大型[BAM 文件](http://en.wikipedia.org/wiki/Samtools)列表并使用[samtools 库](http://samtools.sourceforge.net/samtools/masterTOC.shtml)计算记录数。

这是**单线程**程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include "bam.h"

/** maximum number of threads */
static const int MAX_COUNT_THREADS=4;

struct Param
    {
    char* filename;
    };

static void printCount(const char* filename,unsigned long count)
    {
    fprintf(stdout,"%s\t%ld\n",filename,count);
    }

static void* scan_bam(void* ptr)
    {
    unsigned long count=0;
    struct Param* params=(struct Param*)ptr;

    bamFile in=bam_open(params->filename, "r") ;
    bam_header_t *header= NULL;
    bam1_t *b=bam_init1();

    time_t rawtime;
    time ( &rawtime );

    fprintf(stderr,"STARTING : %s %s",params->filename,ctime(&rawtime));
    if(in==0)
        {
        fprintf(stderr,"Cannot read %s.\n",params->filename);
        exit(EXIT_FAILURE);
        }
    header= bam_header_read(in);
    while((bam_read1(in, b)) > 0)
        {
        ++count;
        }
    bam_destroy1(b);
    bam_header_destroy(header);
           bam_close(in);

    printCount(params->filename,count);

    time ( &rawtime );
    fprintf(stderr,"end for %s %s",params->filename,ctime(&rawtime));
    free(params);
    return NULL;
    }

int main(int argc,char** argv)
    {
    int optind=1;

    while(optind<argc)
    {
    struct Param* params=(struct Param*)malloc(sizeof(struct Param));

    if(params==0)
        {
        fprintf(stderr,"Out of memory.\n");
        exit(EXIT_FAILURE);
        }
    params->filename=argv[optind++];
    scan_bam(params);
    }
    return EXIT_SUCCESS;
    } 
```

和**多线程程序**。这个程序最多可以使用 5 个线程，并使用条件锁来计算线程数，并告诉主程序在需要时启动一个新线程。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <pthread.h>
#include <time.h>
#include "bam.h"

#define VERIFY_ZERO(a) do {if(a!=0) {\
    fprintf(stderr,"Test failed at %s line %d (ret=%d).\n",__FILE__,__LINE__,a);\
    exit(EXIT_FAILURE);\
    }} while(0)

/** maximum number of threads */
static const int MAX_COUNT_THREADS=5;

struct Param
    {
    pthread_t thread;
    char* filename;
    };

struct GLOBALS {
    /** lock to print */
    pthread_mutex_t mutex_print;
    /** condition: wait for free thread */
    pthread_cond_t  accept_new_thread;
    /** condition lock */
    pthread_mutex_t  accept_new_thread_lock;
    /** number of running threads */
    int number_of_threads;
    };

static struct GLOBALS globals={
    PTHREAD_MUTEX_INITIALIZER,
    PTHREAD_COND_INITIALIZER,
    PTHREAD_MUTEX_INITIALIZER,
    0
    };

static void printCount(const char* filename,unsigned long count)
    {
    int ret=pthread_mutex_lock(&globals.mutex_print);
    VERIFY_ZERO(ret);
    fprintf(stdout,"%s\t%ld\n",filename,count);
    ret=pthread_mutex_unlock(&globals.mutex_print);
    VERIFY_ZERO(ret);
    }

static void* scan_bam(void* ptr)
    {
    unsigned long count=0;
    struct Param* params=(struct Param*)ptr;
    bamFile in=bam_open(params->filename, "r") ;
    bam_header_t *header= NULL;
    bam1_t *b=bam_init1();
    time_t rawtime;
    time ( &rawtime );

    fprintf(stderr,"STARTING : %s %s",params->filename,ctime(&rawtime));
    if(in==0)
        {
        fprintf(stderr,"Cannot read %s.\n",params->filename);
        exit(EXIT_FAILURE);
        }
    header= bam_header_read(in);
    while((bam_read1(in, b)) > 0)
        {
        ++count;

        }
    bam_destroy1(b);
    bam_header_destroy(header);
           bam_close(in);

    printCount(params->filename,count);

    time ( &rawtime );
    fprintf(stderr,"end1 for %s %s",params->filename,ctime(&rawtime));
    pthread_mutex_lock( &globals.accept_new_thread_lock);
    globals.number_of_threads--;
    pthread_cond_signal(&globals.accept_new_thread);
    pthread_mutex_unlock(&globals.accept_new_thread_lock);
    time ( &rawtime );
    fprintf(stderr,"end2 for %s %s",params->filename,ctime(&rawtime));
    free(params);
    return NULL;
    }

int main(int argc,char** argv)
    {
    int optind=1;

    while(optind<argc)
    {
    struct Param* params=(struct Param*)malloc(sizeof(struct Param));
    if(params==0)
        {
        fprintf(stderr,"Out of memory.\n");
        exit(EXIT_FAILURE);
        }
    pthread_mutex_lock(&globals.accept_new_thread_lock);
    while (globals.number_of_threads > MAX_COUNT_THREADS)
        {
            pthread_cond_wait(&globals.accept_new_thread, &globals.accept_new_thread_lock);
        }
    globals.number_of_threads++;
    pthread_mutex_unlock(&globals.accept_new_thread_lock);

    params->filename=argv[optind++];
    fprintf(stderr,"creating %s\n",params->filename);
    pthread_create (&(params->thread), NULL, scan_bam,params);
    pthread_detach(params->thread);

    }
    pthread_mutex_lock(&globals.accept_new_thread_lock);
    while (globals.number_of_threads > 0)
    {
        pthread_cond_wait(&globals.accept_new_thread, &globals.accept_new_thread_lock);
    }
    pthread_mutex_unlock(&globals.accept_new_thread_lock);
    pthread_cond_destroy(&globals.accept_new_thread);
    return EXIT_SUCCESS;
    } 
```

### 编译运行多线程程序

```
gcc -O3 -Wall jeter.c -pthread -I/usr/local/package/samtools-0.1.18 -L/usr/local/package/samtools-0.1.18/  -lbam -lz
$ time (find .// -name "*recal.bam" | grep Item1[0-9] | xargs ./a.out )
creating ./Item10/recal.bam
creating ./Item11/recal.bam
creating ./Item12/recal.bam
creating ./Item13/recal.bam
creating ./Item14/recal.bam
creating ./Item15/recal.bam
STARTING : ./Item10/recal.bam Tue Dec 18 15:12:48 2012
STARTING : ./Item11/recal.bam Tue Dec 18 15:12:48 2012
STARTING : ./Item12/recal.bam Tue Dec 18 15:12:48 2012
STARTING : ./Item14/recal.bam Tue Dec 18 15:12:48 2012
STARTING : ./Item13/recal.bam Tue Dec 18 15:12:48 2012
STARTING : ./Item15/recal.bam Tue Dec 18 15:12:48 2012
./Item10/recal.bam    185784310
end1 for ./Item10/recal.bam Tue Dec 18 15:38:16 2012
end2 for ./Item10/recal.bam Tue Dec 18 15:38:16 2012
creating ./Item16/recal.bam
STARTING : ./Item16/recal.bam Tue Dec 18 15:38:16 2012
./Item11/recal.bam    204408906
end1 for ./Item11/recal.bam Tue Dec 18 15:41:52 2012
end2 for ./Item11/recal.bam Tue Dec 18 15:41:52 2012
creating ./Item17/recal.bam
STARTING : ./Item17/recal.bam Tue Dec 18 15:41:52 2012
./Item12/recal.bam    207766317
end1 for ./Item12/recal.bam Tue Dec 18 15:42:17 2012
end2 for ./Item12/recal.bam Tue Dec 18 15:42:17 2012
creating ./Item18/recal.bam
STARTING : ./Item18/recal.bam Tue Dec 18 15:42:17 2012
./Item15/recal.bam    224957522
end1 for ./Item15/recal.bam Tue Dec 18 15:44:54 2012
end2 for ./Item15/recal.bam Tue Dec 18 15:44:54 2012
creating ./Item19/recal.bam
STARTING : ./Item19/recal.bam Tue Dec 18 15:44:54 2012
./Item13/recal.bam    224548326
end1 for ./Item13/recal.bam Tue Dec 18 15:45:32 2012
end2 for ./Item13/recal.bam Tue Dec 18 15:45:32 2012
./Item14/recal.bam    241267346
end1 for ./Item14/recal.bam Tue Dec 18 15:48:28 2012
end2 for ./Item14/recal.bam Tue Dec 18 15:48:28 2012
./Item16/recal.bam    227446579
end1 for ./Item16/recal.bam Tue Dec 18 16:12:15 2012
end2 for ./Item16/recal.bam Tue Dec 18 16:12:15 2012
./Item17/recal.bam    215307379
end1 for ./Item17/recal.bam Tue Dec 18 16:13:05 2012
end2 for ./Item17/recal.bam Tue Dec 18 16:13:05 2012
./Item18/recal.bam    225914723
end1 for ./Item18/recal.bam Tue Dec 18 16:13:48 2012
end2 for ./Item18/recal.bam Tue Dec 18 16:13:48 2012
./Item19/recal.bam    225509630
end1 for ./Item19/recal.bam Tue Dec 18 16:14:06 2012
end2 for ./Item19/recal.bam Tue Dec 18 16:14:06 2012 
```

.

```
real    61m17.560s
user    66m0.476s
sys    4m5.980s 
```

### 编译运行单线程程序

```
$ gcc -O3 -Wall jeter2.c -I/usr/local/package/samtools-0.1.18 -L/usr/local/package/samtools-0.1.18/  -lbam -lz

time (find .// -name "*recal.bam" | grep Item1[0-9] | xargs ./a.out )
STARTING : ./Item10/recal.bam Tue Dec 18 16:15:25 2012
./Item10/recal.bam    185784310
end for ./Item10/recal.bam Tue Dec 18 16:20:43 2012
STARTING : ./Item11/recal.bam Tue Dec 18 16:20:43 2012
./Item11/recal.bam    204408906
end for ./Item11/recal.bam Tue Dec 18 16:26:20 2012
STARTING : ./Item12/recal.bam Tue Dec 18 16:26:20 2012
./Item12/recal.bam    207766317
end for ./Item12/recal.bam Tue Dec 18 16:31:56 2012
STARTING : ./Item13/recal.bam Tue Dec 18 16:31:56 2012
./Item13/recal.bam    224548326
end for ./Item13/recal.bam Tue Dec 18 16:38:05 2012
STARTING : ./Item14/recal.bam Tue Dec 18 16:38:05 2012
./Item14/recal.bam    241267346
end for ./Item14/recal.bam Tue Dec 18 16:44:59 2012
STARTING : ./Item15/recal.bam Tue Dec 18 16:44:59 2012
./Item15/recal.bam    224957522
end for ./Item15/recal.bam Tue Dec 18 16:50:56 2012
STARTING : ./Item16/recal.bam Tue Dec 18 16:50:56 2012
./Item16/recal.bam    227446579
end for ./Item16/recal.bam Tue Dec 18 16:58:07 2012
STARTING : ./Item17/recal.bam Tue Dec 18 16:58:07 2012
./Item17/recal.bam    215307379
end for ./Item17/recal.bam Tue Dec 18 17:04:58 2012
STARTING : ./Item18/recal.bam Tue Dec 18 17:04:58 2012
./Item18/recal.bam    225914723
end for ./Item18/recal.bam Tue Dec 18 17:11:31 2012
STARTING : ./Item19/recal.bam Tue Dec 18 17:11:31 2012
./Item19/recal.bam    225509630
end for ./Item19/recal.bam Tue Dec 18 17:18:19 2012 
```

.

```
real    62m54.503s
user    53m39.529s
sys    3m44.580s 
```

这两个程序都运行了~1H00。所以 MT 程序的运行速度比另一个慢。为什么 ？是否可以加快该代码的速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:04:35.467

看起来 I/O 操作（从文件中读取）在您的程序中占主导地位，因此很可能您不会从线程中获得太多好处，无论它做得多么好。

另请注意，多线程变体实际上要快一点；你需要比较*实时*。由于多线程，*用户时间*更大，因为它总结了所有线程在用户模式下花费的时间。*内核时间*相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:58:39.640

首先我想澄清一点：

**多线程并不一定意味着您的程序会运行得更快！**

这可能意味着，但这*取决于*您的程序真正执行的并行程度。

我在您的 MT 代码中看到您正在等待条件变量，这意味着那里可能存在争用点，并且这里没有真正的并行性。

当您的线程每个都可以做大量工作而不必等待其他线程时，实际上可以通过线程获得真正的加速。如果它们可以完全独立完成，您**可能会**得到一些加速。

然后，该加速还取决于诸如错误共享之类的事情，即（假设是多核 CPU），如果您在内存中有一些数组，并且线程 A 需要该数组中的元素 2，而另一个线程 B 也正在运行，则需要该数组中的元素 4 ，并且元素是 sizeof(int) 例如，那么您就会知道您遇到了缓存问题。每次任何一个线程写入数组时，都需要更新缓存。假设高速缓存行是 64k。这是虚假分享。这可能会导致相当显着的减速。

还有其他原因是您的 MT 程序不会比单线程程序加速。你应该问的最终问题是：

*我可以让线程做不依赖于任何其他线程的工作吗？*

从你让你的线程做的所有等待来看，似乎没有。

# java - 出现未知原因的编译器错误

> ID：13948462
> 
> 赞同：0
> 
> 时间：2012-12-19T08:43:47.977
> 
> 标签：java

好的，所以我的程序正在获取用户的输入以找出质数（直到用户输入的最大值），然后在可滚动的 JFrame 中显示这些结果。我已经完成了所有这些（至少我相信如此），但是当我尝试编译它时总是出现一个错误。另外，如果您发现我遗漏的任何其他错误，请随时告诉我！

代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PrimeNumbersJ extends JFrame
{
    private static final int WIDTH=400;
    private static final int HEIGHT=300;

    //JFrame Components
    private JLabel jlblMaxNumber;

    private JTextArea  jtaOutput;

    private JTextField jtfMaxNumber;

    private JButton jbtnCalculate, jbtnClear, jbtnExit;

    private CalculateButtonHandler calculateHandler;
    private ClearButtonHandler  clearHandler;
    private ExitButtonHandler   exitHandler;

    private JScrollPane scrollingResult;

    private JPanel jpnlTop = new JPanel();
    private JPanel jpnlCenter = new JPanel();
    private JPanel jpnlBottom = new JPanel();

    public PrimeNumbersJ()
    {
        // Set the title and Size:
        setTitle("Prime Numbers with JFrame");
        setSize(WIDTH, HEIGHT);
        jpnlBottom.setLayout(new GridLayout(1, 3));

        // Instantiate the JLabel components:
        jlblMaxNumber = new JLabel("Enter the Largest Number to test: ", SwingConstants.LEFT);

        // Instantiate the JTextFields:
        jtfMaxNumber = new JTextField(10);

        // Make the JTextArea scrollable:
        jtaOutput = new JTextArea(10,1);
        scrollingResult = new JScrollPane(jtaOutput);

        // Instantiate and register the Calculate button for clicks events:
        jbtnCalculate = new JButton("Calculate");
        calculateHandler = new CalculateButtonHandler();
        jbtnCalculate.addActionListener(calculateHandler);

        // Instantiate and register the Clear button for clicks events:
        jbtnClear = new JButton("Clear");
        clearHandler = new ClearButtonHandler();
        jbtnClear.addActionListener(clearHandler);

        // Instantiate and register the Exit button for clicks events:
        jbtnExit = new JButton("Exit");
        exitHandler = new ExitButtonHandler();
        jbtnExit.addActionListener(exitHandler);

        // Assemble the JPanels:
        jpnlTop.setLayout(new GridLayout(1, 2));
        jpnlTop.add(jlblMaxNumber);
        jpnlTop.add(jtfMaxNumber);

        jpnlCenter.setLayout(new GridLayout(1, 1));
        jpnlCenter.add(scrollingResult);

        jpnlBottom.setLayout(new GridLayout(1, 3));
        jpnlBottom.add(jbtnCalculate);
        jpnlBottom.add(jbtnClear);
        jpnlBottom.add(jbtnExit);

        // Start to add the components to the JFrame:
        Container pane = getContentPane();
        pane.setLayout(new BorderLayout());

        pane.add(jpnlTop, BorderLayout.NORTH);
        pane.add(jpnlCenter, BorderLayout.CENTER);
        pane.add(jpnlBottom, BorderLayout.SOUTH);

        // Show the JFrame and set code to respond to the user clicking on the X:
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        jpnlTop.setLayout(new GridLayout(1, 3));
        jpnlTop.add(jlblMaxNumber);
        jpnlTop.add(jtfMaxNumber);

        jpnlCenter.setLayout(new GridLayout(1, 1));
        jpnlCenter.add(scrollingResult);

        jpnlBottom.add(jbtnCalculate);
        jpnlBottom.add(jbtnClear);
        jpnlBottom.add(jbtnExit);

        // Show the JFrame and set code to respond to the user clicking on the X:
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }//End Constructor

    private class CalculateButtonHandler implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            int iRemainder,iPrimeCheck;
            int iNumbertoTest = 0;
            boolean bValidInput = true;
            String sPrime ="";

            try
            {
                iNumbertoTest = Integer.parseInteger(jtfMaxNumber.getText());
        }
            catch (Exception aeRef)
            {
                JOptionPane.showMessageDialog(null,"Enter the Max Number to Test.", getTitle(), JOptionPane.WARNING_MESSAGE);
                bValidInput = false;
            }// end of catch

            if ( bValidInput )
            {

                for(iNumberToTest = 1;iNumberToTest <= 100;iNumberToTest++)    {
                    iRemainder = 0;
                    for(iPrimeCheck = 1;iPrimeCheck <= iNumberToTest;iPrimeCheck++){
                        if(iNumberToTest % iPrimeCheck == 0){
                                iRemainder++;
                            }
                        }
                        if(iRemainder == 2 || iNumberToTest == 1)
                        {
                                String sNumber = Integer.toString(iNumberToTest);
                                sPrime = sPrime + (sNumber + "\n");
                        }

            }
                // Populate the output by using the methods in the user defined class::

                jtaOutput.append("The Prime Numbers Are: \n" + sPrime  + "\n");
            } // end if
        } //end ActionPerformed
    }//End CalculateButtonHandler

    private class ExitButtonHandler implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            System.exit(0);
        }
    }//end ExitButtonHandler

    private class ClearButtonHandler implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            jtfMaxNumber.setText("");
            jtaOutput.setText("");
         }
    } // end ClearButtonHandler

    public static void main(String args[])
    {
        PrimeNumbersJ primNumJ = new PrimeNumbersJ();
    }
} 
```

错误

```
java:120: cannot find symbol
symbol  : method parseInteger(java.lang.String)
location: class java.lang.Integer
            iMaxNumber = Integer.parseInteger(jtfMaxNumber.getText());
                                ^ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:45:11.610

`Integer.parseInteger()`

不存在。

你在找吗`Integer.parseInt()`？？？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T08:46:38.147

更改 `Integer.parseInteger()`为

```
Integer.parseInt() 
```

在类中也声明`int iNumberToTest`为类变量`CalculateButtonHandler`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T08:46:09.780

该类`Integer`不包含名为 的方法`parseInteger`。改为使用`parseInt`。

# android - 警报对话框上带有多选复选框的列表？

> ID：13948464
> 
> 赞同：9
> 
> 时间：2012-12-19T08:43:56.597
> 
> 标签：android, android-listview, android-alertdialog, android-checkbox

我一直在尝试获取一个包含大约 10-12 个项目的列表，每个项目在警报对话框上都有一个复选框（即当我的活动开始时）。到目前为止，我已经想出了以下代码；它没有复选框。
那么，我该如何实现呢？任何示例代码或建议将不胜感激。
谢谢

```
final CharSequence[] items = {"cat1","cat2","cat3" };
          AlertDialog.Builder builder = new AlertDialog.Builder(this);
          builder.setTitle("Categories");
          builder.setItems(items, new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int item) {
            switch (item) {
            case 0:
             //handle item1
             break;
            case 1:
             //item2
             break;
            case 2:
             //item3
             break;
            default:
             break;
            }  }
          });
          AlertDialog alert = builder.create();
          alert.show(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:07:48.387

您必须在构建器对象中设置 setSingleChoiceItems() 方法，而不是像下面这样的 setItems。

```
 builder.setSingleChoiceItems(items , -1,
                      new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
               // The 'which' argument contains the index position
               // of the selected item
           }
    }) 
```

如果要显示多选列表对话框，则必须在其参数中使用 DialogInterface.OnMultiChoiceClickListener 设置 setMultiChoiceItems() 而不是 setSingleChoiceItems

Developer.Android.com 中提到了所有内容，您可以[在此处查找对话框帮助](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:47:54.320

我建议不要在警报对话框中使用复杂的自定义视图。为此，更好地使用开始活动作为结果。在清单中为您的对话活动设置 android:theme="@style/Theme.Dialog"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-13T22:08:39.450

正如 rajpara 所说，但我不会忘记通过将开关替换为 items[which].toString(); 来减少代码的复杂性。

# java - 为并发设计数据源连接

> ID：13948471
> 
> 赞同：-1
> 
> 时间：2012-12-19T08:44:26.417
> 
> 标签：java, jsp, servlets, jdbc, concurrency

下面的代码是我们用于项目的“基础”servlet：

```
public class MyServlet extends Servlet {
    private static final long serialVersionUID = 1L;

    protected Connection conn;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public MyServlet() {
        super();
    }

    protected void connectDB() throws NamingException, SQLException {
        // get database settings

        InitialContext cxt = new InitialContext();

        DataSource ds =(DataSource)cxt.lookup( "java:/comp/env/jdbc/MyDB" );
        conn = ds.getConnection();      
    }

    protected void closeDB() throws SQLException {
        try {
            if (conn!=null) conn.close();
        }
        finally {
            conn = null;
        }
    }

    protected void addCacheControl(HttpServletResponse response) {
        response.setHeader("Expires", "Thu, 01 Jan 1970 00:00:00 GMT");
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate, pre-check=0, post-check=0");
        response.setHeader("Pragma", "no-cache");
    }

} 
```

例如`SomeServlet extends MyServlet`...

现在`SomeServlet`是在浏览器中访问它对`forward()`JSP 页面进行访问，然后刷新一段时间（比如 10 秒）。

页面打开一段时间后，此代码抛出 NullPointerException：

```
stmt = conn.prepareCall("{call sp_someSP(?, ?, ?)}"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:52:02.497

您不能像这样使用 Servlet 的实例字段，因为它将由多个线程共享。

您需要通过程序将连接作为参数和局部变量显式传递（以便它们存在于堆栈中，并且每个线程都有自己的版本），或者如果您想要更“全局”的方法，可以使用 ThreadLocal 。当您的请求完成时，ServletFilter 也可以可靠地关闭 ThreadLocal 连接。

# coronasdk - 电晕：双击/单击

> ID：13948474
> 
> 赞同：2
> 
> 时间：2012-12-19T08:44:36.197
> 
> 标签：coronasdk, tap

我正在尝试检测 Corona SDK 中的单击和双击。我使用过：

```
system.setTapDelay(0.5) 
```

...在我的 main.lua 文件中，我理解这将确保不会传递单个点击事件，除非在 0.5 秒内没有收到进一步的点击事件。根据文档，延迟以秒而不是毫秒为单位指定，因此为 0.5。

然后我利用了这个：

```
function mapGroup:tap(event)
    if event.numTaps >= 2 then
        print "double tap"
    else
        print "single tap"
    end
    return true
end 
```

正如预期的那样，这将返回单击和双击。但是，它会为双击触发两次：

```
single tap
double tap 
```

在我们知道它不会是双击之前，如何防止 Corona 触发单击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:57:51.480

这比起初看起来更棘手。

我认为 system.setTapDelay() 确实有效。至少看起来如此。但我的理解是，这并不意味着要排除单击。只接受较慢的双击。或者这个函数的文档可能只是误导。无论如何，让我们希望 Corona 开发团队在未来澄清这一点。

现在，在您的应用程序中，您有必须对单击做出反应的对象，以及必须对双击做出反应的对象，对吗？

甚至可能是必须对一个或另一个做出反应的对象，但不能同时对两者做出反应。但是您必须注意，使用第三种设计选择时，如果单击，您的对象将不得不“等待”，直到确定它不是双击的第一次。你跟着？换句话说，要区分对同一对象的单击和双击可能会导致单击“滞后”一点。

为了以简单的方式实现所有这些，我会这样：

```
function onSingleTap( event )
    if event.numTaps == 1 then
        print("received a single tap")
    end
end

objectThatRespondsToSingleTapOnly:addEventListener( "tap", onSingleTap )

function onDoubleTap( event )
    if event.numTaps >= 2 then
        print("received a double tap")
    end
end

objectThatRespondsToDoubleTapOnly:addEventListener( "tap", onDoubleTap ) 
```

现在，如果您还想要区分单人与双人的对象，您可以添加：

```
local doubleTapTimeout = 600 -- values under 300 become hard to use
-- BTW make this a little higher than the tap delay, if you set it manually

function onExclusiveSingleTap( event )
    print("received an exclusive single tap")
end

function onExclusiveDoubleTap( event )
    print("received an exclusive double tap")
end

function onExclusiveTap( event )
    if event.numTaps == 1 then
        event.target.singleTapWaiting = timer.performWithDelay(
            doubleTapTimeout,
            function(e) onExclusiveSingleTap( event ) end
        )
    elseif event.numTaps >= 2 then
        timer.cancel( event.target.singleTapWaiting )
        onExclusiveDoubleTap( event )
    end
end

objectThatRespondsToBothTaps:addEventListener( "tap", onExclusiveTap ) 
```

我只是想知道你是否不应该在 Lua 闭包中复制事件对象的值而不是传递它的引用，这可能会导致一些内存泄漏。

```
function(e) onExclusiveSingleTap( {
    name = "tap",
    x = event.x,
    y = event.y,
    numTaps = 1,
    target = event.target
} ) end 
```

# ios - 我正在使用缓存图像，但是当我在 uitableview 中向上滚动时，它会不断重新加载？

> ID：13948479
> 
> 赞同：3
> 
> 时间：2012-12-19T08:44:47.427
> 
> 标签：ios, xcode, uitableview

我使用控制台检查它是否重新加载并且它在`cellForRowAtIndexPath`. 它会导致表格视图卡住片刻。我以为是因为图像，但现在我无法弄清楚问题所在。任何帮助都会很棒。

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog( @"Cell loading" );
    static NSString *CellIdentifier = @"showVideo";
    CustomVideoCell *cell = (CustomVideoCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell=[[CustomVideoCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
    }

    NSURL *url = [NSURL URLWithString:[data objectForKey:@"profilepicture"]];
    NSData *data = [NSData dataWithContentsOfURL:url];

    [cell.playimage setImageWithURL:[NSURL URLWithString:[data objectForKey:@"profilepicture"]]
                 placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:19:18.050

这一行提出了问题：

```
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

这是一个同步调用，这就是为什么您在滚动时会感到延迟。

切勿在主线程上调用此类方法，这将导致您的应用程序无响应。如果数据太高，则下载需要更多时间，从而需要更多时间来响应 UIEvents。

You need to cache the images once it's downloaded, else each time when the table is reloaded it'll download it again. If the image is already downloaded you need to display it from the cache don't download it again. You need to handle this on your `cellForRowAtIndexPath`. You can write your own code for doing these tasks or you can rely on the following samples.

Check the following libraries/source code:

1.  [HJCache](https://github.com/markofjohnson/HJCache)
2.  [LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)
3.  [SDWebImage](https://github.com/rs/SDWebImage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:22:40.457

Use [SDWebImage](https://github.com/rs/SDWebImage "SDWebImage"). It makes it much easier to download images asynchronously and manages the caching for you.

# mysql - 如何在 if 语句中调用存储过程？

> ID：13948482
> 
> 赞同：3
> 
> 时间：2012-12-19T08:45:04.177
> 
> 标签：mysql, stored-procedures, if-statement

我在 MySQL 中有 SP，它的一行在 if 语句中调用另一个 SP，如下所示：

```
IF ((CALL SP_CheckExist(id1,id2)) THEN //some thing ; END IF; 
```

`SP_CheckExist`返回真或假。但是我有语法错误！

`SP_CheckExist`是这样的：

```
BEGIN
    IF EXISTS(SELECT 1 FROM tbl1 WHERE Id1 = p_Id1 AND Id2 = p_Id2 LIMIT 1)
    THEN SELECT TRUE;
    ELSE SELECT FALSE;
    END IF; 
END 
```

实际上，即使我不能做这样的事情：

```
SET result = (CALL SP_CheckExist(1,1)); 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:57:54.600

您必须创建一个**函数**来检查数据是否存在，或者您必须在过程中使用**OUT**类型参数并在 IF 条件下使用该变量。

**功能**

```
DELIMITER $$

DROP FUNCTION IF EXISTS `fn_CheckExist`$$

CREATE FUNCTION `fn_CheckExist`(p_id1 INT, p_id2 INT) RETURNS BOOL CHARSET latin1
    READS SQL DATA
BEGIN
    DECLARE _result BOOL DEFAULT FALSE;
    IF EXISTS(SELECT 1 FROM tbl1 WHERE Id1 = p_Id1 AND Id2 = p_Id2 LIMIT 1)
      THEN SET _result = TRUE;
      ELSE SET _result = FALSE;
    RETURN _result;
END$$

DELIMITER ; 
```

**SP**

```
DECLARE _result BOOL DEFAULT FALSE;
SELECT fn_CheckExist(id1, id2) INTO _result;
IF(_result) THEN 
    /* Your Code Snippet*/
ELSE
    /* Your Code Snippet*/
END IF; 
```

**或通过程序**

```
CREATE PROCEDURE `sp_CheckExist`(IN p_Id1 INT, IN p_Id2 INT, OUT _result BOOL)
BEGIN
    IF EXISTS(SELECT 1 FROM tbl1 WHERE Id1 = p_Id1 AND Id2 = p_Id2 LIMIT 1)
    THEN SET _result = TRUE;
    ELSE SET _result = FALSE;
    END IF; 
END 
```

**第二个 SP**

```
DECLARE _result BOOL DEFAULT FALSE;
CALL SP_CheckExist(id1,id2,_result);
if(_result) then 
   /* Your Code Snippet*/
else
   /* Your Code Snippet*/
end if; 
```

# shell - 非常简单的纪元加密

> ID：13948487
> 
> 赞同：0
> 
> 时间：2012-12-19T08:45:43.063
> 
> 标签：shell, hash, xor

我正在编写自己的列表管理器，我需要一个简单的短 URL 供用户“单击”取消订阅，例如[http://unsubscribe.example.com/50d178fa](http://unsubscribe.example.com/50d178fa)

`50d178fa`只是一个时代的十六进制，我想这太容易猜了。一个人可能是恶意的，只是通过正确猜测特定时间段内的十六进制来取消订阅。

所以我正在寻找一些*光保护*。`xor`似乎最简单。使用生成不超过 8 个字符的“不可猜测的字符串”的秘密的任何其他“少吸”建议，我可能会丢失？

```
 epoch=$(date +%s)
    hex=$(printf '%x' $epoch)
    echo Convert epoch to hex
    echo d:$epoch h:$hex

    echo h:$hex is ${#hex} characters long

    echo Conversion from hex back to epoch
    echo h:$hex d:$(printf "%dn" 0x$hex)

    n=911 # secret number

    obfuscated=$(($epoch ^ $n))
    obfuscatedhex=$(printf '%x' $obfuscated)
    echo d:$obfuscated, h:$obfuscatedhex is ${#obfuscatedhex} characters long
    echo Conversion from hex back to epoch
    echo $(($(printf "%dn" 0x$obfuscatedhex) ^ $n)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:50:08.267

```
head -c 4 /dev/urandom | xxd -p 
```

为了扩展，如果您每次都对同一事物进行异或，则异或不太适合混淆。如果有人得到这些链接的几个例子，他们会得到`a ^ n`, `b ^ n`, `c ^ n`, for `a`, `b`, and `c`，它们是时间（因此，通常只会在最后几位不同）。他们可以计算`(a ^ n) ^ (b ^ n)`= `(a ^ b) ^ (n ^ n)`= ，这将只显示和`(a ^ b)`之间不同的位。如果他们做同样的事情`a``b``c`并且其中任何一个，他们都会意识到这只是在每种情况下不同的低位。所以他们可以取他们拥有的值，并通过翻转低位开始猜测。对秘密的异或实际上并没有为您购买任何试图猜测值的人的保护；翻转几个低位对于与固定值异或的时间戳和直接针对时间戳一样容易。

为了保证安全，您每次都需要使用不同的值；一次性键盘，您每次都使用不同的、安全的随机数，或者可以安全地从密钥生成新值的函数。在第一种情况下，如果您每次都使用一个新的随机数，为什么不直接使用该数字作为密钥呢？在第二种情况下，您需要使用流密码，它会生成一个伪随机流，您可以使用该流将您的输出与您持有的密钥进行异或运算。但是你需要跟踪你在那个流中的位置；如果你重复这个流，你会遇到同样的老问题，所以这种方法更加复杂和微妙。

您已经在`/dev/urandom`. 你也可以使用它。只需存储每个订阅者的随机值；每个订阅者只有 4 个字节（如果存储十六进制值，则为 8 个字节）。现在，32 位不是很好的安全性；通过足够的尝试，很有可能有人可以取消订阅其他人。但是，如果您采取任何措施来限制尝试次数，那应该不会太糟糕。而且您总是可以通过为每个链接获取更多字节来轻松提高安全性。

# ios - iOS后台任务有哪些选项

> ID：13948488
> 
> 赞同：4
> 
> 时间：2012-12-19T08:45:46.323
> 
> 标签：ios, background, gps, apple-push-notifications

我需要为 iOS 创建一个应用程序，它会定期向我的服务器发送一些数据（例如 GPS 位置）。我正在寻找一个用户并不真正意识到的类似恶魔的解决方案......

甚至可能吗？我有哪些选择？

我已经尝试对此进行研究并提出了以下选项：

*   作为面向位置的应用程序，Apple 可能会批准它在后台运行。让他们批准有多难？用户不能关闭应用程序吗？

*   使用推送通知触发我的应用程序发送更新。那可能吗？你能在通知到达时在设备上定义一个回调吗？

还有其他我可能没有想到的想法吗？

还有一件事——这个应用程序是为内部使用而设计的，在公司内部，所以它不必在 App Store 上——如果这完全可能的话，或者会有所作为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:33:09.697

好吧，不是直接的答案。但是阅读您的问题后的一些想法。

> 我正在寻找一个用户并不真正意识到的类似恶魔的解决方案......

[好吧，除非应用程序使用 voip](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html) ，否则您无法在没有用户交互的情况下启动 3rd 方应用程序。应用程序使用“voip”可以在系统启动时启动，无需用户交互。

> 用户不能关闭应用程序吗？

从[文档](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)

> *即使您使用 iOS SDK 4 及更高版本开发您的应用程序，您仍然必须准备好您的应用程序在没有任何通知的情况下被终止。 **用户可以使用多任务 UI 明确地终止应用程序**。此外，如果内存受到限制，系统可能会从内存中删除应用程序以腾出更多空间。暂停的应用程序不会收到终止通知，但如果您的应用程序当前在后台状态下运行（并且未暂停），系统会调用您的应用程序委托的 applicationWillTerminate: 方法。您的应用无法通过此方法请求额外的后台执行时间。*

没有办法阻止应用程序出现在多任务栏中。如果它在多任务栏中，则用户可以随意终止它。

> 好吧，用户也可以阻止您使用定位服务。

好吧，经过您所做的所有研究，我相信您知道。当您第一次尝试使用定位服务时，用户可以禁用定位服务。操作系统向请求权限的用户显示警报，用户可以轻松单击**NO**。正如我所说，我相信你知道这一点。

好的，记住以上几点，我认为你可以做到这些，

**1）核心位置有能力做区域监控。**

从[文档](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)

> *当用户跨越地理边界时，应用程序可以使用区域监控来获得通知。当用户靠近特定位置时，您可以使用此功能生成警报。例如，在接近特定的干洗店时，应用程序可以通知用户拿起任何已经被丢弃并准备好的衣服。在 iOS 中，与您的**应用程序关联的区域始终被跟踪，包括您的应用程序未运行时**。如果在应用程序未运行时跨越区域边界，则**该应用程序将重新启动到后台**以处理事件。同样，如果**应用程序在事件发生时被挂起，它会被唤醒并给予很短的时间来处理事件**。*

看看您是否可以以某种方式使用区域设置来使您的应用程序定期在后台执行。那是一种选择。

**2) 使用重大变化监控功能。**

来自相同的文档..

> *重大变化定位服务为具有蜂窝无线电的设备提供低功耗定位服务。此服务仅在 iOS 4.0 及更高版本中可用，还可以唤醒暂停或未运行的应用程序。*

**我不知道这个显着变化**值可以定制多少。但这也允许应用程序在后台唤醒。

**3）您可以在后台请求标准位置服务，您可以将您的应用声明为需要后台位置服务。**

在这种情况下，您请求后台工作权限，您需要在 X 秒后以某种方式检查位置，并将更新发送到服务器。您可能会面临一些挑战：例如，如果您尝试访问位置并向服务器发送请求，操作系统可能会终止应用程序。GPS占用大量内存，我认为后台应用程序无法继续访问互联网。不过不确定。

还有一点

> *使用推送通知触发我的应用发送更新*

但是当通知到来时，推送通知将显示警报/徽章或播放声音（如果我的理解是正确的）。这不是你所追求的对吗？也不需要使用推送通知来定期唤醒，您可以使用本地通知并将服务器排除在外。

我认为前 2 个确实是您唯一的选择，因为它们可以让您在后台打开（根据通知）。

祝你好运！！

# php - PHP 忽略自定义错误处理程序

> ID：13948490
> 
> 赞同：1
> 
> 时间：2012-12-19T08:45:51.220
> 
> 标签：php

> **可能重复：**
> [如何捕获 PHP 致命错误](https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error)

我想创建一个自定义错误处理程序，但 PHP 忽略它仍然使用内置的错误处理程序。下面的示例给出了一个内置的致命错误，因为未定义 test()：

```
 function critical_error($error_number,$error_string,$error_file,$error_line,$error_context) {
     echo "<strong>error:</strong> echo ".$error_string;
     exit();
 }

 set_error_handler("critical_error",8191);
 test();
 exit; 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:47:53.820

您可能错误地定义了错误级别。尝试使用：

```
set_error_handler("critical_error", E_ALL); 
```

另请注意：

> 用户定义的函数无法处理以下错误类型：E_ERROR、E_PARSE、E_CORE_ERROR、E_CORE_WARNING、E_COMPILE_ERROR、E_COMPILE_WARNING，以及在调用 set_error_handler() 的文件中引发的大部分 E_STRICT。

但是如果没有完整的脚本（包括`test()`），就很难说。我已经在本地服务器上对其进行了测试，一切正常。

# android - Android - 在 service.class 中使用 XML 布局中的按钮

> ID：13948497
> 
> 赞同：1
> 
> 时间：2012-12-19T08:46:10.083
> 
> 标签：android, button, service

我正在开发一个从服务启动的应用程序。由于在使用 HOME 按钮后重新创建活动之前有 5 秒的延迟，我开始重新创建没有活动的应用程序作为 GUI。我正在努力让我的按钮从 XML 布局中工作，愚蠢的我。

我可以使用动态创建的按钮，但我需要使用我在布局 XML 中定义的所有按钮。

这是它现在的样子：

```
// display the layout to screen

LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
View myView = inflater.inflate(R.layout.xmllayout, null);     
wm.addView(myView, params); 

// tried to use getIdentifier - log shows the button id number

final int id = getResources().getIdentifier("btn1", "id", getPackageName());
final ImageButton btn1 = (ImageButton) findViewById(id);           

Log.i(TAG, "Found Button ID:" + getResources().getIdentifier("btn1", "id", getPackageName()));

// how i define the button in a activity
// ImageButton btn1 = (ImageButton) myView.findViewById(btn1);           

btn1.setOnClickListener(new ImageButton.OnClickListener()
{
              @Override
              public void onClick(View arg0)
              {
                  //Toast.makeText(getApplicationContext(), "Starting ", Toast.LENGTH_LONG).show();
              }
            }); 
```

`myView.findViewById(btn1);`返回错误：

```
The method findViewById(int) is undefined for the type 
```

欢迎任何关于如何使用我的 XML 布局中的按钮的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:55:06.360

你试过了吗

`myView.findViewById(R.id.buttonId)`？？？

buttonId = 您在 xml 文件中定义的按钮 ID

```
<ImageButton
  android:id="@+id/buttonId" /> 
```

# sql - 在 FROM 之前在 SQL Server 中创建别名？

> ID：13948499
> 
> 赞同：3
> 
> 时间：2012-12-19T08:46:13.933
> 
> 标签：sql, sql-server

我看到可以在FROM之后使用别名，例如，

```
SELECT *
FROM Employee as Emp
WHERE Emp.id = 10 
```

我想要一个将员工别名设置为 Emp 的命令。我想这样使用它-

```
Employee ALIAS Emp -- is there a command like this ?
SELECT Emp.ColumnOne, Emp.ColumnTwo  
FROM Emp
WHERE Emp.id = 10 
```

这样的命令存在吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T08:50:25.303

你想要的是一个[SYNONYM](http://msdn.microsoft.com/en-us/library/ms177544.aspx)。

请注意，这是一个服务器端对象，它将存在于数据库中，而不是查询定义中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T08:56:19.233

在 Microsoft SQL Server 2005 中，您可以使用[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)：

```
With Emp as (
  select * from Employee 
)
SELECT Emp.ColumnOne, Emp.ColumnTwo  
FROM Emp
WHERE Emp.id = 10 
```

CTE 比您在问题中要求的功能更强大，但与您的语法相匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T09:04:25.463

您可以使用“正常”语法：

```
SELECT Emp.ColumnOne, Emp.ColumnTwo
    FROM Employee as Emp
    WHERE Emp.id = 10 
```

# java - 禁用对 JTable 中某些列的编辑

> ID：13948506
> 
> 赞同：3
> 
> 时间：2012-12-19T08:47:12.967
> 
> 标签：java, swing, jtable

我想禁用我的 JTable 中的某些列，我知道如何禁用它们，但这不是我需要的。我有 4 列

“已接受”列是一个复选框，我希望它保持可编辑状态，但其余部分不应该。有任何想法吗？

```
 |Name    | Address  | Phone  | Accepted |
 -----------------------------------------
  Bob       Random     45678    Yes 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T08:49:20.970

我想到了

```
 public boolean isCellEditable(int row, int column) {
            return column == 3; 
```

# java - 抛出异常时不支持请求方法“POST”

> ID：13948511
> 
> 赞同：8
> 
> 时间：2012-12-19T08:47:50.297
> 
> 标签：java, post, spring-mvc, exception-handling, modelandview

我在一个场景中抛出异常。由`@ExceptionHandler`. 但是当抛出异常时，它说***请求方法'POST'不支持***
控制器代码

```
@RequestMapping(value = "abcd", method = {RequestMethod.POST,RequestMethod.GET })
public String testAbc(Model model, HttpServletRequest request) throws Exception {
    //some piece of code
    if(someCondition)
        throw new Exception("No data found with id ");
} 
```

ExceptionController 类中的代码

```
@ExceptionHandler(Exception.class)
public ModelAndView handleException(Exception ex, HttpServletRequest request, HttpServletResponse response) {
    ModelAndView modelAndView = new ModelAndView();
    modelAndView.addObject("errorMessage", ex.getMessage());
    modelAndView.addObject("errorDetails", ExceptionUtils.getStackTrace(ex));
    modelAndView.setViewName("forward:errorPage");

    return modelAndView;
} 
```

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:59:41.963

似乎处理的控制器`/errorPage`不采用请求方法POST。在您的`@ExceptionHandler`方法中，您通过将视图名称设置为来转发到该页面`forward:errorPage`。

您能否确认`errorPage`控制器是否确实处理`POST`方法。

# facebook - 在 facebook 应用程序中设置图片大小的限制

> ID：13948515
> 
> 赞同：1
> 
> 时间：2012-12-19T08:48:01.517
> 
> 标签：facebook, facebook-php-sdk

我尝试可视化一些使用 FB API 拍摄的个人资料图片。我使用的 'picsize' 参数设置为 'large'。我知道还有“正常”、“小”和“方形”作为可能的值，但它们都不足以满足我的需要。 `'picsize' => 'large'`. 不过，这些大图片的大小不是固定的，这有时是个问题。我想知道，这是设置上限的最简单方法，例如设置这些图片的高度。如果“生成”的大图片的高度超过了界限，我希望这两个尺寸都按比例减小，所以新的高度正好是界限。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:31:31.443

图像容器：

```
{
 display: table-cell;
 height: 150px;
 text-align: center;
 vertical-align: middle;
 width: 160px;
} 
```

图片

```
{
 max-height: 125px;
} 
```

# ubuntu-12.04 - Openstack 安装

> ID：13948518
> 
> 赞同：1
> 
> 时间：2012-12-19T08:48:16.677
> 
> 标签：ubuntu-12.04, openstack

我尝试过使用 devstack，尝试安装 openstack folsom。但是，我无法安装它并出现错误。

```
Creating /usr/local/lib/python2.7/dist-packages/horizon.egg-link (link to .)
horizon 2012.2.2 is already the active version in easy-install.pth

Installed /opt/stack/horizon
Processing dependencies for horizon==2012.2.2
error: Installed distribution python-keystoneclient 0.1.3 conflicts with requirement python-keystoneclient>=0.2
++ failed
++ local r=1
++ set +o xtrace 
```

我正在 Ubuntu 12.04 服务器上进行安装。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-26T06:12:54.393

安装要求 python-keystoneclient 版本为 0.2 或以上。由于您已经安装了 0.1.3 版本，安装程序失败并报此错误。

**解决方案：**

1.  使用命令“apt-cache policy python-keystoneclient”确认已安装的包

2.  使用命令“apt-get remove python-keystoneclient”删除它

3.  使用命令“apt-get install package=”安装较新版本，例如“apt-get install python-keystoneclient=0.2”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:52:34.450

您安装了一个与 PIP 尝试安装的版本冲突的 python-keystoneclient 操作系统包。删除它（apt-get remove python-keystoneclient），然后重试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-28T07:48:11.200

尝试在新的虚拟机中重新安装。由于某些缓存问题，我收到此错误，即使在清除缓存和更新后我也无法更正它。所以我刚刚重新安装，它工作正常。

无论如何，如果您要尝试新的东西，重新安装它总是有效的（确保您的互联网连接不会中断）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-04T16:28:24.530

> python-keystoneclient 0.1.3 与要求 python-keystoneclient>=0.2 冲突

根据这一行，python-keystoneclient 的 0.2 版本需要安装，但您拥有的是 0.1.3 版本。

解决方案：

```
 sudo pip list | grep python-keystoneclient #check for the version
 sudo pip install python-keystoneclient #install the new version 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-24T22:22:31.927

OpenStack Folsom 是一个相当老的版本。确保在 DevStack git repo 中切换到适当的分支\标签。据我所知，在 DevStack 中特定于发布的所有内容都是以这种方式处理的。

您也可以尝试在 local.conf 文件中为某些包设置特定的分支。请参阅 stackrc 文件中的确切参数名称。例如，对于 keystone 客户端，有一个名为 KEYSTONECLIENT_BRANCH 的参数。

# html - iframe 悬停在 IE 中不起作用（所有版本）

> ID：13948523
> 
> 赞同：3
> 
> 时间：2012-12-19T08:48:34.043
> 
> 标签：html, css, internet-explorer, iframe

我有 iframe:hover 的问题。我的 iframe 是隐藏的，当我在链接或 iframe 上单击鼠标时，iframe 是可见的。这在除 IE（所有版本）之外的所有浏览器中都可以正常工作。我已经尝试了很多解决方案，但它仍然不起作用。

[与我的问题的实时示例链接](http://durian.newlogic.cz)- 联系表格中的元素“MedicalTourism Rewievs”。

你有什么想法吗？

编辑：[JSFiddle 示例](http://jsfiddle.net/3zLK5/)

```
<div id="wbw">
    <a class="wh"></a>
    <div id="ta_widget_box"></div>
    <script language="Javascript" src="http://reviews.treatmentabroad.com/js/widget.js"></script>
    <script language="Javascript">init_widget_rnr('278237/es','ta_widget_box');</script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:50:56.653

这个选择器有问题，它在 IE7/IE8 中不起作用：

```
#wbw a.wh:hover + #ta_widget_box {
    display: block;
} 
```

所以我建议一个javascript解决方案，一个非常基本的例子：

[http://jsfiddle.net/3zLK5/9/](http://jsfiddle.net/3zLK5/9/)

我已经在 IE7/IE8/IE9 中对其进行了测试，并且可以正常工作！

# java - 安卓。从代码更改 FrameLayout 的背景颜色

> ID：13948526
> 
> 赞同：10
> 
> 时间：2012-12-19T08:48:47.733
> 
> 标签：java, android, xml, user-interface

我正在尝试更改 FramyLayout 的背景颜色。颜色在变，但是换错了。

但是，如果我通过 XML 执行它，它工作正常。

这是我的 res/values/colors.xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="grey">#888888</color>
    <color name="white">#FFFFFF</color>
    <color name="red">#ffff3448</color>
    <color name="green">#ff408c3a</color>
</resources> 
```

这是我在 XML 中进行更改时的样子 ![颜色正确更改](../Images/3e31945120b216a5930b94a222bd733d.png)

如果我尝试使用代码执行此操作，就会发生这种情况

```
 FrameLayout frameLayoutBalance = (FrameLayout)view.findViewById(R.id.frameLayoutBalance);
 frameLayoutBalance.setBackgroundColor(R.color.green); 
```

![颜色更改不正确](../Images/6ab36eb104035400a2d5d632fd23c165.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T08:51:30.567

你不应该使用 frameLayoutBalance.setBackgroundColor(R.color.green);

setBackgroundColor 需要颜色（即 Chirag Raval 所描述的值）而不是颜色资源。

使用这个 frameLayoutBalance.setBackgroundColor(getResources().getColor(R.color.green));

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:58:49.063

使用此代码 frameLayoutBalance.setBackgroundColor(Color.parseColor("#00aacc"));

# javascript - Http 请求 - IMG 与 TEXT？

> ID：13948531
> 
> 赞同：7
> 
> 时间：2012-12-19T08:49:09.937
> 
> 标签：javascript, http, image, httprequest

此处显示的时间线（使用 IE 的 F12 开发人员工具捕获）说明了 IE 如何处理`<img>`标签位于以下内容**之后**的页面`text`：

![在此处输入图像描述](../Images/3a1ebc2bbd282d6b34f10dd6cd278964.png)

第二行显示图像的检索。由于图像很小，所有图像数据都包含在同一个数据包中的 HTTP 响应标头中。

但是 - 下一个时间线显示了当`<img>`标签位于文件开头**附近时会发生什么，因此它位于 IE 接收的第一个数据包中：**

![](../Images/ec94ed49cd1b410225ce8dfad0505fb1.png)

但是，图像的请求在第一个 HTML 数据包到达后不久就开始了。

因此，检索页面和图像所需**的总时间更少**

但是（恕我直言）最好将图像（具有定义尺寸）放在该页面的底部。（以便页面加载更快）

但是-在我的示例中，它表明当 img 位于顶部时页面加载速度更快。

我错过了什么？

***[PS我的问题是本节](http://books.google.co.il/books?id=fCK3MMV8iYcC&pg=PA16&lpg=PA16&dq=%22As%20a%20result,%20it%20takes%20less%20total%20time%20to%20retrieve%20the%20page%20and%20the%20image.%22&source=bl&ots=F5E-afIawo&sig=SOFpy0mB8HbByIkox61aUKpwDGE&hl=en&sa=X&ei=TYDRULjADsO40QX5nYGYCA&redir_esc=y#v=onepage&q=%22As%20a%20result,%20it%20takes%20less%20total%20time%20to%20retrieve%20the%20page%20and%20the%20image.%22&f=false)**的简要总结文本*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:54:49.383

你错过了几个点。首先，最佳实践不仅涉及下载，还涉及渲染，因为如果整个页面下载了 3 秒，但需要再渲染 2 秒，则用户等待 5 秒，而不是 3 秒。我不知道将图像放在底部的最佳做法（脚本有这种做法），我知道的最佳做法是包含宽度和高度属性，这样您就不会在下载图像时阻止渲染。

您在测试中缺少的另一件事是并行下载，因为浏览器限制了并发连接的数量，并且您只使用一个图像进行测试。使用更多图像进行测试，或者最好使用真实网页进行测试，以获得可靠的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:29:12.420

我宁愿为减少连接数量而烦恼， - 一次加载整个页面。拆分界面和内容部分。加载界面后 - 它可以要求用户等待并通知他连接速度。然后放置一个进度条并告知用户事情的进展情况。

# c# - MVC3 vb.net 到 C# WebGrid 问题

> ID：13948544
> 
> 赞同：4
> 
> 时间：2012-12-19T08:49:50.653
> 
> 标签：c#, vb.net, asp.net-mvc-3

我正在将一些代码从 MVC4 C# 重写为 MVC3 vb.net（两个剃须刀引擎），我遇到了这个问题......当我尝试使用 WebGrid 时，我遇到了一些语法错误，“格式： ="。看来我无法正确获取语法。这部分代码有问题：

...网格。列（

```
 format: 
             @<text> 
                @Html.ActionLink("Edit", "Edit", new { id=item.id })
             </text> 

            ), 
```

...

有人可以给我一些建议或方向或帮助我吗？值得一提的是，其他一切都与 WebGrid（列等）一起使用。但是我尝试将编辑链接放置到网格中，就像在 C# 版本中一样（在那里就像一个魅力）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:05:58.630

@Rikon 帮助了他的回答。

[http://forums.asp.net/t/1664969.aspx/1](http://forums.asp.net/t/1664969.aspx/1)

整个问题是我错过了一个“@”，应该有“@@”。:)

# java - Jgit浅克隆（深度-2）

> ID：13948545
> 
> 赞同：4
> 
> 时间：2012-12-19T08:49:51.093
> 
> 标签：java, git, jgit

在对 JGIT（BasePackFetchConnection 类）进行一些更改后，我们能够将命令（deepen 2）发送到服务器以进行浅层克隆。但是，当服务器以浅提交响应时，Jgit 无法处理此问题。

必须向服务器发送哪些进一步的命令才能接收包中的浅层存储库？以下文档不清楚如何处理浅响应 [https://github.com/git/git/blob/master/Documentation/technical/pack-protocol.txt](https://github.com/git/git/blob/master/Documentation/technical/pack-protocol.txt)

# java - GWT 和泛型

> ID：13948546
> 
> 赞同：7
> 
> 时间：2012-12-19T08:49:53.337
> 
> 标签：java, gwt, generics

使用 RPC 和 Java 泛型发送对象列表时出现 SerializationException 错误。

我正在创建这个小部件来显示错误：

```
public class Test<T> {

    ListDataProvider<T> ldp = new ListDataProvider<T>();

    public void setItems(List<T> list){
        for(T t :list){
            ldp.getList().add(t);
        }
    }

    public List<T> getItems(){
        return ldp.getList();

    }

} 
```

这是用于创建 Test 小部件并传递 POJO 列表的代码（其中 ExporterFormKey 是 POJO 对象）

```
List<ExporterFormKey> list = new ArrayList<ExporterFormKey>();
ExporterFormKey key = new ExporterFormKey();
key.setKey("key1");
list.add(key);

Test<ExporterFormKey> test = new Test<ExporterFormKey>();
test.setItems(list); 
```

最后，下一个代码抛出一个 SerializationException：

```
service.sendList(test.getList(), new AsyncCallback...); 
```

虽然下一个很好：

```
service.sendList(list, new AsyncCallback...); 
```

- - -编辑 - -

我发现做下一个代码也可以

```
List<ExporterFormKey> newList = new ArrayList<ExporterFormKey>();
newList.add(test.getItems().get(0));
service.sendList(newList , new AsyncCallback...); 
```

或者这也有效

```
List<ExporterFormKey> newList = new ArrayList<ExporterFormKey>(test.getItems()); 
```

我还在测试作品中发现了这种变化！

```
public List<T> getItems(){
    return new ArrayList<T>(ldp.getList());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:47:32.847

[http://blog.rubiconred.com/2011/04/gwt-serializationexception-on-rpc-call.html](http://blog.rubiconred.com/2011/04/gwt-serializationexception-on-rpc-call.html)

正如izaera 建议的那样，ListDataProvider 使用不可序列化的列表实现（ListWrapper），它不能直接通过网络发送。

正如您在帖子中所建议的那样，将 ListDataProvider 的 getList() 方法的响应包装到一个新的 ArrayList 中是解决该问题的最简单方法。

# javascript - 谷歌地图标记未在 chrome 和 safari 中显示..在 Stackoverflow 上尝试了所有答案

> ID：13948549
> 
> 赞同：2
> 
> 时间：2012-12-19T08:49:59.163
> 
> 标签：javascript, php, google-maps

我在我的网页上使用谷歌标记。纬度、经度、名称和详细信息是使用 php 页面从数据库中获取的，然后 m 使用 $.post 方法在 jquery 上使用它。

```
<?php 

//Basic environment setup (error handling and logging, cookies/sessions, php directives         etc)
require_once $_SERVER['DOCUMENT_ROOT'] . '/../Config/path_config.php';
require_once C_PATH_UTILITY_MANAGER_PAGESETUP;
Page_Setup_Manager::setDefaultPageSettings();

require_once C_DIR_UTILITY_EVENTS_DATAACCESS;

$eventsdats=Eventsdata::getevents();
$temp=array();

foreach($eventsdats as $singlemapevent)
{
array_push($temp,array($singlemapevent['ename'],
     (floatval($singlemapevent['latitude'])),
    (floatval($singlemapevent['longitude'])),
    ($singlemapevent['edate']),
    ($singlemapevent['etime']),
    ($singlemapevent['edetail'])
    ));
}
echo json_encode($temp);

//Result[["Second Event",19.0554748,72.8497017,"17-12-2012","17:57 ","This is the  

social detail;"],["Demo Event",19.2097381,72.8737017,"08-12- 2012","09:34 ","This event  

was held in bhayander by ganesh mandhre"],]
?> 
```

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">    

</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">

function initialize() {
    markers=[];
    temp=[];
    final_markers=[];
    $.post('maps_data.php',{},function(data){

       },"json").done(function(data){
           markers=(data);
           $.each(data,function(index,value){

            final_markers.push($.makeArray(value));

               });
           markers=final_markers;

       });
    alert(markers);
    var latlng = new google.maps.LatLng(19.0554748, 72.8497017);
    var settings = {
        zoom: 10,
        center: latlng,
        visible:true,
        mapTypeControl: true,
        mapTypeControlOptions: {style:   

google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        navigationControlOptions: {style: 

google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new 
google.maps.Map(document.getElementById("map_canvas"), settings);

        var infowindow = new google.maps.InfoWindow(), marker, i;
        for (i = 0; i < markers.length; i++) {  

            marker = new google.maps.Marker({
                position: new google.maps.LatLng(markers[i][1], markers[i][2]),
                map: map
            });

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    var contentString = '<div id="content">'+
                    '<div id="siteNotice">'+
                    '</div>'+
                    '<h1 id="firstHeading"  class="firstHeading">'+markers[i][0]+'</h1>'+
                    '<div id="bodyContent">'+
                    '<p>'+markers[i][3]+'</p>'+
                    '<p>'+markers[i][4]+'</p>'+
                    '<p>'+markers[i][5]+'</p>'+
                    '</div>'+
                    '</div>';

                    infowindow.setContent(contentString);
                    infowindow.open(map, marker);
                }
            })(marker, i));
        }
    }
</script>
<title>Untitled Document</title>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:100%; height:350px"></div>
</body>
</html> 
```

标记在 Firefox 中可见，但在 chrome 和 safari 中不可见。错误是什么？我错误地使用了 json 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:28:43.343

当你得到你的 json 数据时，你必须在回调中处理它们。在这里，您在 ajax 调用完成之前显示地图和标记。将此渲染移至`done`回调。

# java - 如何将本地时间转换为 UTC 记住 DayLightSaving 因素

> ID：13948559
> 
> 赞同：3
> 
> 时间：2012-12-19T08:50:46.050
> 
> 标签：java, grails, groovy

在我的 Web 应用程序中，我将所有最终用户的日期信息以 UTC 格式存储在数据库中，在向他们展示之前，只需将 UTC 日期转换为他们选择的时区。

我正在使用此方法将本地时间转换为 UTC 时间（存储时）：

```
public static Date getUTCDateFromStringAndTimezone(String inputDate, TimeZone timezone){
    Date date
    date = new Date(inputDate)

    print("input local date ---> " + date);

    //Returns the number of milliseconds since January 1, 1970, 00:00:00 GMT
    long msFromEpochGmt = date.getTime()

    //gives you the current offset in ms from GMT at the current date
    int offsetFromUTC = timezone.getOffset(msFromEpochGmt)*(-1) //this (-1) forces addition or subtraction whatever is reqd to make UTC
    print("offsetFromUTC ---> " + offsetFromUTC)

    //create a new calendar in GMT timezone, set to this date and add the offset
    Calendar gmtCal = Calendar.getInstance(TimeZone.getTimeZone("GMT"))
    gmtCal.setTime(date)
    gmtCal.add(Calendar.MILLISECOND, offsetFromUTC)

    return gmtCal.getTime()
} 
```

这种将 UTC 日期转换为本地日期的方法（显示时）：

```
public static String getLocalDateFromUTCDateAndTimezone(Date utcDate, TimeZone timezone, DateFormat formatter) {
    printf ("input utc date ---> " + utcDate)

    //Returns the number of milliseconds since January 1, 1970, 00:00:00 GMT
    long msFromEpochGmt = utcDate.getTime()

    //gives you the current offset in ms from GMT at the current date
    int offsetFromUTC = timezone.getOffset(msFromEpochGmt) 
    print("offsetFromUTC ---> " + offsetFromUTC)

    //create a new calendar in GMT timezone, set to this date and add the offset
    Calendar localCal = Calendar.getInstance(timezone)
    localCal.setTime(utcDate)
    localCal.add(Calendar.MILLISECOND, offsetFromUTC)

    return formatter.format(localCal.getTime())
} 
```

我的问题是，如果最终用户在 DST 区域内，那么我如何改进方法以完美地适应他们的本地时钟时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:17:38.177

如果您使用自定义时区 ID，例如 GMT+10，您将获得不支持 DST 的 TimeZone，例如`TimeZone.getTimeZone("GMT+10").useDaylightTime()`返回 false。但是，如果您使用受支持的 ID，例如“America/Chicago”，您将获得一个支持 DST 的 TimeZone。支持的 ID 的完整列表由 返回`TimeZone.getAvailableIDs()`。Java 在内部将时区信息存储在 jre/lib/zi 中。

# php - Magento : 删除 1 个商店的总数

> ID：13948561
> 
> 赞同：1
> 
> 时间：2012-12-19T08:50:55.163
> 
> 标签：php, magento

我有 3 个商店的 Magento 安装。

3 个月前，我在其中一家商店添加了自定义总数，一切正常。

我刚刚更新到最新版本 1.7.0.2，现在我的 B2B 商店出现问题。在这家特定商店中，不使用此总计（始终设置为 0），并且在这家商店中，所有价格均不含税。

由于我使用的是 1.7.0.2 Magento CE 版本，因此订单不包括税，并且不计算税，除非我为这个额外的总数停用模块。

我找到了仅在该商店中停用模块的解决方案，并且在前端工作正常（在正确的商店中使用的总量，在 B2B 商店中未使用）但是当我尝试从后端订购时我遇到了问题。如果我允许我的模块在 B2B 商店的后端订单中没有税，如果我不允许它为好商店的订单没有这个额外的总数。

如果有人可以帮助我在这家商店中删除这个总数，我将非常感激。

此致，

# c - 使用 main() 函数进行递归

> ID：13948562
> 
> 赞同：0
> 
> 时间：2012-12-19T08:50:57.273
> 
> 标签：c, linux, recursion, segmentation-fault

我正在编写一个程序来使用`main`() 函数的递归计算阶乘。

```
/* Print factorial */
#include <stdio.h>
#include <stdlib.h>

static char **p;

int main(int argc, char **argv)
{
        int n, rv;
        if (argc < 2) {
                printf("Usage: a.out <value>\n");
                exit(-1);
        }
        n = atoi(argv[1]);
        if (!n) {
                rv = 0;
        } else {
                if (n == 1) {
                        rv = 1;
                } else {
                        n = n - 1;
                        **p = n;
                        main(2, p);
                }
        }
        printf("%d\n", rv);
        return 0;
} 
```

该程序使用编译，`gcc`但在执行时，我在`**p = n`. 有人可以帮我修改上述程序以获得正确的结果。此外，在()`rv`中的连续递归调用之间捕获正确值的逻辑是什么？`main`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T09:18:01.163

由于您似乎不关心标准和东西，这里是用于打印阶乘的递归主函数的实现，它在 gcc 上编译（我只在 Windows 上测试）。由于它不遵循标准，因此不能保证它会在其他编译器/平台上编译。

为了好玩而编写这样的代码是可以的，但永远不要让不良行为进入严肃的编码项目或工作场所。

```
/* Print factorial */
#include <stdio.h>
#include <stdlib.h>

char buf[16];

int main(int argc, char **argv)
{
        int n, rv;

        if (argc < 2) {
                printf("Usage: a.out <value>\n");
                exit(-1);
        }

        n = atoi(argv[1]);
        if (!n) {
                rv = 1;
        } else {
                if (n == 1) {
                    rv = 1;
                } else {
                    char *pt = buf;
                    char **pt2 = &pt - 1;

                    sprintf(buf, "%d", n - 1);
                    rv = main(2, pt2) * n;
                }
        }
        printf("%d\n", rv);

        return rv;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:36:21.777

只有操作系统`main`在运行程序时才能调用。除了操作系统之外，没有人可以调用任何名为`main`. 因此，如果想使用递归计算阶乘，则必须编写另一个函数来递归计算并从`main`.

你可以问这是为什么？答案是这是语法。

# java - 如何在部署到 tomcat 之前（或期间）管理 .war 文件中的库版本？

> ID：13948567
> 
> 赞同：1
> 
> 时间：2012-12-19T08:51:18.270
> 
> 标签：java, tomcat, deployment, war, dependency-management

我的网络应用程序有一个 .war 文件。问题的根源是我想为所有客户（具有不同环境）保留一个 .war 文件。为此，我应该在 .war 中保留不同版本的库，并决定在部署时使用哪些库。

例如：

第一个客户有 oracle 10，第二个客户有 oracle 11。我想在我的战争中保留两个 ojdbc.jar 文件，并根据属性文件中的某些参数选择要使用的文件。

解决此问题的一种解决方案是编写我自己的 ClassLoader，它不会加载无用的文件（如下所示：[https](https://serverfault.com/questions/317901/tomcat-possible-to-exclude-jars-during-app-deployment) ://serverfault.com/questions/317901/tomcat-possible-to-exclude-jars-during-app-deployment ）。

问题是我们的 ClassLoader 类应该在“tomcat\lib”目录中。我的应用程序的安装更复杂。

也许还有其他方法可以解决这个问题？在我的应用程序中以编程方式使用反射或其他东西来完成它会很棒。

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:56:43.133

恕我直言，您给出的示例（数据库驱动程序）的最佳实践是通过 tomcat 提供数据源。这意味着数据库驱动程序 jar 需要位于全局类路径 ( `tomcat/lib`) 中。这也将使您保持为所有客户拥有相同的 .war 文件的意图 - 当您更新此文件时，您只需为所有用户提供相同的文件。

在数据库连接的情况下，无论如何，您很可能需要为每个客户定制一个数据库——通过 tomcat 将其作为数据源提供，因此必须配置一次（在第一次安装时），但您无需担心之后关于它。

如果数据库驱动程序不是您唯一的问题，请使用更多不同环境/jar 的示例更新您的问题。

# webdriver - 如何使用 selenium webdriver java 切换到不同的窗口？

> ID：13948570
> 
> 赞同：0
> 
> 时间：2012-12-19T08:51:24.190
> 
> 标签：webdriver

我正在尝试切换到一个新窗口，当我单击债务定价模板时会显示该窗口。但我无法做到这一点，因此我无法继续进行进一步的脚本编写......问题是我不知道我应该传递什么，`switchTo.window()`因为定价批准网关窗口显示并且以下是 HTML对于新窗口：

```
<*h1 class="pageType noSecondHeader">Pricing Approval Gateway<*/h1> 
```

以下是代码：

```
LoginPage2.driver.findElement(By.linkText("TEST ORG")).click();

System.out.println("3.Select Dept pricing template button from the organization detail page.");

if(LoginPage2.driver.findElement(By.name("debt_pricing_template")).isDisplayed())

System.out.println("User should able to navigate to Dept pricing template and template display few question, user have answer these question for further navigation.");

LoginPage2.driver.findElement(By.name("debt_pricing_template")).click();

LoginPage2.driver.manage().timeouts().implicitlyWait(100, TimeUnit.SECONDS);

LoginPage2.driver.switchTo().window("bPageTitle"); 
```

请告知需要添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:59:31.813

我从未使用过它，因为在我的测试中我没有使用任何新窗口，但这应该会有所帮助：

```
Set<string> handlers = driver.getWindowHandles();  
 if (driver.getWindowHandles().size()>= 1){  
   for(String handler : handlers){  
    driver.switchTo().window(handler);  
    if (driver.getElement(By.tagName("h1")).contains("Pricing")){  
      System.out.println("Get focus on Popup window");  
      break;  
    }  
   }  
 }  
 else System.out.println("No windows founded!"); 
```

我不太确定 h1 方法。因此，如果它没有帮助，请在打开将当前窗口存储到字符串的新窗口之前尝试：

```
String mainWindow = driver.getWindowHandle(); 
```

然后单击链接（或像现在一样做其他事情）以打开新窗口。然后切换到新窗口：

```
 Set<string> handlers = driver.getWindowHandles();  
 for (String handler : handlers){
    if (!handler.equals(mainWindow)){
      driver.switchTo(handler);
      break;
    }
 } 
```

然后切换回原始窗口只需执行以下操作：

```
driver.switchTo(mainWindow); 
```

当然，该`driver`变量是预期的实时实例 `WebDriver`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-16T08:37:16.003

```
driver.findElement(By.linkText("Go to Billing Summary")).click();

driver.findElement(By.linkText("01 Mar 2016")).click();

Thread.sleep(5000);

driver.findElement(By.linkText("AMS TAX")).click();

driver.findElement(By.linkText("00842")).click();

Set<String> instancewindow= driver.getWindowHandles();
    Iterator<String> it = instancewindow.iterator();
    String parent =it.next();
    String child = it.next();
    driver.switchTo().window(child);

driver.switchTo().frame("modalSubWindow");

    driver.findElement(By.linkText("View More Vehicle Details>>")).click();
    driver.switchTo().window(parent); 
```

# google-chrome - 有没有办法在选项卡的生命周期内唯一标识选项卡？

> ID：13948572
> 
> 赞同：2
> 
> 时间：2012-12-19T08:51:29.783
> 
> 标签：google-chrome, google-chrome-extension

我正在考虑使用 tabid 来做到这一点，但是当我在 tab 中浏览时，它似乎经常发生变化。[API 参考](http://developer.chrome.com/beta/extensions/tabs.html#apiReference)指出 tabid 在“浏览器会话”中是唯一的。我认为这意味着在浏览器进程的生命周期内，但现在似乎更有可能的是，只有在与特定网站的会话期间才能保证唯一性。有没有另一种方法可以唯一地识别一个标签的整个生命周期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:24:50.103

由于预渲染和其他因素，标签可以“替换”。这意味着即使您保持选项卡打开，tabId 也可以更改。`chrome.webNavigation.onTabReplaced`可用于捕获此类事件。有关详细信息，请参阅[https://developer.chrome.com/extensions/webNavigation.html#event-onTabReplaced](https://developer.chrome.com/extensions/webNavigation.html#event-onTabReplaced)。

为了证明这一点，遵循以下步骤*可能会*有所帮助：

1.  确保你已经为你的扩展请求了“tabs”和“webNavigation”请求，并且你的扩展没有使用非持久的背景页面（在 manifest.json 中没有 background.persistent = true）。还要确保 Google 是您的默认搜索引擎并启用即时搜索。
2.  打开一些网站（不是谷歌搜索）。
3.  在你的扩展后台页面的开发者工具中执行`chrome.tabs.query({}, function(tabs){console.log(tabs)})`。查看现有选项卡及其 ID。
4.  `chrome.webNavigation.onTabReplaced.addListener(function(details){console.log(details);`在 DevTools 中执行。
5.  在该选项卡的多功能框中输入内容以触发 Google Instant 并单击页面正文。您应该会在 DevTools 的控制台中看到触发的 onTabReplaced 事件以及新旧选项卡 ID。
6.  再次执行`chrome.tabs.query({}, function(tabs){console.log(tabs)})`，您会发现选项卡 id 实际上已“更改”。

# c# - 如何安装和使用代码契约？

> ID：13948574
> 
> 赞同：15
> 
> 时间：2012-12-19T08:51:32.940
> 
> 标签：c#, visual-studio-2010, code-contracts

我有一个基本问题，可能很明显，但由于某种原因，我似乎无法成功安装和使用代码合同。

我已经从 MSDN 下载了该软件包，并按照在线文档进行了安装，但我仍然收到以下代码语句的 IDE 警告：

`Contract.Requires(inputParameter != "");`

IDE警告是：

*“跳过方法调用。编译器不会生成方法调用，因为方法是有条件的，或者是没有实现的部分方法”*

在启用代码合同的过程中我遗漏了什么？我正在使用 VS2010 Ultimate SP1

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T08:59:59.027

这很可能是由于项目设置中未配置代码合同。如果您转到您的项目属性，您应该会看到一个 Code Contracts 选项卡。在选项卡上，选择您正在构建的模式（Debug|Release|Both），然后通过选中相应的复选框来打开 Code Contracts 功能。

当代码合同未设置为`Build`.

如果您没有看到 Code Contracts 选项卡，那么您可能需要在您的机器上安装 Code Contracts。[通过从此处](http://research.microsoft.com/en-us/projects/contracts/)下载并安装安装程序来执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-30T09:22:52.347

条件编译都是由编译器预处理器定义驱动的。这与用于`DEBUG`常量的方法相同，尽管 Visual Studio 将其定义隐藏在复选框后面。这是一种有效的方法，因为当没有定义这些符号时，根本不会调用这些方法；重要的是，传递的参数也不会被评估，因此您可以在代码合同中使用相对昂贵的检查，而不必担心这些检查会减慢发布构建。

[微软对代码合同的介绍是](https://msdn.microsoft.com/en-us/library/dd264808(v=vs.110).aspx)这样说的：

> 合约类中的大部分方法都是有条件编译的；也就是说，仅当您使用#define 指令定义特殊符号 CONTRACTS_FULL 时，编译器才会发出对这些方法的调用。CONTRACTS_FULL 允许您在代码中编写合约而不使用#ifdef 指令；您可以生成不同的版本，有些有合同，有些没有。

虽然这谈到了`#define`在代码中使用来打开代码契约：

```
#define CONTRACTS_FULL 
```

正如@NirMH 在评论中所说，通常最好在项目的条件编译符号中定义它，这样您就可以将它用于某些构建，而将其用于其他构建。

[![条件编译设置](../Images/c0c6bd27081cfe9d1a14981589e2debe.png)](https://i.stack.imgur.com/gtSlM.png)

请注意，这`CONTRACTS_FULL`是您唯一的选择，尽管它显然被命名为允许将来进行更精细的控制。

# intellij-idea - 为不同的上下文定义具有相同缩写的实时模板

> ID：13948580
> 
> 赞同：5
> 
> 时间：2012-12-19T08:51:56.453
> 
> 标签：intellij-idea, live-templates

我想为`PHP`和`JavaScript`使用相同的缩写定义两个实时模板：`t`.

在`Live Templates`我设置的偏好中

```
$this-> 
```

，`PHP`但我无法设置

```
this 
```

因为`JavaScript`错误

```
Duplicate live templates in user group 
```

是否可以以某种方式使用相同的关键字但针对不同的上下文定义这些模板？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:02:30.670

您可以在不同的组中定义具有相同前缀的实时模板。如果您为它们指定不同的上下文，您将在这些上下文中获得不同的行为。

# objective-c - UIButton 上的两行文本，每行具有不同的字体

> ID：13948582
> 
> 赞同：3
> 
> 时间：2012-12-19T08:52:28.053
> 
> 标签：objective-c, ios

我找到了一种在 UIButton 上添加两行文本的方法，但我想要的是每一行文本都有不同的字体（例如，一个是粗体，另一个不是）。怎么可能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T08:53:15.573

您应该将 2 UILabel 添加到 UIButton 作为子视图。

你可以这样做：

```
UIButton *testButton = [UIButton buttonWithType:UIButtonTypeCustom];
testButton.frame = CGRectMake(0, 0, 200, 40);
[self.view addSubview:testButton];

UILabel *firstLineTestButton = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 20)];
firstLineTestButton.text = @"First line";
firstLineTestButton.font = [UIFont systemFontOfSize:12];
[testButton addSubview:firstLineTestButton];

UILabel *secondLineTestButton = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 200, 20)];
secondLineTestButton.text = @"Second line";
secondLineTestButton.font = [UIFont boldSystemFontOfSize:12];
[testButton addSubview:secondLineTestButton]; 
```

* * *

* * *

为了也使 UILabel 的突出显示成为可能，您需要自定义按钮的突出显示。

因此，将操作添加到按钮，然后检查按钮子视图的标签并更改它们的颜色。

```
[testButton addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];
[testButton addTarget:self action:@selector(changeColor:) forControlEvents:UIControlEventTouchDown];
[testButton addTarget:self action:@selector(touchCancel:) forControlEvents:UIControlEventTouchDragExit];

-(void)buttonAction:(UIButton*)sender
{
    [self touchCancel:sender];
    /* DO SOME MORE ACTIONS */
}

-(void)changeColor:(UIButton*)sender
{
    sender.backgroundColor = [UIColor grayColor];

    for( UIView *subview in sender.subviews ){
        if( [subview isKindOfClass:[UILabel class]] ){
            UILabel *subViewLabel = (UILabel*)subview;
            subViewLabel.textColor = [UIColor blueColor];
        }
    }
}

-(void)touchCancel:(UIButton*)sender
{
    sender.backgroundColor = [UIColor clearColor];

    for( UIView *subview in sender.subviews ){
        if( [subview isKindOfClass:[UILabel class]] ){
            UILabel *subViewLabel = (UILabel*)subview;
            subViewLabel.textColor = [UIColor blackColor];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T09:41:05.117

Roland 的解决方案很好，另一种方法是使用`NSAttributedString`. 缺点是，它仅适用于 iOS 6 及更高版本。

如果这不是问题，这里是代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // We want 2 lines for our buttons' title label
    [[self.button titleLabel] setNumberOfLines:2];

    // Setup the string
    NSMutableAttributedString *titleText = [[NSMutableAttributedString alloc] initWithString:@"This should be bold,\n and this should not."];

    // Set the font to bold from the beginning of the string to the ","
    [titleText addAttributes:[NSDictionary dictionaryWithObject:[UIFont boldSystemFontOfSize:14] forKey:NSFontAttributeName] range:NSMakeRange(0, 20)];

    // Normal font for the rest of the text
    [titleText addAttributes:[NSDictionary dictionaryWithObject:[UIFont systemFontOfSize:14] forKey:NSFontAttributeName] range:NSMakeRange(20, 22)];

    // Set the attributed string as the buttons' title text
    [self.button setAttributedTitle:titleText forState:UIControlStateNormal];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:59:33.103

您可以添加两个 UILabel 作为按钮的子视图，然后可以将标签的文本设置为

```
[lbl1 setFont:[UIFont fontWithName:@"Arial-Bold" size:18]];
[lbl2 setFont:[UIFont fontWithName:@"Arial" size:16]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-28T20:13:46.093

对于正确的动画，您应该`UIButton`在其状态发生变化时对其进行子类化并重绘。

```
(void)drawRect:(CGRect)rect
{

    if (!self.firstLineTestButton) {
        self.firstLineTestButton = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 20)];
        self.firstLineTestButton.text = @"First line";
        self.firstLineTestButton.font = [UIFont systemFontOfSize:12];
        [self addSubview:self.firstLineTestButton];
    } 

    if (!self.secondLineTestButton) {
        self.secondLineTestButton = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 200, 20)];
        self.secondLineTestButton.text = @"Second line";
        self.secondLineTestButton.font = [UIFont boldSystemFontOfSize:12];
        [self addSubview:self.secondLineTestButton];
    }

    if (!self.highlighted) {
        // Do custom drawing such as changing text color
    } else {
        // Do custom drawing such as changing text color
    }
}
(void)setHighlighted:(BOOL)highlighted {
    [super setHighlighted:highlighted];
    // Force redraw of button
    [self setNeedsDisplay];
} 
```

# java - 如何转换为指定的类类型？

> ID：13948585
> 
> 赞同：0
> 
> 时间：2012-12-19T08:52:36.770
> 
> 标签：java, spring, oop

> **可能重复：**
> [通过反射和使用 Class.cast() 进行投射](https://stackoverflow.com/questions/8918550/cast-via-reflection-and-use-of-class-cast)

我有一个与java编程有关的问题。我希望能够通过传递给函数的字符串参数来选择转换类型。如您所见，有一个主类必须转换为子类型。这些子类型应由用户指定。我们怎么能做到这一点？

```
public void casting(String subClassCast)
 {
      MainClass mainClass = (subClassCast) MainClassFactory.get();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:56:45.813

你写的演员什么都不做。

演员表用于将超类的对象分配给子类引用

```
Object obj = a.toString();
String str = (String) obj;  // The compiler can't check that at runtime obj will be
                            // a String, so the programmer "forces" the compiler to
                            // allow the assignation 
```

需要演员，但在

```
Object obj2 = (String) obj; 
```

演员什么都不做（除了抛出一个`ClassCastException`if`obj`不是字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:56:25.727

你可以这样做：

```
MainClass mainClass = Class.forName(subClassCast).cast(MainClassFactory.get()); 
```

但我不确定这是个好主意。

# android - 我在哪里可以获得 Android ICS 菜单按钮图标？

> ID：13948588
> 
> 赞同：2
> 
> 时间：2012-12-19T08:53:01.053
> 
> 标签：android, menu, icons, android-4.0-ice-cream-sandwich

我花了两天时间搜索 ICS 菜单的图标，但在任何地方都找不到。这是出现在照片右上角的图标，我已经下载了ics的图标集，但没有，它不包括在内。你有吗？我在哪里可以下载它？还是我必须制作图标？非常感谢！

![http://developer.android.com/design/media/iconography_actionbar_colors.png](../Images/65f3f7be4819f6a3b85c653fb3763c0e.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T08:59:43.643

您可以从 Android SDK 目录中找到这些图标。例如，如果您的 Android SDK 位于**D:** 中，则可以从此路径找到 **D:\android-sdk-windows\platforms\android-8\data\res\drawable-mdpi** 。然后你可以在你的 xml 文件中添加这样的 ICS 图标`android:icon="@android:drawable/ic_menu_search"`。希望这个可以帮助你。

# sql-server - 将文件从 FTP 服务器上的不同文件夹移动到本地服务器

> ID：13948595
> 
> 赞同：0
> 
> 时间：2012-12-19T08:53:30.487
> 
> 标签：sql-server, ssis

在 FTP 位置，我有很多文件`Data`夹

```
Data
 | -- Folder1
 | -- Folder2
 | -- Folder3 
```

在所有这些文件夹中，我都有文本文件。我需要将所有文件夹中的所有文本文件移动到我的本地 SQL Server 服务器。

我一次只能传输一个，我需要一次移动所有文件。

# asp.net - 在运行时设置 oracle.dataaccess.client 设置的 DllPath 值

> ID：13948597
> 
> 赞同：1
> 
> 时间：2012-12-19T08:53:35.873
> 
> 标签：asp.net, c#-4.0, web-config, odp.net, oracleclient

我已经添加

```
<oracle.dataaccess.client>
   <settings>
       <add name="DllPath" value="<application_path>\bin"/>
   </settings>
</oracle.dataaccess.client> 
```

到我的 web.config。

是否可以在运行时设置 DllPath 值..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:19:44.627

您需要删除可以从配置中完成的现有设置。问题是从 machine.config 等文件中获取的当前设置

您可以使用诸如此类的配置来实现此目的，位置在您的 app.config 或 web.config

```
 <system.data>
    <DbProviderFactories>
      <remove invariant="Oracle.DataAccess.Client" />
      <add name="Oracle Data Provider for .NET" invariant="Oracle.DataAccess.Client" description="Oracle Data Provider for .NET"
           type="Oracle.DataAccess.Client.OracleClientFactory, Oracle.DataAccess, Version=2.112.3.0, Culture=neutral, 
           PublicKeyToken=89b483f429c47342"/>
    </DbProviderFactories>
  </system.data> 
```

上面的配置将删除当前引用并替换版本 2.112.3.0 的条目，该条目将从您的 bin 文件夹中获取。

# android - 联系人选择器问题

> ID：13948599
> 
> 赞同：1
> 
> 时间：2012-12-19T08:53:43.103
> 
> 标签：android, contacts, picker

我是 Android 编程新手，我正在尝试在互联网上查看一些示例，以了解 Android 开发的总体思路。

实际上，我一周以来就面临一个问题。我正在尝试运行“An Android Contacts Picker”项目。但是，如果我按“邀请联系人”并浏览联系人，则会出现一条消息“未找到电子邮件”！

这是教程 [http://mobile.tutsplus.com/tutorials/android/android-essentials-using-the-contact-picker/](http://mobile.tutsplus.com/tutorials/android/android-essentials-using-the-contact-picker/)

这是代码： [http ://code.google.com/p/android-send-message-tutorial-code/downloads/detail?name=send-message-code-5.zip&can=2&q=](http://code.google.com/p/android-send-message-tutorial-code/downloads/detail?name=send-message-code-5.zip&can=2&q=)

这个问题让我抓狂！它适用于地球上的每个人“如评论所示”，除了我！

对于调试，我使用了我的 Galaxy nexus 和 Android 模拟器。

提前致谢

# php - 使用 PHP 在数组中查找字符串

> ID：13948602
> 
> 赞同：0
> 
> 时间：2012-12-19T08:53:57.183
> 
> 标签：php, arrays, string, explode, implode

我有 2 个数组，并希望使用 PHP 在其中 1 个数组中找到一个值。

我意识到我必须使用 PHP`explode`函数，但恐怕我的技能就到此为止了。

我的函数会比较两个数组的值，如果它`$needle`在里面找到任何值`$haystack`，它会在里面返回它们`$found`。它可能会找到不止一个，所以也许也`$found`应该是一个数组？

```
$needle = "Swimming,Landscaping,Gardening,Bricklaying,3D Modelling";
$haystack = "Football,Rugby,Landscaping,3D Modelling";
$found = magicFunction($needle,$haystick); 
// $found['0'] = "Landscaping";
// $found['1'] = "3D Modelling"; 
```

这有意义吗？

非常感谢您对此的任何指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T08:56:09.993

PHP 提供了方便的函数[array_intersect](http://php.net/manual/en/function.array-intersect.php)来做到这一点。

```
$needle = "Swimming,Landscaping,Gardening,Bricklaying,3D Modelling";
$haystack = "Football,Rugby,Landscaping,3D Modelling";

$needle = explode(",", $needle);
$haystack = explode(",", $haystack);

$intersection = array_intersect($haystack, $needle);
print_r($intersection);
//Array ( [2] => Landscaping [3] => 3D Modelling ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:57:11.417

你可以这样做：

```
$found = Array ();
$needle = "Swimming,Landscaping,Gardening,Bricklaying,3D Modelling";
$haystack = "Football,Rugby,Landscaping,3D Modelling";
$search = explode(',',$haystack);
foreach ( explode(',',$needle as $k => $v )
{
  if ( in_array ( $v, $search ) )
    $found[] = $v;
} 
```

或者正如大卫所说，你可以使用`array_intersect`：

```
$found = array_intersect ( explode( ',', $haystack ), explode( ',', $needle ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:58:36.910

您可以从 needle 和 haystack 中生成数组，然后找到两个数组的交集：

```
<?php

$needle = "Swimming,Landscaping,Gardening,Bricklaying,3D Modelling";
$haystack = "Football,Rugby,Landscaping,3D Modelling";

$needle = explode(',', $needle);
$haystack = explode(',', $haystack);

$found = array_intersect($needle, $haystack);

print_r($found);
?> 
```

[http://tr1.php.net/array_intersect](http://tr1.php.net/array_intersect)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:02:48.410

您正在寻找的功能内置于 PHP:`array_intersect`中。

```
$a = explode(',', "Swimming,Landscaping,Gardening,Bricklaying,3D Modelling");
$b = explode(',', "Football,Rugby,Landscaping,3D Modelling");
$found = array_intersect($a, $b); 
print_r($found); 
```

输出： `Array ( [1] => Landscaping [4] => 3D Modelling )`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T08:58:31.933

最简单的方法可能是引爆针并使用`strpos`.

```
$needles = explode(',', $needle);
foreach ($needles as $n)
{
      if (strpos($n, $haystack)) {  }
} 
```

如果您不需要字符串的位置，[Jan Hančič解决方案可能更合适、更快。](https://stackoverflow.com/a/13948650/559157)

# c++ - .NET 4，C++，if...else 和 switch() 如何影响性能

> ID：13948603
> 
> 赞同：0
> 
> 时间：2012-12-19T08:53:57.180
> 
> 标签：c++, .net, performance, algorithm

现在在我的应用程序中，我正在使用这种结构

```
if (e->UserState->Equals(1)) {} //stuff 1
else if (e->UserState->Equals(2)) {} //stuff 2
... // e - EventArgs of .NET 4 WebClient class 
```

我应该更好地定义

```
int n = (int)e->UserState; 
```

并使用 switch()

```
switch(n)
{
  case 1:
  //stuff 1
  break;

  case 2:
  //stuff 2
  break;
} 
```

它会以某种方式影响性能吗？（大约 15 个 e->UserState 的变体）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:55:44.943

> （大约 15 个 e->UserState 的变体）

`switch`纯粹出于可读性目的，我会以形式编写它！至于性能，您可以通过分析进行检查，但我怀疑差异是否具有统计学意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:16:27.367

Switch case 会更快（在这种情况下），因为编译器可以做很多技巧来让它更快，比如跳转表，其中值用作该表的索引或二进制搜索。
请注意，如果 'if' 中的条件仅包含变量和常量，编译器可能会执行相同的技巧，但如果您在条件中调用某些函数/方法，编译器必须按顺序进行每次检查以保持可能在此函数中产生的副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:04:38.383

性能不是这里的关键因素（因为它可以忽略不计）而是可读性。所以 etiher 使用`switch`甚至方法：

```
public static void Stuff(UserState state)
{
    // do your stuff here ...
} 
```

现在您可以使用它（假设`UserState`是现有的枚举）：

```
UserState state = (UserState)(int)e;
Stuff(state); 
```

# objective-c - 始终可见的 UIView

> ID：13948604
> 
> 赞同：2
> 
> 时间：2012-12-19T08:53:58.807
> 
> 标签：objective-c, ios, cocoa-touch

我想放置一个`UIView`通知用户应用程序的状态是什么。即使用户切换视图，我也希望该视图可见，与`UINavigationBar`始终可见的相同，但我不想使用该栏，我想添加另一个显示消息的视图。

如何才能做到这一点？我无法添加`view`到 current `view`，因为如果用户更改视图，它会消失。它应该添加到`window`? 但是怎么做？然后我必须调整视图的大小，以便我的新视图`view`可以适应，但是如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:04:45.953

创建一个容器视图控制器并将其设置为`rootViewController`应用程序窗口的。

在这个容器中，你有你的状态视图，你还可以调整实际窗口的大小`rootViewController`以占用剩余空间作为子视图。如果您使用标准容器视图控制器（选项卡、导航等）作为根，那么您可以使用标准导航方法并且状态视图将始终可见

但是，如果您想呈现模态视图，则会出现问题，因为它们会超出状态视图的顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:00:55.563

在您`appDelegate.m`将视图添加为窗口的子视图。

```
UIView *mainBg = [[UIView alloc] init];
mainBg.frame = newframe;
[self.window addSubview:mainBg]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:04:57.680

如果你有一个`UINavigationController`你可以将你的视图添加到它的视图中。

```
[self.navigationController.view addSubView:yourView]; 
```

如另一个答案所述，呈现模态视图将涵盖该视图。

# linker - vtk tcl 包装

> ID：13948607
> 
> 赞同：0
> 
> 时间：2012-12-19T08:54:13.303
> 
> 标签：linker, tcl, tk, vtk

我正在尝试使用 VTK_WRAP_TCL=ON 和 VTK_USE_TK=ON 构建 VTK，但出现以下链接器错误：

```
> 编译...
vtkTkAppInit.cxx
正在编译资源...
Microsoft (R) Windows (R) 资源编译器版本 6.0.5724.0
版权所有 (C) 微软公司。版权所有。
将清单编译到资源...
Microsoft (R) Windows (R) 资源编译器版本 6.0.5724.0
版权所有 (C) 微软公司。版权所有。
正在链接...
   创建库 D:\VTK\bin\bin\Debug\vtk.lib 和对象 D:\VTK\bin\bin\Debug\vtk.exp
vtkTkAppInit.obj：错误 LNK2019：未解析的外部符号 __imp__Tk_MainEx 在函数 _main 中引用
vtkTkAppInit.obj：错误 LNK2019：函数 _main 中引用的未解析的外部符号 __imp__Tcl_CreateInterp
vtkCommonTCL.lib(vtkTclUtil.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_CreateInterp
vtkTkAppInit.obj：错误 LNK2019：函数 _Tcl_AppInit 中引用的未解析的外部符号 __imp__Tcl_SetVar
vtkCommonTCL.lib(vtkTclUtil.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_SetVar
vtkTkAppInit.obj：错误 LNK2019：函数 _Tcl_AppInit 中引用的未解析的外部符号 __imp__Tcl_Eval
vtkTkAppInit.obj：错误 LNK2019：函数 _Tcl_AppInit 中引用的未解析的外部符号 __imp__Tk_Init
vtkTkAppInit.obj：错误 LNK2019：函数 _Tcl_AppInit 中引用的未解析的外部符号 __imp__Tcl_Init
vtkCommonTCL.lib(vtkTclUtil.obj)：错误 LNK2019：无法解析的外部符号 __imp__Tcl_GetAssocData 在函数“struct vtkTclInterpStruct * __cdecl vtkGetInterpStruct(struct Tcl_Interp *)”中引用 (?vtkGetInterpStruct@@YAPAUvtkTclInterpStruct@@PAUTcl_Interp@@@Z)
vtkFilteringTCL.lib(vtkSourceTcl.obj) : 错误 LNK2019: 函数“int __cdecl vtkSourceCppCommand(class vtkSource *,struct Tcl_Interp *,int,char * * const)”中引用的无法解析的外部符号 __imp__Tcl_DeleteCommand (?vtkSourceCppCommand@@YAHPAVvtkSource@@PAUTcl_Interp@ @HQAPAD@Z)
vtkRenderingTCL.lib(vtkAbstractVolumeMapperTcl.obj)：错误 LNK2001：未解析的外部符号 __imp__Tcl_DeleteCommand
vtkRenderingTCL.lib(vtkImporterTcl.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_DeleteCommand
vtkWidgetsTCL.lib(vtkContinuousValueWidgetRepresentationTcl.obj)：错误 LNK2001：未解析的外部符号 __imp__Tcl_DeleteCommand
vtkFilteringTCL.lib(vtkProcessObjectTcl.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_DeleteCommand
vtkFilteringTCL.lib(vtkMapper2DTcl.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_DeleteCommand
vtkFilteringTCL.lib(vtkViewportTcl.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_DeleteCommand
vtkFilteringTCL.lib(vtkAbstractMapperTcl.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_DeleteCommand
vtkFilteringTCL.lib(vtkThreadedImageAlgorithmTcl.obj)：错误 LNK2001：未解析的外部符号 __imp__Tcl_DeleteCommand
vtkFilteringTCL.lib(vtkImageInPlaceFilterTcl.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_DeleteCommand
vtkFilteringTCL.lib(vtkRectilinearGridSourceTcl.obj) : 错误 LNK2001: 无法解析的外部符号 __imp__Tcl_DeleteCommand
.
.
D:\VTK\bin\bin\Debug\vtk.exe : 致命错误 LNK1120: 65 unresolved externals
结果

构建日志保存在“file://d:\VTK\bin\Wrapping\Tcl\vtk.dir\Debug\BuildLog.htm”
vtk - 22432 个错误，0 个警告

```

请帮忙解决。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:28:33.010

我安装了 Tclx64 版本并试图用 32 位编译器构建它。问题通过安装x86版本并用Debug|Win32编译解决。

[http://public.kitware.com/pipermail/vtkusers/2011-September/118696.html](http://public.kitware.com/pipermail/vtkusers/2011-September/118696.html)这篇文章帮助我理解了这个问题。

# web-services - 在 Ax 2012 中通过 Web 服务（应用程序集成框架）访问 AX 方法时出现异常

> ID：13948608
> 
> 赞同：0
> 
> 时间：2012-12-19T08:54:15.140
> 
> 标签：web-services, dynamics-ax-2012, aif

![访问 AX 方法的异常](../Images/797ae14dabf24bda378afaecaaccc45d.png)

这里“retrieveCustomerIds”是我试图从 web 服务访问的 AX 方法。

retrieveCustomerIds 的定义

```
[AifCollectionTypeAttribute('return', Types::String), SysEntryPointAttribute(False)]

public List retrieveCustomerIds()
{
List resultSet = new List(Types::String);

CustTable   custTable;
while select custTable

{
    resultSet.addEnd(custTable.AccountNum);
}

return resultSet;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:59:10.500

通过在我的应用程序配置文件中将 SPN 更改为空白，我获得了成功。

# windows - 如何在子进程中启动崩溃（很少）应用程序

> ID：13948611
> 
> 赞同：5
> 
> 时间：2012-12-19T08:54:23.540
> 
> 标签：windows, python-3.x, crash, subprocess

我有一个 python 应用程序，它需要每天执行大约 20 000 次专有应用程序（有时会崩溃）。

问题是当应用程序崩溃时，Windows 会自动触发[WerFault](http://www.christiano.ch/wordpress/wp-content/uploads/2012/02/WerFault_AeDebug.png)，这将使程序挂起，因此[python`subprocess.call()`](http://docs.python.org/2/library/subprocess.html#subprocess.call)将永远等待用户输入（该应用程序必须在周末、节假日、24/7 运行......所以这是不可接受的）。

如果虽然关于使用`sleep; poll; kill; terminate`但那将意味着失去使用能力`communicate()`，应用程序可以运行从几毫秒到2小时，所以设置固定超时将无效

我还尝试[打开自动调试](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204634%28v=vs.85%29.aspx)（使用一个脚本，该脚本将获取应用程序的崩溃转储并终止 id），但不知何故，这个方法在我的服务器上不起作用（WerFault 仍然出现并等待用户输入）*。*

[像这样](http://forum.notebookreview.com/windows-os-software/265458-werfault-exe-how-disable.html)的其他几个教程也没有任何效果。

**问题**：有没有办法阻止 WerFault 显示（等待用户输入）？[这是比编程问题更多的系统]

**替代问题**：python中是否有一种*优雅*的方式来检测应用程序崩溃（是否显示了*WerFault*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T23:07:53.090

`WerFault.exe`简单（和丑陋）的答案，不时监视实例，特别是与`PID`违规应用程序相关联的实例。并杀死它。处理`WerFault.exe`很复杂，但您不想禁用它 - 请参阅[Windows 错误报告](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487440.aspx)服务。

1.  按名称获取匹配的进程列表`WerFault.exe`。我使用[`psutil`](https://code.google.com/p/psutil/)包。请注意，`psutil`因为进程已缓存，请使用`psutil.get_pid_list()`.
2.  使用`argparse`. 这可能有点矫枉过正，但它利用了现有的 python 库。
3.  根据`PID`.

这是一个简单的实现。

```
def kill_proc_kidnapper(self, child_pid, kidnapper_name='WerFault.exe'):
    """
    Look among all instances of 'WerFault.exe' process for an specific one
    that took control of another faulting process.
    When 'WerFault.exe' is launched it is specified the PID using -p argument:

    'C:\\Windows\\SysWOW64\\WerFault.exe -u -p 5012 -s 68'
                             |               |
                             +-> kidnapper   +-> child_pid

    Function uses `argparse` to properly decode process command line and get
    PID. If PID matches `child_pid` then we have found the correct parent
    process and can kill it.
    """
    parser = argparse.ArgumentParser()
    parser.add_argument('-u', action='store_false', help='User name')
    parser.add_argument('-p', type=int, help='Process ID')
    parser.add_argument('-s', help='??')

    kidnapper_p = None
    child_p = None

    for proc in psutil.get_pid_list():
        if kidnapper_name in proc.name:
            args, unknown_args = parser.parse_known_args(proc.cmdline)
            print proc.name, proc.cmdline

            if args.p == child_pid:
                # We found the kidnapper, aim.
                print 'kidnapper found: {0}'.format(proc.pid)
                kidnapper_p = proc

    if psutil.pid_exists(child_pid):
        child_p = psutil.Process(child_pid)

    if kidnapper_p and child_pid:
        print 'Killing "{0}" ({1}) that kidnapped "{2}" ({3})'.format(
            kidnapper_p.name, kidnapper_p.pid, child_p.name, child_p.pid)
        self.taskkill(kidnapper_p.pid)
        return 1
    else:
        if not kidnapper_p:
            print 'Kidnapper process "{0}" not found'.format(kidnapper_name)
        if not child_p:
            print 'Child process "({0})" not found'.format(child_pid)

    return 0 
```

现在，`taskkill`函数调用`taskkill`正确的命令`PID`。

```
def taskkill(self, pid):
    """
    Kill task and entire process tree for this process
    """
    print('Task kill for PID {0}'.format(pid))
    cmd = 'taskkill /f /t /pid {0}'.format(pid)
    subprocess.call(cmd.split()) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-19T17:27:35.547

我看不出为什么你的程序需要崩溃，找到有问题的代码，并将其放入 try 语句中。

[http://docs.python.org/3.2/tutorial/errors.html#handling-exceptions](http://docs.python.org/3.2/tutorial/errors.html#handling-exceptions)

# sql - 超过 4000 个字符在 oracle 上给出字符串文字太长的错误

> ID：13948613
> 
> 赞同：1
> 
> 时间：2012-12-19T08:54:37.690
> 
> 标签：sql, database, oracle, plsql, pdo

我目前在 Codeigniter 上使用 oci8 驱动程序。在更新将包含超过 4000 个字符的字段时，我收到了一个错误：

```
 ORA-01704: string literal too long 
```

所以，通过几个博客，我得到了这个：

```
 declare
    vClobVal varchar2(32767) := 'long text'
    begin
    update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY=vClobVal 
    where FKOL_OFFICEWISE_LETTER_ID=240;
    end; 
```

在向 Toad 开枪时，这对我有用。现在，我创建了一个存储过程并编译为：

```
 CREATE OR REPLACE PROCEDURE FMIS3.UPDATE_LETTER_BODY  ( body_text IN FMS_K_OFFICEWISE_LETTER.FKOL_LETTER_BODY%type,condition_id in FMS_K_OFFICEWISE_LETTER.FKOL_OFFICEWISE_LETTER_ID%type)IS
    begin    
        update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY=body_text 
    end; 
```

这对于超过 4000 个字符再次不起作用。我不能定义 varchar2 的大小，因为它给了我错误。有什么建议么 ？

即使尝试通过绑定参数使用 PDO，也仅在字符串大小小于 4000 个字符时才有效:(

```
 $conn = new PDO("oci:dbname=".$this->db->hostname,$this->db->username,$this->db->password);
    $params = array(
        ':body_text' => "Long String"
    );
    $sth = $conn->prepare("update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY = :body_text
                            where FKOL_OFFICEWISE_LETTER_ID=241");            
    $sth->execute($params) or die('error occured'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T05:50:03.903

看一下这个 ：

```
declare
vClobVal varchar2(32767) := 'long text'
begin
update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY=vClobVal 
where FKOL_OFFICEWISE_LETTER_ID=240;
end; 
```

你确定这不受支持吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T10:03:35.133

在 PL/SQL 中，a`VARCHAR2`可以有 32767 字节，但在 SQL 中只有 4000 字节。因此`BEGIN`...`END;`块工作，因为它是 PL/SQL，而过程没有，因为它是 SQL。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T08:58:16.983

`varchar2`限制为 4000 个字符。改为使用[`CLOB`](http://www.orafaq.com/wiki/CLOB)。

# php - 没有在 magento 中发送电子邮件

> ID：13948614
> 
> 赞同：0
> 
> 时间：2012-12-19T08:54:46.667
> 
> 标签：php, email, magento, magento-1.7

我已经在`wamp->localhost`. 当我想从我的管理面板“**订单电子邮件已发送**。”向客户发送电子邮件时，会出现此消息，但电子邮件不会发送给客户。我该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:01:58.933

我想你首先知道你是否配置了 smtp？- 你在 wamp 上配置了你的 smpt 吗？

如果不是 [http://keertikiran.blogspot.com.es/2011/05/send-test-emails-with-wampserver.html](http://keertikiran.blogspot.com.es/2011/05/send-test-emails-with-wampserver.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:18:26.147

您需要在您的本地主机上安装一些 SMTP 邮件客户端，然后您才能从本地主机测试电子邮件发送功能。

# javascript - backgroundPositionX 在 Firefox 上不起作用

> ID：13948617
> 
> 赞同：38
> 
> 时间：2012-12-19T08:55:12.063
> 
> 标签：javascript, css, firefox, animation, background-position

我玩过 youtube 的精灵动画，但有一个问题。`backgroundPositionX`不能在 Firefox 下工作（但可以在 Chrome 和 IE8 上工作）......这是代码：[https ://jsfiddle.net/74RZb/](https://jsfiddle.net/74RZb/)

额外信息：问题是在Firefox下它不会改变背景位置（不会播放动画）......没有错误，只是没有改变背景位置。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-19T09:02:02.223

Firefox 不支持 backgroundPositionX，但它支持[背景位置](https://developer.mozilla.org/en/docs/CSS/background-position)

所以我们可以这样做：

```
psy.style.backgroundPosition = x+'px 0'; 
```

这将设置背景位置，首先是 X，然后是 Y。

[这里的](http://jsfiddle.net/74RZb/2/)工作示例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-02T00:53:44.917

这适用于 IE、FF 和 chrome：

背景位置：0 中心；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T21:41:36.100

这对我有用。是 X轴和 Y`NX`轴上的像素数。`NY`

```
background-position: calc(NXpx) NYpx; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-21T04:24:45.987

像这样使用：

```
background-position: calc(100% - 20px) center; // working on chrome and ff
background-position-x: calc(100% - 20px); // working on ie 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-11T05:30:32.137

你可以做这样的事情

首先安装jquery迁移

[https://github.com/jquery/jquery-migrate/#readme](https://github.com/jquery/jquery-migrate/#readme)

将这些包含在您的 html 中

$.browser 属性允许你定位你想要应用你的样式的浏览器

在这种情况下，背景位置可以更改为支持的属性 backgroundPosition

可用的标志是 - webkit - safari -opera - msie (for IE) - mozilla

IE 或 Firefox 的示例

```
if ( $.browser.msie || $.browser.mozilla) {
        $(".element").css('backgroundPosition', position + "px 0");                
} 
```

用于镀铬

```
if ( $.browser.webkit) {
        $(".element").css('backgroundPosition', position + "px 0");                
} 
```

我让我的工作和所有的 IE

干杯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-19T21:18:56.497

背景位置-x 可以在 Firefox 中工作，您只需指定一个固定的背景-y 位置。这是我编写的用于从左向右移动功能区的函数。起初，当只有一个 position-x 规范时它不起作用，它在 IE 中有效，但在 FF 中无效。这是我的解决方案。这是来自我的网站的带有评论的实际代码，适用于 IE 和 FF：

```
 //starts ribbon motion at bottom of animation div 
    function startMotion() {
        var ribbonMove = setInterval(function () { ribbonMotion() }, 50);
        var x = 0;
        var cycles = 0;

        function ribbonMotion() {
            //background position moves on the x plane and is fixed at 0 on the y plane (single plane specification does not work in FF)
            document.getElementById("ribbon").style.backgroundPosition = x + "px" + " " + 0 + "px";
            x++;
            if (x == 800 || x==1600 || x==2400 ||x==3200) {
                cycles++;

              //sets number of cycles before motion stops (max 4 cycles)  
            }
            if (cycles == 3) {
                clearInterval(ribbonMove);
            }
        }
    } 
```

# sharepoint-2010 - Sharepoint 2010 登录布局页面给出访问被拒绝错误

> ID：13948619
> 
> 赞同：0
> 
> 时间：2012-12-19T08:55:15.703
> 
> 标签：sharepoint-2010

我在共享点的 Loayout 文件夹中几乎没有登录屏幕。当我们重定向到更改密码屏幕时，它会给出拒绝访问错误。但在自定义登录页面安全问题页面等其他页面中没有。在调试模式下，我们也没有得到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:30:31.320

查看整个拒绝访问字符串。如果查看参数，您通常可以在导致访问被拒绝的问题中找到罪魁祸首或文件。当访问被拒绝时，也许您可​​以发布整个 URL？

# php - 填充一个然后换另一个以原作为基础

> ID：13948622
> 
> 赞同：0
> 
> 时间：2012-12-19T08:55:29.020
> 
> 标签：php, ajax

> **可能重复：**
> [根据先前的选择填充下拉列表](https://stackoverflow.com/questions/7203860/populating-drop-down-based-on-previous-selection)

好的，这基本上就是我想要做的。第一条语句由服务器上的表的查询填充。第二个有 3 个值：精英、核心、掠夺者。使用 AJAX 和 PHP 我试图做到这一点，所以当有人从第一个名称中选择一个名称时，第二个名称总是更改为该人数据库中的值；但是，如果发生未注意的切换，则必须保持选择状态（在这种情况下，必须更改第二个的值）。

```
<?php
echo "<select name='playername' onchange='filldata(this.value)'>";
require("/home/a9299818/public_html/DKPTools/connect.php");
$query1 = mysql_query("SELECT player.id, player.primarytoon, player.rank, IFNULL( SUM(dkp.dkp ) , 0 ) 
FROM player
LEFT OUTER JOIN dkp ON player.id = dkp.player_id
GROUP BY player.id
ORDER BY player.id");
while ($row = mysql_fetch_array($query1, MYSQL_NUM)){printf("<option value='%s'>%s</option>",$row[0],$row[1]);}
echo "</select>";
echo "<select name='rank'><option value='1'>Elite</option><option value='2'>Core</option><option value='3'>Raider</option>";
?> 
```

这个 PHP 可以正常工作并正确填充两个选择；但是我完全迷失在编码 AJAX 中，它应该将 rank.value 更改为数据库所说的任何内容，而无需刷新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:24:21.430

有2种可能性。

首先是使用 jQuery 和 Ajax。

```
function filldata(value) {
    $.ajax({
        type: "GET",
        url: "URL_TO_PHP_FILE",
        data: "playerID=" + value,
        success: function(result) {
            $("select[name=rank]").val(result);
        }
    });
} 
```

URL_TO_PHP_FILE 是 PHP 文件的 URL，您可以在其中从数据库中检索具有给定 playerID 的播放器的 rank_id。在 PHP 文件中，您应该只回显 rank_id。所以 PHP 文件看起来像这样：

```
<?php ## THE PHP FILE ##
require("/home/a9299818/public_html/DKPTools/connect.php");
$query1 = mysql_query("SELECT player.rank WHERE player.id = ".$_GET['playerID']);
$row = mysql_fetch_array($query1, MYSQL_NUM);
echo $row['rank'];
## END OF PHP FILE ## ?> 
```

第二种可能性是确保您第一次选择的选项值不等于“player_id”，而是等于“rank_id”。所以你可以写一个javascript函数..

```
function filldata(value) {
    $("select[name=rank]").val(value);
} 
```

# asp.net - ASP.NET/IIS（或 Cassini 或 IIS Express）中有多少种用户类型及其实际角色？

> ID：13948628
> 
> 赞同：2
> 
> 时间：2012-12-19T08:55:53.393
> 
> 标签：asp.net, iis, iis-7, cassini

我在询问运行 ASP.NET/IIS（或 Cassini 或 IIS Express）应用程序的用户的帐户。我问的是默认值。那里有很多混乱。谷歌搜索向我展示了很多类型的用户，例如，

*   我的计算机名\我的用户名，
*   IIS APPPOOL\ASP.NET v4 用户，
*   IIS_WPG,
*   IIS_IUSRS 用户，
*   网络服务用户，
*   AspNet 用户，
*   IUSR_MachineName 用户，
*   IIS_IUSRS 用户，
*   IUSR 用户，
*   IIS_WPG 用户，
*   IWAM_computername 用户，
*   IIS APPPOOL\DefaultAppPool 用户。

这些非常令人困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:19:46.443

Cassini 在启动 VS 的帐户下运行。所以默认是当前登录的 windows 用户，runas 将在特定用户帐户下运行。

IIS 上的应用程序使用应用程序池运行。这是来自默认站点的片段：

![在此处输入图像描述](../Images/10d25854a0bda90a279b43122e70992a.png)

每个应用程序池都可以使用高级设置进行配置：

![在此处输入图像描述](../Images/05086b02f430bdfbc97a2fefabd00552.png)

我还应该指出可能的模拟，其中上下文在模拟用户下运行。此用户可以由 IIS 或使用代码提供。以下是如何配置 IIS 模拟的示例（特定应用的身份验证选项卡）：

![在此处输入图像描述](../Images/374a35c6799880e179a13f23b3146bdc.png)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T21:07:14.203

好吧，其中之一是根据您正在运行的 Windows 版本而有所不同。其次，您要询问 3 台不同的服务器。所以这可能是让它令人困惑的原因。

## 开发服务器

首先，最简单的一个：卡西尼。此服务器在与启动它的 Visual Studio 实例相同的帐户下运行，并具有相同的权限。通常，这只是您自己的 Windows 帐户。

IIS Express 使用与 IIS 完全相同的代码库，但它也将在您自己的 Windows 帐户下运行，即启动 Visual Studio（或 Web Matrix）的相同帐户。

## IIS 6.0

现在适合IIS。在这里您可能会找到许多帐户。首先，您仍然可以在 Windows Server 2003 机器上找到的“旧”IIS 6.0 将使用以下帐户：

*   **网络服务**（*IIS 6.0 及更高版本中应用程序池的默认和推荐工作进程标识*）
*   **本地服务**（*访问权限非常有限*）
*   **本地系统**（*用于在“IIS 5.0 隔离模式”下运行的工作进程，管理员成员并具有完全访问权限*）
*   **IIS_WPG**（*工作进程组的缩写，不是账户，而是一个组，工作进程的身份应该是这个组的成员，以获得最小的所需权限*）
*   **IUSR_ComputerName**（*不用于工作进程，而是将匿名访问者映射到 Windows 帐户*）
*   **IWAM_{ComputerName}**（*对于 IIS 5.0 隔离模式，现在通常使用应用程序池进行隔离*）
*   **ASPNET**（*也适用于 IIS 5.0 隔离模式，它看起来像**ASP.NET**帐户，但在大多数情况下不是*）

（此列表基于 TechNet 文章[IIS 和内置帐户 (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/3648346f-e4f5-474b-86c7-5a86e85fa1ff.mspx?mfr=true)。）

## IIS 7 及更高版本

对于 IIS 7，上面列出的其中一些不再相关，并且一些被替换。由于这些帐户是 Windows 内置的，因此它们在任何地方都具有相同的 SSID，这可能会不时派上用场。

如果您将服务器从 Windows 2003 升级到 Windows 2008，或者如果您安装了 IIS 6.0 兼容性功能或更旧的 IIS 组件，您*可能*在一台计算机上拥有旧帐户*和*新帐户。

*   **IUSR**（*替换IUSR_{ComputerName}，因此默认用于映射匿名用户*）
*   **IIS_IUSRS**（*替换 IIS_WPG 组，因此不是帐户而是组*）

（这是基于文章[了解 IIS 7 中的内置用户和组帐户](http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis)。）

## AppPool 身份（自 IIS 7.0 起）

这个列表现在几乎完成了，但我们仍然需要了解一种特殊类型的帐户：“动态”AppPool 身份。这些不是机器上的实际帐户，例如其他帐户，例如，您无法在 Windows 中将它们列为用户。但如果您选择 ApplicationPoolIdentity 选项，它们是为应用程序池动态创建的虚拟帐户。

如果您需要授予此类帐户对文件或文件夹的访问权限，您仍然可以通过键入以下内容来搜索该帐户：**IIS AppPool{DefaultAppPool}**（将 {DefaultAppPool} 替换为您创建的应用程序池的名称）。

（您可以在 iis.net 上的[应用程序池标识中了解更多信息。）](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

当您安装 .NET 4.0 时，IIS 会添加一个新的应用程序池，以便能够与现有的 .NET 2.0 Web 应用程序一起运行新的 .NET 4.0 Web 应用程序。安装程序将此应用程序池命名为 ASP.NET v4.0，并使用选项 ApplicationPoolIdentity。因此，无论您是否使用它，都会为这个新的应用程序池创建一个动态帐户。

# seo - SEO 中的 GET 与 POST

> ID：13948642
> 
> 赞同：0
> 
> 时间：2012-12-19T08:56:29.910
> 
> 标签：seo

我的 Web 应用程序为表单提交生成的每个请求检索一个页面。该表单提交到页面的相同 URL。

每次页面加载时都会使用不同的标题标签。它是否表示具有相同 URL 的不同页面？

它如何影响搜索引擎优化？我该如何处理这种情况？

**编辑** 这个问题不是纯粹与 SEO 相关的，它需要 SEO 特定的推理或答案，它也可以从技术上解释搜索引擎机器人是如何工作的。如果它仍然对版主来说似乎离题，我要求他们解释原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:04:59.350

如果您总是加载到同一页面谷歌（或其他搜索引擎）只会索引该单个页面，请尝试使用 rewiter 规则将您的 URL 格式化为 unqiune 页面。

[http://www.seomoz.org/img/upload/anatomy-of-a-url.jpg](http://www.seomoz.org/img/upload/anatomy-of-a-url.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:02:11.040

除了每次使用不同的标题标签加载页面之外，您还需要在 URL 中附加一些独特的文本，例如 GET 变量数据。

为了被蜘蛛抓取，不要忘记将您的站点地图提交给带有相关网址的搜索引擎。

# java - 在休眠4中初始化ServiceRegistry

> ID：13948643
> 
> 赞同：1
> 
> 时间：2012-12-19T08:56:30.297
> 
> 标签：java, hibernate

由于在hibernate 3中不推荐使用buildSessionFactory方法，我们必须通过ServiceRegistry创建会话工厂。我已经创建了它，如下所示，

```
 Configuration configuration = new Configuration().configure();
 Map<String, String> map = new HashMap<String, String>((Map)configuration
       .getProperties());
 ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(map)
       .buildServiceRegistry(); 
```

但它向我显示了如下所示的 pmd 错误，

```
Multiple markers at this line
    - Type safety: The expression of type Map needs unchecked conversion to conform to Map<? extends String,? extends 
     String>
    - Map is a raw type. References to generic type Map<K,V> should be parameterized 
```

我应该如何避免它？这是因为 (Map)configuration.getProperties() 中的演员，对吗？

为什么我不能在那里使用泛型，例如，

```
(Map<String,String>)configuration.getProperties() 
```

上面也是初始化服务注册表的正确方法，因为 applySettings() 方法将 Map 作为参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:14:56.630

你*可以*使用

```
(Map<String,String>)configuration.getProperties() 
```

但它会生成一个警告，因为在执行转换时（在运行时），无法检查返回的 Map 是否具有 String 作为类型参数，因为该信息不再可用。实际上，编译后，演员表变成了

```
(Map)configuration.getProperties() 
```

看起来虽然地图在实践中可能只包含字符串，但您不应该依赖它，而应该只使用`Map<?,?>`

# android - 单例片段和内存效率

> ID：13948649
> 
> 赞同：3
> 
> 时间：2012-12-19T08:57:03.897
> 
> 标签：android, android-fragments

参考`Fragment`，有几种方法：

1.  做`Fragment`一个单例
2.  将引用存储`Fragment`为私有成员`Activity`
3.  `findFragmentById()`使用或`findFragmentByTag()`方法获取对 Fragment 的引用`FragmentManager`

就内存效率而言，哪种方式最好？在这种情况下不鼓励使用单例模式吗？

# windows-phone-7 - 应用程序暂停时对 AudioPlayerAgent 中的 UserAction 做出反应

> ID：13948651
> 
> 赞同：5
> 
> 时间：2012-12-19T08:57:13.803
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, background-audio

我有一个`BackgroundAudioPlayer`与`AudioPlayerAgent`. 一切正常，除了有一个我不知道如何处理的用例。

如果我在我的应用程序中播放音轨，然后用户切换到另一个应用程序，则音轨会继续在后台播放 - 但我猜我的应用程序现在已被交换到内存并被挂起。

我的问题是：如果用户现在开始在另一个应用程序中播放音乐，我会将该`AudioPlayerAgent.UserAction.Stop`操作作为对我的`AudioAgent`. 但是从我的应用程序的角度来看，我现在可以对此做些什么吗？我的意思是，我想保存用户在我的应用程序中的音频播放位置，但我的应用程序已暂停，对吗？

当我的应用程序处于前台并且音频停止时，我确实收到了该`BackgroundAudioPlayer.Instance.PlayerState.Stopped`事件。我通常在这里保存播放的位置。但是如果用户切换到另一个应用程序来播放音乐，我不会得到这个事件。

所以我只是想知道如何处理这种情况。我能做些什么来改善用户体验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:48:47.860

唯一的方法是将该位置保存到`Isolated Storage`代理代码中。

关于如何使用后台音频代理以及 UI 和代理端之间的通信方式，请参阅[Paul 的这篇非常有用的文章](http://blogs.msdn.com/b/wpukcoe/archive/2012/02/11/background-audio-in-windows-phone-7-5-part-1.aspx)

# php - 需要发布的标题中的 PHP Mysql 建议类别名称

> ID：13948654
> 
> 赞同：0
> 
> 时间：2012-12-19T08:57:23.907
> 
> 标签：php, mysql

```
<?php        
$colname_subselect = "-1";
if (isset($_POST['title'])) {
    $colname_subselect = $_POST['title'];
}
mysql_select_db($database_donedeal, $donedeal);
$query_subselect = sprintf("SELECT * FROM subcategories WHERE subcatename LIKE %s");
?> 
```

我正在尝试显示从上一页发布到 categories.php 页面的标题中的建议类别，例如，在上一页字段名称标题中包含文本：

`## I Want My Motor Car To Sell##`

提交后，它将转到我在上面写的查询的 categories.php。使用 LIKE 功能，当我只写一个关键字时，我能够获得建议的类别，例如我在上一页的标题字段中写了汽车，因此在 categories.php 页面中，建议的类别将显示哪些包含汽车关键字。

不，我想要的是当我发布完整的广告帖子标题时

`## I Want My Motor Car To Sell##`

我如何显示建议的类别，如上面的标题包含电机和汽车关键字，所以它应该显示在 categories.php 类别中包含汽车和电机关键字？有我吗？

我正在使用 innodb 所以 MATCH 方法将不起作用，任何其他更喜欢的方法将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:04:58.900

```
 $colname_subselect = "-1";
if (isset($_POST['title'])) {
$colname_subselect = $_POST['title'];
}
mysql_select_db($database_donedeal, $donedeal);
$queryString = trim(implode('or subcatename  like ',explode(' ',$colname_subselect )), 'or');
$query_subselect = sprintf("SELECT * FROM subcategories WHERE " . $queryString  ); 
```

请注意，您可能必须转义字符串才能停止 sql 注入。

# java - 我无法将对象从一项活动转移到另一项活动

> ID：13948662
> 
> 赞同：1
> 
> 时间：2012-12-19T08:57:55.083
> 
> 标签：java, android

我想将一个对象从一个详细信息活动发送到人员活动。我按照教程进行操作，但出现以下错误：

```
12-19 08:19:00.434: E/AndroidRuntime(1011): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.workingonlist/com.example.workingonlist.Persons}: android.os.BadParcelableException: Parcelable protocol requires a Parcelable.Creator object called  CREATOR on class com.example.workingonlist.Person 
```

这是 Person 模型：

```
public class Person implements Parcelable {

    private String name;
    private String surname;
    private String gender;

    public Person() {
        // TODO Auto-generated constructor stub
    }

    public Person(Parcel in){
        name= in.readString();
        surname= in.readString();
        gender= in.readString();
    }

    public Person(String name,String surname,String gender){
        this.name=name;
        this.surname=surname;
        this.gender=gender;
    }

        // getters and setters

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeString(surname);
        dest.writeString(gender);   
    }

    private Parcelable.Creator<Person> CREATOR = new Parcelable.Creator<Person>() {

        @Override
        public Person createFromParcel(Parcel source) {
            // TODO Auto-generated method stub
            return new Person(source);
        }

        @Override
        public Person[] newArray(int size) {
            // TODO Auto-generated method stub
            return new Person[size];
        }

    };
} 
```

这是我要发送 Person 对象的 Details Activity。

```
private View.OnClickListener onClick = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v.getId()==btn_save.getId()){
            Person p = new Person();
            p.setName(et_name.getText().toString());
            p.setSurname(et_surname.getText().toString());

            switch(rg.getCheckedRadioButtonId()){
                case  R.id.button1:{
                    p.setGender("Male");
                    break;
                }
                case R.id.button2:{
                    p.setGender("Female");
                    break;
                }
            }

            Intent i = new Intent(Details.this,Persons.class);
            i.putExtra("person",p);  
            startActivity(i);
        }
    }
}; 
```

这是我想要获取 Person 对象的 Persons Activity。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    PersonAdapter adapter = new PersonAdapter();

    setContentView(R.layout.persons);
    Bundle b = getIntent().getExtras();
    if (b != null) {
        Person p = b.getParcelable("person");
        adapter.add(p);
    }

    setListAdapter(adapter);
} 
```

我能做些什么来解决这个问题？任何帮助表示赞赏。在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:08:58.890

你需要设置你的 CREATOR public static final：

```
public static final Parcelable.Creator CREATOR = new Parcelable.Creator() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:00:59.517

查看处理您的问题的本教程

```
public static final Parcelable.Creator CREATOR =
        new Parcelable.Creator() {
            public Person createFromParcel(Parcel in) {
                return new Person(in);
            }

            public Person[] newArray(int size) {
                return new Person[size];
            }
        }; 
```

[http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T02:28:30.953

出于某种原因，我无法对 Festus Tamakloe 的回答添加评论，但我只想补充一点，这对我有帮助。我正在关注一些使用静态创建器的教程。我没有“公开”！

因此，请确保您已公开。

# google-apps-script - Google Apps 脚本随机停止或拒绝启动

> ID：13948663
> 
> 赞同：2
> 
> 时间：2012-12-19T08:57:58.453
> 
> 标签：google-apps-script

我在 Google Drive 电子表格中开发了一个 Google Apps 脚本，它处理带有特定标签（下​​载通知）的电子邮件并将这些添加到电子表格中。我正在通过电子表格的脚本编辑器运行它。

我最初的解决方案效率很低——每次对所有电子邮件都重复整个分析，这导致运行时间每天都在增加。前几天我收到一条错误消息“超出运行时间”，这并不奇怪。

我的问题是，当尝试更新脚本以提高效率时，我遇到了一些奇怪的问题。该脚本要么在处理几封电子邮件后随机停止，要么只是拒绝启动。特别是脚本调试器，它开始加载但从未启动。

在过去的几天里，我已经尝试了几次，甚至使用相同的代码（在同一个帐户中）创建了一个新的电子表格，但仍然存在这些问题。

有时当脚本设法运行一段时间时，我注意到脚本输出日志与日志记录中的最近更改不匹配。我当然在运行之前保存了脚本。感觉好像有一些锁阻止我的脚本运行/更新/刷新？

这里有没有人认识到这些问题？

代码附在下面。两个相关的切入点是：

processInbox：根据带有特定标签的新（加星标）电子邮件更新电子表格。标签和星号由接收时的电子邮件过滤器设置。处理后从每条消息中删除星号（表示“新”）。

resetAllMsgs：清除电子表格并对所有相关消息加注星标，使 processInbox 处理收到的所有带有相关标签的消息。

```
function resetAllMsgs() {
  Logger.log("Starting ResetAll");

  var d = SpreadsheetApp.getActive();

  var dl_sheet = d.getSheetByName("Download List");
  var dlperday_sheet = d.getSheetByName("DownloadsPerDay");

  dl_sheet.clear();
  dlperday_sheet.clear();

  Logger.log("Clearing spreadsheet");

  dl_sheet.appendRow(["", "", "Downloads", ""]);
  dl_sheet.appendRow(["", "", "Downloaders", ""]);

  dl_sheet.appendRow(["Last Download Date", "First Download Date", "Email" , "Product", "Download Count"]);

  dlperday_sheet.appendRow(["Date", "Download Count"]);

  var label = GmailApp.getUserLabelByName("Download Notification");

  // get all threads of the label
  var threads = label.getThreads();

  for (var i = 0; i < threads.length; i++) {
    // get all messages in a given thread
    var messages = threads[i].getMessages();

    Logger.log("Starring thread " + i);

    for (var j = 0; j < messages.length; j++) {

      Logger.log("   Starring message " + j);

      // Only starred messages are processed by processInbox
      messages[j].star();

      Utilities.sleep(100);

    }
  }
};

function processInbox() {

  var d = SpreadsheetApp.getActive();

  var dl_sheet = d.getSheetByName("Download List");
  var dlperday_sheet = d.getSheetByName("DownloadsPerDay");

  // If empty spreadsheet, reset the status of all relevant e-mails and add the spreadsheet headers
  if (dl_sheet.getLastRow() <= 1) {
    resetAll();
  }

  var label = GmailApp.getUserLabelByName("Download Notification");
  var k = 0;

  // get all threads of the label
  var threads = label.getThreads();

  for (var i = 0; i < threads.length; i++) {

    if (threads[i].hasStarredMessages()) {

      // get all messages in a given thread
      var messages = threads[i].getMessages();

      // iterate over each message
      for (var j = 0; j < messages.length; j++) {

        // Unread messages are not previously processed...
        if (messages[j].isStarred()) {

          var msg = messages[j].getBody();

          msg = msg.replace(/\r?\n/g, "");

          var email = getDownloader(msg);

          if (email == "") {
            Logger.log("Found no downloader info: " + messages[j].getSubject() + " " + messages[j].getDate());
          }

          var date = formatDate(getDownloadDate(msg));

          // Check if a new date
          var dateCell = find(date, dlperday_sheet.getDataRange(), 0);

          if (dateCell == null) {
            // If new date, append row in "downloads per day"
            dlperday_sheet.appendRow([date, 1]);
            dlperday_sheet.getRange(2, 1, dl_sheet.getLastRow()-1, 2).sort([1]);
          }
          else
          {
            // If existing date, update row in "downloads per day"
            var dlcount = dlperday_sheet.getRange(dateCell.getRow(), dateCell.getColumn()+1).getValue();
          }

          var productname = getProductName(msg);

          // Check if e-mail (user) already exists in the downloads list
          var matchingCell = find(email, dl_sheet.getDataRange(), 0);

          if ( matchingCell != null ) { 
            // If user e-mail exists, update this row

            var lastDownloadDate = dl_sheet.getRange(matchingCell.getRow(), matchingCell.getColumn()-1).getValue();
            var lastDownloadCount = dl_sheet.getRange(matchingCell.getRow(), matchingCell.getColumn()+2).getValue();

            if (lastDownloadDate != date) {                
              dl_sheet.getRange(matchingCell.getRow(), matchingCell.getColumn()-1).setValue(date);                
            }

            dl_sheet.getRange(matchingCell.getRow(), matchingCell.getColumn()+2).setValue(lastDownloadCount+1);          

          }
          else // If new user e-mail, add new download row
          {
            dl_sheet.appendRow([date, date, email, productname, 1]);
            dl_sheet.getRange(2, 4).setValue(dl_sheet.getRange(2, 4).getValue() + 1);  
            dl_sheet.getRange(4, 1, dl_sheet.getLastRow()-3, 5).sort([1]);
          }

          // Mark message as processed, to avoid processing it on the next run
          messages[j].unstar();

        }
      }
    }
  }     
};

/**
 * Finds a value within a given range. 
 * @param value The value to find.
 * @param range The range to search in.
 * @return A range pointing to the first cell containing the value, 
 *     or null if not found.
 */
function find(value, range, log) {
  var data = range.getValues();
  for (var i = 0; i < data.length; i++) {
    for (var j = 0; j < data[i].length; j++) {
      if (log == 1)
      {
        Logger.log("Comparing " + data[i][j] + " and " + value);
      }
      if (data[i][j] == value) {
        return range.getCell(i + 1, j + 1);
      }
    }
  }
  return null;
};

function getDownloader(bodystring) {
  var marker = "Buyer Info";
  var marker_begin_index = bodystring.indexOf(marker, 1000);
  var email_begin_index = bodystring.indexOf("mailto:", marker_begin_index) + 7;

  var email_end_index = bodystring.indexOf("\"", email_begin_index);

  if (email_end_index < 1000)
  {
    return "";
  }

  var email = bodystring.substring(email_begin_index, email_end_index);

  if (log == 1)
  {
    Logger.log("Found e-mail address: " + email + "");
    Logger.log("   marker_begin_index: " + marker_begin_index);
    Logger.log("   email_begin_index: " + email_begin_index);
    Logger.log("   email_end_index: " + email_end_index);
  }

  latestIndex = email_end_index;

  return email;

};

function formatDate(mydate)
{  
  var str = "" + mydate;

  var dateParts = str.split("/");

  var day = dateParts[1];
  if (day.length == 1)
    day = "0" + day;

  var month = dateParts[0];
  if (month.length == 1)
    month = "0" + month;

  return dateParts[2] + "-" + month + "-" + day; 
};

function getDownloadDate(bodystring) {
  var marker = "Download Date:</strong>";
  var marker_begin_index = bodystring.indexOf(marker, latestIndex);
  var date_begin_index = marker_begin_index + marker.length;

  var date_end_index = bodystring.indexOf("<br>", date_begin_index);

  latestIndex = date_end_index;

  return bodystring.substring(date_begin_index, date_end_index).trim();  
};

function getProductName(bodystring) {
  var marker = "Item:</strong>";
  var marker_begin_index = bodystring.indexOf(marker, latestIndex);
  var pname_begin_index = marker_begin_index + marker.length;
  var pname_end_index = bodystring.indexOf("</td>", pname_begin_index);

  latestIndex = pname_end_index;

  return bodystring.substring(pname_begin_index, pname_end_index).trim();

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:43:54.647

更新：我运行的任何脚本都会在大约 5 秒后停止，即使它没有调用任何服务。我尝试了以下代码：

```
function test() {
  Logger.log("Test begins");
  Utilities.sleep(5000);
  Logger.log("Test ends");
} 
```

脚本在大约 5 秒后终止，但没有打印最后一行。如果将延迟减少到 3 秒，则它的行为与预期相同。

另外，为了让修改后的脚本能正常更新，我需要保存，启动，点击取消，然后重新启动，否则日志输出好像是老版本的。（我正在通过脚本编辑器运行它。）

此外，即使对于上面的小脚本，调试器也拒绝启动。我的帐户似乎有问题（johan.kraft@percepio.se）。有没有谷歌员工可以检查这个？

# asp.net - 如何隐藏基于表单的经过身份验证的用户的内容

> ID：13948665
> 
> 赞同：2
> 
> 时间：2012-12-19T08:58:13.723
> 
> 标签：asp.net, sharepoint, forms-authentication

我有一个要求，例如我想将数据（列表/库/文档）隐藏给基于表单进行身份验证的用户。Windows 用户可以将数据添加到共享点列表中。基于表单的经过身份验证的用户只能看到经过 Windows 身份验证的用户何时授予权限。我想为基于表单的身份验证创建一个组，但我们无法隐藏它们的数据，所以这不起作用。这个怎么做 ？我正在考虑这个问题，但无法找到解决方案。任何人有任何想法？

**新增内容：**

实际上，我们可以在备用访问映射中配置同一个站点的两个 url（比如 URL1、URL2）。只应向外部用户公开一个 url (URL2)。因此，当任何外部用户登录（表单用户）时，我们必须显示由 Windows 身份验证用户授予访问权限的内容。意味着当 Windows 用户向 URL1 添加一些内容并为表单身份验证用户授予权限时，该内容应该出现在 URL2 中。默认情况下，在 URL1 中添加的内容将反映到 URL2。但在这里它不应该发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:38:16.303

原则上，复制您的站点并修改副本以使其比原始站点更受限制应该没有问题。

如果两个网站都在同一个网站集中，您可以将它们配置为使用相同的列表/文档库。

完成此操作后，只需将 AAM 配置为在外部呈现一个站点，在内部呈现一个站点。

# android - 如何使用 AIDL 远程服务来处理不同客户端的并发请求？

> ID：13948671
> 
> 赞同：5
> 
> 时间：2012-12-19T08:58:22.073
> 
> 标签：android, parcelable, aidl, android-binder

我正在编写一个插件，它定义了一个远程服务并为第 3 方开发人员提供了一个 AIDL 接口。

如何使用此远程服务来处理不同客户端的并发请求？

就是service apk的activity可以为每个client保持状态，当它们相互切换时，怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-11T06:07:56.633

这可以使用带有 Looper 的 HandlerThread 来实现，它维护和服务所有来自 100 个应用程序的请求。

由于请求将通过这些回调提供，因此还需要添加此 AIDL 回调接口。

***服务器应用***

**IAidlService.aidl**

```
interface IAidlService {
    void getStockInfo(IAidlCallback callback);
} 
```

**IAidlCallback.aidl**

```
oneway interface IAidlCallback {
    void handleStockInfo(in Stock stockinfo);
} 
```

**股票.aidl**

```
parcelable Stock; 
```

**Stock.java**

```
public class Stock implements Parcelable {

String stockName;

public String getStockName() {
    return stockName;
}

public void setStockName(String stockName) {
    this.stockName = stockName;
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(stockName);
}

public static final Creator<Stock> CREATOR = new Parcelable.Creator<Stock>() {
    @Override
    public Stock createFromParcel(Parcel in) {
        return new Stock(in);
    }

    @Override
    public Stock[] newArray(int size) {
        return new Stock[size];
    }
};

public Stock(Parcel in) {
    this.stockName = in.readString();
}

public Stock() {}
} 
```

**AidlService.java**

这是覆盖 AIDL 服务方法并实现它们的主要服务类。它还处理请求的返回以及对请求它的特定应用程序的输出。

```
public class AidlService extends Service {

private static final int MSG_STOCK_INFO = 53;

private ArrayList<IAidlCallback> mRemoteCallbacks;

private ServiceHandler mHandler = null;

HandlerThread mHandlerThread = new HandlerThread("AidlServiceThread");

@Override
public void onCreate() {
    super.onCreate();

    mRemoteCallbacks = new ArrayList<>();
}

@Override
public IBinder onBind(Intent intent) {

    // Handler Thread handling all call back methods
    mHandlerThread.start();
    mHandler = new ServiceHandler(mHandlerThread.getLooper());

    return mBinder;
}

/**
 * Stub implementation for Remote service
 */
IAidlService.Stub mBinder = new IAidlService.Stub() {

    @Override
    public void getStockInfo(IAidlCallback callback) throws RemoteException {

        sendMsgToHandler(callback, MSG_STOCK_INFO);
    }
};

/**
 * Create handler message to be sent
 *
 * @param callback
 * @param flag
 */
void sendMsgToHandler(IAidlCallback callback, int flag) {

    mRemoteCallbacks.add(callback);

    Message message = mHandler.obtainMessage();
    message.arg1 = mRemoteCallbacks.size() - 1;

    message.what = flag;
    mHandler.sendMessage(message);
}

/**
 * Handler class sending result in callback to respective
 * application
 */
private class ServiceHandler extends Handler {
    int callbackIndex = 0;

    ServiceHandler(Looper looper) {
        super(looper);
    }

    @Override
    public void handleMessage(Message msg) {
        callbackIndex = msg.arg1;

        switch (msg.what) {

            case MSG_STOCK_INFO:

                Stock stock = new Stock();
                stock.setStockName("Apple Inc");

                try {
                    mRemoteCallbacks.get(callbackIndex).handleStockInfo(stock);
                } catch (RemoteException e) {
                    e.printStackTrace();
                }
                break;
        }
    }
}
} 
```

***客户端应用***

在任何客户端应用程序中创建一个`ServiceConnection`并绑定到服务后，您只需为“IAidlCallback”创建 Stub 类，并将对象与**getStockInfo**调用一起发送。喜欢：

```
IAidlCallback.Stub callback = new IAidlCallback.Stub() {
    @Override
    public void handleStockInfo(Stock stockinfo) throws RemoteException {

        // do what ever you want with stock info :)
    }
}; 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:21:14.430

与编写多线程服务器没有太大区别。您为每个客户端保留线程本地状态，并可能给他们某种会话 ID，以便您知道与谁交谈。

# c# - 如何将模型与特定骨骼上的另一个模型联系起来？

> ID：13948673
> 
> 赞同：1
> 
> 时间：2012-12-19T08:58:26.957
> 
> 标签：c#, model, xna, game-engine, mesh

正对“骨头”准确地遇到一个模型对另一个模型附加的困难。我搜索了几个论坛，但没有结果。我看到很多人都问过同样的问题，但没有真正的结果，没有任何回应。发现线程：

[https://gamedev.stackexchange.com/questions/21129/how-to-attach-two-xna-models-together](https://gamedev.stackexchange.com/questions/21129/how-to-attach-two-xna-models-together)

[https://gamedev.stackexchange.com/questions/44515/how-can-i-attach-a-model-to-the-bone-of-another-model](https://gamedev.stackexchange.com/questions/44515/how-can-i-attach-a-model-to-the-bone-of-another-model)

[https://stackoverflow.com/questions/11391852/attach-model-xna](https://stackoverflow.com/questions/11391852/attach-model-xna)

但我认为这是可能的。

这是我的代码示例，附有我的玩家手的“立方体”

```
private void draw_itemActionAttached(Model modelInUse)
    {
        Matrix[] Model1TransfoMatrix = new Matrix[this.player.Model.Bones.Count];
        this.player.Model.CopyAbsoluteBoneTransformsTo(Model1TransfoMatrix);
        foreach (ModelMesh mesh in modelInUse.Meshes)
        {
            foreach (BasicEffect effect in mesh.Effects)
            {
                Matrix model2Transform = Matrix.CreateScale(1f) * Matrix.CreateFromYawPitchRoll(0, 0, 0);

                effect.World = model2Transform * Model1TransfoMatrix[0]; //root bone index
                effect.View = arcadia.camera.View;
                effect.Projection = arcadia.camera.Projection;
            }
            mesh.Draw();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:42:14.960

方法可能会有所不同，但一种常见的方法是为您的“装备”添加一个或多个骨骼，无论它们是否是手持的。这样，对象的骨骼可以在运行时添加到玩家的骨骼中，从而在所需位置“装备”物品。

一些阅读：[http ://en.csharp-online.net/XNA_Game_Programming%E2%80%94PlayerWeapon](http://en.csharp-online.net/XNA_Game_Programming%E2%80%94PlayerWeapon)

# c - 使用 fprintf 管道分离输出...优化方式

> ID：13948680
> 
> 赞同：0
> 
> 时间：2012-12-19T08:58:47.433
> 
> 标签：c

我必须修改一个现有的代码，其中有很多这样的 fprintf 语句

```
 fprintf (stdout, "%-30.30s",reason); 
```

但是现在如果用户在主参数中传递了“T”，那么我将打印由分隔符“|”分隔的输出

我的文件中有几个 fprint。

目前，如果用户想要管道分隔输出，我已经采用了一个设置为 true 的标志。

```
 if(flag)
          fprintf (stdout, "%-30.30s|",reason);
    else
          fprintf (stdout, "%-30.30s",reason); 
```

如果有任何其他更好的方法来实现这一点，请建议我。请注意，我的文件中有几个 fprintf。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:03:13.927

```
char *separator = flag ? "|" : "";

fprintf(stdout, "%-30.30s%s", reason, separator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:22:33.667

一个班轮：

```
fprintf (stdout, "%-30.30s%c",reason,(flag?'|':'\0')); 
```

对于代码中的多个 fprintf，您可以简单地编写一个宏或一个内联函数，它们基于一组参数进行打印。编写一个包装函数并使用有效参数调用该包装函数。根据您的程序规范（从您的问题中不清楚），您将必须找到编写包装函数的最佳方法。

例如：

将所有 fprintf 内容放在这样的包装函数中，并仅使用标志和案例编号进行调用。

```
//Illustrative purposes only
void wrapper(int flag, int caseno,char* reason)
{
if(reason!=NULL)
switch(caseno)
{
case 1:
   fprintf(stdout,"xyz%s",reason);
   break;
case 2:
   fprintf(stdout,"abc%s",reason);
   break;
...
}

fprintf (stdout, "%c",(flag?'|':'\0'));

return;
} 
```

由于您正在向 o/p 写入错误，因此我建议您使用`stderr`而不是`stdout`.

# java - Intellij IDEA 字符串处理功能和从属性文件中检索消息

> ID：13948683
> 
> 赞同：2
> 
> 时间：2012-12-19T08:58:54.373
> 
> 标签：java, internationalization, intellij-idea

我最近偶然发现了 Intellij IDEA 中的一个简洁功能，它让我质疑我的一种做法。这是字符串自动完成。基本上，如果我在属性文件中定义一个键值对，然后开始在 java 代码中键入一个字符串，该字符串将保存值作为属性文件中的键，IDEA 可以自动完成它。更多，我可以用 ctrl+click 导航到它并且可以重构它！

我所说的做法与显示属性文件中的值有关。我目前正在为此使用枚举，其类型与属性文件中的键具有相同的名称。我这样做是因为我获得了类型检查和重构。但似乎我可以通过在 IDEA 中使用字符串来获得相同的好处（嗯，它并没有真正给我类型检查，但它有点接近）。

我想知道你们中是否有人使用简单的字符串值来检索消息。这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:32:40.697

一个折衷方案是让枚举具有属性，其中枚举值是属性字符串。通过这种方式您可以获得类型安全，IDEA 将识别枚举值来自属性并让您轻松导航到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:17:42.437

我不认为这是一个好习惯。开发应用程序时不应依赖 IDE。如果其他人使用例如eclipse，他就有机会搞砸这一切。我喜欢使用枚举而不是字符串的解决方案，只是因为它提供了编译时间检查。您甚至可以构建您的枚举，以便它还读取属性文件，并且枚举中的每个项目都包含属性文件中的键和值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:44:01.503

如果他们抱怨向他们展示这个问题（以及许多其他问题），使用 Enum 并让与您一起工作的每个人都使用 intellij 可能会更好。

还值得牢记的是，一些字符串值需要编译时常量，这使事情[变得更复杂一些](https://stackoverflow.com/a/562906/106261)。

# android - 打开跟踪文件时出错：logcat 中没有这样的文件或目录 (2)

> ID：13948684
> 
> 赞同：1
> 
> 时间：2012-12-19T08:58:56.810
> 
> 标签：android, mysql, jdbc

```
String URL = "jdbc:mysql://localhost:3306/test";
String USER = "root";
String PASS = "root";
Connection con = DriverManager.getConnection(URL,USER,PASS); 
```

我正在连接 jdbc mysql 但它无法连接，我得到了

打开跟踪文件时出错：没有这样的文件或目录 (2)

在logcate中，请任何人帮助我并告诉我该怎么做？

# c++ - 为嵌套模板推导模板参数失败

> ID：13948692
> 
> 赞同：5
> 
> 时间：2012-12-19T08:59:48.637
> 
> 标签：c++, templates, compiler-errors

好的，我通读了很多“无法推断模板参数”的问题，但似乎没有一个与我的情况相符——或者我不明白答案……</p>

我觉得有[一个方向是正确的，但我未能为我的问题提取解决方案。](https://stackoverflow.com/questions/4630941/failed-to-specialize-function-template "问题 4630941")

我的标题中的精简代码如下所示：

```
template<typename T>
class TemplateProblem
{
public:
    // Do I really need this or did I miss something from the STL?
    template<typename Tin, typename Tout>
    struct UnaryFunction : public std::unary_function<Tin, Tout>
    {
        virtual Tout operator()(Tin input) = 0;
    };

    template<typename Tin, typename Tout>
    struct StaticCast : public UnaryFunction<Tin, Tout>
    {
        virtual Tout operator()(Tin input)
        {
            return static_cast<Tout>(input);
        }
    };

private:
    T * const _data;
    T const _bias;

    template<typename Tin>
    void Init(Tin * data, int length, UnaryFunction<Tin, T> mapper, Tin bias);

public:
    template<typename Tin>
    TemplateProblem(Tin * data, int length, Tin bias = Tin());

    template<typename Tin>
    TemplateProblem(Tin * data, int length, UnaryFunction<Tin, T> mapper, Tin bias = T());
};

template<typename T>
template<typename Tin>
void TemplateProblem<T>::Init(Tin * data, int length, UnaryFunction<Tin, T> mapper, Tin bias)
{
    T mappedBias = mapper(bias);
    for (int i = 0; i < length; i++)
    {
        _data[i] = data[i] + mappedBias;
    }
}

template<typename T>
template<typename Tin>
TemplateProblem<T>::TemplateProblem(Tin * data, int length, UnaryFunction<Tin, T> mapper, Tin bias = T())
    : _data(new T[length]), _bias(bias)
{
    Init(data, length, mapper, bias);
}

template<typename T>
template<typename Tin>
TemplateProblem<T>::TemplateProblem(Tin * data, int length, Tin bias = T())
    : _data(new T[length]), _bias(bias)
{
    StaticCast<Tin, T> cast;
    Init(data, length, cast, bias);
} 
```

我这样实例化它：

```
unsigned char pixels[] = {23, 42, 65, 97};
TemplateProblem<int> tp(pixels, 4); 
```

从 VS2012 我收到这些消息：

```
Error   1   error C2784: 'void TemplateProblem<T>::Init(Tin *,int,TemplateProblem<T>::UnaryFunction<Tin,T>,Tin)' : could not deduce template argument for 'TemplateProblem<T>::UnaryFunction<Tin,T>' from 'TemplateProblem<T>::StaticCast<Tin,Tout>'    ...\templateproblem.h   62  1   TemplateProblem
Error   2   error C2893: Failed to specialize function template 'void TemplateProblem<T>::Init(Tin *,int,TemplateProblem<T>::UnaryFunction<Tin,T>,Tin)' ...\templateproblem.h   62  1   TemplateProblem 
```

正如[这个答案](https://stackoverflow.com/questions/12640808/nested-template-and-parameter-deducing "问题12640808")所暗示的，当我将两个`struct`s 移出时，也会发生错误。`class`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:32:33.020

编译器错误对于指示实际问题不是很有帮助。

实际问题是您将`UnaryFunction<Tin, T>`值传递给您的`Init`函数（以及构造函数之一），但`UnaryFunction<>`结果的所有实例化都在一个抽象类中（不能按值传递）。简单的解决方案是使用传递引用 for `UnaryFunction`，以便`mapper`引用传入的实际对象。

STL 中传递函子的典型解决方案是使用单独的模板参数，如下所示：

```
template<typename T>
template<typename Tin, Tmapper>
void TemplateProblem<T>::Init(Tin * data, int length, Tmapper mapper, Tin bias)
{
    T mappedBias = mapper(bias);
    for (int i = 0; i < length; i++)
    {
        _data[i] = data[i] + mappedBias;
    }
} 
```

那么你就不需要`UnaryFunctionL<>`基类了。如果`mapper`传递了一个不兼容的，这将在函数体中使用时被诊断出来。

# php - 使用 PHP 进行亚马逊 MWS 产品 API XML 解析

> ID：13948694
> 
> 赞同：3
> 
> 时间：2012-12-19T08:59:58.080
> 
> 标签：php, xml-parsing, amazon-web-services

我正在尝试使用 Simplexml 解析响应的 XML 部分，而不会丢失 "Komponist" 或 "Künstler" 等“角色”信息。

```
<itemattributes xml:lang="de-DE" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<ns2:binding>Audio CD</ns2:binding>
<ns2:brand>MEYER,SABINE/VARIOUS</ns2:brand>
<ns2:creator role="Künstler">Meyer,Sabine</ns2:creator>
<ns2:creator role="Künstler">Various</ns2:creator>
<ns2:creator role="Komponist">Mozart</ns2:creator>
<ns2:creator role="Komponist">Stamitz</ns2:creator>
<ns2:creator role="Komponist">Weber</ns2:creator>
<ns2:creator role="Komponist">Krommer</ns2:creator>
</ns2:itemattributes> 
```

我试过这个：

```
 $nodeList = $attributeSets->getAny();
    foreach ($nodeList as $domNode){
        $domDocument =  new DOMDocument();
        $domDocument->preserveWhiteSpace = false;
        $domDocument->formatOutput = true;
        $xmlData = $domDocument->saveXML($domDocument->importNode($domNode,true));

    }
    //$xmlData  = str_replace("ns2:", "", $xmlData);
    $xmlData = new SimpleXMLElement($xmlData); 
```

但是如果我不替换 ns2 属性，我就无法解析 xml。并且取消注释该行，角色属性消失了：

```
SimpleXMLElement Object
(
    [Binding] => Audio CD
    [Brand] => MEYER,SABINE/VARIOUS
    [Creator] => Array
    (
        [0] => Meyer,Sabine
        [1] => Various
        [2] => Mozart
        [3] => Stamitz
        [4] => Weber
        [5] => Krommer
    )
) 
```

我想知道，我怎样才能保存这些属性，也许最后我怎样才能把整个 XML 放到一个关联数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:28:18.740

解决方案是：

```
$attributeSets = $product->getAttributeSets();
if ($attributeSets->isSetAny()){
$nodeList = $attributeSets->getAny();
$xmlData =  getXMLData($nodeList);
foreach ($xmlData as $node) {
         foreach($node->attributes() as $name => $value) {
             if($node->getName() == "Creator")
             {
                 $array['Creator'][] = array(
                     "name" => $node,
                     "role" => $value
                 );
             }
         }
     }

}

function getXMLData($nodeList)
{
    foreach ($nodeList as $domNode){
        $domDocument = new DOMDocument;
        $domDocument->preserveWhiteSpace = false;
        $domDocument->formatOutput = true;
        $xml = $domDocument->saveXML($domDocument->importNode($domNode,true));
    }
    return new SimpleXMLElement($xml, false, false, 'ns2', true);
} 
```

编码也非常重要，我遇到了 iso 编码和变音符号的问题，这就是 SimpleXMLElement 构造函数崩溃的原因......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:28:31.433

确保修复第一行以包含命名空间：

```
$xml = <<< XML
<ns2:itemattributes xml:lang="de-DE" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
 <ns2:binding>Audio CD</ns2:binding>
 <ns2:brand>MEYER,SABINE/VARIOUS</ns2:brand>
 <ns2:creator role="Künstler">Meyer,Sabine</ns2:creator>
 <ns2:creator role="Künstler">Various</ns2:creator>
 <ns2:creator role="Komponist">Mozart</ns2:creator>
 <ns2:creator role="Komponist">Stamitz</ns2:creator>
 <ns2:creator role="Komponist">Weber</ns2:creator>
 <ns2:creator role="Komponist">Krommer</ns2:creator>
</ns2:itemattributes>
XML; 
```

然后执行以下操作以获取角色属性：

### 使用 DOM

```
$dom = new DOMDocument;
$dom->loadXML($xml);
foreach ($dom->getElementsByTagName('creator') as $creator) {
    printf(
        'Role: %s - Value: %s%s',
        $creator->getAttribute('role'),
        $creator->nodeValue,
        PHP_EOL
    );
} 
```

### 使用 SimpleXml

```
$itemAttributes = new SimpleXMLElement($xml, null, false, 'ns2', true);
foreach ($itemAttributes->creator as $creator) {
    $attributes = $creator->attributes();
    printf(
        'Role: %s - Value: %s%s',
        $attributes['role'],
        $creator,
        PHP_EOL
    );
} 
```

# javascript - 文件传输下载phonegap问题

> ID：13948699
> 
> 赞同：3
> 
> 时间：2012-12-19T09:00:17.923
> 
> 标签：javascript, android, cordova

尝试使用[Filetransfer phonegap](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileTransfer) for android下载文件

但是由于下载错误而无法下载文件（**错误代码= 1 即 FileError.NOT_FOUND_ERR**）

以下是代码：（其中**url 为** [http://samplepdf.com/sample.pdf](http://samplepdf.com/sample.pdf)）

```
function downloadImage(url,fileName){
    var fileTransfer = new FileTransfer();
    fileTransfer.download(
        url,
        window.rootFS.fullPath+ "/" + fileName,
        function(entry) {
            alert("download complete: " + entry.fullPath);
        },
        function(error) {
            alert("download error"+JSON.stringify(error));
        }
    );
} 
```

1.  检查了 window.rootFS.fullPath+ "/" + fileName 给出了/mnt/sdcard/myFileName。试图通过仅使用目录名（即 /mnt/sdcard）来更改完整路径，但仍然没有用，同样的错误。

2.  错误是该文件不存在，但确实存在。（您可以通过转到上面的 samplepdf 链接来查看）。

3.  我还允许在 android.res/xml/ 中的所有 url 访问。

4.  **奇怪的是，JSON 错误对象字符串将 HTTP 状态设为 200(success)**。

    谁能提出问题可能出在哪里，或解决它:)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T16:36:33.510

问题在于android中的权限。在清单文件中添加以下内容

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# iphone - 用数据填充 TableView 部分？

> ID：13948701
> 
> 赞同：2
> 
> 时间：2012-12-19T09:00:18.777
> 
> 标签：iphone, objective-c, ios, uitableview

我在一个数组中有一个字典，其中包括名称、图片和日期等属性（日期只是 a 中的一个字符串`picker view`）。

我想显示每周表格视图并按天排列项目。

我打算做的是每天创建一个新数组，将我所有的数据过滤到这些数组中，然后填充这些部分。有更聪明的方法吗？

`numberOfRowsInSection`如果我不先过滤我的数据，我想不出另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:09:35.803

另一种方法是在每次需要为`-tableView:numberOfRowsInSection:`. 你会

*   找出哪一天对应于请求的部分，然后
*   根据那一天过滤您的字典数组并返回一个计数

执行此操作的某些代码（未编译，未测试）可能类似于：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSString *day = [self _dayForTableViewSection:section]; // assuming this exists
    NSPredicate *filter = [NSPredicate predicateWithBlock:^(id obj, NSDictionary *bindings) {
        assert([obj isKindOfClass:[NSDictionary class]]); // array contains dictionaries
        return [obj[@"day"] isEqualToString:day]; // assuming key is @"day"
    }];
    NSArray *matchingDictionaries = [self.allDictionaries filteredArrayUsingPredicate:filter]; // assuming data source is allDictionaries
    return matchingDictionaries.count;
} 
```

根据您的代码调用频率`-tableView:numberOfRowsInSection:`和完整数据源的大小，这可能会导致相当严重的性能损失。您最好按照最初的建议进行操作：提前过滤数据并保持适当的数组为最新，以便在表格视图中使用。（但请记住，过早的优化往往弊大于利！）

# c - 有人可以使用可视图解释 C 中的 **param 和 *param 之间的区别吗？

> ID：13948709
> 
> 赞同：-1
> 
> 时间：2012-12-19T09:00:51.370
> 
> 标签：c

特别是，为什么对参数`*param`的更改不会传播回函数的调用者，但对参数的更改`**param`会传播回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:22:14.743

在这两种情况下，更改都会传播，但这取决于调用函数。

看下面的案例（因为你没有给出任何代码，所以我假设一个一般情况）

著名的交换功能

```
int a=5,b=10;
swap(&a,&b) // Calling by address

void swap(int *paramA,int *paramB)
{ 
// Do the swap
} 
```

您会看到，即使仅在函数定义中`*params`，更改也会反映回调用环境。

但在其他情况下`*param`可能无法反映何时通过值，手段，

看到这段代码，

```
int a;
int *p = &a;

foo(p); // calling by value

void foo(int *param)
{
 // if you do anything or change param to point to some other memory location
 // then it will not be reflected back and p still be pointing to a.
} 
```

而如果你这样做

```
foo(&p); //calling 

void foo(int **param)
{
 // if you do anything or change param to point to some other memory location
 // then it must be reflected back in calling environment.
} 
```

这些东西`Pass by value`在`Pass by Address`调用`C`函数时被调用。

我希望你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:27:36.663

`int param`是一个变量，即数据。

`int * param`是*指向*变量的指针，即数据的内存地址。

`int * * param`*指针*是一个指向变量的指针，即一个内存地址的内存地址的数据。

等等。

当使用变量作为参数调用函数时，该参数被*复制*到堆栈（按值调用）。函数对其参数所做的任何更改实际上都是在副本上完成的，当函数返回时，副本与堆栈帧的其余部分一起被销毁。

```
void foo( int x )
{
    x = 23;     // any changes done on x are strictly local
}

int main()
{
    int a = 42;
    foo( a );   // no matter what foo() does, a will still be 42.
    return 0;
} 
```

如果您将*指向*变量的指针作为参数传递给函数，它同样会被复制 - 但内存地址的副本仍然指向相同的内存地址，因此函数可以*访问*该内存地址（即原始变量，而不是它在堆栈上的副本）。函数对该内存地址的内容所做的更改会影响函数的调用者。

```
void foo( int * x )
{
    *x = 23;     // changing the contents of the memory address pointed to by x
}

int main()
{
    int a = 42;
    foo( &a );   // passing the address of a; a will be changed to 23.
    return 0;
} 
```

你应该可以自己从那里拿走它。

# java - 中断从循环调用的方法

> ID：13948712
> 
> 赞同：5
> 
> 时间：2012-12-19T09:01:00.840
> 
> 标签：java, methods, while-loop, break

我正在重构一个非常大的方法，其中有很多重复。

在该方法中有许多 while 循环，包括：

```
 if ( count > maxResults){
        // Send error response
        sendResponse(XMLHelper.buildErrorXMLString("Too many results found, Please refine your search"), out, session);
        break; 
```

我想将其提取为一种方法，因为它目前在这个方法中发生了 3 次，但是当我这样做时，我在中断时收到错误，因为它不再在循环中。问题是仍然需要跳出 while 循环，但只有在达到最大结果数时才可以。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:03:31.047

这是不可能直接做到的。

大多数情况下，你想打破，因为你已经找到了解决方案，不再需要搜索。因此，在被调用函数中指示成功/成功，例如通过返回结果或布尔值来指示成功。如果函数返回成功，则中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:07:12.987

假设方法是：

```
public boolean test(int count, int maXResult) {
 if ( count > maxResults) {
        // Send error response
        sendResponse(XMLHelper.buildErrorXMLString("Too many results found, Please refine your search"), out, session);
        return true;
        }
return false;
} 
```

从循环调用方法为：

```
while(testCondition) {
    if (test(count, maxResults)) {
    break;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:05:42.083

如果它现在在一个方法而不是 while 循环中，则让它返回一个值，然后基于该值中断。

IE

```
public bool refactoredMethod(parameters)
{
    if ( count > maxResults){
    // Send error response
    sendResponse(XMLHelper.buildErrorXMLString("Too many results found, Please refine your     search"), out, session);

    return true;
    }

    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:05:17.917

尝试使用 return 打破方法中的循环；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:05:39.510

正如 Thriler 所说，你不能直接这样做。您可以将其中的一部分提取到方法中并执行以下操作：

```
if(isTooManyResults(count)) { break; } 
```

`true`显然，如果结果太多，您的 isTooManyResults 方法将需要返回，`false`否则

# javascript - 是否有任何跨浏览器 javascript 可以使 vh 和 vw 单元工作

> ID：13948713
> 
> 赞同：50
> 
> 时间：2012-12-19T09:01:04.553
> 
> 标签：javascript, jquery, css

> 注意：好的，当我输入这个问题时，我遇到了[这个](https://stackoverflow.com/questions/6921142/scaling-a-web-layout-with-the-viewport) 建议使用`@media query`但在 2011 年被问到的问题......

如您所知，CSS3 引入了新[的 Viewport-percentage length units](http://www.w3.org/TR/css3-values/#viewport-relative-lengths)`vh`和，`vw`我觉得这对于可靠的响应式布局非常有用，所以我的问题是，有没有 JavaScript/jQuery 替代方案呢？除了将它用于字体大小之外，用于调整元素大小是否安全？像例子

```
div {
   height: 6vh;
   width: 20vh;  /* Note am using vh for both, do I need to use vw for width here? */
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T11:09:49.870

**更新 5：** .css(property) 修复像[fancyBox](http://www.fancyapps.com/fancybox/)这样的插件用于`.css('margin-right')`获取元素的右边距并`.css('margin-right', '12px')`设置元素的右边距。这被破坏了，因为没有检查是否`props`是字符串以及是否给出了多个参数。`props`通过检查是否为字符串来修复它。如果是这样并且有多个参数，则将参数重写为对象，否则`parseProps( $.extend( {}, props ) )`不使用。

**更新 4：**用于响应式布局的插件[https://github.com/elclanrs/jquery.columns](https://github.com/elclanrs/jquery.columns)（正在开发中）

我给了这个（长时间）尝试。首先是 CSS 示例：http: [//jsbin.com/orajac/1/edit#css](http://jsbin.com/orajac/1/edit#css)。（调整输出面板的大小）。请注意，`font-size`至少在最新的 Chrome 上，这不适用于视口单元。

这是我尝试用 jQuery 来做这件事。也适用于该字体的 jQuery 演示位于[http://jsbin.com/izosuy/1/edit#javascript](http://jsbin.com/izosuy/1/edit#javascript)。尚未对其进行广泛测试，但它似乎适用于大多数属性，因为它只是将值转换为像素，然后通过调用插件`window.resize`不断更新。

**更新：**更新了代码以适用于许多浏览器。如果您使用 Chrome 以外的任何东西，请在本地进行测试，因为 jsBin 与`window.resize`.

**更新 2：**扩展本机`css`方法。

**更新 3：**在插件内部处理 window.resize 事件，因此现在可以无缝集成。

**要点（在本地测试）：** [https ://gist.github.com/4341016](https://gist.github.com/4341016)

```
/*
 * CSS viewport units with jQuery
 * http://www.w3.org/TR/css3-values/#viewport-relative-lengths
 */
;(function( $, window ){

  var $win = $(window)
    , _css = $.fn.css;

  function viewportToPixel( val ) {
    var percent = val.match(/[\d.]+/)[0] / 100
      , unit = val.match(/[vwh]+/)[0];
    return (unit == 'vh' ? $win.height() : $win.width()) * percent +'px';
  }

  function parseProps( props ) {
    var p, prop;
    for ( p in props ) {
      prop = props[ p ];
      if ( /[vwh]$/.test( prop ) ) {
        props[ p ] = viewportToPixel( prop );
      }
    }
    return props;
  }

  $.fn.css = function( props ) {
    var self = this
      , originalArguments = arguments
      , update = function() {
          if ( typeof props === 'string' || props instanceof String ) {
            if (originalArguments.length > 1) {
              var argumentsObject = {};
              argumentsObject[originalArguments[0]] = originalArguments[1];
              return _css.call(self, parseProps($.extend({}, argumentsObject)));
            } else {
              return _css.call( self, props );
            }
          } else {
            return _css.call( self, parseProps( $.extend( {}, props ) ) );
          }
        };
    $win.resize( update ).resize();
    return update();
  };

}( jQuery, window ));

// Usage:
$('div').css({
  height: '50vh',
  width: '50vw',
  marginTop: '25vh',
  marginLeft: '25vw',
  fontSize: '10vw'
});
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-30T15:58:22.020

我在使用 Android 4.3 股票浏览器时遇到了这个问题（不支持 vw、vh 等）。我解决这个问题的方法是使用 'rem' 作为字体大小单位，并使用 javascript 动态更改 < html > 的字体大小

```
function viewport() {
    var e = window, a = 'inner';
    if (!('innerWidth' in window )) {
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] };
}
jQuery(window).resize(function(){
    var vw = (viewport().width/100);
    jQuery('html').css({
        'font-size' : vw + 'px'
    });
}); 
```

在你的 css 中你可以使用 'rem' 而不是 px、ems 等

```
.element {
    font-size: 2.5rem; /* this is equivalent to 2.5vw */
} 
```

这是代码的演示：http: [//jsfiddle.net/4ut3e/](http://jsfiddle.net/4ut3e/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-14T13:38:37.107

我写了一个小帮手来处理这个问题。它在所有主要浏览器上都受支持并使用 jQuery。
这里是：

支持VhVw.js

```
function SupportVhVw() {

    this.setVh = function(name, vh) {

        jQuery(window).resize( function(event) {
            scaleVh(name, vh);
        });

        scaleVh(name, vh);
    }

    this.setVw = function(name, vw) {

        jQuery(window).resize( function(event) {
            scaleVw(name, vw);
        });

        scaleVw(name, vw);
    }

    var scaleVw = function(name, vw) {

        var scrWidth = jQuery(document).width();
        var px = (scrWidth * vw) / 100;
        var fontSize = jQuery(name).css('font-size', px + "px");
    }

    var scaleVh = function(name, vh) {

        var scrHeight = jQuery(document).height();

        var px = (scrHeight * vh) / 100;
        var fontSize = jQuery(name).css('font-size', px + "px");
    }
}; 
```

如何在 HTML 中使用它的简单示例：

```
<head>

    <title>Example</title>

    <!-- Import all libraries -->
    <script type="text/javascript" src="js/libs/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="js/libs/SupportVhVw.js"></script>

</head>
<body>

                    <div id="textOne">Example text one (vh5)</div>
                    <div id="textTwo">Example text two (vw3)</div>
                    <div id="textThree" class="textMain">Example text three (vh4)</div>
                    <div id="textFour" class="textMain">Example text four (vh4)</div>

            <script type="text/javascript">

                    // Init object
                    var supportVhVw = new SupportVhVw();

                    // Scale all texts
                    supportVhVw.setVh("#textOne", 5);
                    supportVhVw.setVw("#textTwo", 3);
                    supportVhVw.setVh(".textMain", 4);

            </script>

</body> 
```

它在 GitHub 上可用：
[https](https://github.com/kgadzinowski/Support-Css-Vh-Vw)

: //github.com/kgadzinowski/Support-Css-Vh-Vw JSFiddle 上的示例：http: [//jsfiddle.net/5MMWJ/2/](http://jsfiddle.net/5MMWJ/2/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-21T03:31:43.983

[Vminpoly](https://github.com/saabi/vminpoly)是我所知道的唯一一个 polyfill——它正在开发中，但在这篇文章中可以使用。[作为Jquery Columns](https://github.com/elclanrs/jquery.columns)和[-prefix-free](https://github.com/LeaVerou/prefixfree)项目的一部分，有静态 polyfills 。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-01T14:02:53.883

我刚刚用纯 CSS（不需要 JS）为此做了一个非常丑陋但完美的解决方法。我遇到了一个 CSS 样式表，其中充满了需要为原生 Android 浏览器重写的“vw”声明（也用于高度和顶部/底部属性）（在 4.3 及以下版本中不支持“vw”单位）。

我没有将所有内容重写为与父宽度相关的百分比（因此在 DOM 中越深，计算就越复杂），这甚至在我到达第一个 { height: Xvw } 声明之前就让我头疼，我自己生成了以下样式表： [http ://splendige.pl/vw2rem.css](http://splendige.pl/vw2rem.css)

我猜你们都熟悉“em”单位（如果不是：[http](http://www.w3schools.com/cssref/css_units.asp) ://www.w3schools.com/cssref/css_units.asp ）。经过一些测试，我发现旧的 Android 浏览器（以及所有其他浏览器）完全支持 'rem' 单位，其工作方式与 'em' 相同，但与 ROOT 元素的字体大小声明相关（在大多数情况下， html标签）。

所以实现这项工作的最简单方法是声明 html 标签的字体大小等于视口宽度的 1%，例如 19.2px 用于 1920px 视口，并在整个 1920-320px 范围内使用大量媒体查询。通过这种方式，我在所有分辨率下使“rem”单位等于“vw”（步长为 10px，但您甚至可以尝试为每 1px 声明 html{font-size}）。然后我只是用 'rem' 批量替换了 'vw' 并欣赏了 Android 4.3 本机浏览器上的工作布局。

更重要的是，您甚至可以重新声明整个正文标签的字体大小（以您想要的任何单位：px、em、pt 等），并且它不会影响整个样式表中的 'rem' 与 'vw' 的相等性.

希望这可以帮助。我知道它看起来有点傻，但就像一个魅力。请记住：如果某些东西看起来很愚蠢，但有效，那它并不愚蠢 :)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-14T06:44:10.757

“jquery.columns”是迄今为止最好的解决方案。

[https://github.com/elclanrs/jquery.columns](https://github.com/elclanrs/jquery.columns)

您只需要 2 行代码即可将“vh”变成“全浏览器规模”。

在 html 中声明一个类：

```
<img src="example.jpg" class="width50vh" /> 
```

然后在javascript中：

```
$('.width50vh').css({width: '50vw'}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-03T09:55:11.847

我发现的最简单和最优雅的解决方案是简单地制作一个具有高度的 div：1vh; 和宽度：1vw；当页面加载时，使用 getBoundingClientRect() 将这些值作为像素获取。然后在文档中添加一个侦听器以侦听屏幕调整大小并在调整屏幕大小时更新大小。

我将值保存在 vh 和 vw 的像素中，然后每当我需要使用 vh 时，我只会说 100 * vh，这会给我 100vh。

这是一个关于它的实现的代码片段，我的答案是在 vanilla js 中，不需要 jquery。

```
function getViewportUnits(){
  const placeholder = document.getElementById("placeholder");
  const vh = placeholder.getBoundingClientRect().height;
  const vw = placeholder.getBoundingClientRect().width;
  console.log({vh: vh, vw: vw});
}
```

```
#placeholder{
  background: red;
  height: 1vh;
  width: 1vw;
}
```

```
<body onload="getViewportUnits()">
<div id="placeholder"></div>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-15T16:41:46.057

我发布了一个小型库，可以简化视口相关尺寸的使用。请记住，它不是 polyfill，因此它要求您在要调整大小的元素上应用类。例如，`<div class="vh10 vw30">hello</div>`将填充 10% 的高度和 30% 的宽度。

看看：[https ://github.com/joaocunha/v-unit](https://github.com/joaocunha/v-unit)

# java - 使用 SVNKit 添加文件夹和提交文件

> ID：13948714
> 
> 赞同：9
> 
> 时间：2012-12-19T09:01:04.957
> 
> 标签：java, svn, svnkit

我刚刚创建了一个 Java 项目。我想在 SVNKit 的帮助下将此项目签入到 SVN 位置。

我使用下面的代码，它将一个文件夹添加到 SVN 存储库。但它没有`.svn`在文件夹中创建任何文件夹`/Users/test/svnAddDirCheck`。

我希望这些文件被签入，并且我希望将来提交一些更改的文件。如果不检查源代码，我该怎么做？我可以在 SVN 中添加这些文件，也可以直接提交任何更改的文件吗？

```
@Test
public void importWholeDir() throws Exception {
    try {
        DAVRepositoryFactory.setup();
        SVNRepositoryFactoryImpl.setup();
        FSRepositoryFactory.setup();

        String svnUrl = "https://abc.com/svn/repos/projects/test/CREATE2";
        File dir = new File("/Users/test/svnAddDirCheck");
        SVNURL url = SVNURL.parseURIDecoded(svnUrl);
        String userName = "XXXXXXX";
        String userPassword = "XXXXXXXXX";

        importDirectoryContentToSubversion(svnUrl, dir.getPath(), userName, userPassword, "directory and file added");
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static SVNCommitInfo importDirectoryContentToSubversion(final String repositoryURL, final String subVersionedDirectory, final String userName, final String hashedPassword, final String commitMessage) throws SVNException {
    final SVNClientManager cm = SVNClientManager.newInstance(new DefaultSVNOptions(), userName, hashedPassword);
    return cm.getCommitClient().doImport(new File(subVersionedDirectory), SVNURL.parseURIEncoded(repositoryURL), "<import> " + commitMessage, null, false, true, SVNDepth.fromRecurse(true));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:38:45.243

我假设 SVNKit 实际上是在将 svn 添加到存储库而不是工作副本？那是对的吗？

如果是这样，除非您拥有将包含检出文件的文件夹，否则您无法将文件添加到存储库。

另外你使用的是什么版本的SVN？1.7 不再在工作副本的每个文件夹中放置 .svn 文件夹，仅在根文件夹中。

基本上你想要做的，伪代码是：

1.  查看要添加文件夹/文件的目录。如果它是包含其他文件夹文件的文件夹，您可以使用 --empty 的深度将其签出，这样您就不会获得任何其他可能签入该文件夹的文件/文件夹。

2.  创建新文件夹/文件。

3.  使用 svn kit 将文件“添加”到工作副本。

4.  使用 svn kit 来“提交”将文件夹/文件添加到存储库的工作副本。

当然，只有在您还没有完成的情况下才需要完成第 1 步。您应该遵循手动遵循的相同步骤。我建议您查看有关基本用法的 svn 文档。一旦你可以用 svn.exe 做你想做的事，使用 svnkit API 复制它应该是相当容易的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:43:57.187

这就是 SVN 的工作方式，如果您想提交未来的更改，您需要将本地文件夹设为工作副本，并且要获得工作副本，您需要进行签出。

我有时使用的另一种选择是

*   直接在存储库中创建一个空文件夹，
*   检出本地文件夹中的那个文件夹（使其成为工作副本及其`.svn`文件夹）
*   然后添加并提交现有文件

# css - 如何使引导图标与标签中的文本内联显示？

> ID：13948716
> 
> 赞同：14
> 
> 时间：2012-12-19T09:01:06.957
> 
> 标签：css, twitter-bootstrap

我有显示文本和箭头的引导导航药丸。不幸的是，如果文本太长，箭头会出现在锚点的边框上。Html 看起来像这样。

```
 <a href="#">
          <span> Some longer sample text</span>
          <i class="pull-right icon-chevron-right"></i>
        </a> 
```

演示在这里：http: [//jsfiddle.net/kyrisu/FNcGX/](http://jsfiddle.net/kyrisu/FNcGX/)

如何将其与文本块内联显示（文本可以/应该换行）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T09:17:01.773

如果您的文字可以按照您所说的那样换行，那么这可以工作..

```
<span><i class="pull-right icon-chevron-right"></i>Some longer sample text</span> 
```

**更新**：

```
<span class="iwt">
<span>Some longer sample text</span>
<i class="pull-right icon-chevron-right"></i>
</span>

.iwt{
display:block;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:52:37.787

请使用这个结构

```
<a href="#">
       <i class="pull-right icon-chevron-right"></i>
      <span> Some longer sample text</span>

    </a> 
```

请演示[http://jsfiddle.net/FNcGX/9/](http://jsfiddle.net/FNcGX/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:11:44.653

使用 css 空白：nowrap；解决单行文本问题。

```
.subject-pill > a {
    border-style: solid;
    border-width: 1px;
    white-space:nowrap;
}
 .subject-pill{ 
    width: 218px;
 } 
```

参考网站： [空白不换行](http://www.w3schools.com/cssref/pr_text_white-space.asp)

# solr - Solr - 如何获取包含 Solr 中该字段中搜索词的每个字段的文档数？

> ID：13948718
> 
> 赞同：5
> 
> 时间：2012-12-19T09:01:16.933
> 
> 标签：solr

想象一个像下面这样的索引：

```
id   partno      name          description
1    1000.001    Apple iPod    iPod by Apple
2    1000.123    Apple iPhone  The iPhone 
```

当用户搜索“Apple”时，两个文档都会返回。现在，我想通过将搜索限制在一个或多个字段中包含这些字段中包含“Apple”一词的文档，让用户可以缩小结果范围。

因此，理想情况下，用户在第一次查询后会在 ui 的过滤器部分看到类似的内容：

> **[按字段名称](http://example.org?q=Apple&qf=name)**过滤**(2)
> [描述](http://example.org?q=Apple&qf=description)(1)**

 **当用户对“description”字段应用过滤器时，只会返回“description”字段中包含“Apple”一词的文档。所以第二个请求的结果集将只是 iPod 文档。为此，我会使用类似的查询`?q=Apple&qf=description`（我正在使用[Extended DisMax Query Parser](http://wiki.apache.org/solr/ExtendedDisMax)）

我怎样才能用 Solr 做到这一点？

我已经尝试过分面、分组和突出显示组件，但并没有真正找到合适的解决方案。

* * *

[更新]
再次澄清一下：这里的主要问题是获取显示“按字段过滤”部分所需的信息。这包括字段的名称和每个字段的命中。发送应用了这些过滤器之一的第二个请求已经有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:55:36.503

如果您希望每次都在相同的字段中搜索该术语，您有 2 个选项不违反“单一查询”要求：

1）copyField：您在索引时将所有应该匹配的字段分组。只有一个复制域，您的问题不存在，如果您需要多个域，您就在同一个地方。

2）您可以过滤查询每次在末尾动态添加[“fq”参数](http://wiki.apache.org/solr/CommonQueryParameters#fq)

```
http://<your_url_and_stuff>/?q=Apple&fq=name:Apple ... 
```

如果您始终在相同的两个字段上搜索（或者您可以在查询之前设置它们），这将有效，否则您将始终需要至少第二个查询

因为我说“你有 2 个选项”，但你实际上有 3 个（我急忙回答），这里是第三个：

3）他们描述的[dismax插件](http://wiki.apache.org/solr/DisMaxQParserPlugin)是这样的：

```
The DisMaxQParserPlugin is designed to process simple user entered phrases 
(without heavy syntax) and search for the individual words across several fields 
using different weighting (boosts) based on the significance of each field. 
```

所以，如果你可以使用它，你可能想看看它并从 qf 参数开始（这是选项号 2 想要的内容，但我将其更改为 fq ......不要问我为什么...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:56:10.137

Solr 只是简单地不这样做。如果你绝对需要它，我会尝试使用多请求解决方案并对其进行基准测试——solr 往往比人们放在它前面的要快得多，所以几个请求可能没什么大不了的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:36:50.890

您可以通过两个不同的搜索请求/查询来实现这一点：

***名称：苹果***-> 2 次点击

***描述：苹果***-> 1 次命中

编辑：

您还可以实现自己的`SearchComponent`，在后台执行多个查询并将其放入`SearchHandler`处理链中，这样您只需要在前端执行一个查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:54:52.733

[SolrFaceting](http://wiki.apache.org/solr/SolrFacetingOverview)应该可以解决您的问题。看看[例子](http://wiki.apache.org/solr/SimpleFacetParameters#Examples)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-10T02:59:50.940

这可以通过[Solr faceting](http://wiki.apache.org/solr/SolrFacetingOverview)来实现，但它并不整洁。例如，我可以发出以下查询：

```
/select?q=*:*&rows=0&facet=true&facet.query=title:donkey&facet.query=text:donkey&wt=json 
```

查找包含`donkey`在`title`和`text`字段中的文档数。我可能会得到这样的回应：

```
{
 "responseHeader":{"status":0,"QTime":1,"params":{"facet":"true","facet.query":["title:donkey","text:donkey"],"q":"*:*","wt":"json","rows":"0"}},
 "response":{"numFound":3365840,"start":0,"docs":[]},
 "facet_counts":{
  "facet_queries":{
   "title:donkey":127,
   "text:donkey":4108
  },
  "facet_fields":{},
  "facet_dates":{},
  "facet_ranges":{}
 }
} 
```

由于您还希望将文档返回用于字段分离查询，因此类似于以下内容：

```
/select?q=donkey&defType=edismax&qf=text+titlle&rows=10&facet=true&facet.query=title:donkey&facet.query=text:donkey&wt=json 
```**

# java - 让 Android 服务监听硬件按键事件

> ID：13948719
> 
> 赞同：4
> 
> 时间：2012-12-19T09:01:19.667
> 
> 标签：java, android, android-service

我正在 Android 上构建一个紧急警报应用程序，我希望它的服务在后台运行，并且正在获取部分唤醒锁定以在屏幕关闭时运行。我希望此服务监听音量键（或电源和音量键的组合）按下 3 秒或更长时间以启动发送紧急消息的服务。

是否可以通过将我的服务绑定到任何其他系统服务来监听关键事件？或者，还有其他方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T20:42:11.967

为了收听电源按钮按下，您注册 SCREEN_ON 和 SCREEN_OFF 事件的侦听器。

Android 没有记录任何此类服务监听音量按钮的方式，但您可能想看看这个： [在后台服务中监听音量按钮？](https://stackoverflow.com/questions/10154118/listen-to-volume-buttons-in-background-service/11462962#11462962)

# android - LocalBroadcastManager 与使用回调

> ID：13948720
> 
> 赞同：8
> 
> 时间：2012-12-19T09:01:27.387
> 
> 标签：android, callback, broadcastreceiver

Android 的兼容包支持 LocalBroadcastManager，它可以在我的进程中发送广播。 [http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)

到目前为止，我一直在使用回调（类似于 OnClickListener 的接口）在我的应用程序的不同部分之间传输数据（异步和同步）。

我想知道一个是否比另一个更好。有什么意见吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:18:55.383

`LocalBroadcastManager`让您可以使用`Intent`'s 和`IntentFilter`'s，因此更容易从系统范围的广播迁移到本地广播。它还有一些排队代码，可能比您自己的代码更可靠（或不可靠，取决于您的实现有多复杂）。除此之外，它本质上只是将接收者列表保存在内存中并迭代它们以找到匹配项。

另一种选择是使用事件总线，例如 Square 的[Otto](https://github.com/square/otto)（基于 Guava），它增加了类型安全性并且同样高效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T07:29:08.337

据我所知，LocalBroadcastManager 就像一个魅力。它很轻松，您可以在 Intent 中传递任何参数并在聆听期间将其取回。唯一的可靠性是广播管理器将意图放入队列。

**什么时候应该使用 LocalBroadCastManager？** 当您有单个活动 (FragmentActivity) 和大量的 Fragment 类时，在单个活动中拥有一个 localBroadcastManager 会更容易。

如果您有很多活动，那么使用它可能会有所帮助，但请记住，您已经在使用意图来启动新活动，因此如果有任何待处理的意图，则此广播将在队列中，您将需要等待。

*因此，最好的用途是具有大量片段的单一活动。*

# android - onpen_exchange 汇率教程

> ID：13948721
> 
> 赞同：1
> 
> 时间：2012-12-19T09:01:28.170
> 
> 标签：android, json

我正在使用 android 中的货币计算器应用程序，我正在使用开放汇率 api。我在如何调用 json 元素（货币）时遇到问题，我需要一个 json 脚本，我可以用它来显示所有货币及其价值。棘手的部分是如何仅获得货币部分。请帮助。

```
{
"disclaimer": "Exchange rates provided by [...]",
"license": "Data collected and blended [...]",
"timestamp": 1319730758,
"base": "USD",
"rates": {
    "AED": 3.672626,
    "AFN": 48.3775,
    "ALL": 110.223333,
    "AMD": 409.604993,
    /* 160 fx rates available - see currencies.json */
    "YER": 215.035559,
    "ZAR": 8.416205,
    "ZMK": 4954.411262,
    "ZWL": 322.355011
}
} 
```

谢谢

# sql - 查询以从多行和多列中获取零值

> ID：13948730
> 
> 赞同：-3
> 
> 时间：2012-12-19T09:01:41.680
> 
> 标签：sql, sql-server, sql-server-2012

我有以下数据。如何查询以仅从所有行和列中获取零。

```
Timestamp  C1 C2 C3 C4
2012-05-17 1  0  1  0
2012-05-18 0  0  1  0
2012-05-19 1  0  0  1
2012-05-20 0  0  0  0
2012-05-21 0  1  0  0 
```

输出应包含具有 0 值的时间戳 c1、c2、c3、c4。请帮忙！！

我的原始数据如下

```
Timestamp   TF  TA  TRIM    DG
17-05-2012  0   0.02    0   0.922
18-05-2012  0   0.03    0   0.831787611
19-05-2012  0.8 0.037   0   0.317744455
20-05-2012  0.9 0.06    0   0.56
21-05-2012  0   0.05    0   0.528702213
22-05-2012  0   0.078   0   0.428219784
23-05-2012  0   0.027   0   0.391674726
24-05-2012  0   0.09    0   0.826398887 
```

我尝试了以下查询

```
select timestamp,TF,TA,DG from temp where TF=0 and TF=0 and DG=0 
```

但我得到没有行和列的空输出。我想要查看所有具有 0 值的列，并带有时间戳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:05:17.450

只需将条件放在 where 子句中

```
select * from table_name where  C1=0 or C2=0 or C3=0 or C4=0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:05:31.290

使用这个查询：

```
select timestamp,c1,c2,c3,c4
from table
where (c1 = 0 and c2 = 0 and c3 = 0 and c4 =0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:03:44.050

```
SELECT * FROM {table} where C1 = 0 and  C2 = 0 and C3= 0 and  C4= 0 
```

如果我的问题是正确的。

假设您的查询有错字，并且您实际上想检查 TF 旁边的其他列两次。你能发布你的表格原理图吗？也许，听上去，您不是在处理小数或某种数字类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:32:37.507

我想你正在寻找这个：

```
SELECT * FROM <tablename> where C1 = 0 OR C2 = 0 OR C3= 0 OR C4= 0; 
```

编辑-根据您的评论，我认为这会起作用

```
SELECT [Timestamp], 
CASE WHEN TF>0 THEN 0 ELSE TF END AS TF,
CASE WHEN TA>0 THEN 0 ELSE TA END AS TA,
CASE WHEN DG>0 THEN 0 ELSE DG END AS DG
FROM <yourtable>
WHERE TF=0 OR TA=0 OR DG=0 
```

不过，这个要求的逻辑超出了我的理解。

拉吉

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:07:45.133

我将假设您希望将非零值四舍五入：

```
select timestamp
    ,ceiling(tf) as c1
    ,ceiling(ta) as c2
    ,ceiling(trim) as c3
    ,ceiling(dg) as c4  
from table 
where tf=0 or ta=0 or trim=0 or dg=0 
```

# php - 如何按“按日期”，“按年份”按投票排序..？

> ID：13948731
> 
> 赞同：8
> 
> 时间：2012-12-19T09:01:42.887
> 
> 标签：php, mysql

我试图实现的与我们在 SO 上的类似。我想按最后一天、上个月等的投票对帖子进行排名。我的架构由两个表组成，

```
post(id, post, posted_on..)
vote(post_id, vote_value, date) 
```

我希望架构是非常不言自明的。问题是，如果我通过对帖子和投票进行内部连接并使用 where 子句（''）来“按天”排序`votes.date >= DATE_SUB(CURDATE(), INTERVAL 1 DAY`，它确实按预期工作，但无法显示其他帖子。我的意思是，在最后一天没有投票的帖子完全被忽略了。我想要的是这些帖子的优先级较低，但确实显示在查询中。

虽然，我可能会考虑使用联合操作，但我正在寻找另一种方法。

**更新**：可以说，有两个帖子，1,2。

投票表就像，

```
post_id       vote_value      date
1              1              2012-12-19
2              1              2012-12-10 
```

如果我按照我的方法查询，那么只会显示帖子 - “1”，因为我已经设置了日期限制，但我希望两者都显示。这是我的查询：

```
SELECT `id`, SUM(`votes`.`votes`) AS likes_t, `post`.* FROM `posts` JOIN `votes` ON (`id` = `votes`.`post_id`) WHERE `votes`.`date` >= DATE_SUB(CURDATE(), INTERVAL 2 DAY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:29:00.240

如果我做对了：

`SELECT *, IF(vote.date>=DATE_SUB(CURDATE(), INTERVAL 1 DAY), 1, 0) as rate FROM post INNER JOIN vote ON (post.id=vote.post_id) ORDER BY rate DESC;`

```
+------+--------+---------+------+---------------------+------+
| id   | post   | post_id | vote | date                | rate |
+------+--------+---------+------+---------------------+------+
|    1 | first  |       1 |    1 | 2012-12-19 00:00:00 |    1 |
|    1 | first  |       1 |    1 | 2012-12-13 00:00:00 |    0 |
|    2 | second |       2 |    1 | 2012-12-10 00:00:00 |    0 |
+------+--------+---------+------+---------------------+------+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:29:08.113

如果你想显示所有帖子，但只计算最近的投票，应该这样做：

```
SELECT `id`,
       SUM(IF(`votes`.`date` >= DATE_SUB(CURDATE(), INTERVAL 2 DAY, `votes`.`votes`, 0)) AS likes_t, 
       `post`.*
       FROM `posts` JOIN `votes` ON (`id` = `votes`.`post_id`) 
```

# mono - 从 MonoTouch 应用程序重写为 MonoDroid

> ID：13948732
> 
> 赞同：1
> 
> 时间：2012-12-19T09:01:43.010
> 
> 标签：mono, xamarin.ios, cross-platform, xamarin.android

我打算将应用程序从 Monotouh 重写为适用于 Android 的 Monodroid 应用程序。如我错了请纠正我。逻辑与 MonoTouch 中的逻辑保持一致或改变什么？如果有什么变化，请告诉我，什么？

据我了解，只有 GIU 发生了变化。提前致谢！

所以，这是我从服务器调用数据的代码：

```
namespace Mobile{
public static class SiteHelper
{
    public static string DbPath = Path.Combine (Environment.GetFolderPath (Environment.SpecialFolder.Personal), "Sql_1.4.sqlite");
    public const string TempDbPath = "./Sql.sqlite";

    public static UIView View { get; set; }

    public static BaseController Controller { get; set; }

    private static event NIHandler _noInternetHandler;

    private static bool _noInternetShoved = false;
    public static string SiteDomain = "http://mysite.com"; //files which connecting to the DB on server (.asx files)

    private delegate void NIHandler ();

    public static XDocument DoRequest (string Request)
    {

        if (_noInternetHandler != null) {
            foreach (var del in _noInternetHandler.GetInvocationList()) {
                _noInternetHandler -= del as NIHandler;
            }
        }

        if (Controller != null)
            _noInternetHandler += new NIHandler (Controller.PushThenNoInternet);

        string CryptoString = "";
        string Language = "ru";

        using (MD5 md5Hash = MD5.Create()) {
            string hashKey = Guid.NewGuid ().ToString ().Substring (0, 4);
            CryptoString = Request + (Request.Contains ("?") ? "&" : "?") + "hash=" + GetMd5Hash (
                md5Hash,
                "myprogMobhash_" + hashKey
            ) + "&hashKey=" + hashKey + "&language=" + Language;

            UIActivityIndicatorView _preloader = null;

            if (Controller != null) {
                Controller.InvokeOnMainThread (delegate() {
                    _preloader = new UIActivityIndicatorView (UIActivityIndicatorViewStyle.Gray);

                    if (View != null && Request.IndexOf ("login.ashx") == -1 
                        && Request.IndexOf ("yandex") == -1 
                        && Request.IndexOf ("GetDialogMessages") == -1) {

                        lock (_preloader) {
                            if (_preloader != null && !_preloader.IsAnimating)
                                _preloader.HidesWhenStopped = true;
                            _preloader.Frame = new RectangleF (150, 170, 30, 30);
                            _preloader.Transform = MonoTouch.CoreGraphics.CGAffineTransform.MakeScale ((float)1.3, (float)1.3);
                            _preloader.StartAnimating ();
                            View.Add (_preloader);
                        }
                    }
                });
            }

            /*ctx.GetText(Resource.String.SiteAddress)*/
            Stream Stream = null;
            try {
                HttpWebRequest request = new HttpWebRequest (new Uri (SiteDomain + "/FolderWithFiles/" + CryptoString));
                request.Timeout = 8000;
                Stream = request.GetResponse ().GetResponseStream ();
                _noInternetShoved = false;
                if (_noInternetHandler != null)
                    _noInternetHandler -= new NIHandler (Controller.PushThenNoInternet);
            } catch (WebException) {
                if (_noInternetHandler != null)
                    _noInternetHandler.Invoke ();
                var resp = new XDocument (new XElement ("Response", 
                            new XElement ("status", "error"), 
                            new XElement ("error", "Отсутствует интернет"))
                );
                return resp;

            }

            StreamReader Sr = new StreamReader (Stream);
            string Resp = Sr.ReadToEnd ();
            XDocument Response = XDocument.Parse (Resp.Substring (0, Resp.IndexOf ("<html>") == -1 ? Resp.Length : Resp.IndexOf ("<!DOCTYPE html>")));
            string Hash = Response.Descendants ().Where (x => x.Name == "hash")
                .FirstOrDefault ().Value;
            string HashKey = Response.Descendants ().Where (x => x.Name == "hashKey")
                .FirstOrDefault ().Value;

            Sr.Close ();
            Stream.Close ();

            if (Controller != null && _preloader != null) {
                Controller.InvokeOnMainThread (delegate() {
                    lock (_preloader) {
                        _preloader.StopAnimating ();
                        _preloader.RemoveFromSuperview ();
                    }
                });
            }

            if (VerifyMd5Hash (
                md5Hash,
                "mobileSitehash_" + HashKey,
                Hash
            ))
                return Response;
            else
                throw new Exception ();

        }
    }

    public static XDocument DoWriteFileRequest (string Request, byte[] file)
    {
        string CryptoString = "";
        string Language = "ru";

        using (MD5 md5Hash = MD5.Create()) {
            string hashKey = Guid.NewGuid ().ToString ().Substring (0, 4);
            CryptoString = Request + (Request.Contains ("?") ? "&" : "?") + "hash=" + GetMd5Hash (
                md5Hash,
                "mobileMobhash_" + hashKey
            ) + "&hashKey=" + hashKey + "&language=" + Language;

            HttpWebRequest Req = (HttpWebRequest)WebRequest.Create (SiteDomain + "/misc/mobile/" + CryptoString);
            Req.Method = "POST"; 
            Stream requestStream = Req.GetRequestStream ();
            requestStream.Write (file, 0, file.Length);
            requestStream.Close ();

            Stream Stream = Req.GetResponse ().GetResponseStream ();
            StreamReader Sr = new StreamReader (Stream);
            string Resp = Sr.ReadToEnd ();
            XDocument Response = XDocument.Parse (Resp);
            string Hash = Response.Descendants ().Where (x => x.Name == "hash")
                .FirstOrDefault ().Value;
            string HashKey = Response.Descendants ().Where (x => x.Name == "hashKey")
                .FirstOrDefault ().Value;

            Sr.Close ();
            Stream.Close ();

            if (VerifyMd5Hash (
                md5Hash,
                "mobileSitehash_" + HashKey,
                Hash
            ))
                return Response;
            else
                throw new Exception ();

        }
    }

    public static string GetMd5Hash (MD5 md5Hash, string input)
    {

        // Convert the input string to a byte array and compute the hash.
        byte[] data = md5Hash.ComputeHash (Encoding.UTF8.GetBytes (input));

        // Create a new Stringbuilder to collect the bytes
        // and create a string.
        StringBuilder sBuilder = new StringBuilder ();

        // Loop through each byte of the hashed data 
        // and format each one as a hexadecimal string.
        for (int i = 0; i < data.Length; i++) {
            sBuilder.Append (data [i].ToString ("x2"));
        }

        // Return the hexadecimal string.2
        return sBuilder.ToString ();
    }

    //Geting the info for my app
    public static List<PackageListModel> GetUserPackages (int UserID)
    {
        List<PackageListModel> Events = new List<PackageListModel> ();
        string Req = "SomeFile.ashx?UserID=" + UserID;
        XDocument XmlAnswer = DoRequest (Req);

        if (XmlAnswer.Descendants ("status").First ().Value == "ok") {
            foreach (var el in XmlAnswer.Descendants ("Response").First ().Descendants().Where(x=>x.Name == "Event")) {
                PackageListModel Event = null;
                Event = new PackageListModel ()
                {
                    ID = int.Parse(el.Attribute("ID").Value),
                    Title = el.Element("Title").Value,
                    Date = el.Element("Date").Value,
                    Price = el.Element("Price").Value,
                    ImageUrl = el.Element("ImageUrl").Value,
                    Location = el.Element("Location").Value
                };
                Events.Add (Event);
            }
        }
        return Events;
    }

    //Получить пользовательские поездки
    public static List<TransporterListModel> GetUserTransporters (int UserID)
    {
        List<TransporterListModel> Events = new List<TransporterListModel> ();
        string Req = "SomeFile.ashx?UserID=" + UserID;
        XDocument XmlAnswer = DoRequest (Req);

        if (XmlAnswer.Descendants ("status").First ().Value == "ok") {
            foreach (var el in XmlAnswer.Descendants ("Response").First ().Descendants().Where(x=>x.Name == "Event")) {
                TransporterListModel Event = null;
                Event = new TransporterListModel ()
                {
                    ID = int.Parse(el.Attribute("ID").Value),
                    Date = el.Element("Date").Value,
                    Price = el.Element("Price").Value,
                    TransportsStr = el.Element("Transports").Value,
                    Location = el.Element("Location").Value
                };
                Events.Add (Event);
            }
        }
        return Events;

    }

            }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:45:24.223

我认为你应该阅读[这个](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Building_Cross_Platform_Applications)。
简而言之 - 您可以重用不依赖于平台特定部分的应用程序逻辑，因此可以在 MonoTouch 和 Mono for Android 之间共享使用数据库/服务器。

# c++ - wxsmith 分段错误错误代码块

> ID：13948742
> 
> 赞同：0
> 
> 时间：2012-12-19T09:02:10.353
> 
> 标签：c++, wxwidgets, codeblocks

所以我是 wxWidget 的新手。我只是想在 Code::Blocks 中创建一个新的 wxSmith 项目后立即运行第一个默认示例代码。但是，一旦我构建并运行程序，我就会收到“jpt.exe 已停止工作”错误。然后，在 Code::Blocks 中，进程以 -1073741819 状态终止。在调试模式下，我得到 SIGSEGV 信号，分段错误。

我正在使用 Code::Blocks 12.11，wxWidgets via 'wxPack'，Windows 7 64 位。

```
#0 6C4B98EB wxEvtHandler::wxEvtHandler() () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxbase28_gcc.dll:??)
#1 6C44164A wxAppConsole::wxAppConsole() () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxbase28_gcc.dll:??)
#2 64292557 wxAppBase::wxAppBase() () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxmsw28_core_gcc.dll:??)
#3 64205F62 wxApp::wxApp() () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxmsw28_core_gcc.dll:??)
#4 0040DB0D jptApp::jptApp(this=0xa4e290) (D:/Programming/Projects/LogicGateSimulator/jpt/jptApp.h:15)
#5 004013A4 wxCreateApp() (D:\Programming\Projects\LogicGateSimulator\jpt\jptApp.cpp:18)
#6 6C4706C3 wxEntryStart(int&, char**) () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxbase28_gcc.dll:??)
#7 6C470812 wxInitialize(int, char**) () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxbase28_gcc.dll:??)
#8 6C470864 wxEntryReal(int&, char**) () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxbase28_gcc.dll:??)
#9 6420588A wxEntry(HINSTANCE__*, HINSTANCE__*, char*, int) () (D:\Programming\wxWidgets2.8\lib\gcc_dll\wxmsw28_core_gcc.dll:??)
#10 0040141A    WinMain@16(hInstance=0x400000, hPrevInstance=0x0, lpCmdLine=0x7b3a09 "", nCmdShow=10) (D:\Programming\Projects\LogicGateSimulator\jpt\jptApp.cpp:18)
#11 0040E6EB    main () (??:??) 
```

在 jptApp.h 的第 15 行：

```
15 class jptApp : public wxApp
16 {
17     public:
18         virtual bool OnInit();
19 }; 
```

任何帮助将不胜感激。非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:20:52.653

如果你没有在全局构造函数中做任何特别的事情，那么你的 wxWidgets 构建肯定有问题。`-I`确保在编译用于编译库本身的应用程序时使用相同的编译选项（特别是相同的路径）。

# javascript - 使用 execCommand 设置锚点名称

> ID：13948744
> 
> 赞同：6
> 
> 时间：2012-12-19T09:02:12.013
> 
> 标签：javascript, jquery, contenteditable, execcommand, rangy

我知道如何使用这样的属性设置`<a />`标签：`href``contenteditable`

```
execCommand("CreateLink", false, "#jumpmark"); 
```

这将导致

```
<a href="#jumpmark">selection</a> 
```

但是我无法弄清楚如何设置锚点`name`而不是`href`.
这是我想要的结果：

```
<a name="jumpmark">selection</a> 
```

谁能帮我？

**旁注：**我使用 jQuery 和 Rangy 作为库，但是我更喜欢直接与 execCommand 一起使用的解决方案。

**更新：**这是一个 jsfiddle： http: [//jsfiddle.net/fjYHr/](http://jsfiddle.net/fjYHr/)选择一些文本并单击按钮。我想要的是，单击按钮会插入一个链接，其中设置了名称属性而不是 href。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:42:58.053

我看到你正在使用 Rangy，但我根本不知道如何使用它。在我意识到 Rangy 是什么之前，我查找了如何获取当前选择。我找到了一个获取它并用传入的值替换它的函数。我最终修改了它，但它是：

[http://jsfiddle.net/fjYHr/1/](http://jsfiddle.net/fjYHr/1/)

```
$(document).ready(function () {
    $("#setlink").click(function () {
        replaceSelectedText("jumplink");
    });
});

function replaceSelectedText(nameValue) {
    var sel, sel2, range;
    if (window.getSelection) {
        sel = window.getSelection();
        sel2 = ""+sel;  // Copy selection value
        if (sel.rangeCount) {
            range = sel.getRangeAt(0);
            range.deleteContents();
            var newA = document.createElement("a");
            newA.name = nameValue;
            newA.innerHTML = sel2;
            range.insertNode(newA);
        }
    } else if (document.selection && document.selection.createRange) {
        // Not sure what to do here
        range = document.selection.createRange();
        var newA = "<a name='" + nameValue.replace(/'/g, "") + "'>" + range.text + "</a>";
        range.text = newA;
    }
} 
```

请注意我如何存储原始当前选择，然后将其替换为使用传入值设置的`<a>`元素。`name`

至于`document.selection`部分（似乎被 IE < 9 使用），我不能 100% 确定我提供的代码会起作用（实际上允许在选择中使用 HTML，而不是转义它）。但这是我的尝试:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:29:38.067

你可以使用类似下面的东西，它改编自我的[这个答案](https://stackoverflow.com/a/6691294/96100)`pasteHtmlAtCaret()`的函数：

演示：http: [//jsfiddle.net/F8Zny/](http://jsfiddle.net/F8Zny/)

代码：

```
function surroundSelectedText(element) {
    var sel, range;
    if (window.getSelection) {
        // IE9 and non-IE
        sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            range = sel.getRangeAt(0);
            element.appendChild( document.createTextNode(range.toString()) );
            range.deleteContents();
            range.insertNode(element);

            // Preserve the selection
            range = range.cloneRange();
            range.setStartAfter(element);
            range.collapse(true);
            sel.removeAllRanges();
            sel.addRange(range);
        }
    } else if (document.selection && document.selection.type != "Control") {
        // IE < 9
        var selRange = document.selection.createRange();
        element.appendChild( document.createTextNode(selRange.text) );
        selRange.pasteHTML(element.outerHTML);
    }
} 
```

如果必须使用`document.execCommand()`，则可以`InsertHTML`在非 IE 浏览器中使用该命令。但是，IE 不支持它。

```
document.execCommand("InsertHTML", false, '<a name="jumpmark">selection</a>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:10:32.803

正如您所见`execCommand`，您可以设置的属性相当有限，因此您无法`name`使用它设置属性 - 只有`href`.

由于您已`jQuery`设置为标签，您可以使用它作为替代方案：

```
var $a = $('<a></a>').attr('name', 'jumpmark').appendTo('body'); 
```

**更新**

> 我需要处理当前的选择。具体来说，我没有可以附加到的 jQuery 对象，这意味着我没有可以处理的 DOM 节点

在这种情况下，使用诸如[Rangy](http://code.google.com/p/rangy/)之类的插件来获取选择，然后您可以根据需要使用 jQuery 进行修改。

# c# - 将队列转换为列表

> ID：13948747
> 
> 赞同：2
> 
> 时间：2012-12-19T09:02:34.173
> 
> 标签：c#, .net

```
var queue = new Queue<ExchangeEmailInformation>(newMails); 
```

如何将上述队列转换为`List`.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T09:03:49.117

您可以使用[Enumerable.ToList](http://msdn.microsoft.com/en-us/library/bb342261.aspx)

```
var list = queue.ToList(); 
```

记得包括`using System.Linq;`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T09:10:07.833

由于[Queue<T> 类](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)实现[IEnumerable<T>](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)并且[List<T> 类](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) 具有[接受 IEnumerable<T> 的构造函数](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)，因此您可以简单地将队列传递给该构造函数：

```
var result = new List<ExchangeEmailInformation>(queue); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T09:16:55.020

```
Try this... simple

System.Collections.Queue q = new System.Collections.Queue(4);
q.Enqueue("hai"); q.Enqueue("how"); q.Enqueue("are"); q.Enqueue("u");
int count = q.Count;
List<string> list = new List<string>();
for(int i =0; i < count; i++)
{
   list.Add(q.Dequeue().ToString());
} 
```

# android - Android 2.2+ 中的去电应答状态

> ID：13948748
> 
> 赞同：5
> 
> 时间：2012-12-19T09:02:39.080
> 
> 标签：android

在我的应用程序中，我发起了一个拨出呼叫，并且我正在使用 PhoneStateListener 来了解呼叫状态。

每当我开始拨打电话时，电话状态都是`TelephonyManager.CALL_STATE_OFFHOOK`. 当呼叫接收者接听电话时，我的手机状态没有任何变化。

我尝试了很多，但未能得到这个答案状态。有人告诉使用蓝牙的 HFP（免提配置文件）来获得呼叫应答状态。但我没有从 android 开发者网站获得任何有关 HFP 的信息。

如果有人遇到同样的问题并得到解决方案，请提出您的宝贵建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:37:41.030

接听者`CALL_STATE_OFFHOOK`接听电话时 不会改变：

> 设备通话状态：摘机。至少存在一个**正在拨号**、**激活**或保持的呼叫，并且没有呼叫在振铃或等待。

只要电话处于通话状态，无论是否接听，状态都不应改变。

这个问题被问了很多项，到目前为止我发现的问题都没有得到解决：[检测是否已接听电话](https://stackoverflow.com/questions/2250455/detect-if-an-outgoing-call-has-been-answered)，[Android：如何获得已接听电话的状态？](https://stackoverflow.com/questions/9392804/android-how-to-get-a-state-that-the-outgoing-call-has-been-answered), [Android : 如何获得拨出电话已被接听的状态？](https://stackoverflow.com/questions/9392804/android-how-to-get-a-state-that-the-outgoing-call-has-been-answered)（还有很多其他的）。那里提供的解决方案依赖于在`CALL_STATE_OFFHOOK`呼叫被应答时改变状态，这不会发生。

似乎没有可用于获取拨出呼叫状态的公共 API。我看到的最好的解决方法是 Vivek Khandelwal 建议的。编码时间不长，性能开销也不大。除非添加太多权限（现在您需要添加`READ_CALL_LOGS`）是一个问题，否则使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:25:46.227

你想要一些特定于蓝牙的东西吗？否则我可以提供来源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:24:19.430

我也有同样的问题。这可能不是您问题的答案。我只是分享我所做的。

我有一个活动可以打开联系人并可以拨打电话。我想要的是，知道呼叫是否成功（即收件人接听电话）。

当时我没有用 PhoneStateListener 找到解决方案。

因此，作为一种解决方法，我所做的是检查呼叫日志，如果它在启动联系人活动后有对该联系人的电话号码的拨出电话。

看看他的帮助。

# java - string.parse("(") 错误

> ID：13948751
> 
> 赞同：27
> 
> 时间：2012-12-19T09:02:55.493
> 
> 标签：java, regex, split

我有一个文件，其中包含如下数据：

```
recv(1178884, NULL, 4294967267, 0)      = 0
......
...... 
```

我的源代码是：

```
try (BufferedReader br = new BufferedReader(new FileReader("D:\\smsTrace.txt"))) {
    String sCurrentLine;

    while ((sCurrentLine = br.readLine()) != null) {
        String sysCallName = sCurrentLine;
        String[] sysCallTokens = sysCallName.split("(");
        System.out.println(sCurrentLine);
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

当我拆分`sysCallName.split(",")`它时工作正常，但是当我如上所述使用时，它会引发以下异常。

```
Exception in thread "main" java.util.regex.PatternSyntaxException: Unclosed group near index 1
(
 ^
    at java.util.regex.Pattern.error(Unknown Source)
    at java.util.regex.Pattern.accept(Unknown Source)
    at java.util.regex.Pattern.group0(Unknown Source)
    at java.util.regex.Pattern.sequence(Unknown Source)
    at java.util.regex.Pattern.expr(Unknown Source)
    at java.util.regex.Pattern.compile(Unknown Source)
    at java.util.regex.Pattern.<init>(Unknown Source)
    at java.util.regex.Pattern.compile(Unknown Source)
    at java.lang.String.split(Unknown Source)
    at java.lang.String.split(Unknown Source)
    at fileReading.main(fileReading.java:19) 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-19T09:04:53.547

您必须转义左括号：

```
sysCallName.split("\\("); 
```

因为`split()`需要一个正则表达式，并且括号用于标记正则表达式中的捕获组。所以他们需要成对出现。如果您只想要一个括号，则需要对其进行转义。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-19T09:07:43.307

[`String#split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)将正则表达式作为拆分条件。现在，`(`正则表达式用于捕获组，所以如果你想匹配它，你需要转义它。

**你有两种方法： -**

1.  转义括号： -

    ```
    sysCallName.split("\\("); 
    ```

2.  用途`Character class`：-

    ```
    sysCallName.split("[(]"); 
    ```

在一个字符类中，所有的元字符都失去了它们的特殊含义，所以 a`(`只是 a `(`，而 a`dot(.)`只是 a `dot(.)`。就个人而言，我更喜欢第二种选择，因为它看起来更清晰。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-19T09:04:24.620

逃脱你的字符串。代替

```
sysCallName.split("("); 
```

尝试

```
sysCallName.split("\\("); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-19T09:05:07.183

您必须添加一个转义字符：

```
String[] sysCallTokens = sysCallName.split("\\("); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-19T09:04:32.813

`(`是正则表达式的保留字符

您可以通过在其前面加上反斜杠来解决此问题：`\(`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-19T09:07:38.317

在尝试使用特殊字符进行拆分时，您需要使用`\\`特殊字符。所以在这里尝试这样

```
sysCallName.split("\\("); 
```

[你可以从这里](http://bytes.com/topic/java/insights/618869-splitting-strings)找到用其他特殊字符分割字符串

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-19T09:06:32.093

尝试在您的代码中使用这一行

```
String[] sysCallTokens = sysCallName.split("\\("); 
```

（只是在左括号前添加了转义字符）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-19T09:36:58.503

您可以尝试**[Pattern.quote](http://tutorialdata.com/)**，例如：

```
sysCallName.split(Pattern.quote(")")); 
```

如果要使用特殊字符分割任何字符串，可以使用上述方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-21T14:29:16.470

您可以像获取数组一样获取数据：

```
String[] result = line.split("\\\\(")[1].split("\\\\)").split(","); 
```

# google-maps - 谷歌地图信息窗口

> ID：13948752
> 
> 赞同：-1
> 
> 时间：2012-12-19T09:03:03.003
> 
> 标签：google-maps, google-maps-api-3

嗨，我一直在使用此代码在谷歌地图上显示多个位置，并在每个位置上放置图钉。

```
var mylocation = new google.maps.LatLng(52.520816, 13.410186);

var neighborhoods = [
new google.maps.LatLng(52.511467, 13.447179),
new google.maps.LatLng(52.549061, 13.422975),
new google.maps.LatLng(52.497622, 13.396110),
new google.maps.LatLng(52.517683, 13.394393)
];

var markers = [];
var map;

function initialize() {
var mapOptions = {
zoom: 12,
mapTypeId: google.maps.MapTypeId.ROADMAP,
center: mylocation
};
map = new google.maps.Map(document.getElementById('googleMap'),
mapOptions);
drop();
}

function drop(){
for (var i = 0; i < neighborhoods.length; i++) 
{
markers.push(new google.maps.Marker({
position: neighborhoods[i],
map: map,
}));
}

} 
```

我想要的是在所有引脚上显示信息窗口，显示它们各自的 lats 和 lngs

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:38:00.983

```
function drop()
{
 for (var i = 0; i < neighborhoods.length; i++) 
 {
   var marker= new google.maps.Marker({
   position: neighborhoods[i],
   map: map,
   });
  var infoWindow = new google.maps.InfoWindow({content:marker.getPosition()});
  infoWindow.open(map, marker);
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:10:08.457

您需要的所有信息都在 Google 地图文档的[InfoWindow 部分](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)中，其中显示了此示例：

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var mapOptions = {
  zoom: 4,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2 id="firstHeading" class="firstHeading">Uluru</h2>'+
    '<div id="bodyContent">'+
    '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    'sandstone rock formation in the southern part of the '+
    'Northern Territory, central Australia. It lies 335 km (208 mi) '+
    'south west of the nearest large town, Alice Springs; 450 km '+
    '(280 mi) by road. Kata Tjuta and Uluru are the two major '+
    'features of the Uluru - Kata Tjuta National Park. Uluru is '+
    'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
    'Aboriginal people of the area. It has many springs, waterholes, '+
    'rock caves and ancient paintings. Uluru is listed as a World '+
    'Heritage Site.</p>'+
    '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
    'http://en.wikipedia.org/w/index.php?title=Uluru</a> (last visited June 22, 2009).</p>'+
    '</div>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title:"Uluru (Ayers Rock)"
});

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

# php - 如何从 php 中的舍入值获得原价？

> ID：13948755
> 
> 赞同：0
> 
> 时间：2012-12-19T09:03:13.567
> 
> 标签：php, math, formatting

我有这样的代码`$new_amount = round(($old_amount/53),2);`

金额可能是 1,2, ...,10000；

如何`$old_amount`从`$new_amount;`现在开始准确我尝试使用

```
$old_amount = ceil($new_amount);` AND `$old_amount = floor($new_amount); 
```

但不能正常工作；请帮我;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:04:56.807

你不能，一旦你舍入一个值，你就可以摆脱额外的精度。这种精度丢失了。但是，旧值仍存储在`$old_amount`变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:07:00.500

如果您需要确切的金额，请不要在创建 $new_amount 时更改 $old_amount。所以你可以稍后使用 $old_amount 。

没有退路。Ceil() 和 floor() 函数都不能给你你想要的。

# batch-file - 在批处理作业中使用 WinAPIServer 和 SysExcelApplication 类

> ID：13948769
> 
> 赞同：1
> 
> 时间：2012-12-19T09:04:14.267
> 
> 标签：batch-file, jobs, x++, axapta

我创建了一个批处理作业，该作业创建了一个填充有查询的 Excel 文件，问题如下：

我在代码中使用了 WinAPI 和 SysExcelApplication 类。调试后，我看到这些类在使用批处理作业启动时会导致问题。我使用了带有 fileIOPermission 类的 winAPIServer 和托管权限，但我的问题仍然存在。

在没有批处理作业的情况下启动时，我的代码运行良好，没有错误。

有没有人有想法来解决我的问题？

这是错误消息：会话服务器端替换 (RunAs) 试图调用一个仅可用于客户端处理的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-03T05:50:05.643

在 WinAPI 方面，有一个 WinAPIServer 类与 WinAPI 做同样的事情。有一个我使用的代码示例：

```
 if (xGlobal::clientKind() == ClientType::Client)
    {
        winapi::copyfile(File, strReplace(File,SourceFolder, FailureFolder));
        winapi::deletefile(File);
    }
    else
    {
        winapiServer::copyfile(File, strReplace(File,SourceFolder, FailureFolder));
        winapiServer::deletefile(File);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T19:27:14.933

您不能从在服务器上执行的批处理作业中使用 SysExcelApplication，因为 Excel 是需要访问客户端 UI 的客户端应用程序，这与模拟服务执行不兼容。

我知道这不是应有的逻辑，但几个月前，当我在客户端遇到这个问题时，我从 Microsoft 工程团队那里得到了这个答案。

如果您可以通过使用 CSV 文件或类似的东西来避免它，则可能的解决方案是根本不使用 Excel；或者使这些批处理在客户端层上运行，这迫使您始终让客户端在客户端会话上打开运行批处理（并使用客户端许可证）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T15:29:16.367

在 Dynamics AX 中，您可以创建一个 xml 文件。然后创建并调用 PowerShell 脚本将 xml 文件转换为 excel 文件。而这一切都可以在 AX Batch Job 中完成。

# ios - 使用模式匹配将所选文件从 ios 中的另一个 NSArray 复制到 NSArray

> ID：13948775
> 
> 赞同：1
> 
> 时间：2012-12-19T09:04:25.637
> 
> 标签：ios, regex, nsarray, nsregularexpression

我有一个`NSArray`包含我的应用程序的文档文件夹中存在的所有文件。

这是数组声明代码，

```
 NSArray * filePathsArray ;
    filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
    NSLog(@"Number of images in my app folder %d",[filePathsArray count]); 
```

现在我想将名称以“snap”开头的文件复制`(for ex: snap1 , snap2, snapRecent ...)` 到另一个`NSArray`.

如何使用模式匹配来做到这一点？我是 iOS 开发的新手。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:34:43.473

这是一种方法：

```
NSMutableArray *newArray = [NSMutableArray arrayWithCapacity: 5];
for (NSString *string in filePathsArray)
    if ([string rangeOfString: @"snap"].location == 0)
        [newArray addObject: string];

NSLog(@"%@", newArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:23:16.330

您可以使用该方法`- (NSArray *)filteredArrayUsingPredicate:(NSPredicate *)predicate`过滤与您的模式匹配的对象。例如，像下面这样的东西应该可以解决问题：

```
NSPredicate *filter = [NSPredicate predicateWithFormat:@"SELF beginswith[cd] %@", predicateFilter];
NSArray *filteredArray = [filePathsArray filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:50:42.793

请注意，这`subpathsOfDirectoryAtPath`将对您的文件夹执行深度枚举（它还将搜索所有子文件夹）并将返回相对于基本文件夹的路径。为了在任何以 开头的文件夹中查找所有文件`snap`，您可以执行以下操作：

```
NSArray * filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath: documentsDirectory  error:nil];
NSIndexSet *indexes = [filePathsArray indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    return (BOOL)([[obj lastPathComponent] hasPrefix:@"snap"] && ![[[obj lastPathComponent] pathExtension] isEqualToString:@""]);
}];
NSArray *matches = [filePathsArray objectsAtIndexes:indexes]; 
```

现在`matches`数组将包含所有以`snap`（**不包括**可能以 开头的文件夹`snap`）开头的文件的路径。路径将相对于您为枚举传递的目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:25:27.040

下面的代码应该 hlp

```
NSString *startPattern = @"snap";
for (NSString *filePath in filePathsArray) {
    if (filePath.length < startPattern.length) {
        continue;
    }
    if ([[filePath substringToIndex:startPattern.length] isEqualToString:startPattern]) {
        // copy files
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:40:53.257

如果您更喜欢正则表达式，请使用`NSRegularExpression`类。关联：

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

下面的例子。

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^snap" options:0 error:&error];
//check for error here
NSMutableArray *filteredArray = [NSMutableArray array];

[filePathsArray enumerateObjectsUsingBlock:^(id obj, NSUInteger index, BOOL *stop){

    NSRange rangeOfFirstMatch = [regex rangeOfFirstMatchInString:obj options:0 range:NSMakeRange(0, [obj length])];

    if (!NSEqualRanges(rangeOfFirstMatch, NSMakeRange(NSNotFound, 0))) {

        [filteredArray addObject:obj];

    }

} ]; 
```

# php - opencart - 插入图像的 URL 未正确编码

> ID：13948776
> 
> 赞同：0
> 
> 时间：2012-12-19T09:04:28.897
> 
> 标签：php, opencart

在 ckeditor 中插入图像时，url 输出`http://site.com/image/data/004 - Copy.jpg`不是`http://site.com/image/data/004%20-%20Copy.jpg`

请记住，图像可以在网站上正确显示，但是当我想发送电子邮件时，电子邮件客户端（例如 gmail）会将 url 文件名编码为`http://site.com/image/data/004+-+Copy.jpg`并返回 404。

我可以用 rawurlencode() 解决这个问题，但我似乎找不到在哪里添加它。有任何想法吗？ ![在此处输入图像描述](../Images/9010414e9f902ba925a4ea87fafc7171.png)

**编辑：** 我找到了编辑位置（filemanager.tpl）

`window.opener.CKEDITOR.tools.callFunction(<?php echo $fckeditor; ?>, '<?php echo $directory; ?>' + $(this).find('input[name=\'image\']').attr('value'));`

如何`$(this).find('input[name=\'image\']').attr('value')`使用 rawurlencode 进行编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:22:37.297

显然，您不能`rawurlencode`直接使用 PHP，但您可以通过实现自己的 JavaScript 版本的函数来即兴发挥......

```
function rawurlencode (str) {
    return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\(/g, '%28').
    replace(/\)/g, '%29').replace(/\*/g, '%2A');
} 
```

和...

```
rawurlencode($(this).find('input[name=\'image\']').attr('value')); 
```

# sql - 如何从 ssis 发生错误的位置恢复数据迁移？

> ID：13948779
> 
> 赞同：4
> 
> 时间：2012-12-19T09:04:33.817
> 
> 标签：sql, ssis, sql-server-2008-r2, data-migration, checkpoint

我正在使用 SSIS 将数据从 Oracle 数据库迁移到 SQL Server 2008 r2 数据库。我的问题是，在某个时候，包会失败，比如 100,000 行中有 40,000 行。我该怎么做，以便下次在更正错误或其他内容后运行包时，我希望它从第 40,001 行重新启动，即发生错误的行。

我曾尝试在 SSIS 中使用检查点，但问题是它们只能在不同的控制流任务之间工作。我想要一些可以在正在传输的行上工作的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:40:57.647

我知道没有原生魔法会“知道”它在第 40,000 行失败，当它重新启动时，它应该开始流式传输第 40,001 行。你是正确的，检查点不是答案并且有很多自己的问题（不能序列化对象类型，循环重新启动等）。

如何解决这个问题是通过良好的设计。如果您的包是在预期它会失败的情况下创建的，那么您应该能够处理这些情况。

有两种我熟悉的方法。第一种方法是在源和目标之间的数据流中添加[查找转换](http://msdn.microsoft.com/en-us/library/ms141821.aspx)。这样做的目的是确定目标系统中存在哪些记录。如果未找到匹配项，则仅将这些行发送到目的地。这是一种非常常见的模式，您还可以检测源和目标之间的变化（如果需要的话）。缺点是您将始终将完整的数据集传输出源系统，然后过滤数据流中的行。如果它在 1,000,000 行中的第 99,999 行失败，您仍然需要将所有 1,000,000 行流式传输回 SSIS，以便它找到尚未发送的 1。

另一种方法是在源的 WHERE 子句中使用动态过滤器。如果您可以假设行是按顺序插入的，那么您可以构建您的 SSIS 包，使其看起来像`Execute SQL Task`您`SELECT COALESCE(MAX(SomeId), 0) +1 AS startingPoint FROM dbo.MyTable`对目标数据库运行查询的位置，然后将其分配给 SSIS 变量 (@[User::StartingId]) . 然后，您在 Source 中的 select 语句上使用一个表达式，类似于`"SELECT * FROM dbo.MyTable T WHERE T.SomeId > " + (DT_WSTR, 10) @[User::StartingId]`现在，当数据流开始时，它将从上次加载数据的地方开始。这种方法的挑战是找到那些您知道数据没有乱序插入的场景。

如果您有问题，需要更好的解释，图片等，请告诉我。此外，上面的代码是徒手编写的，因此可能存在语法错误，但逻辑应该是正确的。

# php - PHP 知道用户是否在页面上

> ID：13948782
> 
> 赞同：0
> 
> 时间：2012-12-19T09:04:35.390
> 
> 标签：php, ajax, codeigniter, session

我正在使用 CodeIgniter 在 PHP 中开发 Ticker 支持客户端，我想知道用户是否已经打开票证以从列表中隐藏此票证。

我知道有在打开票证时更改数据库中的标志的解决方案，然后使用：

```
 $(window).unload(function() {
    $.ajax({async:false ..... 
    /* change flag in database */
 }); 
```

但是，如果用户的导航器强制关闭怎么办？我是否需要运行 CRON 任务来重置这些标志？您对完整的解决方案有一些反馈吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:31:54.317

由于 PHP 在每次页面加载时只运行一次，因此持续检查用户是否仍在所需页面上的唯一方法需要 Javascript + AJAX。如何？

每隔 1-5 分钟，您使用上次更新的时间戳（如您所说）更新数据库中的特定字段，并在 PHP 脚本中检查该字段以关闭或保持该票证打开。

顺便注意一下，此解决方案**需要**启用 Javascript，因此您可以强制用户启用它（否则通过阻止它），或者您定义在没有页面加载的几分钟（15-1 小时）后关闭工单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:45:15.030

我可以提出几个选择。

*   使用Jeffrey 建议的**ajax 解决方案。**

    **优点：**易于实现，支持所有浏览器

    **缺点：**不是真的住

*   使用**服务器发送事件**（类似于 ajax 轮询解决方案）

    **优点：**开销少

    **缺点：** IE & Android 上不支持，不是真的直播

*   **websockets**一个完全实时的解决方案。在连接丢失或关闭时建立连接 => 释放票证。

    **优点：**直播，开销最小

    **缺点：** IE10 & Android上不支持`<`，在服务器端更难实现。

但是对于“不支持”的问题，有备用技术（[modernizr](http://modernizr.com)）

# c++ - 深度值和 FBO

> ID：13948788
> 
> 赞同：1
> 
> 时间：2012-12-19T09:04:52.300
> 
> 标签：c++, opengl

![可爱的深度纹理](../Images/a2f6da1552408c0f80a66a057b529f9b.png)

这是我在尝试实现阴影贴图时不断看到 gDebugger 的可爱图像。作为参考，我正在使用[http://fabiensanglard.net/shadowmapping/index.php](http://fabiensanglard.net/shadowmapping/index.php)上的教程。我尝试了几种不同的结果，结果各不相同，主要是具有平坦深度值的 FBO（没有表示奇怪深度范围的轻微变化）或这个很棒的家伙。我已经尝试了很多不同的东西，但是唉，没有完全的 FBO 失败，我主要是回到这个问题上。作为参考，这里是 gDebugger 作为我的实际深度缓冲区吐出的内容：

![深度](../Images/8e970e61176e05b01c454977e01c150d.png)

因此，考虑到所有这些，这是我的代码。着色器代码被保留，因为我还没有在我的 FBO 中得到值得处理的东西。

这是我初始化 FBO/Depth tex 的方法：

```
 int shadow_width = 1024;
    int shadow_height = 1024;

    // Try to use a texture depth component
    glGenTextures(1, &depth_tex);
    glBindTexture(GL_TEXTURE_2D, depth_tex);

    // GL_LINEAR does not make sense for depth texture. However, next tutorial shows usage of GL_LINEAR and PCF
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

    // Remove artefact on the edges of the shadowmap
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP );

    // No need to force GL_DEPTH_COMPONENT24, drivers usually give you the max precision if available 
    glTexImage2D( GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT24, 
        shadow_width, shadow_height, 0, GL_DEPTH_COMPONENT, 
        GL_FLOAT, 0);
    // attach the texture to FBO depth attachment point 
    glBindTexture(GL_TEXTURE_2D, 0);

    // create a framebuffer object
    glGenFramebuffers(1, &fbo_id);
    glBindFramebuffer(GL_FRAMEBUFFER, fbo_id);

    // Instruct openGL that we won't bind a color texture with the currently binded FBO
    glDrawBuffer(GL_NONE);
    glReadBuffer(GL_NONE);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT,GL_TEXTURE_2D, depth_tex, 0);

    // switch back to window-system-provided framebuffer
    glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

这是我的渲染代码：

```
 glLoadIdentity();
    float lpos[4] = {0,0,0,1};
    float lpos3[4] = {5000,-500,5000,1};

    glBindTexture(GL_TEXTURE_2D,0);
    glBindFramebuffer(GL_FRAMEBUFFER,fbo_id);
    glViewport(0, 0, 1024, 1024);
    glClear(GL_DEPTH_BUFFER_BIT);
    glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE); 
    setup_mats(lpos[0],lpos[1],lpos[2],lpos3[0],lpos3[1],lpos3[2]);

    glCullFace(GL_FRONT);
    mdlman.render_models(R_STENCIL);
    mdlman.render_model(R_STENCIL,1);
    set_tex_mat();
    glBindFramebuffer(GL_FRAMEBUFFER,0);

    glViewport( 0, 0, (GLsizei)800, (GLsizei)600 );
    glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE); 
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    this->r_cam->return_LookAt();
    gluPerspective(45,800/600,0.5f,2000.0f);
    glMatrixMode(GL_PROJECTION);
    glLoadMatrixf(&r_cam->getProjectionMatrix()[0][0]);
    glMatrixMode(GL_MODELVIEW);
    glLoadMatrixf(&r_cam->getViewMatrix()[0][0]);

    glCullFace(GL_BACK);
    mdlman.render_models(R_NORM); 
```

以下是我为 FBO 绘制对象的方式：

```
 glEnableClientState(GL_NORMAL_ARRAY);
        glEnableClientState(GL_VERTEX_ARRAY);
        glBindBuffer(GL_ARRAY_BUFFER,models.at(mdlid).t_buff);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,models.at(mdlid).i_buff);

        glNormalPointer(GL_FLOAT,sizeof(vert),BUFFER_OFFSET(sizeof(GLfloat)*2));
        glVertexPointer(3, GL_FLOAT,sizeof(vert),BUFFER_OFFSET(sizeof(GLfloat)*5));         

        glDrawElements(GL_TRIANGLES,(models.at(mdlid).f_index.size())*3,GL_UNSIGNED_INT,0);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
        glDisableClientState(GL_VERTEX_ARRAY);
        glDisableClientState(GL_NORMAL_ARRAY); 
```

一些结束语：来自 gDebugger 的深度缓冲区图像是来自灯光 POV。我的相机是基于四元数的，并使用与 OGL 对齐的矩阵作为它的 lookAt 函数（用于转换为灯光位置/视图）。如果需要，我可以提供代码。其他所有内容几乎都是从教程中复制的，以确保我没有做或设置一些愚蠢的东西。

# php - 如何在缺少回显 $_GET 的情况下添加文本

> ID：13948790
> 
> 赞同：-3
> 
> 时间：2012-12-19T09:04:52.190
> 
> 标签：php, javascript, get

> **可能重复：**
> [在缺少时将 http:// 前缀添加到 URL](https://stackoverflow.com/questions/6240414/add-http-prefix-to-url-when-missing)

我正在使用这样的代码：

```
<?php echo $_GET['i']; ?> 
```

`myweb.com/sample.php?i=http://sample.com`

但我想确保它总是有`http://`以防万一`myweb.com/sample.php?i=sample.com`

如何使此代码`<?php echo $_GET['i']; ?>`确保始终添加`http://`以防万一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:10:50.260

### 使用这种方式：

```
<?php
    if (strpos("http://", $_GET['i']) !== 0)
        $_GET['i'] = "http://" . $_GET['i'];
?> 
```

### 或作为回声语句：

```
echo (strpos("http://", $_GET['i']) !== 0) ? "http://" . $_GET['i'] : $_GET['i']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:12:13.497

如果您要在查询字符串中动态生成上述 http url，请使用 php 中的 urlencode 或 rawurlencode 函数将查询字符串连接到您的 url，然后使用 http get ($_GET['i']) 接受请求。

希望对你有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:12:32.623

使用 stristr() 函数。

```
$url = stristr($_GET['i'],'http://');
if($url != '') 
```

然后字符串包含'http'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:09:19.277

您可以检查您的 $_GET['i'] 并仅接受 http：

例如：

'http://' 包含 7 个字符 + 最小的 url 'w.xx' 包含 4 个字符

因此，您的 $_GET[i] 的最小长度是 11 个字符

```
if(!empty($_GET['i']))
{

    $len = strlen($_GET['i']);
    if($len > 10 and  substr($_GET['i'], 0, 7) === 'http://')
    {     
        [... some of your code ?]
    }
    else if ($len > 3)
    {

        //force add http://
        $_GET['i'] = 'http://'.$_GET['i'];
     }

     unset($len);
}
else
{
    $_GET['i'] = 'No url?';
}

// <-- Place for your echo 
```

# javascript - 写我自己的语法高亮

> ID：13948796
> 
> 赞同：3
> 
> 时间：2012-12-19T09:04:59.700
> 
> 标签：javascript, syntax-highlighting, token

我正在尝试编写自己的代码语法荧光笔，但我唯一的困难是决定如何开始处理代码。例如，要解析每个令牌，我必须只使用正则表达式吗？或者也许我必须为每个空间拆分代码？还是每条线？我知道我必须能够在单词之间保持分隔以防止双重匹配。例如，如果我想搜索所有关键字，如“ *this、var、in、return 等*”，很明显在*this.index*中也匹配**索引**。

那么，根据您的经验，您的意见是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:21:13.340

这是一个很好的问题。当我开发自己的编程语言时，我进行了类似的研究（仅用于概念验证）。我研究了 Douglas Crockford 的 JSLint 和 JSMin 的实现。我看到他通过逐个符号读取源代码来标记代码。例如，您可以[在此处](https://github.com/douglascrockford/JSMin/blob/master/jsmin.c)和[此处](https://github.com/mgechev/ELang/blob/master/src/org/mgechev/edulang/lexer/Lexer.java)查看此方法。实际上，您只需要在突出显示代码之前进行标记化，因此我认为这种方法最适合。在此之后，您将创建以较少错误为前提的高级解析器。在为不同语言创建荧光笔时，您可能还会有更多的代码重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:17:34.870

我宁愿建议你看看现有的解决方案。至于我 - 我对这款荧光笔印象深刻 - [http://softwaremaniacs.org/soft/highlight/en/](http://softwaremaniacs.org/soft/highlight/en/)

它使用插件来解析不同的语言——你可能有很好的经验。

# java - 在 servlet 过滤器中模拟私有字段

> ID：13948807
> 
> 赞同：4
> 
> 时间：2012-12-19T09:05:29.460
> 
> 标签：java, servlets, servlet-filters, mockito

是否可以模拟（当前使用 Mockito，也可能是其他测试库）类中的字段“sf”，如下所示：

```
public class SomeFilter implements Filter {

   private Logger log = Logger.getLogger(getClass());
   private SomeField sf = new SomeField();

   @Override
   public void init(FilterConfig fc) throws ServletException {
      log.info("");
   }

   @Override
   public void doFilter(ServletRequest req, ServletResponse res, FilterChain fc) throws     IOException, ServletException {
        fc.doFilter(request, response);
   }

   @Override
   public void destroy() {
      log.info("");
   }
} 
```

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:28:40.860

考虑具有一些漂亮特性的[PowerMock框架，包括](http://code.google.com/p/powermock/)[与 Mockito 框架的一些集成](http://code.google.com/p/powermock/wiki/MockitoUsage13)

考虑[这个示例](http://code.google.com/p/powermock/wiki/BypassEncapsulation)绕过封装并访问私有字段，如下所示

```
String sf = Whitebox.getInternalState(o, "sf", String.class, B.class);
Whitebox.setInternalState(o, "sf", "XXX", B.class); 
```

还要考虑（来自最后一个链接）：

> *所有这些事情都可以在不使用 PowerMock 的情况下实现，这只是普通的 Java 反射。然而反射需要很多样板代码并且容易出错，因此 PowerMock 为您提供了这些实用方法。PowerMock 让您可以选择是否重构代码并添加 getter/setter 方法来检查/更改内部状态，或者是否使用其实用程序方法来完成相同的事情而不更改生产代码。由你决定！*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:07:16.857

是的。在您的测试类中，您可以使用`ReflectionTestUtils`Spring Framework

[http://static.springsource.org/spring/docs/2.5.5/api/org/springframework/test/util/ReflectionTestUtils.html](http://static.springsource.org/spring/docs/2.5.5/api/org/springframework/test/util/ReflectionTestUtils.html)

像这样调用`setField`方法：

```
SomeFilter filter = new SomeFilter();
SomeField field = Mockito.mock(SomeField.class);
ReflectionTestUtils.setField(filter , "sf", field); 
```

您可以像往常一样在测试用例中模拟对象。

如果不能导入 Spring Framework，直接使用 Java 反射来做同样的事情并不太难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T09:12:46.557

我很想制作该字段，`protected`或者`package-private`然后在您的测试中注入模拟，例如：

```
final SomeField sf = mock(SomeField.class);
someFilter.sf = sf; 
```

否则，您可以提供一个构造函数来注入模拟：

```
...
public SomeFilter() {
   this(new SomeField());
}

public SomeFilter(SomeField sf) {
    this.sf = sf;
}
... 
```

然后在您的测试中，您可以像这样传递模拟：

```
final SomeField sf = mock(SomeField.class);
SomeFilter someFilter = new SomeFilter(sf); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T20:16:41.007

您可以使用 PowerMock 模拟 SomeField 类的构造函数。从[文档](http://code.google.com/p/powermock/wiki/MockConstructor)中：

## 新对象的模拟构造

1.  `@RunWith(PowerMockRunner.class)`在测试用例的类级别使用注释。`@PrepareForTest(ClassThatCreatesTheNewInstance.class)`在测试用例的类级别使用 注释。
2.  用于`PowerMock.createMock(NewInstanceClass.class)`创建应该构造的类的模拟对象（我们称之为mockObject）。
3.  用于 `PowerMock.expectNew(NewInstanceClass.class).andReturn(mockObject)`期望 NewInstanceClass.class 类型的对象的新构造，而是返回模拟对象。
4.  用于`PowerMock.replay(mockObject, NewInstanceClass.class)`将模拟对象和类更改为重放模式，或者使用 `PowerMock.replayAll()`方法。
5.  用于`PowerMock.verify(mockObject, NewInstanceClass.class)`更改模拟对象和类的验证模式，或者使用 `PowerMock.verifyAll()`方法。

如果你想使用带有[Mockito 语法](http://code.google.com/p/powermock/wiki/MockitoUsage13)的 powermock ，那么它看起来像：

```
whenNew(MyClass.class).withNoArguments().thenThrow(new IOException("error message")); 
```

# html - css边框不适用于chrome中的鼠标悬停事件？

> ID：13948813
> 
> 赞同：10
> 
> 时间：2012-12-19T09:06:05.737
> 
> 标签：html, css

鼠标悬停功能不适用于 Google Chrome。在 Firefox 和 IE 上运行良好。虽然鼠标悬停在边框底部并没有消失。但如果删除`border-collapse: collapse`它工作正常。为什么是这样？任何解决方案。

CSS：

```
 html, body{
 margin: 0;
 padding: 0;
 }

.table {
    border-collapse: collapse;
}

.border {
    border-style: solid;
    border-width: 1px;
    border-color: #000000;
    background-color: #deecf9;
    border-left: 0px;
    border-right: 0px;
}

.border1 {
    border-style: solid;
    border-width: 1px;
    border-color: #000000;
    background-color: #deecf9;
    border-left: 0px;
    border-right: 0px;
}

.border2 {  
    border-style: solid;
    border-width: 1px;
    border-color: #000000;
    background-color: #FFFFFF;
    border-left: 0px;
    border-right: 0px;
    border-bottom: 0px;
    padding: 1px;
} 
```

桌子：

```
<table width="1024" border="0" align="center" bgcolor="#FFFFFF" class="table">
  <tr>
    <td height="9" colspan="4" class="border"></td>
  </tr>
  <tr>
    <td class="border1" onmouseover="this.className='border2'" onmouseout="this.className='border1'">&nbsp;</td>
    <td class="border1" onmouseover="this.className='border2'" onmouseout="this.className='border1'">&nbsp;</td>
    <td class="border1" onmouseover="this.className='border2'" onmouseout="this.className='border1'">&nbsp;</td>
    <td class="border1" onmouseover="this.className='border2'" onmouseout="this.className='border1'">&nbsp;</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T09:16:43.340

这样做：在您的正常状态元素上放置一个透明边框。当应用 :hover 时，边框的大小会改变元素占用的大小。

例如：

```
.border1
{   
    border:1px solid #000000;
    border-left:1px solid transparent;
    border-right:1px solid transparent;
    background-color: #FFFFFF;
}
.border1:hover
{
    border:1px solid transparent;
    border-top:1px solid #000000;
    padding:1px;
    background-color: #deecf9;
} 
```

你的 HTML 应该是这样的：

```
<table width="1024" align="center" bgcolor="#FFFFFF" class="table">
<tr>
    <td height="9" colspan="4" class="border"></td>
</tr>
<tr>
    <td class="border1">&nbsp;</td>
    <td class="border1">&nbsp;</td>
    <td class="border1">&nbsp;</td>
    <td class="border1">&nbsp;</td>
</tr>
</table> 
```

无需将鼠标悬停作为属性使用，只需使用 css。

编辑：我注意到您正在使用 css`border-collapse`属性。这设置表格边框是折叠成单个边框还是像标准 HTML 中那样分离。尝试删除此行或将其设置为“单独”，也许这会起作用。

# asp.net-mvc - 如何合并来自 2 个存储库的数据

> ID：13948814
> 
> 赞同：1
> 
> 时间：2012-12-19T09:06:08.290
> 
> 标签：asp.net-mvc, model-view-controller, repository, repository-pattern, repository-design

我有一个关于在 asp/mvc 中合并来自 2 个存储库的数据的问题。

我有 2 个存储库，例如 UserRepo 和 InvoiceRepo。

现在我想创建一个包含用户数据和发票数据的查询（例如：所有用户的地址和数据来自上一张发票）。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:17:50.343

`InvoiceRepo`您可以使用执行连接并返回您需要的所有数据的方法来扩展现有存储库（可能）。

`InvoiceRepo.GetUserInvoices(userId)`听起来是个明智的选择。

这是存储库模式的一个常见问题 - 为您的方法找到合适的存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:22:49.023

为什么你必须一通电话？

```
var users = userRepos.GetUsers();
var lastInvoices = invoiceRepos.GetLastInvoiceForAllUsers();
var usersWithInvoices = (from x in users
                         select new UserWithInvoice(x, lastInvoices.First(inv => inv.userId = x.Id); 
```

那将是两个 SELECT 并且必须更容易理解。

# nhibernate - NHibernate SaveOrUpdate 也能通过实体的相关对象工作吗？

> ID：13948815
> 
> 赞同：1
> 
> 时间：2012-12-19T09:06:10.760
> 
> 标签：nhibernate, many-to-many

我有一个 NHibernate 实体，它有 2 个多对多关系。

假设我有这个实体的分离版本，SaveOrUpdate 是否也能够通过相关对象决定保存或更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:12:57.087

这取决于如何配置关系。

想到的主要事情是级联，以及它是否是[反向](https://stackoverflow.com/questions/713637/inverse-attribute-in-nhibernate)的。

如果你想让事情自动级联（~work thru），那么只需在你的 hbm 集合关联节点中设置它

```
cascade="all" 
```

还有更多值得阅读和理解的[级联选项](http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update)

# php - 如果文件中有很多单词使用PHP相同，则仅在文件中获取相同的单词1个单词

> ID：13948822
> 
> 赞同：0
> 
> 时间：2012-12-19T09:06:44.043
> 
> 标签：php, file

我想从文本文件中读取数据，并且某些数据的组是相同的。我的代码如下：

```
$PMTA_DATE = date("Y-m-d");
            $PMTA_FILE = file_get_contents("../stats_domain_emetteur_recepteur.affinitead.net.".$PMTA_DATE.".txt");
            $lineFromText = explode("\n", $PMTA_FILE);
            $result = array();
            $cate = "";
            $total ="";
            $fail = "";
            $mailSuc = "";
            $title = "";
            foreach($lineFromText as $line){                    
                    $words = explode(";",$line);
                    echo $words[5];
                    echo "<br>";
                     if($title == ""){
                         $title = $words[0];
                     }

                     $cate .= ','."'$words[6]'";
                     $total .= ','.$words[7];
                     $fail .= ','.$words[8];
                     $mailSuc .= ','.((int)$words[7] - (int)$words[8]);                         

     } 
```

**在文件数据中：**

```
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;hotmail.fr;150116;90753;60.45
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;hotmail.com;108478;65766;60.62
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;free.fr;81431;97;.11
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;wanadoo.fr;77786;15;.01
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;gmail.com;77325;1;0
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;orange.fr;44768;13;.02
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;laposte.net;33844;16;.04
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;neuf.fr;29918;26;.08
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;yahoo.fr;23232;1;0
2012-12-19-0830;affinitead.net;1409462;231830;16.44;friendcorp.fr;yahoo.fr;21073;2;0
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;voila.fr;19692;3;.01
2012-12-19-0830;affinitead.net;1409462;231830;16.44;messengear.fr;free.fr;18234;5;.02
2012-12-19-0830;affinitead.net;1409462;231830;16.44;friendcorp.fr;free.fr;17658;12;.06
2012-12-19-0830;affinitead.net;1409462;231830;16.44;lebuzzdesbonsplans.com;yahoo.fr;15856;103;.64
2012-12-19-0830;affinitead.net;1409462;231830;16.44;cwlunit.com;laposte.net;13463;1;0
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;msn.com;12044;7222;59.96
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;live.fr;11491;6983;60.76
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;aliceadsl.fr;11145;17;.15
2012-12-19-0830;affinitead.net;1409462;231830;16.44;cwlunit.com;sfr.fr;11135;1;0
2012-12-19-0830;affinitead.net;1409462;231830;16.44;tendancity.com;yahoo.fr;10631;0;0
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;sfr.fr;9878;1;.01
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;club-internet.fr;9868;4;.04
2012-12-19-0830;affinitead.net;1409462;231830;16.44;friendcorp.fr;wanadoo.fr;9533;0;0
2012-12-19-0830;affinitead.net;1409462;231830;16.44;boulevard-des-ventes.com;aol.com;9253;7729;83.52
2012-12-19-0830;affinitead.net;1409462;231830;16.44;lebuzzdesbonsplans.com;hotmail.com;8656;252;2.91
2012-12-19-0830;affinitead.net;1409462;231830;16.44;messengear.fr;laposte.net;8616;1;.01 
```

正如你所看到的，有些数据是一样的，就像`boulevard-des-ventes.com`它有很多时间一样，所以我不想要那个。如果它有很多时间，我只想取它 1。

这是我需要的输出：

```
boulevard-des-ventes.com        hotmail.fr  150116
                                hotmail.com 108478
                                free.fr      81431
                                ..................
                                ..................
                                ..................
friendcorp.fr                   yahoo.fr    21073
                                free.fr      17658
cwlunit.com                     laposte.net  13463
                                sfr.fr       11135
                                ..................
                                ..................
                                ..................
..................................................
..................................................
.................................................. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:18:52.150

使用关联数组来记住您已经处理了哪些域，并在获得重复项时跳到下一行。

```
$domains_seen = array();
foreach($lineFromText as $line){
  $words = explode(";",$line);
  $domain = $words[5];
  if array_key_exists($domain, $domains_seen) {
    continue;
  }
  $domains_seen[$domain] = true;
  ...
} 
```

# winapi - 按钮区域 Win32Api

> ID：13948824
> 
> 赞同：1
> 
> 时间：2012-12-19T09:06:53.560
> 
> 标签：winapi

`PUSHBUTTON`我用这段代码创建了一个：

```
hWndBtn = CreateWindow(L"Button", WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON, x, y, width, height, hWndParent, (HMENU)IDC_MYBUTTON, hInst, NULL); 
```

然后，我创建一个椭圆区域：

```
HRGN hRgn = CreateEllipticRgn(x1, y1, x2, y2); 
```

最后我设置按钮区域：

```
SetWindowRgn(hWndBtn, hRgn, true); 
```

但我的按钮仍然是矩形。我怎样才能使它成为一个椭圆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:16:23.073

`SetWindowRgn`仅适用于顶级窗口，不适用于子窗口。

# objective-c - 禁用上视图交互

> ID：13948830
> 
> 赞同：1
> 
> 时间：2012-12-19T09:07:20.110
> 
> 标签：objective-c, cocoa-touch

我的程序中有两个视图。一个是statusView，它的alpha设置为0.8f。下面是tableView。如何以这种方式禁用 statusView，单击它不会单击 tableView。设置`userInteractionEnabled = false;`没有帮助。

这是我添加视图的方法。

```
[self.view addSubview:_builded.view]; // obj with my tableView
info = [[Info alloc] init];
[self.view addSubview:info.view]; // statusView 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:14:51.303

如果你像下面这样添加一个子视图，下面的 tableView 就不会捕捉到用户交互。

```
UITableView *testTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
testTableView.delegate = self;
testTableView.dataSource = self;
[self.view addSubview:testTableView];

UIView *statusView = [[UIView alloc] initWithFrame:CGRectMake(20, 20, 200, 200)];
statusView.backgroundColor = [UIColor redColor];
statusView.alpha = 0.8;
[self.view addSubview:statusView]; 
```

# php - 在 GET ajax 调用中传递 HEX 颜色

> ID：13948832
> 
> 赞同：2
> 
> 时间：2012-12-19T09:07:24.937
> 
> 标签：php, javascript, ajax, get

我正在尝试通过 GET ajax 调用将一些十六进制颜色传递给 php 脚本。PHP 似乎不喜欢十六进制颜色，但我尝试替换`#`并使用`encodeURIComponent`这两种颜色都不起作用。

这是js（每个`currentColors`条目都是十六进制颜色）

```
var dataString = 'designName=test&mc1='+currentColors[1]+'&mc0='+currentColors[0]+'&sp='+currentColors[2];
var strippedString = encodeURIComponent(dataString); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:17:00.987

用于`encodeURIComponent`编码 URI*组件*：

```
var strippedString = 
    "designName=test" + 
    "&mc1=" + encodeURIComponent(currentColors[1]) +
    "&mc0=" + encodeURIComponent(currentColors[0]) +
    "&sp="  + encodeURIComponent(currentColors[2]); 
```

例子：

```
var strippedString = 
    "designName=test" + 
    "&mc1=" + encodeURIComponent("#FF0000") +
    "&mc0=" + encodeURIComponent("#00FF00") +
    "&sp="  + encodeURIComponent("#0000FF");
// "designName=test&mc1=%23FF0000&mc0=%2300FF00&sp=%230000FF" 
```

在服务器端，查询字符串将产生：

```
// parse_str("designName=test&mc1=%23FF0000&mc0=%2300FF00&sp=%230000FF", $my_GET);
// var_dump($my_GET);

array(4) {
  ["designName"]=>
  string(4) "test"
  ["mc1"]=>
  string(7) "#FF0000"
  ["mc0"]=>
  string(7) "#00FF00"
  ["sp"]=>
  string(7) "#0000FF"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:13:10.893

你可以这样做：

```
var strippedString = dataString.split('#').join(''); 
```

然后，在服务器端，`'#'`再次添加到参数中。

* * *

`.split('#')`在字符处将字符串拆分为数组`'#'`：

```
var s = 'designName=test&mc1=#FF0000&mc0=#FFFFFF&sp=#FF00FF';
var a = s.split('#');
console.log(a);
//["designName=test&mc1=", "FF0000&mc0=", "FFFFFF&sp=", "FF00FF"] 
```

`.join('')`然后再次将此数组连接在一起：

```
var s = a.join('');
console.log(s);
//'designName=test&mc1=FF0000&mc0=FFFFFF&sp=FF00FF' 
```

您还可以在以下位置使用占位符/替换字符串`.join('')`：

```
var s = a.join('%');
console.log(s);
//'designName=test&mc1=%FF0000&mc0=%FFFFFF&sp=%FF00FF' 
```

* * *

或者，就像[Salman A](https://stackoverflow.com/users/87015/salman-a) [回答](https://stackoverflow.com/a/13948981/1835379)的那样，`encodeURIComponent`仅在组件上使用。（这无疑比我建议的数组函数快）

# c# - 在运行时分配实例名称

> ID：13948836
> 
> 赞同：2
> 
> 时间：2012-12-19T09:07:32.403
> 
> 标签：c#, vb.net

我有类`Student`，我想创建类的多个实例，`Student`并希望将实例名称分配为 S1,S2,S3..etc（1,2,3 将是学生的 id，因此实例名称将作为 S+StudentID）在运行。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:09:52.750

您不能在程序执行期间创建引用变量，但可以将对象引用保存到`List(Of Student)`集合`Dictionary(Of String, Student)`中。

```
 Dim stdList As New List(Of Student)
 stdList.Add(New Student()) 
```

或者

```
Dim stdMap As New Dictionary(Of String, Student)
stdMap.Add("s1", New Student()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:16:16.640

您可以做的一件事是在 Student 类中有一个变量，为它们提供一个唯一的名称。正如 AVD 所说，您仍然必须将它们存储在 List 或 Dictionary 中，但这样您就可以使用 linq 或 select 查询通过您的给定名称查找它们，只要您设置变量。

学生班；

```
studentName {get;set;} 
```

您创作的地方；

```
List<Student> mListStudent = new List<Student>()

For(int i = 0; i >= HoweverManyYouWantToCreate; i++)
 {
 //declare student variables
 Student student = new Student();
 studentName = i+studentID;
 mListStudent.Add(Student);
} 
```

然后使用像 LINQ 这样的东西，你可以得到它；

```
var selectedStudent = (from students in mListStudents
                           where students.studentName == "searchParam"
                           select students).Single(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:14:16.370

它真的不清楚你想要什么，但这是一个如何生成实例名称的简单示例：

```
List<Student> students = new List<Student>();

for(int i = 0; i < 10; i++)
{
     int id = i;
     string instanceName = String.Format("S{0}", id);
     Student s = new Student(instanceName);
     students.Add(s);
} 
```

# ios - titleLable.text 不工作

> ID：13948842
> 
> 赞同：2
> 
> 时间：2012-12-19T09:07:55.420
> 
> 标签：ios, uibutton

我创建了一个 UIButton 并用于`titleLable.text`设置文本，但在按钮中看不到文本，所以我用`setText`方法替换它，它显示文本，我只想知道为什么`titleLable.text`它不起作用

```
 UIButton *button=[UIButton buttonWithType:UIButtonTypeCustom];
    button.titleLabel.text=@"text"; 
```

然后像下面这样使用

```
 [button setTitle:@"text" forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:10:13.463

因为`titleLabel`是`readonly`财产。

> **标题标签**
> 
> 显示`currentTitle`按钮属性值的视图。（只读）
> 
> `@property(nonatomic, readonly, retain) UILabel *titleLabel`>
> 
> **讨论**
> 
> 虽然这个属性是只读的，但它自己的属性是读/写的。主要使用这些属性来配置按钮的文本。例如：
> 
> `UIButton *button = [UIButton buttonWithType: UIButtonTypeRoundedRect];`
> 
> `button.titleLabel.font = [UIFont systemFontOfSize: 12];`
> 
> `button.titleLabel.lineBreakMode = UILineBreakModeTailTruncation;`
> 
> **不要使用标签对象来设置文本颜色或阴影颜色。相反，使用此类的 setTitleColor:forState: 和 setTitleShadowColor:forState: 方法进行这些更改。**
> 
> **即使按钮尚未显示，titleLabel 属性也会返回一个值。对于系统按钮，该属性的值为 nil。**
> 
> **可用性**
> 
> ```
> Available in iOS 3.0 and later. 
> ```
> 
> 在 UIButton.h 中声明

请参阅[UIButton 类](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:21:56.783

Midhun 的回答虽然完全正确，但并没有回答这个问题。正如他所说，标签属性是只读的，但*它的*属性不是，包括文本属性。

设置文本不起作用的原因是按钮本身将在内部设置文本，具体取决于控件状态。这将覆盖您设置为文本的任何内容。

这就是您改用的原因`setTitle:forControlState:`。该按钮将使用所有其他状态的正常状态值，除非您另有说明，但如果您从未为任何控件状态设置标题，它将不会显示标签。

# zedgraph - 所有 y 轴的 zedgraph 通用主标

> ID：13948844
> 
> 赞同：1
> 
> 时间：2012-12-19T09:08:04.240
> 
> 标签：zedgraph

我正在使用 Zedgraph 显示多个 y 轴（YAxis 和 Y2Axis）。当有多个 yaxis 时，将曲线与所有主要刻度进行比较变得相当困难。在下图中，每条曲线都有自己的主要刻度： [https ://dl.dropbox.com/u/70476173/problem.png](https://dl.dropbox.com/u/70476173/problem.png)

我希望图表共享相同的主要刻度，以便比较曲线。我试过代码：

```
 //majorTickCount = 12.0
        var min = Math.Floor(yAxis.Scale.Min);
        var max = Math.Ceiling(yAxis.Scale.Max);
        var step = (max - min) / majorTickCount;

        var wholeStep = step; 
        max = min + wholeStep * majorTickCount;
        //yAxis.Scale.MajorStepAuto = true;

        //yAxis.Scale.MajorStepAuto = false;
        //yAxis.Scale.MinGrace = 0;
        //yAxis.Scale.MaxGrace = 0;

        yAxis.Scale.Min = min;
        yAxis.Scale.Max = max;
        yAxis.Scale.MajorStep = wholeStep;
        yAxis.Scale.BaseTic = min; 
```

这似乎创造了预期的效果，但有一个问题： [https ://dl.dropbox.com/u/70476173/problem2.png](https://dl.dropbox.com/u/70476173/problem2.png)

红色曲线第 2 和第 3 点的值为 6，但正如您在图片上看到的那样，该点位于 6 的主网格下方。我认为问题在于，majorstep 计算为 2.5，而显示 6 的 y 轴标签应该而是6.1或类似的东西。

TL;DR：如何让我的所有 y 轴共享相同的主要步骤

知道如何缩放 y 轴以使它们共享相同的主网格吗？

# android - Android 版 Google 地图不显示地铁站和其他公共场所

> ID：13948845
> 
> 赞同：0
> 
> 时间：2012-12-19T09:08:15.413
> 
> 标签：android, google-maps, android-mapview, android-maps

我已经成功地在 Google Maps for Android 上的一些随机坐标之间绘制了一条线。但正如我所见，公共场所，如交通设施（地铁站）和其他重要道路没有显示。现在要补充这个问题，当我读到 [这篇文章](https://stackoverflow.com/questions/6328959/choosing-right-approch-to-implement-google-map-in-android)时我很困惑。

所以，我想我可能正在使用 Native SDK 的谷歌地图（导入`com.google.android.maps.MapActivity;`并`<uses-library android:name="com.google.android.maps" />`在应用程序的清单文件中提到）我也在 Android v.2.3.3 上测试我的应用程序（在模拟器和 HTC Desire S 上都有 2.3。 3）。

我是否必须在 MapView Controller 中设置任何 Map View 标志来显示重要的道路、公共设施等？我错过了什么？任何建议将被认真考虑。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:54:12.473

nvm伙计们..我一直在传递错误的坐标。
实际上并不完全错误，但它们传递的格式是错误的。

`28°28'46"N (Lat) 77°4'47"E (Lon)`与`28.4795 (Lat) 77.0800 (Lon)` 但不是 28.2846 77.0447 相同

:)

# c# - 在 NavigationService.GoBack 上使用变量

> ID：13948849
> 
> 赞同：7
> 
> 时间：2012-12-19T09:08:31.583
> 
> 标签：c#, windows-phone-8

`NavigationService.GoBack()`; 我在 viewmodel 中设置了一个变量，然后我想返回，当我返回时我想使用该变量，但似乎没有运行，我不想刷新该页面。

有任何想法吗？

在这里我正在设置变量，我想回到我的 MainPage。

```
void item_click(object sender, RoutedEventArgs e)
   {

     Button b = e.OriginalSource as Button;

     App.ViewModel.bName = b.Content.ToString();
     App.ViewModel.bID = b.Name;

     this.NavigationService.GoBack();

    } 
```

在我的 MainPage 中，我想运行检查以查看变量是否已更改。

```
public MainPage()

    {
      /*
i don't want to run this actually, when i'm coming back from my secondarypage.

        InitializeComponent();
        InitializeSettings();

*/

            if (App.ViewModel.bName != null)
            {
                myButton.Content = App.ViewModel.bName;
                myButton.Name = App.ViewModel.bID;
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:18:49.470

我没有理解所有内容，但是您是否尝试过使用“App”类来为所有页面而不是 ViewModel 声明一个全局变量？

添加也许：

利用：

```
(App)App.Current 
```

从此链接： [如何在 Windows Phone 的其他页面中引用属性、应用程序中的全局变量](https://stackoverflow.com/questions/7155042/how-to-reference-properties-global-variable-in-app-from-other-page-for-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:57:01.683

哦，我很抱歉这个模糊的问题，但我解决了我的问题。

这是主页中需要的。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {

        if (App.ViewModel.bName != null)
        {
            myButton.Content = App.ViewModel.bName;
            myButton.Name = App.ViewModel.bID;
        }

        base.OnNavigatedTo(e);

    } 
```

# mysql - 这个查询是如何在 mysql 中完成的？

> ID：13948851
> 
> 赞同：1
> 
> 时间：2012-12-19T09:08:49.033
> 
> 标签：mysql

鉴于下表...

```
ID  USER  NUM
 1     1   69
 2     2   75
 3     3    7
 4     1   31
 5     2   18
 6     3   70
 7     1   12
 8     2   23
 9     3   42 
```

...哪个查询将为每个用户返回具有*最低NUM 的行？*

结果应该看起来像......

```
ID  USER  NUM
 7     1   12
 5     2   18
 3     3    7 
```

不能把我的头绕在这个上面！假设它有一个`GROUP BY`，但我尝试的一切都失败了......任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:11:04.510

```
SELECT t.*
FROM tablename t
INNER JOIN (SELECT user, MIN(num) num
FROM tablename
GROUP BY user) x ON t.user = x.user AND t.num = x.num 
```

或者

```
SELECT t1.*
FROM tablename t1
LEFT JOIN tablename t2 ON t1.user = t2.user AND t1.num > t2.num
WHERE t2.id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:11:57.913

```
SELECT ID , MIN(NUM) as MIN_NUM , USER FROM usertable GROUP BY USER 
```

看看演示[http://sqlfiddle.com/#!2/ce2fd/1](http://sqlfiddle.com/#!2/ce2fd/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:17:53.853

这是另一种方法。**更新了正确的参考**

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/9c8e7)

询问

```
select b.id, a.user, a.minnum from 
mytable as b
join 
(select user, min(num) as minnum
 from mytable
 group by user
) as a
on b.user = a.user
where b.num = a.minnum
order by a.minnum asc
limit 3
; 
```

结果：

```
 ID    USER    MINNUM
3   3   7
7   1   12
5   2   18 
```

# java - PDF找出文本是否带下划线或表格单元格

> ID：13948853
> 
> 赞同：42
> 
> 时间：2012-12-19T09:08:56.473
> 
> 标签：java, pdf, pdfbox

我一直在玩 PdfBox 和 PDFTextStripperByArea 方法。

**如果文本是粗体**或*斜体*，我能够提取信息，但我无法获取下划线信息。

据我在PDF中的理解，下划线是通过画线来完成的。所以理论上我应该能够获得一些关于文本周围某处线条的信息。提供这些信息后，我可以找出其中一个文本是带下划线还是在表格中。

到目前为止，这是我的代码：

```
List<TextPosition> textPos = charactersByArticle.get(index);

for (TextPosition t : textPos)
{               
    if (t.getFont().getFontDescriptor() != null)
    {                           
        if (t.getFont().getFontDescriptor().getFontWeight() > BOLD_WEIGHT ||
            t.getFont().getFontDescriptor().isForceBold())
        {
            isBold = true;
        }

        if (t.getFont().getFontDescriptor().isItalic())
        {
            isItalic = true;
        }
    }
} 
```

我试图玩转在*PDFStreamEngine类的**processEncodedText*方法中处理的 PDGraphicsState 对象，但在那里没有找到行的信息。

 *可以从中检索此信息的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T08:38:11.607

这是我到目前为止发现的：

PDFBox 使用资源文件将 PDF 运算符/指令绑定到某些类，然后这些类处理信息。

如果我们看一下下面的***PDFTextStripper.properties***资源文件：

> pdfbox\src\main\resources\org\apache\pdfbox\resources\

我们可以看到，例如 BT 运算符绑定到 **org.apache.pdfbox.util.operator.BeginText**类等等。

**PDFTextStripper**下_

> pdfbox\src\main\java\org\apache\pdfbox\util\

考虑到这一点并利用此类处理 PDF。

**但是所有图形对象都被忽略了，因此没有下划线或表格结构的信息！**

现在，如果我们看一下*PageDrawer.properties*资源文件，我们可以看到这个资源文件绑定到几乎所有可用的运算符。**下的PageDrawer**类使用哪个

> pdfbox\src\main\java\org\apache\pdfbox\pdfviewer\

现在的“诀窍”是找出哪些图形运算符代表下划线和表格，并将它们与**PDFTextStripper**结合使用。

现在这意味着阅读 PDF 文件规范，这是目前很多工作的方式。

如果有人知道哪些操作员负责绘制下划线和表格线的哪些操作，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T02:01:41.210

正如您所提到的——PDFBox 使用资源文件，将 PDF 运算符/说明绑定到将处理信息的访问者。

您可能最好先将 PDFBox 的现有访问者复制到您自己的源文件夹中，然后从那里添加/扩展实现。

我很久以前的 PostScript 经验回忆起 'moveto' 和 'lineto' 运算符。由于 PDF 大致基于 PS，因此您将寻找类似的东西。

[http://learnpostscript.wordpress.com/category/lineto/](http://learnpostscript.wordpress.com/category/lineto/)

PDF 格式是 ab*tch——它是 HTML，做错了。它代表图形实现，而不是语义。甚至重构句子也很困难——单词甚至单个字符被定位，“空格”或“换行符”必须通过算法重构。简而言之，Adobe 是个坑。而 Reader 是一头不符合人体工程学、漏洞百出、不安全、臃肿的猪。

但是，您可以完成您的要求——如果您愿意投入 12 个多小时的工作。除了按位置检测外，下划线通常会在 PDF 中的文本之后立即发出......所以您可以锁定您通过 PDF 文档顺序进行检测，而不仅仅是页面位置。

另外，尝试用带下划线的文本构建一个简单的两行 PDF。然后看看你能做什么，把它解析回来！下划线应该像狗的香蕉一样突出，一旦你能察觉到这一点，你就会顺利上路。

PDFBox的可扩展性不是很好，主要是一堆算法。出于这个原因，只需从那里复制 PDFTextStripper 源（并且可能有 PageDrawer 供参考）和原型。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T07:59:39.827

您可以使用 Itext 生成 pdf 报告。

通过使用 itext，您可以轻松地放置线条。

尝试以下。

**document.add(new LineSeparator(0.5f, 50, null, 0, 198));**

上面的代码用于生成 pdf 报告中的行。并根据您的选择设置尺寸。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T07:57:20.373

据我了解pdfbox，没有选项可以阅读下划线。也许您可以为此尝试 itextpdf 。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-26T21:25:43.370

根据 api [getfont()](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/TextPosition.html#getFont%28%29)返回的字体大小。

您可以使用[getStyle()](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/pdmodel/interactive/annotation/PDBorderStyleDictionary.html#getStyle%28%29)方法，它将返回`STYLE_UNDERLINE`带下划线的字体。因此，您可以检索下划线样式。*

# java - 拉后的eclipse mercurial冲突：如何选择远程文件

> ID：13948858
> 
> 赞同：6
> 
> 时间：2012-12-19T09:09:06.583
> 
> 标签：java, eclipse, version-control, mercurial, mercurialeclipse

我在 bitbucket 有一个存储库，我正在使用 Mercurial 插件将变更集从其中提取到 Eclipse。Eclipse中的一些文件被修改了，所以会导致冲突。

![在此处输入图像描述](../Images/23b2faa72d94a9d4bb94255e289d6370.png)

![在此处输入图像描述](../Images/95775b2b820136d0ed52ec067c068850.png)

我只想放弃本地文件并用遥控器更新它。所以我右键单击项目并选择团队 - 同步

**但是我应该点击什么来选择远程文件并放弃本地？**

![在此处输入图像描述](../Images/e041ff47c02f19da20746e406e5c8161.png)

![在此处输入图像描述](../Images/54f5c23ac4e275e221c7da7ddbb16e0b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:17:34.177

只需右键单击文件并选择 Revert.. 因为您要放弃更改。

但是，一般来说，如果您关心您的更改，则不建议未提交的工作区更新。而是先提交您的更改，然后在拉取后重新设置或合并。

*   Revert - 这将删除未提交的更改。它使文件内容与最新提交中的内容相同
*   更新 - 这会将工作目录移向当前分支上的最新拓扑头。
*   Rebase - 这会将已提交的变更集从最初提交的位置移动，使其基于目标变更集。如果有疑问，请使用合并而不是变基，因为变基是一种高级操作。

未提交的工作区更新的问题在于，如果存在冲突，则没有简单的方法可以恢复到以前的状态。如果与合并或变基存在冲突并且您现在不想解决它们，您可以按 Mercurial Merge 视图中的 Abort 按钮，它将恢复到以前的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:38:56.223

在 Eclipse 中我可以做到

*   在包资源管理器中右键单击文件
*   用。。。来代替
*   另一个变更集
*   从远程存储库中选择最新的变更集

# linux - 在 FC 15 中找不到 apache 目录

> ID：13948861
> 
> 赞同：-1
> 
> 时间：2012-12-19T09:09:18.047
> 
> 标签：linux, apache, path, fedora, directory-structure

我正在`phpmyadmin`从教程[http://www.linux-noob.com/forums/index.php?/topic/612-how-to-installconfigure-phpmyadmin/](http://www.linux-noob.com/forums/index.php?/topic/612-how-to-installconfigure-phpmyadmin/)安装。现在我找不到 apache 目录（这样我就可以将我`phpMyAdmin-3.5.4-all-languages`的 from复制`Downloads`到`apache/htdocs`。我试过`apachectl -V`它说`-D HTTPD_ROOT="/etc/httpd"`。我也搜索`/etc/httpd/` `/usr/local/apache` `/etc/apache` `/etc/apache2`但找不到`apache`目录。请帮助，我是 Linux 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:21:36.790

在 linux 上，apache 文档目录的默认位置在**/var/www**内。这是您可以放置​​网站目录和文件以及 phpmyadmin 文件夹的目录。因此，如果您将 phpmyadmin 文件夹放置在此目录中，名称为**“phpmyadmin”**，则可以使用 url **“localhost/phpmyadmin”访问**

在 Mac 上，此目录位置默认为**/Library/WebServer/Documents**

希望这对您有所帮助。

# android - 淡出动画 - 不是恒定的行为 Android

> ID：13948863
> 
> 赞同：0
> 
> 时间：2012-12-19T09:09:25.553
> 
> 标签：android, animation, fade

每次单击按钮时，我都想制作一个淡入淡出动画。我开始只检查淡出，在第一次点击时，淡出似乎工作得很好。但是当我再次单击时，动画会从上到下淡出，使它看起来很糟糕并且被剪掉了。

动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<alpha android:fromAlpha="1.0"
       android:toAlpha="0.0"
       android:interpolator="@android:anim/accelerate_interpolator"
   android:duration="1000" />
</set> 
```

编码：

```
Animation fadeOut = AnimationUtils.loadAnimation(myActivity.this, R.anim.fade_out);
LinearLayout myBackground=(LinearLayout)findViewById(R.id.myBackground);
myBackground.setAnimation(fadeOut); 
```

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-01T15:55:24.107

**在以下文件夹中制作动画 ris->anim->fade_anim.xml** 添加下面的 xml

```
 <alpha
    android:duration="2000"
    android:fromAlpha="1"
    android:toAlpha="0.0"
    android:repeatCount="infinite"/> 
```

**去java课**

```
//make animation object
final Animation myAnim = AnimationUtils.loadAnimation(getContext(),    R.anim.bounce_anim);
    myAnim.setRepeatMode(Animation.INFINITE);

//get View on which on you want to apply animation I am applying on imageView
mLayout.findViewById(R.id.imageView).startAnimation(myAnim); 
```

# c++ - 带有可变参数模板类的 SFINAE？

> ID：13948864
> 
> 赞同：8
> 
> 时间：2012-12-19T09:09:25.957
> 
> 标签：c++, variadic-templates, sfinae

我似乎找不到将 SFINAE 与可变参数模板类一起使用的好的解决方案。

假设我有一个不喜欢引用的可变参数模板对象：

```
template<typename... Args>
class NoRef
{
    //if any of Args... is a reference, this class will break
    //for example:
    std::tuple<std::unique_ptr<Args>...> uptrs;
}; 
```

还有一个可以方便地检查参数包是否包含引用的类：

```
template<typename T, typename... Other>
struct RefCheck
{
    static const bool value = std::is_reference<T>::value || RefCheck<Other...>::value;
};
template<typename T>
struct RefCheck<T>
{
    static const bool value = std::is_reference<T>::value;
}; 
```

对于 arg 包中存在引用的情况，我如何使用它来专门化 NoRef？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T09:18:37.623

这不使用 SFINAE，但本质上是你想要的：

```
template<bool Ref, typename... Args>
class NoRef_;

template<typename... Args>
class NoRef_<false, Args...>
{
    std::tuple<std::unique_ptr<Args>...> uptrs;
};
template<typename... Args>
class NoRef_<true, Args...>
{
    // contains reference
};

template<typename... Args>
using NoRef = NoRef_<RefCheck<Args...>::value, Args...>;

// alternative from Nawaz

template<typename... Args> struct NoRef : NoRef_<RefCheck<Args...>::value, Args...> {} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T09:18:08.877

恐怕这是不可能的，因为模板包很笨拙。但是，您可以打包。

```
// Used to transport a full pack in a single template argument
template <typename... Args> struct Pack {}; 
```

我们调整参考检查：

```
template <typename T, typename... Other>
struct RefCheck
{
    static const bool value = std::is_reference<T>::value
                           || RefCheck<Other...>::value;
};

template <typename T>
struct RefCheck<T>
{
    static const bool value = std::is_reference<T>::value;
};

template <typename... Args>
struct RefCheck<Pack<Args...>>: RefCheck<Args...> {}; 
```

现在我们可以使用`Pack`：

```
template <typename P, bool = RefCheck<P>::value> class NoRef;

template <typename... Args>
class NoRef<Pack<Args...>, false> {
    // no reference in Args... here
}; 
```

# liferay - 覆盖 liferay 中现有的 service.xml

> ID：13948883
> 
> 赞同：1
> 
> 时间：2012-12-19T09:10:30.940
> 
> 标签：liferay

我需要在 liferay 中的现有表中添加一列。
我认为覆盖`service.xml`是向现有表添加列的方法。所需`service.xml`的存在于`portal-impl\src\com\liferay\portal`.
现在我想知道在哪里覆盖这个文件（我使用的是 tomcat 和`postgreSQL`）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:15:25.243

最好不要对 Liferay 的表执行此操作——想象一下如果 Liferay 的下一个版本添加相同的列，但具有不同的语义会发生什么。

此外，不鼓励直接更改源代码 - 而是使用像钩子这样的插件（或者，可能但不推荐，除非绝对必要，ext）。请注意，在 ext 中不推荐使用 servicebuilder 更改，并且将来不会支持，因此您会遇到无法直接添加到 Liferay 表的钩子。

实现附加字段的推荐方法是使用自定义字段（API-name `Expando*`）或使用新服务（来自钩子或 portlet）创建新实体，并将这些与外键链接到 Liferay 实体。

我知道，这并不能回答你如何做到这一点的问题，但它提供了你应该如何思考来解决你没有提到的潜在问题的替代方案。

# mysql - 无法使用ip地址连接mysql

> ID：13948885
> 
> 赞同：0
> 
> 时间：2012-12-19T09:10:36.137
> 
> 标签：mysql, sql

我尝试使用主机地址作为我的 IP 地址 203.199.209.** 连接我的数据库，但无法连接数据库。如果我尝试使用主机地址作为 localhost 连接我的数据库，它连接成功。如何解决这个问题？

![在此处输入图像描述](../Images/fd5687b7ef9761c36419c41cf3e9180c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:34:53.050

MySQL 根据您连接的主机授予访问权限。

运行此命令`root`：

```
SELECT user, host FROM mysql.user; 
```

这些是您服务器上存在的用户。注意`host`列。

简而言之，用户被定义为用户名 ( `user`)**和**连接点 ( `host`)。当您以 身份访问服务器时`localhost`，实际上是以 身份登录`some_user@localhost`。另一方面，当您通过其 IP 地址访问服务器时，您实际上是以`some_user@your.ip.address.here`. 我猜后者在您的服务器上不存在。

您可能想要创建一个新用户，例如`some_user@your.ip.address.here`or `some_user@%`（百分号是通配符；这里的意思是“任何主机”）：

```
CREATE USER 'some_user'@'your.ip.address.here' IDENTIFIED BY 'your_password';
GRANT ALL ON your_database.* to 'some_user'@'your.ip.address.here'; 
```

如果您想进一步了解，请参阅[此手册页](http://dev.mysql.com/doc/refman//5.5/en/connection-access.html)以获取有关 MySQL 访问控制的更多详细信息，以及[此页面](http://dev.mysql.com/doc/refman/5.5/en/create-user.html)以了解`CREATE USER`语法。

[编辑]

显然，正如其他人所建议的，您首先需要确保您的服务器侦听此 IP 地址（203.199.209.**）。但如果不是这种情况，您应该会收到以下错误：

> 错误 2003 (HY000)：无法连接到“203.199.209.**”上的 MySQL 服务器 (111)

您收到的错误肯定表明存在权限问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T07:09:42.393

对于 mysql-5.7.15-winx64（Windows 版本），以“root”用户身份登录并在 MYSQL 中运行以下查询：

```
CREATE USER 'user'@'localhost' IDENTIFIED BY 'pass';

GRANT ALL PRIVILEGES ON *.* TO 'user'@'localhost' WITH GRANT OPTION;

CREATE USER 'user'@'%' IDENTIFIED BY 'pass';

GRANT ALL PRIVILEGES ON *.* TO 'user'@'%' WITH GRANT OPTION;

FLUSH PRIVILEGES; 
```

然后重新启动您的 MYSQL DB。

对于此版本的 MYSQL DB，无需更改与“bin”文件夹位于同一位置的“my-default.ini”。

# android - Android mkdirs() 创建一个零字节文件而不是文件夹

> ID：13948890
> 
> 赞同：7
> 
> 时间：2012-12-19T09:10:56.543
> 
> 标签：android, apache-felix, mkdirs

在我的 android 应用程序中，我试图在 sdcard 上创建以下文件夹：

```
/mnt/sdcard/OSGiComponents/admin/felix-cache/ 
```

这是代码：

```
File cacheDir = 
    new File( Environment.getExternalStorageDirectory().getAbsolutePath() + 
              "/OSGiComponents/admin/felix-cache/" );
// Create the folder
cacheDir.mkdirs();
// Check if it exists
if ( ! cacheDir.exists() ) {
    Log.e ( "Debug" , "Cache directory cannot be created" );
} 
```

我在 android 清单文件的清单标记下有 WRITE_STORAGE_PERMISSION。我可以在 sdcard 上创建其他文件夹和文件而不会出现问题。该应用程序在以下手机上运行良好：

1.  运行 Gingerbread (2.3) 的 Nexus S (rooted)
2.  运行 Jelly Bean (4.1.2) 的 Nexus S（无根）
3.  HTC Desire (rooted) 运行 Froyo (2.2)
4.  运行 Froyo (2.2) 的 HTC Desire (unrooted)

然而，在运行 Ice Cream Sandwich (4.0.4) 的三星 Galaxy Nexus 手机（无根）上，该目录被创建为一个零大小的文件，可以在 Astro 中看到。exists() 调用返回 false。

![Astro 显示一个零字节的 felix-cache 文件](../Images/165665b19872b252c014dceaa3877a41.png)

1.  从文件夹名称可以看出，我使用的是 Apache Felix。如果缓存目录不存在，Felix 会自动创建它。在 Galaxy Nexus 上，它总是抱怨无法创建缓存目录。Astro 显示的是 0 字节文件而不是文件夹。这就是为什么我决定在初始化 Felix 之前自己尝试创建缓存文件夹的原因。
2.  所以，我自己创建了缓存文件夹。该应用程序第一次运行良好，我可以在 Astro 中看到该文件夹​​。如果我关闭应用程序，然后删除Astro中的文件夹，然后重新启动应用程序，即使我的代码也神秘地无法创建缓存目录，Astro显示一个0字节的文件。
3.  在 Astro 中无法删除 0 字节文件。但是，当我重新启动手机时，该文件夹神奇地存在并且正常。
4.  我使用 FileInstall 来观察 OSGiComponents/install 文件夹。当我将捆绑 jar 放入该文件夹时，除了 Galaxy Nexus （当应用程序第一次运行时）之外的所有手机上都可以检测到并安装它。FileInstall 没有关于无法查看目录的日志/错误。
5.  我已经在 2 部 Galaxy Nexus 手机上进行了测试，同样的问题。

我怀疑这是一个权限问题，但我不确定它是什么，以及为什么在 exists() 返回 false 时创建了一个 0 字节文件。我在代码中没有其他地方创建此文件。

关于可能是什么问题的任何建议？

谢谢 ：）

更新：我想我已经确定了问题，请参阅我发布的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:56:48.450

我找到了解决此问题的解决方法。每当我删除文件/目录时，我不是直接使用 delete()，而是重命名文件/文件夹，然后 delete() 它。这种奇怪的解决方法似乎可以解决问题。

我通过看到这个问题的答案得到了这个想法 -[打开失败的 EBUSY 设备或资源繁忙](https://stackoverflow.com/questions/11539657/open-failed-ebusy-device-or-resource-busy)

但是，我不确定为什么会这样，或者首先是什么导致了问题。

如果其他人在 Galaxy Nexus 上使用 Felix 并遇到同样的问题，只需更改 Felix 源代码，如下所示：

*org.apache.felix.framework.util.SecureAction.java：*

```
public boolean deleteFile(File target)
{
    if (System.getSecurityManager() != null)
    {
        try
        {
            Actions actions = (Actions) m_actions.get();
            actions.set(Actions.DELETE_FILE_ACTION, target);
            return ((Boolean) AccessController.doPrivileged(actions, m_acc))
                .booleanValue();
        }
        catch (PrivilegedActionException ex)
        {
            throw (RuntimeException) ex.getException();
        }
    }
    else
    {
        // Solution: Rename before deleting
        // https://stackoverflow.com/questions/11539657/open-failed-ebusy-device-or-resource-busy

        File to = new File(target.getAbsolutePath() + System.currentTimeMillis());
        boolean renameStatus = target.renameTo(to);
        boolean deleteStatus = to.delete();
        boolean returnStatus = ( renameStatus && deleteStatus );

        // Debug SecureAction
        //boolean returnStatus = target.delete();
        Log.e ( "SecureAction" , "Deleting " + target + " delete(): " + returnStatus );
        return returnStatus;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:15:47.913

请使用代替

```
 File cacheDir = new File( Environment.getExternalStorageDirectory().getAbsolutePath() + 
          "/OSGiComponents/admin/felix-cache/" );
      cacheDir.mkdirs(); 
```

至

```
 File cacheDir = 
new File( Environment.getExternalStorageDirectory().getAbsolutePath() + 
          "/OSGiComponents/admin/felix-cache" );
     cacheDir.mkdir(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:27:23.237

我建议您使用`adb`并使用目录中的命令连接到设备`ls -l`，以检查操作系统对此报告的内容`0 size file`（权限等）。这最终可以为这个问题带来一些启示。

如果您无法找到可行的解决方案，也许您可​​以使用直接`exec()`执行 a来创建一个工作区`mkdir`。

您可以使用下面的 cobe 来做到这一点：

```
public static boolean execCmd(String command, ArrayList<String> results){
    Process process;
    try {
        process = Runtime.getRuntime().exec(new String [] {"sh", "-c", command});
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    } 

    int result;
    try {
        result = process.waitFor();
    } catch (InterruptedException e1) {
        e1.printStackTrace();
        return false;
    }

    if(result != 0){ //error executing command
        Log.d("execCmd", "result code : " + result);
        String line; 
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getErrorStream())); 
        try {
            while ((line = bufferedReader.readLine()) != null){
                if(results != null) results.add(line);
                Log.d("execCmd", "Error: " + line);
            }
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
        return false;
    }

    //Command execution is OK
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream())); 

    String line; 
    try {
        while ((line = bufferedReader.readLine()) != null){
            if(results != null) results.add(line);
            Log.d("execCmd", line);
        }
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
    return true;
} 
```

要使用它：

```
boolean res= execCmd("mkdir "+ Environment.getExternalStorageDirectory().getAbsolutePath() + "/OSGiComponents", results);
if(!res) return error;   

res= execCmd("mkdir "+ Environment.getExternalStorageDirectory().getAbsolutePath() + "/OSGiComponents/admin", results);
if(!res) return error;   

res= execCmd("mkdir "+ Environment.getExternalStorageDirectory().getAbsolutePath() + "/OSGiComponents/admin/felix-cache", results);
if(!res) return error; 
```

问候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T13:25:01.493

```
String root = Environment.getExternalStorageDirectory()
            .getAbsolutePath()+"/OSGiComponents/admin/felix-cache";
    File myDir = new File(root);

    String fname = "Image Name as you want";
    File file = new File(myDir, fname);
    if (file.exists())
        file.delete();
    try {
        FileOutputStream out = new FileOutputStream(file);
        bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
        out.flush();
        out.close();

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:47:40.240

虽然不能直接回答您的问题，但以下信息可能对您有所帮助：

在某些设备中，`Environment.getExternalStorageDirectory().getAbsolutePath()`不一定反映实际的外部 sd 卡路径。有时它代表内部存储。

例如在 Galaxy Note 2 中：

```
Log.i(TAG,Environment.getExternalStorageDirectory().getAbsolutePath()); 
```

将打印

> 12-19 17:35:11.366: E/sample.Examples(10420): /storage/sdcard0

同时实际​​的外部sd卡应该是：

> /存储/extSdCard

以下是有关此问题的几篇文章，可能会对您有所帮助：

[构建一个实用程序以每次获取外部可移动存储的路径](https://stackoverflow.com/questions/10629523/building-a-utility-to-get-the-path-to-external-removable-storage-every-time)

[检查 SDCard 是否存在，布尔值始终为真](https://stackoverflow.com/questions/12087510/check-if-the-sdcard-is-present-boolean-is-always-true)

[我怎样才能在三星和所有其他设备上获得正确的外部存储？](https://stackoverflow.com/questions/5524105/how-could-i-get-the-correct-external-storage-on-samsung-and-all-other-devices)

[Android 如何使用 Environment.getExternalStorageDirectory()](https://stackoverflow.com/questions/5453708/android-how-to-use-environment-getexternalstoragedirectory)

# php - 简单 sendmail 代码上的 php 语法错误

> ID：13948893
> 
> 赞同：-6
> 
> 时间：2012-12-19T09:11:13.280
> 
> 标签：php, syntax, sendmail

所以dreamweaver 告诉我我在第5、8、10 和12 行有语法错误。但我不明白为什么？

```
<?php
if(isset($_POST['submit'])) (
    $msg = 'Name: ' .$_POST['FirstName'] .$_POST['LastName'] ."\n" 
    .'Email: ' .$_POST['Email'] ."\n" 
    .'Message: ' .$_POST['Message'];
    mail('email@me.com', 'Message from website', $msg);
    header('location: contact-thank-you.php');
)
else (
header('location: contact.php');
exit(0);
)
)       
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T09:13:23.437

利用：

```
if () {
  ....
} else {
  ....
}

other than

if () (
  ....
) else (
  ....
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:13:32.627

将代码更改为

```
if(isset($_POST['submit'])) {
    $msg = 'Name: ' .$_POST['FirstName'] .$_POST['LastName'] ."\n" 
    .'Email: ' .$_POST['Email'] ."\n" 
    .'Message: ' .$_POST['Message'];
    mail('email@me.com', 'Message from website', $msg);
    header('location: contact-thank-you.php');
}
else {
header('location: contact.php');
exit(0);
} 
```

你需要有`{`and`}`而不是`(`&`)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:30:03.983

检查名字和姓氏之间的连接字符串。我想错误存在于字符串连接中。尝试做 "Name:" 。$_POST['名字'] 。" " .$_POST['lasname'] 。"\n" .... 您已经用两个不同的引号形成了字符串，以便在您使用单引号的地方形成一个字符串，并且您正在使用双引号尝试清理它。始终使用一致的引号，并且将双引号用于字符串连接始终是一个好主意。它实际上提高了代码的可读性。

希望这可以帮助

# iphone - iPad 和 iPhone 中的 UITextField 键盘类型

> ID：13948896
> 
> 赞同：2
> 
> 时间：2012-12-19T09:11:33.537
> 
> 标签：iphone, ios, ipad, cocoa-touch, uikeyboardtype

键盘类型：`UIKeyboardTypeNumberPad`iPad 中的键盘类型与 iPhone 不同，我只想在 iPad 中使用 iPhone 类型，不知道如何制作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:35:40.420

iPad 没有单独的数字键盘。如果你在 iPad 上设置它，键盘就会出现，它会被设置为“数字和符号”模式。如果您想要一个类似于 iPhone 上的数字键盘，您应该为 iPad 创建一个自定义键盘。

# windows - 无法打开 VB 项目，出现错误“C:\windows\system32\mscomctl.ocx”无法加载

> ID：13948897
> 
> 赞同：1
> 
> 时间：2012-12-19T09:11:36.733
> 
> 标签：windows, vb6

我有一个 VB 项目能够正常工作，但现在当我打开项目时，我收到 mscomctl.ocx 的错误。我已经重新注册了 ocx，但仍然无法加载项目。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T15:39:32.840

当我在 Windows 7 64 位环境中打开项目时遇到了这个问题，它在 win XP 机器上正常工作。我之前在项目文件中做了一个非常简单的更改，它说

```
Object={831FDD16-0C5C-11D2-A9FC-0000F8754DA1}#2.1#0; MSCOMCTL.OCX 
```

我改成`2.1`是`2.0`因为我在许多论坛上都看到过它，而且它很有魅力。`VBP`文件中更新的参考是

```
Object={831FDD16-0C5C-11D2-A9FC-0000F8754DA1}#2.0#0; MSCOMCTL.OCX 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:32:10.433

在我看来，您的项目已经失去了对 ocx 的引用（虽然它仍然尝试使用一些控件）

在 ide 的“项目”菜单中单击“组件”

在列表中确保选中“microsoft windows common controls 6.0 (sp6)”...如果已经选中，请尝试删除它，关闭（并保存）项目，打开项目，然后再次打开它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-25T01:12:02.047

当我的 Windows 7 32 位笔记本电脑崩溃并且公司用 64 位机器替换它时，我遇到了类似的问题......首先我尝试使用 regsvr32 注册 .ocx - 在 32 位机器上它会不时被卸载。 ..这在翻新的64位机器上根本不起作用...

我尝试更改 .vbp 文件设置，如之前的一些响应中所述，但没有成功...我将 .vbp 设置回 2.0，后来在另一个问题上，我正在搜索注册表并决定搜索 mscomctl.ocx 并找到 3键 - 2.0、2.1 和 2.2...因为它不起作用，我决定删除 2.1 和 2.2 键，瞧！控件加载没有问题。显然 .vbp 和注册表必须匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T14:56:14.643

我有同样的问题。user1272267 回答有效（谢谢），但令我困扰的是我不明白为什么，我也不确定我是否最终会为我的同事打破这个项目，因为它工作得很好。

所以我做了更多的挖掘，发现在注册表中有一个键；reg hkcr\typelib{831FDD16-0C5C-11D2-A9FC-0000F8754DA1}\2.0（注意2.0）

我将 2.0 更改为 2.1，嘿，一切正常。我还检查了 DLL，结果发现我的副本比我同事的副本旧。我认为这可能是因为当我安装 Service Pack 6 时，我保留了一些原始文件，因为替换文件是针对美式英语的，而我有英国版，但我不能 100% 确定这一点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T20:20:55.497

我有同样的错误。这两件事对我有用：

*   通过右键单击以管理员身份运行来启动 Visual Studio 6

或者

*   禁用 UAC 提示。

希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T06:39:21.947

您还可以在记事本中打开项目文件（.vbp 文件），您会看到如下内容：

```
Type=Exe
Form=frmComFX.frm
Reference=*\G{00020430-0000-0000-C000-000000000046}#2.0#0#C:\Windows\SysWOW64\stdole2.tlb#OLE Automation
Object={648A5603-2C6E-101B-82B6-000000000014}#1.1#0; MSCOMM32.OCX
Object={5E9E78A0-531B-11CF-91F6-C2863C385E30}#1.0#0; MSFLXGRD.OCX
Object={831FDD16-0C5C-11D2-A9FC-0000F8754DA1}#2.0#0; MSCOMCTL.OCX
Form=frmSetup.frm
Module=modFX; modFX.bas
IconForm="frmComFX"
Startup="frmComFX"
HelpFile=""
Title="ComFX"
Command32=""
Name="comFX" 
```

以 'object-' 开头的行包含注册 ocx 的注册表项...您现在可以打开 regedit（开始 - 执行 - regedit）并搜索此键.. 请注意您在 regedit 中所做的事情，你可能会搞砸你的 Visual Basic 安装，甚至你的整个 Windows :)

当然，您也可以删除 Visual Basic 并重新安装它以恢复注册

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T09:25:51.180

尝试重新注册`MSCOMCTL.OCX`：

1.  下载文件：[http ://www.ocxdump.com/ocxfiles/M/MSCOMCTL.OCX](http://www.ocxdump.com/ocxfiles/M/MSCOMCTL.OCX)
2.  将其复制到位置`c:\windows\system32\`
3.  打开命令提示符并运行：

    ```
    cd c:\windows\system32
    regsvr32 MSCOMCTL.OCX 
    ```

比尝试再次运行您的应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-23T20:43:12.487

视窗 7 64 位；刚刚安装了 VS6 和 VS6 SP6（有困难）但是我的 Win XP 项目给出了“无法加载 MSCOMCTL.OCX”错误。

我发现 Nathan Hadley 的回答给了我线索并允许我打开项目......我的项目的 userinterface.vbp 文件（从 Win XP 复制）在 MSCOMCTL.OCX 参考旁边有 #2.2，但我的注册表类 id 有只有2.1。所以我将我的 userinterface.vbp 条目更改为 2.1，项目打开正常。

但是第二天我再次运行了 VB6 SP6 累积更新 VB60SP6-KB2708437-x86-ENU（可能第一次没有正确安装），现在我在注册表中有 2.2 版。所以我改回了我的 userInterface.vbp 文件，所以 OCX 引用再次具有#2.2，现在项目仍然正确打开并且一切运行正常。

# extjs - 如何将工具栏中的元素向左、中、右对齐

> ID：13948902
> 
> 赞同：14
> 
> 时间：2012-12-19T09:11:55.260
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

如何在工具栏内拥有左、中、右三个区域？我知道我可以`->`用来触发所有以下项目的右对齐容器，但是中心呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T09:16:35.127

你可以用一个技巧来存档：

```
Ext.create('Ext.panel.Panel', {
     title: 'Toolbar Fill Example',
     width: 300,
     height: 200,
     tbar : [
         'Item 1',
         { xtype: 'tbfill' },
         'Item 4',
         { xtype: 'tbfill' },
         'Item 2'
     ],
     renderTo: Ext.getBody()
 }); 
```

**[JSFiddle](http://jsfiddle.net/sran/czrt6/11/)**

注意：

```
[
    'Item 1',
    '->',
    'Item 4',
    '->',
    'Item 2'
] 
```

工作都一样。

**它是如何工作的**

`->`或者它的 xtype`tbfill`只不过是一个带有`flex: 1`配置的空组件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T13:26:02.840

```
Ext.create('Ext.panel.Panel', {
     title: 'Toolbar Fill Example',
     width: 300,
     height: 200,
     tbarCfg:{
          buttonAlign:'center'  //for center align
         // buttonAlign:'left' //for left align
         // buttonAlign:'right' //for right align
     },
     tbar : [
         'Item 1',
         { xtype: 'tbfill' },
         'Item 4',
         { xtype: 'tbfill' },
         'Item 2'
     ],
     renderTo: Ext.getBody()
 }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-20T11:32:26.640

```
For Right:    
bbar: ['->',{
                    xtype: 'button',
                    text: 'xyz',

                }]

For Left:    
bbar: ['<-',{
                    xtype: 'button',
                    text: 'xyz',

                }] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T09:26:38.860

dockedItems: [{ xtype: 'toolbar', buttonAlign:'center', dock: 'top', items: [{ text: '停靠到顶部' }] }]

# java - 从 InputStream 读取时如何避免编码 null (\u0000)

> ID：13948903
> 
> 赞同：6
> 
> 时间：2012-12-19T09:11:55.230
> 
> 标签：java, string, inputstream, decode

我正在阅读请求正文并将其放入输入流中。虽然我明确地说了解码方法，但字符串后面仍然有很多 \u0000 (Null)。

```
InputStream is = exchange.getRequestBody();
byte[] header = new byte[100];
is.read(header);
String s = new String(header, "UTF-8"); 
```

如何使用标准 Java 库避免这种情况？我不能使用第三方库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:22:04.380

is.read(header); 返回实际读取的字节数。将您的代码更改为

```
byte[] header = new byte[100];
int n = is.read(header);
String s = new String(header, 0, n, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:17:28.893

尝试`BufferedReader`使用`InputStreamReader`. IE

```
InputStreamReader isr = new InputStreamReader(is, "UTF-8");
BufferedReader br = new BufferedReader(isr);
String line = br.readLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:18:02.290

使用缓冲阅读器逐行读取：

```
InputStream is = exchange.getRequestBody();
BufferedReader reader = new BufferedReader(new InputStreamReader(is))
String line;
while((line = reader.readLine()) != null)
{
    // do work
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-22T21:28:38.833

如果您查看 的值`line.toCharArray()`，您会看到`null`(aka `'\u0000'`) 字符出现。摆脱这些的一个迂回解决方案是通过使用 if 语句排除`'\u0000'`字符来仅将您想要的字符添加到另一个数组中。所以：

```
public String removeNullChars(String line) {
    String result = "";

    // Convert to char array.
    char[] chars = line.toCharArray();

    // Add only chars that are not equal to '\u0000' to result
    for (int i = 0; i < chars.length; i++) {
        if (chars[i] != '\u0000') {
            result += chars[i];
        }
    }

    return result;
} 
```

# javascript - 云代工厂中的 vmc 推送超时？

> ID：13948905
> 
> 赞同：0
> 
> 时间：2012-12-19T09:11:58.070
> 
> 标签：javascript, node.js, asynchronous, cloud-foundry

`vmc push`对**cloudfoundry.com**进行操作时是否有超时设置？我有一个*node.js 应用程序*，它可能有一堆可能需要一段时间的链接异步函数。如果我减少计算次数，它会起作用。但如果时间太长，它说`Application failed to start`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:33:46.263

如果您发现上传到 CloudFoundry.com 时遇到超时，只需再次运行推送，服务器应该会从发生超时的位置恢复。

# ruby - Ruby：作为数组元素的方法——它们是如何工作的？

> ID：13948910
> 
> 赞同：16
> 
> 时间：2012-12-19T09:12:22.610
> 
> 标签：ruby

这可能不是您应该在家尝试的东西，但出于某种原因，我尝试在 Ruby 中创建一组方法。

我首先定义了两种方法。

```
irb(main):001:0> def test1
irb(main):002:1>   puts "test!"
irb(main):003:1> end
=> nil
irb(main):004:0> def test2
irb(main):005:1>   puts "test2!"
irb(main):006:1> end
=> nil 
```

当您尝试将其放入实际数组时，会发生奇怪的事情。它似乎运行这两种方法。

```
irb(main):007:0> array = [test1, test2]
test!
test2!
=> [nil, nil] 
```

之后，数组为空。

```
irb(main):008:0> puts array

=> nil 
```

有人可以向我解释为什么它运行这些方法吗？除此之外，整个练习真的需要驱魔人吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T10:11:12.807

您存储在数组中的是调用方法的结果，而不是方法本身。

```
def test1
  puts "foo!"
end

def test2
  puts "bar!"
end 
```

您可以像这样存储对实际方法的引用：

```
> arr = [method(:test1), method(:test2)]
# => [#<Method: Object#test1>, #<Method: Object#test2>] 
```

稍后，您可以像这样调用引用的方法：

```
> arr.each {|m| m.call }
foo!
bar! 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-19T10:21:29.147

@alestanis 很好地解释了原因。如果您尝试存储方法，那么您可以按照 Lars Haugseth 所说的进行，或者您可以执行以下操作：

```
test1 = Proc.new { puts "test!" }
test2 = Proc.new { puts "test2!" }
a = [test1, test2] 
```

这可能会使您的代码更具可读性。

这是一个irb运行。

```
1.9.3p194 :009 > test1 = Proc.new { puts "test!" }
 => #<Proc:0x00000002798a90@(irb):9> 
1.9.3p194 :010 > test2 = Proc.new { puts "test2!" }
 => #<Proc:0x00000002792988@(irb):10> 
1.9.3p194 :011 > a = [test1, test2]
 => [#<Proc:0x00000002798a90@(irb):9>, #<Proc:0x00000002792988@(irb):10>] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:16:16.217

如果你有一个`square`方法并且想要创建一个平方值为 2 和 4 的数组，你会写

```
array = [square(2), square(4)] 
```

在这里，您正在做完全相同的事情，只是您的测试方法不返回任何内容，这就是为什么您的 final`array`看起来是空的（实际上，它包含`[nil, nil]`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:16:54.557

您的数组只包含两个 nil 值。我在评估时通过放置字符串来欺骗你。但是每个函数的返回值仍然是 nil。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T09:17:48.890

您的代码运行这两种方法，因为当您说“test1”和“test2”时，您实际上是在调用这些方法——括号对于 ruby​​ 方法调用是可选的。

由于您的两个方法都只包含一个返回 nil 的“puts”，因此您的结果数组只是一个包含两个 nil 的数组。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-28T22:53:10.747

这是我的两便士的价值。在已经发布的解决方案的基础上，这是一个工作示例。对某些人来说可能很方便的是它包括方法参数和使用`self`（在实例化时指的是 PromotionalRules 类的实例）和符号数组，这很整洁 - 我从 Ruby docs on #send 方法[在这里](http://ruby-doc.org/core-2.2.3/Object.html#method-i-send)。希望这对某人有帮助！

```
class PromotionalRules
  PROMOTIONS = [:lavender_heart_promotion, :ten_percent_discount]

  def apply_promotions total, basket
    @total = total

    if PROMOTIONS.count > 0
      PROMOTIONS.each { |promotion| @total = self.send promotion, @total, basket }
    end

    @total.round(2)
  end

  def lavender_heart_promotion total, basket
    if two_or_more_lavender_hearts? basket
      basket.map { |item| total -= 0.75 if item == 001 }
    end
    total
  end

  def two_or_more_lavender_hearts? basket
    n = 0
    basket.each do |item|
      n += 1 if item == 001
    end
    n >= 2
  end

  def ten_percent_discount total, *arg
    if total > 60.00
      total = total - total/10
    end
    total
  end
end 
```

感谢大家的帮助。我喜欢编码的开源性质——随着人们迭代彼此的解决方案，线程会变得越来越好！

# algorithm - 返回不同最近邻向量的 n 个索引

> ID：13948911
> 
> 赞同：0
> 
> 时间：2012-12-19T09:12:28.693
> 
> 标签：algorithm, search, vector, nearest-neighbor

在一组 D 维向量中，最近邻算法可以有效地获取整个集合中每个向量的 n 个最近邻。

但是，在这样的集合中，如果有多个相同的向量，最近邻算法将首先返回相同的向量作为最近的向量。这是有道理的，因为相同的向量总是比不同的向量更接近。

但是有没有像最近邻搜索一样不考虑相同向量的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:50:26.657

我认为你不需要不同的算法来实现这一点。在运行标准算法之前从输入数据中删除重复项要简单得多。

# shared-libraries - 如何在 Automake 和使用 libtool 的项目中构建 *.so 模块？

> ID：13948916
> 
> 赞同：13
> 
> 时间：2012-12-19T09:12:57.593
> 
> 标签：shared-libraries, automake, libtool

[我和其他人](https://stackoverflow.com/questions/8916425/how-to-create-a-shared-library-so-in-an-automake-script)有同样的问题：

*   我在**Automake项目中有一个由****libtool**`*.la`生成的文件（例如），****`module.la`****
*****   但我**需要`*.so`**它来使用它`dlopen()`（例如`module.so`）。****

 ****但是：项目的配置和构建是`--disable-shared`为了确保创建的主二进制文件是一个大的静态链接程序，例如`main.x`（更易于部署和调试）。因此`*.so`不会创建文件。

该程序`main.x`是一个巨大的类似框架的应用程序，它能够加载扩展（模块）`dlopen()`——尽管它是静态链接的。

当我手工构建时，这很好`module.so`用。但`Makefile.am`对我来说，让它发挥作用似乎是不可能的。是的，我可以写`lib_LTLIBRARIES`，但按照我的标准，`--disable-shared`我没有得到`*.so`文件。

```
lib_LTLIBRARIES = module.la
module_so_SOURCES = module.cpp 
```

该文件`module.la`被创建，它`dlopen()`拒绝加载（当然）。

我试图将规则放入`Makefile.am`手动构建它并且有效：

```
# Makefile.am (yes, .am)
all: mm_cpp_logger.so

SUFFIXES = .so

%.so: %.cpp
    $(CXX) $(CXXFLAGS) -fPIC -fpic -c -I $(top_srcdir)/include -o $@  $<

%.so: %.o
    $(CXX) $(LDFLAGS) -shared -fPIC -fpic -o $@  $< 
```

但这只能是一种解决方法。我没有得到所有好的自动功能，比如依赖检查和安装。

我如何构建仍然以-方式（或具有相同效果）`module.so`构建主程序？`--disable-shared``Makefile.am`

*   我可以`*.la`将`*.so`文件后处理为具有特殊自动生成规则的文件吗？
*   在任何情况下我都可以调整`lib_LTLIBRARIES`创建文件的过程吗？`*.so`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T16:34:09.543

您要查找的内容称为*[模块](http://www.gnu.org/software/automake/manual/html_node/Libtool-Modules.html)*。`-all-static`您可以告诉 Autotools 通过添加到应用程序来创建静态二进制文件（可执行文件）`LDFLAGS`。我认为这是使用配置标志的首选方式`--disable-shared`（它实际上是针对库而不是可执行文件）

这样的事情应该可以解决问题：

```
AM_CPPFLAGS=-I$(top_srcdir)/include

lib_LTLIBRARIES = module.la
module_la_LDFLAGS = -module -avoid-version -shared
module_la_SOURCES = mm_cpp_logger.cpp

bin_PROGRAMS = application
application_LDFLAGS = -all-static
application_SOURCES = main.cpp 
```

该`.so`文件将（像往常一样）最终在`.libs/`子目录中（当然，除非您安装它）。

而且您可以一次构建您的应用程序和插件（即使只有一个`Makefile.am`），因此无需`configure`多次调用。

`-fPIC`Autotools 应该自动检测（和朋友）的使用。

* * *

***更新***：这里有一个小技巧，可以让共享库在您期望的地方可用。由于所有 shlib 都以 . 结尾`.libs/`，因此有时将它们放在非隐藏目录中会很好。

以下 makefile 片段创建便利链接（在支持符号链接的平台上；否则它们被复制）。只需将代码段添加到您的 makefile（我通常使用一个`-include convenience-link.mk`）就足够了（您可能需要`AC_PROG_LN_S`在您的 configure.ac 中）

```
.PHONY: convenience-link clean-convenience-link

convenience-link: $(lib_LTLIBRARIES)
    @for soname in `echo | $(EGREP) "^dlname=" $^ | $(SED) -e "s|^dlname='\(.*\)'|\1|"`; do  \
        echo "$$soname: creating convenience link from $(abs_builddir)/.libs to $(top_builddir)"; \
        rm -f $(top_builddir)/$$soname ; \
        test -e $(abs_builddir)/.libs/$$soname && \
        cd $(top_builddir) && \
        $(LN_S) $(abs_builddir)/.libs/$$soname $$soname || true;\
    done 

clean-convenience-link:
    @for soname in `echo | $(EGREP) "^dlname=" $(lib_LTLIBRARIES) | $(SED) -e "s|^dlname='\(.*\)'|\1|"`; do  \
        echo "$$soname: cleaning convenience links"; \
        test -L $(top_builddir)/$$soname && rm -f $(top_builddir)/$$soname || true; \
    done 

all-local:: convenience-link

clean-local:: clean-convenience-link 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-14T21:14:19.540

**[我已经使用noinst_LTLIBRARIES](https://www.gnu.org/software/libtool/manual/html_node/Static-libraries.html)**宏解决了类似的问题。

**noinst_LTLIBRARIES**宏创建仅在内部使用的 静态、不可安装的库。**如果您指定--disable-static**配置选项，也会创建所有 noinst_LTLIBRARIES 静态库。

```
lib_LTLIBRARIES = libtokenclient.la
noinst_LTLIBRARIES = libtokenclient_static.la 

libtokenclient_la_SOURCES = $(TOKEN_SERVER_CLIENT_SOURCES) cDynlib.c cDynlib.h token_mod.h
libtokenclient_la_CFLAGS = @BASE_CFLAGS@
libtokenclient_la_CXXFLAGS = $(libtokenclient_la_CFLAGS)
libtokenclient_la_LIBADD = @B_BASE_OS_LIBS@
libtokenclient_la_LDFLAGS = @LT_PLUGIN_LIBS_FLAGS@ @LIBS_FLAGS@ $(TOKEN_SERVER_CLIENT_EXPORT_SYMBOLS)

libtokenclient_static_la_SOURCES = $(libtokenclient_la_SOURCES)
libtokenclient_static_la_CFLAGS = $(libtokenclient_la_CFLAGS)
libtokenclient_static_la_CXXFLAGS = $(libtokenclient_static_la_CFLAGS)

token_test_SOURCES = $(TEST_SOURCES)
token_test_LDADD = @B_BASE_OS_LIBS@ libtokenclient_static.la
token_test_CFLAGS = @BASE_CFLAGS@
token_test_CXXFLAGS = $(token_test_CFLAGS) 
```

我使用 noinst_LTLIBRARIES 静态库有两个原因：

1.  为了加快编译时间，我创建了静态库来用作代码的中间容器，这些代码应该被链接不止一次：代码只编译一次，否则 automake 将为每个目标编译一次相同的源文件
2.  将代码静态链接到某个可执行文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:51:51.143

根据[LT_INIT](http://www.gnu.org/software/libtool/manual/html_node/LT_005fINIT.html)的 libtool 文档，可以工作的一件事是将构建划分为两个包：主应用程序和插件。这样你就可以（理论上）调用：

```
./configure --enable-shared=plugins 
```

事情会按照你期望的方式进行。****

# spring - 可以用 Spring 创建 HashMap 但不能创建 Map

> ID：13948921
> 
> 赞同：25
> 
> 时间：2012-12-19T09:13:13.030
> 
> 标签：spring

我可以在我的 applicationContext 中使用 Spring (3.0.5) 执行此操作：

```
<bean id="map" class="java.util.HashMap" scope="prototype" >
    <constructor-arg>
        <map key-type="java.lang.String" value-type="java.lang.String">
            <entry key="Key 1" value="1" />
            <entry key="Key 2" value="2" />
        </map>
    </constructor-arg>
</bean> 
```

在我的控制器中，我可以像这样自动连接我的地图：

```
@Autowired
@Qualifier("map")
private HashMap<String, String> map; 
```

它工作正常，但如果我这样做：

```
@Autowired
@Qualifier("map")
private Map<String, String> map; 
```

我明白了：

> 原因：org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [java.lang.String] 的匹配 bean [值类型为 java.lang.String 的映射]：预计至少有 1 个符合自动装配候选资格的 bean对于这种依赖。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=map)}

我的问题是：为什么我不能用接口自动连接我的地图，而我可以用实现？

谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-19T09:26:08.587

在声明一个集合类型的 bean 时，不能通过 @Autowired 注入它。请参阅 Spring 的以下文档：

[4.11.3 使用限定符微调基于注释的自动装配](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s11.html#beans-autowired-annotation-qualifiers)

> 作为这种语义差异的特定结果，本身定义为集合或映射类型的 bean 不能通过 @Autowired 注入，因为类型匹配不适用于它们。对此类 bean 使用 @Resource，通过唯一名称引用特定的集合/映射 bean。

因此`@Autowired`，而不是使用`@Resource`：

```
@Resource
@Qualifier("map")
private Map<String, String> map; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-19T09:21:46.660

尝试使用`@Resource`而不是`@Autowired`

```
@Resource(name="map") 
private HashMap<String, String> map; 
```

查看[3.9.3 Fine-tuning annotation-based autowiring with qualifiers](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers) of Spring 文档中的提示

# java - 浏览服务器机器文件系统

> ID：13948924
> 
> 赞同：-4
> 
> 时间：2012-12-19T09:13:21.363
> 
> 标签：java, jsf, tomcat

我有 2 台机器一个服务器和一个客户端。所以从我的客户端主机我的应用程序的管理员应该在服务器上选择一个目录，所以我想从客户端主机浏览服务器文件系统。在服务器上选择一个目录后，我将在该目录中创建一个文件夹并使用它来运行命令行...

那么如何实现浏览服务器机器文件系统呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:45:34.093

由于安全限制，这不可能直接实现。
但是您可以通过编写一个包含文件系统信息的 bean 类来解决这些限制，以便特殊的自制 FileSelectDialog 可以通过 webfrontend 向用户显示这些信息。

在 Glassfish 管理 GUI 中，他们已经完成了类似的操作……在**Applications --> Deploy**下，您可以通过特殊的文件选择对话框从本地文件系统或服务器文件系统中选择文件。

另一种方法记录[在这里](https://stackoverflow.com/questions/6984777/how-to-browse-the-file-system-of-a-server-machine-when-connecting-with-a-client)

# ruby-on-rails - 验证自定义词

> ID：13948929
> 
> 赞同：2
> 
> 时间：2012-12-19T09:13:40.333
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的表单中有一个字段，它不应该接受一些特定的词（www、ftp、smtp 等）。是否有任何验证器可以制作某种无法写入数据库的黑名单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:27:29.653

```
validates :subdomain, :exclusion => { :in => %w(www ftp smtp) } 
```

参考：[导轨指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html#exclusion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:28:35.133

您应该创建自己的黑名单验证器。语法可以是

```
validates :field, :black_list => {:file_path => "/path/to/words_file"} 
```

`/path/to/words_file`如果属性`field`包含一个列入黑名单的单词，您的验证器将查看文件中的每个单词并在您的模型上添加错误。

# coldfusion - 请帮助我在coldfusion中使用cflog

> ID：13948932
> 
> 赞同：1
> 
> 时间：2012-12-19T09:13:57.917
> 
> 标签：coldfusion

> **可能重复：**
> [创建包含文件日志coldfusion](https://stackoverflow.com/questions/13946934/create-contain-file-log-coldfusion)

我想创建文件来记录文件内容。我试了，但它告诉我错误。

这个错误

`在第 110 列的第 213 行发现无效的 CFML 构造。ColdFusion 正在查看以下文本：

''

CFML 编译器正在处理：

从第 213 行第 2 列开始的 cffile 标记。

我的文件代码在这里[http://pastebin.com/BEMgLVTw](http://pastebin.com/BEMgLVTw)？此行中的主要错误

`<cffile action="WRITE" file="#expandpath('Info.log')#" output="#filecontent#" addnewline="Yes" fixnewline="No"`

请告诉我，发生了什么？谢谢谢谢大家

# file - 如何从文件中生成 3D 风景

> ID：13948937
> 
> 赞同：2
> 
> 时间：2012-12-19T09:14:22.720
> 
> 标签：file, 3d, landscape, representation

我想知道如何从一个非常简单的文件生成 3D 渲染。在此文件中，有三组坐标 ( `{x, y, z}`) 表示特定点的高度，但`10000*10000`地图的 8 点处有类似 4 的坐标。

这个点所代表的坐骑需要是钝的，我的意思是我不能在景观上放置金字塔。

我的问题是，如何做到这一点？

我一直在考虑制作一个灰度 png（高度图）并将其统一。

**PS**：引擎不应该提供物理引擎。

**PSS**：我可以用任何语言和任何图书馆做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:24:49.433

没有单一的方法可以将一组随机样本映射到规则网格（可能显示为灰度图形）——这实际上取决于数据的性质以及您想要对最终结果做什么。

[这里](http://proceedings.esri.com/library/userconf/proc95/to100/p089.html)有一个很好的概述，它描述了 GIS 应用程序中使用的常用技术。最容易实现的是“反距离加权”，您可以将每个网格点的高度计算为最近采样点的加权和。其他技术（如“克里金法”）可以提供更好的结果，但涉及更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:09:18.087

您是否尝试过插值。

我想这可能会解决你的问题。看看这个[插值](http://en.wikipedia.org/wiki/Interpolation)

# wpf - 绑定到集合是如何真正起作用的？

> ID：13948938
> 
> 赞同：10
> 
> 时间：2012-12-19T09:14:39.493
> 
> 标签：wpf, data-binding, collectionview

好吧，我很困惑。

`ItemsSource`如果我的控件具有类型的依赖属性`IEnumerable`并且用户将集合绑定到它我有什么对象`DependencyPropertyChangedEventArgs.NewValue`？

据我所知`CollectionView`，它是为集合隐式创建的，我希望`args.NewValue`是 type `ICollectionView`。

从[这个博客](http://www.zagstudio.com/blog/387#.UNGFFuTZaX0)：

> 当用户将 WPF 属性绑定到数据集合时，WPF 会自动创建一个视图来包装该集合，**并将该属性绑定到视图，而不是原始集合**。这种行为总是发生，并且独立于 CollectionViewSource。

但是调试器（VS 2012，.net v.4.0）显示我收到原始原始集合在`NewValue`. （BindsDirectlyToSource 未设置，默认为 false）
这怎么可能？！

我无法理解在这种情况下 WPF 控件如何支持排序、分组和过滤。
CollectionView 如何以及何时注入和使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:16:56.293

[或许CollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview%28v=vs.110%29.aspx)中备注部分的以下摘录回答了您的问题：

> 在 WPF 应用程序中，所有集合都有一个关联的默认集合视图。绑定引擎不是直接使用集合，而是始终通过关联的视图访问集合。要获取默认视图，请使用 CollectionViewSource.GetDefaultView 方法。基于 CollectionView 的内部类是仅实现 IEnumerable 的集合的默认视图。ListCollectionView 是实现 IList 的集合的默认视图。BindingListCollectionView 是实现 IBindingListView 或 IBindingList 的集合的默认视图。
> 
> 或者，您可以使用 CollectionViewSource 类以可扩展应用程序标记语言 (XAML) 创建集合的视图，然后将控件绑定到该视图。CollectionViewSource 类是 CollectionView 类的 XAML 表示形式。有关示例，请参阅如何：使用 XAML 中的视图对数据进行排序和分组。

因此，如果您没有显式绑定到 CollectionViewSource，则始终对原始集合（您在其中获得的内容）进行集合绑定，但*始终*通过默认视图完成`NewValue`对集合的访问（例如，按索引获取项目） 。因此，声明“将属性绑定到视图，而不是原始集合”并不完全正确。

 *快速测试显示，[GetDefaultView](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.getdefaultview.aspx)为我绑定的 ObservableCollection返回一个[System.Windows.Data.ListCollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.aspx)。*

# c# - File.Move / File.Copy 使用网络接口卡 (NIC)？

> ID：13948939
> 
> 赞同：2
> 
> 时间：2012-12-19T09:14:41.147
> 
> 标签：c#, asp.net, file, nic

File.Move / File.Copy 是否使用 NIC 将文件从一台计算机移动到另一台计算机？如果没有，我如何在 C# 中编程以使用 NIC 将文件从一台计算机传输到另一台计算机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:19:09.780

是的，`File.Move`并且`File.Copy`将在网络共享上工作，例如：

```
File.Copy(@"C:\Filename.txt", @"\\hostname\c$\Filename.txt");
File.Copy(@"C:\Filename.txt", @"X:\Filename.txt"); // If the network share was mapped to X:\ 
```

如果您的用户有权访问共享，或者您之前在 Windows 资源管理器中使用不同的凭据访问过共享，这将起作用。如果没有，您将获得一个`System.UnauthorizedAccessException`并且您必须[提供凭据](https://stackoverflow.com/questions/295538/how-to-provide-user-name-and-password-when-connecting-to-a-network-share)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:33:24.550

File.Move / File.Copy 在比实际硬件（您的 NIC）更高的抽象级别上工作。

有可能（取决于您复制的文件的路径）操作系统决定使用 NIC，仅使用本地磁盘、USB 连接或其他任何东西。

您不必关心这一点，您只需要确保目标的路径是正确的（本地文件路径或 UNC 路径或其他）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:30:36.690

如果 NIC 是指网络接口卡，那么是的，它将使用它将文件从一台计算机移动到另一台计算机，但只能通过操作系统间接移动。

文件过程将与操作系统对话，操作系统会在需要时负责使用 NIC。

您必须将 Windows 设置为在网络中。

你所做的看起来像：

```
File.Copy(@"C:\foo.bar", @"\\nas\data\foo.bar"); 
```

但是，如果您映射网络驱动器，它也可能如下所示：

```
File.Copy(@"C:\foo.bar", @"n:\data\foo.bar"); 
```

这一切都取决于你的情况。

# c# - 如何从样式中设置拖动视觉的大小？

> ID：13948940
> 
> 赞同：1
> 
> 时间：2012-12-19T09:14:40.583
> 
> 标签：c#, wpf

我的应用程序中有拖放支持。当我开始拖动某个项目时，我会从代码中创建拖动视觉效果。下面的代码有效，但我想使用样式设置宽度和高度，而不是像下面这样硬编码。如何？

```
private void OnDragInitialize(object sender, DragInitializeEventArgs args)
{
    args.AllowedEffects = DragDropEffects.All;

    var shape = new MyShape();

    // TODO: How do I let the 'DragShapeStyle' style apply the dimensions?
    var shapeSize = new Size(180, 80);

    var dropInfo = new DiagramDropInfo(shapeSize, SerializeItems(
        new List<IDiagramItem> { shape }));

    args.Data = dropInfo;
    args.DragVisualOffset = new Point(
        args.RelativeStartPoint.X - (shapeSize.Width / 2),
        args.RelativeStartPoint.Y - (shapeSize.Height / 2));

    var dragShape = new DragShape()
    {
        DataContext = new ShapeData()
        {
            Data = new MyData()
        }
    };

    dragShape.SetResourceReference(DragShape.StyleProperty, "DragShapeStyle");

    args.DragVisual = new ContentControl() { Content = dragShape };
} 
```

我的`DragShapeStyle`风格绘制了一个网格，它的大小使用属性`MyData`和其他一些逻辑来设置。我想将此逻辑应用于我拖动的 Visual。

# ruby-on-rails - 在 ruby on rails 中更新 yaml 文件的键值

> ID：13948951
> 
> 赞同：27
> 
> 时间：2012-12-19T09:15:20.180
> 
> 标签：ruby-on-rails, yaml

我有一个带有一些键值的 yml 文件。

```
age: 24
Name: XYZ 
```

我想要代码将“名称”键的值从 XYZ 更新为 ABC？我该怎么做？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-19T10:30:03.900

```
 require 'yaml'
    data = YAML.load_file "path/to/yml_file.yml"
    data["Name"] = ABC
    File.open("path/to/yml_file.yml", 'w') { |f| YAML.dump(data, f) } 
```

它将写入 yml 文件。如果文件中不存在指定的键（“名称”），它将写入新的键值，否则将替换现有的键值。

# windows-phone-7 - 列表框为空时如何滑动枢轴

> ID：13948961
> 
> 赞同：2
> 
> 时间：2012-12-19T09:15:50.897
> 
> 标签：windows-phone-7, listbox, pivot, swipe, populate

我有一个包含 3 个数据透视项目的数据透视页面。在默认的数据透视项目中是一个`ListBox`.

我`ObservableCollection`用来填充这个`ListBox`。填充时`ListBox`，我可以滑动枢轴。

但是，当`ObservableCollection`没有项目时，这意味着`ListBox`没有填充，我不能再滑动枢轴

[msdn论坛](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/8367feb2-c479-4374-8ef2-df9625a30285)上有人问的完全一样

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:51:55.483

查看来自[msdn 问题](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/8367feb2-c479-4374-8ef2-df9625a30285)的代码，看起来由于 VerticalAlignment 值而调整了 Pivot 的大小：

```
 <controls:Pivot Title="UTORRENT REMOTE" 
                 SelectionChanged="Pivot_SelectionChanged" 
                 Height="696" 
                 VerticalAlignment="Top"> 
```

要获得您想要从枢轴中删除 VerticalAlignment 的行为：

```
 <controls:Pivot Title="UTORRENT REMOTE" 
                 SelectionChanged="Pivot_SelectionChanged" 
                 Height="696"> 
```

# css - CSS图像路径问题

> ID：13948963
> 
> 赞同：0
> 
> 时间：2012-12-19T09:16:06.030
> 
> 标签：css

嗨，这样我在 css 中给出了我的图像路径。它可以工作一段时间，但并非一直有效。我的网站可能有很多子文件夹，然后下面的路径可能不起作用。所以我想以这样的方式在我的css中指定路径，无论我在我的网站页面上还是在我将要查看的任何页面上，但图像显示在页面上。所以告诉我应该在我的css中应用什么技巧来指定所有页面的工作方式相同。谢谢

```
.labeltag { 
    background-image: url(../images/arrowbackground.png);
    margin:2px;
    border-radius:5px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:17:26.380

尝试从站点的根目录中查找图像： `.labeltag{background-image:url('/images/arrowbackground.png');}`

假设“图像”是根目录中的文件夹

编辑：我知道代码可以更具可读性（关于建议的编辑），但我这样输入是有原因的——它的性能更好。

# c# - 验证 Telerik GridView 每一行中的每个控件 (ValidationRule)。WPF

> ID：13948980
> 
> 赞同：2
> 
> 时间：2012-12-19T09:16:54.807
> 
> 标签：c#, wpf, validation, gridview, datatemplate

我有一个 9 列的 RadGridView。除了第 2 列和第 9 列之外，每一列都包含文本框：第 2 列有一个组合框，第 9 列有用于拖放的图像。我需要验证我的 GridView，如果行中的任何列为空，我无法单击保存按钮。

每个单元格都被定义为数据模板：

```
 <t:RadGridView.Resources>
            <DataTemplate x:Key="DraggedItemTemplate">
                <StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{x:Static p:Resources.AddStandardWindow_TextBlock_Dragging}" />
                        <TextBlock Text="{Binding CurrentDraggedItem.SpecificationName}" FontWeight="Bold" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding CurrentDropPosition}" FontWeight="Bold" MinWidth="45" Foreground="Gray"/>
                        <TextBlock Text=", (" Foreground="Gray" />
                        <TextBlock Text="{Binding CurrentDraggedOverItem.SpecificationName}" Foreground="Gray" />
                        <TextBlock Text=")" Foreground="Gray" />
                    </StackPanel>
                </StackPanel>
            </DataTemplate>
        </t:RadGridView.Resources>

        <t:RadGridView.Columns>
            <t:GridViewColumn>
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <t:RadButton Content="X" Click="OnDeleteSpecificationButtonClicked" Style="{StaticResource ButtonCustomStyleRed}" />
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>

            <t:GridViewColumn Header="{x:Static p:Resources.AddStandardWindow_Specifications}">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Style="{StaticResource OverrideDefaultTextBoxStyle}" TextChanged="OnRowTextBoxesTextChanged" Text="{Binding SpecificationName}"/>
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>

            <t:GridViewColumn Header="{x:Static p:Resources.AddStandardWindow_Parameter}" Width="20*">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <t:RadComboBox x:Name="ParameterComboBox" Style="{StaticResource ComboBoxStyle}" 
                                       ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type t:RadWindow}}, Path=DataContext.Parameters}" 
                                       DisplayMemberPath="NameUnitOfMeasure" SelectionChanged="OnParameterBoxChanged">
                            <t:RadComboBox.SelectedItem>
                                <Binding Path="Parameter" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True">
                                    <Binding.ValidationRules>
                                        <validation:ProductVariantValidation ValidatesOnTargetUpdated="True" />
                                    </Binding.ValidationRules>
                                </Binding>
                            </t:RadComboBox.SelectedItem>
                        </t:RadComboBox>
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>

            <t:GridViewColumn Header="{x:Static p:Resources.AddStandardWindow_Nominal}" Width="20*">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Style="{StaticResource OverrideDefaultTextBoxStyle}" TextChanged="OnRowTextBoxesTextChanged" KeyDown="OnKeyDown" Text="{Binding Nominal, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" SourceUpdated="OnNominalOrAccuracySourceUpdated">
                        </TextBox>
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>

            <t:GridViewColumn Header="{x:Static p:Resources.AddStandardWindow_Accuracy}" 
                              Width="10*" Background="#D8E5F0">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Style="{StaticResource OverrideDefaultTextBoxStyle}" KeyDown="OnKeyDown" Text="{Binding Accuracy,
                            NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" TextChanged="OnRowTextBoxesTextChanged" SourceUpdated="OnNominalOrAccuracySourceUpdated" />
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>

            <t:GridViewColumn Header="{x:Static p:Resources.AddStandardWindow_Precision}"
                                  Width="10*"
                                  Background="#D8E5F0">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox KeyDown="OnKeyDown" Text="{Binding Presition, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" 
                                 TextChanged="OnRowTextBoxesTextChanged" Style="{StaticResource OverrideDefaultTextBoxStyle}">
                        </TextBox>
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>

            <t:GridViewColumn Header="{x:Static p:Resources.AddStandardWindow_Min}" Width="10*">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Style="{StaticResource OverrideDefaultTextBoxStyle}" 
                                 TextChanged="OnRowTextBoxesTextChanged" KeyDown="OnKeyDown" Text="{Binding Minimum, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" SourceUpdated="OnMinOrMaxSourceUpdated">
                        </TextBox>
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>
            <t:GridViewColumn Header="{x:Static p:Resources.AddStandardWindow_Max}" Width="10*">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Style="{StaticResource OverrideDefaultTextBoxStyle}" TextChanged="OnRowTextBoxesTextChanged" KeyDown="OnKeyDown" 
                                 Text="{Binding Maximum, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" SourceUpdated="OnMinOrMaxSourceUpdated">
                        </TextBox>
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>
            <t:GridViewColumn Width="40">
                <t:GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="/Images/UpDown.png" Height="34" Width="34" Stretch="None"/>
                    </DataTemplate>
                </t:GridViewColumn.CellTemplate>
            </t:GridViewColumn>
        </t:RadGridView.Columns>
    </t:RadGridView> 
```

我尝试为其中一个控件应用验证规则，以便如果验证有错误，则禁用保存按钮。这是按钮的样式：

```
<t:RadButton x:Name="SaveBtn" Height="30" Width="150" Content="{x:Static p:Resources.AddStandardWindow_Btn_Save}" Command="{Binding SaveStandardCommand}">
                <t:RadButton.Style>
                    <Style TargetType="{x:Type t:RadButton}" BasedOn="{StaticResource ButtonCustomStyleBlue}">
                        <Setter Property="IsEnabled" Value="false" />
                        <Style.Triggers>
                            <!-- Require the controls to be valid in order to press OK -->
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding ElementName=StandardTitleTextBox, Path=(Validation.HasError)}" Value="false"/>
                                    <Condition Binding="{Binding ElementName=StandardSubtitleTextBox, Path=(Validation.HasError)}" Value="false"/>
                                </MultiDataTrigger.Conditions>
                                <Setter Property="IsEnabled" Value="true" />
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>
                </t:RadButton.Style>
            </t:RadButton> 
```

在这里，StandardTitle 和 StandardSubtitle 不在 GridView 中，但是如果我添加新的条件，其中包含在 GridView 单元格模板中定义的元素名称，ValidationRule 不起作用，因为它看不到该控件。

现在，我正在尝试在后面的代码中实现我的目标：

protected void OnKeyDown(object sender, KeyEventArgs e) { e.Handled = !IsNumberKey(e.Key) && !IsActionKey(e.Key); }

```
 private bool IsNumberKey(Key inKey)
    {
        if (inKey < Key.D0 || inKey > Key.D9)
        {
            if (inKey == Key.OemPeriod) return true;
            if (inKey < Key.NumPad0 || inKey > Key.NumPad9)
            {
                return false;
            }
        }
        return true;
    }

    private bool IsActionKey(Key inKey)
    {
        return inKey == Key.Delete || inKey == Key.Back || inKey == Key.Tab || inKey == Key.Return || Keyboard.Modifiers.HasFlag(ModifierKeys.Alt);
    }

    private void OnRowTextBoxesTextChanged(object sender, TextChangedEventArgs e)
    {
        var textbox = sender as TextBox;
        if (null == textbox) return;

        var gridView = textbox.ParentOfType<GridViewRow>().ParentOfType<RadGridView>();

        ValidateGridView(gridView);
    }

    void ValidateGridView(RadGridView gridView)
    {
        var textboxes = gridView.ChildrenOfType<TextBox>();
        var comboboxes = gridView.ChildrenOfType<RadComboBox>();

        if (null != textboxes && null != comboboxes)
            SaveBtn.IsEnabled = textboxes.All(p => p.Text.Length != 0) && comboboxes.All(p => null != p.SelectedItem);
    }

    private void OnParameterBoxChanged(object sender, SelectionChangedEventArgs e)
    {
        var combobox = sender as RadComboBox;
        if (null == combobox) return;

        var row = combobox.ParentOfType<GridViewRow>();
        var boxes = row.ChildrenOfType<TextBox>();

        foreach (var textBox in boxes)
            SaveBtn.IsEnabled = textBox.Text.Length != 0;
    }

    private void OnAddSpecificationClick(object sender, RoutedEventArgs e)
    {
        var button = sender as RadButton;
        if (null == button) return;

        var gridView = button.ParentOfType<RadWindow>().FindChildByType<RadGridView>();
        gridView.RowLoaded += OnGridViewRowLoaded;
    }

    void OnGridViewRowLoaded(object sender, RowLoadedEventArgs e)
    {
        var a = e.Row.ParentOfType<RadGridView>();
        ValidateGridView(a);
    } 
```

但是当我添加新行时，该按钮仍然处于启用状态，并且还有许多其他错误。

我的问题有什么正常的解决方法吗？谢谢！

# iphone - 无法将私有框架添加到项目中。它说找不到框架

> ID：13948983
> 
> 赞同：3
> 
> 时间：2012-12-19T09:17:07.233
> 
> 标签：iphone, objective-c, ios, frameworks

我使用带有库的链接二进制文件向我的项目添加了一个私有框架，但是当我尝试使用它的方法时，它说找不到框架。框架是[蓝牙](https://github.com/mattlawer/iOS5-Private-Frameworks/tree/master/BluetoothManager)管理器，有时它无法识别蓝牙管理器。

编辑：我已经搜索了互联网和堆栈溢出，但没有找到将私有框架添加到我的库的任何正确方法。有人请指导我逐步将私有框架添加到 xcode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:39:45.027

确保该框架的路径在`Framework search path`check`Project info`中。

并设置`framework`应该被复制到目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:52:01.407

检查您是否从以下三个步骤中遗漏了某些内容。

```
1   go to your project targets - search - HEADER_SEARCH_PATHS add your
path

2  select Building phases in settings - choose target dependencies
and add library

3  select Building phases in settings - link binary libraries and
add library.a 
```

享受编程！

# c# - 如何使用 C# 实现对特定年份和数量的搜索

> ID：13948984
> 
> 赞同：15
> 
> 时间：2012-12-19T09:17:06.617
> 
> 标签：c#, sql

这是一个 SQL 数据库的小演示，可以在其中从 SQL 服务器添加、更新删除成员。

一个 SQL Server DB 中有两张表，一张是“members”，第二张是“overview”。

*   在会员中有不同的ID栏和会员个人信息，如姓名、地址电话等。
*   总而言之，只有 dID、年份和金额三列。

有一个单一的窗体，语言是 c#，项目是在 Visual Studio 2010 中构建的，当然数据库在 SQL Server 2010 中。

Windows 窗体有一个“重置、插入、更新和删除”按钮。

*   除了 dID 文本框外，还有一个按钮可以插入不同的 ID，单击“搜索”按钮后，通过填写所有出现姓名地址电话的文本框，显示有关成员的最后一个条目。这提供了可以查看成员完整信息并且可以进行更改或可以从 dB 中删除更改的功能。
*   特别是有两个文本框，分别是Year & Amount，表示会员在某一年已经支付了一定的金额。

但正如我在文本框中提到的，您只能看到最后输入的内容。我想要实现的功能是，在插入 x 人的 dID 之后，我只能在能够插入的年份文本框中说任何前一年和新闻搜索，通常应该用信息填充所有文本框，并且数量文本框应该显示来自分贝的条目，根据我输入的年份有多少金额，或者没有任何内容，这意味着可能是会员在某一年没有付款。

我需要帮助以编程方式实现此逻辑，因此我想请求帮助。

目前的方案如下：

```
using System; 
using System.Collections.Generic; 
using System.ComponentModel; 
using System.Data; 
using System.Data.SqlClient;
using System.Drawing; 
using System.Linq; 
using System.Text; 
using System.Windows.Forms;

namespace SQLDatabase 
{
     public partial class SQLDBDisplay : Form
     {
     SqlConnection con = new SqlConnection("Data Source=JG-PC\\SQLEXPRESS;Initial Catalog=TEST;Integrated Security=True");

     public SQLDBDisplay()
     {
         InitializeComponent();
     }
     SqlDataAdapter da;
     DataSet ds = new DataSet();

     private void btnSearch_Click(object sender, EventArgs e)
     {
         SqlDataReader reader;
         SqlCommand cmd = new SqlCommand();
         try
         {
             string sql = "SELECT * FROM members where dID =  '" + txtdID.Text + "' ";
             txtYear.Text = sql;
             cmd.Connection = con;
             cmd.CommandText = sql;
             con.Open();
             reader = cmd.ExecuteReader();
             while (reader.Read())
             {
                 txtID.Text = reader["ID"].ToString();
                 txtName.Text = reader["Name"].ToString();
                 txtAddress.Text = reader["Address"].ToString();
                 txtMobile.Text = reader["Mobile"].ToString();
                 txtEmail.Text = reader["Email"].ToString();
                 txtdID.Text = reader["dID"].ToString();

             }
             con.Close();

             sql = "SELECT * FROM Overview where dID =  '" + txtdID.Text + "' ";
             txtYear.Text = txtYear.Text + " : " + sql;
             cmd.Connection = con;
             cmd.CommandText = sql;
             con.Open();
             reader = cmd.ExecuteReader();
             while (reader.Read())
             {
                 txtYear.Text = reader["Year"].ToString();
                 txtAmount.Text = reader["Amount"].ToString();
                 txtdID.Text = reader["dID"].ToString();

             }
             con.Close();
         }
         catch (Exception ex)
         {
             MessageBox.Show(ex.Message.ToString());
         }
     }

     private void btnReset_Click(object sender, EventArgs e)
     {
         txtdID.Text = ""; txtName.Text = ""; txtAddress.Text = "";
         txtMobile.Text = ""; txtEmail.Text = ""; txtYear.Text = "";
         txtAmount.Text = "";
     }

     private void btnInsert_Click(object sender, EventArgs e)
     {
         SqlCommand cmd = new SqlCommand();
         string Sql = "INSERT INTO members (dID, Name, Address, Email, Mobile) VALUES ( '" + txtdID.Text+ "','" + txtName.Text + "','"
+ txtAddress.Text + "', '" + txtEmail.Text + "', '" + txtMobile.Text + "')";
         cmd.CommandText = Sql;
         cmd.Connection = con;
         con.Open();
         cmd.ExecuteNonQuery();
         con.Close();
         Sql = "INSERT INTO Overview (dID, Year, Amount) VALUES ('"+ txtdID.Text +"' ,'" + txtYear.Text + "','" + txtAmount.Text +
"')";
         cmd.CommandText = Sql;
         cmd.Connection = con;
         con.Open();
         cmd.ExecuteNonQuery();
         con.Close();
         MessageBox.Show("Record Inserted Scuessfully!!!");
         for (int i = 0; i < this.Controls.Count; i++)
         {
             if (this.Controls[i] is TextBox)
             {
                 this.Controls[i].Text = "";
             }
         }
     }

     private void btnUpdate_Click(object sender, EventArgs e)
     {
          try
         {
             SqlCommand cmd = new SqlCommand();
             string Sql = "Update members set Name = '" + txtName.Text + "', Address = '" + txtAddress.Text + "', Email = '" +
txtEmail.Text + "', Mobile = '" + txtMobile.Text + "'  WHERE dID = '"
+ txtdID.Text + "'";
             cmd.CommandText = Sql;
             cmd.Connection = con;
             con.Open();
             cmd.ExecuteNonQuery();
             con.Close();

             Sql = "Update overview set Year = '" + txtYear.Text + "', Amount = '" + txtAmount.Text + "' WHERE dID = '"+ txtdID.Text+"'";
             cmd.CommandText = Sql;
             cmd.Connection = con;
             con.Open();
             cmd.ExecuteNonQuery();
             MessageBox.Show("Data Scuessfully Updated");
             con.Close();
         }
         catch (Exception error)
         {
             MessageBox.Show(error.ToString());
         }

          for (int i = 0; i < this.Controls.Count; i++)
          {
              if (this.Controls[i] is TextBox)
              {
                  this.Controls[i].Text = "";
              }
          }
     }

     private void btnDelete_Click(object sender, EventArgs e)
     {
         SqlCommand cmd = con.CreateCommand();
         cmd.CommandType = CommandType.Text;
         cmd.CommandText = "DELETE FROM members WHERE dID = '"+ txtdID.Text +"'";
         con.Open();
         cmd.ExecuteNonQuery();

         cmd.CommandText = "DELETE FROM overview WHERE dID = '" + txtdID.Text + "'";
         cmd.ExecuteNonQuery();
         da = new SqlDataAdapter(cmd);

         MessageBox.Show("Record Scuessfully Deleted !");
         con.Close();

         for (int i = 0; i < this.Controls.Count; i++)
         {
             if (this.Controls[i] is TextBox)
             {
                 this.Controls[i].Text = "";
             }
         }
     }

     private void btnClose_Click(object sender, EventArgs e)
     {
         Application.Exit();
     }

 } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:31:43.683

您需要对`SELECT`列进行分组`Amount`。您的问题的一个简单答案是修改您的第二个选择查询，如下所示：

```
sql = "SELECT Year, dID, SUM(Amount) as Amount FROM Overview where dID =  '" + txtdID.Text + "' AND Year = " + txtYear.Text + "GROUP BY amount"; 
```

可能，您想使用`txtYear.Text`SQL 参数的值，所以：

```
txtYear.Text = sql; 
```

和

```
txtYear.Text = txtYear.Text + " : " + sql; 
```

在您的代码中没有太多意义。

当然，这不是正确的方法，因为它容易发生[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。我建议您使用[SQL 存储过程](http://msdn.microsoft.com/en-us/library/aa174792%28v=sql.80%29.aspx)，这对于 SQL 注入来说绝对安全。

对代码质量的另一个改进是您应该使用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)语句来包含`SQLConnection`、`SQLCommand`和`SQLDataReader`对象的初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:36:51.090

为了给人们对参数和 sql 注入的评论添加一个解决方案，我倾向于在连接到任何数据库时使用下面的代码。

```
using(SqlConnection connection = new SqlConnection("YOUR CONNECTION STRING"))
{
    try
    {
        using(SqlCommand command = new SqlCommand())
        {
            command.CommandText = "SELECT * FROM members where dID = @MyId";
            command.Connection = connection;

            // Set the SqlDbType to your corresponding type
            command.Parameters.Add("@MyId", SqlDbType.VarChar).Value = txtdID.Text;

            connection.Open();

            SqlDataReader reader = command.ExecuteReader();

            while (reader.Read())
            {
                txtID.Text = reader["ID"].ToString();
                txtName.Text = reader["Name"].ToString();
                txtAddress.Text = reader["Address"].ToString();
                txtMobile.Text = reader["Mobile"].ToString();
                txtEmail.Text = reader["Email"].ToString();
                txtdID.Text = reader["dID"].ToString();

            }
        }
    }
    finally
    {
        connection.Close();
    }
 } 
```

# c++ - 错误 MSB6006：“CL.exe”以代码 2 退出

> ID：13948990
> 
> 赞同：17
> 
> 时间：2012-12-19T09:17:29.323
> 
> 标签：c++, visual-studio-2010

我正在用visual c++编写，当我编译这个错误时：

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets(147,5): error MSB6006: "CL.exe" terminato con il codice 2. 
```

有谁知道为什么？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2019-07-17T18:29:19.270

您实际上可以看到正确的错误消息，而不是 Microsoft 的任意错误代码。但是由于错误列表总是在有错误时强制可见，所以不是很明显。该选项卡旁边`Error List`是另一个选项卡`Output`，它显示原始错误输出。自从我使用 2019 以来，我不确定该选项卡是否存在于所有版本中，但无论如何，旧版本中可能存在非常相似的东西。也许名称不同，或者是一个完全独立的窗口，而不是与`Error List`.

对于[此处的另一个回答者，](https://stackoverflow.com/a/56828676/8132412)该确切选项卡将显示：`error C4700: uninitialized local variable 'm' used`

这将使他不必深入研究他的所有代码。=]

如果你忘记了需要它的函数的返回值，你会看到：`error C4716: 'foo': must return a value`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-07-04T18:56:57.410

这发生在我身上有多种不同的原因：

1) 我忘记在非 void 函数中添加 return 语句。

2) 我尝试使用未初始化的指针。

3) 我写了一个循环，比如 for(int i=i;...) 而不是 for(int i=0;...)

您可以检查这些代码，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-05-30T14:23:38.950

当我在以下方法中忘记了 return 语句时，我得到了同样的错误：

```
char SpiRAM::write_byte(int address, char data_byte)
{
    assert(address >= 0);
    assert(address < SRAM_SIZE);

    _sram[address] = data_byte;

    return data_byte;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-30T23:16:19.350

这个错误发生在我使用 Visual Studio 2019 的 C++ 代码时，因为我没有 `for-loop`正确初始化我的。

我做了：

`for (int m; m < bytewidths + 1; m++) {}`

而不是

`for (int m=0; m < bytewidths + 1; m++) {}`

我认为解决这个问题的方法是手动解决你最近的代码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-21T09:15:11.050

我在 v110 (Visual Studio 2012)-Compiler 中使用以下代码得到了这个错误，其中包含错误的基于 for 的循环。

```
class A
{
    int b;
};

int main(int argc, char* argv[])
{
    A inst;

    for (auto &i : inst)
    {

    }

    return 0;
} 
```

PS：v140（Visual Studio 2015）显示正确的错误：

```
error C3312: no callable 'begin' function found for type 'A'
error C3312: no callable 'end' function found for type 'A' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-29T02:34:51.773

**我收到这个错误是因为我在保存文件名时拼错了文件名。***顺便说一下，这个保存是在插入了几个 for 循环之后，这让我大吃一惊，因为这些也可能是这个错误的根源。

Sahbi 查看输出选项卡而不是一般错误代码选项卡的提示对我非常有用！**我使用 View 菜单来查找并显示 Output 选项卡**。它读到以下内容：

> 1>----- 构建开始：项目：C867 执行评估，配置：调试 x64 ------ 1>Security_Student.cpp 1>c1xx：**致命错误 C1083：无法打开源文件：'Security_Student.cpp' : 没有这样的文件或目录** 1>C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Microsoft\VC\v160\Microsoft.CppCommon.targets(429,5): error MSB6006: "CL. exe”以代码 2 退出。 1> 完成构建项目“C867 Performative Assessment.vcxproj”——失败。========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

我已将文件保存为“Securtiy_Student.cpp”。*

我会发表评论和投票，但我还没有代表。

*如果没有删除拼写正确的文件，这不会有问题，因为编译器会忽略拼写错误的文件并使用拼写正确的先前版本。但是，我也遇到了 Visual Studio 的一个奇怪错误，当我尝试保存它时它偶尔会确定我的一个文件是新的，并且必须“另存为...”但是，当我接受该操作时，它说文件已经存在，但是如果我尝试用保存替换它，它说你不能替换它，因为它正在被使用。因此，解决方案是将文件粘贴到文本文件中，拒绝将文件保存在 Visual Studio 解决方案中，擦除解决方案文件，创建新文件，将文本粘贴到其中，然后再次保存到解决方案中。无论如何，我将在其他地方发布这个问题，

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-08T16:14:50.573

也可能是**实际删除的头文件或源文件**，仍列在您的项目中。只需检查此类文件。

我使用系统资源管理器删除了一个 Header 和 Source 文件。VS 显然无法识别已删除文件的缺失并尝试编译它们，直到您重新加载项目。

**重新加载项目**对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-09T22:59:59.760

只是想添加另一个在 Visual C++ 2019 (16.1.4) 中发生这种情况的案例：

...

```
char *s;
for(int i = 0; i < n; ++i)
{
   if(i == 4) // we know n is going to be >= 4 but Visual C++ doesn't
       s = getStringPointerFromSomewhere();
}

puts(s); 
```

Visual C++ 将在 Output: 中打印一条消息`potentially uninitialized local pointer variable 's' used`，但会崩溃而不是将其报告为正常错误或警告（可以说这应该是警告，因为它是完全合法的 C 代码）。

这个解决方案是在声明后将 s 分配给 NULL ：

```
char *s = NULL; 
```

（所以......我猜想在声明时使用初始化指针和其他变量的可能好习惯。）

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2016-04-29T06:27:16.663

你应该检查你的源文件；编译器可能找不到源文件，也许您输入了错误的名称。例如写`#include <isotream>`而不是`#include <iostream>`会导致问题。

# currency - money-rails 设置自定义货币

> ID：13948998
> 
> 赞同：0
> 
> 时间：2012-12-19T09:17:52.763
> 
> 标签：currency

我在一个`rails 3.2.6`使用 gems money 和 money-rails 的应用程序中。

对于money-rails，我使用以下数据设置了一个初始化程序：

```
MoneyRails.configure do |config|
    config.default_currency = :eur
    config.register_currency = {
        :id                  => :euc, 
        :priority            => 1,
        :iso_code            => "EUR",
        :name                => "Euro with Comma decimal mark",
        :symbol              => "€",
        :symbol_first        => true,
        :subunit             => "Cent",
        :subunit_to_unit     => 100,
        :thousands_separator => ".",
        :decimal_mark        => ","
    }
end 
```

注意我创建了一个新货币：euc，因为我想用逗号小数分隔符显示欧元货币，

但问题是货币对象还没有显示逗号，例如：

```
amount = Money.new(100, 'EUR')

amount.to_s 
```

或在视图中：

```
<%= humanized_money amount %>

it display "1.00 instead of "1,00" 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:13:06.293

暂时尝试使用`amount.format(decimal_mark: ",")`。这似乎是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T12:38:40.170

尝试 `100.to_money('EUR')`

`Money.new(100)`认为 100 以美分为单位。

# javascript - 设置输入文本的固定长度

> ID：13948999
> 
> 赞同：3
> 
> 时间：2012-12-19T09:17:55.037
> 
> 标签：javascript, html, input

我只想将文本框的输入长度设置为 9 个字符。不多也不少。有什么办法吗？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:23:16.050

使用 HTML5，您可以使用该`pattern`属性来执行此操作：

```
<input type="text" pattern=".{9}" required name="patternTest" title="Field must be 9 characters long" /> 
```

**[演示](http://jsfiddle.net/ey69U/1/)**

**[关于图案属性](http://www.wufoo.com/html5/attributes/10-pattern.html)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:19:46.443

```
var ele = document.getElementById("textboxId");
if (!(ele.value.length==9)){
  //throw validation error
} 
```

[http://jsfiddle.net/e9hGv/](http://jsfiddle.net/e9hGv/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-25T12:31:03.620

您可以在输入中将 minlength 和 maxlenght 属性设置为相同的值。

```
<input type="text" minlength="9" maxlength="9"> 
```

开箱即用的浏览器将只考虑前 9 个字符，并阻止您输入更多字符。使用模式，您可以输入任意数量的内容，但验证将失败。此外，验证消息具有更好的用户体验：

**最小长度和最大长度：**

> 请将此文本延长至 9 个字符或更多（您当前使用的是 8 个字符）。

**图案：**

> 请匹配请求的格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:19:35.813

如果它是一个输入，你可以使用属性`maxlength=9`，当然在这种情况下你可以少于 9，但是最好验证它并且不要发送少于 9 的表单并显示错误。

如果它是 textarea 元素，则需要 javascript 来执行此操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:10:31.700

这是示例-

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
  <%@ page contentType="text/html;charset=windows-1252"%>
<html>
 <head>
   <meta http-equiv="Content-Type" content="text/html; charset=windows-1252"/>
  <title>index</title>

  </head>
  <body>

 <script type="text/javascript">

   function chkpassword() {

    var p1 = document.getElementById("pass").value;
    var min = 9
    if(p1.length == min) {
        alert('ok')
    } else{
       alert(":( The password must be at least 9 characters long.");
    }

     }

  </script>

      <input type=text id=pass name=pass value="" style='width:245px'  >  
      <input type=button id=btnOk name=btnOk value="OK" onclick='chkpassword()' />
       </body>
      </html> 
```

使用此代码获取您的解决方案。