# StackOverflow 问答 15940000-15940999

# java - 加载图像 (Java)

> ID：15940004
> 
> 赞同：0
> 
> 时间：2013-04-11T03:02:46.030
> 
> 标签：java, image, optimization, awt, tiles

我正在用java制作一个简单的游戏，我有基于瓷砖的关卡。我不知道该怎么做。

所以我有一个问题...... java 是否更容易：

*   加载四个 50 x 50 的图像（在 100 x 100 的屏幕中）。或者
*   加载 16 张 25 x 25 图像（在 100 x 100 屏幕中）

另外，我将如何优化这个？

我已经用 50 x 50 块进行了许多测试，当我覆盖整个屏幕时，游戏会滞后。（从 60fps 到 30fps）。屏幕为 750 x 1200，总共 360 个块。有没有办法让这个运行得更快，或者我应该尽量不要放太多的瓷砖？我正在为我的图块使用缓冲图像。

# javascript - 多个复选框值的 Jquery 条件语句

> ID：15940005
> 
> 赞同：0
> 
> 时间：2013-04-11T03:02:56.467
> 
> 标签：javascript, jquery

我是发布/stackoverflow 的新手，所以请原谅我的任何失礼。我有多个按钮和复选框，我需要将它们的值存储到条件语句中。

HTML 代码：

```
<h1>SECTION 1: GENDER</h1>
    <p>What is your gender?</p>
    <input type="button" onclick="storeGender(this.value)" value="Male"/>
    <input type="button" onclick="storeGender(this.value)" value="Female"/>

    <hr />

    <h1>SECTION 2: AGE</h1>
    <p>What is your age?</p>
    <input type="button" onclick="storeAge(this.value)" value="18–22"/>
    <input type="button" onclick="storeAge(this.value)" value="23–30"/>

    <hr />

    <h1>SECTION 3: TRAITS</h1>
    <h3>Choose Two:</h3>
    <form>
        <input name="field" type="checkbox" value="1"/> Casual <br />
        <input name="field" type="checkbox" value="10"/> Cheerful <br />
        <input name="field" type="checkbox" value="100"/> Confident  <br />
        <input name="field" type="checkbox" value="1000"/> Tough  <br />
        <input type="button" id="storeTraits" value="SUBMIT" /> <br />
    </form>

    <hr />

    <h2>Here is what I suggest</h2>
    <p id="feedback">Feedback goes here.</p> 
```

jQuery代码：

```
 // set up variables
var gender;
var age;
var string;

$(document).ready(function() {
    startGame();
    $("#storeTraits").click( function() {
        serializeCheckbox();
    }
    ); }
);

function startGame() {
    document.getElementById("feedback").innerHTML = "Answer all the questions.";
}

function storeGender(value) {
    gender = value;
}

function storeAge(value) {
    age = value;
}

function serializeCheckbox() {
    // clear out any previous selections
    string = [ ];
    var inputs = document.getElementsByTagName('input');

    for( var i = 0; i < inputs.length; i++ ) {
        if(inputs[i].type == "checkbox" && inputs[i].name == "field") {
            if(inputs[i].checked == true) {
                string.push(inputs[i].value);
            }
        }
    }
    checkFeedback();
}

//Limit number of checkbox selections
$(function(){
    var max = 2;
    var checkboxes = $('input[type="checkbox"]');

    checkboxes.change(function(){
        var current = checkboxes.filter(':checked').length;
        checkboxes.filter(':not(:checked)').prop('disabled', current >= max);
    });
});

function checkFeedback() {
    if(gender == "Male") {
        if (age == "18–22" && string == 11){
            document.getElementById("feedback").innerHTML = "test1";
        } else if (age == "18–22" && string == 110){
            document.getElementById("feedback").innerHTML = "test2";
        } else if (age == "18–22" && string == 1100){
            document.getElementById("feedback").innerHTML = "test3";
        } else if (age == "18–22" && string == 101){
            document.getElementById("feedback").innerHTML = "test4";
        } 
    }
} 
```

我在 JSFiddle 上找到了这段代码：http: [//jsfiddle.net/GNDAG/](http://jsfiddle.net/GNDAG/)这是我想要将我的特征值加在一起的方法。但是，当我尝试合并它时，我的条件语句不起作用。如何添加 jsfiddle 示例中的代码并使条件语句起作用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:58:45.537

您需要一个整数，而不是字符串数组。这是您需要的代码：

```
var traits = 0;

$('input[name=field]:checked').each(function () {
    traits += parseInt($(this).val(), 10);
}); 
```

这会将“特征”变量设置为整数，例如 1、11、101 或 1001。

顺便说一句：第二个参数`parseInt()`是基数。

但有几点建议：

1.  不要使用“字符串”作为变量名。
2.  使用性别和年龄的单选按钮。
3.  将所有输入元素放入表单中。
4.  有一个提交表单的按钮。
5.  将处理程序附加到表单提交事件，并在该函数中进行处理，但调用`e.preventDefault()`以防止表单提交到服务器。或者，您可以让单个按钮不是提交按钮，并将单击处理程序附加到它。

这是一个带有上面代码和所有建议的[**jsfiddle 。**](http://jsfiddle.net/john_s/sMR7d/)

# r - 上的多个填充等值线图

> ID：15940007
> 
> 赞同：2
> 
> 时间：2013-04-11T03:03:03.220
> 
> 标签：r, contour

我认为我的查询部分回答了这个问题：

[用 R 中的颜色填充绘图的等高线](https://stackoverflow.com/questions/14559055/filled-contour-lines-from-a-plot-with-color-in-r/15939795#15939795)

我已经添加了对该帖子的回复，但是已经很老了，我想我可能会重新发布它作为一个新问题。如果你能帮助我，那就太好了！

我有一个矩阵（G），我需要在一个图上分成 3 个区域，除以两个轮廓（cutoff1 和 cutoff2）。

```
depth = seq(mindepth,maxdepth,part)
width = seq(minwidth,maxwidth,part)
G = matrix(0,length(width),length(depth))

# G filled in with values at each coordinate from depth/width.

filled.contour2(width,depth,G,levels=seq(0,cutoff1),col=colors()[374])
filled.contour2(width,depth,G,levels=seq(cutoff1,cutoff2),col=colors()[411])
filled.contour2(width,depth,G,levels=seq(cutoff2,max(G)),col=colors()[50]) 
```

这不起作用，因为连续的filled.contour2 操作会覆盖之前的操作。我无法发布图像，因为我是在此站点上发布的新手，但是三个分隔区域很简单，并且分隔轮廓不重叠。

它看起来像这样的东西：

```
plot(width,depth,G,cont=c(cutoff1), display="filled.contour2", col=colors()[411]) 
```

应该可以工作，但显然这不是调用 plot 的正确方法。

任何帮助将不胜感激。干杯

# java - 从快捷方式执行外部程序

> ID：15940011
> 
> 赞同：0
> 
> 时间：2013-04-11T03:03:22.690
> 
> 标签：java, shortcut, execute

我正在尝试从我的桌面在 java 中打开一个程序。我的一些桌面图标属性具有 *.exe 扩展名，但其他程序快捷方式具有 *.lnk 扩展名。因为这将打开一个带有`param`*.exe 位置的程序：

```
try {
        p = Runtime.getRuntime().exec(params);
        int result = p.waitFor();

        if (result != 0) {
            System.out.println("Process failed with status: " + result);
        }
    } catch (IOException e) {
        e.printStackTrace();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

这不适用于具有不同扩展名的任何其他快捷方式。

有没有办法可以定位快捷方式指向的正确应用程序并打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:18:57.447

您可以使用 java.awt.Desktop ；Desktop.getDesktop().open(new File("*.lnk"));

# java - 这个程序什么时候调用paint？另外，为什么它会扩展画布？

> ID：15940012
> 
> 赞同：1
> 
> 时间：2013-04-11T03:03:29.077
> 
> 标签：java, swing, awt

```
import java.awt.*;
import javax.swing.JFrame;

public class GraphicsDemo1 extends Canvas
{
    public void paint( Graphics g )
    {
        g.setColor(Color.green);
        g.drawRect(50,20,100,200);  // draw a rectangle
        g.fillOval(160,20,100,200); // draw a filled-in oval
        g.setColor(Color.blue);
        g.fillRect(200,400,200,20); // a filled-in rectangle
        g.drawOval(200,430,200,100);

        g.setColor(Color.black);
        g.drawString("Graphics are pretty neat.", 500, 100);
        int x = getWidth() / 2;
        int y = getHeight() / 2;
        g.drawString("The first letter of this string is at (" + x + "," + y + ")", x, y);
    }

    public static void main( String[] args )
    {
        // You can change the title or size here if you want.
        JFrame win = new JFrame("GraphicsDemo1");
        win.setSize(800,600);
        win.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        GraphicsDemo1 canvas = new GraphicsDemo1();
        win.add( canvas );
        win.setVisible(true);
    }
} 
```

谢谢。awt 和 swing 让我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:12:20.653

> 为什么它会扩展画布？

因为曾经写过它的人选择这样做。只有那些扩展自的类`Component`才能真正绘制到屏幕上，并且只有当它们附加到有效的可见窗口时

> 这个程序什么时候调用paint？

绘画是人的责任`RepaintManager`。它将决定何时需要重绘组件并在事件调度线程上安排重绘事件。这反过来又代表您调用（在您的情况下`update`调用）`paint`。

您可能想阅读[AWT 和 Swing](http://www.oracle.com/technetwork/java/painting-140037.html)中的绘画以了解有关该主题的更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:07:45.787

每当控件无效并需要重新绘制自身时，都会调用paint()。考虑将应用程序部分移出屏幕然后返回。油漆会被要求重绘......

我想可以扩展许多不同的控件来实现相同的目标，即创建一个自定义绘制的控件。扩展现有控件以获得在其表面上绘图、放置在 JFrame 中、自动重新绘制等的能力。

# html - IE 特定样式表命中其他版本的 IE

> ID：15940018
> 
> 赞同：0
> 
> 时间：2013-04-11T03:03:59.973
> 
> 标签：html, css, internet-explorer-7, stylesheet, font-face

我试图在 IE7+8 中使用字体图标，但遇到了一个可以通过仅 IE7 的样式表轻松解决的问题。长话短说，现在 IE7 和 IE9 都以某种方式运行我的 IE7 唯一样式表（IE8 运行得非常好）。我不明白为什么。

```
<head>
    <!-- CSS3 in IE7+8 -->
    <!--[if (gte IE 6)&(lte IE 8)]>
      <script src="js/selectivizr.js"></script>
      <noscript><link rel="stylesheet" href="css/style.css" /></noscript>
    <![endif]-->

    <!-- META -->
    <meta charset="utf-8" />

<!-- TITLE -->
<title>title</title>

<!-- STYLESHEETS -->
<link rel="stylesheet" href="css/style.css" />
<link rel="stylesheet" href="css/normalize.css" />
<link rel="shortcut icon" href="img/favicon.ico" />

 <!-- Icomoon in IE7 / IE7.CSS -->
    <!--[if lte IE 7]>
        <script src="js/lte-ie7.js"></script>
        <link rel="stylesheet" href="css/ie7.css" />
    <![endif]-->

<!--FONTS-->
    <link href='http://fonts.googleapis.com/css?family=Maiden+Orange' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
</head>

<body>
    <div id="container">
       <div id="header" role="banner">
            <a href="#"><img src="img/logo.png" title="title" alt="" /></a>
    </div> <!-- end #HEADER -->

    <div id="main" role="main">
        <div class="left content">
            <h2>WHAT WE DO</h2>
        </div>

        <div class="center content">
            <h2>OUR SPECIALTIES</h2>

            <ul>
                <li><a aria-hidden="true" data-icon="f">WATER</a></li>
                <li><a aria-hidden="true" data-icon="$">FIRE</a></li>
                <li><a aria-hidden="true" data-icon="#">LIGHTING</a></li>
                <li><a aria-hidden="true" data-icon="a">AUDIO</a></li>
                <li><a aria-hidden="true" data-icon="!">TECH F/X</a></li>
            </ul>
        </div>

        <div class="left content">
            <h2>CONTACT US</h2>

            <div class="info">
                <p>Name</p>
                <p>e: <span class="brown"><a href="#">email</a></span></p>
                <p>p: <span class="brown">888-888-8888</span></p>
            </div>

            <div class="info">
                <p>Name</p>
                <p>e: <span class="brown"><a href="#">email</a></span></p>
                <p>p: <span class="brown">888-888-8888</span></p>
            </div>
        </div>

    </div> <!-- end #MAIN -->

    <div id="footer" role="contentinfo">
        <p>&copy;</p>
    </div> <!-- end #FOOTER -->
</div> <!-- end #CONTAINER -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</body>
</html> 
```

CSS

```
@font-face {
font-family: 'icomoon';
src:url('/fonts/icomoon.eot');
src:url('/fonts/icomoon.eot?#iefix') format('embedded-opentype'),
    url('/fonts/icomoon.woff') format('woff'),
    url('/fonts/icomoon.ttf') format('truetype'),
    url('/fonts/icomoon.svg#icomoon') format('svg');
font-weight: normal;
font-style: normal;
}

/* UNIVERSAL
=================================*/ 

body {
    background-color: #292929;
    background: url("/img/bg.png") repeat;
    font-family: 'Droid Sans', Arial, Helvetica, sans-serif;
    font-size: 62.5%;     /* 1em = 10px */
    -webkit-font-smoothing: antialiased;
}

#container {
    width: 960px;
    margin: 0 auto;
}

h2 {
    display: inline-block;
    font-family: 'Maiden Orange', cursive;
    font-size: 3.5em;
    font-weight: 100;
    color: #3c2811;
    padding: 0 0 2px 0;
    border-bottom: 1px #3c2811 solid;
}

a,
.center a:hover {
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}

p {
    color: #fff;
}

a,
.brown,
.center a:hover {
    color: #3c2811;
}

li {
    list-style: none;
    margin: 0 0 20px 10px;
}

/* HEADER
=================================*/
#header {
    background: url("/img/ribbon.png") no-repeat center;
    height: 99px;
    margin: 60px 0 0 0;
    position: relative;
}

#header img {
    display: inline-block;
    position: absolute;
    top: 13%;
    left: 35%;
}

/* MAIN
=================================*/
#main {
    overflow: hidden;
}

#main div:first-child h2 {
    margin-left: 65px;
}
#main div:nth-child(2) h2 {
    margin-left: 40px;
}
#main div:last-child h2 {
    margin-left: 65px;
}

.content {
    margin: 20px 0 0 0;
    float: left;
    height: 439px;
    width: 320px;
}

.left {
    background: url("/img/left-bg.png") no-repeat;
}

.left p {
    font-size: 2em;
    margin: 0 40px 0 20px;
    line-height: 1.9;
}

/*    CENTER    */
.center {
    background: url("/img/center-bg.png") no-repeat;
}

.center a {
    color: #fff;
    font-size: 3em;
    -webkit-transition:     color 0.15s ease-in;
       -moz-transition:     color 0.15s ease-in;
        transition:     color 0.15s ease-in;
}

[data-icon]:before {
    font-family: 'icomoon';
    content: attr(data-icon);
    speak: none;
    padding: 0 30px 0 0;
}

/*    CONTACT  */
.info {
    margin: 0 0 30px 0;
}

.info p:first-child {
    padding: 0 0 10px 0;
}

.info p:nth-child(n+2) {
    font-size: 1.7em;
    line-height: 1.5;
}

/* FOOTER
=================================*/
#footer {
    text-align: center;
    font-family: 'Maiden Orange';
    font-size: 2.4em;
    margin: 0 0 20px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:48:24.327

`<head>`标签之前是什么？不正确的标记可能会触发怪癖模式或兼容模式。

尝试通过在其中添加此标记来明确要求 IE 使用可用的最新渲染引擎来渲染您的页面`<head></head>`：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:23:39.463

正如@Phil 提到的，可能`quirks mode`是触发了这个。过于具体`DOCTYPE`往往会触发它。为避免触发`quirks mode`，`DOCTYPE`请不要具体。利用：

```
<!DOCTYPE html> 
```

HTML5 的胜利！

# android - 具有负偏移量的滚动条 startScroll

> ID：15940019
> 
> 赞同：0
> 
> 时间：2013-04-11T03:04:09.550
> 
> 标签：android, scroll, offset, scroller

使用正偏移量，`startScroll`将向右滚动。因此，对于负偏移量，我假设它应该向左滚动——文档没有说明这一点。

然而，这并没有按预期工作。右边的滚动不一样，左边的滚动根本不起作用。

这是我的代码。

```
@Override

public void setSelection(int position) {

    int scrollx = mScroller.getCurrX();
    int offsetToScroll = position * childWidth;
    if(offsetToScroll > scrollx) {
        mScroller.startScroll(scrollx, 0, offsetToScroll, 0);
    } else {
        mScroller.startScroll(scrollx, 0, -offsetToScroll, 0);
    }
    requestLayout();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:50:14.777

Scroller 与 UI 无关 - 它只是一个帮助类，有助于根据初始位置和初始速度计算位置，模拟惯性效应 - 请参阅 computeScrollOffset() 和 getCurrX()/getCurrY()

# c++ - 如何将 boost::tuple 分配给 boost::shared_ptr

> ID：15940020
> 
> 赞同：3
> 
> 时间：2013-04-11T03:04:16.467
> 
> 标签：c++, shared-ptr, boost-tuples

在我的代码中，我有这样的东西

```
shrd_ptr_obj st = boost::make_shared<Myobj>();
Myobj tp =  boost::make_tuple(0,0,0,0,0 ); 
```

如何使 st 指向 tp ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:13:20.323

自然的方法是将构造函数参数传递给`make_shared`并在同一行上创建对象。

```
shrd_ptr_obj st = boost::make_shared<Myobj>(boost::make_tuple(0,0,0,0,0)); 
```

如果要在单独的步骤中构造对象，则需要在堆栈上分配`tp`而`new`不是在堆栈上创建它。然后你可以`boost::shared_ptr`从这个`new`ed 指针创建一个。

```
Myobj *tp = new Myobj(boost::make_tuple(0,0,0,0,0));
shrd_ptr_obj st = boost::shared_ptr<Myobj>(tp); 
```

# ruby-on-rails - 使用非全部查询时的简单形式显示 ActiveRecord 关系

> ID：15940029
> 
> 赞同：1
> 
> 时间：2013-04-11T03:05:42.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, simple-form

问题：

![用户下拉菜单显示 ActiveRecord 关系](https://i.stack.imgur.com/oBZ7k.png)

我希望下拉列表列出用户的姓氏。怎么能做到这一点？

`app/controllers/courses_controller`

```
 def edit
    @course = Course.find(params[:id])
    @teachers = User.where('teacher is true').order(:last_name).all
  end 
```

看法

```
= simple_form_for @course do |f|
  - if @course.errors.any?
    #error_explanation
      %h2= "#{pluralize(@course.errors.count, "error")} prohibited this course from being saved:"
      %ul
        - @course.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.input :name
  .field
    = f.input :password
  .field
    = f.input :description
  - if @current_user
    - if @current_user.admin?
      = f.input :user, collection: @teachers
  .actions
    = f.submit 'Save', class: 'btn btn-primary' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:22:55.743

从[文档](https://github.com/plataformatec/simple_form#collections)：

> 除了集合之外，集合输入还接受另外两个选项：
> 
> > • label_method => 应用于集合以检索标签的标签方法（使用此方法代替collection_select 中的text_method 选项）
> > 
> > • value_method => 应用于集合以检索值的值方法

```
= f.input :user, collection: @teachers, label_method: :last_name 
```

# clojure - 无法逆时针调试

> ID：15940033
> 
> 赞同：1
> 
> 时间：2013-04-11T03:05:58.810
> 
> 标签：clojure, eclipse-plugin, counterclockwise, ccw

我正在运行 Clojure/Eclipse/逆时针。当我在 core.clj 中插入断点时，只有一行点获得了一条小尾巴。那是第 29 行。这与第 29 行上的代码无关。当这个带尾的点出现并且我尝试运行/调试/调试配置/调试时，对话框超时并显示消息“等待新的 REPL 进程确认时间到”。此外，焦点移至文件 clojure.core 的选项卡。该文件的第 29 行是下面以“cons”开头的行。它是 cons 定义的最后一行。它也是 clojure.core 中出现“.clojure.lang.RT”的第一行（下面还有其他类似的行）。在调试窗口中，我看到“Thread [main] (Suspended) 并紧接在“core.clj line: 29”下方。看起来问题出在 .clojure.lang.RT 上。

（如果我在任何其他行中插入断点，我只会得到一个点，然后 REPL 开始，但断点被忽略。）

```
(def
 ^{:arglists '([x seq])
    :doc "Returns a new seq where x is the first element and seq is
    the rest."
   :added "1.0"
   :static true}

 cons (fn* ^:static cons [x seq] (. clojure.lang.RT (cons x seq)))) 
```

# firefox - 使用 IE 时的 ASP.NET Membership Webforms 重定向

> ID：15940034
> 
> 赞同：1
> 
> 时间：2013-04-11T03:06:25.750
> 
> 标签：firefox, internet-explorer-8, webforms

我遇到了一个问题，即当用户使用 Firefox 登录网站时，它可以工作。当用户使用 Internet Explorer 登录时，它不起作用。我已经检查并尝试了兼容模式，这没有任何区别。

有谁知道为什么在使用 IE 时，它会重定向回登录页面，但它不会发生在 firefox 或 chrome 上？

想法？

![加载并重定向回登录屏幕](https://i.stack.imgur.com/CUDX5.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:34:47.580

我所做的只是完全重新启动服务器，然后它又开始工作了。

那太奇怪了。

# android - Android Button setBackground() 导致高亮效果消失

> ID：15940038
> 
> 赞同：2
> 
> 时间：2013-04-11T03:06:52.457
> 
> 标签：android, android-layout, android-button

我正在尝试以编程方式向按钮添加背景资源，但是一旦这样做，单击按钮时的突出显示效果就会消失。如何在仍然使用背景的同时恢复高光效果？

button_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
xmlns:android="http://schemas.android.com/apk/res/android" >
  <item android:drawable="@layout/avail_button_solid" />        
  <item android:drawable="@layout/avail_button_shape" />
</layer-list> 
```

avail_button_solid.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
  <solid android:color="#ababab" />   
</shape> 
```

avail_button_shape.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
  <solid android:color="#ffffff" /> 
  <stroke android:width="1dp" android:color="#ff000000" />  
</shape> 
```

Java代码：

```
b.setBackgroundResource(R.layout.button_layout); 
```

代码设置了背景，但去掉了高亮效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:16:43.240

按钮（和许多其他 Android 小部件）使用`<selector>`可绘制对象（SDK 中的模拟是 a `StateListDrawable`）。这实际上是一个 Drawable 容器，它将不同的可绘制对象映射到不同的状态：按下、聚焦、禁用、正常等。如果您想替换按钮背景，您应该自己制作其中一个。

在此处阅读更多信息：http: [//developer.android.com/design/style/touch-feedback.html](http://developer.android.com/design/style/touch-feedback.html)

# jquery - 折叠时的 jQuery 扩展器

> ID：15940043
> 
> 赞同：3
> 
> 时间：2013-04-11T03:07:41.180
> 
> 标签：jquery

我正在将[jQuery 扩展器](https://github.com/kswedberg/jquery-expander)用于阅读更多阅读更少类型的情况，它工作正常。我想在用户点击阅读少后滚动到文章的标题。我试图弄清楚代码，但我对 jQuery 不太熟悉。

```
$('.expand_please').expander({
  slicePoint: 1000,
  widow: 2,
  expandEffect: 'show',
  userCollapseText: 'Read less',
  expandText: 'Read more',
  onCollapse: $(this).closest('h2').scroll()
}); 
```

**编辑：**相关HTML：

```
<div class="row keyline" id="show_article1">
  <h2 style="margin-bottom: 1em;">TITLE</h2>
  <div class="link_article" style="display: none;"><a href="/share/thomas/more/18" data-remote="true">READ MORE</a></div>
  <div class="fivecol">
    <img alt="thumbnail" class="thumbnail" src="/system/thumb.jpg">
  </div>
  <div class="sevencol last expand_please marginer"><div class="summary" style="display: none;">
  ARTICLE BODY TEXT
  <span class="read-less"><a href="#">Read less</a></span>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:43:48.477

To scroll to the element in question, you simply need to get its `offset().top` value, and pass that value to the `animate()` method.

It'd look something like this:

```
$('.expand_please').expander({
      slicePoint: 1000,
      widow: 2,
      expandEffect: 'show',
      userCollapseText: 'Read less',
      expandText: 'Read more',
      onCollapse: function(){
        var amount = $(this).siblings('h2:first').offset().top;
        $('body, html').animate({scrollTop : amount},800);

      }
}); 
```

The above method will obviously `animate` the scroll, which is a nice touch, but should you just want something more basic, you can use `element.scrollIntoView(true);`¹

In your case, that would be:

```
...
onCollapse: function(){
    // pass true to align with top of scroll area
    // pass false to align with bottom of scroll area
    $(this).siblings('h2:first').scrollIntoView(true)
}
... 
```

> ¹ [https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T03:38:26.330

我相信 onCollapse 想要一个函数在展开器折叠时调用。您也在寻找 jQuery 的 .scrollTop 方法而不是 .scroll。.scroll 将处理程序附加到滚动事件。尝试以下

```
$('.expand_please').expander({
    slicePoint: 1000,
    widow: 2,
    expandEffect: 'show',
    userCollapseText: 'Read less',
    expandText: 'Read more',
    onCollapse: function () {
        $('body').scrollTop($(this).closest('h2').offset().top);
    }
}); 
```

更新： .closest() 将不起作用，因为它会查看匹配元素集的祖先。在提供的 HTML 中，您实际上是在尝试选择同级，例如

```
$(this).siblings('h2').first().offset().top 
```

# arrays - 将范围传递给 Excel 用户定义函数并将其分配给数组

> ID：15940047
> 
> 赞同：4
> 
> 时间：2013-04-11T03:08:08.210
> 
> 标签：arrays, excel, range, user-defined-functions, vba

我在尝试着

1.  将两个范围 -*多行单列*- 传递给 Excel 2007 中的用户定义函数，
2.  然后将其分配给数组进行处理。

谁能告诉我如何将这样的范围分配给数组？

范围不是恒定的，因为我在不同的单元格中为不同的数据使用 UDF，所以我不能使用例如，`Range("A1:A10")`

当我只使用`Data1.Rows.Cells(i, 1)`而不是数组时，代码正在工作。但我认为最好使用一维数组来提高效率。

这是我当前的代码

```
Function Sample(Data1 As Range, Data2 As Range) As Double

 'Size of Data1 and Data2
 Dim rows As Integer
 rows = Data1.Rows.Count 

 'Declaring two one dimensional arrays
 Dim data1Array(rows) As Double --- Getting error here
 Dim data2Array(rows) As Double --- Getting error here

 Dim diff As Double
 Dim average As Double
 Dim i As Integer

 'Assigning Range to Array
 data1Array = Data1 --- Getting Error here
 data2Array = Data2 --- Getting Error here

 average = 0
 diff = 0

 For i = 1 To rows

   diff = data1Array(i) - data2Array(i)

   If diff < 0 Then
     diff = diff * -1
   End If

   average = diff + average

 Next i

 Sample = average/rows

End Function 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T03:29:53.513

像这样的东西适用于一维范围，包括测试

1.  不等范围
2.  单个单元格范围（不能使用变体）

**样品子**

```
Sub Test()
MsgBox Sample([a1:a3], [a5:a7])
End Sub 
```

**功能**

```
 Function Sample(Data1 As Range, Data2 As Range)

 Dim X
 Dim Y
 Dim lngCnt As Long
 Dim dbDiff As Double
 Dim dbAvg As Double

 If Data1.rows.Count <> Data2.rows.Count Then
 Sample = "Different range sizes"
 Exit Function
 ElseIf Data1.rows.Count = 1 Then
 Sample = "Single cell range"
 Exit Function
 End If

 X = Application.Transpose(Data1)
 Y = Application.Transpose(Data2)

 For lngCnt = 1 To UBound(X)
   dbDiff = X(lngCnt) - Y(lngCnt)
   If dbDiff < 0 Then
     dbDiff = dbDiff * -1
   End If
   dbAvg = dbDiff + dbAvg
 Next

 Sample = dbAvg / lngCnt

End Function 
```

# php - 单个查询以获取过去 7 天的个人计数

> ID：15940051
> 
> 赞同：3
> 
> 时间：2013-04-11T03:08:36.427
> 
> 标签：php, mysql, sql

我确实知道以下条件将返回过去 7 天的总数

```
SELECT count(id) FROM registration 
WHERE createdDate BETWEEN DATE_SUB(CURDATE(), INTERVAL 7 DAY) AND CURDATE() 
```

是否有一个查询可以让过去 7 天以每天 7 个结果的数组返回？

例如：

```
day 1 - 10
day 2 - 5
day 3 - 9
..
..
.. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:12:32.097

添加 group-by 子句：

```
SELECT count(id), DATE(createdDate)
FROM registration
WHERE createdDate BETWEEN DATE_SUB(CURDATE(), INTERVAL 7 DAY) AND CURDATE()
GROUP BY DATE(createdDate) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T03:12:49.957

这将为您提供日期和计数。

```
SELECT DATE(createdDate),COUNT(id)
FROM registration
WHERE createdDate BETWEEN DATE_SUB(CURDATE(), INTERVAL 7 DAY) AND CURDATE()
GROUP BY DATE(createdDate) 
```

或者，为了让结果更接近您的示例，您可以使用：

```
SELECT CONCAT("Day ",DATEDIFF(NOW(), createdDate)) AS day,COUNT(id)
FROM registration
WHERE createdDate BETWEEN DATE_SUB(CURDATE(), INTERVAL 7 DAY) AND CURDATE()
GROUP BY DATE(createdDate) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:14:00.437

```
select 8 - n day, count(id)
from registration
join (select 1 n union select 2 union select 3 union select 4 union select 5 union select 6 union select 7) x
on createdDate between date_sub(curdate(), interval n day) and date_sub(curdate(), interval n-1 day)
group by day
order by day 
```

# dojo - 如何从 WebStorm 运行 .html 文件

> ID：15940063
> 
> 赞同：0
> 
> 时间：2013-04-11T03:11:09.647
> 
> 标签：dojo, webstorm

我们通过 .html 文件进行单元测试，以便我们也可以在 Web 表单中进行交互。我们也只运行 dojo 测试运行器。

我已经能够从 Aptana 运行 .hml 文件，但是当我第一次尝试 webstorm 时，从未尝试过，喜欢这个 IDE，我看到在我的 .html 文件中，顶部的运行按钮被禁用。

那么如何运行一个从 WebStorm 获得标记和 javascript 的 .html 文件并让它返回并在 Webstorm 中达到我的调试点？webstorm 是否也会刮掉您在 FireFox 中看到的内容，或者您​​是否必须不断向后切换和第四次切换，例如当您进入下一个调试点时，返回浏览器以查看结果……或者是否有一个不错的方法webstorm 同时在运行时查看标记？

总而言之，我只是想让这个 .html 文件运行，其中包含 javascript 和一些 Dojo 运行器等，因为我在这个 .html 文件中使用 Dojo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T14:37:42.583

要么手动打开它，要么允许从 localhost 端口进行调试。

因此，在 WebStorm 中打开文件看起来并不明显，文本编辑器窗格的右上角出现了一排图标。单击隐藏在那里的支持/安装的浏览器图标时，您必须按住 SHIFT 键，否则它将在部署的位置打开（通过 FTP 服务器设置等）。

在“查看”菜单中尝试 ALT-F2 预览文件...。

# regex - 将正则表达式转换为线性语法的算法

> ID：15940067
> 
> 赞同：3
> 
> 时间：2013-04-11T03:12:13.113
> 
> 标签：regex, algorithm, grammar, regular-language

将任何给定的正则表达式（RE）转换为左（或右）线性语法的标准算法是什么？

我知道我可以这样做（从 RE 编写线性语法）：

`RegEx -> NFA -> DFA -> Right Linear grammar`.

对于直接方法，我可以处理简单的正则表达式`(0 + 10)*`并创建线性语法。
但是，当存在嵌套的 kleene 星时，如果没有任何明确定义的方法，就很难生成线性的 CFG。

[我在这里](https://stackoverflow.com/questions/13816439/left-linear-and-right-linear-grammars)和[这里](https://stackoverflow.com/questions/13139821/algorithm-to-generate-context-free-grammar-from-any-regex)看到了类似问题的一些答案。但它们不提供通用算法或不将正则表达式转换为**线性**语法。

特别是，如何`(((01+10)*00)*11)*`使用某种算法直接将其转换为线性语法？

任何帮助表示赞赏。

**编辑**

做了一些更多的搜索。并得到了这个。
[从正则表达式构造等价的正则文法](http://www.inrialpes.fr/vasy/people/Gordon.Pace/Research/Software/Relic/Transformations/RE/toRG.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T07:05:52.810

[从正则表达式构造等价的正则文法](http://www.inrialpes.fr/vasy/people/Gordon.Pace/Research/Software/Relic/Transformations/RE/toRG.html)

# css - div 中的 max-width 使响应式设计不起作用

> ID：15940070
> 
> 赞同：0
> 
> 时间：2013-04-11T03:12:21.270
> 
> 标签：css, html, responsive-design

我的 div 有问题，无法使用 RWD 创建页面。我需要我的 div 具有 max-width: 800px 所以当调整浏览器的大小时，div 也会调整大小并且最大为 800px，但不起作用。

**HTML**

```
<div id="container>
    <div class="show-section">
        <h3>Section 1</h3>
    </div>
    <div class="show-section">
        <h3>Section 1</h3>
    </div>
    <div class="show-section">
        <h3>Section 1</h3>
    </div>
</div> 
```

**CSS**

```
body {
    background-color: #fffff7;
    font: 16px/22px Helvetica, Arial, Verdana, sans-serif;
    margin: 0px;
    padding: 0px;
    width: 100%;
    height: 100%;
    overflow-x: hidden;
}
#container {
    display: block;
    margin: 0 auto;
    margin-top: 50px;
    max-width: 800px;
} 
```

**最大宽度：800px**

![在此处输入图像描述](https://i.stack.imgur.com/vBkRh.png)

**宽度：70%**

![在此处输入图像描述](https://i.stack.imgur.com/7CCL2.png)

当它达到大约 720 时。没有调整大小，也不是应该在屏幕上居中，而是如果不是 max-width: 800px; 会放 width: 70% 的作品。但我不希望这样，因为当屏幕太大时，div 也是如此，所以我希望有一个大小限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:31:33.810

似乎对我有用，我只需要在“容器”ID 之后添加一个小双引号。

```
<div id="container> 
```

至

```
<div id="container"> 
```

小提琴：http: [//jsfiddle.net/mUCSz/1/](http://jsfiddle.net/mUCSz/1/)。只需调整预览窗格的大小。

# python - 使用 python BeautifulSoup 下载文件

> ID：15940079
> 
> 赞同：-2
> 
> 时间：2013-04-11T03:12:51.450
> 
> 标签：python

我正在用 python 编写一个网络抓取脚本，我必须下载一个文件。在网站上，有一张图片`<a href="javascript:DownloadMyFile();">`。当我单击它时，它会调用一个函数，该函数会显示对话框以保存或打开文件。如何使用漂亮的汤直接使用python下载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:19:19.603

BeautifulSoup 不呈现 JavaScript，因此您有两种选择：

1.  弄清楚当您单击该锚点时 JavaScript 正在做什么来生成传递给您的浏览器的 url。
2.  使用像 CasperJS 这样的现代工具编写你的爬虫——它可以处理 JavaScript。

# rabbitmq - RabbitMQ 在重启期间崩溃

> ID：15940082
> 
> 赞同：5
> 
> 时间：2013-04-11T03:13:08.787
> 
> 标签：rabbitmq

当我尝试启动我的 rabbitmq 服务器时，我在 log/*-sasl.log 中收到以下错误

```
=CRASH REPORT==== 10-Apr-2013::23:24:32 ===
crasher:
initial call: application_master:init/4
pid: <0.69.0>
registered_name: []
exception exit: {bad_return,
                    {{rabbit,start,[normal,[]]},
                     {'EXIT',
                         {undef,
                             [{os_mon_mib,module_info,[attributes],[]},
                              {rabbit_misc,module_attributes,1,
                                  [{file,"src/rabbit_misc.erl"},
                                   {line,760}]},
                              {rabbit_misc,
                                  '-all_module_attributes/1-fun-0-',3,
                                  [{file,"src/rabbit_misc.erl"},
                                   {line,779}]},
                              {lists,foldl,3,
                                  [{file,"lists.erl"},{line,1197}]},
                              {rabbit,boot_steps,0,
                                  [{file,"src/rabbit.erl"},{line,441}]},
                              {rabbit,start,2,
                                  [{file,"src/rabbit.erl"},{line,356}]},
                              {application_master,start_it_old,4,
                                  [{file,"application_master.erl"},
                                   {line,274}]}]}}}}
  in function  application_master:init/4 (application_master.erl, line 138)
ancestors: [<0.68.0>]
messages: [{'EXIT',<0.70.0>,normal}]
links: [<0.68.0>,<0.7.0>]
dictionary: []
trap_exit: true
status: running
heap_size: 2584
stack_size: 24
reductions: 227
neighbours: 
```

startup_log 有 -

```
{error_logger,{{2013,4,11},{2,48,36}},std_error,"File operation error: eacces. Target: /usr/lib64/erlang/lib/otp_mibs-1.0.7/ebin. Function: read_file_info. Process: code_server."}

=ERROR REPORT==== 11-Apr-2013::02:48:36 ===
File operation error: eacces. Target: /usr/lib64/erlang/lib/otp_mibs-1.0.7/ebin. Function: read_file_info. Process: code_server.
Activating RabbitMQ plugins ...

=ERROR REPORT==== 11-Apr-2013::02:48:36 ===
File operation error: eacces. Target: /usr/lib64/erlang/lib/otp_mibs-1.0.7\. Function: list_dir. Process: application_controller.

=ERROR REPORT==== 11-Apr-2013::02:48:36 ===
File operation error: eacces. Target: /usr/lib64/erlang/lib/otp_mibs-1.0.7\. Function: list_dir. Process: application_controller.
Skipping /usr/lib64/erlang/lib/os_mon-2.2.8/ebin/os_mon_mib.beam (unreadable)

=ERROR REPORT==== 11-Apr-2013::02:48:36 ===
File operation error: eacces. Target: /usr/lib64/erlang/lib/otp_mibs-1.0.7\. Function: list_dir. Process: systools_make.

=ERROR REPORT==== 11-Apr-2013::02:48:36 ===
File operation error: eacces. Target: /usr/lib64/erlang/lib/otp_mibs-1.0.7\. Function: list_dir. Process: systools_make. 
```

startup_err 有 -

```
Erlang has closed

Crash dump was written to: erl_crash.dump
Kernel pid terminated (application_controller) ({application_start_failure,rabbit,{bad_return,{{rabbit,start,[normal,[]]},{'EXIT',{undef,[{os_mon_mib,module_info,[attributes],[]},{rabbit_misc,module 
```

任何有助于理解错误原因的帮助都会很大。谢谢。

# jquery - 部署到 Site5 后 jQuery 无法正常工作

> ID：15940085
> 
> 赞同：0
> 
> 时间：2013-04-11T03:13:28.100
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, ruby-1.8.7

我成功地将我的应用程序部署到 Site5 - 当我开始使用它时，我意识到并非所有的 jQuery 都在工作。具体来说，任何涉及从 Ruby Forms 获取信息的事情。我收到以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'live' 
Uncaught TypeError: Object [object Object] has no method 'live'
(anonymous function)
(anonymous function) 
ut.extend.globalEval 
ut.fn.extend.domManip 
ut.fn.extend.replaceWith 
(anonymous function) 
ut.event.dispatch 
y.handle 
```

该脚本如下所示，并在本地、heroku 和 hostmonster 上工作，所以我很困惑为什么它现在不起作用。在文档中：

```
<%= form_for :team_design, :url => {:controller => "team_designs", :action => 'create'} do |f| %>

    <%= f.label :style %>   <%= f.select :style, [["Mens", "Mens"], ["Womens", "Womens"]], :include_blank=>'Select Style' %> 
```

...

```
$(document).ready(function() {  
    $('#target_div select#team_design_style').live('change', function () {
        var suitStyle = $(this).val();
        switch (suitStyle) {
                   //all the different case possibilities
    });
}); 
```

在 Application.js 中：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require_tree . 
```

在我的布局文件中

```
<head>
  <title>scrubbed</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head> 
```

在我的 Gemfile 中，在资产下

```
group :assets do
  gem 'execjs'
  gem 'therubyracer', :platforms => :ruby
  gem 'johnson'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby
  gem 'jquery-rails'
  gem 'uglifier', '>= 1.0.3'
end 
```

在 Google Chrome 中的来源下：

```
/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:53:43.823

来自[精美的 jQuery 手册](http://api.jquery.com/live/)：

> **.live( events, handler(eventObject) )** *Returns: jQuery*
> version deprecated: 1.7, removed: 1.9
> [...]
> **从 jQuery 1.7 开始**，该`.live()`方法已被弃用。用于`.on()`附加事件处理程序。旧版本 jQuery 的用户应该`.delegate()`优先使用`.live()`.

So`live`在 1.7 版（2011 年 11 月）中已被弃用，并在 1.9 中完全删除。您使用的是 jQuery 1.9.1，所以没有更多的`live`. 既然您说它在某些地方有效，但在其他地方无效，那么您必须混合 jQuery 版本，这只是痛苦和痛苦的捷径，所以不要混合版本。

更新您的 jQuery 代码以使用[`on`](http://api.jquery.com/on/)而不是`live`和`delegate`。[`live`](http://api.jquery.com/live/)and[`delegate`](http://api.jquery.com/delegate/)文档向您展示了如何将and`live`转换`delegate`为`on`.

你应该开始关注发行说明并更新你的代码：不要等到功能被删除，一旦有任何东西被弃用就更新你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:20:08.190

检查是否：

*   gem jquery-rails 包含在您的 gemfile 的资产组中
*   jquery 包含在您的 javascript 清单文件中
*   您在部署期间编译了资产

# erlang - Erlang 应用程序 undef 错误（退出：{bad_return，）

> ID：15940090
> 
> 赞同：4
> 
> 时间：2013-04-11T03:13:59.550
> 
> 标签：erlang, undef, cowboy

我正在尝试运行自定义应用程序，但出现多个错误。我相信主要的 egs 应用程序会出错，因为它调用了未定义类型的 egs 补丁应用程序。我不知道如何让它工作我已经尝试过多次重新编译代码，以解决其他有类似问题的问题，但似乎没有任何效果。牛仔开始监听器仍未定义。

这是我收到的错误。

```
 =CRASH REPORT==== 10-Apr-2013::21:02:00 ===
  crasher:
    initial call: application_master:init/4
    pid: <0.106.0>
    registered_name: []
    exception exit: {bad_return,
                        {{egs_patch_app,start,[normal,[]]},
                         {'EXIT',
                             {undef,
                                 [{cowboy,start_listener,
                                      [{patch,11030},
                                       10,cowboy_tcp_transport,
                                       [{port,11030}],
                                       egs_patch_protocol,[]],
                                      []},
                                  {egs_patch_app,start_listeners,1,
                                      [{file,"src/egs_patch_app.erl"},
                                       {line,44}]},
                                  {egs_patch_app,start,2,
                                      [{file,"src/egs_patch_app.erl"},
                                       {line,31}]},
                                  {application_master,start_it_old,4,
                                      [{file,"application_master.erl"},
                                       {line,274}]}]}}}}
      in function  application_master:init/4 (application_master.erl, line 138)
    ancestors: [<0.105.0>]
    messages: [{'EXIT',<0.107.0>,normal}]
    links: [<0.105.0>,<0.7.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 124
  neighbours:

=INFO REPORT==== 10-Apr-2013::21:02:00 ===
    application: egs_patch
    exited: {bad_return,
                {{egs_patch_app,start,[normal,[]]},
                 {'EXIT',
                     {undef,
                         [{cowboy,start_listener,
                              [{patch,11030},
                               10,cowboy_tcp_transport,
                               [{port,11030}],
                               egs_patch_protocol,[]],
                              []},
                          {egs_patch_app,start_listeners,1,
                              [{file,"src/egs_patch_app.erl"},{line,44}]},
                          {egs_patch_app,start,2,
                              [{file,"src/egs_patch_app.erl"},{line,31}]},
                          {application_master,start_it_old,4,
                              [{file,"application_master.erl"},
                               {line,274}]}]}}}}
    type: temporary

=CRASH REPORT==== 10-Apr-2013::21:02:00 ===
  crasher:
    initial call: application_master:init/4
    pid: <0.75.0>
    registered_name: []
    exception exit: {bad_return,
                        {{egs_app,start,[normal,[]]},
                         {'EXIT',
                             {undef,
                                 [{cowboy,start_listener,
                                      [{login,12030},
                                       10,cowboy_ssl_transport,
                                       [{port,12030},
                                        {certfile,"priv/ssl/servercert.pem"},
                                        {keyfile,"priv/ssl/serverkey.pem"},
                                        {password,"alpha"}],
                                       egs_login_protocol,[]],
                                      []},
                                  {egs_app,start_login_listeners,1,
                                      [{file,"src/egs_app.erl"},{line,55}]},
                                  {egs_app,start,2,
                                      [{file,"src/egs_app.erl"},{line,38}]},
                                  {application_master,start_it_old,4,
                                      [{file,"application_master.erl"},
                                       {line,274}]}]}}}}
      in function  application_master:init/4 (application_master.erl, line 138)
    ancestors: [<0.74.0>]
    messages: [{'EXIT',<0.76.0>,normal}]
    links: [<0.74.0>,<0.7.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 27
    reductions: 185
  neighbours:

=INFO REPORT==== 10-Apr-2013::21:02:00 ===
    application: egs
    exited: {bad_return,
                {{egs_app,start,[normal,[]]},
                 {'EXIT',
                     {undef,
                         [{cowboy,start_listener,
                              [{login,12030},
                               10,cowboy_ssl_transport,
                               [{port,12030},
                                {certfile,"priv/ssl/servercert.pem"},
                                {keyfile,"priv/ssl/serverkey.pem"},
                                {password,"alpha"}],
                               egs_login_protocol,[]],
                              []},
                          {egs_app,start_login_listeners,1,
                              [{file,"src/egs_app.erl"},{line,55}]},
                          {egs_app,start,2,
                              [{file,"src/egs_app.erl"},{line,38}]},
                          {application_master,start_it_old,4,
                              [{file,"application_master.erl"},
                               {line,274}]}]}}}}
    type: temporary 
```

以下是产生错误的文件。

egs_patch_app.erl

```
-module(egs_patch_app).

-behaviour(application).
-export([start/2, stop/1]). %% API.

-type application_start_type()
    :: normal | {takeover, node()} | {failover, node()}.

%% API.

-spec start(application_start_type(), term()) -> {ok, pid()}.
start(_Type, _StartArgs) ->
    {ok, PatchPorts} = application:get_env(patch_ports),
    start_listeners(PatchPorts),
    egs_patch_sup:start_link().

-spec stop(term()) -> ok.
stop(_State) ->
    ok.

%% Internal.

-spec start_listeners([inet:ip_port()]) -> ok.
start_listeners([]) ->
    ok;
start_listeners([Port|Tail]) ->
    {ok, _Pid} = cowboy:start_listener({patch, Port}, 10,
        cowboy_tcp_transport, [{port, Port}],
        egs_patch_protocol, []),
    start_listeners(Tail). 
```

egs_app.erl

```
-module(egs_app).
-behaviour(application).
-export([start/2, stop/1]). %% API.
-include("/home/mattk/Desktop/egs-master/apps/egs/include/records.hrl").

-type application_start_type()
    :: normal | {takeover, node()} | {failover, node()}.

-define(SSL_OPTIONS, [{certfile, "priv/ssl/servercert.pem"},
    {keyfile, "priv/ssl/serverkey.pem"}, {password, "alpha"}]).

%% API.

-spec start(application_start_type(), term()) -> {ok, pid()}.
start(_Type, _StartArgs) ->
    {ok, Pid} = egs_sup:start_link(),
    application:set_env(egs_patch, patch_ports, egs_conf:read(patch_ports)),
    application:start(egs_patch),
    start_login_listeners(egs_conf:read(login_ports)),
    {_ServerIP, GamePort} = egs_conf:read(game_server),
    {ok, _GamePid} = cowboy:start_listener({game, GamePort}, 10,
        cowboy_ssl_transport, [{port, GamePort}] ++ ?SSL_OPTIONS,
        egs_game_protocol, []),
    {ok, Pid}.

-spec stop(term()) -> ok.
stop(_State) ->
    ok.

%% Internal.

-spec start_login_listeners([inet:ip_port()]) -> ok.
start_login_listeners([]) ->
    ok;
start_login_listeners([Port|Tail]) ->
    {ok, _Pid} = cowboy:start_listener({login, Port}, 10,
        cowboy_ssl_transport, [{port, Port}] ++ ?SSL_OPTIONS,
        egs_login_protocol, []),
    start_login_listeners(Tail). 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T07:35:25.237

这是我们的提示：

```
 .....
  {{egs_patch_app,start,[normal,[]]},
      {'EXIT',
          {undef,
              [{cowboy,start_listener, ..... 
```

元组`{egs_patch_app,start,[normal,[]]}`告诉我们错误发生在`egs_patch_app:start/2`. atom`EXIT`是进程退出时发送的通知消息的标记，或者是诸如`catch error(someerror)`. 现在我们进入有趣的部分。`undef`表示尝试调用未定义的函数。如果函数的名称/Arity 不匹配任何已知函数，则该函数是未定义的。在这种情况下，未定义的函数是`cowboy:start_listener()`.

再一次，问题是 Cowboy 已经进化，而 egs 没有。Cowboy API 的重大变化使两者不兼容。由于 egs 的最后一次更改是大约一年前（假设您使用的是 essen 的分支），您可以尝试通过将相应的`rebar.config`行更改为如下内容来恢复到较旧的 Cowboy 标签：

```
{cowboy, ".*", {git, "git://github.com/extend/cowboy.git", {tag, "0.6.0"}} 
```

注意如何`"HEAD"`更改为`{tag, "0.6.0"}`. Cowboy 引用可能必须在多个应用程序中更改（至少`egs`和`egs_patch`）。您很可能需要先清除`deps/`。

* * *

Erlang 错误消息可能难以解析，但作为一般经验法则，您应该注意一些原子：

*   `case_clause`, 表示`case`表达式中没有匹配的子句。
*   `function_clause`, 表示没有函数子句与参数匹配。
*   `undef`，如上所述，这意味着无法解析对外部（不是模块本地）函数的调用。
*   `badarg`，这是 Erlang 的“非法参数”例外。
*   `badarith`，当您在算术表达式中将变量名称错误键入为原子时，有时会出现这种鬼鬼祟祟的混蛋，例如`1/x`代替`1/X`.

要了解有关 Erlang 错误处理机制的更多信息，请阅读[文档](http://www.erlang.org/doc/reference_manual/errors.html)。

# scala - 当 Play 2.1 在启动时崩溃时如何进行错误记录

> ID：15940093
> 
> 赞同：3
> 
> 时间：2013-04-11T03:14:17.437
> 
> 标签：scala, playframework-2.1

我有一个 Play 2.1 应用程序，当我有错误的数据库 url 时它不会启动。问题是，错误消息不是那么好。

```
[error] c.j.b.h.AbstractConnectionHook - Failed to obtain initial connection Sleeping for    0ms and trying again. A  ttempts left: 0\. Exception: null
Oops, cannot start the server.
Configuration error: Configuration error[Cannot connect to database [default]]
    at play.api.Configuration$.play$api$Configuration$$configError(Configuration.scala:74)
    at play.api.Configuration.reportError(Configuration.scala:552)
    at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:248)
    at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:239)
.... 
```

我希望服务器转储它在这种情况下尝试使用的数据库 url。Play 2.1 是否提供任何挂钩来在启动期间出现异常时执行代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:48:11.183

在 Play Framework 2 中，您可以通过扩展`GlobalSettings`. 具体来说，`onLoadConfig`在解析配置并建立数据库连接之前调用。

这是一个拦截错误的（hacky）示例。您可以创建一个 的假实例`Application`，然后将`Configuration`对象传递给它。然后你可以使用它来创建一个实例`BoneCPPlugin`并尝试创建一个连接。如果无法访问数据库，您将能够在 catch 块中拦截它。

```
import java.io.File
import play.api._
import play.api.db.BoneCPPlugin
import scala.util.control.NonFatal

object Global extends GlobalSettings {
  override def onLoadConfig(config: Configuration, path: File, classloader: ClassLoader, mode: Mode.Mode) = {
    val app = new DefaultApplication(path, classloader, None, mode){
        override lazy val configuration = config
    }
    try {
        new BoneCPPlugin(app).onStart()
    } catch {
        case e: PlayException =>
            // handle
        case _ => // other types of errors that we don't care about here
    }
    super.onLoadConfig(config, path, classloader, mode)
  }
} 
```

# c++ - 将副本分配给指针

> ID：15940097
> 
> 赞同：0
> 
> 时间：2013-04-11T03:14:28.427
> 
> 标签：c++, pointers, performance

所以我在使用指针和弄清楚如何有效地使用它们时遇到了一些麻烦。

假设我有一个案例，我在 while 循环中从堆栈中弹出“节点”对象，就像这样。

```
while(...) {
   Node obj = stack.top();
   stack.pop();
   //do something with the obj
} 
```

我想让它有效地运行我不应该在循环的每次迭代中创建一个新节点......所以我认为在循环外初始化一个节点指针可能更聪明：

```
Node* obj;
while(...) {
   obj = &stack.top();
   stack.pop();
   //do something with the obj
} 
```

但是，当我这样做时，obj 会被 pop 删除，因为它是一个引用......

创建副本并让指针指向副本会更有效，还是每次迭代只创建一个新节点。告诉我，如果我在这里的思考过程也偏离了基础，我现在只是想了解实现这一目标的有效方法。

编辑：这是我测试 Dijkstra 算法的一部分，我在其中搜索许多节点并且它运行缓慢，所以我试图尽可能减少运行时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:18:15.730

复制和创建指向副本的指针与您的第一个示例大致相同。要修复您的第二个示例：

```
Node* obj;
while(...) {
    obj = &stack.top();
    // do something with the obj
    stack.pop(); // do this after processing
} 
```

此外，大多数人会认为这是一种微优化。除非您的`Node`课程非常庞大，并且您已经将此特定代码段确定为瓶颈，否则您最好不要担心它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:24:59.643

这实际上取决于复制`Node`. 在您的第一个示例中，您制作了`top()`已经的副本。这样做通常就足够了。

但是，如果您发现复制 s 的成本很高*（*`Node`可能通过一些分析），您可以使用类似的东西，[`shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)这样您就可以在复制 s 后获得所有权`top()`，随后`pop()`只会`stack`删除它对 that 的所有权`Node`。*如果*您有证据表明副本是您的速度问题的根源，那么您只会初始化`shared_ptr`应该便宜得多的 s 。*`Node`*

 *如果已经分配了成员数据，并且您有一个复制此分配数据的复制构造函数，则要考虑的另一件事`Node`是，您也许可以创建一个函数，而不是复制数据，您只需窃取指向该数据的指针，考虑到`Node`无论如何，您将在之后删除该权利。在这种情况下复制分配的内存是没有意义的。

首先通过分析器运行它可能更有意义，以确定是什么导致程序变慢，它可能只是随着输入大小的缩放而自然变慢，受算法实现本身的限制。如果您不确定这是速度慢的原因，那么优化应用程序的这一特定方面可能不值得付出努力和麻烦。*

# java - 为什么 maven 项目有一个 src 文件夹，其中有两个空的子文件夹（main 和 test）

> ID：15940102
> 
> 赞同：9
> 
> 时间：2013-04-11T03:15:03.010
> 
> 标签：java, maven

我是Java世界的新手。我创建了一个简单的 java (maven) 项目，我看到了包，一切都运行良好。但是，我确实看到了一个带有两个空主文件夹和测试文件夹的 src。知道为什么吗？

![在此处输入图像描述](https://i.stack.imgur.com/fZ3W3.png)

编辑：在答案中添加更多信息下面的答案是完美的。然而，在修修补补时，我发现了一个更令人信服的原因，为什么它在 Eclipse 中显示为这样。

如果文件夹位于“Java 构建路径”中，那么这些文件夹将显示在上方的专用视图中。因此，您可以创建任何文件夹，一旦将该文件夹添加到“Java 构建路径”，该文件夹的视图就会更改。如果您从“Java 构建路径”中删除现有文件夹也是如此，那么它似乎会作为底部的普通树视图返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T03:20:20.143

文件夹不为空。看看你的 App.java 在哪里：`src/main/java/com/nuance/spring`

Eclipse 将您的内容隐藏在这个地方，因为那是上面带有特殊视图的特殊文件夹。

如果您有其他不特殊的文件夹，例如 WEB-INF，那么您会在那里看到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T03:19:32.047

如果您查看编辑器外部的目录（看起来像 eclipse），它们实际上不是空的。eclipse 为您创建了源文件夹，如上所示。src/main/java 和 src/test/java。

因此，如果您查看操作系统资源管理器中的文件夹，您应该会在其中看到文件

# iphone - REST Kit 0.10.0 - POST 不工作

> ID：15940103
> 
> 赞同：3
> 
> 时间：2013-04-11T03:15:03.870
> 
> 标签：iphone, ios, objective-c, json, restkit

我正在使用**REST Kit 0.10.0**，但无法执行`RKRequestMethodPOST`.

我的数据库名称是**dbo.Patients**，表名称是**Patient**。

它包含 3 列，例如`ID,Name,Address`

这是我的代码，

```
[[RKClient sharedClient] get:@"/Patient" delegate:self];
RKObjectMapping *venueMapping = [RKObjectMapping mappingForClass:[Venue class]];
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://175.78.1.4/MyAppTestData/MyAppDataService.svc"];

RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
objectManager.client.baseURL = baseURL;
[venueMapping mapKeyPathsToAttributes:@"ID",@"Id",@"Name",@"name",@"Address",@"midname",nil];

[objectManager.mappingProvider setMapping:venueMapping forKeyPath:@"value"];

RKObjectMapping* venueMappingS = [RKObjectMapping mappingForClass:[Venue class]];
venueMappingS.setDefaultValueForMissingAttributes = YES;

[[RKClient sharedClient] setUsername:@"sa"];
[[RKClient sharedClient] setPassword:@"123"];

RKObjectRouter *router = [[RKObjectRouter alloc] init];

[router routeClass:[Venue class] toResourcePath:@"/Patient" forMethod:RKRequestMethodPOST];

[[[RKObjectManager sharedManager] mappingProvider] setMapping:venueMappingS forKeyPath:@"value"];

[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[venueMappingS inverseMapping] forClass:[Venue class]];
[RKObjectManager sharedManager].router = router;
[RKObjectManager sharedManager].serializationMIMEType = RKMIMETypeJSON;
[RKObjectManager sharedManager].acceptMIMEType = RKMIMETypeJSON;

Venue* venue = [[Venue alloc] init];
venue.Id = 4;
venue.name = @"User1";
venue.midname =  @"Chicago";

[[RKObjectManager sharedManager] postObject:venue delegate:self]; 
```

目前它显示错误为

> W restkit.object_mapping:RKObjectMapper.m:81 添加映射错误：找不到 keyPath 的对象映射：''

这是我的**场地**课程

```
@interface Venue : NSObject

@property (strong, nonatomic) NSString *uri;
@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) NSString *midname;
@property (strong, nonatomic) NSString *lastname;
@property (strong, nonatomic) NSString *mrn;
@property (strong, nonatomic) NSString *gender;
@property (strong, nonatomic) NSString *accession;
@property (strong, nonatomic) NSDate   *dob;
@property (nonatomic) int Id;

@end 
```

对此的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:47:03.690

```
[[[RKObjectManager sharedManager] mappingProvider] setMapping:venueMappingS forKeyPath:@"value"]; 
```

将 keypath @"venue" 更改为其他内容，因为它与您的响应映​​射 keypath.ex:@"reqVenue" 匹配

或使用这个

```
 RKObjectMapping * entitySerializationMapping = [(RKObjectMapping*) [manager.mappingProvider   mappingForKeyPath: @"reqVenue"] inverseMapping];

    [manager.mappingProvider setSerializationMapping:entitySerializationMapping
                                                    forClass:[Venue class]];
[[RKObjectManager sharedManager] 
 postObject:venue
 mapResponseWith:venueMapping 
 delegate:self]; 
```

# c# - 如何自定义 asp:Button 类？

> ID：15940105
> 
> 赞同：0
> 
> 时间：2013-04-11T03:15:04.947
> 
> 标签：c#, asp.net, css

如何自定义 asp:Button 类？

这就像这样的问题：[How to set css style to asp.net button?](https://stackoverflow.com/questions/12177630/how-to-set-css-style-to-asp-net-button) 但不是真的，因为按钮是从 cs 类继承的。

我在 ASPX 文件中有这段代码：

```
<div class="buttonContainer" style="clear:both;width:100%;text-align:left">
   <asp:Button ID="btnProceed" runat="server"  Text="Next" OnClick="ProceedButton_Clicked" Enabled="true" />
</div> 
```

那么，如果我想让按钮更大或更粗的文本，我该怎么做呢？

btnProceed 在 .cs 文件中定义，如下所示：

```
 protected global::System.Web.UI.WebControls.Button btnProceed; 
```

那么，有什么方法可以继承 System.Web.UI.WebControls.Button 类并更改字体大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T03:18:52.303

您的所有服务器控件最终都会向浏览器呈现一些 HTML 标记。因此，将**CSS 类**应用到您的按钮并按照您想要的方式设置样式。您可以使用该`CssClass`属性进行设置。

```
<asp:Button ID="btnProceed" runat="server" Text="Hi" CssClass="yourClass" /> 
```

并将此样式放入您的 css 文件中，该文件包含在您的 aspx 页面中。

```
.yourClass
{
  font-size:72px;
  font-weight:bold;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:20:33.407

您可以使用此自定义按钮的任何样式

```
.buttonContainer input
{
   font-size: 14px;
   font-weight: bold;
   /**** ETC ***** /
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T03:23:31.907

您可以使用在服务器端设置字体大小`btnProceed.Font.Size = FontUnit.Point(50);`

# java - Android：下载 .html 并将其转换为字符串

> ID：15940114
> 
> 赞同：3
> 
> 时间：2013-04-11T03:15:51.543
> 
> 标签：java, android, html, string, parsing

我需要从某个 URL 下载 .html 文件。我该怎么做？以及如何将其转换为字符串？

更新：

我不知道你为什么投反对票。我可以通过仅使用一种方法在 iOS 上获得所需的结果`stringWithContentsOfURL:encoding:error:`。我建议Android也有类似的。方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T12:48:54.873

下面的代码从链接下载html页面，并在完成回调中返回转换为字符串的html页面

```
public class HTMLPageDownloader extends AsyncTask<Void, Void, String> {
    public static interface HTMLPageDownloaderListener {
        public abstract void completionCallBack(String html);
    }
    public HTMLPageDownloaderListener listener;
    public String link;
    public HTMLPageDownloader (String aLink, HTMLPageDownloaderListener aListener) {
        listener = aListener;
        link = aLink;
    }

    @Override
    protected String doInBackground(Void... params) {
        // TODO Auto-generated method stub
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet(link);
        String html = "";
        try {
            HttpResponse response = client.execute(request);
            InputStream in;
            in = response.getEntity().getContent();
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(in));
            StringBuilder str = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                str.append(line);
            }
            in.close();
            html = str.toString();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return html;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        if (!isCancelled()) {
            listener.completionCallBack(result);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T03:18:45.167

这个怎么样：

```
URL url;
InputStream is = null;
DataInputStream dis;
String line;
String out = "";

try {
    url = new URL("http://www.example.com/");
    is = url.openStream();  // throws an IOException
    dis = new DataInputStream(new BufferedInputStream(is));

    while ((line = dis.readLine()) != null) {
       out.append(line);
    }
  } catch (MalformedURLException mue) {
       mue.printStackTrace();
  } catch (IOException ioe) {
       ioe.printStackTrace();
 } finally {
     try {
        is.close();
      } catch (IOException ioe) {    
    }
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:34:44.870

您可以使用[http://jsoup.org](http://jsoup.org)库或

```
URL url = new URL("http://www.android.com/"); 
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection(); 
try { 
  InputStream in = new BufferedInputStream(urlConnection.getInputStream()); 
  readStream(in);  
}finally {
  urlConnection.disconnect();
} 
```

并将输入流转换为字符串

```
BufferedReader br = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();

String line;
while ((line = br.readLine()) != null) {
  sb.append(line);
} 

System.out.println(sb.toString());

br.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T03:20:50.177

您可以使用 HttpURLConnection、流和 ReadableByteChannel。

我觉得这有助于向连接添加请求信息。

```
try {
    URL test = new URL(/* link to your resource */);
    HttpURLConnection httpcon = (HttpURLConnection) test.openConnection();
    httpcon.addRequestProperty("User-Agent", "Mozilla/5.0");
    ReadableByteChannel rbc = Channels.newChannel(httpcon.getInputStream());
    FileOutputStream fos = new FileOutputStream(/* File output here */);
    fos.getChannel().transferFrom(rbc, 0, 1 << 24);
      fos.close();
} catch (FileNotFoundException ex) {
    ex.printStackTrace();
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

# performance - 在 codechef 上每秒执行多少次计算？

> ID：15940115
> 
> 赞同：-1
> 
> 时间：2013-04-11T03:15:59.523
> 
> 标签：performance

我们可以利用“每秒执行 1000 万次计算”的经验法则来解决一些问题。我对 codechef 使用什么机器来评估提交以及它每秒执行多少计算感兴趣？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T09:03:31.410

Codechef 使用 SPOJ 服务器。新问题使用 Cube 集群，如此处所述 - [http://www.spoj.com/clusters/](http://www.spoj.com/clusters/)。我想说它可以在 1 秒内运行 O(10^8) 次计算。
来源-： http:
[//discuss.codechef.com/questions/35098/complexity-and-execution-time](http://discuss.codechef.com/questions/35098/complexity-and-execution-time)
[http://discuss.codechef.com/questions/1544/how-many-approx-loops-are-allowed- 1 秒内限制](http://discuss.codechef.com/questions/1544/how-many-approx-loops-are-allowed-in-1-sec-lime-limit)

# iphone - 如何控制频段均衡器

> ID：15940116
> 
> 赞同：1
> 
> 时间：2013-04-11T03:16:01.420
> 
> 标签：iphone, ios, audiounit, equalizer

现在我有一些乐队：

> self.eqFrequencies=@[@32，@500，@1000，@2000，@4000，@8000，@16000]；

我想这样做：

[![](https://i.stack.imgur.com/4xhCG.jpg)](https://i.stack.imgur.com/4xhCG.jpg)
[（来源：[apple.com](http://a280.phobos.apple.com/us/r1000/082/Purple/v4/44/50/51/44505125-6fc8-66a2-4dcd-ef02362db2ea/mzl.sbrtqwvv.320x480-75.jpg)）]

我知道`kAudioUnitSubType_NBandEQ`：（一个通用的 N 波段图形均衡器，每个波段都有可指定的滤波器类型）。我需要将频率分成Wave band（范围，20 - 16000），然后控制每个Wave band的增益。

# visual-studio-2012 - Visual Studio 热键 - 切换查找上下文/位置

> ID：15940122
> 
> 赞同：1
> 
> 时间：2013-04-11T03:16:57.757
> 
> 标签：visual-studio-2012

在“查找”/“在文件中查找”命令（分别为 Ctr+F 和 Shift+Ctrl+F）中是否有切换搜索上下文/位置的热键？我说的是询问在哪里搜索当前项目、当前文档、整个解决方案等的下拉菜单。

“查找”可能是我*最常用*的功能，因为我经常使用标记和 CSS，我不能只 F12 到选择器定义或 Shift+F12 来查找用法，常规文本搜索确实是唯一的选择，我想做这个尽可能高效。

是的，我可以使用标签，但这需要 6 个标签，如果我做得很快，经常会弄错计数并过早地执行错误的搜索；所以它没有切割它。

如果没有热键，我该如何设置？Ctrl + F3 会很好用，因为 F3 是“查找下一个”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:17:29.087

我不确定 Visual Studio 中是否有一个命令可以满足您的需求。

如果有，可以在工具\选项菜单（环境\键盘）中设置快捷键。 ![键盘映射](https://i.stack.imgur.com/oSSJS.png)

在屏幕截图中，我正在搜索所有包含“find”的 VS 命令。也许其中之一就是您所需要的。

然后移动到按下快捷键文本框并选择所需的键绑定。

# java - 动作属性在 JSF 1.2 中不起作用

> ID：15940124
> 
> 赞同：2
> 
> 时间：2013-04-11T03:17:37.523
> 
> 标签：java, jsp, jsf, jsf-1.2

我正在为我的应用程序使用 JSF 1.2。

在下面的代码中，`Account Details`按钮的 action 属性不起作用，即方法没有被调用，当我单击按钮时没有任何反应。

```
<h:panelGrid columns="2">
    <h:outputLabel id="lblCustomerDetails" value="Details of CustomerId: "></h:outputLabel>
    <h:outputText id="txtCustomerId" value="#{customerInfo.customerId }"></h:outputText>
    <h:outputLabel id="lblCustomerName" value="Customer name: "></h:outputLabel>
    <h:outputText id="txtCustomerName" value="#{customerInfo.customerNAme }"></h:outputText>
    <h:outputLabel id="lblAccounts" value="Accounts: "></h:outputLabel>
    <h:selectOneMenu id="drpdownAccounts">
        <f:selectItems value="#{customerInfo.accounts }"/>
    </h:selectOneMenu>      
    <h:outputLabel id="lblEmail" value="Email: "></h:outputLabel>
    <h:outputText id="txtEmail" value="#{customerInfo.email }"></h:outputText>
    <h:outputLabel id="lblAccountDetails" value="Select an account no. for details"></h:outputLabel>
    <h:commandButton id="btnAcountDetails" value="Account Details" action="#{accountBean.accountDetails }"></h:commandButton>
    <h:messages></h:messages>
</h:panelGrid> 
```

下面是`AccountBean`：

```
public class AccountBean {

private int accountNo;
private String customerName;
private double accountBalance;
private String accountType;

    //Getters and setters

public String accountDetails(){
   //Some logic and return
       return "success"; 

}
} 
```

这是 faces-config 文件中存在的托管 bean：

```
<managed-bean>     
    <managed-bean-name>customerInfo</managed-bean-name>
    <managed-bean-class>com.bean.CustomerInfo</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>        
</managed-bean>

<managed-bean>     
    <managed-bean-name>accountBean</managed-bean-name>
    <managed-bean-class>com.bean.AccountBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>        
</managed-bean> 
```

我可能在代码中遗漏了一些愚蠢的东西，但无法弄清楚，为此浪费了很多时间，因此想到了发布。指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:32:10.777

我没有看到您拥有的全部标记，但它可能只是`<form>`您页面某处缺少的标记吗？MyFaces Trinidad 中的 AFAIK，表单控件和按钮不做任何事情，除非它们在`<tr:form>`标签内。

希望能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:53:14.720

如果在里面粘贴你的代码

```
<h:form> 
```

仍然无法解决您的问题，然后尝试使用

```
<a4j:JsFunction> 
```

它将解决 JSF 1.2 的问题

```
<h:form>
<h:commandbutton onclick = "clickme()" />
<a4j:JsFunction name = "clickme" action = "#{yourBean.YourMethod}"  /> 
</h:form> 
```

# java - Android java 意图和活动

> ID：15940125
> 
> 赞同：0
> 
> 时间：2013-04-11T03:17:38.723
> 
> 标签：java, android, xml

请耐心等待，这是我的第一个 Android 项目。

我一直在制作一个简单的 Java 类，`Event`并为它制作了 CRUD 函数。现在我正在做布局，无法弄清楚单击按钮后如何启动这些活动。这是我正在使用的代码。

活动主.xml；

```
<Button
        android:id="@+id/newEventButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="New Event" /> 
```

MainActivity.java;

```
public void addEvent(MenuItem item) {
        Intent i = new Intent(this, AddEventActivity.class);
        startActivity(i);
    } 
```

AndroidManifest.xml；

```
 <activity
        android:name="com.example.eventmanager.AddEventActivity"
        android:label="@string/title_activity_add_event" 
        android:parentActivityName="com.example.eventmanager.MainActivity" 
        android:noHistory="true">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.example.eventmanager.MainActivity" />
    </activity> 
```

我需要在这些将链接`newEventButton`到启动的部分中包含`AddEventActivity.class`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:35:10.043

您需要在 Activity 的 Java 代码中向 Button 添加一个 OnClickListener。通常您在 onCreate() 中执行此操作。

```
public class MainActivity extends Activity implements OnClickListener {
    public void onCreate(Bundle saved) {
        super.onCreate(saved);
        setContentView(R.layout.activity_main);

        Button button = (Button) findViewById(R.id.newEventButton);
        button.setOnClickListener(this);
    }

    public void onClick(View v) {
        switch(v.getId()) {
        case R.id.newEventButton:
            Intent i = new Intent(this, AddEventActivity.class);
            startActivity(i);
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:36:48.877

在您的主要活动中`onCreate`添加`setContentView` 以下代码

```
// get newEventButton    
Button addEvent = (Button) findViewById(R.id.newEventButton);
// Listen for button click and start AddEventActivity 
addEvent.setOnClickListener(new onClickListener()
{
    @Override
     public void onClick(View v)
     {
         startActivity(new Intent(this, AddEventActivity.class);
     }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T03:23:50.407

```
<activity
    android:name="com.example.eventmanager.MainActivity"
    android:label="@string/title_activity_add_event" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity>
<activity
    android:name="com.example.eventmanager.AddEventActivity"
    android:label="@string/title_activity_add_event" 
        <intent-filter>
            <action android:name="android.intent.action.ADDEVENTACTIVITY" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</activity> 
```

> 在这里你也可以这样工作

**编辑** 如果没有在 oncreate 中复制这个，你不要设置你的 onclick 监听器

```
Button b = (Button) findViewById(R.id.newEventButton);
b.setOnClickListener(new onClickListener()
{
@Override
 public void onClick(View v)
{
Intent i = new Intent("android.intent.action.ADDEVENTACTIVITY");
startActivity(i); 
 }
}); 
} 
```

# java - 加载 .jpeg 并设置为 JLabel？

> ID：15940129
> 
> 赞同：0
> 
> 时间：2013-04-11T03:17:56.993
> 
> 标签：java, image, swing, file-io, jlabel

所以我正在为课堂做这个作业。我想用 X 或 Y 图像随机填充 3x3 JLabels 的 JFrame。我从谷歌上得到了一些小图像，并将它们放在我在 Eclipse 中的 Java 项目的源文件夹中，并称它们为“X.jpeg”和“O.jpeg”。

当我只使用字符串“X”和“O”时，我得到了这个工作，但我不知道如何让图像工作。非常感谢任何建议。

好的，这就是我现在正在使用的。我正在将 Jlabel 作为图像添加到 JFrame 中！！！！

> 块引用

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

public class Chapter12_7 extends JFrame {

public static void main(String[] args) {
    Chapter12_7 frame = new Chapter12_7();
    frame.setSize(400, 400);
    frame.setTitle("Chapter12_7");
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}
public Chapter12_7(){

    BufferedImage x = ImageIO.read(new File("/X.jpeg"));
    BufferedImage o = ImageIO.read(new File("/O.jpeg"));
    JPanel p1 = new JPanel();
    p1.setLayout(new GridLayout(3, 3));
    add(p1);

    int[] ran = new int[9];

    for(int j = 0; j < 9; j++){
        ran[j] = (int) (Math.random() * 2);
    }

    for (int i = 0; i < 9; i++){
        if(ran[i] == 0){
            p1.add(new JLabel( x , JLabel.CENTER));
        }
        else
            p1.add(new JLabel( o , JLabel.CENTER));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:20:34.520

不要使用`new ImageIcon("X.jpeg");`，这假定`X.jpeg`是存在于 HD 上的文件，与您执行程序的位置相同。 `ImageIcon`如果出现问题也不会抛出任何异常，这非常烦人。

如果文件存储在 Jar 文件中，则需要`getClass().getResource("/X.jpeg")`改用。

您还应该使用`ImageIO.read`来阅读图像。如果它无法读取图像，这将（除其他外）引发异常。

查看[阅读/加载图像](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)以获取更多详细信息。

另外，我相信在 Eclipse 中，资源应该存储在 resources 文件夹中，这些会自动添加到您的应用程序 Jar 中。我不确定如果它们在您的源目录中会发生什么，因为我不使用 Eclipse。

# ios - ios - UITableView 的 cellForRowAtIndexPath 上的语法错误

> ID：15940132
> 
> 赞同：1
> 
> 时间：2013-04-11T03:18:17.397
> 
> 标签：ios, uitableview, ios6

我有 cellForRowAtIndexPath 的这个声明，但我得到一个语法错误：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

} 
```

这是错误：

```
"use of undeclared identifier tableView" 
```

但是在我有相同设置的其他控制器中，我没有收到该错误。有谁知道为什么会发生这个错误以及如何解决它？

这是屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/8L6Oj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:28:46.087

问题是您试图在方法中声明一个方法。编译器以一种混乱的方式报告了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:28:49.660

看起来花括号不匹配。**`@end`**在文件末尾之前似乎有一个额外的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T03:43:24.847

是的，您已经在方法内声明了该方法，它应该在任何方法之外。所以将该函数放在@end 之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T04:21:50.503

您在另一个方法中声明了该方法。并检查你的花括号是正确还是错误。

# sql - 使用组合框和文本框更新记录

> ID：15940135
> 
> 赞同：0
> 
> 时间：2013-04-11T03:18:41.210
> 
> 标签：sql, vb.net, winforms, combobox, textbox

这是我使用文本框和组合框更新记录的代码，但它在第 1 行下方返回错误：错误语法靠近“，”

但是当我检查我的代码时，我找不到任何错误，请帮我修改谢谢！

```
Private Sub btnUpdate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUpdate.Click
    Dim sqlconn As New SqlClient.SqlConnection
    sqlconn.ConnectionString = "server = SKPI-APPS1;" & _
    "Database = EOEMS;integrated security=true"

    Dim myCommand As SqlCommand
    Try

        ''update command
        sqlconn.Open()

        myCommand = New SqlCommand("UPDATE tblOfficeEquipmentProfile SET OE_Category = '" & cmbCategory.Text & "',OE_SubCategory = '" & cmbSubCategory.Text & "', OE_ID = '" & txtOEID.Text & "', OE_Name = '" & txtName.Text & "', OE_User = '" & txtUser.Text & "', OE_Brand = '" & cmbBrand.Text & "', OE_Model = '" & cmbModel.Text & "', OE_Specs = '" & txtSpecs.Text & "', OE_SerialNo = '" & txtSerialNo.Text & "', OE_PropertyNo = '" & txtPropertyNo.Text & "', OE_MacAddress = '" & txtMacAddress.Text & "', OE_Static_IP = '" & txtStaticIp.Text & "', OE_Vendor = '" & cmbVendor.Text & "', OE_PurchaseDate = '" & txtPurchaseDate.Text & "', OE_WarrantyInclusiveYear = '" & cmbWarrantyInclusiveYear.Text & "', OE_WarrantyStatus = '" & txtWarrantyStatus.Text & "', OE_Status = '" & txtStatus.Text & "', OE_Dept_Code = '" & cmbDeptCode.Text & "', OE_Location_Code = '" & cmbLocationCode.Text & "', OE_Remarks ='" & cmbRemarks.Text & "' WHERE OE_Category = '" & cmbCategory.Text & "',OE_SubCategory = '" & cmbSubCategory.Text & "', OE_ID = '" & txtOEID.Text & "', OE_Name = '" & txtName.Text & "', OE_User = '" & txtUser.Text & "', OE_Brand = '" & cmbBrand.Text & "', OE_Model = '" & cmbModel.Text & "', OE_Specs = '" & txtSpecs.Text & "', OE_SerialNo = '" & txtSerialNo.Text & "', OE_PropertyNo = '" & txtPropertyNo.Text & "', OE_MacAddress = '" & txtMacAddress.Text & "', OE_Static_IP = '" & txtStaticIp.Text & "', OE_Vendor = '" & cmbVendor.Text & "', OE_PurchaseDate = '" & txtPurchaseDate.Text & "', OE_WarrantyInclusiveYear = '" & cmbWarrantyInclusiveYear.Text & "', OE_WarrantyStatus = '" & txtWarrantyStatus.Text & "', OE_Status = '" & txtStatus.Text & "', OE_Dept_Code = '" & cmbDeptCode.Text & "', OE_Location_Code = '" & cmbLocationCode.Text & "', OE_Remarks ='" & cmbRemarks.Text & "'", sqlconn)
        myCommand.ExecuteNonQuery()
        MessageBox.Show("Office Equipment Profile Successfully Updated Records")
        sqlconn.Close()
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

    DisableBoxes()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:23:15.507

除了查询很弱，因为它`SQL Injection`易受`WHERE`. 您不应该使用`comma`来分隔条件，而是使用`Conditional Operator`诸如`AND / OR`. 例子，

```
WHERE OE_Category = '' AND
      OE_SubCategory = '' AND
      OE_ID = '' AND ... 
```

**更新 1**

```
Dim  updateStatement As new System.Text.StringBuilder
updateStatement.Append("UPDATE tblofficeequipmentprofile " & vbCrLf)
updateStatement.Append("SET    oe_category = @oe_category, " & vbCrLf)
updateStatement.Append("       oe_subcategory = @oe_subcategory, " & vbCrLf)
updateStatement.Append("       oe_id = @oe_id, " & vbCrLf)
updateStatement.Append("       oe_name = @oe_name, " & vbCrLf)
updateStatement.Append("       oe_user = @oe_user, " & vbCrLf)
updateStatement.Append("       oe_brand = @oe_brand, " & vbCrLf)
updateStatement.Append("       oe_model = @oe_model, " & vbCrLf)
updateStatement.Append("       oe_specs = @oe_specs, " & vbCrLf)
updateStatement.Append("       oe_serialno = @oe_serialno, " & vbCrLf)
updateStatement.Append("       oe_propertyno = @oe_propertyno, " & vbCrLf)
updateStatement.Append("       oe_macaddress = @oe_macaddress, " & vbCrLf)
updateStatement.Append("       oe_static_ip = @oe_static_ip, " & vbCrLf)
updateStatement.Append("       oe_vendor = @oe_vendor, " & vbCrLf)
updateStatement.Append("       oe_purchasedate = @oe_purchasedate, " & vbCrLf)
updateStatement.Append("       oe_warrantyinclusiveyear = @oe_warrantyinclusiveyear, " & vbCrLf)
updateStatement.Append("       oe_warrantystatus = @oe_warrantystatus, " & vbCrLf)
updateStatement.Append("       oe_status = @oe_status, " & vbCrLf)
updateStatement.Append("       oe_dept_code = @oe_dept_code, " & vbCrLf)
updateStatement.Append("       oe_location_code = @oe_location_code, " & vbCrLf)
updateStatement.Append("       oe_remarks = @oe_remarks ")

myCommand = New SqlCommand(updateStatement.ToString(), sqlconn)
myCommand.Parameters.AddWithValue("@Category", cmbCategory.Text)
myCommand.Parameters.AddWithValue("@SubCategory", cmbSubCategory.Text)
myCommand.Parameters.AddWithValue("@OE_ID", txtOEID.Text)
'' other parameters
myCommand.ExecuteNonQuery() 
```

# java - 随机生成的搜索词错误

> ID：15940137
> 
> 赞同：0
> 
> 时间：2013-04-11T03:18:50.147
> 
> 标签：java, random

我正在解决一个问题，该问题涉及我生成一定数量的数字（这里称为“Jeff”）并搜索它们，然后记录时间，以便了解使用不同的搜索算法完成任务需要多长时间。您将在下面找到我到目前为止所拥有的内容，不包括 binarySearch 算法（有效）。我发现的问题是“搜索值”每次都会出现“未找到”。

我采用了接受 Jeff 数量的数字（即用户输入）的代码，然后是用户选择的搜索词。我对其进行了更改，以便随机生成的数字将完全填满列表，但这会使搜索停止工作。或者看起来就是这样。

什么都有帮助！

谢谢！

```
public static void main(String[] args) {

    long startTime = System.nanoTime();

    int Jeff = 20;

    List<Integer> intList = new ArrayList<Integer>(Jeff);
    int searchValue = 0, index;
    int temp;

    Random generator = new Random();

    System.out.println("Entering " + Jeff + " numbers...");
    //Adds unique values up to and through Jeff
    while (intList.size() < Jeff) {
            Integer next = generator.nextInt(Jeff) + 1;
            if (!intList.contains(next))
            {
                // Done for this iteration
                intList.add(next);
            }
    }
    System.out.println("List: " + intList);

    //Adding to ArrayList
    for (int i = 0; i < intList.size(); i++) {
        temp = generator.nextInt(Jeff) + 1;
        intList.set(i,temp);
    }
    System.out.print("Enter a number to search for: ");
    searchValue = generator.nextInt(Jeff) + 1;
    System.out.println(searchValue);

    index = binarySearch(intList, searchValue);

    if (index != -1) {
        System.out.println("Found at index: " + index);
    } 
    else {
        System.out.println("Not Found");
    }

    long endTime = System.nanoTime();
    long duration1 = endTime - startTime;
    System.out.println(duration1);
    }
  static int binarySearch(List<Integer> intList, int find) {
    long startTime2 = System.nanoTime();
    int start, end, midPt;
    start = 0;
    end = intList.size() - 1;
    while (start <= end) {
        midPt = (start + end) / 2;
        if (intList.get(midPt) == find) {
            long endTime2 = System.nanoTime();
            long duration2 = endTime2 - startTime2;
            System.out.println(duration2);
            return midPt;
        } else if (intList.get(midPt) < find) {
            start = midPt + 1;
        } else {
            end = midPt - 1;
        }
    }
    long endTime2 = System.nanoTime();
    long duration2 = endTime2 - startTime2;
    System.out.println(duration2);
    return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:32:51.333

你正在用随机数填充你的列表。不幸的是，这对于二分搜索效果不佳。

例如，想象`Jeff = 5`. 添加随机数后，您的列表可能如下所示：

```
[3, 1, 5, 2, 4] 
```

现在，如果您搜索 2，您首先查看列表中点 5 的元素。由于 2 小于 5，然后您继续在列表的左半部分查找它（即`[3, 1]`）。显然，它不存在，因此您的搜索将失败。

您需要先对列表进行排序（不幸的是，这使得解决方案变得微不足道），或者选择新的搜索策略。对于排序列表上的非平凡搜索，您可以搜索不限于 的整数的排序列表`1 <= n <= Jeff`。

* * *

PS请不要将您的变量称为“杰夫”。这可能有点讨人喜欢，但也不是一个好习惯，因为它妨碍了可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:25:19.113

您确定 searchValue 在 intList 中吗？看起来应该是

```
searchValue = intList.get(generator.nextInt(intList.size())); 
```

# php - 我可以在不使用 Composer 的情况下安装 Laravel 吗？

> ID：15940140
> 
> 赞同：105
> 
> 时间：2013-04-11T03:18:56.570
> 
> 标签：php, laravel, composer-php

我想知道是否可以在任何 Web 服务器上安装或使用[Laravel](https://github.com/laravel/laravel/tree/develop) PHP 框架，而无需每次都使用[Composer （PHP 包/依赖管理器）？](http://getcomposer.org/)

我希望能够将我的应用程序放到任何 Web 服务器上（例如无法访问命令行的共享服务器）。

如果我`composer install`第一次（本地）运行，那么所有依赖项都应该存在，对吗？

那么，我应该能够将它放到任何包含所有文件（包括供应商目录）的服务器上吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-11T03:42:54.953

If you really wanted to, you could do all the work that Composer does manually, but you definitely should not. Installing Composer is easy, it's just a matter of getting the `composer.phar` file and running commands on it.

You do not need to run Composer on your server as well as locally, once you run `composer install` or `composer update` your project will have all its dependencies available and you can just upload it straight to your server.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-17T12:00:40.630

你不能在你的项目中安装没有 composer 的 laravel local。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-31T05:31:00.003

在此站点上，您可以使用 composer 构建工具下载所有可以下载的内容。但是您不需要作曲家安装。当然 laravel 也在那里：[https ://php-download.com/package/laravel/laravel](https://php-download.com/package/laravel/laravel)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-26T07:51:31.387

如果您有共享服务器并且无法安装 composer 并运行 cmd 来安装新包或更新现有包。

您可以通过在本地机器上安装 composer 并安装（前`composer require package/name`）或更新（前`composer update package/name`）所有包，然后**将您的供应商目录**与您的代码一起上传到服务器上。它会像在本地环境中一样为您工作。

**注意：**我强烈建议您使用 Laravel 和 composer，它是 laravel 的重要组成部分，您可以尝试说服您的客户端提供支持 laravel 的服务器。请检查下面的链接，您可以找到服务器要求。[https://laravel.com/docs/5.5#installation](https://laravel.com/docs/5.5#installation)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-20T13:41:49.160

如果您不想在服务器上使用composer，则必须运行composer install/update 并在本地下载所有库，然后手动将所有这些文件上传到服务器上，即供应商目录。

如果您无法使用 shh 连接到服务器的共享主机，您可能必须这样做，但是将所有文件上传到服务器上需要很多时间，所以我建议您应该作曲然后下载库通过作曲家安装/更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-23T15:35:27.070

是的，您可以先在本地主机中通过 composer 安装所有项目依赖项，然后通过 FTP 将所有文件传输到您的实际网站。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2014-12-12T23:45:10.650

只需[从 github 下载 zip 文件](https://github.com/harshalone/Laravelwithoutcomposer)并上传到您的 htdoc 和*瞧*，它将为您工作

# multithreading - WinForm 在多线程 C++/CLI 应用程序中消失

> ID：15940149
> 
> 赞同：0
> 
> 时间：2013-04-11T03:20:08.767
> 
> 标签：multithreading, winforms, c++-cli

我目前正在开发一个需要使用表单来阻止用户在几秒钟内使用主表单的应用程序。尽管在主线程上运行代码似乎没问题，但当表单首次出现时，弹出表单上的标签不会呈现大约一秒钟。我认为如果我在单独的线程上运行该表单，渲染会更加流畅。渲染现在非常流畅，渲染后表单立即消失。计时器设置为五秒钟，屏幕上的标签倒计时。这是调用新线程和表单的相关代码：

```
System::Void MainScreen::runGame(int playerTurn) {
    Thread ^ t = gcnew Thread(gcnew ThreadStart(gcnew MainScreen(),
        &MainScreen::showModalDialog));
        t->Start();
        t->Join();

        InitializeDice();
        startTimer();
}

System::Void MainScreen::showModalDialog() {
    GetReady ^ gr = gcnew GetReady();
    gr->showModalPopup();
} 
```

这是表单内的代码：

```
public:
    GetReady(void)
    {
        InitializeComponent();
    }

    System::Void showModalPopup() {
            this->Show();
            startTimer();

        }
private: System::Void timerPrep_Tick(System::Object^  sender, System::EventArgs^  e) {
         ts = ts->Subtract(TimeSpan(0, 0, 1));
         if (ts->TotalSeconds <= 0) {
             finishTimer();
         } else {
             lblTimer->Text = ts->ToString("mm\\:ss");
         }
    }

    System::Void startTimer() {
         array<String ^>^ minSec = gcnew array<String ^>(2);
         minSec = lblTimer->Text->Split(':');
         ts = gcnew TimeSpan(0, Convert::ToInt32(minSec[0]), Convert::ToInt32(minSec[1]));
         Thread::Sleep(900);
         timerPrep->Start();
     }

     System::Void finishTimer() {
         timerPrep->Stop();
         lblTimer->Text = "GO!!!";
         Thread::Sleep(900);
         this->Close();
     } 
```

我理想的解决方案是使用线程生成新表单，以便在主表单和弹出表单中的渲染都很流畅。

我尝试过的事情：

1.  将 this->Show() 移动到我能想到的所有地方。
2.  我添加了 t->Join() 以查看主线程是否试图使主窗口重新成为焦点。线程 t 仍然执行，并且计时器仍然与 Join 一起正常运行，阻止用户输入五秒钟 - 但没有任何东西可以阻止屏幕。
3.  我已经阅读了一些关于 SO 的问题，我认为最相关的是[WinForms 多线程问题](https://stackoverflow.com/questions/6851713/winforms-multithreading-issue)——尽管我觉得这对于这种情况来说可能是矫枉过正的。

如果您对我需要做些什么来为两种表单进行平滑渲染有任何想法，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:25:32.757

问题是 showModalPopup 使用*Show*方法而不是*ShowDialog*。线程启动，显示表单（它不会阻止执行），启动计时器，结束并加入主线程。创建表单的线程已经完成，winforms多线程问题就在这里。

首先启动计时器，然后使用*ShowDialog*显示模式窗口。像这样的东西：

```
System::Void showModalPopup() 
{            
   startTimer();
   this->ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T12:49:29.253

在工作线程上显示 UI 充满了陷阱和惊喜。您在这里遇到的主要问题是线程不会发送消息循环。首先需要确保窗口可以接收 Windows 消息并确保线程不会立即终止。除了 Jairo 建议使用 ShowDialog() 之外，样板解决方案是：

```
System::Void MainScreen::showModalDialog() {
    Application::Run(gcnew GetReady);
} 
```

此外，显示窗口的线程应该始终是 STA 线程。COM 的实现细节，需要让剪贴板、拖放和 shell 对话框等内容正常运行：

```
Thread ^ t = gcnew Thread(gcnew ThreadStart(this, &MainScreen::showModalDialog));
t->SetApartmentState(ApartmentState::STA);    
t->Start(); 
```

而且您通常在主线程上显示的窗口存在 Z 顺序问题。一个讨厌的习惯是你的窗口消失在主线程拥有的窗口后面。没有好的解决方案。

# c++ - 我们如何将一个 100 GB 的文件拆分为一百个 1 GB 的文件？

> ID：15940150
> 
> 赞同：10
> 
> 时间：2013-04-11T03:20:10.953
> 
> 标签：c++, c, algorithm, file, hard-drive

当我试图解决[这个](https://stackoverflow.com/questions/2566459/how-to-sort-100gb-worth-of-strings)问题时，我想到了这个问题。

我有容量为 120 GB 的硬盘，其中 100 GB 被单个大文件占用。所以 20 GB 仍然是免费的。

我的问题是，我们如何将这个巨大的文件分割成更小的文件，比如每个 1 GB？我看到如果我有大约 100 GB 的可用空间，可能使用简单的算法是可能的。但是只给 20 GB 的可用空间，我们最多可以写入 20 个 1GB 的文件。我不知道如何在读取大文件时删除它的内容。

有什么解决办法吗？

一旦我写完一个文件，似乎我必须将文件截断 1 GB，但这归结为这个问题：

是否可以截断文件的一部分？具体如何？

我想看看在 C 或 C++（最好是标准 C 和 C++）中工作*的算法（或算法大纲），***所以我可能知道较低级别的细节**。我不是在寻找可以完成这项工作的神奇函数、脚本或命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T03:35:47.037

这项工作没有标准功能。

对于 Linux，您可以使用[ftruncate](http://pubs.opengroup.org/onlinepubs/009695399/functions/ftruncate.html)方法，而对于 Windows，您可以使用[_chsize](http://msdn.microsoft.com/en-us/library/aa246710(v=VS.60).aspx)或[SetEndOfFile](http://msdn.microsoft.com/en-us/library/aa365531%28VS.85%29.aspx)。一个简单的`#ifdef`将使它跨平台。另请阅读[此](https://stackoverflow.com/questions/9727287/how-to-truncate-a-file-from-the-end-cross-platform)问答。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T03:50:30.150

根据[这个问题（部分截断流）](https://stackoverflow.com/questions/2261635/partially-truncating-a-stream-fstream-or-ofstream-in-c)，您应该能够在符合 POSIX 的系统上使用调用[`int ftruncate(int fildes, off_t length)`](http://pubs.opengroup.org/onlinepubs/009695399/functions/ftruncate.html)来调整现有文件的大小。

现代实现可能会“就地”调整文件的大小（尽管在文档中未指定）。唯一的问题是您可能需要做一些额外的工作来确保它`off_t`是 64 位类型（POSIX 标准中存在 32 位`off_t`类型的规定）。

您应该采取措施处理错误情况，以防万一它由于某种原因失败，因为显然，任何严重的失败都可能导致您的 100GB 文件丢失。

伪代码（假设并采取措施确保所有数据类型都足够大以避免溢出）：

```
open (string filename) // opens a file, returns a file descriptor
file_size (descriptor file) // returns the absolute size of the specified file
seek (descriptor file, position p) // moves the caret to specified absolute point
copy_to_new_file (descriptor file, string newname)
// creates file specified by newname, copies data from specified file descriptor
// into newfile until EOF is reached

set descriptor = open ("MyHugeFile")
set gigabyte = 2^30 // 1024 * 1024 * 1024 bytes

set filesize = file_size(descriptor)
set blocks = (filesize + gigabyte - 1) / gigabyte

loop (i = blocks; i > 0; --i)
    set truncpos = gigabyte * (i - 1)
    seek (descriptor, truncpos)
    copy_to_new_file (descriptor, "MyHugeFile" + i))
    ftruncate (descriptor, truncpos) 
```

显然，其中一些伪代码类似于标准库中的函数。在其他情况下，您将不得不自己编写。

# c++ - 如何将char [HEX]数组转换为整数？

> ID：15940152
> 
> 赞同：0
> 
> 时间：2013-04-11T03:20:17.003
> 
> 标签：c++

我有一个 char [HEX] 数组。我不知道如何将它们转换为整数。有人指导我一个想法吗？

**我的编码：**

```
char Hex[] = {'01', '0D'};

int a = (int(Hex[0]) >> 8)+ int(Hex[1]);
int b = (Hex[0] << 8) | Hex[1];

cout << "a: " << a << " b: " << b; 
```

**输出：**

```
a: 68 b: 12612 
```

我想输出应该是：

```
269 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:37:13.713

您完全缺少的是 ASCII 转换。

`'f'`是一个字符，值为 0x6f。显然，这与`0x0f`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:29:20.280

你的问题很难弄清楚。我想这就是你想要的。以下是将 15 转换为 F 和 F 转换为 15 的方法。我希望这就是您要问的

```
#include<iostream>
#include<sstream>

int main(){
  // decimal to hex
  std::cout << std::hex << 15 << std::endl;

  // hex to decimal
  int mydecimal;
  std::istringstream("f") >> std::hex >> mydecimal;
  std::cout << std::dec << mydecimal << std::endl;

  // hex to decimal method 2
  std::cout << std::dec << 0xf << std::endl;
} 
```

# ruby-on-rails - Rails 应用程序的自动配置系统

> ID：15940155
> 
> 赞同：0
> 
> 时间：2013-04-11T03:20:26.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, chef-infra, provisioning

我已经构建了一个简单的应用程序，我想出售它的访问权限。我想知道是否有任何 gem 或工具可以让我自动配置 rails 应用程序和数据库，而无需我手动触摸任何东西。

谢谢你的每一个建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:34:50.113

是的，它被称为[Heroku](https://www.heroku.com/)。这是最接近您要求的东西，而无需做任何特别的事情。

# php - codeigniter 2.1.3 htaccess 不工作

> ID：15940156
> 
> 赞同：2
> 
> 时间：2013-04-11T03:20:27.830
> 
> 标签：php, .htaccess, codeigniter

我在 ubuntu 12.10 上使用 apache2。但 htaccess 不工作，这是我的 htaccess 文件：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /ci/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule>
<IfModule mod_security.c>
   SecFilterEngine Off
   SecFilterScanPOST Off
</IfModule> 
```

```
$config['base_url'] = 'http://localhost/ci/index.php'; 
$config[‘index_page’] = “”;
$config[‘uri_protocol’]  = “AUTO”; 
```

```
1 http://localhost/ci/index.php/site/about
2 http://localhost/ci/site/about 
```

第一个工作，但我希望第二个工作任何想法如何使它工作。谢谢

```
404 Not Found
The requested URL /ci/site/about was not found on this server. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:24:44.317

**你启用了mod重写吗？**

设置您的 htaccess（示例）

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  #RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^ index.php [QSA,L]
</IfModule> 
```

在您的配置中删除 index.php

```
$config['base_url'] = ''; 
$config['index_page'] = ''; 
```

还允许在您的 apache 中覆盖 htaccess

```
/etc/apache2/sites-available/default 
```

并编辑文件并更改为

```
AllowOverride All 
```

并重新启动apache

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:38:27.900

这是我的设置的样子，我的工作就像你喜欢的那样工作：

*.htaccess*

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

*配置文件*

```
$config['index_page'] = '';
$config['base_url'] = 'http://localhost/icms/'; 
```

我认为这就是我所做的所有改变以使我的工作。

希望能帮助到你。

问候，

科布斯

# api - 通过 Cloud API 仅同步一个 Evernote 笔记本的最佳实践

> ID：15940157
> 
> 赞同：1
> 
> 时间：2013-04-11T03:20:32.690
> 
> 标签：api, evernote

我正在开发一个网络应用程序，它将仅同步用户帐户中**一个 Evernote 笔记本的内容。**我已经阅读了[Evernote 通过 EDAM 进行的 Evernote 同步](http://dev.evernote.com/media/pdf/edam-sync.pdf)。仍然想知道最佳实践是什么。

我不会同步用户帐户中的每个笔记本。一种方法是使用`NoteStore.getSyncChunk`or `NoteStore.getFilteredSyncChunk`。而另一个是使用 `NoteStore.findNotesMetadata`带有搜索词的`NoteFilter.word`集合（[搜索语法-搜索](http://dev.evernote.com/documentation/cloud/chapters/search_grammar.php#Search_Terms)词）。`updated:[datetime]`

这是我的问题：

当我第一次同步内容时，最佳做法是什么？我应该使用“同步块”还是只使用“查找笔记”。

对于进一步的同步，是否可以通过“查找笔记”同步并按更新时间过滤？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:48:14.937

在深入研究 Evernote 文档后，我找到了答案。请参阅 Evernote 网站上的[Watching for Changes](http://dev.evernote.com/documentation/cloud/chapters/polling_notification.php)，我应该使用`NoteStore.findNoteMetadata`我的初始同步并注册一个 webhook，让 Evernote 在发生更改时通知我。

毕竟，使用 Sync Chunk 进行初始同步并不能帮助我只同步一个 Evernote 笔记本。

# assembly - 汇编 8088 - 转换为十六进制

> ID：15940164
> 
> 赞同：-2
> 
> 时间：2013-04-11T03:21:02.497
> 
> 标签：assembly, x86, x86-16

我正在尝试编写汇编代码来执行文件**hexdump**，就像在 Linux`hexdump -C sample.txt`中从命令行执行 "" 时一样。我已经打开文件并将内容读入缓冲区，但我无法超越，试图将这些字节转换为十六进制。

任何帮助将不胜感激。

```
 _WRITE   = 4                !System call number for WRITE        
   _READ    = 3                !System call number for READ    
   _OPEN    = 5                !System call number for OPEN
   _EXIT    = 1                !System call number for EXIT
   _GETCHAR = 117                !System call number for GETCHAR
   _PUTCHAR = 122                !System call number for PUTCHAR
   _PRINTF  = 127                !System call number for PRINTF
   _SPRINTF = 121                !System call number for SPRINTF
   _SSCANF  = 125                !System call number for SSCANF
   _OPEN    = 5                !System call number for OPEN

   bufsiz  = 512                !bufsiz = 512

   .SECT .TEXT                !Start label
    start:     
    MOV BP, SP            !System trap instruction
    MOV CX, de-greet
    PUSH CX
    PUSH greet
    PUSH _PRINTF
    SYS
    ADD SP, 8

    CALL GetFileInput

    Byte2Hexadecimal:

    !Conversion needs to take place here

    Word2Hexadecimal:

      !From Word to Hexadecimal needs to take place here 

    GetFileInput:
    PUSH BP
    MOV BP,SP
    MOV DI, buf
    PUSH _GETCHAR

    next_char:SYS
    CMPB AL, '\n'
    STOSB
    JNE next_char
    JL 9f
    JE 1f
        MOVB (DI),0
        POP AX
        POP BP 
        RET

    PUSH 0
    PUSH buf
    PUSH _OPEN
    SYS
    CMP AX,0
    JL 9f
    MOV (fildes),AX
    MOV SI,linh+2
    MOV BX,0

     1: CALL fillbuf
    CMP CX, 0
    JLE 3f
     2: MOV        

      9: MOV SP,BP
     PUSH buf
     PUSH errmess
     PUSH _PRINTF
     SYS
     PUSH _EXIT
     PUSH _EXIT
     SYS     

    OpenFile:

    fillbuf:
    PUSH bufsiz
    PUSH buf
    PUSH (fildes)
    PUSH _READ
    SYS
    ADD SP,8
    MOV CX,AX
    ADD BX,CX
    MOV DI,buf
    RET

   .EXIT: 
    PUSH 0                !Return code
    PUSH _EXIT            !Return to OS
    SYS                !System trap instruction

    .SECT .DATA
    errmess:     .ASCIZ "Open %s failed\n"
    numfmt:         .ASCIZ "%d"
    greet:         .ASCIZ "Welcome to our program, please enter the file name: \n"
    de:         .BYTE 0

   .SECT .BSS
    linh: .SPACE 8192        !
    fildes: .SPACE 2        !Memory location for the fildes 
     byte1:    .SPACE 8        !Memory location for the Byte 
    addr:    .SPACE 8        !Memory location for the address
    word:   .BYTE  2          !Memory location for the byte 
    buf:     .SPACE 80        !Memory location for the BUFF
    buffer: .SPACE bufsiz+2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:24:25.003

没有“将字节转换为十六进制”之类的东西。实际数据是不变的，由二进制 1 和 0 组成。根据您的需要，您对这些位的解释可能会有所不同。例如，它可以解释为文本字符或十进制或十六进制或任何值。

例如：

`Binary 01010101 = decimal 85 = hexadecimal 55 = octal 125 = 'U' ASCII character`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T14:44:04.247

一个粗略而简单的实现是将字节分成两个半字节，然后将每个半字节用作十六进制字符“表”的索引。

```
; cdecl calling convention (google if you're not familiar with)

HEX_CHARSET        db '0123456789ABCDEF'

; void byteToHex(byte val, char* buffer)
proc byteToHex
    push bp
    mov bp,sp
    push di

    mov dx,[word ptr ss:bp + 4] ; the address of val
    mov di,[word ptr ss:bp + 6] ; the address of buffer

    ; high nibble first
    mov ax,dx
    mov cl,4
    shr al,cl
    push ax
    call nibbleToHex
    add sp,4
    stosb

    ; low nibble second
    mov ax,dx
    push ax
    call nibbleToHex
    add esp,4
    stosb

    pop di
    mov sp,bp
    pop bp
    ret
endp byteToHex

; char nibbleToHex(byte nibble)
proc nibbleToHex
    push bp
    mov bp,sp
    push si

    mov ax,[word ptr ss:bp + 4]
    and ax,0Fh    ; Sanitizing input param
    lea si,[ds:HEX_CHARSET]
    add si,ax
    lodsb

    pop si
    mov sp,bp
    pop bp
    ret
endp nibbleToHex 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:48:17.267

一个十六进制数字有 4 位。一个字节中有 8 位或 2 个十六进制数字。

要以十六进制显示一个字节，您需要将这两个 4 位半部分中的每一个分开，然后转换每个部分的结果值（不出所料，它将是从 0 到 2 ⁴ -1，IOW，从 0 到 15 或从0 到 0FH) 对应的 ASCII 码：

0 -> 48（或 30H 或“0”）
1 -> 49（或 31H 或“1”）
...
9 -> 57（或 39H 或“9”）

10（或 0AH）-> 65（或 41H 或“A”）
11（或 0BH）-> 66（或 42H 或“B”）
...
15（或 0FH）-> 70（或 46H 或“F”） )

将一个字节转换为两个 ASCII 字符后，您可以调用操作系统的相应 API（系统调用）来将这些字符逐个显示或显示为字符串（您可能需要在这两个字符之后附加一个零字节字符组成一个字符串）。

就这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:23:55.917

说明明确说你应该自己写这个！

 `````
; push ax  ; byte in al
; push outbuf
; call Byte2Hexadecimal
; add sp, 4

Byte2Hexadecimal:
    push bp
    mov bp, sp
    push di
    mov di, [bp + 4]  ; buffer to put it
    mov ax, [bp + 6]  ; we're only interested in al
    mov ah, al  ; make a copy
    mov cl, 4  ; ASSume literal 8086
    shr al, cl   ; isolate high nibble first
    add al, '0'  ; '0'..'9'
    cmp al, '9'  ; or...
    jbe skip
    add al, 7  ; 'A'..'F'
skip:
    stosb
    mov al, ah  ; restore our al from copy
    and al, 0Fh  ; isolate low nibble
    add al, '0'  ; etc...
    cmp al, '9'
    jbe skip2
    add al, 7
skip2:
    stosb
    pop di
    mov sp, bp
    pop bp
    ret 
```` 

`未经测试（！）......类似的东西......（可能想要零终止（或'$'终止？）你的缓冲区）。`

 `将半字节转换为十六进制 ascii 的非常短的方法

 `````
cmp al, 0Ah
sbb al, 69h
das 
```` 

`你可能不想弄清楚那个......而且`das`无论如何都是狗慢......`

 `现在：什么汇编程序？什么操作系统？````

# dojo - 运行 .html 页面时 Dojo 中的超时错误

> ID：15940170
> 
> 赞同：0
> 
> 时间：2013-04-11T03:21:52.337
> 
> 标签：dojo

我无法在浏览器的运行时克服这个错误。我有一个运行 dojo 和相关 javascript 的 html 页面，每次我尝试加载页面时，我都会在我的 Firebug 控制台中得到这个：

错误：超时 makeError()dojo.js（第 106 行） startTimer/timerId<()dojo.js（第 1500 行）

```
return mix(new Error(error), {src:"dojoLoader", info:info}); 
```

参考核心 dojo.js 库中的这一行：

```
makeError = function(error, info){
return mix(new Error(error), {src:"dojoLoader", info:info});
}, 
```

我也收到此错误：

```
Error: Could not load class 'gt.widget.HtmlContainer
[Break On This Error]   

if (eventData) 
```

在这个 html 页面的底部，出于某种原因，它在 Webstorm 中说，`attribute "data-dojo-type" is not allowed here`尽管我在我们的大多数其他 .html 文件中看到了这种设置并且它们确实运行：

```
...
    </script>
</head>
<body class="base">
    <div class="heading">Dependent Fields Data Test</div>
    <div id="container" data-dojo-type="gt.widget.HtmlContainer">
    </div>
</body>
</html> 
```

不知道为什么它会超时以及为什么加载程序有任何问题。这是 .html 页面第一部分的示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Unit Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <script type="text/javascript" src="../config-tests.js"></script>
    <script type="text/javascript" src="../../../toolkit/dojo/dojo.js"></script>
    <script type="text/javascript">
        require
        ([
            "dojo/ready",
            "dojo/on",
            "doh/runner",
            "gt/mvc/MvcInitializer",
            "gt/widget/HtmlContainer",
            "gt/util/runModeUtil",
            "gt/sub/topic",
            "gt/sub/coreTopics",
            "gt/tests/employee/employeeData"
        ], function (ready, on, runner, MvcInitializer, HtmlContainer, runModeUtil, topic, coreTopics, dependentData)
        {
            ready(function() 
            {
                var _topicHandle = null;
.... 
```

更新

现在，当我在 Firefox 中运行 .htm 页面时，我也看到了这样的错误：

对此一无所知。我从未使用过 Dojo，但这似乎很荒谬。

```
Error in parsing value for 'font'.  Declaration dropped. C:/.../js/toolkit/dojox/widget/Toaster/Toaster.css:42 
Error: [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "file:///C:/.../js/toolkit/dojo/_base/xhr.js Line: 735"] 
Error: [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "file:///C:/..../js/toolkit/dojo/_base/xhr.js Line: 735"] 
Error: [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "file:///C:/..../js/toolkit/dojo/_base/xhr.js Line: 735"] 
Error: [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "file:///C:/.../js/toolkit/dojo/_base/xhr.js Line: 735"] 
Error: [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "file:///C:/.../js/toolkit/dojo/_base/xhr.js Line: 735"] 
Error: [Exception... "Access to restricted URI denied"  code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)"  location: "file:///C:/..../js/toolkit/dojo/_base/xhr.js Line: 735"] 
Error: timeout 
src: dojoLoader 
info: [object Object] 
fileName: file:///C:/...../js/toolkit/dojo/dojo.js 
lineNumber: 106 
columnNumber: 3 
. 
Key event not available on some keyboard layouts: key="b" modifiers="accel,alt" 
```

# c# - C# AviFile: fccHandler -> 编解码器名称？

> ID：15940171
> 
> 赞同：3
> 
> 时间：2013-04-11T03:21:53.867
> 
> 标签：c#, .net, codec

希望避免使用任何第三方实用程序。正在寻找一种将`fccHandler`包含的“”代码转换或以某种方式翻译`Avi.AVICOMPRESSOPTIONS`成人类可读的编解码器名称以用于显示目的的方法。

通过大量的抓挠和盯着数字，我开始玩弄它，直到我记得读过一些关于它是 uint 代表十六进制的东西。

这可以正确转换。:)

```
 public string MakeFourCC(uint fccHandler)
        {
        string inputHex = fccHandler.ToString("X");
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i <= inputHex.Length - 2; i += 2)
            {
            sb.Append(Convert.ToString(Convert.ToChar(Int32.Parse(inputHex.Substring(i, 2),
            System.Globalization.NumberStyles.HexNumber))));
            }
        char[] array = sb.ToString().ToCharArray();
        Array.Reverse(array);
        return new string(array);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T21:02:09.233

以下代码可用于获取 FOURCC 的字符串表示形式：

```
uint fourcc = ...;
var fourccString = new string
    (
        new[]
        {
            (char)(fourcc & 0xFF),
            (char)((fourcc & 0xFF00) >> 8),
            (char)((fourcc & 0xFF0000) >> 16),
            (char)((fourcc & 0xFF000000U) >> 24)
        }
    ); 
```

要获得更用户友好的名称，您可以使用已知的 FOURCC 列表[http://www.fourcc.org/codecs.php](http://www.fourcc.org/codecs.php)

# c# - 当另一个应用程序在我的应用程序顶部打开时，如何使用 TopMost=true 关闭 winform

> ID：15940173
> 
> 赞同：0
> 
> 时间：2013-04-11T03:22:07.050
> 
> 标签：c#, winforms, .net-3.5

我有一个 C# .Net 3.5，winform（显示图形），需要作为前屏幕保持打开状态。`datagridview` `RowEnter`我在调用窗口的事件期间刷新图表。我将图形 winform 打开为`show()`，然后使用`TopMost = true`. 在我打开另一个应用程序（如 Word）之前，一切正常；图形窗口仍然保留在 Word 的前面。

当我的应用程序顶部打开另一个应用程序时，当我可以关闭打开的图形屏幕时，是否会触发应用程序事件。或者，如果您对不同的方法有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:19:08.447

对不起，但我无法理解你的问题。您设置`TopMost=true`了，下一刻您希望它隐藏在另一个应用程序后面...... ????

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:20:01.700

查看[Form.Deactivate Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.deactivate.aspx)。当表单失去焦点并且不再是活动表单时会引发它。您可以使用此事件[关闭](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx)表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-13T02:02:58.007

考虑到登录表单名称是**loginForm** ，这种解决方法是 100% 工作的。

1.  只需创建以下方法：

    ```
    private void hideLogin()
    {
        if (System.Windows.Forms.Application.OpenForms["loginForm"] != null)
        {
            System.Windows.Forms.Application.OpenForms["loginForm"].Hide();
        }
    } 
    ```

2.  通过任务调用此方法：

    ```
    Task HideLoginTask = new Task(hideLogin); 
    HideLoginTask.Start(); 
    ```

# algorithm - 最大权重欧几里得生成树

> ID：15940174
> 
> 赞同：5
> 
> 时间：2013-04-11T03:22:18.103
> 
> 标签：algorithm, graph-theory, graph-algorithm, minimum-spanning-tree, spanning-tree

通过运行 kruskal 算法可以找到最大生成树（只需更改边函数并首先考虑最大权重边）。我有兴趣找到最大权重欧几里得生成树。是否存在比 kruskal 更好的算法（更好的最坏情况运行时间）来找到这样的生成树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:00:51.327

[蒙马等人。](http://link.springer.com/article/10.1007/BF01840396)`O(n log h)`在时间和`O(n)`空间上解决这个问题，其中`n`是点的数量，`h`是凸包的大小。

该算法（论文的第 10 页）相当简单，因此即使不了解完整证明也应该可以访问它。

![最大生成树算法](https://i.stack.imgur.com/iXv7K.png)

# apache - 我真的需要关于 .htaccess 的帮助

> ID：15940178
> 
> 赞同：-1
> 
> 时间：2013-04-11T03:22:41.057
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我有点删除了我的 .htacess 上的一行

现在我无法打开 support.sitename.com

这是我的支持文件夹， **public_html/support**

但我怎样才能将其重定向到**support.sitename.com**

我写了这个，

```
 #RewriteCond %{REQUEST_URI} != support.sitename.com$ 
```

我很确定那不是我删除的代码。但它比那更接近。我遇到了大麻烦，请帮助>.<

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !/$
RewriteCond %{REQUEST_URI} !\.(jpe?g?|png|gif|css|gif|json|js)
RewriteCond %{REQUEST_URI} !^/support$
RewriteCond %{REQUEST_URI} !^/PHPMailer$
RewriteCond %{REQUEST_URI} !^/scripts$
RewriteCond %{REQUEST_URI} !/adarna.html$
RewriteCond %{REQUEST_URI} !/bh6750.html$
RewriteCond %{REQUEST_URI} !/contact-us.html$
RewriteCond %{REQUEST_URI} !/dr-holmes.html$
RewriteCond %{REQUEST_URI} !/email.php$
RewriteCond %{REQUEST_URI} !/jo-rubio.html$
RewriteCond %{REQUEST_URI} !/npk-medical.html$
RewriteCond %{REQUEST_URI} !/oraderm.html$
RewriteCond %{REQUEST_URI} !/outsource-to-philippines.html$
RewriteCond %{REQUEST_URI} !/rw-chinese.html$
RewriteCond %{REQUEST_URI} !/rw-manila.html$
>> area of code i deleted
RewriteRule (.*) / [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:44:42.323

```
# it could be
RewriteCond %{HTTP_HOST} !^support\.sitename\.com$
# or this
RewriteCond %{HTTP_HOST} !^(www\.)?support\.sitename\.com$

# or even this
RewriteCond %{HTTP_HOST} ^support\.sitename\.com$
# or this
RewriteCond %{HTTP_HOST} ^(www\.)?support\.sitename\.com$ 
```

取决于您要对代码执行什么操作以及代码上的文件名所在的位置，您未提及的位置。

*要将/support*或*/support/*重定向到*support.sitename.com*，您最好在*.htaccess*文件中使用这些条件和规则：

```
RewriteCond %{HTTP_HOST} !^(www\.)?support\.sitename\.com$
RewriteRule ^support/?$ http://support.sitename.com/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:24:49.520

试试这个代码片段

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^m\.example\.com$
RewriteRule ^ http://example.com/m%{REQUEST_URI} [L,P] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T03:55:28.993

我发现了这个：[**将 support.example.com 重定向到 example.com/support：**](http://devsforrest.com/4/htaccess-redirect-subdomain-to-a-folder)

几个不同的例子

```
#Turns the rewrite engine on.
RewriteEngine on

#Fix missing trailing slash character on folders.
RewriteRule ^([^.?]+[^.?/])$ $1/ [R,L]

#www.domain.com and domain.com will map to the folder {root}/folder1/
RewriteCond %{HTTP:Host} ^(?:www.)?domain.com$
RewriteCond %{REQUEST_URI} !^/folder1/
RewriteRule ^(.*) folder1/$1 [NC,L,NS]

#www.otherdomain.com and otherdomain.com will map to the folder {root}/folder2/
RewriteCond %{HTTP:Host} ^(?:www.)?otherdomain.com$
RewriteCond %{REQUEST_URI} !^/folder2/
RewriteRule ^(.*) folder2/$1 [NC,L,NS]

#subdomain.domain.com will map to the folder {root}/folder3/
RewriteCond %{HTTP:Host} ^(?:subdomain.domain.com)?$
RewriteCond %{REQUEST_URI} !^/folder3/
RewriteRule ^(.*) folder3/$1 [NC,L,NS] 
```

# mysql - 是否可以从另一个视图创建视图？

> ID：15940190
> 
> 赞同：10
> 
> 时间：2013-04-11T03:23:39.637
> 
> 标签：mysql, views, mysql-workbench

这可能是一个愚蠢的问题，但它是直截了当的。

是否可以从现有视图创建视图？

假设我有tableA。我从 tableA 创建 vwtableA，现在我想从 vwtableA 创建 vvVwtableA。

在伪代码中，它将类似于：

```
create view vwA as select * from tableA;
create view vwvwA as select * from vwA; 
```

这可能吗？我正在尝试这样的事情，执行语句时没有 MySQL 错误，但我无法浏览第二个视图... MySQL Workbench 一直在加载，我不知道这是否是原因。

我的 tableA 有大约 100 000 条记录，vwA 有大约 50 000 条记录，而 vwvwA 也应该有大约 50 000 条记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T03:28:23.620

是的，有可能。请参阅 MySQL[文档](http://dev.mysql.com/doc/refman/5.6/en/create-view.html)

> select_statement 是一个提供视图定义的 SELECT 语句。（当您从视图中选择时，您实际上使用 SELECT 语句进行选择。） select_statement 可以从基表**或其他视图中选择**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:26:15.680

只需复制您的第一个视图 (vwA) 并创建一个新视图 (vwvwA) 。这种方式很简单。;-)

# grand-central-dispatch - 包含后台线程的 ViewController 的删除

> ID：15940191
> 
> 赞同：0
> 
> 时间：2013-04-11T03:23:40.267
> 
> 标签：grand-central-dispatch

如果 UIViewController 运行如下所示的后台线程操作并在完成之前被释放（假设它是从 UINavigationController 弹出的），后台线程是否停止？确保后台线程完成的好方法是什么？我担心的是，如果用户在字段中输入一个值，并且在解除分配视图控制器之前数据库没有更新，那么数据库将不会更新。

```
 // Doing something on the main thread

dispatch_queue_t myQueue = dispatch_queue_create("My Queue",NULL);
dispatch_async(myQueue, ^{
    // Perform long running process

    dispatch_async(dispatch_get_main_queue(), ^{
        // Update the UI

    });
}); 

// Continue doing other stuff on the 
// main thread while process is running. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:05:13.263

不，后台线程不会停止。

这是因为 GCD 将保留该块，直到该块完成。一旦你调度你的块，你的视图控制器就变得无关紧要了。

此外，如果您引用了任何变量，无论是视图控制器本身还是定义块的方法范围的本地变量，这些变量也将被保留。

因此，即使您的视图控制器不再位于导航堆栈中，它也有可能不会被释放。

# azure - 身份验证后导航到 Dynamic CRM 主页

> ID：15940204
> 
> 赞同：0
> 
> 时间：2013-04-11T03:24:56.397
> 
> 标签：azure, dynamics-crm-2011, dynamics-crm, dynamics-crm-online

外部登录身份验证后，我需要导航到动态 CRM 主页。

[http://msdn.microsoft.com/en-us/library/hh675404.aspx](http://msdn.microsoft.com/en-us/library/hh675404.aspx)

我已经成功地检索到登录的用户详细信息，但我不知道如何从我的外部页面重定向到主页。下面是我的代码的一部分。

```
 // This statement is required to enable early-bound type support.
                organizationProxy.EnableProxyTypes();

                // Now make an SDK call with the organization service proxy.
                // Display information about the logged on user.
                Guid userid = ((WhoAmIResponse)organizationProxy.Execute(
                    new WhoAmIRequest())).UserId;
                SystemUser systemUser = organizationProxy.Retrieve("systemuser", userid,
                    new ColumnSet(new string[] { "firstname", "lastname" })).ToEntity<SystemUser>();
                Response.Write("Logged on user is {0} {1}."+
                    systemUser.FirstName+" "+ systemUser.LastName);
                Response.Redirect("https://redrocksoftware.crm5.dynamics.com/default.aspx"); 
```

Response.Redirect 导航回登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:40:36.780

你问的很奇怪。您提到的文章描述了从客户端软件检索对 CRM Web 服务的访问。但是浏览器身份验证是完全不同的事情。如果要在浏览器中进行身份验证，则应在登录窗口中输入凭据。
您可以在[这里找到一些有用的信息](https://community.dynamics.com/crm/b/crmpowerobjects/archive/2012/12/07/dynamics-crm-portal-authentication-methods.aspx#.UWZbWJNkPSc)

# qt-creator - Qwt 小部件显示在 QT 创建器中，但是当编译错误时无法打开包含文件

> ID：15940206
> 
> 赞同：0
> 
> 时间：2013-04-11T03:25:00.400
> 
> 标签：qt-creator, qwt

我将 qwt 编译为 qt creator 的安装文件中的指令`MSVC`，添加后`CONFIG +=qwt`，我得到了 qt creator 上显示的小部件，我尝试包含一些头文件，但是当我编译时，我得到了错误

> “可以打开包含文件，没有这样的文件或目录”

我所做的是：

*   我没有对***pri**文件进行任何更改
*   我对下载的 qwt 包使用 QT 5.0 commamd 提示符并键入，`qmake qwt.pro` 然后我打开 Visual Studio 2010 命令提示符（我在安装 Visual Studio 2010 EXPRESS 后得到）并键入`nmake`, `nmake install`.
*   然后回到我输入的 QT 5.0 命令提示符目录`qmake -set QMAKEFEATURES = C:\qwt-6.0.1-rc3\features`

任何帮助，将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:23:07.287

查看用于编译应用程序的命令（您在 creator 中看到的输出）并检查包含路径是否与 Qwt 相关（ CONFIG -= silent ）。

我猜你不会看到任何东西，因为它必须是：“qmake -set QMAKEFEATURES C:\qwt-6.0.1-rc3\features”。

“=”是错误的。

PS：对于 Qwt 相关问题，最好在 Qwt 支持频道上提问

# node.js - 在 node.js 中隔离模块之间的全局更改

> ID：15940207
> 
> 赞同：2
> 
> 时间：2013-04-11T03:25:01.240
> 
> 标签：node.js, global-variables

似乎如果我修改 Object.prototype，它似乎在所有模块中都是可见的。如果可以隔离这些全局更改，从而保护模块不受模块影响，那就太好*了*。

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:04:30.373

`Object.prototype`是一个对象，并且只有一个，所以在一个地方修改它会影响对该对象的所有引用（就像任何对象一样）。这通常被认为是一个好处，因为它使像[颜色](https://github.com/marak/colors.js/)这样的模块成为可能。没有必要*保护*模块免受对全局原型的更改，因为这些更改应该只是扩展。如果您或其他人的模块正在修改内置方法/属性，那么这首先可能是不好的做法。

尽管您没有给出示例，但我认为您可能想要创建本地函数（不附加到原型），或者考虑使用[继承](http://nodejs.org/api/util.html#util_util_inherits_constructor_superconstructor)来解决您对特定对象的关注。

# javascript - javascript 函数通过 javascript_include_tag 可用，但资产管道和 application.js 不可用

> ID：15940208
> 
> 赞同：4
> 
> 时间：2013-04-11T03:25:04.587
> 
> 标签：javascript, ruby-on-rails, fullcalendar, asset-pipeline

如果这已在其他地方发布，我深表歉意，但我不完全确定如何搜索这个问题。

基本上，我已经`fullcalendar.js`坐在了`app/assets/javascripts/`。在我`application.js`的文件中（当然在同一个文件夹中）我有以下内容......

```
//= require jquery
//= require jquery_ujs
//= require foundation
//= require_tree . 
```

因此，正如预期的那样，`fullcalender.js`在资产编译过程中被清扫并最终`application.js`提供给用户。

当我尝试引用在中定义的函数`fullcalendar.js`（并因此在`application.js`编译资产后定义）时，问题就出现了，它会在 firebug 的 js 控制台中抛出一个错误声明`TypeError: $(...).fullCalendar is not a function`，当然完整的日历不会呈现。

然而，现在，如果我`<%= javascript_include_tag "fullcalendar.js" %>`在所有其他脚本和样式表都被拉入之后包含在布局文件中，它就会按预期工作。

困惑，我查看了每个文件中的 js 并比较了它们，看不出有什么区别。资产管道是否发生了我不知道的事情，或者这是一些奇怪的 DOM 问题？我只是在这一点上不知道。

作为参考，这里是网站页面源中链接的`application.js`和的内容。`fullcalendar.js`我只包含了每个相关的完整日历部分，因为如果我包含所有内容，它对于 gist 或 pastebin 来说太大了。

让我感到困惑的是，两个来源都来自同一个文件，一个只是直接链接，另一个流经资产管道流程。

`application.js`- [http://pastebin.com/byyNErB8](http://pastebin.com/byyNErB8)

`fullcalendar.js`- [http://pastebin.com/k4p29YmP](http://pastebin.com/k4p29YmP)

任何见解或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:38:49.380

Maybe a dependency error. I'll suggest you to use a better practice for such lib.

1.  Put the fullcalendar scripts into `vendor/assets/javascripts`

2.  Require this script manually in application.js before the tree and after jquery and any other lib it depends.

    ```
    /=require 'fullcalendar` 
    ```

**Add**

Check the loaded Javascript files in header, if application.js is the last, you have dependency error. The lib must be there before calling it.

# plone - Dexterity RelationChoice 源路径自定义

> ID：15940214
> 
> 赞同：2
> 
> 时间：2013-04-11T03:25:41.693
> 
> 标签：plone, dexterity

我有一个 Dexterity Type 的 RelationList 字段`Info`与另一个 Type 相关`Venue`：

```
venue = RelationList(
    title=_(u'Venue'),
    value_type=RelationChoice(
        source=ObjPathSourceBinder(
            object_provides=IVenue.__identifier__,
        ),
    ),
    required=False,
) 
```

`Venue`项目是在特定文件夹 /info 中创建的，如何直接从`/info folder`而不是从`/ folder`?

![在此处输入图像描述](https://i.stack.imgur.com/F8PZR.png)

我的实例现在在 Plone 4.2.4 和 plone.app.dexterity 1.2.1 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T13:49:20.880

To limit the path of the `ObjPathSourceBinder` one could do the following:

```
[...]
source=ObjPathSourceBinder(navigtion_tree_query = {
    "object_provides":"IVenue.__identifier__",
    "path": {"query":"/my/path" }
    }
 ), 
```

or you could just add a "path" argument to your code:

```
[...]
source=ObjPathSourceBinder(
    object_provides,IVenue.__identifier__,
    path={"query":"/mysite/media"},
), 
```

The `navigation_tree_query` argument ist described [here:](https://pypi.python.org/pypi/plone.formwidget.contenttree)

# spring - 关于在 Spring JMS 中构建应用程序

> ID：15940216
> 
> 赞同：1
> 
> 时间：2013-04-11T03:26:01.617
> 
> 标签：spring, jms, spring-jms

我是这个世界的新手`Spring JMS`，我已经阅读了 manning *Spring in action*特别是`JMS`，我也浏览了这个[url](http://briansjavablog.blogspot.in/2012/09/spring-jms-tutorial-with-activemq.html)，它帮助了我很多。我还浏览了官方 spring 参考并发现了 JMS 模板, 现在我的问题是你能告诉我更多的 url 吗，这样我将构建一个小的第一个应用程序，它将数据放入队列中，另一个应用程序将从该队列中读取数据，所以我将使用`Active MQ`，请分享一些 url 和示例可以帮助我构建应用程序并探索 spring JMS 的世界。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:21:00.467

请按顺序访问这些链接：

1.  [使用spring发送jms消息](http://bsnyderblog.blogspot.com/2010/02/using-spring-jmstemplate-to-send-jms.html)
2.  [使用spring接收jms消息](http://bsnyderblog.blogspot.com/2010/02/using-spring-to-receive-jms-messages.html)
3.  [spring 调优 jms 消息消费](http://bsnyderblog.blogspot.se/2010/05/tuning-jms-message-consumption-in.html)
4.  [创建健壮的 jms 应用程序](http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS6.html)

# actionscript-3 - addChild(object) 不起作用，变量正确，x/y 已设置

> ID：15940217
> 
> 赞同：0
> 
> 时间：2013-04-11T03:26:07.083
> 
> 标签：actionscript-3, flash

由于某种原因，以下代码没有将 lv1 添加到舞台，这是舞台类并附加到舞台，两个类都是正确的（三重检查......）并且没有生成错误......

```
package  
{
    import flash.events.*;
    import flash.display.*;

    public class TankDrive extends MovieClip
    {
        public var lev1:lv1;

        public function TankDrive() 
        {
            lev1 = new lv1();
            lev1.x = 0;
            lev1.y = 0;
            addChild(lev1);
        }
    }

} 
```

此外，我检查了其他有效的代码，发现除了我四重检查的特定变量名称之外没有任何差异......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:59:16.150

在您的导入中尝试添加 lv1.as 文件，看看它是否有助于消除该空错误。

```
import flash.events.*;
import flash.display.*;
import lv1; //imports the lv1.as file

public class TankDrive extends MovieClip
    {
        public var lev1:lv1;

        public function TankDrive() 
        {
            lev1 = new lv1();
            lev1.x = 0;
            lev1.y = 0;
            addChild(lev1);
        }
    } 
```

编辑两个------------重新阅读评论后------------

> 其他类中的空行是 stage.addEventListener(KeyboardEvent.KEY_DOWN, keypush);... 我确实有 public function keypush(event:KeyboardEvent):void { } 在里面...

摆脱`stage.`并且只拥有TankDrive 中`addEventListener(KeyboardEvent.KEY_DOWN, keypush);` 的行`addChild(lev1);`已经为 lv1 的内容提供了一些访问阶段的权限，因此在 lv1 中只需编写 addChild 就足够了。

注意：对于大多数事件监听器（鼠标/计时器等）和显示对象都是如此。当您需要显式访问舞台时（尤其是对于舞台+键盘侦听器），您必须像这样设置您的 lv1.as：

1.  添加一个侦听器以检查该阶段何时可用于 lv1 内容。
2.  如果可用，则让整个舞台聆听键盘控制。

    ```
    public function lv1() {
    addEventListener(Event.ADDED_TO_STAGE, stageAvailable);
    //Your other code here...
    }

    private function stageAvailable(e:Event):void {
    trace("(LV1.AS): ADDED_TO_STAGE was successful");
    removeEventListener(Event.ADDED_TO_STAGE, stageAvailable);
    stage.addEventListener(KeyboardEvent.KEY_DOWN, keypush);
    //Your other keyboard listeners code...
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:16:43.317

您必须从 DisplayObject 继承 lev1 类或从 DisplayObject 继承的任何类（例如 Sprite、MovieClip 等）。addChild 方法只接受 DisplayObject 实例。

# django - 在我的 django 应用程序中导入 pymongo 时出错

> ID：15940220
> 
> 赞同：9
> 
> 时间：2013-04-11T03:26:38.977
> 
> 标签：django, mongodb, pymongo

我正在尝试从 django 将文档插入 mongodb，但在 pymongo 的导入语句中出现错误。我在任何地方都没有名为 pymongo 的重复文件，而且我很确定我的 virtualenv 设置正确。

```
(django-sample-app)ubuntu@django (884) ~ $ python

Python 2.7.3 (default, Aug  1 2012, 05:14:39) 

[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.

>>> import bson

>>> import pymongo

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/ubuntu/.virtualenvs/django-sample-app/local/lib/python2.7/site-packages/pymongo/__init__.py", line 80, in <module>
    from pymongo.connection import Connection
  File "/home/ubuntu/.virtualenvs/django-sample-app/local/lib/python2.7/site-packages/pymongo/connection.py", line 39, in <module>
    from pymongo.mongo_client import MongoClient
  File "/home/ubuntu/.virtualenvs/django-sample-app/local/lib/python2.7/site-packages/pymongo/mongo_client.py", line 45, in <module>
    from pymongo import (auth,
  File "/home/ubuntu/.virtualenvs/django-sample-app/local/lib/python2.7/site-packages/pymongo/database.py", line 22, in <module>
    from pymongo.collection import Collection
  File "/home/ubuntu/.virtualenvs/django-sample-app/local/lib/python2.7/site-packages/pymongo/collection.py", line 25, in <module>
    from pymongo.cursor import Cursor
  File "/home/ubuntu/.virtualenvs/django-sample-app/local/lib/python2.7/site-packages/pymongo/cursor.py", line 19, in <module>
    from bson import RE_TYPE
ImportError: cannot import name RE_TYPE 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-19T12:17:21.640

在`pip install`（在 virtualenv 中）`pymongo`和`bson`.

卸载`pymongo`并`bson`重新安装只是-它附带了与该软件包不兼容`pymongo`的自己的版本。`bson``bson`

[https://stackoverflow.com/a/12983651/196206](https://stackoverflow.com/a/12983651/196206)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-06T16:56:29.717

我已经解决了卸载 pymongo 的问题，并使用以下命令再次安装： python -m pip install pymongo

# javascript - 我需要将变量传递给我的函数

> ID：15940223
> 
> 赞同：0
> 
> 时间：2013-04-11T03:27:01.300
> 
> 标签：javascript, jquery

我相信这对你们大多数人来说很简单，但我正在努力学习这个概念。我只需要一点帮助。我已经发表了足够多的评论来解释发生了什么。谢谢！

```
//tabNavItem is an anchor link
$(tabNavItem).on("click", function(e){
    var currSlide = $(this).attr("rel");
    console.log(currSlide); // right here the value is equal to the rel of the link i click. this is correct!                   
    slideAnimation(); // i tried slideAnimation.call(currSlide) but got nothing and i tried slideAnimation(currSlide) and got 1 every time
    e.preventDefault();

});

function slideAnimation(){

    allTabs.hide();
    $(".active").removeClass("active");
    $("#" + currSlide).show();                          
    $("." + tabNavClass + " a[rel=" + currSlide + "]").addClass('active');          

    console.log(currSlide); //right now this equals 1, the rel of the first item.

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:29:39.123

您必须将函数声明为实际接受参数，如下所示：

```
function slideAnimation(currSlide){ 
```

然后您可以在调用时传递参数

```
slideAnimation(currSlide); 
```

如果您不知道，请注意 JavaScript 不会尝试确保参数的类型，并且参数不必与传递的值具有相同的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:31:07.687

```
//Add an argument here
function slideAnimation(item){
    allTabs.hide();
    $(".active").removeClass("active");
    $("#" + item).show();                          
    $("." + tabNavClass + " a[rel=" + currSlide + "]").addClass('active');          
};

//then call it like this 
$(tabNavItem).on("click", function(e){
    var currSlide = $(this).attr("rel");
    slideAnimation(currSlide);
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T03:29:21.300

提示：添加参数到`slideAnimation`：

```
function slideAnimation (currSlide){
    // snip
} 
```

# java - 如何从 Java 类调用 SOAP Web 服务？

> ID：15940234
> 
> 赞同：116
> 
> 时间：2013-04-11T03:28:41.957
> 
> 标签：java, web-services, soap, jax-ws, saaj

我对 web 服务世界比较陌生，我的研究似乎让我感到困惑而不是启发我，我的问题是我得到了一个库（jar），我必须用一些 web 服务功能扩展它。

该库将共享给其他开发人员，并且 jar 中的类将是具有调用 web 服务的方法的类（本质上设置类的属性，执行一些业务逻辑，例如将对象存储在 db 中，等，并发送回带有这些修改的对象）。我想让对这个服务的调用尽可能简单，希望尽可能简单，以便使用该类的开发人员只需要这样做。

```
Car c = new Car("Blue");
c.webmethod(); 
```

我一直在研究 JAX-WS 以在服务器上使用，但在我看来，我不需要`wsimport`在服务器或`wsimport`客户端上创建一个，因为我知道两者都有类，我只需要类之间的一些交互在服务器和客户端共享。你认为在课堂上做 web 服务和调用有什么意义？

* * *

## 回答 #1

> 赞同：279
> 
> 时间：2013-04-11T06:38:32.033

我了解您的问题归结为**如何从 Java 调用 SOAP (JAX-WS) Web 服务并获取其返回对象**。在这种情况下，您有两种可能的方法：

1.  通过Java类生成`wsimport`并使用它们；或者
2.  创建一个 SOAP 客户端：
    1.  将服务的参数序列化为 XML；
    2.  通过 HTTP 操作调用 web 方法；和
    3.  将返回的 XML 响应解析回对象。

**关于第一种方法（使用`wsimport`）：**

`wsimport`我看到您已经拥有服务（实体或其他）业务类，并且生成了一组全新的类（它们在某种程度上是您已经拥有的类的副本），这是一个事实。

不过，恐怕在这种情况下，您只能：

*   调整（编辑）`wsimport`生成的代码以使其使用**您的**业务类（这很困难，而且不知何故不值得 - 请记住，每次 WSDL 更改时，您都必须重新生成并重新调整代码）；或者
*   放弃并使用`wsimport`生成的类。（在这个解决方案中，您的业务代码可以“使用”生成的类作为来自另一个架构层的服务。）

**关于第二种方法（创建您的自定义 SOAP 客户端）：**

为了实施第二种方法，您必须：

1.  拨打电话：
    *   使用 SAAJ（SOAP with Attachments API for Java）框架（见下文，Java SE 1.6 或更高版本附带）进行调用；或者
    *   您也可以通过`java.net.HttpUrlconnection`（和一些`java.io`处理）来做到这一点。
2.  将对象转换为 XML 并从 XML 转换回来：
    *   使用诸如 JAXB 之类的 OXM（对象到 XML 映射）框架来序列化/反序列化 XML 从/到对象
    *   或者，如果必须，手动创建/解析 XML（如果接收到的对象与发送的对象只有一点点不同，这可能是最好的解决方案）。

使用经典创建 SOAP 客户端`java.net.HttpUrlConnection`并不难（但也不是那么简单），您可以在[此链接](http://www.ibm.com/developerworks/library/x-soapcl/listing1.html)中找到非常好的起始代码。

我推荐你使用 SAAJ 框架：

> **SOAP with Attachments API for Java (SAAJ)**主要用于直接处理在任何 Web 服务 API 中发生在幕后的 SOAP 请求/响应消息。它允许开发人员直接发送和接收肥皂消息，而不是使用 JAX-WS。

请参阅下面使用 SAAJ 的 SOAP Web 服务调用的工作示例（运行它！）。它调用[这个网络服务](https://www.w3schools.com/xml/tempconvert.asmx?op=CelsiusToFahrenheit)。

```
import javax.xml.soap.*;

public class SOAPClientSAAJ {

    // SAAJ - SOAP Client Testing
    public static void main(String args[]) {
        /*
            The example below requests from the Web Service at:
             https://www.w3schools.com/xml/tempconvert.asmx?op=CelsiusToFahrenheit

            To call other WS, change the parameters below, which are:
             - the SOAP Endpoint URL (that is, where the service is responding from)
             - the SOAP Action

            Also change the contents of the method createSoapEnvelope() in this class. It constructs
             the inner part of the SOAP envelope that is actually sent.
         */
        String soapEndpointUrl = "https://www.w3schools.com/xml/tempconvert.asmx";
        String soapAction = "https://www.w3schools.com/xml/CelsiusToFahrenheit";

        callSoapWebService(soapEndpointUrl, soapAction);
    }

    private static void createSoapEnvelope(SOAPMessage soapMessage) throws SOAPException {
        SOAPPart soapPart = soapMessage.getSOAPPart();

        String myNamespace = "myNamespace";
        String myNamespaceURI = "https://www.w3schools.com/xml/";

        // SOAP Envelope
        SOAPEnvelope envelope = soapPart.getEnvelope();
        envelope.addNamespaceDeclaration(myNamespace, myNamespaceURI);

            /*
            Constructed SOAP Request Message:
            <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:myNamespace="https://www.w3schools.com/xml/">
                <SOAP-ENV:Header/>
                <SOAP-ENV:Body>
                    <myNamespace:CelsiusToFahrenheit>
                        <myNamespace:Celsius>100</myNamespace:Celsius>
                    </myNamespace:CelsiusToFahrenheit>
                </SOAP-ENV:Body>
            </SOAP-ENV:Envelope>
            */

        // SOAP Body
        SOAPBody soapBody = envelope.getBody();
        SOAPElement soapBodyElem = soapBody.addChildElement("CelsiusToFahrenheit", myNamespace);
        SOAPElement soapBodyElem1 = soapBodyElem.addChildElement("Celsius", myNamespace);
        soapBodyElem1.addTextNode("100");
    }

    private static void callSoapWebService(String soapEndpointUrl, String soapAction) {
        try {
            // Create SOAP Connection
            SOAPConnectionFactory soapConnectionFactory = SOAPConnectionFactory.newInstance();
            SOAPConnection soapConnection = soapConnectionFactory.createConnection();

            // Send SOAP Message to SOAP Server
            SOAPMessage soapResponse = soapConnection.call(createSOAPRequest(soapAction), soapEndpointUrl);

            // Print the SOAP Response
            System.out.println("Response SOAP Message:");
            soapResponse.writeTo(System.out);
            System.out.println();

            soapConnection.close();
        } catch (Exception e) {
            System.err.println("\nError occurred while sending SOAP Request to Server!\nMake sure you have the correct endpoint URL and SOAPAction!\n");
            e.printStackTrace();
        }
    }

    private static SOAPMessage createSOAPRequest(String soapAction) throws Exception {
        MessageFactory messageFactory = MessageFactory.newInstance();
        SOAPMessage soapMessage = messageFactory.createMessage();

        createSoapEnvelope(soapMessage);

        MimeHeaders headers = soapMessage.getMimeHeaders();
        headers.addHeader("SOAPAction", soapAction);

        soapMessage.saveChanges();

        /* Print the request message, just for debugging purposes */
        System.out.println("Request SOAP Message:");
        soapMessage.writeTo(System.out);
        System.out.println("\n");

        return soapMessage;
    }

} 
```

关于使用 JAXB 进行序列化/反序列化，很容易找到有关它的信息。你可以从这里开始：[http](http://www.mkyong.com/java/jaxb-hello-world-example/) ://www.mkyong.com/java/jaxb-hello-world-example/ 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-18T14:32:56.887

或者只是使用[Apache CXF 的 wsdl2java](http://cxf.apache.org/docs/wsdl-to-java.html)来生成您可以使用的对象。

它包含在二进制包中，您可以从他们的网站下载。您可以简单地运行如下命令：

```
$ ./wsdl2java -p com.mynamespace.for.the.api.objects -autoNameResolution http://www.someurl.com/DefaultWebService?wsdl 
```

它使用 wsdl 生成对象，您可以像[这样](https://cxf.apache.org/docs/how-do-i-develop-a-client.html)使用它（对象名称也从 wsdl 中获取，因此您的名称会有所不同）：

```
DefaultWebService defaultWebService = new DefaultWebService();
String res = defaultWebService.getDefaultWebServiceHttpSoap11Endpoint().login("webservice","dadsadasdasd");
System.out.println(res); 
```

甚至还有一个 Maven 插件可以生成源代码：[https ://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html](https://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)

注意：如果您使用 CXF 和 IDEA 生成源代码，您可能需要查看：[https ://stackoverflow.com/a/46812593/840315](https://stackoverflow.com/a/46812593/840315)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-24T16:35:56.493

可能对将 xml 请求作为字符串的人有所帮助。如果您有 WSDL，您可以使用该 WSDL 文件在 SoapUI 中创建一个新的肥皂请求。
它将自动为输入请求生成结构/XML。

如果您有来自 SoapUI 的输入请求 xml，则可以使用以下 Java 代码的一些简单版本来调用 Soap 服务：

```
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class SimpleSoapClient {

public static void main(String args[]) throws IOException {

    String address="Hyderabad";

    /* place your xml request from soap ui below with necessary changes in parameters*/

    String xml="<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ws=\"http://www.YourUrlAsPerWsdl.com/\">\r\n" + 
                 "   <soapenv:Header/>\r\n" + 
                 "   <soapenv:Body>\r\n" + 
                 "      <ws:callRest>\r\n" + 
                 "         <name>"+"Hello"+"</name>\r\n" + 
                 "         <address>"+address+"</address>\r\n" + 
                 "      </ws:callRest>\r\n" + 
                 "   </soapenv:Body>\r\n" + 
                 "</soapenv:Envelope>";
            String responseF=callSoapService(xml);
            System.out.println(responseF);
    }

}

static String callSoapService(String soapRequest) {
    try {
     String url = "https://gogle.com/service/hello"; // replace your URL here
     URL obj = new URL(url);
     HttpURLConnection con = (HttpURLConnection) obj.openConnection();

     // change these values as per soapui request on top left of request, click on RAW, you will find all the headers
     con.setRequestMethod("POST");
     con.setRequestProperty("Content-Type","text/xml; charset=utf-8"); 
     con.setDoOutput(true);
     DataOutputStream wr = new DataOutputStream(con.getOutputStream());
     wr.writeBytes(soapRequest);
     wr.flush();
     wr.close();
     String responseStatus = con.getResponseMessage();
     System.out.println(responseStatus);
     BufferedReader in = new BufferedReader(new InputStreamReader(
     con.getInputStream()));
     String inputLine;
     StringBuffer response = new StringBuffer();
     while ((inputLine = in.readLine()) != null) {
         response.append(inputLine);
     }
     in.close();

     // You can play with response which is available as string now:
     String finalvalue= response.toString();

     // or you can parse/substring the required tag from response as below based your response code
     finalvalue= finalvalue.substring(finalvalue.indexOf("<response>")+10,finalvalue.indexOf("</response>")); */

     return finalvalue;
     } 
    catch (Exception e) {
        return e.getMessage();
    }   
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-13T01:34:58.187

我找到了一种更简单的生成肥皂消息的替代方法。给定一个 Person 对象：

```
import com.fasterxml.jackson.annotation.JsonInclude;

@JsonInclude(JsonInclude.Include.NON_NULL)
public class Person {
  private String name;
  private int age;
  private String address; //setter and getters below
} 
```

下面是一个简单的 Soap 消息生成器：

```
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import lombok.extern.slf4j.Slf4j;
import org.apache.commons.lang3.StringUtils;
import com.fasterxml.jackson.dataformat.xml.XmlMapper;

@Slf4j
public class SoapGenerator {

  protected static final ObjectMapper XML_MAPPER = new XmlMapper()
      .enable(DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_AS_NULL)
      .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)
      .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)
      .registerModule(new JavaTimeModule());

  private static final String SOAP_BODY_OPEN = "<soap:Body>";
  private static final String SOAP_BODY_CLOSE = "</soap:Body>";
  private static final String SOAP_ENVELOPE_OPEN = "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">";
  private static final String SOAP_ENVELOPE_CLOSE = "</soap:Envelope>";

  public static String soapWrap(String xml) {
    return SOAP_ENVELOPE_OPEN + SOAP_BODY_OPEN + xml + SOAP_BODY_CLOSE + SOAP_ENVELOPE_CLOSE;
  }

  public static String soapUnwrap(String xml) {
    return StringUtils.substringBetween(xml, SOAP_BODY_OPEN, SOAP_BODY_CLOSE);
  }
} 
```

您可以通过以下方式使用：

```
 public static void main(String[] args) throws Exception{
        Person p = new Person();
        p.setName("Test");
        p.setAge(12);

        String xml = SoapGenerator.soapWrap(XML_MAPPER.writeValueAsString(p));
        log.info("Generated String");
        log.info(xml);
      } 
```

# ruby-on-rails - NoMethodError - nil:NilClass 的未定义方法“用户”

> ID：15940238
> 
> 赞同：0
> 
> 时间：2013-04-11T03:28:50.737
> 
> 标签：ruby-on-rails, ruby, omniauth

我正在使用 Omniauth 尝试在我的网络应用程序上注册/登录用户。这发生在我的`AuthenticationsController#Create`方法中：

身份验证控制器：

```
class AuthenticationsController < InheritedResources::Base

  def create
    omniauth = request.env['omniauth.auth']
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:success] = "Signed in successfully"
      sign_in_and_redirect(authentication.user)
    elsif current_user
      token = omniauth['credentials'].token
      secret = omniauth['credentials'].secret
      current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'], :token => token, :secret => token_secret)
      flash[:success] = "Authentication successful"
      redirect_to authentications_url
    else
      user = User.new
      user.apply_omniauth(omniauth)
      if user.save!
        flash[:success] = "Account created"
        sign_in(authentication.user)
      else
        session[:omniauth] = omniauth.except('extra')
        redirect_to '/signup'
      end
    end
  end 
```

我最初有`sign_in(:user, authentication.user)`，但它给了我参数错误，所以我把它改成`had sign_in(authentication.user)`了上面的代码。但是，现在我得到一个`NoMethodError - undefined method 'user' for nil:NilClass`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:33:55.200

第 23 行`sign_in(authentication.user)`失败，因为您处于`if authentication`条件的 else 分支（`authentication`nil 也是如此）。您可能打算做的是调用`sign_in(user)`您刚刚在上面创建的几行的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:33:47.393

首先，您测试是否`authentication`已定义，然后在`else`块中，如果未定义，它将仅触发，您`authentication.user`出于某种原因去引用。这不可能奏效。

如果您尚未进行身份验证且未登录，则该条件似乎适用。`sign_in`在这种情况下，您为什么要使用该功能？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-26T18:28:03.500

如果您在数据库中使用一组提供者列表，请确保

```
> :provider => omniauth['provider'] 
```

例如，与数据库中的提供者匹配。如果您`facebook_Oauth2`的数据库中有并且提供者响应是`facebook`身份验证将失败。

# android - 在主/从流中切换片段

> ID：15940239
> 
> 赞同：5
> 
> 时间：2013-04-11T03:28:52.097
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在尝试使用片段创建一个具有主/详细信息流的应用程序。选择一个项目将打开一个细节片段，然后该片段可以“打开”另一个片段并将其添加到后台堆栈。

我已重命名类以帮助说明它们的作用。

```
public class ListOfDetails extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...
    }

    //Callback method indicating that an item with the given ID was selected.
    public void onItemSelected(String id) {
        // Performing logic to determine what fragment to start omitted

        if (ifTwoPanes()) {
            Fragment fragment = new DetailFragmentType1();
            getSupportFragmentManager().beginTransaction().replace(R.id.aContainer, fragment).commit();
        } else {
            Intent newIntent = new Intent(this, SinglePaneFragmentWrapper.class);
            newIntent.putExtra("id", id);
            startActivity(newIntent);
        }
    }

    // My attempt at making it possible to change displayed fragment from within fragments
    public void changeDetailFragment(Fragment fragment) {
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        transaction.addToBackStack(null);
        transaction.replace(R.id.aContainer, fragment);
        transaction.commit();
    }
} 
```

细节片段之一的示例。在不同的情况下可能会创建许多不同的片段。

```
public class DetailFragmentType1 extends Fragment {
    private ListOfDetails parent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Activity a = getActivity();
        if (a instanceof ListOfDetails) {
            parent = (ListOfDetails) a;
        }
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        Button aButton = (Button) getActivity().findViewById(R.id.aButton);
        aButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                parent.changeDetailFragment(new SubDetailFragment());
            }
        });
    }
} 
```

在电话上，包装活动用于保存片段

```
public class SinglePaneFragmentWrapper extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Duplicate logic must be performed to start fragment
        // Performing logic to determine what fragment to start omitted
        String id = getIntent().getStringExtra("id");
        if(id == "DetailFragmentType1") {
            Fragment fragment = new DetailFragmentType1();
            getSupportFragmentManager().beginTransaction().replace(R.id.aContainer, fragment).commit();
        } else {
            ...
        }
    }
} 
```

在这种情况下，更改详细信息窗格中打开的片段的正确方法是什么？我的方法在使用两个窗格时感觉像是一种 hack，甚至在仅使用一个窗格时都不起作用，因为`getParent()`SinglePaneFragmentWrapper 返回 null，使我无法调用`parent.changeDetailFragment()`.

这是一个复杂的问题，希望我解释得很好。如果我错过了什么，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T22:11:53.780

对此有很多意见和很多方法。我认为在这种情况下，问题是“谁负责更改片段？” 从表面上看，按钮上的侦听器似乎是显而易见的地方，但是片段不应该知道它所在的位置（一个症状是从 getParent() 中得到一个不受欢迎的结果，比如 null）。

在您的情况下，我建议您在父级中实现一个“侦听器”接口并从片段中“通知”。当通知父级时，它会更改片段。这样片段不会自行改变（所以不需要知道如何）..所以..对于你的情况..

添加新界面：

```
public interface FragmentChangeListener {
  void onFragmentChangeRequested(Fragment newFragment);
} 
```

在 ListOfDetails 活动中实现接口

```
public class ListOfDetails extends FragmentActivity implements FragmentChangeListener {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
}

//Callback method indicating that an item with the given ID was selected.
public void onItemSelected(String id) {
    // Performing logic to determine what fragment to start omitted

    if (ifTwoPanes()) {
        Fragment fragment = new DetailFragmentType1();
        getSupportFragmentManager().beginTransaction().replace(R.id.aContainer, fragment).commit();
    } else {
        Intent newIntent = new Intent(this, SinglePaneFragmentWrapper.class);
        newIntent.putExtra("id", id);
        startActivity(newIntent);
    }
}

// My attempt at making it possible to change displayed fragment from within fragments
public void changeDetailFragment(Fragment fragment) {
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    transaction.addToBackStack(null);
    transaction.replace(R.id.aContainer, fragment);
    transaction.commit();
}

// This is the interface implementation that will be called by your fragments
void onFragmentChangeRequested(Fragment newFragment) {
    changeDetailFragment(newFragment);
}

} 
```

向详细片段添加了侦听器

```
public class DetailFragmentType1 extends Fragment {

    private FragmentChangeListener fragmentChangeListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Actually you might not have an activity here.. you should probably be 
        // doing this in onAttach
        //Activity a = getActivity();
        //if (a instanceof ListOfDetails) {
        //    parent = (ListOfDetails) a;
        //}
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        Button aButton = (Button) getActivity().findViewById(R.id.aButton);
        aButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
               // parent.changeDetailFragment(new SubDetailFragment());
               notifyFragmentChange(new SubDetailFragment());
            }
        });
    }

    @Override
    public void onAttach(Activity activity) {
      // This is called when the fragment is attached to an activity..
      if (activity instanceof FragmentChangeListener) {
          fragmentChangeListener = (FragmentChangeListener) activity;
      } else {
         // Find your bugs early by making them clear when you can...
         if (BuildConfig.DEBUG) {
           throw new IllegalArgumentException("Fragment hosts must implement FragmentChangeListener");
         }
      }
    }

    private void notifyFragmentChange(Fragment newFragment) {
      FragmentChangeListener listener = fragmentChangeListener;
      if (listener != null) {
         listener.onFragmentChangeRequested(newFragment);
      }
    }
} 
```

并为您的单窗格活动实现相同的界面......

```
public class SinglePaneFragmentWrapper extends FragmentActivity implements FragmentChangeListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Duplicate logic must be performed to start fragment
        // Performing logic to determine what fragment to start omitted
        String id = getIntent().getStringExtra("id");
        if(id == "DetailFragmentType1") {
            Fragment fragment = new DetailFragmentType1();
            getSupportFragmentManager().beginTransaction().replace(R.id.aContainer, fragment).commit();
        } else {
            ...
        }
    }
// My attempt at making it possible to change displayed fragment from within fragments
public void changeDetailFragment(Fragment fragment) {
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    transaction.addToBackStack(null);
    transaction.replace(R.id.aContainer, fragment);
    transaction.commit();
}

// This is the interface implementation that will be called by your fragments
void onFragmentChangeRequested(Fragment newFragment) {
    changeDetailFragment(newFragment);
}

} 
```

请注意您的单窗格和多窗格活动之间的相似性。这表明您可以将所有重复的代码（changefragment 等）放入它们都扩展的单个活动中，或者它们可能是具有不同的相同活动布局...

我希望这会有所帮助，祝你好运。

问候， CJ

# java - 为Java制作BBP算法，计算第n位

> ID：15940241
> 
> 赞同：2
> 
> 时间：2013-04-11T03:29:15.790
> 
> 标签：java, algorithm, math, pi, digit

我已经开始了一个用于计算 pi 的第 n 位数字的 java 项目，并决定使用 BBP 算法。在我的输出中（在另一个类中），我遇到了一些奇怪的数学错误，我不知道它来自哪里。所以，我认为我没有正确地将算法放入代码中。

我从[http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula得到了算法](http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula)

这是我的代码：

```
import java.lang.Math;
import java.lang.Math.*;
public class Pi
{
public static double getDigit(int n, int infinity)
{   int pow = 0;
    double[] sums = new double[4];
    int tot = 0;
    int result = 0;
    double fraction = 0;
    for(int x = 0; x < 4; x++)
    {
        for(int k = 0; k < n; k++)
        {
            tot = 8 * k + 1;
            if(x == 1)
                tot += 3;
            else if(x > 1)
                tot++;
            pow = n-k;
            result = modular_pow(16, pow, tot);
            sums[x] += (double)result / (double)tot;
        }
        for(int i = n + 1; i < infinity; i++)
        {
            tot = 8 * i + 1;
            if(x == 1)
                tot += 3;
            else if(x > 1)
                tot++;
            fraction = Math.pow(16.0, (double)pow);
            sums[x] += fraction / (double)tot;
        }
    }
    return 4 * sums[0] - 2 * sums[1] - sums[2] - sums[3];
}
public static int modular_pow(int base, int exponent, int modulus)
    {
    int result = 1;
    while(exponent > 0)
    {
        if (exponent % 2 == 1)
            result = (result * base) % modulus;
        exponent--;
        base = (base * base) % modulus;
    }
    return result;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-09T05:51:07.437

首先，对删除旧帖子表示歉意，但是对于有意义地应用 BBP 算法的解释严重缺乏，所以我认为这对一些想要研究它的人来说可能仍然有用。

根据 Wikipedia 文章，您返回的结果需要去掉其整数部分（留下小数部分），然后乘以 16。这应该留下整数部分作为 pi 的第 n 个十六进制数字的表示。明天我会测试一下，看看是否有帮助。否则，很好的实施，易于理解和有效地完成。

# c# - C#中string.Empty和String.Empty的区别

> ID：15940244
> 
> 赞同：1
> 
> 时间：2013-04-11T03:29:29.973
> 
> 标签：c#, string

C# 中的 string.Empty 和 String.Empty 有什么区别？还要注意颜色不同。它们都引用或属于 System.String 类型

![在此处输入图像描述](https://i.stack.imgur.com/l4dlQ.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T03:30:12.110

这是相同的。`string`是class的**别名**`System.String`。

一些常见的别名：

```
object  ==>  System.Object
string  ==>  System.String
bool    ==>  System.Boolean
int     ==>  System.Int32
float   ==>  System.Single
double  ==>  System.Double
decimal ==>  System.Decimal
char    ==>  System.Char 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T03:32:57.677

`String.Empty`并且`string.Empty`是相同的。`String`是 BCL 类名。`string`如果您愿意，是 C#...快捷方式。与 Int32 和 int 相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T03:31:19.060

两者都是***相同***的，除了在 VS 编辑器中`string`被视为`keyword`带`Blue`颜色（默认）并且`System.String`是`Class`带颜色（默认）。`Green`

底层实现都是一样的。换句话说指向相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T03:35:51.353

在 C# 中，string 关键字是 String 的别名。因此，String 和 string 是等价的，您可以使用您喜欢的任何命名约定。String 类提供了许多安全地创建、操作和比较字符串的方法。另外，C#语言重载了一些操作符，简化了常见的字符串操作

# objective-c - 遍历嵌套的 NSDictionary

> ID：15940247
> 
> 赞同：0
> 
> 时间：2013-04-11T03:29:47.867
> 
> 标签：objective-c, recursion, plist

我知道这里有一个简单的解决方案，但我不能完全理解它。我有一个用户生成的 .plist 文件，其中可以包含（合理的）无限数量的嵌套树。我想要做的是根据 plist 的嵌套方式创建一个文件夹结构。

![.plist 示例](https://i.stack.imgur.com/ZWySp.png)

由于我不知道主字典有多深，我无法弄清楚如何循环遍历它并告诉它创建一个目录，然后潜入该目录并在其中创建目录。

我知道如何创建文件夹，它遍历整个列表是让我失望的。我很确定我需要一个单独的递归方法，只是不确定从哪里开始。键“儿童”和“名称”是我用来创建列表的。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:39:09.503

我将首先定义要在其中创建目录结构的目录的路径。然后调用该函数来构建目录结构。

```
NSString *pathToDirectory = @"./";
[self buildDirectoriesAtPath: pathToDirectory fromDictionary: dictionary]; 
```

该函数**`-buildDirectoriesAtPath:fromDictionary:`**是递归的，看起来像这样：

```
- (void) buildDirectoriesAtPath: (NSString *) filepath fromDictionary: (NSDictionary *) dictionary {

    for (NSString *key in dictionary.allKeys) {

        if ([key isEqualToString: @"Children"]) {

            NSArray *children = [dictionary objectForKey: key];
            for (id object in children) {

                if ([object isKindOfClass: [NSDictionary class]]) {
                    NSDictionary *directoryInfo = (NSDictionary *) object;
                    NSString *directoryName = [directoryInfo objectForKey: @"Name"];
                    NSString *directoryPath = [NSString stringWithFormat: @"%@%@", filepath, directoryName];

                    //  Create directory
                    NSLog(@"Creating directory: %@", directoryPath);

                    //  Create subdirectories
                    NSArray *subdirectories = [directoryInfo objectForKey: @"Children"];
                    for (id directory in subdirectories) {

                        if ([directory isKindOfClass: [NSString class]]) {
                            NSString *subdirectoryName = (NSString *) directory;
                            NSString *subdirectoryPath = [NSString stringWithFormat: @"%@/%@", directoryPath, subdirectoryName];

                            //  Create directory
                            NSLog(@"Creating directory: %@", subdirectoryPath);
                        }
                        else if ([directory isKindOfClass: [NSDictionary class]]) {
                            NSDictionary *subdirectory = (NSDictionary *) directory;
                            NSString *subdirectoryName = [subdirectory objectForKey: @"Name"];
                            NSString *subdirectoryPath = [NSString stringWithFormat: @"%@/%@/", directoryPath, subdirectoryName];

                            [self buildDirectoriesAtPath: subdirectoryPath fromDictionary: (NSDictionary *) directory];
                        }
                    }
                }
                else if ([object isKindOfClass: [NSString class]]) {
                    NSString *directoryName = (NSString *) object;
                    NSString *directoryPath = [NSString stringWithFormat: @"%@%@", filepath, directoryName];

                    //  Create directory
                    NSLog(@"Creating directory: %@", directoryPath);
                }
            }
        }
    }
} 
```

如果您有什么想澄清的，请不要犹豫。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:39:26.427

可能这个功能会帮助你，

```
void recursiveCall (NSDictionary *dictionary) {
    NSArray *_keys = [dictionary allKeys];
    for (NSString *_key in _keys) {
        id obj = [dictionary valueForKey:_key];
        NSLog(@"Create folder of %@",_key);
        if ([obj isKindOfClass:[NSArray class]]) {
            for (id _obj in obj) {
                if ([_obj isKindOfClass:[NSDictionary class]]) {
                    recursiveCall(_obj);
                }
                else {
                    NSLog(@"Create folder of %@",_obj);
                }
            }
        }

    }
} 
```

# c# - 使用 StreamWriter 后文件为空白

> ID：15940255
> 
> 赞同：2
> 
> 时间：2013-04-11T03:30:35.033
> 
> 标签：c#, windows-phone-7, streamwriter, isolatedstoragefile

我正在尝试将一些数据写入我的项目中的现有文件（项目的本地文件）。我使用了以下代码

```
 Uri path = new Uri(@"Notes.txt", UriKind.Relative);

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {

            using (StreamWriter writefile = new StreamWriter(new IsolatedStorageFileStream(path.ToString(), FileMode.Append, FileAccess.Write,myIsolatedStorage)))
            {
                writefile.WriteLine("hi");
                writefile.Flush();
                writefile.Dispose();
            }
        } 
```

执行程序时没有异常/错误。但是文件是空白的并且不包含任何数据。

我已将文件的构建操作设置为“资源”，将内容设置为“如果较新则复制”。只是为了检查，我删除了文件并进行了测试，尽管我试图以附加模式打开，但它仍然没有给出任何异常。

**编辑：**我在我的开发环境中打开文件进行检查。但是我后来使用 ISETool.exe 来检查文件。但是根本没有创建文件！这是我使用的更新代码：

```
 Uri path = new Uri(@"Notes.txt", UriKind.Relative);
 using (var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
 using (var stream = new IsolatedStorageFileStream(path.ToString(), FileMode.OpenOrCreate, FileAccess.Write, myIsolatedStorage))
 using (var writefile = new StreamWriter(stream))
        {
            writefile.WriteLine("hi");
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T03:33:59.923

**编辑**

根据您上面的评论，我认为您的问题实际上是您误解了独立存储的工作原理；它将文件存储*在您的手机*或*模拟器映像*中，这两者都不是您的开发机器的本机文件系统。

如果您需要从您的开发机器访问该文件，您将需要一个实用程序，如[Windows Phone Power Tools](http://wptools.codeplex.com/)（c/o [Alastair Pitts](https://stackoverflow.com/users/120243/alastair-pitts)，上图）或[SDK 的 isetool.exe（](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286408%28v=vs.105%29.aspx)如果您不介意命令行界面）。

**原帖**

有两件事让我跳出来：

1.  你没有处理你的`IsolatedStorageFileStream`
2.  您应该`IsolatedStorageFileStream`从`IsolatedStorageFile`
3.  你不需要打电话`Dispose`（`writefile`就是`using`这样）

尝试这个：

```
using (var isolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
using (var stream = isolatedStorage.OpenFile(path.ToString(), FileMode.Append, FileAccess.Write))
using (var writefile = new StreamWriter(stream))
{
    writefile.WriteLine("hi");
} 
```

# int - 使用 int 和 long 进行操作

> ID：15940257
> 
> 赞同：0
> 
> 时间：2013-04-11T03:31:00.433
> 
> 标签：int, long-integer

我需要得到`x%16`，其中 x 是 a `long`。我的编译器给了我错误

> “可能会丢失精度。必需：int；找到：long。”

我怎样才能解决这个问题？

编辑：哎呀，我没有意识到我可以将整个事情转换为一个 int，我认为它只能将 long 作为一个 int （这会很糟糕）来让它合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:36:33.080

您可以尝试两件事：

1.  `x % 16L`
2.  `x & 0x0000000FL`// 你不需要零；0xFL 应该可以工作。

这两种技术都可以在`long`不损失精度的情况下产生结果。如果你想要一个`int`，只需在对其进行操作之前将 x 转换为`int`，并删除 L 后缀。

# ios - iOS应用程序图标未更新

> ID：15940261
> 
> 赞同：5
> 
> 时间：2013-04-11T03:31:10.660
> 
> 标签：ios, app-store, icons

我在 App Store 上有一个应用程序。当我尝试在已经安装了我的应用程序的旧零售版本的设备上部署构建时，除非重新启动设备，否则它不会更新应用程序的图标。它只发生在固件 6.0+ 上。是否有人对它发生的原因有任何想法或有任何修复它的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:22:45.717

What I noticed seemed to work for me last night was to remove any of the files from my project and the Finder folders for the same project that sit next to the main project file. I also had different names for the older and newer ones so I removed the older ones from the plist file too both under icons and iOS 5 icons. Finally I did a Command+Shift+K to clean the project. That all seemed to do it for me on the emulator and on my iPhone I just had to reboot.

# drupal - 缩略图轮播

> ID：15940263
> 
> 赞同：0
> 
> 时间：2013-04-11T03:31:22.757
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming

我正在建立一个有照片库的网站。我正在使用颜色框在单击时显示图像。但是，我没有在屏幕上显示所有缩略图，而是想知道是否有一种方法可以以轮播效果显示它们。

例如，我有 10 个缩略图，但我想将它们放在一个小区域，一次只能看到 3 个。我希望用户能够通过缩略图向后滚动和第四次滚动，然后使用颜色框查看所选图像。

我玩过各种选项，但它们似乎都在缩略图上方显示较大的图像，而不是颜色框弹出窗口。有没有可能我错过的选项/模块？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:37:33.503

我现在没有任何代码可以给你。我可能会在几个小时内完成一些东西，但我不需要它。我会考虑使用 jQuery 来完成这项工作。你可以有一个字符串数组来表示你的图像的路径......然后你可以设置用于左、右和中心的 3 个 div 的样式，每边都有一个箭头图标。然后，您所要做的就是将 div 上的背景图像的源设置为数组中的 3 个图像，并且每次单击箭头时，您都会在数组中移动一个标记。最难的情况是单击右箭头时到达数组的末尾，单击左箭头时到达数组的开头（两者都很容易检查......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:44:50.683

签出这个模块它会有所帮助.. [http://drupal.org/project/galleryformatter](http://drupal.org/project/galleryformatter) 除了如果你喜欢[http://megadrupal.com/blog/creating-an-image-gallery-还有一个更好的画廊示例在-drupal-7](http://megadrupal.com/blog/creating-an-image-gallery-in-drupal-7)

# c - lsetxattr 和 lgetxattr 函数的使用

> ID：15940266
> 
> 赞同：0
> 
> 时间：2013-04-11T03:31:52.507
> 
> 标签：c, linux, file, function

我编写了一个简单的程序来测试 lsetxattr() 和 lgetxattr() 函数。我只是想向这个文件添加一个扩展属性，然后再次获取该值。但我无法得到预期的结果。那么使用这两种方法的正确方法是什么？谢谢！

```
#define _GNU_SOURCE
#include <ctype.h>
#include <dirent.h>
#include <errno.h>
#include <fcntl.h>
#include <getopt.h>
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <strings.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <sys/xattr.h>
#include <time.h>
#include <unistd.h>

int main()
{
    char *path = "/tmp/abc.txt";
    FILE *file = fopen(path, "w");

    int id = 101;
    if (lsetxattr(path, "user.id", &id, sizeof(int), 0) < 0)
        printf("lsetxattr wrong\n");

    int result;
    if (lgetxattr(path, "user.id", &result, sizeof(int)) != sizeof(int)) {
        printf("lgetxattr wrong\n");
    }
    printf("%d\n", result);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:01:14.470

这可能是因为您的`/tmp`挂载不支持扩展属性。查看[手册页](http://man7.org/linux/man-pages/man2/setxattr.2.html)：

```
ENOTSUP
          Extended attributes are not supported by the file system, or are
          disabled, errno is set to ENOTSUP. 
```

您可以通过将路径更改为该挂载之外的路径来验证这一点，例如在当前目录中（当然假设它在该挂载之外）：

```
char *path = "abc.txt"; 
```

假设您的其他坐骑当然支持扩展属性（这更有可能）。如果您必须在 上执行此操作`/tmp`，则必须查看一些手册以了解如何在`/tmp`(tmpfs) 上启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T07:25:18.603

看起来像两者`lsetxattr()`并默认`lgetxatter()`返回`-1`：

```
#include <errno.h>
#include <sys/xattr.h>

ssize_t
lgetxattr (const char *__path, const char *__name,
           void *__value, size_t __size)
{
  __set_errno (ENOSYS);
  return -1;
}

stub_warning (lgetxattr)
#include <stub-tag.h> 
```

我在 glibc 的源代码中找到了这个：[lgetxattr.c](https://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/generic/lgetxattr.c;h=6adf1fdf046d25d71b4383c64e12074e823602f6;hb=c0ad824e402c7afde1b46be1620c70107aa3eda9#l19)和[lsetxattr.c](https://sourceware.org/git/?p=glibc.git;a=blob;f=misc/lsetxattr.c;h=09e19cd0861a907327e63d71330a1cf4c5cb1bbb;hb=HEAD)

# swing - 从 scala 访问 java.awt.Container.getComponents

> ID：15940276
> 
> 赞同：0
> 
> 时间：2013-04-11T03:33:06.693
> 
> 标签：swing, unit-testing, scala

我正在尝试为一个用swing 用scala 编写的gui 应用程序编写自动化测试。我正在改编[这篇文章](http://www.javaworld.com/javaworld/jw-11-2004/jw-1115-swing.html?page=2)中的代码，它利用[getName()](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getName%28%29)在树中找到正确的 ui 元素。

这是我的代码的独立版本。它不完整，未经测试，并且可能以各种方式损坏和/或非惯用和/或次优，但我的问题是关于下面列出的编译器错误。

```
import scala.swing._
import java.awt._
import ListView._

import org.scalatest.junit.JUnitRunner
import org.junit.runner.RunWith
import org.scalatest.FunSpec
import org.scalatest.matchers.ShouldMatchers

object MyGui extends SimpleSwingApplication {
  def top = new MainFrame {
    title = "MyGui"

    val t = new Table(3, 3)
    t.peer.setName("my-table")
    contents = t
  }
}

object TestUtils {
  def getChildNamed(parent: UIElement, name: String): UIElement = {
    // Debug line
    println("Class: " + parent.peer.getClass() +
            " Name: " + parent.peer.getName())

    if (name == parent.peer.getName()) { return parent }

    if (parent.peer.isInstanceOf[java.awt.Container]) {

      val children = parent.peer.getComponents()
      /// COMPILER ERROR HERE   ^^^

      for (child <- children) {
        val matching_child = getChildNamed(child, name)
        if (matching_child != null) { return matching_child }
      }
    }

    return null
  }
}

@RunWith(classOf[JUnitRunner])
class MyGuiSpec extends FunSpec {
  describe("My gui window") {
    it("should have a table") {
      TestUtils.getChildNamed(MyGui.top, "my-table")
    }
  }
} 
```

当我编译这个文件时，我得到：

```
29: error: value getComponents is not a member of java.awt.Component
      val children = parent.peer.getComponents()
                                 ^
one error found 
```

[据我所知](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getComponents%28%29)，getComponents 实际上是 java.awt.Component 的成员。我使用[这个答案中的代码](https://stackoverflow.com/a/1976362/67022)来转储方法`parent.peer`，我可以看到 getComponents 在列表中。

欢迎提供另一种解决问题的方法（以类似方式进行自动 gui 测试）的答案，但我真的很想了解为什么我无法访问 getComponents。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:27:01.153

问题是您正在查看两个不同的课程。您的 javadoc 链接指向`java.awt.Container`，它确实有`getComponents`方法。另一方面，编译器正在寻找由返回`getComponents`的`java.awt.Component`（父类），但`parent.peer`找不到。

而不是`if (parent.peer.isInstanceOf[java.awt.Container]) ...`，您可以验证 parent.peer 的类型并将其转换为：

```
parent.peer match {
      case container: java.awt.Container =>
         // the following works because container isA Container
         val children = container.getComponents
        // ...
      case _ => // ...
} 
```

# python - 如何使用 emacs tramp 编辑远程 python 文件？

> ID：15940277
> 
> 赞同：0
> 
> 时间：2013-04-11T03:33:06.787
> 
> 标签：python, emacs, tramp

我已经在我的emacs上正确安装了tramp。我可以使用它来编辑远程 txt 文件，但是，一旦我在远程主机上创建 *.py 文件并对其进行编辑，在我输入 2 个字母后，整个 emacs 冻结，它没有响应。谁能给我一些关于这个问题的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:32:11.393

我发现了我的错误。Tramp 似乎与 python 的自动完成包之一不兼容，我将其删除。然后流浪汉运作良好。

# javascript - 将 onClicked 处理程序添加到浏览器操作而不弹出？

> ID：15940278
> 
> 赞同：3
> 
> 时间：2013-04-11T03:33:08.467
> 
> 标签：javascript, google-chrome-extension

我开始使用 Chrome 扩展程序。

我的扩展有 2 个`content_scripts`在页面加载时执行。我想`onClicked`从这些 JS 文件之一中为我的浏览器操作添加一个处理程序。

基本上我想做的是，[`chrome.browserAction.onClicked.addListener`](http://developer.chrome.com/extensions/browserAction.html)但我读过一个类似的问题，这只能在弹出的 html 文件中工作。我没有使用弹出文件，因为我目前不需要，而且我需要我的 JS 在全局范围内运行（就像没有`default_popup`.

这是我的`manifest.json`：

```
{
  "manifest_version": 2,

  "name": "Foo",
  "description": "Foo description.",
  "version": "0.0.0.1",
  "permissions":[
    "tabs", "http://*/*", "https://*/*"
  ],
  "browser_action": {
    "default_icon": "icon.png"
  },
  "content_scripts": [
    {
      "matches": ["http://*/*", "https://*/*"],
      "js": ["jquery1.9.1.min.js", "foo.js"]
    }
  ]
} 
```

对不起，但我的谷歌搜索技能找不到如何做到这一点。有没有办法将`onClicked`处理程序附加到我的浏览器操作，或者我需要一个 html 弹出窗口吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T03:45:43.897

决定将我过长的评论移至答案。

如果您定义了一个弹出窗口，则该`onClicked`事件永远不会被触发，但没有它它就可以正常工作。只需将处理程序弹出到您的背景页面，它应该可以正常工作。请注意`chrome.browserAction`，和几乎所有其他`chrome.*`API 一样，无法从 a 访问`content script`，因此您需要使用 a[`background`](http://developer.chrome.com/extensions/background_pages.html)或[`event`](http://developer.chrome.com/extensions/event_pages.html)页面。

# python - 如何在 Python 中获取 UTC 时间？

> ID：15940280
> 
> 赞同：182
> 
> 时间：2013-04-11T03:33:34.253
> 
> 标签：python, datetime

我在 StackExchange 上搜索了一堆解决方案，但没有什么能完全满足我的需要。在 JavaScript 中，我使用以下方法计算自 1970 年 1 月 1 日以来的 UTC 时间：

```
function UtcNow() {
    var now = new Date();
    var utc = Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());
    return utc;
} 
```

等效的 Python 代码是什么？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2013-04-11T03:35:52.180

试试这个使用[datetime.utcnow()](http://docs.python.org/2/library/datetime.html#datetime.datetime.utcnow)的代码：

```
from datetime import datetime
datetime.utcnow() 
```

出于您的目的，当您需要计算两个日期之间花费的时间量时，您所需要的只是减去结束日期和开始日期。这种减法的结果是一个[timedelta 对象。](http://docs.python.org/2/library/datetime.html#timedelta-objects)

来自 python 文档：

```
class datetime.timedelta([days[, seconds[, microseconds[, milliseconds[, minutes[, hours[, weeks]]]]]]]) 
```

这意味着默认情况下，您可以获得定义中提到的任何字段 - 天、秒、微秒、毫秒、分钟、小时、周。timedelta 实例也有 total_seconds() 方法：

> 返回持续时间中包含的总秒数。等效于 (td.microseconds + (td.seconds + td.days * 24 * 3600) * 10* *6) / 10* *6 在启用真除法的情况下计算。

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2019-10-08T22:34:50.997

仅简单的标准库。提供时区感知的日期时间，不像`datetime.utcnow()`.

```
from datetime import datetime,timezone
now_utc = datetime.now(timezone.utc) 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-04-11T03:36:09.493

以最接近原件的形式：

```
import datetime

def UtcNow():
    now = datetime.datetime.utcnow()
    return now 
```

如果您需要知道 1970-01-01 而不是本机 Python 的秒数`datetime`，请改用：

```
return (now - datetime.datetime(1970, 1, 1)).total_seconds() 
```

Python 的命名约定与您在 Javascript 中可能使用的命名约定不一致，请参阅[PEP 8](https://www.python.org/dev/peps/pep-0008/#function-names)。此外，一个简单地返回另一个函数结果的函数是相当愚蠢的。如果只是为了使其更易于访问，您可以通过简单地分配来为函数创建另一个名称。上面的第一个示例可以替换为：

```
utc_now = datetime.datetime.utcnow 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-09-03T08:56:59.237

```
import datetime
import pytz

# datetime object with timezone awareness:
datetime.datetime.now(tz=pytz.utc)

# seconds from epoch:
datetime.datetime.now(tz=pytz.utc).timestamp() 

# ms from epoch:
int(datetime.datetime.now(tz=pytz.utc).timestamp() * 1000) 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-02-25T16:05:38.183

## 零外部依赖的时区感知：

```
from datetime import datetime, timezone

def utc_now():
    return datetime.utcnow().replace(tzinfo=timezone.utc) 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-03-21T17:19:24.117

从 datetime.datetime 您已经可以使用 strftime 方法导出到时间戳。按照您的功能示例：

```
import datetime
def UtcNow():
    now = datetime.datetime.utcnow()
    return int(now.strftime("%s")) 
```

如果您想要微秒，您需要更改导出字符串并转换为浮动，如：`return float(now.strftime("%s.%f"))`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2021-02-19T06:41:59.493

您可以使用`datetime`库来获取 UTC 时间，甚至是当地时间。

```
import datetime

utc_time = datetime.datetime.utcnow() 
print(utc_time.strftime('%Y%m%d %H%M%S')) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-08-28T14:14:15.727

为什么所有回复都基于日期时间而不是时间？我认为是简单的方法！

```
import time
nowgmt = time.strftime("%Y-%m-%d %H:%M:%S", time.gmtime())
print(nowgmt) 
```

# sql - 跨 4 个表的 Oracle SQL 疯狂子查询

> ID：15940286
> 
> 赞同：-2
> 
> 时间：2013-04-11T03:34:00.097
> 
> 标签：sql, oracle, subquery

以下是关系：

```
CREATE TABLE employee (
  fname    varchar2(15) not null, 
  minit    varchar2(1),
  lname    varchar2(15) not null,
  ssn      char(9),
  bdate    date,
  address  varchar2(30),
  sex      char,
  salary   number(10,2),
  superssn char(9),
  dno      number(4),
  primary key (ssn),
  foreign key (superssn) references employee(ssn),
  foreign key (dno) references department(dnumber)
);

CREATE TABLE department (
  dname        varchar2(15) not null,
  dnumber      number(4),
  mgrssn       char(9) not null, 
  mgrstartdate date,
  primary key (dnumber),
  unique (dname),
  foreign key (mgrssn) references employee(ssn)
);

CREATE TABLE dept_locations (
  dnumber   number(4),
  dlocation varchar2(15), 
  primary key (dnumber,dlocation),
  foreign key (dnumber) references department(dnumber)
);

CREATE TABLE project (
  pname      varchar2(15) not null,
  pnumber    number(4),
  plocation  varchar2(15),
  dnum       number(4) not null,
  primary key (pnumber),
  unique (pname),
  foreign key (dnum) references department(dnumber)
);

CREATE TABLE works_on (
  essn   char(9),
  pno    number(4),
  hours  number(4,1),
  primary key (essn,pno),
  foreign key (essn) references employee(ssn),
  foreign key (pno) references project(pnumber)
); 
```

问：查找在休斯顿从事至少一个项目但其部门在休斯顿没有办公地点的所有员工的姓名和地址。

这是我的查询：

```
select fname, minit, lname, address
from employee
where dno=
(select dnumber from dept_locations where dlocation<>'Houston' and dnumber=
(select dno from employee where ssn=
(select essn from works_on where pno=
(select pnumber from project where plocation='Houston')))) 
```

但它没有编译并返回此错误：

```
 ORA-01427: single-row subquery returns more than one row 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:11:47.567

```
select
  fname,
  minit,
  lname,
  address
from
  employee
where
  exists (
    select null
    from   works_on join project on (works_on.pno = project.pnumber)
    where  works_on.essn  = employee.ssn and
           not exists (
             select null
             from   dept_locations
             where  dept_locations.dlocation = project.plocation)) 
```

其他的建议：

1.  表和列命名缺乏一致性是非常烦人的。DNO 和 DNUMBER？
2.  使用社会安全号码作为键值是一个愚蠢的错误。这很愚蠢，因为人们的 SSN 是私有的，应该受到保护，这是一个错误，因为它不是一成不变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:38:02.420

```
select fname, minit, lname, address
from employee
where dno in
(select dnumber from dept_locations where dlocation<>'Houston') and ssn in
(select essn from works_on where pno in
(select pnumber from project where plocation='Houston')))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T03:38:36.453

您的调用 "where dno=" 需要一个结果。

尝试

```
 where dno in (select...) 
```

# java - IllegalStateException：ArrayAdapter 要求资源 ID 为 TextView

> ID：15940287
> 
> 赞同：4
> 
> 时间：2013-04-11T03:34:00.507
> 
> 标签：java, android, eclipse

我运行我的代码一次，它很好，我再次运行它，现在它每次都崩溃。LogCat 给了我这个：

```
04-11 03:15:57.293: D/dalvikvm(344): GC_EXTERNAL_ALLOC freed 68K, 52% free 2588K/5379K,   external 1907K/2137K, paused 65ms
04-11 03:15:57.497: E/ArrayAdapter(344): You must supply a resource ID for a TextView
04-11 03:15:57.497: D/AndroidRuntime(344): Shutting down VM
04-11 03:15:57.497: W/dalvikvm(344): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-11 03:15:57.573: E/AndroidRuntime(344): FATAL EXCEPTION: main
04-11 03:15:57.573: E/AndroidRuntime(344): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:347)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.ListView.onMeasure(ListView.java:1127)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.View.measure(View.java:8313)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.View.measure(View.java:8313)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.View.measure(View.java:8313)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.View.measure(View.java:8313)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.View.measure(View.java:8313)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.View.measure(View.java:8313)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.View.measure(View.java:8313)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.os.Looper.loop(Looper.java:123)
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-11 03:15:57.573: E/AndroidRuntime(344):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 03:15:57.573: E/AndroidRuntime(344):  at java.lang.reflect.Method.invoke(Method.java:507)
04-11 03:15:57.573: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-11 03:15:57.573: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-11 03:15:57.573: E/AndroidRuntime(344):  at dalvik.system.NativeStart.main(Native Method)
04-11 03:15:57.573: E/AndroidRuntime(344): Caused by: java.lang.ClassCastException: android.widget.RelativeLayout
04-11 03:15:57.573: E/AndroidRuntime(344):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:340)
04-11 03:15:57.573: E/AndroidRuntime(344):  ... 35 more
04-11 03:17:31.694: I/Process(344): Sending signal. PID: 344 SIG: 9 
```

我有三个活动：

```
package com.androidbook.triviaquiz;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class QuizMenuActivity extends QuizActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);

        ListView menuList = (ListView) findViewById(R.id.listView1);

        String[] items = { getResources().getString(R.string.itemplay),
                getResources().getString(R.string.itemscores),
                getResources().getString(R.string.itemsettings),
                getResources().getString(R.string.itemhelp) };
        ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu, items);
        menuList.setAdapter(adapt);

        menuList.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View itemClicked, int position, long id) {

                // Note: if the list was built "by hand" the id could be used.
                // As-is, though, each item has the same id

                TextView textView = (TextView) itemClicked;
                String strText = textView.getText().toString();

                if (strText.equalsIgnoreCase(getResources().getString(R.string.itemplay))) {
                    // Launch the Game Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizGameActivity.class));
                } else if (strText.equalsIgnoreCase(getResources().getString(R.string.itemhelp))) {
                    // Launch the Help Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizHelpActivity.class));
                } else if (strText.equalsIgnoreCase(getResources().getString(R.string.itemsettings))) {
                    // Launch the Settings Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizSettingsActivity.class));
                } else if (strText.equalsIgnoreCase(getResources().getString(R.string.itemscores))) {
                    // Launch the Scores Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizScoresActivity.class));
                }

            }
        });

    }

} 
```

这个：

```
package com.androidbook.triviaquiz;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class QuizMenuActivity extends QuizActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);

        ListView menuList = (ListView) findViewById(R.id.listView1);

        String[] items = { getResources().getString(R.string.itemplay),
                getResources().getString(R.string.itemscores),
                getResources().getString(R.string.itemsettings),
                getResources().getString(R.string.itemhelp) };
        ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu, items);
        menuList.setAdapter(adapt);

        menuList.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View itemClicked, int position, long id) {

                // Note: if the list was built "by hand" the id could be used.
                // As-is, though, each item has the same id

                TextView textView = (TextView) itemClicked;
                String strText = textView.getText().toString();

                if (strText.equalsIgnoreCase(getResources().getString(R.string.itemplay))) {
                    // Launch the Game Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizGameActivity.class));
                } else if (strText.equalsIgnoreCase(getResources().getString(R.string.itemhelp))) {
                    // Launch the Help Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizHelpActivity.class));
                } else if (strText.equalsIgnoreCase(getResources().getString(R.string.itemsettings))) {
                    // Launch the Settings Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizSettingsActivity.class));
                } else if (strText.equalsIgnoreCase(getResources().getString(R.string.itemscores))) {
                    // Launch the Scores Activity
                    startActivity(new Intent(QuizMenuActivity.this, QuizScoresActivity.class));
                }

            }
        });

    }

} 
```

和这个：

```
package com.androidbook.triviaquiz;

import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;

public class QuizGameActivity extends QuizActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.gameoptions, menu);
        menu.findItem(R.id.help_menu_item).setIntent(new Intent(this, QuizHelpActivity.class));
        menu.findItem(R.id.settings_menu_item).setIntent(new Intent(this, QuizSettingsActivity.class));
        return true;
    }
     @Override
       public boolean onOptionsItemSelected(MenuItem item) {
          super.onOptionsItemSelected(item);
          startActivity(item.getIntent());
           return true;
        }
} 
```

有人能告诉我这段代码有什么问题吗？就像我之前说的，我所做的就是重新启动它。这些是您唯一需要弄清楚的事情吗，也许是清单？

编辑：资源/布局/菜单

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".QuizSplashActivity" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/th"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:background="#000000" >

            <ImageView
                android:id="@+id/ImageView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:src="@drawable/quizicon" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_centerHorizontal="true"
                android:text="MAIN MENU"
                android:textColor="#ffffff"
                android:textSize="20pt" />

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:src="@drawable/quizicon" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ListView
                android:id="@+id/listView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:gravity="center">

            </ListView>

        </RelativeLayout>

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-30T08:08:58.407

你必须指定你`TextView ID`在你的 `R.layout.menu`

改变这个：

```
ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu, items); 
```

对此：

```
ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu, R.id.YOUR_TEXT_VIEW, items); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T03:45:25.833

您正在使用的 ArrayAdapter 构造函数需要一个仅由 TextView 组成的布局资源。它将尝试将列表的数据绑定到 TextView。相反，它找到了一个 RelativeLayout 并失败了。

看起来你给了它你的活动布局。也许您打算给它一个不同的布局资源？如果不是，您应该使用不同的构造函数，该构造函数同时获取布局资源和该布局中的 textview 的 id。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(context, R.layout.list_item, R.layout.text, items); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:57:44.880

例外很明显恕我直言：ArrayAdapter 要求资源 ID 是 TextView，请参阅文档：

管理由任意对象数组支持的 ListView 的 ListAdapter。

默认情况下，此类期望提供的资源 id 引用单个 TextView。如果您想使用更复杂的布局，请使用也采用字段 id 的构造函数。该字段 id 应引用较大布局资源中的 TextView。

然而，TextView 被引用，它将被数组中每个对象的 toString() 填充。您可以添加自定义对象的列表或数组。覆盖对象的 toString() 方法以确定将为列表中的项目显示哪些文本。

要使用除 TextViews 之外的其他内容来显示数组，例如 ImageViews，或者要让 toString() 结果之外的一些数据填充视图，请覆盖[getView(int, View, ViewGroup)](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)以返回所需的视图类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T03:45:02.937

```
ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu, items); 
```

您正在使用构造函数创建一个数组适配器，其中您只提供 3 个参数 - 上下文、textview resourceId 和 listItems。

因此，它不需要布局，而是需要设置数据的 textview id。

如果您还需要发送布局 ID，则使用另一个构造函数并将 textviewresourceId 传递为 0。

像这样

```
mAdapter = new ArrayAdapter(mContext, R.layout.custom_layout, 0, itemsList); 
```

如果你有一个 textview ResourceId 你可以通过 resourceid 代替 0

希望这对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-23T10:57:44.180

您可以使用“layout.support_simple_spinner_dropdown_item”，如下所述。

```
YourArrayAdapter = new ArrayAdapter<String>(this, R.layout.support_simple_spinner_dropdown_item); 
```

# list - 输入来自用户的项目列表

> ID：15940288
> 
> 赞同：0
> 
> 时间：2013-04-11T03:34:01.020
> 
> 标签：list, user-interface, input, wysiwyg

我有一个网站，其中用户可以在文本区域中输入自由文本。我允许他们使用 Markdown，但他们中的大多数人不使用它，而且他们通常发布蹩脚的内容，即使在看到最终结果的预览之后 :-(

鉴于大多数用户在该文本区域中枚举事物（工作要求），我认为如果我能以某种方式“强制”他们创建项目列表，那将是很棒的。另外，我认为在他们打字时为他们提供一些视觉反馈是很有价值的。例如，在他们正在创建的列表的每个项目附近显示一些项目符号点，并在他们按 Enter 时创建一个新的项目符号点。

所以基本上，**我想在 WYSIWYG 编辑器中转换文本区域，只允许用户创建项目列表**。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:27:33.337

你的答案在这里：

一旦用户关注 textarea 字段，就会出现一个项目符号。每个 Enter 键都会显示一个新的项目符号。此外，如果不需要，用户可以删除项目符号并继续使用普通文本。

[http://jsfiddle.net/abhiagrawal87/m39xt](http://jsfiddle.net/abhiagrawal87/m39xt)

示例片段：

```
$(".todolist").focus(function() {
    if(document.getElementById('todolist').value === ''){
        document.getElementById('todolist').value +='• ';
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:36:41.517

任君挑选：

[https://github.com/cheaun/mooeditable/wiki/Alternative-Javascript-WYSIWYG-editors](https://github.com/cheeaun/mooeditable/wiki/Alternative-Javascript-WYSIWYG-editors)

这些都可以配置为只允许子弹。

# python - 将生成器附加到循环中的堆栈，生成器指向最终循环变量

> ID：15940290
> 
> 赞同：3
> 
> 时间：2013-04-11T03:34:06.713
> 
> 标签：python, scope, generator, pass-by-reference

我正在做一些图遍历。在每一点上，我都会保存一个生成器，其中包含可以探索的其他可能选项。后来，我探索了其中一些生成器，但它不起作用。

这是一个简化的示例，您可以看到所有生成器中的“node”变量都设置为 3。（所以生成器指向“节点”变量，但“节点”变量在生成器被消耗之前发生了变化。

在我的特殊情况下，我可以存储一些指针并添加如何处理这些指针以重新创建生成器的逻辑 - 但这是一个丑陋的解决方案。

有没有简单的方法来做到这一点？

```
node_size = {1:1, 2:2, 3:1, 4:3}
iters = []
for node in range(1,4):
    it = (1 + node_size[node]+j for j in xrange(3))
    #it = iter(list(it)) #remove comment to get correct result but very slow.
    iters.append(it)

for iter_ in iters:
    print list(iter_)

"""
Correct Output
[2, 3, 4]
[3, 4, 5]
[2, 3, 4]
"""

"""
Actual Output:
[2, 3, 4]
[2, 3, 4]
[2, 3, 4]
""" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T03:48:54.240

您的生成器表达式引用全局变量`node`。由于这是 genexp 中的一个自由变量，它关闭了*name*，而不是 value。每次从生成器中获取项目时，都会使用 的*当前*值`1 + node_size[node]+j`评估表达式。也就是说，每次生成器高级时都会读取 的值，而不是在创建它时一劳永逸地读取。当您开始从生成器中获取项目时，为 3，因此生成器中的所有项目都反映了该值。*`node``node``node`*

 *要得到你想要的，你需要`node`在生成器函数本身中进行绑定。一种快速的方法是强制`node`进入 genexp 的循环部分：

```
it = (1 + node_size[node]+j for node in [node] for j in xrange(3)) 
```

由于在创建 genexp 时循环部分只被评估一次，这固定了`node`genexp 范围内的单个值。

如果这种方式对您来说太难看，您将不得不编写一个显式的生成器函数而不是使用 genexp：

```
def gen(nodeVal):
    for j in xrange(3):
        yield 1 + node_size[nodeVal]+j
for node in range(1, 4):
    iters.append(gen(node)) 
```

这里生成器关闭了 name `nodeVal`，但是由于每个生成器都是由单独的函数调用创建的，因此每个生成器都有自己的值`nodeVal`并且一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:47:01.433

如何制作关闭节点大小值的生成器函数？

```
node_size = {1:1, 2:2, 3:1, 4:3}

iters = []
for node in xrange(1, 4):
    def it(n=node_size[node]):
        for j in xrange(1, 4):
            yield n + j
    itr = it()
    iters.append(itr)

for iter_ in iters:
    print list(iter_) 
```

这为我打印了正确的结果。

编辑：@BrenBarn 发布了一个答案，让我直接得到了这个答案：

```
node_size = {1:1, 2:2, 3:1, 4:3}

iters = []
for node in range(1, 4):
    n = node_size[node]
    itr = xrange(n+1, n+4)
    iters.append(itr)

for iter_ in iters:
    print list(iter_) 
```

当你调用`xrange()`它时，它会评估它的参数，然后它会给你一个迭代器来产生数字。

我认为在 Python 中没有更有效的方法可以做到这一点！

在这种情况下，我们能够避免所有的数学运算并`xrange()`准确地得出所需的数字。如果您确实需要评估表达式，您仍然可以使用生成器表达式方式：

```
itr = (1+j for j in xrange(n, n+3)) 
```*

# android - Android：显示特殊字符

> ID：15940291
> 
> 赞同：4
> 
> 时间：2013-04-11T03:34:41.920
> 
> 标签：android, fonts

我想显示特殊字符，例如：ṁ ṭ m ē。如果它们在这里也没有显示，这四个字符应该是这样的：![特殊字符的显示](https://i.stack.imgur.com/sL6Ak.png)

在 Android 中，这些将显示在正方形中。对于其他脚本，我可以通过使用不同的字体来解决这个问题。但在这种情况下，设置字体 ( `TextView.setTypeFace`) 并不能解决这个问题。这些字符在例如 OpenOffice（使用 Arial 或 Courier New）中正确显示，但在 Android 中，即使使用相同的字体也不能正确显示）。

我还尝试将字符串保存为 unicode 编码字符串（例如在 strings.xml：\u1E41 \u1E6D 中）得到相同的结果（在日志中它们应该出现）。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T03:43:46.703

If these characters are representable in Unicode, then you should be able to use Html.fromHtml() to get the glyph into a TextView, e.g.

```
textView.setText(Html.fromHtml("&#1234;"), TextView.BufferType.SPANNABLE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T06:47:47.163

这实际上只是一个字体问题。很难找到支持我需要的所有字符的字体。

看到谷歌翻译对音译字符没有问题，促使我对字体进行更彻底的搜索。以下是用于此目的的有用字体列表：

*   [http://guindo.pntic.mec.es/jmag0042/alphaeng.html](http://guindo.pntic.mec.es/jmag0042/alphaeng.html)（广泛但非免费）
*   [http://users.teilar.gr/~g1951d/](http://users.teilar.gr/~g1951d/)
*   [http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=FontDownloads](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=FontDownloads)
*   [http://www.mufi.info/fonts/](http://www.mufi.info/fonts/)

# php - 登录后尝试将用户重定向到链接

> ID：15940298
> 
> 赞同：0
> 
> 时间：2013-04-11T03:35:26.340
> 
> 标签：php, html, redirect, login

我要做的就是在用户登录后几秒钟将用户重定向到我的主页。这是我的代码

```
<?php 
    include_once("config.php");
?>

<?php if( !(isset( $_POST['login'] ) ) ) { ?>

<!DOCTYPE html>
<html>
    <head>
        <title>Codecall Tutorials - Secured Login with php5</title>
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>

    <body>

        <header id="head" >
                <p>Codecall tutorials User Login</p>
            <p><a href="register.php"><span id="register">Register</span></a></p>
        </header>

        <div id="main-wrapper">
            <div id="login-wrapper">
                <form method="post" action="">
                    <ul>
                        <li>
                            <label for="usn">Username : </label>
                            <input type="text" maxlength="30" required autofocus name="username" />
                        </li>

                        <li>
                            <label for="passwd">Password : </label>
                            <input type="password" maxlength="30" required name="password" />
                        </li>
                        <li class="buttons">
                            <input type="submit" name="login" value="Log me in" />
                            <input type="button" name="register" value="Register" onclick="location.href='register.php'" />
                        </li>

                    </ul>
                </form>

            </div>
        </div>

    </body>
</html>

<?php 
} else {
    $usr = new Users;
    $usr->storeFormValues( $_POST );

    if( $usr->userLogin() ) {

        echo "Welcome"; 

    } else {
        echo "Incorrect Username/Password"; 

    }
}
?> 
```

此外，在用户注册后创建用户页面会非常好。我已经设置好了注册码，但这是我想要实现的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:37:45.117

这个代码片段：

`header( 'Location: http://www.yoursite.com/new_page.html' );`

如果您需要，这是一个参考链接 - [http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T03:37:56.633

以下是 PHP 重定向的方法：

```
 header('location:index.php'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:38:01.680

尝试添加

`header();`phpfunction 将您的页面重定向到您想要的特定位置。

```
if( $usr->userLogin() ) {
        ob_start(); // use output buffering to avoid "header already sent error"
        echo "Welcome"; //should try to remove this if you want because its unecessary now since your redirecting your page
        header('Location: pagetoredirect');
        ob_end_flush(); //now the headers are sent

    } else {
        echo "Incorrect Username/Password"; 

    } 
```

来源（[PHP.NET](http://www.php.net/manual/en/function.header.php)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T05:06:21.270

您可以像这样通过 header() 重定向您的页面

```
header("location:yoursite.com?$msg=welcome user"); 
```

重要的是要注意必须在看到任何实际输出之前调用 header() ......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T03:41:59.337

You will need to clear your html first:

1.  Make your top part codes into:

    ```
    <?php 
        include_once("config.php");

        if( !(isset( $_POST['login'] ) ) ) { ?> 
    ```

2.  Add `header` where you want to redirect:

    ```
     if( $usr->userLogin() ) {
            header('Location: /path/to/new/page.php');
        } else {
            echo "Incorrect Username/Password"; 
        } 
    ```

3.  Another way is to use javascript:

    ```
     if( $usr->userLogin() ) { ?>

            <div class="message">
                Thank you for logging in. You will be redirected in few seconds.
                Click <a href="/path/to/new/page.php">here</a> if not redirected.
            </div>
            <script type="text/javascript">
                window.location = "/path/to/new/page.php";
            </script>
        <?php
        } else {
            echo "Incorrect Username/Password"; 
        } 
    ```

# xslt - 如何使用 xsl number 对组中的元素进行计数

> ID：15940304
> 
> 赞同：1
> 
> 时间：2013-04-11T03:36:10.513
> 
> 标签：xslt

我将按如下顺序计算proceduralStep。我不确定如何实施。

XML:

```
<mainProcedure>
    <proceduralStepAlts>
        <proceduralStep/>
        <proceduralStep/>
    </proceduralStepAlts>
    <proceduralStep/>
    <proceduralStepAlts>
        <proceduralStep>
            <proceduralStepAlts>
                <proceduralStep/>
                <proceduralStep/>
            </proceduralStepAlts>
        </proceduralStep>
        <proceduralStep/>
    </proceduralStepAlts>
</mainProcedure> 
```

对架构有效：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema attributeFormDefault="qualified" elementFormDefault="qualified"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:xlink="http://www.w3.org/1999/xlink"  xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="mainProcedure" type="mainProcedureElemType"/>
    <xs:complexType name="mainProcedureElemType">
        <xs:choice maxOccurs="unbounded">
            <xs:element ref="proceduralStep"/>
            <xs:element ref="proceduralStepAlts"/>
        </xs:choice>
    </xs:complexType>
    <xs:element name="proceduralStep" type="proceduralStepElemType"/>
    <xs:complexType name="proceduralStepElemType">
        <xs:sequence>
            <xs:element ref="title"/>
            <xs:choice maxOccurs="unbounded" minOccurs="0">
                <xs:element ref="proceduralStep"/>
                <xs:element ref="proceduralStepAlts"/>
            </xs:choice>
        </xs:sequence>
    </xs:complexType>
    <xs:element name="proceduralStepAlts" type="proceduralStepAltsElemType"/>
    <xs:complexType name="proceduralStepAltsElemType">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" ref="proceduralStep"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

期望输出：1 1 2 3 3.1 3.1 3.2 3 4

为什么需要输出：proceduralStepAlts 包装了多个程序步骤，该集合被认为只有“一个”，因此每个程序步骤都以相同的轮廓编号显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:34:34.727

这个样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="proceduralStepAlts">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="proceduralStep[parent::proceduralStepAlts]">
        <xsl:value-of select="
                count(parent::proceduralStepAlts/preceding-sibling::proceduralStepAlts)
              + count(parent::proceduralStepAlts/preceding-sibling::proceduralStep)
              + 1"/>                
        <xsl:text> </xsl:text>
    </xsl:template>

    <xsl:template match="proceduralStep[parent::mainProcedure]">
        <xsl:value-of select="
              count(preceding-sibling::proceduralStepAlts)
            + count(preceding-sibling::proceduralStep)
            + 1"/>                
        <xsl:text> </xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

使用提供的输入产生您想要的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:18:38.620

我认为你只是在计算根元素下面的元素，所以你可以使用这个表达式

```
<xsl:number count="/*/*" /> 
```

这是“完整的”XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>

   <xsl:template match="proceduralStep">
      <xsl:number count="/*/*" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容：

```
11233 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:57:11.800

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="proceduralStepAlts/proceduralStep">
  <xsl:value-of select=
  "concat(count(../preceding-sibling::*) +1, ' ')"/>
 </xsl:template>

 <xsl:template match="/*/proceduralStep">
  <xsl:value-of select=
   "concat(count(preceding-sibling::*) +1, ' ')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<mainProcedure>
    <proceduralStepAlts>
        <proceduralStep/>
        <proceduralStep/>
    </proceduralStepAlts>
    <proceduralStep/>
    <proceduralStepAlts>
        <proceduralStep/>
        <proceduralStep/>
    </proceduralStepAlts>
</mainProcedure> 
```

**产生想要的结果：**

```
1 1 2 3 3 
```

* * *

**第二种解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
   <xsl:apply-templates select="*[self::proceduralStep or proceduralStep]"/>
 </xsl:template>

 <xsl:template match="proceduralStep | proceduralStepAlts">
  <xsl:variable name="vPos" select="position()"/>

  <xsl:for-each select="self::proceduralStep | proceduralStep">
   <xsl:value-of select="concat($vPos, ' ')"/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
1 1 2 3 3 
```

# java - 了解 Java Swing 中元素的使用

> ID：15940305
> 
> 赞同：1
> 
> 时间：2013-04-11T03:36:11.220
> 
> 标签：java, swing, element, jtextarea

我正在开发一个需要对将在 JTextArea 中显示的文本进行低级别控制的项目。在我想了解如何实现这一点的过程中，我遇到了 Elements。有什么方法可以使用自定义元素来访问输入到文档中的单个单词？如果是这样，我将如何构建这些元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:14:55.143

的实例[`javax.swing.text.Element`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/Element.html)表示结构化的一部分[`Document`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Document.html)，即 使用的模型`JTextComponent`。元素不一定是单独的词；它们通常是共享某些公共属性的文档的一部分。[您可以在此处](https://stackoverflow.com/a/15669307/230513)和[此处](https://stackoverflow.com/a/2883413/230513)显示的示例中了解如何遍历文档的元素。另请参阅[*如何使用编辑器窗格和文本窗格*](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T05:45:02.613

> 我想对单个单词有钩子

也许`Document.createPosition()`

# android - 使用 OpenCV4Android 时无法解析字段“距离”

> ID：15940307
> 
> 赞同：0
> 
> 时间：2013-04-11T03:36:29.350
> 
> 标签：android, opencv, field

我试图在 Android 应用程序中使用 ORB 功能，并创建一个项目。当我使用 BruteForceMatcher 并编写代码：dist=matches[i].distance，我的 IDE 通知我“无法解析字段'距离'”。为什么会这样？

```
#include <jni.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/legacy/legacy.hpp>
#include <iostream>
#include <vector>

using namespace std;
using namespace cv;

extern "C" {

JNIEXPORT int JNICALL Java_org_opencv_samples_tutorial2_Tuturial2Activity_CompareFeatures(JNIEnv*, jobject, jlong addrGray, jlong addrRgba);

JNIEXPORT int JNICALL Java_org_opencv_samples_tutorial2_Tuturial2Activity_CompareFeatures(JNIEnv*, jobject, jlong addrGray, jlong addrRgba)
{
    char img_filename1[]="/sdcard/src.jpg";
    char img_filename2[]="/sdcard/demo.jpg";
    Mat src1,src2;

    src1=imread(img_filename1,CV_LOAD_IMAGE_GRAYSCALE);
    src2=imread(img_filename2,CV_LOAD_IMAGE_GRAYSCALE);

    ORB orb;
    vector<KeyPoint> keys1,keys2;
    Mat descriptors1,descriptors2;
    orb(src1,Mat(),keys1,descriptors1);
    orb(src2,Mat(),keys2,descriptors2);

    BruteForceMatcher<HammingLUT> matcher;
    vector<DMatch> matches;
    matcher.match(descriptors1,descriptors2,matches);

    double max_dist=0; double min_dist=255;
    //--Quick calculation of max and min distances between keypoints

    for (int i=0;i<descriptors1.rows;i++)
    {
        double dist=matches[i].distance;

    }
    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T13:31:47.673

**转到**项目属性 -> C/C++ 常规 -> GNU C++ ->

**在 ${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.x.. 中**编辑**更改**4.x**到**4.4.3 。****

# mysql - INSERT INTO .... 多行 ... 在重复键上

> ID：15940313
> 
> 赞同：0
> 
> 时间：2013-04-11T03:37:25.740
> 
> 标签：mysql, key, rows

我有一个用于电子商务网站的 mysql 数据库，其定价表如下所示：

```
priceid (int, PK, AI)
productid (int)
membershipid (int)
price (decimal(12,2))
quantity (int) 
```

这允许项目具有基于`membershipid`或的不同定价级别`quantity`（但这里的值将始终为 1）。

我需要使用如下源表更新它：

```
productid (int,PK)
price1 (int)
price2 (int)
price3 (int) 
```

我不确定如何插入数据：

```
COLS:[productid, price, membershipid, quantity][priceid]
ROWS:[productid, price1, 1, 1][n]
ROWS:[productid, price2, 2, 1][n]
ROWS:[productid, price3, 5, 1][n] 
```

（*n = 新插入的 ID，或者 PK 更新，如果它已经存在）*

我知道下面的代码不起作用，但基本上，我需要做的是：

```
INSERT INTO mysql.pricing
    (prouductid, membershipid, quantity, price) 
SELECT productid, 1, 1, price1 from mysql.source 'row n
SELECT productid, 2, 1, price2 from mysql.source 'row n+1
SELECT productid, 5, 1, price3 from mysql.source 'row n+2
ON DUPLICATE KEY UPDATE productid = VALUES(productid),membershipid = VALUES(membership), quantity = VALUES(quantity), price = VALUES(price); 
```

我需要三个不同的行，每个行具有相同的 [productid]，但不同的 [priceid、membershipid、price]。

几天来，我一直在寻找答案，并将头撞在桌子上。有任何想法吗？任何帮助将*不胜*感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:20:09.697

```
You have mentioned priceid (int, PK, AI)-  You can use on duplicate key update in     primary key but not on Auto Increment.  

There are two ways to solve this:  
Remove only Auto Increment from priceid and set the field as     (productid,membershipid,pricenumber) eg:  
Membershipid = 2   
productid = 33   
price1 = 11   
price2 = 12  
price3 = 13  
**priceid will be**  
33211 (price 1)  
33212 (price 2)  
33213 (price 3)  

This will always be unique...(for primary key), updating the following info.  
for memebershipid 2 , productid 33, price1 = 25, price2 = 28, price3 = 30

insert will be as follows (priceid,membershipid,productid,price,quantity) 
```

`replace into mysql.pricing values(33211,33,2,25,1);`
`replace into mysql.pricing values(33222,33,2,28,1);`
`replace into mysql.pricing values(33233,33,2,30,1);`

```
if the price2 has been changed from 28 to 29 you insert statment will be like this. 
```

`replace into mysql.pricing values(33222,33,2,29,1);`

```
(using replace instead of insert for update incase of already existing primary key) 

or

other way is add another column in you mysql.pricing table with datetime, and priceid     will be primarykey  & autoincrement

mysql table columns 
priceid (int, PK, AI),productid (int),membershipid (int) price(decimal(12,2)),quantity     (int),insert_date (datetime)

Above insert can be inserted as following using now() function (which returns current     date& time) 
```

`insert into mysql.pricing values(33,2,25,1,now());`
`insert into mysql.pricing values(33,2,28,1,now());`
`insert into mysql.pricing values(33,2,30,1,now());`

```
updating  price2 (it will always be insert) 
```

`insert into mysql.pricing values(33,2,29,1,now());`

```
make all  fetch result based on max insert_date(datetime field) for respective     membershipid,price1/price2..  
Hope this solves your problem. 
```

# ios - iOS 简单谓词“包含”不起作用

> ID：15940321
> 
> 赞同：1
> 
> 时间：2013-04-11T03:38:16.963
> 
> 标签：ios, core-data, predicate

我有一个模型：

地点<--->>分类

执行以下查询时：

```
NSFetchRequest *req = [NSFetchRequest fetchRequestWithEntityName:@"Category"];
if(![searchText isEqualToString:@""] && searchText != nil){
    req.predicate = [NSPredicate predicateWithFormat:@"(places.placeTitle contains %@) OR (places.details contains %@) OR (name contains %@)", searchText, searchText, searchText];
    NSLog(@"ModelHelper.getResults: Search text given, creating predicate: %@", req.predicate);
}
req.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name"
                                                                             ascending:YES
                                                                              selector:@selector(localizedCaseInsensitiveCompare:)]];
NSFetchedResultsController *controller = [[NSFetchedResultsController alloc]initWithFetchRequest:req
                                                                            managedObjectContext:context
                                                                              sectionNameKeyPath:nil
                                                                                       cacheName:nil];
NSError *error = nil;
[controller performFetch:&error]; 
```

我收到不应该存在的匹配项，例如：

```
searchText = "1234" 
```

第一个结果是：

```
category[0].name = "Bars"
category[0].places[0].placeTitle = "Aaa"
category[0].places[0].details = "Aaa"
category[0].places[1].placeTitle = "123456"
category[0].places[1].details = "123456"
category[0].places[2].placeTitle = "test"
category[0].places[2].details = "test" 
```

我的谓词有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:54:36.300

从[文档](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)中：

> > 重要提示：调用此方法后不得修改 fetchRequest。例如，您不得更改其谓词或排序顺序。

移动此段：

```
if(![searchText isEqualToString:@""] && searchText != nil){
    req.predicate = [NSPredicate predicateWithFormat:@"(places.placeTitle contains[c] %@) OR (places.details contains[c] %@) OR (name contains[c] %@)", searchText, searchText, searchText];
    NSLog(@"ModelHelper.getResults: Search text given, creating predicate: %@", req.predicate);
} 
```

初始化 FRC 之前

# c++ - pushing an array to a function in c++?

> ID：15940325
> 
> 赞同：0
> 
> 时间：2013-04-11T03:38:44.790
> 
> 标签：c++, class

```
 {
            int a[3];
            mainClassStack.pushNumber(a[1,2,3]);
            break;
        }

void stack_class::pushNumber(int numberFunc)
{
    if(head==NULL)
    {
        head = new stack_struct;
        head->number = numberFunc;
        head->next_number = NULL;
        tailPointer=head;
    }
    else
    {
        pointerFunc = new stack_struct;
        pointerFunc->number=numberFunc;
        pointerFunc->next_number=NULL;
        head->next_number=pointerFunc;
        head=pointerFunc;
    }
}

void stack_class::pushNumber(char charFunc)
{

    int a=0;
    a=charFunc;
    if(head==NULL)
    {
        head = new stack_struct;
        head->number = a;
        head->next_number = NULL;
        tailPointer=head;
    }
    else
    {
        pointerFunc = new stack_struct;
        pointerFunc->number=a;
        pointerFunc->next_number=NULL;
        head->next_number=pointerFunc;
        head=pointerFunc;
    }

}

void stack_class::pushNumber(int arrayFunc[3])
{
    if(head==NULL)
    {
        for(int i=0;i<3;i++)
        {
            head = new stack_struct;
            head->number = arrayFunc[i];
            head->next_number = NULL;
            tailPointer=head;
        }
    }
    else
    {
        for(int i=0;i<3;i++)
        {
            pointerFunc = new stack_struct;
            pointerFunc->number=arrayFunc[i];
            pointerFunc->next_number=NULL;
            head->next_number=pointerFunc;
            head=pointerFunc;
        }
    }
} 
```

I am overloading functions and pushing an array into the appropriate function which will later add the values from the arrays to a dynamic linked list. So far I have written this, but when I try to print the linked list, it shows garbage. What am I doing wrong here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:47:01.827

这对你来说更有意义吗？

```
void Foo(int arg[])
{
  printf("%i\n", arg[0]);
  printf("%i\n", arg[1]);
  printf("%i\n", arg[2]);
}

int main()
{
  int a[3] = {1,2,3};
  Foo(a);
  return 0;
} 
```

输出是：

```
1
2
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:08:47.057

C++ 不允许将整个数组作为参数传递给函数。但是，您可以通过指定不带索引的数组名称来传递指向数组的指针。

如果要将一维数组作为参数传递给函数，则必须以以下三种方式之一声明函数形式参数，并且所有三种声明方法都会产生相似的结果，因为每种方法都告诉编译器一个整数指针正在运行被接收。

方式一

作为指针的形式参数如下：

无效 myFunction(int *param) { . . . }

方式二

形式参数作为一个大小的数组如下：

无效 myFunction(int param[10]) { . . . }

方式 3

形式参数为一个未调整大小的数组，如下所示：

无效 myFunction(int param[]) { . . . }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:14:40.023

为了更清楚其他人指出的内容，逗号运算符返回系列中的最后一个值。`(1, 2, 3)`因此，表达式的值是`3`，所以表达式`a[1, 2, 3]`无非是一个很长的说法`a[3]`。

但是还有一些看起来很傻的东西，这就是这里的循环：

```
if(head==NULL)
{
    for(int i=0;i<3;i++)
    {
        head = new stack_struct;
        head->number = arrayFunc[i];
        head->next_number = NULL;
        tailPointer=head;
    }
} 
```

您指向`head`一个新事物，在其中设置一些事物，然后将 tailPointer 设置为指向同一个新事物……但随后立即再执行两次相同的操作。你看到问题了吗？在循环结束时，您创建了三个`next_number`值为 all的项`NULL`，`head`并且`tailPointer`都指向同一个东西：最后一个创建的。您根本没有任何东西指向您创建的前两个项目，而且它们都没有相互指向。换句话说，在这个操作结束时根本没有链表（尽管有一些新对象躺在内存中的某个地方，无法访问或取消分配它们）。

您可能意味着将 if 语句放在循环中，而不是相反，但您需要更改的不仅仅是这些，因为另一个 for 循环中的代码也可能有点问题。它创建一个新项目，然后设置从头项目到新项目的链接，但随后它移动头指向新项目，因此您成功地将项目添加到列表的尾部，但留下了自己带有一个`head`实际上指向尾部的变量。

我建议查看发生了什么的最好方法是拿笔和纸，写下你的变量并绘制方框来代表你的对象，里面有它们的成员变量，然后一步一步地按照你的代码，写下变量值或从指针上擦除和绘制箭头以显示每个指针的位置。我想你会立即看到你的算法哪里出错了。

# tomcat - 以编程方式检查任何进程（如 tomcat）的 CPU 使用率

> ID：15940327
> 
> 赞同：1
> 
> 时间：2013-04-11T03:38:51.360
> 
> 标签：tomcat, cpu-usage

如何检查特定进程（如 tomcat）的 CPU 使用率以及以编程方式消耗相同 CPU 量的时间？

问题是已经配置了 8 个 tomcat，其中 4 个运行，而其他 4 个停止。任何时候，当 4 个 tomcat 中的任何一个继续使用相同的 CPU 数量时，应用程序会持续更长时间。挂起，所以我必须手动杀死它并启动其他任何一个。所以我必须经常关注tomcats，这实际上是一个愚蠢的过程。

所以我需要一个解决方案来检测时间跨度和 CPU 使用量，一旦出现问题，就应该以编程方式停止/终止进程（如 tomcat）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:25:19.317

如果你使用 Windows...

```
Process proc = Runtime.getRuntime().exec ("tasklist.exe");
InputStream procOutput = proc.getInputStream ();
if (0 == proc.waitFor ()) {
// TODO scan the procOutput for your data
} 
```

linux...

```
try {
    String line;
    Process p = Runtime.getRuntime().exec("ps -e");
    BufferedReader input =
            new BufferedReader(new InputStreamReader(p.getInputStream()));
    while ((line = input.readLine()) != null) {
        System.out.println(line); //<-- Parse data here.
    }
    input.close();
} catch (Exception err) {
    err.printStackTrace();
} 
```

# java - JPanel Animated Background

> ID：15940328
> 
> 赞同：2
> 
> 时间：2013-04-11T03:38:57.140
> 
> 标签：java, swing, animation, background, jpanel

This is a really general question, but how should I add an animated background for a JPanel. I want the background to be behind all the panel's components and graphics. Right now, I have two separate classes (one for the main panel and the other for the background). The background class uses repaint() to animate a grid moving across the screen. I've tried to make the main panel background transparent, but that hasn't gotten me anywhere.

Even more info: My main panel is part of a CardLayout and it has many different classes in it. So when I'm adding my main panel to my main frame, I'm doing `frame.getContentPane().add(cards, BorderLayout.CENTER)`

`cards` is a JPanel which acts as a container for the mainpanel and all the panels inside main panel.

Can anybody help me out in getting a panel animated background?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:23:42.987

您可以使用`Toolkit.getImage()`加载动画图像，然后在容器的`paintComponent`. 确保`ImageObserver`已设置（不为空）以正确更新动画帧。有关如何加载、观察和更新图像的详细信息，请参阅*Java AWT 参考中的*[图像如何加载](http://oreilly.com/openbook/javawt/book/appd.pdf)附录。

 *这是一个简单的例子：

```
import java.awt.*;
import javax.swing.*;
import java.net.URL;

class AnimatedPanelDemo {
    static class ImagePanel extends JPanel {
        private Image image;
        ImagePanel(Image image) {
            this.image = image;
        }
        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.drawImage(image,0,0,getWidth(),getHeight(),this);
        }
    }

    private static void createAndShowUI() {
        try {
            JFrame frame = new JFrame("Image");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLocationRelativeTo(null);

            Image image = Toolkit.getDefaultToolkit().getImage(new URL(
                    "http://duke.kenai.com/iconSized/duke.running.gif"));

            ImagePanel imagePanel = new ImagePanel(image);

            imagePanel.add(new JLabel("Some label"));
            frame.add(imagePanel);
            frame.setSize(100, 100);
            frame.setVisible(true);
        } 
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-18T11:58:05.520

好吧，这是我关于stackoverflow的第一个答案。

将尝试使用这个复杂的 AWT 和 Swift API 帮助我的学习曲线。

下面是扩展 JFrame 的构造函数

```
package xpto;

import java.awt.Dimension;
import java.awt.GraphicsConfiguration;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.awt.event.WindowStateListener;
import java.awt.image.ImageObserver;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

import sun.java2d.SunGraphicsEnvironment;
import java.awt.Graphics;
import java.awt.Graphics2D;

public class FrameLuckyRaffle extends JFrame {

    /**
     * 
     */
    private JLabel backgroundLabel;
    private ImageIcon imageIcon;
    private Image bgImage;

    /**
     * Constructor of this frame.
     */
    public FrameLuckyRaffle(String background, final String dbname) {
        try {
            setTitle("Lucky Raffle of "+ dbname);

            GraphicsConfiguration config = this.getGraphicsConfiguration();
            Rectangle usableBounds = SunGraphicsEnvironment.
                                     getUsableBounds(config.getDevice());
            setDefaultCloseOperation(DISPOSE_ON_CLOSE);
            setBounds(100, 100, (int)(usableBounds.getWidth()*0.8), 
                                (int)(usableBounds.getHeight()*0.8));
            setMinimumSize(new Dimension(1024, 700));
            setResizable(true);
            setDefaultLookAndFeelDecorated(true);

            backgroundLabel = new JLabel() {
               public void paintComponent(Graphics g) {
            // alternative --> g.drawImage(bgImage, 0, 0, null);
            // I prefer to control the new ImageObserver parameter as bellow
                    g.drawImage(bgImage, 0, 0, new ImageObserver() {
                    @Override
                    public boolean imageUpdate(Image img, int infoflags, 
                                               int x, int y, int width, int height) {
                        img.getScaledInstance(getWidth(),getHeight(),
                                              Image.SCALE_FAST);
                        return true;
                    }
               });
           // this is used to have easier control on 
           // image manipulation on my application
              Graphics2D g2d = (Graphics2D)g; 
              super.paintComponent(g2d);
              revalidate();
              repaint();
          }
      };
      backgroundLabel.setBounds(0, 0, 0, 0);
      // this is necessary if you want more child 
      // components to be visible on the JFrame afterwards
      backgroundLabel.setOpaque(false);  
      setContentPane(backgroundLabel);

      addWindowListener(new WindowListener() {
          @Override
          public void windowOpened(WindowEvent e) {
        // Set Frame Background
             imageIcon = new ImageIcon(Toolkit.getDefaultToolkit().
                        createImage(FrameBusinessPure.class.getResource(background)));
             bgImage = imageIcon.getImage().
                       getScaledInstance(getWidth(),getHeight(), Image.SCALE_FAST);
          }
        // Even after closing the window, JVM didn't Garbage Collected the instanced
        // objects, for some reason. Forcing the objects to null helped on that.
          @Override
          public void windowClosed(WindowEvent e) {
              backgroundLabel = null;
              imageIcon = null;
              bgImage = null;
              System.gc();
          }
      });

      addWindowStateListener(new WindowStateListener() {
          @Override
          public void windowStateChanged(WindowEvent e) {

        // if you flush the object on runtime you will surpass the
        // memory leak on using GIFs and most complex graphics

              bgImage.flush();
              bgImage = imageIcon.getImage().
                        getScaledInstance(getWidth(),getHeight(), Image.SCALE_FAST);
          }
       });

    addMouseMotionListener(new MouseMotionListener() {
        @Override
        public void mouseDragged(MouseEvent e) {

      // if you flush the object on runtime you will surpass the
      // memory leak on using GIFs and most complex graphics

           bgImage.flush();
           bgImage = imageIcon.getImage().
                     getScaledInstance(getWidth(),getHeight(), Image.SCALE_FAST);
       });
       }catch (Exception e) {
           e.printStackTrace();
       }
    }
} 
```

请随时通过以下链接了解更多信息

[https://www.oracle.com/java/technologies/painting.html](https://www.oracle.com/java/technologies/painting.html)*

# async-await - Why does an async function without an await result in a compiler warning?

> ID：15940329
> 
> 赞同：2
> 
> 时间：2013-04-11T03:38:58.603
> 
> 标签：async-await, c#-5.0

Can anyone explain why async functions in c# 5 are required to have at least 1 await? I can't find a clear reason/explaination.

By required, I mean that the compiler warns when an async function doesn't have any await calls inside of it, but doesn't throw a compile error.

From [this answer](https://stackoverflow.com/a/7615440):

> Similarly, a method marked as async must have at least one await. On an await, the runtime will save the current thread's state and call stack, make the asynchronous call, and unwind back to the runtime's message loop to handle the next message and keep the app responsive. When the asynchronous operation is complete, at the next scheduling opportunity, the call stack to up the async operation is pushed back in and continued as if the call was synchronous.

But from msdn:

> If the method does not contain an await expression or statement, then it executes synchronously. A compiler warning alerts you to any async methods that don't contain await because that situation might indicate an error.

What type of error occur that merits this being a compiler warning versus just recommended usage?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T05:13:17.040

MSDN 对此警告有很好的描述：[Compiler Warning (level 1) CS4014](http://msdn.microsoft.com/en-US/library/vstudio/hh873131.aspx)。好的报价将是：

> 在大多数情况下，这种行为不是您所期望的。

我认为这个警告存在的主要原因是 async/await 不是很明显，开发人员通常会犯我将在下面描述的错误。

例如，您有一个方法，它会在几秒钟内执行一些繁重的操作：

```
public int DoSomething()
{
    int sum = 0;

    for (int i = 0; i < 10; i++)
    {
        sum += i;
        Thread.Sleep(1000);
    }

    return sum;
} 
```

您听说过`async`并且`await`想尝试一下。这就是人们经常认为他们会将所有内容移至后台的频率（可能并不经常，但我认为在我阅读更多文档之前它就是这样工作的，所以我们至少可以数我）：

```
public async Task<int> DoSomething()
{
    int sum = 0;

    for (int i = 0; i < 10; i++)
    {
        sum += i;
        Thread.Sleep(1000);
    }

    return sum;
} 
```

您认为问题已解决，但警告告诉您，没有`await`您不应该使用`async`，因为它什么也不做，您的所有代码都将同步运行，最后一个示例`async`类似于下一个代码：

```
public Task<int> DoSomething()
{
    int sum = 0;

    for (int i = 0; i < 10; i++)
    {
        sum += i;
        Thread.Sleep(1000);
    }

    return Task.Result<int>(sum);
} 
```

您在同一个上下文中执行所有操作，这会调用此方法。

所以我认为这个警告的主要原因是让人们知道他们可能用`async`错了，现在是阅读文档的时候了。

# arrays - Convert String of ASCII digits to int in MIPS/Assembler

> ID：15940331
> 
> 赞同：3
> 
> 时间：2013-04-11T03:39:20.233
> 
> 标签：arrays, string, int, mips, atoi

Im writing some MIPS code to take a string of ASCII digits and convert the string into an integer. The string is entered by the user and can be at most 10 digits in length. My code works fine and uses the obvious method of performing looped addition after multiplying the Least Significant number in the string by a power of ten determined by the index of the array, starting from the last digit entered (10^0) to the first digit entered (10^n, n=number of digits in the array).

I was wondering if there was an alternate method that would be quicker or shorter to write. In particular, I wanted to know if using a logical bit shift might make this process shorter. Any ideas for optimizing or improving this code would be greatly appreciated!

Also, as a side note, I would like to call the gets and readInt subroutines using jal, but because gets and readInt both call subroutines, using jal in the main method to call gets or readInt causes problems. Any ideas how to get around this? Thanks again Cheers

PS: sorry for the formatting of the comments in this code, copy and pasting from MARS simulator into the stack overflow text box caused the alignment to be off :/

```
#IO
#Prompts user to input 10 ascii digits into an array
#Converts the string of digits into a single int
#Also handles any number of digits between 1 and 10 
#Returns 0 if non-digit chars are entered into the string

.data           #declaration of vars follows
array: .space 11    #reserves space for a 10 elem array
char: .space 2
prompt: .asciiz "Please enter 10 numbers, then press ENTER:  \n"
null: .asciiz ""
space: .ascii " "
newline: .asciiz "\n"
.text           #instructions follow

main:
la $a0, prompt      #load prompt message into $a0 for syscall
li $v0, 4               #load syscall to print string
syscall         #print prompt message
j readInt               #call readInt function to get user input string         

gets:           #read multiple chars from keyboard buffer until ENTER key,
                            #add NULL char and store into buffer pointed to by *array
                            #passed to the subroutine
la $s1, array       #set base address of array to s1
loop:           #start of read loop
jal getc        #jump to getc subroutine
lb $t0, char        #load the char from char buffer into t0, stripping null
sb $t0, 0($s1)      #store the char into the nth elem of array
lb $t1, newline     #load newline char into t1
beq $t0, $t1, done  #end of string?  jump to done
addi $s1, $s1, 1    #increments base address of array
j loop          #jump to start of read loop

getc:           #read char from keyboard buffer and return ascii value
li $v0, 8       #call code for read string
la $a0, char        #load address of char for read
li $a1, 2       #length of string is 1byte char and 1byte for null
syscall         #store the char byte from input buffer into char
jr $ra          #jump-register to calling function

readInt:        #read string of ascii digits, store into a local variable and  
                    #convert into integer, return that int unless string contains 
                    #non-integers 
j gets          #let s1 be top address of array, let s0 be the digitcounter
done:           #let s2 be the sum total
addi $s1, $s1, -1   #reposition array pointer to last char before newline char
la $s0, array       #set base address of array to s0 for use as counter
addi $s0, $s0, -1   #reposition base array to read leftmost char in string
add $s2, $zero, $zero   #initialize sum to 0
li $t0, 10      #set t0 to be 10, used for decimal conversion
li $t3, 1
lb $t1, 0($s1)      #load char from array into t1
blt $t1, 48, error  #check if char is not a digit (ascii<'0')
bgt $t1, 57, error  #check if char is not a digit (ascii>'9')
addi $t1, $t1, -48  #converts t1's ascii value to dec value
add $s2, $s2, $t1   #add dec value of t1 to sumtotal
addi $s1, $s1, -1   #decrement array address
lp:         #loop for all digits preceeding the LSB
mul $t3, $t3, $t0   #multiply power by 10
beq $s1, $s0, FIN   #exit if beginning of string is reached
lb $t1, ($s1)       #load char from array into t1
blt $t1, 48, error  #check if char is not a digit (ascii<'0')
bgt $t1, 57, error  #check if char is not a digit (ascii>'9')
addi $t1, $t1, -48  #converts t1's ascii value to dec value
mul $t1, $t1, $t3   #t1*10^(counter)
add $s2, $s2, $t1   #sumtotal=sumtotal+t1
addi $s1, $s1, -1   #decrement array address
j lp            #jump to start of loop

error:          #if non digit chars are entered, readInt returns 0
add $s2, $zero, $zero
j FIN

FIN:
li $v0, 1
add $a0, $s2, $zero
syscall 
li $v0, 10      #ends program
syscall 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-10T17:03:32.190

**用和**ing 字符串掩蔽前四位`0x0F`，如下所示

```
andi $t0,$t0,0x0F # where $t0 contains the ascii digit . 
```

现在`$t0`有了它的int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T06:35:39.507

假设`$s1`指向以 NULL 结尾的字符串的开头（即最高有效位），`$t0`包含 10，并且`$s2`包含 0：

```
lp:         
  lbu $t1, ($s1)       #load unsigned char from array into t1
  beq $t1, $0, FIN     #NULL terminator found
  blt $t1, 48, error   #check if char is not a digit (ascii<'0')
  bgt $t1, 57, error   #check if char is not a digit (ascii>'9')
  addi $t1, $t1, -48   #converts t1's ascii value to dec value
  mul $s2, $s2, $t0    #sum *= 10
  add $s2, $s2, $t1    #sum += array[s1]-'0'
  addi $s1, $s1, 1     #increment array address
  j lp                 #jump to start of loop 
```

每次迭代都会少一个`mul`，并且在进入循环之前不需要知道字符串的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-28T18:41:21.500

针对`jal`在嵌套调用中使用的问题，你可以在第一次进入第一个调用的时候保存寄存器from `$ra`（这个是调用时用来存放返回地址的寄存器）；`jal`当您到达可以正常使用的 alst 呼叫时`$ra`。

```
main:
    jal call1

call1:
    add $s0, $ra, 0
    ...
    jal call2
    ...
    jr $s0 # will be where $ra was when call 1 was implemented

call2:
    ...
    jr $ra 
```

使用`s`寄存器可能是最安全的，但我也可以使用`t`寄存器。

# javascript - using Javascript within Google Analytics event tracking code to automate category naming

> ID：15940332
> 
> 赞同：5
> 
> 时间：2013-04-11T03:39:22.340
> 
> 标签：javascript, jquery, google-analytics, event-tracking

So I'm attempting to implement some google analytics event tracking on dynamically generated pages. I'll be using something like

```
<script>
$(document).ready(function(){
  $("#button1").click(function(){
    _gaq.push(['_trackEvent', category, action, opt_label, opt_value, opt_noninteraction)']);
  }); 
  $("#button2").click(function(){
    _gaq.push(['_trackEvent', category, action, opt_label, opt_value, opt_noninteraction']);
  });
});
</script> 
```

I'm wondering is it possible to use something like `document.title` to auto generate the category section of the GA code from the html title of the pages? All the pages use unique titles and it would be great if the events tracked on those pages could show up in GA as separate entries and not just category.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:10:15.537

这比我预期的要艰难。希望能帮助到你。

[带示例的现场演示](http://jsfiddle.net/jstx/qZCw4/22/)

**javascript**

```
// Unbind default behaviour
    $(document).off("ready.ga").on("ready", function () {
        //hollow out
        pageLoc = $(location).attr('href');
        // Introduce helper functions.

        (function ($, window, undef) {
            // ga selector.

            $.extend($.expr[":"], {
                ga: function (a) {
                    var attr = a.attributes,
                        len = attr.length;

                    while (len--) {
                        if (attr[len].name.indexOf("data-ga-") !== -1) {
                            return true;
                        }
                    }

                    return false;
                }
            });

            $.gaaApi = {
                trackEvent: {
                    event: {
                        value: "_trackEvent",
                        validation: "isString",
                        type: "string"
                    },
                    category: {
                        value: null,
                        validation: "optString",
                        type: "currentloc"
                    },
                    action: {
                        value: null,
                        validation: "optString",
                        type: "string"
                    },
                    label: {
                        value: null,
                        validation: "optString",
                        type: "string"
                    },
                    value: {
                        value: null,
                        validation: "optInt",
                        type: "integer"
                    },
                    nonInteraction: {
                        value: null,
                        validation: "optBool",
                        type: "boolean"
                    }
                },
                trackPageview: {

                    event: {
                        value: ["trackPageview", $(location).attr('href')],
                        validation: "isString",
                        type: "string"
                    },
                    url: {
                        value: undef,
                        validation: "optString",
                        type: "string"
                    }
                }
            };

            var validation = {

                isString: function (obj) {

                    var empty = true;

                    if (obj && typeof obj === "string") {
                        empty = /^\s*$/.test(obj);
                    }
                    // If empty === true then something is wrong and we should return false.
                    return !(empty);

                },

                optString: function (obj) {
                    if (obj === undef) {
                        return true;
                    }

                    return validation.isString(obj);
                },

                isInt: function (obj) {
                    return (/^[\-+]?\d+$/).test(obj) || (obj === +obj && obj === (obj | 0));
                },

                optInt: function (obj) {

                    if (obj === undef) {
                        return true;
                    }

                    return validation.isInt(obj);
                },

                isFloat: function (obj) {

                    return (/^[\-+]?\d+(\.\d+)?$/).test(obj) || (obj === +obj && obj !== (obj | 0));
                },

                optFloat: function (obj) {
                    if (obj === undef) {
                        return true;
                    }

                    return validation.isFloat(obj);
                },

                isBool: function (obj) {
                    return (obj === true || obj === "true") || (obj === false || obj === "false");

                },

                optBool: function (obj) {

                    if (obj === undef) {
                        return true;
                    }

                    return validation.isBool(obj);
                }
            },

            methods = {

                validate: function (param, name, location) {

                    var $element = this.$element,
                        data = $element.data("ga-" + name.toLowerCase()),
                        isValid;
                    //pageLoc = $(location).attr('href');

                    if (!validation[param.validation]) {

                        throw new TypeError("Unknown validation type");
                    }

                    // Check the value.
                    isValid = validation[param.validation](data);

                    if (!isValid) {

                        throw new Error("object validation error on " + name);
                    }

                    // Assign the value.
                    // Some analytics methods accept numbers as strings so we check the return type.
                    switch (param.type) {
                        case "integer":
                            return data ? parseInt(data, 10) : null;
                        case "float":
                            return data ? parseFloat(data) : null;
                        case "boolean":
                            return data ? Boolean(data) : null;
                        case "currentloc":
                            return data;
                        default:
                            // Default to string.
                            return data ? data + "" : null;
                    }

                },
                createArgs: function () {

                    var binder = this,
                        event = this.event,
                        args = $.map(event, function (val, key, pageLoc) {
                            var pageLoc = $(location).attr('href');

                            var value;

                            if (key === "event") {
                                // We don't want to check for the event property in the DOM.
                                value = val.value;

                            } else {

                                // Validate and return the correct value from the DOM.
                                value = methods.validate.call(binder, val, key, pageLoc);

                            }

                            return value;
                        });

                    return args;
                }
            },

            gaa = function (element, options) {

                this.$element = $(element);
                this.options = $.extend({}, $.fn.gaa.defaults, options);
            };

            gaa.prototype = {
                constructor: gaa,
                trackEvent: function () {
                    var trackedEvent = $.Event("tracked.ga");
                    var currentLoc = $(location).attr('href');

                    this.args = methods.createArgs.call(this);

                    if (this.options.logit) {

                        if (window.console && window.console.log) {

                            // Push the data.
                            console.log("pushing to Google analytics", this.args);
                            this.$element.trigger(trackedEvent).trigger(currentLoc);

                            // this.$element.trigger(currentLocation);

                        }
                    } else {

                        var gaq = window._gaq;

                        if (gaq) {

                            // Set the context for our deferred callback.
                            var binder = this;

                            // Push the data.
                            $.when(gaq.push(args)).done(

                            function () {

                                this.$element.trigger(trackedEvent);

                                //    this.$element.trigger(trackedEvent);

                                // Redirect the location - delayed so that any other page functionality has time to run.
                                setTimeout(function () {
                                    var href = binder.attr("href");

                                    if (href && href.indexOf("#") !== 0) {
                                        window.location = href;
                                    }

                                }, 100);
                            });

                        } else {
                            throw new ReferenceError(" _gaq not there");
                        }
                    }
                }

            };

            // wrapper definition 
            $.fn.gaa = function (options) {
                return this.each(function () {

                    var $this = $(this),
                        data = $this.data("ga"),
                        opts = typeof options === "object" ? options : null;

                    if (!data) {
                        // Check the data and assign if not present.
                        $this.data("ga", (data = new gaa(this, opts)));
                    }

                    // Run the appropriate function is a string is passed.
                    if (typeof options === "string") {

                        data[options]();

                    } else {

                        var handler = data.options.handler.toLowerCase(),
                            // Check for the event attr here as it might be other than the default.
                            event = data.$element.attr("data-ga-event");

                        // Overwrite if necessary.
                        $.extend(data.options, {
                            event: event
                        });

                        // Build the data as we have nothing there.
                        // First assign the event.
                        data.event = $.gaaApi[data.options.event];

                        // Then bind the handler.
                        if (handler === "load") {

                            data.trackEvent();

                        } else {

                            data.$element.on(handler + ".ga", function (e) {

                                e.preventDefault();
                                data.trackEvent();
                            });
                        }
                    }
                });
            };

            // Define the defaults.
            $.fn.gaa.defaults = {
                event: ["trackEvent", "giveLocation"],
                handler: "load",
                logit: false
            };

            // Set the public constructor.
            $.fn.gaa.Constructor = gaa;

            // Let's BEGIN
            $(document).on("ready.ga", function () {

                // Bind using the custom selector.
                $(":ga").each(function () {
                    $(this).gaa();
                });
            });

        }(jQuery, window));

        // Set some options the ones below are the defaults.
        var options = {
            event: "trackEvent", // The event name unprefixed. 
            handler: "click", // The eventhandler to trigger the tracking. 
            // Using 'load' will track immediately.
            logit: true, //to logit

        };

        var options2 = {
            event: "trackPageview", // The event name unprefixed. 
            handler: "click", // The eventhandler to trigger the tracking. 
            // Using 'load' will track immediately.
            logit: true, //to logit
        };

        var options3 = {
            event: "trackPageview", // The event name unprefixed. 
            handler: "load", // The eventhandler to trigger the tracking. 
            // Using 'load' will track immediately.
            logit: true //to logit
        };

        // Binds using the custom selector.  

        $("load.trigger").gaa(options3); //fires a ga onload after domready
        $("button.button1").gaa(options2).click(function () {
            console.log('\nmore button events\n', 'heres the URL:', location.href)
        });

        $("#clickme").gaa(options).click(function () {
            $(this).toggleClass("changeIt");
        });

    }); 
```

**索引.html**

```
<load class="trigger">loading triggers ga event</load>
<button class="button1">fire ga event with address</button>
<button class="button1" id="clickme">multiple events</button> 
```

位置绑定发生在这里，让 jquery 正确使用位置。

```
 event: {
                            value: ["trackPageview",$(location).attr('href')],
                            validation: "isString",
                            type: "string"
                         } 
```

您使用此方法的方法是正确的，但您必须更早地获取位置才能将其放入 ga。反正这个格式好像

```
 $("#button").gaa(options).click(function () {
            $(this).toggleClass("changeIt");
        }); 
```

会让你朝着正确的方向前进。

这是一个有趣的脑痛。这应该使您可以访问 location.href 您以后需要它的地方。这个想法是在 DOM 准备好之后但在 _gaq 执行之前形成一个绑定。

# c# - 具有嵌套自动调整用户控件性能问题的 TableLayoutPanel

> ID：15940334
> 
> 赞同：1
> 
> 时间：2013-04-11T03:39:27.903
> 
> 标签：c#, winforms

使用 TableLayoutPanel 时，我面临着令人讨厌的性能问题。我有一个带有 RadioButton 和 LinkLabel 的简单用户控件。LinkLabel 的文本是动态的，因此整个控件的 AutoSize 属性设置为 true。

现在我有一个面板，其中 AutoScroll 设置为 true，TableLayoutPanel 自动调整大小，里面有 2 列。此 TableLayoutPanel 填充了上述用户控件：

```
private void PopulateLocationItemsTable(Control[] Controls)
{
    //Suspend outher Panel and set AutoScroll to false just in case.
    panelLocationItemsTableCountainer.SuspendLayout();
    panelLocationItemsTableCountainer.AutoScroll = false;
    //Suspend TableLayoutPanel
    tableLocationItems.SuspendLayout();
    Controls = Controls.OrderBy(c => c.Text).ToArray();
    //Populate left column
    int verticalPosition = 3;
    int leftColumnControlsNumber = Controls.Length / 2;
    for (int i = 0; i < leftColumnControlsNumber; i++)
    {
       tableLocationItems.Controls.Add(Controls[i], 0,0);
       Controls[i].Location = new Point(10, verticalPosition);
       verticalPosition += 17;
    }
    //Populate right column
    verticalPosition = 3;
    for (int i = leftColumnControlsNumber; i < Controls.Length; i++)
    {
        tableLocationItems.Controls.Add(Controls[i], 0, 1);
        Controls[i].Location = new Point(10, verticalPosition);
        verticalPosition += 17;
    }
    //Resume TableLayoutPanel
    tableLocationItems.ResumeLayout(true);
    //And restore outher Panel state
    panelLocationItemsTableCountainer.AutoScroll = true;
    panelLocationItemsTableCountainer.ResumeLayout(true);
} 
```

问题是用户控件最初填充在 FormLoad 事件中，并且 Form 在实际出现之前只挂起大约 10 秒。这对我来说是完全不能接受的。

如果我将用户控件的 AutoSize 属性设置为 false，此问题就会消失。我还尝试将用户控件直接放在外部面板上，它也可以正常工作。问题出在 TableLayoutPanel 上。有没有人遇到过这样的问题并找到了解决方案？当然，我可以将我的用户控件直接放置在计算正确坐标的面板上，但使用 TableLayoutPanel 是此类任务的“正确”方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:48:52.910

使用 TableLayoutPanel 是正确的方法，但您需要将该控件中的列视为静态宽度。我有一个应用程序，我在使用该面板时遇到了几乎完全相同的问题，并意识到我一直在看错。

如果有两列，并且我的容器（例如表单）是 300 像素宽，那么每列是 150 像素宽（减去填充和填充），因此这些列内的控件必须做出反应，而不是列做出反应。

您真正需要以这种方式看待它的另一个原因是，引擎不会首先在内存中布局所有内容（就像 WPF 框架所做的那样），因此它的核心效率非常高，因为它会立即提交更改。

# java - Implications of setVisible() method in Swing

> ID：15940335
> 
> 赞同：2
> 
> 时间：2013-04-11T03:39:50.920
> 
> 标签：java, swing, user-interface, paintcomponent

I'm writing a program that uses a few components in a GUI. However, I don't need all of them showing at the same time. In addition, depending on the user's input, there may be times once a component is not in use anymore, that it may or may not be needed again.

So far I have simply just invoked `setVisible(false)` for each component that I do want to show on the screen. If they are needed again, i simply make them visible.

My question is this. Does setting a component's visibility to false have major implications on performance of a program (generally speaking)? Does the `paintComponent` method paint a component that is not visible and then just does not show it, or does it ignore it all together?

Also, is it better to just to remove the component from a container instead?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:42:27.017

If it is not visible it not being drawn. Lets say I made a button and then made it so it prints "Hello" when I press it. If the button `setVisible()` is false I won't be able to click on it, its not their.

# c# - Syntax error (missing operator) in query with parenthesized FROM clause

> ID：15940336
> 
> 赞同：3
> 
> 时间：2013-04-11T03:40:17.383
> 
> 标签：c#, asp.net, sql, ms-access, join

I am working with asp.NET and C# with an access database to create a web application.

My current issue is with an SQL statement. In the project i have already successfully used a string value to build and store a query. Because it is stored in a string it is a bit ugly to look at. The problem is with this last query i am writing. It has 2 inner joins in it and i am unsure what exactly is wrong. The error i get is a syntax error (missing operator) and it then lists everything inside the parenthesis. Here is the query:

```
SELECT Employee.[First Name], Employee.[Last Name], Employee.[Email],
       Departments.[Department]
FROM (
    Employee INNER JOIN EmpDept ON Employee.[EmpUserName] = EmpDept.[EmpUserName]
    INNER JOIN Departments ON Departments.[Department Number] = '2'
)
WHERE Departments.[Campus]='Clarion'; 
```

It is very ugly like this, i know.. Im hoping that since this is a syntax error it wont be too hard.

This query is designed to return the name, email, and department of an employee. The 2 is given with c# code and is determined earlier in the code, but it stands for a certain department. The empDept table goes between the Departments table and the employee table so an employee can be in more than one department.

Any help is greatly appreciated. Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T03:45:49.660

只需删除括号。他们强制数据库尝试将整个表达式视为单个表，这是不正确的。

另外，根据您的描述，我将编写查询以将连接中的部门与 EmpDept 表中的内容相匹配，然后使用 WHERE 子句过滤到部门“2”。现在，您将 Department 表过滤到部门“2”，但使其与查询的其余部分*无条件相关。*这意味着您要从任何部门提取员工记录。

最后，我认为养成使用表别名的习惯是一个好习惯。它不仅使您的代码更短，而且更高级的查询通常会从同一个表的多个实例中提取，并且别名可以明确您指的是表的哪个实例。

```
SELECT e.[First Name], e.[Last Name], e.[Email], d.[Department]
FROM Employee e
INNER JOIN EmpDept ed ON e.[EmpUserName] = ed.[EmpUserName]
INNER JOIN Departments d ON d.[Department Number] = ed.[Deptartment Number]
WHERE d.[Campus]='Clarion' AND d.[Department Number] = '2'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T03:49:29.257

尝试这个

```
SELECT Employee.[First Name], Employee.[Last Name],
 Employee.[Email], Departments.[Department] 
FROM Employee 
 INNER JOIN EmpDept ON Employee.[EmpUserName] = EmpDept.[EmpUserName]
 INNER JOIN Departments ON EmpDept.[DepartmentId] = Departments.[Id]
WHERE Departments.[Campus]='Clarion' 
AND Departments.[Department Number] = '2' 
```

您将需要 EmpDept 表上与 Departments 表匹配的 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:15:04.840

`FROM`如果访问包含多个连接，则访问需要在子句中使用括号。作为第一步，在 Access 查询设计器中尝试这样的查询。

```
SELECT
    Employee.[First Name],
    Employee.[Last Name],
    Employee.[Email],
    Departments.[Department]
FROM 
    (Employee
    INNER JOIN EmpDept
    ON Employee.[EmpUserName] = EmpDept.[EmpUserName])
    INNER JOIN Departments
    ON Departments.[Department Number] = '2'
WHERE Departments.[Campus]='Clarion'; 
```

我认为我正确放置了括号；您可以在查询设计器中确认。但是，我对第二个`ON`条款感到困惑。

```
ON Departments.[Department Number] = '2' 
```

该子句不引用联接*“左侧”*的任何字段。我不明白它应该完成什么，我不确定数据库引擎是否会在那里做你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T03:50:15.867

```
SELECT Employee.[First Name], Employee.[Last Name], Employee.[Email], Departments.[Department] 
FROM Employee 
INNER JOIN EmpDept ON Employee.[EmpUserName] = EmpDept.[EmpUserName] 
INNER JOIN Departments ON Departments.[Department Number] =  Employee.[Department Number]
WHERE Departments.[Campus]='Clarion' and Departments.[Department Number]=2 
```

squery中有一个小语法错误，最好用列名连接表并在where子句中提及列值条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:31:58.330

尝试这个：

```
SELECT Employee.[First Name], Employee.[Last Name], Employee.[Email],
    Departments.[Department]
FROM Employee
    INNER JOIN EmpDept ON Employee.[EmpUserName] = EmpDept.[EmpUserName]
    INNER JOIN Departments ON EmpDept.[Department Number] = Departments.[Department Number]
        /* Or whatever your foreign key between Departments and EmpDept is */
WHERE Departments.[Department Number] = '2'
    AND Departments.[Campus] = 'Clarion' 
```

如果您对子查询有兴趣，则需要给它起别名并确保它自己形成一个完整的查询：

```
SELECT e.[First Name], e.[Last Name], e.Email, e.Department
FROM
(
    SELECT Employee.[First Name], Employee.[Last Name], Employee.[Email],
        Departments.[Department], Departments.Campus
    FROM Employee
        INNER JOIN EmpDept ON Employee.[EmpUserName] = EmpDept.[EmpUserName]
        INNER JOIN Departments ON EmpDept.[Department Number] = Departments.[Department Number]
            AND Departments.[Department Number] = '2'
) AS e
WHERE e.Campus = 'Clarion' 
```

# authorization - Not been able to give role based permission in drools guvnor using jboss AS 7

> ID：15940337
> 
> 赞同：0
> 
> 时间：2013-04-11T03:40:25.247
> 
> 标签：authorization, jaas, role-based, drools-guvnor, role-base-authorization

I am in a BRMS technology project in financial sector. Using Drools Guvnor 5.5.0.Final with jboss-as-7.2.0.Alpha1-SNAPSHOT server. I configured the login page in guvnor using jaas successfully. Now I need to have the role Based Permission. But not been able to implement it yet. The beans,xml is

```
 <security:IdentityImpl>
    <s:modifies/>

    <!-- No real authentication: demo authentication for demo purposes -->
    <!--<security:authenticatorClass>org.drools.guvnor.server.security.DemoAuthenticator</security:authenticatorClass>-->

    <!-- JAAS based authentication --> 
    <security:authenticatorName>jaasAuthenticator</security:authenticatorName>

    <!-- IDM based authentication (supports LDAP, see Seam 3 and PicketLink IDM documentation) -->
    <!--<security:authenticatorClass>org.jboss.seam.security.management.IdmAuthenticator</security:authenticator>-->
  </security:IdentityImpl>

  <security:jaas.JaasAuthenticator>
    <s:modifies/>
    <!--
      The following one will use the jaas configuration called "other",
      which in jboss AS means you can use properties files for users.
    -->
    <s:jaasConfigName>other</s:jaasConfigName>
  </security:jaas.JaasAuthenticator>

  <!-- SECURITY AUTHORIZATION CONFIGURATION -->
  <!--
      This is used to enable or disable role-based authorization. By default it is disabled.
  -->
    <component name="org.jboss.seam.security.permission.PermissionResolver">
        <property name="enableRoleBasedAuthorization">true</property>
        </component> 
```

AND THE standalone.xml is

```
<security-domain name="other" cache-type="default">
                    <authentication>
                        <login-module code="org.jboss.security.auth.spi.UsersRolesLoginModule" flag="required">
                            <module-option name="usersProperties" value="${jboss.server.config.dir}/users.properties"/>
                            <module-option name="rolesProperties" value="${jboss.server.config.dir}/roles.properties"/>
                            <module-option name="defaultUsersProperties" value="${jboss.server.config.dir}/users.properties"/>
                            <module-option name="defaultRolesProperties" value="${jboss.server.config.dir}/roles.properties"/>
                            <module-option name="password-stacking" value="useFirstPass"/>
                        </login-module>
                    </authentication>
                </security-domain> 
```

I don't know what am I missing. Can anyone suggest me over the same. Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:46:01.793

Solved the Issue. The issue was with one of the class file of seam and configuration of beans.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T19:52:16.960

有关 guvnor 的身份验证，请访问以下链接。

[https://community.jboss.org/message/817783#817783](https://community.jboss.org/message/817783#817783)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T12:41:48.677

在我的例子中，需要对 Drools 进行三个特定的更改才能使 Drools Guvnor 5.5.0.Final 与 JBoss EAP 6（基于 AS 7.1 并且应该转换为 AS 7.2）一起工作：修复 XML、替换 seam-security 和补丁Guvnor 文件。

在 beans.xml 中，该`jaasConfigName`标记未指定命名空间并导致错误。通过更改`jaasConfigName`为来解决此问题`security:jaasConfigName`。

```
<security:jaas.JaasAuthenticator>
  <s:modifies/>
  <!--
    The following one will use the jaas configuration called "other",
    which in jboss AS means you can use properties files for users.
  -->
  <security:jaasConfigName>other</security:jaasConfigName>
</security:jaas.JaasAuthenticator> 
```

Guvnor 使用的 Seam Security 版本包含一个错误。要解决此问题，请修改 Guvnor WAR：替换`seam-security-3.1.0.Final.jar`为`seam-security-3.2.0.Final.jar`和。`seam-security-api-3.1.0.Final.jar``seam-security-api-3.2.0.Final.jar`

Guvnor 的 SecurityServiceImpl 类包含一个错误。要解决此问题，请按照[http://drools.46999.n3.nabble.com/How-configure-Guvnor-5-4-JAAS-with-jboss-7-0-2-tp4020424p4020854.html修补并重新编译该类](http://drools.46999.n3.nabble.com/How-configure-Guvnor-5-4-JAAS-with-jboss-7-0-2-tp4020424p4020854.html)

请注意，Seam Security 和 SecurityServiceImpl 错误已在 GitHub ( [https://github.com/droolsjbpm/guvnor/tree/5.5.x](https://github.com/droolsjbpm/guvnor/tree/5.5.x) ) 上的 Guvnor 5.5.x 分支上得到解决，因此这些问题的最简单解决方案可能是下载并构建最新版本。（这就是我所做的。）

有了这些更改，身份验证和基于角色的授权都应该起作用。在我的测试环境中，我演示了包限制的开发人员访问权限。

见[https://community.jboss.org/thread/206645](https://community.jboss.org/thread/206645) , [https://issues.jboss.org/browse/GUVNOR-1989](https://issues.jboss.org/browse/GUVNOR-1989) , [https://issues.jboss.org/browse/GUVNOR-1976](https://issues.jboss.org/browse/GUVNOR-1976) , [http:// /drools.46999.n3.nabble.com/How-configure-Guvnor-5-4-JAAS-with-jboss-7-0-2-td4020424.html](http://drools.46999.n3.nabble.com/How-configure-Guvnor-5-4-JAAS-with-jboss-7-0-2-td4020424.html)和[http://drools.46999.n3.nabble。 com/rules-users-Error-JAAS-Authentication-with-Guvnor-5-5-0-and-Authorization-Error-tt4023826.html](http://drools.46999.n3.nabble.com/rules-users-Error-JAAS-Authentication-with-Guvnor-5-5-0-and-Authorization-Error-tt4023826.html)获取背景信息。

# css - 有没有办法通过 CSS 将图像高度设置为行高？

> ID：15940338
> 
> 赞同：27
> 
> 时间：2013-04-11T03:40:34.610
> 
> 标签：css

我有一个与文本内联的图像。该图像是 32x32。我希望将它*自动*调整为包含它的行高，以便它适合。有没有办法做到这一点？

我希望能够将图像放置在行高未知的任何地方并正确调整大小。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-11T05:28:41.453

利用`img{height: 1em;} /* whatever your line height may be, it is affected by its font-size /*`

请参阅此**[更新的演示](http://jsfiddle.net/cpPLZ/3/)**（增加或减小字体大小以查看结果。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-11T04:33:09.930

如果您明确设置两者，则可以将高度设置为行高，例如

```
* { line-height: 1.3; }
img { height: 1.3em; } 
```

如果您不想设置行高，则需要猜测浏览器默认值（通常取决于字体）。这可能是一个很好的猜测：

```
img { height: 1.12em; } 
```

要使图像正确适合文本，从而不会导致实际行高增加，您还需要将其垂直对齐到行框的底部，而不是文本基线（更高）：

```
img { vertical-align: bottom; } 
```

如果您需要让图像位于基线（默认）上，则需要猜测底部与基线之间的距离，并将图像高度相应地设置得更小。在这种情况下，`height: 1em`，或者可能具有更小的值，可能是一个不错的猜测。

# javascript - Can I use jQuery with Node.js? Is it good pair?

> ID：15940339
> 
> 赞同：0
> 
> 时间：2013-04-11T03:40:52.450
> 
> 标签：javascript, jquery, node.js

Can I use jQuery with Node.js? Is it good pair?

What are drawbacks if paring these 2 technologies?

# perl - Perl Catalyst，传递到 stash 2 个模板部分

> ID：15940340
> 
> 赞同：0
> 
> 时间：2013-04-11T03:40:57.850
> 
> 标签：perl, catalyst

我开始学习 Perl Catalyst，它太棒了！！！但是，我在模板化方面遇到了一点问题。

我正在尝试将两个模板变量传递给页面（页眉和页脚），我在 Controller 函数中所做的是

```
$c->stash(template => 'header.html');
//other page contents
$c->stash(template => 'footer.html'); 
```

但这只会输出footer.html（它应该并且看起来合乎逻辑）

这种方法的方法是什么？我搜索了谷歌，但找不到很多有用的结果（至少我可以理解和使用的结果）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T03:48:52.643

您需要创建一个视图。

[https://metacpan.org/pod/Catalyst::Manual::Tutorial::02_CatalystBasics#Hello-World-Using-a-View-and-a-Template](https://metacpan.org/pod/Catalyst%3a%3aManual%3a%3aTutorial%3a:02_CatalystBasics#Hello-World-Using-a-View-and-a-Template)

另外，看看包装器在 TT 中是如何工作的——它们真的很酷。

[http://www.template-toolkit.org/docs/manual/Directives.html#section_WRAPPER](http://www.template-toolkit.org/docs/manual/Directives.html#section_WRAPPER)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T11:35:10.817

您不能在 stash 中传递 2 个模板。只会保留最后一个值。但是，这样做的方法是将页脚模板包含在页眉中。这些命令`include`非常`process`有用。

# ext.net - 在单击按钮时加载 GridPanel 时抛出错误

> ID：15940344
> 
> 赞同：0
> 
> 时间：2013-04-11T03:41:44.747
> 
> 标签：ext.net

尝试在单击按钮时加载 GridPanel 时出现 javascript 错误。调用 page_load 事件时，相同的功能正在工作。

代码：

```
 private DataTable GetDataTable()
    {
       DataTable table = new DataTable();

       table.Columns.AddRange(new DataColumn[] {
           new DataColumn("Company")   { ColumnName = "Company",    DataType =        typeof(string) },
           new DataColumn("Price")     { ColumnName = "Price",      DataType =    typeof(double) },
           new DataColumn("Change")    { ColumnName = "Change",     DataType =  typeof(double) },
           new DataColumn("PctChange") { ColumnName = "PctChange",  DataType = typeof(double) },
           new DataColumn("PctChange") { ColumnName = "LastChange", DataType = typeof(DateTime) }
       });

       foreach (object[] obj in this.Data)
       {
           table.Rows.Add(obj);
       }

       return table;
    }

    private object[] Data
    {
       get
       {
           DateTime now = DateTime.Now;

           return new object[]
           {
               new object[] { "3m Co", 71.72, 0.02, 0.03, now },
               new object[] { "Alcoa Inc", 29.01, 0.42, 1.47, now },
               new object[] { "Altria Group Inc", 83.81, 0.28, 0.34, now },
               new object[] { "American Express Company", 52.55, 0.01, 0.02, now },
               new object[] { "American International Group, Inc.", 64.13, 0.31, 0.49, now },
               new object[] { "AT&T Inc.", 31.61, -0.48, -1.54, now },
               new object[] { "Boeing Co.", 75.43, 0.53, 0.71, now },
               new object[] { "Caterpillar Inc.", 67.27, 0.92, 1.39, now },
               new object[] { "Citigroup, Inc.", 49.37, 0.02, 0.04, now },
               new object[] { "E.I. du Pont de Nemours and Company", 40.48, 0.51, 1.28, now },
               new object[] { "Exxon Mobil Corp", 68.1, -0.43, -0.64, now },
               new object[] { "General Electric Company", 34.14, -0.08, -0.23, now },
               new object[] { "General Motors Corporation", 30.27, 1.09, 3.74, now },
               new object[] { "Hewlett-Packard Co.", 36.53, -0.03, -0.08, now },
               new object[] { "Honeywell Intl Inc", 38.77, 0.05, 0.13, now },
               new object[] { "Intel Corporation", 19.88, 0.31, 1.58, now },
               new object[] { "International Business Machines", 81.41, 0.44, 0.54, now },
               new object[] { "Johnson & Johnson", 64.72, 0.06, 0.09, now },
               new object[] { "JP Morgan & Chase & Co", 45.73, 0.07, 0.15, now },
               new object[] { "McDonald\"s Corporation", 36.76, 0.86, 2.40, now },
               new object[] { "Merck & Co., Inc.", 40.96, 0.41, 1.01, now },
               new object[] { "Microsoft Corporation", 25.84, 0.14, 0.54, now },
               new object[] { "Pfizer Inc", 27.96, 0.4, 1.45, now },
               new object[] { "The Coca-Cola Company", 45.07, 0.26, 0.58, now },
               new object[] { "The Home Depot, Inc.", 34.64, 0.35, 1.02, now },
               new object[] { "The Procter & Gamble Company", 61.91, 0.01, 0.02, now },
               new object[] { "United Technologies Corporation", 63.26, 0.55, 0.88, now },
               new object[] { "Verizon Communications", 35.57, 0.39, 1.11, now },
               new object[] { "Wal-Mart Stores, Inc.", 45.45, 0.73, 1.63, now }
           };
       }
     }
     private void createDynamicGrid()
     {
       Store store1 = new Store();
       GridPanel grid = this.GrdPanel;
       Ext.Net.Model model = new Model();
       for (int i = 0; i < 2; i++)
       {
           ModelField modelField = new ModelField();
           if (i == 0)
               modelField.Name = "Company";
           else
               modelField.Name = "Price";

           model.Fields.Add(modelField);

       }

       store1.Model.Add(model);
       store1.DataSource = this.GetDataTable();
       store1.DataBind();
       grid.Store.Add(store1);
       grid.SelectionModel.Add(new RowSelectionModel { Mode = SelectionMode.Single });
       grid.ColumnModel.Columns.Add(new ColumnBase[] { 
           new Column 
           {
               Text = "Company",
               DataIndex = "Company",
               Flex = 1
           },
           new Column
           {
               Text = "Price",
               DataIndex = "Price"

           }
       });
       grid.Render();
    }

    protected void btnSearch_Click(object sender, DirectEventArgs e)
    {
       createDynamicGrid();
    } 
```

设计师观点：

```
 <ext:Button runat="server" ID="btnSearch" Text="Search" Icon="FeedMagnify" X="150"
               Y="10">
               <DirectEvents>
                   <Click OnEvent="btnSearch_Click" />
               </DirectEvents>
           </ext:Button> 
```

如果我在 page_load 上调用 createDynamicGrid()，那么它工作正常。

错误消息：“Microsoft JScript 编译错误：预期标识符”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:06:18.367

也许以下示例会有所帮助：[http ://examples.ext.net/#/XRender/Basic/Add_Items/](http://examples.ext.net/#/XRender/Basic/Add_Items/)

```
<%@ Page Language="C#" %>

<%@ Register assembly="Ext.Net" namespace="Ext.Net" tagprefix="ext" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Examples</title>
    <script runat="server">
    public void Button_Click(object sender, DirectEventArgs e)
    {
        CreateGrid().Render(this.Container1, RenderMode.AddTo);
    }

    public GridPanel CreateGrid()
    {
        // string id = parameters["id"];

        List<object> data = new List<object>();

        for (int i = 1; i <= 10; i++)
        {
            data.Add(new { ID = "P" + i, Name = "Product " + i });
        }

        GridPanel grid = new GridPanel
            {
                Height = 200,
                EnableColumnHide = false,
                Store = 
                    { 
                        new Store 
                            { 
                                Model = {
                                    new Model {
                                        IDProperty = "ID",
                                        Fields = 
                                            {
                                                new ModelField("ID"),
                                                new ModelField("Name")
                                            }
                                    }
                                },
                                DataSource = data
                            }
                    },
                ColumnModel =
                    {
                        Columns = 
                            { 
                                new Column { Text = "Products's Name", DataIndex = "Name" }
                            }
                    }
            };

        return grid;
    }

    </script>
</head>
<body>
    <ext:ResourceManager runat="server" />

    <ext:Container runat="server" ID="Container1"></ext:Container>

    <ext:Button runat="server" Text="Create grid" OnDirectClick="Button_Click"></ext:Button>
</body>
</html> 
```

# windows - Git 不会还原或提交它认为已修改的文件

> ID：15940349
> 
> 赞同：16
> 
> 时间：2013-04-11T03:42:04.480
> 
> 标签：windows, git, png, mingw, msysgit

我按照[本教程](http://john.albin.net/git/convert-subversion-to-git)将 SVN 存储库转换为 Git 。现在似乎无法像[此答案](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository/359759#359759)中建议的那样提取子存储库。

请原谅这篇长篇文章，但大部分文本都是格式良好的 git 输出。

操作系统：Windows 8 命令行：MinGW Git 版本：1.8.1.msysgit.1

除非您有一个干净的暂存区并且没有修改过的文件，否则提取子存储库的过程似乎不起作用。

`git status`告诉我我有一个修改过的文件，即使这是一个新的 SVN 导入。好吧，让我们试着摆脱它。

尝试还原文件。

```
user$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified: folder with space/folder/toolbar.png
#
no changes added to commit (use "git add" and/or "git commit -a")

user$ git checkout -- "folder with space/folder/toolbar.png"

user$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified: folder with space/folder/toolbar.png
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

这没有用，但我真的不在乎我是否提交它，所以我接下来会尝试。

```
user$ git commit -a -m "Testing if committing fixes it"
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified: folder with space/folder/toolbar.png
#
no changes added to commit (use "git add" and/or "git commit -a")

user$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified: folder with space/folder/toolbar.png
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

通过跳过暂存进行提交是行不通的，所以让我们先尝试暂存它。

```
user$ git add "folder with space/folder/toolbar.png"

user$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified: folder with space/folder/toolbar.png
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

不起作用，所以我很难过......去问问更聪明的人。

我是 git 新手，但对 Hg 很熟悉，并且一直在阅读[这个在线教程](http://git-scm.com/book)来帮助自己入门。

我完全有可能搞砸了一个简单的命令。

**已经尝试过：** 我四处寻找解决我的特定问题的方法，但运气不佳。我偶然发现了这个似乎相关但并不能完全解决我的问题的[答案。](https://stackoverflow.com/questions/2016404/git-status-shows-modifications-git-checkout-file-doesnt-remove-them)

**编辑：可能有趣的事情** 这是让我感到困惑的部分。不久前，我已将此 repo 推送到在线存储库中。重新克隆后，repo 仍然认为文件已修改（即`git status`返回相同的结果，并且我已经设置`git config --global core.autocrlf false`并通过运行`git config --global core.autocrlf`确实返回 false 进行验证）。

**编辑 2：找到了修复，但问题仍然不明白** 我已经设法通过简单地从系统中删除文件、暂存区域然后提交更改来修复存储库。在此之后要取回文件，我只需将其复制回来并将其提交到存储库。

这个问题虽然已经解决，但只会让我更加困惑。

当我在删除文件时，我注意到如果我将存储库重置为 HEAD，其最后一次提交已删除文件， git status 将指示没有任何更改并且文件未被跟踪但文件将被**恢复在我的工作树**中。考虑到它在 git 中被标记为已删除，这很奇怪......

只有在第二次删除它之后，即使 git 不再记得它，我才设法真正删除它，这样`git reset`就`git reset --hard`不会恢复文件。

如果有人可以解释我是如何进入这种状态的，如果它是 git 中的错误或正常行为，我将不胜感激。

**我的怀疑是** 我丢失了我使用的命令序列，但发生的事情是这样的：文件是`Images/toolbar.png`，我已经导航到`Images`文件夹中。

在我从文件系统中删除它之后，git 检测到了这样的变化：

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       deleted: toolbar.png
#       deleted: ../images/toolbar.png
# 
```

`images`请注意文件夹没有大写的事实！这是在忽略路径大小写的 Windows 中运行的。我怀疑这可能是问题的一部分......

我真的很困惑，但我的问题已经消失了。所以这篇文章只是作为一种好奇心，尽管我无法在某个地方复制它在从 SVN 转换中存在的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-07T09:21:54.620

不久前我有一个类似的问题。

这个文件的大小写或它所在的目录是否在任何时候都发生了变化？

我有一个大写字母的目录，它被改为全小写（假设它从 t`/Foo`变为`/foo`）。它给了我你描述的所有相同的问题。

每当我修改文件时，它都会给我类似的输出：

```
#       modified: bar.txt
#       modified: ../Foo/bar.txt 
```

我也有同样的问题，提交或重置没有产生任何结果。

我认为问题的原因是 Windows 文件路径不区分大小写，但 Unix 是。由于许多命令行工具（如 Git）是在 Unix-y 系统上开发的，它们有时不能很好地处理这种差异，并且当文件添加`Foo/bar.txt`为`foo/bar.txt`. 我认为这让 Git 认为有两个不同的文件，实际上只有一个。

我的最终修复与您的相同，从历史记录中删除整个目录，然后重新添加它（并且永远不会再更改大写字母）。这也引起了你描述的同样的奇怪，我不得不在它之前把它删除两次。

无论如何，我知道这不是一个明确的答案，但我已经能够重现这个问题，所以我很确定这是导致它的原因（至少对我来说）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-24T21:46:47.877

我遇到了类似的问题，原因是两个文件与我的计算机看到的名称相同。

我不断收到的消息：

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   images/contact_seller.GIF
# 
```

发生这种情况是因为 repo 的初始提交是从格式化区分大小写的 MacBook 完成的，并且错误出现在格式化不区分大小写的 iMac 上。

在区分大小写的机器上，您可以看到两个文件

```
SwedishChef$ ls images/contact_seller*
images/contact_seller.GIF   images/contact_seller.gif 
```

这在第二台机器上是无效的，所以 git 不得不做一些事情。

我只需要重命名文件并提交这些更改。

# iphone - Placeholder text misaligned in UITextField of UISearchBar

> ID：15940350
> 
> 赞同：14
> 
> 时间：2013-04-11T03:42:09.230
> 
> 标签：iphone, ios, ios5, uitextfield, uisearchbar

I'm trying to customize UISearchBar's font through appearance proxy. It works, but somehow, the placeholder text is not centered vertically. I tried to set the vertical alignment property; the placeholder text would get centred but text entered would be slightly below the center line... Is there any way to fix this?

**Edit: Code I used to add custom font:**

```
[[UITextField appearanceWhenContainedIn: [UISearchBar class], nil]
                                setFont: [UIFont customFontWithSize: 17]]; 
```

![placeholder text](https://i.stack.imgur.com/zWGBs.png)

![normal text](https://i.stack.imgur.com/CcuzH.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-10T03:53:52.227

每当这种情况发生在我身上时，通常是由于一些修改`UIAppearance`无法与`UISearchBar`. 查看您之前可能做过的任何黑客攻击，也许尝试一次将它们评论出来。

在我的特殊情况下，它实际上是对`NSForegroundColor`文本属性的修改，因此这种错位可能与您的字体更改无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:14:53.743

您需要在 searchBar 内设置 textField 的对齐方式。从 UISearch 栏的子视图中获取 textField 并简单地将其对齐设置为中心。试试下面的示例代码。

```
- (void)viewDidLoad
{
    for (UITextField *txt in _searchbar.subviews) {
        if ([txt isKindOfClass:[UITextField class]]) {
            [txt setTextAlignment:NSTextAlignmentCenter];
        }
    }
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

这里 _searchbar 是 UISearchBar 的出口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:57:03.103

```
- (void)viewDidLoad
{

    for (UITextField *txt in search.subviews) {
        if ([txt isKindOfClass:[UITextField class]]) {
            txt.font = [UIFont fontWithName:@"Arial-BoldMT" size:17];
            txt.contentVerticalAlignment = UIControlContentVerticalAlignmentFill;
        }
    }

    [super viewDidLoad];

} 
```

试试这个代码一次。

# javascript - 在选择中替代 onblur/onchange

> ID：15940354
> 
> 赞同：4
> 
> 时间：2013-04-11T03:42:51.713
> 
> 标签：javascript, select, dom-events

当用户在 HTML 框中选择一个选项时，我试图找到一种运行 JavaScript 函数的方法`select`，无论该选项是否已被选中。所以也就`onchange`无从谈起了。

使用的问题`onblur`是（至少在 Chrome 和 Safari 中）在用户单击另一个元素之前不会触发事件。如果用户专注于选择，然后在没有选择选项的情况下点击离开，这也可能很烦人，在这种情况下，我不希望触发事件。

通过为每个选项提供一个处理程序，我能够获得一些成功`onmouseup`，但据我所知，这只适用于 Firefox。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:37:02.887

由于没有人费心回答这个问题，我将发布我的代码的通用版本：

```
<select id="mySelect" onfocus="this.selectedIndex=0;" onchange="userDidSomething(event)">
    <option>Choose one:</option>
    <option>Option 1</option>
    <option>Option 2</option>
</select> 
```

JavaScript：

```
function userDidSomething(event) {
    // Your Code Here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-02T10:07:28.230

尝试使用

```
var s = document.getElementById("mySelect");
s.attachEvent("onchange", function() {
    // function here
}); 
```

# ios - 应用程序进入后台时终止连接

> ID：15940357
> 
> 赞同：1
> 
> 时间：2013-04-11T03:43:09.143
> 
> 标签：ios, uiwebview, nsurlconnection

我的 iOS（版本 5-6.2）应用程序中有许多 UIWebView。当应用程序进入后台时，一切运行顺利。但是，当它在大约 10 分钟后进入前台时，我会收到一条错误消息，或者说“找不到有效的主机名”或“连接超时”。

我假设这与我在`applicationDidEnterBackground:`被调用时对这些 UIWebViews 缺乏行动有关。我怎么能杀死这些连接？我知道我需要使用通知中心，但与以前的此类问题不同，我使用的是 ARC，因此没有`dealloc`可以删除观察者的方法。

**编辑**

这是我的一些网络视图代码：WebViewController.m

```
NSURLRequest *request = [NSURLRequest requestWithURL:urlToLoad  cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30.0f];
// load the request to the UIWebView _webView
[_webView loadRequest:request];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:TRUE];
if (connection) {
    receivedData = [NSMutableData data];
} 
```

任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:08:20.970

如果您正在执行一些重要或珍贵的下载或上传操作并且您的应用程序进入后台，在这种情况下，您可以向“IOS”请求额外的时间来完成您的工作，当您的应用程序处于后台时，它会额外授予 10 分钟的时间来完成该操作模式。

但请记住，您的操作必须重要且可接受，否则您的应用可能会被 Apple 审核流程拒绝。

有关更多详细信息，请参阅 Apple 文档以了解[后台执行和多任务处理](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

现在，结束我的一些操作的时间点，在后台继续您的任务，您可以使用以下方法执行，无需管理 Application Delegate 方法。只需使用以下代码段，不要使用委托进行下载或上传。

```
if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) { //Check if our iOS version supports multitasking I.E iOS 4
    if ([[UIDevice currentDevice] isMultitaskingSupported]) { //Check if device supports mulitasking
        UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance
        __block UIBackgroundTaskIdentifier background_task; //Create a task object
        background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {
            [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
            background_task = UIBackgroundTaskInvalid; //Set the task to be invalid
            //System will be shutting down the app at any point in time now
        }];
        //Background tasks require you to use asyncrous tasks
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            //Perform your tasks that your application requires
            NSLog(@"\n\nRunning in the background!\n\n");

            NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"YOUR HOST URL"]];
            NSURLResponse *response = nil;
            NSError *requestError = nil;
            NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];

            NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
            NSLog(@"ResponseString:%@",responseString);

            [application endBackgroundTask: background_task]; //End the task so the system knows that you are done with what you need to perform
            background_task = UIBackgroundTaskInvalid; //Invalidate the background_task
        });
    }
} 
```

# c# - 在 VSTO 中获取 Excel 工作簿的哈希码以启用基于状态的按钮

> ID：15940358
> 
> 赞同：6
> 
> 时间：2013-04-11T03:43:09.380
> 
> 标签：c#, .net, excel, com, vsto

我正在为 excel 创建一个 VSTO 功能区插件，并将一些工作簿状态信息存储在我的应用程序中，用于更新已启用的可视按钮。考虑到可能有多个工作簿，我将此状态对象存储在 ThisAddIn 类的字典中。我的问题是我不知道如何为工作簿获取唯一的哈希/密钥/Guid，因为我得到的只是一个不断更改哈希的 COM 包装器。很公平，我完全理解这一点。

我使用了很长时间的一种解决方案是创建一个 guid 并将其存储在工作簿的 CustomDocumentProperties 中，并基于它作为键映射状态。这至少有效，但是如果我创建工作簿的副本并在同一个应用程序实例中打开它并且现在有多个具有相同 guid 的工作簿，它将失败。

我现在有了一个想法，我想我可以在 Workbook_Open 事件上刷​​新这个 Guid。但这似乎仍然是一个狡猾的解决方案。

我在这里找到的第二个解决方案：http: [//social.msdn.microsoft.com/Forums/en-US/vsto/thread/04efa74d-83bd-434d-ab07-36742fd8410e/](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/04efa74d-83bd-434d-ab07-36742fd8410e/)

所以我使用了那些人的代码并创建了这个：

```
public static class WorkbookExtensions
{
    public static IntPtr GetHashery(this msExcel.Workbook workbook)
    {
        IntPtr punk = IntPtr.Zero;
        try
        {
            punk = Marshal.GetIUnknownForObject(workbook);
            return punk;
        }
        finally
        {
            //Release to decrease ref count
            Marshal.Release(punk);
        }
    }
} 
```

它在几分钟内运行良好，直到它在访问 Application.ActiveWorkbook 时开始给我一个臭名昭著的错误“无法使用已与其底层 RCW 分离的 COM 对象”。

这是引用 Workbook COM 对象的安全方式吗？如果我有两个功能区应用程序都使用此方法来获取单个工作簿 GUID，该怎么办？如果其中一个应用程序在我的状态对象上运行垃圾收集器，它调用终结器来调用 Marshal.FinalReleaseComObject(workbook)，该怎么办？有什么方法可以让我获得工作簿的 Ref Count，这样我就不会在其他功能区应用程序完成之前调用 FinalRelease？清理 VSTO 中的 Workbook COM 对象以保持与这些其他应用程序公平竞争的最佳实践是什么？

当然，我不是第一个想要根据工作簿状态启用按钮的人，其他人是如何做到这一点的？我在 Stack Overflow 上查看了其他几篇文章，但没有一篇对 Workbook Guid 解决方案有帮助。

我正在使用功能区设计器，并连接到工作簿加载和停用事件。

在此先感谢，希望我包括了所有细节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-06T16:32:29.687

我最终通过简单地将 IntPtr 转换为 long 来解决这个问题，然后处理 IntPtr 不会影响我。我不需要保留 IntPtr，因为我真正需要的只是工作簿的独特之处。

以下代码允许我存储特定于工作簿的状态信息，因此我可以根据自定义对象工作簿状态更新功能区中按钮的视觉状态。您可以在自定义 WorkbookState 类中存储您想要的任何信息，但通常它是您不希望保留在电子表格本身中的特定于会话的信息。

单独的工作簿扩展：

```
public static class WorkbookExtensions
{
    public static long GetHashery(this msExcel.Workbook workbook)
    {
        if (workbook == null)
        {
            throw new ArgumentNullException("workbook");
        }

        IntPtr pUnknown = IntPtr.Zero;
        try
        {
            pUnknown = Marshal.GetIUnknownForObject(workbook);
            return pUnknown.ToInt64();
        }
        finally
        {
            // GetIUnknownForObject causes AddRef.
            if (pUnknown != IntPtr.Zero)
            {
                Marshal.Release(pUnknown);
            }
        }
    }
} 
```

然后在我的 VSTO/ExcelDna ThisAddIn 类中，我使用上述方法存储所有工作簿状态的映射，以查找唯一的工作簿哈希键：

```
private Dictionary<long, WorkbookState> _workbookStates = new Dictionary<long, WorkbookState>();
public WorkbookState WorkbookState
{
    get
    {
        long hash = Application.ActiveWorkbook.GetHashery();
        WorkbookState state;
        if (!_workbookStates.TryGetValue(hash, out state))
        {
            state = _workbookStates[hash] = new WorkbookState();
        }
        return state;
    }
} 
```

当然，现在我可以从功能区应用程序的任何位置访问我的 WorkbookState，只需调用`ThisAddIn.WorkbookState`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-02T13:27:06.607

您也可以使用 workbook.Application.Hwnd 但这只会在您使用 Excel 2013/2016 时对您有所帮助，它会为每个工作簿打开新窗口。

Excel 2010 在同一窗口下打开所有工作簿。

# regex - notepad++ 或 Visual Studio 编辑器中的正则表达式是否可以将多行替换为自动递增数字？

> ID：15940359
> 
> 赞同：0
> 
> 时间：2013-04-11T03:43:12.747
> 
> 标签：regex, notepad++

例如，更改以下内容（多行）：

```
hello-a
hello-b
hello-c
hello-d 
```

至

```
hello-1
hello-2
hello-3
hello-4 
```

我只是找到正则表达式“hello-[a-zA-Z]*”来匹配“hello-？”，但找不到替换它们以自动添加数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:12:10.193

~~我还不确定**`Notepad++`**，但是~~对于**`Textpad`**，你使用：

```
\i(n)    -or-
\i(n,)   -or-
\i(n,m) 
```

在你的情况下**`\i(1)`**或只是**`\i`**。

此外，在您提供的示例正则表达式中：
**`hello-[a-zA-Z]*`**

它会匹配（正如你所提到的）：

```
hello-a
hello-b
hello-c
hello-d 
```

但它也会匹配“hello-a...a”（“hello-”后跟一个或多个 alpha）：

```
hello-aa
hello-abc
hello-tuvwxyz 
```

并且它也将匹配“hello-”（当后面没有任何内容或后面跟着非 alpha 时）：

```
hello-
hello-#
hello-1 
```

因此，如果这是您想要的，Regex 搜索将是：

```
(hello-)[a-zA-Z]* 
```

如果你想匹配 "hello-" 后只有一个 alpha，Regex 搜索将是：

```
(hello-)[a-zA-Z] 
```

如果您想匹配“hello-”后跟一个或多个 alpha，Regex 搜索将是：

```
(hello-)[a-zA-Z]+ 
```

对于所有这些，Regex 替换将是：

```
\1\i(1) 
```

* * *

基本语法是：

```
\i[(n[,m])] 
```

n 为起点，m 为增量。

```
\i(100,5) --> 100,105,110... 
```

如果没有指定括号（\i 本身），这与 \i(1) 或 \i(1,1) 相同

```
\i --> 1,2,3... 
```

如果指定括号...

如果 n 被省略，则 n 默认为 0。

```
\i(,1) --> 0,1,2...
\i(,100) --> 100,200,300... 
```

如果省略 ",m"，则 m 默认为 1。

```
\i(1) --> 1,2,3...
\i(101) --> 101,102,103... 
```

如果 n 和 m 都被省略 [\i() 本身]，这与 \i(0) 或 \i(0,1) 相同

```
\i() --> 0,1,2... 
```

注意：为了**`\i`**正常工作，您必须**`Replace all`**在整个文档（或整个选择）上。

没有**`ending`**参数。**`\i`**将不断增加替换，直到所有匹配都被替换。

* * *

看来这在**`Notepad++`**.

# ruby-on-rails-3 - Rails中嵌套形式的质量分配错误

> ID：15940363
> 
> 赞同：1
> 
> 时间：2013-04-11T03:43:33.497
> 
> 标签：ruby-on-rails-3, nested-forms, mass-assignment

`transaction.rb`模型：

```
class Transaction < ActiveRecord::Base
  attr_accessible :customer, :tickets_attributes
  has_many :tickets
  accepts_nested_attributes_for :tickets
end 
```

`ticket.rb`模型：

```
class Ticket < ActiveRecord::Base
  attr_accessible :booking_id, :quantity, :transaction_id
  belongs_to :transaction
  belongs_to :booking
end 
```

在视图页面中，我有一个用于多个条目的嵌套 rails 表单`ticket`：

```
<%= form_for(@transaction) do |f| %>
  <%= f.text_field :customer %>

  <% @sezzion.bookings.each do |booking| %>
      <%= booking.bookingdate %>:

      <%= f.fields_for :ticket do |t| %>
         <%= t.text_field :quantity, :value => 0, :class => "quantity" %>
         <%= t.hidden_field :booking_id, :value => booking.id %>
      <% end %>

  <% end %>
  <%= f.submit "create transaction" %>
<% end %> 
```

当我提交表单时，出现以下错误：

```
ActiveModel::MassAssignmentSecurity::Error in TransactionsController#create
Can't mass-assign protected attributes: ticket 
```

我有`attr_accessible :tickets_attributes`和`accepts_nested_attributes_for :tickets`在`transaction`模型中，但仍然有错误。此外，当我在 line 上添加复数时`<%= f.fields_for :ticket do |t| %>`，该`quantity`字段不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:51:52.250

您的表单`f`基于一个`Transaction`对象，该对象`has_many :tickets`. 我相信你应该`:tickets`在`:ticket`你的`fields_for`.

```
 <%= f.fields_for :tickets do |t| %> 
```

如果您总是想要一张新票，您可能需要执行以下操作：

```
 <%= f.fields_for :tickets, Ticket.new do |t| %> 
```

以确保显示创建表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:05:21.867

完全重新编辑——对不起，我有一段时间不得不刷新我的记忆了

**transaction.rb** `tickets_attributes`没问题。

```
class Transaction < ActiveRecord::Base
    attr_accessible :customer, :tickets_attributes
    has_many :tickets
    accepts_nested_attributes_for :tickets
 end 
```

**transaction_controller.rb** 您必须构建票证。

```
def new
    @transaction = Transaction.new
    @transaction.tickets.build
end 
```

**new.rb** 或以您的形式，`fields_for`必须`:tickets`如所指出的那样被抢夺：

```
<%= form_for(@transaction) do |f| %>

  ...

  <%= f.fields_for :tickets do |t| %>
     ... 
```

我认为您可能缺少`build`控制器中的部分。希望有帮助！

# coq - Coq 中的一流模块

> ID：15940367
> 
> 赞同：2
> 
> 时间：2013-04-11T03:43:52.743
> 
> 标签：coq

谁能给我更多关于 Coq 中一流模块的信息？我知道 Coq 中的模块不是一流的。我想知道为什么？将来 Coq 中的模块有可能成为一流的吗？

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T22:46:34.557

我不确定，但据我了解，它基本上来自两点：

1.  **Coq 是保守的。**因为它的一些主要应用是在验证中，所以 Coq 主要将自己限制在语义被合理理解的构造中。

2.  **在依赖类型设置中，一流的模块相当微妙且没有被完全理解。** 特别是，您希望在模块之外看到多少定义的计算/简化行为？如果根本没有，那么这已经是可用的，作为记录类型。但是，如果部分或全部减少行为是可见的，那么很难准确量化到底有多少，因此很难分析结果模块的语义。

我不是相关文献的专家，所以我对2可能是错误的，但我的印象是这是基本情况。

# hibernate - How does the seqhilo algorithm work with sequence in Hibernate with Postgresql

> ID：15940369
> 
> 赞同：0
> 
> 时间：2013-04-11T03:44:09.513
> 
> 标签：hibernate

How does the `seqhilo` algorithm work with `sequence` in Hibernate with Postgresql?

```
 <id name="id" column="attid" type="long"
        unsaved-value="-1">
        <generator class="seqhilo">
            <param name="max_lo">1</param>
            <param name="sequence">
                att_seq
            </param>
        </generator>
    </id> 
```

If I use this configuration and let's say current value of `att_seq` is 1000 then what will be the value generated by Hibernate? How does this work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:04:10.853

Step 1: At the time of app startup hibernate initializes its internally managed lo variable to max_lo+1\. So lo becomes = 2

Step 2: To generate the next value it uses the following code:

```
 if (maxLo < 1) {

      long val = ( (Number) super.generate(session, obj) ).longValue();

      if (val == 0) val = ( (Number) super.generate(session, obj) ).longValue();

        return IdentifierGeneratorFactory.createNumber( val, returnClass );

      }

   if ( lo>maxLo ) {

     long hival = ( (Number) super.generate(session, obj) ).longValue();

     lo = (hival == 0) ? 1 : 0;

     hi = hival * ( maxLo+1 );

     if ( log.isDebugEnabled() )

      log.debug("new hi value: " + hival);

     }

   return IdentifierGeneratorFactory.createNumber( hi + lo++, returnClass ); 
```

To conclude: First time it hits the sequence and gets the value. Multiply it by (max_lo+1) and gives you the unique id. Next time it doesn't hit the database and internally increments the last value by 1.

After that it again repeats the above cycle.

So in a way it hits the database once for every two unique ids requested

# hadoop - 整合多个 Hadoop 集群

> ID：15940370
> 
> 赞同：0
> 
> 时间：2013-04-11T03:44:20.770
> 
> 标签：hadoop, hadoop-streaming

我们有多个使用 hive 和 pig 的 hadoop 集群，将它们合并为一个的最佳方法是什么？在 BI 中，这是通过构建 EDW 或 MDM 方法完成的。hadoop怎么样？有人在想这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T02:25:57.497

Pig 和 Hive 是客户端库，因此无需迁移它们。只有 Pig 和 Hive 客户端必须指向适当的 Hadoop 集群。

关于数据，您可以使用[DistCp](http://hadoop.apache.org/docs/r1.0.4/distcp.html)跨集群移动数据。

# java - Java - 在滚动文本中插入换行符

> ID：15940371
> 
> 赞同：0
> 
> 时间：2013-04-11T03:44:28.110
> 
> 标签：java, swing

Java新手。我正在尝试使用 Jpanel 和计时器显示滚动文本，它可以工作，但我尝试使用系统行分隔符插入行分隔符，文本显示时没有换行符，为什么？

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Toolkit;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Participants extends JPanel
{
     private int x;
     private int y;
     private String text;

     Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();

    public Participants  ()
    {
        x = 600;
        y = 1200;
        String eol = System.getProperty("line.separator");  

        text = "Story Director/Producer:"+eol+"Mr. SMith" +
             "Technical Director:" +  eol + 
              "Mr. T" +  eol + eol;

        setSize(1200, 900);
    }

public void paint(Graphics g)
{
    super.paint(g);
    g.setColor(Color.white);
    g.fillRect(0, 0, 1200, 900);
    g.setColor(Color.black);
    g.drawString(text,x, y);

}

public void start() throws InterruptedException
{
    while(true)
    {
        while(y >= 0)
        {
            x = getWidth() / 2;
            y--;
            repaint();
            Thread.sleep(10);
        }
    }
}

public static void main (String [] args) throws InterruptedException
{
    JFrame frame = new JFrame("Participants  ");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Participants participants  = new Participants ();
    frame.getContentPane().add(participants  );
    frame.setSize(1200, 900);
    frame.setVisible(true);
    participants  .start();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:14:06.247

换行符(\n) 仅适用于控制台写入。它在摆动时不起作用。只需使用单独的 Draw 方法来编写不同的文本。

问候，拉维

# javascript - 将字符串与javascript中的列表进行比较

> ID：15940374
> 
> 赞同：-1
> 
> 时间：2013-04-11T03:44:49.860
> 
> 标签：javascript, string, compare

我有一个列表中的汽车型号列表，如雪佛兰、福特、宝马，所以我在他们身上制定了这个代码。

cars.getMakes() 返回一个包含上述名称的列表，它们的格式也是如此。

cars.getAllModels() 返回一个类似的列表，其中仅包含汽车型号名称。

make 是一个单一的字符串，它可以是模型名称或制​​造名称。取决于用户的输入。

我想测试一下用户输入的内容是否真的存在于我的预定列表中。如果是的话；真的。如果不; 错误的。

```
function makeCheck(make) {
    var models = cars.getAllModels();
    var makes = cars.getMakes();
    if (make == makes[make]) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:48:49.147

如果要检查`make`传递给函数的变量是否在有效品牌列表中：

```
function makeCheck(make) {
    var makes = cars.getMakes();
    return (makes.indexOf(make) != -1);
} 
```

# linux - 我想通过命令行向python传递一个参数

> ID：15940381
> 
> 赞同：0
> 
> 时间：2013-04-11T03:45:35.770
> 
> 标签：linux, bash, shell

当我输入`python`shell 时，我得到`>>>`了结果。然后，如果我输入`print "something"`，它会打印一些东西。我想通过 bash 脚本在一个命令中执行这两项操作。这是一个不起作用但接近理解要点的示例

```
`print "something"` | python; 
```

我希望执行 python 并将打印命令作为参数传递。但这种情况并非如此。

我怎样才能做到这一点：

```
python
>>> print "hello" 
```

在一个命令中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T03:47:37.160

怎么样：

```
python -c "print 'hello'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:46:32.060

你需要把它写成

```
echo 'print "something"' | python 
```

或者

```
printf 'print "something"' | python 
```

但 Bhajun 的答案是你真正想要的。

# java - 无法使用参数“sc sdshow w32time”运行“cmd”命令

> ID：15940384
> 
> 赞同：0
> 
> 时间：2013-04-11T03:45:50.177
> 
> 标签：java, cmd, exec

我正在尝试在 Java 中运行一个外部进程，但我不知道为什么我的代码不起作用。它适用于任何其他“cmd”命令（例如 /c dir）。如果我`cmd sc sdshow w32time`用它代替`cmd /c dir`它。

这是我的代码：

```
public class services2 {
    public static void main(String args[]) {

        try {
            Process p = Runtime.getRuntime().exec("cmd sc sdshow w32time");
            p.waitFor();
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    p.getInputStream()));
            String line = reader.readLine();
            while (line != null) {
                System.out.println(line);
                line = reader.readLine();
            }
        } catch (IOException e1) {
        } catch (InterruptedException e2) {
        }

        System.out.println("Done");
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:01:40.330

您的问题似乎`sc`不是`cmd`.
你需要的是：

`sc sdshow w32time`

# vb.net - 如何使用 LINQ 生成不明确的字符串联合？

> ID：15940388
> 
> 赞同：0
> 
> 时间：2013-04-11T03:46:26.683
> 
> 标签：vb.net, string, linq, ienumerable, union

给定以下两个`IEnumerable(Of String)`未知长度，我怎样才能产生非明显联合？

```
Dim theseStrings As IEnumerable(Of String) =
    {"true", "true", "true", "true", "true"}
Dim thoseStrings As Ienumerable(Of String) =
    {"false", "true", "false", "false"} 
```

结果应如下所示：

```
{"false", "true", "false", "false", "true"} 
```

意思是

*   的必须**等于**的`Count`_`result` **`Count``theseStrings`**
***   两人意见不一致，`thoseStrings`优先**

 **规则

*   没有清单或任何具体的东西
*   没有循环

我试过了

```
Dim result = theseStrings.Union(thoseStrings)
' result = {"true"}

Dim result = theseString.Concat(thoseStrings)
' result = {"true", "true", "true", "true", "true", "false", "true", "false", "false"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:44:19.717

解决方案：

```
Dim result As IEnumerable(Of String) =
    theseStrings.Select(
        Function(value, index) _
            If(thoseStrings(index) IsNot Nothing, thoseString(index), value)) 
```

如果可以清理，请发表评论。**

# python - 在python中，如何对没有返回值的函数进行单元测试？

> ID：15940389
> 
> 赞同：32
> 
> 时间：2013-04-11T03:46:30.587
> 
> 标签：python, unit-testing

我是蟒蛇。这些天来，我正在推动自己对项目中的一些核心模块进行更完整的单元测试。由于我们总是使用“assertEqual”、“assertTrue”等方法进行单元测试，这些方法都需要被测试函数的返回值，我想知道如何在没有返回值的情况下对某些函数进行简单的单元测试。

我想在这里展示一个小例子，如何在 HelloTest 中测试函数 def foo(self, msg)？

```
class HelloTest(object):
    def foo(self, msg):
        MSG = msg.upper()
        self.bar(MSG)

    def bar(self, MSG):
        print MSG 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T08:10:40.620

正如提到的另一个答案，您可以使用 Python 模拟库对函数/方法的调用进行断言

```
from mock import patch
from my_module import HelloTest
import unittest

class TestFoo(unittest.TestCase):

    @patch('hello.HelloTest.bar')
    def test_foo_case(self, mock_bar):

        ht = HelloTest()

        ht.foo("some string")
        self.assertTrue(mock_bar.called)
        self.assertEqual(mock_bar.call_args[0][0], "SOME STRING") 
```

这修补了`bar`HelloTest 上的方法，并将其替换为记录对它的调用的模拟对象。

嘲笑有点像兔子洞。仅在绝对必要时才这样做，因为它确实会使您的测试变得脆弱。例如，您永远不会注意到模拟对象的 API 更改。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-14T10:51:22.830

我不太明白为什么每个人都想检查 foo 调用 bar。

Foo 有一些功能，这个功能需要测试。如果 foo 使用 bar 来执行此操作，我不应该担心。

期望的结果是在`foo(msg)`调用之后，将其`msg.upper()`发送到标准输出。

您可以[将 stdout 重定向到字符串缓冲区](https://stackoverflow.com/questions/1218933/can-i-redirect-the-stdout-in-python-into-some-sort-of-string-buffer)并检查此字符串缓冲区的内容是否符合您的预期。

例子：

```
import sys
import unittest
from io import TextIOWrapper, BytesIO

class TestScript(unittest.TestCase):
    def setUp(self):
        self._old_stdout = sys.stdout
        sys.stdout = TextIOWrapper(BytesIO(), sys.stdout.encoding)

    def _output(self):
        self._stdout.seek(0)
        return self._stdout.read()

    def test_foo(self):
        hello_test = HelloTest()
        hello_test.foo("blub")
        self.assertEqual(self._output(), "BLUB")

    def tearDown(self):
        sys.stdout = self._old_stdout
        self._stdout.close() 
```

您也可以对标准输入执行此操作（并写入标准输入以模拟某些输入），如果您需要做任何特殊的事情，您可以继承 TestIOWrapper，例如允许在`sys.stdout`不使用的情况下发送非 unicode 文本`sys.stdout.buffer`（Python 2 与 Python 3 ）。[在这个 SO answer](https://stackoverflow.com/a/19345047/1904815)中有一个例子。当您（仍然）仅使用 Python 2 时，使用`StringIO`可能比使用 io 模块更好。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-11T03:50:57.323

在这种特殊情况下，我会模拟打印，然后在我的断言中使用模拟。

在 Python 中，您将使用[Mock 包](https://pypi.python.org/pypi/mock)进行模拟。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-11T08:16:22.413

感谢@Jordan 的介绍，我编写了这个代码并认为它​​是 HelloTest.foo 的一个可行的单元测试

```
from mock import Mock
import unittest

class HelloTestTestCase(unittest.TestCase):
    def setUp(self):
        self.hello_test = HelloTest()

    def tearDown(self):
        pass

    def test_foo(self):
        msg = 'hello'
        expected_bar_arg = 'HELLO'
        self.hello_test.bar = Mock()

        self.hello_test.foo(msg)
        self.hello_test.bar.assert_called_once_with(expected_bar_arg)

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-11T04:30:29.207

您的代码可以如下所示，其执行与上述相同的任务：

```
class HelloTest(object):

    def foo(self, msg):
        self.msg = msg.upper()
        self.bar()

    def bar(self):
        print self.msg 
```

单元测试是：

```
from hello import HelloTest
import unittest

class TestFoo(unittest.TestCase):
    def test_foo_case(self):
        msg = "test"
        ob = HelloTest()
        ob.foo(msg)
        expected = "TEST"
        self.assertEqual(ob.msg, expected)

if __name__ == '__main__':
    unittest.main(exit=False) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-11T03:53:57.370

在 Python 3 中，您可以[告诉`print`打印到哪里](http://docs.python.org/3/library/functions.html#print)：

> print(*objects, sep=' ', end='\n', file=sys.stdout, flush=False)

所以添加一个可选参数：

```
def bar(self, MSG, file=sys.stdout):
    print(MSG, file=file) 
```

在正常使用中，它将打印到标准输出，但对于单元测试，您可以传递自己的文件。

在 Python 2 中它有点混乱，但您可以[将 stdout 重定向到 StringIO 缓冲区](https://stackoverflow.com/questions/1218933/can-i-redirect-the-stdout-in-python-into-some-sort-of-string-buffer)：

```
import StringIO
import sys

out = StringIO.StringIO()
sys.stdout = out

# run unit tests

sys.stdout = sys.__stdout__

# check the contents of `out` 
```

# asp.net-mvc - MVC 4 和 JsonResult 格式

> ID：15940397
> 
> 赞同：3
> 
> 时间：2013-04-11T03:47:25.357
> 
> 标签：asp.net-mvc, json, jsonresult

这段代码的结果格式有问题

```
public JsonResult getCategorias(int? id)
{
  var res = from c in db.Categorias
  where (( id.HasValue && c.CategoriaPadre == id.Value) || (!id.HasValue && c.CategoriaPadre == null))
  select new { id = c.Id, label = c.Descripcion };

  return this.Json(res, JsonRequestBehavior.AllowGet);
} 
```

这返回一个`json`：

`[{"id":21,"label":"Marketing3"},{"id":22,"label":"Marketing4"}]`

但我需要`json`这种格式：

`{"21":"Marketing3","22":"Marketing4"}`

我能做些什么？

非常感谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:09:18.110

将您的退货替换为：

```
var dictionary = res.ToDictionary(v => v.id, v => label);
 return this.Json(dictionary, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T04:13:09.477

当您返回 a`_JsonResult_`时，它会获取对象并以这种方式自动格式化

```
 {
        "Property1":"Value1",
        "Property2"_"Value2",
        ...
    } 
```

如果你真的需要其他格式，你可以`_ViewResult_`从你的操作中返回一个，添加一个视图并手动编写 json。但是对于这种特定的格式，您可以使用类似于 Garath 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T04:15:12.980

你也可以使用这个：-

```
public static KeyValuePair<string,string> KeyValue(YourClass obj)
        {
            return new KeyValuePair<string, string>(obj.id, obj.label);
        } 
```

通话前

```
Json(result.ConvertAll(i => KeyValue(i)), JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T04:07:59.703

我不知道这是否可能与 JsonResult 相关，但您可以使用[Json.NET](http://james.newtonking.com/projects/json/help/)并且它支持 LINQ（查看“LINQ to JSON \ Creating Json”，因此您的方法类似于

```
public JsonResult getCategorias(int? id)
{
  var properties = from c in db.Categorias
    where (( id.HasValue && c.CategoriaPadre == id.Value) || (!id.HasValue && c.CategoriaPadre == null))
    select JsonProperty(c.Id.ToString(), c.Descripcion);

  var res = new JObject(properties.ToArray());

  return Content(res.ToString(), "application/json");
} 
```

# android - Android Maven ClassNotFound

> ID：15940399
> 
> 赞同：1
> 
> 时间：2013-04-11T03:47:36.970
> 
> 标签：android, maven, intellij-idea

我正在使用 IntelliJ 12.1，当我尝试构建和安装时，一切都运行良好。当我尝试通过 Maven 构建和安装应用程序时，出现以下错误：

```
04-10 21:28:03.044: WARN/dalvikvm(12727): Unable to resolve superclass of Lcom/moneydesktop/finance/shared/activity/BaseActivity; (105)
04-10 21:28:03.044: WARN/dalvikvm(12727): Link of class 'Lcom/moneydesktop/finance/shared/activity/BaseActivity;' failed
04-10 21:28:03.044: WARN/dalvikvm(12727): VFY: unable to resolve static field 5288 (sInForeground) in Lcom/moneydesktop/finance/shared/activity/BaseActivity;
04-10 21:28:03.044: INFO/dalvikvm(12727): Could not find method com.flurry.android.FlurryAgent.onError, referenced from method com.moneydesktop.finance.exception.CustomExceptionHandler.uncaughtException
04-10 21:28:03.044: WARN/dalvikvm(12727): VFY: unable to resolve static method 8300: Lcom/flurry/android/FlurryAgent;.onError (Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
04-10 21:28:03.104: INFO/greenDAO(12727): Creating tables for schema version 1
04-10 21:28:03.285: WARN/dalvikvm(12727): Unable to resolve superclass of Lcom/moneydesktop/finance/shared/activity/BaseActivity; (105)
04-10 21:28:03.285: WARN/dalvikvm(12727): Link of class 'Lcom/moneydesktop/finance/shared/activity/BaseActivity;' failed
04-10 21:28:03.285: WARN/dalvikvm(12727): Unable to resolve superclass of Lcom/moneydesktop/finance/SplashActivity; (1158)
04-10 21:28:03.285: WARN/dalvikvm(12727): Link of class 'Lcom/moneydesktop/finance/SplashActivity;' failed
04-10 21:28:03.285: WARN/dalvikvm(12727): threadid=1: thread exiting with uncaught exception (group=0x40cf0930)
04-10 21:28:03.285: ERROR/CustomExceptionHandler(12727): Error
    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.moneydesktop.finance/com.moneydesktop.finance.SplashActivity}: java.lang.ClassNotFoundException: Didn't find class "com.moneydesktop.finance.SplashActivity" on path: /data/app/com.moneydesktop.finance-1.apk 
```

**我的 pom.xml 看起来像：**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <version>1.0</version>
    <groupId>com.moneydesktop.finance</groupId>
    <artifactId>moneymobile</artifactId>
    <name>MoneyMobile</name>
    <packaging>apk</packaging>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>

        <java.version>1.6</java.version>
        <android.version>4.1.1.4</android.version>
        <android.platform>16</android.platform>

        <android-maven.version>3.5.3</android-maven.version>
        <maven-compiler.version>3.1</maven-compiler.version>

        <nineoldandroids.version>2.4.0</nineoldandroids.version>
        <viewpageindicator.version>2.4.1</viewpageindicator.version>
        <timessquare.version>1.0.3</timessquare.version>
        <menudrawer.version>2.0.2</menudrawer.version>
        <greendao.version>1.3.1</greendao.version>
        <eventbus.version>2.0.2</eventbus.version>
        <jackson.version>2.1.4</jackson.version>
        <lang.version>2.6</lang.version>
    </properties>

    <dependencies>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${android.version}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>com.nineoldandroids</groupId>
            <artifactId>library</artifactId>
            <version>${nineoldandroids.version}</version>
        </dependency>

        <dependency>
            <groupId>com.viewpagerindicator</groupId>
            <artifactId>library</artifactId>
            <version>${viewpageindicator.version}</version>
            <type>apklib</type>
        </dependency>

        <dependency>
            <groupId>com.squareup</groupId>
            <artifactId>android-times-square</artifactId>
            <version>${timessquare.version}</version>
            <type>apklib</type>
        </dependency>

        <dependency>
            <groupId>net.simonvt</groupId>
            <artifactId>android-menudrawer</artifactId>
            <version>${menudrawer.version}</version>
            <type>apklib</type>
        </dependency>

        <dependency>
            <groupId>de.greenrobot</groupId>
            <artifactId>greendao</artifactId>
            <version>${greendao.version}</version>
        </dependency>
        <dependency>
            <groupId>de.greenrobot</groupId>
            <artifactId>eventbus</artifactId>
            <version>${eventbus.version}</version>
        </dependency>

        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-databind</artifactId>
            <version>${jackson.version}</version>
        </dependency>
        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-core</artifactId>
            <version>${jackson.version}</version>
        </dependency>
        <dependency>
            <groupId>com.fasterxml.jackson.core</groupId>
            <artifactId>jackson-annotations</artifactId>
            <version>${jackson.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.directory.studio</groupId>
            <artifactId>org.apache.commons.lang</artifactId>
            <version>${lang.version}</version>
        </dependency>

        <dependency>
            <groupId>com.saulpower.communication</groupId>
            <artifactId>library</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>com.saulpower.fayeclient</groupId>
            <artifactId>library</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>com.flurry</groupId>
            <artifactId>FlurryAgent</artifactId>
            <scope>system</scope>
            <version>1.0</version>
            <systemPath>${basedir}/libs/FlurryAgent.jar</systemPath>
        </dependency>

        <dependency>
            <groupId>com.devsmart</groupId>
            <artifactId>DevsMart</artifactId>
            <scope>system</scope>
            <version>1.0</version>
            <systemPath>${basedir}/libs/devsmartlib.jar</systemPath>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>support-v4</artifactId>
            <scope>system</scope>
            <version>r12</version>
            <systemPath>${basedir}/libs/android-support-v4-r12.jar</systemPath>
        </dependency>

    </dependencies>

    <build>
        <sourceDirectory>src</sourceDirectory>

        <pluginManagement>
            <plugins>

                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>${android-maven.version}</version>
                    <configuration>
                        <sdk>
                            <platform>${android.platform}</platform>
                        </sdk>
                        <sign>
                            <debug>auto</debug>
                        </sign>
                        <undeployBeforeDeploy>true</undeployBeforeDeploy>
                    </configuration>
                    <extensions>true</extensions>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>${maven-compiler.version}</version>
                    <configuration>
                        <source>${java.version}</source>
                        <target>${java.version}</target>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>2.7</version>
                    <configuration>
                        <failsOnError>true</failsOnError>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>

        <plugins>

            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <extensions>true</extensions>
                <configuration>
                    <manifest>
                        <debuggable>true</debuggable>
                    </manifest>
                </configuration>
                <executions>
                    <execution>
                        <id>manifestUpdate</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>manifest-update</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>alignApk</id>
                        <phase>package</phase>
                        <goals>
                            <goal>zipalign</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>${maven-compiler.version}</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>2.4.1</version>
                <configuration>
                    <autoVersionSubmodules>true</autoVersionSubmodules>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.10</version>
                <configuration>
                    <failsOnError>true</failsOnError>
                    <configLocation>../checkstyle.xml</configLocation>
                    <consoleOutput>true</consoleOutput>
                </configuration>
                <executions>
                    <execution>
                        <phase>verify</phase>
                        <goals>
                            <goal>checkstyle</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

要运行 Maven 构建和安装，我使用以下命令：

```
mvn clean package install android:deploy android:run -Dandroid.device=usb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:16:08.900

flurry、devsmart 和 support-v4 的范围应该是可编译的（默认），它们需要包含在您的最终构建中。

support-v4 在中央可用，但您可能需要将其他两个安装到本地存储库。

```
mvn install:install-file -Dfile=<path-to-file> -DgroupId=<group-id> \
-DartifactId=<artifact-id> -Dversion=<version> -Dpackaging=<packaging> 
```

# c# - 服务器端支持通过 HTML 5 提供的视频进行搜索 标签

> ID：15940403
> 
> 赞同：0
> 
> 时间：2013-04-11T03:47:58.130
> 
> 标签：c#, .net, html, html5-video

我有一个 Web 应用程序在下载种子的定制 Web 服务器上运行。我想提供将种子流式传输到用户浏览器的功能。我如何处理寻找？浏览器如何告诉服务器它想要搜索？

如果服务器请求某些视频，我是否只是开始将视频推送到响应流中，然后它会流式传输？浏览器在需要查找时如何处理打开的流？

可能需要注意的是：当用户开始流式传输时，我不会在服务器上拥有整个视频文件。

# matlab - 清除图表后保存的不需要的数据。

> ID：15940404
> 
> 赞同：0
> 
> 时间：2013-04-11T03:48:02.887
> 
> 标签：matlab, user-interface, signals, system

我正在使用 matlab gui 执行一些带有锁相环的信号处理，我似乎无法在我的代码中弄清楚数据被保存在哪里，即使我相信已经删除了它。

这是文件[http://sdrv.ms/ZO5hXD](http://sdrv.ms/ZO5hXD)

下面是设置功能。

```
function axes1_ButtonDownFcn(hObject, eventdata, handles)
% hObject    handle to axes1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
position = get(gca,'CurrentPoint');
x = position(1);
y = position(3);
%handles.poles=handles.sVar;
%handles.zeros=handles.sVar;
%guidata(hObject,handles);
slType = get(handles.figure1 ,'SelectionType');

if(strcmp(slType,'normal'))
        if(y<0.05 && y>-0.05)
            line(x,y,'marker','X','HitTest','off');
            handles.poles=handles.poles*(handles.sVar-x-y)
            guidata(hObject, handles);
        else
            line(x,y,'marker','X','HitTest','off');
            line(x,-y,'marker','X','HitTest','off');
            handles.poles=handles.poles*(handles.sVar-x-y)*(handles.sVar-x+y);
            guidata(hObject, handles);
        end

else
    line(x,y,'marker','O','HitTest','off');
    handles.zeros=handles.zeros*((handles.sVar-x-y)*(handles.sVar-x+y));
    guidata(hObject, handles);
end

update(hObject,handles);
set(hObject,'buttondownfcn',{@axes1_ButtonDownFcn,handles}); 
```

以下是删除数据的回调。

```
% --- Executes on button press in pushbutton1.
function pushbutton1_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
guidata(hObject,handles);
delete(findobj(handles.axes1,'Type','line','Marker','X'));
handles.poles=handles.sVar;
guidata(hObject, handles);
update(hObject,handles);

% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
guidata(hObject,handles);
delete(findobj(handles.axes1,'Type','line','Marker','O'));
handles.zeros=handles.sVar;
guidata(hObject, handles);
update(hObject,handles); 
```

# cakephp - 尝试在 CakePHP 中从另一个模型中删除一个模型时出现 CSRF 错误

> ID：15940406
> 
> 赞同：1
> 
> 时间：2013-04-11T03:48:08.160
> 
> 标签：cakephp

所以在一个模型的索引中，我有一个相关模型的列表。在列表中，我包括删除后链接。

但是，似乎在属于另一个视图的视图中使用删除后链接删除一个模型会引发 CSRF 错误。

这可能只是 Cake 的 Security 组件的工作方式，但有没有办法解决这个问题（不影响安全措施）？

编辑：添加代码。

在视图中发布链接（在这种情况下，我的练习模型的索引视图）：

```
echo $this->Form->postLink('Delete', array('controller' => 'folders', 'action' => 'delete', $key), array('class' => 'delete', 'confirm' => 'Are you sure? This will also delete all associated exercises.')); 
```

文件夹控制器中的删除操作：

```
public function delete($id) {
    if ($this->request->is('get')) {
        throw new MethodNotAllowedException();
    }
    if ($this->Folder->delete()) {
        $this->Session->setFlash('Folder '.$id.' has been deleted.', 'default', array('class' => 'success'));
        $this->redirect(array('controller' => 'exercises', 'action' => 'index'));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:36:52.720

CakePHP 安全组件允许您指定允许哪些控制器和/或操作向您的操作发送请求。

阅读这部分文档[限制跨控制器通信](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#restricting-cross-controller-communication)

# javascript - Spring form：选择在创建选项时运行 JavaScript 函数

> ID：15940408
> 
> 赞同：3
> 
> 时间：2013-04-11T03:48:10.113
> 
> 标签：javascript, spring, jsp

`select`如果正在创建行/选项，我该如何执行 JavaScript 函数？

```
<form:select path="field" multiple="false" size="8" cssClass="reg-selectField" onOptionsCreated="runThisJsFunction()">
    <form:options items="${field}" itemValue="id" itemLabel="name" cssClass="input-select" disabled="false"/>
</form:select> 
```

类似于我在`onOptionsCreated="runThisJsFunction()"`上面的代码中添加的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:54:22.037

我不认为我们有在加载选项时触发的特定事件。你可以在`document.ready`jQuery 函数或 JavaScript中做同样的事情

```
function options_loaded() {
    var e = document.getElementByNames('field')[0];
    if(e.options.length == 0){
        alert("No options loaded");
    } 
}
document.addEventListener("DOMContentLoaded", options_loaded, false); 
```

在 jQuery 中

```
 $(function(){
       var optionsCount = $('[name="field"] option').length;
       if (optionsCount == 0){
          alert("No options are loaded"); 
       }
    }); 
```

# workflow-foundation-4 - 工作流程 确保操作按顺序执行

> ID：15940412
> 
> 赞同：0
> 
> 时间：2013-04-11T03:48:31.173
> 
> 标签：workflow-foundation-4, workflow-activity

我得到了一个学校的作业，说要创建一个如下所示的工作流程：

```
Authentication ->if (Authentication) then { 
    getallcompanies(); 
    selectcompany();
} else {
    error -> terminate;
} 
```

它说我需要对用户进行身份验证。如果成功，用户可以“选择”列出公司。之后，他们可以选择一家公司。

当我尝试执行 getallcompanies 然后执行 selectcompany 时，我的问题就出现了。我的全能工作，但我的选择失败了！

我的工作流程如下：

![在此处输入图像描述](https://i.stack.imgur.com/YvQEs.png)

还有我的错误信息：

![在此处输入图像描述](https://i.stack.imgur.com/gwYcT.png)

我通过按 F5 使用 TestClient，以便在制作实际客户端之前调试工作流。我重新安排了这些功能，并注意到 select 有效，但 get 无效。所以换句话说，无论函数的顺序如何，第二个接收请求都不会起作用。双击第二个函数总是会为我抛出该错误：S

我究竟做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:13:52.713

尝试检查持久性存储。检查执行状态、暂停异常、暂停原因。它可能会给你一些提示。

# networking - 无法通过网络访问 localhost

> ID：15940414
> 
> 赞同：0
> 
> 时间：2013-04-11T03:48:32.217
> 
> 标签：networking, xampp, localhost

我试图弄清楚如何通过网络访问本地主机。我正在使用 XAMPP。对于我的服务器。当我转到网络上的另一台计算机并输入默认网关时，我会收到消息 服务器http://192.168.1.1:80 需要用户名和密码，服务器显示：WRT54G，然后是用户名的输入框。我知道这很危险，但我从来没有为网络设置用户名或密码，只是试图通过按 Enter 绕过是行不通的。我只在我自己的计算机上使用 localhost:85 我得到了网络，但这对其他计算机不起作用，他们寻找自己的本地主机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:57:37.090

localhost 仅适用于您从中访问它的机器。因此，当您尝试访问时`localhost:85`，它将指向您所在的机器，而没有其他内容。

当您尝试访问时，`http://192.168.1.1:80`我会说您实际上是在尝试访问您的路由器而不是您的计算机。这就是为什么它说“WRT54G”。

您需要做的是在网络中找到您计算机的 IP 地址。它看起来很像`192.168.1.1`，但最后一个 1 将是一个不同的数字。如果你在 Windows 上，你可以在`ipconfig`命令提示符下输入来查找你的 IP 地址，如果你在 Mac 上，你可以使用`ifconfig`

完成后，您应该能够通过键入 IP 地址从网络中的另一台计算机访问您的计算机。您可能需要将计算机配置为允许端口 80（或您想要的任何端口）上的传入连接，但要允许它。

# c++ - 迭代向量时出现运行时错误

> ID：15940415
> 
> 赞同：-1
> 
> 时间：2013-04-11T03:48:36.233
> 
> 标签：c++

我正在迭代一个存储点数据类型元素 [x,y] 的向量，而我想要在每次迭代中实现的是添加前 4 个点 x 元素和前 4 个点 y 元素....在下一次迭代中我想对下一个 4 x & y 做同样的事情......等等

第一次迭代 1.x + 2.x + 3.x + 4.x 1.y + 2.y + 3.y + 4.y

第二次迭代 5.x + 6.x + 7.x + 8.x 5.y + 6.y + 7.y + 8.y

等等…………希望我的问题很清楚

示例代码：

```
double Pta; 
    double Ptb;
    Point  vect;
    float R1, R2;
    float resultant;
    vector<Point> vect_add;
    for(vector<Point>::iterator iter_a = Left_Arm_xy.begin()+1; iter_a != Left_Arm_xy.end(); ++iter_a)
    {

        if(center.y <= 240)
        {
            vect.x = iter_a->x - (iter_a -1)->x;
            vect.y = iter_a->y - (iter_a -1)->y;

            vect_add.push_back(Point(vect.x,vect.y));

            for(vector<Point>::iterator iter_v = vect_add.begin(); iter_v != vect_add.end(); ++iter_v)
            {

                    R1 = iter_v->x + (iter_v +1)->x + (iter_v +2)->x + (iter_v +3)->x;
                    R2 = iter_v->y + (iter_v +1)->y + (iter_v +2)->y + (iter_v +3)->y;

                    resultant = sqrt(pow(R1,2) + pow(R2,2));

                    cout<<"Resultant: "" "<<resultant<<endl;

            }

        } 
```

当我发现我试图添加所有 x 和 y 的部分时，程序像以前一样工作正常.....因此问题必须我在那里..我猜语法不正确但不是最好的程序员，因为没有编译器警告，这不能是什么错误……程序只是在运行时崩溃

谁能看到我对这段代码做错了什么

调试： ![在此处输入图像描述](https://i.stack.imgur.com/PtU04.jpg)

很抱歉只添加了 Debug 断点的照片，但我认为在这种情况下，图片值得 1000 个字：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:07:06.983

您可以通过控制您的迭代器 + 3 是否超过向量 (vect_add) 限制来做到这一点，这样您就不会超过向量边界，而且对于每次迭代，您必须将迭代器增加 4 以获得您设计的方案：

```
for(vector<Point>::iterator iter_v = vect_add.begin(); iter_v - vect_add.begin() + 4 < vect_add.size(); iter_v+=4)
{ 
       R1 = iter_v->x + (iter_v +1)->x + (iter_v +2)->x + (iter_v +3)->x;
       R2 = iter_v->y + (iter_v +1)->y + (iter_v +2)->y + (iter_v +3)->y;

       resultant = sqrt(pow(R1,2) + pow(R2,2));

       cout<<"Resultant: "" "<<resultant<<endl;

 } 
```

在这里，iter_v - vect_add.begin() 给出了当前迭代器的索引，在 for 循环中我们检查是否有足够数量的元素来进行加法操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:53:27.107

问题之一在这里：

```
R1 = iter_v->x + (iter_v +1)->x + (iter_v +2)->x + (iter_v +3)->x;
R2 = iter_v->y + (iter_v +1)->y + (iter_v +2)->y + (iter_v +3)->y; 
```

`iter_v + 1`to`iter_v+ 3`可能超出范围，导致尝试访问不属于 的内存`vector`，因此崩溃。

在这种情况下，检查条件`if(vect_add.size() >4)`没有多大帮助。

这篇文章根本没有意义：

```
if(vect_add.size() > 20)
{
    vect_add.clear(); //does not make sense, you remove all the elements in vector?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:03:43.010

不知道这是否相关，但清除向量会使迭代器无效。从[std::vector 清除](http://www.cplusplus.com/reference/vector/vector/clear/)

> 与此容器相关的所有迭代器、指针和引用均无效。

你在这里清除你的矢量

```
if(vect_add.size() > 20)
{
     vect_add.clear();
} 
```

# algol68 - Algol 68 中的迭代阶乘

> ID：15940416
> 
> 赞同：1
> 
> 时间：2013-04-11T03:48:37.317
> 
> 标签：algol68

我想改变下面的代码来做阶乘。任何人都可以帮助我吗？这就是斐波那契。

```
PROC print fibo = (INT n) VOID:
  BEGIN
     INT a:= 0, b = 1;
     FOR i FROM 1 TO n DO
        print((whole(i,0), "==>", whole(b,0), new line));
        INT c = a + b;
        a := b;
        b := c

     OD
 END;

  INT k = 40;
  print("Compute Factorial");
  print((whole(k,0), new line));
  print fact(k) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:54:52.767

斐波那契实际上比阶乘*更*复杂，只是因为您必须记住前两项才能获得下一项。

然而，本质是一样的。使用阶乘，您只需将从 1 到您的参数的所有数字相乘，例如在以下伪代码中：

```
fact = 1
for i = 1 to argument:
    fact = fact * i 
```

而已。您现在只需将其转换为 Algol，并且可能考虑在某个地方使用*更*现代的语言的课程 :-) 尽管我必须喜欢一种使用`bash`-style`if/fi` `case/esac`方法进行`do`循环的语言（`do/od`）。我希望下`bash`一次迭代使用这个而不是不一致的`do/done`.

* * *

**以下剧透！如果这是课程作业，请在尝试上述建议之前不要阅读。**

* * *

我敦促您自己尝试一下，因为它会使您成为更好的程序员，并且（假设这是课程作业）使您因抄袭而受到惩罚的可能性降低。

但是，为了使这个答案完整，这将是我的第一次尝试（请记住，我实际上并没有*浮动*的 Algol-68 编译器，因此可能需要一些调试）：

```
PROC facto = (INT n) INT:
  BEGIN
     INT a := 1;
     FOR i FROM 1 TO n DO
        a := a * i;
     OD
 END; 
```

我已将返回类型从`void`to更改为`int`并希望我没记错返回值是自动从最后一个评估的表达式中获取的。

# mysql - 在 mysql 5.1 中比较登录名的触发器

> ID：15940417
> 
> 赞同：0
> 
> 时间：2013-04-11T03:48:39.927
> 
> 标签：mysql, validation, triggers, mysql-5.1

现在它给我一个 1064 错误`elseif`。这是我第一次在 5.1 中创建触发器。我不确定我以前使用的版本，但我成功使用了那个版本。

```
DROP TRIGGER IF EXISTS greentrucks.iCustomer;
DELIMITER GO
CREATE TRIGGER greentrucks.iCustomer AFTER INSERT
ON customer 
For each ROW BEGIN 

DECLARE count int;
SET @count = FOUND_ROWS();
If @count = 0
THEN LEAVE

ELSEIF EXISTS ( SELECT *
            FROM INSERTED i
            WHERE  EXISTS (
            SELECT p.email
            FROM greentrucks.customer p
            WHERE i.email = p.email))

THEN BEGIN
    RAISERROR('That Email is already in use!',16,1);
    IF @@Trancount >0
        ROlLBACK TRANSACTION;
END IF
END IF
END
GO
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:04:13.233

`LEAVE`需要一个标签。请参阅[LEAVE 文档](http://dev.mysql.com/doc/refman/5.0/en/leave.html)和[LOOP 文档中的示例](http://dev.mysql.com/doc/refman/5.0/en/loop.html)。此外，您需要`LEAVE`用分号结束您的语句。

MySQL 似乎没有关于`LEAVE`触发器的任何官方示例。[这篇博](http://mysql-0v34c10ck.blogspot.com/2011/06/how-to-disableenable-triggers-on-demand.html)文将标签放在`BEGIN`. 基于此，尝试这样的事情：

```
DROP TRIGGER IF EXISTS greentrucks.iCustomer;
DELIMITER GO
CREATE TRIGGER greentrucks.iCustomer AFTER INSERT
ON customer 
For each ROW
my_label: BEGIN

DECLARE count int;
SET @count = FOUND_ROWS();
If @count = 0
THEN LEAVE my_label;

... and the rest of your code 
```

# c - 使用组合管道和重定向编写 C Shell

> ID：15940418
> 
> 赞同：1
> 
> 时间：2013-04-11T03:48:39.877
> 
> 标签：c, shell, system, systems-programming

我正在尝试在 C 中实现一个迷你 shell，它将接受 <、>、>>、|、& 的任何组合。我把它放在它读取命令和执行文件重定向等的地方，但是，我似乎无法通过谷歌找到一个关于如何对其进行编程以接受上述命令的任何组合的好的教程。到目前为止我的代码如下（我删除了我尝试过的组合内容，因为我不知道该怎么做，而且一团糟）（**一些非标准函数来自我正在使用的库。** ):

```
int main(int argc, char **argv)
{
int i,j,frv,status,x,fd1;
IS is;
is = new_inputstruct(NULL);

/* read each line of input */
while (get_line(is) >= 0)
{
    if (is->NF != 0)
    {

        /*fork off a new process to execute the command specified */
        frv = fork();
        /* if this is the child process, execute the desired command */
        if (frv == 0)
        {
            if (strcmp(is->fields[is->NF-1],"&") == 0) is->fields[is->NF-1] = NULL;
            while (is->fields[frv] != NULL)
            {
                /* if we see <, make the next file standard input */
                if (strcmp(is->fields[frv],"<") == 0)
                {
                    is->fields[frv] = NULL;
                    fd1 = open(is->fields[frv+1], O_RDONLY);
                    dup2(fd1, 0);
                    close(fd1);

                }
                /* if we see >, make the next file standard output and create/truncate it if needed */
                else if (strcmp(is->fields[frv],">") == 0)
                {
                    is->fields[frv] = NULL;
                    fd1 = open(is->fields[frv+1],O_TRUNC | O_WRONLY | O_CREAT, 0666);
                    dup2(fd1, 1);
                    close(fd1);

                }
                /* if we see >>, make the next file standard output and create/append it if needed */
                else if (strcmp(is->fields[frv],">>") == 0)
                {
                    is->fields[frv] = NULL;
                    fd1 = open(is->fields[frv+1], O_WRONLY | O_APPEND | O_CREAT, 0666);
                    dup2(fd1, 1);
                    close(fd1);

                }
                frv++;
            }
            /* execute the command */
            status = execvp(is->fields[0], is->fields);
            if (status == -1)
            {
                perror(is->fields[0]);
                exit(1);
            }
        }
        /* if this is parent process, check if need to wait or not */
        else
        {
            if (strcmp(is->fields[is->NF-1],"&") != 0) while(wait(&status) != frv);
        }
        /* clean up the values */
        for(j = 0; j < is->NF; j++) is->fields[j] = NULL;
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:48:47.733

您必须首先标记您的输入命令。

令牌是一个或多个确实有意义的符号的集合。

例如`&`, `|`, `>`, `>>`,`<`是记号。

看看[这里](https://stackoverflow.com/questions/6216449/where-can-i-learn-the-basics-of-writing-a-lexer)，了解如何开始编写词法分析器（它并不复杂）。

也许编译器构建的一些基础知识也会有所帮助。

# javascript - 为什么“可选参数名称 %s 必须以 opt_ 为前缀。” 在 gjslint --strict 模式下？

> ID：15940419
> 
> 赞同：1
> 
> 时间：2013-04-11T03:48:40.523
> 
> 标签：javascript, gjslint

我在一个特定的 javascript 文件上得到以下信息

```
Line 23, E:0233: Optional parameter name category must be prefixed with opt_.
Line 649, E:0233: Optional parameter name animate must be prefixed with opt_.
Line 697, E:0233: Optional parameter name aggregate must be prefixed with opt_.
Line 763, E:0233: Optional parameter name animate must be prefixed with opt_.
Line 796, E:0233: Optional parameter name animate must be prefixed with opt_. 
```

对于第一个，代码是：

```
/** @constructor
 *
 *  @param {Object} data an entity or item.
 *  @param {Object} parent a viewObj, or at the root level, a viewstate.
 *  @param {Array.<number>} position an (x$, y$) pair.
 *  @param {string=} category The category to give the item. This forms an
*                             inconsistent mess around where category is stored.
 */
function ViewObj(data, parent, position, category) { 
```

错误代码的意义何在？“类别”*不是*可选的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T03:50:15.383

类型中的`=`后缀*表示*它是可选的。如果`category`参数不是可选的，那么您应该将其类型更改为`string`.

此错误的目的是确保清楚哪些参数是可选的（根据使用的样式指南，不仅它们的类型反映了它，而且它们的名称也反映了它`gjslint`），哪些不是。

# java - 在方法中返回数组

> ID：15940428
> 
> 赞同：0
> 
> 时间：2013-04-11T03:49:30.570
> 
> 标签：java, arrays, methods, parameters, return

我有一个方法会返回一个字符串 []，这取决于以前的用户输入，它将确定参数是“INTERNATIONAL”还是“DOMESTIC”。无论如何，两个输入都应该导致创建两个不同的 String[]。但是，当我尝试编译时，我收到“缺少返回语句”错误消息。我怎样才能解决这个问题？

这是我的方法：

```
 public String[] typeflight(String type)
     { 
        String type2= type.toUpperCase();
        if (type2.equals("INTERNATIONAL"))
        {
            String[] flights = {"B738 to Melbourne, Australia ", "A380 to Beijing, China ", "F348 to London, England ", "M225 to Ontario, Canada",
                    "E987 to Tokyo, Japan ", "T451 to Copenhagen, Denmark ", "S501 to Seoul, South Korea ", "N778 to Venice, Italy ",
                    "B621 to Mexico City, Mexico ", "L454 to Rabat, Morocco ", "C998 to San Jose, Costa Rica", "H859 to Amsterdam, Netherlands "};
            return flights;

        }
        else
        if(type2.equals("DOMESTIC"))
        {   
            String[] flights = {"459 to Seattle, Washington ", "662 to Los Angeles, California ", "712 to New Orleans, Louisiana ", "285 to Chicago, Illinois ",
                    "896 to Honolulu, Hawaii ", "476 to Boston, Massachusetts ", "823 to Newark, New Jersey ", "902 to Miami, Florida ",
                    "353 to Fort Wayne, Indiana ", "112 to Des Moines, Iowa ", "", "294 to Las Vegas, Nevada"};
            return flights;

        }
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T03:50:34.383

如果这些 if 语句都不是真的会发生什么？那么你的方法没有返回值。

例如`type2 = "ALIEN"`

也许您的程序中有逻辑可以防止这种情况发生。但是 Java 编译器不知道这一点。

一个快速而肮脏的解决`return null;`方法是在方法的末尾放一个。“更好”的方法是对非法参数使用异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T03:52:25.483

如果两个`if`条件都失败，则函数不会返回任何内容。因此`return null`，如果两个条件都不匹配。

```
public String[] typeflight(String type)
 { 
    String type2= type.toUpperCase();
    if (type2.equals("INTERNATIONAL"))
    {
        // Code
        return flights;

    }
    else
    if(type2.equals("DOMESTIC"))
    {   
        // Code 
        return flights;

    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T03:51:03.020

你的问题是你有一个`if`and `else if`，但没有`else`。Java 抱怨`type2`不等于两个给定值中的任何一个的情况没有得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T03:51:51.957

那么编译器需要一个外部的“返回语句”来确定返回结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T03:54:30.537

您应该有所有情况的 return 语句。因此，在 if else 之外声明 String 飞行并动态初始化，最后返回为

```
 public String[] typeflight(String type)
    {
    String[] flights;
         if(condition1){
           flights  = ....
           }
         else{
            flights = .....   
      }
          return flights;
    } 
```

此外，您应该避免以相同名称声明数据成员，

# plugins - Titanium Studio 的图表插件

> ID：15940430
> 
> 赞同：0
> 
> 时间：2013-04-11T03:49:42.603
> 
> 标签：plugins, charts, titanium

我可以知道除了 Raphael 之外还有其他图表插件吗？我想尝试 Raphael 不适合我的其他插件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:07:13.117

拉斐尔可能是您的错误选择有两个原因：

1.  你想要表现。
2.  你想要真正的图表。

## 表现

Titanium 是一种解释型引擎。除了在 WebView 中运行的基本网站和动画之外的任何东西都会很慢，尤其是当您在 WebView 和应用程序之间来回传输数据时。您可能想改用本机模块：[https ://marketplace.appcelerator.com/apps/4968?1402012027](https://marketplace.appcelerator.com/apps/4968?1402012027)

如果您的图表需求受限于（非常）有限的一组排列，那么替代方法就是使用一堆 ImageView 来创建图表。

## 制图

Raphael 其实不是图表库，而是图形库。我认为您正在寻找[gRaphael](http://g.raphaeljs.com/)。如果您想在 WebView 中绘制图表，任何基于 Web 的图表库都可以正常工作，例如 Dojo Charting、YUI Charts 和 Google Chart Tools。

# database - 无法将对象保存到数据核 JDO 中的多个关系中

> ID：15940439
> 
> 赞同：0
> 
> 时间：2013-04-11T03:50:34.437
> 
> 标签：database, jdo, datanucleus

我对将对象保存到多对多关系有疑问。以下是两个类。

实体 1 => 应用程序

实体 2 => 用户

应用程序可以有很多*用户*，用户可以有很多*应用程序*。

由于实际类有很多字段，我只会放置映射的必需部分。

```
@PersistenceCapable(detachable = "true")
public class Application implements Serializable {
    -----
    @Persistent(table="APPLICATIONUSER")
    @Join(column="APPID")
    @Element(column="USERID")
    private Set<User> users;
}

@PersistenceCapable(detachable = "true")
public class User implements Serializable {
   ----
   @Persistent(mappedBy="users")
   private Set<Application> applications;
} 
```

我参考了 URL“ [http://www.datanucleus.org/products/datanucleus/jdo/orm/many_to_many.html](http://www.datanucleus.org/products/datanucleus/jdo/orm/many_to_many.html) ”来查找这个映射信息。

现在我想向应用程序添加新用户。以下是我尝试过的两种情况。请注意，所有事务都发生在同一个 Persistence Manager 对象上。

**情况1**

1.  检索现有用户。
2.  将该用户添加到应用程序

结果 => 成功

**案例2**

1.  创建一个新的用户对象
2.  设置用户标识
3.  将该用户添加到应用程序

结果 =>**不工作**（它没有抛出任何错误。只是没有插入数据）。我想知道为什么我不能只向应用程序添加一个新的用户对象并保存它。

如果有人知道，请告诉我这个问题..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:23:58.600

我发现了这个问题。实际上源代码在一个 jar 文件中，我使用 JUnit 来测试每个方法。正如我在问题中提到的，没有显示错误并且测试用例正在通过。

但正如“DataNucleus”所建议的那样，我启用了 log4j，然后我就能够找出问题所在。这是因为我没有在 User 类上设置必填字段。

无论如何，我想知道为什么测试用例没有显示此错误。可能是配置问题。

# sql - 已继续和/或毕业的学生的学生记录

> ID：15940442
> 
> 赞同：0
> 
> 时间：2013-04-11T03:50:44.813
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试查找在六年期间继续和/或毕业的学生的完整学生记录。我做了以下，但不确定我是否得到了正确的学生记录。

```
SELECT *
FROM FileYear2006
INNER JOIN GraduationFile1
ON FileYear2006.STUDENTID = GraduationFile1.STUDENTID 
```

我相信上面的查询只给了我毕业的学生，​​但我不确定继续生的学生。

我有 FileYear2006-2012，我有三个 GraduationFile1 用于 2009-2010 年，GraduationFile2 用于 2010-2011 年，GraduationFile3 用于 2011-2012 年。

继续意味着学生例如在 2006 年开始，辍学并在 2008 年回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:50:54.263

您可能有一些状态列来跟踪学生通过/放弃/重新加入/失败/继续等，您可以为他们设置一些代码，例如列名将是 Student_Status，它可能具有如下映射的值

通过 = 0，失败 = 1，丢弃 = 2，重新加入 = 3，继续 = 4

那么您可以在加入上述查询后使用上述查询并检查 Student_Status，它将为您提供所需学生的准确结果。

```
SELECT *
FROM FileYear2006
INNER JOIN GraduationFile1 ON FileYear2006.STUDENTID = GraduationFile1.STUDENTID
WHERE Student_Status = 4 
```

# r - 创建一个数字向量，其中没有数字在前一个元素的 2 以内

> ID：15940444
> 
> 赞同：1
> 
> 时间：2013-04-11T03:50:51.573
> 
> 标签：r

我想创建一个随机间隔在 6-20、21-35 等之间一直到 500 的数字向量。我用 sapply 完成了这个

```
positions <- sapply(seq(6, 500, by = 15),function(x) x + sample(1:15, 1)) 
```

我想在这个序列中再添加一条规则。我不希望这个向量中的任何数字彼此相差 2，即如果我的第一个数字是 20，我不希望我的第二个数字是 21 或 22，依此类推。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:57:15.997

听起来您不关心序列的长度。如果是这种情况，并且如果我正确理解了您的问题，则以下内容应该可以满足您的要求：

```
positions <- positions[diff(positions) > 2] 
```

您可能还需要使用`while`语句，以防在删除某些值后，仍有值在要删除的阈值内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:07:10.083

这个混淆代码可以做到 - 让我看看我是否可以清理它。

```
positions <- c()
x <- 0
for (i in seq(6, 500, 15))
{
    sub.samples <- setdiff(1:15 + i, seq(x-2,x+2,1))
    x <- sample(sub.samples, 1)
    positions <- c(positions,x)
} 
```

# spring - 将 @Transactional 添加到 BeanPostProcessor 引用的 Bean

> ID：15940447
> 
> 赞同：3
> 
> 时间：2013-04-11T03:50:57.973
> 
> 标签：spring

目前，我以这种方式设置了 Spring 配置：

```
@Bean
@Autowired
public Manager manager(DataRetriever dataRetriever) { 
    Manager m = new Manager();
    m.setRetriever(dataRetriever); //DataRetriever is a @Component bean
    return m;
}

@Bean
public VendorFactoryBean factory() { 
    final VendorFactoryBean fb = new VendorFactoryBean(); 
    fb.setManager(manager());
    return fb;
} 
```

`VendorFactoryBean` *需要*一个`Manager`实例。`Manager`豆>`DataRetriever`豆。

在`DataRetriever`我有一个`@Transactional`这样的注释：

```
@Component("dataRetriever")
public class DataRetriever { 
    @Transactional public void retrieveStuff() {...} 
} 
```

现在，`VendorFactoryBean`实现`BeanPostProcessor`. 这是我遇到问题的地方。

根据[这个 SO question](https://stackoverflow.com/questions/1201726/tracking-down-cause-of-springs-not-eligible-for-auto-proxying)，所有 BeanPostProcessor 及其直接引用的 bean 都将在启动时实例化，此外：**由于 AOP 自动代理是作为 BeanPostProcessor 本身实现的，因此没有 BeanPostProcessors 或直接引用的 bean 有资格进行自动代理（因此不会有“编织”到其中的方面。**

事实上，@Transactional 注释被忽略了，我得到一个错误：“No Hibernate session bound to this thread。”

我试图`fb.setManager(manager());`从 VendorFactoryBean 移动调用并使用另一个 BeanPostProcessor 设置它，但是在这种情况下我不能这样做，因为 VendorFactoryBean 来自库并且它包含一个断言，即在实例化时必须已经设置了 Manager 实例。

想问一下这种情况有没有可能的解决办法。

编辑：[this SO question中的](https://stackoverflow.com/questions/15922559/spring-is-ignoring-transactional-annotations-in-apache-shiro-realm-class)具体示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:01:50.193

我已经想到了针对这种特定情况的解决方案。

基本上，**我们将 DataRetriever bean 与 Manager bean 分离**。

（1）我们修改@Configuration类如下：

```
@Bean
public Manager manager() { 
    Manager m = new Manager();
    //m.setRetriever(dataRetriever); !IMPT! remove this!
    return m;
}

@Bean
public VendorFactoryBean factory() { 
    final VendorFactoryBean fb = new VendorFactoryBean(); //implements BeanPostProcessor 
    fb.setManager(manager());
    return fb;
} 
```

(2) 我们允许 Spring 初始化 bean。首先，`VendorFactoryBean`bean 与bean 一起被初始化`Manager`。然后，`DataRetriever`初始化 bean 并正确处理其 @Transactional 注释。

(3) 由于我们正在进行编程配置，我们有一个`WebApplicationInitializer`可以插入的类`ServletContextListeners`，如下所示：

```
public class AppInitializer implements WebApplicationInitializer {
    public void onStartup(ServletContext container) throws ServletException {
        // Create the 'root' Spring application context
        AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
        rootContext.register(SpringAppConfig.class);

        // Manage the lifecycle of the root application context
        container.addListener(new ContextLoaderListener(rootContext));
        // New listener to finalize initialization of Manager.
        container.addListener(new ManagerFinalizerListener(rootContext));
    }
} 
```

(4) 最后我们创建一个将 bean 绑定到bean 的`ServletContextListener`类。`DataRetriever``Manager`

```
public class ManagerFinalizerListener implements ServletContextListener {

    private AnnotationConfigWebApplicationContext ctx;

    public ManagerFinalizerListener(AnnotationConfigWebApplicationContext ctx) {
        this.ctx = ctx;
    }

    public void contextInitialized(ServletContextEvent sce) {
        final Manager mgr = (Manager)ctx.getBean("manager");
        mgr.setRetriever((DataRetriever)ctx.getBean("dataRetriever"));
    }
} 
```

这将在 Spring 上下文完成初始化后完成，因此不会由于依赖关系而过早创建 bean。

# php - 重新排序我的数据库表并显示到 Web 的最有效方法

> ID：15940450
> 
> 赞同：1
> 
> 时间：2013-04-11T03:51:11.750
> 
> 标签：php, mysql

我是 MySQL 的新手，只需阅读我书中解释它的部分，现在我将它应用到我正在构建的网站上。

我的数据库中有以下两个表：

```
Table Name: Transactions
+------------------+------------+-----------+--------+
| description      | date       | category  | amount |
+------------------+------------+-----------+--------+
| Internet         | 2013-01-04 | Bills     | $50.00 |
+------------------+------------+-----------+--------+
| Giant Eagle Trip | 2013-10-04 | Groceries | $30.00 |
+------------------+------------+-----------+--------+
| Car Insurance    | 2013-01-04 | Bills     | $90.00 |
+------------------+------------+-----------+--------+
| Starbucks        | 2013-09-04 | Coffee    |  $5.00 |
+------------------+------------+-----------+--------+
| Giant Eagle Trip | 2013-11-04 | Groceries | $15.00 |
+------------------+------------+-----------+--------+

Table Name: Categories
+------+-----------+
| rank | Name      |
+------+-----------+
|    1 | Bills     |
+------+-----------+
|    2 | Groceries |
+------+-----------+
|    3 | Coffee    |
+------+-----------+ 
```

在我的网站上，我想获取该交易表并按类别列对其进行排序。诀窍是我不希望它按字母顺序排列，我希望它按与类别表相同的顺序排列。我在下面显示的最终结果：

```
+------------------+------------+-----------+--------+
| description      | date       | category  | amount |
+------------------+------------+-----------+--------+
| Internet         | 2013-01-04 | Bills     | $50.00 |
+------------------+------------+-----------+--------+
| Car Insurance    | 2013-01-04 | Bills     | $90.00 |
+------------------+------------+-----------+--------+
| Giant Eagle Trip | 2013-10-04 | Groceries | $30.00 |
+------------------+------------+-----------+--------+
| Giant Eagle Trip | 2013-11-04 | Groceries | $15.00 |
+------------------+------------+-----------+--------+
| Starbucks        | 2013-09-04 | Coffee    |  $5.00 |
+------------------+------------+-----------+--------+ 
```

我想到了两种方法来做到这一点，它们如下：

```
//Option A: using arrays
   //Get categories in correct order
   $query  = "select name 
              from Categories
              order by rank";
   $result = $db->query($query);
   $numOfCategories = $result->num_rows;
   for($i=0; $i<$numOfCategories; $i++) {
      $row = $result->fetch_assoc();
      $category[$i] = $row['name'];
   }

   //Get transactions and put in correct order
   $query  = "select *
              from Transactions";
   $result = $db->query($query);
   $numOfTransactions = $result->num_rows;

   for($i=0; $i<$numOfTransactions; $i++) {
      $row = $result->fetch_assoc();
      for($j=0; $j<$numOfCategories; $j++) {
         if ($category[$j] == $row['category']) {
            $tableRows[$j][] = $row;
         }
      }
   }

   //Display Table
   echo "<table>\n";
   for($i=0; $i<count($tableRows); $i++) {
      for($j=0; $j<count($tableRows[$i]); $j++) {
         echo "   <tr>\n";
         echo "      <td>".$tableRows[$i][$j]['description']."</td>\n";
         echo "      <td>".$tableRows[$i][$j]['date']."</td>\n";
         echo "      <td>".$tableRows[$i][$j]['category']."</td>\n";
         echo "      <td>".$tableRows[$i][$j]['amount']."</td>\n";
         echo "   </tr>\n";
      }
   }
   echo "</table><br><br>\n";

//Option B: using where in select query
   //Get categories in correct order
   $query  = "select name 
              from Categories
              order by rank";
   $result = $db->query($query);
   $numOfCategories = $result->num_rows;
   for($i=0; $i<$numOfCategories; $i++) {
      $row = $result->fetch_assoc();
      $category[$i] = $row['name'];
   }

   //Get transactions and display table
   echo "<table>\n";
   for($i=0; $i<$numOfCategories; $i++) {
      $query  = "select * 
                 from Transactions
                 where category = '".$category[$i]."'";
      $result = $db->query($query);
      for($j=0; $j<$result->num_rows; $j++) {
         $row = $result->fetch_assoc();
         echo "   <tr>\n";
         echo "      <td>".$row['description']."</td>\n";
         echo "      <td>".$row['date']."</td>\n";
         echo "      <td>".$row['category']."</td>\n";
         echo "      <td>".$row['amount']."</td>\n";
         echo "   </tr>\n";
      }
   }
   echo "</table><br><br>\n"; 
```

哪种方式更好以及为什么，或者是否有另一种方式比这些方式更好（可能使用我的书没有详细解释的 MySQL 中的索引功能和/或使用我的书也没有解释的准备好的语句非常详细）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:53:40.510

```
SELECT Categories.*, Transactions.*
FROM Categories
LEFT JOIN Transactions ON Categories.name = Transactions.Category
ORDER BY Categories.rank 
```

我建议不要在您的交易表中嵌入类别名称。虽然像这样一个简单的例子是可以的，但它最终会占用大量空间来存储所有这些类别名称的冗余副本。您应该只存储类别 ID。如果该表变得“大”，则 4byte int 与 varchars 的许多字节将大大节省。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T03:53:29.187

利用`JOIN`

```
SELECT * FROM Transactions LEFT JOIN
   Categories ON Categories.Name = Transactions.category 
```

### [`More for LEFT JOIN`](http://dev.mysql.com/doc/refman/5.0/en/left-join-optimization.html)

# git - 即使被跟踪，Git push 也试图推送到不同的分支

> ID：15940452
> 
> 赞同：1
> 
> 时间：2013-04-11T03:51:14.403
> 
> 标签：git, branch, repository

我有一个带有 4 个分支的 git repo 设置：

*   掌握
*   开发者
*   约翰德夫
*   角度路由

我目前正在研究`angular-routing`并尝试`origin/angular-routing`使用简单`git push`的方法进行推送，但我注意到我收到以下错误：

`! [rejected] johndev -> johndev (non-fast-forward)`

我明白错误的含义，这很好，但我不明白为什么它首先试图推到那里。我将所有分支跟踪到似乎设置正确的相同远程分支。跑步`git remote show origin`给了我以下信息：

```
Remote branches:
  angular-routing tracked
  dev             tracked
  johndev         tracked
  master          tracked
Local branches configured for 'git pull':
  angular-routing merges with remote angular-routing
  dev             merges with remote dev
  johndev         merges with remote johndev
  master          merges with remote master
Local refs configured for 'git push':
  angular-routing pushes to angular-routing (up to date)
  dev             pushes to dev             (up to date)
  johndev         pushes to johndev         (local out of date)
  master          pushes to master          (up to date) 
```

据我所知，它设置正确，所以我没有理由`git push`尝试`angular-routing`推动，`johndev`但确实如此。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:53:20.453

这是因为 is 的设置`push.default`，`matching`这是默认设置。这意味着当您在没有指定要推送的内容的情况下进行推送时，git 将尝试推送目标上已经存在的所有分支。

听起来您想将该设置更改为`upstream`，这将导致默认情况下仅将当前分支推送到配置为其上游分支的远程分支。这可以通过以下方式完成：

```
git config --global push.default upstream 
```

# c# - 获取Gridview中单元格的值

> ID：15940457
> 
> 赞同：0
> 
> 时间：2013-04-11T03:51:36.323
> 
> 标签：c#, asp.net

各位程序员，我正在尝试获取 Gridview 的最后一列（已绑定到某个 SQL 数据库）中的值，然后根据该单元格的值可能用生成的超链接替换该单元格的内容。到目前为止我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    /* Load the Required Data */
    StrCommand="SELECT "+ Request.QueryString["Cols"] + " FROM " +  Request.QueryString["Category"];
    SqlConnection myConnection = new SqlConnection();
    myConnection.ConnectionString = "Data Source=localhost;" + "Initial Catalog=Categories; Integrated Security=SSPI";
    SqlCommand myCommand = new SqlCommand(StrCommand, myConnection);
    myConnection.Open();
    SqlDataReader DataReader1 = myCommand.ExecuteReader();
    ProductList.DataSource = DataReader1;
    ProductList.DataBind();
    myConnection.Close();

    /* Post-binding modifications are now applied to the Grid View */

    /* Generate the column containing the add-to-cart buttons */
    for (int j = 0; j < ProductList.Rows.Count-1; j++)
    {
        int id_holder = int.Parse(ProductList.Rows[j].Cells[ProductList.Columns.Count-1].Text); 

    }

} 
```

不幸的是，这段代码失败了，我得到了这个错误：

```
Specified argument was out of the range of valid values. Parameter name: index 
```

任何想法表示赞赏，
狮子座

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:01:05.733

如果失败是索引超出范围，请将 for 语句更改为：

```
for (int j = 0; j < ProductList.Rows.Count - 1; j++) 
```

因为数组是从零开始的，而计数不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:36:16.997

我找到了答案，当 GridView.AutoGenerateColumns 属性设置为“True”时，ProductList.Columns.Count 不会更新，将其保留为“0”。另一种方法是使用：ProductList.Rows[0].Cells.Count。否则我们可以将 AutoGenerateColumns 设置为 false 并构建我们自己的列模板。

干杯。

# javascript - 当 AngularJS 中的 2 个输入在更改时调用相同的方法时，识别方法的调用者

> ID：15940466
> 
> 赞同：0
> 
> 时间：2013-04-11T03:52:03.190
> 
> 标签：javascript, jquery, html, angularjs

假设我有一个包含 2 列（用户 ID、用户名）的表。我有两个输入文本字段，它们在更改时调用一个方法说 filter() 来过滤表中显示的数据。在 AngularJS 中，我将如何识别哪个元素称为 filter() 方法。我也想访问调用元素的数据属性。我刚从 Angular 开始，任何帮助都会很棒！

我的 HTML

```
<div ng-controller="MyCtrl">
<table><thead>
<tr><th><input type="text" class="filter" ng-model="jobid" ng-change="filter()" data-filterby="jobid"/></th>
<th><input type="text" class="filter" ng-model="name" ng-change="filter()" data-filterby="name"/></th></tr>
</thead></table>
</div> 
```

我的 AngularJS 控制器

```
function MyCtrl($scope) {
  $scope.filter = function() {
    $item = angular.element(this);
    $item.val();
    /* ^^ This doesnt work - Throws an error*/
  } 
```

我知道我可以很容易地为每个文本框设置单独的函数名称，但我希望有一个通用函数来处理这个问题，以获得更简单的代码。如果是 jquery 我可以做这样的事情

```
$(".filter").keyup(function() {
  var text = $(this).val();
  var filterby = $(this).attr("data-filterby");
}); 
```

因此，无论哪个文本框发生变化，我都可以获取该特定文本框中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:05:33.080

由于[ngChange](http://docs.angularjs.org/api/ng.directive%3angClick)似乎不像[ngClick](http://docs.angularjs.org/api/ng.directive%3angChange)那样支持，因此您可以滚动自己的版本来公开它，或者将一些指示符传递给您的过滤器方法，例如...`$event``ngChange`

```
<input type="text" class="filter" ng-model="jobid" ng-change="filter('jobid')" data-filterby="jobid"/>
<input type="text" class="filter" ng-model="name" ng-change="filter('name')" data-filterby="name"/> 
```

然后像这样使用它：

```
$scope.filter = function(key) {
  console.log(key + ' is ' + $scope[key]);
} 
```

我想我应该问......你想用价值做什么？可能有一种更 Angular 的方式来实现你想要做的事情。

# apache - 虚拟主机的 DocumentRoot 上的通配符

> ID：15940467
> 
> 赞同：0
> 
> 时间：2013-04-11T03:52:04.840
> 
> 标签：apache, virtualhost

我将此片段用于通配符子域并且效果很好：

```
<VirtualHost *:80>
  DocumentRoot /var/www/subdomains
  ServerName subdomains.example.com
  ServerAlias *.example.com
</VirtualHost> 
```

现在我也想在 DocumentRoot 中使用通配符，例如：

```
<VirtualHost *:80>
  DocumentRoot /var/www/*
  ServerName sumdomains.example.com
  ServerAlias *.example.com
</VirtualHost> 
```

这意味着如果调用“username.example.com”，DocumentRoot 指向“/var/www/username/”。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:17:51.963

您不能直接这样做，但您可以重写您的网址以具有相同的行为

在配置文件中添加这两行

```
DocumentRoot /var/www/
RewriteEngine On
RewriteRule ^/(.*) /%{HTTP_HOST}/$1 
```

[对http://user.example.com/foo.html](http://user.example.com/foo.html)的请求将获取文件**/var/www/user.example.com/foo.html**

# xml - Groovy：将节点添加到 NodeChildren

> ID：15940468
> 
> 赞同：0
> 
> 时间：2013-04-11T03:52:20.733
> 
> 标签：xml, groovy, add, nodes

我是 Groovy 的新手，不知何故在语法上苦苦挣扎。我有一个 NodeChildren 类型的对象（在 groovy.util.slurpersupport 中），它表示这样的 XML 结构：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.camerontec.catalys.node</groupId>
  <artifactId>catalys-node-core</artifactId>
  <version>2.1-SNAPSHOT</version>
  <dependencies>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jsp-api</artifactId>
      <version>2.0</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.6.2</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-lang</groupId>
      <artifactId>commons-lang</artifactId>
      <version>2.4</version>
      <scope>compile</scope>
    </dependency>
  </dependencies>
</project> 
```

我想做的只是为其添加另一个依赖项，例如：

```
<dependency>
  <groupId>jdom</groupId>
  <artifactId>jdom</artifactId>
  <version>1.1.1</version>
  <scope>compile</scope>
</dependency> 
```

我必须相当简单，但由于某种原因我无法弄清楚。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:01:36.053

您可以使用 XmlSlurper 来做到这一点（如果您关闭命名空间，因此 XmlSlurper 不会在所有非命名空间标记前加上`tag0`） - 我删除了 2 个原始部门以节省此答案的空间

```
import groovy.xml.*

def original = '''<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.camerontec.catalys.node</groupId>
  <artifactId>catalys-node-core</artifactId>
  <version>2.1-SNAPSHOT</version>
  <dependencies>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jsp-api</artifactId>
      <version>2.0</version>
      <scope>compile</scope>
    </dependency>
  </dependencies>
</project>'''

def newDep = '''<dependency>
  <groupId>jdom</groupId>
  <artifactId>jdom</artifactId>
  <version>1.1.1</version>
  <scope>compile</scope>
</dependency>'''

def newNode = new XmlSlurper().parseText( newDep )
def oldNode = new XmlSlurper( false, false ).parseText( original )

oldNode.dependencies.appendNode( newNode )
String xmlStr = XmlUtil.serialize( new StreamingMarkupBuilder().bind { mkp.yield oldNode } )
println xmlStr 
```

# .net - 自定义 IComparer

> ID：15940470
> 
> 赞同：0
> 
> 时间：2013-04-11T03:52:24.943
> 
> 标签：.net, sorting, icomparer

我想创建一个`IComparer<string>`for a `SortedDictionary<string, int>`，它会按字母顺序对所有内容进行排序，但如果它看到“Other”键，它会将“Other”放在列表的末尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:05:27.483

你的意思是这样吗？

```
public sealed class MyComparer : Comparer<string>
{
     public override int Compare(string x, string y)
     {
         if(x == "Other")
            return y == "Other" ? 0 : 1;

         if(y == "Other")
            return -1;

         // Change this comparer if required.
         return StringComparer.OrdinalIgnoreCase.Compare(x, y);
     }
} 
```

用法：

```
var dict = new SortedDictionary<string, int> (new MyComparer())
{ 
    { "Other", 1 }, { "aaa", 2 }, { "bbb", 3 }
}; 
```

显然，您可以通过编写以下内容来使其更通用`SpecialCaseAtEndComparer<T>`：

1.  允许将“特殊”值注入比较器。
2.  允许将“正常”比较器注入到比较器中。
3.  使比较器适用于所有类型，而不仅仅是字符串。

# scala - Kiselyov 拉链的惯用 Scala 翻译？

> ID：15940473
> 
> 赞同：18
> 
> 时间：2013-04-11T03:52:33.493
> 
> 标签：scala, haskell, monads, continuations, zipper

Oleg Kiselyov[展示了如何](http://okmij.org/ftp/Haskell/ZipperTraversable.hs)通过使用定界延续来从任何可遍历的对象中制作拉链。他的 Haskell 代码很短：

```
module ZipperTraversable where 

import qualified Data.Traversable as T
import qualified Data.Map as M

-- In the variant Z a k, a is the current, focused value
-- evaluate (k Nothing) to move forward
-- evaluate (k v)       to replace the current value with v and move forward.

data Zipper t a = ZDone (t a) 
                | Z a (Maybe a -> Zipper t a)

make_zipper :: T.Traversable t => t a -> Zipper t a
make_zipper t = reset $ T.mapM f t >>= return . ZDone
 where
 f a = shift (\k -> return $ Z a (k . maybe a id))

-- The Cont monad for delimited continuations, implemented here to avoid
-- importing conflicting monad transformer libraries

newtype Cont r a = Cont{runCont :: (a -> r) -> r}

instance Monad (Cont r) where
    return x = Cont $ \k -> k x
    m >>= f  = Cont $ \k -> runCont m (\v -> runCont (f v) k)

-- Two delimited control operators,
-- without answer-type polymorphism or modification
-- These features are not needed for the application at hand

reset :: Cont r r -> r
reset m = runCont m id

shift :: ((a -> r) -> Cont r r) -> Cont r a
shift e = Cont (\k -> reset (e k)) 
```

我在尝试在 Scala 中实现它时遇到了一些问题。我开始尝试使用 Scala 的 delimited continuations 包，但即使使用 Rompf 的[richIterable](http://days2011.scala-lang.org/sites/days2011/files/56.%20node.scala_.pdf)思想推广到@cps[X] 而不是@suspendable，也不可能让提供的函数返回与提供的重置函数不同的类型。

我尝试按照 Kiselyov 的定义实现 continuation monad，但是 Scala 很难对类型参数进行柯里化，而且我无法弄清楚如何以 scalaz 的 traverse 方法满意的方式将 Cont[R] 转换为 monad。

我是 Haskell 和 Scala 的初学者，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T08:07:34.023

您可以使用延续插件。在插件完成翻译工作后，它与来自 Oleg的`Cont`monad 和 the `shift`and有相似之处。`reset`棘手的部分是找出类型。所以这是我的翻译：

```
import util.continuations._
import collection.mutable.ListBuffer

sealed trait Zipper[A] { def zipUp: Seq[A] }
case class ZDone[A](val zipUp: Seq[A]) extends Zipper[A]
case class Z[A](current: A, forward: Option[A] => Zipper[A]) extends Zipper[A] {
  def zipUp = forward(None).zipUp
}

object Zipper {
  def apply[A](seq: Seq[A]): Zipper[A] = reset[Zipper[A], Zipper[A]] {
    val coll = ListBuffer[A]()
    val iter = seq.iterator
    while (iter.hasNext) {
      val a = iter.next()
      coll += shift { (k: A=>Zipper[A]) =>
        Z(a, (a1: Option[A]) => k(a1.getOrElse(a)))
      }
    }
    ZDone(coll.toList)
  }
} 
```

continuation 插件支持 for `while`loop 但不支持`map`or `flatMap`，所以我选择使用`while`和 mutable`ListBuffer`来捕获可能更新的元素。该`make_zipper`函数被翻译成伴侣`Zipper.apply`——一个典型的 Scala 位置，用于创建新对象或集合。数据类型被翻译成一个密封的特征，两个案例类对其进行了扩展。我已经将 zip_up 函数作为一种方法，`Zipper`对每个案例类都有不同的实现。也很典型。

这是在行动：

```
object ZipperTest extends App {
  val sample = for (v <- 1 to 5) yield (v, (1 to v).reduceLeft(_ * _))
  println(sample) // Vector((1,1), (2,2), (3,6), (4,24), (5,120))

  def extract134[A](seq: Seq[A]) = {
    val Z(a1, k1) = Zipper(seq)
    val Z(a2, k2) = k1(None)
    val Z(a3, k3) = k2(None)
    val Z(a4, k4) = k3(None)
    List(a1, a3, a4)
  }
  println(extract134(sample)) // List((1,1), (3,6), (4,24))

  val updated34 = {
    val Z(a1, k1) = Zipper(sample)
    val Z(a2, k2) = k1(None)
    val Z(a3, k3) = k2(None)
    val Z(a4, k4) = k3(Some(42 -> 42))
    val z = k4(Some(88 -> 22))
    z.zipUp
  }
  println(updated34) // List((1,1), (2,2), (42,42), (88,22), (5,120))
} 
```

我是如何计算的类型`shift`和`k`/`reset`或如何翻译的`T.mapM`？

我看了看，`mapM`我知道它可以让我得到一个`Cont`，但我不确定里面是什么，`Cont`因为它取决于班次。所以我开始轮班。`return`忽略构造 a的 haskell `Cont`， shift 返回 a `Zipper`。我还想我需要在`A`我的集合中添加一个类型的元素来构建。因此，转变将在`A`预期类型元素的“洞”中，因此`k`将是一个`A=>?`函数。让我们假设这一点。我在我不太确定的类型后面加上问号。所以我开始：

```
shift { (k: A?=>?) =>
  Z(a, ?)
} 
```

接下来我（努力地）看着`(k . maybe a id)`。该函数`maybe a id`将返回一个`A`，因此这与`k`作为参数的内容一致。它相当于`a1.getOrElse(a)`。另外因为我需要填写`Z(a, ?)`，所以我需要弄清楚如何从选项到 Zipper 获取函数。最简单的方法是假设`k`返回 a `Zipper`。另外，看看如何使用 zipper`k1(None)`或`k1(Some(a))`，我知道我必须为用户提供一种方法来选择性地替换元素，这就是`forward`函数的作用。它*继续*使用原始`a`的或更新的`a`. 它开始变得有意义。所以现在我有：

```
shift { (k: A=>Zipper[A]) =>
  Z(a, (a1: Option[A]) => k(a1.getOrElse(a)))
} 
```

接下来我`mapM`再看一遍。我看到它是由`return . ZDone`. 再次忽略`return`（因为它仅适用于`Cont`monad），我看到这`ZDone`将获取结果集合。所以这是完美的，我只需要把`coll`它放进去，当程序到达那里时，它就会有更新的元素。此外， 中的表达式类型`reset`现在与返回类型`k`一致`Zipper[A]`。

最后我填写了编译器可以推断的重置类型，但是当我猜对时，它给了我一种（错误的）自信感，我知道发生了什么。

我的翻译不像 Haskell 那样通用或漂亮，因为它不保留集合中的类型并使用突变，但希望它更容易理解。

**编辑：**这是保留类型并使用不可变列表的版本，以便`z.zipUp == z.zipUp`：

```
import util.continuations._
import collection.generic.CanBuild
import collection.SeqLike

sealed trait Zipper[A, Repr] { def zipUp: Repr }
case class ZDone[A, Repr](val zipUp: Repr) extends Zipper[A, Repr]
case class Z[A, Repr](current: A,
    forward: Option[A] => Zipper[A, Repr]) extends Zipper[A, Repr] {
  def zipUp = forward(None).zipUp
}

object Zipper {
  def apply[A, Repr](seq: SeqLike[A, Repr])
                    (implicit cb: CanBuild[A, Repr]): Zipper[A, Repr] = {
    type ZAR = Zipper[A, Repr]

    def traverse[B](s: Seq[A])(f: A => B@cps[ZAR]): List[B]@cps[ZAR] =
      if (s.isEmpty) List()
      else f(s.head) :: traverse(s.tail)(f)

    reset {
      val list = traverse(seq.toSeq)(a => shift { (k: A=>ZAR) =>
        Z(a, (a1: Option[A]) => k(a1.getOrElse(a)))
      })
      val builder = cb() ++= list
      ZDone(builder.result): ZAR
    }
  }
} 
```

* * *

顺便说一下，这里有关于 scala 中 continuation monad 的额外资源：

*   [http://blog.tmorris.net/continuation-monad-in-scala/](http://blog.tmorris.net/continuation-monad-in-scala/)
*   当我第一次尝试时，我让自己经历了什么：[https](https://gist.github.com/huynhjl/4077185) ://gist.github.com/huynhjl/4077185 ；它包括将各种 Haskell 延续示例以及 Tiark 论文中的一些示例翻译成 Scala（但不使用更清楚地指出方法之间相似性的延续插件）。
*   如果您下载 scalaz，您可以将 Tony Morris 的 cont 设置为 scalaz Monad 实例并使用 scalaz [traverse](https://github.com/scalaz/scalaz/blob/scalaz-seven/tests/src/test/scala/scalaz/TraverseTest.scala) - 那么对 scala 的翻译将是一个更字面的翻译。

# php - Wordpress：防止特定目录的 mod_rewrite 规则

> ID：15940476
> 
> 赞同：2
> 
> 时间：2013-04-11T03:52:42.850
> 
> 标签：php, apache, .htaccess, mod-rewrite, cakephp-2.0

我正在尝试将 CakePHP 应用程序安装在与 Wordpress 站点相同的目录中。CakePHP 应用程序只有几个控制器，所以我认为这应该可以通过添加几个`RewriteCond`s. 不幸的是，以下 /.htaccess 文件无法正常工作：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

#start my additions
RewriteCond %{REQUEST_URI} !^/admin
RewriteCond %{REQUEST_URI} !^/tests
RewriteCond %{REQUEST_URI} !^/users
RewriteCond %{REQUEST_URI} !^/css/
RewriteCond %{REQUEST_URI} !^/js/
#end my additions

RewriteRule . /index.php [L]
</IfModule>

# END WordPress

#CakePHP rules
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} !^/$
RewriteRule (.*) app/webroot/$1 [L] 
```

由于某种原因，找不到 Wordpress 样式表：

`GET http://example.dev/wp-content/themes/sow3/style.css?1365621024 404 (Not Found)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:01:10.143

看起来 cakephp 规则正在重写静态内容。尝试为重写添加一些条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/$
RewriteRule (.*) app/webroot/$1 [L] 
```

或者

```
RewriteCond %{REQUEST_URI} !^/wp-content
RewriteCond %{REQUEST_URI} !^/wp-admin
RewriteCond %{REQUEST_URI} !^/wp-includes
RewriteCond %{REQUEST_URI} !^/$
RewriteRule (.*) app/webroot/$1 [L] 
```

# java - 将数组的输出格式化为一列

> ID：15940485
> 
> 赞同：0
> 
> 时间：2013-04-11T03:53:29.947
> 
> 标签：java, arrays, format

我只是需要一些帮助来将输出格式化为特定的方式。我满足了作业的所有要求，除了输出。

对于这篇文章的错误格式，我深表歉意，非常感谢任何建议和帮助。

我需要输出看起来像：

> 随机先生 - 500 美元
> BobRandom 先生 - 250 美元
> 等 - 8 次以上
> （所有美元的总和）

这是我的代码：

```
import javax.swing.JOptionPane;
import java.util.Arrays;

public class PeerTutors {
    public static void main(String[] args) {
        String[] myNameArray = new String[2];
        String[] myGradeArray = new String[2];
        double[] myStudentArray = new double[2];
        double[] stipend = new double[2];
        int sum = 0;

        for (int i = 0; i < 2; i++) {
            myNameArray[i] = (JOptionPane
                    .showInputDialog(null,
                            "Enter the Peer Tutor name, last name then followed by the first name."));

        }
        Arrays.sort(myNameArray, String.CASE_INSENSITIVE_ORDER);
        JOptionPane.showMessageDialog(null, "The Peer Tutors Names are :"
                + Arrays.toString(myNameArray));

        for (int a = 0; a < 2; a++) {
            myGradeArray[a] = JOptionPane.showInputDialog(null,
                    "Please enter the highest degree earned for: "
                            + myNameArray[a]);
        }
        JOptionPane.showMessageDialog(null, "The Peer Tutors Names are :"
                + Arrays.toString(myNameArray) + Arrays.toString(myGradeArray));

        for (int b = 0; b < 2; b++) {
            myStudentArray[b] = Double.parseDouble(JOptionPane.showInputDialog(
                    null, "Please enter the number of students"
                            + myNameArray[b] + " has assisted"));
        }
        JOptionPane.showMessageDialog(null,
                "The Peer Tutors Report: " + Arrays.toString(myNameArray)
                        + "with" + Arrays.toString(myStudentArray)
                        + " of children tutoring");

        for (int c = 0; c < 2; c++) {
            if (myGradeArray[c].equals("BS")) {
                stipend[c] = 9.5 * myStudentArray[c];

            } else if (myGradeArray[c].equals("MS")) {
                stipend[c] = 15 * myStudentArray[c];

            } else {
                stipend[c] = 20 * myStudentArray[c];
            }
        }
        for (double d : stipend) {
            sum += d;
        }

        for (int d = 0; d < 2; d++) {
            JOptionPane.showMessageDialog(null, myNameArray[d] + "-"
                    + stipend[d] + "\n");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:09:09.477

基本上，对于每一列，您都需要某种列表（数组或最好是`List`）。您还需要维护每列 max-width 的信息（我通常将其放在另一个中`List`）。

您需要循环每一行，分解为它的列元素并将每个元素放在相应的列`List`中。您还应该随时计算每列的宽度要求。

一旦你把这一切都安排好了，你需要重建输出，使用类似 a 的东西`StringBuilder`来重建输出的每一行，但这样每一列都有所需的额外间距以允许列流动。

**更新了示例**

现在，通常情况下，我会将每一行存储为一个单独的对象，因为这样可以更轻松地保持对总行数的一致想法，但是，使用您的代码作为起点......

```
import java.text.NumberFormat;

public class TestTextColumnFormatting {

    public static void main(String[] args) {
        String[] myNameArray = new String[]{
            "Mr. Samete",
            "Ms. Torbura",
            "Mr. Perem",
            "Mr. Rothaw",
            "Miss. Endemos",
            "Mr. Chomoshon",
            "Mrs. Aldir",};
        double[] stipends = new double[]{
            500,
            200,
            300,
            1000,
            250,
            125,
            600,
            338
        };
        NumberFormat nf = NumberFormat.getCurrencyInstance();
        double tally = 0;

        int columnWidths[] = new int[2];
        for (int index = 0; index < myNameArray.length; index++) {
            columnWidths[0] = Math.max(columnWidths[0], myNameArray[index].length());
            columnWidths[1] = Math.max(columnWidths[1], nf.format(stipends[index]).length());
            tally += stipends[index];
        }

        columnWidths[1] = Math.max(columnWidths[1], nf.format(tally).length());

        StringBuilder sb = new StringBuilder(128);
        for (int index = 0; index < myNameArray.length; index++) {

            String name = myNameArray[index];
            String stipend = nf.format(stipends[index]);

            sb.append(name).append(fill(name, columnWidths[0], ' ')).append(" ");
            sb.append(fill(stipend, columnWidths[1], ' ')).append(stipend);
            sb.append("\n");

        }

        sb.append(fill("", columnWidths[0], ' ')).append(" ");
        sb.append(fill("", columnWidths[1], '=')).append("\n");
        sb.append(fill("", columnWidths[0], ' ')).append(" ");
        sb.append(fill(nf.format(tally), columnWidths[1], ' ')).append(nf.format(tally));
        sb.append("\n");

        System.out.println(sb.toString());

    }

    public static String fill(String sValue, int iMinLength, char with) {

        StringBuilder filled = new StringBuilder(iMinLength);

        while (filled.length() < iMinLength - sValue.length()) {

            filled.append(with);

        }

        return filled.toString();

    }
} 
```

这将输出类似...

```
Mr. Samete      $500.00
Ms. Torbura     $200.00
Mr. Perem       $300.00
Mr. Rothaw    $1,000.00
Miss. Endemos   $250.00
Mr. Chomoshon   $125.00
Mrs. Aldir      $600.00
              =========
              $2,975.00 
```

**更新**

我真是个白痴，我才意识到您正在使用`JOptionPane`：P

最简单的解决方案是构建一个 HTML 表格并让 Swing 为您呈现它......

![在此处输入图像描述](https://i.stack.imgur.com/Q1DGv.png)

```
import java.text.NumberFormat;
import javax.swing.JOptionPane;

public class TestTextColumnFormatting {

    public static void main(String[] args) {
        String[] myNameArray = new String[]{
            "Mr. Samete",
            "Ms. Torbura",
            "Mr. Perem",
            "Mr. Rothaw",
            "Miss. Endemos",
            "Mr. Chomoshon",
            "Mrs. Aldir",};
        double[] stipends = new double[]{
            500,
            200,
            300,
            1000,
            250,
            125,
            600,
            338
        };
        NumberFormat nf = NumberFormat.getCurrencyInstance();
        double tally = 0;

        StringBuilder sb = new StringBuilder(128);
        sb.append("<html><table border='0'>");
        for (int index = 0; index < myNameArray.length; index++) {

            String name = myNameArray[index];
            String stipend = nf.format(stipends[index]);

            sb.append("<tr><td align='left'>");
            sb.append(name);
            sb.append("</td><td align='right'>");
            sb.append(stipend);
            sb.append("</td></tr>");

            tally += stipends[index];

        }
        sb.append("<tr><td align='center'>");
        sb.append("</td><td align='right'>");
        sb.append(nf.format(tally));
        sb.append("</td></tr>");

        JOptionPane.showMessageDialog(null, sb.toString());

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:32:11.373

您可以将给定的输入附加到 a `String`，然后将其传递给`JOptionPane`as 输入。从输入中获取名称后，只需使用 a`String`并将所有名称附加到它以进行显示。

![示例图像](https://i.stack.imgur.com/EwoGO.png)

```
 Arrays.sort(myNameArray);

  String nameString = new String();
  for(int i = 0; i < myNameArray.length; i++) {
      nameString = "\n" + nameString + myNameArray[i] + "\n";
  }

  JOptionPane.showMessageDialog(null,"The Peer Tutors Names are :" + nameString); 
```

同样，您也可以对其他输入执行相同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:00:04.557

解决方案 1）从每一行构建一个字符串。您可以通过简单地将两个字符串与 连接在一起`+`，并将它们放在单独的行上，并将它们与中间的 a 连接起来，`System.lineSeparator()`这是一个特殊的字符串，它将是您系统上的换行符 ASCII。（见[http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#lineSeparator%28%29](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#lineSeparator%28%29)）

解决方案 2）将您想要在最终字符串中的所有行添加到一个`ArrayList<String>`中，然后通过连接您的列表来构造输出字符串`System.lineSeparator()`。类似的想法，除了行在逻辑上是分开的，直到最后。

如果您需要特定的宽度，我建议您遵循解决方案 2)，除了不要将要打印的最终结果制作成 ArrayList，而是制作每列组件的 ArrayList，并注意每列中最大的条目。然后，您可以在所有其他条目中添加空格以使它们同样大（例如，使用字符串格式化程序、%s 标记并在每个条目上动态添加所需的宽度：http: [//docs.oracle。 com/javase/6/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)）。然后，您最终可以将所有内容连接在一起并吐出。

# google-chrome - Chromer 开发者工具中的 Sass/SCSS 支持

> ID：15940494
> 
> 赞同：23
> 
> 时间：2013-04-11T03:54:44.960
> 
> 标签：google-chrome, sass, google-chrome-devtools

以前，直到最近（据我所知，直到 Chrome 27），Chrome 开发工具在 Chrome Experiments 的帮助下都支持 Sass（准确地说是 SCSS）“检查”。

支持体现在检查站点的 CSS 文件的能力，如果 CSS 是使用`--debug-info`(SCSS 3.2.7) 从 SCSS 编译的，那么在 CSS 面板中：

![在此处输入图像描述](https://i.stack.imgur.com/9SQoW.png)

而不是 CSS 文件链接 - 您会看到相应的 SCSS 文件链接，您可以单击它，它会在资源中打开文件，该文件会在有助于检查 CSS 规则的确切 SCSS 规则中打开（就像您可以使用 CSS 文件一样） .

**无论出于何种原因，这已停止与（我的）最新的 Chrome 更新一起使用。**

这对我目前正在做的工作（大型项目的 SCSS 重组）很重要，所以我问：有没有人有同样的经历（我在我可以访问的所有机器上都有），更重要的是，有**没有人知道如何修复它（无需寻找旧的 Chrome 版本）**？

*我不确定什么是合适的 SE 渠道，但由于它与开发有关 - 在这里*

> PS SCSS 生成的路径似乎是正确的，因为在 FireSASS 中它们可以正确显示和访问

在我尝试过的任何渠道上都会发生同样的情况 - 发布、测试版、金丝雀

**更新 18.06.13**

由于似乎旧的 ( `--debug-info`) 日子已经一去不复返了，我将接受@electric_g 的回答作为唯一的可能性。

![实验中的 Sass 支持](https://i.stack.imgur.com/6KCel.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T10:31:17.590

我在 Chrome Canary 上遇到了同样的问题，我通过以下方式修复了它：

首先我启用了对源地图的支持：Web Inspector -> 设置 -> 常规选项卡 -> 选中“启用源地图”。

[然后我按照http://snugug.com/musings/debugging-sass-source-maps](http://snugug.com/musings/debugging-sass-source-maps)的说明安装了 Sass 3.3（它支持源映射）：

跑

```
gem install sass --pre 
```

检查

```
sass -v 
```

至少有 Sass 3.3.0.alpha.101 然后在编译文件时使用 /`--sourcemap flag`而不是`--debug-info`/ 。`-g`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T16:56:57.560

万一其他人在这里结束，要在 Chrome for Sass 中使用源映射，您需要先使用`--sourcemap`标志来生成它们！

```
sass --watch --sourcemap --debug-in sass/screen.scss:screen.css 
```

更多信息：[https ://developers.google.com/chrome-developer-tools/docs/tips-and-tricks#debugging-sass](https://developers.google.com/chrome-developer-tools/docs/tips-and-tricks#debugging-sass)

该`--debug-info`标志用于 FireSass。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T08:25:12.963

您的 Chrome 可能存在更新错误。我你点击右上角的菜单，然后点击关于谷歌浏览器，你会看到你的版本（应该是 31+）。我的显示旧版本和更新错误。

卸载Chrome，重启电脑，重新安装chrome。

您应该拥有所有最新的工具。SASS 支持在我的版本上不再是实验性的，并且默认为我打开。但是您可能必须打开它：

*   转到 URL chrome://flags 然后启用开发者工具实验。
*   打开 DevTools（右键单击网页检查元素）
*   点击右下角的齿轮图标
*   单击实验，然后单击启用 SASS 支持
*   单击常规，然后单击启用 CSS 源映射

# rest - 如何在 REST API 中最好地表示动态游戏动作？

> ID：15940495
> 
> 赞同：1
> 
> 时间：2013-04-11T03:54:46.833
> 
> 标签：rest, post, dynamic, restful-url

我想创建一个简单的纸牌游戏并将所有游戏逻辑放在服务器端。然后，客户端应用程序将通过 REST API 与后端交互。

我已经弄清楚了其中的一部分，但是我正在努力解决如何使用这种 API 实现动态操作。

例如，我有这种动作：

*   开始游戏
*   翻转卡
*   检查用户猜测
*   暂停游戏
*   结束游戏

特别是，我将如何处理开始或暂停游戏？我可以做这样的事情：

```
POST /games/123/start
POST /games/123/pause 
```

但这不是很 RESTful，因为 URL 的最后一部分是动词而不是名词。此外，实际上没有要发布的数据。

我将如何实施这种动态操作？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:01:18.970

RESTful API——其中动词由 HTTP 方法完全描述，资源由 URL 完全描述——当您的主要操作是 CRUD 或考虑 SQL（插入、选择、更新、删除）时效果最佳。因此，请考虑如何以类似 CRUD 的方式描述每个操作：

*   开始游戏就像创造一个游戏。它在创建后立即启动：
    `POST /games`
*   暂停游戏可以被视为将游戏移动到“暂停游戏”桶中：
    `PUT /games/paused/123`
*   结束游戏就像删除它：
    `DELETE /games/123`
    或者至少就像从“活跃”游戏桶中删除它：
    `DELETE /games/active/123`

最后，由您来设计您认为最合适的 API。大多数现实世界的“RESTful”API 都不是 100% RESTful。在某些时候，设计纯度必须屈服于实用主义。

我的建议：保持`GET`s、`PUT`s、`DELETE`s 等（所有不是 a 的`POST`）幂等。`POST`s 应该是*唯一*的非幂等 HTTP 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T16:15:53.617

在我看来，我会推荐这样一条路线：
`PUT /games/213`
内容：
`{game: {paused: false}}`

如果游戏没有进行，那么它就会暂停。我不知道你的模型是什么样的，但我想所有的游戏都会在暂停状态下创建，然后我可以运行上面的请求来启动它。

此外，`PUT`可能是`POST`.

那只是我的两分钱。

# android - 我有四节课。其中之一是广播接收器；另外两个是正常的类扩展活动。

> ID：15940501
> 
> 赞同：0
> 
> 时间：2013-04-11T03:55:14.790
> 
> 标签：android, broadcastreceiver

我有四节课。其中之一是广播接收器；其他三个是正常的类扩展活动。我正在将这些活动之一的信息发送到广播接收器。现在我想知道是否有办法根据广播接收器中收到的值来运行剩余的两个活动中的任何一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:47:55.513

您可以使用意图组件，如下所示

```
public class YourbroadcastReceiver extends BroadcastReceiver {
public void onReceive(Context ctx, Intent intent) {
    //start activity
    Intent myi=new Intent(ctx,YourAnotherActivity.class);
    ctx.startActivity(myi);
} 
```

# android - Android：如何从 xml 文件中调用任何类

> ID：15940505
> 
> 赞同：0
> 
> 时间：2013-04-11T03:55:41.233
> 
> 标签：android

下面是我在布局中添加标签的代码。

```
public class MyexplistActivity extends ExpandableListActivity {
    public void onCreate(Bundle savedInstanceState) {

         super.onCreate(savedInstanceState);
         setContentView(R.layout.tryout);

         TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
         tabHost.setup();

         TabSpec browsespec=tabHost.newTabSpec("Tab 1");
         browsespec.setIndicator("Browse", getResources().getDrawable(R.drawable.icon_browse_tab));
         browsespec.setContent(R.id.tab1);

         TabSpec advspec=tabHost.newTabSpec("Tab 2");
         advspec.setIndicator("Advanced Search", getResources().getDrawable(R.drawable.icon_advsrch_tab));
         advspec.setContent(R.id.tab2);

         TabSpec tgspec=tabHost.newTabSpec("Tab 3");
         tgspec.setIndicator("Tagged Files", getResources().getDrawable(R.drawable.icon_tgfiles_tab));
         tgspec.setContent(R.id.tab3);

         tabHost.addTab(browsespec);
         tabHost.addTab(advspec);
         tabHost.addTab(tgspec);

      }
 } 
```

试用.xml

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/tabHost"
xmlns:android="http://schemas.android.com/apk/res/android"
>

<TabWidget
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"
/>

<FrameLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent"
>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@+id/tab1"
android:orientation="vertical"
android:paddingTop="60px"
>

<TextView  
android:layout_width="fill_parent" 
android:layout_height="100px" 
android:text="This is tab1"
android:id="@+id/txt1"
/>    

</LinearLayout>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/tab2"
android:orientation="vertical"
android:paddingTop="60px"
>

<TextView  
android:layout_width="fill_parent" 
android:layout_height="100px" 
android:text="This is tab 2"
android:id="@+id/txt2"
/>

</LinearLayout>

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/tab3"
android:orientation="vertical"
android:paddingTop="60px"
>

<TextView  
android:layout_width="fill_parent" 
android:layout_height="100px" 
android:text="This is tab 3"
android:id="@+id/txt3"
/>

</LinearLayout>
</FrameLayout>

</TabHost> 
```

现在我的问题是我想在点击 tab1 时调用另一个类 annotate.java 以便完成后台编码。那么这样做的程序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:01:08.703

您无法在 xml 中定义选择选项卡时会发生什么。你必须在java中这样做，你已经在这样做了。如果 Annotate.java 是一个 Activity，那么我认为您必须改为子类 TabActivity。

还值得注意的是，使用 TabActivity 和 TabHost 进行导航不再是标准做法（实际上 TabActivity 已被弃用），而是使用带有片段的 ActionBar 选项卡导航。Android 开发者网站有更多关于这方面的信息。

# ios - 添加自定义按钮后，UIScrollView 行为不流畅

> ID：15940506
> 
> 赞同：2
> 
> 时间：2013-04-11T03:55:58.337
> 
> 标签：ios, ipad, uiscrollview, uibutton

我有一个 UIScrollView，其中有 500 多个自定义按钮，根据用户的要求最多可以达到一千个。实际上，UIButton 的子类。我使用 UIButton 类的原因是我必须在点击时执行一些操作。对象如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/bxOa8.png)

这些按钮的排列就像 m*n 矩阵，其中行 (m) 固定为 20，但列 (n) 不固定。可以有 500 列。

我的问题是添加按钮后，scrollView 的行为不流畅。我使用以下代码来创建每个对象

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        sizeLabel = [[UILabel alloc] initWithFrame:sizeLabelRect];
        sizeLabel.font = [UIFont boldSystemFontOfSize:sizeLabelFontSize];
        sizeLabel.textAlignment = UITextAlignmentCenter;
//        sizeLabel.backgroundColor = [self colorWithHexString:LABEL_BG_COLOR];
//        sizeLabel.layer.cornerRadius = CORNER_RADIUS;
        [self addSubview:sizeLabel];

        nFilesLabel = [[UILabel alloc] initWithFrame:nFilesLabelRect];
        nFilesLabel.font = [UIFont boldSystemFontOfSize:nFilesFontSize];
        nFilesLabel.textAlignment = UITextAlignmentCenter;
//        nFilesLabel.backgroundColor = [self colorWithHexString:LABEL_BG_COLOR];
//        nFilesLabel.layer.cornerRadius = CORNER_RADIUS;
        [self addSubview:nFilesLabel];

        maxDisimilarity = [[UILabel alloc] initWithFrame:disimilarityRect];
//        maxDisimilarity.layer.cornerRadius = CORNER_RADIUS;
        [self addSubview:maxDisimilarity];

//        nFragment = [[UILabel alloc] init];
//        nFragment.font = [UIFont systemFontOfSize:nFragmentFontSize];
//        [self addSubview:nFragment];
    }
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

- (void)setObj:(CloneClass *)obj
{
    NSString *colorCode;
    if (obj != nil) {
        _obj = obj;
        if ([_obj.type isEqualToString:@"1"]) {
            colorCode = COLOR;
        } else if ([_obj.type isEqualToString:@"2"]) {
            colorCode = COLOR;
        } else if ([_obj.obj isEqualToString:@"Type-3"]) {
            colorCode = COLOR;
        }
        self.backgroundColor = [self colorWithHexString:colorCode];
        [self setTitle:[NSString stringWithFormat:@"%d", obj.nFragments] forState:UIControlStateNormal];

        // set size of clone class
        if (_obj.size > LARGE_SIZE) {
            sizeLabel.text = LARGE_SIZE_TEXT;
        } else if (_obj.size > MEDIUM_SIZE && _obj.size <= LARGE_SIZE) {
            sizeLabel.text = MEDIUM_SIZE_TEXT;
        } else {
            sizeLabel.text = SMALL_SIZE_TEXT;
        }

        // set number of files within a clone class
        nFilesLabel.text = [NSString stringWithFormat:@"%d", _cloneClass.nFiles];

        // set color for disimilarity
        CGFloat similarity = 1.0 - _cloneClass.maxDisimilarity;
        maxDisimilarity.backgroundColor = [UIColor colorWithRed:1.0 green:similarity blue:similarity alpha:1.0];

    } else {
        self.backgroundColor = [UIColor grayColor];
        [self setTitle:@"/" forState:UIControlStateNormal];
    }

    self.titleLabel.textColor = [UIColor blackColor];
} 
```

scrollView 甚至不适用于 10*10 矩阵。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:32:50.690

我会调查的`UICollectionView`。你现在会遇到内存问题。 `UICollectionView`允许您创建`UICollectionViewCell`类似于`UITableViewCell`可重复使用的 s。

请参阅[Apple 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)。

# jquery - CSS 缩放 - 只能让这个 (jQuery) 脚本在 Chrome 中工作

> ID：15940507
> 
> 赞同：0
> 
> 时间：2013-04-11T03:56:09.357
> 
> 标签：jquery, css, firefox, cross-browser, zooming

我正在使用 CSS 缩放来缩放外部容器以匹配高度或宽度（取决于浏览器窗口的纵横比）。它在谷歌浏览器中完美运行。我什至不需要使用“*”选择器，因为我认为 CSS 缩放属性会自动缩放所有子项。

我似乎无法让它在 Firefox 或 IE 中运行（我没有在任何其他浏览器上尝试过。

我在 Firefox 中尝试过'-moz-transform:scale' ......但也无法让它工作。

任何和所有的帮助表示赞赏。谢谢！

```
$(document).ready(function() {

var videoAspect= 480/270;/* normalWidth/normalHeight*/

var $window = $(window), windowW= $window.width(), windowH= $window.height();
var windowAspect= windowW/windowH;

if( windowAspect > videoAspect){
   /*  need height of window divided by container height = zoom amount */
    $('#wrapper').css({'zoom': windowH / (270*2)});

    }else{
        /*  need width of window divided by container zoom = zoom amount */ 
        $('#wrapper').css({'zoom': windowW / (480*2)});

        }

    });

    $(window).resize(function() {

        var videoAspect= 480/270;/* normalWidth/normalHeight*/

        var $win

dow = $(window), windowW= $window.width(), windowH= $window.height();
    var windowAspect= windowW/windowH;

    if( windowAspect > videoAspect){
       /*  need height of window divided by container height = zoom amount */
        $('#wrapper').css({'zoom': windowH / (270*2)});

    }else{
        /*  need width of window divided by container zoom = zoom amount */ 
        $('#wrapper').css({'zoom': windowW / (480*2)});

    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:10:28.560

并非所有浏览器都支持 zoom 属性（如您所见）。尝试添加`transform: scale(%)`属性。

您必须包含每个浏览器的所有变体，[这里是这些变体的一个很好的列表](https://stackoverflow.com/questions/13393588/complete-styles-for-cross-browser-css-zoom)。

# python - 两个版本的 Python 在 ubuntu 上是如何工作的？

> ID：15940508
> 
> 赞同：0
> 
> 时间：2013-04-11T03:57:02.483
> 
> 标签：python, ubuntu, pip

我是 Linux 新手，刚刚在我的笔记本电脑上安装了 ubuntu12.10。我使用 Python，ubuntu 上有两个版本的 Python，2.7 和 3.2。我的问题来了，如果我下载一个模块然后设置它，它将安装到哪个版本？我不知道诸如`sudo apt-get install python-virtualenv`将其安装到何处，哪个版本之类的命令。是否有默认版本，然后安装了所有内容？

而当我想用*pip*安装一些包的时候，我仍然不知道它会匹配哪个版本，也不知道如何将包安装到我想要的版本。我搜索了 google 和 stackoverflow 并知道它与*virtualenv*有关。而且我阅读了*virtualenv*文档，但我仍然没有清楚地理解它。

希望有人能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:24:20.370

[Debian Python 政策](http://www.debian.org/doc/packaging-manuals/python-policy/)描述了打包的模块应该如何交互，`dpkg`以便为每个安装的版本（如果是 Python）安装、编译等附加组件。

IIRC 政策规定这 `python`意味着`python2`您必须`python3`明确使用才能获得 v3。

实际上，这意味着如果您想使用自己的个人库设置自己的 Python 3 环境，您将需要一个虚拟环境（有点像 vmware box 或 chroot，只是为了覆盖系统范围的 Python）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:35:22.193

您可以通过发出以下命令来检查您正在运行的 python

```
which python
[output-path]eg: /opt/local/bin/python 
```

用这个

```
/opt/local/bin/python --version 
```

如果这是您要指向的 Python 版本，请在 Python 脚本的最上面一行使用此路径。并使用

```
#!/opt/local/bin/python 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:38:02.170

/usr/bin/ 中有两个（或更多）二进制 python 解释器。您运行的每个 python 可执行脚本（manage.py 等）在开头都指定了类似这样的内容

```
 #!/usr/bin/python2.6 
```

那是系统级解释器。他们将库存储在

```
 /usr/local/lib/pythonXX/site-packages 
```

使用 virtualenv，您可以自由地拥有自己的沙盒 python 环境。每个环境都将具有类似 Unix 的目录结构，包括

```
 $PATH_TO_ENV/lib/site-packages #library home
    $PATH_TO_ENV/bin               #binaries home 
```

当您激活 virtualenv，然后运行任何 python 脚本时，它将使用 $PATH_TO_ENV/bin 中的 python 可执行文件。`$PATH_TO_ENV/lib/site-packages` 如果您可以随时删除`$PATH_TO_ENV`并且不用担心系统级别的任何垃圾，则所有库都已设置。

要设置 virtualenvs，我使用的是这样的：

```
 sudo easy_install pip;
  sudo pip install virtualenv;
  sudo pip install virtualenvwrapper;

  echo "export WORKON_HOME=~/Envs" >> ~/.bashrc;
  echo "source /usr/local/bin/virtualenvwrapper.sh" >> ~/.bashrc;
  . ~/.bashrc;
  mkdir -p $WORKON_HOME; 
```

使用 pip 时，您可以明确指定版本号 ex。

```
 pip install django-debug-toolbar>=0.9.4,<1.0 
```

如果您在 virtualenv 包中，并且它的所有依赖项都将安装在

```
 $PATH_TO_ENV/lib/site-packages 
```

# facebook - Facebook FQL 查询结果与发送到 API 的 Rest Query 结果不同

> ID：15940509
> 
> 赞同：0
> 
> 时间：2013-04-11T03:57:04.777
> 
> 标签：facebook, rest, facebook-graph-api, facebook-fql

我正在使用这个 FQL 查询来返回公司的不同分支机构：

> 选择名称，location.street，location.city，location.state，fan_count，talking_about_count，are_here_count 从页面 WHERE CONTAINS("Hilton") AND strpos(name, "Hilton") = 0 AND location.street > 0 AND location.city > 0 AND location.state > 0

当我在 Graph API Explorer 页面上提交查询时，我得到了返回的公司列表。
[https://developers.facebook.com/tools/explorer?fql=SELECT%20name%2C%20location.street%2C%20location.city%2C%20location.state%2C%20fan_count%2C%20talking_about_count%2C%20were_here_count% 20FROM%20page%20WHERE%20CONTAINS(%22Hilton%22)%20AND%20strpos(name%2C%20%22Hilton%22)%20%3D%200%20AND%20location.street%20%3E%200%20AND%20location .city%20%3E%200%20AND%20location.state%20%3E%200%20](https://developers.facebook.com/tools/explorer?fql=SELECT%20name%2C%20location.street%2C%20location.city%2C%20location.state%2C%20fan_count%2C%20talking_about_count%2C%20were_here_count%20FROM%20page%20WHERE%20CONTAINS(%22Hilton%22)%20AND%20strpos(name%2C%20%22Hilton%22)%20%3D%200%20AND%20location.street%20%3E%200%20AND%20location.city%20%3E%200%20AND%20location.state%20%3E%200%20)

我需要将这些结果导入到 excel 中，因此我还使用 VBA 将 Rest Query 发送到 Facebook API ( [http://graph.facebook.com/fql?q=](http://graph.facebook.com/fql?q=) )。

我在这两种情况下都使用相同的查询，但问题是从 excel 发送的 Rest Query 的结果通常缺少一些在实际 Facebook 页面的结果中列出的分支。有谁知道为什么两个结果之间存在细微差别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:21:24.567

您是否还通过 VBA 的查询传递了 access_token？

当您使用 Graph API Explorer 时，您将作为用户进行身份验证。某些具有国家和/或年龄限制的页面不会显示给未登录 Facebook 并通过页面限制的任何人。

如果这是一次性交易，您可以将访问令牌从 Graph API 资源管理器复制并粘贴到您的 VBA 应用程序中以获取相同的数据。否则，您将需要找到一种方法来验证您的用户。

# unit-testing - 在Matlab中将结构对象转换为二进制？

> ID：15940512
> 
> 赞同：1
> 
> 时间：2013-04-11T03:57:16.777
> 
> 标签：unit-testing, matlab

我需要获取结构的二进制表示以进行测试。结构对象可以如下所示

```
a = 

    const: 1
    terms: {[1x1 struct]  [1x1 struct]} 
```

我需要这样的东西

```
assert(struct2bin64(a)=='3g439acahplrhph24')) 
```

我需要在哪里获得二进制或等效表示，例如 uint64 进行测试。

**如何将结构对象转换为可以轻松与断言进行比较的东西？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:30:31.040

转换器的`struct2bin`问题在于无法唯一回答将其转换为什么的问题。例如，您在那里的那个`'const'`字段包含一个值为 的双精度数字`1`。该双精度已消耗 64 位，因此`uint64`不足以包含该结构。

所以，我认为你的意思是 base-64 表示。在这种情况下，您会遇到类似的问题；字符串有多长？尽管您可以将结构序列化为 base-64 并将*strcmp*与预先生成的 base64 字符串进行比较，但是按照以下内容会有什么问题

```
assert(isequal(a, struct(...
    'const', 5,...
    'terms', {{struct('const', 6), struct('const' ,2.2)}}))...
); 
```

例如，明确地重新创建您想要的确切结构的匿名副本？

如果您*坚持*以复杂的方式进行操作，则可以[在文件交换中使用此提交](http://www.mathworks.com/matlabcentral/fileexchange/12907-xmliotools/content/base64encode.m)，它允许您将字符串转换为 base64。然后使用我自己的一个提交[toString](http://www.mathworks.com/matlabcentral/fileexchange/38566-string-representations-for-most-data-types)，它将任何内容转换为字符串，包括结构。有了这些，你可以做到

```
assert(strcmp(base64encode(toString(a)), 'your_pre-generated_base64_string')) 
```

但说真的，你到底为什么要这么做？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T04:41:54.907

您可以将结构保存到文件中 - 这是 Matlab 向您展示（压缩）二进制表示的方式。如果您已经在内存中加载了“参考文件”，则可以保存该文件，将其读取为二进制文件并进行比较。

```
referenceStruct = struct( 'field1', val1, 'field2', etc);
save('ref.mat', 'referenceStruct');
fid = fopen('ref.mat', 'rb');
refBinary = fread(fid, inf, 'uint8');
fclose(fid); 
```

现在您将二进制值转换为可以适合 ASCII 的值，例如使用[这些例程](http://www.mathworks.com/matlabcentral/fileexchange/4341-encode-decode-ascii-binary)。

但我必须同意罗迪的观点——为什么要这么麻烦？这太可怕了。您可以创建参考结构，使用 进行测试`isequal`，然后完成。当然，我们甚至没有谈论比较`double`类型是否相等的危险......这是另一个时间和另一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T13:40:28.160

R2013a 中包含在 MATLAB 中的[单元测试框架包含递归比较结构数组的能力。](http://www.mathworks.com/help/matlab/matlab-unit-test-framework.html)这个解决方案比使用 isequal 严格得多，因为 isequal 忽略了稀疏性和类（int8 结构与双精度结构）之类的东西。例如，以下比较通过：

```
assert(isequal(struct('const', 5), struct('const', int8(5)))); 
```

但是，它在单元测试框架中失败了：

```
>> testCase = matlab.unittest.TestCase.forInteractiveUse;
>> testCase.verifyEqual(struct('const', 5), struct('const', int8(5)))
Interactive verification failed.

---------------------
Framework Diagnostic:
---------------------
verifyEqual failed.
--> NumericComparator failed.
    Path to failure: <Value>.const
    --> Classes do not match.

    Actual Class:
        double
    Expected Class:
        int8

Actual struct:
        const: 5
Expected struct:
        const: 5
>> 
```

有了这种额外的严格性，我认为不需要将结构转换为二进制，在这种情况下，您将失去任何进行有意义诊断的机会。

# php - 表格信息未发布

> ID：15940520
> 
> 赞同：0
> 
> 时间：2013-04-11T03:58:18.257
> 
> 标签：php, mysql, forms

我想知道是否可以让某人查看我的陈述，看看我可能在哪里搞砸了。我已经通过回显它测试了正在发布的信息，并且一切似乎都在正确地进行，但我无法让它物理地创建适当的记录。我也没有收到任何错误，它会像表单发布的那样返回到标题位置。

```
//First we make sure there are enough licenses left to add the user
$limit = "select * from organization_seats WHERE orgid=$orgid";
$orglimit = mysql_query($limit);
$licenses = $orglimit['limit'];

$count = "select count(*) from organization_users WHERE organizationid=$orgid";

if ((!$licenses < $count)) {

     echo 'You have reached the number of maximum licenses for your Organization.';

 } else {

//If we have licenses left, proceed to add new user
//Populate the user table
$sql = "insert into user (firstname, lastname, title, address1, address2, country, city, state, zip, phone, mobile, birthday, username, email, password) values ('$fname','$lname','$title','$address1','$address2','$country', '$city', '$state', '$zip', '$phone', '$mobile', '$bday', '$username', '$email', '$password')";

$exec = mysql_query($sql);

//Add the user to the organization
$userid = mysql_insert_id(); //call the last ID entered into the user table first

$sql2 = "insert into organization_users(organizationid, userid, active) values ('$orgid', '$userid', $)";
$exec = mysql_query($sql2); 

//recall the userid
$sql3 = "select * from user where username = $username";
$exec = mysql_query($sql3);
$newuserid = $newuserselect['id'];  

 //Add the user to the department
$sql4 = "insert into organization_dep_users(orgid, depid, userid) values ('$orgid', '$department', '$newuserid')";
$exec = mysql_query($sql4);

if ($exec === TRUE) {

    header( 'Location: index.php' ) ;

} else {
    echo mysql_error();
 }
} 
```

顺便说一句，我的所有变量都附加了 mysql_real_escape_string。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:12:38.977

1)`$sql2`有一个错误 - 您正在传递`$`而不是实际变量。

2)从不存在的资源`$sql3`分配之后。`$newuserid`我假设你`$newuserselect = mysql_fetch_assoc($exec);`在它之前失踪了。

3）您确实需要对查询添加错误检查。如果第一个查询失败，则第二个查询将以错误的 id 运行`$userid`，或者`FALSE`如果先前的查询没有创建 id。其他问题也可能在您的代码中出现，而无需进行错误检查。

4) 如上所述，建议过渡到 pdo 或 mysqli。

5）刚刚注意到-您的第一个选择查询也试图滥用资源-您应该这样做

```
$orglimit = mysql_query($limit);
$orgrow = mysql_fetch_assoc($orglimit);
$licenses = $orgrow['limit']; 
```

6）并且....您`$count`将无法正常工作，您将查询字符串分配给`$count`但从未实际执行查询以获取号码。所以当你这样做时，`if ((!$licenses < $count))`你实际上是在比较一个数字和一个字符串，而不是一个数字和一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:14:00.590

不确定您到底面临什么问题..但是如果您正确复制了代码，那么我发现了一个错误的陈述

```
insert into organization_users(organizationid, userid, active) values ('$orgid', '$userid', $) 
```

什么是`$`……？

**第二..**

```
 $limit = "select * from organization_seats WHERE orgid=$orgid";
 $orglimit = mysql_query($limit);
 $licenses = $orglimit['limit']; 
```

应该

```
$limit = "select * from organization_seats WHERE orgid=$orgid";
$resource = mysql_query($limit);
$orglimit  = mysql_fetch_assoc($resource);
$licenses = $orglimit['limit']; 
```

mysql_query 总是返回一个资源而不是数组..

与 $sql3 相同

尝试改变这些，你应该没问题

建议：请开始使用 mysqli_* 或 PDO

# php - 尝试在 SQL Server 2008 R2 中写入数据库时 遇到此问题

> ID：15940521
> 
> 赞同：0
> 
> 时间：2013-04-11T03:58:25.190
> 
> 标签：php

这是以下代码。我正在尝试使用该网站创建一个工具，以便我可以将项目输入 SQL 数据库，而不是使用 GMTool 进行游戏，这是一个单独的工具。我可以手动输入信息，它可以 100% 工作。但是，当我尝试使用以下代码时，它说它是成功的，但是数据库中没有发布任何信息。有什么想法吗？

```
<?php
require_once('config.php');
require_once('config/auth.php');
?>
<?php include("head.php"); ?>
<?php include("menu.php"); ?>
<?php if($logeado == 1){?>
<td id="column2">

<div id="title"><h2>Give Item</h2></div><div id="address">HOME > Account and Item</div>

<div id="content">
<hr>
Note - The world is 0 for ZeNFinix<br>

<form method="POST" action="#">
<input Value="World" id="world" name="world" vaulue="">
<input Value="Account" id="account" name="account" vaulue="">
<input Value="Item Number" id="index" name="index" vaulue="">
<input Value="Item Count" id="number" name="number" vaulue="">
<input type="Submit" Value="Continue" OnClick="if (! confirm('Are you sure you want to continue?')) return false;">
<input type="hidden" name="action" value="submitted">
</form>
<br><br>
<?php
if ($_POST['action'] == 'submitted')
{
global $link;
mssql_select_db("UserLogin",$link);

$acct = $_POST['acct'];

$world = $_POST['world'];
$userid = $_POST['account'];
$item = $_POST['index'];
$itemno = $_POST['number'];
$DateTime = 'GETDATE()';
$querys = mssql_query("SELECT * FROM dbo.Account WHERE userId = '$userid' ");
$QRow = mssql_fetch_array($querys);

if($QRow[0] == ''){
echo "Account does NOT Exist!";
}
else
{

{

}

global $link;
mssql_select_db("Tantra",$link);
mssql_query ("INSERT INTO dbo.TantraItem(World, Account, ItemIndex, ItemCount, DateTime) VALUES ('$world', '$userid', '$item', '$itemno', '$DateTime'");
echo "Successfully Added Item(s)!";
}

}
?>
</div>
</div>
</td>
</tr>
</table>
<?php } ?>
<?php include("footer.php"); ?> 
```

“这是 SQL 数据库。dbo.TantraItem。” 设计如下： ID int 不允许空值 World int 不允许空值 Account varchar(50) 不允许空值 ItemIndex int 不允许空值 ItemCount smallint 不允许空值 DateTime datetime 确实允许空值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:08:27.447

更改 Mssql 查询从

```
mssql_query ("INSERT INTO dbo.TantraItem(World, Account, ItemIndex, ItemCount, DateTime) VALUES ('$world', '$userid', '$item', '$itemno', '$DateTime'"); 
```

至

```
mssql_query ("INSERT INTO dbo.TantraItem(World, Account, ItemIndex, ItemCount, DateTime) VALUES ('$world', '$userid', '$item', '$itemno', '$DateTime')"); 
```

# android - Sencha Touch 包构建返回“必须从包文件夹运行”

> ID：15940530
> 
> 赞同：1
> 
> 时间：2013-04-11T03:59:49.883
> 
> 标签：android, sencha-touch

我对 Sencha 和整个应用程序开发都很陌生。我已按照此处的说明进行操作： http://docs.sencha.com/touch/2-1/#!/guide/ [getting_started](http://docs.sencha.com/touch/2-1/#!/guide/getting_started) 和此处： [http ://docs.sencha.com/touch/2-1/# !/guide/native_packaging-section-7](http://docs.sencha.com/touch/2-1/#!/guide/native_packaging-section-7) 我正在尝试使用此命令将其打包以在我的 android 设备上进行测试：

```
sencha package build packager.json 
```

我得到这个结果：

```
[ERR] Command must be run from a package folder 
```

尽管 Sencha 文档中某些地方的说明非常错误，但我确信我做的一切都是正确的。我尝试从哪里运行这个命令似乎并不重要，它不起作用。我正在从应用程序目录运行它。

我在某个地方错过了一步吗？这个命令将运行的神秘包文件夹在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-01T22:12:24.650

我开始使用 Sencha，我遇到了同样的问题。正确的命令是：

```
sencha app package build packager.json 
```

（注意**app**关键字缺失）

希望能帮助到你！

# php - Drupal 页面“评论设置”和页面上的评论未出现

> ID：15940531
> 
> 赞同：-1
> 
> 时间：2013-04-11T04:00:01.727
> 
> 标签：php, drupal

我一直在玩评论，制作自定义评论部分并编辑模块。我还在“评论”表中添加了新的数据库列，因此我可以为不同类型的页面提供不同的评论集。一路走来，我想我把那里的模块搞砸了。现在，当我转到任何页面或文章并进行编辑时，我没有可以启用评论的“评论设置”部分。同样，评论不再出现在任何页面上。

可能发生了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:03:47.213

要配置特定内容类型的评论设置：

1.  导航到内容类型管理页面（管理 > 结构 > 内容类型或[http://example.com/admin/structure/types](http://example.com/admin/structure/types)）。

2.  找到您要启用的内容类型，然后单击“编辑”链接。

3.  向下滚动并单击“评论设置”选项卡。

4.  您可以在此处指定几个不同的设置（某些选项在您选择某个设置之前不会出现）。

* * *

新内容的默认评论设置

这种类型的未来内容的评论设置将默认为：

```
Hidden: No comments are allowed, and past comments are hidden.
Closed: No comments are allowed, but any past comments remain visible.
Open: Any future content of this type is open to new comments. 
```

注意：此设置是默认设置，不会追溯该类型的现有内容。穿线

启用此选项后，评论将显示在线程列表中（回复缩进以使讨论更容易理解）。每页评论数

指定一页上显示的最大评论数（如果超出此限制，将添加其他页面）。允许评论标题

启用此选项后，用户可以为其评论填写标题（标题是可选的）。在与评论相同的页面上显示回复表单

启用此选项后，回复表单将显示在与评论相同的页面上。（如果未选择此项，单击“回复”将带您进入一个新页面，您可以在其中填写回复表。）预览评论

您可以指定预览是“必需”（始终在保存评论之前显示）、“禁用”（从不显示）或“可选”（用户可以选择显示预览）。

注意：请务必在配置设置后单击“保存内容类型”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:36:38.067

在这里，我假设您在评论表中有数据，并且您不想丢失数据。在执行以下步骤之前，只需备份您的数据库，以便如果出现任何问题，您可以进行备份。并将评论表作为单独的备份，没有问题的列。

```
Step1: Go to module and disable comment module.
Step2: Now uninstall comment module which is in uninstall tab. Now go to db and confirm comment table is deleted. If it is not delete, drop table manually.
Step3: Delete comment folder from core module's folder. 
Step4: Copy fresh comment folder. 
Step5: Now go to module page and enable comment module.
Step6: To debug just create any page and add comment and then verify.
Step7: If it is working, Then drop comment table and restore if from table backup.
Step8: Repeat step6 and verify. 
```

**注意：不建议在生产环境中使用。如果它是产品，请尝试获得一些专家帮助。**

**注意2：我在drupal 7.20中试过这个**

# pdf - 使用 p:media 的谷歌浏览器 pdf 查看器

> ID：15940535
> 
> 赞同：0
> 
> 时间：2013-04-11T04:00:30.590
> 
> 标签：pdf, primefaces

我有这个代码片段：

```
<p:media value="#{testController.simplePDF()}" player="pdf" width="300px" height="300px">  
    No PDF file uploaded.
</p:media> 
```

simplePDF 方法返回`simplePDF = new DefaultStreamedContent(is, "application/pdf");`

如果在数据库中没有找到 pdf，则该方法有时会返回 null。但是当它返回 null 时，它应该显示“没有上传 PDF 文件”。

这在 Firefox 中有效，问题出在 chrome 中。它在 chrome url 下方显示一条消息，显示“无法加载 PDF 查看器”，并向我显示“无法加载插件”和损坏的插件图像。我需要将其显示为“未上传 PDF 文件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T20:37:06.987

一个可能的解决方案：

*   转到 Chrome 的导航栏并进入： chrome://plugins/
*   停用 PDF 查看器
*   再次运行您的应用程序，您应该会看到 PDF

# python - OS X 10.8 上的 LightBlue：方法签名不匹配

> ID：15940541
> 
> 赞同：2
> 
> 时间：2013-04-11T04:01:06.327
> 
> 标签：python, macos, bluetooth, iobluetooth, lightblue

我正在[为 OS X 10.8 使用 Nickolay Yegorov 的 LightBlue 端口](https://github.com/postskolkovo/lightblue-0.4)。导入`lightblue`模块后，我立即收到以下错误：

```
Traceback (most recent call last):
  File "commander.py", line 3, in <module>
    import lightblue
  File "/usr/local/lib/python2.7/site-packages/lightblue/__init__.py", line 160, in <module>
    from _lightblue import *
  File "/usr/local/lib/python2.7/site-packages/lightblue/_lightblue.py", line 397, in <module>
    class _AsyncDeviceInquiry(Foundation.NSObject):
TypeError: Error when calling the metaclass bases
    class _AsyncDeviceInquiry does not correctly implement protocol IOBluetoothDeviceInquiryDelegate: the signature for method deviceInquiryComplete:error:aborted: is v@:@iB instead of v@:@iZ 
```

似乎可能存在版本不匹配。是否有解决此问题的已知方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T04:01:06.327

`src/mac/_lightblue.py`从[Yegorov 的 repo](https://github.com/postskolkovo/lightblue-0.4)中打开源文件。查找第 467 行（如下所示）：

```
deviceInquiryComplete_error_aborted_ = objc.selector(
    deviceInquiryComplete_error_aborted_, signature="v@:@iB") 
```

将字符串更改`v@:@iB`为`v@:@iZ`. 从此来源重新安装 LightBlue：

```
cd <lightblue_root> && sudo python setup.py install 
```

这应该可以解决签名错误。

## 二进制

[dlamblin](https://stackoverflow.com/users/459/dlamblin)请求了具有此修复程序的二进制文件。这是[我的`LightAquaBlue.framework`](https://dl.dropboxusercontent.com/u/7338/LightAquaBlue.framework.zip)，为 OS X 10.8.2 和 Python 2.7.4（放入`/Library/Frameworks`）构建的。

# php - 从 iOS 上传到 PHP 后端时的 UPLOAD_ERR_PARTIAL

> ID：15940549
> 
> 赞同：1
> 
> 时间：2013-04-11T04:01:24.157
> 
> 标签：php, ios

我有一个 iOS 应用程序，它通常使用 NSURLConnection 和 NSMutableURLRequests 将图像上传到 PHP 后端。

每隔一段时间，当图像从设备上传到服务器时，我们会遇到 UPLOAD_ERR_PARTIAL PHP 上传错误，但似乎很规律。现在我想有时可能是由于人们手机上的信号丢失/降级等。但我做了一些研究，似乎这些错误可能是由标头问题引起的，例如 Keep-Alive（请参阅[http://www.bizzeh.com/739/php-problem-with-upload_err_partial-file-upload-error-代码 3](http://www.bizzeh.com/739/php-problem-with-upload_err_partial-file-upload-error-code-3)）。建议设置`header("Connection: close");`可以解决问题。

我不清楚的是在哪里设置连接关闭？那是应该与应用程序的 POST 请求一起发送的标头吗？或者每次图像上传完成时我们应该在后端设置什么？

另外，如果您认为这可以通过上述以外的方式解决，请告诉我。

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T09:32:44.330

经过一些在线研究，它可能通过插入一小段代码来解决，如下所述：

“这是一个旧帖子，但是我遇到了一个UPLOAD_ERR_PARTIAL的随机问题，并发布了我的解决方案。问题是2/3上传后我得到了UPLOAD_ERR_PARTIAL的错误，没有被客户端中断。我的问题与Keep-Alive 服务器。我通过在 PHP 脚本末尾插入用于上传标头（“连接：关闭”）来解决它；”

# c# - 用 C# 读写到记事本时文件不可见

> ID：15940555
> 
> 赞同：0
> 
> 时间：2013-04-11T04:01:56.880
> 
> 标签：c#

我正在将示例文本写入记事本并在 C# 中读取相同的文本

```
 try{
                StreamWriter sw = new StreamWriter(path);
                DateTime d = new DateTime();
                sw.WriteLine("The time is " + d);
                sw.Close();
                Console.WriteLine("Reading file contents...");
                StreamReader sr = new StreamReader(path);
                string line;
                line = sr.ReadLine();
                while (line != null)
                {
                    Console.WriteLine(line);
                    line = sr.ReadLine();
                }
                sr.Close();
               }
             catch(Exception e)
             {
               Console.WriteLine(e.Message);
             } 
```

代码执行良好，我可以在屏幕上看到输出。

但是，该文件在路径位置中不可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:05:51.990

这是一个猜测，但我敢打赌，您有一个相对路径，并且该程序不在您认为的位置，因此您在错误的位置查找文件。如果这是在 Visual Studio 下，请确保在项目的调试文件夹中查找该文件。

# shell - 如何在 for 循环中使用 expr？

> ID：15940559
> 
> 赞同：1
> 
> 时间：2013-04-11T04:02:37.647
> 
> 标签：shell, for-loop

我是脚本新手，我需要使用 for 循环为我的班级编写脚本。该脚本应该允许您在命令行提示符下键入数字，然后将它们相加并给您答案。我不断收到 expr: 语法错误，而且我还认为我的 for 循环的 in 部分有问题。

```
echo 'Please enter some numbers:'
read ;
for i in echo $read ;
do expr + 
done 
```

我知道有很多错误，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:21:10.780

```
#!/bin/sh
if [ "$#" -lt 2 ]
then
  echo 'sum.sh [numbers]'
  exit
fi

for number
do
  let total+=number
done
echo $total 
```

例子：

```
$ sum.sh
sum.sh [numbers]

$ sum.sh 2
2

$ sum.sh 2 2 3
7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:31:53.633

`expr`需要它们之间带有空格分隔的加号的数字才能执行任何操作。

```
read one another
expr "$one" + "$another" 
```

在这一点上，我希望您的教授希望您发现如何一次循环一个输入，并运行`expr`以添加您在之前的循环迭代中累积的总和。

对于现实世界的任何事物，您最好使用`dc`or `bc`，或者，哎呀，Awk 或适当的脚本语言。

# c# - 在 Visual Studio 2012 中创建的 .exe 在另一台计算机上不执行任何操作

> ID：15940560
> 
> 赞同：0
> 
> 时间：2013-04-11T04:02:49.430
> 
> 标签：c#, visual-studio-2012

我在 Visual Studio 2012 中创建了一个播放媒体的简单应用程序，现在正尝试在另一台计算机上运行该应用程序（作为旁注，我在此应用程序中使用 WMPLIB 和 Krypton Toolkit）。当我从 Visual Studio 或 /Debug 文件夹中的 .exe 文件运行它时，它运行良好，但是当我尝试在另一台计算机上运行它时，它完全没有任何作用。我尝试创建一个发布版本（它没有在 /Release 文件夹中创建 .exe），还尝试使用 Dependency Walker 检查所需的 DLL（我无法理解的内容太多），但似乎没有任何效果。知道是什么阻止了应用程序运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T04:51:14.187

请务必将 Krypton.toolkit.dll 与 exe 文件一起交付，或者使用 ilmerge 将其添加到 exe 中。

# ios - 构建由其他 UIView 组成的 UIButton 的正确方法是什么？

> ID：15940564
> 
> 赞同：0
> 
> 时间：2013-04-11T04:03:47.290
> 
> 标签：ios, uiview, uibutton

我正在尝试创建一个自定义的 UIButton。它有一个（变化的）图像、一些信息文本，当然还有更标准的东西，比如标题等。我正在使用界面构建器和故事板来完成我的应用程序中的大部分设计工作。

**像这样构建自定义 UIButton 的最佳实践是什么？**

我决定不进行子类化，然后只接管绘图，因为按钮可以由更多标准元素构建。

相反，我尝试继承 UIButton 并构建和添加子视图，如 UIImageView、UILabel 等。这似乎很好用，但有一个例外，我不确定何时定位所有内容，因为边界未在 awakeFromNib 中设置，并且从未调用 initWithFrame。最后，我添加了我的 UIViewController 在 vi​​ewDidAppear 中调用的另一个方法。

然后我意识到，也许我可以在 UIViewController 中的 viewDidLoad 或 viewDidAppear 中构造按钮而无需子类化，但我再次注意到按钮上的边界尚不可用。

**那么哪个是最好的：**

1.  子类化和绘制一切
2.  通过组合其他 UIView 进行子类化和构建
3.  在外部视图中构建按钮
4.  还有什么方法……？

此外，当父母使用自动布局时，似乎框架中的所有内容都反对手动布局子视图，所以我认为必须有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:32:58.633

创建一个单独的 UIView 类并将所有按钮放入其中。
然后将该视图子类化到您的视图控制器。

喜欢：

1）使用您的按钮创建一个视图，并将该视图作为类名提供给您的自定义 .xib 和视图。

即，我正在使用名为“MultipleChoiceLayout”的按钮创建一个自定义视图
- MultipleChoiceLayout.h
- MultipleChoiceLayout.m
- MultipleChoiceLayout.xib

我将 MultipleChoiceLayout 定义为 File 的所有者以及自定义视图。
![在此处输入图像描述](https://i.stack.imgur.com/4rQin.png)

2）将此自定义视图添加到您的父视图

```
 NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"MultiChoiceLayout" owner:self options:nil];

    MultiChoiceLayout *multipleChoiceLayout = [[MultipleChoiceLayout alloc] initWithArray:array];

   [ParentView addSubview:multipleChoiceLayout]; 
```

看看我如何在父视图中初始化自定义视图。

我将数组传递给“MultipleChoiceLayout”类，并在 multichoicelayout 类中定义 self 。

```
-(id)initWithArray:(NSArray*)array
   {
    self = [array objectAtIndex:0];
    if(self) {

     }
    return self;
} 
```

*   现在发生的情况是，您通过从父级传递 self 将自定义视图对象从父级传递到自定义视图（参见上面的代码段）。现在，每当您单击按钮时，它都会自动调用您在自定义视图中定义的方法。你不必维护任何东西

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:20:47.603

有一些常见的做法来构建这样的自定义控件。在您的情况下，子类`UIControl`将为您提供比标准更大的灵活性，`UIView`因此您不必为按钮交互创建自定义手势。根据我的经验，子类化`UIButton`总是让人头疼。

正如另一个答案所示，在单独的 xib 中创建控件对于可重用性也是一个好主意。通常，让您的 UIControl 子类设置它的组件（UIImageView 等）比让视图控制器处理它通常更可取。在这种情况下，控件将收到类似`initWithCoder:`从 xib 加载的消息，以便您可以正确设置子视图。

至于使用自动布局，如果应用程序的其余部分使用它，您的自定义控件也应该使用它。永远不要混合自动布局和手动设置帧，事情会坏掉！

希望这能回答你的一些问题。

# sql-server-2008 - 库存余额库存显示

> ID：15940565
> 
> 赞同：0
> 
> 时间：2013-04-11T04:03:48.793
> 
> 标签：sql-server-2008, tsql, inventory

我遇到了一个小问题，我必须通过查询显示库存中的物品显示。我正在从 4 个表中检索数据，并希望显示类似于下面的输出。表结构和示例值已在**SQL fiddle**中给出。这是**[表结构和值的 SQL Fiddle。](http://sqlfiddle.com/#!3/f977e/1/0)**

我想要的输出是这样的。

```
Date                    ItemName        Rate     InQty  OutQty  Balance ItemUnit
2013-01-04 00:00:00.000 Sand            0.000    10    5        5       NONE
2013-01-04 00:00:00.000 Backhoe Loader  650.000  20    2        18      Hr
2013-01-04 00:00:00.000 Tractor Troley  150.000  10    0        10      Hr

2013-02-04 00:00:00.000 Sand            0.000    0     5        0       NONE
2013-02-04 00:00:00.000 Backhoe Loader  650.000  5     2        21      Hr
2013-02-04 00:00:00.000 Tractor Troley  150.000  10    30       -10     Hr
.
.
. 
```

我花了一个多月的时间来做这件事。任何机构都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:16:03.843

也许是这样的：~~[http ://sqlfiddle.com/#!3/f977e/50](http://sqlfiddle.com/#!3/f977e/50)~~

从日期中删除，`MIN()`因为它限制了数据。添加`dateadd-datediff`以确保删除日期的所有时间。如您所见，我评论了该`where`条款。但是你当然可以再次添加它。

希望这可以帮助。

**编辑 ：**

加总。

[http://sqlfiddle.com/#!3/f977e/75](http://sqlfiddle.com/#!3/f977e/75)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:21:59.393

~~试试这个`Query`：~~

 ~~```
SELECT 
DISTINCT
CONVERT(DATETIME,CONVERT(DATE,I.[Date]),101) AS [Date],
I.Nameofitem AS ItemName,
I.Rate AS RATE,
I.Qty AS InQty,
ISNULL(O.Qty,0) AS OutQty,
ISNULL(I.Qty,0)-ISNULL(O.Qty,0) AS Balance,
O.unit AS ItemUnit
FROM Outwards_Master O
RIGHT JOIN Inwards_Master I ON O.Nameofitem=I.Nameofitem
                                AND CONVERT(DATE,O.[Date])=CONVERT(DATE,I.[Date]) 
```~~ 

**[SQL小提琴](http://sqlfiddle.com/#!3/f977e/7)**

~~**注意：**由于数据延迟，这不会产生确切的**输出。**~~

**编辑：**

**假设（我认为你的*结构*中有）**

1\. **Inward Master**和**Outward Master**中的所有**日期**都**相同**，**反之亦然**，**日期**是**********`PRIMARY KEY`**********

 ******2.每个项目都有每个**日期**的**进出****数量栏**

 **有了上面的假设，这里是`SQL Query`

1.TEMP**表**

```
SELECT 
DENSE_RANK() over(order by I.Date) AS [RANK],
ROW_NUMBER()over(partition by I.Date order by I.Date) AS [VersionId],
I.Date,
I.Nameofitem,
I.Rate,
ISNULL(I.Qty,0) AS INQTY,
ISNULL(O.Qty,0) AS OUTQTY,
I.unit
INTO #TEMP1
FROM 
#Inwards_Master I
INNER JOIN #Outwards_Master O ON CONVERT(DATE,O.[Date])=CONVERT(DATE,I.[Date])
            AND I.Nameofitem=O.Nameofitem

SELECT * FROM #TEMP1 ORDER BY Date,Nameofitem 
```

2.余额：

```
;WITH x AS
(
    SELECT 
        [Rank],
        [VersionId],
        Nameofitem,
        [Date],
        INQTY,
        OUTQTY,
        bal=(INQTY-OUTQTY)
    FROM #temp1
    WHERE [Rank] = 1
    UNION ALL
    SELECT 
        y.[Rank],
        y.[VersionId],
        y.Nameofitem,
        y.[Date],
        y.INQTY,
        y.OUTQTY,
        x.bal+(y.INQTY-y.OUTQTY)
    FROM x INNER JOIN #temp1 AS y
    ON y.[Rank] = x.[Rank] + 1
    AND y.VersionId=x.VersionId
    and y.Nameofitem=x.Nameofitem
)
SELECT 
    [Date],
    Nameofitem,
    INQTY,
    OUTQTY,
    Balance = bal
FROM x
ORDER BY Date,Nameofitem
OPTION (MAXRECURSION 10000); 
```

**[这是要验证的 SQL Fiddle](http://sqlfiddle.com/#!3/88bb1/1)**********

# html - 将图标添加到 Bootstrap 下拉菜单

> ID：15940566
> 
> 赞同：38
> 
> 时间：2013-04-11T04:03:49.387
> 
> 标签：html, css, twitter-bootstrap, drop-down-menu, icons

我想使用如下代码向 Bootstrap 下拉列表中的链接添加一些图标：

```
<ul>
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Some Dropdown<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><i class="icon-arrow-up"></i><a href="#">Up</a></li>
            <li><i class="icon-arrow-down"></i><a href="#">Down</a></li>
            <li><i class="icon-arrow-left"></i><a href="#">Left</a></li>
            <li><i class="icon-arrow-right"></i><a href="#">Right</a></li>
        </ul>
    </li>
</ul> 
```

但是，图标不合适：

![下拉问题](https://i.stack.imgur.com/watnK.png)

我尝试在[这个答案](https://stackoverflow.com/questions/11694866/twitter-bootstrap-icons-in-button-dropdown/11695326?noredirect=1#comment22712019_11695326)中使用解决方案，但它似乎不起作用。有人可以提供解决方案并解释它为什么/如何工作吗？

[演示](http://jsfiddle.net/ywkLt/)

谢谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-11T04:17:52.323

将图标放在锚标签内：

```
<ul>
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Some Dropdown<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="#"><i class="icon-arrow-up"></i> Up</a></li>
            <li><a href="#"><i class="icon-arrow-down"></i> Down</a></li>
            <li><a href="#"><i class="icon-arrow-left"></i> Left</a></li>
            <li><a href="#"><i class="icon-arrow-right"></i> Right</a></li>
        </ul>
    </li>
</ul>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
<link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet"/>
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-11T04:08:46.523

习惯**定位**

**定义你** `.dropdown-menu li` `position relative` **和**我定义`position absolute`

像这样

```
.dropdown-menu a {
    white-space:normal;
}
.dropdown-menu > li{position:relative;}

.dropdown-menu > li > i{position:absolute;left:0;top:3px;} 
```

**[现场演示](http://jsfiddle.net/ywkLt/2/)**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-28T12:55:28.250

将图标放在 Bootstrap v3 的锚标签内（带有来自[http://www.FontAwesome.com](http://www.FontAwesome.com)的图标）：

```
 <ul class="nav navbar-nav">
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">A Dropdown <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#"><i class="fa fa-arrow-up"></i> Up</a></li>
                    <li><a href="#"><i class="fa fa-arrow-down"></i> Down</a></li>
                    <li><a href="#"><i class="fa fa-arrow-left"></i> Left</a></li>
                    <li><a href="#"><i class="fa fa-arrow-right"></i> Right</a></li>
                </ul>
            </li>
        </ul> 
```

示例：http: [//jsfiddle.net/9ce3P/](http://jsfiddle.net/9ce3P/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-19T11:06:10.710

```
<ul class="dropdown-menu" role="menu">
    <li role="presentation">
        <a role="menuitem" tabindex="-1" href="javascript:void(0)">
            <span class="pull-right">Edit</span>
            <span class="glyphicon glyphicon-edit pull-left"></span>
            <span class="clearfix"></span>
        </a>
    </li>
    <li role="presentation">
        <a role="menuitem" tabindex="-1" href="javascript:void(0)">
            <span class="pull-right">Delete</span>
            <span class="glyphicon glyphicon-remove pull-left"></span>
            <span class="clearfix"></span>
        </a>
    </li>
</ul> 
```

# node.js - 为什么我不能在 nodejs 一个模块中创建一个闭包

> ID：15940568
> 
> 赞同：0
> 
> 时间：2013-04-11T04:03:59.760
> 
> 标签：node.js, module, requirejs

我正在尝试制作以下 nodejs 模块：

```
exports.method = function () {      
  var init = true;

  return function (args) {
     console.dir(args);
  };
}; 
```

但是当我调用此方法时，我没有收到控制台消息：

```
require('./module.js').method({test: 1}); 
```

它返回一个函数而不是调用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T04:09:04.503

您需要执行外部函数，否则您只需将其分配给`exports.method`.

换句话说：

```
exports.method = function () {      
  var init = true;

  return function (args) {
     console.dir(args);
  };
}(); 
```

注意尾随`()`

# android - 如何在对话框片段内部类中调用适配器

> ID：15940572
> 
> 赞同：2
> 
> 时间：2013-04-11T04:04:34.763
> 
> 标签：android, android-asynctask, android-fragments, android-dialogfragment

我有一个`DialogFragment`在第一次启动应用程序时打开的。用户选择一个值，然后将其存储为首选项，然后`listview`根据所选值填充数据。

问题是我的自定义`DialogFragment`是一个内部类，在我的 MainActivity 中。我似乎无法在**onclick**`listview`中调用我的适配器（它会加载我的数据）。

 **我尝试在内部类中访问我的适配器函数，但收到“静态”引用错误。同时，我尝试将我的适配器函数嵌入到类中，但结果相同：

> 无法对非静态方法进行静态引用

我玩弄了一些技巧，但我知道有一种更好的标准方法可以做到这一点。任何帮助/建议将不胜感激。

我的代码在下面列出。

```
public class MainActivity extends ListActivity {

private Cursor lines;
private MetroSleepDb db;
private ListAdapter adapter;
public static final String PREFS_NAME = "METROSLEEP_PREFS";
public static int PREFS_CITY = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    boolean prefs_isset = settings.contains("DEFAULT_CITY");

    if(prefs_isset) {

        PREFS_CITY = settings.getInt("DEFAULT_CITY", 0);

    } else {

        chooseCityDialog();
        PREFS_CITY = settings.getInt("DEFAULT_CITY", 0);

    }

    Editor editor = settings.edit();
    editor.putInt("DEFAULT_CITY", PREFS_CITY);
    editor.commit();

}

public void setAdapters() {

    Toast.makeText(getApplicationContext(), "Preference set to: "+PREFS_CITY, Toast.LENGTH_LONG).show();

    db = new MetroSleepDb(this);
    lines = db.getLines(); // you would not typically call this on the main thread
    //ListView listView = (ListView) findViewById(R.id.li);
    adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, 
            lines, 
            new String[] {"line_id"}, 
            new int[] {android.R.id.text1}, 0);

    getListView().setAdapter(adapter);
    getListView().setOnItemClickListener(onAnswerClicked);

}

public String getItem(int pos) {

    Cursor c = (Cursor) adapter.getItem(pos);
    String value = c.getString(c.getColumnIndex("line_id"));
    return value;
}

private OnItemClickListener onAnswerClicked = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        String line_value = getItem(position);
        Intent intent = new Intent(MainActivity.this, ChooseStations.class);
        intent.putExtra("line", line_value);
        startActivity(intent);
    }

};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem  item) {
    switch (item.getItemId()) {
    case android.R.id.home:

        NavUtils.navigateUpFromSameTask(this);
        return true;

    case R.id.menu_settings:
        Intent intent = new Intent(this, SettingsActivity.class);
        startActivity(intent);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public void chooseCityDialog() {

    DialogFragment newFragment = new DialogSetup();
    newFragment.setCancelable(false);
    newFragment.setRetainInstance(true);
    newFragment.show(getFragmentManager(), "citypref");

}

public static final class DialogSetup extends DialogFragment {
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(R.string.prompt_choose_city)
               .setCancelable(false) 
               .setInverseBackgroundForced(true)
               .setItems(R.array.Cities, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {

                       PREFS_CITY = which;

               }
        });

        return builder.create();
    }

    @Override
    public void onDismiss(DialogInterface dialog) {
        // Do whatever
    }

}

@Override
protected void onStop(){
   super.onStop();

  SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  //editor.putBoolean("silentMode", mSilentMode);

  settings.getInt("DEFAULT_CITY", PREFS_CITY);
  editor.commit();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:12:52.067

> 我尝试在内部类中访问我的适配器函数，但收到“静态”引用错误。同时，我尝试将我的适配器函数嵌入到类中，但结果相同：

在中，`DialogFragment`您已经有一个对显示`Activity`位置的引用`Dialog`，您可以使用它来访问适配器：

```
public void onClick(DialogInterface dialog, int which) {
      PREFS_CITY = which;
      MainActivity ma = (MainActivity) getActivity();
      // create a getter method in the MainActivity to access the adapter 
      // or whatever else you need
} 
```**

# php - 检查 59 个变量时验证失败，但适用于两个

> ID：15940573
> 
> 赞同：-1
> 
> 时间：2013-04-11T04:04:36.843
> 
> 标签：php, html

您好，我创建了一个包含 59 个文本框和复选框的表单，我想通过表单将这些框传递到 php 页面进行验证，但它失败了，代码如下：

```
if(isset($_POST['REID'], $_POST['REName'],...more variables..

{

   $REID = preg_replace("[^A-Za-z0-9-]", "", $_POST['REID']);
   $REName = preg_replace("[^A-Za-z0-9-]", "", $_POST['REName']); ... more variables..

   if(empty($REID) or empty($REName) ... more variables..
   {
    echo 'oop's some value missing';
   }
   else
   {
     Insertion code goes in here.
    }

}
else
{
   echo 'The variables not set';
} 
```

我将这种语法与两个文本框一起使用，但它不适用于 59。我不确定所有变量都在提交的天气或任何其他问题吗????????????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:07:56.727

> 如果提供了多个参数，则仅当设置了所有参数时 isset() 才会返回 TRUE。评估从左到右进行，并在遇到未设置的变量时立即停止。

那是来自[PHP Manual](http://php.net/isset)。因此，如果未设置这 59 个变量中的任何一个，您`if`将失败。这是预期的行为。您可以尝试发出`print_r($_POST);`命令来查看这 59 个变量是否存在。这是在条件语句中使用这么多变量的缺点之一，它变得非常难以调试。您可以将所有这些名称放在一个数组中，然后循环遍历它，这比在每个新条件下一遍又一遍地编写这 59 个名称更容易

**编辑**

例如，您可以在这些行中尝试一些东西

```
<?php
$check=array();
$check[]="REID";
$check[]="REName";
$check[]="ThirdVar";
$check[]="FourthVar";

foreach($check as $index)
{
    if(!isset($_POST[$index]))
    {
    echo "POST does not have a value for $index <br>";
    }
}

?> 
```

# matlab - 使用 gnuplot 重新绘制 matlab 等高线图

> ID：15940574
> 
> 赞同：1
> 
> 时间：2013-04-11T04:04:42.420
> 
> 标签：matlab, plot, gnuplot, file-format, contour

伙计们！

我正在（慢慢地）从 matlab 转向操作系统领域，我最近发现了 gnuplot，它创建了迄今为止非常好的图。

现在我想重新绘制我今年早些时候用 matlab 制作的一些图表（等高线图），但我对 gnuplot 的数据格式有点苦恼。

gnuplot 期望数据在

```
x0 y0 f(x0, y0) 
```

格式，而出于我的目的，我创建了所有数据文件

```
f(x0,y0), f(x0,y1), f(x0, y2)....
f(x1, y0), ....
..
. 
```

格式（x 和 y 向量总是相同的，所以我没有丢失任何信息）。我可以避免重新格式化我所有的数据文件（非常大而且很多）并且仍然使用 gnuplot 以“类似 matlab”的方式使用现有文件，即 contour(z) 其中 z 是上面提到的数据吗？

感谢大家对这里的支持！

干杯，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:40:04.720

听起来您正在寻找`splot '' matrix`，来自`help splot matrix`：

```
Example commands for plotting uniform matrix data:
     splot 'file' matrix using 1:2:3          # ascii input
     splot 'file' binary general using 1:2:3  # binary input

In a uniform grid matrix the z-values are read in a row at a time, i. e.,
    z11 z12 z13 z14 ...
    z21 z22 z23 z24 ...
    z31 z32 z33 z34 ...
and so forth. 
```

# java - 此正则表达式不适用于 xml 中的 CDATA。我该如何解决？

> ID：15940576
> 
> 赞同：0
> 
> 时间：2013-04-11T04:04:48.390
> 
> 标签：java, xml, regex

我正在使用一个我们只允许我使用正则表达式的外部 API，我想解析来自 xml 标签的内容`<name>alwin</name>`，我曾经`<.*?>.*?<.*/>`解析“alwin”.. 它不起作用，但现在它的结构像`<name><![CDATA[<table>alwin</table>]]</name>`我想要的那样也能够解析 CDATA .. 我也想提取`[![CDATA[<table>alwin</table]]`。也只是“alwin”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:42:26.147

尝试使用此模式：

```
<([a-zA-Z]+).*?>(.*?)</\1> 
```

该`\1`子句针对模式的第一个匹配组，即`([a-zA-Z]+)`. 因此，匹配的结束标签将始终与开始标签相同。

然后标签的内容将在第二组中可用：

```
Pattern p = Pattern.compile("<([a-zA-Z]+).*?>(.*?)</\\1>");
Matcher m = p.matcher("<name><![CDATA[<table>alwin</table>]]</name>");
while (m.find()) {
    System.out.println(m.group(2));
} 
```

上面的代码段打印：

```
<![CDATA[<table>alwin</table>]] 
```

重复上述输出的模式以获得`alwin`零件。

# java - Java 应用程序集群服务器和日志文件

> ID：15940577
> 
> 赞同：2
> 
> 时间：2013-04-11T04:04:49.017
> 
> 标签：java, cluster-computing, application-server

应用程序正在服务器集群上运行。

我正在寻求澄清两个问题。

1.应用程序（ear）是否也在管理服务器上运行或仅在节点服务器上运行？我是否可以说管理服务器用于启动、停止、负载平衡、故障转移和节点服务器之间？

2.写日志文件的标准做法是什么？例如如果有任何生产问题，我们是否需要登录每个节点（不同的linux服务器）来检查日志文件。根据我的经验，我用于登录到每个服务器以获取特定错误的日志。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:07:24.537

## 管理服务器

“管理服务器”通常是一个常规节点，被选择用于处理集群上的应用程序**部署。**最有可能的是，您可以为此任务选择任何节点，因为更改可以自动传播到所有其他服务器（假设场部署程序可用）。

**负载平衡**和**故障转移**完全独立于应用程序部署。依靠[反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)通常是实现这些目标的最佳方式（例如[nginx ）。](http://nginx.com/)

## 集群日志

您可以将日志汇总到指定服务器上的常规文件中。如果那是您的日志框架，请使用[SocketAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SocketAppender.html)和[专用的 log4j 服务器。](https://stackoverflow.com/questions/11759196/log4j-how-to-use-socketappender)

您还可以将日志存储在共享数据库中。一个[附加程序](https://stackoverflow.com/questions/1364322/log-to-a-database-using-log4j)也可用于此。

# javascript - 快速迭代时处理缓存 js 文件的最佳方法

> ID：15940581
> 
> 赞同：1
> 
> 时间：2013-04-11T04:05:06.157
> 
> 标签：javascript, http, browser-cache, http-caching

我的应用程序正在增长、更改并部署给我们的 alpha 用户，每天至少一次。这会导致一个问题，因为用户的浏览器缓存没有足够快地过期，无法让他们获得最新的脚本版本。

有什么好的方法可以解决这个问题？我知道我可以在脚本文件中添加一个 cachebuster 查询字符串参数（取决于我们的 mercurial 修订版），但这似乎是一种 hack，需要扩展 requirejs 才能实现。

我们可以在现代浏览器支持的服务器上配置某种缓存过期标头吗？（我们的 alpha 用户都使用 Chrome 或 Firefox）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:44:54.057

我知道您正在运行 IIS，但如果您愿意将 Apache 设置为反向代理，您可以运行 Google 的[mod_pagespeed](http://code.google.com/p/modpagespeed/)插件。它会在退出时自动重写您的 HTML，添加缓存清除参数，并在所有 JS 内容上设置适当的长期缓存控制 HTTP 标头。它真的很光滑。

# java - 我如何通过 java 找到我的地理位置（基于控制台的代码）

> ID：15940588
> 
> 赞同：0
> 
> 时间：2013-04-11T04:05:47.177
> 
> 标签：java, api, google-maps, url, geolocation

我想尝试获取我的 PC 的经纬度，但与其他 PC 一样，它不包含任何**GPS**设备。那么是否可以通过**谷歌地图**获取位置。虽然我不太了解谷歌需要查找设备的纬度和经度的**地理编码**`URL`，但谁能告诉我如何在基于控制台的应用程序中得到这个东西，这可能吗？

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:50:04.937

尝试将 android 插件安装到您使用的 IDE。或者下载android插件自带的eclipse bundle。您可以在此 youtube 链接上找到教程：[https](https://www.youtube.com/watch?v=7-n6p6RxSS8) ://www.youtube.com/watch?v=7-n6p6RxSS8以获取地理位置信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:09:25.397

谷歌提供了 GOOGLE MAPS API。通过这个你可以得到你的 PC 的纬度和经度

[https://developers.google.com/maps/documentation/](https://developers.google.com/maps/documentation/)

上面的链接有 GOOGLE MAPS API 的文档

# ios - UITableView 空白单元格

> ID：15940589
> 
> 赞同：2
> 
> 时间：2013-04-11T04:05:51.577
> 
> 标签：ios, uitableview

我的故事板看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/KK2pE.png)

如您所见，我在 MapView 下方有一个 TableView，然后当我单击搜索栏时会出现另一个 TableView。

我的代码：

。H

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

@interface STLMMeetupLocation  : UIViewController <UITextFieldDelegate, UITableViewDataSource, UITableViewDataSource, MKMapViewDelegate, CLLocationManagerDelegate, UISearchBarDelegate, UISearchDisplayDelegate>
@property (weak, nonatomic) IBOutlet MKMapView *mapView;
@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) IBOutlet UISearchBar *searchBar;
@end 
```

.m

```
#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 5;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   if (tableView == self.tableView)
{
    static NSString *cellIdentifier = @"firstTableViewCell";
    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:cellIdentifier];
    }
    cell.textLabel.text = @"This is a First Table View cell";
    return cell;
}

else {
static NSString *cellIdentifier = @"searchBarCell";
UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                  reuseIdentifier:cellIdentifier];
}
cell.textLabel.text = @"This is a Search Bar cell";
    return cell;
}

} 
```

我的模拟器第一个屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/28hCE.png)

我的模拟器第二个屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/Zv061.png)

为什么我的模拟器第一个屏幕的 tableView 的 cell.textLabel.text 是空白的？它不应该有@“这是第一个表视图单元格”；我知道我在做一些愚蠢的事情！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T05:15:26.877

在您的情况下，唯一可能的原因是您没有正确连接数据源和委托。如果您已经连接，但仍然遇到问题，则只需断开所有连接并重新连接。这是一个示例图像....

[https://www.dropbox.com/s/y51astwgjveeixm/Screen%20Shot%202013-04-11%20at%2010.41.02%20AM.png](https://www.dropbox.com/s/y51astwgjveeixm/Screen%20Shot%202013-04-11%20at%2010.41.02%20AM.png)

而且，你已经使用了 UITableViewDataSource 两次.... :(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T05:49:40.280

我拿了你的代码并试了一下。非常适合我。`UISearchBar`我认为您已经为和完美地编写和连接`searchDisplayController`。但是，您在实际的`tableView`.

我建议您快速浏览一下[本](http://www.raywenderlich.com/16873/how-to-add-search-into-a-table-view)教程。我相信你会很快找到缺失的点。

一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:43:17.483

```
-(void)viewWillAppear:(BOOL)animated{

   [super viewWillAppear:animated];
   [self.tableView reloadData];

} 
```

# ios - iOS Restkit如何在映射中关联实体

> ID：15940593
> 
> 赞同：0
> 
> 时间：2013-04-11T04:06:43.243
> 
> 标签：ios, objective-c, mapping, restkit, relationship

我有 2 个实体：文章和类别。

```
//Article mapping
RKManagedObjectMapping *categoryMapping = [RKManagedObjectMapping mappingForClass:[Category class] inManagedObjectStore: objectManager.objectStore];
categoryMapping.primaryKeyAttribute = @"categoryId";
[categoryMapping mapKeyPathsToAttributes:
 @"CategoryId",@"categoryId",
 @"CategoryName",@"categoryName",
 nil];

//Category mapping
RKManagedObjectMapping *articleMapping = [RKManagedObjectMapping mappingForClass:[Article class] inManagedObjectStore: objectManager.objectStore];
articleMapping.primaryKeyAttribute = @"articleId";
[articleMapping mapKeyPathsToAttributes:
 @"ArticleId",@"articleId",
 @"ArticleName",@"articleName",
 @"ArticleText",@"articleText",
 @"CategoryId",@"categoryId",
 nil];

//relationship mapping
[categoryMapping mapRelationship:@"articles" withMapping:articleMapping];
[articleMapping mapRelationship:@"category" withMapping:categoryMapping];
[articleMapping connectRelationship:@"category" withObjectForPrimaryKeyAttribute:@"categoryId"];

//set mapping
[objectManager.mappingProvider setMapping:articleMapping forKeyPath:@"article"];
[objectManager.mappingProvider setMapping:categoryMapping forKeyPath:@"category"]; 
```

然后我想知道文章的类别，但它等于null：

```
 Article* article = [[Article allObjects] objectAtIndex:0];
   //article.category == nil 
```

article.categoryId 和 category.categoryId 相等。

**为什么映射关系不起作用？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:30:36.783

用这种方式尝试关系映射

```
[categoryMapping mapKeyPath:@"articles" toRelationship:@"articles" withMapping:articleMapping];  
[articleMapping mapKeyPath:@"category" toRelationship:@"category" withMapping:categoryMapping]; 
```

这对我来说很完美。我已经在我的两个项目中使用了它。

# c++ - 如何处理对话框中的不同单位？

> ID：15940595
> 
> 赞同：0
> 
> 时间：2013-04-11T04:06:44.637
> 
> 标签：c++, dialog

对话框用于输入用户数据。为方便起见，提供了多种用户数据单位选项（如 m、km、inch），用户可以在其中选择合适的一种。有什么好的方法或现有的库来处理对话框代码中的不同单元吗？例如

```
Length (m): _______ 
```

如果选择了单位 m，并且

```
Length (km): _________ 
```

如果选择单位 km。最终输入将全部转换为标准单位，如 MKS 单位。

# javascript - 输出：一张从 15 到 25 的数字及其正方形和立方体的表格，使用 alert

> ID：15940596
> 
> 赞同：1
> 
> 时间：2013-04-11T04:06:47.340
> 
> 标签：javascript, html

我是 javascript 新手，我想知道我将如何回答这个问题。一直有问题，真的很令人沮丧:(。

到目前为止我有这个：

```
<!DOCTYPE HTML>

<html>

<head> 
<title> Lab 4 - Task 2.1</title>

<script type = "text/javaScript">

function numbers()
{

var numbers = new Array();
    numbers[0] =  "15";
    numbers[1] =  "16";
    numbers[2] =  "17";
    numbers[3] =  "18";
    numbers[4] =  "19";
    numbers[5] =  "20";
    numbers[6] =  "21";
    numbers[7] =  "22";
    numbers[8] =  "23";
    numbers[9] =  "24";
    numbers[10] =  "25";

alert(numbers)

}

</script>
</head>
<body>

<input type="button" onclick="numbers()" value="Show alert box" />

</body>
</html> 
```

我将如何把它放到桌子上？以及完成它要求的其他任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:21:13.740

如果您可以将其附加到页面，则可以使用：

```
function addTable() {
    var table = document.createElement("table"),
        row, cell, i;

    table.id = "results_table";

    for (i = 15; i < 26; i++) {
        row = table.insertRow(-1);

        cell = row.insertCell(-1);
        cell.innerHTML = i;

        cell = row.insertCell(-1);
        cell.innerHTML = i*i;

        cell = row.insertCell(-1);
        cell.innerHTML = i*i*i;
    }

    var results = document.getElementById("results");
    if (results.firstChild) {
        results.removeChild(results.firstChild);
    }
    results.appendChild(table);
} 
```

使用这样的 HTML：

```
<div id="results"></div> 
```

如果您必须将`alert`其作为“表格”，那么您可以使用它：

```
function alertTable() {
    var ret = "";
    for (var i = 15; i < 26; i++) {
        ret += i + "  " + i*i + "  " + i*i*i + "\n";
    }
    alert(ret);
} 
```

**演示：http:** [//jsfiddle.net/wazdd/](http://jsfiddle.net/wazdd/)

# sql-server - 如何获取未在发布中添加以进行复制的所有表、视图、存储过程的列表

> ID：15940597
> 
> 赞同：1
> 
> 时间：2013-04-11T04:06:50.597
> 
> 标签：sql-server

如何获取未在出版物中添加的所有**表**、**视图**、**存储过程**`replication`的列表？

你能帮我制作存储的 Proc 吗？我是 Replication 的新手......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:58:18.437

试试这个——

```
SELECT
      o.[object_id]
    , [object_name] = s.name + '.' + o.name
    , o.type_desc
FROM sys.sysobjects so WITH (NOLOCK)
JOIN sys.objects o WITH (NOLOCK) ON so.id = o.[object_id]
JOIN sys.schemas s WITH (NOLOCK) ON o.[schema_id] = s.[schema_id]
WHERE so.xtype IN ('P', 'V', 'U', 'TF', 'FN', 'IF')
    AND so.replinfo = 1
    AND o.is_published = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:42:39.310

对于快照和事务：

```
SELECT
    name 
FROM sysobjects WITH (NOLOCK) 
WHERE ((xtype = 'U') OR (xtype = 'V') OR (xtype = 'P')) AND 
    category <> 2 AND 
    name NOT IN (SELECT DISTINCT object_name(OBJID) FROM sysarticles) 
```

对于合并：

```
SELECT
    name 
FROM sysobjects WITH (NOLOCK) 
WHERE ((xtype = 'U') OR (xtype = 'V') OR (xtype = 'P')) AND 
    category <> 2 AND 
    name NOT IN (SELECT DISTINCT object_name(OBJID) FROM sysmergearticles) 
```

# jquery - 是否可以在其容器 div 中居中同位素砌体元素？

> ID：15940599
> 
> 赞同：1
> 
> 时间：2013-04-11T04:07:11.750
> 
> 标签：jquery, jquery-masonry, jquery-isotope, centering

好的，我已经查看了这里关于同位素/砌体/居中的所有线程，但我仍然不确定这是否可能。我认为最好从一个链接开始：

[http://www.chrissvensson.info/ces85/020](http://www.chrissvensson.info/ces85/020)

这个例子有点粗糙，但它意味着有点混乱（每个图像都有通过 php 设置的随机边距百分比）。如果您重新加载，您可能会更好地了解它。

我希望做的是在较大的同位素容器 div 内水平居中所有单独的 div（每个 div 包含一个图像）。我已经检查了 Isotope 上的 Centered Masonry 选项 ( [http://isotope.metafizzy.co/custom-layout-modes/centered-masonry.html](http://isotope.metafizzy.co/custom-layout-modes/centered-masonry.html) )，但我认为这不是我真正想要的——看起来居中砌体将一个 div 居中，其中包含另一个 div 内的所有砌体元素，但我认为它们仍然都从左边缘开始。

换句话说，我希望设置它以使砌体元素不会全部从左边缘开始。我认为如果它们居中也会很好，这样如果在移动设备上查看该网站，并且每行只有一个图像，则该图像或多或少会居中。

好吧，我希望这不会太不连贯。我很难解释我在追求什么。我也不确定这是否可能。我应该提到我也在使用延迟加载和 Lightbox 2，以防这可能会影响事情。我也尝试过 Perfect Masonry（抱歉，没有足够的声誉来发布链接）但这似乎没有帮助（我很可能做错了什么……）

提前感谢您提供的任何帮助。此外，如果 Isotope 不是最好的解决方案，我愿意接受其他建议。我应该提一下，我在编程方面不太擅长，所以我在学习的过程中学到了很多。

谢谢！

# android - 带有自定义适配器的 ListFragment

> ID：15940600
> 
> 赞同：4
> 
> 时间：2013-04-11T04:07:25.560
> 
> 标签：android, android-listview, slider, android-listfragment, android-adapter

我`listfragment`在我的项目中设置了一个。但似乎我的片段无法用我的适配器正确处理。它是因为`Context context`在`MyListAdapter`. 如果我点击纠正它。它变成`MenuFragment menuFragment`. 但是在更改之后，`MyListAdapter`出现错误。所以我纠正它。它变成`Context context`. 如果我再次纠正它，它仍然会继续下去。它像那样循环。

注意：我想要实现的是带有图标的 ListFragment。就像我之前的另一个问题（但不幸的是没有人回答它）。

```
public class MenuFragment extends ListFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return super.onCreateView(inflater, container, savedInstanceState);  
    }

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

     String [] proMenu ={ "Homies", "Best Nearby", "Coupon" , "Profile" , "History" , "", "Setting" ,
               "About" , "Sign Out"};

     setListAdapter(new MyListAdapter(this, proMenu));

}

@Override
public void onListItemClick(ListView lv, View v, int position, long id) {
    Fragment newContent = null;
    switch (position) {
    case 0:
        newContent = new ColorFragment();
        break;
    case 1:
        Intent intent7 = new Intent();
        intent7.setClass(getActivity(), Home.class);
        intent7.putExtra("index", position);
        startActivity(intent7);
        break; 
```

编辑：这是我的布局。现在完全好了。我只需要调整 textview 和线性布局，这样单词就不会被切成两半。但我面临另一个问题。就像背景图像相互堆积一样。这是我布局上的 xml。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="50dp"
android:orientation="horizontal" 
android:cacheColorHint="#00000000" 
android:background="@drawable/menu_drawer">  

<ImageView
    android:id="@+id/row_icon"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:padding="10dp"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/row_title"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:padding="10dp"
    android:text="Medium Text"
    android:textSize="20dp"
    android:textAppearance="@android:style/TextAppearance.Medium" />

</LinearLayout> 
```

![布局](https://i.stack.imgur.com/qcME7.jpg)

如果我`android:background="@drawable/menu_drawer"`从`linear layout`. 这将是完美的背景。不互相堆积。但是当我在列表中滑动时，背景会发疯，它消失了并在其中显示了一些黑色背景。就像 listview 的问题一样`android:cacheColorHint="#00000000"`。我已经`cachecolor`在`linear layout`. 但它仍然显示那些黑色背景。就像这样。

![这就是我删除 <code>android:background</code> 时发生的情况](https://i.stack.imgur.com/S5hM5.jpg)

我知道问题是什么。这是因为默认背景是黑色的。但我不知道如何解决它。

EDIT2：解决了黑色问题。

解决了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T04:19:23.147

您没有将有效值传递`Context`给您的适配器，a`Fragment` **不是**`Context`. 例如，您需要使用 an`Activity`作为`Context`：

```
setListAdapter(new MyListAdapter(getActivity(), proMenu)); 
```

我希望你也在适配器中实现该方法，否则无论你有多少元素，你都`getCount()`不会看到任何东西。`ListView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T06:38:44.807

```
Following is the method to create listFragement list view:
HealthAdvice.java

package com.example.babs;

import android.app.ListFragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class HealthAdvice extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View rootView = inflater.inflate(R.layout.health_advice, container, false);

        return rootView;

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        HealthAdviceArray health_data[] = new HealthAdviceArray[]
                {
                new HealthAdviceArray(R.drawable.ic_launcher, "Cloudy"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Showers"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Snow"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Storm"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Sunny")
                };

        HealthAdviceAdapter adapter = new HealthAdviceAdapter(getActivity(), 
                R.layout.health_advice_item_row, health_data);

        /** Setting the array adapter to the list view */
        setListAdapter(adapter);

    }

}// end main class HealthAdvice

Step 2:

HealthAdviceAdapter.java
package com.example.babs;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class HealthAdviceAdapter extends ArrayAdapter<HealthAdviceArray>{

    Context context; 
    int layoutResourceId;    
    HealthAdviceArray data[] = null;

    public HealthAdviceAdapter(Context context, int layoutResourceId, HealthAdviceArray[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        HealthAdviceArrayHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new HealthAdviceArrayHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }
        else
        {
            holder = (HealthAdviceArrayHolder)row.getTag();
        }

        HealthAdviceArray weather = data[position];
        holder.txtTitle.setText(weather.title);
        holder.imgIcon.setImageResource(weather.icon);

        return row;
    }

    static class HealthAdviceArrayHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
    }
}

Step 3:

HealthAdviceArray.java

package com.example.babs;

public class HealthAdviceArray {

    public int icon;
    public String title;

    // we are over loading here
    public HealthAdviceArray(){
        super();
    }

    public HealthAdviceArray(int icon, String title) {
        super();
        this.icon = icon;
        this.title = title;
    }

}

step 4: 

Health Advice health_advice.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout>

step 5:

Health Advice items: health_advice_item_row.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:padding="10dp" >

    <ImageView
        android:id="@+id/imgIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:contentDescription="@string/image_view"
        android:gravity="center_vertical" />

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:gravity="center_vertical"
        android:textColor="#000000"
        android:textSize="22sp"
        android:textStyle="bold" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T06:34:16.457

在创建自定义适配器时，不要将“上下文”对象作为参考传递，只需将 Activity 对象传递给自定义适配器。

```
public class HealthAdvice extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View rootView = inflater.inflate(R.layout.health_advice, container, false);

        return rootView;

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        HealthAdviceArray health_data[] = new HealthAdviceArray[]
                {
                new HealthAdviceArray(R.drawable.ic_launcher, "Cloudy"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Showers"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Snow"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Storm"),
                new HealthAdviceArray(R.drawable.ic_launcher, "Sunny")
                };

        HealthAdviceAdapter adapter = new HealthAdviceAdapter(getActivity(), 
                R.layout.health_advice_item_row, health_data);

        /** Setting the array adapter to the list view */
        setListAdapter(adapter);

    }

}// end main class HealthAdvice 
```

# php - 使用 textarea 修改 MySQL 表字段

> ID：15940601
> 
> 赞同：0
> 
> 时间：2013-04-11T04:07:27.787
> 
> 标签：php, html, mysql, pdo, textarea

基本上我希望用户能够创建一个看起来像这样的列表：

```
Please give me all books by:

James Arnold
Tom Seaver 
```

我只需要保留换行符...

我的代码给了我一个问题：当我将信息保存到数据库中时，格式会被保留，但是当我将信息放入 textarea 时，会有很多额外的空格。我附上了一张图片，所以你可以看到它的样子。

```
<?php
    session_start();

    if (!isset($_SESSION['user']))
        header('Location: ../index.php');

    require ("../login.php");

    include ("header.php");
    include ("subnav.php");

    $user_id = $_SESSION['user'];
    $form_show = true;

    if (isset($_POST['submit'])) {
        if (empty($_POST['notes'])) {
            $stmt = $db->prepare("SELECT * FROM notes WHERE user=:id");
            $stmt->bindValue(':id', $user_id, PDO::PARAM_INT);
            $stmt->execute();
            $rows = $stmt->fetchAll();
            $num_rows = count($rows);
            if ($num_rows == 0) {
                $form_show = false;
                $errors[] = 'You do not currently have any notes to edit, therefore nothing to delete!.';
            }
            else {
                $stmt = $db->prepare("DELETE FROM notes WHERE user=:id");
                $stmt->bindValue(':id', $user_id, PDO::PARAM_INT);
                $stmt->execute();
                $errors[] = 'Your notes have been successfully deleted.';
                $form_show = false;
            }
        }
        else {
            $stmt = $db->prepare("SELECT * FROM notes WHERE user=:id");
            $stmt->bindValue(':id', $user_id, PDO::PARAM_INT);
            $stmt->execute();
            $rows = $stmt->fetchAll();
            $num_rows = count($rows);
            if ($num_rows == 0) {
                $stmt = $db->prepare("INSERT INTO notes (user, notes) VALUES (:user, :notes)");
                $stmt->bindValue(':user', $user_id, PDO::PARAM_INT);
                $stmt->bindValue(':notes', trim($_POST['notes']), PDO::PARAM_STR);
                $stmt->execute();
                echo 'Your notes have been successfully added!';
                $form_show = false;
            }
            else {
                $stmt = $db->prepare("UPDATE notes SET notes=:notes WHERE user=:id");
                $stmt->bindValue(':notes',trim($_POST['notes']), PDO::PARAM_STR);
                $stmt->bindValue(':id', $user_id, PDO::PARAM_INT);
                $stmt->execute();
                echo 'Your notes have been successfully updated!';
                $form_show = false;
            }
        }
    }

?>

    <?php
        if (!empty($errors))
            foreach($errors as $error)
                echo $error;
    ?>

    <?php
        if ($form_show == true) { ?>
            <p>Use this page to add any notes you would like to list for your subscription. For example, if you want all books by a particular artist, here is the place to add that information!</p>

            <form action="" method="post">
                    <ul>
                        <li>
                            Notes: <br>
                            <textarea name="notes" rows="30" cols="70">

                            <?php
                            $stmt = $db->prepare("SELECT * FROM notes WHERE user=:id");
                            $stmt->bindValue(':id', $user_id, PDO::PARAM_INT);
                            $stmt->execute();
                            $rows = $stmt->fetchAll();
                            $num_rows = count($rows);
                            if ($num_rows != 0)
                                foreach ($rows as $row)
                                    echo $row['notes'];
                            ?>

                            </textarea>
                        </li>
                        <li>
                            <input type="submit" value="Modify Notes" name ="submit" id="submit">
                        </li>
                    </ul>
            </form>
<?php   } ?>

<?php   
    include ("footer.php");
?> 
```

这是一张图片：

![在此处输入图像描述](https://i.stack.imgur.com/rl7F5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:19:12.883

不应该以下查询：

```
"UPDATE notes SET notes=:notes WHERE id=:id" 
```

是：

```
"UPDATE notes SET notes=:notes WHERE user=:id" 
```

对于第二个，您可以尝试替换`nl2br($_POST['notes'])`为

```
nl2br( trim($_POST['notes']) ) 
```

我还是不明白第二个问题是什么？

* * *

第二个问题是由于文本区域内的可用空白空间而产生的。以下看起来很难看，但会为您提供您想要的。

```
<textarea name="notes" rows="30" cols="70"><?php $stmt=$ db->prepare("SELECT * FROM notes WHERE user=:id"); $stmt->bindValue(':id', $user_id, PDO::PARAM_INT); $stmt->execute(); $rows = $stmt->fetchAll(); $num_rows = count($rows); if ($num_rows != 0) foreach ($rows as $row) echo $row['notes']; ?></textarea> 
```

# c++ - STL容器的范围插入函数在c ++ 11下返回void？

> ID：15940603
> 
> 赞同：5
> 
> 时间：2013-04-11T04:07:45.653
> 
> 标签：c++, c++11, g++, mingw, std

刚刚学习 c++，所以我可能没有正确理解这一点，但我只读到范围插入函数返回新标准下的迭代器（C++ Primer 5th Ed，[cplusplus.com](http://www.cplusplus.com/reference/string/basic_string/insert/)，[cppreference.com](http://en.cppreference.com/w/cpp/string/basic_string/insert)，以及各种建议使用它来维护迭代器的有效性）。

来自 cppreference.com：

```
template< class InputIt >
iterator insert( const_iterator pos, InputIt first, InputIt last ); 
```

但是，我尝试过的每个版本的 Cygwin GCC 和 MinGW 都使用 -std=c++11 返回了 void。即使看标题，它似乎就是这样写的，而且我无法修改任何东西来解决这个问题。

我错过了什么？

这是我试图编写的“章节练习结束”功能；在给定字符串中用另一个字符串替换一个字符串：

（我知道它不会按预期的方式运行）

```
void myfun(std::string& str, const std::string& oldStr, const std::string& newStr)
{
    auto cur = str.begin();
    while (cur != str.end())
    {
        auto temp = cur;
        auto oldCur = oldStr.begin();
        while (temp != str.end() && *oldCur == *temp)
        {
            ++oldCur;
            ++temp;
            if (oldCur == oldStr.end())
            {
                cur = str.erase(cur, temp);
                // Here we go. The problem spot!!!
                cur = str.insert(cur, newStr.begin(), newStr.end());
                break;
            }
        }
        ++cur;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:15:59.963

目前还没有完全支持的编译器`C++11`。新标准的最新版本`gcc`和`clang`大部分已实施，但仍有部分需要完成。确实，看`basic_string.h`for`gcc 4.7.0`说明这个版本`insert`还没有更新：

```
 template<class _InputIterator>
    void
    insert(iterator __p, _InputIterator __beg, _InputIterator __end) { ... } 
```

# database - 用 Sqlite 替换许多文本文件

> ID：15940613
> 
> 赞同：0
> 
> 时间：2013-04-11T04:09:23.113
> 
> 标签：database, sqlite

我是 Sqlite 的新手。我的应用程序有数百万条记录保存在大约一千个文件中。为了节省管理这些文件的工作，我想将这些记录存储在 Sqlite 中。在我的场景中，查询记录不是必需的，但提取单个文件中的所有记录必须非常快。为了防止更改太多代码，我只想将 1 个文件映射到 1 个表。这意味着 Sqlite 中将有数千个表。在 Sqlite 中创建这么多表是否会对性能产生影响或潜在风险？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:25:22.047

您不会通过在 sqlite 中移动 1:1 文件：表来节省工作。虽然访问记录可能比低级 io 更快，但您必须根据您的具体情况进行测试。

一般来说，您不应该真正创建具有相同架构的多个表：只需合并到一个表并查询它。

我认为 sqlite 可以很好地处理 1000 个表。我知道它可以很好地处理单个表中的一百万条记录。你为什么不试试看呢？

# android - 无法从对话框中的 EditText 对象获取文本

> ID：15940616
> 
> 赞同：1
> 
> 时间：2013-04-11T04:09:28.347
> 
> 标签：android, android-layout, android-edittext

因此，我想从一个菜单项中显示一个允许用户输入一些文本的对话框。该对话框工作得很好，但是当我尝试对 EditText 对象执行任何操作时，应用程序会关闭。可能与我正在使用的对话框的布局有关，但我不确定。下面是按下相应菜单项时调用的方法：

```
private void showChangeDownloadURLDialog() {
    mapShouldRefresh = false;

    // Get the layout inflater
    LayoutInflater inflater = MapsActivity.this.getLayoutInflater();

    final EditText mEditText = (EditText) findViewById(R.id.urladdress);

    new AlertDialog.Builder(MapsActivity.this)
    .setTitle(R.string.map_menu_test)
    .setView(inflater.inflate(R.layout.change_url, null))
    .setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            Log.i(TAG, "click ok");
            String mString = mEditText.getEditableText().toString();
            Log.i(TAG, "New URL is: " + mString);
        }
    })
    .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // Does nothing
        }
    })
    .create()
    .show();
} 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:16:04.160

正确的代码是：

```
LayoutInflater inflater = MapsActivity.this.getLayoutInflater();
View content = inflater.inflate(R.layout.change_url, null);
final EditText mEditText = (EditText) content.findViewById(R.id.urladdress);
new AlertDialog.Builder(MapsActivity.this)
    .setTitle(R.string.map_menu_test)
    .setView(content)
//.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:18:47.967

试试这个，

```
private void showChangeDownloadURLDialog() {
mapShouldRefresh = false;

// Get the layout inflater
LayoutInflater inflater = MapsActivity.this.getLayoutInflater();

final EditText mEditText = new EditText(MapsActivity.this);

new AlertDialog.Builder(MapsActivity.this)
.setTitle(R.string.map_menu_test)
.setView(mEditText)
.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        Log.i(TAG, "click ok");
        String mString = mEditText.getEditableText().toString();
        Log.i(TAG, "New URL is: " + mString);
    }
})
.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // Does nothing
    }
})
.create()
.show(); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:20:54.313

假设这个

```
final EditText mEditText = (EditText) findViewById(R.id.urladdress); 
```

在

```
R.layout.change_url 
```

把它移到下面

```
.setView(inflater.inflate(R.layout.change_url, null)) 
```

您正在尝试`View`在其`ViewGroup`( `layout`) 膨胀之前分配

# apache - 通过 ErrorDocument 404 指令重定向不存在的文件并记录引用者？

> ID：15940619
> 
> 赞同：0
> 
> 时间：2013-04-11T04:09:37.923
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试将人们可能登陆的不存在的文件重定向到特定文件（landing.php），但我也想为这些 404 情况记录一个引荐来源...那我该怎么做呢？

现在，我的 .htaccess 文件中有一个简单的 ErrorDocument 404 /landing.php 条目，但是当用户登陆自定义登录页面时，我如何/在哪里实际捕获用户来自的引荐来源网址（将会有其他常规访问者来到landing.php页面，所以我不能只记录该页面的所有引荐来源，所以有没有办法只分离404流量？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:10:35.063

您不能依赖可用的推荐人，因为人和软件可以轻松地对其进行调整。根据我的经验，大多数人不会这样做，所以它仍然值得跟踪，只需确保在使用前检查它是否已设置。

当您像您一样使用 ErrorDocument 指令时，[Apache 将设置](http://www.php.net/manual/en/reserved.variables.php#53617)可在 $_SERVER 数组中访问的 REDIRECT_STATUS 环境变量，并将包含 HTTP 状态代码。

```
if (!empty($_SERVER['REDIRECT_STATUS']) && $_SERVER['REDIRECT_STATUS'] == '404') {

    if (!empty($_SERVER['HTTP_REFERER'])) {
        // Log the referer
    }
} 
```

注意：我看到有些人说这并不总是有效，但我无法找到触发设置环境变量的原因。

**更新**

根据[Apache 手册](http://httpd.apache.org/docs/current/custom-error.html#configuration)，仅当您使用本地 URL 时才会设置这些环境变量。这意味着您应该在 ErrorDocument 404 指令中提供相对路径：

```
Error 404 /landing.php 
```

**如果您将 URL 放在那里，则会发生外部重定向，并且即使该 URL 使用与您的站点相同的域，**也不会设置环境变量。

看来您已经正确执行了此操作，但我认为我会为任何未来的用户提供此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:16:46.180

在您的`landing.php`文件中：

```
$referer = $_SERVER['HTTP_REFERER']; 
```

`$referer`然后你可以用var做任何你需要的事情。

# python - TypeError：“int”对象不可调用（Pygame）

> ID：15940620
> 
> 赞同：-1
> 
> 时间：2013-04-11T04:10:04.200
> 
> 标签：python, int, pygame, python-3.2, callable

我正在尝试为小型平台游戏制作一个在屏幕底部加载的地板。我也是这样做的，所以以后它会更容易（我认为）只在相机中加载地板而不是无限加载。我确实试图找到一个解决方案，但我没有提到“N”作为一个函数，所以我不知道。任何帮助或一般建议表示赞赏。是的，我知道现在有一些无用的东西，但我还没有解决它们（FPS，BASICFONT）

```
def drawTiles():
    N = 0
    while (N < tilesNeeded):
        pygame.draw.rect(DISPLAYSURF, GREEN, (20(N), floorx, TILESIZE, TILESIZE))
        pygame.draw.rect(DISPLAYSURF, LIGHTGREEN, ((TILESIZE/4) + (20(N)), (floorx + (TILESIZE/4)), TILESIZE / 2, TILESIZE / 2))
        N = N + 1 
```

这是要查看的整个程序

```
import pygame, sys, random
from pygame.locals import *

TILESIZE = 20
WINDOWWIDTH = 640
WINDOWHEIGHT = 480
FPS = 30
floorx = (WINDOWHEIGHT - (TILESIZE))
floory = (WINDOWWIDTH / TILESIZE)
TileOffset = 20
tilesNeeded = (WINDOWWIDTH / TILESIZE)

BLACK =         (  0,   0,   0)
WHITE =         (255, 255, 255)
SKYBLUE =       (200, 210, 255)
DARKTURQUOISE = (  3,  54,  73)
GREEN =         (  0,  92,   7)
LIGHTGREEN =    (  0, 135,  15)

def main():
    global FPSCLOCK, DISPLAYSURF, BASICFONT, TILESIZE, floorx, floory, floorCovered, tilesNeeded

    pygame.init()
    FPSCLOCK = pygame.time.Clock()
    DISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))
    pygame.display.set_caption('Alpha One')

    DISPLAYSURF.fill(SKYBLUE)

    drawTiles()

    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()

        pygame.display.update()

def drawTiles():
    N = 0
    while (N < tilesNeeded):
        pygame.draw.rect(DISPLAYSURF, GREEN, (20(N), floorx, TILESIZE, TILESIZE))
        pygame.draw.rect(DISPLAYSURF, LIGHTGREEN, ((TILESIZE/4) + (20(N)), (floorx + (TILESIZE/4)), TILESIZE / 2, TILESIZE / 2))
        N = N + 1

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:12:22.580

这就是问题：

```
 pygame.draw.rect(DISPLAYSURF, GREEN, (20(N), floorx, TILESIZE, TILESIZE)) 
```

特别是`20(N)`对于 Python，看起来您正在使用参数 N 调用对象 20。但 20 是一个不可调用的整数，因此它会引发异常。

你的意思是`20*N`？

顺便说一句，更多的 pythonic 是写`while (N < tilesNeeded):`as`for N in range(tilesNeeded):`然后你不需要显式地增加它。

# django - Django - 记录似乎消失了？

> ID：15940621
> 
> 赞同：0
> 
> 时间：2013-04-11T04:10:14.237
> 
> 标签：django

我有一个相当复杂的逻辑，正如我刚刚发现的那样，它会导致记录简单地消失。我将尝试布置代码的逻辑...

*   我们的数据库中有大约 1,000 个客户
*   每年一次，我们按顺序发送两封信（第一封必须先出去，然后大约一个月后第二封）
*   为了让我们能够发送信件，需要对每个客户的信息进行一组大约 30 项检查和平衡。诸如“我们是否有客户 X 的记录”、“我们是否有关于客户 Y 的信息”。只是我们在发送信件之前需要存档的一组信息。
*   对于缺少信息的客户，我创建了一个“暂存区”，其中显示了缺少信息的客户列表，以及他们缺少哪些信息。
*   客户将所有信息（即：我们可以发送第一封信）进入“Ready for First Letter”区域
*   在任何时候，我们都可能会丢失一些信息，这会导致客户离开“Ready for First Letter”区域并返回“Staging Area”。
*   用户应纠正情况（添加缺失的信息）以将客户端踢回“准备好接收第一封信”区域
*   发送第一封信后，客户将进入“准备第二封信”区域。同样，如果我们在任何时候丢失了一些信息，客户端应该弹出“准备第二封信”区域并返回暂存区域。

我发现正在发生的是客户将在“准备好接收第一封信”区域，然后我们会丢失一些信息。客户*应该*只是移动到“Stgin Area”。然而，记录简单地消失了！它似乎被删除了，我在代码中的任何地方都找不到关键字`delete`. 我有点困惑为什么会发生这种情况。

我知道在没有我发布代码的情况下很难做出任何类型的“你做错了”类型的评论，但我真的不知道该发布什么，因为有很多代码可以让这一切发生（我'我概括了很多正在发生的事情）。

我想我想知道是否存在记录可能被 Django 删除或删除的情况。这会发生吗？如果是这样，似乎很疯狂...

谢谢

*** 编辑 ***部分见解：

我想我已经找到了神秘发生的地方。我一直在通过从客户的记录中删除它来测试特定的信息，以查看客户是否确实返回到暂存区。当我删除此特定信息时，客户的记录也消失了。这是我的代码（不是复制和粘贴，只是一个重写的想法）：

```
c = client.objects.get(pk=1)
tmp = c.specificInfo
tmp.delete()
c.specificInfo = None
c.save() 
```

我应该指出这`c.specificInfo`是一个外键。所以，大概我正在分配一条不同的记录`tmp`，然后删除该项目。这样做也有删除的副作用`client`。

非常混乱...

# objective-c - 另一个 CoreData 提取优化

> ID：15940627
> 
> 赞同：1
> 
> 时间：2013-04-11T04:10:54.607
> 
> 标签：objective-c, xcode, core-data, query-optimization, nsfetchedresultscontroller

我有一个“**产品**”实体的数据库，大约有 40k - 500k 个条目。我有一个允许用户滚动实体表的视图（我知道糟糕的设计，但这正是客户想要的）。

“**产品**”实体如下所示：

```
**Product:** 
     - part_number (string) (indexed)
     - list_price (string)
     - manufacturer_partNumber (string)
     - productDescription (string)
     - productID (string)
     • inventory (NSManagedObject, 1..n)
         - name (string)
         - quantity (string)
     • manufacturer (NSManagedObject, 1..1)
         - name (string)
         - manufacturerID (string) 
```

起初，我`NSFetchedResultsController`以标准方式创建了返回所有**Product**实体并设置了排序描述符`part_number`。我跳过了所有的障碍来尝试加快获取速度：

1.  fetchBatchSize
2.  索引属性
3.  [解释查询](http://www.sqlite.org/eqp.html)

这样做我只能将获取时间降低到大约 3.5 分钟。不好。

所以从 EXPLAIN QUERY 我看到很多时间都花在了获取`inventory`and`manufacturer`实体上。合理但仍然不好。所以我决定只返回**Product**实体的一些属性而不是 who 的东西。

这是我正在获取的属性`setPropertiesToFetch`

```
 - part_number (string) (indexed)
 - list_price (string)
 - photo (string)
 - productID (string) 
```

`part_number`使用at 15设置排序描述符`fetchBatchSize`。这将获取时间缩短到约 40 秒。还是不好。

* * *

我知道有人会在这里问我是如何设置的`NSFetchedResultsController`：

```
- (NSFetchedResultsController *)fetchedResultsControllerWithCacheName:(NSString*)cacheName {

    [NSFetchedResultsController deleteCacheWithName:cacheName];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Product" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"part_number" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:15];

    [fetchRequest setResultType:NSDictionaryResultType];
    [fetchRequest setReturnsDistinctResults:YES];
    [fetchRequest setPropertiesToFetch:@[@"part_number", @"list_price", @"photo", @"productID"]];

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                                                  managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil
                                                                                                             cacheName:cacheName];

    return theFetchedResultsController;
} 
```

* * *

*我还能做些什么*来加快速度吗？

我有一个可能真的很hacky的想法是使用 NSFetchedResultsController 进行某种类型的延迟加载（是的，我知道它应该处理它）。我还没有完全考虑到这一点，但将其设置`setFetchLimit`为 100 并使用 NSPredicate 在 last 之后加载内容`part_number`。这可能只是耗时。

# xcode - 如何在 xcode OS X 应用程序模拟器中使用蓝牙

> ID：15940630
> 
> 赞同：0
> 
> 时间：2013-04-11T04:11:22.457
> 
> 标签：xcode, macos, cocoa, bluetooth

我已经为 OS X 构建了一个使用 xcode 的程序。我需要它通过蓝牙将字符发送到开发板。我的问题是我可以使用 MBP 的内部蓝牙通过 xcode 模拟器发送这些字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-19T13:37:35.647

是的，您可以：当您从 xcode 运行 OSX 应用程序时，它不会使用模拟器，而是启动真正的 OSX 应用程序。

你可以在 github 上找到很多示例代码[https://github.com/search?l=Swift&q=bluetooth+peripheral&type=Repositories&utf8=%E2%9C%93](https://github.com/search?l=Swift&q=bluetooth+peripheral&type=Repositories&utf8=%E2%9C%93)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:25:12.933

首先，XCode 模拟器用于 iOS，而不是 OS X。所以我认为你的问题应该是“如何使用蓝牙构建 OS X 应用程序？”。

有一种在 OS X 上构建蓝牙应用程序的方法，请阅读：

[https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/Bluetooth/BT_Intro/BT_Intro.html](https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/Bluetooth/BT_Intro/BT_Intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:23:53.510

不，要使用蓝牙，您需要有一个实际的设备。模拟器不适用于该目的。

# node.js - NodeJS，Mongoose - 插入数据时重复条目

> ID：15940632
> 
> 赞同：1
> 
> 时间：2013-04-11T04:11:40.777
> 
> 标签：node.js, mongodb, mongoose

我有带有 Mongoose 的 NodeJS，我正在访问一个 API 来检索数据。我有一个架构如下。

```
var dataSchema = new Schema({
  id:Number,
  name:String
)); 
```

我正在使用以下代码插入。

```
 var d = Data.find({id:data.id}, function(error, curr_data) {
    if(curr_data.length == 0) { // check to make sure only unique entries are entered
      console.log("      Inserting : " + curr_data.name);
      new Data(data).save();
    }
  }); 
```

但是当我检查我的 Mongo DB 时，我仍然可以看到重复的条目。

有没有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:55:32.720

您可以使用 Mongo 的内置[count() 方法](http://docs.mongodb.org/manual/reference/method/db.collection.count/)来检查该行是否存在并从中有条件地保存模型：

```
Data.count({id: data.id}, function (err, count) {
  if (!count) {
    console.log("Inserting " + curr_data.name);
    new Data(data).save();
  }
  else {
    // Handle err.
    console.log('Already Exists');
  }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T06:36:53.413

您不需要向架构中添加 id，Mongoose 会为您创建一个 ObjectId。

“如果没有将一个模式传递给 Schema 构造函数，Mongoose 会默认为每个模式分配一个 _id 字段。分配的类型是 ObjectId 以与 MongoDB 的默认行为一致。如果您根本不希望将 _id 添加到您的模式中，您可以使用此选项禁用它。” - 来自[猫鼬文档](http://mongoosejs.com/docs/guide.html#_id)

如果您确实想指定自己的 id，您可以执行以下操作以确保不会创建重复项：

```
var dataSchema = new Schema({
  id: {
    type: Number,
    index: {
      unique: true
    }
  },
  name: String
},
{ _id: false }); 
```

# java - Spring MVC中的绑定结果返回null

> ID：15940633
> 
> 赞同：1
> 
> 时间：2013-04-11T04:11:59.320
> 
> 标签：java, spring, spring-mvc

`ModelAttribute`我有一个对象，我使用命名绑定到视图`SurveyDetail`。在该对象中，我有 2 个名为`id`和的属性`surveyYear`。为了访问`POST`方法中的值，我为每个属性设置了一个隐藏字段。SurveyYear 值在控制器中正确返回，但 id 返回 null。它们都是surveyDetail的一部分，我不明白为什么它正确绑定到surveyYear而不是id？不会抛出任何错误，并且在初始`GET`时它在 id 字段中具有正确的值，但是一旦它到达`POST`id 值就会返回 null。此外，当我执行 request.getParameter("id") 时，会返回正确的值，但如果我尝试引用绑定路径，它会返回 null`surveyDetail.getId`. 请帮助我无法弄清楚我做错了什么。页面上的其他任何地方都不存在 id 字段，null 可能来自哪里？

控制器`Post`方法：

```
@RequestMapping(method=RequestMethod.POST)
public String submit(@ModelAttribute(WebConstants.SURVEY_DETAIL) SurveyDetail surveyDetail, BindingResult result, HttpServletRequest request, HttpServletResponse response) throws IOException
{   

    if (LOGGER.isDebugEnabled())
        LOGGER.debug(surveyDetail.getId()  + " Year : " + surveyDetail.getSurveyYear());    

    if (LOGGER.isDebugEnabled())
        LOGGER.debug("REQUEST PARAMETER: " + request.getParameter("id"));

     return WebConstants.SELECT_STATES_VIEW_REDIRECT; 

} 
```

JSP表格：

```
<sf:form method="POST" name="form1" id="form1" modelAttribute="surveyDetail">  

    <table width="100%" border="0" cellpadding="0" cellspacing="0" id="workTable-full">       

        <tr>
            <td colspan="4">&nbsp;
                <sf:input type="hidden" path="surveyYear" id="year" cssClass="inputbox-survey" maxlength="100" size="10" />             
                <sf:input type="hidden" path="id" id="id" cssClass="inputbox-survey" maxlength="100" size="10" />   
            </td>
        </tr>   

        <tr>
            <td colspan="4"><input type="submit" class="small-short inner2" value="Enter Data" alt="Enter Data" title="Enter Data" id="cr8StateTable" name="cr8StateTable"/> <strong>- Click this button to start entering individual State data</strong>
            </td>
        </tr>

   </table> 
```

# java - 如何使用带有复选框的列表视图并在单击复选框时执行一些任务？

> ID：15940645
> 
> 赞同：1
> 
> 时间：2013-04-11T04:13:04.017
> 
> 标签：java, android, kindle-fire

如何在列表视图中使用复选框。在此我想在单击复选框时执行一些任务。我没有得到如何使用复选框选择特定的 id 或 listitem 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:11:25.367

试试这个，列出适配器：-

```
public class CheckBoxInListAdapter extends BaseAdapter{
    private Context context=null;
    private List<ArrayListObjects> searchArrayList=null;
    private LayoutInflater mInflater=null;
    private ViewHolder holder=new ViewHolder();

    public CheckBoxInListAdapter(Context context, List<ArrayListObjects> mData) 
    {
        this.context=context;
        searchArrayList = mData;
        mInflater = LayoutInflater.from(context);
    }
    public int getCount() 
    {
        return searchArrayList.size();
    }
    public Object getItem(int position) 
    {
        return searchArrayList.get(position);
    }
    public long getItemId(int position) 
    {
        return position;
    }
    public View getView(final int position, View convertView, ViewGroup parent)
    {
         if (convertView == null) 
         {
              convertView = mInflater.inflate(R.layout.sample_layout,null);
              holder=new ViewHolder();
              holder.textView = (TextView) convertView.findViewById(R.id.textView);
              holder.itemNormalChecked=(CheckBox)convertView.findViewById(R.id.checkBox);
              convertView.setTag(holder);
         } 
         else 
         {
             holder = (ViewHolder) convertView.getTag();
         }
         holder.textView.setText(searchArrayList.get(position).getItemName());
         holder.itemNormalChecked.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(searchArrayList.get(position).isItemChecked())
                {
                    searchArrayList.get(position).setItemChecked(false);
                }
                else
                {
                    searchArrayList.get(position).setItemChecked(true);
                }
            }
         });
         if(searchArrayList.get(position).isItemChecked())
         {
             holder.itemNormalChecked.setChecked(true);
         }
         else
         {
             holder.itemNormalChecked.setChecked(false);
         }
         return convertView;
     }
     static class ViewHolder
     {
         TextView textView=null;
         CheckBox itemNormalChecked=null;
     }
} 
```

布局：- sample_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <TextView 
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/checkBox"
        android:layout_height="wrap_content"/>
    <CheckBox
        android:id="@+id/checkBox"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_height="wrap_content"/>
</RelativeLayout> 
```

和 ArrayListObjects.java

```
public class ArrayListObjects {
    private boolean isItemChecked=false;
    private String itemName="null";
    public boolean isItemChecked() {
        return isItemChecked;
    }
    public void setItemChecked(boolean isItemChecked) {
        this.isItemChecked = isItemChecked;
    }
    public String getItemName() {
        return itemName;
    }
    public void setItemName(String itemName) {
        this.itemName = itemName;
    }
} 
```

然后在你的活动中，

```
ArrayList<ArrayListObjects> arrayListObjects=new ArrayList<ArrayListObjects>();
for(int i=0;i<15;i++)
{
    arrayListObjects.add((new ArrayListObjects()).setItemName("value -"+String.valueOf(position);
}
listView.setAdapter(new CheckBoxInListAdapter(activityName.this,arrayListObjects); 
```

在你想从 listview 中获取检查值之后，

```
for(int i=0;i<listView.getCount();i++)
{
    ArrayListObjects obj=(ArrayListObjects)listView.getItemAtPosition(i);
    if(obj.isItemChecked())
    {   
       Log.e("checked items - ",obj.getItemName());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:23:33.157

只需覆盖`getview`阵列适配器的方法。并用于`viewholder`获取您`checkbox`的自定义列表。

示例代码：

```
public View getView(int position, View convertView, ViewGroup parent) {

   ViewHolder holder = null;
   Log.v("ConvertView", String.valueOf(position));

   if (convertView == null) {
   LayoutInflater vi = (LayoutInflater)getSystemService(
     Context.LAYOUT_INFLATER_SERVICE);
   convertView = vi.inflate(R.layout.your_layout, null);

   holder = new ViewHolder();      
   holder.name = (CheckBox) convertView.findViewById(R.id.checkBox1);
   convertView.setTag(holder);

    holder.name.setOnClickListener( new View.OnClickListener() { 
     public void onClick(View v) { 
      CheckBox cb = (CheckBox) v ; 

      Toast.makeText(getApplicationContext(),
       "Clicked on Checkbox: " + cb.getText() +
       " is " + cb.isChecked(),
       Toast.LENGTH_LONG).show();

     } 
    }); 
   } 
```

简要教程参考[此](http://www.mysamplecode.com/2012/07/android-listview-checkbox-example.html)链接。

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:37:55.783

这可以通过使用 using 来完成`CompoundButton.OnCheckChangedListener`。您可以像这样内联设置此侦听器：

```
//Create a CheckBox object from your CheckBox id that is in the ListView in your xml layout file
CheckBox foo = (CheckBox) findViewById(R.id.foo);

foo.setOnCheckedChangedListener( new CompoundButton.OnCheckedChangedListener() {

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked = true){
            // perform some operations when checked
        } else {
            // perform some operations when unchecked
    }

}); 
```

可以在此处找到有关 Android Checkboxes 和 CompoundButtons（CheckBox 超类）的文档：

*   [复选框文档](http://developer.android.com/reference/android/widget/CheckBox.html)
*   [复合按钮文档](http://developer.android.com/reference/android/widget/CompoundButton.html)

Android 文档非常有用，有时很难对其进行加密并找到您想要的内容。希望这能回答你的问题！

# inner-join - 内连接 - 检查值是否存在于所有表中

> ID：15940646
> 
> 赞同：0
> 
> 时间：2013-04-11T04:13:07.107
> 
> 标签：inner-join

我最初在这个线程中发布了一个问题：
[mysql - 显示所有表中存在的值](https://stackoverflow.com/questions/15463902/mysql-display-the-values-that-exists-in-all-the-tables)

幸运的是，aleroot 提出了一个解决方案。我试过了，一切似乎都奏效了。但是，我添加了更多表格，但由于某种原因它不再起作用。

作为测试，我在所有 29 个表中导入了相同的值。但是，当我运行下面的查询时，它不会返回任何行。不知道我做错了什么。任何帮助将不胜感激。谢谢

```
SELECT @rownum:=0;
SELECT name FROM userinformation ui  WHERE EXISTS (

SELECT user_id FROM userinformation t1 
INNER JOIN table1 USING(user_id)
INNER JOIN table2 USING(user_id)
INNER JOIN table3 USING(user_id)
INNER JOIN table4 USING(user_id)
INNER JOIN table5 USING(user_id)
INNER JOIN table6 USING(user_id)
INNER JOIN table7 USING(user_id)
INNER JOIN table8 USING(user_id)
INNER JOIN table9 USING(user_id)
INNER JOIN table10 USING(user_id)
INNER JOIN table11 USING(user_id)
INNER JOIN table12 USING(user_id)
INNER JOIN table13 USING(user_id)
INNER JOIN table14 USING(user_id)
INNER JOIN table15 USING(user_id)
INNER JOIN table16 USING(user_id)
INNER JOIN table17 USING(user_id)
INNER JOIN table18 USING(user_id)
INNER JOIN table19 USING(user_id)
INNER JOIN table20 USING(user_id)
INNER JOIN table21 USING(user_id)
INNER JOIN table22 USING(user_id)
INNER JOIN table23 USING(user_id)
INNER JOIN table24 USING(user_id)
INNER JOIN table25 USING(user_id)
INNER JOIN table26 USING(user_id)
INNER JOIN table27 USING(user_id)
INNER JOIN table28 USING(user_id)
INNER JOIN table29 USING(user_id)
WHERE t1.user_id = ui.user_id
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:28:06.850

我想，当您使用连接时，系统必须获取所有记录，将它们连接在一起，然后应用过滤器（WHERE 子句）。因此，当您尝试从 29 个表中获取数据时，您实际上是在尝试为每个 user_id 获取 29*(cols_num) 个字段，并且有一个限制取决于您的数据库设置或实现。

尝试使用子查询或存在指令，例如

```
SELECT user_id FROM userinformation t1 WHERE 
EXISTS (SELECT user_id FROM table_1 t WHERE t.user_id=t1.user_id) AND
EXISTS (SELECT user_id FROM table_2 t WHERE t.user_id=t1.user_id) AND
SO ON... 
```

# groovy - 在 IntelliJ 中运行 Griffon 应用程序时出错，但它可以在命令提示符下运行

> ID：15940648
> 
> 赞同：0
> 
> 时间：2013-04-11T04:13:23.573
> 
> 标签：groovy, intellij-idea, griffon

[在Griffon in Action](http://www.manning.com/almiray/)书的第 3.6.1 段中有一个 mortageCalc 应用程序的练习。

环境：

*   赢 7 专业版，64 位
*   IntelliJ IDEA 12.1 版
*   Griffon-1.2.0 JDK 1.6

我有**MortgageCalView**：

```
package mortgagecal

application(title:'Mortgage Calculator', pack:true, locationByPlatform:true)
        {
            panel(border: emptyBorder(6)) {
                gridLayout(rows:4, columns:2, hgap:6, vgap:6)
                label('Principal:')
                textField(text: bind(target:model, 'principal',
                        value:'$200,000',
                        validator: model.validatePrincipal,
                        converter: model.convertPrincipal))
                label('Interest Rate:')
                textField(text: bind(target:model, 'monthlyRate',
                        value:'6.5%',
                        validator: model.validateRate,
                        converter: model.convertRate))
                label('Term:')
                textField(text: bind(target:model, 'months',
                        value:'30',
                        validator: model.validateTerm,
                        converter: model.convertTerm))
                label('Monthly Payment (P&I):')
                textField(editable:false,
                        text: bind(source: model, sourceProperty: 'payment',
                                sourceEvent: 'propertyChange',
                                converter: model.convertPayment))
            }
        } 
```

和**MortgageCalModel**：

```
package mortgagecal

import groovy.beans.Bindable
import java.text.NumberFormat
import java.text.DecimalFormat

@Bindable
class MortgageCalModel {
    float principal
    float monthlyRate
    float months
    float getPayment() {
        return principal * monthlyRate /
                (1-Math.pow(1/(1+monthlyRate),months))
    }
    private currencyFormat = NumberFormat.currencyInstance
    private percentFormat = new DecimalFormat('0.00%')
    def validatePrincipal = {
        try {
            float principal = currencyFormat.parse(it)
            return principal > 0
        } catch (Exception e) {
            return false
        }
    }
    def convertPrincipal = currencyFormat.&parse
    def validateRate = {
        try {
            float rate = percentFormat.parse(it)
            return rate > 0 && rate < 0.30
        } catch (Exception e) {
            return false
        }
    }
    def convertRate = {
        return percentFormat.parse(it) / 12
    }
    def validateTerm = {
        try {
            def term = Float.parseFloat(it)
            return term > 0 && term < 100
        } catch (Exception e) {
            return false
        }
    }
    def convertTerm = {
        return Float.parseFloat(it) * 12
    }
    def convertPayment = {
        return currencyFormat.format(it)
    }
} 
```

运行它时，我看到错误：

> 捕获：groovy.lang.MissingMethodException：没有方法签名：mortgagecal.MortgageCalView.application() 适用于参数类型：(java.util.LinkedHashMap,mortgagecal.MortgageCalView$_run_closure1) 值：[[title:Mortgage Calculator, pack: true, locationByPlatform:true], ...] groovy.lang.MissingMethodException: 没有方法签名：mortgagecal.MortgageCalView.application() 适用于参数类型：（java.util.LinkedHashMap，mortgagecal.MortgageCalView$_run_closure1）值： [[title:Mortgage Calculator, pack:true, locationByPlatform:true], ...] atmortgagecal.MortgageCalView.run(MortgageCalView.groovy:3)

但是，当我在命令提示符下运行时，它工作正常：

```
cd D:\work\griffon\mortgageCal> 
griffon run-app 
```

所以，我的 IntelliJ 出了点问题……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:55:04.090

*解决了！* 它给出错误的原因是因为我试图运行**MortgageCalView.groovy**。当我运行**Griffon:mortgageCal**时，它起作用了。:) 换句话说：我必须运行项目，而不是特定的脚本。

# mysql - 在mysql中检查用户是否存在

> ID：15940649
> 
> 赞同：-1
> 
> 时间：2013-04-11T04:13:44.400
> 
> 标签：mysql

是否有任何 mysql 命令来检查给定用户是否存在于 mysq.user 表中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:17:28.560

尝试

```
SELECT * FROM mysql.user WHERE User='username'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:08:35.793

你也可以试试 Count

```
Select count(*) from mysql.user WHERE User='username'; 
```

如果用户不存在，则返回 0，否则他们将返回用户存在的次数。如果存在 1 次，则给您 1，如果存在 2 次，则给您 2，依此类推... Hop 它对您有用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:19:20.420

是的，它是使用：

```
Select * From mysq.user WHERE user_id ='id '; 
```

您可以使用用户名或 id 来检查用户

# java - 阅读 Cookie Java Struts2

> ID：15940650
> 
> 赞同：1
> 
> 时间：2013-04-11T04:13:51.143
> 
> 标签：java, cookies, struts2

我正在使用 struts 代码读取 cookie 值，但它没有返回正确的值，因为它包含`"=="`. 例如，我的 cookie 值`"Hw=="`读取为“Hw”。似乎`==`不是 cookie 规范中的特殊字符，但它仍然存在问题。

我的代码如下：

```
public static String getCookie(HttpServletRequest request, String name) {
    String value = null;

    for (Cookie c : request.getCookies()) {
        if (c.getName().equals(name)) {
            value = c.getValue();
        }
    }

    return value;
} 
```

有谁知道我在这里做错了什么？

# jquery - 当 content-type 设置为 application/json 时 JSON.parse() 不起作用

> ID：15940658
> 
> 赞同：4
> 
> 时间：2013-04-11T04:14:55.033
> 
> 标签：jquery, ajax, json, content-type

在尝试解析从服务器返回的 JSON 字符串时，我遇到了一个 jquery（错误/错误）：

```
Timestamp: 10/04/2013 21:05:12
Error: SyntaxError: JSON.parse: unexpected character
Source File: http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
Line: 3 
```

我注意到当标头 Content-type 未设置为“application/json”时 JSON.parse 工作正常，但如果 Content-type 设置为 json 则不起作用。知道为什么会发生这种情况吗？

**不工作代码：**

**控制器代码：**

```
 $response = array('data' => array('msg' => 'Form did not validate'), 'response_handler_fn' => 'sign_up_response_handler_fn');
  $this->getResponse()->setHttpHeader('Content-type','application/json');
  return $this->renderText(json_encode($response)); 
```

**Javascript：**

```
// ...
success: function( response ) {
var responseData = $.parseJSON(response);
} 
```

**标头**

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  Keep-Alive
Content-Length  92
Content-Type    application/json
Date    Wed, 10 Apr 2013 20:05:12 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive  timeout=15, max=100
Pragma  no-cache
Server  Apache
X-Powered-By    PHP/5.3.5 
```

**回复：**

```
{"data":{"msg":"Form did not validate"},"response_handler_fn":"sign_up_response_handler_fn"} 
```

**有效的代码**

**控制器：**

```
 $response = array('data' => array('msg' => 'Form did not validate'), 'response_handler_fn' => 'sign_up_response_handler_fn');
  return $this->renderText(json_encode($response)); 
```

Javascript 与正常工作的相同

标题：

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  Keep-Alive
Content-Length  92
Content-Type    text/html; charset=utf-8
Date    Wed, 10 Apr 2013 20:09:04 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive  timeout=15, max=100
Pragma  no-cache
Server  Apache
X-Powered-By    PHP/5.3.5 
```

回复：

```
{"data":{"msg":"Form did not validate"},"response_handler_fn":"sign_up_response_handler_fn"} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T04:30:05.060

当您不指定调用`dataType`选项时`$.ajax`，jQuery 会尝试根据响应中`Content-Type`返回的标头解析响应。

因此，当您没有为 指定任何内容`dataType`，并且没有为`Content-Type`标头指定任何特殊内容时，将`response`被解析为文本。

当您没有为, 和标头指定`dataType`“json”时，将被解析为 JSON（Javascript 对象文字）。`Content-Type``response`

当您指定`dataType`为“json”时，无论`Content-Type`标头是什么，都将`response`被解析为 JSON（Javascript 对象文字）。

尝试将对象文字传递给`JSON.parse`将失败，因为它只接受字符串。

因此，您需要确定您正在设置的内容以及您尝试调用的内容 ( `JSON.parse`)，并使用正确的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:24:01.643

如果 Content-type 设置为 json 并将响应作为 json 传递，那么您需要设置

`dataType:"json"`

在你的 ajax 中。否则它不会工作。我猜它的问题。如果它也没有显示你的 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T16:48:27.117

@Ian 答案是完整的，但乍一看对我来说有点晦涩难懂。
简单来说：如果你在 request( `dataType: "JSON"`) 和 response( `'Content-type','application/json'`) 中都指定了 JSON，那么 response 已经是一个 JSON 对象，不需要解析它。

而不是
`var responseData = $.parseJSON(response);`
，只是：
`var responseData = response`。

# c# - 无法通过 C# 在 firebird 中运行多个插入记录查询

> ID：15940659
> 
> 赞同：0
> 
> 时间：2013-04-11T04:14:59.940
> 
> 标签：c#, database, firebird

我在 C# 中生成多个插入记录查询并尝试在 FireBird 中执行。

当我在 FlameRobin 上运行它时，它运行良好。但是当我通过 C# 运行它时，它会抛出异常。

```
SET TERM ^ ; INSERT INTO COUNTRY1 SELECT '2', 'two ' FROM RDB$DATABASE UNION ALL SELECT '4', 'four' FROM RDB$DATABASE UNION ALL SELECT '5', 'five' FROM RDB$DATABASE; ^ SET TERM ; ^ 
```

C# 代码中的异常是

> {"动态 SQL 错误\r\nSQL 错误代码 = -104\r\n令牌未知 - 第 1 行，字符 5\r\nTERM"}

C#代码是

```
string sQuery = "SET TERM ^ ; INSERT INTO COUNTRY1 SELECT '2', 'two ' FROM RDB$DATABASE UNION ALL SELECT '4', 'four' FROM RDB$DATABASE UNION ALL SELECT '5', 'five' FROM RDB$DATABASE; ^ SET TERM ; ^ ";
SqlHelper.ExecuteNonQuery(SQLHelp.Connectionstring, CommandType.Text, sQuery); 
```

知道我在这里做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:34:22.610

您包含的[`set term`](http://www.firebirdfaq.org/faq78/)语句不是 Firebird SQL 语言的一部分，而是一种*解释器配置指令*，首先在**isql**中引入，它是 Firebird 的命令行客户端。

以这种方式查看您的脚本：

```
SET TERM ^ ; 

INSERT INTO COUNTRY1 
  SELECT '2', 'two ' FROM RDB$DATABASE 
  UNION ALL SELECT '4', 'four' FROM RDB$DATABASE 
  UNION ALL SELECT '5', 'five' FROM RDB$DATABASE; ^ 

SET TERM ; ^ 
```

引擎不知道也无法处理这些`set term`语句。

FlameRobin 和其他客户端`set term`为兼容性添加了对语句的支持：允许运行为 isql 编写的 SQL 脚本，或者因为它们缺少完整的 SQL 解析器，并且当脚本包含分号时仍需要正确识别语句的结束位置。但是所有这些客户端，一旦在脚本中分隔语句，就不会将其发送`set term`到引擎，只是忽略它。

您必须这样做：删除`set term`语句并发送您拥有的唯一其他语句，如下所示：

```
INSERT INTO COUNTRY1 
  SELECT '2', 'two ' FROM RDB$DATABASE 
  UNION ALL SELECT '4', 'four' FROM RDB$DATABASE 
  UNION ALL SELECT '5', 'five' FROM RDB$DATABASE 
```

请注意，您还必须删除`;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T06:34:02.843

您的查询不符合 Firebird 语法。驱动程序一次只能执行一条语句（注意 an`EXECUTE BLOCK`被认为是一条语句）。您不应该使用`SET TERM`，它是 ISQL 工具（以及其他一些查询工具，如 FlameRobin）的产物，实际上并不是 Firebird SQL 语言的一部分。

您也不应该包含`;`在查询中。这些仅在 1）PSQL（存储过程、触发器和内部`EXECUTE BLOCK`）和 2）再次在 ISQL 等工具中有效，以分隔（结束）语句。

因此，单独使用以下查询就足够了：

```
INSERT INTO COUNTRY1 SELECT '2', 'two ' FROM RDB$DATABASE UNION ALL SELECT '4', 'four' FROM RDB$DATABASE UNION ALL SELECT '5', 'five' FROM RDB$DATABASE 
```

**编辑**

正如我所评论的，`UNION`当与`INSERT ... SELECT`.

使用子选择可能会起作用：

```
INSERT INTO COUNTRY1 
  SELECT column1, column2 FROM (
     SELECT '2' AS column1, 'two ' AS column2 FROM RDB$DATABASE 
     UNION ALL SELECT '4', 'four' FROM RDB$DATABASE 
     UNION ALL SELECT '5', 'five' FROM RDB$DATABASE
  ) 
```

**编辑 2**

我刚刚使用下面的代码对其进行了测试，它可以工作：插入了预期的行：

```
static void Main(string[] args)
{
    var constrBuilder = new FbConnectionStringBuilder();
    constrBuilder.DataSource = "localhost";
    constrBuilder.Database = @"D:\data\db\testdatabase.fdb";
    constrBuilder.UserID = "sysdba";
    constrBuilder.Password = "masterkey";

    string constr = constrBuilder.ToString();

    using (var con = new FbConnection(constr))
    {
        con.Open();
        using (var trans = con.BeginTransaction())
        {
            var cmd = new FbCommand();
            cmd.CommandText = "INSERT INTO COUNTRY1 SELECT '2', 'two ' FROM RDB$DATABASE UNION ALL SELECT '4', 'four' FROM RDB$DATABASE UNION ALL SELECT '5', 'five' FROM RDB$DATABASE";
            cmd.Connection = con;
            cmd.Transaction = trans;

            cmd.ExecuteNonQuery();
            trans.Commit();
        }
    }
} 
```

# javascript - Imgur API 错误，如何使用 XHR 上传

> ID：15940662
> 
> 赞同：3
> 
> 时间：2013-04-11T04:15:24.340
> 
> 标签：javascript, jquery, xmlhttprequest, imgur

```
 var fd = new FormData();
    fd.append("image", file); // Append the file
    fd.append("key", API_KEY);
    // Create the XHR (Cross-Domain XHR FTW!!!)
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "http://api.imgur.com/2/upload.json"); // Boooom!
    xhr.onload = function() {
        console.log(JSON.stringify(xhr.responseText));
        alert("Anything?");
        var img_url = JSON.parse(xhr.responseText).upload.links.original;
        console.log("Image url of the uploaded image" + img_url); 
```

上面的代码是我用来通过phonegap上传图片文件的代码。但后来我猜代码已经过时并且不能使用最新的 imgur API。它由 OAuth 支持。我可以知道如何修复它以上传图像吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:05:51.427

你是对的......代码已经过时了，所以我修复的方法是使用以下说明匿名上传图片：

1.-在`FormData`你只需要附加图像，所以不应该附加密钥

2.-您必须发送带有您的客户ID的标头，我假设您已经拥有...我使用以下代码`xhr.setRequestHeader('Authorization', 'Client-ID FOO');` 完成了根据文档，它必须在打开之后`XMLHttpRequest`但在发送请求之前。

3.-当您尝试获取链接时，您必须解析 JSON 才能读取信息，链接来自`data`具有名称的节点，`link`因此解析将是：`var link = JSON.parse(xhr.responseText).data.link;`

4.- 您必须使用 OAuth 2.0 的新稳定 API，因此您上传图像的行应如下所示：`xhr.open("POST", "https://api.imgur.com/3/image.json");`... 如您所见，它只是更改数字，即版本，而不是`upload`它使用`image`它必须是`https`......供您参考，这是第一个建议的方法，另一种建议的方法，也有效，如下：`xhr.open("POST", "https://api.imgur.com/3/upload.json");`

对于您的代码，我还假设您使用了 Drag'n Drop 的示例，因此该函数应如下所示：

```
function upload(file) {

    /* Is the file an image? */
    if (!file || !file.type.match(/image.*/)) return;

    /* It is! */
    document.body.className = "uploading";

    /* Lets build a FormData object*/
    var fd = new FormData(); 
    fd.append("image", file); // Append the file
    var xhr = new XMLHttpRequest(); // Create the XHR (Cross-Domain XHR FTW!!!) Thank you sooooo much imgur.com
    xhr.open("POST", "https://api.imgur.com/3/image.json"); // Boooom!
    xhr.onload = function() {
    // Big win!    
        var link = JSON.parse(xhr.responseText).data.link;
        document.querySelector("#link").href = link;
        document.querySelector("#link").innerHTML = link;

        document.body.className = "uploaded";
    }
    // Ok, I don't handle the errors. An exercice for the reader.
    xhr.setRequestHeader('Authorization', 'Client-ID FOO');
    /* And now, we send the formdata */
    xhr.send(fd);
} 
```

我鼓励您看一下[文档](https://api.imgur.com/)，它非常友好，可以帮助您制作功能和东西...正如我所说的这是匿名上传，如果您想与用户一起上传图片，您必须先进行身份验证使用用户和密码，使用令牌并刷新它们，我没有这样做，但是一旦你了解了它的工作原理，它应该不会太复杂......

希望能帮助到你！！

# opencv - 通过 SVD 从基本矩阵中提取翻译的正确方法

> ID：15940663
> 
> 赞同：9
> 
> 时间：2013-04-11T04:15:27.180
> 
> 标签：opencv, emgucv, svd, opencvsharp

我校准了我的相机并找到了内在参数（K）。我还计算了基本矩阵（F）。

现在 E= K_T* F * K 。到目前为止，一切都很好。

现在我们将基本矩阵 (E) 传递给 SVD，以使用分解值 (U,W,V) 来提取旋转和平移：

```
 essentialMatrix = K.Transpose().Mul(fund).Mul(K);
 CvInvoke.cvSVD(essentialMatrix, wMatrix, uMatrix, vMatrix, Emgu.CV.CvEnum.SVD_TYPE.CV_SVD_DEFAULT); 
```

** 问题）在这一点上，提出了两种方法，我很困惑哪一种方法真正给出了正确的答案——专门用于翻译：

首先方法[在这里输入链接描述](http://www.eecis.udel.edu/~cer/arv/readings/old_mkss.pdf)作者建议计算R，T如下：

![在此处输入图像描述](https://i.stack.imgur.com/oaTuk.png)

但在第二种方法 [ [http://isit.u-clermont1.fr/~ab/Classes/DIKU-3DCV2/Handouts/Lecture16.pdf]](http://isit.u-clermont1.fr/~ab/Classes/DIKU-3DCV2/Handouts/Lecture16.pdf])中，作者为 T 提供了另一个公式，即 +U ， -U 如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/crBMt.png)

我正在使用 openCv 库在 C# .Net 上实现它。有人知道哪个翻译公式是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-19T18:50:07.813

第一个解决方案显示了向量 t 的叉积的矩阵表示（因此第一个解决方案 = [t]x ），而第二个解决方案仅显示了平移向量 t （[https://en.wikipedia.org/wiki/Essential_matrix](https://en.wikipedia.org/wiki/Essential_matrix)） .

[t]x 的定义为：

![在此处输入图像描述](https://i.stack.imgur.com/H0faH.png)

（来自[http://gandalf-library.sourceforge.net/tutorial/report/img148.png](http://gandalf-library.sourceforge.net/tutorial/report/img148.png)）

# android - 如何在不使用 adb 命令的情况下使用 adb socket 安装应用程序或将文件放入移动设备？

> ID：15940664
> 
> 赞同：0
> 
> 时间：2013-04-11T04:15:30.550
> 
> 标签：android

如何使用 adb 在手机上安装 apk 或将内容推送到手机的文件系统？

我可以通过包名称卸载应用程序，如下所示：

```
CString cmd;
cmd.AppendFormat(_T("shell:pm uninstall %s"), PackageName );
adb_write(adb_s,(LPCTSTR)cmd); // adb_s the socket connect the server 
```

# python - VPython 继承

> ID：15940665
> 
> 赞同：3
> 
> 时间：2013-04-11T04:15:49.473
> 
> 标签：python, object, inheritance, vpython

我目前正在尝试创建一个类，其唯一目的是快速创建一个 VPython 对象并将附加值附加到该对象。VPython 会自动创建一个具有位置和尺寸等值的对象。但是，我还想添加变量，例如材料的物理特性和动量。所以这是我的解决方案：

```
class Bsphere(physicsobject):

     def build(self):

         sphere(pos=ObjPosition, radius=Rad,color=color.red) 
```

物理对象看起来像这样：

```
class physicsobject:

    def __init__(self):

         self.momentum=Momentum 
```

本质上，我希望它在添加新变量的同时仍保留 VPython sphere() 对象的原始属性。这实际上最初是有效的，对象渲染并添加了变量。但是现在，我无法更改 VPython 对象。如果我输入：

```
Sphereobj.pos=(1,2,3) 
```

位置将作为变量更新，但是，VPython 不会更新渲染的对象。现在对象和渲染对象之间存在断开连接。有没有办法在创建新对象时继承 VPython 对象的渲染方面？我不能简单地使用

```
class Bsphere(sphere(pos=ObjPosition, radius=Rad,color=color.red)):

     self.momentum=Momentum 
```

并且没有太多关于 VPython 的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:29:13.680

我不使用 VPython。但是，从外观上看，您继承的是`physicsobject`and not的属性`sphere`。我的建议是试试这个：

```
# Inherit from sphere instead
class Bsphere(sphere):
     # If you want to inherit init, don't overwrite init here
     # Hence, you can create by using
     # Bpshere(pos=ObjPosition, radius=Rad,color=color.red)
     def build(self, material, momentum):
         self.momentum = momentum
         self.material = material 
```

然后你可以使用：

```
 myobj = Bsphere(pos=(0,0,0), radius=Rad,color=color.red)
 myobj.pos(1,2,3) 
```

但是，我建议在您的子类中使用`overwrite`该`__init__`方法，前提是您知道要在原始`sphere`构造中声明的所有参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T11:46:20.657

```
from visual import *
class Physikobject(sphere):
    def __init__(self):
        sphere.__init__(self, pos = (0,0,0), color=(1,1,1))
        self.otherProperties = 0 
```

我认为这个有帮助 - 这个问题可能已经过时了，因为人们可能还在考虑它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T14:43:40.887

VPython 的美妙之处在于您不需要这样做。

VPython 为您完成！

这就是您需要做的所有事情：

```
variable_name = sphere()#you can add pos and radius and other things to this if you want
variable_name.momentum = something 
```

您可以轻松地将其插入到函数中：

```
objectstuffs = []
def create_object(pos,radius,color,momentum):
    global objectstuffs
    objectstuffs.append(sphere(pos=pos,radius=radius,color=color))
    objectstuffs[len(objectstuffs)-1].momentum = momentum 
```

该功能绝对不是在每种情况下都最好使用，但您可以轻松编辑该功能，这只是为了举例。

玩得开心！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-13T00:00:13.790

我是一个大的 vpython 用户，我从来没有使用过这样的东西，但我知道 vpython 已经有你想要实现的功能。
================================示例================== ===================

```
 from visual import *
 myball = sphere()
 myball.weight = 50
 print (myball.weight) 
```

此代码创建一个球，然后初始化一个名为*weight*的变量，然后显示它。

# wpf - WPF：如何在弹出窗口中自动调整 WebBrowser 的大小？

> ID：15940671
> 
> 赞同：2
> 
> 时间：2013-04-11T04:16:11.647
> 
> 标签：wpf, popup, browser, height, autosize

我有`Popup`一个`WebBrowser`内部（见下面的代码）。网络浏览器有`MaxWidth = "800"`. 我想在加载网站后将 WebBrowser 的高度自动调整为其内容高度，因此它不需要垂直 ScrollBar。

我试过 set `Height = "Auto"`or `MaxHeight = "5000"`，但我没有得到正确的结果。

你能帮我怎么做吗？非常感谢！

```
 <Popup Name="popup1" VerticalOffset="3">
        <Border BorderThickness="1">
            <DockPanel>
                <ScrollViewer MaxHeight="700" VerticalScrollBarVisibility="Auto">
                    <WebBrowser Name="wb1" MaxWidth="800"/>
                </ScrollViewer>
            </DockPanel>
        </Border>
    </Popup> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T05:15:41.733

这是解决方案：

```
<Popup x:Name="Popup" Width="800">
    <Border BorderThickness="1">
        <WebBrowser
            x:Name="WebBrowser"
            LoadCompleted="WebBrowser_OnLoadCompleted"
            ... />
    </Border>
</Popup> 
```

处理程序：

```
private void WebBrowser_OnLoadCompleted(object sender, NavigationEventArgs e) {
    this.Popup.Height = (int) (this.WebBrowser.Document as dynamic).body.scrollHeight + 20;
} 
```

# android - 当接收者接受我的拨 出电话时如何检测事件？

> ID：15940677
> 
> 赞同：0
> 
> 时间：2013-04-11T04:16:48.123
> 
> 标签：android

我想知道Android如何检测接收者何时接听我的电话？这次 TelephoneManager 捕获的是哪个状态？

# sql-server - Excel VBA 到 SQL Server ADODB 连接 - 提示输入用户 ID 和密码

> ID：15940680
> 
> 赞同：3
> 
> 时间：2013-04-11T04:17:31.417
> 
> 标签：sql-server, excel, vba

Excel VBA

以下 ADO DB 连接字符串起作用并将数据从数据库提取到 Excel

```
Const rspADO As String = "Provider=SQLOLEDB.1;" & _
"Persist Security Info=False;" & _
"Initial Catalog=MyDatabase;" & _
"Data Source=118.aaa.yy.xx;" & _
"User ID=Username;Password=password;" 
```

如何使用数据连接提示（而不是 Excel 中的输入框或用户表单）提示用户输入用户名和密码（在运行时）？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:59:28.423

如果你使用`ado db.connection` 你可以根据这个[vba express post](http://www.vbaexpress.com/forum/showpost.php?p=260530&postcount=3)，代码提取：

> Dim dbConnectStr As String
> Set con = New ADODB.Connection
> 
> dbConnectStr = "Provider=msdaora;Data Source=" & "Oracle_Database_Name;"
> 
> con.ConnectionString = dbConnectStr
> con.Properties("Prompt") = adPromptAlways
> con.Open dbConnectStr 'ConnectionString

我还发现您**可能**需要将`Prompt`属性设置为`adPromptComplete`.

# wordpress - 自定义页面中的用户分页

> ID：15940681
> 
> 赞同：0
> 
> 时间：2013-04-11T04:17:38.980
> 
> 标签：wordpress, pagination

我有一个页面来显示所有用户。用户类型是作者。显示所有代理。

```
 $args = array(
                    'role' => 's2member_level2', 
                        'meta_query' => array(
                            array(
                                'key' => $filter,
                                'value' => $_GET['filter'],
                                'compare' => 'LIKE'
                            )
                        )
                    );
                }
                  $users = get_users($args);
                  if ($users) {
                    foreach ($users as $user) {
                      $user_profile_data  = get_user_meta($user->ID,'wp_s2member_custom_fields',true);
                      //print_r($user_profile_data);
                      echo '<div class="user_data" >';
                      echo '<a href="'.site_url().'/author/'.$user->user_login.'">'.user_avatar_get_avatar($user_info->ID,'110').'</a>';
                      echo '<div class="user-info">';
                      //print_r($users);
                      echo '<h6>'.'<a href="'.site_url().'/author/'.$user->user_login.'">'.$user->display_name.'</a></h6>';
                      if ($user_profile_data[contact_number])
                      echo '<p> call-'.$user_profile_data[contact_number].'</p>';
                      else
                      echo '<p> Phone number not specified.</p>';
                      echo '<p>'.$user->user_email.'</p>';
                      echo '</div>';
                      echo '<div class="agent_specify" >';
                      $agent_specify = $user_profile_data[posting_preferance];
                      echo '<p>Agent Speciality :</p>';
                      if ($agent_specify) {
                      echo '<ul>';
                      foreach ($agent_specify as $specification){
                          echo '<li>'.$specification.'</li>';
                      }
                      echo '</ul>';
                      }
                      else {
                      echo '<p style="font-weight: normal;">Not specified</p>';
                      }
                      echo '</div>';
                      echo '<a href="'.site_url().'/author/'.$user->user_login.'/#contact">contact &raquo;</a>';
                      echo '</div>';
                    }
                  }
                  else {
                    echo '<h4>No agents found.</h4>';
                  }
              ?>
            </div> 
```

我可以找到用户列表，但我想在这里分页，因为我在页面中有很多用户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T05:13:57.783

好的，您可以使用 WP_User_Query() 函数进行此检查，我为您做了一些工作。

```
 $no=5;// total no of author to display

    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    if($paged==1){
  $offset=0;  
}
else {
   $offset= ($paged-1)*$no;
}
    $args = array(
                        'role' => 's2member_level2',
        'number' => $no, 'offset' => $offset,
                            'meta_query' => array(
                                array(
                                    'key' => $filter,
                                    'value' => $_GET['filter'],
                                    'compare' => 'LIKE'
                                )
                            ));

    $user_query = new WP_User_Query( $args );
    if ( !empty( $user_query->results ) ) {
        foreach ( $user_query->results as $user ) {
               ..... ur code goes here
        }
    }
else {
 echo '<h4>No agents found.</h4>';
} 
```

对于分页，它取决于您的结构如何，如果它的永久链接是帖子名称，那么您可以使用分页代码作为

```
$total_user = $user_query->total_users;  
              $total_pages=ceil($total_user/$no);

              echo paginate_links(array(  
                  'base' => get_pagenum_link(1) . '%_%',  
                  'format' => '?paged=%#%',  
                  'current' => $paged,  
                  'total' => $total_pages,  
                  'prev_text' => 'Previous',  
                  'next_text' => 'Next'  
                )); 
```

希望这对你有用:)

# html - 如何使用位置：绝对滚动

> ID：15940686
> 
> 赞同：0
> 
> 时间：2013-04-11T04:17:53.073
> 
> 标签：html, css

我的 HTML 中有以下带有 CSS 的 div。我已将 div 固定到页面底部。当浏览器尺寸变小时，我将我的 html 内容设计为响应式和重新排列。

```
<div id="button-section">
 <!-- Section for function buttons -->
  <div id="function-buttons">
     <div class="fn-button">
     <!-- Function button -->
       <span>My Current Checks</span>
     </div>
  </div>
</div>

#button-section{
width: 100%;
height: 150px;
position: fixed;
bottom: 0;
background-color: rgb(229, 229, 255);
min-width:1000px;
}

#function-buttons{
width: 70%;
height: 100%;
float:left;
min-width: 870px;
} 
```

当我减小浏览器的大小时，它只会生成水平滚动条来显示流畅的内容！所以固定内容在浏览器中显示一半！我在下图中显示了该场景。如何让浏览器接受固定内容并使用滚动条显示确切数量。

我尝试将其置于相对模式，但它不起作用！

![无需滚动](https://i.stack.imgur.com/370ux.png.)

![在此处输入图像描述](https://i.stack.imgur.com/0aw3Z.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:27:00.277

我不确定我是否完全理解问题所在——也许滚动条是问题所在？如果是这种情况，那么您可能希望将最小宽度值减小到明显小于 1000 像素的值。通过设置 min-width，您声明此部分不应小于 x。在这种情况下，x = 1000px。这就是为什么你得到一个滚动条。

您需要删除启动器的最小宽度值。除此之外，您还必须评估确定浏览器宽度的选项，可能使用 jQuery 类似以下内容：

```
<script type="text/javascript">
$(document).ready(function(e) {
    var windowWidth = $(document).width();
    $('#button-section').css('min-width', windowWidth+'px');
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:39:11.890

首先，位置“固定”或“绝对”不适用于滚动。一旦将其设为 Fixed 或 Absolute，子节点就不再局限于其父相对关系，并且由于位置固定而被移出父流。如果您希望它滚动，则使位置：相对于父级。

问候，拉维

# database - 实现缓存的最佳实践

> ID：15940688
> 
> 赞同：2
> 
> 时间：2013-04-11T04:18:12.460
> 
> 标签：database, caching

我必须为处理不同长度的字符串（几个字节到几千字节）的函数实现缓存。我的意图是为此使用数据库 - 基本上是一个带有输入和输出列的大表以及输入列上的索引。缓存将尝试在输入列中查找字符串并获取输出列——这可能是可以想象的最简单的数据库应用程序之一。

什么数据库最适合这个应用程序？像mysql这样的全功能数据库还是像sqlite3这样的简单数据库？或者有没有更好的方法不使用数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:23:11.927

文档存储就是**为此**而生的。对于这个特定问题，我强烈推荐 Redis。它是一个“键值”存储，这意味着它没有关系，它没有模式，它所做的只是将键映射到值。这听起来正是您所需要的。

替代方案是 MongoDB 和 CouchDB。环顾四周，看看最适合您的套房。不过，我的建议仍然是 Redis。

阅读： http: [//kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:53:32.190

Joe 对通常用于缓存的数据存储有一些很好的建议。我会说 Redis、Couchbase（虽然不是 CouchDB——根据我的经验，它相当频繁地进入磁盘/没有那么快）和普通的 Memcached。

MongoDB 可用于缓存，但我认为它不像 Redis 那样针对纯缓存进行调整。Mongo 可以相当多地击中磁盘。

此外，我强烈建议使用生存时间 (TTL) 作为您的主要缓存策略。只需给一个值过期的时间，然后再重新填充它。主动在缓存中找到某些数据的所有实例并刷新它是一个非常困难的问题。

# android - 导出时在 Android 中转换为 Dalvik 格式失败，出现错误 1 (adt 21)

> ID：15940692
> 
> 赞同：13
> 
> 时间：2013-04-11T04:18:41.823
> 
> 标签：android

我知道这个问题的一种形式就在那里，但我找不到任何适合我的场景的东西，所以就在这里。

在模拟器中测试时，我的应用程序可以完美编译和运行，但是当我尝试导出已签名的 apk 时，我得到了`Conversion to Dalvik format failed with error 1`. Eclipse 错误日志显示此堆栈跟踪：

```
com.android.ide.eclipse.adt.internal.build.DexException: Conversion to Dalvik format failed with error 1
at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:751)
at com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(ExportHelper.java:269)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.doExport(ExportWizard.java:296)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.access$0(ExportWizard.java:233)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard$1.run(ExportWizard.java:218)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

我没有其他人似乎有的命名冲突（至少它在错误中没有这样说），而且我很难理解它为什么在模拟器中运行，但我无法导出。

顺便说一句，我也没有使用 ProGuard。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-18T21:44:46.717

看起来 ADT 21 在你的 bin 中添加了一个名为 dexedLibs 的文件夹，它应该通过将 jar 和库放入预编译的 dex 代码中来加速部署。我在那里有两个版本的支持库，所以我删除了文件夹中的所有文件并重新构建它并且它工作。如果我尝试使用其中的任何文件进行构建，那么构建会失败，所以我必须在每次导出之前删除它们。我正在使用 ActionBar Sherlock，这可能与 dexedLibs 冲突，因为除非文件夹最初为空，否则它不会出现在那里。

编辑：当这个问题第一次出现时，我一直在使用[ActionBarSherlock](http://actionbarsherlock.com/)，但最近切换到了[ActionBarCompat](http://android-developers.blogspot.com/2013/08/actionbarcompat-and-io-2013-app-source.html)。自从切换后，我不再需要在导出时删除 dexedLibs 文件夹。看起来也许 ActionBarSherlock 是罪魁祸首，但我不能确定。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-13T06:21:04.767

转到项目并取消选择自动构建。然后清理项目并全部构建。为我导出签名的应用程序包工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-02T21:48:40.123

经过多次尝试，我设法找出了发生此问题的原因。一般来说，这是由 ProGuard 尤其是它的优化引起的。至少在我的情况下，我有 4 个出现此错误的损坏项目，但在我禁用 ProGuard 优化后，所有项目都正确构建。因此，在您的 ProGuard 配置中注释 -optimizations 和 -optimizationpasses 选项并添加 -dontoptimize

```
# -optimizations ...
# -optimizationpasses 5

-dontoptimize 
```

希望这可以帮助。

# shell - qsub 路径 shell 脚本

> ID：15940700
> 
> 赞同：0
> 
> 时间：2013-04-11T04:19:27.030
> 
> 标签：shell, path, qsub

我有两个关于路径的问题。

第一个问题与“qsub”有关

这是我当前的文件夹

```
/home/mtrnn/rnn_class_EE837/src/rnn-learn/result/lissa_1_rec/ 
```

在我使用的这个文件夹中

```
qsub -q public_~~~ ./start.sh 
```

它运作良好。问题是每当我使用服务器时，我需要在下面的 shell 脚本（start.sh）中更改路径当我在不同的文件夹中使用时，每次我需要在 start.sh 中更改下面的代码

```
cd current_path 
```

例如，

```
cd /home/mtrnn/rnn_class_EE837/src/rnn-learn/result/lissa_1_rec/ 
```

这太麻烦了，而且经常出现路径错误。

我可以删除吗

```
cd ~~~~ 
```

通过使用“密码”之类的？

我的意思是，使用“pwd”读取当前路径并将此结果作为变量放入 shell 脚本中。有可能吗？我认为，如果我可以将“pwd”的结果作为变量并将其作为 start.sh 的变量，我可以删除该部分。但是，我不知道该怎么做。

这是 start.sh

```
#!/bin/sh

cd /home/mtrnn/rnn_class_EE837/src/rnn-learn/result/lissa_1_rec/

   if [ "$1" = clean ]; then
   rm -f *.log *.dat target.txt *.scale *.restore
   exit
fi

config_file=test_config.txt
connection_file=connection.txt
if [ -f $connection_file ]; then
    cp $config_file ."$config_file".tmp
    gen_config.sh $connection_file >> ."$config_file".tmp
else
    cp $config_file ."$config_file".tmp
fi

../../rnn-learn -i rnn.dat -c ."$config_file".tmp ./target*.txt

#${path2}rnn-generate -n 2000 rnn.dat > orbit.log

rm ."$config_file".tmp 
```

第二个问题是，

```
#${path2}rnn-generate -n 2000 rnn.dat > orbit.log 
```

在上面的代码中，有 ${path2}

我认为对于 start.sh，${path2} 总是指向 rnn-generate 所在的文件夹。

我能怎么做？如果我知道方法，我想改变

```
../../rnn-learn -i rnn.dat -c ."$config_file".tmp ./target*.txt 
```

至

```
${path3}rnn-learn ~~~ 
```

啊，现在我用的是服务器，我不是管理员。

所以，我认为，我无法更改 /etc/bashrc 或 /etc/environment。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T00:13:40.683

`qsub -cwd "command"`从启动它的同一工作目录运行命令。

假设映射层设置正确

# java - 在 Jar 文件中加载图像 java.lang.RuntimeException：找不到资源

> ID：15940702
> 
> 赞同：0
> 
> 时间：2013-04-11T04:19:52.303
> 
> 标签：java, image, jar, lwjgl

我正在使用 slick 和 lwjgl 制作一个简单的游戏。我让它在eclipse中运行。我确信我的图像在正确的位置。这是我的 jar 文件的样子： http: [//puu.sh/2xS3v](http://puu.sh/2xS3v) 但我不断收到此错误：[http](http://puu.sh/2xS4v) ://puu.sh/2xS4v 我所有的图像都位于 jar 内的 res 文件夹中。这是我加载图像的方式：[http](http://pastebin.com/huBDRM2W) ://pastebin.com/huBDRM2W感谢您提供任何帮助：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:24:19.480

使用以下代码

```
ClassLoader cldr = this.getClass().getClassLoader();
java.net.URL imageURL   = cldr.getResource("/PackageB/PackageBa/PackageBaa/MyImage.png");
ImageIcon aceOfDiamonds = new ImageIcon(imageURL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:25:23.990

不确定这是否适用于您的情况，因为没有提供代码，但是从个人经验来看，当您的代码在其他地方出现错误阻止它构建时，就会发生类似的错误，因此它不知道该资源是否存在，因为它没有挂号的。

你确定它在正确的地方吗？错误是说它找不到它，所以它可能在错误的路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T05:43:23.710

我将图像放入一个包中，然后再次将其导出为 jar。这似乎奏效了。

# java - 字符串方程错误检查器不起作用

> ID：15940704
> 
> 赞同：0
> 
> 时间：2013-04-11T04:20:01.830
> 
> 标签：java, error-handling, calculator

我有一种方法可以检查写出的方程式是否正确。

此方法检查：

*   多括号
*   多余的运算符
*   两位数
*   q的
*   以及字符串中的任何字符，而不是这些字符：

.

```
private static final String operators = "-+/*%_";
private static final String operands = "0123456789x"; 
```

它工作正常，但后来我以模块化方式添加到运算符中，现在每当我的代码到达方法中检查操作数左右两侧的部分时，它是否既不是字符串的结尾也不是开头我收到一条错误消息

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 3 
```

我的方法和所有它的附加方法。

```
private static final String operators = "-+/*%_";
private static final String operands = "0123456789x";

public Boolean errorChecker(String infixExpr)
{
    char[] chars = infixExpr.toCharArray();
    StringBuilder out = new StringBuilder();

    for (int i = 0; i<chars.length; i++)
    {
        System.out.print(infixExpr.charAt(i));
        if (isOperator(infixExpr.charAt(i)))
        {
            if (i == 0 || i == infixExpr.length())
            {
                out.append(infixExpr.charAt(i));
            }
            else if (isOperator(infixExpr.charAt(i + 1)) && isOperator(infixExpr.charAt(i - 1)))
            {
                System.out.println("To many Operators.");
                return false;
            }
            else if (isOperator(infixExpr.charAt(i + 1)))
            {
                if (infixExpr.charAt(i) != '-' || infixExpr.charAt(i + 1) != '-')
                {
                    System.out.println("To many Operators.");
                    return false;
                }
            }
            else if (isOperator(infixExpr.charAt(i - 1)))
            {
                if (infixExpr.charAt(i) != '-' || infixExpr.charAt(i - 1) != '-')
                {
                    System.out.println("To many Operators.");
                    return false;
                }
            }
        }
        else if (isOperand(infixExpr.charAt(i)))
        {
            if (i == 0 || i == infixExpr.length())
            {
                out.append(infixExpr.charAt(i));
            }//THE LINE RIGHT BELOW THIS COMMENT THROWS THE ERROR!!!!!
            else if (isOperand(infixExpr.charAt(i + 1)) || isOperand(infixExpr.charAt(i - 1)))
            {
                System.out.println("Double digits and Postfix form are not accepted.");
                return false;
            }
        }
        else if (infixExpr.charAt(i) == 'q')
        {
            System.out.println("Your meow is now false. Good-bye.");
            System.exit(1);
        }
        else if(infixExpr.charAt(i) == '(' || infixExpr.charAt(i) == ')')
        {
            int p1 = 0;
            int p2 = 0;
            for (int p = 0; p<chars.length; p++)
            {
                if(infixExpr.charAt(p) == '(')
                {
                    p1++;
                }
                if(infixExpr.charAt(p) == ')')
                {
                    p2++;
                }
            }
            if(p1 != p2)
            {
                System.out.println("To many parentheses.");
                return false;
            }
        }
        else
        {
            System.out.println("You have entered an invalid character.");
            return false;
        }
        out.append(infixExpr.charAt(i));
    }
    return true;
}

private boolean isOperator(char val)
{
    return operators.indexOf(val) >= 0;
}

private boolean isOperand(char val)
{
    return operands.indexOf(val) >= 0;
} 
```

我运行该方法的主要部分：

```
 Boolean meow = true;
    while(meow)
    {
        System.out.print("Enter infix expression: ");
        infixExpr = scan.next();//THE LINE RIGHT BELOW THIS COMMENT THROWS THE ERROR!!!!!
        if(makePostfix.errorChecker(infixExpr) == true)
        {
            System.out.println("Converted expressions: "
                    + makePostfix.convert2Postfix(infixExpr));
            meow = false;
        }
    } 
```

它以前工作得很好，但现在它甚至不会通过以前工作的 1+2，我没有改变你看到的。怎么了！？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:49:18.360

看起来正在发生的事情是您在代码中多次检查索引 (i + 1) 处的字符。假设您输入了一个长度为五个字符的字符串。该程序通过并到达该行：

```
else if (isOperator(infixExpr.charAt(i + 1)) && isOperator(infixExpr.charAt(i - 1))) 
```

如果 i == 4，这将导致代码：

```
infixExpr.charAt(i + 1) 
```

抛出索引错误。本质上，您正在检查字符串中索引为 5（第六个字符）的字符，该字符串的最大索引索引为 4，即长度为 5 个字符。此外，您的检查

```
if(i==0 || i == infixExpr.length) 
```

不会按原样工作。也许检查 (i==infixExpr.length-1)。

# java - java设置定时器——每天早上和晚上

> ID：15940708
> 
> 赞同：0
> 
> 时间：2013-04-11T04:20:33.863
> 
> 标签：java, timer, intervals

我需要在每天早上 8 点和晚上 8 点运行一个方法，因为这种想法与 Java 计时器有关。如何为这种情况设置计时器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:28:46.190

使用 Timer 类。

```
 Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.HOUR_OF_DAY, 8);
    Timer timer = new Timer();
    timer.schedule(new RemindTask(), calendar.getTime());

    class RemindTask extends TimerTask {

       public void run() {
       } 
    } 
```

在类似的行中，您也可以为晚上时间创建另一个计时器。另一种选择是使用单一计时器，开始时间是早上 8 点，间隔时间是 12 小时。

您还可以使用其他库进行调度，例如[Quartz Scheduler](http://quartz-scheduler.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:28:30.310

有很多库可以满足您的需求，以[cron4j](http://www.sauronsoftware.it/projects/cron4j/)为例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T04:29:27.393

您可以使用如下函数定期检查时间：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;

public class currentTime {

    public static void main(String[] args) {
        Calendar cal = Calendar.getInstance();
        cal.getTime();
        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
        System.out.println( sdf.format(cal.getTime()) );
    }

} 
```

所以有一个计数器，每 x 次迭代运行一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T04:40:07.893

您可以安排 TimerTask 在每小时的顶部运行，并在 Calendar 的帮助下检查它是否为 8

```
 long hour = 3600 * 1000;
    new Timer().scheduleAtFixedRate(new TimerTask() {
        public void run() {
            if (Calendar.getInstance().get(Calendar.HOUR) == 8) {
                // run
            }
        }
    }, new Date(System.currentTimeMillis() / hour * hour), hour); 
```

即使切换到夏令时，它也会在 8 点运行

# c# - 如何在 C# 中的 graphics.DrawLine 方法中处理 NaN 值

> ID：15940720
> 
> 赞同：0
> 
> 时间：2013-04-11T04:21:50.570
> 
> 标签：c#, graphics

我想在 Graphics.DrawLine 方法中处理 NaN 值。请参考下面的代码片段。

```
Private Graphics g;

m_g.DrawLine(pen, x1, y1, x2, y2); 
```

在我们的项目中的某些情况下`y1` ，`y2`价值是`NaN`. 所以它会抛出像“溢出错误”这样的异常。

如何处理**NaN**值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:24:10.903

唯一的解决方案是检查您的任何值是否为 NaN，如果是，则不要调用 DrawLine（如果 x1、x2 等为`float`s）：

```
if (Single.IsNaN(y1) || Single.IsNaN...)
{
    //Handle error
}
else
{        
    m_g.DrawLine(pen, x1, y1, x2, y2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:22:07.740

假设您的数据代表某种图形，NaN 可能意味着以下两种情况之一：

1.  这可能意味着数据中存在错误。
2.  它可以代表数据中的有效差距。

在第一种情况下，NaN 表示数据不好，您有两个选择：不绘制任何数据，或者将所有数据绘制到第一个 NaN。无论哪种方式，您都应该提醒用户注意问题。

在第二种情况下，如果有任何 NaN，您应该将数据“分割”成不包含任何 NaN 的单独部分，然后绘制这些部分。然后，您的图表中将有（有效的）空白。

# asp.net-mvc-4 - 如何使用 ELMAH MVC 记录 EntityValidation 错误？

> ID：15940725
> 
> 赞同：10
> 
> 时间：2013-04-11T04:22:42.777
> 
> 标签：asp.net-mvc-4, entity-framework-5, elmah, elmah.mvc

我一直在使用 MVC4 和 EF5.x 编写应用程序，并使用 ELMAH 记录异常以供审查。我们最近发布了该应用程序，正如预期的那样，ELMAH 日志充满了几十个异常。很棒（但不是）！问题是这些例外之一是

```
System.Data.Entity.Validation.DbEntityValidationException
Validation failed for one or more entities. 
See 'EntityValidationErrors' property for more details. 
```

当然，无法查看 EntityValidationErrors 属性以获取更多详细信息，并且堆栈跟踪包含到我的 SubmitChanges()

我知道 ELMAH 有能力让我们提出自己的异常，并以某种方式自定义记录的内容和方式。不幸的是，我对 ELMAH 和 MVC 还是很陌生，谷歌搜索并没有找到任何相关的东西。我确实找到[了一篇关于记录 EntityValidationErrors 的博客文章](http://blog.ivanovtech.com/)，作者特别提到他会在 ELMAH 中发布如何做到这一点，但那是在 2012 年 9 月发布的，从那时起我什么也没看到。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T12:22:43.273

在这种情况下，最好的办法可能是将您的`context.SaveChanges();`调用包装在一个`try...catch`块中，然后从 ValidationExceptions 中记录各个项目。类似以下内容应该可以帮助您入门：

```
try
{
    context.SaveChanges();
}
catch (DbEntityValidationException ve)
{
    var error = ve.EntityValidationErrors.First().ValidationErrors.First();
    var msg = String.Format("Validation Error :: {0} - {1}", 
               error.PropertyName, error.ErrorMessage);
    var elmahException = new Exception(msg);

    Elmah.ErrorSignal.FromCurrentContext().Raise(elmahException);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-24T10:25:36.767

基于上述的这种扩展方法怎么样..

```
public static void SaveChangesWithBetterValidityException(this DbContext context)
    {
        try
        {
            context.SaveChanges();
        }
        catch (DbEntityValidationException ve)
        {
            var errors = new List<string>();
            foreach (var e in ve.EntityValidationErrors)
            {
                errors.AddRange(e.ValidationErrors.Select(e2 => string.Join("Validation Error :: ", e2.PropertyName, " : ", e2.ErrorMessage)));
            }
            var error = string.Join("\r\n", errors);
            var betterException = new Exception(error, ve);

            throw betterException;
        }
    } 
```

Elmah 在它的日志中会有一个更好的异常

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-29T07:57:12.817

`Global.asax.cs`为了将所有`DbEntityValidationException`异常转发到我的 MVC 应用程序中的 Elmah，我添加了以下内容：

```
private void ElmahEntityValidationException()
{
    var dbEntityValidationException = Server.GetLastError() as DbEntityValidationException;

    if (dbEntityValidationException != null)
    {
        var errors = new List<string>();
        foreach (var entityError in dbEntityValidationException.EntityValidationErrors)
        {
            errors.AddRange(entityError.ValidationErrors.Select(e2 => string.Join("Validation Error :: ", e2.PropertyName, " : ", e2.ErrorMessage)));
        }
        var error = string.Join("\r\n", errors);
        var betterException = new Exception(error, dbEntityValidationException);

        Elmah.ErrorSignal.FromCurrentContext().Raise(betterException);
    }
}

protected void Application_Error(object sender, EventArgs e)
{
    ElmahEntityValidationException();
} 
```

其中一些代码是从@Paige Cook 和@Original10 的帖子中重复使用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-13T01:45:36.230

根据下面的代码重新抛出并不完美（尽管我不介意在此处重置调用堆栈，因为 Elmah 记录的发布到的地址的详细信息将告诉我导致异常的原因），你将不得不解决你的问题自己的安全隐患，但这相当简洁并满足我的需求：

```
try
{
    return base.SaveChanges();
}
catch (DbEntityValidationException e)
{
    var de = new DetailedEntityValidationException(e);
    throw de;
}

public class DetailedEntityValidationException : Exception
{
    public DetailedEntityValidationException(DbEntityValidationException ve)
        : base(ve.Message + ":\r\n\t-" + string.Join(new string('-',20) + "\r\n\t-", ve.EntityValidationErrors.Select(ev=>string.Join("\r\n\t-",ev.ValidationErrors.Select(e=>e.ErrorMessage)))))
    {}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-14T19:34:01.233

这是我针对 Elmah 和 EF 验证错误的 Global Web API 解决方案的实现：

```
public class ElmahHandleWebApiErrorAttribute : ExceptionFilterAttribute
{
   public override void OnException(HttpActionExecutedContext context)
   {
       var e = context.Exception;
       // Try parse as entity error (i'm not sure of performance implications here)
       var efValidationError = e as DbEntityValidationException;
      if (efValidationError == null)
       {
           RaiseErrorSignal(e);
       }
       else
       {
           RaiseEntityFrameWorkValidationErrorSignal(efValidationError);
       }
  }

   private static bool RaiseErrorSignal(Exception e)
   {
       var context = HttpContext.Current;
      if (context == null)
           return false;
       var signal = ErrorSignal.FromContext(context);
       if (signal == null)
           return false;
       signal.Raise(e, context);
       return true;
   }

   private static bool RaiseEntityFrameWorkValidationErrorSignal(DbEntityValidationException e)
   {
       var context = HttpContext.Current;
       if (context == null)
           return false;
       var signal = ErrorSignal.FromContext(context);
       if (signal == null)
           return false;

      //Taken from post above
      var errors = new List<string>();
       foreach (var entityError in e.EntityValidationErrors)
       {
           errors.AddRange(entityError.ValidationErrors.Select(e2 => string.Join("Validation Error :: ", e2.PropertyName, " : ", e2.ErrorMessage)));
        }
       var error = string.Join("\r\n", errors);
       var betterException = new Exception(error, e);

       signal.Raise(betterException, context);        
       return true;
   }
} 
```

然后我在下面的`WebApiConfig.cs`文件中注册属性`App_Start`

```
config.Filters.Add(new ElmahHandleWebApiErrorAttribute()); 
```

# ios - 如何知道xcode中的类型文件

> ID：15940726
> 
> 赞同：-2
> 
> 时间：2013-04-11T04:22:54.307
> 
> 标签：ios, objective-c, types

我创建了一个应用程序，它可以自行使用任何格式的任何文件。

我想知道这个文件来读取什么是类型？

请向我解释一下这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:30:08.840

代码示例

```
NSString *file = @"…"; // path to some file
CFStringRef fileExtension = (CFStringRef) [file pathExtension];
CFStringRef fileUTI = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, fileExtension, NULL);

if (UTTypeConformsTo(fileUTI, kUTTypeImage)) NSLog(@"It's an image");
else if (UTTypeConformsTo(fileUTI, kUTTypeMovie)) NSLog(@"It's a movie");
else if (UTTypeConformsTo(fileUTI, kUTTypeText)) NSLog(@"It's text");

CFRelease(fileUTI); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:20:13.680

您可以通过编程方式获取文件路径的文件名和扩展名。有一些方法`NSString`可以做到这一点。查看`-[NSString pathExtension]`and `-[NSString lastPathComponent]`，两者都定义在`NSPathUtilities.h`.

您还可以使用以下方式获取不带扩展名的文件名`[NSString stringByDeletingPathExtension];`

# python - 算法 - 求幂 -

> ID：15940729
> 
> 赞同：-2
> 
> 时间：2013-04-11T04:23:10.860
> 
> 标签：python, algorithm

我已经很努力了，但由于某种原因，我想不出一种方法来做 a^(b^c) mod p。我能够看到 a^b^c 等 .. mod p 的线程，即使这只是一个微小的变化，我也无法做到

这就是我在 Python 代码中所拥有的：

def exponent_mod(a, b, c, m):

```
def modular_pow(base, exponent, modulus):
    result = 1
    while (exponent > 0):
        if (exponent % 2 == 1):
           result = (result * base) % modulus
        exponent = exponent >> 1
        base = (base * base) % modulus
    return result

m_ = modular_pow(a, b, m)
return modular_pow(m_, c, m) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:41:25.670

我没有看到有额外方法的正当理由（我也不理解位移的意图或目的）。如果你想得到一个^(b ^c) mod p，那么我们就直接做吧。

```
def modular_pow(a, b, c, p):
    return (a**(b**c)) % p 
```

正如建议的那样，一种更有效的方法是使用[Python 的内置`pow()`方法：](http://docs.python.org/2/library/functions.html#pow)

```
def modular_pow(a, b, c, p):
    return pow(a, b**c, p) 
```

# apache - 如何更改 apache james 中的最大附件大小？

> ID：15940731
> 
> 赞同：2
> 
> 时间：2013-04-11T04:23:20.430
> 
> 标签：apache, size, email-attachments, james

我如何知道 apache james 中附件的默认最大大小是多少以及如何更改其值？

示例：我通过 imap 打开收件箱文件夹，我想将 mimeMessage 附加到此文件夹，但是当我将 340 kb 附件添加到 mimeMessage 并将此 mimeMessage 附加到文件夹时，但 james 没有回答，java 等待回答。我认为这与最大尺寸附件有关。

有人知道吗？预先感谢您的回答。

# php - 将时间转换为 mktime 的困惑

> ID：15940733
> 
> 赞同：0
> 
> 时间：2013-04-11T04:23:27.320
> 
> 标签：php

我正在使用`strtotime`函数将日期转换为时间戳，例如

```
 echo strtotime('4-5-2013'); 
```

它给出的结果是 1367618400。这是正确的。我的问题是，如果日期格式为 mm-dd-yyyy 而不是 dd-mm-yyyy。例如，同一日期是 4 月 5 日而不是 5 月 4 日。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:28:46.420

strtotime 将`-`其中的字符串视为 as`dd-mm-yyyy`和`/`as `mm/dd/yyyy`。

`4-5-2013`将是 5 月 4 日

`4/5/2013`将是 4 月 5 日

m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

参考： http: [//php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:55:05.870

根据您的最新评论

您可以使用

```
echo date("M-d-Y", mktime(0, 0, 0, 12, 31, 1997)); 
```

传递任何格式并使用 mktime 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:28:39.207

```
echo strtotime('5-4-2013');//Oupt puts 1367650800

echo strtotime('4-5-2013');//Oupt puts 1367618400 
```

# php - 为客户检查表单中的数据并在检查时出错

> ID：15940738
> 
> 赞同：-1
> 
> 时间：2013-04-11T04:23:45.053
> 
> 标签：php

```
<?php
$Page = new PaginationDisplayInlineBottomAndTopDivs($number, $box, $errors, $go);
   if(form != null) {
    echo "didntfail";
} if (form != 3) {
    echo "failedpasswordsdidntmatch"
} if (form != 4) {
    echo "failedbutdidntgetpasswordrightwithusername";
} if (form != 6) {
    $Display->new FormErrorInputRedBoxShowDisplay($x, $a, $h, $g);
    $inputs = $Page->$Display->setFormInlineWithBox();
}

?> 
```

我在第 5 行遇到错误。我对 Php 感到困惑和新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:25:51.930

```
$Page = new PaginationDisplayInlineBottomAndTopDivs($number, $box, $errors, $go);
   if(form != null) {
    echo "didntfail";
} if (form != 3) {
    echo "failedpasswordsdidntmatch";
} if (form != 4) {
    echo "failedbutdidntgetpasswordrightwithusername";
} if (form != 6) {
    $Display->new FormErrorInputRedBoxShowDisplay($x, $a, $h, $g);
    $inputs = $Page->$Display->setFormInlineWithBox();
} 
```

你错过了 ';' 在行中

# c - c语言中滑动窗口协议的定时器

> ID：15940745
> 
> 赞同：0
> 
> 时间：2013-04-11T04:24:05.330
> 
> 标签：c, network-programming

我想在 c 中实现滑动窗口协议。所以我有点困惑，如果我想发送 5 个数据包，我需要为这 5 个数据包中的每一个维护一个计时器。所以我可以使用 alarm() 和 SIGALARM 但我觉得再次为其他数据包调用警报会覆盖以前的计时器。真的吗 ？有人可以建议我如何为不同的数据包设置计时器。

# powershell - 在命令行中使用 powershell 时加载程序集错误

> ID：15940746
> 
> 赞同：-1
> 
> 时间：2013-04-11T04:24:08.717
> 
> 标签：powershell, powershell-ise

我有一个 load.PS1，它加载“Microsoft.SqlServer.Smo”，如下所示

```
[System.Reflection.Assembly]::load('Microsoft.SqlServer.Smo') | Out-Null 
```

当我使用 ISE 加载和运行它时效果很好，但是当我在 powershell shell 中运行它或用作“powershell -command”时出错。\RemoveInvalidSSRSAgentJob.ps1 xxxx”如下

```
Exception calling "Load" with "1" argument(s): "Could not load file or assembly
 'Microsoft.SqlServer.Smo' or one of its dependencies. The system cannot find t
he file specified."
At line:1 char:38
+ & {[System.Reflection.Assembly]::load <<<< ('Microsoft.SqlServer.Smo') | Out-
Null}
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

如何设置它以便它可以在 powershell shell 或命令中工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:36:48.370

您可以使用解决方法

```
[System.Reflection.Assembly]::LoadWithPartialName('Microsoft.SqlServer.Smo') 
```

但是这种方法被微软宣布为“过时”，将来可以消除。

方法加载失败，因为它加载了一个给定**名称的长形式的**程序集，但您的 ar 将部分名称传递给它：[阅读此处](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)。而且我发现在 ISE 中工作真的很奇怪，对我来说失败了！

# erlang - HTTP 客户端建议

> ID：15940752
> 
> 赞同：0
> 
> 时间：2013-04-11T04:24:27.563
> 
> 标签：erlang

我想要一些关于好的 HTTP 客户端的建议。我看过 hackney，它是不是比默认的 Erlang HTTP 客户端更好的 HTTP 客户端？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T05:06:10.763

我推荐[lhttpc](https://github.com/esl/lhttpc)。它有一个很好的功能，可以在请求自动完成后重用连接。

# jquery - MVC jQuery AJAX Post 需要身份验证

> ID：15940755
> 
> 赞同：0
> 
> 时间：2013-04-11T04:24:46.227
> 
> 标签：jquery, ajax, asp.net-mvc

我有一个来自 Forms Authenication mvc 站点的非常标准的 ajax post 调用。当我在域外的计算机上时，我可以执行此 ajax 调用，但是当我从不在我们域中的计算机上尝试此操作时，Post 调用会询问我的用户名/密码。

应该注意的是，要首先访问此页面，我需要首先登录。

任何人都可以帮忙吗？

阿贾克斯调用代码：

```
$.ajax({
    type: "POST",
    url: "{{url}}",
    data: "{{data}}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(msg) { OnSuccess(msg, Id); },
    error: function(msg) { OnFail(msg, Id); }
}); 
```

`{{url}}`格式为`/areaname/controllername/actionname`.

`{{data}}`格式为`{ key: value, key2: value }`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:19:12.417

在 IE 10 中设置了默认的“不跟踪”，因此在使用 Ajax 帖子时不会使用 Cookie。

我只是将 cookieless="UseCookies" 属性设置为身份验证类型，并且它起作用了。

# python - 查找文本文件中数字最低的行

> ID：15940756
> 
> 赞同：0
> 
> 时间：2013-04-11T04:25:01.797
> 
> 标签：python, python-2.7, file-io

我正在开发一个用 Python 编写的猜谜游戏，用户在一定范围内（1-1000）猜测一个数字，并将高分（最低尝试次数）附加到文本文件中。

我需要找到一种方法来读取所有数字，并将最小值打印（读取）到屏幕上。是否有捷径可寻？到目前为止，我一直遇到问题。这是我的代码的一部分：

```
if guess == the_number:
        print "--------------------------------------"
        print "You guessed correctly! The number was:", the_number
        print "And it only took you", no_of_tries, "tries!"
        text_file = open("scores.txt", "a")
        the_scores = text_file.write(str(no_of_tries) + ' ') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:31:36.643

如果您的所有分数都用空格分隔，那么您可以通过此方法检索它们

```
input=open('scores.txt')
scores=input.read()
scores=scores.split()
print min(scores) 
```

打印最小猜测

# spring - 您如何将作用域 Tomcat 数据源与 Spring Batch 一起使用？

> ID：15940757
> 
> 赞同：0
> 
> 时间：2013-04-11T04:25:03.750
> 
> 标签：spring, datasource, spring-batch

我目前正在使用 Spring Batch 从 SQL 服务器导入数据。为了使数据源可配置，我需要“步进范围”数据源 bean。然而，这让我很担心。如果执行连接池的数据源 bean 是步骤范围的，那么它如何管理池中的连接，甚至使用它有什么好处。

我的数据源配置如下：

```
<bean id="dataSourceMssql" class="org.apache.tomcat.jdbc.pool.DataSource" scope="step">
    <property name="driverClassName" value="${batch.mssql.driver}" />
    <property name="username" value="${batch.mssql.user}" />
    <property name="password" value="${batch.mssql.password}" />
    <property name="removeAbandoned" value="true" />
    <property name="removeAbandonedTimeout" value="3610" />
    <property name="url"
        value="${batch.mssql.connect}#{jobParameters['dburl']}:#{jobParameters['port']}/#{jobParameters['databaseName']}" />
</bean> 
```

为什么它是步骤范围的？因为我需要检索 jobParameters 来配置数据源。

**我想知道什么？** 连接池还会发生吗？（也许豆类资源保持活力并被回收）

我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:59:33.493

范围“步骤”仅适用于 Spring Batch bean。其他 bean (Spring) 只知道范围：单例、原型、请求或会话。

处理此问题的常规方法是在您的 applicationContext.xml 读取的属性文件中设置这些参数。

JobParameters 用于传递与 Job 相关的参数（路径、文件名、日期、seqNo 等），因为具有相同 JobParameters 的作业将无法运行两次。

编辑：你的工作是多线程的吗？因为大多数创建的作业都是单线程的！如果您的工作实际上是单线程，我会问自己为什么需要池连接！

问候

# java - Java base64 编码和解码

> ID：15940763
> 
> 赞同：1
> 
> 时间：2013-04-11T04:25:38.130
> 
> 标签：java, base64

我正在尝试编码`byte[]`为`String`，然后将其解码`String`为`byte[]`，我的代码是：

```
byte[] aaa = new byte[1];
aaa[0] = (byte) 153;

String encoder = Base64.encodeBase64String(aaa);
System.out.println("encoder <<>> " + encoder);

// Decode the Base64 String.        
byte[] bytes = Base64.decodeBase64(encoder);
String decoder = new String(bytes, "UTF08");
System.out.println("decoder <<>> " + decoder ); 
```

结果是：

```
encoder <<>> mQ==
decoder <<>> ? 
```

结果不一样。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:35:25.597

尝试这个：

```
byte[] aaa = new byte[1];
aaa[0] = (byte) 153;
System.out.println("original bytes <<>> " + Arrays.toString(aaa));

// Encode the bytes to Base64
String encoder = Base64.encodeBase64String(aaa);
System.out.println("encoder <<>> " + encoder);

// Decode the Base64 String to bytes
byte[] bytes = Base64.decodeBase64(encoder);
System.out.println("decoded bytes <<>> " + Arrays.toString(bytes)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T11:57:22.840

简单的静态实用方法来编码和解码给定的字符串。

```
import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;
...

private static byte[] key = {
        0x74, 0x68, 0x69, 0x73, 0x49, 0x73, 0x41, 0x53, 0x65, 0x63, 0x72, 0x65, 0x74, 0x4b, 0x65, 0x79
    };  // "ThisIsASecretKey";

    public static String encrypt(String stringToEncrypt) throws Exception {
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
        final SecretKeySpec secretKey = new SecretKeySpec(key, "AES");
        cipher.init(Cipher.ENCRYPT_MODE, secretKey);
        final String encryptedString = Base64.encodeBase64String(cipher.doFinal(stringToEncrypt.getBytes()));
        return encryptedString;
    }

    public static String decrypt(String stringToDecrypt) throws Exception {
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5PADDING");
        final SecretKeySpec secretKey = new SecretKeySpec(key, "AES");
        cipher.init(Cipher.DECRYPT_MODE, secretKey);
        final String decryptedString = new String(cipher.doFinal(Base64.decodeBase64(stringToDecrypt)));
        return decryptedString;
    } 
```

# c# - 如何通过休息服务正确传递流以检索其长度

> ID：15940764
> 
> 赞同：1
> 
> 时间：2013-04-11T04:25:41.337
> 
> 标签：c#, stream, wcf-web-api

我以这种方式传递流：

```
StreamReader sr = new StreamReader(openFileDialog1.FileName);
byte[] fileStream = Utility.ReadFully(sr.BaseStream);
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(baseAddress));
request.Method = "POST";
request.ContentType = "application/octet-stream";

Stream serverStream = request.GetRequestStream();
serverStream.Write(fileStream, 0, fileStream.Length);
serverStream.Close();

HttpWebResponse response2 = (HttpWebResponse)request.GetResponse();
if (response2.StatusCode == HttpStatusCode.OK)
{
    MessageBox.Show(Utility.ReadResponse(response2));
} 
```

**-------------------------------------------------- ----------------------**

```
public static byte[] ReadFully(Stream input)
{
    byte[] buffer = new byte[16 * 1024];
    using (MemoryStream ms = new MemoryStream())
    {
        if (input != null)
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
        }
        return ms.ToArray();
    }
} 
```

然后在服务器上处理它：

```
public bool UploadPhotoStream(string someStringParam, Stream fileData)
{
    string filePath = string.Format("{0}/{1}", 'sdfgsdf87s7df8sd', '24asd54s4454d5f4g');

    ProductPhoto newphoto = new ProductPhoto();
    newphoto.FileSizeBytes = fileData.Length / 1024 / 1024;
    newphoto.FileLocation = filePath;

    ...
} 
```

现在我`NotSupportedException`在打电话时得到`fileData.Length`。我知道它发生是因为流已关闭。但是我怎样才能重新打开它呢？或者我应该怎么做，当我将流传递给服务时，我仍然可以获得它的长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:44:41.010

为什么不传递内容长度标头？您的服务器可以检查标头并确切知道要发送的内容有多少字节。您如何阅读标题取决于您使用的 http 框架、ASP.NET Web Api、经典 WCF Web Api、HttpListener 等。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(baseAddress));
request.Method = "POST";
request.ContentType = "application/octet-stream";
request.ContentLength = new FileInfo(openFileDialog1.FileName).Length 
```

如果没有 Content-Length 标头，http 服务器永远无法知道还有多少字节需要读取。它只知道有一个 Stream 并且会读取它，直到没有更多数据为止。这也是您的浏览器在下载内容时显示进度条的方式。它需要 bytesDownloaded / Content-Length。

根据这篇文章：[https ://stackoverflow.com/a/8239268/1160036](https://stackoverflow.com/a/8239268/1160036)

您可以从您的网络方法访问这样的标题。

```
long dataLength = long.Parse(HttpContext.Current.Request.Headers["Content-Length"]); 
```

# zend-framework - 如何禁用报价加入 Zend db

> ID：15940765
> 
> 赞同：0
> 
> 时间：2013-04-11T04:25:44.210
> 
> 标签：zend-framework, zend-db, zend-db-table

我有sql查询

```
 select * from table1
    left join (values (4),(1800),(103500)) AS "filter (id) on table1.id=filter.id 
```

默认情况下，Zend_Db_Select 表被引用。例如：

```
 $result = '(values (4),(1800),(103500)) AS filter (id)';
    $select->joinInner($result, "table1.id = filter.id", ''); 
```

结果：

```
 SELECT * FROM "table1"
    INNER JOIN "(values (4),(1800),(103500)) filter (id)" ON table1.id=filter.id 
```

我需要

```
 SELECT * FROM "table1"
    INNER JOIN (values (4),(1800),(103500)) filter (id) ON table1.id=filter.id 
```

如何禁用报价表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:48:09.197

尝试将 $result 作为 Zend_Db_Expr 添加到您的 $select 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:48:28.287

这有点棘手。看看下面的代码。

```
$dbh = Zend_Db_Table::getDefaultAdapter();
$select = $dbh->select();
$select->from('table1');
$select->joinInner(
        array('filter (id)' => new Zend_Db_Expr('(values (4),(1800),(103500))')),
        "table1.id = filter.id",
        array()
);
echo $select->assemble() . PHP_EOL; 
```

默认情况下，此代码输出以下语句，这不是我们真正想要`filter (id)`的，因为引用了标识符。这是输出。

```
SELECT `table1`.* FROM `table1`
 INNER JOIN (values (4),(1800),(103500)) AS `filter (id)` ON table1.id = filter.id 
```

我们需要`autoQuoteIdentifiers`在配置选项中禁用。例如：

```
 'db' => array(
        'adapter' => 'pdo_mysql',
        'isDefaultTableAdapter' => true,
        'params' => array(
            'host' => '<host>',
            'username' => '<user>',
            'password' => '<pass>',
            'dbname' => '<db>',
            'options' => array(
                'autoQuoteIdentifiers' => false,
            ),
        ),
    ) 
```

我们得到以下输出

```
SELECT table1.* FROM table1
 INNER JOIN (values (4),(1800),(103500)) AS filter (id) ON table1.id = filter.id 
```

请注意，在这种情况下，开发人员负责在需要时引用标识符。

我认为不可能有选择地禁用表别名之一的引用。好吧，至少我在查看我在本地的 1.x Zend Framework 代码时发现这是不可能的；）

# jquery - 使用可滚动菜单固定主要内容的位置

> ID：15940769
> 
> 赞同：0
> 
> 时间：2013-04-11T04:26:03.957
> 
> 标签：jquery, css, menu

我有以下页面（基于 david bushell off canvas responsive menu）：

[http://kwedsd.byethost7.com/test.html](http://kwedsd.byethost7.com/test.html)

它显示一个响应式菜单（不完全正常工作），当您缩小浏览器的宽度时，三个水平线图标将可见。当您单击它时，菜单会滑入，这就是我遇到问题的地方，因为所有链接都不可见。

首先，我希望菜单项一直在页面下方列出，并且不限于主要内容的高度。其次，我想冻结主要内容，只让菜单可滚动（如果您参考[http://disney.com/?intoverride=true](http://disney.com/?intoverride=true)，这是单击菜单时我希望实现的示例内容冻结，但菜单仍可滚动）。

我已经尝试将位置固定到不起作用的主要内容。对此的任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:34:08.027

您需要将#nav 上的“溢出”值更改为“滚动”。因此，您的 CSS 将显示为：

```
#nav { 
  position: absolute;
  top: 0;
  padding-top: 5.25em;
  overflow: scroll;
  etc......
} 
```

通过溢出：滚动，您至少可以让您的用户滚动浏览您的菜单列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:33:35.067

您将不得不对您的 css 进行大量更改，太多无法在此处有效列出，并且足以让我自己完全测试这一点并不容易。

这里的主要目标是使列表具有真实的高度，并且元素在布局中被忽略的绝对位置。

删除和元素`translate3d`上的属性并改为向左浮动。然后，您将不得不使用元素的溢出、宽度以及可能的许多其他属性，以使其按您希望的方式显示。`#nav``#main``#nav``#main`

其中一些将需要新的规则，例如`#nav { width: 0; } html.js-nav #nav { width: 70%; }`，您可以在应该显示菜单时进行转换。

这是一个起点，它应该让你处于比现在更好的位置，如果你在这条线上陷入困境，请回来寻求更多帮助。

# algorithm - 最小化图保持连接

> ID：15940781
> 
> 赞同：1
> 
> 时间：2013-04-11T04:27:28.917
> 
> 标签：algorithm, graph

我被困在一个图表问题上。我正在使用 OpenSG 并试图找到建筑物中两点之间的路径。

我构建了这个图表：![图1](https://i.stack.imgur.com/HHZv4.png)

我用它来找到建筑物中两点之间的最短路径：

![图中的路径](https://i.stack.imgur.com/nwgbj.png)

这就是我找到路径的方式：

*   我在图中添加开始/目标节点
*   我将开始/目标节点的边添加到所有可到达的节点（这是通过 OSG 中的 IntersectAction 完成的）
*   我使用 A* 算法找到最短路径

我现在想最小化图表。如果两点之间的路径变长一点也没关系，我只想消除我现在拥有的冗余。例如，可以删除所有浅绿色节点。房间里没有“看到”门的地方，所以不需要节点。它应该看起来像这样： ![最小化图](https://i.stack.imgur.com/gRH9R.png)

所以我有一个算法可以或多或少地做我想要的，但我只是认为这一定是一个众所周知的问题。这不是最小顶点覆盖，因为例如，如果在最小顶点覆盖中不包括门节点，我将无法在两个房间之间找到路。

我与各种图形问题进行了比较，但我找不到真正的匹配......

很晚了（早上 6 点 20 分），我应该去睡觉了，也许它看起来有点混乱，或者它真的很明显。感谢您就该问题提出任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:32:01.947

我想我自己找到了答案。如果有人有兴趣。它不是普通的顶点覆盖，而是“最小连通顶点覆盖问题”（CVCP）。有一篇关于它的好论文：

[三连通图中的顶点覆盖和连通顶点覆盖](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=176537)

# hornetq - 在hornetq中，消费者是自动调用的吗？

> ID：15940783
> 
> 赞同：1
> 
> 时间：2013-04-11T04:27:49.883
> 
> 标签：hornetq

我查看了 hornetq 中的所有示例，但我找不到当消息通过生产者时自动调用消费者的示例。

请让我知道示例代码或提示。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:51:06.700

使用[DefaultMessageListenerContainer](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/)。您可以为其注册一个侦听器并异步使用消息。请点击此链接了解有关调整 MessageListenerContainer 的更多信息：http: [//bsnyderblog.blogspot.se/2010/05/tuning-jms-message-consumption-in.html](http://bsnyderblog.blogspot.se/2010/05/tuning-jms-message-consumption-in.html)。

您需要的 Hornetq 依赖项（我使用了独立的 hornetq-2.3.0.CR2）（您还需要一些弹簧罐）：

```
<dependencies>
    <!-- hornetq -->
    <dependency>
        <groupId>org.jboss.netty</groupId>
        <artifactId>netty</artifactId>
        <version>3.2.7.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hornetq</groupId>
        <artifactId>hornetq-jms-client</artifactId>
        <version>2.3.0.CR2</version>
    </dependency>
    <dependency>
        <groupId>org.hornetq</groupId>
        <artifactId>hornetq-core-client</artifactId>
        <version>2.3.0.CR2</version>
    </dependency>
    <!-- hornetq -->
</dependencies> 
```

您应该在 applicationContext.xml 中使用的 bean（我没有使用 jndi 来获取 ConnectionFactory 和目的地；为此，您可以关注[这个问题](https://stackoverflow.com/questions/13049736/jndi-does-not-work-with-hornetq-and-tomcat)）：

```
<!-- It's ConnectionFactory to connect to hornetq. 5445 is hornetq acceptor port  -->
<bean name="connectionFactory" class="messaging.jms.CustomHornetQJMSConnectionFactory"> 
    <constructor-arg index="0" name="ha" value="false" />
    <constructor-arg index="1" name="commaSepratedServerUrls" value="127.0.0.1:5445" /> 
</bean>

<bean id="destinationParent" class="messaging.jms.JmsDestinationFactoryBean" abstract="true">
    <property name="pubSubDomain" value="false" /> <!-- default is queue -->
</bean>

<bean id="exampleDestination" parent="destinationParent">
    <property name="destinationName" value="example" /> <!-- queue name -->
</bean>

 <!-- MessageListener -->
<bean id="messageHandler" class="messaging.consumer.MessageHandler">
</bean>

<!-- MessageListenerContainer -->
    <bean id="paymentListenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
        <property name="destination"       ref="exampleDestination" />
        <property name="messageListener"   ref="messageHandler" />
        <property name="connectionFactory" ref="connectionFactory" />
        <property name="sessionTransacted" value="true" />
        <property name="concurrentConsumers"    value="1" />
        <property name="maxConcurrentConsumers" value="10" />
        <property name="idleConsumerLimit"      value="2" />
        <property name="idleTaskExecutionLimit" value="5" />
        <property name="receiveTimeout"         value="3000" />
    </bean> 
```

CustomHornetQJMSConnectionFactory：

```
public class CustomHornetQJMSConnectionFactory extends org.hornetq.jms.client.HornetQJMSConnectionFactory
{
    private static final long serialVersionUID = 1L;

    public CustomHornetQJMSConnectionFactory(boolean ha, String commaSepratedServerUrls)
    {
        super(ha, converToTransportConfigurations(commaSepratedServerUrls));
    }

    public static TransportConfiguration[] converToTransportConfigurations(String commaSepratedServerUrls)
    {   
        String [] serverUrls = commaSepratedServerUrls.split(",");
        TransportConfiguration[] transportconfigurations = new TransportConfiguration[serverUrls.length];
        for(int i = 0; i < serverUrls.length; i++)
        {
            String[] urlParts = serverUrls[i].split(":");
            HashMap<String, Object> map = new HashMap<String,Object>();
            map.put(TransportConstants.HOST_PROP_NAME, urlParts[0]);
            map.put(TransportConstants.PORT_PROP_NAME, urlParts[1]);
            transportconfigurations[i] = new TransportConfiguration(NettyConnectorFactory.class.getName(), map);
        }
        return transportconfigurations;
    }
} 
```

JmsDestinationFactoryBean（用于destinationParent bean）：

```
public class JmsDestinationFactoryBean implements FactoryBean<Destination>
{
    private String destinationName;
    private boolean pubSubDomain = false;

    public void setDestinationName(String destinationName) {
        this.destinationName = destinationName;
    }

    public void setPubSubDomain(boolean pubSubDomain) {
        this.pubSubDomain = pubSubDomain;
    }

    @Override
    public Class<?> getObjectType() 
    {
        return Destination.class;
    }

    @Override
    public boolean isSingleton() 
    {
        return true;
    }

    @Override
    public Destination getObject() throws Exception 
    {
        if(pubSubDomain)
        {
            return HornetQJMSClient.createTopic(destinationName);
        }
        else
        {           
            return HornetQJMSClient.createQueue(destinationName);           
        }
    }
} 
```

MessageHandler（收到的消息转到onMessage方法进行处理）（为简单起见，您可以实现javax.jms.MessageListener而不是SessionAwareMessageListener）：

```
public class MessageHandler implements org.springframework.jms.listener.SessionAwareMessageListener<Message>
{
@Override
public void onMessage(Message msg, Session session) throws JMSException 
{
    if(msg instanceof TextMessage)
    {
        System.out.println(((TextMessage)msg).getText());
        session.commit();
    }
    else
    {
        session.rollback(); // send message back to the queue
    }
} 
```

# ruby-on-rails - ActiveRecord 中的复杂关系

> ID：15940786
> 
> 赞同：0
> 
> 时间：2013-04-11T04:27:59.577
> 
> 标签：ruby-on-rails, activerecord

我将 ActiveRecord 与 Ruby on Rails 一起使用，我需要对一个相当复杂的关系进行建模，我认为这种关系不太适合正常的 has_many 或 has_and_belongs_to_many 关系。作为序言，这是一个用于管理足球裁判比赛分配的应用程序（课程的简单实现，而不是真正的生产应用程序）。

我有一个游戏模型，它有一个裁判，ar1 和 ar2，它们是 id 号，它们直接对应于用户模型的 id（由 activerecord 创建的内置 id）。所以我的问题是，我希望能够使用activerecord在show.html.erb页面上显示用户的游戏，但是我不太确定如何在activerecord中建立关系并仍然保持游戏分配位置的感觉（裁判员，ar1，ar2）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:50:35.187

简单的解决方案是`type`在您的模型中添加一个。

添加类型后，您可以像下面这样调用

```
@g = Game.first

@gamers = g.users.all(:where => ["type = 'Gamer'"]
@referee = g.users.all(:where => ["type = 'Referee'"] 
```

# solr - SOLR - 高效地批量索引数百万个纯文本文件

> ID：15940794
> 
> 赞同：1
> 
> 时间：2013-04-11T04:28:32.793
> 
> 标签：solr

使用 SOLR 索引 1000 万个纯文本文件（总共约 300 个演出）的最快和最有效的方法是什么？

这些文件与 SOLR 安装位于同一台服务器上。from `solrconfig.xml`：mergeFactor 是 25，autoCommit 是 10000

目前我正在将文件单独发送到 /update`curl`和`xargs`. 这索引大约每小时 500k，CPU 使用率很高。

谢谢你的帮助！

# delphi - 使用“HNetCfg.NATUPnP”Ole 对象的端口转发失败 - 它以前工作过

> ID：15940795
> 
> 赞同：2
> 
> 时间：2013-04-11T04:28:36.033
> 
> 标签：delphi, upnp

我阅读了以下问题： [使用“HNetCfg.NATUPnP”Ole 对象进行端口转发失败](https://stackoverflow.com/questions/12805067/port-forwarding-by-using-hnetcfg-natupnp-ole-object-failed)

使用该示例并在 windows xp sp3 上成功运行。德尔福 Xe2。我可以将外部端口路由到我的电脑，并且在所有方面都工作得很好。

经过几天的工作，此代码停止工作：

端口：= Nat.StaticPortMappingCollection；

Ports 现在获得了 NIL。

在同一个网络中，相同的代码在 windows 7 中工作。我没有其他 windows xp 进行测试。

似乎有些东西发生了变化，并且似乎是在环境中。我的 windows xp 是一个虚拟盒子会话。主机是Windows 7，相同的代码仍在工作。我没有注意到虚拟框参数有任何变化，也没有软件更新。

我正在寻找在哪里寻找的指导。

# seo - Google SEO - 网页中的重复内容以提交站点地图

> ID：15940803
> 
> 赞同：0
> 
> 时间：2013-04-11T04:28:59.507
> 
> 标签：seo, google-search-console

我希望我的问题与stackoverflow不太相关。

这是我的网站：[http ://www.rader.my](http://www.rader.my)

这是一个汽车信息网站。内容是动态的。因此，谷歌爬虫无法在我的网站上找到所有汽车规格页面。

我创建了一个站点地图，其中包含我所有的汽车 URL（例如：[http](http://www.rader.my/Details.php?ID=13) ://www.rader.my/Details.php?ID=13用于一辆车）。我知道我的 .xml 文件格式和结构没有任何错误。但提交后，谷歌只索引了一个网址，即我的 index.php。

我也读过关于`rel="canonical"`. 但我不认为在我的情况下我应该使用这样的东西，因为我所有的页面都不同，内容不同，但只有结构是相同的。

有什么我错过的吗？为什么即使内容不同，谷歌也不接受我的网址？我能做些什么来解决这个问题？

谢谢并恭祝安康，

阿明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:37:43.617

我有一个类似类型的网站。谷歌擅长找出动态网站。随着时间的推移，他们将抓取页面并找出独特的内容。给它时间。

你应该做所有标准的事情：

1.  确保每个页面都有一个唯一的 H1 标签。
2.  确保每个页面都有大量独特的内容
3.  独特的关键字和描述标签不再像以前那样有用，但它们不会受到伤害。
4.  内部交叉链接。创建包含指向所有一个制造商的链接的类别页面，并将该制造商的每个页面链接回“类似”页面。
5.  获取指向您的网页的链接。没有什么比外部权威更能帮助获得索引了。

# ios - 基于故事板中导航控制器的不同按钮调用同一标签栏控制器的特定标签

> ID：15940804
> 
> 赞同：0
> 
> 时间：2013-04-11T04:29:05.720
> 
> 标签：ios, iphone, uinavigationcontroller, uitabbarcontroller, uistoryboard

我的应用程序的工作流程：

![应用程序工作流程](https://i.stack.imgur.com/7JIZp.png)

在这里，我有 1 个**主导航控制器**。然后，它推送到**1 个标签栏控制器**和**2 个视图控制器**。
主标签栏控制器有**2 个不同的导航控制器**，用于各个功能。

现在，我想从按钮 1 和按钮 2 导航到**主**
选项卡。当我按下按钮 1 时，它将切换到第二个选项卡，当我按下按钮 2 时，它将切换到第三个选项卡，正如我在图像中描述的那样。

我正在使用**`self.tabBarController.selectedViewController = [self.tabBarController.viewControllers objectAtIndex:1];`**代码来移动标签。

它正在转移，但没有调用**`ViewDidLoad`**该类的方法，也没有相应地加载数据。

那么，如何根据按钮的点击调用特定的选项卡？

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:36:28.643

你可以`self.tabBarController.selectedIndex = yourIndex;`像 Foram Mukund Shah 所说的那样使用。

但是，当您想更改索引时，您需要编写此代码`viewDidAppear`而不是在`viewDidLoad`它没有更改的情况下，因为您试图在加载标签栏之前更改索引。

所以，请尝试将您的代码放入`viewDidAppear`.

它将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:37:37.017

您需要尝试使用以下代码段一次

```
<tabbar_controller_object>.selectedIndex = <YOUR_tab_no_to_select>; 
```

# c# - 时间建设性和破坏性逆转

> ID：15940805
> 
> 赞同：1
> 
> 时间：2013-04-11T04:29:12.160
> 
> 标签：c#, benchmarking, reversing

我有一个家庭作业，我必须建设性地和破坏性地反转一个数组列表，并为不同长度的列表计时。我的 Arraylist 每次运行时都会更新，但它似乎没有在这些方法中注册，因为我没有得到我的计时值并且似乎找不到我的错误。

到目前为止，我的代码如下。

```
public ArrayList ConstructiveReverseDeveloped()
    {            
        ArrayList Temp = new ArrayList();
        for (int i = Developed.Count - 1; i >= 0; i--)
        {
            Apps cur = (Apps)Developed[i];
            Temp.Add(cur);
        }
        return Temp;
    }
    public void TimingConstructive()
    {
        DateTime startTime;
        TimeSpan endTime;
        startTime = DateTime.Now;
        ConstructiveReverseDeveloped();
        endTime = DateTime.Now.Subtract(startTime);
        Console.WriteLine("---------------------------------------------------------");
        Console.WriteLine("Time taken for Constructive Reverse of Developed : {0}", endTime);
    }

public void DestructiveReverseDeveloped()
    {
        //ArrayList x = cloneDeveloped();
        for (int i = Developed.Count - 1; i >= 0; i--)
        {
            Apps cur = (Apps)Developed[i];
            Developed.RemoveAt(i);
            Developed.Add(cur);
        }
    }
    public void TimingDestructive()
    {
        DateTime startTime;
        TimeSpan endTime;
        startTime = DateTime.Now;
        DestructiveReverseDeveloped();
        endTime = DateTime.Now.Subtract(startTime);
        Console.WriteLine("Time taken for Destructive Reverse of Developed : {0}",endTime.ToString());
        Console.WriteLine("---------------------------------------------------------");
    } 
```

你们能否指出我为什么没有得到计时值的正确方向？我不想要确切的答案，而只是帮助理解。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:37:04.747

您不希望 DateTime.Substract 中的 DateTime。只需获取 TimeSpan (DateTime.Now-startTime) 并打印它。您可能想打印 Total Miliseconds，因为这种操作非常快

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:18:27.770

你宁愿有一个计时器类。您的计时方法没有考虑垃圾收集和终结器方法。

这是一个例子

```
class Timer
{
    private DateTime startingTime;
    // stores starting time of code being tested
    private TimeSpan duration;
    // stores duration of code being tested
    public void startTime()
    {
        GC.Collect();   // force garbage collection
        GC.WaitForPendingFinalizers();
        /* wait until all heap contents finalizer methods have completed for removal of contents to be permanent */
        startingTime = DateTime.Now;
        // get current date/time
    }
    public void stopTime()
    {
        // .Subtract: TimeSpan subtraction
        duration = DateTime.Now.Subtract(startingTime);
    }

    public TimeSpan result()
    {
        return duration;
    }

} 
```

您的代码将类似于

```
public void TimingDestructive()
{
    Timer Time = new Timer();
    Time.startTime();
    DestructiveReverseDeveloped();
    Time.stopTime();
    Console.WriteLine("Time taken for Destructive Reverse of Developed : {0}ms",Time.result().TotalMilliseconds);
    Console.WriteLine("---------------------------------------------------------"); 
```

你不应该在执行你的反转方法之前克隆你的列表吗？如果您确实打算克隆它们，请在开始计时器和反转方法之前克隆它们。

# liquibase - 使用 dropwizard-migrations：找不到 liquibase.logging.Logger 的实现

> ID：15940806
> 
> 赞同：8
> 
> 时间：2013-04-11T04:29:17.207
> 
> 标签：liquibase, dropwizard

我遇到了一个非常奇怪的异常，我无法找出原因。当我运行 a`db status`时，我得到：

```
Caused by: liquibase.exception.ServiceNotFoundException: liquibase.exception.ServiceNotFoundException: liquibase.exception.ServiceNotFoundException: Could not find implementation of liquibase.logging.Logger
        at liquibase.logging.LogFactory.getLogger(LogFactory.java:19)
        at liquibase.logging.LogFactory.getLogger(LogFactory.java:30)
        at liquibase.database.DatabaseFactory.findCorrectDatabaseImplementation(DatabaseFactory.java:67)
        at liquibase.Liquibase.<init>(Liquibase.java:52)
        at com.yammer.dropwizard.migrations.ManagedLiquibase.<init>(ManagedLiquibase.java:47)
        at com.yammer.dropwizard.migrations.AbstractLiquibaseCommand.run(AbstractLiquibaseCommand.java:39)
        at com.yammer.dropwizard.cli.ConfiguredCommand.run(ConfiguredCommand.java:58)
        at com.yammer.dropwizard.cli.Cli.run(Cli.java:53)
        at com.yammer.dropwizard.Service.run(Service.java:61)
        at com.derp.SomeService.main(SomeService.java:27)
        ... 6 more
Caused by: liquibase.exception.ServiceNotFoundException: liquibase.exception.ServiceNotFoundException: Could not find implementation of liquibase.logging.Logger
        at liquibase.servicelocator.ServiceLocator.newInstance(ServiceLocator.java:179)
        at liquibase.logging.LogFactory.getLogger(LogFactory.java:17)
        ... 15 more
Caused by: liquibase.exception.ServiceNotFoundException: Could not find implementation of liquibase.logging.Logger
        at liquibase.servicelocator.ServiceLocator.findClass(ServiceLocator.java:145)
        at liquibase.servicelocator.ServiceLocator.newInstance(ServiceLocator.java:177)
        ... 16 more 
```

我不知道如何解决它。谷歌搜索了一下，这似乎是一个有点间歇性的问题，过去，在 Liquibase 中产生了错误修复。我没想到会在这样一个集成的功能中发生这种情况。我正在使用 dropwizard-core/hibernate/migrations 0.6.2。我正在使用com.smokejumperit.gradle.OneJarPlugin gradle插件将它全部打包，我认为它也负责类加载。

无论如何，我有点不知所措。有任何想法吗？有人见过这个吗？

# javascript - 字符串上的 Javascript 错误（未终止的字符串文字）

> ID：15940809
> 
> 赞同：2
> 
> 时间：2013-04-11T04:29:28.267
> 
> 标签：javascript, jsp

我的jsp中有以下内容：

```
var test = <%=Num%>; 
```

在这种情况下，Num 类似于 12345678,john,smith。

但是当我加载页面时，我收到以下错误：

```
Error: SyntaxError: unterminated string literal 
```

谁能帮帮我，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:32:43.783

由于您的值中不仅有数字，它不是数字，因此您需要将其视为 a`String`并将您的值用引号引起来

```
var test = "<%=Num%>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:30:33.937

```
var test = '<%=Num%>'; 
```

用引号括起来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T05:35:04.980

请[避免](http://balusc.blogspot.in/2010/07/how-to-avoid-java-code-in-jsp-files.html)使用`scriplets`

```
 var test = "${Num}"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T04:31:39.433

尝试`var test = "<%=Num%>";`

# ssl - Drupal - 简单编辑找不到

> ID：15940810
> 
> 赞同：0
> 
> 时间：2013-04-11T04:29:35.723
> 
> 标签：ssl, drupal-7, vimeo

好的，我一直在寻找有关如何修复此页面上的 vimeo 网址的几天： [https ://www.createjobsforusa.org](https://www.createjobsforusa.org)

基本上，我刚刚获得了 SSL 证书，我想将`http://{the vimeo url}`vimeo 链接视频更改为`https://{the vimeo url}`Simple edit 是我所需要的，但我找不到视频所在的位置。

内容块？我得到的只是这个的设置。页数？所以，我去“内容”，我看到一个巨大的页面列表，我看到一个叫做“主页”的页面，所以我点击`Edit`链接，页面的正文是空白的？好的，所以这必须来自其他地方，但是在哪里？

有人可以帮助我如何找到 vimeo 视频 URL 并将它们更改为“https://”而不是“http://”

我认为视图被称为：A-Spots...这是我单击编辑 A-Spot 视图时得到的图片：

![在此处输入图像描述](https://i.stack.imgur.com/Nb48O.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/5X8hn.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/qHvuV.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/qa4uk.jpg)

我到底应该在这里做什么？似乎有很多事情要做，但我似乎选择的每个选项仍然没有给我更改 vimeo URL 的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:39:47.717

视图只是选择节点（或其他实体）来显示它们。如果您编辑视图，您只需更改这些节点的选择或显示方式；您不编辑视图选择显示的节点。

如果您查看该视图的预览，您会注意到它显示了一些数字；这些数字是节点 ID。[只需从https://www.createjobsforusa.org/node/55291246/edit](https://www.createjobsforusa.org/node/55291246/edit)编辑节点；将 55291246 替换为显示的其他 ID，您将能够编辑视图中使用的所有节点。
如果这不起作用，[https://www.createjobsforusa.org/admin/content](https://www.createjobsforusa.org/admin/content)会列出站点中的所有内容。只需查找 ID 与该预览中显示的节点相同的节点，然后对其进行编辑。

# jquery - 按钮上的 Jquery

> ID：15940815
> 
> 赞同：0
> 
> 时间：2013-04-11T04:30:05.387
> 
> 标签：jquery

当再次单击按钮时，如何设置“ON”方法以撤消。所以一个开和关按钮。

```
 $('#videoNest span').on('click', function(e) {

    First Time Clicked
    //// ON

       $('<div class="off-overlay"></div>').insertAfter('#container');

           $('#example_video_1').addClass("light-grad");

    Second Time Clicked
    ///// OFF 

       remove div off-overlay $('<div class="off-overlay"></div>').insertAfter('#container');

         remove class  $('#example_video_1').addClass("light-grad");

    });

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:31:26.923

第一次单击后取消绑定单击并绑定到新的 OFF 事件。在 OFF 方法中做同样的事情

```
 $(this).unbind("click");
         $(this).on("click",function() { OFFFunction(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:33:26.690

您可以创建一个布尔变量并将其设置为 true = on 和 false = off 并在 if 语句中对其进行更改，例如：

```
if (boolean == true){
    // do stuff
    boolean = false
} else if (boolean == false) {
    // do stuff
    boolean = true
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:59:31.320

这是一个有效的 jsfiddle[示例](http://jsfiddle.net/ZWC9w/)

它可能与您的要求不完全相似，您必须对其进行更改。只是从中得到想法。

```
$('#videoNest span').on('click',function(){
    var flg =$('#example_video_1').hasClass("light-grad");

    $("#container +.off-overlay").toggle('slow',function(){
      if(flg)$('#example_video_1').removeClass("light-grad")         
      else $('#example_video_1').addClass("light-grad")         
    });     
}); 
```

给定的html：

```
<div id="videoNest">
    <span>Toggle</span>
    <div id="container">Container</div>
    <div class="off-overlay">overlay</div>
    <div id="example_video_1" > example_video_1 </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T04:41:32.073

您可以执行以下操作

**[现场演示在这里](http://jsfiddle.net/EBHbN/1/)**

```
$("#toggle_button").click(function(){
    if($("#OnOffDiv").hasClass("On"))
    {
        $("#OnOffDiv").removeClass("On");
        $("#OnOffDiv").addClass("Off");
        $("#OnOffDiv").html("OFF");
    }
    else
    {
        $("#OnOffDiv").removeClass("Off");
        $("#OnOffDiv").addClass("On");
        $("#OnOffDiv").html("ON");
    }
}); 
```

# javascript - 加密模块 - Node.js

> ID：15940817
> 
> 赞同：0
> 
> 时间：2013-04-11T04:30:14.283
> 
> 标签：javascript, node.js, express, node-crypto

在不将文件存储在数据库中的情况下，比较文件哈希的最简单方法是什么？

例如：

```
var filename = __dirname + '/../public/index.html';
var shasum = crypto.createHash('sha1');

var s = fs.ReadStream(filename);
s.on('data', function(d) {
  shasum.update(d);
});

s.on('end', function() {
  var d = shasum.digest('hex');
  console.log(d + ' ' + filename);

  fs.writeFile(__dirname + "/../public/log.txt", d.toString() + '\n', function(err) {
     if(err) {
         console.log(err);
      } else {
         console.log("The file was saved!");
      }
  }); 
}); 
```

上面的代码返回 HTML 文件的哈希值。如果我编辑文件，我如何知道它是否已更改？换句话说，我如何知道哈希是否已更改？

有什么建议么？

**已编辑**

现在哈希被保存在日志文件中。如何从文件中检索哈希并将其与新生成的哈希匹配？一个代码示例会让我更好地理解。

这个[问题](https://stackoverflow.com/questions/15789744/store-hash-with-node-js)没有区别，但我还不清楚如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:20:10.787

如果您要查找文件的更改，则可以使用 Node 的文件系统函数之一，`fs.watch`. 这是它的使用方式：

```
fs.watch(filename, function (event, filename) {
  //event is either 'rename' or 'change'
  //filename is the name of the file which triggered the event
}); 
```

但是手表功能不是很一致，因此您可以将`fs.watchFile`其用作替代方案。`fs.watchFile`使用 stat 轮询，因此它比`fs.watch`立即检测文件更改要慢很多。

观看文件将返回 的实例`fs.FSWatcher`，其中包含事件`change`和`error`。调用`.close`将停止监视文件的更改。

这是与您的代码相关的示例：

```
var filename = __dirname + '/../public/index.html';
var shasum = crypto.createHash('sha1');

var oldhash = null;

var s = fs.ReadStream(filename);
s.on('data', function(d) {
  shasum.update(d);
});

s.on('end', function() {
  var d = shasum.digest('hex');
  console.log(d + ' ' + filename);
  oldhash = d.toString();

  fs.writeFile(__dirname + "/../public/log.txt", d.toString() + '\n', function(err) {
     if(err) {
         console.log(err);
      }
      else {
         console.log("The file was saved!");
      }
  }); 
});

//watch the log for changes
fs.watch(__dirname + "/../public/log.txt", function (event, filename) {
  //read the log contents
  fs.readFile(__dirname + "/../public/log.txt", function (err, data) {
    //match variable data with the old hash
    if (data == oldhash) {
      //do something
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:38:54.343

[这个问题和你上一个](https://stackoverflow.com/questions/15789744/store-hash-with-node-js)问题有什么区别？如果您不想将其存储在数据库中，请将其存储为文件。如果您想保存多个文件的哈希，则可以将它们放在 JSON 对象中并将它们写为 .json 文件，以便它们易于读/写。

**编辑**

鉴于您在问题中添加的内容，它应该非常简单。您可以编写一个函数来进行检查和重写：

```
function updateHash (name, html, callback) {
    var sha = crypto.createHash('sha1');
    sha.update(html);
    var newHash = sha.digest('hex');

    var hashFileName = name + '.sha';

    fs.readFile(hashFileName, 'utf8', function (err, oldHash) {
        var changed = true;
        if (err)
            console.log(err); // probably indicates the file doesn't exist, but you should consider doing better error handling

        if (oldHash === newHash)
            changed = false;

        fs.writeFile(hashFileName, newHash, { encoding: 'utf8' }, function (err) {
            callback(err, changed);
        });
    });
}

updateHash('index.html', "<html><head><title>...", function (err, isChanged) {
    // do something with this information ?
    console.log(isChanged);
}); 
```

# winforms - 如何将非默认按钮添加到 winform

> ID：15940818
> 
> 赞同：0
> 
> 时间：2013-04-11T04:30:23.367
> 
> 标签：winforms, jbutton

有没有办法在一个看起来不像默认按钮的winform中添加一个好看的按钮？我想添加一些看起来像 java jbutton 的东西，它就像一个完美的矩形，它是蓝色的，等等。

我知道您可以更改按钮的颜色和字体，但它永远不会看起来正确。那么是否有不同的非 WPF 方法来更改 Windows 窗体中按钮的外观或外观？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:07:59.797

如果您想“剥皮”它，您可以创建一个与您的按钮大小相同的图像，然后使用 BackgroundImage 属性进行设置。将 FlatStyleProperty 设置为 Flat。

你可以得到这样的结果：

![示例按钮](https://i.stack.imgur.com/2DFOp.jpg)

或者，您可以使用元素宿主控件在您的 WinForms 应用程序中托管 WPF 内容，根据这个问题：[Using a custom WPF control in WinForms](https://stackoverflow.com/questions/535812/using-a-custom-wpf-control-in-winforms)

# python - 如何返回至少 4D 的数组：模拟 numpy.atleast_4d 的有效方法

> ID：15940831
> 
> 赞同：5
> 
> 时间：2013-04-11T04:31:36.467
> 
> 标签：python, arrays, multidimensional-array, numpy

numpy 提供了三个方便的例程将数组转换为至少 1D、2D 或 3D 数组，例如通过[numpy.atleast_3d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.atleast_3d.html#numpy.atleast_3d)

我需要一个等价的维度：`atleast_4d`. 我可以想到使用嵌套 if 语句的各种方法，但我想知道是否有更有效和更快的方法来返回相关数组。在您的回答中，如果可以的话，我很想看看执行速度的估计（O（n））。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T07:05:52.387

该[`np.array`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)方法有一个可选的`ndmin`关键字参数：

> 指定结果数组应具有的最小维数。将根据需要预先添加到形状以满足此要求。

如果你也设置`copy=False`，你应该接近你所追求的。

* * *

作为自己动手做的替代方案，如果您想要额外的维度尾随而不是领先：

```
arr.shape += (1,) * (4 - arr.ndim) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:37:16.203

为什么不能像这样简单：

```
import numpy as np
def atleast_4d(x):
    if x.ndim < 4:
        y = np.expand_dims(np.atleast_3d(x), axis=3)
    else:
        y = x

    return y 
```

IE。如果维数小于四，则调用`atleast_3d`并在末尾附加一个额外的维度，否则只返回数组不变。

# lighttpd - lighttpd coredump 启动时。在服务器中找到 6w+ 核心文件。它喜欢闭环核心转储

> ID：15940835
> 
> 赞同：0
> 
> 时间：2013-04-11T04:31:57.090
> 
> 标签：lighttpd

核心转储信息：</p>

```
(gdb) bt

#0  0x0000000000004296 in ?? ()
#1  0x00007fc6d7bb898d in mod_proxy_trigger (srv=0x58a0d0, p_d=Variable "p_d" is not available.
) at mod_proxy_core.c:3140
#2  0x0000000000428a55 in plugins_call_handle_trigger (srv=0x58a0d0) at plugin.c:430
#3  0x00000000004156af in main (argc=Variable "argc" is not available.
) at server.c:636 
```

它不能被复制。

lighttpd 的版本是`lighttpd-1.5.0.1600`

# java - UDP 上的视频文件包——增量读取和流式传输

> ID：15940836
> 
> 赞同：2
> 
> 时间：2013-04-11T04:32:03.010
> 
> 标签：java, sockets, networking, udp, datagram

我想使用 Java 中的 UDP DatagramPacket 将从磁盘读取的视频文件传输到接收器。

关键点如下：虽然要传输的文件是从磁盘读取的，但我应该假设我不知道文件大小。需要增量读取整个文件，并且文件的数据报包应该是不同大小的。

简而言之，我应该假设我正在将实时视频流式传输到接收器，而不知道我完全需要发送多少数据以及数据将以什么速率生成。

现在，我有一个代码可以立即读取磁盘上的文件并转换为数据报包以使用 UDP 套接字进行传输。但是我不知道如何在不知道原始文件大小的情况下将文件打包并逐步读取以模拟视频的实时流。

使用 Java 实现这个想法的任何输入都将非常有用。一旦我得到这个基本的东西，我需要实现一个实时文件传输协议。

发件人：

```
 File file = new File("/crazy.mp4");
        FileInputStream fis = new FileInputStream(file);
        DatagramPacket pack;

        int size = 0;
        byte[] buffer = new byte[((int) file.length())];
        ByteBuffer bb = ByteBuffer.allocate(4);
        bb.order(ByteOrder.BIG_ENDIAN);

        while (true) {
            size = fis.read(buffer);                
            pack = new DatagramPacket(buffer, buffer.length, address,
                    packet.getPort());
            socket.send(pack);
        } 
```

接收者：

```
 File file = new File("/crazyRecv.mp4");
     FileOutputStream fos = new FileOutputStream(file);  
     DatagramPacket rpacket = new DatagramPacket(buffer, buffer.length);

        while (true) {
            socket.receive(rpacket);
            fos.write(rpacket.getData(), 0, rpacket.getLength());
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:27:11.267

这段发送和接收 UDP 数据包的代码不能保证在客户端成功地重新创建文件。

1.  UDP 是不可靠的 - 没有像 TCP 那样的低级确认和数据包重传机制，因此您必须实现这一点。数据包可能会丢失并且在客户端永远不会收到
2.  UDP 不是顺序的 - 您不能只期望 UDP 数据包在客户端按顺序接收。第一个数据包可能会先到达最后一个数据包，最后一个数据包会先到达，随后会损坏文件。TCP 保证顺序传递。

如果您仍想使用，您必须编写自己的应用程序级协议。例如

1.  您发送内容为“文件开始”的数据包
2.  客户端为该“文件开始：已接收”发送一个确认数据包
3.  如果您没有收到“文件开始：已收到”，那么您必须转到第 1 步
4.  然后发送具有唯一 id 的数据包“数据包 1”+数据包数据
5.  客户端为该“数据包 1：已接收”发送一个 ack 数据包
6.  如果您没有收到“数据包 1：已收到”，那么您必须转到第 4 步
7.  对所有数据包执行步骤 4 - 6
8.  您发送内容为“文件结束”的数据包
9.  客户端为该“文件结束：已接收”发送一个确认数据包
10.  如果您没有收到“文件结束：已收到”，那么您必须转到第 8 步

# sql - Yii 与 sqlite 3

> ID：15940838
> 
> 赞同：3
> 
> 时间：2013-04-11T04:32:12.073
> 
> 标签：sql, model, yii

在 console.php 和 main.php 的 config 文件夹中

我在用：

```
'db'=>array(
    'connectionString' => 'sqlite:protected/data/qdr.sqlite',
), 
```

sqlite db 在数据文件夹中。

现在当我尝试创建模型用户时（有一个名为 users 的表）

使用命令 yiic shell model users

它显示错误：

```
>> model users
exception 'CDbException' with message 'CDbConnection failed to open the DB conne
ction: SQLSTATE[HY000] [14] unable to open database file' in F:\wamp\www\qdr\fra
mework\db\CDbConnection.php:381
Stack trace:
#0 F:\wamp\www\qdr\framework\db\CDbConnection.php(330): CDbConnection->open()
#1 F:\wamp\www\qdr\framework\db\CDbConnection.php(308): CDbConnection->setActive
(true)
#2 F:\wamp\www\qdr\framework\base\CModule.php(387): CDbConnection->init()
#3 F:\wamp\www\qdr\framework\base\CApplication.php(438): CModule->getComponent('
db')
#4 F:\wamp\www\qdr\framework\cli\commands\shell\ModelCommand.php(259): CApplicat
ion->getDb()
#5 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(128): ModelCommand->r
un(Array)
#6 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(99): ShellCommand->ru
nShell()
#7 F:\wamp\www\qdr\framework\console\CConsoleCommandRunner.php(67): ShellCommand
->run(Array)
#8 F:\wamp\www\qdr\framework\console\CConsoleApplication.php(91): CConsoleComman
dRunner->run(Array)
#9 F:\wamp\www\qdr\framework\base\CApplication.php(169): CConsoleApplication->pr
ocessRequest()
#10 F:\wamp\www\qdr\framework\yiic.php(33): CApplication->run()
#11 F:\wamp\www\qdr\framework\yiic(14): require_once('F:\wamp\www\qdr...')
#12 {main}
>> model users
exception 'CDbException' with message 'CDbConnection failed to open the DB conne
ction: SQLSTATE[HY000] [14] unable to open database file' in F:\wamp\www\qdr\fra
mework\db\CDbConnection.php:381
Stack trace:
#0 F:\wamp\www\qdr\framework\db\CDbConnection.php(330): CDbConnection->open()
#1 F:\wamp\www\qdr\framework\db\CDbConnection.php(308): CDbConnection->setActive
(true)
#2 F:\wamp\www\qdr\framework\base\CModule.php(387): CDbConnection->init()
#3 F:\wamp\www\qdr\framework\base\CApplication.php(438): CModule->getComponent('
db')
#4 F:\wamp\www\qdr\framework\cli\commands\shell\ModelCommand.php(259): CApplicat
ion->getDb()
#5 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(128): ModelCommand->r
un(Array)
#6 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(99): ShellCommand->ru
nShell()
#7 F:\wamp\www\qdr\framework\console\CConsoleCommandRunner.php(67): ShellCommand
->run(Array)
#8 F:\wamp\www\qdr\framework\console\CConsoleApplication.php(91): CConsoleComman
dRunner->run(Array)
#9 F:\wamp\www\qdr\framework\base\CApplication.php(169): CConsoleApplication->pr
ocessRequest()
#10 F:\wamp\www\qdr\framework\yiic.php(33): CApplication->run()
#11 F:\wamp\www\qdr\framework\yiic(14): require_once('F:\wamp\www\qdr...')
#12 {main}
>> model users
exception 'CDbException' with message 'CDbConnection failed to open the DB conne
ction: SQLSTATE[HY000] [14] unable to open database file' in F:\wamp\www\qdr\fra
mework\db\CDbConnection.php:381
Stack trace:
#0 F:\wamp\www\qdr\framework\db\CDbConnection.php(330): CDbConnection->open()
#1 F:\wamp\www\qdr\framework\db\CDbConnection.php(308): CDbConnection->setActive
(true)
#2 F:\wamp\www\qdr\framework\base\CModule.php(387): CDbConnection->init()
#3 F:\wamp\www\qdr\framework\base\CApplication.php(438): CModule->getComponent('
db')
#4 F:\wamp\www\qdr\framework\cli\commands\shell\ModelCommand.php(259): CApplicat
ion->getDb()
#5 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(128): ModelCommand->r
un(Array)
#6 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(99): ShellCommand->ru
nShell()
#7 F:\wamp\www\qdr\framework\console\CConsoleCommandRunner.php(67): ShellCommand
->run(Array)
#8 F:\wamp\www\qdr\framework\console\CConsoleApplication.php(91): CConsoleComman
dRunner->run(Array)
#9 F:\wamp\www\qdr\framework\base\CApplication.php(169): CConsoleApplication->pr
ocessRequest()
#10 F:\wamp\www\qdr\framework\yiic.php(33): CApplication->run()
#11 F:\wamp\www\qdr\framework\yiic(14): require_once('F:\wamp\www\qdr...')
#12 {main}
>> model users > test.txt
exception 'CDbException' with message 'CDbConnection failed to open the DB conne
ction: SQLSTATE[HY000] [14] unable to open database file' in F:\wamp\www\qdr\fra
mework\db\CDbConnection.php:381
Stack trace:
#0 F:\wamp\www\qdr\framework\db\CDbConnection.php(330): CDbConnection->open()
#1 F:\wamp\www\qdr\framework\db\CDbConnection.php(308): CDbConnection->setActive
(true)
#2 F:\wamp\www\qdr\framework\base\CModule.php(387): CDbConnection->init()
#3 F:\wamp\www\qdr\framework\base\CApplication.php(438): CModule->getComponent('
db')
#4 F:\wamp\www\qdr\framework\cli\commands\shell\ModelCommand.php(259): CApplicat
ion->getDb()
#5 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(128): ModelCommand->r
un(Array)
#6 F:\wamp\www\qdr\framework\cli\commands\ShellCommand.php(99): ShellCommand->ru
nShell()
#7 F:\wamp\www\qdr\framework\console\CConsoleCommandRunner.php(67): ShellCommand
->run(Array)
#8 F:\wamp\www\qdr\framework\console\CConsoleApplication.php(91): CConsoleComman
dRunner->run(Array)
#9 F:\wamp\www\qdr\framework\base\CApplication.php(169): CConsoleApplication->pr
ocessRequest()
#10 F:\wamp\www\qdr\framework\yiic.php(33): CApplication->run()
#11 F:\wamp\www\qdr\framework\yiic(14): require_once('F:\wamp\www\qdr...')
#12 {main} 
```

怎么办，这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:49:13.077

只需在 main.php 中使用 'connectionString'=>'sqlite:f:\wamp\www\qdr\protected\data\testdrive.db' 它可以工作....ta-da.......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:23:01.617

我想到了。问题出在服务器上。我在所有固定的地方重新安装了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:13:34.663

Yii 有两个配置文件。控制台配置与网站配置不同。也许您还没有[在配置文件中设置正确的值](http://www.yiiframework.com/doc/guide/1.1/en/topics.console#customizing-console-applications)。

# node.js - 使用主干和 node.js 更新 mongo db

> ID：15940842
> 
> 赞同：0
> 
> 时间：2013-04-11T04:32:27.960
> 
> 标签：node.js, mongodb, backbone.js

我正在使用上述技术构建我的第一个应用程序。在过去的几周里，我一直在使用 Backbone，现在我正在尝试使用带有 mongo db 的 node 上的 express 构建一个 api。（注意，我现在只是使用本机节点 mongo 模块。）

当我用来自 mongo 的数据填充我的骨干集合时，默认情况下它带有 _id 字段。在我尝试更新 mongo 中的文档之前，这不是问题。Backbone 将 _id 作为字符串传回，它应该是一个对象 id。Mongo 更新失败，因为它认为我正在尝试更改您不允许执行的 _id。这是我用数据更新 mongo 的函数的副本。

```
exports.updateMenu = function(req, res) {
var id = req.params._id;
var item = req.body;

db.collection('menu', function(err, collection) {
    collection.update({'_id':new BSON.ObjectID(id)}, item, {safe:true}, function(err, result) {
        if (err) {
            console.log('Error updating menu: ' + err);
            res.send({'error':'An error has occurred'});
        } else {
            console.log('' + result + ' document(s) updated');
            res.send(item);
        }
    });
}); 
```

}

这是我得到的错误。如您所见，我提供的带有 _id 的文档正试图将 _id 更改为字符串。

更新菜单时出错：MongoError: cannot change _id of a document old:{ id: 1, name: "Hotdog", cost: 2.99, description: "Large Beef hotdog with your selection of cheese and sauce", category: "food", _id: ObjectId('51645e0bd63580bc6c000001') } new:{ id: "1", name: "Hotdog", cost: "77", description: "Large Beef hotdog with your selection of cheese and sauce", category: "食物" ，_id：“51645e0bd63580bc6c000001”，错误：“发生错误”}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:18:56.460

尝试从项目中删除 _id 成员。所以前 3 行应该变成以下 4 行：

```
exports.updateMenu = function(req, res) {
    var id = req.params._id;
    var item = req.body;
    delete( item._id ); 
```

# dataset - 如何确定哪个数据集用于特定变量？

> ID：15940847
> 
> 赞同：3
> 
> 时间：2013-04-11T04:33:05.520
> 
> 标签：dataset, ssrs-2008, reporting-services

我想知道如何确定报告中的 [FirstName] 是从 dataset1 还是 dataset2 中提取的？？？

![在此处输入图像描述](https://i.stack.imgur.com/aat5O.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:14:51.543

以 Konza 的评论为基础：tablix（或表）连接到一个数据集。右键单击所选 Tablix 灰色边框的左上角以显示 Tablix 属性对话框。或者在 Visual Studio 属性窗格中查看 tablix 的属性。

该属性将在对话框中列为“数据集名称”，在属性窗格中列为“数据集名称”。

# matlab - matlab函数调用目录

> ID：15940853
> 
> 赞同：0
> 
> 时间：2013-04-11T04:33:31.893
> 
> 标签：matlab

所以我在运行 Matlab 脚本时遇到了这个问题。这是一个简单的例子来说明它：

因此，概述文件结构很重要：

```
MainFolder
    script.m
    SubFolder
        a1.csv
        a2.csv
        a3.csv 
```

现在说我有一个这样的脚本：

-> 脚本.m

```
dir 
```

它只会打印出文件夹中的文件。

现在奇怪的是，如果我像这样在子文件夹中运行脚本：

```
>>script 
```

它会这样做：

```
>> a1.csv    a2.csv    a3.csv 
```

但如果我在文件夹中这样做：

```
>>run('C:\Users\....\MainFolder\script.m') 
```

它只会打印出来

```
>> script.m 
```

所以很明显它表现得好像我运行它形式`MainFolder`而不是`SubFolder`。

这个功能有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:41:06.153

该`dir`命令显示的是 Matlab 当前目录的目录内容，*而不是*脚本所在的目录内容。因此，当您调用该脚本时，该脚本会向您显示您在 Matlab 命令提示符中碰巧所在位置的目录内容。

要得到你想要的，在脚本中使用它：

```
dir(fileparts(mfilename('fullpath'))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:58:16.357

用于`pwd`查看当前目录

用于`cd`更改目录

用于`path`查看您的项目文件夹是否包含在路径中

用于`which`查看您正在调用正确的 *.m 文件（以防路径上有多个同名的 .m 文件）

# iphone - 使用 FBNativeDialog 共享提要

> ID：15940854
> 
> 赞同：0
> 
> 时间：2013-04-11T04:33:40.210
> 
> 标签：iphone, ios, facebook

我想通过使用以下参数共享一个提要`FBNativeDialog`：

```
NSMutableDictionary *params = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                   link, @"link",
                                   url, @"picture",
                                   strText, @"message",
                                   @"name", @"name",
                                   nil]; 
```

我看到Dialog不支持这样的，但是有什么办法吗？

P / s：应该使用Dialog，然后用户也可以输入他们的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:48:18.547

您可以使用简单的网络视图并显示提要，例如

```
NSString *theURL = [NSString stringWithFormat:@"http://www.google.com/"];
theURL = [theURL stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:theURL]];
NSURLResponse *resp = nil;
NSError *err = nil;
NSData *response;
response = [NSURLConnection sendSynchronousRequest: theRequest returningResponse: &resp error: &err];
if (err != nil)
{
   //write some thing
}
else
{
          NSURL *url;
       url = [NSURL URLWithString: @"https://www.facebook.com/UwMadisonConfessions?fref=ts"];

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [webView loadRequest:requestObj];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:18:02.987

试试`SLComposeViewController`

```
SLComposeViewController *composerVC = [SLComposeViewController composeViewControllerForServiceType:
                                               SLServiceTypeFacebook];
        [composerVC addURL:someUrl];
        [composerVC addImage:someImage];
        [composerVC setInitialText:someText]; 
```

# javascript - td onclick 不工作

> ID：15940856
> 
> 赞同：1
> 
> 时间：2013-04-11T04:34:04.590
> 
> 标签：javascript, jquery, html-table

我在 MVC4 中工作并使用表格，当我在`<td>`表格元素上设置 onclick 时，相关功能不起作用。

这就是我正在做的-

```
 <tr>

      <td style="cursor:pointer" onclick="D();">
       #= DisplayName #</td>
      </tr> 
```

**jQuery函数-**

```
<script type="text/javascript">

                $(document).ready(function D() {
                    $('td').click(function (event) { loadPartially(event, '@Url.Contact_PartialView_Main()?ContactID=@Model.ContactID') });
                    alert("aa");
                });
            </script> 
```

当这不起作用时，我尝试给它一个ID-

```
 <tr>

          <td style="cursor:pointer" id="Open">
           #= DisplayName #</td>
          </tr> 
```

**用于此的 jQuery 函数-**

```
<script type="text/javascript">

                    $(document).ready(function {
                        $('#Open').click(function (event) { loadPartially(event, '@Url.Contact_PartialView_Main()?ContactID=@Model.ContactID') });
                        alert("aa");
                    });
                </script> 
```

我正在尝试通过单击此表元素来获取加载部分事件。

但不知何故，它不起作用。我不确定我是否可以在`<td>`表格元素上使用 onclick 功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:38:45.333

改变：

```
$(document).ready(function { 
```

至

```
$(document).ready(function () { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T05:10:16.137

这里的问题是您将旧式方法与 jquery 方法混合在一起（诚然，您还混合了根本行不通的语法）。

以下是在没有 jquery 的情况下完成绑定 onclick 事件的方法：

```
<script type="text/javascript">
    function D() {
       alert('omg!');
    }
</script>

...

<td onclick="D()">
</td> 
```

现在，如果您想使用 jquery 方法，它将如下所示：

```
<script type="text/javascript">
    $('#IdSelector').click(function() {
        alert('omg!');
    });
</script>

...

<td id="IdSelector">
</td> 
```

使用 jquery 方法，您牺牲了一种简单的能力来立即识别在 td 的 onclick 期间将发生什么，以分离 javascript 逻辑和表示层 (html) 之间的关注点

我更喜欢 jQuery 方法，因为它不必担心在执行内联 javascript 时需要注意的一些烦人的语法问题，并且 IMO 更具可读性。

**编辑：**

jquery 方法的演示 - [http://jsfiddle.net/jSnAh/](http://jsfiddle.net/jSnAh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T04:38:31.880

```
$(document).ready(function(){//You have missed paranthesis of function()
     $('#Open').live('click',function(event) { 
             alert("aa");
             loadPartially(event, '@Url.Contact_PartialView_Main()?ContactID=@Model.ContactID');
      });  
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T04:42:00.423

`onclick`上一个`<td>`是有效的。

把你的`alert`作为函数的第一行，`D()`以确保它被正确调用。

使用 FireFox，安装 Web Developer 工具栏和 Firebug 插件。按 F12，单击控制台选项卡，然后单击`<td>`. 如果有任何错误，您将在控制台选项卡中看到它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T04:42:28.020

```
Firstly give a id or class to your td

<tr>

  <td style="cursor:pointer" id='PerformAction'>
   #= DisplayName #</td>
  </tr>

$(document).ready(function (){
$('#PerformAction').click(function (event) { 
    loadPartially(event, '@Url.Contact_PartialView_Main()?ContactID=@Model.ContactID')
    alert("aa");
});
}); 
```

# java - 介于 0 和 0.06 之间的 Java 随机数

> ID：15940862
> 
> 赞同：3
> 
> 时间：2013-04-11T04:34:45.803
> 
> 标签：java, random

在 Java 中，我需要在`0`和之间随机生成一个数字`0.06`。

我在这里看到另一个问题，以下代码可以解决问题：

```
Random generator = new Random();
double number = generator.nextDouble() * .06; 
```

但是，这样做会给我很长的数字，比如`0.007044013589130205`and `0.03656588431980957`，我认为这不是我的导师想要的。

无论如何生成0到0.06之间只有两位或三位小数的随机数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T04:40:28.713

如果您想要一个介于 之间的数字`[0 - 0.06]`，`0.01`您可以执行以下操作：

```
Random generator = new Random();
int number = generator.nextInt(7);
double result = number / 100.0; 
```

您可以将公式推广到`number = generator.nextInt(max - min + 1) + min;`哪里`max`以及`min`将分别是您要生成的最高和最低数字。这将从 中生成一个数字`[min to max+1]`。

要增加生成数字的小数位，只需将该数字除以 10 的适当幂（*例如，* 1000、10000、...）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T04:40:35.650

在内部，Java`double`值是二进制浮点表示。它们没有小数位。您可以将双精度数*格式化*为具有指定小数位数的以 10 为底的数字字符串。例如，要获得三位小数（精度 0.001），您可以使用：

```
String formatted = String.format("%.3f", number); 
```

如果您不需要对数字进行任何计算并且想要两位或三位小数，只需打印`0.0`一个介于 00 和 60（含）之间的两位随机整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T04:50:57.263

我假设您需要精度为**0.001**，所以试试这个：

```
 Random r = new Random();
    int ret = r.nextInt(60 + 1);
    return ret / 1000.0; 
```

**这将平均**生成 [0,0.060] ，差异倍数为 0.001，这可能是您想要的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T04:45:14.433

由于您正在处理销售税，您应该知道[为什么不使用 Double 或 Float 来表示货币？](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)和[使用 BigDecimal 处理货币](https://stackoverflow.com/questions/1359817/using-bigdecimal-to-work-with-currencies)

要生成具有`BigDecimal`范围和有效数字# 约束的随机数，请参阅[如何在 Java 中创建随机 BigDecimal？](https://stackoverflow.com/a/5028097/20394)

# android - LocationManager.getLastKnownLocation 在系统启动后运行时返回 null

> ID：15940865
> 
> 赞同：0
> 
> 时间：2013-04-11T04:35:16.617
> 
> 标签：android

我的 appwidget 获取位置以获取预测。作为标题，系统重新启动后无法获取位置。

```
 LocationManager lm = (LocationManager)mContext.getSystemService(Context.LOCATION_SERVICE);

    Criteria criteria = new Criteria();
    criteria.setBearingRequired(false); 
    criteria.setSpeedRequired(false);   
    criteria.setAltitudeRequired(false);    
    String provider = lm.getBestProvider(criteria, true);
    Location loc = lm.getLastKnownLocation(provider);

    double lat = loc.getLatitude(); //null
    double lon = loc.getLongitude();/null 
```

为什么这些在系统重新启动后为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:37:41.373

使用`Broadcastreceiver on reboot`

```
// Do something onReceive()

@Override
public void onReceive(Context context, Intent intent) {

//Do something after reboot
} 
```

请参阅此链接：

[启动时的 Android BroadcastReceiver - 当 Activity 处于后台时继续运行](https://stackoverflow.com/questions/5290141/android-broadcastreceiver-on-startup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:32:34.203

这是因为在启动时 GPS 和 Wifi/数据连接都是`OFF`。所以，位置为空。您需要更改一些可以提示用户打开[**GPS Settings**](https://stackoverflow.com/questions/2021176/how-can-i-check-the-current-status-of-the-gps-receiver)或[**Wifi Settings**](https://stackoverflow.com/a/4668583/1221203)的代码。

# jquery - struts2 jquery：从tabbedpanel中的ajax调用返回的html溢出选项卡之外

> ID：15940871
> 
> 赞同：0
> 
> 时间：2013-04-11T04:35:55.207
> 
> 标签：jquery, struts2, struts2-jquery

我在这里有一个泡菜的小茴香。我正在使用 struts2-jquery 的标签面板。我有多个选项卡，每个选项卡都通过 ajax 返回 html 内容。

我的问题是我返回的 html 似乎破坏了选项卡式面板中选项卡的布局。选项卡结束，返回的 html 溢出到选项卡末尾之外和下方（视觉上）。

我检查了我的选项卡正在进行的 ajax 调用，并且返回的 html 是有效的。如果有一个额外的开始元素或一个额外的结束元素，您可能会期待这种行为，但 html 看起来很完美。这是加载选项卡式面板的 jsp 页面示例。
我让这个项目使用 struts2 dojo 插件工作，但发现 struts2-jquery 插件的选项卡面板上的动画等更整洁。使用 struts-dojo tabbedpanel 像这样返回 html 效果很好。关于什么会导致这种情况的任何想法？

```
 <sj:tabbedpanel id="remotetabs" selectedTab="1" show="true" hide="'fade'" collapsible="true" sortable="true" cache="true">

        <s:url var="remoteUrlFourDay" action="fourdayforecast.action">
            <s:param name="name"><s:property value="name"/></s:param>
            <s:param name="zipcode"><s:property value="zipcode"/></s:param>
        </s:url>
        <sj:tab id="fourday" href="%{remoteUrlFourDay}" label="4 Day Forecast" errorText=" "/>

        <s:url var="remoteUrl24Hour" action="hourlyforecast.action">
            <s:param name="name"><s:property value="name"/></s:param>
            <s:param name="zipcode"><s:property value="zipcode"/></s:param>
        </s:url>
        <sj:tab id="two" href="%{remoteUrl24Hour}" dataType="html" label="24 Hour Forecast" errorText=" "/>

        <s:url var="remoteUrlTenDay" action="tendayforecast.action">
            <s:param name="name"><s:property value="name"/></s:param>
            <s:param name="zipcode"><s:property value="zipcode"/></s:param>
        </s:url>
        <sj:tab id="tenday" href="%{remoteUrlTenDay}" label="Ten Day Forecast"   errorText=" "/>

        <s:url var="remoteUrlTest" action="webcams.action">
            <s:param name="name"><s:property value="name"/></s:param>
            <s:param name="zipcode"><s:property value="zipcode"/></s:param>
        </s:url>
        <sj:tab id="test" href="%{remoteUrlTest}" label="Test" errorText=" "/>
    </sj:tabbedpanel> 
```

根据 Alexandr 的要求，这里是 html。我试着把它放在一个代码块中，但它的格式很有趣，所以我只是在我的网络服务器上托管了返回的 html。 [从有问题的页面完全生成 Html](http://binarybeing.com/files/code/various/weatherhtml.html) 只需查看页面的源代码即可查看 html。这是 html 中用于返回的 ajax 的 2 个 css 样式

```
.block {
width: 200px;
height: 160px;
margin: 5px 10px 10px 5px;
padding: 5px;
border: 5px solid #94BEFF;
float: left; }

#wrap {
background-color: white;
margin: 0 auto;
} 
```

![我的项目的布局问题](https://i.stack.imgur.com/w6LaR.jpg)

# algorithm - 跨日志线相似性的算法分析？

> ID：15940874
> 
> 赞同：1
> 
> 时间：2013-04-11T04:36:33.123
> 
> 标签：algorithm, logging, machine-learning, analysis

我有日志线，我正在尝试寻找模式，或分析不同时间的相似性。

每个日志行可以分解为：

1.  时间戳
2.  模块/功能
3.  有效负载（即实际的日志消息）。

是否有任何算法方法可以在一组日志中找到相似性？

我知道比较字符串的 Levenshtein 距离之类的事情，但是，我希望有一种更通用的方法可以用来在日志文件中运行？

可能没有一个万能的解决方案（尽管如果有，请告诉我！） - 但是指向正确方向的指针，或者我可以寻找更多信息的地方会很棒。

编辑 - 日志类型的一些示例

```
11:30:00.028747923 [Debug ] [Skywalker] [BuyOrNot] session(server1) animal_type(cats) simpleprice(21643.5) complexprice(21641.9 - 21645.1) supercomplexprice(21641.9 - 21644.1)
11:30:00.028882087 [Debug ] [Skywalker] [BuyOrNot] session(server1) animal_type(cats) simpleprice(21643.2) complexprice(21643.2 - 21643.2) supercomplexprice(21643.2 - 21643.2)
11:30:00.039708519 [Debug ] [Skywalker] [BuyOrNot] session(server1) animal_type(cats) simpleprice(10465.8) complexprice(10465.8 - 10465.8) supercomplexprice(10465.8 - 10465.8)
11:30:00.039718896 [Debug ] [Skywalker] [BuyOrNot] session(server1) animal_type(cats) simpleprice(10466.5) complexprice(10465.9 - 10467.1) supercomplexprice(10465.9 - 10466.7)
11:30:00.040049452 [Debug ] [Skywalker] [BuyOrNot] session(server1) animal_type(cats) simpleprice(-0.184) complexprice(-0.184 - -0.184) supercomplexprice(-0.184 - -0.184)

11:30:00.704976265 [Debug ] [Skywalker] [SetChickenParameter] composite(wheatbag) leg(MARKET:388, 10456) legParams updated
11:30:00.704984746 [Info  ] [Skywalker] [OnCompositeLegVolatileParamsSetMessage] client(f1_ar_cmp_hk_tko_061), composite(wheatbag) composite leg(ID={Market="MARKET" Feedcode="386"} Identifier=10455) params(bidPrice=0 askPrice=0)
11:30:00.704992314 [Debug ] [Skywalker] [SetChickenParameter] composite(wheatbag) leg(MARKET:386, 10455) legParams updated
11:30:00.704995811 [Info  ] [Skywalker] [OnCompositeLegVolatileParamsSetMessage] client(f1_ar_cmp_hk_tko_061), composite(wheatbag) composite leg(ID={Market="MARKET" Feedcode="1171"} Identifier=16262) params(bidPrice=0 askPrice=0)
11:30:00.705002094 [Debug ] [Skywalker] [SetChickenParameter] composite(wheatbag) leg(MARKET:1171, 16262) legParams updated
11:30:00.705004666 [Info  ] [Skywalker] [OnCompositeLegVolatileParamsSetMessage] client(f1_ar_cmp_hk_tko_061), composite(wheatbag) composite leg(ID={Market="MARKET" Feedcode="883"} Identifier=10463) params(bidPrice=0 askPrice=0)
11:30:00.705010516 [Debug ] [Skywalker] [SetChickenParameter] composite(wheatbag) leg(MARKET:883, 10463) legParams updated
11:30:00.705012997 [Info  ] [Skywalker] [OnCompositeLegVolatileParamsSetMessage] client(f1_ar_cmp_hk_tko_061), composite(wheatbag) composite leg(ID={Market="MARKET" Feedcode="3968"} Identifier=10457) params(bidPrice=0 askPrice=0)
11:30:00.705018983 [Debug ] [Skywalker] [SetChickenParameter] composite(wheatbag) leg(MARKET:3968, 10457) legParams updated 
```

我在想我可以创建某种不同正则表达式的字典来匹配不同类型的日志文件 - 然后找到每种类型的变量点 - 并使用某种启发式来匹配每个点的不同/相似程度？

还是有一种“更聪明”的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:31:03.513

logline 已经是非常结构化的东西，因此您可以为不同部分定义不同的相似性标准，例如时间戳字段相似性可以是两个时间戳的接近程度，或者例如，一天中的同一时间，对于模块/功能可能只是完全相等会起作用，并且有效负载的比较很大程度上取决于您的域

# jquery - 在codeigniter中使用jquery的日期选择器不起作用

> ID：15940876
> 
> 赞同：3
> 
> 时间：2013-04-11T04:36:57.977
> 
> 标签：jquery, codeigniter, datepicker

我想在 codeignigter 的视图中使用日期选择器。这是我的代码，但它不起作用。请帮忙

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>

$(function() {
   $( "#datepicker" ).datepicker();
});
</script>
<div>
<p>Date: <input type="text" id="datepicker" /></p>
</div> 
```

但是当我在 html 页面中使用它时，它在我做错的地方工作？帮我找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:00:35.800

你需要添加

```
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

并提供来源

这是参考

> [http://jqueryui.com/datepicker/#date-formats](http://jqueryui.com/datepicker/#date-formats)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T06:32:35.157

如果你想节省我花费的时间。按照文章。为我工作。使用 class 而不是 id 并添加以下脚本：

```
<script>
$(document).ready(function(){
$('.datepicker').datepicker();
});
</script> 
```

[https://hiteshkumarsofat.wordpress.com/2014/04/02/use-of-bootstrap-date-picker-for-codeigniter/](https://hiteshkumarsofat.wordpress.com/2014/04/02/use-of-bootstrap-date-picker-for-codeigniter/) 只需用他使用的逗号替换 ' 和 " 即可。

# ruby-on-rails - 部署时无法读取 SHA1 文件

> ID：15940891
> 
> 赞同：0
> 
> 时间：2013-04-11T04:38:11.300
> 
> 标签：ruby-on-rails, ruby, git, github, capistrano

尝试通过 Capistrano 进行部署时，出现以下错误。这发生在我已经工作了一年多的回购上，过去一切都很顺利。

关于如何修复回购的任何想法？

```
error: unable to find 3b1ab2a2fa39f4ffc4a53a7888223522195e2506
error: unable to read sha1 file of .gitignore (3b1ab2a2fa39f4ffc4a53a7888223522195e2506)
error: unable to find 6cb9767572171070c88d5792022edd855f63e57d
error: unable to read sha1 file of Gemfile (6cb9767572171070c88d5792022edd855f63e57d)
error: unable to find 63303cc69f301a4d691cd4a2fb95005996a1d5fd
error: unable to read sha1 file of app/controllers/mobile_controller.rb (63303cc69f301a4d691cd4a2fb95005996a1d5fd)
error: unable to find 57ca529579101e75240e78985419a73c89a6ba44 
```

..

```
Checking out files: 100% (5634/5634), done.
fatal: Could not reset index file to revision 'db369d7ee2aa96750ff1fd61f53ec049038a74eb'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:51:16.160

删除 /tmp/deploy-cache/ 固定问题。

# php - 我可以使用 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 打开 xlsx 文件吗？

> ID：15940892
> 
> 赞同：0
> 
> 时间：2013-04-11T04:38:27.580
> 
> 标签：php, excel, com

我想`xlsx`用 PHP 打开一个文件，`application/vnd.openxmlformats- officedocument.spreadsheetml.sheet`因为 COM 在服务器上不起作用。
有人知道该怎么做吗？

评论部分是我要替换的部分。我这样做是为了强制 excel 计算公式中的值，因为 phpexcel 没有得到正确的值。

如果有办法配置 COM 在服务器中运行，请告诉我。

这是我的代码：

```
$inputFileName = 'FORMATO PEDIDO.xlsx';
                        $inputFileType = PHPExcel_IOFactory::identify($inputFileName);

                        $objPHPexcel = PHPExcel_IOFactory::load($inputFileName);
                        $objWorksheet = $objPHPexcel->setActiveSheetIndex(0);
                        $objWorksheet = $objPHPexcel->getActiveSheet(); 

                        $claves = $_POST['claves'];
                        $checked = $_POST['productos'];
                        $cantidades = $_POST['pallet'];
                        $id_sucursal_seleccionada = $_POST['recibe_sucursal'];
                        $sql_query = mysql_query("SELECT * FROM sucursal WHERE Id_Sucursal = '$id_sucursal_seleccionada'");
                        $sql_array = mysql_fetch_array($sql_query);
                        $nombre_sucursal = $sql_array['Nombre'];
                        $i=0;
                        $j=22;
                        foreach($claves as $clave_producto)
                        {
                            if($checked[$i])
                            {
                                $cantidad = $cantidades[$i];
                                $objWorksheet->getCell('B'.$j)->setValue($clave_producto); 
                                $objWorksheet->getCell('F'.$j)->setValue($cantidad);
                                $j++;
                            }
                            $i++;
                        }
                        $objWriter = PHPExcel_IOFactory::createWriter($objPHPexcel,$inputFileType); 
                        $objWriter->setPreCalculateFormulas(false);
                        $objWriter->save($inputFileName); 

                        $workbook = "C:/Documents and Settings/sosam1/My Documents/Dropbox/htdocs/Merdiz/inventarios/FORMATO PEDIDO.xlsx";
                        $ex = new COM("Excel.application") or Die ("Did not connect");
                        $wkb = $ex->application->Workbooks->Open($workbook) or Die ("Did not open");
                        $ex->Application->ActiveWorkbook->Save();
                        $ex->application->ActiveWorkbook->Close("False");    

                        $objPHPexcel = PHPExcel_IOFactory::load($inputFileName);
                        $objWorksheet = $objPHPexcel->setActiveSheetIndex(0);
                        $objWorksheet = $objPHPexcel->getActiveSheet(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:48:05.850

在您描述的非交互式场景中不支持 Excel。

有无数技术原因导致它出现问题。基本上，Excel 的设计、编程和测试都假设键盘末端会有一个人。在服务器上运行它可能会工作 50 次，然后在没有警告的情况下冻结或崩溃。我已经看到它发生了。

还有一个合同/许可问题。即使您使它工作得足以满足您的目的，Office 的许可证基本上也要求网站的每个用户还必须拥有与您在服务器上运行的相同版本的 Excel 的有效许可证。这使得在 Internet 上可用的站点上使用 Excel 变得不可能，尽管如果您的站点是 Intranet 站点并且用户获得了适当的许可，您可以使用它。

您还可以使用 Excel Services，它是服务器端支持的 Excel 的一个子集。这是某些版本的 SharePoint 中提供的功能。显然，这只有在您有预算或者您已经拥有 SharePoint 的情况下才可行。

请参阅 Microsoft 官方指南：

[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

另请参阅此答案：

[https://stackoverflow.com/a/726450/2230](https://stackoverflow.com/a/726450/2230)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:43:33.510

您是否尝试过来自 [http://phpexcel.codeplex.com/的代码](http://phpexcel.codeplex.com/)

# c# - 将带有填充的 DataGridView 导出到 excel

> ID：15940895
> 
> 赞同：0
> 
> 时间：2013-04-11T04:38:38.210
> 
> 标签：c#, asp.net

将数据网格视图保存到 asp dot net 中的 excel。当我在网格视图中使用填充时，数据被保存而不是完整数据未显示在 Excel 工作表中如何在网格视图中使用填充时在 Excel 工作表中显示网格视图的完整数据

```
 protected void btnexcel_Click1(object sender, EventArgs e)
    {
    Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition",
    "attachment;filename=ActualsAndBudgets.xls");
    Response.Charset = "";
    Response.ContentType = "application/ms-excel";
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    gvdetails.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
   }
   public override void VerifyRenderingInServerForm(Control control)
  {
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:22:25.127

您可以导出到 excel 并应用样式和格式，请参阅下面的示例代码

```
 protected void btnExportExcel_Click(object sender, EventArgs e)
    {
        Response.Clear();

        Response.Buffer = true;
        Response.AddHeader("content-disposition","attachment;filename=GridViewExport.xls");
        Response.Charset = "";
        Response.ContentType = "application/vnd.ms-excel";

        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        GridView.AllowPaging = false;

        // Re-Bind data to GridView 

        using (MSEntities1 CompObj = new MSEntities1())
        {
           // code for bind grid view 
            GridView.DataBind();
        }

        // Change the Header Row back to white color

        GridViewC.Style.Add(" font-size", "10px");

        GridView.HeaderRow.Style.Add("background-color", "#FFFFFF");

        //Apply style to Individual Cells

        GridView.HeaderRow.Cells[0].Style.Add("background-color", "green");
        GridView.HeaderRow.Cells[1].Style.Add("background-color", "green");
        GridView.HeaderRow.Cells[2].Style.Add("background-color", "green");
        GridView.HeaderRow.Cells[3].Style.Add("background-color", "green");
        GridView.HeaderRow.Cells[4].Style.Add("background-color", "green");
        GridView.HeaderRow.Cells[5].Style.Add("background-color", "green");
        GridView.HeaderRow.Cells[6].Style.Add("background-color", "green");
        GridView.HeaderRow.Cells[7].Style.Add("background-color", "green");

        int k = GridView.Rows.Count;

        for (int i = 1; i < GridView.Rows.Count; i++)
        {

            GridViewRow row = GridView.Rows[i];

            //Change Color back to white

            row.BackColor = System.Drawing.Color.White;

            //Apply text style to each Row

            row.Attributes.Add("class", "textmode");

            //Apply style to Individual Cells of Alternating Row

            if (i % 2 != 0)
            {
                row.Cells[0].Style.Add("background-color", "#C2D69B");
                row.Cells[1].Style.Add("background-color", "#C2D69B");
                row.Cells[2].Style.Add("background-color", "#C2D69B");
                row.Cells[3].Style.Add("background-color", "#C2D69B");
                row.Cells[4].Style.Add("background-color", "#C2D69B");
                row.Cells[5].Style.Add("background-color", "#C2D69B");
                row.Cells[6].Style.Add("background-color", "#C2D69B");
                row.Cells[7].Style.Add("background-color", "#C2D69B");
            }
        }
        GridView.RenderControl(hw);

        // style to format numbers to string.

        string style = @"<style> .textmode { mso-number-format:\@; } </style>";

        Response.Write(style);
        Response.Output.Write(sw.ToString());
        Response.Flush();
        Response.End();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:45:39.377

通过以下代码：

```
using System;
using System.Data;
using System.IO;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Whatever
{
 /// 

 /// This class provides a method to write a dataset to the HttpResponse as
 /// an excel file. 
 /// 

 public class ExcelExport
 {
  public static void ExportDataSetToExcel(DataSet ds, string filename)
  {
   HttpResponse response = HttpContext.Current.Response;

   // first let's clean up the response.object
   response.Clear();
   response.Charset = "";

   // set the response mime type for excel
   response.ContentType = "application/vnd.ms-excel";
   response.AddHeader("Content-Disposition", "attachment;filename=\"" + filename + "\"");

   // create a string writer
   using (StringWriter sw = new StringWriter())
   {
    using (HtmlTextWriter htw = new HtmlTextWriter(sw))
    {
     // instantiate a datagrid
     DataGrid dg = new DataGrid();
     dg.DataSource = ds.Tables[0];
     dg.DataBind();
     dg.RenderControl(htw);
     response.Write(sw.ToString());
     response.End(); 
    }
   }
  }
 }
} 
```

**注意：**以上代码属于[此](http://tim.mackey.ie/HowtoExportADatasetToExcelCAspnet.aspx)链接。

[您可以通过该](http://tim.mackey.ie/HowtoExportADatasetToExcelCAspnet.aspx)链接关注讨论并获取更多详细信息。

希望它有帮助。

# iphone - 如何按文件夹获取pdf文件列表？

> ID：15940900
> 
> 赞同：1
> 
> 时间：2013-04-11T04:39:16.507
> 
> 标签：iphone, ios, objective-c, ipad

现在我正在开发 pdf 阅读器应用程序，我可以使用以下代码读取应用程序中存在的所有 pdf 文件，

```
NSArray *userDocuments = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSURL *docementsURL = [NSURL fileURLWithPath:[userDocuments lastObject]];
NSArray *documentsURLs = [[NSFileManager defaultManager] contentsOfDirectoryAtURL:docementsURL
                                                       includingPropertiesForKeys:nil
                                                                          options:NSDirectoryEnumerationSkipsHiddenFiles
                                                                            error:nil];

NSMutableArray *names = [NSMutableArray array];
NSMutableDictionary *urls = [NSMutableDictionary dictionary];

NSArray *bundledResources = [[NSBundle mainBundle] URLsForResourcesWithExtension:@"pdf" subdirectory:nil];
documentsURLs = [documentsURLs arrayByAddingObjectsFromArray:bundledResources];

for (NSURL *docURL in documentsURLs)
{
    NSString *title = [[docURL lastPathComponent] stringByDeletingPathExtension];
    [names addObject:title];
    [urls setObject:docURL forKey:title];
}

documents = [[NSArray alloc] initWithArray:[names sortedArrayUsingSelector:@selector(compare:)]];
urlsByName = [[NSDictionary alloc] initWithDictionary:urls]; 
```

但我的问题是逐个文件夹读取pdf文件并将其存储到单独的数组中，我的文件夹结构如下图所示，

![在此处输入图像描述](https://i.stack.imgur.com/r5gdl.png)

任何有关此的帮助将不胜感激..

![在此处输入图像描述](https://i.stack.imgur.com/9dhrO.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:43:03.710

为此，您可以创建包而不是文件夹，然后在其中获取所有包和文件

像这样的东西

```
NSArray *bundleArr = [[NSBundle mainBundle]pathsForResourcesOfType:@"bundle" inDirectory:nil];
NSLog(@"pdfs in bundle %@ is my class is %@",[bundleArr objectAtIndex:0],[[bundleArr objectAtIndex:0]class]);

for (int i=0; i<[bundleArr count]; i++) {
    NSString *myBundleStr=[bundleArr objectAtIndex:i];
    NSBundle *myBundle = [[NSBundle alloc]initWithPath:[bundleArr objectAtIndex:i]];
    NSArray *pdfPaths = [myBundle pathsForResourcesOfType:@"pdf" inDirectory:nil];
    NSLog(@"\n\nPDF in bundle  is %@",pdfPaths);

} 
```

# mongodb - 无法在 solaris10 上运行 solaris 二进制文件

> ID：15940904
> 
> 赞同：1
> 
> 时间：2013-04-11T04:39:39.680
> 
> 标签：mongodb, solaris-10

我正在运行 solaris 10。我从 mongodb.org 下载了 2.4.1 驱动程序

以下是日志：

```
foo $ ./mongod --dbpath /dpool/mongodb/data  --pidfilepath /dpool/mongodb/run/mongod.pid
Wed Apr 10 21:19:54.832 [initandlisten] MongoDB starting : pid=25116 port=27017        dbpath=/dpool/mongodb/data 64-bit host=foo.example.net
Wed Apr 10 21:19:54.833 [initandlisten]
Wed Apr 10 21:19:54.833 [initandlisten] ** NOTE: your operating system version does not support the method that MongoDB
Wed Apr 10 21:19:54.833 [initandlisten] **       uses to detect impending page faults.
Wed Apr 10 21:19:54.833 [initandlisten] **       This may result in slower performance for certain use cases
Wed Apr 10 21:19:54.833 [initandlisten]
Wed Apr 10 21:19:54.833 [initandlisten] db version v2.4.1
Wed Apr 10 21:19:54.833 [initandlisten] git version: 1560959e9ce11a693be8b4d0d160d633eee75110
Wed Apr 10 21:19:54.833 [initandlisten] build info: SunOS bs-smartos-x86-64-1.10gen.cc 5.11 joyent_20120424T232010Z i86pc BOOST_LIB_VERSION=1_49
Wed Apr 10 21:19:54.833 [initandlisten] allocator: system
Wed Apr 10 21:19:54.833 [initandlisten] options: { dbpath: "/dpool/mongodb/data", pidfilepath: "/dpool/mongodb/run/mongod.pid" }
Segmentation Fault
foo $ echo $LD_LIBRARY_PATH
/usr/local/mongodb/lib
foo $ ls -lt /usr/local/mongodb/lib
total 6152
-rwxr-xr-x   1 mongo      255312 Oct 26  2009 libgcc_s.so.1
-rwxr-xr-x   1 mongo     5900688 Oct 26  2009 libstdc++.so.6 
```

有任何想法吗？我曾经运行版本 2.0.3 没有任何问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:48:56.807

MongoDB 2.4.1 构建目前是在 SmartOS（基于 OpenSolaris/Solaris 11）上完成的，在 Solaris 10 上存在一些已知问题。

您的问题可能与MongoDB Jira 中的[SERVER-7404](https://jira.mongodb.org/browse/SERVER-7404)有关，但可能还有其他问题。

关于 SERVER-7404 的社区建议之一可能有用：

> 从 opencsw 下载并安装 libstdc++6-4.7.2\,REV\=2013.03.28-SunOS5.10-i386-CSW.pkg 后，它照常启动

如果您确实完成了这项工作，那么对 Jira 问题发表评论会很有帮助，以便其他用户知道修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:58:25.633

这个二进制文件看起来像是针对 SunOS 5.11 内核进行了调整。您可能想在 Solaris 11 或基于 Illumos 的操作系统下尝试它，以避免出现此警告消息。

# iphone - iPhone闹钟应用程序中的贪睡闹钟？

> ID：15940905
> 
> 赞同：1
> 
> 时间：2013-04-11T04:39:46.037
> 
> 标签：iphone, ios, uilocalnotification, mpmediaitemcollection

我一直在开发闹钟应用程序并使用本地通知来弹出警报。我还需要根据用户在用户设置中设置的时间间隔来暂停闹钟。

在应用程序启动之前，用户不能打盹，即调用下面提到的方法。

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

当我通过在firedate中添加时间间隔并重新安排本地通知来调用该方法来打盹警报时。

问题是应用程序进入前台，根据 Apple 的 HIG，我不应该终止应用程序或将应用程序自动发送到后台，因此用户需要按主页按钮在后台发送应用程序。

最近，我遇到了[这个应用程序](https://itunes.apple.com/us/app/alarm-clock-free/id332064280?mt=8)。它可以按我想要的方式打盹闹钟。

[另一个问题是我可以在这个应用程序](https://itunes.apple.com/us/app/alarm-clock-free/id332064280?mt=8)中从我的音乐库中选择要播放的声音。

知道这个应用程序是如何做到的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:40:34.927

为了做你正在做的事情，有几件事需要考虑。你的使用方法`UILocalNotification`是正确的，所以这是一个好的开始。

为了正确实现“贪睡”功能，您需要考虑在前台和后台运行的应用程序。

*   如果应用程序在前台（或者用户从外部通知横幅打开应用程序）`application:didReceieveLocalNotification:`将被调用，您可以简单地更新您的 UI 以显示贪睡按钮并从 NSUserDefaults 加载的持续时间安排新的本地通知。
*   如果应用程序在后台并且用户关闭了通知，则无法随后尝试“暂停”警报。

至于从 iTunes 库播放自定义声音，请查看[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)`soundName`上的属性

# c# - 如何将物理 zip 文件转换为 System.IO.Stream 对象

> ID：15940906
> 
> 赞同：0
> 
> 时间：2013-04-11T04:39:46.600
> 
> 标签：c#, stream, zip, converter

如何将物理 zip 文件转换为 System.IO.Stream 对象？我试过了 -

1.  `System.IO.Stream stream = File.ReadAllBytes(Path + "\\" + "ZipFile.zip");`
2.  `StreamReader stream = new StreamReader(Path + "\\" + "ZipFile.zip");`
3.  `System.IO.Stream stream = new FileStream(Path + "\\" + "ZipFile.zip", FileMode.Open); stream.Close();`

他们似乎都没有工作。
尝试读取流时，它要么说流不可读，
要么文件在目的地似乎损坏并且无法解压缩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:09:27.610

试试这个代码。要使用这个代码，你必须下载[dotnetzip-ionic.dll](http://dotnetzip.codeplex.com/)

```
using Ionic.Zip;
using Ionic.Crc;
using System.IO;

protected void Page_Load(object sender, EventArgs e)
    {

using (ZipFile zip = ZipFile.Read(ZipPath))
    {

        foreach (ZipEntry entry in zip)
        {

            CrcCalculatorStream reader = entry.OpenReader();
            MemoryStream memstream = new MemoryStream();
            reader.CopyTo(memstream);
            byte[] bytes = memstream.ToArray();
            System.IO.Stream stream = new System.IO.MemoryStream(bytes); 

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T04:47:31.820

1.  没有办法让它编译（转换`byte[]`为`Stream`）......所以不确定你如何在这里得到运行时错误。
2.  `StreamReader`不是流 - 不确定您在这里期望什么转换。
3.  看起来您立即关闭了流 - 这似乎是唯一与标题匹配的行并且会产生确切的运行时错误。修复 - 在您完成读取之前不要关闭流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:55:36.337

`ZipInputStream`从 SharpZipLib 看一下： [https ://github.com/icharpcode/SharpZipLib](https://github.com/icsharpcode/SharpZipLib)

通过[https://stackoverflow.com/a/593036/301152](https://stackoverflow.com/a/593036/301152)

# wix - 未创建 WiX 公司文件夹

> ID：15940907
> 
> 赞同：3
> 
> 时间：2013-04-11T04:39:49.040
> 
> 标签：wix, installation, directory-structure, wix3

我有这个片段来定义我的目录结构：

```
<Fragment>
 <Directory Id="TARGETDIR" Name="SourceDir">
   <Directory Id="ProgramFilesFolder">
     <Directory Id="COMPANYFOLDER" Name="MyCompany">
       <Directory Id="APPLICATIONFOLDER" Name="HDSS.Net">
         <Directory Id="EN" Name="en"/>
       </Directory>
     </Directory>
   </Directory>
   <Directory Id="DesktopFolder" Name="Desktop"/>
 </Directory>
</Fragment> 
```

我有这个组件组和我的应用程序组件：

```
<Fragment>
  <ComponentGroup Id="ProductComponents" Directory="APPLICATIONFOLDER">
  ....
  </ComponentGroup>
</Fragment> 
```

在我的功能定义中，我指的是这个组：

```
<Feature Id="ProductFeature" Title="HDSS.Net" Level="1" ConfigurableDirectory="APPLICATIONFOLDER">
  <ComponentGroupRef Id="ProductComponents" />
  ...
<\Feature> 
```

我的问题是，在安装时，仅在 Program Files 中创建了应用程序文件夹“HDSS.Net”，并且未在“MyCompany”文件夹中创建应用程序文件夹，正如我所料。我怎样才能确保发生这种情况？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:49:38.493

到目前为止，您提供的设置代码看起来是正确的。

您安装的某些其他部分必须更改`APPLICATIONFOLDER`，以便最终解析为`[ProgramFilesFolder]HDSS.Net`. 搜索其他对`APPLICATIONFOLDER`.

或者，查看详细的日志文件。它应该向您显示何时`APPLICATIONFOLDER`被覆盖。

# python - 输入到网络表单 Python

> ID：15940913
> 
> 赞同：1
> 
> 时间：2013-04-11T04:40:33.197
> 
> 标签：python

我正在访问网页上的 HTML 并将一些输入提交到表单中。我按照这个页面 [通过网络表单提交数据并](https://stackoverflow.com/questions/8377055/submit-data-via-web-form-and-extract-the-results)逐步提取结果，它适用于他在帖子 3 中使用的网站。我使用的所有值都是正确的。

我得到的错误是这个，不知道为什么它适用于其他站点而不是预期的站点。

```
Traceback (most recent call last):
ValueError: unknown GET form encoding type 'x-www-form-urlencoded' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:54:12.773

在调用 submit() 之前试试这个`browser.form.enctype = ""`

# javascript - 如何使用 v8::Arguments 应用回调？

> ID：15940917
> 
> 赞同：1
> 
> 时间：2013-04-11T04:40:41.230
> 
> 标签：javascript, c++, node.js, v8

我正在编写一个带有接受任意长度参数的函数的 Node.js 本机模块，这与 JS 中的类似：

```
cb  = function( )
{
  // Receive arguments and do something...
}

foo = function( )
{
  cb.apply({}, arguments)
}

foo([1,2,3])
foo([4]) 
```

在这里，`foo`应用`cb`带有任意参数的 。

根据大多数关于回调的 Node.js 文章，C++ 版本会是这样的：

```
Handle<Value> Foo(const Arguments& args) 
{
  HandleScope scope;

  // Assume that we can get callback from somewhere else.
  Local<Function> cb = getExistingCallback();  

  // Now call it with arbitrary arguments.
  cb->Call(Object::New(), args.Length(), args.Data());

  return scope.Close(Undefined());
} 
```

但是`Arguments::Data`只能提供`v8::Local<v8::Value>&`，不能`v8::Handle<v8::Value>*`，所以编译器会抛出错误。

因为`Local`派生自`Handle`，所以这不是问题。我只是不知道是否有任何解决方案可以用来避免将所有成员从复制`Data`到新数组然后将其传入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:09:32.970

`Arguments::Data`不是你想要的。[如果您查看source](https://code.google.com/p/v8/source/browse/trunk/include/v8.h#4659)，该数据与传递给函数本身的值完全无关。当你想要的数据在时`Data`读取。`implicit_args_``values_`

我认为没有一种简单的方法可以在不使用的情况下获取该信息，`operator[]`因此您最好的选择是动态构建列表？您可以使用 a `std::vector`，因为它的数据值是连续的。

```
int argc = args.Length();
std::vector<Local<Value>> argv;
for (int i = 0; i < argc; i++){
  argv.push_back(args[i]);
}
cb->Call(Object::New(), argc, &argv[0]); 
```

# android - 在 android 中与 facebook 集成

> ID：15940920
> 
> 赞同：0
> 
> 时间：2013-04-11T04:41:01.013
> 
> 标签：android, facebook

我必须在 android 应用程序中与 facebook 集成。

在这里，我必须单击按钮意味着打开了 fb 登录页面。如果我必须输入正确的登录页面，则意味着打开了贴墙。

在这里我必须写一些文本意味着它已成功发布到 fb 墙上。但我希望在这里传递字符串值。该字符串值显示在该编辑文本框上也发布在墙上。我该怎么办？

我使用以下代码：

```
public class AndroidFacebookConnectActivity extends Activity {

// Your Facebook APP ID
private static String APP_ID = "xxxxx"; // Replace with your App ID

// Instance of Facebook Class
private Facebook facebook = new Facebook(APP_ID);
private AsyncFacebookRunner mAsyncRunner;
String FILENAME = "AndroidSSO_data";
private SharedPreferences mPrefs;

Button btnFbLogin;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnFbLogin = (Button) findViewById(R.id.btn_fblogin);
    mAsyncRunner = new AsyncFacebookRunner(facebook);
    btnFbLogin.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d("Image Button", "button Clicked");
            loginToFacebook();
        }
    });
  }

public void loginToFacebook() {

    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);

        btnFbLogin.setVisibility(View.INVISIBLE);

        postToWall();
    Log.d("FB Sessions", "" + facebook.isSessionValid());
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize(this,
                new String[] { "email", "publish_stream" },
                new DialogListener() {

                    @Override
                    public void onCancel() {
                        // Function to handle cancel event
                    }

                    @Override
                    public void onComplete(Bundle values) {

                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                facebook.getAccessToken());
                        editor.putLong("access_expires",
                                facebook.getAccessExpires());
                        editor.commit();
                      btnFbLogin.setVisibility(View.INVISIBLE);

                   postToWall();

                    }

                    @Override
                    public void onError(DialogError error) {
                        // Function to handle error

                    }

                    @Override
                    public void onFacebookError(FacebookError fberror) {
                        // Function to handle Facebook errors

                    }

                });
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
}
public void postToWall() {
    // post on user's wall.
    facebook.dialog(this, "feed", new DialogListener() {

        @Override
        public void onFacebookError(FacebookError e) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onComplete(Bundle values) {
            String sh="Krish";
            Bundle params = new Bundle();

            params.putString("message", sh);
            params.putString("name", sh);

        }

        @Override
        public void onCancel() {
        }
    });

}} 
```

在这里我如何发布**字符串 sh="Krish";** FB 墙上的值。我如何在 FB 文本上显示这些 Krish 值。请给我一些建议...

**编辑：**

这是我更新的完整代码：

```
@Override
        public void onComplete(Bundle values) {
            String sh="Krish";
            Bundle parameters = new Bundle();
            parameters.putString("caption",sh);
            } 
```

但现在也遇到了同样的错误。我该如何解决这些问题。请帮助我。

![访问这些](https://i.stack.imgur.com/VzFfy.png)

在这里，我必须写文本**嗨**。这些嗨已成功发布。但我希望动态地在该编辑文本框中显示**Krish 。我该怎么办？？？？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:46:47.530

您确定您使用的是 Facebook SDK 3 吗？

根据这些行：

```
private Facebook facebook = new Facebook(APP_ID);
private AsyncFacebookRunner mAsyncRunner; 
```

我认为您使用的是旧 SDK，其中很多方法已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:50:19.963

尝试将此添加到您的`OnComplete`

```
params.putString("caption",sh); 
```

# sql-server - 如何计算不同的连续范围

> ID：15940925
> 
> 赞同：0
> 
> 时间：2013-04-11T04:41:49.120
> 
> 标签：sql-server

这是在缓存中记录每个查询的表结构。

```
SequenceId CacheInstance QueryCondition
------------------------------------------
1          100              'x=1 '
2          100              'x=1'
3          100              'y=a'
4          100              'x=1'
5          200              'x=1'
5          200              'x=1' 
```

是否有一个简单的语句来获得以下“不同计数”？

```
CacheInstance QueryCondition distinctcount
-------------------------------------------
100            'x=1'             2
100            'y=a'             1
200            'x=1'             1 
```

如果'x=1'连续出现，则算作同一个。但是如果它发生在不同的查询条件之后，distinct count 会增加 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:24:36.553

试试这个...使用 group by

```
 select CacheInstance,QueryCondition ,COUNT(QueryCondition) as distinctcount from YourtableName group by CacheInstance,QueryCondition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:25:22.087

对这两列使用 group by

```
CREATE TABLE Cache
(
    SequenceId int,
    CacheInstance int,
    QueryCondition nvarchar(20)
)

SELECT CacheInstance, QueryCondition, COUNT(QueryCondition)
FROM Cache
GROUP BY CacheInstance, QueryCondition 
```

# html - HTML5 从默认麦克风捕获音频

> ID：15940934
> 
> 赞同：8
> 
> 时间：2013-04-11T04:42:48.160
> 
> 标签：html, audio, capture, microphone

有人可以帮助我如何使用 HTML5 从默认麦克风捕获音频吗？有许多可用的示例，但似乎没有一个有效。我尝试过[使用 HTML5 进行音频捕获，](https://stackoverflow.com/questions/4227313/audio-capturing-with-html5) 因为它仅适用于启用了标志的 chrome。但它得到了 NavigatorUserMediaError。地址栏上的视频图标有一个红十字标志，其工具提示显示“此页面已被阻止访问您的相机和麦克风”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T03:02:54.207

There's some great articles on HTML5 Rocks. This is just one that I pulled. [http://updates.html5rocks.com/2012/09/Live-Web-Audio-Input-Enabled](http://updates.html5rocks.com/2012/09/Live-Web-Audio-Input-Enabled)

```
// success callback when requesting audio input stream
function successCallback(stream) {
    var audioContext = new (window.webkitAudioContext)();

    // Create an AudioNode from the stream.
    var mediaStreamSource = audioContext.createMediaStreamSource( stream );

    // Connect it to the destination to hear yourself (or any other node for processing!)
    mediaStreamSource.connect( audioContext.destination );
}

function errorCallback() {
    console.log("The following error occurred: " + err);
}

navigator.webkitGetUserMedia( {audio:true}, successCallback, errorCallback ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T07:21:32.437

确保从网络服务器启动演示 - 简单地复制/粘贴并从文件系统启动是行不通的 - 在 chrome 中，您永远无法通过这种方式访问​​麦克风。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-21T14:33:19.753

最近（不确定何时）Chrome 添加了通过 SSL 访问页面以启用 getUserMedia 的要求。

# java - Runtime.getRuntime.exec() 不适用于 linux 命令“tar -xvf filename.tar”

> ID：15940935
> 
> 赞同：1
> 
> 时间：2013-04-11T04:42:47.973
> 
> 标签：java, unix, extract, tar

我正在尝试使用 Java 批处理应用程序在 Unix 机器上解压缩文件。

源代码：

```
String fileName = "x98_dms_12";

Runtime.getRuntime().exec("gunzip "+ fileName + ".tar.gz");
System.out.println(" Gunzip:"+"gunzip "+ fileName + ".tar.gz");

Runtime.getRuntime().exec("tar -xvf "+ fileName + ".tar");
System.out.println(" Extract:tar -xvf "+ fileName + ".tar"); 
```

### 问题描述：

当我运行批处理程序时，它（完全）不起作用。只有 gunzip 命令有效，将我的 fileName.tar.gz 转换为 fileName.tar。但是 untar 命令似乎没有做任何事情，并且在我的日志或 Unix 控制台中没有错误或异常。

当我在 Unix 提示符下运行相同的命令时，它们工作正常。

### 笔记：

1.  执行路径是正确的，因为它将我的 *.tar.gz 转换为 *.tar
2.  我不能使用“tar -zxvf fileName.tar.gz”，因为属性“z”在我的系统上不起作用。
3.  没有抛出错误或异常。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:09:30.527

有几件事：

*   tar 命令将展开一个相对于您的工作目录的文件，这可能需要为您的 Java Process 对象设置
*   您应该等待解压缩过程完成，然后再启动解压缩过程
*   您应该处理来自进程的输出流。

这是一个可以扩展/调整的工作示例。它使用一个单独的类来处理流程输出流：

```
class StreamGobbler implements Runnable {
    private final Process process;

    public StreamGobbler(final Process process) {
        super();
        this.process = process;
    }

    @Override
    public void run() {
        try {
            final BufferedReader reader = new BufferedReader(
                    new InputStreamReader(process.getInputStream()));
            String line = null;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }

            reader.close();
        } catch (final Exception e) {
            e.printStackTrace();
        }
    }
}

public void extractTarball(final File workingDir, final String archiveName)
        throws Exception {
    final String gzFileName = archiveName + ".tar.gz";
    final String tarFileName = archiveName + ".tar";

    final ProcessBuilder builder = new ProcessBuilder();
    builder.redirectErrorStream(true);
    builder.directory(workingDir);
    builder.command("gunzip", gzFileName);
    final Process unzipProcess = builder.start();

    new Thread(new StreamGobbler(unzipProcess)).start();
    if (unzipProcess.waitFor() == 0) {
        System.out.println("Unzip complete, now untarring");

        builder.command("tar", "xvf", tarFileName);
        final Process untarProcess = builder.start();
        new Thread(new StreamGobbler(untarProcess)).start();
        System.out.println("Finished untar process. Exit status "
                + untarProcess.waitFor());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T06:52:49.937

问题是我们给出的命令是 UNIX 命令，所以它不能在 windows 环境中工作。我写了一个脚本文件来解决这个问题，谢谢大家的帮助。Runtime.getRuntime.exec() 将需要一些时间来执行给定的命令，因此在每个 exec() 之后给 thread.wait(3000) 以完成该过程并转到下一个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T04:51:16.360

下面的代码将打印执行命令的输出。检查它是否返回任何错误。

```
Process p = Runtime.getRuntime().exec("tar -xvf "+ fileName + ".tar");  
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));  
String line = null;  
while ((line = br.readLine()) != null) {  
     System.out.println(line);  
} 
```

# .net - 使用 Windows 窗体实现属性编辑对话框

> ID：15940936
> 
> 赞同：0
> 
> 时间：2013-04-11T04:42:48.253
> 
> 标签：.net, winforms

使用 Windows 窗体，我尝试实现一个 UI 来显示一些属性，并允许编辑一些属性。属性是字符串键值对，在启动对话框时定义。

我开始在一个大的垂直FlowLayoutPanel中使用水平FlowLayoutPanels来实现它，但是TextBoxes没有对齐：

![在此处输入图像描述](https://i.stack.imgur.com/LgTby.png)

所以我尝试使用 DataGridView，但我不希望键是可编辑的，而且看起来有点尴尬：

![在此处输入图像描述](https://i.stack.imgur.com/XS6JR.png)

更新：由 SyncCircles 提示，我尝试了 TableLayoutPanel，它更好（即使列不可[调整大小](https://stackoverflow.com/questions/980489/resizable-table-layout-panel-in-c-sharp)）：

![在此处输入图像描述](https://i.stack.imgur.com/a9o84.png)

Visual Studio 的“属性”窗口的一个非常简化的版本将是完美的。
是否有适合我想要完成的组件？
如果没有，通常的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:17:55.670

这是一个设计`TableLayoutPanel`

![在此处输入图像描述](https://i.stack.imgur.com/3khVX.png)

# sql - 如何在 SSRS 报告中显示今天的日期？

> ID：15940940
> 
> 赞同：17
> 
> 时间：2013-04-11T04:43:06.257
> 
> 标签：sql, ssrs-2008, reporting-services

我想在 SSRS 报告`Todays date`中显示。`report generated date`

我怎样才能做到这一点 ？

我应该使用任何变量吗？

请帮助我，我是 SSRS 的新手。

例如参考这张图片： ![在此处输入图像描述](https://i.stack.imgur.com/gfb50.jpg)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-11T04:45:54.547

日期栏 1：

```
=formatdatetime(today) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-16T10:45:53.383

试试这个：

```
=FORMAT(Cdate(today), "dd-MM-yyyy") 
```

或者

```
=FORMAT(Cdate(today), "MM-dd-yyyy") 
```

或者

```
=FORMAT(Cdate(today), "yyyy-MM-dd") 
```

或者

```
=Report Generation Date: " & FORMAT(Cdate(today), "dd-MM-yyyy") 
```

**您应该以您的客户（内部或外部）希望查看日期的相同格式来格式化日期**。例如，在我的一台服务器上，它以美国日期格式 (MM-dd-yyyy) 运行，而在我的报告中，我必须确保显示的日期是欧洲日期 (yyyy-MM-dd)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-11T08:31:00.867

您还可以从内置字段列表中拖放“执行时间”项。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-12-08T02:11:47.023

要显示日期和时间，试试这个：

```
=Format(Now(), "dd/MM/yyyy hh:mm tt") 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-17T01:47:32.387

您可以在报告中放置一个文本框，并在其中添加一个具有以下值的表达式：

```
="Report generation date:  " & Format(Globals!ExecutionTime,"dd/MM/yyyy  h:mm:ss tt" ) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-15T01:32:52.083

在包含标题的文本框中，您可以使用表达式来获取日期。尝试类似的东西

```
 ="Report Generation Date: " & Today() 
```

右键单击布局视图中的文本框。在列表底部，您将看到表达式选项。在那里您将能够输入代码。此选项将允许您避免添加第二个文本框。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-04T19:04:35.573

只是简单的使用

```
=Format(today(), "dd/MM/yyyy") 
```

将解决您的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-17T11:43:24.820

1.  SSRS 报告设计区域中的插入测试框。
2.  右键单击文本框并向下滚动并单击表达式选项卡
3.  只需在表达式区域中输入给定的表达式： =format(Today,"dd/MM/yyyy")

# spring - 如何在 Spring MVC 测试中设置 Web 应用程序上下文

> ID：15940941
> 
> 赞同：6
> 
> 时间：2013-04-11T04:43:17.847
> 
> 标签：spring, testing, spring-mvc, testng

我们在服务层和视图层上下文配置之间有一个清晰的抽象，我们正在加载它们，如下所示。

```
Root application context:

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
</context-param>

Web application context:

<servlet>
    <servlet-name>lovemytasks</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/mmapp-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

现在我们尝试引入 SPRING MVC TEST FRAMEWORK 来测试我们的应用程序。

为此，我需要设置与我的真实 Web 应用程序相同的环境。

我怎样才能做到这一点 ？

我在测试中尝试了以下配置来加载两个上下文。

```
@ContextConfiguration(locations = { "classpath*:META-INF/spring/applicationContext*.xml",
    "file:src/main/webapp/WEB-INF/spring/mmapp-servlet.xml" }) 
```

但它错误地说

```
Caused by: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Duplicate <global-method-security> detected. 
```

我们已经在根应用程序上下文和 Web 应用程序上下文中定义了全局安全性。

**注意：当我运行我的网络应用程序时，上述问题不会出现。它仅在我运行 Spring MVc 测试时发生**

我尝试删除我的全局安全和一个地方，然后在运行我的测试时遇到转换服务错误。这警告我，我没有像真正的 Spring 应用程序那样加载上下文。

现在，我想设置我的 Spring MVC 测试环境以使用或以与我的 Spring Web 应用程序环境相同的方式工作。谁能建议我如何实现它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T02:26:02.127

使用[@ContextHierarchy](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/test/context/ContextHierarchy.html)注释。它的 javadoc 很好地描述了它。在你的情况下，你会使用

```
@WebAppConfiguration
@ContextHierarchy({
    @ContextConfiguration(locations = { "classpath*:/META-INF/spring/applicationContext-*.xml" }),
    @ContextConfiguration(locations = { "file:src/main/webapp/WEB-INF/spring/mmapp-servlet.xml" })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:51:03.927

不要把你的 appContext 放在 meta-inf 中。

“正常”的方式是在你的 web-inf 中有一个 spring-servlet.xml

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring-servlet.xml</param-value>
    </context-param> 
```

然后在 xml 文件中导入不同的文件：

```
<import resource="classpath:beans.xml"/> 
```

我为我的测试创建了一个单独的 appContent ：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations ="classpath:applicationContext-test.xml")
@Transactional
public class MyTest { 
```

您的 bean 必须在某处被加载两次，您是否两次导入 bean，在 xml 中定义它们并进行注释？

# c# - 在 Google Earth API KML 文件中搜索字符串值地标？

> ID：15940942
> 
> 赞同：3
> 
> 时间：2013-04-11T04:43:19.567
> 
> 标签：c#, javascript, kml, google-earth, google-earth-plugin

尝试`Google Earth API`为 javascript 插件创建搜索框，我能够`KMLFile`在 GE API 中解析和加载，现在我必须通过 KML 加载的 Placemarker 名称嵌入搜索。

使用纬度和经度的代码

```
var lookAt = ge.createLookAt('');
lookAt.set(point.y, point.x, 600, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 00, 0);
ge.getView().setAbstractView(lookAt); 
```

是否有可能`LookAt`使用 Placemarker Name（字符串值）而不是使用 LAT、LONG 进行搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:30:25.553

是的，根据您的设置，有几种方法可以做到这一点。

一种通用的方法是给每个地标一个唯一的 ID，然后使用该 ID 来查看它。

例如，假设您有以下 kml 地标，并且您已从 url 加载到 api`http://localhost/foo.kml`

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Placemark id="myPlacemark">
    <name>Myplacemark</name>
    <Point>
      <coordinates>-122.0822035425683,37.42228990140251,0</coordinates>
    </Point>
  </Placemark>
</kml> 
```

然后，您可以像这样“查看”地标`myPlacemark`。

```
var placemark = ge.getElementByUrl('http://localhost/foo.kml#myPlacemark');
var point = placemark.getGeometry();
var lookAt = ge.createLookAt('');
lookAt.set(point.getLatitude(), point.getLongitude(), 600, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 00, 0);
ge.getView().setAbstractView(lookAt); 
```

可以创建一个简单的函数，这样您就可以简单地传递正确的 ID 来查看从 KML 加载的具有 ID 的任何点地标。

```
var myLookAt = function(id) {
  var placemark = ge.getElementByUrl(id);
  if('getGeometry' in placemark && 
    placemark.getGeometry().getType() == 'KmlPoint') {
    var point = placemark.getGeometry();
    var lookAt = ge.createLookAt('');
    lookAt.set(point.getLatitude(), point.getLongitude(), 600, ge.ALTITUDE_RELATIVE_TO_GROUND, 0, 00, 0);
    ge.getView().setAbstractView(lookAt);
  }
};

// useage
myLookAt('http://localhost/foo.kml#myPlacemark'); 
```

您显然可以更改`myLookAt`函数以查找`lookAt`和`camera`元素，或者也可以处理其他类型的对象 - 例如多几何等。

# c# - 如何在玩家位置创建纹理然后将其留在那里 XNA？

> ID：15940943
> 
> 赞同：1
> 
> 时间：2013-04-11T04:43:26.883
> 
> 标签：c#, xna-4.0

我有一个*几乎*完整的玩家类的游戏，但这是我的问题。当我按下 control + K 时，玩家会自杀（有意）。现在，当他死时，它会在玩家的位置（也是有意的）产生一滴血溅现在这是问题所在，一旦玩家重新产生，血溅仍然可见，但现在它会跟随玩家，这*有点怪异如果你问我*

所以这里是主要代码：

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using Microsoft.Xna.Framework;
  using Microsoft.Xna.Framework.Audio;
  using Microsoft.Xna.Framework.Content;
  using Microsoft.Xna.Framework.GamerServices;
  using Microsoft.Xna.Framework.Graphics;
  using Microsoft.Xna.Framework.Input;
  using Microsoft.Xna.Framework.Media;
  using Microsoft.Xna.Framework.Net;
  using Microsoft.Xna.Framework.Storage;

  namespace Teir_Tactical_2A
  {
         public class Player
     {
    Random random = new Random();
    public Texture2D playerunarmed;
    public Texture2D playerM1911;
    public Texture2D bloodspatter2;
    public Texture2D playerM4;
    public KeyboardState keyState;
    public SpriteFont Font1;
    public KeyboardState oldKeyboardState;
    public Vector2 playerPosition;
    public SpriteBatch spriteBatch;
    public float Angle { get; set; }
    public float AngularVelocity { get; set; }
    public Vector2 playerVelocity = Vector2.One;
    public bool M1911;
    public bool M4;
    String[] strs = new String[] { "You suicided. Way to go Genius.", "I saw your limbs blow off with that one.", "Click to Respawn", "HAHAHAHAHAHA-Sorry Click to Respawn" };
    String suicideStr;
    public bool player;
    public bool suicide;
    public bool LMBpressed;
    public bool RMBpressed;
    public bool isplayeralive;
    public bool isplayerdead;
    public bool respawnscreen;
    public bool bloodspatter;
    float angle;

    public Player(ContentManager content, Vector2 location)
    {
        this.playerunarmed = content.Load<Texture2D>("PLAYER");
        this.playerM1911 = content.Load<Texture2D>("PLAYERM1911");
        this.playerM4 = content.Load<Texture2D>("PLAYERM4");
        this.bloodspatter2 = content.Load<Texture2D>("blood");
        playerPosition = location;
        suicideStr = strs[random.Next(strs.Length)];
        M1911 = true;
        M4 = true;
        player = true;
        LMBpressed = false;
        suicide = false; 
        RMBpressed = false;
        isplayeralive = true;
        isplayerdead = false;
        respawnscreen = false;
        bloodspatter = false;
        Font1 = content.Load<SpriteFont>("Font1");
    }

    public void Update()
    {
        MouseState curMouse = Mouse.GetState();

        if (bloodspatter == true)
        {
            blood();
        }

        if (suicide == true)
        {
            suicided();
        }

        if (isplayeralive == true)
        {
            alive();
        }

        if (isplayerdead == true)
        {
            dead();
        }

        if (M1911 == true)
        {
            armedM1911();
        }

        if (M4 == true)
        {
            armedM4();
        }
        if (player == true)
        {
            unarmed();
        }
        if (LMBpressed == true)
        {
            LMBpressedA();
        }
        if (RMBpressed == true)
        {
            RMBpressedA();
        }

        Vector2 mouseLoc = new Vector2(curMouse.X, curMouse.Y);

        Vector2 direction = mouseLoc - playerPosition;

        angle = (float)(Math.Atan2(direction.Y, direction.X));

        if (curMouse.LeftButton == ButtonState.Pressed)
        {
            LMBpressed = true;

        }
        if (curMouse.RightButton == ButtonState.Pressed)
        {
            RMBpressed = true;
        }

        keyState = Keyboard.GetState();

        if (isplayeralive == false && LMBpressed == true)
        {
            isplayeralive = true;
            isplayerdead = false;
            suicide = false;
            suicideStr = strs[random.Next(strs.Length)];
        }

        if (keyState.IsKeyDown(Keys.LeftControl) && keyState.IsKeyDown(Keys.K))
        {
            isplayeralive = false;
            isplayerdead = true;
            bloodspatter = true;
            suicide = true;

        }

        if (keyState.IsKeyDown(Keys.D1))
        {

            M1911 = false;
            M4 = false;
            player = true;

        }
        if (keyState.IsKeyDown(Keys.D2))
        {
            M1911 = true;
            player = false;

        }
        if (keyState.IsKeyDown(Keys.D3))
        {
            M4 = true;
            M1911 = false;
            player = false;

        }

        if (keyState.IsKeyDown(Keys.D))
            playerPosition.X += playerVelocity.X + 1;
        if (keyState.IsKeyDown(Keys.A))
            playerPosition.X -= playerVelocity.X + 1;

        if (keyState.IsKeyDown(Keys.W))
            playerPosition.Y -= playerVelocity.Y + 1;
        if (keyState.IsKeyDown(Keys.S))
            playerPosition.Y += playerVelocity.Y + 1;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Begin();
        {

            Rectangle sourceRectangle = new Rectangle(0, 0, playerunarmed.Width, playerunarmed.Height);
            Vector2 origin = new Vector2(playerunarmed.Width / 2, playerunarmed.Height / 2);

            if (M1911 == true)
            {
                spriteBatch.Draw(playerM1911, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, playerunarmed.Width, playerunarmed.Height), null, Color.White, angle + 90, new Vector2(86, 88), SpriteEffects.None, 0f);
            }

            if (suicide == true)
            {
                spriteBatch.DrawString(Font1, suicideStr, new Vector2(10, 670), Color.Red);  
            }

            }
            if (bloodspatter == true)
            {
                spriteBatch.Draw(bloodspatter2, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, bloodspatter2.Width, bloodspatter2.Height), Color.White);
            }

            if (player == true)
            {
                spriteBatch.Draw(playerunarmed, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, playerunarmed.Width, playerunarmed.Height), null, Color.White, angle + 90, new Vector2(86, 88), SpriteEffects.None, 0f);
            }
            if (M4 == true)
            {
                spriteBatch.Draw(playerM4, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, playerunarmed.Width, playerunarmed.Height), null, Color.White, angle + 90, new Vector2(86, 88), SpriteEffects.None, 0f);

            }
            if (LMBpressed == true)
            {
                spriteBatch.DrawString(Font1, "LMB PRESSED (shot taken prototype)", new Vector2(1000, 22), Color.GreenYellow);
            }
            if (RMBpressed == true)
            {
                spriteBatch.DrawString(Font1, "RMB PRESSED (grenade thrown prototype)", new Vector2(968, 34), Color.Red);
            }
            if (RMBpressed == true && LMBpressed == true)
            {
                spriteBatch.DrawString(Font1, "If you are seeing this, the mouse is functioning correctly", new Vector2(810, 45), Color.Black);
            }
        spriteBatch.End();
    }

    public void armedM1911()
    {
        M1911 = true;
        M4 = false;
        player = false;

    }
    public void armedM4()
    {
        M4 = true;
        M1911 = false;
        player = false;
    }
    public void unarmed()
    {
        M1911 = false;
        M4 = false;
    }
    public void LMBpressedA()
    {
        LMBpressed = false;
    }
    public void RMBpressedA()
    {
        RMBpressed = false;
    }
    public void alive()
    {
        M1911 = false;
        player = true;
        M4 = false;
        respawnscreen = false;
    }
    public void dead()
    {
        M1911 = false;
        player = false;
        M4 = false;
        respawnscreen = true;
    }

    public void blood()
    {
        bloodspatter = true;
    }

    public void suicided()
    {
        suicide = true;
    }

} 
```

}

这就是我认为问题所在（95% 肯定）我需要获取玩家坐标并将它们设置为血迹的位置（并在必要时生成更多）。

```
 if (bloodspatter == true)
            {
                spriteBatch.Draw(bloodspatter2, new Rectangle((int)playerPosition.X, (int)playerPosition.Y, bloodspatter2.Width, bloodspatter2.Height), Color.White);
            } 
```

这可能是因为我使用坐标`playerPosition`作为`X/Y`坐标的方式，但我不知道如何告诉它先*获取它们*，然后将*血溅*位置设置为玩家自杀的位置。

编辑：似乎有一个误解，我*不*希望血液纹理消失，我希望它*留*在玩家最后死亡的地方（在这种情况下，自杀，直到我可以添加调用它的子弹）基本上，性能是不是问题，因为它的分辨率非常低，此外，我只希望它们在游戏结束或关卡发生变化时消失（这里不是问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:36:13.500

不要将玩家与血溅连接。让它独立。因此，当玩家死亡时，只需调用将在当前玩家位置产生血液的函数。

创建一个列表，您将在其中存储所有血溅，然后将新的血溅添加到该列表中。然后在 gamplay 类中调用该列表的绘制和更新。

伪：

```
splater (position as vector)
splaterlist inherit list of splater
- sub add new splater(position)
- sub update each splater, add duration, fade out
- sub draw each splater

player class
if player die add new splater into splaterlist

gameplay class
update player, draw player
update splaterlist, drawsplaterlist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T07:26:42.470

如果您想在自杀后留下一个血点，您可以使用将一个 Vector2 添加到您的 Player 类并将其命名为 PlaceOfDeath。默认为新的 Vector2.Zero(); 当你死后，将你的英雄的位置设置为新的 PlaceOfDeath，然后使用该 Vector2 作为你的精灵的绘图点。

如果您想绘制玩家死亡的每个地方，您可以创建一个 Vector2 列表（列表）并将其命名为 PlacesOfDeath。默认为空列表。当你死后，用 PlacesOfDeath.Add({Vector2 Location of Hero}) 设置你的英雄的位置。

然后在您的绘制代码中，您可以遍历 PlacesOfDeath 列表中的每个 Vector2 并在每个位置绘制血迹。

所以现在到代码

对于单次血液放置 -

添加到您的类属性/成员声明中：

> 私人 Vector2 placeOfDeath = new Vector2.Zero();

添加到你的自杀方法，

> placeOfDeath = 玩家位置；

在 Draw 方法中更改 if(bloodsplatter == true) 条件代码块：

> spriteBatch.Draw(bloodspatter2, new Rectangle((int)placeOfDeath.X, (int)placeOfDeath.Y, bloodspatter2.Width, bloodspatter2.Height), Color.White);

对于多处血斑

添加到您的类属性/成员声明中：

> 私有列表 placesOfDeath = new List();

添加到你的自杀方法，

> placesOfDeath.Add(playerPosition);

在 Draw 方法中更改 if(bloodsplatter == true) 条件代码块：

> foreach（placeOfDeath 中的 Vector2 placeOfDeath）{
> 
> spriteBatch.Draw(bloodspatter2, new Rectangle((int)placeOfDeath.X, (int)placeOfDeath.Y, bloodspatter2.Width, bloodspatter2.Height), Color.White);
> 
> }

# iphone - 将内存分配给属性的潜在泄漏

> ID：15940944
> 
> 赞同：0
> 
> 时间：2013-04-11T04:43:32.010
> 
> 标签：iphone, ios, button, memory-management, retain

我正在研究内存管理，我发现了这个。

我创建了一个属性按钮。

```
@property (nonatomic, retain) UIButton *button; 
```

在 ViewdidLoad 方法中，我编写了以下代码。

```
self.button = [[UIButton alloc] initwithFrame : CGRectMake(10, 10, 20, 20)];
[self.view addsubView:self.button]; 
```

在进行 XCode 分析时，我在第 33 行发现分配变量的潜在泄漏，即；自我按钮。

为什么会发生这种情况？如果我创建一个本地 UIButton 并将其分配给 self.button 并使用它，那么就没有潜在的泄漏。如果我将内存分配给 self.button 或任何属性变量，它就会泄漏。

谢谢吉腾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:49:35.120

给 self.button 赋值会调用合成的 setter 方法：

```
- (void)setButton:(UIButton *)button; 
```

因为您在属性声明中添加了“retain”属性，所以合成的 setter 将自动在设置的对象上调用“retain”。这会增加对象的保留计数。

在 UIButton 上调用“alloc”也会增加对象的保留计数。

因此，执行 self.button = [UIButton alloc] 本质上会将您的保留计数增加 2。这就是存在潜在泄漏的原因。

您可以通过以下任一方式解决此问题：

```
self.button = [[[UIButton alloc] initwithFrame : CGRectMake(10, 10, 20, 20)] autorelease]; 
```

或者

```
UIButton *temp = [[UIButton alloc] initwithFrame : CGRectMake(10, 10, 20, 20)];
self.button = temp;
[temp release]; 
```

或者

```
_button = [[UIButton alloc] initwithFrame : CGRectMake(10, 10, 20, 20)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T04:49:52.837

`@property (nonatomic, retain) UIButton *button;`使用它，您将保留对象。

现在使用`self.button = [[UIButton alloc] initwithFrame : CGRectMake(10, 10, 20, 20)];`你正在分配内存并且保留计数增加 1。

因此，在您的情况下，这是一个泄漏，因为对象的保留计数增加了。如果你有本地对象并且你分配然后再次释放它。所以没有额外的保留计数，也没有泄漏。

**摘要**

当您使用工厂方法或使用**alloc、new、retain、copy、mutableCopy**创建对象时，您的对象每次都有**+1 保留计数。**在这种情况下，您拥有对象。您有责任发布它。因此，您需要在使用完对象后**释放**对象，这会导致对象的**-1 保留计数**。

**编辑**

现在你正在做

```
@property (nonatomic, assign) UIButton *button;
self.button = [[UIButton alloc] init];
[self.button release]; 
```

在这里，您正在使用 self 访问对象，该对象调用您创建的属性的变量。您正在向属性对象发送 +​​1 保留计数，因此它变为 2，因为它本身具有 getter 和 setter。因此，您可以使用这样的实例变量，而不是这样做。

```
@property (nonatomic, assign) UIButton *button;
_button = [[UIButton alloc] init];
[_button release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T04:50:09.463

在 ARC 之前，您通常会为`retain`变量执行此操作：

```
UIButton* btn = [[UIButton alloc] initwithFrame : CGRectMake(10, 10, 20, 20)];
self.button = btn;    // property increases retain count because of its declaration as "retain"
[btn release]; 
```

使用 ARC，您可能会这样做：

```
@property (nonatomic, weak) UIButton* button;

self.button = [[UIButton alloc] initwithFrame : CGRectMake(10, 10, 20, 20)];
[self.view addsubView:self.button]; 
```

第二个示例说明您实际上并不需要让您的属性保留按钮（通过`retain`或`strong`），因为当您将子视图添加到视图容器时，包含视图将保留新子视图。

当然，也有一些例外。有时，您实际上可能想从超级视图中删除您的视图（按钮），但不要让它被释放，因为您稍后会添加它。

因此，有时保留 UI 对象是有效的。不过，通常情况下，这不是必需的。

**更新：**我想在这里评论一下，这种*问题*是苹果希望人们使用 ARC 的原因。这是一个非常基本的内存管理方案，它继续挫败许多新开发人员。在这一点上，iOS 新手开发者**没有**理由不使用 ARC。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T04:51:52.370

您的`UIButton`实例被保留了两次。`[UIButton alloc]`创建一个保留的实例，并且`button`属性在通过 . 分配时保留它`self.button`。使用 MRC（手动引用计数）代码，您需要释放您保留的任何内容。

创建按钮时，请执行以下操作：

```
UIButton *button = [[[UIButton alloc] initWithFrame:...] autorelease];
self.button = button; 
```

或者，使用 `UIButton' 的首选创建者方法：

```
self.button [UIButton buttonWithType:UIButtonTypeCustom];
self.button.frame = CGRectMake(...); 
```

您还需要在清理分配给属性的对象时释放该按钮。如果您使用 ARC（自动引用计数）而不是 MRC，您的编码会简单得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T04:54:41.323

我不知道你是否释放了它，但是每当我们分配内存时，我们都必须释放它（如果你的项目中没有使用 ARC）。所以只需像这样在 dealloc 中释放它：

```
-(void)dealloc {
    [button release];
    [super dealloc];
} 
```

# java - 如何在框架内开始活动？

> ID：15940945
> 
> 赞同：1
> 
> 时间：2013-04-11T04:43:32.667
> 
> 标签：java, android

我正在尝试使用滚动标签栏项目制作自定义标签栏。

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/bg"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/main_tabbar"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_below="@+id/main_rlTopbar" >
        <FrameLayout
            android:id="@+id/main_tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
        <HorizontalScrollView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:background="@drawable/bottombar" >
            <LinearLayout
                android:id="@+id/main_llTabs"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_gravity="center_vertical"
                android:orientation="horizontal" >
            </LinearLayout>
        </HorizontalScrollView>
    </LinearLayout>

</RelativeLayout> 
```

主要活动.java

```
...
        m_scrollTabbar = new HScrollTabbar(this, R.id.main_tabcontent, R.id.main_llTabs);
        m_scrollTabbar.addTab(null, 0, HomeActivity.class, true);
... 
```

hscrolltabbar.java

```
public class HScrollTabbar {
    private int m_nTabContentId = -1;
    private int m_nScrollTabbarId = -1;
    private Activity m_activityParent = null;
    private ArrayList<ButtonTabbarItem> m_aryTabButton = new ArrayList<ButtonTabbarItem>();

    private int m_nSelectedIndex =  -1;

    public void addTab(String labelId, int drawableId, Class<?> c) {
        LinearLayout llTabs = (LinearLayout) m_activityParent.findViewById(m_nScrollTabbarId);
        ButtonTabbarItem item = new ButtonTabbarItem(m_activityParent, c, m_aryTabButton.size());
        llTabs.addView(item);
        m_aryTabButton.add(item);
        if (m_aryTabButton.size() == 1) {
            setSelectedIndex(0);
        }
        item.setOnSelectTabListener(onSelectTabListener);
    }

    private OnSelectTabListener onSelectTabListener = new OnSelectTabListener() {
        @Override
        public void onSelect(int nSelectedIndex) {
            setSelectedIndex(nSelectedIndex);
        }
    };

    public void setSelectedIndex(int nIndex) {
        if (m_nSelectedIndex == nIndex)
            return;
        ButtonTabbarItem item = null;
        if (m_nSelectedIndex > -1) {
            item = m_aryTabButton.get(m_nSelectedIndex);
            item.setSelected(false);
        }
        m_nSelectedIndex = nIndex;
        item = m_aryTabButton.get(m_nSelectedIndex);
        item.setSelected(true);

            FrameLayout frame = (FrameLayout) m_activityParent.findViewById(m_nTabContentId);
            Intent intent = new Intent();
            intent.setClass(frame.getContext(), item.getClassTarget());
            frame.getContext().startActivity(intent);
    }
    public int getSelectedIndex() {
        return m_nSelectedIndex;
    }
} 
```

buttontabbaritem.java

```
public class ButtonTabbarItem extends FrameLayout {
    private static final int TAB_BTN_TAG = 100;
    private Class<?> m_classTarget;
    OnSelectTabListener m_listener = null;

    public ButtonTabbarItem(Context context, Class<?> classTarget, int nIndex) {
        super(context);
        LinearLayout layout = new LinearLayout(context);
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.hscroll_tabbar_item, layout);
        addView(view);

        Button btn = (Button) view.findViewById(R.id.hscroll_tabbar_item_btn);
        btn.setOnClickListener(onClickTab);
        btn.setTag(TAB_BTN_TAG + nIndex);

        m_classTarget = classTarget;
    }
    public Class<?> getClassTarget() {
        return m_classTarget;
    }
    public void setClassTarget(Class<?> classTarget) {
        m_classTarget = classTarget;
    }

    public void setSelected(boolean bSelected) {
        if (bSelected) {
        } else {
        }
    }

    private OnClickListener onClickTab = new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (m_listener != null)
                m_listener.onSelect((Integer) v.getTag() - TAB_BTN_TAG);
        }
    };

    public interface OnSelectTabListener {
        public void onSelect(int nSelectedIndex);
    }

    public void setOnSelectTabListener(OnSelectTabListener listener) {
        m_listener = listener;
    }

}

FrameLayout frame = (FrameLayout) m_activityParent.findViewById(m_nTabContentId);
            Intent intent = new Intent();
            intent.setClass(frame.getContext(), item.getClassTarget());
            frame.getContext().startActivity(intent); 
```

我正在尝试在框架内开始活动，但它不起作用。请帮我。

# iphone - iPad UITableView 闪烁问题

> ID：15940947
> 
> 赞同：1
> 
> 时间：2013-04-11T04:43:36.270
> 
> 标签：iphone, ios, objective-c, ipad

我有一个`UITableView`在 iPad 的视口中包含大约 20 行的内容。我有一个定期调用的间隔计时器`UITableView's` `reloadData`（将其发布到 UI 线程）。

`UITableView`现在，当我以中等速度（不是那么快）滚动浏览时，它`UITableView`会以闪烁的效果刷新。

我必须编写一个函数来`UITableViewCell`通过循环遍历数组中的所有项目来手动更新标签（这个数组保留所有显示的项目`UITableView`）。我将在计时器运行而不是调用时执行此函数`reloadData`（如上所述）。然后闪烁的问题就消失了。

我相信 reloadData 应该比遍历所有数据更好，因为 reloadData 只会刷新当前显示的单元格而不是所有行，但我无法弄清楚为什么会发生闪烁。有谁知道为什么？

我必须提到的一件事是我确实使用了`CellIdentifier`正确的重用单元格，并且仅在检索到的单元格为空时才创建单元格。

此外，我在 iPhone 中没有这个问题，我相信这是因为与 iPad 相比，iPhone 的行数更少。

任何人都可以就这个问题给出一些解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:09:31.573

我在使用时遇到了同样的闪烁问题`reloadData`。我通过使用`indexPathsForVisibleRows`和`cellForRowAtIndexPath:`仅更新可见单元格来解决它。性能很好，因为我不必遍历整个数据集，而只需遍历有限数量的可见单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:04:27.420

`reloadData`导致 tableview 重新创建屏幕上的可见单元格，这可能导致闪烁，因为单元格被破坏。有更好的方法来重新加载 tableview。你在使用核心数据吗？如果是这样，[NSFetchedResultsController](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)及其[委托](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSFetchedResultsControllerDelegate)是更新 tableview 的好方法，因为它侦听底层数据源中的更改并仅更新适当的单元格。

# python - 使用 python-gdl 的示例应用程序

> ID：15940958
> 
> 赞同：4
> 
> 时间：2013-04-11T04:44:55.637
> 
> 标签：python, gtk, pygtk

我正在尝试使用 python-gdl（gdl 库的 python 绑定，它具有一些用于 gtk+2 的对接窗口）。甚至原始的 C gdl 本身也有详细的记录。它的 python 绑定似乎非常不稳定。你能推荐任何用 python-gdl 编写并且可以运行的示例程序吗？

我尝试使用 [此处](https://mail.gnome.org/archives/gnome-devtools/2009-September/msg00002.html)和[此处](http://sourcecodebrowser.com/gnome-python-extras/2.25.3/gdl__test_8py_source.html)描述的那个，但它会因丑陋而失败：

```
Traceback (most recent call last):
  File "gdl_test.py", line 17, in <module>
    item1 = gdl.DockItem('item1', 'Item 1', gtk.STOCK_OPEN, gdl.DOCK_ITEM_BEH_NORMAL)
TypeError: Gdl.DockItem.__init__() takes at most 3 arguments (4 given) 
```

python 绑定似乎甚至不提供构造函数签名：例如

```
>>> help(gdl.DockItem.__init__)
Help on wrapper_descriptor:

__init__(...)
    x.__init__(...) initializes x; see x.__class__.__doc__ for signature

>>> help(gdl.DockItem.__doc__)
no Python documentation found for "Object GdlDockItem\n\nSignals from GdlDockItem:\n  dock-drag-begin ()\n  dock-drag-motion (gint, gint)\n  dock-drag-end (gboolean)\n  selected ()\n\nProperties from GdlDockItem:\n  orientation -> GtkOrientation: Orientation\n
...more bloody mess here... 
```

这个项目是否完全死了，只是用虚假的承诺来欺骗天真的程序员？

# oracle - 模式的用户权限，但不是表

> ID：15940959
> 
> 赞同：-1
> 
> 时间：2013-04-11T04:45:00.313
> 
> 标签：oracle

有什么方法可以让用户访问表的架构而不是表中的数据？欢迎任何答案或建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:15:23.737

假设架构是指表的 DDL 语句，这是一种方法：

```
 -- as table owner
   create or replace function getDDLForTable(table_name in varchar2) 
     return CLOB is
          l_Result CLOB;
        begin
          select dbms_Metadata.get_ddl('TABLE',
                                       table_name)
            into l_result
            from dual;
          return l_Result;
        end;

   grant execute on getDDLForTable to <other_user>;

   -- as other_user
   select <owner>.getDDLForTable('T') from dual 
```

诀窍是创建一个返回 DDL 语句的函数（作为表的所有者）并将此函数的执行权限授予其他用户。

# java - 使用 post 命令插入融合表 java - 414 Request-URI too large

> ID：15940961
> 
> 赞同：0
> 
> 时间：2013-04-11T04:45:09.737
> 
> 标签：java, http-post, uri, google-fusion-tables

我正在尝试使用以下表单中的 httpRequestFactory 生成的 post 命令更新 java 中的融合表行。

```
httpRequestFactory.buildPostRequest(new GenericUrl,null); 
```

GenericUrl 将是这样的：

```
https://www.google.com/fusiontables/api/queryINSERT INTO -table string- (name,geom)
VALUES ('sedgewich county','<Polygon><outerBoundaryIs><LinearRing>
<coordinates>-102.650938,40.74916,0 -102.651013,40.752116,0 ........</coordinates>
</LinearRing></outerBoundaryIs></Polygon>'); 
```

只有 kml 多边形字符串的长度为数千个字符。

问题是当帖子执行时我收到一个 414Request-URI too large 错误。我认为这个问题不会发生在发布请求上。

我可以使用相同的方法很好地插入一个自定义的较小的 kml 字符串，当 kml 字符串太长时它只会给我错误。

有什么想法可以解决这个问题吗？

谢谢

# ruby - ruby如何获取访问者的ip？

> ID：15940963
> 
> 赞同：1
> 
> 时间：2013-04-11T04:45:17.417
> 
> 标签：ruby, sinatra

我在 Sinatra 中使用 ruby​​。我想获取访问者的公共 ip 并将其保存在数据库中，但不知道如何获取 ip...对不起，但我还没有找到一种方法来做到这一点。大佬们可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T05:28:54.803

根据[Sinatra 文档](http://www.sinatrarb.com/intro.html#Accessing%20the%20Request%20Object)，您可以使用

```
request.ip 
```

# excel - Microsoft Excel 日期转换

> ID：15940964
> 
> 赞同：-2
> 
> 时间：2013-04-11T04:45:36.237
> 
> 标签：excel, date

我有问题

我在 excel 中得到数据，其中包含这种格式的日期“* *27/2/201* *1”

我需要将其转换为“ **MMM, dd yyyy** ”格式，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:22:26.067

假设值 27/02/2011 在单元格 A1 中，公式为

```
=DATE(MID(A1,7,4),MID(A1,4,2),LEFT(A1,2)) 
```

这为您提供了一个不错的 Excel 日期，您可以使用格式等执行任何其他操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T05:11:34.007

如果您在工作表中工作，则可以使用文本函数 TEXT(reference, format)

```
=TEXT(A1,"mmm/dd/yyyy") 
```

在 VBA 中使用 Format() 函数：

```
Sub a()
x = Format(Now(), "mmm,dd,yyyy")

End Sub 
```

如果日期在工作表中存储为字符串并且不使用 2 位数月份，则可以将其转换为如下日期格式：

```
=DATE(RIGHT(A2,4), FIND("/",A2,FIND("/",A2)+1)-FIND("/",A2)-1,LEFT(A2,FIND("/",A2)-1)) 
```

# eclipse - 国际化插件 Eclipse

> ID：15940968
> 
> 赞同：1
> 
> 时间：2013-04-11T04:46:03.577
> 
> 标签：eclipse, internationalization

我有一个关于 Eclipse 国际化插件的小问题 .. 在这里描述

```
 https://developers.google.com/java-dev-tools/wbpro/features/internationalization 
```

我可以添加不同的语言环境/语言..

我想知道的是，我是否必须自己翻译所有内容，或者eclipse会自己翻译，

因此，如果我添加了 10 种语言并且每种语言有 100 个单词，我是否必须为我自己找到这 10 种语言的这 100 个单词的翻译并将它们放入属性文件中，或者还有其他简单的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:37:22.337

如今，自动机器翻译仍然导致翻译质量非常低。因此独立于 Eclipse 或任何其他工具，程序的本地化几乎总是由真人完成。否则，所得产品的可用性较差。

# java - 使用谷歌图表在 webview 中创建图表

> ID：15940970
> 
> 赞同：1
> 
> 时间：2013-04-11T04:46:20.623
> 
> 标签：java, android, charts, google-visualization

我有一个应用程序，我想在其中创建这样的图表：

![图表样本](https://i.stack.imgur.com/zce3L.png)

**我想在我的活动中使用 google 图表生成一个图表，就像它在 web 视图中一样**。我可以通过什么方式做到这一点？

**图表的示例[网址](http://chart.apis.google.com/chart?cht=lc&chs=200x125&chd=t:40,60,60,45,47,75,70,72&chxt=x,y&chxl=0:%7C0%7C20%7C30%7C40%7C50%7C60%7C70%7C80%7C90%7C10%7C1:%7C0%7C25%7C50%7C75%7C100&chs=200x125)**

PS：我可以直接在webview中打开url。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:20:47.040

如果您想要替代谷歌图表向导，您可以使用 achartengine。

[http://www.achartengine.org/content/demo.html](http://www.achartengine.org/content/demo.html)。

教程可在

[http://www.youtube.com/playlist?list=PL2603F3CABBF5EEB0](http://www.youtube.com/playlist?list=PL2603F3CABBF5EEB0)。

列出是否可以帮助学习 achartengine 的链接

[http://www.youtube.com/playlist?list=PL2603F3CABBF5EEB0](http://www.youtube.com/playlist?list=PL2603F3CABBF5EEB0)

[http://android-sample-code.blogspot.in/2012/06/draw-charts-in-application-using.html](http://android-sample-code.blogspot.in/2012/06/draw-charts-in-application-using.html)

[http://code.google.com/p/achartengine/](http://code.google.com/p/achartengine/)

# jquery - 如何设置被 ajax 替换的 jQuery 按钮的样式

> ID：15940972
> 
> 赞同：0
> 
> 时间：2013-04-11T04:46:21.313
> 
> 标签：jquery, ajax

我有一个按钮，我正在使用 jQuery 进行样式设置。文档准备好后，我运行以下代码：

```
$('button#refresh').button({
    icons: { primary: "ui-icon-refresh" },
    text: false
}); 
```

这一直工作正常，但是现在我正在用通过 ajax 检索的一些内容替换包含按钮的 div 的内容。新内容还包含一个按钮，`id="refresh"`我希望使用 jQuery 来设置它的样式。我该怎么做？

我认为我的按钮刷新代码需要绑定到 div 上的一个事件，但是什么事件呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:49:31.040

再次调用 ajax 成功回调函数中的按钮样式脚本。

```
 $.ajax({
  ...
  success:function(data){
    //your stuff
    $('button#refresh').button({
      icons: { primary: "ui-icon-refresh" },
      text: false
    });
  } 
```

注意“：`The new content also contains a button with id="refresh"`看起来您有两个同名的 ID .... **ID 应该始终是唯一的**.. 所以让它成为类并使用类选择器..

```
 $('button.refresh').button({
   ...... 
```

# haskell - 有人能告诉我下面代码中的 `catch` 包来自哪个包吗？

> ID：15940974
> 
> 赞同：0
> 
> 时间：2013-04-11T04:46:30.297
> 
> 标签：haskell

我有兴趣玩这个 github[项目](https://github.com/yihuang/haskell-json-rpc)。似乎缺少依赖项。[有人可以从上下文中](https://github.com/yihuang/haskell-json-rpc/blob/master/Network/JsonRpc/Server.hs)告诉我包裹`catch`的来源。只是`Control.Exception`想到了，但我认为这是不对的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T05:06:07.063

在这种情况下很容易判断，因为每个导入都有一个导入列表或者是合格的，我们马上看到`catch`的没有明确导入的合格。

在 haskell 中，未显式导入的函数来自`Prelude`. 这是[docs](http://www.haskell.org/ghc/docs/7.4.2/html/libraries/base-4.5.1.0/Prelude.html#v%3acatch)的链接。你可能很难找到它，因为它在最新版本的 Haskell 中被删除，取而代之的是你在`Control.Exception`. 玩得开心项目！

# c - gwan 和 mongodb

> ID：15940977
> 
> 赞同：0
> 
> 时间：2013-04-11T04:47:15.097
> 
> 标签：c, mongodb, g-wan

我是 gwan 的新手，目前正在编写一个简单的程序来从 MongoDB 中插入和选择数据。编译完Mongo-c-driver，把Mongo标准库放到/usr/lib/下，发现gwan/csp文件夹下的程序报错：

```
Linking myprog.c: undefined symbol: mongo_client 
```

我的程序

```
#include <mongo.h>
int main(){ 
    ...
    mongo conn[1];
    int status = mongo_client( conn, "192.168.1.115", 27017 );
} 
```

（我在Linux环境下编写的程序可以运行！）<-我是说mongodb官方测试代码。

```
gcc -o output -lmongoc myprog_Linux.c 
```

谁能帮我？非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:13:56.140

如果您使用 G-WAN 脚本中的第三方库，则必须使用`#pragma include "library_include_path"`and`#pragma link "library_name"`指令（它们替换了 makefile）。

当然，与 C/C++ 一样，必须使用 #include 标头来添加库使用的定义。

这记录在[G-WAN PDF 手册](http://gwan.com/archives/gwan_linux.pdf)、[开发者](http://gwan.com/developers#libraries)网站、[G-WAN 常见问题解答](http://gwan.com/faq#use_libraries)以及许多依赖于各种库（libcurl、libmysql、libsqlite、libcairo、libmagick 等）的 servlet 示例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:36:56.877

这是 gwan + mongoDB 的一个小示例

首先：安装mongoDB c驱动（[https://github.com/mongodb/mongo-c-driver](https://github.com/mongodb/mongo-c-driver)）

```
$ git clone https://github.com/mongodb/mongo-c-driver.git
$ cd mongo-c-driver
$ scons
$ sudo scons install 
```

它将安装在 /usr/local 文件夹中，如果需要，您需要对其进行调整，或者只需将生成的文件复制到 /usr/lib 和 /usr/include/

然后以 root 身份运行 ldconfig

```
$ sudo ldconfig 
```

一旦安装了 mongodb c 驱动程序，只需尝试这个简单的示例：

```
// ============================================================================
// C servlet sample for the G-WAN Web Application Server (http://trustleap.ch/)
// ----------------------------------------------------------------------------
// mongodb.c: querying mongoDB from G-WAM
// ============================================================================

#pragma link "mongoc"
#pragma link "bson"

#include <mongo.h>
#include <bson.h>
#include "gwan.h" // G-WAN exported functions

int main(int argc, char *argv[])
{
   xbuf_t *reply = get_reply(argv);
   mongo conn[1];
   int status = mongo_client( conn, "localhost", 27017 );

  if( status != MONGO_OK ) {
    switch ( conn->err ) {
      case MONGO_CONN_NO_SOCKET:  printf( "no socket\n" ); return 1;
      case MONGO_CONN_FAIL:       printf( "connection failed\n" ); return 1;
      case MONGO_CONN_NOT_MASTER: printf( "not master\n" ); return 1;
    }
  }

  int i = 0;
  for(i=0; i<100;i++) {
    bson b[1];
    bson_init( b );
    bson_append_new_oid( b, "_id" );
    bson_append_string( b, "name", "Joe" );
    bson_append_int( b, "age", 33 );
    bson_finish( b );
    mongo_insert( conn, "tutorial.people", b, NULL );
    bson_destroy( b );
  }

  xbuf_xcat(reply, "Hello Mongo !! %d %d", status, i);

  return 200;
}
// ============================================================================
// End of Source Code
// ============================================================================ 
```

享受 ：）

# c++ - std::list 中每个元素的大小是多少？

> ID：15940978
> 
> 赞同：5
> 
> 时间：2013-04-11T04:47:24.913
> 
> 标签：c++, stl

std::list 在其实现中使用链表，列表中的每个元素有多大（减去有效负载）？

通过测试，在 Windows 7 机器上使用 mingw（不是 mingw-64），每个元素占用 24 个字节的每个 int 元素。

一个指向左边的指针和一个指向右边的指针只有 4+4=8 个字节！而一个 int 只有 4 个字节（由 sizeof(void*) 和 sizeof(int) 确定），所以我很好奇，额外的空间去哪儿了？

（测试涉及制作许多元素，查看程序的大小，制作更多元素并再次查看程序的大小，取差）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T06:38:02.720

当有关于 STL 容器的内存问题时......请记住，它们获得的所有内存都来自您传递的*分配器*（默认为`std::allocator`）。

因此，只需检测分配器即可回答大多数问题。现场演示位于[liveworkspace](http://liveworkspace.org/code/2wy1hn%243)，输出显示在此处`std::list<int, MyAllocator>`：

```
allocation of 1 elements of 24 bytes each at 0x1bfe0c0
deallocation of 1 elements of 24 bytes each at 0x1bfe0c0 
```

因此，在这种情况下是 24 字节，这在 64 位平台上是可以预期的：两个指针用于下一个和上一个，4 个字节的有效负载和 4 个字节的填充。

* * *

完整的代码清单是：

```
#include <iostream>
#include <limits>
#include <list>
#include <memory>

template <typename T>
struct MyAllocator {
   typedef T value_type;
   typedef T* pointer;
   typedef T& reference;
   typedef T const* const_pointer;
   typedef T const& const_reference;
   typedef std::size_t size_type;
   typedef std::ptrdiff_t difference_type;

   template <typename U>
   struct rebind {
      typedef MyAllocator<U> other;
   };

   MyAllocator() = default;
   MyAllocator(MyAllocator&&) = default;
   MyAllocator(MyAllocator const&) = default;
   MyAllocator& operator=(MyAllocator&&) = default;
   MyAllocator& operator=(MyAllocator const&) = default;

   template <typename U>
   MyAllocator(MyAllocator<U> const&) {}

   pointer address(reference x) const { return &x; }
   const_pointer address(const_reference x) const { return &x; }

   pointer allocate(size_type n, void const* = 0) {
      pointer p = reinterpret_cast<pointer>(malloc(n * sizeof(value_type)));
      std::cout << "allocation of " << n << " elements of " << sizeof(value_type) << " bytes each at " << (void const*)p << "\n";
      return p;
   }

   void deallocate(pointer p, size_type n) {
      std::cout << "deallocation of " <<n << " elements of " << sizeof(value_type) << " bytes each at " << (void const*)p << "\n";
      free(p);
   }

   size_type max_size() const throw() { return std::numeric_limits<size_type>::max() / sizeof(value_type); }

   template <typename U, typename... Args>
   void construct(U* p, Args&&... args) { ::new ((void*)p) U (std::forward<Args>(args)...); }

   template <typename U>
   void destroy(U* p) { p->~U(); }
};

template <typename T>
using MyList = std::list<T, MyAllocator<T>>;

int main() {
   MyList<int> l;
   l.push_back(1);
} 
```

# ios - 应用程序 UIImagePickerController 在方向应用程序 iphone ios 6 中崩溃

> ID：15940981
> 
> 赞同：0
> 
> 时间：2013-04-11T04:47:50.467
> 
> 标签：ios, uiimagepickercontroller

我的应用程序的方向是所有视图的纵向，除了 MPMoviePlayerViewController 之外，它是横向的。

现在，当我尝试使用 UIImagePickerController 打开相机时，我的应用程序崩溃了，

我读了一些子类化 UIImage 选择器控制器的地方，我这样做了，

```
 - (BOOL)shouldAutorotate
           {
             return YES;
            }  

         - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
         {
             return UIInterfaceOrientationMaskPortrait;
         }

         - (NSUInteger)supportedInterfaceOrientations
         {
             return UIInterfaceOrientationMaskAll;
         } 
```

我的崩溃解决了，但我的选择器被颠倒了，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:02:43.837

尝试这个：

-（布尔）应该自动旋转{

```
return YES; 
```

}

-（NSUInteger）支持的接口方向{

```
return UIInterfaceOrientationMaskPortrait; 
```

}

-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{

```
return UIInterfaceOrientationPortrait; 
```

}

# algorithm - 为什么斐波那契堆需要级联切割？

> ID：15940984
> 
> 赞同：12
> 
> 时间：2013-04-11T04:48:01.953
> 
> 标签：algorithm, data-structures, complexity-theory, big-o, fibonacci-heap

我正在从“算法简介”中学习 f-heap，而“减键”操作真的让我感到困惑——为什么这需要“级联切割”？

如果删除此操作：

1.  make-heap()、insert()、minimum() 和 union() 的成本显然保持不变
2.  extract-min() 仍然是 O(D(n))，因为在 O(n(H)) 'consolidate' 操作中，大多数有根树的成本可以**在它们被添加到根列表时支付**支付，并且剩余成本 O(D(n))
3.  减少键（）：显然O（1）

至于D(n)，虽然我不能准确解释，但我认为它仍然是O(lgn)，因为没有'cascading-cut'，一个节点**可能稍后会被移动到根列表**，并且任何节点**躲在其父之下**不影响效率。至少，这不会让情况变得更糟。

为我糟糕的英语道歉:(

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T07:07:34.373

级联削减的原因是保持 D(n) 低。事实证明，如果允许从树中切割任意数量的节点，则 D(n) 可以增长为线性，这使得 delete 和 delete-min 需要线性时间。

直观地说，您希望 k 阶树中的节点数在 k 中是指数的。这样，您只能在合并堆中拥有对数多棵树。如果你可以从一棵树上切割任意数量的节点，你就失去了这个保证。具体来说，你可以取一棵 k 阶树，然后砍掉它的所有孙子树。这会留下一棵有 k 个孩子的树，每个孩子都是叶子。因此，您可以创建只有 k + 1 个节点的 k 阶树。这意味着在最坏的情况下，您需要一棵 n - 1 阶的树来保存所有节点，因此 D(n) 变为 n - 1 而不是 O(log n)。

希望这可以帮助！

# python - Python 无法编译该正则表达式。sre_constants.error：无需重复

> ID：15940985
> 
> 赞同：0
> 
> 时间：2013-04-11T04:48:18.833
> 
> 标签：python, regex

我正在将 C# 函数转换为 Python。它应该是与现有功能兼容的错误。

这是该函数中的正则表达式：`http://[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_$.+!*()/\\\,:;@&=?~#%]*)*`. 但是 Python 无法编译它：

```
>>> re.compile(r"http://[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_$.+!*()/\\\,:;@&=?~#%]*)*")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3.3/re.py", line 214, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python3.3/re.py", line 281, in _compile
    p = sre_compile.compile(pattern, flags)
  File "/usr/lib/python3.3/sre_compile.py", line 498, in compile
    code = _code(p, flags)
  File "/usr/lib/python3.3/sre_compile.py", line 483, in _code
    _compile(code, p.data, flags)
  File "/usr/lib/python3.3/sre_compile.py", line 75, in _compile
    elif _simple(av) and op is not REPEAT:
  File "/usr/lib/python3.3/sre_compile.py", line 362, in _simple
    raise error("nothing to repeat")
sre_constants.error: nothing to repeat 
```

注意：该正则表达式有一个 JavaScript 版本：`/http:\/\/[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z\$\.\+\!\_\*\(\)\/\,\:;@&=\?~#%]*)*/gi`.

~~我搜索了大约`nothing to repeat`错误，但一无所获。~~ 对不起，这是一个重复的帖子。

问题出在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T04:56:36.487

我用以下方法重现了错误：

```
re.compile(r"([A]*)*") 
```

问题是它`[A]*`可能匹配一个空字符串。猜猜当它尝试匹配`([A]*)*`时会发生什么`[A]*`？“没有什么可重复的”。不过，正则表达式引擎不会等待实际发生。它失败了，因为这种情况甚至有可能发生。

这应该适合你：

```
r"http://[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_$.+!*()/\\\,:;@&=?~#%]*)" 
```

我刚刚删除了最后一个`*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T04:29:07.690

如果出现相同的错误，请使用以下正则表达式：

`re.compile(r'(?P<term>[0-9]{1,2})-(?P<features>[A-Za-z\:]*)?')`

是“？” 最后导致错误。严格来说，这不是重复，事实上，从 python 2.7.9 开始，它就可以正常工作（应该如此）。但是，该错误从 python 2.7.3 开始存在。

# iphone - iOS 接近和 GPS 测量距离

> ID：15940996
> 
> 赞同：1
> 
> 时间：2013-04-11T04:50:02.810
> 
> 标签：iphone, ios, gps, proximity

我正在开发一个应用程序，如果他从检查位置移动超过 20 米，我需要提醒用户。我计划在此开发中使用接近传感器。但是我找到了这个文件。

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

它说

> “具体的阈值距离由硬件和当前可用的定位技术确定。例如，如果禁用 Wi-Fi，区域监控的准确度会大大降低。但是，出于测试目的，您可以假设最小距离为大约200米。”

如果我使用 GPS 距离，它将消耗大量电力。我在错误的道路上发展吗？感谢您的善意建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:20:37.257

对于您的任务，唯一的方法是在最佳质量模式下使用 GPS ( `CLLocationAcuracyBest`)。
检查 loaction.getAcuracy() 以查看该位置是否来自 GPS 或蜂窝塔/wifi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:00:54.823

您好，您可以根据自己的需要使用 GPS。它肯定会消耗更多的电量，但使用起来更准确。请更具体地说明您在应用程序中需要此功能的次数。