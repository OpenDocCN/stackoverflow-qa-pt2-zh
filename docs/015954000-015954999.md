# StackOverflow 问答 15954000-15954999

# python - 为 6 个字符代码编写正则表达式的问题

> ID：15954001
> 
> 赞同：1
> 
> 时间：2013-04-11T16:24:56.690
> 
> 标签：python, regex

我有一个包含以下格式数据的文件：

```
 1 AA/BB                  0C89JG
   2 ABANO/ANA VICTORIA     F12LFJ
   3 ABBOUDLASTNAME/ABBOUDF DWPTHC
   4 ABDALLAH/SIJAM         H0ZDM9
   5 ABDEL MESSIH/DINA      T0SF8N
   6 ABHISHEK/PRAMANIK      7SLKXV
   7 ABHYANKAR/DHANANJAY    7SM0BV
   8 ABOUSALAMA/FEMKE       LTTRQC
   9 ABRAMOVA/NATALIA       77LCPZ
  10 ABRANTES/JOAO          KXZC7Q
  11 ABRATH/LUC             D5J99J
  12 ABREO/HECTOR           CXDH4G
  13 ABREU/ANDREA           242GRC
  14 ABREU/MARCELO          2436R7
  15 ABREU/VANDA            3HDNQQ
  16 ABTS/NATHALIE          DSK9TN
  17 ABTS/NATHALIE          FZ0LN4 
```

我正在尝试从第 17 行提取最后 6 个字符，例如 FZ0LN4。我想出的正则表达式是：

```
([0-9]{1,5})([A-Z /]) ([0-9A-Z]{6}) 
```

但它目前不起作用。谁能指出是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:30:54.957

如果您只需要行尾的字符串，则可以使用更简单的正则表达式，例如：`\b\w{6}\b$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:26:32.183

有几个问题：

*   您不匹配某些空格。
*   `[A-Z /]`缺少重复运算符。

我会像这样重写正则表达式：

```
In [8]: re.match(r'\s*(\d+)\s*([A-Z /]+?)\s*(\w+)$', '  15 ABREU/VANDA            3HDNQQ').groups()
Out[8]: ('15', 'ABREU/VANDA', '3HDNQQ') 
```

如果您只需要最后六个字符，则不需要正则表达式：

```
In [15]: s = '  15 ABREU/VANDA            3HDNQQ'

In [16]: s[-6:]
Out[16]: '3HDNQQ' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:32:30.053

您是否只查找最后一行 (17)？如果是这样，请重新搜索整个字符串：

```
import re
myString="""
   1 AA/BB                  0C89JG
   2 ABANO/ANA VICTORIA     F12LFJ
   3 ABBOUDLASTNAME/ABBOUDF DWPTHC
   4 ABDALLAH/SIJAM         H0ZDM9
   5 ABDEL MESSIH/DINA      T0SF8N
   6 ABHISHEK/PRAMANIK      7SLKXV
   7 ABHYANKAR/DHANANJAY    7SM0BV
   8 ABOUSALAMA/FEMKE       LTTRQC
   9 ABRAMOVA/NATALIA       77LCPZ
  10 ABRANTES/JOAO          KXZC7Q
  11 ABRATH/LUC             D5J99J
  12 ABREO/HECTOR           CXDH4G
  13 ABREU/ANDREA           242GRC
  14 ABREU/MARCELO          2436R7
  15 ABREU/VANDA            3HDNQQ
  16 ABTS/NATHALIE          DSK9TN
  17 ABTS/NATHALIE          FZ0LN4
"""

m = re.search("(\S{6})$", myString)
if m:
    print m.group(1) 
```

如果您需要找到特定的行，您应该单独遍历这些行：

```
for line in myString.split("\n"):
    m = re.search("^\s*17\s*.*(\S{6})$", line)
    if m:
        print m.group(1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T17:26:50.513

这很容易在没有正则表达式的情况下完成：

```
st='''\
   1 AA/BB                  0C89JG
   2 ABANO/ANA VICTORIA     F12LFJ
   3 ABBOUDLASTNAME/ABBOUDF DWPTHC
   4 ABDALLAH/SIJAM         H0ZDM9
   5 ABDEL MESSIH/DINA      T0SF8N
   6 ABHISHEK/PRAMANIK      7SLKXV
   7 ABHYANKAR/DHANANJAY    7SM0BV
   8 ABOUSALAMA/FEMKE       LTTRQC
   9 ABRAMOVA/NATALIA       77LCPZ
  10 ABRANTES/JOAO          KXZC7Q
  11 ABRATH/LUC             D5J99J
  12 ABREO/HECTOR           CXDH4G
  13 ABREU/ANDREA           242GRC
  14 ABREU/MARCELO          2436R7
  15 ABREU/VANDA            3HDNQQ
  16 ABTS/NATHALIE          DSK9TN
  17 ABTS/NATHALIE          FZ0LN4'''

for line in st.splitlines():
    print line.split()[-1] 
```

印刷：

```
0C89JG
F12LFJ
DWPTHC
H0ZDM9
T0SF8N
7SLKXV
7SM0BV
LTTRQC
77LCPZ
KXZC7Q
D5J99J
CXDH4G
242GRC
2436R7
3HDNQQ
DSK9TN
FZ0LN4 
```

或者，如果您只想要“第 n 个”，则如下所示：

```
>>> li=[line.split()[-1] for line in st.splitlines()]
>>> li[-1]
'FZ0LN4'
>>> li[-2]
'DSK9TN'    # etc etc 
```

或者，如果你*真的*想要一个正则表达式：

```
>>> re.findall(r'\s(\S{6})$',st,re.MULTILINE)
['0C89JG', 'F12LFJ', 'DWPTHC', 'H0ZDM9', 'T0SF8N', '7SLKXV', '7SM0BV', 'LTTRQC', '77LCPZ', 'KXZC7Q', 'D5J99J', 'CXDH4G', '242GRC', '2436R7', '3HDNQQ', 'DSK9TN', 'FZ0LN4']
>>> re.findall(r'\s(\S{6})$',st,re.MULTILINE)[-1]
'FZ0LN4' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T16:30:31.870

将`$`字符用于行的 and 和`\S`非空白字符

```
import re
>>> s = s = '''   1 AA/BB                  0C89JG
   2 ABANO/ANA VICTORIA     F12LFJ
   3 ABBOUDLASTNAME/ABBOUDF DWPTHC
   4 ABDALLAH/SIJAM         H0ZDM9
   5 ABDEL MESSIH/DINA      T0SF8N
   6 ABHISHEK/PRAMANIK      7SLKXV
   7 ABHYANKAR/DHANANJAY    7SM0BV
   8 ABOUSALAMA/FEMKE       LTTRQC
   9 ABRAMOVA/NATALIA       77LCPZ
  10 ABRANTES/JOAO          KXZC7Q
  11 ABRATH/LUC             D5J99J
  12 ABREO/HECTOR           CXDH4G
  13 ABREU/ANDREA           242GRC
  14 ABREU/MARCELO          2436R7
  15 ABREU/VANDA            3HDNQQ
  16 ABTS/NATHALIE          DSK9TN
  17 ABTS/NATHALIE          FZ0LN4'''

>>> re.findall('\\S{6}$', s, re.MULTILINE)
['0C89JG', 'F12LFJ', 'DWPTHC', 'H0ZDM9', 'T0SF8N', '7SLKXV', '7SM0BV', 'LTTRQC', '77LCPZ', 'KXZC7Q', 'D5J99J', 'CXDH4G', '242GRC', '2436R7', '3HDNQQ', 'DSK9TN', 'FZ0LN4'] 
```

# javascript - 浏览器的后退按钮显示出奇怪的行为。历史.js

> ID：15954005
> 
> 赞同：1
> 
> 时间：2013-04-11T16:25:08.283
> 
> 标签：javascript, jquery, ajax, browser-history, history.js

我有一个`<select>`标签。在更改所选项目时，一些`<div>`s 会通过以下功能使用 AJAX 进行更新： `update_div1, update_div2, update_div3`. 管理此操作的代码如下并且运行良好：

```
$('select.select-x').change(function(e) {

    e.preventDefault(); 

    var value = $('select.select-x option:selected').val(); 
    var text = $('option:selected').text();

    update_div1(value); 
    update_div2(value);
    update_div3(value);
    manage_history(value,text);

    return false;

}); 
```

问题在于`manage_history`负责管理浏览器历史记录的最后一个功能。在这个函数中，我使用 history.js 将浏览器状态推送到历史堆栈中。我在阅读了许多关于 history.js 的 SO 文章后知道，后退和前进按钮的操作应该包含在`History.Adapter.bind()`. 问题是浏览器的后退按钮有奇怪的行为：它们`History.Adapter.bind()`多次执行里面的函数，精确到我已经有一个 onChange 事件通过`<select>`.

的代码`manage_history`是：

```
function manage_history(str,str2)
{

    var History = window.History;
    if ( !History.enabled ) { return false; }

    var path = 'http://localhost/enc/?p='+str;

    History.pushState({myid:str},str2,path);

    History.Adapter.bind(window,'statechange',function() { 

        var State = History.getState();

        update_div1(State.data.myid); fter
        update_div2(State.data.myid);
        update_div3(State.data.myid);
    }); 
} 
```

我希望我很清楚。感谢您的帮助。

**脑贡献后的整体解决方案：**

```
$('select.select-x').change(function(e) {

    e.preventDefault(); 

    var value = $('select.select-x option:selected').val(); 
    var text = $('option:selected').text();

    manage_history(value,text);

    return false;

});

History.Adapter.bind(window,'statechange',function() { // Note:  Using statechange instead of popstate

        var State = History.getState();

            update_div1(value); 
        update_div2(value);
            update_div3(value);

    }); 

function manage_history(str,str2)
{

    var History = window.History;
    if ( !History.enabled ) { return false; }

    var path = 'http://localhost/enc/?p='+str;

    History.pushState({myid:str},str2,path);

        update_div1(State.data.myid); 
        update_div2(State.data.myid);
            update_div3(State.data.myid);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:14:37.593

将 移`History.Adapter.bind`离`manage_history`功能。每次调用该`manage_history`函数时都重新绑定它。

# java - ClassNotFoundException 的原因

> ID：15954007
> 
> 赞同：0
> 
> 时间：2013-04-11T16:25:10.760
> 
> 标签：java, classnotfoundexception

如果构建路径正确并且所有类都可以访问（相同的包！），此异常的原因是什么？我应该怎么做才能找到罪魁祸首？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:37:03.963

> 构建路径正确并且所有类都可以访问

那你不应该得到错误。您可能会收到该错误的唯一其他原因是该类是否由**子类加载器加载**并且位于类路径中，但父类加载器正在尝试访问它（假设委托模型是父类优先）。在这种情况下，类由 JVM 加载，但程序无法访问它。

想一想，根据类加载器的实例化和使用方式，有一些更复杂的场景可能会导致类加载异常。**Commons 日志记录**受到这些影响，我在接收端的次数比我想承认的要多。如果您想看一下，有一篇[优秀的文章突出了这些场景。](http://articles.qos.ch/classloader.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:27:42.763

我会检查构建所有类的目录。我怀疑你会发现你的课不见了。

* * *

编辑：正如@Hot Licks 所指出的，您从损坏的类中得到的错误是 NoClassDefFoundError

```
public static void main(String... ignored) {
    for (int i = 0; i < 3; i++) {
        try {
            new BrokenClass();
        } catch (Throwable t) {
            System.out.println(t);
        }
    }

}

static class BrokenClass {
    static {
        if (true)
            throw new AssertionError();
    }
} 
```

在 Java 7 上打印

```
java.lang.AssertionError
java.lang.NoClassDefFoundError: Could not initialize class Main$BrokenClass
java.lang.NoClassDefFoundError: Could not initialize class Main$BrokenClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:46:02.630

Here's a good article that might just help you. It lists down 13 things you can consider looking at to find that culprit.

[ClassNotFoundException: A List of Dumb Things to Check](http://myarch.com/classnotfound).

# django-admin - 如何让 django 识别我的 admin.py 文件？

> ID：15954010
> 
> 赞同：0
> 
> 时间：2013-04-11T16:25:24.007
> 
> 标签：django-admin

我为管理模型创建了一个单独的文件 - 我如何让 django 在文件中查找？目前，课程未显示在管理员中。这是admin.py：

```
from django.contrib import admin
from website.apps.courses import Course

class CourseAdmin(admin.ModelAdmin):
    list_display = ('title', 'start_date')

admin.site.register(Course, CourseAdmin) 
```

这是 urls.py：

```
from django.contrib import admin
from django.conf.urls.defaults import patterns, include, url
from website.apps.courses.views import *

admin.autodiscover()

urlpatterns = patterns('',
    # Admin panel and documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:37:06.873

现在已经解决了。我没有从 admin.py 文件中导入模型。

# rest - 获取或创建唯一节点（创建）发生错误 415 Unsupported Media Type

> ID：15954017
> 
> 赞同：0
> 
> 时间：2013-04-11T16:25:47.137
> 
> 标签：rest, post, neo4j

当我使用 chrome 扩展 Postman 测试[“17.11.1。获取或创建唯一节点（创建）”](http://docs.neo4j.org/chunked/milestone/rest-api-unique-indexes.html)时 ，我遇到了一些异常：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    <title>Error 415 Unsupported Media Type</title>
</head>
<body>
    <h2>HTTP ERROR 415</h2>
    <p>Problem accessing /db/data/index/node/people. Reason:

        <pre>    Unsupported Media Type</pre>
    </p>
    <hr />
    <i>
        <small>Powered by Jetty://</small>
    </i>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
    <br/>
</body> 
```

我的测试参数：

```
http://127.0.0.1:7474/db/data/index/node/people?uniqueness=get_or_create 
```

json数据

```
{
    "key" : "name",
    "value" : "Tobias",
    "properties" : {
        "name" : "Tobias",
        "sequence" : 1
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:54:55.993

是的，我发现了问题，我的测试 neo4j 的版本（1.8.2），但我参考 neo4j 手册[1.9.M05](http://docs.neo4j.org/chunked/milestone/) neo4j 手册的版本 1.8.2 在索引 帖子 url[中创建一个唯一节点](http://docs.neo4j.org/chunked/stable/rest-api-unique-indexes.html)`POST http://127.0.0.1:7474/db/data/index/node/people?unique`： 但 neo4j 手册的版本 1.9.m05 [创建索引](http://docs.neo4j.org/chunked/milestone/rest-api-unique-indexes.html) 帖子网址中的唯一节点：`POST http://127.0.0.1:7474/db/data/index/node/people?uniqueness=get_or_create` 所以我收到不支持的媒体类型错误。

# javascript - 无法在客户端按钮单击事件中使用 <% ... %>

> ID：15954021
> 
> 赞同：0
> 
> 时间：2013-04-11T16:26:04.790
> 
> 标签：javascript, asp.net, .net, inline-code

我正在尝试根据查询字符串中的值重定向到不同的页面。这是一个 asp.net 网页表单页面。单击取消按钮时，应执行以下 js。该按钮是一个 devexpress 按钮。

```
function OnCancelClick(s, e) {
    if (confirm('If you leave this page, you have to reselect the benefits. Are you sure to leave this page?')) {
        var callingPage = document.getElementById("<%= CallingPage.ClientID %>").value;
        alert("Calling Page: " + callingPage);
        if (callingPage == "AddEmployee.aspx") {
            window.location.href = ResolveUrl('~/Member/Maintenance/AddEmployee.aspx?from=VerifyPage');
        } else if (callingPage == "AddDependentMember.aspx") {

        }
    } 
```

CallingPage 是一个asp隐藏字段的ID。我在页面加载期间设置它的值。即使在加载此页面之前，我也无法修改 Controls 集合，因为该控件包含代码块（即`<% ... %>`）错误。不确定是由于 devexpress 按钮控制还是其他原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:36:23.537

将 CallingPage.ClientID 分配给具有公共可访问性的服务器端页面变量：

```
public partial class <class / page name> : System.Web.UI.Page
{
    public string callingPage = "";

    protected void Page_Load(object sender, EventArgs e)
    {
        this.callingPage = CallingPage.ClientID;

        ...
    }
} 
```

然后在你的javascript中：

```
var callingPage = document.getElementById("<%= this.callingPage %>").value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:33:12.270

实际上这是一个与 devexpress 控件相关的独特问题。看起来我们不能在 devexpress 按钮单击事件的 js 客户端单击事件中使用 <% %> 。相反，我使用了 devexpress 的隐藏控件，然后它工作正常。谢谢

# spring - Spring MVC：如何像任何 RequestMapping 一样对待 html 后缀

> ID：15954027
> 
> 赞同：2
> 
> 时间：2013-04-11T16:26:21.873
> 
> 标签：spring, model-view-controller, controller

我有一个遗留系统和一些我们想要摆脱的 url 重写规则。其中一个要更改的规则是 /tools/lookup.html?what=this 并将其更改为 /tools/search?what=this 并实际上返回 json 而不是 html ！

我试图找到一种方法让@Controller 支持旧格式lookup.html，但它失败并显示HTTP 406“此请求标识的资源只能生成具有根据请求不可接受的特征的响应”接受“标题。”。我想知道是否有人做过类似的事情？

我的控制器方法如下所示：

```
@RequestMapping(value = "/tools/lookup.html", method = RequestMethod.GET)
public @ResponseBody Result lookup() {
    return result;
} 
```

提前感谢西尔万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:30:08.543

删除 reponsebody 注释将停止返回 json 的 controlle 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:39:49.177

仔细看看`@RequestMapping`，它支持一个`produces`元素。例如，

```
@RequestMapping(value = "/tools/search", produces = "application/json")
@ResponseBody
public Result search(...) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:06:49.747

问题来自于 spring 如何处理路径变量。默认行为将切断 url (.html) 中的最后一个点以查找请求映射。这种效果只发生在最后一个路径变量上。

我还没有找到一个属性来全局更改它，但一种方法是告诉您的路径变量映射使用正则表达式 {pathvariable:.+}。

 `````
@Requestmapping("/somepath/{varwithextention:.+}")
    public String method(@Pathvariable String varwithextension) {
    ...
} 
````  `编辑：我看到你甚至不使用路径变量。不过，对于最后一个 url 部分，它可能仍然具有相同的效果吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T21:37:26.317

嗨，终于找到了适合我的东西，请注意我的应用程序不需要支持真正的 html（仅限 REST 应用程序），所以这不应该有太多的副作用。在我的 WebMvcConfigurerAdapter 中，我为 html 添加了以下媒体类型。

```
@Override
public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {
    configurer.mediaType("html",MediaType.APPLICATION_JSON);
    configurer.mediaType("html",MediaType.APPLICATION_XML);
    super.configureContentNegotiation(configurer);
} 
```

现在，我将 JSON 或 XML 内容返回到客户端。不再出现 406 错误。``

# c# - 读取非常大的文本文件，我应该合并异步吗？

> ID：15954029
> 
> 赞同：4
> 
> 时间：2013-04-11T16:26:27.403
> 
> 标签：c#, asynchronous, streamreader

我一直面临着制作一种将非常大的文本文件读入程序的方法的挑战，这些文件的范围可以从 2gb 到 100gb。

到目前为止，我们的想法是在该方法中读取 1000 行文本。

目前，使用流式阅读器设置程序，逐行读取文件并处理在该行上找到的必要数据区域。

```
using (StreamReader reader = new StreamReader("FileName"))
{
    string nextline = reader.ReadLine();
    string textline = null;

    while (nextline != null)
    {
        textline = nextline;
        Row rw = new Row();
        var property = from matchID in xmldata
                       from matching in matchID.MyProperty
                       where matchID.ID == textline.Substring(0, 3).TrimEnd()
                       select matching;

        string IDD = textline.Substring(0, 3).TrimEnd();

        foreach (var field in property)
        {
            Field fl = new Field();

            fl.Name = field.name;
            fl.Data = textline.Substring(field.startByte - 1, field.length).TrimEnd();
            fl.Order = order;
            fl.Show = true;

            order++;

            rw.ID = IDD;
            rw.AddField(fl);
        }
        rec.Rows.Add(rw);
        nextline = reader.ReadLine();

        if ((nextline == null) || (NewPack == nextline.Substring(0, 3).TrimEnd()))
        {
            d.ID = IDs.ToString();
            d.Records.Add(rec);
            IDs++;
            DataList.Add(d.ID, d);
            rec = new Record();

            d = new Data();
        }
    }
} 
```

该程序继续进行并填充一个类。（只是决定不发布其余部分）

我知道一旦程序显示一个非常大的文件，就会出现内存异常错误。

所以这是我目前的问题，到目前为止，我一直在谷歌搜索几种方法，很多人只是回答使用流阅读器和 reader.readtoend，我知道 readtoend 对我不起作用，因为我会得到那些内存错误。

最后，我一直在研究 async 作为一种创建方法的方法，该方法将读取一定数量的行并在处理下一行之前等待调用。

这给我带来了我的问题，我正在努力理解异步，我似乎找不到任何可以帮助我学习的材料，并希望这里有人可以帮助我理解异步。

当然，如果有人知道解决这个问题的更好方法，我会全力以赴。

**编辑**添加了代码的其余部分以结束任何混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T08:48:45.617

您的问题不是同步 v 的异步，而是您正在读取整个文件并将部分文件**存储在内存中，然后再***对*这些数据进行操作。

如果您正在读取每一行，处理它并将结果写入另一个文件/数据库，那么`StreamReader`将让您处理多 GB（或 TB）文件。

如果您在完成阅读之前存储文件的一部分，那么只有一个问题，然后您可能会遇到内存问题（但您会惊讶于在内存不足之前您可以让`Lists`&`Dictionaries`获得多大）

您需要做的是尽快保存处理后的数据，而不是将其保存在内存中（或尽可能少地保存在内存中）。

对于这么大的文件，您可能需要将您的工作集（您的处理数据）保存在数据库中 - 可能像 SqlExpress 或 SqlLite 之类的东西会这样做（但同样，这取决于您的工作集有多大）。

希望这会有所帮助，请随时在评论中提出更多问题，或编辑您的原始问题，如果我能以任何方式提供帮助，我会更新此答案。

**更新 - 分页/分块**

您需要一页一页地阅读文本文件，并允许用户滚动文件中的“页面”。当用户滚动时，您会阅读下一页并将其呈现给他们。

现在，您可以做一些事情来帮助自己，始终在内存中保留大约 10 页，这可以让您的应用在用户快速向上/向下翻几页时做出响应。在应用程序空闲时间（Application Idle 事件）中，您可以在接下来的几页中阅读，再次丢弃当前页面之前或之后超过五页的页面。

向后分页是一个问题，因为您不知道文件中每一行的开始或结束位置，因此您不知道每一页的开始或结束位置。因此，对于向后分页，当您向下阅读文件时，保留每个页面开头的偏移量列表 ( `Stream.Pos`)，然后您可以快速`Seek`到给定位置并从那里读取页面。

如果您需要允许用户搜索文件，那么您几乎可以逐行阅读文件（记住页面偏移量）以查找文本，然后当您找到某些内容时，读入并显示它们那个页面。

您可以通过将文件预处理到数据库中来加速一切，有网格控件可以处理动态数据集（它们将为您进行分页），并且您可以从内置搜索/过滤器中受益。

因此，*从某种角度*来看，这是*异步*读取文件，但这是从用户的角度来看。但是从技术的角度来看，当我们谈论在编程时做一些异步的事情时，我们往往意味着别的东西。

# ios - 纬度/经度属性是否应该出现在“Person”类中？

> ID：15954032
> 
> 赞同：0
> 
> 时间：2013-04-11T16:26:40.487
> 
> 标签：ios, objective-c, properties, interface

我对 Objective-C 编程相当陌生。我正在创建一个专门在 iPad 上使用的 iOS 应用程序，它将使用 MapView 来显示人员（可能是要访问的“目标”）。

我正在设计我的课程，并想知道某些属性应该放在哪里。我的“目标”类中是否应该有 CLLocationCoordinate2D 和 2 个 CLLocationDegrees 属性（纬度/经度）？或者这些属性应该去其他地方吗？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:19:41.880

你应该对你的类进行子类化，然后你可以覆盖属性。

在你那个类中，你也可以添加新的属性，也可以使用现有的。

# php - 如何查找两个字符是否在数组php中

> ID：15954038
> 
> 赞同：0
> 
> 时间：2013-04-11T16:26:55.407
> 
> 标签：php, substr, strpos

我希望开发一种搜索功能，允许用户只搜索商品，或使用括号中的价格范围修改搜索。也就是说，如果他们正在寻找汽车，那么他们可以输入任一汽车并接收数据库中的所有汽车，或者他们可以输入汽车 (100, 299) 或汽车 (100, 299) 并仅接收数据库中的汽车价格范围在 100 到 299 之间。

在我之前做的是三个不同的爆炸函数调用，但这很麻烦而且看起来丑得可笑。我还尝试将括号放在一个数组中，然后将其与搜索的单词进行比较（一个单词基本上是一个字符数组），但这不起作用。最后，我一直在阅读 strpos 和 substr 但它们似乎不符合要求，因为 strpos 返回字符的第一次出现，而 substr 在特定出现后返回指定长度内的字符。

因此，例如 strpos 的问题是用户可以只输入（而不是）括号，我将调用我的搜索功能，谁知道呢。例如， substr 的问题是价格范围可能变化很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:32:39.700

您可以使用 preg_match 解析搜索字符串 - 我假设这是您遇到问题的部分。

```
if (preg_match('/car ?\(([^,]+), ?([^\)]+)\)/', $search_text, $matches)) {
    $low_price = $matches[1];
    $high_price = $matches[2];

    //do your price filtering here
} 
```

正则表达式可能需要稍微调整一下，如果括号需要在字符类中转义，我不记得了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:38:03.653

是的，山姆是对的。您应该使用正则表达式来执行此操作。

在文档中查找[preg_match()](http://php.net/manual/en/function.preg-match.php)

为了完成他的回答，您的案例的正则表达式是：

```
$regex = "^([a-zA-Z]+)\s\(([0-9]+),([0-9]+)\)$"

if (preg_match($regex, $search_text, $matches)) {
    $type = $matches[0];
    $low_price = $matches[1];
    $high_price = $matches[2];

    //do your price filtering here
} 
```

小心，因为包含匹配项的数组从索引 0 开始，而不是从 1 开始。

# git - Git 子模块自动推送

> ID：15954042
> 
> 赞同：0
> 
> 时间：2013-04-11T16:27:12.633
> 
> 标签：git, cocoapods

在详细介绍之前，让我解释一下我的（可能不正确的）思考过程。

我们有一个非常大的存储库，其中包含许多开发人员定期处理的未编译库。`Published`我们有一个脚本来构建所有这些库，这些库输出到文件夹名称`Published`中

```
sh BuildLibraries.sh`
git add . //add modified (the new libraries) 
git commit -m "Rebuilt Libraries"
git push 
```

但这不适用于子模块，因为它们是它们自己的存储库。也许子模块不是我想要的，我还能做什么？我可以用子模块干净地完成这项工作吗？

我首先希望将这些放在单独的仓库中的原因是我们在 iOS 项目中使用[cocoapods](http://cocoapods.org/)来使用这些库作为依赖项，但是使用主仓库需要登录 cocoapods 以“预下载”仓库。我们尝试过使用孤立分支，但它仍然首先下载整个 repo。我会标记 cocoapods 以防万一，其他人有这个问题。

感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:47:13.987

您所要做的就是 cd 进入 repo，这就是一个子模块。

# asp.net-mvc-4 - XHTTP 不允许 Accept 标头指定 JSON？

> ID：15954043
> 
> 赞同：0
> 
> 时间：2013-04-11T16:27:14.247
> 
> 标签：asp.net-mvc-4, asp.net-web-api, wxhttp, x-http-method-override

我正在托管一个 mvc4 REST web api，并且我有一个使用 XHTTP 的特定客户端（请不要问为什么）。然而，事实证明 XHTTP 正在剥离“Accept”标头，并且客户端正在尝试将请求指定为 json。不幸的是，我们没有将“Accept”标头指定为 json，而是返回我们默认的 javascript 格式。

我正在考虑一种潜在的解决方法，而他们可以在查询字符串中指定 &Accept=JSON 但想知道是否有人知道有关 XHTTP 的任何信息，或者如何在 XHTTP 端和我的 REST api 端解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:57:04.003

`application/json`您可以创建一个 HttpMessageHandler，如果没有提供，则自动将 Accept 标头设置为。

# json - Jackson JSON 反序列化包装的属性（丢弃信封）

> ID：15954044
> 
> 赞同：1
> 
> 时间：2013-04-11T16:27:14.343
> 
> 标签：json, jackson, deserialization

我有以下 JSON 结构

```
{
  "hits" : {
    "hits" : [
      {
        "_source" : {
           "title" : "My Title",
           "description" : "My Description"
        }
      }
    ]
  }
} 
```

这是我在索引中搜索一本书时从 Elastic Search 返回的内容。

一本书被定义为一个java类型：

```
class Book {
    private String title;
    private String description;

    //...Getters and setters
} 
```

所以在 json 中，_source 实际上是 Book。我想将结构反序列化为一本书，我想使用某种 JsonDeserializer 的实现。我尝试了很多不同的方法都没有成功，并且在网上找不到任何关于这个主题的像样的文档，我所能想到的是我可能需要实现 ResolvableDeserializer 但不知道如何实现它的 resolve 方法，甚至不知道是什么！有没有人对执行此操作的最佳方法或解释链接有任何想法？

干杯 NFV

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-11T16:57:35.150

你不需要特别`JsonDeserializer`的。您的类是一个简单的 java bean，Jackson 可以自动处理这些。查看[jackson-databind](https://github.com/FasterXML/jackson-databind)项目的文档。

# visual-studio-2010 - .dll 参考、SSIS 包和类库项目

> ID：15954048
> 
> 赞同：0
> 
> 时间：2013-04-11T16:27:16.323
> 
> 标签：visual-studio-2010, ssis

我有一个 Visual Studion 解决方案，其中包含不同的 SSIS 包以及自定义组件的类库项目。类库项目具有将 .dll 文件复制到 GAC 和 PipelineComponent(C:\Program Files (x86)\Microsoft SQL Server\110\DTS\PipelineComponents) 的构建后事件。现在，当我打开 Visual Studio 解决方案并尝试第二次构建类库项目时，它给了我一个错误，可能是因为 .dll 文件已被其他 SSIS 包使用的 Visual Studio 锁定。

现在，我如何告诉 Visual Studio 不要锁定 .dll 文件？我试图卸载 SSIS 包，但没有用。

请注意，我希望我的类库项目和 SSIS 包在一个解决方案中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:37:30.680

你有一个解决方案。您的解决方案包含 2 个项目：一个是 .NET 类库项目，另一个是 SSIS 项目。

您遇到的问题是您无法覆盖 Pipeline Components 文件夹中的 dll，因为 SSIS 项目正在使用它。我在开发自定义组件时遇到了同样的问题。我不记得是 SSIS 工具箱将锁放在文件上还是实际使用锁定它的组件的包。我也不记得我的最终决定是什么，但我尝试了很多方法。

## 我的决心

从您的解决方案中排除 SSIS 项目。您可以通过将其从解决方案中删除来永久执行此操作，也可以通过在构建阶段临时卸载项目来执行此操作。最终，我走这条路并创建了一个单独的解决方案，其中包含 SSIS 项目。这允许我在需要重新部署 DLL 时在其他 VS 实例中卸载项目。它还使我能够在 SSIS 项目中放置断点，这使我能够附加 .NET 的 VS 调试器，然后调试到我的自定义组件中。也许自 2005 年以来他们已经修复了这个问题，但那时，您被困在使用 2 个 VS 实例来调试您的包中。

# javascript - 请求访问的帧具有“https”协议，被访问的帧具有“http”协议，用于 Linkedin

> ID：15954053
> 
> 赞同：3
> 
> 时间：2013-04-11T16:27:37.847
> 
> 标签：javascript, linkedin

我正在尝试使用 Linkedin 的连接 API。当我使用 make 调用时，它返回一个错误：

```
Unsafe JavaScript attempt to access frame with URL http://www.*example*.com/ from frame with URL https://api.linkedin.com/uas/js/xdrpc.html?v=0.0.2000-RC1.26335-1404#www.*example*.com&xdm_c=default4901&xdm_p=1&mode=cors. The frame requesting access has a protocol of 'https', the frame being accessed has a protocol of 'http'. Protocols must match. 
```

有谁知道为什么会发生这个错误？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:39:18.383

它与 http / https 位无关。

添加“&callback=?” 到你正在调用的 URL，它会做一些魔法！

像这样！

```
var url = "https://api.instagram.com/v1/users/" + id + "?access_token=" + instagramtoken +  + "&callback=?" 
```

在 stackoverlfow 的某个地方看到了这个解决方案，但不记得在哪里。它解决了我的问题！

hth

# c# - 反序列化到新版本

> ID：15954054
> 
> 赞同：0
> 
> 时间：2013-04-11T16:27:38.097
> 
> 标签：c#, .net, serialization, versioning, versions

我有一个从类序列化的二进制文件。该课程已更新。

现在我需要将旧文件反序列化为新类。

我无法访问旧代码，但我可以访问旧类。

该类是使用 BinaryFormatter 序列化的。

有没有办法做到这一点？

如果没有，也许有办法反序列化并只保存两个版本中出现的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:33:55.360

如果您有旧程序集，则可以通过以下方式轻松升级：

*   反序列化为旧类类型的对象
*   编写一个映射器，将旧数据字段映射到新类中的字段
*   序列化新类的对象

在映射器中，您可以转换旧数据、添加新数据等。

# vbscript - vbscript延迟5秒

> ID：15954055
> 
> 赞同：0
> 
> 时间：2013-04-11T16:27:39.440
> 
> 标签：vbscript

我有两个 VBScript。ScriptA 使用以下命令调用 ScriptB

```
C:\Windows\System32\wscript.exe"" //Nologo //B ""C:\Program Files\ROC\ScriptB.vbs 
```

从 ScriptA 日志文件中，我可以看到每次运行时启动 ScriptB 都会有 5 秒的延迟。这两个脚本都在 Windows XP 上运行。

这是默认行为吗？我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:07:25.593

Windows XP 不会对第二个脚本的开始添加延迟。如果系统负载非常重，可能会出现延迟，但仅使用 vbscript 则值得怀疑。

确定延迟来自何处的最佳方法是搜索 scriptA 并查看是否可以找到`Sleep`正在使用的任何方法。`Sleep`接受一个参数，告诉它暂停那么多毫秒，所以如果你`Sleep(5000)`在代码中的某个地方有一个语句，你会暂停 5 秒。

如果 sleep 没有被调用，那么很可能 scriptA 只是完成了一些在 scriptB 启动之前没有注销到日志文件的代码。如果要确定延迟的确切点，请从 scriptA 中调用 scriptB 的点开始，并添加两个日志语句，将时间打印到日志文件中。将第一个日志语句从调用 scriptB 的位置缓慢向上移动，您将能够确定在 scriptB 启动之前需要 5 秒来处理哪些代码。

# linux - 将 qtmotifextension 与 QT5 一起使用

> ID：15954059
> 
> 赞同：1
> 
> 时间：2013-04-11T16:27:43.507
> 
> 标签：linux, qt, x11, qt5, motif

目前我正在使用`qtmotifextension`将 QT 世界与 X11 Linux 站上的旧 Motif UI 连接起来。

我正在尝试向 QT5 更新，但`X11processEvent`from`QApplication`已被删除。是否有来自旧 qt 解决方案的更新 qtmotifextension 可用，或者有什么方法可以`X11processEvent`从 QT5 获得？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:33:50.420

似乎不再维护 qtmotifextension ......你必须坚持 QT4 或重新实现这个扩展......

# html - 将 enctype="multipart/form-data" 放入每个表单标签中是不是很糟糕

> ID：15954060
> 
> 赞同：3
> 
> 时间：2013-04-11T16:27:44.857
> 
> 标签：html, forms, enctype

我正在构建一个小型库来帮助我创建表单，并且我正在搜索有关 enctype 标记的信息。

是否可以在每个表单中包含某些内容或仅在必要时才应使用的内容（即用于上传表单）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-28T17:27:40.007

`multipart/form-data`会产生更多的流量，因为它会同时创建二进制和 ASCII 上传。

更多的流量意味着服务器的响应速度较慢。微不足道的慢。

现在这只是一个问题，你介意吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T08:10:37.850

仅当 method="post" 时才能使用 enctype 属性。

# php - PHP中的sprintf对象数组

> ID：15954063
> 
> 赞同：0
> 
> 时间：2013-04-11T16:27:57.500
> 
> 标签：php, foreach

和

```
$maids = getMaids(); 
```

我`$maids`将成为一组 PHP 对象，每个对象都具有相同的结构。有什么方法可以只用两行代码冲刺这些对象内部的值吗？

```
foreach($maids as &$maid)
    sprintf($form, $maid->name, $maid->pbx, $maid->id); 
```

为什么上面的代码什么也没输出？控制台中甚至没有错误。

我想保持我的代码尽可能干净，并使用 3 行只是将对象的内容分配给一个变量，然后`echo()`只有那个变量太长。为什么我的快捷方式不起作用？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:29:41.260

`sprintf`不输出任何内容，它返回一个字符串，然后您可以将`echo`其输出；或尝试 printf() 代替

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:30:15.873

使用[`printf()`](http://www.php.net/manual/en/function.printf.php)而不是[`sprintf()`](http://www.php.net/manual/en/function.sprintf.php).

`printf()`将其结果输出到标准输出，同时`sprintf()`将结果作为字符串返回，这在某些情况下也很有用

# javascript - 单击另一个 img/button 后删除 onclick 效果

> ID：15954064
> 
> 赞同：0
> 
> 时间：2013-04-11T16:27:57.607
> 
> 标签：javascript, onclick

我正在我的客户网站上制作一个小图像区域，其中我在大图像下有一些按钮。单击底部按钮时，大图像会发生变化。现在我需要的是使所选按钮的效果。这意味着主动效果。我可以使用 onclick 功能做到这一点，但即使我点击其他按钮，它也会保持不变。

所以，基本上我需要的是如果你能告诉我一种方法，以便我可以在单击另一个图像/按钮时从图像/按钮 1 中删除 onclick 效果。

你可以在这里看到页面：http: [//goo.gl/S1oVS](http://goo.gl/S1oVS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:39:12.613

使用 $('.class-selector').off('click'); 在所有具有类“类选择器”（或您可能拥有的任何选择器）的元素上取消绑定单击事件。

您也可以在执行点击事件时执行此操作，如下所示：

```
$('.button').on('click', function() {
  // Do something here...

  // Disable on click for this particular button, instead of all buttons.
  $(this).off('click');
}); 
```

# expression - 使用 Javacc 解析抽象语法树中的嵌套括号

> ID：15954065
> 
> 赞同：1
> 
> 时间：2013-04-11T16:27:59.893
> 
> 标签：expression, grammar, abstract-syntax-tree, javacc

我正在尝试解析表达式，例如`a*(4+5)`在我的解析器中构建抽象语法树。

```
void addSub() : {}
{
    mulDiv() ((<ADD> mulDiv()  )| (<SUB> mulDiv() ) )*
}
void mulDiv()  : {}
{
    factor() ((<MUL> factor() )|( <DIV> factor() ))*
}
void factor() : {}
{
     (numeralLit() | booleanLit() | LOOKAHEAD(2) functionCallExp() | idUse())
     //TODO add () support
} 
```

但是，如果我添加一个表达式，例如

```
void parantheses() :{}
{
<LPAR>
addSub()
<RPAR>
} 
```

并将其放入`factor()`，我收到一个错误，指出发生了递归（括号使用 addSub()）。我将如何处理该结构以防止递归？

# jquery - 语法错误，解析 tr 元素时无法识别的表达式

> ID：15954067
> 
> 赞同：1
> 
> 时间：2013-04-11T16:28:06.823
> 
> 标签：jquery, asp.net-mvc

我`$.post()`在 jQuery 中做一个并收到一个`<tr>`类似于这样的响应元素：

```
<tr class="editable" id="527a84eb-b430-4a33-9079-a19d00ca373c">
    <td class="date">2013-04-05
    </td>
    <td class="amountType">Credit
    </td>
    <td class="amount">$5.00
    </td>
    <td class="category">Meals
    </td>
    <td class="notes"></td>
    <td data-expense-report-line-item-id="527a84eb-b430-4a33-9079-a19d00ca373c" class="actionItems">
        <button class="deleteLineItem">Delete</button>
        <button class="editLineItem">Edit</button>
    </td>
</tr> 
```

我打算用这个函数在我的表中注入这一行：

```
$.post('@Url.Content("~/ExpenseReports/SaveLineItem")', {
    Date: date,
    Amount: amount,
    AmountType: amountType,
    ExpenseCategoryId: category,
    Notes: notes,
    ExpenseReportId: expenseReportId,
    ExpenseReportLineItemId: expenseReportLineItemId
}, function (data) {
    if ($('table tbody').length > 1) {
        $('table tbody tr:last').slideUp(200, function () {
            $(data).insertAfter('table tbody tr:first').slideDown();
        });
    } else {
        alert(data);
        $(data).appendTo($('table tbody'));
    }
    row.find('td.date:first input.date').val('');
    row.find('td.amount:first input.amount').val('');
    row.find('td.amountType:first select.amountType').val('Debit');
    row.find('td.category:first select.category').val('');
    row.find('td.notes:first input.notes').val('');
}, 'html'); 
```

`tbody`这里的目的是在元素的第一行之后插入这一行。但是，当我尝试这个时，我得到一个 javascript 错误：

```
Uncaught Error: Syntax error, unrecognized expression: <tr class="editable" id="527a84eb-b430-4a33-9079-a19d00ca373c">
        <td class="date">
            2013-04-05
        </td>
        <td class="amountType">
            Credit
        </td>
        <td class="amount">
            $5.00
        </td>
        <td class="category">
            Meals
        </td>
        <td class="notes">

        </td>
        <td data-expense-report-line-item-id="527a84eb-b430-4a33-9079-a19d00ca373c" class="actionItems">
            <button class="deleteLineItem">Delete</button>
            <button class="editLineItem">Edit</button>
        </td>
    </tr> 
```

在我看来，这应该可以被 jQuery 解析。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T17:04:41.600

问题是因为 jQuery 1.9，使用 1.10.2 它工作得很好

# c++ - 内存分配/释放错误（极小的代码）

> ID：15954070
> 
> 赞同：2
> 
> 时间：2013-04-11T16:28:19.663
> 
> 标签：c++, c, winapi, memory-management, malloc

在运行最后列出的代码时，我在最后一行得到了一个休息，`FREE(pTcpTable);`如果我继续这个错误就会出现：

“netMon.exe 中 0x7737096E (ntdll.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000009。”

crt0dat.c 打开并显示此代码：

```
void __cdecl __crtExitProcess (
        int status
        )
{
        __crtCorExitProcess(status);

        /*
         * Either mscoree.dll isn't loaded,
         * or CorExitProcess isn't exported from mscoree.dll,
         * or CorExitProcess returned (should never happen).
         * Just call ExitProcess.
         */

        ExitProcess(status);
} 
```

这是代码：

```
#include <iostream>
#include <WinSock2.h>
#include <IPHlpApi.h>
#include <Ws2tcpip.h>

using namespace std;

#pragma comment(lib, "iphlpapi.lib")
#pragma comment(lib, "ws2_32.lib")

#define MALLOC(x) HeapAlloc(GetProcessHeap(), 0, (x))
#define FREE(x) HeapFree(GetProcessHeap(), 0, (x))

int __cdecl main()
{
    PMIB_TCPTABLE_OWNER_PID pTcpTable;
    DWORD tcpTableSize = 0;

    char szLocalAddr[128];

    struct in_addr IpAddr;

    pTcpTable = (PMIB_TCPTABLE_OWNER_PID)MALLOC(sizeof(MIB_TCPTABLE_OWNER_PID));

    if(pTcpTable == NULL)
        return 1;

    tcpTableSize = sizeof(MIB_TCPTABLE_OWNER_PID);

    if(GetExtendedTcpTable(pTcpTable, &tcpTableSize, FALSE, AF_INET, TCP_TABLE_OWNER_PID_CONNECTIONS, 0) == ERROR_INSUFFICIENT_BUFFER)
    {
        FREE(pTcpTable);

        pTcpTable = (PMIB_TCPTABLE_OWNER_PID)MALLOC(sizeof(tcpTableSize));

        if(pTcpTable == NULL)
            return 1;
    }

    if(GetExtendedTcpTable(pTcpTable, &tcpTableSize, FALSE, AF_INET, TCP_TABLE_OWNER_PID_CONNECTIONS, 0) == NO_ERROR)
    {
        for(DWORD i = 0; i < pTcpTable->dwNumEntries; i++)
        {
            IpAddr.S_un.S_addr = (u_long)pTcpTable->table[i].dwRemoteAddr;

            InetNtop(AF_INET, &IpAddr, szLocalAddr, 128);
        }
    }

    if(pTcpTable != NULL)
        FREE(pTcpTable);

    return 0;
} 
```

我无法弄清楚这里出了什么问题，它的内存分配和释放很简单，请在这里帮助我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:35:07.330

我很确定你不想要这个：

```
 pTcpTable = (PMIB_TCPTABLE_OWNER_PID)MALLOC(sizeof(tcpTableSize)); 
```

但反而

```
 pTcpTable = (PMIB_TCPTABLE_OWNER_PID)MALLOC(tcpTableSize);
    //                                          ^^^^^ sizeof removed. 
```

它几乎肯定会崩溃，因为您覆盖了操作系统在退出时清理堆所必需的其他内容，这就是您遇到访问地址崩溃的原因`9`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:43:04.980

问题就在这里

```
pTcpTable = (PMIB_TCPTABLE_OWNER_PID)MALLOC(**sizeof**(tcpTableSize)); 
```

您需要分配 tcpTableSize 字节，而不是 sizeof(DWORD)

# ios - UITableView dataSource 必须从 tableView 返回一个单元格：cellForRowAtIndexPath

> ID：15954074
> 
> 赞同：4
> 
> 时间：2013-04-11T16:28:25.900
> 
> 标签：ios, objective-c, xcode, uitableview

我已经设置了`UIViewController`一个表格视图并添加了单元格。委托和数据源链接到表视图。但是我收到了这个错误，我很困惑为什么。当我将它与 a 一起使用`UITableViewController`但不与 a一起使用时，该代码有效`UIViewcontroller`。想要使用 a 的原因`UIViewController`是导航栏在使用 a 时会随着表格滚动，`UITableViewController`我被建议在这里使用 a`UIViewController`并添加表格视图。

```
#import "ObViewControllerObservationsTable.h"
#import "ObAppDelegate.h"
#import "Observations.h"
#import "ObViewControllerTableDetail.h"
#import "ObViewControllerMainMenu.h"

@interface ObViewControllerObservationsTable ()

@property (nonatomic, strong) NSArray *teacherNames;
@property (nonatomic, readonly) NSManagedObjectContext *managedObjectContext;
@property (weak, nonatomic) IBOutlet UIBarButtonItem *detailsButton;
@end

@implementation ObViewControllerObservationsTable

- (void)viewDidLoad
{
[super viewDidLoad];
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Observations"];
fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"obsTeacherName" ascending:YES]];
NSError *error = nil;
self.teacherNames = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
[self.tableView reloadData];
}

- (NSManagedObjectContext *) managedObjectContext
{
return [(ObAppDelegate *) [[UIApplication sharedApplication] delegate] managedObjectContext];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return self.teacherNames.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"teacherCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
Observations *currentList = [self.teacherNames objectAtIndex:indexPath.row];
cell.textLabel.text = currentList.obsID;
return cell;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
[self.managedObjectContext deleteObject:[self.teacherNames objectAtIndex:indexPath.row]];
    [self.managedObjectContext save:nil];

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Observations"];
    fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"obsTeacherName" ascending:YES]];
    NSError *error = nil;
    self.teacherNames = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
    if (self.teacherNames.count == 0)
    {
        self.detailsButton.enabled = NO;
    }
    else
    {
        self.detailsButton.enabled = YES;
    }
    [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
}
else if (editingStyle == UITableViewCellEditingStyleInsert) {
}
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
obsID = [[self.teacherNames objectAtIndex:indexPath.row] obsID];
self.detailsButton.enabled = YES;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T21:05:49.640

`dequeueReusableCellWithIdentifier:``nil`如果可重用单元队列中不存在可重用对象，则返回。（参见[UITableView 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)）。

应该是这样的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"teacherCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        // More initializations if needed.
    }
    Observations *currentList = [self.teacherNames objectAtIndex:indexPath.row];
    cell.textLabel.text = currentList.obsID;
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:39:08.927

我认为问题在于 dequeueReusableCellWithIdentifier 方法。我在视图控制器而不是 UITableViewController 中尝试了一个带有 tableView 的快速示例项目，并遇到了您描述的错误。当我使用手动生成单元格时

`[UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"testCell"];`

它工作得很好。

# ios - 停止在屏幕上拖动 UIView

> ID：15954076
> 
> 赞同：1
> 
> 时间：2013-04-11T16:28:36.250
> 
> 标签：ios, objective-c, uiview, uiviewcontroller, phonegap-plugins

我们正在将第三方优惠墙集成到我们的 iOS phonegap 应用程序中。

当我们展示 offerwall 时，它会被添加到标准 phonegap viewcontroller 并显示在我们的 webview 顶部。

它的问题是人们可以将视图拖到整个地方，而不是仅仅在原地上下滚动。效果如下图所示：

![视图被拖出屏幕](https://i.stack.imgur.com/noLMg.png)

我们想要实现的是能够锚定这个视图，这样它就不能在应用程序周围拖动，只能垂直滚动。

在集成代码中，我们可以访问优惠墙的 UIView 和主应用程序的 ViewController。

offerwall 是作为库提供的，因此我无法访问它的任何代码，只能处理返回的 UIView 和我将其添加到的 UIViewController。其他应用程序已经设法在没有水平滚动的情况下实现视图

我们正在寻找适用于 UIView 或 ViewController 的代码来防止这种情况发生。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:47:05.273

offerwall 视图可能包含一个`UIScrollView`保存实际内容的视图。您可以尝试遍历所有子视图并在它找到的第一个滚动视图上关闭滚动：

```
 for (UIView *view in offerwall.subviews) {
        if ([view isKindOfClass:[UIScrollView class]]) {
            UIScrollView *scrollView = (UIScrollView*)view;

            scrollView.scrollEnabled = NO;
            return;
        }
    } 
```

这绝对是 hacky，但如果您无法从他们的代码中访问任何其他内容，这可能是您唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:44:41.850

In the end the solution was quite simple. Turns out the offerwall was a UIWebView and in testing mode the offerwall page was rendering some elements that were overflowing the page hence the horizontal scrolling. In production mode the problem goes away

# magento - Magento 以编程方式获得折扣，提供优惠券代码和产品

> ID：15954078
> 
> 赞同：0
> 
> 时间：2013-04-11T16:28:50.063
> 
> 标签：magento, coupon

我正在尝试将系统与 Magento 集成，我想要一种将优惠券代码、当前用户和购物车发送到 Magento 并检索相应折扣（如果适用）的方法，因此我不必复制背后的所有逻辑优惠券验证。

我真的很感激。

我设法做到了以下几点。

```
 $customerId = 1;
    $couponCode = "TESTCOUPON";
    $json = "{
                \"cart\":[{
                    \"listProduct\":[{
                        \"idReferenceProduct\":15,
                        \"quantity\":1
                    }]
                }]
            }";
    $jsonDecoded = json_decode($json);
    $products = $jsonDecoded->cart[0]->listProduct;

    // *********************************************************

    $customerObj = Mage::getModel('customer/customer')->load($customerId);
    $storeId = $customerObj->getStoreId();
    $quoteObj = Mage::getModel('sales/quote')->assignCustomer($customerObj);
    $storeObj = $quoteObj->getStore()->load($storeId);
    $quoteObj->setStore($storeObj); 

    foreach ($products as $singleProduct) {

        $productObj =  Mage::getModel('catalog/product');
        $productObj->load($singleProduct->idReferenceProduct);
        echo $productObj->getName();
        echo $productObj->getPrice();

        try{
            $quoteItem = $quoteObj->addProduct($productObj);
            $quoteItem->setPrice($productObj->getPrice());
            $quoteItem->setQty($singleProduct->quantity);
            $quoteItem->setQuote($quoteObj);                                    
            $quoteObj->addItem($quoteItem);

        } catch (exception $e) {
            echo "error creating quote item ";
        }

        $singleProduct->quantity);
    }

    try{
        $quoteObj->setCouponCode($couponCode); 
    }
    catch(exception $e){
        return "error setting coupon";
    }

    $quoteObj->collectTotals();

    var_dump($quoteObj->toArray()); 
```

和输出：

```
{
["customer_id"] = > "1" 
["customer_prefix"] = > NULL
["customer_firstname"] = > "xxxxxx" 
["customer_middlename"] = > NULL
["customer_lastname"] = > "xxxxxxx" 
["customer_suffix"] = > NULL
["customer_email"] = > "xxxxxxxxxx@gmail.com" 
["customer_dob"] = > "1981-03-06 00:00:00" 
["customer_taxvat"] = > NULL
["customer_gender"] = > "1" 
["customer_group_id"] = > "1" 
["customer_tax_class_id"] = > "3" 
["store_id"] = > "1" 
["coupon_code"] = > "TESTCOUPON"
["subtotal"] = > float(872.06)
["base_subtotal"] = > float(872.06)
["subtotal_with_discount"] = > float(830.92)
["base_subtotal_with_discount"] = > float(830.92)
["grand_total"] = > float(929.64)
["base_grand_total"] = > float(929.64)
["applied_rule_ids"] = > "1" 
["virtual_items_qty"] = > int(0)
["taxes_for_items"] = > {
    [""] = > {
        [0] = > {
            ["rates"] = > {
                [0] = > {
                    ["code"] = > "IVA" 
                    ["title"] = > "IVA" 
                    ["percent"] = > float(12)
                    ["position"] = > "1" 
                    ["priority"] = > "1" 
                    ["rule_id"] = > "1"
                }
            }["percent"] = > float(12)
            ["id"] = > "IVA"
        }
    }
}["items_count"] = > int(2)
["items_qty"] = > float(2)
["trigger_recollect"] = > int(0)
["can_apply_msrp"] = > bool(false)
["totals_collected_flag"] = > bool(true)
} 
```

优惠券折扣应该是 5% 的折扣。

由于某种原因，价格不正确。该产品价格为 516.00，输出状态中的小计为 872.06。也只有一项，输出状态为 2 项。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:38:56.907

愚蠢的我，似乎我以错误的方式将产品添加到报价单中。这是它现在的工作方式：

```
 $quoteItem = Mage::getModel('sales/quote_item');
        $quoteItem->setProduct($productObj);
        $quoteItem->setPrice($productObj->getPrice());
        $quoteItem->setQty($singleProduct->quantity);
        $quoteItem->setQuote($quoteObj);                                    
        $quoteObj->addItem($quoteItem); 
```

# c# - 在 Azure (ACS) 中向 MobileServices 添加角色

> ID：15954079
> 
> 赞同：0
> 
> 时间：2013-04-11T16:28:51.130
> 
> 标签：c#, .net, authentication, azure, role-base-authorization

我正在尝试了解如何在 ACS 中执行角色。我有一个 Windows 应用商店*应用程序*（*不是*网站 :-)，我需要*管理员*和*成员*角色 - 但即使是非常基本的文档或教程也对我来说非常困难。

我所发现的只是一堆对 ASP.NET 或 Azure 网站的东西的引用——我不能使用，因为商店应用程序不是网站——并且不使用 ASP.NET。

我有适用于我的 Windows Store 应用程序的 Azure 移动服务。有没有你知道的可以提供帮助的信息？

我很惊讶 Azure 网站上任何地方的示例/参考/教程部分似乎都没有涵盖角色（除非我错过了它 - 好几次）。

以这种情况为例。在这里，在管理门户的脚本选项卡中，我将一些文本插入到与当前登录用户关联的表中（通过`insert`函数）：

```
var SendGrid = require('sendgrid').SendGrid;

function insert(item, user, request) {
        item.userId = user.userId;
        request.execute(
            {
                success: function() {
                    request.respond();

                    // Send email in the background.
                    sendEmail(item);
                }
            }
        );
} 
```

上面的代码在表格中插入了一些文本，然后向该用户发送了一封电子邮件。但是，我该如何调整这段代码，以便它（伪代码）：

```
if item.text == "administrator"
   then insert userid into admin column
else
   then insert userid into member column 
```

任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:41:00.830

这不是一个真正的答案，但评论也太长了，我认为这真的很重要。

首先，当使用来自[Windows Azure 移动服务](http://www.windowsazure.com/en-us/home/scenarios/mobile-services/)的身份验证时，您**没有使用** [Windows Azure 访问控制服务](http://www.windowsazure.com/en-us/home/features/identity/)。因此，没有 Active Directory，在使用移动服务时没有（附加）声明。这一定很清楚，因为我看到不断的误解和困惑。@Joey 仍然要求并将 ACS 作为他的应用程序的联合提供者，如果他依赖移动服务身份验证机制，**则情况并非如此。**

因此，角色分配必须完全由您的应用程序逻辑处理，并使用 Jim 描述的附加表。

然而，角色分配通常是一个有趣的话题，实际上不属于任何教程或文档。它不是其中的一部分，因为角色分配是应用程序本身业务逻辑的一部分，而不是身份验证服务的一部分。[这里](https://stackoverflow.com/questions/15375253/setting-up-azure-acs-roles)有一个非常相似的问题，但是又没有详细回答如何分配角色。要解决的基础和主要问题是：`How to assign administrator role`. 其他一切，都可以通过为应用程序管理员添加适当的 UI 来解决。不过，这个问题不受简短的 SO 回答的影响。

# c# - 需要自定义 DataGridviewCell

> ID：15954080
> 
> 赞同：0
> 
> 时间：2013-04-11T16:28:53.770
> 
> 标签：c#, winforms, datagridview

我需要一个简单的自定义 DataGridviewCell 来......我无法准确解释我想要什么

假设有一个包含字符串的单元格！我想在显示之前更改（自定义格式）这个字符串！如果单元格更改，则以以前的格式保存在基础数据库中；

类似于网络黑客中的“中间人”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:09:16.387

听起来你想指定一个 StringFormat。您可以使用`dataGridView1.Columns["columnName"].DefaultCellStyle.Format = "your format";`
You can use`FormattedValue`处理显示值和`Value`处理实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:14:37.970

您还可以使用事件 DataBindingComplete 并从那里将自定义格式应用于您想要的任何列

# cakephp - CakePhp saveAssociated deep=true 不工作

> ID：15954081
> 
> 赞同：0
> 
> 时间：2013-04-11T16:28:53.867
> 
> 标签：cakephp

我正在尝试将数组保存为如下所示的数组，其中 saveAssociated 和深度选项设置为 true，但它不保存答案，只保存测验和问题。我正在使用 CakePhp 2.3.1

```
$myarray = array(
    'Quiz' => array(
        'title' => 'Test di Prova copy',
        'description' => '',
        'timer' => '5',
        'days' => '10',
        'tries' => '2',
        'pass_percentage' => '90',
        'active' => true
    ),
    'Question' => array(
        (int) 0 => array(
            'question' => 'Quanti valori può assumere un bit?',
            'score' => '10',
            'position' => '0',
            'created' => '0000-00-00 00:00:00',
            'modified' => '2013-04-10 13:04:50',
            'Answer' => array(
                (int) 0 => array(
                    'answer' => '2',
                    'right' => true
                ),
                (int) 1 => array(
                    'answer' => '4',
                    'right' => false
                ),
                (int) 2 => array(
                    'answer' => '8',
                    'right' => false
                ),
                (int) 3 => array(
                    'answer' => 'non lo sò
',
                    'right' => false
                )
            )
        ),
        (int) 1 => array(
            'question' => 'Quale tra questi tag Html identifica l'header più grande di dimensioni?',
            'score' => '10',
            'position' => '2',
            'created' => '0000-00-00 00:00:00',
            'modified' => '2013-04-10 13:04:50',
            'Answer' => array(
                (int) 0 => array(
                    'answer' => 'H6',
                    'right' => false
                ),
                (int) 1 => array(
                    'answer' => 'H4',
                    'right' => false
                ),
                (int) 2 => array(
                    'answer' => 'H1',
                    'right' => true
                )
            )
        ),
        (int) 2 => array(
            'question' => 'Da quanti bit è composto un byte?',
            'score' => '10',
            'position' => '1',
            'created' => '0000-00-00 00:00:00',
            'modified' => '2013-04-10 13:04:50',
            'Answer' => array(
                (int) 0 => array(
                    'answer' => '2',
                    'right' => false
                ),
                (int) 1 => array(
                    'answer' => '4',
                    'right' => false
                ),
                (int) 2 => array(
                    'answer' => '6',
                    'right' => false
                ),
                (int) 3 => array(
                    'answer' => '8',
                    'right' => true
                )
            )
        )
    )
); 
```

$this->Quiz->saveAssociated($myarray, array('deep'=>true));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:02:46.010

该数据结构可以与 saveAll 一起使用，您尝试过吗？

```
<?php

$this->Model1->saveAll($myarray, array('deep' => true));

?> 
```

saveAll 在内部调用 saveAssociated。

我相信这对你有用。

# sql - 如何让数据库执行索引扫描？

> ID：15954084
> 
> 赞同：1
> 
> 时间：2013-04-11T16:29:02.090
> 
> 标签：sql, indexing, database-scan

我认为简单的问题。我想对表进行索引扫描，但没有这样做。所以我有一个在 ID 列上有一个唯一聚集索引的表，还有另外 2 个列，first_name 和 last_name。以下是我的查询...

```
SELECT FIRST_NAME
FROM TABLE_A
WHERE FIRST_NAME LIKE 'GUY' 
```

我想既然我没有在带有索引的列上搜索它应该这样做。

为什么它不工作，我如何确保每次我想要它都能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T14:04:04.317

由于`first_name`不是任何索引的一部分，因此在数据库中使用索引毫无意义 - 它必须扫描所有索引，访问每个条目的实际表行，并评估`first_name`那里的值。由于无论如何它都在访问表的所有行，优化器只是更喜欢执行全表扫描，并保存（无用的）索引访问。

如果您想使用索引来加快查询速度，您应该创建一个涵盖该列的索引。例如：

```
CREATE INDEX table_a_first_name_ind ON table_a(first_name) 
```

# c++ - c++ 交叉编译应用程序平台

> ID：15954085
> 
> 赞同：0
> 
> 时间：2013-04-11T16:29:02.707
> 
> 标签：c++, cross-compiling

目前，我们正在使用 MS Visual Studio 和 .NET 在 Window 上开发应用程序。我们正在将应用程序移植到其他操作系统（Linux、Android...等），并希望摆脱 MS Visual Studio 和 .NET 的东西（使用它们很痛苦）。

有什么好的开发平台可以推荐吗？

谢谢，

ABS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:37:32.267

我会将 Visual Studio 的解决方案/项目文件移植到[CMake](http://www.cmake.org/)（在[下载列表中](http://www.cmake.org/cmake/resources/software.html)，您可以获得 Windows 和 Linux 的二进制文件），它允许您为不同平台生成项目文件，从而允许*跨工具集*开发。例如：

在 Windows 上，运行 CMake 将检测 Visual Studio 并相应地生成解决方案和项目文件。

在 Linux 上：运行 CMake 会找到例如 gcc 或 g++ 并相应地生成[makefile](http://www.gnu.org/software/make/)。

我还没有尝试过，但是对于 android 的 NDK 有这个：[android-cmake](https://code.google.com/p/android-cmake/)

[**更新**关于`gcc/make`windows的信息]

[如果您想完全放弃 Visual Studio，您可以尝试使用MinGW - Minimalist GNU for Windows](http://www.mingw.org/)为 Windows设置`gcc/make`工具链，并将您的解决方案/项目文件移植到 makefile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T12:22:59.487

至于摆脱 .NET，如果您的 .NET 代码库不是全部托管在 C++ 中，我会先尝试**Mono/Xamarin**和**Xamarin Studio IDE**，然后再着手将 .NET 代码库完整移植到标准化 C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:55:39.387

从 Windows 迁移到其他操作系统一开始可能会让您感到震惊，但随着时间的推移您会习惯它：您本身不需要“平台”或“IDE”。你需要的是 cmake、gcc/g++、一个不错的文本编辑器，也许还有一个调试器前端。或者，您可能会发现 ctags 有用、Doxygen、svn repo 和分析器（例如 Valgrind/KCachegrind）。

我不知道您如何将 .net 的东西移植到 C/C++（除了从头开始重写）。

Linux 和 OSX 有很多相似之处，所以从一个移植到另一个应该没有那么难。Android 是另一回事，尽管 C++ for android 已经成为可能。

最接近您正在寻找的东西可能是 Eclipse 或 Netbeans，但同样，您保留这些东西越简单，恕我直言越好。

# c++ - std::pair - 错误：模板参数的数量错误

> ID：15954086
> 
> 赞同：2
> 
> 时间：2013-04-11T16:29:05.570
> 
> 标签：c++, std-pair

我在下面的代码片段中显示了一个 std::pair 声明，并且 g++ 在第 152 行的编译错误下方发出了“错误：模板参数的数量错误（1，应该是 2）”。我是这个 std::pair 的新手，我想知道我做错了什么。所以提到的行号已在下面的代码片段中标记。谢谢。

```
 std::vector< 
              std::pair<EndPointAddr* requesterServiceAddr, 
                        EndPointAddr*  requestedServiceAddr>* //LINE 152 is HERE
             > mServiceSubscriptionsList; 

  In file included from ServiceRegistrar.hpp:8:0,
                   from ServiceRegistrar.cpp:7:
  ../control_api/ServiceRegistrarAPI.hpp:152:95: error: wrong number of template   arguments (1, should be 2)
  ........
  .......
  ../control_api/ServiceRegistrarAPI.hpp:153:14: error: template argument 1 is invalid
  ../control_api/ServiceRegistrarAPI.hpp:153:14: error: template argument 2 is invalid
  In file included from ../control_api/ServiceRegistrarAPI.cpp:5:0: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:31:53.733

您需要将类型作为模板参数，而不是变量：

```
std::vector< std::pair<EndPointAddr*, EndPointAddr*>* > 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:32:16.690

`std::pair` 只需要声明中的**类型**。

```
std::vector< 
          std::pair<EndPointAddr*, 
                    EndPointAddr* >* //LINE 152 is HERE
         > mServiceSubscriptionsList; 
```

# activemq - 使用 Web 服务将消息放入 ActiveMQ 队列在故障转移时失败

> ID：15954099
> 
> 赞同：0
> 
> 时间：2013-04-11T16:30:00.360
> 
> 标签：activemq, soa, nms

我有两个 activeMQ(5.6.0) 代理。他们使用共享的 kaha 数据库，因此一次只能“运行”一个。

我有一个（asp.net）网络服务，它在本地将消息放入队列，如果我启动和停止代理，网络服务会正确故障转移

当我在单独的机器上使用代理进行测试时，它有时可以工作，但我经常收到“socketException：连接重置”错误并且消息丢失。

我正在使用的连接字符串如下。请注意，我知道 NMS 不理解优先级备份命令，但我将其留在那里以备将来使用。

```
failover:(tcp://MACHINE1:61616,tcp://MACHINE2:62616)?transport.initialReconnectDelay=1000&amp;transport.timeout=10000&amp;randomize=false&amp;priorityBackup=true 
```

我怎样才能让经纪人之间的故障转移万无一失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:57:59.707

共享的 Kaha 数据库在一个简单的共享上。当前，activeMQ（或 windows）无法可靠地获取或释放此配置中的锁。共享数据库必须位于“真实”SAN 上，以便队列软件的两个实例都将数据库视为位于本地文件存储而不是网络位置。

有关更多信息，请参阅此页面[http://activemq.apache.org/shared-file-system-master-slave.html](http://activemq.apache.org/shared-file-system-master-slave.html)

# mysql - 如何选择整行从列中选择最小值或最大值 - MySql

> ID：15954108
> 
> 赞同：1
> 
> 时间：2013-04-11T16:30:30.967
> 
> 标签：mysql, select

我想选择具有唯一“created_by”列的行并选择具有最小“距离”的行。这是我的表格数据：

```
id  title           created_by  last_used           distance
668 Lorem Ipsum 1   981         2012-00-00 00:00:00     12
2   Lorem Ipsum 2   981         2012-00-00 00:00:00     20
710 Lorem Ipsum 3   120         2013-01-01 00:00:00     1
769 Lorem Ipsum 4   981         2012-00-00 00:00:00     4 
```

所以，我想得到以下行：

```
id  title           created_by  last_used           distance
710 Lorem Ipsum 3   120         2013-01-01 00:00:00     1
769 Lorem Ipsum 4   981         2012-00-00 00:00:00     4 
```

如何使用 SELECT 语句实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:14:52.593

我能够在不影响此查询的性能的情况下获得结果（避免 JOINS）：

```
SELECT id, title, created_by, last_used, MIN(distance) 
FROM MyTable GROUP BY created_by; 
```

# jquery - jQuery 用 HTML 字符串更新标签的文本

> ID：15954112
> 
> 赞同：1
> 
> 时间：2013-04-11T16:30:42.383
> 
> 标签：jquery

我有一个简单的 HTML`label`输入。通过使用 ajax 请求，我得到了我想要作为该标签文本放置的 HTML 字符串。为此，我尝试以下代码：

```
$('#my-label').text($("<label class='someClass'>4.00 ABC</label> (13.26 DEF)")); 
```

但什么也没发生。如何应对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:33:35.163

利用`.html()`

```
$('#my-label').html("<label class='someClass'>4.00 ABC</label> (13.26 DEF)"); 
```

虽然我不确定`#my-label`你的情况应该是什么..

编辑：如果它是 PRPGFerret 建议的标签本身的 id，更好的方法是：

```
$('#my-label').text('4.00 ABC').addClass('someClass'); 
```

# asp.net-mvc - 如何在 MVC 应用程序中使用 HTML5 缓存？

> ID：15954118
> 
> 赞同：2
> 
> 时间：2013-04-11T16:31:03.557
> 
> 标签：asp.net-mvc, html, caching

我在尝试做一些应该非常简单的事情时遇到问题（当用户无法访问 Internet 时显示离线页面）。我有一个加载到我的地址的 MVC 应用程序`http://192.168.2.29/MobilePortal/`

我在网站上添加了一个 manifest.cache 文件，内容如下：

```
CACHE MANIFEST
# 11-04-2013

CACHE:
/MobilePortal/

NETWORK:

FALLBACK:
/MobilePortal/ /MobilePortal/offline.html 
```

这背后的想法是在用户无法访问 Internet 时显示一个 offline.html 页面。

在我的应用程序 MasterPage 中，我包括：

```
<html manifest="<%=Url.Content("~/manifest.cache") %>""> 
```

当我通过 Chrome 访问具有 Internet 连接的应用程序时，我通过控制台获得以下信息：

```
Creating Application Cache with manifest http://192.168.2.29/MobilePortal/manifest.cache 192.168.2.29:1
Application Cache Checking event 192.168.2.29:1
Application Cache Downloading event 192.168.2.29:1
Application Cache Progress event (0 of 2) http://192.168.2.29/MobilePortal/offline.html      192.168.2.29:1
Application Cache Progress event (1 of 2) http://192.168.2.29/MobilePortal/ 192.168.2.29:1
Application Cache Progress event (2 of 2)  192.168.2.29:1
Application Cache Cached event 
```

我认为这里一切都很好。

然后我关闭 Internet 连接并访问`http://192.168.2.29/MobilePortal/`URL，但未显示 offline.html 页面。相反，我在 Chrome 控制台上得到了这个：

```
Document was loaded from Application Cache with manifest     http://192.168.2.29/MobilePortal/manifest.cache 192.168.2.29:1
Application Cache Checking event 192.168.2.29:1
Application Cache Error event: Manifest fetch failed (-1) http://192.168.2.29/MobilePortal/manifest.cache 192.168.2.29:1 
```

我是否遗漏了后备规则的某些内容？我尝试将 index.html 文件添加到应用程序并包含以下后备规则：

```
FALLBACK:
/MobilePortal/index.html /MobilePortal/offline.html 
```

当我尝试访问`http://192.168.2.29/MobilePortal/index.html`浏览器时，成功显示了 offline.html 页面。

任何帮助，将不胜感激。谢谢。

# python - 将列表与列表列表合并到字典中

> ID：15954120
> 
> 赞同：0
> 
> 时间：2013-04-11T16:31:09.313
> 
> 标签：python, list, dictionary, pygame

我希望能够通过使用另一个列表中的对象来引用字典中的列表。第一个列表是矩形对象的列表，第二个列表是从第一个列表中划分出来的较小矩形对象的列表。

这是我尝试过的：

```
def merge(self, parent_list, child_list):
    tile_dict = dict(zip(parent_list, child_list))
    return tile_dict 
```

但是我收到错误“Unhashable type: pygame.Rect”。不能为此目的使用字典吗？如果是这样，完成与最初预期类似的事情的适当列表理解是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:44:17.857

您可以定义自己的派生自 pygame.Rect 的类：

```
class HashableRect(pygame.Rect):
    def __hash__(self):
        return hash(tuple(self)) 
```

工作正常：

```
 >>> r = HashableRect(1,2,3,4)
 >>> {r: 'something'}
 {<rect(1, 2, 3, 4)>: 'something'} 
```

这个问题：`pygame.Rect`是一个可变类型。您可以更改它包含的值，因此散列会更改，这不应该发生。

如果您只关心对象身份，`id(self)`则可以作为哈希值返回。

或者您也可以将其转换为元组（它基本上不超过 4 元组）并将其用作 dict 中的键和进行查找时：

```
def merge(self, parent_list, child_list):
    tile_dict = dict(zip(map(tuple, parent_list), child_list))
    return tile_dict

merged = merge(prarent_list, child_list)
...
child = merged[tuple(parent)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:47:10.620

字典的键必须是可散列的，这意味着它们必须有一个`__hash__`方法，如果对象具有相同的“值”并且在对象的生命周期内永远不应该改变，则该方法会产生相同的输出。如果适用，您必须提供该哈希方法，或者您通过保留两个列表的列表来模拟 dict 并根据父项的索引查找子项。这可行，但将是 O(n) 查找成本。

# matlab - 将 matlab 绘图转换为 gnuplot 3d

> ID：15954121
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:31:09.780
> 
> 标签：matlab, 3d, gnuplot, translate

随着时间的推移，我有一个 fft 数据矩阵，8192 行数据 x 600 列时间。第一列是频率标签，第一行如下所示，但实际上并不存在于数据文件中，空格也不存在，它们只是为了便于阅读而显示。

```
Frequency, Sec1, Sec2, Sec3...Sec600
1e8,       -95,  -90,  -92
1.1e8,    -100, -101, -103
... 
```

它是用以下代码在matlab中绘制的 ***（向其他海报道歉，我抓住了错误的matlab代码）***

x 是 8192 行 x 600 列的矩阵，f 是频率标签数组，FrameLength = 1，figN = 3

```
function [] = TimeFreq(x,f,FrameLength,figN)

 [t,fftSize] = size(x);
 t = (1:1:t) * FrameLength;

figure(figN);
mesh(f,t,x)
xlabel('Frequency, Hz')
ylabel('time, sec')
zlabel('Power, dBm')
title('Time-Freq Representation') 
```

我无法弄清楚如何让它在 gnuplot 中工作。这是 Matlab 中的示例图像：http: [//imagebin.org/253633](http://imagebin.org/253633)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:38:27.613

所以这是我最终使用的 gnuplot 命令脚本。它有一些额外的元素，这些元素不在原始的 matlab 图中，但所有必需品都在那里。

```
set term png size 1900,1080
set datafile separator ","
set pm3d

# reverse our records so that time moves away from our perspective of the chart
set xrange[*:*] reverse

# hide parts of the chart that would make the 3d view look funny
set hidden3d

# slightly roate our perspective and compress the z axis
set view 45,75,,0.85

set palette defined (-120 "yellow", -70 "red", -30 "blue")
set grid x y z
set xlabel "time (secs)"
set ylabel "frequency"
set zlabel "dBm"

# plot all the data
set output waterfall.png
splot 'waterfall.csv' nonuniform matrix using 1:2:3 with pm3d lc palette 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:58:44.680

要在 gnuplot 中进行这项工作，您需要查看`splot`(for "surface plot") 命令。只需在终端中运行以下命令，您就可以了解很多信息：

```
$ gnuplot
gnuplot> help splot 
```

具体来说，您想阅读运行显示的帮助页面（在上述之后，当提示要求输入子主题时）`datafile`：。这应该足以让你开始。

此外，[这个问题](https://stackoverflow.com/questions/12750005/gnuplot-3d-plot-of-a-matrix-of-data)的答案可能会有所帮助。

# php - reCaptcha 设置 - 输入正确的验证码后出现白屏

> ID：15954122
> 
> 赞同：0
> 
> 时间：2013-04-11T16:31:11.187
> 
> 标签：php, captcha

我最近设置了 reCaptcha 并且一切工作正常，但是当我输入正确的验证码时，我得到的只是一个白屏 - 我知道为什么会这样，因为我应该告诉 reCaptcha 去哪里。

我只是不太了解PHP，不知道该放什么，有人可以帮助我吗，php代码是：

```
<?php
 require_once('recaptchalib.php');
 $privatekey = "YOUR_PRIVATE_KEY";
 $resp = recaptcha_check_answer ($privatekey,
                             $_SERVER["REMOTE_ADDR"],
                             $_POST["recaptcha_challenge_field"],
                             $_POST["recaptcha_response_field"]);
 if (!$resp->is_valid) {
 // What happens when the CAPTCHA was entered incorrectly
 die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
    "(reCAPTCHA said: " . $resp->error . ")");
 } else {
  // Your code here to handle a successful verification
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:32:47.967

您需要将发生的事情放在`else`语句中。

```
 } else {
  // Your code here to handle a successful verification
 } 
```

# f# - 为什么 F# Powerpack 中的矩阵和向量类型的元素是可变的？

> ID：15954125
> 
> 赞同：3
> 
> 时间：2013-04-11T16:31:18.167
> 
> 标签：f#, scientific-computing, numerics, f#-powerpack

F# 通常被提升为一种函数式语言，默认情况下数据是不可变的，但是 F# Powerpack 中的矩阵和向量类型的元素是可变的。为什么是这样？

此外，与普通矩阵相比，稀疏矩阵实现为不可变的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:48:21.483

F# 中的标准数组类型 ( `'T[]`) 也是可变的。您*基本*正确 - F# 是一种**鼓励**数据不变性但**不是必需**的函数式语言。基本上，F# 允许您编写可变/命令式代码和不可变/功能性代码；由您决定为您的特定应用程序实现代码的最佳方式。

拥有可变数组和矩阵的另一个原因是性能——可以使用不可变类型实现非常快速的算法，但编写科学计算的用户通常只关心一件事：实现*最大*性能。在这种情况下，数组和矩阵应该是可变的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T17:23:37.427

对于真正的高性能，在一种特定情况下需要可变性：如果您的代码经过完美优化，并且您掌握了它所做的一切，直到您的程序访问缓存（L1，L2）模式，那么没有什么比低水平，以金属方式。

这种情况通常只发生在你有一个明确的问题并保持 20 年不变的情况下，也就是主要在科学任务中。

一旦你离开这个特定的案例，在 99.99% 的情况下，瓶颈来自于具有太低级别的表示（由低级别语言引起），在这种情况下你无法表达你的最终的、现实世界的优化权衡手头的问题。

底线，对于性能，以下方法是唯一的方法（我认为）：

*   高级/算法优化优先
*   一旦探索了每一个高级方法，低级优化

您可以看到结果如何：

*   你不应该在没有首先衡量影响的情况下优化任何东西：只有在它们产生巨大的性能提升和/或不会降低你的域逻辑时才应该进行改进。

*   如果您的问题是稳定且明确定义的，您最终将达到一个点，您别无选择，只能进入低级别，并使用内存/可变性

# java - 我在 iText 中的希伯来文文本是左对齐的

> ID：15954126
> 
> 赞同：2
> 
> 时间：2013-04-11T16:31:38.237
> 
> 标签：java, pdf, itext

我正在使用以下代码在 iText 中生成希伯来语文本。

它工作得很好（创建一个希伯来字体，并使文本从右到左流动）但文本是左对齐而不是右对齐。

谁能帮我让它右对齐？请注意，我尝试使 MultiColumnText 右对齐，并使段落右对齐 - 但无济于事！

谢谢

```
static Color darkBlue = new Color(0x2F, 0x36, 0x99);
BaseFont unicode = BaseFont.createFont("c:/windows/fonts/arial.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font fontDarkBlueHebrew = new Font(unicode, 12, Font.NORMAL,darkBlue);

MultiColumnText mct=new MultiColumnText();
mct.addSimpleColumn(36, PageSize.A4.width()-36);
mct.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);
mct.setAlignment(Element.ALIGN_RIGHT);

Paragraph section1a = new Paragraph("כותרת 1",fontDarkBlueHebrew );
section1a.setAlignment(Element.ALIGN_RIGHT);            
mct.addElement(section1a);

Paragraph section1b = new Paragraph("הטקסט שלע",fontDarkBlueHebrew);
section1b.setAlignment(Element.ALIGN_RIGHT);  
mct.addElement(section1b);

document.add(mct); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:22:57.243

这是设计使然。当改变书写方向时，一切都颠倒了：左变右，右变左。所以你需要`Element.ALIGN_LEFT`而不是`Element.ALIGN_RIGHT`.

# jquery - 在 div 内的其他标签之后选择文本

> ID：15954132
> 
> 赞同：1
> 
> 时间：2013-04-11T16:32:02.583
> 
> 标签：jquery, google-chrome-extension

我有这样的结构：

```
<div class="cls">
  <a>
     <s>#</s>
     some text
</a>
</div> 
```

我如何选择“一些文本”在另一个函数中处理？我在想

```
$(".cls").innerHTML; 
```

但我想我必须解析它，我还有其他更简单的解决方案吗？

这会是一个更好的解决方案吗？

```
var word = $(".cls").next('a').contents().filter(function(){
    return this.nodeType == 3;
}).filter('s').remove(); 
```

我弄错了html我真的很抱歉

稍后编辑：如果有多个标签（相同）并且我想从每个标签中获取“一些文本”怎么办？我是否需要计算它们并使用 for 结构来处理它们中的每一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:37:07.173

这会给你`some text`：

```
var text = $('.cls').contents().filter(function() {
               return this.nodeType == Node.TEXT_NODE;
           }).text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:43:38.300

我找到了这样的解决方案：

```
var text=$('.cls').children().text(); 
```

就如此容易。看起来我让事情变得比它需要的更复杂。

# network-programming - 如何设置/获取 ns-3 模型中数据包碎片所花费的时间？

> ID：15954133
> 
> 赞同：0
> 
> 时间：2013-04-11T16:32:03.193
> 
> 标签：network-programming, modeling, ns-3

如果我通过多个子网传输数据包，这些子网在路由器上具有不同的 MTU，它可能会被分段。如何获取或设置 ns-3 模型中每个碎片操作所花费的时间？我需要知道这一点来计算速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:33:56.497

你问什么我不清楚，但让我试着回答。

如果要测量 ns-3 创建碎片并重新组装它们所花费的 CPU 时间，可以运行一个简单的 2 节点实验并更改发送节点的出站网络接口的 mtu 以查看多少挂钟时间花在碎片化与非碎片化上。

另一方面，如果您想根据模拟时间来衡量将一个数据包拆分为多个数据包并为每个片段执行 MAC 级访问功能的效果，它只是一个函数

*   在 MAC 级别使用的访问功能。如果你想模拟交换以太网，这很容易。使其为零。
*   通过您的媒体的传输延迟。如果是以太网，这又很容易：它是电缆的长度以电缆中电磁波的速度为模，这取决于电缆的质量。
*   片段的大小和媒体的吞吐量。

基本上，如果您知道数据包将被分段多少次（多个路由器可以将数据包连续分段成较小的片段）以及每次将使用哪个 mtu，您可以轻松创建该过程的分析模型并预测通过模拟的数据包的实际传输级传输延迟。

# jpa - 在有或没有 OSGi 的情况下使用 JPA 的区别

> ID：15954135
> 
> 赞同：2
> 
> 时间：2013-04-11T16:32:06.020
> 
> 标签：jpa, osgi

我是 OSGi 的初学者，我的项目包括在 OSGi 容器（apache felix；可分发 jar）中开发和执行持久性捆绑包（使用 jpa），然后通过 jpa 提供程序（Hibernate）与数据库（MySql）通信）。
我阅读了有关 OSGi 的 jpa 规范，因此，如果我理解正确，我必须为 OSGi 使用 JPA 提供程序来实现 OSGI jpa 企业规范。这个 jpa 提供者将跟踪已注册的持久性捆绑包以为其创建 EntityManagerFactory 吗？

那么直接使用 jpa 提供程序创建 EntityManagerFactory (Persistence.createEntityManagerFactory("xx")) 或从注册表中检索它有什么区别：

```
serviceReferences = context.getServiceReferences(
            EntityManagerFactory.class.getName(),
            String.format("(%s=%s)", 
            EntityManagerFactoryBuilder.JPA_UNIT_NAME,
            persistenceUnit)); 
```

我不想使用任何容器（apache karaf，geronimo，spring dm，..）所以，我将在 OSGi 容器中安装和启动就足够了，例如“org.apache.aries.jpa.api”作为 OGSi 企业 jpa 规范的实现，然后只从与我的持久性单元名称关联的注册表中检索“EntityManagerFactory”服务，或者我也应该自己注册一个像 HibernatePersistence 这样的 PersistenceProvider 以在我的持久性中将其声明为“提供者” .xml 文件？

我在这里发现了很多关于这个话题的讨论。不过我还是有问题

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:32:01.530

OSGi 是关于服务的，并且通过正确的设置在 OSGi 中使用服务非常容易。您展示了一个带有服务引用的非常老式的示例，我同意，在该模型中，使用老式 JPA 方式要容易得多。

但是，如果您使用声明式服务，则使用服务变得非常轻量级。您将被注入一个完全为您准备好的 EntityManagerFactory 服务。部署者可以使用 Config Admin、连接池、另一个 JPA 提供者等调整各种设置。这是一个明确的关注点分离。

由于不知道这个东西来自哪里以及谁实现它，你在代码中得到的假设更少，因此你的代码更不容易出错并且更可重用。我原则上，使用 Hibernate 和 MYSQL 的事实与您的大多数代码完全无关。是的，我确实知道 JPA 和 SQL 在实践中都不是非常可移植的，但是有很多方面不知道它们之间的差异。最终由部署者负责将工作的部分组合在一起。

现在声明式服务（DS）当然是一个额外的捆绑包，但是在使用 OSGi 15 年后，我声明任何 OSGi 开发人员不使用 DS，好吧，让我不要太深入，以保持它的文明 :-) 如果我愿意早在 OSGi 之初，DS 就已经内置到框架中，它是用于编程的最低级别。

# java - JNA - 获取基本地址

> ID：15954142
> 
> 赞同：2
> 
> 时间：2013-04-11T16:32:23.943
> 
> 标签：java, jna

最近我一直在做我的一个小项目，即 Java 中用于本地游戏（C/C++/等）的内存读/写。

目前我有一个可以读写游戏内存的基础，但我现在需要一种方法来获取正在运行的应用程序的基地址。例如：

我有一个使用 Cheat Engine 及其指针搜索器收集的指针列表。这些都是稳定的，并且每次游戏重新加载时都能正常工作。

我现在面临的问题是第一个指针使用程序的基地址（每次程序重新启动时都会更改）：“ac_client.exe”+000DF73C

我需要一种使用 JNA 获取“ac_client.exe”基本值的方法。

我做了很多研究并找到了一些在 C++ 中执行此操作的方法，但是我对 C/C++ 的了解非常有限。我发现使用 JNA 很难将其转换为 Java，我想我会在这里问看看是否有人能够提供帮助或知道完成这一壮举的替代方法。

提前感谢您的帮助，Kaden。

[编辑]

在下面阅读我的解决方案！谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:31:40.697

在对亚历克斯发布的内容进行了一些处理之后，我得到了它的工作，并设法让它工作。

对于其他想要获得类似工作的人，请查看 Alex 发布的那个项目，您将看到所需的课程。然后我就用了这个：

```
public int getBaseAddress() {
        try {
                Pointer hProcess = gethProcess();
                List<Module> hModules = PsapiHandler.getInstance().EnumProcessModules(hProcess);

                for(Module m: hModules){
                        if(m.getFileName().contains(exeName)){
                                misc.log(m.getFileName() + ": 0x" + Long.toHexString(Pointer.nativeValue(m.getEntryPoint())));
                                return Integer.valueOf("" + Pointer.nativeValue(m.getLpBaseOfDll()));
                        }
                }
        } catch (Exception e) {  e.printStackTrace(); }
        return -1;
} 
```

# android - 片段堆栈：从顶部片段推送/弹出片段

> ID：15954159
> 
> 赞同：1
> 
> 时间：2013-04-11T16:33:13.403
> 
> 标签：android, stack, fragment

Support4Demos 具有 Fragment 堆栈...但方便地将 pop/push CountingFragment 控件放置在堆栈之外（所有都发生在一个布局中，但 push/pop 按钮在下方，仍然在包含整个布局的 Fragment 中。

**如何**控件从顶部片段开始工作？

[编辑]另一种看待它的方式：
我想让堆栈上的片段表现得像活动，每个都可以弹出自己，或者启动另一个。
你将如何改变“FragmentStack”示例来自 Support4Demos 以便“回家”/“添加新”/“弹出顶部”按钮在 CountingFragments 中，而不是在包含 FragmentManager 的 FragmentStackSupport 中？
合理的设计 - 考虑“CountingFragments”包含可点击的 ListViews？

怎么做？理想情况下，每个堆栈片段都将包含对“堆栈持有者”片段或其（子）片段管理器的引用。但是，那些不是 Parcelable，并且[不能使用片段构造函数](https://stackoverflow.com/questions/10798489/proper-way-to-give-initial-data-to-fragments)（尽管当我这样做时*其他一切都*很好） .持有对它的引用也很糟糕，因为“堆栈持有者”片段也可以被销毁和重新创建。

[EDIT2]
好的，这是我想出的一些想法。

*   对于“回家”和“弹出顶部”，我想我可以将那些（不可见的）按钮添加到托管片段，然后通过`getWindow().getDecorView().findViewById`或类似的方式在托管片段中访问它们。
    这已经够丑了。但是推新的？我能想到的唯一相关的事情是将自定义 View 类添加到托管布局中，该类包含对 FragmentManager 的引用，以供托管的 Fragment 抓取。
*   在某处的静态地图中保存对 FragmentManager(s) 的引用
*   在托管片段中注册一个广播接收器，发送带有来自托管片段的数据的广播，告诉它要做什么。但是宿主 Fragment 不应该照看它的孩子。
*   让每个堆叠的 Fragment 本身托管其真实内容或下一个堆叠的 Fragment。这样，手头总是有一个 FragmentManager（除了弹出），但每页需要 2 个 Fragment，更不用说这一切的怪异了。

请告诉我有更清洁的方法。

# c# - Word Document.SelectionChange 事件不会触发

> ID：15954166
> 
> 赞同：5
> 
> 时间：2013-04-11T16:33:35.020
> 
> 标签：c#, ms-word, vsto, office-interop

下面是我来自基于 VSTO 的 Word 插件的代码（为便于阅读而简化的版本）。

问题是，如果我打开了两个文档，例如文档和一个模板，我的插件会帮助开发模板并且工作正常，直到模板关闭并在同一个 Word 实例中重新打开（文档文件使 Word 保持活动状态）。一旦发生这种情况，即使连接了侦听器（通过调试器确认），也不会收到 SelectionChange 事件。

**这段代码有什么问题吗？还有其他附加选择更改事件的方法吗？**

```
void Application_DocumentOpen(Word.Document Doc)
{
   // this method gets called as intended
   Document vstoDoc = Globals.Factory.GetVstoObject(doc);
   vstoDoc.SelectionChange += new Microsoft.Office.Tools.Word.SelectionEventHandler(ThisDocument_SelectionChange);
}

private void Application_DocumentBeforeClose(Word.Document doc, ref bool Cancel)
{
   // this one also gets called as intended
    Document vstoDoc = Globals.Factory.GetVstoObject(doc);
    vstoDoc.SelectionChange -= new Microsoft.Office.Tools.Word.SelectionEventHandler(ThisDocument_SelectionChange);

}

void ThisDocument_SelectionChange(object sender, SelectionEventArgs e)
{  
    // this doesn't get called if the document is closed and open again within the same Word instance
    Log("Selection changed");
} 
```

更新：这似乎是 VSTO 错误。

附加到其他事件工作正常，我可以使用 ContentControlOnEnter/Exit：

```
vstoDoc.SelectionChange += ThisDocument_SelectionChange; // doesn't work
vstoDoc.ContentControlOnEnter += vstoDoc_ContentControlOnEnter; // works
vstoDoc.ContentControlOnExit += vstoDoc_ContentControlOnExit;   // works 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:39:17.500

你为什么不使用

```
Globals.ThisAddIn.Application.WindowSelectionChange +=
                new ApplicationEvents4_WindowSelectionChangeEventHandler(Application_WindowSelectionChange); 
```

而不是将您的`Microsoft.Office.Interop.Word.Document`对象转换为`Microsoft.Office.Tools.Word.Document`

# css - 如何防止样式表变得一团糟？

> ID：15954168
> 
> 赞同：3
> 
> 时间：2013-04-11T16:33:43.440
> 
> 标签：css, sass, less, stylesheet

如何防止 CSS 样式表（或预处理的 LESS 或 SASS ......）变得难以理解，无法预测哪些样式会影响每个元素，您必须通过艰苦的努力对基于 CSS 的设计进行所有进一步的调整无休止的试错？

背景：每次我开始在网站上工作时，我都会从一组干净且组织良好的样式表、一个框架（通常是 Bootstrap）开始，然后是一个布局样式表、一个排版样式表，对于某些网站来说是一个配色方案样式表，然后是一个一般的“外观”，其中样式按区域和子区域分组，依此类推。一切都很好，很干净，直到通过慢慢添加东西，事情达到了“临界点”：我不能再“在脑海中运行”样式规则，选择器变得如此复杂，以至于我无法轻易预测新规则中的元素将适用，所以我开始打破层次结构并添加一个“tweaks1.css”调整层，然后是一个“tweaks2.css”，然后一切都在下坡，样式变得完全难以理解！

...无论我使用 LESS 还是 SASS，都会发生同样的事情。CSS 的级联特性总是能胜过我。那么......**有没有办法强制CSS提交？这里有任何“设计模式”吗？**

注意：*我是一名程序员，我有不止一种范式和编程语言的经验，而且我在处理大型代码库时没有问题，但是当我开始前端工作时，不知何故，CSS 的“级联规则”逻辑让我心烦意乱在某个时候...我曾经遇到过与 Javascript 意大利面条相同的“不可理解性”问题，但是对于代码，有模式和最佳实践，我找到了将事情重构为提交的方法...*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:52:48.290

这始终是 CSS 中一个棘手的部分。写作时最好的方法是评论和直观地组织你的 CSS。例如，我的总是分为页面基本（定义字体，背景等）基本文本格式（p，h1-h6，i，b），链接和菜单（a，a：hover，nav），表格，格式化（div、section）、表单/输入和过渡/效果。

在测试阶段，我在 Firefox 中使用 firebug 来向我展示在元素级别应用了哪些 CSS 属性、哪些是继承的，哪些将被继承但已被覆盖。

# c# - 在多个视图上处理模型数据的最佳方法？

> ID：15954169
> 
> 赞同：0
> 
> 时间：2013-04-11T16:33:48.147
> 
> 标签：c#, asp.net-mvc, session-variables

我知道已经以几种不同的方式提出了这个问题，但我不确定我的具体问题是否已被提出。由于业务规则，我不能使用数据库在视图之间临时存储数据。静态变量已出（多用户）。我试图避免会话和临时数据。如果我使用 Viewstate，我将存储大约 9-12 个模型的数据，这些数据会减慢页面加载速度。如果用户返回表单，我有需要重新填写的多页表单。我知道这不是理想的方法，但是任何人都可以建议一种方法来为除会话变量之外的多个模型保留这些数据吗？我假设的每个视图都需要重写 Tempdata。我不能提供代码，我知道这不是一个有利的设计，但规则很严格。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:09:36.377

我认为使用 Session 没有任何问题，即使对于 MVC 也是如此。它是一个工具，当你需要它时使用它。我发现大多数人倾向于避免使用 Session，因为代码通常很丑陋。我喜欢在我需要存储在会话中的对象周围使用通用包装器，它提供了一个强类型和可重用的类（示例）：

```
public abstract class SessionBase<T> where T : new()
{
    private static string Key
    {
        get { return typeof(SessionBase<T>).FullName; }
    }

    public static T Current
    {
        get
        {
            var instance = HttpContext.Current.Session[Key] as T;

            // if you never want to return a null value
            if (instance == null)
            {
                HttpContext.Current.Session[Key] = instance = new T();
            }

            return instance;
        }
        set
        {
            HttpContext.Current.Session[Key] = value;
        }
    }

    public static void Clear()
    {
        var instance = HttpContext.Current.Session[Key] as T;
        if (instance != null)
        {
            HttpContext.Current.Session[Key] = null;
        }
    }
} 
```

创建需要存储的类：

```
[Serializable]  // The only requirement
public class Person
{
  public string FirstName { get; set; }
  public string LastName { get; set; }
} 
```

创建您的具体类型：（真的很简单吗？）

```
public class PersonSession : SessionBase<Person> { } 
```

随心所欲地使用它（只要它是可序列化的）

```
public ActionResult Test()
{
  var Person = db.GetPerson();

  PersonSession.Current = Person;

  this.View();
}

[HttpPost]
public ActionResult Test(Person)
{
  if (Person.FirstName != PersonSession.Current.FirstName)
  {
    // etc, etc 

    PersonSession.Clear();
  }
} 
```

# c++ - 无法打开文件，mystate for datafile2 =2

> ID：15954170
> 
> 赞同：1
> 
> 时间：2013-04-11T16:33:49.387
> 
> 标签：c++

当我调试它时，我可以看到它打开 datafile1 ，它读取第一行并在日志文件中我得到 roma-3-4.log

它更改为 c:/temp/roma-3-4.log 但是当我想打开它时，它失败了。我检查了 _Mystate = 2 。那是什么意思

谢谢

**在 transfersubs.cfg 中有这个 roma-3-4.log**

 *** ***在目录 c:/temp/ 我有以下文件 roma-3-4.log

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

int main()
{

  string input;
  string logfile;
  string errorfile;

  short logfilesize1;

   fstream dataFile1("c:/temp/transfersubs.cfg", ios::in);

  if (dataFile1)
  {
  getline(dataFile1, input, '$');
  logfile=input;
  logfilesize1=input.size();
  errorfile=input;
  errorfile[logfilesize1-4]='e';
  errorfile[logfilesize1-3]='r';
  errorfile[logfilesize1-2]='r';

  logfile="C:/Temp/"+logfile;

  fstream dataFile2( logfile, ios::in);

  if (dataFile2)
  {

dataFile2.close();
  }
   else
  {
    cout << "ERROR: Cannot open logfile.\n";
   }

    dataFile1.close();
  }
     else
  {
      cout << "ERROR: Cannot open file.\n";
  }
      system("Pause");
     return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:47:46.993

我相信您的 getline 不会费心寻找换行符，而只是为了 $. 您没有发布正在读取的文件，但请检查以确保文件名末尾有 $ ，否则它将获取整个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T10:51:48.247

似乎除非您在使用 ofstream 写入文件后放置 \n 或 endl，否则 ifstream 将无法从文件中读取任何内容。实际上，在您写入文件的任何内容之后添加一个空格也无济于事。

因此，请始终在使用 ofstream 写入文件后立即添加换行符。**

# r - 正则表达式从R中的一行中取出一个文本

> ID：15954171
> 
> 赞同：1
> 
> 时间：2013-04-11T16:33:50.623
> 
> 标签：r

我有这样的线：

```
x<-c("System configuration: lcpu=96 mem=196608MB ent=16.00") 
```

我需要等于 ent 的值并将其存储在 R 的 val 对象中

我这样做似乎不起作用。有任何想法吗？

```
 val<-x[grep("[0-9]$", x)] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T16:37:53.123

使用`sub`：

```
val <- sub('^.* ent=([[:digit:]]+)', '\\1', x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T16:48:36.363

如果 ent 总是在最后，那么：

```
sub(".*ent=", "", x) 
```

如果不在[gsubfn 包](http://gsubfn.googlecode.com)`strapplyc`中尝试，它只返回括号内的正则表达式部分：

```
library(gsubfn)
strapplyc(x, "ent=([.0-9]+)", simplify = TRUE) 
```

也可以使用以下方法同时将其转换为数字`strapply`：

```
strapply(x, "ent=([.0-9]+)", as.numeric, simplify = TRUE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T19:54:25.583

使用[rex](http://cran.r-project.org/web/packages/rex/index.html)可能会使这种类型的任务更简单一些。

请注意，此解决方案正确包含`.`在捕获中，G. Grothendieck 的回答也是如此。

```
x <- c("System configuration: lcpu=96 mem=196608MB ent=16.00")

library(rex)
val <- as.numeric(
  re_matches(x,
    rex("ent=",
      capture(name = "ent", some_of(digit, "."))
      )
    )$ent
  )
#>[1] 16 
```

# codeigniter - 带有数据映射器的代码点火器提供有效的 json

> ID：15954174
> 
> 赞同：0
> 
> 时间：2013-04-11T16:33:57.330
> 
> 标签：codeigniter, datamapper

我有这个从表中选择列，我想将它传递给 Jquery ajax fn。

我正在使用下面的代码，但得到无效的 json

我的表有三列 id、名称和城市，但我没有选择城市

这是我的 json 回复

```
["{id:1,name\":\"JOHN\",\"city\":\"null\"}"
,"{\"id\":2,\"name\":\"MICHEAL\,\"city\":\"null\"}"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:11:52.100

可悲的是，当您调用`all_to_json()`. 这个问题似乎[在开发分支中](https://github.com/WanWizard/sparks-datamapper/blob/master/extensions/json.php#L32)得到了解决。您可以通过多种方式解决此问题：

### 1\. 调用`to_json()`单个模型对象并使用字符串操作创建 json 数组：

```
$my_objects = (new Model)->get();
$results = array();
foreach ($my_objects as $o) {
    $results[] = $o->to_json();
}
// building a json array from the strings returned by $o->to_json()
print '['.join(',', $results).']'; 
```

### 2.您可以使用数组扩展的`all_to_array`方法和 json_encode 结果：

```
$my_object_arrays = (new Model)->get()->all_to_array();
print json_encode($my_object_arrays); 
```

# asp.net-web-api - 使用 ASP.Net Web API 在 ATOM 中缺少“feed”元素的 xmlns 命名空间属性

> ID：15954176
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:34:06.577
> 
> 标签：asp.net-web-api, atom-feed

我正在开发一个 ASP.Net Web API 项目。

需要返回应用程序中资源更改的 ATOM 提要。

我的提要一切正常，但由于某种原因，我的提要元素省略了将 XML 描述为 ATOM 提要的“xmlns”元素。

期望的结果是：

```
<?xml version="1.0" encoding="utf-8" ?>
  <feed xmlns="http://www.w3.org/2005/Atom">
    <title type="text">My Feed</title>
    <id>uuid:ff389357-aaab-4814-8916-b8fff325e6bb;id=22</id>
    <updated>2013-04-11T16:15:10Z</updated>
    <entry>
      <id>uuid:ff389357-aaab-4814-8916-b8fff325e6bb;id=23</id>
      <title type="text">Data.Parliament Resource 1</title>
      <updated>2013-04-11T16:15:10Z</updated>
      <author>
        <name>Parliament System X</name>
      </author>
     </entry>
  </feed> 
```

但我的提要看起来像：

```
<?xml version="1.0" encoding="utf-8" ?>
  <feed>
    <title type="text">My Feed</title>
    <id>uuid:ff389357-aaab-4814-8916-b8fff325e6bb;id=22</id>
    <updated>2013-04-11T16:15:10Z</updated>
    <entry>
      <id>uuid:ff389357-aaab-4814-8916-b8fff325e6bb;id=23</id>
      <title type="text">Data.Parliament Resource 1</title>
      <updated>2013-04-11T16:15:10Z</updated>
      <author>
        <name>Parliament System X</name>
      </author>
     </entry>
  </feed> 
```

注意 'feed' 元素上缺少的 'xmlns' 属性。

我找了高低都无济于事...

**问题：**

**谁能向我解释为什么缺少“xmlns”元素以及如何将其放回那里？？？**

下面是 ATOM 媒体类型格式化程序的代码：

```
public class AtomMediaTypeFormatter : BufferedMediaTypeFormatter
{
    private const string AtomMediaType = "application/atom+xml";
    private IFeedHelper _feedService;

    public AtomMediaTypeFormatter(IFeedHelper feedService)
    {
        this._feedService = feedService;
        SupportedMediaTypes.Add(new MediaTypeHeaderValue(AtomMediaType));
        this.AddQueryStringMapping("format", "atom", AtomMediaType);
    }

    public override bool CanWriteType(Type type)
    {
        return type.Implements<IFeedEntry>() || type.Implements<IFeed>();
    }

    /// <summary>
    /// DDP is not currently supporting this operation.
    /// </summary>
    public override object ReadFromStream(Type type, Stream readStream, HttpContent content, IFormatterLogger formatterLogger)
    {
        throw new NotImplementedException();
    }

    /// <summary>
    /// Writes the given object value of type <param name="type"></param> to the given stream
    /// </summary>
    public override void WriteToStream(Type type, object value, Stream writeStream, HttpContent content)
    {
        using (writeStream)
        {
            var feed = value as IFeed;
            if (feed != null)
            {
                WriteAtomFeed(feed, writeStream);
            }
            else
            {
                WriteAtomEntry((IFeedEntry)value, writeStream);
            }
        }
    }

    private void WriteAtomFeed(IFeed feed, Stream writeStream)
    {
        var formatter = new Atom10FeedFormatter(_feedService.Syndicate(feed));

        using (var writer = XmlWriter.Create(writeStream))
        {
            formatter.WriteTo(writer);
        }
    }

    private void WriteAtomEntry(IFeedEntry feedEntry, Stream writeStream)
    {
        var formatter = new Atom10ItemFormatter(_feedService.Syndicate(feedEntry));

        using (var writer = XmlWriter.Create(writeStream))
        {
            formatter.WriteTo(writer);
        }
    }
} 
```

这是 FeedService.Sydncate(IFeed) 方法的代码：

```
 /// <summary>
    /// Instantiates and returns a SyndicationFeed using the values of the given IFeed instance
    /// </summary>
    public SyndicationFeed Syndicate(IFeed feed)
    {
        var atomFeed = new SyndicationFeed
        {
            Title = new TextSyndicationContent(feed.Title),
            Id = feed.Id,
            Items = feed.Items.Select(i => Syndicate(i)),
            LastUpdatedTime = feed.LastUpdated
        };

        atomFeed.Links.Add(new SyndicationLink(new Uri(feed.Link.Href), feed.Link.Href, "", "", default(long)));

        return atomFeed;
    } 
```

最后是 FeedService.Sydncate(IFeedEntry)：

```
 /// <summary>
    /// Instantiates and returns a SyndicationItem using the values of the given IFeedEntry instance
    /// </summary>
    public SyndicationItem Syndicate(IFeedEntry feedEntry)
    {
        var item = new SyndicationItem
        {
            Id = feedEntry.Id,
            Title = new TextSyndicationContent(feedEntry.Title, TextSyndicationContentKind.Plaintext),
            LastUpdatedTime = feedEntry.LastUpdated
        };
        item.Authors.Add(new SyndicationPerson("", feedEntry.Author, ""));
        if (feedEntry.Links != null)
        {
            foreach (var link in feedEntry.Links)
            {
                item.Links.Add(new SyndicationLink(new Uri(link.ToString())));
            }
        }
        return item;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:43:58.507

我无法帮助您了解为什么 Atom10FeedFormatter 不添加命名空间，但如果您找不到解决方案，我可能有替代方案。我玩过使用 ODataMessageWriter 来编写 Atom 内容。[您可以在此处](https://github.com/darrelmiller/HypermediaApiSite/blob/master/HypermediaApiContent/Root/Learning/LearningViewModel.cs)查看源代码 ，输出（带有命名空间）在[此处](http://hypermediaapi.com/Learning.atom)。

# jquery - Jquery同时事件关系

> ID：15954178
> 
> 赞同：0
> 
> 时间：2013-04-11T16:34:13.227
> 
> 标签：jquery, mouseevent, bind, unbind

当同时触发事件时，我无法弄清楚如何实现一个事件与另一个事件的解除绑定。我有这种 html 层次结构：

```
<div class="first"></div>
<div class="second"></div> 
```

当鼠标输入 .first 时，会显示 .second。然后，如果鼠标离开 .first，.second 应该隐藏，除非鼠标正在进入 .second。所以，我的问题是同时触发了 $('.first').mouseleave() & $('.second').mouseenter() 。我尝试了这样的事情，但没有结果：

```
$('.first').mouseenter(function(){
    $('.second').show();
});

$('.first').mouseleave(function(){
    $('.second').hide();
});

$('.second').mouseenter(function(){
     $('.first').unbind('mouseleave');
});

$('.second').mouseleave(function(){
     $('.first').bind('mouseleave');
     $('.second').hide();
}); 
```

有什么线索吗？

这是示例：http: [//jsfiddle.net/XdU7H/](http://jsfiddle.net/XdU7H/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:47:38.133

Timeouts !

```
var hideTimer;

$('.first').mouseenter(function(){
    $('.second').show();
});

$('.first').mouseleave(function(){
    hideTimer = setTimeout(function() {
       $('.second').hide();
    }, 500);
});

$('.second').mouseenter(function(){
     clearTimeout(hideTimer);
     $('.first').unbind('mouseleave');
});

$('.second').mouseleave(function(){
     $('.first').bind('mouseleave');
     $('.second').hide();
}); 
```

Tweak it to your needs as I'm not sure if I'm following your logic corectly. :P

[http://javascript.info/tutorial/events-and-timing-depth](http://javascript.info/tutorial/events-and-timing-depth)

# c# - 从直播中获取比特率

> ID：15954181
> 
> 赞同：2
> 
> 时间：2013-04-11T16:34:24.313
> 
> 标签：c#, audio, http-live-streaming, shoutcast

要从广播中获取比特率，人们过去常常从元数据标头中获取比特率，如下例所示：

```
icy-notice1: This stream requires 
<A href="http://www.winamp.com/" target=_blank>Winamp</A> 

icy-notice2: SHOUTcast Distributed Network Audio Server/Linux v1.9.5

icy-name: RadioABF.net - Paris Electro Spirit Live From FRANCE

icy-genre: Techno House Electronic

icy-url: <A href="http://www.radioabf.net/" target=blank>http://www.radioabf.net/</A>

content-type: audio/mpeg
icy-pub: 1

icy-metaint: 32768

icy-br: 160 
```

但有些广播不提供此信息

我的问题是如何从广播中获取比特率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:18:07.173

获得比特率的唯一真正方法是解码音频流。

虽然 SHOUTcast 服务器在其标头中给出了这个提示，但不能保证它是准确的，因为比特率可能会改变。如您所见，通过 HTTP 发送流的其他服务器并不总是遵循 SHOUTcast 所做的标头模式。

您也不能简单地测量接收数据的速度，因为许多服务器最初会发送大缓冲区来填充客户端缓冲区并测试连接速度。

如果您无法解码流，许多编解码器会将该比特率放入其帧头中。对于 MPEG，[帧头中第三个字节的前四位为您提供 bitrate](http://www.mp3-tech.org/programmer/frame_header.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T10:24:58.197

Shoutcast V1 有一个包含比特率（和其他）信息的特殊页面。假设您的广播正在 [http://some-streaming-server:8000](http://some-streaming-server:8000)上运行， 那么此页面 url 将是： [http://some-streaming-server:8000/7.html](http://some-streaming-server:8000/7.html)

该页面的正文看起来像这样：

```
 <HTML><meta http-equiv="Pragma" content="no-cache"></head<body>4,1,36,80,4,64,Artist - title</body></html> 
```

用逗号分割该文本，您将获得：

*   当前听众
*   流状态
*   高峰听众
*   最大监听数（从服务器启动）
*   独特的听众
*   **比特率**
*   歌名

# python - Mongoengine插入功能失败

> ID：15954184
> 
> 赞同：-2
> 
> 时间：2013-04-11T16:34:30.343
> 
> 标签：python, mongodb, mongoengine

我对插入功能有疑问。如果我有一组要插入的对象[坏，好，好]。如果第一个对象是坏的，并且对象插入操作将失败，那么即使对象是好的，其余的对象也永远不会命中数据库。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:31:32.957

您可以在保存之前验证模型实例以确保它们有效，例如：

```
valid_docs = [d for d in docs if d.validate()] 
```

`continue_on_error=True`或作为例如传递`write_options`：

```
Doc.objects.insert(docs, write_options={"continue_on_error": True}) 
```

# php - php与javascript混合

> ID：15954186
> 
> 赞同：0
> 
> 时间：2013-04-11T16:34:44.040
> 
> 标签：php, javascript

我想将 php 与 javascript 混合这是我的代码：

```
<?php
function sayHi(){

 echo 'Good Morning';

}
echo 'hello';
for($i=0;$i<10;$i++){
?>

<script>
    document.write('bingo');
    <?php
  sayHi();
 }
 ?>

</script> 
```

它在完成 echo 'hello' 后停止工作；我怎样才能让它正常工作？请你帮助我好吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:39:34.733

你的 sayHi() 函数在标签内输出一些无效的东西`<script>`，所以它不会工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:39:15.843

你想做什么？

您的代码打印为..

```
<script>
    document.write('bingo');
    Good Morning
</script> 
```

它崩溃的原因是因为 Javascript 非常敏感，而早安不是有效的 javascript。

如果你想打印“早上好”，你必须这样做。

```
<script>
    document.write('<?php sayHi(); ?>');
</script> 
```

打印为

```
<script>
    document.write('Good Morning');
</script> 
```

# javascript - 在函数中使用 jquery $(this)

> ID：15954187
> 
> 赞同：-2
> 
> 时间：2013-04-11T16:34:46.213
> 
> 标签：javascript, jquery

**快速描述：** 我知道在函数中使用 $(this) 是行不通的，因为它不在正确的范围内。我还看到了其他类似的问题。我仍然无法弄清楚如何修复我的场景。

**目标：**我正在尝试使用 jQuery 构建全景照片查看器。我有它的工作，但我需要多个实例。所以我只需要定位我悬停的那个。

**代码：**

jsFiddle：http: [//jsfiddle.net/kthornbloom/5J3rh/](http://jsfiddle.net/kthornbloom/5J3rh/)

简化代码：

```
var hoverInterval;

function doStuff() {

/* The next line is the one in question */

    $(this).animate({
      /* stuff happening */
    });
}

$(function() {
    $('.pan-wrap').hover(
        function() {
            /* stuff happening */
            hoverInterval = setInterval(doStuff, 250);
        },
        function() {
            clearInterval(hoverInterval);
   });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:35:44.173

您有范围问题，doStuff 中的 this 是窗口上下文。

使用[代理（）](http://api.jquery.com/jQuery.proxy/)

```
hoverInterval = setInterval($.proxy(doStuff,this), 250); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:37:17.043

您可以显式`this`传入`doStuff`：

```
setInterval(function() {
    doStuff(this);
}, 250); 
```

你`doStuff`可以这样做：

```
function doStuff(element) {
    ...
} 
```

或者您可以像这样显式设置`this`for的值`doStuff`：

```
setInterval(function() {
    doStuff.call(this);
}, 250); 
```

然后你仍然可以在不改变任何参数的情况下使用`$(this)`inside 。`doStuff`有关详细信息`call`，请参阅[`Function.prototype.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)和它的朋友[`Function.prototype.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)。

# vb.net - 我可以创建属性的属性吗？

> ID：15954188
> 
> 赞同：1
> 
> 时间：2013-04-11T16:34:50.057
> 
> 标签：vb.net, class, methods, properties, visual-studio-2012

所以我最近掌握了在我的 Visual Basic 编程中使用类的概念，我发现它非常有用。在我当前的项目中，我有几个复选框组框（每个复选框表示一个“行为”），并且在每个组框中，总是有一个复选框具有文本框控件**而不是标签**（以允许用户指定“其他”行为）。正是那个用户生成的标签给我带来了麻烦......

我创建了一个名为“行为”的类，它基本上执行以下操作：

1.  getChecked > 此方法获取每个选中的复选框并将其添加到给定表单的 BehaviorCollection 中。
2.  behaviorCollection > 表示选中复选框的集合。
3.  getOtherChecked > 与“getChecked”相同，除了“其他行为”复选框。
4.  otherBehaviorCollection > 表示选中的“其他”复选框的集合。

问题是对于每个选中的“其他行为”复选框，我需要存储其相应文本框的值。我想设置我的 getOtherChecked() 方法来做到这一点，这样最后，我就可以做到这样......

```
Dim myBoxes as new Behaviors
Dim cBox as Checkbox
Dim cBoxLabel as String

myBoxes.getOtherChecked(myUserForm) 'This would get each checked "Other Behaviors" checkbox object, and also somehow add another property to it called "LinkedTextboxLabel" that would be assigned the value of the corresponding textbox.
cBox = myBoxes.otherBehaviorCollection.item(0) 'Assign a checkbox from my "Other Behaviors" collection to a variable.
cBoxLabel = cBox.LinkedTextboxLabel 'Assign the user-inputted value of the linked textbox to a variable. 
```

所以基本上我怎么能/应该向集合项或复选框添加自定义属性？

我想过只是将控件的名称添加到临时 DataTable 或 SQL 表中，以便每一行在一个列中都有一个复选框的名称，在下一列中具有相应的文本框值，但我希望有一个更常见的使用和接受的方法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:39:55.240

我知道它不能回答将属性添加到属性的问题，但是您可以为“其他”复选框创建一个类并覆盖它的功能吗？然后您可以将复选框和 OtherCheckBoxes 添加到您的通用集合中？例如，（绝不是完整的，但你应该明白）

编辑：更改代码以显示阴影

```
Public Class OptionalCheckbox : Inherits CheckBox
Private mOptionalText As String

Public Shadows Property Text() As String
    Get
        Return mOptionalText
    End Get
    Set(value As String)
        mOptionalText = value
        MyBase.Text = value
    End Set
End Property
End Class 
```

对于每个项目，如果您要检索 .Text，您将获得文本框值或复选框标签（如果它是普通复选框）

以及如何在代码的其他部分中使用。同样，这只是一个例子。您仍然需要使用分配给 OtherCheckBox 的文本框，以使其将文本写入其中，并从中读取到 Class 的 .Text 属性中。

```
 Dim newCheckBoxCollection As New Collection

    Dim cBox As New CheckBox
    cBox.Text = "Standard Value Here"
    'other properties of the checkbox can be modified here
    newCheckBoxCollection.Add(cBox)

    Dim cOBox As New OptionalCheckbox
    cOBox.Text = "Optional Text Here"
    'other properties of the checkbox can be modified here
    newCheckBoxCollection.Add(cOBox)

    For Each cb As CheckBox In newCheckBoxCollection
        Me.FlowLayoutPanel1.Controls.Add(cb)
    Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:16:48.610

您可以为与“其他行为”复选框关联的文本添加一个属性。

编辑：您可能试图将您的数据概括得太远，因为“其他行为”是一种特殊情况，值得单独考虑。

如果您查看以下代码（在新的 Windows 窗体项目中）创建的内容，它可能会给您一些想法：

```
Public Class Form1

    ''' <summary>
    ''' A behaviour domain and its characteristics, with one user-defined entry.
    ''' </summary>
    ''' <remarks></remarks>
    Public Class BehavioursSectionDescriptor
        Property BehaviourTypeName As String
        Property BehaviourNames As List(Of String)
        Property CustomBehaviours As String
    End Class

    ''' <summary>
    ''' Return a GroupBox containing CheckBoxes and one Checkbox with a TextBox adjacent to it.
    ''' </summary>
    ''' <param name="behaviourSet"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    Private Function GetBehaviourGroupPanel(behaviourSet As BehavioursSectionDescriptor) As GroupBox

        Dim gb As New GroupBox
        gb.Text = behaviourSet.BehaviourTypeName

        Dim fixedBehaviourNames As List(Of String) = behaviourSet.BehaviourNames
        Dim customBehavioursValue As String = behaviourSet.CustomBehaviours

        Dim cbVertSeparation As Integer = 4
        Dim gbPadding As Integer = 20

        Dim cb As New CheckBox

        Dim yLoc As Integer = gbPadding

        For i = 0 To fixedBehaviourNames.Count - 1
            cb = New CheckBox
            cb.Location = New Point(gbPadding, yLoc)
            cb.Text = fixedBehaviourNames(i)
            ' you can use the .Tag Object of a Control to store information
            cb.Tag = behaviourSet.BehaviourTypeName & "-Cb-" & i.ToString()
            gb.Controls.Add(cb)
            yLoc += cb.Height + cbVertSeparation

        Next

        cb = New CheckBox
        cb.Text = ""
        cb.Location = New Point(gbPadding, yLoc)
        cb.Tag = behaviourSet.BehaviourTypeName & "-Custom behaviours"
        gb.Controls.Add(cb)

        Dim tb As New TextBox
        tb.Location = New Point(gbPadding + 18, yLoc)
        tb.Width = 100
        tb.Text = customBehavioursValue
        gb.Controls.Add(tb)
        ' make sure the textbox appears in front of the checkbox's label area
        tb.BringToFront()

        gb.Size = New Size(160, yLoc + gbPadding * 2)

        Return gb

    End Function

    Private Function GetTestData() As List(Of BehavioursSectionDescriptor)
        Dim bsds = New List(Of BehavioursSectionDescriptor)
        bsds.Add(New BehavioursSectionDescriptor With {.BehaviourTypeName = "In water", _
                                                     .BehaviourNames = New List(Of String) From {"Floats", "Spins"}, _
                                                     .CustomBehaviours = "Paddles"})

        bsds.Add(New BehavioursSectionDescriptor With {.BehaviourTypeName = "Under light", _
                                                     .BehaviourNames = New List(Of String) From {"Shines", "Glows", "Reflects"}, _
                                                     .CustomBehaviours = "Iridesces"})

        bsds.Add(New BehavioursSectionDescriptor With {.BehaviourTypeName = "Near food", _
                                                     .BehaviourNames = New List(Of String) From {"Sniffs", "Looks"}, _
                                                     .CustomBehaviours = ""})

        Return bsds

    End Function

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

        Dim bsds As List(Of BehavioursSectionDescriptor) = GetTestData()

        Dim gbs As New List(Of GroupBox)
        Dim xLoc As Integer = 20
        Dim yLoc As Integer = 20

        ' make some GroupBoxes to present the data input fields
        For i = 0 To bsds.Count - 1
            Dim gb = GetBehaviourGroupPanel(bsds(i))
            gb.Location = New Point(xLoc, yLoc)
            gb.Dock = DockStyle.None
            yLoc += gb.Height + 30
            Me.Controls.Add(gb)
        Next

        ' size the form to fit the content
        Me.Size = New Size(240, yLoc + 40)

    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:25:38.773

如果您只是尝试将数据保存到 DataTable 或 SQL 表之类的东西中，那么代码会有点矫枉过正。我建议您使用流读取器/写入器并尝试以这种方式检查值，因为代码会更简单。

# java - 由于 NoSuchAlgorithmException，无法读取 tc 服务器属性 [PropertyDecoder]

> ID：15954191
> 
> 赞同：0
> 
> 时间：2013-04-11T16:35:04.600
> 
> 标签：java, spring, tomcat, spring-tool-suite, tcserver

我的同事和我在相同的环境中：

*   弹簧工具套件 2.9.2 (Eclipse 3.7.2)
*   Java 6 更新 43
*   VMware vFabric tc Server v2.5、v2.6、v.27（tomcat-7.0.20.B.RELEASE）

我的服务器启动时没有问题；但是，他的服务器出现以下错误：

```
SEVERE: Unable to load property source[com.springsource.tcserver.security.PropertyDecoder].
java.security.NoSuchAlgorithmException: PBEWithMD5AndDES SecretKeyFactory not available
    at javax.crypto.SecretKeyFactory.<init>(DashoA13*..)
    at javax.crypto.SecretKeyFactory.getInstance(DashoA13*..)
    at com.springsource.tcserver.security.KeyDecoder.initCiphers(KeyDecoder.java:68)
    at com.springsource.tcserver.security.KeyDecoder.<init>(KeyDecoder.java:48)
    at com.springsource.tcserver.security.PropertyDecoder.<init>(PropertyDecoder.java:145)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at org.apache.tomcat.util.digester.Digester.<clinit>(Digester.java:100)
    at org.apache.catalina.startup.Catalina.createStartDigester(Catalina.java:303)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:546)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:658)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450) 
```

知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:21:19.103

我不确定是什么原因造成的，但升级到`Java 7 Update 17`修复它。

# java - 嵌套循环，无法弄清楚如何编码

> ID：15954195
> 
> 赞同：5
> 
> 时间：2013-04-11T16:35:08.900
> 
> 标签：java, loops, nested, jgrasp

嘿，我有一个问题我已经想弄清楚几个小时了，我需要使用嵌套循环来打印以下内容

```
 -----1-----
    ----333----
    ---55555---
    --7777777--
    -999999999- 
```

这就是我到目前为止所拥有的。

```
 public static void Problem6 () {
        System.out.println("Problem 6:");
        for (int i = 1; i <= 5; i++) {
            for (int j = 5; j >= i; j--) {
                System.out.print("-");
            }
            for (int j = 1; j <= 9; j += 2) {
                System.out.print(j);
            }
            for (int j = 5; j >= i; j--) {
                System.out.print("-");
            }
            System.out.println();
        }
    } 
```

这就是它打印的内容

```
 -----13579-----
    ----13579----
    ---13579---
    --13579--
    -13579- 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T16:50:16.653

你有正确数量的破折号，你只是没有正确打印出数字。让我们来看看为什么会这样：

哪个循环打印出数字？第二个嵌套 for 循环。

它有什么作用？它打印出`j`范围`j`从`1`到的位置，`9`并`j`在每次循环迭代时递增 2。换句话说，`1, 3, 5, 7, 9`，这在您的输出中得到确认

你想让它做什么？好吧，让我们看看所需的输出。您想在~~*第一*~~行`1`打印*一次。*您想在下~~*第三*~~行打印*三次*。你想在那之后的~~*第五*~~行打印*五次。*等等。*`3`**`5`***

 ***你注意到一个模式吗？您希望我们上面提到的那个循环打印*相同*的数字（`1`, `3`, `5`, ... `i`）作为次数（`1`, `3`, `5`, ... `i`）。

**编辑**哎呀，我实际上误读了输出。我的回答仍然与以前非常相似，但我谎报了你在打印哪一行。它仍然是`3` *三倍*，`5` *五倍*，但不同的线条。从我的解决方案跳到实际解决方案的最简单方法是注意在偶数行上......你什么都不做。你甚至可以这样写你的解决方案。

另一个提示是，您应该只专注于将每行上的数字和破折号分开。当您修复每行上的数字时，您可能会搞砸破折号的数量，但随后您会意识到如何轻松修复破折号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-15T16:00:30.563

这些 for 循环

```
for(int i=1;i<=9;i+=2)
{
    for(int b=9;b>=i;b-=2)
    {
        System.out.print("-");
    }
    for(int j=1;j<=i;j++)
    {
        System.out.print(i);
    }
    for(int b=9;b>=i;b-=2)
    {
        System.out.print("-");
    }
    System.out.println();
} 
```

打印

```
-----1-----
----333----
---55555---
--7777777--
-999999999- 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-18T14:06:01.283

```
public    class    pattern
{
    public    static    void    main   (    )
    {
        for    (int   i =  1;i<=9;i+=2)
        {
            for(int b = 9;b>=i;b-=2)
            {
                System.out.print(" ");
            }
            for(int j =1;j<=i;j++)
            {
                System.out.print(i);
            }
            System.out.println();
        }
    }
} 
```***

# vb.net - 一个文本框值大于另一个，避免和哔

> ID：15954196
> 
> 赞同：0
> 
> 时间：2013-04-11T16:35:22.130
> 
> 标签：vb.net, visual-studio-2010, comparison

我在 Visual Basic 2010 中有两个文本框
`Textbox1`
`Textbox2`
现在我希望如果用户在 Textbox2 中输入值（整数），如果值`Textbox2`大于`Textbox1`，那么这将发出哔声并且也避免他这样做
`Example:`如果用户`5`在 Textbox1 中写入并且现在他正在写信，`8`所以`Textbox2`我想用哔哔声忽略它。 我有这段代码，但这不起作用，如果有人帮助我，请：`8``5``Textbox2`

> ```
> Private Sub TextBox2_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox2.KeyPress
> 
>     Dim valx1 As Integer
>     Dim valx2 As Integer
> 
>     valx1 = (Val(TextBox1.Text))
>     valx2 = (Val(TextBox2.Text))
> 
>     If (valx1) > (valx2) Then
>         Beep()
>         e.Handled = True
>     End If
> 
> End Sub 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:16:03.930

此代码将满足您的要求，顺便说一下使用哔哔声提醒用户，会让他/她感到不安。

```
 Private Sub TextBox2_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox2.KeyPress

   if val(TextBox1.Text.trim) > val(TextBox2.Text.trim & e.keychar) then
          Beep()
          e.Handled = True
    end if

End Sub 
```

# c++ - C++ getline(cin, str) 给了我额外的行

> ID：15954198
> 
> 赞同：2
> 
> 时间：2013-04-11T16:35:23.010
> 
> 标签：c++

我是 C++ 的新手。我在窗口 7 中使用 Cygwin 和 eclipse，我正在尝试编写一个程序来要求用户输入一个字符串并打印出来。我有下面的代码。

```
#include <iostream>
#include <string>
using namespace std;

int main() {
    string mystr;
    cout << "What's your name? ";
    getline (cin, mystr, '\n');
    cout << "Hello " << mystr << ".\n";
    return 0;
} 
```

我也尝试：

```
getline(cin, mystr); 
```

他们都给了我一个如下所示的输出。

输出：

```
What's your name? nick
Hello nick
. 
```

为什么句号转到下一行？有人可以告诉我发生了什么并教我如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:47:07.103

In gcc 4.6.3

```
getline (cin, mystr); 
```

and

```
getline (cin, mystr, '\n'); 
```

both are printing the string as you are expecting.

# c# - 使用故事板动画“从右到左”弹出图像

> ID：15954200
> 
> 赞同：1
> 
> 时间：2013-04-11T16:35:27.003
> 
> 标签：c#, .net, wpf, xaml, animation

我找到了一个弹出图像的好例子：http: [//tozon.info/blog/post/2007/10/14/three-ways-to-make-your-wpf-images-pop-out-on-mouseover .aspx](http://tozon.info/blog/post/2007/10/14/three-ways-to-make-your-wpf-images-pop-out-on-mouseover.aspx)

问题是我需要向相反的方向发展。示例中的图像从左到右增长。我希望它长到左侧。

```
<!-- This storyboard will make the image grow to double its size in 0.2 seconds -->
<Storyboard x:Key="expandStoryboard">
  <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
                   To="2"
                   Duration="0:0:0.2" />
  <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
                   To="2"
                   Duration="0:0:0.2" />
</Storyboard>
<!-- This storyboard will make the image revert to its original size -->
<Storyboard x:Key="shrinkStoryboard">
  <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
                   To="1"
                   Duration="0:0:0.2" />
  <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
                   To="1"
                   Duration="0:0:0.2" />
</Storyboard> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:50:04.323

用于通过在后面的代码或XAML中[`RenderTransformOrigin`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransformorigin.aspx)定义原点来使图像从右到左弹出。如果您希望图像从右下角向外扩展，您可能需要使用yOrigin*而*不是。`new Point(1,0.5)``<Image ... RenderTransformOrigin="1,0.5" />``1``0.5`

# php - 使用 twitter search api 在最后时刻发布推文

> ID：15954201
> 
> 赞同：0
> 
> 时间：2013-04-11T16:35:28.977
> 
> 标签：php, api, search, curl, twitter

嗯，我想要做的很明显。我收到如下所示的推文：

```
$options .=  'q='.urlencode($hash_tag);
$options .=  '&page=15';
$options .=  '&rpp=100';
$options .=  '&result_type=recent';

$url = 'https://search.twitter.com/search.atom?'.$options ;

$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
$xml = curl_exec ($ch);
curl_close ($ch);

$affected = 0;
$twelement = new SimpleXMLElement($xml);
foreach ($twelement->entry as $entry) {
    $text = trim($entry->title);
    $author = trim($entry->author->name);
    $time = strtotime($entry->published);
    $id = $entry->id;
    echo '<hr>';

    echo "Yazan : ".$author;
    echo "</br>";
    echo "Tarih : ".date('Ymd H:i:s',$time);
    echo "</br>";
    echo "Tweet : ".$text;
    echo "</br>";
} 
```

正如您可以查看此链接：[linkToTrial](http://filkulak.com/twitter.php?hashtag=D%C3%BCr%C3%BCstOlmamGerekirse)我可以接收推文。但他们对我来说太老了！我想在最后时刻收到推文，至少在最后 5 分钟内。[这里](https://stackoverflow.com/questions/206170/how-can-i-use-the-twitter-search-api-to-return-all-tweets-that-match-my-search-q)说

> 这听起来像是您最终可以做的事情，因为 created_at 是结果集中返回的字段之一。只需进行查询，并仅使用最后 5 秒内的查询。

但是当您查看我的示例时，您会发现我什至没有收到最后一条推文。我在哪里做错了？在哪里？

任何答案将不胜感激。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:16:16.683

您正在使用已弃用的 API (search.twitter.com)，该 API 将于 2013 年 5 月 7 日停止运行——您需要迁移到 v1.1 搜索 API——请参阅[https://dev.twitter.com /docs/api/1.1/get/search/tweet](https://dev.twitter.com/docs/api/1.1/get/search/tweet)获取文档。

看起来您使用此查询获得较旧结果的具体原因是您从第 15 页开始 - 结果集的结尾。最新的推文将位于结果集的开头——第 1 页。

在 API v1.1 中，搜索 API 不再存在分页的概念。相反，您可以使用 since_id 和 max_id 浏览结果集，详情请点击此处：[https ://dev.twitter.com/docs/working-with-timelines](https://dev.twitter.com/docs/working-with-timelines)

# c# - 订阅 Windows Phone UVC 事件，可能吗？

> ID：15954205
> 
> 赞同：1
> 
> 时间：2013-04-11T16:35:51.317
> 
> 标签：c#, windows-phone-7, background-audio

我制作了一个 WP7.1 应用程序，它使用

```
BackgroundAudioPlayer.Instance 
```

play() 和 stop()，并订阅来自

```
BackgroundAudioPlayer.Instance.PlayerState 
```

更新用户界面。我有一个播放按钮，当我单击它时，我会更新 UI 以显示“缓冲”动画，而当 BackgroundAudioPlayer.Instance.PlayerState 更改为 PlayState.Playing 时，我会显示“正在播放”动画。这按预期工作。但是，当按下通用音量控制上的播放时，会显示“已停止”动画，直到 PlayState.Playing 事件将 UI 更新为“正在播放”。

因此，我需要检测何时按下 UVC 上的播放按钮（以显示“缓冲”动画，直到声音开始播放），但我找不到与此相对应的事件，有什么想法吗？

# ios - 手动实例化 ViewController 并推到顶部。好习惯？

> ID：15954206
> 
> 赞同：2
> 
> 时间：2013-04-11T16:35:51.917
> 
> 标签：ios, model-view-controller, uiviewcontroller

我正在做的是这样的：

```
UIViewController *rootController = [[[UIApplication sharedApplication] keyWindow] rootViewController];
AlarmRingViewController *alarmController = [[AlarmRingViewController alloc] init];
[rootController presentViewController:alarmController animated:YES]; 
```

我想要实现的是，将我的 AlarmRingViewController 推到目前正在显示的任何其他控制器之上，并且到目前为止它可以工作。

现在我想知道这是否是一个好习惯：

*   每次应该呈现一个新的 viewController
*   在非 UI 相关的类中这样做？（在我的例子中是 NSTimer 的调度程序）
*   从那里推送新创建的 viewController，顶部有 rootViewController

或者这是否违反了 MVC 模式或 Apple 准则或任何其他内容。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:40:37.433

我个人认为这是丑陋的代码。它很难阅读，也很难调试。将代码拆分一下：

```
UIViewController *rootController = [[[UIApplication sharedApplication] keyWindow] rootViewController];
AlarmRingViewController *alarmController = [[AlarmRingViewController alloc] init];
[rootController presentViewController:alarmController animated:YES]; 
```

在一行中输入这么多内容没有任何好处。

更新：根据您更新的问题：

每次需要时都实例化一个新的视图控制器是没有问题的。这是很常见的。创建一个并缓存它可能是合适的。如果在任何给定时间只显示一个视图控制器，这种优化可能是有意义的，视图控制器经常使用，并且需要大量时间来创建。

视图控制器通常由其他（视图）控制器创建和呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:06:56.147

为什么不直接使用 UINavigationController 作为根视图控制器。这样，您可以这样做：

```
AlarmRingViewController *alarmController = [[AlarmRingViewController alloc] init];
[self.navigationController presentViewController:alarmController animated:YES completion:nil]; 
```

# c++ - 使用 ={} 语法初始化结构时，幕后发生了什么？

> ID：15954208
> 
> 赞同：0
> 
> 时间：2013-04-11T16:35:57.857
> 
> 标签：c++, c++98, aggregate-initialization

*根据评论稍微*编辑调整示例**

 *一些代码然后是问题（只是为了澄清，这是一个 C++ 问题）：

```
#include <cstdio>

struct MYSTRUCT1 {
  int asdf[4];
} MyStruct1;

struct MYSTRUCT2 {
  int asdf[4];
  MYSTRUCT2() : asdf() {}
} MyStruct2;

template <class T>
void test() {
  T blah = {{1,-1,1,-1}};

  for( int ii = 0; ii < 4; ii++ ) {
    printf( "%d ", blah.asdf[ii] );
  }
  printf( "\n" );
}

int main() {
  // Works fine; MyStruct1 doesn't define a constructor
  test<MyStruct1>();
  // Doesn't work; g++ complains I need to use `-std=c++0x`
  // and/or define a constructor that allows the initialization
  // taking place inside `test()`
  test<MyStruct2>();
} 
```

这里有几个问题：

1.  发生了什么神奇的事情，允许`MyStruct1`以这种方式初始化的实例
2.  在 c++98 中有解决方法吗？

作为参考，我试图使用构造函数作为强制堆栈分配的结构为零初始化的一种方式，但我不想禁止这种初始化方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:42:48.333

> 正在发生什么让 MyStruct1 的实例以这种方式初始化的魔法

好吧，本身没有“魔法”。`MyStruct1`是一个聚合类型，但多亏了 ctor，`MyStruct2`它不是。您正在尝试执行聚合初始化，这可能只在聚合类型的对象上成功。

> 在 c++98 中有解决方法吗？

让您的构造函数*完成其工作*并获取初始化所需的参数。

尝试使用构造函数首先对所有内容进行零初始化似乎您在 C 中思考了一半，在 C++ 中思考了一半（与您使用`typedef struct`C++ 几十年来不需要的过时习语相关）。*

# performance - 加入游标查询或两个游标，哪个更快？

> ID：15954210
> 
> 赞同：0
> 
> 时间：2013-04-11T16:35:59.687
> 
> 标签：performance, oracle, join, cursor

我需要一些关于我的游标的建议，预计会针对数百万条记录运行。这是我的光标查询。

```
CURSOR items_cursor IS       -- Brings only records that need to be updated
        SELECT a.*, b.* FROM  
        ( SELECT DataId, Name, VersionNum, OwnerId, SubType, LEVEL Lev FROM DTree 
          START WITH ParentId = startFrom CONNECT BY PRIOR DataId= ABS(ParentId)        -- Brings ABS of ParentId
        )a, 
        (                  
         SELECT o.DataId pDataId, o.Permissions OwnerPerm, p.Permissions PublicPerm FROM DTreeAcl o, DTreeAcl p WHERE
         o.DataId=p.Dataid AND o.AclType=1 AND p.AclType=3 AND (o.Permissions != ownerPerm OR p.Permissions != publicPerm)
        )b        
        WHERE a.Lev >= 1 AND a.Lev <= 3 AND a.DataId = b.pDataId; 
```

在第一个游标内的另一个游标中从第二个表中获取数据比在第一个游标本身中加入所有内容更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:08:50.630

建立一个数据库来加入。在绝大多数情况下，最好让数据库在 SQL 中进行连接，而不是尝试在 PL/SQL 中编写自己的连接。

最好在 PL/SQL 中编写联接的唯一方法是，如果您知道需要嵌套循环联接并且 Oracle 优化器选择了效率低得多的计划。但是，在这种情况下，最好让优化器为您提供所需的计划，而不是在 PL/SQL 中编写嵌套循环连接。

# jquery - jQuery html() 使用 ?_=1365695139815 获取 Javascript (.js)

> ID：15954212
> 
> 赞同：3
> 
> 时间：2013-04-11T16:36:02.310
> 
> 标签：jquery, html-parsing, autoloader

当我得到一个包含`<script src="some-file.js"></script>`如下示例的 url 时：

```
<html>
<script>
$(document).ready(function(){
    $.get('/some-url', function(r) {
        $('#html-container').html(r); // Contains: <script src="some-file.js"></script>
    });
});
</script>

<body>
<div id="html-container"></div>
</body> 
```

这是之前在自动加载中`some-file.js`所说的结果，`/some-url`因为 jQuery 将添加`?_={random number}`到查询字符串中。

导致请求：GET`some-file.js?_=1365695139815`

如何从 html() 解析的自动加载中禁用此随机请求附加？

**@编辑**

由于我无法发出请求，这是因为它们是由 html 解析执行的，在 Brian 的回答下，我找到了这个简单的解决方案：

```
$.ajaxSetup({
    // Enable caching of AJAX responses
    cache: true
}); 
```

在[如何设置缓存中找到：jQuery.get 调用中的 false](https://stackoverflow.com/questions/8841425/how-to-set-cache-false-in-jquery-get-call)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T16:41:28.003

jQuery 附加的查询字符串是 jQuery 缓存 ajax 调用的结果。要禁用此功能，请使用以下命令：

```
$.ajax({
    url: '/some-url',
    cache: true,
    success: function(r) {
        $('#html-container').html(r); // Contains: <script src="some-file.js"></script>
    }
}); 
```

`cache: true`作为重要的部分。

# bash - 如何在 txt 文件中搜索模式并在匹配第一个模式的文件上打印第二个模式匹配的结果？

> ID：15954213
> 
> 赞同：0
> 
> 时间：2013-04-11T16:36:02.813
> 
> 标签：bash, grep, find

有谁知道我如何在 bash 中搜索包含 txt 文件和子目录（我也必须搜索）的目录中的模式 A，然后在匹配模式 A 的文件上，打印匹配的结果模式 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:37:16.750

您可以使用管道链接您的 grep 调用`|`。像这样：

```
grep 'Error' file.txt | grep 'Database' 
```

这个虚构的示例将为您提供文件中与数据库相关的所有错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:16:08.050

```
find <BASEDIR>/ -name "*PATTERN_A*" | xargs grep PATTERN_B 
```

我相信这将实现您正在寻找的东西:)

# php - PHP - 在 foreach 循环中获取总行数

> ID：15954216
> 
> 赞同：0
> 
> 时间：2013-04-11T16:36:11.793
> 
> 标签：php

我正在开发一个网站，需要在 foreach 循环中获取数组的总行数。

这是我的代码：

```
$vr = $_GET['vr'];

$dat = file_get_contents("http://example.com"); //this is a datafeed url. 

$exp = explode("\n", $dat);

foreach ($exp as $val) {

if($vr == $val) {
// here I have the code if string is found in array. They were found, but I want to get how many were found.
} 
```

我尝试了该`count();`功能，但它显示`111111111111111111`

我知道这是可能的，但我不知道如何做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:38:35.017

```
$num = 0;
foreach ($exp as $val) {
    if($vr == $val) {
        $num++;
    }
}
echo $num; 
```

# ms-access - 使用表单在日期范围内运行查询

> ID：15954218
> 
> 赞同：2
> 
> 时间：2013-04-11T16:36:19.703
> 
> 标签：ms-access, ms-access-2007

我有一个 MS-Access 数据库，它从带有 6 个工作表的 Excel 文件中提取信息，所以我得到了 6 个表。我创建了 7 个查询，所有这些查询都从 excel 数据中生成表格，这 7 个中的 6 个对一个项目进行计数，即：

```
SELECT DISTINCT DISPLAYNAME, COUNT(DISPLAYNAME)
FROM [TXFR REC]
GROUP BY DISPLAYNAME 
```

第 7 个查询通过对其中一个表使用左连接将这 6 个表拉到一个报表表中，其中与所有其他表的连接是 DISPLAYNAME。

我创建了一个`Form`带有 4 个按钮和两个日期框，一个开始日期和一个结束日期。我想要做的是以下内容：

1.  选择开始日期
2.  选择结束日期
3.  按我通过调用步骤 1 和 2 中的日期范围指定的顺序运行 7 个查询的按钮 ** 这是我卡住的地方：我不知道如何在查询中强制使用此日期范围 **
4.  运行报告
5.  导出报告
6.  关闭表格

日期框设置为常规日期，用于它们的方法是 GetDates，因此您只需单击该框，日历就会弹出并选择您的日期。

我确实在这里看到了这篇文章，但没有很好地关注： [日期范围表格](https://stackoverflow.com/questions/1228530/displaying-totals-within-a-specified-date-range-in-microsoft-access)

以下是用户建议的测试查询中的文本，格式由回答者建议：

```
SELECT [NO ADMITTING DX (HEALTH ISSUE)].PHYSICIANDISPLAYNAME, Count([NO ADMITTING DX (HEALTH ISSUE)].PHYSICIANDISPLAYNAME) AS CountOfPHYSICIANDISPLAYNAME INTO NO_ADMIT_DX_COUNT
FROM [NO ADMITTING DX (HEALTH ISSUE)]
WHERE ((([NO ADMITTING DX (HEALTH ISSUE)].PHYSICIANDISPLAYNAME) Is Not Null) And (([NO ADMITTING DX (HEALTH ISSUE)].AdmitDtm) Between Forms!PRINT_REPORT![START DATE] And FORMS!PRINT_REPORT![END DATE]))
GROUP BY [NO ADMITTING DX (HEALTH ISSUE)].PHYSICIANDISPLAYNAME; 
```

** 此查询现在可以正常工作 **

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:42:56.820

对于您的查询，请使用类似的内容。

```
 SELECT  DISPLAYNAME, COUNT(DISPLAYNAME)
 FROM [TXFR REC] 
  WHERE [TXFR REC].yourDate BETWEEN [Forms]![yourFormName]![yourStartDate] 
      AND [Forms]![yourFormName]![yourEndDateField]
GROUP BY DISPLAYNAME 
```

您想要依赖日期范围的所有查询都应具有这些参数。这样做的好处是您可以为表单上的两个日期字段指定一个 datePicker。如果您执行以下操作，它仍然可以正常工作：

```
 SELECT  DISPLAYNAME, COUNT(DISPLAYNAME)
 FROM [TXFR REC] 
  WHERE [TXFR REC].yourDate BETWEEN [Please Enter a Start Date]
      AND [Please Enter an Ending Date]
GROUP BY DISPLAYNAME 
```

不过，这都是偏好。只需在上面放一个按钮，然后转到向导中的 Misc 并选择`run query`是否需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:51:31.363

编辑查询以依赖 where 子句中表单的值：

`[Forms]![`*表单名称*`]![`*表单控件*`]`

这是一个[屏幕截图示例](http://www.techonthenet.com/access/queries/filter1.php)

但是，这将使您的查询仅适用于表单。您可能会考虑复制您的查询并重命名和编辑副本以反映其局限性。

# jquery - jQuery - 函数发生得太快或回调过程混乱

> ID：15954220
> 
> 赞同：1
> 
> 时间：2013-04-11T16:36:36.680
> 
> 标签：jquery

尝试用`.slideUp()`清除元素`.html('')`，然后重新填充元素和`.slideDown()`。简单的？是的。在职的？不。

在向上滑动完成之前重新填充元素。从本质上讲，你看到魔术师在幕布到位之前就离开了，这破坏了表演。

**jsFiddle**：http: [//jsfiddle.net/Zt6gw/](http://jsfiddle.net/Zt6gw/)

**jQuery**

```
$('#oh_sort').change(function(){
    $('#oh_list_cont').slideUp(1000);
    $('#oh_list_cont').promise().done(ohReset());
    $('#oh_list_cont').slideDown(1000);
});

function getOpenhouse(){
    var data = $('#oh_sort').val();
    if(data == 'date'){
        $('#oh_list_cont').append('WOOOOOOORK!');
    }
    if(data == 'price'){
        $('#oh_list_cont').append('Please?!');
    }
    if(data == 'city'){
        $('#oh_list_cont').append('OMGWTFBBQ');
    }
}

function ohReset() {
    $('#oh_list_cont').html('');
    getOpenhouse();
} 
```

我已经尝试使用 .slideUp() 内置的 [complete]（回调？）函数，但是没有填充任何内容，并且第二个幻灯片动画不会触发。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T16:38:33.757

在这里，您`ohReset()`立即调用而不是将其作为回调传递：

```
$('#oh_list_cont').promise().done(ohReset()); 
```

它应该是：

```
$('#oh_list_cont').promise().done(ohReset); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:50:35.863

```
$( '#oh_sort' ).change( function()
{
    $( '#oh_list_cont' ).slideUp( 1000, function()
    {
        $( '#oh_list_cont' ).promise().done( ohReset() );
    } );
    $( '#oh_list_cont' ).slideDown( 1000 );
}); 
```

像这样的东西？

# .net - EntityFramework 类型初始化异常

> ID：15954222
> 
> 赞同：1
> 
> 时间：2013-04-11T16:36:42.197
> 
> 标签：.net, entity-framework, app-config, typeinitializeexception

这可能是下面这些问题的重复。但是，使用那里提供的答案我仍然无法解决问题。

[问题](https://stackoverflow.com/questions/11269822/the-type-initializer-for-threw-an-exception-in-entity-framework-model)

我的问题似乎与此几乎相同。我有一个类库来存储两个 .edmx 文件，然后由其他两个类库引用。我想在单元测试项目中测试数据库查询，但总是收到以下错误。

“类型初始化程序引发异常...System.TypeInitializationException：在应用程序配置文件中找不到名为'MyModel'的连接字符串”其中'MyModel'显然是指两个.edmx模型中的任何一个。

根据之前对该主题的回答，我已将 App.config 文件从我的 EntityFramework 项目复制到两个类库项目和单元测试项目，但仍然收到错误消息。

任何帮助，将不胜感激。如果有什么不同，我使用的是 VS2012 和 .Net 4.5。

谢谢理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:42:59.787

将 app.config 放在类库中并不能解决问题，因为类库不是启动应用程序，它们只是被引用，因此 app.config 永远不会被实际读取。测试时，您应该在构建连接字符串时将其直接传递给 DbContext。

# php - Symfony2 - 显示动态可选角色

> ID：15954224
> 
> 赞同：4
> 
> 时间：2013-04-11T16:36:53.467
> 
> 标签：php, symfony, sonata-admin, sonata-user-bundle

我正在使用 Symfony2 和奏鸣曲。
我的应用程序中有一个部分列表，我想向我的用户授予访问权限。

例子：

*   John 应该可以访问 section1 和 section3
*   Bob 应该可以访问 section2 和 section3

所以我创建了 3 个角色，我可以附加到用户/组（通过奏鸣曲）

*   ROLE_SECTION1
*   ROLE_SECTION2
*   ROLE_SECTION3

但是当我创建新部分时，我希望在管理员中自动列出相关角色
（无需每次都在我的 中声明它们`security.yml`）

我看到 sonata-admin-user 在使用角色安全处理程序时会这样做，
但我不知道该怎么做。

最后，问题很简单，如下：

如何将一些动态可选角色添加到我的 Sonata 用户管理捆绑编辑器列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T14:46:31.480

首先，您可以从数据库中加载用户和组。请参阅[Symfony2 食谱 Load user from database](http://symfony.com/doc/current/cookbook/security/entity_provider.html)。然后在每个部分的控制器中：

```
if ($this->securityContext->isGranted('Role_section1') === false) {
    echo 'forbidden';
} 
```

# regex - 使用正则表达式创建分隔文本

> ID：15954229
> 
> 赞同：1
> 
> 时间：2013-04-11T16:37:11.550
> 
> 标签：regex, excel, ms-word

我有一个词汇表，其中的条目以粗体文本给出，解释性文本是常规字体。我想做的是在每个粗体文本字符串之后添加一个逗号（星号或任何其他标点符号），这将使我能够将词汇表转换为 Excel 中的逗号分隔文本。有没有办法在 Word 的查找和替换对话框中使用正则表达式来做到这一点，所以我可以在词汇表中的条目的单词或短语的末尾得到一个逗号。以下是词汇表中的一个条目作为示例：

**在生效时废除** ......常规字体条目的内容......

该条目是粗体短语，与之相关的解释以常规文本给出。

在尝试了表达式**<[A-Za-z\,.-)(/\?! ]{1,}>** Jerry 在查找框中建议和**^&，**在 MS Word 中的替换框中，我得到了想要的结果对于后跟分节符的粗体短语，例如标题和标题：

* * *

[http://img811.imageshack.us/img811/6338/frontpagep.jpg](http://img811.imageshack.us/img811/6338/frontpagep.jpg)

* * *

但是词汇表条目不会发生任何变化，因为它们后面是条目的内容，后面没有分节符。这是词汇表中的一个示例，显示了词汇表条目的特征布局：

* * *

[http://img571.imageshack.us/img571/6558/samplefromtheglossary.jpg](http://img571.imageshack.us/img571/6558/samplefromtheglossary.jpg)

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:45:54.380

Some simple searching around shows the following documents that apply to older versions of Word- up to 2002 at least.

[office support document](http://office.microsoft.com/en-us/support/add-power-to-word-searches-with-regular-expressions-HA001087305.aspx?CTT=5&origin=HA001087304)

Note that Word's implementation of Regex is not very conformant to other people's implementations.

I didn't see a doc for a more recent version of Word. The Search and Replace in Visual Studio (I think this works in the free version too), or in an IDE like Eclipse, does support Regex, so you have lots of non-Word options that might work as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:44:54.267

使用通配符，将格式字体设置为粗体。对于搜索，输入`<*>`。对于替换，输入`^&,`。[图片值一千个剧本](http://i.stack.imgur.com/vCJyt.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:14:09.343

你可以试试这个：

`<[A-Za-z\,\.\-\)\(\/\?\! ]{1,}>`

而不是之前建议的发现`<*>`乔治？

**在新的 OP 编辑​​之后：**

您可以尝试将其放入宏中：

```
Sub CommaAdder()
    Selection.Find.ClearFormatting
    Selection.Find.Font.Bold = True
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "<[A-Za-z]@>"
        .Replacement.Text = "^&,"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
    With Selection.Find
        .Text = ",([\)])"
        .Replacement.Text = "\1,"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
    With Selection.Find
        .Text = ",([\-\?\/\!\.\, ])"
        .Replacement.Text = "\1"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
    With Selection.Find
        .Text = "([A-Za-z]@ )"
        .Replacement.Text = "\1,"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
    With Selection.Find
        .Text = "( \,)([A-Za-z]@)"
        .Replacement.Text = ", \2"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
    With Selection.Find
        .Text = "\,\("
        .Replacement.Text = "("
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
    With Selection.Find
        .Text = "\, "
        .Replacement.Text = " "
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
    With Selection.Find
        .Text = " \,"
        .Replacement.Text = ", "
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
    Selection.Find.Execute Replace:=wdReplaceAll
    End With
End Sub 
```

我不知道如何编写宏，但我记录了一个替换来构建它，如果你明白一点，有 3 个替换一个接一个地进行。第一个查找所有粗体单词并在它们之间放置一个逗号，即使有`)`or`.`等​​。第二个专门查找我刚刚提到的删除该逗号的实例，以及我们有一个逗号后跟一个粗体的实例white space `,`，除了`,)`在最后一个替换中解决的部分之外，它用代替替换它`),`。

问题是，如果你有类似的东西：

> **这是大胆的**，但不是这个

`bold`之间的空白`but`也具有`bold`格式，它将在第二次替换时被删除。如果有一种方法可以找到部分粗体和部分非粗体的文本，那么就不会有任何问题。我正在尝试寻找解决方案，但如果此代码有任何问题，请告诉我。如果没有像这样粗体格式的空格，就不会有任何问题！

**重新编辑：**这现在也适用于粗体空间！虽然不是很整齐...

# c# - The variable name '@' has already been declared

> ID：15954236
> 
> 赞同：0
> 
> 时间：2013-04-11T16:37:25.150
> 
> 标签：c#, asp.net, sql-server

Part of our solution is a page that displays company-specific information using an ASP `Gridview`. Our method of constructing the SQL that feeds the `Gridview` is by using C# to build a custom `SELECT` statement based on a series of user inputs.

Once the user applies their filters through a `button click`, C# loops through all of their selections (`check boxes and text boxes`) and then propagates those selections to a separate method which constructs a `WHERE` clause to append to a simple `SELECT` statement. We use a `Table-Valued Function in the FROM statement`, and the only input parameter is from the `Querystring` and this does not change throughout the process.

Once the query has been assembled using C#, we apply this query to the `SqlDataSource` as the `Select Command`. However, we have recently discovered a very bizarre SQL error that we haven’t seen before:

**Errors :**

`"The variable name '@' has already been declared`.

`Variable names must be unique within a query batch or stored procedure.`"

We aren’t declaring any variables in our SQL. As stated above, the only input parameter comes from the `Querystring`, and we access this parameter using both `QueryStringParameters` in the `ASP:SqlDataSource` on the ASP side and “<code>int.Parse(Request.QueryString["id"]).ToString()” on the C# side while constructing the SQL query.

After researching this error, I have yet to find an instance where the variable declaration is empty. Most people are getting errors similar to this when they have declared a variable such as `'@email' or '@address'` twice. We have no double declarations, and the fact that the variable in the error is not defined is causing a massive headache.

Has anyone seen anything like this before or have any suggestions on how to further debug?

I'll post some code if need be, but we are mostly interested to see if anyone has seen an error like this before.

**Code**:

```
string MainQueryStr = ResultsPages.SearchString(SearchVariables(), Request,
                ProjectsSqlds, 0, "SELECT DISTINCT dbo.{0}.* FROM dbo.{0}(" + int.Parse(Request.QueryString["id"]).ToString() + ")", 
                "getXyzById", "AbcId");
        StringBuilder SearchQueryStr = new StringBuilder();
        SearchQueryStr.Append(MainQueryStr);
        SearchQueryStr.Append(" ORDER BY AbcName");
        ProjectsSqlds.SelectCommand = SearchQueryStr.ToString(); 
```

The search string function is a 500 line method that we can't post right now. It is used all over our solution and works as it should. It stitches together strings to create the query.

This is how the SearchString function appends the parameters:

```
 l.Add(ResultsPages.NewSearchQueryString(ABCFiltersTxBx, SearchQueryStringVariableType.String,
            "{1}.AbcID IN (" + ABCFiltersTxBx.Text + ")")); 
```

Where the ABCFiltersTxBx is parsed into a comma separated string.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:05:14.600

I should chime in as the supervisor in question here:

OK, so we figured out what was happening.

What we didn't realize was that the SQLDataSource was taking our appended WHERE clauses and using them as SelectParameters. Each parameter we wanted to add to the query that would ultimately feed the SQLDS was then being added as a SelectParameter without us realizing it, and because we hadn't made any explicit parameter declarations, the parameters were added with just "" as the name, leading to the error of "'@' has already been declared".

The most embarrassing part of this whole thing is that our API has already accounted for Parameter Names, but we had unwittingly excluded this part. Thank you all very much for reading and attempting to help. We thoroughly appreciate you taking your time to help us brainstorm our solution over here.

So I suppose the take-home of this whole error is in 2 parts:

1.  Know your API. When you realize that you screwed it up on your own, graciously thank those that took the time to help you here on StackOverflow (or wherever you seek help), as their time is valuable as well.

2.  "'@' is already declared" would indicate that you have parameters being declared without a name, so when debugging, look through the SQLDS you are using and find any parameters that haven't been explicitly named.

Again, thank you to all who read and offered to help. It's greatly appreciated.

# layout - 自动填充剩余区域的动态高度指令

> ID：15954238
> 
> 赞同：1
> 
> 时间：2013-04-11T16:37:33.143
> 
> 标签：layout, angularjs, html, angularjs-directive

是否有任何好的指令实现动态改变元素的高度以填充剩余容器的高度？

在我的布局中，我的标题（实际上是菜单）固定高度（以像素为单位）、内容区域（可能溢出窗口高度以上，因此应该出现滚动条）和固定高度的粘性页脚。在内容区域的左右两侧也可以有面板

所以是这样的：

```
┌──────────────────┐
│       Header     │ ~100px
├─┬──────────────┬─┤
│P│             ▲│P│
│a│   Content   ▒│a│ fill remaining area, with scroll bars
│n│             ◙│n│
│e│             ▒│e│
│l│             ▼│l│
├─┴──────────────┴─┤
│       Footer     │ ~100px
└──────────────────┘ 
```

我试过这样的解决方案：

1.  使用高度：100%。但是由于页眉/页脚以像素为单位，因此很难以百分比来衡量它们的高度，这个解决方案并没有解决问题。
2.  使用诸如“display: table-row”之类的 haks 不允许内容区域有滚动条

由于它是网站的常见布局，因此有很多使用 JS 的解决方案，但大多数都不是通用的 - 或者不可能有滚动条，或者面板是不可能的。

所以我理解，唯一的解决方案是使用 JavaScript 来调整 en 元素的高度，所以最好的放置位置是指令。

有人对此任务有一些指令的实施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:37:33.143

目前我有这个解决方案：

[http://plnkr.co/edit/Nimw68KXJRCU3RZzu3Bc?p=preview](http://plnkr.co/edit/Nimw68KXJRCU3RZzu3Bc?p=preview)

指令`fill`以这种方式工作::

1.  计算包含当前元素的所有元素的`padding-bottom`++`margin-bottom``border-bottom-width`
2.  在当前元素下方和所有元素下方添加所有元素的高度，包含当前元素
3.  `offsetTop`从元素的窗口高度和先前计算的结果中减去
4.  将元素的高度设置为结果值

所以高度计算的想法（实际上是当前元素下方区域的高度）是：

```
╔══════════════════════════╗
║                          ║
║    ╔═════════════╗       ║
║    ║ Element     ║       ║
║    ║ to autofill ║       ║
║    ...............       ║
║    ╚═════════════╨───────╫─────────
║                          ║         + margin/padding
║  ╔════════════════════╥──╫─────────
║  ║ some element       ║  ║
║  ║   below            ║  ║         + height
║  ║                    ║  ║
║  ╚════════════════════╨──╫─────────
║                          ║         + margin/padding
╚══════════════════════════╨───────── 
```

有一些限制：

1.  我假设填充、边距、边框的宽度以像素为单位指定（从其他单位转换似乎非常复杂）
2.  我没有在除 Chrome 之外的其他浏览器上测试过它。

欢迎改进！

# android - myLocation.getBearing() 返回 0.0

> ID：15954243
> 
> 赞同：2
> 
> 时间：2013-04-11T16:37:47.530
> 
> 标签：android, android-maps-v2, bearing

我需要经常检查手机的方位，这样我才能旋转地图，使其跟随用户方向。

所以，我打电话`map.getMap().setMyLocationEnabled(true);`

在后台线程中，我每 2 秒检查一次：

```
currentBearing = map.getMap().getMyLocation().getBearing(); 
```

但是，无论如何，这总是返回 0.0

此外，当我在使用 Google 地图应用程序时旋转设备时，它会完全按照我的意愿旋转地图。

我究竟做错了什么？

旁注：在运行 4.0.4 的三星 Galaxy S II 和运行 4.2.2 的 Nexus 4 上测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:55:12.880

看看这个例子。它使用位置侦听器和 LocationManager 更新每个 xxxx 毫秒

[http://randamblings.wordpress.com/2010/04/06/day-2-mapviews-and-locations/](http://randamblings.wordpress.com/2010/04/06/day-2-mapviews-and-locations/)

# node.js - 使用 Node.JS 下载文件时出现奇怪的错误

> ID：15954249
> 
> 赞同：0
> 
> 时间：2013-04-11T16:38:13.440
> 
> 标签：node.js, download, express, mongoose

这是 Node.JS 代码，它有两个部分。第一个在主服务器文件中：

```
app.get('/download/:photo', function (req, res){ 

   dbs.imagenschema.find({ _id: req.params.photo }, function (err, imagen){

     if (err) throw assert.ifError(err);;

     var file = __dirname + '/public/users/' + imagen.auid + '/' + imagen.name;

     var filename = path.basename(file);
     var mimetype = mime.lookup(file);

     res.setHeader('Content-disposition', 'attachment; filename=' + filename);
     res.setHeader('Content-type', mimetype);

     var filestream = fs.createReadStream(file);
     filestream.pipe(res);

   });

}); 
```

另一部分是`dbs.imagenschema`，但那部分非常简单，它只是从`dbs`模块导出的图像的架构。

这是一个按钮，当被点击时，下载开始：

```
<a href="/download/<%= photo._id %>">
  <button class="btn btn-inverse"><i class="icon-download-alt icon-white"></i>  Download</button>
</a> 
```

但是，当我单击它时，我收到此错误：

```
TypeError: Cannot read property 'background' of null
  at eval (eval at <anonymous> (/root/pixgalery/node_modules/ejs/lib/ejs.js:234:12), <anonymous>:30:4196)
  at /root/pixgalery/node_modules/ejs/lib/ejs.js:239:15
  at Object.exports.render (/root/pixgalery/node_modules/ejs/lib/ejs.js:277:13)
  at View.exports.renderFile [as engine] (/root/pixgalery/node_modules/ejs/lib/ejs.js:303:22)
  at View.render (/root/pixgalery/node_modules/express/lib/view.js:75:8)
  at Function.app.render (/root/pixgalery/node_modules/express/lib/application.js:500:10)
  at ServerResponse.res.render (/root/pixgalery/node_modules/express/lib/response.js:717:7)
  at /root/pixgalery/app.js:181:15
  at Promise.<anonymous> (/root/pixgalery/db.js:237:27)
  at Promise.<anonymous> (/root/pixgalery/node_modules/mongoose/lib/promise.js:133:8) 
```

所以，我认为是因为这个：

```
app.get('/:user/:id', function (req, res){

  dbs.getimage(req.params.id, req.params.user, function (user, img, fav, comments){

    if (img.type == 'music') {

      res.render('music.ejs', {

            user: user,
            photo: img,
            req: req.session.user,
            fav: fav,
            comments: comments

        });

    } else{

      res.render('photo.ejs', {

            user: user,
            photo: img,
            req: req.session.user,
            fav: fav,
            comments: comments

      });

    }

  });

}); 
```

也许服务器认为这`/download/fooid`是对我上面编写的代码的请求，因为`/download/fooid`它不会发送任何带有 EJS 文件的响应，因此不可能出现这样的错误。有什么解决办法吗？

谢谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:02:47.660

您必须确保在`/download/:photo`路由之前声明`/:user/:id`路由，否则后者也会*匹配*，`/download/fooid`认为这`download`是用户参数并且`fooid`是`id`参数（使用Express，匹配按声明顺序发生：匹配请求的第一个路由将获得处理它）。

所以：

```
// first this...
app.get('/download/:photo', ...);

// ...and then this.
app.get('/:user/:id', ...); 
```

# coldfusion - cfthread 的间歇性问题

> ID：15954255
> 
> 赞同：1
> 
> 时间：2013-04-11T16:38:37.820
> 
> 标签：coldfusion, timeout, cfthread

我发现[了这个错误报告](https://bugbase.adobe.com/index.cfm?event=bug&id=3498550)。问题是，“这就是发生在我身上的事吗？”。

我有几种情况会做这种事情。

```
<cfthread name="thread1" action="run">
code for thread1
</cfthread>

<cfthread name="thread2" action="run">
code for thread2
</cfthread> 
```

下一个将有一个实际名称。

```
<cfthread name="CIMSThread" action="run">
code for CIMSThread
</cfthread>

<cfthread name="thread1,thread2,CIMSThread" action="join"></cfthread> 
```

每隔一段时间，我就会遇到这些异常。

```
"Error","cfthread-638","04/10/13","15:14:14",,"CIMSTHREAD: null"
"Error","jrpp-1215","04/10/13","15:14:22","DWQueries","Error Executing Database 
Query.<br><b>Query Of Queries runtime error.</b><br>  
Table named CIMSThread.CIMSData was not found in memory.  etc" 
```

当它第一次发生时，我再次运行了适用的报告并在不同的thead上得到了相同类型的错误，最终让它成功运行而无需更改任何代码或数据。

当它第一次发生时，我还认为线程中可能发生了一些不好的事情会导致它崩溃，所以我做了一些事情来强迫它发生。但是，当我检查异常日志时，该线程中的错误出现了。在这些情况下，异常日志会显示这篇文章中的内容。

我们正在运行版本 9,0,1,274733 并打开了监控。

我是否受到报告的错误的影响，或者这可能是其他原因？

**回复评论**

我无法随意重现该问题。在与我的管理员协商后，我们关闭了监控，但这些页面并没有经常运行。如果错误暂时没有出现，则不一定能证明什么。

有问题的线程包含长时间运行的查询。我刚刚想到的是，有一个非常常用的页面从未引起过问题。好页面和问题页面之间有两个区别。好的页面只运行了两个线程并将它们连接起来。问题页面运行两个以上。此外，好页面上的查询不会花费很长时间来执行。

**对于那些建议超时的人，不是**

这是一些代码。查询运行大约需要 4 秒。

```
<cfthread name="ThreadWithTimeOut" action="run">
<cfquery name="thread.x" datasource="dw" timeout="1">
sql deleted
</cfquery>
</cfthread>
<cfthread action="join" name="ThreadWithTimeOut"></cfthread>
<cfdump var="#ThreadWithTimeOut.x#" metainfo="no"> 
```

异常日志显示：

```
"Error","cfthread-6","04/16/13","14:19:15",,"THREADWITHTIMEOUT: 
Error Executing Database Query. ** 
Error ** (11319) [Red Brick Warehouse JDBC Driver] : 
Query timeout (1 seconds) has expired."
coldfusion.tagext.sql.QueryTag$DatabaseQueryException: Error Executing Database Query. 
```

和这个：

```
"Error","jrpp-238","04/16/13","14:19:15","Dan",
"Element X is undefined in THREADWITHTIMEOUT. 
```

这是一组不同的例外。以前的说线程是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:17:11.303

看看你越来越仔细的错误：

```
"Error","cfthread-638","04/10/13","15:14:14",,"CIMSTHREAD: null"
"Error","jrpp-1215","04/10/13","15:14:22","DWQueries","Error Executing Database 
Query.<br><b>Query Of Queries runtime error.</b><br>  
Table named CIMSThread.CIMSData was not found in memory.  etc" 
```

从那个错误我只能假设（因为你没有在你的问题中提供*任何*实际代码）CIMSTHREAD 中的代码引发了一个错误，导致线程崩溃并且不返回任何数据。

同样从错误（和您的问题）中，我可以推断出您的线程正在查询数据库并将其传回。

现在我个人不知道为什么你要使用线程来查询你的数据库。如果您因为查询需要一段时间来执行而需要求助于它，那么我的朋友，您会遇到更大的问题。我会将针对数据库运行的查询放在附加到数据库本身的 ide 中。看看您是否需要添加索引或以某种方式使用查询，以便它更快地返回。

底线...我认为您的问题不是 cfthread 问题，而是您的查询的超时问题。

# google-app-engine - 在事先不知道大小的情况下从 Google Blobstore 获取 blob

> ID：15954258
> 
> 赞同：3
> 
> 时间：2013-04-11T16:39:02.697
> 
> 标签：google-app-engine, blobstore, gae-eclipse-plugin

我需要以编程方式从 Blobstore 中获取一个 blob，而事先不知道大小。有谁知道这是怎么做到的吗？

我试过使用

```
BlobstoreService blobStoreService = BlobstoreServiceFactory.getBlobstoreService();
byte[] picture = blobStoreService.fetchData(blobKey, 0, Integer.MAX_VALUE); 
```

但我收到一个错误，因为（至少看起来）`Integer.MAX_VALUE`太大了。

```
java.lang.IllegalArgumentException: Blob fetch size 2147483648 it larger than maximum size 1015808 bytes.
at com.google.appengine.api.blobstore.BlobstoreServiceImpl.fetchData(BlobstoreServiceImpl.java:250) 
```

那么有谁知道如何正确地做到这一点？另外，如果您可以顺便告诉我，将相同的图像作为“jpeg”还是“png”放入 blobstore 更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:59:01.080

希望这会有所帮助，这是我一段时间以来一直这样做的方式：

```
 BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
        BlobKey blobKey = new BlobKey(KEY);

        // Start reading
        ByteArrayOutputStream out = new ByteArrayOutputStream();

        long inxStart = 0;
        long inxEnd = 1024;
        boolean flag = false;

        do {
            try {
                byte[] b = blobstoreService.fetchData(blobKey,inxStart,inxEnd);
                out.write(b);

                if (b.length < 1024)
                    flag = true;

                inxStart = inxEnd + 1;
                inxEnd += 1025;

            } catch (Exception e) {
                flag = true;
            }

        } while (!flag);

        byte[] filebytes = out.toByteArray(); 
```

我曾经使用：

```
BlobInfo blobInfo = blobInfoFactory.loadBlobInfo(blobKey);
filesize = blobInfo.getSize(); 
```

获取大小，但由于某种原因，有时此信息为空。

也许这一切都可以给你一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-22T08:27:22.303

```
def blob_fetch(blob_key):
  blob_info = blobstore.get(blob_key)
  total_size = blob_info.size
  unit_size = blobstore.MAX_BLOB_FETCH_SIZE
  pos = 0
  buf = cStringIO.StringIO()
  try:
    while pos < total_size:
      buf.write(blobstore.fetch_data(blob_key, pos, min(pos + unit_size - 1, total_size)))
      pos += unit_size
    return buf.getvalue()
  finally:
    buf.close() 
```

在`MAX_BLOB_FETCH_SIZE`文档中并不明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T18:44:31.700

在 Python 中：

```
from google.appengine.ext.blobstore import BlobInfo
from google.appengine.api import blobstore
import cStringIO as StringIO

blobinfo = BlobInfo.get(KEY)

offset = 0
accumulated_content = StringIO.StringIO()
while True:
  fetched_content = blobstore.fetch_data(
      blobinfo.key(),
      offset,
      offset + blobstore.MAX_BLOB_FETCH_SIZE - 1)
  accumulated_content.write(fetched_content)
  if len(fetched_content) < blobstore.MAX_BLOB_FETCH_SIZE:
    break
  offset += blobstore.MAX_BLOB_FETCH_SIZE 
```

# drupal-7 - 未调用drupal 7表单主题功能

> ID：15954259
> 
> 赞同：0
> 
> 时间：2013-04-11T16:39:03.987
> 
> 标签：drupal-7, drupal-theming, drupal-fapi, hook-theme

我正在尝试在自定义模块中为简单表单注册主题函数，但未调用主题函数。我只是得到基本形式。

这是我的 hook_theme()：

```
function kss_membership_theme($existing, $type, $theme, $path){
    $items = array();
    $items['kss_membership_payment_form'] = array(
        'render element' => 'form',
    );
    return $items;
} 
```

对于这种形式：

```
/**
 * Returns the form for the second page of the payment process
 */
function kss_membership_payment_form($form, &$form_state) {
  $form['description'] = array(
    '#type' => 'item',
    '#title' => t('We currently accept Paypal payments'),
  );

    $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Submit'),
    '#submit' => array('kss_membership_payment_form_submit'),
  );

  $form['#theme'] = array('theme_kss_membership_payment_form');
  return $form;
} 
```

这是主题功能：

```
function theme_kss_membership_payment_form($variables) {
    // Isolate the form definition form the $variables array
    $form = $variables['form'];

    $output = '<h2>' . t('Please enter your information below') . '</h2>';
            $output .= '<div id="personal_details">';

    $output .= drupal_render($form['description']);
    $output .= drupal_render($form['submit']);
    // Additional template output goes here....
    $output .= '</div>';

    $output .= drupal_render_children($form);
    return $output;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T03:26:54.817

您非常接近解决方案，只有一个问题存在。

主题调用是错误的

$form['#theme'] = array('theme_kss_membership_payment_form');

你需要打电话

$form['#theme'] = array('kss_membership_payment_form');

之后，您必须从管理员 => 配置 => 性能 => 清除缓存按钮中清除缓存。

```
/**
 * Returns the form for the second page of the payment process
 */
function kss_membership_payment_form($form, &$form_state) {
  $form['description'] = array(
    '#type' => 'item',
    '#title' => t('We currently accept Paypal payments'),
  );

    $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Submit'),
    '#submit' => array('kss_membership_payment_form_submit'),
  );

  $form['#theme'] = array('kss_membership_payment_form');
  return $form;
} 
```

# php - 正则表达式包含除特定单词之外的所有字符

> ID：15954260
> 
> 赞同：0
> 
> 时间：2013-04-11T16:39:05.033
> 
> 标签：php, regex

我想使用正则表达式过滤掉某种模式。

**给定字符串：** [video url:http:\ddf.sd.com asd:fgfggh] 然后一些文本出现在此处，然后再次出现 [video url:http:\ddf.sd.com asd:fgfggh] 和更多文本。

**必需的 O/P：**然后一些文本再次出现在此处，然后再出现一些文本。

**语言：** PHP

**我尝试了什么：**

```
$text='[video url:http:\\ddf.sd.com asd:fgfggh] Then some text goes here then again [video url:http:\\ddf.sd.com asd:fgfggh] and some more text following this.';
$op = reg_replace('/\[video(.*)\]/','',$text);
echo $op 
```

**我得到的o/p：**

在此之后还有更多文字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:42:32.443

我稍微改变了模式：

```
$text='[video url:http:\\ddf.sd.com asd:fgfggh] Then some text goes here then again [video url:http:\\ddf.sd.com asd:fgfggh] and some more text following this.';
$op = reg_replace('/\[video.*?\]/','',$text);
echo $op; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:44:14.057

假设网址中没有方括号，您可以使用

```
'/\[video[^\]]*\]/' 
```

您的原始正则表达式不起作用，因为`.*`它将贪婪地匹配所有字符，直到最终的`]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:47:37.030

问题是你的模式是贪婪的，`.*`它可以匹配所有的东西。您需要将匹配更改为

```
\[video[^\]]++] 
```

即一个左括号后跟任意数量的不是右括号的项目后跟一个右括号。

所以代码看起来像

```
$op = reg_replace('/\[video[^\]]++]/','',$text); 
```

这种模式也是所有格（`++`），这将大大减少正则表达式引擎中的回溯并加快速度。

# vba - 动态构建 COUNTIFS 公式 - 语法疑难解答

> ID：15954261
> 
> 赞同：2
> 
> 时间：2013-04-11T16:39:05.843
> 
> 标签：vba, excel

非常感谢您过去的所有帮助。我有 2 天的时间来完成我的项目，所以我没有时间陪我。我正在尝试建立一个“COUNTIF”公式。构建这个公式被嵌入在一个循环中，因为它是按列计数条目（即构建小计）。该公式检查以下内容：（1）“iCol”中每一列的非空白条目*也*对应于（2）第 5 列（“vCol”）中的单词“Verification”。

当我将其构建为 COUNTA 函数时，它起作用了。不幸的是，它汇总了所有小计，这就是为什么我需要进行额外检查并使用“COUNTIF”公式（我认为）。

好吧，在过去的 4 个小时里，我已经和一直在进行的故障排除是：

```
For groups = 1 To i ' Level 3 grouping
    Range(Cells(Start(groups), 1), Cells(Finish(groups), 1)).Rows.Group
    For iCol = 24 To 136
         Set rStart = Sheet1.Cells(Start(groups), iCol)
         Set rEnd = Sheet1.Cells(Finish(groups), iCol)
         Set vStart = Sheet1.Cells(Start(groups), vCol) 'verification column
         Set vEnd = Sheet1.Cells(Finish(groups), vCol)  'verification column
         rStart.Offset(-1, 0).Formula = _
         "=COUNTIFS(" & rStart.Address & ":" & rEnd.Address & ",""<>" _ 
         & Chr(0) & "," & vStart.Address & ":" & vEnd.Address & ",""Verification"")"

         ' old formula worked... "=COUNTA(" & rStart.Address & ":" & rEnd.Address & ")"
    Next
Next 
```

我继续收到有用的“对象/应用程序错误”。所以我认为语法是错误的，但对于我的生活，我看不到哪里。我无法将其取出并粘贴到电子表格中以进行故障排除，因为它具有我在代码中设置的变量。有没有人看到任何明显的东西？我会很乐意接受任何建议并衷心感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:55:48.250

如有疑问，请使用立即窗口来调试您的语句。我也这样做了

在下面的示例中，出于***演示***目的，我对`rStart` **(A2)**、`rEnd` **(B2)**、`vStart` **(C2)**和`vEnd` **(D2)的值进行了硬编码**

 *请参阅此屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/WrxNl.png)

您会注意到我们缺少双引号。

现在试试这个

![在此处输入图像描述](https://i.stack.imgur.com/UKlcq.png)*

# hash - 哪种哈希算法最适合 HMAC

> ID：15954265
> 
> 赞同：1
> 
> 时间：2013-04-11T16:39:12.057
> 
> 标签：hash, .net-4.5

哪种哈希算法最适合 HMAC 应用程序？“最佳”是生成哈希的库的强度和可用性的组合。

服务器端堆栈都是 Microsoft，特别是 .NET 4.5。客户端可能是任何客户端，但也可能是 .NET。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:23:52.390

所以 HMAC 是相当标准的，并且可以在[Java](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Mac.html)、[.NET](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmac.aspx)、[PHP](http://php.net/manual/en/function.hash-hmac.php)中使用。如果语言支持散列算法（如果似乎支持在 HMAC 生成中使用它），请快速查看 Java 和 PHP 文档。鉴于此，最强的将是 SHA512。

您还应该查看 NIST 指南和[检查算法](http://csrc.nist.gov/groups/STM/cavp/documents/mac/hmacval.html)。

# ios6 - Monotouch Custon UIPicker 获取所选项目

> ID：15954267
> 
> 赞同：1
> 
> 时间：2013-04-11T16:39:13.667
> 
> 标签：ios6, xamarin.ios, uipickerview, xamarin

这是我的选择器模型类

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace Mobile.iOS
{
    public class PickerDataModel : UIPickerViewModel
    {
        public event EventHandler<EventArgs> ValueChanged;

        public List<string> Items
        {
            get { return this._items;} 
            set { this._items = value;}
        }
        List<string> _items = new List<string>();

        public string SelectedItem
        {
            get { return this._items[this._selectedIndex]; }
        }
        protected int _selectedIndex = 0;

        public PickerDataModel()
        {   
        }

        public override int GetRowsInComponent (UIPickerView picker, int component)
        {
            return this._items.Count;
        }

        public override string GetTitle (UIPickerView picker, int row, int component)
        {
            return this._items[row];
        }

        public override int GetComponentCount (UIPickerView picker)
        {
            return 1;
        }

        public override void Selected (UIPickerView picker, int row, int component)
        {
            this._selectedIndex = row;
            if (this.ValueChanged != null)
            {
                this.ValueChanged (this, new EventArgs());
            }
        }
    }
} 
```

然后我创建一个操作表来显示这样的 UIPicker

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace Mobile.iOS
{
    public class ActionSheetChildAgePicker
    {
        #region -= declarations =-

        UIActionSheet actionSheet;
        UIButton doneButton = UIButton.FromType (UIButtonType.RoundedRect);
        UIView owner;
        UILabel titleLabel = new UILabel ();

        #endregion

        #region -= properties =-
        public UIPickerView AgePicker
        {
            get { return agePicker; }
            set { agePicker = value; }
        }
        //create agepicker
        UIPickerView agePicker = new UIPickerView();
        /// <summary>
        /// The title that shows up for the date picker
        /// </summary>
        public string Title
        {
            get { return titleLabel.Text; }
            set { titleLabel.Text = value; }
        }

#endregion

        #region -= constructor =-

        /// <summary>
        /// 
        /// </summary>
        public ActionSheetChildAgePicker (UIView owner)
        {
            // save our uiview owner
            this.owner = owner;

            // configure the title label
            titleLabel.BackgroundColor = UIColor.Clear;
            titleLabel.TextColor = UIColor.LightTextColor;
            titleLabel.Font = UIFont.BoldSystemFontOfSize (18);

            // configure the done button
            doneButton.SetBackgroundImage(UIImage.FromBundle ("ZurfersMovil-LoginBar-SignButton.png"), UIControlState.Normal);
            doneButton.SetTitleColor(MonoTouch.UIKit.UIColor.White, UIControlState.Normal);
            doneButton.SetTitle ("done", UIControlState.Normal);
            doneButton.TouchUpInside += (s, e) => { actionSheet.DismissWithClickedButtonIndex (0, true); };

            // create + configure the action sheet
            actionSheet = new UIActionSheet () { Style = UIActionSheetStyle.BlackTranslucent };
            actionSheet.Clicked += (s, e) => { Console.WriteLine ("Clicked on item {0}", e.ButtonIndex); };

            //Set picker Model and items
            PickerDataModel agePickerDataModel = new PickerDataModel();
            agePickerDataModel.Items.Add("<2");
            agePickerDataModel.Items.Add("3");
            agePickerDataModel.Items.Add("4");
            agePickerDataModel.Items.Add("5");
            agePickerDataModel.Items.Add("6");
            agePickerDataModel.Items.Add("7");
            agePickerDataModel.Items.Add("8");
            agePickerDataModel.Items.Add("9");
            agePickerDataModel.Items.Add("10");
            agePickerDataModel.Items.Add("11");
            agePickerDataModel.Items.Add("12");
            agePickerDataModel.Items.Add("13");
            agePickerDataModel.Items.Add("14");
            agePickerDataModel.Items.Add("15");
            agePickerDataModel.Items.Add("16");
            agePickerDataModel.Items.Add("17");
            agePicker.Source = agePickerDataModel;
            agePicker.UserInteractionEnabled = true;
            agePicker.ShowSelectionIndicator = true;

            // add our controls to the action sheet
            //actionSheet.AddSubview (datePicker);
            actionSheet.AddSubview(AgePicker);
            actionSheet.AddSubview (titleLabel);
            actionSheet.AddSubview (doneButton);
        }

#endregion

        #region -= public methods =-

        /// <summary>
        /// Shows the action sheet picker from the view that was set as the owner.
        /// </summary>
        public void Show ()
        {
            // declare vars
            float titleBarHeight = 40;
            SizeF doneButtonSize = new SizeF (71, 30);
            SizeF actionSheetSize = new SizeF(owner.Frame.Width, agePicker.Frame.Height + titleBarHeight);
            RectangleF actionSheetFrame = new RectangleF (0, owner.Frame.Height - actionSheetSize.Height
                                                          , actionSheetSize.Width, actionSheetSize.Height);

            // show the action sheet and add the controls to it
            actionSheet.ShowInView (owner);

            // resize the action sheet to fit our other stuff
            actionSheet.Frame = actionSheetFrame;

            // move our picker to be at the bottom of the actionsheet (view coords are relative to the action sheet)
            agePicker.Frame = new RectangleF(agePicker.Frame.X, titleBarHeight, agePicker.Frame.Width, agePicker.Frame.Height);

            // move our label to the top of the action sheet
            titleLabel.Frame = new RectangleF (10, 4, owner.Frame.Width - 100, 35);

            // move our button
            doneButton.Frame = new RectangleF (actionSheetSize.Width - doneButtonSize.Width - 10, 7, doneButtonSize.Width, doneButtonSize.Height);
        }

        /// <summary>
        /// Dismisses the action sheet date picker
        /// </summary>
        public void Hide (bool animated)
        {
            actionSheet.DismissWithClickedButtonIndex (0, animated);
        }

        #endregion  
    }
} 
```

现在在我的视图控制器上，我试图像这样选择项目，但它不起作用，因为我没有 ValueChanged 方法。

```
actionSheetChildAgePicker.AgePicker.ValueChanged += (s, e) => {
                this.txtAge1Room1 = f.ToString ((s as UIPickerView).Select(1,0,true));
            }; 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T22:33:58.697

在 ActionSheetChildAgePicker 中公开您的 agePickerDataModel 并将其公开。

我还将在 ActionSheetChildAgePicker 中公开您的 UIButton doneButton 。

```
 public UIButton doneButton = UIButton.FromType (UIButtonType.RoundedRect); 
```

注释掉 ActionSheetChildAgePicker 中的按钮事件，以便我们可以在视图控制器中处理它...

```
 doneButton.SetTitleColor(MonoTouch.UIKit.UIColor.White, UIControlState.Normal);
    doneButton.SetTitle ("done", UIControlState.Normal);
    //doneButton.TouchUpInside += (s, e) => { actionSheet.DismissWithClickedButtonIndex    (0, true); }; 
```

然后在你的视图控制器中你可以做这样的事情

```
 actionSheetChildAgePicker.doneButton.TouchUpInside += (s, e) => { 
  string sPickedAge = actionSheetChildAgePicker.agePickerDataModel.SelectedItem;
  actionSheetChildAgePicker.Hide(true);
                    }; 
```

# php - 将数据从数据库发送到网页

> ID：15954268
> 
> 赞同：0
> 
> 时间：2013-04-11T16:39:15.730
> 
> 标签：php, forms

在我的表格中，我输入位于数据库中的学生 ID。在提交时，我将输入的 ID 发送到外部脚本，在那里我使用输入的 ID 搜索学生的姓名。这行得通，在我回显它的名字后它是正确的，但我不知道如何将数据发送回我的网页，所以我可以从地址栏中使用 GET 读取学生的名字。代码：

```
$con=mysqli_connect("localhost","root","","novi-studomat");
if (mysqli_connect_errno($con))
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$id=$_POST['id'];
$exe="SELECT * FROM student WHERE id='$id'";
$query=mysqli_fetch_array(mysqli_query($con,$exe));
$ime=$query['name']; 
```

我试过这个：

```
header('Location:http://www.administrator.html.php?name=".$name."'); 
```

但它不会向页面发送数据。这行得通，但我认为必须有更优雅的解决方案：

```
echo "<script>window.location.assign('http://www.administrator.html.php?name=".$name."'); </script>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:43:59.270

试试这个：

```
header('Location: http://www.administrator.html.php?name=' .$name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:51:27.993

这很简单。当您处理数据库表时，您应该使用主 ID 而不是其他数据。如果您知道表的主 ID，您可以在任何地方编写任何查询，即使您可以将此 ID 存储在会话中

# actionscript-3 - Adobe AIR 安装在哪里？

> ID：15954271
> 
> 赞同：1
> 
> 时间：2013-04-11T16:39:22.573
> 
> 标签：actionscript-3, flash, air, installation, adobe

目前我正在运行 Adob​​e AIR 3.2。我之前尝试过安装 3.6（现在是 3.7），但我找不到它。它在我的 Mac 上的某个地方，但我找不到在 Flash 中链接它的文件/文件夹！在 Flash 中，我只能`AIR 3.2 for iOS`在设置中看到一个目标。

我的应用程序文件夹中有一个名为“AIR3.2”的文件夹：
~/Applications/Adobe Flash CS6/AIR 3.2/

我找不到“AIR3.7”文件夹在哪里？？我已按照此[页面上](http://helpx.adobe.com/flash/using/publishing-adobe-air-desktop.html#id_99618)的说明和该页面上显示的[链接](http://helpx.adobe.com/air/kb/troubleshoot-air-installation-mac-os.html)查看了我的库，但找不到它。我找到了一个 plist：
~/Library/Frameworks/Adobe AIR.framework/Versions/1.0/Resources/Info.plist
，里面写着： `CFBundleVersion 3.7.0.1620`

在哪里可以找到该文件夹​​，以便我可以进入 Flash CS6 -> 帮助 -> 管理 AIR SDK 添加新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:18:58.460

使用 Adob​​e AIR Updater 时，它只更新运行时，而不是 SDK。您需要从 Adob​​e 单独下载新的 SDK：http: [//helpx.adobe.com/air/kb/archived-air-sdk-version.html](http://helpx.adobe.com/air/kb/archived-air-sdk-version.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:45:30.013

更新 AIR SDK 不是您在问题中的想法。一步一步解释。

这里是[Adob​​e AIR SDK 的安装](http://www.air-tutorial.com/installing-air-sdk)。我希望你能解决这个问题

您还可以查看与您[在 Mac OS 上安装 Adob​​e Air 3.7 SDK for Flex相关的问题](https://stackoverflow.com/questions/15950945/installation-of-adobe-air-3-7-sdk-for-flex-on-mac-os)

# android - 开始用谷歌地图测绘，怎么办？

> ID：15954273
> 
> 赞同：0
> 
> 时间：2013-04-11T16:39:29.143
> 
> 标签：android, google-maps-api-2

好吧，大家好！

因此，从 Android Google Maps API v2 开发开始不太友好，我想我可以通过发布我的试用结果并获得一些反馈来获得一些智慧，希望你能够足够慷慨地给我一些指导.

所以，我们开始吧！

首先，我的 Activity 代码：

```
 package com.example.ok;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

@SuppressLint("NewApi")
public class MainActivity extends Activity {
    static final LatLng HAMBURG = new LatLng(53.558, 9.927);
    static final LatLng KIEL = new LatLng(53.551, 9.993);
    private GoogleMap map;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map))
                .getMap();
        Marker hamburg = map.addMarker(new MarkerOptions().position(HAMBURG)
                .title("Hamburg"));
        Marker kiel = map.addMarker(new MarkerOptions()
                .position(KIEL)
                .title("Kiel")
                .snippet("Kiel is cool")
                .icon(BitmapDescriptorFactory
                        .fromResource(R.drawable.ic_launcher)));

        // Move the camera instantly to hamburg with a zoom of 15.
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(HAMBURG, 15));

        // Zoom in, animating the camera.
        map.animateCamera(CameraUpdateFactory.zoomTo(10), 2000, null);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

二，Manifest 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.ok"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.ok.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="com.example.ok.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.gms.maps" />

        <activity
            android:name="com.example.ok.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="I Got it and I had to change debug keystore for it and ... long story but I really think it's a good apikey" />
    </application>

</manifest> 
```

三、布局 XML 的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

所以你会注意到，对于初学者来说，只不过是一个标准代码，可以开始学习更多更深入的东西......但是，它还是行不通！

现在，完成我的研究后，我必须评估一些导致我困难的最终原因，这就是我所经历的：

1- 模拟器通常不会处理这个问题，因为这些虚拟机还没有很好地支持 openGL es 2.0，所以情况就是这样，

2- apiKey 不好，实际上一开始尝试使用 api v1 编写代码，因此我遇到了各种问题（已弃用..），我现在转向使用 v2 编写代码，我已经删除了调试keystore 文件，然后在 eclipse 上重建，得到一个新的，然后使用带有包名的 SHA-1 代码在 Google 控制台上生成新的 apiKey 代码......所以我不认为这对我来说是邪恶的根源,

3-尝试了一个设备，我已经下载了几个 openGL es 2.0 的演示，它运行良好，所以一定不是 openGL（但谁知道？）。当我尝试安装apk时，它声明应用程序必须有权使用internat和位置数据等，我点击安装但是......对不起，“应用程序未安装”！

4- 我在我的项目库中引入了必要的东西，意思是：android-support-v4.jar 和 google-play-services.jar 等等......

5-确保项目构建目标是google apis 17（与4.2平台兼容，在写这篇文章时我注意到我的设备是4.0.2 Android版本，可能是这样吗？）。

所以，这很长，希望你仍然可以在你身上找到它，以表明任何潜在的解决方案可能对我有用。

提前致谢 ！

在这里，我添加了我的 logcat 的最后（和重复的部分），只出现了错误：

```
04-11 17:11:15.289: E/StrictMode(700): null
04-11 17:11:15.289: E/StrictMode(700): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d195d0 that was originally bound here
04-11 17:11:15.289: E/StrictMode(700):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-11 17:11:15.289: E/StrictMode(700):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-11 17:11:15.289: E/StrictMode(700):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-11 17:11:15.289: E/StrictMode(700):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-11 17:11:15.289: E/StrictMode(700):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-11 17:11:15.289: E/StrictMode(700):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-11 17:11:15.289: E/StrictMode(700):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-11 17:11:15.289: E/StrictMode(700):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
04-11 17:11:15.289: E/StrictMode(700):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
04-11 17:11:15.289: E/StrictMode(700):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-11 17:11:15.289: E/StrictMode(700):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-11 17:11:15.289: E/StrictMode(700):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-11 17:11:15.289: E/StrictMode(700):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-11 17:11:15.289: E/StrictMode(700):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-11 17:11:15.289: E/StrictMode(700):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-11 17:11:15.289: E/StrictMode(700):  at java.lang.Thread.run(Thread.java:856) 
```

# java - mapreduce 中 Join 操作的输出

> ID：15954276
> 
> 赞同：0
> 
> 时间：2013-04-11T16:39:37.087
> 
> 标签：java, hadoop, mapreduce

我正在 map reduce 中执行连接操作。我正在输入两个文件，其值由分隔符（逗号）分隔。通过对一个公共实体执行连接操作，我可以从两个输入文件中获取一个文件中的输出。

这是地图减少代码：

```
public class EmpMapReduce {
public static class TokenizerMapper extends Mapper<LongWritable, Text, Text, Text>     
        {
        public void map(LongWritable key, Text value, Context context)
            throws IOException, InterruptedException
                {
        String tokens [] = value.toString().split(",");
        String empid = tokens[0];
        String val = "";
        if(tokens.length != 0)
         {
            for (int cnt = 1; cnt < tokens.length; cnt++)
               {    
               val = val + tokens[cnt] + "\t";
            }
        }

        context.write(new Text(empid), new Text(val));

    }
   }

  public static class MyReducer extends Reducer<Text, Text, Text, Text>
         {
    public void reduce(Text key, Iterable<Text> values,
            Context context) throws IOException, InterruptedException
               {
            String str = "";
        for (Text val : values) 
                     {
            str = str + val.toString() + "\t";
         }

         context.write(key, new Text (str));

     }
  }

  public static void main(String[] args) throws Exception 
        {
    Configuration conf = new Configuration();
    String[] otherArgs = new GenericOptionsParser(conf, args)
            .getRemainingArgs();
    if (otherArgs.length != 3) {
        System.err.println("Usage: EmpMapReduce <in1> <in2> <out>");
        System.exit(2);
    }
    Job job = new Job(conf, "EmpMapReduce");

    job.setJarByClass(EmpMapReduce.class);

    job.setMapperClass(TokenizerMapper.class);
    job.setReducerClass(MyReducer.class);

    job.setMapOutputKeyClass(Text.class);
    job.setMapOutputValueClass(Text.class);

    job.setInputFormatClass(TextInputFormat.class);

    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);

    FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
    FileInputFormat.addInputPath(job, new Path(otherArgs[1]));
    FileOutputFormat.setOutputPath(job, new Path(otherArgs[2]));

    System.exit(job.waitForCompletion(true) ? 0 : 1);
    }
   } 
```

这是我使用的两个输入文件内容：

```
100,name100,10
101,name101,11
102,name102,12
103,name103,13
104,name104,14
105,name105,15
106,name106,16
107,name107,17 
```

第二个输入文件：

```
100,100000
101,200000
102,300000
103,400000
104,500000
105,600000
106,700000
107,800000 
```

我得到以下输出：

```
100,name100,10,100000
101,200000,name101,11
102,name102,12,300000
103,400000,name103,13
104,name104,14,500000
105,600000,name105,15
106,name106,16,700000
107,800000,name107,17 
```

现在我担心的是为什么我会得到这样的输出：

```
100,name100,10,100000
101,200000,name101,11 
```

即第一行数据首先从一个输入文件复制，而不是从另一个输入文件复制。但对于第二排，反之亦然。我无法弄清楚如何使每一行中的数据顺序相同。

另一个问题是：

一旦我以特定顺序在所有行中获得数据，我就可以执行各种操作，例如：替换 name100 ---> somenewname 或在每行末尾添加新的逗号分隔值，该值具有该行中所有值的总和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T20:14:13.840

对于 Matthew 的解决方案，您可能需要将其放入循环中以等待所有值被设置以获得正确的结果：

```
if(!user.equals("") && !trans.equals("")){
       str = str + user+ "\t" + trans+ "\t";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:24:08.387

两个映射器的输出到达减速器的顺序是未指定的。所以你需要一些方法来在reducer中识别它们。

一个简单的解决方案是：

*   有两个映射器，每个输入一个
*   每个映射器输出“[type]:[rest of value]”的值
*   假设您有两种类型（用户、交易），现在每种类型都已识别。
*   现在在你的减速器中（抱歉伪代码）：

```
void reduce(..) {
  String user = "";
  String trans = "";

  for(value: values) {
    (type, payload) = value.split();
    if (type == "user") user = payload;
    if (type == "transaction") transaction = payload;
  }

  context.write(user + "\t" + transaction);
} 
```

# jquery - jQuery选项卡动画不起作用

> ID：15954278
> 
> 赞同：0
> 
> 时间：2013-04-11T16:39:40.010
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-tabs

出于某种原因，我无法让任何动画与我的 jQuery UI 选项卡一起使用。我已经尝试了[这里](http://www.eduteka.org/ajax/tabs3/)的许多示例，但都没有成功。

这是我如何布置标签的方式。

```
<div id="tabs">
    <ul class="tabsHeader">
        <h1>PARTNERSHIPS</h1>
        <li><a href="#tabs-1"><span class="toothIcon"></span>The Benefits</a></li>
        <li><a href="#tabs-2"><span class="avatarIcon"></span>Join Us</a></li>
    </ul>

    <div class="clearfix"></div>

    <div id="tabs-1">
        <div class="content">
            <h1>header</h1>
            <ul>
                <li>text</li>
                <li>text</li>
                <li>text</li>
                <li>text</li>
                <li>text</li>
                <li>text</li>
            </ul>
        </div>
    </div>

    <div id="tabs-2">
        <div class="content">
        <p>some text</p>
            <form>
                <input type="text" name="name" placeholder="NAME" />
                <input type="text" name="email" placeholder="EMAIL" />
                <input type="text" name="phone" placeholder="PHONE" />
                <input type="text" name="city" placeholder="CITY OF PRACTICE" />
                <input type="submit" />
            </form>
        </div>
    </div>
</div> 
```

像这样初始化：

```
$('#tabs').tabs({ fxFade: true, fxSpeed: 'fast' }); 
```

或者

```
$( "#tabs" ).tabs({ hide: { effect: "explode", duration: 1000 } }); 
```

选项卡按预期工作，但没有动画？有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:50:27.483

您正在使用旧的 API 文档。检查这个[http://api.jqueryui.com/tabs/#option-hide](http://api.jqueryui.com/tabs/#option-hide)

您需要使用`hide`和`show`属性来定义动画，而不是`fxFade`等。

[http://jsfiddle.net/U287r/](http://jsfiddle.net/U287r/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:51:27.483

使用 jQuery Tab[`hide option`](http://api.jqueryui.com/tabs/#option-hide)和[`show option`](http://api.jqueryui.com/tabs/#option-show)动画。

您可以使用`boolean`、`number`、`string`或来解决此问题`object`。

* * *

***布尔值：***

> 当设置为 true 时，面板将以默认持续时间和默认缓动淡入。

```
 $('#tabs').tabs({ 
     hide: true,
     show: false   
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/ppgH9/5/](http://jsfiddle.net/dirtyd77/ppgH9/5/)

* * *

***NUMBER（以毫秒为单位）：***

> 面板将以指定的持续时间和默认缓动淡入。

```
 $('#tabs').tabs({ 
     hide: 1000,
     show: 2000
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/ppgH9/6/](http://jsfiddle.net/dirtyd77/ppgH9/6/)

* * *

***细绳：***

> 该值可以是内置 jQuery 动画方法的名称，例如“slideDown”，也可以是 jQuery UI 效果的名称，例如“fold”。在任何一种情况下，效果都将与默认持续时间和默认缓动一起使用。

```
 $('#tabs').tabs({ 
     hide: 'fade',
     show: 'explode'   
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/ppgH9/4/](http://jsfiddle.net/dirtyd77/ppgH9/4/)

* * *

***目的：***

> 如果该值是一个对象，则可以提供效果、延迟、持续时间和缓动属性。

```
 $('#tabs').tabs({ 
     hide: { effect: "fade", duration: 200 },
     show: { effect: "fade", duration: 200 }    
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/ppgH9/1/](http://jsfiddle.net/dirtyd77/ppgH9/1/)

# mysql - SQL 查询在 phpMyAdmin 中有效，但在 Java 中无效

> ID：15954287
> 
> 赞同：2
> 
> 时间：2013-04-11T16:40:01.200
> 
> 标签：mysql, servlets, jdbc

我有以下 SQL 查询：

```
SELECT `Activity`.`userid` , `Goal`.`goalid` , `Goal`.`activityid` , `Goal`.`exercise` , `Exercise`.`name` , `Goal`.`target` , `ActivityData`.`dataid` , `ActivityData`.`current` , MAX( `ActivityData`.`timestamp` ) AS `timestamp`
FROM `Goal`
INNER JOIN `Activity` ON `Activity`.`activityid` = `Goal`.`activityid`
INNER JOIN `Exercise` ON `Exercise`.`exerciseid` = `Goal`.`exercise`
INNER JOIN `ActivityData` ON `ActivityData`.`activityid` = `Goal`.`activityid`
WHERE `Activity`.`userid` =100005545413982
GROUP BY `gymbuddy`.`Goal`.`activityid`; 
```

上面的查询在 phpMyAdmin 中有效，但是当我使用 PreparedStatement 运行它时，会给出以下堆栈跟踪。

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'BY `gymbuddy`.`Goal`.`activityid`' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2734)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2322)
    at com.mathanv.gb.dao.BuddyDao.getAllBuddyGoals(BuddyDao.java:387)
    at com.mathanv.gb.controller.BuddyController.doPost(BuddyController.java:95)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

这些是数据库属性：

```
driver=com.mysql.jdbc.Driver
url=jdbc:mysql://localhost:8889/gymbuddy?allowMultiQueries=true 
```

不知道为什么会这样！帮助！

**编辑：我正在使用preparedStatement 来生成用户ID。**

```
WHERE `gymbuddy`.`Activity`.`userid` =?
ps.setLong(1, buddy.getUserID()); 
```

编辑：（请求）方法与 PreparedStatement。

```
public JSONObject getAllBuddyGoals(Buddy buddy){
        try {
            PreparedStatement ps = connection.prepareStatement(GET_ALL_BUDDY_GOALS);
            ps.setLong(1, buddy.getUserID());
            JSONObject response = new JSONObject();
            response.put("action", "getAllBuddyGoals");
            response.put("success", 1);
            response.put("error", 0);
            response.put("userid", buddy.getUserID());
            JSONArray goals = new JSONArray();
            ResultSet rs = ps.executeQuery();
            while(rs.next()){
                JSONObject goal = new JSONObject();
                goal.put("goalid", rs.getLong("goalid"));
                goal.put("activityid", rs.getLong("activityid"));
                goal.put("exercise", rs.getString("name"));
                goal.put("target", rs.getDouble("target"));
                goal.put("max", rs.getDouble("current"));
                goals.add(goal);
            }
            response.put("goals", goals);
            return response;
        } catch (SQLException e) {
            e.printStackTrace();
        }
        JSONObject error = new JSONObject();
        error.put("action", "getAllBuddyGoals");
        error.put("success", 0);
        error.put("error", 1);
        error.put("error_msg", "error processing request, please contact admin.");
        return error;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:04:30.793

您可能想要检查伙伴 id 值和术语组之间是否存在实际空间。如果您阅读 Java 抛出的错误：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: 
   You have an error in your SQL syntax; check the manual 
   that corresponds to your MySQL server version for the 
   right syntax to use near 'BY `gymbuddy`.`Goal`.`activityid`' at line 1 
```

Mysql 错误通常发生在错误所在位置之前。我的猜测是您正在执行的查询在 100005545413982 和 GROUP 之间缺少一些空格，可能像这样：

```
 WHERE `Activity`.`userid` =100005545413982GROUP BY `gymbuddy`.`Goal`.`activityid`; 
```

# ssrs-2008 - 尝试在 SSRS Report Builder 2008 的聚合中使用 group by 语句

> ID：15954288
> 
> 赞同：1
> 
> 时间：2013-04-11T16:40:06.307
> 
> 标签：ssrs-2008, reporting-services, ssrs-grouping

我在 SSRS 2008 中有一份报告，其中包含两个行分组。最低级别的详细信息按法律案件分组，然后有一个按外部律师姓名分组的摘要行。数据集中的查询实际上返回的记录的详细程度低于这两个分组，它返回的是法律案件的个人账单支付。因此，每个法律案件都有很多账单支付，每个外部律师也有很多法律案件。我要显示的最后一列是外部律师评估分数，每个法律案件都有 1 分。详细信息行的分数显示良好，但是当我尝试进行聚合（总和或平均值）时，它没有正确聚合。它正在计算每笔账单支付的分数，而不是通过法律案例来计算。例如，如果一个法律案件的一名外部律师得分为 10，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:49:04.477

由于该值被复制，因此您将使用的聚合是 First()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:41:11.380

您的分组是按级别进行的。因此，如果您有父组，则应选择“添加组标题”选项。然后，您将在新行上有数据。然后你可以在那里进行计算，它将正确地对聚合数据进行分组。

例如：

这不起作用：

```
Single Line:  Group1Data, DetailData, Sum(DetailData) 
```

它只会重复 DetailData 两次，因为详细级别与组相同

如果您的分组正确完成，这应该可以工作：

```
Header Line:  Group1Data, Sum(DetailData)
Detail Line:  (blank)       , DetailData 
```

您可以有许多标题行，例如每种情况一个。但是下面的详细信息由组定义定义，并且每次仅显示该组。这也适用于多个级别的分组。

# python - 使用定期出现的数据进行绘图

> ID：15954291
> 
> 赞同：2
> 
> 时间：2013-04-11T16:40:33.273
> 
> 标签：python, regex, awk, gnuplot

我有一个数据文件：

```
######## Test at 123.45 start ########
######## File: abc.xyz ########
cores, pass_rate(actual), pass_rate(given)
1,7193,7210
2,10651,28840
4,10651,28840
8,10651,28840
######## End abc.xyz ########
######## File: def.xyz ########
cores, pass_rate(actual), pass_rate(given)
1,8619,8617
2,16567,16561
4,17256,66244
8,19874,66244
######## End def.xyz ######## 
```

我想绘制其中选择 abc.xyz 和 def.xyz 的第二列（即 pass_rate(actual) ）的数据，并在绘图的帮助下全面比较它们。

在 cut 和 awk 命令的帮助下，我抓取了数据：

```
cat MYTEST_1.out | cut -d "," -f2 | awk '!/^#/' 
```

这导致：

```
pass_rate(actual)
7193
10651
10651
10651
pass_rate(actual)
8619
16567
17256
19874 
```

无法遇到抓取数据并绘制图表的脚本，即第一个 pass_rate 与 2nd pass_rate

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:29:41.317

这是方法`python`：

```
import sys
import matplotlib.pyplot as plt

p={}

with open(sys.argv[1]) as f:
    for line in f:
        if "File:" in line:
            key=line.split()[2]
            p[key]=[]
        if line[0].isdigit():
            x,y,z = line.strip().split(",")
            p[key].append([x,y])

for k,v in p.iteritems():    
    plt.plot(zip(*v)[0],zip(*v)[1],label=k)

plt.legend(loc='upper left')
plt.xlabel('cores')
plt.ylabel('pass rate (actual)')
plt.show() 
```

将其保存`plot.py`并运行如下`python plot.py data`：

![在此处输入图像描述](https://i.stack.imgur.com/rNoW5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:47:33.860

为什么要连接数据？如果它在单独的文件中会更容易处理。

在 awk 的帮助下，您仍然可以使用这种格式。您可以结合 Gnuplot使用我[在此处](https://superuser.com/a/581381/133552)描述的提取技术。请注意，Gnuplot 将忽略以数字符号开头的行：

```
echo "
set key left
set datafile separator comma
plot for [i = 1:2] '< awk \"/^#{8} File:/ { f = 1; n++ } f && n == wanted; /^#{8} End/ { f = 0 }\" \
                    wanted='.i.' MYTEST_1.out' using 1:2 with lines title 'File '.i
" | gnuplot --persist 
```

这将绘制文件的前两个部分。结果：

![OPs 输入的前两个部分的图](https://i.imgur.com/WN07HSP.png)

### 编辑 - 更容易配置的替代方案

*解析.awk*

```
BEGIN {
  print "set datafile separator comma"
  print "set key left box"
  plot_str = "plot"
  col1     = 1
  col2     = 2
}

# In the first pass we determine number plots, plot titles and x/y labels
FNR == NR && /^#{8} File:/ {
  plot_str = plot_str " '-' using " col1 ":" col2 " with lines title '" $3 "', "
  if(!xylabels) {
    oFS=FS; FS=" *, *"
    getline
    print "set xlabel '" $col1 "'"
    print "set ylabel '" $col2 "'" 
    xylabels = 1
    FS=oFS
  }
} 

# Skip rest of script if this is the first pass
FNR == NR { next }

# The second pass starts here

# Only print 'plot_str' once
!f { print plot_str; f=1}

# If line starts with a number assume it is data
/^[0-9]/

# Terminate plot sequence
/^#{8} End/ {
  print "e"
} 
```

像这样运行它：

```
awk -f parse.awk infile infile | gnuplot 
```

![具有正确键和标签的更好图](https://i.imgur.com/Ec4HE48.png)

或者将第三列与第一列绘制：

```
awk -f parse.awk col2=3 infile infile | gnuplot 
```

![相同但绘制第三列](https://i.imgur.com/vSvAqw5.png)

# java - Android OpenGL 颜色的纹理退化

> ID：15954293
> 
> 赞同：3
> 
> 时间：2013-04-11T16:40:35.130
> 
> 标签：java, android, opengl-es

我将 OpenGL 用于 2D 图形，从 32 位 PNG 图像加载纹理，当在屏幕上绘制纹理时，颜色看起来很奇怪。看起来颜色并不完全准确，每个通道使用的颜色少于 8 位。

下图中左侧是设备的原始输出，右侧是原始图像。您可以看到渲染图像中的渐变不平滑。

![问题](https://i.stack.imgur.com/nAUk2.png)

这是增加了对比度的同一张图像，因此您可以更好地看到这些伪影。

![高对比度问题](https://i.stack.imgur.com/KDUaL.png)

这是正常的还是不正常的？我能做些什么呢？

注意：在三星 Galaxy Tab 2 7.0 上渲染

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:03:24.330

您可以尝试为 GLSurfaceView 手动设置 RGB888 模式：

```
GLSurfaceView.setEGLConfigChooser(8, 8, 8, 8, 16, 8) 
```

最后两个值根据您对深度和模板缓冲区的需求而有所不同。至少在 SGS2 上，设备默认选择 RGB565 颜色模式会导致一些颜色条带。

# java - 使用 Flood Fill 4 算法时如何克服“细边框”问题？

> ID：15954305
> 
> 赞同：0
> 
> 时间：2013-04-11T16:41:03.223
> 
> 标签：java, flood-fill

我正在编写一个实现 Flood Fill 4 算法的应用程序。只要边框很厚，它就可以很好地工作。该算法在边界内填充某种颜色。我试图让边界更薄，但在这种情况下，像素能够走出边界，程序崩溃了。

![在此处输入图像描述](https://i.stack.imgur.com/qeHHP.png)

洪水填充算法在直角三角形的“厚边界”区域内表现出色。但是，该算法在其他四个区域内不起作用，因为边界很薄，即发生泄漏。除了使其他寄宿生变厚外，我有什么方法可以使用吗？

这是完整的代码，它只是一个类：

```
 import java.awt.Color;
   import java.awt.Container;
   import java.awt.Image;
   import java.awt.image.BufferedImage;
   import javax.swing.ImageIcon;
   import javax.swing.JFrame;
   import javax.swing.JLabel;
   public class MyPolygon extends JFrame {
private JLabel my;

private BufferedImage buffered;

public MyPolygon() throws InterruptedException {
    createMy();
}
private void createMy() throws InterruptedException {
    Container contentPane = getContentPane();
    contentPane.setBackground(Color.WHITE);
    contentPane.setLayout(null);
    contentPane.setSize(1200, 900);

    my = new JLabel();
    my.setIcon(new ImageIcon("myImage.png"));
    my.setBounds(10,200, 1000, 800);
    contentPane.add(my);

    setSize(1200, 900);
    setVisible(true);
    setLocationRelativeTo(null);

    Image img = ((ImageIcon) my.getIcon()).getImage();
    buffered = new BufferedImage(img.getWidth(null),
            img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    buffered.getGraphics().drawImage(img, 0, 0, null);

    int fill = 100;
    boundaryFill4(200, 215, fill, 50);
    my.setIcon(new ImageIcon(buffered));
}

// Flood Fill method
public void boundaryFill4(int x, int y, int fill, int boundary) {

    Color c = new Color(buffered.getRGB(x, y));
    int current = c.getRed();
    System.out.println(x + " " + y + " | " + current);

    if ((current > boundary) && (current != fill)) {
        int red = fill;
        int green = fill;
        int blue = fill;
        c = new Color(red, green, blue);
        buffered.setRGB(x, y, c.getRGB());

        boundaryFill4(x + 1, y, fill, boundary);
        boundaryFill4(x - 1, y, fill, boundary);
        boundaryFill4(x, y + 1, fill, boundary);
        boundaryFill4(x, y - 1, fill, boundary);
    }
}
// Main method
public static void main(String args[]) throws InterruptedException {
    MyPolygon my = new MyPolygon();
    my.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:45:01.633

您`if`需要一些工作，并且除了颜色之外，您对递归没有结束条件。

**1**

该函数`boundaryFill4`需要查找 x 和 y 是小（图片的顶部或左侧边缘）还是大（底部或顶部边缘）。它看起来像这样：

```
if (x < 0 || x > 200 || y < 0 || y > 200) {
    return;
} 
```

**2**

如果您仔细观察图像，您会发现边界线的边缘（尤其是细时）使用褪色像素来防止线条看起来过于锯齿。这是一种平滑技术。

一个调试技巧是在函数顶部添加一个短时间延迟，`boundaryFill4`以便您可以看到正在发生的过程。它应该向您显示填充物正在逃逸的位置，您可以查看被炸毁的位置以获得更多线索。

该测试当前寻找一个像素中的 RED 多于 50 级但与填充颜色不同的 RED。

中心的白色可能具有全部三个 RGB 级别的完整值。

边框具有所有三种 RGB 颜色的像素看似接近 0，但平滑技术使其在某些像素中放置更高的 RGB 值以隐藏锯齿。一定要检查边框薄时实际上是什么颜色。也许这条线的中心像素比你想象的要亮。

填充颜​​色是一种深灰色。

*   代码将找到具有“RED 50 以上”规则的白色。
*   该代码将避免使用“not RED == fill”的规则重做已经填充的代码
*   它在平滑的边界上的作用是悬而未决的。我的猜测是有一个地方边界较亮的部分比 50 亮（红色）

这里有一些想法：

1.  在与填充颜色进行比较时，更改规则以查看所有三种颜色，而不仅仅是红色。（红色==填充，绿色==填充和蓝色==填充）这可能无济于事。
2.  也许您可以将起点的颜色传入并使用它进行比较，而不是仅仅填充所有比 50 亮的颜色。要么寻找精确的颜色匹配，要么寻找一个足够接近的匹配，其中点在传入的 10 以内原色。
3.  如果这不起作用，请使用延迟来查看它逃脱的地方的独特之处。

# paypal - Paypal 沙盒信用卡详细信息不起作用

> ID：15954312
> 
> 赞同：8
> 
> 时间：2013-04-11T16:41:18.743
> 
> 标签：paypal, sandbox

我在贝宝开发者网站上生成了一个沙盒“买家”帐户，该帐户自动生成了信用卡号码。和到期日。但是，这似乎不起作用，因为我在测试事务时得到的只是一条消息：

“您不能使用属于现有 PayPal 帐户的电子邮件地址或卡号。如果您有 PayPal 帐户，请登录。如果没有，请更改电子邮件地址或卡号，然后重试”

如果我尝试使用为买家帐户创建的虚假电子邮件和密码登录贝宝，也会失败。

有任何想法吗？

谢谢

操作系统

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T19:25:57.083

如果您需要在通过沙盒结帐过程中使用测试信用卡号，您可以登录到现有帐户之一并开始添加信用卡的过程。这将为您预先填充卡号。只需将卡号复制下来，不要将其添加到帐户中，这样它就不会被链接。至于到期日期，您可以使用任何有效的未来日期，并且您可以使用 123 作为 CVV2 代码。[否则，您也可以在此处](https://www.ccaples.com/index.php/misc/tools-and-stuff/cc-num-gen)使用此页面上的一些测试信用卡号来使用沙箱进行测试。每次刷新页面，都要生成新的卡号。

# c# - Silverlight 数据网格不为某些客户端显示，但对其他人工作正常

> ID：15954314
> 
> 赞同：1
> 
> 时间：2013-04-11T16:41:29.300
> 
> 标签：c#, asp.net, silverlight-4.0, windows-server-2008

我有一个使用带有数据网格和数据图表的 Silverlight 4 的网站。该站点已经启动并运行了将近一年左右，但由于某种原因，自上周以来，silverlight 站点仅部分适用于某些客户/客户，但适用于其他客户/客户。

在我的本地开发环境中，一切都按要求正常运行，但是当部署到实时服务器时，网站显示了 silverlight 网站的所有部分，除了数据网格（它们根本不显示）。例如，在 silverlight 页面的顶部有多个图表，这些图表将始终在所有计算机/浏览器上正常显示，但在此下方大约有 10 个数据网格，仅针对某些计算机/浏览器/客户显示。在这成为问题之前，我没有对网站本身进行任何更改。该站点托管在 Windows Server 2008 R2 VPS 上（尽管托管公司可能进行了一些我不知道的维护）。数据图表和数据网格都使用相同的 Web 服务来检索和显示信息。

Silverlight 4 或 Windows Server 2008 R2 的最新更新是否可能是导致此问题的原因？如果没有，是否有任何明显的事情需要调查以找出问题的根本原因？我什至不知道从哪里开始调查这个问题。

没有生成异常，我也没有与该问题相关的任何事件日志。另外，我写了很多 Silverlight 4 应用程序和网站，直到上周才遇到这个问题。最大的问题是为什么这个问题只会出现在某些计算机上（在计算机上的所有浏览器上）而不会出现在其他计算机上？

这绝对不是与数据相关的问题，因为我在本地开发/测试环境中有一个实时服务器的精确备份，它可以正常工作。

任何帮助将非常感激。

亲切的问候

莱昂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:16:34.137

我们已经设法找出问题所在，以防万一其他人遇到相同类型的问题，幸运的是，解决起来非常简单。经过 5 天的 bug 搜寻，我们发现您需要做的就是确保您的 Adob​​e Flashplayer（是的，您没看错）更新到最新版本！似乎安装在我们客户计算机上的 flash 和 silverlight 使用的 ActiveX 控件已过时且易受攻击。Silverlight 不会通知您要安装的任何新更新（因为没有任何更新），但是当您尝试打开使用最新 flash 播放器 api 的 flash 页面时，它会通知您有一个新版本，其中包含更新了 ActiveX 控件，从而解决了我们遇到的问题。

您可以通过进入控制面板来明确强制更新 Flash，在那里您会找到一个名为“Flash”的项目，它会打开 Flash 配置。转到高级设置选项卡，其中有一个“立即检查”按钮来检查您的 flashplayer 和 ActiveX 组件并将其更新到最新版本...一旦完成，您的 silverlight 应用程序将像以前一样 100% 运行。

希望这可以为将来节省一些时间和精力。

问候莱昂博塔

# ios - 使用 NSManagedObject 子类传输持久性和非持久性数据

> ID：15954317
> 
> 赞同：6
> 
> 时间：2013-04-11T16:41:41.037
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我对如何使用一些核心数据的 NSManagedObject 子类来处理持久数据和非持久数据有一些想法。

假设您有一个食谱应用程序，显示来自 CoreData 的您自己的食谱列表，并且在同一个应用程序中，您也可以搜索其他用户的食谱。这些其他用户的配方当然来自 API，我们不想将它们保存到核心数据中。但是我们想要的是我们的配方细节视图控制器，无论是给定一个持久配方还是一个非持久配方，都可以发挥相同的作用。我自然认为我们应该在我们的数据周围使用相同的对象包装器，并让我们的视图控制器对数据的来源视而不见。

问题是 NSManagedObject 子类不能手动初始化，必须插入到上下文中。这对我们其他用户的食谱不利。另一方面，对于我们自己的食谱，我们需要将这些对象插入到上下文中。

我有几个解决方案，但我真的很想看看你们对这个问题的看法。

你会说这是一些实现问题，应该通过将两个数据对象包装到一个对象中来解决吗？例如，通过覆盖所有 getter 和 setter 来处理 coredata 对象和 NSDictionary 对象？

或者这是一个架构问题，您可以通过嵌套 NSManagedContext 或使用多个持久存储（一个在内存中，另一个在 Sqlite）来解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T17:18:10.650

实际上，您可以创建 NSManagedObject 实例而不将它们插入到上下文中。只需`nil`作为托管对象上下文参数传递。执行以下操作：

```
NSEntityDescription *myRecipeEntity = [NSEntityDescription entityForName:@"MyRecipeEntity" inManagedObjectContext:[self managedObjectContext]];
MyRecipeClass *recipe = [[MyRecipeClass alloc] initWithEntity:myRecipeEntity insertIntoManagedObjectContext:nil]]; 
```

现在您有一个不在任何上下文中的配方实例。

如果您稍后想将其添加到上下文中：

```
[[self managedObjectContext] insertObject:recipe]; 
```

如果你不想插入它，就把它扔掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:02:13.297

我可能会只使用一个您永远不会保存的单独上下文，这似乎是最简单的路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:10:30.653

**模型配置 - 内存存储和 sqlite 支持的存储。**

我会认真考虑使用模型配置和两种持久存储类型：内存和 sqlite 支持。

但这也意味着您必须为可下载的数据创建单独的实体，这使得您可以让一些食谱持久化和一些临时性的想法无效，而它们都是食谱。此外，您不能在不同持久存储中的实体之间建立关系。您将放弃反向关系的好处，并且必须使用获取的属性来模仿这一点。

总而言之，这是一个可行的选择，但有一些缺点。

**隔离的托管对象上下文**

使用单独的托管对象上下文的最大优势是您可以将相同的配方实体用于持久数据和临时数据。您必须避免保存临时上下文，并且必须从持久存储中引入所有更改，或者从具有您保存的数据的其他上下文中合并。

这种替代方案的挑战在于，您必须在此隔离上下文之上构建大部分 UI 以供阅读，但您所做的所有永久性更改都需要保存到主上下文并通过合并到隔离上下文中传播回来。这可能会引入一些棘手的情况，但我认为这是可行的。

# javascript - 引导轮播指示器未按正确顺序循环

> ID：15954318
> 
> 赞同：2
> 
> 时间：2013-04-11T16:41:44.100
> 
> 标签：javascript, twitter-bootstrap, carousel

我试图让 twitter 引导轮播工作，现在一切正常，除了指标不能正常工作，当我按下下一个箭头时，指标直接跳到第三个而不是第二个，当我通过单击上一个箭头返回图像完全消失，问题出在哪里？我究竟做错了什么？

就我而言，我在滑块顶部放置了一个 div z-index，以实现块不移动的效果。自己看一下以便更好地理解：

这是我的例子：http: [//jsfiddle.net/jRa5r/2/](http://jsfiddle.net/jRa5r/2/)

这是 HTML，请在 jsfiddle 上跟进完整示例以及其余代码。

```
<div id="myCarousel" class="carousel slide"> <!-- slider -->
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="caption-block"></div>
                <div class="active item"> <!-- item 1 -->
                    <img src="img/slider1.jpg" alt="">
                    <div class="carousel-caption">
                        <h4>A team with long experience in Domestic and International relationships with key sector decision-makers.</h4>
                    </div>
                </div> <!-- end item -->
                <div class="item"> <!-- item 2 -->
                    <img src="img/slider1.jpg" alt="">
                    <div class="carousel-caption">
                        <h4>Title</h4>
                        <p>Mollitia officia reiciendis excepturi temporibus quibusdam.</p>
                    </div>
                </div> <!-- end item -->
                <div class="item"> <!-- item 3 -->
                    <img src="img/slider1.jpg" alt="">
                    <div class="carousel-caption">
                        <h4>Title</h4>
                        <p>Quibusdam blanditiis.</p>
                    </div>
                </div> <!-- end item -->
            </div> <!-- end carousel inner -->
            <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
        </div> <!-- end slider --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:50:23.210

带上你的

```
<div class="caption-block"></div> 
```

在......之外

```
<div class="carousel-inner"></div> 
```

不过，您将需要重新设置标题块的样式。Bootstrap 认为您的标题可能是一个项目？

更新的小提琴：

[http://jsfiddle.net/jRa5r/10/](http://jsfiddle.net/jRa5r/10/)

“标题块” div 的新高度为 189 像素，这是我发现的与容器匹配的高度。希望这可以帮助！

# mysql - 主键自动递增表的插入语句

> ID：15954319
> 
> 赞同：0
> 
> 时间：2013-04-11T16:41:50.090
> 
> 标签：mysql

我创建了一个主键为 INT 自动增量的表。当我尝试将数据插入表中时，我无法这样做。这是我遇到的错误：字段列表中的未知列“状态”。我该怎么做呢？

创建表的代码：

```
 CREATE TABLE item (
itemId INT AUTO_INCREMENT,
code VARCHAR(8),
status VARCHAR(32),
desc1 VARCHAR(128) DEFAULT NULL,
desc2 VARCHAR(128) DEFAULT NULL,
PRIMARY KEY (itemId),
FOREIGN KEY (code) REFERENCES product (code)
  ) ENGINE INNODB; 
```

插入语句的代码：

```
 INSERT INTO item (code, status, desc1, desc2) VALUES ('EX00001','In Stock','a','b'); 
```

产品表代码：

```
 CREATE TABLE product (
code VARCHAR(8),
productName VARCHAR(32),
productDesc VARCHAR(128),
unitPrice DECIMAL(18,4),
PRIMARY KEY (code) 
```

) 引擎创新；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:16:33.693

**状态**是 Mysql 上的保留字。 [显示状态 Mysql](http://dev.mysql.com/doc/refman/5.1/en/show-status.html)

您需要使用引号。尝试这样做：

```
CREATE TABLE item (
`itemId` INT AUTO_INCREMENT,
`code` VARCHAR(8),
`status` VARCHAR(32),
`desc1` VARCHAR(128) DEFAULT NULL,
`desc2` VARCHAR(128) DEFAULT NULL,
PRIMARY KEY (`itemId`),
FOREIGN KEY (code) REFERENCES product (`code`)
  ) ENGINE INNODB; 
```

并且在进行 Select 时也使用单引号；

```
select `status`,.... from .... 
```

# c# - C# Unity 试图弄清楚如何使用 Coroutine

> ID：15954320
> 
> 赞同：0
> 
> 时间：2013-04-11T16:41:52.767
> 
> 标签：c#, unity3d, coroutine

我有以下代码...

```
StartCoroutine(GetSuggestions());

IEnumerator GetSuggestions() {
    longExecutionFunction(); // this takes a long time
    yield return null;
} 
```

我如何使用协程来保持主程序流程继续进行？目前当它达到 longExecutionFunction(); 程序停止几秒钟。如果整个程序在此过程中继续工作，我会很高兴。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:14:54.167

不使用线程，假设你可以修改`longExecutionFunction`，它看起来像这样：

```
void longExecutionFunction()
{
    mediumExecutionFunction();
    mediumExecutionFunction();
    while(working)
    {
        mediumExecutionFunction();
    }
} 
```

您可以将其修改为：

```
IEnumerator longExecutionFunction()
{
    mediumExecutionFunction();
    yield return null;
    mediumExecutionFunction();
    yield return null;
    while(working)
    {
        mediumExecutionFunction();
        yield return null;
    }
} 
```

然后修改调用代码如下：

```
StartCoroutine(GetSuggestions());

IEnumerator GetSuggestions() {
    yield return longExecutionFunction();
    //all done!
} 
```

然后，每次更新都会做一件“中等长度的事情”，从而防止游戏挂起。您是否可以以及如何分解内部的工作`longExecutionFunction`取决于您在其中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:46:22.703

You would need to start longExecutionFunction in another thread. You may want to look at this article to read about threading: [http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)

Code Example:

```
var thread = new System.Threading.Thread(new System.Threading.ThreadStart(() => {
    longExecutionFunction();
}));
thread.Start(); 
```

If you aren't familiar with threads you should read up on them before using them. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:58:39.333

您应该将[线程](http://msdn.microsoft.com/en-us/library/ms173178%28v=vs.80%29.aspx)与协程结合使用。

```
StartCoroutine(MyCoroutine());

[...]

IEnumerator MyCoroutine()
{
    Thread thread = new Thread(() =>
    {
        longExecutionFunction();
    });

    thread.Start();

    while (thread.IsAlive) yield return 0;

    // ... Use data here
} 
```

但是，您不能在 中使用任何统一对象或方法`longExecutionFunction`，因为统一不是线程安全的。`longExecutionFunction`因此，当方法返回时，您需要计算内部的所有数据并初始化统一对象。

# opencv - 计算机视觉：如何通过熵最小的线水平分割图像？

> ID：15954322
> 
> 赞同：9
> 
> 时间：2013-04-11T16:42:01.790
> 
> 标签：opencv, simplecv

我有一个具有非白色区域的图像（例如段落但不处理 OCR）。这些区域之间的空间有些规则，看图像的人将能够看到这些区域之间存在空白。

我打算做的是找到所有区域的顶角和底角，从底角开始到下一个区域的顶角，取每条水平线的熵，以及具有最低值的线并返回该线的 Y 位置。 ![在此处输入图像描述](https://i.stack.imgur.com/Rmqjn.png)

```
[region] <--- maximum corner coordinates identified
[line with lowest entropy] <--- return Y position starting from above region's bottom corner's Y coordinate.
[region]<--- stop at Y coordinate of this region's top corner. 
```

我打算做的是裁剪出这些区域。

我想到的另一种方法是使用直方图来识别最低点并以某种方式找到最低条的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:37:06.737

我不确定它是否是您正在寻找的（我不确定您在寻找什么），所以如果我错了，请写下更多细节，我会尝试更新我的答案。现在我认为你正在寻找最适合分割纸张的白色区域，因为你没有剪掉任何重要的东西。

最容易实现的解决方案是计算每一行和下一行的总和，并检查这些值的差异是否为 0（或其他一些小值）。这是一个简单的代码：

```
Mat m = imread(pathToFile);
cvtColor(m, m, CV_BGR2GRAY); //just to make sure
for (int i = 0; i < m.rows - 1; i++)
{
    Scalar s = sum(Mat(m, Rect(0, i, m.cols - 1, 1)));
    Scalar s2 = sum(Mat(m, Rect(0, i + 1, m.cols - 1, 1)));
    Scalar s3 = s - s2;
    if ((int)s3[0] == 0)
        printf("Empty line: %d\n", i);
} 
```

事实上——你还应该检查这条线是否是白色的，或者你刚刚发现了两条非常相似的非白色线——所以只需在这段代码中添加一些测试，比如`if ((int)s[0] < someValue) {//it's ok} else {//it's bad}`. 当然，这不是非常有效的解决方案，因为您必须计算每行（几乎每行）的总和两次，这是浪费时间。更快的解决方案是记住变量中的行总和，或者如果您以后想使用它们，甚至可以将所有总和放入向量/数组/等中。

最有效的计算方法可能是使用[积分图像](http://en.wikipedia.org/wiki/Integral_image "积分图像")- 计算整个图像的总和，然后`i`从行的最后一个元素中减去行的最后一个元素`i+1`。当然，积分图像是在 openCV 中实现的——[见这里](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#integral)

# java - SWITCH 语句的功能

> ID：15954328
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:42:23.637
> 
> 标签：java, javascript

**在 Java 中如何使用 switch 语句？** 我是一个完整的初学者。

我在设计网站时使用过 Javascript，所以我有一些非常基本的编程经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:47:25.213

> but when I'm writing codes in this software I feel something similar to JAVA coding

That is because you are writing Java, since BlueJ is nothing that an IDE for Java, not a language. So, answering your question, if you want a switch statement, write a Java switch statement:

```
switch (variable) {
    case option1:
        //code
    break;
    case option2:
        //other code
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:52:47.763

谢谢你们告诉我BLUEJ是JAVA的IDE，然后我开始搜索JAVA **switch statement**。

我找到了一篇带有简单示例的文章，可以向像我这样的初学者解释什么是 SWITCH 语句。

[http://www.homeandlearn.co.uk/java/java_switch_statements.html](http://www.homeandlearn.co.uk/java/java_switch_statements.html)

感谢大家的回答和宝贵的时间。

# sql - 三个表的 SQL 查询

> ID：15954333
> 
> 赞同：0
> 
> 时间：2013-04-11T16:42:42.513
> 
> 标签：sql, sql-server, select, join

我需要帮助构建一个返回三个不同表的结果的 SQL 查询。我已经成功地为两个表创建了语句，但无法获得所有三个表。

表格及相关字段如下：

```
Order        OrderItem       Product
-------      -----------     -----------
orderId      orderId         productCode
status       productCode     productName
             quantity 
```

我正在寻找所需的结果集：

```
[productCode]    [productName]    [orderCount]
-------------    -----------      ----------
123              widget           3
456              thing            2 
```

结果将按`productCode`from `OrderItem`、`productName`from`Product`以及产品的订购和发货次数分组。

运输状态来自`status`上的字段`Order`。即仅包括字段为“已发货”的`OrderItem`行。`status``Order`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:51:02.997

试试这个：

```
SELECT
    c.productCode,
    c.productName,
    COUNT(*) orderCount
FROM Order a
INNER JOIN OrderItem b
ON a.orderId = b.orderId
INNER JOIN Product c
ON b.productCode = c.productCode
WHERE status = 'shipped'
GROUP BY
    c.productCode,
    c.productName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:47:17.297

试试这个：

```
select 
    p.productCode, p.productName, count(o.OrderId) as orderCount,
    sum(oi.quantity) as orderQuantity -- Optional (if you want the sum of products ordered)
from
    [product] as p
    inner join [orderItem] as oi on p.productCode = oi.productcode
    inner join [order] as o on oi.orderId = o.orderId
group by 
    p.productCode, p.productName 
```

# php - PHP XML - 将重复元素和子元素提取到数组

> ID：15954341
> 
> 赞同：1
> 
> 时间：2013-04-11T16:43:04.787
> 
> 标签：php, xml

我使用内置`PHP SOAP`函数`CURL`发送请求并从`.Net ASMX web service`.

目前我正在接收作为 XML 的响应，但需要一些帮助来从 XML 中提取信息，因为我需要的数据嵌套在 XML 的深处。例如，仅提取我需要的内容并将其转换为数组，以便将其直接发送到数据库。

XML 开头如下：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
  <GetViewBidResponse xmlns="http://domain.com/SolutionWebService">
     <GetViewBidResult>
        <message>OK</message>
        <table>
           <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop">
              <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="Bidrod" msdata:UseCurrentLocale="true">
                 <xs:complexType>
                    <xs:choice minOccurs="0" maxOccurs="unbounded">
                       <xs:element name="Bid">
                          <xs:complexType>
                             <xs:sequence>
                                <xs:element name="rows" msprop:ColumnId="1" type="xs:string" minOccurs="0"/>
                                <xs:element name="Queue" msprop:ColumnId="2" type="xs:string" minOccurs="0"/>
                                <xs:element name="Running" msprop:ColumnId="3" type="xs:string" minOccurs="0"/>
                                <xs:element name="New" msprop:ColumnId="4" type="xs:string" minOccurs="0"/>
                                <xs:element name="Working" msprop:ColumnId="5" type="xs:string" minOccurs="0"/>
                                <xs:element name="Done" msprop:ColumnId="6" type="xs:string" minOccurs="0"/>
                                <xs:element name="Agree" msprop:ColumnId="7" type="xs:string" minOccurs="0"/>
                                <xs:element name="Canceled" msprop:ColumnId="8" type="xs:string" minOccurs="0"/>
                                <xs:element name="Hold" msprop:ColumnId="9" type="xs:string" minOccurs="0"/>
                                <xs:element name="Test" msprop:ColumnId="10" type="xs:string" minOccurs="0"/>
                                <xs:element name="All" msprop:ColumnId="11" type="xs:string" minOccurs="0"/>
                             </xs:sequence>
                          </xs:complexType>
                       </xs:element>
                    </xs:choice>
                 </xs:complexType>
              </xs:element>
           </xs:schema>
           <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
              <DocumentElement xmlns="">
                 <Bid diffgr:id="Bid1" msdata:rowOrder="0" diffgr:hasChanges="inserted">
                    <rows>1</rodun>
                    <Queue>Testqueue1</Queue>
                    <Running>1</Running>
                    <New>2</New>
                    <Working>7</Working>
                    <Done>4802</Lokið>
                    <Agree>1</Agree>
                    <Canceled>87</Canceled>
                    <Hold>3</Hold>
                    <Test>0</Test>
                    <All>4902</All>
                 </Bid>
                 <Bid diffgr:id="Bid2" msdata:rowOrder="1" diffgr:hasChanges="inserted">
                    <rows>1</rodun>
                    <Queue>Testqueue2</Queue>
                    <Running>23</Running>
                    <New>q2</New>
                    <Working>27</Working>
                    <Done>48</Lokið>
                    <Agree>11</Agree>
                    <Canceled>827</Canceled>
                    <Hold>31</Hold>
                    <Test>10</Test>
                    <All>402</All>
                 </Bid>
                 <Bid diffgr:id="Bid3" msdata:rowOrder="2" diffgr:hasChanges="inserted">
...shortened, this continues from "diffgr:id="Bid1" to "diffgr:id="Bid97"... 
```

我想做的是提取每个元素下的所有子元素`<Bid diffgr:id="Bid1"`（从`DocumentElement`元素之后开始）。最好以仅包含以下信息的数组结尾：

```
[DocumentElement] => Array ( // Optional
[Bid] => Array (          // Optional
  [0] => Array (
    [rows] => 1
    [Queue] => Testqueue1
    [Running] => 1
    [New] => 2
    [Working] => 7
    [Done] => 4802
    [Agree] => 1
    [Canceled] => 87
    [Hold] => 3
    [Test] => 0
    [All] => 4902 )
  [1] => Array (
    [rows] => 1
    [Queue] => Testqueue2
    [Running] => 1
    [New] => 4
    [Working] => 3
  ... and continues with all "Bid diffgr:id="BidXX" (number can reach 99) ... 
```

如果我能得到帮助，只提取我需要的数组，那么我可以管理其余部分（将它们添加到数据库中）。

我一直在查看 xpath，但没有成功将它绑定到正确的 xpath 元素。这是我尝试过但没有运气的方法：

```
$xml = simplexml_load_string($response);
$id = $xml->xpath("Bid[@id=Bid*]");  // Not sure how to use the wildcard
var_dump($id); 
```

我还能够使用[XML2ARRAY](http://www.bin-co.com/php/scripts/xml2array/)将整个 XML 转换为数组，但是我仍然需要只提取上面提到的内容。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:05:17.127

我看到了 的优势`SoapClient`，但想回答 xpath 部分：

```
$results = $xml->xpath("//Bid"); 
```

将选择所有`<Bid>`节点及其子节点。要访问这些：

```
foreach ($results as $result) {

    echo $result->rows . "<br />";

} 
```

但是，您的 XML 中的此节点似乎已损坏：

```
<rows>1</rodun> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:44:31.563

您应该使用[`SoapClient`](http://www.php.net/manual/en/class.soapclient.php)该类进行 SOAP 通信。尽管可以仅使用*低级别*的HTTP 和 XML 处理来实现soap客户端，但我不建议您在大多数情况下这样做，因为如果数据结构变得复杂，这可能会变得很奇怪。

使用我链接的页面及其上的评论作为一个很好的起点。这是另一个教程链接：[http ://devzone.zend.com/25/php-soap-extension/](http://devzone.zend.com/25/php-soap-extension/)

# asp.net-mvc-3 - 在 MVC Sitemap 节点中设置一个值并在操作中访问它以区分用户单击了哪个按钮？

> ID：15954343
> 
> 赞同：0
> 
> 时间：2013-04-11T16:43:07.523
> 
> 标签：asp.net-mvc-3

如何在 MVC SiteMap 节点中设置值并在操作中访问它。

我正在附加一个带有我的问题场景和我的问题的图像文件？

![在此处输入图像描述](https://i.stack.imgur.com/ocVPc.jpg)

有人可以建议我，我该如何解决这个问题？

# operating-system - 上下文切换和操作系统调度程序算法

> ID：15954344
> 
> 赞同：2
> 
> 时间：2013-04-11T16:43:10.663
> 
> 标签：operating-system, scheduler, context-switch

因此，当一个进程切换到另一个进程时，我理解它的方式，内核将保存进程的当前状态，然后操作系统调度程序算法将选择下一个要交换的进程。这个算法本身是否不需要加载因为它是一个过程？如果是，内核本身在执行切换时是否使用 CPU 时间内核如何在上下文切换中访问 CPU 周期？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:23:04.987

将调度程序视为用于决定接下来运行哪个进程的算法。它可以在一个进程切换出一个核心后在同一个核心上运行，并会选择下一个被切入的进程。

# date - Highcharts：比较具有不同日期的 2 行

> ID：15954345
> 
> 赞同：0
> 
> 时间：2013-04-11T16:43:10.883
> 
> 标签：date, highcharts

我正在比较 2 个 twitter 用户谁在特定日期收到最多推文，并将其放在 Highcharts 的折线图中，我有以下 mysql 代码：

```
<?php 

require('mysql_connect.php');

$artist1 = $_POST['dj1'];
$artist2 = $_POST['dj2'];
$dates_result = mysqli_query($con,"SELECT DISTINCT(tweetDate) FROM tb_tweetDetails");
while ($row = mysqli_fetch_array($dates_result)) {
$dates[] = $row['tweetDate'];
}
$artist1_tweetsADay_result =    mysqli_query($con,"SELECT tweetDate,COUNT('tweetIds') AS 'amountTweets' FROM tb_tweetDetails WHERE tweetId IN 
                            (SELECT tweetId FROM tb_tweetLink LEFT JOIN tb_artists ON 
                            (tb_tweetLink.artistId = tb_artists.artistId) where artistName = '$artist1') GROUP BY tweetDate");
while ($row = mysqli_fetch_array($artist1_tweetsADay_result)) {
$artist1_tweetsADay_date[] = "'" . $row['tweetDate'] . "'";
$artist1_tweetsADay_amount[] = $row['amountTweets'];
}
$artist1_tweetsADay_result =    mysqli_query($con,"SELECT tweetDate,COUNT('tweetIds') AS 'amountTweets' FROM tb_tweetDetails WHERE tweetId IN 
                            (SELECT tweetId FROM tb_tweetLink LEFT JOIN tb_artists ON 
                            (tb_tweetLink.artistId = tb_artists.artistId) where artistName = '$artist2') GROUP BY tweetDate");
while ($row = mysqli_fetch_array($artist1_tweetsADay_result)) {
$artist2_tweetsADay_date[] = "'" . $row['tweetDate'] . "'";
$artist2_tweetsADay_amount[] = $row['amountTweets'];
}

?> 
```

我用它来收集我收集推文数据的所有可用日期（也来自其他选定的 2 位艺术家）

然后我得到用户当天收到的推文数量以及日期。这一切都很好，输出如我所料。

现在，当我将其放入图表时，我将日期数组作为 xAxis 类别。并将两位艺术家的 tweetAmount 放入数据输入中以创建两条线。

问题是：

艺术家 1 的数据为 06-04-2013、08-04-2013 和 10-04-2013 艺术家 2 的数据为 07-04-2013、08-04-2013、09-04-2013 和 10-04-2013 （所以每天实际上都在我的数据库中）

艺术家 2 将在 06-04-2013 获得 07-04-2013 的数据（因为该值是第一位的）艺术家 1 和 2 在 07-04-2013 类别下拥有 08-04-2013，因为这是第二个可用日期.

等等等等

是否有可能我可以使用日期数组来修复推文数量的数组，以便每个丢失的日期都分配给它 0 以便该行与日期保持正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:02:30.663

为了实现这一点，我会做两件事：

1) 使用日期时间 x 轴

2) 在从表中提取数据时，除了您已经构建的数组之外，还创建一个包含每个返回日期的数组。遍历日期数组，并为每个日期检查各个数组的值。如果不存在值，则创建它。

然后，您将拥有两个具有相同日期的数组，您可以将它们绘制在日期时间轴上，而不必担心类别索引匹配。

# php - 如何将变量值从一个 php 文件更新到另一个 php 文件

> ID：15954352
> 
> 赞同：0
> 
> 时间：2013-04-11T16:43:36.557
> 
> 标签：php

我的项目中有三个 php 文件，即“initial.php”、“inc.php”、“dec.php”。我在其中声明了一个变量`intial.php`

例如：

```
$every_where=0; 
```

我在其他两个文件中包含了“intial.php”，我想增加和减少变量“$everywher”的值。所以我所做的是：在“inc.php”中

```
$every_where= $every_where -1; 
```

在“dec.php”中

```
$every_where= $every_where -1; 
```

但是当我从“inc.php”移动到“dec.php”时，它又从 0 开始，反之亦然。但是想要一种方法，以便`$every_where`在每次递增或递减`initial.php`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:48:25.177

最简单的解决方案是将值存储在会话中。

在脚本的开头使用这个：

```
session_start();

if (!isset($_SESSION['every_where']) {
    $every_where = 0;
} else {
    $every_where = $_SESSION['every_where']
} 
```

然后你可以通过这样的页面调用来增加和减少值：

```
--$every_where; // in dec.php
++$every_where; // in inc.php 
```

在脚本结束时将值存储回会话：

```
$_SESSION['every_where'] = $every_where; 
```

# c# - ViewModel 属性上的装饰以使用不同的名称进行绑定

> ID：15954357
> 
> 赞同：4
> 
> 时间：2013-04-11T16:44:06.067
> 
> 标签：c#, asp.net-mvc-3, defaultmodelbinder, asp.net-mvc-viewmodel

在 MVC3 上，有没有办法装饰 ViewModel 属性以便`DefaultModelBinder`在请求中为其使用不同的名称？

例如，假设您有以下视图模型：

```
public class SomeModel 
{
  public string Direction {get;set;}
} 
```

但是传入的参数是来自外部源（例如某些第三方组件）的*Dir 。*

我知道自定义模型绑定器可以处理这个问题，但我认为必须有一种方法来装饰属性，类似于动作参数可以`Bind(Prefix="...")`用来定义该映射的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:53:57.167

您总是可以创建另一个属性：

```
public class SomeModel 
{
  public string Direction {get;set;}
  public string Dir
  {
    get { return this.Direction; }
    set { this.Direction = value; }
  }
} 
```

我还要提一下，视图中使用的 ViewModel (cshtml/vbhtml) 不必与 Post 方法中使用的 ViewModel 相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T16:59:17.240

好的，所以在对类似问题进行更多研究并在这里看到反馈之后，似乎我的问题的答案基本上是“**否**”。

没有开箱即用的方式，因此必须使用自定义绑定器或重命名属性。

可以在此处找到具有更详细答案的类似问题：[如何将 URL 参数绑定到具有不同名称的模型属性](https://stackoverflow.com/q/8507699/1373170)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T15:02:32.800

我能够使用该`FromForm`属性在 ASP.NET MVC Core 中完成此操作。

```
public class DataTableOrder
{
    public int Column { get; set; }

    [FromForm(Name = "Dir")]
    public string Direction { get; set; }
} 
```

文档：[https ://docs.asp.net/en/latest/mvc/models/model-binding.html#customize-model-binding-behavior-with-attributes](https://docs.asp.net/en/latest/mvc/models/model-binding.html#customize-model-binding-behavior-with-attributes)

但是，根据您是执行 GET 还是 POST，您可能想要使用`[FromQuery]`而不是`[FromForm]`我想。

# python - 超类继承自子类。课程。他们疯了吗？

> ID：15954360
> 
> 赞同：-2
> 
> 时间：2013-04-11T16:44:27.377
> 
> 标签：python, class, inheritance, subclass, superclass

[学习编程：制作质量代码](https://class.coursera.org/programming2-001/lecture/25)

截屏

![在此处输入图像描述](https://i.stack.imgur.com/PlnNc.png) 这是 Coursera Learn to Program Crafting Quality Code Course 的视频讲座。所以在视频中有一个测验。

```
class MyInt(int):
    # some code there 
```

他们给出了 4 个答案，我需要选择一个正确的答案。我已经一一选择了我的答案，但最后他们说正确的答案绝对是错误的。

> int 是 MyInt 的子类

这个问题[Python: How do I make a subclass from a superclass?](https://stackoverflow.com/questions/1607612/python-how-do-i-make-a-subclass-from-a-superclass) 给了我绝对正确的确认，我是对的。

真相在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:47:17.987

There must be something wrong with the quiz, the code as written in the question is declaring that `MyInt` is a *subclass* of `int` (or equivalently: that `int` is the *superclass* of `MyInt`), no the other way around.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:49:24.607

如果你从一个类继承，那个类就是超类。在示例`int`中是超（或基）类并且`MyInt`是子类。正如你所怀疑的，他们错了。;-)

# java - 奇怪的重绘功能

> ID：15954361
> 
> 赞同：1
> 
> 时间：2013-04-11T16:44:30.727
> 
> 标签：java, swing, repaint

**节目简介**

嗨，大家好。今天早上我很无聊，决定写一个绘图程序。最终我将能够在这个软件上运行*Dijksta 算法之类的东西。*

当屏幕上发生任何变化时，会调用绘制所有内容的`repaint`方法。`JPanel`这是`JPanel`绘画方法：

```
public void paint(Graphics g)
{
    for(Node node : graph.getNodes()){
        node.paint(g);
    }

    for(Link link : graph.getLinks()){
        link.paint(g);
    }
} 
```

它只是循环遍历列表中的每个元素，并绘制它们。

节点类的paint方法是：

```
public void paint(Graphics g)
{
    g.setColor(color);
    g.drawOval(location.x, location.y, 50, 50);
    g.setColor(Color.BLACK);
    g.drawString(name, location.x + 20, location.y + 20);
} 
```

对于链接，它是：

```
public void paint(Graphics g)
{
    Point p1 = node1.getLocation();
    Point p2 = node2.getLocation();
    // Grab the two nodes from the link.
    g.drawLine(p1.x + 20, p1.y + 20, p2.x + 20, p2.y + 20);
    // Draw the line between them.
    int midPointX = ((p1.x + p2.x) / 2) + (100 / (p2.x - p1.x));
    int midPointY = ((p1.y + p2.y) / 2) + 30;
    // Compute the mid point of the line and get it closer to the line.
    g.setColor(Color.BLACK);
    g.drawString(String.valueOf(weight), midPointX, midPointY);
} 
```

**问题**

`JOptionPane`当我使用该类时出现了我遇到的问题。当我选择添加新节点的选项并选择放置它的位置时，会`inputDialog`弹出一个，询问节点的名称。

节点添加得很好，因为会发生这种行为：

![在此处输入图像描述](https://i.stack.imgur.com/yHA8X.png) 这是个常见的问题吗; 一个问题，`paint`或者`repaint`也许？

尽管如此，这里是调用的代码`inputDialog`：

```
Function addNode = functionFac.getInstance(state);
                String name = "";
                while(!name.matches("[A-Za-z]+")) {
                    name = JOptionPane.showInputDialog("Please enter the name of the node.", null);
                }

                addNode.execute(stage, new NodeMessage(arg0.getPoint(), name)); 
```

*PS*：函数是我写的接口类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:16:40.740

“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`。”—<a href="http://www.oracle.com/technetwork/java/painting-140037.html#callbacks" rel="nofollow noreferrer">*在 AWT 和 Swing 中绘画: 绘画方法*。

“如果您不尊重 opaque 属性，您可能会看到视觉伪影。”—<a href="http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent %28java.awt.Graphics%29" rel="nofollow noreferrer">`JComponent`

另请参阅检查相关问题的此[问答。](https://stackoverflow.com/q/7213178/230513)

# extjs - 一次将 Extjs 存储的所有记录发送到服务器

> ID：15954363
> 
> 赞同：5
> 
> 时间：2013-04-11T16:44:33.053
> 
> 标签：extjs, extjs4

如何在一个 POST 调用中将我的整个商店数据发送到服务器？它可以是 json 格式。

谢谢。

更新：

这是我的商店代码：

```
Ext.define('App.store.consultorio.Receita', {
    extend: 'Ext.data.Store',
    model: 'App.model.consultorio.Receita',
    autoLoad: false,
    proxy: {

        type: 'rest',
        reader: {
            type: 'json'
        },
        writer: {
            type: 'json'
        },
        url: 'consultas/receita.json'
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:08:38.997

您可以将存储中的每条记录设置为脏，然后调用 sync()

```
store.each(function(record){
    record.setDirty();
});

store.sync(); 
```

此外，您的商店正在使用 RESTful 代理，默认情况下不会批处理操作。请参阅[http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.proxy.Rest-cfg-batchActions](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.proxy.Rest-cfg-batchActions)

您的商店应如下所示：

```
Ext.define('App.store.consultorio.Receita', {
    extend: 'Ext.data.Store',
    model: 'App.model.consultorio.Receita',
    autoLoad: false,
    proxy: {

        type: 'rest',
        batchActions: true, //<------
        reader: {
            type: 'json'
        },
        writer: {
            type: 'json'
        },
        url: 'consultas/receita.json'
    }
}); 
```

# android - 将 Db 存储在资产文件夹中或通过代码创建

> ID：15954364
> 
> 赞同：0
> 
> 时间：2013-04-11T16:44:34.333
> 
> 标签：android

在我的 android 项目中，我需要数据库来存储数据以供离线使用。

为此，我正在考虑两个选项 1）创建空数据库并将其复制到资产 2）通过代码创建数据库

哪个选项会很好，因为我的应用正在处理安全数据。如果我们将 db 结构存储在资产文件夹中，它将导致任何安全漏洞，因为如果我们提取 .apk 文件，它将很容易获得。

谢谢你的支持

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:48:23.893

如果您的数据库中有一些您不希望合法用户看到的内容，请寻找一个新项目，因为您无法实现。如您所知，在 APK 中使用静态数据库很容易查看，但从您的应用程序创建它也会留下可查看的内容。您可以加密内容，但是您会遇到如何以用户无法访问的方式存储密钥的问题——所以您真的没有解决任何问题。

回到你最初的问题——数据是静态的，还是你的应用程序会对其进行更改？如果数据是静态的，那么提供一个预填充的数据库就可以了。但是，如果应用程序旨在能够进行更改，那么让应用程序创建和管理数据库、其模式和内容的更新会为您提供更好的服务。遵循 Google 的示例将帮助您实现目标。

# actionscript-3 - hitTestObject 在两个不同类的两个数组中的对象之间

> ID：15954365
> 
> 赞同：0
> 
> 时间：2013-04-11T16:44:38.710
> 
> 标签：actionscript-3

在我的 Main 类中，我有一个 Enemy 对象数组，在我的 Player 类中，我有一个 Bullet 对象数组。在其中的某个地方，我需要一种方法来测试任何玩家子弹和敌人之间的碰撞，当检测到碰撞时，调用 Bullet 的 destroyBullet() 方法和 Enemy 的 destroyEnemy() 方法。

如果两个数组都在同一个类中，我可能会弄清楚如何做到这一点，但否则我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:47:28.860

I see no reason to not also hold your bullets array in your main class, but if you want to do this as you have it you'll need public access to Player.bullets

This should work from your main class. You will want to put this inside of a checkCollisions function that runs in your game loop.

```
//loop through bullets first, because if no bullets are fired, no point in checking
for each(var bullet:Bullet in player.bullets) {
  for each(var enemy:Enemy in enemies) {
    if(bullet.hitTestObect(enemy)) {
      bullet.destroyBullet();
      enemy.destroyEnemy();
    }
  }
} 
```

Keep in mind that destroying a bullet or enemy will involve more than removing the sprite and cleanup. You'll also need to splice the arrays that each object is stored in.

# php - 获得与 LIKE 的完全匹配 - SQL/PHP

> ID：15954367
> 
> 赞同：3
> 
> 时间：2013-04-11T16:44:46.977
> 
> 标签：php, mysql, sql, sql-like

鉴于文字：

```
"Hello, I'm from Hell",
"Hello, I'm from Ell" 
```

和以下 SQL 子句：

```
SELECT * FROM table WHERE text LIKE '%ell%' 
```

我得到了上面的两个文本，但我不想同时得到两个文本，因为我正在寻找文本“Ell”而不是“Hell”

如果有人知道我的意思，你能帮帮我吗？

提前致谢！

**编辑：**

更好的例子

就像你想寻找“大”这个词，但它不能是“更大”或“最大”等任何其他词的一部分

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T16:51:24.867

您可以使用 MySQL Regex 单词边界匹配：

```
SELECT * FROM table WHERE text REGEXP '[[:<:]]ell[[:>:]]' 
```

这匹配一个字符串，该字符串包含`ell`在任一侧具有单词边界的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:48:38.160

你也可以搜索一个空间吗？

```
SELECT * 
FROM table 
WHERE text LIKE '% ell%'
OR text LIKE 'ell%' // needed if string starts with ell 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:49:50.973

你可以试试这个：

```
SELECT * FROM table WHERE text LIKE BINARY '%ell%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:04:49.860

选择完全匹配不区分大小写

SELECT * FROM table where LOWER(column) like BINARY LOWER('ell')

如果文本有多行，它可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-06T19:53:03.383

您可以在查询中使用 REGEXP。看看这个资源，它包含你需要的所有细节。

语法简单如下

```
$sql= "select * from post where title REGEXP '$s'"; 
```

# django - Django 和 Tastypie：访问与新创建的资源相关的对象

> ID：15954368
> 
> 赞同：3
> 
> 时间：2013-04-11T16:44:47.003
> 
> 标签：django, rest, tastypie

假设我的应用程序中有以下模型：

```
from django.contrib.auth.models import User

class Category(models.Model):
    user = models.ForeignKey(User)

class Product(models.Model):
    category = models.ForeignKey(Category) 
```

所以我的用户拥有他们的类别，我不希望他们能够在他人拥有的类别中发布产品。我想实现我自己的 Tastypie 授权方法 ( `create_detail`)，该方法将检查添加产品的用户是否拥有他希望将此产品添加到的类别。

我的问题是`Authorization.create_detail(self, object_list, bundle)`我覆盖的方法只接收一个`bundle`空的`bundle.obj`和一些原始数据在`bundle.data`. 如何访问与我的用户想要创建的`Category`对象相关联的对象？`Product`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:21:48.410

关于什么 ：

```
category = Category.objects.get(pk=bundle.data['category']) 
```

?

# razor - Umbraco 从宏脚本查询？

> ID：15954376
> 
> 赞同：2
> 
> 时间：2013-04-11T16:45:36.067
> 
> 标签：razor, umbraco

Umbraco 版本 = 6.0.3

我正在尝试在宏脚本中做一些看似简单的事情。基本上，我想遍历所有不是类别的可见子内容：

```
@inherits umbraco.MacroEngines.DynamicNodeContext

@{
var subs = Model.Children.Where("Visible && DocumentTypeAlias != \"Category\"");
}
<span>Count: @subs.Count()</span>
@if (subs.Any())
{
    <ul>            
        @foreach (var sub in subs)
        {
            <li>
                <a href="@sub.Url">@sub.Name</a>
            </li>
        }
    </ul>
} 
```

如果我取出 where 子句的“可见”部分，它可以正常工作（显示标记为隐藏的内容除外）。我也可以通过删除“DocumentTypeAlias”单独使用“Visible”，但随后会显示包括类别在内的所有可见内容。

我也尝试使用强类型查询`@Model.Content.Children.Where(x => x.IsVisible() && x.DocumentTypeAlias != "Category")`，但我收到一个错误，即无法将 lambda 函数与动态类型的内容一起使用。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T18:40:25.227

两件事情：

*   该`DynamicNode` `Where`子句使用参数语法。
*   用于`NodeTypeAlias`检查文档类型。

例子：

```
var subs = Model.Children.Where("Visible && NodeTypeAlias != @0", "Category"); 
```

以下是一些 Umbraco 剃须刀资源：

*   [Umbraco 4.7 Razor 功能演练](http://umbraco.com/follow-us/blog-archive/2011/2/23/umbraco-47-razor-feature-walkthrough-%E2%80%93-part-1.aspx)。这是一个由 8 部分组成的系列，内容非常丰富。不要被版本参考推迟，它对 Umbraco 6 仍然有效。
*   [Razor DynamicNode 备忘单](http://our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet)。

# javascript - text username change with timer

> ID：15954377
> 
> 赞同：0
> 
> 时间：2013-04-11T16:45:36.370
> 
> 标签：javascript

I need to create a timer that changes and stops when mouse is over the username i cannot edit the HTML so i have to change the username using the text below

```
$(document).ready(function() {    
    $("a").css("visibility","visible");    
    $("img[width!='32']").css("display","inline");    
    $("a[href*='/?q=ntlp/user/profile/197566']").html("username goes here");    
    $("a[href*='/?q=ntlp/user/profile/197566']").attr("href","www.website.com");
}); 
```

but need to change between two usernames and i don't know how to do it.

# generics - 是否有可能产生一个通用的方面？

> ID：15954378
> 
> 赞同：0
> 
> 时间：2013-04-11T16:45:40.643
> 
> 标签：generics, aop, aspectj

例如这个观察者模式

[https://github.com/eclipse/org.aspectj/blob/master/docs/sandbox/ubc-design-patterns/src/ca/ubc/cs/spl/aspectPatterns/patternLibrary/ObserverProtocol.java](https://github.com/eclipse/org.aspectj/blob/master/docs/sandbox/ubc-design-patterns/src/ca/ubc/cs/spl/aspectPatterns/patternLibrary/ObserverProtocol.java)

可以这样写

```
public abstract aspect ObserverProtocol<S implements Subject, O implements Observer> {
  // ...
  protected abstract pointcut subjectChange(S s);
  protected abstract void updateObserver(S subject, O observer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:45:19.647

是的，通用抽象方面是可能的，请参阅[AspectJ 5 Development Kit Developer's Notebook](http://www.eclipse.org/aspectj/doc/next/adk15notebook/generics-inAspectJ5.html#generic-aspects)。你会在那里找到一个有启发性的例子。如果您需要更多帮助，请给我一个标志。

* * *

**更新**作为对以下问题的回应：好吧，在这种情况下，我认为在观察者模式中使用泛型没有多大价值，但这是可能的，并且需要一些重构。我克隆了 repo 并稍微重构了代码。现在它看起来像这样（对不起，这会很长！）：

```
package ca.ubc.cs.spl.aspectPatterns.patternLibrary;

import java.util.WeakHashMap;
import java.util.List;
import java.util.LinkedList;
import java.util.Iterator;

public abstract aspect ObserverProtocol<S extends Subject, O extends Observer> {
    private WeakHashMap<S, List<O>> perSubjectObservers =
        new WeakHashMap<S, List<O>>();

    protected List<O> getObservers(S subject) {
        List<O> observers = perSubjectObservers.get(subject);
        if (observers == null) {
            observers = new LinkedList<O>();
            perSubjectObservers.put(subject, observers);
        }
        return observers;
    }

    public void addObserver(S subject, O observer) {
        getObservers(subject).add(observer);
    }

    public void removeObserver(S subject, O observer) {
        getObservers(subject).remove(observer);
    }

    protected abstract pointcut subjectChange(S s);

    after(S subject): subjectChange(subject) {
        Iterator<O> iter = getObservers(subject).iterator();
        while (iter.hasNext())
            updateObserver(subject, iter.next());
    }

    protected abstract void updateObserver(S subject, O observer);
} 
```

```
package ca.ubc.cs.spl.aspectPatterns.patternLibrary;

public interface Subject {} 
```

```
package ca.ubc.cs.spl.aspectPatterns.patternLibrary;

public interface Observer {} 
```

```
package ca.ubc.cs.spl.aspectPatterns.examples.observer.aspectj;

import java.awt.Color;

public class Point {
    private int x;
    private int y;
    private Color color;

    public Point(int x, int y, Color color) {
        this.x = x;
        this.y = y;
        this.color = color;
    }

    public int getX() { return x; }
    public int getY() { return y; }
    public void setX(int x) { this.x = x; }
    public void setY(int y) { this.y = y; }
    public Color getColor() { return color; }
    public void setColor(Color color) { this.color = color; }
} 
```

```
package ca.ubc.cs.spl.aspectPatterns.examples.observer.aspectj;

public class Screen {
    private String name;

    public Screen(String s) {
        this.name = s;
    }

    public void display(String s) {
        System.out.println(name + ": " + s);
    }
} 
```

```
package ca.ubc.cs.spl.aspectPatterns.examples.observer.aspectj;

import ca.ubc.cs.spl.aspectPatterns.patternLibrary.Subject;
import ca.ubc.cs.spl.aspectPatterns.patternLibrary.Observer;

public aspect SubjectObserverDeclarations {
    declare parents: Point  implements Subject;
    declare parents: Screen implements Observer;
    declare parents: Screen implements Subject;
} 
```

```
package ca.ubc.cs.spl.aspectPatterns.examples.observer.aspectj;

import java.awt.Color;
import ca.ubc.cs.spl.aspectPatterns.patternLibrary.ObserverProtocol;

public aspect ColorObserver extends ObserverProtocol<Point, Screen> {
    declare precedence : SubjectObserverDeclarations, ColorObserver;

    protected pointcut subjectChange(Point subject):
        call(void Point.setColor(Color)) && target(subject);

    protected void updateObserver(Point subject, Screen observer) {
        observer.display("screen updated (point subject changed color)");
    }
} 
```

```
package ca.ubc.cs.spl.aspectPatterns.examples.observer.aspectj;

import ca.ubc.cs.spl.aspectPatterns.patternLibrary.ObserverProtocol;

public aspect CoordinateObserver extends ObserverProtocol<Point, Screen>{
    declare precedence : SubjectObserverDeclarations, CoordinateObserver;

    protected pointcut subjectChange(Point subject):
        (call(void Point.setX(int)) || call(void Point.setY(int))) && target(subject);

    protected void updateObserver(Point subject, Screen observer) {
        observer.display("screen updated (point subject changed coordinates)");
    }
} 
```

```
package ca.ubc.cs.spl.aspectPatterns.examples.observer.aspectj;

import ca.ubc.cs.spl.aspectPatterns.patternLibrary.ObserverProtocol;

public aspect ScreenObserver extends ObserverProtocol<Screen, Screen>{
    declare precedence : SubjectObserverDeclarations, ScreenObserver;

    protected pointcut subjectChange(Screen subject):
        call(void Screen.display(String)) && target(subject);

    protected void updateObserver(Screen subject, Screen observer) {
        observer.display("screen updated (screen subject displayed message)");
    }
} 
```

```
package ca.ubc.cs.spl.aspectPatterns.examples.observer.aspectj;

import java.awt.Color;

public class Main {
    public static void main(String argv[]) {
        System.out.println("Creating screens s1, s2, s3, s4, s5 and point p");
        Point p = new Point(5, 5, Color.blue);
        Screen s1 = new Screen("s1");
        Screen s2 = new Screen("s2");
        Screen s3 = new Screen("s3");
        Screen s4 = new Screen("s4");
        Screen s5 = new Screen("s5");

        System.out.println("Creating observing relationships:");
        System.out.println("- s1 and s2 observe color changes to p");
        System.out.println("- s3 and s4 observe coordinate changes to p");
        System.out.println("- s5 observes s2's and s4's display() method");

        ColorObserver.aspectOf().addObserver(p, s1);
        ColorObserver.aspectOf().addObserver(p, s2);

        CoordinateObserver.aspectOf().addObserver(p, s3);
        CoordinateObserver.aspectOf().addObserver(p, s4);

        ScreenObserver.aspectOf().addObserver(s2, s5);
        ScreenObserver.aspectOf().addObserver(s4, s5);

        System.out.println("Changing p's color:");
        p.setColor(Color.red);

        System.out.println("Changing p's x-coordinate:");
        p.setX(4);

        System.out.println("done.");
    }
} 
```

如您所见，抽象基础方面`ObserverProtocol`现在使用泛型，但代价是我们现在需要`SubjectObserverDeclarations`为我们的`declare parents`语句提供方面，否则派生方面无法使用类，因为如果我们在其中声明父级，则为时已晚派生方面以正确编译（母鸡问题）。

您还看到，因此切入点`subjectChange`现在将其目标绑定到具体类，而不是接口`Subject`。同样，方法`updateObserver`也使用类而不是接口。

为了简单起见，我从基本方面提取了接口`Subject`，`Observer`以避免像这样的方面声明：

```
public abstract aspect ObserverProtocol<
    S extends ObserverProtocol.Subject,
    O extends ObserverProtocol.Observer>
{
    //...
} 
```

# apache-flex - 类引发的异常的元数据

> ID：15954380
> 
> 赞同：0
> 
> 时间：2013-04-11T16:45:44.850
> 
> 标签：apache-flex, flash-builder

Flash builder 允许我为类触发的事件插入元数据，例如：

```
[Event("myEvent", "flash.events.Event")]
public class MyClass() {

} 
```

有没有办法对异常做同样的事情？

目前我已经[在这里](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf680e1-7ffe.html)检查过，但看不到它的记录。也许这甚至不值得，你的想法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:02:44.020

有多种方法可以创建自己的元数据；并在编译时将其添加到您的应用程序中。使用[keep-as3-metadata 编译器参数](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html)。

由您来编写代码以在运行时对其进行处理；或构建 IDE 扩展以在编写代码时使用代码。

要在运行时访问此类元数据，您需要执行某种类型的自省。 [这是一些关于此的文档](http://livedocs.adobe.com/flex/3/html/help.html?content=usingas_8.html)和[另一个 StackOverflow 问题](https://stackoverflow.com/questions/5729294/custom-metadata-in-as3-flex)。

许多 Flex 框架都使用自定义元数据。

# css - 删除冲突的样式 - Bootstrap 和 Google 自定义搜索

> ID：15954381
> 
> 赞同：5
> 
> 时间：2013-04-11T16:45:47.803
> 
> 标签：css, twitter-bootstrap, google-search

从我的网站看下面的图片：www.kokorugs.com

我正在使用 Boostrap，并且我相信存在一些冲突的 CSS 样式。

问题是我看不到 Google 的 CSS，也无法弄清楚如何覆盖这种样式。

![在此处输入图像描述](https://i.stack.imgur.com/A3akB.jpg)

我的代码（来自谷歌）如下：

```
 <aside class="box" style="padding:10px 0;">

            <script>
              (function() {
                var cx = '009058734720051694368:e41h4lf-hsk';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                    '//www.google.com/cse/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
            <gcse:search></gcse:search> 

        </aside> 
```

我的“盒子”类的 CSS 是无关紧要的，但我会包括它以避免任何问题：

```
.box {
background: #ffffff;
border: 2px solid #bcd78d;
border-radius: 15px;
-moz-border-radius: 15px;
-webkit-border-radius: 15px;
margin-top: 10px;
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box; 
box-sizing: border-box;
} 
```

感谢您在删除此双边框方面提供的任何帮助。谢谢！

更新：

当我尝试这个 CSS 规则时：

```
* {
    border: none !important;
} 
```

只有谷歌的边框被删除了。图片如下：

![在此处输入图像描述](https://i.stack.imgur.com/ITGSe.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:56:57.693

边框从 bootstrap-combined.min.css 的这一部分应用：

```
textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
background-color: #FFF;
border: 1px solid #CCC;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-webkit-transition: border linear .2s, box-shadow linear .2s;
-moz-transition: border linear .2s, box-shadow linear .2s;
-o-transition: border linear .2s, box-shadow linear .2s;
transition: border linear .2s, box-shadow linear .2s;
} 
```

因此，删除边框阴影将为您解决此问题：

```
 -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); 
```

或者覆盖它也可以提供帮助：

```
 -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:56:46.037

您看到的第二个边框实际上不是边框而是盒子阴影。它由您的引导 css 添加到所有输入，但搜索框不需要。您应该通过仅针对搜索框将其关闭来关闭它。将这样的内容添加到您的 css 中：

```
.gsc-input-box input[type="text"] {
  -webkit-box-shadow: none;
  box-shadow: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T11:02:06.523

用于完全纠正冲突使用

```
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
  -webkit-box-shadow: none;
  -moz-box-sizing: content-box;
  box-shadow: none;
}

input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
  box-sizing: content-box;
  line-height: normal;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-30T15:35:00.203

我使用以下 CSS，它适用于我：

```
.gsc-input-box input[type="text"], .gsc-input-box input[type="text"]:focus, .gsc-input-box input[type="text"]:active {
  -webkit-box-shadow: none;
  box-shadow: none;
    line-height: normal;
} 
```

* * *

行高：正常；

执行删除从文本框中弹出的文本的工作。

我还记录了谷歌自定义搜索在搜索结果选项卡中显示滚动条的修复：http: [//www.am22tech.com/google-custom-search-input-box-conflicting-bootstrap-css/](http://www.am22tech.com/google-custom-search-input-box-conflicting-bootstrap-css/)

# ios - UIImagePickerController with UIPopOverController, iPad ios 6

> ID：15954382
> 
> 赞同：1
> 
> 时间：2013-04-11T16:45:49.180
> 
> 标签：ios, objective-c, ipad, uiimagepickercontroller, uipopovercontroller

I am trying access the Photo Library from an iPad application. It is said that "On iPad, UIImagePickerController must be presented via UIPopoverController". That's exactly the log message that I get too.

Here is a snapshot of my app:

![https://www.evernote.com/shard/s241/sh/b0283978-b50b-425f-8e8f-b9a5a171c463/de48b8b2dfe7716fe304e85a18ecacfc](https://i.stack.imgur.com/7otP3.png)

Since I am already listing the options via a popover, it doesn't make sense to go another popover from within. The accessPhotoLibrary method gets called when the user taps on the "Photo Library" cell.

```
-(void)accessPhotoLibrary{
    NSLog(@"Photo library access requested!");
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]){
        NSLog(@"Photo Library");
        [imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
        [imagePickerController setDelegate:self];
        [imagePickerController setModalPresentationStyle:UIModalPresentationFullScreen];
        [self presentViewController:imagePickerController animated:YES completion:nil];
    }
    else{
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle: @"Photo Library"
                              message: @"Sorry, couldn't open your photos library"
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];
    }
} 
```

But how do I get around this problem of having to access the photo library using a popover when I am using one already??

Any help is much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:06:39.910

您可以在同一个弹出框中显示图像选择器。持有对弹出框的引用（呈现弹出框的父视图控制器可以传递引用），然后您可以执行以下操作：

```
[_parentPopover setContentViewController:imagePickerController animated:YES]; 
```

如果需要，您可以使用图像选择器视图控制器中的属性“contentSizeForViewInPopover”更改弹出窗口中显示的内容的大小。

# node.js - socket.io - disconnect event doesn't fire in xhr-polling

> ID：15954395
> 
> 赞同：5
> 
> 时间：2013-04-11T16:46:22.327
> 
> 标签：node.js, websocket, socket.io

In socket.io the disconnect event doesn't fire when the transport xhr-polling is active. If I switch the transport to websockets it works fine, but in xhr-polling its doesn't work.

```
/* Basics */
var express = require('express'),
    app = express(),
    server = require('http').createServer(app),
    io = require('socket.io').listen(server);

server.listen(1337, null);

io.set('transports', ['xhr-polling']);

// routing
app.get('/', function (req, res) {
    res.sendfile("index.html");
    app.use(express.static(__dirname));
});

io.sockets.on('connection', function (socket) 
    socket.on('disconnect', function() {
        console.log('LOL');
    });
}); 
```

In the following code the disconnect doesn't fire, but if I delete the line -
`io.set('transports', ['xhr-polling']);`
It works perfectly, so why it doesn't work with xhr-polling? but only with websockets?

How can I fix this? Am I missing something?

Thanks in Advance ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-02T12:54:01.467

我遇到了同样的问题，然后我在客户端套接字中使用了选项 {'sync disconnect on unload' : true}：

```
var socket = io.connect('http://yourServerDomain.com', {'sync disconnect on unload' : true}); 
```

它强制套接字立即发送断开连接事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T01:04:46.610

使用 XHR-Polling 无法立即检测到断开连接，因为客户端会为每条消息重复连接。

Socket.io 通过在 xhr 轮询套接字上设置不活动超时来解决这个问题。

这是相关文档：[https ://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

请参阅`heartbeat interval`配置选项。默认值为 25 秒。

Websocket 在浏览器和服务器之间维护一个持久的 tcp 套接字，因此 socket.io 通常可以在套接字断开连接时立即检测到。

# c++ - 邻接表函数中的分段错误错误

> ID：15954398
> 
> 赞同：0
> 
> 时间：2013-04-11T16:46:30.560
> 
> 标签：c++, pointers

我正在尝试编写一个函数，该函数使用由邻接列表表示的图形进行一些计算，但我得到了一个我没有得到的分段错误错误。基本上我首先“删除”一个节点，然后再次重新插入它。这是我的代码：

```
int AdjList::bruteForce (node** list) {
    int pointerIndex;
    node* help;
    node* help2;

    for (int i=0; i<boundary; i++) {
        huidigScore = 0;
        help2 = list[i];
        help = help2;
        help2 = help2->next;
        while (help2->next != NULL) {
            help->next = help2->next;
            help2->next = NULL;
            pointerIndex = help2->number;

            help2->next = help->next;
            help->next = help2;
            help2 = help2->next;

        }   
    }
} 
```

和列表初始化：

```
node** list;
node* help;
node* help2;
list = new node*[boundary];
for (int i=0; i<boundary; i++) {
    list[i] = new node;
    help = list[i];
    help->next = NULL;
    help->number = 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:51:04.250

在你的初始化 help->next 中总是设置为 null，因此当涉及到

```
help2 = help2->next;
while (help2->next != NULL) { 
```

help 2 为 NULL 并尝试在 while 循环中访问 help2->next 会导致段错误。
编辑
for 循环的最后一次迭代也发生了同样的事情，当 i 等于边界 1 时，help2 将保存指向列表中最后一个值的指针，help2->next 为 NULL，一切都将按照前面描述的场景进行。通过我在这里再次猜测列表中的最后一个条目将下一个设置为NULL。

# javascript - 在 ajax 加载的内容中对 div 执行 Jquery

> ID：15954399
> 
> 赞同：0
> 
> 时间：2013-04-11T16:46:33.277
> 
> 标签：javascript, jquery

我有一个名为 forms.php 的页面，其头部包含一个 javascript 和一个名为 fadeinContents 的 div

我使用 Ajax 将一个名为*#sections1*的文件的一部分加载到这个 div 中，效果很好

但是我需要在加载的内容上执行一些 Jquery单击它们时在淡入淡出内容中。我读过其他帖子，但不能很好地理解它们..

这是我的文件

*forms.php*

```
<html>
  <head>
    <script type="text/javascript" src="scripts/scripts.js"></script>
    <script type="text/javascript" src="scripts/login.js"></script>
  </head>
  <body>
   <div class="login_link">login</div>
   <div class="signup_link">signup</div>

    <div class="fadeinContents">
        <!--Loaded contents goes here -->
    </div>
</html> 
```

*这是我的jQuery*

```
$(document).ready(function(e) {
    $('#fadeinContents').load('forms.php #sections1');

    $('.login_link').click(function(e) {
        $('#fadeinContents').load('forms.php #sections1');
    });

    $('.signup_link').click(function(e) {   
        $('#fadeinContents').load('forms.php #sections2');
    });

    $('.recoverPassword').click(function(e) {
        $('#fadeinContents').load('forms.php #sections3');                     
    });

}); 
```

加载的文件包含

```
<div class="sections1">
    <div class="signup">
          <!-- Signup Forms Here -->
    </div>
</div>

<div class="sections2">
    <div class="login">
          <!-- loginForms Here -->
    </div>
</div>
<div class="sections3">
    <div class="recoverPassword">
          <!-- recover form Here -->
    </div>
</div> 
```

我的问题是恢复密码点击功能无法正常工作，因为它已加载，请问我怎样才能使它工作？
thnx提前..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:50:57.470

那么您应该以不同的方式绑定该事件。像这样试试

```
 $('.fadeinContents').delegate('.login_link', 'click', function(e) {
       $('#fadeinContents').load('forms.php #sections3');                     
  }); 
```

以此类推。

这意味着 click 事件被绑定到了，`.fadeinContents`但是当被触发时，它会检查目标是否是 a `.login_link`，如果是，它将触发给定的回调。因此，将事件处理程序委托给更高的节点将确保无论节点的内容何时加载/更改或您拥有多少元素，如果它们符合事件处理程序将触发的条件。

委派事件也更节省内存。例如，如果您有一百个要添加单击事件的单元格，则执行 a`$(".cell").click(`将在每个单元格上附加一个事件侦听器。将其委托给`body`例如 with`$("body").delegate('.cell', 'click',` 只会附加一个事件（然后在那里进行一些循环和检查，这是真的），但您最终只会得到一个事件侦听器，以后添加或删除多少节点都没有关系. 他们将触发该点击事件

# java - JButton ActionListener Integration Issue

> ID：15954400
> 
> 赞同：2
> 
> 时间：2013-04-11T16:46:35.497
> 
> 标签：java, swing, html-parsing, jbutton, actionlistener

I am relatively new to Java and recently I have been working on a GUI based html parser. The interface is simple, consisting of:

1.  `JTextField` for entering a search term
2.  `JButton` b1 to initiate the search
3.  `JButton` b2 to exit
4.  `JButton` b3 to display an URL in the browser using cmd prmt.

The problem arises with b3\. Here is a code sample:

```
while (mstyle2.find()) 
{
    String s=mstyle2.group(0);
    String pattern = "(?i)(<cite.*?>)(.+?)(</cite>)";
    String updated = s.replaceAll(pattern, "$2"); 
    String pattern2 = "(?i)(<b>)(.+?)(</b>)";
    String updated2 = updated.replaceAll(pattern2, "$2"); 
    String pattern3 = "(http://)";
    boolean c=true;
    String updated32 = updated2.replaceAll(pattern3, ""); 
    String pattern32 = "(https://)";
    final String updated3 = updated32.replaceAll(pattern32,""); 

    try {
        URL url2 = new URL("http://"+updated3);
        URLConnection conne = url2.openConnection();
        conne.connect();
    } catch (MalformedURLException e) {
        c=false;
    } catch (IOException e) {
        c=false;//checks validity of url 
    }

    if(c) {
        Process p=Runtime.getRuntime().exec("cmd /c start http://"+updated3);
    }
} 
```

The idea is that the following command line should only be executed when b3 is pressed. Otherwise the loop will not execute, and remain in that line until the button is pressed.

```
Process p=Runtime.getRuntime().exec("cmd /c start http://"+updated3); 
```

However, I cannot find any viable way to properly implement the `ActionListener` method in order to make this possible.

In most of my tries, once b3 is pressed, all link open at once (thus beating the purpose of the b3) and not one by one with every click of b3.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:51:29.523

**解决方案**

`JButton`s 有一个方法叫做`addActionListener()`. 此方法允许您将可运行对象附加到按钮，因此仅在单击时调用代码。

```
 b3.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e)
      {
           // Your code here!
      }
 }); 
```

**这是在做什么？**

好吧，这是向`ActionListener`您的按钮添加一个新对象。但是，`ActionListener`有一个抽象方法，`actionPeformed`需要一个实现。您只是在构造函数中提供代码。

# r - 基于多个标准的数据框上的身份组

> ID：15954401
> 
> 赞同：0
> 
> 时间：2013-04-11T16:46:35.517
> 
> 标签：r, subset

## 问题

我正在尝试找到一种解决方案来克服在建立采样点方面存在缺陷的实验设计。目的是对原始数据集进行子集化，强制采样点基于具有多个级别的 2 个因素进行分层。

我需要一个可以让我**重新定义**标准级别集的问题的**一般表述。**

 **### 笔记

我找到了基于标准的子集表示例，最相关的是[Brian Diggs](https://stackoverflow.com/a/9791094/640783)的帖子，但我找不到将该解决方案应用于我的特定案例的通用方法。

## 数据集

我的 data.frame 有 3 列，样本 id 和两个因素（f1 和 f2）。标准基于 f1 和 f2 的值区间。

```
dat <- structure(list(id = 1:203, f1 = c(22, 20.8, 20.7, 22, 12.1, 8, 
20.6, 22, 22, 21.6, 0, 22, 21.4, 15.9, 21.2, 19.1, 12.5, 16.6, 
14, 21.2, 14.7, 20.7, 20.5, 5.4, 19.1, 18.9, 22, 22, 22, 0, 0, 
22, 1.3, 1, 0, 9.4, 7.9, 14.5, 0, 1.5, 0, 20.3, 18, 17.3, 1, 
22, 0, 15, 17.9, 4.3, 19.5, 21.2, 21.2, 14.6, 2.3, 0, 6.7, 17.9, 
9.5, 19, 21.6, 16.6, 11.7, 13.7, 1.5, 1, 7.6, 3.7, 18.5, 13.5, 
20.9, 18.2, 11.5, 7.3, 6.5, 21.1, 22, 20.5, 20.5, 20, 16.2, 18.6, 
22, 15.1, 14.4, 10.8, 17.1, 5.7, 15.1, 12.8, 14.5, 8.8, 16.8, 
18.7, 1, 6.3, 1.8, 14.6, 22, 16.2, 12.9, 9.1, 2, 7.6, 7, 11.7, 
1, 1, 9.6, 11, 2, 2, 14, 14.9, 7.8, 11.4, 8.3, 7.6, 9.1, 4.5, 
18, 11.4, 3.1, 4.3, 9.3, 8.1, 1.4, 5.2, 14.7, 3.6, 5, 2.7, 10.3, 
11.3, 17.9, 5.2, 1, 1.5, 13.2, 0, 1, 7.4, 1.7, 11.5, 20.2, 0, 
14.7, 17, 15.2, 22, 22, 22, 17.2, 15.3, 10.9, 18.7, 11.2, 18.5, 
20.3, 21, 20.8, 15, 21, 16.9, 18.5, 18.5, 10.3, 12.6, 15, 19.8, 
21, 17.2, 16.3, 18.3, 10.3, 17.8, 11.2, 1.5, 1, 0, 1, 14, 19.1, 
6.1, 19.2, 17.1, 14.5, 18.4, 22, 20.3, 6, 13, 18.3, 8.5, 15.3, 
10.6, 7.2, 6.2, 1, 7.9, 2, 20, 16.3), f2 = c(100, 100, 92.9, 
38.5, 100, 90.9, 100, 100, 100, 91.7, 0, 100, 71.4, 100, 100, 
53.8, 28.6, 91.7, 100, 100, 64.3, 100, 92.9, 78.6, 100, 100, 
27.3, 83.3, 14.3, 0, 0, 9.1, 23.1, 12.5, 0, 100, 81.8, 100, 0, 
15.4, 0, 83.3, 100, 75, 7.1, 81.8, 0, 21.4, 84.6, 25, 80, 90.9, 
100, 71.4, 50, 0, 46.2, 90.9, 14.3, 66.7, 90.9, 84.6, 46.2, 91.7, 
33.3, 7.7, 71.4, 27.3, 46.2, 100, 100, 100, 60, 54.5, 46.2, 53.8, 
91.7, 100, 100, 66.7, 45.5, 57.1, 15.4, 75, 75, 76.9, 53.8, 25, 
90.9, 84.6, 91.7, 90.9, 100, 54.5, 23.1, 63.6, 30.8, 90.9, 92.9, 
100, 92.3, 90.9, 12.5, 38.5, 15.4, 84.6, 27.3, 7.1, 75, 21.4, 
7.7, 15.4, 84.6, 100, 69.2, 63.6, 64.3, 53.8, 92.3, 33.3, 11.1, 
61.5, 66.7, 23.1, 85.7, 81.8, 41.7, 69.2, 76.9, 38.5, 9.1, 23.1, 
85.7, 90, 100, 100, 14.3, 36.4, 84.6, 0, 7.7, 61.5, 25, 50, 100, 
0, 63.6, 36.4, 76.9, 100, 100, 100, 100, 90.9, 100, 100, 100, 
100, 100, 83.3, 100, 100, 100, 100, 50, 54.5, 71.4, 100, 85.7, 
100, 75, 100, 76.9, 83.3, 100, 92.3, 33.3, 76.9, 33.3, 0, 40, 
91.7, 100, 53.8, 100, 100, 100, 100, 100, 92.3, 76.9, 23.1, 84.6, 
33.3, 100, 92.3, 46.2, 100, 9.1, 53.8, 7.7, 20, 42.9)), .Names = c("id", 
"f1", "f2"), class = "data.frame", row.names = c(NA, -203L)) 
```

## 预期输出

理想情况下，采样点应按照交叉设计进行分组（它不是完整的因子设计）。

对于因子 f1：0、1-15、30-60、80-95、100
对于因子 f2：0、5-10、15-20

我需要在给定 f1 和 f2 间隔的所有组合的情况下找到点，类似于这种方式：

```
gr <- expand.grid(f1=c('0', '1-15', '30-60', '80-95', '100'),
                  f2=c('0', '5-10', '15-20'))
> gr
      f1    f2
1      0     0
2   1-15     0
3  30-60     0
4  80-95     0
5    100     0
6      0  5-10
7   1-15  5-10
8  30-60  5-10
9  80-95  5-10
10   100  5-10
11     0 15-20
12  1-15 15-20
13 30-60 15-20
14 80-95 15-20
15   100 15-20 
```

解决方案应`dat`根据`gr`.

这不是一个完整的因子设计，因为并非所有组合都将满足此特定标准组合，但识别 NA 也很重要。

任何帮助将不胜感激。如果我提供了足够的信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:46:28.170

使用,根据您的断点拆分`cut`并`f1`分成`f2`s ，然后根据组合。`factor``paste``factor``split``factor`

```
dat$f1.group<-cut(dat$f1,c(0,1,15,30,60,80,90,95,100))
dat$f2.group<-cut(dat$f1,c(0,5,10,15,20))
gr<-expand.grid(levels(dat$f1.group),levels(dat$f2.group))
names(gr)<-c('f1.group','f2.group')
gr$combined = paste(gr$f1.group,gr$f2.group)
dat<-merge(gr,dat)[c('id','f1','f2','combined')]
split(dat,dat$combined) 
```

这将为您提供`list`,`data.frame`中定义的每个组合一个元素`gr`。您可以通过这些层轻松地对其进行采样。**

# backbone.js - Backbone-relational hasmany best practices

> ID：15954406
> 
> 赞同：11
> 
> 时间：2013-04-11T16:46:54.437
> 
> 标签：backbone.js, foreign-key-relationship, has-many, backbone-relational

I am new to Backbone-relational, I am not sure what is the right way to use HasMany.

I have a `Parent` model which have many `children` (by "many" I mean thousands of children). In order to avoid performance issue, I query children by their foreign key: `/child/?parent=1`, instead of create a huge list of `child_ids` in `Parent`. But seems this is not the way Backbone-relational work.

So I am wondering what is the right way to handle this.

1, Change my json api to include list of child id in parent, then send thousands of ids as Backbone-relational recommend:

```
url = function(models) {
  return '/child/' + ( models ? 'set/' + _.pluck( models, 'id' ).join(';') + '/' : '');
}
// this will end up with a really long url: /child/set/1;2;3;4;...;9998;9999 
```

2, override many method in Backbone-relational, let it handle this situation. My first thought is :

```
relations: [{
  collectionOptions: function(model){
    // I am not sure if I should use `this` to access my relation object 
    var relation = this;
    return {
      model: relation.relatedModel,
      url: function(){
        return relation.relatedModel.urlRoot + '?' + relation.collectionKey + '=' + model.id;
      }
    }
  }
}]
// This seems work, but it can not be inherent by other model
// And in this case parent will have am empty children list at beginning.    
// So parent.fetchRelated() won't fetch anything, I need call this url my self. 
```

3, Only use Backbone-relational as a Store, then use Collection to manage relations.

4, Some other magic way or pattern or backbone framework

Thanks for help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T19:59:01.143

这是我当前项目的解决方案。请注意，有`Project`许多评论、事件、文件和视频。这些关系及其反向关系在这些模型上定义：

```
Entities.Project = Backbone.RelationalModel.extend({
    updateRelation: function(relation) {
        var id = this.get('id'),
            collection = this.get(relation);

        return collection.fetch({ data: $.param({ project_id: id }) });
    }
}); 
```

我将 REST 端点配置为采用充当连续“WHERE”子句的参数。所以`project.updateRelation('comments')`会向我发送一个请求，`/comments?project_id=4`我在服务器端有一些进一步的逻辑来过滤掉用户无权看到的东西。（Laravel 后端，顺便说一句）

# jquery - 如何创建多个计数器

> ID：15954407
> 
> 赞同：0
> 
> 时间：2013-04-11T16:46:57.003
> 
> 标签：jquery, counter

我在 Javascript 中找到了关于简单 jquery 计数器的原始发布问题[，在按钮单击时增加一个计数器](https://stackoverflow.com/questions/13328717/simple-jquery-counter-issue)。我借用了脚本的最终解决方案，它很容易工作，就像在演示中通过 JSFIDDLE 一样。但是，我遇到了一个小问题。我需要三个单独的计数器，它们彼此分开工作。有人可以帮我使用这个现有的脚本函数来创建我需要的三个多个计数器吗？提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:31:11.603

看看这是不是你想要的。

[http://jsfiddle.net/H63As/30/](http://jsfiddle.net/H63As/30/)

//把代码写在这里以防万一...

html

```
<div>
    <div id="counter1">0</div>
    <div id="counter2">0</div>
    <div id="counter3">0</div>
    <button class="add" type="button" val="1">Add</button>
    <button class="add" type="button" val="2">Add</button>
    <button class="add" type="button" val="3">Add</button>
</div> 
```

javascript

```
$(function () {
          $(".add").on("click", function () {
              $("#counter" + $(this).attr("val")).text(Number($("#counter" + $(this).attr("val")).text()) + 1);
          });

      }); 
```

# html - How to manage website development and distribution build path?

> ID：15954408
> 
> 赞同：1
> 
> 时间：2013-04-11T16:47:03.343
> 
> 标签：html, requirejs

Several of my recent projects has been using CDN to deliver assets. I've been having hell of a time changing my asset paths at times of delivery.

My usual routine is: build on localhost with mamp, and use r.js (build tool from require.js) to assemble my final build and deliver that to the client. But due to the server restrictions, I've been doing mass replace on the build folder to swap out paths before I send my final build.

Is there any way to simplify this process?

Thanks!

# android - Problems with Linker in Xamarin Android 4.6

> ID：15954409
> 
> 赞同：1
> 
> 时间：2013-04-11T16:47:04.243
> 
> 标签：android, xamarin, mono, android-support-library, xamarin-linker

Yesterday I've downloaded the new version of Xamarin.Android which was 4.6.2\. When I tried to build my project which correctly worked in previous versions (<4.6) now I get the following error:

(sorry it's in Russian)

```
Ошибка  1   непредвиденная ошибка при выполнении задачи "LinkAssemblies".
System.ArgumentOutOfRangeException: Заданный аргумент находится вне диапазона допустимых значений.
в Mono.Collections.Generic.Collection`1.get_Item(Int32 index)
в Mono.Cecil.Mdb.MdbReader.ReadLocalVariables(MethodEntry entry, MethodBody body, Scope[] scopes)
в Mono.Cecil.Mdb.MdbReader.Read(MethodBody body, InstructionMapper mapper)
в Mono.Cecil.Cil.CodeReader.ReadMethodBody()
в Mono.Cecil.Cil.CodeReader.ReadMethodBody(MethodDefinition method)
в Mono.Cecil.MethodDefinition.<get_Body>b__2(MethodDefinition method, MetadataReader reader)
в Mono.Cecil.ModuleDefinition.Read[TItem,TRet](TItem item, Func`3 read)
в Mono.Cecil.MethodDefinition.get_Body()
в Mono.Linker.Steps.MarkStep.ProcessMethod(MethodDefinition method)
в Mono.Linker.Steps.MarkStep.ProcessQueue()
в Mono.Linker.Steps.MarkStep.Process()
в Mono.Linker.Steps.MarkStep.Process(LinkContext context)
в Mono.Linker.Pipeline.Process(LinkContext context)
в MonoDroid.Tuner.Linker.Process(LinkerOptions options, LinkContext& context)
в Xamarin.Android.Tasks.LinkAssemblies.Execute()
в Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
в Microsoft.Build.BackEnd.TaskBuilder.<ExecuteInstantiatedTask>d__20.MoveNext() AndroidApplication7 
```

Text in russian means:

```
Error 1 Unexpected error while trying to execute task "LinkAssemblies".
System.ArgumentOutOfRangeException: Provided argument is out off range 
```

I've spent a lot of time trying to understand this bug and found that the bug appears when (both):

1.  using Android.Support.V4 lib
2.  building with linking mode set to Full

So, I think this is the Linker bug connected with the Support Library. No matter what class or namespace of Android.Support.V4 is used the bug appears instantly.

Trying to make things clear I've made a sample project with one FragmentActivity and one DialogFragment nothing else. And I've reproduced this issue on it!

I want to know is there whether the temporary or instant solution to this breaking issue? This is very important, cause this freezes our development process. Yes, I know that this issue was posted to bug-tacker [https://bugzilla.xamarin.com/show_bug.cgi?id=7946](https://bugzilla.xamarin.com/show_bug.cgi?id=7946)

Here is how I made my Sample Project.

1.  Pressed "New project" in Visual Studio 2012 and selected "Android Application"
2.  Changed "Minimum Android to target" to 1.6
3.  Set "Configuration properties" "Linking" to "Sdk and User Assemblies"
4.  Added reference to Android.Mono.Support.V4
5.  Added\Changed two source files

Activity1:

```
public class Activity1 : FragmentActivity
{
    int count = 1;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        // Set our view from the "main" layout resource
        SetContentView(Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button button = FindViewById<Button>(Resource.Id.MyButton);

        button.Click += delegate { button.Text = string.Format("{0} clicks!", count++);
                                     DialogFragment messageFragment = MyDialogFragment.GetInstance();
                                     messageFragment.Show(SupportFragmentManager, "MessageDialog");
        };
    }
} 
```

MyDialogFragment:

```
 public class MyDialogFragment : DialogFragment
 {
    public override void OnCreate(Bundle savedInstanceState)
    {
        base.OnCreate(savedInstanceState);
    }

    public static MyDialogFragment GetInstance()
    {
        return new MyDialogFragment();
    }

    public override Dialog OnCreateDialog(Bundle savedInstanceState)
    {
        var builder = new AlertDialog.Builder(Activity);
        builder.SetMessage("Message");
        builder.SetPositiveButton("Ok", (sender, args) => { });

        return builder.Create();
    }

} 
```

I think anyone can reproduce it. If not please comment on what you've done.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:11:21.490

Xamarin.Android 4.6.2 存在链接器问题，解决方法是执行以下操作：

> 备份和编辑 /Library/Frameworks/Mono.framework/External/xbuild/Xamarin/Android/Xamarin.Android.Common.targets
> 
> 删除对 CopyMdbFiles 的所有引用

该信息来自 Xamarin 工程师 Jon P

如果您不想这样做，您可以暂时降级到 4.6，直到发布修复程序（应该在接下来的几天内）。我已经验证 4.6 没有这个问题（好吧，我的应用程序至少在使用 4.6 构建时是使用 Release 配置构建的）。

希望有帮助。

# c++ - 如何将位数组转换为字符

> ID：15954412
> 
> 赞同：1
> 
> 时间：2013-04-11T16:47:07.143
> 
> 标签：c++, visual-studio-2010, byte, bit-manipulation, unsigned

我正在尝试根据某些要求通过修改 LSB（最低有效位）来编辑缓冲区的每个字节。我对字节使用 unsigned char 类型，所以请告诉我**是否**正确/错误。

```
unsigned char buffer[MAXBUFFER]; 
```

接下来，我正在使用这个功能

```
char *uchartob(char s[9], unsigned char u) 
```

它修改第一个参数并将其作为位数组返回。这个函数工作得很好，因为数组中的位代表第二个参数。

这就是麻烦的开始。**我将逐步**指出我正在尝试做的事情，以便你们可以让我知道我在哪里走错了路。

我将上述函数**的结果**（为缓冲区的每个元素调用）保存在一个变量中

```
char binary_byte[9];             // array of bits 
```

我正在**测试 LSB，**只是将它与上面的一些标志进行比较。

```
if (binary_byte[7]==bit_flag)     // i go on and modify it like this
binary_byte[7]=0;                // or 1, depending on the case 
```

接下来，我试图**将二进制字节数组**（它是一个位数组，不是吗？）转换回字节/无符号字符**并同时更新缓冲区中的数据**。我希望我足够清楚自己，因为我现在真的很困惑。

```
buffer[position_in_buffer]=binary_byte[0]<<7| // actualize the current BYTE in the buffer
                        binary_byte[1]<<6|
                        binary_byte[2]<<5|
                        binary_byte[3]<<4|
                        binary_byte[4]<<3|
                        binary_byte[5]<<2|
                        binary_byte[6]<<1|
                        binary_byte[7]; 
```

请记住，位置 binary_byte[7] 的位可能会被修改，这就是所有这些的重点。

该解决方案不是很优雅，但**它正在工作**，即使我对我所做的事情真的很不安全（我试图用按位运算符来做，但没有成功）

奇怪的是当我试图从缓冲区打印更新的字符时。它与前一个字符具有相同的位，但它是一个完全不同的位。 ![在此处输入图像描述](https://i.stack.imgur.com/44bQ2.png)

我的最后一个问题是：**只改变一个字节中的 LSB 有什么影响？我应该期待什么？**. 正如你所看到的，即使我不应该得到“新”字符，我也只会得到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:13:07.307

因此，我仍然有点不确定您要在这里完成什么，但是由于您正在尝试修改字节的各个位，因此我建议使用以下数据结构：

```
union bit_byte
{
    struct{
        unsigned bit0 : 1;
        unsigned bit1 : 1;
        unsigned bit2 : 1;
        unsigned bit3 : 1;
        unsigned bit4 : 1;
        unsigned bit5 : 1;
        unsigned bit6 : 1;
        unsigned bit7 : 1;
    } bits;

    unsigned char all;
}; 
```

这将允许您访问字节的每一位并仍然获得字节表示。这里有一些快速示例代码：

```
bit_byte myValue;
myValue.bits.bit0 = 1;    // Set the LSB

// Test the LSB
if(myValue.bits.bit0 == 1) {
    myValue.bits.bit7 = 1;
}

printf("%i", myValue.all); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:55:25.473

按位：

设置位 =>`a |= 1 << x;`

重置位 =>`a &= ~(1 << x);`

位检查 =>`a & (1 << x);`

翻转位 =>`a ^= (1 << x)`

如果您无法管理这一点，您可以随时使用[std::bitset](http://www.cplusplus.com/reference/bitset/bitset/)。

**辅助宏**：

`#define SET_BIT(where, bit_number) ((where) |= 1 << (bit_number))`

`#define RESET_BIT(where, bit_number) ((where) &= ~(1 << (bit_number)))`

`#define FLIP_BIT(where, bit_number) ((where) ^= 1 << (bit_number))`

`#define GET_BIT_VALUE(where, bit_number) (((where) & (1 << (bit_number))) >> bit_number)`//这将返回0或1

**打印位的帮助应用程序**：

```
#include <iostream>
#include <cstdint>

#define GET_BIT_VALUE(where, bit_number) (((where) & (1 << (bit_number))) >> bit_number)

template<typename T>
void print_bits(T const& value)
{
    for(uint8_t bit_count = 0;
        bit_count < (sizeof(T)<<3);
        ++bit_count)
    {
        std::cout << GET_BIT_VALUE(value, bit_count) << std::endl;
    }
}

int main()
{
    unsigned int f = 8;
    print_bits(f);
} 
```

# java - 是否可以在指令中检索 Freemarker 参数值？

> ID：15954418
> 
> 赞同：0
> 
> 时间：2013-04-11T16:47:22.300
> 
> 标签：java, freemarker, param, directive

我的一个模板中有类似于以下内容的内容：

```
<#assign myVar = ${myValue}-1> 
```

但 Freemarker 不高兴并给了我：

```
Exception in thread "main" freemarker.core.ParseException:
    Encountered "{" at line 43, column 43 in myTemplate.ftl.
Was expecting one of:
    "in" ...
    ">" ...
    <EMPTY_DIRECTIVE_END> ...
    etc... 
```

有什么方法可以使用/检索值`myValue`并在指令中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:00:03.250

就在这里：

```
<#assign myVar = myValue - 1 > 
```

[（在文档中`assign`](http://freemarker.sourceforge.net/docs/ref_directive_assign.html)有一个类似的例子）

`${}`当您在 FreeMarker 指令之外并且需要引起其注意以进行插值时，将使用该语法。但是，在 FreeMarker 标记中，变量必须是裸露的。

# python - QWebFrame 对象没有属性 documentElement

> ID：15954419
> 
> 赞同：1
> 
> 时间：2013-04-11T16:47:23.137
> 
> 标签：python, pyqt, pyqt4, qtwebkit, xvfb

我的代码：

```
import sys
import time
from PyQt4.QtGui import QApplication
from PyQt4.QtCore import QUrl
from PyQt4.QtWebKit import *

class Browser(QWebView):
  def __init__(self):
    QWebView.__init__(self)
    self.loadFinished.connect(self._result_available)

  def _result_available(self, ok):
    doc = self.page().mainFrame().documentElement()

    [...]

if __name__ == '__main__':
  app = QApplication(sys.argv)
  view = Browser()
  view.load(QUrl('http://www.example.net/'))
  app.exec_() 
```

出于某种原因，我收到此错误，但我无法弄清楚原因。我已经更新到最新的 qtwebkit 版本，但我仍然得到这个。QT手册说是4.6版本实现的，我有qt版本4.6.2-26.el6_4。

我从上面的代码中得到以下错误。

```
Traceback (most recent call last):
  File "web.py", line 15, in _result_available
    doc = self.page().mainFrame().documentElement()
AttributeError: 'QWebFrame' object has no attribute 'documentElement' 
```

PS 自从从 qtwebkit 版本 2.0-3.el6 升级到 2.1.1-1.el6 后，我也收到此错误：

```
can't make "generic.orientation" because no QAccelerometer sensors exist 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T09:14:56.947

我有一个类似的问题，不幸的是，据我所知，我发现*Centos包中有一个错误。*我对该版本的所有发行版的内容进行了比较，但它们不匹配。我将等待*Centos*的更新，它似乎有点落后于其他发行版。

# jquery - 按钮在 RESET 时启用，但不应该

> ID：15954421
> 
> 赞同：0
> 
> 时间：2013-04-11T16:47:25.567
> 
> 标签：jquery

我有一个选择列表，并且基于该列表，除非选择了有效选项，否则我将按钮禁用，这可以正常工作，但是如果我按表单中的“重置”按钮，“提交”按钮将被启用，但仍应禁用（因为第一个选项的值为“”）。

我该如何补救？

谢谢

jQuery：

```
if ($("li#modFilterField_34 select").val() == "") {
        $('.search input[type="submit"]').attr('disabled','disabled');
    }

    $("li#modFilterField_34 select").change(function(){

        if ($(this).val() == "Paintings" ) {

            $('.search input[type="submit"]').removeAttr('disabled');

        } else if ($(this).val() == "Houses" ) {

           $('.search input[type="submit"]').removeAttr('disabled');

        } else {

            $('.search input[type="submit"]').attr('disabled','disabled');
        }
    }); 
```

html:

```
 <form id="modMtFilterForm0" name="modMtFilterForm0" method="get" action="/oljadir/index.php">

        <ul class="modMtFilter" id="modMtFilter0">
        <li class="mfieldtype_selectlist" id="modFilterField_34">
<label>Choose type*:</label>
<span class="filterinput"><select class="inputbox text_area" name="cf34">
<option value="">&nbsp;</option>
<option value="Paintings">Paintings</option>
<option value="Houses">Houses</option>
</select>
</span></li>

<li class="mfieldtype_corename" id="modFilterField_1"><label>Name:</label><span class="filterinput"><input type="text" size="50" id="filter_cf1" name="link_name" class="inputbox text_area"></span></li><li class="mfieldtype_mcheckbox" id="modFilterField_33"><label>Ostalo::</label><span class="filterinput"><ul style="margin:0;padding:0;list-style-type:none"><li><input type="checkbox" id="filter_cf33_0" value="KTV" name="cf33[]"><label for="filter_cf33_0">KTV</label></li><li><input type="checkbox" id="filter_cf33_1" value="Internet" name="cf33[]"><label for="filter_cf33_1">Internet</label></li><li><input type="checkbox" id="filter_cf33_2" value="Prevoz" name="cf33[]"><label for="filter_cf33_2">Prevoz</label></li></ul></span></li>        <li class="button-send"><input type="submit" onclick="javascript:var cookie = document.cookie.split(';');for(var i=0;i &lt; cookie.length;i++) {var c = cookie[i];while (c.charAt(0)==' '){c = c.substring(1,c.length);}var name = c.split('=')[0];if( name.substr(0,35) == 'com_mtree_mfields_searchFieldValue_'){document.cookie = name + '=;';}}" value="Search" disabled="disabled"></li>
    <button type="reset">Reset</button>

        </ul>

    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:54:36.853

您需要做的是将`reset`事件处理程序附加到您的`form`元素并在需要时再次禁用该元素。为此，我需要查看您的 HTML，或者我可以给您一个一般示例。

**编辑：**

顺便说一句，在这种情况下最好使用[prop](http://api.jquery.com/prop/)`attr`而不是.

IE

```
$('#modMtFilterForm0').on('reset', function() {
    $("li#modFilterField_34 select").val('');
    $('.search input[type="submit"]').prop('disabled', true);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:54:53.073

将其移入函数中以减少重复；注意 prop 的使用，而不是 attr：

```
function doDisableButton(){
    $('.search input[type="submit"]').prop('disabled', true);
} 
```

如果值为空，则照常调用它：

```
if ($("li#modFilterField_34 select").val() == "") {
   doDisableButton();
} 
```

单击重置按钮时也调用它。

```
$('.search input[type="reset"]').click(function(){
   doDisableButton();
}); 
```

这就是修复代码的方法。就个人而言，我会使用 jQuery 验证或表单提交来处理它，如下所示：

```
$("form").on("submit", function(){
    if ($("li#modFilterField_34 select").val() == "") {
        //alert user with a div, or even better use jQuery validation to handle this with a rule.
    }
}); 
```

这样做的原因是用户仍然可以通过在表单内的任何文本框中按您接近它的方式输入来提交您的表单。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:10:57.910

实际上，我在摩西和莫比的回答的帮助下自己解决了这个问题（它给了我这个想法）。

```
$('.search button[type="reset"]').click( function() {

    $('.search input[type="submit"]').attr('disabled','disabled');
}); 
```

# matlab - 在 MATLAB 中组合值和索引矩阵

> ID：15954424
> 
> 赞同：5
> 
> 时间：2013-04-11T16:47:29.917
> 
> 标签：matlab

我有一个索引矩阵，例如 indices = [1,3,1 ; 2,4,2; 1,3,1]。
我有一个值矩阵，例如 values = [5,9,2 ; 3,4,1; 6,8,7]。
我想创建一个新的矩阵组合 = [5+2+6+7,9+8; 3+1,4] 不使用 for 循环。“组合”应该由矩阵“值”的元素根据它们各自的索引在矩阵“索引”中的值相加而成。
你对如何在 MATLAB 中解决这个问题有什么建议吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:56:27.873

您可以使用Statistical Toolbox 中的[GRPSTATS](http://www.mathworks.com/help/stats/grpstats.html)函数：

```
val = [5,9,2 ; 3,4,1 ; 6,8,7];
idx = [1,3,1 ; 2,4,2 ; 1,3,1];

result = grpstats(val(:),idx(:),'sum');
result = reshape(result, 2, 2); 
```

# iis - 间歇性 IIS/Azure 错误

> ID：15954431
> 
> 赞同：1
> 
> 时间：2013-04-11T16:47:45.127
> 
> 标签：iis, azure, web-config

我有一个在 Azure VM 上运行的 Web 应用程序。它是单代码库，多个数据库。基于 web.config 中的 appsettings（基本上是 localhost 或生产），它知道要使用哪个数据库。

就在最近我做了一个简单的更新并将代码推送到服务器。我使用 git 将文件从 repo 拉到服务器，然后将我的 dll 从本地开发机器复制到服务器。这不是最好的，但它现在有效。

自上次更新以来，我一直收到间歇性的数据库连接错误（与我推送的更新无关）。根据我收到的错误，该应用程序正在寻找错误的数据库（为 localhost 设置的），而不是使用生产数据库。由于数据库不存在，因此登录失败。我可以登录，有时客户不能，甚至同时登录。然后我换了一台新电脑，它不起作用。我已经重新启动了 IIS，并且已经解决了一次，但我完全不知道发生了什么。

想法：

*   dll 或构建是否已损坏？
*   IIS有问题吗？
*   其他想法？

任何帮助，非常感谢！斯科特·J。

编辑：它似乎只发生在登录时。我将登录页面改回原来的。它起作用了，现在它有时又停止工作了。非常令人沮丧！

错误信息：

```
Cannot open database "companyA" requested by the login. The login failed. Login failed for user 'IIS APPPOOL\Production'.

System.Data.SqlClient.SqlException (0x80131904): Cannot open database "companyA" requested by the login. The login failed. Login failed for user 'IIS APPPOOL\Production'. at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions) at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnectionOptions userOptions) at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnectionOptions userOptions) at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection) at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions) at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry) at System.Data.SqlClient.SqlConnection.Open() at PLM.Providers.SqlConnectionHolder.Open(HttpContext context, Boolean revertImpersonate) in C:\Users\Israel\Desktop\ODESK\Scott\PLMMemberhipProvider\SqlConnectionHelper.cs:line 127 at PLM.Providers.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation) in C:\Users\Israel\Desktop\ODESK\Scott\PLMMemberhipProvider\SqlConnectionHelper.cs:line 57 at PLM.Providers.SqlMembershipProvider.GetConnectionHolder() in C:\Users\Israel\Desktop\ODESK\Scott\PLMMemberhipProvider\SQLMembershipProvider.cs:line 101 at PLM.Providers.SqlMembershipProvider.GetPasswordWithFormat(String username, Boolean updateLastLoginActivityDate, Int32& status, String& password, Int32& passwordFormat, String& passwordSalt, Int32& failedPasswordAttemptCount, Int32& failedPasswordAnswerAttemptCount, Boolean& isApproved, DateTime& lastLoginDate, DateTime& lastActivityDate) in C:\Users\Israel\Desktop\ODESK\Scott\PLMMemberhipProvider\SQLMembershipProvider.cs:line 1704 at PLM.Providers.SqlMembershipProvider.CheckPassword(String username, String password, Boolean updateLastLoginActivityDate, Boolean failIfNotApproved, String& salt, Int32& passwordFormat) in C:\Users\Israel\Desktop\ODESK\Scott\PLMMemberhipProvider\SQLMembershipProvider.cs:line 1562 at PLM.Providers.SqlMembershipProvider.CheckPassword(String username, String password, Boolean updateLastLoginActivityDate, Boolean failIfNotApproved) in C:\Users\Israel\Desktop\ODESK\Scott\PLMMemberhipProvider\SQLMembershipProvider.cs:line 1549 at PLM.Providers.SqlMembershipProvider.ValidateUser(String username, String password) in C:\Users\Israel\Desktop\ODESK\Scott\PLMMemberhipProvider\SQLMembershipProvider.cs:line 856 at System.Web.UI.WebControls.Login.AuthenticateUsingMembershipProvider(AuthenticateEventArgs e) at System.Web.UI.WebControls.Login.OnAuthenticate(AuthenticateEventArgs e) at System.Web.UI.WebControls.Login.AttemptLogin() at System.Web.UI.WebControls.Login.OnBubbleEvent(Object source, EventArgs e) at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) at System.Web.UI.WebControls.Button.OnCommand(CommandEventArgs e) at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) ClientConnectionId:5257f0df-46c9-4faa-bfea-1db4daf509b3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:42:48.773

您登录的是哪种数据库？我希望您的数据存储在 SQL Azure 或 Azure 存储中。

如果您的生产数据库是在工作人员角色中创建的，请注意，只要您的工作人员的操作系统需要更新等，Microsoft 将定期重新启动您的工作人员角色，并且任何本地创建的文件（包括 DB 文件）将在以下情况下被删除虚拟机重新启动。

# php - 使用变量作为数组索引

> ID：15954433
> 
> 赞同：0
> 
> 时间：2013-04-11T16:47:46.280
> 
> 标签：php, arrays, variables, multidimensional-array

我有一个按月分组的多维元素数组，例如：

```
Array
(
    [2013-01] => Array
        (
            [0] => Array
                (
                    [Project] => Array
                        (
                            [id] => 1
                            [user_id] => 1
                            [created] => 2013-04-08 01:00:56
                            [modified] => 2013-04-08 01:01:40
                            [vId] => 7
                        )
                )
        )

    [2013-04] => Array
        (
            [2] => Array
                (
                    [Project] => Array
                        (
                            [id] => 1
                            [user_id] => 1
                            [created] => 2013-04-08 01:00:56
                            [modified] => 2013-04-08 01:01:40
                            [refimg] => uploads/smallRef.png
                        )
                )
            [3] => Array
                (
                    [Project] => Array
                        (
                            [id] => 1
                            [user_id] => 1
                            [created] => 2013-04-08 01:00:56
                            [modified] => 2013-04-08 01:01:40
                        )
                )
            [4] => Array
                (
                    [Project] => Array
                        (
                            [id] => 1
                            [user_id] => 1
                            [created] => 2013-04-08 01:00:56
                            [modified] => 2013-04-08 01:01:40
                        )
                )
        )
) 
```

现在我想循环几个月，并且每个月我想对特定月份的数组进行计数：

```
$currMonth = date('Y-m-d');
while (strtotime($currMonth) >= strtotime($firstMonth)) {
    $curM = date('Y-m', strtotime($currMonth));
    count($grouparr[$curM]);
    $currMonth = date ("Y-m-d", strtotime("-1 month", strtotime($currMonth)));
} 
```

这似乎不起作用。我收到以下错误：

```
Uncaught SyntaxError: Unexpected token < 
```

如果我手动输入日期一切正常，例如，如果我在上面的代码中替换它：

```
count($grouparr["2013-01"); 
```

我希望有人能告诉我我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:52:35.373

```
foreach($yourarray as $month) {
 echo sizeof($month);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:53:42.550

```
foreach ($grouparr as $month => $values) {

    echo "$month: " . count($values) . "<br />";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:20:30.700

恕我直言，如果可以帮助，请不要使用 strtotime() 函数。我不确切知道您的最终结果可能是什么，但是让我在遍历这样的数组时提供几个替代方案。

首先，如果您只想遍历数组...

```
foreach ($grouparr as $key => $val) {
    list($year, $month) = explode("-", $key, 2);
    printf("%s, %s has %s records",
        $month,
        $year,
        is_array($val) ? count($val) : 0
    );
} 
```

或者，也许你想经历过去的 12 个月......

```
for ($i = 1; $i <= 12; $i++) {
    //Use this timestamp for all your date calculations
    $mytime = mktime(0, 0, 0, date("n") - $i, 1, date("Y"));

    if (array_key_exists( date("Y-m", $mytime), $grouparr)) {
        printf("%s, %s has %s records",
            date("F", $mytime),
            date("Y", $mytime),
            is_array($grouparr[date("Y-m", $mytime)]) ? count(date("Y-m", $mytime)) : 0
        );
    }
} 
```

这些代码示例可能要简单得多，但是...

# android - WebView 在屏幕的一部分（不是整个屏幕）

> ID：15954434
> 
> 赞同：0
> 
> 时间：2013-04-11T16:47:46.397
> 
> 标签：android, android-webview

在Android中是否可以`WebView`仅在屏幕的一部分中放置一个？如果是这样，用什么 XML 来做呢？如果可能的话，我想用 HTML 创建一个可滚动的表格，因为它可能包含很多数据行。感谢您提供任何信息。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/startButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="21dp"
        android:layout_marginTop="18dp"
        android:onClick="startDataGathering"
        android:text="Start" />

    <Button
        android:id="@+id/stopButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/startButton"
        android:layout_alignBottom="@+id/startButton"
        android:layout_alignParentRight="true"
        android:layout_marginRight="32dp"
        android:onClick="stopDataGathering"
        android:text="Stop" />

    <!-- want a webview here to cover rest of screen -->

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:07:51.410

WebView 可以像任何其他 View 一样放置和显示。从你的代码中，我猜你想要两个按钮下方的 WebView，左上角的 startButton 和右上角的 stopButton，两个按钮之间有一个间隙。

在您的情况下，由于两个按钮的高度可能相同，只需告诉 WebView 位于 startButton 下方，因为您的 stopButton 也相对于它：

```
<WebView
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@id/startButton"
    android:layout_alignParentBottom="true"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:22:23.893

您可以使用简单的 LinearLayout 而不是 RelativeLayout。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/startButton"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="startDataGathering"
            android:text="Start" />

        <Button
            android:id="@+id/stopButton"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="stopDataGathering"
            android:text="Stop" />
    </LinearLayout>

    <WebView
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

# javascript - jquery滚动不透明度

> ID：15954437
> 
> 赞同：0
> 
> 时间：2013-04-11T16:47:57.347
> 
> 标签：javascript, jquery

```
$(function() {
$(document).scroll(function() {

var windowscroll = $(this).scrollTop();

if($(window).scrollTop() >= 900)
{
 $("#scrollhome").css("opacity",(1-($(window).scrollTop()-900)/75))
}
 else
 $("#scrollhome").css("opacity",1)

 if(windowscroll > 900 && windowscroll < 1300)
 {
 $("#scrollabout").css("opacity",($(window).scrollTop()-900)/75)
 }
 else
$("#scrollabout").css("opacity",0)

if(windowscroll > 1200 && windowscroll < 1500)
 {
    $("#scrollabout").css("opacity", (-1($(window).scrollTop()-1200)/75))
    $("#scrolldesign").css("opacity",($(window).scrollTop()-1200)/75)
 }
 else
    $("#scrolldesign").css("opacity",0)

 });

 }); 
```

scrollhome 和 scrollabout 之间的第一次重叠效果很好，但是当涉及到 scrollabout 和滚动设计之间的第二次重叠时，我不知道如何再次以平滑的方式隐藏 scrollabout 功能，我需要帮助！如何使用滚动条再次隐藏滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:13:22.200

你把它打错了`-1($(window).....`。它也应该是`1-($(window)`

# javascript - Facebook api 只为我工作

> ID：15954440
> 
> 赞同：2
> 
> 时间：2013-04-11T16:48:05.483
> 
> 标签：javascript, facebook, api, facebook-javascript-sdk

我正在为 facebook 创建框架应用程序。以下代码对我有用：

```
function changeToHome() {
  try {
    var time = new Date();
    FB.api("/me", {fields: "id,first_name,last_name,picture"}, function(response)
    {
        window.location = '#home';
        var fname = encodeURIComponent(response.first_name);
        var lname = encodeURIComponent(response.last_name);
        var avatar = encodeURIComponent(response.picture.data.url);
        var u = '?useradd='+response.id+"&fn="+fname+"&ln="+lname+"&p="+avatar+"&t="+time.getTime();
        document.getElementById('game_frame').src=('drop.html'+u);
        $.ajax({
            url: 'stat-api.php'+u
        }).done(function() {
            //alert("done");
        });
    });
    } catch(ex) {
      //alert(ex);
    }
} 
```

但是，如果我尝试通过其他帐户对其进行测试，则 facebook api 不起作用（我尝试了不同的浏览器并得到了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:45:42.383

解决了！它没有验证我的应用程序！这是一个原因。

在 window.fbAsyncInit = function() {...} 中包含以下内容

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
    //var uid = response.authResponse.userID; //FACEBOOK_ID
    //var accessToken = response.authResponse.accessToken;/ //ACCESS TOKEN
    if (response.authResponse) {
        // logged in and connected user, someone you know. 
        //  YOUR CODE HERE
            changeToHome()
    }
    }else {
      attemptLogin();
    }
    });

function attemptLogin(){
   FB.login(function(response) {
      if (response.authResponse) {
              //  YOUR CODE HERE
              changeToHome()
        } else {
          //if user didn't logged in or didn't authorize your application
      }
  }, {scope: 'offline_access,publish_stream,manage_pages,publish_actions,user_games_activity'}); //YOUR PERMISSION
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:12:16.510

尝试启用（或禁用）沙盒模式。

# wordpress - WP Theme Customizer - 选项顺序

> ID：15954441
> 
> 赞同：4
> 
> 时间：2013-04-11T16:48:12.097
> 
> 标签：wordpress, wordpress-theming

我遇到了主题定制器的问题。我的代码是：

```
function candyfloss_theme_customizer( $wp_customize ) { 
    class Heading extends WP_Customize_Control {
    public $type = 'heading';

    public function render_content() {
        ?>
        <label>
        <span class="customize-control-title" style="border-bottom: 1px dashed #666;"><strong><?php echo esc_html( $this->label ); ?></strong></span>            
        </label>
        <?php
    }
}
$wp_customize->add_setting('products_heading', array(
    'default',
) );
$wp_customize->add_control(new Heading ($wp_customize, 'products_heading', array(
    'label' => __('Home - products section'),
    'type' => 'heading',
    'section' => 'home',        
) ) );

$wp_customize->add_setting('candyfloss_product_first', array(
    'deafault',
) );
$wp_customize->add_control('candyfloss_product_first', array(
    'label' => __('First product page'),
    'type' => 'dropdown-pages',
    'section' => 'home',        
) );
$wp_customize->add_setting('candyfloss_product_second', array(
    'deafault',
) );
$wp_customize->add_control('candyfloss_product_second', array(
    'label' => __('Second product page'),
    'type' => 'dropdown-pages',
    'section' => 'home',
) );
$wp_customize->add_setting('candyfloss_product_third', array(
    'deafault',
) );
$wp_customize->add_control('candyfloss_product_third', array(
    'label' => __('Third product page'),
    'type' => 'dropdown-pages',
    'section' => 'home',
) );

};
add_action( 'customize_register', 'candyfloss_theme_customizer', 11 ); 
```

问题是这样的。在管理面板视图是

第二个选项，第一个选项，标题，第三个选项，

谁能知道，我做错了什么？你可以帮帮我吗？我会很感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T00:53:07.177

我找到了答案。Wordpress 为控件提供随机优先级。为了解决这个问题，我们只需要为每个控件添加优先级编号。

例如。：

```
$wp_customize->add_control(new Heading ($wp_customize, 'products_heading', array(
    'label' => __('Home - products section'),
    'type' => 'heading',
    'section' => 'home',
    'priority' => 2,        
) ) ); 
```

# eclipse - 如何停止将 url 的应用程序部分传递给我在 tomcat6 中的 servlet

> ID：15954448
> 
> 赞同：0
> 
> 时间：2013-04-11T16:48:32.920
> 
> 标签：eclipse, spring-mvc, tomcat6

我正在运行 tomcat6 并将其作为服务器连接到 eclipse 中，因此我可以快速调试代码更改 - 但是我遇到了传递给我的 servlet 的路由问题。

我正在运行 spring mvc3，并在类上注释了我的路线，例如：

```
@Controller
@RequestMapping(value="/rest")
public class HandleItController {
... 
```

在 web.xml 我有

```
<welcome-file-list>
    <welcome-file>welcome.html</welcome-file>
</welcome-file-list>

<servlet-mapping>
    <servlet-mapping>handleit</servletmapping>
    <url-pattern>/rest</url-pattern>
</servlet-mapping> 
```

但是，我一次只能使这些设置之一按需要工作。

假设“Web 项目设置”的上下文根设置为`appname` 现在，如果我 GET localhost:8080/appname 我将根据需要获得欢迎页面但是如果我点击 localhost:8080/appname/rest/yadda 我会收到警告说

> 在名称为“handleit”的 DispatcherServlet 中找不到具有 URI [/appname/rest/yadda] 的 HTTP 请求的映射

如果我将我的 servlet url-pattern 更改为 / ，那么我会通过 servlet 路由请求而没有预先添加 appname 并且 servlet 按预期处理它们 - 但是我不能然后点击欢迎页面

我需要一个不涉及硬编码`appname`到 web.xml 或控制器映射中的解决方案，必须有某种方法可以同时提供 html 文件和独立于我的应用程序部署到的 uri 的 servlet - 即停止将 url 的上下文部分发送到 servlet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:01:00.880

中的 URI`@RequestMapping`将附加到`url-mapping`调度程序 servlet 的 中。因此，如果 servlet 和控制器都映射到`rest`，则完整的 URI 将变为`/contextpath/rest/rest`。如果您不希望这样，请将您的控制器映射到`/`

**编辑**：当您将 servlet 映射到时它不起作用的原因`/`是 Spring 调度程序 servlet 处理上下文根下的所有内容。所以要让它工作，你需要配置 Spring MVC 来提供静态文件。

# d3.js - D3变换转换“空解析变换属性”

> ID：15954450
> 
> 赞同：1
> 
> 时间：2013-04-11T16:48:34.253
> 
> 标签：d3.js

基本问题是我在路径上有一个拖动事件，该路径在 x 轴上将路径转换了一定距离。

当另一个事件发生时，我想将路径返回到拖动事件之前的原始位置。

我试图用下面的代码做到这一点：

```
svg.select('#' + uniqueid + '-flare')
                    .select('path')
                    .transition().duration(1000)
                    .ease('linear')
                    .attr('transform', 'translate(0,0)'); 
```

这给了我警告“null parsing transform attribute”，并且 HTML 中的 SVG 容器显示了 transform=""。

使用以下代码效果很好，但不稳定。我想要过渡提供的流畅动画。

```
svg.select('#' + uniqueid + '-flare')
                    .select('path')
                    .attr('transform', 'translate(0,0)'); 
```

有任何想法吗？谢谢！

更新

Lars 要求查看更多代码。所以....（很简略）

```
var dragtype, dragsum;
var wordDrag = d3.behavior.drag()
        .origin(Object)
        .on('drag', function (d) {

            if(dragType != d.word) {
                dragType = d.word;
                dragSum = 0;
            } 

            //update current position
            dragSum = dragSum + parseInt(d3.event.dx);
            var xMovement = parseInt(this.getAttribute('x')) + parseInt(d3.event.dx);

            d3.select(this)
                .attr('class', 'dragged-points')
                .attr('x', xMovement);

                if(uniqueId == d.word) {                   
                    svg.select('#' + uniqueId + '-flare')
                        .select('path')
                        .attr('transform', 'translate(' + dragSum + ',0)');
                }
            }
        });    

word.selectAll('text')
        .data(data)
      .enter().append('text')
        .attr('class', 'points')
        .attr('id', ... )
        .attr('x', ...)
        .attr('y', ...)
        .call(wordDrag);

tick = setInterval(function(){
        animate();
    }, 1000);

 function animate() {
        word.transition()
           .duration(1000)
           .ease('linear')
           .attr('x', ...)
           .attr('y', ...);

        svg.select('#' + uniqueId + '-flare')
           .select('path')
           .transition().duration(1000)
           .ease('linear')
           .attr('transform', 'translate(0,0)');
} 
```

# php - 使用 php/mysql 数据库查询和表单上的单选按钮实时刷新

> ID：15954453
> 
> 赞同：1
> 
> 时间：2013-04-11T16:48:42.287
> 
> 标签：php, mysql, forms

我有一个下拉列表，其中填充了数据库“产品”中的“产品名称”列。

这些产品中的每一个都有一个完成级别，“好”、“更好”、“最好”，以及与该级别相关的不同价格。（即产品 1 在 3 个单独的列中有 3 个不同的价格）

我希望在下拉菜单下方标有“好”、“更好”、“最佳”的单选按钮，这些单选按钮采用选定的“产品名称”，并在与选定单选按钮完成级别和位置相关的数据库表中查找价格将该值放入用户可以看到但显然不能编辑的单选按钮下方的文本框中。

如果用户更改下拉菜单的选择，我希望它实时刷新。

这一切都在最后提交到一个 php 页面的表单上，该页面执行一些数学运算以制作发票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:04:56.557

这有效：

```
<?php
//***************************************
// This is downloaded from www.plus2net.com //
/// You can distribute this code with the link to www.plus2net.com ///
//  Please don't  remove the link to www.plus2net.com ///
// This is for your learning only not for commercial use. ///////
//The author is not responsible for any type of loss or problem or damage on using this script.//
/// You can use it at your own risk. /////
//*****************************************

$dbservertype='mysql';
$servername='localhost';
// username and password to log onto db server
$dbusername='';
$dbpassword='';
// name of database
$dbname='dd';

////////////////////////////////////////
////// DONOT EDIT BELOW  /////////
///////////////////////////////////////

connecttodb($servername,$dbname,$dbusername,$dbpassword);

function connecttodb($servername,$dbname,$dbuser,$dbpassword)
{
global $link;
$link=mysql_connect ("$servername","$dbuser","$dbpassword");
if(!$link){die("Could not connect to MySQL");}
mysql_select_db("$dbname",$link) or die ("could not open db".mysql_error());
}
//////// End of connecting to database ////////
?>

<!doctype html public "-//w3c//dtd html 3.2//en">

<html>

<head>
<title>Multiple drop down list box from plus2net</title>

<SCRIPT language=JavaScript>

function reload(form)
{
var val=form.cat.options[form.cat.options.selectedIndex].value;
self.location='dd.php?cat=' + val ;
}

</script>

</head>

<body>
<?

/*
If register_global is off in your server then after reloading of the page to get the value of cat from query string we have to take special care.
To read more on register_global visit.
http://www.plus2net.com/php_tutorial/register-globals.php
*/

@$cat=$_GET['cat']; // Use this line or below line if register_global is off
if(strlen($cat) > 0 and !is_numeric($cat)){ // to check if $cat is numeric data or     not. 
echo "Data Error";
exit;
}

//@$cat=$HTTP_GET_VARS['cat']; // Use this line or above line if register_global is off

///////// Getting the data from Mysql table for first list box//////////
$quer2=mysql_query("SELECT DISTINCT category,cat_id FROM category order by category"); 
///////////// End of query for first list box////////////

/////// for second drop down list we will check if category is selected else we will display all the subcategory///// 
if(isset($cat) and strlen($cat) > 0)
    {
$quer=mysql_query("SELECT DISTINCT subcategory FROM subcategory where cat_id=$cat order by subcategory"); 
}
else
{
$quer=mysql_query("SELECT DISTINCT subcategory FROM subcategory order by subcategory");
} 
////////// end of query for second subcategory drop down list box     ///////////////////////////

echo "<form method=post name=f1 action='dd-check.php'>";
/// Add your form processing page address to action in above line. Example  action=dd-check.php////

//////////        Starting of first drop downlist /////////
echo "<select name='cat' onchange=\"reload(this.form)\"><option value=''>Select one</option>";

while($noticia2 = mysql_fetch_array($quer2))
{ 
if($noticia2['cat_id']==@$cat)
{
echo "<option selected value='$noticia2[cat_id]'>$noticia2[category]</option>"."<BR>";
}
else
    {
    echo  "<option value='$noticia2[cat_id]'>$noticia2[category]</option>";
    }
}
echo "</select>";
//////////////////  This will end the first drop down list ///////////

//////////        Starting of second drop downlist /////////
echo "<select name='subcat'><option value=''>Select one</option>";

while($noticia = mysql_fetch_array($quer)) 
    { 
    echo  "<option value='$noticia[subcategory]'>$noticia[subcategory]</option>";
    }

echo "</select>";
//////////////////  This will end the second drop down list ///////////

//// Add your other form fields as needed here/////

echo "<input type=submit value=Submit>";
echo "</form>";
?>

<center><a href='http://www.plus2net.com'>PHP SQL HTML free tutorials and scripts</a>     
</center> 
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:24:15.283

需要太多的背景知识，才能在一个问题中回答这个问题。

您应该从了解 javascript 开始。这里有一个很好的教程：http: [//www.w3schools.com/js/](http://www.w3schools.com/js/)

如果您对此有好感，请在此处了解 AJAX：http: [//www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

您可能应该在受影响的控件（单选按钮和下拉菜单）上查找 onChange 事件，并在其中一个值更改时触发 AJAX 调用，这将为您提供您想要放入第三个输入字段的结果。

希望这可以帮助你:)

# java - 为什么没有用 signalAll 激活等待线程？

> ID：15954454
> 
> 赞同：0
> 
> 时间：2013-04-11T16:48:44.860
> 
> 标签：java, concurrency, conditional-statements, reentrantlock

我有2个功能。第一个 discoverHosts() 向其他计算机发送请求消息。在此之后，它使用 await 命令进入睡眠状态。一个单独的威胁在收到响应时调用 handleMessage() 函数。在他处理完响应后，他使用 notifyAll() 让 discoderHosts() 知道他必须检查是否收到了所有响应。

DiscoverHosts() 在调用该函数时会等待。但是，当单独的威胁调用handleMessage() 时，发现主机() 不会在handleMessage 调用signalAll() 时唤醒。我在调试时检查了是否调用了 signalAll()，就是这种情况。在我的项目的其他地方，我有几乎相同的代码。

你们中有人知道我在忽略什么吗？

```
private final Lock lock = new ReentrantLock();
private final Condition allReceived = lock.newCondition();

private void discoverHosts() throws Exception {
    lock.lock();
    externalNodes = new HashMap<String, NodeAddress>();
    Message msg = new Message(null, "REQUEST_IP");
    logger.debug("Broadcasting ip request, waiting responses");
    channel.send(msg);
    // TODO:Write a time-out
    while (channel.getView().size() - 1 != externalNodes.keySet().size()) {
        logger.debug("Channel: " + (channel.getView().size() - 1));
        logger.debug("Responses: "+ externalNodes.keySet().size());
        allReceived.await();
    }
    logger.debug("All answers received");
    lock.unlock();
}

protected void handleMessage(Message msg) {
    lock.lock();
    if (!((String) msg.getObject()).matches("IP_RESPONSE:[0-9.]*"))
        return;
    logger.debug("Received answer from " + msg.getObject());
    String ip = ((String) msg.getObject()).replaceAll("IP_RESPONSE:", "");
    // externalHostIps.add(ip);
    NodeAddress currentAddress = new NodeAddress(ip, msg.getSrc());
    externalNodes.put(ip, currentAddress);
    logger.debug("Signalling all threads");
    allReceived.signalAll();
    lock.unlock();
    logger.debug("Unlocked");
} 
```

记录器输出：

```
4372 [main] DEBUG com.conbit.webhackarena.monitor.monitor.Monitor@3b91eb  - Broadcasting ip request, waiting responses
4372 [main] DEBUG com.conbit.webhackarena.monitor.monitor.Monitor@3b91eb  - Channel: 1
4372 [main] DEBUG com.conbit.webhackarena.monitor.monitor.Monitor@3b91eb  - Responses: 0
4394 [Incoming-1,webhackarena,leendert-K53SV-53745] DEBUG com.conbit.webhackarena.monitor.monitor.Monitor@3b91eb  - Received answer from IP_RESPONSE:192.168.1.106
4396 [Incoming-1,webhackarena,leendert-K53SV-53745] DEBUG com.conbit.webhackarena.monitor.monitor.Monitor@3b91eb  - Signalling all threads
4397 [Incoming-1,webhackarena,leendert-K53SV-53745] DEBUG com.conbit.webhackarena.monitor.monitor.Monitor@3b91eb  - Unlocked 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:58:25.773

我认为你的问题是这条线

```
if (!((String) msg.getObject()).matches("IP_RESPONSE:[0-9.]*"))
    return; 
```

这意味着在某些情况下，您获得了锁并且永远不会释放它。

**始终**使用`try...finally`块 with`Lock`来避免此问题。

```
protected void handleMessage(Message msg) {
    lock.lock();
    try {
        if (!((String) msg.getObject()).matches("IP_RESPONSE:[0-9.]*"))
            return;
        logger.debug("Received answer from " + msg.getObject());
        String ip = ((String) msg.getObject()).replaceAll("IP_RESPONSE:", "");
        // externalHostIps.add(ip);
        NodeAddress currentAddress = new NodeAddress(ip, msg.getSrc());
        externalNodes.put(ip, currentAddress);
        logger.debug("Signalling all threads");
        allReceived.signalAll();
    } finally {
        lock.unlock();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:56:47.433

> 但是，当单独的威胁调用 handleMessage() 时，discoverHosts() 不会在 handleMessage 调用 signalAll() 时唤醒

我怀疑你有两个不同的类实例，因为`Condition allReceived`is `private final`，它们实际上并没有处理相同的条件。

如果您尝试对此进行调试（或使用`System.out.println`调试），请确保您的包装类实例在两个线程中相同。

# php - Zend Framework 2.1，从一个控制器动作输出到另一个控制器

> ID：15954458
> 
> 赞同：1
> 
> 时间：2013-04-11T16:49:04.057
> 
> 标签：php, zend-framework2

我正在使用 zend 框架 2.1。我正在尝试从我的索引控制器内部的登录控制器加载我的 indexAction 的输出。我试图完成的最终结果是将我的登录表单加载到索引页面上，就好像它是该视图的一部分一样。

我已经搜索了几个小时无济于事。我尝试使用 $this->view->action，我在早期版本的 zf2 中看到过，但也没有成功。

任何信息都有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:10:50.563

取自[这篇博客](http://www.michaelgallego.fr/blog/2012/10/06/how-to-replace-the-action-helper-in-zf-2-and-make-great-widgetized-content/)，它深入解释了为什么 $this->view->action() 已从 ZF2 中删除，一个如何使用 forward() （[ZF2 文档](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.mvc.plugins.html#forward-plugin)）控制器插件的示例：

您可以使用 forward() 控制器插件将所有必要的数据转发到索引控制器操作中的另一个控制器，如下所示：

```
public function indexAction() {
    $view = new ViewModel();

    $login_param = $this->params('login_param');
    $login = $this->forward()->dispatch('App\Controller\LoginController', array(
        'action' => 'display',
        'login_param' => $login_param
    ));

    $view->addChild($login, 'login');

    return $view;
} 
```

在您看来，您需要做的就是：

```
<?php echo $this->login; ?> 
```

* * *

请注意，forward() 插件可能会返回 a `Zend\Http\PhpEnvironment\Response`。如果您在登录控制器/操作中使用重定向（），就会发生这种情况。

* * *

此外，如果 Servicemanager 声称找不到`App\Controller\LoginController`，请查看您的 module.config.php。查找名为`controllers`.
例子：

```
[...]
'controllers' => array(
    'invokables' => array(
        'LoginCon' => 'App\Controller\LoginController',
        'IndexCon' => 'App\Controller\IndexController',
        'DataCon' => 'App\Controller\DataController',
    )
),
[...] 
```

在这里，您的登录控制器有一个别名，称为`LoginCon`，您应该在 dispatch() 方法中使用此名称作为控制器名称。

# c# - WinForms 更改 Control/Panel/PictureBox 对比度/亮度

> ID：15954459
> 
> 赞同：1
> 
> 时间：2013-04-11T16:49:14.500
> 
> 标签：c#, winforms, colors

如何更改 WinForms 中的 Control/Panel/PictureBox 对比度/亮度，可能类似于 SetColorAdjustment

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:57:04.627

你可以试试这个：

[http://www.authorcode.com/making-image-editing-tool-in-c-brightness-of-an-image/](http://www.authorcode.com/making-image-editing-tool-in-c-brightness-of-an-image/)

（您也可以下载源代码）

希望这可以帮助你..

# visual-studio-2010 - 从在 VS2010 和 IIS7 Express 下运行的 WCF 应用程序访问共享内存

> ID：15954462
> 
> 赞同：3
> 
> 时间：2013-04-11T16:49:35.993
> 
> 标签：visual-studio-2010, iis, windows-services, shared-memory

我正在开发一个需要通过共享内存与自定义 Windows 服务通信的 WCF 应用程序。我的开发环境是带有 IIS7、IIS7 Express 和 Visual Studio 2010 的 Windows 7 Professional。

当我在完整的 IIS7 下在 VS2010 之外运行该应用程序时，它运行良好。但是当我使用 IIS7 Express 或 Development Web Server (Cassini) 从 VS2010 运行应用程序时，应用程序无法与 Windows 服务通信。使用 Process Explorer 我发现 Windows 服务中的共享内存已分配名称：

```
Section \BaseNamedObjects\NSBUS.q
Section \BaseNamedObjects\NSBUS.b
Section \BaseNamedObjects\NSBUS.a 
```

当 WCF 应用程序尝试通过名称访问共享内存时：

```
Section \Sessions\1\BaseNamedObjects\NSBUS.q
Section \Sessions\1\BaseNamedObjects\NSBUS.b
Section \Sessions\1\BaseNamedObjects\NSBUS.a 
```

应用程序和服务创建/访问共享内存块的代码是相同的（它被封装在两者都使用的 DLL 中）。可能是一个因素的差异：当我将 WCF 应用程序作为我的登录 ID（它是管理员组的成员）运行时，服务设置为在本地系统帐户上运行。我还猜测，也许 VS2010 以某种方式将自身注入运行时/调试环境，从而迫使应用程序引用特定于会话的共享内存，而不是真正的系统全局内存。

关于如何配置我的环境以使 WCF 应用程序使用服务使用的相同部分名称的任何建议？（顺便说一句，该服务在启动时创建共享内存。）

# r - 从网络读取文件名列表到 R

> ID：15954463
> 
> 赞同：5
> 
> 时间：2013-04-11T16:49:37.443
> 
> 标签：r, dataframe

我正在尝试从网站将大量 csv 文件读入 R。Thra 是多年的每日（仅限工作日）文件。所有文件都具有相同的数据结构。我可以使用以下逻辑成功读取*一个文件：*

```
# enter user credentials
user     <- "JohnDoe"
password <- "SecretPassword"
credentials <- paste(user,":",password,"@",sep="")
web.site <- "downloads.theice.com/Settlement_Reports_CSV/Power/"

# construct path to data
path <- paste("https://", credentials, web.site, sep="")

# read data for 4/10/2013
file  <- "icecleared_power_2013_04_10"
fname <- paste(path,file,".dat",sep="")
df <- read.csv(fname,header=TRUE, sep="|",as.is=TRUE) 
```

但是，我正在寻找有关如何一次读取目录中所有文件的提示。我想我可以生成一系列日期，并在循环中构造上面的文件名并使用 rbind 附加每个文件，但这似乎很麻烦。此外，在没有文件的周末和节假日尝试阅读时也会出现问题。

下图显示了 Web 浏览器中的文件列表：

![浏览器中的文件列表第 1 部分](https://i.stack.imgur.com/OXMcB.png)

…………

![浏览器中的文件列表第 2 部分](https://i.stack.imgur.com/U9nOg.png)

有没有办法扫描路径（从上面）以获取目录中首先满足特定条件的所有文件名的列表（即以“icecleared_power_”开头，因为该位置中也有一些文件具有不同的我不想读入的起始名称）然后在该列表中循环 read.csv 并使用 rbind 追加？

任何指导将不胜感激？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T18:44:21.967

我会首先尝试抓取相关数据文件的链接，并使用生成的信息来构建包含用户登录等的完整下载路径。正如其他人所建议的那样，`lapply`批量下载会很方便。

这是一种提取 URL 的简单方法。显然，修改示例以适合您的实际情况。

在这里，我们将使用该`XML`包来识别 Amelia 包 ( [http://cran.r-project.org/src/contrib/Archive/Amelia/](http://cran.r-project.org/src/contrib/Archive/Amelia/) ) 的 CRAN 档案中的所有可用链接。

```
> library(XML)
> url <- "http://cran.r-project.org/src/contrib/Archive/Amelia/"
> doc <- htmlParse(url)
> links <- xpathSApply(doc, "//a/@href")
> free(doc)
> links
                   href                    href                    href 
             "?C=N;O=D"              "?C=M;O=A"              "?C=S;O=A" 
                   href                    href                    href 
             "?C=D;O=A" "/src/contrib/Archive/"  "Amelia_1.1-23.tar.gz" 
                   href                    href                    href 
 "Amelia_1.1-29.tar.gz"  "Amelia_1.1-30.tar.gz"  "Amelia_1.1-32.tar.gz" 
                   href                    href                    href 
 "Amelia_1.1-33.tar.gz"   "Amelia_1.2-0.tar.gz"   "Amelia_1.2-1.tar.gz" 
                   href                    href                    href 
  "Amelia_1.2-2.tar.gz"   "Amelia_1.2-9.tar.gz"  "Amelia_1.2-12.tar.gz" 
                   href                    href                    href 
 "Amelia_1.2-13.tar.gz"  "Amelia_1.2-14.tar.gz"  "Amelia_1.2-15.tar.gz" 
                   href                    href                    href 
 "Amelia_1.2-16.tar.gz"  "Amelia_1.2-17.tar.gz"  "Amelia_1.2-18.tar.gz" 
                   href                    href                    href 
  "Amelia_1.5-4.tar.gz"   "Amelia_1.5-5.tar.gz"   "Amelia_1.6.1.tar.gz" 
                   href                    href                    href 
  "Amelia_1.6.3.tar.gz"   "Amelia_1.6.4.tar.gz"     "Amelia_1.7.tar.gz" 
```

为了演示，假设最终我们只需要 1.2 版本的包的链接。

```
> wanted <- links[grepl("Amelia_1\\.2.*", links)]
> wanted
                  href                   href                   href 
 "Amelia_1.2-0.tar.gz"  "Amelia_1.2-1.tar.gz"  "Amelia_1.2-2.tar.gz" 
                  href                   href                   href 
 "Amelia_1.2-9.tar.gz" "Amelia_1.2-12.tar.gz" "Amelia_1.2-13.tar.gz" 
                  href                   href                   href 
"Amelia_1.2-14.tar.gz" "Amelia_1.2-15.tar.gz" "Amelia_1.2-16.tar.gz" 
                  href                   href 
"Amelia_1.2-17.tar.gz" "Amelia_1.2-18.tar.gz" 
```

您现在可以按如下方式使用该向量：

```
wanted <- links[grepl("Amelia_1\\.2.*", links)]
GetMe <- paste(url, wanted, sep = "")
lapply(seq_along(GetMe), 
       function(x) download.file(GetMe[x], wanted[x], mode = "wb")) 
```

* * *

### 更新（在评论中澄清您的问题）

上面示例中的最后一步将指定的文件*下载*到您当前的工作目录（用于`getwd()`验证该目录的位置）。相反，如果您确定`read.csv`对数据有效，您还可以尝试修改匿名函数以直接读取文件：

```
lapply(seq_along(GetMe), 
       function(x) read.csv(GetMe[x], header = TRUE, sep = "|", as.is = TRUE)) 
```

但是，我认为*更安全*的方法可能是首先将所有文件下载到单个目录中，然后使用`read.delim`or`read.csv`或其他任何方法来读取数据，类似于@Andreas 建议的那样。我说*更安全*，因为它在文件未完全下载等情况下为您提供了更大的灵活性。在这种情况下，您不必重新下载所有内容，只需下载未完全下载的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:08:39.677

您可以尝试使用命令“download.file”。

```
### set up the path and destination
path <- "url where file is located"
dest <- "where on your hard disk you want the file saved"

### Ask R to try really hard to download your ".csv"
try(download.file(path, dest)) 
```

解决这个问题的诀窍是弄清楚文件之间的“url”或“path”如何系统地变化。很多时候，网页的构建使得“url”是系统的。在这种情况下，您可能会创建一个 url 的向量或数据框，以在 apply 函数内部进行迭代。

所有这些都可以夹在“lapply”中。“数据”对象就是我们迭代的任何东西。它可以是 URL 的向量或年份和月份观察的数据框，然后可用于在“lapply”函数中创建 URL。

```
### "dl" will apply a function to every element in our vector "data"
  # It will also help keep track of files which have no download data
dl <- lapply(data, function(x) {
        path <- 'url'
        dest <- './data_intermediate/...'
        try(download.file(path, dest))
      })

### Assign element names to your list "dl"
names(dl) <- unique(data$name)
index     <- sapply(dl, is.null)

### Figure out which downloads returned nothing
no.download <- names(dl)[index] 
```

然后，您可以使用“list.files()”将所有数据合并在一起，假设它们属于一个 data.frame

```
### Create a list of files you want to merge together
files <- list.files()

### Create a list of data.frames by reading each file into memory
data  <- lapply(files, read.csv)

### Stack data together
data <- do.call(rbind, data) 
```

有时，您会注意到下载后文件已损坏。在这种情况下，请注意 download.file() 命令中包含的选项“mode”。如果文件以二进制格式存储，您可以设置 mode = "w" 或 mode = "wb"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T18:35:22.600

@MikeTP，如果所有报告都以“icecleared_power_”开头，并且日期是业务日期，则包“timeDate”提供了一种创建业务日期向量的简单方法，如下所示：

```
require(timeDate)
tSeq <- timeSequence("2012-01-01","2012-12-31") # vector of days
tBiz <- tSeq[isBizday(tSeq)] # vector of business days 
```

和

```
paste0("icecleared_power_",as.character.Date(tBiz)) 
```

给你连接的文件名。

如果网站在文件命名方面遵循不同的逻辑，我们需要更多信息，如 Ananda Mahto 所观察到的。

请记住，当您使用 timeDate 创建日期向量时，您可以比我的简单示例更复杂。您可以考虑假期时间表、证券交易所日期等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T12:45:12.377

另一种解决方案

```
for( i in seq_along(stations)) {
     URL<-""
      files<-rvest::read_html(URL) %>% html_nodes("a") %>% html_text(trim = T) 
      files<-grep(stations[i],files ,ignore.case = TRUE, value = TRUE )   
      destfile<- paste0("C:/Users/...",files)
      download.file(URL,destfile, mode="wb") 
   } 
```

# email - 如何向网页发送电子邮件

> ID：15954466
> 
> 赞同：0
> 
> 时间：2013-04-11T16:49:57.100
> 
> 标签：email, webpage

我正在寻找任何允许我向网站发送电子邮件的工具或服务。例如，如果我在网页上有一个表格，我可以填写信息并提交。我想做的是将信息放入电子邮件中并将其发送到网页，以进行相同的处理。目前，我*能做*的是使用 Twilio 之类的东西……我可以在其中发送信息并将其加载到网页中……它只是相当昂贵。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:56:10.407

来源这里兄弟。[http://www.w3schools.com/php/php_mail.asp](http://www.w3schools.com/php/php_mail.asp)您可以使用此脚本将其发送到您的电子邮件。

# python - 文档中的 Python SSL 示例给出“对等连接重置”错误

> ID：15954467
> 
> 赞同：4
> 
> 时间：2013-04-11T16:50:00.800
> 
> 标签：python, ssl

我正在尝试运行`ssl`此处模块文档中提供的示例代码：http: [//docs.python.org/2/library/ssl.html#client-side-operation](http://docs.python.org/2/library/ssl.html#client-side-operation)

服务器端代码类似于文档中给出的示例，它会抛出此异常：

```
Traceback (most recent call last):
  File "serve.py", line 16, in <module>
    ssl_version=ssl.PROTOCOL_TLSv1)
  File "/usr/lib/python2.7/ssl.py", line 381, in wrap_socket
    ciphers=ciphers)
  File "/usr/lib/python2.7/ssl.py", line 143, in __init__
    self.do_handshake()
  File "/usr/lib/python2.7/ssl.py", line 305, in do_handshake
    self._sslobj.do_handshake()
socket.error: [Errno 104] Connection reset by peer 
```

客户端代码，也类似于文档中的示例，抛出此异常：

```
Traceback (most recent call last):
  File "client.py", line 8, in <module>
    ssl_sock.connect((host, port))
  File "/usr/lib/python2.7/ssl.py", line 331, in connect
    self._real_connect(addr, False)
  File "/usr/lib/python2.7/ssl.py", line 324, in _real_connect
    raise e
socket.error: [Errno 104] Connection reset by peer 
```

据我所知，我已经非常仔细地复制了文档中提供的示例，所以我不知道问题是什么。我所有的 TCP、UDP 和 ICMP 端口都是打开的，所以我认为这不是防火墙问题。

[（为了简洁起见，我编辑了这个问题以删减我的代码，因为它与链接中提供的示例非常相似。如果您想查看我的代码，请查看此问题的历史。）]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T09:12:06.453

我发现了问题。我使用如下命令生成了私钥和证书：

```
$ openssl req -new -x509 -days 365 -nodes -out cert.pem -keyout key.pem
Generating a 1024 bit RSA private key
# ...
Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:MyState
Locality Name (eg, city) []:Some City
Organization Name (eg, company) [Internet Widgits Pty Ltd]:My Organization, Inc.
Organizational Unit Name (eg, section) []:My Group
Common Name (eg, YOUR name) []:myserver.mygroup.myorganization.com
Email Address []:ops@myserver.mygroup.myorganization.com
$ 
```

**关键是输入的“通用名”必须与服务器的域名匹配。**我认为 when `cacerts`is `ssl.CERT_NONE`，默认情况下是`wrap_socket`，这不会被检查，但我错了。它总是被检查。睡了一晚，这是我想到的第一件事！

希望这对收到此神秘错误消息的其他人有用。

如果这不能解决问题，您可能正在遭受**深度数据包检查**。当我在大学网络上时，我再次收到此错误，但在任何其他网络上都没有，我相当肯定这是因为深度数据包检查。

# linker - 连接 glfw 和 D

> ID：15954474
> 
> 赞同：4
> 
> 时间：2013-04-11T16:50:21.490
> 
> 标签：linker, static-libraries, d, glfw

我正在尝试将[glfw 2.7.8](http://www.glfw.org/download.html)与 Digital Mars D 编译器版本 2.0 一起使用。

我按照示例 makefile 中的说明将 .lib 文件复制到 dm/lib 文件夹，但没有成功。

示例编译如下所示。

```
dmd main.d 
```

该文件的来源是：

```
import std.string;
import glfw;
int main()
{
    glfwInit();
    return 0;
} 
```

我得到的输出是

```
main.d(2): Error: module glfw is in file 'glfw.d' which cannot be read
import path[0] = /usr/share/dmd/src/phobos
import path[1] = /usr/share/dmd/src/druntime/import 
```

我在 Windows 7 和 Mac OSX 10.8.2 上都试过了，但都没有成功。我应该将 glfw.d 编译为 lib，然后将其放入我的主目录吗？

当我尝试将 .lib 放入主目录并使用链接到 glfw.lib 的 -L 编译器标志时，我也遇到了 _symbol not found 消息。

任何示例或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:15:23.087

您需要添加`-Ipath/to/glfw-x.x.x/support/d/imports`到编译器指令

您还可以使用 -L 开关添加 lib 文件夹（带有 def 文件），以便链接器可以将符号正确映射到 dll 中公开的符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:14:31.003

您需要将 glfw.d 传递给编译器：

```
dmd main.d glfw.d 
```

假设它与 main.d 位于同一目录中。

# java - 无法将可绘制的图像名称保存在字符串 [] 中

> ID：15954480
> 
> 赞同：1
> 
> 时间：2013-04-11T16:50:37.347
> 
> 标签：java, eclipse

我的可绘制文件夹中有我的照片，名称为 photo_1、photo_2 等。我只想将这些图像保存在我的数据库中。我有一个包含字段（id、name）的表。这个函数必须返回一个带有图像名称的字符串数组（不是所有可绘制的图像名称，只是一个称为 photo_1 等）。我在这里得到一个错误“cur[r] = s;”。不明白为什么...有人可以帮忙吗？

```
public static String[] getImagesNames()
{
int r=0;
String s;
String[] cur=null, nam=null;
Field[] dr = R.drawable.class.getFields();
for(Field f : dr)

s = "R.drawable."+f.getName();
cur[r] = s;
r++;
}
for(int j=0;j<=r;j++)
{
for(int k=0;k<=r;k++)
{
if((cur[j]).equals("photo_"+k))
{
nam[j] = cur[j];
}
}
}
return nam;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:56:01.627

您初始化`cur`为`null`at statement `String[] cur=null`，这就是为什么无法访问任何变量的原因。

你需要初始化它，`String[] cure = new String[dr.length]`但把声明放在这个`dr`之前

# google-app-engine - Google App Engine (Python) app.yaml urlhandler 不起作用

> ID：15954482
> 
> 赞同：3
> 
> 时间：2013-04-11T16:50:45.343
> 
> 标签：google-app-engine, handlers, app.yaml

我正在尝试使用 python27 的谷歌应用引擎。

```
 handlers:
    - url: /favicon\.ico
      static_files: favicon.ico
      upload: favicon\.ico

    - url: /hello
      script: helloworld.app

    - url: /.*
      script: main.app 
```

helloworld.py 和 main.app 具有来自官方文档的相同代码，几乎没有区别（响应字符串）。

```
import webapp2
class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.write('Hello world!!!')
app = webapp2.WSGIApplication([
    ('/', MainHandler)
], debug=True) 
```

我的结果：1.“~”，响应来自“main.app”。2\. "~/favicon.ico"，响应来自"favicon.ico"。3.“~/hello”，响应为“404”。4.“~/something”，响应为“404”。

对不起，发布这个问题，“〜”为`"http://localhost:8080"`。

为什么3和4不能处理？有什么不对？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:56:20.030

尝试更改`('/', MainHandler)`为`(r'/.*', MainHandler)`（`r`只是表示它是原始字符串）。问题是您目前除了 root 之外没有任何处理程序`/`，因此具有其他参数（例如`http://localhost:8080/hello`）的请求没有匹配的处理程序，因此不知道如何处理它。将处理程序更改为`/.*`意味着所有请求（无论根之后发生什么）都应路由到您的`MainHandler`.

至于文件中的`app.yaml`处理程序和处理程序，请将`*.py`其`app.yaml`视为高级主管。它收到一个请求并简单地确定将它发送到哪里（我收到一个静态 Javascript 文件的请求吗？CSS？图片？或者这是一个应该为页面提供服务的请求，等等？）。在上述情况下，您希望它在访问任何不是`/favicon`(so `/.*`) 的 URL 时提供特定页面，因此它所做的就是接受任何请求`/.*`并将其路由到`main.app`您的`main.py`文件中的 （我是现在忽略`helloworld.app`，主要是因为在你的情况下你不一定需要它）。

然后进行更精细的处理——`main.app`接收原始请求，然后寻找特定的处理程序来执行代码。当我们将您的处理程序更改为 时`r'/.*'`，它会匹配任何传入的内容（so `/`、`/hello`、`/helloworld`等），并执行相应的 class `MainHandler`，在这种情况下）。

# database - 用于文本文件访问的 SQL 数据库？

> ID：15954487
> 
> 赞同：0
> 
> 时间：2013-04-11T16:51:00.490
> 
> 标签：database, database-design

我有一组文本文件（大约 50 个），每个文件都具有相同的结构：

```
foo_N.txt:
## area 1
this is area 1's text
## area 2
this is area 2's text
## area 3
this is area 3's text 
```

这些文件驻留在服务器上，我想以最快的方式访问它们并进行一些基本的解析，而不会太靠近硬件并造成安全漏洞。什么是做到这一点的有效方法？SQL在这里合适吗？感谢您的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:51:20.107

我会编写一个解析器/工具来迭代文件，然后将它们导入数据库。如果你把解析器写得很好，那么你可以写查询到你的心内容。但是您需要大致遵循以下步骤：

1.  发现文件的结构。
2.  创建一些数据库对象来存储文件数据。
3.  编写一个工具来遍历文件，解析它们*并将*它们插入数据库。
4.  尽可能多地查询。
5.  利润！

如果您还没有偏好，我推荐使用 Python 之类的语言来解析和读取文本文件。

# java - 如何从另一个实例“重新加载”一个实例

> ID：15954488
> 
> 赞同：0
> 
> 时间：2013-04-11T16:51:02.023
> 
> 标签：java, sockets, chat

我正在开发一个游戏应用程序客户端/服务器。在客户端，我在菜单栏中放置了一个`jDialog`可以更改服务器或用户的连接（IP 地址和端口）的选项。

现在，当客户端按下“确定”按钮时，我想更改服务器的真实IP地址和端口（服务器只是我做的一个小类）。

我试图回忆构造函数，但没有任何改变。例如：

```
server = new Server(port); 
```

我真的不知道问题出在哪里。我想也许一旦应用程序启动，什么都不能重新加载......

我正在使用 NetBeans，并且我使用套接字进行客户端-服务器连接

# graphics - 在悬停元素上隐藏后带有 youtube 错误的引导模式

> ID：15954490
> 
> 赞同：0
> 
> 时间：2013-04-11T16:51:03.870
> 
> 标签：graphics, twitter-bootstrap, youtube, modal-dialog

我在我的网站上使用 modal 来显示 youtube 视频，一切正常。

但是，当我开始一个视频（然后我停止它）并关闭模式时，我的主菜单上有奇怪的效果，它有一个悬停变化的效果。

这是一个示例视频： ![在此处输入图像描述](https://i.stack.imgur.com/RAtXH.png)

然后在关闭并用鼠标悬停后出现的菜单（在模式“下方”的2个链接上）：

![在此处输入图像描述](https://i.stack.imgur.com/cKssA.png)

任何想法如何解决这个错误？

**附加信息**

我在 Chrome 上，我使用的代码与默认示例 ( [http://twitter.github.io/bootstrap/javascript.html#modals](http://twitter.github.io/bootstrap/javascript.html#modals) ) 非常相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:36:25.217

固定，推杆

```
?wmode=opaque 
```

在 youtube 网址的末尾。

# javascript - 将主干集合减少到设定的数量

> ID：15954495
> 
> 赞同：0
> 
> 时间：2013-04-11T16:51:12.867
> 
> 标签：javascript, backbone.js, underscore.js

希望是一个非常简单的问题。

在 Backbone.js 中，我将如何将未知长度的集合减少到设定长度？因此，该系列有 10 个模型。我希望它是 2。我该怎么做？我不关心我从集合中提取的顺序，它已经被洗牌并且应该是随机的，但是我该如何减少集合呢？

谢谢！凸轮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:12:44.733

您可以使用[切片](http://backbonejs.org/#Collection-slice)。

```
var myCollection = new Backbone.Collection(...);
_.each( myCollection.models.slice(-2), function(model) {
    console.log(model.get("id"));
}); 
```

将`.slice(-2)`抓取最后一项和倒数第二项。`slice`使用从零开始的索引并提取最多但不包括最后指定索引的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:13:18.177

可能有更好的方法，但是...

```
while (myCollection.size() > 2)
    myCollection.pop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:16:34.080

我敢打赌所有这些答案都会奏效，而且它们执行起来都非常简单，我不敢相信我什至问过这个问题，但我最终以这种方式解决了它。

```
for (i=0; i < renderamount; i++){
    shortdata.push(shuffleddata[i]);
} 
```

只需使用 for 循环从旧数组构建一个新数组，并将其长度限制为我在新集合中需要的模型数量。

谢谢你们。

# regex - Perl：如何根据基因数和核苷酸长度提取序列？

> ID：15954496
> 
> 赞同：2
> 
> 时间：2013-04-11T16:51:12.843
> 
> 标签：regex, perl, fasta

我有2个文件，如下：

文件 1.txt：

```
0 117nt, >gene_73|GeneMark.hm... *
0 237nt, >gene_3097|基因标记.... *
0 237nt, >gene_579|GeneMark.h... *
0 237nt, >gene_988|GeneMark.h... *
0 189nt, >gene_97|GeneMark.hm... *
0 183nt, >gene_97|GeneMark.hm... *
```

文件2.fasta：

> >gene_735|GeneMark.hmm|237_nt|+|798985|799221 TTGTGGTTCGTGCCGCGCGACGCGTTGCGTCTGCAAACGCCCGACGAAGACATCGCGACCTATCTGTTCAACAAGCATGTGATTCGGCATCGGTTCTGTCCGACCTGCGGGATTCATCCGTTCGCGGAAGGCACGGACCCGAAGGGCAACGCGATGGCGGCCGTCAATCTTCGCTGCGTCGACGGCGTCGATCTCGACGCGTTGAGCGTCCGCCATTTCGACGGGCGCGCGCTCTGA >gene_579|GeneMark.hmm|237_nt|+|667187|667423 ATGTACCACGGCGCCGAATTTGCCGCTGCCAAGGGCATGCGCTGGCTGCGAGATGCCGCCAACGGCTCTGCCTTCATCGCACCGGGCAGTCCGTGGCAAAACGGTTTCGTCGAGCGTTTCAACGGCAAGCTGCATGACGAATTGCTGAACCGGGAATGGTTCCGCGGCCGTGCCGAGACCAAGATGCTCATCGAACGCTCCGGCTACGGTCCGTCGAGTCTGACCGGATTCCGATGA >gene_1876|GeneMark.hmm|234_nt|-|2168498|2168731 ATGCTGTTCTTTTCGCGCGCGGGCGTGTCGCGTGCGGCCGGCGGCCAATCATGCGGCGAGTCGTTTTGTCGCGGCTCGCGGCGCTTGCCGACGTTGGAATCGCGCGCGCCGATGCGCGGATCGGGGCGGCAACGTTTGCGTATGAGGAATGATGCGTTTGCGCATCGGGAATGGGCGCCTCGCCCCGGTTTCGCCGCGATTCCGCCCGACTCGAGGCAGTCGTTTTTCCGCTAA >gene_3097|GeneMark.hmm|237_nt|-|3467022|3467258 GTGTCGAACGAACGTCGCGGCGAACGGCCGCTGCGGGCATCGCCGCAGGACGTCACACGGCGAACGTCGCGCGCGATCCTCGGCGGCCGCGAACGTGGGCCGTCCCGTGGCACGTTCGGCTCGCTCGGCATGGCGAACGACCGCCGCATCGCGCATCGCCGTCGCGCGGCCTCCAAAAAAACGGCGGTCAGCGACCGCCGGCTTTGGCCGAAACCGATGCGTCGTACGAATCAGTGA >gene_988|GeneMark.hmm|237_nt|+|1121027|1121263hmm|237_nt|-|3467022|3467258 GTGTCGAACGAACGTCGCGGCGAACGGCCGCTGCGGGCATCGCCGCAGGACGTCACACGGCGAACGTCGCGCGCGATCCTCGGCGGCCGCGAACGTGGGCCGTCCCGTGGCACGTTCGGCTCGCTCGGCATGGCGAACGACCGCCGCATCGCGCATCGCCGTCGCGCGGCCTCCAAAAAAACGGCGGTCAGCGACCGCCGGCTTTGGCCGAAACCGATGCGTCGTACGAATCAGTGA >gene_988|GeneMark.hmm|237_nt|+|1121027|1121263hmm|237_nt|-|3467022|3467258 GTGTCGAACGAACGTCGCGGCGAACGGCCGCTGCGGGCATCGCCGCAGGACGTCACACGGCGAACGTCGCGCGCGATCCTCGGCGGCCGCGAACGTGGGCCGTCCCGTGGCACGTTCGGCTCGCTCGGCATGGCGAACGACCGCCGCATCGCGCATCGCCGTCGCGCGGCCTCCAAAAAAACGGCGGTCAGCGACCGCCGGCTTTGGCCGAAACCGATGCGTCGTACGAATCAGTGA >gene_988|GeneMark.hmm|237_nt|+|1121027|1121263
> ATGACCTTGTCAGGCAACATCAAGGACGGCGACTGGACGGTCGAGGTGACGACATCGCCGGTGCAGGGCGGTTACGTGTGCGACATCGAGGTGATGCACGGCGCGCCGGGCGGCGCGTTCCGGCACGCGTTCCGGCACGGCGGCACTTATCCGGCCGAGCGCGACGCGATGATCGAGGGGCTGCGCGCGGGCATGACCTGGATCGAGCTGAAGATGTCGAAAGCATTCAATCTGTAA >gene_97|GeneMark.hmm|105_nt|+|90122|90226 GTGACGCGTTTCGCGACGCGCGTCGATGGGGCGGGCGCGAAACCCGTTCGCCGCGATGCGGCGGACGGGGTATGGCCGAGCGCCGTCCGTCGCGGCGAGAGTTGA >gene_97|GeneMark.hmm|183_nt|-|107002|107184 ATGGAGGCAATCGTGATCGAGCAAGTGATACTGGGCGTCTTTCTCGTACTGCCGCTTCTCATCGTCGCGGTGCTGTACTCCGACGAACTCTGGCAAGAACACCGCCTGCAGCATCCGCGCGACGAGCACACGCCACATATCGACTGGCGTCATCCGTGGCGGATCCTGCGGCGAGGGCACTAA >gene_97|GeneMark.hmm|189_nt|-|98624|98812 GTGAAATACACGAGCGACCATTACGCGGGCGTCAAATTTGGCGCGCTGTACGGGTTCTCGAACGCGGCGAACTTCGCCGACAACCGCGCTCGCCGGCGCATGCGCGGCGTTCGCATACGCGATCGGCAAAAGCGGCGTGATGTGCGGTTGCCTGCCGCGCTCGCGCTATGCGCGGCACGCCATCGATGA >gene_97|GeneMark.hmm|234_nt|+|105494|105727 ATGAAGATTCAAATCGCCATTGTTTATTTTGTCGCCCGTCACGCAAACGAGCAGGCGCGAAGCGGATCGGCGCGCATTGGCGAAGAGCCGGCGCGCATCGGCATCGCGCTCGCGCGACACATGCGCGCCGCGCGCGGCCGGTCGACGCCGGATTCGCCTGTCGATCGATCCGGTGCGCCCCGAGCCGATGAGCGGTACGCTTCGGCGCGCGCGCGACACGCGCGACACGCGTGA >gene_979|GeneMark.hmm|225_nt|-|1115442|1115666 TTGATCGACGCGCGGGGCCGGCCGGGCCGCGGGGTATCGAAGGCGATCGACGCGCAACACGAATCGCCGCCGCGCGCCGAAACCTCGCTATGCGCGTCGCGCGCACGCGCGGCCGGCGGCGCACGCGCGGGTGTGCGCGGGCCGGCGGCGCGGCCGCTCGCACTGCGCGACCGCTCGCGCGCACGCCTTCCTCGGCACGCGCCGGGAATCCCGGCCCTTCAATGAhmm|234_nt|+|105494|105727 ATGAAGATTCAAATCGCCATTGTTTATTTTGTCGCCCGTCACGCAAACGAGCAGGCGCGAAGCGGATCGGCGCGCATTGGCGAAGAGCCGGCGCGCATCGGCATCGCGCTCGCGCGACACATGCGCGCCGCGCGCGGCCGGTCGACGCCGGATTCGCCTGTCGATCGATCCGGTGCGCCCCGAGCCGATGAGCGGTACGCTTCGGCGCGCGCGCGACACGCGCGACACGCGTGA >gene_979|GeneMark.hmm|225_nt|-|1115442|1115666 TTGATCGACGCGCGGGGCCGGCCGGGCCGCGGGGTATCGAAGGCGATCGACGCGCAACACGAATCGCCGCCGCGCGCCGAAACCTCGCTATGCGCGTCGCGCGCACGCGCGGCCGGCGGCGCACGCGCGGGTGTGCGCGGGCCGGCGGCGCGGCCGCTCGCACTGCGCGACCGCTCGCGCGCACGCCTTCCTCGGCACGCGCCGGGAATCCCGGCCCTTCAATGAhmm|234_nt|+|105494|105727 ATGAAGATTCAAATCGCCATTGTTTATTTTGTCGCCCGTCACGCAAACGAGCAGGCGCGAAGCGGATCGGCGCGCATTGGCGAAGAGCCGGCGCGCATCGGCATCGCGCTCGCGCGACACATGCGCGCCGCGCGCGGCCGGTCGACGCCGGATTCGCCTGTCGATCGATCCGGTGCGCCCCGAGCCGATGAGCGGTACGCTTCGGCGCGCGCGCGACACGCGCGACACGCGTGA >gene_979|GeneMark.hmm|225_nt|-|1115442|1115666 TTGATCGACGCGCGGGGCCGGCCGGGCCGCGGGGTATCGAAGGCGATCGACGCGCAACACGAATCGCCGCCGCGCGCCGAAACCTCGCTATGCGCGTCGCGCGCACGCGCGGCCGGCGGCGCACGCGCGGGTGTGCGCGGGCCGGCGGCGCGGCCGCTCGCACTGCGCGACCGCTCGCGCGCACGCCTTCCTCGGCACGCGCCGGGAATCCCGGCCCTTCAATGAhmm|225_nt|-|1115442|1115666 TTGATCGACGCGCGGGGCCGGCCGGGCCGCGGGGTATCGAAGGCGATCGACGCGCAACACGAATCGCCGCCGCGCGCCGAAACCTCGCTATGCGCGTCGCGCGCGCGCGGCCGGCGGCGCACGCGCGGGTGTGCGCGGGCCGGCGGCGCGGCCGCTCGCACTGCGCGACCGCTCGCGCGCCATCCGCCTTCGGCATGCGCGGGATChmm|225_nt|-|1115442|1115666 TTGATCGACGCGCGGGGCCGGCCGGGCCGCGGGGTATCGAAGGCGATCGACGCGCAACACGAATCGCCGCCGCGCGCCGAAACCTCGCTATGCGCGTCGCGCGCGCGCGGCCGGCGGCGCACGCGCGGGTGTGCGCGGGCCGGCGGCGCGGCCGCTCGCACTGCGCGACCGCTCGCGCGCCATCCGCCTTCGGCATGCGCGGGATC

我期望的输出是：

> >gene_579|GeneMark.hmm|237_nt|+|667187|667423 ATGTACCACGGCGCCGAATTTGCCGCTGCCAAGGGCATGCGCTGGCTGCGAGATGCCGCCAACGGCTCTGCCTTCATCGCACCGGGCAGTCCGTGGCAAAACGGTTTCGTCGAGCGTTTCAACGGCAAGCTGCATGACGAATTGCTGAACCGGGAATGGTTCCGCGGCCGTGCCGAGACCAAGATGCTCATCGAACGCTCCGGCTACGGTCCGTCGAGTCTGACCGGATTCCGATGA >gene_3097|GeneMark.hmm|237_nt|-|3467022|3467258 GTGTCGAACGAACGTCGCGGCGAACGGCCGCTGCGGGCATCGCCGCAGGACGTCACACGGCGAACGTCGCGCGCGATCCTCGGCGGCCGCGAACGTGGGCCGTCCCGTGGCACGTTCGGCTCGCTCGGCATGGCGAACGACCGCCGCATCGCGCATCGCCGTCGCGCGGCCTCCAAAAAAACGGCGGTCAGCGACCGCCGGCTTTGGCCGAAACCGATGCGTCGTACGAATCAGTGA >gene_988|GeneMark.hmm|237_nt|+|1121027|1121263
> ATGACCTTGTCAGGCAACATCAAGGACGGCGACTGGACGGTCGAGGTGACGACATCGCCGGTGCAGGGCGGTTACGTGTGCGACATCGAGGTGATGCACGGCGCGCCGGGCGGCGCGTTCCGGCACGCGTTCCGGCACGGCGGCACTTATCCGGCCGAGCGCGACGCGATGATCGAGGGGCTGCGCGCGGGCATGACCTGGATCGAGCTGAAGATGTCGAAAGCATTCAATCTGTAA >gene_97|GeneMark.hmm|183_nt|-|107002|107184 ATGGAGGCAATCGTGATCGAGCAAGTGATACTGGGCGTCTTTCTCGTACTGCCGCTTCTCATCGTCGCGGTGCTGTACTCCGACGAACTCTGGCAAGAACACCGCCTGCAGCATCCGCGCGACGAGCACACGCCACATATCGACTGGCGTCATCCGTGGCGGATCCTGCGGCGAGGGCACTAA >gene_97|GeneMark.hmm|189_nt|-|98624|98812 GTGAAATACACGAGCGACCATTACGCGGGCGTCAAATTTGGCGCGCTGTACGGGTTCTCGAACGCGGCGAACTTCGCCGACAACCGCGCTCGCCGGCGCATGCGCGGCGTTCGCATACGCGATCGGCAAAAGCGGCGTGATGTGCGGTTGCCTGCCGCGCTCGCGCTATGCGCGGCACGCCATCGATGA

基因编号为 97 的序列有 4 个，但长度不同。我希望仅将 file1.txt 中列出的具有正确基因长度的序列输出到 output.fasta 文件中。到目前为止我所做的如下（但失败并有一些错误）：

```
#!/usr/bin/perl

use strict;
use warnings;

my @genes;

open my $list, '<file1.txt';

while (my $line = <$list>) {
    push (@genes, $1) if $line =~/\>(.*?)\|/gs;
}

my $tag1 = "0\t"; 
my $tag2  = "nt"; 

while (my $line = <$list>) { 
    if ($line =~ /$tag1(.*?)$tag2/) {
        my $match1 = $1;
    } 
} 
my $input;

{
    local $/ = undef;
    open my $fasta, '<file2.fasta';
    my $tag3 = "GeneMark.hmm"; 
    my $tag4  = "_nt"; 
    while (my $input = <$fasta>) { 
        if ($input =~ /$tag3(.*?)$tag4/) { 
            my $match2 = $1; }} 
    close $fasta; 
}

my @lines = split(/>/,$input);
foreach my $l (@lines) {
    if ($l =~ /(.+?)\|/) {
        my $real_name = $1;
         if ($real_name ~~ @genes) {
            if ($match2 = $match1) {
            open (OUTFILE, '>>output.fasta');
            print OUTFILE ">$l"; }
         }
    }
} 
```

谁能给我一些指导来纠正代码？或者有没有更好的方法来做到这一点？任何帮助将不胜感激！谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:20:43.657

这是一个使用[Bio::SeqIO](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/SeqIO.pm)的选项：

```
use strict;
use warnings;
use Bio::SeqIO;

my %hash;
open my $fh, '<', $ARGV[0] or die $!;

while (<$fh>) {
    push @{ $hash{$2} }, $1 if /\s+(\d+)nt,.+?>(gene_\d+)\|/;
}

close $fh;

my $in  = Bio::SeqIO->new( -file => $ARGV[1], -format => 'Fasta' );
my $out = Bio::SeqIO->new( -fh   => \*STDOUT, -format => 'Fasta' );

while ( my $seq = $in->next_seq() ) {
    $out->write_seq($seq)
      if $seq->id =~ /(gene_\d+)\|.+?\|(\d+)_nt\|/ and grep /$2/, @{ $hash{$1} };
} 
```

用法：`perl script.pl file1.txt file2.fasta [>outFile.fasta]`

第二个可选参数将输出定向到文件。

数据输出：

```
>gene_579|GeneMark.hmm|237_nt|+|667187|667423
ATGTACCACGGCGCCGAATTTGCCGCTGCCAAGGGCATGCGCTGGCTGCGAGATGCCGCC
AACGGCTCTGCCTTCATCGCACCGGGCAGTCCGTGGCAAAACGGTTTCGTCGAGCGTTTC
AACGGCAAGCTGCATGACGAATTGCTGAACCGGGAATGGTTCCGCGGCCGTGCCGAGACC
AAGATGCTCATCGAACGCTCCGGCTACGGTCCGTCGAGTCTGACCGGATTCCGATGA
>gene_3097|GeneMark.hmm|237_nt|-|3467022|3467258
GTGTCGAACGAACGTCGCGGCGAACGGCCGCTGCGGGCATCGCCGCAGGACGTCACACGG
CGAACGTCGCGCGCGATCCTCGGCGGCCGCGAACGTGGGCCGTCCCGTGGCACGTTCGGC
TCGCTCGGCATGGCGAACGACCGCCGCATCGCGCATCGCCGTCGCGCGGCCTCCAAAAAA
ACGGCGGTCAGCGACCGCCGGCTTTGGCCGAAACCGATGCGTCGTACGAATCAGTGA
>gene_988|GeneMark.hmm|237_nt|+|1121027|1121263
ATGACCTTGTCAGGCAACATCAAGGACGGCGACTGGACGGTCGAGGTGACGACATCGCCG
GTGCAGGGCGGTTACGTGTGCGACATCGAGGTGATGCACGGCGCGCCGGGCGGCGCGTTC
CGGCACGCGTTCCGGCACGGCGGCACTTATCCGGCCGAGCGCGACGCGATGATCGAGGGG
CTGCGCGCGGGCATGACCTGGATCGAGCTGAAGATGTCGAAAGCATTCAATCTGTAA
>gene_97|GeneMark.hmm|183_nt|-|107002|107184
ATGGAGGCAATCGTGATCGAGCAAGTGATACTGGGCGTCTTTCTCGTACTGCCGCTTCTC
ATCGTCGCGGTGCTGTACTCCGACGAACTCTGGCAAGAACACCGCCTGCAGCATCCGCGC
GACGAGCACACGCCACATATCGACTGGCGTCATCCGTGGCGGATCCTGCGGCGAGGGCAC
TAA
>gene_97|GeneMark.hmm|189_nt|-|98624|98812
GTGAAATACACGAGCGACCATTACGCGGGCGTCAAATTTGGCGCGCTGTACGGGTTCTCG
AACGCGGCGAACTTCGCCGACAACCGCGCTCGCCGGCGCATGCGCGGCGTTCGCATACGC
GATCGGCAAAAGCGGCGTGATGTGCGGTTGCCTGCCGCGCTCGCGCTATGCGCGGCACGC
CATCGATGA 
```

Bio::SeqIO 可以解析 fasta（和其他类似的）文件，所以上面利用了这个功能。从 file1.txt 创建数组哈希 (HoA) 后，处理 fasta 文件，并且只打印匹配的 fasta 记录。

希望这可以帮助！

# android - 在 Android 4.2 中以编程方式切换 wifi 网络共享

> ID：15954502
> 
> 赞同：1
> 
> 时间：2013-04-11T16:51:28.163
> 
> 标签：android

是否有可能在 Android 4.2 中切换 wifi 网络共享？我试过[了，](https://stackoverflow.com/questions/3531801/enable-disable-usb-or-wifi-tethering-programmatically-on-android)但它似乎在使用 Android 4.2 时不起作用！

提前致谢！

编辑：它确实有效，我只是忘记设置正确的权限。还有一种方法可以检查它是否已经启用，以便我可以将它用作切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:55:30.157

你应该能够在 Android 4.2 中做到这一点，确保你有权限

```
android.permission.CHANGE_WIFI_STATE 
```

除非您发布代码，否则我们无法帮助您。

我相信这将帮助您检查网络共享是否处于活动状态

```
WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
Method[] wmMethods = wifi.getClass().getDeclaredMethods();
for(Method method: wmMethods){
  if(method.getName().equals("isWifiApEnabled")) {

try {
  method.invoke(wifi);
} catch (IllegalArgumentException e) {
  e.printStackTrace();
} catch (IllegalAccessException e) {
  e.printStackTrace();
} catch (InvocationTargetException e) {
  e.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:39:55.133

我自己把它当作一个开关来工作！这是代码：

```
 WifiManager wifiManager = (WifiManager) context.getSystemService(context.WIFI_SERVICE);

            Method[] methods = wifiManager.getClass().getDeclaredMethods();
            boolean enabled=false;
            for (Method method : methods) {
                if (method.getName().equals("isWifiApEnabled")) {
                    try {
                       enabled = (Boolean) method.invoke(wifiManager);
                    } catch (Exception ex) {
                    }
                    break;
                }
            }
            for (Method method : methods) {
                if (method.getName().equals("setWifiApEnabled")) {
                    try {
                        method.invoke(wifiManager, null, !enabled);
                    } catch (Exception ex) {
                    }
                    break;
                }
            } 
```

# html - 打印页面右侧被截断的文本

> ID：15954505
> 
> 赞同：0
> 
> 时间：2013-04-11T16:51:32.440
> 
> 标签：html, css, printing-web-page

当我给页面打印时...页面右侧的文本被切断...我在打印 css 中将文本左对齐但仍然无法正常工作...在下面提供我的代码...

[http://jsfiddle.net/jjnKP/](http://jsfiddle.net/jjnKP/)

```
@media print {
  body {
    margin:0; 
    padding:0; 
    line-height: 1.4em; 
    word-spacing:1px; 
    letter-spacing:0.2px;
    font: 17px Arial, Helvetica,"Lucida Grande", serif; 
    color: #000;
  }

  .mainDiv, .navbar,
  .copyright  {
    display: none;
  }

  #templateTwoPadding {
    padding: 0 0;
  }

  #tableHeadingLastDF {
    text-align: left;
    width: 134px; 
    border:1px solid white;
  }

  #makeLeftDF {
    text-align: left;
  }

  .jumbotron .lead {
    font-size: 12px;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:15:25.130

我在一个项目中也发生了同样的事情……一切都在右侧被切断。:(

我最终通过简单地设置宽度并对其感到满意来“修复”它。我不认为[这篇文章](https://stackoverflow.com/a/11084797/743533)是我从中获得信息的确切帖子，但看起来都一样好。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-07-05T11:49:45.157

我对 SVG 图有同样的问题，下面的 css 对我有用。

```
@media print {
    body {transform: scale(.6);}
} 
```

# c - char 变量如何接受 Pointer(NULL) 作为其值？

> ID：15954506
> 
> 赞同：5
> 
> 时间：2013-04-11T16:51:33.890
> 
> 标签：c, pointers, void-pointers

我知道一个`char`变量可以接受一个`null`字符（1个字节），即；`\0`作为它的值，但是，我不明白下面我的应用程序中的 char 变量如何接受一个指针（4 字节）作为它的值并且仍然可以正常工作？

```
#include<stdio.h>
int main()
{
    char p[10]="Its C";
    printf("%s\n",p);
    p[3]='\0';                // assigning null character 
    printf("%s\n",p);
    p[2]=NULL;               //  assigning null pointer to a char variable
    printf("%s\n",p); 
    p[1]=(void *)0;          //  assigning null pointer to a char variable
    printf("%s\n",p);
    return 0;
} 
```

**注意：** GCC 编译器（32 位 Linux 平台）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T17:05:26.687

`NULL`宏需要扩展为“实现定义的空指针常量” 。

*空指针常量*被定义为“一个值为 0 的整数常量表达式，或这种类型的表达式`void *`”。与直觉相反，此定义*不需要*扩展`NULL`为指针类型的表达式。一个常见的实现是：

```
#define NULL 0 
```

空指针常量，在需要指针的上下文中使用时，可以隐式转换为指针值；结果是一个*空指针*。它也可以使用强制转换显式转换，例如`(int*)NULL`.

但是没有要求只能在这样的上下文中使用符合空指针常量的表达式。这意味着*如果*实现选择`NULL`如上定义，那么：

```
char c = NULL; // legal but ugly 
```

是合法的并初始化`c`为空*字符*。

这样的初始化是不可移植的（因为`NULL`也可能扩展`((void*)0)`和误导，所以应该避免，但是编译器很可能会在没有警告的情况下让它通过；`NULL`被编译器的预处理阶段扩展到`0`，后面的阶段会看到它as `char c = 0;`，这是合法且无害的——尽管我个人更喜欢`char c = '\0';`。

我刚刚在我自己的 32 位 Ubuntu 系统上使用 gcc 4.7 尝试了你的示例。在没有指定选项的情况下，编译器警告了`p[2]=NULL;`和`p[1]=(void *)0;`：

```
c.c:8:9: warning: assignment makes integer from pointer without a cast [enabled by default]
c.c:10:9: warning: assignment makes integer from pointer without a cast [enabled by default] 
```

任何 C 编译器都会出现第二个警告；第一个表示`NULL`实际定义为`((void*)0)`（通过运行代码`gcc -E`确认这一点）。

编译器*并没有*简单地“接受”这些赋值；它警告你他们。C 语言标准只要求对任何违反语言规则的行为进行“诊断”，甚至是语法错误；该诊断在法律上可能是非致命的警告信息。`-std=c89 -pedantic-errors`您可以使用;使 gcc 的行为更加严格 替换或强制执行来自标准更高版本的规则`c89`。（编辑：我从评论中看到您正在使用隐藏警告的编译器的 Web 界面；请参阅我对您的问题的评论以获取解决方法。警告很重要。）`c99``c11`

如果您发布产生编译器警告的 C 代码，*请* **向我们展示警告**并自己密切关注它们。它们通常表明您的程序中存在严重问题，甚至是非法行为。

语言律师的狡辩：甚至不清楚：

```
char c = (void*)0; 
```

指定从`void*`到的转换`char`。我自己的观点是，因为它违反了约束，所以它没有定义的语义。大多数不拒绝它的编译器会将其视为`void*`转换`char`，并且也有人认为这是必需的行为。但是，如果您只关注编译器警告和/或一开始不编写类似的代码，您就可以避免此类问题。

（C++ 的规则有点不同，但你问的是 C，所以我不会讨论这个问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:53:32.390

因为，在编译器中，`NULL`在某些编译器和`((void*)0)`其他编译器中被 0 取代。

该值`0`本身是一个有效值，`char`但通过转换为`(void*)`，您在技术上将 0 转换为指针类型，因此编译器会发出警告。

请注意，如果编译器用`NULL`0 替换一个整数常量，它将被简单而无声地转换为`char`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T16:54:00.780

`NULL`是一个宏，对于几乎平台都是这样定义的

```
#ifndef __cplusplus
#define NULL ((void *)0)
#else   /* C++ */
#define NULL 0
#endif  /* C++ */ 
```

（`stddef.h`来自我的 Ubuntu）

当你写

```
p[2]=NULL; 
```

一样的

```
p[2]=(void *)0; //for c
p[2]=0; //for c++ 
```

一样的

```
p[2] = 0; // the 0 is casted to char 0 for C --> '\0' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T16:54:58.243

在您的平台上，指针通常是被视为内存地址的数值。由于`char`类型是数字，因此将空指针（内存地址`0x00`）存储在`p[1]`

指针的 32 位值（在本例中为`0x00000000`）被截断为 8 位`char`长度：`0x00`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T16:53:23.467

尝试使用`-Wall`选项编译它，您将看到发生了隐式转换。

# c# - 无法在我的 c# winform 中访问已处置的对象异常

> ID：15954511
> 
> 赞同：0
> 
> 时间：2013-04-11T16:51:54.533
> 
> 标签：c#, winforms

我有一个简单的 c# winform，它使用报告查看器来显示报告。. 我的表格如下`

```
 private void member_Search_Load(object sender, EventArgs e)
    {
        this.WindowState = FormWindowState.Maximized;
        if (key1 == "index")
        {
            try
            {
                this.report_membersTableAdapter.Fill(this.DataSet2.report_members, key1, "", value1, DateTime.Now, DateTime.Now);
                this.reportViewer1.RefreshReport();
            }
            catch (Exception ex) {
                MessageBox.Show("mbr_srh::ind" + ex.Message);
            }
        }
        if (key1 == "name")
        {
            try
            {
                this.report_membersTableAdapter.Fill(this.DataSet2.report_members, key1, value1, "", DateTime.Now, DateTime.Now);
                this.reportViewer1.RefreshReport();
            }
            catch (Exception ex) {
                MessageBox.Show("mbr_srh::nam"+ex.Message);
            }
        }
        if (key1 == "library")
        {
            try
            {
                this.report_membersTableAdapter.Fill(this.DataSet2.report_members, key1, "", "", d11, d22);
                this.reportViewer1.RefreshReport();
            }
            catch (Exception ex) {
                MessageBox.Show("mbr_srh::lib" + ex.Message);
            }
        }
        if (key1 == "school")
        {
            try
            {
                this.report_membersTableAdapter.Fill(this.DataSet2.report_members, key1, "", "", d11, d22);
                this.reportViewer1.RefreshReport();

            }
            catch (Exception ex) {
                MessageBox.Show("mbr_srh::sch" + ex.Message);
            }
        }

    }

    public void set(string key, string value)
    {
        key1 = key;
        value1 = value;
        this.Show();
    }
    public void Setdate(string key, DateTime d1, DateTime d2)
    {
        key1 = key;
        d11 = d1;
        d22 = d2;
        this.Show();
    }

    private void reportViewer1_Load(object sender, EventArgs e)
    {

    }

} 
```

}`

我可以第一次调用`set()`or`setdate()`函数，但是当我第二次调用上述函数时，它给了我一个例外`cannot access a disposed object exception:object name:member_search`，突出显示`this.Show()`or`set()`函数`setdate()`，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:06:53.290

如果你关闭一个表单，它就会被处理掉。

1.  开始调试 (F5)
2.  在方法 member_Search_Load 的开头设置断点 (F9)
3.  遍历每一行 (F10) 并调查每个使用的变量的值

据我所知，您确实从主表单中打开了您的报告表单。然后查看您的报告并关闭您的报告表单。即使您在主表单中为您的报表表单保留了一个变量，当您通过单击叉号关闭它时，您的报表表单也会被处理掉。因此，您必须先创建一个新的报告表单，然后才能下次显示它。

如果你想避免这种情况，你必须使用 member_SearchForm.Hide()。

# firefox - 文字渲染问题

> ID：15954513
> 
> 赞同：0
> 
> 时间：2013-04-11T16:52:16.953
> 
> 标签：firefox, windows-7, text-rendering, webpage-rendering

在某些站点中，我遇到了使用 firefox 和其他基于 firefox 的浏览器（如 Palemoon）进行文本渲染的问题

这是一个渲染问题的例子，我有 [http://i.stack.imgur.com/KTKI2.png](http://i.stack.imgur.com/KTKI2.png)

在谷歌浏览器中，相同的文本是可以的。你知道是什么导致了这个奇怪的问题吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:56:26.467

尝试在高级选项中取消选中“尽可能使用硬件加速”。这帮助我解决了同样的问题。

# c# - 并非所有代码路径都在方法中返回带有输出参数的值

> ID：15954518
> 
> 赞同：2
> 
> 时间：2013-04-11T16:52:38.303
> 
> 标签：c#

我正在练习构建一个虚拟应用程序，我试图将一个枚举作为参数传入，并有一个整数输出参数用于设置成员变量 ( `BillsOwed`)。我有两个具体问题：为什么它`ComputeRetirementBenefitCost`告诉我我的变量`must be assigned to before control leaves the current method`以及为什么`ComputeRetirementBenefitCost`在我在评论中标记的地方无法访问？欢迎任何和所有审慎的未来设计建议:)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace GivePromotions
{
    //Different Employees in the EmpType enum extend this class
    public abstract class Employee
    {
        public int EmployeeId { get; set; }
        public string LastName { get; set; }
        public string FirstName { get; set; }
        public DateTime DateHired { get; set; }
        public RetirementPackage.RetirementPackageType PackageType { get; set; }
        public EmpType Employeetype { get; set; }
        public int NetSalary { get; set; }

        //I'd like to set the output of ComputeRetirementBenefitCost
        //in the member below but Intellisense doesn't pick it up
        //on two lines for space, commented because it doesn't work  
        //int billsOwed = Employee.RetirementPackage
        //.ComputeRetirementBenefitCost(Employee.EmpType,out benefitCost)
        public virtual void DisplayInformation()
        {
            Console.WriteLine("Employee information: ");
            Console.WriteLine("EmployeeId = {0} ", EmployeeId);
            Console.WriteLine("Last name  = {0} ", LastName);
            Console.WriteLine("First name = {0} ", FirstName);
            Console.WriteLine("Date hired = {0} ", DateHired);
            Console.WriteLine("Salary     = {0} ", NetSalary);
        }

        public enum EmpType
        {
            Janitor,
            President,
            Manager
        }

        //an Employee 'has-a' Retirement package
        public class RetirementPackage
        {

            public enum RetirementPackageType
            {
                Basic,
                Gold,
                Silver,
                Platinum,
                Black
            }
        //method of choice here 
        //ERROR: Output parameter 'benefitCost' must be assigned to before control
        //leaves the current method
        public void ComputeRetirementBenefitCost(Employee.EmpType e, out int benefitCost)
        {   

                switch (e)
                {
                    case Employee.EmpType.President:
                         benefitCost = 100000;
                         break;
                    case Employee.EmpType.Manager:
                         benefitCost = 5000;
                         break;
                    case Employee.EmpType.Janitor:
                         benefitCost = 1000;
                         break; 

                }

            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:56:14.923

*   错误：必须在控制之前分配输出参数“benefitCost”：

您必须为您的开关添加一个“默认值：”或在您的开关之外设置一个值，因为这可能是您的三种情况都没有被击中。

*   以及为什么 ComputeRetirementBenefitCost 不可访问

修复第一个将修复这个。使用 crtl+shif+B 构建和读取错误列表视图中的错误和警告。通常他们会准确地告诉你哪里出了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:08:28.853

在该方法`ComputeRetirementBenefitCost`中，您似乎处理了所有可能的代码流，因为`enum Employee.EmpType`具有三个不同的定义，并且您涵盖了所有三个定义。但是这是错误的。来自 MSDN[枚举类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/cc138362.aspx)：

> 可以将任意整数值分配给 meetingDay。例如，这行代码不会产生错误： meetingDay = (Days) 42。

在你的情况下，我可以这样调用你的方法

```
int benefitCost = 0;
ComputeRetirementBenefitCost( (Employee.EmpType) 500, out benefitCost); 
```

在这种情况下，我将脱离您的代码流，因此不会初始化 benefitCost。您可以像这样更改实现：

```
public void ComputeRetirementBenefitCost(Employee.EmpType e, out int benefitCost)
{   

    switch (e)
    {
       case Employee.EmpType.President:
           benefitCost = 100000;
           break;
       case Employee.EmpType.Manager:
           benefitCost = 5000;
           break;
       case Employee.EmpType.Janitor:
           benefitCost = 1000;
           break; 
       default:
           throw new ArgumentOutOfRangeException("e");
    }
} 
```

第二个问题 - 看起来您正在尝试`ComputeRetirementBenefitCost`作为静态方法调用，但它不是静态的，所以只需`static`为其添加一个关键字。

# ssh - ssh 错误：与 aws ec2 微型实例的连接超时

> ID：15954522
> 
> 赞同：4
> 
> 时间：2013-04-11T16:52:51.090
> 
> 标签：ssh, amazon-web-services, amazon-ec2

我无法连接到 aws ec2 实例。这是详细信息。

**实例详情**

```
AMI: ubuntu/images/ebs/ubuntu-quantal-12.10-amd64-server-20121218 (ami-422ea672)
Zone: us-west-2b
Security Groups: dev. view rules
Type: t1.micro 
```

**安全组**

```
Ports    Protocol     Source    
0-65535     tcp          0.0.0.0/0  
0-65535     udp          0.0.0.0/0  
-1          icmp         0.0.0.0/0  
22          tcp          106.76.139.164/32 
```

我还在 ssh 的入站 tcp 规则中添加了我的本地 IP 范围。

**错误信息**

```
 debug1: Reading configuration data /etc/ssh/ssh_config
    debug1: /etc/ssh/ssh_config line 19: Applying options for *
    debug1: Connecting to ec2-54-245-168-248.us-west-2.compute.amazonaws.com [54.245.168.248] port 22.
    debug1: connect to address 54.245.168.248 port 22: Connection timed out
    ssh: connect to host ec2-54-245-168-248.us-west-2.compute.amazonaws.com port 22: Connection timed out 
```

我可以成功 ping 实例。我之前在我的旧帐户上启动了 ssh 连接，我没有遇到任何问题。

**我已经尝试过的事情**

*   终止并创建一个新实例。没用！
*   打开所有 TCP、UDP、ICMP 连接。没用！
*   关联弹性 IP 并使用弹性 IP 进行连接。没用。
*   已删除 ssh 配置文件。没用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-29T10:13:39.617

我也遇到了这个问题，因为我的 ISP 给了我一个新的 IP，其效果是用于 ssh 访问我的实例的安全组设置已过时。更新安全组中允许的 IP 以反映此更改解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:54:13.260

对不起。这是因为我的ISP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T15:40:10.347

我遇到了同样的问题，我发现这是因为与我的安全组相关的规则不允许我通过 SSH 连接到我的实例。为了解决这个问题：

1.  登录到您的 aws 帐户并从**services中选择****EC2**。

***   从左侧栏中，在安全和网络下，选择**安全组。**

    *   点击“**操作**”>选择“**编辑入站规则**”** 

 **[![在此处输入图像描述](https://i.stack.imgur.com/cPVM0.png)](https://i.stack.imgur.com/cPVM0.png)

4.  对于“**类型**”选择*SSH*，对于“**源**”选择*任何地方*。（保留其他内容）

5.  保存并转到编辑“出站规则”并执行完全相同的步骤。

您现在应该可以通过 SSH 连接到您的实例了！**

# windows - 从 windows 命令中删除 stderr

> ID：15954523
> 
> 赞同：2
> 
> 时间：2013-04-11T16:52:52.983
> 
> 标签：windows, batch-file, stderr

`2>&1`将采用 stderr 并将其输出到 stdout。

`2>filename.txt`将采用 stderr 并将其转储到 filename.txt

我如何将它们一起删除？可能是某种`/dev/null`等价物？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:02:07.207

在 Windows 上，您可以通过`nul`设备完成此操作。

`2>nul`

# c# - 程序等待事件发生在c#中

> ID：15954524
> 
> 赞同：0
> 
> 时间：2013-04-11T16:53:04.960
> 
> 标签：c#

我希望我的程序的这一部分（我在代码中通过“//”符号在行前显示）等到单击 button3 以恢复。

```
 private void button2_Click(object sender, EventArgs e)
 {
    if (this.textBox3.Text != "")
    {
       this.listView1.Items.Clear();
       //this.listView1.Items.Add(this.textBox3.text);
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:01:40.093

好像你想要这样的东西：

```
 private void button2_Click(object sender, EventArgs e)
 {
    if (this.textBox3.Text != "")
    {
       this.listView1.Items.Clear();
       button3.Click += Function;
    }
 }
 private void Function(object sender, EventArgs e)
 {
     this.listView1.Items.Add(this.textBox3.text);
     button3.Click -= Function;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:24:43.607

所以我们将从这个帮助方法开始，它产生一个任务，当一个按钮被点击时完成：

```
public static Task WhenClicked(this Button button)
{
    var tcs = new TaskCompletionSource<bool>();

    EventHandler handler = null;
    handler = (sender , args) =>
    {
        tcs.SetResult(true);
        button.Click -= handler;
    };
    button.Click += handler;

    return tcs.Task;
} 
```

使用它以及`await`从 C# 5.0 开始，我们可以创建读取方式与您请求的内容一样的代码，即使它生成的代码类似于其他答案的代码（从而保持异步并且不会阻塞 UI 线程）。

```
private async void button2_Click(object sender, EventArgs e)
{
    if (this.textBox3.Text != "")
    {
        this.listView1.Items.Clear();

        await button3.WhenClicked();

        this.listView1.Items.Add(this.textBox3.text);
    }
} 
```

# priority-queue - 具有哈希集对象的优先级队列对象比较器

> ID：15954526
> 
> 赞同：1
> 
> 时间：2013-04-11T16:53:21.920
> 
> 标签：priority-queue, hashset, comparator

HashSet 对象 ct_set 城市对象

如何使用 ct_set 中的元素按照我的填充比较器的顺序初始化 ProrityQueue 对象 ct_pq

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:00:16.413

`PriorityQueue`用你的创建`Comparator`，然后调用`addAll`：

```
HashSet<City> cities = ...;

PriorityQueue<City> queue = new PriorityQueue(new CityComparator());
queue.addAll(cities); 
```

请注意，如果您*真的*有一个`HashSet<Object>`代替（您的问题还很不清楚），您可能应该尝试更改您的代码，以便您*确实*有一个`HashSet<City>`代替。或者你总是可以只转换每个元素：

```
HashSet<Object> cities = ...;
PriorityQueue<City> queue = new PriorityQueue(new CityComparator());
for (Object x : cities) {
    queue.add((City) x);
} 
```

# excel-2007 - TF249051: 找不到与以下服务器名称对应的 URL

> ID：15954535
> 
> 赞同：1
> 
> 时间：2013-04-11T16:53:33.973
> 
> 标签：excel-2007, add-in

所以我试图在我的机器上打开 Excel 中的工作项（TFS 2010 和 Excel 2007），我收到了来自 Excel 的原始错误

```
TF80070: Team Foundation encountered an error while performing the operation. 
```

我找到了有关如何打开诊断以找到标题中错误的根本原因的说明

```
TF249051: No URL can be found that corresponds to the following server name 
```

我在 Excel 中找不到可以调整设置的任何地方。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:12:00.533

所以我找到的解决方案（在禁用并重新启用 Excel 中的插件并从 Excel 中删除插件并重新添加它之后）是转到 Excel 中的团队菜单并单击新建列表。它提示我连接到我所做的收藏，然后打开一个查询（我的任务）。尽管我从诊断跟踪中获得的完整错误消息包括正确的 tfs 服务器名称和默认集合名称，但我想它不知何故不知道要连接到什么。

# jquery - 收集元素的顺序

> ID：15954540
> 
> 赞同：0
> 
> 时间：2013-04-11T16:53:59.323
> 
> 标签：jquery, html

我正在编写用户根据需要更改跨度元素顺序的代码。我需要收集跨度元素的顺序并将其放入变量中，例如，如果顺序如下所示：

```
<span id="span-2">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span id="span-3">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span id="span-5">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span id="span-4">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span id="span-1">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span> 
```

那么，变量将是“2,3,5,4,1”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:55:53.360

```
var ids = [];
$("span").each(function(index) {
    ids.push($(this).attr('id'));
}); 
```

你将在数组 ids 中有*ids*。对于您的示例，它将是*ids* = ["span-2", "span-3", "span-5", "span-4", "span-1"]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:59:02.437

如果有可识别的父母，您可以这样做：

```
var order = new Array();
$("#parentID span").each(function(){
    order.push($(this).attr('id').substring(5));
}); 
```

但是，如果我尝试这个，我会添加一些`class`es 和`data-id`s ：

HTML：

```
<span class="mySpan" data-id="2" id="span-2">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span class="mySpan" data-id="3" id="span-3">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span class="mySpan" data-id="5" id="span-5">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span class="mySpan" data-id="4" id="span-4">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span>
<span class="mySpan" data-id="1" id="span-1">[<a class="move-up">Up</a>/<a class="move-down">Down</a>]</span> 
```

JS：

```
var order = new Array();
$(".mySpan").each(function(){
    order.push($(this).attr('data-id'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:56:26.067

为了获得跨度本身：

```
var spanArray = []; //Contain all spans in the proper order (2,3,5,4,1)

$("span").each(function(i){
     spanArray.push($("span")[i]);
     console.log(i + ": " + this.id);
}); 
```

仅获取跨度 ID：

```
var spanIDsArray = []; //Contain all span ids in the proper order (2,3,5,4,1)

$("span").each(function(i){
     spanIDsArray.push(this.id);
     console.log(i + ": " + this.id);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:03:01.807

```
Your variable will be look like this:

$(document).ready(function(){
 var spnArray = [];
 $("span").each(function(i)
 {
    spnArray.push($(this).attr("id"));
             });
                 console.log(spnArray);
    }); 
```

**见演示：**

[http://jsfiddle.net/KcRTm/](http://jsfiddle.net/KcRTm/)

# html - HTML 文本对齐

> ID：15954551
> 
> 赞同：-1
> 
> 时间：2013-04-11T16:54:43.143
> 
> 标签：html, css, text, tags, alignment

好吧，我来介绍一下问题：

我正在尝试将价格设置为类似于以下示例： $XX ^(xx)。我试图使用内联样式只是为了使它在 HTML 电子邮件中可用。

这就是我试图实现的目标：

![示例文本](https://i.imgur.com/Is5wNsS.png)

选项 2 是我真正想要的，但如果不可能，我会选择选项 1

我已经用这段代码完成了它，但现在有没有办法让代码“更好”？

```
<div style="width:69px; font-family:'Arial Black', Gadget, sans-serif; font-size:34px; text-align:left; float:left;">
  $99
</div>
<div style="padding:8px;">.99<br />
<font style="line-height:70%;">cwt</font></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:16:22.647

我假设您想要一个 HTML 示例。除了较小的字体大小之外，您还可以使用上标来表示成本的“更改”部分。例如：

```
$XX<span style="vertical-align:super;font-size:xx-small">.XX</span> 
```

这是获得类似于您的选项 1 示例的结果的快速方法

# c# - System.IO.FileLoadException：无法加载文件或程序集

> ID：15954556
> 
> 赞同：0
> 
> 时间：2013-04-11T16:55:23.760
> 
> 标签：c#, asp.net, .net-assembly

在尝试执行我的 Web 应用程序时，它会引发以下错误。
它说 Matrix.Data.dll 无法加载。我试图重建程序集并再次引用它。但是没有用。
此外，它显示警告“程序集绑定日志记录已关闭”
，与程序集绑定失败日志记录相关的性能损失是什么......？

详细错误：

```
System.IO.FileLoadException: Could not load file or assembly 'Matrix.Data, Version=5.0.3.16, 
Culture=neutral, PublicKeyToken=ed19106b2f44b5a8' or one of its dependencies. 
The located assembly's manifest definition does not match the assembly reference. 
(Exception from HRESULT: 0x80131040)

File name: 'Matrix.Data, Version=5.0.3.16, Culture=neutral, 
PublicKeyToken=ed19106b2f44b5a8'
at Matrix.Administration._Administration.DoRequest(Boolean& plReplacePlaceholders)
at Matrix.AppServerHTTPHandler.doRequestDefault()
 in D:\FX\AppServer\Appserver.vb:line 443
at AppServer.AppServerHTTPHandler.doRequest(Kernel pKernel) 
in D:\FX\AppServer\Appserver.vb:line 373
at AppServer.AppServerHTTPHandler.processRequest(HttpContext context) 
in D:\FX\AppServer\Appserver.vb:line 107

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value
 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated 
with assembly bind failure logging.
To turn this feature off, remove the registry value 
[HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:14:46.420

您的 Accessibility.dll 很可能已损坏。即使以管理员身份，您也无法删除该文件。

您必须进入安全设置并将所有者从 TrustedInstaller 更改为其他用户，并授予自己对该文件的权限。完成后，从工作计算机获取 Accessibility.dll 并替换损坏的版本。

最好我能猜到，微软的安装程序损坏了 DLL，因为没有用户有权编辑/删除/替换 TrustedInstaller 拥有的文件。

# ant - 基于 svn 更新执行詹金斯作业？

> ID：15954561
> 
> 赞同：0
> 
> 时间：2013-04-11T16:55:40.780
> 
> 标签：ant, jenkins

我正在创建一个新的 Jenkins 工作。这项工作使用 SVN 版本控制，编码是用 Java 完成的，而且我正在使用 ANT 创建 jar。

现在我想创建检测 svn 存储库中更改的作业。即，当开发人员更改代码时，jenkins 作业需要自动执行。

谁能帮帮我吗。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:02:42.227

你读过[Subversion 插件吗？](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin)

你关心的是提交后挂钩 -

Jenkins 可以轮询 Subversion 存储库中的更改，虽然这相当有效，但这种情况最多只能每分钟发生一次，因此在 Jenkins 检测到更改之前您可能仍然需要等待整整一分钟。

为了减少这种延迟，您可以设置一个[提交后挂钩](http://svnbook.red-bean.com/en/1.5/svn.reposadmin.create.html#svn.reposadmin.create.hooks)，以便 Subversion 存储库可以在对该存储库进行更改时通知 Jenkins。

# matlab - 执行系统级命令解压缩“*.tgz”文件

> ID：15954567
> 
> 赞同：0
> 
> 时间：2013-04-11T16:55:57.370
> 
> 标签：matlab

我有一些 matlab:unzip 无法提取的 zip 文件。所以我需要使用matlab控制DOS提示符并使用另一个程序“7-zip”解压。我将如何在 Matlab 脚本中执行此操作？是否有允许 dos 命令的系统级脚本？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:01:05.500

使用[系统](http://www.mathworks.com/help/matlab/ref/system.html)功能：

```
system('7z e file.tgz') 
```

或使用`!`（感叹号）[字符](http://www.mathworks.com/help/matlab/ref/specialcharacters.html)：

```
!7z e file.tgz 
```

这是包含更多详细信息和示例的[文档。](http://www.mathworks.com/help/matlab/matlab_env/creating-opening-changing-and-deleting-files-and-folders.html#f0-38522)

# c# - 如何使用 TT 模板访问 EF 对象

> ID：15954570
> 
> 赞同：0
> 
> 时间：2013-04-11T16:56:02.497
> 
> 标签：c#, .net, entity-framework

我有一张桌子的 myModel.edmx。我习惯于使用自动生成的实体。现在我正在尝试新的 TT 选项，但我不明白对象在哪里？

我想执行查询，但找不到`object_name`

```
db.ExecuteQuery<object_name > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:07:55.507

TT 文件不访问 EF 对象，而是读取 xmlfile(edmx)，用于创建我们将用于获取数据并将数据设置到数据库的对象。

这种情况下的 TT 文件用于自动生成对象。

对于您的问题，您必须更好地查看 edmx 文件的 xmlformat 以帮助您了解对象的生成方式以及如何显式调用该函数

# javascript - 如何在不复制我的包装 div 的情况下包装表格行？

> ID：15954572
> 
> 赞同：0
> 
> 时间：2013-04-11T16:56:09.297
> 
> 标签：javascript, jquery

我有以下将由 Wordpress 生成的代码：

```
<h3>
<span class="title">General Settings:</span>
</h3>
<table class="form-table">
<tbody>
<div class="section_box1"><tr class="section1" valign="top">
<th scope="row">Hide Menu Background:</th>
<td>
<input id="" checked="" name="" type="checkbox">
</td>
</tr><tr class="section1" valign="top">
<th scope="row">
Menu Background:
</th>
<td>
<input name="" type="file">
</td>
</tr></div>
<div class="section_box2"><tr class="section2" valign="top">
<th scope="row">Hide Sidebar:</th>
<td>
<input id="" checked="" name="" type="checkbox">
</td>
</tr><tr class="section2" valign="top">
<th scope="row">Hide Site Title:</th>
<td>
<input id="" checked="" name="" type="checkbox">
</td>
</tr></div>
</tbody>
</table> 
```

现在将有两个部分（tr.section1 和 tr.section2）。
现在我将用两个 div（.section_box1 和 .section_box2）来包装这些部分。

所以我正在使用以下 Jquery：

```
//Lets wrap those two sections inside divs ...
$('tr.section1').not($('tr').eq(1)).each(function(){
$(this).add($(this).nextUntil('.section2')).wrapAll('<div class="section_box1"></div>');
});

    $('tr.section2').not($('tr').eq(3)).each(function(){
    $(this).add($(this).nextUntil('.section3')).wrapAll('<div class="section_box2"></div>');
    }); 
```

现在这段代码的问题是：如果我在我的部分中添加另一个设置字段（例如复选框），我的包装器 div（section_box1 和 section_box2）将重复（显然我想避免这种情况）。

我创建了[**This Fiddle**](http://jsfiddle.net/QZKJM/)来向您展示我的问题。

那么如何在不复制包装器 div 的情况下正确包装我的部分，并且仍然能够在包装器 div 的 section_box1 和 section_box2 中添加更多字段？
我正在尝试做这个几个小时，但没有运气：（

提前谢谢你们！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:28:58.520

您的 jQuery 非常荒谬且不必要地复杂。:)

如果您真的只想将所有`.section1` `tr`s 包含在一个中`.section_box1` `div`（第 2 节也是如此），您可以使用以下内容进行包装：

```
//Lets wrap those two sections inside divs ...
$('tr.section1').wrapAll('<div class="section_box1"></div>');
$('tr.section2').wrapAll('<div class="section_box2"></div>'); 
```

在此处查看更新小提琴：http: [//jsfiddle.net/QZKJM/1/](http://jsfiddle.net/QZKJM/1/)

# google-maps-sdk-ios - 检查地址是否存在。谷歌地图 SDK iOS

> ID：15954577
> 
> 赞同：1
> 
> 时间：2013-04-11T16:56:20.173
> 
> 标签：google-maps-sdk-ios

有没有办法检查您传递到谷歌地图以获取 URL 方案方向的地址是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:28:54.123

您可以尝试发出地理编码请求，然后查看是否收到`OK`（地址可以转换为位置，因此存在）或`ZERO_RESULTS`（地址不存在）的响应。据推测，当您使用 URL 方案启动 Google 地图应用程序时，Google 会在内部使用相同的地理编码器来查找地址。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# security - Web Services for Checking Malicious Domains

> ID：15954580
> 
> 赞同：0
> 
> 时间：2013-04-11T16:56:27.050
> 
> 标签：security, firefox, web, trust

Does anyone know of any freely available web services or APIs which accept a website URL and check this URL against a list of known malicious websites?

I was thinking of designing something similar to Web of Trust (WOT) to give you an idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:18:11.693

There are many, you can start with Google's [Safe Browsing](https://developers.google.com/safe-browsing/)

# java - 如何在eclipse中的所有java文件中添加一行

> ID：15954582
> 
> 赞同：3
> 
> 时间：2013-04-11T16:56:28.737
> 
> 标签：java, eclipse

我不确定这是否可能，但我有一个旧的 Java 应用程序项目，其中有 1000 多个 Java 文件。我正在尝试向需要我添加的应用程序添加 log4j 支持

```
public static Logger logger = Logger.getLogger(MyClass.class.getName()); 
```

在每个文件中。

有什么方法可以使用 eclipse 执行操作。我已经尝试过`source->format`，但这不允许我添加该行。我是否必须打开每个文件并添加该行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:01:12.773

您可以在 eclipse 中使用**模板**，但在这种情况下，您需要编辑每个文件并添加它。

**更新 ：**

将以下内容保存在一些扩展名为“.xml”的文件中

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><templates><template autoinsert="true" context="java-members" deleted="false" description="adds the logger statement" enabled="true" name="logger">public static Logger logger = Logger.getLogger(${enclosing_type}.class.getName());</template></templates> 
```

按 CTRL+3，键入 - “模板”，然后选择 Templates - Java Editor，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/d2sGC.png)

从右侧菜单导入文件，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/Trv48.png)

现在转到您的任何文件并在您的类文件中键入“logger”并执行 CTRL+space ，快速帮助将向您显示“logger”模板，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/XQ7rb.png) 并且您的日志记录语句将出现，您正在编辑的类如下所示

![在此处输入图像描述](https://i.stack.imgur.com/6BUN7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:15:27.907

您可以以编程方式进行。从所有 .java 的过滤器开始：

```
public class FileExtensionFilter implements FilenameFilter {
    private Set<String> filteredExtensions;
    public FileExtensionFilter() {
        filteredExtensions = new HashSet<String>();
    }
    @Override
    public boolean accept(File dir, String name) {
        boolean accept = true;
        for (String filteredExtension:filteredExtensions) {
            accept = accept && !name.endsWith(filteredExtension);
        }
        return accept;
    }
    public void addFilteredExtension(String extension) {
        filteredExtensions.add(extension);
    }
} 
```

然后您可以使用递归方法查找文件：

```
public Set<String> searchFileBasedOnExtension(File file) {
    Set<String> extensions = new HashSet<String>();
    if (file.isDirectory()) {
        for (File f : file.listFiles(fileExtensionFilter)) {
            extensions.addAll(checkForExtensions(f));
        }
    } else {
        String extension = file.getName().substring(Math.max(file.getName().lastIndexOf('.'),0));
        extensions.add(extension);
        fileExtensionFilter.addFilteredExtension(extension);
    }
    return extensions;
} 
```

然后根据你收到的集合，你可以迭代它，读取文件找到添加“导入”的位置，也找到类名，并将其保存到变量中以替换每个文件，因为每个文件代表一个不同的班级。

样本：

```
for (String s : setWithFileNames) {
 // Use BufferedReader to read the file, save the content in a String, then look inside the String the classname and the first import position.
 // Use bufferedWriter to re-write the file with the changes you made.
} 
```

希望它可以帮助您满足您的要求。此致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:03:37.627

打开每个文件并添加这一行将是乏味的。

我不确定 Eclipse 是否有这样的东西。

但我建议使用 shell 脚本或 Java 函数来执行此操作。

1.  阅读每个文件。
2.  搜索第一个“{”字符。
3.  在旁边的行中插入 logger 语句。
4.  您可以从文件名中获取类名。

我知道这可能不是您的最佳解决方案。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T17:08:30.523

如果你有记事本++，你可以做到。使用正则表达式对目录使用查找替换功能。

因此，以 开头的行`public class`需要替换为该行，另一行以 log 语句替换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T17:40:17.663

另一个建议是使用 AspectJ。AspectJ 是对 Java 的扩展，它允许您系统地将额外的功能编织到现有的类中。您首先需要安装 AJDT（AspectJ 开发工具）。然后你需要像这样创建一个方面：

```
aspect LoggingAspect {
  before (Object thiz) : execution(public * *(..)) && this(thiz) {
    Logger logger = Logger.getLogger(thiz.getClass().getName());
    logger.log("Something");
  }
} 
```

上述方面将记录您编译的类之一的公共方法的每次执行。您当然可以通过多种方式对此进行调整。记录是 AspectJ 可以做的最简单的事情之一。沿着这条路走下去的好处是，您可以通过注释掉 4 行来轻松地启用/禁用项目的日志记录。

[AspectJ](http://eclipse.org/aspectj/)的主要网站。[AspectJ 编程指南](http://eclipse.org/aspectj/doc/released/progguide/index.html)是开始使用 AspectJ 的好地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-02T16:28:57.233

您可以运行以下命令在特定行号上添加任何行，只需提供文件夹名称，它将搜索文件扩展名为 .java 的所有子文件夹并在特定位置添加行：

```
find <Folder Path> -name "*.java" -exec sed -i '1i<Text: You want to add>' {} \; 
```

# php - HTML在PHP标签中选择多个

> ID：15954590
> 
> 赞同：1
> 
> 时间：2013-04-11T16:56:59.293
> 
> 标签：php, html, function, user-profile

我希望用户能够看到他们所有零工的名称和描述，然后能够从列表中选择每个零工的可用天数。本质上，我希望用户显示他们的奇数名称、描述、天数列表，然后是更新按钮，我希望在每个奇数作业的同一页面上重复此操作，以便用户可以看到他们的当前状态，更改它，选择一天并点击更新。

我正在尝试让多个列表在 php 中工作，但我不断收到此错误：

> 解析错误：语法错误，意外的 'DaysAvailable' (T_STRING)，期待 ',' 或 ';'

这与以下形式的代码行有关：

```
<select name="DaysAvailable[]" size="5" multiple="multiple" id="DaysAvailable[]"> 
```

更新页面：

```
<?php   

            if (isset($_POST['OddJobName']) && isset($_POST['Description']) && isset($_POST['DaysAvailable']) && empty($errors) === true){//if (empty($_POST) === false && empty($errors) === true) { //if (isset(empty($_POST['OddJobName'])) && isset(empty($_POST['Description'])) && isset(empty($_POST['DaysAvailable'])) === false && empty($errors) === true)
            $daysavailable='';
            foreach ($_POST['DaysAvailable'] as $value)
            {

            $daysavailable .=$value." ";
            }

            $update_data = array (
                'MemberID'      => $MemberID,//$session_MemberID,//,$_SESSION['MemberID']
                'OddJobName'    => $_POST['OddJobName'],
                'Description'   => $_POST['Description'],
                'DaysAvailable' => $daysavailable, 

                );

                update_user ($update_data);

                if(success){
                 header('Location: member.php?username='.$username);
                 exit ();
                }
            } else if (empty($errors) === false){
                //otherwise output errors
                echo output_errors($errors);
            }

?> 
```

同一页面上的表格：

```
<form action="" method ="post" enctype="multipart/form-data">
            <table width="100%" border="1" cellspacing="0" cellpadding="5">
                <td width="50%">
                <table width="100%" border="1" cellspacing="17" cellpadding="0">

<?php 

                    $result = mysql_query("SELECT * FROM `oddjob` WHERE `MemberID` = $MemberID");

                    while($row = mysql_fetch_assoc($result))
                    {
                    echo "<tr>
                        <td>
                        <p>Service Name:</p> 
                        </td>
                        <td>
                    <p>". $row['OddJobName']."</p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        <p>Description:</p>
                        </td>
                        <td>
                        <p>". $row['Description']."</p>
                        </textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>
                        <p>Days Available(current week)*:</p>
                        <p>(hold Ctrl to select multiple)</p>
                        </td>
                        <td>
                        <select name="DaysAvailable[]" size="5" multiple="multiple" id="DaysAvailable[]">
                        "<option value="Monday">Monday</option>
                        <option value="Tuesday">Tuesday</option>
                        <option value="Wednesday">Wednesday</option>
                        <option value="Thursday">Thursday</option>
                        <option value="Friday">Friday</option>
                        <option value="Saturday">Saturday</option>
                        <option value="Sunday">Sunday</option>
                        </select>
                        </td>
                        <tr>
                </table>
                        <input type='submit'value='update'><input type='button'value='Back to profile' onClick="history.go(-1);return true;"><!--http://www.computerhope.com/issues/ch000317.htm-->
                </table>
                    </form>";
                        }
?> 
```

更新功能：

```
function update_user($update_data){
            global $MemberID;
            $update = array();
            array_walk($update_data, 'array_sanitize');

            foreach($update_data as $field=>$data){ //loop through update data in update_info.php
                $update[] = '`' . $field . '` = \'' . $data . '\''; 
            }
            ("UPDATE `oddjob` SET " . implode(', ', $update). " WHERE `MemberID` = $MemberID") or die (mysql_error());

} 
```

请帮我实现这个，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:00:52.713

您使用 a`"`作为分隔符来回显大量 HTML。在您的 HTML 中，您有：

```
<select name="DaysAvailable[]" size="5" multiple="multiple" id="DaysAvailable[]">
                    "<option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                    <option value="Saturday">Saturday</option>
                    <option value="Sunday">Sunday</option>
                    </select> 
```

第一个引号是 . 的结尾`echo`，其余的被传递给 PHP 进行解释。

对于这样的一大块代码，您可能希望改用[HEREDOC](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。

# ajax - 返回ajax数据

> ID：15954594
> 
> 赞同：2
> 
> 时间：2013-04-11T16:57:14.197
> 
> 标签：ajax, jquery

我在 a 中有一个 ajax 调用，但`function`我没有找到如何处理`return`数据的解决方案：

```
function get_blog_post(id){

    var info="id="+id;
    $.ajax({
            type: 'POST',
            url: 'get_blog_post.php',
            data: info,
            success: function(data){
                return data;
            }
    });

} 
```

上面的代码不起作用。包含正确答案，`data`但如果我调用`get_blog_post()` `function`.

:\

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:01:41.157

```
function get_blog_post(id, callback){

    var info="id="+id;
    $.ajax({
        type: 'POST',
        url: 'get_blog_post.php',
        data: info,
        success: function(data){
            callback(data);
        }
    });
}

get_blog_post(5, function(data){
    // use data here
}); 
```

或设置 async = false （不推荐）：

```
 $.ajax({
        type: 'POST',
        url: 'get_blog_post.php',
        data: info,
        async: false,
        success: function(data){
            return data;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:02:13.467

提供一个回调方法并在其中做任何你想做的事情

```
function get_blog_post(id, callback){

    var info="id="+id;
    $.ajax({
            type: 'POST',
            url: 'get_blog_post.php',
            data: info,
            success: callback
    });

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:00:13.710

该`success`函数在 ajax 调用完成后运行一段时间。这就是异步调用的本质——就像 javascript 中的 ajax。

这意味着您不能返回它并且必须对该函数中的数据做一些事情。也许它是文本，您将其放入文本区域，例如：

```
success: function(data){
             $('textarea').val(data);
         } 
```

# python - 匹配python列表中的不同项目

> ID：15954598
> 
> 赞同：0
> 
> 时间：2013-04-11T16:57:24.640
> 
> 标签：python

什么是匹配 Python 2.7 列表中不同项目的最佳方法，我有

```
list= [('A', 6L), ('B', 7L), ('C', 8L), ('D', 8L), ('E', 6L), ('F', 8L)] 
```

我想匹配这样的结果

```
new list = ('A', 6L, 'B', 7L), ('C', 8L, 'E', 6L), ('D', 8L), ('F' 8L)] 
```

在这种情况下 D 和 F 中，任何不匹配的项目都位于列表的末尾。

编辑：通过匹配不同我的意思是将每个元组（例如（A，6））与另一个元组连接起来，其中元组中的第二项（例如6）不一样。所以 (A, **6** ) 和 (B, **7** ) 但不是 (A, **6** ) 和 (E, **6** )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:01:36.457

如果您想最大化匹配数（与示例不同），您可以对列表进行排序并从两端匹配项目。

```
import operator
oldlist = [('A', 6L), ('B', 7L), ('C', 8L), ('D', 8L), ('E', 6L), ('F', 8L)]
newlist = []

oldlist.sort(key=operator.itemgetter(1))
while oldlist and oldlist[0][1] != oldlist[-1][1]:
    newlist.append(oldlist.pop(0) + oldlist.pop())
newlist.extend(oldlist)  #unmatched items 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:06:18.463

如果你没有重复，这样的事情应该可以工作：

```
available = set(your_original_list)
matching = []
while len(available) > 0:
    first = available.pop()
    current_set = set()
    current_set.add(first)
    for possible_match in available.copy():
        if matches(first, possible_match):
            current_set.add(possible_match)
            available.remove(possible_match)

    matching.append(current_set) 
```

当然，实现该`matches(a, b)`功能取决于您。您可以`matching`按每个元素中集合的长度对列表进行排序。( `matching.sort(lambda a,b: len(b)-len(a))`)

# ruby-on-rails - 当计数器缓存达到 0 时删除记录

> ID：15954599
> 
> 赞同：0
> 
> 时间：2013-04-11T16:57:26.573
> 
> 标签：ruby-on-rails, activerecord, counter-cache

我有以下具有以下关系的模型：

```
+------+ 1    n +------------+ n    1 +-----+
| Post |--------| TagMapping |--------| Tag |
+------+        +------------+        +-----+ 
```

现在，在我的应用程序中`Post`，a 的计数`Tag`被非常频繁地读取，并且仅在添加新帖子时才会更改，与读取相比，这种情况很少发生。因此，我决定为模型添加`posts_count`属性`Tag`。

这是我的 ActiveRecord 模型：

Post.rb：

```
class Post < ActiveRecord::Base

  # other stuff ... 

  # relations
  has_many :tag_mappings, dependent: :destroy
  has_many :tags, through: :tag_mappings

  # assign a new set of tags
  def tags=(new_tags)
    # generate a list of tag objects out of a listing
    if new_tags && !new_tags.instance_of?(Array)
      new_tags = new_tags.split(/\s+/).map do |tag|
        tag = Tag.find_or_initialize_by_name tag
        tag.save ? tag : false
      end.select {|v| v }
    end

    # remove the spare tags which aren't used by any posts
    ((tags || []) - new_tags).each do |tag|
      tag.destroy if tag.posts.count <= 1
    end

    # replace the old tags with the new ones
    tags.delete_all
    new_tags.each do |tag|
      # prevent tagging the post twice with the same tag
      tags << tag unless TagMapping.exists? post_id: self[:id], tag_id: tag.id
    end
  end
end 
```

标签映射.rb：

```
class TagMapping < ActiveRecord::Base

  # other stuff ...

  # create a cache for the post count in the Tag model
  belongs_to :tag, counter_cache: :posts_count
  belongs_to :post
end 
```

标签.rb：

```
class Tag < ActiveRecord::Base

  # other stuff ...

  has_many :tag_mappings, dependent: :destroy
  has_many :posts, through: :tag_mappings
end 
```

当我销毁标签的所有帖子时`posts_count`，正确地减少到 0。但`Tag`记录仍然存在。`posts_count`如果达到0 ，如何删除记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:23:29.593

我没有使用计数器缓存，而是简单地使用`after_destroy`and`after_create`钩子来跟踪帖子计数：

```
class TagMapping < ActiveRecord::Base

  # other stuff

  after_create :increment_post_count
  after_destroy :decrement_post_count

  def increment_post_count
    tag.posts_count += 1
    tag.save
  end

  def decrement_post_count
    tag.posts_count -= 1
    tag.save
    tag.destroy if tag.posts_count <= 0
  end
end 
```

# nosql - NoSQL 与 Pubsub

> ID：15954601
> 
> 赞同：2
> 
> 时间：2013-04-11T16:57:28.883
> 
> 标签：nosql, publish-subscribe

我目前正在研究一种需要使用 pub-sub 系统和 NoSQL 数据存储的架构，而不是使用两种不同的产品，我想知道是否有任何好的产品同时支持存储和 pub-sub。

> 当前可用的也支持发布订阅模式的稳定 NoSQL 数据存储有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:54:43.833

我会检查Redis。

[http://redis.io/commands](http://redis.io/commands)

相当多的人似乎将它用于消息传递和发布/订阅，并且它作为键/值存储也享有盛誉。

这些天来，它在 NoSQL 世界中肯定有很大的吸引力。

# java - 如何在 Netbeans 上定义 jRadioButton 的标签位置？

> ID：15954603
> 
> 赞同：3
> 
> 时间：2013-04-11T16:57:36.677
> 
> 标签：java, swing, netbeans, label, jradiobutton

我想在 Netbeans 上的 buttonGroup 上定义 jRadioButtons 的标签位置，以便标签位于其 radioButton 下方。可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:01:36.407

`JRadioButton#setText()`与 一起使用`setVerticalTextPosition(SwingConstants.BOTTOM)`。

```
JRadioButton jrb = new JRadioButton();
jrb.setText("Label");
jrb.setVerticalTextPosition(JRadioButton.BOTTOM);
jrb.setHorizontalTextPosition(JRadioButton.CENTER); 
```

![在此处输入图像描述](https://i.stack.imgur.com/DwVft.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:19:13.617

您必须同时使用`r.setVerticalTextPosition(JRadioButton.BOTTOM);`两者 `r.setHorizontalTextPosition(JRadioButton.CENTER);`。否则将无法正常工作

```
import javax.swing.*;
import java.awt.*;

public class PersonFrame extends JFrame
{
    public PersonFrame()
    {
        JRadioButton r = new JRadioButton();
r.setText("Text");
r.setVerticalTextPosition(JRadioButton.BOTTOM);
r.setHorizontalTextPosition(JRadioButton.CENTER);

        JPanel testPanel = new JPanel();
        testPanel.setLayout(new FlowLayout());
        testPanel.add(r);

        this.add(testPanel);
        this.setSize(100,100);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    public static void main(String[]args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {

            @Override
            public void run() {
                new PersonFrame();
            }
        });

    }
} 
```

# java - 如何在不使用构造函数的情况下初始化 AspectJ 方面？

> ID：15954607
> 
> 赞同：1
> 
> 时间：2013-04-11T16:57:45.797
> 
> 标签：java, aop, aspectj

我的 AspectJ 方面如下所示：

```
@Aspect
public class MyAspect {
  private Child child;
  public MyAspect() {
    this.child = new Child();
  }
  @Around("... skipped ...")
  public Object wrap(ProceedingJoinPoint point) throws Throwable {
    // some custom functionality
    return point.proceed();
  }
} 
```

这不起作用，因为在构造切入点`Child`的过程中`wrap()`会调用它并导致运行时异常，因为 的实例`MyAspect`尚未准备好。

`MyAspect`是否可以在实例化后以某种方式告诉 AspectJ 调用某个方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:22:33.170

**新答案：**

这是一个示例驱动程序类`Child`：

```
public class Child {
    private String name;

    public Child(String name) {
        this.name = name;
        System.out.println("Constructing child named " + this.name);
    }

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public static void main(String[] args) {
        Child myChild = new Child("Penélope");
        System.out.println("My child is named " + myChild.getName());
        myChild.setName("María Elena");
        System.out.println("My child is now named " + myChild.getName());
    }
} 
```

这是一个`MyAspect`拦截公共方法和构造函数执行`Child`的切面，但不包括切面构造函数：

```
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;

@Aspect
public class MyAspect {
    private Child child;

    public MyAspect() {
        child = new Child("Scarlett");
        System.out.println("Aspect child is named " + child.getName());
        child.setName("Cristina");
        System.out.println("Aspect child is now named " + child.getName());
    }

    @Around(
        "(execution(public * Child.*(..)) || execution(public Child.new(..)))" +
        "&& !cflow(initialization(MyAspect.new()))"
    )
    public Object wrap(ProceedingJoinPoint point) throws Throwable {
        System.out.println(point.getStaticPart());
        return point.proceed();
    }
} 
```

这是示例输出：

```
Constructing child named Scarlett
Aspect child is named Scarlett
Aspect child is now named Cristina
execution(void Child.main(String[]))
execution(Child(String))
Constructing child named Penélope
execution(String Child.getName())
My child is named Penélope
execution(void Child.setName(String))
execution(String Child.getName())
My child is now named María Elena 
```

您可以看到`Child`在方面构造过程中没有截取任何连接点。顺便说一句，否则你`NoAspectBoundException`无论如何都会得到。`;-)`

* * *

**老答案：**

您可以将切入点与（未经测试的）类似的东西结合起来：

```
... && !cflow(MyAspect.new()) 
```

这应该排除您不希望拦截的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:38:45.967

也许您最好尝试在建议中进行初始化。例如-

```
after() : execution(MyAspect.new()) {
  this.child = new Child();
} 
```

但实际上，这让我觉得这是一种糟糕的形式。在构造过程中在某处应用包含方面的建议`Child`似乎是一种循环依赖。我会尝试重构（也许是多个方面）以避免循环。

# ruby-on-rails-3 - 尝试通过 routes.rb 强制 SSL 后，我的登录路由不起作用

> ID：15954608
> 
> 赞同：3
> 
> 时间：2013-04-11T16:57:51.640
> 
> 标签：ruby-on-rails-3, ssl, ruby-on-rails-3.2, routes

我希望人们能够通过 SSL 订阅和登录我的应用程序。我原来的路线，不是 SSL，是这样的：

```
resource :login, controller: "sessions" do
  collection do
    get 'new'
    get 'create'
  end
end 
```

工作得很好，但未加密。然后我尝试了这个：

```
scope :protocol => 'https://', :constraints => { :protocol => 'https://' } do
  resource :login, controller: "sessions" do
    collection do
      get 'new'
      get 'create'
    end
  end
end 
```

现在Rails我：

```
No route matches [GET] "/login" 
```

当我导航到`https://myapp.dev/login`

请注意我在开发模式下使用 Pow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:20:48.903

嗯，我以为只是

```
 scope :constraints => { :protocol => "https" } do 
  resource :login, controller: "sessions" do
    collection do
      get 'new'
      get 'create'
    end
   end
 end 
```

你可以根据需要在下面放置更多资源条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:00:17.773

为什么不按原样保留路线并添加到`production.rb`文件中：

```
config.force_ssl = true 
```

这样，您将通过 SSL 路由所有流量，而不仅仅是登录控制器，这是保护您的用户会话 cookie 的好习惯。

# linux - 为什么我的启动脚本没有运行

> ID：15954610
> 
> 赞同：1
> 
> 时间：2013-04-11T16:57:54.247
> 
> 标签：linux, sh, init.d, angstrom-linux

根据各种教程，我完成了以下操作：

`ftpserver.py`创建了一个名为`/home/root/`

`/etc/init.d/`在调用中创建了一个`ftpserver`看起来像这样的文件“

```
#!/bin/sh
python /home/root/ftpserver.py 
```

创建后，我运行了以下命令（显然是为了使其可执行）

```
root@beaglebone1:/etc/init.d# chmod +x ftpserver 
```

但它似乎没有在启动时运行。但是，如果我运行以下命令：

```
root@beaglebone1:/etc/init.d# /etc/init.d/ftpserver 
```

然后脚本运行，执行 ftpserver.py。

有趣的是，如果我尝试以`ftpserver`下列方式从它的目录中运行（不确定这是否相关）：

```
root@beaglebone1:/etc/init.d# ftpserver 
```

它返回：

```
-sh: ftpserver: command not found 
```

所以我不确定为什么我的脚本在启动时没有运行。

作为参考，ftpserver.py 看起来像这样：

```
from pyftpdlib import ftpserver
authorizer = ftpserver.DummyAuthorizer()
authorizer.add_user("root", "12345", "/home/root", perm="elradfmw")
handler = ftpserver.FTPHandler
handler.authorizer = authorizer
address = ("", 21)
ftpd = ftpserver.FTPServer(address, handler)
ftpd.serve_forever( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:05:21.230

尝试运行它`./ftpserver`

另外，检查您的脚本是否配置为在当前运行级别运行 - 可能是 /etc/rc.conf 和那里`DAEMONS`或类似的东西。

# python - Python。解析 XML：将属性的分隔值作为列表获取

> ID：15954611
> 
> 赞同：-4
> 
> 时间：2013-04-11T16:57:54.593
> 
> 标签：python, xml, parsing

事情是这样的：

```
<parent>  
  <child attribute1="100" attribute2="1,2"/>
  <child attribute1="200" attribute2="1,2,5"/>  
  <child attribute1="300" attribute2="1,2,5,10"/>  
</parent> 
```

解析后我希望看到的内容：

```
100 [1, 2] 
200 [1, 2, 5]  
300 [1, 2, 5, 10] 
```

作为列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:01:25.387

只需拆分每个元素的属性值并将它们转换为整数。

使用[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)：

```
from xml.etree import ElementTree

tree = ElementTree.fromstring(example)

for child in tree.findall('.//child'):
    attribute1 = int(child.attrib['attribute1'])
    attribute2 = [int(v) for v in child.attrib['attribute2'].split(',')]
    print attribute1, attribute2 
```

对于您的示例文档，将打印出：

```
>>> for child in tree.findall('.//child'):
...     attribute1 = int(child.attrib['attribute1'])
...     attribute2 = [int(v) for v in child.attrib['attribute2'].split(',')]
...     print attribute1, attribute2
... 
100 [1, 2]
200 [1, 2, 5]
300 [1, 2, 5, 10] 
```

# git - 无法让 git 读取我的 $HOME/.gitignore 文件

> ID：15954615
> 
> 赞同：1
> 
> 时间：2013-04-11T16:58:11.480
> 
> 标签：git

我在 Ubuntu 12.04.1 上有 git 版本 1.7.9.5

我正在尝试设置一个全局 .gitignore 文件。我可以看到 git 在 strace 下打开我的 .gitconfig 文件（6 次！）：

```
$ strace -e trace=open git stat  2>&1 | grep gitconfig
open("/home/roy/.gitconfig", O_RDONLY)  = 3
open("/home/roy/.gitconfig", O_RDONLY)  = 3
open("/home/roy/.gitconfig", O_RDONLY)  = 3
open("/home/roy/.gitconfig", O_RDONLY)  = 3
open("/home/roy/.gitconfig", O_RDONLY)  = 3
open("/home/roy/.gitconfig", O_RDONLY)  = 3 
```

在那个文件中，我有：

```
[core]
    excludefile = /home/roy/.gitignore 
```

但 strace 说它没有打开排除文件：

```
$ strace -e trace=open git stat  2>&1 | grep  ignore
open(".gitignore", O_RDONLY)            = -1 ENOENT (No such file or directory)
open(".~/.gitignore", O_RDONLY)         = -1 ENOENT (No such file or directory) 
```

我错过了什么魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:23:21.420

你应该使用[`excludesfile`](http://git-scm.com/book/en/Customizing-Git-Git-Configuration)，而不是`excludefile`：

```
[core]
    excludesfile = /home/roy/.gitignore 
```

# bits - 一元补码运算符的位混淆

> ID：15954618
> 
> 赞同：0
> 
> 时间：2013-04-11T16:58:20.307
> 
> 标签：bits

2 的按位一元补码运算符 (~) 为 -3。我读到一些二进制表示中的值 2 是 0010 并且按位一元补码运算符将位从 0 更改为 1 的地方，反之亦然。所以~2的值是1101。这意味着-3。但我的困惑是为什么他们将 2 的二进制表示为 0010。根据我的说法，int 是 32 位。那么为什么 2 不能是 000000000000000000000000000000010 而它的一元补码是 11111111111111111111111111111101？我知道错了，但为什么呢？请解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-31T17:28:13.457

您的问题的答案是**“选择补码而不是补码，因为有几个方便的特性使算术更容易在数字电路中实现”**。

我相信从你问题的措辞来看，一些插图会有所帮助。

要完全理解这一点，您仍然需要阅读二进制补码表示法和算术 - 包括它们的工作原理和历史 - 但我将尝试以类似故事的方式解释这里的基础知识。

假设我们有 4 位来表示有符号整数值。

*   4 位只能表示 16 个不同的值（4 位可以制作 16 个不同的不同“模式”）... 0000, 0001, 0010, 0011, 0100, ... 1111（试试看，更容易看到并以柱状格式开发模式，您将在下面看到我已经完成）
*   确定您希望能够表示的 16 个值
*   可以说 0000 代表零，0001 代表一，以此类推代表正数，但是负数呢？
*   因为零已经“占据了一个位置”，所以我们可以表示 15 个其他整数，因此很明显我们不能表示相同数量的正值和负值。
*   我们做出选择：我们的范围将从 -8 到 +7（我们可能会说 -9 到 +6 或 -7 到 +8 等，但您将在下面看到这个选择的回报）
*   现在哪些位模式应该代表负数？
*   我相信你会同意，如果添加到其加法逆元的每个数字都为零，而我们不需要诉诸 if-negative-then-else(if positive) 逻辑，那将是非常好的。例如，如果 +3 表示为 0011，我们对 1101 进行（二进制）加法，我们得到结果（进位 1）0000。忽略进位，我们得到零。这使得位模式 1101 成为标签“-3”的明显赢家。
*   您可以以相同的方式使用剩余的值，您应该得到以下结果...... `-8 1000 -7 1001 -6 1010 -5 1011 -4 1100 -3 1101 -2 1110 -1 1111 0 0000 +1 0001 +2 0010 +3 0011 +4 0100 +5 0101 +6 0110 +7 0111`

具有以下美观方便的特点

*   “自然计数位模式”。向下看最右边的列，您会看到 0 1 0 1...，然后在下一列中看到 0 0 1 1...，然后是 0 0 0 0 1... 等等，依次完美运行积极的
*   递增“环绕”（0,1,2,...7,-8,-7,-6,...-1,0,1,...等，递减也是如此）
*   加法逆元的二进制加法得到零，没有额外的逻辑来处理符号
*   所有负数的第一位都是 1，零，所有正数都以 0 开头。（第一位称为“符号位”。）
*   加法逆可以通过以下规则/算法获得：“反转所有位，递增，丢弃进位”。魔法！再试3次： `3 : 0011 ~ : 1100 (the NOT operator gives "one's complement") +1: 1101 (the two's complement representation of -3) ~ : 0010 +1: 0011 (back to +3) etc`
*   这是二进制补码符号

如果你理解了这个 4 位的故事，你会发现它可以很容易地扩展到适用于 32 位有符号整数。

# ios - 导航栏视图控制器的大小是其他控制器的两倍

> ID：15954621
> 
> 赞同：0
> 
> 时间：2013-04-11T16:58:26.310
> 
> 标签：ios, uinavigationbar, navigationcontroller

我在导航控制器中嵌入了多个视图控制器，其中一个导航栏的大小是其他导航栏的两倍（向下延伸两倍）。我希望所有这些条的大小相同，但无论如何都无法在 Inspector 中更改大小。此导航栏上没有条形按钮。有什么想法可以快速修复而无需重建此 VC？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:10:43.480

默认`UINavigationBar`高度为 44 磅且无法更改。我认为您有一个约束问题：选择错误的尺寸`UINavigationBar`并在右上角的“实用程序”中选择“尺寸检查器”。然后，查看几个约束，编辑和/或删除一些约束。

# c# - 迭代这个的正确方法？

> ID：15954622
> 
> 赞同：1
> 
> 时间：2013-04-11T16:58:31.840
> 
> 标签：c#, asp.net

我有一个以分号分隔的字符串列表。

总会有一个偶数，因为第一个是键，下一个是值，

**前任：**

```
name;Milo;site;stackoverflow; 
```

所以我把它们分开：

```
 var strList = settings.Split(';').ToList(); 
```

但现在我想使用 foreach 循环将这些放入`List<ListItem>`

我想知道它是否可以通过迭代来完成，或者我是否必须使用一个值`'i'`来获得`[i] and [i+1]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:05:35.730

可以用 LINQ 完成，但我不确定这个更好

```
var dict = input.Split(';')
            .Select((s, i) => new { s, i })
            .GroupBy(x => x.i / 2)
            .ToDictionary(x => x.First().s, x => x.Last().s); 
```

您也可以为此使用[moreLinq](https://code.google.com/p/morelinq/)的 Batch

```
var dict2 = input.Split(';')
            .Batch(2)
            .ToDictionary(x=>x.First(),x=>x.Last()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T17:02:02.953

我无法编译它，但这应该适合你：

```
var list = new List<ListItem>();
for (int i = 0; i < strList.Count; i++)
{
    i++;
    var li = new ListItem(strList[i - 1], strList[i]);
    list.Add(li);
} 
```

同样，我无法完全重新创建您的环境，但由于第一个是键，第二个是值，并且您确定字符串的状态，这是一个非常简单的算法。

但是，利用`foreach`循环仍然需要您对索引有更多了解，因此使用基本`for`循环会更直接一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T17:09:20.057

首先，我使用了一个有价值的辅助函数。它类似于`GroupBy`按顺序索引而不是某些键进行分组。

```
 public static IEnumerable<List<T>> GroupSequential<T>(this IEnumerable<T> source, int groupSize, bool includePartialGroups = true)
    {
        if (groupSize < 1)
            throw new ArgumentOutOfRangeException("groupSize", groupSize, "Must have groupSize >= 1.");
        var group = new List<T>(groupSize);
        foreach (var item in source)
        {
            group.Add(item);
            if (group.Count == groupSize)
            {
                yield return group;
                group = new List<T>(groupSize);
            }
        }
        if (group.Any() && (includePartialGroups || group.Count == groupSize))
            yield return group;
    } 
```

现在你可以简单地做

```
var listItems = settings.Split(';')
    .GroupSequential(2, false)
    .Select(group => new ListItem { Key = group[0], Value = group[1] })
    .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:02:43.413

如果你想使用 foreach

```
string key=string.Empty;
    string value=string.Empty;

    bool isStartsWithKey=true;
    var strList = settings.Split(';').ToList()

    foreach(var item in strList)
    {
      if(isStartsWithKey)
      {
        key=item;
      }
      else
      {
        value=item;
        //TODO: now you can use key and value
      }

      isStartsWithKey=!isStartsWithKey;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T17:04:48.803

```
List<int, string> yourlist;
for(int i=0;i<strList.length/2;i++)
{
  yourlist.add(new ListItem(strList[i*2], strList[i*2+1]));
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-11T17:04:52.857

在我看来，这似乎是最简单的方法

```
for(var i = 0; i < strList.Count(); i = i + 2){
    var li = new listItem (strList[i], strList[i + 1];
    listToAdd.Add(li);
} 
```

**更新示例**

```
for (var i = 0; i < strList.Count(); i = i + 2){

    if (strList.ContainsKey(i) && strList.ContainsKey(i + 1)){
        listToAdd.Add(new listItem(strList[i], strList[i + 1]);
    }
} 
```

# c++ - 在模板类的继承时，如何保持它的通用性？

> ID：15954624
> 
> 赞同：2
> 
> 时间：2013-04-11T16:58:40.527
> 
> 标签：c++, templates, inheritance, stl

对不起，如果我的英语或我的编码约定不好。
std::list 是 STL 列表。
我正在尝试制作一个库，可以根据用户的选择无缝地`std::list<>::iterator`使用他。`std::list<>::reverse_iterator`首先，我不想实现所有`std::list<>::iterator`方法。所以我会将它们继承到我的班级：

```
template <class realIter> class directedListTypeIter : public realIter 
```

用户将使用 2 个可能的模板来实例化directedListTypeIter：

```
directedListTypeIter<std::list<value>::iterator>
directedListTypeIter<std::list<value>::reverse_iterator> 
```

这意味着我应该创建以下赋值运算符（或复制构造函数）：

```
directedListTypeIter& operator=(std::list<value>::reverse_iterator &constructorIter) {
   ((std::list<value>::reverse_iterator*)this)->operator=(constructorIter);
   return *this;
}

directedListTypeIter& operator=(std::list<value>::iterator &constructorIter){
   ((std::list<value>::reverse_iterator*)this)->operator=(constructorIter);
   return *this;
} 
```

我需要所有这些赋值运算符用于以下函数实现和其他类似的实现。

```
directedListTypeIter begin(std::list<value>& userList){ 
  directedListTypeIter<realIter> retVal;
  if (someCheck()){
    retVal = userList.begin();
  } else {
    retVal = userList.rbegin();
  }
  return retVal;
} 
```

换句话说——为了实现 begin() 函数和我需要的其他类似函数，我应该实现赋值运算符（或复制构造函数）。

这是我的问题：

一世。这一切都取决于“价值”结构的存在和使用。如何删除此依赖项？

ii. 如果我有更多可能的**继承类型**，我是否应该为每种类型创建新的赋值运算符（或复制构造函数）？模板编程不是意味着不复制该代码吗？如何在不将代码复制到每个操作员的情况下进行相同操作？

iii. 我应该添加以下内容：

```
 directedListTypeIter& operator=(realIter &constructorIter){
   ((realIter*)this)->operator=(constructorIter);
   return *this;
 } 
```

会编译 - 而不添加列出所有可能的继承值的东西？

谢谢你。

ps 本主题是关于如何模板化继承，而不是关于在一个接口中实现两种迭代器类型的使用。我的意思是——“C++ 标准库列表”用例只是一个更好地解释我的问题的例子。

# ruby-on-rails - Rails POST 不能在 Heroku 上运行，但可以在本地运行

> ID：15954630
> 
> 赞同：1
> 
> 时间：2013-04-11T16:59:02.730
> 
> 标签：ruby-on-rails, json, post, heroku

我有一个用于 iPad 应用程序的 API。控制器接受 json 并返回 json。当我在本地运行服务器并使用 ISO 模拟器时，POST 请求工作，但是当我在部署到 heroku 后点击 POST 请求时，我作为 JSON 发送的所有参数都为零。

观看 heroku 日志，我在提出请求时得到以下信息。

```
 at=info method=POST path=/note/update host=myapp.herokuapp.com fwd="174.50.210.40" dyno=web.1 connect=0ms service=755ms status=500 bytes=643
2013-04-11T16:51:30.907621+00:00 app[web.1]:
2013-04-11T16:51:30.908272+00:00 app[web.1]: Processing by MyAPIController#update_note as JSON
2013-04-11T16:51:30.908272+00:00 app[web.1]:   Parameters: {"myapi"=>{}}
2013-04-11T16:51:30.908272+00:00 app[web.1]: Completed 500 Internal Server Error in 551ms 
```

我在控制器中的操作如下所示。

```
def update_note

    puts "debug note update #{ params[:note] }"

    uuid = params[:uuid]
    user = User.find_by_uuid(uuid)
    noteid = params[:note][:note_id] if params[:note][:note_id]

    if !user.nil?
      note = nil
        note = user.notes.find(noteid) if !noteid.nil?
        if !note.nil?
            user.notes.find(noteid) 
            note.update_attributes!(params[:note])
        else
            note = user.notes.build(params[:note])
        note.save
        end
        render :json => {:result => note}
    else
        render :json => {:error => "nope"}
    end
  end 
```

我的路线文件有以下内容

```
match '/note/update'  =>  'myapi#update_note' 
```

对于熟悉objective-c的您，这里是发出请求的代码

```
NSDictionary *noteVo = [NSDictionary dictionaryWithObjectsAndKeys:note->title, @"title", note->body, @"body", note->note_id, @"note_id", nil];

    NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:[_dm getUser]->uuid, @"uuid", noteVo, @"note", true, @"remote", nil];

    NSError *writeError = nil;

    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&writeError];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:
                                    [NSURL URLWithString:[BASE_URL stringByAppendingString:@"note/update"]] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: jsonData];

    [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:07:32.090

我认为您的示例不完整（我看不到在您的 Obj-C 代码中设置“myapi”参数的位置）

您是否尝试过使用 curl 调用 heroku 上的 API？

我认为这样调试会更容易。

# git - git - 自创建以来对分支的更改？

> ID：15954631
> 
> 赞同：21
> 
> 时间：2013-04-11T16:59:08.080
> 
> 标签：git, branch, msysgit

我总是问自己一系列关于我创建的分支的问题，我还没有确定如何完成：

1.  我在分支中更改了哪些文件？
2.  我对分支所做的实际更改（差异）是什么？
3.  我对分支所做的提交日志是什么？

现在我想如果弄清楚如何使用`git cherry master <branchname>`. 有了这个，我可以逐个哈希并找出所有内容，但是如果您有很多提交，这可能会很耗时。请注意，我不想与 master 的当前状态进行比较。我认为关键是知道您创建分支的 master 的哈希值，但我不确定如何确定这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-11T17:20:31.103

要查找当前结帐与 master 分支的差异，

```
base=`git merge-base master HEAD`
echo $base 
```

找出从那时起更改了哪些文件，

```
git diff --name-only $base HEAD 
```

显示累积的差异

```
git diff $base HEAD 
```

当您想描述整个提交系列时，您可以使用上面链接的答案 Gabriele Petronella 中的语法，它`master..HEAD`是简写`HEAD ^master`，意思是“所有可从 HEAD 访问的提交，但不包括可从 master 访问的提交”。缺少端点默认为 HEAD，所以你可以说`git log --oneline master..`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-10-18T23:58:31.030

假设您从 分支`master`，

*1\. 分支后哪些文件发生了变化？*

```
git diff master...<branchname> --name-only 
```

*2\. 自分支以来的完整差异是什么？*

```
git diff master...<branchname> 
```

*3\. 什么是分支后的提交日志？*

```
git log master..<branchname> 
```

您无需指定`<branchname>`是否已将其签出（例如，`git diff master...`）。

**注意：** `git diff`需要三点`...`和`git log`双点`..`才能获得您要求的行为。

* * *

有关点语法的说明，请参见：

*   [... Git 提交范围中的双点“..”和三点“...”？](https://stackoverflow.com/questions/462974/what-are-the-differences-between-double-dot-and-triple-dot-in-git-com)
*   [**... Git diff**提交范围中的双点“..”和三点“...” ？](https://stackoverflow.com/questions/7251477/what-are-the-differences-between-double-dot-and-triple-dot-in-git-dif)
*   [Pro Git - 提交范围](https://git-scm.com/book/tr/v2/Git-Tools-Revision-Selection#Commit-Ranges)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T17:20:22.003

对于更改的文件列表和实际差异，如果您知道要比较的 2 个提交，则更有意义。

如果您想查看 和 之间的差异`START_SHA1`，`END_SHA1`您可以这样做：

```
git diff START_SHA1 END_SHA1 
```

如果你只想要文件列表，你可以这样做：

```
git diff --name-only START_SHA1 END_SHA1 
```

如果您还想知道文件中的更改类型（如`A`, `M`, `D`, `C`, `R`, `U`），您可以执行以下操作：

```
git diff --name-status START_SHA1 END_SHA1 
```

# javascript - 主干保存模型问题

> ID：15954632
> 
> 赞同：0
> 
> 时间：2013-04-11T16:59:10.783
> 
> 标签：javascript, backbone.js

我正在尝试保存模型并在成功时取消渲染它：问题是在成功中我无法引用 this 引用（即视图），我也无法引用 this.model 的变量 isOk.status。 save(...) 返回。编码：

```
save: function(e) {
    e.preventDefault();

    var isOk = this.model.save(null,
        {
            wait: true,

            success: function(model, response){
                console.log(response);
                console.log(response.status);

            },

            error: function(model, response){
                console.log("error");
                console.log($.parseJSON(response.responseText));
                $('#errorMessage').empty();
                $('#errorMessage').append($.parseJSON(response.responseText).error);
                $('#errorApproveModal').modal({
                    keyboard: true
                });
            }
        });
    console.log('logging isOk');
    console.log(isOk);
    //this one is working! It's on validate event
    if(!isOk){
        $('#errorMessage').empty();
        $('#errorMessage').append("Error: there was an error");
        $('#errorApproveModal').modal({
            keyboard: true
        });

        return false

    }
    console.log(isOk);
    **//both those checks are not working for some reason.**
    //
    if(isOk.status == 200 || isOk.statusText == "OK"){
        console.log('in is ok');
        this.remove();
    }

    return false;
} 
```

顺便说一句，观点是：

```
App.Views.User = Backbone.View.extend({
      model: App.Models.User
      ,
      save: function...
}); 
```

有人可以帮忙吗？有没有比这种方法更好的方法来处理成功和错误？谢谢！！罗伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:03:16.533

我不确定这是否是正确的方法，但我总是只声明一个`this`从视图函数引用的变量，然后成功使用它。像这样的东西：

```
save: function(e) {

    // ADD THIS LINE
    var me = this;

    var isOk = this.model.save(null,
        {

    ....
            success: function(model, response){
                // USE me IN HERE
                me.render(); // e.g

            },
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:21:20.507

你也可以这样做：

保存：函数（e）{

```
var isOk = this.model.save(null,
    {

....
        success: function(model, response,options){
            // USE me IN HERE
            this.options.me.render(); // e.g

        },
        //ADD me this 
        me : this
....
} 
```

使用选项，您可以执行所有参数。

# java - 谷歌应用引擎（java）数据存储检索不起作用

> ID：15954634
> 
> 赞同：1
> 
> 时间：2013-04-11T16:59:25.437
> 
> 标签：java, google-app-engine, google-cloud-datastore

我无法从 Data Store 检索实体。

以下：[谷歌代码实验室](http://googcloudlabs.appspot.com/codelabexercise1.html)我做了这个功能：

```
 @SuppressWarnings("deprecation")
   public static Iterable<Entity> listEntities(String kind, String searchBy,String searchFor) {
   com.google.appengine.api.datastore.DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
   Query q = new Query(kind);

   if (searchFor != null && !"".equals(searchFor)) 
        {
            q.addFilter(searchBy, FilterOperator.EQUAL, searchFor);
        }

    PreparedQuery pq = ds.prepare(q);

    return pq.asIterable();

    } 
```

然后调用它来获取值：

```
 for(Entity u:listEntities("Upload","UID","ratan"))
         {
             String uid = (String) u.getProperty("url");
             System.out.println("#1##"+uid);
         } 
```

但它不打印任何值！我哪里出错了。

这是我的“上传”实体的数据存储实例

![在此处输入图像描述](https://i.stack.imgur.com/t03ju.png)

即使这样也行不通：

```
for(Entity u:listEntities("Upload",null,null))
{
  String uid = (String) u.getProperty("url");
  System.out.println("#1##"+uid);
} 
```

# nexus - 如何查找过去 24 小时内添加到 Sonatype Nexus 的所有工件？

> ID：15954638
> 
> 赞同：1
> 
> 时间：2013-04-11T16:59:57.753
> 
> 标签：nexus

如何获取过去 24 小时内添加到**Sonatype Nexus 中央存储库的所有工件的列表？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:21:07.263

我建议解析 Nexus 提供的 RSS 提要：

*   [http://www.sonatype.com/books/nexus-book/reference/using-sect-feeds.html](http://www.sonatype.com/books/nexus-book/reference/using-sect-feeds.html)

# three.js - 片段着色器制服不再在简单着色器测试中上传

> ID：15954645
> 
> 赞同：0
> 
> 时间：2013-04-11T17:00:16.090
> 
> 标签：three.js

前一阵子（想让我们试试浏览器）我做了一个小的three.js测试，它绘制了一个带有2个自定义着色器的四边形来玩弄。撕掉一些示例代码，放入着色器，瞧。我直接从 Github 嵌入了 three.js，所以我当然容易出现迁移问题 :)

事情是这样的：几周后重新访问后，我的制服停止工作（使用 WebGL-Inspector 验证，它们都是零，而之前由 three.js 上传的制服仍然很好）。

正如 WebGL-Inspector 所确认的：

```
0   projectionMatrix    1   FLOAT_MAT4  
[ 1.000000000,  0.000000000,  0.000000000,  0.000000000, 
  0.000000000,  1.000000000,  0.000000000,  0.000000000, 
  0.000000000,  0.000000000, -0.002000200,  0.000000000, 
  0.000000000,  0.000000000, -1.000200033,  1.000000000 ] 
1   modelViewMatrix 1   FLOAT_MAT4  
[ 1.000000000,  0.000000000,  0.000000000,  0.000000000, 
  0.000000000,  1.000000000,  0.000000000,  0.000000000, 
  0.000000000,  0.000000000,  1.000000000,  0.000000000, 
  0.000000000,  0.000000000, -0.100000001,  1.000000000 ]
2   u_resolution    1   FLOAT_VEC2  
    [ 0.000000000,  0.000000000 ]
3   u_time  1   FLOAT     0.000000000
4   u_aspectRatio   1   FLOAT     0.000000000 
```

这是“代码”（当谈到所有网络事物时，我有点像个傻瓜，所以不要抑制任何可能指出其他愚蠢行为的冲动=））：

```
<!-- 
next: texture!
also, it doesn't work anymore =) (uniforms are invalid?)
-->

<html>
<head>
    <title>taste the browser!</title>
    <style>canvas { width: 100%; height: 100% }</style>

    <script type="text/javascript" src="../WebGL-Inspector/core/embed.js">        </script>
    <script src="https://raw.github.com/mrdoob/three.js/master/build/three.js">  </script>
</head>

<body>
    <script id="vertexShader" type="x-shader/x-vertex">
//          varying vec2 v_UV;

        void main() {
//              vUV = uv;
            gl_Position = projectionMatrix * modelViewMatrix *     vec4(position, 1.0);
        }
    </script>

    <script id="fragmentShader" type="x-shader/x-fragment">
        uniform float u_aspectRatio;
        uniform float u_time;
        uniform vec2  u_resolution;

//          varying vec2 v_UV;

        void main() 
        {
            vec2 p = -1.0 + 2.0*(gl_FragCoord.xy/u_resolution);

            // cheapest trick in the book #1: tunnel
            float r = sqrt(dot(p, p));
            float a = atan(p.y, p.x); // abs(a)/3.1416
            float flower = r + 0.2*sin(a*4.0 + u_time);

            // cheapest trick in the book #2: 2D blobs
            vec2 blob1 = vec2(sin(u_time*0.66), cos(u_time*0.96));
            vec2 blob2 = vec2(cos(u_time*0.75 + 1.4), sin(u_time*0.4 - 3.0));
            vec2 dist1 = p - blob1;
            vec2 dist2 = p - blob2;
            dist1 *= 2.0; dist2 *= 3.0;
            float energy = 1.0/dot(dist1, dist1) + 1.0/dot(dist2, dist2);
            energy = pow(energy, 4.0);

                gl_FragColor = vec4(energy, flower, u_time, 1.0);
        }
    </script>

    <script>
        // initialize renderer
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // setup scene & camera
        var scene = new THREE.Scene();
        var camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0.1, 1000);

        // setup uniforms
        var myUniforms = { 
            aspectRatio: { type: "f", value: window.innerWidth/window.innerHeight },
            time: { type: "f", value: 0.0 },
            resolution: { type: "v2", value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
        };

        // build plane with custom shader material
        var geometry = new THREE.PlaneGeometry(2, 2, 1, 1);
        var material = new THREE.ShaderMaterial(
            {
                uniforms: myUniforms,
                attributes: null, 
                vertexShader: document.getElementById('vertexShader').textContent, 
                fragmentShader: document.getElementById('fragmentShader').textContent }
            );
        var plane = new THREE.Mesh(geometry, material);
        scene.add(plane);

        // anything non-zero will do
        camera.position.z = 0.1;

        // create timer
        var timer = new THREE.Clock(true);

        // render loop func.
        function render() {
            // update & render
            myUniforms.time.value = timer.getElapsedTime(); // % 1.0;
            renderer.render(scene, camera);

            // req. next frame
            requestAnimationFrame(render);
        }

        render();
    </script>
</body>
</html> 
```

对此的任何指示：非常欢迎！

（是的，那是 1 个丑陋的着色器；））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:12:38.893

您的制服变量名称与着色器中的变量名称不匹配。

```
var myUniforms = { 
    u_aspectRatio: { type: "f", value: window.innerWidth/window.innerHeight },
    u_time: { type: "f", value: 0.0 },
    u_resolution: { type: "v2", value: new THREE.Vector2(window.innerWidth, window.innerHeight) }
}; 
```

# python - Python-如何使用 re 匹配整个字符串

> ID：15954650
> 
> 赞同：29
> 
> 时间：2013-04-11T17:00:38.133
> 
> 标签：python, string, match

我正在验证用户输入的文本，以便它只接受字母而不接受数字。到目前为止，当我输入一个数字（例如 56）时，我的代码工作正常，它警告我我应该只输入字母，而当我输入字母时它不会返回任何内容（就像它应该做的那样）。我的问题是当我开始输入字母后跟数字时它会接受它，例如（s45）。它的作用是接受第一个字母，但不接受整个字符串。我需要它来接受整个字符串。

```
def letterCheck(aString):
    if len(aString) > 0:
        if re.match("[a-zA-Z]", aString) != None:
            return ""
    return "Enter letters only" 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-11T17:02:42.443

将其锚定到开头和结尾，并匹配*一个或多个*字符：

```
if re.match("^[a-zA-Z]+$", aString): 
```

这里`^`锚定到字符串的开头和`$`结尾，并`+`确保匹配 1 个或多个字符。

不过，您最好还是使用[`str.isalpha()`](http://docs.python.org/2/library/stdtypes.html#str.isalpha)它。无需在这里使用沉重的正则表达式锤子：

```
>>> 'foobar'.isalpha()
True
>>> 'foobar42'.isalpha()
False
>>> ''.isalpha()
False 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T17:02:25.393

在您的正则表达式 + 原始字符串中使用边界来编码正则表达式，如下所示：

```
r"^[a-zA-Z]+$" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T17:07:05.347

您可以考虑在字符串上使用 isalpha() 。如果字符串只包含字母字符，则返回 true，否则返回 false。

```
if aString.isalpha():
   do something
else:
   handle input error 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T08:26:38.790

如果您要寻找漂亮的 Pythonic 作品，请选择 isalpha 和 isdecimal ：

```
str = u"23443434";
print str.isdecimal(); 
```

# c# - FileMode.Append 是否读取整个文件？

> ID：15954659
> 
> 赞同：1
> 
> 时间：2013-04-11T17:01:10.557
> 
> 标签：c#, file-io

我已经阅读了 AppendText 和 FileMode.Append 的文档，它说它会寻找到文件流的末尾。尚不清楚这是否比读取到文件末尾的其他技术更有效。查找是否会导致读取整个文件？

我只是想更好地了解这一点，以便了解处理超大文件时的性能影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:02:03.327

> 查找是否会导致读取整个文件？

不，它只是使用文件系统查找操作将逻辑光标移动到文件末尾。我希望它通常是一个 O(1) 操作，但这取决于文件系统的实现。例如，文件系统可能包含块的链表或类似的东西——在这种情况下，它可能是一个 O(n) 操作，但仍然很快；它不需要读取文件的每个字节。

# html - CGI 内部的 SSI 调用？

> ID：15954663
> 
> 赞同：0
> 
> 时间：2013-04-11T17:01:26.757
> 
> 标签：html, cgi, ssi

是否可以在 CGI 脚本中放置服务器端包含？
有没有其他方法可以做到这一点？

# sockets - 将android应用程序连接到PC服务器的问题

> ID：15954665
> 
> 赞同：0
> 
> 时间：2013-04-11T17:01:36.947
> 
> 标签：sockets, android-emulator

我正在尝试使用`Socket`. 不幸的是，PC 服务器没有收到来自应用程序的任何连接请求（它们之间没有连接）。我正在 Android 模拟器中运行该应用程序。

我在互联网上看到了很多关于这个问题的教程和讨论，我从字面上理解它们，但仍然遇到我上面提到的同样的问题。

注意：Android 应用在 Eclipse 模拟器上运行，PC 服务器在 Netbeans 上运行

PC服务器源代码：

```
public class server {

    ServerSocket server;

    public server() {
        try {
            server = new ServerSocket(8000); // create server socket
            Socket socket = server.accept(); // accept new connection request
            System.out.println("The connection is active");
        } catch (IOException e) {
            System.err.println("error.... 1\n");
        }
    }

    public static void main(String[] args) {
        new server();
    }
} 
```

安卓应用源码（客户端）：

```
public class Client extends Activity {

    Button con;
    Socket socket;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        con = (Button) findViewById(R.id.myButton);
        con.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                try {
                    socket = new Socket("My_PC_IPAddress", 8000);
                }
                catch (Exception e1) {
                    e1.printStackTrace();
                }
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

注意：此权限已添加到`manifest.xml`

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:23:05.467

1）确保您正确写入PC的IP。

2）尝试关闭您的PC的防火墙。

# openlayers - 开放层中的凸包

> ID：15954670
> 
> 赞同：1
> 
> 时间：2013-04-11T17:01:42.773
> 
> 标签：openlayers, convex-hull

我正在使用开放层。我有一组几何点。我想找到这些几何点的边界，以便创建轮廓。在网上搜索后，我发现这被称为凸包。那么 openlayers 是否具有对凸包的内置支持？

有一种算法“礼品包装算法”可以做这种事情。但我不清楚如何在 openlayers 中做到这一点？我需要为此编写自己的逻辑吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:23:00.247

不确定 openlayers 有没有，但如果没有的话，就易于实现和效率而言，[Andrew 的算法可能是最佳选择。](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain)

# tsql - 左外连接返回重复

> ID：15954671
> 
> 赞同：0
> 
> 时间：2013-04-11T17:01:55.023
> 
> 标签：tsql, join, left-join

我有一个场景，我想用交叉引用表中的另一个值覆盖一个值。它们可以是通用覆盖或投资组合特定覆盖。我的交叉引用表如下所示：

```
SEDOL    Portfolio    Override
1        1            Technology
1        2            Financial
1        NULL         Industrial
2        NULL         Technology
3        NULL         Financial 
```

如果投资组合为 NULL，那么它是一个通用覆盖，如果它有一个投资组合编号，那么它是一个投资组合特定覆盖。

那么我的选择将如下所示：

```
SELECT
          Portfolio
      ,   SEDOL
      ,   CASE
              WHEN hack.SEDOL = ia.SEDOL AND hack.Portfolio = ia.Portfolio THEN hack.Override  -- Portfolio Specific Hack
              WHEN hack.SEDOL = ia.SEDOL AND hack.Portfolio IS NULL THEN hack.Override              -- Hack for all portfolio's
              ELSE ia.Sector
          END

FROM positions as ia

     LEFT OUTER JOIN DP_CrossReference AS hack  -- Override/Hacks
          ON hack.SEDOL = ia.SEDOL
          AND (hack.Portfolio = ia.Portfolio OR hack.Portfolio IS NULL) 
```

然而，对于投资组合 1，我似乎得到了重复，其中投资组合特定的覆盖被返回，而 SEDOL 1 的通用覆盖被返回。我认为案例声明足以对此进行排序。它必须是我加入 DP_CrossReference。我怎样才能加入这个表，这样我就不会得到重复，但它涵盖了特定的投资组合覆盖、通用覆盖和没有覆盖的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:16:20.587

如果我理解正确，请试试这个。

```
SELECT
          ia.Portfolio
      ,   ia.SEDOL
      ,   COALESCE(ov1.Override,ov2.Override, ia.Sector)
FROM positions as ia
LEFT OUTER JOIN DP_CrossReference AS ov1 --  portfolio specific overrides
          ON ov1.SEDOL = ia.SEDOL
          AND ov1.Portfolio = ia.Portfolio
LEFT OUTER JOIN DP_CrossReference AS ov2 -- universal overrides 
          ON ov2.SEDOL = ia.SEDOL
          AND ov2.Portfolio IS NULL 
```

# graphviz - graphviz 永远无法完成的问题

> ID：15954672
> 
> 赞同：0
> 
> 时间：2013-04-11T17:01:56.423
> 
> 标签：graphviz, dot, edges, graph-drawing

有人可以帮我弄清楚为什么下面的图表永远不会在点中生成吗？我认为这个问题与headport和tailport有关。如果我把它们拿出来就可以了，但理想情况下，出于风格原因，我希望它们留下来。

```
digraph G {
    nodesep = 0.5;
    0 [width=0.75, height=0.75, fontsize=20];
    1 [width=0.75, height=0.75, fontsize=20, shape=square];
    2 [width=0.75, height=0.75, fontsize=20];
    3 [width=0.75, height=0.75, fontsize=20];
    4 [width=0.75, height=0.75, fontsize=20];
    5 [width=0.75, height=0.75, fontsize=20, shape=square];
    6 [width=0.75, height=0.75, fontsize=20];
    7 [width=0.75, height=0.75, fontsize=20, shape=square];
    8 [width=0.75, height=0.75, fontsize=20, shape=square];
    9 [width=0.75, height=0.75, fontsize=20, shape=square];
    10 [width=0.75, height=0.75, fontsize=20, shape=square];
    11 [width=0.75, height=0.75, fontsize=20, shape=square];
    12 [width=0.75, height=0.75, fontsize=20];
    subgraph directed{
            rankdir= LR;rank= max;
            0->1->2->3->4->5->6->7->8->9->10->11->12;
    }
    subgraph undirected{
            rankdir= LR;rank= min;edge[tailport=n,headport=n];
            0->1[dir=none, color=red];
            0->2[dir=none, color=red];
            1->9[dir=none, color=red];
            2->3[dir=none, color=red];
            2->8[dir=none, color=red];
            3->4[dir=none, color=red];
            4->8[dir=none, color=red];
            7->9[dir=none, color=red];
            8->9[dir=none, color=red];
            9->10[dir=none, color=red];
            9->11[dir=none, color=red];
            10->11[dir=none, color=red];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:07:16.230

如果不花大量时间挖掘源代码，很难说出原因，但您可以将麻烦的元素移出第二个子图来解决问题：

从无向子图中删除 1->9 和 2->8，并在其下方添加它们：

```
digraph G {
    nodesep = 0.5;
    0 [width=0.75, height=0.75, fontsize=20];
    1 [width=0.75, height=0.75, fontsize=20, shape=square];
    2 [width=0.75, height=0.75, fontsize=20];
    3 [width=0.75, height=0.75, fontsize=20];
    4 [width=0.75, height=0.75, fontsize=20];
    5 [width=0.75, height=0.75, fontsize=20, shape=square];
    6 [width=0.75, height=0.75, fontsize=20];
    7 [width=0.75, height=0.75, fontsize=20, shape=square];
    8 [width=0.75, height=0.75, fontsize=20, shape=square];
    9 [width=0.75, height=0.75, fontsize=20, shape=square];
    10 [width=0.75, height=0.75, fontsize=20, shape=square];
    11 [width=0.75, height=0.75, fontsize=20, shape=square];
    12 [width=0.75, height=0.75, fontsize=20];
    subgraph directed{
            rankdir= LR;rank= max;
            0->1->2->3->4->5->6->7->8->9->10->11->12;
    }
    subgraph undirected{
            rankdir= LR;rank= min;edge[tailport=n,headport=n];
            0->1[dir=none, color=red];
            0->2[dir=none, color=red];
            2->3[dir=none, color=red];
            3->4[dir=none, color=red];
            4->8[dir=none, color=red];
            7->9[dir=none, color=red];
            8->9[dir=none, color=red];
            9->10[dir=none, color=red];
            9->11[dir=none, color=red];
            10->11[dir=none, color=red];
    }
    1->9[dir="none", color="red", headport="n"];
    2->8[dir="none", color="red", headport="n"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:03:19.393

很难知道你在追求什么。但是，该图有一些问题：

*   节点不能是多个子图的一部分——它们要么在图中，要么在子图中，无论它们首先出现在哪里。你的应该出现在哪里？
*   [`rankdir`](http://www.graphviz.org/content/attrs#drankdir)是*图*属性，不能应用于*子图*

**编辑**

跟进您的评论，这是一个没有任何子图的版本。但是，您不会喜欢边缘的布线，这是难以控制的。

这个想法是将节点对齐在一条直线上，然后添加其他边，`constraint=false`以免它们影响节点的排名。

```
digraph G {
    nodesep = 0.5;
    node[width=0.75, height=0.75, fontsize=20];
    rankdir=LR;

    0;
    1 [shape=square];
    2;
    3;
    4;
    5 [shape=square];
    6;
    7 [shape=square];
    8 [shape=square];
    9 [shape=square];
    10 [shape=square];
    11 [shape=square];
    12;

    0->1->2->3->4->5->6->7->8->9->10->11->12;

    edge[constraint=false, tailport=n,headport=n,dir=none, color=red];
    0->1;
    0->2;
    1->9;
    2->3;
    2->8;
    3->4;
    4->8;
    7->9;
    8->9;
    9->10;
    9->11;
    10->11;
} 
```

# ruby-on-rails - 使用 ROR 访问 AS400 字段

> ID：15954679
> 
> 赞同：0
> 
> 时间：2013-04-11T17:02:13.223
> 
> 标签：ruby-on-rails, ibm-midrange

我需要访问 AS400 文件中的字段。有一个与 400 的现有连接，现在我只需要使用与正在使用的文件不同的文件。

```
class Distributor < ActiveRecord::Base

establish_connection "as400_#{RAILS_ENV}"
set_table_name "DISTJ01"

# TODO: what to return if no distributor?
# Create array of hashed distributor info.
def self.get_distributors_by_state state, preferred_distributor
    d = []
    # see validate_distributor_number below
    # If they have a preferred distributor, pull that one and make it first so it will default to that.
    if !preferred_distributor.blank?
        s = Distributor.find_by_sql ["SELECT CNAM05 cnam05, CUSNP1 cusnp1 FROM DISTJ01 WHERE CUSNP1 = ?", preferred_distributor]
        d << { :name => s[0].cnam05, :id => s[0].cusnp1 }   unless s.blank?
    end

    # If they have an account number, they can choose to purchase direct in addition to choosing a distributor.
    # Per Ron 4/20/11, removed this.
    #d << { :name => "DIRECT PURCHASE", :id => account_number } unless account_number.blank?

    # Get all other available distributors for this state.
    s = Distributor.find_by_sql ["SELECT CNAM05 cnam05, CUSNP1 cusnp1 FROM DISTJ01 WHERE STATEP2 = ? AND CUSNP1 <> ? ORDER BY CNAM05", state.upcase, preferred_distributor]
    unless s.blank?
        s.each do |t|
            d << { :name => t.cnam05, :id => t.cusnp1 }
        end
    end
    d
end

def self.validate_distributor_number distributor_number, user
    # We need to make sure that the distributor number we are assigning
    # is valid. Since it comes from a form post, somebody could pick
    # another number if they wanted. We can't have that. Granted they
    # already had to logon so they are a legit user, but, they still
    # could try to trick us.
    if distributor_number.strip == user.as400_fields[:account_number].strip
        distributor_number
    else

        # If a DSD account chooses to purchase from their preferred distributor, we use the customer number from
        # the sign-on table, not from the distributor.
        if user.as400_fields[:preferred_distributor] == distributor_number and user.as400_fields[:account_type].strip == "DSD"
            user.as400_fields[:account_number]
        else
            d = Distributor.find_by_sql ["SELECT CUSNP1 cusnp1 FROM DISTJ01, SIGNONS " +
                "WHERE DISTJ01.STATEP2 = SIGNONS.BSSTCDW1 AND SIGNONS.USERW1 = ? AND DISTJ01.CUSNP1 = ?", user.login.upcase, distributor_number]
            d[0].cusnp1 unless d.blank?
        end
    end
end

 end 
```

我需要用“C@OEF23L03”替换“DISTJ01”，我需要访问字段EMAL23，但我仍然需要现有的连接和查询。我尝试简单地换出现有文件，但我必须过于复杂，因为它没有工作。有什么想法吗？

这是来自错误日志：

```
 [Wed Apr 10 11:52:20 2013] [notice] Apache/2.2.14 (Ubuntu) Phusion_Passenger/3.0.1 configured  -- resuming normal operations
 [ pid=14922 thr=77098160 file=utils.rb:176 time=2013-04-10 11:52:58.610 ]: *** Exception  SyntaxError in PhusionPassenger::ClassicRails::ApplicationSpawner (/var/www /onlineordering.coastalpet.com/app/models/distributor.rb:59: syntax error, unexpected keyword_end,       expecting $end) (process 14922, thread #<Thread:0x930d960>):
from <internal:lib/rubygems/custom_require>:29:in `require'
from <internal:lib/rubygems/custom_require>:29:in `require'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.10/lib/active_support/dependencies.rb:184:in `require'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.10/lib/active_support/dependencies.rb:291:in `require_or_load'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.10/lib/active_support/dependencies.rb:250:in `depend_on'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/activesupport-2.3.10/lib/active_support/dependencies.rb:162:in `require_dependency'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.10/lib/initializer.rb:414:in `block (2 levels) in load_application_classes'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.10/lib/initializer.rb:413:in `each'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.10/lib/initializer.rb:413:in `block in load_application_classes'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.10/lib/initializer.rb:411:in `each'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.10/lib/initializer.rb:411:in `load_application_classes'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.10/lib/initializer.rb:197:in `process'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/rails-2.3.10/lib/initializer.rb:113:in `run'
from /var/www/onlineordering.coastalpet.com/config/environment.rb:6:in `<top (required)>'
from <internal:lib/rubygems/custom_require>:29:in `require'
from <internal:lib/rubygems/custom_require>:29:in `require'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/classic_rails/application_spawner.rb:222:in `preload_application'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/classic_rails/application_spawner.rb:181:in `block in initialize_server'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/utils.rb:564:in `report_app_init_status'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/classic_rails/application_spawner.rb:174:in `initialize_server'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:204:in `start_synchronously'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:180:in `start'
from /usr/local/ruby 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:17:31.720

错误日志的第 2 行不是说第 59 行有语法错误吗？我在您包含的源代码中只看到 53 行，但也许您取出了一些。仔细查看语法错误消息，它似乎`end`在期待它标记为 $end 的东西时找到了关键字，我将其理解为它期待源代码结束。我不是 Ruby 程序员（或者至少还不是），但回顾你的源代码，似乎确实有一个额外`end`的东西似乎与任何东西都不匹配。还是要结束这堂课？

# python - 将 selenium 设置为使用自定义配置文件，但它保持默认打开

> ID：15954682
> 
> 赞同：29
> 
> 时间：2013-04-11T17:02:17.520
> 
> 标签：python, macos, firefox, selenium-webdriver

我正在尝试使用 python 和 selenium 来自动化 firefox 中的一些任务。当我下载文件时，会弹出询问您是否要打开或保存文件，并且每次使用此类文件时都会出现一个复选框。我发现除非您在 Web Page Fixer 上安装插件，否则该复选框不起作用。我已经正常安装了，但是当我使用 python + selenium 时，它使用没有附加组件的配置文件。

互联网指示我通过关闭 Firefox，打开 /Applications/Utilities，然后键入命令来创建另一个配置文件：

```
/Applications/Firefox.app/Contents/MacOS/firefox-bin -p 
```

然后，我创建了一个将与 selenium 一起使用的新配置文件。我设置名称并更改文件夹名称。配置文件名称是“PTI_Auto_Profile”。文件夹路径显示如下：

```
/users/User/Library/Application Support/Firefox/Profiles/Selenium/ 
```

当我完成时。我单击“启动 Firefox”，我的终端屏幕上出现以下错误。

```
2013-04-11 11:57:30.422 firefox-bin[2248:707] invalid drawable
conf-room:~ User$ 2013-04-11 11:58:00.350 firefox-bin[2251:303] invalid drawable 
```

我试过以下没有成功。

```
profile = webdriver.FirefoxProfile(os.path.expanduser("~/Library/Application Support/Firefox/Profiles/Selenium/"))
driver = webdriver.Firefox(firefox_profile=profile) 
```

没有错误，默认用户。

```
profile = webdriver.FirefoxProfile(os.path.expanduser("~/Library/Application Support/Firefox/Profiles/Selenium/"))
driver = webdriver.Firefox(profile) 
```

没有错误，默认用户。

```
fp = webdriver.FirefoxProfile()
fp.set_preference("browser.download.folderList",2)
fp.set_preference("browser.download.manager.showWhenStarting",False)
fp.set_preference("browser.download.dir",getcwd())
fp.set_preference("browser.helperApps.neverAsk.saveToDisk","text/csv/xls")

driver = webdriver.Firefox(firefox_profile=fp) 
```

错误：fp.set_preference("browser.download.dir",getcwd()) NameError: name 'getcwd' is not defined

关于我做错了什么的任何想法？谢谢！

ps 我使用的是 mac os x 10.8.2、python 2.7、firefox 20

**Corey Goldberg 提供的解决方案。**这应该适用于所有 excel 版本。

```
import os
from selenium import webdriver
profile = webdriver.FirefoxProfile()
profile.set_preference('browser.download.folderList', 2)
profile.set_preference('browser.download.manager.showWhenStarting', False)
profile.set_preference('browser.download.dir', os.getcwd())
profile.set_preference('browser.helperApps.neverAsk.saveToDisk', ('application/vnd.ms-excel'))
driver = webdriver.Firefox(profile) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-11T17:20:04.697

> 错误：fp.set_preference("browser.download.dir",getcwd()) NameError: name 'getcwd' is not defined

`getcwd()`没有定义。所以我假设你想要`getcwd`来自`os`模块：

*   [http://docs.python.org/library/os.html](http://docs.python.org/library/os.html)

添加: `import os`，然后调用 with `os.getcwd()`。

或者你可以只为这个函数添加导入： `from os import getcwd`

您的正确导入示例包括：

```
import os
from selenium import webdriver

profile = webdriver.FirefoxProfile()
profile.set_preference('browser.download.folderList', 2)
profile.set_preference('browser.download.manager.showWhenStarting', False)
profile.set_preference('browser.download.dir', os.getcwd())
profile.set_preference('browser.helperApps.neverAsk.saveToDisk', 'text/csv/xls')
driver = webdriver.Firefox(profile) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-04-27T23:06:21.357

我做了以下事情：

![打开个人资料目录](https://i.stack.imgur.com/5CQ8U.png)

或者：

Linux：`ls -d /home/$USER/.mozilla/firefox/*.default/`查看用户配置文件目录

苹果电脑：`ls -d ~/Library/Application\ Support/Firefox/Profiles/*`

输出：

```
/home/jmunsch/.mozilla/firefox/xfoyzfsb.default/
/home/jmunsch/.mozilla/firefox/yxjwk1py.default/ 
```

**为了加载自定义用户配置文件，我在 firefox 中创建了一个配置文件，然后使用 python selenium webdriver 代码执行了以下操作：**

```
def setUp(self):
    self.profile = webdriver.FirefoxProfile('/home/jmunsch/.mozilla/firefox/yxjwk1py.default')
    self.driver = webdriver.Firefox(self.profile) 
```

系统信息：

```
Python 2.7.3 (default, Sep 26 2013, 20:08:41) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pkg_resources;pkg_resources.get_distribution("selenium").version

jmunsch@NE-522:~/Desktop/work$ firefox --version
Mozilla Firefox 26.0 
```

# 还要注意

@Corey 手动设置个人资料的答案

所有可配置项都可以在以下位置找到`about:config`：

`profile.set_preference('browser.download.folderList', 2)`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-19T04:42:36.267

你应该添加这个：

```
profile.set_preference("browser.helperApps.neverAsk.openFile",
    "text/csv,application/x-msexcel,application/excel,application/x-excel,application/vnd.ms-excel,image/png,image/jpeg,text/html,text/plain,application/msword,application/xml") 
```

它确实有效！

# sql-server - 某些用户的 SQL 超时

> ID：15954684
> 
> 赞同：0
> 
> 时间：2013-04-11T17:02:29.490
> 
> 标签：sql-server

我有一个 Web 应用程序当前对某些用户超时，但是当我自己运行它时，它可以快速运行（< 5 秒），甚至在用户坐着等待他们的查询返回的同时运行它。

我正在运行 SQL Server 2008 Std（不是 R2）。ASP.NET 4.0，页面上有一些网格视图和本地报表查看器。所有查询都包含在存储过程中。

sp_whoisactive 显示其查询的 CPU 和读取非常高。45k CPU，3000 万次读取，815 次物理读取。没有阻塞会话。

我什至绝望地重新启动了 sql server 服务，但用户仍然遇到问题，他们先运行它，这让我相信这不是参数嗅探问题。

我能想到的唯一一件事是查询正在将一堆数据选择到临时表中，并且 tempDB 在本地硬盘驱动器上而不是我们的 NAS 上。它已经在我的清单上进行更改。

有人有什么建议吗？

# arduino - 编译器从 float 转换为 double 时的奇怪行为

> ID：15954689
> 
> 赞同：1
> 
> 时间：2013-04-11T17:02:42.043
> 
> 标签：arduino

我有一个数组：

```
float foo[3]; 
```

在 ino 文件中，我必须将其中一个作为输入发送到 PID。

```
double output;
PID myPID(&input, &output, &target, 1, 0.0, 1.1, DIRECT);
...
void loop(){
  input =foo[2];   
  myPID.Compute();
  Serial.print(output); //output: "nan"
...
} 
```

PID如下：

```
PID::PID(double* Input, double* Output, double* Setpoint,
        double Kp, double Ki, double Kd, int ControllerDirection) 
```

它可以编译，但 PID outvalue 的输出是 nan。

但是，如果我将输入设置为 -1.2，那么它可以工作。

```
void loop(){
      input =foo[2];  
      input = -1.2;
      myPID.Compute();
      Serial.print(output); //output: "1200"
    ...
    } 
```

我怎样才能解决这个问题？编译器应该自动转换双倍浮点数。就像在 Mega 2560 中一样。我也尝试过：`input =double(foo[2]);`没有任何成功。

* * *

编辑：

```
 Serial.print(foo[2]);  //Prints -9.2
  foo[2] = -9.2;         // I manually set foo[2] to -9.2  
  xAngle = foo[2];
  xPID.Compute();        //Computes perfectly. 
```

我必须添加 foo 在自定义库中。这太奇怪了。有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:22:06.613

*   首先，所有 AVR 双精度都是浮点数，如此[处](http://gcc.gnu.org/wiki/avr-gcc)或[此处](http://arduino.cc/en/Reference/Double)所述。这使得双精度数与 Arduino Mega 2560 上的浮点数相同。您可以通过比较来验证这一点`sizeof(double);`，`sizeof(float);`两者都会返回`4`。
*   其次，如果你想将一种类型转换为另一种类型，语法是`(targetType)sourceType`，所以如果你做那种事情，你的分配应该是这样的

    ```
    input =(double)foo[2]; 
    ```

或者

```
 input =(double)(foo[2]); 
```

但是，在这种情况下这无关紧要，因为双精度和浮点数是相同的。

我认为问题很可能来自这样一个事实，即您的 PID 控制器不喜欢您在`foo[2]`给定参数的情况下所拥有的任何值。你`foo[2]=-1.2`在分配之前尝试过`input = foo[2];`吗？

# javascript - Ajax/jQuery“喜欢”按钮

> ID：15954693
> 
> 赞同：0
> 
> 时间：2013-04-11T17:02:46.030
> 
> 标签：javascript, jquery, ajax, sql-like

我对 JavaScript 很陌生，我一直在尝试基本的 jQuery 和 ajax 函数，现在我正在尝试在我的网站上为个人资料创建一个“Like”或“Rep”按钮，我已经编写了一个非常基本的代码，但是它不起作用，因为当我单击按钮时它似乎没有发布任何内容。

这是我的 JavaScript（我的页面上确实嵌入了最新的 jQuery）：

```
<script>
    $(function(){
        $(".rep").on("click", function(){
            $.ajax({
                type: "POST",
                url: "add.php",
                data: ({ profile: $(".rep").attr('id') }),
                success: function(data) {
                    if(data.status == 'success') {
                        $('.rep').html('N');
                    } else {
                        $('.rep').html('N');
                    }
                }
            })
        });
    });
</script> 
```

现在我的 HTML 元素：

```
<div class="rep" id="Username">O</div> 
```

最后是我的 PHP 脚本：

```
<?php
    include ("config.php");
    $to = $_POST["profile"];
    $from = $myUser;
    $ip = $_SERVER["REMOTE_ADDR"];
    $date = date("M j, Y");

    if($to !== "" && $from !==""){
        $q = mysql_query("SELECT * FROM rep WHERE to='$to' AND from='$from' AND date = '$date'");
        $n = mysql_num_rows($q);

        if($n == 0){
            $query = mysql_query("INSERT INTO rep (to, from, ip, date) VALUES ('$to', '$from', '$ip', '$date')");
            if($query){
                $data['status'] = 'success';
            } else {
                $data['status'] = 'error';
            }
        } else if($n !== 0){
            $data['status'] = 'error';
        }
    }
?> 
```

真的无法完全理解它来完成这项工作，所以如果有人可以在解释错误的同时指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:06:54.820

jQuery live() 从 1.9 版开始从 jQuery 中删除。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

尝试 click() 或 on('click')

编辑（那不是问题）

php 文件需要返回一个 json 编码的字符串，如下所示：

```
{name: 'bob', success: true, some_property: 'a string'} 
```

对于返回数据中所需的所有值，依此类推。

我通常这样做：

```
$data['success'] = true; // not needed for jquery but if you want to check it
$data['name'] = 'bob';

echo json_encode($data);
exit; 
```

看看这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:16:26.207

使用这种格式

```
$(document).on("click", ".rep", function () {

var id = $(this).attr('id');
    var s = {
        "profile": d
    };

    $.ajax({

        url: "add.php",
        type: "POST",
        data: s,
        success: function (data) {
          // but what you want  

        },

    });

    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:18:17.673

首先，将 .html('n') 更改为 .text('n');

添加到您的 ajax 函数

```
error: function (error) {
                  console.log(error); //or alert(error);
              } 
```

你会收到回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:23:24.647

您需要在 php 文件中回显结果，以便 javascript 在 data 参数中接收正确的结果

# android - 应用程序在 Android 中意外关闭

> ID：15954699
> 
> 赞同：0
> 
> 时间：2013-04-11T17:03:03.207
> 
> 标签：android, web-services, web-applications, web

我无法弄清楚为什么我的简单 webview 应用程序会意外关闭。即使 Eclipse 没有抛出任何错误。

这是截图[http://pbrd.co/YNWFVw](http://pbrd.co/YNWFVw)

**MainActivity.java**：

```
package com.example.testwebview;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        WebView webView1 = (WebView) findViewById(R.id.webView1);
        webView1.loadUrl("http://www.google.com/m");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

**活动主.xml**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <WebView
        android:id="@+id/webView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

**testwebview 清单**：

```
 <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.testwebview.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:06:23.273

设置内容视图后获取网页视图，即

`WebView webView1 = (WebView) findViewById(R.id.webView1);` // 这个返回null，因为你没有设置contentView，所以当你尝试访问它时，它会抛出`NullPointerException`

`setContentView`所以像这样获取webView参考

```
setContentView(R.layout.activity_main);
  WebView webView1 = (WebView) findViewById(R.id.webView1); 
```

**编辑：**

对于您的第二个查询，默认浏览器中的 webview 打开网址，请使用此代码

Webview默认使用浏览器打开url，我们需要做这样的事情

```
webView1.setWebViewClient(new WebViewClient() {
public boolean shouldOverrideUrlLoading(WebView view, String url) {
          view.loadUrl("http://www.google.com/m");
          return true;
           }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:20:37.717

在你做任何其他事情之前总是调用 super 的生命周期回调，即你应该调用`super.onCreate(savedInstanceState)`before `setContentView(...)`。

实际上导致崩溃的原因很可能是 NullPointerException。调用`setContentView(...)`是实际创建您的视图的原因。如果您`findViewById(...)`在此之前调用，它将返回，`null`因为您的布局尚未膨胀。在 Eclipse 的 DDMS 中使用 LogCat 来获取堆栈跟踪，您会发现您正在调用`.loadUrl(...)`.`null`

这是您的 onCreate 方法的外观：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    WebView webView1 = (WebView) findViewById(R.id.webView1);
    webView1.loadUrl("http://www.google.com/m");
} 
```

另一个注意事项：不要`fill_parent`用于您的高度和宽度——它已被弃用。改为使用`match_parent`。

# linux - 循环通过通配符匹配的目录的 shell 脚本

> ID：15954700
> 
> 赞同：4
> 
> 时间：2013-04-11T17:03:09.740
> 
> 标签：linux, shell, loops, for-loop, directory

我正在尝试遍历与通配符匹配的目录。这在命令行中工作正常。但不适用于 Shell 脚本。任何想法？

```
 for dirs in /var/www/html/my.domain.com/v*; do echo $dirs; done; 
```

上面的命令列出

```
 /var/www/html/my.domain.com/v1.0
  /var/www/html/my.domain.com/v1.2
  /var/www/html/my.domain.com/v2.0 
```

这是Shell脚本版本。它不工作：

```
 dirs=/var/www/html/my.domain.com/v*
 for dir in $dirs
 do
   echo "$dir"
 done 
```

也试过这个：

```
dirs=`/var/www/html/my.domain.com/v*` #back quotes
for dir in $dirs
do
   echo "$dir"
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:15:46.193

像这样的[全局模式](http://mywiki.wooledge.org/BashGuide/Patterns)`/var/www/html/my.domain.com/v*`是**bash**功能。似乎 bash 不是您系统上的默认 shell，因为您使用`sh script.sh`.

确保使用 bash 启动脚本：

```
bash script.sh 
```

如果您打算直接使用 使脚本可执行`chmod +x script.sh`，请确保您没有错过在第一行中使用以下[shebang ：](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

```
#!/bin/bash 
```

# ruby - Ruby 将 64 位 IEEE 754 十六进制转换为双精度

> ID：15954709
> 
> 赞同：2
> 
> 时间：2013-04-11T17:03:40.663
> 
> 标签：ruby, ieee-754, pack, unpack

我需要将来自 IMU 的十六进制数据流输出到纬度和高度值。

数据以双精度十六进制字符串的形式出现，我需要将它们输出为十进制值。

我尝试了几个打包和解包值，但最后除了编写自己的函数之外找不到解决方案。

有什么方法可以翻译这个双精度 64 位十六进制字符串：

```
"4044F33333333333" 
```

到这个小数点：

```
41.900000000000000 
```

使用打包和解包功能？

是否有任何库能够处理 IEEE 754 号码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:22:07.503

```
["4044F33333333333"].pack('H16').unpack('G').first
=> 41.9

# broken down to steps, showing reversability
["4044F33333333333"].pack('H16')
=> "@D\xF333333"
"@D\xF333333".unpack('G')
=> [41.9]
[41.9].pack('G')
=> "@D\xF333333"
"@D\xF333333".unpack('H16')
=> ["4044f33333333333"] 
```

# c# - 使用 c# 驱动程序将字典插入 MongoDB

> ID：15954710
> 
> 赞同：15
> 
> 时间：2013-04-11T17:03:46.737
> 
> 标签：c#, mongodb, serialization, dictionary, insert

我处于无法预测 MongoDB 文档将包含哪些字段的情况。所以我不能再创建一个具有`_id`type 字段的对象`BsonID`。我发现创建一个 Dictionary (HashTable) 并在其中添加我的 DateTime 和 String 对象非常方便，我需要多少次都可以。

然后我尝试将生成的 Dictionary 对象插入 MongoDb，但默认序列化失败。

这是我的 Type HashTable 对象（就像一个字典，但里面有不同的类型）：

```
{ "_id":"",
"metadata1":"asaad",
"metadata2":[],
"metadata3":ISODate("somedatehere")} 
```

我得到的驱动程序的错误是：

> 序列化器 DictionarySerializer 期望 DictionarySerializationOptions 类型的序列化选项，而不是 DocumentSerializationOptions

我用谷歌搜索了它，但找不到任何有用的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-08T21:09:35.130

驱动程序需要能够找到 _id 字段。您可以创建一个只有两个属性的 C# 类：Id 和 Values。

```
public class HashTableDocument
{
    public ObjectId Id { get; set; }
    [BsonExtraElements]
    public Dictionary<string, object> Values { get; set; }

} 
```

请注意，我们必须使用 Dictionary<string, object> 而不是 Hashtable。

然后，您可以使用如下代码插入文档：

```
var document = new HashTableDocument
{
    Id = ObjectId.GenerateNewId(),
    Values = new Dictionary<string, object>
    {
        { "metadata1", "asaad" },
        { "metadata2", new object[0] },
        { "metadata3", DateTime.UtcNow }
    }
};
collection.Insert(document); 
```

我们可以使用 MongoDB shell 来确认插入的文档是否具有所需的形式：

```
> db.test.find().pretty()
{
        "_id" : ObjectId("518abdd4e447ad1f78f74fb1"),
        "metadata1" : "asaad",
        "metadata2" : [ ],
        "metadata3" : ISODate("2013-05-08T21:04:20.895Z")
}
> 
```

# c++ - 避免循环依赖？

> ID：15954712
> 
> 赞同：1
> 
> 时间：2013-04-11T17:03:48.507
> 
> 标签：c++, circular-dependency

与上一个[问题有关](https://stackoverflow.com/questions/15953918/to-what-extent-can-be-this-a-bad-practice-circular-dependence)，我现在有以下问题：

在接下来的风景中：

```
class B;

class A
{
   // stuff, methods and so on
   B b;
};

class B
{
   // stuff, methods and so on
   A a;
}; 
```

这里我们在`A`和之间有一个循环依赖`B`，但是这段代码格式不正确，因为`B`它是一个不完整的类型。一种解决方案是`B`通过指针或`B`例如通过智能指针进行更改。但是添加指针会增加复杂性和不必要的资源消耗，因为您不需要指针！

在上一个[问题](https://stackoverflow.com/questions/15953918/to-what-extent-can-be-this-a-bad-practice-circular-dependence)中，我试图通过模板避免使用指针，所以我在定义两个类的地方延迟了类的实例化，但我无法成功。

避免指针是不可能的吗？是否有众所周知的设计来避免循环依赖？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T17:05:56.170

避免某种形式的引用是不可能的，例如指针。

当您尝试这样做时，定义中有无限递归。An`A`包括 a`B`其中包括 and `A`，以此类推。因此，这两个类都需要无限存储，这显然是荒谬的。

如果你真的有一个`A`包含`B`和`B`包含的模型，`A`那么这些类似乎无法相互独立。在这种情况下，也许你真的只有一门课而不是两门课。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T17:07:55.807

编译器必须计算出`B`.

它是如何做到的？计算出所需的空间是`A`.

但是 a 的大小`A`就是 a 的大小`B`。回到第一方，编译器必须永远循环才能弄清楚。因此它不编译。

唯一的解决方案是打破这个循环，即使用指针（智能或其他）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T17:21:11.833

我认为这主要不是编译器的问题（尽管它不能这样做），而是您的设计中的问题：数据成员表示所有权。如果`A`有类型的数据成员`B`，则 的实例`A`拥有 的实例`B`。

如果同样适用`B`，那么您将获得循环所有权（`a`拥有`b`和`b`拥有`a`）或无限系列的`a0`拥有`b0`拥有`a1`拥有`b1`......

因此，您必须为实例不拥有另一种类型的实例的两种类型中的至少一种表示。您可以在 C++ 中使用（智能）指针或引用来执行此操作，或者将对象传递给需要它的类的每个成员函数。

# android - 可以为着色器制服设置初始值吗？（安卓，OpenGL ES 2.0）

> ID：15954715
> 
> 赞同：4
> 
> 时间：2013-04-11T17:03:52.383
> 
> 标签：android, opengl-es-2.0, fragment-shader, uniform

**编辑**：正如建议的那样，我试图在我的构造函数中为我的着色器制服设置一个“初始”值，我已经包含了一些代码，如果有人能解释为什么我通过传递值时会出现空白屏幕，我将不胜感激我的构造函数 - 谢谢

**加载我的纹理的方法**

```
public void setTexture(GLSurfaceView view, Bitmap imgTexture) {
    this.imgTexture=imgTexture;
    iProgId = Utils.LoadProgram(strVShader, strFShader);
    iBaseMap = GLES20.glGetUniformLocation(iProgId, "u_baseMap");
    iPosition = GLES20.glGetAttribLocation(iProgId, "a_position");
    iTexCoords = GLES20.glGetAttribLocation(iProgId, "a_texCoords");
    texID = Utils.LoadTexture(view, imgTexture);

    //Everything is working if I include the lines as part of my setTexture() method
    GLES20.glUseProgram(iProgId);
    mOpacityHandle = GLES20.glGetUniformLocation(iProgId, "opValue");
    GLES20.glUniform1f(mOpacityHandle, 1.0f);
} 
```

但如果我把它们放在我的构造函数中，什么都没有......

```
public Quad() {
    //iProgId = Utils.LoadProgram(strVShader, strFShader); //I've tried with and without this line - I can confirm that loading / linking is working OK
    GLES20.glUseProgram(iProgId);
    mOpacityHandle = GLES20.glGetUniformLocation(iProgId, "opValue");          
    GLES20.glUniform1f(mOpacityHandle, 1.0f);           
} 
```

实际上，我已经将整个纹理加载例程复制到我的构造函数中，并在创建四边形时将相关参数传递给它，但我仍然什么都没有，除非我在构造函数运行后的某个时间设置值！

我有一个片段着色器，如下所示：

```
String strFShader =
    "precision mediump float;" +
    "uniform float opValue;"+
    "varying vec2 v_texCoords;" +
    "uniform sampler2D u_baseMap;" +
    "void main()" +
    "{" +
    "gl_FragColor = texture2D(u_baseMap, v_texCoords);" +
    "gl_FragColor *= opValue;"+
    "}"; 
```

当我创建我的对象（四边形）时，我有一个方法可以设置所述四边形的不透明度，如下所示：

```
public void setOpacity(float op) {  
    GLES20.glUseProgram(iProgId);       
    mOpacityHandle = GLES20.glGetUniformLocation(iProgId, "opValue");
    GLES20.glUniform1f(mOpacityHandle, op);
} 
```

但是，如果我希望我的 sprite(quad) 具有一定程度的透明度，我只想运行我的 setOpacity 方法。如果我不指定不透明度级别（即，如果我不运行 setOpacity 方法），我希望它使用默认值或“初始”值（显然我希望它是 1.0 的浮点数）。

这是可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:36:01.480

`uniform opValue = 1.0;`如果这就是您的意思，您不能使用着色器内部的某种方式初始化制服。即使可以，它也不会为您带来太多好处，因为**统一值在程序使用中是持久的**。这意味着如果您激活另一个程序（使用`glUseProgram`）然后重新绑定该程序，则制服仍将具有您上次设置的值。因此，您可以在链接程序后立即将制服设置为某个初始值，但是一旦您将其更改为某些透明精灵，它就会永远失去该值。

**它甚至在单个程序使用期间都不起作用，因为在绘图调用中**甚至不止这些统一值是持久的。想想看，如果你写

```
draw_opaque_sprite();

setOpacity(0.5f);
draw_transparent_sprite();

draw_opaque_sprite(); 
```

在绘制透明精灵后，程序如何知道您想要将不透明度重置为某个默认值。当然，要求应用程序**为每个绘图调用**设置所有制服是没有选择的。

因此，您将无法为每个精灵正确设置制服。在这种情况下，通常的优化是按对象的渲染状态（在您的情况下是不透明度，但可能其他一些状态甚至更重，如纹理或类似的东西）以减少状态变化（如着色器变化、纹理绑定，或者在这种情况下统一更新）尽可能多。

# android - 位图被垃圾回收后可以使用吗？

> ID：15954718
> 
> 赞同：1
> 
> 时间：2013-04-11T17:03:55.577
> 
> 标签：android, bitmap, garbage-collection, imageview, bitmapfactory

我在看这个视频，它讨论了位图和垃圾收集的内存分配：

[DevBytes：位图分配](http://www.youtube.com/watch?v=rsQet4nBVi8)

Chet 正在谈论它是如何由开发人员在`SDK 11`使用之前`.recycle()`和之后`SDK 11`由`GC`.

对于一个更实际的情况，目前我正在编写一个应用程序，其中一个`Activities`我创建**了许多片段**，这些片段基本上**包含** `ImageViews`. 这些图像是从设备相机创建的。所以我遇到了这个`OutOfMemory`问题并意识到我必须重新调整从相机获得的图像的大小，因为结果非常高分辨率并且占用了我所有的应用程序内存。

所以现在我正在使用这种方法重新调整和设置尺寸非常小的图像：

`img.setImageBitmap(decodeSampledBitmapFromFile(imagePath, 100, 70));`

什么时候`decodeSampledBitmapFromFile`：

```
 public static Bitmap decodeSampledBitmapFromFile(String path, int reqWidth, int reqHeight) 
{ // BEST QUALITY MATCH

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        int inSampleSize = 1;

        if (height > reqHeight) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        }

        int expectedWidth = width / inSampleSize;

        if (expectedWidth > reqWidth) {
            //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    options.inSampleSize = inSampleSize;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeFile(path, options);
  } 
```

}

但我仍然从不`.recycle()`在任何位图上调用方法，因为我需要它们都出现在屏幕上。

**我的问题是：**

**1.**如果我调用 `.recycle()`已设置为`ImageView`using的位图，`setImageBitmap`是否意味着它将从屏幕上消失，或者我会收到异常？

**2.**如果我不打电话`.recycle()`，但我正在 Galaxy S3 上运行我的应用程序`(4.2.1)`，例如当我的应用程序是`minSDK is 8`. GC 会帮我完成这项工作吗？

**3.**在视频中他谈到了使用`BitmapFactory`对象的位图重用，在 SDK 11 之前有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:09:19.100

[回收文件](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)

1.  我从来没有以这种方式使用它。根据文档，您冒着异常的风险
2.  是的。如果您已将对位图的所有引用设置为空，它将被收集。

    > 此操作无法反转，因此只有在您确定位图没有进一步用途时才应调用它。这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

3.  不知道以这种方式“重用”位图。查看“[管理位图内存](https://developer.android.com/training/displaying-bitmaps/manage-memory.html)”和“[缓存位图](https://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)”主题以获取更多信息。

# javascript - 我可以使用 Chrome 开发工具添加资源吗？

> ID：15954721
> 
> 赞同：18
> 
> 时间：2013-04-11T17:04:24.697
> 
> 标签：javascript, jquery, google-chrome, google-chrome-devtools

我正在使用 Chrome 查看网页。原始源不包含 jQuery，但使用一些 jQuery 函数来检查 DOM 会非常有帮助。更改源以包含 jQuery 脚本会很痛苦，那么**是否可以在页面加载后使用 Chrome 开发人员工具将 jQuery 加载到 DOM 中？**或者，**是否有可以执行加载的本机 JavaScript 函数？**

我试图编辑 head 标签以包含该`<script src="/path/to/jQuery.min.js"></script>`标签，但这实际上并没有加载 jQuery.min.js 文件。

不幸的是，Modernizr 和其他资产加载器也不包含在源代码中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-11T17:07:58.017

您应该能够在您的 JS 控制台中运行它。

```
var jq = document.createElement('script');
jq.src = "/path/to/jQuery.min.js";
document.getElementsByTagName('head')[0].appendChild(jq);
jQuery.noConflict(); 
```

或者，您可以将整个[jQuery 文件](http://code.jquery.com/jquery-latest.min.js)复制到控制台中。不是最好的选择，但这也可以。

第三种选择是这个插件，[jQueryify](https://chrome.google.com/webstore/detail/jquerify/gbmifchmngifmadobkcpijhhldeeelkc?hl=en)，我自己没有使用过，但看起来很有希望。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-13T23:27:36.987

### 使用[requirify 很棒的 chrome 扩展](https://github.com/mathisonian/requirify)并`require()`在控制台中访问。

现在您可以直接将 npm 模块导入控制台，您可以在 Chrome 开发者控制台中完全升级您的测试工作流程。

安装 requirify 后，您可以通过在开发人员控制台中键入以下内容轻松地将 jquery 添加到控制台会话中：

```
var $ = require('jquery'); 
```

这将从 npm 获取 jQuery，进而使其在控制台中可供您使用。现在您可以像在任何网页上一样在控制台中使用 jQuery：

```
$('div').each(function(index){ //... }); 
```

显然，这适用于您的情况，但也适用于许多其他情况。一个很棒的工具，放在你的工具箱里！

请参阅`require()`下面的控制台中使用：

![浏览器中的require()！](https://i.stack.imgur.com/2XLFb.gif)

**惊人的！**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-23T13:07:29.000

这是我经常用来解决这个问题的 JS 代码片段。

它与 Matt 的相同，但包含在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中，以使您或任何其他人更容易在您的浏览器环境中启动 jQuery，就像那样。

```
(function() {
var h = document.head;
var scr = document.createElement('script');
scr.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js';
h.appendChild(scr);
})(); 
```

如果您想将`$`函数名称用于其他与 jQuery 无关的功能，您可以放弃`$`并将您的 jQuery 函数分配给另一个名称或`jQuery()`通过调用`$.noConflict()`上面 Matt 建议的方法返回原始形式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-28T08:18:37.930

只需将其复制粘贴到浏览器控制台中

```
var script = document.createElement("script");
script.src = "http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js";
document.body.appendChild(script); 
```

并回去工作！

# c# - WebBrowser 控件中的 InvokeMember("click")

> ID：15954739
> 
> 赞同：0
> 
> 时间：2013-04-11T17:05:31.133
> 
> 标签：c#, javascript, winforms, webbrowser-control, invokemember

网站显示基于表格的选项可供选择。`HTML`是

```
<td width="33%" class="cont"><input type="radio" name="gatewayIDV" onclick="setBank(11,0,1)">
<td width="33%" class="cont"><input type="radio" name="gatewayIDV" onclick="setBank(3,0,1)"> 
```

我想调用字符串“setBank(11,0,1)”的收音机点击。我如何？所有无线电名称都相同，但`onclick()`参数不同。

在 JavaScript 中有人会这样做，这里有一些代码，但我如何在 c# 中做到这一点

我试试这个，但从来没有工作：

```
if (webBrowser1.DocumentText.IndexOf("setBank(11,0,1)", StringComparison.InvariantCultureIgnoreCase) > 1)
{
    webBrowser1.Document.GetElementById("gatewayIDV").InvokeMember("click");
} 
```

**JavaScript**：

```
$("td.cont").each(function(index) {
        var $this = $(this);
        var gonext = true;
        if($this.html().search(searchStr) != -1) {
            $(document).BookingEngine("setAutomationRunningStatus",
                  !tabData.automationRunning);
            console.log(index+":"+$this.html()+":");
            $this.children("input[name='gatewayIDV']").click();
            gonext = false;
        }
        return gonext;
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:34:31.667

你有多个单选按钮输入，你必须遍历它们，试试这个：

```
 private void Form1_Load_1(object sender, EventArgs e)
        {
            webBrowser1.Navigate("url");
        }

        private void webBrowser1_DocumentCompleted_1(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            foreach (HtmlElement el in webBrowser1.Document.GetElementsByTagName("input"))
            {
                if (el.Name == "gatewayIDV")
                {
                    el.InvokeMember("Click");
                }
            }
        } 
```

**已编辑**

对于特定的单选按钮

```
 private void Form1_Load_1(object sender, EventArgs e)
    {
        webBrowser1.Navigate(@"E:\Documents and Settings\Ali\Desktop\ww.html");
    }

    private void webBrowser1_DocumentCompleted_1(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        foreach (HtmlElement el in webBrowser1.Document.GetElementsByTagName("input"))
        {
            if (el.Name == "gatewayIDV" && el.OuterHtml.Contains("setBank(11,0,1)"))
            {
                el.InvokeMember("Click");
            }
        }
    } 
```

# c - 客户端请求服务器上文件的 FTP 程序

> ID：15954740
> 
> 赞同：0
> 
> 时间：2013-04-11T17:05:32.077
> 
> 标签：c, sockets, networking, ftp

我被分配使用 FTP 编写 C 程序，其中客户端向服务器请求指定文件名的文件，然后服务器将在所有目录中检查该文件，如果该文件存在，那么它将发送它，否则将发送一条错误消息，说“找不到文件！” 将被发送。

我很难使用 find/whereis 命令，然后在我的程序中利用这些函数返回的结果。我想知道如何在我的程序中使用 linux 系统命令。

现在，我只检查服务器的当前目录

```
int fd = open(file,O_RDONLY,0);
printf("opening file %s in current directory\n", filename);
if(fd == -1) {
    printf("error: file not found!\n");
    send_string(newfd, "file not found!");
} 
```

如果您能帮助我如何检查特定文件的所有目录，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:10:01.247

有很多方法。一种方法是递归遍历整个目录树，`/`您可以使用 DFS 或任何类似的图形遍历算法来做到这一点。另一种方法是使用`find`Linux 内置的程序来搜索你。

# css - 将 div 定位在主要内容的左侧

> ID：15954748
> 
> 赞同：0
> 
> 时间：2013-04-11T17:05:59.387
> 
> 标签：css, css-float

我正在努力正确定位图片上的 DIV。它使用 JS 上下滚动，效果很好。问题是，我无法调整浏览器窗口的大小。在这种情况下，DIV 覆盖了页面的内容。

![左侧的 DIV](https://i.stack.imgur.com/xfDir.png)

DIV的CSS：

```
#topbar_right{
position:absolute;
margin-top: -5px;
z-index: 2;
right:50%;
margin-right:100px;
} 
```

我的问题是：如何定位这个 div，使其右边缘始终保持在同一个位置，并且在我调整窗口大小时它不会覆盖内容。

谢谢您的反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:32:45.913

绝对定位使元素脱离文档的正常流程。

如果强制在 上使用绝对定位`DIV`，可以应用`left-margin`到内容块上，等于绝对定位的宽度`DIV`。

# iphone - Newtonsoft.Json 不能在 iphone 设备上工作 只能在模拟器 monotouch iphone 上工作

> ID：15954749
> 
> 赞同：1
> 
> 时间：2013-04-11T17:06:05.080
> 
> 标签：iphone, json, xamarin.ios

我为我的应用程序创建一个构建并在设备上运行。虽然它在模拟器上唤醒但不在设备上工作。并导致此错误：

```
 Exception in Class: BaseIOAddOn 
Line : 0 
and Method:ParseGeneralSettingsFromSettingJson 
with message Attempting to JIT compile method 'Newtonsoft.Json.Linq.JToken:Value<int> (object)' while running with --aot-only. See http://docs.xamarin.com/ios/about/limitations for more information. 
```

我正在使用`json.NET 4.0 R3 for MonoTouch`解析 json，但我不知道它尚未在设备上运行的问题是什么。

编辑：我的应用程序解决方案中没有任何组件文件夹。我从 xamaring 组件站点下载 JSON.Net dll 并将其替换为我的 Newtonsoft.JSon.monotouhch.dll 但它无法正常工作。

我在 xamarin studio 上找到了 Components 文件夹，并从此文件夹中将组件添加到应用程序中，但仍然出现上述错误。我很困惑为什么它说错误在第 0 行。

在所述第0行的异常中，但来自错误内容和我的代码优先级，我认为它来自以下代码：

```
try {
            Dictionary <string  ,string > generalSettings = new Dictionary <string ,string > ();
            JObject jsonUnits = JObject.Parse (Response);
            var settingsList = jsonUnits ["settings"] [SettingTypes .AppSettings.GetDescription ()];
            int i = 0;
            var tmp_factor = settingsList [i.ToString ()];
            while (tmp_factor!=null) {
                generalSettings  .Add (tmp_factor ["name"].ToString (), tmp_factor ["value"].ToString ());
                i++;
                tmp_factor = settingsList [i.ToString ()];
            }
            var addOnComplexStatus = jsonUnits["settings"][SettingTypes .GetAddon  .GetDescription ()].Value <int>("status");

            generalSettings .Add (AppConstants .XmlAddOnComplexKey.GetDescription() ,addOnComplexStatus .ToString ());

            return generalSettings;
        } catch (Exception ex) {
            Common .HandleException (ex);
            return null;
        } 
```

尤其：

```
var addOnComplexStatus = jsonUnits["settings"][SettingTypes .GetAddon  .GetDescription ()].Value <int>("status"); 
```

我发现这篇文章：[http](http://www.brettnagy.com/post/2009/11/21/Using-JsonNET-with-MonoTouch.aspx) ://www.brettnagy.com/post/2009/11/21/Using-JsonNET-with-MonoTouch.aspx说使用这段代码：`[MonoTouch.Foundation.Preserve]` 我不明白，这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:25:55.763

删除项目中对 Newtonsoft.Json.dll 的引用，如果您有项目的源 - 将其从解决方案中删除。（只是不要删除它，以防这不能解决您的问题）

在“组件”文件夹中，右键单击并选择“添加组件”。搜索 JSON.Net 并添加组件。

试试这个预编译的 DLL，看看你是否还有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:00:07.827

感谢大家的帮助。当我更改这行代码时：

```
var addOnComplexStatus = jsonUnits["settings"][SettingTypes .GetAddon  .GetDescription ()].Value <int>("status"); 
```

对此：

```
var addOnComplexStatus = jsonUnits["settings"][SettingTypes .GetAddon  .GetDescription ()]["status"].ToString (); 
```

问题解决了。:)

# c# - 使用 NAudio 冻结程序

> ID：15954756
> 
> 赞同：0
> 
> 时间：2013-04-11T17:06:42.980
> 
> 标签：c#, naudio

这可能很简单，但我有一个 WPF 应用程序，它有一个按钮、一个文本区域和另一个按钮。如果我单击按钮 1，则程序会创建一个名为 player 的 WaveOutEvent 并播放音频文件。但是，一旦它开始播放，我就不能做任何其他事情甚至关闭表单（并且不能在文本区域中输入）。是否可以在后台播放文件？知道如何解决这个问题吗？抱歉，我是 C# 新手。这是一些代码：

```
 private void button1_Click_1(object sender, RoutedEventArgs e)
    {
        Program p = new Program(textBox1.Text); 
        p.Tempo = float.Parse(textBox2.Text);
        label2.Content = p.totalTime;
    }
  //assuming this has been called after initialization
  public void playAudio(string filename)
    {
        WaveStream rdr;

        if (filename.EndsWith(".aiff"))
        {
            rdr = new AiffFileReader(filename);
        }
        else if (filename.EndsWith(".mp3"))
        {
            rdr = new Mp3FileReader(filename);
        }
        else if (filename.EndsWith(".wav"))
        {
            rdr = new WaveFileReader(filename);
        }
        else
        {
            //System.Windows.MessageBox.Show("File not supported.");
            rdr = new Mp3FileReader(filename);
        }

        volumeStream = new WaveChannel32(rdr);
        player = new WaveOutEvent();
        player.Init(volumeStream);
        format = volumeStream.WaveFormat;
        totalTime = volumeStream.TotalTime;
        inputProvider = new AdvancedBufferedWaveProvider(format);
        player.Init(inputProvider);
        player.Play(); //freezes application after starting to play
        //processAudio();
    } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:31:37.820

尝试使用[后台工作人员](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)播放音频。

# c# - 什么决定了一个字段是否会出现在 ViewData.ModelState 字典中？

> ID：15954758
> 
> 赞同：4
> 
> 时间：2013-04-11T17:06:47.863
> 
> 标签：c#, asp.net-mvc, validation, data-annotations

我的问题的一些背景：

我正在 ASP.Net MVC 4 中构建一个向导样式的界面，一次填充一页对象的属性。我使用 DataAnnotation 属性来指定我的业务规则并定义一个有效的填充对象的外观。

由此产生的一个并发症是验证。由于需要几个步骤才能完全填写对象并使其有效，因此我必须手动验证每个步骤设置的每个字段。

这最终在我的控制器类中看起来像这样：

```
[HttpPost]
public ActionResult Step1(MyBigModel m)
{
    if (ViewData.ModelState["Field1"].Errors.Count() == 0
        && ViewData.ModelState["Field2"].Errors.Count() == 0)
    {
        repository.saveStep1(m);
        return RedirectToAction("Step2", new { myId= m.myId});
    }
    else
        return View(m);
    }
} 
```

这种方法的烦恼是我要检查的字段并不总是在 ModelState 字典中！如果存在验证错误，该字段将在字典中。但是，如果它是有效的，它可能在也可能不在字典中。

似乎某些输入类型比其他输入类型效果更好——文本框似乎相当一致，而复选框从未出现。我无法找出一致的规则集来预测它们何时会在那里，也没有找到任何相关文档。

所以，我的问题是，什么决定了一个字段是否会出现在 ViewData.ModelState 字典中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T17:15:56.637

[ModelStateDictionary](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary%28v=vs.108%29.aspx)的 MSDN 文章说

> 表示尝试将已发布的表单绑定到操作方法的状态，其中包括验证信息。

因此，`ViewData.ModelState`字典包含对服务器的请求中包含的值。这不一定是绑定模型上的所有属性。如果此词典中缺少您需要的内容，请将其作为隐藏字段包含在您的视图中，以便将其发布到服务器。

# php - PHP 5.3 下载 CSV

> ID：15954764
> 
> 赞同：0
> 
> 时间：2013-04-11T17:07:01.020
> 
> 标签：php, cakephp, cross-browser, mime-types, cakephp-2.3

当用户单击一个按钮时，它将下载一个 csv 文件。它适用于 IE9 和 Chrome，但不适用于 Firefox。在 Firefox 20 中，没有设置内容类型，因此它作为 Firefox HTML 文档下载。

```
 $filename = 'exportedLogs.csv';

        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header('Content-Description: File Transfer');
        header("Content-type: text/csv");
        header("Content-Disposition: attachment; filename=" .$filename);
        header("Expires: 0");
        header("Pragma: public");

        $csv_file = fopen('php://output', 'w');

        $header_row = array('id', 'project', 'customer', 'time spent');

        fputcsv($csv_file, $header_row);
        foreach ($logs as $log) {
            $log = array(
                $log['Log']['id'],
                $log['Log']['project_id'],
                $log['Log']['customer_id'],
                $log['Log']['time_spent']
            );
            fputcsv($csv_file, $log);
        }
        fclose($csv_file); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:13:40.480

我发现标题没有改变的原因是因为 cakePhp。对于遇到此问题的其他人，您必须做两件事：

1.  添加 'csv' 到 Router::parseExtensions('csv');
2.  将“.csv”添加到表单中的操作

@ThaJeztah 提供了一个可能对其他人有帮助的链接。它适用于 json/xml，但主体也可用于 csv。

[http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#json-and-xml-views](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#json-and-xml-views)

# javascript - 如何访问dom中ajax获取的json对象？

> ID：15954766
> 
> 赞同：0
> 
> 时间：2013-04-11T17:07:02.520
> 
> 标签：javascript, jquery, ajax, json

我有一个 sinatra 应用程序通过 ajax jsonp 访问 api。我可以在控制台中访问/查看返回的 json，但我无法从 dom 访问它，我需要它来填充表。我以为我可以将其添加为 html5 数据属性，但无法使其正常工作，这是我的非工作部分

```
success: function(data) {
    console.log(data);
      $("#mydata").attr("data-mydata",data); 
```

从控制台访问有效，无法从 dom 访问它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:09:59.420

使用 jQuery 数据[JSFIDDLE](http://jsfiddle.net/g5CWK/)

Dom 属性只能包含字符串。但 jQuery.data 可以保存任何类型的数据。

```
success: function(data) {
    console.log(data);
      $("#mydata").data("mydata",data);
} 
```

使用 jQuery.data 访问它

```
$("#mydata").data("mydata"); 
```

# java - 在指定目录启动 JFileChooser 并仅显示特定类型的文件

> ID：15954770
> 
> 赞同：0
> 
> 时间：2013-04-11T17:07:13.130
> 
> 标签：java, image, swing, jfilechooser, filefilter

我有一个使用 JFileChooser 的程序。简而言之，完整的程序是一个允许用户操作 PNG 和 JPG 的 GUI。我想让 JFileChooser 立即打开图片目录（Windows）。当用户打开他们的 JFileChooser 时，它会直接打开图片库 C:\Users\(USER)\Pictures

此外，最好只显示特定类型的文件（PNG 和 JPG）。许多程序似乎都可以做到这一点；只允许选择特定文件。JFileChooser 是否允许这样的事情？目前，我正在使用一种非常不可靠的绕行方法来拒绝非 PNG/JPG。

以下是指GUI的“浏览”按钮，用户将在其中选择要编辑的图片并将其显示在屏幕上。

```
 try {
       int val = filec.showOpenDialog(GridCreator.this);
       if(val==JFileChooser.APPROVE_OPTION) {
          File unfiltered_picture = filec.getSelectedFile();
          //get the extension of the file
          extension=unfiltered_picture.getPath();
          int index=extension.indexOf(".");
          extension=extension.substring(index+1, extension.length());
          //if the file is not jpg, png, or jpeg, reject it and send a message to the user.
          if(!extension.matches("[jJ][pP][gG]") && !extension.matches("[pP][nN][gG]") && !extension.matches("[jJ][pP][eE][gG]")) {
             JOptionPane.showMessageDialog(null,
                                           "cannot load file. File must be of type png, jpeg, or jpg. \n Your file is of type " + extension,
                                            "Error: improper file",
                                            JOptionPane.OK_OPTION);
           //if the file is of the proper type, display it to the user on the img JLabel.
           } else {
              finalImage = ImageIO.read(unfiltered_picture);
              ImageIcon imgIcon = new ImageIcon();
              imgIcon.setImage(finalImage);
              img.setIcon(imgIcon);
              img.invalidate();
              h_divide.setValue(0);
              v_divide.setValue(0);
           }
       }
   } catch(IOException exception) {
        exception.printStackTrace();
   } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T17:11:09.380

您需要`JFileChooser`使用要开始的目录构建您的目录，然后`FileFilter`在设置可见之前将 a 传递给它。

```
 final JFileChooser fileChooser = new JFileChooser(new File("File to start in"));
    fileChooser.setFileFilter(new FileFilter() {
        @Override
        public boolean accept(File f) {
            if (f.isDirectory()) {
                return true;
            }
            final String name = f.getName();
            return name.endsWith(".png") || name.endsWith(".jpg");
        }

        @Override
        public String getDescription() {
            return "*.png,*.jpg";
        }
    });
    fileChooser.showOpenDialog(GridCreator.this); 
```

此示例过滤以“.png”或“.jpg”结尾的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-04T06:49:42.423

把它全部放在一个简洁的形式中，这是一个灵活的文件选择器例程。它指定初始目录和文件类型，并将结果提供为文件或完整路径名。您可能还希望通过将 setLookAndFeel 命令放在程序的 Main 入口点，将整个程序设置为本地界面模式。

```
String[] fileChooser(Component parent, String dir, String typeFile) {
    File dirFile = new File(dir);
    JFileChooser chooser = new JFileChooser();
    // e.g. typeFile = "txt", "jpg", etc.
    FileNameExtensionFilter filter = 
        new FileNameExtensionFilter("Choose a "+typeFile+" file",
            typeFile); 
    chooser.setFileFilter(filter);
    chooser.setCurrentDirectory(dirFile);
    int returnVal = chooser.showOpenDialog(parent);

    String[] selectedDirFile = new String[2];
    if(returnVal == JFileChooser.APPROVE_OPTION) {
        // full path
        selectedDirFile[0] = chooser.getSelectedFile().getPath();
        // just filename
        selectedDirFile[1] = chooser.getSelectedFile().getName();
    }

    return selectedDirFile;
 }

try {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
}
catch (Exception e) {
    e.printStackTrace();
} 
```

# iphone - 游戏中心错误

> ID：15954773
> 
> 赞同：2
> 
> 时间：2013-04-11T17:07:36.290
> 
> 标签：iphone, ios, game-center, gamekit, multiplayer

我在这里学习教程。[多人游戏 iOS](http://www.raywenderlich.com/3325/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-22)

我正在使用上面教程中的以下代码进行匹配

```
GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease]; 
request.minPlayers = minPlayers;     
request.maxPlayers = maxPlayers;
request.playersToInvite = pendingPlayersToInvite;

GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];    
mmvc.matchmakerDelegate = self;

[presentingViewController presentModalViewController:mmvc animated:YES]; 
```

当我使用“立即播放”选项搜索其他玩家时，`GKMatchmakerViewController`立即被解雇`matchmakerViewController:didFailWithError`并出现以下错误。

```
Error Domain=GKErrorDomain Code=3 "The requested operation could not be 
completed due to an error communicating with the server." UserInfo=0x2081d8d0
{GKServerStatusCode=5001, NSUnderlyingError=0x2086c560 "The operation couldn’t be 
completed. (GKServerErrorDomain error 5001.)", NSLocalizedDescription=The requested
operation could not be completed due to an error communicating with the server.} 
```

我一直无法弄清楚为什么会这样。相同的代码之前能够搜索和找到合适的玩家，但在使用获取玩家别名时失败了

```
[GKPlayer loadPlayersForIdentifiers:match.playerIDs withCompletionHandler:^(NSArray *players, NSError *error) 
```

出现“无法与服务器通信”错误。

但是，该代码在模拟器上运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-07T13:04:29.073

我也得到了

> 错误域=GKErrorDomain 代码=3 “由于与服务器通信时出错，请求的操作无法完成。” UserInfo=0x17007e4c0 {GKServerStatusCode=5001, NSLocalizedDescription=由于与服务器通信错误，请求的操作无法完成，NSUnderlyingError=0x170050140 "操作无法完成。（GKServerErrorDomain 错误 5001。）

我认为这是 sandbox.gc.apple.com 问题.. 这个问题是一年，但苹果在某个时候仍然有这个问题

希望苹果尽快解决这个问题。

我在 iPod touch 上试了试，我得到了

> 错误域=NSURLErrorDomain 代码=-1001 “请求超时。” UserInfo=0x176bec90 {NSErrorFailingURLKey= http://sandbox.gc.apple.com/WebObjects/GKInit.woa/wa/getBag?ix=1，NSErrorFailingURLStringKey= [http://sandbox.gc.apple.com/WebObjects/GKInit](http://sandbox.gc.apple.com/WebObjects/GKInit.woa/wa/getBag?ix=1) [。 woa/wa/getBag?ix=1](http://sandbox.gc.apple.com/WebObjects/GKInit.woa/wa/getBag?ix=1) , NSLocalizedDescription=请求超时。}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T08:57:23.593

使用reportScoreWithCompletionHandler 发送新的高分时遇到同样的问题（GKServerStatusCode=5001）。

在沙盒模式下一切正常，但 AppStore 版本在所有启用了沙盒模式的设备（iOS 8.2 / 8.3）上都有这个问题。但我可以在排行榜中看到其他用户的数据。看起来这实际上是Apple方面的错误。

# javascript - fromJSON 没有从不同的 viewModel 更新 ViewModel Knockout.js

> ID：15954774
> 
> 赞同：0
> 
> 时间：2013-04-11T17:07:46.320
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-mvc

我正在从一个视图模型 (viewModel1) 调用以在不同的视图模型 (viewModel2) 中刷新我的数据。

```
**viewModel1**.fire = function () {
     $.getJSON("Post", function (result) {
     ko.mapping.updateFromJS(**viewModel2**.employees, result);
});
} 
```

我要放弃这个了，有可能吗？

谢谢

# c# - 使用 Selenium Webdriver，C# 在 dl、dt 下查找 Element

> ID：15954780
> 
> 赞同：0
> 
> 时间：2013-04-11T17:08:00.163
> 
> 标签：c#, selenium, webdriver

我在 C# 中使用 Selenium Webdriver 2.30。如果有人能告诉我如何在以下结构中点击链接（id="e"），我将不胜感激。

```
<frame name = "a">
    #document
        <html>
            <head></head>
            <body>
                <div id = "b">
                    <dl id= "c">
                        <dt class = "d">
                            <a href = "http://somewhere.com" id = "e" class> Go to somewhere</a>
                        </dt>
                        <dt>
                            <a href = "http://something.com" id = "f"> Find something </a>
                        </dt>
                    </dl>
                </div>
            </body>
        </html>     
</frame> 
```

我试过了

```
selenium.SwitchTo().Frame("a");
selenium.FindElement(By.XPath("//a[@id=\"e\"]")).Click(); 
```

并尝试过

```
selenium.SwitchTo().Frame("a");
selenium.FindElement(By.XPath("//div[@id='b']/dl[1]/dt[1]/a")).Click(); 
```

我也试过

```
selenium.SwitchTo().Frame("a");
selenium.FindElement(By.LinkText("Go to somewhere")).Click(); 
```

不幸的是，它们都不起作用。问题可能是因为定义列表下的元素有一些不同，但我还没有弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:41:24.470

抛出的异常消息在这里可能有用，如果可以，请发布。

首先，您需要确保它在正确的框架中。尝试调试以下内容，看看计数是否正确。

```
selenium.SwitchTo().Frame("a");
IList<IWebElement> dt = selenium.FindElements(By.XPath("//div[@id='b']//dt"));

// alternative way
selenium.SwitchTo().Frame(selenum.FindElement(By.CssSelector("frame[name='a']")));
IList<IWebElement> dt = selenium.FindElements(By.CssSelector("#b dt")); 
```

如果它在正确的框架中，请使用 Firebug 验证 xpath 或 cssSelector。我也会尝试以下方法。请记住确保元素已实际加载。[WebdriverWait](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#explicit-and-implicit-waits)可能有用。

```
selenium.FindElement(By.CssSelector("#e")).Click();
selenium.FindElement(By.CssSelector("dt.d>a")).Click();
selenium.FindElement(By.XPath("//a[text()='Go to somewhere']")).Click();
selenium.FindElement(By.XPath("(//dl[@id='c']/dt/a)[1]")).Click(); 
```

# variables - 如何将选定的属性（不是全部）从骆驼复制到 activiti

> ID：15954782
> 
> 赞同：0
> 
> 时间：2013-04-11T17:08:16.367
> 
> 标签：variables, apache-camel, activiti

骆驼场景：

*   读取文件
*   做一些事情，例如将内容存储在数据库中
*   运行 activiti 进程并传递上一步的变量

路线构建器：

```
from("file:/home/work/Inbox")
.to("bean:sourceFileService?method=storeFile")
.to("activiti:Receive?copyVariablesFromProperties=true") 
```

在调用 bean sourceFileService 属性“sourceFileId”期间设置。这个变量应该作为变量传递给进程接收。

如果我不使用 copyVariablesFromProperties，则不会在进程中设置任何变量。另一方面，当 copyVariablesFromProperties=true 然后骆驼尝试传递所有属性并发生异常时：

ActivitiException：找不到能够序列化 GenericFile 的变量类型

（因为属性之一是 object 表示读取文件，所以还有 7 个其他不需要的属性）

如何仅将选定的属性传递给 activiti 端点或骆驼任何下一个“到”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:48:46.657

change`sourceFileService`的`storeFile`方法签名如下；

```
public String storeFile(... your other params, @OutHeaders Map headers) {
       ...
       headers.put("sourceFileId", "32132132");
       ....
} 
```

`sourceFileId`您可以访问`activiti`端点中的集合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:02:45.390

我发现没有必要使用 copyVariablesFromProperties。同样是通过

```
.setBody().properties()
.to("activiti:Receive") 
```

当在正文中时，使用该地图为 activiti 进程设置地图骆驼变量。但出于同样的原因，我仍然会遇到异常（传递不需要的、不可序列化的对象）。

我找到的唯一解决方案是

```
from("file:/home/work/Inbox")
.to("bean:sourceFileService?method=storeFile")
.setBody(method(Helper.class))
.to("activiti:Receive") 
```

在哪里

```
public class Helper {
    @Handler
    public Map getProcessVariables(Exchange exchange) {
        Map<String, Object> variables = new HashMap<String, Object>();
        variables.put("sourceFileId, exchange.getProperty("sourceFileId"));
        return variables;
    }
} 
```

# iphone - 从 iOS 中的剪贴板粘贴

> ID：15954784
> 
> 赞同：2
> 
> 时间：2013-04-11T17:08:23.970
> 
> 标签：iphone, ios, ipad, titanium, titanium-mobile

所以我有2个应用程序。一个是传感器应用程序（使用 XCode 构建），它使用硬件无线传感器记录数据（文本）。另一个是清单/参考手册（使用 Titaniam Appcelerator 构建）。使用自定义 URL 方案，它们可以相互实例化。

我要做的是将传感器应用程序复制到剪贴板的任何文本数据粘贴到参考手册应用程序的文本字段中。我有一个 UIWebview 显示 html 页面（清单），现在显示一个文本框。要演示该功能，我必须触摸该字段并选择粘贴。我在想 javascript 可能会起作用，但我所有的研究 poo poo 都是这个想法。关于如何抓取剪贴板上的文本并在参考手册应用程序中以编程方式显示它而无需触摸该字段并选择粘贴的任何想法？

我什至应该查看剪贴板，还是应该考虑修改自定义 URL 方案以改为以这种方式传递数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:15:08.503

要从剪贴板中获取文本：

```
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
NSString *string = pasteboard.string;
if (string) {
    // Do something
} 
```

有关应用程序之间的更多功能通信，请查看[URL Schemes](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:20:03.613

所以，我想出了一种通过本[教程](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)在 url 中传递数据的方法。在底部，它描述了在为每个应用设置 URL id 后如何传递数据。希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T01:38:24.047

**在 Swift 中粘贴**

用 . 获取粘贴板字符串`UIPasteboard.generalPasteboard().string`。

该字符串是可选的，因此在使用之前必须将其解包。

```
if let pasteboardString = UIPasteboard.generalPasteboard().string {

    // use the string, for example:
    myTextView.insertText(pasteboardString)
} 
```

**笔记**

*   最初的问题是要求比这更复杂的东西。但是，大多数人是根据问题标题而不是问题内容来这里的，所以我在这里回答什么。

# facebook-graph-api - 将 facebook 图表链接转换为 fql

> ID：15954788
> 
> 赞同：1
> 
> 时间：2013-04-11T17:08:30.307
> 
> 标签：facebook-graph-api, facebook-fql

我想转换

```
https://graph.facebook.com/100001186987234?fields=friends.uid(5718473123).fields(photos.type(uploaded).limit(10).fields(source,id,picture,link)) 
```

到一个`fql`查询。

任何人请解释如何转换这个

# wamp - 配置wamp服务器

> ID：15954795
> 
> 赞同：0
> 
> 时间：2013-04-11T17:08:46.777
> 
> 标签：wamp, wampserver

我在 windows7 64 位中安装了 wamp server2。安装后，当我启动 wampserver 时它会脱机。以及 localhost、apache 等所有组件都不起作用。当我尝试将其联机时，它显示“无法执行菜单项（内部错误）[异常]。无法执行服务操作”消息作为错误。当我以管理员身份运行 wamp 时，它会上线，但 localhost 仍然无法正常工作。我该怎么做才能让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:12:30.780

这可能是与 Skype 的冲突...

如果您有 Skype，请进入 Skype 高级选项并检查使用替代端口。（不记得确切的选项是什么，但它会使Skype使用另一个端口并解决冲突）

# ios - 从 macintosh 上的命令行在未越狱的 iOS 设备上启动应用程序

> ID：15954799
> 
> 赞同：3
> 
> 时间：2013-04-11T17:08:58.640
> 
> 标签：ios, usb, device, launch

从测试的角度来看，我必须在干净的应用程序上运行测试。为此，我需要通过 USB 远程卸载/安装然后在非越狱设备上启动应用程序。我可以卸载/安装。谁能解释我使用一些命令行工具在设备上启动应用程序。我需要命令行，我需要从其他项目中触发这个命令。任何帮助表示赞赏。谢谢

# objective-c - 为 Objective C 随机化警报视图文本

> ID：15954805
> 
> 赞同：0
> 
> 时间：2013-04-11T17:09:21.827
> 
> 标签：objective-c

我是编程新手。我很难找出这一切有什么问题。这是一个警报视图，我试图随机化消息中显示的文本。

```
-(void)alert:(id)sender{
int randomNumber;
randomNumber = (randomNumber() %3 + 1);
NSLog(@"%i", randomNumber);

if (randomNumber == 1) {
    self.YouWin.text = [NSString stringWithFormat:@"You Win"];
}
else if (randomNumber == 2) {
    self.YouWin.text = [NSString stringWithFormat:@"You Lose"];
}
else if (randomNumber == 3) {
    self.YouWin.text = [NSString stringWithFormat:@"Tie"];
}
NSLog(@"%@",YouWin);
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Hello" message:[NSString stringWithFormat:@"%@",YouWin] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
[alert show];
button.hidden = YES; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:12:10.363

试试这个：

```
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Hello" 
                                               message:self.YouWin.text 
                                              delegate:self 
                                     cancelButtonTitle:@"Ok" 
                                     otherButtonTitles:nil]; 
```

您需要存储在 中的文本值`YouWin`，但您传递了 YouWin 对象本身。

**注意：*您可以`arc4random()`用于生成随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T01:36:44.913

有很多好的建议；我同意 AKB8085。

替换`randomNumber()`with`arc4random()`将在编译时有所帮助。但是您可能需要**重新考虑实现一个随机数生成器。**原因是对您的用户公平。我提出了一个问题，“假设您希望您的用户猜测具有如此大数字范围的数字是否公平？”

**你知道吗？**

使用 arc4random(3)、rand(3) 或 random(3)，您正在使用 C 函数。
您要求用户猜测具有以下范围的数字：

1.  `arc4random(3)`=`0`到`4294967296`
2.  `rand(3)`并且`random(3)`最高`RAND_MAX`的`0x7fffffff` `(214748647)`

**为了帮助回答您的问题，请回答以下要求问题：**

1.  是否有最小/最大范围限制？
2.  使用 , 或 会发生什么类型的令人信服[`arc4random(3)`的`rand(3)`延迟`random(3)`](http://nshipster.com/random/)？
3.  `NSArray`在[Fisher–Yates_shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)中使用like 是一个更好的答案吗？

**建议：** 阅读一篇关于随机数和`NSArray`.

**注意：** 随机数往往会给编译器带来任务，您的用户体验将受到阻碍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:20:23.403

代替

```
randomNumber = (randomNumber() %3 + 1); 
```

和

```
randomNumber = arc4random() %3 + 1; 
```

也用这个...

```
if (randomNumber == 1) {
self.YouWin.text = [NSString stringWithFormat:@"You Win"];
}
else if (randomNumber == 2) {
self.YouWin.text = [NSString stringWithFormat:@"You Lose"];
}
else if (randomNumber == 3) {
self.YouWin.text = [NSString stringWithFormat:@"Tie"];
}
NSLog(@"%@",YouWin);

UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Hello" 
                                               message:self.YouWin.text 
                                              delegate:self 
                                     cancelButtonTitle:@"Ok" 
                                     otherButtonTitles:nil];

[alert show];
button.hidden = YES; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T17:22:10.127

正如 Anoop 指出的那样，您正在使用`stringWithFormat`但您根本没有提供格式字符串。

你应该做

```
[NSString stringWithFormat:@"%@", @"You Win"]; 
```

但这是非常多余的，虽然是正确的，它完全等同于使用`@"You Win"`.

也是针对该问题的一般方法的建议。与其拥有一个大`if-else`语句，不如将所有字符串存储到一个数据结构中，然后随机访问它。

在代码中，这将转化为

```
NSArray * outcomes = @[ @"You Win", @"You lose", @"Tie" ];
int randomIndex = arc4random_uniform(outcomes.count);
NSString * randomOutcome = outcomes[randomIndex];
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Hello"
                                               message:randomOutcome
                                              delegate:self
                                     cancelButtonTitle:@"Ok"
                                     otherButtonTitles:nil];
[alert show];
button.hidden = YES; 
```

请注意，它的用法`arc4random_uniform()`会给你一个介于 0 和提供的参数之间的随机数，排除在外。

# ruby-on-rails - 检索与联结表多对多关联的最后一个版本

> ID：15954806
> 
> 赞同：0
> 
> 时间：2013-04-11T17:09:29.737
> 
> 标签：ruby-on-rails, ruby, activerecord

我有三个模型，任务、里程碑和细节。为了记录任务的历史，每次任务或里程碑更改时，都会在联结（连接）表中创建一个新的详细记录。

我的问题是创建一个可链接的查询来检索有关每个任务的最新信息。使用 .group 已经有一段时间了：

```
 @most_recent_details = Detail.order("updated_at DESC").group(:task_id) 
```

但是当我尝试进一步过滤该集合时，例如验证某个里程碑的存在，上述排序被忽略并返回不包含在集合中的旧记录：

```
 @most_recent_details.where(milestone_id: 2) 
```

* * *

任务
has_many :details

里程碑
has_many :details

详细信息
belongs_to :task
belongs_to :milestone
attr_accessible :task_title, :task_id, :milestone_id

## 更新

试图进一步澄清这个问题，这就是我希望应用程序以有效方式完成的任务：

查找每个 MILESTONE 的每个 TASK，如果该任务对应的最新 DETAIL 没有说没有任何分配的里程碑。

# spring - 需要一些最佳实践来使用 jsf2 + spring web flow 检测用户的语言环境

> ID：15954808
> 
> 赞同：0
> 
> 时间：2013-04-11T17:09:41.190
> 
> 标签：spring, jsf-2, locale, spring-webflow

我只是想找出一些好的方法来检测语言环境。

我遵循的方法是：

1-具有以下代码的一种语言 Bean

```
<code>
if(!classUtil.isNullObject(FacesContext.getCurrentInstance())){
            return FacesContext.getCurrentInstance().getExternalContext().getRequestLocale();
        }
        return selectedLanguage;//Return default language in case its not possible to detect the language
</code> 
```

2- 在父流中创建 bean 定义

```
<code><var name="languageBean" class="com.decitysearch.classified.LanguageBean"/></code> 
```

3-在xhtml中使用相同的

```
<code>
<f:view locale="#{languageBean.findDefaultLocale}">
<f:loadBundle var="messageResource" basename="MessageResource_en"/>   
</code> 
```

我的问题是这样的： 1-我们不能像我尝试使用 spring-context 但得到一些范围异常那样在 spring-context 中而不是 flow bean 中创建 bean 条目。2-是否有任何检测语言环境的好方法

非常感谢您的思考过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T09:52:51.723

**如果您使用的是 Spring**，请声明这些 bean 并使用参数“locale=xx”调用 URL 以更改语言环境：

```
<bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
    <property name="defaultLocale" value="es" />
</bean>

<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/**" />
        <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

# jquery - 显示/隐藏和幻灯片表

> ID：15954811
> 
> 赞同：0
> 
> 时间：2013-04-11T17:09:49.293
> 
> 标签：jquery

我有一个表，其中一行中有一个子表。当单击“显示”类的锚点时，我想：

1.  使子表可见...滑动它。
2.  将锚类从“显示”更改为“隐藏”。

我怎样才能做到这一点？

我的代码如下：

```
<table class="Parent">
  <tr>
      <td class="Task"></td>
      <td>Row1</td>
   </tr>
  <tr>
    <td class="Task"><a class="Show">Show</a></td>
    <td>Row 2
      <table class="Child" style="display: none">
          <tr><td>Row1</td></tr>
         <tr><td>Row2</td></tr>
      </table>
    </td>
   </tr>
</table> 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:21:43.337

你想要这样吗？

**见演示：**

我用过`toggle()`

[http://jsfiddle.net/KcRTm/3/](http://jsfiddle.net/KcRTm/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:28:08.873

您需要将其包装`.Child`在一个 div 中，否则它会将其显示为`table-cell`会影响幻灯片动画的。

```
$(document).ready(function(){
    $('.Show, .Hide').click(function(){
        var child = $(this).closest('tr').find('.Child').closest('div');

        if($(this).hasClass('Show')){
            $(this).removeClass('Show').addClass('Hide').html('Hide');
        }else{
            $(this).removeClass('Hide').addClass('Show').html('Show');
        }

        child.slideToggle('fast');
    });
}); 
```

演示（带 DIV）：http: [//jsfiddle.net/dirtyd77/ppgH9/9/](http://jsfiddle.net/dirtyd77/ppgH9/9/)

演示（无 DIV）：http: [//jsfiddle.net/dirtyd77/ppgH9/8/](http://jsfiddle.net/dirtyd77/ppgH9/8/)

# windows - PowerShell PSCredential 参数列表

> ID：15954812
> 
> 赞同：0
> 
> 时间：2013-04-11T17:09:49.353
> 
> 标签：windows, powershell

我需要连接到远程服务器并进行一些文件复制和移动等。远程服务器需要身份验证。

我需要为 PSCredential 输入什么 UNC 路径？它是特定远程用户的路径吗？

```
\SERVER2\Users\Administrator 
```

或者它是远程资源本身的路径吗？

```
\SERVER2\Data\Content 
```

...

### 验证呼叫

```
$Creds = New-Object -Typename System.Management.Automation.PSCredential -Argumentlist "C:\Some\Path",$PW
 Copy-Item  $src $destination -Credential $Creds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:23:47.470

指定有权访问资源的用户的凭据。[Get-Credential](http://technet.microsoft.com/en-us/library/hh849815.aspx)命令行开关可以为您获取凭据。

```
$cred = Get-Credential
Copy-Item $src $destination -Credential $cred 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:24:49.743

它是用户名。但是，您的路径不是正确的 UNC 路径。他们应该以两个斜杠开头，例如`\\SERVER2\Users\Administrator`

# security - 一个 UDP 数据包是否保证是完整的、实用的（如果已交付）？

> ID：15954813
> 
> 赞同：3
> 
> 时间：2013-04-11T17:09:50.820
> 
> 标签：security, network-programming, udp, packets

UDP（用户数据报协议）不安全是众所周知的事实吗，因为与它一起发送的数据包的顺序可能根本没有按顺序传递。但是，如果发送了 UDP 数据包。该数据包中的信息在实际意义上（99.99% 及以上）是否保证正确？

在实际意义上（99.99% 及以上），如果交付，UDP 数据包是否保证完整（未损坏）？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T17:14:25.307

不，有两个原因：

*   UDP 校验和不是强制性的（使用 IPv4）。因此可以将损坏的数据包传递给应用程序。
*   互联网校验和可能比其他哈希更频繁地发生冲突。所以即使校验和匹配，数据也可能被破坏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T17:19:35.110

我不是专家，但据我所知，虽然不能保证包裹在大多数情况下完全到达目的地，但如果它到达目的地应该是正确的。我认为应该是这样，因为通常在数据链路层上有一个错误检查（帧校验和）。

# php - Facebook 离线墙贴不起作用 - 2 月的重大变化

> ID：15954814
> 
> 赞同：1
> 
> 时间：2013-04-11T17:09:52.540
> 
> 标签：php, facebook, offline

谁能帮我解决这个问题，在过去的 48 小时里，我一直在为此头疼。

**目标：** 我正在尝试通过我的网站将一些信息发布到我朋友的 Facebook 墙上。之前一切正常，但我现在遇到错误：

`Fatal error: Uncaught OAuthException: (#200) The user hasn't authorized the application to perform this action thrown in /home/abcd/public_html/front_apps/controllers/src/base_facebook.php on line 1039`

另外我想做的是，当我离线时将其发布在我朋友的 Facebook 墙上，使用`cron`并在每天上午 12 点之前发布。

我在这里使用PHP代码是代码：

```
<?php

$message = "Message goes here";
$link = "http://link.com/";
$picture = "http://link.com/1.jpg";
$sendTo = "my friend id";
$access_token = "access tocken";

require 'src/facebook.php';
$facebook = new Facebook(array(
      'appId'  => 'appId',
      'secret' => 'secret_ID',
    )); <br>

$attachment = array('message' => $message, 'link' => $link, 'picture' => $picture );
$api = "/$sendTo/feed/?access_token='.$access_token,";
$result = $facebook->api($api,'post', $attachment);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:29:23.170

由于 facebook 已弃用 Offline Acces，您必须获得长寿令牌（有效期为 60 天）并将其存储在您的服务器上！这是我正在使用的。

要立即获取长期存在的令牌，请使用服务器端登录流程

```
$code = $_REQUEST["code"];

//get acces token from user
$token_url = "https://graph.facebook.com/oauth/access_token?"."client_id=".$config[‘appId’]."&redirect_uri=".urlencode($my_url)."&client_secret=".$config[‘secret’]."&code=".$code;

$response = file_get_contents($token_url);
$params = null;
parse_str($response, $params);

$token = $params['access_token']; //long live the token 
```

并发布到用户墙

```
//construct the image URL
$url ="https://".$_SERVER['SERVER_NAME'].$event_data['path'];
$img_url = urlencode($url); //encode the URL
$text= urlencode($event_data['text']);

//post to user wall - picture and text 
$post_url= "https://graph.facebook.com/".$user_data['uid']."/photos?url=".$img_url."&message=".$text."&access_token=".$user_data['token']."&method=post";
$upload_photo = file_get_contents($post_url); 
```

希望能帮助到你 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:55:13.850

查看此链接并按照步骤操作。

[http://eagerfish.eu/using-facebook-off-line-access-to-post-on-users-wall/](http://eagerfish.eu/using-facebook-off-line-access-to-post-on-users-wall/)[在此处输入链接描述](http://eagerfish.eu/using-facebook-off-line-access-to-post-on-users-wall/)

也检查下面的链接，

[未捕获的 OAuthException：（#200），当尝试在墙上发帖时，请在](https://stackoverflow.com/questions/6726359/uncaught-oauthexception-200-when-trying-to-post-on-wall)[此处输入链接描述](https://stackoverflow.com/questions/6726359/uncaught-oauthexception-200-when-trying-to-post-on-wall)

# java - 将数据值添加到搜索算法？

> ID：15954815
> 
> 赞同：0
> 
> 时间：2013-04-11T17:09:58.773
> 
> 标签：java, search, recursion, add, binary-search

如何将 1000、10000、1000000 或 10000000 个单独的数据项添加到搜索算法中？

代码：

```
public class BinarySearch {

int binarySearch(int[] array, int value, int left, int right) {
      if (left > right)
            return -1;
      int middle = (left + right) / 2;
      if (array[middle] == value)
            return middle;
      else if (array[middle] > value)
            return binarySearch(array, value, left, middle - 1);
      else
            return binarySearch(array, value, middle + 1, right);           
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:13:41.197

您似乎在问如何填充数组。这是一种方法：

```
 final Random rnd = new Random();
    final int n = 100000;
    final int[] array = new int[n];
    for (int i = 0; i < n; ++i) {
        array[i] = rnd.nextInt();
    }
    Arrays.sort(array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:14:50.797

因此，如果我理解正确，您想尝试使用数组中不同数量的整数的算法。

```
public int[] makeArray(int size, int minNum, int maxNum) {
    int [] arr = new int[size];
    Random r = new Random();       

    for (int i = 0; i < size; i++) {
        arr[i] = minNum + r.nextInt(maxNum);
    }

    Arrays.sort(arr);

    return arr;
} 
```

因此，如果您想拥有 10000 个从 100 到 500 的数字，那么您可以调用：

```
int[] arr = makeArray(10000, 100, 500); 
```

实际上，我建议创建一个辅助方法来开始您的搜索，如下所示：

```
public int binarySearch(int[] array, int value) {
    return binarySearch(array, value, 0, array.length - 1);
} 
```

然后你可以寻找`arr`一个值（例如，5）：

```
int i = binarySearch(arr, 5); 
```

# javascript - 如何将此内联 javascript 转换为导致冲突的 jQuery 函数？

> ID：15954820
> 
> 赞同：1
> 
> 时间：2013-04-11T17:10:21.797
> 
> 标签：javascript, jquery, inline

我正在使用 jQuery 语言切换器，下面是工作脚本。

```
<script type="text/javascript">
    window.lang = new jquery_lang_js();
    $(document).ready(function() {  
        window.lang.run();
    });
</script>

<a href="javascript:window.lang.change('jp');">Switch to Japanese</a> 
```

但是，内联 JavaScript 会导致与页面中的其他 jQuery 脚本发生冲突。

我试图在下面创建一个这样的函数，但显然，这是不正确的。通过按照建议在准备好的文档中移动 .click 函数，它现在可以工作了。

```
<script type="text/javascript">
window.lang = new jquery_lang_js();
$(document).ready(function() {  
    window.lang.run();
});
$(".jp").click(function (e) {
    e.preventDefault();      
    var $this = $(this);        
    var id = $this.attr('href');
    window.lang.change('jp');
});

</script>

<a href="#" class="jp">Switch to Japanese</a> 
```

此外，除了“jp”之外，我还有其他类，所以这甚至不是正确的方法，但我试图首先摆脱内联 javascript；我无论如何都没有做到。

有人可以帮忙吗？

//////////////////下面现在可以工作了////////////////

我想现在我的问题是，我怎样才能重写它，这样我就不会重复这样的代码？

```
<script type="text/javascript">
window.lang = new jquery_lang_js();
$().ready(function () {
    window.lang.run();
 $(".jp").click(function (e) {
 e.preventDefault();      
        var $this = $(this);        
    var id = $this.attr('href');
    window.lang.change('jp');

 $(".en").click(function (e) {
 e.preventDefault();      
        var $this = $(this);        
    var id = $this.attr('href');
    window.lang.change('en');

});

});

</script>

<a href="#" class="jp">Switch to Japanese</a>
<a href="#" class="en">Switch to English</a> 
```

. . . 更多课程

有比这样写更好的方法，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:16:45.603

您应该`.click()`移动`.ready()`. 现在，JavaScript 在锚加载之前运行，所以`$('.jp')`没有找到它。

另外，不要`$this`用作变量；这不是 PHP，而且您也没有将它用于任何重要的事情。

# iphone - 连接到ip上的特定端口

> ID：15954824
> 
> 赞同：0
> 
> 时间：2013-04-11T17:10:39.623
> 
> 标签：iphone, ios, connection, port

也许是非常基本的问题，但我找不到基本的例子或解释。

我想用端口 nr 35000 连接到 192.168.0.10 当我有连接时，我想发布 AT 命令和/或创建一个套接字流。我如何在 iOS 中编写代码？我已经看到了一个使用 NSPort 的示例，但我再也找不到它了 :(

目标是创建一个连接并通过多个视图使其保持打开状态。并且还发布不同的命令来检索数据并将其显示在不同的视图上。

希望有人能指出我正确的方向。

亲切的问候，罗伯特

# ios - 使用 OCMock 模拟 [[UIDevice currentDevice] userInterfaceIdiom]

> ID：15954828
> 
> 赞同：1
> 
> 时间：2013-04-11T17:10:46.200
> 
> 标签：ios, unit-testing, ocmock

我正在学习在单元测试中使用 OCMocks，并且我了解基础知识。但是，我不确定如何模拟对类方法的调用。

我想要：

```
[[UIDevice currentDevice] userInterfaceIdiom] 
```

为我的测试用例返回不同（但有效）的接口习惯用法。

```
id mock = [OCMockObject mockForClass:[UIDevice class]];

// Would I use a mock or a stub to have UIDevice mock return
// currentDevice and then from it, return userInterfaceIdiom 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:40:40.613

模拟单例是很棘手的。你可以用一些运行时魔法来做到这一点。可以借助[Matt Gallagher 的 invokeSupersequent 宏](http://www.cocoawithlove.com/2008/03/supersequent-implementation.html)来完成。基本上，您将一个类别添加到您的测试用例中，该类别将覆盖`currentDevice`以返回一个模拟，前提是您已经设置了模拟。这是设置：

```
#import "NSObject+SupersequentImplementation.h"

#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wobjc-protocol-method-implementation"

@implementation UIDevice (UnitTests)

+(id)currentDevice {
    if ([BaseTestCase mockDevice]) {
        return [BaseTestCase mockDevice];
    }

    return invokeSupersequentNoArgs();
}

@end

#pragma clang diagnostic pop

static id mockDevice = nil;

+(id)mockDevice {
    return mockDevice;
}

+(id)createMockDevice {
    mockDevice = [OCMockObject mockForClass:[UIDevice class]];
    return mockDevice;
}

+(id)createNiceMockDevice {
    mockDevice = [OCMockObject niceMockForClass:[UIDevice class]];
    return mockDevice;
}

-(void)tearDown {
    mockDevice = nil;
    [super tearDown];
} 
```

然后，在您的测试中：

```
-(void)testShouldDoSomethingOnIpad {
    id mockDevice = [BaseTestCase createNiceMockDevice];
    [[[mockDevice stub] andReturnValue:OCMOCK_VALUE(UIUserInterfaceIdiomPad)] userInterfaceIdiom];

    // do something iPad-specific

    [mockDevice verify];
} 
```

不久前，我[对这种方法进行了更详细的描述](http://twobitlabs.com/2011/02/mocking-singletons-with-ocmock/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-08T23:47:49.080

这是一个简单的解决方案：

```
OCMockObject* _deviceMock = OCMPartialMock([UIDevice currentDevice]);

[[[_deviceMock stub] andReturnValue:@(UIUserInterfaceIdiomPad)] userInterfaceIdiom]; 
```

只需确保您的行为中的代码使用此检查

```
[UIDevice currentDevice].userInterfaceIdiom 
```

代替宏

```
UI_USER_INTERFACE_IDIOM() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:47:02.287

另一种方法是将这两种变体都放在测试中，然后在 iPhone 和 iPad 模拟器中运行测试。诚然，这有点麻烦。

```
-(void)testShouldDoSomething {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        // test iPad behavior
    } else {
        // test iPhone behavior
    }
} 
```

# css - 仅更改悬停时的渐变方向

> ID：15954836
> 
> 赞同：1
> 
> 时间：2013-04-11T17:11:39.737
> 
> 标签：css, hover, linear-gradients

我有一个带有渐变的按钮，我希望渐变在悬停时切换方向。这是开始的 CSS：

```
.button-1 {
    border: 1px solid #15440a;
    border-radius: 2px;
    color: white;
    background-color: #2890b;
    background-image: linear-gradient(#299c0f 20%, #1a7b09 80%);
    font-size: 13px;
} 
```

我想做这样的事情：

```
.button-1:hover {
    /* change just direction of gradient */
    /* keep colors the same */
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:17:10.677

只需在`linear-gradient`属性内切换颜色位置即可。

```
 .button-1:hover {
        background-image: linear-gradient(#1a7b09 20%, #299c0f 80%);
    } 
```

[http://jsfiddle.net/EkYE5/1/](http://jsfiddle.net/EkYE5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:00:29.413

您只能通过保持渐变代码相同并在渐变颜色之前添加“顶部”来实现更改渐变方向：

```
.button-1:hover {
    background-image: linear-gradient(to top, #299c0f 20%, #1a7b09 80%);
{ 
```

# matlab - Matlab函数返回值

> ID：15954838
> 
> 赞同：5
> 
> 时间：2013-04-11T17:11:46.087
> 
> 标签：matlab, return-value

我有一个程序有功能和问题，返回值，它有太多的输出。

像示例：y = text 答案出现

```
Error in text (line 2)

if nargin == 0 

Output argument "array" (and maybe others) not assigned during call to "
C:\Users\name\Documents\MATLAB\text.m>text". 
```

程序 text.m 读取一个包含几个名称和数字的 txt 文件，例如

例子：

约翰·道拉斯 15986

菲利普公爵 357852

等等。该程序将它们转换为 15986 Doughlas John 等。

```
function array = text(~) 
if nargin == 0 
dirr = '.';
end
answer = dir(dirr);  
k=1;
while k <= length(answer) 
    if answer(k).isdir 
        answer(k)=[]; 
    else
        filename{k}=answer(k).name;
        k=k+1;
    end
 end
chose=menu( 'choose file',filename);
namn = char(filename(chose));  
fid = fopen(namn, 'r');    
R = textscan(fid,'%s %s %s');  
x=-1;                                            
k=0;                                               
while x <= 24                                  
      x = k + 1;                                    
      All = [R{3}{x},'   ',R{1}{x},' ',R{2}{x}];
      disp(All)                                     
      k = k + 1;                                   
end                                                
fclose(fid); 
```

有没有办法在不从头开始的情况下解决问题？

感谢所有的答案！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T17:23:11.140

您在定义中指定函数输出参数，但在函数体中没有为它分配任何内容。

例如，在

```
function y = student(j) 
```

你的输出是`y`. 所以你必须分配一些东西给`y`.

阅读有关MATLAB 中的[函数的更多信息。](http://www.mathworks.com/help/matlab/ref/function.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-12T15:42:11.513

这是一个工作示例。

第一部分是在文件名“functionA.m”中创建一个名为“functionA”的函数。然后在里面放入如下代码：

```
 function  result = functionA(N,alpha)
    result = 5;
    return
    end 
```

第二部分是创建另一个 Matlab 文件（即由您命名），或者您甚至可以使用 Matlab 命令窗口。然后运行以下代码：

```
 getresult = functionA(100,10);
    getresult 
```

运行后得到以下答案：

```
 ans = 
          5 
```

# achartengine - 缩放和/或平移后重新定位图表

> ID：15954843
> 
> 赞同：1
> 
> 时间：2013-04-11T17:12:04.017
> 
> 标签：achartengine

在用户放大\缩小或平移图表后，有没有办法重新居中图表？我想让用户能够让图表恢复到原来的缩放和平移视图。用例是如果他们完全放大或远离图表线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:09:23.803

如果您这样做`renderer.setZoomButtonsVisible(true)`，您将在屏幕右下方看到三个按钮。其中之一可以满足您的需要。

否则，您可以调用`chartView.zoomReset()`以便以编程方式触发它。

# jquery - 两种引发按钮事件的方法

> ID：15954844
> 
> 赞同：2
> 
> 时间：2013-04-11T17:12:04.037
> 
> 标签：jquery

我试图了解调用按钮事件的两种方式之间的区别。以下是 2 个示例：

```
$('body').on('click', '#myButton', function () { 
```

或者

```
$("#myButton").on('click', function () { 
```

我注意到网络上的一些示例使用第一个，而其他示例使用第二个。

我应该使用其中一种还是可以互换？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:14:40.217

第一个版本是*委托*[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)而另一个版本是*常规*事件处理程序

主要区别在于 on 的*委托*版本将能够处理动态创建的元素。常规事件处理程序只能与页面加载后直接在 DOM 上可用的元素一起使用。

# c# - 使动态对象全局化

> ID：15954846
> 
> 赞同：0
> 
> 时间：2013-04-11T17:12:08.340
> 
> 标签：c#

我的原始代码：

```
public partial class LineInstance
{
   EventWaitHandle _stopHandle;
   Private int _linenumber;
   // many variable;
   public LineInstance(int linenumber, EventWaitHandle stopper)
   {
      _stopHandle = stopper;
  _linenumber = linenumber;
      // blah
   }    

   private string Menu()
   {
      dynamic api = new Http("http://80.56.16.214/MyServices/MyData.svc");
  var reply = api.GetId(Id: "888");
  var response1 = reply.Response;
  // blah blah
}
 } 
```

现在我想做这些

```
dynamic api = new Http("http://80.56.16.214/MyServices/MyData.svc");
var reply = api.GetId(Id: "888");
var response1 = reply.Response; 
```

是全局的，因为我想在这个类的其他方法中使用。我尝试将它们移动到类构造函数之前的区域

**更新：**

```
public partial class LineInstance
{
EventWaitHandle _stopHandle;
private int _linenumber;
dynamic api = new Http("http://80.56.16.214/MyServices/MyData.svc");
var reply = api.GetId(Id: "888");
var response1 = reply.Response;
          // blah blah 
```

但我得到一个错误：

> 错误：“非静态字段、方法或属性需要对象引用

如何修改我的代码以使其成为全球性的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:19:18.733

定义您的对象，就`static`好像您希望能够在没有任何特定类实例的情况下使用它

```
public partial class LineInstance
{
private static dynamic api;
EventWaitHandle _stopHandle;
private int _linenumber;
    // many variable;
public LineInstance(int linenumber, EventWaitHandle stopper)
{
_stopHandle = stopper;
_linenumber = linenumber;
    // blah
 } 
```

您应该提供一个`public property`来访问该对象

```
public static dynamic Api{
 get{ return api; }

} 
```

除此之外，没有`global`变量`C#`，你应该以任何方式避免它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:41:57.307

要从类的其他方法处理这些属性，您不必将它们设为静态。您更新的代码几乎是正确的。这是您需要做的：

```
public partial class LineInstance
{
   EventWaitHandle _stopHandle;
   Private int _linenumber;
   dynamic api;
   dynamic reply;
   dynamic response1;

   // many variable;
   public LineInstance(int linenumber, EventWaitHandle stopper)
   {
      _stopHandle = stopper;
  _linenumber = linenumber;
      // blah
   }    

   private string Menu()
   {
  api = new Http("http://80.56.16.214/MyServices/MyData.svc");
  reply = api.GetId(Id: "888");
  response1 = reply.Response;
  // blah blah
  }
 } 
```

如您所见，我唯一更改的是在构造函数中初始化字段，而不是在类主体中初始化——这样就没有错误。

# c# - c# 和 SQL 之间的年周翻译

> ID：15954850
> 
> 赞同：0
> 
> 时间：2013-04-11T17:12:21.757
> 
> 标签：c#, tsql, date

所以我已经结束了漫长的编程狂潮，我还有一个逻辑障碍需要克服。我的应用程序为报价请求提供 KPI。业务负责人要求按周对这些 KPI 进行细分，我想当这完成时，请求将按月细分。我在我的 SQL 查询中发现了这一点：
`SELECT qpid FROM cpkpis WHERE DATEPART(ww, qpvalidfrom)=13 GROUP BY qpid;`
这将为我提供一个 qpid 列表以计算总数并提供实际的主键以进行深入研究。
我无法理解的是如何从我的`C#`代码中获取一年中的几周的枚举。我已经看过了`GregorianCalandar Class`，特别是，`GetWeekOfYear Method`但我在列举这些值时遇到了麻烦。

那么我的问题是：给定一个日期范围[让我们说]我将如何枚举开始日期和结束日期之间`2013-01-14`的一年中的几周？`2013-04-10``ints`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:32:11.870

为了帮助完成这项任务和您预期的其他要求，您需要一个[日期表](http://www.made2mentor.com/2011/04/calendar-tables-why-you-need-one/)。恕我直言，在数据库中最难做的事情是查询不存在的数据。

可以查询日期表：

```
Select Distinct DatePart(ww, dateField) as WeekNo
from DateTable
where dateField between '2013-01-14' and '2013-04-10'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:51:52.743

在 T-SQL 中，你可以使用类似的东西：

```
DECLARE @StartDate DATE = '2013-01-14';
DECLARE @EndDate DATE = '2013-04-10';

WITH weekcte AS
     (SELECT DATEADD(dd, -1, DATEADD(wk, DATEDIFF(wk, 0, @StartDate), 0)) AS DateValue
       UNION ALL     
      SELECT DATEADD(wk, 1, DateValue)
        FROM weekcte
       WHERE DATEADD(wk, 1, DateValue) <= @EndDate )
SELECT DATEPART(ww, w.DateValue) AS 'Week No'
  FROM weekcte AS w; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:44:20.837

在 C# 中，迭代器可能是最简单的选项：

```
public static IEnumerable<int> WeekNumbersBetween(
   DateTime startDate, 
   DateTime endDate, 
   Calendar calendar = null,
   CalendarWeekRule weekRule = CalendarWeekRule.FirstDay,
   DayOfWeek firstDayOfWeek = DayOfWeek.Sunday)
{
   if (calendar == null)
   {
      calendar = new GregorianCalendar();
   }

   DateTime week = startDate;
   while (week <= endDate)
   {
      yield return calendar.GetWeekOfYear(week, weekRule, firstDayOfWeek);
      week = week.AddDays(7);
   }
} 
```

`weekRule`和参数的默认值`firstDayOfWeek`应与 SQL 中的默认设置相匹配。如果您的设置不同，则需要指定正确的值。

# html - 引用帖子未显示在 Tumblr 主题中。这是怎么回事？我做错了什么？

> ID：15954851
> 
> 赞同：0
> 
> 时间：2013-04-11T17:12:21.847
> 
> 标签：html, tumblr

这就是我现在正在做的事情。

[http://lt-colbylovesamanda.tumblr.com/](http://lt-colbylovesamanda.tumblr.com/)

这是我的报价单的代码。

```
{block:Quote}
<div class="quote">
<blockquote>"{Quote}"</blockquote>
{block:Source}<cite>{Source}</cite>{/block:Source} ({Length})
</div>
{/block:Quote} 
```

有什么我做错了吗？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:24:03.033

尝试从中`" "`删除`{Quote}`：

```
<blockquote>{Quote}</blockquote> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:45:26.433

看起来您的代码有一些问题。

对于初学者来说，ID 应该只在一个页面上使用一次，但你已经`<article id="posts">`出现了很多次。你应该做的是这样的：

```
<section id="posts">
    <article class="post">
        <!-- your post -->
    </article>

    <article class="post">
        <!-- your post -->
    </article>
</section> 
```

然后，您可以`<article>`通过执行以下操作将特定的 post-type 类名添加到：

```
<article class="post type-{PostType}{block:Photoset}set{/block:Photoset}"> 
```

这将抽出类似的东西：

```
<article class="post type-photoset">
    <!-- photoset post -->
</article>

<article class="post type-quote">
    <!-- quote post -->
</article>

<article class="post type-video">
    <!-- video post -->
</article> 
```

这将帮助您更好地定位每种帖子类型（并让您摆脱`<div>`标记中的额外内容。

您的引用帖子未显示的原因可能意味着在此之前您的 Tumblr 主题代码中存在某种错误。我们需要查看其余代码才能具体回答。

# java - 当密钥现在提前知道时，使用 gson 反序列化 JSON 对象

> ID：15954854
> 
> 赞同：0
> 
> 时间：2013-04-11T17:12:28.350
> 
> 标签：java, json, gson

我正在尝试解析一个由客户对象数组组成的 JSON 对象。每个客户对象都包含许多键/值对：

```
{
   "Customers": 
   [
     {
        "customer.name": "acme corp",
        "some_key": "value",
        "other_key": "other_value",
        "another_key": "another value"
     },
     {
        "customer.name": "bluechip",
        "different_key": "value",
        "foo_key": "other_value",
        "baa": "another value"
     }
   ]
} 
```

复杂之处在于我事先不知道密钥。第二个复杂因素是键包含句点 (.)，这意味着即使我尝试将它们映射到字段，它也会失败。

我一直在尝试将这些映射到客户类：

```
Customers data = new Gson().fromJson(responseStr, Customers.class); 
```

看起来像这样：

```
public class Customers {

    public List<Customer> Customers;

    static public class Customer {

        public List<KeyValuePair> properties;
        public class KeyValuePair {
            String key;
            Object value;
        }     
    }
} 
```

我的问题是，当我从 JSON 加载此类时，我的客户列表会填充，但它们的属性为空。我怎样才能让 GSON 处理我不知道键名的事实？

我尝试了各种其他方法，包括在 Customer 类中放置一个 HashMap 来代替 KeyValuePair 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:47:26.960

另一种方法是，您可以从 JSON 创建一个键值映射，然后查找值，因为键是未知的

```
 Gson gson = new Gson();
    Type mapType = new TypeToken<Map<String,List<Map<String, String>>>>() {}.getType();
    Map<String,List<Map<String, String>> >map = gson.fromJson(responseStr, mapType);
    System.out.println(map);

    Customers c = new Customers();

    c.setCustomers(map.get("Customers"));

    System.out.println(c.getCustomers()); 
```

像这样修改您的客户类

```
public class Customers {

public List<Map<String, String>> customers;

public List<Map<String, String>> getCustomers() {
    return customers;
}

public void setCustomers(List<Map<String, String>> customers) {
    this.customers = customers;
}

} 
```

# sandcastle - 如何在 Sandcastle 构建中包含构建日期和版本号

> ID：15954860
> 
> 赞同：1
> 
> 时间：2013-04-11T17:12:40.103
> 
> 标签：sandcastle

我想要构建文档的日期以及要附加到所有 Sandcastle 构建的页脚的版本号。

我使用 SHFB gui 创建项目文件，然后使用 TeamCity 自动构建。有没有办法将构建日期和 TeamCity 构建 # 放入输出中？

更新：

我尝试像 Jeff 建议的那样输入页脚文本，但它没有将其添加到我看到的任何页面中。

![沙堡页脚](https://i.stack.imgur.com/IDBON.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-20T20:05:47.327

不确定 TeamCity 内部版本号，但我可以通过将这个废话添加到帮助文件属性中的“附加页脚内容”字段中来获取构建日期：

```
Documentation built {@BuildDate:yyyy\-MM\-dd}. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T14:12:30.327

您可以为构建日期和时间添加替换标签，就像 Jeff 指出的那样。有关更多选项，请参阅 [自定义构建过程](http://www.ewoodruff.us/shfbdocs/?topic=html/69d998a7-1af5-4bf5-889b-59cd00b64000.htm)。

文档本身没有版本，但您可以显示框架版本，但这可能不是您想要的。

# javascript - 代替包裹的东西 以有效的方式

> ID：15954862
> 
> 赞同：0
> 
> 时间：2013-04-11T17:12:54.290
> 
> 标签：javascript, html, css, validation

我`<ul>`在`<span>`. 原因是我希望下拉列表与`<span>`使用的文本一样宽`width: 100%`，而不是硬 px 值，因为不同页面上的文本长度不同。

使用`<ul>`inside a`<span>`有效但无效。什么是有效的`<u>, <small>, <b>, <strong>`等等，但它们对我不想要的文本有效果/样式。

我需要的是一个像 span 这样的虚拟元素，对我可以添加自己的类的文本没有影响（用于突出显示）。但它必须是`<ul>`.

或者其他什么好主意。

目前：

```
<span class="hightlight"> My highlighted text
   <ul class="dropdown">
       <li> .. </li>
       <li> .. </li>
       <li> .. </li>
    </ul>
</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:43:24.087

的块级对应物`span`是`div`. 它们都对默认渲染没有任何影响，除了它`span`是一个内联元素，`div`是一个块元素。

目前尚不清楚为什么需要容器，因为可能有一些样式会导致您尝试使用容器修复一些问题。默认情况下，`ul`为全角，即其宽度为可用宽度，即`width: 100%`. 您可以直接在`ul`元素上分配类和属性。

关于问题中考虑的其他方法，根据规范`u`，`small`等不能包含`ul`更多内容。`span`它们具有相同的内容模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:19:03.257

A`<div>`将是平等的。该`<span>`元素基本上是内联`<div>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:28:31.947

您可以使用 a`DIV`并将其显示为内联，以免中断当前流程。

HTML：

```
<div class="hightlight"> My highlighted text
   <ul class="dropdown">
       <li> .. </li>
       <li> .. </li>
       <li> .. </li>
    </ul>
</div> 
```

CSS：

```
.highlight {
    display: inline;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-11T17:18:28.213

如果你愿意，你可以使用 strong ，并在 css 中指定它，`.highlight { font-weight: normal }`这样它就不再是粗体了。

# html - _LoginPartial.cshtml 中的标记

> ID：15954866
> 
> 赞同：0
> 
> 时间：2013-04-11T17:13:03.900
> 
> 标签：html, asp.net-mvc

MVC 4 模板创建的 _LoginPartial.cshtml 文件包含一个`<text>`标签，如下所示：

```
<text>
    Hello, @Html.ActionLink(User.Identity.Name, "Manage", "Account", routeValues: null, htmlAttributes: new { @class = "username", title = "Manage" })!
    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" })) {
        @Html.AntiForgeryToken()
        <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
    }
</text> 
```

据我所知，`<text>`不是一个可识别的标签，那么为什么创建此代码的人要使用该标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T00:06:42.163

正如 OP 的评论者所说，`<text>`是表示文本的特殊 Razor 语法。正如[ScottGu 的博客](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)所解释的，这种语法可以用来代替`@:`语法。

# facebook-graph-api - 获取跨站点帖子的评论计数

> ID：15954868
> 
> 赞同：0
> 
> 时间：2013-04-11T17:13:09.853
> 
> 标签：facebook-graph-api, comments, facebook-comments

我有一个包含大量内容页面的网站，每个页面都有一个 Facebook 评论框（社交插件）。说，[http://subdomain.site.org](http://subdomain.site.org)

我想构建一个小部件，在该子域中搜索评论最多的页面并列出它们。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:14:58.380

很容易获得每个 url 的评论数

使用 fql：

```
SELECT url, comment_count, FROM link_stat WHERE url = " http://subdomain.site.org" 
```

您还可以同时获取所有 url 的评论计数（取决于 url 的数量）

```
SELECT url, comment_count,  FROM link_stat WHERE url in ("url1", "url2", "url3" ... ) 
```

来自脸书——`FQL can handle simple math, basic boolean operators, AND or NOT logical operators, and ORDER BY and LIMIT clauses.`

fql 不支持 CONTAINS() 或其他类似的东西来搜索子域中的所有 url。

请参见[此处](https://developers.facebook.com/docs/reference/fql/link_stat/)的 link_stat 表 - 您只能查询可索引的列

# qt - 实时网络摄像头 + 着色器效果

> ID：15954872
> 
> 赞同：1
> 
> 时间：2013-04-11T17:13:27.717
> 
> 标签：qt, shader, webcam, effects

我想创建一个应用程序，它基本上捕获网络摄像头提要并在其上应用自定义着色器效果，适用于 Windows。我真的可以使用 GLSL、HLSL、任何着色器语言。

我尝试使用 Qt，它有一些[非常好的 QML 和 Qt Mobility 示例](http://doc.qt.digia.com/qtmobility/video-qmlvideofx.html)，但不幸的是，它根本无法捕获我的网络摄像头！而且我并没有真正找到解决问题的方法。我正在使用 Windows 7 64 位。

所以我的问题是：我应该使用什么工具来快速构建一个简单的应用程序？语言，API，欢迎任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:09:06.740

我会使用[OpenCV](http://opencv.org/)从 WebCam 和 D3D 或 OpenGL 捕获图像，以从捕获的图像创建纹理。这是一个[例子](http://www.alecjacobson.com/weblog/?p=1875)。

之后，我将绘制一个带有纹理的全屏四边形，您可以在其中应用着色器效果。

OpenCV 可以使用 CMake 轻松构建，或者您可以下载[预构建版本](http://opencv.org/downloads.html)。

# clearquest - 使用 ClearQuest 自行注册

> ID：15954874
> 
> 赞同：0
> 
> 时间：2013-04-11T17:13:35.257
> 
> 标签：clearquest

对于某些数据库，我们需要允许使用 ClearQuest 进行自我注册。我们已将 CQ 与 LDAP 集成。欣赏你的想法。

*我认为的一种方法是在 CQ 启动屏幕中也有用于自我注册的链接，该链接将从用户那里获取所有相关信息，并通过 perl 在 CQ 中创建新帐户。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T09:10:22.103

下面实现。

允许用户使用仅用于新用户请求的特殊用户名登录

用户仅有权提交类型为“UserRequest”的新记录，这是一种有状态的记录类型，其中包含用户可以为其新用户请求输入数据的字段。您还可以限制用户创建或运行任何将其置于受限模式的查询。

提交操作将触发创建新用户、发送邮件并将其移至关闭状态。

# qt - Qt::WindowStaysOnTopHint 小部件始终处于活动状态

> ID：15954875
> 
> 赞同：2
> 
> 时间：2013-04-11T17:13:37.560
> 
> 标签：qt, user-interface

我有一个主窗口（QMainWindow）和一个带有标志 Qt::WindowStaysOnTopHint 的小部件，它提供辅助信息和选项（我们称之为助手）。如果我使用主窗口，然后单击任何其他应用程序，则该窗口将不再处于活动状态（isActiveWindow() == false）。但是，如果我先使用帮助程序，然后切换到其他应用程序/窗口（而不是主窗口），它会保持活动状态。如何处理从帮助窗口切换到其他应用程序？甚至 QApplication::activeWindow() 也因此返回 true。

.h 文件：

```
//! Popup structure that contains listw_popup that shows tips
struct PopupWidget {
    PopupWidget(QWidget*);

    QWidget *base;
    QListWidget *listw_popup;
};

class MainWindow : public QMainWindow
{
    ...
private :
    PopupWidget popup_spec;
    ...
} 
```

.cpp 文件：

```
PopupWidget::PopupWidget(QWidget* parent)
{
    base = new QWidget(parent, Qt::SplashScreen | Qt::WindowStaysOnTop);
    listw_popup = new QListWidget(base);
}

MainWindow::MainWindow(QWidget *parent) : ... popup_spec(this) ...
{
    ...
} 
```

当 popup_spec.base.show() 被调用时，这个小部件就会出现。如果我单击此小部件（意味着小部件变为活动状态），即使我切换到其他应用程序，它也会保持活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:41:47.120

好的，如果我正确地遵循您的要求，

`Qt::WindowStaysOnTopHint`当应用程序失去焦点时，您希望您的助手小部件（具有）被隐藏。

你可以尝试这样的事情：

在`MainWindow.cpp`构造函数中添加：

```
qApp->installEventFilter(this); 
```

并添加一个事件过滤器`MainWindow.cpp`（不要忘记在 .h 中声明）：

```
bool MainWindow::eventFilter(QObject* object, QEvent* event) {
  if (event->type() == QEvent::ApplicationDeactivate)
    popup_spec->base->hide();
  return QWidget::eventFilter(object, event);
} 
```

这将在切换应用程序时隐藏助手小部件。如果您希望反向功能在应用程序被激活时显示帮助程序小部件，请在同一事件过滤器中检查`QEvent::ApplicationActivate`并调用`popup_spec->base->show();`

# c# - 在应用程序中使用 AES 加密

> ID：15954876
> 
> 赞同：0
> 
> 时间：2013-04-11T17:13:38.183
> 
> 标签：c#, encryption, aes

这是我第一次使用 AES 加密，我有些困惑。我正在加密一些敏感数据（没有密码，只有姓名、地​​址、身份证号等）。我找到了一个很好的例子，说明如何在我的应用程序中实现 AES。我了解我提供了密码、盐、哈希算法和密码迭代来制作密钥。然后这会创建密文。我有几个问题是为什么 KeySize 会减少 8 倍？如果我想让其他人解密这个，我需要给他们什么？每次我加密新东西时，密码、盐和 IV 是否应该不同，如果是这种情况，我如何确保我想使用此信息的其他人始终知道这一点？

```
 public static string Encrypt(string PlainText, string Password, string Salt, string HashAlgorithm, int PasswordIterations, string InitialVector, int KeySize)
    {
        try
        {
            byte[] InitialVectorBytes = Encoding.ASCII.GetBytes(InitialVector);
            byte[] SaltValueBytes = Encoding.ASCII.GetBytes(Salt);
            byte[] PlainTextBytes = Encoding.UTF8.GetBytes(PlainText);
            PasswordDeriveBytes DerivedPassword = new PasswordDeriveBytes(Password, SaltValueBytes, HashAlgorithm, PasswordIterations);
            byte[] KeyBytes = DerivedPassword.GetBytes(KeySize / 8);
            RijndaelManaged SymmetricKey = new RijndaelManaged();
            SymmetricKey.Mode = CipherMode.CBC;
            ICryptoTransform Encryptor = SymmetricKey.CreateEncryptor(KeyBytes, InitialVectorBytes);
            MemoryStream MemStream = new MemoryStream();
            CryptoStream cryptoStream = new CryptoStream(MemStream, Encryptor, CryptoStreamMode.Write);
            cryptoStream.Write(PlainTextBytes, 0, PlainTextBytes.Length);
            cryptoStream.FlushFinalBlock();
            byte[] CipherTextBytes = MemStream.ToArray();
            MemStream.Close();
            cryptoStream.Close();
            MemStream.Dispose();
            cryptoStream.Dispose();
            Encryptor.Dispose();
            return Convert.ToBase64String(CipherTextBytes);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:16:32.070

```
byte[] KeyBytes = DerivedPassword.GetBytes(KeySize / 8); 
```

密钥大小除以 8，因为它通常指定为位数，但存储在字节数组中。

您保持相同的值取决于您的程序设计。在实践中，IV 应该每次都改变，但如果你选择，你可以保持 key 和 salt 不变。

我知道 IV 包含在流的输出中，因此您不必明确包含它来解密（它将从流中读取）。出于类似的原因，您也不应该包括盐。我相信解密密文所需的唯一值是密钥。我对此可能不正确。您始终可以编写解密器并查看需要传递的内容才能使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:24:21.367

`KeySize`是位。正如我们在任何普通机器上所知道的那样`1 byte = 8 bits`，因此划分。

你需要给别人什么才能解密数据？`Key`和`IV`(Initialization Vector) 就足够了。
也就是说——你通常是怎么做的？您将`AES`加密数据与一些非对称加密算法一起发送`Key`并加密。`IV`这为您提供了更高级别的保护——只有拥有私钥的人才能读取`Key`和`IV`使用它们来解密最有趣的数据。您使用生成的`Key`和`IV`相当长的长度来确保自己的安全。

为什么要这样做？因为非对称加密很慢（非常慢并且有充分的理由 - 更难破解），但是如果与长密钥一起使用，对称加密（如 AES）可以为您提供高安全性，同时速度非常快。将两者结合起来，您可以获得高水平的性能和安全性。

# python - CreatePdfDocument 与 MoinMoin 1.9.7 一起挂起

> ID：15954877
> 
> 赞同：1
> 
> 时间：2013-04-11T17:13:39.607
> 
> 标签：python, moinmoin

我在 Mac 上安装了 moinmoin 1.9.7，并添加了 CreatePdfDocument 操作。当使用一个非常基本的页面（仅包含字符串“此页面故意留空”）时，我能够调出 pdf 配置菜单

`http://somehost:8080/Page?action=CreatePdfDocument`

并且可以继续到服务器尝试生成 pdf 的位置 - 它重定向到：

`http://localhost:8080/Page`

然后提供以下html：

`<html><body marginwidth="0" marginheight="0" style="background-color: rgb(38,38,38)"><embed width="100%" height="100%" name="plugin" src="http://somehost:8080/Page" type="application/pdf"></body></html>`

moin-moin 服务器似乎挂在最后一个请求上，从不返回生成的 pdf。我在 CreatePdfDocument 操作源代码中添加了一些调试语句，我可以看到正在生成正确的 pdf。

有什么想法可能出了什么问题，或者我可以从哪里最好地开始调试这个问题？由于服务器在最后一个请求上挂起/没有响应，我无法弄清楚问题可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-22T19:20:47.933

不是您的问题的直接答案，但几年前，我使用 wkhtmltopdf 在 MoinMoin 中创建了自己的 PDF，因为我发现 CreatePdfDocument 之类的东西很麻烦。[如果您仍然感兴趣，请在此处](http://rileylink.net/moin.cgi/PDF.py)查看我的自助方法。几年来，它一直在令人满意地工作。另外，很抱歉不仅将其添加为评论，而且在此阶段我不允许这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-28T08:26:22.063

改变内部功能`send_pdf(self,data)`：

```
 'Content-Disposition': 'inline; filename="%s"' ... 
```

至

```
 'Content-Disposition': 'attachment; filename="%s"' ... 
```

# java - JTextField 通过 X11 转发挂起 GUI 更新

> ID：15954878
> 
> 赞同：2
> 
> 时间：2013-04-11T17:13:40.557
> 
> 标签：java, swing, jtextfield, freeze, x11-forwarding

我有一个 Swing GUI，允许用户根据需要将 JTextFields 添加到 GUI。当我在控制台（在 ubuntu 上）本地运行它时，一切正常。当我在使用 X11 转发的 Windows 机器上从 Cygwin 运行 GUI 时，一切开始正常，但是当我单击“添加”按钮放置一个GUI上新建JTextField，文本字段按预期显示，但我很长一段时间无法点击或修改它等。实际上，我也无法单击原始文本字段.. 30 多秒后，文本字段恢复生机并正常工作，直到我再次单击“添加”。

我在下面包含了一个 SSCCE 来演示该问题。同样，这似乎只在使用 X11-forwarding 运行时发生，如果我直接在 Ubuntu 控制台上运行，它会按预期工作，所以我不确定这是否可以对其他人进行重现。

最后一条信息——在我的真实程序中，单击添加按钮会导致添加一个 JComboBox 和两个 JTextField。组合框会立即响应，但 GUI 上的所有文本字段（新的和旧的）都不是。

HmmFrame.java：

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

public class HmmFrame extends JFrame
{
  ArrayList< JTextField > fields;
  JPanel mainPan;
  JButton addButton;

  HmmFrame()
  {
    super("Hmmm");
    JTextField curField;

    fields = new ArrayList< JTextField >();

    setLayout(new FlowLayout());

    mainPan = new JPanel(new FlowLayout());
    this.add(mainPan);

    addButton = new JButton("Add");
    addButton.addActionListener(new HmmListener());
    this.add(addButton);

    curField = new JTextField("Try");

    fields.add(curField);
    updateGUI();

    setVisible(true);
  }

  public void updateGUI()
  {
    mainPan.removeAll();
    for (JTextField curField : fields)
    {
      mainPan.add(curField);
    }
    pack();
  }

  public class HmmListener implements ActionListener
  {
    public void actionPerformed(ActionEvent actEv)
    {
      JTextField curField;

      curField = new JTextField("New One" + fields.size());
      fields.add(curField);
      updateGUI();
    }
  }
} 
```

嗯.java（驱动程序）

```
public class Hmm
{
  public static void main(String [] args)
  {
    HmmFrame hmmFrame;

    hmmFrame = new HmmFrame();
  }
} 
```

# ios - ARC：对象 - 委托关系

> ID：15954889
> 
> 赞同：2
> 
> 时间：2013-04-11T17:14:16.970
> 
> 标签：ios, objective-c, automatic-ref-counting

我正在开发一个***启用 ARC 的***项目。从视图控制器我推*MyClass*，

```
- (void)pushMyClass {
     MyClass *myClass = [[MyClass alloc] init];
     [self.navigationController pushViewController:myClass animated:YES];
} 
```

完成一些操作后，我正在弹出 MyClass。这里的问题是***MyClass 没有被释放***。以下是类的外观。

/* MyHelperClassDelegate */

```
@protocol MyHelperClassDelegate <NSObject>
- (void)helperDidFinishHelping:(MyHelperClass *)helper;
@end 
```

/* MyHelperClass 接口 */

```
@interface MyHelperClass : NSObject {
    __weak id <MyHelperDelegate> delegate;
}

@property(nonatomic, weak) id<MyHelperDelegate> delegate;

- (void)startHelping;

@end 
```

/* MyHelperClass 实现 */

```
@implementation MyHelperClass

@synthesize delegate;

- (void)dealloc {
    delegate = nil;
} 
```

/* 我的课 */

```
@interface MyClass : UIViewController <MyHelperClassDelegate> {
    MyHelperClass *helper;
}

@implementation MyClass {

    - (void)dealloc {
        helper.delegate = nil;
    }

    - (void)getHelp {
        helper = [MyHelperClass new];
        helper.delegate = self;
        [helper startHelping];
    }

    - (void)helperDidFinishHelping:(MyHelperClass *)helper {
    }
} 
```

*MyHelperClass使用**NSMutalbleURLRequest*和*NSURLConnection*调用 Web 服务来获取一些数据并将其保存到用户默认值。

这里要注意的一件事是，如果我注释行*helper.delegate = self;* ，然后 MyClass 被释放。

当 MyClass 从导航控制器中弹出时，如何使 MyClass 被释放？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:38:21.710

您的委托代码看起来是正确的（除了您使用 ivar，您没有显示 @synthesize 因此您可能同时拥有 _delegate 和委托）。很可能是其他东西保留了 MyClass。我建议您将 NSLog 添加到您的 MyClass dealloc。然后按下它，然后立即按下返回按钮，看看它是否已被释放。如果不是，那么仔细看看你在 viewDidLoad 等人中做了什么，并开始注释掉该代码的部分，直到你可以得到 dealloc。

另外，我假设您没有在推送 MyClass 对象的类中保留强引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T21:42:20.010

我同意 Chuck 的观点，即提供的代码不能说太多。但是对象未被释放的一个原因`MyClass`可能是它被您的`helper`对象保留，因为它`delegate`被声明为`strong`，并且该`MyClass`对象的属性`helper`也被声明为 strong。在这种情况下，您有一个保留周期，并且它们都不能被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T06:49:20.837

诀窍可能在于您使用`NSURLConnection`. 没有指定如何将此类与您提供的代码一起使用，但请注意[NSURLConnection 类参考](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/initWithRequest%3adelegate%3a)中引用的特殊注意事项：

> **特别注意事项：**在下载期间，连接保持对委托的强引用。当连接完成加载、失败或被取消时，它会释放该强引用。

# nhibernate - Fluent NHibernate 复合映射

> ID：15954891
> 
> 赞同：2
> 
> 时间：2013-04-11T17:14:19.737
> 
> 标签：nhibernate, fluent, fluent-nhibernate-mapping, composite-key

我正在尝试映射两个表：

*   第一个有一个 id (idA) 和一个带有另一个表的 id (idB) 的字段。
    *   另一个具有基于前一个 id (idB) 和另一个 (idB2) 的复合键

这个想法是第二个表包含对多行拆分的描述。

我当前的实现如下，但我无法检索连接所需的 partialDescription。我应该如何改变我的映射工作？有任何想法吗？:)

```
public class A
{
    long idA
    lond idB
    string fullDescription
}

public class B
{
    long idB
    long idB2
    strind partialDescription
}   

public class AMap : ClassMap<A>
{
    public AMap()
    {
        Table("A");
        Id(x => x.id).Column("idA").GeneratedBy.Native();
        Map(x => x.idB).Column("idB")
        HasMany(x => x.B).KeyColumn("idB").Inverse().Cascade.All().Not.LazyLoad();
    }
}

 public class BMap : ClassMap<B>
{
    public BMap()
    {
        Table("B");
        CompositeId()
            .KeyReference(x => x.A, "idB")
            .KeyProperty(x => x.idB2, "idB2");
        Map(x => x.partialDescription, "desc").CustomType("AnsiString");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:10:45.493

实际上，根据您的描述，您必须有另一种情况：

```
public class A
{   
    public virtual long Id { get; set; }
    public virtual IList<B> PartialDescriptions { get; protected set; }
    public string fullDescription
    {
        get
        {
            StringBuilder description = new StringBuilder();
            foreach (var partial in PartialDescriptions)
            {
                description.Append(partial);
            }

            return description.ToString();
        }
    }
}

public class B
{
    public virtual long Id { get; set; }
    public virtual long Id2 { get; set; }
    public virtual string Description { get; set; }
} 
```

然后，尝试像这样实现您的类映射：

```
public class BMap : ClassMap<B>
{
    public BMap()
    {
        Table("B");
        CompositeId()
            .KeyReference(x => x.Id, "idB")
            .KeyProperty(x => x.Id2, "idB2");
        Map(x => x.partialDescription, "desc").CustomType("AnsiString");
    }
}

public class AMap : ClassMap<A>
{
    public AMap()
    {
        Table("A");
        Id(x => x.Dd).Column("idA").GeneratedBy.Native();
        HasMany(x => x.PartialDescriptions)
            .KeyColumn("idB")
            .Inverse()
            .Cascade.All()
            .Not.LazyLoad();
    }
} 
```

**注意**：我没有尝试编译此代码。我只指望你能拿下将军。

我建议您查看Fluent NHibernate 的[入门部分以获取更多信息。](https://github.com/jagregory/fluent-nhibernate/wiki/Getting-started)

# php - 菜单图像对齐

> ID：15954893
> 
> 赞同：0
> 
> 时间：2013-04-11T17:14:23.610
> 
> 标签：php, html, css, wordpress

正如您从[http://calgarydefencelaw.com/](http://calgarydefencelaw.com/)看到的，菜单中的图像在“BIO”之前显示正常，然后在“法律”区域，它下降了一个像素。

任何人都可以帮助为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:19:35.610

您在菜单中有不同的图片高度。前两个菜单项是 65 像素高，而其他三个是 64 像素。使它们都具有相同的高度应该可以解决这个问题。

# multithreading - 并行和并发术语

> ID：15954895
> 
> 赞同：1
> 
> 时间：2013-04-11T17:14:26.233
> 
> 标签：multithreading, concurrency, parallel-processing

我目前正在学习一些涉及这些概念的课程，在某些情况下，术语“并发”和“并行”似乎可以互换使用，在某些情况下似乎存在差异。这些术语是同义词吗？如果不是，并发性和并行性的定义是什么？这些概念有何相似/不同之处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:29:33.170

是，有一点不同。

并行性：并行执行任务的能力

甚至可以通过使用时间共享的单个处理单元来完成并发性。这会给你一种并行执行的事情的错觉，但事实并非如此。

[http://www.haskell.org/haskellwiki/Parallelism_vs._Concurrency](http://www.haskell.org/haskellwiki/Parallelism_vs._Concurrency)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T09:37:08.480

并发是一次处理很多事情。并行性是关于一次做很多事情。并发正在搜索代码中的独立部分。而并行性是关于执行这些部分。

# android - 如何保存从相机拍摄的图像并将其显示到列表视图 - 因“IllegalStateException”而崩溃

> ID：15954896
> 
> 赞同：0
> 
> 时间：2013-04-11T17:14:29.913
> 
> 标签：android, sqlite, listview

我对如何做到这一点感到困惑..

对于我使用的数据库：

```
public void insertImage(byte[] bytes) {
         ContentValues cv = new ContentValues();

         cv.put("imageblob", bytes);
         Log.e("inserted", "inserted");
         dbHelper.getWritableDatabase().insert("Image", "imageblob", cv);

     }

     public byte[] getImage(Cursor c) {
         return (c.getBlob(1));
     } 
```

数据库助手：

```
 ...
 public static final String KEY_COMMENTS = "comments";
public static final String KEY_IMAGE = "imageblob";

private static final String SCRIPT_CREATE_DATABASE = "create table "
 + DATABASE_TABLE + " (" + KEY_ROWID
   + " integer primary key autoincrement, " + KEY_TITLE
  + " text not null, ......+KEY_COMMENTS+" text not null,"+KEY_IMAGE+"  imageblob BLOB);"; 
```

我的物品：

```
public class myItems {
     ....
     String comments;
 byte[] imageblob;
      public byte[] getImage() {
      return imageblob;
     }

 public void setImage(byte[] imageblob) {
      this.imageblob = imageblob;
    } 
```

现在，我在 MainActivity 中有列表视图。在另一个活动 ShowList 中，我有一个用于拍照的按钮：

```
 case R.id.photobtn:   
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
    startActivityForResult(cameraIntent, CAMERA_REQUEST); 
    break; 
```

在 onActivityResult ：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) { 

                  if(resultCode == CAMERA_REQUEST){      
                        Bitmap photo = (Bitmap) data.getExtras().get("data");
                        imageView.setImageBitmap(photo);
                        ByteArrayOutputStream stream = new ByteArrayOutputStream();
                        photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
                        byte[] byteArray = stream.toByteArray();

                        sqlHandler.insertImage(byteArray);
                  } 
```

我的适配器：

公共类 myAdapter 扩展 BaseAdapter{

```
...

    public myAdapter(Context context, ArrayList<myItems> list) {
        this.context = context;
        this.setItems(list);
    }

        @Override
    public View getView(int position, View convertView, ViewGroup arg2) {
        myItems theItems = getItems().get(position);

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.showadapterlist, null);

        }

           ...
           TextView Comments = (TextView) convertView.findViewById(R.id.text_comments);
        Comments.setText(theItems.getComments());

           ImageView myImage=(ImageView) convertView.findViewById(R.id.myimage);
        myImage.setImageBitmap(getImageFromBLOB(theItems.getImage()));

           return convertView;
          }

    public static Bitmap getImageFromBLOB(byte[] mBlob)
      {
        byte[] bb = mBlob;
        return BitmapFactory.decodeByteArray(bb, 0, bb.length);
     }

    public ArrayList<myItems> getItems() {
        return items;
    }

    public void setItems(ArrayList<myItems> items) {
        this.items = items;
    } 
```

我的问题：

1）列表视图位于 MainActivity。照片取自 ShowList 活动。在 ShowList 活动中，我有：

```
case R.id.OKbtn:

String mycomments = comments.getText().toString();              
byte[] myimageblob=null;
 String query = "INSERT INTO MEMOR(title,...comments,imageblob)" +
" values (..+ mytitle + "....+mycomments +  "','" +myimageblob+  "')"   sqlHandler.executeQuery(query);

  Intent k=new Intent(this,MainActivity.class);
  setResult(RESULT_OK,k);
   finish(); 
```

我应该如何处理“imageblob”值？

2）在 MainActivity （列表视图所在的位置）我有：

```
 ...
    myItems theItems = new myItems();   
                                 theItems.setID(c1.getString(c1.getColumnIndex("_id")));
                             theItems.setTitle(c1.getString(c1.getColumnIndex("title")));

      ...
                                 theItems.setComments(c1.getString(c1.getColumnIndex("comments")));
  byte[] blob=c1.getBlob(c1.getColumnIndex("imageblob"));
   ByteArrayInputStream inputStream = new ByteArrayInputStream(blob);
   Bitmap bitmap = BitmapFactory.decodeStream(inputStream);         

   myList.add(theItems); 
```

我应该如何处理图像块？

现在，当我启动我的应用程序时，我的应用程序在一行中出现“IllegalStateException”崩溃

> " byte[] blob=c1.getBlob(c1.getColumnIndex("imageblob"));"

. 如果我尝试 c1.setImage 它不起作用。

- - - - - - - - - 新的 - - - - - - - - - - - - - - - - -------------------- 在一项活动中：

```
case R.id.photobtn:

                    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                    startActivityForResult(cameraIntent, CAMERA_REQUEST); 
                    break;

  protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
               super.onActivityResult(requestCode, resultCode, data);

                      if(requestCode == CAMERA_REQUEST){      

                         if (resultCode==RESULT_OK){

                            Bitmap photo = (Bitmap) data.getExtras().get("data");
                            imageView.setImageBitmap(photo);
                            ByteArrayOutputStream stream = new ByteArrayOutputStream();
                            photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
                            blobvalue = stream.toByteArray();

                             Bundle extras = new Bundle();
                             Intent k=new Intent(this,MainActivity.class);  
                             extras.putParcelable("Bitmap", photo);
                             k.putExtras(extras);
                         }
                      }

                      if (resultCode == RESULT_CANCELED) {    

                      }        

           } 
```

在适配器中：

```
public View getView(int position, View convertView, ViewGroup arg2) {
            myItems theItems = getItems().get(position);

            if (convertView == null) {
                LayoutInflater inflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = inflater.inflate(R.layout.showadapterlist, null);          

            }

            ImageView myImage=(ImageView) convertView.findViewById(R.id.myimage);

            final Bitmap image;
            if(theItems.getImagemyItems() != null)
            {
                byte []temp = theItems.getImagemyItems();
                image = BitmapFactory.decodeByteArray(temp, 0, temp.length);
                myImage.setImageBitmap(image);
            }
            else
            {
                image = BitmapFactory.decodeResource(context.getResources(), R.drawable.ic_launcher);
                myImage.setImageBitmap(image);
            } 
```

在我的物品中：

```
public class myItems {
     String id;
     ...
     byte[] imageblob;

     public String getID() {
      return id;
     }
     ....

         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:35:27.867

根据您创建数据库语句

```
 private static final String SCRIPT_CREATE_DATABASE = "create table "
 + DATABASE_TABLE + " (" + KEY_ROWID
 + " integer primary key autoincrement, " + KEY_TITLE
 + " text not null, ......+KEY_COMMENTS+" text not null,"+KEY_IMAGE+"  imageblob BLOB);"; 
```

有人提到你

```
 "+KEY_IMAGE+"  imageblob BLOB 
```

所以列值是“imageblob imageblol BLOB”语法明智它不是一个正确的sql语句。所以只需从那里删除“imageblob”并尝试一下，它可能会解决你的问题....

# jquery - jQuery - 更改选项的文本和值（选择）

> ID：15954901
> 
> 赞同：0
> 
> 时间：2013-04-11T17:14:39.963
> 
> 标签：jquery, select

我只是无法让这个工作......

选项的文本已更改，但值保持不变？

```
<select id="uid1485">
<option value="kein Bild">kein Bild</option>
<option value="Bild (2,50 Euro)">Bild (2,50 Euro)</option>
</select>

jQuery("#uid12").change(function(){
if (jQuery("#uid12").val() == "STAZ + Guller Kombi (3,00 Euro Aufschlag)") {

  jQuery("#uid1485 option[value='Bild (2,50 Euro)']").text("Bild (5,00 Euro)");
  jQuery("#uid1485 option[value='Bild (2,50 Euro)']").val("Bild (5,00 Euro)");

} else {

}
}); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:26:15.167

我想你想要这样的[东西](http://jsfiddle.net/vZJFb/)？

只需将您的 if 条件更改为

`if ($("#uid12 option:selected").val() == "STAZ + Guller Kombi (3,00 Euro Aufschlag)")`

# iis-7 - DNS 记录未指向公共地址 10.11.12.252

> ID：15954903
> 
> 赞同：0
> 
> 时间：2013-04-11T17:14:44.567
> 
> 标签：iis-7

我在尝试使用 IIS7 设置第二个站点时有点卡住了。

我已经有一个使用 SSL 证书 portal.domain.com 的站点设置。

我想设置第二个站点，该站点使用与 turkey.domain.com 相同的 443 SSL 证书。

我已经为 2 个局域网设置了服务器，门户位于 254，而土耳其需要位于 252。

我创建了一个新的正向查找区域并为 252 添加了一个 A 主机。

当我尝试设置新站点时，我需要将土耳其的 DNS 记录更改为 252，但此时我很困惑，因为 A 主机设置为 252。

我不确定是否有人需要更多详细信息，请问我可以提供。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:00:02.367

添加了第二个 inetput 文件夹并将主机标头指向该文件夹...现在能够在同一端口上托管两个子站点。

# google-chrome - Favicon 在 Chrome 中不起作用

> ID：15954907
> 
> 赞同：1
> 
> 时间：2013-04-11T17:14:53.503
> 
> 标签：google-chrome, favicon

我尝试用于网站的图标显示在 Firefox 选项卡上，但没有显示在 Chrome 选项卡上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-28T15:16:46.537

Yes, there are some problem with the chrome while you work on a local machine. Try uploading your webpages to any web hosting site and there with `http://` this will work fine with every browser.

IE may also not work for this on local machine. Try it in Firefox of safari

Copy the code, this will surely work:

```
<head> <link rel = "shortcut icon" href=".\favicon.ico"> </head> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-11T18:50:04.597

看看：[https ://stackoverflow.com/a/16375622/1581725](https://stackoverflow.com/a/16375622/1581725)

如果有人第一次看到这个问题，再次在这里：

1）清除你的chache。[http://support.google.com/chrome/bin/answer.py?hl=en&answer=95582](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95582)并测试另一个浏览器，比如说 safari。你是如何导入网站图标的？

2）你应该如何添加它：

正常的网站图标：

```
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /> 
```

PNG/GIF 图标：

```
<link rel="icon" type="image/gif" href="favicon.gif" />
<link rel="icon" type="image/png" href="favicon.png" /> 
```

3）另一件事可能是**chrome无法显示**网站图标的问题，**如果它是本地的**（未上传到网络服务器）。

4）尝试将其重命名为`favicon.{whatever}`to`{yourfaviconname}.{whatever}`但我建议您仍然使用正常的图标。这解决了我在 IE 上的问题。

5）找到另一个解决方案，效果很好！我只是将我的网站图标添加为 Base64 编码图像直接在标签内，如下所示：

```
<link href="data:image/x-icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AIaDgv+Gg4L/hoOC/4aDgv+Gg4L/hoOC/4aDgv+Gg4L/hoOC/4aDgv////8A////AP///wD///8A////AP///wCGg4L/////AP///wD///8A////AP///wD///8A////AP///wCGg4L/////AP///wD///8A////AP///wD///8AhoOC/////wCGg4L/hoOC/4aDgv+Gg4L/hoOC/4aDgv////8AhoOC/////wD///8A////AP///wD///8A////AIaDgv////8A////AP///wD///8A////AP///wD///8A////AIaDgv////8A////AP///wD///8A////AP///wCGg4L/////AHCMqP9wjKj/cIyo/3CMqP9wjKj/cIyo/////wCGg4L/////AP///wD///8A////AP///wD///8AhoOC/////wBTlsIAU5bCAFOWwgBTlsIAU5bCM1OWwnP///8AhoOC/////wD///8A////AP///wD///8A////AP///wD///8AU5bCBlOWwndTlsLHU5bC+FOWwv1TlsLR////AP///wD///8A////AP///wD///8A////AP///wD///8A////AFOWwvtTlsLuU5bCu1OWwlc2k9cANpPXqjaT19H///8A////AP///wD///8A////AP///wD///8A////AP///wBTlsIGNpPXADaT1wA2k9dINpPX8TaT1+40ktpDH4r2tB+K9hL///8A////AP///wD///8A////AP///wD///8A////ADaT1wY2k9e7NpPX/TaT16AfivYGH4r23R+K9u4tg/WQLoL1mP///wD///8A////AP///wD///8A////AP///wA2k9fuNpPX5zaT1zMfivYGH4r23R+K9uwjiPYXLoL1+S6C9W7///8A////AP///wD///8A////AP///wD///8ANpPXLjaT1wAfivYGH4r22x+K9usfivYSLoL1oC6C9esugvUA////AP///wD///8A////AP///wD///8A////AP///wD///8AH4r2zx+K9usfivYSLoL1DC6C9fwugvVXLoL1AP///wD///8A////AP///wD///8A////AP///wD///8A////AB+K9kgfivYMH4r2AC6C9bEugvXhLoL1AC6C9QD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAugvXyLoL1SC6C9QAugvUA////AP//AADgBwAA7/cAAOgXAADv9wAA6BcAAO+XAAD4HwAA+E8AAPsDAAD8AQAA/AEAAP0DAAD/AwAA/ycAAP/nAAAoAAAAIAAAAEAAAAABACAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/////wD///8AhISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP8AAAAA////AISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AISEhP+EhIT/////AP///wCEhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/4SEhP+EhIT/hISE/wAAAAD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP/4+vsA4ujuAOLo7gDi6O4A4ujuAN3k6wDZ4OgA2eDoANng6ADZ4OgA2eDoANng6ADW3uYAJS84APj6+wCEhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/9Xd5QBwjKgAcIyoRnCMqGRwjKhxcIyogHCMqI9wjKidcIyoq3CMqLlwjKjHcIyo1HCMqLhogpwA/f7+AISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AISEhP+EhIT/xtHcAHCMqABwjKjAcIyo/3CMqP9wjKj/cIyo/3CMqP9wjKj/cIyo/3CMqP9wjKj/cIyo4EdZawD///8AhISE/4SEhP////8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AhISE/4SEhP+2xNMAcIyoAHCMqJhwjKjPcIyowHCMqLFwjKijcoymlXSMpIh0jKR6co2mbG+OqGFqj61zXZO4AeXv9gCEhIT/hISE/////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wCEhIT/hISE/6i5ygDF0dwAIiozACQyPQAoP1AALlBmADhlggBblLkGVJbBPFOWwnxTlsK5U5bC9FOWwv9TlsIp3erzAISEhP+EhIT/////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAALztHAAAAAAAuU2sAU5bCClOWwkNTlsKAU5bCwFOWwvhTlsL/U5bC/1OWwv9TlsL/U5bC/ViVvVcXOFAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAALDhEALVFoAFOWwjpTlsL6U5bC/1OWwv9TlsL/U5bC/1OWwvxTlsLIV5W+i2CRs0xHi71TKYzUnyuM0gIJHi4AAAAAAAAAAAAAAAAA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAACtNZABTlsIAU5bCD1OWwv1TlsL6U5bCxFOWwoRVlsBHZJKwDCNObAA8icJAKYzUwimM1P8pjNT/KYzUWCaCxgALLUsAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAApS2EAU5bCAFOWwgBTlsIAU5bCNVOWwgg+cJEAIT1QABU/XQA1isg4KYzUuymM1P8pjNT/KYzU/ymM1LAti9E0JYvmDhdouAAAAAAAAAAAAP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AFyk1AE+PuQBTlsIAU5bCAER7nwAmRVoADBojABRFaQAwi80xKYzUsymM1P8pjNT/KYzU/ymM1LgsjNE2MovXFB+K9MUfivbBH4r2BgcdNAARQH8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAQIDABIgKgAPGiIABRMcABdQeQAti9AqKYzUrCmM1P8pjNT/KYzU/ymM1MAqjNM9HmqmACWK7SIfivbZH4r2/x+K9vsuiudAFE2YACB69AD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAABhQfABtejgAoitEAKYzUACmM1JQpjNT/KYzU/ymM1MgpjNREH2mgABlosQAfivY0H4r26R+K9v8fivbyKIrtR0CB1SggevTQIHr0Nv///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAACBwsAJX2+ACmM1AApjNQAKYzUGSmM1MYpjNRMInWxABNHdQAcfuEAH4r2Sx+K9vUfivb/H4r25iGK9DE2gt4EIHr0yyB69P8gevTQ////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAAAAAAAAOMUsAKYzUACmM1AApjNQAJX6/ABE7WgAUWJwAH4r2AB+K9mYfivb9H4r2/x+K9tYfivYfG27RACB69HsgevT/IHr0+yB69DL///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAfaJ4AJ4XKABVGagAKKkoAG3raAB+K9gEfivaEH4r2/x+K9v8fivbCH4r2EB133wAgevQsIHr0+SB69P8gevSAIHr0AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAUSGwAFERwAElCOAB+J9QAfivYAH4r2lx+K9v8fivb/H4r2qR+K9gYefuoAIHr0BSB69M4gevT/IHr00CB69AUgevQA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAkqSgAfivYAH4r2AB+K9gAfivZLH4r2/R+K9osfivYBH4PwACB69AAgevSAIHr0/yB69PkgevQwIHr0ACB69AD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAAAAAAAEEiAAB+K9gAfivYAH4r2AB+K9gAfivYsH4r2AB+G8wAge/QAIHr0MCB69PsgevT/IHr0eyB69AAgevQAIHr0AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAXZrYAH4r2AB+K9gAfivYAH4r2AB+K9gAfifUAIHz0ACB69AcgevTQIHr0/yB69MwgevQEIHr0ACB69AAgevQA////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wAAAAAAAAAAAAAAAAAAAAAAAAIDAB6E6gAfivYAH4r2AB+K9gAfivYAH4r2ACB+9QAgevQAIHr0fCB69P8gevT5IHr0LCB69AAgevQAIHr0ACB69AD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAAAAAAAAAAAAAAAAAABBAcAEUqDAB6E6wAfivYAH4r2AB+K9gAggPUAIHr0ACB69AAgevQTIHr0qCB69HYgevQAIHr0ACB69AAgevQAIHr0AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP////////////////wAAH/8AAB//P/+f/z//n/8wAZ//MAGf/z//n/8wAZ//MAGf/zAAn/8/gJ//+AD///AAf//wEH//+cA///8AH//8BB///BgH//xwB///4If//4EP//+CD///hh///9w////4P///+H////j////////////" rel="icon" type="image/x-icon" /> 
```

为此使用此页面：[http ://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

# jquery - 从 ajax $.post 注册变量

> ID：15954908
> 
> 赞同：0
> 
> 时间：2013-04-11T17:14:57.423
> 
> 标签：jquery, ajax, post

我有一个我希望成功发布到我客户的 json API 的帖子（因为它可以正确发送数据），但是我很难获取该数据并将其用作变量来更新我的网站...

```
 $.post(takeurl, function(data) {            
        var newPrice = json.data.newPrice;
        alert('hi' );
    }, "json");

    $(this).parents("tr").find(".large-detail").html(newPrice);

    return false;
}); 
```

[小提琴](http://jsfiddle.net/dilettante/8Jx78/)

基本上，在这个例子中，我想用我的 API 调用`large-detail`中的`newPrice`数据进行更新，返回如下：

```
{"data":{"newPrice":80,"lockedInPrice":47},"errors":[],"success":true,"code":200} 
```

想法？我就是无法`newPrice`通过。我希望我犯了一个愚蠢的语法错误，即使它会让我觉得自己像个白痴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:16:25.307

您需要在回调函数中更新它：

```
 var $self = $(this);

    $.getJSON(takeurl, function(data) {            
        var newPrice = data.data.newPrice;
        $self.parents("tr").find(".large-detail").html(newPrice);
    });

    return false;
}); 
```

现在，它在 ajax 函数返回之前和`newPrice`变量范围之外执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:34:40.080

问题是由于返回的 JSON 中有一个错误，它的前缀是`<pre>`和`</pre>`其他工程师测试的代码，但是当我尝试使用它时返回了一个 parseerror。谢谢@paulpro。

# css - 你能拍下应用于页面的样式的 CSS 快照吗？

> ID：15954911
> 
> 赞同：1
> 
> 时间：2013-04-11T17:15:06.423
> 
> 标签：css, performance, dom, google-chrome-devtools

我正在处理一些 javascript 属性加载和修改各种 DOM 元素上的类的页面。我想知道是否有办法“停止”处理以查看正在应用的内容。如果有时间线功能，那就太棒了，类似于 Chrome 开发工具中的 Javascript 时间线。

如果这已被回答或在技术上不是 CSS 问题，我深表歉意。我认为其他人将从对解决方案的简单解释中受益。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:16:22.820

我在 Twitter 上询问了 Paul Irish，他说要在 Sources 选项卡中使用“Local Modifications”。选择 Source 侧边栏内容节点时，您可以右键单击它以找到此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-31T19:50:31.310

您可以通过 DOM Change Breakpoints 或 MutationObservers 监控 DOM 更改。

有关更多信息，请参阅此相关帖子：[https ://stackoverflow.com/a/42914274/1669860](https://stackoverflow.com/a/42914274/1669860)

# c - 使用 libgit2 创建和提交标签

> ID：15954915
> 
> 赞同：0
> 
> 时间：2013-04-11T17:15:15.177
> 
> 标签：c, git, libgit2

我一直在这里和那里使用 libgit2，试图更好地理解 Git 的功能。为此，我一直在实施一个小型迷你客户端作为学习练习，并且进展顺利。

但是，我似乎无法弄清楚如何提交使用该`git_tag_create`函数创建的标签。我想我需要将它添加到索引中，但我也不知道该怎么做。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:17:38.697

标签未提交。标签是指向提交的单独对象，类似于您不必“提交分支”的方式，它只在您创建后就存在。

在创建标签的那一刻，您就完成了，您可以将其定义推送到远程存储库。

# priority-queue - 如何初始化优先队列

> ID：15954916
> 
> 赞同：0
> 
> 时间：2013-04-11T17:15:16.203
> 
> 标签：priority-queue

我正在阅读 API [http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)。我还是有点失落。

哪种初始化方法正确？

```
PriorityQueue(Caller caller_pq); 
```

或者

```
static PriorityQueue<Caller> caller_pq;
caller_pq = new PriorityQueue<Caller>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:34:55.430

如果`caller_pq`是您要保留的变量，`PriorityQueue`那么第二个变量 -- -- 是正确的。
`static PriorityQueue<Caller> caller_pq;
caller_pq = new PriorityQueue<Caller>();`

很难说出您的第一个选项是什么意思`PriorityQueue(Caller caller_pq)`。如果您打算创建一个`PriorityQueue`包含类型的元素`Caller`（这就是我认为您想要的），那么不，那是行不通的。
如果`Caller`implements`Collection`或 extends`PriorityQueue`那么它将生成一个`PriorityQueue`包含 in 的元素`caller_pq`（只要你在它前面加上`new`）。

# outlook - CRM Outlook 插件：从哪里获取 idMso 值列表？

> ID：15954926
> 
> 赞同：0
> 
> 时间：2013-04-11T17:15:32.473
> 
> 标签：outlook, dynamics-crm-2011, ms-office, dynamics-crm, outlook-addin

我需要一个 idMso 值列表来进一步自定义标准邮件和约会 Outlook 窗口上的 CRM 功能区。

具体来说，我对这些控件感兴趣：

“CRM”组 “取消跟踪”按钮 “设置相关”按钮

这是我正在谈论的功能区组的屏幕截图：

![截屏](https://i.stack.imgur.com/WzXf1.png)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:21:06.640

`XML`您可以在 CRM 2011 SDK中找到标准功能区定义，文件夹为`resources\exportedribbonxml`.

顺便说一句，我建议使用编辑器进行功能区修改，一个是

[用于 Dynamics CRM 2011 的功能区工作台](http://www.develop1.net/public/page/Ribbon-Workbench-for-Dynamics-CRM-2011.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-30T10:43:31.270

转到 Outlook >> 选择文件 >> 选择 customizeRibbon 选项。在*右侧*窗格中，只需从下拉列表中选择邮件选项卡/所有选项卡/工具选项卡，然后将鼠标悬停在控件名称上。悬停时，您找到的名称是该控制按钮的 idMso 值。

# php - Zend Framework：布局中的多个模块

> ID：15954927
> 
> 赞同：0
> 
> 时间：2013-04-11T17:15:32.860
> 
> 标签：php, zend-framework, layout, module, controllers

如何在我的布局中从不同的控制器/模块执行多个操作？

我试过这个：

```
<div id="login"><?php $x=new User_LoginController; $x->LoginAction() ?>

<div id="news"><?php $x=new Site_NewsController; $x->ShowAction() ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:31:22.403

我没有得到你到底想要什么？

我猜可能是你想从布局中调用这个函数（动作）来显示什么是

从那里返回到布局......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T14:15:03.310

您需要实现[视图助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)，特别是[placeholder()](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)视图助手。

例如，要在应用程序的任何或所有页面中呈现登录表单，我们从布局或视图脚本中的表单***占位符开始：***

```
<!--layout.phtml-->
<div>
    <?php echo $this->layout()->login . "\n"?>
</div> 
```

我使用[动作助手](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)来准备要显示的表单：

```
<?php

/**
 * Prepares login form for display
 */
class My_Controller_Action_Helper_Login extends Zend_Controller_Action_Helper_Abstract
{

    /**
     * @return \Application_Form_Login
     */
    public function direct()
    {
        $form = new Application_Form_Login();
        //this is the url of the action this form will default too
        $form->setAction('/index/login');

        return $form;
    }
} 
```

现在可以从任何控制器或前端控制器插件设置占位符：

```
public function preDispatch()
    {
        $this->_helper->layout()->login = $this->_helper->login();
    } 
```

现在登录表单将显示在此控制器中用作其布局的*任何操作中。*`layout.phtml`我会让你自己发现插件。

使用带占位符的助手通常是完成您想要的事情的首选方式。但是，如果您绝对必须在另一个视图中显示一个动作，您可以使用[Action 视图助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.action)，请注意性能可能会受到影响。

```
<div id="login">
     <?php echo $this->action('login', 'login', 'user'); ?>
</div> 
```

# codeigniter - 在 CodeIgniter 的 HMVC 中，两个或多个具有相同名称“admin”的已加载控制器无法正常工作

> ID：15954932
> 
> 赞同：3
> 
> 时间：2013-04-11T17:16:10.330
> 
> 标签：codeigniter

结构如下所示：

```
modules
    admin
        controllers/
            admin.php
        models/
            admin_model.php
        views/
            admin/
                index.php
    categories/
        controllers/
            admin.php
            categories.php
        models/
            categories_model.php
        views/
            admin/
                index.php
                menu.php
            frontpage.php
    posts/
        controllers/
            admin.php
            posts.php
        models/
            posts_model.php
        views/
            admin/
                index.php
                menu.php
            frontpage.php 
```

管理控制器如下所示：

```
class Admin extends Backend_Controller {

    function __construct()
    {
         parent::__construct();
         $this->load->model('categories_model');
    }

    public function index()
    {
             // index stuff
    }

    public function _menu()
    {
         $this->load->view('categories/admin/menu');
    }

} 
```

当我从另一个模块视图中调用它时，如下所示：

```
<?php echo Modules::run('categories/admin/_menu'); ?> 
```

它不起作用;(

但是，这有效：

```
<?php echo Modules::run('categories/categories'); ?> 
```

所以我的问题是如何使用名称**admin**而不是名称作为模块名称和方法“**菜单**”加载控制器

知道如何让它在 CodeIgniter 中工作吗？

**编辑：**

**我发现如果我将控制器名称从“admin”更改为其他名称，例如“blablacontroller”，它就会神奇地开始工作。**

**我已经有另一个名为“admin”的模块，所以这可能是个问题吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:52:28.827

在 PHP 中，您只能使用名称声明一个类。例如。除非这些类位于不同的命名空间中，否则您只能拥有一个 Admin 类。可能发生的是：

`admin/controllers/admin.php`声明然后稍后在您的脚本执行`categories/controllers/admin.php`中尝试声明并抛出一个`admin/controllers/admin.php`已经存在的错误，`Admin`如果某处的某些代码说它应该使用哪个类`new Admin()`。

如果这两个类都需要，则需要重命名一个类，或者重组代码，以便在单个执行周期中只声明其中一个类。我不太确定您使用的 HMVC 东西是否允许命名空间，但您可以考虑以这种方式扩展它。如果不是，则可能将两个管理类重命名为更具体的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T08:35:18.197

如果我是对的，您正在使用模块化扩展 - HMVC。所以我的答案基于以下脚本：[https](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/src/868e97533562e910d8263af22750985d57004baa/third_party/MX/Modules.php?at=default) ://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/src/868e97533562e910d8263af22750985d57004baa/third_party/MX/Modules.php?at=default 。

这仅在您使用 PHP 5.3 或更高版本时才有效。

*   通过添加命名空间 admin 来声明一个命名空间（admin、category、post）中的每个 Admin 类***；***在类键之前。
*   创建 *third_party/MX/Modules.php* 的子类并扩展 run 和 load 方法。如果无法扩展，则必须替换方法：/
*   这还不是全部，但那些简单的字符串操作应该在现有逻辑之前的加载方法中。
*   模块应该使用以下语法运行：***Modules::run('categories\admin/_menu');***

    ```
    $module = 'categories\admin';
    if (strpos($module, '\\') !== false)
    {
        // Extract namespace
        $ns = explode('\\', $module);

        // Get the top level namespace to locate the controller
        $top_level_ns = reset($ns); //

        // Remove namespace from module
        $module = array_pop($ns);

        // Class location
        $path = APPPATH . $top_level_ns . '/controllers/' . $module;

        // It's better to extend the load_file method
        include_once $path . EXT;

        // Full class name with namespace, we use explode on $module in case of sub folders
        $controller = '\\' . implode('\\', $ns) . '\\' . ucfirst(end(explode('/', $module))) . CI::$APP->config->item('controller_suffix');

        // create and register the new controller
        $alias = strtolower($controller);
        self::$registry[$alias] = new $controller($params);

        var_dump('Full class name: ' . $controller, 'Class path: ' . $path);
    } 
    ```

# zend-framework - zend framework 2 - 使用全局方法

> ID：15954951
> 
> 赞同：0
> 
> 时间：2013-04-11T17:17:03.150
> 
> 标签：zend-framework, zend-framework2

我需要一个我在视图、水合器、一些控制器等中使用的功能......我可以把它放在哪里？

可以维护 PHP OOP 和 zend 2 架构的最佳补充在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:07:42.287

听起来您应该查看[Zend\ServiceManager](http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.quick-start.html)。您可以在服务管理器中注册工厂（函数）和服务，并从技术上从应用程序中的任何位置访问它们。您的类需要实现 ServiceLocatorAwareInterface 才能访问服务管理器，或者您可以将服务传递/注入到您的类/模型/水合器/等中。

# python - 如何下载使用python推送到浏览器的文件？

> ID：15954952
> 
> 赞同：3
> 
> 时间：2013-04-11T17:17:04.163
> 
> 标签：python, download, scrapy

我想使用 python 下载一个 zip 文件。

使用这种类型的 url， [http](http://server.com/file.zip) ://server.com/file.zip，使用 urllib2.urlopen 并将其写入本地文件非常简单。

但就我而言，我有这种类型的网址： [http://server.com/customer/somedata/download?id=121&m=zip](http://server.com/customer/somedata/download?id=121&m=zip)，在表单验证后启动下载。

准确地说，在我的情况下，我想将它部署在 heroku 上，所以我不能使用用 C++ 构建的 spynner。此下载是在使用 scrapy 进行抓取后启动的。

从浏览器下载效果很好，我得到了一个很好的 zip 文件及其名称。使用 python 我只是得到 html 和 header 数据......

有没有办法从 python 中的这种类型的 url 获取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:22:27.717

本网站提供 JavaScript，然后调用下载。您别无选择，只能：a）在模拟的浏览器环境中评估 JavaScript 或 b）手动解析 JS 的功能，然后在 python 中重新实现。例如，提取 URL 和下载密钥的字符串，可能调用 AJAX 请求，最后下载文件

我一般推荐[Mechanize](https://pypi.python.org/pypi/mechanize/)用于与网页相关的自动化，但它也不能处理 JavaScript，所以我想如果你想选择计划 b)，你可以坚持使用 Scrapy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:24:29.677

当您在浏览器中进行下载时，打开开发者控制台的网络选项卡并记录什么 HTTP 方法（可能是 POST）、POST 参数、cookie 以及所有其他属于验证的内容；然后使用库来复制它。

# ios - 即使视口元标记中的分辨率宽度为 1536，ipad 3 设备宽度是否始终为 768？

> ID：15954953
> 
> 赞同：4
> 
> 时间：2013-04-11T17:17:04.773
> 
> 标签：ios, meta-tags, viewport, ipad-3, metatag

我正在尝试了解 ios 设备的视口元标记。我创建了一个测试页面，在其中插入了一个 862 像素宽的图像。所以我的视口元标记为：

```
<meta name="viewport" content="width=device-width,  initial-scale=1.0, minimum-scale: .5, maximum-scale: 5.0"> 
```

然而在 ipad 3 上，分辨率宽度为 1536 像素，并且视口设置为与 ipad 3 相同数量的可见区域，862 像素的图像被放大了，宽度比可见区域稍大。所以我必须水平滚动才能看到图像的其余部分。

这让我认为设备宽度返回 768 像素，这说明了 862 像素图像的水平滚动的一点点额外。为什么要这样做？我必须考虑某种像素密度吗？

**更新**

我尝试将宽度设置为数字宽度，与图像的确切宽度相同（在本例中为“862”）。所以网页是 862X206，与图像相同，但它与将宽度设置为设备宽度完全相同。

**更新 2**

我创建了一个非常简单的页面，由于某种原因，一个视口为 862 像素的空白页面导致我的 ipad 3 上的水平和垂直滚动，代码：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=862, initial-scale=1.0">
</head>

<body style="width:100%; padding:0; margin:0">

</body>
</html> 
```

这种滚动导致视口不适合可视区域或屏幕尺寸。我不明白。任何见解将不胜感激。谢谢你。** 注意 ** 我忘记将填充和边距重置为 0，它添加了 8 像素的边距。

**更新 3**

好吧，本来我以为 device-width 会返回 ipad 3 的 1536 像素的分辨率宽度。显然，它返回的屏幕尺寸是 768 像素。

任何大于 768 的视口宽度都会让我在 ipad 3 上滚动。为什么？如果您有一个 1024 像素的页面，并且您想将其放入 ipad 3 的可见区域中。您将宽度设置为 1024，初始比例为 1，这不应该使 1024px 视口适合可视区域？

**解决方案**

好的，所以，如果你想让每个设备都知道如何缩放你的页面，你所做的就是忽略初始比例。

因此，如果我只设置宽度，使用设备宽度或数值，而忽略初始比例，它会自动为您计算缩放。它只是工作。

我的困惑在于宽度是什么意思，宽度是指应用比例之前的宽度，所以如果我说：

```
<meta name="viewport" content="width=device-width,  initial-scale=1.0, minimum-scale: .5, maximum-scale: 5.0"> 
```

缩放前的视口宽度是768，如果网页正文是862px，在应用1.0的比例因子后，内容乘以1.0，862*1.0，所以**现在**的视口宽度以该比例因子缩放的内容的宽度，862px。我希望我理解这一点。这就是我的困惑所在，这就是宽度的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T17:48:53.180

iPad 3 的宽度为 768px，其中每个 px 代表 2 个物理像素。据我所知，您可以在 Javascript 中说明它，但不能在视口中说明（您可能不想这样做，因为那些 768 像素的物理尺寸与早期 iPad 上的物理尺寸相同）。

# asp.net-mvc - 当 type = file 时在 TextBoxFor 中设置默认值

> ID：15954954
> 
> 赞同：1
> 
> 时间：2013-04-11T17:17:05.760
> 
> 标签：asp.net-mvc, filepath, html.textboxfor

我正在使用`@Html.TextBoxFor`加载并可能在编辑页面上设置附件文件路径。我可以打开文件浏览器窗口并重置该值。但是，我无法获取与页面一起加载的当前值或默认值。这是我现在使用的语法：

```
@Html.TextBoxFor(model => item.Filepath, new { @value = item.Filepath, @type = "file" }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:40:59.037

如果我要正确理解这个问题，那么您似乎正在尝试将文件路径的默认值设置为打开。简短的回答是你不能这样做。原因是如果你能够在代码中设置文件路径，你可以恶意地将路径设置为你想从用户机器上窃取的东西，并通过客户端代码动态提交帖子。用户必须明确说出他想浏览的地方。这是一项安全功能。

# xml - 使用 LINQ 按多个 XML 节点分组

> ID：15954955
> 
> 赞同：0
> 
> 时间：2013-04-11T17:17:07.350
> 
> 标签：xml, linq

```
<myDocument>
    <country code="US">
        <region code="CA">
            <city code="Los Angeles">
                <value>a</value>
                <value>b</value>
                <value>c</value>
            </city>
            <city>
                ...
            </city>
        </region>
        <region>
            ...
        </region>
    </country>
    ...
</myDocument> 
```

我想最终得到一个唯一“值”（a、b、c 等）的列表，其中包含国家代码、区域代码、城市代码的列表，显示该值出现的所有位置。如何使用 LINQ to XML 完成这种选择？

```
Result
======
Key : a
Value : List of country/region/city codes
    US, CA, Los Angeles
    US, CA, San Fransisco
    US, AL, Hatford

Key : b
    etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:21:42.413

![结果是这样的：](https://i.stack.imgur.com/QEfdU.png)

```
var grouped = from country in doc.Elements("country")
              from region in country.Elements("region")
              from city in region.Elements("city")
              from value in city.Elements("value")

              group value by new
              {
                   Value = value.Value,
                   Country = country.Attribute("code").Value,
                   Region = region.Attribute("code").Value,
                   City = city.Attribute("code").Value
              };

Dictionary<string, List<Tuple<string, string, string>>> dic = (from grouping in grouped
select new KeyValuePair<string, List<Tuple<string, string, string>>>(
     grouping.Key.Value,
     (from occurence in grouping 
      select new Tuple<string, string, string>(
          grouping.Key.Country, 
          grouping.Key.Region, 
          grouping.Key.City)
      ).ToList()))
.ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

这样做。痛苦地格式化它。希望有帮助。它创建了一个字典，其中键是值，值是包含所有值出现的国家、地区、城市的元组列表。

# vba - 如何在word文档中查找特定单词并使用vba代码将单词粘贴到该单词附近？

> ID：15954958
> 
> 赞同：0
> 
> 时间：2013-04-11T17:17:20.810
> 
> 标签：vba

谁能告诉，如何在word文档中找到一个特定的单词并使用vba代码将一个单词粘贴到该单词附近？

我已经打开了文档。所以我只想找到这个词并在它附近粘贴一个词。我已经使用 movedown 和 moveright 方法完成此操作以转到该特定单词。但它更依赖于光标的位置。

谢谢，

婆罗提

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:38:24.603

我在访问中使用它，我不知道它是否适合你。

```
Dim mWord As Word.Application
Dim mDoc As Word.Document
Dim mRange As Word.Range

Set mDoc = mWord.Documents.Open("YourPath")
mDoc.SaveAs "Where you want to save"

Set mWord = New Word.Application
mWord.Visible = False

DoEvents
Set mRange = mWord.ActiveDocument.Content

mRange.Find.Execute FindText:=TextToFind1, ReplaceWith:=TextToFind1 & TextToReplace1, Replace:=wdReplaceAll
mRange.Find.Execute FindText:="TextToFind2", ReplaceWith:="TextToReplace2", Replace:=wdReplaceAll
Set mRange = Nothing

mDoc.Save

'Display
mWord.Visible = True

Shell "Explorer.exe /n,/e," & "DirectoryToOpen", vbNormalFocus 
```

祝你好运

# r - 为什么 GenABEL 和 Plink 中的 Hardy-Weinberg 测试不同？

> ID：15954965
> 
> 赞同：0
> 
> 时间：2013-04-11T17:18:00.507
> 
> 标签：r, genetics

当我使用这个 Plink 命令时：

```
Plink --file filename --hardy 
```

将为每个标记创建一个具有不同 p 值的新文件 filename.hwe，相比之下`GenABEL`：

```
library(GenABEL)
...
snpSummary<-summary(gtdata(filename))
hwe_test<-snpSummary$Pexact 
```

为什么我会得到相同标记的其他 p 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:42:09.967

HWE有不同的测试。例如卡方拟合优度 vs Fishers 精确检验 vs 杂合子过剩/不足。

我不确定，但您应该查看每个软件的手册，以确认它们首先使用相同的测试。

# java - 这是正确使用工厂方法吗

> ID：15954968
> 
> 赞同：3
> 
> 时间：2013-04-11T17:18:14.540
> 
> 标签：java, design-patterns, graph, factory-pattern

据我了解，工厂设计模式用于创建对象而不是构造函数

在上一个问题中，我解释了我的情况：
我有一个复杂的网络，表示为超图超图顶点来自各种类型：图像，标签....
我应该创建数千个顶点，手动创建它会很困难！所以我认为在这种情况下工厂模式可能会对我有所帮助

我使用 yUML 绘制了两个可能的图表，但我无法确定最适合我的情况

![第一张图](https://i.stack.imgur.com/iVWs9.png)

![第二张图](https://i.stack.imgur.com/8b4R0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:26:42.150

实际上，两者都描述了工厂方法模式。

但是，正如我们所说的多工厂，第一个映像是一种更好、耦合更少、更可扩展、更易于维护的方法。

`AbstractVertexFactory`只是，在第一张图中，由于您有一个很小的图表，最好从到放置一条虚线`Vertex`，因为这些类之间存在[依赖关系。](http://www.informit.com/articles/article.aspx?p=1398623&seqNum=12)

此外，第二张图片缺少所有虚线依赖线。这**并没有使这个图不正确**，它仍然描绘了工厂方法模式，唯一的缺点是没有提到的线条更加混乱。

**为什么第一个比第二个更好的解释**：

*   **较少耦合**：在第一种情况下，如果您更改/删除`TagVertex`，`ImageFactory`（以及可能的其他工厂）的客户不会受到影响。
*   **更可扩展且更**易于**维护**：相同的原则。如果您更改产品（`Vertex`在您的场景中）类，则不会影响其他工厂的客户。您也可以自由添加工厂，而无需更改现有代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:33:59.957

图一是正确的选择。

抽象工厂用于创建相关或依赖对象的系列。在这种情况下，Abstract veretx factory（通过使用 Tag 或 Image factory 具体类）将分别创建具体产品（Tag Vertex 和 Image vertex）。

在第二张图的情况下，产品和抽象工厂之间没有关系。抽象工厂应该创建具体产品（在这种情况下，通过使用具体工厂类 Image Vertex 和 Tag Vertex）

# c# - 将复选框列表项的选定值分配给列表框

> ID：15954971
> 
> 赞同：0
> 
> 时间：2013-04-11T17:18:21.387
> 
> 标签：c#, checkboxlist

我正在开发一个小型企业应用程序来显示从数据库中检索到的报告，并且我有一个由四个复选框组成的复选框列表，也是一个组合框。现在，我在页面加载时将所需信息从数据库检索到包含 4 个项目的组合框，这没关系。不仅如此，还可以从数据库中检索复选框上的复选框列表 DataTextField，这也可以。

至于我在这个问题上的问题，假设我有一个组合框，其中包含 2 个项目、名称和年龄以及 4 个以 George、Michael、23、33 命名的复选框。

这里，23 和 33 属于复选框的 Name(combobox.selectedindex[0]) 项，George、Michael 属于组合框的 Age 项。然后，我想在列表框上显示，当单击组合框的名称项时，Michael 和 George 的复选框会自动出现在屏幕上，当单击按钮时，复选框的选定值会显示在 nMme 和 Age 的列表框上相同逻辑中的组合框项目。

我尝试了几次，但未能实现这个目标。如何做到这一点，你能在我的这个问题上给我指路吗？非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:25:29.867

简单的方法是将 Name 或 Age 作为 checkBoxListItem.Tag 添加到相应的值，并且每次更改组合框中的选择时，您都会遍历所有 checkBoxItems 并使用相应的标签检查那些并取消选中其他的。

# rss - 如何从黑莓级联的任何给定网站 url 中自动检测 rss url（如果可用）？

> ID：15954975
> 
> 赞同：0
> 
> 时间：2013-04-11T17:18:30.723
> 
> 标签：rss, blackberry-10, blackberry-cascades

所以我有一个 webview 显示用户定义的网站。我想自动检测该网址是否包含任何 rss 提要并将其发布在标签/文本区域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:56:58.807

最直接的方法是将 HTML 解析为 DOM 文档，然后遍历文档寻找定义 RSS 链接的节点。您可以尝试使用[QXmlSimpleReader](https://developer.blackberry.com/cascades/reference/qxmlsimplereader.html)但这可能会令人沮丧，因为大多数 HTML 不是格式良好的 XML，因此您必须处理异常。

在回答这个[问题](https://stackoverflow.com/questions/2179477/best-way-to-parse-html-in-qt)时，推荐了以下[SourceForge 项目](http://sourceforge.net/projects/sgml-for-qt/)。这可能值得一看。

# javascript - 如何更改剑道绑定的 html 输入的值

> ID：15954977
> 
> 赞同：10
> 
> 时间：2013-04-11T17:18:39.677
> 
> 标签：javascript, kendo-ui, kendo-grid

我有一个带有自定义弹出窗口的 kendoui 网格，用于编辑。

在这个弹出窗口中，我有一个绑定到网格值的输入：

```
<input type="text" class="k-input k-textbox" id="test" data-bind="value:SearchFilter"> 
```

这工作正常。单击网格中的编辑，更改文本框中的值，然后该值传播到网格。

但现在我想在 javascript 中更改文本框的值。所以我现在有了这个：

```
$('#test').val("testvalue"); 
```

这确实改变了文本框的值，但是在保存时新值不会传播到网格。我猜是因为文本框上没有发生更改事件。

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-11T17:31:29.903

您需要模拟更改事件。试试这个代码：

```
$('#test').val("testvalue").change(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-13T04:47:13.990

我尝试了上述答案，但对我不起作用。尽管价值确实发生了变化，但观点并未反映这一事实。这对我有用：

```
 var myvar = $("#myid").data("kendoNumericTextBox");
       myvar.value("newValue");
       myvar.trigger("change", { value: myvar.value() }); 
```

# coordinate-transformation - ECEF 来自方位角、仰角、范围和观察者 Lat、Lon、Alt

> ID：15954978
> 
> 赞同：3
> 
> 时间：2013-04-11T17:18:40.237
> 
> 标签：coordinate-transformation, astronomy, satellite, pyephem

我正在尝试编写一个基本的 python 脚本，该脚本将从给定位置跟踪用 tle 定义的给定卫星。我不是一个 asto/orbital 人，但我正在努力变得更聪明。

当我尝试将方位角、仰角、范围值转换为 ECEF 位置时遇到问题。我正在使用 PyEphem 来获取观察值，并使用 spg4 来获取要验证的真实位置。我也在使用网站[http://www.n2yo.com/?s=25544](http://www.n2yo.com/?s=25544)来验证值。

我通过以下方式获得观察到的方位角、仰角和范围：

```
def get_ob(epoch, sv, obsLoc):
    site = ephem.Observer()
    site.lon = str(obsLoc.lat)   # +E -104.77 here
    site.lat = str(obsLoc.lon)   # +N 38.95   here
    site.elevation = obsLoc.alt # meters    0 here
    #epoch = time.time()
    site.date = datetime.datetime.utcfromtimestamp(epoch)

    sat = ephem.readtle(sv.name,sv.tle1,sv.tle2)
    sat.compute(site)

    az       = degrees(sat.az)
    el       = degrees(sat.alt)
    #range in m
    range    = sat.range
    sat_lat  = degrees(sat.sublat)
    sat_long = degrees(sat.sublong)
    # elevation of sat in m
    sat_elev = sat.elevation

    x, y, z    = aer2ecef(az,el,range,38.95,-104.77,80 / 1000) 
```

报告的方位角、仰角和范围与网站相符。我正在转换为 ECEF 职位：

```
def aer2ecef(azimuthDeg, elevationDeg, slantRange, obs_lat, obs_long, obs_alt):

    #site ecef in meters
    sitex, sitey, sitez = llh2ecef(obs_lat,obs_long,obs_alt)

    #some needed calculations
    slat = sin(radians(obs_lat))
    slon = sin(radians(obs_long))
    clat = cos(radians(obs_lat))
    clon = cos(radians(obs_long))

    azRad = radians(azimuthDeg)
    elRad = radians(elevationDeg)

    # az,el,range to sez convertion
    south  = -slantRange * cos(elRad) * cos(azRad)
    east   =  slantRange * cos(elRad) * sin(azRad)
    zenith =  slantRange * sin(elRad)

    x = ( slat * clon * south) + (-slon * east) + (clat * clon * zenith) + sitex
    y = ( slat * slon * south) + ( clon * east) + (clat * slon * zenith) + sitey
    z = (-clat *        south) + ( slat * zenith) + sitez

    return x, y, z 
```

但是，当我绘制它时，位置很偏离（地球的错误一侧）。我从网站和 spg4 中获得的位置匹配，所以我相信这些是正确的。

我不确定错误是在我的转换方法中，还是我使用了错误的数据进行转换。我在这里的答案中找到了该方法：[Get ECEF XYZ given starting coordinates, range, azimuth, and elevation](https://stackoverflow.com/questions/3612749/get-ecef-xyz-given-starting-coordinates-range-azimuth-and-elevation)

任何关于我下车的建议或建议将不胜感激。以下是测试输入/输出：

我正在测试的卫星是 ISS 和 directv10（一颗固定的，一颗移动的 - 具有可用于验证的互联网跟踪）：

```
0 Direct10
1 31862U 07032A   13099.15996183 -.00000126  00000-0  10000-3 0  1194
2 31862 000.0489 046.9646 0000388 001.7833 103.5813 01.00271667 21104
0 ISS
1 25544U 98067A   13112.50724749  .00016717  00000-0  10270-3 0  9148
2 25544  51.6465  24.5919 0009906 171.1474 188.9854 15.52429950 26067 
```

观察站lla：

```
[38.95 -104.77 0.0] 
```

结果：

```
sv: ISS ephem observed response(km)              @ epoch: 1365630559.000000 : [344.067992722211, -72.38297754053431, 12587.123][degrees(sat.az), degrees(sat.alt), sat.range]
sv: ISS ephem reported llh location(km)          @ epoch: 1365630559.000000 : [-41.678271938092195, -129.16682754513502, 421.06290625][degrees(sat.sublat0, degrees(sat.sublong), sat.elevation]
sv: ISS ephem calculated xyz location(km)        @ epoch: 1365630559.000000 : [688.24385373837845, 6712.2004971137103, -704.83633267710866][aer2ecef(az,el,range,obsLoc.lat,obsLoc.lon,obsLoc.alt)]
sv: ISS ephem llh from calc xyz location(km)     @ epoch: 1365630559.000000 : [-6.001014287867631, 84.1455657632957, 12587.123][ecef2llh()]
sv: ISS ephem xyz from reported llh location(km) @ epoch: 1365630559.000000 :[-3211.7910504146325, -3942.7032969856118, -4498.9656030253745][llh2ecef(lat,long,elev)]
sv: ISS spg84 ecef position(m) @ epoch: 1365630559.000000 : [-3207667.3380003194, -3936704.823960199, -4521293.5388663234]
sv: ISS spg84 ecef2llh(m)      @ epoch: 1365630559.000000 : [-41.68067424524357, -129.17349987675482, 6792812.8704163525]
sv: Direct10 ephem observed response(km)              @ epoch: 1365630559.000000 : [320.8276456938389, -19.703680198781303, 43887.572][degrees(sat.az), degrees(sat.alt), sat.range]
sv: Direct10 ephem reported llh location(km)          @ epoch: 1365630559.000000 : [0.004647324660923812, -102.8070784813048, 35784.688][degrees(sat.sublat0, degrees(sat.sublong), sat.elevation]
sv: Direct10 ephem calculated xyz location(km)        @ epoch: 1365630559.000000 : [-18435.237655222769, 32449.238763035213, 19596.893001978762][aer2ecef(az,el,range,obsLoc.lat,obsLoc.lon,obsLoc.alt)]
sv: Direct10 ephem llh from calc xyz location(km)     @ epoch: 1365630559.000000 : [27.727834453026748, 119.60200825103102, 43887.572][ecef2llh()]
sv: Direct10 ephem xyz from reported llh location(km) @ epoch: 1365630559.000000 :[-9346.1899009219123, -41113.897098582587, 3.4164105611003754][llh2ecef(lat,long,elev)]
sv: Direct10 spg84 ecef position(m) @ epoch: 1365630559.000000 : [-9348605.9260040354, -41113193.982686974, -14060.29781505302]
sv: Direct10 spg84 ecef2llh(m)      @ epoch: 1365630559.000000 : [-0.019106864351793953, -102.81049179145006, 42156299.077687651] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:01:58.340

我真的很愚蠢，但发现了问题......

我正在将站点中的纬度和经度转换为 PyEphem 模型（请参见第 3-4 行）...转换目前有效。

让这成为孩子们的教训。使用好的变量名......不要像我一样懒惰，浪费时间试图找到一个不存在的数学错误......

# c# - 为存储过程调用实现线程池

> ID：15954981
> 
> 赞同：3
> 
> 时间：2013-04-11T17:18:54.827
> 
> 标签：c#, sql-server, multithreading, stored-procedures

首先，让我先说我是 C# 初学者。我的背景主要是数据库。我正在开发一个项目，其中将频繁调用 C# 服务器，然后调用各种存储过程（大约 20 个左右）以从 SQL Server DB 检索数据。现在，C# 服务器已设置为进行同步调用。虽然 SP 调用又快又小，但我们仍然希望实现一个线程池来处理大量用户和同时请求。

我的问题：

1.  如何实现线程池？最有可能的是，线程池将在 500 左右开始，但可能会根据应用程序的使用而增长。

2.  如何将 SP 调用添加到线程池。现在我的 SP 调用如下所示：

    ```
    int SPCall(string param1, string param2)
    {
      string MyConnString = "...";
      SqlConnection MyConn = new SqlConnection(MyConnString);
      MyConn.Open();
      SqlCommand SPCommand = new SqlCommand("wh_SP");
      SPCommand.Connection = MyConn;
      SPCommand.Parameters.Add(...) = param1;  
      SPCommand.Parameters.Add(...) = param2;  

      SPCommand.CommandType = System.Data.CommandType.StoredProcedure;
      SPCommand.ExecuteNonQuery();
      int outPut = (int)SPCommand.Parameters["@OUTPUT"].Value;
      return outPut;
     } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:45:29.043

如评论中所述，您应该使用 .NET ThreadPool 而不是实现自己的。更好的是，使用较新的[.NET Parallel 库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)并将它们中的每一个分块到一个任务中。您将使用相对较少的代码更好地控制并发处理方式。

```
public void PerformWork()
{
    // setup your inputs
    IEnumerable<string> inputs = CreateYourInputList();

    //  Method signature: Parallel.ForEach(IEnumerable<TSource> source, Action<TSource> body)
    Parallel.ForEach(inputs, input =>
        {
            // call your code that issues the stored procedure here
            this.SPCall(input);
        } //close lambda expression
    ); //close method invocation 

    // Keep the console window open in debug mode.
    Console.WriteLine("Processing complete. Press any key to exit.");
    Console.ReadKey();
} 
```

# jquery - 使用 jquery 动态创建画布（在内存中动态创建）

> ID：15954989
> 
> 赞同：0
> 
> 时间：2013-04-11T17:19:22.970
> 
> 标签：jquery, html, html5-canvas

我一直在研究有关动态画布创建（[1](https://stackoverflow.com/questions/8522608/add-canvas-dynamically-with-jquery)、[2](https://stackoverflow.com/questions/10652513/html5-dynamically-create-canvas)）的类似问题，但他们假设画布已经在 DOM 中。但是如果我想动态创建和绘制画布（换句话说，DOM 中没有画布或任何其他父元素）怎么办？

与此类似的东西（不起作用）：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>canvas test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="js/jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            for (var i = 0; i < 3; i++) {
                var canvas = $('<canvas />').attr({
                        id: "canvas" + i,
                        width: 20,
                        height: 20
                    });

                var ctx = $(canvas)[0].getContext('2d');
                ctx.fillStyle = "#000";
                ctx.fillRect(0, 0, 20, 20);
                $("#events").append("<tr><td>" + canvas[0].outerHTML + "</td></tr>");
            }
        });
    </script>
</head>
<body>
    <table id="events">
        <tr>
            <th>Canvas</th>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:27:05.463

没有任何反应，因为您没有附加画布本身，而是附加了它的标记。画布的内容不能用 HTML 表示，因此标记只是一个空的画布标签。

因此，不要附加外层HTML，而是附加元素本身。

```
$("<tr><td></td></tr>").appendTo( '#events' ).find( 'td' ).append( canvas ); 
```

演示：http: [//jsfiddle.net/2Lr5h/](http://jsfiddle.net/2Lr5h/)

# linqpad - 如何在自身之外安装 LinqPad 驱动程序？

> ID：15954995
> 
> 赞同：0
> 
> 时间：2013-04-11T17:19:42.530
> 
> 标签：linqpad

有人知道如何在 linq pad 之外安装 Oracle 驱动程序吗？电脑无法上网，需要从其他电脑下载驱动，然后安装。

我下载了驱动，但是不知道怎么安装。我的操作系统是 windows server 2008 R2。

任何人都可以帮助我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:33:26.533

您可以在[此处](http://www.linqpad.net/RichClient/DataContextDrivers.aspx)下载驱动程序。

要安装它，请单击**添加连接**、**查看更多驱动程序**，然后单击**浏览**按钮。

# mysql - MySql 查询未知列错误

> ID：15954996
> 
> 赞同：-3
> 
> 时间：2013-04-11T17:19:46.423
> 
> 标签：mysql, sql

```
选择一个数据
    FROM 认证 a，认证 b
    LEFT JOIN 认证 c ON a.id = c.id
```

为什么此查询会产生“#1054 - 'on 子句'中的未知列 'a.id'”

```
选择一个数据
    FROM 认证
    LEFT JOIN 认证 c ON a.id = c.id
```

没关系？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T17:30:41.893

`ON`问题是您正在混合 JOIN 语法，因此您使用的别名在条件中不可用。您不应该混合 JOIN 语法。

您的查询应该是：

```
SELECT a.data 
FROM Authentications a
CROSS JOIN Authentications b 
LEFT JOIN Authentications c 
   ON a.id = c.id 
```

或者，如果您要加入`b`，那么您将使用：

```
SELECT a.data 
FROM Authentications a
INNER JOIN Authentications b 
  on a.id = b.id
LEFT JOIN Authentications c 
   ON a.id = c.id 
```

的`JOIN`优先级高于逗号，因此 的别名`a`不可用于`ON`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:23:23.023

首先查询您将 b 加入 c 并在 a 上设置条件。

没有加入 a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:29:22.660

'on' 子句必须使用正在连接的表中的列 - 例如 SELECT a.data FROM Authentications a, Authentications b LEFT JOIN Authentications c ON b.id = c.id where a.id = b.id

或类似的东西

# magento - 根据列表页面中的数量对 Magento 可配置产品进行排序

> ID：15954997
> 
> 赞同：1
> 
> 时间：2013-04-11T17:19:47.570
> 
> 标签：magento, configurable-product

如何根据列表页面中的数量对可配置产品进行排序？目前我的默认排序顺序是在目录产品列表中分配的“位置”。现在我想根据产品数量更改默认排序顺序。

有人可以帮我吗？