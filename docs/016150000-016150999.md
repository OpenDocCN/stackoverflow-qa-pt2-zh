# StackOverflow 问答 16150000-16150999

# paypal - 贝宝沙盒 - 订阅按钮 - 测试帐户 - 链接无效

> ID：16150000
> 
> 赞同：2
> 
> 时间：2013-04-22T14:45:37.683
> 
> 标签：paypal, paypal-sandbox, paypal-ipn, paypal-subscriptions

我正在尝试使用 PayPal API测试一个**非常简单的订阅按钮。**

首先，我得到的错误是：

`The link you have used to enter the PayPal system is invalid. Please review the link and try again.`

**我正在使用**来自沙盒的 PayPal 自己的代码来生成按钮。我所做的*唯一*更改是用于调试目的的 IPN 回调。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="hosted_button_id" value="SUGR2DWLNM38U">
    <input type="image" src="https://www.sandbox.paypal.com/en_US/GB/i/btn/btn_subscribeCC_LG.gif" border="0" name="submit">
    <img src="https://www.sandbox.paypal.com/en_GB/i/scr/pixel.gif" width="1" height="1">
</form> 
```

*注意：根据文档，沙盒表单**操作**是正确的（整个事情是自动生成的）*

是的，**我正在使用我创建的测试帐户登录**：

![在此处输入图像描述](https://i.stack.imgur.com/qfJ79.png)

在阅读了似乎去错地方的可怕文档和网页之后，我遇到了一个难题，无法弄清楚我做错了什么。我有：

*   设置一个新的贝宝商业账户。
*   设置一个新的沙盒业务帐户。
*   在沙盒帐户上，我创建了一个测试个人帐户
*   在沙盒帐户上，我创建了一个测试订阅按钮
*   测试订阅按钮添加了 IPN 到我正在`tail -f`处理的 php 文件的回调

根据文档，这就是我所需要的，但是单击按钮会给我上面的错误。

我错过了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:14:48.617

您可以尝试创建一个非托管的明文按钮，以便我可以查看您的按钮传递的内容以确定导致错误的原因。创建按钮时，在按钮创建过程的第 2 步取消选中在 PayPal 上保存按钮的选项。然后在生成代码后，在同一页面上单击链接以删除代码保护。这应该为您提供按钮的 HTML 代码。这是我需要查看的内容，以便我可以测试您的按钮并确定导致问题的原因。

要检查的一件事是确保您正在使用的卖家帐户已通过验证，并且您与测试帐户一起使用的电子邮件地址已在测试沙盒卖家帐户上链接和验证。

# c# - MATLAB 的图形性能

> ID：16150011
> 
> 赞同：1
> 
> 时间：2013-04-22T14:46:20.943
> 
> 标签：c#, winforms, performance, matlab, graph

我正在使用 C# 和 VisualStudio 开发 WindowsForm。该程序启动一个在 Matlab 中完成的 .exe，在这个 .exe 完成后，它会在几个 .mat 文件中生成大量数据，我必须将这些数据绘制在图表中（不是同时）。用户选择这个“信号”中的 1 个，它必须被绘制。

根据配置的不同，每个信号的值可以从 ~10.000 到 ~500.000，当我用这些数据量绘制信号时，图表控件的响应不流畅，放大/缩小也需要很长时间。当同时绘制更多信号时，控制变得更加不稳定。

另一方面，如果我绘制来自 Matlab 本身的信号，则几乎可以立即完成这项工作。缩放效果完美，您可以根据需要绘制尽可能多的信号，因为性能保持不变。

为什么 Matlab 和 C# 之间存在如此大的性能差异？

我可以做些什么来提高 C# 性能？

编辑：我使用 VisualStudio 提供的标准图表控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:54:15.357

你没有说你正在使用什么图表控件，但它肯定不是为大型数据集设计的。为您的绘图使用基于 OpenGL 的东西。

以我的经验，我对超过 3000 万个数据点的 Matlab 平移和缩放性能*不佳*感到非常恼火，而 C#+OpenGL 实现的帧速率高出 10 倍。

（除其他原因外，MatLab 似乎完全无法剔除远离屏幕的数据集部分——例如，如果你有一个单调递增的时间轴，这是一个非常简单的优化，可以获得巨大的好处）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:55:46.987

你得到的数据比代表它的像素多。听起来您的图表控件正在采用蛮力方法：绘制每个数据点，即使控件上每列像素有 1000 个数据点。

无论您是否可以访问图表控件的源代码，解决方案都是一样的：您必须减少绘图调用的数量。您需要将数据过滤到更易于管理的大小。在折线图的情况下，如果您的控件是 500 像素宽，那么它不应该尝试绘制超过 500 条线。

如果您可以访问图表控件的代码，那么您可以让它在内部减少数据集。否则，您需要在外部管理数据集的抽象视图，并将视图而不是完整数据集传递到图表控件中。当用户更改缩放级别等时，视图将需要更新......不幸的是，取决于底层图表控件是否知道自动将数据集裁剪为可见的内容，平移可能有点难以实现。每当用户平移视图时，您都需要自己执行剪辑，但还需要在每个轴的末端包含数据点，以便滚动条保持一致。

首先确保原始数据集按 X 轴值排序，从而让自己更轻松。排序只需要进行一次，然后您就可以相对快速地构建任意缩放级别的视图。AO(log N) 搜索可以识别可见范围开始和结束处的索引，从那里提取 X 个样本以供您查看是微不足道的。如果已知原始数据是在 X 轴上以固定间隔获取的，那么您甚至不需要 O(log N) 搜索；您可以直接计算可视范围的索引。

# ruby-on-rails - 基于不同 Rails 版本的应用程序共享身份验证（单点登录）

> ID：16150016
> 
> 赞同：1
> 
> 时间：2013-04-22T14:46:32.413
> 
> 标签：ruby-on-rails, ruby, authentication, single-sign-on

目前我为我的客户开发了新的应用程序，需要将它与旧的应用程序集成。我当前的应用程序基于`Ruby 1.9.3`最新的 Rails 版本。旧应用程序写在`Ruby 1.8.7`和类似的东西上`rails 3.0.11.`

我很感兴趣，如何让我的应用程序重用旧应用程序的身份验证逻辑。因此，如果用户已经登录旧应用程序，我的应用程序应该认为该用户也已经登录了我的应用程序。旧应用程序使用标准 Rails 身份验证机制。

所以对我来说完美的变体将只是接受来自旧应用程序的令牌和 cookie。

# visual-studio-2010 - 刷新服务引用不起作用

> ID：16150018
> 
> 赞同：1
> 
> 时间：2013-04-22T14:46:40.790
> 
> 标签：visual-studio-2010, wcf, service-reference

我正在使用 Visual Studio 2010 中的 .net 邮件客户端/服务。

我现在遇到的问题是，如果我更改我的服务，客户端不会注意到这些更改。这就是我进行的方式：

我更改了服务中的一个接口，然后在客户端刷新服务引用。有一个带有进度条的小窗口，它向我显示引用现在已刷新。

但是当我想使用新的实现时，我仍然看不到任何变化。例如：

早些时候：`void putFile(byte[] contents, String name);`

现在：`void putFile(myFile file);`

然后我刷新了服务引用并尝试在客户端使用该方法。但我得到的只是旧界面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:55:57.987

所以，我会试试这个：

使用[SOAPUI](http://www.soapui.org/)查看它是否也看到旧的定义。如果是这样，您没有正确更新服务。如果没有，那么就会发生一些奇怪的缓存 - 完全删除服务引用，手动检查所有文件是否已删除，然后重新添加。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T14:50:30.047

在刷新的位置，通过右键单击服务名称单击“更新服务参考”。 ![在此处输入图像描述](https://i.stack.imgur.com/k4Abi.jpg)

# android - 带有大插入的 Android 和数据库

> ID：16150020
> 
> 赞同：0
> 
> 时间：2013-04-22T14:46:45.530
> 
> 标签：android, database, insert, multiple-entries

我想要一个包含约 550.000 个条目的数据库。我已经在 txt 文件中设置了数据。数据库将只有两个字符串属性。生成此数据库的最佳方法是什么？应用程序第一次启动时下载 .db 文件？或应用程序在远程服务器中进行查询？

# macos - 如何在 Mac OS 上的 sed 命令中使用日期？

> ID：16150021
> 
> 赞同：0
> 
> 时间：2013-04-22T14:46:50.290
> 
> 标签：macos, date, sed

我需要用 mac os 中的当前日期时间（日期命令）替换文件中的**{{date}}**字符串。我通常在 Ubuntu 中使用*sed*命令，但它在 MacO 中不起作用。我尝试了很多东西，但没有奏效。

这是我正在做的事情：

```
sed -i '' 's/{{date}}/\``date``/g' file.xml 
```

但是 sed 并没有像我预期的那样评估 date 命令。如何在 Mac Os X 的 sed 中评估 DATE 命令？（使用山狮，但我想没关系）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:48:49.920

您只需将 sed subtitution 括在`"`而不是 single之间`'`：

这可以工作：

```
$ echo "hellodatehere" | sed "s/date/`date`/"
helloMon Apr 22 16:49:35 CEST 2013here 
```

在你的情况下：

```
sed -i "s/{{date}}/`date`/g" file.xml 
```

如果您想稍微解析日期，可以执行以下操作：

```
date_value=`date "+%d.%m.%Y %H:%M:%S"`
sed -i "s/{{date}}/$date_value/g" file.xml 
```

# titanium - 在 Titanium 中检查对象（即 GROUPED tableView）的尺寸（上、下、左、右位置）

> ID：16150026
> 
> 赞同：0
> 
> 时间：2013-04-22T14:47:20.800
> 
> 标签：titanium, screen, tableview, appcelerator, dimensions

这似乎是一个奇怪的问题，但是当在 Appcelerator Titanium 中为多个平台开发时，知道元素在哪里结束会非常方便，因为设备有不同的尺寸。

那么，有没有可能知道一个对象从哪里开始和结束呢？例如，我有一个分组表视图，在它下面我有一个地图，我想使用分组表视图下剩余的所有可用空间。我该怎么做呢？

我尝试了以下方法：

```
var winDetailView = Titanium.UI.currentWindow;
var tableDetailRowData = getDetailData();

var tableDetailView = Ti.UI.createTableView({
    headerTitle:'Object',
    style:Titanium.UI.iPhone.TableViewStyle.GROUPED,
    backgroundColor:'transparent',
    data:tableDetailRowData,
    height : Ti.UI.SIZE,
});
winDetailView.add(tableDetailView);

var mapView = Ti.Map.createView({
        top : 200, // this is approximately where my table ends (is there a way to know the exact place?)
        left : "10%",
        height : "90%", // this doesn't work, since it uses 90% of the device height pixels, not 90% of the remaining pixels below the top property
        width : "90%",
        mapType : Ti.Map.STANDARD_TYPE,
}) 
```

但这并不能解决问题。有任何想法吗？

**更新：** 该`getSize()`属性似乎适用于某些对象。不幸的是，使用 Grouped tableView 返回的大小几乎是整个屏幕，因此它没有提供必要的尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:18:51.787

jbsm,

您可以尝试以下方法来实现您想要的：

1.定义窗口或父视图的布局（tableView和mapView）
'`layout':'vertical'`

2.给tableView的高度Titanium.UI.SIZE(height:Titanium.UI.SIZE)。这意味着表格视图将占用显示所有内容所需的最小空间。

3.在 mapView 的顶部写上 '10dp' 或 '20dp' 无论你想要的顶部是什么。

这里的诀窍是你已经设置了布局：垂直。这样一个父视图中每个视图的顶部都相对于它上面的那个。所以如果你指定'5dp'它将是相对于视图的底部在它上面而不是从窗口的顶部。所以在这种情况下，mapView 的顶部将从 tableView 的底部计算。

# ruby-on-rails - Ruby on Rails 通讯验证

> ID：16150027
> 
> 赞同：1
> 
> 时间：2013-04-22T14:47:27.207
> 
> 标签：ruby-on-rails, ruby, email

我即将创建一个时事通讯。但我不希望任何人丢弃自定义电子邮件。我认为最好的是： - 发送电子邮件验证并仅在单击应用程序时激活应用程序中的电子邮件。

生成激活链接的方法是什么，这有什么宝石吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:18:40.733

**设计**带有电子邮件验证支持。

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T10:38:06.150

[https://rubygems.org/gems/devise](https://rubygems.org/gems/devise)

可确认：发送带有确认说明的电子邮件，并在登录期间验证帐户是否已被确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T13:19:46.973

如果您更喜欢 DIY 解决方案而不是[设计](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb)gem，则需要：-

1.  有一个接受订阅表单的控制器操作
2.  `email`使用, `token`,创建数据库记录（模型）`expire_at`
3.  发送带有确认 URL 的验证电子邮件（例如`app.com/newsletters/confirm?email=aaa@gmail.com&token=abc123`：）
4.  有一个控制器动作（例如`newsletters#confirm`：）接受确认 url
5.  检查`email`并`token`匹配
6.  支票`token`没有过期
7.  标记`email`为已*激活*

基本上，这就是设计处理它的方式。

然而，在大多数情况下，使用设计比自己做要好。

# android - 如何在 Android 平板电脑上使用 USB GPS 鼠标？

> ID：16150031
> 
> 赞同：2
> 
> 时间：2013-04-22T14:47:42.950
> 
> 标签：android, gps, usb, nmea

我有一个很好的*Garmin 60csx*设备，具有出色的 GPS 接收能力。我可以**通过 USB 连接到主机**并以这种方式提供 GPS 信息——*接口菜单*允许**通过 USB**以 4800 波特发送 NMEA 数据。

另一方面，我有一个运行 4.1.2（root/CyanoMod）的**Android 平板电脑，GPS 质量很差。**在配置中，我发现“GPS 源”只有“内部”选项。可惜，我想使用通过 USB 传入的 NMEA 数据。

我可以找到很多允许使用*蓝牙 GPS 接收器*的应用程序，它们很接近，但并不完全。现在没有人用USB了吗？

**是否有任何应用程序可以让我使用 USB GPS 设备？**

如果没有，编写一个接收 NMEA 数据的程序也不会那么困难——我曾经用 Python 做过一次。**然后我需要将它发送到 Android OS**。这里的杠杆在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T04:31:14.100

如果您的设备运行 Honeycomb 及更高版本（Android 3.1 ~ Android 4.2+），那么您可以使用“UsbGPS4Honeycomb_MR1_alpha”应用程序让 USB GPS 接收器工作。请从这里下载：http: [//forum.xda-developers.com/showpost.php?p=32851757 &postcount=58](http://forum.xda-developers.com/showpost.php?p=32851757&postcount=58)

运行 Android 4.03 的 Acer A500 不需要驱动程序等。只需使用文件管理器安装 APK，并在 Android 开发人员设置中启用“模拟位置”。然后启动应用程序、启用、检查设置并测试地图应用程序。Gps 程序不会显示卫星，但会显示 GPS 位置错误（英尺）。地图应用程序将正常运行。关闭应用程序可重新启用车载 GPS，而无需更改“模拟位置”设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:37:00.270

我以前从未这样做过，但我个人会尝试设置下面引用的示例 BroadcastReceiver 并查看是否可以建立连接。

[http://developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html)

然后我会[用](http://developer.android.com/reference/android/hardware/usb/UsbInterface.html) `getInterfaceProtocol()`看看我是否能够得到预期的协议。

# facebook - FQL 注释表 parent_id 列不起作用

> ID：16150038
> 
> 赞同：2
> 
> 时间：2013-04-22T14:47:54.897
> 
> 标签：facebook, facebook-graph-api, comments, parent-child, parent

在 Graph API Explorer 中，这个查询给了我结果

```
SELECT post_id, fromid, text, time, id, username, likes, user_likes, parent_id FROM comment WHERE post_id = '100940606645739_405463442860119' ORDER BY time DESC 
```

但是，当我尝试从我的应用程序中拨打电话时：

[https://graph.facebook.com/fql?q=SELECT](https://graph.facebook.com/fql?q=SELECT) post_id, fromid, text, time, id, username, likes, user_likes, parent_id FROM comment WHERE post_id = '100940606645739_405463442860119' ORDER BY time DESC&access_token=ACCESS_TOKEN

（最后一个链接也适用于 Graph API Explorer）

它说 parent_id 不是评论表的成员。

```
{
   "error": {
      "message": "(#602) parent_id is not a member of the comment table.",
      "type": "OAuthException",
      "code": 602
   }
} 
```

这是脸书错误？？

***注意：**切勿分享您的 Facebook 秘密或访问令牌。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:36:58.050

**请参阅以下错误：**

来自主题帖子的评论未显示在 API 中

[https://developers.facebook.com/bugs/555752071131751?browse=search_5175ab4f32aa87763025618](https://developers.facebook.com/bugs/555752071131751?browse=search_5175ab4f32aa87763025618)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T08:48:18.787

我最初也遇到了这个问题，但是通过简单地为我的应用程序启用 2013 年 7 月的迁移来解决它。

希望这可以帮助。

# asp.net - 使用网络表单将数据集绑定到输入字段的简单方法

> ID：16150045
> 
> 赞同：0
> 
> 时间：2013-04-22T14:48:13.497
> 
> 标签：asp.net, asp.net-mvc-3, webforms

我曾经使用 MVC .NET，并且通过让服务器识别 POST 数据来创建一个包含多行和多列输入字段的表是相当容易的，以显示它们并将它们发送回服务器我的自定义模型。

现在我有一个由 HTML、CSS 和 Javascript 组成的自定义网格视图，具有动态的行数和列数。

我的问题：我怎样才能以简单的方式命名输入字段或以某种方式动态显示它们，以便它们易于通过回发发送回服务器？

像 gridview 这样的东西会很好，但我不能使用它，因为我有多个页眉行和多个页脚行。

谢谢！

# jpa-2.0 - JPA 2.0：三个实体之间的映射

> ID：16150059
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:48:59.703
> 
> 标签：jpa-2.0

我想使用 JPA 2.0 实现以下关系。[实体图](http://oi35.tinypic.com/fu5emc.jpg)
简而言之：一个用户在一个组中可以有多个角色。
有没有方便的方法来实现这一点？一个代码示例会很好。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:59:01.990

```
public class Users implements Serializable {
private static final long serialVersionUID = 1L;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 10)
@Column(name = "id_usuario")
private Integer idUsuario;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 80)
@Column(name = "nombre")
private String nombre;
@OneToMany(cascade = CascadeType.ALL, mappedBy = "Users")
private Collection<NzSistemaControl> nzSistemaControlCollection; 
```

角色

```
public class Roles implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@Basic(optional = false)
@NotNull
@Column(name = "id_rol")
private Integer idRol;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 50)
@Column(name = "nombre")
private String nombre;
@OneToMany(cascade = CascadeType.ALL, mappedBy = "Roles")
private Collection<NzSistemaControl> nzSistemaControlCollection; 
```

关系表

```
public class SistemaControl implements Serializable {
@EmbeddedId
protected NzSistemaControlPK nzSistemaControlPK;
@JoinColumn(name = "id_usuario", referencedColumnName = "id_usuario_sistema", insertable = false, updatable = false)
@ManyToOne(optional = false)
private Users user;
@JoinColumn(name = "id_rol", referencedColumnName = "id_rol", insertable = false, updatable = false)
@ManyToOne(optional = false)
private Roles roles; 
```

关系PK

```
public class NzSistemaControlPK implements Serializable {
@Basic(optional = false)
@NotNull
@Column(name = "id_usuario")
private int idUsuario;
@Basic(optional = false)
@NotNull
@Column(name = "id_rol")
private int idRol; 
```

# javascript - 带有更新主图像的缩略图的画廊

> ID：16150060
> 
> 赞同：0
> 
> 时间：2013-04-22T14:49:00.250
> 
> 标签：javascript, jquery

有谁知道任何现有的显示缩略图的Javascript（或jquery），当您单击缩略图时，主图像会更新。

除此之外，关键要求是当您单击另一个缩略图时，当前显示的图像淡出，然后新图像淡入（因此它们交叉淡入淡出）。

我希望这样做是为了宣传照明演示，所以褪色是关键部分。

提前致谢，

（希望这是在正确的部分并且已被正确询问！对不起，如果不是，我是新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:03:52.173

我创建了这个，希望对您有所帮助：

[http://jsfiddle.net/K7ANs/](http://jsfiddle.net/K7ANs/)

```
$('.thumbnail').on('click',function(){
    $('#imageWrap').append('<img src="' + $(this).attr('src') + '" class="next" />');
    $('#imageWrap .active').fadeOut(1000);
    $('#imageWrap .next').fadeIn(1000, function(){
        $('#imageWrap .active').remove();
        $(this).addClass('active');
    });
}); 
```

**更新：**

为了阻止人们在当前动画完成之前单击另一个缩略图，我只是将函数包装在 if 语句中，以检查图像是否正在动画。我也可以检查是否有两个图像（因为在动画期间有两个，当它完成时另一个被删除）

```
$('.thumbnail').on('click',function(){
    if (!$('#imageWrap .active').is(':animated')){
        $('#imageWrap').append('<img src="' + $(this).attr('src') + '" class="next" />');
        $('#imageWrap .active').fadeOut(1000, function(){
            $(this).remove(); // I moved this from the other function because targeting $(this) is more accurate.
        });
        $('#imageWrap .next').fadeIn(1000, function(){
            $(this).addClass('active');
        });
    }
}); 
```

[这是一个更新的 jsFiddle](http://jsfiddle.net/K7ANs/2/)

**来源**

[jQuery API - :动画选择器](http://api.jquery.com/animated-selector/)
[jQuery API - .is() jQuery API](http://api.jquery.com/is/)
[- .fadeIn()](http://api.jquery.com/fadein/)
[jQuery API - .fadeOut()](http://api.jquery.com/fadeout/)

# javascript - 仅将类添加到段落 javascript

> ID：16150066
> 
> 赞同：0
> 
> 时间：2013-04-22T14:49:17.810
> 
> 标签：javascript, html

我正在尝试使用 javascript 在段落中添加一个类。但它只会将类传递给错误的 id。我想更改更改， `<p id="para" class="para" >NAV One</p>` 但目前它只更改列表的背景。有任何想法吗 ？

```
function toggle_visibility(id) {
    var thelist = document.getElementsByClassName("alist");
    var para = document.getElementsByClassName("para");
    for (var i = 0; i < thelist.length; i++) {
        thelist[i].style.display = 'none';
    }
    var e = document.getElementById(id);
    var para = document.getElementById(id);
    if(e.style.display == 'block') {
        e.style.display = 'none';
    } else { 
        para.className += " " + 'active';
        e.style.display = 'block';
    }
} 
```

JSfiddle。 [http://jsfiddle.net/FqqhY/4/](http://jsfiddle.net/FqqhY/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:21:06.870

我想你希望你的切换功能看起来更像这样

```
function toggle_visibility(hyp, id) {

    // hide all lists
    var allLists = document.getElementsByClassName('alist');
    for (var i = 0; i < allLists.length; i++)
        allLists[i].style.display = 'none';

    // deactive all paragraphs
    var allParas = document.getElementsByClassName('para');
    for (var i = 0; i < allParas.length; i++)
        allParas[i].className = 'para';

    // select the clicked hyper link and its child paragraph
    var list = document.getElementById(id),
        para = hyp.getElementsByClassName('para')[0];

    // activate the current para and show the list
    para.className = 'para active';
    list.style.display = 'block';
} 
```

您还需要`this`作为第一个参数传递给切换函数以及相应的列表 id

```
<a href="#" onclick="toggle_visibility(this, 'list1');"> 
```

见[小提琴](http://jsfiddle.net/chrismoutray/VU8er/)

# node.js - 是否有任何 nodejs 项目来包装 svn 命令？

> ID：16150076
> 
> 赞同：1
> 
> 时间：2013-04-22T14:50:00.437
> 
> 标签：node.js, svn

是否有任何 nodejs 项目来包装 svn 命令？如：做更新/提交更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T10:27:05.177

我在 npmjs 上发布了一个名为[svn-spawn的项目。](https://npmjs.org/package/svn-spawn)

它是 svn 命令的精简包装。

使用示例：

```
var Client = require('svn-spawn');
var client = new Client({
    cwd: '/path to your svn working directory'
});

// svn up
client.update(function(err, data) {
    console.log('updated');
});

// svn commit
client.commit('commit message here', function(err, data) {
    console.log('done');
});

// any other svn commands
client.cmd(['revert', 'dir1', '--depth', 'infinity'], function(err, data) {
    if (!err) {
        console.log(data);
    }
}); 
```

# r - R中的频率分布

> ID：16150079
> 
> 赞同：-4
> 
> 时间：2013-04-22T14:50:12.913
> 
> 标签：r, plot, frequency-distribution

我有五列数字。我想在 R 中用不同颜色绘制一张图中五列的频率分布。有人可以通过一个例子帮助我如何做到这一点。我对 R 很陌生。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:23:43.767

使用来自@eddi 的样本数据，您还可以考虑“lattice”包：

```
set.seed(1)
d <- data.frame(a = rnorm(100), b = rnorm(100, 1), c = rnorm(100, 2),
                d = rnorm(100, 3), e = rnorm(100, 4))

library(lattice)

densityplot(~ a + b + c + d + e, data = d) 
```

这将产生：

![在此处输入图像描述](https://i.stack.imgur.com/i0Uhc.png)

如果你有很多列，你也可以通过首先创建一个来创建你的图`formula`：

```
myFormula <- as.formula(paste("~ ", paste(names(d), collapse = "+"))) 
densityplot(myFormula, data = d) 
```

您还应该探索可用于 的各种选项`densityplot`，例如（如果您不想要密度图底部的点`plot.points`，可以将其设置为）并添加图例。`FALSE``auto.key`

* * *

另一个明显的选择是使用“ggplot2”，但为此，您需要先将数据转换为“长”格式：

```
d2 <- stack(d)
library(ggplot2)
qplot(values, colour=factor(ind), data=d2, geom="density") 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/tB0eJ.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:57:05.783

这是一个基本的 R 解决方案：

```
d = data.frame(a = rnorm(100), b = rnorm(100, 1), c = rnorm(100, 2), d = rnorm(100, 3), e = rnorm(100, 4))

plot(density(d$a), xlim = c(-4, 8))
lines(density(d$b), col = "red")
lines(density(d$c), col = "green")
lines(density(d$d), col = "blue")
lines(density(d$e), col = "yellow") 
```

# perl - perl 组合或排列的数量

> ID：16150080
> 
> 赞同：1
> 
> 时间：2013-04-22T14:50:18.533
> 
> 标签：perl, combinations

我想在给定一些数字时计算组合的数量，例如当从 10 中选择 5 时的组合数量。但是`Math::Combinatorics`当给定字符集时，模块会为您提供组合列表。有没有这样的模块或者我在编程时需要使用阶乘函数来表示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:06:18.210

您可以使用`Math::Combinatorics`和计算返回列表的大小。但是，更好的模块是[`Math::Counting`](http://search.cpan.org/~gene/Math-Counting-0.0908/lib/Math/Counting.pm).

```
use Math::Counting ':big';
printf "C(10, 5) = %d\n", bcomb(10, 5); 
```

# windows-phone-7 - windows phone 7 如何维护应用程序状态？

> ID：16150082
> 
> 赞同：0
> 
> 时间：2013-04-22T14:50:28.930
> 
> 标签：windows-phone-7

我想维护应用程序的状态。请告诉我如何在 windows phone 7 中保存应用程序的状态？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:07:22.727

阅读应用程序的生命周期，墓碑，休眠，活动，关闭。

您可能需要使用一些状态助手来维护控件状态。检查下面的链接

[http://lnluis.wordpress.com/2011/09/26/managing-application-state-in-windows-phone-7/](http://lnluis.wordpress.com/2011/09/26/managing-application-state-in-windows-phone-7/)

这是我更喜欢的，但这取决于您的应用程序设计。 [http://tombstonehelper.codeplex.com/](http://tombstonehelper.codeplex.com/)

阅读： http: [//www.developer.nokia.com/Community/Wiki/Tombstoning_helper_for_Windows_Phone_7](http://www.developer.nokia.com/Community/Wiki/Tombstoning_helper_for_Windows_Phone_7)

# c - 将 cvRect 输出为图像

> ID：16150086
> 
> 赞同：1
> 
> 时间：2013-04-22T14:50:33.980
> 
> 标签：c, opencv

我只想仔细检查我设置的 ROI 是否正确。因此，我希望能够将 ROI 输出为图像。ROI 使用 cvRect 作为第二个参数，我真的不知道如何将该区域转换为图像。我希望能够使用 cvRect 中的值来确定最终图像。这可能吗？

```
 cvSetImageROI(frame,cvRect((*pt[0]).x,(*pt[0]).y,abs(ROIwidth),abs(ROIheight))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:59:49.097

您可以将 ROI 复制到临时缓冲区中，然后保存该缓冲区。

```
IplImage* roi = cvCreateImage(cvSize(abs(ROIwidth),abs(ROIheight)),frame->depth, frame->nChannels);

cvSetImageROI(frame,cvRect((*pt[0]).x,(*pt[0]).y,abs(ROIwidth),abs(ROIheight)));

cvCopy(frame,roi);

cvResetImageROI(frame);

cvSaveImage("roi.jpg",roi);

cvReleaseImage(&roi); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:16:21.680

使用我建议初学者使用的 opencv c++ API！

```
cv::Mat img; // my pre-loaded image
cv::Rect roi; // roi position (x,y,width,height)
cv::Mat img_roi(img, roi); // only create header = no copy!
cv::imwrite("my_roi.png",img_roi); // save 
```

请注意，从`IplImage`to的转换`cv::Mat`是直接使用：

```
IplImage* img = cvLoadImage("my_img.jpg", 1);
cv::Mat new_img(img); // convert IplImage* -> Mat 
```

# android - 如何使用 cookieManager 处理 httpUrlConnection 中的 cookie

> ID：16150089
> 
> 赞同：44
> 
> 时间：2013-04-22T14:50:36.137
> 
> 标签：android, cookies, httpurlconnection, android-cookiemanager

我有一个返回多个 cookie 的服务器请求，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/g7Uit.png)

这就是我将这些 cookie 存储到 cookieManager 的方式：

```
HttpURLConnection connection = ... ;
static java.net.CookieManager msCookieManager = new java.net.CookieManager();
msCookieManager.put(COOKIES_URI, connection.getHeaderFields()); 
```

这就是我将这些 cookie 添加到下一个连接的方式：

```
connection.setRequestProperty("Cookie", 
  msCookieManager.getCookieStore().get(COOKIES_URI).toString()); 
```

这是从 cookieManager 获取 cookie 的正确方法吗？我很确定有更好的方法......

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-04-23T14:16:28.160

好的，正确的做法是这样的：

**从响应头中获取 Cookie 并将它们加载到 cookieManager 中：**

```
static final String COOKIES_HEADER = "Set-Cookie";
HttpURLConnection connection = ... ;
static java.net.CookieManager msCookieManager = new java.net.CookieManager();

Map<String, List<String>> headerFields = connection.getHeaderFields();
List<String> cookiesHeader = headerFields.get(COOKIES_HEADER);

if (cookiesHeader != null) {
    for (String cookie : cookiesHeader) {
        msCookieManager.getCookieStore().add(null,HttpCookie.parse(cookie).get(0));
    }               
} 
```

**从 cookieManager 获取 Cookie 并将它们加载到连接中：**

```
if (msCookieManager.getCookieStore().getCookies().size() > 0) {
    // While joining the Cookies, use ',' or ';' as needed. Most of the servers are using ';'
    connection.setRequestProperty("Cookie",
    TextUtils.join(";",  msCookieManager.getCookieStore().getCookies()));    
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-02-11T16:33:05.787

几天来我一直在搜索/尝试解决我的问题：即使成功登录后也无法访问受保护的网络资源

我在 iOS 上创建了相同的应用程序并没有遇到同样的问题，因为 NSUrlConnection 在幕后为我们进行了 cookie 维护。在 Android 上，我尝试手动添加 cookie

```
connection.setRequestProperty("Cookie", "PHPSESSID=str_from_server") 
```

没有任何运气。

最后我读到[了这个](http://developer.android.com/reference/java/net/HttpURLConnection.html)

并在我的应用程序开头的某处添加了以下两行：

```
CookieManager cookieManager = new CookieManager();
CookieHandler.setDefault(cookieManager); 
```

现在一切正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-30T11:53:09.880

@David 的回答是最好的。维护本地 CookieManager 并手动写入和读取与此 cookie 管理器关联的 cookie 存储是最简单的。

此代码将响应中的 Cookie 加载到 cookie 管理器中：

```
/**
 * Gets Cookies from the response header and loads them into cookie manager
 *
 * @param conn          instance of {@link HttpURLConnection} object
 * @param cookieManager the cookie manager({@link CookieManager} instance) in which the cookies are to be loaded<p>In case a null object is passed, the function will not perform any action and return back to the caller. </p>
 */
public static void loadResponseCookies(@Nullable HttpURLConnection conn,@Nullable CookieManager cookieManager) {

    //do nothing in case a null cokkie manager object is passed
    if (cookieManager == null || conn == null){
        return;
    }

    List<String> cookiesHeader = conn.getHeaderFields().get(COOKIES_HEADER);
    if (cookiesHeader != null) {
        for (String cookieHeader : cookiesHeader) {
            List<HttpCookie> cookies;
            try {
                cookies = HttpCookie.parse(cookieHeader);
            } catch (NullPointerException e) {
                log.warn(MessageFormat.format("{0} -- Null header for the cookie : {1}",conn.getURL().toString(), cookieHeader.toString()));
                //ignore the Null cookie header and proceed to the next cookie header
                continue;
            }

            if (cookies != null) {
                Debug("{0} -- Reading Cookies from the response :", conn.getURL().toString());
                for (HttpCookie cookie : cookies) {
                    Debug(cookie.toString());
                }
                if (cookies.size() > 0) {
                    cookieManager.getCookieStore().add(null, HttpCookie.parse(cookieHeader).get(0));
                }
            }
        }
    }
} 
```

此代码使用与 cookie 管理器关联的 cookie 填充 HttpUrlConnection 对象：

```
public void populateCookieHeaders(HttpURLConnection conn) {

    if (this.cookieManager != null) {
        //getting cookies(if any) and manually adding them to the request header
        List<HttpCookie> cookies = this.cookieManager.getCookieStore().getCookies();

        if (cookies != null) {
            if (cookies.size() > 0) {
                Debug("{0} -- Adding Cookie Headers : ", url.toString());
                for (HttpCookie cookie : cookies) {
                    Debug(cookie.toString(), null);
                }

                //adding the cookie header
                conn.setRequestProperty(COOKIE_REQUEST_HEADER, StringUtils.join(cookies, ";"));
            }
        }
    }
} 
```

这是处理 cookie 的最线程安全的方法。

我尝试使用 threadlocal cookiestore 和 CookieManager 的扩展。这些方法都不适用于我的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-23T19:39:21.903

其他答案适合他们的上下文，但没有人说显而易见的：CookieHandler 在大多数情况下会自动处理您的 cookie。如果只是维护从一个请求到下一个请求的 cookie——例如维护一个服务器会话——那么这行代码就足够了：

```
CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL)); 
```

确保在您第一次使用 UrlConnection 请求之前运行一次。

现在我自己进行零 cookie 管理，并且我的所有服务器会话数据从请求到请求都得到完美维护。

我疯了吗？为什么互联网对此保持沉默？我什至无法在文档中找到它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-08T01:28:04.577

使用`java.net.HttpURLConnection`和 groovy，只需添加[`URLConnection#addRequestProperty(String key, String value)`](https://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#addRequestProperty(java.lang.String,%20java.lang.String))内部`with`闭包。

```
import java.net.HttpURLConnection

HttpURLConnection createRequest(String chatRequestBody) {
    HttpURLConnection httpChatRequest = new URL("${endpoint}").openConnection() as HttpURLConnection

    httpChatRequest.with {
        doOutput = true
        requestMethod = 'POST'

        //headers
        addRequestProperty("Content-Type", "application/json")
        addRequestProperty("Client-Platform", "android")

        //cookies
        addRequestProperty("Cookie", "cookie_key1=cookie_value1,cookie_key2=cookie_value2")

        getOutputStream().write(chatRequestBody.getBytes("UTF-8"))
    }
    httpChatRequest
} 
```

# objective-c - AFNetworking：当前部署目标不支持自动 _weak 引用

> ID：16150091
> 
> 赞同：6
> 
> 时间：2013-04-22T14:50:48.650
> 
> 标签：objective-c, afnetworking

我正在使用 XCode 4.6.2，而且我是 iOS 开发的新手。我正在尝试安装 AFNetworking 库，但在尝试使用它时出现以下错误：（`"The current deployment target does not support automated _weak references"`当我尝试从 URL 显示图像时）在文件`AFHTTPClient`和`AFURLConnectionOperation`.

在我的第一个小项目中，我没有任何弱属性，只有强属性。

任何建议都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T15:00:42.967

仅 iOS 5.0 及更高版本支持弱引用。如果您的部署目标设置为 4.3，那么您不能使用`weak`. 该错误可能来自 AFNetworking。

如果可以或不使用 AFNetworking，请放弃对 iOS 4.3 的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-02T05:22:38.393

要针对较旧的操作系统，您可以使用 unsafe_unretained 而不是`weak`在您的属性声明中，它应该以相同的方式工作。当目标消失时，弱引用本身为零，但是 unsafe_unretained 留下了您链接到的对象在释放时可能变成悬空指针的可能性。后者与您在手动内存管理中**用作`assign`属性**声明的行为相同。

# magento - Magento 从 AWS 托管的 Magento 获取正确的基本 url

> ID：16150095
> 
> 赞同：0
> 
> 时间：2013-04-22T14:50:56.553
> 
> 标签：magento, amazon-web-services

我在 AWS 主机上运行 magento。

每当我使用 Magento 内置的“get base url”函数时，我都会得到类似的路径，例如

```
 /opt/bitnami/apps/magento/htdocs/skin/frontend/base/default/css/widgets.css 
```

但是“服务器根”（不确定正确的词）是 /htdocs/ 文件。我有一个接受文件的 java 文件，但它正在寻找从 /htdocs/ 文件夹开始的文件。当我像上面的例子一样向它发送一个文件时，它会查找 /htdocs/opt/bitnami/apps/magento/...

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:33:18.557

是的，您将获得完整的路径，而不是从 /htdocs 开始。

一个简单的解决方法可能是去除 /htdocs 之前的字符，

```
$path = "/opt/bitnami/apps/magento/htdocs/skin/frontend/base/default/css/widgets.css";
echo strstr($path, "/htdocs"); 
```

会给你：

```
/htdocs/skin/frontend/base/default/css/widgets.css 
```

# android - android 应用程序的运行时异常问题。

> ID：16150096
> 
> 赞同：0
> 
> 时间：2013-04-22T14:50:57.443
> 
> 标签：android, xml-parsing, application-close

我被分配了将 XML 数据解析为基本列表视图，然后解析为文本视图的任务，但问题是在编辑为练习而特意提供的代码时，一旦我按下主屏幕上的“登录”按钮，我的应用程序就会停止活动。提前感谢任何阅读本文的人，我真的很茫然，我已经尝试调整它几个小时了。

我想知道是否有人可以找到问题。

```
package com.example.beaconhomesproject;

import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.sax.Element;
import android.sax.EndElementListener;
import android.sax.EndTextElementListener;
import android.sax.RootElement;
import android.util.Xml;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Bill extends Activity {
private ArrayList<BillListView> bill;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bill);

    // Download
    new DownloadBillListTask()
            .execute("http://www.fcet.staffs.ac.uk/pfb1/IMWTAssignment/bills.xml");
    // Adds a CLick Listener to the list view
    ListView listView = (ListView) findViewById(R.id.bill_list);
    listView.setOnItemClickListener(new ListView.OnItemClickListener() {

        // Opens a new Activity when an item is clicked
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Intent intent = new Intent(view.getContext(), `enter code here`BillDetails.class);
            intent.putExtra("BillListView", bill.get(position));
            startActivity(intent);
        }
    });
}

// get xml
public ArrayList<BillListView> ParseBillsFromXML(String XMLURL) {
    final ArrayList<BillListView> values = new ArrayList<BillListView>();
    final BillListView LeBill = new BillListView();

    // Convert our string into a URL
    URL feedUrl;
    try {
        feedUrl = new URL(XMLURL);
    } catch (MalformedURLException e) {
        throw new RuntimeException(e);
    }

    // Get the RootElement of our XML file which is Students
    RootElement root = new RootElement("Bills");
    Element bill = root.getChild("bill"); // Then list our element we want,
                                            // so a single Student

    // Our End Element Listener event fires when we get the end of a
    // complete Student tag
    bill.setEndElementListener(new EndElementListener() {
        @Override
        public void end() {
            values.add(LeBill.copy());
        }
    });

    // All of the End Text Element Listeners get the body of the child tags
    // of a bill
    bill.getChild("date").setEndTextElementListener(
            new EndTextElementListener() {
                @Override
                public void end(String body) {
                    LeBill.setDate(body);
                }
            });
    bill.getChild("type").setEndTextElementListener(
            new EndTextElementListener() {
                @Override
                public void end(String body) {
                    LeBill.setType(body);
                }
            });
    bill.getChild("price").setEndTextElementListener(
            new EndTextElementListener() {
                @Override
                public void end(String body) {
                    LeBill.setPrice(body);
                }
            });

    // Now we have set up all our event listeners, we can start to parse the
    // document
    try {
        Xml.parse(feedUrl.openConnection().getInputStream(),
                Xml.Encoding.UTF_8, root.getContentHandler());
    } catch (Exception e) {
        throw new RuntimeException(e);
    }

    // We can then return all our returns values after parsing
    return values;
}

// This is an inner class which runs Asynchronously (In the background)
// It needs to be told the three types it accepts
// String is the type that is passed to doInBackground
// Void is the type that is used if we report any progress (We don't in this
// case so its Void!)
// ArrayList<Student> is the data type that is returned from our background
// task and is passed to final function
class DownloadBillListTask extends
        AsyncTask<String, Void, ArrayList<BillListView>> {

    // This is the code that runs in the background - We can't update any UI
    // in this function!
    // String... basically means we are passing in a list of strings but we
    // don't specify how many!
    @Override
    protected ArrayList<BillListView> doInBackground(String... arg0) {

        // This calls our Parse function above
        return ParseBillsFromXML(arg0[0]);
    }

    // This executes back on the UI thread so we can actually update the UI
    // here
    @Override
    protected void onPostExecute(ArrayList<BillListView> result) {
        // Save our result to our class level students ArrayList
        bill = result;

        // Set the list view to display the list we just downloaded!
        ListView listView = (ListView) findViewById(R.id.bill_list);

        ArrayAdapter<BillListView> adapter = new ArrayAdapter<BillListView>(
                getBaseContext(), android.R.layout.simple_list_item_1,
                result);

        listView.setAdapter(adapter);
    }

}

public void movemain(View view) {
    Intent intent = new Intent(this, MainActivity.class);
    startActivity(intent);
}

} 
```

XML：

```
 <ImageView
    android:id="@+id/waterlogo"
    android:layout_width="100dp"
    android:layout_height="80dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/welcome"
    android:scaleType="fitXY"
    android:src="@drawable/water" />

     <View
        android:id="@+id/viewyview"
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:background="#e47c0b" 
        android:layout_below="@id/waterlogo"/>
         <ListView
    android1:id="@+id/bill_list"
    android1:layout_width="match_parent"
    android1:layout_height="match_parent"
    android1:layout_alignTop="@+id/viewyview" />

    <Button
    android:id="@+id/backbutton"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@android:color/transparent"
    android:gravity="center"
    android:onClick="moveback"
    android:text="@string/back"
    android:textColor="#e47c0b" />

</RelativeLayout> 
```

日志猫：

```
>04-22 14:39:14.965: E/AndroidRuntime(1053): FATAL EXCEPTION: AsyncTask #3
>04-22 14:39:14.965: E/AndroidRuntime(1053): java.lang.RuntimeException: An error occured while executing doInBackground()
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at java.lang.Thread.run(Thread.java:856)
>04-22 14:39:14.965: E/AndroidRuntime(1053): Caused by: java.lang.RuntimeException: android.sax.BadXmlException: Line 1: Root element name does not match. Expected: 'Bills', Got: 'bills'
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at com.example.beaconhomesproject.Bill.ParseBillsFromXML(Bill.java:103)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at com.example.beaconhomesproject.Bill$DownloadBillListTask.doInBackground(Bill.java:128)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at com.example.beaconhomesproject.Bill$DownloadBillListTask.doInBackground(Bill.java:1)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    ... 4 more
>04-22 14:39:14.965: E/AndroidRuntime(1053): Caused by: android.sax.BadXmlException: Line 1: Root element name does not match. Expected: 'Bills', Got: 'bills'
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at android.sax.RootElement$Handler.startRoot(RootElement.java:145)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at android.sax.RootElement$Handler.startElement(RootElement.java:116)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at org.apache.harmony.xml.ExpatParser.startElement(ExpatParser.java:143)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at org.apache.harmony.xml.ExpatParser.appendBytes(Native Method)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:513)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:474)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:321)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:279)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at android.util.Xml.parse(Xml.java:84)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    at com.example.beaconhomesproject.Bill.ParseBillsFromXML(Bill.java:100)
>04-22 14:39:14.965: E/AndroidRuntime(1053):    ... 8 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:54:35.063

这是你的问题：

`14:39:14.965: E/AndroidRuntime(1053): Caused by: java.lang.RuntimeException: android.sax.BadXmlException: Line 1: Root element name does not match. Expected: 'Bills', Got: 'bills'`

所以：

`RootElement root = new RootElement("bills");`

# ruby - ruby/ssh/sqlite3 外壳转义

> ID：16150097
> 
> 赞同：0
> 
> 时间：2013-04-22T14:50:58.360
> 
> 标签：ruby, ssh, sqlite, escaping

我需要一行/块 ruby​​ 代码来执行以下操作：

*   向特定用户/主机启动 ssh shell：`dev@localhost`
*   在该 ssh shell 中，在给定文件上启动 sqlite3 会话：`/home/dev/current/b/test.sqlite3`
*   执行给定的 sql 行：`update customers set mode = "Y"`

我将所有元素放在一起。我可以启动 ssh shell，我可以让 shell 启动 sqlite3，我可以让 sqlite3 执行一行 sql。

我的问题是试图逃避所有不同层次的引号。

在它被建议之前，sqlite3 文件位于不同的服务器上，我无法控制。我只有一个 ssh 用户名/身份验证密钥。所以使用 ruby​​-sqlite3 不是一个选项。

彼得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:26:20.140

要在远程服务器上运行的 Shell 命令：

```
sqlite3 /home/dev/current/b/test.sqlite3 "update customers set mode = 'Y';" 
```

要在本地运行的 Shell 命令，以便在远程服务器上运行上述命令：

```
ssh dev@localhost \
  "sqlite3 /home/dev/current/b/test.sqlite3 \"update customers set mode = 'Y';\"" 
```

您要运行的 Ruby 命令以运行上述 shell 命令：

```
system "ssh dev@localhost \\\n"\
       '  "sqlite3 /home/dev/current/b/test.sqlite3 '\
            '\\"update customers set mode = \'Y\';\\""' 
```

（我添加了无偿换行符（因此无偿转义换行符）以避免在这些代码示例中水平滚动。）

# php - Facebook 应用程序显示来自所有人的所有评论，而不仅仅是朋友

> ID：16150105
> 
> 赞同：0
> 
> 时间：2013-04-22T14:51:16.680
> 
> 标签：php, javascript, facebook, facebook-graph-api

嗨，我刚刚构建了一个似乎工作正常的 facebook 应用程序。

该应用程序允许用户提交支持消息，然后在用户授予权限后显示。

该应用程序看起来正在运行，我的朋友/大学对其进行了测试（我都是 FB 上的朋友）并且他们的每条消息都出现了。

但是我可以看到正在添加其他帖子，但我看不到它们，但发帖的人可以。

有没有办法解决这个问题？

# c# - 如何将对象的实例作为字符串获取？

> ID：16150106
> 
> 赞同：1
> 
> 时间：2013-04-22T14:51:20.747
> 
> 标签：c#

是否可以获得作为字符串表示形式返回的对象实例，例如 '0x12345678' 或只是 '12345678' ？

像这样的伪代码：

```
string myObjectsInstanceAsAString = myObject.instance.ToString(); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:52:28.947

你需要`override`为`ToString()` `method`.`object` `type`

```
public override string ToString(){

   // do implementation here
} 
```

[MSDN：如何：覆盖 ToString 方法](http://msdn.microsoft.com/en-us/library/ms173154%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T15:06:24.107

```
class MyClass {
    private static int _counter = 0;
    private int _id;
    public MyClass() {
        _id = ++_counter;
    }
    public override string ToString() {
        return _id.ToString();
    }
} 
```

我不知道这对排序是否有用，但它似乎可以满足您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:57:56.937

如果您正在寻找基于实例的字符串编号，您可以尝试以下操作：

```
yourInstance.GetHashCode().ToString(); 
```

您还可以通过覆盖该`GetHashCode`方法来改进返回值，这样您就可以确定它会返回一个唯一的数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T15:06:05.110

假设您尝试为类的每个实例分配一个唯一 ID，您可以为您的类创建一个私有静态变量并在构造函数期间递增并将该值分配给实例属性

```
public class MyClass {

    private static long INSTANCE_ID = 0;
    private long ID;

    //ctor
    public MyClass() {
         this.ID = INSTANCE_ID++;
    }

    //You could build your string method based on the ID if you wanted to...
    public long getID() {
         return ID;
    }

} 
```

**编辑**在发布此答案之前我没有看到@djs 评论。这和他的想法完全一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T15:01:26.860

根据我的评论，如果您将其用于排序目的，请`IComparable`改为实现：

```
public class Foo : IComparable<Foo> {
    public int CompareTo(Foo other) {
        return SomeCalculation.CompareTo(other.SomeCalculation());
    }

    private int SomeCalculation() {
        // your implementation
    }
} 
```

这将允许您使用默认排序器对对象进行排序，或手动比较一个对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T15:01:48.603

这取决于字符串表示的含义。可以通过多种方式将对象表示为字符串。在 .NET 中执行此操作的默认方式是返回类型名。即，如果您编写此代码：

```
class MyClass { }

// In the main function
MyClass mc = new MyClass();
Console.WriteLine(mc.ToString()); 
```

会输出`MyClass`。

但是，这通常不是您想要的。你通常有一个自定义的方式来表示你的类。即在一个`DateTime`类/结构中，您的`ToString`方法应该返回一个包含日期和时间的字符串。

要为**类型**创建自定义字符串表示，您需要覆盖以下`ToString`方法`System.Object`：

```
class Person {
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public Person(string fName, string lName) {
        FirstName = fName;
        LastName = lName;
    }

    public override void ToString() {
        return FirstName + " " + LastName;
    }
}

// in your main method
Person p = new Person("Albert", "Einstein");
Console.WriteLine(p.ToString()); 
```

这将输出`Albert Einstein`.

# python - 解码 Python 字符串

> ID：16150108
> 
> 赞同：1
> 
> 时间：2013-04-22T14:51:26.550
> 
> 标签：python, string, sqlite, encoding

我很难理解编码是如何工作的：

为什么python代码中的字符串可以编码：

```
s = 'Au\xc3\x9fenformat\n'
print s.encode('utf-8')
>>>Außenformnat 
```

但是，如果我从文本文件中读取这样的字符串，我会得到：

```
f = open('out.txt', 'r')
data = f.read()
print data.encode('utf-8')
>>>Au\xc3\x9fenformat\n 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:43:12.150

试试这个，你应该会看到正确打印的文件内容：

```
f = open('out.txt', 'r')
data = f.read()
print data.decode('string_escape') 
```

这是因为文件中 txt 中的反斜杠被转义了：

```
>>> open('out.txt').read()
'Au\\xc3\\x9fenformat\\n\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:45:09.653

```
>>> f = open('out.txt', 'r')
>>> data= f.read()
>>> print data.decode("string_escape")
ußenformat 
```

# php - 从 html 标签中获取包含子字符串的数组

> ID：16150111
> 
> 赞同：0
> 
> 时间：2013-04-22T14:51:30.350
> 
> 标签：php

我想在一个特殊的 html 标记中获取所有子字符串内容，在示例中

```
<b></b>:

 function getTextBetweenTags($string, $tagname) {
   $pattern = "/<$tagname ?.*>(.*)<\/$tagname>/";
   preg_match($pattern, $string, $matches);
   return $matches;
}

$message = "<p> Te informamos que la parada <b> Avenida de la Vega </b> 
  se ha llenado, el día <b>2013-04-22 </b> a las <b>08:23:27</b>.
  <br><br> No olvides cerrar este ticket cuando hayas resuelto incidencia.
  <br><br> Gracias </p>";

 $result = getTextBetweenTags($message, "b");
 var_dump($txt); 
```

我得到：

```
array(2) {
  [0]=>
   string(90) "<b> Avenida de la Vega </b> se ha llenado, el día <b>2013-04-22 </b> a las <b>08:23:27</b>"
  [1]=>
  string(8) "08:23:27"
 } 
```

我想：

```
array(3) {
  [0]=>
   string(20) "Avenida de la Vega" 
   [1]=>
    string(10) "2013-04-22"
   [2]=>
    string(8) "08:23:27"
  } 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:00:12.347

解析 HTML 不应该通过 RegEx 完成。像这样更好地使用 DOM：

```
$html='
<p> Te informamos que la parada <b> Avenida de la Vega </b> 
  se ha llenado, el día <b>2013-04-22 </b> a las <b>08:23:27</b>.
  <br><br> No olvides cerrar este ticket cuando hayas resuelto incidencia.
  <br><br> Gracias </p>';
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$nodeList = $doc->getElementsByTagName('b');
$items = array();
for($i=0; $i < $nodeList->length; $i++) {
    $node = $nodeList->item($i);
    $items[] = $node->nodeValue;
}
print_r($items); 
```

# android - 更改侦听器上的android自动旋转配置

> ID：16150113
> 
> 赞同：6
> 
> 时间：2013-04-22T14:51:36.127
> 
> 标签：android, listener, autorotate

我想听“自动旋转”配置更改，而不是设备/系统方向，而是切换更改（开/关）
我相信我必须在 AndroidManifest 中注册 configChange 并在我想要的任何地方创建一个侦听器但我不确定什么是正确的配置。IE

```
android:configChanges='??' 
```

但也许存在另一种方式，而不是通过`android:configChanges`...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T15:21:21.460

您必须使用内容观察器收听 Settings.System.ACCELEROMETER_ROTATION。

注册内容观察者

```
getContentResolver().registerContentObserver(Settings.System.getUriFor
(Settings.System.ACCELEROMETER_ROTATION),
true,rotationObserver ); 
```

并在这里声明。onChange 方法会在旋转发生变化时被调用。

```
private ContentObserver rotationObserver = new ContentObserver(new Handler()) {
        @Override
        public void onChange(boolean selfChange) {
           Do your task
        }
}; 
```

# jquery - 垂直对齐文本 - 在 IE8 中无法正确显示

> ID：16150118
> 
> 赞同：1
> 
> 时间：2013-04-22T14:51:44.290
> 
> 标签：jquery, vertical-alignment, jquery-calculation, vertical-text

大家下午好，我已经编写了一个脚本来计算图像的宽度和高度，并在图像的右下角正确放置一串文本，以便与字幕/字幕一起使用。

我已经设法让它在除 IE8 之外的所有浏览器中完美地生成、计算和显示。出于某种原因，它在 IE8 中炸毁了屏幕，我似乎无法弄清楚它为什么这样做并改进我的 JavaScript 以在使用 IE8 时可能具有用于计算的条件函数。

有什么建议吗？

[http://jsfiddle.net/jodriscoll/u26vZ/](http://jsfiddle.net/jodriscoll/u26vZ/)

```
$(function ($) {
    // jQuery is passed as the first arg $
    $('.img-right img,.img-left img').bind('load', function () {
        var $img = $(this),
            imgHeight = $img.height(),
            imgWidth = $img.width();
        $img.siblings('p').width(imgWidth);
        $img.siblings('span').width(imgHeight);
        $img.siblings('.credit').css({
            left: imgWidth + 6,
            top: imgHeight - 10
        });
    }).each(function () {
        // we need to force the "load" event to fire if it was already complete:
        // technique taken from https://gist.github.com/268257
        if (this.complete || this.complete === undefined) {
            var src = this.src;
            // webkit hack from http://groups.google.com/group/jquery-dev/browse_thread/thread/eee6ab7b2da50e1f
            // data uri bypasses webkit log warning
            this.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
            this.src = src;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:31:20.523

这就是我将如何去做的事情，对于浏览器来说，处理你的 js 脚本中的代码的工作量并不大。对于这样的事情，这有点不必要。

我已经更改了 html，因此图像和垂直文本用图形元素包裹，垂直文本也是 figcaption 而不是跨度。

我更改了 CSS，以便 img-right div 是相对位置和内联块，并且垂直文本是绝对的，右侧和底部位置为 0 或其他任何值，以便它们正确且所有均等定位正确，这应该适用于浏览器，但如果它仍然在 IE 中未对齐，您可以简单地修改 IE 的右侧和底部位置值，具体使用 html 标记中指定它是 ie7 或 8 或您可能需要定位的任何浏览器的类。

我编写的脚本以及我如何进行此操作所必需的所有内容，只需将包含每个 div 的 img-right 设置为具有它所包含的 img 的宽度的宽度。这样就在容器上设置了一个宽度，它将使段落文本根据 img 宽度正确而漂亮地换行。因此，您可以将垂直文本偏移到容器的右侧。

这是我所做的修改后的小提琴：http: [//jsfiddle.net/jaredwilli/u26vZ/11/](http://jsfiddle.net/jaredwilli/u26vZ/11/) 脚本现在只是：

```
var img = $('.img-right, .img-left');
for (var i = 0; i < img.length; i++) {
    $(img[i]).css({ width: $(img[i]).find('img').width() });
} 
```

# html - 如何截断 HTML 中的文本

> ID：16150120
> 
> 赞同：2
> 
> 时间：2013-04-22T14:51:49.003
> 
> 标签：html, html-email, truncation

我有一封 HTML 电子邮件（其中包含以下 HTML）要发送到我们的用户群，电子邮件发送正确。

我有一些很长的行，文本需要适合固定布局，超过 3 行的文本需要被截断。

有没有办法截断 HTML 中的文本？我尝试设置`overflow: hidden`，但它不会截断长线。

```
<td valign="top" height="85"  style="padding:0">
  <p style=" text-align:justify; height:85px; font-family: Verdana, Arial, Tahoma, sans-serif; overflow: hidden; font-size: 14px; vertical-align:text-top; margin: 0; padding:0; line-height:1.5; ">
  orem ipsum dolor sit amet, consectetur adipiscing elit. Sed tempor, arcu non porta scelerisque, ipsum turpis vestibulum quam, ut dapibus arcu purus quis nisl. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris leo magna, aliquet quis facilisis convallis, pulvinar in lectus. Maecenas consequat elementum pretium. Donec venenatis tortor at sapien cursus eget lacinia lorem egestas. Praesent eget risus ut justo dapibus cursus. Mauris tincidunt euismod massa in pellentesque. Vivamus non scelerisque nisl.
  </p>
</td> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-05T01:29:11.957

改用[文本溢出](https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow)：

```
 <p style="width: 50%; overflow: hidden; text-overflow: ellipsis;">The quick brown fox jumped over the lazy dog.</p> 
```

# java - 递归欧拉中的逻辑问题

> ID：16150122
> 
> 赞同：0
> 
> 时间：2013-04-22T14:52:05.380
> 
> 标签：java, recursion

我想要用户输入的数字 n 的欧拉数 e，逻辑部分有问题，输入 2 时我似乎无法得到 2.5 的正确答案，而是得到 2。事实上我无论输入是什么，总是得到 2 的答案。问题出在欧拉方法中，因为阶乘打印了正确的答案。这是代码。

```
import java.util.*;

 public class pract5ex3 {
    public static int fact (int n){
    if (n==0 || n==1){
            return 1;
    }
    else {
    return n*fact(n-1);
    }

}
public static double constantRec(int n){
    if (n == 0){

    return 1;
    }
    else {

    return 1/fact(n)+constantRec(n-1);
    }
}

public static void main (String []args) {
    Scanner s= new Scanner (System.in);
    System.out.println("enter number");
    int n =s.nextInt();

    int factorial = pract5ex3.fact(n);
    double euler = pract5ex3.constantRec(n);
    System.out.println(factorial);
    System.out.println(euler);
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:53:44.593

小心[整数除法](https://stackoverflow.com/questions/3144610/java-integer-division-how-do-you-produce-a-double)。

利用：

```
1.0/fact(n) 
```

获得双倍价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:54:03.807

该表达式`1/fact(n)`进行整数除法，如果阶乘大于一，则将产生零。只需将其更改为`1.0/fact(n)`.

# r - 使用 R 的应用函数之一简化代码

> ID：16150124
> 
> 赞同：3
> 
> 时间：2013-04-22T14:52:14.880
> 
> 标签：r, dataframe, apply

我找不到令人满意的教程来解释我如何使用应用函数的所有可能性。我仍然是一个新手，但这通常可以派上用场并显着简化我的代码。所以这是我的例子......我有一个看起来像这样的数据框：

```
> head(p01)
   time key dwell
1   8.13   z  0.00
3   8.13   x  1.25
5   9.38   l  0.87
7  10.25   x  0.15
9  10.40   l  1.13
11 11.53   x  0.45 
```

将其放入 R：

```
p01 <- structure(list(time = c(8.13, 8.13, 9.38, 10.25, 10.4, 11.53), 
key = c("z", "x", "l", "x", "l", "x"), dwell = c(0, 1.25, 
0.869, 0.15, 1.13, 0.45)), .Names = c("time", "key", "dwell"), row.names = c(1L, 3L, 5L, 7L, 9L, 11L), class = "data.frame") 
```

现在我想计算每个字母的出现次数`p01$key`并将它们打印在 中`p01$occurences`，这样结果将如下所示：

```
 time key dwell occurences
1   8.13   z  0.00          1
3   8.13   x  1.25          3
5   9.38   l  0.87          2
7  10.25   x  0.15          3
9  10.40   l  1.13          2
11 11.53   x  0.45          3 
```

我现在的做法是：

```
p01[p01$key == "l", "occurences"] <- table(p01$key)["l"]
p01[p01$key == "x", "occurences"] <- table(p01$key)["x"]
p01[p01$key == "z", "occurences"] <- table(p01$key)["z"] 
```

...这当然不是最好的解决方案。`p01$key`特别是因为真实数据在（16 个不同字母之一）中包含更多可能性。

最重要的是，我想计算`dwell`每个字母的总数，所以我现在正在做的是：

```
p01[p01$key == "l", "total_dwell"] <- tapply(p01$dwell, p01$key, sum)["l"]
p01[p01$key == "x", "total_dwell"] <- tapply(p01$dwell, p01$key, sum)["x"]
p01[p01$key == "z", "total_dwell"] <- tapply(p01$dwell, p01$key, sum)["z"] 
```

为了得到：

```
 time key dwell total_dwell
1   8.13   z  0.00        0.00
3   8.13   x  1.25        1.85
5   9.38   l  0.87        2.00
7  10.25   x  0.15        1.85
9  10.40   l  1.13        2.00
11 11.53   x  0.45        1.85 
```

在过去的 6 个小时里，我一直在谷歌上搜索并浏览了几本书。非常感谢一个优雅的解决方案和/或一些综合教程的链接。我的解决方案显然有效，但这不是我第一次必须解决这样的问题，而且我的脚本文件开始看起来很荒谬！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T15:04:18.500

如果您的数据集很大，请尝试 data.table。

```
library(data.table)
DT <- data.table(p01)
DT[,occurences:=.N,by=key]
DT[,total_dwell:=sum(dwell),by=key]

    time key dwell occurences total_dwell
1:  8.13   z 0.000          1       0.000
2:  8.13   x 1.250          3       1.850
3:  9.38   l 0.869          2       1.999
4: 10.25   x 0.150          3       1.850
5: 10.40   l 1.130          2       1.999
6: 11.53   x 0.450          3       1.850 
```

* * *

通过引用分配的两行可以组合如下：

```
DT[, `:=`(occurences = .N, total_dwell = sum(dwell)), by=key] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T15:00:20.903

我会使用`plyr`：

```
res = ddply(p01, .(key), transform, 
                           occurrences = length(key), 
                           total_dwell = sum(dwell))
res
   time key dwell occurrences total_dwell
1  9.38   l 0.869           2       1.999
2 10.40   l 1.130           2       1.999
3  8.13   x 1.250           3       1.850
4 10.25   x 0.150           3       1.850
5 11.53   x 0.450           3       1.850
6  8.13   z 0.000           1       0.000 
```

请注意，在此之后，表格按字母顺序排序`key`。您可以`order`使用`time`：

```
res[order(res$time),]
   time key dwell occurrences total_dwell
3  8.13   x 1.250           3       1.850
6  8.13   z 0.000           1       0.000
1  9.38   l 0.869           2       1.999
4 10.25   x 0.150           3       1.850
2 10.40   l 1.130           2       1.999
5 11.53   x 0.450           3       1.850 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T15:00:13.350

我不认为你想在`apply`这里使用。如何`table`获取频率然后用于`match`将频率分配给您的表：

```
freq <- as.data.frame( table(p01$key) )
    # Var1 Freq
#1    l    2
#2    x    3
#3    z    1

p01$occurences <- freq[ match(p01$key , freq[,1] ) , 2 ]
p01
#   time key dwell occurences
#1   8.13   z 0.000          1
#3   8.13   x 1.250          3
#5   9.38   l 0.869          2
#7  10.25   x 0.150          3
#9  10.40   l 1.130          2
#11 11.53   x 0.450          3 
```

据我所知，这种方法相对于`plyr`解决方案的唯一优势是保留了数据帧的原始顺序。我不知道你是否可以在`ddply`函数中指定它（可能你可以！）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T15:52:23.500

你自然可以用 tapply 解决这个问题。请注意，这些会创建一个新对象 p01.summary，而不是添加到您的对象 p01。另一行代码可以解决这个问题

```
p01.summary = with(p01, cbind(occurences=table(key),total.dwell=tapply(dwell,key,sum))) 
```

或者

```
p01.summary = with(p01, do.call(rbind,tapply(dwell,key,function(KEY){
   data.frame(occurence=length(KEY),total.dwell= sum(KEY))
}) )) 
```

# .net - C++/CLI：声明嵌套值类型的句柄时出现编译器错误

> ID：16150129
> 
> 赞同：1
> 
> 时间：2013-04-22T14:52:17.527
> 
> 标签：.net, c++-cli

当我声明*嵌套值类型的**句柄*时，Visual Studio（2008 和 2010）给我以下编译器错误：

 *```
error C2248: 'Outer::Inner' : cannot access private struct declared in class 'Outer' 
```

下面是编译失败的代码：

```
ref class Outer
{
private:
    value struct Inner { };

void F()
{
    Inner i; // OK
    Inner^ h; // C2248
}
}; 
```

**当我将Inner**的类型从**value struct**更改为**ref struct**时，问题就消失了。

```
ref class Outer
{
private:
    ref struct Inner { };

void F()
{
    Inner i; // OK
    Inner^ h; // OK
}
}; 
```

是否有关于我错过的嵌套值类型句柄的规则，或者这是一个 VS 错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:02:16.360

```
 Inner^ h; // C2248 
```

这是 C++/CLI 中一个*非常*常见的错误，在 C# 和 VB.NET 等其他 .NET 语言中是永远不会犯的错误。从声明中自动判断类型是值类型还是引用类型的语言。帽子被添加到 C++/CLI 语法中，使其类似于 C++。

创建对值类型值的引用需要将该值存储在垃圾收集堆上。这称为“装箱转换”，将值嵌入到对象中。否则，产生结构类型继承自 Object 的 ValueType 的错觉的魔法。在少数情况下需要装箱转换，例如调用继承自 System::Object 的虚方法（Equals、GetHashCode、ToString）。编译器在没有你帮助的情况下自动发出装箱转换代码。

*像您的陈述一样，故意*装箱值几乎没有实际用途。我想不出来，但这可能是由于我缺乏想象力。在访问变量时，您将调用的装箱和拆箱代码看不见，只会增加很多开销，从而减慢您的代码速度。值类型是为了*加速*代码而发明的，你会想尽可能避免装箱。

解释编译器错误并不是那么容易。有人可能会争辩说，编译器不允许访问使装箱成为可能的类型内部，因为它是私有的。但很难做到这一点，请注意调用`i.ToString()`会产生相同的错误。虽然它是私有引用类型时很好。可访问性永远不应取决于类型，这种不一致通常称为“错误”；）您可以发布到 connect.microsoft.com 以说明您的情况。

最好的解决方法是理智的：只是不要使用帽子。在需要引用语义时声明引用类型。*

# javascript - javascript的else if语句中没有出现全局变量值

> ID：16150130
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:52:19.347
> 
> 标签：javascript, javascript-events

我正在定义一个全局数组 Arr 并在 if 条件下在数组中插入几个值我可以在**if 条件下****看到**数组 Arr 的所有值但是当我尝试在**else if 条件下**使用 Arr 时我得到了 Arr 的长度为 0（零）。我不知道是什么原因。我需要帮助，如果有人能对此有所帮助，我将不胜感激。如果有人知道这个问题，请编辑此代码。

```
Arr=[]; // Global Variable

for(var k=1; k<=2; k++){

if (k ==1){

//Inserting the values in array Arr

//My Arr array is having value Arr[{Firstname:"xyz", Lastname:"abc"}{Firstname:"xyz1", Lastname:"abc1"}]

Console.log(Arr); //Here I can see all the values inside the Array Arr in console.

}else if (k ==1){

console.log(Arr.length); //Here I'm getting  Array value as 0

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:00:28.623

在我看来，您正在“if”语句中加载数组。这意味着 else 没有值是正确的。

# .net - 在 discoverAndAddAccounts 过程中是否可以提出一组以上的 MFA 问题？

> ID：16150131
> 
> 赞同：0
> 
> 时间：2013-04-22T14:52:27.450
> 
> 标签：.net, aggregation, intuit-partner-platform, customer-account-data-api

我正在使用 discoverAndAddAccountsResponse 回答第一组 MFA 质询问题，但此方法仅返回一个 AccountList。

有没有一种情况，我应该期待更多的 MFA 问题来回答第一组 MFA 问题，如果是这样，我应该如何实施该流程？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:32:24.317

是的 - 请参阅此页面了解更多信息 - [http://docs.developer.intuit.com/0020_Aggregation_Categorization_Apps/0005_Service_Features/Multi-Factor_Authentication](http://docs.developer.intuit.com/0020_Aggregation_Categorization_Apps/0005_Service_Features/Multi-Factor_Authentication)。

# flash - FLASH - button[1] 选择“button1”

> ID：16150135
> 
> 赞同：0
> 
> 时间：2013-04-22T14:52:33.637
> 
> 标签：flash

一直想知道这是否可能，以及如何去做，但我不知道要搜索什么或它叫什么。

让我给你举个例子：

假设我有 3 个按钮。

“btn001” “btn002” “btn003”

如果我想为这些添加事件监听器，是否可以在 for 循环中进行（无需先将它们放入数组）。我想这样做，以便我可以在我的舞台上添加/删除按钮，并且只需更新一个变量，告诉我有多少按钮。

例如像这样：

```
for(var i:int = 0; i<numBtns;i++){
    btn00[i].addEventListener(bla bla bla bla...);
} 
```

有任何想法吗？=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:54:32.560

不是像你写的那样，但是如果你把它们都添加到一个共同的父级，你可以遍历父级的子级。

# knockout.js - Knockoutjs 将模型绑定到使用 ko.renderTemplate 创建的模板

> ID：16150143
> 
> 赞同：5
> 
> 时间：2013-04-22T14:52:51.050
> 
> 标签：knockout.js

我要做的是创建一个 DOM 节点，使用 ko.renderTemplate 覆盖创建的节点呈现模板，然后在该模板中都能够从特定模型和 viewModel $root 获取数据。

前任：

```
var data = new ModelData();
var domNode = document.createElement("div");
document.body.appendChild(domNode);
ko.renderTemplate('template', data, {}, domNode, 'replaceNode'); 
```

模板可能如下所示：

```
<script type="text/html" id="template">
    <span data-bind="text: DataFromModel"></span>
    <ul data-bind="foreach: $root.DataFromViewModelRoot">
    </ul>
</script> 
```

在这种情况下，我没有从 $root.DataFromViewModelRoot 获得任何数据，因为它认为 $root-data 是 ModelData（我明白为什么，我只是不知道该怎么做）。

我想要完成的是我需要从模板创建一个模态窗口（引导程序），然后我希望能够根据我“发送给它的数据”在该模态中显示不同的内容”。我还需要能够创建多个模式，这就是为什么我需要创建一个新的 DOM 节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T03:15:43.550

这与您的具体问题略有不同，但这是使用引导模式的另一种方法。

您可以使用包含引导程序`modal`和绑定的自定义`template`绑定。

绑定可能如下所示：

```
ko.bindingHandlers.modal = {
    init: function(element, valueAccessor, allBindings, vm, context) {
        var modal = valueAccessor();
        //init the modal and make sure that we clear the observable no matter how the modal is closed
        $(element).modal({ show: false, backdrop: 'static' }).on("hidden.bs.modal", function() {
            if (ko.isWriteableObservable(modal)) {
                modal(null);
            }
        });

        //template's name field can accept a function to return the name dynamically
        var templateName = function() {
            var value = modal();
            return value && value.name;
        };

        //a computed to wrap the current modal data
        var templateData = ko.computed(function() {
            var value = modal();
            return value && value.data;
        });

        //apply the template binding to this element
        ko.applyBindingsToNode(element, { template: { 'if': modal, name: templateName, data: templateData } }, context);

        //tell KO that we will handle binding the children (via the template binding)
        return { controlsDescendantBindings: true };
    },
    update: function(element, valueAccessor) {
        var data = ko.utils.unwrapObservable(valueAccessor());
        //show or hide the modal depending on whether the associated data is populated
        $(element).modal(data ? "show" : "hide");
    }
}; 
```

现在，您将在页面上绑定一个模式，例如：

```
<div class="modal hide fade" data-bind="modal: currentModal"></div> 
```

`currentModal`将是一个 observable，您使用包含`name`(模板名称) 和`data`.

其工作方式是，如果`currentModal`已填充，则使用当前模板和数据显示模式。如果`currentModal`为空，则模式关闭。

这是一个如何工作的示例：http: [//jsfiddle.net/rniemeyer/NJtu7/](http://jsfiddle.net/rniemeyer/NJtu7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T14:48:46.863

我有一个改进版的[https://stackoverflow.com/a/16160300/2630724](https://stackoverflow.com/a/16160300/2630724)可以分享：

```
ko.bindingHandlers.modal = {
    init: function(element, valueAccessor, allBindings, vm, context) {
        var modal = valueAccessor();

        //init the modal and make sure that we clear the observable no matter how the modal is closed
        $(element).modal({show: false}).on("hidden.bs.modal", function() {
            if (ko.isWriteableObservable(modal)) {
                modal(null);
            }
        });

        var template_computed = ko.computed({
            read: function() {
                var value = modal();
                return value ? value : {'if': false};
            },
            disposeWhenNodeIsRemoved: element
        });

        //apply the template binding to this element
        return ko.applyBindingsToNode(element, { template: template_computed }, context);
    },
    update: function(element, valueAccessor) {
        var data = ko.utils.unwrapObservable(valueAccessor());
        //show or hide the modal depending on whether the associated data is populated
        $(element).modal(data ? "show" : "hide");
    }
}; 
```

除此之外，您还需要一个模态元素

```
<div class="modal fade" data-bind="modal: currentModal">
</div> 
```

在页面上的某处，然后通过写入 currentModal 可观察对象打开一个对话框，然后通过将其置空来关闭对话框： currentModal(null)

我在那里使用 bootstrap 3.0-rc1 淘汰赛 2.3，它允许计算为模板名称:)

感谢@rp-niemeyer 发布此消息！

# ruby-on-rails - Ruby on Rails 自定义 FormBuilder 覆盖 text_field

> ID：16150144
> 
> 赞同：1
> 
> 时间：2013-04-22T14:52:51.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, formbuilder

我的项目中有一个自定义表单构建器，在初始化程序中使用以下代码：

```
class CustomFormBuilder < ActionView::Helpers::FormBuilder

  def submit(label, *args)
    options = args.extract_options!
    new_class = options[:class] || "btn"
    super(label, *(args << options.merge(:class => new_class)))
  end

  def text_field(label, *args)
    options = args.extract_options!
    new_class = options[:class] || "textbox"
    super(label, *(args << options.merge(:class => new_class)))
  end

end

# Set CustomBuilder as default FormBuilder
ActionView::Base.default_form_builder = CustomFormBuilder 
```

*提交*定义工作并将类 btn 附加到**提交**输入，但是*text_field*定义似乎不起作用，因为类**文本框**没有附加到文本输入。

查看 FormBuilder 的[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html)后，我注意到*submit*被列为方法，而*text_field*没有。我需要弄清楚的是如何正确覆盖使用*form_for生成表单时使用的**text_field*方法。如果它有助于我使用 Ruby 2.0.0 和 Rails 3.2.13。我还查看了一个示例[here](http://www.likeawritingdesk.com/posts/very-custom-form-builders-in-rails)，它显示了自定义 FormBuilder 类中的*text_field*方法，所以我想知道在 Rails 3 中，这个方法是否已从*FormBuilder*中删除并放在其他地方。任何有关如何实现这一目标的见解将不胜感激。

 *****以下是我的解决方案** *（基于 PinnyM 提供的信息）*：

```
class CustomFormBuilder < ActionView::Helpers::FormBuilder

  def submit(label, *args)
    options = args.extract_options!
    options[:class] = "btn" if !options[:class].present?
    super(label, *(args << options))
  end

  def self.create_tagged_field(method_name)
    case method_name
    when 'text_field'
      define_method(method_name) do |name, *args|
        options = args.extract_options!
        options[:class] = "textbox" if !options[:class].present?
        super(name, *(args << options))
      end
    end
  end

  field_helpers.each do |name|
    create_tagged_field(name)
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:17:42.240

`FormBuilder`使用元代码为大多数表单标签（包括`text_field`）生成方法。`FormHelper`它为此目的借用了实例方法，排除了需要不同实现的特定标签，并循环通过剩余的标签为它们自动生成方法。生成的相关代码如下所示：

```
(field_helpers - %w(label check_box radio_button fields_for hidden_field file_field)).each do |selector|
  class_eval <<-RUBY_EVAL, __FILE__, __LINE__ + 1
    def #{selector}(method, options = {}) # def text_field(method, options = {})
      @template.send( # @template.send(   
        #{selector.inspect}, # "text_field",
        @object_name, # @object_name,
        method, # method,
        objectify_options(options)) # objectify_options(options))
    end # end
    RUBY_EVAL
end 
```***

# razor - 覆盖 MVC4 中自动生成的 id

> ID：16150150
> 
> 赞同：2
> 
> 时间：2013-04-22T14:53:17.933
> 
> 标签：razor, asp.net-mvc-4

这是我的观点：

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary()            
    @Html.EditorForModel()

    <input type="submit" value="@Resources.Main.Save" />         
} 
```

这是我的视图模型

```
 public class ContentPagePresViewModel
    {
        [HiddenInput(DisplayValue = false)]
        public Guid Id { get; set; }

        /// <summary>
        /// Contenu de la page
        /// </summary>
        [Display(Name = "¨Presentation")]
        [DataType(DataType.Html)]
        [AllowHtml]
        /*[Required(ErrorMessage = "ContentPage_PageContent_Required")]*/

        public virtual string Description { get; set; }
} 
```

我希望为我的描述属性生成的 id 不会变成“描述”。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:07:47.213

您可以将此`UIHint`属性与自定义编辑器模板结合使用。

*   来自 MSDN，关于 UIHint：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.aspx)
*   本文详细介绍了该过程：http: [//blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx](http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)

修改模型以添加`UIHint`属性：

```
[UIHint("Description")]
public virtual string Description { get; set; } 
```

在特定视图的文件夹中，创建一个名为`EditorTemplates`. 添加一个名为 Description.cshtml 的新文件，并添加以下内容：（*假设您使用的是 Razor）*

```
<div>
    @Html.TextBox("", Model, new { id = "_myCustomDescriptionId" })
</div> 
```

* * *

**这是另一个**需要考虑的想法。单独布置字段和编辑器可能更直接，而不是使用`Html.EditorForModel`. 在这种情况下，您可以像这样直接指定 html 属性：

```
@Html.TextBoxFor(m => m.Description, new { id = "_myCustomDescriptionId" }); 
```

# windows - 使用 Windows 批处理脚本保护 FTP

> ID：16150152
> 
> 赞同：20
> 
> 时间：2013-04-22T14:53:22.233
> 
> 标签：windows, batch-file, ftp, sftp

我目前在不同的服务器上有批处理脚本，它们将 csv 文件传输到不同位置的 FTP 服务器。我的脚本与此类似：

```
echo user ftp_user> ftpcmd.dat
echo password>> ftpcmd.dat
echo put c:\directory\%1-export-%date%.csv>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat ftp.MyFTPSite.com
del ftpcmd.dat 
```

如果我想要求安全传输，我的脚本将如何更新？

谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-22T16:16:45.380

首先，确保您了解，如果您需要使用[安全 FTP](https://en.wikipedia.org/wiki/FTPS)（=FTPS，根据您的文本）或[SFTP](https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)（根据您使用的标签）。

Windows 命令行都不支持`ftp.exe`。正如您所建议的，您可以使用[WinSCP](https://winscp.net/)。它同时支持 FTPS 和 SFTP。

使用 WinSCP，您的批处理文件将如下所示（对于 SFTP）：

```
echo open sftp://ftp_user:password@ftp.MyFTPSite.com -hostkey="..." >> ftpcmd.dat
echo put c:\directory\%1-export-%date%.csv >> ftpcmd.dat
echo exit >> ftpcmd.dat
winscp.com /script=ftpcmd.dat
del ftpcmd.dat 
```

和批处理文件：

```
winscp.com /log=ftpcmd.log /script=ftpcmd.dat /parameter %1 %date% 
```

* * *

尽管使用了 WinSCP 的所有功能（特别是[直接在命令行](https://winscp.net/eng/docs/commandline#scripting)和[`%TIMESTAMP%`语法](https://winscp.net/eng/docs/scripting#timestamp)上提供命令），但批处理文件简化为：

```
winscp.com /log=ftpcmd.log /command ^
    "open sftp://ftp_user:password@ftp.MyFTPSite.com -hostkey=""...""" ^
    "put c:\directory\%1-export-%%TIMESTAMP#yyyymmdd%%.csv" ^
    "exit" 
```

有关`-hostkey`切换的目的，请参阅[验证脚本中的主机密钥](https://winscp.net/eng/docs/scripting#hostkey)。

比手动组装脚本/批处理文件更容易的是在 WinSCP GUI 中设置和测试连接设置，然后让它[为您生成脚本或批处理文件](https://winscp.net/eng/docs/ui_generateurl)：

[![生成批处理文件](https://i.stack.imgur.com/2zI7t.png)](https://i.stack.imgur.com/2zI7t.png)

您需要调整的只是源文件名（使用`%TIMESTAMP%`前面显示的语法）和日志文件的路径。

* * *

对于 FTPS，将`sftp://`命令中的[`open`替换](https://winscp.net/eng/docs/scriptcommand_open)为`ftpes://`（[显式 TLS/SSL](https://winscp.net/eng/docs/ftps#methods)）或`ftps://`（[隐式 TLS/SSL](https://winscp.net/eng/docs/ftps#methods)）。拆下`-hostkey`开关。

```
winscp.com /log=ftpcmd.log /command ^
    "open ftps://ftp_user:password@ftp.MyFTPSite.com -explicit" ^
    "put c:\directory\%1-export-%%TIMESTAMP#yyyymmdd%%.csv" ^
    "exit" 
```

[如果您的服务器证书不是由受信任的机构颁发的](https://winscp.net/eng/docs/scripting#hostkey)，您可能需要添加`-certificate`开关。

同样，与 SFTP 一样，更简单的是在 WinSCP GUI 中设置和测试连接设置，然后让它[为您生成脚本或批处理文件](https://winscp.net/eng/docs/ui_generateurl)。

* * *

[请参阅从WinSCP 到](https://winscp.net/eng/docs/guide_ftp_script_to_sftp)完整的[转换指南`ftp.exe`](https://winscp.net/eng/docs/guide_ftp_script_to_sftp)。

您还应该阅读将[文件自动传输到 FTP 服务器或 SFTP 服务器](https://winscp.net/eng/docs/guide_automation)的指南。

* * *

`%TIMESTAMP#yyyymmdd%`使用代替的注意事项`%date%`：变量值的格式`%date%`是特定于语言环境的。因此，请确保在您实际使用脚本的同一语言环境中测试脚本。例如，在我的捷克语言环境中，`%date%`解析为`čt 06\. 11\. 2014`，当用作文件名的一部分时可能会出现问题。

出于这个原因，WinSCP 原生支持[（与区域设置无关的）时间戳格式](https://winscp.net/eng/docs/scripting#timestamp)。例如`%TIMESTAMP#yyyymmdd%`解析到`20170515`任何语言环境。

*（我是WinSCP的作者）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:09:50.360

内置的 FTP 命令没有安全功能。请改用[cUrl](http://curl.haxx.se)。它是可编写脚本的，更加健壮并且具有 FTP 安全性。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-01-14T16:40:14.360

```
 ftps -a -z -e:on -pfxfile:"S-PID.p12" -pfxpwfile:"S-PID.p12.pwd" -user:<S-PID number> -s:script <RemoteServerName> 2121

S-PID.p12 => certificate file name ;
S-PID.p12.pwd => certificate password file name ; 
RemoteServerName =>  abcd123 ; 
2121 => port number ; 
ftps => command is part of ftps client software ; 
```

# r - 从 data.table 中的列表列创建列

> ID：16150153
> 
> 赞同：7
> 
> 时间：2013-04-22T14:53:22.770
> 
> 标签：r, data.table

我无法弄清楚如何执行以下操作，从一列列表中创建动态列数`data.table`

```
set.seed(123); N=1e5
DT = data.table(x=rnorm(N), y=sample(c('a','b','c'),N,T))
probs = seq(.1,1,.1); newCols <- paste("q",100*probs,sep="");

DT2 <- DT[ ,list(Q=list(quantile(x,probs=probs))),by=y]
DT2
#   y                                                                          Q
#1: b -1.2817037351734,-0.840293441466144,-0.525195748246148,-0.259574774974136,
#2: c -1.26975023312311,-0.832359658553173,-0.513320691339448,-0.247863323660894,
#3: a -1.28189935066568,-0.838918942382995,-0.522409189372727,-0.257356179072232,

#Here I want to create 10 columns from Q called q10, q20...
DT2[ , newCols:=Q] #can't make this work because it is evaluated in the wrong environment I guess 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T14:56:39.330

尝试这个：

```
DT2 <- DT[ , as.list(quantile(x,probs=probs)),by=y]
setnames(DT2, c("y", paste0("q", seq(10, 100, by=10))))

#    y       q10        q20        q30        q40          q50       q60       q70       q80
# 1: b -1.281704 -0.8402934 -0.5251957 -0.2595748 -0.001625739 0.2526686 0.5251940 0.8379979
# 2: c -1.269750 -0.8323597 -0.5133207 -0.2478633  0.003413041 0.2598378 0.5353759 0.8477539
# 3: a -1.281899 -0.8389189 -0.5224092 -0.2573562  0.001186281 0.2542550 0.5244238 0.8401411
#         q90     q100
# 1: 1.284773 3.856234
# 2: 1.283465 4.322815
# 3: 1.273615 3.921410 
```

# ext.net - 如何动态填充组合框？

> ID：16150161
> 
> 赞同：0
> 
> 时间：2013-04-22T14:53:39.143
> 
> 标签：ext.net

在运行时尝试绑定存储变量时，我无法呈现 Combobox。

//aspx页面。

```
<%@ Page Language="C#" %>

<%@ Import Namespace="System.Collections.Generic" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<%@ Import Namespace="System.Data" %>
<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>
<!DOCTYPE html>
<html>
<head id="Head1" runat="server">
    <title>Ext.NET Examples</title>

    <script runat="server">
        Store storeTable;
        private void createStoreTable()
        {
            storeTable = new Store();
            storeTable.ID = "storeTable";
            Ext.Net.Model model = new Model();
            ModelField modelField = new ModelField();
            modelField.Name = "name";
            model.Fields.Add(modelField);
            storeTable.Model.Add(model);

        }
        private DataTable GetDataTable()
        {
            DataTable table = new DataTable();

            table.Columns.AddRange(new DataColumn[] {
            new DataColumn("name")   { ColumnName = "name",    DataType = typeof(string) },
            new DataColumn("ID")     { ColumnName = "ID",      DataType = typeof(double) }
        });

            foreach (object[] obj in this.Data)
            {
                table.Rows.Add(obj);
            }

            return table;
        }
        private object[] Data
        {
            get
            {
                DateTime now = DateTime.Now;

                return new object[]
            {
                new object[] { "peter", 1 },
                new object[] { "John", 2},
                new object[] { "Stella", 3}
            };
            }
        }
        private void PopulateEmp()
        {
            try
            {
                createStoreTable();
                this.storeTable.DataSource = GetDataTable();
                cboTable.Store.Add(storeTable);
                cboTable.DisplayField = "name";
                cboTable.ValueField = "ID";
                cboTable.Render();
            }
            catch (Exception ex)
            {
                X.Msg.Show(new MessageBoxConfig
                {
                    Message = ex.Message,
                    Title = "Error Message",
                    Width = 300,
                    Buttons = MessageBox.Button.OKCANCEL
                });
                X.Msg.Show();
                //Response.Write(ex.Message);
            }
        }
        protected void cboTable_Change(object sender, EventArgs e)
        {
            PopulateEmp();
        }

        protected void Page_Load(object sender, EventArgs e)
        {

        }
</script>

</head>
<body>
    <form id="form1" runat="server">
    <ext:ResourceManager ID="ResourceManager1" runat="server" />
    <ext:FormPanel ID="frmPanel1" runat="server">
        <Items>
            <ext:ComboBox runat="server" ID="cboDB" FieldLabel="select comp" Text="delete">
                <Items>
                    <ext:ListItem Text="MS" Value="MS"/>
                    <ext:ListItem Text="Oracle" Value="Oracle" />
                    <ext:ListItem Text="Java" Value="Java" />
                </Items>
                <DirectEvents>
                    <Select OnEvent="cboTable_Change" />
                </DirectEvents>
            </ext:ComboBox>
            <ext:ComboBox ID="cboTable" runat="server" FieldLabel="Select Emp">
            </ext:ComboBox>
            <ext:TextField runat="server" ID="lblTest" FieldLabel="Name" />
            <ext:Button ID="btnSearch" runat="server" Text="Search" />
        </Items>
    </ext:FormPanel>
    </form>
</body>
</html> 
```

在上面的示例中，我在第二个组合框之后有一个文本框和一个按钮。当我试图在选择第一个组合框时呈现另一个组合框时，它工作正常，但第二个下拉列表最后呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:40:25.117

请更换

```
cboTable.Render(); 
```

和

```
cboTable.InsertTo(1, this.frmPanel1); 
```

我也会放

```
cboTable.SuspendScripting(); 
```

到 try 块的开头。否则，这

```
cboTable.DisplayField = "name";
cboTable.ValueField = "ID"; 
```

生成 JavaScript 以反映客户端属性。但它不是必需的，因为您正在重新渲染 ComboBox。

# twitter-bootstrap - 显示一个弹出框并隐藏其他弹出框

> ID：16150163
> 
> 赞同：69
> 
> 时间：2013-04-22T14:53:42.880
> 
> 标签：twitter-bootstrap

我有几个按钮，每个按钮都需要一个弹出框。
我想要这样：
当我的用户点击其中一个时，我希望其他人被隐藏。所以只显示一个弹出框
检查并帮助我纠正这个例子：

```
var mycontent='<div class="btn-group"> <button class="btn">Left</button> <button class="btn">Middle</button> <button class="btn">Right</button> </div>' 
```

```
$('.btn').popover({
    html: true,
    content:mycontent,
    trigger: 'manual'
}).click(function(e) {
    $(this).popover('toggle');
    e.stopPropagation();
});

$('html').click(function(e) {
     $('.btn').popover('hide');
}); 
```

我的html：

```
<ul>
    <li>
        <a href="#" class="btn" data-toggle="popover" data-placement="bottom" title="" >Popover</a>
    </li>
    <li>
       <a href="#" class="btn" data-toggle="popover" data-placement="bottom" title="" >Popover</a> 
    </li>
</ul> 
```

[jsfiddle 示例](http://jsfiddle.net/moalla/fsRaN/2/)

添加类似以下代码的内容以某种方式解决了我的问题：

```
$('.btn').click(function(e) {
     $('.btn').popover('hide');
}); 
```

但是通过在每个按钮上单击两次就会出错

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-04-22T20:41:18.910

不知何故，我为我的需要创建了一个示例。我使用了这段代码：

```
$('.btn').popover();

$('.btn').on('click', function (e) {
    $('.btn').not(this).popover('hide');
}); 
```

在这里查看[演示](http://jsfiddle.net/moalla/vFDSZ/2/)

并更正了之前的[演示](http://jsfiddle.net/moalla/fsRaN/4/) ，希望对其他人有所帮助

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-08-11T21:15:38.510

我以前看到的答案都没有动态弹出框，所以这就是我想出的。正如一些人所指出的，如果不使用`.remove()`. 我从 bootstrap 网站上创建了[一个示例并创建了](http://jsfiddle.net/fScua/)[这个新的 fiddle](http://jsfiddle.net/losmescaleros/zoqvomva/)。`selector: '[rel=popover]'`使用该选项添加动态弹出框。当即将显示弹出框时，我对所有其他弹出框调用destroy，然后`.popover`从页面中删除内容。

```
$('body').popover({
                selector: '[rel=popover]',
                trigger: "click"
            }).on("show.bs.popover", function(e){
                // hide all other popovers
                $("[rel=popover]").not(e.target).popover("destroy");
                $(".popover").remove();                    
            }); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-05-25T12:30:23.700

最简单的方法是 `trigger="focus"`在你的弹出窗口中设置

> 下次点击关闭
> 
> 使用焦点触发器在用户下次单击时关闭弹出框。

```
<a tabindex="0" class="btn btn-lg btn-danger" role="button" data-toggle="popover" data-trigger="focus" title="Dismissible popover" data-content="And here's some amazing content. It's very engaging. Right?">Dismissible popover</a> 
```

**注意**- 这意味着弹出框将在您单击它后立即隐藏

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-06-18T15:41:00.637

这是我正在使用的快速通用解决方案，您不需要提前知道弹出框的类是什么。我还没有对它进行过广泛的测试。我也在下面使用切换，因为隐藏的行为与切换完全不同。

```
 var $currentPopover = null;
  $(document).on('shown.bs.popover', function (ev) {
    var $target = $(ev.target);
    if ($currentPopover && ($currentPopover.get(0) != $target.get(0))) {
      $currentPopover.popover('toggle');
    }
    $currentPopover = $target;
  });

  $(document).on('hidden.bs.popover', function (ev) {
    var $target = $(ev.target);
    if ($currentPopover && ($currentPopover.get(0) == $target.get(0))) {
      $currentPopover = null;
    }
  }); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-30T22:21:07.750

使用 Bootstrap 3.3.7 我找到了这个解决方案：

```
var _popoverLink = $('[data-toggle="popover"]');

_popoverLink.on('click', function(){
  _popoverLink.popover('destroy').popover({container: 'body'});
  $(this).popover('show');
}); 
```

问候。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-03-19T05:19:38.183

这是一个对我有用的解决方案。在我的脚本中，我不通过 HTML 中的 data 属性传递 var，我更喜欢我的 js 文件中的逻辑。

```
 $(".vote").popover({
                trigger: " click",
                title: "Attention",
                content: "You must be a member of the site to vote on answers.",
                placement: 'right'
            });

            $('.vote').on('click', function (e) {
                $('.vote').not(this).popover('hide');
            }); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-02-23T00:49:39.590

您对此太认真了，只需在触发打开新弹出框之前关闭每个打开的弹出框：

```
// Hide any active popover first
            $(".popover").each(function () {
                var $this = $(this);
                $this.popover('hide');
            });

//Now Execute your new popover
$('.btn').popover({
                html: true,
                content: mycontent,
                trigger: 'manual'
            }).click(function (e) {
                $(this).popover('toggle');
                e.stopPropagation();
            }); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-08-19T13:18:14.093

这是执行此操作的最简单和优雅的方法：

```
 $('[data-toggle="popover"]').on('click', function(){
        $('[data-toggle="popover"]').not(this).popover('hide');
    }); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-06-28T15:03:44.337

在“losmescaleros”答案的帮助下，这对我来说非常有效：

```
$('body').popover({
  selector: '[data-toggle="popover"]',
  trigger: "click"
}).on("show.bs.popover", function(e){
  // hide all other popovers
  $("[data-toggle='popover']").not(e.target).popover("destroy");                  
}); 
```

没有任何双击问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-05T22:23:26.140

我在使用 bootstrap v3 发布的任何答案来解决这个问题时遇到了一些困难。经过一番搜索，我发现我的主要问题是没有设置正确的弹出框触发器。它应该设置为操作问题中列出的“手动”。

下一步非常简单，并且提供了比我在其他答案中看到的解决方案更好的行为，所以我想我会分享。

```
$('html').on('click', function(e) {
  if($(e.target).hasClass('btn')) {
    $(e.target).popover('toggle');
  }

  if(!$(e.target).parent().hasClass('popover')) {
    $('.popover').prev('.btn').not(e.target).popover('toggle');
  }
}); 
```

此解决方案使您能够在单击页面上的任何其他位置（包括另一个弹出框链接）时关闭弹出框，但允许您单击弹出框本身而不关闭它，以便用户可以访问弹出框以进行复制粘贴文本等操作。

希望这对某人有所帮助，这是一个工作小提琴。 [https://jsfiddle.net/hL0pvaty/](https://jsfiddle.net/hL0pvaty/)

ps - 在我的示例中，我只使用 .btn 类作为选择器，因为它用于操作的问题。我建议使用不那么通用的东西。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-25T14:15:27.630

```
<ul>
<li><i class="fa fa-trash-o DeleteRow" id=""></i>1</li>
<li><i class="fa fa-trash-o DeleteRow" id=""></i>2</li>
<li><i class="fa fa-trash-o DeleteRow" id=""></i>3</li>
</ul>

// Close other popover when click on Delete/Open new popover - START //
     $('.DeleteRow').on('click', function (e) {
        $('.popover').not(this).popover('hide');
     });
 // Close other popover when click on Delete/Open new popover - END// 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-08T20:04:15.650

当单击图标并打开相应的弹出框时，它会具有一个以“弹出框 *”开头的值，称为 aria- describeby。

所以你找到这个图标并触发点击它们，但不是现在点击的图标。

```
$('.icon-info').click(function(){
    $(".icon-info[aria-describedby*='popover']").not(this).trigger('click');
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-15T18:50:18.127

我选择了我在这个线程和其他线程上看到的方法的组合。我的要求规定：

*   一次只能看到一个弹出框
*   单击弹出框外的任意位置应关闭弹出框
*   弹出框应包含一个控件
*   不需要重新绑定 popover 事件

    ```
     function bindEvents() {

             setupPopupBinding();

             setupPopupDismissal();
        };

        function setupPopupBinding() {
               $('.addSectionItem').popover({
                      html: true,
                      content: function () {
                            return createDropdowns($(this).data('sectionid'))[0].outerHTML;
                      },
                      placement: "right",
                      trigger: "click focus"
               }).on("inserted.bs.popover", function (e) {
                    //initialize dropdown
                    setupSelect2();
               }).on("hide.bs.popover", function (e) {
                     $('.select2-container--open').remove();
               });
        }

        function setupPopupDismissal() {
               $('body:not(.addSectionItem)').on('click', function (e) {
               $('.addSectionItem').each(function () {
               //the 'is' for buttons that trigger popups
               //the 'has' for icons within a button that triggers a popup
               if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
               $(this).popover('hide');
               $('.popover').has(e.target).remove();
            }
        });
        });
        }

        function createDropdowns(sectionId: number) {
               var dropdown = $('<div/>')
               .attr('Id', 'sectionPopupWrapper' + sectionId)
               .addClass('popupWrapper')
               .append($('<select/>').addClass('sectionPopup'))
               .append($('<button/>').addClass('btn btn-primary btn-xs')
               .attr('data-sectionid', sectionId)
               .text('Add'));

        return dropdown;
        } 
    ```

# java - struts 应用程序的多选项卡导致数据不一致

> ID：16150164
> 
> 赞同：0
> 
> 时间：2013-04-22T14:53:43.563
> 
> 标签：java, struts, tabbing

我正在使用 Struts 1.2.9。当我使用多个选项卡时，应用程序面临问题。

说当我同时填写每个选项卡中的字段时，我可以看到从第二个选项卡的请求号输入的数据在数据库中更新为第一个选项卡的请求号。

不确定同步操作的执行方法是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:08:18.373

简而言之：不，但这也取决于您具体在说什么。

Struts 1 动作就像 servlet：每个动作映射有一个实例。通常，您几乎*从*不想使用实例变量来存储任何状态。如果您的问题与请求级数据有关，则操作编码不正确，应消除实例变量。

如果问题在于会话级数据，则更难解决：在大多数浏览器中，同一浏览器窗口中的选项卡共享会话。

如果您需要在多个选项卡中拥有多个用户，那么您需要实现一个额外的会话范围层，类似于 JBoss Seam 和类似的。

# functional-programming - `[< >]` 在 OCaml 中是什么意思？

> ID：16150173
> 
> 赞同：9
> 
> 时间：2013-04-22T14:54:05.687
> 
> 标签：functional-programming, ocaml, camlp4

我看过一些源代码

```
let rec parse_document = parser
    | [< len = parse_int32; st; >] ->
      parse_list [] (ES.take_int32 len st)
    | [< >] -> malformed "parse_document" 
```

我能知道`[< >]`里面是什么吗？谷歌搜索这种迹象太难了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:05:25.050

这是[Stream](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Stream.html)数据类型的语法糖。它的操作在[使用 OCaml 开发应用程序](http://caml.inria.fr/pub/docs/oreilly-book/html/)一书的[这一章](http://caml.inria.fr/pub/docs/oreilly-book/html/book-ora040.html)中有详细描述。

语法糖不是编译器内置的，需要经过Camlp4预处理器的预处理。为此，您必须添加`-pp camlp4o`到编译命令行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:03:53.367

这是一个流。它主要用于创建解析器。但是流已从 OCaml 中删除，现在作为camlp4 扩展提供。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T15:04:01.267

它是[Stream 解析语法扩展](http://ocaml.org/tutorials/stream_expressions.html#Stream_Literals)的一部分，表示空流。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T15:03:02.463

[这就是流](http://caml.inria.fr/pub/docs/tutorial-camlp4/tutorial002.html)的字面语法。流就像一个列表，只是一次只有一个元素可用，并且您通过读取它来删除第一个元素。

它似乎主要用于解析器代码。解析器——`parser`在你的例子中用关键字声明——是可以“使用”流元​​素的函数。

# ruby-on-rails - 在不阻塞鼠标光标的情况下禁用日期选择器的手动输入

> ID：16150179
> 
> 赞同：1
> 
> 时间：2013-04-22T14:54:18.357
> 
> 标签：ruby-on-rails, input, datepicker, readonly, manual

我正在为我的文本框使用 jquery ui datepicker，并将它们标记为只读以防止手动输入（如此[处](https://stackoverflow.com/questions/4164542/how-to-disable-manual-input-for-jquery-ui-datepicker-field)建议）。我仍然遇到的问题是，当用户将鼠标移到文本框上时，光标会变为被阻止的光标图像。这给用户一种印象，即他无法对该字段执行任何操作。虽然如果他继续点击它，他会得到日期选择器并可以选择一个日期。我的问题是：有没有一种方法可以优雅地处理这个问题，而无需为鼠标光标编写所有操作代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-17T09:56:55.683

例如，通过使用 css 光标属性。您可以将其更改为您喜欢的光标。

我的日期选择器字段有这个：

```
.form-control.datepicker {
  &[disabled], &[readonly] {
    cursor: pointer;
    background-color: #ffffff;
} 
```

这样，您可以将光标更改为指针，并在输入被禁用或只读时将背景颜色保持为白色。

# jquery - 通过选择另一个复选框来选择所有复选框

> ID：16150181
> 
> 赞同：0
> 
> 时间：2013-04-22T14:54:28.510
> 
> 标签：jquery, asp.net-mvc, client-side, checkbox

大家好，我从 jquery 开始，当我尝试通过单击另一个复选框来选择页面中的所有复选框时遇到问题。

这是我的 Jquery 代码：

```
$('.selecionarTodos').live('click', function () {

        alert("test");

        var checkbox = $(this).children('td').children('[type="checkbox"]');

        $('.headerChkItem').each(function () {

            if (checkbox.is(':checked')) {
                $(this).css('background-color', '');
                checkbox.attr('checked', false);
                $(this).children('td').children('[id*="hfSelecionada"]').val('false');
                qtdTotal = qtdTotal - parseFloat($(this).children('.quantidade').text().replace(',', '.'));
            }
            else {
                $(this).css('background-color', '#e8f783');
                checkbox.attr('checked', true);
                $(this).children('td').children('[id*="hfSelecionada"]').val('true');
                qtdTotal = qtdTotal + parseFloat($(this).children('.quantidade').text().replace(',', '.'));
            }

        });
    }); 
```

这是我的客户端代码：

```
<asp:TemplateField HeaderText="Selecionar" ItemStyle-HorizontalAlign="Center">
  <HeaderTemplate>
   <input type="checkbox" id="headerChkItem" cssclass="selecionarTodos" runat="server" />
     </HeaderTemplate>
       <ItemTemplate>
   <input type="checkbox" id="chkItem" disabled="disabled" cssclass="selecionado" runat="server" />
       </ItemTemplate>
 </asp:TemplateField> 
```

PS.：当我测试时，Jquery 中的“警报”没有运行。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:56:37.447

您需要将其从 an 更改`id="headerChkItem"`为`class="headerChkItem"` Also - 是`"cssclass"`服务器端语言的一部分吗？还是应该这样`"class"`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:38:20.383

我猜您的服务器代码（来自您的示例）看起来像这样：

```
<asp:ObjectDataSource runat="server" ID="DataSource" SelectMethod="GetData" TypeName="WebApplication1.Test"></asp:ObjectDataSource>
<asp:GridView runat="server" ID="Grid" DataSourceID="DataSource">
    <Columns>
        <asp:TemplateField HeaderText="Selecionar" ItemStyle-HorizontalAlign="Center">
            <HeaderTemplate>
                <input type="checkbox" class="selecionarTodos headerChkItem" runat="server" />
            </HeaderTemplate>
            <ItemTemplate>
                <input type="checkbox" disabled="disabled" class="selecionado chkItem" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>            
    </Columns>
</asp:GridView> 
```

对于这个网格，你需要这样的东西：

```
$('.selecionarTodos').on('click', function () {
        var gridCheckboxes = $(this).parents('table').find('input:checkbox.chkItem');
        var qtdTotal = 0;

        if ($(this).is(':checked')) {
            $(this).css('background-color', '');
            gridCheckboxes.attr('checked', true);
            qtdTotal = qtdTotal - parseFloat($(this).children('.quantidade').text().replace(',', '.'));
        } else {
            $(this).css('background-color', '#e8f783');
            gridCheckboxes.attr('checked', false);
            qtdTotal = qtdTotal + parseFloat($(this).children('.quantidade').text().replace(',', '.'));
        }
    }); 
```

您的错误主要是：

*   当类是正确的类时使用 cssclass 属性
*   错误选择表格中的复选框

我仍然不明白为什么您为所有标题复选框使用每个循环。我发布的代码仅位于标题复选框上，当您单击它时，网格中的所有其他复选框将根据标题复选框状态被选中或取消选中。

# web-services - 如何在 Web 应用程序中处理这个问题？

> ID：16150187
> 
> 赞同：0
> 
> 时间：2013-04-22T14:54:44.473
> 
> 标签：web-services, web, security

我有一个数据库支持的网络应用程序。我需要这个功能：

有一个包含行的表，我需要生成一个 URL。如果用户单击 URL（例如包含在电子邮件中），则会针对特定 id 更新列值。

我知道我可以创建一个链接，比如[http://server.com/update?id=30303030&newvalue=](http://server.com/update?id=30303030&newvalue=) 'dxckdk';

但是，这不会很安全，因为有人可能会尝试使用生成的 id 发送请求。

确保这一点的最佳方法是什么？

谢谢你的帮助！

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:04:19.393

使用[随机生成的 UUID（令牌）](http://en.wikipedia.org/wiki/UUID)

1.  几乎可以保证不会有可预测的序列

2.  不能重放，即令牌仅供一次性使用。请求[http://server.com/update?token=mxyzptlk](http://server.com/update?token=mxyzptlk)后，该键值不应重复使用

3.  不能以任何方式进行逆向工程。与加密值不同，一旦其源材料或加密密钥被泄露，就会被泄露。UUID 是不可预测的。AFAIK，他们也不容易受到逆向工程的影响。

4.  它们生成起来相对简单，处理开销也很低（无论如何取决于您的平台）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:27:37.797

您可以尝试对查询字符串值使用加密。这种方式没有人可以改变数据事实上没有人可以得到你在查询字符串中发送的内容。这个技巧有加密/解密开销的缺点，但它是安全的。

我喜欢这种方法，因为它可以链接并支持加密和普通查询字符串 [http://weblogs.asp.net/bradvincent/archive/2008/10/27/helper-class-querystring-builder-chainable.aspx](http://weblogs.asp.net/bradvincent/archive/2008/10/27/helper-class-querystring-builder-chainable.aspx)

[http://www.codeproject.com/Articles/25719/Query-string-encryption-for-ASP-NET](http://www.codeproject.com/Articles/25719/Query-string-encryption-for-ASP-NET)

# android - 有没有办法在 Android 中关闭动态加载的库？

> ID：16150191
> 
> 赞同：4
> 
> 时间：2013-04-22T14:54:47.867
> 
> 标签：android, linux, shared-libraries, dalvik

作为非 Android 人员的序言（一些 Linux 人员可能知道此信息的答案）：

Android 中的每个应用程序都在 Dalvik 虚拟机的一个实例中运行。启动应用程序时，一个名为 ActivityManager 的实体会写入管道以通知另一个实体 Zygote 需要启动应用程序。Zygote 是一个空白的 Dalvik VM 实例，预加载了库，当通过管道被召唤时，它会克隆自己，并且克隆会降低与要启动的应用程序关联的 Linux 用户的权限级别。这可以在启动应用程序时节省时间和内存 - 考虑重新加载所有库并每次都进行所有设置的替代方案。

我的问题是在 Zygote 中加载了一个特定的库，我想在这个特定的过程中关闭它，因为我想使用我自己的库版本。我已经将我的本机代码与我的 .so 文件链接起来，该文件被复制到适当的文件夹中，并在应用程序启动时通过 Java 层“System.load('xyz')”加载，但是当我的代码运行时，它正在调用原始系统库的功能，而不是我的。当我运行“cat /proc/NNNN/maps”时，我可以看到旧库和我的一样在内存中。

有没有办法在我的应用程序中关闭该特定库？如果没有，有没有办法确保对该库中函数的任何/每个调用都传递给我的版本而不是旧版本？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:03:56.087

在最好的情况下关闭共享库（使用`dlclose()`）很棘手，因为它会取消映射库的代码。如果稍后调用该代码——可能是 C++ 析构函数——程序将立即崩溃。由于该库是由您的代码以外的代码加载的，因此在您取消映射时，另一个线程完全有可能正在执行该库中的代码，再次导致崩溃。

所以，不要那样做。:-)

如果您可以将您的库版本构建为静态库并将其直接链接到您的代码中，您应该能够完全避免该问题。

FWIW，各种库（特别是 SSL 和 ICU）都链接到 Dalvik，而不是由 zygote 显式加载，因此如果您尝试替换其中一个，`/system/lib`无论您是否从 zygote 分叉，您都将获得该版本。

# nuget - 更新 NuGet 包：当前包源中没有可用的包更新

> ID：16150192
> 
> 赞同：4
> 
> 时间：2013-04-22T14:54:47.770
> 
> 标签：nuget, t4mvc

列出我的解决方案中的包

```
PM> Get-Package

Id                             Version              Description/Release Notes                                                                                                                                                       
--                             -------              -------------------------                                                                                                                                                       
...
T4MVC                          3.2.0                T4MVC is a T4 template that generates strongly typed helpers for ASP.NET MVC.                                                                                                   
T4MVCExtensions                3.2.0                Runtime helpers used by code generated by T4MVC                
... 
```

检查可用的 T4MVC 版本：

```
PM> Get-Package -ListAvailable -Filter T4MVC

Id                             Version              Description/Release Notes                                                                                                                                                       
--                             -------              -------------------------                                                                                                                                                       
...
T4MVC                          3.5.3                T4MVC is a T4 template that generates strongly typed helpers for ASP.NET MVC.                                                                                                   
T4MVCExtensions                3.5.3                Runtime helpers used by code generated by T4MVC                                                                                                                                 
... 
```

尝试更新：

```
PM> Get-Package -Updates
No package updates are available from the current package source. 
```

我的安装出了什么问题？

**更新**：

*   我将 VS Express 2012 用于 Web Update 2 和 NuGet 2.2.40116.9051
*   NuGet GUI 中也未显示包更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:27:09.247

当我尝试测试解决方案时，我实际上看到了和你一样的东西。但是在清理我的解决方案并重新启动 VS 后，它开始正常工作。

```
PM> Get-Package -Updates

Id                             Version              Description/Release Notes                                                                                                                                                                                             
--                             -------              -------------------------                                                                                                                                                                                             
EntityFramework                5.0.0                Entity Framework is Microsoft's recommended data access technology for new applications.                                                                                                                              
jQuery                         2.0.0                jQuery is a new kind of JavaScript Library....                                                                                                                                                                        
jQuery.UI.Combined             1.10.2               jQuery UI is an open source library of interface components — interactions, full-featured widgets, and animation effects — based on the stellar jQuery javascript library . Each component is built according to jQ...
jQuery.Validation              1.11.1               This jQuery plugin makes simple clientside form validation trivial, while offering lots of option for customization. That makes a good choice if you’re building something new from scratch, but also when you’re t...
Modernizr                      2.6.2                Modernizr adds classes to the <html> element which allow you to target specific browser functionality in your stylesheet. You don't actually need to write any Javascript to use it....                               
T4MVC                          3.5.4                T4MVC is a T4 template that generates strongly typed helpers for ASP.NET MVC.                                                                                                                                         
T4MVCExtensions                3.5.4                Runtime helpers used by code generated by T4MVC 
```

所以我不确定交易是什么，它可能是一个 NuGet 错误，但至少这可能提供一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:35:36.510

这似乎是 NuGet 中的一个错误，这是其他人的错误报告：http: [//nuget.codeplex.com/workitem/3289](http://nuget.codeplex.com/workitem/3289)

解决方法很简单：更新适用于单个项目，而不是解决方案。

# ios - 在没有 XML 的情况下更新 sqlite 数据库

> ID：16150196
> 
> 赞同：6
> 
> 时间：2013-04-22T14:54:56.067
> 
> 标签：ios, objective-c, sqlite, updates

我的应用程序需要来自 sqlite 数据库的数据。它将附带该数据库的一个版本，但我需要定期更新它（很可能每月一次）。通常，我一直在通过我设置的一堆 Web 服务将我的应用程序的其他部分作为 XML 发送更新，但是我现在正在处理的这个特定数据库非常大（大约 20-30 MB），而且我当我尝试以这种方式发送时，我收到超时错误。

我尝试将数据库放在我公司的服务器上，然后将其下载到一个`NSData`对象中。然后我将该数据对象保存到我的应用程序的 Documents 目录中。当我重新启动我的应用程序时，我收到一条错误消息“路径中的文件似乎不是 SQLite 数据库”。代码如下。

```
// Download data
NSURL *url = [NSURL URLWithString:@"http://www.mysite.net/download/myDatabase.sqlite"];
NSData *fileData = [[NSData alloc] initWithContentsOfURL:url];
NSLog(@"%@",fileData); // Writes a bunch of 8 character (hex?) strings

// Delete old database
NSError *error;
NSURL *destination = [app applicationDocumentsDirectory];
destination = [destination URLByAppendingPathComponent:@"myDatabase"];
destination = [destination URLByAppendingPathExtension:@"sqlite"];
NSLog(@"destination = %@",destination);
[[NSFileManager defaultManager] removeItemAtPath:[destination path] error:&error];

// Save into correct location
[fileData writeToURL:destination atomically:YES];
//[NSFileManager defaultManager] createFileAtPath:[destination path] contents:fileData attributes:nil]; // I also tried this, it doesn't work either. 
```

是否有更新应用程序将使用的大型数据库的标准程序？我觉得我正在尝试做的事情是不正确的，并且有一种完全不同的方法可以做到这一点，但我不知道是什么。

* * *

更新：我尝试了几件事来试图找到问题，但没有什么能让我更接近。我将尝试从服务器下载的数据库放到 USB 驱动器上，然后放到我正在开发的 mac 上，然后放到模拟器中我的应用程序的 Documents 文件夹中。当我通过这种方式传输数据库来运行我的应用程序时，它运行没有任何问题，我可以看到我的所有数据。

相反，我从模拟器中完全删除了我的应用程序并重新运行它，因此它将从头开始创建我的数据库。我用 USB 驱动器将这个新制作的数据库从我的 mac 转移到了我的服务器上。一旦文件在我的服务器上，我尝试在上面的代码块中运行我的“下载更新”，但是下次我启动我的应用程序时它仍然崩溃，并出现“路径上的文件似乎不是 SQLite 数据库”错误信息。

从这些测试中，我确信问题不在于我尝试下载的数据库。我的“下载更新”代码中的某些内容正在破坏数据库，但我仍然无法弄清楚原因，也没有找到可接受的替代方法来在我的应用程序启动后将我的更新发送给我的用户。

* * *

更新2：我一直在做更多的搜索，我了解到用户需要输入用户名和密码才能访问我服务器上的任何文件。我现在相信`NSData`我从上面的代码中得到的实际上是一个身份验证挑战，或者与此相关的东西，这就是为什么当我将它保存为它时，`NSFileManager`它不会被识别为 sqlite DB。

我发现通过身份验证的最简单的解决方案是[here](http://iphoneincubator.com/blog/security/a-simple-way-to-download-data-from-a-password-protected-web-page)。当我尝试这样做时`NSData *fileData = [NSData dataWithContentsOfURL:url options:NSDataReadingMapped error:&error];`（当然，在按照链接中的建议更改我的之后`url`），我得到一个错误`NSCocoaErrorDomain Code=256`，这只是未知错误。我`fileData`是`nil`在这样做之后。我注意到这篇文章很老了，所以我不知道它是否仍然支持。

我还找到了一个不同的解决方案来解决[这里](http://iosdevelopmentjournal.com/blog/2013/02/10/an-example-nsurlconnectiondelegate/)的身份验证问题，使用一个`NSURLConnection`而不是`dataWithContentsOfURL`. 这是较新的，但在该示例中使用了一些我以前从未真正见过的更高级的语法。我几乎可以从示例中复制粘贴，并且我的项目将毫无错误地构建，但我不知道使用`fetchURL:withCompletion:failure:`我的`UIViewController`. 我试过了

```
NSError *error;
NSData *fileData;
ExampleDelegate *download = [[ExampleDelegate alloc] init];
[download fetchURL:url withCompletion:fileData failure:&error]; 
```

但这会导致发送不兼容的指针的构建错误。我想我不能分别传递一个直接的`NSData`和`NSError`as`ExampleDelegateSuccess`和`ExampleDelegateFailure`对象，即使它们是`typedef`从什么来的。我可能需要做一些事情来`fileData`转换`error`它们，但是`typedef`ing 是我上面提到的“高级外观语法”之一，我真的不知道该怎么做。

它没有包含在他的示例中，但我发现了另`NSURLConnectionDelegate`一种称为`connection:didReceiveAuthenticationChallenge:` [此处](https://stackoverflow.com/questions/1973325/nsurlconnection-and-basic-http-authentication)的方法，我想我可以将其添加到示例中的代码中，这应该可以解决我的身份验证问题。我觉得如果我只知道如何打电话`fetchURL`，我就会被设置。有人对我需要做些什么来接听电话有什么建议`fileData`吗`error`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T00:24:20.160

我认为您的问题源于需要对您的服务器进行身份验证。

我推荐流行的[AFNetworking](https://github.com/AFNetworking/AFNetworking "AF网络")库来帮助进行 HTTP 调用。您将子类化`AFHTTPClient`以提供您的身份验证详细信息，如[本答案](https://stackoverflow.com/questions/12440059/using-afnetworking-and-http-basic-authentication)中所示。

然后在您的情况下，您可以使用[`AFXMLRequestOperation`](http://afnetworking.github.io/AFNetworking/Classes/AFXMLRequestOperation.html)直接下载您的 XML。然后，您可以将其写入磁盘。请注意，您需要阅读[iOS 数据存储指南](https://developer.apple.com/icloud/documentation/data-storage/)以查看 Documents 文件夹是否适合您使用（我认为不适合；缓存可能会更好）。

现在，您的`ExampleDelegate`代码（看起来像是来自[这里](http://iosdevelopmentjournal.com/blog/2013/02/10/an-example-nsurlconnectiondelegate/)）不起作用的原因是它是块类型`ExampleDelegateSuccess`，`ExampleDelegateFailure`因此您不能传递您的`NSData`和`NSError *`指针。您需要提供符合相应类型签名的块对象。

例如：

```
ExampleDelegate *download = [[ExampleDelegate alloc] init];
[download fetchURL:url 
          withCompletion:^(NSData *thedata) {
    NSLog(@"Success! Data length: %d", theData.length);

    // Delete old database
    NSError *error;

    // You need to declare 'app' here so you can use it in the line below.
    NSURL *destination = [app applicationDocumentsDirectory];
    destination = [destination URLByAppendingPathComponent:@"myDatabase"];
    destination = [destination URLByAppendingPathExtension:@"sqlite"];
    NSLog(@"destination = %@",destination);
    [[NSFileManager defaultManager] removeItemAtPath:[destination path] error:&error];

    // Save into correct location
    BOOL success = [fileData writeToURL:destination atomically:YES];
    NSLog(@"File written successfully? %d", success);
} 
          failure:^(NSError *theError){ 
    NSLog(@"Failure: %@", [theError localizedDescription]}
]; 
```

这些块将根据需要为您提供`NSData`和`NSError`实例，因此您无需声明自己的。[您可以在此处](http://twobitlabs.com/2012/12/objective-c-ios-blocks-cheat-sheet/)了解有关块的更多信息。

希望有帮助：D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T13:59:37.557

正如@silver_belt 所建议的那样，我最终最终使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/blob/master/README.md)来解决我的问题。不过，我可以在没有子类化的情况下做到这一点`AFHTTPClient`（请参阅我的答案[here](https://stackoverflow.com/questions/16444488/using-afnetworking-with-authentication-fails-with-correct-credentials/16445876#16445876)，我将其作为该问题的后续内容发布）。

最后，我只需要`#include "AFHTTPRequestOperation.h"`在我的视图控制器的 .h 文件中，然后在我使用的 .m 中

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"ftp://myUsername:myPassword@www.mysite.net/myfile.sqlite"]];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
NSURL *path = [[[app applicationDocumentsDirectory] URLByAppendingPathComponent:@"myfile"] URLByAppendingPathExtension:@"sqlite"];
operation.outputStream = [NSOutputStream outputStreamWithURL:path append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
    {
        NSLog(@"Successfully downloaded file to path: %@",path);
    }
                                 failure:^(AFHTTPRequestOperation *operation, NSError *error)
    {
        NSLog(@"Error in AFHTTPRequestOperation in clickedButtonAtIndex on FlightInfoController.m");
        NSLog(@"%@",error.description);
    }];

[operation start]; 
```

当我真正想开始下载时。希望这将使任何希望在未来这样做的人更容易！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T04:40:12.143

我们拥有定期更新的大型数据库。我不确定“大”有多大，但我们正在更新兆字节的数据。我们将我们的更新为 JSON 数据。JSON 的开销比 XML 少一点，并且有很多现成的库（如 JSONKit）。我们的一些用户数据连接不佳，有时会遇到困难。

我们一直在测试不同的更新方式。一种方法将数据分解为多个 JSON 文件。每个文件都单独下载，然后单独存储。使用多个文件的一个优点是，如果一个文件失败，您只需要重新发送该特定文件。

此外，我们使用多个线程一次处理最多 5 个请求/下载。这需要更多的管理，但有助于我们为用户提供更好的体验。AFHTTPClient 非常擅长处理这些东西。我讨厌不使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T18:25:36.237

每次都是全新/不同的数据库，还是同一数据库的更新版本？

如果是后者，您是否考虑过仅发送更改（通过添加/更新/删除的明确列表，或使用 Zumero 之类的东西来自动更新）？

# zend-framework - zf url helper 未在传递的路由对象中创建映射定义的 url

> ID：16150198
> 
> 赞同：0
> 
> 时间：2013-04-22T14:54:59.693
> 
> 标签：zend-framework, url, routes

我正在尝试创建链接以在我的 zf 应用程序中切换语言。我正在使用 url 帮助程序来执行此操作，但是如果我将路由传递给仅由变量组成的帮助程序，则它不起作用。

网址助手：

```
$this->url(array('lang'=>'en'),'langcontroller',false); 
```

路线：

```
$router->addRoute(
            'langcontroller',
            new Zend_Controller_Router_Route('/:lang/:controller',array(
                'lang' => ':lang',
                'module' => 'default',
                'controller' => ':controller',
                'action' => 'index'
            ))
    ); 
```

我希望这会产生以下 url：domain.com/en/current_controller 但我只是得到 domain.com/en。

我是否必须获取请求对象，获取当前控制器并将其添加到辅助调用中的参数数组中？如果是这样，我真的不明白帮助者的意义！

未遵循我正在经过的路线的路线图。我假设帮助程序将创建一个使用所述路线地图中的模式定义的 url，但使用来自请求对象的变量填充，除非被参数数组的内容覆盖？

对此的任何帮助将不胜感激。提前致谢。

# php - 从 parent_id-array 生成路径数组

> ID：16150199
> 
> 赞同：0
> 
> 时间：2013-04-22T14:55:00.053
> 
> 标签：php, arrays

我有一个来自数据库的数组，其中包含 id-parent_id 值：

```
[0] => Array
    (
    [id] => 45
    [parent_id] => 
    [name] => 1
    )        
[2] => Array
    (
    [id] => 152
    [parent_id] => 45
    [name] => 2
    )

[3] => Array
    (
    [id] => 153
    [parent_id] => 152
    [name] => 3
    ) 
```

我需要用路径获取数组

```
[0] => 1      
[2] => 1/2
[3] => 1/2/3 
```

我不能写函数来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:00:28.767

尝试这个。

```
$i = 0;
foreach ($arrays as $array){
    $newArray[] = empty($array['parent_id']) ? $array['name'] : $newArray[$i-1] . '/'. getParent($arrays, $array['parent_id']);
    $i++;
}

print'<pre>';print_r($newArray);print'</pre>';

function getParent($arr, $parent){
    foreach($arr as $k =>  $v){
        if(isset($v['parent_id']) && $v['parent_id'] == $parent) return $v['name'];
    }

  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:14:26.580

```
function getArrayRecursive ($array, $pid) {
    $id = NULL;
    array_walk($array, function ($subarray, $key) use (&$id, $pid) { if ($subarray["id"] == $pid) $id = $key; });
    return is_null($id)?"":getArrayRecursive($array, $array[$id]["parent_id"]).$array[$id]["name"]."/";
}

$newArray = array();
foreach ($array as $key => $subarray) {
    $newArray[$key] = getArrayRecursive($array, $subarray["parent_id"]).$subarray["name"];
} 
```

Ps：你也可以迭代地做到这一点。在 foreach 循环中有一个 while 循环。

# php - Laravel 中的 Pheanstalk，一切都以未处理的响应结束？

> ID：16150200
> 
> 赞同：1
> 
> 时间：2013-04-22T14:55:00.443
> 
> 标签：php, laravel, pheanstalk

我已经为 Laravel 安装了 Pheanstalk 包（[https://github.com/mikelbring/Pheanstalk](https://github.com/mikelbring/Pheanstalk)）我现在正在按照基本示例代码尝试将作业传递到队列并再次检索它。

这是我的代码：

```
Route::get('queue', function()
{

Pheanstalk::useTube('testtube')->put("job payload goes here\n");

$pheanstalk = Pheanstalk::connection();

$job = $pheanstalk
  ->watch('testtube')
  ->ignore('default')
  ->reserve();

echo $job->getData();

$pheanstalk->delete($job);
}); 
```

然而，当我运行它时，我得到一个“未处理的响应”错误，就像没有返回任何内容一样。

```
Unhandled Exception

Message:

Unhandled response: 
Location:

C:\wamp\www\adam\phire\bundles\pheanstalk\pheanstalk\classes\Pheanstalk\Command\PutCommand.php on line 108
Stack Trace:

 #0 C:\wamp\www\adam\phire\bundles\pheanstalk\pheanstalk\classes\Pheanstalk\Connection.php(121): Pheanstalk_Command_PutCommand->parseResponse('', NULL)
#1 C:\wamp\www\adam\phire\bundles\pheanstalk\pheanstalk\classes\Pheanstalk.php(511): Pheanstalk_Connection->dispatchCommand(Object(Pheanstalk_Command_PutCommand))
#2 C:\wamp\www\adam\phire\bundles\pheanstalk\pheanstalk\classes\Pheanstalk.php(273): Pheanstalk\Pheanstalk->_dispatch(Object(Pheanstalk_Command_PutCommand))
#3 C:\wamp\www\adam\phire\application\routes.php(45): Pheanstalk\Pheanstalk->put('job payload goe...')
#4 [internal function]: Laravel\Bundle::{closure}()
#5 C:\wamp\www\adam\phire\laravel\routing\route.php(163): call_user_func_array(Object(Closure), Array)
#6 C:\wamp\www\adam\phire\laravel\routing\route.php(124): Laravel\Routing\Route->response()
#7 C:\wamp\www\adam\phire\laravel\laravel.php(167): Laravel\Routing\Route->call()
#8 C:\wamp\www\adam\phire\public\index.php(34): require('C:\wamp\www\ada...')
#9 {main} 
```

有没有人熟悉 Pheanstalk 并且可以提供一些帮助？

谢谢亚当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:22:45.247

[这](https://github.com/pda/pheanstalk/blob/master/classes/Pheanstalk/Command/PutCommand.php#L103 "GitHub 源")是引发异常的地方。似乎您的 beanstalkd 正在返回 pheanstalk 不理解的内容。您确定要连接到工作中的 beanstalkd 实现吗？

Pheanstalk Laravel 捆绑包似乎不是问题。您是否尝试过使用相同的连接详细信息使用常规 Pheanstalk 进行测试？

# haxe - 如何使用 NME 和 Haxe 定位 HTML5？

> ID：16150202
> 
> 赞同：0
> 
> 时间：2013-04-22T14:55:10.740
> 
> 标签：haxe, nme

我使用以下行创建了 NME 附带的简单 NyanCat 示例项目（纯粹作为示例！）：

```
nme create NyanCat 
```

我可以将（目标）编译为 Flash，它可以使用以下行：

```
nme test project.nmml flash 
```

但是当我对 HTML5 尝试相同的操作时，使用以下行：

```
nme test project.nmml html5 
```

文件按预期创建，出现浏览器，但显示一个简单的灰色框（见图）。Firebug 建议图像中的灰色框是不透明度设置为“1”的 Canvas 对象。在这个对象的上方和下方还有一个画布对象。

通过萤火虫检查一切都是链接的（脚本文件在那里）。我试过 Chrome 和 Firefox。

![在此处输入图像描述](https://i.stack.imgur.com/6Zvak.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:33:24.853

尝试设置本地 Web 服务器并打开从该服务器生成的输出，而不是从文件系统。

最近在 haxeflixel.com 论坛上讨论了这个主题。但是haxeflixel现在已经关闭，所以我无法发布链接。

编辑：链接到 haxeflixel.com 上的主题 - [http://haxeflixel.com/forum/help/html5-test-page-not-showing-solved](http://haxeflixel.com/forum/help/html5-test-page-not-showing-solved)

# mule - Mule Quartz cron作业中的时区

> ID：16150203
> 
> 赞同：1
> 
> 时间：2013-04-22T14:55:15.437
> 
> 标签：mule

我有一个 Mule 流程，`quartz:inbound-endpoint`每天从早上 7 点到下午 6 点每 15 分钟运行一次。我想在美国东部时间运行这项工作......我如何在工作中提及时区。

```
<flow name="quartzBasedDelivery">
    <quartz:inbound-endpoint jobName="deliveryJob"
            cronExpression="*/15 07-18 * * ?">
        <quartz:endpoint-polling-job>
            <quartz:job-endpoint ref="testqueue" />
        </quartz:endpoint-polling-job>
    </quartz:inbound-endpoint>
    <logger message="QUARTZ found message for delivery #[payload]" level="INFO" />
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:54:18.853

[Quartz Cron Expression 时区目前无法从 Mule 端点配置（参见](http://www.mulesoft.org/jira/browse/MULE-6799)/upvote：http://www.mulesoft.org/jira/browse/MULE-6799 ）。

作为一种解决方法，您必须修补`org.mule.transport.quartz.QuartzMessageReceiver`以支持它。

# android - Android 操作栏主页按钮

> ID：16150205
> 
> 赞同：26
> 
> 时间：2013-04-22T14:55:20.080
> 
> 标签：android, android-actionbar

我已经像这样设置了我的操作栏，但是当我单击主页按钮时没有任何反应。下面的两个选项是启用的，所以它不应该自动进入家庭活动吗？

```
ab.setHomeButtonEnabled(true);
ab.setDisplayHomeAsUpEnabled(true); 
```

**操作栏**

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);

    final String[] activities;
    Resources res = getResources();
    activities =  res.getStringArray(R.array.activities);

    ActionBar ab = getActionBar();
    ab.setHomeButtonEnabled(true);
    ab.setDisplayHomeAsUpEnabled(true);
    ab.setTitle(R.string.app_name);
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    ab.show();

    /** Create an array adapter to populate dropdownlist */
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_spinner_dropdown_item, activities);

    /** Setting dropdown items and item navigation listener for the actionbar */
    getActionBar().setListNavigationCallbacks(adapter, navigationListener);

    /** Enabling dropdown list navigation for the action bar */
    getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-22T15:22:48.870

正如其他人所说，这种行为不会自动发生 - 你需要告诉它去哪里。

但是，我需要添加另一个答案，因为当前的答案都*违反*了 Android 设计准则 - 返回！= Home。请参阅[文档](http://developer.android.com/design/patterns/navigation.html)

你真正想做的事情是这样的：

```
@Override
public boolean onOptionsItemSelected(MenuItem menuItem) {
    switch (menuItem.getItemId()) {
        case android.R.id.home:
            Intent homeIntent = new Intent(this, HomeActivity.class);
            homeIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(homeIntent);
    }
    return (super.onOptionsItemSelected(menuItem));
} 
```

这会将您带到父活动，而不仅仅是通过后堆栈。我还添加了`Intent.Flag`清除后台堆栈，在进行家庭活动时很有用，并且可以在用户使用“向上”按钮时阻止后台堆栈陷入混乱

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-22T14:59:03.857

您还需要确保您的应用程序知道按下它时要做什么：

```
@Override
public boolean onOptionsItemSelected(MenuItem menuItem) {
    switch (menuItem.getItemId()) {
    case android.R.id.home:
      // ProjectsActivity is my 'home' activity
      super. onBackPressed();
      return true;
    }
  return (super.onOptionsItemSelected(menuItem));
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-19T05:47:20.127

[我们必须按照官方文档](http://developer.android.com/training/implementing-navigation/temporal.html)中的规定，在 AndroidManifast.xml 文件中将元数据定义到我们的子活动中：

```
<application ... >
...
<!-- The main/home activity (it has no parent activity) -->
<activity
    android:name="com.example.myfirstapp.MainActivity" ...>
    ...
</activity>
<!-- A child of the main activity -->
<activity
    android:name="com.example.myfirstapp.DisplayMessageActivity"
    android:label="@string/title_activity_display_message"
    android:parentActivityName="com.example.myfirstapp.MainActivity" >
    <!-- The meta-data element is needed for versions lower than 4.1 -->
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.myfirstapp.MainActivity" />
</activity> 
```

如果版本是 4.1 或更高版本，则无需定义元数据，并且您必须像在代码中那样启用操作栏主页按钮。无需使用后退按钮代码，它适用于我的 android 应用程序：[Helper+](https://play.google.com/store/apps/details?id=helper.plus)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-22T14:58:15.487

您需要定义此处发生的情况：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case android.R.id.home:
        onBackPressed();
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-03-29T06:28:49.863

您可以使用以下一种方法来实现这一点，尽管有很多方法可以做到这一点。

**把这条线放在你的`onCreate`**

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

**`onSupportNavigateUp`在您的活动中覆盖方法**

```
@Override
public boolean onSupportNavigateUp() {
    finish();
    return super.onSupportNavigateUp();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-22T14:58:52.887

在您的代码中添加这些行：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case android.R.id.home:
        System.out.println("Pressed Back Button");
        break;

    default:
        return super.onOptionsItemSelected(item);
    }
    return false;
} 
```

# jquery - 播放功能不能在 jquery 脚本中工作（joomla 2.5）

> ID：16150206
> 
> 赞同：0
> 
> 时间：2013-04-22T14:55:21.223
> 
> 标签：jquery, joomla, onclick

此 jquery 脚本适用于静态网站，但仅部分适用于 joomla 2.5

```
jQuery(document).ready(function() {
...
//script here changes text color on hover - it works
...
  var audioIsPlaying = false;
  jQuery("span").click(function (event) {
    if(audioIsPlaying != true) {
      var elementID = event.target.id;
      var oggVar = "audio/"+elementID +".ogg";
      var audioElement = document.createElement("audio");
      audioElement.setAttribute("src", oggVar); 
      audioElement.play();
      audioIsPlaying = true;
      audioElement.addEventListener("ended", function() {
          audioIsPlaying = false;    
      });
    };
  });
}); 
```

导致悬停时文本颜色变化的脚本部分有效，已被省略。问题是单击文本时应该唤起音频文件的脚本在 joomla 中不起作用（但在静态 html 中起作用。我已经检查了 oggVar 和 audioIsPlaying 并且它们被正确分配了值。oggVar 设置为path 和 audioIsPlaying true false. 我很困惑为什么该脚本在静态网站中有效，但在 joomla 中无效。此脚本的其他方面最近已发布，感谢收到的帮助，谢谢

# ios - 在 UITableView 中显示 Json 结果

> ID：16150207
> 
> 赞同：0
> 
> 时间：2013-04-22T14:55:22.440
> 
> 标签：ios, objective-c, json, uitableview

我试图把我的`JSON`结果放在我的`UITableView`. 我得到了，`JSON`但我不能把它们放到我的桌面视图中。知道我做错了什么吗？

这是一些相关的代码：

```
- (void)viewDidLoad {
    TitlosArray = [[NSMutableArray alloc] init];
    KeimenoArray = [[NSMutableArray alloc] init];
    [super viewDidLoad];
    [self fetchTweets];
} 
```

我的`JSON`解析器工作正常：

```
- (void)fetchTweets {
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(queue,  ^{
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://myselection.gr/support3/frontistiria_project/android_data.php/?type=publicNews"]];

        [self performSelectorOnMainThread:@selector(fetchedForecast:)withObject:data waitUntilDone:YES];
    });
}

- (void)fetchedForecast:(NSData *)responseData {
    NSError *error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSLog(@"Rows %@", [json objectForKey:@"total_rows"]);
    NSArray *items = [json valueForKeyPath:@"content"];

    NSEnumerator *enumerator = [items objectEnumerator];
    titlosjson.text=[[items objectAtIndex:1] objectForKey:@"title"];
    Keimenojson.text=[[items objectAtIndex:1] objectForKey:@"descr"];

    while (item = (NSDictionary*)[enumerator nextObject]) {
        [TitlosArray addObject:[item objectForKey:@"title"]];
        [KeimenoArray addObject:[item objectForKey:@"descr"]];
        NSLog(@"Title = %@", [item objectForKey:@"title"]);
        NSLog(@"Descr = %@",[item objectForKey:@"descr"]);
    }

    NSLog(@"%@",[TitlosArray objectAtIndex: 1]);
    myArray = [NSArray arrayWithArray:TitlosArray ];
    NSLog(@"%@", [myArray objectAtIndex: 2]);
} 
```

但我的问题`UITableView`：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return myArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //cell.textLabel.text = [NSString stringWithFormat:@"by %@", text];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T15:16:22.803

您正在创建空单元格，因此您的内容将不会显示。

尝试用`cellForRowAtIndexPath:`这个替换你的方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [TitlosArray objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T17:35:27.333

这有效，经过测试。

由示例单视图应用程序制成，在 IB 中添加了 tableView（并连接到`IBOutlet`）

```
#import "ViewController.h"

@interface ViewController ()
{
    NSMutableArray *titlosArray;
    NSMutableArray *keimenoArray;
}

@property (strong) IBOutlet UITableView *tableView;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.delegate = self;
    self.tableView.dataSource = self;

    titlosArray = [[NSMutableArray alloc] init];
    keimenoArray = [[NSMutableArray alloc] init];
    [super viewDidLoad];
    [self fetchTweets];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void)fetchTweets
{
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(queue,  ^{
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://myselection.gr/support3/frontistiria_project/android_data.php/?type=publicNews"]];

        [self performSelectorOnMainThread:@selector(fetchedForecast:)withObject:data waitUntilDone:YES];
    });
}

- (void)fetchedForecast:(NSData *)responseData
{
    NSError *error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSLog(@"Rows %@", [json objectForKey:@"total_rows"]);

    NSArray *items = [json valueForKeyPath:@"content"];

    //clear the arrays (if you're planning to download data more then once - refreshing...)

    [titlosArray removeAllObjects];
    [keimenoArray removeAllObjects];

    for (NSDictionary *item in items)
    {
        [titlosArray addObject:[item objectForKey:@"title"]];
        [keimenoArray addObject:[item objectForKey:@"descr"]];
    }

    //once you updated youd data-model you have to reload it
    [self.tableView reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return titlosArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = (NSString *)[titlosArray objectAtIndex:indexPath.row];

    return cell;
}

@end 
```

![在此处输入图像描述](https://i.stack.imgur.com/yHSqs.png)

**编辑：**

如果您还想查看字幕中的详细信息，可以更改`cellForRowAtIndexPath:`为：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = (NSString *)[titlosArray objectAtIndex:indexPath.row];

    cell.detailTextLabel.text=(NSString *)[keimenoArray objectAtIndex:indexPath.row];

    return cell;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/KjDAO.png)

请注意，如果您想显示完整的文本（因为您的查询返回每条记录的大量文本），您将不得不摆弄自定义`UITableViewCell`实现。

您可能会发现本教程很有趣：[Table View Animations and Gestures](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:36:56.243

我在这里更改您的代码，（希望您不会介意）尝试用以下代码替换您的代码：

```
- (void)fetchedForecast:(NSData *)responseData {
    NSError *error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSLog(@"Rows %@", [json objectForKey:@"total_rows"]);
    NSArray *items = [json valueForKeyPath:@"content"];

    NSEnumerator *enumerator = [items objectEnumerator];
    titlosjson.text=[[items objectAtIndex:1] objectForKey:@"title"];
    Keimenojson.text=[[items objectAtIndex:1] objectForKey:@"descr"];
    myArray = [[NSMutableArray alloc] initWithCapacity:0];
    while (NSDictionary *item = (NSDictionary*)[enumerator nextObject]) {
        NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [item objectForKey:@"title"], @"title",
                                    [item objectForKey:@"descr"], @"descr", nil];
        [myArray addObject:dictionary];
    }
}
//But I have problem with my UITableView:

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return myArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"TweetCell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    NSArray *myArray;
    cell.textLabel.text = [[myArray objectAtIndex:indexPath.row] valueForKey:@"title"];
    cell.detailTextLabel.text = [[myArray objectAtIndex:indexPath.row] valueForKey:@"descr"];

    return cell;
} 
```

以下是要点：

*   在您的`cellForRowAtIndexPath`方法中，您没有设置任何值`titleLabel`
*   我已经让你`cellStyle`可以`UITableViewCellStyleSubtitle`设置详细描述（如果你不喜欢它，你可以改变它）
*   最后，我没有使用两个不同的数组，而是使用了您的`myArray`（使该数组可变）并在其中添加了字典，然后在为单元格设置值时使用了这些值。

# actionscript-3 - 如何在旋转的瓦片地图中查找屏幕边界瓦片索引？

> ID：16150210
> 
> 赞同：3
> 
> 时间：2013-04-22T14:55:35.193
> 
> 标签：actionscript-3, rotation, tile, bounds, culling

通常，Axis-aligned (rotation = 0) tilemap 很容易遍历屏幕上的可见图块。

但是当整个瓦片地图旋转时，你如何“剔除”或过滤瓦片索引？

![在此处输入图像描述](https://i.stack.imgur.com/ZkTAc.png)

**注意**：这是为了改进 ActionScript 3.0（在[Genome2D](http://blog.flash-core.com/ "基因组二维")中）中的平铺渲染类，但其他计算机语言的答案也同样适用！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T01:56:35.883

我不是 100% 清楚你要对每个图块做什么，所以我假设你想找到要渲染的块和不渲染的块。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject%28%29)

您可以尝试在屏幕上设置一个虚拟对象并执行以下操作：

```
For each tile in tilemap
    if (dummyScreenObj.hitTestObject(tile))
        tile.visible = true
    else
        tile.visible = false 
```

# c++ - 未解决的外部尝试使用 ffmpeg

> ID：16150211
> 
> 赞同：8
> 
> 时间：2013-04-22T14:55:39.523
> 
> 标签：c++, linker, ffmpeg

我正在尝试使用 ffmpeg 中的一些功能，并且遇到了弹性链接器错误。这是我所做的：

*   [从http://ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)下载了最新的 32 位“Dev”构建（即 ffmpeg-20130418-git-ee94362-win32-dev）
*   在 Visual Studio 2012 Premium 中创建了一个“General - empty”C++ 项目
*   将 [ffmpeg]/lib 文件夹添加到 Linker -> Input -> "Additional Library Directories"
*   添加了“swscale.lib;avutil.lib;avformat.lib;avdevice.lib;avcodec.lib;” 到链接器->输入->“附加依赖项”
*   在 C++ -> 常规 -> 附加包含目录下添加了以下内容：
    *   [ffmpeg]/包括
    *   [ffmpeg]/include/libswscale
    *   [ffmpeg]/include/libavformat

这是我的 main.cpp：

```
#include "avformat.h"

int main()
{
    av_register_all();
} 
```

这失败了：

> 错误 LNK2019：函数 _main 中引用的未解析的外部符号“void __cdecl av_register_all(void)”(?av_register_all@@YAXXZ)

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-22T15:00:15.403

当您使用 C++ 时，您需要将您的 ffmpeg`#include`语句括起来，`extern "C"`如下所示：

```
extern "C"
{
    #include "avformat.h"
} 
```

# javascript - 静态变量作为计数器

> ID：16150213
> 
> 赞同：1
> 
> 时间：2013-04-22T14:55:44.697
> 
> 标签：javascript, jquery, jquery-plugins

我正在编写一个 jQuery 插件，需要跟踪页面上使用该插件的对象数量。有没有办法在插件中创建一个跟踪自身实例的静态变量？

这是我到目前为止的插件：

```
(function ($) {
    $.fn.my_plugin = function (options)
    {
        var plugin_count = 0;

        return this.each(function() {
            alert(++plugin_count);
        });
    }
}(jQuery)); 
```

在我的页面上：

```
<div class="plugin_div"></div>
<div class="plugin_div"></div>
<div class="plugin_div"></div>
<div class="plugin_div"></div>

<script language="javascript">
    $('.plugin_div').my_plugin();
</script> 
```

当页面加载时，我收到四个警报，显示“1”。

我怎样才能写这个，以便变量为每个调用的元素递增`my_plugin()`？

**编辑：**修复了错误的复制粘贴工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:57:27.063

你可以这样做：

```
(function ($) {
    $.fn.my_plugin = function (options)
    {
        $.fn.my_plugin.count = $.fn.my_plugin.count || 0;

        return this.each(function() {
            alert(++$.fn.my_plugin.count);
        });
    }
}(jQuery)); 
```

或者不要使用`$.fn`but`$.my_plugin.count`这样您也可以将插件的默认值定义为：

```
$.my_plugin = {
    count : 0,
    defaults : {}
};

// Extend options with plugin defaults!
$.extend(options, $.my_plugin.defaults); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:57:56.073

在 JavaScript 中，函数是一流的对象，因此您可以在它们上存储任意属性，例如`$.fn.my_plugin.whatever`

当然，如果您可以在不重复函数名称的情况下执行此操作会更好 - 但`arguments.callee`已弃用，因此您必须继续使用完整的函数名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:58:31.270

只需将“plugin_count”的声明移到函数外部：

```
(function ($) {
    var plugin_count = 0;

    $.fn.my_plugin = function (options)
    {
        return this.each(function() {
            alert(++plugin_count);
        });
    }
}(jQuery)); 
```

这在由外部匿名函数调用形成的闭包中捕获“plugin_count”。当闭包将为您执行此操作时，无需将计数维护为任何显式对象的属性。

# java - '.' 什么时候出现 在正则表达式中不匹配？

> ID：16150214
> 
> 赞同：11
> 
> 时间：2013-04-22T14:55:46.427
> 
> 标签：java, regex

我遇到了以下问题（简化）。我写了以下

```
Pattern pattern = Pattern.compile("Fig.*");
String s = readMyString();
Matcher matcher = pattern.matcher(s); 
```

在读取一个字符串时，即使它以“Fig”开头，匹配器也无法匹配。我将问题追溯到字符串下一部分中的流氓字符。它的 codePoint 值 1633 来自

```
(int) charAt(i) 
```

但与正则表达式不匹配。我认为这是由于输入过程中某处的非 UTF-8 编码所致。

[Javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)说：

> 预定义的字符类。任何字符（可能匹配也可能不匹配行终止符）

大概这不是严格意义上的字符，但仍然是字符串的一部分。如何检测此问题？

更新：这是由于 (char)10 不容易发现。我上面的诊断是错误的，下面的所有答案都与所提出的问题相关并且很有用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T15:01:34.720

检查这一点很容易：

```
import java.util.regex.*;

public class Test {
    public static void main(String[] args) {
        Pattern pattern = Pattern.compile(".");
        for (char c = 0; c < 0xffff; c++) {
            String text = String.valueOf(c);
            if (!pattern.matcher(text).matches()) {
                System.out.println((int) c);
            }
        }
    }
} 
```

在我的盒子上，输出是：

```
10
13
133
8232
8233 
```

其中，10 和 13 分别是“\n”和“\r”。133（U+0085）是“下一行”，8232（U+2028）是“行分隔符”，8233（U+2029）是“段落分隔符”。

注意：

*   这不会测试基本多语言平面之外的任何 Unicode 字符
*   它只使用默认选项
*   这似乎与您对角色 1633 (U+0661) 的体验相矛盾

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-22T15:01:10.770

Java 正则表达式中的`.`字符匹配*除*行终止符之外的任何字符，除非您`Pattern.DOTALL`在编译模式时使用该标志。

为此，您将使用这样的模式：

```
Pattern p = Pattern.compile("somepattern", Pattern.DOTALL); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T15:24:12.413

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，根据标志`.`可以有**3 种略有不同的解释。**

### 默认

`.`当mode 和mode 被禁用时，将排除[行终止符（默认）：](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#lt)[`DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)[`UNIX_LINES`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNIX_LINES)

> 行终止符是一个或两个字符的序列，用于标记输入字符序列的一行的结尾。以下被认为是线路终止符：
> 
> *   换行符（换行符）（`'\n'`），
> *   一个回车符，后跟一个换行符 ( `"\r\n"`)，
> *   一个独立的回车符 ( `'\r'`)，
> *   下一行字符 ( `'\u0085'`)，
> *   行分隔符 ( `'\u2028'`)，或
> *   段落分隔符 ( `'\u2029'`)。

这意味着`.`相当于`[^\n\r\u0085\u2028\u2029]`在这种情况下。

### `UNIX_LINES`启用模式但`DOTALL`禁用模式时

`.`**仅** `\n`当[`UNIX_LINES`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNIX_LINES)启用模式但[`DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)禁用模式时才会排除。这意味着`.`相当于`[^\n]`在这种情况下。

> 如果[`UNIX_LINES`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNIX_LINES)激活模式，则唯一识别的行终止符是换行符。

### `DOTALL`启用模式时

如果[`DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)启用模式，`.`将匹配任何字符**，无异常**。

> 除非指定了标志，否则正则表达式`.`匹配除行终止符之外的任何字符。[`DOTALL`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T15:07:54.727

关于使用正则表达式非打印字符，您可以阅读以下两篇文章：

1.  [如何使用正则表达式匹配不可打印的字符](http://web.archive.org/web/20130826142223/http://answers.oreilly.com/topic/214-how-to-match-nonprintable-characters-with-a-regular-expression)
2.  [如何在正则表达式中使用 Unicode 代码点、属性、块和脚本](http://web.archive.org/web/20131104102548/http://answers.oreilly.com/topic/215-how-to-use-unicode-code-points-properties-blocks-and-scripts-in-regular-expressions/)

即使您完全使用 UTF，也会有很多惊喜。

# delphi - 是否可以在 Delphi 中为通用记录创建类型别名

> ID：16150218
> 
> 赞同：6
> 
> 时间：2013-04-22T14:55:59.663
> 
> 标签：delphi, generics

我想为通用记录定义一个记录类型（类型别名）。我想这样做，以便单元 b 的用户可以在不使用单元 a 的情况下访问 TMyGenericRecord。我有这样的单位：

```
unit a;
interface
type
  TMyNormalRecord = record
    Item: Integer;
  end;
  TMyGenericRecord<T> = record
    Item: T;
  end;
implementation
end.

unit b;
interface
type
  TMyNormalRecord = a.TMyNormalRecord;  // works
  TMyGenericRecord<T> = a.TMyGenericRecord<T>; // E2508 type parameters not allowed on this type
implementation
end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:10:20.850

这个问题的简单答案是该语言不支持泛型类型别名。

[唯一可以使用泛型参数的地方](http://docwiki.embarcadero.com/RADStudio/en/Declaring_Generics)是：

1.  泛型[类、接口、记录和数组类型](http://docwiki.embarcadero.com/RADStudio/en/Declaring_Generics#Class.2C_Interface.2C_and_Record_Types)，或
2.  通用[程序类型](http://docwiki.embarcadero.com/RADStudio/en/Declaring_Generics#Procedural_Types)，或
3.  通用[方法](http://docwiki.embarcadero.com/RADStudio/en/Declaring_Generics#Parameterized_Methods)。

# mysql - mysql通过另一个ID相同的表的会话从客户端选择内容

> ID：16150220
> 
> 赞同：0
> 
> 时间：2013-04-22T14:56:04.557
> 
> 标签：mysql

有人可以帮我写这样的代码吗

```
$result = mysqli_query($con, "SELECT msg FROM posts WHERE name='user_who_has_login'");
while($row = mysqli_fetch_array($result)) { 
    echo "" . $row['msg'] . "";
} 
```

我的目标是只显示登录到他/她帐户的用户发布的消息

问题是正在使用两个表，其中 user_who_has_login 的名称来自他/她的帖子所在的不同表，但两个表具有相同的名称和 id，表中的这种格式 USERS id 等同于表 POSTS 中的 userid 相同的用户名 =姓名

# asp.net - 数据集未在 app.config 中使用连接字符串

> ID：16150222
> 
> 赞同：1
> 
> 时间：2013-04-22T14:56:11.853
> 
> 标签：asp.net, dataset, connection-string

我在 SQL Server 数据库之上的 Web 应用程序的数据访问层中使用数据集。当我将应用程序部署到 Web 服务器时，我将 Web 应用程序的 web.config 和数据集类库的 app.config 中的数据库连接字符串更改为指向生产服务器。我过去多次以这种方式更改连接字符串，但这次数据集似乎在我调试时继续指向开发数据库，​​而不是我在web.config中配置的那个。我通过运行查询测试了各个表适配器，它们正在从 app.config 文件中指定的正确数据库返回数据。只有当我调试时，我才从错误的数据库中获取数据。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:17:19.427

重新启动 Visual Studio 解决了这个问题。它表明对 app.config 文件的更改没有传播到设置文件（尽管我自己手动更改了它）。

# google-chrome-extension - chrome.contextMenus 排除 URL？

> ID：16150225
> 
> 赞同：2
> 
> 时间：2013-04-22T14:56:13.657
> 
> 标签：google-chrome-extension

我使用`chrome.contextMenus`documentUrlPatterns 过滤显示上下文菜单的位置。

我尝试在模式前加上“-”，但这并没有改变任何东西......

```
function recreateStuff(){
        if(logoncmid!=-1){}
        var hosts=[];
        var ihosts=[];
        for (var i = savedData.length - 1; i >= 0; i--) {
          hosts.push(savedData[i].host);
          ihosts.push("-"+savedData[i].host);
          //console.log(savedData[i]);
        };
        // hosts created ...
        chrome.contextMenus.update(logoncmid,{documentUrlPatterns: hosts});
        chrome.contextMenus.update(regcmid,{documentUrlPatterns: ihosts});

} 
```

是否可以制作排除列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:10:01.037

我认为目前这是不可能的，因为`documentUrlPatterns`需要一组[匹配模式](https://developer.chrome.com/extensions/match_patterns.html)并且没有办法表达否定匹配模式。

您可以[打开一个功能请求](https://code.google.com/p/chromium/issues/list)，要求一种机制来表达排除的匹配模式，就像对带有和[的内容脚本所做的那样](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)。`exclude_matches``exclude_globs`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:27:53.453

黑客怎么样？:)

```
var windowTopTab = [];
var curWin = 1;
var curUrl = "";

function fetchCurUrl() {
  if (!windowTopTab[curWin]) return;
  chrome.tabs.get(windowTopTab[curWin], function(tab) {
    curUrl = url;
  });
}

chrome.tabs.onActivated.addListener(function(activeInfo) {
  windowTopTab[activeInfo.windowId] = activeInfo.tabId;
  fetchCurUrl();
  recreateStuff();
});
chrome.windows.onFocusChanged.addListener(function(windowId) {
  curWin = windowId;
  fetchCurUrl();
  recreateStuff();
});
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
  if (windowTopTab[curWin])
    if (windowTopTab[curWin] == tabId) {
      fetchCurUrl();
      recreateStuff();
    }
});

var contextm = chrome.contextMenus.create({
  title: "* Fill RegForm",
  contexts: ["editable"],
  onclick: genericOnClick
});

function recreateStuff() {
  var curHN = getHostname(curUrl);
  var reg = true;
  for (var i = savedData.length - 1; i >= 0; i--) {
    if (savedData[i].host == curHN) reg = false;
  }

  if (reg) {
    chrome.contextMenus.update(contextm, {
      title: "* RegForm",
      onclick: genericOnClick
    });
  } else {
    chrome.contextMenus.update(contextm, {
      title: "* LoginForm",
      onclick: genericOnClick2
    });
  }
} 
```

# java - imageJ 如何获得像素 rgb 值？

> ID：16150226
> 
> 赞同：3
> 
> 时间：2013-04-22T14:56:27.793
> 
> 标签：java, imagej

我有一个简单的插件可以保存多边形坐标：

```
Roi roi = imp.getRoi();
Polygon p = roi.getPolygon();
for (int i = 1; i <= p.npoints; i++) {
// létrehozzuk az onvif féle vector-t
org.onvif.ver10.schema.Vector myVector = new Vector();
myVector.setX((float) p.xpoints[i - 1]);
myVector.setY((float) p.ypoints[i - 1]);
op.getPoint().add(myVector);
// IJ.log("Vector X Elements " + i + " :" + MyVector.getX());

        } 
```

但我想得到这样的坐标rgb值： ![在此处输入图像描述](https://i.stack.imgur.com/FTqUe.jpg)

你能帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:17:41.177

假设图像是 32 位 RGB：

```
ImagePlus im = IJ.getImage();
ImageProcessor imp = im.getProcessor();

int[] rgb = new int[3];
imp.getPixel(X,Y,rgb);

IJ.log(Arrays.toString(rgb)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:16:40.700

```
int[] r;

        for (int i = 1; i <= p.npoints; i++) {

            r = imp.getPixel(p.xpoints[i - 1], p.ypoints[i - 1]);

            ij.IJ.log("Red: "+ r[0]);
            ij.IJ.log("Green: "+ r[1]);
            ij.IJ.log("Blue: "+ r[2]);
            ij.IJ.log("index: "+ r[3]);

        } 
```

# wpf - 当我扩展面板并进行简单的 ArrangeOverride 时，内容从中间而不是左上角开始

> ID：16150227
> 
> 赞同：2
> 
> 时间：2013-04-22T14:56:28.557
> 
> 标签：wpf, vb.net, xaml, custom-controls

当我扩展面板并制作简单的 ArrangeOverride 时，内容从中间而不是左上角开始。据我所知，新点 0,0 应该使内容从左上角开始。谁能解释这种行为？

当我缩放主窗口时，内容（文本）的左上角保持在主窗口的中间

![在此处输入图像描述](https://i.stack.imgur.com/K9gXz.png)

```
Public Class AvoidInfiniteSizePanel
    Inherits Panel

    Protected Overrides Function MeasureOverride(availableSize As Size) As Size
        If Me.Children.Count = 1 Then
            Dim Content = Me.Children(0)
            Content.Measure(New Size(Double.MaxValue, Double.MaxValue))

            Dim MyDesiredSize As Windows.Size = New Size(Math.Max(Content.DesiredSize.Width, MinimalWidth), Math.Max(Content.DesiredSize.Height, MinimalHeight))
            Return MyDesiredSize
        Else
            Return MyBase.MeasureOverride(availableSize) 'Default gedrag
        End If
    End Function

    Protected Overrides Function ArrangeOverride(finalSize As Size) As Size
        If Me.Children.Count = 1 Then
            Me.Children(0).Arrange(New Rect(New Point(0, 0), finalSize))
        Else
            Return MyBase.ArrangeOverride(finalSize) 'Default gedrag
        End If    

    End Function
End Class 
```

和 XAML：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:infiniteSizeTester"
                Title="MainWindow" Height="125" Width="230">
    <Grid>
        <local:AvoidInfiniteSizePanel>
            <TextBlock VerticalAlignment="Top" HorizontalAlignment="Left" >Why is this in the center instead of at position 0,0</TextBlock >
        </local:AvoidInfiniteSizePanel>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:09:31.060

`finalSize`您错过了从 ArrangeOverride返回值。因此，Panel 将其大小报告为 (0, 0)。由于它在其父 Grid 中居中，因此 TextBlock 出现在中心位置。

```
Protected Overrides Function ArrangeOverride(finalSize As Size) As Size
    If Me.Children.Count = 1 Then
        Me.Children(0).Arrange(New Rect(New Point(0, 0), finalSize))
        Return finalSize 'here
    Else
        Return MyBase.ArrangeOverride(finalSize)
    End If    
End Function 
```

* * *

无论如何，我建议简化您的代码并像这样编写面板：

```
Public Class CustomPanel
    Inherits Panel

    Protected Overrides Function MeasureOverride(availableSize As Size) As Size
        Dim desiredSize As New Size(MinimalWidth, MinimalHeight)
        For Each child As UIElement In InternalChildren
            child.Measure(New Size(Double.PositiveInfinity, Double.PositiveInfinity))
            desiredSize.Width = Math.Max(desiredSize.Width, child.DesiredSize.Width)
            desiredSize.Height = Math.Max(desiredSize.Height, child.DesiredSize.Height)
        Next child
        Return desiredSize
    End Function

    Protected Overrides Function ArrangeOverride(finalSize As Size) As Size
        For Each child As UIElement In InternalChildren
            child.Arrange(New Rect(finalSize))
        Next child
        Return finalSize
    End Function
End Class 
```

# c# - 在 ASP.NET MVC 3 中的每一行上创建具有不同列号的动态表

> ID：16150230
> 
> 赞同：0
> 
> 时间：2013-04-22T14:56:37.553
> 
> 标签：c#, html, asp.net-mvc-3, razor

我有用户可以填写数据的模板表单。表格表示为表格。在数据库中，每个填写的模板表单的数据都与 RowNum 和 ColNum 一起保存，因此我可以按需重新创建表单。问题在于，对于一​​种形式，不同行上的列会有所不同。为了清楚起见，这里是一个简单的例子：

![示例表](https://i.stack.imgur.com/C3h0w.png)

这里第一行是空的，第二行有一列显示图片，然后是四行两列。

这只是一个例子。设置会因形式而异。现在我收集这样的数据：

```
List<object> dummyData = new List<object>()
            {
                new  {Row = 1, Col = 1, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"},
                new  {Row = 1, Col = 2, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"},
                new  {Row = 2, Col = 1, IsRequired = true, QuestionText = "No?", FieldValue = "string"},
                new  {Row = 3, Col = 1, IsRequired = false, QuestionText = "No?", FieldValue = "string"}
            };
ViewBag.Header = dummyData; 
```

这只是为了测试，但真实数据看起来很像这样。因此，您可以看到第一条和第二条记录是针对同一行的，但现在我想不出一种在视图中正确表示数据的方法。

现在，我正在通过使用`<td colspan="2">`我知道不需要两列的地方对所有内容进行硬编码，但是当我在示例中遇到这样的情况时，没有关于如何添加额外列而不是新行的解决方案：

```
new  {Row = 1, Col = 1, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"},
                new  {Row = 1, Col = 2, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"}, 
```

也许我需要一种完全不同的方法，现在我想到了某种使用方法`foreach`和一些嵌套逻辑，但现在想不出任何可行的方法。

附言

现在我在视图中所做的就是：

```
@{
              foreach (var item in ViewBag.Header)
              {

                  <tr><td>item.QuestionText</td><td>item.FieldValue</td></tr>

              }
           } 
```

# php - 如何实现“点击，处理，然后在DIV中显示内容而不刷新和重定向”

> ID：16150234
> 
> 赞同：0
> 
> 时间：2013-04-22T14:56:41.413
> 
> 标签：php

首先，我要感谢你们所有人帮助我解决我的最后一个问题（显示图像）。我真的很感谢你所有的时间和帮助。

现在我确实遇到了另一个关于重定向页面、更新 DIV 的棘手问题。

我的问题是，将产品添加到购物车后，页面重定向到商店页面，我真的不想要。我尝试使用“#”符号，但这引发了另一个问题，即更新购物车的 DIV。

我知道我应该使用 Ajax 之类的东西，而且我已经在网上搜索了几天的解决方案。但是，可悲的是，我很困惑，因为我是那些新鲜的鱼。我已经被这个头痛困扰了好几天了。有人可以帮我吗？

如果您可以清楚地看到它，下面是代码：

显示图像：

```
<div class="product">
        <h3>'.stripslashes($row['name']).'</h3>
        <div class="info">
            <img src="./product_images/'.$row['name'].'.jpg" width="150" border="2">
            <p>'.stripslashes($row['description']).'</p>
            Price:'.$row["price"].'<br>
            <font size ="2">In Stock: '.$row["qty"].'</font>
            <a href="addToCart.php?ID='.$row['id'].'"><img src="images/cart_navy.gif" border=0 alt=""></a>
        </div>
    </div> 
```

如您所见，要添加特定项目，我调用并将 ID 发送给它。

add_To_Cart 的代码：

```
addToCart ();
echo "<SCRIPT language='Javascript'>
           //document.location=\"\admins/admin_index.php\";
       //document.location= ../index.html;
       //document.location=\"\./index.html\";
       document.location=\"\./store.php\";

       </SCRIPT>";}
       exit(); 
```

add To Cart() 函数在另一个名为 shopping_Cart 的脚本中声明

并且 shopping_Cart 还包含一个名为 get_Cart() 的函数来显示购物车详细信息。

在主页面（即商店）中，我调用 get_Cart() 来显示购物车的详细信息。

我的代码有点乱？对此感到抱歉。我不知道我是否清楚地解释了我的问题。基本上，我想单击产品的添加按钮，并调用 add_To_cart() 函数添加项目，并在不刷新且不重定向到其他页面的情况下更新 Cart Div 中的结果。

顺便说一句，我当前的代码对我有用。但问题是每次我点击“添加到购物车”按钮时，页面都会刷新并重定向到 store.php。

最好的祝愿！！

明

顺便说一句，我在我的电脑上尝试了 J 查询，.load() 函数不起作用。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script> 
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs
/jquery/1.4.0/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$("#btn2").click(function(){
$("#test").load("load.php");
  });
});
</script>

<h3 id="test">Old Info</h3>
<button id="btn2" type="button">Load New Info</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:10:46.003

在标题中包含 jQuery 库，然后阅读[jQuery 的 Ajax 文档](http://api.jquery.com/jQuery.ajax/)。

这是一个非常简单的例子。假设您的页面有一个段落`<p class='content'></p>`，您希望使用位于您服务器上的 PHP 脚本的内容来更新该段落。

然后在页面中包含以下 JS 代码：

```
$('.process').click(function () {
    $.ajax({
        url: "test.php"
    }).done(function (response) {
        $('.content').html(response);
    });
}); 
```

然后在您的页面中包含一个将触发事件的链接：

```
<a href="#" class="process">Process Action</a> 
```

# xamarin.ios - 在跨平台项目中使用 xamarin 保存字符串

> ID：16150239
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:57:02.123
> 
> 标签：xamarin.ios, xamarin.android, xamarin, xamarin-studio

我正在使用 xamarin（适用于 android 和 iphone），我想保存一个字符串。

事实上，我使用的是 JSON 解析器，我通过意图传递了一个字符串对象，所以我想将对象保存到 SQLite 中，但我遇到了一些困难，所以我问为什么不只保存那个字符串内存并在我想要对象时解析它？

你怎么看待这件事？

我不认为我们必须使用框架或库来制作它，但我在 xamarin 官方网站上没有看到有关此的信息！

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:02:16.460

> 所以我问为什么我不把那个字符串保存在内存中并在我想要对象时解析它？

只要您可以保证应用程序将继续运行，那么这将起作用。

但是，对于一般的 Android 案例，我建议不要这样做——对于一般案例，Android 可以随时终止您的应用程序。当您的应用程序稍后重新创建时，Android 会将用户直接带到您的页面并将相同的 Intent 传递给您的页面 - 但在那个阶段您的缓存对象将不在内存中。

> 我不认为我们必须使用框架或库来制作它

不知道你在这里问什么，但 Xamarin 提供了几个完整的应用程序示例，并且周围也有一些框架（例如我写[了这个](https://github.com/slodge/MvvmCross)）

# android - 更改 Widget 应用程序的文本大小

> ID：16150240
> 
> 赞同：2
> 
> 时间：2013-04-22T14:57:04.293
> 
> 标签：android, android-widget, textview

我有一个 PreferenceActivity，用户可以在其中选择 Widget 应用程序的 TextView 的大小。按下 Widget 时会调用该活动。我在 OnPause 中设置文本大小，但它不起作用。代码有问题吗？

```
 public class WidgetSettings extends PreferenceActivity 
{
    private int mAppWidgetId = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.layout.widget_setttings_layout);

        Intent intent = getIntent();
        Bundle extras = intent.getExtras();
        if (extras != null) {

            mAppWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,
                    AppWidgetManager.INVALID_APPWIDGET_ID);
        }
}

    @Override
    protected void onPause() 
    {
        super.onPause();
        float textSize = Float.parseFloat(PreferenceManager.getDefaultSharedPreferences(this).getString("batteryTextSize", "12"));

        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(getBaseContext());

        RemoteViews remoteView = new RemoteViews(getBaseContext().getPackageName(), R.layout.widget_layout);

        remoteView.setFloat(R.id.textView1, "setTextSize", 22);

        appWidgetManager.updateAppWidget(mAppWidgetId, remoteView);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-23T09:15:38.797

您应该只使用以下方法。

```
remoteViews.setTextViewTextSize(R.id.textView, TypedValue.COMPLEX_UNIT_SP, 18); 
```

我知道为时已晚。但是，我希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T21:27:14.440

我的应用程序中有这个。

```
// Update the widget
Intent intent = new Intent(this, Widget.class);
intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
int[] ids = { R.xml.widget };
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, ids);
sendBroadcast(intent); 
```

然后在您的应用小部件提供程序 onUpdate 中（设置远程视图后）：

```
//appWidgetManager.updateAppWidget(appWidgetIds, views);
AppWidgetManager.getInstance(context).updateAppWidget(new ComponentName(context, Widget.class), views); 
```

第一个是文档所说的。我发现第二个按预期工作。

# jquery - 自动创建从段落分享此内容

> ID：16150242
> 
> 赞同：0
> 
> 时间：2013-04-22T14:57:08.547
> 
> 标签：jquery

嗨，我正在尝试自动从文本链接内容以分享...</p>

每个页面上有 20 个帖子需要链接，即为什么我做了 #tweet01

这是我的存根，但我想我错过了一些东西，非常感谢任何帮助，在此先感谢！

```
<p id="tweet01">When I was 10 I started washing cars. I then offered to clear paths for those without cars. I soon made money from most houses on my street.</p>

  <div class="stream-item-footer">
    <ul class="tweet-actions">
        <script type="text/javascript">
            var tweet = $("#tweet01").text()
            var shortTweet = $("#tweet01").text()    // get the text within the div
            .trim()    // remove leading and trailing spaces
            .substring(0, 100)    // get first 100 characters
            .split(" ") // separate characters into an array of words
            .slice(0, -1)    // remove the last full or partial word
            .join(" ") + "..."; // combine into a single string and append "..."
            $(document).ready(function() {
                    $().html('<li><span class="st_twitter" st_url="http://www.domain.com" st_title="'+ ++shortTweet +'"></span></li>');
                    $().html('<li><span class="st_linkedin" st_url="http://www.domain.com" st_title="'+ ++tweet +'" st_summary="'+ ++tweet +'"></span></li>');
                    $().html('<li><span class="st_facebook" st_url="http://www.domain.com" st_title="'+ ++tweet +'" st_summary="'+ ++tweet +'"></span></li>');
                    $().html('<li><span class="st_googleplus" st_url="http://www.domain.com" st_title="'+ ++tweet +'" st_summary="'+ ++tweet +'"></span></li>');
            });
        </script>
     </ul>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:31:23.503

您在这里要做的是将此代码移动到页面顶部，并在页面准备好时运行它。然后你想要做的是，循环遍历每条推文（在给它们所有相同的类之后），并附加到其各自的`.tweet-actions`.

像这样：

```
<p id="tweet01" class="tweet">When I was 10 I started washing cars. I then offered to clear paths for those without cars. I soon made money from most houses on my street.</p>
<div class="stream-item-footer">
    <ul class="tweet-actions"></ul>
</div>

<p id="tweet02" class="tweet">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce eleifend pharetra risus non facilisis. Sed sagittis, felis vel viverra metus.</p>
<div class="stream-item-footer">
    <ul class="tweet-actions"></ul>
</div>

<p id="tweet03" class="tweet">Bacon ipsum dolor sit amet flank shoulder pork chop, turducken shankle strip steak capicola biltong jerky. Salami filet mignon short ribs pork chop.</p>
<div class="stream-item-footer">
    <ul class="tweet-actions"></ul>
</div> 
```

然后，在页面顶部添加此脚本：

```
<script>
    $(function () {
        $('.tweet').each(function () {
            var tweet = $(this).text();
            var shortTweet = tweet // get the text within the div
            .trim() // remove leading and trailing spaces
            .substring(0, 100) // get first 100 characters
            .split(" ") // separate characters into an array of words
            .slice(0, -1) // remove the last full or partial word
            .join(" ") + "..."; // combine into a single string and append "..."
            var $actions = $(this).next('.stream-item-footer').find('.tweet-actions');

            $actions.append('<li><span class="st_twitter" st_url="http://www.domain.com" st_title="' + shortTweet + '">Twitter</span></li>');
            $actions.append('<li><span class="st_linkedin" st_url="http://www.domain.com" st_title="' + tweet + '" st_summary="' + tweet + '">LinkedIn</span></li>');
            $actions.append('<li><span class="st_facebook" st_url="http://www.domain.com" st_title="' + tweet + '" st_summary="' + tweet + '">Facebook</span></li>');
            $actions.append('<li><span class="st_googleplus" st_url="http://www.domain.com" st_title="' + tweet + '" st_summary="' + tweet + '">Google+</span></li>');
        });
    });
</script> 
```

演示：http: [//jsfiddle.net/XHgtg/](http://jsfiddle.net/XHgtg/)

# ruby-on-rails - Rails Capybara Spec 未检测到显示：无

> ID：16150243
> 
> 赞同：1
> 
> 时间：2013-04-22T14:57:09.163
> 
> 标签：ruby-on-rails, capybara, integration-testing

我正在编写 Capybara 规范并试图检测某些东西是否可见。以下规范正在通过，它不应该通过，因为 #packages 是 display: none。

```
 it "should navigate through marketing successfully" do
    visit root_path
    click_link 'Learn More'
    page.should have_content 'We are the perfect match'
    click_link 'Packages'
    page.should have_selector('#packages', visible: true)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:26:17.020

如果您使用 javascript 或 jQuery 实现显示/隐藏功能，Capybara/RSpec 不会使用它，因为它不一定运行完整的浏览器。

Capybara 文档在某种程度上解释了如何在此处测试需要 JavaScript 的方法.. [https://github.com/jnicklas/capybara](https://github.com/jnicklas/capybara)

希望这可以帮助

# c++ - 类中的分段错误（核心转储）

> ID：16150247
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:57:15.060
> 
> 标签：c++, segmentation-fault

运行以下代码时出现此错误：

```
Segmentation fault (core dumped) 
```

我找不到原因。

```
 #ifndef DQMCBASE__H
 #define DQMCBASE__H
 const double pi=3.141592645;
 #define rnd() ((double)rand())/ RAND_MAX

 /**
  * The basic walker class. This class serves the purpose of providing 
  * a structure that can be reused by inheriting. 
  */
 class DQMCWalker {
   double _x;        ///&lt; dummy variable to implement basic 1D      Harmonioscillator      example.
  This variable will be removed in future versions.
   double _timeStep; ///&lt; is the timestep in between to simultanious simulations
 public:
   DQMCWalker();
   ~DQMCWalker();
   /**
    * implements a normal distribution that can be used for the walking 
    * process defined in 
    * @see WalkNormal()
    *
    * @param variance the variance of the distribution.
    * @param meanvalue the mean value of the distribution.
    *
    * @return A double distributed according to a normal distribution.
    */
   double NormalDistribution(double variance, double meanvalue);

   /** 
    * a virtual function that describes the walking process of the walker. 
    *
    * @return returns 0, always.
    */
   virtual int WalkNormal();
   virtual double Potential();
   virtual double Weight(double);
   int Copy(DQMCWalker);
   double SetDeltaT(double);
   double GetDeltaT();
 };

 /*  *
  * The simulation class is a basic class that implements the basic features of           walking, branching 
  * TODO
  */
 template <class walker>
 class DQMCSimulation {
   walker* _walkers;
   walker* _copies;
   double _refE;
   double _timeStep;
   int _population;
   int _max_walkers;
   int _last_pop,_cur_pop,_nCopies;
 public:

   /**
    * The constructor is used to define the simulation parameters of an instance. It      takes two parameters, 
    * namely, the number of walkers and the time step in between two iterations.
    * 
    * @param n the number of walkers used in the simulation.
    * @param dt the time step in between two iterations.
    */
   DQMCSimulation(int n, double dt);
   ~DQMCSimulation();

   /**
    * This function is used to perform one iteration. Every time this function is           called 
    * a walkers are move according to the implementation of DQMCWalker::Walk(), next    the 
    * reference energy is calculted according to the formula
    *  TODO
    * and lastly, a birth-death process is performed.
    */
   int Iterate();
   double GetReferenceEnergy();
   walker* WalkerArray();
 };

 #endif 
```

到这里为止可以嵌入到 DQMCBase.h 文件中

```
 /* DQMCBase.cpp */
 #include <iostream>
 #include<math.h>
 #include<stdlib.h>
 #include<ctime>
 //#include <DQMCBase.h>
 using namespace std;

 DQMCWalker::DQMCWalker() {
   _timeStep=0.1;
   _x=0.0;
 }
 DQMCWalker::~DQMCWalker() {
   _x=0.0;
 }
 double DQMCWalker::NormalDistribution(double variance=1.0, double meanvalue=0.0) {
   int samples=12;
   double res = 0.0;
   for(int i=0;i<samples;i++)
     res +=rnd();
   res = (res - samples*0.5)*sqrt(variance)+meanvalue;
   return res;
 }
 int DQMCWalker::WalkNormal() {
   _x+=NormalDistribution(1.0,0.0)*sqrt(_timeStep);
   return 0;
 }
 double DQMCWalker::Potential() {
   return 0.5*_x*_x;
 }

 double DQMCWalker::Weight(double refE) {
   return exp(-(Potential()-refE)*_timeStep);
 }
 int DQMCWalker::Copy(DQMCWalker w) {
   _x = w._x;
   return 0;
 }

 double DQMCWalker::SetDeltaT(double timeStep) {
   return (_timeStep = timeStep);
 }

 double DQMCWalker::GetDeltaT() {
   return _timeStep;
 }

 template <class walker>
 DQMCSimulation<walker>::DQMCSimulation(int n, double dt) {
   _max_walkers = n;
   _timeStep = dt;
   _population = n;
   _last_pop = _cur_pop = _population;
   _walkers = new walker[2*n];
   _copies = new walker[2*n];
   for(int i=0;i<2*n; i++) {
     _walkers[i].SetDeltaT(dt);
     _copies[i].SetDeltaT(dt);
   }
 }

 template<class walker>
 DQMCSimulation<walker>::~DQMCSimulation() {
   delete[] _walkers;
 }

 template <class walker>
 int DQMCSimulation <walker>::Iterate() {
   int i;
   /* Make the walkers walk */
   for(i=0;i<_cur_pop;i++) 
     _walkers[i].WalkNormal();

   /* Calculating the reference energy */
   double avg=0.0;
   for(i=0;i<_cur_pop;i++) 
     avg += _walkers[i].Potential();
   avg/=_cur_pop;
   _refE =avg - (_cur_pop-_population)/(_population*_timeStep);
   _last_pop = _cur_pop;

   /* This is the part where walkers spawn and die */   
   int m,j;
   _nCopies = 0;
   for(i=0;i<_cur_pop;i++) {
     m = floor(_walkers[i].Weight(_refE)+rnd());
     if(m<3) m=3;
     if(m==0) { /* The poor Walker dies */
       if(_cur_pop>1) {
         _walkers[i].Copy(_walkers[_cur_pop]);
         i--, _cur_pop--;
       } else {
         cout << "WARNING :: Your population is dying!" << endl;
       }
     } else {
       for(j=1;j<m;j++) {
         _copies[_nCopies].Copy(_walkers[i]);
         _nCopies++;
       }
     }    
   }
   /* Adding the copies */
   for(j=0;j<_nCopies; j++) {
     _walkers[_cur_pop].Copy(_copies[j]);
     _cur_pop++;
   }

   return 0;
 }

 template<class walker>
 double  DQMCSimulation<walker>::GetReferenceEnergy() {
   return _refE;
 }

 template<class walker>
 walker* DQMCSimulation<walker>::WalkerArray() {
   return _walkers;
 }

 /*************************
  * 1D Harmonic Oscillator
 ************************/
 class DQMCHarmonic1DWalker : public DQMCWalker {
   double _x;
  public:
   DQMCHarmonic1DWalker() {
     _x=0.0;
   }
   int WalkNormal() {
     double dt = sqrt(GetDeltaT());
     _x+=NormalDistribution(1.0,0.0)*dt;
     return 0;
   }
   double Potential() {
     return 0.5*(_x*_x);
   }

   int Copy(DQMCHarmonic1DWalker w) {
      _x = w._x;
     return 0;
   }

 }; 
```

这是程序的主要内容

```
 int main() {
   srand ( time(NULL) );

   int i,j, count;
   double refE;
   cout << "Hamonic 1D:" << endl;
   DQMCSimulation<DQMCHarmonic1DWalker> simulation1(500,0.1);
   refE = 0.0;
   for(i=1; i<1000; i++) {
     simulation1.Iterate();
     refE += simulation1.GetReferenceEnergy();
     if(i%50==0) 
       cout << refE/i << ", ";
   }
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:01:07.083

第一个也是很容易注意到的问题是您需要遵循**[三/五规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**上课`DQMCSimulation`。

# java - 我无法使用 Play Framework 2.1.1 连接到数据库

> ID：16150248
> 
> 赞同：1
> 
> 时间：2013-04-22T14:57:17.890
> 
> 标签：java, scala, playframework, playframework-2.0

我正在尝试连接到我的 SQL Server 数据库，但控制台显示

> 找不到驱动程序：[net.sourceforge.jtds.jdbc.Driver]。

这是我的 Application.conf 中的代码：

```
db.default.url="jdbc:jtds:sqlserver://test:2433;DatabaseName=Treinamento"
db.default.driver=net.sourceforge.jtds.jdbc.Driver
db.default.user=user
db.default.password="pwrd" 
```

我将 jtds lib 添加到项目的 Jars 文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:52:53.557

您必须将 jar 文件放在 lib 文件夹中。

```
your-project/lib/the-jar-file.jar 
```

这意味着 lib 文件夹是 app、conf、public 文件夹（等等）的兄弟。

播放应用程序将找到所有罐子。您将不得不再次使您的项目黯然失色或理想化。

```
play eclipse
play idea 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:36:09.493

在 Build.scala 中添加依赖项并运行 play update

# winforms - RepositoryItemCheckEdit 不保持选中状态

> ID：16150249
> 
> 赞同：1
> 
> 时间：2013-04-22T14:57:21.643
> 
> 标签：winforms, devexpress, devexpress-windows-ui

我尝试将 a 添加`RepositoryItemCheckEdit`到我的`GridView`using`devexpress`和`Winforms`. 但是，我只能选中一个复选框。如果我选中另一个，我之前选中的复选框将变为未选中状态。我遵循了我在网上可以找到的所有内容，但无法完成这项工作。我错过了什么？

我插入列的代码部分：

```
gcIsEmirleri.DataSource = (from i in isemirleri
                            select new
                            {
                                ID = i.isEmriId,
                                // other attributes
                            }).ToList();

GridColumn column = gvIsEmirleri.Columns["Sec"];
if (column == null)
{
    gvIsEmirleri.BeginUpdate();

    DataColumn col = new DataColumn("Sec", typeof(bool));
    column = gvIsEmirleri.Columns.AddVisible("Sec");
    col.VisibleIndex = 0;
    col.Caption = "Sec";
    col.Name = "Sec";
    col.OptionsColumn.AllowEdit = true;

    gvIsEmirleri.EndUpdate();

    gvIsEmirleri.Columns["Sec"].UnboundType = DevExpress.Data.UnboundColumnType.Boolean;

    RepositoryItemCheckEdit chk = new RepositoryItemCheckEdit();
    chk.ValueChecked = true;
    chk.ValueUnchecked = false;
    gvIsEmirleri.Columns["Sec"].ColumnEdit = chk;
    chk.QueryCheckStateByValue += chk_QueryCheckStateByValue;
} 
```

我将复选框设置为两个而不是三个的代码部分：

```
private void chk_QueryCheckStateByValue(object sender, DevExpress.XtraEditors.Controls.QueryCheckStateByValueEventArgs e)
{
    if (e.Value == null)
    {
        e.CheckState = CheckState.Unchecked;
        e.Handled = true;
    }
} 
```

**编辑**：我创建了一个`List<bool> chkList;`并执行以下操作：此功能已添加到 checkits' `CheckStateChanged`：

```
private void chk_CheckStateChanged(object sender, EventArgs e)
{
    CheckEdit chk = sender as CheckEdit;
    if (chk.Checked) 
        chkList[gvIsEmirleri.FocusedRowHandle] = true;
    else 
        chkList[gvIsEmirleri.FocusedRowHandle] = false;

    FillBindingSource();
} 
```

在`FillBindingSource`我添加的行：

```
for (int i = 0; i < chkList.Count; i++)
{
    if (chkList[i])
        gvIsEmirleri.SetRowCellValue(i, "Sec", true);
} 
```

我调试这些行，我看到它`List`具有正确的布尔值，并且`gvIsEmirleri.SetRowCellValue(i, "Sec", true);`在必须时进行操作。但是，它仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:59:44.897

我的猜测是：您正在使用未绑定的列，并且您没有保存已检查/未检查的信息，因此，在离开所选行后，`checkBox`获取它的初始值（未检查）。

为此，我建议您处理`CustomUnboundColumnData`您的视图事件。这是一个简单的：

```
readonly Dictionary<object, bool> checkedMap = new Dictionary<object, bool>();

private void viewScales_CustomUnboundColumnData(object sender, CustomColumnDataEventArgs e)
{
     // Check what column
     if (e.Column != gvIsEmirleri.Columns["Sec"])
         return;

     if (e.IsGetData)
     {
          // check if the row has been checked and set it's value using e.Value
          bool checked;
          if (checkedMap.TryGetValue(e.Row, out checked))
              e.Value = checked;
     }

     if (e.IsSetData)
     {
          var checked = Convert.ToBoolean(e.Value);

          // Check if the key already exist
          if (checkedMap.ContainsKey(e.Row))
                scaleMap.Remove(e.Row);

          checkedMap.Add(e.Row, checked);
    }
 } 
```

注意：这是我解决类似问题的方法，但我没有测试我刚刚编写的代码。

# javascript - 使用javascript将数组的内容与xml中的数组匹配

> ID：16150252
> 
> 赞同：0
> 
> 时间：2013-04-22T14:57:40.777
> 
> 标签：javascript, arrays, json

我见过类似的问题，但没有什么与我正在尝试做的完全匹配。我正在构建一个产品“向导”，用户可以在其中回答问题，并且答案当前存储在一个数组中，如下所示：

```
userAnswers = ['abc',xyz',gtd']; 
```

我试图匹配的 XML 看起来像这样。（注意：如果有更有效的方法，我可以将其更改为 json 或更改格式）

```
 <row>
    <answer1>abc</answer1>
    <answer2>xyz</answer2>
    <answer3>mta</answer3>
    <product numbers>productID, productID2, productID3</product numbers>
  </row>

<row>
        <answer1>abc</answer1>
        <answer2>xyz</answer2>
        <answer3>gtd</answer3>
        <product numbers>productID, productID2, productID3</product numbers>
</row> 
```

根据上面的数组，它应该匹配第二行，此时我想访问产品编号节点的内容。数据集并不大（最多 5 个问题），但可能性的数量可以达到那里。这也必须在 ipad 的内存限制范围内起作用。如果有帮助，我将使用 jquery mobile 作为框架。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:11:49.430

如果您说可以将格式修改为您喜欢的任何格式，为什么要使用 2 种不同的格式（xml、json）？

如果我是你，我会做以下事情：

首先将 xml 转换为一个简单的 json，如下所示：

```
var answers = [
    {
        answers: ['abc', 'xyz', 'mta'],
        products: [1, 2, 3]
    },
    {
        answers: ['abc', 'xyz', 'gtd'],
        products: [4, 5, 6]        
    }
]; 
```

然后：

```
var match = function(array1, array2){
    if (array1.length != array2.length)
        return false;

    for (var i = 0; i < array1.length; i++){
        if (array1[i] !== array2[i]){
             return false;   
        }
    }
    return true;
};

for (var i = 0; i < answers.length; i++){

    if (match(answers[i].answers, userAnswers)){
       console.log(answers[i].products);   
    }
} 
```

演示：http: [//jsfiddle.net/wwLuM/](http://jsfiddle.net/wwLuM/)

如果您需要更多详细信息，或者想要进行一些修改，请告诉我。希望这可以帮助

# jquery - 在元素之后而不是在可编辑 div 中的元素中添加文本 - Jquery

> ID：16150253
> 
> 赞同：0
> 
> 时间：2013-04-22T14:57:42.707
> 
> 标签：jquery

我有这个 HTML：

```
<div contenteditable="true"><a>Hello</a></div> 
```

当光标紧跟在 之后时，它会在元素`Hello`中附加新文本。`<a>`但它应该在`<a>`元素之后添加新文本。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:06:04.977

好吧，这可能不是最好的解决方案，但是您可以在内容可编辑中添加另一个 div，将其设置为 false 。

```
<div contenteditable="true">
    <div contentEditable="false">
        <a href="http://google.com">Google</a>
    </div>
    Content here -- Wont change your link.
</div> 
```

# javascript - JavaScript 迷宫生成器

> ID：16150255
> 
> 赞同：1
> 
> 时间：2013-04-22T14:57:45.337
> 
> 标签：javascript, html, maze

HTML

```
<div id="maze">
<form style="text-align:center" name="forma1">
    <br><label>HEIGHT:</label><br>
    <input type="text" id="height" name="height" autofocus="autofocus" maxlength="2" size="6" />
    <br><label>WIDTH:</label><br>
    <input type="text" id="width" name="width"  maxlength="2" size="6" />
    <br>
</form>
<input type="button" alt="submit" onClick="duom();" value="Generate" style="margin-top:10px;" >
</div>
<pre id="out"></pre> 
```

JavaScript

```
function duom(){

    var a = document.getElementById("height").value;
    var b = document.getElementById("width").value;

    document.getElementById('out').innerHTML = display(maze(a,b));
}

function maze(x,y) {
    var n=x*y-1;
    if (n<0) {alert("illegal maze dimensions");return;}
    var horiz=[]; for (var j= 0; j<x+1; j++) horiz[j]= [];
    var verti=[]; for (var j= 0; j<y+1; j++) verti[j]= [];
    var here= [Math.floor(Math.random()*x), Math.floor(Math.random()*y)];
    var path= [here];
    var unvisited= [];
    for (var j= 0; j<x+2; j++) {
        unvisited[j]= [];
        for (var k= 0; k<y+1; k++)
            unvisited[j].push(j>0 && j<x+1 && k>0 && (j != here[0]+1 || k != here[1]+1));
    }
    while (0<n) {
        var potential= [[here[0]+1, here[1]], [here[0],here[1]+1],
            [here[0]-1, here[1]], [here[0],here[1]-1]];
        var neighbors= [];
        for (var j= 0; j < 4; j++)
            if (unvisited[potential[j][0]+1][potential[j][1]+1])
                neighbors.push(potential[j]);
        if (neighbors.length) {
            n= n-1;
            next= neighbors[Math.floor(Math.random()*neighbors.length)];
            unvisited[next[0]+1][next[1]+1]= false;
            if (next[0] == here[0])
                horiz[next[0]][(next[1]+here[1]-1)/2]= true;
            else 
                verti[(next[0]+here[0]-1)/2][next[1]]= true;
            path.push(here= next);
        } else 
            here= path.pop();
    }
    return ({x: x, y: y, horiz: horiz, verti: verti});
}

function display(m) {
    var text= [];
    for (var j= 0; j<m.x*2+1; j++) {
        var line= [];
        if (0 == j%2)
            for (var k=0; k<m.y*4+1; k++)
                if (0 == k%4) 
                    line[k]= 'x';
                else
                    if (j>0 && m.verti[j/2-1][Math.floor(k/4)])
                        line[k]= ' ';
                    else
                        line[k]= 'x';
        else
            for (var k=0; k<m.y*4+1; k++)
                if (0 == k%4)
                    if (k>0 && m.horiz[(j-1)/2][k/4-1])
                        line[k]= ' ';
                    else
                        line[k]= 'x';
                else
                    line[k]= ' ';
        if (0 == j) line[1]=line[3]=' ',line[2]= '1';
        if (m.x*2-1 == j) line[4*m.y]= '2';
        text.push(line.join('')+'\r\n');
    }
    return text.join('');
} 
```

我正在尝试创建 JavaScript 迷宫生成器，它允许我在创建之前输入它的宽度和高度。但是我对来自 html 输入的值有疑问。例如，如果我在写`document.getElementById('out').innerHTML = display(maze(15,20));`- 它工作正常！但我想从 html 输入中获取值，用它们迷宫看起来错误。也许输入有问题，但我在这里看不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:03:19.310

简单的错误。只需进行此更改：

```
function duom(){

    var a = parseInt(document.getElementById("height").value);
    var b = parseInt(document.getElementById("width").value);

    document.getElementById('out').innerHTML = display(maze(a,b));
} 
```

这是迷宫看起来正确的工作 jsbin：http: [//jsbin.com/uwoyon/1/](http://jsbin.com/uwoyon/1/)

# php - 使用迭代器计算帖子

> ID：16150258
> 
> 赞同：0
> 
> 时间：2013-04-22T14:57:48.663
> 
> 标签：php, post, count

我可以像这样计算有多少 POST 提交为 Field_Amount_1、Field_Amount_2、Field_Amount_3 等...？

```
$Counting = count($_POST['Field_Amount_']); 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:03:05.897

那么最简单的方法是更正您的表格，例如：

```
<input name="Field_Amount[]" type="text" />
<input name="Field_Amount[]" type="text" />
<input name="Field_Amount[]" type="text" /> 
```

这使它发布一个数组，因此`$_POST`将包含：

```
Array (
   'Field_Amount' => Array (
      0 => 'amount'
      1 => 'amount'
      2 => 'amount'
    )
) 
```

然后你可以做`count($_POST['Field_Amount'])`

另一种方法是手动计算所有元素：

```
$keys = array_keys($_POST);
$counted = count(preg_grep('/^Field_Amount_\d+$/', $keys)); 
```

如果您还需要确保只跟踪非空字段，那么您可以提供一个空字符串作为第二个参数`array_keys`：

```
$keys = array_keys($_POST, '');
$counted = count(preg_grep('/^Field_Amount_\d+$/', $keys)); 
```

如果您需要进行更多验证，则需要手动循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:25:28.840

```
if($_POST['Submit']) {

    $count=0;

    foreach( $_POST as $post ) {
        if( strstr($post, "field_amount_")) {
            $count++;
        }
    }
    echo $count;
} 
```

# java - CardLayout，在 JFrame 或 JPanel 中？

> ID：16150259
> 
> 赞同：2
> 
> 时间：2013-04-22T14:57:50.000
> 
> 标签：java, swing, jpanel, jbutton, cardlayout

我必须为学校制作一个游戏，我在通过单击 JButton 来切换 JPanel 时遇到了一些麻烦。我想使用 CardLayout，但我是 Java 新手，这很难。我的目标是将我的所有面板放在不同的类中，例如“面板 1”类、“面板 2”类等（而不是在我的主（JFrame）类中创建我的 JPanel，所以我的代码更容易阅读。是吗？可以将您的 CardLayout 容器放在包含我的 JFrame 的类中吗？还有，我在哪里放那个该死的 ActionPerformed？这是我的代码，希望你们能帮助我！

**主（JFrame）类**

```
 package invers;

    import java.awt.CardLayout;
    import java.awt.Color;
    import java.awt.Container;
    import java.awt.Dimension;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import javax.swing.JButton;
    import javax.swing.JFrame;
    import javax.swing.JPanel;

    public class InversMain extends JFrame implements ActionListener

     {

public CardLayout cardlayout;
public Container contentPane = this.getContentPane();
public InversMain()
{

JFrame frame = new JFrame();
frame.setLayout(cardlayout);
frame.setSize(1366,768);
frame.setLocationRelativeTo(null);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setTitle("Invers");
frame.setResizable(true);
frame.setVisible(true);

contentPane.setPreferredSize(new Dimension(600, 400));
    contentPane.add(new InversMainPaneel(), "Panel 1");
    contentPane.add(new InstellingenPaneel(), "Panel 2");

    settingsButton.addActionListener(new ActionListener() {

    public void actionPerformed(ActionEvent e) {
        cardlayout.show(contentPane, "Panel 1");
    }
});}

public static void main ( String [] args)
{
    new InversMain();
}
} 
```

*请注意，settingsButton 是我在 PANEL 1 类中的按钮。因为它不是在我的主类中创建的，所以它给出了一个错误。我想在我的主类中从 PANEL 1 类中引用我的 settingsButton。这可能吗？*

**面板 1，包含我的按钮的面板，这是我的主菜单页面**

```
 package invers;

    import java.awt.Color;
    import java.awt.Font;
    import javax.swing.JButton;
    import javax.swing.JPanel;

    public class InversMainPaneel extends JPanel

    {

private JButton nieuwSpelKnop = new JButton("Nieuw spel");
private JButton laadSpelKnop = new JButton("Laad Spel");
private JButton settingsButton = new JButton("Settings");
private JButton handleidingKnop = new JButton("Handleiding");

public InversMainPaneel()
{

    this.setLayout(null);

    nieuwSpelKnop.setSize(300,40);
    nieuwSpelKnop.setFont(new Font("Arial", Font.BOLD, 25));
    nieuwSpelKnop.setLocation(520,250);
    nieuwSpelKnop.setVisible(true);

    laadSpelKnop.setSize(300,40);
    laadSpelKnop.setFont(new Font("Arial", Font.BOLD, 25));
    laadSpelKnop.setLocation(520,350);
    laadSpelKnop.setVisible(true);

    settingsButton.setSize(300,40);
    settingsButton.setFont(new Font("Arial", Font.BOLD, 25));
    settingsButton.setLocation(520,450);
    settingsButton.setVisible(true);

    handleidingKnop.setSize(300,40);
    handleidingKnop.setFont(new Font("Arial", Font.BOLD, 25));
    handleidingKnop.setLocation(520,550);
    handleidingKnop.setVisible(true);

    this.add(nieuwSpelKnop);
    this.add(laadSpelKnop);
    this.add(settingsButton);
    this.add(handleidingKnop);

    this.setBackground(new Color(178,143,79));
}
    }
    } 
```

**面板 2，用于测试卡片布局是否有效**

```
 package invers;
    import java.awt.Color;
    import javax.swing.JPanel;

    public class InstellingenPaneel extends JPanel
    {
public InstellingenPaneel()
{
    this.setBackground(new Color(178,143,79));
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:08:53.557

**您是否尝试过使用setContentPane**方法设置 JFrame 内容窗格 ？

因为我可以看到您声明 JFrame 和 contentpane 对象，但没有设置它，或者使用您的面板设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:04:03.173

> 请注意，settingsButton 是我在 PANEL 1 类中的按钮。因为它不是在我的主类中创建的，所以它给出了一个错误。

我猜你得到的错误是告诉你`cardlayout`在内部类中引用，因此必须是最终的。要解决此问题，只需`final`在创建卡片布局时插入关键字。

第二 - 是的，在单独的类中定义您的面板类型，然后创建这些类的实例以放置在您的 JFrame 中是完全可以接受的（并且符合最佳实践）。

第三，您似乎在正确的位置有“该死的 actionPerformed”（即作为 ActionListener 内部类中的方法），但您应该向其添加`@Override`注释。你知道我的意思吗？

最后，如果你想引用另一个类的 settingsButton，你有几个选择。我建议将 settingsButton 声明为 JFrame 类的实例变量，并将对 JFrame 的引用传递给 InversMainPanel 类的构造函数：

```
public InversMainPanel(InversMain im) {
    ...
    im.settingsButton.  //do something with the settings button. 
```

`InversMainPanel`从这样的`InversMain`类中创建了一个：

```
 InversMainPanel imp = new InversMainPanel(this) 
```

`this`指的是从中进行调用的实例`InversMain`。

让我知道我是否可以进一步解释。

PS：[查看有关 Java 命名约定的本教程](http://www.oracle.com/technetwork/java/codeconv-138413.html)

# mongodb - 如何在字段名称中使用冒号在 MongoDB 中执行 map reduce？

> ID：16150260
> 
> 赞同：1
> 
> 时间：2013-04-22T14:57:50.800
> 
> 标签：mongodb, mapreduce, field, colon

我有以下问题：

在 MongoDB 中，我有名称中带有冒号的字段。要解决我通常会使用的字段：

```
var map = function() {
              emit(this._id, this.sth.field);
} 
```

但在字段名称内有一个冒号，例如：

```
var map = function() {
               emit(this._id, this.sth.fie:ld);
} 
```

MongoDB 回归`JavaScript execution failed: SyntaxError: Unexpected token :`

我怎么解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:07:40.727

JavaScript 中的属性名称可以加引号或不加引号。

当属性名称导致无效的 JavaScript 语法时，您需要切换到引用的技术：`this.sth['fie:ld']`.

```
var map = function() {
    emit(this._id, this.sth['fie:ld']);
} 
```

# macos - Mac OS X - 获取空格键的状态

> ID：16150267
> 
> 赞同：1
> 
> 时间：2013-04-22T14:57:57.440
> 
> 标签：macos, keyboard

在 Mac 上，我如何知道键盘上的某个键是按下/向下还是未按下/向上？现在我需要它作为空格键，但适用于任何键的答案将是完美的。

我不想检测事件：

```
-(void)keyDown:(NSEvent*)event;
-(void)keyUp:(NSEvent*)event; 
```

我想要某个时刻的键（空格键）状态。

在 Windows 上，这似乎是可能的（尽管我还没有尝试过），使用以下代码：

```
GetAsyncKeyState(VK_SPACE); 
```

但我还没有找到适用于 Mac 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:02:22.590

[我在这里](http://lists.apple.com/archives/carbon-development/2004/Jul/msg00976.html)找到了答案。这是我使用的工作片段：

```
#include <Carbon/Carbon.h>

Boolean isPressed( unsigned short inKeyCode )
{
    unsigned char keyMap[16];
    GetKeys((BigEndianUInt32*) &keyMap);
    return (0 != ((keyMap[ inKeyCode >> 3] >> (inKeyCode & 7)) & 1));
} 
```

`inKeyCode`表示您想知道它是否被按下的键。`unsigned short`可以在 Mac 上的以下文件中找到键到 s 的映射：

```
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/Headers/Events.h 
```

# neo4j - 查找节点之间的相似性

> ID：16150269
> 
> 赞同：3
> 
> 时间：2013-04-22T14:58:08.523
> 
> 标签：neo4j, cypher, levenshtein-distance

我有很多配置文件作为节点，并希望匹配名称属性具有一定字符串相似性的节点。

Neo4j 怎么可能？

示例数据：

```
NodeA: {
    "name": "Jacob F Saxberg"
},
NodeB: {
    "name": "Jacob Friis Saxberg"
} 
```

我想获得 Levenshtein 距离 (4) 或与 Neo4j 类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:20:51.650

由于 Levenshtein 距离是两个节点的函数，`f(nodeA, nodeB)`并且由于它是对称的 ( `f(nodeA,nodeB)==f(nodeB,NodeA)`)，因此将 Levenshtein 距离的结果存储为节点 A 和节点 B 之间关系的属性可能是一个不错的选择。

您可以使用 cypher 查找应计算 Levensthein 距离的所有节点。使用 Java（或您首选的客户端语言），您可以迭代找到的节点，进行数学运算并将结果写回图中。

# php - 从php正确地将数据保存在csv文件中

> ID：16150270
> 
> 赞同：0
> 
> 时间：2013-04-22T14:58:13.293
> 
> 标签：php, csv

我有这样的数据`$fields = array('0001','0002','0003','00004');`

我需要将这些数据放入 csv 文件中，我使用：

```
$fp = fopen('file.csv', 'w');
fputcsv($fp, $fields); 
```

但是当`file.csv`在 excel 中打开时，开始的空值 (0) 被删除，我看到这样的数据

```
 1|2|3|4 
```

如何在 csv 文件中存储起始空值？

# javascript - 在另一个标签下方对齐一个 div 标签

> ID：16150272
> 
> 赞同：1
> 
> 时间：2013-04-22T14:58:19.543
> 
> 标签：javascript, html, css

我有两个 div 标签如下

```
<div id="outer">
    <div id="lower">hi</div>
    <div id="upper">i m on top</div>
</div> 
```

我想先显示上部 div，然后显示下部 div，但我无法更改 HTML 中的声明顺序。

我正在使用以下CSS

```
#outer{
    position:relative;
}
#upper{
    position:absolute;
    top:0;
} 
```

但上层与下层重叠。

**更新**

我以以下方式解决了这种情况，因为它不会干扰设计

```
<html>
  <body>
    <div id="visible"></div>
    <div id="bottom">displayed in second line</div>
    <div id="top" style="display:none;">
      displayed in first line
    <script>
      document.getElementById("visible").innerHTML=document.getElementById("top").innerHTML
      </script>
    </div>
  </body>
</html> 
```

通过使用上面的代码，我完美地解决了我的用例。谢谢大家给出答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:22:45.487

这里有两个解决方案：

**你知道上 div 的高度：**

```
#outer {
    position: relative;
}
#lower, #upper {
    position: absolute;
    left: 0;    
}
#lower {
    top: 40px; /* upper div's height */
}
#upper {
    top: 0;
    height: 40px;
} 
```

**你知道外部 div 的高度：**

```
#outer {
    position: relative;
    height: 300px;
}
#lower, #upper {
    position: absolute;
    left: 0;
}
#upper {
    top: 0;
}
#lower {
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:28:48.280

如果您的两个元素的高度都未知（如果这是动态内容，则很有可能），那么 Flexbox 将允许您重新排列元素。

[http://tinker.io/aa4b2](http://tinker.io/aa4b2)

```
#outer {
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -moz-box-orient: vertical;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-flex-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}

#lower {
  -moz-box-ordinal-group: 2;
  -webkit-flex-order: 1;
  -ms-flex-order: 1;
  -webkit-order: 1;
  order: 1;
} 
```

不利的一面是对 Flexbox 的支持相当低。这应该适用于 Chrome、Firefox、Opera、Safari 和 IE10。 [http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

# d3.js - d3 choropleth 创建一个非常小的地图

> ID：16150274
> 
> 赞同：0
> 
> 时间：2013-04-22T14:58:23.890
> 
> 标签：d3.js, data-visualization

我正在尝试使用 d3 为新泽西州创建一个等值线。我将 geojson 文件创建为 nj.json。在这里你可以看到它：

[http://mntest.elasticbeanstalk.com/nj.json](http://mntest.elasticbeanstalk.com/nj.json)

当我尝试用它在网页上显示时，它显示了一个非常小的新泽西地图，小到很容易错过。在这里看到它：

[http://mntest.elasticbeanstalk.com/choropleth_test.html](http://mntest.elasticbeanstalk.com/choropleth_test.html)

它显示为文本下方几英寸处的一个小点。

有人可以看看源代码并指导我如何增加地图大小。

谢谢，D3新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:57:14.133

要更改显示地图的大小，请设置[投影的比例因子](https://github.com/mbostock/d3/wiki/Geo-Projections#wiki-scale)。您可能还想将投影的中心重置为要显示的中心。

[这个问题](https://stackoverflow.com/questions/14492284/center-a-map-in-d3-given-a-geojson-object)也可能有帮助。

# python - 检查变量的 Python SQL 查询结果

> ID：16150276
> 
> 赞同：4
> 
> 时间：2013-04-22T14:58:28.223
> 
> 标签：python, sql

我是新手`Python`并与之合作`SQL queries`。我有一个数据库，其中包含一个包含会议及其日期以及 ID 的表。我想做的是检查今天发生的会议。下面的代码会显示今天发生的所有会议 ID。但是，然后我想检查结果中是否有某个会议 ID（我已将其存储为变量），以及是否在其中执行 IF 函数，以便我可以详细说明。

```
cur.execute("SELECT id FROM meeting WHERE DATE(starttime) = DATE(NOW())")

for row in cur.fetchall() :
    print row[0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:16:04.130

您可以要求数据库告诉您 id 是否存在：

```
cur.execute("SELECT id FROM meeting WHERE DATE(starttime) = DATE(NOW()) AND id=%s", (id,))
if cur.rowcount:
    # The id is there
else:
    # The id is not there. 
```

我假设您在这里使用 MySQLdb；不同的数据库适配器使用稍微不同的查询参数样式。其他人可能会使用`?`而不是`%s`.

# php - 如何对外部网络用户隐藏 .php、.html 或 .text 文件

> ID：16150281
> 
> 赞同：0
> 
> 时间：2013-04-22T14:58:46.317
> 
> 标签：php

如果我打开我的 URL [http://example.com/](http://example.com/)，它会显示我的所有子目录，如下所示

```
Index of /
•   data1.php 
•   data1.txt 
```

我想如果任何网络用户搜索像“<a href="http://example.com" rel="nofollow">http://example.com”，它会自动转发像[http://example.com /data1.php](http://example.com/data1.php)。通过这种方式，我想从外部网络用户隐藏我的所有 php、html 或 .text 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:02:00.850

您需要`.htaccess`在 web 根目录中有一个文件，并将其保留为第一行

```
DirectoryIndex home.php 
```

`httpd.conf`您也可以在文件中进行更改

```
<IfModule dir_module>  #Keep adding pages here, it will read from left to right
    DirectoryIndex index.php index.php3 index.html index.htm
</IfModule> 
```

`.htaccess`但你最好坚持

* * *

不是必需的，但您可能还想拒绝目录列表，您可以使用它

```
#Block Directory Listing
IndexIgnore * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:02:22.133

如果您有权编辑主配置文件

编辑文件 httpd.conf 和 srm.conf 文件并执行以下操作：

*   找到这条线。

    ```
    DirectoryIndex index.html 
    ```

*   更改如下：

    ```
    DirectoryIndex index.shtml index.html 
    ```

当然，您可以使用任何您想要的文件名。我也更喜欢将 index.html 保留为有效索引。

使用 .htaccess 更改默认页面

如果您无法编辑主配置文件，则可以使用 .htaccess 中的此指令。只需编辑位于您的主 HTML 目录中的 .htaccess 文件。如果您没有此文件，请随意创建它！

要更改默认页面，请编辑现有 DirectoryIndex 行或添加以下内容：

```
DirectoryIndex index.shtml index.html 
```

这将使 index.shtml 成为默认页面。

通过在子目录中使用 .htaccess 文件，您可以为该目录指定不同的默认页面，而不会影响站点的其余部分。

字体：[http ://bignosebird.com/apache/a2.shtml](http://bignosebird.com/apache/a2.shtml)

# android - 按下正按钮时不关闭对话框

> ID：16150285
> 
> 赞同：0
> 
> 时间：2013-04-22T14:59:00.640
> 
> 标签：android, dialog, radio-button

我的 Android 应用程序有一个带有正按钮和 3 单选按钮的对话框。
3 个中有 2 个是错误答案，1 个是正确答案。
当用户选择错误的答案并按 possitiveButton 作为确定时，
我不想关闭对话框并显示 toast 消息说
您的选择不正确。
然后用户可以重新选择另一个答案并按 OK，
如果答案正确，我想关闭对话框。
我想知道按下 possitiveButton 时如何不关闭对话框。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:02:32.067

我给你举个例子

```
AlertDialog.builder builder = new Builder(this);
builder.setPositiveButxxxxx(xxxxxx)
{
     onClick(AlertDialog alert)
     {
          //if you want to dissmiss here,
          alert.dismiss();
          //else
          //do nothing
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:02:00.943

您必须重写 positiveButton 的 Click 方法。

```
AlertDialog.Builder db = new AlertDialog.Builder(MyActivity.this);
db.setPositiveButton("OK", new 
    DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {

       if (rb1.isChecked() || rb2.isChecked() ){  //here make the toast}
            }
        });
       else { //dismiss here}
AlertDialog dialog = db.show(); 
```

其中 rb1 和 rb2 是错误的单选按钮

# angularjs - 加载视图时运行 AngularJS 初始化代码

> ID：16150289
> 
> 赞同：95
> 
> 时间：2013-04-22T14:59:13.053
> 
> 标签：angularjs

当我加载视图时，我想在其关联的控制器中运行一些初始化代码。

为此，我在视图的主要元素上使用了 ng-init 指令：

```
<div ng-init="init()">
  blah
</div> 
```

在控制器中：

```
$scope.init = function () {
    if ($routeParams.Id) {
        //get an existing object
        });
    } else {
       //create a new object
    }

    $scope.isSaving = false;
} 
```

第一个问题：这是正确的做法吗？

接下来，我对发生的事件顺序有疑问。在视图中，我有一个“保存”按钮，它使用如下`ng-disabled`指令：

```
<button ng-click="save()" ng-disabled="isClean()">Save</button> 
```

该`isClean()`功能在控制器中定义：

```
$scope.isClean = function () {
    return $scope.hasChanges() && !$scope.isSaving;
} 
```

如您所见，它使用了`$scope.isSaving`在函数中初始化的标志`init()`。

问题：加载视图时，isClean 函数在函数**之前**`init()`调用，因此标志`isSaving`为`undefined`. 我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-04-22T17:34:41.567

当您的视图加载时，其关联的控制器也会加载。而不是 using ，只需在控制器中`ng-init`调用您的方法：`init()`

```
$scope.init = function () {
    if ($routeParams.Id) {
        //get an existing object
    } else {
        //create a new object
    }
    $scope.isSaving = false;
}
...
$scope.init(); 
```

由于您的控制器之前运行`ng-init`，这也解决了您的第二个问题。

[小提琴](http://jsfiddle.net/mrajcok/wBM64/)

* * *

如前所述`John David Five`，您可能不想将其附加到`$scope`以将此方法设为私有。

```
var init = function () {
    // do something
}
...
init(); 
```

[见 jsFiddle](http://jsfiddle.net/AdrienBe/52yc52m6/)

* * *

如果您想等待某些数据被预设，要么将该数据请求移至解析，要么将观察者添加到该集合或对象，并在您的数据满足您的 init 标准时调用您的 init 方法。一旦满足我的数据要求，我通常会删除观察者，因此如果您观察的数据发生变化并符合您运行 init 方法的标准，init 函数不会随机重新运行。

```
var init = function () {
    // do something
}
...
var unwatch = scope.$watch('myCollecitonOrObject', function(newVal, oldVal){
                    if( newVal && newVal.length > 0) {
                        unwatch();
                        init();
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-04-08T23:29:01.060

**从 AngularJS 1.5 开始，我们应该使用`$onInit`**在任何 AngularJS 组件上都可用的。取自v1.5 以来的[组件生命周期文档，它是首选方式：](https://docs.angularjs.org/guide/component)

> $onInit() - 在元素上的所有控制器都已构建并初始化其绑定之后（以及在此元素上的指令的前后链接函数之前）在每个控制器上调用。这是放置控制器初始化代码的好地方。

```
var myApp = angular.module('myApp',[]);
myApp.controller('MyCtrl', function ($scope) {

    //default state
    $scope.name = '';

    //all your init controller goodness in here
    this.$onInit = function () {
      $scope.name = 'Superhero';
    }
}); 
```

## >>[小提琴演示](http://jsfiddle.net/nubau7os/)

* * *

# 使用组件生命周期的高级示例：

组件生命周期使我们能够以良好的方式处理组件。它允许我们为组件的“init”、“change”或“destroy”创建事件。通过这种方式，我们能够管理取决于组件生命周期的东西。这个小例子展示了注册和注销一个`$rootScope`事件监听器`$on`。通过知道，当控制器在视图中丢失其引用或被销毁时，`$on`绑定的事件`$rootScope`将不会被取消，我们需要手动销毁`$rootScope.$on`侦听器。放置这些东西的好地方是`$onDestroy`组件的生命周期函数：

```
var myApp = angular.module('myApp',[]);

myApp.controller('MyCtrl', function ($scope, $rootScope) {

  var registerScope = null;

  this.$onInit = function () {
    //register rootScope event
    registerScope = $rootScope.$on('someEvent', function(event) {
        console.log("fired");
    });
  }

  this.$onDestroy = function () {
    //unregister rootScope event by calling the return function
    registerScope();
  }
}); 
```

## >>[小提琴演示](http://jsfiddle.net/q6hpcgd3/)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-22T19:41:14.120

或者您可以在控制器中初始化内联。如果您使用控制器内部的 init 函数，则不需要在作用域中定义它。事实上，它可以是自执行的：

```
function MyCtrl($scope) {
    $scope.isSaving = false;

    (function() {  // init
        if (true) { // $routeParams.Id) {
            //get an existing object
        } else {
            //create a new object
        }
    })()

    $scope.isClean = function () {
       return $scope.hasChanges() && !$scope.isSaving;
    }

    $scope.hasChanges = function() { return false }
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-06-05T11:31:25.123

我在我的项目中使用以下模板：

```
angular.module("AppName.moduleName", [])

/**
 * @ngdoc controller
 * @name  AppName.moduleName:ControllerNameController
 * @description Describe what the controller is responsible for.
 **/
    .controller("ControllerNameController", function (dependencies) {

        /* type */ $scope.modelName = null;
        /* type */ $scope.modelName.modelProperty1 = null;
        /* type */ $scope.modelName.modelPropertyX = null;

        /* type */ var privateVariable1 = null;
        /* type */ var privateVariableX = null;

        (function init() {
            // load data, init scope, etc.
        })();

        $scope.modelName.publicFunction1 = function () /* -> type  */ {
            // ...
        };

        $scope.modelName.publicFunctionX = function () /* -> type  */ {
            // ...
        };

        function privateFunction1() /* -> type  */ {
            // ...
        }

        function privateFunctionX() /* -> type  */ {
            // ...
        }

    }); 
```

# c# - 根据 Ext.net 代码隐藏中的单选按钮选择隐藏 ComboBox 和/或 DateField

> ID：16150292
> 
> 赞同：0
> 
> 时间：2013-04-22T14:59:41.323
> 
> 标签：c#, combobox, radio-button, hide, ext.net

我正在尝试根据我在 Ext.net 的代码隐藏中选择的单选按钮隐藏 ComboBox 和/或 DateFields

```
 <Items>
                            <ext:Container ID="Container1" runat="server" Layout="ColumnLayout" Height="175" Width="418" >
                               <Items>
                                    <ext:RadioGroup  runat="server" ID="ChooseSpan" Selectable="true" ColumnsNumber="1" ColumnWidth="0.50"  >
                                        <Items>
                                            <ext:Radio ID="RadioAll" runat="server" BoxLabel="Show All" InputValue="0" />
                                            <ext:Radio ID="RadioMonth" runat="server" BoxLabel="Choose Date Range(By Month)" InputValue="1" />
                                            <ext:Radio ID="RadioDate" runat="server" BoxLabel="Choose Date Range(By Dates)" InputValue="2" />
                                        </Items>
                                    </ext:RadioGroup>
                                    <ext:Container ID="Container2" runat="server" Layout="RowLayout" Height="175" ColumnWidth="0.50" StyleSpec="margin-top:25px;">
                                        <Items>
                                            <ext:ComboBox runat="server" ID="MonthComboBox" Selectable="true" SelectedIndex="0" >
                                                <Items>
                                                    <ext:ListItem Text="Any Month" Value="0" />
                                                    <ext:ListItem Text="January" Value="1" />   
                                                    <ext:ListItem Text="February" Value="2" />
                                                    <ext:ListItem Text="March" Value="3" />
                                                    <ext:ListItem Text="April" Value="4" />
                                                    <ext:ListItem Text="May" Value="5" />
                                                    <ext:ListItem Text="June" Value="6" />
                                                    <ext:ListItem Text="July" Value="7" />
                                                    <ext:ListItem Text="August" Value="8" />
                                                    <ext:ListItem Text="September" Value="9" />
                                                    <ext:ListItem Text="October" Value="10" />
                                                    <ext:ListItem Text="November" Value="11" />
                                                    <ext:ListItem Text="December" Value="12" />
                                                </Items>
                                            </ext:ComboBox>
                                            <ext:DateField
                                                ID="StartDateField"
                                                runat="server"
                                                FieldLabel="Start"
                                                Vtype="daterange"
                                                AnchorHorizontal="100%"
                                                EnableKeyEvents="true">
                                                <CustomConfig>
                                                    <ext:ConfigItem Name="endDateField" Value="#{EndDateField}" Mode="Value" />
                                                </CustomConfig>
                                                <Listeners>
                                                    <%--<Select Handler="#{DirectMethods}.SubmitDate();" />--%>
                                                </Listeners>
                                            </ext:DateField>

                                            <ext:DateField 
                                                ID="EndDateField" 
                                                runat="server" 
                                                Vtype="daterange"
                                                FieldLabel="End"
                                                AnchorHorizontal="100%"
                                                EnableKeyEvents="true">
                                                <CustomConfig>
                                                    <ext:ConfigItem Name="startDateField" Value="#{StartDateField}" Mode="Value" />
                                                </CustomConfig>
                                                <Listeners>
                                                    <%-- <Select Handler="#{DirectMethods}.SubmitDate();" />--%>
                                                </Listeners>
                                            </ext:DateField>
                                            <ext:Button ID="Next" runat="server" Text="Next" MaxWidth="50" StyleSpec="margin-left:159px; margin-top:150;" >

                                            </ext:Button>
                                        </Items>
                                    </ext:Container>
                                </Items>
                            </ext:Container>
                        </Items>
                    </ext:Panel>
                </Items> 
```

这是使用 C# 背后的代码：

```
 [DirectMethod]
    public void DateSelection()
    {

        if (ChooseSpan.CheckedItems[0].ID == "RadioAll")
        {
            MonthComboBox.Visible = false;
            StartDateField.Visible = false;
            EndDateField.Visible = false;
        }
        if (ChooseSpan.CheckedItems[0].ID == "RadioMonth")
        {
            MonthComboBox.Visible = true;
            MonthComboBox.Show();
            StartDateField.Visible = false;
            EndDateField.Visible = false;
        }
        if (ChooseSpan.CheckedItems[0].ID == "RadioDate")
        {
            MonthComboBox.Visible = false;
            StartDateField.Visible = true;
            StartDateField.Show();
            EndDateField.Visible = true;
            EndDateField.Show();
        }
    } 
```

我需要 RadioGroup 中的听众来接受这些选择吗？我如何让代码隐藏响应我的选择，并告诉它隐藏与否？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:52:05.197

请收听 RadioGroup 的 Change 事件以调用服务器方法。

要隐藏/显示组件，请使用 Hidden 属性而不是 Visible 属性。[这里](http://forums.ext.net/showthread.php?13114#post54033)有一些关于差异的细节。

您也可以使用 Show 和 Hide 方法。

# python - 检查浮点数是“奇数”还是“偶数”？

> ID：16150297
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:59:51.610
> 
> 标签：python

如果我有一个数字，`2122.6`我想检查它是奇数还是偶数？我知道这通常适用于整数。我只会打印小数点后的一个数字。我只想看看最后一个数字是奇数还是偶数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:12:08.700

> 我只打印小数点后的 1 位数字，所以重要的是该数字是否是 2 的倍数。[OP的评论]

这将您的问题简化到可以解决的程度：

```
int(x * 10) % 2 == 0  # even 
```

# pydev - 在 PyDev 项目中删除源文件夹会生成错误“找不到源文件夹”

> ID：16150299
> 
> 赞同：11
> 
> 时间：2013-04-22T14:59:53.767
> 
> 标签：pydev

在 Project Explorer 中删除 PyDev 项目中的源文件夹时，项目 PYTHONPATH 未更新，并且大纲中有一个红色 x 标记，并显示错误消息“未找到源文件夹：[源文件夹名称]”。

这真的是预期的行为吗？如果源文件夹被删除，我希望 PYTHONPATH 会被更新。

我正在使用 PyDev 版本 2.7.3 和 Eclipse 3.7.2。

重复问题的步骤：

1.  在 Project Explorer 中，使用 File -> New -> PyDev Project 创建一个新的 PyDev 项目
2.  通过右键单击新项目并选择 New -> Source Folder（在 PyDev 菜单下）创建一个新的 PyDev 源文件夹
3.  通过右键单击源文件夹并选择删除来删除源文件夹（刚刚添加）。
4.  添加一个新的源文件夹（需要触发错误）。
5.  有一个红色 x 错误标记和一条消息说“源文件夹：[源文件夹名称] 未找到”。
6.  转到 PyDev 属性。已删除的文件夹仍列在 PyDev-PYTHONPATH 下的 Source Folders 选项卡中。

注意：当在包资源管理器而不是项目资源管理器中重复上述步骤时，红色的 x 不会出现 - 所以您看不到有问题。但是，如果您查看 PyDev 属性，则行为是相同的 - PYTHONPATH 未更新。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-10T06:39:54.563

右键单击您的项目文件夹-> 属性-> PyDev - PYTHONPATH。选择导致错误的目录，然后单击右侧的删除。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-23T20:47:31.717

看起来问题发生在项目名称与目录名称不匹配时。

例如，

*   env/VersionModifier/src/myfile.py
*   .project 文件 = CoolTool
*   **找不到源文件夹**

*   env/VersionModifier/src/myfile.py

*   .project 文件 = 版本修改器
*   **好的**

您可以将其称为错误或“最佳实践的实施”，但右键单击项目并使其名称与其封闭目录匹配，这为我在 Kepler 中解决了问题。

祝你好运

彼得

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-08T22:34:14.543

我解决它的方法是转到存储代码的文件夹并找到一个名为`.pydevproject`. 它是 eclipse/aptana 中的一个不可见文件，因此您可能必须通过 cli 或文件浏览器执行此操作。寻找一个看起来像的结构`<path>path/to/your/file</path>`并删除在你的包资源管理器中显示错误的结构。这将暂时解决您的问题，但这是一个错误，需要报告。

我认为问题源于用户删除源文件夹后 pydev 无法删除 <path>...</path> 变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-17T11:53:56.453

以下是我解决这个问题的方法，希望对您有所帮助。

清理：

*   从 Eclipse 中删除项目；当然，将其保留在磁盘上。
*   从源目录中删除“.project”和“.pydevproject”文件。

重新创建：

*   创建了一个新的 PyDev 项目（在 eclipse 中），提供现有的源目录。在 New Project 对话框中，选择“Create 'src' folder and add it to the PYTHONPATH”。该项目已正确创建，没有任何源文件夹错误。
*   现在，通过右键单击文件夹并选择“PyDev”下的选项，将要添加的文件夹添加为源目录。
*   最后，您可以只删除 eclipse 创建的“src”目录。

# java - GoogleMaps v2 Android 的我的位置按钮，不显示

> ID：16150300
> 
> 赞同：33
> 
> 时间：2013-04-22T14:59:53.487
> 
> 标签：java, android, google-maps

我正在使用谷歌地图做一个应用程序，但是当我尝试添加“我的位置”按钮时，正如参考所说的那样不起作用......

我就是这样做的：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

        locManager = (LocationManager)getSystemService(LOCATION_SERVICE);
        providersList = locManager.getAllProviders();
        provider =locManager.getProvider(providersList.get(0));
        precision = provider.getAccuracy();
        req = new Criteria();
        req.setAccuracy(Criteria.ACCURACY_FINE);        
        inside = false;

        map.getUiSettings().setMyLocationButtonEnabled(true);

        buildPolygon();
        drawPolygon();
        startLocalization();
    } 
```

我`map.getUiSettings().setMyLocationButtonEnabled(true);`在google的参考资料中使用了。我不知道发生了什么事。。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-22T15:05:56.387

`myLocationButtonEnabled`默认情况下为 true，并在启用图层时显示`setMyLocationEnabled`。

尝试这个：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

    // Add this line
    map.setMyLocationEnabled(true);

    locManager = (LocationManager)getSystemService(LOCATION_SERVICE);
    providersList = locManager.getAllProviders();
    provider =locManager.getProvider(providersList.get(0));
    precision = provider.getAccuracy();
    req = new Criteria();
    req.setAccuracy(Criteria.ACCURACY_FINE);        
    inside = false;

    //map.getUiSettings().setMyLocationButtonEnabled(true);

    buildPolygon();
    drawPolygon();
    startLocalization();
} 
```

* * *

`setMyLocationEnabled` [文档](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#setMyLocationEnabled%28boolean%29)
`setMyLocationButtonEnabled` [文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/UiSettings#setMyLocationButtonEnabled%28boolean%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-09T16:32:44.323

只需`map.setMyLocationEnabled(true);`在创建地图后添加

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

变成这样

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

map.setMyLocationEnabled(true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-07T15:41:16.017

添加以下行。

科特林：

```
map.isMyLocationEnabled = true 
```

`map`是一个谷歌地图对象。

（此问题中更详细的答案：[https](https://stackoverflow.com/a/15142091/11211963) ://stackoverflow.com/a/15142091/11211963 ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-29T11:08:06.607

对我来说，**map.setMyLocationEnabled(true);**
它适用于棉花糖设备以下和棉花糖设备以上，我在应用程序内手动设置了位置权限。后来我的位置按钮变得可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-28T15:54:29.987

上面的答案没有奏效。

```
override fun onMapReady(googleMap: GoogleMap?) {
    this.googleMap = googleMap

    setupMap()
}

private fun setupMap() {
    if (ActivityCompat.checkSelfPermission(context!!,
            Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {
        // Before enabling the My Location layer, you must request location permission from the user.
        googleMap?.isMyLocationEnabled = true
        // *** Use this method ***
        googleMap?.uiSettings?.isMyLocationButtonEnabled = true

        // See https://developers.google.com/maps/documentation/android-sdk/location
        googleMap?.setOnMyLocationButtonClickListener(this)
        googleMap?.setOnMyLocationClickListener(this)
    } else {
        // Show rationale and request permission.
        requestPermissions(arrayOf(Manifest.permission.ACCESS_FINE_LOCATION),
            LOCATION_REQUEST_CODE)
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-16T10:22:38.787

您需要**获得许可**才能使其**可见**

```
if (ActivityCompat.checkSelfPermission(Maps_Activity.this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &&
            ActivityCompat.checkSelfPermission(Maps_Activity.this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {

   requestPermission();

   return;
}

mMap.setMyLocationEnabled(true); 
```

# r - 如何使用 R 中的 testthat 测试文件夹是否存在

> ID：16150302
> 
> 赞同：0
> 
> 时间：2013-04-22T15:00:06.973
> 
> 标签：r, testthat

我有一个功能可以为我的其余工作流程设置一些文件夹

```
library(testthat)

analysisFolderCreation<-function(projectTitle=NULL,Dated=FALSE,destPath=getwd(),SETWD=FALSE){
  stopifnot(length(projectTitle)>0,is.character(projectTitle),is.logical(Dated),is.logical(SETWD))

  # scrub any characters that might cause trouble
  projectTitle<-gsub("[[:space:]]|[[:punct:]]","",projectTitle)

  rootFolder<-file.path(destPath,projectTitle)
  executionFolder<-file.path(rootFolder,if (Dated) format(Sys.Date(),"%Y%m%d"))

  subfolders<-c("rawdata","intermediates","reuse","log","scripts","results")

  dir.create(path=executionFolder, recursive=TRUE)
  sapply(file.path(executionFolder,subfolders),dir.create)
  if(Setwd) setwd(executionFolder)

} 
```

我正在尝试对其进行单元测试，并且我的错误测试工作正常：

```
test_that("analysisFolderCreation: Given incorrect inputs, error is thrown",
{
  # scenario: No arguments provided
  expect_that(analysisFolderCreation(),throws_error())
}) 
```

但是我对成功的测试，不要...

```
 test_that("analysisFolderCreation: Given correct inputs the function performs correctly",
 {
   # scenario: One argument provided - new project name
   analysisFolderCreation(projectTitle="unittest")
   expect_that(file.exists(file.path(getwd(),"unittest","log")),
               is_true())
 } 
```

错误

1.  错误：analysisFolderCreation：给定正确的输入，函数正确执行---------------------------- ------------------------ 找不到函数“analysisFolderCreation”

当我检查文件夹的存在时，我不确定如何以期望格式进行测试，该格式实际上包含函数 analysisFolderCreation 。

我正在运行`dev_mode()`并明确执行测试文件`test_file()`

是否有人能够提供一种重写测试以使其工作的方法，或提供存在检查期望？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:53:08.703

问题似乎是 test_file() 的使用。与 test_file() 不同，在整个单元测试套件中使用 test() 不需要已经在工作区中创建函数。

# javascript - angularjs 和 localStorage 更改事件

> ID：16150311
> 
> 赞同：25
> 
> 时间：2013-04-22T15:00:33.753
> 
> 标签：javascript, angularjs, local-storage

我将一些数据存储在 localStorage

我在我的 angularjs 应用程序中想要的是，当 localStorage 中的数据发生变化时，应用程序重新呈现应用程序，我该怎么做？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-22T15:18:39.157

有一个角度 localStorage 模块：

[https://github.com/grevory/angular-local-storage](https://github.com/grevory/angular-local-storage)

```
var DemoCtrl = function($scope, localStorageService) {

  localStorageService.clearAll();

  $scope.$watch('localStorageDemo', function(value){
    localStorageService.add('localStorageDemo',value);
    $scope.localStorageDemoValue = localStorageService.get('localStorageDemo');
  });

  $scope.storageType = 'Local storage';

  if (!localStorageService.isSupported()) {
    $scope.storageType = 'Cookie';
  }

}; 
```

经过进一步考虑，您可能需要将模块更改为在 setItem 上广播，以便在 localStorage 已更改时收到通知。也许 fork 和第 50 行附近：

```
localStorage.setItem(prefix+key, value);
$rootScope.$broadcast('LocalStorageModule.notification.setItem',{key: prefix+key, newvalue: value});  // you could broadcast the old value if you want 
```

或在最新版本的库中，大小写已更改

```
$rootScope.$broadcast('LocalStorageModule.notification.setitem',{key: prefix+key, newvalue: value}); 
```

然后在您的控制器中，您可以：

```
$scope.$on('LocalStorageModule.notification.setItem', function(event, parameters) {
   parameters.key;  // contains the key that changed
   parameters.newvalue;  // contains the new value
}); 
```

这是第二个选项的演示：演示： [http ://beta.plnkr.co/lpAm6SZdm2oRBm4LoIi1](http://beta.plnkr.co/lpAm6SZdm2oRBm4LoIi1)

** 更新 **

如果您想使用该项目，我分叉了该项目并在此处包含了通知： [https ://github.com/sbosell/angular-local-storage/blob/master/localStorageModule.js](https://github.com/sbosell/angular-local-storage/blob/master/localStorageModule.js)

我相信原来的图书馆接受了我的 PR。我喜欢这个库的原因是它有一个 cookie 备份，以防浏览器不支持本地存储。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-07-20T13:17:10.620

顺便说一句，我为 AngularJS 创建了另一个 localStorage 模块，称为**ngStorage**：

**[https://github.com/gsklee/ngStorage](https://github.com/gsklee/ngStorage)**

用法非常简单：

**JavaScript**

```
$scope.$storage = $localStorage.$default({
    x: 42
}); 
```

**HTML**

```
<button ng-click="$storage.x = $storage.x + 1">{{$storage.x}}</button> 
```

并且每个更改都会自动同步 - 甚至在其他浏览器选项卡中发生的更改！

查看 GitHub 项目页面以获取更多演示和示例；）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-20T23:57:29.020

我最近创建了一个模块，允许您简单地将 localStorage 键绑定到 $scope 变量，并将对象、数组、布尔值等直接存储在 localStorage 中。

[Github 本地存储模块](https://github.com/agrublev/Angular-localStorage)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-11T06:08:17.367

```
$scope.$on("LocalStorageModule.notification.setitem", function (key, newVal, type) {
      console.log("LocalStorageModule.notification.setitem", key, newVal, type);
    });

$scope.$on("LocalStorageModule.notification.removeitem", function (key, type) {
  console.log("LocalStorageModule.notification.removeitem", key, type);
});

$scope.$on("LocalStorageModule.notification.warning", function (warning) {
  console.log("LocalStorageModule.notification.warning", warning);
});

$scope.$on("LocalStorageModule.notification.error", function (errorMessage) {
  console.log("LocalStorageModule.notification.error", errorMessage);
}); 
```

使用 [https://github.com/grevory/angular-local-storage#getstoragetype时调用此事件](https://github.com/grevory/angular-local-storage#getstoragetype)

在应用配置中

```
myApp.config(function (localStorageServiceProvider) {
  localStorageServiceProvider
    .setPrefix('myApp')
    .setStorageType('sessionStorage')
    .setNotify(true, true)
}); 
```

# python - Python - 继承类方法来操作类属性

> ID：16150321
> 
> 赞同：0
> 
> 时间：2013-04-22T15:00:57.067
> 
> 标签：python, oop, inheritance

我确信可能有一个简单的解决方案，但无论如何问题是这样的：我有两个类，比如说`A`和，它们都有类似于数据框的属性——这些属性是数据框类的实例，`B`称之为`C`有自己的方法。我想定义一个“类似接口”的类`D`，它具有可以对这些属性进行操作的方法（即对作为`A`和的属性的数据帧进行操作`B`）。

*为清楚起见进行编辑*：在下面的内容中，让`a`和`b`成为来自 class 的数据框（即实例）`C`。这样 的 方法`C`可用于`a`和`b`。

更明确地说：假设`a`数据框类似于 的属性`A`，具有属性`Series1`，...，`Seriesn`。由于`a`类似于数据框，我可以调用 `a.Series1, a.Series2, ...`etc 来访问`Series1`, `Series2`in的内容`a`。当然`a`是一个属性，`A`所以我实际上是在调用`A.a.Series1`, `A.a.Series2`.. 等，并且`a`有自己的类方法，`C`所以我可以调用`A.a.Series1.methodfromclassC()`没有问题。无论如何。现在假设我想以一致的方式对`a.Seriesj`, or的内容进行转换`b.Seriesj`，实现为 class 中的方法`D`，并且两者都`A`可以`B`访问。我希望能够`A`像这样调用班级成员的想法：`A.a.Seriesj.transformseries()`. 我遇到的问题是它`Seriesj`有自己的方法（继承自 class `C`）并且`transformseries()`不是其中之一。

这可能看起来有点令人费解，但我的想法是最终我可以将多个调用链接到`D`更改数据帧属性状态的各种方法：`A.a.Series2.transform1().transform2().transformj()`等等`B.b.Seriesj.transform6().transform3()` ，以便最终表示`A.a`and`B.b`是我想要的形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:17:52.203

您是否考虑过为您的“注入”新方法`Seriesn`？在 Python 中，您可以像这样动态地将方法添加到类中：

```
setattr(MyClass, 'new_method', lambda self: 'return value') 
```

它甚至可以在之前实例化的对象中工作。因此，您可以向 Pandas`Series`和/或`Dataframe`类添加自定义方法。

# git - 使用 SmartGit 时如何更改 core.autocrlf？

> ID：16150322
> 
> 赞同：11
> 
> 时间：2013-04-22T15:00:58.983
> 
> 标签：git, smartgit, core.autocrlf

我没有从终端进行版本控制的任何经验，但据我所知，SmartGit 没有终端，也没有使用我可以通过终端配置的外部 git 客户端，所以我真的不明白我怎么能对其执行 git 配置命令。具体来说，我想做：

```
git config --global core.autocrlf true 
```

它是否在 UI 中提供了等效的配置选项，或者是否有其他方法可以应用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T15:07:38.120

SmartGit/Hg 使用在首选项中配置的命令行 Git。命令行 Git 和 SmartGit/Hg 都将遵循您文件中的全局`core.autocrlf`配置。`.gitconfig`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-28T09:51:26.090

如果您遇到终端问题，您还可以在 Linux 平台上编辑 $HOME/.gitconfig 文件或在 Windows 上编辑 C:\Users\%USERNAME%\.gitconfig 文件，并在其中添加以下行：

```
[core]
    autocrlf = false 
```

您还可以使用以下命令设置默认 EOL：

```
[core]
    eol = lf 
```

# c# - 我想通过 C# 中的正则表达式解析我的脚本文件

> ID：16150329
> 
> 赞同：1
> 
> 时间：2013-04-22T15:01:13.860
> 
> 标签：c#, regex

我有一个像下面这样的脚本文件

```
[grade]
`[achievement]`

[gold multiple]
250

[level]
34
99

[pre required quest]
38
[/pre required quest] 
```

例如：

```
lex("grade") return "`[achievement]`"

lex("level") return "34,99" 
```

也许我可以通过 linq 做到这一点，但我找不到办法

我试过了

```
scripts = File.ReadAllText(scriptFilePath);
string gradeKeyword = @"(?<=\[grade\]\r\n).*?\r\n*(?=\[.*\]\r\n)"
Regex reg = new Regex(gradeKeyword);
Match mat = reg.Match(scripts); 
```

它没有用（我想得到`[achievement]`）

顺便说一句，我可以通过 linq 做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:46:34.867

您可以尝试不使用正则表达式。

```
public static IEnumerable<string> GetScriptSection(string file, string section)
{
    var startMatch = string.Format("[{0}]", section);
    var endMatch = string.Format("[/{0}]", section);
    var lines = file.Split(Environment.NewLine.ToCharArray(), StringSplitOptions.RemoveEmptyEntries).Select(s => s.Trim()).ToList();

    int startIndex = lines.FindIndex(f => f == startMatch) + 1;
    int endIndex = lines.FindLastIndex(f => f == endMatch);

    if(endIndex == -1)
    {
        endIndex = lines.FindIndex(startIndex,  f => f.StartsWith("[") && lines.IndexOf(f) > startIndex);
        endIndex = endIndex == -1 ? lines.Count : endIndex;
    }

    return lines.GetRange(startIndex, endIndex - startIndex).Where(l => !string.IsNullOrWhiteSpace(l)).ToList();
} 
```

但我只会使用 YAML、XML 或其他一些常用的格式，而不是自己滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:12:11.190

.NET 正则表达式默认不匹配换行符。您必须指定[RegexOptions.SingleLine](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:20:40.587

尝试以下表达式：

```
string gradeKeyword = "\\[level\\]\\r\\n([^\\[].+\\r\\n)+"; 
```

# c# - C# 简单表单索引超出了数组的范围

> ID：16150335
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:01:21.687
> 
> 标签：c#, arrays, forms, indexing

我是一名编程学生，并决定制作一个简单的程序来练习。这是一个简单的表格，有姓名、出生日期、地址等，它被保存在一个文本文件中（我知道有更简单的方法，但我想学习所有这些方法并从这个开始=））

我有一个按钮可以按名称搜索此人是否已保存，如果是，则应该用数据填写表格。

这是如何保存的示例：

```
38b7aa1f-0afb-4fe5-a8f6-40fe953eb1ca;Cindy;22/07/2005;111.111.111-11;22.222.222-2;33333-333;Testes;2112;05;Testando;Testadora;SP;cindy@gmail.com;(44)44444-4444;(55)55555-5555;True;True;Rose;26/05/1950;666.666.666-66;77.777.777-7 
```

因此，名称 (Cindy) 将在数组的索引 [1] 中。

问题是这个错误：index was outside the bounds of the array 在这一行：if (linha[1] == txtboxNome.Text)

我在互联网上搜索并有点理解问题，但仍然不知道如何解决它。

有人可以帮我吗？如何正确加载我的表单？

这是帮助您“查看”该程序的打印件。不要担心布局，一些东西在运行时会得到不透明度 0 =) [http://i.imgur.com/jze16Pz.jpg](http://i.imgur.com/jze16Pz.jpg)

提前感谢=）

```
 private void pesquisarNovoBtn_Click(object sender, RoutedEventArgs e)
    {

        var filePath = @"E:\Programação\WPF ConsultorioDentista\WPF ConsultorioDentista\bin\Debug\Pacientes.txt";
        string[] resultado = null;

        using (var abrirPacientes = System.IO.File.OpenText(filePath))
        {
            string lerPacientes = abrirPacientes.ReadLine();

            while (lerPacientes != null)
            {                    
                var linha = lerPacientes.Split(';');

                if (linha[1] == txtboxNome.Text)
                {
                    resultado = linha;
                    break;
                }

                lerPacientes = abrirPacientes.ReadLine();
            }

            if (resultado == null)
            {
                MessageBox.Show("Paciente não encontrado.");
            }
            else
            {
                txtboxNome.Text = resultado[1];
                txtboxData.Text = resultado[2];
                txtboxCPF.Text = resultado[3];
                txtboxRG.Text = resultado[4];
                txtboxCEP.Text = resultado[5];
                txtboxEndereco.Text = resultado[6];
                txtboxNumero.Text = resultado[7];
                txtboxCompl.Text = resultado[8];
                txtboxBairro.Text = resultado[9];
                txtboxCidade.Text = resultado[10];
                txtboxUF.Text = resultado[11];
                txtboxEmail.Text = resultado[12];
                txtboxCel.Text = resultado[13];
                txtboxTelRes.Text = resultado[14];
                //checkBoxClinico.IsChecked = resultado[15];
                //checkBoxOrto.IsChecked = resultado[16];

                txtboxNomeResp.Text = resultado[17];
                txtboxNascResp.Text = resultado[18];
                txtboxCPFResp.Text = resultado[19];
                txtboxRGResp.Text = resultado[20];
            }
            abrirPacientes.Close();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:05:19.727

这是您需要“逐步执行”应用程序的地方。在 If 语句上设置断点 (F9)：

```
 if (linha[1] == txtboxNome.Text)
                {
                    resultado = linha;
                    break;
                } 
```

然后将鼠标悬停在 linha 数组中查看包含的值。

很可能您在文件的第一行中有一个标题，并且它没有拆分。

# sql - 从两个匹配条件的表中获取数据

> ID：16150336
> 
> 赞同：1
> 
> 时间：2013-04-22T15:01:25.530
> 
> 标签：sql, sql-server, tsql

考虑两个表的架构：

```
1) Person(name varchar(100),income int)

2) IncomeGroups(incomeGroupName varchar(100), minIncome int, maxIncome int) 
```

我在开发一个 sql 查询以根据他们的收入使用他们的 IncomeGroupNames 获取人名时被绊倒了。

我正在尝试完成类似 (Name,IncomeGroupName) 之类的事情。

甚至可能吗？如果有人可以指导我，我会非常高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:03:10.137

```
SELECT  a.Name, b.IncomeGroupName
FROM    Person a
        INNER JOIN IncomeGroups b
            ON a.income BETWEEN b.minIncome AND b.maxIncome 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:03:46.967

您可以使用以下连接表的查询：

```
select p.name,
  i.incomeGroupName
from person p
inner join incomegroups i
  on p.income >= i.minIncome
  and p.income <= i.maxIncome; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5cc3c/1)

这会根据个人收入的范围加入表格。

# rapidminer - 按顺序存储带有名称的文本

> ID：16150343
> 
> 赞同：0
> 
> 时间：2013-04-22T15:01:39.693
> 
> 标签：rapidminer

我正在使用 RapidMiner 5 GUI，我想将属性的所有值存储在不同的文本文件中。但是，如果我使用任何写实用程序，如写或写文档，它要么覆盖数据，要么给出错误。

我想将所有值存储在带有序列或附加内容的不同文件中。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:39:05.063

使用 Loop Attributes 运算符，您可以循环使用属性，使用 Generate Macro 运算符，您可以从宏作为属性名称创建您喜欢的文件名。

# jsf - 如何在其中拥有多个数据源 素面？

> ID：16150344
> 
> 赞同：4
> 
> 时间：2013-04-22T15:01:43.617
> 
> 标签：jsf, jakarta-ee, primefaces

我想在其中使用多个数据源，`droppable`但它不适用于以下语法：

```
<p:droppable id="droptableof" for="lesOf" tolerance="touch" datasource="orderedOf orderedOf2" scope="zone2" activeStyleClass="ui-state-default" hoverStyleClass="ui-state-hover">
    <p:ajax listener="#{beanJsf73.onOfback}" update="order2 lesOf lesOf2"  />
</p:droppable> 
```

我们如何在 Primefaces 中添加两个数据源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T10:59:30.363

目前你不能。查看[问题 1469](https://code.google.com/p/primefaces/issues/detail?id=1469)。

讨论中的解决方法可能会解决您的问题

# ruby - 如何使用 Ruby 的 XMLRPC::Client::new3

> ID：16150353
> 
> 赞同：1
> 
> 时间：2013-04-22T15:02:05.957
> 
> 标签：ruby, xmlrpcclient

我正在尝试理清如何使用 XMLRPC::Client 类的 new3 方法。这就是我所拥有的：

```
#!/usr/bin/ruby

require "xmlrpc/client"

params = {
  host: "https://192.168.1.2",
  path: "rpc/api",
  port: "443",
  proxy_host: "",
  proxy_port: "",
  user: "username",
  password: "password",
  use_ssl: "true",
  timeout: 300,
}

session = XMLRPC::Client.new3(params)
session.instance_variable_get(:@http).instance_variable_set(:@verify_mode, OpenSSL::SSL::VERIFY_NONE)

sys_ver = session.call('api.systemVersion')
users = session.call("user.listUsers", session) 
```

如果我使用 new2 方法，脚本将连接并返回 404 错误。但是，如果我使用 new3 它会返回

```
/usr/lib/ruby/1.9.1/net/http.rb:762:in `initialize': Connection refused - connect(2) (Errno::ECONNREFUSED)
    from /usr/lib/ruby/1.9.1/net/http.rb:762:in `open'
    from /usr/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
    from /usr/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
    from /usr/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    from /usr/lib/ruby/1.9.1/net/http.rb:762:in `connect'
    from /usr/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    from /usr/lib/ruby/1.9.1/net/http.rb:750:in `start'
    from /usr/lib/ruby/1.9.1/xmlrpc/client.rb:535:in `do_rpc'
    from /usr/lib/ruby/1.9.1/xmlrpc/client.rb:420:in `call2'
    from /usr/lib/ruby/1.9.1/xmlrpc/client.rb:410:in `call'
    from sat_test.rb:24:in `<main>' 
```

我是否正确使用了 new3 方法？

另外，如果我改用新方法，是否需要为每个参数（proxy_host=、proxy_port= 等）设置 parameter=value？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:14:53.910

问题似乎更多是因为我的脚本编码错误。这就是我现在所拥有的：

```
#!/usr/bin/ruby

require "xmlrpc/client"

params = {
  host: "REDACTED",
  path: "/rpc/api",
  use_ssl: "true",
  user: "REDACTED",
  pass: "REDACTED"
}

client = XMLRPC::Client.new3(params)
client.instance_variable_get(:@http).instance_variable_set(:@verify_mode, OpenSSL::SSL::VERIFY_NONE)

session = client.call('auth.login', params[:user], params[:pass])

sys_ver = session.call('api.systemVersion', session)
users = session.call("user.listUsers", session)
users.each { |uname| puts uname } 
```

我已经删除了 params 哈希中不必要的参数，并确保所有内容都被正确引用。

它有效，只给我留下一个 404 错误，这*是*脚本的问题。但是，至少它现在连接并给了我一些东西。

# eclipse - 在 Eclipse-RAD 上增加堆大小

> ID：16150354
> 
> 赞同：0
> 
> 时间：2013-04-22T15:02:07.350
> 
> 标签：eclipse, ibm-rad

我正在尝试增加我的 RAD 安装的堆大小。当我进行更改时，Eclipse 没有启动。

当前配置...

```
-startup
plugins\org.eclipse.equinox.launcher_1.0.101.R34x_v20081125.jar
-install
C:\Program Files\IBM\SDP
--launcher.library
plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.0.101.R34x_v20080731
-vm
jdk\jre\bin\j9vm\jvm.dll
-vmargs
-Xquickstart
-Xms128m
-Xmx1024m
-Xmnx64m
-Xgcpolicy:gencon
-Xscmx96m
-Xshareclasses:name=IBMSDP_%u
-Xnolinenumbers
-XX:MaxPermSize=128M
-Dcom.ibm.ws.management.event.max_polling_interval=1000 
```

我已将启动更改为 256m，最大更改为 1536m。有了这个改变，Eclipse 甚至不会启动，我得到这个错误..![Eclipse 启动错误](https://i.stack.imgur.com/zLfv1.jpg)

有人可以解释这意味着什么以及如何正确增加内存吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:26:00.607

这与 Eclipse 无关，虚拟机本身拒绝出现。可能的原因有：

*   xxx 范围受物理和*可用*内存的限制。因此，关闭其他正在运行的应用程序会增加使用增加的设置运行此 JVM 的机会。
*   其他一些 JVM 配置选项可能与增加的内存设置相冲突。因此，我会尝试删除其他 -X... 参数，同时摆弄 -Xmx 选项。如果成功，则一一重新引入其他参数，以查看冲突发生的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-18T19:06:16.113

坦率地说，我不知道真正的原因，但是.. 我只是在这里读到了它[http://www.strongback.us/2012/01/increasing-the-jvm-heap-for-rsa-rad-and-other-理性或日食产品](http://www.strongback.us/2012/01/increasing-the-jvm-heap-for-rsa-rad-and-other-rational-or-eclipse-products)

这是上面链接的摘录。

> 您还必须更新该行
> 
> **-vm '安装目录**'jdkjrebinj9vmjvm.dll到 **-vm '安装目录'jdkjrebinjavaw.exe**
> 
> 否则，它不会尊重这些变量，并且会使**您的 Eclipse 实例崩溃**。

PS：这个解决方案或问题我自己没有经历/测试过。

谢谢，萨米尔纳夫迪

# mysql - 从mac卸载mysql不起作用

> ID：16150356
> 
> 赞同：4
> 
> 时间：2013-04-22T15:02:14.927
> 
> 标签：mysql, macos, uninstallation

我已经完成了这些步骤：

```
sudo rm /usr/local/mysql
sudo rm -rf /usr/local/mysql*
sudo rm -rf /Library/StartupItems/MySQLCOM
sudo rm -rf /Library/PreferencePanes/MySQL*
vim /etc/hostconfig and removed the line MYSQLCOM=-YES-
rm -rf ~/Library/PreferencePanes/MySQL*
sudo rm -rf /Library/Receipts/mysql*
sudo rm -rf /Library/Receipts/MySQL* 
```

和

```
sudo rm -rf /var/db/receipts/com.mysql.* 
```

但是，现在当我尝试执行命令“brew install mysql”时告诉我“mysql-5.6.10 已经安装”

有谁知道这个问题？

**

编辑

**

不知道这是否有助于诊断问题，但是...

我正在尝试使用 mysql_secure_installation 进行全新安装。我无法使用 -uroot --password 登录到 mysql，因为它告诉我访问被拒绝。使用“brew uninstall mysql”卸载然后使用“brew install mysql”重新安装后，我运行了 mysql_secure_installation 命令。在第一步中，我应该输入 root 密码（如果没有密码，请按 enter）我用一个空行按 enter，它告诉我再次拒绝访问。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T15:08:25.350

第 1 步：卸载 MySQL。

打开终端并输入：`cd /usr/local`，点击`enter` 输入：`ls`，点击`enter`。

验证有两个项目称为`mysql`和`mysql-5.1.37-osx10.5-x86_64`（或类似）。

这是您要删除的两个项目。

输入：`sudo rm mysql`，点击`enter`。

输入：`sudo rm -rf mysql-5.1.37-osx10.5-x86_64`，然后点击`enter`。

第 2 步：卸载 MySQL 启动项。

在 Termainl 中输入：`cd /Library/StartupItems`，点击`enter`。

输入：`ls`，点击`enter`。

验证是否有一个名为 的项目`MySQLCOM`。这是您要删除的项目。

输入：`sudo rm -rf MySQLCOM`，然后点击`enter`。

出现提示时输入您的密码。

****编辑 ******

 **删除配置文件：

```
/etc/my.cnf 
```

还要删除以下内容：

```
/Library/Receipts/InstallHistory.plist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T03:10:49.570

除了 Gokul Nath 的回答，您可能还需要在 /Library/PreferencePanes/MySQL.prefPane 删除 MySQL 系统偏好设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T07:56:08.057

我在我的主目录中找到了一个配置文件`~/.my.cnf`. 它给我带来了很多问题，它也应该被删除。**

# c - 格式说明符以在 C 中打印以下数据

> ID：16150359
> 
> 赞同：-6
> 
> 时间：2013-04-22T15:02:19.897
> 
> 标签：c

有人可以帮我用 C 语言打印以下数据，确切的格式说明符和打印过程。

```
 union
            {
                            char       c[8];
                            short     s[4];
                            long       l[2];
                            void *    vfp[2];
            } info; 
```

当我尝试使用 printf("%s\n", info.c); 和 printf("%s\n",info.s)。我得到了一些垃圾值。我还需要帮助打印这些指针。感谢您的支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:04:24.593

您需要了解**[union](http://en.wikipedia.org/wiki/Union_type#C.2FC.2B.2B)**的用法语义。您只能读取存储在联合的特定对象实例中的*类型。*并且您只能在特定实例中及时将一种类型存储在联合中。
因此，要么您存储，`s`要么`c`，它不能两者兼而有之。如果您的意图是存储这两种类型，那么您需要的是结构而不是联合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:06:37.747

首先，您[使用的是 union](http://bobobobo.wordpress.com/2008/01/25/c-difference-between-struct-and-union/)。内存在这 4 个数组之间*共享。*我不确定你想要那个。

其次，[格式说明符列表在这里](http://www.cplusplus.com/reference/cstdio/printf/)。 `%s`用于字符串。 `%p`用于指针，`%ld`可用于有符号长整数。

# php - 如何在 Phalcon 中的路由参数上定义默认键 => 值对行为？

> ID：16150364
> 
> 赞同：1
> 
> 时间：2013-04-22T15:02:36.243
> 
> 标签：php, frameworks, url-routing, phalcon

我想在我的路线上定义以下默认行为：

```
Url: myapp.com/mymodule/mycontroller/myaction/q/someTerm/key/someValue/key2/anotherValue 
```

此 url 应为调度程序提供以下参数：

```
array(
    'q' => 'someTerm',
    'key' => 'someValue',
    'key2' => 'anotherValue'
): 
```

我知道可以通过扩展路由器并实现我自己的路由器来轻松完成，但我想知道 Phalcon 是否有一个默认标志可以默认打开该方法。

现在，如果我申请路线

':module/:controller/:action/:params' 到这个 URL，我得到以下参数：

```
array(
    0 => 'q',
    1 => 'someTerm',
    2 => 'key'
    ... etc
); 
```

这是我不想要的。

如果 Phalcon 路由器没有执行此操作的默认标志，是否有一个事件在控制器中的 DI 调度程序中的参数可用之前立即触发？我想至少在它们到达控制器之前手动将它们映射到 key=>value 对。

编辑：我现在正在查看控制器中的 beforeExecuteRoute 事件，应该做我需要的。但是如果路由器自动执行此操作，我仍然会喜欢它 - 有时参数不是固定顺序，或者其中一些只是消失（想想复杂的搜索查询）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:25:08.090

您可以在调度程序中拦截“beforeDispatchLoop”事件以在调度操作之前转换参数：

```
$di['dispatcher'] = function(){

    $eventsManager = new Phalcon\Events\Manager();

    $eventsManager->attach('dispatch', function($event, $dispatcher) {
        if ($event->getType() == 'beforeDispatchLoop') {
            $keyParams = array();
            $params = $dispatcher->getParams();
            foreach ($params as $number => $value) {
                if ($number & 1) {
                    $keyParams[$params[$number - 1]] = $value;
                }
            }
            $dispatcher->setParams($keyParams);
        }
    });

    $dispatcher = new Phalcon\MVc\Dispatcher();
    $dispatcher->setEventsManager($eventsManager);

    return $dispatcher;
}); 
```

然后在控制器中使用转换后的参数：

```
class IndexController extends ControllerBase
{

    public function indexAction()
    {

        print_r($this->dispatcher->getParams());
        print_r($this->dispatcher->getParam('key'));
    }
} 
```

# sql - 在我的数据透视表查询中合并行

> ID：16150365
> 
> 赞同：0
> 
> 时间：2013-04-22T15:02:37.593
> 
> 标签：sql, sql-server, sql-server-2008

下面的 SQL 查询应该显示教师的可用性。有 4 种可能的预订类型 - 上午、下午、全天和每小时。如果有上午预订，则单元格中的文本应显示 PM，如果有 PM 预订，则应显示 AM，如果有全天预订，或上午和下午预订，则应显示“xxx”。这一切都很好。

现在，我继续按小时预订。可以安全地假设每天只有 2 小时的预订，上午 1 次（开始时间 <= 12 点）和下午 1 次（结束时间 > 12 点），这意味着我们应该显示“xxx”。然而，我真的很难让这个表现出来。

```
WITH Bookings AS
(   SELECT  TeacherID,
            [WeekDay] = DATENAME(WEEKDAY, BookingDate),
            [Status] = CASE 
                            WHEN [3] > 1 THEN 'XXX'
                            WHEN ([0] > 0 AND [1] > 0) THEN 'XXX'
                            WHEN [2] > 0 THEN 'XXX'                            
                            WHEN [0] > 0 THEN 'PM'
                            WHEN [1] > 0 THEN 'AM'
                            WHEN [3] > 0 AND CONVERT(time(0), EndTime) <= CONVERT(time(0), '12:00:00') THEN 'PM'
                            WHEN [3] > 0 AND CONVERT(time(0), StartTime) >= CONVERT(time(0), '12:00:00') THEN 'AM'
                            WHEN [3] > 0 AND CONVERT(time(0), StartTime) <= CONVERT(time(0), '12:00:00') AND CONVERT(time(0), EndTime) >= CONVERT(time(0), '12:00:00') THEN 'XXX'                           
                        END
    FROM    (   SELECT  TeacherID, BookingDate, BookingDuration, StartTime, EndTime, [x] = 1
                FROM    BookingDays where (Status = 0 or Status IS NULL)
            ) BookingDays
            PIVOT
            (   SUM(x)
                FOR BookingDuration IN ([0], [1], [2], [3])
            ) pvt

             WHERE BookingDate >= DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 0) AND BookingDate <= DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 6)

), PivotedBookings AS
(   SELECT  *
    FROM    Bookings
            PIVOT
            (   MAX([Status])
                FOR [WeekDay] IN ([Monday], [Tuesday], [Wednesday], [Thursday], [Friday])
            ) pvt

)
SELECT ID,Firstname,Surname,Band,'£' + CONVERT(varchar(50),DefaultChargeRateDaily) + '/' + '£' + CONVERT(varchar(50), DefaultPayRateDaily) as 'BandRates',Telephone,Mobile,Teacher,TeacherAssistant,KeyStage,MAX(Monday) Monday,MAX(Tuesday) Tuesday,MAX(Wednesday) Wednesday,MAX(Thursday) Thursday,MAX(Friday) Friday, Notes
  FROM (
SELECT  t.ID, 
        t.Firstname, 
        t.Surname, 
        tb.Band,
        t.DefaultChargeRateDaily,
        t.DefaultPayRateDaily,
        t.Telephone,
        t.Mobile,
        t.Teacher,
        t.TeacherAssistant,
        CASE WHEN t.Nursery > 0 THEN 'NUR' WHEN t.Reception > 0 THEN 'REC' WHEN t.Year1 > 0 THEN 'Y1' WHEN t.Year2 > 0 THEN 'Y2' WHEN t.Year3 > 0 THEN 'Y3' WHEN t.Year4 > 0 THEN 'Y4' WHEN t.Year5 > 0 THEN 'Y5' WHEN t.Year6 > 0 THEN 'Y6' WHEN t.Year7 > 0 THEN 'Y7' WHEN t.Year8 > 0 THEN 'Y8' WHEN t.Year9 > 0 THEN 'Y9' WHEN t.Year10 > 0 THEN 'Y10' WHEN t.Year11 > 0 THEN 'Y11' WHEN t.ALevel > 0 THEN 'ALevel' END + ' - ' + CASE WHEN t.ALevel > 0 THEN 'ALevel' WHEN t.Year11 > 0 THEN 'Y11' WHEN t.Year10 > 0 THEN 'Y10' WHEN t.Year9 > 0 THEN 'Y9' WHEN t.Year8 > 0 THEN 'Y7' WHEN t.Year6 > 0 THEN 'Y6' WHEN t.Year5 > 0 THEN 'Y6' WHEN t.Year4 > 0 THEN 'Y4' WHEN t.Year3 > 0 THEN 'Y3' WHEN t.Year2 > 0 THEN 'Y2' WHEN t.Year1 > 0 THEN 'Y1' WHEN t.Reception > 0 THEN 'REC' WHEN t.Nursery > 0 THEN 'NUR' ELSE '' END as 'KeyStage',

        Monday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 0) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Monday, '') END,
        Tuesday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 1) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Tuesday, '') END,
        Wednesday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 2) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Wednesday, '') END,
        Thursday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 3) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Thursday, '') END,
        Friday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 4) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Friday, '') END,
        Notes
FROM    Teachers t

        LEFT JOIN PivotedBookings pb
            ON pb.TeacherID = t.ID
        LEFT JOIN TeacherBands tb
            ON tb.ID = t.Band
        LEFT JOIN AvailabilityNotes an 
            ON t.ID = an.TeacherID
            WHERE t.Active = 0 and (t.Status = 1 or t.Status = 0) and t.PrimarySchool = 1
            ) T1
 GROUP BY ID,Firstname,Surname,Telephone,Mobile,Teacher,TeacherAssistant,KeyStage,Notes,DefaultChargeRateDaily,DefaultPayRateDaily,Band
 ORDER BY Surname,Firstname asc 
```

第一部分生成以下内容 -

```
SELECT  TeacherID,
            [WeekDay] = DATENAME(WEEKDAY, BookingDate),
            [Status] = CASE 
                            WHEN [3] > 1 THEN 'XXX'
                            WHEN ([0] > 0 AND [1] > 0) THEN 'XXX'
                            WHEN [2] > 0 THEN 'XXX'                            
                            WHEN [0] > 0 THEN 'PM'
                            WHEN [1] > 0 THEN 'AM'
                            WHEN [3] > 0 AND CONVERT(time(0), EndTime) <= CONVERT(time(0), '12:00:00') THEN 'PM'
                            WHEN [3] > 0 AND CONVERT(time(0), StartTime) >= CONVERT(time(0), '12:00:00') THEN 'AM'
                            WHEN [3] > 0 AND CONVERT(time(0), StartTime) <= CONVERT(time(0), '12:00:00') AND CONVERT(time(0), EndTime) >= CONVERT(time(0), '12:00:00') THEN 'XXX'                           
                        END
    FROM    (   SELECT  TeacherID, BookingDate, BookingDuration, StartTime, EndTime, [x] = 1
                FROM    BookingDays where (Status = 0 or Status IS NULL)
            ) BookingDays
            PIVOT
            (   SUM(x)
                FOR BookingDuration IN ([0], [1], [2], [3])
            ) pvt

             WHERE BookingDate >= DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 0) AND BookingDate <= DATEADD(ww, DATEDIFF(ww,0,'04/22/2013'), 6) 
```

表列：

```
TeacherID | WeekDay   | Status
9386    Monday      PM
9386    Tuesday     AM
9386    Wednesday   XXX
9763    Monday      PM
9763    Tuesday     AM
9763    Wednesday   XXX
9927    Monday      PM
9927    Tuesday     AM
9927    Wednesday   XXX
10358   Monday      PM
10358   Monday      AM 
```

我们可以在这里看到，最后两行需要合并并在状态列中显示为 XXX。

下面的屏幕截图中显示了一个示例。黄色突出显示，显示 PM。但是，有 2 小时预订（BookingDuration ID 3），一个是上午 10:00 - 上午 11:00，另一个是 14:00 - 15:00。因此，这应该显示 XXX，而不是 PM/AM。

![截屏](https://i.stack.imgur.com/Y4zih.png)

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:50:34.617

你的问题可以追溯到第一个查询：

```
FROM    (   SELECT  TeacherID, BookingDate, BookingDuration, StartTime, EndTime, [x] = 1
            FROM    BookingDays 
            WHERE   (Status = 0 OR Status IS NULL)
        ) BookingDays
        PIVOT
        (   SUM(x)
            FOR BookingDuration IN ([0], [1], [2], [3])
        ) pvt 
```

这样做的想法是获得一个输出，其中每位教师每天有一行，在子查询中添加`StartTime`和`EndTime`后，不能保证您每天每位教师都会得到一行，因为两条记录可能有不同的开始/同一日期的结束时间，为了解决这个问题，您可以使用：

```
| TeacherID | BookingDate | BookingDuration | StartTime | EndTime |
|-----------+-------------+-----------------+-----------+---------|
|    1      |  20130422   |        3        |   10:00   |  11:00  |
|    1      |  20130422   |        3        |   13:00   |  14:00  | 
```

在预订 CTE 中，这将返回（如果您将开始/结束时间添加到选择列表，但删除它们不会使其成为一行）：

```
| TeacherID | WeekDay | Status | StartTime | EndTime |
|-----------+---------|--------+-----------+---------|
|    1      |  Monday |   'AM' |   10:00   |  11:00  |
|    1      |  Monday |   'PM' |   13:00   |  14:00  | 
```

如果您使用以下

```
FROM    (   SELECT  TeacherID, 
                    BookingDate, 
                    BookingDuration, 
                    StartTime = MIN(StartTime) OVER(PARTITION BY TeacherID, BookingDate),
                    EndTime = MIN(StartTime) OVER(PARTITION BY TeacherID, BookingDate)
                    [x] = 1
            FROM    BookingDays 
            WHERE   (Status = 0 OR Status IS NULL)
        ) BookingDays
        PIVOT
        (   SUM(x)
            FOR BookingDuration IN ([0], [1], [2], [3])
        ) pvt 
```

使用窗口函数，您可以确保每个教师/天组合只返回相同的 StartTime 和 EndTime，您将获得：

```
| TeacherID | WeekDay | Status | StartTime | EndTime |
|-----------+---------|--------+-----------+---------|
|    1      |  Monday |  'XXX' |   10:00   |  14:00  | 
```

然后，您以后不需要在查询中合并行。

您需要进行的另一项更改是`Status`稍微更改 CASE 语句，以便获得完整的查询：

```
WITH Bookings AS
(   SELECT  TeacherID,
            [WeekDay] = DATENAME(WEEKDAY, BookingDate),
            [Status] = CASE 
                            WHEN ([0] > 0 AND [1] > 0) THEN 'XXX'
                            WHEN [2] > 0 THEN 'XXX'                            
                            WHEN [0] > 0 THEN 'PM'
                            WHEN [1] > 0 THEN 'AM'
                            WHEN [3] > 0 AND StartTime <= CONVERT(TIME, '12:00:00') AND EndTime >= CONVERT(TIME, '12:00:00') THEN 'XXX'   
                            WHEN [3] > 0 AND EndTime <= CONVERT(TIME, '12:00:00') THEN 'PM'
                            WHEN [3] > 0 AND StartTime >= CONVERT(TIME, '12:00:00') THEN 'AM'                        
                        END
    FROM    (   SELECT  TeacherID, 
                        BookingDate, 
                        BookingDuration, 
                        StartTime = CAST(MIN(StartTime) OVER(PARTITION BY TeacherID, BookingDate, BookingDuration) AS TIME),
                        EndTime = CAST(MAX(EndTime) OVER(PARTITION BY TeacherID, BookingDate, BookingDuration) AS TIME),
                        [x] = 1
                FROM    BookingDays 
                WHERE   (Status = 0 OR Status IS NULL)
            ) BookingDays
            PIVOT
            (   SUM(x)
                FOR BookingDuration IN ([0], [1], [2], [3])
            ) pvt
) 
```

我在这里所做的就是删除这条线`WHEN [3] > 1`，以防万一两个小时的时段都发生在上午，或者都发生在下午（我知道你已经说过假设这不会发生是安全的，但为了完整起见，我已添加），并且我将以下行移到了更高的位置：

```
WHEN [3] > 0 AND StartTime <= CONVERT(TIME, '12:00:00') AND EndTime >= CONVERT(TIME, '12:00:00') THEN 'XXX' 
```

这应该是获取所需格式的数据所需的所有更改。

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/ed172/3)（注老师 5）**

**编辑**

正如您所说，如果早上有一个小时时段，下午有一个时段，或者反过来，上述方法将失败。我认为，如果您将案例陈述更改为以下内容，这应该可以解决问题。

```
 [Status] = CASE 
                        WHEN ([0] > 0 AND [1] > 0) THEN 'XXX'
                        WHEN [2] > 0 THEN 'XXX'    
                        WHEN [3] > 0 AND StartTime <= CONVERT(TIME, '12:00:00') AND EndTime >= CONVERT(TIME, '12:00:00') THEN 'XXX' 
                        WHEN [3] > 0 AND StartTime <= CONVERT(TIME, '12:00:00') AND [1] > 0 THEN 'XXX'          
                        WHEN [3] > 0 AND StartTime >= CONVERT(TIME, '12:00:00') AND [0] > 0 THEN 'XXX'
                        WHEN [0] > 0 THEN 'PM'
                        WHEN [1] > 0 THEN 'AM'  
                        WHEN [3] > 0 AND EndTime <= CONVERT(TIME, '12:00:00') THEN 'PM'
                        WHEN [3] > 0 AND StartTime >= CONVERT(TIME, '12:00:00') THEN 'AM'                        
                    END 
```

# php - PHP datetime 比较天数

> ID：16150367
> 
> 赞同：4
> 
> 时间：2013-04-22T15:02:45.817
> 
> 标签：php, date, datetime

我正在将日期与此代码进行比较：

```
$date1 = new DateTime("2007-03-24 12:10:00");
$date2 = new DateTime("2009-06-26 14:00:30");
$interval = $date1->diff($date2); 
```

如果我回显这个：`echo $interval->m." months and".$interval->d." days.";`我得到输出`3 months and 2 days.`。现在，我想回应日期之间的差异，但包括天数中的月数，因此 1 个月（其中有 30 天）和 5 天的差异将是 35 天，而不是 1 个月和 5 天。我该怎么做呢？

我正在使用 PHP 5.3+ 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:04:52.247

您应该能够使用：

```
$interval->days; 
```

见：[http ://www.php.net/manual/en/class.dateinterval.php#dateinterval.props.days](http://www.php.net/manual/en/class.dateinterval.php#dateinterval.props.days)

```
echo "There are ".$interval->days." days between the two dates."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:06:42.923

您的`$interval`变量是[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)类型。

因此，`$interval->days`应该输出期望的输出。

# java - 在 Java 中从 Morphia / MongoDB 将 POJO 对象的集合序列化为 JSON 结构

> ID：16150370
> 
> 赞同：2
> 
> 时间：2013-04-22T15:02:56.137
> 
> 标签：java, json, mongodb, morphia

我正在使用 Morphia (0.99) 将 POJO 映射到 MongoDB (2.0.6)。现在我想从我的数据存储中返回一个集合/列表作为 JSON 结构，其中包括要使用 jQuery 发送到浏览器客户端的每个对象的 ID。

我从数据存储中检索 POJO 列表，然后将每个对象转换为`DBObject`MongoDB 对象。除了对象的 id 不包含在对象的打印输出中之外，这工作正常。这可能是由于ID是从A类继承的。POJO B有很多属性成员，所以一个想法是做一个简单的代理POJO然后序列化。

如何从`DBObject`（使用 Morphia 或 MongoDB 驱动程序）列表中创建 JSON 结构，以及如何在结构中包含`id`每个元素的结构？

PS。我一直在查看`BasicBSONList`MongoDB 驱动程序对象或使用 GSON (Google) lib，但我缺乏如何执行此操作的模式。

POJO 类

```
Class A {
    @Id
    private ObjectId id;
}

Class B extends A {
    ...

    @Override    
    public ObjectId getId() {
        return super.getId();
    }

    @Override
    public void setId(ObjectId id) {
        super.setId(id);
    }
    ...
} 
```

Morphia /MongoDB 查询

```
...
List<B> bList = bQry.asList();        
List<DBObject> dbObjList = Util.mapObjectToStringList((List<Object>)(List<?>)bList);
...

public static List<DBObject> mapObjectToStringList(List<Object> objList) {
    List<DBObject> dbObjectList = new ArrayList<DBObject>();
    Mapper mapper = morph.getMapper();        
    for(Object obj : objList) {
        DBObject dbObj = mapper.toDBObject(obj);
        Util.debug("Result as DB Object: " +dbObj.toString());
        dbObjectList.add(dbObj);
    }        
    return dbObjectList;
} 
```

# javascript - 如何使用 $q all angular.js 处理多个 http 请求

> ID：16150371
> 
> 赞同：2
> 
> 时间：2013-04-22T15:02:58.997
> 
> 标签：javascript, angularjs, q

我正试图围绕 $q 角度库。在我的 routeprovider 中，我想从服务器获取所有数据并将其存储在 localStorage 中。但由于某种原因，在路由到 selectMedia 之前，解析似乎没有等待所有 http 请求完成。根据我阅读角度文档的理解，这应该可以工作，但不能。我完全误解了这个概念还是我的想法正确？

```
 $routeProvider.           
            when('/', {
            redirectTo : '/selectMedia',
            resolve: {  
                data: function ($q, backendApi, localStorage, network, route, loginService){
                    var prices = function () {
                        var defer = $q.defer();
                        backendApi.prices.get(function (data) {
                            localStorage.setItem("videoPrice", data.VideoPrice);
                            localStorage.setItem("imagePrice", data.ImagePrice);
                            localStorage.setItem("prices", data.SliderPrices);
                            localStorage.setItem("priceSuffix", data.PriceSuffix);
                            defer.resolve();
                        }, defer.resolve);  
                        return defer.promise;
                    };
                    var validFormats = function () {
                        var defer = $q.defer(); 
                        backendApi.validFormats.get(function (formats) {
                            localStorage.setItem("validFormats", formats);
                            defer.resolve();
                        }, defer.resolve);
                        return defer.promise;
                    };
                    var videoFormats = function () {
                        var defer = $q.defer(); 
                        backendApi.videoFormats.get(function (videoFormats) {
                            localStorage.setItem("videoFormats", videoFormats); 
                            defer.resolve();
                        }, defer.resolve);
                        return defer.promise;
                    };
                    var categories = function () {
                        var defer = $q.defer();
                        backendApi.categories.get(function (data){
                            localStorage.setItem("categories", data.Categories);
                            defer.resolve();
                        },defer.resolve);   
                        return defer.promise;
                    };
                    var renewToken = function () {
                        var defer = $q.defer();
                        loginService.renewToken(defer.resolve);
                        return defer.promise;
                    };

                    if(network.isOnline()){                 
                        var promises = [renewToken(), categories(), videoFormats(), validFormats(), prices()];
                        return $q.all(promises);
                    }
                    else if(!network.isOnline() && localStorage.length === 0){
                        route('/error');
                    }
                }   
            }
        });
}]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:29:42.217

我没有看到路由定义中指定的路由控制器。我猜你已经`ngController`在视图级别设置了它。`resolve`当您没有在定义中指定控制器时，将跳过该块。

**4/23 更新**

`resolve`从官方文档中提取的属性定义：

> 一个可选的依赖关系映射**，应该注入到控制器**中。如果这些依赖项中的任何一个是承诺，它们将在控制器被实例化并触发 $routeChangeSuccess 事件之前被解析并转换为一个值。

根据定义，该`resolve`属性的设计目的是有一种方法可以将依赖项注入到与路由关联的控制器中。

# java - 将 Locale.ENGLISH 与货币对象一起使用时的异常

> ID：16150372
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:03:01.047
> 
> 标签：java

我想知道为什么当我尝试将 Locale.ENGLISH 与货币对象一起使用时，这个 Java 程序会引发异常。有谁能够帮我？？

```
package pr.javautility.TimerAndCurrency;

import java.util.Currency;
import java.util.Locale;

public class CurrencyDemo {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Currency c;
    c=Currency.getInstance(Locale.ENGLISH);
    System.out.println("Symbol used is " + c.getSymbol());
    System.out.println("Default fractional digits "
            + c.getDefaultFractionDigits());
}

} 
```

顺便说一句，我住在印度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:05:42.680

```
 c=Currency.getInstance(Locale.ENGLISH); 
```

应该

```
 c=Currency.getInstance(Locale.UK); 
```

根据[**Currency#getInstance(Locale) 文档**](http://docs.oracle.com/javase/6/docs/api/java/util/Currency.html#getInstance%28java.util.Locale%29)

> 返回给定语言环境所在国家/地区的 Currency 实例。IllegalArgumentException - 如果给定语言环境的国家不是受支持的 ISO 3166 国家代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:06:18.407

货币必须属于一个国家：

```
Currency.getInstance(Locale.UK); 
```

# vim - 确认在 ubuntu 中的 Vim 中不返回结果

> ID：16150383
> 
> 赞同：0
> 
> 时间：2013-04-22T15:03:38.353
> 
> 标签：vim, ubuntu-12.04, ack

我在 ubuntu 中使用带有 ack 的 vim。使用 :Ack 搜索时不返回任何结果。我已经安装了 ack-grep 和 ack.vim。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:22:27.640

Ack.vim[能够同时](https://github.com/mileszs/ack.vim/blob/master/plugin/ack.vim#L12)识别`ack-grep`和`ack`。如果这些都不在 your 中`$PATH`，则可以在 ack 中定义 ack 的路径`~/.vimrc`，如下所示：

```
let g:ackprg="<custom-ack-path-goes-here> -H --nocolor --nogroup --column" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:03:38.353

我们必须为 ack 创建一个符号链接才能与 vim 一起工作

```
ln -s /usr/bin/ack-grep /usr/bin/ack 
```

# android - 在android中保存一个文本文件

> ID：16150385
> 
> 赞同：1
> 
> 时间：2013-04-22T15:03:39.107
> 
> 标签：android, file-io

我是 android 新手，面临文件系统使用问题。

我已经看到了几个线程，但我仍然无法找到我正在寻找我的要求的答案。

我有一个原始文件**test.xml**，我想将它保存在我的 eclipse 项目中的**某个**位置，这样一旦我安装了应用程序，它就应该将我的 test.xml 文件移动到数据目录中，以便我能够读取它

请参考此链接：http: [//developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html)

我想将我的原始文件保存在：“/data/data/com.example.helloWorld/files”

我应该能够从以下命令中获取文件句柄

文件文件=新文件（context.getFilesDir（），文件名）；

请注意我不想将我的文件保存在资产文件夹中。

谢谢，
马尼什·班萨尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:12:49.363

我建议您最初使用资产作为文件的存储，因为它将与您的应用程序一起编译，然后一旦用户启动您的应用程序，您检查您的文件是否存在，如果不存在，您可以将资产保存到指定的内部存储位置文档，从那里您可以在文件系统中随意使用该文件。

# javascript - 您可以更改 Randori 生成的 html 文件的输出位置吗？

> ID：16150387
> 
> 赞同：0
> 
> 时间：2013-04-22T15:03:44.260
> 
> 标签：javascript, html, randori

我正在创建一个新项目，我想自定义 Randori 生成文件的位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:57:44.610

还有一点，当你调用 RandoriBootstrap 的 launch() 方法时，你可以传递两个参数。第一个是您是否要打开或关闭调试模式（调试模式确实会破坏缓存），第二个是类加载器将用来查找您的类的 URL。如果你把东西放在 generatedFoo 文件夹中，你需要确保 RandoriBootstrap 知道这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:03:44.260

查看[第 02 课：创建初始 HTML 文件并运行配置](https://github.com/RandoriAS/randori-plugin-intellij/wiki/Lesson-02%3a-Creating-an-Initial-HTML-file-&-Run-Configuration)

从这里您将看到如何编辑您的 Randori 配置。您可以根据需要制作任何生成的输出。但是，只需确保更新您的主 html 文件并指向正确（自定义）生成的文件夹。

# php - jQuery在单击不同div中的不同按钮时获取textarea的值

> ID：16150394
> 
> 赞同：0
> 
> 时间：2013-04-22T15:04:00.000
> 
> 标签：php, jquery, html

我正在创建一个 jQuery 函数，其中我使用一个类作为第二个 div 按钮中常见的按钮。我的 html 标记是

```
 <div class="micmstabs miindex">
     <h4>Manage Your Index Page Here</h4>
        <textarea  class="redactor_content" name="content" rows="4"><?php cms_html('index'); ?></textarea> 
         <a href="#" data-dismiss="modal" class="cms_s index_save btn btn-primary">Save Changes</a>  
  </div>

  <div class="micmstabs miterms">
     <h4>Manage Your Terms & Conditions Page Here</h4>
        <textarea  class="redactor_content" name="content" rows="4"><?php cms_html('terms'); ?></textarea> 
         <a href="#" data-dismiss="modal" class="cms_s terms_save btn btn-primary">Save Changes</a>
  </div> 
```

在上面，当我们单击时，`cms_s`我尝试根据 jQuery 中的条件检查获取 textarea 的值，如果此按钮具有此类，则获取此按钮和 textarea 所在的 div 的 textarea 值。

我的 jQuery 函数是

```
$(document).on('click', '.cms_s', function(event) {
        if ($(this).hasClass('index_save')) {
            var cms_page='index';
            }
        if ($(this).hasClass('terms_save')) {
            var cms_page='terms';
            }   
        if ($(this).hasClass('policy_save')) {
            var cms_page='policy';
            }
        if ($(this).hasClass('mem_save')) {
            var cms_page='membership';
            }
            alert(cms_page);
            var cms_html=$(this).parents("div").find('.redactor_content').val();
            alert(cms_html);

}); 
```

我能够完美地对班级进行条件检查。但是，当我尝试根据我单击的按钮获取 textarea 的值时，无论我单击什么按钮，它都会让我获得第一个 div 标记中存在的 textarea 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:06:14.980

如果您按下按钮并且想要上一个文本框值。这样做更容易：

```
$(document).on('click', '.cms_s', function(event) {
     var val = $(this).prev("textbox").val();
     // Or within the same level
     val = $(this).parent().find("textbox").val();
     val = $(this).siblings("textarea").val();
}); 
```

当所有输入都具有类时，就会出现问题，`redactor_content`因此`.val()`将获取数组中的第一个 textarea 并获取该值。这始终是第一`redactor_content`。

```
var cms_html=$(this).parents("div").find('.redactor_content').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:07:22.000

试试这个 -

```
var cms_html=$(this).closest("div").find('.redactor_content').val(); 
```

# php - MySQL“加载本地数据文件”

> ID：16150401
> 
> 赞同：0
> 
> 时间：2013-04-22T15:04:13.533
> 
> 标签：php, mysql, load-data-infile

我遇到了一个问题，我似乎无法克服它。我正在从文本文件中获取信息（例如，两列 29.12 23.42 用空格分隔），使用`LOAD LOCAL DATA INFILE`. 最初这仅使用 MySQL 中的一列，但是我必须添加一个`ID AUTO INCREMENT`以便我可以使用最新条目，此外我现在想将另一列存储在我的数据库中。这是我的代码，它可能很明显，但我似乎找不到它：

```
<?PHP
$username = "root";
$password = "";
$hostname = "localhost";
$table = "Received_Data";

// Connect to Database and Table

$dbhandle = mysql_connect($hostname, $username, $password)
    or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";

$selectdatabase = mysql_select_db("IWEMSData",$dbhandle)
    or die("Could not select IWEMSData");
echo "Connected to IWEMSData<br>";

// Clear Current Table and ReCreate

$dt = /*"UPDATE Received_Data SET PotVal = ''";*/ "DROP TABLE Received_Data";
mysql_query($dt);

$ctb = "CREATE TABLE Received_Data
(
Current DECIMAL(30,2) NOT NULL,
PotVal DECIMAL(30,2) NOT NULL, 

ID BIGINT NOT NULL AUTO_INCREMENT,
PRIMARY KEY(ID,PotVal,Current)
)";

mysql_query($ctb, $dbhandle);

echo "Received_Data Table has been created";

// Text File to read in

$Textfile = 'IWEMSData.txt';

mysql_query('

LOAD DATA LOCAL INFILE "IWEMSData.txt" 
REPLACE INTO TABLE Received_Data 
FIELDS TERMINATED BY "" 
LINES TERMINATED BY "\\r\\n
(PotVal, Current)
";')

or die('Error Loading Data File.<br>' . mysql_error());

// Close Database connection when complete

mysql_close($dbhandle);
?> 
```

所以我想要的是第 1 列是 ID，它将在每个条目上自动递增。第二行是 PotVal，第三行是 Current。然后我只想存储在第二列和第三列。

我遇到的问题是 ID 和 Current 显示的值不正确，我似乎只能得到一行。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:25:29.250

```
mysql_query('
LOAD DATA LOCAL INFILE "IWEMSData.txt" 
REPLACE INTO TABLE Received_Data 
FIELDS TERMINATED BY "" /*<- terminated by nothing? Shouldn't there be a space in it?*/
LINES TERMINATED BY "\\r\\n /*<- the closing " is missing*/
(PotVal, Current)
";') /*<- ah, here's the missing " What does it do here?*/ 
```

像这样写：

```
mysql_query('
LOAD DATA LOCAL INFILE "IWEMSData.txt" 
REPLACE INTO TABLE Received_Data 
FIELDS TERMINATED BY " " 
LINES TERMINATED BY "\\r\\n"
(PotVal, Current)
;') 
```

# angularjs - 让 Angular 知道已经从外部代码插入的 html。

> ID：16150406
> 
> 赞同：0
> 
> 时间：2013-04-22T15:04:25.533
> 
> 标签：angularjs

在一个特殊的应用程序中，我的页面正文由第三方库插入，`document.body.appendChild`在我无法控制的引导过程之后，由于该角度无法编译正文。
到目前为止我看到的示例`$compile`在将 html 插入 DOM 之前使用，但在这种情况下，主体已经存在，我怎样才能让角度识别非编译的主体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:27:07.997

在呈现主体后的那一刻，我将其内容替换为 html 的编译版本。

```
# in module's run method after the body is rendered
$('body').html $compile(body_contents) $rootScope
do $rootScope.$apply 
```

我不知道是否有更好的方法可以“激活”现有的 html 以供 angular 使用。

# android - android - 由于将静态数组列表更改为非动态而崩溃

> ID：16150407
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:04:26.970
> 
> 标签：android, android-viewpager

我 [在图像查看器中为每个图像使用了这个不同的文本](https://stackoverflow.com/questions/13664662/different-text-for-each-image-in-image-viewpager)

但是当我想要这个时：

```
public String[] stringArray = getResources().getStringArray(R.array.myarry); 
```

而不是使用静态作为

```
stringArray = new String[] { "Image a", "Image b","Image c","Image d","Image e"}; 
```

应用程序崩溃，我真的不知道为什么。

这是我的 LogCat：

```
04-22 14:56:37.002: D/dalvikvm(1066): GC freed 954 objects / 73824 bytes in 121ms
04-22 14:56:37.142: D/AndroidRuntime(1066): Shutting down VM
04-22 14:56:37.142: W/dalvikvm(1066): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-22 14:56:37.152: E/AndroidRuntime(1066): Uncaught handler: thread main exiting due to uncaught exception
04-22 14:56:37.182: E/AndroidRuntime(1066): java.lang.NullPointerException
04-22 14:56:37.182: E/AndroidRuntime(1066):     at com.mypackage.pager.ImagePagerAdapter.instantiateItem(ImagePagerAdapter.java:38)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:800)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.support.v4.view.ViewPager.populate(ViewPager.java:929)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.support.v4.view.ViewPager.populate(ViewPager.java:880)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1374)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.View.measure(View.java:7964)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:888)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:350)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.View.measure(View.java:7964)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.View.measure(View.java:7964)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:464)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.View.measure(View.java:7964)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.View.measure(View.java:7964)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.ViewRoot.performTraversals(ViewRoot.java:763)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.os.Looper.loop(Looper.java:123)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at android.app.ActivityThread.main(ActivityThread.java:4363)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at java.lang.reflect.Method.invoke(Method.java:521)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-22 14:56:37.182: E/AndroidRuntime(1066):     at dalvik.system.NativeStart.main(Native Method)
04-22 14:56:37.232: I/dalvikvm(1066): threadid=7: reacting to signal 3
04-22 14:56:37.232: E/dalvikvm(1066): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

这也是我的 ImagePagerAdapter

```
package com.mypackage.pager;

import android.app.Activity;
import android.content.Context;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;

public class ImagePagerAdapter extends PagerAdapter {

    Activity activity;
    int imageArray[];
    String[] stringArray;

    public ImagePagerAdapter(Activity act, int[] imgArra, String[] StringArra) {
        imageArray = imgArra;
        activity = act;
        stringArray = StringArra;
    }

    public int getCount() {
        return imageArray.length;
    }

    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.custom_pager, null);

        ImageView im = (ImageView) layout.findViewById(R.id.myimage);
        im.setImageResource(imageArray[position]);

        TextView txt = (TextView) layout.findViewById(R.id.image_text);
        txt.setText(stringArray[position]);  **//Line 38**
        ((ViewPager) collection).addView(layout, 0);
        return layout;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }

    @Override
    public Parcelable saveState() {
        return null;
    }
} 
```

和 ImagePager

```
package com.mypackage.pager;

import com.mypackage.pager.R;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.ViewPager;

public class ImagePager extends Activity {

    public int imageArra[] = { R.drawable.p4a_001, R.drawable.p4a_002, R.drawable.p4a_003,
            R.drawable.p4a_004, R.drawable.p4a_005,R.drawable.p4a_006,R.drawable.p4a_007 };
    public String[] stringArray ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra,
                stringArray);
        ViewPager myPager = (ViewPager) findViewById(R.id.myimagepager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);

        stringArray = getResources().getStringArray(R.array.myarray);

    }

} 
```

顺便说一句，正如我所说，它与提供链接中的静态名称一样工作得很好。但我想要动态方法。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:22:52.143

在使用 stringArray 之前添加语句`stringArray = getResources().getStringArray(R.array.myarray);`，即`ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra,stringArray);`. 如果没有这个，您`null`会将值传递给 ImagePagerAdapter。

即 onCreate() 代码必须如下

```
 @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        stringArray = getResources().getStringArray(R.array.myarray); 
        ImagePagerAdapter adapter = new ImagePagerAdapter(this, imageArra,
                stringArray);
        ViewPager myPager = (ViewPager) findViewById(R.id.myimagepager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:13:33.390

在使用之前尝试初始化字符串数组。

# mongodb - 为什么一个 mongodb 副本集需要奇数个投票节点？

> ID：16150409
> 
> 赞同：16
> 
> 时间：2013-04-22T15:04:36.010
> 
> 标签：mongodb

mongodb 文档建议副本集应该有奇数个投票节点。这是什么原因？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T15:09:40.653

让我们假设一个副本集有偶数个节点（例如 4 个）。然后发生了一个不幸的网络分区，将集合分成两半 (2 + 2)。哪个分区应该接受写入？第一的？第二？两个都？网络恢复后应该怎么办？这些都是难题。

具有奇数个节点完全消除了这些问题。该集合不能完全分成两半。所以更大的部分将接受写入（确切地说，节点必须看到超过一半的节点（包括自身）才能被选为主要节点。所以它是 1 of 1、2 of 3、3 of 5、4 of 7 等等）。

# javascript - 寻找引擎以使用瓷砖以 2d 或 3d 等距开发 html5 游戏？

> ID：16150413
> 
> 赞同：5
> 
> 时间：2013-04-22T15:04:38.550
> 
> 标签：javascript, html, canvas, 3d, game-engine

与朋友一起，我们想在 3D 等距游戏或 2D 中开发 html5 画布视频游戏。

经过一番研究，我发现了这个：[http](http://canvasengine.net) ://canvasengine.net 。

这似乎很清楚，容易，有记录......

你觉得这个库怎么样？你有另一个库要推荐吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:11:05.143

Canvasengine 对我来说似乎是一个不错的项目。

SO上的其他一些相关链接：
[HTML5 Tile Engine](https://stackoverflow.com/questions/3961189/html5-tile-engine)
[2D Engines for Javascript](https://stackoverflow.com/questions/10172191/2d-engines-for-javascript)

还有支持'[平铺'的](http://www.mapeditor.org/)[gameJS](http://gamejs.org/)！

我有点喜欢[gameQuery](http://gamequeryjs.com/)。

# jquery - 社会主义社交插件不适用于 Facebook

> ID：16150422
> 
> 赞同：-3
> 
> 时间：2013-04-22T15:04:57.660
> 
> 标签：jquery, social-media

所以我想知道是否有人知道为什么这个应用程序在输入 Facebook ID 时不起作用：http: [//plugins.in1.com/socialist/](http://plugins.in1.com/socialist/)我已经下载了这个应用程序并且 twitter 参数工作正常但是当我添加一个 facebook 参数时，它颂歌不起作用。我想知道是否有人可以帮助我让它工作，这是我的代码：

```
<html>
<head>
<link href="../jquery.socialist.css" rel="stylesheet" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src='../jquery.socialist.js'></script>
<script type="text/javascript">
$(document).ready(function () {
    $('#content').socialist({
        networks: [
           {name:'youtube',id:'LoyolaChicago'},
            {name:'facebook',id:'LoyolaChicago'},
           {name:'twitter',id:'LoyolaChicago'},
           {name:'flickr',id:'loyolauniversitychicago'},

           ],
        isotope:false,
        random:false,
        fields:['source','heading','text','date','image','followers','likes']
    });
});
</script>
</head>
<body>
    <div id="content"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:52:33.787

该页面上可能有隐私设置。当我尝试公共页面时，它起作用了..不像我想要的那样，但它起作用了！字段选项也阻止了我的工作。

# jquery - modernizr 检查灰度过滤器 IE 10

> ID：16150423
> 
> 赞同：2
> 
> 时间：2013-04-22T15:05:02.063
> 
> 标签：jquery, filter, modernizr

IE 10 不支持 DX 过滤器 (yeaaaaay) 我目前`$.browser`用于检测 IE 10 并实施 svg 解决方案。

但是，`$.browser`不推荐使用，将被删除或已被删除（再次！！！！）。那么，`$.browser`在这种情况下，modernizr 的替代方案是什么？

```
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+ */
filter: gray; /* IE6-9 */
-webkit-filter: grayscale(100%); /* Chrome 19+ & Safari 6+ */
-webkit-transition: all .6s ease; /* Fade to color for Chrome and Safari */
-webkit-backface-visibility: hidden; /* Fix for transition flickering */ 
```

我试过`if (Modernizr.css_filters)`了，但没用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:14:42.963

您应该能够使用：

```
Modernizr.cssfilters 
```

或者

```
Modernizr.svgfilters 
```

对于定位 IE10，我认为`.svgfilters`是您应该使用的。这是 Modernizr 测试的可搜索数据库：[http ://www.browserleaks.com/modernizr#filter](http://www.browserleaks.com/modernizr#filter)

这些是源文件：

CSS 过滤器测试：[https ://github.com/Modernizr/Modernizr/blob/master/feature-detects/css/filters.js](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/css/filters.js)

SVG 过滤器测试：[https ://github.com/Modernizr/Modernizr/blob/master/feature-detects/svg/filters.js](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/svg/filters.js)

# algorithm - 多个集合的最短路径

> ID：16150424
> 
> 赞同：1
> 
> 时间：2013-04-22T15:05:05.473
> 
> 标签：algorithm, dijkstra, shortest-path

我必须找到各种集合中节点之间的最短路径，我只能从每个集合中使用节点一次。每个节点都通过距离连接到其他所有节点。集合中的节点之间没有连接的例外情况。路径必须包含每个集合中的一个节点。

例如。

```
 Set A - [a1, a2, a3]
    Set B - [b1, b2]
    Set C - [c1]
    Set D - [d1, d2, d3]
    Set Z - [z1, z2, z3] 
```

节点是 a1,a2,a3,b1,b2...

例如。节点**a1**与

> b1,b2,c1,d1,d2,d3,z1,z2,z3

或节点**c1**与

> a1,a2,a3,b1,b2,d1,d2,d3,z1,z2,z3

可能的路径可能是：

> a1 -> b1 -> c1 -> d1 -> z1，或 c1 -> z2 -> a3 -> b1 -> d2

每个节点之间的距离（除了集合中的节点，没有连接）可以从 0 到 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:24:49.123

这被称为广义旅行商问题。

来自[C. Noon 和 J.Bean，*广义旅行推销员问题的有效转换*](http://deepblue.lib.umich.edu/bitstream/handle/2027.42/6834/ban3102.0001.001.pdf;jsessionid=FE47BED6BEFA1D7A88661CBCABEF64AC?sequence=5)：

> *广义旅行商问题*(GTSP) 是一个有用的模型，用于解决涉及选择和顺序决策的问题。该问题的非对称版本是在一个有向图上定义的，该有向图具有节点 N、连接弧 A 和相应弧成本 c 的向量。节点被预先分组为 m 个互斥且详尽的节点集。连接弧只在属于不同集合的节点之间定义，即没有集合内弧。每个定义的弧都有相应的非负成本。GTSP 可以说是找到一个最小成本 m-arc 循环的问题，该循环恰好包括每个节点集中的一个节点。

本文解释了如何将您的问题转化为标准旅行商问题的案例。

# java - 防止键盘隐藏视图android

> ID：16150425
> 
> 赞同：1
> 
> 时间：2013-04-22T15:05:10.027
> 
> 标签：java, android, keyboard, android-edittext

我已经对此进行了很好的搜索，但我从未找到有效的解决方案，所以这就是我在这里发布的原因。

我有一个 android 应用程序，其中有一个 TableLayout，其中包含一些视图（EditText、TextView 和 CheckBox）。

我实现了自己的键盘，因此我可以控制用户输入的信息。

我的 TableLayout 在 ScrollView 中，因为 TableLayout 可以有很多行。

我遇到的问题是当我的键盘出现时，它隐藏了 EditText 焦点。通常 android 将 EditText 向上推以使其可见，但在我的情况下不是。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:12:51.420

您是否尝试将属性添加`windowSoftInputMode`到清单文件中：

```
android:windowSoftInputMode="adjustResize" 
```

或者

```
android:windowSoftInputMode="adjustPan" 
```

`<activity>`标签内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:54:25.370

总是有同样的问题。我发现 windowsSoftInputMode="adjustPan" 或其他选项不适用于自定义键盘。

我的CustomKeyboard 是一个实现KeyboardView 的类，将一个xml 链接到这个keyboardView 并有2 种方法来显示或隐藏它...

如果有人知道为什么 adjustPan 不能与自定义键盘一起使用，请告诉我们！

特里斯坦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T14:31:36.553

我在使用 KeyboardView 的自定义键盘时遇到了同样的问题，我通过设置项目选择和短延迟解决了这个问题。

```
public boolean isCustomKeyboardVisible() {
return keyboardView.getVisibility() == View.VISIBLE;
}

public void showCustomKeyboard() {
    if (!isCustomKeyboardVisible()) {
    keyboardView.setVisibility(View.VISIBLE);
            //Calling my custom listener
    onKeyboardVisibilityChanged.visibilityChanged(true); 
    listView.postDelayed(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(position);
        }
    }, 50);
}
}

public void hideCustomKeyboard() {
if (isCustomKeyboardVisible()) {
    keyboardView.setVisibility(View.GONE);
    onKeyboardVisibilityChanged.visibilityChanged(false);
}
} 
```

# zend-framework - Zend 表单元素验证码 - reCAPTCHA - 有条件需要

> ID：16150426
> 
> 赞同：0
> 
> 时间：2013-04-22T15:05:12.600
> 
> 标签：zend-framework, zend-form, captcha, recaptcha, zend-form-element

我有一个使用 reCAPTCHA 的 Zend Form Captcha Element，它运行良好。我想让该字段有条件地需要，但它似乎总是需要的，忽略`required`元素上的设置。我知道拥有该元素但不需要它听起来很愚蠢，但这正是我需要完成的。

# c++ - 为什么编译器不能最佳地调度或消除指令？

> ID：16150433
> 
> 赞同：4
> 
> 时间：2013-04-22T15:05:47.663
> 
> 标签：c++, gcc, compiler-optimization

我想知道编译器在优化结构分配方面做得如何，我做了一些测试，结果令人惊讶。（我想向 GCC 提出这个问题。）

特别是我正在查看 GCC 4.6.3 (-O3) 的汇编程序（编辑：我还包括 GCC 4.8.0 的输出）产生以下代码：

```
template<class T>
struct C
{
  T F[3];
  C(){}
  C(const T& t0,const T& t1,const T& t2): F{{t0},{t1},{t2}} {}
};

template<class T>
__attribute__((always_inline))
C<T>
operator+( const C<T>& l , const C<T>& r )
{
  return C<T>( l.F[0] + r.F[0] , 
           l.F[1] + r.F[1] , 
           l.F[2] + r.F[2] );
}

int main() 
{
  C<C<C<float> > > a,b,c;

  a=b+c;

  printf("%s",(const char*)&a);
} 
```

这里是汇编程序：

```
movss   264(%rsp), %xmm0
leaq    48(%rsp), %rbx
leaq    156(%rsp), %rbp
addss   376(%rsp), %xmm0
movss   %xmm0, 4(%rsp)

movss   260(%rsp), %xmm0
addss   372(%rsp), %xmm0
movss   %xmm0, 8(%rsp)

movss   256(%rsp), %xmm0
addss   368(%rsp), %xmm0
movss   %xmm0, 12(%rsp)

movss   252(%rsp), %xmm0
addss   364(%rsp), %xmm0
movss   %xmm0, 16(%rsp)

movss   248(%rsp), %xmm0
addss   360(%rsp), %xmm0
movss   %xmm0, 20(%rsp)

movss   244(%rsp), %xmm0
addss   356(%rsp), %xmm0
movss   %xmm0, 24(%rsp)

movss   240(%rsp), %xmm0
addss   352(%rsp), %xmm0
movss   %xmm0, 28(%rsp)

movss   236(%rsp), %xmm0
addss   348(%rsp), %xmm0
movss   %xmm0, 32(%rsp)

movss   232(%rsp), %xmm0
addss   344(%rsp), %xmm0
movss   %xmm0, 36(%rsp)

movss   228(%rsp), %xmm0
addss   340(%rsp), %xmm0
movss   %xmm0, 40(%rsp)

movss   224(%rsp), %xmm0
addss   336(%rsp), %xmm0
movss   %xmm0, 44(%rsp)    // 11-th

movss   220(%rsp), %xmm0
movss   164(%rsp), %xmm14
movss   160(%rsp), %xmm15
addss   332(%rsp), %xmm0
addss   272(%rsp), %xmm15
movss   216(%rsp), %xmm1
addss   276(%rsp), %xmm14
movss   212(%rsp), %xmm2
movss   208(%rsp), %xmm3
addss   328(%rsp), %xmm1
movss   204(%rsp), %xmm4
addss   324(%rsp), %xmm2
movss   200(%rsp), %xmm5
addss   320(%rsp), %xmm3
movss   196(%rsp), %xmm6
addss   316(%rsp), %xmm4
movss   192(%rsp), %xmm7
addss   312(%rsp), %xmm5
movss   188(%rsp), %xmm8
addss   308(%rsp), %xmm6
movss   184(%rsp), %xmm9
addss   304(%rsp), %xmm7
movss   180(%rsp), %xmm10
addss   300(%rsp), %xmm8
movss   176(%rsp), %xmm11
addss   296(%rsp), %xmm9
movss   172(%rsp), %xmm12
addss   292(%rsp), %xmm10
movss   168(%rsp), %xmm13
addss   288(%rsp), %xmm11
addss   284(%rsp), %xmm12
movss   %xmm15, 384(%rsp)
addss   280(%rsp), %xmm13  // all 27 floats added
movss   %xmm14, 388(%rsp)
movss   %xmm0, 444(%rsp)
movss   44(%rsp), %xmm0
movss   %xmm0, 448(%rsp)
movss   40(%rsp), %xmm0
movss   %xmm0, 452(%rsp)
movss   36(%rsp), %xmm0
movss   %xmm0, 456(%rsp)
movss   32(%rsp), %xmm0
movss   %xmm0, 460(%rsp)
movss   28(%rsp), %xmm0
movss   %xmm0, 464(%rsp)
movss   24(%rsp), %xmm0
movss   %xmm0, 468(%rsp)
movss   20(%rsp), %xmm0
movss   %xmm0, 472(%rsp)
movss   16(%rsp), %xmm0
movss   %xmm0, 476(%rsp)
movss   12(%rsp), %xmm0
movss   %xmm0, 480(%rsp)
movss   8(%rsp), %xmm0
movss   %xmm13, 392(%rsp)
movss   %xmm12, 396(%rsp)
movss   %xmm11, 400(%rsp)
movss   %xmm10, 404(%rsp)
movss   %xmm9, 408(%rsp)
movss   %xmm8, 412(%rsp)
movss   %xmm7, 416(%rsp)
movss   %xmm6, 420(%rsp)
movss   %xmm5, 424(%rsp)
movss   %xmm4, 428(%rsp)
movss   %xmm3, 432(%rsp)
movss   %xmm2, 436(%rsp)
movss   %xmm1, 440(%rsp)
movss   %xmm0, 484(%rsp)  // Storing of temporary finished
movq    384(%rsp), %rax   // Now begin copy temporary to destination
movss   4(%rsp), %xmm0
movss   %xmm0, 488(%rsp)
movq    %rax, 48(%rsp)
movq    392(%rsp), %rax
movq    %rax, 56(%rsp)
movq    400(%rsp), %rax
movq    %rax, 64(%rsp)
movq    408(%rsp), %rax
movq    %rax, 72(%rsp)
movq    416(%rsp), %rax
movq    %rax, 80(%rsp)
movq    424(%rsp), %rax
movq    %rax, 88(%rsp)
movq    432(%rsp), %rax
movq    %rax, 96(%rsp)
movq    440(%rsp), %rax
movq    %rax, 104(%rsp)
movq    448(%rsp), %rax
movq    %rax, 112(%rsp)
movq    456(%rsp), %rax
movq    %rax, 120(%rsp)
movq    464(%rsp), %rax
movq    %rax, 128(%rsp)
movq    472(%rsp), %rax
movq    %rax, 136(%rsp)
movq    480(%rsp), %rax
movq    %rax, 144(%rsp)
movl    488(%rsp), %eax
movl    %eax, 152(%rsp)  // Whole struct copied
.p2align 4,,10 
```

汇编器从指示的行开始显示整个（嵌套）结构的附加副本。有人可能会说这是因为编译器必须发出赋值（与可以省略的副本相反）。

我重复了这个实验，这次我只使用了 2 倍嵌套结构，而不是 3 倍嵌套结构。然后不会发生额外的副本。这是第二个实验的代码：

```
int main() 
{
  C<C<float> > a,b,c;

  a=b+c;

  printf("%s",(const char*)&a);
} 
```

和汇编程序：

```
 movss   80(%rsp), %xmm0
    movq    %rsp, %rdx
    movss   76(%rsp), %xmm1
    addss   128(%rsp), %xmm0
    movss   72(%rsp), %xmm2
    addss   124(%rsp), %xmm1
    movss   68(%rsp), %xmm3
    addss   120(%rsp), %xmm2
    movss   64(%rsp), %xmm4
    addss   116(%rsp), %xmm3
    movss   60(%rsp), %xmm5
    addss   112(%rsp), %xmm4
    movss   56(%rsp), %xmm6
    addss   108(%rsp), %xmm5
    movss   52(%rsp), %xmm7
    addss   104(%rsp), %xmm6
    movss   48(%rsp), %xmm8
    addss   100(%rsp), %xmm7
    addss   96(%rsp), %xmm8
    xorl    %eax, %eax
    movss   %xmm2, 24(%rsp)
    movss   %xmm3, 20(%rsp)
    movss   %xmm4, 16(%rsp)
    movss   %xmm5, 12(%rsp)
    movss   %xmm6, 8(%rsp)
    movss   %xmm7, 4(%rsp)
    movss   %xmm8, (%rsp)
    movss   %xmm1, 28(%rsp)
    movss   %xmm0, 32(%rsp) 
```

很明显，临时结构（保存 的结果`b+c`）可以完全分配在寄存器文件（9 个寄存器，xmm0-xmm8）中，随后无需复制即可存储。

然而，操作（加法+赋值）仅对存储容器上操作的指令造成弱数据依赖性。我要问的问题是：在第一个实验中，由于数据依赖性将允许指令的最佳调度，为什么编译器不以不需要额外副本的方式调度指令，即直接存储结果进入最终的内存地址？是否存在编译器无法查看的依赖性或边界的某些方面，从而有效地阻碍了这种优化？

编辑：

这里是从 GCC 4.8.0 (-std=c++0x -S -O3) 生成的汇编程序：

```
movss   264(%rsp), %xmm0
leaq    48(%rsp), %rdx
movss   260(%rsp), %xmm1
addss   376(%rsp), %xmm0
movss   256(%rsp), %xmm2
addss   372(%rsp), %xmm1
movss   252(%rsp), %xmm3
addss   368(%rsp), %xmm2
movss   248(%rsp), %xmm4
addss   364(%rsp), %xmm3
movss   244(%rsp), %xmm5
addss   360(%rsp), %xmm4
addss   356(%rsp), %xmm5
movss   196(%rsp), %xmm11
addss   308(%rsp), %xmm11
movss   %xmm0, 4(%rsp)
movss   %xmm1, 8(%rsp)
movss   %xmm2, 12(%rsp)
movss   %xmm3, 16(%rsp)
movss   %xmm4, 20(%rsp)
movss   %xmm5, 24(%rsp)
movss   240(%rsp), %xmm0
movss   236(%rsp), %xmm1
movss   232(%rsp), %xmm2
addss   352(%rsp), %xmm0
movss   228(%rsp), %xmm3
addss   348(%rsp), %xmm1
movss   224(%rsp), %xmm4
addss   344(%rsp), %xmm2
movss   220(%rsp), %xmm5
addss   340(%rsp), %xmm3
movss   216(%rsp), %xmm6
addss   336(%rsp), %xmm4
movss   212(%rsp), %xmm7
addss   332(%rsp), %xmm5
movss   208(%rsp), %xmm8
addss   328(%rsp), %xmm6
movss   204(%rsp), %xmm9
addss   324(%rsp), %xmm7
movss   200(%rsp), %xmm10
addss   320(%rsp), %xmm8
addss   316(%rsp), %xmm9
addss   312(%rsp), %xmm10
movss   %xmm11, 28(%rsp)
movss   192(%rsp), %xmm12
movss   188(%rsp), %xmm13
movss   184(%rsp), %xmm14
addss   304(%rsp), %xmm12
movss   180(%rsp), %xmm15
addss   300(%rsp), %xmm13
addss   296(%rsp), %xmm14
movss   176(%rsp), %xmm11
addss   292(%rsp), %xmm15
addss   288(%rsp), %xmm11
movss   %xmm12, 32(%rsp)
movss   %xmm13, 36(%rsp)
movss   %xmm14, 40(%rsp)
movss   %xmm15, 44(%rsp)
movss   172(%rsp), %xmm12
movss   168(%rsp), %xmm13
movss   164(%rsp), %xmm14
addss   284(%rsp), %xmm12
movss   160(%rsp), %xmm15
addss   280(%rsp), %xmm13
addss   276(%rsp), %xmm14
movss   %xmm11, 400(%rsp)
addss   272(%rsp), %xmm15
movss   %xmm12, 396(%rsp)
movss   %xmm13, 392(%rsp)
movss   %xmm14, 388(%rsp)
movss   36(%rsp), %xmm13
movss   40(%rsp), %xmm14
movss   %xmm15, 384(%rsp)
movss   32(%rsp), %xmm12
movss   44(%rsp), %xmm15
movss   %xmm15, 404(%rsp)
movss   %xmm14, 408(%rsp)
movss   %xmm13, 412(%rsp)
movss   %xmm12, 416(%rsp)
movq    384(%rsp), %rax
movss   28(%rsp), %xmm11
movss   %xmm11, 420(%rsp)
movq    %rax, 48(%rsp)
movq    392(%rsp), %rax
movss   %xmm5, 444(%rsp)
movss   %xmm4, 448(%rsp)
movss   24(%rsp), %xmm5
movq    %rax, 56(%rsp)
movss   %xmm3, 452(%rsp)
movq    400(%rsp), %rax
movss   20(%rsp), %xmm4
movss   16(%rsp), %xmm3
movss   %xmm2, 456(%rsp)
movq    %rax, 64(%rsp)
movq    408(%rsp), %rax
movss   %xmm1, 460(%rsp)
movss   12(%rsp), %xmm2
movss   8(%rsp), %xmm1
movq    %rax, 72(%rsp)
movq    416(%rsp), %rax
movss   %xmm0, 464(%rsp)
movss   4(%rsp), %xmm0
movss   %xmm10, 424(%rsp)
movss   %xmm9, 428(%rsp)
movss   %xmm8, 432(%rsp)
movss   %xmm7, 436(%rsp)
movss   %xmm6, 440(%rsp)
movss   %xmm5, 468(%rsp)
movss   %xmm4, 472(%rsp)
movss   %xmm3, 476(%rsp)
movss   %xmm2, 480(%rsp)
movss   %xmm1, 484(%rsp)
movss   %xmm0, 488(%rsp)
movq    %rax, 80(%rsp)
movq    424(%rsp), %rax
movq    %rax, 88(%rsp)
movq    432(%rsp), %rax
movq    %rax, 96(%rsp)
movq    440(%rsp), %rax
movq    %rax, 104(%rsp)
movq    448(%rsp), %rax
movq    %rax, 112(%rsp)
movq    456(%rsp), %rax
movq    %rax, 120(%rsp)
movq    464(%rsp), %rax
movq    %rax, 128(%rsp)
movq    472(%rsp), %rax
movq    %rax, 136(%rsp)
movq    480(%rsp), %rax
movq    %rax, 144(%rsp)
movl    488(%rsp), %eax
movl    %eax, 152(%rsp) 
```

附加副本仍然存在。

# image - “图像不同”的外壳测试？

> ID：16150434
> 
> 赞同：1
> 
> 时间：2013-04-22T15:05:48.677
> 
> 标签：image, bash, shell, imagemagick, diff

在 shell 脚本中，我想检查两个 PNG 图像是否不同，即图像具有不同的大小，或者一个图像的至少一个像素的 RGBA 与另一张图像的相应像素的 RGBA 不同。

散列两个图像文件将不起作用，因为图像可能被不同地压缩或具有不同的注释，或者可能两个像素是完全透明的但 RGB 分量不同等。

`convert`我知道如何使用 ImageMagick 的实用程序检查文件大小是否不同。至于比较像素值，我想到了使用 ImageMagick 的`compare`实用程序，但如果命令成功处理，退出代码始终为 0：[http ://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t =22451](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=22451)

可以使用什么命令行测试来比较两个 PNG 图像的像素是否相等？或者也许有一种方法可以使用`compare`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:05:21.017

找到一种允许未压缩 RGBA 的图像格式，转换两个文件，然后比较输出。也许是这样的：

```
$ convert a.png a.rgba
$ convert b.png b.rgba
$ cmp {a,b}.rgba
a.rgba b.rgba differ: byte 1, line 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-17T01:02:32.963

您不应该使用 ImageMagick compare 的退出代码。所有这一切都是比较功能成功退出，没有错误。您想通过比较报告 AE 指标，它会告诉您有多少像素不同。或者使用其他一些指标，例如 MAE 或 RMSE。

```
compare -metric AE image1 image2 null: 
```

这将向终端返回一个值，即计数。

例如：

```
compare -metric AE lena.png lena.jpg null:
65100 
```

65100像素不同

您可以将其返回给变量：

```
var=`compare -metric AE lena.png lena.jpg null: 2>&1`
echo $var
65100 
```

ImageMagick 将其输出写入 stderr，这就是我添加 2>&1 的原因

看

[https://imagemagick.org/script/compare.php](https://imagemagick.org/script/compare.php) [https://imagemagick.org/Usage/compare/](https://imagemagick.org/Usage/compare/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-16T19:02:44.087

# 使用 ImageMagick 和 grep 的另一种方法

```
compare -compose src -highlight-color "#FF0000FF" -lowlight-color "#00000000" a.png b.png delta.png

convert delta.png -define histograme:unique-colors=true -format %c histogram:info:- > histogram.info

if grep --quiet "#FF0000 red" histogram.info : then
   echo "different"
else
   echo "same"
fi 
```

虽然这种方法依赖于安装[的](https://imagemagick.org/script/install-source.php)[ImageMagick](https://imagemagick.org/script/compare.php)，并且比**cmp**更重，但它可能更容易扩展以允许容差等......

 ****TIPS**
`display -version`是一种快速测试 ImageMagick 是否已安装的方法。

如果您想避免写入磁盘，这些命令也可以通过管道传输。**

# inheritance - 查找 dart 中的所有子类

> ID：16150437
> 
> 赞同：9
> 
> 时间：2013-04-22T15:05:53.057
> 
> 标签：inheritance, reflection, dart, dart-mirrors

我有三个飞镖课程：

```
class A {}

class B extends A{}

class C extends A{} 
```

有没有办法从 A 获取所有子类？

**编辑：**

感谢 Alexandre Ardhuin，您的解决方案完美运行！

我正在学习飞镖，我编辑了您的代码并放置了递归解决方案，看看：

```
import 'dart:mirrors';

class A {}
class B extends A{}
class C extends A{}
class D {}
class E extends C {}

bool isParent(String parent,ClassMirror clazz){
  var objectParentName = MirrorSystem.getName(clazz.superclass.simpleName);
  if (objectParentName == "Object"){
    return parent == "Object";
  }
  var result = parent == objectParentName;
  if (!result){
    return isParent(parent,clazz.superclass);
  }
  return result;
}

List<String> findAllSubclasses(String clazz){
  var result = [];
  final ms = currentMirrorSystem();
  ms.isolate.rootLibrary.classes.forEach((s,c) {
    if (isParent(clazz,c)){
      result.add(MirrorSystem.getName(c.simpleName));
    }
  });
  return result;
}

main(){
  var result = findAllSubclasses('A');
  print(result);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T22:02:30.397

[镜像库](http://api.dartlang.org/docs/bleeding_edge/dart_mirrors.html)可以提供一些信息：

```
import 'dart:mirrors';

class A {}
class B extends A{}
class C extends A{}
class D {}

main(){
  final ms = currentMirrorSystem();
  ms.isolate.rootLibrary.classes.forEach((s,c) {
    final parentClassName = MirrorSystem.getName(c.superclass.simpleName);
    if (parentClassName == 'A') {
      final className = MirrorSystem.getName(c.simpleName);
      print('$className has A as super class');
    }
  });
} 
```

输出将是：

```
C has A as super class
B has A as super class 
```

# javascript - Javascript 全局范围误解

> ID：16150448
> 
> 赞同：1
> 
> 时间：2013-04-22T15:06:24.357
> 
> 标签：javascript, variables, scope

我经常遇到这个问题，并认为我最终会要求解释。我有 Google Chrome 并经常使用 javascript 控制台。当我声明一个全局变量时，我总是可以在控制台中访问它的内容，但是当我在浏览器中运行脚本时尝试从函数内部访问变量时，我经常会收到“无法读取未定义的属性'top'”类型错误.

我将在此处粘贴一段代码，如果有人可以向我解释为什么会出现此错误，我将非常感激！

```
// JavaScript Document
var myglobalvariable;
// ...

$(document).ready( function() {
  myglobalvariable = document.getElementsByTagName("article");
  // ...
});

function myFunction() {
  for (i in myglobalvariable) {
    mylocalvariable_top = myglobalvariable[i].style.top; // Error points to this line
  // ...
  }
} 
```

然后 myFunction 通常会被事件处理程序调用并报告上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:18:19.093

正如其他人所说，最好避免`for ... in`使用数组。也就是说，为了澄清导致此错误的误解，您应该编写：

```
function myFunction() {
  for (i in myglobalvariable) {
    mylocalvariable_top = i.style.top; // <-- i IS the element
                                       // <-- for clarity you should probably rename "i" to
                                       //    "element" or something more descriptive which will
                                       //      make clear it is not a numerical index
  // ...
  }
} 
```

也就是说，进行查找没有意义，`myglobalvariable[i]`因为在您的情况下`i`已经意味着“数组 myglobalvariable 的第 i 个元素”

您只是将典型`for`循环的约定与`for... in`构造的约定混为一谈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:11:17.913

我怀疑你正在做的不是你想要的。

```
for (i in myglobalvariable) { } 
```

这不会遍历数组中的项目，而是遍历对象的键/属性名称。

```
myglobalvariable[i] 
```

在上面，您可以访问使用该键键入的属性。

```
myglobalvariable[i].style.top 
```

在上面，您可以访问所述对象的样式属性。如果该对象没有样式属性，那么这将是未定义的。这意味着当您在不存在的属性上调用 .top 时，您会得到“无法读取未定义的属性 'top'”。

您在这里提出的是一个具体问题，而不是一般的“全球范围误解”。

**解决方案**

```
var i, len = myglobalvariable.length;
for (i = 0; i < len; i++) {
    if (myglobalvariable[i].style)
        mylocalvariable_top = myglobalvariable[i].style.top;
  // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:13:25.050

这将创建一个`NodeList`节点。

```
$(document).ready( function() {
  myglobalvariable = document.getElementsByTagName("article");
  // ...
}); 
```

这将遍历每个节点**和**对象上的任何附加属性`NodeList`。

```
function myFunction() {
  for (i in myglobalvariable) {
    mylocalvariable_top = myglobalvariable[i].style.top; // Error points to this line
  // ...
  }
} 
```

也就是说，您可能会遇到`myglobalvariable`不是节点且没有`style`属性的项目。特别是，将`i`在迭代期间的某个时间点。`item``length`

这将更安全地遍历列表：

```
function myFunction() {
  for (var i = 0; i < myglobalvariable.length; i++) {
    mylocalvariable_top = myglobalvariable[i].style.top; // Error points to this line
  // ...
  }
} 
```

# mootools - mootools 周期性动画的时序

> ID：16150455
> 
> 赞同：0
> 
> 时间：2013-04-22T15:06:40.937
> 
> 标签：mootools

在我的 html 页面上，我有一些图块，其中有一个小动画，是使用 mootools 制作的。我这样称呼他们：

```
$$('.sliding').each(function (e) {

        var fx = function() {       
            //code
        }

        fx.periodical(5000);

}); 
```

此时，所有图块每 5 秒播放一次动画；一次全部。现在，我希望这些图块的动画更加随机，例如，不是所有的同时。

我该如何解决这个问题，注意到页面是动态的，并且图块的数量确实有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:22:16.037

您可以设置超时将是随机的：

```
 $$('.sliding').each(function (e) {

    var fx = function() {       
        //code
    }

    //select random number between 1 to 5:
    var rand = Number.random(1, 5); 

    //set it as the timeout
    fx.periodical(rand*1000);

}); 
```

# svn - 如何构建 SVN 存储库？

> ID：16150461
> 
> 赞同：1
> 
> 时间：2013-04-22T15:06:56.077
> 
> 标签：svn, testing, module, tags, branch

我的 SVN 结构有问题。在下一个案例中如何实施“最佳实践”？

我有以下子目录：

```
SYSTEM/
      /trunk
      /branches
      /tags
      /testing 
```

条件：

*   开发团队在分支机构“提交”。
*   该系统有许多独立发展的模块。
*   系统二进制文件是从模块的不同版本生成的（并不总是模块的最新版本）。
*   测试目录必须存储不同的系统完成版本。

我认为主要问题是保存模块的不同版本并标记完整系统的完整版本。

任何人都有类似的结构或可以帮助我解决这个问题？

# oracle - 在 CentOS 6.3 上安装和配置 weblogic 服务器

> ID：16150467
> 
> 赞同：0
> 
> 时间：2013-04-22T15:07:36.963
> 
> 标签：oracle, centos, weblogic, java

我需要在 CentOS 6.3 上安装和配置 Oracle Weblogic 服务器。我读过我需要安装适当版本的 JDK。

实际上我太缺乏经验并且我已经搜索了很多好的教程，但是我没有找到任何有用的结果。

能得到您的帮助，我将不胜感激。

我拥有的 CentOS 的完整版本是：

**Linux localhost.localdomain 2.6.32-279.el6.i686 #1 SMP Fri Jun 22 10:59:55 UTC 2012 i686 i686 i386 GNU/Linux**

顺便说一下，我想知道这是 32 位还是 64 位版本。

PDT：对不起我的英语不好，我希望我能说清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:03:47.387

您的机器似乎有一个 32 位处理器：

[http://www.cyberciti.biz/faq/linux-how-to-find-if-processor-is-64-bit-or-not/](http://www.cyberciti.biz/faq/linux-how-to-find-if-processor-is-64-bit-or-not/)

您可以从这里下载 32 位版本的 WebLogic： [http ://www.oracle.com/technetwork/middleware/weblogic/downloads/wls-for-dev-1703574.html](http://www.oracle.com/technetwork/middleware/weblogic/downloads/wls-for-dev-1703574.html)

Linux 的 32 位版本已经包含 JDK，并且还可以在 64 位机器上运行。

要使用 64 位安装，您必须单独下载并安装 64 位 JDK，然后使用“通用”jar 安装程序进行安装。

# xml - XSLT 2.0 - 在不丢弃现有前缀绑定的情况下更改名称空间

> ID：16150474
> 
> 赞同：3
> 
> 时间：2013-04-22T15:08:03.647
> 
> 标签：xml, xslt, xslt-2.0, xml-namespaces

这是我的输入 XML 文档：

```
<test xmlns="http://www.example.com/v1">
  <qnameValue xmlns:foo="http://foo.example.com/">foo:bar</qnameValue>
</test> 
```

我想使用 XSLT (2.0) 将本文档的命名空间更改为 v2，即所需的输出为：

```
<test xmlns="http://www.example.com/v2">
  <qnameValue xmlns:foo="http://foo.example.com/">foo:bar</qnameValue>
</test> 
```

我正在尝试使用此样式表：

```
<xsl:stylesheet version='2.0' xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
     xmlns:previous='http://www.example.com/v1'>
  <xsl:output encoding='UTF-8' indent='yes' method='xml'/>
  <!-- Identity transform -->
  <xsl:template match='@*|node()'>
    <xsl:copy>
      <xsl:apply-templates select='@*|node()'/>
    </xsl:copy>
  </xsl:template>
  <!-- Previous namespace -> current. No other changes required. -->
  <xsl:template match='previous:*'>
    <xsl:element name='{local-name()}' namespace='http://www.example.com/v2'>
      <xsl:apply-templates select='@* | node()' />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

不幸的是，输出结果如下：

```
<test xmlns="http://www.example.com/v2">
  <qnameValue>foo:bar</qnameValue>
</test> 
```

即 qnameValue 上的关键名称空间绑定已经消失。有没有办法强制将所有命名空间绑定的副本复制到输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:18:55.283

应该这样做，并且与 XSLT 1.0 兼容：

```
<xsl:stylesheet version='2.0' xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
     xmlns:previous='http://www.example.com/v1'>
  <xsl:output encoding='UTF-8' indent='yes' method='xml'/>
  <!-- Identity transform -->
  <xsl:template match='@*|node()'>
    <xsl:copy>
      <xsl:apply-templates select='@*|node()'/>
    </xsl:copy>
  </xsl:template>
  <!-- Previous namespace -> current. No other changes required. -->
  <xsl:template match='previous:*'>
    <xsl:element name='{local-name()}' namespace='http://www.example.com/v2'>
      <xsl:copy-of select='namespace::*[not(. = namespace-uri(current()))]' />
      <xsl:apply-templates select='@* | node()' />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<test xmlns="http://www.example.com/v2">
  <qnameValue xmlns:foo="http://foo.example.com/">foo:bar</qnameValue>
</test> 
```

这是一种类似的方法，通过将旧 uri 存储在一个变量中并从那里访问它，可能会更有效一些：

```
<xsl:stylesheet version='2.0' xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
     xmlns:previous='http://www.example.com/v1'>
  <xsl:output encoding='UTF-8' indent='yes' method='xml'/>
  <xsl:variable name='oldUri' select='namespace-uri((//previous:*)[1])' />

  <!-- Identity transform -->
  <xsl:template match='@*|node()'>
    <xsl:copy>
      <xsl:apply-templates select='@*|node()'/>
    </xsl:copy>
  </xsl:template>
  <!-- Previous namespace -> current. No other changes required. -->
  <xsl:template match='previous:*'>
    <xsl:element name='{local-name()}' namespace='http://www.example.com/v2'>
      <xsl:copy-of select='namespace::*[not(. = $oldUri)]' />
      <xsl:apply-templates select='@* | node()' />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

# python - python中令人费解的AttributeError与简单的sqlite查询

> ID：16150475
> 
> 赞同：7
> 
> 时间：2013-04-22T15:08:08.207
> 
> 标签：python, sqlite

当我在 python 中调用函数来执行查询时遇到的错误让我感到困惑和沮丧。我已经检查以确保我没有制表符而不是间隔缩进（检查晦涩难懂）。我遵循了此处使用的约定：http: [//zetcode.com/db/sqlitepythontutorial/](http://zetcode.com/db/sqlitepythontutorial/)和此处：[如何使用 Python 检查 SQLite 中是否存在一行？](https://stackoverflow.com/questions/2440147/how-to-check-the-existence-of-a-row-in-sqlite-with-python)

谁能明白为什么这个看似不错的代码会引发错误？我现在是代码盲。谢谢！

错误：

```
File "paddle-csv-import.py", line 23, in getscore
cur1.execute("SELECT pts FROM matchpoints WHERE s1 =? and s2 = ? and \
AttributeError: 'builtin_function_or_method' object has no attribute 'execute' 
```

相关代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import numpy as np
import sqlite3 as lite
import trueskill as ts
import sys
import csv
import datetime

#global declarations

# global variables
season = '1011'
unknum = 0

# global functions

def getscore(sets):
    con1 = None
    con1 = lite.connect('match_setup.db')
    cur1 = con1.cursor 
    cur1.execute("SELECT pts FROM matchpoints WHERE s1=? and s2=? and s3=?",(sets))
    homepoints =  cur1.fetchone()
    if homepoints is None:
        print('There is no component named %s'%sets)
    return(homepoints); 
```

稍后从循环中调用此函数，并正确传递数据。我在函数中插入了一条打印线，以确保数据被正确传递并得到了这个，这是正确的。

```
('3-6', '1-6', '0-0') 
```

我在同一个数据库上直接在 sqlite 中运行了相同的、精确的查询，结果按预期返回。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T15:09:54.037

我相信`cur1 = con1.cursor`应该是`cur1 = con1.cursor()`

# visual-studio-2010 - 如何告诉 CMake 以唯一的方式命名 Visual Studio 安装项目？

> ID：16150477
> 
> 赞同：3
> 
> 时间：2013-04-22T15:08:09.903
> 
> 标签：visual-studio-2010, visual-c++, cmake

我正在使用 CMake 创建 Visual C++ 2010 项目，如下所示：

```
call "%VS100COMNTOOLS%\vsvars32.bat"

mkdir build
mkdir build\VisualStudio2010

cd build\VisualStudio2010
cmake -G"Visual Studio 10" ..\.. 
```

这将创建四个项目：

*   `ALL_BUILD.vcxproj`
*   `MyProject.vcxproj`
*   `INSTALL.vcxproj`
*   `ZERO_CHECK.vcxproj`

现在我经常需要将多个`INSTALL`-projects 放入*一个*Visual Studio 解决方案中。这仅在我`INSTALL`唯一命名这些项目时才有效，例如`MyProject-INSTALL.vcxproj`. 但是，在运行 CMake 后为每个项目手动执行此操作并不是很出色。

有没有办法告诉 CMake，为创建的安装项目使用什么文件名，例如用项目名称作为前缀？我搜索了文档并询问了 Google，但没有找到解决方案。

# javascript - 超过 1 个复选框需要隐藏或显示 div

> ID：16150479
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:08:14.887
> 
> 标签：javascript, checkbox, hide, show

这段代码有什么问题？？

[http://jsfiddle.net/CLYC6/](http://jsfiddle.net/CLYC6/)

```
 <input type="checkbox" class="test" name="test" value="test" />

<div id="test" style="display:none">
    test
</div> 
```

js：

```
 $('.test').click(function() {
        if( $(this).is(':checked')) {
            $("#test").show();
        } else {
            $("#test").hide();
        }
    }); 
```

将来我要检查 3 个复选框...不仅是一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:09:24.050

代码没什么问题，在jsFiddle中，记得在左侧加载jQuery lib。

# c# - 如果选中 CheckAll 则全选，如果未选中则使用 jQuery 从 Gridview 中取消全选

> ID：16150485
> 
> 赞同：2
> 
> 时间：2013-04-22T15:08:29.663
> 
> 标签：c#, jquery, gridview, checkbox, hiddenfield

我只是坚持使用复选框进行操作，我有一个 Gridview，在标题和行中都有第一列作为复选框，复选框与数据库中的 iID 值绑定。我有时想删除行**“全部”（通过标题复选框）**，有时删除**“选定”（通过复选框）**。现在我正在使用这段代码：

**JavaScript**

```
function checkcheckboxPrint() {
            var checkfag = false;
            var id = 0;
            var table = document.getElementById('<%=grdRefPhysician.ClientID%>');

            if (table != null) {
                for (i = 1; i < table.rows.length; i++) {
                    var chkRead = table.rows[i].cells[0].getElementsByTagName("input")[0];
                    var DivID = table.rows[i].cells[0].getElementsByTagName('div')[0];

                    if (chkRead != null) {
                        if (chkRead.type == 'checkbox') {
                            if (chkRead.checked) {
                                id = DivID.innerHTML + "," + id;
                                checkfag = true;
                                alert(id);
                            }
                        }
                    }
                }
                if (checkfag == true) {
                    $("#<%=hdnIDs.ClientID %>").val(id);
                    return true;
                }
                else {
                    alert("Please select record to delete.");
                    return false;
                }
            }
        } 
```

**jQuery**

```
 $(document).ready(function () {
        $("input:checkbox").change(function () {
            $("#DivDelete").show('slow');
        });
    }); 
```

正如您所看到的，我正在使用**隐藏**字段将那些逗号 (,) 分隔的 ID 获取到服务器端，基本上它可以工作，但是，我不会经历一种情况，即如果我检查标题行，那么所有复选框都应该被选中，如果我取消选中然后所有复选框都应该被取消选择，反之亦然，我在点击这个时调用这个js方法

**HTML**

```
 <div id="DivDelete" style="text-align:left;display:none;">
        <asp:Button ID="btnDeleteAll" OnClientClick="return checkcheckboxPrint();" runat="server" Text="Delete" />
 </div> 
```

我只是想使用 jQuery 将逗号分隔的 ID 存储到隐藏字段，并带有 checkAll 和独立的检查工具！

**我的网格的附加屏幕截图**

![在此处输入图像描述](https://i.stack.imgur.com/4ZE7w.png)

任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:49:25.137

我不认为

```
table.rows[i].cells[0] 
```

将在 js 对象上工作。您需要做的是为每个复选框添加一个更改处理程序，使用要删除的选定 id 更新一个数组（您可以通过在当前复选框上使用 .parent().find(yourIdDiv) 找到该 id。检查长度当用户单击 DeleteAll 并相应地继续时的数组。

# c# - 在 linux (Ubuntu) c# 上使用单声道

> ID：16150486
> 
> 赞同：1
> 
> 时间：2013-04-22T15:08:32.657
> 
> 标签：c#, linux, mono

我正在尝试在 linux 上使用 gmcd 命令运行 ac# 程序：

```
gmcd Main.cs 
```

我得到同样的错误 8 次；

```
Main.cs: error Cs0246: The type or namespace name 'UtilLib' could not be found. Are you missing a using directive or an assembly reference 
```

代码的前几行是；

```
using System;
using System.Text;
using System.IO;
using System.IO.Ports;
using System.Reflection;
using System.Threading;
using System.Globalization;
using UtilLib;
using UtilLib.CRC;
using UtilLib.IO;
using UtilLib.ConsoleUtility 
```

我有一个名为 UtilLib 的文件夹，其中包含与 Main.cs 相同的目录中的 .cs 文件，并尝试了以下命令：

```
gmcs /reference:UtilLib Main.cs 
```

但是刚刚返回的错误找不到元数据文件'UtilLib'

# html - 溢出在 Opera 中不起作用？

> ID：16150491
> 
> 赞同：0
> 
> 时间：2013-04-22T15:08:56.367
> 
> 标签：html, css, textarea

如何`break the words`以及何时`disable the scroll bar`内容`textarea`超过？仅在 Opera 中存在问题。

我的`textarea`样子，

![在此处输入图像描述](https://i.stack.imgur.com/SZiJa.png)

该`overflow:auto`属性适用于除 Opera 之外的所有浏览器。

我的 CSS 将是，

```
#message {
    width: 99.5%;
    height: 60px;
    border: none;
    overflow: auto;
    resize: none;
    outline: none;
    border-color: #6495ED;
    border-style: solid;
    border-width: 1px;

    } 
```

如何解决这个问题。好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:41:59.913

尝试这个

```
 {
  white-space: -moz-pre-wrap !important;  /* Mozilla, since 1999 */
  white-space: -pre-wrap;      /* Opera 4-6 */
  white-space: -o-pre-wrap;    /* Opera 7 */
  white-space: pre-wrap;       /* css-3 */
  word-wrap: break-word;       /* Internet Explorer 5.5+ */
  word-break: break-all;
  white-space: normal;
} 
```

# asp.net - 在 Visual Studio 网站项目中使用预编译的 T4 文本模板？

> ID：16150497
> 
> 赞同：0
> 
> 时间：2013-04-22T15:09:18.950
> 
> 标签：asp.net, visual-studio, web, t4, customtool

在 Visual Studio Web 应用程序项目中，通过文件属性窗口设置的自定义工具信息按文件存储在 CSPROJ 项目文件中。

在 Visual Studio 网站项目中，没有项目文件，只有带有一些全局配置的 SLN 文件。据我所知，这里没有存储任何文件特定的信息，这应该是网站项目类型的重点。

我仍然可以将普通和预处理（运行时）T4 文本模板添加到网站项目中，但是无法通过文件属性窗口进行自定义工具配置。尽管如此，Visual Studio 知道并记住哪个模板属于哪个类型，即使用“TextTemplatingFileGenerator”作为普通模板或“TextTemplatingFilePreprocessor”作为预处理模板，并且生成的输出是正常的。

这适用于 Visual Studio 2010 和 2012 中的新网站项目，但不适用于我手头的网站项目，该项目是手动从 Web 应用程序转换为网站的。该项目中所有预处理的 T4 文本模板都将自动使用“TextTemplatingFileGenerator”进行处理，似乎无法更改这一点。当然，由于缺少类，模板会崩溃，并且项目之后无法构建。

那么Visual Studio是如何管理网站项目中T4模板的自定义工具信息的呢？

如果“添加新项目”对话框中没有预编译文本模板选项，我会说网站项目根本不支持自定义工具。但是文本模板在那里并且在某些情况下可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:12:21.437

我似乎需要一些时间才能意识到，没有什么能阻止我将模板从 Web 项目中移出并将它们放入库项目中，其中总是有一个项目文件，并且无论 Web 的类型如何，它都能正常工作项目，解决了我的问题。

我仍然不知道预编译的 T4 文本模板应该如何与网页类型的项目一起使用。如果您了解更多，请随时扩展此内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T02:45:58.297

项目模板中的自定义向导 DLL 在您执行添加新项目时设置预处理项目。作为后备方案，该项目仅使用以下注册表项来设置常规模板。

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\Projects\{E24C65DC-7377-472b-9ABA-BC803B73C61A}\FileExtensions\.tt\CustomTool 
```

如果您只有预处理的模板，您可以将其更改为说`TextTemplatingFilePreprocessor`而不是`TextTemplatingFileGenerator`

否则，从添加新项目对话框重新添加一组文件并复制内容应该可以工作。

# java - 用Java计算全连接网状拓扑网络数

> ID：16150498
> 
> 赞同：0
> 
> 时间：2013-04-22T15:09:23.410
> 
> 标签：java, recursion

问题是计算全连接网状拓扑网络的连接数。连接总数可以用公式 (nx (n-1)) / 2 计算。我们将`ConnectionCount`递归实现公共类方法，其他一切都交给我们。问题是它可以编译但不能正确运行。每个`connectionCount`返回值 0。请帮助，这是我目前所拥有的：

```
public class ConnectionCount {

    public int ConnectionCalc(int n) {
        if (n > 0) {
            return(n-1) + ConnectionCalc(n-1);
        }
        else {
            return 0;
        }
    }   

    public static int connectionCount(int n) {
        return 0;
    }

    public static void main(String [] args) {
        for (int i = 0; i < 20; i++) {
            System.out.println("connectionCount(" + i + ") returns " + connectionCount(i));

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:13:30.770

您正在调用`connectionCount`始终返回 0 的方法，而不是调用`ConnectionCalc`方法。您也必须声明`ConnectionCalc`为静态的。

# 2d - 为什么 2D 图形系统使用移动到线到样式界面？

> ID：16150501
> 
> 赞同：1
> 
> 时间：2013-04-22T15:09:26.160
> 
> 标签：2d, line, vector-graphics

我注意到大多数原始绘图库（GDI、HTML5 画布）使用程序，其中序列与操作有关：move_to 和 line_to 和 set_stroke 等...

为什么要使用像 move_to、line_to 这样的序列相关操作而不是像：line(start, end) 这样的操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:28:06.150

人们想要画的大多数东西都是由连贯的笔画组成的。笔画 N+1 的开始几乎总是笔画 N 的结束。因此，绘图系统将当前点存储为其状态的一部分，并将其用作每个操作的开始，使用 move_to 命令来从一个新的位置开始，不画任何东西。

# ios - 核心数据在 iphone 中保存大量图像，，

> ID：16150502
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:09:26.963
> 
> 标签：ios, objective-c, image, core-data, nsdata

我正在开发一个处理大量照片的应用程序。
例如，用户可以下载图片并存储在他的 iPhone 中，或者使用相机拍照并保存。

我使用的数据库工具是`CoreData`，我想知道哪种方法最好？
将照片直接存储在核心数据中还是只存储它们的 URL 并将照片放在一个状态文件夹中？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:30:36.327

您可以使用 NSData 将图像存储在核心数据中（不是我喜欢的方式）。

或者

您可以存储图像的路径，并将图像存储在文件夹中（我认为这种方式针对更好的性能进行了优化）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:37:50.653

您可以使用核心数据的“存储在外部记录文件中”功能。这在 iOS 5 及更高版本下可用，它将处理从外部文件中保存和获取数据。请勿将 core data 上的图像数据保存为 blog/transformable。性能不是最佳的。

# asp.net-mvc - 热毛巾模板：如何显示 html 辅助方法？

> ID：16150506
> 
> 赞同：0
> 
> 时间：2013-04-22T15:09:42.827
> 
> 标签：asp.net-mvc

使用[John Papa 的热毛巾模板](http://www.johnpapa.net/hottowel/)，我遇到了这个问题。

在 index.cshtml 中，没有显示 htmlhelper 函数。这意味着没有 @Html.RenderPartial 或 Html.Partial、actionlink 等，什么都没有。

在尝试获取它们时，我添加了指向 System.Web.Mvc.Html 的根 web.config 命名空间。像这样：

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Optimization"/>
      <add namespace="System.Web.Routing" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

但这不可避免地会导致诸如“Index.cshtml 不继承自'System.Web.WebPages.WebPage'”之类的错误。即使我可以在页面顶部添加@inherits。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:49:42.520

可能这就是需要更改的行

```
<pages pageBaseType="System.Web.Mvc.WebViewPage"> 
```

尝试继承`System.Web.WebPages.WebPage`并查看是否对整个 SPA 应用程序没有任何影响。

# mysql - 如何通过检查另一列重复值来更改 mysql 表以添加包含所有行的公共值的列

> ID：16150511
> 
> 赞同：0
> 
> 时间：2013-04-22T15:10:02.530
> 
> 标签：mysql, insert, compare, alter

如何通过检查另一列重复值来更改 mysql 表以添加包含所有行的公共值的列。

```
+----+----------+--------------+
| id | inode    | name         |
+----+----------+--------------+
|  1 | 12059010 | IwnsuAaJUFaa |
|  2 | 12059015 | IwnsuAaJUFab |
|  3 | 12059016 | IwnsuAaJUFac |
|  4 | 12059017 | IwnsuAaJUFad |
|  5 | 12059018 | IwnsuAaJUFae |
|  6 | 12059019 | IwnsuAaJUFaf |
|  7 | 12059020 | IwnsuAaJUFag |
|  8 | 12059021 | IwnsuAaJUFah |
|  9 | 12059022 | IwnsuAaJUFai |
| 10 | 12059023 | IwnsuAaJUFaj |
| 11 | 12059013 | iPhZIWtZdSaa |
| 12 | 12059015 | iPhZIWtZdSab |
| 13 | 12059016 | iPhZIWtZdSac |
| 14 | 12059017 | iPhZIWtZdSad |
| 15 | 12059018 | iPhZIWtZdSae |
| 16 | 12059019 | iPhZIWtZdSaf |
| 17 | 12059020 | iPhZIWtZdSag |
| 18 | 12059021 | iPhZIWtZdSah |
| 19 | 12059022 | iPhZIWtZdSai |
| 20 | 12059023 | iPhZIWtZdSaj |
+----+----------+--------------+ 
```

我需要第四列，所有行都按相同的“inode”编号分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:11:43.123

1.  使用类似的东西添加列

    ```
    ALTER TABLE [tablename] ADD [columname] [columntype] 
    ```

2.  使用 更改该列的内容`UPDATE`。

# visual-studio - Visual Studio 调试跳出循环

> ID：16150515
> 
> 赞同：23
> 
> 时间：2013-04-22T15:10:13.107
> 
> 标签：visual-studio, visual-studio-2005

我了解 Visual Studio 调试的基本功能。`F10`, `F11`, `Shift`+ `F11`, `Ctrl`+ `F10`。

如果我在 for 循环中，是否有办法在循环完成后立即停止？现在我这样做的方式是手动转到循环后的位置并按`Ctrl`+ `F10`。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-23T04:04:00.090

Visual Studio 中没有专用的“跳出循环”命令。[“Step Out”](http://blogs.msdn.com/b/zainnab/archive/2010/10/29/step-out-of-or-over-a-method-vstipdebug0035.aspx) ( `Shift`+ `F11`) 仅适用于函数。我能想到的只有两个选择：

1.  就像 Brian 建议的那样，有[Run to Cursor ，](http://blogs.msdn.com/b/zainnab/archive/2010/05/05/run-to-cursor-vstipdebug0023.aspx)*至少*从 VC++ 6开始就已经存在了。这就是你已经通过`Ctrl`+`F10`键盘快捷键得到的。我在调试时一直使用它；这是一个非常有用的工具。我真的不明白为什么你认为这是一种糟糕的方式，或者为什么你认为应该有一个“更好”的方式。

2.  您可以在循环之后的代码行上设置一个简单的[断点。](http://msdn.microsoft.com/en-us/library/k80ex6de.aspx)如果您使用键盘快捷键，这相对简单`F9`。但是您仍然需要导航到相应的代码行，因此您不妨使用 Run to Cursor。

如果您使用 C 派生语言工作，您的循环可能以`}`. 因此，如果插入符号位于循环的左大括号处，则可以使用`Ctrl`+`]`键盘快捷键移动到源文件中的匹配大括号。这可能会使导航更容易。它当然可以帮助避免将您的手移到鼠标上，从而浪费宝贵的时间。

* 请注意，键盘组合可能会发生变化，具体取决于您配置 Visual Studio 环境的方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-06-05T11:28:35.900

我刚刚发现，如果您将光标悬停在所需行的开头，VS 会自动融入一个小播放符号。当你点击它时，调试器会跳转到这一点。 [![VS调试跳转](https://i.stack.imgur.com/Nlut0.png)](https://i.stack.imgur.com/Nlut0.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T23:27:35.153

也许你想使用一个[断点](http://msdn.microsoft.com/en-us/library/k80ex6de%28v=vs.80%29.aspx)，一旦你的程序到达特定的行，它就可以用来触发调试器。您可以通过单击代码行的左侧来设置一个，在调试过程中通常会出现错误和箭头。希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-09T05:59:00.890

简单的方法是在 for 循环中放置一个 break 语句并添加一个条件。这将允许您在调试时测试循环。

# ios - NSMutableRequest 对象主体的分配数据未释放

> ID：16150516
> 
> 赞同：1
> 
> 时间：2013-04-22T15:10:13.970
> 
> 标签：ios, objective-c, xcode, memory-management, xcode-instruments

在我的应用程序中，我必须执行多部分 POST 请求。在请求中，我必须发送一个存储在设备照片库中的文件。完成上传并接收到返回的数据后，我向请求发送了一条释放消息，但 Instruments 显示数据保留在设备的内存中。

这就是我创建请求对象的方式：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];

[request setHTTPShouldHandleCookies:YES];
[request setTimeoutInterval:30];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"---------------------------14737809831466499882746641449";

// set Content-Type in HTTP header
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request setValue:contentType forHTTPHeaderField: @"Content-Type"];

// post body
NSMutableData *body = [[NSMutableData alloc] init];

// add parts (all parts are strings) `parts` is a NSDictionary object
for(id key in parts) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@\r\n", [parts objectForKey:key]] dataUsingEncoding:NSUTF8StringEncoding]];
}

// add files data - `file` is a ALAssetRepresentation object
NSData *fileData;
NSString *filename = [file filename];
Byte *buffer = (Byte*)malloc(file.size);
NSUInteger buffered = [file getBytes:buffer fromOffset:0.0 length:file.size error:nil];
fileData = [[NSData alloc] initWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];

if (fileData) {
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    if ([requestType isEqualToString:PUBLISH_TYPE_VC_MANDA]) {
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"attachment\"; filename=\"%@\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    } else {
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"file\"; filename=\"%@\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    }
    [body appendData:fileData];
    [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
}

[fileData release];

[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// setting the body of the post to the reqeust
[request setHTTPBody:body];

[body release];

// set the content-length
NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"Keep-Alive" forHTTPHeaderField:@"Connection"];

// set URL `adress` is a NSURL object
[request setURL:address];

//set cookie
if (storedCookie) {

    NSDictionary *properties = [NSDictionary dictionaryWithObjectsAndKeys:[storedCookie name], NSHTTPCookieName, myDomain, NSHTTPCookieDomain,@"/",NSHTTPCookiePath, [storedCookie value], NSHTTPCookieValue, nil];

    NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:properties];
    NSArray* cookies = [NSArray arrayWithObjects: cookie, nil];
    NSDictionary * headers = [NSHTTPCookie requestHeaderFieldsWithCookies:cookies];
    [request setAllHTTPHeaderFields:headers];
} 
```

在此之后，在收到响应后，我执行`[request release]`但分配的字节保留在内存中。

我`Instruments`在分配模式下运行，它声称有一个类别对象`Malloc 91MB`（我正在上传的 ALAsset 的大小）。通过查看调用树，占用所有内存的符号`[NSConcreteMutableData appendBytes:length:]`位于上述方法中。

为什么不释放字节？更重要的是，为什么它必须将数据移动到设备的内存中？我见过像 Facebook 这样的应用程序从画廊上传非常大的视频而没有任何内存问题。

非常感谢您的关注，任何帮助或指导将不胜感激

**编辑：**进一步调查显示，当我使用`[request release]`请求对象时，它会被释放，但它的主体不是。很奇怪的行为...

**EDIT2：**我明确使用`[request.HTTPBody release];`并释放了字节。我仍然无法相信那`[request release]`没有释放它的身体。这可能是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:23:57.580

您的请求有`retainCount`2 个：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init]; // 1 
```

...

```
[request retain]; // 2 
```

然后，如果你这样做`[request release]`，它会减少一。

解决办法是不做`[request retain]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:47:41.047

经过进一步调查，内存没有被释放，因为`HTTPBody`需要手动释放请求的属性（参见我的第二次编辑）。

至于在 a 中发送大块数据`NSRequest`，有一种更简单的方法不会消耗设备的内存。您必须将文件写入磁盘，然后对其进行映射。我已经在[这个 SO answer](https://stackoverflow.com/a/16169779/1341626)中详细描述了它。希望它可以帮助某人

# php - PHP Cache_Lite 替代方案

> ID：16150522
> 
> 赞同：3
> 
> 时间：2013-04-22T15:10:34.653
> 
> 标签：php, caching

我在我的项目中将 Cache_Lite 用于 html 和数组缓存。我发现 Cache_Lite 可能会导致高系统 IO 问题。可能是因为Cache_Lite的性能不好

我在问有没有稳定的 php html/page 缓存可以使用？

我已经为操作码缓存安装了 APC，为通用数据/数组缓存安装了 Memcached。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T07:15:54.583

我对 Cache Lite 有确切的问题，因为库没有正确实现文件锁。

使用新库解决了这个问题，并替换了 Cache Lite。

[https://github.com/mpapec/simple-cache/blob/master/example_clite1.php](https://github.com/mpapec/simple-cache/blob/master/example_clite1.php) [https://github.com/mpapec/simple-cache/blob/master/example_clite2.php](https://github.com/mpapec/simple-cache/blob/master/example_clite2.php) [https://github.com/ mpapec/simple-cache/blob/master/example_clite3.php](https://github.com/mpapec/simple-cache/blob/master/example_clite3.php)

只是提到该库缺少一些我没有发现有用的功能，例如缓存清理和内存中的缓存（_memoryCaching 属性默认为 false，并在原始库中标记为“beta 质量”）。

用于文件锁定的算法遵循此图， ![并发读/写缓存文件](https://i.stack.imgur.com/8pqBD.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T07:55:26.320

如果没有更多信息，很难知道您当前是遇到 IO 问题还是将来可能遇到 IO 问题。（如果您的网站没有获得太多流量或者您使用的是 SSD，则不太可能出现问题）

Cache Lite 似乎是一个基于文件的缓存系统。如果您的站点负载过重/大量并发用户/托管在共享服务器上/有其他程序大量使用文件系统，这可能会导致 IO 问题。

Cache Lite 的替代方案是 memcache，它是将数据存储在内存中的键/值存储。如果您要存储大量数据，或者您的服务器没有任何备用 RAM，因为它将所有信息都存储在内存中，这可能不适合。内存的另一个好处是它比从磁盘访问文件要快得多。如果您只是重复访问少量数据或相同的数据，这可能不是问题，尽管因为磁盘/操作系统缓存。

我建议在担心 IO 性能之前检查您的系统当前是否遇到任何 IO 问题（除非您打算使用 slashdotted 或其他东西）您可以安装像 Munin [http://munin-monitoring.org/](http://munin-monitoring.org/)这样的工具并监控您的系统以查看 IO 是否存在问题或正在成为问题。安装后检查 cpu 图并查看 iowait 数据。

编辑：刚刚看到上面的评论，根据您的需要，反向代理是另一个很棒的工具结帐[https://www.varnish-cache.org/](https://www.varnish-cache.org/)。在工作中，我们将两者结合使用（memcache 和 varnish） 我们有一台机器每月提供超过 900,000 次页面浏览量，该站点包括静态和动态内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T09:15:30.533

如果你在谈论[https://pear.php.net/package/Cache_Lite](https://pear.php.net/package/Cache_Lite)那么我可以给你讲个故事。我们用过一次，但对于请求量很大的网站，它被证明是不可靠的。

然后我们切换到 [Zend_Cache](http://framework.zend.com/manual/1.12/en/zend.cache.html) (ZF1) 和 memcached。我可以用作独立组件。

但是，您必须对其进行一些调整才能使用标签。有一些实现可以完成工作：[https ://github.com/bigwhoop/taggable-zend-memcached-backend](https://github.com/bigwhoop/taggable-zend-memcached-backend)

# sql - SSRS 2008 报告快照时间戳

> ID：16150523
> 
> 赞同：0
> 
> 时间：2013-04-22T15:10:36.560
> 
> 标签：sql, reporting-services, reporting

在 SSRS 2005 中，我的报告设置为每天下午 5 点拍摄快照历史记录，它会使用 Now() 表达式来捕获日期和时间。这将捕获下午 5:00 的日期和时间，并在报告中保留时间戳。

我升级到 SQL 2008（不是 R2），旧报告仍然保留下午 5:00 的快照时间戳，但自更新以来任何新创建的报告都会在您每次查看历史快照时运行该表达式。它为您提供了运行时间，因此如果我查看在 2013 年 4 月 1 日下午 5:00 捕获的报告的时间戳，它将显示 2013 年 4 月 22 日上午 10:43。

当它是 SSRS 2005 时，如果我查看在 2013 年 4 月 1 日下午 5:00 捕获的报告的时间戳，它将显示 2013 年 4 月 1 日下午 5:00。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:08:05.280

面对同样的问题，我最终在数据集中添加了一个 datetime 列，并`GetDate()`在 SQL 查询中将其设置为。然后我在报告中使用了该字段。不是最优雅的解决方案，但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-02T19:36:52.900

为了解决 SSRS 报告在运行“报告历史快照”时捕获正确日期时间的问题，您应该使用**ExecutionTime 全局字段**，而不是**Now()**或**Today()**类型的函数。

--> = `"Run Date: " + =Today()`…改为…`"Run Date: " + FormatDateTime(Globals!ExecutionTime, DateFormat.ShortDate)`

--> = `"Run Time: " + TimeOfDay()`…改为…`"Run Time: " + FormatDateTime(Globals!ExecutionTime, DateFormat.LongTime)`

这将提供您正在寻找打印执行运行时的结果，而不是当前时间。

# google-sheets - Google 表格查询...哪里停止工作

> ID：16150524
> 
> 赞同：1
> 
> 时间：2013-04-22T15:10:45.117
> 
> 标签：google-sheets, formulas, google-query-language

我使用 Google Sheets SQL-ish [Query](https://support.google.com/drive/bin/answer.py?hl=en&answer=1388882)函数来汇总我的许多电子表格中的数据。这多年来一直运作良好，尽管速度很慢。

今天，我的一些查询遇到了问题 - 特别是一些将源数据中的日期与`TODAY()`.

为了演示，这里有[一个共享电子表格的链接](https://docs.google.com/spreadsheet/ccc?key=0AmkSPNhhUowadF9sVGUxWXQtbU13cnc0RjJZQnpaWVE&usp=sharing)，我用它来重现假数据的问题。

**编辑：**示例已根据 AdamL 的建议进行了更新。

![在此处输入图像描述](https://i.stack.imgur.com/OqXvR.png)

源数据在 range 中`A1:D6`，包含“序列号”、“类型”、“位置”和“保修到期”列。最后一列是日期。

这个函数`A9`总结了所有数据：

```
=query(A1:D6,"select B, count(A) group by B pivot C") 
```

...像这样：

![=查询（A1：D6，](https://i.stack.imgur.com/896In.png)

事情就是这样。如果我尝试使用`WHERE`and进行过滤`DATE()`，查询似乎完全崩溃了。我想要的是一个看起来像上面的表，但只包括`D`在过去的列中有日期的数据行。

```
=query(A1:D6,"select B, count(A) where D < now() group by B pivot C") 
```

![=查询（A1：D6，](https://i.stack.imgur.com/yRhr1.png)

如果我将过滤器更改为不涉及日期的内容，我会得到预期的输出：

![=查询（A1：D6，](https://i.stack.imgur.com/zRRmi.png)

我怎样才能得到这个给我我想要的总结？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:23:10.787

now()[标量函数](https://developers.google.com/chart/interactive/docs/querylanguage#scalar_functions)返回一个日期时间值，并且您在源数据中有日期值。不幸的是，两者之间的比较将失败。解决方法是将 now() 转换为日期值：

`=QUERY(A1:D6;"select B, count(A) where D < toDate(now()) group by B pivot C")`

* * *

顺便说一句，QUERY 函数存在一个限制（错误？），因此 now() 标量函数不会（必然）在电子表格的时区中运行，并且似乎没有任何修改方法行为。我相信 now() 标量函数将始终以太平洋夏令时间（例如美国西海岸）返回当前时间。所以对我来说，现在在澳大利亚布里斯班，QUERY 选择子句中使用的 toDate(now()) 返回昨天的日期。

更安全的选择是使用电子表格函数生成今天的日期，并将其连接到 QUERY 子句中：

`=QUERY(A1:D6;"select B, count(A) where D < date '"&TEXT(GoogleClock();"yyyy-MM-dd")&"' group by B pivot C")`

# c# - OracleTimeStampTZ 错误

> ID：16150531
> 
> 赞同：0
> 
> 时间：2013-04-22T15:11:11.383
> 
> 标签：c#, oracle11g

我正在尝试创建一个新的 OraceTimeStampTZ 对象，我得到“ORA-1830：日期格式图片在转换整个输入字符串之前结束”并且不明白为什么。当我检查传递给“new”的字符串时，它看起来不错：

```
OracleTimeStampTZ dtzTimeIn = new OracleTimeStampTZ(sDTZ); 
```

sDTZ = "15-APR-13 09.03.47.000000 AM US/EASTERN"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:09:38.053

[您好，根据Oracle](http://docs.oracle.com/cd/B28359_01/win.111/b28375/OracleTimeStampTZStructure.htm)的文档，您的时间和年份似乎不正确。

您可以尝试以下方法是否有效：

```
OracleGlobalization info = conn.GetClientInfo();
info.TimeZone = "US/Easstern";
info.TimeStampFormat = "DD-MON-YYYY HH:MI:SS.FF AM";
info.TimeStampTZFormat = "DD-MON-YYYY HH:MI:SS.FF AM TZR";
conn.SetSessionInfo(info);

OracleTimeStampTZ dtzTimeIn = new OracleTimeStampTZ("15-APR-2013 09:03:47.000 AM US/Eastern"); 
```

我编辑了我之前的答案，以合并此[问题/答案](https://stackoverflow.com/questions/588286/oracle-timestamp-with-timezone-named-zone-vs-offset)中提供的与此类似的代码块。

# php - jquery json 选择问题

> ID：16150540
> 
> 赞同：0
> 
> 时间：2013-04-22T15:11:55.427
> 
> 标签：php, javascript, jquery, json

我从 ajax 脚本得到以下输出：

```
{"DATA":[{"COUNTRYCODE":"1","DESCRIPTION":"USA","COUNTRYID":"211"},   {"COUNTRYCODE":"1","DESCRIPTION":"Canada","COUNTRYID":"37"},{"COUNTRYCODE":"1","DESCRIPTION":"Dominican Republic","COUNTRYID":"224"}, 
```

我正在尝试使用来自此 JSON 数据的信息填充选择菜单：

```
<script type="text/javascript" charset="UTF-8">
$.getJSON(
        'getcountries.php',
        function(data) {
            var items = [];
            $('#country').append(data);

            $.each(data['DATA'], function(key, val) {
                    $.each(val, function(key, value) {
                            console.log(value);
                    });
            });
    }
    ); 
```

它的问题是`$('#country').append(data)` （或`append(data['DATA']`）总是返回错误“*值没有实现接口节点。* ”

谁能指出我如何将我拥有的特定 JSON 数据放入选择脚本中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:23:56.540

`.append()`只接受 HTML 字符串、DOM 元素或 jQuery 对象

见：[http ://api.jquery.com/append/](http://api.jquery.com/append/)

我认为这是您真正想要的结果。

```
var data = {"DATA":[{"COUNTRYCODE":"1","DESCRIPTION":"USA","COUNTRYID":"211"},{"COUNTRYCODE":"1","DESCRIPTION":"Canada","COUNTRYID":"37"},{"COUNTRYCODE":"1","DESCRIPTION":"Dominican Republic","COUNTRYID":"224"}]};

var $select = $('#country').empty();

$select.append(
    data.DATA.map(function (el, i) {
        return $('<option>')
            .val(el.COUNTRYID)
            .text(el.DESCRIPTION)
            .data('DATA', el); // in case you also want to access its COUNTRYCODE
    })
); 
```

jsFiddle：http: [//jsfiddle.net/terryyounghk/ZshG4/](http://jsfiddle.net/terryyounghk/ZshG4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:21:33.167

演示：http: [//jsfiddle.net/q5Q3d/](http://jsfiddle.net/q5Q3d/)

```
var a = {
    "DATA":[
        {"COUNTRYCODE":"1","DESCRIPTION":"USA","COUNTRYID":"211"},   
        {"COUNTRYCODE":"1","DESCRIPTION":"Canada","COUNTRYID":"37"},
        {"COUNTRYCODE":"1","DESCRIPTION":"Dominican Republic","COUNTRYID":"224"}
    ]
}

$.each(a.DATA, function(idx, val){
    var option = "<option value='" + val.COUNTRYID + "'>" + val.DESCRIPTION + "</option>";
    $('select').append(option);
}); 
```

# java - 全局使用 PersistentCookieStore

> ID：16150542
> 
> 赞同：0
> 
> 时间：2013-04-22T15:11:56.273
> 
> 标签：java, android, cookies, http-request

我有一个 PersistentCookieStore，我想在全局范围内使用它，这意味着它在 login.java 中将 cookie 写入其中，我想在 mainactivity.java 中使用这些 cookie 执行请求我该怎么做？实际上我这样声明 PCS：

```
PersistentCookieStore myCookieStore = new PersistentCookieStore(this);
client.setCookieStore(myCookieStore); 
```

但是我不能在两个班级都这样做，因为那样每次都会是新的，还是我错了？:o

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:20:41.533

假设您正在使用[该`android-async-http`库](https://github.com/loopj/android-async-http/)，那么`PersistentCookieStore`它是持久的，因此它将您添加到它的任何 Cookie 存储在共享首选项中。这意味着如果您在不同的活动中创建它的实例，它们都将可以访问相同的 cookie。

换句话说，如果您将 cookie 写入 in 的实例，`PersistentCookieStore`它们`Login.java`将可用于 `PersistentCookieStore`in的不同实例`MainActivity.java`。

# c++ - 访问冲突写入位置 0x00000000

> ID：16150543
> 
> 赞同：1
> 
> 时间：2013-04-22T15:11:56.777
> 
> 标签：c++, visual-studio-2010, image, opencv, image-processing

这是我的代码：

**颜色检测器.h**

```
#pragma 
#include <iostream>
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>

using namespace std;
using namespace cv;

class ColorDetector
{
public:
    ColorDetector(void);
    ~ColorDetector(void);

    //Set the Color Distance
    void SetColorDistanceThreshold(int);

    //Get the Color distance
    int GetColorDistanceThreshold();

    //Detect Colours of the image
    Mat Process(Mat &image);

    //Set the Target color using 3 channels
    void SetTargetColor(unsigned char red, unsigned char green, unsigned char blue);

    //Set the Target color using Vec3b
    //This will hold the whole color value at once
    void SetTargetColor(Vec3b color);

    //Returns the target color
    Vec3b GetTargetColor();

    //Gets the distancefrom the target color
    int GetDistance(const Vec3b &)const;

private:
    int minDist; //Minimum acceptable distance
    Mat result; //The resulting image
    Vec3b target; //The target colour
}; 
```

**颜色检测器.cpp**

```
#include "ColorDetector.h"

ColorDetector::ColorDetector(void)
{
    //Set the RGB Values
    target[0] = 0;
    target[1] = 0;
    target[2] = 0;
}

ColorDetector::~ColorDetector(void)
{
}

void ColorDetector::SetColorDistanceThreshold(int distance)
{
    if(distance>0)
    {
        minDist = distance;
    }
    else
    {
        minDist = 0;
    }
}

int ColorDetector::GetColorDistanceThreshold()
{
    return minDist;
}

void ColorDetector::SetTargetColor(unsigned char red, unsigned char green, unsigned char blue)
{
    //BGR Order
    target[0] = blue;
    target[1] = green;
    target[2] = red;
}

void ColorDetector::SetTargetColor(Vec3b color)
{
    target = color;
}

Vec3b ColorDetector::GetTargetColor()
{
    return target;
}

int ColorDetector::GetDistance(const Vec3b &color)const
{
    int distance = abs(color[0]-target[0]) +
                   abs(color[1]-target[1]) +
                   abs(color[2]-target[2]);

    return distance;

}

Mat ColorDetector::Process(Mat &image)
{
    result.create(result.rows,result.cols,CV_8U);

    //Loop
    Mat_<Vec3b>::const_iterator it = image.begin<Vec3b>();
    Mat_<Vec3b>::const_iterator itend = image.end<Vec3b>();

    Mat_<uchar>::iterator itout = result.begin<uchar>();

    while( it != itend)
    {

        //Compute distance from target color
        if(GetDistance(*it)<minDist)
        {
            *itout = 255;
        }
        else
        {
            *itout = 0;
        }

        *++it;
        *++itout;
    }

    return result;
} 
```

**ColorDetectorMain.cpp**

```
#include <iostream>
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include "ColorDetector.h"

using namespace std;

    int main()
    {
        ColorDetector cd;

        Mat image = imread("C:/Users/Public/Pictures/Sample Pictures/Tulips.jpg");

        try
        {
            if(!image.data)
            {
                throw 1;
            }
        }
        catch(int i)
        {
            cout << "Unable to read the image" << endl;
        }

        cd.SetColorDistanceThreshold(100);
        cd.SetTargetColor(130,190,230);

        namedWindow("Result");
        imshow("Result",cd.Process(image));

        waitKey(0);
    } 
```

运行此代码时出现以下错误

```
First-chance exception at 0x013a16a5 in OpenCv.exe: 0xC0000005: Access violation writing location 0x00000000.
Unhandled exception at 0x013a16a5 in OpenCv.exe: 0xC0000005: Access violation writing location 0x00000000.
The program '[4768] OpenCv.exe: Native' has exited with code -1073741819 (0xc0000005). 
```

代码在ColorDetector.cpp`*itout = 255;`的循环内中断。`while`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:18:05.277

您收到此错误是因为`result`小于`image`并且在某个点您在到达`result.end()`之前到达`image.end()`。

```
 result.create(result.rows,result.cols,CV_8U); 
```

你是这个意思吗？

```
 result.create(image.rows,image.cols,CV_8U); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T15:13:41.390

问题是这段代码：

```
 *++it;
    *++itout; 
```

这应该是：

```
 ++it;
    ++itout; 
```

**编辑**- 查看评论，这似乎不是正确的用法，但可能不会导致您的问题。除非它被否决，否则我会留下答案，因为它*可能*会有所帮助。

# jquery - 使用 HTML 进行 JQuery 验证

> ID：16150544
> 
> 赞同：0
> 
> 时间：2013-04-22T15:11:59.170
> 
> 标签：jquery, validation

我在一个新网站上构建了一个表单，并正在寻找一些使用 JQuery 进行表单验证的帮助，但不知道从哪里开始。我已经下载了[http://plugins.jquery.com/validationengine/](http://plugins.jquery.com/validationengine/)。在 head 标记中引用了 JQuery 库和验证器引擎。我现在不太确定如何让引擎与我的表单一起工作。下面是我的代码：

```
<div id="form">

    <form method="post" action="mailto:" enctype="text/plain">
    <INPUT TYPE="HIDDEN" NAME="RECIPIENT" VALUE="">
    <INPUT TYPE="HIDDEN" NAME="SUBJECT" VALUE="enquiry">

      <div id="col1">
                <label>First Name</label><br />
                <input id="fname" name="first name" class="input" type="text" value=""/>
                <div id="clear"></div>

                <label>Surname</label><br />
                <input id="sname" name="Surname" class="input" type="text" value="" />
                <div id="clear"></div>

                <label>Telephone Number</label><br />
                <input id="tel" name="telephone" class="input" type="text" value="" />
                <div id="clear"></div>

                <label>E mail</label><br />
                <input id="email" name="email" class="input" type="text" value="" />
                <div id="clear"></div>

                <label>Message Subject</label><br />
                <select size="1" name="subject" id="subject">
                  <option>Please choose:</option>
                  <option>Beauty Treatments</option>
                  <option>Holistic & Massage Treatments</option>
                  <option>Pamper Parties / Events</option>
                  <option>After Care</option>
                  <option>Special Offers</option>
                  <option>Other</option>
                </select>
                <div id="clear"></div>
                </div>

                <div id="col2">                    
                <label>Message</label><br />
                <textarea id="message" name="notes" cols="" rows="" class="textarea"></textarea>

      </div> 
```

我是 JQuery 的新手，需要先了解基本知识。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T10:27:50.517

Follow this:

Download jquery validation engine plugin from [here.](https://github.com/posabsolute/jQuery-Validation-Engine) And extract it.

Inside the folder you can find these two files.

```
jquery.validationEngine-en.js 
jquery.validationEngine.js 
```

Copy & Paste in assets->scripts-> of your working project.

Then change the `src` path like below.

```
<script src="assets/scripts/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>

<script src="assets/scripts/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script> 
```

In Your Coding do the following:

```
<script>
    $(document).ready(function(){
        $("#id of ur form").validationEngine();
    });
</script>

<label>First Name</label><br />
 <input id="fname" name="first name" class="validate[required,minSize[6],maxSize[10]]" type="text" value=""/>

 <label>Surname</label><br />
 <input id="sname" name="Surname" class="validate[required,minSize[6],maxSize[10]]" type="text" value="" />

 <label>Telephone Number</label><br />
 <input id="tel" name="telephone" class="validate[required,custom[onlyNumberSp],maxSize[10]]" type="text" value="" />

 <label>E mail</label><br />
 <input id="email" name="email" class="validate[required,custom[email],maxSize[30]]" type="text" value="" /> 
```

# html - 动态调整 div 大小

> ID：16150545
> 
> 赞同：2
> 
> 时间：2013-04-22T15:11:59.200
> 
> 标签：html, menu, resize, sliding

我做了很多研究，但没有去过任何地方。

当滑动菜单从屏幕左侧展开时，我正在尝试找到一种方法来动态调整 div 的大小。

理想情况下，滑动菜单会随着菜单的展开调整 div 的宽度。

有什么建议会很棒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T22:12:36.383

这是您的解决方案的链接：http: [//jsbin.com/inayeg/2/edit](http://jsbin.com/inayeg/2/edit)

如果您不想在悬停时展开菜单，而是在单击时展开菜单，则必须使用 javascript。

为此，只需添加一个按钮，例如 id '#mybutton'，然后添加这个 javascript：

```
var expandBt = document.getElementById('mybutton');
var menu = document.getElementById('menu');
expandBt.onclick(function() {
  menu.style.width = '15%'; // expand menu
});
// record a counter for clicking collapse/expand, or place another button to collapse. 
```

注意：您当然可以用像素替换百分比。只是不要浮动#main div，否则它将使其宽度适应最小宽度而不是最大宽度。

# html - 为什么我的元素上的静态位置没有相对于父 div 定位？

> ID：16150550
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:12:11.527
> 
> 标签：html, css

我有一个`position: relative`分配给它的容器 div，在这个 div 里面我有一个`position: fixed`分配给它的锚标记。不是`<a>`相对于其父 div 定位，而是将自身定位到主体。谁能解释我如何解决这个问题？

**小提琴：http:** [//jsfiddle.net/DWMTn/](http://jsfiddle.net/DWMTn/)

**CSS**

```
*{padding:0;margin:0;}

.main {
    width: 300px;
    position: relative;
    background: #eee;
}

p {
    margin-bottom: 20px;
}

.btn {
    display: block;
    width: 100px;
    height: 100px;
    background: red;
    color: white;
    text-align: center;
    line-height: 100px;
    position: fixed;
    right: 0;
    bottom: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:14:29.477

固定位置元素相对于浏览器窗口定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:39:32.933

正如其他人所说，`position:fixed`与视口相关，因此您无法仅使用 css 实现您想要的。如果你想保持`btn`固定在`main`容器上，那么你也需要使用绝对定位和一点 javascript。

在这个例子中，我使用了 jQuery 库来移动按钮：

[http://jsfiddle.net/DWMTn/7/](http://jsfiddle.net/DWMTn/7/)

```
var main = $('.main:eq(0)'); //would be better to use an id here
var button = $('.btn:eq(0)'); //would be better to use an id here
var max = main.height() - button.height();

button.css('bottom', 'auto'); //removes the original bottom positioning

function moveButton() {
    var top = $(window).scrollTop() + $(window).height() - button.height();
    if (top > max) {
        top = max;
    }

    button.css('top', top + 'px');
}

moveButton();

$(window).scroll(function() { moveButton(); });
$(window).resize(function() { moveButton(); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:10:35.270

你不清楚你希望这个布局如何表现，但我敢打赌有 CSS 方法来修复它。如果您希望它留在右下角：

```
.btn {
    display: block;
    width: 100px;
    height: 100px;
    background: red;
    color: white;
    text-align: center;
    line-height: 100px;
    position: fixed;
    left: 200px; 
    bottom: 0;
} 
```

您还可以使用边距来进一步定位您的元素。例如，如果您希望它居中：

```
.btn {
    display: block;
    width: 100px;
    height: 100px;
    background: red;
    color: white;
    text-align: center;
    line-height: 100px;
    position: fixed;
    left: -50px;
    margin-left: 50%;
    bottom: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:15:13.637

# html - 在 html 标记或 adsense 广告中保留空间

> ID：16150552
> 
> 赞同：1
> 
> 时间：2013-04-22T15:12:21.173
> 
> 标签：html, css, adsense

嘿，这是一个非常简单的问题，但由于某种原因，我无法通过谷歌找到答案。我正在建立一个网站（很多东西仍然无法运行），但我现在正在处理外观和感觉，我希望在我的 php 模板中保留空间用于添加。只需添加一个`<div class='advertisement'>`并使用标准 css 来保持位置就足够了吗？（我知道这将适用于我的目的）但是，如果 Google 将来抓取我的网站将需要更少的工作来显示添加，我会感到很痛苦。ps 我还通读了 google 的关于 add 应该放在哪里的指南，并且有一个不同的外观，然后是页面的其余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:39:26.167

如果您使用`<div class='advertisement'></div>`（标签之间没有内容）并在 CSS 中设置元素的尺寸，这足以保留空间，Google 将其视为空（原样）并忽略它，直到您将一些内容放在那里。没有办法也没有必要通知 Google 该页面的未来内容。

如果您希望在元素中插入一些虚拟内容，例如“在此处投放广告”（这实际上是一种广告）或“为广告保留”，那没关系。它可以在开发和评估过程中为您提供帮助。需要仔细考虑它们在启动时是否适用于真实页面。但是对于搜索引擎来说，这只是内容，可能并不相关——它没有太大的危害，但也没有帮助。（我们不希望人们搜索这些东西，对吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:36:04.207

@Mr.Alien 评论是我真正喜欢的所有如果谷歌不提供测试添加...复制并粘贴在@brendanmorrison 下面保留带有文本的示例横幅广告在这里

# cassandra - 确定 Gossip 协议是否与 Cassandra 一起使用？

> ID：16150556
> 
> 赞同：0
> 
> 时间：2013-04-22T15:12:30.997
> 
> 标签：cassandra

我在客户处安装了一个 6 节点 VM Apache Cassnadra 1.0.6 环。我们在云提供商中使用 HA 代理。我们最初提供了完整的设置，然后客户 IT 进入那里使其变得更好。现在我们继续遇到我们被指责的问题，我们必须确定原因。

我看到在一个特定节点上，我们继续有一个高提示的切换队列。我还看到一个数据很少的节点。

我怀疑节点没有在环周围进行通信。是否有命令或其他工具或方法可以用来查看八卦消息是否按应有的方式在环上传播？

更一般地说，确定 Cassandra 环网络的健康/配置的最佳方法/工具是什么。我想确保所有节点都能够通过 gossip 相互通信并且数据正在被复制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:15:04.513

众所周知，Gossip协议负责点对点通信，所以基本上如果我们跟踪rpc端口即9160（默认），那么我们可以得到一些相关信息

```
tcp        0      0 XXX.XX.XX.XX:9160       XXX.XX.XX.XX:47166      ESTABLISHED 21990/java       keepalive (5554.50/0/0)
tcp        0      0 XXX.XX.XX.XX:9160       XXX.XX.XX.XX:47164      ESTABLISHED 21990/java       keepalive (5554.50/0/0)
tcp        0      0 XXX.XX.XX.XX:47162      XXX.XX.XX.XX:9160       ESTABLISHED 1334/python2.7   off (0.00/0/0)
tcp        0      0 XXX.XX.XX.XX:9160       XXX.XX.XX.XX:47163      ESTABLISHED 21990/java       keepalive (5554.50/0/0)
tcp        0      0 XXX.XX.XX.XX:47164      XXX.XX.XX.XX:9160       ESTABLISHED 1334/python2.7   off (0.00/0/0)
tcp        0      0 XXX.XX.XX.XX:9160       XXX.XX.XX.XX:47167      ESTABLISHED 21990/java       keepalive (5554.50/0/0)
tcp        0      0 XXX.XX.XX.XX:9160       XXX.XX.XX.XX:47165      ESTABLISHED 21990/java       keepalive (5554.50/0/0)
tcp        0      0 XXX.XX.XX.XX:47166      XXX.XX.XX.XX:9160       ESTABLISHED 1334/python2.7   off (0.00/0/0)
tcp        0      0 XXX.XX.XX.XX:9160       XXX.XX.XX.XX:47162      ESTABLISHED 21990/java       keepalive (5554.50/0/0)
tcp        0      0 XXX.XX.XX.XX:9160       XXX.XX.XX.XX:47168      ESTABLISHED 21990/java       keepalive (5554.50/0/0)
tcp6       0      0 XXX.XX.XX.XX:47167      XXX.XX.XX.XX:9160       ESTABLISHED 2215/java        keepalive (5554.50/0/0)
tcp6       0      0 XXX.XX.XX.XX:47168      XXX.XX.XX.XX:9160       ESTABLISHED 1189/java        off (0.00/0/0) 
```

从这些信息中，我们可以很容易地确定，是的，Gossip 仍在工作。

# python - networkx：创建从边缘诱导的子图

> ID：16150557
> 
> 赞同：6
> 
> 时间：2013-04-22T15:12:32.557
> 
> 标签：python, graph, networkx

networkx 只有一个功能

> 图.subgraph()

创建从节点诱导的子图。但是如何从边列表构造子图？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:20:44.290

如果你有一个边列表，那么你已经有了子图。只需`nx.Graph`在列表上调用，并可选择从原始图中添加（未连接的）节点。从[文档](http://networkx.lanl.gov/reference/generated/networkx.Graph.__init__.html#networkx.Graph.__init__)

```
Graph.__init__(data=None, **attr) 
```

> 使用边、名称、图形属性初始化图形。
> 用于初始化图形的数据。如果 data=None（默认）创建一个空图。数据可以是**边列表**，也可以是任何 NetworkX 图形对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:23:28.270

@larsmans 的答案是正确的。这是一个简单的例子：

```
In [1]: import networkx as nx

In [2]: G = nx.path_graph(6)

In [3]: G.edges()
Out[3]: [(0, 1), (1, 2), (2, 3), (3, 4), (4, 5)]

In [4]: subgraph_edges = [(1,2), (3,4)]

In [5]: S = nx.Graph(subgraph_edges)

In [6]: S.edges()
Out[6]: [(1, 2), (3, 4)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-24T23:41:10.507

如果您想要一个函数具有`Graph.subgraph()`从节点创建的子图的属性，但该函数适用于边的迭代器，则需要保留对原始图、边和节点的引用，以便能够传播图中的更改、边或节点数据属性。尤其是来自 的文档字符串`Graph.subgraph()`：

> 图、边或节点属性只是指向原始图。因此对节点或边结构的更改不会反映在原始图中，而对属性的更改会。
> 
> 要创建具有自己的边/节点属性副本的子图，请使用：nx.Graph(G.subgraph(nbunch))
> 
> 如果边缘属性是容器，则可以使用以下方法获得深拷贝： G.subgraph(nbunch).copy()

当前提出的方法不会将其属性的变化反映在原始图中，因为它们将从头开始创建一个新图。

没有内置函数/方法可以通过边缘列表来完成此任务。但是这个函数使用节点的基础设施，`.subgraph`因此应该适用于 Graph 和 DiGraph。它不适用于非 MultiGraph 和 MultiDiGraph。这是因为 MultiGraph 和 MultiDiGraph 可能需要您参考边缘的键，而当前方法会忽略第二个之后的参数，以便对传入的边缘列表是否具有附加为字典的属性不敏感。此外，即使它是在没有引用的情况下创建的（通过传递`ref_back=False`），它也不会使用`nx.Graph`or创建新图形`nx.DiGraph`类初始值设定项，而是原始图的深层副本。可以将其扩展到涵盖其他情况......但我现在不需要它，直到有人明确要求它，我会假设没有其他人这样做（如果你想查看版本，请参阅[github](https://github.com/michaelpacer/hidden_structure_inference/blob/master/lib/subgraph_functions.py#L5)我在实践中使用过）。

```
def subgraph_from_edges(G,edge_list,ref_back=True):
    """
    Creates a networkx graph that is a subgraph of G
    defined by the list of edges in edge_list.        

    Requires G to be a networkx Graph or DiGraph
    edge_list is a list of edges in either (u,v) or (u,v,d) form
    where u and v are nodes comprising an edge, 
    and d would be a dictionary of edge attributes

    ref_back determines whether the created subgraph refers to back
    to the original graph and therefore changes to the subgraph's 
    attributes also affect the original graph, or if it is to create a
    new copy of the original graph. 
    """

    sub_nodes = list({y for x in edge_list for y in x[0:2]})
    edge_list_no_data = [edge[0:2] for edge in edge_list]
    assert all([e in G.edges() for e in edge_list_no_data])

    if ref_back:
        G_sub = G.subgraph(sub_nodes)
        for edge in G_sub.edges():
            if edge not in edge_list_no_data:
                G_sub.remove_edge(*edge)
    else:
        G_sub = G.subgraph(sub_nodes).copy()
        for edge in G_sub.edges():
            if edge not in edge_list_no_data:
                G_sub.remove_edge(*edge)

    return G_sub 
```

诀窍是可以安全地从图中删除任何不存在于边中的节点（给我们我们的节点子集），然后您可以删除任何保留但不在边列表中的边。

注意：我意识到这现在是一个相当古老的问题，但如果解释为提问者想要一个直接引用原始图、边和节点的图（特别是包括它们的数据）的情况，所提供的答案实际上并不能回答这个问题属性）。我需要那个解决方案，所以我想无论如何我都会发布它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-04T00:52:04.493

在前面的答案的基础上，保留原始图形及其所有属性的一个非常简单的解决方法可能是：

```
FG = nx.Graph(fedges)
G = G.subgraph(FG.nodes()) 
```

这里，*fedges*是构建子图的过滤边列表。首先，使用过滤后的边创建一个新的临时图 ( *FG )。*然后使用节点列表（*FG.nodes()*）从原始图中获取子图。由于您实际上是在原始图形对象上使用*subgraph*函数，因此您不会从中丢失任何属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-11T18:11:23.150

根据[dbn](https://stackoverflow.com/users/1309332/dbn)的评论，networkx 现在包含一个功能[`nx.edge_subgraph`](https://networkx.github.io/documentation/latest/reference/generated/networkx.classes.function.edge_subgraph.html)来执行此操作。它保留了原始图表中的属性，但是对这些属性的更改将反映在原始图表中。

```
G = nx.path_graph(5)
S = G.edge_subgraph([(0, 1), (3, 4)])
list(S.nodes) # [0, 1, 3, 4]
list(H.edges) # [(0, 1), (3, 4)] 
```

# powershell - Powershell远程执行qdauser

> ID：16150562
> 
> 赞同：1
> 
> 时间：2013-04-22T15:12:53.313
> 
> 标签：powershell

我正在尝试从安装了 quest cmdlet 的服务器运行 QADuser。远程会话可以添加管理单元，但我无法运行 QADuser

因为`get-QADuser -identity xxx00`我收到

> 你调用的对象是空的

我使用管理员帐户运行 Powershell 2.0，但无法在我的 PC 上安装 quest cmdlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:24:46.817

听起来这可能是远程处理引入的身份验证问题。

如果您从 Connect-QADService 开始，并指定凭据，它是否有效？

# jpa - EntityManager persist() 方法不向数据库插入记录 => 严重：javax.persistence.TransactionRequiredException

> ID：16150563
> 
> 赞同：0
> 
> 时间：2013-04-22T15:12:59.197
> 
> 标签：jpa, entity

我在使用 EntityManager persist() 方法时遇到问题。我正在使用 JSF2.0、glassfish 3、JPA 和休眠，我没有使用 spring。

我尝试使用persist 方法在事件表中添加事件，但是EntityManager persist() 方法不会将记录插入数据库，并且我收到此错误消息=>

严重：com.sun.enterprise.container.common.impl.EntityManagerWrapper.flush(EntityManagerWrapper.java) com.sun.enterprise.container.common.impl.EntityManagerWrapper.doTxRequiredCheck(EntityManagerWrapper.java:163) 处的 javax.persistence.TransactionRequiredException :411) 在 dao.EvenementDao.addEvenement(EvenementDao.java:128)。

```
@ManagedBean
@Stateless
public class EvenementDao implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = -3343483942392617877L;
/**
 * 
 */

private List<TEvenement>  listeEvenement;
private List<SelectItem> listeSelectItemEvnt;
private TEvenement tevenement ;

public EvenementDao() {

}

@PersistenceUnit(unitName="GA2010-ejbPU-dev")
private EntityManagerFactory emf;

@PostConstruct
private void init() {

    tevenement = new TEvenement();

}

public List<TEvenement> getListeEvenement() {
EntityManager em = emf.createEntityManager();
    TypedQuery<TEvenement> requete = m.createNamedQuery("TEvenement.findPrivateOther", 
    TEvenement.class);
    listeEvenement = requete.getResultList();

    return listeEvenement;
}

public TEvenement getEvenement() {
    return tevenement;
}

public void setEvenement(TEvenement evenement) {
    this.tevenement = evenement;
}

public void addEvenement(){
    EntityManager em = emf.createEntityManager();
HttpSession session = (HttpSession) FacesContext.getCurrentInstance().
                          getExternalContext().getSession(false);
    Integer codeUser = (Integer) session.getAttribute("codeUser");
    tevenement.setUtilCreation(codeUser);

    System.out.println("je rentre dans addevenemnt");
    try{

        System.out.println("i persist "+ em);

            em.persist(tevenement);
            em.flush();
        System.out.println(tevenement.getDetailsEvenement());

        FacesMessage message = new FacesMessage("Evenement ajouté avec succès.");
        FacesContext.getCurrentInstance().addMessage(null, message);

    }catch(Exception e){
        e.printStackTrace();
    }

} 
```

}

所以，这是行不通的，但是程序在函数 addEvenement 中输入，FacesMessage message = new FacesMessage("Evenement ajouté avec succès."); 将消息返回给我，就好像它正在工作一样。我认为这是由于我的 entityMAnager 造成的，但实际上其他功能可以与同一个实体管理器一起正常工作，所以我不明白。

```
**public List<TEvenement> getListeEvenement()** {
    EntityManager em = emf.createEntityManager();
    TypedQuery<TEvenement> requete =     em.createNamedQuery("TEvenement.findPrivateOther", TEvenement.class);
    listeEvenement = requete.getResultList();

    return listeEvenement;
} 
```

这个工作正常，唯一的区别是，在这种情况下，查询是一个选择，而在另一种情况下，它是一个持久化查询，因此会影响数据库。

实体代码：

@Entity @Table(name="t_evenements") @NamedQueries({@NamedQuery(name="TEvenement.findAll", query="SELECT evnt FROM TEvenement evnt"), @NamedQuery(name="TEvenement.findPrivateOther", query= "SELECT evnt FROM TEvenement evnt WHERE evnt.typeEvenement = 6 OR evnt.typeEvenement = 7")}) 公共类 TEvenement 实现 Serializable {

```
private static final long serialVersionUID = -1908959833491896991L;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name="REF_EVENEMENT", unique=true, nullable=false)
private Integer refEvenement;

@Temporal(TemporalType.DATE)
@Column(name="DATE_DEBUT_EVENEMENT")
private Date dateDebutEvenement;

@Temporal(TemporalType.DATE)
@Column(name="DATE_FIN_EVENEMENT")
private Date dateFinEvenement;

@Column(name="DETAILS_EVENEMENT")
private String detailsEvenement;

@Column(name="IS_EVERYDAY")
private byte isEveryday;

@Column(name="RAPPEL_EVENEMENT")
private int rappelEvenement;

public Integer getUtilEvenement() {
    return utilEvenement;
}

public void setUtilEvenement(Integer utilEvenement) {
    this.utilEvenement = utilEvenement;
}

@Column(name="TITRE_EVENEMENT")
private String titreEvenement;

@Column(name="TYPE_EVENEMENT")
private String typeEvenement;

@Column(name="UTIL_COPIE_EVENEMENT")
private Integer utilCopieEvenement;

@Column(name="UTIL_EVENEMENT")
private Integer utilEvenement;

@Column(name="HEURE_EVENEMENT")
private String heureEvenement;

@Column(name="UTIL_CREATION")
private Integer  utilCreation;

public String getHeureEvenement() {
    return heureEvenement;
}

public void setHeureEvenement(String heureEvenement) {
    this.heureEvenement = heureEvenement;
}

public TEvenement() {
}

public Integer getRefEvenement() {
    return this.refEvenement;
}

public void setRefEvenement(int refEvenement) {
    this.refEvenement = refEvenement;
}

public Date getDateDebutEvenement() {
    return this.dateDebutEvenement;
}

public Integer getUtilCreation() {
    return utilCreation;
}

public void setUtilCreation(Integer utilCreation) {
    this.utilCreation = utilCreation;
}

public void setUtilCopieEvenement(Integer utilCopieEvenement) {
    this.utilCopieEvenement = utilCopieEvenement;
}

public void setDateDebutEvenement(Date dateDebutEvenement) {
    this.dateDebutEvenement = dateDebutEvenement;
}

public Date getDateFinEvenement() {
    return this.dateFinEvenement;
}

public void setDateFinEvenement(Date dateFinEvenement) {
    this.dateFinEvenement = dateFinEvenement;
}

public String getDetailsEvenement() {
    return this.detailsEvenement;
}

public void setDetailsEvenement(String detailsEvenement) {
    this.detailsEvenement = detailsEvenement;
}

public byte getIsEveryday() {
    return this.isEveryday;
}

public void setIsEveryday(byte isEveryday) {
    this.isEveryday = isEveryday;
}

public int getRappelEvenement() {
    return this.rappelEvenement;
}

public void setRappelEvenement(int rappelEvenement) {
    this.rappelEvenement = rappelEvenement;
}

public String getTitreEvenement() {
    return this.titreEvenement;
}

public void setTitreEvenement(String titreEvenement) {
    this.titreEvenement = titreEvenement;
}

public String getTypeEvenement() {
    return this.typeEvenement;
}

public void setTypeEvenement(String typeEvenement) {
    this.typeEvenement = typeEvenement;
}

public Integer getUtilCopieEvenement() {
    return this.utilCopieEvenement;
}

public void setUtilCopieEvenement(int utilCopieEvenement) {
    this.utilCopieEvenement = utilCopieEvenement;
} 
```

}

有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:19:48.070

不同之处不在于您调用persist，不同之处在于您调用em.flush() 错误状态，需要将EntityManager 加入事务。确保您的 getListeEvenement() 方法包含在事务中，或者根据您的设置启动一个。

# java - 移除 JButton 矩形白色边框

> ID：16150565
> 
> 赞同：1
> 
> 时间：2013-04-22T15:13:01.797
> 
> 标签：java, swing, windows-7, look-and-feel, insets

有人知道如何删除 JButton 上的白色矩形边框吗？当按钮有点圆润时，此问题仅适用于 Windows 外观。

请在图片上找到附加的示例![在此处输入图像描述](https://i.stack.imgur.com/mLgYH.png)。

将边框设置为空或 null 无济于事。保证金也是如此。

仅当我将按钮的不透明度设置为 false 时，白色边距/边框才会消失，但不幸的是，在这种情况下，整个按钮在某些版本的窗口上也是不透明的。

当我将不透明度设置为 false 时，它​​看起来像： ![在此处输入图像描述](https://i.stack.imgur.com/jTyyJ.png)

代码示例：

```
public class TestFrame extends javax.swing.JFrame {

/**
* Auto-generated main method to display this JFrame
*/
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {

            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (UnsupportedLookAndFeelException e) {
                e.printStackTrace();
            }

            TestFrame inst = new TestFrame();
            inst.setLocationRelativeTo(null);
            inst.setVisible(true);
        }
    });
}

public TestFrame() {

    this.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    this.setLayout(null);
    this.getContentPane().setBackground(Color.BLACK);

    JButton button = new JButton();
    button.setBounds(10, 10, 100, 50);
    button.setBorder(BorderFactory.createEmptyBorder());    // not working
    button.setBorder(null);                                 // not working
    button.setMargin(new Insets(0,0,0,0));                  // not working

    add(button);
    pack();
    setSize(400, 300);
} 
```

}

谢谢， 卢博斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:07:11.233

好像是画的问题。您可以使用：

```
button.setBackground( Color.BLACK ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:38:36.013

**EDIT:** See comments below. This sample still shows the effect, even using a proper layout. Setting the background color seems to show the unwanted border. This effect doesn't show with Metal. It seems as if Windows L&F shows a rounded edge, but the button is still rectangular. The space between is only noticable if the BG color of the container is changed to something obvious, like black.

```
import java.awt.*;

import javax.swing.*;

public class TestFrame extends JFrame
{
  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new Runnable()
    {
      public void run()
      {
        try
        {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }
        catch (Exception e)
        {
          e.printStackTrace();
        }

        TestFrame inst = new TestFrame();
        inst.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        inst.setLocationRelativeTo(null);
        inst.setVisible(true);
      }
    });
  }

  public TestFrame()
  {
    JButton button = new JButton("One");
    JButton button2 = new JButton("Two");

    JPanel p = new JPanel();
    p.setBackground(Color.BLACK);
    p.setLayout(new FlowLayout());
    p.add(button);
    p.add(button2);

    add(p);
    setSize(400, 300);
  }
} 
```

# android - 接近传感器更改按钮颜色

> ID：16150566
> 
> 赞同：2
> 
> 时间：2013-04-22T15:13:03.590
> 
> 标签：android

我正在尝试制作一个按钮颜色随接近传感器而变化的应用程序。

我不知道如何改变它`onSensorChanged`。我必须导入颜色并实现不同的颜色状态吗？我有点困惑。

这是我的代码：

```
public class MainProxmityActivity extends Activity implements SensorEventListener {

Button proximidade;
SensorManager Sm;
Sensor ProxSensor;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_proxmity);

    Sm = (SensorManager) getSystemService (SENSOR_SERVICE);
    ProxSensor = Sm.getDefaultSensor(Sensor.TYPE_PROXIMITY);
    proximidade = (Button) findViewById(R.id.btn_proximidade);

    Sm.registerListener(this, ProxSensor, SensorManager.SENSOR_DELAY_NORMAL);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main_proxmity, menu);
    return true;
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

@Override
public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub
    proximidade.setBackgroundColor(getTitleColor("bd4c31"));
}

} 
```

希望问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:31:36.227

Android 设备有一堆传感器，因此 onSensorChanged() 代码通常有一个 switch 语句来选择感兴趣的传感器。特别是，接近传感器返回一个浮点值，表示接近度（例如，如果传感器的最大范围是 5.0，则 < 1.0 是“接近”）。尝试这样的事情：

```
int mColor;
public void onSensorChanged(SensorEvent event) {
    switch (event.sensor.getType()) {
    case Sensor.TYPE_PROXIMITY:
        if (event.values[0] < 1.0f) {
            if (mColor != Color.GREEN) {
                mColor = Color.GREEN;
                proximidade.setBackgroundColor(Color.GREEN);
            }
        }
        else {
            if (mColor != Color.WHITE) {
                mColor = Color.WHITE;
                proximidade.setBackgroundColor(Color.WHITE);
            }
        }
        break;
    }
} 
```

请记住在您的 onStart() 代码中为您的接近传感器注册一个侦听器，如下所示：

```
mSensorManager.registerListener(mViewWithSensorListener, s, SensorManager.SENSOR_DELAY_NORMAL) 
```

还可以在 onStop() 代码中将侦听器取消注册到接近传感器，如下所示：

```
mSensorManager.unregisterListener(mViewWithSensorListener); 
```

# java - 如何剪切字符串以适合 MySQL 中的 TEXT 字段

> ID：16150568
> 
> 赞同：3
> 
> 时间：2013-04-22T15:13:06.957
> 
> 标签：java, mysql, database

我正在将字符串写入具有 TEXT 类型字段的数据库中。这意味着我可以在该字段中写入[65,535 个字节。](http://www.electrictoolbox.com/maximum-length-mysql-text-field-types/)之后我会得到一个 SQL 异常：

```
com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'DETAILS' at row 1 
```

所以我现在的问题是，**我如何检查我的字符串**，然后**如何在正确的位置剪切字符串**，它仍然适合数据库。

我知道这也取决于编码。我刚刚看到 MySQL 模式使用“latin1 - 默认集合”字符集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:28:21.253

我想我用这段代码得到了它：

```
public String cutStringForTEXT(String string) {
    String ENCODING = "ISO-8859-1";
    int FIELD_SIZE = 65535;
    try {
        byte[] bytes = string.getBytes(ENCODING);
        if (bytes.length >= FIELD_SIZE) {
            return new String(Arrays.copyOfRange(bytes, 0, FIELD_SIZE), ENCODING);
        }
    } catch (UnsupportedEncodingException ex) {
    }
    return string;
} 
```

如果它太长，那么我获取字节数组的子集并将其转换回字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:20:47.880

如果您正在使用 php 在数据库中插入值，您可以让 php 在将变量插入数据库之前检查变量的大小。如果变量太长，你可以让它砍掉超过大小限制的部分。

# redirect - 如何在 .Net MVC4 中实现“更改密码”重定向？

> ID：16150570
> 
> 赞同：1
> 
> 时间：2013-04-22T15:13:17.630
> 
> 标签：redirect, asp.net-mvc-4, filter, authorization, t4mvc

在*.Net MVC4*中，当用户的密码被重置时，我使用子类[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)将所有请求重定向到“更改密码”页面，如下所示：

```
 public override void OnAuthorization(AuthorizationContext filterContext)
    {
        // Call base class method first
        base.OnAuthorization(filterContext);

        // Only redirect if password change is required and the requested action
        // is not "Change Password"
        if (!passwordChangeRequired
            && !(filterContext.Controller is ApplicantController &&
                 MVC.Applicant.ActionNames.ChangePassword.Equals(filterContext.ActionDescriptor.ActionName)))
        {
            filterContext.Result = new RedirectToRouteResult(
                new RouteValueDictionary
                {
                    { "controller", MVC.Applicant.Name },
                    { "action", MVC.Applicant.ActionNames.ChangePassword }
                });
        }
    } 
```

刚刚编写了这段代码，它似乎可以工作，但还没有信心，想知道它是否可以简化。

特别是关于控制器和动作 - 项目使用[T4MVC](http://t4mvc.codeplex.com/)，所以两者都需要单独包含在检查和重定向中，还是可以以某种方式组合？

也应该`base.OnAuthorization`在开始或结束（或两者都不）进行呼叫？

感谢任何指针...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:30:27.423

我最终对此稍作修改以使用[ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.108%29.aspx)而不是[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)。

如果这对任何人有用，这里是代码：

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class)]
public class ChangePasswordAttribute : ActionFilterAttribute
{
    /// <summary>
    /// Filter on executing
    /// </summary>
    /// <param name="filterContext">The current action context</param>
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }

        // Don't redirect to "Change Password" action if it is the current action
        if (filterContext.Controller is ApplicantController &&
            MVC.Applicant.ActionNames.ChangePassword.Equals(filterContext.ActionDescriptor.ActionName))
        {
            return;
        }

        // Redirect if password change is required
        if ((filterContext.HttpContext.Session[SessionKeys.PasswordChangeRequired] != null) 
            && (bool)filterContext.HttpContext.Session[SessionKeys.PasswordChangeRequired])
        {
            // Save route in session so the user can be redirected appropriately after a successful password change
            RouteValueDictionary routeValues = new RouteValueDictionary(filterContext.RouteData.Values);
            filterContext.HttpContext.Session[SessionKeys.PasswordChangeRouteValues] = routeValues;

            filterContext.Result = new RedirectToRouteResult(
                new RouteValueDictionary
                {
                    { "controller", MVC.Applicant.Name },
                    { "action", MVC.Applicant.ActionNames.ChangePassword }
                });
        }
    }
} 
```

# android - android - listView 底部的 adview 为空

> ID：16150573
> 
> 赞同：0
> 
> 时间：2013-04-22T15:13:25.673
> 
> 标签：android, listview, admob, adview

我需要在 Activity 底部用 ListView 实现 AdMob 的 AdView。我成功地将 AbView 添加到我的布局中。我的布局文件如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:id="@+id/archiveLayout"
 android:background="#FFFFFF"
 >
 <ListView  
     android:id="@android:id/list"
     android:layout_alignParentTop="true"
     android:layout_width="fill_parent" 
     android:layout_above="@+id/adView"
     android:background="#000000"
     android:layout_height="wrap_content" 
     />
 <TextView android:id="@android:id/empty"
     android:gravity="center|center"
     android:textColor="#FFFFFF"
     android:textSize="20sp"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:text="You havn't received any quote yet!"
     />
  <com.google.ads.AdView android:id="@+id/adView"
        android:layout_width="320dip"
        android:layout_height="50dip"
        ads:adUnitId="ID"
        ads:adSize="BANNER"
        ads:loadAdOnCreate="true"
        android:layout_alignParentBottom="true"/> 
```

这就是我在我的活动的 onCreate 中添加它的方式：

```
 @Override
public void onCreate(Bundle savedInstanceState)  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.archive_list);
    setListAdapter(new QuoteAdapter(this, 
            android.R.layout.simple_list_item_1, reverse(getContentDatabase(this))));
    AdView adView = (AdView)this.findViewById(R.id.adView);
    adView.setEnabled(true);
    adView = new AdView(this, AdSize.BANNER, "ID");
    AdRequest re = new AdRequest();
    re.addTestDevice(AdRequest.TEST_EMULATOR);
    re.addTestDevice("E83D20734F72FB3108F104ABC0FFC738"); 
    adView.loadAd(re);

} 
```

它在屏幕底部以定义的宽度和高度正确显示。但是里面没有内容。只是黑色的空屏幕。请告诉我我能用它做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:57:05.523

The problem was that I didn't receive `ads:adUnitId`. When I did it with the [admob site](http://www.admob.com/) everything works properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:36:06.457

我发现仅在 xml 文件中添加它要容易得多。看起来你已经将这两种方式混合在一起了。您已经启用了 ads:loadOnCreate，并且您还以编程方式制作了一个新的。尝试只使用 XML 方式，它会在页面打开时加载，并且我使用 xml only 方法获得了 100% 的填充率。如果您只是想在 xml adview 显示时显示它，则无需使事情复杂化。

# ruby-on-rails - 在 mongoid 作用域链上执行方法

> ID：16150574
> 
> 赞同：1
> 
> 时间：2013-04-22T15:13:26.550
> 
> 标签：ruby-on-rails, activerecord, model, mongoid

我需要使用 Rails 和 MongoId 获取一些随机文档。由于我计划拥有非常大的集合，我决定在每个文档中放置一个“随机”字段并使用该字段选择文档。我在模型中写了以下方法：

```
def random(qty)
  if count <= qty
    all
  else
    collection = [ ]
    while collection.size < qty
      collection << where(:random_field.gt => rand).first
    end
    collection
  end
end 
```

这个函数确实有效，并且集合中充满了*qty*随机元素。但是当我尝试像这样的范围使用它时：

```
User.students.random(5) 
```

我得到：

```
undefined method `random' for #<Array:0x0000000bf78748> 
```

相反，如果我尝试使该方法类似于 lambda 范围，则会得到：

```
undefined method `to_criteria' for #<Array:0x0000000df824f8> 
```

鉴于我对在*随机*范围之后应用任何其他范围不感兴趣，我如何在链中使用我的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:45:33.537

我最终使用以下扩展了 Mongoid::Criteria 类。不知道是不是最好的选择。实际上我相信它很慢，因为它至少执行*qty*查询。

我不知道*not_in*是否可用于普通的 ActiveRecord 模块。但是，如果需要，您可以删除*not_in*部分。这只是减少查询次数的优化。

在文档数量比 qty 多一倍（或更多）的集合上，您应该有准确的*qty*查询。

```
module Mongoid
  class Criteria

    def random(qty)
      if count <= qty
        all
      else
        res = [ ]
        ids = [ ]
        while res.size < qty
          el = where(:random_field.gt => rand).not_in(id: ids).first

          unless el.nil?
            res << el
            ids << el._id
          end
        end
        res
      end
    end

  end
end 
```

希望你觉得这个有用 ：）

# sql - 在 HSQL 中获取字符串作为日期

> ID：16150578
> 
> 赞同：0
> 
> 时间：2013-04-22T15:13:36.300
> 
> 标签：sql, hsqldb

```
select * 
from employee 
having to_date(date, 'DD/MM/YYYY HH24:MI:SS') = to_date('01/01/2012 10:00:00', 'DD/MM/YYYY HH24:MI:SS') 
```

“日期”列是 VARCHAR/STRING

由于 to_date 在 HSQL 中不起作用，如何使上述查询在 HSQL 中起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:33:28.903

TO_DATE 确实适用于最新版本的 HSQLDB。您可以使用 2.2.9 版或将来的发行版。

但是您的查询是错误的，如 a_horse_with_no_name 的评论所示，需要 WHERE 而不是 HAVING。

```
select * 
from employee 
where to_date(date, 'DD/MM/YYYY HH24:MI:SS') = to_date('01/01/2012 10:00:00', 'DD/MM/YYYY HH24:MI:SS') 
```

其实你也可以简化查询

```
select * 
from employee 
where to_date(date, 'DD/MM/YYYY HH24:MI:SS') = timestamp'2012-01-01 10:00:00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T10:33:33.953

我知道这是一个旧线程，但它是谷歌的顶级结果，所以更新它可能比开始一个新线程更好 - 特别是我已经解决了我的问题。我对这个查询（hsqldb 2.3.2 版）有很大的问题，其中我的日期是在 java 中创建的字符串并作为 varchar 存储在数据库中。

**to_date 调用在没有演员表的情况下无法正常工作，**并且文档对于如何正确进行演员表有点含糊（我认为 varchar 演员表需要指定实际长度，而事实并非如此.

```
select * from table2 where to_date(cast(timestamp as VARCHAR(254)), 'YYYY-MM-DD') > to_date('2015-09-02', 'YYYY-MM-DD') 
```

**注意那里的演员表（xxx as VARCHAR（254））！**

# matlab - 尝试在 Matlab 中打开文件时出错

> ID：16150581
> 
> 赞同：1
> 
> 时间：2013-04-22T15:13:45.043
> 
> 标签：matlab, file

我的代码有两部分。第一部分是一个像这样编程的自动文件打开：

```
fichierref = 'H:\MATLAB\Archive_08112012';
files = dir(fullfile(fichierref, '*.txt'));
numberOfFiles = numel(files);
delimiterIn = ' ';
headerlinesIn = 11;
for d = 1:numberOfFiles
    filenames(d) = cellstr(files(d).name);
end

for i=1:numberOfFiles
    data = importdata(fullfile(fichierref,filenames{i}),delimiterIn,headerlinesIn);
end 
```

稍后，我希望用户选择他的文件进行分析。但这有一个问题。我键入以下行：

```
reference = warndlg('Choose the files from which you want to know the magnetic field');
uiwait(reference);
filenames = cellstr(uigetfile('./*.txt','MultiSelect', 'on'));
numberOfFiles = numel(filenames);
delimiterIn = ' ';
headerlinesIn = 11; 
```

在提示符上按 OK 后，它给了我以下错误：

```
Error using cellstr (line 34)  
Input must be a string.

Error in FreqVSChampB_no_spec (line 128)  
filenames = cellstr(uigetfile('./*.txt','MultiSelect', 'on')); 
```

任何人都知道它为什么这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:21:01.023

您不需要in模式的`cellstr`输出命令 ：输出已经是单元阵列形式（参见 doc of ）。`uigetfile``'MultiSelect'``uigetfile`

# c# - windows phone 8 主题覆盖默认主题不起作用

> ID：16150583
> 
> 赞同：0
> 
> 时间：2013-04-22T15:13:58.893
> 
> 标签：c#, windows, xaml, windows-phone-8, themes

嗨，我目前正在为客户开发应用程序，客户想要一个与公司颜色相匹配的特定主题。

我现在正在尝试覆盖默认主题，因此客户主题将始终是使用的主题。我目前已经尝试过这个网站的方式：

[http://www.geekchamp.com/articles/windows-phone-mango-custom-application-theme-step-by-step](http://www.geekchamp.com/articles/windows-phone-mango-custom-application-theme-step-by-step)

以及来自这些的一些建议：

[如何在 Windows Phone 7 中强制使用浅色主题？](https://stackoverflow.com/questions/4096388/how-to-force-to-use-light-theme-in-windows-phone-7) [http://matthiasshapiro.com/2011/01/17/theme-forcing-for-windows-phone-7-silverlight/](http://matthiasshapiro.com/2011/01/17/theme-forcing-for-windows-phone-7-silverlight/)

这些确实是一些旧帖子，但在 Windows phone 8 中大多数应该是相同的

即使将 ThemeResource、xaml 移动到项目并明智地链接它，我也无法让其中任何一个工作：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Resources/ThemeResources.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>        
</Application.Resources> 
```

它仍然使用手机默认主题黑暗。

我怎么发现如果您不使用默认变量名称，例如：PhoneBackgroundBrush

并使用您自己的命名约定，然后就可以了。我宁愿只覆盖默认变量名。

我的问题在这篇文章中非常像这样：[覆盖默认主题 WP7 的自定义主题](https://stackoverflow.com/questions/5658951/custom-theme-that-overrides-default-theme-wp7)

真的没有办法覆盖默认主题及其变量，还是我被迫自己制作并通过我所有的控件来使用我自己的命名约定？

很感谢任何形式的帮助。

致延斯·西蒙森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:42:00.937

在底部的默认资源字典中，您会看到如下语句；

```
<Style TargetType="Button" BasedOn="{StaticResource DefaultButtonStyle}"/> 
```

将它们注释掉或其他任何内容，并在您自己的资源字典底部使用相同的内容，而不是使用 like；

```
<Style TargetType="Button" BasedOn="{StaticResource MyCustomButtonStyle}"/> 
```

之后，该类型的任何内容都应该继承您的样式模板而不是默认样式模板，并在全局范围内有效地应用您的主题，而不必在所有地方隐式定义它们。

希望这可以帮助。

# cakephp - 将复选框写入 CakePHP 会话

> ID：16150586
> 
> 赞同：0
> 
> 时间：2013-04-22T15:14:06.680
> 
> 标签：cakephp, if-statement, checkbox, controller

我想要一个表单，其中我有一个额外的复选框（不会将输入存储到 db），它将在控制器中读出。

例如。在作业编辑视图中，我可以选择一个用户。在此用户下方是一个复选框。此复选框将在我将作业分配给用户后发送一封电子邮件。

在我的控制器中我写

```
$post_array = $this->request->data;
if ($post_array['Job']['mailcheck'] == NULL) {
    // DO SOMETHING
} else {
    // DO SOMETHING
} 
```

但它不会读出复选框值...

任何想法如何解决这个问题？

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:22:37.680

虽然马克的答案是正确的，但请允许我详细说明。

请记住，复选框有时会表现得很奇怪。未选中的复选框可能根本不会发布，这可能就是您的条件失败的原因。

关于为什么你不能让它工作：

无论哪种情况，您似乎都在执行重定向，这就是为什么您永远看不到编辑表单的原因。检查您是否遗漏了什么，或者试试这个：

```
if ($this->request->is('post')) {
    if (!empty($this->request->data['Job']['mailcheck'])) {
        $this->redirect(array('action' => 'sendMails',$id));
    } else {
        $this->redirect(array('action' => 'sorted'));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:19:36.320

这足以：

```
if (!empty($this->request->data['Job']['mailcheck'])) {
    // yes, checkbox was selected
} else {
    // no, it was not selected
} 
```

# c# - 时间耦合与工作单元

> ID：16150588
> 
> 赞同：2
> 
> 时间：2013-04-22T15:14:08.207
> 
> 标签：c#, design-patterns

所以，正如已经[向我指出的](https://stackoverflow.com/questions/16148924/value-types-inferred-as-object-at-runtime-when-using-dynamic/16149405?noredirect=1#comment23075938_16149405)（我完全同意），[时间耦合](http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling/)是一种设计味道，通常以以下形式出现：

```
interface IDoSomething
{
    void Initialise();

    void DoSomethingThatOnlyWorksAfterInitialising();
} 
```

在上面的形式中，您可能可以做一些事情（通过构造函数注入或通过抽象工厂等）。

但是，**这如何适用于*工作单元*？**

我目前正处于我的 UoW 看起来有点像的欢乐混乱中

```
interface IUnitOfWork
{
    void Initialise(); // sorts out connection sharing/opening/yada

    void Rollback();

    void Commit();
} 
```

诚然，初始化仍然不应该存在。我设法通过`Enlist`在我的案例中调用该方法来说服自己。忽略这一点，**是否****考虑** **在*****时间耦合*****下？**`Rollback` **`Commit`**

 **** * *

## 进一步的想法

稍微思考了一下，是不是措辞（“时间耦合”）的选择是错误的，或者至少是我对措辞的解释？

在我看来，这种气味试图做的是让编码人员不要依赖某种形式的方法，这可能是违反直觉的，正如上面链接中的框架示例`Initialise`所指出的那样。`EndpointAddressBuilder`

但是，有效终止进一步使用该类的方法是否可以接受？像这样的方法`Dispose`显然有某种形式的*时间耦合*；打电话后尝试使用课程会给`Dispose`你带来问题，你应该知道得更好。`Commit`与,类似`Rollback`，我怀疑在其他情况下还有其他各种示例。

气味是否仅与*初始化耦合*有关（或其中一位博主可以提出的更好的词选择？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:19:57.650

`Initialize`应该返回一个可以回滚或提交的对象：

```
interface IUnitOfWorkFactory
{
     IUnitOfWork Create();
}

interface IUnitOfWork : IDisposable
{
    void Commit();
    void Rollback(); // should get called by Dispose if Commit was never called.
} 
```

此外，理想情况下，您`IUnitOfWork`应该扩展`IDisposable`，并且`Dispose`应该与`Rollback`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:45:42.267

**使用`abstract`基础和模板模式**

一般来说，如果正确的执行顺序是一个问题，请在一个`abstract`类中实现该顺序。至于`IUnitofWork`方法使它们`virtual`或`abstract`（视情况而定）并编写一个固定调用顺序的方法（因此，模板）-并且您不会使基类“实现”接口。此外，`abstract`基础可以声明任何接口的实现，然后推迟实现或提供默认实现。***

# android - Listview 上的通用图像加载器滞后

> ID：16150589
> 
> 赞同：1
> 
> 时间：2013-04-22T15:14:09.567
> 
> 标签：android, listview, lag, universal-image-loader

我已经确保我只有一个 ImageLoader 实例，所以我知道这不是问题，由于某种原因，它只会在显示从网络加载的全新图像时滞后。所以我假设它与 UI 卡顿的事实有关，因为它正在解码图像，但我虽然 Universal Image Loader 异步处理了所有事情。这是我的 BaseAdapter 的 getView 方法的内容。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    JSONObject thePost = null;
    try { 
        thePost = mPosts.getJSONObject(position).getJSONObject("data");
    } catch (Exception e) {
        System.out.println("errreoroer");
    }

    LinearLayout postItem = (LinearLayout) inflater.inflate(R.layout.column_post, parent, false);   

    String postThumbnailUrl = null;

    try {

        //parse thumbnail
        postThumbnailUrl = thePost.getString("thumbnail");          

    } catch (Exception e) {}        

    //grab the post view objects

    ImageView postThumbnailView = (ImageView)postItem.findViewById(R.id.thumbnail);

    if (!(postThumbnailUrl.equals("self") || postThumbnailUrl.equals("default") || postThumbnailUrl.equals("nsfw")))
        mImageLoader.displayImage(postThumbnailUrl, postThumbnailView);         

    return postItem;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:25:50.163

我认为您的问题不是 ImageLoader。事实上，您没有使用系统传递给您的 convertView，因此您根本没有回收视图，您只是在为列表的每一行添加一个新视图。

尝试更改您的`getView()`方法以使用 convertView：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LinearLayout postItem = convertView
    if(null == postItem){
        LayoutInflater inflater = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        postItem = (LinearLayout) inflater.inflate(R.layout.column_post, parent, false);   
    }

    JSONObject thePost = null;
    try { 
        thePost = mPosts.getJSONObject(position).getJSONObject("data");
    } catch (Exception e) {
        System.out.println("errreoroer");
    }
    String postThumbnailUrl = null;
    try {

        //parse thumbnail
        postThumbnailUrl = thePost.getString("thumbnail");          

    } catch (Exception e) {}        

    //grab the post view objects
    ImageView postThumbnailView = (ImageView)postItem.findViewById(R.id.thumbnail);
    if (!(postThumbnailUrl.equals("self") || postThumbnailUrl.equals("default") || postThumbnailUrl.equals("nsfw")))
        mImageLoader.displayImage(postThumbnailUrl, postThumbnailView);         

    return postItem;

} 
```

# c# - MVC C# 应用程序，百分比文本框与百分比数据库保存

> ID：16150590
> 
> 赞同：1
> 
> 时间：2013-04-22T15:14:12.460
> 
> 标签：c#, asp.net-mvc

我想知道实现以下内容的最简单方法是什么 -

我有一个文本框，用户可以输入百分比，该数字必须存储为除以 100。

示例：如果用户输入文本框 45.2，这将作为 .452 存储在数据库中。

在 MVC C# 应用程序中实现这一点的最简单方法是什么？

我在模型上有一个`PercentDisplay`属性和一个`Percent`属性。当模型返回控制器时，我除以`PercentDisplay`100 并将结果放入`Percent`中，但我想在没有额外属性的情况下执行此操作。

有什么建议么？有没有办法在视图中处理这个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:36:07.103

这里有 3 层和 2 个边界。

1.  视图控制器
2.  控制器模型

您应该从视图中的用户那里收到 45.2 的值。然后这将作为 45.2 到达控制器。

在控制器中，您应该将其转换为 0.452（使用辅助业务逻辑类）或通过模型将 45.2 发送到数据库以存储为 0.452。

您不应该在视图中处理转换。想象一下，如果您有超过 1 个视图。您将多次进行转换。这违背了目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:20:56.043

您可以更改属性的`get`操作`Percent`以进行强制转换和除法而不进行`set`操作。我无法真正为您提供示例，因为您没有提供执行转换和除法的代码。

另一方面，这里有一个例子：

```
public decimal Percent
{
    get
    {
        var p = decimal.Parse(PercentDisplay);
        return p / 100;
    }
} 
```

您可能想要包装解析，甚至可能使用它`TryParse`来确保安全。

# osgi - 从 JSF osgi bundle webapp 中的属性文件访问资源包

> ID：16150592
> 
> 赞同：0
> 
> 时间：2013-04-22T15:14:19.317
> 
> 标签：osgi, tomcat6, jsf-1.2, resourcebundle, properties-file

当我尝试读取 JSF 页面中的属性文件时，我从服务器收到 HTTP 500 错误。虽然从类文件中读取 Bundle 是有效的。

下面是我的示例 webapp 的结构，它是 Tomcat 中的一个 osgi 包。清单文件中的类路径是 web/WEB-INF/classes。所以资源包已经存在于类路径中

```
Sample
    META-INF  ---> MANIFEST.MF
    web             
        App
           home.jsp
        login.jsp
        index.html
        WEB-INF
           web.xml
           faces-config.xml
           classes-->myresource.properties
           lib------>packaged jar 
```

下面是我的 home.jsp 文件的内容，该文件位于 Sample/web/App 目录中。

```
<f:loadBundle var="bundle" basename="com.obj.colours" /> 
<f:loadBundle var="addonpages" basename="CustomAddonPages" />
.
.
<h:outputText value='#{brandingBundle["label.ManagementConsole"]}' />
<!-- <a href="../CustomReport.faces">Custom Reporting </a> -->

<!-- below part gives error and i have to use the above hard 
    coded way using anchor tag-->

<h:commandLink action="#{addonpages.Redirectpage}">            
      <h:outputText value="Custom Reporting"/>              
</h:commandLink> 
```

属性文件包含一行

```
 Redirectpage=../CustomReport.faces 
```

服务器的错误如下

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.lang.RuntimeException: javax.servlet.ServletException: #{addonpages.Redirectpage}: javax.faces.el.MethodNotFoundException: Redirectpage
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.serviceHelper(BundlePathAwareServiceHandler.java:254)
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.service(BundlePathAwareServiceHandler.java:197)
com.businessobjects.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:248)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.eclipse.equinox.servletbridge.BridgeServlet.service(BridgeServlet.java:220)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.businessobjects.pinger.TimeoutManagerFilter.doFilter(TimeoutManagerFilter.java:159)

root cause

javax.servlet.ServletException: #{addonpages.Redirectpage}: javax.faces.el.MethodNotFoundException: Redirectpage
javax.faces.webapp.FacesServlet.service(FacesServlet.java:225)
com.businessobjects.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:110)
com.businessobjects.http.servlet.internal.ServletLastFilterChainElement.service(ServletLastFilterChainElement.java:30)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:46)
com.businessobjects.webutil.boetrustguard.BOETrustValidateFilter.doFilter(BOETrustValidateFilter.java:45)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.webutil.internal.filters.BrowserRenderingModeFilter.doFilter(BrowserRenderingModeFilter.java:20)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.webutil.boetrustguard.BOETrustPrepareFilter.doFilter(BOETrustPrepareFilter.java:32)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.swd.shared.tracelog.TraceLogScopeFilter.doFilter(TraceLogScopeFilter.java:38)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.sdk.actionfilter.WorkflowFilter.doFilter(WorkflowFilter.java:45)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.swd.appcontext.RequestInitFilter.doFilter(RequestInitFilter.java:26)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.serviceHelper(BundlePathAwareServiceHandler.java:235)
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.service(BundlePathAwareServiceHandler.java:197)
com.businessobjects.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:248)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.eclipse.equinox.servletbridge.BridgeServlet.service(BridgeServlet.java:220)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.businessobjects.pinger.TimeoutManagerFilter.doFilter(TimeoutManagerFilter.java:159)

root cause

javax.faces.FacesException: #{addonpages.Redirectpage}: javax.faces.el.MethodNotFoundException: Redirectpage
com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:94)
javax.faces.component.UICommand.broadcast(UICommand.java:332)
javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:287)
javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:401)
com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:95)
com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:245)
com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:110)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:213)
com.businessobjects.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:110)
com.businessobjects.http.servlet.internal.ServletLastFilterChainElement.service(ServletLastFilterChainElement.java:30)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:46)
com.businessobjects.webutil.boetrustguard.BOETrustValidateFilter.doFilter(BOETrustValidateFilter.java:45)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.webutil.internal.filters.BrowserRenderingModeFilter.doFilter(BrowserRenderingModeFilter.java:20)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.webutil.boetrustguard.BOETrustPrepareFilter.doFilter(BOETrustPrepareFilter.java:32)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.swd.shared.tracelog.TraceLogScopeFilter.doFilter(TraceLogScopeFilter.java:38)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.sdk.actionfilter.WorkflowFilter.doFilter(WorkflowFilter.java:45)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.swd.appcontext.RequestInitFilter.doFilter(RequestInitFilter.java:26)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.serviceHelper(BundlePathAwareServiceHandler.java:235)
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.service(BundlePathAwareServiceHandler.java:197)
com.businessobjects.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:248)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.eclipse.equinox.servletbridge.BridgeServlet.service(BridgeServlet.java:220)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.businessobjects.pinger.TimeoutManagerFilter.doFilter(TimeoutManagerFilter.java:159)

root cause

javax.faces.el.MethodNotFoundException: Redirectpage
com.sun.faces.el.MethodBindingImpl.method(MethodBindingImpl.java:219)
com.sun.faces.el.MethodBindingImpl.invoke(MethodBindingImpl.java:144)
com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:92)
javax.faces.component.UICommand.broadcast(UICommand.java:332)
javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:287)
javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:401)
com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:95)
com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:245)
com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:110)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:213)
com.businessobjects.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:110)
com.businessobjects.http.servlet.internal.ServletLastFilterChainElement.service(ServletLastFilterChainElement.java:30)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:46)
com.businessobjects.webutil.boetrustguard.BOETrustValidateFilter.doFilter(BOETrustValidateFilter.java:45)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.webutil.internal.filters.BrowserRenderingModeFilter.doFilter(BrowserRenderingModeFilter.java:20)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.webutil.boetrustguard.BOETrustPrepareFilter.doFilter(BOETrustPrepareFilter.java:32)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.swd.shared.tracelog.TraceLogScopeFilter.doFilter(TraceLogScopeFilter.java:38)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.sdk.actionfilter.WorkflowFilter.doFilter(WorkflowFilter.java:45)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.swd.appcontext.RequestInitFilter.doFilter(RequestInitFilter.java:26)
com.businessobjects.http.servlet.internal.FilterRegistration.doFilter(FilterRegistration.java:72)
com.businessobjects.http.servlet.internal.filter.FilterChainImpl.doFilter(FilterChainImpl.java:43)
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.serviceHelper(BundlePathAwareServiceHandler.java:235)
com.businessobjects.http.servlet.internal.BundlePathAwareServiceHandler.service(BundlePathAwareServiceHandler.java:197)
com.businessobjects.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:248)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.eclipse.equinox.servletbridge.BridgeServlet.service(BridgeServlet.java:220)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
com.businessobjects.pinger.TimeoutManagerFilter.doFilter(TimeoutManagerFilter.java:159) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:50:05.773

You get a MethodNotFoundException so the class is found but the method does not exist. Maybe the method must be public?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T04:38:46.500

# **解决方案**

我真的很抱歉首先犯了一个严重的错误，然后回答我自己的问题。如果我向您展示了整个页面源代码，您的专家可能已经猜对了。

`It is not possible to use h:commandLink when NOT present inside the form element and i should have used h:outputLink`

但是，当我第一次修改页面并使用 commandLink 时，抛出的错误并不那么清楚，正如 Balazs 回答的那样，我必须利用方法表达式在 commandLink 的 action 属性中使用。所以我继续创建自己的 ResourceBundle 类，然后在这个资源包中读取我的 .properties，但我仍然面临同样的问题。

我尝试的下一件事不是修改供应商提供的 webapp，而是在 eclipse 中创建了一个示例应用程序并在那里进行了测试。而这一次，Eclipse 足够大方地显示带有 commandLink 空间的页面，显示该行 - `commandLink can only be used when present inside form element`

所以现在我正在使用 outputLink 并加载 .properties 文件包，它工作得很好。

# html - 使用 HTML File API 打开磁盘上的任意文件

> ID：16150593
> 
> 赞同：0
> 
> 时间：2013-04-22T15:14:20.050
> 
> 标签：html, fileapi

这是否可以使用 HTML5 File API 以编程方式打开磁盘上的任何文件，例如首先添加这些参数？

```
open -a Chromium --args --allow-file-access-from-files --disable-web-security 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:19:10.267

首先，您必须使用标志 --allow-file-access-from-files 打开 Chrome 确保在使用标志打开之前关闭所有 chrome 窗口。

然后使用 javascript 你必须使用 XMLHttpRequest 对象。像这样的东西：

```
xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET","file.txt",false);
xmlhttp.send();
var result = xmlhttp.responseText; 
```

结果，您将拥有文件的内容。

如果它是一个 xml，您可以使用自动解析它

```
var xmlDom = xmlhttp.responseXML; 
```

文件路径必须相对于您正在打开的 html 文件。

# svg - 如何放置 s并排？

> ID：16150597
> 
> 赞同：1
> 
> 时间：2013-04-22T15:14:25.270
> 
> 标签：svg

我想在 SVG 中将填充的正方形彼此相邻放置，但它们之间有细线。如何消除这些线条？

例子：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="3cm" height="3cm" viewBox="0 0 10 10">
    <rect x="0" y="0" width="1" height="1" fill="black" />
    <rect x="2" y="0" width="1" height="1" fill="black" />
    <rect x="4" y="0" width="1" height="1" fill="black" />
    <rect x="6" y="0" width="1" height="1" fill="black" />
    <rect x="8" y="0" width="1" height="1" fill="black" />
    <rect x="0" y="1" width="1" height="1" fill="black" />
    <rect x="2" y="1" width="1" height="1" fill="black" />
    <rect x="3" y="1" width="1" height="1" fill="black" />
    <rect x="4" y="1" width="1" height="1" fill="black" />
    <rect x="5" y="1" width="1" height="1" fill="black" />
    <rect x="6" y="1" width="1" height="1" fill="black" />
    <rect x="7" y="1" width="1" height="1" fill="black" />
    <rect x="9" y="1" width="1" height="1" fill="black" />
    <rect x="0" y="2" width="1" height="1" fill="black" />
    <rect x="2" y="2" width="1" height="1" fill="black" />
    <rect x="8" y="2" width="1" height="1" fill="black" />
    <rect x="0" y="3" width="1" height="1" fill="black" />
    <rect x="1" y="3" width="1" height="1" fill="black" />
    <rect x="3" y="3" width="1" height="1" fill="black" />
    <rect x="5" y="3" width="1" height="1" fill="black" />
    <rect x="6" y="3" width="1" height="1" fill="black" />
    <rect x="8" y="3" width="1" height="1" fill="black" />
    <rect x="9" y="3" width="1" height="1" fill="black" />
    <rect x="0" y="4" width="1" height="1" fill="black" />
    <rect x="1" y="4" width="1" height="1" fill="black" />
    <rect x="5" y="4" width="1" height="1" fill="black" />
    <rect x="6" y="4" width="1" height="1" fill="black" />
    <rect x="8" y="4" width="1" height="1" fill="black" />
    <rect x="0" y="5" width="1" height="1" fill="black" />
    <rect x="3" y="5" width="1" height="1" fill="black" />
    <rect x="4" y="5" width="1" height="1" fill="black" />
    <rect x="9" y="5" width="1" height="1" fill="black" />
    <rect x="0" y="6" width="1" height="1" fill="black" />
    <rect x="5" y="6" width="1" height="1" fill="black" />
    <rect x="6" y="6" width="1" height="1" fill="black" />
    <rect x="8" y="6" width="1" height="1" fill="black" />
    <rect x="0" y="7" width="1" height="1" fill="black" />
    <rect x="4" y="7" width="1" height="1" fill="black" />
    <rect x="5" y="7" width="1" height="1" fill="black" />
    <rect x="6" y="7" width="1" height="1" fill="black" />
    <rect x="8" y="7" width="1" height="1" fill="black" />
    <rect x="9" y="7" width="1" height="1" fill="black" />
    <rect x="0" y="8" width="1" height="1" fill="black" />
    <rect x="1" y="8" width="1" height="1" fill="black" />
    <rect x="2" y="8" width="1" height="1" fill="black" />
    <rect x="7" y="8" width="1" height="1" fill="black" />
    <rect x="8" y="8" width="1" height="1" fill="black" />
    <rect x="0" y="9" width="1" height="1" fill="black" />
    <rect x="1" y="9" width="1" height="1" fill="black" />
    <rect x="2" y="9" width="1" height="1" fill="black" />
    <rect x="3" y="9" width="1" height="1" fill="black" />
    <rect x="4" y="9" width="1" height="1" fill="black" />
    <rect x="5" y="9" width="1" height="1" fill="black" />
    <rect x="6" y="9" width="1" height="1" fill="black" />
    <rect x="7" y="9" width="1" height="1" fill="black" />
    <rect x="8" y="9" width="1" height="1" fill="black" />
    <rect x="9" y="9" width="1" height="1" fill="black" />
</svg> 
```

我的名声不允许我发布图片，但您可以仔细查看我的头像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:52:12.310

您在工作中看到了抗锯齿。

将 shape-rendering="crispEdges" 添加到根`<svg>`元素（或者添加到每个矩形）以获得您想要的显示。

# ruby - 浏览器窗口可能已关闭。(Selenium::WebDriver::Error::UnknownError)

> ID：16150599
> 
> 赞同：0
> 
> 时间：2013-04-22T15:14:27.477
> 
> 标签：ruby, selenium, cucumber, capybara, selenium-webdriver

一起运行时我有多个功能会抛出此错误。如果我自己运行场景，则没有问题。我认为问题是在测试运行期间会生成弹出窗口并且没有正确关闭。我在 After 钩子中有代码，它会关闭所有打开的窗口，除了打开的第一个窗口。

错误：**会话 [2c50a228-3ad7-a544-a6ca-5d173b86bc86] 没有驱动程序。浏览器窗口可能已关闭。(Selenium::WebDriver::Error::UnknownError)**

我在代码中添加了一堆打印语句来获取当前状态：
After:Session -> #<>Capybara::Session:0x00000100f811b8>
Before:Driver -> selenium
Before:Session Object -#<>Capybara::Session :0x00000100f811b8>
之前：（开始）驱动程序对象#<>Capybara::Selenium::Driver:0x000001028ad790>

在这个特定场景失败之前的场景，这一定是罪魁祸首，但为什么呢？谁能指出我正确的方向？

**钩后**

 `````
#assume ONLY last window opened is to be closed
page.driver.browser.switch_to.window(page.driver.browser.window_handles.last)
page.execute_script "window.close();"

#switch back to first window opened, make it the default window now
page.driver.browser.switch_to.window(page.driver.browser.window_handles.first) 
```` 

 `***环境：capybara (2.0.3)
cucumber (1.1.9)
selenium-webdriver (2.29.0)
ruby​​ 1.9.3p0***`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:16:02.873

```
require 'selenium-webdriver'

driver = Selenium::WebDriver.for :firefox
driver.get "https://www.google.co.in/"
address = driver.find_element(:link_text, "Gmail").attribute('href')
driver.execute_script( "window.open()" )
p driver.window_handles.length
p driver.window_handles.first #=> "{f17eac79-daf9-4a6c-a1ff-1b524fef9faf}"
driver.switch_to.window( driver.window_handles.last )
driver.get address
driver.execute_script "window.close()"
driver.execute_script "window.close()"
# => Window not found. The browser window may have been closed. (Selenium::WebDriver::Error::NoSuchWindowError) 
```

在上面的代码中，我只是尝试重新生成错误，它发生了。`Error`当我试图关闭一个已经关闭、不存在的窗口时，这是非常合乎逻辑的。

现在我想这样调试：

```
p driver.browser.window_handles.length # if this is 0,then below line obvious throw error.
page.driver.browser.switch_to.window(page.driver.browser.window_handles.last)
page.execute_script "window.close();"
p driver.browser.window_handles.length # if this is 0,then below line obvious throw error.
page.driver.browser.switch_to.window(page.driver.browser.window_handles.first) 
```

现在调试并让我知道你的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T22:43:39.063

The solution for this is to maximise the window at the first place. I've not been able to find a way to maximise the window yet. In the middle of the test i manually click the maximise browser button and the test runs perfectly.

[https://github.com/fahenao/_bot](https://github.com/fahenao/_bot)``

# javascript - 替代 ALLOW_KEYBOARD_INPUT javascript 全屏

> ID：16150601
> 
> 赞同：12
> 
> 时间：2013-04-22T15:14:30.323
> 
> 标签：javascript, fullscreen

我一直在互联网上搜索为什么我的全屏 javascript 不能在 Safari 中工作，但在 webkit 浏览器 Chrome 中工作的原因。看来 safari 不`element.ALLOW_KEYBOARD_INPUT`支持`webkitRequestFullScreen`.

```
function cancelFullScreen(el) {
    var requestMethod = el.cancelFullScreen || el.webkitCancelFullScreen || el.mozCancelFullScreen || el.exitFullscreen;
    if (requestMethod) { // cancel full screen.
        requestMethod.call(el);
    } else if (typeof window.ActiveXObject !== "undefined") { // Older IE.
        var wscript = new ActiveXObject("WScript.Shell");
        if (wscript !== null) {
            wscript.SendKeys("{F11}");
        }
    }
}

function requestFullScreen(el) {
    // Supports most browsers and their versions.
    var requestMethod = el.requestFullScreen || el.webkitRequestFullScreen(el.ALLOW_KEYBOARD_INPUT) || el.mozRequestFullScreen || el.msRequestFullScreen;

    if (requestMethod) { // Native full screen.
        requestMethod.call(el);
    } else if (typeof window.ActiveXObject !== "undefined") { // Older IE.
        var wscript = new ActiveXObject("WScript.Shell");
        if (wscript !== null) {
            wscript.SendKeys("{F11}");
        }
    }
    return false
}

function toggleFull() {
    var elem = document.body; // Make the body go full screen.
    var isInFullScreen = (document.fullScreenElement && document.fullScreenElement !== null) ||  (document.mozFullScreen || document.webkitIsFullScreen);

    if (isInFullScreen) {
        cancelFullScreen(document);
    } else {
        requestFullScreen(elem);
    }
    return false;
} 
```

有人知道让 safari 接受全屏但仍能处理键盘输入的方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-21T17:44:20.043

根据 Apple 的[文档](http://developer.apple.com/library/safari/#documentation/WebKit/Reference/ElementClassRef/Element/Element.html)，这应该可以在 Safari 5.1 及更高版本中使用，但显然不能。我向 Apple 提交了一份错误报告（他们没有公开），回复如下：

> 工程部门已根据以下情况确定此问题的行为符合预期：出于安全原因，我们有意禁用全屏键盘访问。

我已回复要求他们至少更新文档并以某种方式检测到缺乏功能支持。如果我得到回复，我会在这里更新。

不幸的是，甚至没有进行特征检测的好方法，因为`element.ALLOW_KEYBOARD_INPUT`它是在 Safari 中定义的，并且带有该标志的函数调用不会引发错误。剩下的唯一选择是解析用户代理字符串（试试[这个库](https://github.com/component/user-agent-parser)）。

显然，Apple 尚未记录哪个版本支持此功能，但据此[，](https://stackoverflow.com/questions/8427413/webkitrequestfullscreen-fails-when-passing-element-allow-keyboard-input-in-safar)它从 v5.1.2 开始停止工作。如果 5.1 甚至可以正常工作，那将留下极少数使用未修补的人。所以它甚至可能不值得检测版本。

作为后备方案，我会通过将 CSS 高度和宽度设置为 100% 并将位置设置为“固定”或“绝对”来扩展所需的 DOM 元素以填充浏览器窗口。

**更新：**看起来文档已更正，不再提及该`ALLOW_KEYBOARD_INPUT`标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-25T21:17:08.257

这已在[Safari 10.1](https://developer.apple.com/library/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_1.html)中修复！

在“Safari 浏览器行为”部分下。

# c# - StreamReader NullReferenceException

> ID：16150606
> 
> 赞同：3
> 
> 时间：2013-04-22T15:14:53.353
> 
> 标签：c#, nullreferenceexception, streamreader

我正在制作一个函数，它将从 StreamReader 中获取行数，不包括注释（以“//”开头的行）和新行。

这是我的代码：

```
private int GetPatchCount(StreamReader reader)
    {
        int count = 0;

            while (reader.Peek() >= 0)
            {
                string line = reader.ReadLine();
                if (!String.IsNullOrEmpty(line))
                {
                    if ((line.Length > 1) && (!line.StartsWith("//")))
                    {
                        count++;
                    }
                }
            }

        return count;
    } 
```

我的 StreamReader 的数据是：

```
// Test comment 
```

但我收到一个错误，“对象引用未设置为对象的实例。” 有没有办法解决这个错误？

**编辑** 原来当我的 StreamReader 为空时会发生这种情况。因此，使用 musefan 和史密斯先生建议的代码，我想出了这个：

```
private int GetPatchCount(StreamReader reader, int CurrentVersion)
    {
        int count = 0;
            if (reader != null)
            {
            string line;
            while ((line = reader.ReadLine()) != null)
                if (!String.IsNullOrEmpty(line) && !line.StartsWith("//"))
                    count++;
            }
        return count;
    } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:17:24.480

没有必要`Peek()`，这实际上也可能是问题所在。你可以这样做：

```
string line = reader.ReadLine();
while (line != null)
{
    if (!String.IsNullOrEmpty(line) && !line.StartsWith("//"))
    {
        count++;
    }
    line = reader.ReadLine();
} 
```

当然，如果您`StreamReader`为空，那么您就有问题了，但是仅凭示例代码不足以确定这一点-您需要对其进行调试。应该有大量的调试信息让您确定哪个对象实际上是空的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:16:49.840

听起来你的`reader`对象是`null`：

您可以通过执行以下操作检查阅读器是否为空：

```
if (reader == null) {
   reader = new StreamReader("C:\\FilePath\\File.txt");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:26:46.090

musefan 建议代码的稍微整洁的变体；只是一个 ReadLine() 代码。+1 建议删除长度检查 btw。

```
private int GetPatchCount(StreamReader reader)
{
    int count = 0;
    string line;
    while ((line = reader.ReadLine()) != null)
        if (!String.IsNullOrEmpty(line) && !line.StartsWith("//"))
            count++;
    return count;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:34:05.557

您的代码没有足够的信息来解决您的问题。根据我的假设，我使用 VS 2010 制作了一个小型应用程序，它运行良好。我相信您的代码与 streamReader 有问题。如果 streamReader 为空，您的代码将抛出“未将对象引用设置为对象的实例。” 您应该检查 streamReader 不为空并确保 streamReader 可用。

You can reference code below. With make sure the TextFile1.txt existing at D:\ Hope this help.

```
namespace ConsoleApplication1
{
using System;
using System.IO;

class Program
{
    static void Main(string[] args)
    {
        using (StreamReader streamReader = new StreamReader(@"D:\\TextFile1.txt"))
        {
            int count = GetPatchCount(streamReader);
            Console.WriteLine("NUmber of // : {0}",  count);
        }

        Console.ReadLine();
    }

    private static int GetPatchCount(StreamReader reader)
    {
        int count = 0;

        while (reader.Peek() >= 0)
        {
            string line = reader.ReadLine();
            if (!String.IsNullOrEmpty(line))
            {
                if ((line.Length > 1) && (!line.StartsWith("//")))
                {
                    count++;
                }
            }
        }

        return count;
    }
}
} 
```

# c# - 将数据传递给 nunit 测试用例

> ID：16150608
> 
> 赞同：1
> 
> 时间：2013-04-22T15:15:07.973
> 
> 标签：c#, nunit

如何将数据从 testrunner 传递到 unittest？

例如主机的`output path`或？`interface configuration`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T05:03:35.877

你可能已经走了一条不同的路，但我想分享一下。在 NUnit 的 2.5 后版本中，实现了通过外部源驱动测试用例的能力。我使用 CSV 文件做了一个简单示例的演示。

CSV 包含我的两个测试输入和预期结果。所以第一个是1,1,2，依此类推。

**代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.IO;
using System.Text;
using System.Threading.Tasks;
using NUnit.Framework;
namespace NunitDemo
{
    public class AddTwoNumbers
    {
        private int _first;
        private int _second;

        public int AddTheNumbers(int first, int second)
        {
            _first = first;
            _second = second;

            return first + second;
        }
    }

    [TestFixture]
    public class AddTwoNumbersTest 
    {

        [Test, TestCaseSource("GetMyTestData")]
        public void AddTheNumbers_TestShell(int first, int second, int expectedOutput)
        {
            AddTwoNumbers addTwo = new AddTwoNumbers();
            int actualValue = addTwo.AddTheNumbers(first, second);

            Assert.AreEqual(expectedOutput, actualValue, 
                string.Format("AddTheNumbers_TestShell failed first: {0}, second {1}", first,second));
        }

        private IEnumerable<int[]> GetMyTestData()
        {
            using (var csv = new StreamReader("test-data.csv"))
            {
                string line;
                while ((line = csv.ReadLine()) != null)
                {
                    string[] values = line.Split(',');
                    int first = int.Parse(values[0]);
                    int second = int.Parse(values[1]);
                    int expectedOutput = int.Parse(values[2]);
                    yield return new[] { first, second, expectedOutput };
                }
            }
        }
    }
} 
```

然后，当您使用 NUnit UI 运行它时，它看起来像（出于示例目的，我包含了一个失败：

![在此处输入图像描述](https://i.stack.imgur.com/TAfSt.png)

# c++ - 删除 [] 导致的堆损坏错误

> ID：16150613
> 
> 赞同：2
> 
> 时间：2013-04-22T15:15:41.587
> 
> 标签：c++, c++11, mfc, cstring, heap-corruption

所以我是 C++ 的一个相当大的新人，所以我确信这是一个相对简单的问题，但是我有一个遗留的 C++ 应用程序我正在尝试跟踪堆损坏问题并将其跟踪到这个函数：

```
void LTrimZeros(CString *pstr)
{
    char *psz1;
    char *psz2;

    if ( pstr->GetLength() == 0 )
        return;

    psz1 = new char[pstr->GetLength() + 1];
    psz2 = psz1;

    strcpy_s( psz2, strlen(psz2), (const char *) *pstr );

    while ( *psz2 == '0' )
    {
        psz2++;
    }

    *pstr = psz2;

    delete [] psz1;

    return;
} 
```

当它尝试删除`psz1`时，会引发堆损坏错误。再说一次，我对 C++ 还是很陌生，所以我不想尝试解决这个问题并意外引入内存泄漏，所以我想我会问专家。相同功能的替代解决方案也很好，因为这个应用程序最初是用 c++4 编写的，但现在升级到 c++11（简要解释为什么这会导致堆损坏会有很大帮助）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:19:32.540

`strlen(psz2)`正在读取未初始化的内存，因此可能会超出数组的末尾。这意味着您传递给的长度`strcpy_s`将是不可预测的，并且可能导致您写入超出为`psz1`.

假设您的函数的结尾是有效的（我对[CString](http://msdn.microsoft.com/en-us/library/aa300688%28v=vs.60%29.aspx)不太熟悉可以肯定地说），您可以简单地将您的`strcpy_s`行更改为

```
strcpy_s( psz2, pstr->GetLength() + 1, (const char *) *pstr ); 
```

您可能会在使用 win32 字符串处理函数时遇到问题，这些函数根据`UNICODE`和`_UNICODE`定义在 8 位和 16 位字符之间切换。我同意 Alok Save 和其他人的观点，即切换到使用`std::string`会更清晰、更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:21:03.607

来自 MSDN：

```
errno_t strcpy_s(
   char *strDestination,
   size_t numberOfElements,
   const char *strSource 
); 
```

在这里，在您的代码中，您正在调用`strlen`一个未初始化的数组，您需要修复它（传递**目标缓冲区可以存储的最大元素数**）：

```
strcpy_s( psz2, strlen(psz2), (const char *) *pstr ); 
```

# java - 文件似乎总是空的

> ID：16150617
> 
> 赞同：0
> 
> 时间：2013-04-22T15:15:58.413
> 
> 标签：java, file-io, stream

好吧，我真的被我写的一些代码弄糊涂了。它是一个 DataSetter（不知道它的更好名称......），并且具有更改我的数据文件（data.txt）中数据的方法。此数据具有以下格式：`@key=value (eg. @version=1.0)`. 现在，我尝试运行这行代码：

```
new DataSetter().setValue("version", "1.1"); 
```

它只是清除文件。这几乎就是它所做的一切。现在，我认为它清除了文件，因为它创建了一个新文件，该文件完全为空但具有相同的名称。这是我的代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Scanner;

/**
 * This class contains methods to set specific data in the data.txt file. <br>
 * The data is rewritten every time a new value is set.
 * 
 * @author Casper van Battum
 *
 */
public class DataSetter {

    private static final File DATA_FILE = new File("resources/data.txt");
    private static final String lineFormat = "@%s=%s";

    private FileOutputStream out;
    private DataReader reader = new DataReader();
    private HashMap<String, String> dataMap = reader.getDataMap();
    private Scanner scanner;

    public DataSetter() {

        try {
            out = new FileOutputStream(DATA_FILE, false);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

    }

    public void setValue(String key, String newValue) {
        openDataFile();

        String oldLine = String.format(lineFormat, key, dataMap.get(key));
        dataMap.put(key, newValue);
        String newLine = String.format(lineFormat, key, newValue);

        try {
            replace(oldLine, newLine);
        } catch (IOException e) {
            e.printStackTrace();
        }

        closeDataFile();

    }

    private void replace(String oldLine, String newLine) throws IOException {
        ArrayList<String> tmpData = new ArrayList<String>();
        while (scanner.hasNextLine()) {
            String currentLine = scanner.nextLine();
            tmpData.add((currentLine == oldLine) ? newLine : currentLine);

        }

        out.write(new String().getBytes());

        String sep = System.getProperty("line.separator");
        StringBuffer sb = new StringBuffer();
        for (String string : tmpData) {
            sb.append(string + sep);

        }

        FileWriter writer = new FileWriter(DATA_FILE);
        String outString = sb.toString();
        writer.write(outString);
        writer.close();

    }

    private void openDataFile() {
        try {
            scanner = new Scanner(DATA_FILE);
        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
        }

    }

    private void closeDataFile() {
        scanner.close();

    }

} 
```

所以在运行 setValue() 方法之后，我只有一个空文件......我真的不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:36:31.723

您正在使用

```
new FileOutputStream(DATA_FILE, false) 
```

因此，当您输出`tmpData` `ArrayList`从扫描仪读取的元素时，不会写入任何内容。

```
ArrayList<String> tmpData = new ArrayList<String>();
while (scanner.hasNextLine()) {
   String currentLine = scanner.nextLine();    // never gets called
   ...
} 
```

更新文本文件的典型策略是使用旧文件的内容 ( [File#renameTo](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#renameTo%28java.io.File%29) ) 创建一个临时文件，将数据写入文件，然后在关闭任何打开的流到正在读取的文件后删除临时文件。

# ext.net - 在动态网格中添加分页时出错？

> ID：16150620
> 
> 赞同：0
> 
> 时间：2013-04-22T15:16:04.713
> 
> 标签：ext.net

我创建了一个动态网格，但是在尝试添加分页工具栏时，我收到“运行时错误-”未定义为空或不是对象”。

//ascx代码

```
<%@ Control Language="C#" ClassName="Defatult3UserContorl" %>
<%@ Import Namespace="System.Collections.Generic" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<%@ Import Namespace="System.Data" %>
<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    private DataTable GetDataTable()
    {
        DataTable table = new DataTable();

        table.Columns.AddRange(new DataColumn[] {
            new DataColumn("Company")   { ColumnName = "Company",    DataType = typeof(string) },
            new DataColumn("Price")     { ColumnName = "Price",      DataType = typeof(double) },
            new DataColumn("Change")    { ColumnName = "Change",     DataType = typeof(double) },
            new DataColumn("PctChange") { ColumnName = "PctChange",  DataType = typeof(double) },
            new DataColumn("PctChange") { ColumnName = "LastChange", DataType = typeof(DateTime) }
        });

        foreach (object[] obj in this.Data)
        {
            table.Rows.Add(obj);
        }

        return table;
    }
    private object[] Data
    {
        get
        {
            DateTime now = DateTime.Now;

            return new object[]
            {
                new object[] { "3m Co", 71.72, 0.02, 0.03, now },
                new object[] { "Alcoa Inc", 29.01, 0.42, 1.47, now },
                new object[] { "Altria Group Inc", 83.81, 0.28, 0.34, now },
                new object[] { "American Express Company", 52.55, 0.01, 0.02, now },
                new object[] { "American International Group, Inc.", 64.13, 0.31, 0.49, now },
                new object[] { "AT&T Inc.", 31.61, -0.48, -1.54, now },
                new object[] { "Boeing Co.", 75.43, 0.53, 0.71, now },
                new object[] { "Caterpillar Inc.", 67.27, 0.92, 1.39, now },
                new object[] { "Citigroup, Inc.", 49.37, 0.02, 0.04, now },
                new object[] { "E.I. du Pont de Nemours and Company", 40.48, 0.51, 1.28, now },
                new object[] { "Exxon Mobil Corp", 68.1, -0.43, -0.64, now },
                new object[] { "General Electric Company", 34.14, -0.08, -0.23, now },
                new object[] { "General Motors Corporation", 30.27, 1.09, 3.74, now },
                new object[] { "Hewlett-Packard Co.", 36.53, -0.03, -0.08, now },
                new object[] { "Honeywell Intl Inc", 38.77, 0.05, 0.13, now },
                new object[] { "Intel Corporation", 19.88, 0.31, 1.58, now },
                new object[] { "International Business Machines", 81.41, 0.44, 0.54, now },
                new object[] { "Johnson & Johnson", 64.72, 0.06, 0.09, now },
                new object[] { "JP Morgan & Chase & Co", 45.73, 0.07, 0.15, now },
                new object[] { "McDonald\"s Corporation", 36.76, 0.86, 2.40, now },
                new object[] { "Merck & Co., Inc.", 40.96, 0.41, 1.01, now },
                new object[] { "Microsoft Corporation", 25.84, 0.14, 0.54, now },
                new object[] { "Pfizer Inc", 27.96, 0.4, 1.45, now },
                new object[] { "The Coca-Cola Company", 45.07, 0.26, 0.58, now },
                new object[] { "The Home Depot, Inc.", 34.64, 0.35, 1.02, now },
                new object[] { "The Procter & Gamble Company", 61.91, 0.01, 0.02, now },
                new object[] { "United Technologies Corporation", 63.26, 0.55, 0.88, now },
                new object[] { "Verizon Communications", 35.57, 0.39, 1.11, now },
                new object[] { "Wal-Mart Stores, Inc.", 45.45, 0.73, 1.63, now }
            };
        }
    }
    private GridPanel createDynamicGrid()
    {
        Store store1 = new Store();
        GridPanel grid = new GridPanel();
        Ext.Net.Model model = new Model();
        for (int i = 0; i < 2; i++)
        {
            ModelField modelField = new ModelField();
            if (i == 0)
                modelField.Name = "Company";
            else
                modelField.Name = "Price";

            model.Fields.Add(modelField);

        }

        store1.Model.Add(model);
        store1.DataSource = this.GetDataTable();
        grid.Store.Add(store1);
        grid.SelectionModel.Add(new RowSelectionModel { Mode = SelectionMode.Single });
        grid.ColumnModel.Columns.Add(new ColumnBase[] { 
            new Column 
            {
                Text = "Company",
                DataIndex = "Company",
                Flex = 1
            },
            new Column
            {
                Text = "Price",
                DataIndex = "Price"

            }
        });
PagingToolbar pagging=new PagingToolbar();
    grid.BottomBar.Add(pagging);

        return grid;
    }

    protected void btnSearch_Click(object sender, DirectEventArgs e)
    {
        createDynamicGrid().Render(this.frmGrid, RenderMode.AddTo);
    }
</script>

<ext:FormPanel ID="frmPanel1" runat="server">
    <Items>
        <ext:Button runat="server" ID="btnSearch" Text="Search" Icon="FeedMagnify" X="150"
            Y="10">
            <DirectEvents>
                <Click OnEvent="btnSearch_Click" />
            </DirectEvents>
        </ext:Button>
        <ext:FormPanel ID="frmGrid" runat="server">
            <Items>
            </Items>
        </ext:FormPanel>
    </Items>
</ext:FormPanel> 
```

//aspx页面

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>
<%@ Register TagName="Table" TagPrefix="uc" Src="~/MiscExamples/Defatult3UserContorl.ascx" %>
<!DOCTYPE html>
<html>
<head id="Head1" runat="server">
    <title>Ext.NET Examples</title>

    <script runat="server">

    </script>

</head>
<body>
    <form id="form1" runat="server">
    <ext:ResourceManager ID="ResourceManager1" runat="server" />
    <ext:FormPanel ID="frmPanel1" runat="server">
        <Content>
            <uc:Table runat="server" ID="SearchTable" title="Search Table" />
        </Content>
    </ext:FormPanel>
    </form>
</body>
</html> 
```

在上面的示例中，我有一个用户控制，我在其中动态创建 GridPanel。在网格面板中，我想在一页中使用 10 条记录进行分页。但是在尝试添加 pagingToolbar "PagingToolbar paging=new PagingToolbar(); grid.BottomBar.Add(pagging);" 它向我抛出运行时错误。你能帮帮我吗？感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T11:25:25.157

请添加以下设置：

```
Store store1 = new Store();
store1.ID = "Store1";
store1.PageSize = 10; 
```

# sass - 从 SASS mixin 中访问父选择器

> ID：16150621
> 
> 赞同：6
> 
> 时间：2013-04-22T15:16:10.893
> 
> 标签：sass, compass-sass, css

我已经使用 display:inline-block 为按钮设置了一个 mixin。我正在尝试找到最终将使用 mixim 的任何类的父类，因此我可以在那里添加 font-size: 0px 行以确保我不需要对我的 HTML 进行调整以避免不需要的每个按钮之间的空间。

这是一个例子......我想要。父类接收 font-size: 0px 行。

```
@mixin button() {
    display:inline-block;
    font-size: 1em;
    //other stuff to make a pretty button
    && { font-size: 0px; }
}

.parent{
    .child {
        @include button();
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-03T15:23:36.057

从 Sass 3.4 开始，这现在是可能的。

```
@mixin parent {

  @each $selector in & {

    $l: length($selector);

    @if ($l == 1) {
      @error "Used parent mixin on a top-level selector";
    } @else {

      $parent: nth($selector,1);
      @for $i from 2 to $l {
        $parent: append($parent,nth($selector,$i));
      }

      @at-root #{$parent} {
        @content;
      }

    }
  }
}

// Use
.grandparent {
  .parent{
      .child {
        font-size: 1em;
          @include parent {
            font-size: 0px;
          }
      }
  }
}

// Result
.grandparent .parent .child {
  font-size: 1em;
}
.grandparent .parent {
  font-size: 0px;
}

// Errors:
.root {
  @include parent {
    content: "Won't work";
  }
}
.grandparent .parent, .root {
  @include parent {
    content: "Also won't work";
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T15:38:44.023

不，这是不可能的。不过，您可以执行以下操作：

```
@mixin button($child: '.child') {
    font-size: 0px;
    //other stuff to make a pretty button

    #{$child} {
        display:inline-block;
        font-size: 1em;
    }
}

.parent{
    @include button();
} 
```

输出：

```
.parent {
  font-size: 0px;
}
.parent .child {
  display: inline-block;
  font-size: 1em;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:15:36.273

有一个XXX！CSS 4 规范草案中的选择器，它将按照您喜欢的方式运行。如果选择器匹配，它会宣布 CSS 样式声明的主题

所以如果你有这个选择器

```
.a > .b! > .c 
```

例如，它将为此匹配

```
<div class="a">
    <div class="b">
        <div class="c">
        </div>
    </div>
</div> 
```

但是样式声明不会在 生效`.c`，而是在生效`.b`，因为我用感叹号声明，这个元素应该是样式 [http://dev.w3.org/csswg/selectors4/#subject的主题](http://dev.w3.org/csswg/selectors4/#subject)

您现在无法立即使用它。但是有一个 jQuery 插件，它是一个 polyfill。[http://dev.w3.org/csswg/selectors4/](http://dev.w3.org/csswg/selectors4/)

另请参阅此堆栈：[是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector/7049832#comment22921973_7049832)

如何申请？好吧，我在 SASS 中并不确切知道，但在 LESS 中它会是

```
*! > & {
    /* ... */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-09T00:18:08.717

虽然 Karol 的答案近乎完美，但它没有考虑伪元素或伪选择器。此外，如果使用多个[复杂选择器](https://drafts.csswg.org/selectors-4/#complex)，则会重复代码。我想出了一个简化版本：

```
@mixin parent {
    $parents: ();
    $parent: '';

    @each $selector in & {
        $length: length($selector);
        $index: 0;
        $last-selector: nth($selector, $length);

        @if ($length == 1) {
            @error "Used parent mixin on a top-level selector";
        } @else {
            $index: str-index($last-selector, '::');

            @if ($index) {
                $last-selector: str-slice($last-selector, 1, $index - 1);
            } @else {
                $last-selector: null;
            }
            // Inspect allows us to combine two selectors in one block.
            $parent: inspect(set-nth($selector, $length, #{$last-selector}));
            $parents: join($parents, $parent, comma);
        }
    }
    @at-root #{$parents} {
        @content;
    }
} 
```

有第一个循环遍历[选择器列表](https://drafts.csswg.org/selectors-4/#list-of-simple-selectors)（选择器末尾带有逗号）。因为复杂的选择器也被视为一个列表，我们只需要删除列表的最后一个元素。没有循环遍历复合选择器或简单选择器，因为我们只需要丢弃最后一个。

Sass 中没有删除列表元素的功能，但我们可以使用 设置元素的值`set-nth`。通过将最后一个元素设为空字符串并取消引用，我们可以从列表的打印表示（字符串）中删除最后一个元素。由于选择器可以是字符串，我们只需将新字符串用作选择器。

使用以下内容时：

```
.grandmother,
.grandfather {
  .parent {
      .child {
        font-size: 10em;
          @include parent {
            font-size: 5em;
          }

          &::after {
            font-size: 1px;
            @include parent {
              font-weight: bold;
            }
          }
      }
  }
} 
```

我们得到以下信息：

```
.grandmother .parent .child,
.grandfather .parent .child {
  font-size: 10em;
}
.grandmother .parent,
.grandfather .parent {
  font-size: 5em;
}
.grandmother .parent .child::after,
.grandfather .parent .child::after {
  font-size: 1px;
}
.grandmother .parent .child,
.grandfather .parent .child {
  font-weight: bold;
} 
```

**注意：**伪元素和伪选择器不是元素的子元素，而是*附加*到元素上，因此它们本身没有父元素。我认为父母是指 Sass 嵌套意义上的父母。

# java - 创建自动化脚本来模拟应用程序的 http 请求

> ID：16150622
> 
> 赞同：0
> 
> 时间：2013-04-22T15:16:16.323
> 
> 标签：java, http, automation, request

我正在编写一个 Java 简单代码，它可以自动执行为特定应用程序执行的请求和响应。给定的应用程序是一个 .exe 文件，它向端口 8080 上的 Web 服务器发出 HTTP 请求以进行登录和用户交互（例如，用户搜索一组文章）。

我已经使用 Wireshark 来确定应用程序发送的标头，它工作正常。几十次请求后出现问题（相差10-15秒，基本上随机），服务器将不再响应（我认为IP被禁止，服务器将允许8080端口上的请求） 12-24 小时。我基本上使用 Html Unit（并且还使用 javax 默认类 HttpConnection 等进行了测试）来模拟请求，并比较了 .exe 应用程序和我的 java 应用程序发送的标头：它们是相同的。但它适用于 30-40 （有时甚至更多），但随后我收到诸如超时或套接字关闭异常之类的错误。

我知道这个问题可能是由提出请求的方式（每天或其他时间间隔、发送它们的顺序等）触发的，但我想知道我的 java 代码是否遗漏了一些东西：设置请求的 http 标头相同是否足以“模拟” .exe 应用程序？

# web-services - 减少消息流量和大小以减少下载量的提示

> ID：16150624
> 
> 赞同：0
> 
> 时间：2013-04-22T15:16:19.460
> 
> 标签：web-services, windows-mobile

我有一个集成到服务器的移动应用程序，用户可以在其中查看分配的任务并在下班后关闭任务请求。在这个项目中，时间安排非常重要，至少在一分钟的程序中应该检查是否分配了任务。此外，如果已经下载的任务发生变化，移动设备还应该检查服务器。

由于项目下载量大的性质。我们怎样才能减少它？我们是否应该使用另一种技术进行服务器通信（现在我们使用 ASP.NET Web 服务应用程序）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:35:18.717

使用 JSON 而不是 XML 服务器。

尝试使用选择性同步选项，而不是完成任务同步，因为随着任务数量的增加，它会变得很慢。

在移动设备上本地标记任务更改。将实体标记为脏，然后仅将标记的任务更新到云/服务器。

正如 SLaks 建议的那样，使用 push 而不是 pull 它会节省手机电池和用户的数据包。

以下是可以帮助您的：Microsoft 同步框架。

[http://msdn.microsoft.com/en-us/sync/bb887608.aspx](http://msdn.microsoft.com/en-us/sync/bb887608.aspx)

[http://weblogs.aspnet05.orcsweb.com/sbehera/archive/2009/04/10/sync-framework-for-windows-mobile-devices-amp-some-use-full-links.aspx](http://weblogs.aspnet05.orcsweb.com/sbehera/archive/2009/04/10/sync-framework-for-windows-mobile-devices-amp-some-use-full-links.aspx)

# android - 在 Android 中通过蓝牙进行语音聊天

> ID：16150629
> 
> 赞同：0
> 
> 时间：2013-04-22T15:16:25.523
> 
> 标签：android, bluetooth, chat, voip

我已经对使用蓝牙的语音聊天进行了一些研究，并在此处浏览了蓝牙文章[http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)但找不到与语音聊天相关的任何内容。

我在 Play 商店 ( [https://play.google.com/store/apps/details?id=com.okean.btcom](https://play.google.com/store/apps/details?id=com.okean.btcom) ) 上看到了一个应用程序，它提供了相同的功能，这意味着可以在 Android 中使用蓝牙进行语音聊天。

我还看到会话发起协议 (SIP) 提供语音聊天服务，但它使用 Internet 数据。我想通过蓝牙。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T12:51:14.750

在摩托车或嘈杂的船上，耳机将在蓝牙范围内提供清晰的通信。大喊大叫是不切实际的，而且压力很大。

摩托车通信系统通常使用 BT，但这些系统设计用于头盔并且是专有的。在高噪音环境中，有些情况下 BT 耳机或听筒会更实用。

手机上的应用程序或某种蓝牙集线器可以在高噪音受限环境中工作。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-11-28T11:25:30.687

如果您在蓝牙范围内，为什么不通过空中语音聊天？就像声压一样，也就是人类语音？

# php - 在这种情况下，通过 PHP Mailer 从一个表单提交按钮构建和操作/生成两封不同电子邮件的最佳方式是什么？

> ID：16150631
> 
> 赞同：1
> 
> 时间：2013-04-22T15:16:39.833
> 
> 标签：php, forms, phpmailer

教育我:)

我有一个简单的 HTML 表单，由 3 个字段组成：姓名、电子邮件和消息。

我在下面创建了一些 PHP 代码，它将充当输入到包含固定消息和附件的表单中的电子邮件地址的自动回复器。

我希望将第二封电子邮件发送到一个固定的电子邮件地址给一家公司，该地址仅包含输入表格的姓名、电子邮件和消息。

```
<?php

  $field_fullname = $_POST['cf_mercury']; // cf_name is a convention used by the HTML form
  $field_email = $_POST['cf_jupiter'];
  $field_message = $_POST['cf_uranus'];

require_once('class.phpmailer.php');

$mail             = new PHPMailer(); // defaults to using php "mail()"

$body = $field_message;

$mail->SetFrom("company@address.co.uk", "ETAP Centre"); 

$mail->AddReplyTo("company@address.co.uk", "ETAP Centre");

$address = "email@address.co.uk";
$mail->AddAddress($field_email, $field_fullname);

$mail->Subject    = 'Auto Response: Message from the ETAP Centre';

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAttachment("");      // attachment
$mail->AddAttachment(""); // attachment

if(!$mail->Send()) {
  { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, send your email to company@address.co.uk');
        window.location = 'index.html';
    </script>
<?php
}
} else {
  ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for contacting the ETAP Centre. We will contact you shortly.');
        window.location = 'index.html';
    </script>
<?php
}
?> 
```

任何和所有的帮助都将不胜感激，如果我能做更多的事情来表达我的问题并增加它的可理解性，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:40:19.007

答案是通过`$mail`将第二封电子邮件中的变量更改为`$mail2`并添加`mail2 = clone $mail;`. 这允许用户完全控制两封带有可选附件的电子邮件，以及使用任一电子邮件中表单捕获的变量。谢谢你的帮助！:)

```
<?php

      $field_fullname = $_POST['cf_mercury']; // cf_name is a convention used by the HTML form
      $field_email = $_POST['cf_jupiter'];
      $field_message = $_POST['cf_uranus'];

    require_once('class.phpmailer.php');

    // E-Mail to Client

    $mail             = new PHPMailer(); // defaults to using php "mail()"

    $body = "Thank you for contacting the whoever";

    $mail->SetFrom('company@address.co.uk', 'Enter Sender Name'); 

    $mail->AddReplyTo('company@address.co.uk', 'Enter Sender Name');

    $address = $field_email;
    $mail->AddAddress($address, $field_fullname);

    $mail->Subject    = 'Auto-Response: Thank you for contacting the ETAP Centre, '.$field_fullname;

    $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

    $mail->MsgHTML($body);

    $mail->AddAttachment("");      // attachment
    $mail->AddAttachment(""); // attachment

    $sent = $mail->Send();

    // E-Mail to Company

    $mail2 = clone $mail;

    $mail2             = new PHPMailer(); // defaults to using php "mail()"

    $body = $field_message;

    $mail2->SetFrom($field_email, $field_fullname); 

    $mail2->AddReplyTo($field_email, $field_fullname);

    $address = "company@address.co.uk";
    $mail2->AddAddress($address, "Enter Recipient Name");

    $mail2->Subject    = 'Message via the NAME website from '.$field_fullname;

    $mail2->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

    $mail2->MsgHTML($body);

    $mail2->AddAttachment(""); // attachment - leave incase they are needed in the future
    $mail2->AddAttachment(""); // attachment

    $sent = $mail2->Send();

    if($mail_status) {
      { ?>
<script language="javascript" type="text/javascript">
            alert('fail');
            window.location = 'index.html';
        </script>
<?php
    }
    } else {
      ?>
<script language="javascript" type="text/javascript">
            alert('success');
            window.location = 'index.html';
        </script>
<?php
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:50:28.560

```
<?php
$field_fullname = $_POST['cf_mercury']; // cf_name is a convention used by the HTML form
$field_email = $_POST['cf_jupiter'];
$field_message = $_POST['cf_uranus'];

require_once('class.phpmailer.php');

$mail             = new PHPMailer(); // defaults to using php "mail()"

$body = "Message";

$mail->SetFrom('company@address.co.uk', 'ETAP Centre'); 

$mail->AddReplyTo('company@address.co.uk', 'ETAP Centre');

$address = $field_email;
$mail->AddAddress($address, $field_fullname);

$mail->Subject    = 'Auto-Response: Thank you for contacting the ETAP Centre, '.$field_fullname;

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!";     // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAttachment("/websites/123reg/LinuxPackage22/da/mt/ec/damtechdesigns.co.uk/public_html/proofs/etap/etapbooklet.pdf");      // attachment
$mail->AddAttachment(""); // attachment
$mail->Send(); 
```

// 给公司发电子邮件

```
 $mail             = new PHPMailer(); // defaults to using php "mail()"

 $body = $field_message;

 $mail->SetFrom($field_email, $field_fullname); 

 $mail->AddReplyTo($field_email,$field_fullname);

 $address = "company@address.co.uk";
 $mail->AddAddress($address, "ETAP Centre");

 $mail->Subject    = 'Message via the ETAP Centre website from '.$field_fullname;

 $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

 $mail->MsgHTML($body);

 $mail->AddAttachment(""); // attachment
 $mail->AddAttachment(""); // attachment
 $sent = $mail->Send();
 if($sent)
 {
  header("location:yoururl");
 }
 else
 {
  header("location:yoururl");
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:19:57.937

只需在if 语句`$mail = new PHPMailer(); // defaults to using php "mail()"`之前重复以公司电子邮件地址开头的块作为收件人。`Message Failed`并且只包括您要发送的字段（即姓名、电子邮件和消息）。

或者，如果您愿意，您可以通过将公司电子邮件地址添加为电子邮件地址来发送相同电子邮件的副本`BCC`，方法是添加`$mail->AddBCC`

# google-maps-api-3 - 谷歌地图 api v3 在 dragstart 时删除标记

> ID：16150633
> 
> 赞同：0
> 
> 时间：2013-04-22T15:16:43.757
> 
> 标签：google-maps-api-3, google-maps-markers

我有以下功能。`geolocationService.getNearbyPeoples()`是从数据库获取数据的服务。

```
function nearbyPeoples(meLat, meLng, map){
    geolocationService.getNearbyPeoples(meLat, meLng).then(function(response){
        for (var i = 0; i < response.data.length; i++) {
            var nearbyLatLng = new google.maps.LatLng(response.data[i].lat, response.data[i].lng);
            var nearbyMarkers = new google.maps.Marker({
                position: nearbyLatLng,
                title: response.data[i].first_name
            }).setMap(map);
        };
    });
} 
```

然后当拖动中心标记（meMarker）时，将调用上面的函数来显示附近的标记

```
google.maps.event.addListener(meMarker, 'dragend', function() {
            nearbyPeoples(meMarker.position.lat(), meMarker.position.lng(), map);
        }); 
```

然后我想删除dragstart中的先前标记。原因是如果 meMarker 被拖动到相同的位置，可以防止重复的标记。

```
google.maps.event.addListener(meMarker, 'dragstart', function() {

        }); 
```

但我不知道如何删除或任何更好的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:18:39.177

为什么不在添加标记时保留标记列表（对象）并使用它来避免重复标记，而不是删除标记？和/或使用它来删除地图视图边界之外的标记，如果您必须删除标记。

# asp.net - ModelBinding - 使用按钮单击事件触发不带参数的gridview selectmethod

> ID：16150634
> 
> 赞同：2
> 
> 时间：2013-04-22T15:16:46.183
> 
> 标签：asp.net

我有一个带有两个 ascx 控件的 aspx 页面。第一个 ascx 控件包含文本框和下拉菜单，以允许用户选择过滤器参数。第二个控件有一个网格视图来显示查询结果。cs文件有gridview select方法调用get数据。我注意到在初始加载时，gridview select 方法被调用。如果选择了任何过滤器控件，则还会调用 gridview 选择方法。

这是问题所在，在初始加载后，如果我单击没有选择过滤器参数的搜索按钮，则不会调用 gridview 选择方法。没有直接调用 gridview 选择方法。它在 gridview 标记语言中指定如下。

我在我的 gridview 中使用模型绑定，并在我的标记 aspx 文件中声明了 selectmethod。

我的问题是，当我单击没有选择过滤参数的按钮时，如何获取 gridview 选择方法来调用。是的，即使用户没有选择，我也希望它进行另一次提取。

谢谢你的帮助。

```
<asp:GridView ID="gvCases" runat="server"
                ItemType="OFAC.FOIA.BusinessEntities.NHObjects.VW_INBOX" 
                DataKeyNames="FOIA_Number"
                AutoGenerateColumns="false"
                SelectMethod="gvCases_GetData"
                OnPreRender="gvCases_PreRender"
                Width="100%"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T18:09:22.880

我很想知道这个问题的真正答案，但我最终做的是在 SelectMethod 使用 Control Value Provider 拉入的页面上添加一个 HiddenField，然后只要我想强制刷新就更改该值. 在我的情况下，我使用了 GUID，因此我不必拉回值、转换它并增加它。

```
protected void ForceGridViewRefresh()
{
    ForceRefresh.Value = Guid.NewGuid().ToString();           
} 
```

在我的选择方法上：

```
public IEnumerable<TestViewModel> GetData([Control("ForceRefresh")] Guid? forceRefresh)
{
    ...
} 
```

到目前为止，这似乎是“工作”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T05:20:10.673

您可以使用 GridID.DataBind() ，它会立即调用 GridID_GetData() 方法。

# css - MVC 3：如果不从母版页继承 CSS，则无法加载部分视图（Telerik Report Viewer + Bootstrap）

> ID：16150636
> 
> 赞同：2
> 
> 时间：2013-04-22T15:16:49.543
> 
> 标签：css, asp.net-mvc-3, twitter-bootstrap, telerik-reporting

我在 MVC 3 应用程序中使用 Telerik Reporting 时遇到 css 冲突/冲突问题。标准 Site.css 及其报表查看器存在 CSS 问题是一个已知问题。但是，我们的应用程序使用 Twitter Bootstrap 作为 UI css，我找不到任何冲突的区域。由于我找不到冲突的 css（我什至不确定是否能够在不破坏应用程序中其余 css 的情况下修复它），我的第二个想法是加载没有 css 的部分视图，这理论上应该可以毫无问题地工作。但是，如果不从母版页继承 CSS，我就无法加载部分视图。该站点正在使用 Razor 视图引擎，报告查看器的部分视图正在使用 Web 表单视图引擎，因为 Telerik 尚未更新其报告（这是 2013 年第一季度）。有什么方法可以强制加载此视图而不从母版页（Layout.cshtml）继承任何 css？我的代码如下：

主页

```
@{
  ViewBag.Title = "Reports";
}

<h2>Reporting</h2>

@Html.Partial("_UnderContructionPartial")

@{
  Html.RenderPartial("ReportViewer");
} 
```

使用报告查看器查看

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<%@ Register Assembly="Telerik.ReportViewer.WebForms, Version=7.0.13.220, Culture=neutral, PublicKeyToken=a9d7983dfcc261be" Namespace="Telerik.ReportViewer.WebForms" TagPrefix="telerik" %>
<%@ Register Assembly="Telerik.Reporting, Version=7.0.13.220, Culture=neutral, PublicKeyToken=a9d7983dfcc261be" Namespace="Telerik.Reporting" TagPrefix="telerik" %>

<!DOCTYPE html>

<html>
  <head runat="server">
    <title>Report</title>
  </head>
  <body>
    <script runat="server">
      public override void VerifyRenderingInServerForm(Control control)
      {
        // to avoid the server form (<form runat="server"> requirement
      }
      protected override void OnLoad(EventArgs e)
      {
        base.OnLoad(e);
        var instanceReportSource = new Telerik.Reporting.InstanceReportSource();
        //instanceReportSource.Parameters.Add(new Telerik.Reporting.Parameter("UserName", ViewData["UserName"].ToString()));
        instanceReportSource.ReportDocument = new program1.Web.Reports.TestReport();
        ReportViewer.ReportSource = instanceReportSource;
        ReportViewer.ViewMode = ViewMode.PrintPreview;
      }
    </script>

    <form id="main" method="post" action="">
      <telerik:ReportViewer ID="ReportViewer" Width="100%" Height="800px" runat="server">
      </telerik:ReportViewer>
    </form>
  </body>
</html> 
```

控制器

```
public ActionResult ReportViewer()
{
  return PartialView("ReportViewer");
} 
```

这是报表查看器的样子：

![在此处输入图像描述](https://i.stack.imgur.com/f1InK.png)

这就是它“应该”的样子：

![在此处输入图像描述](https://i.stack.imgur.com/KzLfN.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T19:28:36.460

我刚刚遇到了同样的问题，经过一番头撞后，这就是我想出的。目前使用 MVC4 和 Bootstrap。

我在 ~/Content/ 中创建了一个新的 .css 文件并添加了：

```
.InputButtonClass
{
    display: block;
    margin-top: 3px !important;
}

select
{
    height: 23px !important;
    font-size: 8pt !important;
}

input[type="text"], input[type="number"] .uneditable-input
{
    color: #555555;
    display: inline-block;
    font-size: 14px;
    height: 23px;
    line-height: 23px;
    margin-bottom: 5px;
    padding: 4px 6px;
    vertical-align: middle;
}

input, textarea, .uneditable-input
{
    width: auto;
}

.ReportToolbar INPUT
{
    height: 11px;
    padding-bottom: 3px;
}

#ReportViewer1_ReportToolbar_NavGr_CurrentPage_CurrentPage
{
    margin-top: 4px !important;
    padding: 3px 2px 3px 2px !important;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/gHyqe.png)

这使得除了“导出”链接之外的所有内容都几乎完美无缺，但我只是将字体大小增加到 10pt，看起来还不错。选择箭头有点破碎，但我现在可以忍受它。此外，我将背景尺寸保持在 28 像素，并使按钮更小，但您可以将尺寸增加到 40 像素并保持按钮尺寸相同。根据您在视图中的其他内容，您可能需要稍微调整一下，但这应该会让您走上正确的轨道。我希望当他们发布 Telerik 的下一个版本时，这会变得容易得多。

编辑：仅在 Firefox 和 Safari 上测试。可能需要添加对 IE/Chrome 的兼容性。

EDIT2：我添加了行高来解决 IE 和 Chrome 中不显示页码的问题。

```
 input[type="text"], input[type="number"] .uneditable-input
{
    color: #555555;
    display: inline-block;
    font-size: 14px;
    height: 23px;
    line-height: 23px;
    margin-bottom: 5px;
    padding: 4px 6px;
    vertical-align: middle;

    line-height: 10px;
} 
```

Edit3：使用上面的 CSS 可能会影响视图中的其他选择列表。解决此问题的一种方法是创建一个新类并将其添加到您的选择列表中。我就是这样做的。

看法：

```
<form>
<select name="ReportIndex" class="select">
    <option value="1">Guest Report</option>
    <option value="2">--TBA--</option>
    <option value="3">--TBA--</option>
</select>
    <input type="submit" value="Change Report" />
</form> 
```

CSS：

```
.select
{
    height: 30px !important;
    font-size: 10pt !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:09:20.620

您是否需要在此处使用局部视图：

```
return PartialView("ReportViewer"); 
```

您可以尝试返回一个视图，然后作为第二个参数传入一个不同的布局 csthml 页面，该页面没有定义任何 css 文件或只定义您需要的 css 文件。

所以像：

```
return View("ReportViewer" "~/Views/Shared/_TestLayout.cshtml"); 
```

# angularjs - ngRepeat 破坏了 Foundation Switch CSS。我该如何解决？

> ID：16150640
> 
> 赞同：0
> 
> 时间：2013-04-22T15:17:02.427
> 
> 标签：angularjs, zurb-foundation

我正在尝试使用 Zurb 基金会的[Switch](http://foundation.zurb.com/docs/components/switch.html)组件。

在你把它放在一个`ng-repeat`. 然后，除了最后一个之外的所有开关都坏了——除非您单击它们，否则它们不会显示标签。

这是记录该问题的[JSBin 。](http://jsbin.com/uherim/8/edit)有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:51:57.050

您的收音机需要 ng-model。如果您在每个单选按钮上包含一个 ng-model，它在您的 JSBin 中可以正常工作。

根据[文档](http://docs.angularjs.org/api/ng.directive%3ainput.radio)，还需要值。

编辑：

好的，看看[这个版本](http://jsbin.com/uherim/24/edit)，我终于让它与 ng-model 和 ng-value 一起工作，我了解到这比 value 更可取。你怎么看，这对你有用吗？

显然 ng-repeat 为每次迭代创建了一个子范围。使用 $parent 似乎是一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T20:37:10.873

发现我必须以下列方式使用“ng-checked”才能在“ng-repeat”中按预期工作。只要每个开关的 ng-clicked 变量都是唯一的，就应该按预期工作。使切换功能可以在真假之间切换可见值。

```
<div class="switch" ng-click="toggle()">
    <input type="radio" ng-checked="!visible">
    <label>Off</label>

    <input type="radio" ng-checked="visible">
    <label>On</label>
    <span></span>
</div> 
```

希望对某人有所帮助。

# c - 如何使用 C 中的递归为 0,1 生成 4 位二进制组合？

> ID：16150641
> 
> 赞同：6
> 
> 时间：2013-04-22T15:17:08.087
> 
> 标签：c, algorithm, recursion, permutation, combinations

对于这个数组，尝试这样的事情：

```
void rollover(int val,int count) {  
    if(count==0) {
        return;
    }
    printf("%d ",val);
    count--;
    rollover(val,count);    
}
int main() {
    int arr[]={0,1};
    for(int i=0;i<=1;i++) {
        rollover(arr[i],4);
    }
    printf("\n");
    return 0;
} 
```

使用递归方法的预期输出：

```
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111 
```

无法理解如何编写该 rec 函数。我花了几个小时来解决它。有人可以协助编写该功能吗？

我正在/正在尝试做下面发布的 G_G 之类的事情。我该如何编写这样的递归函数？我必须使用一个 for 循环来调用该递归函数还是使用两个 for 循环进行递归，或者我应该调用递归函数两次？例如：

```
void rollover(int val,int count) {  
    if(count==0) {
        return;
    }
    printf("%d ",val);
    count--;
    rollover(val,count);
    //.. do something if necessary ..
    rollover(val,count);
    //.. do something if necessary ..
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-22T15:47:23.063

**最简单的解决方案：二进制转换，无递归**

```
for(int i = 0; i < 16: ++i) {
    printf("%u%u%u%u", i/8%2, i/4%2, i/2%2, i%2);  
} 
```

*有关此循环的递归版本，请参阅[MOHAMED 的答案](https://stackoverflow.com/a/16150835/1439688)*

* * *

**以下解决方案使用的二进制递归**

```
 _ 000
   _ 00 _/
  /      \_ 001
 0        _ 010
  \_ 01 _/
         \_ 011
          _ 100
   _ 10 _/
  /      \_ 101
 1        _ 110
  \_ 11 _/
         \_ 111 
```

**使用缓冲区的递归解决方案`char*`，没有二进制转换**

```
void char_buffer_rec(char number[4], int n) {
    if(n > 0) {
        number[4-n] = '0';
        char_buffer_rec(number, n - 1);
        number[4-n] = '1';
        char_buffer_rec(number, n - 1);
    }
    else {
        printf("%s\n", number);
    }
} 
```

*用法 ：*

```
char number[5] = {0};
char_buffer_rec(number, 4); 
```

**仅使用递归解决方案`int`，无缓冲区，无二进制转换**

```
void int_ten_rec(int number, int tenpower) {
    if(tenpower > 0) {
        int_ten_rec(number, tenpower/10);
        int_ten_rec(number + tenpower, tenpower/10);
    }
    else {
        printf("%04u\n", number);
    }
} 
```

*用法 ：*

```
int_ten_rec(0, 1000); 
```

该解决方案的另一个版本替换了`tenpower`width `bitwidth`，将 printf 替换为`width`取决于长度变量的可变填充。`length`可以定义为新参数、程序常量等。

```
void int_rec(int number, int bitwidth) {
    static int length = bitwidth;
    int i, n;
    if(bitwidth > 0) {
        int_rec(number, bitwidth-1);
        /* n := 10^(bitwidth-2) */
        for(i=0,n=1;i<bitwidth-1;++i,n*=10);
        int_rec(number + n, bitwidth-1);
    }
    else {
        /* i := number of digit in 'number' */
        for(i=1,n=number;n>=10;++i,n/=10);
        /* print (length-i) zeros */
        for(n=i; n<length; ++n) printf("0");
        printf("%u\n", number);
    }
} 
```

*用法 ：*

```
int_rec(0, 4); 
```

**树解决方案，使用`char*`缓冲区递归，无二进制转换**

```
struct Node {
    int val;
    struct Node *left, *right;
};

void build_tree(struct Node* tree, int n) {
    if(n > 0) {
        tree->left = (Node*)malloc(sizeof(Node));
        tree->right= (Node*)malloc(sizeof(Node));
        tree->left->val = 0;
        build_tree(tree->left, n - 1);
        tree->right->val = 1;
        build_tree(tree->right, n - 1);
    }
    else {
        tree->left = tree->right = NULL;
    }
}

void print_tree(struct Node* tree, char* buffer, int index) {
    if(tree->left != NULL && tree->right != NULL) {
        sprintf(buffer+index, "%u", tree->val);
        print_tree(tree->left, buffer, index+1);
        sprintf(buffer+index, "%u", tree->val);
        print_tree(tree->right, buffer, index+1);
    }
    else {
        printf("%s%u\n", buffer, tree->val);
    }
} 
```

*用法 ：*

```
 char buffer[5] = {0};
    Node* tree = (Node*)malloc(sizeof(Node));
    tree->val = 0;
    build_tree(tree, 4);
    print_tree(tree, buffer, 0); 
```

但这会`0`在每行的开头打印一个额外的内容，为避免这种情况，请构建两个较小的树：

```
 Node* tree0 = (Node*)malloc(sizeof(Node));
    Node* tree1 = (Node*)malloc(sizeof(Node));
    tree0->val = 0;
    tree1->val = 1;
    build_tree(tree0, 3);
    build_tree(tree1, 3);
    print_tree(tree0, buffer, 0);
    print_tree(tree1, buffer, 0); 
```

**使用 int* 数组的递归解决方案**

```
#define MAX_LENGTH 32
int number[MAX_LENGTH];
void int_buffer_rec(int n, int length) {
    if(n > 0) {
        number[length - n] = 0;
        int_buffer_rec(n - 1, length);
        number[length - n] = 1;
        int_buffer_rec(n - 1, length);
    }
    else {
        for(int i = 0; i < length; ++i) {
            printf("%u", number[i]);
        }
        printf("\n");
    }
} 
```

*用法 ：*

```
int_buffer_rec(4, 4); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T15:26:30.407

递归可以用`+1`

```
void f(unsigned int x)
{
   printf("%u%u%u%u\n",
          (x>>3)&0x1,
          (x>>2)&0x1,
          (x>>1)&0x1,
          x&0x1);
   if(x==0xF) return;
   else f(x+1);
}

int main(void)
{
    f(0);
} 
```

**执行：**

```
$ ./test
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T07:58:23.143

我试图将我的解决方案限制为使用相同的参数，但我肯定会添加一个额外的参数来了解 count 的初始值。

```
void rec(int val, int count) {
    if (count <= 1) {
        int i;
        int f = 0;
        for (i = sizeof(int) * 8; i >= 0; i--) {
            f |= (val >> i) & 1;
            if (f) {
                printf("%d", (val >> i) & 1);
            }
        }
        printf("\n");
    } else {
        rec(val * 2, count - 1);
        rec(val * 2 + 1, count - 1);
    }
} 
```

输出：

```
1
10
11
100
101
110
111
1000
1001
1010
1011
1100
1101
1110
1111 
```

为了添加前导 0，我添加了一个参数：

```
#include <stdio.h>

void rec2(int val, int count, int b) {
    if (count <= 1) {
        int i;
        for (i = b - 1; i >= 0; i--) {
            printf("%d", (val >> i) & 1);
        }
        printf("\n");
    } else {
        rec2(val * 2, count - 1, b);
        rec2(val * 2 + 1, count - 1, b);
    }
}

void rec(int val, int count) {
    rec2(val, count, count);
}

int main() {
    rec(0, 4);
    rec(1, 4);
    return 0;
} 
```

输出：

```
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T15:24:37.690

只需遍历 DFS 深度为 4 的二叉树，向左为 0，向右为 1。

```
tr(int dep, int val)
{
   if(dep == 4)
   {
     printf("\n");
   }
   else
   {
     printf("%d", val);
     tr(dep+1, 0); // going left
     tr(dep+1, 1); // going right
   }

   return;
}

int main()
{
   tr(0,0);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T16:29:42.110

让我们从设计递归函数的原型开始。希望从那里开始有意义。查看此代码的非递归版本，您将需要相同的变量。您不需要将它们中的*任何*一个作为参数传递，但我更愿意将它们全部传递，并使解决方案尽可能灵活和模块化。还要考虑返回值。这可能表明某种*成功*，以便模仿与 C 标准库的一致性。

```
int count_r(char *destination, /* The storage for the function to store *
                                *     the 0s and 1s as we count.        */
            size_t length,     /* The number of digits in the number.   */
            char *digit);      /* The set of digits                     */ 
```

* * *

现在让我们专注于设计第一次迭代。就像在小学一样，我们首先定义我们`count_r`一次只迭代一个数字。一旦我们可以证明它知道如何从 to 计数`0`，`9`我们就将它引入两位数......但现在，一次一步。

让我们假设在第一次调用之前`destination`被初始化为包含, 的`length`字节。`digits[0]`此初始化由调用者完成，调用者可能会在调用之前输出该预初始化数组。第一次迭代应该只修改一个字节：由 指示的那个`length`，然后返回给调用者。

```
int count_r(char *destination, size_t length, char *digit) {
    /* The position of the right-most digit is before the '\0' in destination, *
     *     so we need to decrement length                                      */
    length--;

    /* Find the digit at the very end of destination, within our "digit" parameter */
    char *d = strchr(digit, destination[length]);

    /* d[1] points to the next digit (or '\0') */
    destination[length] = d[1];
    return 0;
} 
```

然后调用者可能会打印数组，并`count_r`使用相同的缓冲区再次调用以增加计数器。这适用于不同的基数，通过反转`digit`字符串，我们可以递减而不是递增。但是，正如我们很快就会看到的，它在达到它可以计数的最高数字后失败：`'F'`在下面的示例中。

```
int main(void) {
    char num[] = "0";
    do {
        puts(num);
    } while (count_r(num, strlen(num), "0123456789ABCDEF") == 0);
} 
```

* * *

当计数更高时，d[1] 将`'\0'`迭代到超出数字集并进入字符串的空终止符。让我们考虑添加代码来处理我们的第二次迭代。

需要一些代码来设置`destination[length]`回第`digit`一个数字并递归地向左移动到下一个数字。这发生在 时`d[1] == '\0'`，因此我们可以编写一个`if (...) { ... }`分支来处理它。

当`length`传入为0时会出现问题，我们在执行刚才提到的更改后会发现。这是函数应该返回`1`到的地方，指示计数已经完成，因为它已经尽可能地向左移动并达到了可能的最高数字。

```
void count_r(char *destination, size_t length, char *digit) {
    /* The position of the right-most digit is before the '\0' in destination, *
     *     so we need to decrement length                                      */
    if (length-- == 0) { return 1; }

    /* Find the digit at the very end of destination, within our "digit" parameter */
    char *d = strchr(digit, destination[length]);

    /* d[1] points to the next digit (or '\0') */
    if (d[1] == '\0') {
        /* Set destination[length] to the first digit */
        destination[length] = digit[0];
        /* Recurse onto the next digit. We've already decremented length */
        return count_r(destination, length, digit);
    }

    destination[length] = d[1];
    return 0;
} 
```

在添加一些`assert`离子（例如`assert(strlen(digit) > 1);`）并编写一些测试用例之后，我们可能会决定该函数已准备好用于生产。我希望我能提供帮助。:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T08:53:05.153

**递归是**一种编程技术，它允许程序员根据自己来表达操作。在 C 和 C++ 中，这采用**调用自身的函数的形式**。

```
#include<iostream>
#include<cstdio>
using namespace std;
void rec(int val)
{
  if(val<16)
  {
    printf("%u%u%u%u", val>>3, (val&4)>>2, (val&2)>>1, val&1);
    printf("\n");
    rec(++val);    //calling val+1 here
  }
  return;
}
int main()
{
   rec(0);  //calling recursion for 0
} 
```

这为您提供了您想要的准确输出..！

如果您不想使用位移运算符..

```
#include<iostream>
#include<cstdio>
using namespace std;
void rec(int val)
{
   if(val<16)
   {
     for(int b=val,a=8,i=0;i<4;b%=a,a/=2,i++)
     printf("%u",(b/a));
     printf("\n");
     rec(++val);// calling val+1 here
   }
   return;
}

int main()
{
   rec(0);//calling recursion for 0
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-11T04:54:22.883

这个问题可以推广到使用递归来获得任意长度的二进制组合。例如，如果要获取 的所有二进制组合`length=4`，只需调用`printBinaryCombination("????", 0)`（即四个`?`s 需要替换为`0`or `1`）。

对应的代码如下：

```
void printBinaryCombination(string str, int current)
{
    int length = str.length();
    if (length == 0)
        return;

    if (current == length)
        printf("%s\n", str.c_str());
    else
    {
        if (str[current] == '?')
        {
            str[current] = '0';
            printBinaryCombination(str, current+1);

            str[current] = '1';
            printBinaryCombination(str, current+1);

            // change back for next time
            str[current] = '?';
        }
        else
            printBinaryCombination(str, current+1);
    }
} 
```

**编辑**：实际上，上面的函数对于处理所有包含随机数`?`s 的二进制组合也很强大，每个二进制组合都可以是`0`or `1`。例如，如果您调用`printBinaryCombination("1??0", 0)`，它将打印：

```
1000
1010
1100
1110 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-21T12:47:29.050

要生成您要求的 n 位组合（您要求 n=4），任何 n 的一般递归实现将是：

**主功能：**

```
vector<string> ve,ve1;
int main(int argc, char const *argv[])
{
    /* code */
    int n;
    cin>>n;
    generate("0",n,true);
    generate("1",n,false);
    for(int i=0;i<ve.size();i++){
        cout<<ve[i]<<endl;
    }
    for(int i=0;i<ve1.size();i++){
        cout<<ve1[i]<<endl;
    }
    return 0;
} 
```

**生成递归生成二进制字符串的函数：**

```
void generate(string s,int n,bool b){
    if(n==1){
        if(b==true){
            ve.push_back(s);
        }
        else{
            ve1.push_back(s);
        }
        return;
    }else{
        generate(s+"0",n-1,b);
        generate(s+"1",n-1,b);
    }
} 
```

希望这可以帮助..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-25T08:00:36.093

SOLN 1：更通用的答案（可在 c90、c99 下编译）。布尔值作为 int 输出。限制：
1）使用数学库。（它更重）。

```
#include<stdio.h>
#include<math.h>
#define MAXBITS 4
//#define MAXVALUES (((int)pow(2,maxb))-1)
const int MAXVALUES = (((int)pow(2,maxb))-1) //if this gives warning then use #define version.

void bin(int val,int total)
{
    int i = 0;          
    if(val <= MAXVALUES)            //can write pow(2,total-1)-1 but anyways..
    {
        for(i =0 ; i < total;i++)
        {
            printf("%d",!!(val&(int)pow(2,total-i-1)));
        }           
        printf("\n");

    }
    else return;
    bin(val+1,total);
}

int main()
{
    setbuf(stdout,NULL);
    bin(0,MAXBITS);//4 bits 
    return 0;
} 
```

Soln 2：这可以通过字符打印来完成。没有移位运算符。

限制：
1）它只能（正确）打印最多 15（十进制）或 0x0F（十六进制）值。
2）总共
`(5 * sizeof(char) * total) + (( total + 2) * (sizeof(int) + sizeof(int)))`在堆栈上创建（太浪费了）。

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#define MAXVALUES 15
#define MAXBITS 4
void bin(int val,int total) //@prototype void bin(int val);remove redundant total.
{
    char *s = malloc(sizeof(char)*(total+1)); //cant declare variable array(atleast pre c99)
    int i = 0;
    if(val <= MAXVALUES )
    {
        for(i =0 ; i < total;i++)
        {
        s[total - i-1] = !!(val&(int)pow(2,i)) + '0';
        }
        s[total] = '\0';
        printf("%s\n",s);
    }
    else return;
    bin(val+1,total);
}

int main()
{
    bin(0,MAXBITS);//4 bits 
    return 0;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-08T10:25:16.953

> 此通用*c++*代码适用于任意位数。只需将 const int num 更改为您想要生成的二进制代码的任意位数...

```
const int num=3;
string code="";

void GenerateBinaryCode(string str,unsigned int n){
    if(n==0){
        cout<<str<<endl;
    }
    else{
        str[num-n]='0';
        GenerateBinaryCode(str,  n-1);
        str[num-n]='1';
        GenerateBinaryCode(str, n-1);
    }
}
int main(){
    for(int i=0; i<num; i++)
        code+="x";

    GenerateBinaryCode(code,num);

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-23T09:29:05.820

这是 C 中的递归实现，仅使用 int 2D 数组（无字符串、字符或位移位）用于任意位长度。

```
static void btable(int* a, int i, int n, int k, size_t len) {
    if (k >= len)
        return;
    for (int j = (i+n)/2; j < n; j++)
        *(a+j*len+k) = 1;
    btable(a,i,(i+n)/2,k+1,len);
    btable(a,(i+n)/2,n,k+1,len);
} 
```

然后你可以调用函数

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>

int main(void) {

    int n = 4;
    int (*a)[n] = malloc(sizeof(int[(int)pow(2,n)][n]));
    btable(*a,0,pow(2,n),0,n);

    for (int i = 0; i < pow(2,n); i++) { // verify output
        for (int j = 0; j < n; j++)
            printf("%d",a[i][j]);
        printf("\n");
    }

    return 0;
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-08-22T00:58:58.553

在介绍最终解决方案之前，我将展示我们可以用于实现目标的两个函数。

next 函数的主要思想是将`l1`列表的元素添加到`l2`. 例如：

```
l1 = [0]
l2 = [ [1,1] , [1,0] ]
then 
f1(l1,l2) = [ [0,1,1] ,[0,1,0]]

    def f1(l1:List[Int],l2:List[List[Int]]): List[List[Int]] = l2.map{ r=> l1:::r} 
```

第一个参数是一个包含整数列表的列表，该列表将添加到列表中包含的每个数字`l2`列表中。例如：

```
l1 = [ [0] , [1]]
l2 = [ [1,0], [1,1] ]
f(l1,l2) = [ [0,1,0],[0,1,1], [1,1,0],[1,1,1] ]

    def f(l1:List[List[Int]],l2:List[List[Int]]): List[List[Int]] = l1.map{ r=> f1(r,l2)} flatten 
```

现在，我们有了辅助方法，我们创建将解决需求的函数

```
/**
n : The max number of digits that the binary number can contain
*/

    def binaryNumbers(n:Int):List[List[Int]] = n match {
     case 1 => List(List(0),List(1))
     case _ => f( List(List(0),List(1)) , binaryNumbers(n-1) )
    }

Example: binaryNumbers(2) = List( List(0,0), List(0,1), List(1,0), List(1,1) ) 
```

# .htaccess - 强制重定向某些文件（基于引用）并触发 404 页面，否则

> ID：16150647
> 
> 赞同：1
> 
> 时间：2013-04-22T15:17:30.057
> 
> 标签：.htaccess, mod-rewrite, redirect

我们通过单个下载链接分发软件产品的不同版本。交付是基于`referer`与默认值相结合的，它工作正常。此外，用户应该被重定向到一个`404`页面，以防使用了错误的文件名。

目前`.htaccess`-file 看起来像这样：

```
# stop directory listing
Options -Indexes

# turn rewrite engine on
RewriteEngine On

# force 404 if file name is missing or wrong
RewriteCond %{REQUEST_URI} !^(download_mac\.zip|download_pc\.zip)$
RewriteRule (.*) 404/index.html [L]

# an example based on the referer
RewriteCond %{HTTP_REFERER} ^http://([^.]+\.)*domain-a\.com [OR]
RewriteCond %{HTTP_REFERER} ^http://([^.]+\.)*domain-b\.com
RewriteRule ^(download_mac\.zip|download_pc\.zip)$ domain_ab/$1 [L]

# last rule if no referer matches
RewriteRule ^(download_mac\.zip|download_pc\.zip)$ default/$1 [L] 
```

所以我对这个文件有一个问题和一个附加问题：

1.  第一条规则，强制 404，非常贪心，*每次都*得到错误页面，不管调用什么 URL。我还尝试了单个语句，例如`RewriteCond %{REQUEST_URI} !^download_mac\.zip$`没有任何效果。我怎样才能解决这个问题？
2.  如何摆脱任何其他规则中的文件名？我尝试过类似的事情，`RewriteRule ^(.*)$ default/$1 [L]`但这让我很难过，而且`500 Internal Server Error`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:07:59.083

您可以通过使用这样的 Env 变量来避免重复文件名：

```
RewriteRule ^(download_mac\.zip|download_pc\.zip)$ - [E=ALLOWED:$1,NC]

RewriteCond %{ENV:ALLOWED} ^$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ /404/index.html [L]

RewriteCond %{ENV:ALLOWED} !^$
RewriteCond %{HTTP_REFERER} ^http://([^.]+\.)*domain-a\.com [OR]
RewriteCond %{HTTP_REFERER} ^http://([^.]+\.)*domain-b\.com
RewriteRule ^ /domain_ab/%{ENV:ALLOWED} [L]

RewriteCond %{ENV:ALLOWED} !^$
RewriteRule ^ /default/%{ENV:ALLOWED} [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:33:37.897

您可以将重写规则移到最后。其他规则处理有效案例，如果它们都不匹配，则应用最后一条规则

```
# an example based on the referer
RewriteCond %{HTTP_REFERER} ^http://([^.]+\.)*domain-[ab]\.com
RewriteRule ^download_(mac|pc)\.zip$ domain_ab/$0 [L]

# last rule if no referer matches
RewriteRule ^download_(mac|pc)\.zip$ default/$0 [L]

# force 404 if file name is missing or wrong
RewriteRule ^ 404/index.html [L] 
```

# java - Java jaxb xsd如何允许maxOccurence

> ID：16150649
> 
> 赞同：-2
> 
> 时间：2013-04-22T15:17:36.323
> 
> 标签：java, xsd, jaxb

我想要以下 xml 输出并具有以下 xsd

```
<msgBody>
  <Contato>
   <cd_id>11</cd_id>
   <property key="name" value="Adde" />
   <property key="Phone" value="34343" />
   <property key="Address" value="address" />
  </Contato>
  <Contato>
  <cd_id>12</cd_id>
   <property key="name" value="BJ" />
   <property key="Phone" value="7899" />
   <property key="Address" value="sdfkjsdfsdf" />
  </Contato>
 </msgBody> 
```

我有以下 xsd 我不知道如何允许拥有多个属性标签

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:element name="msgBody">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Contato" maxOccurs="unbounded" minOccurs="0">
              <xs:complexType>
                <xs:sequence>
                  <xs:element type="xs:int" name="cd_id"/>
                  <xs:element type="property_data_type" name="property"/>

                </xs:sequence>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>

<xs:complexType name="property_data_type">

  <xs:sequence>
   <xs:element type="xs:string" name="key"/>
   <xs:element type="xs:string" name="value"/>
</xs:sequence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:42:43.960

尝试这个

```
 <xs:element name="msgBody">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="Contato"/>
      </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="contao">
    <xs:complexType>
       <xs:sequence>
              <xs:element type="xs:int" name="cd_id"/>
              <xs:element maxOccurs="unbounded" ref="propertytype"/>
        </xs:sequence>
    </xs:complexType>
 </xs:element>
 <xs:element name="propertytype">
     <xs:complexType>
         <xs:sequence>
               <xs:element type="xs:string" name="key"/>
               <xs:element type="xs:string" name="value"/>
         </xs:sequence>
     </xs:complexType>
</xs:element> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:43:30.063

请添加`maxOccurs`.

```
 <xs:element type="property_data_type" name="property" maxOccurs="unbounded"/> 
```

或者，您可以设置任何具体限制，例如：

```
 <xs:element type="property_data_type" name="property" maxOccurs="10"/> 
```

这意味着您最多只能拥有 10 个属性元素。该[`<maxOccurs>`](http://www.w3schools.com/schema/schema_complex_indicators.asp) 指标指定元素可以出现的最大次数。

![在此处输入图像描述](https://i.stack.imgur.com/Ho3eg.png)

# java - H2：WHERE 子句中的“数据转换错误”

> ID：16150650
> 
> 赞同：2
> 
> 时间：2013-04-22T15:17:40.577
> 
> 标签：java, database, oracle, exception, h2

我在我的项目中使用 H2 数据库 (v1.3.170) 进行 JUnit 测试。我们的生产环境使用 Oracle DB，因此我们必须对从 Oracle 导出的 DDL 进行大量转换，以使其与 H2 一起使用。我们现在面临的问题之一是：

```
select * from table_country c where c.code > 0 AND 'USA' = c.name(+) 
```

此查询在 Oracle 中运行良好，但在 H2 中失败，堆栈跟踪如下：

```
org.h2.jdbc.JdbcSQLException: Data conversion error converting "USA"; SQL statement:
select * from table_country c where c.code>0 AND 'USA' = c.name(+) [22018-170] 
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) 
    at org.h2.message.DbException.get(DbException.java:158) 
    at org.h2.value.Value.convertTo(Value.java:852) 
    at org.h2.value.Value.getBoolean(Value.java:373) 
    at org.h2.expression.ConditionAndOr.optimize(ConditionAndOr.java:188) 
    at org.h2.command.dml.Select.prepare(Select.java:802) 
    at org.h2.command.Parser.prepareCommand(Parser.java:218) 
    at org.h2.engine.Session.prepareLocal(Session.java:414) 
    at org.h2.server.TcpServerThread.process(TcpServerThread.java:253) 
    at org.h2.server.TcpServerThread.run(TcpServerThread.java:149) 
    at java.lang.Thread.run(Unknown Source) 
Caused by: java.lang.NumberFormatException 
    at java.math.BigDecimal.<init>(Unknown Source) 
    at java.math.BigDecimal.<init>(Unknown Source) 
    at org.h2.value.Value.convertTo(Value.java:801) 
    ... 8 more 
```

我尝试删除（+） - 它有效：

```
select * from table_country c where c.code > 0 AND 'USA' = c.name 
```

但正如我所说，我不想在生产中改变这一点（希望 Oracle => H2 转换是透明的）。

请提出可能是什么问题以及解决此问题的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:28:53.833

`(+)`Oracle 不推荐使用外连接的语法。停止使用它。

在您的情况下，“外部连接”无论如何都没有意义，因为您没有加入。

您可能想要这样的东西（在所有 DBMS 中可靠地工作）

```
select * 
from table_country c 
where c.code > 0 
  and (c.name = 'USA' or c.name is null); 
```

最后一句话：使用不同的 DBMS 进行测试和生产会使您的测试毫无价值。DBMS 之间有太多细微的差异，使用不同的 DBMS 时您根本无法涵盖这些差异。

# javascript - $.post 之后的 jQuery 事件在请求完成之前发生

> ID：16150658
> 
> 赞同：1
> 
> 时间：2013-04-22T15:17:59.370
> 
> 标签：javascript, jquery, jquery-events, .post

我有以下代码，出于某种奇怪的原因，事件发生的顺序对我来说没有意义。无论如何，我可以使它按顺序排列吗？

```
var vm_good = false;
console.log("Before", vm_good);
    $.post("./ajax/call_price", {id: product_id}, function(data){
        $.each(data, function(key, value){
           $(".unit-price span").html(value);
        });
        vm_good = true;
        console.log("Inside", vm_good);
        enableNext();
    }, 'json');
    console.log("After", vm_good); 
```

控制台窗口上的结果是：

```
>Before false
>After false
>Inside true
>window.vm_good // I called it manually after the page loaded
>>true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:23:13.837

`$.post`是 的简写`$.ajax`。`A`在 AJAX 中代表异步，因此解释器将执行下一个命令，同时在您的请求完成时`$.post`运行您的事件处理程序 ( )。`function(data)`如果您的请求不是异步的，那么您的浏览器将冻结，因为它会等待您的请求完成。

您可以`$.when(deffered).then(handler)`在请求完成后使用执行代码：

```
var callPrice = $.post("./ajax/call_price", {id: product_id}, function(data){
    $.each(data, function(key, value){
       $(".unit-price span").html(value);
    });
    vm_good = true;
    console.log("Inside", vm_good);
    enableNext();
}, 'json');

$.when(callPrice).then(function () {
    console.log("After", vm_good);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:20:28.763

`.post()`是一个异步请求。这意味着 JS 不会等待它完成，它只是继续执行下一条指令。

您需要 `console.log("After", vm_good);`像这样放入您的帖子回调中-

```
var vm_good = false;
console.log("Before", vm_good);
    $.post("./ajax/call_price", {id: product_id}, function(data){
        $.each(data, function(key, value){
           $(".unit-price span").html(value);
        });
        vm_good = true;
        console.log("Inside", vm_good);
        enableNext();

        console.log("After", vm_good); // you should put this here
    }, 'json'); 
```

# unit-testing - 编写不会首先失败的测试

> ID：16150661
> 
> 赞同：1
> 
> 时间：2013-04-22T15:18:06.853
> 
> 标签：unit-testing, tdd

TDD 最佳实践表明新的测试应该失败。但是，我认为测试可能是必要的，尽管它在刚刚编写时不会失败。

示例工作流程：

1.  编写测试以检查结束日期是否早于开始日期 - 测试失败；
2.  编写代码 - 测试通过；

```
bool Validate(Condition condition)
{
    if (condition.EndDate <= condition.StartDate)
    {
        return false;
    }

    return true;
} 
```

3\. 重构——测试仍然通过。

```
bool Validate(Condition condition)
{
    return (condition.EndDate > condition.StartDate);
} 
```

在第 3 步之后，我看到如果我没有重构条件，我可以添加一个新测试，如果开始日期早于结束日期，它会检查该方法是否返回 true。但是，如果我先进行重构，那么编写这样的测试将意味着它立即通过。在我看来，测试可能会使代码更加健壮。

根据 TDD，为什么编写这样的测试是一个坏主意/不是一个好主意？

编辑：我现在在想，也许`return true;`在实现中默认编写可能不是一个好主意，我应该抛出一个`NotImplementedException`. 根据 TDD 编写代码是否是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:45:02.097

编写失败的测试的目的是让每一个测试都是值得的。这只是为了让您考虑您的测试和代码。如果您编写的测试开始时失败，然后只编写了足以使测试通过的代码，那么您就知道您编写的所有代码都是必要的，并为您的应用程序增加了价值。

例如，对于上述场景，以最纯粹的形式采用 TDD，如果您希望您的第一个测试测试方法是否在一个日期之后返回 true，您可以编写测试断言 true 并设置方法至

```
bool Validate(Condition condition)
{
    return true;
} 
```

这将使您的第一次测试通过。然后，如果结束日期早于开始日期，您将编写另一个测试来断言该方法是否失败，这显然会失败。然后，您将编写代码以通过测试，例如：

```
bool Validate(Condition condition)
{
    return (condition.EndDate > condition.StartDate);
} 
```

这意味着您编写的每一段代码都是必要的，并且您知道它的行为完全符合您的要求。这也允许您将问题分解为多个步骤并一次处理每个阶段。据我了解，这就是 TDD 的全部意义所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:37:33.957

Red/Green/Refactor 的想法是，当你编写测试时，它不应该通过，因为功能还不存在。指导您编写通过实现的是测试的要求。

你在这里看到一个非常简单的案例。有经验的 TDD 从业者可能会在编写代码之前查看问题并跳过测试执行步骤，从而节省编译/测试周期的成本。

另一方面，可能还有更多的重构工作要做​​。一件事是名称：验证。验证什么？它有什么作用？应该做多少？重命名它，直到它说出它的作用。接下来，您要对该对象之外的对象进行日期比较。“条件”类是否有责任确保结束日期跟在开始日期之后？或者它真的是一个业务规则，与 Condition 的具体使用相关联？

不要忘记更多的测试。你有什么要求？StartDate 可以为空吗？一项任务可以花不到一天的时间，那么 EndDate 和 StartDate 可以相同吗？但是，如果您也在比较分钟和秒，这意味着它们确实是 DateTime 而不仅仅是日期，因此它们不应该被命名为 StartDateTime / EndDateTime 吗？

目标不仅仅是生产工作软件。目标是编写可读、易懂、清晰的软件。该软件应作为其自己的文档。TDD 可以通过提出正确的问题来帮助您。

# php - PHP中的逻辑，为什么会这样？

> ID：16150662
> 
> 赞同：2
> 
> 时间：2013-04-22T15:18:13.890
> 
> 标签：php

```
function x() {return -1;}
echo x();
echo "<br>";
if(x()) {echo "True";} else {echo "False";} 
```

输出：

```
-1
True 
```

为什么我得到“真”输出，`if()`测试肯定会失败，因为它是负面的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:19:54.663

那是因为你只能测试真假。

False 定义为`0`，而 true 定义为`not 0`。与 1、2、3 等`-1`一样多。`true`

为确保您得到正确的结果，请进行真正的比较。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T15:19:40.217

`-1``TRUE`在布尔上下文中考虑。请参阅PHP 手册中的[转换为布尔值。](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T15:19:48.647

在 PHP 中只有数字 0 值是假的：http: [//php.net/manual/en/language.types.boolean.php](http://php.net/manual/en/language.types.boolean.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:20:55.090

0 为假，其他一切为真。这就是为什么 ！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T15:21:13.763

在 PHP 中 a`-1`是真的，因为它不是`0`。使用真实的比较，例如：

```
if(x() <= 0) { ...do stuff... } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T15:21:22.243

看看这里：

`var_dump(x()); //output: int(-1)`

并转换为布尔值：

`var_dump((bool)x()); //output: bool(true)`

`-1`不在`false`PHP 中。你可以看看是`> 0`不是

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T15:21:43.633

所有的 0 都是假的，其他的都是真的。[维基百科关于它的文章](https://en.wikipedia.org/wiki/True_and_false)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-22T15:21:54.107

在 PHP 中转换为布尔值

要将值显式转换为布尔值，请使用 (bool) 或 (boolean) 强制转换。但是，在大多数情况下，强制转换是不必要的，因为如果运算符、函数或控制结构需要布尔参数，则会自动转换值。

另请参阅类型杂耍。

转换为布尔值时，以下值被视为 FALSE：

布尔值 FALSE 本身 整数 0（零） 浮点 0.0（零） 空字符串和字符串 "0" 零元素的数组 零成员变量的对象（仅限 PHP 4） 特殊类型 NULL（包括未设置的变量) 从空标签创建的 SimpleXML 对象 每个其他值都被认为是 TRUE（包括任何资源）。

警告 -1 被认为是 TRUE，就像任何其他非零（无论是负数还是正数）数字一样！

来源[http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

# rapidminer - 创建新属性

> ID：16150668
> 
> 赞同：0
> 
> 时间：2013-04-22T15:18:47.613
> 
> 标签：rapidminer

在 rapidminer 中，我有一个数据集，其中包含一个名为 address 的属性，其中包含属性地址，我需要做的是创建一个新属性，该属性仅包含每个属性地址中的最后 3 个单词。即 231 新路爱尔兰都柏林郡我想要的是新属性中的都柏林郡爱尔兰。任何人都可以帮助我完成这个过程，因为我对 rapidminer 非常陌生。我曾尝试使用函数表达式选项通过生成属性过程来做到这一点，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:20:31.580

可能有一种更简单的方法可以实现这一点，但您可以使用执行脚本运算符和一些正则表达式。此示例脚本将仅用最后三个单词替换属性“att1”的值：

```
import java.util.regex.*

exampleSet = operator.getInput(ExampleSet.class)
Pattern p = Pattern.compile("^.*?(\\S+\\s\\S+\\s\\S+)\$")
for(Example example : exampleSet){
    value = example["att1"]
    print(value)
    Matcher m = p.matcher(value)
    if(m.matches()){
        example["att1"] = m.group(1)
    }
}
return exampleSet 
```

* * *

编辑：

确实有更简单的方法：将`Generate extract`运算符与正则表达式一起使用：`(\S+\s\S+\s\S+)$`您可能需要使正则表达式适应您的数据。

# matlab - Matlab - 在循环中运行 simulink 仿真

> ID：16150671
> 
> 赞同：0
> 
> 时间：2013-04-22T15:18:55.613
> 
> 标签：matlab, simulink

我通过更改参数在循环中使用 Simulink 模型。

```
for i = 1:length(c_slip_sweep);
   ...
   c_slip=c_slip_sweep(i)
   tic; [tt2{i},xx2{i},yy2{i}]=sim(model,stop_time); toc
   ...
end 
```

由于模型花费大量时间来执行（100 秒），我正在尝试对其进行优化。

我只发现“快速加速器”模拟模式减少到 70 秒。但是不知道有没有更好的办法。我可以编译一次模型，然后在循环中重新使用它吗？或者我可以给一个向量而不是一个参数（没有并行计算工具箱）？

# c# - C#如何做一个自定义shell来替换explore.exe

> ID：16150673
> 
> 赞同：0
> 
> 时间：2013-04-22T15:18:56.293
> 
> 标签：c#

我想做一个自定义 shell(.exe)，它将在启动时替换 explore.exe，验证 mstsc.exe（配置了 .rdp）是否正在运行，以检查远程桌面是否正在运行。如果没有，则将激活注销。

我的问题是我应该申请什么类型的申请？我在想一个控制台应用程序。以及如何确保它在启动时替换 explore.exe ？我是新来的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:25:03.867

您将必须找到对 Windows Shell Remplacement 进行编程的要求。网上有很多很好的教程，知道从哪里开始。这不是一件小事，所以我不会在这里详细介绍，开始为您编写代码。对于这一部分，做你的功课并阅读它，你不会有任何困难找到你正在寻找的东西。

至于：

> 以及如何确保它在启动时替换 explore.exe ？

您可以设置的`vReg_Sz`字符串值

```
// Replace by your custom .exe shell
"Shell"="Explorer.exe" 
```

到您希望默认启动的程序的完整路径。

该字符串位于：

```
HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon 
```

如果要根据登录的用户来设置它，请参考`HCKU\..`而不是`HKML\..`：

```
HKCU\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon 
```

# string - 如何在循环中处理字符串 - MatLab

> ID：16150676
> 
> 赞同：-5
> 
> 时间：2013-04-22T15:19:13.583
> 
> 标签：string, matlab, loops

我有一个包含字符串和值的列的大单元格数组 (m)。

有谁知道如何在循环中使用字符串？例如：如果它们是数字，我会这样做

```
 for i = 1:100
       plot m(:,i)
  end 
```

有没有任何形式可以使用字符串像这样工作？我有 74 个不同的字符串（这就是我想使用循环的原因）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:24:31.047

要使用元胞数组中的元素，请使用花括号 {} 检索存储在每个元胞索引处的数据，如以下循环所示：

```
for i = 1:74
    str = m{i};
    % do something with string
end 
```

# c# - MEF 运行时插件更新问题

> ID：16150677
> 
> 赞同：10
> 
> 时间：2013-04-22T15:19:18.900
> 
> 标签：c#, .net, plugins, mef, updates

# 问题

我的 MEF 代码在运行时未从与 DirectoryCatalog 关联的文件夹中正确更新程序集。插件在运行时成功加载，但是当我更新 dll 并在 DirectoryCatalog 上调用 Refresh 时，程序集没有得到更新。

# 背景

我正在构建一个具有 MEF 容器的 dll，并使用 DirectoryCatalog 来查找本地插件文件夹。我目前从一个简单的 WinForm 调用此 dll，该 dll 设置为使用单独的项目以使用 ShadowCopy，因此我可以覆盖我的插件文件夹中的 dll。我没有使用 FileWatcher 更新此文件夹，而是公开了一个在 DirectoryCatalog 上调用刷新的公共方法，因此我可以随意更新程序集而不是自动更新程序集。

# 代码

基类实例化 MEF 目录和容器，并将它们保存为类变量以供以后引用访问

```
 public class FieldProcessor
{
    private CompositionContainer _container;
    private DirectoryCatalog dirCatalog;

    public FieldProcessor()
    {
        var catalog = new AggregateCatalog();
        //Adds all the parts found in the same assembly as the TestPlugin class
        catalog.Catalogs.Add(new AssemblyCatalog(typeof(TestPlugin).Assembly));
        dirCatalog = new DirectoryCatalog(AppDomain.CurrentDomain.BaseDirectory + "Plugin\\");
        catalog.Catalogs.Add(dirCatalog);

        //Create the CompositionContainer with the parts in the catalog
        _container = new CompositionContainer(catalog);
    }

    public void refreshCatalog()
    {
        dirCatalog.Refresh();
    }

} ... 
```

这是我要覆盖的插件。我的更新测试是返回的字符串输出到文本框，我更改插件返回的字符串，重建，并将其复制到插件文件夹中。但它不会为正在运行的应用程序更新，直到我关闭并重新启动应用程序。

```
[Export(typeof(IPlugin))]
[ExportMetadata("PluginName", "TestPlugin2")]
public class TestPlugin2 : IPlugin
{
    public IEnumerable<IField> GetFields(ContextObject contextObject, params string[] parameters)
    {
        List<IField> retList = new List<IField>();
        //Do Work Return Wrok Results
        retList.Add(new Field("plugin.TestPlugin2", "TestPluginReturnValue2"));
        return retList;
    }
} 
```

# 编辑

进口声明

```
 [ImportMany(AllowRecomposition=true)]
    IEnumerable<Lazy<IPlugin, IPluginData>> plugins; 
```

# 研究

我已经进行了相当广泛的研究，并且在文章和代码示例的任何地方，答案似乎都是，将 DirectoryCatalog 添加到容器并保存该目录的引用，然后在添加新插件后对该引用调用 Refresh，并且它将更新程序集......我正在做的，但它没有显示来自新插件 dll 的更新输出。

# 要求

有没有人见过这个问题，或者知道是什么原因导致我的程序集在运行时没有更新？任何额外的信息或见解将不胜感激。

# 解析度

感谢 Panos 和 Stumpy 提供的链接，这使我找到了解决问题的方法。对于未来的知识寻求者，我的主要问题是 Refresh 方法不会更新程序集，因为新程序集与覆盖的 dll 具有完全相同的程序集名称。对于我的 POC，我刚刚测试了在程序集名称后附加日期的重建，其他一切都相同，它就像一个魅力。他们在下面评论中的链接非常有用，如果您有同样的问题，建议您使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:58:33.670

did you set `AllowRecomposition` parameter to your Import attribut?

```
AllowRecomposition
Gets or sets a value that indicates whether the property or field will be recomposed when exports with a matching contract have changed in the container. 
```

[http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.importattribute(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.importattribute(v=vs.95).aspx)

edit:

DirectoryCatalog doesn't update assemblies, only added or removed: [http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.directorycatalog.refresh.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.directorycatalog.refresh.aspx)

for a work around: [https://stackoverflow.com/a/14842417/2215320](https://stackoverflow.com/a/14842417/2215320)

# java - 如何确保域模型有效？

> ID：16150679
> 
> 赞同：1
> 
> 时间：2013-04-22T15:19:21.693
> 
> 标签：java, spring, jakarta-ee, dozer

我创建了两组模型，我拥有持久化到数据库中并在系统内部使用的实体。我还创建了一组我在 REST 服务中使用的这些对象的 DTO。

我正在使用 Dozer 在它们之间进行翻译。添加验证逻辑并确保“真实”实体保持有效状态的最佳方法是什么？

我知道 Dozer 使用设置器，所以这是否意味着所有域逻辑和验证都应该保存在设置器中（当然以有组织的方式），或者我应该在映射到实体之前验证外部服务中 DTO 的状态？这听起来已经是个坏主意，那么最好的方法是什么？不是我提到的那些？请记住，如果这对答案有任何影响，我会使用 Dozer 来映射对象。

# c++ - 为什么combine7的性能比combine5好？

> ID：16150691
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:20:00.910
> 
> 标签：c++, visual-studio-2010, algorithm, visual-c++, stl

**我测试了以下7个函数，我不明白为什么combine7比combine5好。因为它们仅在“（）”的位置上有所不同。**

有人可以向我解释吗？

这是我的代码：

```
#include "Common.h"

#define PLUS
#ifdef PLUS
#define INDENT 0
#define OP +
#else
#define INDENT 1
#define OP *
#endif
typedef int data_t;
typedef struct
{
    long int len;
    data_t *data;
}vec_rec, *vec_ptr;
vec_ptr new_vec(long int len)
{
    vec_ptr result = (vec_ptr)malloc(sizeof(vec_rec));  //Allocate header structure
    if(!result) return NULL;
    result->len = len;
    if(len > 0)     //Allocate array
    {
        data_t* data = (data_t*)calloc(len, sizeof(data_t));
        if(!data)
        {
            free((void*)result);
            return NULL;
        }
        result->data = data;
    }
    else result->data = NULL;
    return result;
}
int get_vec_element(vec_ptr v, long int index, data_t * dest)
{
    if(index < 0 || index >= v->len) return 0;
    *dest = v->data[index];
    return 1;
}
long int vec_length(vec_ptr v)
{
    return v->len;
}
data_t* get_vec_start(vec_ptr v)
{
    return v->data;
}

void combine5(vec_ptr v, data_t* dest)  
{
    long int i;
    long int length = vec_length(v);
    long int limit = length - 1;
    data_t* data = get_vec_start(v);
    data_t acc = INDENT;

    for(i = 0; i < limit; i += 2)
    {
        acc = (acc OP data[i]) OP data[i + 1];  
    }
    for(; i < length; i++)
        acc = acc OP data[i];
    *dest = acc;
}

void combine7(vec_ptr v, data_t* dest)
{
    long int i;
    long int length = vec_length(v);
    long int limit = length - 1;
    data_t* data = get_vec_start(v);
    data_t acc = INDENT;

    for(i = 0; i < limit; i += 2)
    {
        acc = acc OP (data[i] OP data[i + 1]);
    }
    for(; i < length; i++)
        acc = acc OP data[i];
    *dest = acc;
}

std::mt19937 gen;
int roll_die() {

    std::uniform_int_distribution<> dist(1, 6);

    return dist(gen);

}

int main()
{
    const size_t len = 10000000;
    auto vec_pointer = new_vec(len);

    std::generate(vec_pointer->data, vec_pointer->data + vec_pointer->len, roll_die);
    std::cout << "Initialized datas..." << std::endl;
    /*std::copy(vec_pointer->data, vec_pointer->data + vec_pointer->len, 
        std::ostream_iterator<int>(std::cout, "\t"));*/

    data_t dest = 0;

    utility::CStopwatch stopwatch5;
    combine5(vec_pointer, &dest);
    std::cout << "combine5 elapsed time(microseconds): " << stopwatch5.NowInMicro() << std::endl;

    utility::CStopwatch stopwatch7;
    combine7(vec_pointer, &dest);
    std::cout << "combine7 elapsed time(microseconds): " << stopwatch7.NowInMicro() << std::endl;
} 
```

这是我的结果：

```
Initialized datas...
combine5 elapsed time(microseconds): 16934
combine7 elapsed time(microseconds): 14858 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:52:44.120

`acc = (acc OP data[i]) OP data[i + 1];` 自然是慢于
`acc = acc OP (data[i] OP data[i + 1]);`

因为在第一种情况下，您尝试在不同的操作中访问数据元素 data[i] 和 data[i+1]，这会导致显着的开销，而在第二种情况下，您尝试通过以下操作同时访问它们 `(data[i] OP data[i + 1])`因为它们是相邻的内存位置，并且相互迭代比在单独的时刻访问它们相对更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:22:35.230

如果您真的有兴趣找出导致不同功能执行不同的原因，那么分析编译器生成的汇编代码可能是一个想法。这些函数足够简单，可以在汇编中阅读，即使是通常对此不习惯的人也是如此。

**在函数 3**中，您在每次迭代中取消引用：

```
for(i = 0; i < length; i ++)
{
    *dest = *dest OP data[i];   
} 
```

**在函数 4**中，您只能在最后取消引用：

```
for(i = 0; i < length; i ++)
{
    acc = acc OP data[i];
}
*dest = acc; 
```

**函数 5**更快，因为它只迭代一半的迭代次数。请参阅：[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:25:39.140

目前还不清楚为什么这些应该有很大不同（当然，fatih_k 的解释并不能说服我）。由于您的运算符是可交换的，因此编译器可能想要更改顺序（取决于编译器标志）。您是否尝试过不同的编译器标志（特别是优化标志）和不同的编译器（clang、gcc、icpc）？

另外，以下形式的循环体的表现如何？

```
 {
    acc *= data[i];
    acc *= data[i+1];
 } 
```

附注：避免使用那些糟糕的宏。改为编写模板代码。

# javascript - JQuery Tools Scrollable——停止动画？

> ID：16150696
> 
> 赞同：0
> 
> 时间：2013-04-22T15:20:24.813
> 
> 标签：javascript, jquery, jquery-tools, scrollable

我有一个接受输入的框，然后使用可滚动的`seekTo`方法`keyup`转到特定幻灯片。问题是，如果有人快速键入，则可滚动的队列会很大，并且动画需要一段时间才能停止。

我想要的是上`keyup`一个动画停止（除非输入为空）并且新动画开始。我试过`.stop()`在不同的地方放，但似乎没有任何效果。

这是类似于我正在做的事情的小提琴：http: [//jsfiddle.net/QaMZH/](http://jsfiddle.net/QaMZH/)

在框中输入一个数字（例如：1）然后将其更改为另一个数字（例如：2）将使可滚动到该幻灯片编号的动画，但快速更改数字会使一堆动画排队，这可能需要一段时间才能完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T11:13:22.987

我遇到了同样的问题，在搜索了更详细的文档并失败后，我只是深入研究了代码。

事实证明，您需要做的就是在此之前调用它`.seekTo()`：

```
api.getItemWrap().stop(true, false);
api.seekTo($(this).val(), 1000); 
```

where`getItemWrap()`返回动画发生的目标 jQuery 元素。

请参阅[http://jsfiddle.net/QaMZH/4/](http://jsfiddle.net/QaMZH/4/)修改后的版本如何工作。

这是有效的，因为`.seekTo()`方法调用`.animation()`元素上的 jQuery 方法，并且您可以[随时取消 jQuery 动画`.stop()`](http://api.jquery.com/stop/)。

# ruby - Sinatra 待办事项列表教程问题

> ID：16150700
> 
> 赞同：1
> 
> 时间：2013-04-22T15:20:36.967
> 
> 标签：ruby, sinatra

所以，我是 Ruby/Sinatra 的新手，上过很多 codecademy 课程之类的。我决定在我真正构建一些东西之前，我不会真正理解一些核心概念。

我找到了一个在 Sinatra 中构建待办事项列表应用程序的[教程](http://net.tutsplus.com/tutorials/ruby/singing-with-sinatra-the-recall-app-2/)，一切都很好，直到我开始使用编辑和删除功能。我可以读写数据库，但每当我尝试编辑或删除时，它都会直接跳到“找不到注释”。

我自己想不通，所以我问了我的一个开发者朋友。当我将代码发送给他时，对他来说一切都很好！我们尝试了几种不同的可能修复方法，但没有结束。我什至从那家伙的[github](https://github.com/danharper/Singing-with-Sinatra/tree/master/Track%202%20-%20The%20Good%20Life%20%28The%20Recall%20App%29)下载了代码，以防万一我自己的代码中的某个地方出现随机错误，但无济于事。

所以，我来这里寻求帮助！为什么这行不通！

澄清：这是一些代码，我认为问题可能出在哪里。在edit.erb 和delete.erb 中，无论它是什么都将转到else 语句并将我发送到“note not found”。它从数据库中正确读取，因为我的主页可以添加和显示注释。

召回.rb

```
get '/:id' do
    @note = Note.get params[:id]
    @title = "Edit note ##{params[:id]}"
    erb :edit
end

put '/:id' do
    n = Note.get params[:id]
n.content = params[:content]
n.complete = params[:complete] ? 1 : 0
n.updated_at = Time.now
n.save
redirect '/'
end

get '/:id/delete' do
    @note = Note.get params[:id]
    @title = "Confirm deletion of note ##{params[:id]}"
    erb :delete
end

delete '/:id' do
    n = Note.get params[:id]
    n.destroy!
    redirect '/'
end 
```

编辑.erb

```
<% if @note %>
  <form action="/<%= @note.id %>" method="post" id="edit">
    <input type="hidden" name="_method" value="put">
    <textarea name="content"><%= @note.content %></textarea>
    <input type="checkbox" name="complete" <%= "checked" if @note.complete %>>
    <input type="submit">
  </form>
  <p><a href="/<%= @note.id %>/delete">Delete</a></p>
<% else %>
  <p>Note not found.</p>
<% end %> 
```

删除.erb

```
<% if @note %>
  <p>Are you sure you want to delete the following note: <em>"<%= @note.content %>"</em>?</p>
  <form action="/<%= @note.id %>" method="post">
    <input type="hidden" name="_method" value="delete">
    <input type="submit" value="Yes, Delete It!">
    <a href="/<%= @note.id %>">Cancel</a>
  </form>
<% else %>
  <p>Note not found.</p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:30:10.103

将 delete-route 移到其他路由之上似乎对我有用，这表明`/:id`路由定义中的 -part 也捕获了`/delete`-part。你可以看到生成的正则表达式`Sinatra::Application.routes`。

这是一个最小的：

```
require 'rubygems'
require 'sinatra'
require 'dm-core'
require 'dm-migrations'
require 'dm-sweatshop'

# Models
DataMapper.setup(:default, 'sqlite::memory:')

class Note
  include DataMapper::Resource
  property :id, Serial
  property :content, Text, :required => true
  property :complete, Boolean, :default => false
  property :created_at, DateTime, :default => lambda {Time.now}
  property :updated_at, DateTime

  before(:save) { attribute_set(:updated_at, Time.now) }
end

DataMapper.finalize.auto_migrate!

# Fixtures
Note.fix {{
  :content => /\w+/.gen
}}

100.of { Note.gen }

# Routes
before("/:id") {|id| @note = Note.get id }

get("/:id/delete") {|id| @note = Note.get id; erb :delete }

get("/:id") { erb :edit }

put "/:id" do
  @note.attributes = params["note"]
  @note.save ? redirect(to("/")) : erb(:edit)
end

delete("/:id") { @note.destroy; redirect(to("/")) }

# Templates
template :layout do
  '<!DOCTYPE html>
  <html>
    <body><%= yield %></body>
  </html>'
end

template :edit do
  '<% if @note %>
    <form action="/<%= @note.id %>" method="POST">
      <input type="hidden" name="_method" value="PUT">
      <textarea name="note[content]"><%= @note.content %></textarea>
      <input type="checkbox" name="note[complete]"
        <%= @note.complete? && "checked" %> >
      <input type="submit">
    </form>
    <p><a href="/<%= @note.id %>/delete">Delete</a></p>
  <% else %>
    <p>Note not found.</p>
  <% end %>'
end

template :delete do
  '<% if @note %>
    <p>Are you sure you want to delete the following note:
      <em>"<%= @note.content %>"</em>?</p>
    <form action="/<%= @note.id %>" method="POST">
      <input type="hidden" name="_method" value="DELETE">
      <input type="submit" value="Yes, Delete it!">
      <a href="/<%= @note.id %>">Cancel</a>
    </form>
  <% else %>
    <p>Note not found</p>
  <% end %>'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T19:44:45.100

我不知道这是否仍然是有趣的人，但一个简单的

```
params[:id].to_i 
```

为我修好了。

# eclipse - java.lang.NoClassDefFoundError: com/sybase/jdbcx/SybConnection weblogic

> ID：16150706
> 
> 赞同：1
> 
> 时间：2013-04-22T15:20:45.550
> 
> 标签：eclipse, spring-mvc, sybase, weblogic-10.x

当我调用在 WebLogic 10.3.5 上使用 Sybase DB 的 rest web 服务时，我遇到了错误。我定义了一个 JNDI 数据源，我测试了连接并且它是成功的。

```
 java.lang.NoClassDefFoundError: com/sybase/jdbcx/SybConnection
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:630)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:614)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at weblogic.utils.classloaders.GenericClassLoader.defineClass(GenericClassLoader.java:343)
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:302)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:270)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:305)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:246)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:179)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at weblogic.utils.classloaders.GenericClassLoader.defineCodeGenClass(GenericClassLoader.java:523)
    at weblogic.utils.classfile.utils.CodeGenerator.generateClass(CodeGenerator.java:73)
    at weblogic.utils.wrapper.WrapperFactory.generateWrapperClass(WrapperFactory.java:340)
    at weblogic.utils.wrapper.WrapperFactory.getWrapperClass(WrapperFactory.java:244)
    at weblogic.utils.wrapper.WrapperFactory.getWrapperClass(WrapperFactory.java:190)
    at weblogic.jdbc.wrapper.JDBCWrapperFactory$1.run(JDBCWrapperFactory.java:164)
    at java.security.AccessController.doPrivileged(Native Method)
    at weblogic.jdbc.wrapper.JDBCWrapperFactory.getWrapper(JDBCWrapperFactory.java:161)
    at weblogic.jdbc.pool.Driver.allocateConnection(Driver.java:251)
    at weblogic.jdbc.pool.Driver.connect(Driver.java:164)
    at weblogic.jdbc.jts.Driver.getNonTxConnection(Driver.java:651)
    at weblogic.jdbc.jts.Driver.connect(Driver.java:127)
    at weblogic.jdbc.common.internal.RmiDataSource.getConnection(RmiDataSource.java:364)
    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    at org.mybatis.spring.SqlSessionUtils.getSqlSession(SqlSessionUtils.java:116)
    at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
    at $Proxy102.selectOne(Unknown Source)
    at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:154)
    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:75)
    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:38)
    at $Proxy103.getAssetMap(Unknown Source)
    at com.pbc.service.AssetController.GetHashMap(AssetController.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused by: java.lang.ClassNotFoundException: com.sybase.jdbcx.SybConnection
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:297)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:270)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:305)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:246)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:179)
    ... 61 more 
```

jconn3.jar 在类路径中，而且我看到它在服务器启动时被加载。我很无助，我到处寻找，但徒劳无功。

# algorithm - 将其从递归更改为迭代

> ID：16150709
> 
> 赞同：1
> 
> 时间：2013-04-22T15:20:51.260
> 
> 标签：algorithm, recursion, iteration

一些伪代码：

```
 func F(int x. int y, array p){
       p[x] = 1;
       if (x<=y){
          for each item in getItems(x,p){
              p = F(item,y,p);
          }
       }
       return p;
    } 
```

getItems() 返回一个基于 x 和 p 的数字数组，对于这个问题并不重要，但它返回一些高于和低于 x 的数字。然而，这意味着如果 x 太大，那么我会炸毁递归堆栈，因为它会深入到 x 之下。

如何将其更改为迭代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:39:49.090

您可以通过模拟调用堆栈来做到这一点：

```
struct stackentry {
    int x;
    Item item; // see exercise for reader, below
};

func F(int x, int y, array p){
   dynamic_list_of_stackentry mystack;
  start:
   p[x] = 1;
   if (x<=y){
      for each item in getItems(x,p){
          mystack.push(stackentry(x, item));
          x = item
          goto start
        resume:
          x = mystack.top().x;
          item = mystack.top().item;
          mystack.pop();
      }
   }
   if mystack.size() > 0:
      goto resume
   return p;
} 
```

留作练习：更改迭代，以便您可以将当前迭代的集合 (from `getItems()`) 和您在其中的当前位置存储为堆栈条目的一部分。

我并不是说这是优雅的代码，但是您可以从与递归函数相同的非递归函数的这个起点进行重构。例如，您的下一步可能是：

```
func F(int x, int y, array p){
   dynamic_list_of_int mystack;
   mystack.push(x)
   while not mystack.empty() {
       x = mystack.top();
       mystack.pop();
       p[x] = 1;
       if (x <= y) {
           for each item in reversed(getItems(x,p)) {
               mystack.push(item);
           }
       }
   }
   return p;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:06:55.137

您可以通过添加一个防止您双重处理`x`值的保护来保留递归版本（没有堆栈溢出）

```
func F(int x. int y, array p){
   if(p[x] != 1) {
       p[x] = 1;
       if (x<=y){
           for each item in getItems(x,p){
               p = F(item,y,p);
          }
       }
   }
   return p;
} 
```

如果您的某些数组值可能已初始化为 1，则将其更改为类似

```
if(p[x] != null) {
    p[x] = null; 
```

即分配一个您知道未在初始数组中使用的值。然后当函数完成其处理时，遍历数组并将所有空值设置为 1。

# php - 发送 cookie 的 Php Soap 请求 - 我无法发送 cookie

> ID：16150712
> 
> 赞同：1
> 
> 时间：2013-04-22T15:20:57.243
> 
> 标签：php, web-services, cookies, curl

简介：我正在尝试通过使用 web 服务来实现一些文件。这个网络服务让我可以自由地调用基本方法，但是当涉及到严重的方法时，它需要一个 cookie，我的会话将使用那个 cookie 建立。

我的问题：我尝试了两种方法，首先我通过 setcookie() 函数创建了普通 cookie，然后创建了一个类似 cookie 的文件。第二个起作用了，现在我的连接自己创建了一个 cookie 文件。现在我必须为复杂/严重的功能发送相同的 cookie 文件。

但它不起作用。

如果我的问题不清楚，请具体询问，请帮助我。

那是成功创建cookie文件。

```
$soap_do = curl_init($url);
curl_setopt($soap_do, CURLOPT_COOKIEJAR, "/mypath/testFile3.txt");
curl_setopt($soap_do, CURLOPT_HTTPHEADER,     $header);
curl_setopt($soap_do, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($soap_do, CURLOPT_MAXREDIRS, 8);
curl_setopt($soap_do, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($soap_do, CURLOPT_POSTFIELDS,     $soap_request);
$result = curl_exec($soap_do); 
```

下面你会看到我试图通过 curl 发送 cookie 文件的代码，这部分不起作用。

```
$soap_do2 = curl_init($url);
curl_setopt($soap_do2, CURLOPT_COOKIEJAR, "/mypath/testFile3.txt");
curl_setopt($soap_do2, CURLOPT_HTTPHEADER, $header2);
curl_setopt($soap_do2, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($soap_do2, CURLOPT_MAXREDIRS, 8);
curl_setopt($soap_do2, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($soap_do2, CURLOPT_POSTFIELDS,     $soap_request2);
$result2 = curl_exec($soap_do2); 
```

如您所见，它是相同的代码o_O，因为我不知道该怎么做，请再次提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:30:35.773

Also see: [http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php) use `CURLOPT_COOKIEJAR` to store your cookie and `CURLOPT_COOKIEFILE` (or `CURLOPT_COOKIE`) to send the cookie.

So soap_do2 needs `curl_setopt($soap_do2, CURLOPT_COOKIEFILE, "/mypath/testFile3.txt");`

Maybe your `$soap_request2` is empty or incorrect.

When i do a GetContactInfo() call to this service without any parameter i got the same error. When is send an empty or nonsense parameter like `new SoapParam(new stdClass(), "test")` i got the right response.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:37:37.290

我发现了我的问题。

正如@Bass Jobsen 所说，我们可以使用 CURLOPT_COOKIEJAR 存储 cookie，并使用 CURLOPT_COOKIEFILE 发送 cookie。那是一个问题。正如他所说，我改变了我的代码，它现在可以工作了。

我的第二个错误：我每次都在代码开头创建cookie文件。现在我删除了那部分。

工作代码：

```
$soap_do = curl_init($url);
curl_setopt($soap_do, CURLOPT_COOKIEJAR, "/home/mypath/testFile3.txt");
curl_setopt($soap_do, CURLOPT_HTTPHEADER,     $header);
curl_setopt($soap_do, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($soap_do, CURLOPT_MAXREDIRS, 8);
curl_setopt($soap_do, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($soap_do, CURLOPT_POSTFIELDS,     $soap_request);
$result = curl_exec($soap_do); 
```

上面，我告诉 web 服务哪个文件（具有确切路径）存储 cookie 值。

```
$soap_do2 = curl_init($url);
curl_setopt($soap_do2, CURLOPT_HTTPHEADER, $header2);
curl_setopt($soap_do2, CURLOPT_COOKIEFILE, "/home/mypath/testFile3.txt");
curl_setopt($soap_do2, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($soap_do2, CURLOPT_MAXREDIRS, 8);
curl_setopt($soap_do2, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($soap_do2, CURLOPT_POSTFIELDS,     $soap_request2);
$result2 = curl_exec($soap_do2); 
```

上面，我用 CURLOPT_COOKIEFILE 发送 cookie 文件

希望对其他人有所帮助。

# asp.net-mvc - 创建 MVC 项目的开发副本

> ID：16150713
> 
> 赞同：0
> 
> 时间：2013-04-22T15:20:59.090
> 
> 标签：asp.net-mvc, entity-framework, ado.net

我创建了一个 ADO.NET、MVC4、EF5 项目，它在实体和内置成员资格提供程序的`User`.

我已经将我的存储库克隆（使用 git）到外部服务器，并设置了一个同名的数据库并运行`.edmx.sql`由 ADO.NET 创建的文件。

当我在外部服务器上运行我的站点时，出现以下异常：“列名 'User_UserId' 无效。”

查看数据库，我可以看到尚未创建用户、角色等表。

进行这种部署并纠正我的困境的最佳方法是什么？

* * *

**更新**

因此，我通过从本地计算机上的数据库编写脚本将有问题的表（用户、角色、用户角色、应用程序）添加到数据库中，但仍然发生相同的错误。

这似乎是`System.Web.Security.Membership`.

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:08:02.407

好的！设法做到了。所以对于其他有同样问题的人 - 试试这个：

1.  在外部服务器上创建一个新数据库
2.  在该数据库上运行`.edmx.sql`文件
3.  将连接字符串更改为您的服务器名称
4.  在本地运行站点 - 这将创建用户、角色等表

# ruby - 红宝石，递归方法

> ID：16150722
> 
> 赞同：0
> 
> 时间：2013-04-22T15:21:16.967
> 
> 标签：ruby, recursion

我有一个基本上是一个循环的方法，它每次都会在最后调用自己。当日期到达某个点时，该方法不调用自身的最佳方法是什么？每次迭代都会增加 1 天，并且基本上会处理当天的统计数据。如下所示：

```
def loop(start_day)
  date = start_day

  #do a bunch of stuff

  date = date +1.day

  if date > Time.now
    puts "loop should be over"
  end

  loop(date)
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:25:19.873

由于您设置`date`为`start_date`立即，因此两者兼有似乎没有意义。这是进行递归的更规范的形式：

```
def loop(date)
  return if date > Time.now
  #do a bunch of stuff
  loop(date + 1.day)
end 
```

**更新：**如果你不明白这里不需要递归，在现实生活中，做这样的事情会更有意义：

```
def process_from(date)
  while date <= Time.now
    # Process date
    date += 1.day
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T15:25:38.263

> 每次迭代增加 1 天

您发布的代码并非如此。在您的代码中，您将 1 天添加到开始日期*一次*，然后您会一遍又一遍地处理相同的日期，因为您递归的是旧日期 ( `start_date`)，而不是递增的日期 ( `date`)。

> 当日期到达某个点时，该方法不调用自身的最佳方法是什么？

只需将递归调用放在 an 内，`if`或者在这种情况下，放在您已经拥有`else`的 the内。`if`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:24:56.027

那这个呢？

```
def loop(start_day)
  return "loop should be over" if start_day >= Time.now
  #...
  loop(modified_date)
end 
```

或者...

```
def loop(start_day)
  date = start_day.dup
  time = Time.now
  date += 1.day while date <= time
  'loop should be over'
end 
```

似乎您想从开始日期到今天迭代所有天。那么也许这更简单：

```
def map_date(date)
  (date.to_date..Date.today).map do |d|
    d.strftime("Today is %A")
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:26:21.473

您必须具有递归函数的基本情况（停止情况）；

例子：

```
def loop(date)
    if date == certain_point
      return [something_for_stop]
    end

    loop(date - 1)
end 
```

# c - 与结构指针一起使用的 -> 运算符也可以用于联合指针吗？

> ID：16150723
> 
> 赞同：1
> 
> 时间：2013-04-22T15:21:20.720
> 
> 标签：c

假设我有以下代码

```
union test
{
int salary[10];
short ages[20];
} *ptr; 
```

那么我可以将薪水的第二个元素指向`ptr->salary[1]`吗？还是我用`ptr.salary[1]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:27:37.580

用法`ptr.salary[1]`不正确，因为`ptr`指针仍然独立于它指向的类型。

正确的方法是：

```
ptr->salary[1] 
```

或者

```
(*ptr).salary[1] 
```

在第二种情况下，不要忘记`()`as`*`的优先级低于`.`.

# javascript - 将多个值/可观察值传递给自定义绑定

> ID：16150724
> 
> 赞同：0
> 
> 时间：2013-04-22T15:21:21.073
> 
> 标签：javascript, knockout.js

我正在做一个简单的自定义绑定，它接受一个普通的 observable 并将 observable 的值添加到绑定元素的 css 类列表中，如下所示：

```
<div class="container" data-bind="cssClassBinding: state">
</div>

ko.bindingHandlers.cssClassBinding = {//simplified example code
    init: function (element, valueAccessor) {
        $(element).addClass(ko.utils.unwrapObservable(value));
    },
} 
```

我想要做的是能够用这个绑定绑定多个值。我尝试只放置另一个具有不同值的绑定，但 KO 显然只评估每个元素的一个实例。

```
//won't work
<div class="container" data-bind="cssClassBinding: state, cssClassBinding: type">
</div> 
```

所以我想看看我是否可以这样做：

```
<div class="container" data-bind="cssClassBinding: {state, type}">
</div>

ko.bindingHandlers.cssClassBinding = {//simplified example code
    init: function (element, valueAccessor) {
        foreach (observableValue in iDon'tKnowWhere)
            $(element).addClass(ko.utils.unwrapObservable(observableValue));
    },
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-27T19:59:56.907

绑定多个可观察对象的另一种方法是在绑定中创建一个对象：

```
<div data-bind="exampleBinding: { State: state, Type: type }"></div> 
```

然后自定义绑定将通过 valueAccessor 访问这些属性（这假设 state 和 value 是视图模型上的剔除 observables）：

```
ko.bindingHandlers.exampleBinding = {
    init: function (element, valueAccessor) {
        var value = valueAccessor();
        // read properties
        console.log(value.State());
        console.log(value.Type());
        // update properties
        value.State('test1');
        value.Type('test2');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:33:26.890

我发现的最简单的方法就是处理绑定一个可观察的数组，如下所示：

```
<div class="container" data-bind="cssClassBinding: [state, type]">
</div> 
```

只需编写自定义绑定以检查它是否为数组。

# validation - p：对话框因 ajax="false" 提交的验证错误而关闭，如何保持对话框打开？

> ID：16150728
> 
> 赞同：5
> 
> 时间：2013-04-22T15:21:25.400
> 
> 标签：validation, jsf, primefaces, dialog, download

我有以下`<p:dialog>`

```
<p:dialog id="dlgDownload" header="#{appmsg['header.download.popup']}" widgetVar="downloadDlg" resizable="true" modal="true" closable="true" width="640" dynamic="false">
    <h:form id="frmDownload">
        <ui:include src="downloadDialog.xhtml" />
    </h:form>
</p:dialog> 
```

包含文件包含以下下载按钮：

```
<p:commandButton id="btnDlgDownload" value="#{appmsg['action.download.label']}" title="#{appmsg['action.download.label']}" 
    icon="ui-icon-arrowthickstop-1-s" ajax="false"  oncomplete="if (!args.validationFailed){downloadDlg.hide();} else {downloadDlg.show();}" process="@this" update=":#{p:component('pnlDownload')}" >
    <p:fileDownload value="#{downloadController.downloadFile()}" />
</p:commandButton> 
```

这`<p:fileDownload>`用于下载文件，这意味着我必须使用`ajax="false"`for`<p:fileDownload>`来触发。

但是如果对话框中的验证失败，那么我会看到对话框窗口被关闭。我希望错误消息显示在对话框窗口中，而不是在主页中。

如何保持对话框打开，以便在对话框窗口中显示错误消息？

* * *

@Balusc请在SSCCE上找到我的尝试基本上下载按钮所在的parent.xhtml和p：dialog上嵌入了downloadDialog.xhtml

```
 <p:messages id="globalMessages" globalOnly="true" showDetail="true"
        showSummary="true" closable="true" />
    <h:form = "parentForm" >
                    <p:commandButton id="btnDownload"
                        value="Download"
                        title="Download"
                 icon="ui-icon-arrowthickstop-1-s" onclick="downloadDlg.show();">
            </p:commandButton>
</h:form>
    <p:dialog id="dlgDownload" header="Download" widgetVar="downloadDlg" resizable="true" 
         modal="true" closable="true" width="640" dynamic="false" visible="#{frmDownload.submitted and facesContext.validationFailed}">
        <h:form id="frmDownload" binding="#{frmDownload}">
        <ui:include src="downloadDialog.xhtml" />
        </h:form>
    </p:dialog> 
```

里面downloadDialog.xhtml

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui"
        xmlns:pe="http://primefaces.org/ui/extensions">

        <p:outputPanel id="pnlDownload">
    <h:panelGrid id="dateDisplayGrid" columns="4" style="margin-bottom:10px" cellpadding="5" rendered="#{downloadForm.displayDates}">
    <p:calendar id="strtdt"  readonlyInput="true" size="12" value="#{downloadForm.startDate}" >
                </p:calendar>
                <h:outputText value="#{appmsg['label.to']}" />              
    <p:calendar id="enddt"  readonlyInput="true" size="12" value="#{downloadForm.endDate}"
                pattern="#{dateFormatting.shortDateFormat}" navigator="true"  >
                <f:validator validatorId="dateRangeValidator" />
                <f:attribute name="startDate" value=":#{p:component('strtdt')}" />          
                </p:calendar>
                <p:message id="dateError" for="enddt"  showDetail="true" showSummary="false"></p:message>           
            </h:panelGrid>
    <p:commandButton id="btnDlgDownload" value="Download" title="Download" 
                     icon="ui-icon-arrowthickstop-1-s" ajax="false"  oncomplete="if(!args.validationFailed)downloadDlg.hide();" >
    <p:fileDownload value="#{downloadController.downloadFile()}" />
                </p:commandButton>

                <p:button id="btnDlgCancel" value="#{webmsg['action.cancel']}" onclick="downloadDlg.hide(); return false" href="#" />
        </p:panel>
    </p:outputPanel>
</ui:composition> 
```

当我点击对话框窗口上的下载按钮时，错误会显示在父 html 上，并且对话框保持关闭状态。但是当我点击父页面上的下载按钮时，对话框窗口会重新出现，并在内部对话框窗口中包含错误消息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T15:56:26.133

如果将**downloadFile**方法的一部分委托给另一个方法怎么办？

在这种情况下，您将需要使用 ajax调用的另一种方法（我们称之为**prepareDownloadFile ）。**此方法完成后，您可以检查错误。如果一切顺利，您可以调用 remoteCommand（使用 ajax=false）将文件发送给用户。

另一个想法是使用 iframe。看看这篇[文章](http://encosia.com/ajax-file-downloads-and-iframes/)。

希望有帮助！

# c# - ToolStripDropDown 丢失鼠标自动关闭

> ID：16150737
> 
> 赞同：1
> 
> 时间：2013-04-22T15:22:00.273
> 
> 标签：c#, winforms, toolstripdropdown

不知道如何解释，但是：

*   有一个控件`MyPopup`，做出来的`ToolStripDropDown`；
*   有很多基于`MyPopup`控件（称为弹出窗口）；
*   **从**;打开弹出窗口没有`Form`问题
*   但是**从**弹出窗口打开弹出窗口有**问题**。

 **问题是在子弹出窗口关闭后，即使父窗口`Form`获得焦点，父弹出窗口仍保留在屏幕上。关闭卡住的父弹出窗口的唯一方法是（用鼠标）将注意力集中在它上并点击`Esc`.

为了让弹出窗口能够显示另一个弹出窗口，我必须欺骗`Closing`事件：

```
 void Popup_Closing(object sender, ToolStripDropDownClosingEventArgs e)
    {
        // prevent from closing when stay
        if (_stay && e.CloseReason != ToolStripDropDownCloseReason.CloseCalled )
        {
            e.Cancel = true;
            return;
        }
    } 
```

在关闭子弹出窗口之前或之后，父弹出窗口具有：

*   `_stay`的值为`False`;
*   的`Popup.AutoClose`值为`True`;

我尝试使用以下内容将鼠标焦点“带回”父弹出窗口：

*   `TopLevel=true`没运气;
*   `Focus();`没运气;
*   `Focused=true;`没运气;
*   `AutoClose=true;`没运气;
*   `Captured=true;`没运气;

还尝试将上述值设置为`False`然后设置为`True`，仍然没有运气。

这里还有一些代码，可能有用也可能没用：

```
public class MyPopup : UserControl
{
    protected bool _stay = false;

    private ToolStripDropDown _popup;
    private ToolStripControlHost _host;

    public MyPopup()
    {
        // create popup
        _popup = new ToolStripDropDown();
        _popup.Margin = _popup.Padding = Padding.Empty;
        _popup.AutoSize = false;
        _popup.Closing += Popup_Closing;
        // add host
        _host = new ToolStripControlHost(this);
        _host.Margin = _host.Padding = Padding.Empty;
        _host.AutoSize = false;
        _popup.Items.Add(_host);
    }

    public void Show(Control parent, int x, int y)
    {
        _popup.Show(parent, x, y);
    }

    public new void Hide()
    {
        _popup.Close();
    }

    private void Popup_Closing(object sender, ToolStripDropDownClosingEventArgs e)
    {
        // prevent from closing when stay
        if (_stay && e.CloseReason != ToolStripDropDownCloseReason.CloseCalled )
        {
            e.Cancel = true;
            return;
        }
    }

    protected void PopupChildClosedDefaultEvent(object sender, EventArgs e)
    {
        // hide popup if mouse is outside of client region when closing child popup
        if (!ClientRectangle.Contains(PointToClient(MousePosition)))
            Hide();
        else
        {
            // >> here I am trying different things <<
            _popup.AutoClose = false;
            _popup.AutoClose = true;
        }
    }
}

public class PopupParent: MyPopup
{
    private void TestChildren()
    {
        _stay = true;
        PopupChild popup = new PopupChild();
        popup.Show(button1, 0, 0);
        popup.Closed += PopupChildClosedDefaultEvent;
        _stay = false;
    }
}

public class PopupChild: MyPopup
{
} 
```

问题：**在鼠标事件（单击客户区域外的某处）失去自动关闭能力后，有什么方法可以修复“损坏的”弹出窗口？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:42:01.043

好的，早上给大脑带来了一些新鲜感，我设法通过以下方式解决了这个问题：

```
 _popup.Close();
            _popup.Show(_parent, _x, _y); 
```

所以我必须重新显示弹出窗口才能让它像以前一样运行。它闪烁，但有效。**

# c++ - C++ 通过 const 引用传递 const 指针

> ID：16150738
> 
> 赞同：6
> 
> 时间：2013-04-22T15:22:03.843
> 
> 标签：c++, constants

嗯，在 VC2012 中是一个奇怪的问题，我似乎无法弄清楚通过 const 引用将 const 指针传递给模板参数是非 const 指针的模板化类的函数的语法，即：

```
template<typename T>
struct Foo
{
    void Add( const T& Bar ) { printf(Bar); }
};

void main()
{
Foo<char*> foo;
const char* name = "FooBar"; 
foo.Add(name);                 // Causes error
} 
```

所以我在这里简化了我的问题，但基本上我希望“添加”的参数有一个 const T 即 const char*。我试过了：

```
void Add( const (const T)& Bar ); 

typedef const T ConstT;
void Add( const (ConstT)& Bar );  

void Add( const typename std::add_const<T>::type& Bar ); 
```

这些都不起作用。我得到的确切错误是：

```
error C2664: 'Foo<T>::Add' : cannot convert parameter 1 from 'const char *' to 'char *const &'
          with
          [
              T=char *
          ]
          Conversion loses qualifiers 
```

我可以看到是正确的，但是如何在没有 const 将“名称”转换为非 const 的情况下解决它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T15:40:20.747

There is a strong difference between a pointer to a constant object (`T const*`, or `const T*`) and a constant pointer to a non-constant object (`T * const`). In your case the signature of the member `Add` is:

```
void Foo<char *>::Add(char * const& ); // reference to a constant pointer to a 
                                       // non-constant char 
```

I usually recommend that people drop the use of `const` on the left hand side exactly for this reason, as beginners usually confuse `typedef`s (or deduced types) with type substitution and when they read:

```
const T& [T == char*] 
```

They misinterpret

```
const char*& 
```

If the `const` is placed in the *right* place:

```
T const & 
```

Things are simpler for beginners, as plain mental substitution works:

```
char * const & 
```

* * *

A different problem than what you are asking, but maybe what you think you want, is:

*Given a type `T` have a function that takes a `U` that is `const T` if `T` is not a pointer type, or `X const *` if `T` is a pointer to `X`*

```
template <typename T>
struct add_const_here_or_there {
    typedef T const type;
};
template <typename T>
struct add_const_here_or_there<T*> {
    typedef T const * type;
}; 
```

Then you can use this in your signature:

```
template <typename T>
void Foo<T>::Add( const typename add_const_here_or_there<T>::type & arg ) {
     ... 
```

Note that I am adding two `const` in the signature, so in your case `char*` will map to `char const * const &`, as it seems that you want to pass a `const&` to something and you also want the pointed type to be `const`.

You might have wondered as of the name for the metafunction: *add_const_here_or_there*, it is like that for a reason: there is no simple way of describing what you are trying to do, which is usually a code smell. But here you have your solution.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:40:30.463

看起来像您的问题，因为一旦您将指针类型映射到模板类型，您就不能再将 const-ness 添加到指向的类型，只能添加到指针本身。看起来您正在尝试做的是自动将 constness 添加到函数的参数中（因此，如果 T 是`char*`函数应该接受`const char* const&`而不是`char* const&`像您编写的那样）。做到这一点的唯一方法是使用另一个模板为指针类型的指针添加常量，如下所示。我冒昧地添加了丢失的标题并更正了以下签名`main`：

```
#include <cstdio>

template<typename T>
struct add_const_to_pointee
{
    typedef T type;
};

template <typename T>
struct add_const_to_pointee<T*>
{
    typedef const T* type;
};

template<typename T>
struct Foo
{
    void Add( typename add_const_to_pointee<T>::type const & Bar ) { printf(Bar); }
};

int main()
{
    Foo<char*> foo;
    const char* name = "FooBar";
    foo.Add(name);                 // Causes error
} 
```

然而，正如另一个人所提到的，如果您使用`std::string`而不是 C 风格的字符串，这个问题就会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:03:34.743

如果传递`const char*`而不是`char*`to`Foo`不是一个选项，您可以使用`std::remove_pointer`. 这将删除指针修饰符并允许您提供更明确的类型。

```
#include <type_traits>

template<typename T>
struct Foo
{
    void Add(typename std::remove_pointer<T>::type const*& Bar ) { printf(Bar); }
}; 
```

为了防止指针值被修改，您也可以声明引用`const`。

```
void Add(typename std::remove_pointer<T>::type const* const& Bar )
{ Bar = "name"; } // <- fails 
```

如果您需要将类型从*指针减少到指针，*您可以`std::decay`使用`std::remove_pointer`

```
void Add(typename std::remove_pointer<typename std::decay<T>::type>::type const*& Bar)
{
    printf(Bar);
} 
```

这实际上取决于您的要求`T`。我建议假设只`char`传递基本类型（例如），`T`并从中构建引用和指针类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T15:29:33.960

您需要将 Foo 对象的模板参数更改为`Foo<const char*>`. 因为如果`T=char*`，那么`const T=char*const`，不是`const char*`。试图强迫它工作不是一个好主意，并且可能会导致未定义的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T15:31:17.433

利用：

```
Foo<const char*> foo;
const char* name = "FooBar"; 
foo.Add(name); 
```

写`int main()`而不是`void main()`

# java - 如何在 gwt-visualization 的 LineChart 中更改网格大小？

> ID：16150739
> 
> 赞同：2
> 
> 时间：2013-04-22T15:22:06.713
> 
> 标签：java, gwt, google-api, google-visualization, gwt-visualization

我正在使用 gwt-visualization 的 1.1.1 版本。这是我到目前为止得到的：

```
final DataTable dataTable;
// creation of the data table left out ..

final Options options = Options.create();

final HorizontalAxisOptions horizontalAxisOptions = HorizontalAxisOptions.create();
horizontalAxisOptions.setShowTextEvery(1);

// ... ?

options.setHAxisOptions(horizontalAxisOptions);

LineChart lineChart = new LineChart(dataTable, options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:56:46.587

-`Options.set(key, value)`方法通常可以完成这项工作。但是，必须创建嵌套`Options`对象（或创建包装类，如`HorizontalAxisOptions`），而不是使用点表示法。

但是：日期值存在[问题](http://code.google.com/p/google-visualization-api-issues/issues/detail?id=908)。

一种解决方法可能是使用`minorGridlines`. 我怀疑我最终会进行一个丑陋的日期计算。:-(

其他建议？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T19:18:20.083

您需要使用 set 方法但嵌套选项。例如

```
 Options options = Options.create()  //Main option
    Options Haxis = Options.create();
    Options Hgrid = Options.create();
    Hgrid.set("count", 12d);
    Haxis.set("gridlines", Hgrid);
    options.set("hAxis", Haxis);

    Options series_options = Options.create();
    Options series1_options = Options.create();
    series1_options.set("color","#CE5C0A");
    Options series2_options = Options.create();
    series2_options.set("color","blue");
    Options series3_options = Options.create();
    series3_options.set("color","#6600CC");
    Options series4_options = Options.create();
    series4_options.set("color","#00FF00");
    series_options.set("0",series1_options);
    series_options.set("1",series2_options);
    series_options.set("2",series3_options);
    series_options.set("3",series4_options);
    options.set("series",series_options); 
```

第一个块我嵌套了将 hAxis.gridlines.count 参数设置为 12 的选项。

第二块我嵌套了很多选项来设置系列的颜色。

# ruby-on-rails - 如何使用 Postgresql 和 Rails 更新多个表中的相同属性

> ID：16150740
> 
> 赞同：1
> 
> 时间：2013-04-22T15:22:12.717
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, postgresql

为了最大限度地减少我必须在我的应用程序中执行的连接数量，我决定在我的数据库中复制几个表中的相同字段，例如：我有一个用户、产品和愿望清单表。

我的产品页面显示创建产品的用户，愿望清单页面也显示创建它们的用户。

所以我在我的产品和愿望清单表中添加了显示所需信息所需的所有用户字段。

用户更改信息后，如何更新我的产品和愿望清单表中的用户相关字段？

这是我的模型的一部分：

用户表

*   全名
*   用户名
*   头像网址

产品表

*   产品名称
*   产品价格
*   用户身份
*   用户全名
*   用户名
*   用户头像网址

愿望清单表

*   愿望清单名称
*   用户身份
*   用户全名
*   用户名
*   用户头像网址

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:31:42.363

首先，通过以您的方式对数据进行非规范化，您正在处理关系数据库的意图。他们在连接中茁壮成长，并且让每条数据尽可能少地出现。所以你真的想确保这是你想要的模式。

话虽如此，您可以使用基本的 update_attibute 语法来更新任何表中的任何字段。所以，如果用户编辑了他或她的用户名，你会这样做：

```
User.update_attribute(:username, username)
Product.update_attribute(:username, username)
Wishlist.update_attribute(:username, username) 
```

# maven - 如何使用 Maven Cargo 插件将 Web 应用程序包（WAB、OSGI + JavaEE）部署到 Glassfish 3.x

> ID：16150743
> 
> 赞同：2
> 
> 时间：2013-04-22T15:22:27.453
> 
> 标签：maven, glassfish, osgi, cargo, wab

我正在尝试使用 Maven Cargo 插件来部署一组 OSGI 包和一个混合应用程序 .war（带有使用 OSGI 的 Restservice 的 Web 应用程序），也称为 Web 应用程序包（或 WAB）（例如，参见[https://glassfish. java.net/public/GF-OSGi-Features.pdf](https://glassfish.java.net/public/GF-OSGi-Features.pdf)）。

将 OSGI 包部署到 Glassfish 3.1.x 中工作正常，但我还没有找到部署 Web 应用程序包的方法。

它的包装是“战争”，但我必须将它部署为 OSGI 包。那么我怎么能告诉这个 Cargo 插件呢？

我尝试使用的 Maven 配置：

```
 <plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>1.4.0</version>
    <configuration>
      <wait>false</wait>

      <container>
        <containerId>glassfish3x</containerId>
        <home>${glassfish.home}</home>
        <type>installed</type>
      </container>
      <configuration>
        <type>existing</type>
        <home>${glassfish.home}</home>
        <properties>
          <cargo.hostname>localhost</cargo.hostname>
          <cargo.rmi.port>4848</cargo.rmi.port>
          <cargo.domain.name>${glassfish.domain}</cargo.domain.name>
        </properties>
      </configuration>
      <deployables>
        <deployable>
          <groupId>com.acme.rest</groupId>
          <artifactId>rest-api</artifactId>
          <type>bundle</type>
        </deployable>
      </deployables>
    </configuration>
  </plugin> 
```

但出现以下错误：

[错误] 无法在项目 rest-api 上执行目标 org.codehaus.cargo:cargo-maven2-plugin:1.4.0:redeploy (default-cli)：工件 [com.acme.rest:rest-api:bundle] 是不是项目的依赖项。-> [Help 1] org.apache.maven.lifecycle.LifecycleExecutionException: 未能执行目标 org.codehaus.cargo:cargo-maven2-plugin:1.4.0:redeploy (default-cli) on project rest-api: Artifact [ com.acme.rest:rest-api:bundle] 不是项目的依赖项。

部署为组件类型“web”有效，但是我不能使用 OSGI 包......

有人有部署 Web 应用程序包和 OSGI 包的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:00:42.573

我不知道 cargo 插件，但要使用 asadmin 客户端部署 wab，必须通过 --type=osgi 选项，如下所示：

asadmin deploy --type=osgi foo.war

所以，看看你是否可以配置 cargo 插件来传递这个选项。

萨虎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T00:35:38.353

诀窍是：

```
<deployable>
  <groupId>com.acme.rest</groupId>
  <artifactId>rest-api</artifactId>
  <type>war</type>
  <implementation>org.codehaus.cargo.container.deployable.Bundle</implementation>
</deployable> 
```

您仍然有一个 WAR 工件，但 Bundle 会欺骗 Cargo 将其部署为 OSGi。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T03:00:57.430

尝试使用`1.4.7`添加了对发送`asadmin`参数的支持的版本以及@Sahoo 提到的参数。

```
<cargo.glassfish.deploy.arg.1>--type=osgi foo.war</cargo.glassfish.deploy.arg.1> 
```

**允许为 glassfish 部署传递额外参数** [https://jira.codehaus.org/browse/CARGO-1245](https://jira.codehaus.org/browse/CARGO-1245)

# sed - sed 命令返回“无效的命令代码”

> ID：16150744
> 
> 赞同：0
> 
> 时间：2013-04-22T15:22:28.300
> 
> 标签：sed

我正在尝试插入此文本...

```
"error.emailNotActivated":"This email address has not been activated yet." 
```

...在第 5 行使用 sed。

到目前为止，这是我的命令

```
translated="This email address has not been activated yet.";
sed -i '' -e '5i\'$'\n''"error.emailNotActivated":'"\"$translated\"" local.strings; 
```

不幸的是，我不断收到错误消息**"invalid command code T"**。sed 似乎将冒号解释为命令的一部分。有什么建议我可以避免这种情况吗？

编辑：似乎是一个更新错误（使用旧文件 d'oh ...），上面的表达式和其他建议一样工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:18:24.257

你为什么要为此与 sed 斗争？这在 awk 中是微不足道的：

```
awk -v line='"error.emailNotActivated":"'"$translated"'"' '
NR==5{print line} {print}
' file 
```

或者：

```
awk -v line="\"error.emailNotActivated\":\"${translated}\"" '
NR==5{print line} {print}
' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:53:17.900

你在寻找这样的东西吗？

```
$ seq 1 5 > file

$ cat file
1
2
3
4
5

$ translated="\"error.emailNotActivated\":\"This email address has not been activated yet.\""

$ echo $translated 
"error.emailNotActivated":"This email address has not been activated yet."

$ sed -i "5i $translated" file

$ cat file
1
2
3
4
"error.emailNotActivated":"This email address has not been activated yet."
5 
```

# android - 在 FrameLayout 中添加 Google Maps Android API v2 MapFragment 和视图

> ID：16150745
> 
> 赞同：1
> 
> 时间：2013-04-22T15:22:32.513
> 
> 标签：android, google-maps, google-maps-android-api-2, android-framelayout

好的，伙计们，我有一个问题。我正在尝试将 MapFragment 和 View 放在 FrameLayout 中。听起来很基本，但我做不到。我不断得到这个：

```
04-22 17:12:43.261: E/AndroidRuntime(23281): FATAL EXCEPTION: main
04-22 17:12:43.261: E/AndroidRuntime(23281): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testarc/com.example.testarc.MainActivity}: android.view.InflateException: Binary XML file line #17: Error inflating class com.google.android.view.View
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.os.Looper.loop(Looper.java:137)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.ActivityThread.main(ActivityThread.java:5039)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at java.lang.reflect.Method.invokeNative(Native Method)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at java.lang.reflect.Method.invoke(Method.java:511)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at dalvik.system.NativeStart.main(Native Method)
04-22 17:12:43.261: E/AndroidRuntime(23281): Caused by: android.view.InflateException: Binary XML file line #17: Error inflating class com.google.android.view.View
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.Activity.setContentView(Activity.java:1881)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at com.example.testarc.MainActivity.onCreate(MainActivity.java:32)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.Activity.performCreate(Activity.java:5104)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-22 17:12:43.261: E/AndroidRuntime(23281):    ... 11 more
04-22 17:12:43.261: E/AndroidRuntime(23281): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.google.android.view.View" on path: /data/app/com.example.testarc-2.apk
04-22 17:12:43.261: E/AndroidRuntime(23281):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
04-22 17:12:43.261: E/AndroidRuntime(23281):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
04-22 17:12:43.261: E/AndroidRuntime(23281):    ... 22 more 
```

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <fragment
            android:id="@+id/map"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            class="com.google.android.gms.maps.MapFragment" />

        <view
            android:id="@+id/myview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            class="com.google.android.view.View" />
    </FrameLayout>

</LinearLayout> 
```

这是代码：

```
package com.example.testarc;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

public static MapFragment mapFragment;
public static View myView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapFragment = (MapFragment) getFragmentManager().findFragmentById(R.id.map);
    GoogleMap map = mapFragment.getMap();

    myView = (MyView)findViewById(R.id.myview);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:49:13.333

好的，我明白了，这真的很愚蠢：它是 android.view.View，而不是 com.google.android.view.View... 显然。（今天不是我的日子）

# javascript - 通过 RegEx Javascript 拆分为 2 个字符串分隔符

> ID：16150746
> 
> 赞同：0
> 
> 时间：2013-04-22T15:22:33.270
> 
> 标签：javascript, regex, split, delimiter

我对 RegEx 比较陌生，需要帮助通过两个分隔符拆分一段文本，然后捕获它们之间的内容。例如，我有一个具有“描述”属性的 JSON 对象，它本质上包含以下文本：

```
This is yet another test product to test for all sorts of styling/formatting issues. 

PLACEHOLDER

PLACEHOLDER

PLACEHOLDER

******

Not so expensive
Works all day
Works throughout the night
No risk
100% Guarantee
------

This would be where ingredients would go for Test Product 4. 
```

我想要做的是捕获六星号分隔符和六破折号分隔符之间的“项目符号”列表。所以在上面的例子中，我希望能够捕获这些行：

```
Not so expensive
Works all day
Works throughout the night
No risk
100% Guarantee 
```

因此，我需要用两个分隔符分割：

```
1) ******
2) ------ 
```

在搜索了这个论坛和其他论坛之后，我似乎仍然无法获得任何形式的 .split() 方法和 RegEx 来准确地得到我想要的。有人可以在这里帮助我吗？最终目标是能够捕获该文本，然后将其附加到`<div>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:25:41.090

不？真的吗？

```
string.split(/------|\*\*\*\*\*\*/); 
```

# html - 输入自动填充容器宽度的其余部分

> ID：16150748
> 
> 赞同：1
> 
> 时间：2013-04-22T15:22:41.953
> 
> 标签：html, css

我正在寻找将输入字段扩展到容器的所有可用空间但不超过以下元素的技巧。我准备了[示例](http://jsbin.com/egiveb/13/edit)女巫，仅在 chrome 中看起来不错。FF 看起来还不错，但在 IE 中没有结果。

我在一行中有 INPUT 和文本 (SPAN) 的容器 DIV。文本可以更改（例如翻译），所以我不知道文本宽度。在我使用的示例中`display: table-cell`，请查看我的[示例](http://jsbin.com/egiveb/13/edit)。

```
+----container---------------------------+
|+---input----------------++--text------+|
||                        ||            ||
|+------------------------++------------+|
+----------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:27:41.807

我从头开始做这个

[**演示**](http://jsfiddle.net/gYkMe/)

```
<div class="container">
    <label>Demo</label>
    <span><input type="text" /></span>
</div> 
```

CSS

```
#container {
    display: table;
    width: 100%;
}

label, span {
    display: table-cell;
}

span {
    width: 100%;
    padding: 5px;
}

input {
    width: 100%;
} 
```

# twitter-bootstrap - Rails 3.2 bootstrap 无法设置工具提示样式

> ID：16150754
> 
> 赞同：1
> 
> 时间：2013-04-22T15:22:46.183
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2, tooltip, bootstrap-sass

我已经`bootstrap-sass`安装在我的 Rails 3.2 应用程序中。我可以让引导程序正常工作，包括 javascript 和（难以捉摸的）工具提示。但我无法让工具提示样式正常工作。

这是我的设置：

应用程序.js

```
//= require bootstrap 
```

应用程序.css.scss

```
 *= require bootstrap_and_overrides 
```

bootstra_and_overrides

```
@import "bootstrap";
# and other overrides 
```

有趣且令人困惑的一点是，引导弹出框工作正常，样式正确（这在某种程度上基于我所理解的工具提示），但工具提示却没有。它们显示在页面的下方和左侧，但无论我做什么，样式都不会受到影响，甚至没有考虑到位置 (data-placement='top')。

即使我删除了对我的应用程序中除引导程序之外的所有 CSS 的所有调用，样式也不起作用。

即使我在`bootstrap_and_overrides.css.scss`文件末尾包含所有工具提示样式，它们也不起作用。似乎工具提示类没有被应用到它。

由于一旦您将鼠标移出链接，工具提示就会消失，因此我无法检查它们以查看它们应用了哪些 CSS（如果有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:47:31.037

原来答案是 js 文件的顺序。我`bootstrap.js`之前有一些似乎导致问题的 jquery-ui 文件。此命令有效：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require jquery.purr
//= require best_in_place
//= require bootstrap 
```

我会把这个问题留在这里，以防它帮助别人。

# java - 使用 runOnUiThread 重复此功能以更新 textview 位置

> ID：16150759
> 
> 赞同：0
> 
> 时间：2013-04-22T15:23:11.270
> 
> 标签：java, android, function, repeat

我试图让我的 textView 每隔一两分钟出现在屏幕的不同位置（延迟并不重要）。我看到有人建议我使用 runOnUiThread 让计时器重复随机功能并更新 UI。

我真的很难理解这些不同的线程，只是想知道是否有人可以给我一个例子？还是我应该使用不同的东西进行研究？

```
Public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView textView = (TextView) findViewById(R.id.digitalClock1);  
    Random r = new Random();

    int x = r.nextInt(350 - 100);
    int y = r.nextInt(800 - 100);

    textView.setX(x);  
    textView.setY(y);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:32:35.317

试试这个方法

```
public void doInback()
    {
        handler.postDelayed(new Runnable() {

            @Override
            public void run()
            {
                // TODO Auto-generated method stub
                // Try the code that you want to repeat

                doInback();
            }
        }, 1000);

    } 
```

只需调用您要使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:40:20.503

在下面创建可运行对象和处理程序

```
 private Runnable runnable = new Runnable(){
    @Override
    public void run() {         
        handler.sendEmptyMessage(0);
    }
};
Handler handler = new Handler() {       
    @Override
    public void handleMessage(Message msg) {            
        //change the text position here         
        this.postDelayed(runnable , TIME_OUT_MS);
        }
    }; 
```

TIME_OUT_MS 是您想要的超时时间（以毫秒为单位）。

并将其放在活动的 OnCreate() 方法上

```
 Thread thread =new Thread(runnable );
     thread.start(); 
```

# javascript - Modernizr 下载文件，但之后仍然未定义？（仅在页面回发后的 IE9 中）

> ID：16150762
> 
> 赞同：1
> 
> 时间：2013-04-22T15:23:18.873
> 
> 标签：javascript, modernizr

我有一个我制作的 jQuery 插件，它可以很好地格式化具有某些属性的元素上的日期。总的来说，它可以工作，但我在使用 Modernizr 时遇到了一些问题，但仅限于 IE 中，并且只能在表单回发之后。

这是插件的一个片段，它使用了奇妙的[MomentJS 库](http://momentjs.com/)。基本上第一次调用插件时，它会下载所需的文件，然后运行代码来解析日期。如果之后随时调用它并且库已经下载，它可以继续运行日期解析代码。

```
function parseDates() {
    var $items = this;

    if (typeof moment !== "undefined") {
        //If we are calling this at a time after page load, just run the function
        setupDisplayDate();

    } else {
        //If the files have not been included yet, download them & call the function
        //Load in a date library!
        Modernizr.load({
            load: SCRIPTS_PATH + "moment.min.js",
            callback: setupDisplayDate
        });
    }

    function setupDisplayDate() {
        console.log("setupDisplayDate called! Moment is " + typeof moment);
        $items.each(function () {
            var $thisItem = $(this);

            var formatter = $thisItem.data("date-format") || "MMMM Do, YYYY";
            var ticks = parseInt($thisItem.data("date-ticks"), 10);
            var formattedDate = moment(ticks).format(formatter);
            $thisItem.text(formattedDate);
        });
    }
} 
```

当我仅在页面回发后在 IE9 中执行此操作时，我在`setupDisplayDate`函数中收到一个错误，指出该时刻未定义。我究竟做错了什么？

我确实发现如果我超时 500 毫秒它会起作用，但我不应该这样做。我认为该`Modernizr.load`功能的全部意义在于下载代码，然后使其可用。似乎下载它并在它可以使用之前触发我的回调。

* * *

# 编辑

这是[关于 IE9 如何无法正确动态添加脚本的博客文章：http: [//www.guypo.com/technical/ies-premature-execution-problem/](http://www.guypo.com/technical/ies-premature-execution-problem/)

有什么办法吗？

* * *

# 另一个编辑

似乎问题实际上是关于对`load`函数的多次调用，然后是各种回调无序触发。[GitHub 上](https://github.com/SlexAxton/yepnope.js/issues/113)有一个关于它和[这个可重现的测试用例](http://jsfiddle.net/unlimit/S27Kz/)的未解决问题。

# ruby-on-rails - 如何验证 ActiveRecord 的子类

> ID：16150763
> 
> 赞同：1
> 
> 时间：2013-04-22T15:23:18.817
> 
> 标签：ruby-on-rails, inheritance, activerecord

我想在将某些属性保存到 ROR 中的数据库之前验证它们。

我的代码如下所示：

```
class AbstractClass < ActiveRecord::Base
 validate :field_name, :numericality => { :only_integer => true }
 self.abstract_class = true
end

class OtherAbstractClass < AbstractClass
  validate :other_field, :numericality => { :only_integer => true }
  self.abstract_class = true
end

class ConcreteClass < OtherAbstractClass
  validate :third_field, :numericality => { :only_integer => true }
end 
```

我的问题是只检查了 ActiveRecord (field_name) 验证的直接祖先......并且 ConcreteClass 的实例甚至没有验证？当我尝试手动调用它们时的方法，并且我的对象仅通过部分验证保存。

有什么方法可以调用我所有 ActiveRecord 子类的验证方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:58:57.673

的语法`validate`错误，后面不应该有分号。

```
class ConcreteClass < OtherAbstractClass
   validate :field_name, :numericality => { :only_integer => true }
   validate :other_field, :numericality => { :only_integer => true }
   validate :third_field, :numericality => { :only_integer => true }

   # other code
end 
```

# wpf - 在 wpf 中显示加载动画

> ID：16150764
> 
> 赞同：1
> 
> 时间：2013-04-22T15:23:19.430
> 
> 标签：wpf

当页面需要时间加载时，我试图显示加载动画。我正在加载多个/几个用户控件，具体取决于使用 Thread 的用户请求。我尝试了以下方法

1.  `this.Dispatcher.BeginInvoke(new Action(LoadSecondPageData), DispatcherPriority.Background);` 当我使用它时，它会使我的加载动画冻结，直到页面加载

2.  我也尝试过`BackgroundWorker`概念加载动画在这里工作，但它不允许加载用户控件并给出错误。

错误：“调用线程必须是 STA，因为许多 UI 组件都需要这个。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:30:19.237

您需要在主 UI 线程上使用 启动动画`Dispatcher.BeginInvoke`，但任何数据加载都应在后台线程上进行，以免动画冻结。加载数据后，任何影响依赖属性的最终更新都需要再次编组到 UI 线程上`Dispatcher.BeginInvoke`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:00:43.757

> 我也尝试过 BackgroundWorker 概念加载动画在这里工作，但它不允许加载用户控件并给出错误。

这是设计使然，您不能在后台线程中触摸 UI 端的任何内容，因为它不是 STA。相反，将进度指示器绑定到线程可以修改的属性，然后进度指示器将通过 INotifyPropertyChanged 事件获取更新。

例如，如果您有`ProgressBar`绑定到`ProgressPercentage`或绑定到 的不确定忙碌指示符`IsBusy`：

在`XAML`：

```
<ProgressBar x:Name="StatusBar"
             Maximum="1" Value="{Binding ProgressPercentage}" /> 
```

在`Code`：

```
using (var backgroundWorker = new BackgroundWorker())
{
    backgroundWorker.DoWork += (s, ex) =>
    {
        IsBusy = true;
        StatusText = "Pretending to do something...";

        for (int i = 0; i < 100; i++)
        {
            ProgressPercentage = (i + 1)/100.0D;
            Thread.Sleep(100);
        }
    };

    backgroundWorker.RunWorkerCompleted += (s, ex) =>
    {
        IsBusy = false;
        StatusText = "Export Complete.";
    };

    backgroundWorker.RunWorkerAsync();
} 
```

后台线程将完成其工作，UI 线程在等待时不会阻塞，并且您的进度指示器将随着它的进行而更新。

# c# - 使用匿名对象创建列表

> ID：16150767
> 
> 赞同：2
> 
> 时间：2013-04-22T15:23:36.557
> 
> 标签：c#, asp.net-mvc-3

我尝试添加一些我想在 ASP.NET MVC 3 视图中使用的虚拟记录，以为一些实验提供数据。我试试这个：

```
var dummyData = new[]
            {
                new  {Row = 1, Col = 1, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"},
                new  {Row = 1, Col = 2, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"},
                new  {Row = 2, Col = 1, IsRequired = true, QuestionText = "No?", FieldValue = "string"},
                new  {Row = 3, Col = 1, IsRequired = false, QuestionText = "No?", FieldValue = "string"}
            }.ToList();
            ViewBag.Header = dummyData; 
```

但是，当我尝试在我的视图中使用数据时：

```
@{
          foreach (var item in ViewBag.Header)
          {

              <tr><td>@item.QuestionText</td><td>@item.FieldValue</td></tr>

          }
       } 
```

我得到这个错误 - `'object' does not contain a definition for 'QuestionText'`。我认为我创建列表的方式有问题，但不是 100% 确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:34:01.573

匿名类型在声明它的范围内是本地的。在类型声明的范围之外，您不会轻易地从它那里获取属性。 [相关问题](https://stackoverflow.com/questions/713521/accessing-c-sharp-anonymous-type-objects)。

我建议使用元组或只为数据创建一个简单的 POCO 对象。

```
var dummyData = new[]
        {
            Tuple.Create(1, 1, true, "Yes?", "int"),
        }.ToList();
        ViewBag.Header = dummyData; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T14:57:31.877

```
var dummyData = new List<dynamic>
        {
            new  {Row = 1, Col = 1, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"},
            new  {Row = 1, Col = 2, IsRequired = true, QuestionText = "Yes?", FieldValue = "int"},
            new  {Row = 2, Col = 1, IsRequired = true, QuestionText = "No?", FieldValue = "string"},
            new  {Row = 3, Col = 1, IsRequired = false, QuestionText = "No?", FieldValue = "string"}
        };
        ViewBag.Header = dummyData; 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:24:53.480

`foreach`将您的定义更改为：

```
@{ foreach (dynamic item in ViewBag.Header) { 
```

问题是它们是匿名类，因此需要将它们用作`dynamic`类，以便 CLR 可以在运行时后期绑定对象。

# mysql - 在 mySQL 中保存当前时间戳

> ID：16150768
> 
> 赞同：-2
> 
> 时间：2013-04-22T15:23:37.180
> 
> 标签：mysql, datetime, timestamp

我正在用 Java 做一个项目。关于医院管理。在其中，我设计了一个表格，用唯一的注册号存储患者信息。现在我遇到了问题，我想用当前日期和时间存储他的所有访问。因此，当我打开它的记录时，它应该向我显示它的所有访问日期。所以建议我一种将此类日期存储在数据库中的方法。我应该如何存储与他的 uniqID 号码对应的每次访问并获取他的所有访问日期。我正在使用 mysql 5.1 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:37:42.673

创建一个表来存储每次访问的数据。此表中的一列应该是“DATETIME”类型，然后使用 NOW 函数来填充它。

[https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_now](https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_now)

```
CREATE TABLE `visits` (
`uniqID` INT NOT NULL ,
`visit_time` DATETIME NOT NULL ,
INDEX ( `uniqID` )
); 
```

要填充运行此

```
INSERT INTO visits SET uniqID = '{user_uniqID }', visit_time = NOW(); 
```

为了获得用户访问，在顶部显示最新的。

```
SELECT * FROM visits WHERE uniqID = '{user_uniqID }' ORDER BY visit_time DESC; 
```

# javascript - jQuery Menu 如何在 Div 中包含子菜单

> ID：16150772
> 
> 赞同：3
> 
> 时间：2013-04-22T15:23:48.753
> 
> 标签：javascript, jquery, html, jquery-ui, menu

我正在尝试创建一个包含在网页上的 div 中的“应用程序”。这不能大于某些尺寸（比如说：550 像素 x 280 像素）。我有一个菜单，每个项目至少有 1-3 个子菜单。问题是，虽然我知道子菜单的高度不超过 280 像素，但子菜单通常会超出父 div 的范围（最后一个总是向上而不是向下增长的除外）。

有没有办法让菜单根据它是否会超出 div 的范围来放大或缩小？

这是一个 JSFiddle：http: [//jsfiddle.net/3FqcG/](http://jsfiddle.net/3FqcG/)

请注意“Salzburg”子菜单如何超出黑色 DIV 的范围？如果它太长，我希望它长大，如果有足够的空间，我希望它长大。

目前，我只是使用基本的初始化：`$( "#menu" ).menu();`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:42:28.057

我不相信你可以在 CSS 中做到这一点。

这给我们留下了javascript。基本思想是：

1.  计算菜单的基线
2.  如果这位于边界之外
    1.  向上移动菜单以更正位置
3.  从此过上几乎幸福的生活

但是，我们有一个主要问题：

尽管我们捕获了元素的焦点，但我们不知道它的子菜单何时显示和定位。因此，尽管您的问题在技术上已得到解决，但到目前为止还不是理想的解决方案。

**更新**

我能想到的最好的**解决方法是：**

1.  关闭动画（以避免丑陋的故障）
2.  添加一个观察者，它会持续监控即将打开的元素
3.  如果打开，应用位置修正

无论如何，如果您考虑到这一步，您不妨覆盖 jquery ui 组件的默认定位，并注意您将无法轻松更新库。*更新：或者试试[Rudy Garcia 的版本](https://stackoverflow.com/a/16154506/209427)，如果可行的话*

[演示](http://jsfiddle.net/3FqcG/13/)

演示代码：  

```
var BASE_OFFSET = $('#menuContainer').offset().top;
var MAX_OFFSET = $('#menuContainer').height(); // get the offset of the container
var whenVisible = function($el, callback){ //executes callback when $el is visible
    if($el.is(':visible')){ // if visible
        callback(); // execute callback
    }else{ // otherwise
        setTimeout(function(){whenVisible($el, callback);},10); // do the same check in 10 ms
    }
};
var fixPosition = function($menu){ // correct the position of the menu in respect to #menuContainer
    var h = $menu.outerHeight(true); // take the height of the menu
    var menuBottom = $menu.offset().top + h - BASE_OFFSET; // the baseline of the menu (taking into consideration the BASE_OFFSET)
    if(menuBottom > MAX_OFFSET){ // if this is outside the MAX height
        var diff = MAX_OFFSET - menuBottom; // calculate the difference
        var newTop = $menu.position().top + diff; // modify current positioning with the calculated diff value
        $menu.css('top', newTop + 'px'); // apply it to top (which is also used by jquery to position submenus
    }
    $.fx.off = false; // switch animations back on
};
$( "#menu" ).menu().on('menufocus', function(ev, ui){ // on the event menufocus
    var $ui = $(ui.item); //take the focused element
    var $menu = $ui.children('ul'); // take its related submenu
    if($menu.length === 0){ // if there is none 
        return; // just terminate
    }
    $.fx.off = true; // switch off jQuery effects (otherwise you'll have glitches)
    whenVisible($menu, function(){fixPosition($menu);}); // execute fixPosition when $menu is visible
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:52:28.040

您还可以查看此小部件的 API：

[http://api.jqueryui.com/menu/](http://api.jqueryui.com/menu/)

您可以使用 position 选项以您想要的方式定位元素。

这将改变位置，使它们在框内，但是您将希望动态访问最后一个以为其提供所需的位置，因为下面的代码会将所有菜单项更改为向上移动 50。

```
$( "#menu" ).menu({ position: { my: "left top", at: "right+5 top-50" } }); 
```

还可以在此处找到定位选项的完整列表：http: [//api.jqueryui.com/position/](http://api.jqueryui.com/position/)

显然，jquery UI 已经考虑到了这一点，并提供了“在”选项以确保您的元素保持在您选择的另一个元素内。

因此，您的解决方案应该是这样的：

```
$( "#menu" ).menu({ position: {within: '#menuContainer' } }); 
```

# c - “|=”运算符在C中是什么意思？

> ID：16150776
> 
> 赞同：0
> 
> 时间：2013-04-22T15:24:03.837
> 
> 标签：c, operator-keyword

此代码如何工作：

```
int a = 1;
int b = 10;

a |= b; 
```

作品如何`a |= b;`？似乎`|=`不是 C 中的运算符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:26:55.457

它像 | + = 运算符，其工作方式与 += 类似。

它相当于

```
a = a|b; 
```

我建议你阅读这篇关于运算符的文章：[http](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Bitwise_operators) ://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Bitwise_operators 这篇关于按位运算 的文章[http://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:25:42.533

遵循以下模式，例如`+=`：

```
a |= b;
// Means the same thing as:
a = a | b; 
```

也就是说，任何设置在`a`或中的位`b`都应设置在 中`a`，而设置在 中的位不应设置在 中`a`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T15:25:52.737

这就是“按位或”相等。它遵循正等`+=`、负`-=`等等模式。

`a |= b;`是相同的`a = a | b;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T15:25:53.027

表达式`a |= b;`等价于表达式`a = a | b;`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T15:26:13.557

这是复合赋值运算符。它的含义是：

```
a = a | b; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-22T15:26:16.950

这与

```
a = a | b; 
```

`+=` `-=`与等方法相同

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-22T15:26:31.390

它是[按位或运算符](http://en.wikipedia.org/wiki/Bitwise_operation#OR)，并且

```
a |= b; 
```

它与

```
a = a | b; 
```

# jquery-easyui - 想要通过 PUT REST API 更新记录

> ID：16150777
> 
> 赞同：1
> 
> 时间：2013-04-22T15:24:06.913
> 
> 标签：jquery-easyui

另一个新手问题...我有一个可以使用 PUT 更新记录的 REST API。服务器是用 Node.JS + Express + MongoDB 编写的。Clint 方面正在使用 JQuery 和 EasyUI。我只是一个初学者，并且刚刚了解到 HTML 表单除了 POST 或 GET 之外不能做任何事情。因此，我应该如何在不使用表单的情况下为更新对话框开发 UI？

指向样本的指针会很棒...

科马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:24:12.533

如果没有答案.. 我发现我可以通过简单地在服务器上发明一个专门用于更新我感兴趣的记录的新 pat 并为该记录使用 POST 来相对轻松地解决这个问题。这意味着创建和更新记录都可以使用 POST，但可以使用不同的 URL。科马克

# ios - 使用 Xcode 布局视图

> ID：16150778
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:24:07.793
> 
> 标签：ios, xcode

我是 iOS 开发的新手，所以这个问题听起来很简单。

如何布局类似于我们在 Facebook 应用程序的帖子详细信息中看到的视图？在顶部可以看到帖子的详细信息，下面有点赞评论等按钮，下面有一个可滚动的评论列表。在屏幕底部有一个永远不会消失的静态添加评论部分。

我应该使用哪些控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:35:45.447

顶部是一个`UITableView`. 单元格很大，并进一步细分为 3 个部分（每个单元格看起来都一样）。

*   第 1 部分有图像、消息等。
*   第 2 部分只是三个按钮链接。
*   第 3 部分也是一个带有链接的按钮。链接可以用按钮、标签等来完成。

每个项目（示例按钮）很可能都有一个加载该特定视图的方法。由于导航栏，他们很可能将视图推送到导航控制器堆栈上。

底部“幻灯片”部分是顶部带有文本字段的视图。然后，当点击它时，它会动画并向上移动，因此它在键盘顶部可见。

# javascript - 返回出现点击单词的句子

> ID：16150780
> 
> 赞同：0
> 
> 时间：2013-04-22T15:24:13.227
> 
> 标签：javascript, nlp

跟进上一个问题：[Use Javascript to get the Sentence of a Clicked Word](https://stackoverflow.com/questions/13386911/use-javascript-to-get-the-sentence-of-a-clicked-word)

一段时间以来，我一直在摸索这个问题。然而，我今天早上醒来并开始阅读：[http ://branch.com/b/nba-playoffs-round-1](http://branch.com/b/nba-playoffs-round-1)

瞧！分支允许用户选择一个句子，然后分享、保存等等……这正是我想要做的。看起来他们正在将每个句子包装在`<span>`标签中。

以前，人们建议找到每个`<p>`标签，然后在标签内分解每个句子。但是，我正在制作一个 chrome 扩展，这几乎需要在任何网站上运行，所以一个词可能出现在`<p>`标签之外，可能在`<h1>`类型标签中，甚至在`<div>`.

对 Branch 是如何做到的有任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:49:05.487

你可以做这样的事情，与你所追求的不太一样，我想？但可能会给你一个开始进一步的想法。

```
<div>In cryptography, a keyed-hash message authentication code (HMAC) is a specific construction for calculating a message authentication code (MAC) involving a cryptographic hash function in combination with a secret cryptographic key. As with any MAC, it may be used to simultaneously verify both the data integrity and the authentication of a message. Any cryptographic hash function, such as MD5 or SHA-1, may be used in the calculation of an HMAC; the resulting MAC algorithm is termed HMAC-MD5 or HMAC-SHA1 accordingly. The cryptographic strength of the HMAC depends upon the cryptographic strength of the underlying hash function, the size of its hash output, and on the size and quality of the key.</div>
<button id="get">Get Selected</button>

function getText() {
    var selectedText

    if (typeof window.getSelection === "function") {
        selectedText = window.getSelection();
    } else if (typeof document.getSelection === "function") {
        selectedText = document.getSelection();
    } else if (document.selection && typeof document.selection.createRange() === "function") {
        selectedText = document.selection.createRange().text;
    } else {
        selectedText = "";
        alert("No method to get selected text");
    }

    if (!selectedText || selectedText === "") {
        if (document.activeElement.selectionStart) {
            selectedText = document.activeElement.value.substring(
            document.activeElement.selectionStart.document.activeElement.selectionEnd);
        }
    }

    alert(selectedText);
}

document.getElementById("get").addEventListener("click", getText, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/4vKhz/)

~~您还可以看到我[在 SO 上](https://stackoverflow.com/questions/16151610/window-getselection-partially-selected-elements/16153189#16153189)扩展了这个想法的进一步答案。~~

作者提出了另一个问题，但这[是另一个 jsfiddle](http://jsfiddle.net/Xotic750/4vKhz/)

[window.getSelection](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)

> 概括
> 
> 返回一个选择对象，表示用户选择的文本范围。
> 
> 规格
> 
> DOM 级别 0。不属于任何标准。
> 
> 预计将在新的 DOM Range 规范中指定

还有一个名为[Rangy](https://code.google.com/p/rangy/)的库应该可以处理这种瘦跨浏览器，从未尝试过，但您可能想看看。

> 一个跨浏览器的 JavaScript 范围和选择库。它提供了一个简单的基于标准的 API，用于在所有主要浏览器中执行常见的 DOM 范围和选择任务，抽象出 Internet Explorer （包括版本 8）和兼容 DOM 的浏览器之间该功能的完全不同的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:33:40.360

他们似乎将所有内容都包装在`<span>`s 中，并且还添加了有关字符数的元数据。从他们的来源：

```
<p><span class="highlight js-highlight-this" data-end-char="23"
data-highlight-count="0" data-start-char="0" id="highlight-86552-0">No
doubt they can lose.</span> <span class="highlight js-highlight-this"
data-end-char="132" data-highlight-count="0" data-start-char="24" id=
"highlight-86552-24">As Adi says, I don't think they will, but OKC - in
particular - still looms as a legit threat to the throne.</span>
<span class="highlight js-highlight-this" data-end-char="336"
data-highlight-count="0" data-start-char="133" id="highlight-86552-133">The
Thunder are better on both ends this year than last, have the experience of
having been there before, and you know Durant doesn't want to spend the
rest of his career playing second fiddle to LeBron.</span> <span class=
"highlight js-highlight-this" data-end-char="588" data-highlight-count="0"
data-start-char="337" id="highlight-86552-337">The problem, and I think the
reason so many assume the Heat will repeat, is that we haven't seen this
version of the Thunder (with Kevin Martin rather than James Harden in the
6th man role) in the playoffs before so the mystery factor comes into
play.</span></p> 
```

然而，另一种更灵活的方法是简单地使用正则表达式匹配从任何元素的文本中提取句子，无论是 span、p、h1 等。

在这种情况下，您将通过正则表达式匹配找到句子，然后`<span>`使用 javascript 动态地将每个句子包围起来。然后，您可以将事件侦听器附加到那些动态创建的标签上，以进行突出显示以及您希望在悬停、单击等时执行的任何其他操作。

# asp.net - System.DirectoryServices.AccountManagement PrincipalContext 模拟创建新用户

> ID：16150781
> 
> 赞同：0
> 
> 时间：2013-04-22T15:24:19.557
> 
> 标签：asp.net, sharepoint-2010, directoryservices, userprincipal, principalcontext

在 Sharepoint（或任何 ASP.NET Web 应用程序）中，我想要一个创建 AD 用户的功能。我正在使用 System.DirectoryServices.AccountManagement 来完成这项任务，但我遇到了麻烦。这是我的代码：

```
using (var pc = new PrincipalContext(ContextType.Domain,"DOMAIN","administrator","password"))
{
    if (pc.ValidateCredentials("administrator", "password"))
    {
        UserPrincipal up = new UserPrincipal(pc, username, password, true);
        up.Save();
    }
} 
```

用户被创建但被禁用。我知道我的管理员：密码对是正确的，因为“if”语句返回 true。同样在创建过程中，我收到异常：

```
Exception has been thrown by the target of an invocation. 
```

我检查了 PrincipalContext 对象，它正在使用“管理员”帐户连接到域控制器。这个错误和 up.Save() 函数抛出异常的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:48:03.683

您可以尝试以下方法：

```
using (var pc = new PrincipalContext(ContextType.Domain,"DOMAIN","administrator","password"))
            {
                using (var up = new UserPrincipal(pc))
                {
                    up.SamAccountName = textboxUsername.Text; // Username
                    up.SetPassword(textboxPassword.Text); // Password
                    up.Enabled = true;
                    up.ExpirePasswordNow();
                    up.Save();
                }
            } 
```

这至少应该确保用户已创建并已启用。让我知道它是否有效。

# javascript - 更改浏览器选项卡时 JQuery 进度条暂停

> ID：16150782
> 
> 赞同：2
> 
> 时间：2013-04-22T15:24:23.450
> 
> 标签：javascript, jquery, browser

我正在尝试使用 javascript 在 html 页面上显示进度条。但是，当包含代码的浏览器选项卡变为非活动状态时，进度条将停止更新，并在选项卡再次活动时恢复。

当窗口处于非活动状态时，如何防止浏览器停止/暂停执行 javascript 代码？

虽然它可能无关紧要，但这里是代码：

```
Object.progressBar = function(){
$( "#question-progress-bar" ).progressbar({
    value: false,
    complete: function(event, ui) { ... }
});

var seconds = 15.0,
progressbar = $("#question-progress-bar"),
progressbarValue = progressbar.find(".ui-progressbar-value");

progressbarValue.css({
    "background": '#c5b100',
    "opacity" : '0.8'
})

var int = setInterval(function() {
    var percent = (15-seconds)/15*100; 
    seconds=seconds-0.1;
    progressbar.progressbar( "option", {
        value: Math.ceil(percent)
    });

    $("#question-progress-bar-seconds").html((seconds).toFixed(1)+"s");

    if (seconds <= 0.1) {
        clearInterval(int);
    }
}, 100);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:50:04.657

而不是使用`setInterval`并假设调用之间已经过去了一定的时间（即使它在前面，`setInterval`已经达到或未达到准确度），而是使用`Date`对象来获取条形图开始的时间，并将其与每次迭代的当前时间进行比较。

```
<html>
    <head>
        <script>
            function go()
            {
                var pb = new ProgressBar(5, "targ");
            }

            window.onload = go;

            function ProgressBar(l, t)
            {
                var start = Date.now();
                var length = l * 1000;
                var targ = document.getElementById(t);

                var it = window.setInterval(interval, 10);

                function interval()
                {
                    var p = 100 * (Date.now() - start) / length;

                    if(p > 100)
                    {
                        p = 100;

                        window.clearInterval(it);

                        alert("DONE"); // alternatively send an AJAX request here to alert the server
                    }

                    targ.value = (Math.round(p) + "%");
                }
            }
        </script>
    </head>
    <body>
        <input type="text" id="targ" />
    </body>
</html> 
```

我在这里制作了一个示例对象，它在实例化时立即开始倒计时，并在完成时调用警报并终止间隔计时器。或者，可以在完成后进行 AJAX 调用或任何其他类型的调用。

应该注意的是，如果浏览器一起停止 Javascript，这将不会完成调用。但是，如果在此期间经过了足够的时间，*它将*在选项卡再次获得焦点后立即完成。网站无法从脚本端改变这种浏览器行为。

希望有帮助！

# php - 如何通过调节所有多对多关系来检索实体？

> ID：16150784
> 
> 赞同：0
> 
> 时间：2013-04-22T15:24:30.193
> 
> 标签：php, symfony, doctrine-orm, many-to-many

## 上下文

我在网上商店工作。网站上的每一个`Product`都可以有几个`ProductVariation`s（例如*size*，*color*，...），其值是一个列表`ProductVariationValue`（例如*XL*，*L*，*Blue*，*Red*，...）。

每个`ProductVariationValue`都绑定到一个`ProductVariation`（例如，您不能为*Size选择**Red*）。

 *我正在尝试创建一个跟踪库存`(Product, ProductVariations, ProductVariationValues)`组合数量的库存管理系统。

```
Product <--> ProductVariation <--> ProductVariationValue 
```

我设法通过创建一个`Stock`持有 a`Product`和一个集合的实体来做到这一点`ProductVariationValues`：

```
/** @ORM\Entity */
public class Stock
{
  // ...

  /** @ORM\ManyToOne(targetEntity="AcmeDemoBundle:Product") */
  protected $product;

  /** @ORM\ManyToMany(targetEntity="AcmeDemoBundle:ProductVariationValues") */
  protected $productVariationValues;

  /** @ORM\Column(type="integer") */
  protected $number = 0;

  // ...
} 
```

当用户将 a 添加`Product`到他的购物车时，我创建一个`OrderItem`包含`ProductVariationValues`他们选择的实例：

```
/** @ORM\Entity */
public class OrderItem
{
  // ...

  /** @ORM\ManyToOne(targetEntity="AcmeDemoBundle:Product") */
  protected $product;

  /** @ORM\ManyToMany(targetEntity="AcmeDemoBundle:ProductVariationValues") */
  protected $productVariationValues;

  // ...
} 
```

## 问题

我了解`Stock`实体与实体相似`OrderItem`。但是，当用户将 a 添加`Product`到他的购物车并且我正在构建`OrderItem`实体时，我找不到如何检索`Stock`实例以检查`Product`其是否`ProductVariationValues`有库存，因为我找不到要在`Stock`实体中添加的关系.

实际上，`Stock`实体不能由`$product`or`$productVariationValues`关系本身来识别：它们需要放在一起。

## 我试图做的

在控制器中，给定用户选择的`$product`和数组`$productVariationValues`，我尝试设置一个查询来检索`Stock`实例。

```
class StockRepository
{
  public function retrieveStock($product, $productVariationValues)
  {
    $this->getQueryBuilder('s')
      ->leftJoin('s.product', 'p')
      ->leftJoin('s.productVariationValues', 'pvv')
      ->where('s.product = ?')
      ->andWhere('s.productVariationValues = ?')
      ->setParameter(1, $product)
      ->setParameter(2, $productVariationValues);

    // ...
  }
} 
```

此代码不起作用，因为`setParameter()`方法不能接受`array`或`ArrayCollection`参数。

无论哪种方式，此解决方案都不是最佳的，因为此代码必须从控制器运行，而我无法从`OrderItem`实体运行它。

我的实体模型错了吗？有没有一种简单的方法可以`Stock`在我的`OrderItem`班级中添加关系？或者至少要检索一个`Stock`项目，给定它的`Product`和`ProductVariationValues`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:35:07.097

您需要使用 IN 子句，并遍历所有值；就像是：

```
class StockRepository
{
  public function retrieveStock($product, $productVariationValues)
  {
    $qb=$this->getQueryBuilder('s');
    $qb->leftJoin('s.product', 'p')
        ->leftJoin('s.productVariationValues', 'pvv')
        ->where('s.product = ?')
        ->setParameter(1, $product)
        ;
    $stockVariationValues=$qb->getQuery()-
    >getSingleResult()->getProductVariationValues();

    $qb=$this->getQueryBuilder('s');
    $qb->leftJoin('s.product', 'p')
        ->leftJoin('s.productVariationValues', 'pvv')
        ->where('s.product = ?')
        ->setParameter(1, $product)
    ;

    $stockVariationValues->map(function ($element) use ($qb){
      $qb->andWhere($qb->expr()
        ->in('s.productVariationValues'
            ,  "'".implode(","
                ,$productVariationValues->toArray())
            ."'")
        );
    });

    // ...
  }
} 
```*

# sql-server - 在 Transact-SQL 中终止 IF 块

> ID：16150785
> 
> 赞同：0
> 
> 时间：2013-04-22T15:24:36.560
> 
> 标签：sql-server, sql-server-2008-r2

这可能是一个相当新手的问题，但我无法在 MSDN 在线示例中找到如何在 Transact-SQL 中结束 IF/ELSE 块。例如，我想创建一个执行此操作的 SP：

```
USE [MyDb];
GO
SET ANSI_NULLS ON;
GO
SET QUOTED_IDENTIFIER ON;
GO
CREATE PROCEDURE [dbo].[usp_MyStoredProc]
@param1 DATE, @param2 INT, @param3 BIT, @param4 [dbo].[CustomDataType] READONLY
WITH EXEC AS CALLER
AS
-- Only run this part if @param3 == true
IF (@param3 = 1)
   BEGIN
     --do stuff...
   END
-- I don't really need an else here, as I'm simply doing an 
-- extra step at the beginning if my param tells me to

-- I always want this next part to run...
-- do more stuff...
GO 
```

我有一个我认为可行的解决方案（发布为下面的答案），但我觉得我正在解决我缺乏知识的问题，而不是做最好的模式。

编辑-我删除了我的第一个解决方案，因为它是一个可怕的想法，并且不希望其他人尝试实现它。原来问题实际上是这种情况下的解决方案；谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:29:17.000

该`IF`语句的语法是

```
IF Boolean_expression 
     { sql_statement | statement_block } 
[ ELSE 
     { sql_statement | statement_block } ] 
```

该`ELSE`部分是可选的。

“sql_statement”是任何单个语句。“statement_block”是一组包含在一个`BEGIN`和`END`

更多详细信息：http: [//msdn.microsoft.com/en-us/library/ms182717.aspx](http://msdn.microsoft.com/en-us/library/ms182717.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:36:39.540

不必有 else 语句。如果满足 IF 条件，则 BEGIN/END 之间的任何内容都将运行，然后您的 SQL 将正常进行。这与以下内容相同：

```
If (x == 1) {
   // condition met, do stuff
}
// do more stuff 
```

你真的很亲近。只是需要一些调整。

```
IF (@param3 = 1)
  BEGIN
  -- do stuff if a param tells me to (has to be done before main block of code is ran below)
  END    
-- do stuff that should always be ran.
GO 
```

帮自己和你的团队一个忙：除非 100% 必要，否则不要使用 goto。通常，结构良好的代码不需要它们。

# oracle11g - XQuery：OBJECT_VALUE 无效标识符

> ID：16150791
> 
> 赞同：0
> 
> 时间：2013-04-22T15:24:52.757
> 
> 标签：oracle11g, xquery

我创建了一个表

```
Movie ( title varchar2(40), review XMLTYPE) 
```

并且评论有：`

```
<review>
<reviewer>...</reviewer>
<title> ....</title>
<rating>.....</rating> </Review> </reviewer> 
```

当我尝试访问时：

```
SELECT X.reviewername FROM movie m, XMLTABLE ('for $d in /reviews/review 
return $d' 
PASSING OBJECT_VALUE
columns 
reviewername VARCHAR2(50) PATH 'reviewer') AS X 
```

我在 OBJECT_VALUE 处收到错误消息。我哪里错了？

编辑：我将查询更改为

```
SELECT m.title,
warehouse2.*
FROM movie M,
XMLTABLE('/REVIEW'
  PASSING m.reviews
  COLUMNS 
     "Rail" varchar2(60) PATH '//RATING') 
  warehouse2; 
```

但是没有行被选中。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T16:27:22.817

> 一方面，您没有错字：'/reviews/review' 吗？您的示例中的任何地方都没有调用任何元素。
> 
> 您的 XML 格式不正确，标签重叠，评论/评论不匹配（XML 区分大小写），并且在查询中您有评论/评论，但您的 xml 有 /review（最后没有 s）。–

# python - os.path.expanduser 未能编码反斜杠？

> ID：16150795
> 
> 赞同：0
> 
> 时间：2013-04-22T15:24:58.217
> 
> 标签：python, windows

在 Python 脚本（在 2.7 中执行）中，第二个语句返回 false，尽管该目录存在：

```
from os import path
path.exists( path.expanduser('~') ) 
```

我认为这是一个反斜杠问题，因为`path.exists(...)`“手动编码”主目录使用`/`or`\\`返回 true，正如预期的那样。

这个问题似乎有点特定于我的机器，因为相同的脚本在其他计算机（也运行 Windows）上运行良好。

是什么导致了这种行为？如何在不破解脚本的情况下修复它（在大多数 Windows 机器上运行良好）？

**更新**

该问题是由在我的系统上`path.expanduser('~')`用引号 ( ) 包裹路径引起的`"`，但在其他系统上却没有。

基本问题仍然存在：为什么？

是否可以在不更改脚本的情况下在我的机器上更改此行为（我不维护该脚本并且对其他人有效）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:09:45.070

查看 的源代码`ntpath.py`，该`expanduser()`函数首先尝试按该顺序返回环境变量，`HOME`最后`USERPROFILE`返回到 and 的组合`HOMEDRIVE`，`HOMEPATH`所以我猜您在其中一个环境变量上设置了引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:29:23.450

```
from os import path
path.exists( path.abspath(path.expanduser('~')) ) 
```

作品？（尚未测试，但应该更换`\`和`/`问题）

引用**path.exists()**上的 Python 文档：

> 如果 path 引用现有路径，则返回 True。对于损坏的符号链接返回 False。在某些平台上，如果未授予对请求的文件执行 os.stat() 的权限，即使路径物理存在，此函数也可能返回 False。

# c# - C#中双引号中的String.Format

> ID：16150799
> 
> 赞同：3
> 
> 时间：2013-04-22T15:25:11.190
> 
> 标签：c#, .net

有没有人可以帮我解决`string.Format`下线。在“2056”中，我需要作为 {0} 传递。

```
string body = @"{""idTimeSerie"":""2056"",""idTso"":-1}"; 
```

由于双引号，我无法执行它。

我已经尝试过这种方式，但没有成功。

```
string body = string.Format
                    (@"{""idTimeSerie"": "" \"{0}\" "",""idTso"":-1}", countryID); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:28:39.803

你必须避开花括号

> 将 { 替换为 {{

```
string body = @"{{""idTimeSerie"":""2056"",""idTso"":-1}}"; 
```

编辑：[来自 MSDN - 另一种转义方式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

> 左大括号和右大括号被解释为格式项的开始和结束。因此，您必须使用转义序列来显示文字左大括号或右大括号。在固定文本中指定两个左大括号（“{{”）以显示一个左大括号（“{”），或两个右大括号（“}}”）以显示一个右大括号（“}”）。格式项中的大括号按照遇到的顺序依次解释。不支持解释嵌套大括号。

```
int value = 6324;
string output = string.Format("{0}{1:D}{2}", 
                             "{", value, "}");
Console.WriteLine(output);
// The example displays the following output: 
//       {6324} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:27:22.383

试试这个：

`string body = string.Format(@"{{ ""idTimeSerie"": ""{0}"", ""idTso"": -1 ", countryID) + "}";`

解释：

1）使用@风格的字符串文字时，双引号用`""`（两个连续的双引号）表示。

[见 MSDN：](http://msdn.microsoft.com/en-us/library/362314fe%28v=vs.110%29.aspx)

```
@"""Ahoy!"" cried the captain." // "Ahoy!" cried the captain. 
```

2) 使用`{{`and分别以字符串格式`}}`表示文字`{`和。`}`

[请参阅 MSDN（转义大括号）：](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)

> 在固定文本中指定两个左大括号（“{{”）以显示一个左大括号（“{”），或两个右大括号（“}}”）以显示一个右大括号（“}”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T15:31:55.970

你可以这样做：

```
string body = string.Format("{{\"idTimeSerie\":\"{0}\",\"idTso\":-1}}", countryID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:28:45.740

在这种情况下，不要使用逐字字符串。我怀疑你想要：

```
string body = string.Format("{\"idTimeSerie\":\"{0}\",\"idTso\":-1}", countryID); 
```

# grails - 方法没有签名：save() 适用于参数类型：() 值：[]

> ID：16150801
> 
> 赞同：0
> 
> 时间：2013-04-22T15:25:16.057
> 
> 标签：grails, grails-2.0

我们正在尝试将现有的 Grails 1.x 应用程序从 1.x 升级到 2.x（当前使用 2.2.1）。一个单元测试失败了，我被卡住了。这是测试在做什么......

服务 -

```
def saveSomeData(myDomain) {
    return myDomain.save(flush:true)
} 
```

服务测试 -

```
void testShouldSaveAndReturnTrue() {
    def myDomainEmc = new ExpandoMetaClass(MyDomain)
    myDomainEmc.save = {flush -> true}
    myDomainEmc.initialize()
    myDomainEmc.metaClass = myDomainEmc
    assertTrue myTestService.saveSomeData(myDomainEmc)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:43:19.580

从错误消息来看，它似乎`save()`在没有任何参数的情况下被调用。尝试添加一个无参数`save()`方法：

```
myDomainEmc.save = {-> true} 
```

另外，我建议使用 Grails 2`@Mock`注释来模拟域对象，以省去使用`ExpandoMetaClass`.

# ubuntu - 在 Ubuntu 服务器上使用 grep (grep -r foo) 递归搜索文本需要很长时间

> ID：16150802
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:25:19.077
> 
> 标签：ubuntu, grep

当我尝试使用“grep -r foo”在目录中搜索文本时，它需要永远并且永远不会返回任何结果。目录大小没有区别，即使我的当前目录只包含一个很小的文本文件而没有其他内容，递归搜索仍然需要很长时间。这只发生在我安装在 VMWare VM 上的 Ubuntu 服务器上。

在我的另一个 VMWare VM 上，我安装了 Lubuntu，并且 grep -r 效果很好。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:27:18.523

您缺少一个参数，指示您要查找模式的目录：

```
grep -r foo 
```

应该

```
grep -r foo . 
```

或者

```
grep -r foo /path/to/dir/ 
```

# c# - 何时使用 QueryParser 与 TermQuery？

> ID：16150807
> 
> 赞同：1
> 
> 时间：2013-04-22T15:25:29.907
> 
> 标签：c#, lucene, lucene.net

我正在研究 Lucene，无法区分 QueryParser 和 Term Query。看来他们是一样的。这是真的？如果不是，我应该什么时候使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:52:35.240

不，它们不一样。以下是对它们中的每一个的单独描述。

1) QueryParser **“解析”**文本查询并构建一个 Lucene-Query-Object。它接收文本查询并基于该信息构建一个 Lucene 查询对象。

[查看这篇文章](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)，它描述了 QueryParser 解析文本输入并构建相应的 Query 对象的方式。

2) **TermQuery 是 QueryParser 的一个交付物**，即它是一种 Lucene Query。Lucene 支持各种查询，如布尔查询、模糊查询等。TermQuery 是 Lucene 查询的最基本形式。

什么时候用什么？

*   几乎所有的应用程序，从简单到高级，都使用 QueryParser。只需传入文本输入，它就会根据该输入构建相应的 Lucene-Query-Object。

*   您始终可以使用 TermQuery 构造函数构建自己的查询。人们通常在尝试不同的查询类型时构建自己的 Lucene-Query-Objects。

您可以查看本教程，其中包含使用 Lucene 时需要了解的所有基本知识：[Lucene in 5 minutes](http://www.lucenetutorial.com/lucene-in-5-minutes.html)

# ruby - 使用正则表达式找不到哈希键值

> ID：16150808
> 
> 赞同：2
> 
> 时间：2013-04-22T15:25:32.843
> 
> 标签：ruby, regex, hash

我有一个哈希，其中包含类似于 entry1、entry2 等的条目，我正在尝试计算它们出现的次数，但我也有一个类似于 entry_hello 的条目。因此，当我尝试计算它们出现的次数时，“entry_hello”也会被计算在内。我在这里有这段代码来查看每个条目是否匹配，但这并不像我预期的那样工作。

```
hash = {}
hash['entry'] = 'Test1'
hash['entry_date'] = 'Test2'
hash['entry2'] = 'Test3'

hash.each do |x|
puts x.to_s.scan(/entry\d?$/).count
end 
```

但在这种情况下，什么都没有找到，但没有`$`'entry_hello' 被计算在内。我已经尝试过使用字符串并且这有效，但是当我使用哈希键尝试它时却没有。我不明白为什么它不起作用，并且想知道以太如何使它起作用或另一种方法来做到这一点。

更新：对于任何关心的人：我的代码不起作用的原因是因为`x`在这种情况下是键/值对，所以`x`不等于“entry”或“entry2”，而是等于“entryTest1”或“entry2Test3”。

Sawa 的回答有效，因为 in 的下划线`hash.count{|k, _| k =~ /\Aentry\d?\z/}`表示虽然闭包需要第二个参数，但它不会被赋值。

我可能会继续使用，`hash.keys.count{|k| k =~ /\Aentry\d?\z/ }`因为这对我来说更容易理解。这里的关键是`key's`现在您只查看哈希的键而不是键和值的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:30:27.820

```
hash.count{|k, _| k =~ /\Aentry\d?\z/} 
```

`'entry_date'`将匹配`/entry\d?/`没有`\z`or `$`。

# javascript - 如何选择子元素但只有一层

> ID：16150809
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:25:33.940
> 
> 标签：javascript, jquery

这是我的html代码。

```
<div data-value="1">

    <div data-items="bind">
        <div data-item="Black" />
        <div data-item="Orange" />
    </div>

    <div data-types="bind">
        <div data-type="Books" />
        <div data-type="Mobiles" />
    </div>

    <button>button 1</button>
    <input type='text'/>

</div>

<div data-value="2">

    <div data-items="bind">
        <div data-item="Black" />
        <div data-item="Orange" />
    </div>

    <div data-types="bind">
        <div data-type="Gifts" />
        <div data-type="Cards" />
    </div>

    <button>button 1</button>

</div> 
```

我有两个包含数据值“1”和“2”的父 div。

**第一的：**

> 我想要包含**data-value="1"**的 div 的孩子。输出应该是 4 个孩子 2 个 div、1 个按钮、1 个输入

**第二：**

> 我想要包含**data-value="2"**的 div 的孩子。输出应该是 3 个孩子 2 个 div，1 个按钮

怎么可能使用 jQuery 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:28:30.473

直接后代选择器

```
$("div[data-value='1'] > *"); 
```

或[`children`](http://api.jquery.com/children)方法：

```
$("div[data-value='1']").children(); 
```

根据需要重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:28:01.450

您可以通过以下方式获取子元素`.children()`

```
$('div[data-value="1"]').children(); 
```

**来源**

[jQuery API - .children()](http://api.jquery.com/children/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:28:08.183

```
$("div[data-value='1']").children(); 
```

[jsFiddle 演示](http://jsfiddle.net/mohammadAdil/FTawW/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:28:30.880

使用 jQuery[`.children()`](http://api.jquery.com/children/)函数，结合[属性 equals 选择器](http://api.jquery.com/attribute-equals-selector/)：

```
var $children1 = $('[data-value="1"]').children(); // children of element with data-value equal to 1

var $children2 = $('[data-value="2"]').children(); // children of element with data-value equal to 2 
```

# vba - 使用带有双重详细信息的 VBA 的 MS Access 报告？可能的？

> ID：16150811
> 
> 赞同：0
> 
> 时间：2013-04-22T15:25:37.093
> 
> 标签：vba, ms-access, reporting

**背景：**

我目前正在尝试了解报告在访问中的工作方式，因为我是整个报告领域的新手。我已经研究出如何创建基于表格的报告。- 没关系。但是尝试使它更符合我的需要被证明是一个挑战。

**问题：**

我正在创建的报告使用需要两行详细信息的数据。为了更好地解释：

报告中的****第一行****应该显示像发票交易一样进行的交易的一般概述......

然后****下面****我想要一个使用稍小的文本来显示发票交易的详细信息的行。信息，例如支付上面显示的发票的付款。

我已经设法让它显示出一种......但它显示出很大的差距可能是因为我将它放置在报告设计视图中的方式。

**在报告设计中：**

全部在报告的详细信息部分 - 我将第一行绑定到一个表，然后紧接着另一行绑定到同一个表但使用不同的数据。

**问题：**

我想要实现的目标是可能的吗？Access中有什么东西可以处理这个吗？

希望我的问题很清楚。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:20:49.887

首先，我会根据查询而不是表格来制作您的报告；随着数据的增长，基于表格的报告将变得更难管理。

创建一个只包含您需要的数据的查询，然后创建适当的标题；例如，如果您有一笔交易由多张发票（或一张，如果您只想为您格式化报告）支付，那么您将按交易的唯一标识符分组，这将创建一个区域“交易标题”，其中您将所有特定于交易的字段（交易ID，交易日期等）。然后在“详细信息”部分的下方，放置发票特定的所有字段（发票编号、发票日期、发票金额等）。结果将是交易一行，然后是每张发票一行。您可以根据需要添加后续分组并将详细信息部分格式化为较小的文本等。

如果您无法将所需的所有数据放入一个查询中，或者存在分组冲突，那么您将需要使用 Scotch 建议的子表单。

您提到的较大差距可能是因为您需要降低细节部分的高度；您的控件通常应形成一条水平线，并使详细信息部分略大于此。

希望这会有所帮助，如果没有，我需要更多关于您试图在报告中添加的信息。

# sql-server-2012 - 具有 11 个常量列的主表与具有单独常量表的主表

> ID：16150814
> 
> 赞同：0
> 
> 时间：2013-04-22T15:25:41.403
> 
> 标签：sql-server-2012

我有一个大约有 40 列的数据库表（称为 Master）。其中 11 个始终包含大约每 100.000 行的常量值。

这种结构的缺点是，当我需要更新这 11 列值时，我需要去更新所有 100.000 行。

我可以将所有常量数据移动到不同的表中，并且只在一个地方更新一次，而不是 100.000 个地方。

但是，如果我这样做，当我显示字段时，我需要在两个表之间创建 INNER JOIN，我知道这会使 SELECT 语句变慢。

我必须说更新列的发生比读取（显示）数据要少。

您如何建议我应该将数据存储在数据库中以获得最佳性能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:41:26.643

我会将 11 列放在一个单独的表中

您正在用 11 个额外的静态值使主表膨胀：这会影响查询的密度（每 8k 页的行数）和内存占用。

也就是说，如果您拆分静态数据，您只需为主表读取和处理更少的数据

# android - “与 adb 的连接被中断。” 已经尝试了一切

> ID：16150816
> 
> 赞同：8
> 
> 时间：2013-04-22T15:25:42.660
> 
> 标签：android, eclipse, adb, adt

> 与 adb 的连接被中断。已进行 0 次重新连接尝试。您可能需要从“设备”视图手动重新启动 adb。

每次我尝试运行在预格式化安装上运行良好的代码时，我都会收到此错误消息。现在我在一个新的设置上，我每次都得到这个。我已经尝试使用模拟的 android 设备和通过 USB 连接的手机，但无论如何我都会遇到相同的错误。当我手动启动模拟器时，模拟器启动良好，我可以通过 DDMS 透视图从中捕获屏幕和内容（与我的手机相同），我实际上无法让 adb 做任何事情。

我已经尝试了 Stack Exchange 上提供的所有建议。我已经以各种可能的方式（任务管理器、命令提示符、通过 DDMS 界面）重新启动了 adb 很多次，我已经禁用了所有可能干扰的防火墙/防病毒软件。我已经检查了 ADT 和 eclipse 的最新更新，我尝试了两者的各种不同版本，我已经从我的 PC 中删除了 ADT / eclipse 的所有痕迹并重新安装了一个新副本。我已禁用 IPv6 并添加了各种启动选项以尝试解决该问题。

我真的完全没有选择。如果有人有任何建议，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:53:44.323

如果您这么说您已经尝试了所有事情.. 我想说唯一的选择是保存您的项目并完全替换 adt 捆绑包.. 我遇到了类似的问题.. 遭受了两天然后把我的项目放在我的笔里驱动器转储了 adt 捆绑包并再次下载了它..我认为没有其他方法..希望我能帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T14:02:35.073

三种方法，你可以尝试每一种方法，直到你成功：

1.  关闭并重新打开 Eclipse ；或重启手机；或重新启动计算机（OMG，我非常这样做）
2.  将你的 ADT 更新到 22。我确实通过这种方法解决了这个问题，尽管我不确定这是解决它的确切方法。
3.  我的同事教我另一种方法：按win+r（如果你的操作系统是Windows），输入“services.msc”，找到“windows模块安装程序”服务，打开它。然后重新启动您的计算机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T08:58:40.927

对于这个问题问了很多问题但没有解决它......你必须去oracle站点下载jdk最后一个版本在drice c：或默认方式安装jdk是c：...... . 重启你的电脑然后启动 eclips ide ....

# python - matplotlib 子图的常用 xlabel/ylabel

> ID：16150819
> 
> 赞同：217
> 
> 时间：2013-04-22T15:25:51.000
> 
> 标签：python, matplotlib

我有以下情节：

```
fig,ax = plt.subplots(5,2,sharex=True,sharey=True,figsize=fig_size) 
```

现在我想给这个图提供常见的 x 轴标签和 y 轴标签。对于“共同”，我的意思是在整个子图网格下方应该有一个大的 x 轴标签，右边应该有一个大的 y 轴标签。我在文档中找不到任何关于此的内容`plt.subplots`，而且我的谷歌搜索建议我需要先做一个大`plt.subplot(111)`的开始 - 但是我如何将我的 5*2 子图放入其中`plt.subplots`？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2014-11-12T16:56:58.210

这看起来像你真正想要的。[它将此答案](https://stackoverflow.com/a/6981055/3753826)的相同方法应用于您的特定情况：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots(nrows=3, ncols=3, sharex=True, sharey=True, figsize=(6, 6))

fig.text(0.5, 0.04, 'common X', ha='center')
fig.text(0.04, 0.5, 'common Y', va='center', rotation='vertical') 
```

![具有公共轴标签的多个图](https://i.stack.imgur.com/IrJNO.png)

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2018-11-06T12:55:09.707

由于我认为它足够相关且足够优雅（无需指定坐标来放置文本），我复制（稍作修改）[另一个相关问题的答案](https://stackoverflow.com/a/36542971/1878788)。

```
import matplotlib.pyplot as plt
fig, axes = plt.subplots(5, 2, sharex=True, sharey=True, figsize=(6,15))
# add a big axis, hide frame
fig.add_subplot(111, frameon=False)
# hide tick and tick label of the big axis
plt.tick_params(labelcolor='none', which='both', top=False, bottom=False, left=False, right=False)
plt.xlabel("common X")
plt.ylabel("common Y") 
```

这导致以下结果（使用 matplotlib 版本 2.2.0）：

[![5 行 2 列子图，带有共同的 x 和 y 轴标签](https://i.stack.imgur.com/noSEfl.png)](https://i.stack.imgur.com/noSEfl.png)

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2020-12-03T22:56:36.793

**Matplotlib v3.4 中的新功能**( `pip install matplotlib --upgrade`)

**supxlabel**和**supylabel**

```
 fig.supxlabel('common_x')
    fig.supylabel('common_y') 
```

参见示例：

```
import matplotlib.pyplot as plt

for tl, cl in zip([True, False, False], [False, False, True]):
    fig = plt.figure(constrained_layout=cl, tight_layout=tl)

    gs = fig.add_gridspec(2, 3)

    ax = dict()

    ax['A'] = fig.add_subplot(gs[0, 0:2])
    ax['B'] = fig.add_subplot(gs[1, 0:2])
    ax['C'] = fig.add_subplot(gs[:, 2])

    ax['C'].set_xlabel('Booger')
    ax['B'].set_xlabel('Booger')
    ax['A'].set_ylabel('Booger Y')
    fig.suptitle(f'TEST: tight_layout={tl} constrained_layout={cl}')
    fig.supxlabel('XLAgg')
    fig.supylabel('YLAgg')

    plt.show() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/zl7zm.png)](https://i.stack.imgur.com/zl7zm.png) [![在此处输入图像描述](https://i.stack.imgur.com/alQYK.png)](https://i.stack.imgur.com/alQYK.png) [![在此处输入图像描述](https://i.stack.imgur.com/3qV0x.png)](https://i.stack.imgur.com/3qV0x.png)

[看更多](https://matplotlib.org/stable/gallery/subplots_axes_and_figures/figure_title.html)

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2014-05-13T18:21:55.057

没有`sharex=True, sharey=True`你得到：

![在此处输入图像描述](https://i.stack.imgur.com/TICJb.png)

有了它，您应该会变得更好：

```
fig, axes2d = plt.subplots(nrows=3, ncols=3,
                           sharex=True, sharey=True,
                           figsize=(6,6))

for i, row in enumerate(axes2d):
    for j, cell in enumerate(row):
        cell.imshow(np.random.rand(32,32))

plt.tight_layout() 
```

![在此处输入图像描述](https://i.stack.imgur.com/JVeIt.png)

但是如果你想添加额外的标签，你应该只将它们添加到边缘图：

```
fig, axes2d = plt.subplots(nrows=3, ncols=3,
                           sharex=True, sharey=True,
                           figsize=(6,6))

for i, row in enumerate(axes2d):
    for j, cell in enumerate(row):
        cell.imshow(np.random.rand(32,32))
        if i == len(axes2d) - 1:
            cell.set_xlabel("noise column: {0:d}".format(j + 1))
        if j == 0:
            cell.set_ylabel("noise row: {0:d}".format(i + 1))

plt.tight_layout() 
```

![在此处输入图像描述](https://i.stack.imgur.com/FLDlI.png)

为每个情节添加标签会破坏它（也许有一种方法可以自动检测重复的标签，但我不知道）。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-04-22T17:49:00.143

由于命令：

```
fig,ax = plt.subplots(5,2,sharex=True,sharey=True,figsize=fig_size) 
```

您使用返回一个由图形和轴实例列表组成的元组，这样做已经足够了（请注意，我已更改`fig,ax`为`fig,axes`）：

```
fig,axes = plt.subplots(5,2,sharex=True,sharey=True,figsize=fig_size)

for ax in axes:
    ax.set_xlabel('Common x-label')
    ax.set_ylabel('Common y-label') 
```

如果您碰巧想要更改特定子图的一些细节，您可以通过遍历子图的`axes[i]`where访问它。`i`

包括一个也可能非常有帮助

```
fig.tight_layout() 
```

在文件末尾，在 , 之前`plt.show()`，以避免重叠标签。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-05-30T17:57:56.210

如果您通过为左下角的子图制作不可见的标签来为公共标签保留空间，它会看起来更好。从 rcParams 传入 fontsize 也很好。这样，公共标签将随着您的 rc 设置而改变大小，并且轴也将调整为公共标签留出空间。

```
fig_size = [8, 6]
fig, ax = plt.subplots(5, 2, sharex=True, sharey=True, figsize=fig_size)
# Reserve space for axis labels
ax[-1, 0].set_xlabel('.', color=(0, 0, 0, 0))
ax[-1, 0].set_ylabel('.', color=(0, 0, 0, 0))
# Make common axis labels
fig.text(0.5, 0.04, 'common X', va='center', ha='center', fontsize=rcParams['axes.labelsize'])
fig.text(0.04, 0.5, 'common Y', va='center', ha='center', rotation='vertical', fontsize=rcParams['axes.labelsize']) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/zOWN8.png)](https://i.stack.imgur.com/zOWN8.png) [![在此处输入图像描述](https://i.stack.imgur.com/5kVw3.png)](https://i.stack.imgur.com/5kVw3.png)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-05-17T09:07:10.960

**更新：**

这个功能现在是我最近在 pypi 上发布的[proplot matplotlib 包的一部分。](https://proplot.readthedocs.io/en/latest/subplots.html#Shared-and-spanning-labels)默认情况下，当您制作图形时，标签在子图之间“共享”。

* * *

**原答案：**

我发现了一种更强大的方法：

如果您知道进入初始化的`bottom`和kwargs ，或者您知道坐标轴的边缘位置，您还可以使用一些花哨的“变换”魔法指定坐标中的 ylabel 位置。`top``GridSpec``Figure``Figure`

例如：

```
import matplotlib.pyplot as plt
import matplotlib.transforms as mtransforms
bottom, top = 0.1, 0.9
fig, axs = plt.subplots(nrows=2, ncols=1, bottom=bottom, top=top)
avepos = 0.5 * (bottom + top)
transform = mtransforms.blended_transform_factory(mtransforms.IdentityTransform(), fig.transFigure)  # specify x, y transform
axs[0].yaxis.label.set_transform(transform)  # changed from default blend (IdentityTransform(), axs[0].transAxes)
axs[0].yaxis.label.set_position((0, avepos))
axs[0].set_ylabel('Hello, world!') 
```

...并且您应该看到标签仍然会适当地左右调整以防止与标签重叠，就像正常情况一样，但也会将自身准确定位在所需的子图之间。

值得注意的是，如果您省略`set_position`调用，ylabel 将显示在图形的中间。我猜这是因为当最终绘制标签时，`matplotlib`使用 0.5 作为`y`-coordinate 而不检查底层坐标变换是否已更改。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-07-27T16:35:00.210

我在绘制图表网格时遇到了类似的问题。图表由两部分（顶部和底部）组成。y 标签应该位于两个部分的中心。

我不想使用依赖于知道外部图中位置的解决方案（如 fig.text()），所以我操纵了 set_ylabel() 函数的 y 位置。它通常是 0.5，它被添加到绘图的中间。由于我的代码中各部分（hspace）之间的填充为零，我可以计算两个部分相对于上部的中间部分。

```
import matplotlib.pyplot as plt
import matplotlib.gridspec as gridspec

# Create outer and inner grid
outerGrid = gridspec.GridSpec(2, 3, width_ratios=[1,1,1], height_ratios=[1,1])
somePlot = gridspec.GridSpecFromSubplotSpec(2, 1,
               subplot_spec=outerGrid[3], height_ratios=[1,3], hspace = 0)

# Add two partial plots
partA = plt.subplot(somePlot[0])
partB = plt.subplot(somePlot[1])

# No x-ticks for the upper plot
plt.setp(partA.get_xticklabels(), visible=False)

# The center is (height(top)-height(bottom))/(2*height(top))
# Simplified to 0.5 - height(bottom)/(2*height(top))
mid = 0.5-somePlot.get_height_ratios()[1]/(2.*somePlot.get_height_ratios()[0])
# Place the y-label
partA.set_ylabel('shared label', y = mid)

plt.show() 
```

[图片](http://i.stack.imgur.com/BWZ9r.png)

缺点：

*   到绘图的水平距离基于顶部，底部刻度可能延伸到标签中。

*   该公式不考虑部件之间的空间。

*   顶部高度为 0 时抛出异常。

可能有一个通用的解决方案将数字之间的填充考虑在内。

# c# - 同步 Telerik 和谷歌日历

> ID：16150820
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:25:51.923
> 
> 标签：c#, telerik

我目前正在 C#/Silverlight Web 应用程序上开发一些新功能，这些新功能包括管理数百名用户的约会和日历。我将使用 Telerik 控件来执行此操作。

用户将很快迁移到 gmail，因此我希望能够在某人的日历中安排约会并将此约会发送到他们全新的 Google 日历...

我阅读了很多其他关于 Telerik 和 gcalendar 之间直接同步的帖子，并了解到目前这是不可能的。

我知道可以将约会导出为 iCal 格式，但是我不知道如何自动化该过程（仅推送到谷歌），这意味着所有限制（例如身份验证）。

有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:40:54.493

如果您使用 OAuth 对日历进行身份验证，则可以执行此操作。Telerik 控件可以显示您从 Google 日历中获取的内容，一旦您为您正在使用的日程控制适当地格式化它们。

# java - 如何测试涉及 Java 组件的 Contivo 地图？

> ID：16150823
> 
> 赞同：4
> 
> 时间：2013-04-22T15:26:07.980
> 
> 标签：java, mapping, contivo

我正在使用 Contivo 3.11 在 2 个 XML 文档之间进行映射。对于一个元素，我正在调用 Java 实用程序来进行转换。我被告知该实用程序很好，但我需要测试整个映射，并且我不知道将实用程序放在哪里以便我可以测试它。

映射规则：

```
If Source Exists
   Call "my.package.MyClass.myMethod" Source to Target with java
end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T04:40:05.657

有几种不同的方法可以做到这一点。

**如果您有已编译的`.class`文件：**将`.class`文件放在`<Contivo install dir>\domTransforms`. 这个特定的目录被添加到 Contivo 的 Classpath 中，因此你`.class`应该被选中。

**如果你有一个`.jar`包：**你把文件放在哪里并不重要`.jar`，但我建议把它放在下面`<Contivo install dir>\lib`以保持一致性。您将不得不编辑`analyst.bat`文件以手动添加`.jar`到 Contivo 的类路径，这看起来像`set cp=%cp%;.\lib\YourJarName.jar`

**注意事项：** Contivo 3.11 在 Java 1.5 上运行，因此您必须注意代码兼容性。此外，方法签名至关重要，签名不能是其他任何东西`public String myMethod(IContivoRuntime icr, String [] args) throws TRuntimeEngineException`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-02T02:53:28.547

**在Classpath**环境变量指向的位置：

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)

[http://en.wikipedia.org/wiki/Classpath_%28Java%29](http://en.wikipedia.org/wiki/Classpath_%28Java%29)

[http://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

# alfresco - 如何通过 JCR API 访问 Alfresco 存储库

> ID：16150826
> 
> 赞同：2
> 
> 时间：2013-04-22T15:26:09.090
> 
> 标签：alfresco, jcr

我正在尝试通过以下链接通过 JCR API 和 SpringFramework 访问 Alfresco 存储库：[http](http://wiki.alfresco.com/wiki/Introducing_the_Alfresco_Java_Content_Repository_API) ://wiki.alfresco.com/wiki/Introducing_the_Alfresco_Java_Content_Repository_API 。

## IDE：日食伽利略

```
System.out.println("Initialising Repository...");
    ApplicationContext context = new ClassPathXmlApplicationContext("classpath:alfresc/application-context.xml");
    //ApplicationContext context = ApplicationContextHelper.getApplicationContext(); 

    Repository repository = (Repository)context.getBean("JCR.Repository");

             // display information about the repository
     System.out.println("Repository Description...");
             String  [] keys = repository.getDescriptorKeys();
             for (String   key : keys)
             {
                 String   value = repository.getDescriptor(key);
                 System.out.println(" " + key + " = " + value);
         } 
```

* * *

## 并得到这个例外：

```
 Initialising Repository...
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'propertyValueCache' defined in class path resource [alfresco/cache-context.xml]: Initialization of bean failed; nested exception is org.springframework.beans.TypeMismatchException: Failed to convert property value of type 'java.lang.String' to required type 'boolean' for property 'disableSharedCache'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [${system.cache.disableImmutableSharedCaches}]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.tcs.alfresco.WikiExample.main(WikiExample.java:20)
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert property value of type 'java.lang.String' to required type 'boolean' for property 'disableSharedCache'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [${system.cache.disableImmutableSharedCaches}]
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:467)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:499)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:493)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1371)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1330)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 11 more
Caused by: java.lang.IllegalArgumentException: Invalid boolean value [${system.cache.disableImmutableSharedCaches}]
    at org.springframework.beans.propertyeditors.CustomBooleanEditor.setAsText(CustomBooleanEditor.java:124)
    at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:416)
    at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:388)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:157)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:447)
    ... 17 more 
```

* * *

我也尝试过露天 SDK。但得到同样的错误。 [http://wiki.alfresco.com/wiki/Alfresco_SDK_4.0](http://wiki.alfresco.com/wiki/Alfresco_SDK_4.0)

我的露天副本是正确的，因为我能够通过 CMIS 连接到存储库。请帮忙。

谢谢瑞诗

# mongodb - Mongodb - MapReduce 连接值而不是求和

> ID：16150827
> 
> 赞同：0
> 
> 时间：2013-04-22T15:26:09.840
> 
> 标签：mongodb, mapreduce

我已经成功地使用 Mongodb 和 MapReduce 将超过 500 万行的销售报表汇总到 60k 左右。对结果非常满意，但我对结果中的一行感到困惑，其中似乎连接了结果而不是求和，所以我最终得到了一个包含“0.00590100000000.0059010.133150000000.0053100.002960.043208000.00189”的值字段

有谁之前经历过这个吗？

在对原始语句中涉及的行进行仔细分析后，我看不出任何会导致它的原因，因为它们看起来完全一样。相同标识符的偶数值已求和。

我的代码如下，任何人都可以发现任何可能导致它的东西吗？就像我说的，它距离 520 万的原始语句只有 7 行，所以准确性非常好，只是没有准确，我知道它会困扰我。

```
mongoimport -d test -c sales --type csv --file sales_rawdata.csv --headerline

var mapFunction1 = function() {
                       emit({video_id: this.video_id, isrc: this.isrc, country: this.country}, this.amount_payable);
                   };

var reduceFunction1 = function(keyIsrc, valuesAmountPayable) {
                        return Array.sum(valuesAmountPayable);
                    };

db.sales.mapReduce(
        mapFunction1,
        reduceFunction1,
            { out: "sales_total_by_country_and_isrc" }
                )

db.sales_total_by_country_and_isrc.find()           

mongoexport --csv -d test -c sales_total_by_country_and_isrc -q '{value: {$ne: 0}}' -f "_id.video_id","_id.isrc","_id.country","value" -o sales_total_by_country_and_isrc.csv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:08:53.333

可能是您的 amount_payable 值之一被存储为字符串。如果是这样，那么 Array.sum 将连接为总和。

您可以使用以下方法进行测试：

```
db.sales_total_by_country_and_isrc.find( { video_id: <the video_id in question>,
                                           isrc: <the isrc in question>,
                                           country: <the country in question>,
                                           amount_payable: {$type: 2 }
                                       } ) 
```

其中 $type: 2 将检查字符串类型。

# php - 共享作曲家依赖

> ID：16150831
> 
> 赞同：2
> 
> 时间：2013-04-22T15:26:16.573
> 
> 标签：php, dependencies, composer-php

我正在开发一个可以安装扩展的项目，即安装核心程序，然后可以下载并添加第三方扩展。

如果有两个单独的扩展需要相同版本的相同依赖项（例如，如果两个扩展需要 AWS 开发工具包），有没有办法让作曲家最终不会下载相同依赖项的两个副本?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:45:34.773

您可以将扩展创建为作曲家包。然后将对您自己的包的引用添加到您的主`composer.json`文件中。

例如：

```
root/
   my-extension-a/
      composer.json ( require: dep-a, dep-b)
      vendor/
          dep-a/
          dep-b/
   my-extension-b/
      vendor/
          dep-a/
          dep-c/
      composer.json (require dep-a, dep-c)

  main-project/
      composer.json  (require my-extension-a, my-extension-b)
      vendor/
          my-extension-a/
          my-extension-b/
          dep-a/
          dep-b/
          dep-c/ 
```

您的主项目中的`composer.json`文件将如下所示：

```
"require": {
         "parent5446/my-extension-a": "dev-master",
         "parent5446/my-extension-b": "dev-master"
} 
```

你可以在 packagegist 中公开你的扩展。或者您可以使用 Satis 来引用私有存储库。此功能在此处有详细记录：[使用 Satis 和 Composer 管理私有包](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md)

# php - 合并或将两个数组合二为一 + cakephp 条件

> ID：16150839
> 
> 赞同：0
> 
> 时间：2013-04-22T15:26:41.003
> 
> 标签：php, cakephp

如何打印此数组：

```
array
      0 => 
        array
          'Shift.name LIKE' => string '%Burberry%' (length=10)
      1 => 
        array
          'Shift.name LIKE' => string '%Butchery%' (length=10) 
```

像这样：

```
array 
  'Shift.name LIKE' => string '%Burberry%' (length=10)  
  'Shift.name LIKE' => string '%Butchery%' (length=10) 
```

到目前为止我写的：

```
$skillAux =array(); $i=0;
foreach ($skillNames as $name){
                    $skillAux[$i] = array('Shift.name LIKE'=>'%'.$name.'%');
                    $i++;                
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:49:56.750

## 数组键（索引）必须是*唯一的*

首先，（关联）中的“键”应该是*唯一的*，因此要努力实现这一点；

```
array (
  'Shift.name LIKE' => '%Burberry%'  
  'Shift.name LIKE' => '%Butchery%'
) 
```

与尝试这样做是一样的；

```
$myArray = array();

$myArray['Shift.name LIKE'] = '%Burberry%';
$myArray['Shift.name LIKE'] = '%Butchery%'; 
```

换句话说，您正在**覆盖**“Shift.name LIKE”键的先前值，因此您最终只会得到最后一个值；

```
var_dump($myArray);

//The last value has overwritten the previous one, so you'll 
//only have 1 value in the array:
array(
    'Shift.name LIKE' string '%Butchery%' (length=10)
) 
```

## *在 CakePHP 中为不同*字段创建“或”条件

*您可能会感到困惑，因为在为不同*字段创建“或”条件时，您可以这样做；

```
$results = $this->Shift->find('all', array(
    'conditions' => array(
        'OR' => array(
            'Shift.name LIKE' => '%Burberry%',
            'Shift.something' => 'something',
        ),
    ),
)); 
```

这将执行类似的操作；

```
SELECT * 
FROM shifts AS Shift
WHERE Shift.name LIKE '%Burberry%' OR Shift.something = 'something'; 
```

但是，如果您需要对*同一字段执行此操作，这***将不起作用**（如我回答的第一部分所述）

 *## 在 CakePHP中为*单个*字段创建“或”条件

正如您的评论之一所述，您正在尝试为CakePHP中的*单个字段*创建“或”条件。

基本上，您需要做的是创建多个关联数组并将它们包装在一个非关联数组中（实际上，这是您在第一个示例中得到的）

像这样;

```
array(
    'OR' => array(
        array('Shift.name LIKE' => '%Burberry%'),
        array('Shift.name LIKE' => '%Butchery%'),
    )
) 
```

哪个可以这样使用；

```
$results = $this->Shift->find('all', array(
    'conditions' => array(
        'OR' => array(
            array('Shift.name LIKE' => '%Burberry%'),
            array('Shift.name LIKE' => '%Butchery%'),
        ),
        // other conditions can be put here
        // for example 'Shift.status' => 1
    ),
)); 
```

这将执行类似的操作；

```
SELECT * 
FROM shifts AS Shift
WHERE Shift.name LIKE '%Burberry%' OR Shift.name LIKE '%Butchery%'; 
```

## 例子

以编程方式创建此数组；（我必须在这里“猜测”，你的问题不是很清楚*那些*“Burberry”和“Butchery”词来自哪里）

例如，有人想在您的数据库中搜索名称包含“Burberry”或“Butchery”的“Shifts”。您从表单字段中收集搜索查询并使用这些词创建一个“或”查询；

```
// Search-term entered by the user
// for example, obtained via $search = $this->request->query['search'];
$search      = 'Burberry Butchery';
$keywords    = explode(' ', $search);
$conditions  = array();

foreach($keywords as $keyword) {
    $conditions[] = array(
        'Shift.name LIKE' => '%' . $keyword . '%'
    );
}

$results = $this->Shift->find('all', array(
    'conditions' => array(
        'OR' => $conditions
    ),
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:42:44.423

```
$skillAux=array();
$count=0;
foreach ($skillNames as $value){

    foreach($value as $finalkey => $finalvalue){
    echo $finalkey;
    $skillAux[$finalkey.$count] = $finalvalue;    
    }
    $count++;
}
var_dump($skillAux);exit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:29:19.257

如果您正在循环其中一个数组，您可以使用 array_push() 将每个值添加到另一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:30:28.843

**尝试这个**

```
echo implode('<br>', $skillAux); 
```

* * *

**文档***implode*函数会将整个数组转换为
字符串 语法

 *```
string implode ( string $glue , array $pieces )
string implode ( array $pieces ) 
```

第一个参数 -> 要用于将数组片段连接在一起的字符串。
第二个参数 -> 数组

兼容 PHP 4、PHP 5

参考： http: [//php.net/manual/en/function.implode.php](http://php.net/manual/en/function.implode.php)**

# mysql - 在 mySQL 中将时间戳更改为日期

> ID：16150842
> 
> 赞同：0
> 
> 时间：2013-04-22T15:26:50.863
> 
> 标签：mysql, date

我只是想将我的数据库布局从使用时间更改为`date("y-m-d h:i:s")` 仅使用 SQL 查询就可以做到这一点吗？还是我必须手动一一做？

这是因为我开始在数据库中插入时间戳，现在我需要存储`date()`，我不想通过使用 PHP 将时间戳转换为日期来简单地**绕过**，我想运行 SQL 来更新从时间戳到日期的所有行。

就像是：

```
UPDATE `my_table` SET `time` = 'new_date("y-m-d h:i:S") WHERE `time` = 'time()' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:29:35.873

您需要添加一个`DATETIME`类型字段来存储它，然后您可以使用`FROM_UNIXTIME()`mysql 中的函数对其进行转换。

```
ALTER TABLE my_table ADD my_date_time DATETIME;
UPDATE my_table SET my_date_time = FROM_UNIXTIME(`time`); 
```

文档`FROM_UNIXTIME()`：[http ://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)

然后，您可以删除名为`time`. 无论如何我都会推荐，因为`time`它是 mysql 中的列类型。

```
ALTER TABLE my_table DROP `time`; 
```

# java - Java错位构造

> ID：16150844
> 
> 赞同：-4
> 
> 时间：2013-04-22T15:26:56.557
> 
> 标签：java, construct

我最近在我的 mac 上安装了 eclipse，我在课堂上玩弄它。我在第一行打印时不断出现错误的构造错误，在我的主要声明中出现一堆语法错误。我不太确定这是怎么回事。

```
 import static java.lang.System.out;
 import java.util.Scanner;

 public static void main (string args[]) 
  {

double a, b, c, d, e, f;

Scanner input = new Scanner();
out.println(" Please enter the first number: ");
a = imput.nextDouble;
out.println("Please enter the second number: ");
b = imput.nextDouble;
out.println ("Please enter the third number : ");
c = imput.nextDouble;
out.println ("Please enter in fourth number : ");
d = imput.nextDouble;
out.println(" Please enter in fifth number : ");
e = imput.nextDouble; 

double sum = a + b + c + d + e; 
```

}

这还没有完成，但据我所知，我的所有变量都有值，并且一切都按应有的方式关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:29:25.670

代码中有很多错误：

*   没有类声明
*   不正确的构造函数调用`Scanner`- 它不接受空参数
*   nextDouble 应该有括号 ()
*   `imput`应该是`input`，正如你所声明的`input`
*   字符串应该是字符串

这是更正后的代码：

```
import static java.lang.System.out;
import java.util.Scanner;

class MyClass {
    public static void main(String args[]) {

        double a, b, c, d, e, f;

        Scanner input = new Scanner(System.in);
        out.println(" Please enter the first number: ");
        a = input.nextDouble();
        out.println("Please enter the second number: ");
        b = input.nextDouble();
        out.println("Please enter the third number : ");
        c = input.nextDouble();
        out.println("Please enter in fourth number : ");
        d = input.nextDouble();
        out.println(" Please enter in fifth number : ");
        e = input.nextDouble();

        double sum = a + b + c + d + e;
        out.println("Sum is : " + sum);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:30:11.353

你有几个问题：

1.  您需要添加类声明。
2.  主要参数是`String`而不是字符串。
3.  `imput`应该是`input`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:28:24.760

你错过了类声明！在 Java中，*一切都*必须在一个类中。这与 C/C++、Python 和许多其他支持*函数*的语言（Java 只有*方法*）非常不同。

例如，如果这都在一个名为*MyTest.java*的文件中，那么：

```
 import static java.lang.System.out;
 import java.util.Scanner;

 public class MyTest {

   public static void main (string args[]) 
    {

  double a, b, c, d, e, f;

  Scanner input = new Scanner();
  out.println(" Please enter the first number: ");
  a = imput.nextDouble;
  out.println("Please enter the second number: ");
  b = imput.nextDouble;
  out.println ("Please enter the third number : ");
  c = imput.nextDouble;
  out.println ("Please enter in fourth number : ");
  d = imput.nextDouble;
  out.println(" Please enter in fifth number : ");
  e = imput.nextDouble; 

  double sum = a + b + c + d + e;
  }
 } 
```

# html - 添加垂直下拉菜单

> ID：16150845
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:27:03.937
> 
> 标签：html, css

在向现有导航添加垂直下拉菜单时寻找一些帮助/指导。

这是我的html：

```
<nav class="menu two-thirds column omega">
<ul>
    <li><a href="#about">About<br /><span>who we are</span></a>

    </li>
    <li><a href="#solutions">Solutions<br /><span>what we do</span></a>

    </li>
    <li><a href="#contact">Contact<br /><span>get in touch</span></a>

    </li>
    <li><a href="#">Support<br /><span></span></a>

    </li>
    <ul>
        <li>link one</li>
        <li>link two</li>
        <li>link three</li>
    </ul>
</ul> 
```

这是我的CSS：

```
 nav ul {
    float: right;
    height: 61px;
}
nav li {
    list-style: none;
    display: block;
    float: left;
    margin-top: -6px;
    margin-bottom: 0;
}
nav a, nav a:visited, nav a:focus {
    display: block;
    height: 63px;
    padding: 20px 20px 0 20px;
    text-decoration: none;
    color:#666;
    font-weight : 600;
    border-top: 3px solid #000;
    margin-top: 1px;
}
nav a:hover {
    color: red;
    border-top-color: #c1c1c1;
}
nav a.active, nav a.active:focus {
    /*color: #37b1ff;*/
    /*border-top-color: #37b1ff;*/
    color: #ea0101;
    border-top-color: #ea0101;
    -webkit-transition:color 0.3s ease, border-color 0.3s ease, background-color 0.3s ease;
    -moz-transition:color 0.3s ease, border-color 0.3s ease, background-color 0.3s ease;
    -o-transition:color 0.3s ease, border-top-color 0.3s ease, background-color 0.3s ease;
    transition:color 0.3s ease, border-color 0.3s ease, background-color 0.3s ease;
}
nav a.active:hover {
    color: #000;
    /*border-top-color: #37b1ff;*/
    border-top-color: #ea0101;
}
nav a span {
    color: #c1c1c1;
    font-size: 12px;
    font-weight : normal;
} 
```

我想要做的是从“支持”项目中添加一个简单的垂直下拉菜单。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:32:47.030

将嵌套列表放入 Support`<li>`中，例如：

```
<nav class="menu two-thirds column omega">
  <ul>
    <li><a href="#">Support<br /><span></span></a>
      <ul>
        <li>link one</li>
        <li>link two</li>
        <li>link three</li>
      </ul>
    </li>
  </ul>
</nav> 
```

然后，您可以使用 隐藏任何嵌套列表`nav ul li ul { display: none; }`，并使用 li:hover 事件触发显示它们。

# jquery - jQuery连续来回旋转动画

> ID：16150846
> 
> 赞同：0
> 
> 时间：2013-04-22T15:27:04.673
> 
> 标签：jquery, animation, rotation

我需要一些帮助。

我为我网站上的一个元素制作了一个不错的 web kit 动画。它应该连续来回旋转7度。不幸的是，它仅适用于 Chrome。这是代码：

```
#brk {
background: url("../images/brk.png");
width: 118px;
height: 54px;
display: block;
position: relative;
top: 65px;
left: 93px;
     -webkit-animation: brk-spin 3s infinite linear;
     -moz-animation: brk-spin 3s infinite linear;
     -o-animation: brk-spin 3s infinite linear;
     -ms-animation: brk-spin 3s infinite linear;
}

@-webkit-keyframes brk-spin {
0% { -webkit-transform: rotate(0deg);}
25% { -webkit-transform: rotate(-7deg);}
50% { -webkit-transform: rotate(0deg);}
75% { -webkit-transform: rotate(7deg);}
100% { -webkit-transform: rotate(0deg);}
}

@-moz-keyframes brk-spin {
0% { -webkit-transform: rotate(0deg);}
25% { -webkit-transform: rotate(-7deg);}
50% { -webkit-transform: rotate(0deg);}
75% { -webkit-transform: rotate(7deg);}
100% { -webkit-transform: rotate(0deg);}
}

@-o-keyframes brk-spin {
0% { -webkit-transform: rotate(0deg);}
25% { -webkit-transform: rotate(-7deg);}
50% { -webkit-transform: rotate(0deg);}
75% { -webkit-transform: rotate(7deg);}
100% { -webkit-transform: rotate(0deg);}
}

@-ms-keyframes brk-spin {
0% { -webkit-transform: rotate(0deg);}
25% { -webkit-transform: rotate(-7deg);}
50% { -webkit-transform: rotate(0deg);}
75% { -webkit-transform: rotate(7deg);}
100% { -webkit-transform: rotate(0deg);}
} 
```

所以我想我为不支持 webkit 动画的浏览器使用了一些 jQuery。我尝试了很多变化，但没有任何效果。

我下载了 jQuery 旋转插件（[https://code.google.com/p/jqueryrotate/](https://code.google.com/p/jqueryrotate/)）

我试过这样的事情：

```
<script>
if(!Modernizr.cssanimation) { 
    $(function() {

    $('#brk').stop().rotate({ angle:0, animateTo: 7, duration:600, callback: 

function() {
        $('#brk').stop().rotate({ animateTo: -7, duration:600});
        }
    });

(function roty() {
     setTimeout(function() { roty() },1200);
             })();
       });
}
</script> 
```

但是，图像（带背景的 div）只来回摆动一次，然后就停止了。

知道如何让它循环吗？

帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:34:14.750

为什么不让方法自己调用呢？所以让动画到 7 的那个调用另一个，反之亦然。像这样的东西：

```
function rotateSeven() {
    $('#brk').stop().rotate({ angle:0, animateTo: 7, duration:600, callback: function() {
        rotateNegative();
        }
    });
}

function rotateNegative() {
    $('#brk').stop().rotate({ angle:0, animateTo: -7, duration:600, callback: function()  {
        rotateSeven();
        }
    });
} 
```

然后，当您呼叫其中一个时，他们会继续互相呼叫。我不确定这是否是最好的方法，因为我没有尝试以你在这里的方式制作动画。

**编辑**

你的代码可能有错误吗？我做了一些更简单的事情，但它对我有用，持续：

```
function fadeIn() {
    jQuery("#test").fadeIn();
    fadeOut();
}

function fadeOut() {
    jQuery("#test").fadeOut();
    fadeIn();
}

fadeOut(); 
```

这是一个简单的例子，但它适用于我的[Js Fiddle](http://jsfiddle.net/6wPfz/1/)

**编辑 2**

这是一个工作示例...只是为了确保文档说使用IMG标签-您的#brk是IMG标签，对吗？否则，试着看看你的和我的有什么[不同](http://jsfiddle.net/YKj5D/1968/)

# c - 在 C 中访问链接器定义的符号

> ID：16150848
> 
> 赞同：2
> 
> 时间：2013-04-22T15:27:14.290
> 
> 标签：c, linker, extern, symbols

我有一个链接器符号（我们称之为 __BASE_ADDR），在链接器命令脚本中定义，它包含我需要使用的长字*之后*的长字地址（例如，我需要检查地址 0x0000000C 处的长字并且 __BASE_ADDR 等于 0x00000010 ）。所以在代码中我尝试使用 __BASE_ADDR 并从中减去 4 来访问 0x0000000C。

我的链接器映射输出正确显示 __BASE_ADDR 的值为 0x00000010。但是，当我尝试使用以下 C 代码访问该位置时，它不起作用：

```
extern unsigned char *__BASE_ADDR;

void someFunc( void )
{
    unsigned long Val = *((unsigned long *) (__BASE_ADDR - 4));

    /* Use Val for some comparison...*/
    /* ... */
} 
```

Val 被设置为错误的值。似乎正在发生的事情是，__BASE_ADDR 处的任何长字都被视为地址，减去 4，并将结果地址的内容放入 Val。

但是当我执行以下操作时，它确实可以正常工作，并且 Val 被正确设置为地址 0x0000000C 中的任何内容：

```
extern unsigned char __BASE_ADDR[];

void someFunc( void )
{
    unsigned long Val = *((unsigned long *) (__BASE_ADDR - 4));

    /* Use Val for some comparison...*/
    /* ... */
} 
```

任何人都可以阐明这一点吗？我理解为什么您不能访问链接器符号的内容（从技术上讲，它没有内容），但是为什么将链接器符号作为指针访问和作为数组访问之间会有区别？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:29:27.993

> （例如，我需要检查地址处的长字`0x0000000C`并且`__BASE_ADDR`等于`0x00000010`）

症状说`0x00000010`不是*值*，`__BASE_ADDR`而是*地址*。

所以

```
unsigned long Val = *((unsigned long *) (__BASE_ADDR - 4)); 
```

确实读取了 at 的值`0x00000010`（获取 的值`__BASE_ADDR`），从中减去 4 并将结果解释为`unsigned long`要存储在 中的地址`val`。

和

```
extern unsigned char __BASE_ADDR[]; 
```

数组`__BASEADDR`的地址与数组的第一个元素的地址相同，所以在这种情况下，

```
unsigned long Val = *((unsigned long *) (__BASE_ADDR - 4)); 
```

*   将数组名称转换`__BASE_ADDR`为指向其第一个元素的指针，结果的地址是`__BASE_ADDR`（只是不同类型）的地址，`0x00000010`；
*   然后从中减去 4 `unsigned char*`，得到地址`0x0000000C`；
*   然后将该地址转换为`unsigned long*`，取消引用并将位于那里的值存储在`val`.

（最后一点很可能会引发未定义的行为，但如果您处理固定地址，您*可能处于知道它有效的情况。）*

# openlayers - OpenLayers.Layer.GML 抛出 JS 错误

> ID：16150853
> 
> 赞同：0
> 
> 时间：2013-04-22T15:27:24.273
> 
> 标签：openlayers, kml, gml-geographic-markup-lan

我正在尝试将 KML 文件加载到我的 Openlayers 地图中。我将以下代码行添加到我的 JS 文件中，它会引发错误。添加此行后，我的地图甚至不会加载：

```
var layer = new OpenLayers.Layer.GML("KML", "kml/mykml.kml", {format: OpenLayers.Format.KML}); 
```

我从[这里](http://docs.openlayers.org/library/layers.html)复制了它，只是更改了 KML 文件的路径以匹配我自己的路径。似乎很多人都在使用它。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:13:26.750

GML 层已弃用，[文档](http://dev.openlayers.org/releases/OpenLayers-2.11/doc/devdocs/files/OpenLayers/Layer/GML-js.html)说明它将在 3.0 中删除，并且没有针对 2.12 版的 GML 层的 api 文档，因此它可能会以某种方式损坏，并且可能最好将 Vector 层与 Protocol.HTTP 和 Strategy.Fixed 一起使用。

此代码（字面上取自带有文件名更正的 KML 示例）应该可以完成工作：

```
var layer = new OpenLayers.Layer.Vector("KML", {
    strategies: [new OpenLayers.Strategy.Fixed()],
    protocol: new OpenLayers.Protocol.HTTP({
        url: "kml/mykml.kml",
        format: new OpenLayers.Format.KML({
            extractStyles: true, 
            extractAttributes: true,
            maxDepth: 2
        })
    })
}) 
```

# java - 使用服务组件运行时

> ID：16150855
> 
> 赞同：1
> 
> 时间：2013-04-22T15:27:28.320
> 
> 标签：java, osgi, apache-felix

我的目标是从我的包中删除对 OSGi 的依赖。我使用 felix (v 4.2.1) 作为 impl 并运行它可嵌入的。我安装`org.apache.felix.scr`（v. 1.6.2）捆绑包以获得服务组件运行时支持。但是当我跑步时

```
 ServiceReference ref = bundleContext().getServiceReference(ScrService.class.getName());
 ScrService s = (ScrService) bundleContext().getService(ref); 
```

我明白了`ClassCastException: org.apache.felix.scr.impl.ComponentRegistry cannot be cast to org.apache.felix.scr.ScrService`。

好的。我将修改系统包。

```
config.put(Constants.FRAMEWORK_SYSTEMPACKAGES, "org.apache.felix.scr"); 
```

现在我明白了

```
Caused by: org.osgi.framework.BundleException: Unresolved constraint in bundle org.apache.felix.scr [1]: Unable to resolve 1.0: missing requirement [1.0] osgi.wiring.package; (&(osgi.wiring.package=org.osgi.framework)(version>=1.4.0)(!(version>=2.0.0)))
        at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3974)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:2037)
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:955)
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:942)
        at com.copyright.rup.communications.felix.Felix.addBundle(Felix.java:86)
        ... 28 more 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:29:45.993

我怀疑您尝试获取的第一个块`ScrService`位于嵌入端（即在框架之外，而不是在已安装的捆绑包中）。

如果是这种情况，那么您有两份副本`ScrService`- 一份从嵌入代码的 ClassLoader 加载，另一份由 scr 包的 ClassLoader 在框架解析时加载。这就是您看到`ClassCastException`.

您可以只从框架包中导出 SCR 包的导出内容。

[OSGi 核心规范 v5](http://www.osgi.org/Download/File?url=/download/r5/osgi.core-5.0.0.pdf)的第 51 页第 3.8 节指出，如果一个模块同时具有相同包的导入和导出定义，则框架将首先尝试从外部解析，如果成功则丢弃重叠的导出定义。

因此，将 SCR 运行时包的 Export-Package 清单标头复制为框架属性：

```
properties.put(Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA, 
        "org.ops4j.pax.url.mvn,org.apache.felix.scr;uses:=\"org.osgi.framework," +
        "org.osgi.service.component\";version=\"1.7\"," +
        "org.apache.felix.scr.component;status=provisional;mandatory:=status;" +
        "uses:=\"org.osgi.service.component\";version=\"1.0\"," +
        "org.osgi.service.component;uses:=\"org.osgi.framework\";version=\"1.2\"");

//Which you pass to the FrameworkFactory ...

ServiceLoader<FrameworkFactory> loader = ServiceLoader.load(FrameworkFactory.class);
Iterator<FrameworkFactory> iterator = loader.iterator();
Framework framework = iterator.next().newFramework(properties);
framework.start(); 
```

有几点需要注意：

*   如果您还没有使用`ConfigurationAdmin`，那么还要安装[org.osgi.compendium](http://search.maven.org/#artifactdetails%7Corg.osgi%7Corg.osgi.compendium%7C4.3.1%7Cjar)以确保您至少拥有 和 的 API 类`org.osgi.service.cm.*`，`org.osgi.service.metatype*`AFAIK 这些是 SCR 运行时所必需的。

*   除非您正在认真定制实际框架，否则您不应该使用`Constants.FRAMEWORK_SYSTEMPACKAGES`它，而是可能希望使用它`Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA`来*扩展*框架包导出的内容。（框架实现有很好的默认值，`FRAMEWORK_SYSTEMPACKAGES`嵌入时通常不需要修改它）。

# c - C 有散列/字典数据结构吗？

> ID：16150867
> 
> 赞同：6
> 
> 时间：2013-04-22T15:28:11.533
> 
> 标签：c, hashtable

我现在正在学习 C，因为我知道 perl 和一点 python。我进行了快速搜索，发现没有像 perl/python 中那样明确的哈希/字典，我看到人们说您需要一个函数来查找哈希表。所以事实是 C 不提供固有的散列结构，你必须编写一些函数才能在 C 中使用散列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T15:32:52.007

基本上，C 拥有的唯一数据结构是数组、结构（有点像映射，但在编译时必须知道键）和联合。其他一切都必须手动编码或由库提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T15:31:12.093

它不是标准 C 库的一部分。使用诸如 Glib 之类的库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-26T16:17:18.767

忽略上述所有误导性的答案，C 确实有一个标准库，早在所有这些花哨的语言存在之前。基本版只做一张表，GNU 版随心所欲。

```
#include <search.h>

int hcreate(size_t nel);

ENTRY *hsearch(ENTRY item, ACTION action);

void hdestroy(void);

#define _GNU_SOURCE         /* See feature_test_macros(7) */
#include <search.h>

int hcreate_r(size_t nel, struct hsearch_data *htab);

int hsearch_r(ENTRY item, ACTION action, ENTRY **retval, struct hsearch_data *htab);

void hdestroy_r(struct hsearch_data *htab); 
```

签出：

[https://pubs.opengroup.org/onlinepubs/9699919799/functions/hcreate.html](https://pubs.opengroup.org/onlinepubs/9699919799/functions/hcreate.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:43:18.967

我建议你看看一个非常好的库[GLib](https://developer.gnome.org/glib/2.36/)：

> GLib 是一个通用实用程序库，它提供了许多有用的数据类型、宏、类型转换、字符串实用程序、文件实用程序、主循环抽象等。它适用于许多类 UNIX 平台，以及 Windows 和 OS X。GLib 是在 GNU 库通用公共许可证 (GNU LGPL) 下发布的。

有许多使用这个库的开源项目：GNOME、Wireshark 等等。Glib 包括许多有用的数据结构的实现，例如：

*   哈希表（GHashTable）
*   双链表（GList）
*   队列（QQueue）
*   数据集
*   ETC

# python - 在 Python 中按子字符串对字符串进行排序

> ID：16150868
> 
> 赞同：6
> 
> 时间：2013-04-22T15:28:17.077
> 
> 标签：python, string, sorting, substring

我在 python 中有一个字符串列表，如下所示：

*   姓名 号码 号码 4 位数字

如何按最后一个数字对其进行排序？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T15:29:14.780

像那样：

```
sorted(your_list, lambda x: int(x.split()[-1])) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-22T15:28:58.687

```
my_list = ['abc 12 34 3333',
           'def 21 43 2222',
           'fgh 21 43 1111']

my_list.sort(key=lambda x:int(x.split()[-1])) 
```

`my_list`就是现在：`['fgh 21 43 1111', 'def 21 43 2222', 'abc 12 34 3333']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-21T18:57:01.610

```
def sort_csv(lines=[], delim=',', position=1):
    '''
    Returns a sorted list based on "column" from csv-type data.
    '''
    return sorted(lines, key=lambda x: x.split(delim)[int(position) - 1])

test_data = [
        'part1/foo/part1/partX',
        'part3/bar/part5/partX',
        'part4/fuz/partA/partX',
        'part2/buz/part3/partX',
        ]
# Sort by third element
pprint(sort_csv(test_data, '/', 3))
#['part1/foo/part1/partX',
# 'part2/buz/part3/partX',
# 'part3/bar/part5/partX',
# 'part4/fuz/partA/partX']

test_data = [
        'abc 12 34 3333',
        'bar 53 29 AAAA',
        'def 21 43 2222',
        'foo 53 29 5555',
        'fgh 21 43 1111',
]
# Sort by last element
pprint(sort_csv(test_data, ' ', 0))
#['fgh 21 43 1111',
# 'def 21 43 2222',
# 'abc 12 34 3333',
# 'foo 53 29 5555',
# 'bar 53 29 AAAA'] 
```

# symfony - Symfony 2.2 上传文件

> ID：16150875
> 
> 赞同：5
> 
> 时间：2013-04-22T15:28:33.113
> 
> 标签：symfony, file-upload

自从我使用 Symfony2 上传文件已经有一段时间了，似乎一切都发生了变化，请按照[如何使用 Doctrine 处理文件上传](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)中的指南进行操作，但已过时且无法正常工作。

当我尝试绑定表单时出现错误

```
Catchable Fatal Error: Argument 1 passed to Entity\Portada::setFile() must be an instance of Symfony\Component\HttpFoundation\File\UploadedFile, string given, ... 
```

这是我的控制器

```
/**
 * @Route("/upload", name="documento_upload")
 * @Method("POST")
 * @Template()
 */
public function uploadAction(Request $request)
{
    $portada = new Portada();
    $form = $this->buildUploadForm($portada);
    $form->bind($request);

    if ($form->isValid()) {
        $portada->upload();
    } else {
        throw new \Exception("Hay un error en el formulario");

    }

    //...
} 
```

我的实体

```
<?php

namespace MyName\MyBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\HttpFoundation\File\UploadedFile;
use Symfony\Component\Validator\Constraints as Assert;

class Portada
{
    /**
     * @Assert\File(maxSize="6000000")
     */
    private $file;

    public $path;

    /**
     * Sets file.
     *
     * @param UploadedFile $file
     */
    public function setFile(UploadedFile $file = null)
    {
        $this->file = $file;
    }

    public function upload()
    {
        $this->path = $this->getFile()->getClientOriginalName();

        $this->getFile()->move(
            $this->getUploadRootDir(),
            $this->path
        );

        $this->file = null;
    }

    /**
     * Get file.
     *
     * @return UploadedFile
     */
    public function getFile()
    {
        return $this->file;
    }

    public function getAbsolutePath()
    {
        return null === $this->path
            ? null
            : $this->getUploadRootDir() . DIRECTORY_SEPARATOR . $this->path;
    }

    public function getWebPath()
    {
        return null === $this->path
            ? null
            : $this->getUploadDir() . DIRECTORY_SEPARATOR . $this->path;
    }

    protected function getUploadRootDir()
    {
        return __DIR__ . '/../../../../web/'. $this->getUploadDir();
    }

    protected function getUploadDir()
    {
        return 'uploads/portada';
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T15:35:35.930

完美添加工作后，我忘记在表单中添加 enctype

```
<form action="{{ path('documento_upload') }}" method="post" {{ form_enctype(upload_form) }}>
    {{ form_widget(upload_form) }}
    <button type="submit" class="btn btn-primary">Upload</button>
</form> 
```

# php - 验证删除帖子功能？

> ID：16150876
> 
> 赞同：0
> 
> 时间：2013-04-22T15:28:38.630
> 
> 标签：php, mysql, function, pdo

我有一个简单的函数可以从 mysql 数据库中删除一行。

```
function delete_post($post_id){
        global $dbh;

        $stmt = $dbh->prepare("DELETE FROM mjbox_posts WHERE post_id = ?");
        $stmt->bindValue(1, $post_id, PDO::PARAM_INT);
        $stmt->execute();

    } 
```

我想知道在删除尝试验证是否成功后，现有函数中是否有一种简单的方法？（通过成功我的意思是如果该行被删除）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:33:52.887

```
function delete_post($post_id){
    global $dbh;

    $stmt = $dbh->prepare("DELETE FROM mjbox_posts WHERE post_id = ?");
    $stmt->bindValue(1, $post_id, PDO::PARAM_INT);
    $stmt->execute();
    return $stmt->rowCount();
} 
```

但是，我不会因为没有这样的记录而将未删除任何内容的查询称为不成功的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:32:24.037

您可以在删除之前选择行的id，并检查删除后该id是否存在。

# memory - 内存被覆盖 mips

> ID：16150878
> 
> 赞同：0
> 
> 时间：2013-04-22T15:28:45.200
> 
> 标签：memory, mips

我遇到了一些 MIPS 代码的问题，其中数组的前 2 个元素被覆盖。我接受来自用户的 4 个不同的输入，每个输入一个字节，然后将它们存储在大小为 4 的“.space”中。当我全部打印它们时，前 2 个元素是空白的。我认为这与回车有关，但我不完全确定。这是我正在使用的：

```
 .data
msg:        .asciiz "Enter the band colors\n"
band12:     .asciiz "Value bands (first 2 band colors)\n"
bandM:      .asciiz "Multiplier band\n"
bandT:      .asciiz "Tolerance band\n"
buffer:     .byte '0'
userInput:  .space 4
normalized: .word 0
tolerance:  .ascii ""

    .text
main:   li $v0, 4 
    la $a0, msg
    syscall

    la $a0, band12
    syscall

    la $t0, userInput #store the input array in a register

    li $v0, 8 #read the first input into buffer
    la $a0, buffer
    la $a1, 8
    syscall

    #store the input into the first element of the input array
    lb $t1, buffer 
    sb $t1, ($t0)

    #read the second input into buffer
    la $a0, buffer
    la $a1, 8
    syscall

    lb $t2, buffer #store the input into the second element of the input array
    sb $t2, 1($t0)

    #3rd band message
    li $v0, 4
    la $a0, bandM
    syscall

    #read in 3rd band
    li $v0, 8
    la $a0, buffer
    la $a1, 8
    syscall

    #move to 3rd array index
    lb $t3, buffer
    sb $t3, 2($t0)

    #last prompt
    li $v0, 4
    la $a0, bandT
    syscall

    #read tolerance band
    li $v0, 8
    la $a0, buffer
    la $a1, 8
    syscall

    #move to 4th array index
    lb $t4, buffer
    sb $t4, 3($t0)

    li $v0, 11
    lb $a0, ($t0)
    syscall
    lb $a0, 1($t0)
    syscall
    lb $a0, 2($t0)
    syscall
    lb $a0, 3($t0)
    syscall

    jr $ra

    li $v0, 10
    syscall 
```

这是 QtSpim 的输出。 ![在此处输入图像描述](https://i.stack.imgur.com/mwu9F.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:28:21.650

假设您正在使用 spim：

for的`$a1`参数`syscall 8`是要读取的字符数。您的代码设置`$a1`为 8，最多允许读取 9 个字节，但您的缓冲区只有一个字节。缓冲区可能还需要与 32 位边界对齐，使用`.align 2`.

# python - Tkinter：实现“带标题的列表框”的最佳方式

> ID：16150884
> 
> 赞同：0
> 
> 时间：2013-04-22T15:28:55.490
> 
> 标签：python, tkinter, tix

在 Python 中，我有一个字典列表，基本上如下所示：

```
the_list = [{'name': "A", 'entries': [1, 2, 3]}, {'name': "B", 'entries': [4, 5, 6]}, ...] 
```

使用 Tkinter，我想让用户从列表框中选择一个条目（这里是一个数字）或类似的东西。名称（此处为“A”或“B”）应显示但不可选择。整个东西应该有滚动条，以防条目占用的空间超过窗口提供的空间。出于兼容性原因，最好只使用 Tkinter，但如果这使事情变得过于复杂，Tix 也可能是可以接受的。

我的第一次尝试是只使用一个列表框和一个滚动条。但是，这会产生一个问题，即名称也是列表框条目，因此是可选择的。

我的下一个想法是使用 Tix ScrolledWindow，在其中我为名称生成标签，为条目生成列表框。

但是，在我尝试意识到我想问是否有更好的解决方案之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:20:25.743

您可以使用 ttk TreeView 小部件，它可以让您拥有标题和多列。

有关更多信息，请参阅[http://www.tkdocs.com/tutorial/tree.html](http://www.tkdocs.com/tutorial/tree.html)

# angularjs - 如何在angular-ui中动态禁用ui-sortable指令

> ID：16150887
> 
> 赞同：16
> 
> 时间：2013-04-22T15:29:05.877
> 
> 标签：angularjs, angularjs-directive, angular-ui, angularjs-scope

我正在使用 angular-ui 进行排序，使用 ui-sortable 指令。是否可以根据范围状态动态启用/禁用可排序功能？所以我需要一个按钮来改变范围属性的状态，并根据这个属性排序是否应该工作。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-17T21:15:19.507

angular 指令支持观察可排序选项何时发生变化：

```
scope.$watch(attrs.uiSortable, function(newVal, oldVal){ 
```

因此，您所要做的就是查看 jqueryui 可排序文档，并更新插件上的正确属性。

html

```
<ul ui-sortable="sortableOptions" ng-model="items">
   <li ng-repeat="item in items">{{ item }}</li>
 </ul>
<button ng-click="sortableOptions.disabled = !sortableOptions.disabled">Is Disabled: {{sortableOptions.disabled}}</button> 
```

JS

```
app.controller('MainCtrl', function($scope) {
  $scope.items = ["One", "Two", "Three"];

  $scope.sortableOptions = {
    disabled: true
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T08:50:17.413

您可以使用在版本和不可排序版本`ui-if`之间切换`ui-sortable`，但这是一个可怕的设计。但是，如果您查看了[jQuery Sortable Docs](http://api.jqueryui.com/sortable/#method-disable)，似乎有一个`disabled`. 如果指令当前监视选项对象的更改，您可以简单地切换此选项。如果选项对象是通过引用而不是值来监视的，那么也许您应该使用调整打开一个拉取请求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T04:56:25.263

HTML

```
<div class="group-container" ui-sortable="vm.groupSortable" ng-model="group.groups"> 
```

JS

```
vm.groupSortable = {
    connectWith: ".group-container",
    disabled: true
};

vm.disableDragAndDrop = function(bVar)
{
    vm.groupSortable.disabled = bVar;
}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T02:04:00.587

我对此的第一次尝试将包括一个带有链接函数的新[指令，该指令根据范围内的某些值](http://docs.angularjs.org/guide/directive)[编译](http://docs.angularjs.org/api/ng.%24compile)模板片段，包括或不包括 ui-sortable。

有空的时候写代码。

# c++ - CMake：clang 版本的分支

> ID：16150888
> 
> 赞同：5
> 
> 时间：2013-04-22T15:29:06.320
> 
> 标签：c++, cmake

如何为 clang++ 实现相当于下面的 cmake 分支？

```
if (GXX_VERSION VERSION_GREATER 4.5 OR GXX_VERSION VERSION_EQUAL 4.5)
    ... 
```

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T08:19:08.787

由于某种原因 piokuc 的解决方案对我不起作用，所以我做了以下事情：

```
EXECUTE_PROCESS( COMMAND ${CMAKE_CXX_COMPILER} --version OUTPUT_VARIABLE clang_full_version_string )
string (REGEX REPLACE ".*clang version ([0-9]+\\.[0-9]+).*" "\\1" CLANG_VERSION_STRING ${clang_full_version_string})
if (CLANG_VERSION_STRING VERSION_GREATER 3.1)
     .... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:11:29.533

CMake 为 clang 定义了以下内容：

*   CLANG_VERSION_MAJOR,
*   CLANG_VERSION_MINOR，
*   CLANG_VERSION_PATCHLEVEL,
*   以及以上的组合：CLANG_VERSION_STRING

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-22T06:13:46.583

这对我有用：

```
if (CMAKE_CXX_COMPILER_VERSION VERSION_GREATER 3.2)
    ...
    ...
endif () 
```

同样，我们有`VERSION_LESS`和`VERSION_EQUAL`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-04T19:07:39.520

在 cmake v3.1.3 下，我必须检查 CMAKE_CXX_COMPILER_VERSION 因为没有 CLANG_VERSION_STRING 所以看起来现在为每个编译器类型定义了一个版本，提供了更多控制。

# ruby-on-rails - Ember 刷新应用程序.handlebars

> ID：16150895
> 
> 赞同：0
> 
> 时间：2013-04-22T15:29:22.593
> 
> 标签：ruby-on-rails, ember.js

我已经使用 rails 和 emberjs 编写了一个应用程序。该应用程序可以工作，但是当我更改 application.handlebars 中的内容时，刷新后它不会反映在网站上。所有其他车把模板都会立即更新。

我试过清除缓存，但内容没有改变。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:01:10.980

很难说没有看到一些代码。application.handlebars 没有什么特别之处，所以它应该像其他模板一样令人耳目一新。

*   您确定正在使用您的 application.handlebars 模板吗？可能它根本没有被拾取，而 ember 只是使用默认值。
*   您正在采取哪些步骤来“刷新”网站？您是否将此模板的正确版本传递到浏览器？

# http - 从 Salesforce 到 Taleo 的基本 HTTP 身份验证

> ID：16150900
> 
> 赞同：0
> 
> 时间：2013-04-22T15:29:30.097
> 
> 标签：http, authentication, soap, apex-code, taleo

我是一个新手，正在编写一个 SOAP Web 服务（用于集成目的），为了执行 SOAP 调用，我需要首先对用户进行身份验证（标准集成用户）。

以下是它的代码片段。但是，当我执行调用时，它会为基本 Http 请求抛出错误代码 500，而为第二个 Http 请求抛出错误代码 401。

这是正确的方法吗？

```
HTTP auth = new HTTP();
HTTPRequest r = new HTTPRequest();
r.setEndpoint('https://domainname.net/enterprise/soap?ServiceName=IntegrationManagementService');
Blob headerValue = Blob.valueOf(username+':'+password);
String authorizationHeader = 'Basic ' + EncodingUtil.base64Encode(headerValue);
r.setHeader('Authorization', authorizationHeader);
r.setMethod('POST');

try
{
 HTTPResponse authresp = auth.send(r);
 if(authresp.getStatusCode() == 200)
       { 
           system.debug('Authentication success!!!' + authresp);
       }
       else
       {system.debug('Authentication failed!!!' + authresp + authresp.getStatusCode());}    
         }catch(exception e){}

   //construct http request
    string endpointURL = 'https://doaminname.net/enterprise/soap?ServiceName=IntegrationManagementService';
   HttpRequest req = new HttpRequest();
   req.setMethod('POST');

   req.setEndpoint(endpointURL);
   req.setHeader('Content-Type','application/xml');
   req.setBody(TaleoXML);

   //send http request
   Http http = new Http();
   try
   {
       HttpResponse res = http.send(req);

       //check the response
       if(res.getStatusCode() == 200)
       { 
           system.debug('Callout success!!!' + res);
       }
       else
       {system.debug('Callout failed!!!' + res + res.getStatusCode());}    
   }catch(exception e){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T18:39:33.307

我不熟悉您在这里使用的库，但我可以建议一些调查的可能性：

*   基本身份验证是一种无状态方法。您没有登录并保持登录状态。这意味着没有单独的初始身份验证请求（正如您的代码所暗示的那样）；您在`Authorization`每个请求中都包含标头。这就是为什么您在第二个请求中获得[401的原因。](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)

*   在第一个请求中，您提供了凭据并且服务器遇到了意外的内部错误（这就是[500](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error)的含义）。如果它包含带有错误响应的正文，则它可能包含更多信息。我猜这与您没有为您的 POST 提供正文并且服务器没有预料到这一事实有关。

如果这是您第一次使用 SOAP，则最好使用专用的 SOAP 库，而不是尝试自己构造请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-06T13:06:36.613

在第二个请求中，您不包含身份验证，这就是您收到 401（未经授权）错误的原因。

在第一个请求中，您的身份验证似乎正常，但服务器无法处理该请求。我认为您错过了参考您要使用的 IntegrationManagementService 网络服务的功能/操作。或者您正在使用需要启用 MTOM 的功能/操作。

# java - 为什么 instanceof 在这种情况下返回成功

> ID：16150902
> 
> 赞同：1
> 
> 时间：2013-04-22T15:29:30.493
> 
> 标签：java, oop, polymorphism, instanceof

我试图理解为什么我会得到这些结果（这不是我预期的原因）”

```
public interface ICommandAble
{ }

public interface ILogAble extends ICommandAble
{ }

public interface IMonitorAble extends ICommandAble
{ }

public abstract class ClassAbs
{ }

public class A extends ClassAbs implements IMonitorAble, ILogAble
{ } 
```

**测试方法：**

```
public void test()
{
   A a=new A();
   List<ICommandAble>commandList=new ArrayList<ICommandAble>()
   if (a instanceof ILogAble)
   {
       ILogAble logAbleItem=(ILogAble)a;
       commandList.add(logAbleItem);
   }
   if (a instanceof IMonitorAble) {
       IMonitorAble monitorAbleItem=(IMonitorAble)a;
       commandList.add(monitorAbleItem);
   }
   for(ICommandAble item: commandList)
   {
        if(item instanceof IMonitorAble)
        {
          log.debug("is monitorable");
        }
        if(item instanceof ILogAble)
        {
          log.debug("is logable");
        }
} 
```

输出是：

> 2013-04-22 18:25:00,498 com ... [DEBUG] 是可监控的
> 
> 2013-04-22 18:25:02,150 com.... [DEBUG] 是可登录的
> 
> 2013-04-22 18:25:08,322 com.... [DEBUG] 是可监控的
> 
> 2013-04-22 18:25:08,977 com.... [DEBUG] 是可登录的
> 
> 我希望看到：。
> 
> 2013-04-22 18:25:00,498 com ... [DEBUG] 是可监控的
> 
> 2013-04-22 18:25:02,150 com.... [DEBUG] 是可登录的

我在这里想念什么？

我现在明白我在这里想念什么了。但是我应该如何重新设计它以使其在第二个实例中仅输入一次？我的意图是看到这个：

```
2013-04-22 18:25:00,498 com... [DEBUG] is monitorable

2013-04-22 18:25:02,150 com.... [DEBUG] is logable 
```

有什么重新设计的建议吗？

否则，我将对所有内容进行双重执行，而我的意图是每个内容只执行一次。

谢谢，雷。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T15:33:40.070

您添加了两个 class 对象`A`。`A`既可监控又可记录，因此输出正确。

*我在这里想念什么？*:- 投射一个对象不会改变它的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:38:10.527

你拥有的是 A 类的一个对象。这是一个 IMonitorAble 和 ILogAble 的实例。通过将其转换为其中一个接口，它仍然是 A 的对象。因此，您的 List 中有两次相同的对象，并且 for 循环中的两个 if 语句对于该对象都是正确的。

# java - 在没有 xml 的情况下测试 spring 上下文

> ID：16150908
> 
> 赞同：3
> 
> 时间：2013-04-22T15:29:49.270
> 
> 标签：java, spring, unit-testing, testing, web-applications

我在 Web 应用程序中使用基于 java 的配置：

```
public class SpringInitializer implements WebApplicationInitializer {

  @Override
  public void onStartup(ServletContext servletContext) {
    AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();
    ctx.getEnvironment().getPropertySources().addLast( myMethod() );
    ctx.scan("com.xxx.xxx");

  }
} 
```

我该如何测试它？

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(????????????)
public class PersistenceConfigurationTest {

    @PersistenceContext EntityManager entityManager;
    @Autowired DataSource dataSource;

    @Test
    public void infrastructureShouldBeAutowired() {
        assertNotNull(dataSource);
        assertNotNull(entityManager);
    }
} 
```

**附加说明：** 有一些答案建议如何基于相同的配置类创建另一个上下文。我不能这样做，因为我微调了创建的上下文（添加了一些属性）。我刚刚添加了代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T15:38:39.650

我认为这将回答您的问题： [https ://jira.springsource.org/browse/SPR-10199?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://jira.springsource.org/browse/SPR-10199?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

一言以蔽之：你想做的事情还不可能。同样在这里。我使用 WebApplicationInitializer 来使用 CustomBeanFactory 并实现 logger ctor 注入。但现在我无法将记录器注入我的测试对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:00:25.997

```
@Configuration
@ComponentScan("com.xxx.xxx")
public class Config {}

public class SpringInitializer implements WebApplicationInitializer {

    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();
        ctx.register(Config.class);

        // Register and map the dispatcher servlet
        ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(ctx));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");
    }

}

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(classes = {Config.class})
public class PersistenceConfigurationTest {

    @PersistenceContext EntityManager entityManager;
    @Autowired DataSource dataSource;

    @Test
    public void infrastructureShouldBeAutowired() {
        assertNotNull(dataSource);
        assertNotNull(entityManager);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:00:04.133

这篇博文应该几乎准确地回答了您的问题（我只是希望您使用的是 Spring 3.1）。

[http://blog.springsource.org/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/](http://blog.springsource.org/2011/06/21/spring-3-1-m2-testing-with-configuration-classes-and-profiles/)

滚动到**使用 @Configuration Classes 进行集成测试**部分

希望能解决您的问题。

# pcap - 如果在程序中创建了很多 pcap 处理程序，libpcap 是消耗资源还是高效？

> ID：16150909
> 
> 赞同：1
> 
> 时间：2013-04-22T15:29:49.887
> 
> 标签：pcap, libpcap, tcpdump

我有一个程序可以创建很多 pcap 处理程序，每个处理程序都使用不同的捕获过滤器

恐怕它们非常消耗资源，因此程序/机器可能不支持它们在这方面有什么见解吗？谢谢！

# asp.net - ASP.Net 自定义服务器控件和子控件失去其状态

> ID：16150911
> 
> 赞同：0
> 
> 时间：2013-04-22T15:29:52.510
> 
> 标签：asp.net, servercontrols

我已经构建了一个自定义服务器控件。基本上，这个自定义控件提供了一个文本框和一个帮助用户填充文本框的浏览器按钮。在幕后，我有一个复杂的数据结构来描述上下文和用户选择（下面的简化版本）：

```
 [Serializable]
    public class PickerValue
    {
        public PickerType Type { get; set; }
        public string TargetUrl { get; set; }
        public static PickerValue Default()
        {
            return new PickerValue
            {
                TargetUrl = "/",
                Type = PickerType.Value1
            };
        }
    } 
```

然后，在我的控件中，我声明了一个这种类型的属性，保持在视图状态：

```
 public PickerValue Value
    {
        get
        {
            var obj = ViewState["Value"];
            return (PickerValue)(obj != null ? obj : ViewState["Value"] = PickerValue.Default());
        }
        set
        {
            ViewState["Value"] = value;
        }
    } 
```

因为我的自定义控件持有这样的值并且应该引发回发事件，所以我`IPostBackDataHandler`在我的控件中实现了转换和读取该值的 JSON 表示（使用 newtonsoft.json）（这将由 javascript 代码使用）：

```
 public event EventHandler ValueChanged;

    protected virtual void OnValueChanged(EventArgs e)
    {
        if (ValueChanged != null) ValueChanged(this, e);
    }
    public bool LoadPostData(string postDataKey, System.Collections.Specialized.NameValueCollection postCollection)
    {
        var presentValue = JsonConvert.SerializeObject(Value);
        var postedValue = postCollection[postDataKey];

        if (!string.IsNullOrEmpty(presentValue) && !presentValue.Equals(postedValue))
        {
            Value = JsonConvert.DeserializeObject<PickerValue>(postedValue);
            return true;
        }
        else
        {
            return false;
        }
    }

    public void RaisePostDataChangedEvent()
    {
        OnValueChanged(EventArgs.Empty);
    } 
```

而且我还自定义控件的呈现以生成`<input type='hidden'>`与我的控件值相关的正确值：

```
 protected override void RenderContents(HtmlTextWriter writer)
    {
        writer.AddAttribute(HtmlTextWriterAttribute.Type, "hidden");
        writer.AddAttribute(HtmlTextWriterAttribute.Id, this.ClientID + "_data");
        writer.AddAttribute(HtmlTextWriterAttribute.Name, this.UniqueID);
        writer.AddAttribute(HtmlTextWriterAttribute.Value, JsonConvert.SerializeObject(Value));
        writer.RenderBeginTag(HtmlTextWriterTag.Input);
        writer.RenderEndTag();
        RenderChildren(writer);
    } 
```

最后，我使用（我猜）正确的使用方式生成文本框和浏览按钮`CreateChildControls`：

```
 protected TextBox txtTargetUrl;
    protected Button btnBrowse;
    protected override void CreateChildControls()
    {
        this.txtTargetUrl = new TextBox();
        this.Controls.Add(this.txtTargetUrl);

        this.btnBrowse = new Button
        {
            Text = BrowseButtonText
        };
        this.Controls.Add(this.btnBrowse);
    } 
```

这几乎可以工作了。我的内部输入值由代码正确填充，回发正确地重建了内部值，但我的文本框失去了它的价值。每次回发后，文本框都是空的。

为了维护子控件的状态，我需要更正代码中的哪些内容？

# html - 为什么我的聊天帖子不适用于我的 Tumblr 主题？

> ID：16150914
> 
> 赞同：0
> 
> 时间：2013-04-22T15:30:01.583
> 
> 标签：html, tumblr

这是我的 Tumblr 主题。

[http://lt-2014.tumblr.com/](http://lt-2014.tumblr.com/)

我发了一个聊天帖子，但没有显示任何内容，这是我拥有的代码。

```
{block:Chat} 
<div class="chat">
{block:Title}<h1 class="title">{Title}</h1>{/block:Title}
<ul>
{block:Lines}<li class="{Alt}"><p>{block:Label}<strong>{Label}</strong>{/block:Label} {Line} </p></li>{/block:Lines}
</ul>
</div>
{/block:Chat} 
```

尽管我输入了这段代码，为什么我的聊天帖子没有显示？有什么我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:54:51.237

在您的主题文件的第 75 行，您有一个关闭`{/block:Posts}`，这意味着在此之后编写的所有帖子标签都不起作用。移至*最后*一个帖子类型`{/block:Posts}`之后。

# c# - 清除控制台应用程序中的特定行

> ID：16150915
> 
> 赞同：3
> 
> 时间：2013-04-22T15:30:03.187
> 
> 标签：c#, methods, console, console-application

我需要清除控制台中的某一行，但需要保留其余部分。我知道`Console.Clear()`，但清除了整个控制台。如何只清除一条线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:30:03.187

我决定回答我自己的问题，因为我用谷歌搜索过这个问题，似乎没有人有方法。

由于没有 clearLine() / ClearLine() 方法，我做了一个。

这里是：

```
private static void clearLine()
{
        Console.Write(new string(' ', Console.BufferWidth - Console.CursorLeft));
} 
```

其他可能性：

```
private static void clearLine(int left, int top)
{    

int pLeft = Console.CursorLeft;
int pTop  = Console.CursorTop;

Console.setCursorPosition(left, top);
Console.Write(new string(' ', Console.BufferWidth - Console.CursorLeft));

Console.setCursorPosition(pLeft, pTop);
} 
```

# ruby-on-rails - jQuery Masonry 和 AJAX 格式

> ID：16150929
> 
> 赞同：0
> 
> 时间：2013-04-22T15:30:43.767
> 
> 标签：ruby-on-rails, jquery, jquery-masonry

当我使用 AJAX 过滤页面上的 jQuery Masonry 框时，格式不会调整。我尝试按照对这个问题的回答：[jQuery Masonry and Ajax-fetching to Append Items Causing Image Overlap](https://stackoverflow.com/questions/12093378/jquery-masonry-and-ajax-fetching-to-append-items-causing-image-overlap?rq=1)但它仍然不起作用。有人有建议吗？我的代码如下

```
$ -> 
$('#all-content').on 'click', (e) ->
    console.log 'click', this, arguments
    element = $(e.currentTarget)
    e.preventDefault()
    $.ajax {
        url: element.attr('href')
        complete: (xhr, status) ->
            console.log 'complete', this, arguments
            $('#content').append(e).masonry('reload').html xhr.responseText
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T06:39:47.420

您应该在将项目附加到容器后调用[masonry.appended](http://masonry.desandro.com/methods.html#appended)

```
$('#content').append(elements);
$('#content').masonry( 'appended', elements ); 
```

**注意**：元素是元素数组（不是 JQuery 对象）

# c# - DotNetBar 中的 SuperGridControl 有什么奇怪的吗？

> ID：16150930
> 
> 赞同：0
> 
> 时间：2013-04-22T15:31:02.397
> 
> 标签：c#, winforms, gridview, datagrid, dotnetbar

我在 DevExpress 中使用了 GridControl，起初我对如何使用它感到有些困惑，但现在 DotNetBar 中的 SuperGridControl 是另一个更难使用的。这有一个类似于 DataGridView 的 GridPanel（从 PrimaryGrid 属性返回）。它有一个 DataSource 属性，我尝试为它分配一些数据源，行和列填充正常，但是接下来我尝试访问它的列或行之一，它抛出了 IndexOutOfRangeException 异常。Columns 和 Rows 属性的 Count 等于 0，什么？填充到 PrimaryGrid 后的示例数据源有 2 列和 3 行，但 PrimaryGrid.Columns 和 PrimaryGrid.Rows 是空的？？？

太奇怪了，我认为 Columns 和 Rows 只包含我们使用代码或设计器添加的内容，而不是用于 DataSource 绑定？

对这个问题有任何想法吗？比 DevExpress 中的 GridControl 更奇怪。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T21:28:51.717

你试试 **superGridControl1.Refresh();** 在尝试访问单元之前

# android - java.lang.RuntimeException：无法实例化活动：Java.lang.nullpointerException

> ID：16150934
> 
> 赞同：-2
> 
> 时间：2013-04-22T15:31:13.467
> 
> 标签：android

我不知道为什么我会一次又一次地收到这个错误。任何帮助将不胜感激。我已经检查了 manifest.xml ..没有问题是 ..请检查并在可能的情况下提供解决方案

```
 package com.example.helloworld;
    import android.app.ListActivity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;
    import android.widget.TextView;

      public class List extends ListActivity {

      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      String[] numbers = {"one","two","three","four"};

      this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item,R.id.new_list,numbers));

      ListView lv = getListView();

      lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {

      TextView textitem =(TextView)findViewById(R.id.new_list);

      String num = ((TextView) textitem).getText().toString();

      Intent i = new Intent("com.example.helloworld.CHECKBOX");

      i.putExtra("number", num);
      startActivity(i);

  }
});
}
} 
```

这是manifest.xml ..

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.helloworld"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.helloworld.Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.helloworld.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.helloworld.MAINACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.helloworld.List"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.helloworld.LIST" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.helloworld.Menu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.helloworld.MENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.helloworld.CheckPermissions"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.helloworld.CHECKPERMISSIONS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.helloworld.TextPlay"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.helloworld.TEXTPLAY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.helloworld.CheckboxCursorAdapter"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.helloworld.CHECKBOXCURSORADAPTER" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.helloworld.CheckBox"
            android:label="@string/title_activity_check_box" >
            <intent-filter>
                <action android:name="com.example.helloworld.CHECKBOX" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

最后是 checkbox.java

```
 package com.example.helloworld;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.app.ListActivity;
import android.util.SparseBooleanArray;
import android.widget.ArrayAdapter;

public class CheckBox extends ListActivity {

    String classes[] = { "MainActivity","CheckPermissions","TextPlay","example3","example4","example5","example6"};
    //ListView lView ;
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, classes));

}
    List<Integer> checkedIDs = new ArrayList<Integer>();                            
    // Get all of the items that have been clicked - either on or off
    final SparseBooleanArray checkedItems = getListView().getCheckedItemPositions();
    {
    for (int i = 0; i < checkedItems.size(); i++){
        // And this tells us the item status at the above position
        final boolean isChecked = checkedItems.valueAt(i);
        if (isChecked){
            // This tells us the item position we are looking at
            final int position = checkedItems.keyAt(i);                                             
            // Put the value of the id in our list
            checkedIDs.add(position);                                                       
        }
    }
    }

} 
```

这是原木猫

```
04-22 15:14:00.236: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:00.616: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:00.656: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.336: D/dalvikvm(1615): GC_FOR_ALLOC freed 71K, 7% free 2515K/2704K, paused 54ms, total 58ms
04-22 15:14:01.596: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.596: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.618: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.636: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.748: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.756: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.768: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.857: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.857: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.866: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.866: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.866: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.866: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:01.896: D/gralloc_goldfish(1615): Emulator without GPU emulation detected.
04-22 15:14:02.356: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:02.426: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:04.646: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:04.796: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:04.796: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:05.136: D/dalvikvm(1615): GC_CONCURRENT freed 15K, 5% free 2903K/3056K, paused 6ms+135ms, total 322ms
04-22 15:14:05.556: D/dalvikvm(1615): GC_FOR_ALLOC freed 8K, 5% free 2975K/3112K, paused 91ms, total 98ms
04-22 15:14:05.609: I/dalvikvm-heap(1615): Grow heap (frag case) to 3.624MB for 635812-byte allocation
04-22 15:14:05.766: D/dalvikvm(1615): GC_FOR_ALLOC freed <1K, 4% free 3596K/3736K, paused 156ms, total 156ms
04-22 15:14:06.046: D/dalvikvm(1615): GC_CONCURRENT freed 1K, 4% free 3610K/3736K, paused 11ms+110ms, total 282ms
04-22 15:14:06.206: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.236: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.336: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.366: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.476: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.618: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.626: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.646: I/Choreographer(1615): Skipped 81 frames!  The application may be doing too much work on its main thread.
04-22 15:14:06.656: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.666: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.876: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:06.956: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.006: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.077: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.147: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.147: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.206: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.206: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.526: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.598: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.598: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.666: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.676: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.676: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:07.977: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.306: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.306: I/Choreographer(1615): Skipped 75 frames!  The application may be doing too much work on its main thread.
04-22 15:14:08.306: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.306: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.396: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.407: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.436: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.436: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.496: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:08.496: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:09.929: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:09.937: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.021: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.086: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.086: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.097: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.207: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.207: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.286: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.296: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.588: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.588: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.616: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.686: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.686: W/Trace(1615): Unexpected value from nativeGetEnabledTags: 0
04-22 15:14:10.696: D/AndroidRuntime(1615): Shutting down VM
04-22 15:14:10.696: W/dalvikvm(1615): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
04-22 15:14:10.846: E/AndroidRuntime(1615): FATAL EXCEPTION: main
04-22 15:14:10.846: E/AndroidRuntime(1615): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.helloworld/com.example.helloworld.CheckBox}: java.lang.NullPointerException
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.os.Looper.loop(Looper.java:137)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ActivityThread.main(ActivityThread.java:5039)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at java.lang.reflect.Method.invoke(Method.java:511)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at dalvik.system.NativeStart.main(Native Method)
04-22 15:14:10.846: E/AndroidRuntime(1615): Caused by: java.lang.NullPointerException
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.Activity.setContentView(Activity.java:1881)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ListActivity.ensureList(ListActivity.java:312)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ListActivity.getListView(ListActivity.java:297)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at com.example.helloworld.CheckBox.<init>(CheckBox.java:26)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at java.lang.Class.newInstanceImpl(Native Method)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at java.lang.Class.newInstance(Class.java:1319)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
04-22 15:14:10.846: E/AndroidRuntime(1615):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
04-22 15:14:10.846: E/AndroidRuntime(1615):     ... 11 more
04-22 15:14:14.096: I/Process(1615): Sending signal. PID: 1615 SIG: 9 
```

更新代码：list.java

```
 lv.setOnItemClickListener(new OnItemClickListener() {
       public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {

      // selected item 
      //String num = ((TextView) view).getText().toString();

      // Launching new Activity on selecting single List Item
      Intent i = new Intent("com.example.helloworld.CHECKBOX");
      // sending data to new activity
      //i.putExtra("number", num);
      startActivity(i);

  } 
```

复选框.java

```
 this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, classes));
    List<Integer> checkedIDs = new ArrayList<Integer>();                            
    // Get all of the items that have been clicked - either on or off
    final SparseBooleanArray checkedItems = getListView().getCheckedItemPositions();
    {
    for (int i = 0; i < checkedItems.size(); i++){
        // And this tells us the item status at the above position
        final boolean isChecked = checkedItems.valueAt(i);
        if (isChecked){
            // This tells us the item position we are looking at
            final int position = checkedItems.keyAt(i);                                             
            // Put the value of the id in our list
            checkedIDs.add(position);                                                       
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:53:08.700

移动

```
final SparseBooleanArray checkedItems = getListView().getCheckedItemPositions();
{
    for (int i = 0; i < checkedItems.size(); i++){
        // And this tells us the item status at the above position
        final boolean isChecked = checkedItems.valueAt(i);
        if (isChecked){
            // This tells us the item position we are looking at
            final int position = checkedItems.keyAt(i);                                             
            // Put the value of the id in our list
            checkedIDs.add(position);                                                       
        }
    }
} 
```

之后立即进入您的 onCreate() 方法

```
 this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, classes)); 
```

# php - 上传时重命名文件为随机名称

> ID：16150940
> 
> 赞同：0
> 
> 时间：2013-04-22T15:31:34.080
> 
> 标签：php

我想知道将文件重命名为随机（字母和数字）的更快和更强大的方法

另一个问题是：我正在尝试放置许多不允许的文件类型，但实际上我的代码仅适用于一种类型！所以，如果你能告诉我如何放置多种类型:)

这是我的代码：

```
 if ( $_REQUEST['do'] == "doUpload" )
{
  $TEMP = $_FILES['userfile']['name'];
  $FileName = stripslashes($TEMP);  
  $FileType = strrchr($FileName ,'.'); 

  $box = $uploadDIR.'/'.$TEMP;

$notype= ".php";

if ($FileType == $notype){

echo "NOT ALLOWED TO ATTACH THIS KIND OF TYPES";

exit;
}
  if (file_exists($box))
  {
    echo "<center><b><font color=red>THE FILE ALREADY EXIST</font><br><br><a href='http://$httpname/$box' target='_blank'>THE LINK</a></b><center>";
  }
  else
  {
    move_uploaded_file($_FILES['userfile']['tmp_name'],$box);

  echo " SUCCESS "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:34:04.733

要回答您不允许的文件类型，我会做类似的事情

```
$disallowedFileTypes = array('.php.', '.exe.', '.dmg');
if (in_array($FileType, $disallowedFiled)) {
    echo 'error';
    exit;
} else {
    // run upload
} 
```

哦，您检查扩展名的方式有缺陷，因为如果文件以 . 以例如的名义`my.file.php`

最好使用 phpinfo() 方法[http://php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)

```
<?php
$path_parts = pathinfo($FileName);
$FileType = $path_parts['extension'];
?> 
```

对于随机文件名，请查看 PHP 函数

*   [http://php.net/manual/en/function.tmpfile.php](http://php.net/manual/en/function.tmpfile.php)
*   [http://php.net/manual/en/function.tempnam.php](http://php.net/manual/en/function.tempnam.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:46:13.083

我在允许列表而不是排除列表上工作（您不想要的与您想要的更多）

```
$allowedExtensions = array("txt","rtf","doc","pdf","docx","xlsx","xls","ppt","pptx","zip","rar","DOC","DOCX","mdb","MDB");

// check like this
if(!in_array($extension, $allowedExtensions)) {
    $adderr = "Invalid File Type. Please upload an allowed file type.";
} 
```

对于文件命名，我总是将日期与时间戳+文件名结合使用，就好像您只使用上面建议的文件名的 md5() 一样，而在足够大的数据集上仍然可能会出现重复的情况很少见。通过实施时间协议，您永远不会得到重复。

`$newname = md5(date("Y-m-d H:i:s").$_FILES['pricelist']['tmp_name'].$filename);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:36:33.287

您可以使用 uniqid()：

```
$FileName = uniqid(); 
```

# mongodb - 嵌入还是不嵌入？

> ID：16150942
> 
> 赞同：-1
> 
> 时间：2013-04-22T15:31:44.517
> 
> 标签：mongodb, schema, normalization, denormalization

我试图弄清楚我应该使用哪种模式设计。

*（这些是示例文档，实际文档包含更多属性）*

**嵌入式：**

```
{
   _id: ObjectId(),
   title: "trolo",
   subs: [
      {
         owner: refUserId
      },
      ...
   ]
} 
```

我索引：`ensureIndex({ "subs.owner": 1 })`

**标准化：**

```
Collection A:
{
   _id: ObjectId(),
   title: "trolo"
}
Collection B:
{
   parent: refId,
   owner: refUserId
} 
```

我索引：`ensureIndex({ owner: 1 })`

我已经`benchRun()`对不同的模型进行了一些测试。但结果非常令人惊讶。

**嵌入式查询：**

```
ops = [
    {op: "find", ns: t.getFullName(), query: { "subs.owner": someUserId }}
] 
```

**规范化查询：**

```
ops = [
    {op: "find", ns: t.getFullName(), query: { owner: someUserId }}
] 
```

**bench 运行脚本：**

```
for (x = 1; x <= 128; x *= 2) {
    res = benchRun({
        parallel : x,
        seconds : 5,
        ops : ops
    });
    print( "threads: " + x + "\t queries/sec: " + res.query);
} 
```

输出：

嵌入式：

```
threads: 1       queries/sec: 11331
threads: 2       queries/sec: 16764.6
threads: 4       queries/sec: 21587
threads: 8       queries/sec: 25198.6
threads: 16      queries/sec: 24717.6
threads: 32      queries/sec: 24707.4
threads: 64      queries/sec: 25813.8
threads: 128     queries/sec: 30785.4 
```

标准化：

```
threads: 1       queries/sec: 8.4
threads: 2       queries/sec: 13.2
threads: 4       queries/sec: 16.4
threads: 8       queries/sec: 17.4
threads: 16      queries/sec: 18.2
threads: 32      queries/sec: 20.8
threads: 64      queries/sec: 27.4
threads: 128     queries/sec: 39.6 
```

为什么归一化模型这么慢？我本来希望它是最快的。

**更新**

这是`.explain()`关于我的查询的内容。

**嵌入式**

```
> db.embedded.find({"subs.owner":ObjectId("516ea63322f2a93c4fef8542")}).explain()

{
        "cursor" : "BasicCursor",
        "isMultiKey" : false,
        "n" : 5,
        "nscannedObjects" : 5,
        "nscanned" : 5,
        "nscannedObjectsAllPlans" : 5,
        "nscannedAllPlans" : 5,
        "scanAndOrder" : false,
        "indexOnly" : false,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "millis" : 0,
        "indexBounds" : {

        },
        "server" : "localhost:27017"
} 
```

**归一化**

```
> db.collectionB.find({owner: ObjectId("516ea63322f2a93c4fef8542")}).explain()
{
        "cursor" : "BtreeCursor owner_1",
        "isMultiKey" : false,
        "n" : 76625,
        "nscannedObjects" : 76625,
        "nscanned" : 76625,
        "nscannedObjectsAllPlans" : 76625,
        "nscannedAllPlans" : 76625,
        "scanAndOrder" : false,
        "indexOnly" : false,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "millis" : 91,
        "indexBounds" : {
                "owner" : [
                        [
                                ObjectId("516ea63322f2a93c4fef8542"),
                                ObjectId("516ea63322f2a93c4fef8542")
                        ]
                ]
        },
        "server" : "localhost:27017"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:47:36.183

为什么你会期望归一化更快？通过嵌入，文档存储在磁盘上的单个位置。通过一次磁盘查找，可以恢复整个文档。如果它被规范化，它将分布在磁盘上，这意味着 2 个磁盘寻求获取信息。根据磁盘的速度和针必须去的扇区，它不可避免地会比嵌入式文档模型慢。

# php - mysql：facebook喜欢唯一的id

> ID：16150954
> 
> 赞同：0
> 
> 时间：2013-04-22T15:32:24.147
> 
> 标签：php, mysql, sql, facebook, guid

我目前正在使用 UUID v1 作为唯一 ID

但是，我认为 uuid 太长了

我想生成像 fb 和 G+ 这样更短的数字唯一 ID

并且不必在插入之前检查 id 是否存在于数据库中

例子：

> [https://plus.google.com/104560124403688998123/posts](https://plus.google.com/104560124403688998123/posts)
> 
> 脸书/100001458264256

我正在考虑根据一些用户详细信息生成它？

有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:39:46.583

It would make more sense to simply have this be the (auto increment/numeric) identity column on the main user record. To have it of a similar length you'll need to start your auto increment value at 100000000 or something of the sort. You'll also need to make sure the column is wide enough to hold numbers of that size and up for more users than you think you'll have.

# xna - XNA 4.0 关于 3D 球体作为行星的问题

> ID：16150956
> 
> 赞同：0
> 
> 时间：2013-04-22T15:32:32.047
> 
> 标签：xna

编辑：我添加了大部分代码的 pastebin。由于我无法将其添加到此帖子中，因此可以在评论中找到这些链接。

我在玩 XNA 4.0 程序生成的行星。

问题1：

[http://i.stack.imgur.com/PofhL.png](http://i.stack.imgur.com/PofhL.png)

如您所见，行星边缘有可见的三角形。我尝试了很多东西，但我不知道如何摆脱这种影响。纹理本身很好，球体是进口模型。

附言。是的，我读过类似的问题，但没有一个能帮助我解决我的问题。

问题2：

[http://i.stack.imgur.com/KV28k.png](http://i.stack.imgur.com/KV28k.png)

这就是当我移开相机时发生的事情。我做了研究，修改了近平面、远平面和其他一些东西。没有任何帮助。注意：云彩效果不是我做的，不知何故它不会消失。

我现在不附加任何代码，因为如果有经验的人回答很容易，我不会感到惊讶。但是，如果需要，我可以在此处粘贴所需的代码。

提前致谢。

编辑：我不希望行星永远消失。我希望能够将相机移到很远的地方，即使它们只是点，也能看到那些行星。

好的，我会证明更多的解释。我是 XNA 和一般编程的初学者。这就是为什么我可能有点难以理解的原因：< 1\. 球体模型已导入。

1.  生成并存储纹理。我能够将它们视为方形纹理文件，它们看起来很好，所以它们不是问题。

2.  这是我不理解我在互联网上找到的某些部分代码的地方。我附上了我认为可能有错误的代码。注释掉的行也不是那么相关。

    private void UpdateCamera() { // 计算视图矩阵。

    ```
     Quaternion rotation = Quaternion.Identity;
        float heading = MathHelper.ToRadians(camera.rotation.Y);
        float pitch = MathHelper.ToRadians(camera.rotation.X);

        if (heading != 0.0f)
        {
            rotation = Quaternion.CreateFromAxisAngle(Vector3.UnitY, heading);
            Quaternion.Concatenate(ref rotation, ref camera.orientation, out camera.orientation);
        }

        if (pitch != 0.0f)
        {
            rotation = Quaternion.CreateFromAxisAngle(Vector3.UnitX, pitch);
            Quaternion.Concatenate(ref camera.orientation, ref rotation, out camera.orientation);
        }

        Matrix.CreateFromQuaternion(ref camera.orientation, out camera.viewMatrix);

        Vector3 xAxis = new Vector3(camera.viewMatrix.M11, camera.viewMatrix.M21, camera.viewMatrix.M31);
        Vector3 yAxis = new Vector3(camera.viewMatrix.M12, camera.viewMatrix.M22, camera.viewMatrix.M32);
        Vector3 zAxis = new Vector3(camera.viewMatrix.M13, camera.viewMatrix.M23, camera.viewMatrix.M33);

        camera.target -= xAxis * camera.translate.X;
        camera.target -= yAxis * camera.translate.Y;

        camera.position = camera.target + zAxis * camera.offset;

        camera.viewMatrix.M41 = -Vector3.Dot(xAxis, camera.position);
        camera.viewMatrix.M42 = -Vector3.Dot(yAxis, camera.position);
        camera.viewMatrix.M43 = -Vector3.Dot(zAxis, camera.position);

        Vector3.Negate(ref zAxis, out camera.viewDir);

        // Calculate the projection matrix.

        camera.projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4,
            (float)windowWidth / (float)windowHeight, 0.1f, 30000.0f);
    } 
    ```

第二段代码：

```
protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);
        spriteFont = Content.Load<SpriteFont>(@"Fonts\DemoFont");

        GenerateTextures(2);

        // Load the assets for the Earth.
        earth.model = Content.Load<Model>(@"Models\earth");
        earth.effect = Content.Load<Effect>(@"Effects\earth");
        //earth.dayTexture = Content.Load<Texture2D>(@"Textures\earth_day_color_spec");
        earth.dayTexture = colorTexture_;

        //earth.nightTexture = Content.Load<Texture2D>(@"Textures\earth_night_color");
        //earth.nightTexture = heightTexture_;

        earth.cloudTexture = Content.Load<Texture2D>(@"Textures\earth_clouds_alpha");

        //earth.normalMapTexture = Content.Load<Texture2D>(@"Textures\earth_nrm");
        earth.normalMapTexture = normalTexture_;

        // Setup material settings for the Earth.
        earth.ambient = new Vector4(0.3f, 0.3f, 0.3f, 1.0f);
        earth.diffuse = new Vector4(0.7f, 0.7f, 0.7f, 1.0f);
        earth.specular = new Vector4(0.7f, 0.7f, 0.7f, 1.0f);
        earth.shininess = 20.0f;
        earth.cloudStrength = 1.15f;

        // Calculate the bounding sphere of the Earth model and bind the
        // custom Earth effect file to the model.
        foreach (ModelMesh mesh in earth.model.Meshes)
        {
            earth.bounds = BoundingSphere.CreateMerged(earth.bounds, mesh.BoundingSphere);

            foreach (ModelMeshPart part in mesh.MeshParts)
                part.Effect = earth.effect;
        }

        // Position the camera based on the Earth model's size.
        camera.target = earth.bounds.Center;
        camera.offset = earth.bounds.Radius * 3.0f;
        camera.orientation = Quaternion.Identity;

        // Setup starfield.
        starfieldComponent.Generate(5000, earth.bounds.Radius * 45.0f);

    } 
```

最后：

```
private void DrawEarth()
    {
        Matrix rotation = Matrix.CreateScale(0.2f) * Matrix.CreateRotationY(earth.rotation) *
                           Matrix.CreateRotationZ(MathHelper.ToRadians(-23.4f));

        foreach (ModelMesh m in earth.model.Meshes)
        {
            foreach (Effect e in m.Effects)
            {
                if (hideClouds)
                {
                    e.CurrentTechnique = e.Techniques["EarthWithoutClouds"];
                }
                else
                {
                    e.CurrentTechnique = e.Techniques["EarthWithClouds"];
                    e.Parameters["cloudStrength"].SetValue(earth.cloudStrength);
                }

                e.Parameters["world"].SetValue(rotation);
                e.Parameters["view"].SetValue(camera.viewMatrix);
                e.Parameters["projection"].SetValue(camera.projectionMatrix);
                e.Parameters["cameraPos"].SetValue(new Vector4(camera.position, 1.0f));
                e.Parameters["globalAmbient"].SetValue(globalAmbient);
                e.Parameters["lightDir"].SetValue(sunlight.direction);
                e.Parameters["lightColor"].SetValue(sunlight.color);
                e.Parameters["materialAmbient"].SetValue(earth.ambient);
                e.Parameters["materialDiffuse"].SetValue(earth.diffuse);
                e.Parameters["materialSpecular"].SetValue(earth.specular);
                e.Parameters["materialShininess"].SetValue(earth.shininess);
                e.Parameters["landOceanColorGlossMap"].SetValue(earth.dayTexture);
                e.Parameters["cloudColorMap"].SetValue(earth.cloudTexture);
                e.Parameters["nightColorMap"].SetValue(earth.nightTexture);
                e.Parameters["normalMap"].SetValue(earth.normalMapTexture);

            }

            m.Draw();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:46:46.063

问题确实是由纹理引起的。

我猜你（或其他人）在`LoadContent`. 以下是正确的：

```
earth.dayTexture =
    Content.Load<Texture2D>(@"Textures\earth_day_color_spec"); // <-- correct
//earth.dayTexture = colorTexture_; <-- wrong

earth.nightTexture = 
    Content.Load<Texture2D>(@"Textures\earth_night_color"); // <-- correct
//earth.nightTexture = heightTexture_; <-- wrong

earth.normalMapTexture = 
    Content.Load<Texture2D>(@"Textures\earth_nrm"); // <-- correct
//earth.normalMapTexture = normalTexture_; <-- wrong 
```

其他纹理是程序生成的。这些算法可能不起作用。不过我还没有看过他们。

# php - 调用 shell_exec("php myscript.php") 进入无限循环

> ID：16150958
> 
> 赞同：1
> 
> 时间：2013-04-22T15:32:34.003
> 
> 标签：php, bash, exec, shell-exec

我决定分叉出我的 php 脚本，因为它需要很长时间才能运行。当我在本地 linux 机器上运行 shell_exec() 调用时，我没有看到无限循环问题，但在托管机器上，脚本进入了无限循环。我将代码减少到最低限度，我希望有人可以帮助我在这里看到问题：

涉及 3 个脚本：
**test_shell.php --> 向 forkphp.sh 发出 shell_exec() --> 发出命令“path/to/php write_hello_world.php”**

从上到下的顺序，首先是test_shell.php脚本：

```
<?php
    if(function_exists('shell_exec')) {
            echo "shell_exec() is enabled";
    }

    $cmd = "./forkphp.sh > /dev/null 2>&1 &";
    echo "<br/> About to shell_exec($cmd)<br/>";
    $out = shell_exec($cmd);
    echo $out; 
```

?>

这是forkphp.sh：

```
#!/bin/bash
# About to run /usr/bin/php  write_hello_world.php
echo $(/usr/bin/php write_hello_world.php) 
```

最后，这里是 write_hello_word.php ：

```
<?php
$data = "This is a test : testing \n testing \n ";

file_put_contents ("deleteme.txt",$data); 
```

?>

这得到一个无限循环，其中文件'deleteme.txt'不断重写。我只是猜测我可能在某处滥用了“$”？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:53:30.880

[`FILE_APPEND`](http://www.php.net/manual/en/function.file-put-contents.php)将标志传递给`file_put_contents()`，否则文件将被一次又一次地覆盖：

```
file_put_contents ("deleteme.txt",$data, FILE_APPEND); 
```

# python - django-salesforce 外键语法

> ID：16150960
> 
> 赞同：0
> 
> 时间：2013-04-22T15:32:35.327
> 
> 标签：python, django, foreign-keys, salesforce, django-salesforce

我正在使用 django-salesforce 获取联系人（子）列表和与之关联的帐户（父）。

在我的 models.py 中，在 Contact 类中定义一个字段以保存帐户名称的语法是什么？

这是我的models.py：

```
from django.db import models
from salesforce.models import SalesforceModel

class Account(SalesforceModel):
    Name = models.CharField(max_length=255)

    def __unicode__(self):
        return u'%s %s' % (self.Name, self.Id)

class Contact(SalesforceModel):
    FirstName = models.CharField(max_length=255)
    LastName = models.CharField(max_length=255)
    AccountId = models.CharField(max_length=255)

    def __unicode__(self):
        return u'%s %s %s' % (self.FirstName, self.LastName, self.AccountId) 
```

我找不到任何示例，但我认为它看起来像这样：

```
AccountName = models.ForeignKey(Account, db_column='Name') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T23:30:59.100

我是 django-salesforce 的作者。您不应该做任何特别的*事情*来使外键关系起作用，尽管您可能需要明确您的键名。这是一个非常简单的示例，可在源 tarball 中包含的示例应用程序中找到：

```
class User(SalesforceModel):
    Email = models.CharField(max_length=100)
    LastName = models.CharField(max_length=80)
    FirstName = models.CharField(max_length=40)
    IsActive = models.BooleanField()

class Account(SalesforceModel):
    Owner = models.ForeignKey(User, db_column='OwnerId') 
```

因为默认的 Salesforce 命名约定与 Django 的不同，所以您必须明确告诉它您的外键字段的名称。否则它将使用附加'_id'的Django约定，而不是附加'Id'的SF约定

然后，与 David 的回复中提到的类似，您可以通过以下方式访问帐户所有者的名字：

```
a = models.Account.objects.all()[0]
print a.Owner.FirstName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:40:41.387

The account name *shouldn't* be held in a field in `Contact`, since it's already held in Account (this is the purpose of database normalization- to reduce redundancy).

Instead you would connect it using a single `ForeignKey`:

```
class Contact(SalesforceModel):
    FirstName = models.CharField(max_length=255)
    LastName = models.CharField(max_length=255)
    Account = models.ForeignKey(Account) 
```

and get the account name from a `Contact` object `c` with:

```
c.Account.Name 
```

# c++ - QFuture 帮助，线程化 C++ Qt

> ID：16150961
> 
> 赞同：3
> 
> 时间：2013-04-22T15:32:44.833
> 
> 标签：c++, qt

所以我发现我的 UI 程序上发生了一些问题，因为我没有使用线程。

我看了看，从我在文档中看到的 QFuture 似乎是我需要的，我是否认为当你有一个函数并且你只想在线程中运行它时使用它？

是的，所以假设我是正确的，我浏览了所有示例中显示的文档和类型代码，基本上它根本不起作用......

用户界面.cpp

```
#include <QFuture>
#include <QtConcurrent/QtConcurrentRun>
#include "something.h"
void UI::button_click()
{
     something s;
     QFuture<int> result = QtConcurrent::run(s.heavyFunction());

     result.waitForFinished();
} 
```

东西.cpp

```
int something::heavyFunction()
{
     // heavy code here
     return 42;
} 
```

好的，显然这不是真正的代码，但这里与我的实际代码没有什么不同，但我收到以下错误

```
error C2780: 'QFuture<T> QtConcurrent::run(T (__cdecl *)(Param1),const Arg1 &)' : expects 2 arguments - 1 provided 
```

它说这个错误大约 7 次，基本上说 1,2,3,4,5,6,7 参数预期 1 提供？

我从许多示例中获得了此代码，所以我缺少什么想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T15:50:22.623

[`QtConcurrent::run`](http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html)接受一个函数和要传递给该函数的参数。在成员函数的情况下，您需要类似

```
something s;
QFuture<int> result = QtConcurrent::run(&s, &something::heavyFunction); 
```

成员函数，例如，`something::heavyFunction`采用 type 的隐式参数`T*`，其中`T`是具有成员函数的类型（`something`在这种情况下）。`QtConcurrent::run`似乎通过将实例作为第一个参数，将成员函数作为第二个参数来处理这个问题。这似乎不自然且违反直觉，并且与 eg 不一致`std::async`。

# java - Java 黑莓 GPS

> ID：16150965
> 
> 赞同：1
> 
> 时间：2013-04-22T15:32:53.710
> 
> 标签：java, blackberry, gps

我正在尝试创建一个使用 GPS 的 BB 应用程序。

_screen 出现但 _status 没有改变（它总是说“等待位置更新”）。

我用新的 GPS（lugar）创建了对象，但它不起作用。其他 GPS 应用程序正常工作。

这是我的 BB 代码：

```
package mypackage;

import java.util.*;
import javax.microedition.location.*;

import data.Lugar;

import net.rim.device.api.gps.*;
import net.rim.device.api.system.*;
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.container.*;

public class GPS
{
    // Represents the number of updates over which altitude is calculated, in seconds
    private static final int GRADE_INTERVAL = 5;

    // com.rim.samples.device.gpsdemo.GPSDemo.ID
    private static final long ID = 0x5d459971bb15ae7aL;    

    // Represents period of the position query, in seconds
    private static int _interval = 1;

    private static Vector _previousPoints;
    private static float[] _altitudes;
    private static float[] _horizontalDistances;
    private static PersistentObject _store;

    // Initialize or reload the persisted WayPoints 
    static
    {
        _store = PersistentStore.getPersistentObject(ID);

        if(_store.getContents() == null)
        {
            _previousPoints = new Vector();
            _store.setContents(_previousPoints);
        }

        _previousPoints = (Vector) _store.getContents();
    }

    private long _startTime;
    private float _wayHorizontalDistance;
    private float _horizontalDistance;
    private float _verticalDistance;
    private double latitud;
    private double longitud;
    private double latitud_anterior = 0;
    private double longitud_anterior = 0;
    private RichTextField status;
    private EditField _status;
    private LocationProvider _locationProvider;
    private GPSDemoScreen _screen;
    Lugar destino;

    /**
     * Create a new GPS object
     */
    public GPS(Lugar l)
    {
        destino = l;
        // Used by WayPoints, represents the time since the last waypoint
        _startTime = System.currentTimeMillis();

        _altitudes = new float[GRADE_INTERVAL];
        _horizontalDistances = new float[GRADE_INTERVAL];

        _screen = new GPSDemoScreen();
        _screen.setTitle("GPS Demo");

        _status = new EditField(Field.NON_FOCUSABLE);
        status = new RichTextField("Obteniendo señal GPS...");
        _screen.add(_status);
        _screen.add(status);

        // Attempt to start the location listening thread
        if(startLocationUpdate())
        {
            _screen.setState(_locationProvider.getState());
        }
        // Render the screen
        UiApplication.getUiApplication().pushScreen(_screen);
    }

    /**
     * Update the GUI with the data just received
     * 
     * @param msg The message to display
     */
    private void updateLocationScreen(final String msg)
    {

        _status.setText(msg);

    }

    /**
     * Invokes the Location API with Standalone criteria
     * 
     * @return True if the <code>LocationProvider</code> was successfully started, false otherwise
     */
    private boolean startLocationUpdate()
    {
        boolean returnValue = false;

        if(GPSInfo.isGPSModeAvailable(GPSInfo.GPS_MODE_AUTONOMOUS))
        {
            try
            {
                Criteria criteria = new Criteria();
                criteria.setCostAllowed(false);

                _locationProvider = LocationProvider.getInstance(criteria);

                if(_locationProvider != null)
                {
                    /*
                     * Only a single listener can be associated with a provider,
                     * and unsetting it involves the same call but with null.
                     * Therefore, there is no need to cache the listener
                     * instance request an update every second.
                     */
                    _locationProvider.setLocationListener(new LocationListenerImpl(), _interval, -1, -1);
                    returnValue = true;
                }
                else
                {
                            Dialog.alert("Failed to obtain a location provider, exiting...");
                            System.exit(0);
                }

            }
            catch(final LocationException le)
            {
                        Dialog.alert("Failed to instantiate LocationProvider object, exiting..." + le.toString());
                        System.exit(0);
            }
        }
        else
        {
                    Dialog.alert("GPS autonomous/standalone mode is not supported on this device, exiting...");
                    System.exit(0);
        }

        return returnValue;
    }

    /**
     * Implementation of the LocationListener interface. Listens for updates to
     * the device location and displays the results.
     */
    private class LocationListenerImpl implements LocationListener
    {

        /**
         * @see javax.microedition.location.LocationListener#locationUpdated(LocationProvider,Location)
         */
        public void locationUpdated(LocationProvider provider, Location location)
        {
            if(location.isValid())
            {
                float heading = location.getCourse();
                longitud = location.getQualifiedCoordinates().getLongitude();
                latitud = location.getQualifiedCoordinates().getLatitude();
                float altitude = location.getQualifiedCoordinates().getAltitude();
                float speed = location.getSpeed();

                // Horizontal distance for current Location
                float horizontalDistance = speed * _interval;
                _horizontalDistance += horizontalDistance;

                // Horizontal distance for WayPoint
                _wayHorizontalDistance += horizontalDistance;

                // Distance over the current interval
                float totalDist = 0;

                // Moving average grade
                for(int i = 0; i < GRADE_INTERVAL - 1; ++i)
                {
                    _altitudes[i] = _altitudes[i + 1];
                    _horizontalDistances[i] = _horizontalDistances[i + 1];
                    totalDist = totalDist + _horizontalDistances[i];
                }

                _altitudes[GRADE_INTERVAL - 1] = altitude;
                _horizontalDistances[GRADE_INTERVAL - 1] = speed * _interval;
                totalDist = totalDist + _horizontalDistances[GRADE_INTERVAL - 1];
                float grade = (totalDist == 0.0F) ? Float.NaN : ((_altitudes[4] - _altitudes[0]) * 100 / totalDist);

                // Running total of the vertical distance gain
                float altGain = _altitudes[GRADE_INTERVAL - 1] - _altitudes[GRADE_INTERVAL - 2];

                if(altGain > 0)
                {
                    _verticalDistance = _verticalDistance + altGain;
                }

                // Information to be displayed on the device
                StringBuffer sb = new StringBuffer();
                sb.append("Longitude: ");
                sb.append(longitud);
                sb.append("\n");
                sb.append("Latitude: ");
                sb.append(latitud);
                sb.append("\n");
                sb.append("Grade : ");
                if(Float.isNaN(grade))
                {
                    sb.append(" Not available");
                }
                else
                {
                    sb.append(grade + " %");
                }

                GPS.this.updateLocationScreen(sb.toString());
                //... other things non related to GPS    
            }
        }

        public void providerStateChanged(LocationProvider provider, int newState)
        {
            if(newState == LocationProvider.TEMPORARILY_UNAVAILABLE)
            {
                provider.reset();
            }
            _screen.setState(newState);
        }
    }

    /**
     * The main screen to display the current GPS information
     */
    private final class GPSDemoScreen extends MainScreen
    {
        TextField _statusTextField;

        /**
         * Create a new GPScreen object
         */
        GPScreen()
        {   
            // Initialize UI
            _statusTextField = new TextField(Field.NON_FOCUSABLE);
            _statusTextField.setLabel("GPS Status: ");
            add(_statusTextField);
            RichTextField instructions = new RichTextField("Waiting for location update...", Field.NON_FOCUSABLE);
            add(instructions);
        }

        public void setState(final int newState)
        {
            UiApplication.getUiApplication().invokeLater(new Runnable()
            {
                public void run()
                {
                    switch(newState)
                    {
                        case LocationProvider.AVAILABLE:
                            _statusTextField.setText("Available");
                            break;
                        case LocationProvider.OUT_OF_SERVICE:
                            _statusTextField.setText("Out of Service");
                            break;
                        case LocationProvider.TEMPORARILY_UNAVAILABLE:
                            _statusTextField.setText("Temporarily Unavailable");
                            break;
                    }
                }
            });
        }

        /**
         * @see net.rim.device.api.ui.Screen#close()
         */
        public void close()
        {
            if(_locationProvider != null)
            {
                _locationProvider.reset();
                _locationProvider.setLocationListener(null, -1, -1, -1);
            }

            super.close();
        }
    }
} 
```

# android - 字体中的 AssetsManager

> ID：16150968
> 
> 赞同：-3
> 
> 时间：2013-04-22T15:32:59.117
> 
> 标签：android

Typeface.createFromAsset(AssetManager manager,String path); 这个怎么用？

```
AssetManager mgr;
tf = Typeface.createFromAsset(mgr, font);
TextView txtName = (TextView) convertView.findViewById(R.id.txtTitle);
txtName.setText(novena.getName());
txtName.setTypeface(tf); 
```

如何初始化经理？

你可以使用 tf = Typeface.createFromAsset(context.getAssets(), font);

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:36:50.540

像这样：

```
AssetManager mgr;
...
mgr = getAssets(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T15:36:57.790

```
//If you are inside of an ACtivity, and NOT inside of an inner class
AssetManager mgr = getAssets(); 
```

# debugging - 使用 gdb 调试 Fortran：显示所有变量的名称，但不显示其内容

> ID：16150970
> 
> 赞同：2
> 
> 时间：2013-04-22T15:33:05.867
> 
> 标签：debugging, gdb

我正在使用 gdb 调试 Fortran 程序，当在断点处尝试打印二维数组的元素时，`p/d cs(ii,inti+1)`我收到消息*No symbol cs in current context。*但是，`cs`在当前范围内显然是可用的——我刚刚跨过的那一行使用了它——虽然没有声明它，但在模块级别（在同一个模块中）。

我试图找出可用的变量*，*看看我是否能弄清楚为什么`gdb`不让我查看这个变量的内容。`info locals`对我没有多大好处，因为我不是在追求局部变量，并且`info variables`需要永远完成，因为我有几个具有 10 000 行的矩阵，它不仅打印名称，还打印每个的内容多变的。

有没有办法只打印当前范围内所有可用变量的*名称*（可能还有*维度）？*虽然我在问 - 我在这里错过了什么明显的东西来解释为什么我无法查看的内容`cs(ii,inti+1)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T21:47:54.033

对于最初的“ *No symbol cs in current context* ”问题，我会在反汇编中快速查看函数是否被内联。

只需打印全局变量的名称和类型就可以使用 Python 脚本来实现。

将此保存到 list-globals.py

```
import gdb
block = gdb.block_for_pc(long(gdb.parse_and_eval('$pc'))).global_block
for symbol in block:
    gdb.write('%s: %s\n' % (symbol.print_name, symbol.type)) 
```

然后运行：

```
$ gdb /bin/true
(gdb) start
(gdb) source list-globals.py 
```

您的 gdb 需要在启用 Python 脚本的情况下进行编译。

# php - Yii getTypeText()

> ID：16150971
> 
> 赞同：1
> 
> 时间：2013-04-22T15:33:09.460
> 
> 标签：php, function, yii

我是 Yii 世界中的一个完全的新手，并且尽我所能地学习这个框架，同时阅读关于 Yii 的书 - ' **Web Application Development Using Yii and PHP** ' by *Jeffrey Winesett*，

我碰到 ：

两个特定的公共功能：

```
public function getTypeOptions(){
        return array(self::TYPE_BUG=>'Bug',self::FEATURE=>'Feature',self::TASK=>'Task');
    } 
```

和 ：

```
public function getTypeText(){
        $typeOptions = $this->typeOptions;
        return isset($typeOptions[$this->type_id]) ? $typeOptions[$this->type_id] : "unknown type ({$this->type_id})";
    } 
```

现在我明白 getTypeOptions 返回 _form.php 文件中 TypeOptions 下拉列表的数组，但是，在另一个函数 getTypeText() 中，在变量： **$typeOptions**中，我们直接调用这样的函数：

```
$typeOptions = $this->typeOptions; 
```

**没有指定“ getTypeOptions** ”的完整函数名

不应该是：

```
$typeOptions = $this->getTypeOptions(); 
```

**getTypeOptions()**的“ **get** ”如何；省略？这种方法可以一直应用吗？

 **是 Yii 特定的还是我不知道的 PHP 的东西？

如果这个问题是一个非常基本的问题，我很抱歉。如果有读过这本书的人回答我，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:15:40.340

是的，只要您`getAttributeName`的模型中有一个方法，您就可以使用它`$this->attributeName`来返回该方法的值，就好像它是一个属性一样。它被称为“虚拟属性”。这是一个关于它的维基页面：[http ://www.yiiframework.com/wiki/167/understanding-virtual-attributes-and-get-set-methods/](http://www.yiiframework.com/wiki/167/understanding-virtual-attributes-and-get-set-methods/)

你会看到在 Yii 文档和教程中使用了很多。例如，该`Yii::app()->getClientScript()`方法通常只是使用`Yii::app()->clientScript`

当您使用 CGridView 时，它也非常方便，因为您可以`getAttribute()`在模型中定义一个方法，然后添加一个带有名称的 CGridView 列`'attribute'`来访问它。

由于 CActiveRecord 类中的 PHP getter 魔术方法，您可以这样做。如果您有兴趣，我将在下面粘贴该方法：

```
/**
     * PHP getter magic method.
     * This method is overridden so that AR attributes can be accessed like properties.
     * @param string $name property name
     * @return mixed property value
     * @see getAttribute
     */
    public function __get($name)
    {
        if(isset($this->_attributes[$name]))
            return $this->_attributes[$name];
        elseif(isset($this->getMetaData()->columns[$name]))
            return null;
        elseif(isset($this->_related[$name]))
            return $this->_related[$name];
        elseif(isset($this->getMetaData()->relations[$name]))
            return $this->getRelated($name);
        else
            return parent::__get($name);
    } 
```

这被称为 getter 魔术方法，当无法找到或访问属性时调用它。您也可以在 Yii 之外使用相同类型的方法：http: [//de.php.net/manual/en/language.oop5.overloading.php#language.oop5.overloading.members](http://de.php.net/manual/en/language.oop5.overloading.php#language.oop5.overloading.members)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:14:57.977

这是 PHP 功能；[魔术方法](http://net.tutsplus.com/tutorials/php/deciphering-magic-methods-in-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:16:50.343

是的，这是 Yii 特有的。特别是，基类[`CComponent`](http://www.yiiframework.com/doc/api/1.1/CComponent)覆盖了[魔术方法](http://php.net/manual/en/language.oop5.magic.php) `__get`并`__set`允许使用以下语法：

> 属性由 getter 方法和/或 setter 方法定义。可以像访问普通对象成员一样访问属性。读取或写入属性将导致调用相应的 getter 或 setter 方法，例如
> 
> ```
> $a=$component->text; // equivalent to $a=$component->getText();
> $component->text='abc';  // equivalent to $component->setText('abc'); 
> ```
> 
> getter 和 setter 方法的签名如下：
> 
> ```
> // getter, defines a readable property 'text'
> public function getText() { ... }
> // setter, defines a writable property 'text'
> public function setText($value) { ... } 
> ```

[你可以在这里](https://github.com/yiisoft/yii/blob/1.1.13/framework/base/CComponent.php#L94-L175)在线浏览实际的实现。**

# eclipse - 更改多个项目的“目标运行时”

> ID：16150976
> 
> 赞同：1
> 
> 时间：2013-04-22T15:33:21.243
> 
> 标签：eclipse

我有一个工作区，其中包含我导入的数百个项目，所有项目都（通过导入的 eclipse 设置文件）将运行时设置为一些不存在的服务器，该服务器可能曾经位于编写这些项目的人的计算机上。

如何在一次操作中更改所有这些项目中的目标运行时，而不重复数百次？

我一次只能看到我是如何为一个项目做的（右键单击项目>属性>目标运行时）。

# python - 在python中插入变量作为SQL值

> ID：16150984
> 
> 赞同：0
> 
> 时间：2013-04-22T15:33:45.593
> 
> 标签：python, sql, pyodbc

```
exp = "Ted is a good film"
cursor.execute ("insert into films (descp) values (exp)")
cursor.commit() 
```

我在 MS SQL 服务器上使用上面的代码，但它说： Invalid column name'exp' I'm using pyodbc。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T15:38:30.770

```
cursor.execute ("insert into films (descp) values (?)",exp) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T15:45:45.320

我认为你应该将它作为一个元组传递：

```
cursor.execute ("insert into films (descp) values (?)", (exp,)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:35:54.300

您需要将`exp`内容作为字符串引入插入表达式。您可以使用[字符串格式](http://docs.python.org/2/library/string.html#format-examples)和''：

```
exp = "Ted is a good film"
cursor.execute ("insert into films (descp) values ('{exp}')".format(exp=exp))
cursor.commit() 
```

# android - 从头开始在Android中显示底栏

> ID：16150986
> 
> 赞同：0
> 
> 时间：2013-04-22T15:33:52.477
> 
> 标签：android, android-webview

我有一个带有 WebView 的应用程序，当它启动时，用户必须单击两次：

第一个，系统的底部栏（隐藏）显示，然后第二个，应用程序最终在 WebView 中获得焦点，因此用户可以在网站周围点击。

这对于应用程序的用户来说变得非常烦人，我想知道是否可以从一开始就显示底部栏，所以在第一次点击时，WebView 已经成为焦点。

这是否与我在 OnCreate 方法开始时拥有此代码的事实有关？

```
this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

非常感谢。

# javascript - 用jquery读取xml

> ID：16150990
> 
> 赞同：3
> 
> 时间：2013-04-22T15:34:01.040
> 
> 标签：javascript, jquery, xml, parsing

我很抱歉提出与此主题相关的问题，因为似乎有很多很多主题与同一主题相关。我已经阅读了相当多的内容，但我无法找到我的代码的问题。我有一个 XML 文件，我试图读取每个属性的一个子节点（如果这是正确的术语？）。

XML：

```
<movement>
    <name>Squat</name>
    <set>
        <weight>270</weight>
        <reps>5</reps>
    </set>
</movement> 
```

我的代码只是试图读取每个动作的名称属性。

的JavaScript：

```
 $(document).ready(function()
{
    $.ajax({
        type: "GET",
        url: "/training.xml",
        dataType: "xml",
        success: parseXml
    });
});
function parseXml(xml)
{
    $(xml).find("movement").each(function()
    {
        $("#training").append($(this).find("name").text() + "<br>");
    });
} 
```

我通过在线教程找到了这一点，并尝试对其进行修改，以将每个动作的名称添加到页面上的 div 中。目前它没有显示任何东西。我看不到这个问题。任何帮助，将不胜感激。

完整的 XML 文件：pastebin.com/rthMWNhm

完整的 HTML 文件：pastebin.com/6m9rBjRn

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T16:03:39.237

这应该可以解决问题。问题是您已经在移动节点。查找仅搜索儿童。每次迭代将迭代每个运动元素。

**[演示](http://jsfiddle.net/4vNTJ/5/)**

**Javascript**

```
var parseXml = function(xml){
    var names = '';
    $(xml).find('movement name').each(function(i,name){
        names += name.innerHTML  +'<br>';
    });  
    $('#training').append(names);
};

parseXml(xml); 
```

*更新了适合新 xml 的答案*

# c# - how to determine which cells in a datagridview are checked?

> ID：16150994
> 
> 赞同：0
> 
> 时间：2013-04-22T15:34:08.353
> 
> 标签：c#, checkbox, datagridview, datagridcell

My datagridview has 2 columns. Column 0 has contains checkboxes in the off position (default). The user can click the box and change the state or Checked.

How can I loop thru and find the ones that are checked. Here is my code

```
try
{
   // This line will cause InvalidCastException
   // Specified cast is not valid.
   if ((bool)(row.Cells[0]).Value || (CheckState)row.Cells[0].Value == CheckState.Checked)
   {
      // Do something
      MessageBox.Show("Checked");
   }
}
catch (NullReferenceException nre)
{
   MessageBox.Show("No Rows Have Been Checked");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:45:36.553

See the one-liner from [this answer](https://stackoverflow.com/a/8982925/55487):

```
List<DataGridViewRow> list = DataGridView1.Rows.Cast<DataGridViewRow>().Where(k => Convert.ToBoolean(k.Cells[CheckBoxColumn1.Name].Value) == true).ToList(); 
```

That will give you a list of all rows which have the checkbox checked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:50:54.947

What about:

```
foreach(DataGridViewRow row in dataGridView.Rows){
    if (row.Cells[0].Value != null && (bool)row.Cells[0].Value){
       //checked, do something
    }
} 
```