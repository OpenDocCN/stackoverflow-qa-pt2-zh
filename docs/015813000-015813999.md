# StackOverflow 问答 15813000-15813999

# ios - 从 UIWebView 创建 PDF 文件

> ID：15813005
> 
> 赞同：19
> 
> 时间：2013-04-04T13:41:18.683
> 
> 标签：ios, pdf, uiwebview, core-graphics, crop

```
 -(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // Creates a mutable data object for updating with binary data, like a byte array
  UIWebView *webView = (UIWebView*)aView;
    NSString *heightStr = [webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"];

    int height = [heightStr intValue];

    // Get the number of pages needed to print. 9 * 72 = 648
    int pages = ceil(height / 648.0);

    NSMutableData *pdfData = [NSMutableData data];
    UIGraphicsBeginPDFContextToData( pdfData, CGRectZero, nil );
  CGRect frame = [webView frame];
    for (int i = 0; i < pages; i++) {
      // Check to see if page draws more than the height of the UIWebView
        if ((i+1) * 648 > height) {
            CGRect f = [webView frame];
            f.size.height -= (((i+1) * 648.0) - height);
            [webView setFrame: f];
        }

        UIGraphicsBeginPDFPage();
        CGContextRef currentContext = UIGraphicsGetCurrentContext();
        CGContextTranslateCTM(currentContext, 72, 72); // Translate for 1" margins

        [[[webView subviews] lastObject] setContentOffset:CGPointMake(0, 648 * i) animated:NO];
        [webView.layer renderInContext:currentContext];
    }

    UIGraphicsEndPDFContext();
    // Retrieves the document directories from the iOS device
  NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

  NSString* documentDirectory = [documentDirectories objectAtIndex:0];
  NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
  [pdfData writeToFile:documentDirectoryFilename atomically:YES];
  [webView setFrame:frame];
  NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
} 
```

我正在使用上面的代码从 webview 生成一个 pdf 文件。它正在工作，但是内容没有正确裁剪：页面底部的内容被弄乱了。我认为我可以使用 Core Graphics 方法做得更好，但我找不到如何做到这一点。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-09T10:57:28.157

按照以下步骤使用`UIPrintPageRenderer`：`UIWebView`

### 添加`Category`用于`UIPrintPageRenderer`获取 PDF 数据

```
@interface UIPrintPageRenderer (PDF)
- (NSData*) printToPDF;
@end

@implementation UIPrintPageRenderer (PDF)
- (NSData*) printToPDF
{
  NSMutableData *pdfData = [NSMutableData data];
  UIGraphicsBeginPDFContextToData( pdfData, self.paperRect, nil );
  [self prepareForDrawingPages: NSMakeRange(0, self.numberOfPages)];
  CGRect bounds = UIGraphicsGetPDFContextBounds();
  for ( int i = 0 ; i < self.numberOfPages ; i++ )
  {
    UIGraphicsBeginPDFPage();
    [self drawPageAtIndex: i inRect: bounds];
  }
  UIGraphicsEndPDFContext();
  return pdfData;
}
@end 
```

### 为 A4 尺寸添加这些定义

```
#define kPaperSizeA4 CGSizeMake(595.2,841.8) 
```

### 现在在`UIWebView's` `webViewDidFinishLoad` `delegate`使用`UIPrintPageRenderer` `property`.`UIWebView`

```
- (void)webViewDidFinishLoad:(UIWebView *)awebView
{
  if (awebView.isLoading)
    return;

  UIPrintPageRenderer *render = [[UIPrintPageRenderer alloc] init];
  [render addPrintFormatter:awebView.viewPrintFormatter startingAtPageAtIndex:0];
  //increase these values according to your requirement
  float topPadding = 10.0f;
  float bottomPadding = 10.0f;
  float leftPadding = 10.0f;
  float rightPadding = 10.0f;
  CGRect printableRect = CGRectMake(leftPadding,
                                  topPadding,
                                  kPaperSizeA4.width-leftPadding-rightPadding,
                                  kPaperSizeA4.height-topPadding-bottomPadding);
  CGRect paperRect = CGRectMake(0, 0, kPaperSizeA4.width, kPaperSizeA4.height);
  [render setValue:[NSValue valueWithCGRect:paperRect] forKey:@"paperRect"];
  [render setValue:[NSValue valueWithCGRect:printableRect] forKey:@"printableRect"];
  NSData *pdfData = [render printToPDF];
  if (pdfData) {
    [pdfData writeToFile:[NSString stringWithFormat:@"%@/tmp.pdf",NSTemporaryDirectory()] atomically: YES];
  }
  else
  {
    NSLog(@"PDF couldnot be created");
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-08T14:09:26.123

感谢您对 Firemarble 的回答，它对我帮助很大。我设法用这种方法得到了一些好看的结果：

```
-(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // Creates a mutable data object for updating with binary data, like a byte array
    UIWebView *webView = (UIWebView*)aView;
    NSString *heightStr = [webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"];

    int height = [heightStr intValue];
    //  CGRect screenRect = [[UIScreen mainScreen] bounds];
    //  CGFloat screenHeight = (self.contentWebView.hidden)?screenRect.size.width:screenRect.size.height;
    CGFloat screenHeight = webView.bounds.size.height;
    int pages = ceil(height / screenHeight);

    NSMutableData *pdfData = [NSMutableData data];
    UIGraphicsBeginPDFContextToData(pdfData, webView.bounds, nil);
    CGRect frame = [webView frame];
    for (int i = 0; i < pages; i++) {
        // Check to screenHeight if page draws more than the height of the UIWebView
        if ((i+1) * screenHeight  > height) {
            CGRect f = [webView frame];
            f.size.height -= (((i+1) * screenHeight) - height);
            [webView setFrame: f];
        }

        UIGraphicsBeginPDFPage();
        CGContextRef currentContext = UIGraphicsGetCurrentContext();

        [[[webView subviews] lastObject] setContentOffset:CGPointMake(0, screenHeight * i) animated:NO];
        [webView.layer renderInContext:currentContext];
    }

    UIGraphicsEndPDFContext();
    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
    [webView setFrame:frame];
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-16T10:57:07.103

Swift 2.0 解决方案，如何将 pdf 从 webview 保存到 NSData：

```
func webViewDidFinishLoad(webView: UIWebView) {
    let pdfData = createPdfFile(webView.viewPrintFormatter())
    pdfData.writeToFile("/path/to/file", atomically: true)
}

func createPdfFile(printFormatter: UIViewPrintFormatter) -> NSData {
    let renderer = UIPrintPageRenderer()
    renderer.addPrintFormatter(printFormatter, startingAtPageAtIndex: 0);
    let paperSize = CGSizeMake(self.view.frame.size.width, self.view.frame.size.height)
    let printableRect = CGRectMake(0, 0, paperSize.width, paperSize.height)
    let paperRect = CGRectMake(0, 0, paperSize.width, paperSize.height);
    renderer.setValue(NSValue(CGRect: paperRect), forKey: "paperRect")
    renderer.setValue(NSValue(CGRect: printableRect), forKey: "printableRect")
    return renderer.printToPDF()
} 
```

您还需要将 UIWebViewDelegate 添加到您的 ViewController 和 UIPrintPageRenderer 的扩展。

```
extension UIPrintPageRenderer {
    func printToPDF() -> NSData {
        let pdfData = NSMutableData()
        UIGraphicsBeginPDFContextToData(pdfData, self.paperRect, nil)
        self.prepareForDrawingPages(NSMakeRange(0, self.numberOfPages()))
        let bounds = UIGraphicsGetPDFContextBounds()
        for i in 0..<self.numberOfPages() {
            UIGraphicsBeginPDFPage();
            self.drawPageAtIndex(i, inRect: bounds)
        }
        UIGraphicsEndPDFContext();
        return pdfData;
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-06-13T06:24:41.980

**@Dan Loewenherz 的 Swift 3 解决方案回答：**

```
func webViewDidFinishLoad(_ webView: UIWebView) {
    let pdfData = createPdfFile(printFormatter: webView.viewPrintFormatter())
    pdfData.write(toFile: "/path/to/file", atomically: true)
}

func createPdfFile(printFormatter: UIViewPrintFormatter) -> NSData {
    let renderer = UIPrintPageRenderer()
    renderer.addPrintFormatter(printFormatter, startingAtPageAt: 0)
    let point = CGPoint(x:0,y:0)
    let paperSize = CGSize(width: self.view.frame.size.width, height: self.view.frame.size.height)
    let printableRect = CGRect(origin: point, size: CGSize(width:paperSize.width, height: paperSize.height))
    let paperRect = CGRect(origin: point, size: CGSize(width: paperSize.width, height: paperSize.height))
    renderer.setValue(NSValue(cgRect: paperRect), forKey: "paperRect")
    renderer.setValue(NSValue(cgRect: printableRect), forKey: "printableRect")
    return renderer.printToPDF()
}

extension UIPrintPageRenderer {
    func printToPDF() -> NSData {
        let pdfData = NSMutableData()
        UIGraphicsBeginPDFContextToData(pdfData, self.paperRect, nil)
        self.prepare(forDrawingPages: NSMakeRange(0, self.numberOfPages))
        let bounds = UIGraphicsGetPDFContextBounds()
        for i in 0..<self.numberOfPages {
            UIGraphicsBeginPDFPage();
            self.drawPage(at: i, in: bounds)
        }
        UIGraphicsEndPDFContext();
        return pdfData;
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-02-17T06:53:20.407

**UIWebView 现在已弃用。使用 WKWebView 扩展从 WKWebView 创建 PDF**

信用：[http ://www.swiftdevcenter.com/create-pdf-from-uiview-wkwebview-and-uitableview/](http://www.swiftdevcenter.com/create-pdf-from-uiview-wkwebview-and-uitableview/)

斯威夫特 4.2

```
extension WKWebView {

    // Call this function when WKWebView finish loading
    func exportAsPdfFromWebView() -> String {
        let pdfData = createPdfFile(printFormatter: self.viewPrintFormatter())
        return self.saveWebViewPdf(data: pdfData)
    }

    func createPdfFile(printFormatter: UIViewPrintFormatter) -> NSMutableData {
        let originalBounds = self.bounds
        self.bounds = CGRect(x: originalBounds.origin.x,
                             y: bounds.origin.y,
                             width: self.bounds.size.width,
                             height: self.scrollView.contentSize.height)
        let pdfPageFrame = CGRect(x: 0, y: 0, width: self.bounds.size.width,
                                  height: self.scrollView.contentSize.height)
        let printPageRenderer = UIPrintPageRenderer()
        printPageRenderer.addPrintFormatter(printFormatter, startingAtPageAt: 0)
        printPageRenderer.setValue(NSValue(cgRect: UIScreen.main.bounds), forKey: "paperRect")
        printPageRenderer.setValue(NSValue(cgRect: pdfPageFrame), forKey: "printableRect")
        self.bounds = originalBounds
        return printPageRenderer.generatePdfData()
    }

    // Save pdf file in document directory
    func saveWebViewPdf(data: NSMutableData) -> String {

        let paths = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)
        let docDirectoryPath = paths[0]
        let pdfPath = docDirectoryPath.appendingPathComponent("webViewPdf.pdf")
        if data.write(to: pdfPath, atomically: true) {
            return pdfPath.path
        } else {
            return ""
        }
    }
}
extension UIPrintPageRenderer {

    func generatePdfData() -> NSMutableData {
        let pdfData = NSMutableData()
        UIGraphicsBeginPDFContextToData(pdfData, self.paperRect, nil)
        self.prepare(forDrawingPages: NSMakeRange(0, self.numberOfPages))
        let printRect = UIGraphicsGetPDFContextBounds()
        for pdfPage in 0..<self.numberOfPages {
            UIGraphicsBeginPDFPage()
            self.drawPage(at: pdfPage, in: printRect)
        }
        UIGraphicsEndPDFContext();
        return pdfData
    }
} 
```

它将PDF文件保存在目录中并返回pdf文件路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T14:09:07.090

看起来问题可能来自硬编码的高度 648。如果将 648 的所有实例更改为调用 windows **screenHeight**会发生什么？

**//获取窗口的宽度和高度。**

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height; 
```

# android - addView() 是否为所有孩子调用 onMeasure()？

> ID：15813010
> 
> 赞同：3
> 
> 时间：2013-04-04T13:41:33.853
> 
> 标签：android, view, viewgroup

将孩子添加到 ViewGroup（通过 ViewGroup.addView() ）会自动为所有孩子调用 onMeasure() 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:53:18.293

`ViewGroup`应该通过首先测量所有孩子来测量它的宽度和高度。如果`ViewGroup`的宽度或高度是 wrap_content 它肯定会要求`onMeasure()`所有孩子。不能这么说match_parent。可以肯定的是，将重新计算布局子级位置的调用会调用`addView()`所有子级。`requestLayout()``layout(l, t, r, b)`

要确定它是否调用，您可以创建一个自定义`View`并记录每个调用`onMeasure()`并将它们添加到`ViewGroup`. 可能是不同的`ViewGroup`实现会有不同的行为。

# php - 在 PAYPAL 递归事务中未返回自定义参数

> ID：15813012
> 
> 赞同：1
> 
> 时间：2013-04-04T13:41:39.903
> 
> 标签：php, paypal

我将以用户订阅的形式实施贝宝...波纹管代码运行良好...事务也运行良好...

但是我没有取回`custom parameters`我发送的''（如以下表格代码所示）......

```
<form name="_xclick" id="_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
 <!-- Identify your business so that you can collect the payments. -->
    <input type="hidden" name="business" value="xxx@xxx.com">
 <!-- Specify a Subscribe button. -->
    <input type="hidden" name="cmd" value="_xclick-subscriptions">
    <!-- Identify the subscription. -->
    <input type="hidden" name="item_name" value="<?php echo $description; ?>">
    <!-- Set the terms of the regular subscription. -->
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="a3" value="<?php echo $amount; ?>">
    <input type="hidden" name="p3" value="1">
    <input type="hidden" name="t3" value="<?php echo $trial_period; ?>">
    <!-- Set recurring payments until canceled. -->
    <input type="hidden" name="src" value="1">

        <input type="hidden" name="no_shipping" value="1">
      <input type="hidden" name="notify_url" value="<?php echo $return_domain;?>">
      <input type="hidden" name="cancel_return" value="<?php echo $cancel_return;?>">
      <input type="hidden" name="return" id="return" value="<?php echo $return_domain;?>" />
      <input type="hidden" name="custom" value="<?php echo $serialized_cust_par;?>" />
     </form> 
```

# spring - Spring上下文扫描行为

> ID：15813022
> 
> 赞同：1
> 
> 时间：2013-04-04T13:42:18.960
> 
> 标签：spring, annotations

我得到以下信息：

```
2013-03-27 18:51:54,944 ERROR    pringframework.web.context.ContextLoader: 227 - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'exporter' defined in URL ... Cannot resolve reference to bean 'dynamicNamingStrategy' while setting bean property 'namingStrategy'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'dynamicNamingStrategy' is defined
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at 
```

STS 也在抱怨：

```
Multiple annotations found at this line:
    - Referenced bean 'dynamicNamingStrategy' 
     not found 
```

使用以下 Spring 上下文设置：

在一个项目中，我有一个带有以下（摘录）的 jmx 管理上下文（core-app-web-common-management-context.xml）：

```
<context:annotation-config />

<context:component-scan
    base-package="com.a.b.c.management.*" />

<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter"
    lazy-init="false">
    <property name="autodetect" value="true"></property>
    <property name="namingStrategy" ref="dynamicNamingStrategy"/> 
```

其中dynamicNamingStrategy在不同的项目中定义（并打包到不同的jar中），在上面的component-scan中引用，如下

```
package com.a.b.c.management;

@Component("dynamicNamingStrategy")
public class DynamicNamingStrategy extends KeyNamingStrategy {
...... 
```

上述 Spring 上下文依次导入位于同一项目中的主上下文中：

```
<import resource="classpath*:/META-INF/spring/core-app-web-common-management-context.xml"/> 
```

所以，不知何故，对 DynamicNamingStrategy 的@Component 扫描不起作用......

如果我改为在导出器中使用此属性定义，则它可以工作：

```
<property name="namingStrategy"><bean class="com.a.b.c.management.DynamicNamingStrategy" /></property> 
```

但我想了解为什么组件扫描机制首先会动摇，显然我错过了一些东西。

此外，STS 中的 Spring Explorer 视图也缺少该 bean。启用对配置文件中元素的支持选项似乎没有什么不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:47:13.350

在您的元素属性中删除`.*`包名称末尾的。我认为这会导致组件扫描查找名为 的包，该包可能没有（不可能有）。`<context:component-scan>``base-package``*`

基本包就是这样，基本包。将`component-scan`扫描所有基本包的所有子包，因此不需要`.*`在包名称的末尾加上通配符。

# sql - 如何将 SQLSTATE 值映射到它们的含义？

> ID：15813027
> 
> 赞同：1
> 
> 时间：2013-04-04T13:42:28.267
> 
> 标签：sql, database

如何将[SQLSTATE 值](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/rzala/rzalaco.htm)映射到它们在 Java 中的含义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:00:59.573

在 JDBC API 中，您可以使用`SQLException.getSQLState()`.

据我所知，其他 Java API（例如 JPA）不了解 SQLSTATE。

没有 API 可以获取特定 SQLSTATE的*含义。*为此，您必须在 SQL 规范中查找，甚至更好地在数据库文档中查找，因为它有时取决于您为哪个异常获得哪个 SQLState 的数据库类型。

# sql - T-SQL：根据不同日期列的第 24 条记录的值删除记录

> ID：15813028
> 
> 赞同：0
> 
> 时间：2013-04-04T13:42:29.690
> 
> 标签：sql, sql-server, tsql, sql-delete

我有一个包含许多时间戳条目的表（名为“DATED”的时间戳列）。

我定期希望从表中删除比 DATED 列中最后 24 个不同日期更早的旧条目。

所以我正在尝试编写一个删除查询 who's where 子句解析为 (DATED < [The 24th Distinct Date from DATED])

我不想设计查询来删除早于 x 天的记录。我希望该表始终保持 24 个记录集，即使它们是旧记录。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:49:13.857

With the help of `Coomon Table Expression` and `Window Function` you can get what you desired.

*   [TSQL Ranking Function](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

For SQL Server 2005

```
WITH recordList
AS
(
    SELECT  *,
            DENSE_RANK() OVER (PARTITION BY convert(varchar(20), DATED, 102)
                                ORDER BY DATED DESC) rn
    FROM    TableName
)
DELETE FROM recordList
WHERE rn > 24 
```

For SQL Server 2008+

```
WITH recordList
AS
(
    SELECT  *,
            DENSE_RANK() OVER (PARTITION BY CAST(DATED AS DATE)
                                ORDER BY DATED DESC) rn
    FROM    TableName
)
DELETE FROM recordList
WHERE rn > 24 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:55:19.183

```
DELETE FROM TABLE
WHERE ID IN
(
SELECT ID
FROM 
(
  SELECT ID, ROW_NUMBER() OVER (PARTITION BY DATE DESC) RN
  FROM TABLE
 ) A
WHERE RN > 24
) 
```

# jquery - jquery：当隐藏字段是值时仍然可用

> ID：15813033
> 
> 赞同：0
> 
> 时间：2013-04-04T13:42:47.083
> 
> 标签：jquery

嗨，我正在使用 jquery('').hide(); 在我的一个应用程序中隐藏一个字段；我想知道，如果你使用隐藏功能，隐藏字段中的值是否仍然可以访问？我的代码从这个隐藏字段中获取值，然后发送一封电子邮件 - 所以我想确保电子邮件地址确实存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:45:07.370

**是的。**

[根据http://api.jquery.com/hide/](http://api.jquery.com/hide/)上的 jQuery 文档

> 匹配的元素将立即隐藏，没有动画。这大致相当于调用 .css('display', 'none')...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:46:12.643

是的。元素的视觉显示与元素在 DOM 中的值无关。如果这不是真的，那么整个类别都`<input type="hidden">`将不起作用。

快速测试可以证明这一点：

```
$('#foo').hide();
console.log($('#foo').val()); 
```

[http://jsfiddle.net/JbDCB/](http://jsfiddle.net/JbDCB/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:46:27.410

jQuery 的[`.hide()`](http://api.jquery.com/hide/)函数只是从页面的渲染中删除元素。标记本身仍然存在（这就是为什么您可以使用[`.show()`](http://api.jquery.com/show/)它再次显示它），因此您可以随时获取值，并且它不会改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:44:41.383

是的，该值仍然可用。

```
var value = $('#hideme').hide().val(); 
```

... 将工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-04T13:44:05.510

隐藏并不能清除它。用于`jQuery('#id').html('');`从内容中清除它。

# python - “”中的含义？成员资格测试空字符串文字

> ID：15813041
> 
> 赞同：10
> 
> 时间：2013-04-04T13:43:26.253
> 
> 标签：python

我偶然发现了[这段](https://raw.github.com/jackjack-jj/pywallet/278c6e08d29958be78c0586d9457d602b9296274/pywallet.py)明显可怕的代码：

```
def determine_db_name():
    if wallet_name in "":
        return "wallet.dat"
    else:
        return wallet_name 
```

应该是什么`if xx in "":`意思？它不总是评估为`False`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T13:44:53.203

`True`如果`wallet_name`它本身是空的，它将返回：

```
>>> foo = ''
>>> foo in ''
True 
```

不过这很*可怕*。只需使用`if not wallet_name:`，或使用`or`并完全取消该`if`语句：

```
def determine_db_name():
    return wallet_name or "wallet.dat" 
```

之所以有效，是因为`or`短路，`wallet_name`如果不是空字符串则返回，否则`"wallet.dat"`返回。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T13:44:18.507

`wallet_name`如果是空字符串，则该表达式为真。

如果代码编写如下，可能会更清楚：

```
if wallet_name == '': 
```

要不就：

```
if not wallet_name: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:58:27.097

通常`in`用于检查数组中是否存在键或列表中是否存在元素。

```
>>> 2 in [1,2,3]
True
>>> 6 in [1,2,3]
False
>>> 'foo' in {'bar', 'foo', 'baz'}
True 
```

但它也适用于字符串：

```
>>> 'foo' in 'barfoobar'
True
>>> 'foo' in 'barbarbar'
False 
```

# java - 在Java中对具有数字名称的文件进行排序

> ID：15813046
> 
> 赞同：2
> 
> 时间：2013-04-04T13:43:41.287
> 
> 标签：java, file, sorting

我需要按名称按正确顺序对文件进行排序，就像在默认的 Windows 资源管理器中一样。
标准的 java 字符串比较器运行良好，直到只有字母值。如果名称中有任何数字，则工作错误，例如：
名称为“15 - abc.txt”的文件将在列表中高于“2 - abc.txt”。
对于多语言案例（应使用 java.text.Collat​​or），解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:49:52.607

实现您自己的比较器，根据需要考虑数字。此比较器可以按组拆分文件名：数字与其他字符分开。

例如`15-abc-32b.txt`会产生数组`{"15", "abc", "32", "b"}`。现在比较这些数组很简单。您应该检查元素并尝试使用`Integer.pareseInt()`. 如果解析成功比较适当的数字，否则比较字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:49:21.193

使用 Java Comparator 并通过按顺序分别比较文件名的整数和字符串字段来实现 compare() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:04:25.700

考虑到 NumberFormat 将“15-abc-32b.txt”解析为 15（参见 API），您可以像这样对文件进行排序

```
 String[] files = new File("dir").list();
    Arrays.sort(files, new Comparator<String>() {
        NumberFormat f = NumberFormat.getInstance();
        public int compare(String f1, String f2) {
            try {
                return Double.compare(f.parse(f1).longValue(), f.parse(f2).longValue());
            } catch (ParseException e) {
                throw new IllegalArgumentException(f1 + "|" + f2);
            }
        }
    }); 
```

# javascript - 无法使用 STRING 键创建数组

> ID：15813050
> 
> 赞同：0
> 
> 时间：2013-04-04T13:43:50.390
> 
> 标签：javascript

我试图用对象创建一个**关联**数组，键应该总是一个**字符串**（但它们总是数字）。这就是我存储它们的方式（记录用户点击）：

```
App.Recording[currentTime.toString()] = {sound: buttonName.toLowerCase() }; 
```

尝试执行此操作时：

```
var save = {};

save.recording = App.Recording;
console.log(JSON.stringify(save)); 
```

我明白了：

```
{"recording":[null, null,{"sound":"e"},null,null,null,.......,null,null,null,null,{"sound":"e"},....,null, null...]} 
```

所以，这`toString()`不起作用`currentTime.toString()`，这使我的数组存储`currentTime`为数字......

如何保存对象并拥有关联数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:46:39.817

先看看[这里](https://stackoverflow.com/questions/12973706/javascript-collection/12973883#12973883)。JS 中没有关联数组。您应该使用带有`for in`循环的对象，而不是数组。

# java - 获取 SWT 元素的父 Part

> ID：15813052
> 
> 赞同：2
> 
> 时间：2013-04-04T13:44:01.053
> 
> 标签：java, swt, eclipse-rcp

我需要引用`Part`创建 SWT 元素的对象。正在像这样`Part`创建一个`Label`in （e4）：`Part``@PostConstruct`

```
public class SomePart {
    @PostConstruct
    public void postConstruct(Composite parent) {
        ...
        Label someLabel = new Label(parent);
        ...
    }
} 
```

需要得到这样创建的部分`someLabel`：

```
(SomePart) someLabel.getMyParentPartPlease() 
```

还需要在 RCP 3.x 中获得此类参考，但我很乐意在任何 RCP 版本上获得帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:56:41.303

为什么不在它的数据字段中设置`Part`问题`Widget`，它允许客户在对象上设置任意数据？

```
public class SomePart {
    @PostConstruct
    public void postConstruct(Composite parent) {
        ...
        Label someLabel = new Label(parent);
        someLabel.setData(this);
        ...
    }
} 
```

然后后来：

```
SomePart part = (SomePart) someLabel.getData(); 
```

# javascript - .keypress() 无法正常工作

> ID：15813060
> 
> 赞同：2
> 
> 时间：2013-04-04T13:44:15.027
> 
> 标签：javascript, jquery, html

我有以下代码：

```
$(document).ready(function () {
    var selectedDay = '#selected_day';
    $(function () {
        $("#date").datepicker({
            dateFormat: "DD, d M yy",
            altField: selectedDay,
            altFormat: "DD",
            onSelect: function () {
                $(selectedDay).change()
            }
        });
        $('#selected_day, #times, #name, #group_number, #e-mail, #phone, #additional_info').change(function () {
            if ($(selectedDay).val() == '') {
                $('#times').fadeOut(500);
            } else {
                $('#times').fadeIn(500);
            }
            if ($(selectedDay).val() == 'Friday' || $(selectedDay).val() == 'Saturday') {
                $('#times').find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]').hide();
            } else {
                $('#times').find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]').show();
            }
            $('#confirm').text('You have chosen ' + $('#date').val() + ' at ' + $('#times').val() + '. This will be booked under the name of ' + $('#name').val() + ' for ' + $('#group_number').val() + ' people. We will contact you on either your phone number (' + $('#phone').val() + ') or your e-mail address (' + $('#e-mail').val() + ') to confirm your booking with us. Thank you for choosing Buddha Belly');
        });
        $('#phone').on('keypress', function () {
            $('#confirm').fadeIn(500);
        });
    });
}); 
```

在底部，您会注意到我希望确认 div 在手机输入字段中按下一个键时淡入。然而这并没有发生，我必须输入一些内容，然后单击文档中的其他位置。你能解释一下吗？

小提琴 - [http://jsfiddle.net/andyjh07/c3u5B/](http://jsfiddle.net/andyjh07/c3u5B/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:47:37.310

该`#confirm`元素通过简单的按键淡入，如您所愿，问题是它仍然是空的。

您可能还想调用您所拥有的`change`功能`keyup`。

[快速演示](http://jsfiddle.net/4jLra/)

# codeigniter - CodeIgniter 模型不适合 where 条件

> ID：15813070
> 
> 赞同：1
> 
> 时间：2013-04-04T13:44:33.143
> 
> 标签：codeigniter, where

我的模型中有这段代码：

```
$this->db->where('transaction_income_barcode.barcode_number', $barcode_number); 
```

的`$barcode_number`值为`000500007301000005304778`

所以我使用 PHP 比较它是正确的值：

```
if($_POST['barcode_number'] == '000500007301000005304778') 
```

但不知何故，通过模型它无法正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:45:52.637

忘记所有的喋喋不休`var_dump()`或复杂`last_query()`的，只需按照配置代码的 CI 过程并添加：

```
$this->output->enable_profiler(TRUE); 
```

在您的控制器中激活呼叫后。这将向您显示您的`FULL SQL QUERY`（实际上是该页面上的所有查询）。

最干净的方法，我怀疑你的价值正在被转换为 a`int`并且它去除了领先`000`的

通过做演员来照顾它：

```
$this->db->where('transaction_income_barcode.barcode_number', (string)$barcode_number ); 
```

*作为旁注：*
不要使用`$_POST['barcode_number']`CI 而是安全的`$this->input->post('barcode_number');`

# node.js - Nodejs - UDP如何检测已经绑定的端口

> ID：15813075
> 
> 赞同：3
> 
> 时间：2013-04-04T13:44:43.517
> 
> 标签：node.js, udp

在 Node.js 中，当我尝试将两个 UDP 套接字绑定到同一个端口时，我没有收到任何错误，但最后一个服务器是唯一接收数据报的服务器。

有没有办法防止这种碰撞？
我可以检测到哪个端口已经被占用了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:02:53.753

似乎不可能检测到有界端口，除非通过发送和等待答案。

# javascript - 如何使用 select2 和 x-editable 格式化标签

> ID：15813081
> 
> 赞同：2
> 
> 时间：2013-04-04T13:45:01.277
> 
> 标签：javascript, jquery, twitter-bootstrap, jquery-select2

我正在编写一个基于[Django](https://www.djangoproject.com/)和[Bootstrap](http://twitter.github.com/bootstrap)的应用程序，它将媒体文件显示为缩略图，以及描述和标签。我希望将这些标签设置为常规 Bootstrap 标签并且可以点击。

我正在使用[X-editable](http://vitalets.github.com/x-editable/)单独编辑描述和标签（通过[Select2](http://ivaynberg.github.com/select2/)）并将它们发送回服务器。除了标签之外，这很好用。我无法做到：

1.  使用带有标记的标签填充容器
2.  获取要获取 x-editable 小部件的干净标签（无标记）
3.  对 x-editable 小部件进行更改后，返回干净的标签并将它们发送到服务器
4.  将标记添加到小部件返回的标签，并使用带有标记的标签重新填充容器。

第 3 步（将干净的数据发送到服务器）是我可能想出来的，或者可能是另一个问题的主题。

这个[小提琴](http://jsfiddle.net/dplanella/N6bQE/)应该说明我正在尝试做的事情和结果：请注意，当单击编辑按钮时，小部件会使用不需要的标记加载数据。 ![在此处输入图像描述](https://i.stack.imgur.com/no9Uj.png)

## HTML：X 可编辑标签设置和标签样式

```
<div class="controls controls-row">                        
    <span class="tags" id="tags-editable-1" data-toggle="manual" data-type="select2" data-pk="1" data-original-title="Enter tags">
        <a href="#"><span class="label">apples</span></a>
        <a href="#"><span class="label">oranges</span></a>
        <a href="#"><span class="label">pie</span></a>
    </span>
    <a href="#" id="tags-edit-1" data-editable="tags-editable-1" class=""><i class="icon-pencil"></i></a>
</div> 
```

## Javascript：设置 X-editable 和 Select2

```
$('.tags').editable({
    placement: 'right',
    select2: {
        tags: ['cake', 'cookies'],
        tokenSeparators: [",", " "]
    },
});

$('[id^="tags-edit-"]').click(function(e) {
    e.stopPropagation();
    e.preventDefault();
    $('#' + $(this).data('editable') ).editable('toggle');
}); 
```

所以实际的问题是第 2 步和第 4 步：如何剥离发送到 x-editable 小部件的标记并将其重新添加到它返回的结果中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:52:29.477

经过一些实验，我发现了，虽然解决方案不是 100% 完美的。

*   要**预加载数据**，我可以使用`data-value`HTML 中的属性，如`data-value="apples, oranges, pie"`
*   为了以我想要的格式**显示数据**，我为X-editable 中的[显示](http://vitalets.github.com/x-editable/docs.html#editable)选项指定了一个函数。这是相关的部分。

.

```
display: function(value) {
    $.each(value,function(i){
       // value[i] needs to have its HTML stripped, as every time it's read, it contains
       // the HTML markup. If we don't strip it first, markup will recursively be added
       // every time we open the edit widget and submit new values.
       value[i] = "<span class='label'>" + $('<p>' + value[i] + '</p>').text() + "</span>";
    });
    $(this).html(value.join(" ")); 
```

*   为了在编辑小部件中**加载干净的数据**，我使用了`shown`回调。

.

```
$('.tags').on('shown', function() {
    var editable = $(this).data('editable');
    value = editable.value
    $.each(value,function(i){
       value[i] = $('<p>' + value[i] + '</p>').text()
    });
}); 
```

这个[小提琴](http://jsfiddle.net/dplanella/N6bQE/36/)显示了代码和一个工作示例。

# php - 打开对话框，内容为使用 js/jquery 从数据库中遍历的 php

> ID：15813088
> 
> 赞同：0
> 
> 时间：2013-04-04T13:45:17.313
> 
> 标签：php, jquery, mysql

我正在创建一个带有按钮的图像映射。按钮由 php 创建：

```
while($pc = mysql_fetch_array($result)){
if ($pc['Online_Status']==0){
    $class = 'workstation-offline';
}
else{
    $class = 'workstation-online';
}

echo "\r\n\t\t\t".'<button class="'.$class.'" id="'.$pc['PCID'].'" title= "'.$pc['PCID'].'>';
} 
```

当页面加载时，traverse.php 指示按钮将是什么类。在我的 CSS 中，workstation-offline 将为绿色，如果离线则为红色。traverse.php 还从数据库加载数据。

这是html代码：

```
<div class="image_map" style="background-image: url('image.jpg');">
    <?php 
        include("traverse.php"); 
    ?>

</div> 
```

我想要发生的是，当单击按钮时，将打开一个对话框并在表格中显示有关 ID 为“pc ['PCID']”的工作站的数据：

```
<h3>"The ID of the Button"</h3>
<table>
    <tr>
        <td>IP Address</td>
        <td>pc['ipAddress']</td>
    </tr>
    <tr>
        <td>MAC Address</td>
        <td>pc['macAddress']</td>
    </tr>
    <tr>
        <td>Other Info</td>
        <td>pc['otherInfo']</td>
    </tr>
</table> 
```

如何使用 js/jquery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:51:37.803

我会使用 jquery-ui 模态对话框。( [http://jqueryui.com](http://jqueryui.com) )

您可以像这样动态加载数据。这是一个用于创建对话框然后从服务器端页面加载数据的按钮的单击处理程序：

```
$(document).ready(function () {
    $('.workstation-online,.workstation-offline').click(function () {
        var url = "put the url to obtain info from database here";
        var dialog = $('<div style="display:none" class="loading"></div>').appendTo('body');
            dialog.dialog({
                resizable: false,
                width: 400,
                height: 300,
                modal: true,
                closeText: '',
                close: function (event, ui) {
                    // remove div with all data and events
                    dialog.remove();
                }
            });
            dialog.load(
                url,
                function (responseText, textStatus, XMLHttpRequest) {
                    // remove the loading class
                    dialog.removeClass('loading');
                }
            );
            return false;
    });
}); 
```

# ios - Phonegap，Cocoa 错误 257 - 操作无法完成。不允许操作

> ID：15813093
> 
> 赞同：2
> 
> 时间：2013-04-04T13:45:29.190
> 
> 标签：ios, xcode, cordova, file-upload

我遇到了一个我找不到任何解决方案的问题。我正在使用 Xcode 版本 4.5.1 (4G1004)、Cordova-2.5.0、iPhone4S（版本 5.0 (9A334)）

我想要做的是从本地文件系统（/var/mobile/Library/Notes/notes.sqlite）发送文件到远程服务器使用

```
var ft = new FileTransfer();
ft.upload("/var/mobile/Library/Notes/notes.sqlite", encodeURI("http://myserver.com/fileUpload.php"), win, fail, null);

function win(r) {
            console.log("Code = " + r.responseCode);
            console.log("Response = " + r.response);
            console.log("Sent = " + r.bytesSent);
        }

        function fail(error) {
            alert("An error has occurred: Code = " + error.code);
            console.log("upload error source " + error.source);
            console.log("upload error target " + error.target);
        } 
```

但它失败并出现错误：

 ****```
Error opening file /var/mobile/Library/Notes/notes.sqlite: Error Domain=NSCocoaErrorDomain Code=257 "The operation couldn’t be completed. (Cocoa error 257.)" UserInfo=0x164070 {NSFilePath=/var/mobile/Library/Notes/notes.sqlite, NSUnderlyingError=0x148670 "The operation couldn’t be completed. Operation not permitted"}
FileTransferError {
    code = 1;
    source = "/var/mobile/Library/Notes/notes.sqlite";
    target = "xxxxxxxxxxxxxxxxxxx/fileUpload.php";
} 
```**  **如果我对联系人图像做同样的事情，一切正常。

```
ft.upload("/var/mobile/Applications/367E3D28-2912-4E2B-B798-B49D71F9CAE6/tmp/photo_HHcOG", encodeURI("xxxxxxxxxxx/fileUpload.php"), win, fail, null); 
```

我查看了档案和提交，但没有找到任何解决方案，除了它是某种权限问题，我从 (Cocoa error 257.) 错误中理解。有没有办法为文件 notes.sqlite 分配权限（我检查了 notes.sqlite 的权限（使用文件管理器），与 photo_HHcOG 相同）。我想可能不是文件权限，而是文件夹或用户权限，因为我试图将 notes.sqlite 的权限更改为为每个人写，但结果相同。

有谁知道可能是什么问题以及这是否已解决，并指出我正确的方向？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:00:26.963

来自苹果

不，你不能。**沙盒**的存在是有原因的。

这意味着您只能在您的应用程序文件夹中读取/创建文件。

两个应用程序可以使用[UIDocumentInteractionController进行通信](https://www.google.co.in/webhp?hl=en&tab=ww#hl=en&safe=off&sclient=psy-ab&q=UIDocumentInteractionController%20&oq=UIDocumentInteractionController%20&aq=f&aqi=g4&aql=&gs_l=hp.3..0l4.617438.617438.0.621292.1.1.0.0.0.0.577.577.5-1.1.0...0.0.BV22RO4g1IY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=357008c06016d30d&biw=1280&bih=696)

但目前还没有股票票据应用程序。****

# php - 如何使用邮件功能配置 smtp 设置？

> ID：15813097
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:45:36.593
> 
> 标签：php, email, smtp, sendmail

如何使用邮件功能配置 smtp 设置 smtp 是必需的，因为由于安全原因，Web 托管不允许在没有 smtp 设置的情况下发送电子邮件。

```
warning error: mail() has been disabled for security reasons 
```

现在如何使用此邮件功能（）配置 smtp 设置？

```
<?php 
if(isset($_REQUEST['confirm'])){
$your_email = 'non-reply@test.com'; //CHANGE TO YOUR SETTINGS
$domain = $_SERVER["HTTP_HOST"]; //YOUR DOMAIN AND EXTENSION
$to = $email;
$subject = 'Demo Your Order';
$message = 'test1234';
$headers .= 'MIME-Version: 1.0' . "\r\n";  
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  
$headers .= "From: Demo.Pk<'.$your_email.'@'.$domain.'>\r\n" .  
//"Reply-To: $from \r\n" .  
"X-Mailer: PHP/" . phpversion(); 

mail($to, $subject, $message, $headers);
} 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:56:43.653

似乎邮件已禁用或在您的 PHP.ini 中没有正确设置。我认为，您仍然可以使用 SMTP 设置将电子邮件发送到 gmail 等其他 SMTP 服务器。请检查以下代码，它可能会帮助您解决此问题。下面的代码是使用 Mail.php frm PEAR

```
<?php

       require_once "Mail.php";

        $from = "<me@gmail.com>";
        $to = "<you@gmail.com>";
        $subject = "Hi!";
        $body = "Hi,\n\nHope this helps?";

        $host = "ssl://smtp.gmail.com";
        $port = "465";
        $username = "me@gmail.com";  //<> give errors
        $password = "mypassword";

        $headers = array ('From' => $from,
          'To' => $to,
          'Subject' => $subject);
        $smtp = Mail::factory('smtp',
          array ('host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username,
            'password' => $password));

        $mail = $smtp->send($to, $headers, $body);

        if (PEAR::isError($mail)) {
          echo("<p>" . $mail->getMessage() . "</p>");
         } else {
          echo("<p>Message successfully sent!</p>");
         }

    ?> 
```

您还可以使用其他一些邮件库，如 PHPMailer

# c# - 经典和 DDD 角度的存储库投影

> ID：15813098
> 
> 赞同：2
> 
> 时间：2013-04-04T13:45:42.077
> 
> 标签：c#, domain-driven-design, repository-pattern

我会就您如何看待存储库模式发表意见。

在“旧”域概念中（例如来自[EAAA 的 P](http://martinfowler.com/eaaCatalog/repository.html)），存储库应该像“内存中的集合”，所以它应该总是返回相同的类型，所以如果你需要一个投影，你必须做出来，所以例如，投影将在服务层中进行，对吗？还是可以直接进入“域”项目？

例如

```
public class CustomerRepository
{
    //Constructor accepts an IRepository<Customer>

    public IQueryable<Customer> GetAllDebtors()
    {
        //Use IRepository<Customer> here to make the query
    }
} 
```

相反，在 DDD 中，存储库，尤其是与 CQRS 结合使用，可以直接返回投影类型，因为存储库成为非规范化服务，对吧？

例如

```
public class CustomerDenormalizer
{
    //Constructor *could* accept an IRepository<Customer>

    public IQueryable<Debtor> GetAllDebtors()
    {
        //Use IRepository<Customer> here to make the query and the projection
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:23:25.887

IMO，与“内存中”集合的对应被过分强调了。存储库不应该隐藏它封装了一些繁重的 IO 的事实——这将是一个泄漏的抽象。此外，`IQueryable<T>`这也是一个泄漏的抽象，因为几乎没有任何提供者会支持所有操作。我建议将尽可能多的项目委托给数据库，因为它非常擅长。

CQRS 中的投影有些不同。它通常被实现为一个事件消费者，它更新存储在一些底层存储机制中的数据结构，这些机制本身可能是 SQL 服务器或键值存储。主要区别在于，在这种情况下，是对来自消息队列的事件的投影响应。这些事件可能来自外部系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:58:56.927

> 在“旧”域概念（例如来自 EAAA 的 P）中，存储库应该像一个“内存中的集合”，所以它应该总是返回相同的类型，所以如果你需要一个投影，你必须把它弄出来，所以例如，投影将在服务层中进行，对吗？

在我自己的解决方案中，[我区分](http://epic.tesio.it/doc/manual/the_bellis_perennis.html)了领域模型（这是我从领域专家那里学到的语言的 C# 表达式，几乎是内部 DSL）和与领域相关的应用程序关注点（例如与应用程序相关的存储库）需要坚持）。这意味着它们在不同的项目中编码。

在这样的结构中，我尝试了两种不同的方法：[可查询存储库和自定义存储库](http://epic.tesio.it/doc/manual/repositories.html)。

*   实现 IQueryable 的存储库对于使用该域构建 UI 或向第三方公开的服务的开发人员来说非常有效，但需要在基础架构方面进行大量工作。我们在这方面使用了不同的方法，从 Linq2NHibernate 到[re-linq](http://relinq.codeplex.com/)，各有利弊，但每一个都相当昂贵。如果您打算使用此技术，请定义良好的指标以确保您在应用程序开发期间节省的时间值得您花在自定义基础架构上的时间。
*   自定义存储库（那些公开返回`IEnumerable`s 的方法）更容易设计和实现，但它们需要 UI 和服务的开发人员付出更多的努力。我们还有一个案例，域规则需要使用自定义存储库，因为用于获取结果的[查询对象是](http://www.martinfowler.com/eaaCatalog/queryObject.html)[规范](http://martinfowler.com/apsupp/spec.pdf)，也是通用语言的一部分，我们（法律上）需要授予用于查询的方法是同样用来表示这样的值和谓词。
    但是，在自定义存储库中，我们也经常公开投影方法。

> 还是可以直接进入“域”项目？

这是可能的，但是当您有许多不同（并且非常复杂）的有界上下文要使用时，它就会变得很痛苦。这就是为什么我为表达普遍存在的语言的领域类和服务于应用目的的类使用不同的项目。

> 相反，在 DDD 中，存储库，尤其是与 CQRS 结合使用，可以直接返回投影类型，因为存储库成为非规范化服务，对吧？

是的他们可以。
这就是我们对自定义存储库所做的事情，即使没有 CQRS。此外，即使有一些存储库实现`IQueryable`，我们偶尔也会暴露直接产生投影的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:22:08.677

说“原始形式”的存储库必须只返回相同实体类型的对象有些夸张。例如，人们一直`Count()`在他们的存储库中包含方法或其他计算 - 这甚至在 Evan 的蓝皮书中都有记录。

另一方面，我不确定您所说的“非规范化类型”是什么意思，但如果这是从几个不同实体借用以按原样或合并方式公开其数据或公开单个域实体的部分视图的类型，我倾向于认为它不再是域。事实证明，它们通常用于特定于应用程序的目的，例如生成 Excel 报告或显示统计数据或摘要屏幕。

如果是这种情况，并且出于性能原因，我想直接利用数据库而不是依赖域，我更愿意创建一个单独的项目，在其中放置所有这些“报告”相关逻辑。没关系，如果您仍然将数据访问对象命名为 Repositories 那里（毕竟，它们也是内存中集合的错觉，只是其他类型的集合）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-28T10:45:27.620

*   没有通用存储库。
*   没有 IQueryable。
*   拥有 ICustomerRepository。
*   让您的 CustomerRepository 的特定实现利用底层存储系统的所有花里胡哨。
*   有存储库返回预测。

    公共接口 ICustomerRepository {

    公共 IEnumerable<客户> GetAllCustomer()

    公共 IEnumerable<债务人> GetAllDebtors()

    公共 IEnumerable<CustomerSummary> GetCustomerSummaryByName（字符串名称）

    公共 IEnumerable<CustomerSummary> GetCustomerSummaryById(string id) }

# java - 文字的字符串分配

> ID：15813099
> 
> 赞同：0
> 
> 时间：2013-04-04T13:45:43.217
> 
> 标签：java, string, multithreading, memory-management

另一个[问题](https://stackoverflow.com/questions/11989261/does-concatenating-strings-in-java-always-lead-to-new-strings-being-created-in-m)回答了我如何在编译时评估字符串文字的连接。在我正在处理的一个项目中，我们使用`StringBuffer`. 它只附加文字，所以它让我思考是否会发生类似的事情。

在下面的代码中，缓冲区是否会在编译时附加其内容？当多个线程试图执行此函数时，这将如何表现？

```
 public static String querySomething(int arg){

        StringBuffer buffer = new StringBuffer();
        buffer.append("A quite long query");
        buffer.append("that doesn't fit in one line");
        buffer.append("...");

  } 
```

将 定义为常量不是更好吗，`String`因为它是线程安全的，而且我们知道它可以在编译时与加号运算符连接起来。就像是：

```
 private final static REALLY_LONG_QUERY1 = "A quite long query that"
                                            +"doesn't fit in one line"
                                            +"..."; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:49:16.293

> 将 String 定义为常量不是更好吗...

基本上，是的。

> ...因为它是线程安全的，而且我们知道它可以在编译时与加号运算符连接起来。

这些断言都是正确的。

但是，您无需担心带有`StringBuffer`.

*   该类`StringBuffer`是线程安全的。
*   如果`StringBuffer`实例仅对一个线程可见（例如，调用声明和使用实例的方法的线程），则实例是*线程受限*的，不需要是线程安全的数据结构。（你可以`StringBuilder`改用......）

使用文字连接的版本的主要优点`+`是它在运行时花费零时间，并且不会导致对象分配……除了一个 String 对象，它表示在加载类时分配的连接字符串常量。

* * *

事实上，在人们明确使用或“优化”字符串连接*的许多地方*，它要么没有效果，要么实际上使代码变慢：`StringBuilder``StringBuffer`

*   正如您所指出的，Java 编译器在编译器时评估文字的串联（使用`+`），但它不能为显式`StringBuilder.append`调用做同样的事情。

*   此外，Java 编译器通常会将`+`表达式中的非常量字符串连接（使用 ）转换为使用 的等效代码`StringBuilder`。

唯一值得`StringBuilder`显式使用的情况是当刺构建跨越多个语句时；例如因为你在一个循环中连接东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:53:59.030

我更喜欢第二种解决方案（仅使用`+`运算符）。

为什么？因为：

*   更具可读性
*   更多功能（面向函数式编程，当今时尚和高效）避免无用（临时）局部变量，尤其是可变变量（如`buffer`is）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:48:30.663

> 在下面的代码中，缓冲区是否会在编译时附加其内容？

是的。

> 当多个线程试图执行此函数时，这将如何表现？

没问题，因为每个线程都会使用它自己的`StringBuffer`（它在方法中声明）。

> 将 String 定义为常量不是更好吗？

是的，这里会更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:54:24.233

当您想要构建一个在编译时不知道实际大小的字符串时，StringBuffer 更适合，例如：

```
public static String querySomething(int arg) {
    StringBuffer buffer = new StringBuffer();
    while (...) {
       buffer.Append(someStuff());
    }
} 
```

在您的情况下，常数更合适。

# r - 控制R中栅格值的图例和颜色？

> ID：15813101
> 
> 赞同：8
> 
> 时间：2013-04-04T13:45:48.690
> 
> 标签：r, scale, legend, raster, colorbar

我正在尝试将 ESRI Grid 绘制为表面的光栅图像。我已经想出了如何制作情节，但不知道如何控制 R 的色阶。

```
# open necessary libraries
library("raster")
library("rgdal")
library("ncdf")

# goal: select an ESRI Grid ASCII file and plot it as an image.
infile <- file.choose("Results")
r <- raster(infile)

# read in metadata from ESRI output file, split up into relevant variables
info <- read.table(infile, nrows=6) 
NCOLS <- info[1,2]
NROWS <- info[2,2]
XLLCORNER <- info[3,2]
YLLCORNER <- info[4,2]
CELLSIZE <- info[5,2]
NODATA_VALUE <- info[6,2]
XURCORNER <- XLLCORNER+(NCOLS-1)*CELLSIZE
YURCORNER <- YLLCORNER+(NROWS-1)*CELLSIZE

# plot output data - whole model domain
pal <- colorRampPalette(c("purple","blue","cyan","green","yellow","red"))
par(mar = c(5,5,2,4))  # margins for each plot, with room for colorbars
par(pin=c(5,5))  # set size of plots (inches)
par(xaxs="i", yaxs="i")  # set up axes to fit data plotted
plot(r, xlim=c(XLLCORNER, XURCORNER), ylim=c(YLLCORNER, YURCORNER), ylab='UTM Zone 16 N Northing [m]', xlab='UTM Zone 16 N Easting [m]', col = pal(50)) 
```

“infile”的一个例子是这样的：

```
NCOLS        262  
NROWS        257  
XLLCORNER     304055.000  
YLLCORNER    4792625.000  
CELLSIZE         10.000  
NODATA_VALUE    -9999.000  
42.4 42.6 42.2 0 42.2 42.8 40.5 40.5 42.5 42.5 42.5 42.9 43.0 ...  
42.5 42.5 42.5 0 0 43.3 42.7 43.0 40.5 42.5 42.5 42.4 41.9 ...  
42.2 42.7 41.9 42.9 0 0 43.7 44.0 42.4 42.5 42.5 43.3 43.2 ...  
42.5 42.5 42.5 42.5 0 0 41.9 40.5 42.4 42.5 42.4 42.4 40.5 ...  
41.9 42.9 40.5 43.3 40.5 0 41.9 42.8 42.4 42.4 42.5 42.5 42.5 ...  
... 
```

问题是数据中的 0 值使颜色轴超出了对我有用的范围。见下文：

![在此处输入图像描述](https://i.stack.imgur.com/OSdE0.png)

基本上，我想告诉 R 将颜色轴从 25-45 拉伸，而不是 0-50。我知道在 Matlab 中我会使用命令[caxis](http://www.mathworks.com/help/matlab/ref/caxis.html)。R有类似的东西吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-01-10T13:19:42.897

我使用数据集“volcano”来生成栅格对象，并使代码可重现。

Ope 选项是对类中的栅格值进行离散化，然后，您可以控制每个类中值的范围。下面两个例子：

1-**情节**。

```
library(raster)
library(RColorBrewer)

r = raster(volcano) #raster object

cuts=c(100,150,160,170,180,190,200) #set breaks
pal <- colorRampPalette(c("white","black"))

plot(r, breaks=cuts, col = pal(7)) #plot with defined breaks 
```

![在此处输入图像描述](https://i.stack.imgur.com/zt8q9.jpg)

2- **ggplot2**

```
library(ggplot2)
library(raster)
library(RColorBrewer)

r = raster(volcano) #raster object
#preparing raster object to plot with geom_tile in ggplot2
r_points = rasterToPoints(r)
r_df = data.frame(r_points)
head(r_df) #breaks will be set to column "layer"
r_df$cuts=cut(r_df$layer,breaks=c(100,150,160,170,180,190,200)) #set breaks

ggplot(data=r_df) + 
  geom_tile(aes(x=x,y=y,fill=cuts)) + 
  scale_fill_brewer("Legend_title",type = "seq", palette = "Greys") +
  coord_equal() +
  theme_bw() +
  theme(panel.grid.major = element_blank()) +
  xlab("Longitude") + ylab("Latitude") 
```

![在此处输入图像描述](https://i.stack.imgur.com/anr3Y.jpg)

# c# - 如何在javascript中获取标签内部html

> ID：15813104
> 
> 赞同：-6
> 
> 时间：2013-04-04T13:45:54.543
> 
> 标签：c#, javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:47:59.863

您可能希望将一个 ID 绑定到您的锚标签并像这样调用它；

**HTML**

```
<a href="#" id="myAtag">Current text</a> 
```

**JavaScript**

```
var a_tag_1 = document.getElementById('myAtag');

var a_tag_html = a_tag_1.innerHTML; 
```

您“可以”调用所有 a-tag，但强烈建议您使用 ID 缩小范围，或者先选择父级，然后在其中查找所有 a-tag。当你这样做时，你可以使用；

```
document.getElementsByTagName('a');
//or
my_var_element.getElementBytagName('a'); 
```

# maven - 如何否定 Maven 中的属性？

> ID：15813105
> 
> 赞同：2
> 
> 时间：2013-04-04T13:45:58.343
> 
> 标签：maven, plugins, boolean, maven-3

我在配置文件中定义了一个属性：

> <use.mysql.db>真</use.mysql.db>

有没有办法可以在我的一次执行的“<skip>”部分中指定此属性的反转？

我想说：

> <skip>!${use.mysql.db}</skip>

# ios - 关闭另一个视图后 UITableView 滚动内容大小不正确

> ID：15813109
> 
> 赞同：10
> 
> 时间：2013-04-04T13:46:10.190
> 
> 标签：ios, objective-c, iphone, uitableview, cocoa-touch

所以我有一个`UITableViewController`启动另一个`tableVC`，它会在解散时更改原始单元格的数量。

解雇后，尽管返回了正确的单元格高度（和标题高度）以及更新的行数（使得滚动内容很大），但滚动视图仅在滚动时反弹。看了`contentSize`表卷轴的属性，`contentSize`不正确，和之前一样。

最初加载原件`tableVC`时，我没有问题。如果我有大量单元格，表格将按预期滚动。只有在解雇`tableVC`我遇到的问题时。我不确定的一件事是何时调用 reloadData。我这样做如下：

1\. 在介绍中`tableVC`：

```
[[self presentingViewController] dismissViewControllerAnimated:YES completion:nil] 
```

2.在原始表VC中：

```
-(void)viewDidAppear    
{ 
   //tablecell number manipulated
   [table reloadData];

} 
```

有趣的是，如果我旋转到横向并返回到纵向，则 contentSize 设置正确，我可以再次滚动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:01:49.613

添加一个

```
[table setNeedsDisplay]; 
```

另外，您不制作动画是否有特殊原因？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T07:26:06.180

我通过显式重新加载该部分而不使用 reloadData 解决了这个问题。[table reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationAutomatic];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T22:08:14.440

我有一个类似的问题。我正在更改静态 tableView 的行数和部分以响应在子 viewController 中输入的数据，但是当内容更新时，`contentSize`没有，导致滚动问题。

在我的情况下，iOS6 中似乎存在一个错误，`reloadData`它阻止了 tableView 正确计算新大小（这在 iOS7 中运行良好）。我通过在行和部分上调用适当的插入和删除来解决这个问题，如下所述：[UITableView won't reload contentSize](https://stackoverflow.com/questions/15443388/tableview-wont-reload-contentsize/19624088#19624088)。

# java - 带有 xml 映射的 Hibernate 派生属性

> ID：15813118
> 
> 赞同：4
> 
> 时间：2013-04-04T13:46:37.877
> 
> 标签：java, hibernate, pojo

我有一个`Detectable`带有一`Revisions`组的类，它们是 Hibernate 管理的 POJO。我还使用*hbm.xml*文件映射我的实体。当用户进入`Detectable`管理屏幕时，我希望他看到`Detectable`表格中的数据，该表格也将包含最后`Revision`完成的内容。然而，完整的修订集只能访问可检测的详细信息页面。

`Detectable`我的机会是显示最后修订日期，该日期将作为每个实例的属性单独加载。所以我有这样的事情：

**可检测的.hbm.xml**

```
<set name="_Revisions" table="trevision" inverse="true" lazy="true">
    <key>
        <column name="id_detectable" />
    </key>
    <one-to-many class="com.company.model.tasks.Revision" />
</set>

<property name="_LastRevisionDate"
        formula="select max(rev.start_date) from trevision rev where rev.id_detectable = _Id"
        type="date" /> 
```

这不起作用，当休眠尝试执行包含在**公式**中的查询时，我遇到了 SQL 语法错误。我在不同的地方看到可以使用[标准 SQL](https://stackoverflow.com/a/2986354/1199132)或[HQL 访问](http://www.techienjoy.com/hibernate-property-formula-attribute.php)此属性，但我对它们都失败了。是否有可能`Revision`仅按日期顺序实现整个实体（我的意思是最后一次修订）？

汇集你的想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:20:15.600

我终于用这段代码实现了它：

```
<property name="_LastRevisionDate"
        formula="(select MAX(rev.start_date) from trevision rev where rev.id_detectable = id_detectable and rev.status != 'DRAFT')"
        type="date" /> 
```

`id_detectable`我当前的实体键列在哪里。

* * *

**更新**

另一种解决方法是[使用数据库视图](https://stackoverflow.com/a/15918635/1199132)来获取最后修订日期。然后，可以选择将实体映射到该视图而不是原始表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:06:00.063

什么是sql语法错误？您是否尝试用`_Id`替换`id`？

# tags - 你将如何连字符撇号和已经连字符的单词

> ID：15813124
> 
> 赞同：0
> 
> 时间：2013-04-04T13:46:48.143
> 
> 标签：tags, apostrophe

例如，转换连字符名称的约定将 john-michael 变成 #john-michael 吗？

或者带有撇号的名字，O'Leary 会变成#o-leary 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:54:57.400

这真的取决于你。我会保留连字符和撇号。#john-michael 和#l'oreal 您可以查看 tumblr.com .. 他们有一个非常好的帖子标签系统。

# android - 在 android 的列表视图中需要帮助

> ID：15813129
> 
> 赞同：3
> 
> 时间：2013-04-04T13:46:57.287
> 
> 标签：android, android-layout

我是 android 的新手，想在单击图像/按钮（见图：1）后打开列表视图/菜单（见图：2）。我不确定它是列表还是对话框还是其他一些组件。请帮帮我。

![在此处输入图像描述](https://i.stack.imgur.com/n6vOe.png)

![在此处输入图像描述](https://i.stack.imgur.com/mOR34.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:52:41.583

这是**ActionBar 的下拉导航**，您可以查看官方文档：[添加下拉导航](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)。

```
ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
actionBar.setListNavigationCallbacks(mSpinnerAdapter, mNavigationCallback);
// It takes your SpinnerAdapter and ActionBar.OnNavigationListener. 
```

检查示例：

1.  [在Android中将下拉导航添加到操作栏](http://wptrafficanalyzer.in/blog/adding-drop-down-navigation-to-action-bar-in-android/)
2.  [样式 Android 上的适配器第 1 部分](http://blog.stylingandroid.com/archives/1679)

## 更新：

为了为较低的 Android 版本提供应用程序兼容性，我建议您包含[actionbarsherlock](http://actionbarsherlock.com/)库，一旦您下载它，您也可以访问许多示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:53:39.513

它的`ActionBar.NAVIGATION_MODE_LIST`

检查此[链接](http://actionbarsherlock.com/) **，因为它适用于所有 Android 操作系统版本**

在有许多样本可获取更多详细信息，请查看这篇[文章](http://developer.android.com/guide/topics/ui/controls/spinner.html)

![在此处输入图像描述](https://i.stack.imgur.com/sZDq8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:51:20.630

It is a Spinner in Android. Please check below link

[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

If you want to implement behavior like GMail, then you need to override getView method of your Spinner Adapter

# android - FFTW 构建安卓

> ID：15813136
> 
> 赞同：0
> 
> 时间：2013-04-04T13:47:20.747
> 
> 标签：android, c++, fftw

我只是按照这个复杂而漂亮的手册

[在android ndk中编译fftw3](https://stackoverflow.com/questions/4201911/compiling-fftw3-in-android-ndk)

我成功构建了 config.h 文件，但在下一步中使用 Android.mk：IAm 堆栈，因为我尝试构建它，控制台说：

```
 12:53:23 **** Incremental Build of configuration Default for project F      ileBroswerActivity ****
 sh "C:\\Users\\Peťulka\\Desktop\\android-ndk-r5b-windows\\android-ndk-r5b\\ndk-build"         all 
Invalid attribute name: 
   package
   /c/Users/Peťulka/Desktop/GUI/FileBroswer/jni/Android.mk:2: /fftw3/project/jni/Android.mk: No such file or directory
       /c/Users/Peťulka/Desktop/GUI/FileBroswer/jni/Android.mk:2: /fftw3/project/jni/Android.mk: No such file or directory
   make.exe: *** No rule to make target `/fftw3/project/jni/Android.mk'. Stop. 
```

12:53:29 构建完成（耗时 6s.316ms）

但我有这个 ANdroid.mk 文件！在这条路上我检查了我的项目 10 次，我不知道问题出在哪里。，

# wpf - UserControl，光标在选项卡导航

> ID：15813144
> 
> 赞同：0
> 
> 时间：2013-04-04T13:47:31.820
> 
> 标签：wpf, user-controls, focus

在我的窗口中有两个`textbox`和我的`usercontrol`.

[![1](https://i.stack.imgur.com/gXAgm.png)](https://i.stack.imgur.com/gXAgm.png)

一旦光标是`TextBox1`. 当我单击 Tab 时，光标在我的 中`UserControl`，但光标保持稳定`TextBox`（就像`|`没有闪烁一样）。当我仅在中单击下一个 Tab 光标时`TextBox2`。如果我将光标从移动`TextBox1`到我的`usercontrol`- 好吧。问题出在我的组件中，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:36:42.467

手动设置

*   `TabIndex``TextBox1`到`1`; _
*   `TabIndex``TextBoxinUserControl`到`2`; _
*   `TabIndex``TextBox2`到_`3`

`

# ios - 绘制视网膜与非视网膜图像

> ID：15813150
> 
> 赞同：0
> 
> 时间：2013-04-04T13:47:47.903
> 
> 标签：ios

UIImage 1：从带有@2x 修饰符的文件加载，大小为 400x400，因此 UIImage 1 将报告其大小为 200x200

**UIImage 2：从没有**@2x 修饰符的文件加载，大小为 400x400，因此 UIImage 2 将报告其大小为 400x400

然后，我从上面创建 2 个图像，将下面的代码应用于每个图像

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(400,400), YES, 1.0);
[image drawInRect:CGRectMake(0, 0, 400, 400)];
UIImage *rescaledI = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

考虑到上述情况，我可以期望两个结果图像的图像质量完全相同吗？（我正在尝试确定将 200x200 视网膜图像绘制到 400x400 非视网膜上下文是否会降低质量，而不是绘制未加载为视网膜图像的相同图像）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:56:47.323

只需返回当前图像的大小。

```
 UIImage *image1 = [UIImage imagedNamed:@"myimage.png"];
    //access width and height like this
    image1.size.width;
    image1.size.height;

UIGraphicsBeginImageContextWithOptions(CGSizeMake(image1.size.width,  image1.size.height), YES, 1.0);
[image drawInRect:CGRectMake(0, 0, image1.size.width, image1.size.height)];
UIImage *rescaledI = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

当然，如果您应该将**image1**替换为您想要获取大小的任何图像。一些 switch 语句或 if 语句应该可以为您解决问题。

永远不要对尺寸/尺寸/位置等进行硬编码。您应该始终通过询问图像的大小来动态提取该信息。然后，您可以更改图像的大小，而不必担心必须在应用程序中找到硬编码的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:57:03.323

图像始终为 400*400 像素：不同之处在于，在视网膜显示器中，400*400 像素覆盖的空间更少，正好是一半（200*200 核心图形点）。如果您不对图像应用任何转换，则将保持完全相同。

您编写的代码按原样呈现图像，因为您正在覆盖设备比例因子并将其设置为始终 1（1 像素到 1 点）。如果您希望图像在 Retina 和非 Retina 设备上覆盖相同数量的屏幕，您应该使用两张图像，一张大两倍。

# c# - 在 C#.NET 中使用 OleDbDataReader 从 Excel 中读取不正确的值

> ID：15813158
> 
> 赞同：1
> 
> 时间：2013-04-04T13:48:00.553
> 
> 标签：c#, visual-studio-2010, excel, automation, nunit

我正在运行一些使用 NUnit 用 C#.NET 编写的测试用例（这是在 Visual Studio 2010 上）。我使用的方法从另一个开发团队提供给我的 Excel .xls (2003) 文件中读取用户和地址数据。当我在不更改 Excel 文件的情况下运行测试时，一切正常。如果我更改Excel 文件中的*某些*值，例如名字或姓氏，或街道地址，它仍然有效。但是，如果我更改邮政编码字段，测试将失败，并且我收到一条错误消息：

> “System.ArgumentException：‘System.DBNull’类型的对象无法转换为‘System.Double’类型”

即使我输入完全相同的值也会发生这种情况。换句话说，如果现有的邮政编码值是“ `11111`”并且我根本不修改文件，那么当我运行它时测试就可以工作。但是，如果我修改该字段并重新键入“ `11111`”，读者会将其视为 NULL 值并引发上述错误。在电子表格的其他行（我没有修改的那些行）中，值返回为“ `11111.0d`”并且一切正常，因此读者似乎正在将这些值作为 Double 读取（我不确定为什么） . 但如果我自己输入值，它就不会这样读。

我读过的一篇文章建议`IMEX=1`在连接字符串中使用以将混合值读取为文本。然而，这并没有奏效。当我添加`IMEX=1`时，我收到了一条`"Could not find installable ISAM"`消息。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:33:10.280

除了在连接字符串中设置 IMEX 模式外，您还可以尝试调整一些 Jet 引擎的注册表设置。

例如，HKEY_LOCAL_MACHINE/Software/Microsoft/Jet/[您的版本]/Engines/Excel/ImportMixedTypes

将此更改为 Text 以使其成为混合类型（例如，文本和数字）的默认导入

HKEY_LOCAL_MACHINE/Software/Microsoft/Jet/[您的版本]/Engines/Excel/TypeGuessRows

将此更改为 0 以强制引擎在选择数据类型之前扫描列中的所有值（否则它只会扫描前 8 行）。

关于“找不到可安装的 ISAM”错误。*可能*是您的 ISAM 驱动程序的路径无效（请参见[此处](http://support.microsoft.com/kb/209805)），但您的连接字符串更有可能出现错误。有关一些正确示例，请参见[此处](http://www.connectionstrings.com/excel)和[此处](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/62ee4978-ca29-48d3-9367-6dd4ab639d2d/)。

# ms-access - .bat 完成后 Control-M 作业未结束

> ID：15813159
> 
> 赞同：0
> 
> 时间：2013-04-04T13:48:08.140
> 
> 标签：ms-access, batch-file, mapped-drive, control-m

我有一个映射网络驱动器的 .bat 文件，运行 MS Access 程序，然后删除映射的驱动器并退出。当我通过 Control-M 运行它时，.bat 运行并完成，但 Control-M 中的工作永远不会结束。我尝试了多种方法来结束文件以向 Control-M 发送退出代码，但似乎没有任何效果。下面是代码：

```
@echo off
net use w: [path]
"C:\Program Files\Microsoft Office\OFFICE11\MSACCESS.EXE" "Y:\MSAccess.mdb"
net use w: /delete 
```

在此代码之后，我尝试了以下命令：
`exit`
`_exit 0`
`timeout /T 10`

无论我尝试什么，Control-M 似乎都不知道工作已经完成。Control-M 的 sysout 也没有显示任何类型的退出代码被发回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:46:48.617

Control-M 可能正在等待在其下启动的所有进程退出，然后再退出作业本身。在您的情况下，当 BAT 结束时，MSACCESS 仍在运行，因此它会阻止 Control-M 作业完成。

如果您有 BAT 等待 MSACCESS 完成，

```
net use w: [path]
start /b /wait "" "C:\Program Files\Microsoft Office\OFFICE11\MSACCESS.EXE" "Y:\MSAccess.mdb"
net use w: /delete 
```

这可能会缓解（至少从理论上）你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:54:35.233

经过更多的测试和调查后，该问题在 .bat 中较早发生。MS Access 数据库从未被打开和运行。因此，由于它永远不会开始，它永远不会结束或发送错误代码。我正在研究为什么 MS Access 数据库现在没有运行，这可能会导致另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T19:38:03.027

我有同样的问题。我通过在 bat 文件末尾添加以下内容解决了我的问题：

```
exit /b %errorlevel% 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T12:49:20.933

对于 Windows 批处理脚本，`exit /b %errorlevel%`请在文件末尾添加。这将有助于发现脚本已正确处理并且控制作业将结束/endnotok。

# android - Android 在添加值的文件夹后获得了另一种风格

> ID：15813168
> 
> 赞同：0
> 
> 时间：2013-04-04T13:48:21.723
> 
> 标签：android, android-layout, styles

我有一个应用程序，需要在不同尺寸的设备上运行

为此，我添加了下一个文件夹：res/values-normal 和 res/values-large。

除了修改了应用程序样式外，一切正常。

例如 Spinner 就像**Model1**并且在添加文件夹之后它变得像**Model2**

[http://postimg.org/image/cf3qa2oqd/](http://postimg.org/image/cf3qa2oqd/)

如果我删除这些文件夹，所有文件夹都会像以前一样返回（**Model1**）。

谢谢，

注意：我无法在此处添加图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:06:45.693

解决方法是：更改Style文件中的Application Theme

```
 <style name="AppBaseTheme" parent="android:Theme.Holo"> 
```

它工作正常。

# android - 从堆栈中删除活动

> ID：15813169
> 
> 赞同：0
> 
> 时间：2013-04-04T13:48:26.667
> 
> 标签：android

我有 2 个活动，通常我打开活动 A，然后打开活动 B。

如果用户单击通知并且应用程序根本没有运行，则 B 首先打开。但是，当用户单击 up/actionbackHome 按钮时，用户应该被带回 A。我通过覆盖 up/actionbarHome 按钮并启动活动 A 并在 B 上调用完成来做到这一点。这工作得很好，就像用户点击他们一样正常退出应用程序。

之后的问题是，当用户从任务管理器中选择此任务时，活动 B 打开。在这种情况下，如何确保活动 A 打开？

**编辑**

所以我认为问题是当我通过通知打开应用程序后存在应用程序时，该应用程序仍在任务管理器中。因此，如果我通过任务管理器进入应用程序，它会以与通知相同的方式启动它。我该如何阻止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:53:09.470

试试下面

清空backstack并返回A

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();

    }

    return super.onKeyDown(keyCode, event);
}

public void onBackPressed() {
    Intent myIntent = new Intent(B.this,A.class);
    myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//clear top of stack.
    startActivity(myIntent);
    finish();
    return;
} 
```

# twitter - twitter jsOAuth 获取请求令牌返回 401 错误

> ID：15813172
> 
> 赞同：0
> 
> 时间：2013-04-04T13:48:36.293
> 
> 标签：twitter, titanium, titanium-mobile, jsoauth

应用程序类型：移动，Titanium SDK：3.0.2.GA，平台和版本：Android 4.0.4，设备：Android Xperia P，

我正在尝试通过 jsOAuth 1.3.6 使用 twitter API。在我获取请求令牌（oAuthApi.fetchAccessToken() 方法）之前，所有 OAuth 舞蹈都很顺利。我总是收到“未经授权”的错误，知道为什么吗？请看下面的代码

```
oAuthApi.fetchRequestToken(function(data) {
                    //authorize
                    var authorizeUi = Ti.UI.createWebView({
                        width : Ti.UI.FILL,
                        height : Ti.UI.FILL,
                        top : 0,
                        left : 0,
                        url : data
                    });
                    authorizeUi.addEventListener('load', function(e) {                            
                        if (authorizeUi.getUrl().indexOf('twitterOauthCallback') > -1) {
                            oAuthApi.fetchAccessToken(function(data) {
                                oAuthApi.saveAccessToken();
                                oAuthApi.setAuthorised(true);
                                var accessToken = oAuthApi.getAccessToken();
                                var accessTokenSecret = oAuthApi.getAccessTokenSecret();

                               ...some other code here

                            }, function(data) {
                                alert('fetchAccessToken unauthorized error ' + data.error);
                            });
                        }
                    });                        

                }, function(data) {
                    alert('fetchRequestToken error');
                }); 
```

这是我的 jsOAuth 初始化：

```
var oauth = OAuth({
        consumerKey : jsonObj.consumerKey,
        consumerSecret : jsonObj.consumerSecret,
        callbackUrl : jsonObj.callbackUrl
    }); 
```

我的回调是

```
http://192.168.1.116:8888/callback/twitterOauthCallback.html 
```

1- 我调用 fetchRequestToken (ok) 2- 我打开用户授权/登录窗口 (ok) 3 - 输入用户名和密码并获取回调 url (ok) 4 - 调用 fetchAccessToken (得到 401 错误)

下面是我的标题：

```
oauth_callback = http://192.168.1.74:8888/callback/twitterOauthCallback.html
oauth_consumer_key = E3xxxxxxxxxxxxxxHfg
oauth_token = J1fxxxxxxxxxxxxxxxxxxxxxxxxxxxx20
oauth_signature_method = HMAC-SHA1
oauth_timestamp = 1365151792
oauth_nonce = 36222C667E353A51
oauth_verifier = 
oauth_version = 1.0 
```

知道可能是什么问题吗？我被封锁了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:24:34.570

Twitter 本周对 oauth 进行了突然且未经宣布的更改：[https ://dev.twitter.com/discussions/16443](https://dev.twitter.com/discussions/16443)

查看标题，问题在于您的`oauth_verifier`值是空的，而现在更改强制执行此值。您将使用回调 URL 作为参数 ( `http://192.168.1.116:8888/callback/twitterOauthCallback.html?oauth_token=xxx&oauth_verifier=xxx`)

# c# - 将 DataTable 转换为 object[,] 的最有效方法是什么？

> ID：15813175
> 
> 赞同：6
> 
> 时间：2013-04-04T13:48:40.870
> 
> 标签：c#, linq, c#-4.0, datatable

我有一堆`DataTables`需要转换为`object[,]`数组（*不是* `object[][]`数组）。就性能而言，最有效的方法是什么？

我知道我可以通过`object[dt.Rows.Count, dt.Columns.Count]`最初构建我的方法来做到这一点，然后遍历行并将每一行解析到数组中的一个位置，但我相当确定还有其他方法，例如使用 Linq 或 System.Data 特定功能，例如`dataRow.ToItemArray()`可能更有效率。

我`DataTables`的大小可变，除了字符串之外，还包含需要适当格式化的日期和数字。

例如，如果我的一个数据表包含

```
ID 名称 日期 值
1 雷切尔 2013 年 1 月 1 日 00:00:00 100.0000
2 约瑟夫 2012 年 3 月 31 日 00:00:00 50.0000
3 莎拉 2/28/2013 00:00:00 75.5000

```

那么我想要一个`object[,]`包含完全相同数据的数组（最好带有标题），但带有格式化的日期和值

```
arr[x,0] = row[x].Field<int>("Id");
arr[x,1] = row[x].Field<string>("Name");
arr[x,2] = row[x].Field<DateTime>("Date").ToString("M/d/yy");
arr[x,3] = row[x].Field<decimal>("Value").ToString("C2"); // Currency format 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T14:36:34.483

基本上我们需要：

1.  分配内存`object[,]`

    我们在这里不能做太多......我们需要确保我们分配一次内存，而不是再次重新分配它。所以很明显我们需要立即创建数组，而不是使用`List.Add(...)`内部重新分配内存块之类的操作。

2.  然后，我们需要将对象从行项复制到多维数组中。`Buffer.BlockCopy`当我们处理对象时，我们不能在这里使用。自然地，我们不能依赖任何`memcpy`类似的行为，因为每个对象的 CLR 都需要复制其引用，或者对值类型执行 unbox->copy in heap->box。所以，最简单的方法就是 for.. for.. style。

因此，看起来大多数性能解决方案都是直观的：

```
public static object[,] Convert(DataTable dt)
{
    var rows = dt.Rows;
    int rowCount = rows.Count;
    int colCount = dt.Columns.Count;
    var result = new object[rowCount, colCount];

    for (int i = 0; i < rowCount; i++)
    {
        var row = rows[i];
        for (int j = 0; j < colCount; j++)
        {
            result[i, j] = row[j];
        }
    }

    return result;
} 
```

# typo3 - TYPO3 Update: cannot find deprecated RTE properties

> ID：15813180
> 
> 赞同：8
> 
> 时间：2013-04-04T13:48:50.623
> 
> 标签：typo3, deprecated, updates, typoscript, rte

I want to update from TYPO3 4.7.5 to TYPO3 4.7.10\. Now I'm in the `Upgrade Wizard` and it says:

> Deprecated RTE properties in Page TSconfig
> 
> The following Page TSconfig RTE properties are deprecated since TYPO3 4.6 and will be removed in TYPO3 6.0.
> 
> Deprecated property Use instead
> disableRightClick contextMenu.disable
> disableContextMenu contextMenu.disable
> hidePStyleItems buttons.formatblock.removeItems
> hideFontFaces buttons.fontstyle.removeItems
> fontFace buttons.fontstyle.addItems
> hideFontSizes buttons.fontsize.removeItems
> classesCharacter buttons.textstyle.tags.span.allowedClasses
> classesParagraph buttons.blockstyle.tags.div.allowedClasses
> classesTable buttons.blockstyle.tags.table.allowedClasses
> classesTD buttons.blockstyle.tags.td.allowedClasses
> classesImage buttons.image.properties.class.allowedClasses
> classesLinks buttons.link.properties.class.allowedClasses
> blindImageOptions buttons.image.options.removeItems
> blindLinkOptions buttons.link.options.removeItems
> defaultLinkTarget buttons.link.properties.target.default
> fontSize buttons.fontsize.addItems
> RTE.default.classesAnchor RTE.default.buttons.link.properties.class.allowedClasses RTE.default.classesAnchor.default.[link-type] RTE.default.buttons.link.[link-type].properties.class.default mainStyleOverride contentCSS mainStyleOverride_add.[key] contentCSS mainStyle_font contentCSS mainStyle_size contentCSS
> mainStyle_color contentCSS mainStyle_bgcolor contentCSS
> inlineStyle.[any-keystring] contentCSS ignoreMainStyleOverride n.a. disableTYPO3Browsers buttons.image.TYPO3Browser.disabled and buttons.link.TYPO3Browser.disabled
> showTagFreeClasses buttons.blockstyle.showTagFreeClasses and buttons.textstyle.showTagFreeClasses
> disablePCexamples buttons.blockstyle.disableStyleOnOptionLabel and buttons.textstyle.disableStyleOnOptionLabel You are currently using some of these properties on 1 pages (including deleted and hidden pages).
> 
> Pages id's: 2
> 
> This wizard cannot update the following properties, some of which are present on those pages:
> 
> Deprecated property fontSize RTE.default.classesAnchor
> RTE.default.classesAnchor.default.[link-type] mainStyleOverride
> mainStyleOverride_add.[key] mainStyle_font mainStyle_size
> mainStyle_color mainStyle_bgcolor inlineStyle.[any-keystring]
> ignoreMainStyleOverride disableTYPO3Browsers showTagFreeClasses
> disablePCexamples
> 
> Therefore, the Page TSconfig column of those pages will need to be updated manually.
> 
> Only page records were searched for deprecated properties. However, such properties can also be used in BE group and BE user records (prepended with page.). These are not searched nor updated by this wizard.
> 
> Page TSconfig may also be included from external files. These are not updated by this wizard. If required, the update will need to be done manually.
> 
> Note also that deprecated properties have been replaced in default configurations provided by htmlArea RTE

I found a page TS config:

```
RTE.classes{
  highlight{
      name = newStyle
      value = color:#636466; font-size:15px;
  } 
  brown{
      name = braun
      value = color:#9A3811;
  }
}

RTE.default{
  ignoreMainStyleOverride = 1 
  useCSS = 1
  showTagFreeClasses = 1
  contentCSS = fileadmin/templates/css/rte.css
  buttons {
    blockstyle.tags.div.allowedClasses := addToList(highlight, brown)
    blockstyle.tags.p.allowedClasses := addToList(highlight, brown)
    textstyle.tags.span.allowedClasses := addToList(highlight, brown)
  }
  proc.allowedClasses := addToList(highlight, brown)
} 
```

I changed it to

```
RTE.classes{
  highlight{
      name = newStyle
      value = color:#636466; font-size:15px;
  } 
  brown{
      name = braun
      value = color:#9A3811;
  }
}

RTE.default{
  useCSS = 1
  contentCSS = fileadmin/templates/css/rte.css
  buttons {
    blockstyle.showTagFreeClasses = 1
    blockstyle.tags.div.allowedClasses := addToList(highlight, brown)
    blockstyle.tags.p.allowedClasses := addToList(highlight, brown)
    textstyle.showTagFreeClasses = 1
    textstyle.tags.span.allowedClasses := addToList(highlight, brown)
  }
  proc.allowedClasses := addToList(highlight, brown)
} 
```

but the `Upgrade Wizard` still complains. I looked in the main TS, user TS, user group TS, export of the database but there is none of the mentioned properties used. My added style also doesn't work anymore ...

Where are the deprecated properties? How can I find that out?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T15:16:22.070

我建议在数据库页面表中进行手动搜索以查找具有 TSconfig 的页面：

```
SELECT uid, TSconfig FROM pages WHERE TSconfig!=''; 
```

如果这不会给你想要的结果，那么 grep 在你的扩展中设置：

```
find typo3conf/ext/ -type f -name ext_*\.php -exec egrep -H -n '(addPageTSConfig|addUserTSConfig)' {} \; 
```

RTE 的 TSconfig 弃用处理在以下位置完成： `tx_rtehtmlarea_deprecatedRteProperties::getPagesWithDeprecatedRteProperties()`

这个类可以在`typo3/sysext/rtehtmlarea/hooks/install/class.tx_rtehtmlarea_deprecatedrteproperties.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T07:16:56.193

升级向导正在使用 SQL 语句

```
SELECT uid, TSconfig FROM pages WHERE (TSConfig LIKE BINARY "%RTE.%showTagFreeClasses%" AND TSConfig NOT LIKE BINARY "%RTE.%showTagFreeClassess%") 
```

所以即使将 showTagFreeClasses 更改为 buttons.blockstyle.showTagFreeClasses 也无济于事。只需从 RTE 配置中删除，一切都很好。

# c# - UserControl 中的“找不到类型或命名空间名称”

> ID：15813184
> 
> 赞同：1
> 
> 时间：2013-04-04T13:49:15.433
> 
> 标签：c#, user-controls, controls

我想在 UserControl 中执行以下操作：

```
foreach(Control c in this.Controls)
{
   if(c is CheckBox)
   {
       // Do stuff here
   }
} 
```

但我得到了错误：

> 错误 1 ​​找不到类型或命名空间名称“Control”（是否缺少 using 指令或程序集引用？）
> 错误 2 找不到类型或命名空间名称“CheckBox”（是否缺少 using 指令或装配参考？）

谢谢你的指导。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T13:51:45.177

您忘记在指令中包含`System.Web.UI.WebControls`或`System.Windows.Forms`（取决于您正在开发的应用程序的类型） 。`using`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T13:52:26.797

您应该添加 System.Windows.Forms、System.Web.UI.WebControls 或 System.Windows.Controls，具体取决于您使用的技术

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T13:51:55.617

您需要 为类添加[`System.Windows.Forms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.aspx)包含*System.Windows.Forms.dll*[`Control`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)的命名空间。

您还需要为类添加[`System.Web.UI.WebControls`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.aspx)包含*System.Web.dll*[`Checkbox`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.aspx)的命名空间。

像;

```
using System.Windows.Forms;
using System.Web.UI.WebControls; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T13:51:54.550

您需要添加 System.Windows.Forms.dll。

它位于`System.Windows.Forms.dll`System.Windows.Forms 命名空间中。

# ruby - Ruby OptionParser: 2 options, 1 argument

> ID：15813186
> 
> 赞同：2
> 
> 时间：2013-04-04T13:49:18.763
> 
> 标签：ruby, parameters, optionparser

I am attempting to use OptionParser to read in multiple options and have them all act on a single filename. `Ex: myprogram.rb -a -b file.txt` How can I make 2 options share a mandatory argument while also allowing things like `-h` to run without parameters? Currently the above line just makes `-a` take `-b` as its parameter.

```
optionparser.on("-a FILENAME", "Do this") do |a|
  puts a
end
optionparser.on("-b FILENAME", "Do that") do |b|
  puts b
end 
```

**EDIT:**

What it is doing:

```
myprogram.rb -a -b file.txt
=> -b 
```

What I need it to do:

```
myprogram.rb -a -b file.txt
=> file.txt
=> file.txt 
```

**Note:**

These commands should be able to run independently as well as concurrently similar to `ls -a ..`, `ls -l ..` and `ls -a -l ..` However NEITHER command should work if there is no filename given. Ideally this solution should work with any *n* number of options.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:10:03.430

我现在拥有的是：

```
alpha=false
beta=false
optionparser.on("-a", "Do this") do |a|
  alpha = a
end
optionparser.on("-b", "Do that") do |b|
  beta = b
end
if alpha
  #do something with ARGV[0]
end
if beta
  #do something with ARGV[0]
end 
```

这段代码假定在选择选项后，命令行上唯一剩下的应该是文件名。我觉得有一种更优雅的方法可以做到这一点，它考虑到其他可能使命令行混乱的事情，并允许对它们进行纠错。

# css - Geany 中的 *.less 语法高亮显示

> ID：15813193
> 
> 赞同：3
> 
> 时间：2013-04-04T13:49:42.390
> 
> 标签：css, less, syntax-highlighting, geany

有没有办法在 Geany 中为 *.less 文件添加语法高亮？我发现使用 *.css 语法高亮显示，在互联网的某个地方建议对我来说是不够的，事实上它使任何更复杂的 *.less 样式表变得一团糟。

我真的很喜欢 Geany，所以更改 IDE 不是一种选择。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:41:55.097

我建议您编写自己的突出显示。

在这种情况下，您应该编辑 file `filetype_extensions.conf`，创建一个文件`filetype.less`（参见其他文件类型的示例，最好是那些类似于 .less 的文件类型 - 类似 .css ）并可能使用`filetype.conf`.

另一方面，如果您从不使用 .css 文件，您可以编辑相应的配置文件来设置您喜欢的突出显示。

如果这还不够，您可能已经使用了另一个编辑器（为 .less 文件设计了突出显示），查看突出显示在那里是如何组织的，然后用 geany 重现它。

这可能是过于复杂的解决方案，尽管我不坚持这是唯一的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-28T13:03:02.303

在 Geany 菜单上：工具 -> 配置文件 -> filetype_extensions.conf

改变：

```
CSS=*.css; 
```

和：

```
CSS=*.css;*.scss;*.less; 
```

并且您的 *.less 文件将突出显示足以开始工作

# mongodb - MongoDB中的分片

> ID：15813194
> 
> 赞同：1
> 
> 时间：2013-04-04T13:49:42.893
> 
> 标签：mongodb, sharding

我尝试在 MongoDB 中测试分片。例如，我使用 host1.com 和 host2.com 代替真实的服务器名称。

所以我在 host1.com 创建了配置服务器：

```
mongod --dbpath /path/to/configdb/ --configsvr 
```

`mongos`在同一台机器上启动：

```
mongos --configdb host1.com --port 27020 
```

并从`mongod`两台机器（host1.com 和 host2.com）开始：

```
mongod --dbpath /path/to/test_shard_db/ --shardsvr 
```

我添加了分片，使用分片键 {'name': 1} 为数据库`test`和集合启用分片`test`（集合只有此字段并`_id`用于测试），如教程中所述。但在所有这些操作之后，我的所有数据都只写入一个分片，这是数据库的主要分片。

这是配置：

分片状态：

```
mongos> db.printShardingStatus()
--- Sharding Status --- 
  sharding version: { "_id" : 1, "version" : 3 }
  shards:
    {  "_id" : "shard0000",  "host" : "host1.com:27018",  "maxSize" : NumberLong(1) }
    {  "_id" : "shard0001",  "host" : "host2.com:27018",  "maxSize" : NumberLong(10) }
  databases:
        ...
    {  "_id" : "test",  "partitioned" : true,  "primary" : "shard0000" }
        test.test chunks:
                shard0001   1
            { "name" : { $minKey : 1 } } -->> { "name" : { $maxKey : 1 } } on : shard0001 Timestamp(1000, 0) 
```

收藏统计：

```
mongos> db.printCollectionStats()
test
{
    "sharded" : false,
    "primary" : "shard0000",
    "size" : 203535788,
    ...
} 
```

平衡器状态：

```
mongos> sh.isBalancerRunning()
true 
```

那么，为什么我添加了超过 1 兆字节的数据，但集合中的所有数据都只驻留在一个分片中呢？为什么要给`db.printCollectionStats()`我看那个`test`数据库`"sharded" : false`。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:06:24.607

默认块大小为 64MB，因此在发生拆分之前您有增长空间。您可以事先自己拆分分片键范围，这可以让写入从一开始就进入多个分片。有关更多信息，请参阅[MongoDB 拆分块文档](http://docs.mongodb.org/manual/tutorial/manage-chunks-in-sharded-cluster/#split-chunks)。

关于 chunk size 和 maxSize 的区别：

maxSize 将限制给定分片上的数据量。当达到时，平衡器将寻找将块移动到未达到 maxSize 的分片。块是文档的集合，它们都属于分片键范围的一部分。MongoDB 平衡器将在块级别在分片之间移动数据以进行平衡。当一个块接近 maxSize 值时，它将被分成 2 个，这可能会导致移动。

# ipad - 无需手动连接设备即可在 iOS 中部署设备

> ID：15813196
> 
> 赞同：1
> 
> 时间：2013-04-04T13:49:47.213
> 
> 标签：ipad, ios5, xcode4.3

我正在使用目标 C 中的 Xcode 和 SUP 2.1.3 作为后端在 iOS 本机应用程序中工作。我已经通过将我的应用程序连接到 mac 机器在 iPAD 中部署了我的应用程序。现在我想知道，如果我可以在没有的情况下将我的应用程序部署到 iPAD将 iPAD 连接到 mac 机器，即通过将任何文件传输到 iPAD。？或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:33:46.170

# 目前，没有支持的方式来执行此操作

在 Xcode 4 的早期版本中曾经有过。然后苹果把它杀了——因为它太有缺陷了。

我和你一样，经常希望他们能把它带回来，这样那些使用它的人就不必一直使用电缆。

## 特设除外

编辑：我现在更好地理解了这个问题——你不想像在调试器和诸如此类的东西中那样使用 iPad 进行开发。您希望您的朋友能够在他的设备上运行您的苹果。知道了。**谷歌`iOS ad hoc`**

# vb.net - ASP.NET (VB.NET 4.5) 调用异步 WCF 方法

> ID：15813197
> 
> 赞同：0
> 
> 时间：2013-04-04T13:49:49.123
> 
> 标签：vb.net, wcf, asynchronous, .net-4.5

我已经阅读了好几天，我不太清楚我应该在这里做什么。我实际上是一名 C# 开发人员，使用 VB.NET 进行编程有时会让人有些困惑。除此之外，我正在尝试在我在这里创建的新项目中实现来自 WCF 的异步调用。我已经尝试了几种不同的结果，但我想确保我所做的事情是正确的。

根据我的阅读，您永远不应该在异步方法中返回 void，因此我正在尽最大努力避免它。除了所有这些，我想我只是想知道这是否是构建此页面的有效方法。在我构建它时，它将从 WCF 调用不止一种方法。

```
Public Class _DefaultReservation
Inherits System.Web.UI.Page

Dim wcfReservation As WCFReservation.WDReservationClient

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    SetupPage()

End Sub

Private Async Sub SetupPage()

    wcfReservation = DirectCast(Master, LoggedInMaster).wcfReservation

    Dim resData As String = Await wcfReservation.GetDataAsync(123)
    Response.Write(resData)

End Sub

End Class 
```

我想令人困惑的是，如果我将该代码放在异步函数中并返回任务，我也必须将 page_load 处理程序标记为异步。这样做似乎不对？通过这样做，似乎异步函数正在调用异步函数。但是我在这里做的方式是，我的异步函数返回 void，这应该避免。如果需要，我也可以发布另一种方式的示例。谢谢！！

编辑：这更好用吗？

```
Imports System.Threading.Tasks 
```

公共类 _DefaultReservation 继承 System.Web.UI.Page

```
Dim wcfReservation As WCFReservation.WDReservationClient

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    SetupPage()

End Sub

Private Async Sub SetupPage()

    wcfReservation = DirectCast(Master, LoggedInMaster).wcfReservation

    Dim getDataResult = Await GetDataAsync()
    Response.Write(getDataResult)

End Sub

Private Function GetDataAsync() As Task(Of String)

    Return wcfReservation.GetDataAsync(123)

End Function 
```

结束类

编辑 3：

```
Imports System.Threading.Tasks 
```

公共类 _DefaultReservation 继承 System.Web.UI.Page

```
Dim wcfReservation As WCFReservation.WDReservationClient

Protected Async Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    wcfReservation = DirectCast(Master, LoggedInMaster).wcfReservation

    Dim result As String = Await wcfReservation.GetDataAsync(1234)
    Response.Write(result)

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:13:48.063

确实应该避免`async void`。本指南的例外情况是您有`async`事件处理程序。

比如`Page_Load`。

有关此指南的更多信息，请参阅我的 MSDN 文章“[异步编程最佳实践”](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)。

> 这样做似乎不对？通过这样做，似乎异步函数正在调用异步函数。

这是完全正确的。异步代码将通过您的代码库“增长”。正确的解决方案是制作`SetupPage`一个`Task`-returning 函数并将`await`其放入`Page_Load`（这是一个`async void`/Sub）。

**编辑：**

```
Imports System.Threading.Tasks

Public Class _DefaultReservation Inherits System.Web.UI.Page

  Dim wcfReservation As WCFReservation.WDReservationClient

  Protected Async Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim getDataResult = Await GetDataAsync()
    Response.Write(getDataResult)
  End Sub

  Public Function GetDataAsync() As Task(Of String)
    wcfReservation = DirectCast(Master, LoggedInMaster).wcfReservation
    Return wcfReservation.GetDataAsync(123)
  End Function

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:14:25.977

幸运的是，我昨天刚刚[发布了关于 Async Sub的信息。](http://www.thinqlinq.com/Post.aspx/Title/Beware-of-Async-Sub-or-Void)长话短说，在您的情况下，如果您使用 Async Sub，一旦遇到等待，控制就会恢复到调用方法。因此，您的 page_Load 处理程序将在 SetupPage 完成之前结束。如果您想让 Page_Load 等到 SetupPage 异步完成，您需要将 SetupPage 更改为返回 Task 的函数，然后将 Page_Load 中的 Await SetupPage（导致 Page_Load）更改为 Async。

Async Sub 在事件处理程序上有效。[Lucian 在他最近的Async Patterns 帖子](http://blogs.msdn.com/b/lucian/archive/2013/02/18/talk-the-new-async-design-patterns.aspx)中详细讨论了这一点。您可能还想查看去年[ASP.Net Conf 的 Async 演讲，了解有关将 Async 与 ASP.Net/WCF 结合使用的特殊注意事项。](http://channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET)

# java - JButton table java

> ID：15813198
> 
> 赞同：1
> 
> 时间：2013-04-04T13:49:50.903
> 
> 标签：java, swing, layout, jbutton

I am working with Swing and I created a JFrame in which I put 9 buttons. But I need to access quickly to these buttons, so I would like to create a table of all my JButtons, where I'll be able to access rapidly the buttons. But I dont find the syntax to declare it...

Can you help me ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:57:02.583

您可以使用[MiG Layout](http://www.miglayout.com/)轻松地将所有项目放置在 JFrame 中（不仅仅是放置按钮）。它使您的项目的放置更容易，代码更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:51:58.847

最简单的方法是使用 a`GridLayout`并将所有按钮添加到该容器中。

![网格表演示](https://i.stack.imgur.com/oERtU.png)

```
public class GridDemo {

    public void showUI() {
        JFrame frame = new JFrame("Grid \"Table\" Demo");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLayout(new GridLayout(0, 3));

        for (int i=0; i < 9; i++) {
            frame.add(new JButton("Button " + (i + 1)));
        }

        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                GridDemo gridDemo = new GridDemo();
                gridDemo.showUI();
            }
        });
    }
} 
```

# ruby-on-rails - autotest-growl not reporting any failures or errors

> ID：15813200
> 
> 赞同：0
> 
> 时间：2013-04-04T13:49:54.170
> 
> 标签：ruby-on-rails, autotest, growl

I have autotest set up and it's running fine and reporting errors correctly, but the growl notification always ignores any failures and errors, which makes it completely useless..

```
autotest -f
...
==============================================================================
pass: 2,  fail: 0,  error: 1
total: 3 tests with 173 assertions in 17.747792 seconds
============================================================================== 
```

But the growl notifications never report any errors:

```
TRUNK: All unit tests passed.
173 assertions in 3 tests 
```

Here are my gems:

```
autotest-fsevent (0.2.8)
autotest-growl (0.2.16)
autotest-rails (4.1.2)
growl_notify (0.0.3)
redgreen (1.2.2)
ZenTest (4.9.0) 
```

.autotest

```
require "autotest/fsevent"
require "autotest/growl"
require "redgreen/autotest"
... 
```

Other stuff

```
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
Rails 2.3.14
OS X 10.8.2
Growl 2.0.1 
```

Help!

# java - 如何将 AST 转换为 JDT Java 模型

> ID：15813202
> 
> 赞同：2
> 
> 时间：2013-04-04T13:50:03.400
> 
> 标签：java, eclipse, eclipse-jdt, abstract-syntax-tree

我正在为我的插件编写单元测试，该插件使用来自 JDT 的 IType 和 IMethod 接口。要编写单元测试，我需要实例化这样的接口。[这个问题](https://stackoverflow.com/questions/12026309/junit-test-for-jdt-core-java-models)的答案 显示了如何创建 AST 模型，但我不知道如何将其转换为 Java 模型？

我的代码如下所示：

```
String source = 

  "package com.test\n" +
  "\n" +
  "import com.test.something;" + 
  "\n" +
  "public class Class{\n" +
  "int sum(int a, int b)\n" +
  "}\n";

ASTParser parser = ASTParser.newParser(AST.JLS4);
parser.setSource(source.toCharArray());
CompilationUnit unit = (CompilationUnit) parser.createAST(null); 
```

所以我有一个 的实例`CompilationUnit`，但我需要一个 ICompilationUInit 的实例，所以我可以访问`IMethod`和`IType`对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:55:02.873

这是不可能的。 `ICompilationUnit`s 是 java 模型的一部分，这意味着它是某个 Java 项目的一部分，并且具有完整的类路径、包、包根等。您所做的只是创建一些未连接的文本的解析树到任何java项目。

如果您可以更具体地了解您的目标是什么，那么您可能并不真正需要任何 IType 和 IMethod 实例。

或者，如果您确实需要这些类型的实例，那么您将需要生成`IProject`s，为其添加 java 特性，然后用文件填充它。最好的办法是看看 JDT 测试基础设施是如何工作的。

看看这个文件：[https ://github.com/eclipse/eclipse.jdt.core/blob/master/org.eclipse.jdt.core.tests.builder/src/org/eclipse/jdt/core/tests /builder/TestingEnvironment.java](https://github.com/eclipse/eclipse.jdt.core/blob/master/org.eclipse.jdt.core.tests.builder/src/org/eclipse/jdt/core/tests/builder/TestingEnvironment.java)

以及如何在整个测试框架中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:00:58.990

`ICompilationUnit`您可以使用*AST 访问者*模式访问*方法声明*节点和*类型声明*节点并获取`IMethod`和对象，而不是获取实例，`IType`如下所示：

```
compilationUnit.accept(new ASTVisitor() {

    public boolean visit(MethodDeclaration node) {                                                  
        IMethod iMethod = (IMethod) node.resolveBinding().getJavaElement();                                             
        return true;
    }

    public boolean visit(TypeDeclaration node) {                                                   
        IType iType = (IType) node.resolveBinding().getJavaElement();                                                   
        return true;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-19T02:04:17.753

根据[https://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html](https://www.eclipse.org/articles/article.php?file=Article-JavaCodeManipulation_AST/index.html)这可以通过`ASTRewrite`. 我自己还没有尝试过，但它看起来很复杂。

# c++ - 错误：ISO C++ 禁止声明没有类型的“ref”

> ID：15813209
> 
> 赞同：0
> 
> 时间：2013-04-04T13:50:41.597
> 
> 标签：c++, compiler-errors, vmime

我遇到了这个错误。代码如下：我已经在我的代码中集成了 vmime 库。现在我需要根据要求在此处实现具有特定超时条目 30 秒的超时处理程序，以便实现这部分代码。

```
class myTimeoutHandler : public vmime :: net :: timeoutHandler {
    public:
     bool isTimeOut()
    {
        return(getTime()>=m_last + 30);
    }
    void resetTimeOut()
    {
        m_last = getTime();
    }
     bool handleTimeOut()
    {
        logMsg(DEBUG,2,"Connection Timed Out!");
        return true;
    }
private:

 const unsigned int getTime() const

 {
    return vmime::platform::getHandler()->getUnixTime();
 }
unsigned int m_last;
};

class myTimeoutHandlerFactory : public vmime::net::timeoutHandlerFactory
{
    public:
        ref <timeoutHandler> create ()
        {
            return vmime::create <myTimeoutHandler>();
        }
}; 
```

我尝试用 vmime::ref 代替 ref ，它给出了新的错误，

```
Svr.h:158: error: 'timeoutHandler' was not declared in this scope
Svr.h:158: error: template argument 1 is invalid 
```

有人可以帮忙吗。谢谢

编辑：

我正在像这样在 my.C 文件中调用这部分代码

```
tr->setTimeoutHandlerFactory(vmime::create <myTimeoutHandlerFactory>()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:56:31.993

看起来你没有一个叫做的类型，`timeoutHandler`但是你有一个叫做`myTimeoutHandler`的。也许你的意思是：

```
vmime::ref<myTimeoutHandler> 
```

或者，也许您想要`timeoutHandler`在命名空间中定义`vmime::net`：

```
vmime::ref<vmime::net::timeoutHandler> 
```

# java - Eclipse Data Tools Project - SQL Query Parser

> ID：15813213
> 
> 赞同：6
> 
> 时间：2013-04-04T13:50:50.550
> 
> 标签：java, sql, eclipse, parsing

Just recently discovered the SQL Query Parser classes in the DTP project, and it looks like a great (and unique) project.

My problem is that I need to analyze and see if I can merge some pretty hairy SQL fragments that are used in a big system. I need a smart and capable parser so I can perform an accurate analysis and determine if I can join some of these fragments together to improve performance. I've already figured the analysis I need to perform; however, the parser as-is is not able to parse these fragments, because they use specific db2 OLAP functions (`over()`, `partition by`, etc.) so I need to include the db2 plugins to my code.

How is this done? I haven't been able to find the classes (`org.eclipse.datatools.sqltools.parsers.sql.query.db2.*`) anywhere, and I also have no idea how to register them (I'm trying to do it manually, but of course it cannot find the appropriate class.)

This is what I'm currently doing, which I know is wrong, but I haven't found documentation about it:

```
SQLQueryParserManagerProvider provider = SQLQueryParserManagerProvider
        .getInstance();

provider.registerParserManager(
        "org.eclipse.datatools.sqltools.parsers.sql.query.db2",
        "DB2 UDB", null, null);

SQLQueryParserManager parserManager = SQLQueryParserManagerProvider
        .getInstance().getParserManager("DB2 UDB", null); 
```

**Can you please point out how to get the adequate parser for parsing DB2?**

*Edit*: Probably the right question is, how can I make sure the db2 specific provider is correctly registered? what's the right class name?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:43:24.917

签出名为 SQLWorkBench/J 源的项目。它们具有特定于 db 的 SQL 解析功能。

# java - 如何支持 JavaFX 2.2 中的辅助技术？

> ID：15813216
> 
> 赞同：3
> 
> 时间：2013-04-04T13:51:00.503
> 
> 标签：java, javafx, javafx-2, accessibility, java-access-bridge

需要通过 Java Access Bridge连接到[JAWS](http://www.freedomscientific.com/about/about.asp)和[NVDA 。](http://www.nvda-project.org/)据我了解，JavaFX 中不支持辅助技术（与 Swing 不同）。

我找到了名为[fxaccessible](http://code.google.com/p/fxaccessible/)的项目，但它不太适合我的情况。

如何在 JavaFX 程序中启用对辅助技术的支持？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:44:57.703

至少有一些控件具有[可访问性相关实现的源代码](http://hg.openjdk.java.net/openjfx/8/master/rt/file/b1da897ab209/javafx-ui-controls/src/com/sun/javafx/scene/control/accessible/)。

绝大多数 JavaFX 代码都是[开源](https://wikis.oracle.com/display/OpenJDK/OpenJFX)的，因此您可以下载源存储库并检查当前构建中可访问性集成的程度，如果您愿意，还可以将您为可访问性支持所做的任何修改贡献回 JavaFX 项目。

* * *

[JavaFX 路线图](http://www.oracle.com/technetwork/java/javafx/overview/roadmap-1446331.html)指出：

> Oracle 致力于在其产品中提供可访问性支持，并且 JavaFX 计划作为 JDK 8 版本的一部分完全兼容可访问性。

所以一种做法是等到 JDK 8。

这是相当冒险的，因为路线图还包括免责声明：

> 它不是提供任何材料、代码或功能的承诺，在做出购买决定时不应依赖它。

我建议将您的问题发布到[openjfx-dev](http://mail.openjdk.java.net/mailman/listinfo/openjfx-dev)邮件列表，Oracle 开发人员和项目管理人员可以在其中就可访问性集成到 JavaFX 的当前状态（以及可能粗略的未来时间表）以及当前使用的技术和策略提供建议代码库中的可访问性实现。

还要检查[javafx 问题跟踪器](https://javafx-jira.kenai.com)以了解与可访问性相关的问题。

* * *

您在问题中引用的 fxaccessible 项目（以及不太适合您的情况）不再适用于任何人，因为它基于过时的 JavaFX 1.x 脚本技术并且它无法与现代一起运行JavaFX 2.x 系统不包括运行 JavaFX 1.x 脚本的能力。

# c# - In Listview if horizontal scrolling is disabled (hidden), how will it scroll down automatically when new line is added?

> ID：15813217
> 
> 赞同：1
> 
> 时间：2013-04-04T13:51:01.017
> 
> 标签：c#, .net, scrollbar, richtextbox, user32

I am using a `listview` in my C# application. Generally if listview's scrollable property is enabled we will use following command to make it scroll down automatically when new line is added:

```
listview1.View = SmallIcon;
listView1.Items[listViewLog.Items.Count - 1].EnsureVisible(); 
```

When we want to disable (hide) listview's horizontal scrolling we totally disable its scrollable property and use following code to only define vertical scrolling:

```
[DllImport("user32.dll")]
static public extern bool ShowScrollBar(System.IntPtr hWnd, int wBar, bool bShow);
private const int SB_HORZ = 0x0;
private const int SB_VERT = 0x1;
private const int SB_BOTH = 0x3;

ShowScrollBar(this.listView1.Handle, (int)SB_VERT, true); 
```

In this situation how can I make listview to scroll down automatically? `listView1.Items[listViewLog.Items.Count - 1].EnsureVisible()` is not useful in this case.

Thanks in advance for your help.

# excel - 使用列号的excel公式范围参考

> ID：15813231
> 
> 赞同：1
> 
> 时间：2013-04-04T13:51:45.580
> 
> 标签：excel, excel-formula

我正在寻找一种在范围引用中使用从 MATCH 获得的列号的方法。我需要计算这一行中 X 的数量，直到一个特定的点。这是一些代码作为我正在尝试工作的示例。

```
=COUNTIF($A$14:MATCH($E$1| $A$13:$V$13)$14|"X") 
```

我需要使用 MATCH （或类似的东西），因为它让我知道我需要计算的列数。用户可能记得也可能不记得清除超过此列数的整行，即使它应该只计算，例如，该行中 X 的 10 列。由于工作表上的其他数据（在匹配中引用为 $E$1）与检查行中的数字匹配，我已经确切知道要计算多少列，所以沿着这些行的一些东西是一个更可取的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:01:50.170

您可以使用`INDEX`with`MATCH`来结束您的范围，例如

`=COUNTIF($A$14:INDEX($14:$14,MATCH($E$1,$A$13:$V$13)),"X")`

因此，例如，如果 MATCH 函数为您提供 10，那将计算 A14:J14 中的“x”

请注意，如果你想要一个精确的 MATCH，你需要零作为 MATCH 函数的第三个参数（我没有包括那个）

# internet-explorer - webkit溢出滚动的IE等效项是什么：触摸

> ID：15813233
> 
> 赞同：7
> 
> 时间：2013-04-04T13:51:48.087
> 
> 标签：internet-explorer, css, webkit, touch

`-webkit-overflow-scrolling:touch`触摸设备属性的 IE 等效 css 属性是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T13:52:40.057

**[-ms-溢出样式。](http://msdn.microsoft.com/en-us/library/windows/apps/hh441298.aspx)**和**[-ms-touch-action](http://msdn.microsoft.com/en-us/library/windows/apps/hh767313.aspx)**是`-webkit-overflow scrolling:touch`. 查看附加的链接以获取有关语法/用法的更多信息。

# android - bus routes android project

> ID：15813235
> 
> 赞同：0
> 
> 时间：2013-04-04T13:51:52.070
> 
> 标签：android, xml, sqlite

I'm working on a project bus routes and I need help with the debugging part. My tables are not created in the databases and I'm having problems like when my icon is clicked it says "unfortunately the app is stopped".

myactivity.java

```
public class MainActivity extends Activity {

    SQLiteDatabase db;
    DbHelper dbHelper;
    Button route;
    protected String[] columns;

    String[] strings = {
            "TAMBARAM",
            "PERUNGULATHUR",
            "VANDALUR",
            "URAPAKKAM",
            "GUDUVANCHERI",
            "POTHERI",
            "KATTANKULATHUR",
            "M.M.NAGAR",
            "CHENGALPET",
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        db = dbHelper.getReadableDatabase();

        try {
        } catch (SQLException e) {
            e.getMessage();
        }

        route = (Button) findViewById(R.id.route);

        try {
        } catch (SQLException e) {
            e.printStackTrace();
        }

        route.setOnClickListener(new OnClickListener() {

            public void onClick(View v)

            {

                Cursor cursor = db.rawQuery("select busno from bus_detail);", null);
                if (cursor != null && cursor.moveToFirst()) {
                    TextView places = (TextView) findViewById(R.id.show);
                    places.setText(cursor.getString(2));
                }
            }
        });

        db.close();

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line,
                strings);

        AutoCompleteTextView source = (AutoCompleteTextView) findViewById(R.id.source);
        AutoCompleteTextView destination = (AutoCompleteTextView) findViewById(R.id.dest);
        source.setThreshold(1);
        source.setAdapter(adapter);
        destination.setThreshold(1);
        destination.setAdapter(adapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

databasehelper.java

```
public class DbHelper extends SQLiteOpenHelper {

    // Database Name
    private static final String DATABASE_NAME = "bus_routes.db";
    private static final int DATABASE_VERSION = 1;
    // table names
    private static final String BUS_MASTER = "bus_master";
    private static final String BUS_DETAIL = "bus_detail";

    // Columns names
    private static final String BUS_NO = "bus_no";
    private static final String SOURCE = "source";
    private static final String DESTINATION = "destination";
    private static final String PLACE = "place";
    private static final String ARRIVAL_TIME = "arrival_time";

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        String CREATE_BUS_MASTER = "CREATE TABLE " + BUS_MASTER + "(" + BUS_NO + " INTEGER PRIMARY KEY," + SOURCE
                + " TEXT," + DESTINATION + " TEXT" + ")";

        String CREATE_BUS_DETAIL = "CREATE TABLE " + BUS_DETAIL + "(" + BUS_NO
                + " INTEGER  FOREIGN KEY REFERNCES BUS_MASTER(BUS_NO)," + PLACE + " TEXT," + ARRIVAL_TIME + " TEXT"
                + ")";

        db.execSQL(CREATE_BUS_MASTER);
        db.execSQL(CREATE_BUS_DETAIL);

    }

    public void onOpen(SQLiteDatabase DB) {
        onOpen(DB);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + BUS_MASTER);

        db.execSQL("DROP TABLE IF EXISTS " + BUS_DETAIL);

        // Create tables again
        onCreate(db);
    }

    public void addBus(int bus_no, String source, String destination) {
        // TODO Auto-generated method stub
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put("busno", BUS_NO);
        values.put("source", SOURCE); // source
        values.put("destination", DESTINATION); // destination

        // Inserting Row
        db.insert(BUS_MASTER, null, values);

    }

    public void addBus_detail(int bus_no, String place, String arrival_time) {
        // TODO Auto-generated method stub
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put("busno", BUS_NO);
        values.put("place", PLACE);
        values.put("arrival_time", ARRIVAL_TIME);

        db.insert(BUS_DETAIL, null, values);
    }
} 
```

* * *

xml file

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:gravity="top"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="57dp"
        android:text="@string/source"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <AutoCompleteTextView
        android:id="@+id/source"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignRight="@+id/dest"
        android:layout_toRightOf="@+id/textView2"
        android:ems="10"
        android:labelFor="2"
        android:text="@string/s" />

    <requestFocus />

    <AutoCompleteTextView
        android:id="@+id/dest"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView2"
        android:layout_alignLeft="@+id/route"
        android:layout_alignParentRight="true"
        android:layout_marginRight="16dp"
        android:ems="10"
        android:text="@string/d" />

    <Button
        android:id="@+id/route"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView2"
        android:layout_marginTop="26dp"
        android:layout_toRightOf="@+id/textView2"
        android:text="@string/routes" />

    <TextView
        android:id="@+id/show"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView2"
        android:layout_alignParentBottom="true"
        android:layout_alignRight="@+id/dest"
        android:layout_below="@+id/route"
        android:layout_marginTop="81dp"
        android:text="@string/disp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="44dp"
        android:text="@string/dest"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

* * *

logcat:

```
04-04 14:14:43.700: D/AndroidRuntime(868): Shutting down VM
04-04 14:14:43.700: W/dalvikvm(868): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-04 14:14:43.720: E/AndroidRuntime(868): FATAL EXCEPTION: main
04-04 14:14:43.720: E/AndroidRuntime(868): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.bus/com.example.bus.MainActivity}: java.lang.NullPointerException
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.os.Looper.loop(Looper.java:137)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-04 14:14:43.720: E/AndroidRuntime(868):  at java.lang.reflect.Method.invokeNative(Native Method)
04-04 14:14:43.720: E/AndroidRuntime(868):  at java.lang.reflect.Method.invoke(Method.java:511)
04-04 14:14:43.720: E/AndroidRuntime(868):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-04 14:14:43.720: E/AndroidRuntime(868):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-04 14:14:43.720: E/AndroidRuntime(868):  at dalvik.system.NativeStart.main(Native Method)
04-04 14:14:43.720: E/AndroidRuntime(868): Caused by: java.lang.NullPointerException
04-04 14:14:43.720: E/AndroidRuntime(868):  at com.example.bus.MainActivity.onCreate(MainActivity.java:44)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.Activity.performCreate(Activity.java:5104)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-04 14:14:43.720: E/AndroidRuntime(868):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-04 14:14:43.720: E/AndroidRuntime(868):  ... 11 more

```

# android - 使用 canvas.drawBitmap() 和 canvas.translate()

> ID：15813241
> 
> 赞同：0
> 
> 时间：2013-04-04T13:51:57.960
> 
> 标签：android, canvas, android-image

我的代码在这里接收一个值`bmpX`并`bmpY`使用它们在屏幕上的该位置绘制位图。这完全符合我的要求，但我宁愿使用该`canvas.translate()`函数来处理图像的移动，而不仅仅是`canvas.drawBitmap()`，因为我会将其他绘图元素应用到画布上，并且我希望它们都移动相同的数量并且方向。

我的问题是：我可以在哪里移动`canvas.drawBitmap()`代码，以便它在开始时仅绘制到画布上，但在此之后的任何时间都可以使用它来移动`canvas.translate()`？无论我将`canvas.translate()`. 我正在想象它可以将图像“粘贴”到画布上，可以这么说，然后移动画布，这也随之移动图像。

```
public void run() {
        // TODO Auto-generated method stub
        while(isRunning) {
            if(!surfaceHolder.getSurface().isValid()) {
                continue;
            }

            canvas = surfaceHolder.lockCanvas();
            canvas.drawRGB(255, 255, 255);
            canvas.drawBitmap(bmp, bmpX-(bmp.getWidth()/2), 
                                     bmpY-(bmp.getHeight()/2), null);

            //canvas.translate(bmpX, bmpY);

            surfaceHolder.unlockCanvasAndPost(canvas);

        }
} 
```

我希望我足够清楚地解释了我的问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:14:22.580

为了清楚起见，在我离线后回答我自己的问题。UI 不能在这样的线程上完成，我需要使用 android UI 线程。runOnUIUpdatethread 和异步任务

# excel - Excel 2007 VBA CDate 方法接受的格式

> ID：15813246
> 
> 赞同：0
> 
> 时间：2013-04-04T13:52:08.740
> 
> 标签：excel, vba, excel-2007

我正在为 Excel 2007 中的特定单元格在 VBA 中开发一个更改事件。我想将在这些单元格中输入的两种不同格式的日期（带时间）转换为一种格式（美式）。

这是我的代码，用于检查输入的日期是否为两种所需格式之一。crmdate 是 ActiveCell 的字符串值：

```
 If RegexServiceManager.test(crmdate) Then
        outputDate = Format(CDate(crmdate), "MM/dd/yyyy hh:mm")
        Application.EnableEvents = False
        ActiveCell.Value = outputDate
        ActiveCell.NumberFormat = "MM/dd/yyyy hh:mm"
        Application.EnableEvents = True
    ElseIf RegexSiebel.test(crmdate) Then
        outputDate = CDate(crmdate)
        Application.EnableEvents = False
        ActiveCell.Value = outputDate
        ActiveCell.NumberFormat = "MM/dd/yyyy hh:mm"
        Application.EnableEvents = True
    Else
        MsgBox "Inapropriate date and time format"
    End If 
```

RegexServiceManager 检查日期是否为 YYYY/MM/DD HH:MM:SS 格式，这可以正常工作。RegexSiebel 检查日期是否为 int DD-MMM-YYYY HH:MM 格式，这就是麻烦的开始。

我在线收到“类型不匹配”错误`outputDate = CDate(crmdate)`。我已经删除了类似于上方“If”中的 Format 方法，以验证错误来自 CDate。

有人可以就此提出建议吗？也许 CDate 无法识别 DD-MMM-YYYY（例如：01-Jan-2013）格式？如果是这样，有人可以提出解决方法吗？

目标格式为 MM/DD/YYYY HH:MM。

谢谢您最好的问候，

马切伊

编辑：

outputDate 是日期格式！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:36:38.353

我想我找到了答案。这有点傻，但上面的代码不适用于波兰区域设置。它适用于美国（也可能是英国）区域设置。

我还将 outputDate 更改为 Variant 类型。

我最终得到了这个：

```
 If RegexServiceManager.test(crmdate) Then
        MsgBox "otputDate: " & TypeName(outputDate) & vbCrLf & "crmdate: " & TypeName(crmdate)
        outputDate = CDate(crmdate)
        MsgBox "otputDate: " & TypeName(outputDate) & vbCrLf & "crmdate: " & TypeName(crmdate)
        Application.EnableEvents = False
        ActiveCell.Value = outputDate
        ActiveCell.NumberFormat = "MM/dd/yyyy hh:mm"
        Application.EnableEvents = True
    ElseIf RegexSiebel.test(crmdate) Then
        MsgBox "otputDate: " & TypeName(outputDate) & vbCrLf & "crmdate: " & TypeName(crmdate)
        outputDate = CDate(crmdate)
        MsgBox "otputDate: " & TypeName(outputDate) & vbCrLf & "crmdate: " & TypeName(crmdate)
        Application.EnableEvents = False
        ActiveCell.Value = outputDate
        ActiveCell.NumberFormat = "MM/dd/yyyy hh:mm"
        Application.EnableEvents = True
    Else
        MsgBox "Inapropriate date and time format"
    End If 
```

消息框仅用于调试目的。

在程序开始时检测区域设置可能是明智的，或者以更好的方式编写它来避免这种情况。:)

希望这可以帮助某人。

谢谢您最好的问候，

# java - 将数组元素添加到字符串

> ID：15813247
> 
> 赞同：1
> 
> 时间：2013-04-04T13:52:13.180
> 
> 标签：java, arrays, string

我正在创建一个刽子手游戏，长话短说，除了像下面那样做之外，是否有一种捷径可以将这些单独的字符串数组组合成一个字符串？

```
String after = under[0] + under[1] + under[2] + under[3] + under[4] + under[5] + under[6] + under[7] + under[8] + under[9] + under[10] + under[11] + under[12] + under[13] + under[14] + under[15] + under[16] + under[17] + under[18] + under[19] + under[20] + under[21]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:53:41.157

您可以使用循环来执行此操作，如下所示：

```
StringBuilder sb = new StringBuilder();
for (int i = 0 ; i != 22 ; i++) {
    sb.append(under[i]);
}
String after = sb.toString(); 
```

您还可以将字符串添加到最初为空的字符串中，但这是次优的，因为所有中间字符串都在循环中分配和释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:54:40.530

总是使用循环来执行这样的重复操作。

此外，建议使用`StringBuilder`而不是`String`. JAVA 中的字符串是不可变的。

```
StringBuilder sb = new StringBuilder();
int nCount = 22;

for (int iCnt = 0 ; iCnt <= nCount ; iCnt++) {
    sb.append(under[iCnt]);
}
String after = sb.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:54:36.643

尝试一下：

```
String after = "";

for (int i=0; i<22; i++)
    after += under[i]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T13:55:26.913

这段代码并不短，但也不那么乏味：

```
StringBuilder afterBldr = new StringBuilder();
for (String underEl : under) {
     afterBldr.append(underEl);
}
String after = afterBldr.toString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T13:56:22.683

如果您有权访问[Apache Commons](https://commons.apache.org/)库，请使用该[`join()`](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#join%28java.lang.Object%5b%5d,%20java.lang.String%29)方法，这是最好的解决方案：

```
String str = StringUtils.join(under, ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T13:56:35.173

Apache [Joiner](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Joiner.html)可以在这里使用。

```
Joiner.on("").join(names) 
```

# apache-camel - Camel：同一骆驼上下文中并行路由之间的同步

> ID：15813249
> 
> 赞同：2
> 
> 时间：2013-04-04T13:52:16.567
> 
> 标签：apache-camel

我正在研究一个骆驼原型，它在同一个骆驼上下文中使用两个起点。

第一个路由使用用于“配置”应用程序的消息。消息通过 configService bean 加载到配置存储库中：

```
 // read configuration files
    from("file:data/config?noop=true&include=.*.xml")
        .startupOrder(1)
        .to("bean:configService?method=loadConfiguration")
        .log("Configuration loaded"); 
```

第二个路由实现了一个接收者列表 eip 模式，将不同类型的输入消息传递给多个接收者，这些接收者从同一个配置存储库中动态读取：

```
 // process some source files (using configuration)       
    from("file:data/source?noop=true")
        .startupOrder(2)
        .unmarshal()
        .to("setupProcessor") // set "recipients" header
        .recipientList(header("recipients"))

    // ... 
```

现在出现的问题是如何同步它们，因此如果第一个路由正在处理新数据，则第二个路由“等待”。

我是 Apache Camel 的新手，对如何解决这样的问题非常迷茫，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-20T15:20:40.353

`aggregate`与动态启动和停止路线的可能性结合使用：

```
from("file:data/config?noop=true&include=.*.xml")
    .id("route-config")
    .aggregate(constant(true), new MyAggregationStrategy()).completionSize(2).completionTimeout(2000)
    .process(new Processor() {
        @Override
        public void process(final Exchange exchange) throws Exception {
            exchange.getContext().startRoute("route-source");
        }
    });

from("file:data/source?noop=true&idempotent=false")
    .id("route-source")                              // the id is needed so that the route is found by the start and stop processors
    .autoStartup(false)                              // this route is only started at runtime
    .aggregate(constant(true), new MyAggregationStrategy()).completionSize(2).completionTimeout(2000)
    .setHeader("recipients", constant("direct:end")) // this would be done in a separate processor
    .recipientList(header("recipients"))
    .to("seda:shutdown");                            // shutdown asynchronously or the route would be waiting for pending exchanges

from("seda:shutdown")
    .process(new Processor() {
        @Override
        public void process(final Exchange exchange) throws Exception {
            exchange.getContext().stopRoute("route-source");
        }
    });

from("direct:end")
    .log("End"); 
```

这样，只有在完成`route-source`时才开始`route-config`。如果在目录中找到新文件，则会重新`route-config`启动。`route-source``config`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T07:39:03.333

您还可以在激活第二个路由的第一个路由中放置一个“完成时” [http://camel.apache.org/oncompletion.html](http://camel.apache.org/oncompletion.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:01:50.233

Apache camel File 将为正在处理的文件创建一个锁。如果有锁，则此文件上的任何其他文件进程都不会合并（除非您设置了 consumer.exclusiveReadLock=false）

来源 ：

[http://camel.apache.org/file.html](http://camel.apache.org/file.html) => URI 选项 => consumer.exclusiveReadLock

# shell - 在获取另一个脚本的同一行上定义一个 shell 脚本变量

> ID：15813256
> 
> 赞同：4
> 
> 时间：2013-04-04T13:52:39.323
> 
> 标签：shell, unix, ksh

我在 ksh 脚本中遇到了声明变量并在同一行上获取另一个 shell 脚本的行。例如：

```
MYVARIABLE="abc" . ~core/script.sh 
```

这会产生与单独声明它们不同的行为吗？例如：

```
MYVARIABLE="abc"
. ~core/script.sh 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:01:53.750

如果是

```
MYVARIABLE="abc" . ~core/script.sh 
```

`MYVARIABLE`仅`abc`在源 ( `.`) 命令的持续时间内设置为。所以它将在`~core/script.sh`.

如果是

```
MYVARIABLE="abc"
. ~core/script.sh 
```

它将在当前 shell/脚本的范围内和`~core/script.sh`.

尝试运行第一个，然后`echo $MYVARIABLE`看看它仍然是空的（假设它开始是空的）。再次运行后者，`echo`您会看到它的值是在当前 shell 中设置的。

**编辑：**

请注意，这在这两种情况下`MYVARIABLE`都是可见的`~core/script.sh`，但这只是因为您正在采购脚本。如果您改为运行可执行文件（甚至是可执行的 shell 脚本），而不是获取它，则行为会有所不同。

```
MYVARIABLE=foo /usr/local/bin/some_executable 
```

执行时将变量在范围内，但是

```
MYVARIABLE=foo
/usr/local/bin/some_executable 
```

范围内不会*有*变量。为了让它传播到可执行文件/子shell，您必须这样`export`做：

```
MYVARIABLE=foo
export MYVARIABLE
/use/local/bin/some_executable 
```

在比 ksh（bash、zsh）更新的 Bourne 派生的 shell 中，您可以将赋值和导出结合起来：

```
export MYVARIABLE=foo 
```

但这在 ksh 中不起作用；你需要两个陈述。

# javascript - 隐藏具有过期内容的表行

> ID：15813264
> 
> 赞同：0
> 
> 时间：2013-04-04T13:52:54.963
> 
> 标签：javascript, jquery

假设我使用表格来显示预定内容，并且我希望行在其日期过去后消失。

```
第 1 行有表格标题
第 2 行有日期 A
第 3 行有预定内容 A1
第 4 行有预定内容 A2
第 5 行有日期 B
第 6 行有预定内容 B1
第 7 行有预定内容 B2
第 5 行有日期 C
第 6 行有预定内容 C1
第 7 行有预定内容 C2
等等

```

日期 A 过去后，我希望第 2-4 行消失/隐藏。

我是自愿做这个网站的，没有其他人可以提供帮助。我每天都会删除过期的行，但是我要去度假，并且会断电两周。

我没有任何示例代码，我是菜鸟。如果你的意思是我的 html 代码，它只是一个简单的表格。

***很抱歉没有尽快回复，Jakub ( [https://stackoverflow.com/users/158014/jakub](https://stackoverflow.com/users/158014/jakub) )。昨天我最后一次编辑后，我和女儿在医院急诊室呆了 12 多个小时。我会尽快回来修复帖子以符合 Stackoverflow 标准。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:49:14.327

您可以使用 jQuery 库在某些日期隐藏网站的某些部分。当您离开时，它应该对这种情况有所帮助。

首先加载 jQuery，添加到您网站的 head 部分：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

然后你在正文部分的表格：

然后，在 body 标记的末尾附近，创建一个基于日期隐藏内容的规则：

```
<script type="text/javascript">

var now = new Date();
var futuretime1 = new Date("April 10, 2013");
if(now > futuretime1)
 {
 $("#div").hide();
 }
</script> 
```

当日期通过“futuretime1”时，这将隐藏#div。您还可以使用 jQuery 选择器来选择适当的表格行。

希望这可以帮助。

# c# - 比较数据网格中同一行上的两个单元格

> ID：15813266
> 
> 赞同：2
> 
> 时间：2013-04-04T13:52:59.777
> 
> 标签：c#, wpf, datagrid

使用 C# .NET 4.5、MS Visual Studio 2012、WPF。

嗨，刚刚让这段代码最终工作，它基本上通过行遍历 datgrid。

被警告他可能会冒犯那里的所有 WPF 向导！

```
public IEnumerable<System.Windows.Controls.DataGridRow> GetDataGridRow(System.Windows.Controls.DataGrid grid)
{
    var itemsource = grid.ItemsSource as System.Collections.IEnumerable;
    paretogrid.UpdateLayout();
    if (null == itemsource) yield return null;
    foreach (var item in itemsource)
    {
        var row = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridRow; // null?
        if (null != row) yield return row;
    }
}

private void ShowArrows()
{
    var rows = GetDataGridRow(paretogrid); // fetching null?

    foreach (DataGridRow r in rows)
    {
        DataRowView rv = (DataRowView)r.Item;      
    }
} 
```

如您所见，我遍历了行。现在我想要做的是将列索引 2 处的单元格值与每个“行”上的列索引 4 进行比较，然后如果 true 或 false 相应地更新列 5。我可以遍历列，让我每个单元格都可以，但不是我所追求的，例如

```
foreach (DataGridColumn column in paretogrid.Columns) 
```

是这样的吗：

```
paretogrid.Columns[2].GetCellContent(something here) as textblock; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:25:38.757

原来我想多了。这是我的解决方案，

```
var test1 = paretogrid.Columns[7].GetCellContent(paretogrid.Items[2]) as TextBlock;
int t1convert = Convert.ToInt32(test1.Text);
var test2 =  paretogrid.Columns[8].GetCellContent(paretogrid.Items[2]) as TextBlock;
int t2convert = Convert.ToInt32(test2.Text);

if (t1convert == t2convert)
{
    MessageBox.Show("it worked!");
} 
```

感谢您指出这一点@DJ KRAZE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:28:37.883

请参阅下面的说明，这将有助于弄清楚为什么您会看到您所看到的

好的，让我让您更容易理解 TextBox，例如，如果我这样做了：

```
var myInt = (int)textBox1.text; 
```

例如，这将编译，因为我暗示我想`myInt`存储一个`Int32`值，但是：

```
var myInt = (int)textBox1; 
```

会失败，因为您无法将`Object`,转换`TextBox`为 Value 这样做是否可以更容易地查看您的初始错误是哪里以及您得到它的原因。

`WinForms`这也与vs如果基本上是一些简单的事情无关`WPF`，我相信我们中的许多人之前都做过，因为`.Text`当我们想要转换`Value`对象持有的而不是对象本身时，我们忘记了追加到对象的末尾

# html - div中的背景图片

> ID：15813267
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:53:00.060
> 
> 标签：html

我有一个 div 包含一些带有背景图像的文本。div 的宽度不固定。我想默认显示背景图像的右侧部分，如果文本变长，则在左侧显示更多图像。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:55:17.867

只需使用`background-position`：

```
.mydiv {
    background-position: right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:54:09.060

尝试使用`background-position`. [http://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:09:58.220

采用：

```
#divid {
    background-position: right;
} 
```

# openssh - GitExtensions - OpenSSH 忽略 ~/.ssh/config 文件

> ID：15813275
> 
> 赞同：1
> 
> 时间：2013-04-04T13:53:32.093
> 
> 标签：openssh, git-extensions

使用 gitextensions 我尝试克隆我的远程存储库，这导致 gitextensions 运行以下命令

```
> C:\cygwin\bin\git.exe clone -v --recurse-submodules --progress "gitbox:/projects/testing.git" "C:/Users/craig/MyCode/Personal/testing" 
```

失败了

> 权限被拒绝（公钥）。

但是，如果我从 cygwin bash shell 运行完全相同的命令，它就会成功。因此，除了标准配置之外，我还有一个 ~/.ssh/config 来设置“gitbox”别名以便于使用。

我的 ~/.ssh/config 文件看起来像这样

```
# My GitBox - 
Host gitbox
  Hostname mydomain.com
  User git
  IdentityFile /home/craig/.ssh/craig@home
  Port 2022 # i.e non-standard port 
```

在 GitExtensions 中，我检查了 OpenSSH 选项，并且我还将 HOME 设置为我的 cygwin 安装位置，更具体地说，用户帐户的位置，即 c:/cygwin/home/craig

我的结论是 ~/.ssh/config 文件没有被读取和使用。我能找到的所有内容都表明 gitextensions 中的 HOME 目录不正确是问题所在，但我看不到我的设置有什么问题。

提前致谢

克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T14:31:56.813

GitExtensions 默认将 HOME 变量设置为“C:\Users\”。您可以在设置对话框中更改此设置。

# linux - 码头上的 java.lang.NoClassDefFoundError org.eclipse.jetty.server.Connector

> ID：15813276
> 
> 赞同：2
> 
> 时间：2013-04-04T13:53:36.203
> 
> 标签：linux, embedded-jetty

我有一个使用嵌入式 Jetty 的 java web 应用程序，当我尝试在 linux 环境中运行时，出现以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/eclipse/jetty/server/Connector
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at br.com.teste.install.Launcher.work(Launcher.java:23)
at br.com.teste.install.Install.main(Install.java:14)
Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.server.Connector
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 4 more 
```

当我在 Windows 环境中运行完全相同的应用程序时，这可以正常工作。

我不知道会发生什么。

谢谢你的帮助。

# jquery - Bootstrap 平滑滚动到 Anchor - jScript 不起作用

> ID：15813277
> 
> 赞同：0
> 
> 时间：2013-04-04T13:53:39.287
> 
> 标签：jquery, twitter-bootstrap

我正在使用 Twitters Bootstrap，我希望平滑滚动到我的锚点，但它不起作用。这是在我的文档的末尾，就在`</body>`标签之前：

```
<script type="text/javascript">
!function ($) {
    $(function(){
        $('#running-box, #bg-car').carousel({});

        var $root = $('html, body');

        $('a').click(function() {
            var href = $.attr(this, 'href');
            $root.animate({
                scrollTop: $(href).offset().top
            }, 500, function () {
                window.location.hash = href;
            });
            return false;
        });
    })
}(window.jQuery)

</script> 
```

正确包含 jQuery 和 Bootstrap...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-23T01:23:31.673

如果你更换

```
 'a[href*=#]:not([href=#])' 
```

和

```
'a[href*=#]:not([href=#]):not([href=#idname])' 
```

您可以防止平滑滚动适用于该特定链接，

# sql - 如何检查sql中的空字段

> ID：15813281
> 
> 赞同：0
> 
> 时间：2013-04-04T13:53:44.420
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个 sql 查询，它在字段中显示 address1 和 address2 作为'address1，address2'。我的查询是

```
(S.Address1 + '  ,  ' + S.Address2)as Address1 
```

但是当地址 2 中的值为空白时，它显示“地址 1”，我只需要显示地址 1。如何删除逗号

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:54:25.203

采用`COALESCE`

```
(COALESCE(S.Address1,'') + '  ,  ' + COALESCE(S.Address2, '')) as Address1 
```

*   [TSQL 合并](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

`,`但是上面语句的问题是当它为空时它会有尾随`address2`，要修复

```
(COALESCE(S.Address1,'')  + COALESCE(' , ' + S.Address2, '')) as Address1 
```

**更新 1**

```
CASE WHEN S.Address2 = '' 
     THEN S.Address1
     ELSE S.Address1 + '  ,  ' + S.Address2
END  AS Addrss 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T13:58:09.330

我认为 JW 很接近，但我相信你想要的实际公式是：

```
S.Address1 + COALESCE('  ,  ' + NULLIF(S.Address2,''),'') as Address1 
```

（下面不相关，因为 OP 现在说列值是空白的，不是`NULL`）

~~但是您还有另一个问题-上述方法（还）不起作用，因为您显然已`CONCAT_NULL_YIELDS_NULL`设置为`OFF`. 这需要打开（通常通过设置`ANSI_NULLS`为`ON`），[因为](http://msdn.microsoft.com/en-gb/library/ms176056.aspx)：~~

 ~~> 在 SQL Server 的未来版本中，任何`CONCAT_NULL_YIELDS_NULL`将`ON`选项显式设置为 OFF 的应用程序都会生成错误。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。~~  ~~* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:01:54.453

```
SELECT CONCAT(Address1                                      -- concatenation of address 1 with..
           , CASE WHEN ISNULL(NULLIF(Address2, ''))         -- if address 22 is null or empty
             THEN ''                                        -- concat with nothing
             ELSE CONCAT( '  ,  ', Address2)                -- else concat with a comma and address 2
             END
       ) 
```

[Sqlfiddle 在这里](http://sqlfiddle.com/#!2/d41d8/10074)

该行`CASE WHEN ISNULL(NULLIF(Address2, ''))`用于确定 address2 是空还是空。[详细信息可以在这里找到](https://stackoverflow.com/questions/334108/how-do-i-check-if-a-sql-server-string-is-null-or-empty)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:02:41.917

如果 address2 可以是 null 或空字符串，或者只是空格，则需要类似以下内容：

```
select address1 + 
case when length(trim(ifnull(address2, ''))) > 0 then ', ' + address2
else '' end 
```~~

# c# - 如何使用 WriteEndElement 检查元素名称

> ID：15813284
> 
> 赞同：7
> 
> 时间：2013-04-04T13:53:50.343
> 
> 标签：c#, .net, extension-methods, xmlwriter

我正在用[XmlWriter](http://msdn.microsoft.com/en-gb/library/system.xml.xmlwriter.aspx)编写 xml 。我的代码有很多这样的部分：

```
xml.WriteStartElement("payload");
ThirdPartyLibrary.Serialise(results, xml);
xml.WriteEndElement(); // </payload> 
```

问题是该`ThirdPartyLibrary.Serialise`方法不可靠。它可能会发生（取决于变量`results`）它不会关闭它打开的所有标签。结果，我的 WriteEndElement 行被歪曲了，消耗了关闭库的悬挂标签，而不是写`</payload>`.

因此，我想对 WriteEndElement 进行检查调用，检查元素名称，并抛出异常，除非光标位于预期元素处。

```
xml.WriteEndElement("payload"); 
```

`XmlReader.ReadStartElement(name)`除非光标位于文档中的预期位置，否则您可以将其视为抛出异常。

我怎样才能做到这一点？

* * *

编辑：此扩展方法的第二个用例是使我自己的代码更具可读性和可靠性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T07:01:00.373

XMLWriter 只是将给定的 xml 信息写入流中而无需任何验证。如果它在编写 xml 标签时进行任何验证，则在创建大 xml 文件时会出现性能问题。

使用 XMLWriter 创建 XML 文件由开发人员承担风险。如果要进行任何此类验证，可以使用 XMLDocument。

如果您真的想在 XMLWriter 中进行此验证，则必须使用 String 或 StringBuilder 创建编写器。因为，如果您使用 Stream 或 TextWriter，您将无法读取在写入过程中写入流中的信息。在 XML 的每次更新中，您都必须读取字符串并编写自己的方法来验证写入的信息。

我建议您使用 XMLDocument 来创建这些类型的 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T10:23:47.883

最后，我编写了一个扩展方法`WriteSubtree`来提供这个可用的 API：

```
using (var resultsXml = xml.WriteSubtree("Results"))
{
    ThirdPartyLibrary.Serialise(results, resultsXml);
} 
```

扩展方法`XmlWriter.WriteSubtree`类似于 .NET 的`XmlReader.ReadSubtree`. 它返回一个特殊的 XmlWriter 来检查有趣的业务。它的 dispose 方法关闭所有打开的标签。

# java - Struts 错误 - 找不到包

> ID：15813293
> 
> 赞同：0
> 
> 时间：2013-04-04T13:54:10.373
> 
> 标签：java, struts2

有错误：

```
 com.opensymphony.xwork2.ActionSupport; package does not exist 
```

我正在使用`struts2.3.8`和不使用 eclipse 或 net beans，但是已经制作了这个目录结构：

```
Code\Chapter\Struts2Application\WEB-INF\src\comm\kognet\action\ClientAction.java 
```

并解压缩`struts2`并复制并存储 jar 文件：

```
Code\Chapter\Struts2Application\WEB-INF\lib

common-logging1-1-1
freemarker-2.3.19
ognl3.0.6
xwork core-2.3.8
struts2 core-2.3.8 
```

我设置`catalina_home`为：

```
C:\Program Files\Java\jdk1.7.0_07\apache-tomcat-7.0.37 
```

路径为：

```
C:\Program Files\Java\jdk1.7.0_07 
```

类路径为 .

我是 Struts 新手，这是我的第一个程序。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:19:10.847

1.  您缺少 commons-io 和 commons-fileupload，并且...
2.  ...请不要尝试手动进行依赖管理：使用 Maven、Ivy 等，并且...
3.  ...请不要手动构建，使用 Maven、Ant 等。
4.  设置类路径（使用首选`-classpath`或环境变量，应避免使用 IMO）`-cp`是不够的。您需要显式添加所有依赖的 jar，或者通过通配符添加，并且...`CLASSPATH``.`
5.  ...您应该添加编译的输出目录，以便您自己的类也可用。
6.  不要将源代码放入`WEB-INF`，使用可部署工件之外的目录。对于玩具开发来说没关系，但 IMO 这是一个坏习惯。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-17T01:16:09.707

只需转到您的项目名称，右键单击它，选择属性，然后再次选择库和类路径。在那里，您只需添加库或添加 jar/目录，瞧！

# javascript - 我们如何将幻灯片限制增加到目前仅设置为 3 张幻灯片的动态

> ID：15813297
> 
> 赞同：0
> 
> 时间：2013-04-04T13:54:18.500
> 
> 标签：javascript, jquery, html, css

我想创建相同的淡入淡出效果，如下面的示例所示：

[http://www.spicypeanut.net/Slideshow/Slideshow.html](http://www.spicypeanut.net/Slideshow/Slideshow.html)

[http://www.spicypeanut.net/Blog/jQuery%20Slideshow.html](http://www.spicypeanut.net/Blog/jQuery%20Slideshow.html)

但问题是 - 这个例子只为 3 张幻灯片创建，我想要超过 3 张幻灯片，或者需要动态增加。

但是我如何修改脚本以使其自动获得最大数量的幻灯片？例如，如果我在 cms 内生成动态幻灯片，没有人能说出最大幻灯片数是多少.. 所以我必须在这部分每次手动更新 *.js：/

```
if (this.Last < 1) { 
this.Last = 3;
} 

if ($$.Slideshow.Counter > 3) 
{ 
$$.Slideshow.Counter = 1; # 
} 
```

如果你能在这一点上帮助我（我想还有很多其他人）会很好:)

**下面是本例中使用的 JS：**

```
var $$ = $.fn;

$$.extend({
  SplitID : function()
  {
    return this.attr('id').split('-').pop();
  },

  Slideshow : {
    Ready : function()
    {
      $('div.tmpSlideshowControl')
        .hover(
          function() {
            $(this).addClass('tmpSlideshowControlOn');
          },
          function() {
            $(this).removeClass('tmpSlideshowControlOn');
          }
        )
        .click(
          function() {
            $('div.tmpSlide').hide();
            $('div.tmpSlideshowControl').removeClass('tmpSlideshowControlActive');

            $('div#tmpSlide-' + $(this).SplitID()).show()
            $(this).addClass('tmpSlideshowControlActive');
          }
        );

      this.Counter = 1;

      this.Transition();
    },

    Transition : function()
    {
      if (this.Interrupted) {
        return;
      }

      this.Last = this.Counter - 1;

      if (this.Last < 1) {
        this.Last = 3;
      }

      $('div#tmpSlide-' + this.Last).fadeOut(
        'slow',
        function() {
          $('div#tmpSlideshowControl-' + $$.Slideshow.Last).removeClass('tmpSlideshowControlActive');
          $('div#tmpSlideshowControl-' + $$.Slideshow.Counter).addClass('tmpSlideshowControlActive');
          $('div#tmpSlide-' + $$.Slideshow.Counter).fadeIn('slow');

          $$.Slideshow.Counter++;

          if ($$.Slideshow.Counter > 3) {
            $$.Slideshow.Counter = 1;
          }

          setTimeout('$$.Slideshow.Transition();', 5000);
        }
      );
    }
  }
});

$(document).ready(
  function() {
    $$.Slideshow.Ready();
  }
); 
```

甚至我也做了一些研发，发现了一个更惊人的问题：

当我将其 Last vale 3 增加到 5 时，它在导航控件中的显示问题 - 比如如果您的幻灯片在 4 上，那么如果您单击 2，那么您的导航将在上一个轨道上移动，这意味着它将移动到 5 而不是 3。

所以请如果有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:07:14.667

不要为幻灯片的数量设置静态值，而是使用 jQuery 来获取幻灯片的数量，使用[.length](http://api.jquery.com/length/)：

```
// Get number of slides
var slideCount = $("#tmpSlideshow > .tmpSlide").length;

if (this.Last < 1) { 
    this.Last = slideCount;
} 

if ($$.Slideshow.Counter > slideCount) { 
    $$.Slideshow.Counter = 1;
} 
```

# ios - 从父类获取属性

> ID：15813300
> 
> 赞同：0
> 
> 时间：2013-04-04T13:54:23.073
> 
> 标签：ios, objective-c

我已经像这样添加了一个视图控制器：

```
UIViewController *sendViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"send"];
[self addChildViewController:sendViewController]; 
```

在 sendViewController 我得到了这个属性：

```
@property (strong, nonatomic) IBOutlet StringInputTableViewCell *nameCell; 
```

在那个课程中，我可以做一些事情，比如`self.nameCell.textField.text = @"test";`设置 textField 来测试

但是我怎样才能得到这个填充在父类的 textField 中的文本呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:58:50.210

您正在混合模型和视图，从而**打破了 MVC 设计模式**。

您不应该尝试阅读 UI 元素的内容。相反，您应该拥有由控制器管理的所有数据（即模型）和视图（即 UI，例如文本字段）。

有（简单的）方法可以获取此信息，但我强烈建议您*不要*走那条路！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:58:04.263

父类和子类之间的基本继承应该允许您将属性向前传递。

您需要创建一个类的子对象说**obj**。然后获取您将使用的字段的文本值（在父类中）

```
id obj = [[ChildClassName alloc] init];
NSString *myChildsText = obj.nameCell.textField.text;  // will get the value @"test" as assigned in the childclass. 
```

或者，当然，您可以在子类中为您的 @property 创建一个 getter 和 setter。例如 ：：

```
- (IBOutlet)nameCell {
 // returns the value
}

- (IBOutlet)setNameCell :(StringInputTableViewCell)newValue {
 //set the value to the @synth value here… 
} 
```

然后你可以调用子对象getter/setter如下::

NSString *text = [obj nameCell]; //等等等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:00:16.260

您可以在这里使用 4 种方法

a) 继续引用您的 childviewcontroller -> 直接获取值 b) 使用委托方法（最适合观察文本字段中的更改） c) 发送 NSNotification -> 这会带来开销，在某些方面它可以帮助您很多 d) KVO

# android - 如何在特定秒内显示字符串

> ID：15813305
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:54:26.033
> 
> 标签：android, string, timer, countdown, countdowntimer

我有一个问题。如何仅在特定时间内显示字符串，然后 textview 更改字符串。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:55:29.623

使用计时器设置文本

```
 _tv = (TextView) findViewById( R.id.textView1 );
    _t = new Timer();
    -tv.setText("hi");
    _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                _count++;

                runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 

                     if(_count==5)//after 5 seconds change the text
                     {
                       _tv.setText("hello");
                     }
                 }
                 });
            }
        }, 1000, 1000 ); 
```

记得在完成后取消计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:56:00.400

像这样的东西？

```
 cdt =  (new CountDownTimer(5000,1000){ // 5 seconds
            public void onTick(long millisUntilFinished){

            }

            public void onFinish(){
                TextView t = (TextView)findViewById(R.id.myTextView);
                t.setText("Here is the new text");
            }
        }.start()); 
```

# c++ - 未在所有编译单元中声明 std::map 类型的成员变量时的分段错误

> ID：15813314
> 
> 赞同：-1
> 
> 时间：2013-04-04T13:54:50.393
> 
> 标签：c++, map, segmentation-fault, destructor, member-variables

当我在一个编译单元中声明一个类型的成员变量`std::map`而不在另一个编译单元中时，当包含对象被破坏时，我会遇到分段错误。当我对 做同样的事情时`std::vector`，它工作得很好。

在我的情况下，这绝对是一个错误，我修复了它，但我仍然想知道是什么导致了崩溃。

这是代码：

foo.hpp：

```
#ifdef DECLARE_MAP
#include <map>
#endif
#ifdef DECLARE_VECTOR
#include <vector>
#endif
#include <string>

class Foo {
public:
    Foo();

private:
#ifdef DECLARE_MAP
    std::map<std::string, std::string> m;
#endif
#ifdef DECLARE_VECTOR
    std::vector<std::string> v;
#endif
}; 
```

foo.cpp：

```
#include "foo.hpp"

Foo::Foo()
{
} 
```

主.cpp：

```
#include "foo.hpp"

int main()
{
    Foo f;
} 
```

适用于`DECLARE_VECTOR`：

```
g++ -DDECLARE_VECTOR -c -o foo.o foo.cpp
g++ -o main main.cpp foo.o 
```

但是会导致分段错误`DECLARE_MAP`：

```
g++ -DDECLARE_MAP -c -o foo.o foo.cpp
g++ -o main main.cpp foo.o 
```

可在 clang 4.0 和 gcc 4.4.7 中重现。

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:08:06.820

问题是因为您分两步进行编译，并且仅在第一步中定义`DECLARE_MAP`or `DECLARE_VECTOR`。这会产生两个如下所示的翻译单元：

*   `foo.cpp`翻译单位：

    ```
    // Contents of <map>
    // Contents of <string>

    class Foo {
    public:
        Foo();

    private:
        std::map<std::string, std::string> m;
    };

    int main()
    {
        Foo f;
    } 
    ```

*   `main.cpp`翻译单位：

    ```
    // Contents of <map>
    // Contents of <string>

    class Foo {
    public:
        Foo();

    private:
    };

    int main()
    {
        Foo f;
    }

    int main()
    {
        Foo f;
    } 
    ```

如您所见，每个翻译单元对`Foo`. 第一个`Foo`包含a `std::map`，第二个没有。

这违反了以下规则：

> 如果每个定义出现在不同的翻译单元中，并且定义满足以下要求，则程序中可以有多个类类型的定义[...]。给定这样一个`D`在多个翻译单元中定义的实体，那么
> 
> *   的每个定义`D`应由相同的标记序列组成；和
>     
>     
> *   [...]
>     
>     
> 
> 如果 的定义`D`不满足这些要求，则行为未定义。

如您所见，您有未定义的行为。是的，当您拥有 时，它可能会起作用`DECLARE_VECTOR`，但这只是偶然。它仍然有未定义的行为，所以任何事情都可能发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:06:21.567

您违反了单一定义规则，导致未定义行为。这意味着从字面上看，任何事情都可能发生。其中包括为某些涉及的类型而不是其他类型工作，或者仅在满月时工作。

# android - 在应用程序 Android 中关闭背景视频

> ID：15813317
> 
> 赞同：0
> 
> 时间：2013-04-04T13:54:58.433
> 
> 标签：android, video, android-activity

我用两个 Activity 制作了一个应用程序 android。我的第二个活动包含一个 youtube 视频嵌入。当我启动此活动并运行此视频时，它可以工作。但是当我关闭我的活动时，如果我的视频正在播放，我的活动已关闭，但我会听到视频的声音。我认为我的视频并没有真正关闭，她正在后台播放。

你能帮助我吗？

谢谢 ！

编辑：我在我的 MyActivity 中建立了一个测试，我有同样的问题。

```
public class MyActivity extends Activity implements MBAdListener{

private FrameLayout layout;

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    RelativeLayout adViewContainer = (RelativeLayout) findViewById(R.id.adView);
    layout = new FrameLayout(this);

    layout.setLayoutParams(new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.FILL_PARENT,
            Gravity.CENTER)
    );
    layout.setBackgroundColor(Color.BLUE);
    setContentView(layout);
    WebView content = new WebView(this);
    content.setLayoutParams(new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.FILL_PARENT,
            Gravity.CENTER
    ));
    content.setHorizontalScrollBarEnabled(false);
    content.setVerticalScrollBarEnabled(false);
    content.getSettings().setJavaScriptEnabled(true);
    content.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    content.getSettings().setBuiltInZoomControls(false);
    content.getSettings().setSupportZoom(true);
    content.getSettings().setUseWideViewPort(true);
    content.getSettings().setPluginsEnabled(true);
    content.getSettings().setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);
    content.getSettings().setSavePassword(true);
    content.getSettings().setSaveFormData(true);
    content.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);

    layout.addView(content);

    content.loadData("<iframe width=\"320\" height=\"200\" src=\"http://www.youtube.com/embed/vCXRt0kQvUE?autoplay=1\" frameborder=\"0\" allowfullscreen></iframe>", "text/html", "UTF-8");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:16:41.110

我找到了这个，它有效！！！！请参阅以下有关[如何停止在 Android webview 中播放 youtube 视频的帖子？](https://stackoverflow.com/questions/5946698/how-to-stop-youtube-video-playing-in-android-webview)

```
@Override
public void onPause() {
  super.onPause();

  try {
    Class.forName("android.webkit.WebView")
      .getMethod("onPause", (Class[]) null)
      .invoke(webview, (Object[]) null);
  } catch(ClassNotFoundException cnfe) {
      ...
  } catch(NoSuchMethodException nsme) {
      ...
  } catch(InvocationTargetException ite) {
      ...
  } catch (IllegalAccessException iae) {
      ...
  }
} 
```

# sql - 如何构建使用子查询结果相互比较的 MS Access Query

> ID：15813320
> 
> 赞同：0
> 
> 时间：2013-04-04T13:55:04.910
> 
> 标签：sql, ms-access

将 MS access 2010 与 SQL Server 2005 的链接表一起使用。链接表有 5 列：

```
PName - STRING
OName - STRING
FName - STRING  
Readable - BOOLEAN  
Editable - BOOLEAN 
```

样本数据：

```
PName   FName                readable   editable
UK      Case.First_Name         0       0
UK      Case.Last_Name          0       0
UK      Case.Middle_Initial     0       0
UK      Case.Phone_Number       0       0
UK      Case.Username           -1      -1
USA     Case.First_Name         0       0
USA     Case.Last_Name          0       0
USA     Case.Middle_Initial     0       0
USA     Case.Phone_Number       0       0
USA     Case.Username           -1      -1 
```

希望创建一个查询，该查询将按 PName 返回所有 FName 的列表，但仅在所有 PName 的 Readable 值不同或所有 PName 的 Editable 值不同时才显示 FName。

示例输出：

```
 UK           USA
                   Edit|Read    EDIT|Read
Case.First_Name    T   |  T       F | T
Case.UserName      F   |  F       F | T 
```

在上面，“Case.First_Name”可由英国编辑，但不能由美国编辑，因此我希望看到这一行

Case.UserName 英国不可读，但美国可读，因此我想看到这一行

不应该输出的内容：

```
 UK           USA
                   Edit|Read    EDIT|Read
Case.First_Name    T   |  T       T | T
Case.UserName      F   |  F       F | F 
```

上述两行对英国和美国都具有相同的可读性和可编辑性权限，因此我不想看到这些行。

下面的查询将为我提供我需要的原始数据，然后我可以将其转换为数据透视表：

```
SELECT PName, FName, Readable, Editable
FROM ProfileFLS
WHERE PName Like "U*"; 
```

然后将其导出到 Excel 并使用 If 语句。

请注意，配置文件的数量是动态的。

谢谢你的帮助

最新的 SQL：

SQL如下，我也试过把="True"改成0

```
TRANSFORM Sum(IIf(dbo_ProfileFLS.readable="TRUE","Read_True","Read_False")) AS Readable
SELECT dbo_ProfileFLS.fieldname
FROM dbo_ProfileFLS
WHERE (((dbo_ProfileFLS.objectname)="Case") AND ((dbo_ProfileFLS.Profile) Like "UK*"))
GROUP BY dbo_ProfileFLS.fieldname, dbo_ProfileFLS.readable
PIVOT dbo_ProfileFLS.Profile; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:11:12.033

感谢您编辑您的问题。事情现在清楚多了。

让我们从调整您的样本数据开始，以便获得一些实际结果。

```
PName   FName               readable    editable
UK      Case.First_Name     0           -1
UK      Case.Last_Name      0           0
UK      Case.Middle_Initial 0           0
UK      Case.Phone_Number   0           0
UK      Case.Username       -1          -1
USA     Case.First_Name     0           0
USA     Case.Last_Name      0           0
USA     Case.Middle_Initial -1          0
USA     Case.Phone_Number   0           0
USA     Case.Username       -1          -1
Canada  Case.First_Name     0           0
Canada  Case.Last_Name      0           -1
Canada  Case.Middle_Initial 0           0
Canada  Case.Phone_Number   0           0
Canada  Case.Username       0           0 
```

现在考虑以下查询。这是一个自联接，在 [FName] 上查找匹配项，在 [readable] OR [editable] 上查找不匹配项：

```
SELECT p1.FName, 
    p1.PName AS PName1, p1.readable AS read1, p1.editable AS edit1,
    p2.PName AS PName2, p2.readable AS read2, p2.editable AS edit2
FROM permissionsTbl p1 INNER JOIN permissionsTbl p2
    ON p1.FName=p2.FName 
        AND (p1.readable<>p2.readable OR p1.editable<>p2.editable)
ORDER BY 1, 2 ; 
```

它返回

```
FName               PName1  read1   edit1   PName2  read2   edit2
Case.First_Name     Canada  0       0       UK      0       -1
Case.First_Name     UK      0       -1      Canada  0       0
Case.First_Name     UK      0       -1      USA     0       0
Case.First_Name     USA     0       0       UK      0       -1
Case.Last_Name      Canada  0       -1      USA     0       0
Case.Last_Name      Canada  0       -1      UK      0       0
Case.Last_Name      UK      0       0       Canada  0       -1
Case.Last_Name      USA     0       0       Canada  0       -1
Case.Middle_Initial Canada  0       0       USA     -1      0
Case.Middle_Initial UK      0       0       USA     -1      0
Case.Middle_Initial USA     -1      0       UK      0       0
Case.Middle_Initial USA     -1      0       Canada  0       0
Case.Username       Canada  0       0       USA     -1      -1
Case.Username       Canada  0       0       UK      -1      -1
Case.Username       UK      -1      -1      Canada  0       0
Case.Username       USA     -1      -1      Canada  0       0 
```

并向我们​​展示了读取或编辑权限不匹配的每种情况。

现在我们将对其进行调整，为我们提供上面列表中出现的 [FName] 值的 DISTINCT 列表......

```
SELECT DISTINCT p1.FName 
FROM permissionsTbl p1 INNER JOIN permissionsTbl p2
    ON p1.FName=p2.FName 
        AND (p1.readable<>p2.readable OR p1.editable<>p2.editable) ; 
```

...并将其用作子查询以从原始表中提取那些 FName 行

```
SELECT * FROM permissionsTbl
WHERE FName IN
(
    SELECT DISTINCT p1.FName 
    FROM permissionsTbl p1 INNER JOIN permissionsTbl p2
        ON p1.FName=p2.FName 
            AND (p1.readable<>p2.readable OR p1.editable<>p2.editable)
) ; 
```

...返回...

```
PName   FName               readable    editable
UK      Case.First_Name     0           -1
UK      Case.Last_Name      0           0
UK      Case.Middle_Initial 0           0
UK      Case.Username       -1          -1
USA     Case.First_Name     0           0
USA     Case.Last_Name      0           0
USA     Case.Middle_Initial -1          0
USA     Case.Username       -1          -1
Canada  Case.First_Name     0           0
Canada  Case.Last_Name      0           -1
Canada  Case.Middle_Initial 0           0
Canada  Case.Username       0           0 
```

...并可用于为您的下游流程提供原料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:26:45.427

您可以使用 MS Access 向导创建交叉表查询，也可以使用 PIVOT 创建 SQL-Passthrough 查询以让 SQL Server 进行处理。

编辑：根据修改后的问题添加了以下内容

您也许可以在不使用交叉表的情况下逃脱。这取决于您的查询需要多么灵活，或者您是否可以动态构建查询。对于上面的英国/美国示例，您可以使用：

```
SELECT dbo_ProfileFLS.FName,
       dbo_ProfileFLS.Readable AS [UK Read], 
       dbo_ProfileFLS.Editable AS [UK Edit],
       dbo_ProfileFLS_1.Readable AS [USA Read],
       dbo_ProfileFLS_1.Editable AS [USA Edit]
FROM   dbo_ProfileFLS
INNER JOIN dbo_ProfileFLS AS dbo_ProfileFLS_1
ON     dbo_ProfileFLS.FName = dbo_ProfileFLS_1.FName
WHERE  dbo_ProfileFLS.PName="UK"
  AND  dbo_ProfileFLS_1.PName="USA" 
  AND  (dbo_ProfileFLS.Readable<>[dbo_ProfileFLS_1].[Readable]
       OR dbo_ProfileFLS.Editable<>[dbo_ProfileFLS_1].[Editable]); 
```

如果您真的想使用交叉表，那么问题是您只能使用一列作为值（正如您已经看到的那样）。您可以通过连接 Readable 和 Editable 字段来克服这个问题。由于交叉表使用 Group By 但实际上您想要普通值，因此您需要首先使用聚合函数。例如：

```
TRANSFORM First(Readable & " | " & Editable) AS ReadEdit
SELECT dbo_ProfileFLS.FName
FROM dbo_ProfileFLS
GROUP BY dbo_ProfileFLS.FName
PIVOT dbo_ProfileFLS.PName & " Read | Edit"; 
```

当然，这个查询需要完整的表。要仅获取正确的值，您需要将第一个查询的变体用作过滤器：

```
SELECT dbo_ProfileFLS.ID AS UK_ID,
       dbo_ProfileFLS_1.ID AS USA_ID
FROM   dbo_ProfileFLS
INNER JOIN dbo_ProfileFLS AS dbo_ProfileFLS_1 
ON     dbo_ProfileFLS.FName = dbo_ProfileFLS_1.FName
WHERE  dbo_ProfileFLS.PName="UK"
  AND  dbo_ProfileFLS_1.PName="USA" 
  AND  (dbo_ProfileFLS.Readable<>[dbo_ProfileFLS_1].[Readable]
       OR dbo_ProfileFLS.Editable<>[dbo_ProfileFLS_1].[Editable]); 
```

如果将其命名为 crosstabFilter，则将其与 dbo_ProfileFLS 交叉连接并使用条件：

```
WHERE crosstabFilter.UK_ID=ID OR crosstabFilter.USA_ID=ID 
```

# c# - 是否有一种简单的方法可以将数组存储到 SQL Server CE 数据库中的单个列中？

> ID：15813321
> 
> 赞同：7
> 
> 时间：2013-04-04T13:55:09.397
> 
> 标签：c#, sql-server-ce, webmatrix, asp.net-webpages

我在这里查看了可能的答案（我认为对于 PHP）：[http](http://www.lateralcode.com/store-array-database/) ://www.lateralcode.com/store-array-database/但我找不到序列化/反序列化的 C#.net 版本。

这是否会与我上面的链接中显示的方式相同，或者在给定环境的情况下，我应该使用完全不同的方法吗？

我只是不想为我的 9 个不同数组中的每一个中的 12 个值中的每一个都有一堆不同的列，所以如果有另一种方法来实现这一点（转换为字节 [] 等），我不止愿意听。

如果有帮助，数组将是简单的 string[] 数组。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T14:27:35.313

将您的字符串数组转换为单个字符串，如下所示：

```
 var a = String.Join(",",arrays); 

 //or aim is to provide a unique separator, 
 //i.e which won't be the part of string values itself.
 var a= String.Join("~~",arrays); 
```

并像这样取回它：

```
var arr = a.Split(',');
//or split via multiple character 
var arr = a.Split(new string[] { "~~" }, StringSplitOptions.None); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:00:31.170

试试这个来序列化数组并在 Blob 类型的数据库中创建一个列来存储字节数组。

序列化：

```
 if(array == null)
        return null;
 BinaryFormatter bf = new BinaryFormatter();
 MemoryStream ms = new MemoryStream();
 bf.Serialize(ms, array); 
```

反序列化：

```
String[] array = new String[10];        
BinaryFormatter bf = new BinaryFormatter();     
ms.Position = 0;        
array = (String[])bf.Deserialize(ms); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:47:20.200

> 我只是不想为我的 9 个不同数组中的每一个中的 12 个值中的每一个都有一堆不同的列，所以如果有另一种方法来实现这一点（转换为字节 [] 等），我不止愿意听。

从上面的描述中，看起来您正在使用 RDBMS。

您想在单个列中存储多个值的事实表明设计存在问题。

我同意拥有单独的列可能不是要走的路，特别是如果每​​个数组中的项目数将来可能会发生变化。

考虑将此数据分离到一个单独的表中，并与具有外键关系的原始表进行一对多映射

# mantis - Squash TM - 框架中的错误跟踪器

> ID：15813325
> 
> 赞同：1
> 
> 时间：2013-04-04T13:55:23.393
> 
> 标签：mantis, squash

我在我的工作中使用 squashTM，我想打开我在 squash 选项中定义的 bug 跟踪器（mantis）（在 squash 中有一个选项可以做到这一点）。当我在新窗口中打开它时，一切都是正确的，但在框架中我有一个错误：

```
Load denied by X-Frame options: <mantis_main_page_url> does not permit framing 
```

我在 Firefox 和 IE 中都有这个错误。有什么问题？我查看了 mantis 主页源代码，但不知道搜索和可选更改。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:45:49.943

默认情况下，MatisBT 不允许分帧，这是不可配置的。您可以通过在 core/http_api.php 中注释掉以下行来修补您的安装：

```
 header( 'X-Frame-Options: DENY' ); 
```

使此设置可配置的错误跟踪是[12165：允许在 iframe 中加载螳螂](http://www.mantisbt.org/bugs/view.php?id=12165)。

# mongodb - 如何汇总 Meteor 集合中属性的所有值？

> ID：15813329
> 
> 赞同：4
> 
> 时间：2013-04-04T13:55:35.927
> 
> 标签：mongodb, sum, meteor

例如 ：

```
Object {_id: "9g9ySxozSWn1", name: "test1", price: 1}
Object {_id: "9g9ySxozSWn2", name: "test2", price: 2}
Object {_id: "9g9ySxozSWn3", name: "test3", price: 3}
Object {_id: "9g9ySxozSWn4", name: "test3", price: 6}
Object {_id: "9g9ySxozSWn5", name: "test3", price: 3} 
```

总结所有价格的最佳方法是什么，例如名称是 test3？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T14:36:14.123

如果您不想使用下划线：

```
var total = 0;

MyCollection.find({name:"test3"}).map(function(doc) {
  total += doc.price;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:25:02.227

这是在客户端吗？目前还没有直接支持聚合查询，即使使用聚合查询，minimongo 仍然会以一种或另一种方式进行本地化 map-reduce：

```
total = _.reduce(_.map(MyCollection.find({name:"test3"}).fetch(), 
                function(doc) {
                  //map
                  return doc.price
                }), 
                function(memo, num){ 
                  //reduce
                  return memo + num;
                }); 
```

# javascript - ZeroClipboard - 如何使用

> ID：15813332
> 
> 赞同：2
> 
> 时间：2013-04-04T13:55:43.083
> 
> 标签：javascript, copy, zeroclipboard

我正在使用这个[http://jonrohan.github.io/ZeroClipboard/](http://jonrohan.github.io/ZeroClipboard/)

我花了一整天的时间研究如何使用 ZeroClipboard(ZC)。我什至阅读了说明：[https](https://github.com/jonrohan/ZeroClipboard/blob/master/docs/instructions.md) ://github.com/jonrohan/ZeroClipboard/blob/master/docs/instructions.md 并一步一步地遵循它，但无法做到。

我一次又一次地尝试，但我就是无法让它工作。我什至花了几个小时阅读 stackoverflow 和其他页面上的其他指南，但都无法让它发挥作用。此外，大多数答案都已过时。

任何人都可以编写一个简单的工作 ZC 代码来复制段落标签：

```
<p>Hello, I'm Armesh</p> 
```

然后简单地告诉我 ZC 代码的每一部分，以及你为什么这样写。

我打算使用 ZC 来复制我的生成器生成的引用：http: [//anonoz.com/armesh/](http://anonoz.com/armesh/)

这是我写的代码，所有链接引用都是正确的：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Zero Test</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="javascripts/ZeroClipboard.js"></script>
</head>

<script language="JavaScript">
$(document).ready(function() {

  var clip = new ZeroClipboard($("#copy_button"), {
      moviePath: "javascripts/ZeroClipboard.swf"
    });     
});
</script>

<body>
<button id='#copy_button' data-clipboard-target='to_copy'><b>Copy To Clipboard</b></button>

<p id='to_copy'>123456</p>

</body>
</html> 
```

我还在 Google Chrome 中运行了上面的代码/网页，控制台中没有错误日志。它是空白的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T16:44:07.233

好的，我开始工作了，我也认为我上面发布的代码是正确的。

问题是我在本地进行测试，浏览器通常会阻止 Flash 在本地运行。这就是导致它失败的原因，尽管代码是正确的。

作为最后的手段，我上传到我的网络服务器并在线尝试，它工作正常。

因此，请务必在将 ZeroClipboard 上传到您的 Web 服务器后在线测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T23:43:54.137

您的代码中有一个错误！查看按钮 id-attribute 并删除 '#' ！

并且：如果您希望当前页面上的剪贴板按钮超过 1 个，请使用类属性而不是 id。

它现在工作正常！;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T12:11:52.783

您可以通过添加端口 3000 在本地测试 ZeroClipboard。例如`http://localhost:3000`

# javascript - jQuery 验证添加方法 - 如何返回不同的语言消息？

> ID：15813337
> 
> 赞同：1
> 
> 时间：2013-04-04T13:55:57.983
> 
> 标签：javascript, jquery, validation, jquery-validate

我有一个自定义方法用于返回消息的**bassistance** [jquery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，但问题是我想通过像往常一样简单地添加本地化文件来返回不同语言的默认插件消息。我的问题是如何连接到自定义 addmethod 中的那些默认消息？这是代码：

```
jQuery.validator.addMethod("notEqual", function(value, element, param) {
   return this.optional(element) || value !== param;
}, "This field is required");   //replace this with default language messages 
```

希望我能解释这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:00:21.107

我想你只需要打电话`$.validator.messages`：

```
jQuery.validator.messages.required 
```

所以：

```
jQuery.validator.addMethod("notEqual", function(value, element, param) {
   return this.optional(element) || value !== param;
}, jQuery.validator.messages.required); 
```

# sequence - 使用序列函数时出现“ORA-00928：缺少 SELECT 关键字”错误

> ID：15813340
> 
> 赞同：9
> 
> 时间：2013-04-04T13:56:12.187
> 
> 标签：sequence, sqlplus, ora-00928

对不起，我是 SQLPlus 的新手！

所以在这里，我有一个名为**iowe**的表，我预先加载了四条记录。这是它的样子：

```
名称 数量 序列号
---------- ---------- -------------
普拉文 20500 1
肉山 5000 2
罗希特 5000 3
沙市8000 4

```

直到输入这四条记录，我才知道SQL中的序列函数。所以我试着把它暗示到这张桌子上。我想输入一条新记录，名称为“ **XXX** ”，金额为**500**，并使用序列命令，我希望“**序列号**”自动递增。

所以我创建了一个名为**iowesqn的序列，当我****从 user_sequences 中选择 ***时，它看起来像这样：

```
SEQUENCE_NAME MIN_VALUE MAX_VALUE INCREMENT_BY CO CACHE_SIZE LAST_NUMBER
------------------ ---------- ---------- ------------ - - ---------- ------------
中队 1 5 2 NN 0 3
IOWESQN 1 1.0000E+27 1 NN 0 7

```

***请忽略序列SQN***

要插入序列**IOWESQN**，我使用了以下命令：**“insert into iowe(name, amount, "Serial Number") values('XXX', 500, iowesqn.nextval)"**

一切正常。序列号列在每个条目上都以 1 递增。但是，当我尝试**“插入 iowe ('&name', '&amount', "Serial Number") value(iowesqn.nextval));”时** ，它会询问我的姓名和金额，但就在那时（输入金额后），它会引发错误。它显示：**"ORA-00928: missing SELECT keyword"**。

这是在输入量之后出现的全部内容：

**旧1：插入iowe（'&name'，'&amount'，“序列号”）值（iowesqn.nextval））新1：插入iowe（'ret'，'ert'，“序列号”）值（iowesqn .nextval)) 插入 iowe ('ret', 'ert', "Serial Number") value(iowesqn.nextval)) * 第 1 行出现错误：ORA-00928：缺少 SELECT 关键字**

请告诉我我在（或（极不可能）它是）做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:00:51.397

你的说法是错误的。就那么简单。使用此固定语句：

> 插入 iowe(name, amount, "Serial Number") values('XXX', 500, iowesqn.nextval)

您可能打算用变量代替您的值，而不是您的字段？

> 插入 iowe(name, amount, "Serial Number") values('&name', &amount, iowesqn.nextval)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-23T22:43:52.763

我刚刚发现了另一种情况，我得到“缺少 SELECT 关键字”。我尝试在引号中插入列名，如下所示：

插入订阅（'SUBSCRIPTION_ID'，'SUBSCRIPTION_NAME'，'CREATED_DATE'）值（'558768'，''，'20-JAN-20 10.37.47.901000000 PM'）；

一旦我删除了列名周围的引号，它就起作用了：

插入订阅 (SUBSCRIPTION_ID,SUBSCRIPTION_NAME,CREATED_DATE) 值 ('558768','','20-JAN-20 10.37.47.901000000 PM');

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-22T20:16:53.643

其他用户可能一直在使用`value`而不是`values`. 这是您可能面临此问题的另一种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T18:22:31.350

这是因为您错过了提及列列表

插入表名（1，'alskdjflasf'）

应该像这样插入 table_name (id,name)values(1.'lakjsdflasdf')

# css - 如何隔离 PrimeFaces Widget 不受主站点 CSS 的影响

> ID：15813344
> 
> 赞同：0
> 
> 时间：2013-04-04T13:56:21.943
> 
> 标签：css, jsf, primefaces, datatable

我有一个 (p:dataTable) Primefaces 小部件无法在包含主站点的模板中正确呈现，可能受到更高级别的全局 CSS 设置的影响，但这些设置是强制性的。

有没有办法将小部件与更广泛的 CSS 设置隔离开来。

我已经做了很明显的事情，就是将小部件包含在 IFrame 中，它可以工作，但会产生自己的一系列问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:01:26.927

您的问题有两种解决方案：

1.  对全局 CSS 设置使用更窄的范围。您可能有冲突的类名，或者在页面上的其他元素和小部件之间共享。
2.  将小部件包裹在具有特定类/ID 的容器周围，然后覆盖/重置该容器中元素的样式。

# mongodb - 限制 mongodb 集合中的文档数量，没有 FIFO 策略

> ID：15813347
> 
> 赞同：4
> 
> 时间：2013-04-04T13:56:26.500
> 
> 标签：mongodb

我正在构建一个应用程序来处理门票销售，并期望有非常高的需求。我想尝试将 MongoDB 与服务于 node.js 网站的多个并发客户端节点一起使用（并优雅地处理客户端故障）。

我读过“[限制 mongodb 中集合中的文档数](https://stackoverflow.com/questions/10995868/limit-the-number-of-documents-in-a-collection-in-mongodb)”（完全不相关）和“[有没有办法限制某个集合中的记录数](https://stackoverflow.com/questions/6475905/is-there-a-way-to-limit-the-number-of-records-in-certain-collection)”（但它谈到了上限集合，其中新文档覆盖最旧的文档）。

是否可以将集合中的文档数量限制为某个最大大小，并且在该限制之后的文档将被拒绝。简单的示例是将门票销售添加到数据库，如果所有门票都已售罄，则失败。

我考虑过有一个`NumberRemaining`文档，我可以原子地递减它直到它到达`0`，但是如果一个节点在递减该数字和保存购买票之间崩溃，这会给我留下一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T00:29:40.933

将票证存储在单个 MongoDB 文档中。由于您一次只能以原子方式设置一个文档，因此您不应该遇到可以通过使用传统事务数据库系统解决的文档依赖性问题。

由于一个文档可以达到 16MB，通过只`ticket_id`在主文档中存储 a，您应该能够存储大量票证，而无需进行任何额外复杂的文档管理。虽然它可能会引入热点，但文档可能不会很大。如果它确实变大，您可以使用多个文档（通过将它们拆分为多个文档作为一个文档“填充”，激活另一个文档）。

如果这不起作用，10gen 有一个可能适合的[模式。](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:24:48.757

到目前为止我唯一的解决方案（我希望有人可以改进）：

在文档到达时将其插入到无上限的集合中。保留 的隐含`_id`值`ObjectID`，该值可以排序，因此将按添加文档的时间对文档进行排序。

`_id`运行按最大文档数排序的所有查询。

要确定插入是否“成功”，请运行附加查询以检查新插入的文档是否在最大文档数内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T12:26:05.600

我的解决方案是：我在另一个集合中使用了一个额外的计数变量。此集合具有避免计数变量变为负数的验证规则。计数变量应始终为非负整数。

“计数”：{“$gte”：0}

算法很简单。将计数减一。如果成功插入文档。如果失败，则意味着没有剩余空间。

反之亦然删除。

您还可以使用事务来防止失败（计数减少但服务在插入操作之前失败）。

# java - Android/Java 如何在网站上读取此文件？

> ID：15813353
> 
> 赞同：0
> 
> 时间：2013-04-04T13:56:36.427
> 
> 标签：java, android, file, parsing, memory

## www.rgrfm.be/rgrsite/maxradio/android.php

## www.rgrfm.be/rgrsite/maxradio/onair.txt

正在播放的音乐的曲目信息包含在 onair.txt 中。android.php 是我写的一个 php 脚本。

我需要在我的 Android 应用程序中显示曲目信息。我不想把它下载到磁盘上，而是把它保存在内存中。我不知道 php 脚本是否无用，因为它会产生额外的开销。所以最好简单地解析 onair.txt

```
InputStream is = new URL("http://www.rgrfm.be/rgrsite/maxradio/onair.txt").openStream(); 
```

我被这个困住了。有人有时间帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:06:24.613

如上所述，php 脚本似乎没用。因为，您可以直接读取文本文件。因此，首先将其作为文本读取，然后对其进行解析。

```
URL url = new URL("http://www.rgrfm.be/rgrsite/maxradio/onair.txt");
String text = readAsText(url)
parse(text);

String readAsText(URL url) {
  // read the url as text here.
}

void parse(String text) {

} 
```

# java - 如何提高 Graphics2D 中的图像旋转质量？

> ID：15813361
> 
> 赞同：2
> 
> 时间：2013-04-04T13:56:56.803
> 
> 标签：java, image, rotation, graphics2d, image-rotation

目前我正在使用这段代码（我在[这里](http://flyingdogz.wordpress.com/2008/02/11/image-rotate-in-java-2-easier-to-use/)找到）在 Java 中旋转图像。该代码运行良好，但我对旋转图像的质量不满意。

我该如何改进它？它需要一个单独的库吗？

```
public static BufferedImage rotate(BufferedImage image, float angle) {
    float radianAngle = (float) Math.toRadians(angle) ; 

    float sin = (float) Math.abs(Math.sin(radianAngle));
    float cos = (float) Math.abs(Math.cos(radianAngle));

    int w = image.getWidth() ;
    int h = image.getHeight();

    int neww = (int) Math.round(w * cos + h * sin);
    int newh = (int) Math.round(h * cos + w * sin);

    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();
    GraphicsConfiguration gc = gd.getDefaultConfiguration();

    BufferedImage result = gc.createCompatibleImage(neww, newh, Transparency.TRANSLUCENT);
    Graphics2D g = result.createGraphics();

    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

    g.translate((neww-w)/2, (newh-h)/2);
    g.rotate(radianAngle, w/2, h/2);

    g.drawRenderedImage(image, null);
    g.dispose();

    return result;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T13:14:21.160

你应该设置`RenderingHints.KEY_INTERPOLATION`和`RenderingHints.KEY_RENDERING`。

这是完整的工作代码：

```
public static BufferedImage rotate(BufferedImage image, float angle) {
    float radianAngle = (float) Math.toRadians(angle) ; 

    float sin = (float) Math.abs(Math.sin(radianAngle));
    float cos = (float) Math.abs(Math.cos(radianAngle));

    int w = image.getWidth() ;
    int h = image.getHeight();

    int neww = (int) Math.round(w * cos + h * sin);
    int newh = (int) Math.round(h * cos + w * sin);

    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();
    GraphicsConfiguration gc = gd.getDefaultConfiguration();

    BufferedImage result = gc.createCompatibleImage(neww, newh, Transparency.TRANSLUCENT);
    Graphics2D g = result.createGraphics();

    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON) ;

    // this will further improve the quality
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);

    AffineTransform at = AffineTransform.getTranslateInstance((neww-w)/2, (newh-h)/2);
    at.rotate(radianAngle, w/2, h/2);

    g.drawRenderedImage(image, at);
    g.dispose();

    return result;
} 
```

# shell - 如何获得所需的输出

> ID：15813362
> 
> 赞同：0
> 
> 时间：2013-04-04T13:57:01.027
> 
> 标签：shell, scripting

我从一个 shell 脚本中得到一个输入，比如：

```
USER1_OLD:USER1_NEW,USER2_OLD:USER2_NEW .... 
```

密钥对的数量可以变化。我需要得到如下输出：

```
USER1_OLD,USER2_OLD,...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:05:53.643

一种使用方式`awk`：

```
$ ./script.sh | awk '{printf "%s",NR==1?$1:","$1}' FS=: RS=,
USER1_OLD,USER2_OLD 
```

不清楚您是否想要尾随逗号，如果您这样做，脚本可以更简单：

```
$ ./script.sh | awk '{print $1}' FS=: RS=, ORS=,
USER1_OLD,USER2_OLD, 
```

# python-2.7 - 熊猫：写入数据框

> ID：15813371
> 
> 赞同：1
> 
> 时间：2013-04-04T13:57:32.873
> 
> 标签：python-2.7, pandas

我正在尝试写入 Pandas DataFrame。我有 4 个列表，如有必要，我可以在此 DataFrame 中将其转换为系列。

```
l1
l2
l3
l4 
```

使用这个：

```
df1 = DataFrame(l1)
df2 = DataFrame(l2)
df3 = DataFrame(l3)
df4 = DataFrame(l4) 
```

我能够创建 4 个单独的 DataFrame。但是，我想要 1 个以这 4 个列表作为列的 DataFrame，而不会丢失列表的顺序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:07:28.163

这应该可以解决问题，只需将列表列表提供给数据框构造函数

```
DataFrame([l1, l2, l3, l4]).T 
```

您需要传输数据框，因为它会将您的数据置于错误的方向（按行而不是按列）。如果您需要有意义的名称，您可以在之后设置列名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:08:45.507

```
In [3]: l1 = range(5)

In [4]: l2 = range(5,10)

In [5]: l3 = range(10,15)

In [6]: l4 = range(15,20)

In [10]: pd.DataFrame([l1,l2,l3,l4],index=['l1','l2','l3','l4']).T
Out[10]: 
   l1  l2  l3  l4
0   0   5  10  15
1   1   6  11  16
2   2   7  12  17
3   3   8  13  18
4   4   9  14  19 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:31:46.247

我使用字典的首选方法：

```
In [1]: pd.DataFrame({'l1':l1, 'l2':l2, 'l3':l3, 'l4':l4})
Out[1]:
   l1  l2  l3  l4
0   0   5  10  15
1   1   6  11  16
2   2   7  12  17
3   3   8  13  18
4   4   9  14  19 
```

# jython - 对外直接投资 | 使用 DES 解密文件

> ID：15813372
> 
> 赞同：0
> 
> 时间：2013-04-04T13:57:33.463
> 
> 标签：jython, des

我有一个使用 DES 算法加密的文件。我想通过在 Jython 中编写过程来解密 ODI（Oracle 数据集成器）中的文件。我已经探索了内置函数，但我找不到用于解密的函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T14:06:58.633

您可以使用基于 Python 的库。

pyDes：[http ://twhiteman.netfirms.com/des.html](http://twhiteman.netfirms.com/des.html)

pycrypto：[https ://www.dlitz.net/software/pycrypto/](https://www.dlitz.net/software/pycrypto/)

[使用 DES/3DES 和 python](https://stackoverflow.com/questions/2435283/using-des-3des-with-python)

# arrays - 返回数组中的最大值

> ID：15813373
> 
> 赞同：-5
> 
> 时间：2013-04-04T13:57:38.417
> 
> 标签：arrays, matlab, max

我编写了以下“matlab”代码，它应该返回`maximum`数组中的值：

```
function m = maxi(a)
maximum = a(1,1);
[m,n]=size(a);
for i=1:m
    for j=1:n
        if a(i,j)>=maximum
            maximum = a(i,j)
        else
            maximum = maximum;
        end
    end
end
m = maximum;
end 
```

这里的情况是返回的结果似乎是每次迭代中的最大数量。我怎样才能只返回`one`值，即最大值？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T14:14:36.647

要查找数组中的最大值，建议使用内置函数`max`。请注意，`max`默认情况下沿数组的第一个维度进行操作；要找到整体最大值，您可能希望将数组作为向量传递：

```
overallMax = max(array(:)); 
```

* * *

真的，如果性能很重要，不建议重新实现内置函数。但是，出于教育目的，对代码进行逆向工程可能很有用。

您的函数对我来说运行良好，但我建议您迭代线性索引（类似于您如何将数组转换为上面的向量）。这样，它将适用于任意维度的数组。

```
function mx = maxi(a)
  mx = a(1);
  for ii = 1:numel(a)
      if a(ii) > mx
         mx = a(ii);
      end
  end 
```

# android - 如何以编程方式删除旧版本的应用程序

> ID：15813375
> 
> 赞同：0
> 
> 时间：2013-04-04T13:57:42.017
> 
> 标签：android

当我安装应用程序的新版本时，我想以编程方式删除应用程序以前版本的缓存和所有详细信息。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:09:40.140

首先确定当前应用程序是旧版本，然后通过以下方式将其删除：

```
Uri packageURI = Uri.parse("package: your.application.package");
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI);
startActivity(uninstallIntent); 
```

# php - ZF2新模块断路由

> ID：15813377
> 
> 赞同：2
> 
> 时间：2013-04-04T13:57:47.077
> 
> 标签：php, zend-framework2

我有一个奇怪的问题。如果我有 1 个模块，我的路线会正确匹配并返回页面。将另一个模块添加到应用程序配置和 BANG - 它停止工作并最终出现在我的第二个模块的 Module.php 中（它具有提升并触发大量事件）。

应用程序.config.php

```
<?php
return array(
    'modules' => array(        
        'CMS',
        'AOCS',
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

CMS 模块配置

```
<?php
return array(
    'router' => array(
        'routes' => array(                   
            'Admin' => array(        
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/admin',
                    'defaults' => array(
                        '__NAMESPACE__' => 'CMS\Controller',
                        'controller'    => 'Index',
                        'action'        => 'Login',
                    ),
                ),
                'may_terminate' => true,
            ),
            'Logout' => array(        
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/logout',
                    'defaults' => array(
                        '__NAMESPACE__' => 'CMS\Controller',
                        'controller'    => 'Index',
                        'action'        => 'Logout',
                    ),
                ),
            ),                                    
            'CMS/Welcome' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/aocs/welcome',
                    'defaults' => array(
                        '__NAMESPACE__' => 'AOCS\Controller',
                        'controller'    => 'Welcome',
                        'action'        => 'Welcome',
                    ),
                ),                
            ),                      
        ),
    ),   
    'controllers' => array(
        'invokables' => array(
            'CMS\Controller\Index' => 'CMS\Controller\IndexController',
        ),
    ),
    'translator' => array(
        'locale' => 'en_GB',        
    ),    
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../templates/admin.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',          
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),      
    ),
); 
```

AOCS 模块配置

```
<?php
return array(
    'router' => array(
        'routes' => array(                                         
            'Welcome' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/welcome',
                    'defaults' => array(
                        '__NAMESPACE__' => 'AOCS\Controller',
                        'controller'    => 'Welcome',
                        'action'        => 'Welcome',
                    ),
                ),                
            ),            
            'Mains' => array(
                'type'    => 'segment',
                'options' => array(
                    'route'    => '/aocs[/:controller][/:action][/:id]',
                    'defaults' => array(
                        '__NAMESPACE__' => 'AOCS\Controller',
                        'controller'    => 'Welcome',
                        'action'        => 'Welcome',
                    ),                   
                ),
                'may_terminate' => true,
                'child_routes'  => array(
                    'query' => array(
                        'type' => 'Query',
                    ),
                ),                                               
            ),            

        ),
    ),
    'navigation' => array(
        'menu' => array(
            'page-1' => array(
                'label' => 'Logout',
                'route' => 'Logout',
                'resource' => 'aocs_index_logout'
            ),
            'page-2' => array(
                'label' => 'Login',
                'route' => 'Admin' ,
                'resource' => 'cms_index_login'
            ),
        ),
    ),    
    'service_manager' => array(
        'factories' => array(
          'menu' => 'AOCS\Navigation\MenuNavigationFactory'
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'AOCS\Controller\Welcome' => 'AOCS\Controller\WelcomeController'
        ),
    ),
    'translator' => array(
        'locale' => 'en_GB',        
    ),    
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../templates/admin.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',          
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
        /*'strategies' => array(
            'ViewJsonStrategy',
        ),*/        
    ),
); 
```

来自 CMS 的 Module.php

```
<?php
/**
 * Zend Framework (http://framework.zend.com/)
 *
 * @link      http://github.com/zendframework/ZendSkeletonApplication for the canonical source repository
 * @copyright Copyright (c) 2005-2012 Zend Technologies USA Inc. (http://www.zend.com)
 * @license   http://framework.zend.com/license/new-bsd New BSD License
 */

namespace CMS;

use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;   
use Zend\View\Renderer\JsonRenderer;
use Zend\Di\Di;        
use Zend\Config\Reader\Ini;
use Zend\Navigation\Navigation;

// AH core code
use Core\Classes\setDB;
use Core\Classes\setCache;
use Core\Models\SecurityModel;
use Core\Models\AclModel;

class Module
{   
    public function onBootstrap(MvcEvent $e)
    {
        $sm = $e->getApplication()->getServiceManager();

        $eventManager        = $e->getApplication()->getEventManager();
        $moduleRouteListener = new ModuleRouteListener();
        $moduleRouteListener->attach($eventManager);       

        // Set config - required throughout
        $reader = new Ini;
        $sm->setService('configIni',$reader->fromFile('./config/application.ini'));        

        // Setup a Database connection
        $sm->setService('setDB',new setDB($sm,'database')); 

        // Setup Caching
        $sm->setService('setCache',new setCache($sm));

        /*$eventManager->attach('dispatch', function ($sm) use ($controllers) {
          print'<pre>[CMS]';print_r($sm->getRouteMatch());print'</pre>';
          exit;         
        }, 100); // execute before executing action logic*/         

        // Assign system names to view models so we can set across templates
        $view = $e->getViewModel();
        $config = $sm->get('configIni');
        $view->setVariable('systemname',$config['system']['name']);
        $view->setVariable('systemshort',$config['system']['shortname']);                             
    }    

    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }
} 
```

我错过了一些明显的东西吗？它真的很烦人！

谢谢

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:26:28.883

解决它！

爆炸是我在 2x Modules.php 中有一个调度，由于某种原因自动触发。作为第二个检查用户是否登录并且他们没有被重定向导致问题。

这个问题与我的配置无关，它似乎（除非我错过了明显的）这是 ZF2 中的一个错误，其中调度事件与调用它们的模块无关，但都自动运行。

因此，如果我的页面位于 CMS 模块中，则 AOCS 模块 > 引导程序仍在运行。为什么？？

感谢关于 type = Query 的观点 - 将更新。

# java - 如何在其他正方形的中心内绘制和旋转正方形？

> ID：15813379
> 
> 赞同：2
> 
> 时间：2013-04-04T13:57:53.470
> 
> 标签：java, swing, user-interface, graphics, graphics2d

我需要在另一个正方形内绘制一些正方形，但我不知道如何按它们的中心旋转我的正方形并使它们变小？这是最后应该是什么样子的图片：

![在此处输入图像描述](https://i.stack.imgur.com/DRl0m.jpg)

现在我有一些代码可以绘制成圆形的正方形。

```
class MySquare  extends JComponent {
public void paint(Graphics g) {

    Graphics2D g2d = (Graphics2D) g;
    for (int i = 0; i < 20; i++) {

        g2d = (Graphics2D) g.create();
        g2d.rotate(Math.toRadians(45 - (i * 10)), 100, 100);

        // Difrent colors:
        if (i % 2 == 0)
            g2d.setColor(Color.black);
        else
            g2d.setColor(Color.green);
        g2d.fillRect(50, 50, 100, 100);

    }
    }
}

public class DrawRect {
  public static void main(String[] a) {
    JFrame window = new JFrame();
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setBounds(30, 30, 800, 800);
    window.getContentPane().add(new MySquare());
    window.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T14:09:47.303

您可以先在原点周围绘制图形（这很容易），然后翻译：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setSize(400, 400);
        frame.setVisible(true);

        frame.add(new JPanel() {

            @Override
            protected void paintComponent(Graphics g) {
                Graphics2D g2d = (Graphics2D) g;

                double alpha = Math.toRadians(5);
                double factor = 1 / (Math.sin(alpha) + Math.cos(alpha));
                double size = 200;

                g2d.translate(size, size);

                for (int i = 0; i < 20; i++) {
                    g2d.setColor(i % 2 == 0 ? Color.black : Color.green);

                    int intSize = (int) Math.round(size);

                    g2d.fillRect(-intSize / 2, -intSize / 2, intSize, intSize);

                    size = size * factor;

                    g2d.rotate(alpha);
                }
            }
        });
    }
} 
```

![截屏](https://i.stack.imgur.com/UwS2k.png)

# php - 使用 apache 服务器获取域名后的所有内容

> ID：15813380
> 
> 赞同：0
> 
> 时间：2013-04-04T13:57:58.773
> 
> 标签：php, apache, .htaccess

我想让所有东西都包括 apache webserver、php、htaccess 中的特殊字符（仅限）

当用户键入

www.domain.com/whatever+here+must+get+back+include+special+character

特殊字符，例如 + ? \ # &

现在我有了这个 htaccess 代码，它只能很好地工作，但不适用于我上面提到的特殊字符

```
#将所有内容路由到 index.php
重写引擎开启
RewriteBase /
RewriteRule ^(.*)$ index.php?everything=$1 [L,QSA]

```

然后在我的 index.php 中，我有

```
回声 $_GET['一切'];

```

我希望它真正 GET 一切包括特殊字符，如 + ？\ # &

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:08:22.083

不要使用`echo $_GET['everything'];`，改用这个：

```
$url = $_SERVER['REQUEST_URI'];
$url_array = explode('?',$url);
array_shift($url_array);
$everything = implode('?', $url_array);
echo $everything; 
```

看：**[演示](http://codepad.org/xdYnx8Gx)**

**编辑：** 我认为使用服务器端脚本（PHP）在哈希（#）之后不可能得到任何东西，因为它没有发送到服务器。你必须使用javascript；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:02:33.910

只需添加[NE](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_ne)标志。像这样：

```
RewriteRule ^(.*)$ index.php?everything=$1 [L,QSA,NE] 
```

# c++ - 在对象池实现中构造对象的自定义函数？

> ID：15813381
> 
> 赞同：2
> 
> 时间：2013-04-04T13:57:58.950
> 
> 标签：c++, function-binding

我正在编写一个自定义对象池，因为我找不到任何符合我的应用程序特定要求的对象池。对象池本身遵循*“如果存在则从列表中获取预分配对象，否则创建一个新对象并添加到预分配对象列表”*的简单模型。到目前为止一切顺利：在多线程的情况下锁定，返回对象构造/销毁时的 RAII，并且它已被模板化，以便我可以将任何对象类型指定为“池”。

现在我正在完成我的最后一项任务。我希望能够允许客户端指定一个自定义函数来使用它构造一个在请求时返回的新对象，而不是默认的构造函数`new _obj()`。推理以便可以使用非默认构造函数，也许有人可能想要预先绑定一些参数并将该有界构造函数用作分配方法。一个简化的使用示例：

```
class obj {
  obj(int x) { ... }
};

void foo() {
  object_pool<obj> pool(bind(&obj::obj, 1))
  obj *o = pool.acquire()  // obj pool will construct as "new obj(1)"
} 
```

我一直在研究`allocator`，这似乎比对象构造更适合与低级内存相关的性能。我也考虑`boost::bind`过`boost::function`or `functor`，这似乎更适合我试图解决的问题。

我敢肯定这已经完成了 - 那么，典型的方法是什么？

# backbone.js - _Underscore 中的迭代器计数

> ID：15813384
> 
> 赞同：0
> 
> 时间：2013-04-04T13:58:15.597
> 
> 标签：backbone.js, underscore.js

我想在一个小节中创建几个节拍（使用 SVG），并将它们放在一起。我有点困惑如何跟踪 underscore.js 中的迭代器以在函数本身中使用。

这是我所拥有的：

```
_.each(beats, function(beat) {
      // create a beatview
      var measurePassingToBeatViewParamaters = {
        beatXLocation: beatXLocation 
        // i want this to be something like beatXLocation: beatXLocation * beatCountIterator 
      };

      new beatView(measurePassingToBeatViewParamaters); //backbone View
      //  then somewhere increase the beatCountIterator ++;
    }, this);   //this is a measure 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:27:41.563

[给你](http://underscorejs.org/#each)。
"*每次调用迭代器时都使用三个参数：（元素、索引、列表）。* "

**编辑：**

```
_.each(beats, function(beat, index) 
```

或者：

```
_.each(beats, function(beat) {
  index = arguments[1]; 
```

对不起，如果这不是你的意思。

# sql - 我的 2 个表的确切 sql 查询字符串

> ID：15813385
> 
> 赞同：0
> 
> 时间：2013-04-04T13:58:20.533
> 
> 标签：sql, ms-access-2007

我哥帮我设计了一个sql字符串，用于我的access 2007数据库

```
 SELECT Employee.EmpID, Employee.Name, Sum(DateDiff("s",Punches.LogIN,Punches.LogOUT)) AS THours
FROM Punches INNER JOIN Employee ON Punches.EmpID=Employee.EmpID
GROUP BY Employee.Name, Employee.EmpID; 
```

此 sql 字符串将显示来自两个表 (Employee, Punches) 的信息 Employee's ID, Name, THours (Total Hours of work)

样本结果：

```
EmpID   Name    THours
0001    Emp1    14560
0003    Emp3       13
0004    Emp4    43585 
```

我的问题是我还想在打孔表中显示那些还没有总工作时间但已经在员工表中的员工。

像这样

```
EmpID   Name    THours
    0001    Emp1    14560
    0002    Emp2       0
    0003    Emp3       13
    0004    Emp4    43585 
```

知道如何实现吗？先感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:05:48.040

你应该使用`LEFT JOIN`

```
SELECT Employee.EmpID, Employee.Name, Sum(NZ(DateDiff("s",Punches.LogIN,Punches.LogOUT),0)) AS THours
FROM Employee 
LEFT JOIN Punches  
    ON Punches.EmpID=Employee.EmpID
GROUP BY Employee.Name, Employee.EmpID
ORDER BY Employee.EmpID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:02:21.810

```
SELECT Employee.EmpID, Employee.Name, Sum(DateDiff("s",COALESCE(Punches.LogIN, 0),COALESCE(Punches.LogOUT, 0)) AS THours
FROM Employee 
LEFT JOIN Punches
ON Punches.EmpID=Employee.EmpID
GROUP BY Employee.Name, Employee.EmpID; 
```

# sql - 选择 * WHERE val = MIN ( val )？

> ID：15813386
> 
> 赞同：0
> 
> 时间：2013-04-04T13:58:20.623
> 
> 标签：sql, oracle, select, minimum

我对 Oracle SQL 还很陌生，但它的逻辑已经开始让我感到困惑。我正在尝试从特定列 PRICE 具有最小值的表中选择所有列。

这有效：

```
SELECT MIN(PRICE) FROM my_tab; 
```

这将返回最小值。但是为什么我不能选择该行中的所有列？以下将不起作用：

```
SELECT * FROM my_tab WHERE PRICE = MIN( PRICE ); 
```

我在这里想念什么？干杯，伙计们！

****编辑****

这是我遇到问题的完整代码：

SELECT * FROM (SELECT c.NAME, o.* FROM customers c JOIN customer_orders o ON c.CUST_NBR = o.CUST_NBR) AS t WHERE t.PRICE = (SELECT MIN(t.PRICE) FROM t);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:59:53.173

```
SELECT * FROM TABLE WHERE PRICE = (SELECT MIN(PRICE) FROM TABLE)

--Edited 

WITH 
TABLE AS 
(QUERY) 
SELECT * FROM TABLE
WHERE PRICE = (SELECT MIN(PRICE) FROM TABLE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:00:12.273

您还可以使用子查询来获取结果：

```
select t1.*
from my_tab t1
inner join
(
  SELECT MIN(PRICE) MinPrice
  FROM my_tab
) t2
  on t1.price = t2.minprice 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:30:28.543

请参阅之前的 SO[问题](https://stackoverflow.com/questions/3451534/how-to-do-top-1-in-oracle)，尤其是最适合您的目的的“Vash”回答。请注意，您可能希望避免子选择，因为 Oracle 可能足够聪明，可以在价格上使用索引（如果可以只查看一条记录）。

大多数数据库，但显然不是 Oracle，对此类问题都有`TOP 1`or`LIMIT`子句。

# php - Phonegap Android 应用程序 - 保护数据流量

> ID：15813388
> 
> 赞同：2
> 
> 时间：2013-04-04T13:58:21.673
> 
> 标签：php, javascript, security, cordova

My PhoneGap android 应用程序需要用户登录，它需要在登录后向用户显示某些信息。（应用程序从 PHP 服务器检索 XML，使用 AJAX）

我搜索了许多博客/论坛和许多 stackoverflow 帖子，试图提出最好的安全选项/功能。我想实现以下安全选项。

*   使用 HTTPS (http +ssl) 保护流量
*   [服务器端] 用户代理检查。
*   对 phonegap JS 文件进行 CRC 检查，并将结果与​​信息请求一起发送。然后让服务器将 CRC 结果与应有的结果进行比较。（所以如果有人反编译了应用程序，更改了代码，然后再次编译......我们会知道）
*   该应用程序只能从服务器请求数据。并且不删除/更新任何数据。
*   混淆/加密javascript文件......只是为了让它更难de

如果Phonegap可以做到以下几点

*   将 android UID/设备 ID 添加到我的数据库中。因此，只有列入白名单的设备才能访问。

我应该使用更多的安全功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:42:33.833

1.  HTTPS 必须用于会话的生命周期。[OWASP A9](https://www.owasp.org/index.php/Top_10_2010-A9-Insufficient_Transport_Layer_Protection)
2.  用户代理是攻击者控制的变量。检查这个变量是没有意义的，因为它很容易被欺骗。
3.  CRC 不是安全的散列函数。绕过此检查我进行修改然后添加填充以创建相同的 CRC 是微不足道的。如果用户修改了您的应用程序，则可以删除您的废话 CRC 检查。
4.  服务器**必须**强制执行访问控制，假设攻击者可以向您发送任何请求。
5.  尽管默默无闻，但不要依赖（不）安全。
6.  用户可以发送他们想要的任何请求，因此他们可以欺骗此标识符。

攻击者不必修改您的 JavaScript 即可修改 HTTP 请求。攻击者可以使用 BURP 代理或类似工具在请求到达您的服务器之前拦截和修改请求。阅读[OWASP 前 10 名](https://www.owasp.org/index.php/Category%3aOWASP_Top_Ten_Project)，确保您的后端 API 没有常见缺陷。

# sql - 如何使用 Visual Basic 从其中 text = value1 的 XML 填充下拉列表？

> ID：15813390
> 
> 赞同：0
> 
> 时间：2013-04-04T13:58:24.233
> 
> 标签：sql, xml, vb.net, drop-down-menu

我有一个下拉列表，需要根据另一个下拉列表的选择加载特定值。我尝试使用 set 从 sql 执行`DISTINCT`此操作，但未返回正确的值：

```
SELECT DISTINCT RMRP_Label, RMRP_Type FROM Table 
WHERE RMRP_Type IN (" + search + ") 
```

由于某种原因，它不断更改 DropDownList.SelectedItem.Text 值......所以我制作了一个 XML 文档：

```
<p>

 <param Name = "Intake_ID"
 Value = "!hssCombo"></param>  

 <param Name = "Office_ID"
 Value = "#hssCombo"></param>  

 <param Name = "sub_obj"
 Value = "%hssCombo"></param>  

 <param Name = "Svc_ID"
 Value = "!hssCombo"></param> 
```

例如，我需要的是`Name`从这个 xml where`Value = "#hssCombo"`或者更确切地说 where`Value = search`在 select 语句中的值填充下拉列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:56:19.590

您可以使用以下 XPath 选择值：

> //p/param[@Value='#hssCombo']/@Name

XPath 是查询 XML 文档的标准方法，因此值得学习。大多数 XML 工具都支持 XPath，包括 .NET 和 XSLT。以下是路径部分的含义：

*   `//p`-`p`是我们正在寻找的元素的名称。双斜杠表示该元素可以出现在文档中的任何位置。如果我们只想包含`p`出现在根目录的元素，我们可以使用一个斜杠使其成为绝对路径。
*   `/param`- 指定元素下的子`p`元素
*   `[@Value='#hssCombo']`- 指定一个条件。只有`//p/param`符合条件的元素才会被包括在内。在这种情况下，条件指定元素的`Value`属性必须等于。该符号表示这是一个属性，而不是子元素名称。`param``#hssCombo``@``Value`
*   `/@Name`- 指定我们对元素的`Name`属性值感兴趣。`param`

如果您正在使用`XmlDocument`该类，则可以使用`SelectSingleNode`and`SelectNodes`方法选择具有 XPath 的节点。例如：

```
Dim node As XmlNode = doc.SelectSingleNode("//p/param[@Value='#hssCombo']/@Name")
If node IsNot Nothing Then
    Dim name As String = node.InnerText
End If 
```

显然，就像在您的 SQL 示例中一样，您可以动态构建 XPath，因为它只是一个字符串，如下所示：

```
doc.SelectSingleNode("//p/param[@Value='" & search & "']/@Name") 
```

如果您正在使用`XDocument`该类，您还可以使用 XPath 使用`XPathEvaluate`、`XPathSelectElement`和`XPathSelectElements`方法进行选择。

# java - for循环创建阿基米德螺旋的麻烦

> ID：15813393
> 
> 赞同：0
> 
> 时间：2013-04-04T13:58:28.450
> 
> 标签：java, loops, for-loop, infinite

我很难找到我的程序有什么问题。当我执行它时，它似乎陷入了无限循环（或类似的东西），我无法弄清楚我的程序出了什么问题。这是我到目前为止所拥有的：

```
public class Spiral extends JComponent{

int WIDTH = 0;
int HEIGHT = 0;

public Spiral(int WIDTH, int HEIGHT) {
    this.WIDTH = WIDTH;
    this.HEIGHT = HEIGHT;
}

 public void paintSpiral(Graphics g){
    double a = 3;
    double b = 0;
    double t = 0;
    double theta = Math.toRadians(t);
    double r = theta * a + b;
    double pi = Math.PI/180;
    double end = 720 * pi;

    int middle_x = WIDTH / 2;
    int middle_y = HEIGHT / 2;

    for (theta = 0; theta < end; theta += pi) {
        double x = Math.cos(theta) * r + middle_x;
        double y = Math.sin(theta) * r + middle_y;
        int xx = (int) Math.round(x);
        int yy = (int) Math.round(y);
        g.drawLine(xx, yy, xx + 10, yy + 20);
    }

}

public void paintComponent(Graphics g) {
    paintSpiral(g);
}

public static void main(String[] args) {
    int WINDOW_WIDTH = 1024;
    int WINDOW_HEIGHT = 1024;

    JFrame frame = new JFrame();

    frame.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);

    // Set the title of the window
    frame.setTitle("Archimedean Spiral");

    // Make a new Spiral, add it to the window, and make it visible
    Spiral d = new Spiral(1024, 1024);
    frame.add(d);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

}

我必须使用图形，这就是为什么我让 Math.round 将 x 值更改为整数，以便我可以实际绘制线条。这就是我怀疑的问题，但我似乎无法解决它。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:11:42.977

循环变量`t`的类型为`int`，因此`t += pi`实际上是无操作的，从而导致无限循环。

`t`应该是类型`double`。此外，它应该是本地的，`paintSpiral`而不是类的成员。我不明白您为什么使用`t`（为零）来初始化`r`.

此外，您的度数和弧度似乎都很混乱。

# javascript - 为什么 foo & bar 在比较时不返回 true？(jQuery)

> ID：15813394
> 
> 赞同：0
> 
> 时间：2013-04-04T13:58:32.890
> 
> 标签：javascript, jquery

我试图做一个比较。当用户第一次单击文档名称时，该名称应存储为变量。当用户添加或减去名称时，就会发生一些事情。（除非名称返回到原始名称；存储在变量中）。

这两个变量似乎不相等，或者我使用了错误的比较，我不确定如何实现这一点。

我的标记：

```
<td class="document-name" contenteditable="true"><?= str_replace('_',' ',$document->name); ?> </td> 
```

我的 jQuery：

```
$(document).ready(function(){
      $('.document-name').keyup(function(){
        var bar=$(this).html().replace(/&nbsp;/g,'');
        var foo=$(this).data("oldName");
        console.log("oldName is:" + foo);
        console.log("Bar is:" + bar);
        if(foo===bar){
          console.log("foo and bar are the same")
        }
      }).click(function(){
        $(this).data("oldName",$(this).html().replace(/&nbsp;/g,''));
      });
    }); 
```

# iphone - UITableViewController：如果满足条件，则启用滑动删除

> ID：15813400
> 
> 赞同：1
> 
> 时间：2013-04-04T13:58:57.017
> 
> 标签：iphone, ios, ios6, uitableview, swipe

为了 UIViewController 重用目的，我只想在满足条件的情况下允许“滑动删除”手势。有没有办法做到这一点？

如果我添加以下 UITableViewController 委托方法：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath { 
```

“滑动删除”已启用，但我无法区分在哪些情况下我想禁用此手势

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:01:57.963

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)aTableView
        editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    BOOL someCondition = // figure out whether you want swipe to be available
    return (someCondition) ?
        UITableViewCellEditingStyleDelete : UITableViewCellEditingStyleNone;
} 
```

来自我本书这一部分的结尾：

[http://www.aeth.com/iOSBook/ch21.html#_deleting_table_items](http://www.apeth.com/iOSBook/ch21.html#_deleting_table_items)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:01:29.990

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (UITableViewCellEditingStyleDelete==YES)
    {
          // here goes your code
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:07:44.560

将您的逻辑放在委托方法中

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)aTableView
    editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# 例如

只允许对奇数行进行编辑：

```
-(UITableViewCellEditingStyle)tableView:(UITableView *)aTableView
        editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row % 2 == 1)
    {
        return UITableViewCellEditingStyleDelete;
    }
    else return UITableViewEditingStyleNone;
} 
```

## 百分号？！

这是我喜欢教的东西，因为它在很多情况下都非常有用 - 在代码块中`indexPath.row 2 == 1`，正在检查 indexPath 的行是否为奇数。它是这样工作的：百分号称为模数。它所做的是它执行除法就像你在一张纸上一样，然后进行剩余的计算——一旦你理解了这一点，你就会看到它是多么的强大。例如，您可以检查一个数字是否可以被另一个数字整除。

在我们的示例中，我们正在查看将行除以 2 时的余数。如果它是 0，我们知道它可以被 2 整除，因此它是偶数。但是，如果它返回 1，则该行是奇数。这是一个了不起的工具。

# asp.net-mvc-4 - 意外的标记 '。' 使用 MVC 4 捆绑样式表时

> ID：15813404
> 
> 赞同：0
> 
> 时间：2013-04-04T13:59:08.440
> 
> 标签：asp.net-mvc-4, bundling-and-minification

**BundleConfig.cs**

```
bundles.Add(new StyleBundle("~/Content/styles").Include(
   "~/Content/css/test.css"
   )
); 
```

**_Layout.cshtml**

```
@Scripts.Render("~/Content/styles") 
```

**测试.css**

```
body{
font-size: 75%;
color: #232323;
text-align: left;
margin: 0px;
padding: 0px;} 
```

这是 Chrome 显示为正在加载给我一个关于意外令牌 { 的语法错误：

```
body{font-size:75%;color:#232323;text-align:left;margin:0;padding:0} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:54:20.597

我会为他提供的链接选择 Abi 的答案，但这是评论而不是答案。因此，我将其发布为答案，以确保将此问题标记为已解决。

基本上，Abi 提供的链接表明错误的原因是浏览器试图加载 css，就好像它是 javascript 一样。

我马上意识到我正在使用 @Scripts.Render() 并且应该一直使用 @Styles.Render() 。

# php - 使用 cURL 在 PHP 中转发任何类型的 $_POST 数据

> ID：15813407
> 
> 赞同：0
> 
> 时间：2013-04-04T13:59:17.003
> 
> 标签：php, post, curl, libcurl

我正在编写一个小型代理服务器供我个人在 PHP 中使用。转发网页的请求，我还必须转发 $_POST 数据，但一般我不知道 POST 中的数据类型。

如果 POST 包含一些表单数据，这很简单：

```
private function preparePostData() {
    if (count($_POST) > 0) {
        curl_setopt($this->ch, CURLOPT_CUSTOMREQUEST, 'POST');
        curl_setopt($this->ch, CURLOPT_POST,true);
        $post = http_build_query($_POST);
        curl_setopt($this->ch, CURLOPT_POSTFIELDS, $post);
    }
} 
```

但如果 $_POST 包含其他类型的数据（JSON、文件等），这将不起作用。所以我想知道是否存在一种通用方法来使用 cURL 转发任何类型的 $_POST 数据。

# c - 使用 scanf() 函数

> ID：15813408
> 
> 赞同：1
> 
> 时间：2013-04-04T13:59:17.020
> 
> 标签：c, scanf

我打算修改一个特定字符串的每个其他字母。但就本计划而言，这一切都没有发生。到目前为止，我已经从用户那里获取了一个字符串并将其存储`userinput`并打算打印它。

```
#include <stdio.h>
#include <string.h>

int main(void) {    
char userinput[256] ="";
printf("Enter somthing to change:\n");
scanf("%s", &userinput);
printf("%s\n", userinput);

int k = 2; // This is just here to do something every time k is even
int j = strlen(userinput);
for (int i = 0; i < j; i++) {

    if(k % 2 == 0) {
        printf("%s", userinput[i]);
        k++;
    }
    else {
        printf("%s", userinput[i]);
        k++;
    }
}

} 
```

但是，该`strlen()`功能不适用于`userinput`. 我认为这是因为`strlen()`应该获取字符串的第一个字符的地址，然后迭代直到达到空字符，但 scanf 实际上并没有创建空字符。在不知道字符串长度的情况下，我无法想出`'\0'`在字符串之后添加的方法。

如果存储在数组中，我将如何访问存储的字符序列的长度？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T14:01:21.767

这：

```
scanf("%s", &userinput); 
```

应该：

```
scanf("%s", userinput); 
```

操作员的地址`&`不是必需的，并且不正确。数组在传递给函数时衰减到其第一个元素的地址。`scanf("%s")`将附加一个空终止字符，因此无需显式插入一个。

为防止潜在的缓冲区溢出，请指定`scanf()`应写入的最大字符数`userinput`。这应该比 的大小小一`userinput`，为终止的空字符留出空间：

```
scanf("%255s", userinput); 
```

不正确的格式说明符（这是未定义的行为）被用于打印: use `char`not的行为者。这：`userinput``%c``%s`

```
printf("%s", userinput[i]); 
```

一定是：

```
printf("%c", userinput[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:02:55.083

改变这个

```
scanf("%s", &userinput); 
```

和

```
scanf("%s", userinput); 
```

我们必须使用地址`scanf`：

*   如果我们要扫描到 an`int a`那么我们必须使用=>`scanf()`的地址调用`a``&a`
*   如果我们要扫描到 a`double a`那么我们必须用=>`scanf()`的地址调用`a``&a`
*   但是如果我们要用指针（内存地址）`int *a;`或字符数组扫描数据，`char a[50];`那么我们必须`scanf()`用指针或数组调用而不添加`&`

从[scanf()](http://www.cplusplus.com/reference/cstdio/scanf/)页面

> 根据格式字符串，该函数可能需要一系列附加参数，每个参数都包含一个指向已分配存储空间的指针，其中提取的字符的解释以适当的类型存储。这些参数的数量至少应与格式说明符存储的值的数量一样多。该函数会忽略其他参数。这些参数应该是指针：要将 scanf 操作的结果存储在常规变量上，它的名称应该以引用运算符 (&) 开头（参见示例）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:11:31.967

改变

```
scanf("%s", &userinput); 
```

到

```
scanf("%s", userinput); 
```

在`&`字符串捕获的情况下不需要运算符。自动将`scanf()`空字符（`'\0'`）附加到字符串的末尾，因此`int j = strlen(userinput);`应该可以工作。

如果你仍然想在没有这个函数的情况下有效地计算长度，这里是链接[如何有效地计算 C 中字符串的长度？](https://stackoverflow.com/q/2070566/2006839)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:23:03.627

正如其他人所指出的那样，您对类型感到困惑。当您对类型感到困惑时使用 scanf 和 printf 是危险的！

> scanf("%s", &userinput);

的类型`&userinput`是`char (*)[256]`，但 scanf 期望`%s`对应于 a `char *`。由于预期的类型和给定的类型不同并且不需要具有相同的表示，因此行为是未定义的。

> 我认为这是因为 strlen 应该获取字符串的第一个字符的地址，然后迭代直到达到空字符，但 scanf 实际上并没有创建空字符。

错误的。`%s`当您使用格式说明符时，scanf 肯定会分配一个空字符。也就是说，提供 scanf 不会遇到错误或 EOF。关于这一点，您可能应该检查 scanf 中的错误：

```
if (scanf("%s", userinput) != 1) {
    /* Insert error handling here */
} 
```

...就像您应该使用C 中的*所有*标准库函数一样。

`k`是没有意义的。`i`您的循环已经以与 相同的频率递增`k`。

strlen 返回一个`size_t`. 确保以正确的类型存储返回值。如果函数返回`size_t`，则将返回值存储在`size_t`. 如果函数返回`int`，则将返回值存储在`int`. 知道了？无论返回类型是什么，都是您用来存储返回类型的任何类型。使用手册找出答案。

> `printf("%s", userinput[i]);`

又是那种类型的混淆。`userinput[i]`是一个`char`。`%s`告诉 printf 期待一个`char *`. 当参数无效时，行为未定义。这可能会导致您的程序出现故障。考虑`printf("%c", userinput[i]);`或`printf("%s", &userinput[i]);`。

# iphone - 为什么我的 .aif 短声音文件只能在 iOS 模拟器上播放，而不能在设备上播放？

> ID：15813409
> 
> 赞同：3
> 
> 时间：2013-04-04T13:59:17.120
> 
> 标签：iphone, ios, objective-c, audio

我希望根据按下的按钮在我的 iPhone (iOS 6.1) 上播放声音。

在转换为 aif、caf、wav 和压缩格式后，我无法在设备上听到声音。已检查音量，已重新启动设备，文件名中不包含大写字母。

我阅读了很多关于这个问题的主题，但找不到合适的解决方案，这意味着我的问题要么更复杂，要么很愚蠢——当然很愚蠢。

这是我播放声音的代码：

```
// Plays sound of given filename
- (void) playSound:(NSString*)name {
    SystemSoundID sound = [self createSoundID:name];
    AudioServicesPlaySystemSound(sound);
    NSLog(@"file played: %@",name);
}

// Creates a playable sound out of filename
-(SystemSoundID) createSoundID:(NSString*) name
{
    NSString *path = [NSString stringWithFormat: @"%@/%@",
                      [[NSBundle mainBundle] resourcePath], name];

    NSURL* filePath = [NSURL fileURLWithPath: path isDirectory: NO];
    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)filePath, &soundID);
    return soundID;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:42:38.140

如果声音在模拟器上可以正常工作，但在真实设备上却不行，这意味着您应该打开设备的**Ringer and Alert Settings**。您还应该检查静音按钮是否打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T14:13:07.570

问题是调用 playSound 的方法没有使用 NSTimer 调用。似乎要播放声音，它们必须由应用程序的主线程调用（这似乎是合法的......）。

所以我修改了应用程序，以便主线程可以调用这些声音，瞧，它也可以在设备上运行。上面的代码是正确的。

# mysql - 如果未知，我如何在 Mysql 中插入值？

> ID：15813410
> 
> 赞同：0
> 
> 时间：2013-04-04T13:59:23.023
> 
> 标签：mysql, database

你好朋友我需要关于 Mysql 的帮助。我的数据库看起来像这个
表名 = 用户

行

```
id = "7" | YourLastIP = "" 
```

我的查询是：

```
UPDATE users SET `YourLastIP` = `XX.XX.XX.XX` WHERE `id` = `7` 
```

我想插入，但它也不适合我，请指导我

```
 INSERT INTO Users `YourLastIP` = (`XX.XX.XX.XX`) WHERE `id` = `7` 
```

如果表值未知，请帮助我如何插入值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:02:22.110

您正在使用反引号，这意味着在 MySQL 中您的意思是列名，而不是文本。请改用单引号`'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:02:30.953

首先，问题是你已经用反引号包裹了这个值，这应该是单引号，因为它是一个字符串文字。

```
UPDATE users SET `YourLastIP` = 'XX.XX.XX.XX' WHERE `id` = '7' 
```

其次，`INSERT ... ON DUPLICATE KEY UPDATE`如果您想要`UPDATE`现有的*ID*，或者`INSERT`如果它不存在，则使用它。

```
INSERT INTO users(ID, YourLastIP)
VALUES (7, 'ip_here')
ON DUPLICATE KEY UPDATE YourLastIP = 'ip_here' 
```

*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:07:14.490

在定义中使列 NULLABLE

然后，

```
CREATE TABLE PRO(ID INT, YOURLASTIP VARCHAR(15));
INSERT INTO PRO values(4, "xxx.xxx.xxx.xxx"); 
```

# php - PHP - 在字符串中打印命名空间常量？

> ID：15813415
> 
> 赞同：3
> 
> 时间：2013-04-04T13:59:32.007
> 
> 标签：php, string, constants, representation, string-interpolation

我有以下测试代码：

```
namespace Test {
    const ONE = 50;

    class A {
        const TWO = 5;

        public function pA($string) {
            return $string;
        }
    }

    $a = new A();
    print $a->pA($a::TWO);
    print "This is a string: {$a->pA($a::TWO)}";
    print "This is a namespace constant: " . ONE;
    print "This is a namespace constant: " . \Test\ONE;
} 
```

所有这些示例都有效，但这不是我想要的。

我可以使用字符串组合来表示前两个示例中的常量吗？我已经尝试了很多组合，比如`"${\Test\B}"`or `"${B}"`or`"${\B}"`但是，到目前为止，没有运气。

也许这是不可能的，我做得过火了，但无论如何......有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:05:21.453

这行不通。您可以在双引号字符串中使用 $ 变量、函数或对象方法调用，但不能使用常量。请参阅 PHP[字符串解析文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)。你会发现很多有用的例子。

# c# - ASP.NET 中的异步响应

> ID：15813417
> 
> 赞同：0
> 
> 时间：2013-04-04T13:59:36.917
> 
> 标签：c#, asp.net, multithreading, asynchronous, concurrency

我目前正在做一个电子商务项目，我需要一些关于我的付款页面的帮助。在结帐页面，我得到了用户的支付信息，它只是一个 GSM 号码，我将其发布到支付系统服务，该服务返回一个同步响应。响应可以是“OK”、“NOT OK”、“AWAIT”和“TIMEOUT”。OK 表示支付成功，NOT OK 表示支付不成功，当然“TIMEOUT”表示支付操作超时。

棘手的部分是“等待”。该服务的超时时间为 4 分钟。这 4 分钟用于用户通过他/她的手机完成他/她的付款。支付系统以这样不同的方式工作，当我开始支付过程时，服务立即返回“等待”并向用户的智能手机发送通知。此通知启动，我们称其为自定义钱包，自定义钱包应用程序。然后，用户选择他/她在此自定义钱包系统中预定义的支付卡并确认支付。用户有 4 分钟的超时时间。在这 4 分钟内，他/她要么完成付款，要么操作超时。我的问题是，这个支付服务是一个同步操作。所以，我必须每 5 秒调用一次，持续 4 分钟，直到我得到除“AWAIT”之外的响应。到这个时候，我必须向页面返回一个同步响应，指示支付过程已经开始并等待用户确认，并启动一个异步操作，检查这个自定义钱包服务 4 分钟并获得响应。然后我需要将此异步响应发布到网页。

我正在寻找一种解决此问题的方法，以避免可能出现的并发或同步等问题。我也希望有一些示例代码。谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:27:32.847

> 到这个时候，我必须向页面返回一个同步响应，表明支付过程已经开始并等待用户确认，并启动一个异步操作，检查这个自定义钱包服务 4 分钟并获得响应。然后我需要将此异步响应发布到网页。

是的，这并不容易。我可以推荐的唯一解决方案非常复杂。

当初始请求进来时，您需要为该事务创建一个持久实体，保存它，然后返回唯一的实体标识符。请注意，它必须保存在持久位置（即 Azure 表）中。

接下来，您将需要一个单独的服务器来轮询更新（即 Azure 辅助角色或 Win32 服务）。这不应该从 ASP.NET 完成，因为它是在没有 HTTP 请求的情况下进行的工作。

然后，当您的最终用户应用程序轮询完成时，您的 Web 服务可以从持久实体中检索当前状态。

您可以采用不同的“捷径”：将实体保存在内存中而不是持久化，并将服务器滚动到 ASP.NET 站点中的某种后台进程中。但这两种捷径都会带来严重的可靠性和稳健性问题，不应*考虑*用于金融交易。

# java - 为什么在 Lucene 4 中索引将字段提升到文档上具有如此显着的效果

> ID：15813418
> 
> 赞同：1
> 
> 时间：2013-04-04T13:59:37.353
> 
> 标签：java, lucene

在索引时，我提升了一小部分文档的别名字段，将提升设置为 2.0f，我认为这相当于将这个文档比另一个文档的得分提高一倍，其他一切都相同。

```
public class ArtistBoostDoc {

    //Double the score of this doc if it comes up in search
    private static float ARTIST_DOC_BOOST = 2.0f;

    private static Set<String> artistGuIdSet = new HashSet<String>();

    static  {

        artistGuIdSet.add("24f1766e-9635-4d58-a4d4-9413f9f98a4c"); //Bach
        artistGuIdSet.add("1f9df192-a621-4f54-8850-2c5373b7eac9"); //Beethoven
        artistGuIdSet.add("b972f589-fb0e-474e-b64a-803b0364fa75"); //Mozart
        artistGuIdSet.add("ad79836d-9849-44df-8789-180bbc823f3c"); //Vivaldi
        artistGuIdSet.add("27870d47-bb98-42d1-bf2b-c7e972e6befc"); //Handel
        artistGuIdSet.add("8255db36-4902-4cf6-8612-0f2b4288bc9a"); //Johann Strauss II
        artistGuIdSet.add("eefd7c1e-abcf-4ccc-ba60-0fd435c9061f"); //Richard Wagner
        artistGuIdSet.add("4e60a56a-514a-4a19-a3cc-49927c96b3cb"); //Sir Edward Elgar
        artistGuIdSet.add("c130b0fb-5dce-449d-9f40-1437f889f7fe"); //Joseph Haydn
        artistGuIdSet.add("f91e3a88-24ee-4563-8963-fab73d2765ed"); //Franz Schubert
        artistGuIdSet.add("c70d12a2-24fe-4f83-a6e6-57d84f8efb51"); //Johannes Brahms
        artistGuIdSet.add("f1bedf1f-4445-4651-9c35-f4a3f3860a13"); //Guiseppe Verdi
    }

    public static void boost(String artistGuid, MbDocument doc) {

        boost(artistGuid,doc.getLuceneDocument());
    }

    public static void boost(String artistGuid, Document doc) {
        if(artistGuIdSet.contains(artistGuid)) {
            for(IndexableField indexablefield:doc.getFields())
            {
if(indexablefield.name().equals(ArtistIndexField.ALIAS.getName()))
                {
                    Field field = (Field)indexablefield;
                    field.setBoost(ARTIST_DOC_BOOST);
                }
            }
        }
    }
} 
```

但是当我运行这个查询时：

[http://search.musicbrainz.org/?type=artist&query=Jean&explain=true](http://search.musicbrainz.org/?type=artist&query=Jean&explain=true)

您可以看到第一个文档（被索引提升）的 fieldnorm 为 7.5161928 E9（注意 E），而下一个结果为 1.0。基本上，只要这些增强文档中的一个在其别名字段上匹配，它将始终是第一个结果，一旦结果标准化，它将获得 100 分，而所有其他结果的得分为零。

如果我删除了提升，那么事情会按预期工作（但问题是我需要对这些文件进行某种提升，但现在没有）

[http://search.beta.musicbrainz.org/?type=artist&query=Jean&explain=true](http://search.beta.musicbrainz.org/?type=artist&query=Jean&explain=true)

为什么将字段提升到 2.0 会产生如此显着的效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:24:38.527

这似乎很奇怪，是的。您的代码中没有任何内容可以明确导致这种情况，但我非常怀疑。

我不太清楚 an 是什么`MbDocument`样子，但我猜它可以有多个同名的字段。我猜想 JS Bach 实际上有大约 30 个名为`ArtistIndexField.ALIAS.getName()`.

这里的问题是 Lucene 如何处理具有相同名称的多个文档。Lucene 将它们全部附加到同一个字段中，并将**它们的 boost 相乘**。

所以而不是像这样的表示：

```
alias1^2
alias2^2
alias3^2
.... 
```

你最终会得到类似的东西：

```
(alias1 alias2 alias3 ...)^(2^30) 
```

您需要自己将它们全部连接到一个字段中（确保连接的术语之间有空格，以免在索引时它们一起进入一个术语），或者确保只有一个为别名添加的字段将被提升添加到文档时。

我只是[提供这个链接](http://wiki.apache.org/lucene-java/ScoresAsPercentages)，作为一个友好的建议。用它做你认为合适的事情。

# jquery - 在 Jquery 拖放中停止放置事件

> ID：15813422
> 
> 赞同：1
> 
> 时间：2013-04-04T13:59:50.507
> 
> 标签：jquery, dom, drag-and-drop

我在使用 Jquery 拖放时遇到了这个问题。我有两个 div 元素堆叠在一起。底部的 div 可放置且更大。如果我在上部 div 上放置一个项目，则底部 div 处理 dropp。

仅当直接将元素拖放到其上时，如何使 div 处理拖放。

我试过`stopPropagation()`在上面的 div 上使用，但是没有用。

某种简单的例子：http: [//jsfiddle.net/e87wS/13/](http://jsfiddle.net/e87wS/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:11:43.870

**编辑后的答案**

使用`over`and`out`来禁用和启用另一个 div。`greedy`意味着可放置区域将是唯一有效的区域，并且`tolerance: touch`意味着只要可拖动对象接触可放置区域，它就会放在那里。

它看起来像这样：

```
$('#div2').droppable({
    drop: function (event, ui) {
        alert("droppedHere");
    },
    greedy: 'true',
    tolerance: 'touch',
    over: function (event, ui) {
        $("#div1").droppable("disable")
    },
    out: function (event, ui) {
        $("#div1").droppable("enable")
    }
});

$('#div1').droppable({
    drop: function(event, ui){
        alert("droppedThere");
    }
}); 
```

和小提琴：http: [//jsfiddle.net/e87wS/15/](http://jsfiddle.net/e87wS/15/)

# iphone - 创建一个类以从 Web 服务上的异步调用返回数据

> ID：15813423
> 
> 赞同：0
> 
> 时间：2013-04-04T13:59:52.230
> 
> 标签：iphone, ios, objective-c, afnetworking

我正在编写一个使用 Web 服务来获取一些 JSON 数据的应用程序，我需要从我的不同视图控制器的 Web 服务中获取不同的数据。所以我想创建一个类来处理这个问题，目的是在将来发布它。

在我的课程中，我想利用`AFNetworking`框架来`AFJSONRequestOperation`从 Web 服务获取 JSON 数据，但这会异步返回数据，因此不像仅在类方法上返回数据那么简单。

如何让我的班级处理这些数据并将其传递回调用班级？在传回数据时，我是否必须像往常一样使用委托，还是有其他方法？

```
+(NSDictionary*)fetchDataFromWebService:(NSString *)query{

NSURL *url = [NSURL URLWithString:query];

NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"Success");

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Fail");
}];

[operation start];

return ??? // I can't return anything here because AFJSONRequestOperation is completed Async
} 
```

所以我应该这样做，并使用委托

```
+(void)fetchDataFromWebService:(NSString *)query{

NSURL *url = [NSURL URLWithString:query];

NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"Success");
    [self.delegate didFinishFetchingJSON:(NSDictionary*)json];        

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Fail");
    [self.delegate didFinishFetchingJSON:(NSDictionary*)json withError:(NSError*)error];
}];

[operation start];
} 
```

任何有关使用异步调用创建此类类的最佳方式和最佳实践的帮助都会非常有帮助。

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:31:51.047

当您进行这样的异步调用时，绝对不要期望传统的返回设置。您的委托想法肯定会奏效，您也可以将数据作为 a`@property`或其他东西传递。但我首选的方式是这样的：

```
 - (void)postText:(NSString *)text
   forUserName:(NSString *)username
 ADNDictionary:(NSDictionary *)dictionary
     withBlock:(void(^)(NSDictionary *response, NSError *error))block; 
```

我用块作为参数声明该方法。实现如下所示：

```
- (void)postText:(NSString *)text
     forUserName:(NSString *)username
   ADNDictionary:(NSDictionary *)dictionary
       withBlock:(void(^)(NSDictionary *response, NSError *error))block
{
    // Custom logic

    [[KSADNAPIClient sharedAPI] postPath:@"stream/0/posts"
                              parameters:params
                                 success:^(AFHTTPRequestOperation *operation, id responseObject)
     {
         if (block) {
             block(responseObject, nil);
         }
     }
                                 failure:^(AFHTTPRequestOperation *operation, NSError *error)
     {
         if (block) {
             block([NSDictionary dictionary], error);
         }
     }];
} 
```

正如您所看到的，一旦我从 Web 服务获得响应，我就会将对象传递回调用它的块中。我将此方法称为：

```
[[KSADNAPIClient sharedAPI] postText:postText
                             forUserName:username
                           ADNDictionary:parameters
                               withBlock:^(NSDictionary *response, NSError *error)
    {
        if (error) {
          // Handle error
        } else {
          // Do other stuff
        }
    }]; 
```

所以一旦你调用它，这个块在得到服务的响应之前不会做任何事情。然后在这个块内，如果你愿意，你可以调用类似的东西：

```
[self loadInfo:response]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:31:27.583

是的，您将使用委托方法。

我使用常规的 NSURLRequest 和 NSUrlConnection 对象及其委托方法进行异步调用，并使用 NSJSONSerialization 将 JSON 解析为 NSDictionary。不需要第三方库。

NSURLRequest 也有一个字典，你可以使用它来设置任何类型的数据，一旦请求返回，你就需要处理它。这样，您可能会在相同的委托方法中处理所有请求，并根据请求属性确定要做什么。

[URL 加载系统编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

默认情况下，NSUrlConnection 的`initRequest`方法甚至在主线程上运行委托方法，因此您不会有任何线程安全问题。`startImmediately`但是，您也可以通过设置为让它们在单独的线程上运行`NO`。

我不反对使用第三方库，但这不是您需要它们的情况。

# java - PL/SQL：数字或值错误：多次运行查询时字符串缓冲区太小

> ID：15813425
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:00:00.210
> 
> 标签：java, sql, oracle

我在 Java EE 中有一个 webapp，有时在日志中我看到以下错误：

```
`org.apache.ibatis.exceptions.PersistenceException`: 
 Error querying database.  Cause: java.sql.SQLException: ORA-06502: PL/SQL: numeric or value error: character string buffer too small" 
```

我打开了语句记录，如果我从 SQL Developer 运行查询，它会成功运行，没有任何错误。

但是，如果我多次运行相同的查询，我会收到此错误。我猜原因是在数据库服务器上，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:49:32.780

您需要跟踪会话以获取确切的 sql 语句并绑定变量以查看导致错误的原因。在连接时在代码中设置以下内容以在数据库服务器上创建跟踪文件。

更改会话集事件'10046 永远跟踪名称上下文，级别 8'；

# javascript - 强烈循环冻结浏览器；如何让服务器做到这一点？

> ID：15813430
> 
> 赞同：1
> 
> 时间：2013-04-04T14:00:14.307
> 
> 标签：javascript, for-loop, client-server

基本大纲；我正在检索约 100 个 Facebook 状态，并搜索这些帖子以检查它是否包含约 20 个搜索词之一。当我尝试在浏览器中运行它时，它会锁定，这让我担心尝试在客户端运行它。

让服务器运行此操作并返回结果的最简单方法是什么？我可以用 Python 做吗？这是循环，供参考。

```
 function Filter() {
    console.log("running Filter")
    //loop through fbObj.posts
    for (i = 0, l = fbObj.length; i < l; i++){
        var post = fbObj[i].post
        console.log("Checking " + post + " for search terms")
        //loop through searchTerms
        for (j = 0; j<searchTermObj.length; j= j++) {
            searchTerm_variants = searchTermObj[j].words
            for (x = 0; x <  searchTerm_variants.length; x++){
                if (post.indexOf(searchTerm_variants[x]) !== 0){
                    foundPosts[i] = {}
                    foundPosts[i] = fbObj[i]
                }
            }   
        }
    console.log(foundPosts) 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:38:07.610

您的代码中有一个错误可能解释了锁定：

```
//loop through searchTerms
for (j = 0; j<searchTermObj.length; j= j++) { 
```

j 永远不会增加（因此它始终为 0）：

j++ 增加 j，但计算结果为分配给 j 的 j。所以这是一个空操作。

因此，您的代码卡在循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:06:44.220

您是否考虑过在客户端使用工作线程来执行此操作？但是，这可能仅在各种浏览器的最新版本中可用？ [https://developer.mozilla.org/en-US/docs/DOM/Worker](https://developer.mozilla.org/en-US/docs/DOM/Worker)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:17:45.343

你可以像这样构建一个包罗万象的正则表达式，我认为：

```
var regexWords = [], variants;
for (var i = 0; i < searchTermObj.length; ++i) {
  variants = searchTermObj[i].words;
  for (var j = 0; j < variants.length; ++j)
    regexWords.push(variants[j]);
}

var regex = new RegExp(regexWords.join("|")); 
```

然后你可以像这样测试每个帖子：

```
for (i = 0, l = fbObj.length; i < l; i++){
    var post = fbObj[i].post
    if (regex.test(post)) {
      // found a naughty word in the post
    }
} 
```

现在，只要您的单词列表只是字母单词，没有像“*”或“。”这样的有趣字符，它就可以工作。在他们中。如果它们确实包含特殊字符，您仍然可以完成这项工作，但它会更复杂一些。

使用像这样的大正则表达式允许正则表达式引擎采用智能亚线性搜索技术，因此每个帖子只需要搜索一次。它仍然可能不是非常快。

# ios - CATiledLayer 和未渲染的切片

> ID：15813437
> 
> 赞同：0
> 
> 时间：2013-04-04T14:00:45.417
> 
> 标签：ios, xcode, bitmap, catiledlayer

**问题：**

我必须渲染一个 7148x15000px 的大图像（自定义地图），所以我四处寻找有用的东西，我找到[了 BitmapSlice](http://www.cimgf.com/2011/03/01/subduing-catiledlayer/)，但问题是我第一次运行应用程序（在设备和模拟器上）几个切片未正确加载，我看到带有大黑洞的图像。

**代码：**

BitmapSliceViewController.h

```
#import <UIKit/UIKit.h>

@interface BitmapSliceViewController : UIViewController<UIScrollViewDelegate>
    @property (nonatomic, retain) UIImageView *_zoomView;
    @property (nonatomic, retain) IBOutlet UIScrollView *scrollView;

    - (void)saveTilesOfSize:(CGSize)size forImage:(UIImage*)image toDirectory
    (NSString*)directoryPath usingPrefix:(NSString*)prefix;
@end 
```

BitmapSliceViewController.m

```
#import "BitmapSliceViewController.h"
#import "TileView.h"

@implementation BitmapSliceViewController

@synthesize scrollView;

- (void)dealloc
{
    [super dealloc];
}

- (void)viewDidUnload 
{
    [super viewDidUnload];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *directoryPath = [paths objectAtIndex:0];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *big = [UIImage imageNamed:@"map.jpg"];
        [self saveTilesOfSize:(CGSize){256, 256} forImage:big toDirectory:directoryPath usingPrefix:@"map_"];
        dispatch_async(dispatch_get_main_queue(), ^{
            [scrollView setNeedsDisplay];
        });
    });

    TileView *tv = [[TileView alloc] initWithFrame:(CGRect){{0,0}, (CGSize){7148,15000}}];
    [tv setTileTag:@"map_"];
    [tv setTileDirectory:directoryPath];
    [scrollView addSubview:tv];
    [scrollView setContentSize:(CGSize){7148,15000}];
    [scrollView setDelegate:self];
}

- (void)saveTilesOfSize:(CGSize)size 
           forImage:(UIImage*)image 
        toDirectory:(NSString*)directoryPath 
        usingPrefix:(NSString*)prefix
{
    CGFloat cols = [image size].width / size.width;
    CGFloat rows = [image size].height / size.height;

    int fullColumns = floorf(cols);
    int fullRows = floorf(rows);

    CGFloat remainderWidth = [image size].width - (fullColumns * size.width);
    CGFloat remainderHeight = [image size].height - (fullRows * size.height);

    if (cols > fullColumns) fullColumns++;

    if (rows > fullRows) fullRows++;

    CGImageRef fullImage = [image CGImage];

    for (int y = 0; y < fullRows; ++y) {
        for (int x = 0; x < fullColumns; ++x) {
            CGSize tileSize = size;
            if (x + 1 == fullColumns && remainderWidth > 0) {
                // Last column
                tileSize.width = remainderWidth;
            }
            if (y + 1 == fullRows && remainderHeight > 0) {
                // Last row
                tileSize.height = remainderHeight;
            }

            CGImageRef tileImage = CGImageCreateWithImageInRect(fullImage, 
                                    (CGRect){{x*size.width, y*size.height}, 
                                      tileSize});
            NSData *imageData = UIImageJPEGRepresentation([UIImage imageWithCGImage:tileImage], 1);

            CGImageRelease(tileImage);
            NSString *path = [NSString stringWithFormat:@"%@/%@%d_%d.png", 
                    directoryPath, prefix, x, y];
            [imageData writeToFile:path atomically:NO];
        }
    }
}

@end 
```

平铺视图.h

```
@interface TileView : UIView 

@property (nonatomic, copy) NSString *tileTag;
@property (nonatomic, copy) NSString *tileDirectory;

- (UIImage*)tileAtCol:(int)col row:(int)row;

@end 
```

瓦片视图.m

```
#import "TileView.h"

@implementation TileView
@synthesize tileTag;
@synthesize tileDirectory;

+ layerClass
{
    return [CATiledLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (!self) return  nil;
    return self;
}

- (void)dealloc
{
    [super dealloc];
}

- (void)drawRect:(CGRect)rect {
    //CGContextRef context = UIGraphicsGetCurrentContext();

    CGSize tileSize = (CGSize){256, 256};

    int firstCol = floorf(CGRectGetMinX(rect) / tileSize.width);
    int lastCol = floorf((CGRectGetMaxX(rect)-1) / tileSize.width);
    int firstRow = floorf(CGRectGetMinY(rect) / tileSize.height);
    int lastRow = floorf((CGRectGetMaxY(rect)-1) / tileSize.height);

    for (int row = firstRow; row <= lastRow; row++) {
        for (int col = firstCol; col <= lastCol; col++) {
            UIImage *tile = [self tileAtCol:col row:row];
            if (tile)
            {
                CGRect tileRect = CGRectMake(tileSize.width * col, tileSize.height * row, tileSize.width, tileSize.height);

                tileRect = CGRectIntersection(self.bounds, tileRect);

                [tile drawInRect:tileRect];
                //        [[UIColor whiteColor] set];
                //        CGContextSetLineWidth(context, 6.0);
                //        CGContextStrokeRect(context, tileRect);
            }
        }
    }
}

- (UIImage*)tileAtCol:(int)col row:(int)row
{
    NSString *path = [NSString stringWithFormat:@"%@/%@%d_%d.png", tileDirectory, tileTag, col, row];
    return [UIImage imageWithContentsOfFile:path];  
}

@end 
```

这是应用程序的主要代码，您可以从文章顶部链接的站点下载整个示例。

正如我所说，主要问题是在应用程序的第一次运行中失败的某些切片的渲染，其他运行似乎正常工作。

稍作修改`- (UIImage*)tileAtCol:(int)col row:(int)row`

```
- (UIImage*)tileAtCol:(int)col row:(int)row
{
    NSString *path = [NSString stringWithFormat:@"%@/%@%d_%d.png", tileDirectory, tileTag, col, row];
    UIImage *img = [UIImage imageWithContentsOfFile:path];

    if (img) {
        NSLog(@"good");
}
else {
    NSLog(@"bad");
    }
    return img;  
} 
```

问题似乎在这里...

有什么想法可以解决吗？

提前致谢

# eclipse - 春季开发 - 有或没有 eclipse + 检查 eclipse 版本

> ID：15813443
> 
> 赞同：0
> 
> 时间：2013-04-04T14:01:05.303
> 
> 标签：eclipse, spring, eclipse-plugin, installation, version

一些教程提到您可以在 tarball 中下载 spring 并将其安装在您的计算机上，但是当我访问 springsource 站点时，我只能看到您可以下载 Spring Tool Suite，它是一个 Eclipse 插件。所以我的问题是：

1.  如果我想从命令行或 Eclipse 以外的 IDE 工作怎么办？

2.  这些软件包适用于 Juno 3.8.2 或 Juno 3.4.2，但我如何才能找到我的 eclipse 版本？我已经下载了最常下载的 eclipse 版本，它是 Java EE 开发人员的版本，但是当我点击帮助 - > 关于条目时，我得到：

版本：Juno Service Release 2 内部版本 ID：20130225-0426

哪个与springsource站点3.8.2或3.4.2上的eclipse版本不匹配，那么我怎么知道我需要哪个插件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:08:15.523

使用 Spring 进行开发不需要 Springsource Tool Suite (STS)。如果问题是如何安装 STS，那实际上非常简单。在 Eclipse 3.7 (Indigo) 或 3.8、4.2 (Juno) 中，单击`Help`菜单并选择`Eclipse Marketplace`. 如果它不在初始屏幕中，请使用查找框类型 spring 并单击 go，它应该会在 STS 中显示标题中的 eclipse 版本。单击安装，将为您安装正确的版本及其依赖项。如果可能，请尝试为您安装的所有插件使用 eclipse 市场。它使事情变得更简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:32:19.280

你可以通过 Help -> About Eclipse... 找到你的 Eclipse 版本。

在弹出的对话框中，您将看到如下内容：

> 版本 4.2.2

或者

> 版本 3.8.2

如果您下载了最常下载的版本，那么您很可能拥有 4.2.2。“Juno”版本实际上包含为 3.8.x 和 4.2.x 构建的发行版（我知道有点复杂和混乱）。因此，您应该能够安装 STS 的 Juno 版本并且无论您拥有哪个版本的 Juno Eclipse 都可以。

* * *

编辑

你的问题不是很清楚。我以为你问的是如何安装 STS，但也许你问的是 Eclipse 是否是必要的。答案是，当然，Eclipse 不是Spring 开发*所必需*的，但它确实是开发 Spring 应用程序的最简单方法（免责声明，我在 STS 开发团队中）。

没有单一的方法可以“下载 SpringFramework”，因为该框架实际上只是一组非常大的 jar 文件及其依赖项。任何单个项目通常只需要其中的一个子集以及需要其他第三方依赖项。出于这个原因，大多数人更喜欢使用像 gradle 或 maven 这样的构建工具。

没有 STS 的最简单的入门方法可能是从 github 克隆一个示例项目。此处提供了模板列表： [http](http://dist.springsource.com/release/STS/help/descriptors-3.0.xml) ://dist.springsource.com/release/STS/help/descriptors-3.0.xml，这显然意味着从 STS 内部使用。但是，您可以使用该文件来获取各种 github 项目的链接。

# mysql - mysql全文搜索

> ID：15813445
> 
> 赞同：0
> 
> 时间：2013-04-04T14:01:07.467
> 
> 标签：mysql, mysqli

mysql 查询出现问题。我使用全文搜索。

我尝试在我的照片表中找到完全匹配的内容，但出现了问题。

假设我有一张照片描述，例如“Reodor Hansen 遇到 mysql 问题”

如果我随后搜索名为 Reodor Mysql 的用户，则可以看到标记 Reodor Hansen 的图片。

有没有获得完全匹配的选项？我现在谈论像''和“”这样的引号，但他们在这里没有帮助我。

问题是我不会在搜索 Reodor Mysql 时看到 Reodor Hansens 照片。

这是我使用的查询

SELECT * FROM _photos WHERE MATCH (description) AGAINST ('Reodor Mysql' IN BOOLEAN MODE)

更远。知道如何更进一步吗？所以我在搜索框中可以写

“Reodor Mysql 的所有图片”或“显示 Reodor Mysql 上传的最后 10 张图片”

搜索对此有何回应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:30:59.523

如果你想找到一个准确的短语，你可以使用双引号。像这样

```
SELECT * FROM _photos WHERE MATCH (description) 
                  AGAINST ( '"Reodor Mysql"' IN BOOLEAN MODE); 
```

如果您只想要最后 10 张图片，您可以在查询中添加 LIMIT。像这样的东西

```
SELECT * FROM _photos WHERE MATCH (description) 
                  AGAINST ( '"Reodor Mysql"' IN BOOLEAN MODE) 
                  ORDER BY uploaded_date DESC 
                  LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:05:00.830

如果您想要完全匹配，`Reodor Mysql`则必须使用[LIKE 运算符](http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html#operator_like)：

```
SELECT * FROM _photos WHERE description LIKE '%Reodor Mysql%' 
```

# asp.net - ASP.net Autopostback 下拉菜单不适用于远程 url

> ID：15813447
> 
> 赞同：0
> 
> 时间：2013-04-04T14:01:16.847
> 
> 标签：asp.net

更新： IE10 似乎会发生这种情况。如果我启用了兼容模式，那么一切正常。

我有一个带有下拉定义的母版页。见下文

```
 <div style="display: table-cell;"> Customer:
    <asp:DropDownList ID="ddlCustomer" runat="server"     OnSelectedIndexChanged="ddlCustomer_SelectedIndexChanged" AutoPostBack="true">
 </asp:DropDownList>
</div> 
```

在页面初始化中我有以下代码，updateSelectionlist 只是调用数据库来填充

if (!Page.IsPostBack) UpdateSelectionLists();

当我使用 localhost 访问该站点时，上述内容非常有用。当我做一个远程面向公众的 url 时，由于某种原因，没有与客户端下拉菜单关联的事件。以下来自视源

```
 <select name="ctl00$ddlCustomer" id="ddlCustomer">
    <option selected="selected" value="0">Select a customer</option>
    <option value="1">som3</option>
    <option value="7">some2</option>
    <option value="8">some1</option>
    <option value="9">some4</option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:29:27.103

我发现了这个问题，IIS 没有识别 ie10，因此没有 JS 提供 Html 页面

# android - Android 相机预览中的流畅动画

> ID：15813449
> 
> 赞同：0
> 
> 时间：2013-04-04T14:01:24.983
> 
> 标签：android, animation, android-asynctask

我正在尝试使用 Android 和图像识别 API 创建在线扫描仪。我正在尝试使用动画触发器创建漂亮的布局。它看起来[像这样](http://img411.imageshack.us/img411/4205/itraffapiapplivescan.jpg "屏幕")。

我目前拥有一切，它运行良好，但有一个例外：动画。这个蓝色触发器的动画是可以的，但是当 AsyncTask 正在向 API 发布照片时，激光的动画会暂停一段时间。我应该怎么做才能防止这种行为？

这是我的动画代码：

```
final View laser = findViewById(R.id.laser);
laser.setDrawingCacheEnabled(true);

final View trigger = findViewById(R.id.trigger);
Animation fadeAnimation = new AlphaAnimation(1.0f, 0.5f);
fadeAnimation.setRepeatCount(Animation.INFINITE);
fadeAnimation.setRepeatMode(Animation.REVERSE);
fadeAnimation.setDuration(3000);
trigger.setDrawingCacheEnabled(true);
trigger.startAnimation(fadeAnimation);

trigger.post(new Runnable() {
    @Override
    public void run() {
        final Animation translateDownAnimation = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.25f,
            Animation.RELATIVE_TO_PARENT, 0.75f);
        final Animation translateUpAnimation = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.75f,
            Animation.RELATIVE_TO_PARENT, 0.25f);
        translateDownAnimation.setDuration(ANIMATION_TIME);
        translateDownAnimation.setRepeatCount(0);
        translateDownAnimation.setRepeatMode(Animation.RESTART);
        translateUpAnimation.setDuration(ANIMATION_TIME);
        translateUpAnimation.setRepeatCount(0);
        translateUpAnimation.setRepeatMode(Animation.RESTART);
        translateDownAnimation.setInterpolator(new AccelerateDecelerateInterpolator());
            translateUpAnimation.setInterpolator(new AccelerateDecelerateInterpolator());
        translateDownAnimation.setAnimationListener(new AnimationListener() {
            @Override
            public void onAnimationStart(Animation animation) {
                laser.setBackgroundResource(R.drawable.scanner_line_down);
            }

            @Override
            public void onAnimationRepeat(Animation animation) {}

            @Override
            public void onAnimationEnd(Animation animation) {
                laser.startAnimation(translateUpAnimation);
            }
        });
        translateUpAnimation.setAnimationListener(new AnimationListener() {
            @Override
            public void onAnimationStart(Animation animation) {
                laser.setBackgroundResource(R.drawable.scanner_line_up);
            }

            @Override
            public void onAnimationRepeat(Animation animation) {}

            @Override
            public void onAnimationEnd(Animation animation) {
                laser.startAnimation(translateDownAnimation);
            }
        });
        laser.setVisibility(View.VISIBLE);
        laser.startAnimation(translateDownAnimation);
    }
}); 
```

如果有帮助，我可以准备适当的 .apk 文件。

# c# - 使用带有 MonoTouch 和 C# 的 UIButton 的 AddTarget

> ID：15813452
> 
> 赞同：2
> 
> 时间：2013-04-04T14:01:29.750
> 
> 标签：c#, objective-c, xcode, xamarin.ios

**编辑：我现在得到例外：**

```
 Stacktrace:

  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at MonoTouch.UIKit.UIApplication.Main (string[]) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:43
  at MapKit01.Application.Main (string[]) [0x00000] in /Users/andre/Downloads/MapKit03/MapKit03/Main.cs:20
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff>

Native stacktrace:

0   MapKit01                            0x00091eac mono_handle_native_sigsegv + 284
1   MapKit01                            0x00005788 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                   0x9533f8cb _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   UIKit                               0x0274f258 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
5   UIKit                               0x02810021 -[UIControl sendAction:to:forEvent:] + 66
6   UIKit                               0x0281057f -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
7   UIKit                               0x0280f6e8 -[UIControl touchesEnded:withEvent:] + 546
8   UIKit                               0x0277ecef -[UIWindow _sendTouchesForEvent:] + 846
9   UIKit                               0x0277ef02 -[UIWindow sendEvent:] + 273
10  UIKit                               0x0275cd4a -[UIApplication sendEvent:] + 436
11  UIKit                               0x0274e698 _UIApplicationHandleEvent + 9874
12  GraphicsServices                    0x04d40df9 _PurpleEventCallback + 339
13  GraphicsServices                    0x04d40ad0 PurpleEventCallback + 46
14  CoreFoundation                      0x012bfbf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
15  CoreFoundation                      0x012bf962 __CFRunLoopDoSource1 + 146
16  CoreFoundation                      0x012f0bb6 __CFRunLoopRun + 2118
17  CoreFoundation                      0x012eff44 CFRunLoopRunSpecific + 276
18  CoreFoundation                      0x012efe1b CFRunLoopRunInMode + 123
19  GraphicsServices                    0x04d3f7e3 GSEventRunModal + 88
20  GraphicsServices                    0x04d3f668 GSEventRun + 104
21  UIKit                               0x0274bffc UIApplicationMain + 1211
22  ???                                 0x0e0c66ad 0x0 + 235693741
23  ???                                 0x0e0c61b0 0x0 + 235692464
24  ???                                 0x0e0c5f0c 0x0 + 235691788
25  ???                                 0x0e0c5ccc 0x0 + 235691212
26  ???                                 0x0e0c5eb6 0x0 + 235691702
27  MapKit01                            0x00009b52 mono_jit_runtime_invoke + 722
28  MapKit01                            0x0016d02e mono_runtime_invoke + 126
29  MapKit01                            0x00171224 mono_runtime_exec_main + 420
30  MapKit01                            0x00176615 mono_runtime_run_main + 725
31  MapKit01                            0x000671e5 mono_jit_exec + 149
32  MapKit01                            0x00204fd4 main + 1988
33  MapKit01                            0x00002b75 start + 53
34  ???                                 0x00000004 0x0 + 4

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

**问**：我喜欢在我的 C# 项目中使用我在 Objective-C 中找到的一些代码。它工作得很好，但使用 addTarget 让我想，因为几个小时没有工作结果。所以这是原始来源：

```
 UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
  [infoButton addTarget:self action:@selector(infoButtonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

这就是我尝试的：

```
 UIButton infoButton = new UIButton(UIButtonType.DetailDisclosure);
  infoButton.AddTarget(infoButton, new MonoTouch.ObjCRuntime.Selector("showDetails"),UIControlEvent.TouchUpInside);

  public void showDetails(object sender, EventArgs e) 
```

结果不是很好，当我点击按钮时应用程序崩溃没有任何响应......

你能帮我请教如何在 C# 中以正确的方式使用它吗？

谢谢

安德烈

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:05:51.753

尝试使用这样的 C# 事件：

```
infoButton.TouchUpInside += showDetails; 
```

# c# - 替换方法 c# 未按预期工作

> ID：15813454
> 
> 赞同：3
> 
> 时间：2013-04-04T14:01:35.870
> 
> 标签：c#, asp.net-mvc-4

我试图将双反斜杠替换为简单的反斜杠，但它不起作用。这是一张图片：

![在此处输入图像描述](https://i.stack.imgur.com/3iwzg.png)

我还在想为什么。我看到了这样的帖子[，](https://stackoverflow.com/questions/7482360/replace-with-in-a-string-in-c-sharp)它对他们有用。建议？

更新

**对不起，我犯了一个错误，它的一个反斜杠只是我拼写错误** 要替换的代码是

```
string clear_patch = path.Replace(@"\\","\"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T14:02:45.727

这是工作。`\\`在调试期间检查时不会转义。尝试将值打印到控制台窗口或网页。

编辑*您似乎很困惑。

您的路径实际上不包含任何双斜杠`\\`，它只是看起来那样，因为在调试期间查看字符串时单斜杠被转义了。考虑阅读[转义序列](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-character-escape-sequences-are-available.aspx)。

如果您想转义**单**斜杠，则不要在替换中使用逐字字符串文字，例如`string.Replace("\\", "-")`，它将用连字符替换路径中的所有单斜杠，`-`尽管我不确定您为什么要这样做？请注意，在调试期间进行检查时，这仍会将路径显示为带有`\\`斜杠。打印到控制台窗口将显示：

`C:-dev-vsprojects-VerificaionDeFirmas-VerificaionDeFirmas-verificaciondefirmas.txt`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:05:01.037

监视窗口向您显示转义的字符串。所以当它显示`\\`字符串只包含`\`.

您的替换正在尝试替换`\\`，因为您使用的是文字指示符`@`。

将替换代码更改为：

```
string clear_path = path.Replace("\\", "-"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:02:56.740

使用`"\\"`, 而不是`@"\\"`因为这会寻找 2 个`\`字符。

请注意，可视化工具始终显示实际字符的`\\`符号。`\`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:03:05.240

这就是你想要做的：

```
string clear_path = path.Replace(@"\","-"); 
```

调试器中的表示显示`\\`，但这意味着转义字符和`\`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:03:46.937

你不应该双重逃避它，要么你这样做：

```
string clear_path = path.Replace("\\","-") 
```

或者

```
string clear_path = path.Replace(@"\","-") 
```

# iphone - 点击计数器应用程序 - 在应用程序退出时保存计数

> ID：15813457
> 
> 赞同：2
> 
> 时间：2013-04-04T14:01:48.470
> 
> 标签：iphone, ios, objective-c

我有一个简单的点击计数器应用程序，由一个按钮组成 - 按下它来计数和一个显示计数的标签。我想保存屏幕/应用程序退出时的计数，或者如果按下主页按钮或应用程序崩溃。

到目前为止，这是我的代码：

```
h file:
int counter;

@interface tapcounter : UIViewController {

IBOutlet UILabel *count;
}
-(IBAction)click;

m file:
-(IBAction)click {
counter++;
count.text = [NSString stringWithFormat:@"%d",counter]; 
```

关于如何最好地实现这一点的任何想法？我是 Xcode 的新手，所以会很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:15:56.827

您可以使用 NSUserDefaults 永久存储内容

```
NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
[userDefaults setObject:Any object you want forKey:any Key you want];
[userDefaults synchronize]; 
```

当应用程序关闭或崩溃时，您可以通过添加通知来捕获它：

将此添加到您的 viewDidLoad

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(saveCount) name:UIApplicationDidEnterBackgroundNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(saveCount) name:UIApplicationWillTerminateNotification object:nil]; 
```

在 saveCount 方法中做保存部分

```
-(void)saveCount
{
 NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
 [userDefaults setObject:[NSString stringWithFormat:@"%d",counter] forKey:@"saveCount"];
 [userDefaults synchronize];
} 
```

当你想再次读取变量时使用这个 - 可能在 ViewDidLoad

```
NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
NSString *countString= [userDefaults objectForKey:@"saveCount"];
NSLog(@"Your Count: %@",count);

//checking if data in user defaults is not empty
if(countString.length>0)
{
count.text=count;
counter=[countString intValue];
}

else
{
  //for first time 
  counter=0;
  count.text=@"0";
} 
```

假设每次按下按钮时 yourlocalCountVariable 都会增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:08:32.337

到目前为止，最简单的方法是`NSUserDefaults`. 试试这个来保存：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setInteger:count forKey:@"count"];
[defaults synchronize]; 
```

要检索它，请使用：

```
if (![[NSUserDefaults standardUserDefaults] valueForKey:@"count"]) {
    NSInteger count = [NSUserDefaults integerForKey:@"count"];
    //use the value here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:11:36.630

您可以使用`viewDidUnload`和`NSUserDefaults`：

```
- (void)viewDidUnload
{
    [[NSUserDefaults standardUserDefaults] setObject:count forKey:@"tapCount"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

除了以上内容在您的视图控制器中之外，您还需要在 AppDelegate 中进行一些设置：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // initialize defaults
    NSString *dateKey    = @"dateKey";
    NSDate *lastRead    = (NSDate *)[[NSUserDefaults standardUserDefaults] objectForKey:dateKey];
    if (lastRead == nil)     // App first run: set up user defaults.
    {
        NSDictionary *appDefaults  = [NSDictionary dictionaryWithObjectsAndKeys:[NSDate date], dateKey, nil];

        [[NSUserDefaults standardUserDefaults] registerDefaults:appDefaults];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }

    [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:dateKey];

    tapcounter *tapViewController = [[tapcounter alloc] init]; 

    if ([window respondsToSelector:@selector(setRootViewController:)]) {
        window.rootViewController = tapViewController;
    } else {
        [window addSubview:tapViewController.view];
    }

    [window addSubview:tapViewController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:12:59.097

只需使用`NSUserDefaults`. 以下是如何实现它：

```
[[NSUserDefaults standardUserDefaults] setObject:counter forKey:@"count"] //set the value

[[NSUserDefaults standardUserDefaults] objectForKey:@"count"] //get the value 
```

更多关于[这里](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)`NSUserDefaults`的教程的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T14:15:15.780

使用 iCloud ;) 这有点矫枉过正，但它非常适合学习。

这是一个教程。 [http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)

# java - XMLStreamReader 和解组 SOAP 消息

> ID：15813467
> 
> 赞同：2
> 
> 时间：2013-04-04T14:02:00.427
> 
> 标签：java, xml, soap, xml-parsing

我在解码 SOAP 信封时遇到问题。这是我的 XML

```
<?xml version="1.0"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:tns="http://c.com/partner/">
  <env:Header>c
    <tns:MessageId env:mustUnderstand="true">3</tns:MessageId>
  </env:Header>
  <env:Body>
    <GetForkliftPositionResponse xmlns="http://www.c.com">
      <ForkliftId>PC006</ForkliftId>
     </GetForkliftPositionResponse>
  </env:Body>
</env:Envelope> 
```

我使用以下代码来解码正文，但它总是返回到命名空间 tns:MessageID，而不是返回到 env:body。我还想将 XMLStreamReader 转换为字符串以解决调试问题，可以吗？

```
 XMLInputFactory xif = XMLInputFactory.newFactory();
        xif.setProperty("javax.xml.stream.isCoalescing", true);  // decode entities into one string

        StringReader reader = new StringReader(Message);
        String SoapBody = "";
        XMLStreamReader xsr = xif.createXMLStreamReader( reader );
        xsr.nextTag(); // Advance to header tag
        xsr.nextTag(); // advance to envelope
        xsr.nextTag(); // advance to body 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:18:53.840

在 xsr.nextTag() 读取 QName 后，您可以从那里获取标签名称和前缀

```
QName qname = xsr.getName();
String pref = qname.getPrefix();
String name = qname.getLocalPart(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:22:34.017

最初 xsr 指向文档事件（即 XML 声明）之前，然后`nextTag()`前进到下一个*标签*，而不是下一个兄弟*元素*：

```
 xsr.nextTag(); // Advance to opening envelope tag
    xsr.nextTag(); // advance to opening header tag
    xsr.nextTag(); // advance to opening MessageId 
```

如果您想跳到正文，则更好的成语是

```
boolean foundBody = false;
while(!foundBody && xsr.hasNext()) {
  if(xsr.next() == XMLStreamConstants.START_ELEMENT &&
     "http://www.w3.org/2003/05/soap-envelope".equals(xsr.getNamespaceURI()) &&
     "Body".equals(xsr.getLocalName())) {
    foundBody = true;
  }
}

// if foundBody == true, then xsr is now pointing to the opening Body tag.
// if foundBody == false, then we ran out of document before finding a Body

if(foundBody) {
  // advance to the next tag - this will either be the opening tag of the
  // element inside the body, if there is one, or the closing Body tag if
  // there isn't
  if(xsr.nextTag() == XMLStreamConstants.START_ELEMENT) {
    // now pointing at the opening tag of GetForkliftPositionResponse
  } else {
    // now pointing at </env:Body> - body was empty
  }
} 
```

# php - 多维数组中的 strip_tags

> ID：15813470
> 
> 赞同：0
> 
> 时间：2013-04-04T14:02:11.953
> 
> 标签：php

我发现如何删除动态多维数组中的 html 标签：

```
function strip_tags_deep($value){
  return is_array($value) ? array_map('strip_tags_deep', $value) : strip_tags($value);
} 
```

现在，我只想将 strip_tags 应用于这样的键值......

```
function strip_tags_deep($value){
  return is_array($value) ? array_map('strip_tags_deep', $value) : /* IF $KEY == "valuetest" THEN */ strip_tags($value);
} 
```

我怎样才能做到这一点 ？

编辑：感谢囚犯 =)

我的新功能是：

```
function strip_tags_deep($value, $key = null){
  if(is_array($value)){
    return array_map('strip_tags_deep', $value, array_keys($value));
  }else{
    if($key === '#title'){
      return strip_tags($value));
    }
    return $value;
  }
} 
```

但是她返回了一个数组但是...（<-见下面的edit2）但是如果我这样做..

```
function strip_tags_deep($value, $key = null){
  if(is_array($value)){
    return array_map('strip_tags_deep', $value);
  }else{
    //if($key === '#title'){
      return strip_tags(html_entity_decode($value));
    //}
    return $value;
  }
} 
```

我的结果与我的第一次尝试相同。嗯，很奇怪，为什么第三个参数的 array_map 有问题？

edit2：一个示例数组

```
"arrayvalue1"
 "arrayvalue11"
  "a" => "avalue"
  "b" => "bvalue"
  "arrayvalue111"
    "c" => "cvalue" 
```

变成 "'strip_tags_deep', $value, array_keys($value)" ：

```
0
 0
  0 => "avalue"
  1 => "bvalue"
 1
  0 => "cvalue" 
```

我丢失了“数组名称”：/（原谅我糟糕的英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:10:26.570

```
function strip_tags_deep($value, $key = null){
  if(is_array($value)){
    return array_map('strip_tags_deep', $value, array_keys($value));
  }else{
    if($key === 'valuetest'){
      return strip_tags($value);
    }
    return $value;
  }
} 
```

这将输出：

```
var_dump(strip_tags_deep(array('valuetest'=>'test<>'))); // array(1) { [0]=> string(4) "test" }
var_dump(strip_tags_deep(array('tests'=>'test<>'))); // array(1) { [0]=> string(6) "test<>" } 
```

# magento - Magento index.php 与 Geoip

> ID：15813473
> 
> 赞同：2
> 
> 时间：2013-04-04T14:02:18.107
> 
> 标签：magento, magento-1.5, geoip

我在 index.php 中为 Magento 编写了一小段代码，以根据 Geoip 的 country_code 自动切换商店视图。

代码运行良好，但我不是专家，我无法判断我是否有效地编写了代码。

我认为最好将 countryCode 保存到会话中。我知道如何在扩展中做到这一点，但我无法弄清楚如何在 index.php 中做到这一点。

```
$geocountryCode = geoip_country_code_by_name($_SERVER['REMOTE_ADDR']);
$countryList = array("AT","BE","BG","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","SK","SI","ES","SE","GB","RO");

    if(!in_array($geocountryCode, $countryList)) {
        $mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : 'int';
        $mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

    } else {
        $mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : 'default';
        $mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';
    }

    Mage::run($mageRunCode, $mageRunType); 
```

此致，

雷米

# wcf - 在端点配置上更改 IP 地址

> ID：15813482
> 
> 赞同：0
> 
> 时间：2013-04-04T14:02:34.253
> 
> 标签：wcf

我导入了一个 wsdl，并设置了我的 Web 服务。这很好用，但现在我想要使用的 IP 地址具有一定的灵活性。

[根据这样](https://stackoverflow.com/questions/14485851/changing-a-wcf-endpoint)的链接，这似乎很简单

我所要做的就是将端点属性设置为我想要的：

```
var client = new SampleClient();
client.Endpoint.Address = new EndpointAddress(url);
client.Open();
responseMessage = client.ServiceMethod(requestMessage); 
```

但在我的具体示例中，我没有可以点击的“端点”属性。我错过了什么？

```
PersonSearchWebServiceClient wc = new PersonSearchWebServiceClient();
PersonSearchResult r = wc.FindByPersonDetails(ps); 
```

我的 wc 对象没有 EndPoint 属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:41:23.393

我项目中的工作代码（连接到 Alfresco 网络服务）

```
private AuthenticationServiceSoapPortClient getAuthService()
    {
        if (_authClient == null || _authClient.State != CommunicationState.Opened)
        {
            BasicHttpBinding basicHttpBinding = new BasicHttpBinding(BasicHttpSecurityMode.Transport); // For no-Ssl use None
            basicHttpBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;
            basicHttpBinding.Security.Transport.ProxyCredentialType = HttpProxyCredentialType.None;
            basicHttpBinding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.UserName;
            basicHttpBinding.Security.Message.AlgorithmSuite = SecurityAlgorithmSuite.Default;
            var endPoint = new EndpointAddress(_alfrescoURL + "/" + _authEndPointPart);
            _authClient = new AuthenticationServiceSoapPortClient(basicHttpBinding, endPoint);
        }
        return _authClient;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:04:43.537

web/app.config 中将有一个用于导入服务的 URL 的设置，请更新此设置。

# sql - SQL Server 成员资格日期范围

> ID：15813485
> 
> 赞同：0
> 
> 时间：2013-04-04T14:02:38.240
> 
> 标签：sql, sql-server, date-range, gaps-and-islands

我是 SQL Server 的新手，有一个相当复杂的 SQL 任务，到目前为止我发现的解决方案都不适合我下面的问题。

我有一个数据库表，其中当前包含会员加入信息（下面的摘录），其中包含会员支付会员费的每一年/期间的一行；会员可以取消一年/期间的会员资格并在以后重新加入。我们需要将每个连续成员表示为一行，这样下面的提取 1 的内容就变成了提取 2：

**提取物 1**

```
Member_No    Start_Date                 End_Date
---------    ----------                 --------
10       2010-01-01 00:00:00.000    2011-01-01 00:00:00.000
10       2011-01-01 00:00:00.000    2012-01-01 00:00:00.000
10       2012-01-01 00:00:00.000    2013-01-01 00:00:00.000
10       2013-01-01 00:00:00.000    2014-01-01 00:00:00.000
20       2005-01-01 00:00:00.000    2006-01-01 00:00:00.000
20       2006-01-01 00:00:00.000    2007-01-01 00:00:00.000
20       2007-01-01 00:00:00.000    2008-01-01 00:00:00.000
30       2005-01-01 00:00:00.000    2006-01-01 00:00:00.000
30       2006-01-01 00:00:00.000    2007-01-01 00:00:00.000
30       2007-01-01 00:00:00.000    2008-01-01 00:00:00.000
30       2008-01-01 00:00:00.000    2009-01-01 00:00:00.000
30       2009-01-01 00:00:00.000    2010-01-01 00:00:00.000
30       2010-10-13 00:00:00.000    2011-01-01 00:00:00.000
30       2011-01-01 00:00:00.000    2012-01-01 00:00:00.000
30       2012-01-01 00:00:00.000    2013-01-01 00:00:00.000 
```

我需要用下表替换上表的内容 - 有问题的表中有更多记录，我将非常感谢任何人可以提供的任何助手：

**提取物 2**

```
Member_No    Start_Date                 End_Date
---------    ----------                 --------
10       2010-01-01 00:00:00.000    2014-01-01 00:00:00.000
20       2005-01-01 00:00:00.000    2008-01-01 00:00:00.000
30       2005-01-01 00:00:00.000    2010-01-01 00:00:00.000
30       2010-10-13 00:00:00.000    2013-01-01 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:12:26.370

这是一种更好的方法（原始方法仍在下方）：

```
with ms as (
      select ms.*,
             (select 1 from Membership ms2 where ms2.Member_no = ms.Member_no and cast(ms2.Start_date as date) = cast(ms.End_date as date)
             ) as LinkedToNext
      from MemberShip ms
     )
select member_no, MIN(start_date) as start_date, MAX(end_date) as end_date
from (select ms.*,
             (select top 1 end_date
              from ms ms2 where ms2.Member_no = ms.Member_No and ms2.LinkedToNext is NULL and ms2.Start_Date >= ms.Start_Date
             order by end_date desc
             ) as grouping
      from ms
     ) ms1
group by Member_no, grouping 
```

CTE 确定某事是否与下一个相关联。然后，分组是*未*链接到链接链的下一个记录的第一个记录的结束日期，这始终是相同的。

回应您关于“不止一排”的评论。这意味着一个成员有两个从同一日期开始的成员资格。如果这是唯一的重叠形式，您可以将其修复为：

```
with ms as (
      select member_no, start_date, max(end_date) as end_date
             (select 1 from Membership ms2 where ms2.Member_no = ms.Member_no and cast(ms2.Start_date as date) = cast(ms.End_date as date)
             ) as LinkedToNext
      from MemberShip ms
      group by member_no, start_date
     ) 
```

比我原来的方法简单得多，我仍然保留在下面：

```
with ms as (
      select ms.*,
             (select 1 from Membership ms2 where ms2.Member_no = ms.Member_no and ms2.Start_date = ms.End_date
             ) as LinkedToNext,
             (select ms2.End_Date from Membership ms2 where ms2.Member_no = ms.Member_no and ms2.Start_date = ms.End_date
             ) as NextEndDate,
              (select 1 from Membership ms2 where ms2.Member_no = ms.Member_no and ms2.End_date = ms.Start_date
              ) as LinkedToPrev
      from MemberShip ms
     )
select member_no, MIN(start_date) as start_date,
       MAX(coalesce(NextEndDate, End_Date)) as  end_date
from (select ms.*,
             (ROW_NUMBER() over (partition by Member_no order by Start_Date) -
              ROW_NUMBER() over (partition by Member_no, LinkedToNext order by Start_date)
             ) as grouping
      from ms
     ) ms1
where not (LinkedToNext is null and LinkedToPrev = 1)
group by member_no, grouping 
```

这使用相关的子查询来确定一个成员资格是否与下一个成员相关（基于开始日期与结束日期相同——如果您愿意，您实际上可以添加一个软糖因素）。

然后它使用了一个技巧。它按 start_date 为每个成员枚举行。它还根据每个成员是否链接到下一个成员，按开始日期枚举行。对于可以组合在一起的链，差异是恒定的。

最后一步是将其分组以获得最终结果。

一个复杂的问题是获得正确的结束日期。初始代码在计算中不包括链的末端。所以，我从下一条记录中借用了结束日期。然后它过滤掉这个结束记录。

# php - PHP中的类型杂耍和（严格）大于/小于比较

> ID：15813490
> 
> 赞同：118
> 
> 时间：2013-04-04T14:02:46.400
> 
> 标签：php, if-statement, comparison, logic, ieee-754

PHP以其类型杂耍而闻名。我必须承认这让我很困惑，而且我很难在比较中找出基本的逻辑/基本事物。

例如：如果`$a > $b`是真的并且`$b > $c`是真的，它是否也意味着它`$a > $c`总是*真的*？

按照基本逻辑，我会说*是*的，但是我很困惑我并不真正信任 PHP。也许有人可以提供一个不是这种情况的例子？

另外我想知道严格的小于和严格的大于运算符（因为它们的含义被严格描述为我过去只从相等比较中知道的）如果左右操作数交换是否有任何区别严格不相等的值：

```
# Precondition:
if ($a === $b) {
    throw new Exception(
       'Both are strictly equal - can not compare strictly for greater or smaller'
    );
}

($a > $b) !== ($b > $a) 
```

对于大多数类型比较组合，这些[更大/更小比较运算符](http://php.net/language.operators.comparison)没有记录，因此在这种情况下阅读手册并没有真正的帮助。

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-04-04T14:10:28.867

PHP 的比较运算符在以下几个方面偏离了计算机科学的定义：

为了构成*等价关系* `==`，必须是自反的、对称的和传递的：

*   PHP 的`==`运算符**不是自反**的，即`$a == $a`并不总是正确的：

    ```
    var_dump(NAN == NAN); // bool(false) 
    ```

    注意：任何涉及的比较`NAN`总是`false`不是特定于 PHP 的。它是由 IEEE 754 浮点算术标准规定的（[更多信息](https://stackoverflow.com/questions/1565164/what-is-the-rationale-for-all-comparisons-returning-false-for-ieee754-nan-values)）。

*   PHP 的`==`运算符是**对称**`$a == $b`的，即`$b == $a`始终相同。

*   PHP 的`==`运算符是**不可****传递**的，即 from`$a == $b`并且`$b == $c`不跟随：**`$a == $c`**

     **```
    var_dump(true == "a"); // bool(true)
    var_dump("a" == 0);    // bool(true)
    var_dump(true == 0);   // bool(false) 
    ```** 

 **为了构成*偏序* `<=`/`>=`必须是自反的、反对称的和传递的：

*   PHP 的`<=`运算符**不是自反**的，即`$a <= $a`并不总是正确的（示例与 for 相同`==`）。

*   PHP 的`<=`运算符**不是反对称的**，即 from`$a <= $b`并且`$b <= $a`不遵循`$a == $b`：

    ```
    var_dump(NAN <= "foo"); // bool(true)
    var_dump("foo" <= NAN); // bool(true)
    var_dump(NAN == "foo"); // bool(false) 
    ```

*   PHP 的`<=`运算符**不可传递**，即 from`$a <= $b`且不`$b <= $c`跟随`$a <= $c`（示例与 for 相同`==`）。

*   额外：PHP 的`<=`操作符**不是 total**，即两者`$a <= $b`和`$b <= $a`都可以为假：

    ```
    var_dump(new stdClass <= new DateTime); // bool(false)
    var_dump(new DateTime <= new stdClass); // bool(false) 
    ```

为了构成*严格的偏序* `<`/`>`必须是非自反的、不对称的和传递的：

*   PHP 的`<`运算符是不**自反**的，即`$a < $a`永远不是真的。请注意，这**仅适用于 PHP 5.4**。之前`INF < INF`评估为`true`.

*   PHP 的`<`运算符**不是非对称**的，即 from`$a < $b`不遵循`!($b < $a)`（示例与`<=`非反对称相同）。

*   PHP 的`<`运算符是**不可传递**的，即 from`$a < $b`并且`$b < $c`不跟随`$a < $c`：

    ```
    var_dump(-INF < 0);    // bool(true)
    var_dump(0 < TRUE);    // bool(true)
    var_dump(-INF < TRUE); // bool(false) 
    ```

*   额外：PHP 的`<`运算符**不是三分法**，即 all of `$a < $b`，`$b < $a`并且`$a == $b`可以为 false （示例与`<=`非 total 相同）。

*   额外：PHP 的`<`运算符可以是**循环**的，即`$a < $b`,`$b < $c`和是可能的`$c < $a`：

    ```
    var_dump(INF < []);           // bool(true)
    var_dump([] < new stdClass);  // bool(true)
    var_dump(new stdClass < INF); // bool(true) 
    ```

    注意：上面的例子抛出了“Object of class stdClass could not be convert to double”的提示。

[您可以在PHP Sadness 52 -](http://www.phpsadness.com/sad/52)比较运算符上找到一些关于 PHP 比较运算符的漂亮图表。

最后一点，我想指出 PHP*确实*保证了两个等式（与几乎所有其他内容不同）。这两个始终成立，仅仅是因为编译器将一个简化为另一个：

```
($a > $b) == ($b < $a)
($a >= $b) == ($b <= $a) 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2013-04-04T19:48:07.563

PHP中**没有** *严格的相同*比较运算符（`>==`或`<==`）*（至少在 PHP 5.6.14 中）*，但有几种方法可以在检查大/小之前**强制执行严格的类型检查：**

1.  检查两种变量类型`if (gettype($a) === gettype($b))`
2.  强制您需要的类型转换，例如。`if ((string)$a === (string)$b)`
3.  强制您需要的类型杂耍，例如。`if (($a . '') === ($b . ''))`

请注意：

*   [浮点精度](http://php.net/manual/en/language.types.float.php)有限
*   `INF`并且`NAN`是[ieee754](/questions/tagged/ieee754 "显示标记为“ieee754”的问题")`float`下的类型
*   一些*Infinity*等于一些其他*Infinity*（自 PHP 5.4 起）
*   科学记数法`e`总是有类型的，即使数量很小`float`也从来没有。`integer`
*   整数会`PHP_INT_MAX`自动转换为`float`
*   在系统边界上浮动获得`INF`值
*   未定义变量的类型和值`NULL`
*   前面的整数`0`从八进制转换为十进制（按约定）
*   将包含带有前导的整数的字符串转换`0` *为*整数会去除前导`0`

一些奇特的比较列表：

```
很奇怪：
     $一个VS。$b $a>$b $a<$b $a<=$b $a>=$b $a==$b $a===$b
  浮动（NAN）浮动（-INF）假假假假假假假
  浮动（南）浮动（0）假假假假假假假
  浮动（南） 浮动（1） 假假假假假假假
  浮动(NAN) 浮动(INF) 假假假假假假
  浮动（南） 浮动（南） 假假假假假假假
  float(NAN) int(-1) 假假假假假假
  float(NAN) int(0) 假 假 假 假 假 假
  float(NAN) int(1) 假 假 假 假 假 假

```

相等但不相同：

```
     $一个VS。$b $a>$b $a<$b $a<=$b $a>=$b $a==$b $a===$b

```

```
  NULL(NULL) array() 假 假 真 真 真 假
  NULL(NULL) bool(false) false false true true true false
  NULL(NULL) float(0) 假 假 真 真 真 假
  NULL(NULL) int(0) 假 假 真 真 真 假
  NULL(NULL) str('') false false true true true false
   数组（）布尔（假）假假真真真假
 bool(false) float(0) false false true true true false
 bool(false) int(0) false false true true true false
   str('') bool(false) false false true true true false
 bool(false) str('0') false false true true true false
 float(-INF) bool(true) false false true true true false
  bool(true) float(1) false false true true true false
  浮动（INF）布尔（真）假假真真真假
  float(NAN) bool(true) false false true true true false
  bool(true) int(-1) false false true true true false
  bool(true) int(1) false false true true true false
  bool(true) str("\0") false false true true true false
  bool(true) str('+') false false true true true false
  bool(true) str('-') false false true true true false
  bool(true) str('01') false false true true true false
  bool(true) str('1') false false true true true false
  bool(true) str('false') false false true true true false
 str('text') bool(true) false false true true true false
 str('true') bool(true) false false true true true false
 int(0) float(0) 假 假 真 真 真 假
  str("\0") float(0) false false true true true false
   str('') float(0) 假 假 真 真 真 假
   str('+') float(0) false false true true true false
   str('-') float(0) false false true true true false
   str('0') float(0) false false true true true false
 str('false') float(0) false false true true true false
 str('text') float(0) false false true true true false
 str('true') float(0) false false true true true false
    int(1) float(1) 假 假 真 真 真 假
   float(1) str('01') 假 假 真 真 真 假
   float(1) str('1') 假 假 真 真 真 假
  str("\0") int(0) false false true true true false
   str('') int(0) 假 假 真 真 真 假
   str('+') int(0) false false true true true false
   str('-') int(0) false false true true true false
    int(0) str('0') false false true true true false
 str('false') int(0) 假 假 真 真 真 假
 str('text') int(0) false false true true true false
 str('true') int(0) false false true true true false
    int(1) str('01') 假 假 真 真 真 假
    int(1) str('1') 假 假 真 真 真 假
   str('1') str('01') false false true true true false

```

同时降低和提高？

```
     $一个VS。$b $a>$b $a<$b $a<=$b $a>=$b $a==$b $a===$b
  float(NAN) str("\0") 真真真真假假
  float(NAN) str('') true true true false false
  float(NAN) str('+') true true true false false
  float(NAN) str('-') true true true false false
  float(NAN) str('0') true true true false false
  float(NAN) str('01') true true true false false
  float(NAN) str('1') true true true false false
  float(NAN) str('false') true true true false false
  float(NAN) str('text') true true true false false
  float(NAN) str('true') true true true false false

```

相等且相同：

```
     $一个VS。$b $a>$b $a<$b $a<=$b $a>=$b $a==$b $a===$b
  NULL(NULL) NULL(NULL) 假 假 真 真 真 真
 浮动（-INF） 浮动（-INF） 假 假 真 真 真 真
  浮动（INF）浮动（INF）假假真真真真真假

```

更低或更高：

```
     $一个VS。$b $a>$b $a<$b $a<=$b $a>=$b $a==$b $a===$b

```

```
  NULL(NULL) bool(true) false true true false false false
 float(-INF) NULL(NULL) 真假假真假假
  NULL(NULL) float(1) 假真真假假假
  浮动(INF) NULL(NULL) 真假假真假假
  float(NAN) NULL(NULL) 真假假真假假
  NULL(NULL) int(-1) false true true false false false
  NULL(NULL) int(1) 假真真假假假
  NULL(NULL) str("\0") false true true false false false
  NULL(NULL) str('+') false true true false false false
  NULL(NULL) str('-') false true true false false false
  NULL(NULL) str('0') false true true false false false
  NULL(NULL) str('01') false true true false false false
  NULL(NULL) str('1') false true true false false false
  NULL(NULL) str('false') false true true false false false
  NULL(NULL) str('text') false true true false false false
  NULL(NULL) str('true') false true true false false false
 数组（）布尔（真）假真真假假假
 浮动（-INF）数组（）假真真假假假假
   数组（）浮点（0）真假假真假假
   数组（）浮点数（1）真假假真假假
  浮动（INF）数组（）假真真假假假
  浮动（NAN）数组（）假真真假假假
   array() int(-1) 真假假真假假
   array() int(0) 真假假真假假
   array() int(1) 真假假真假假
   array() str("\0") 真假假真假假
   str('') 数组() 假真真假假假
   array() str('+') true false false true false false
   array() str('-') true false false true false false
   array() str('0') 真假假真假假
   array() str('01') 真假假真假假
   array() str('1') 真假假真假假
   array() str('false') true false false true false false
   array() str('text') true false false true false false
   array() str('true') true false false true false false  布尔（真）布尔（假）真假假真假假
 浮动（-INF）布尔（假）真假假真假假
   float(1) bool(false) true false false true false false
  浮动（INF）布尔（假）真假假假真假假
  浮动（南）布尔（假）真假假假真假假
 bool(false) int(-1) false true true false false false
    int(1) bool(false) 真假假假真假假
 bool(false) str("\0") false true true false false false
 bool(false) str('+') false true true false false false
 bool(false) str('-') false true true false false false
 bool(false) str('01') false true true false false false
   str('1') bool(false) true false false true false false
 bool(false) str('false') false true true false false false
 str('text') bool(false) true false false true false false
 str('true') bool(false) true false false true false false
  bool(true) float(0) true false false true false false
  bool(true) int(0) true false false true false false
   str('') bool(true) false true true false false false
  bool(true) str('0') true false false true false false
 浮动（-INF）浮动（0）假真真假假假
 浮动（-INF）浮动（1）假真真假假假
  浮动（INF）浮动（-INF）真假假真假假
 float(-INF) int(-1) false true true false false false
 float(-INF) int(0) false true true false false false
 float(-INF) int(1) false true true false false false
 float(-INF) str("\0") false true true false false false
 float(-INF) str('') false true true false false false
 float(-INF) str('+') false true true false false false
 float(-INF) str('-') false true true false false false
 float(-INF) str('0') false true true false false false
 float(-INF) str('01') false true true false false false
 float(-INF) str('1') false true true false false false
 float(-INF) str('false') false true true false false false
 float(-INF) str('text') false true true false false false
 float(-INF) str('true') false true true false false false
   浮动(1) 浮动(0) 真假假真假假
  浮动（INF）浮动（0）真假假真假假
   float(0) int(-1) 真假假假真假假
    int(1) float(0) 真假假真假假
   float(0) str('01') false true true false false false
   str('1') float(0) 真假假真假假
  浮动（INF）浮动（1）真假假真假假
   float(1) int(-1) 真假假真假假
   float(1) int(0) 真假假真假假
   float(1) str("\0") 真假假真假假
   str('') float(1) 假真真假假假
   float(1) str('+') 真假假真假假
   float(1) str('-') true false false true false false
   float(1) str('0') 真假假真假假
   float(1) str('false') 真假假假真假假
 str('text') float(1) false true true false false false
 str('true') float(1) false true true false false false
  float(INF) int(-1) 真假假真假假
  float(INF) int(0) 真假假假真假假
  float(INF) int(1) 真假假真假假
  float(INF) str("\0") 真假假真假假
  float(INF) str('') 真假假假真假假
  float(INF) str('+') 真假假真假假
  float(INF) str('-') 真假假真假假
  浮动（INF）str（'0'）真假假真假假
  浮动（INF）str（'01'）真假假真假假
  浮动（INF）str（'1'）真假假真假假
  float(INF) str('false') 真假假真假假
  浮动（INF）str（'文本'）真假假真假假
  float(INF) str('true') 真假假真假假
    int(0) int(-1) 真假假真假假
    int(1) int(-1) 真假假真假假
  str("\0") int(-1) 真假假真假假
   str('') int(-1) 真假假真假假
   str('+') int(-1) 真假假真假假
   str('-') int(-1) true false false true false false
   str('0') int(-1) 真假假真假假
   int(-1) str('01') false true true false false false
   str('1') int(-1) 真假假真假假
 str('false') int(-1) 真假假真假假
 str('text') int(-1) true false false true false false
 str('true') int(-1) 真假假真假假
    int(1) int(0) 真假假真假假
    int(0) str('01') false true true false false false
   str('1') int(0) 真假假真假假
    int(1) str("\0") 真假假真假假
   str('') int(1) 假真真假假假
    int(1) str('+') 真假假真假假
    int(1) str('-') 真假假真假假
    int(1) str('0') 真假假真假假
    int(1) str('false') 真假假真假假
str('text') int(1) false true true false false false
 str('true') int(1) false true true false false false
   str('') str("\0") false true true false false false
   str('+') str("\0") true false false true false false
   str('-') str("\0") true false false true false false
  str("\0") str('0') false true true false false false
  str("\0") str('01') false true true false false false
   str('1') str("\0") 真假假真假假
 str('false') str("\0") true false false true false false
 str('text') str("\0") true false false true false false
 str('true') str("\0") true false false true false false
   str('') str('+') false true true false false false
   str('') str('-') false true true false false false
   str('') str('0') false true true false false false
   str('') str('01') false true true false false false
   str('') str('1') false true true false false false
   str('') str('false') false true true false false false
   str('') str('text') false true true false false false
   str('') str('true') false true true false false false
 str('-') str('+') true false false true false false
   str('+') str('0') false true true false false false
   str('+') str('01') false true true false false false
   str('1') str('+') 真假假真假假
 str('false') str('+') true false false true false false
 str('text') str('+') true false false true false false
 str('true') str('+') true false false true false false
   str('-') str('0') false true true false false false
   str('-') str('01') false true true false false false
   str('1') str('-') true false false true false false
 str('false') str('-') true false false true false false
 str('text') str('-') true false false true false false
 str('true') str('-') true false false true false false
   str('0') str('01') false true true false false false
   str('1') str('0') 真假假真假假
 str('false') str('0') true false false true false false
 str('text') str('0') true false false true false false
 str('true') str('0') true false false true false false
 str('false') str('01') true false false true false false
 str('text') str('01') true false false true false false
 str('true') str('01') true false false true false false
   str('1') str('false') false true true false false false
 str('text') str('1') true false false true false false
 str('true') str('1') true false false true false false
str('text') str('false') true false false true false false
 str('true') str('false') true false false true false false str('true') str('text') true false false true false false

```

* * *

**`$a > $b > $c`难题何时：`$a`不大于`$c`。**

```
A<C : float(NAN) > str('a') > str('')
A<C : float(NAN) > str('a') > str('1')
A<C : float(NAN) > str('a') > str('A')
A<C : float(NAN) > str('a') > str('0')
A<C : float(NAN) > str('1') > str('')
A<C : 浮点数(NAN) > str('1') > str('0')
A<C : float(NAN) > str('A') > str('')
A<C : float(NAN) > str('A') > str('1')
A<C : 浮点数(NAN) > str('A') > str('0')
A<C : 浮点数(NAN) > str('0') > str('')
A<C : str('') > float(NAN) > str('a')
A<C : str('') > float(NAN) > str('1')
A<C : str('') > float(NAN) > str('A')
A<C : str('') > float(NAN) > str('0')
A<C : str('a') > str('') > float(NAN)
A<C : str('a') > str('1') > float(NAN)
A<C : str('a') > str('A') > float(NAN)
A<C : str('a') > str('0') > float(NAN)
A<C : str('0') > str('') > float(NAN)
A==C : bool(true) > str('') > float(NAN)
A==C : bool(true) > str('') > float(-INF)
A==C : bool(true) > str('') > int(-1)
A==C : bool(true) > str('') > float(-1)
A==C : bool(true) > array() > float(NAN)
A==C : bool(true) > array() > float(INF)
A==C : bool(true) > array() > float(-INF)
A==C : bool(true) > array() > str('a')
A==C : bool(true) > array() > int(1)
A==C : bool(true) > array() > float(1)
A==C : bool(true) > array() > str('1')
A==C : bool(true) > array() > str('A')
A==C : bool(true) > array() > int(-1)
A==C : bool(true) > array() > float(-1)
A==C : bool(true) > int(0) > float(-INF)
A==C : bool(true) > int(0) > int(-1)
A==C : bool(true) > int(0) > float(-1)
A==C : bool(true) > str('0') > float(NAN)
A==C : bool(true) > str('0') > float(-INF)
A==C : bool(true) > str('0') > int(-1)
A==C : bool(true) > str('0') > float(-1)
A==C : bool(true) > float(0) > float(-INF)
A==C : bool(true) > float(0) > int(-1)
A==C : bool(true) > float(0) > float(-1)
A==C : int(1) > str('a') > str('1')
A==C : int(1) > str('A') > str('1')
A==C : 浮点数(1) > str('a') > str('1')
A==C : 浮点数(1) > str('A') > str('1')
A==C : str('a') > str('1') > int(0)
A==C : str('a') > str('1') > float(0)
A==C : str('') > float(-INF) > NULL(NULL)
A==C : str('') > float(-INF) > bool(false)
A==C : str('') > int(-1) > NULL(NULL)
A==C : str('') > int(-1) > bool(false)
A==C : str('') > float(-1) > NULL(NULL)
A==C : str('') > float(-1) > bool(false)
A==C：数组（）>浮点（南）>空（空）
A==C：数组（）>浮点（南）>布尔（假）
A==C：数组（）>浮点（INF）>空（空）
A==C：数组（）>浮点（INF）>布尔（假）
A==C：数组（）>浮点（-INF）>空（空）
A==C：数组（）>浮点（-INF）>布尔（假）
A==C : 数组() > str('a') > NULL(NULL)
A==C : 数组() > str('a') > bool(false)
A==C : 数组() > int(1) > NULL(NULL)
A==C : 数组() > int(1) > bool(false)
A==C：数组（）>浮点（1）>空（空）
A==C：数组（）>浮点（1）>布尔（假）
A==C : 数组() > str('1') > NULL(NULL)
A==C : 数组() > str('1') > bool(false)
A==C : 数组() > str('A') > NULL(NULL)
A==C : 数组() > str('A') > bool(false)
A==C : 数组() > str('0') > NULL(NULL)
A==C : 数组() > int(-1) > NULL(NULL)
A==C：数组（）> int（-1）> bool（假）
A==C：数组（）>浮点（-1）>空（空）
A==C：数组（）>浮点（-1）>布尔（假）
A==C : str('') > float(NAN) > bool(false)
A==C : str('') > float(NAN) > NULL(NULL)
A==C : str('A') > str('1') > int(0)
A==C : str('A') > str('1') > float(0)
A==C : int(0) > float(-INF) > NULL(NULL)
A==C : int(0) > float(-INF) > bool(false)
A==C : int(0) > int(-1) > NULL(NULL)
A==C : int(0) > int(-1) > bool(false)
A==C : int(0) > float(-1) > NULL(NULL)
A==C : int(0) > float(-1) > bool(false)
A==C : str('0') > float(NAN) > bool(false)
A==C : str('0') > float(-INF) > bool(false)
A==C : str('0') > int(-1) > bool(false)
A==C : str('0') > float(-1) > bool(false)
A==C : 浮点数(0) > 浮点数(-INF) > NULL(NULL)
A==C：浮点（0）>浮点（-INF）>布尔（假）
A==C : 浮点数(0) > int(-1) > NULL(NULL)
A==C : 浮点数(0) > int(-1) > bool(false)
A==C：浮点（0）>浮点（-1）>空（空）
A==C：浮点（0）>浮点（-1）>布尔（假）
A===C : str('0') > float(NAN) > str('0')
A===C : str('') > float(NAN) > str('')
A===C : str('a') > float(NAN) > str('a')
A===C : str('1') > float(NAN) > str('1')
A===C : str('A') > float(NAN) > str('A')

```

[有趣的字符串比较：'Queen' `>`'King' `>`'Jack' `>`'Ace']

另请查看涵盖对的[PHP 类型比较表：](http://www.php.net/manual/en/types.comparisons.php)

*   `isset()`和`is_null()`
*   `if()`和`empty()`
*   布尔值`==`与`===`

检查实时 PHP 版本之间的差异。[http://3v4l.org/MAfDu](http://3v4l.org/MAfDu)。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-04-06T22:29:52.450

在您更正问题的第二部分后，我将这部分的答案留给其他人。我只想对你的问题的第一部分给出最令人惊讶的答案，即是否存在`<`and`>`运算符不及物的例子。这里是。

这些都是`true`：

```
"10" < "1a"
"1a" < "2"
"10" > "2" 
```

如果`<`是传递的（`$a < $b`∧ `$b < $c`⇒ `$a < $c`），最后一行将是

```
"10" < "2" 
```

但是 PHP 试图变得友善（？！）并尽可能将字符串解释为数字。

事实证明，由于上述不传递性，`sort()`可以根据输入顺序将**相同**的元素排序为**不同的顺序，****即使没有两个元素是`==`**（并且没有元素是 NAN）。[我在对 sort()](http://www.php.net/manual/en/function.sort.php#106900)的评论中指出了这一点，其本质是：

```
sort(array("10", "1a", "2" )) => array("10", "1a", "2" )
sort(array("10", "2",  "1a")) => array("1a", "2",  "10")
sort(array("1a", "10", "2" )) => array("2",  "10", "1a")
sort(array("1a", "2",  "10")) => array("1a", "2",  "10")
sort(array("2",  "10", "1a")) => array("2",  "10", "1a")
sort(array("2",  "1a", "10")) => array("10", "1a", "2" ) 
```**

# jenkins - Jenkins Email-ext：附加构建日志不起作用

> ID：15813494
> 
> 赞同：1
> 
> 时间：2013-04-04T14:02:56.680
> 
> 标签：jenkins, continuous-integration, email-ext

我正在尝试使用 Email-ext（版本 2.27.1）和 Jenkins（版本 1.508）在构建失败时向自上次成功以来一直从事该项目的提交者发送电子邮件。

我还想将构建日志附加到电子邮件中，并且我看到并检查了“附加构建日志”按钮，但是每当我单击保存或应用并返回配置时，该按钮就会再次取消选中。发生了什么事，我该如何解决这个问题？

![詹金斯](https://i.stack.imgur.com/m2kh0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:41:13.600

这是 email-ext 2.27.1 中的一个错误，并在 2.28 中修复（如果您相信的话，今天发布。）

[在此处查看版本历史](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin#Email-extplugin-VersionHistory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:09:05.947

我们可能在我们的系统上使用了一个旧版本的电子邮件分机，所以它没有这个选项可用。

或者，除了消息的默认内容之外，您还可以使用以下变量： `$BUILD_LOG`

如果您使用 html 作为内容类型（不能正确显示新行），这将无法正确显示日志内容，但它可以与 Text 内容类型一起正常工作。

对于 html，您可以使用 Jelly Scripts 获得可定制的内容。有一些默认示例将至少显示构建日志的最后部分。

# sql - 检索大于另一个条目

> ID：15813496
> 
> 赞同：0
> 
> 时间：2013-04-04T14:02:58.090
> 
> 标签：sql, sqlite

我有一个实体：统计。

stat 实体中有 5 个字段（col1、col2、col3、col4 和 col5）。

我的实体中有一些值，例如

```
------------------------------------
| col1 | col2 | col3 | col4 | col4 |
------------------------------------
|  13  |  15  |  17  |  10  |   4  |   
|  30  |   5  |  19  |  20  |   5  |   
|  10  |  10  |   7  |  30  |   6  |   
|  15  |  25  |  12  |  12  |  10  |   
|  17  |  14  |  14  |  11  |  40  |   
------------------------------------ 
```

我有一个包含 5 个值（10、14、10、5、1）的数组（维度 5），我想检索所有比我的数组更大的行。

有了这个例子，我想检索

```
------------------------------------
|  13  |  15  |  17  |  10  |   4  |    
|  15  |  25  |  12  |  12  |  10  |     
------------------------------------ 
```

我做了

```
SELECT * from myEntity where col1>tab1 AND col2>tab2 AND col3>tab3 .... 
```

但我的问题是：有没有更方便的方法？如果我的实体中有 20 个列？

编辑 ：

如果有一种方便的方式可以按 col1、col2、col3 ... 排序。这是一个好主意

1.  在实体中插入数组，
2.  命令实体，
3.  检索此新条目之前的所有条目
4.  删除条目

# ios - 自定义表格单元重用/出列

> ID：15813498
> 
> 赞同：0
> 
> 时间：2013-04-04T14:02:59.877
> 
> 标签：ios, xcode, tableviewcell

我知道之前已经发布过类似的问题，但我无法在其中找到适合我的解决方案，所以请多多包涵...

我在 xcode 中有一个带有自定义表格单元格的表格视图。该单元格目前只不过是一个标签：

```
SiteFileCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
cell.fileNameLabel.text = [self.listDir.filesInfo objectAtIndex:indexPath.row]; 
```

这很好用。我本质上是在做一个目录钻取结构。当我选择一个单元格时，它会通过将一个新的表格视图推送到导航控制器堆栈并重新加载所有表格单元格来进入下一个级别。

此时我看到一个经常报告的错误：

*无法使具有标识符 Cell 的单元出队 - 必须为标识符注册一个 nib 或一个类或连接故事板中的原型单元*

因此，经过研究，我看到了我应该注册类型的建议：

```
[self.tableView registerClass:[SiteFileCell class] forCellReuseIdentifier:@"FileCell"]; 
```

如果我这样做，事情会很好，但没有一个单元格显示任何标签！

我已经看到一些关于可能在单元类的 initWithStyle 方法中需要自定义代码的参考，但我不太清楚那里需要什么，所以有人可以给我更多的指针吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:06:00.000

而不是注册一个*类*注册一个*nib*。该笔尖是您设计表格视图单元格子类的笔尖。它只包含一个顶级对象，即单元格，并且该单元格已被指定为 SiteFileCell。Presto，一切都会奏效。

请参阅我书中的完整说明（带有可下载的代码）：

[http://www.aeth.com/iOSBook/ch21.html#_custom_cells](http://www.apeth.com/iOSBook/ch21.html#_custom_cells)

见特别。“设计笔尖中的单元格”小节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:05:57.700

如果您将 XIB 用于单元格，则只能在 XIB 文件中设置标识符。

# sql-server - IF ELSE IF ELSE IF.... 代码想要变得更聪明

> ID：15813502
> 
> 赞同：1
> 
> 时间：2013-04-04T14:03:10.160
> 
> 标签：sql-server, tsql

为了让这段代码更智能，我做了很多尝试……如您所见……它总是一样的……一个变量可以有 6 个不同的值……这决定了在哪一列中写入其他值……如果记录集仍然存在我进行“更新...”否则我进行“插入...”

我试图做一些动态的sql...但它不起作用...

我试图做一些“案例......”代码......但它不起作用......

此代码有效：

```
-- How many roads must a man walk down...
IF @DatenFeld = 'weaNr'
    IF NOT EXISTS(SELECT * FROM @StaDa_Table WHERE DatenSatz=@DatenSatz)
        INSERT INTO @StaDa_Table (DatenSatz, weaNr ) VALUES (@DatenSatz, Convert(nvarchar(20),@DatenWert))
    ELSE
        UPDATE @StaDa_Table SET weaNr = Convert(nvarchar(20),@DatenWert) WHERE DatenSatz=@DatenSatz
ELSE
    IF @DatenFeld = 'weaTyp'
        IF NOT EXISTS(SELECT * FROM @StaDa_Table WHERE DatenSatz=@DatenSatz)
            INSERT INTO @StaDa_Table (DatenSatz, weaTyp ) VALUES (@DatenSatz, Convert(nvarchar(20),@DatenWert))
        ELSE
            UPDATE @StaDa_Table SET weaTyp = Convert(nvarchar(20),@DatenWert) WHERE DatenSatz=@DatenSatz
    ELSE    
        IF @DatenFeld = 'nennP_W'
            IF NOT EXISTS(SELECT * FROM @StaDa_Table WHERE DatenSatz=@DatenSatz)
                INSERT INTO @StaDa_Table (DatenSatz, nennP_W ) VALUES (@DatenSatz, Convert(int,@DatenWert))
            ELSE
                UPDATE @StaDa_Table SET nennP_W = Convert(int,@DatenWert) WHERE DatenSatz=@DatenSatz
        ELSE
            IF @DatenFeld = 'refErt_Wh'
                IF NOT EXISTS(SELECT * FROM @StaDa_Table WHERE DatenSatz=@DatenSatz)
                    INSERT INTO @StaDa_Table (DatenSatz, refErt_Wh ) VALUES (@DatenSatz, Convert(bigint,@DatenWert))
                ELSE
                    UPDATE @StaDa_Table SET refErt_Wh = Convert(bigint,@DatenWert) WHERE DatenSatz=@DatenSatz
            ELSE
                IF @DatenFeld = 'inbetrieb'
                    IF NOT EXISTS(SELECT * FROM @StaDa_Table WHERE DatenSatz=@DatenSatz)
                        INSERT INTO @StaDa_Table (DatenSatz, inbetrieb ) VALUES (@DatenSatz, Convert(datetime,@DatenWert))
                    ELSE
                        UPDATE @StaDa_Table SET inbetrieb = Convert(datetime,@DatenWert) WHERE DatenSatz=@DatenSatz
                ELSE
                    IF @DatenFeld = 'uw'
                        IF NOT EXISTS(SELECT * FROM @StaDa_Table WHERE DatenSatz=@DatenSatz)
                            INSERT INTO @StaDa_Table (DatenSatz, uw ) VALUES (@DatenSatz, Convert(nvarchar(50),@DatenWert))
                        ELSE
                            UPDATE @StaDa_Table SET uw = Convert(nvarchar(50),@DatenWert) WHERE DatenSatz=@DatenSatz 
```

...所以也许更熟悉 tsql 的人可以帮助我使这段代码更聪明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:06:56.437

也许这样的事情会有所帮助：

```
declare @weaNr nvarchar(20) = null
declare @weaTyp nvarchar(20) = null
declare @nennP_W int = null
declare @refErt_Wh bigint = null
declare @inbetrieb datetime = null
declare @uw nvarchar(50) = null

select  @weaNr = case when @DatenFeld = 'weaNr' then Convert(nvarchar(20),@DatenWert) end
        ,@weaTyp = case when @DatenFeld = 'weaTyp' then Convert(nvarchar(20),@DatenWert) end
        ,@nennP_W = case when @DatenFeld = 'nennP_W' then Convert(int,@DatenWert) end
        ,@refErt_Wh = case when @DatenFeld = 'refErt_Wh' then Convert(bigint,@DatenWert) end
        ,@inbetrieb = case when @DatenFeld = 'inbetrieb' then Convert(datetime,@DatenWert) end
        ,@uw = case when @DatenFeld = 'uw' then Convert(nvarchar(50),@DatenWert) end

IF NOT EXISTS(SELECT * FROM @StaDa_Table WHERE DatenSatz=@DatenSatz)
    INSERT INTO @StaDa_Table (DatenSatz, weaNr, weaTyp, nennP_W, refErt_Wh, inbetrieb, uw ) 
    VALUES (@DatenSatz, @weaNr, @weaTyp, @nennP_W, @refErt_Wh, @inbetrieb, @uw)
ELSE
    UPDATE  @StaDa_Table
    SET     weaNr = ISNULL(@weaNr, weaNr)
            ,weaTyp = ISNULL(@weaTyp, weaTyp)
            ,nennP_W = ISNULL(@nennP_W, nennP_W)
            ,refErt_Wh = ISNULL(@refErt_Wh, refErt_Wh)
            ,inbetrieb = ISNULL(@inbetrieb, inbetrieb)
            ,uw = ISNULL(@uw, uw)
    WHERE DatenSatz=@DatenSatz 
```

假设所有列都可以为空。

# jquery - jQuery (event.which)、mousedown 浏览器兼容性

> ID：15813503
> 
> 赞同：0
> 
> 时间：2013-04-04T14:03:19.020
> 
> 标签：jquery

我已经看到与此相关的非常相似的问题，但这些问题仅涉及按键事件，而不是像我这样做的鼠标点击。

基本上我试图确定用户是单击鼠标左键还是鼠标右键。我的代码：

```
$(".class_name").mousedown(function () {

    switch (event.which) {
        case 1: //leftclick
            //...
            break;
        case 3: //rightclick
            //...
            break;
    }
}); 
```

这在 Safari 中按预期工作，但在 IE 或 Firefox 中无效。IE 和 FF 就像什么都没发生一样，而 Safari 执行特定点击的代码。jQuery 通常在跨浏览器兼容性方面做得很好，所以我猜我需要以不同的方式格式化代码，但不确定如何准确。

任何帮助将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:06:07.540

这里的问题是您使用的是[*全局* `window.event`](http://www.quirksmode.org/js/events_access.html#link3)对象，而不是 jQuery 的事件对象。 `window.event`仅适用于某些浏览器，它不是 W3C 标准。

jQuery 对事件对象进行规范化，因此它在所有浏览器中都是相同的。事件处理程序将该 jQuery 事件对象作为参数传递。你应该使用那个。

```
$(".class_name").mousedown(function (e) {

    switch (e.which) {
        case 1: //leftclick
            //...
            break;
        case 3: //rightclick
            //...
            break;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:06:32.563

您忘记将事件变量放在函数调用中。

```
$(".class_name").mousedown(function (/*HERE*/event) {

switch (event.which) {
    case 1: //leftclick
        //...
        break;
    case 3: //rightclick
        //...
        break;
 }
}); 
```

# javascript - 如何在 Javascript 中使用 Spring Security 用户名

> ID：15813504
> 
> 赞同：1
> 
> 时间：2013-04-04T14:03:20.073
> 
> 标签：javascript, jsp, spring-security, jstl, dojo

我正在尝试在某些 JavaScript 中访问 Spring Source Security 用户变量 ${username} 并且它一直以空字符串的形式返回。在上一页中，我仅使用 ${username} 显示用户名。据我所知，我需要做的就是在 javascript 中得到它：

```
<c:out value="${username}"/> 
```

但是在下面的代码中，生成的 HTML 总是有一个空字符串。我错过了什么？

```
<%@ page session="false"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>The Admin Page</title>
<style type="text/css">

    .wideCols .field-radio { width: 5%; }
    .wideCols .field-username { width: 15%; }
    .wideCols .field-firstName { width: 15%; }
    .wideCols .field-lastName { width: 20%; }
    .wideCols .field-email { width: 40%; }
    .wideCols .field-enabled { width: 5%; }
</style>
</head>
<body>
    <h1>Users</h1>
    <spring:url value="/admin/addUser" var="accountUrl" />

    <a href="${accountUrl}">Add User</a> 
    <div id="result1"></div>

    <div id="grid" class="wideCols"></div>
    <!-- <button type="button" id="saveNode"></button>  -->

    <script type="text/javascript">
        require([ "dojo/store/JsonRest",
                  "dojo/_base/declare",
                  "dgrid/OnDemandGrid",
                  "dgrid/Selection", 
                  "dgrid/editor",
                  "dgrid/selector",
                  "dojo/domReady!" 
                ], function(JsonRest, declare, OnDemandGrid, Selection, editor, selector) {

            var userAccountStore = new JsonRest({
                idProperty : "userAccountId",
                target : "<c:url value="/userMgr/" />"
            });

            window.grid = new (declare([OnDemandGrid, Selection]))({                
                store : userAccountStore,           
                columns:  [ selector({ label: 'radio'}, "radio"),
                            { label: "Username", field: "username"}, 
                            { label: "First Name", field: "firstName"}, 
                            { label: "Last Name", field: "lastName"}, 
                            { label: "Email", field: "email"}, 
                            editor({ label: "Enabled", field: "enabled", autoSave: "true", canEdit: function(object){
                                return object.username != "<c:out value="${username}"/>";
                            }, }, "checkbox")],
            }, "grid"); 

        });

    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:10:46.970

用户名不会自动添加到您的模型中。您需要在控制器中执行此操作，或者如果您无权访问控制器代码，则可以在 Spring Security taglib 中使用已弃用的方法。：

```
<sec:authentication property="principal.username" /> 
```

有关更多信息，请参阅[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html#d0e6295](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/taglibs.html#d0e6295)。

# xcode - 如何在 Xcode 上开发的游戏中插入“Score Tracker”？

> ID：15813507
> 
> 赞同：0
> 
> 时间：2013-04-04T14:03:34.437
> 
> 标签：xcode, game-center

我希望为我的股票市场挑战游戏跟踪“银行中”的金额。我还没有找到这样做的方法？任何有用的提示、链接或建议将不胜感激。需要能够在所有屏幕上显示并在用户购买或出售股票时进行调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:10:39.773

如果您正在寻找跨多个屏幕存储信息的东西，我认为要走的路是单例类。这似乎是在 Objective-c 中处理全局变量的首选方式。[这里](http://www.galloway.me.uk/tutorials/singleton-classes/)有一个很好的教程。他介绍了很多细节，并提供了很多代码示例。在 Google 上快速搜索“Singleton Objective-C”会发现很多其他的。

# testing - Symfony 功能测试：接收上传的文件

> ID：15813508
> 
> 赞同：1
> 
> 时间：2013-04-04T14:03:38.077
> 
> 标签：testing, symfony, upload, phpunit

我有一个包含以下输入的 HTML 表单：`<input type="file" name="sentFile" />` 该表单不是用`$this->createFormBuilder()`. 我写了一个类`extends WebTestCase`。其测试方法如下：

```
$crawler = $client->request('GET', '/users/import');
$buttonCrawlerNode = $crawler->selectButton('Import');
$form = $buttonCrawlerNode->form();
$testfile = 'import_users.csv';
$destination = 'F:/www/symfony/web/uploads/' . $testfile;
$form['sentFile']->upload($destination);
$form['myparam'] = 'hello';
$crawler = $client->submit($form); 
```

但是当我使用`phpunit`命令运行测试时，接收发布表单的控制器方法显示一个空的`$_FILES`. 另一个输入 ( `myparam`) 被正确接收。那么如何才能使用上传的文件呢？

PS：

*   我没有成功在 Symfony 中使用 PHPT（stackoverflow.com/questions/4922207/integrate-phpt-test-cases-with-phpunit/4925061）。
*   我还没有尝试过 Selenium

参考：

*   [http://symfony.com/doc/current/book/testing.html](http://symfony.com/doc/current/book/testing.html)
*   [在 Symfony2 中测试文件上传](https://stackoverflow.com/questions/6916989/testing-file-uploads-in-symfony2)
*   [http://api.symfony.com/master/Symfony/Component/BrowserKit/Request.html#method_getFiles](http://api.symfony.com/master/Symfony/Component/BrowserKit/Request.html#method_getFiles)
*   [http://symfony.com/doc/current/reference/forms/types/file.html](http://symfony.com/doc/current/reference/forms/types/file.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:40:40.173

的内容`$_FILES`似乎无法更改以模拟文件上传，因此解决方案是使用[http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/File/UploadedFile.html](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/File/UploadedFile.html)类。正如 Jakub 所说，当以我在问题中所写的方式提交表单时，`Request`控制器的对象会填充此内容，因此我们可以使用 $request->files->get('sentFile') 来获取`UploadedFile`对应的到通过表单输入发送的文件`sentFile`。

# c# - 如何使用 ASP.Net WebApi 重载方法？

> ID：15813512
> 
> 赞同：6
> 
> 时间：2013-04-04T14:03:57.377
> 
> 标签：c#, asp.net, asp.net-web-api, put

我有一种情况，我有两种方法，一种在我的控制器类中接受一个 poco 和另一个 poco 列表：

```
[AcceptVerbs("PUT")]
[ActionName("Item")]
public void SaveItem([FromBody] Item item)
{
    m_controller.SaveItem(item);           
}

[AcceptVerbs("PUT")]
[ActionName("Items")]
public void SaveItems([FromBody] List<Item> items)
{
    m_controller.SaveItem(items);
} 
```

我的路由表看起来像：

```
routes.MapHttpRoute("Item Route",
                    "api/item/{orderId}",
                    new
                    {
                        controller = "MyOrder",
                        action = "Item",
                        orderId = RouteParameter.Optional
                    });

routes.MapHttpRoute("Items Route",
                    "api/items/{orderId}",
                    new
                    {
                        controller = "MyOrder",
                        action = "Items",
                        orderId = RouteParameter.Optional
                    }); 
```

这按预期工作。但我想重构代码以尝试重载。我试图重载控制器中的方法并且只有一条路由，但它失败并出现 500 错误 - 无效请求。我认为 webapi 将通过验证参数来解决调用 - 如果它是一个列表，那么它将调用带有列表作为参数的重载方法，否则调用其他方法。我打算做类似的事情：

```
[AcceptVerbs("PUT")]
[ActionName("Item")]
public void SaveItem([FromBody] Item item)
{
    m_controller.SaveItem(item);           
}

[AcceptVerbs("PUT")]
[ActionName("Item")]
public void SaveItem([FromBody] List<Item> items)
{
    m_controller.SaveItem(items);
} 
```

我的路由表看起来像：

```
routes.MapHttpRoute("Item Route",
                    "api/item/{orderId}",
                    new
                    {
                        controller = "MyOrder",
                        action = "Item",
                        orderId = RouteParameter.Optional
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:03:16.940

Web API 使用称为 IHttpActionSelector 的东西来确定在控制器中调用哪个操作。我认为默认实现不支持此类场景的重载。您可以实现自定义 IHttpActionSelector，但它可能需要做很多工作。看看这篇博文中的示例，

[http://www.novanet.no/blog/aanund-austrheim/dates/2012/7/several-post-methods-on-an-apicontroller-using-an-actionselector/](http://www.novanet.no/blog/aanund-austrheim/dates/2012/7/several-post-methods-on-an-apicontroller-using-an-actionselector/)

支持您始终收到项目列表的单一场景会简单得多。对于一个项目，它只是一个包含单个项目的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:00:13.800

我怀疑路由没有考虑到身体。在您的情况下，确定使用哪个重载的唯一方法是适当地解析主体和路由。您可以做的一种简化是始终使用单一方法获取 Item 列表。然后在单个项目的情况下，只需将该项目包含在列表中即可。

# c# - C#将一个补码位转换为一个二进制补码长？

> ID：15813513
> 
> 赞同：0
> 
> 时间：2013-04-04T14:04:03.483
> 
> 标签：c#, twos-complement, int64, bitconverter, ones-complement

在 C# 中，如何将 64 位补码数（表示为 long 或 ulong）转换为有符号的二进制补码 long？

作为参考，我正在尝试使用`BitConverter.DoubleToInt64Bits()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:11:50.100

为了将一个补码转换为二进制补码，您需要先检查数字是正数还是负数。
由于二进制补码的正表示等同于一个补码的正表示，因此您只需要在您的补码为负时执行转换。

实际的转换是通过取反码的绝对值，翻转所有位，然后将结果加一来完成的。

```
if (myLong >> 63 != 0) // The last bit is not 0, meaning myLong is negative
{
    myLong = (myLong & (long.MaxValue >> 1)); // sets the leading bit to 0, making myLong positive
    myLong = ~myLong + 1; // flips all bits and increments by 1
}
return myLong;

// One-liner alternative
return myLong >> 63 != 0 ? (~(myLong & (long.MaxValue >> 1))) + 1 : myLong; 
```

# hadoop - 如何在 Ubuntu Apache Hadoop 中安装 NLTK？

> ID：15813515
> 
> 赞同：1
> 
> 时间：2013-04-04T14:04:07.473
> 
> 标签：hadoop, nltk

我在 ubuntu 机器上安装了 Apache Hadoop 1.0.0。现在我想安装自然语言工具包（NLTK）。如何在 Hadoop 节点中安装 NLTK？谁能帮我安装它的步骤。

任何帮助是极大的赞赏 ！！！

# sql - Webmatrix - 图像上传并发布到数据库

> ID：15813516
> 
> 赞同：0
> 
> 时间：2013-04-04T14:04:09.907
> 
> 标签：sql, image-processing, razor, webmatrix

我正在尝试将图像上传到我的网站，效果很好，但我也在尝试将该图像的文件名添加到数据库中。一切正常，除了将 NULL 值而不是文件名传递到数据库？

代码是：

```
@{  
Layout = "~/_template1.cshtml";
var db = Database.Open("StayInFlorida");

//Get images
var imageget = "SELECT * FROM ImageInfo WHERE PropertyID='7'";

WebImage photo = null;
var newFileName = "";
var imagePath = "";
var imageThumbPath  = "";

if(IsPost){
    photo = WebImage.GetImageFromRequest();
    if(photo != null)
    {
        newFileName = Guid.NewGuid().ToString() + "_" +
            Path.GetFileName(photo.FileName);
        imagePath = @"images\property\" + newFileName;

        photo.Save(@"~\" + imagePath);
    }
    var imageput = "INSERT INTO ImageInfo (ImageURL) VALUES (@0)";
    db.Execute(imageput, Request["newFileName"]);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:09:53.150

更改`db.Execute(imageput, Request["newFileName"]);`为`db.Execute(imageput, newFileName);`

# java - JDBCExceptionReporter - SQL 错误：0，SQLState：08001

> ID：15813522
> 
> 赞同：2
> 
> 时间：2013-04-04T14:04:35.077
> 
> 标签：java, mysql, hibernate, tomcat

我使用 spring 、 hibernate 和 Jaxb 做了一个 Java 应用程序。

```
JDBCExceptionReporter - SQL Error: 0, SQLState: 08001
JDBCExceptionReporter - Could not create connection to database server. Attempted reconnect 3 times. Giving up.
JDBCExceptionReporter - SQL Error: 0, SQLState: 08001
JDBCExceptionReporter - Could not create connection to database server. Attempted reconnect 3 times. Giving up. 
```

当我尝试通过循环多次连接数据库时出现上述错误。它适用于最多 50 个请求，但在循环超过 50 个时会出现错误。

我正在使用 java 1.7 和 Tomcat 7.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:13:59.347

```
JDBCExceptionReporter - SQL Error: 0, SQLState: 08001 
```

这可能有多种原因：

1.  在许多情况下，主要问题是连接的限制。
    如果您有交互并且不使用**连接池**，则可能在数据库中已达到连接限制。

2.  其他情况是，`JDBC`如果连接数（默认 100）多于 BW 作业数（默认 0 表示无限），则在调色板中。

**重要提示：“通常需要关闭语句或`Resultset`在重用它们之前”。**

# javascript - 从舞台上移除光标时，事件监听器不监听

> ID：15813523
> 
> 赞同：0
> 
> 时间：2013-04-04T14:04:36.840
> 
> 标签：javascript, html5-canvas, easeljs, createjs

当我将舞台光标设置为无时。我无法`Startscreen.startButton`以某种方式访问​​我的 shape's() 事件监听器。不过，当我不隐藏光标时，我可以单击它。

难道我做错了什么？

```
function initStartscreen() {
    startscreenLayer = new createjs.Container();

    createMenuCursor();

    stage.addEventListener("stagemousemove", mouseMove);
    stage.enableMouseOver(2);
    stage.cursor = 'none';

    Startscreen = new Startscreen();

    startscreenLayer.addChild(Startscreen.background);

    startscreenLayer.addChild(Startscreen.startButton);
    startscreenLayer.addChild(Startscreen.startText);

        startscreenLayer.addChild(Startscreen.highscoreButton);
        startscreenLayer.addChild(Startscreen.highscoreText);

        stage.addChildAt(startscreenLayer);

    stage.update();

    Startscreen.startButton.addEventListener('click', function() {
        alert(1);
    });
}

function Startscreen() {
    this.background = new createjs.Shape();
    this.background.graphics
        .beginFill('pink')
        .drawRect(0, 0, stage.canvas.width, stage.canvas.height);

    this.startButton = new createjs.Shape();
    this.startButton.graphics
        .beginFill('#000')
        .drawRect(0, 0, 250, 50)
    this.startButton.x = (stage.canvas.width/2)-125;
    this.startButton.y = 150;
    this.startButton.name = "startButton";

    this.startText = new createjs.Text('Start', '30px Calibri', '#FFF');
    this.startText.x = this.startButton.x + 95;
    this.startText.y = this.startButton.y + 7;
} 
```

即时更新：即使我把所有东西都去掉，然后把它留`initStartscreen()`在我的 onload 中，它也不起作用。

这一定是一些分层问题或其他什么，因为我在我的高分层中创建了一个后退按钮，当我通过从主菜单导航到那里使用它时它可以工作。但是在我玩完游戏并转到同一页面/功能后，后退按钮不起作用。

有没有办法总是让我添加到顶部的图层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:41:20.107

我必须承认有点困惑，我可能需要你的澄清！

我是否理解您正在隐藏光标，然后期望用户找到一个带有“不可见”光标的开始按钮？——你对你的用户很刻薄吗？:p

如果您觉得`stage.cursor='none'`行为不端，您可以在最新版本的 IE、FF 和 Chrome 中使用 CSS 将光标设置为“无”。在“不可见”状态下，鼠标事件*仍然*被触发。下面的代码和一个小提琴：http: [//jsfiddle.net/m1erickson/qBw9P/](http://jsfiddle.net/m1erickson/qBw9P/)

```
$("#theStageCanvas").click(function(){ $("#theStageCanvas").css("cursor","none"); }); 
```

或者您是否有多个阶段，并且您想让底部阶段响应点击事件，即使它上面有一个顶部阶段？

您可以像这样关闭顶层的事件侦听：

```
topStage.onClick=null;
topStage.onMouseDown=null;
topSstage.onMouseUp=null;
topStage.onMouseMove=null; 
```

# asp.net - 比较验证器，找不到 Gridview 控件

> ID：15813524
> 
> 赞同：0
> 
> 时间：2013-04-04T14:04:38.697
> 
> 标签：asp.net, visual-studio-2010

我在互联网上寻找这个，但我找不到任何可以帮助我的答案。

我的问题是我试图`asp:CompareValidator`在 GridView 中放置一个，但是当我运行应用程序时，我得到一个错误：

> “无法找到 'cvEnd' 的 'ControlToValidate' 属性引用的控件 ID 'txtQuantyDeliver'”

问题是当网页呈现它没有找到控件，这里的代码：

```
 <asp:TemplateField HeaderText="Cantidad" HeaderStyle-BorderColor="Black" ItemStyle-BorderColor="Black"
                                                    ItemStyle-BorderWidth="1" ItemStyle-BorderStyle="Solid" ItemStyle-HorizontalAlign="Center"
                                                    ItemStyle-VerticalAlign="Middle" ItemStyle-Width="80" ItemStyle-Wrap="true">
                                                    <ItemTemplate>
                                                        <asp:Label runat="server" ID="lblQuanty" Text='<%# Eval("Products.Quantity") %>' />
                                                    </ItemTemplate>
                                                </asp:TemplateField><asp:TemplateField HeaderText="A Despachar" HeaderStyle-BorderColor="Black" ItemStyle-BorderColor="Black" ItemStyle-BorderWidth="1" ItemStyle-BorderStyle="Solid" ItemStyle-HorizontalAlign="Center" ItemStyle-VerticalAlign="Middle" ItemStyle-Width="100" ItemStyle-Wrap="true">
      <ItemTemplate>
          <table id="tbl" class="tblMain100">
              <tr>
                  <td class="tdCenter">
                      <asp:TextBox runat="server" ID="txtQuantyDeliver" SkinID="TextBoxesGrid" MaxLength="3" Text='<%# Eval("Products.Quantity") %>'" />
                      <asp:CompareValidator ID="cvEnd" ControlToCompare="lblQuanty" ControlToValidate="txtQuantyDeliver" Type="Integer" Display="Dynamic" ErrorMessage="*" runat="server" Operator="GreaterThan" ToolTip="Solicitados <= A despachar" Text="Cantidad invilda" SkinID="cvStandard"></asp:CompareValidator>
                  </td>
              </tr>
          </table>
      </ItemTemplate>
  </asp:TemplateField> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:07:38.697

使用`CompareValidator`，您无法将 TextBox 与 Label 进行比较。但是，您可以通过另一种方式将其与常量值进行比较：

而不是`ControlToCompare`使用`ValueToCompare='<%# Eval("Products.Quantity") %>'`

[MSDN CompareValidator 控件](http://msdn.microsoft.com/en-us/library/db330ayw%28v=vs.100%29.aspx)

# regex - 如何使用正则表达式创建文件 11.txt 22.txt ... 99.txt？

> ID：15813527
> 
> 赞同：0
> 
> 时间：2013-04-04T14:04:44.723
> 
> 标签：regex, shell, command-line

我尝试使用关于生成文件的正则表达式。
例子

> 11.txt 22.txt ... 99.txt

我用正则表达式和模式`touch {1..9}{1..9}.txt`
结果是

> 11.txt 21.txt 31.txt .... 99.txt

它对我不起作用。我不想像 regEx`{11,22,33,44,55,66,77,88,99}.txt`

请推荐技术我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:22:20.620

也许这对你有用：

```
$ seq -f'touch %g.txt' 11 11 99
touch 11.txt
touch 22.txt
touch 33.txt
touch 44.txt
touch 55.txt
touch 66.txt
touch 77.txt
touch 88.txt
touch 99.txt 
```

在磁盘上创建文件：

```
 $ seq -f'touch %g.txt' 11 11 99|sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:11:08.333

`(\d)\1`在你的正则表达式中使用这个结构`\1`是平均双前置表达式

# html - 如何使此图像在悬停时消失？

> ID：15813531
> 
> 赞同：0
> 
> 时间：2013-04-04T14:04:56.417
> 
> 标签：html, css, image, fade

我正在努力做到这一点，所以当您将鼠标悬停在`<img>`中时`<div>`，另一个`<div>`变得可见，它可以工作，但是，我试图让它顺利地更改为另一个`<img>`。
这是我[在这里](http://jsfiddle.net/sK5q2/4/)的意思，提前感谢所有帮助！

如果以前有人问过这个问题，我很抱歉再次问这个问题。我找不到我要找的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:32:49.887

你需要把你的转换放在这里：

```
#nav img
{
    height:20px;
    width:20px;
    -webkit-transition:opacity 1s ease-in-out;
    -moz-transition:opacity 1s ease-in-out;
    -o-transition:opacity 1s ease-in-out;
    transition:opacity 1s ease-in-out;
} 
```

***[请参阅工作 jsFiddle 演示](http://jsfiddle.net/sK5q2/6/)***

# memory-leaks - Vert.x 如何处理丢失的处理程序

> ID：15813532
> 
> 赞同：2
> 
> 时间：2013-04-04T14:04:58.307
> 
> 标签：memory-leaks, vert.x

最初在这里的论坛上问 - [https://groups.google.com/forum/#!topic/vertx/jdNRWlE6v4Y](https://groups.google.com/forum/#!topic/vertx/jdNRWlE6v4Y)

我刚刚阅读[了这个线程](https://groups.google.com/forum/#!searchin/vertx/no%2420handler/vertx/jg6wq3aWMjc/q_v43iq4tu8J)，讨论了通过事件总线发送消息的问题，其中没有为指定地址注册的处理程序。我只是好奇人们如何处理这种情况。手动计时器是推荐的方法吗？这种方法是否会随着时间的推移泄漏内存？

来自节点，我已经看到了一些解决此类问题的方法：

1.  如果找不到处理程序，则立即抛出异常
2.  带有错误的回调以清除响应侦听器
3.  Catchall 处理程序，您可以在其中放置一些代码来决定如何自己处理未处理的请求

我对这些或任何其他方法持开放态度，我只是想确保我以正确的方式解决这个问题。

对此存在一个[问题](https://github.com/vert-x/vert.x/issues/349)，但我不知道是否值得研究当前稳定版本（v1.3）的修复，或者我是否应该等待 v2.0（我还没有看到任何时间表对于 v2.0，但在它周围的 git repo 中似乎确实有很多活动）。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T19:42:44.200

[文档](http://vertx.io/core_manual_java.html#sending-messages)字面意思是：

> “如果您发送一条指定回复处理程序的消息，而回复永远不会出现，那么默认情况下，您将得到一个永远不会取消注册的处理程序。”

对我来说，默认行为听起来也很糟糕，但幸运的是，从 Vert.x 2.0 开始，我们有一种超时发送的方法，这看起来像是 100% 的方法。

例子：

```
eb.sendWithTimeout("test.address", "This is a message", 1000, new Handler<AsyncResult<Message<String>>>() {
    public void handle(AsyncResult<Message<String>> result) {
        if (result.succeeded()) {
            System.out.println("I received a reply " + message.body);
        } else {

            System.err.println("No reply was received before the 1 second timeout!");
        }
    }
}); 
```

# jquery - 引导缩略图列表边距

> ID：15813536
> 
> 赞同：0
> 
> 时间：2013-04-04T14:05:10.963
> 
> 标签：jquery, css, twitter-bootstrap

我有一个可以使用 JS/jQuery 过滤的流体网格项目（产品缩略图）。但是我找不到在应用过滤器后设置 CSS 以使左边距正常的最佳方法。

我正在使用 Twitter Bootstrap，缩略图有标准边距。我使用了此处找到的示例：[Bootstrap 中缩略图的边距问题，只需稍加](https://stackoverflow.com/questions/15576483/margin-problems-with-thumbnails-in-bootstrap)修改即可在不应用 JS 过滤器的情况下使边距正常。

CSS：

```
ul.thumbnails > li:nth-child(1), ul.thumbnails li.span3:nth-child(4n + 5) {
  margin-left : 0px;
} 
```

我的标记是这样的：

```
<div class="row-fluid products">
  <ul class="thumbnails">
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
 </ul>
</div> 
```

现在 - 这工作正常，直到我使用隐藏一些`<li>`项目的 JS 应用过滤器。（通过添加`class="hide"`不应该看到的每个列表项来使用 CSS (does `display:none`))。然后剩余的项目得到错误的边距，例如，如果第一个项目被隐藏，那么第二个项目有一个剩余的左边距，它不应该。

我想在应用过滤器后用 JS 调整 CSS，但这段代码对我不起作用：

```
$("li.product.span3").css({ 'margin-left': '2.5641%'});
$("li.product.span3:not(.hide):nth-child(1)").css({ 'margin-left': '0'});
$("li.product.span3:not(.hide):nth-child(4n+5)").css({ 'margin-left': '0'}); 
```

这也不会解决边距的响应设置，因为这与不同的屏幕宽度不同。理想的解决方案当然是只有 CSS。建议请...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:02:34.383

你不应该对第一个项目应用边距，引导程序自己处理这个。使用缩略图时，不应使用行类。

试试这个 ：

```
<div class="products">
  <ul class="thumbnails">
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
    <li class="product span3"><!-- product image and info --></li>
 </ul>
</div> 
```

没有额外的 CSS

# c# - PayPal Adaptive Payments 支付操作完成后如何收到成功响应？

> ID：15813538
> 
> 赞同：-3
> 
> 时间：2013-04-04T14:05:13.527
> 
> 标签：c#, asp.net-mvc, paypal, paypal-ipn, paypal-adaptive-payments

我正在尝试将 PayPal Adaptive Payments 集成到我的 localhost 项目中。到目前为止，我已经设法执行了付款过程。但是，一旦付款完成，我需要收到成功响应才能更新我的数据库。

我遇到了该`returnURL`属性，但是这对我的实现来说并不安全，因为用户可以在重定向之前终止会话`returnURL`，因此数据库不会得到更新。

我也遇到过，`ipnNotificationUrl`但是我没能成功。如果这是实现此目标的正确方法，则需要在编码本身、Web.config、PayPal 沙箱帐户或任何其他配置中进行配置。

实现这一目标的最佳实践是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T17:12:09.573

我找到了一种可能的解决方法来避免使用`ipnNotificationURL`灯箱功能。看看下面的链接[介绍自适应支付](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIntro)在使用灯箱功能时，`returnURL`似乎总是被调用。

构造`returnURL`如下：

```
 public const string PayPal_URL_Return = YourReturnURL + "/${payKey}"; 
```

由`${payKey}`PayPal 自己自动填写。在返回的 URL 中使用此类信息，可以使用*PayPal Adpative Payments调用**PaymentDetails*，并相应地使用交易详细信息。

 *有关*PayPal 自适应支付*的信息，请访问[AdaptivePaymentsSampleApp](https://github.com/paypal/adaptivepayments-sdk-dotnet/tree/master/Samples/AdaptivePaymentsSampleApp)。文件*adaptivepaymentshandler.ashx.cs*包含几乎所有必要的详细信息，以及*Web.config*文件。*

# php - Facebook XMPP 聊天 API 发送消息 PHP

> ID：15813542
> 
> 赞同：8
> 
> 时间：2013-04-04T14:05:27.590
> 
> 标签：php, facebook, xmpp, facebook-chat

我目前正在搞乱 Facebook 聊天 API。我想通过应用程序向我的 Facebook 联系人发送聊天消息。

使用 facebook 提供的示例，我能够连接到 facebook 聊天服务器。但这在这里有更多的反复试验。我只能模糊地理解请求和响应是如何发送和接收的。如果有人可以提供进一步的解释或进一步阅读，那就太好了。

我的实际问题是：连接到聊天服务器后如何发送消息？

```
<?php

// Copyright 2004-present Facebook. All Rights Reserved.

$STREAM_XML = '<stream:stream '.
  'xmlns:stream="http://etherx.jabber.org/streams" '.
  'version="1.0" xmlns="jabber:client" to="chat.facebook.com" '.
  'xml:lang="en" xmlns:xml="http://www.w3.org/XML/1998/namespace">';

$AUTH_XML = '<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" '.
  'mechanism="X-FACEBOOK-PLATFORM"></auth>';

$CLOSE_XML = '</stream:stream>';

$RESOURCE_XML = '<iq type="set" id="3">'.
  '<bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">'.
  '<resource>fb_xmpp_script</resource></bind></iq>';

$SESSION_XML = '<iq type="set" id="4" to="chat.facebook.com">'.
  '<session xmlns="urn:ietf:params:xml:ns:xmpp-session"/></iq>';

$START_TLS = '<starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>';

function open_connection($server) {
  print "[INFO] Opening connection... ";

  $fp = fsockopen($server, 5222, $errno, $errstr);
  if (!$fp) {
    print "$errstr ($errno)<br>";
  } else {
    print "connnection open<br>";
  }

  return $fp;
}

function send_xml($fp, $xml) {
  fwrite($fp, $xml);
}

function recv_xml($fp,  $size=4096) {
  $xml = fread($fp, $size);
  if ($xml === "") {
     return null;
  }

  // parses xml
  $xml_parser = xml_parser_create();
  xml_parse_into_struct($xml_parser, $xml, $val, $index);
  xml_parser_free($xml_parser);

  return array($val, $index);
}

function find_xmpp($fp,  $tag, $value=null, &$ret=null) {
  static $val = null, $index = null;

  do {
    if ($val === null && $index === null) {
      list($val, $index) = recv_xml($fp);
      if ($val === null || $index === null) {
        return false;
      }
    }

    foreach ($index as $tag_key => $tag_array) {

      if ($tag_key === $tag) {
        if ($value === null) {
          if (isset($val[$tag_array[0]]['value'])) {
            $ret = $val[$tag_array[0]]['value'];
          }
          return true;
        }
        foreach ($tag_array as $i => $pos) {
          if ($val[$pos]['tag'] === $tag && isset($val[$pos]['value']) &&
            $val[$pos]['value'] === $value) {
              $ret = $val[$pos]['value'];
              return true;
          }
        }
      }
    }
    $val = $index = null;
  } while (!feof($fp));

  return false;
}

function xmpp_connect($options, $access_token) {
  global $STREAM_XML, $AUTH_XML, $RESOURCE_XML, $SESSION_XML, $CLOSE_XML, $START_TLS;

  $fp = open_connection($options['server']);
  if (!$fp) {
    return false;
  }
  print("Connection Opened <br />");  

  // initiates auth process (using X-FACEBOOK_PLATFORM)
  send_xml($fp,  $STREAM_XML);
  if (!find_xmpp($fp, 'STREAM:STREAM')) {
    return false;
  }
  print_r("XMPP Stream Found <br />");
  if (!find_xmpp($fp,  'MECHANISM', 'X-FACEBOOK-PLATFORM')) {
    return false;
  }

  print_r("XMPP Mechanism Found <br />");
  // starting tls - MANDATORY TO USE OAUTH TOKEN!!!!
  send_xml($fp,  $START_TLS);
  if (!find_xmpp($fp, 'PROCEED', null, $proceed)) {
    return false;
  }
  print_r("XMPP Proceed Found <br />");  
  stream_socket_enable_crypto($fp, true, STREAM_CRYPTO_METHOD_TLS_CLIENT);

  send_xml($fp, $STREAM_XML);
  if (!find_xmpp($fp, 'STREAM:STREAM')) {
    return false;
  }
  if (!find_xmpp($fp, 'MECHANISM', 'X-FACEBOOK-PLATFORM')) {
    return false;
  }

  // gets challenge from server and decode it
  send_xml($fp, $AUTH_XML);
  if (!find_xmpp($fp,  'CHALLENGE', null, $challenge)) {
    return false;
  }
  $challenge = base64_decode($challenge);
  $challenge = urldecode($challenge);
  parse_str($challenge, $challenge_array);

  // creates the response array
  $resp_array = array(
    'method' => $challenge_array['method'],
    'nonce' => $challenge_array['nonce'],
    'access_token' => $access_token,
    'api_key' => $options['app_id'],
    'call_id' => 0,
    'v' => '1.0',
  );
  // creates signature
  $response = http_build_query($resp_array);

  // sends the response and waits for success
  $xml = '<response xmlns="urn:ietf:params:xml:ns:xmpp-sasl">'.
    base64_encode($response).'</response>';
  send_xml($fp, $xml);
  if (!find_xmpp($fp, 'SUCCESS')) {
    return false;
  }

  // finishes auth process
  send_xml($fp, $STREAM_XML);
  if (!find_xmpp($fp,'STREAM:STREAM')) {
    return false;
  }
  if (!find_xmpp($fp, 'STREAM:FEATURES')) {
    return false;
  }
 send_xml($fp, $RESOURCE_XML);
  if (!find_xmpp($fp, 'JID')) {
    return false;
  }
  send_xml($fp, $SESSION_XML);
  if (!find_xmpp($fp, 'SESSION')) {
    return false;
  }

  // we made it!
  send_xml($fp, $CLOSE_XML);
  print ("Authentication complete<br>");
  fclose($fp);

  return true;
}

//Gets access_token with xmpp_login permission
function get_access_token($app_id, $app_secret, $my_url){ 

  $code = $_REQUEST["code"];

  if(empty($code)) {
    $dialog_url = "https://www.facebook.com/dialog/oauth?scope=xmpp_login".
     "&client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url) ;
    echo("<script>top.location.href='" . $dialog_url . "'</script>");
  }
   $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url) 
    . "&client_secret=" . $app_secret 
    . "&code=" . $code;
   $access_token = file_get_contents($token_url);
    parse_str($access_token, $output);

    return($output['access_token']);
}

function _main() {
  print "Test platform connect for XMPP<br>";
  $app_id='';
  $app_secret='';
  $my_url = "";
  $uid = '';
  $access_token = get_access_token($app_id,$app_secret,$my_url);
  print "access_token: ".$access_token."<br>";

  $options = array(
    'uid' => $uid,
    'app_id' => $app_id,
    'server' => 'chat.facebook.com',
   );

  // prints options used
  print "server: ".$options['server']."<br>";
  print "uid: ".$options['uid']."<br>";
  print "app id: ".$options['app_id']."<br>";

  if (xmpp_connect($options, $access_token)) {
    print "Done<br>";

  } else {
    print "An error ocurred<br>";
  }

}

_main();

?> 
```

我知道这里已经有这样的问题（[facebook chat api - php](https://stackoverflow.com/questions/10195875/facebook-chat-api-php)）。但这是一个相当古老的话题，也许 facebook 在他们的聊天 api 中改变了一些东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T15:01:10.633

您应该将消息发送到套接字命令。常见的消息格式是

```
<message from="-sender_ID@chat.facebook.com" to="-receiver_ID@chat.facebook.com">
    <body>message body</body>
</message> 
```

所以在评论“我们成功了！”之前 使用您的消息模板插入函数调用 send_xml

```
send_xml($fp, $MESSAGE);
if (!find_xmpp($fp, 'BODY')) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-03T14:34:41.763

这是标准的 xmpp/jabber 消息格式：参见[http://xmpp.org/rfcs/rfc3921.html#stanzas-message上的 4.2](http://xmpp.org/rfcs/rfc3921.html#stanzas-message)

# php - ZF2 - \Zend\Db\Adapter\Platform::getQuoteIdentifierSymbol()

> ID：15813544
> 
> 赞同：5
> 
> 时间：2013-04-04T14:05:40.467
> 
> 标签：php, pdo, zend-framework2, symbols, identifier

代码如下，我的目标是使用 Pdo_mysql：

```
use \Zend\Db\Adapter\Adapter;
use \Zend\Db\Sql\Sql;
use \Zend\Db\Sql\Expression;    

$params = array(
    'driver'   => "Pdo_mysql",
    'host'     => &$this->Registry->config[ 'sql' ][ 'host' ],
    'username' => &$this->Registry->config[ 'sql' ][ 'user' ],
    'password' => &$this->Registry->config[ 'sql' ][ 'passwd' ],
    'dbname'   => &$this->Registry->config[ 'sql' ][ 'dbname' ]
);
$this->adapter  = new \Zend\Db\Adapter\Adapter( $params );
$this->platform = $this->adapter->getPlatform();
$this->sql      = new Sql( $this->adapter ); 
```

当我检查标识符引用符号时：

```
print $this->platform->getQuoteIdentifierSymbol();    // Output: " 
```

如您所见，双引号是符号。这当然会使我的所有 MySQL 查询无效，因为它用双引号 (") 而不是正引号 (`) 引用所有标识符名称（表、列等）。

那么，为什么 PDO-MySQL 驱动程序使用 Sql92 符号来代替呢？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:36:30.917

这个问题的唯一解决方案是创建新的 \Zend\Db\Platform\Mysql 对象，并在我启动连接时将其作为第二个参数传递给 Adapter 类。这个问题暗示了这样做的自动方式。为什么初始化 MySQL 适配器不附加 MySQL 平台，这是我不明白的 - 而是附加 SQL92 平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-24T11:57:32.610

检查 Zend\Db\Adapter\Driver\Pdo\Connection 中的函数 setConnectionParameters()

如果设置了 $params['dsn']，则平台取自 ':' 之前的文本
示例：

```
$params['dsn'] = mysql:dbname=database;host=db.host.com
平台名称将是“mysql”

```

否则，如果设置了 $params['pdodriver']，则平台将是该值
示例：

```
$params['pdodriver'] = 'mysql'
平台名称将是“mysql”

```

否则，如果设置了 $params['driver']，则平台取自 'Pdo_' 之后的文本
示例：

```
$params['driver'] = 'Pdo_Mysql'
平台名称将是“mysql”

```

平台名称将决定连接类型以及正确的引号标识符符号

# jquery - HighCharts(LineCharts) X 轴元素相互混合

> ID：15813545
> 
> 赞同：0
> 
> 时间：2013-04-04T14:05:44.597
> 
> 标签：jquery, highcharts

我在高图中的 x 轴有更多数量的元素，问题如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/Q7KFm.png)

查看x轴值..我该如何解决..有什么解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:09:52.880

使用旋转 X 轴标签。

```
xAxis:{
                            labels: {
                                align:'right',
                                style: {
                                      cursor: 'pointer',
                                      fontSize: '11px',
                                      fontWeight:'bold'
                                },
                                rotation:300, 
                            } 
                        }, 
```

见演示：http: [//jsfiddle.net/Fusher/uZaWz/12/](http://jsfiddle.net/Fusher/uZaWz/12/)

# .net - BackGroundWorker 无法正常工作

> ID：15813546
> 
> 赞同：0
> 
> 时间：2013-04-04T14:05:46.873
> 
> 标签：.net, c#-4.0, telerik, wpf-controls, backgroundworker

我在我的 WPF 应用程序中使用 System.ComponentModel.BackGroundWorker。所以，我正在做的事情就像在流动

“**当用户在文件浏览器控件的帮助下选择文件并单击导入按钮时，我有一个文件浏览器控件和两个按钮，称为导入和取消 wpf 对话框，然后由于应用程序必须从大文本文件中读取数据，因此我正在显示telerik繁忙的指示器，直到加载文件为止，所以选择文件路径时要做的**

创建后台工作人员并分配 do_work 处理程序

```
this.backgroundWorkerThread = new BackgroundWorker
    {
      WorkerSupportsCancellation = true
    };
    // when the thread gets starts, call the function to be executed
    this.backgroundWorkerThread.DoWork += (sender,
                                           do_workArgs) =>
    {
      // import all scenarios
      do_workArgs.Result = this.ImportScenarios();
    }; 
```

并调用 this.backgroundworker.RunWorkerAsync()

当用户单击取消按钮时，我会执行以下操作：

```
 if (
          (this.backgroundWorkerThread != null)
          &&
          (this.backgroundWorkerThread.IsBusy)
         )
      {
        this.backgroundWorkerThread.CancelAsync();
      } 
```

**问题**：

这个关闭实际上处理了后台工作人员，但在 do worker 方法中，在 args.result = import()Scenarios() 中分配的方法没有终止，它继续，所以我要寻找的是当我点击取消按钮时进程应该终止。在我的情况下，只有后台工作人员被处置，但在工作事件处理程序中分配的方法没有中止，所以我也想中止该方法。任何人都可以建议我可能的解决方案

# c# - 旧电脑无法运行 XNA，创建简单的 2D 游戏有什么建议？

> ID：15813548
> 
> 赞同：1
> 
> 时间：2013-04-04T14:05:48.060
> 
> 标签：c#, directx, 2d

我学会了用 C# 和 XNA 编写 2D 游戏，并想制作一些小游戏在工作中使用（我是一名教师），但工作 PC 集成了显卡，我发现这意味着 XNA 不会跑。

我想要一些关于为旧 PC 制作游戏的路线的建议。我的第一个想法是告诉一个窗口窗体来绘制我的精灵，但这似乎是一种可怕的方式。下一个想法：只学习 DirectX - 2D 的基本操作。这对我来说非常新鲜，在将自己扔进死胡同之前，我希望得到一些一般性的建议。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:15:07.743

有很多方法可以创建 2D 游戏。您可以使用一些库：

*   SDL：[http ://www.libsdl.org/](http://www.libsdl.org/)
*   DirectX：[http ://www.directxtutorial.com/](http://www.directxtutorial.com/)
*   OpenGL：[http ://www.glprogramming.com/red/](http://www.glprogramming.com/red/)

一些非常好的框架/引擎需要考虑：

*   食人魔3D：[http ://www.ogre3d.org/](http://www.ogre3d.org/)
*   统一：[http ://unity3d.com/](http://unity3d.com/)
*   UDK：[http ://www.unrealengine.com/udk/](http://www.unrealengine.com/udk/)

这是一个广泛的问题，所以我只提供研究资源。最终结果的复杂性和您的个人编码偏好将决定您选择哪条路线。SDL 可能是 2D 游戏的最佳选择，因为它就是为此而构建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:40:15.850

如果您想要向学生介绍编程的基础知识而不仅仅是 C# 编程，那么我推荐 Construct2 或 Scratch 作为免费解决方案。还有其他易于使用的商业游戏编程工具。

更新：我刚刚看到您对其他答案的评论，即只想为班级制作有趣的 2d 游戏。那我推荐[Construct2](http://www.scirra.com)。制作小型 2D 游戏非常简单快捷，应该使用集成显卡。他们有一个免费版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:24:05.803

首先，您必须了解使用 DirectX 的确切目的是什么？

给学生上课？

那么你不应该从 DirectX （和基于 DirectX 的框架，如 XNA ）开始，因为：

DirectX 基于名为 COM（组件对象模型）的技术，为了更好地理解 3D 图形，它不是最好的开始。

也许，XNA 更容易，让您无需了解 DirectX 架构的基础，但即使使用 XNA，您也将使用 3D 文件格式，其中 3D 模型以专门的矩阵格式准备，您的学生还将从多线程中学习一些（这是另一个主题）。

首先，他们必须了解 CPU && GPU 之间的区别以及 3D 模型如何在屏幕上渲染。

您的学生是否了解旋转矩阵、变换矩阵等... 他们了解几何的基础吗？他们知道如何区分一些数字吗？

在人们开始学习 DirectX 等之前，基础科目很少......因为它是有助于将来不制造错误等的基础

如果您想制作 Hello-World 应用程序并将其展示给您的学生，只需为他们提供指向 Web 中教程和书籍的链接。

如果你想让你的学生更聪明，你必须准备一些科目，这些科目与简单的编程或数学等科目相去甚远。

# makefile - GNU 在 SUFFIXES 中使用文件作为目标

> ID：15813549
> 
> 赞同：0
> 
> 时间：2013-04-04T14:05:48.340
> 
> 标签：makefile, gnu-make, autoconf, automake

Makefile 正在使用

```
.SUFFIXES: .ext1

.ext1:
      echo bla bla 
```

我有一个配置文件 path/to/abc.ext1 所以**让 path/to/abc**工作正常。

我想让**path/to/abc.ext1**也能正常工作。如果我可以重用现有的 .ext1 目标，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:13:46.507

您可以只添加一个规则`abc.ext1`，然后运行`make abc.ext1`就可以了。仅在没有可用的显式规则时才搜索后缀规则。

如果这对您的情况不起作用，请更清楚地解释您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:14:17.620

MadScientist 的回答似乎是正确的，但我认为这里存在误解。

如果你有这个规则：

```
%.ext1:
    echo bla bla 
```

而你`make abc.ext1`，会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:08:32.833

让我试着总结一下我所理解的：

1.  该文件`path/to/abc.ext1`已经存在。
2.  您已经在没有创建文件的情况下进行了`make path/to/abc`回显。`bla bla``path/to/abc`
3.  你会喜欢`make path/to/abc.ext1`表现得像`make path/to/abc`。在您当前的设置中，它不起作用，因为`path/to/abc.ext1`已经存在，因此`make`没有理由触发规则来“重建”它。

在您的情况下，您没有构建任何文件`abc`或`abc.ext1`，因此您应该真正告诉`make`这些是虚假目标。（我假设你想`make abc`工作，即使`abc`已经存在并且比 更新`abc.ext1`，对吧？）

对于单个文件，您可能有以下内容：

```
.PHONY: path/to/abc.ext1 path/to/abc
path/to/abc.ext1 path/to/abc:
        @echo bla bla 
```

这样，`make path/to/abc.ext1`or`make path/to/abc`将始终运行`echo bla bla`，而不管`path/to/abc.ext1`or的存在`path/to/abc`（`make`永远不会检查它们的存在）。

不幸的是，`.PHONY`需要一个明确的目标列表。使用 GNU make 你可以计算目标列表，`$(wildcard...)`或者如果你需要递归到子目录，使用`$(shell find...)`. 例如：

```
EXT1_FILES = $(shell find -type f -name '*.ext1' -print)
PHONY_TARGETS = $(EXT1_FILES) $(EXT1_FILES:.ext1=)

.PHONY: $(PHONY_TARGETS)
$(PHONY_TARGETS):
        @echo bla bla 
```

`$(EXT1_FILES:.ext1=)`只是`.ext1`从`$(EXT1_FILES)`. _

如果你有一棵非常大的树，你会受到`$(shell find...)`调用的影响：每次你`Makefile`被加载时它都会运行`make`。如果它太慢，您可以用显式文件名列表替换它（可能会自动生成）。

您的问题给出了零上下文，因此很难提出更有用的替代方案。仍然感觉你在试图滥用`make`。当您声明“`make foo.ext1`即使`foo.ext1`存在也应该运行一些命令”之类的内容时，这很可疑。你不能写一个简单的shell脚本，它接受一个参数，并且`echo bla bla`无论何时`$1`或`$1.ext1`存在都可以吗？这可能比尝试解决`make`'s 语义要容易得多。

# javascript - 该功能在 Web 服务器上的 javascript 滑块中不起作用，但在 localhost 上起作用（menucool JavaScript Image Slider - Release v.2012.9.11）

> ID：15813550
> 
> 赞同：0
> 
> 时间：2013-04-04T14:05:49.107
> 
> 标签：javascript, slider

访问我的网站[http://singrauli.co.in/](http://singrauli.co.in/) 图像滑块正在工作，但是当单击缩略图时它不起作用并且缩略图在它处于活动状态时没有被突出显示。

但此功能适用于 localhost。

访问此滑块的官方网站，所有功能都在其中运行[http://www.menucool.com/slider/javascript-image-slider-demo2](http://www.menucool.com/slider/javascript-image-slider-demo2)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:23:45.347

这有点猜测，因为我不知道您的本地配置，但是由于您的图像存储在子域中（因此违反了跨域规则），该调用会失败吗？

> 基本上，JS 认为即使是诸如 img.yourdomain.com 这样的子域也是与 www.yourdomain.com 不同的域。

来自[跨子域 Javascript（Ajax、Iframe 等）](http://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/)

# entity-framework - OdataModelConventionBuilder 不理解 DbContext 生成的模型

> ID：15813557
> 
> 赞同：1
> 
> 时间：2013-04-04T14:06:02.207
> 
> 标签：entity-framework, odata, asp.net-web-api, dbcontext

我目前正在一个项目中使用 WebApi OData，并且遇到了一个非常令人沮丧的问题。我正在使用使用 EF5 DbContext 设置的实体框架数据库拳头模型，这是 Visual Studio 2012 和 .NET 4.5 的默认设置。我的问题是，如果我在 Entity Framework 的实体上使用 OdataModelConventionBuilder 为 OData 端点生成 Edm，OData $metadata 找不到任何键值，也无法正确生成实体之间的关联。

我相信这是因为 DbContext 生成的实体上没有 DataAnnotation 属性。如果我添加属性，键会突然起作用，但这不是解决方案，因为如果重新生成模型，这些属性将会丢失。

是否有针对此问题的已知解决方法？

我目前不得不使用 ODataModelBuilder 手动构建我的 OData Edm，它被证明是乏味且容易出错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:12:52.503

您可以以部分方式使用 ODataConventionModelBuilder，即给它提供您将通过属性提供的信息。假设您有一个“客户”类型，其关键属性是“名称”和一个“客户”实体集，而不是执行类似的操作，

```
ODataConventionModelBuilder builder = new ODataConventionModelBuilder();
var customers = builder.Entityset<Customer>("Customers");
return builder.GetEdmModel(); 
```

你可以做类似的事情，

```
ODataConventionModelBuilder builder = new ODataConventionModelBuilder();
var customers = builder.Entityset<Customer>("Customers");
customers.EntityType.HasKey(c => c.Name); // tell the key explicitly through code
return builder.GetEdmModel(); 
```

这应该可以推断出模型的其余部分。

此外，我们有此[错误](http://aspnetwebstack.codeplex.com/workitem/802)跟踪以重用由 Entityframework 或其他库创建的 EDM 模型。我们已将其安排在当前版本中。希望你的情况会更简单。

# regex - Codeigniter alpha 和 alpha_numeric 函数支持阿拉伯语进行验证

> ID：15813561
> 
> 赞同：3
> 
> 时间：2013-04-04T14:06:08.843
> 
> 标签：regex, codeigniter, codeigniter-2

我在正则表达式方面非常非常非常糟糕，不幸的是，这是我真的希望我知道的一次。我有以下函数概述了在正则表达式中嵌入阿拉伯语支持：

```
function alpha_dash($str)
{
   return ( ! preg_match("/^[\-_ \d\p{Arabic}]*\p{Arabic}[\d\p{Arabic}]*$/ui", $str)) ? FALSE : TRUE;
} 
```

现在这是从[Here](https://stackoverflow.com/questions/13581971/how-can-i-make-alpha-dash-work-for-arabic-alphabets)处理的。我希望对 Alpha 和 Alpha 数字函数具有相同的支持。我真的不能玩正则表达式，因为当我这样做时我总是把事情搞砸。

希望有人能真正帮助:)

编辑：

```
public function alpha($str)
    {
        return ( ! preg_match("/^([a-z])+$/i", $str)) ? FALSE : TRUE;
    }

public function alpha_numeric($str)
    {
        return ( ! preg_match("/^([a-z0-9])+$/i", $str)) ? FALSE : TRUE;
    } 
```

我需要这两个函数来支持阿拉伯语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T14:34:22.567

好吧，根据[我在 PHP 网站上找到的](http://www.php.net/manual/en/regexp.reference.unicode.php)关于正则表达式的文档，这应该可以工作：

```
public function alpha($str)
{
    return ( ! preg_match('/^([a-z]|\p{Arabic})+$/iu', $str)) ? FALSE : TRUE;
} 

public function alpha_numeric($str)
{
    return ( ! preg_match('/^([a-z0-9]|\p{Arabic})+$/iu', $str)) ? FALSE : TRUE;
} 
```

使用它，它应该匹配 alpha+arabic 或 alphanum +arabic。试试看。我认为它可能需要使用`--enable-unicode-properties`开关编译 PCRE，但我不确定是否要检查这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T13:00:27.860

我在 MY_Form_validation 库中有此代码工作正常

```
 public function alpha_ar($str) {
    $str = (strtolower($this->CI->config->item('charset')) != 'utf-8') ? utf8_encode($str) : $str;
    return (!preg_match("/^([إد ج ح خ ه ع غ ف ق ث ص ض ط ك م ن ت ا أ ل ب ي س ش ظ ز و ة ى لا ر ؤ ء ئ ذ])+$/i", $str)) ? FALSE : TRUE;
} 
```

# html - 在 Flash Web 应用程序中打开一个 html5 弹出窗口

> ID：15813562
> 
> 赞同：1
> 
> 时间：2013-04-04T14:06:10.473
> 
> 标签：html, actionscript-3

如何在 Flash Web 应用程序中打开 html5 弹出窗口，我们可以制作 html5 和 Flash 混合的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:11:58.123

您可以使用[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6)调用将打开一个弹出窗口的 Javascript 函数。

# jquery - 在使用 Paperclip 和 Rails 上传之前检查文件大小/类型

> ID：15813564
> 
> 赞同：3
> 
> 时间：2013-04-04T14:06:17.397
> 
> 标签：jquery, ruby-on-rails, paperclip-validation

我有一个 Rails 应用程序，它允许用户上传视频（在本地，而不是云服务器上）。

我正在使用 Paperclip 3.1.4 和 Paperclip-ffmpeg 0.9.0。

一切正常，花花公子，但问题是，如果用户以错误的格式上传文件，或者大于验证规则允许的大小，则在上传完成之前不会显示错误消息 - 不是非常适合可用性，特别是如果上传错误格式的文件需要 10 分钟！

那么，有什么方法可以将jQuery（我承认对它知之甚少）集成到我的模型中，以便用户点击“上传”按钮时可以检查文件，而不是等到应用程序尝试上传文件（如果有意义的话）？

这是我模型中的一些代码（我已经去掉了不重要的东西）：

```
class Video

     attr_accessible :sourcefile

     has_attached_file :sourcefile

     ...

     validates_attachment_size :sourcefile, :less_than => 250.megabytes, 
        :message => "Sorry, your video is too large"
     validates_attachment_content_type :sourcefile, :content_type => [...],
        :message => "Sorry, the file format is wrong"

end 
```

那么，有没有什么办法可以“固定”一个函数来触发某种形式的 JavaScript 在文件上传之前检查文件，并且这些验证规则会生效（我希望避免用户是否在他们的浏览器中禁用了 JavaScript）？

如果文件类型正确，如果我可以使用另一个函数来触发 jQuery 式进度条，那也很好，但在这个阶段不一定需要这样做。

谢谢！

**编辑 -**感谢下面的 Kevin B，他指出 jQuery/JavaScript 不能用于检查文件大小。那好吧！我还有其他方法可以采取吗？服务器正在运行 nginx，但我宁愿不去那里 - 我更愿意在 Rails 代码本身中处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:13:07.437

*您可以在 nginx 中配置任何*请求的最大大小，然后让您的 jQuery 代码响应 413 状态码，如果文件太大，nginx 将返回该状态码。Nginx 应该能够在看到请求头时立即拒绝它，而不是让用户上传整个文件；无论好坏，您的 Rails 应用程序都不会看到这些请求。

在站点的 nginx 配置中，您需要设置：

```
client_max_body_size 250M; 
```

在您的 jQuery 中，您可以指定在请求失败时调用的错误回调。在那个回调中，我使用了这样的东西：

```
 if (responseText.responseText.match(/413 Request Entity Too Large/)) {
        error_message = "Files cannot be more than 250 MB.";
    } 
```

之后，您只需要获取用户可以看到的 error_message 即可。无论是否打开 javascript，此方法都可以将过大的文件从您的服务器中移除，但如果启用了 JS，它们可以获得更好的反馈。值得一提的是，我正在使用 jQuery 表单插件来伪造 AJAX 文件上传，但如果你愿意，还有其他方法可以做到这一点。

# c# - 如何为泛型方法创建委托？

> ID：15813570
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:06:25.670
> 
> 标签：c#, .net, generics, delegates

我有一个简单的课程：

```
class Test
{
    public static int Test<T>(T arg)
    {
        return 1;
    }
} 
```

我想得到一个`Delegate`代表这个方法的类型的对象。是否可以创建这样的代表？如果我可以将具有任意数量参数和泛型参数的方法转换为`Delegate`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:16:29.377

您不想在这里使用委托。你想要一个[`MethodInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)实例：

```
void ImportMethod(string name, MethodInfo method) 
```

你可以这样称呼它：

```
void ImportMethod("Test", typeof(Test).GetMethod("Test", ...Static)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:53:43.297

如果使用泛型编写方法以保持类型安全，则需要为具有不同输入参数数量的每个方法编写两种方法，一种用于 void 方法（Action），另一种用于返回值的方法（Func）。我加入了一个辅助类，因为它减少了您必须为每个方法导入传递的泛型参数的数量。调用该方法时，它还有助于智能感知。

```
 public class Foo
    {
        public void Bar()
        {
        }

        public void Bar(string input)
        {
        }

        public bool BarReturn()
        {
            return false;
        }
    }

    public class ImportHelper<TClass>
    {
        public void Import(string name, Expression<Action<TClass>> methodExpression)
        {
            ImportMethod(name, methodExpression);
        }

        public void ImportMethodWithParam<TParam>(string name, Expression<Action<TClass, TParam>> methodExpression)
        {
            ImportMethod<TClass, TParam>(name, methodExpression);
        }

        public void ImportMethodWithResult<TResult>(string name, Expression<Func<TClass, TResult>> methodExpression)
        {
            ImportMethod<TClass, TResult>(name, methodExpression);
        }
    }

    private static void TestImport()
    {
        ImportMethod<Foo>("MyMethod", f => f.Bar());
        ImportMethod<Foo, string>("MyMethod1", (f, p) => f.Bar(p));
        ImportMethod<Foo, bool>("MyMethod2", f => f.BarReturn());

        var helper = new ImportHelper<Foo>();
        helper.Import("MyMethod", f => f.Bar());
        helper.ImportMethodWithParam<string>("MyMethod1", (f, p) => f.Bar(p));
        helper.ImportMethodWithResult("MyMethod2", f => f.BarReturn());
    }

    public static void ImportMethod<TClass>(string name, Expression<Action<TClass>> methodExpression)
    {
        var method = GetMethodInfo(methodExpression.Body as MethodCallExpression);
        //Do what you want with the method.
    }

    public static void ImportMethod<TClass, TParam>(string name, Expression<Action<TClass, TParam>> methodExpression)
    {
        var method = GetMethodInfo(methodExpression.Body as MethodCallExpression);
        //Do what you want with the method.
    }

    public static void ImportMethod<TClass, TResult>(string name, Expression<Func<TClass, TResult>> methodExpression)
    {
        var method = GetMethodInfo(methodExpression.Body as MethodCallExpression);
        //Do what you want with the method.
    }

    private static MethodInfo GetMethodInfo(MethodCallExpression methodCallExpression)
    {
        if (methodCallExpression == null)
            return null;

        return methodCallExpression.Method;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:13:31.093

看起来[Func](http://msdn.microsoft.com/en-us/library/bb549151.aspx)和[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)是您正在寻找的。

您可以使用以下内容获取“委托对象”

```
Func<int> func = () => Test<Foo>(bar); 
```

你可以使用

```
void ImportMethod(string name, Action action) 
```

或者

```
void ImportMethod(string name, Func<int> func) 
```

取决于您是否需要返回值并像这样注册

```
ImportMethod("Name", () => Test<Foo>(bar)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:14:16.470

```
public delegate int Del<T>(T item); 
```

# javascript - Javascript + HTML - 在后台加载图像（异步？）

> ID：15813571
> 
> 赞同：5
> 
> 时间：2013-04-04T14:06:26.310
> 
> 标签：javascript, html, image, asynchronous, loading

我发现了许多描述 javascript 图像加载的主题，但不完全是我正在搜索的内容。

我目前正在以正常方式加载 html 中的图像，例如

```
<img src="images/big-image.jpg"> 
```

这会导致网页中的空白区域从上到下充满加载图像。此外，我总是要注意图像的文件大小。

我**想要实现**的是，当页面加载时，会显示每个图像的缩小版本（大约 10kb）。当页面完全加载时，应该有一个javascript函数在后台加载大图像并在加载时替换它们。

我已经找到了一种使用 javascript 执行此操作的方法，但是在替换所有图像之前，浏览器显示他处于“加载”状态。是否可以使用异步方法在后台执行加载任务？

```
<img src="small.jpg" id="image">

<script>
        <!--
            var img = new Image(); 
            img.onload = function() { 
               change_image(); 
            } 
            img.src = "small.jpg";  

            function change_image() {
                document.getElementById("image").src = "big.jpg";
            }
        //-->
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:10:35.220

你试过这个吗？

```
window.onload = function() {
    setTimeout(function() {
        // XHR to request a JS and a CSS
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'http://domain.tld/preload.js');
        xhr.send('');
        xhr = new XMLHttpRequest();
        xhr.open('GET', 'http://domain.tld/preload.css');
        xhr.send('');
        // preload image
        new Image().src = "http://domain.tld/preload.png";
    }, 1000);
}; 
```

[http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T14:16:34.703

你知道什么是真正令人讨厌的吗？如果您只是错过将 window.onload 功能添加到您自己的解决方案中，并且它可以按您的意愿工作......

谢谢你的主意！:D

```
<img src="small.jpg" id="image">

<script>
        <!--
            window.onload = function() {
                var img = new Image(); 
            img.onload = function() { 
               change_image(); 
            } 
            img.src = "small.jpg";  

            function change_image() {
                document.getElementById("image").src = "big.jpg";
            }
            };

        //-->
</script> 
```

# linux - 如何删除一行bashrc linux

> ID：15813575
> 
> 赞同：2
> 
> 时间：2013-04-04T14:06:35.990
> 
> 标签：linux, bash, vim, terminal

嗨，问题基本上是这样说的，我`bashrc`在 linux 中为我添加了一些别名，它一直在搞砸，当我尝试使用光标向上时，它只是类型`AAA BBBB`等我知道“ `o`”添加了一个新行，但是什么是删除一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:10:34.670

vi 第一次可能很糟糕（比如啤酒）。但过了一段时间，它可以成为你的朋友（再次啤酒）。

基本命令：

*   `i`动笔
*   `Esc`返回命令
*   `dd`删除一行
*   `o`在当前行之后开始写
*   `:wq`from*命令*保存并退出文件
*   `j`/`k`上下移动光标（分别）
*   `h`/`l`左右移动光标（分别）

这里有所有可能的命令：

> ![每个字符的 vi 命令](https://i.stack.imgur.com/tkoYX.gif)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T14:08:29.073

`o`如果您说添加新行，您似乎正在使用 Vim 。先按`ESC`键切换到`normal`模式，然后使用`d``d`删除一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T18:13:54.013

你需要学习一些基础知识`vim`！输入`vimtutor`您的终端，大约 20 分钟后，您将能够处理 99% 的常用`vim`命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:27:54.440

不要使用 Vim，除非你准备好投入到 The Journey 中！（但如果你这样做了，请稍后感谢我！）

```
$ nano ~/.bashrc 
```

# c# - 是否可以获取动作中的语句数量或确定它是否有空主体？

> ID：15813579
> 
> 赞同：4
> 
> 时间：2013-04-04T14:06:42.087
> 
> 标签：c#, .net, vb.net, action, func

假设我们有这段代码：

```
Action<int> gf = k => { };
Action<int> gfa = k => { k++; }; 
```

我如何确定`gf`没有正文或语句？
是否可以在 a 中获取语句数量`Action`？

类似于`GetNumberOfStatements(gf)`which should的东西`return 0`。
或者也许 HasEmptyBody(gf) 应该`return true`；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:21:42.370

好吧，这有点不确定，但是您可以检查方法体的 IL 并检查它是否为空或完全由[Nops](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.nop.aspx)组成（当然除了最后的 Ret ）。

显然，如果编写该方法的编程语言的编译器已编译掉操作而没有任何影响，那么您将在这里得到误报。但我假设您主要对`(arg1, arg2, ... ) => { }`C# 案例感兴趣，这应该可以正常工作。

```
public static bool IsEmpty(this Delegate del)
{
    // Null arg-checking omitted.

    short nop = System.Reflection.Emit.OpCodes.Nop.Value;

    var ilArray = del.Method.GetMethodBody().GetILAsByteArray();

    return ilArray.Take(ilArray.Length - 1).All(b => b == nop);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:18:06.210

.Net 中的委托只不过是函数指针。就像您无法判断 .Net 方法中有多少 C# 语句一样，您也无法判断 .Net 委托中有多少条语句。部分原因是该方法不一定用 C# 或任何其他具有语句概念的语言编码。它可以直接用基于操作码的 IL 编写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:54:59.897

编辑：决定在我等待构建服务器重新启动时稍微修改一下......

实际上，我的“实用程序库”周围有一些东西可能会对您有所帮助-自然，这里有很大的改进空间-这绝不是用于“生产用途”的：

```
public static void DumpMethod(Delegate method)
{
    var mb = method.Method.GetMethodBody();
    var il = mb.GetILAsByteArray();
    var opCodes = typeof(System.Reflection.Emit.OpCodes)
        .GetFields()
        .Select(fi => (System.Reflection.Emit.OpCode)fi.GetValue(null));
    var mappedIL = il.Select(op => opCodes.FirstOrDefault(opCode => opCode.Value == op));
    var ilWalker = mappedIL.GetEnumerator();
    while(ilWalker.MoveNext())
    {
        var mappedOp = ilWalker.Current;
        if(mappedOp.OperandType != System.Reflection.Emit.OperandType.InlineNone)
        {
            var byteCount = 0;
            long operand = 0;
            switch(mappedOp.OperandType)
            {
                case System.Reflection.Emit.OperandType.InlineI:
                case System.Reflection.Emit.OperandType.InlineBrTarget:
                case System.Reflection.Emit.OperandType.InlineMethod:                
                case System.Reflection.Emit.OperandType.InlineField:
                case System.Reflection.Emit.OperandType.InlineSig:
                case System.Reflection.Emit.OperandType.InlineString:
                case System.Reflection.Emit.OperandType.InlineType:
                case System.Reflection.Emit.OperandType.InlineSwitch:
                    byteCount = 4;
                    break;
                case System.Reflection.Emit.OperandType.InlineI8:
                case System.Reflection.Emit.OperandType.InlineR:
                    byteCount = 8;
                    break;
            }
            for(int i=0; i < byteCount; i++)
            {
                ilWalker.MoveNext();
                operand |= ((long)ilWalker.Current.Value) << (8 * i);
            }
            Console.WriteLine("{0} {1}", mappedOp.Name, operand);                    
        }
        else
        {
            Console.WriteLine("{0}", mappedOp.Name);
        }
    }
} 
```

试验台：

```
Func<int,int> addOne = i => i + 1;
DumpMethod(addOne);
Console.WriteLine();
Func<int,string> stuff = i =>
{
    var m = 10312;      
    var j = i + m;
    var k = j * j + i;
    var asStr = k.ToString();
    return asStr;
};
DumpMethod(stuff); 
```

输出：

```
ldarg.0
ldc.i4.1
add
ret

ldc.i4 10312
stloc.0
ldarg.0
ldloc.0
add
stloc.1
ldloc.1
ldloc.1
mul
ldarg.0
add
stloc.2
ldloca.s 0
ldarg.0
call 167772167
stloc.3
ldloc.3
ret 
```

# jsf - 如何以编程方式实例化复合组件或标记组件？

> ID：15813582
> 
> 赞同：5
> 
> 时间：2013-04-04T14:06:51.737
> 
> 标签：jsf, jsf-2, components

我想以编程方式实例化复合或标记组件。

此实例化将由自定义组件执行，通常将这些复合或标记组件添加为子组件。

我在爬取论坛时找到的最佳答案是：[http](http://www.java.net/node/701640#comment-791881) ://www.java.net/node/701640#comment-791881 。它看起来很像我在这个论坛上找到的另一个答案：[如何以编程方式或动态地在 JSF 2 中创建复合组件](https://stackoverflow.com/questions/5370184/how-to-programmatically-or-dynamically-create-a-composite-component-in-jsf-2)。

在处理这个问题时，我终于编写了适用于使用 MyFaces 的*复合*实例化的代码（链接中的示例似乎是特定于 Mojarra 的）。我把它复制到那里，因为我花了一些时间来写它，希望它能帮助别人：

```
public UIComponent instantiateComposite(String namespace, String componentName) {
    FacesContext ctx = FacesContext.getCurrentInstance();
    Resource resource = ctx.getApplication().getResourceHandler().createResource( componentName + ".xhtml", namespace );
    UIComponent cc = ctx.getApplication().createComponent( ctx, resource );
    UIPanel panel = (UIPanel) ctx.getApplication().createComponent( UIPanel.COMPONENT_TYPE );

    // set the facelet's parent
    cc.getFacets().put( UIComponent.COMPOSITE_FACET_NAME, panel );

    FaceletFactory ff = (DefaultFaceletFactory) DefaultFaceletFactory.getInstance();
    if(ff == null) {
        FaceletViewDeclarationLanguage vdl = new FaceletViewDeclarationLanguage(ctx);

        Method createCompiler = null;
        Method createFaceletFactory = null;
        try {
            createCompiler = FaceletViewDeclarationLanguage.class.getDeclaredMethod("createCompiler",FacesContext.class);
            createFaceletFactory = FaceletViewDeclarationLanguage.class.getDeclaredMethod("createFaceletFactory",FacesContext.class,org.apache.myfaces.view.facelets.compiler.Compiler.class);
            createCompiler.setAccessible(true);
            createFaceletFactory.setAccessible(true);
            org.apache.myfaces.view.facelets.compiler.Compiler compiler = (org.apache.myfaces.view.facelets.compiler.Compiler) createCompiler.invoke(vdl, ctx);
            ff = (FaceletFactory) createFaceletFactory.invoke(vdl, ctx, compiler);
        } catch (IllegalAccessException ex) {
            Logger.getLogger(SenatDataTableEntryDetail.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IllegalArgumentException ex) {
            Logger.getLogger(SenatDataTableEntryDetail.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvocationTargetException ex) {
            Logger.getLogger(SenatDataTableEntryDetail.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NoSuchMethodException ex) {
            Logger.getLogger(SenatDataTableEntryDetail.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SecurityException ex) {
            Logger.getLogger(SenatDataTableEntryDetail.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    try {
        Facelet facelet = ff.getFacelet(resource.getURL());
        facelet.apply( ctx, panel );
    } catch ( IOException e ) {
        e.printStackTrace();
    }
    return cc;
} 
```

请不要注意丑陋的异常处理：它是由 netbeans 自动生成的......我会问 MyFaces 开发人员是否有办法避免丑陋的反射黑客。

我怎样才能对标签组件做同样的事情，我的意思是组件声明如下：

```
<tag>
    <description>blah blah</description>
    <tag-name>myWonderfulTag</tag-name>
    <source>tags/mwl/myWonderfulTag.xhtml</source>
<!-- attributes -->
</tag> 
```

在标签库中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:28:24.740

好的，我找到了如何使用 MyFaces 进行操作。它还需要一些丑陋的反思......

```
public static UIComponent instantiateTagComponent(Location loc, String namespace, String localPrefix, String componentName, TagComponentParam params[]) {
    final String ERROR_MESSAGE = "Erreur lors de  l'instanciation d'un tag component";
    FacesContext ctx = FacesContext.getCurrentInstance();
    AbstractFaceletContext fctx = (AbstractFaceletContext) ctx.getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
    fctx.pushPageContext(new PageContextImpl());

    FaceletViewDeclarationLanguage vdl = new FaceletViewDeclarationLanguage(ctx);

    UIPanel panel = (UIPanel) ctx.getApplication().createComponent( UIPanel.COMPONENT_TYPE );

    try {
        Method createCompiler = FaceletViewDeclarationLanguage.class.getDeclaredMethod("createCompiler",FacesContext.class);
        Method createFaceletFactory = FaceletViewDeclarationLanguage.class.getDeclaredMethod("createFaceletFactory",FacesContext.class,org.apache.myfaces.view.facelets.compiler.Compiler.class);
        createCompiler.setAccessible(true);
        createFaceletFactory.setAccessible(true);
        org.apache.myfaces.view.facelets.compiler.Compiler compiler = (org.apache.myfaces.view.facelets.compiler.Compiler) createCompiler.invoke(vdl, ctx);
        FaceletFactory ff = (FaceletFactory) createFaceletFactory.invoke(vdl, ctx, compiler);
        TagLibrary tl = compiler.createTagLibrary();
        TagConfig tc = new JSFUtilsTagUnit(tl, namespace, localPrefix, componentName,params,loc);
        TagHandler th = tl.createTagHandler(namespace, componentName, tc);
        Field declaredField = FaceletCompositionContext.class.getDeclaredField("FACELET_COMPOSITION_CONTEXT_KEY");
        declaredField.setAccessible(true);
        FaceletCompositionContextImpl faceletCompositionContextImpl = new FaceletCompositionContextImpl(ff,ctx);
        Class<?> dfcClass = Class.forName("org.apache.myfaces.view.facelets.impl.DefaultFaceletContext");
        Field fMCTX = dfcClass.getDeclaredField("_mctx");
        fMCTX.setAccessible(true);
        fMCTX.set(fctx, faceletCompositionContextImpl);
        FacesContext.getCurrentInstance().getAttributes().put((String)declaredField.get(null),faceletCompositionContextImpl);
        FaceletCompositionContext mctx = (FaceletCompositionContext) FaceletCompositionContext.getCurrentInstance(fctx);
        mctx.startComponentUniqueIdSection();
        th.apply( fctx, panel );
    } catch (IOException ex) {
        log.error(ERROR_MESSAGE, ex);
    } catch (InvocationTargetException ex) {
        log.error(ERROR_MESSAGE, ex);
    } catch (NoSuchMethodException ex) {
        log.error(ERROR_MESSAGE, ex);
    } catch (NoSuchFieldException ex) {
        log.error(ERROR_MESSAGE, ex);
    } catch (SecurityException ex) {
        log.error(ERROR_MESSAGE, ex);
    } catch (ClassNotFoundException ex) {
        log.error(ERROR_MESSAGE, ex);
    } catch (IllegalArgumentException ex) {
        log.error(ERROR_MESSAGE, ex);
    } catch (IllegalAccessException ex) {
        log.error(ERROR_MESSAGE, ex);
    }
    finally {
        fctx.popPageContext();
    }
    return panel;
} 
```

JSFUtilsTagUnit 类是：

```
static class JSFUtilsTagUnit implements TagConfig {

    private final TagLibrary library;
    private final String namespace;
    private final String name;
    private Tag tag;

    public JSFUtilsTagUnit(TagLibrary library, String namespace, String localPrefix, String name, TagComponentParam params[], Location loc) {
        this.library = library;
        this.namespace = namespace;
        this.name = name;
        if(loc == null) {
            loc = new Location("virtual", -1, -1);
        }
        TagAttribute[] tas;
        if((params != null) && (params.length > 0)) {
            tas = new TagAttribute[params.length];
            int iCurrent = 0;
            for(TagComponentParam tcpCur : params) {
                tas[iCurrent] = new TagAttributeImpl(loc,"",tcpCur.getName(), tcpCur.getName(), tcpCur.getValue());
                iCurrent++;
            }
        } else {
            tas = new TagAttribute[0];
        }
        TagAttributes tattrs = new TagAttributesImpl(tas);
        tag = new Tag(loc, namespace, name, localPrefix+":"+name, tattrs);
    }

    public FaceletHandler getNextHandler() {
        return new FaceletHandler() {

            public void apply(FaceletContext ctx, UIComponent parent) throws IOException {
            }
        };
    }

    public Tag getTag() {
        return tag;
    }

    public String getTagId() {
        return "-1";
    }

} 
```

希望它会帮助别人！

# windows - 为什么sort命令在法语语言环境中对“œ”和“oe”进行无差别排序？

> ID：15813584
> 
> 赞同：6
> 
> 时间：2013-04-04T14:06:57.967
> 
> 标签：windows, unix, sorting, encoding, cygwin

有人可以用法语语言环境来解释 sort 命令的行为吗？

```
$ file file.txt
file.txt: UTF-8 Unicode text, with CRLF line terminators

$ wc -l file.txt
4 file.txt

$ cat file.txt
cœz
coez
coe
cœ

$ sort file.txt
coe
cœ
cœz
coez

$ sort -d file.txt
cœ
coe
coez
cœz

$ env | grep -P "(LC|FR)"
LANG=fr_FR.UTF-8 
```

“–”小于或大于“oe”的事实在常规排序的情况下似乎是随机的，而在字典排序的情况下该字符被简单地忽略（`sort -d`）。

我想这与排序规则有关，但我想在这里有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:31:44.833

字典排序可能会忽略 – 连字，因为它不在 ascii 中的 a-zA-Z 范围内。（这是一个猜测）。

然后在法语语言环境中，– 和 oe 比较相等，所以它们应该以它们进入的任何顺序出现，这似乎是发生在你身上的事情。如果这是正确的，那么如果你把它放在：

```
cœz
coez
cœm
coem
coep
cœp
coe
cœ 
```

你应该得到这个：

```
coe
cœ
cœm
coem
coep
cœp
cœz
coez 
```

您可以使用`-c`（检查文件是否已排序）或`-r`（倒序）选项来获得更多信息。

# marionette - Marionette.View 可以使用元素 id 绑定事件或触发器吗？

> ID：15813586
> 
> 赞同：1
> 
> 时间：2013-04-04T14:07:00.290
> 
> 标签：marionette

我有一个简单的 Marionette.ItemView，上面有一个链接：

```
<a id="login-link">login</a> 
```

但是当我在视图中绑定事件或触发器时，该事件不会触发：

```
triggers:
    "click #login-link" : "login:clicked"

events:
    "click #login-link" : -> console.log "login clicked" 
```

但是，如果我使用类名识别链接，则以下任何一种都有效：

```
<a class="login-link">login</a>

triggers:
    "click .login-link" : "login:clicked"

events:
    "click .login-link" : -> console.log "login clicked" 
```

那么，对于 Marionette.View 中的绑定触发器和事件，id 不是有效的选择器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:09:31.430

id 绝对可以在木偶中触发事件。我只是在jsfiddle上放了一个小样本，你可以看看。那么错误可能在其他地方。

```
 var MainView = Marionette.ItemView.extend({
         template: "#sample-template", 
         events: {
             "click #fireEvent": "eventWithId"
         },

         eventWithId: function (e) {
            e.preventDefault();
            this.$el.find('#mytext').text('the id event changed my text!')
         }
    }); 
```

[http://jsfiddle.net/rayweb_on/HTQGM/1/](http://jsfiddle.net/rayweb_on/HTQGM/1/)

# iis-7.5 - 接受编码：gzip：内容被 gzip 压缩两次

> ID：15813592
> 
> 赞同：0
> 
> 时间：2013-04-04T14:07:16.380
> 
> 标签：iis-7.5, gzip, dotnet-httpclient

我正在使用 IIS 来提供静态文件。我已经配置 IIS（使用 GUI）来启用静态和动态压缩。

我是`HttpClient`用来下载的，如下：

```
var client = new HttpClient();
var request = new HttpRequestMessage(HttpMethod.Get, requestUri);
request.Headers.AcceptEncoding.Add(new StringWithQualityHeaderValue("gzip"));

var response = client.SendAsync(request).Result;
var stream = new FileStream("foo", FileMode.Create);
response.Content.CopyToAsync(stream)
                .ContinueWith(t => stream.Close())
                .Wait(); 
```

我正在使用 Fiddler 检查流量，我可以看到前一个或两个响应没有被压缩。我假设 IIS 正在后台压缩文件并将其缓存在某处。写入磁盘的文件约为 14MB（预期）。

稍后的请求被压缩。我可以`Content-Encoding: gzip`在响应中看到一个标头，下载的文件大约为 360KB。它是一个`gzip`文件，由 Cygwin 的`file`命令标识。

但是，当我使用`gzip -d`它解压缩时，我最终得到了一个 660KB 的文件，它本身就是一个 gzip 压缩文件，也由`file`.

如果我解压缩*该*文件，我会得到我期望的 14MB 文件。

那么：为什么我的文件被压缩了两次？

# c# - 如何使用递归在 C#.net 中根据月份拆分日期范围

> ID：15813596
> 
> 赞同：-5
> 
> 时间：2013-04-04T14:07:31.250
> 
> 标签：c#, recursion

我想将日期范围分成各个月份。例如，我有以下方式的数据：

```
startdate   enddate
2013-04-04  2014-01-31 
```

我希望能够以这种方式显示上述数据：

```
 startdate   enddate     
 2013-04-04  2013-04-30
 2013-05-01  2013-06-30  --(2 month difference)
 2013-07-01  2013-08-31
 2013-09-01  2013-10-31
 2013-11-01  2013-12-31
 2014-01-01  2014-01-31 
```

有人可以帮助我使用`List`和递归吗？

没有递归尝试的示例代码

```
 List<DateInformation> lDateCol1 = new List<DateInformation>();
          List<DateInformation> lDateCol = new List<DateInformation>();
          lResult.DateFrom = '4/4/2013';
          lResult.DateUntil = '31/01/2014';

        DateTime Today;
        DateTime FirstDate = DateTime.MaxValue;
        DateTime LastDate = DateTime.MinValue;
        DateTime NextFirstDate = DateTime.MaxValue;
        DateTime NextLastDate = DateTime.MinValue;
        DateTime InputStartDate = DateTime.MaxValue;
        DateTime InputEndDate = DateTime.MinValue;
        Today = lResult.DateFrom;
        FirstDate = new DateTime(Today.Year, 1, 1);
          int monthsApart = Math.Abs(12 * (lResult.DateFrom.Year - lResult.DateUntil.Year) + lResult.DateFrom.Month - lResult.DateUntil.Month)

        for (int daycount = 0; daycount < 12; daycount += noofmonths)
        {
          if (count == 0)
          {
            NextLastDate = FirstDate.AddMonths(noofmonths).AddDays(-1);
            lDateCol1.Add(new DateInformation(FirstDate, NextLastDate));
          }
          if (count > 0)
          {
            NextFirstDate = NextLastDate.AddDays(1);
            NextLastDate = new DateTime(NextFirstDate.Year, NextFirstDate.Month, 1).AddMonths(noofmonths).AddDays(-1);
            lDateCol1.Add(new DateInformation(NextFirstDate, NextLastDate));
          }
          count = count + 1;
        }
        for (count = 0; count <= lDateCol1.Count - 1; count++)
        {
          if ((lDateCol1[count].DateFrom <= lResult.DateFrom) && (lResult.DateFrom <= (lDateCol1[count].DateUntil)))
          {
            InputStartDate = lResult.DateFrom;
            InputEndDate = lDateCol1[count].DateUntil;
            NextFirstDate = InputStartDate;
            NextLastDate = InputEndDate;
            lDateCol.Add(new DateInformation(NextFirstDate, NextLastDate));
            break;
          }
        }

        for (int daycount = 0; daycount <= monthsApart; daycount += noofmonths)
        {
          NextFirstDate = NextLastDate.AddDays(1);
          NextLastDate = new DateTime(NextFirstDate.Year, NextFirstDate.Month, 1).AddMonths(noofmonths).AddDays(-1);
          if (!(NextLastDate < lResult.DateUntil))
          {
            lDateCol.Add(new DateInformation(NextFirstDate, lResult.DateUntil));
            break;
          }
          else
          {
            lDateCol.Add(new DateInformation(NextFirstDate, NextLastDate));
          }
        }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:34:39.943

你正在用你的样本来做这件事。有一种更简单的方法可以找到月份的开始和结束：

```
DateTime d = DateTime.Today;
DateTime monthStart = d.AddDays(-(d.Day - 1));
DateTime monthEnd = monthStart.AddMonths(1).AddDays(-1); 
```

顺便说一句，您实际上并不需要递归来执行此操作，但如果它是使用递归的分配的一部分，那么只需创建一个获取开始日期和结束日期的函数。使用上面的方法找到月份的开始和结束，对它们做你想做的事情，然后将下个月的第一天（又名`monthEnd.AddDays(1)`）作为开始日期与原始结束日期一起传递回函数。*瞧！*递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:52:12.020

刚刚做了一些快速的非递归代码

```
DateTime startdate = DateTime.Parse("2013-04-04");
DateTime enddate = DateTime.Parse("2014-01-31");
DateTime parseDate;
List<DateTime> startings = new List<DateTime>();
List<DateTime> endings = new List<DateTime>();
startings.Add(startdate);
parseDate = startdate.AddMonths(1);
while(parseDate.Day != 1)
    parseDate=parseDate.AddDays(-1);
parseDate=parseDate.AddDays(-1);
endings.Add(parseDate);
while (parseDate<enddate)
{
    parseDate = parseDate.AddDays(1);
    startings.Add(parseDate);
    parseDate = parseDate.AddMonths(2);
    parseDate = parseDate.AddDays(-1);
    endings.Add(parseDate);
}
endings[endings.Count() - 1] = enddate; 
```

这保存了 2 个列表：`startings`和`endings`

```
[0] {04-04-2013 00:00:00}   System.DateTime
[1] {01-05-2013 00:00:00}   System.DateTime
[2] {01-07-2013 00:00:00}   System.DateTime
[3] {01-09-2013 00:00:00}   System.DateTime
[4] {01-11-2013 00:00:00}   System.DateTime
[5] {01-01-2014 00:00:00}   System.DateTime

[0] {30-04-2013 00:00:00}   System.DateTime
[1] {30-06-2013 00:00:00}   System.DateTime
[2] {31-08-2013 00:00:00}   System.DateTime
[3] {31-10-2013 00:00:00}   System.DateTime
[4] {31-12-2013 00:00:00}   System.DateTime
[5] {31-01-2014 00:00:00}   System.DateTime 
```

如您所见，一些不到 20 行代码的快速脏代码可以实现这些值

# sharepoint-2010 - MSChart 在其他机器上不起作用

> ID：15813600
> 
> 赞同：1
> 
> 时间：2013-04-04T14:07:49.727
> 
> 标签：sharepoint-2010, mschart

我已经在我的开发服务器上安装和配置了 MSChart，当我从我的机器访问图表时一切正常，但从不同机器访问图表时同样不起作用。它抛出以下错误，

```
No http handler was found for request type 'GET' 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: No http handler was found for request type 'GET' 
```

我已经更新了服务器 Web 应用程序的配置文件，如下所示，

```
<appSettings>
<add key="ChartImageHandler" value="storage=file;timeout=20;dir=c:\Temp\;" />
</appSettings>>

<httpHandlers>
<add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
</httpHandlers>

<handlers>
<add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</handlers> 
```

# java - Android：允许用户创建自定义变量

> ID：15813601
> 
> 赞同：0
> 
> 时间：2013-04-04T14:07:50.623
> 
> 标签：java, android, variables, defined

我正在构建一个用户有 2 或 3 个文本字段的金融应用程序。一个是收入/支出的名称，一个是金额，另一个是用户可以输入的“注释”，以提醒自己它是什么。当用户按下“输入”时，我如何创建一个具有该名称和值的变量，以便以后在计算中使用。我想使用他们输入的数据并将其显示在另一个活动上，并动态使用它来计算他们的余额。变量的名称不必与他们的名称完全相同，但我需要能够在我对另一个活动的计算中引用它。假设我有一个变量“weeklyBalance”。我希望能够说 weekBalance = weekBalance' +/- 'userDefinedVariables' 然后打印出他们的新余额，

基本布局如下所示： 姓名：周薪 金额：20.32 注意：我的周薪 [Enter]

我是 android 的新手，这是我遇到的第一个大问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:16:30.167

我认为您正在混合“代码中的变量”和“自定义值”的概念。

我只需保存一组变量对象，您可以在其中检查哪个方程使用每个自定义值以及如何使用（类似于`new Variable(variableName,value,equation)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:17:10.057

如果您想在应用程序中永久存储一些数据，我建议您使用数据库。SQLite 与 Android 很好地集成在一起，一旦您了解它的工作原理，它就非常易于使用。

在这里查看：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:14:19.833

将它们保存在内容提供程序中，以后可以在需要时调用该值。

这是一个很好的起点：

[http://developer.android.com/guide/topics/providers/content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:16:25.110

如果我理解正确，您想将数据从活动 A 传递到活动 B，如果我错了，请纠正我。您可以做的是从“note”中检索数据并将其传递给活动 B。您可以使用

```
intent.putExtra("YOUR_TAG", note); 
```

并在活动 B 中使用

```
Bundle bundle = intent.getExtras();
bundle.getString("ITEM_TITLE"); 
```

# java - 使用 Java 7 绕过内核？

> ID：15813603
> 
> 赞同：3
> 
> 时间：2013-04-04T14:07:57.587
> 
> 标签：java, kernel

我阅读了一些关于 SO Java 7 支持内核绕过的评论。但是，在搜索该主题时，我没有看到任何直接的例子。

有没有人有 Java 7 执行内核绕过的示例？我有兴趣看看

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:59:50.163

这个相关问题的答案提到 SolarFlare 具有 Java 绑定：[Networking with Kernel Bypass in Java](https://stackoverflow.com/questions/12123388/networking-with-kernel-bypass-in-java)。

就 Java 7 而言，核心库中并没有对这种东西的支持。内核绕过过于系统/供应商特定，无法包含在标准 API 中。

您可以做其他不涉及内核绕过的事情来提高 Java 中的网络吞吐量。例如使用 NIO Buffer 和 Channel APIs ...但是，您的典型 Java“框架”往往会阻碍这一点...仅将 Stream / Reader 和其他高级 I/O 抽象暴露给“应用程序”代码.

* * *

（我还认为，如果您有一个应用程序，其中网络延迟和吞吐量足够关键，以至于内核绕过是值得的，那么您应该使用“更接近金属”的编程语言。Java 更适合存在最大问题的应用程序是应用程序的复杂性...不是通过网络快速移动大量位。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-12T19:57:36.667

看看github上的[Onload Extensions API JNI Wrapper 。](http://%20https://github.com/majek/openonload/tree/master/src/tools/jni "Onload 扩展 API JNI 包装器")作者似乎专门研究[内核绕过](https://blog.cloudflare.com/kernel-bypass/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:14:08.863

**内核绕过**是一种在读取/写入外部数据源（例如文件或网络）时避开内核的方法。

相反，您可以*直接*访问数据存储，而无需让所有字节通过操作系统内核运行。这通常更快但也不太安全，因为整个过程不再受操作系统监督。

假设：关于 Java，`kernel`（可以）表示`JVM`.

我在这方面找到了一篇[非常好的文章](http://blog.lukego.com/blog/2013/01/04/kernel-bypass-networking/)。

# sql - 如何在动态查询中将行值连接到列名

> ID：15813615
> 
> 赞同：6
> 
> 时间：2013-04-04T14:09:04.010
> 
> 标签：sql, sql-server, unpivot

我正在开发一个允许可配置问题和答案的应用程序。目前最多可以有 20 个答案，但可能更少。

我的结构如下：

### 问题

```
+----+--------+--------------+-------------+
| ID | FormId | QuestionText | AnswerField |
+----+--------+--------------+-------------+
|  1 |      1 | Name         | Answer01    |
|  2 |      1 | Address      | Answer02    |
|  3 |      1 | Phone        | Answer03    |
|  4 |      1 | Email        | Answer04    |
|  5 |      2 | First Name   | Answer01    |
|  6 |      2 | Surname      | Answer02    |
+----+--------+--------------+-------------+ 
```

### 答案

```
+----+--------+----------+------------+--------------+--------------+----------------+----------+----------+
| ID | FormId | RecordId |  Answer01  |   Answer02   |   Answer03   |    Answer04    | Answer05 | Answer06 |
+----+--------+----------+------------+--------------+--------------+----------------+----------+----------+
|  1 |      1 |        1 | Bob Smith  | Bobs Address | 01234 111222 | bob@smith.com  | Null     | Null     |
|  2 |      1 |        2 | Joe Bloggs | Joes Address | 04321 333444 | joe@bloggs.com | Null     | Null     |
|  3 |      2 |        3 | David      | Jones        | Null         | Null           | Null     |          |
+----+--------+----------+------------+--------------+--------------+----------------+----------+----------+ 
```

所以在 Questions 表中，AnswerField Answer01 映射到 Answers 表中的 Answer01 列

我想做的是得到一个看起来像这样的结果集：

对于表格 ID 1 和记录 ID 1：

```
+--------------+---------------+
| QuestionText |    Answer     |
+--------------+---------------+
| Name         | Bob Smith     |
| Address      | Bobs Address  |
| Phone        | 01234 111222  |
| Email        | bob@smith.com |
+--------------+---------------+ 
```

然后对于表单 id 2 和记录 id 3：

```
+--------------+---------+
| QuestionText | Answer  |
+--------------+---------+
| First Name   | David   |
| Surname      | Jones   |
+--------------+---------+ 
```

我尝试使用数据透视表：

```
SELECT QuestionText, Answer01, Answer02, Answer03, Answer04
FROM (
    SELECT DISTINCT Q.AnswerField, Q.QuestionText, Q.ID, A.Answer01, A.Answer02, A.Answer03, A.Answer04
    FROM Questions Q
    INNER JOIN Answers A ON A.FormId= Q.FormId
    WHERE A.ID = 17
) 
AS src
PIVOT (MAX(question_id) FOR Answer IN(answer_01, answer_02, answer_03, answer_04)) AS pvt 
```

但这重复了所有列中的答案：

```
+--------------+-----------+--------------+--------------+---------------+
| QuestionText | Answer01  |   Answer02   |   Answer03   |   Answer04    |
+--------------+-----------+--------------+--------------+---------------+
| Name         | Bob smith | Bobs Address | 01234 111222 | bob@smith.com |
| Address      | Bob smith | Bobs Address | 01234 111222 | bob@smith.com |
| Phone        | Bob smith | Bobs Address | 01234 111222 | bob@smith.com |
| Email        | Bob smith | Bobs Address | 01234 111222 | bob@smith.com |
+--------------+-----------+--------------+--------------+---------------+ 
```

这显然是不对的。

任何人都可以建议如何在 SQL Server 存储过程中完成此操作吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T14:19:54.940

首先，你的`Answers`桌子设计得很糟糕。该表未规范化，这会在您想要返回数据时给您带来问题。如果可能，您需要重组该表。

如果您无法重新设计表格，那么您将不得不对答案表进行反透视，以便能够轻松地连接问题的答案。

UNPIVOT 将获取您的列并将它们转换为行。unpivot 代码将是：

```
select formid, RecordId, answer, answercol
from answers a
unpivot
(
  answer
  for answerCol in ([Answer01], [Answer02], [Answer03], 
                    [Answer04], [Answer05], [Answer06])
) unpiv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/565b8/6)。这给出了一个结果：

```
| FORMID | RECORDID |         ANSWER | ANSWERCOL |
--------------------------------------------------
|      1 |        1 |      Bob Smith |  Answer01 |
|      1 |        1 |   Bobs Address |  Answer02 |
|      1 |        1 |   01234 111222 |  Answer03 |
|      1 |        1 |  bob@smith.com |  Answer04 | 
```

数据成行后，您可以加入问题表以返回您想要的结果：

```
select q.questiontext, d.answer
from questions q
inner join
(
  select formid, RecordId, answer, answercol
  from answers a
  unpivot
  (
    answer
    for answerCol in ([Answer01], [Answer02], [Answer03], 
                      [Answer04], [Answer05], [Answer06])
  ) unpiv
) d
  on q.AnswerField = d.answercol
  and q.formid = d.formid
where d.recordid = 1; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/565b8/10)。这给出了一个结果：

```
| QUESTIONTEXT |        ANSWER |
--------------------------------
|         Name |     Bob Smith |
|      Address |  Bobs Address |
|        Phone |  01234 111222 |
|        Email | bob@smith.com | 
```

# iphone - ios中同一屏幕上的多个collectionviews

> ID：15813623
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:09:42.740
> 
> 标签：iphone, ios, objective-c, uicollectionview

我在我的应用程序中使用 PSUICollectionView，其中带有图像缩略图的图库加载有水平滚动视图。现在我需要另外两个集合视图（画廊）来显示另外两种类型的图片。

谁能帮帮我？？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T06:24:43.720

我通过在委托和数据源方法中添加一些代码行来使其工作，如下所示 -

```
 // setting tag

   [self.imageCollection setTag:1];

   [self.finishImageCollection setTag:2];

   [self.prevImageCollection setTag:3]; 
```

# 语用标记 -

# pragma mark 集合视图数据源

```
 - (NSString *)formatIndexPath:(NSIndexPath *)indexPath {
       return [NSString stringWithFormat:@"%ld", (long)indexPath.row+1];
   }

  // Populating cells 
  - (PSUICollectionViewCell *)collectionView:(PSUICollectionView *)collectionView        cellForItemAtIndexPath:(NSIndexPath *)indexPath {
   ImageGridCell *cell = [collectionView    dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
   if(collectionView.tag==1){
     cell.statusImage.image= [UIImage imageNamed:@"checked.png"];
     cell.imageThumb.image = [self.startImages objectAtIndex:indexPath.row];
   }

   if(collectionView.tag==2){
    cell.statusImage.image= [UIImage imageNamed:@"checked.png"];
    cell.imageThumb.image = [self.finishImages objectAtIndex:indexPath.row];
   }

   if(collectionView.tag==3){
    cell.statusImage.image= [UIImage imageNamed:@"checked.png"];
    cell.imageThumb.image = [self.prevImages objectAtIndex:indexPath.row];
   }
   return cell;
  }

   - (NSInteger)collectionView:(PSUICollectionView *)collectionView    numberOfItemsInSection:(NSInteger)section {
   int imgCount;
   if(collectionView.tag==1)
   {
    [self loadStartPictures];
    imgCount=self.startImages.count;
   }
   if(collectionView.tag==2)
   {
    [self loadFinishPictures];
    imgCount=[self.finishImages count];
   }
   if(collectionView.tag==3)
   {
    [self loadSupervisorPictures];
    imgCount=[self.prevImages count];
   }
   return imgCount;
  }

  #pragma mark -
  #pragma mark Collection View Delegate

  - (void)collectionView:(PSTCollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
  {
   self.allImages=[[NSMutableArray alloc]init];
   UIImage *imageAtIndexPath;
   NSLog(@"Delegate cell %@ : SELECTED", [self formatIndexPath:indexPath]);
   ImageGridCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
   cell.label.backgroundColor=[UIColor underPageBackgroundColor];

   if(collectionView.tag==1){
    imageAtIndexPath=[self.startImages objectAtIndex:indexPath.row];
    }
  if(collectionView.tag==2){
    imageAtIndexPath=[self.finishImages objectAtIndex:indexPath.row];
    }
  if(collectionView.tag==3){
    imageAtIndexPath=[self.supervisorImages objectAtIndex:indexPath.row];
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:20:17.830

**简单**。只需像添加任何其他 UIView 一样添加视图。正确设置他们的框架，他们应该工作。

为他们每个人保留一个出口，然后您可以检查他们中的哪一个正在调用委托/数据源方法。

# jetty - 如何在 gradle 中创建多个码头运行任务？

> ID：15813627
> 
> 赞同：0
> 
> 时间：2013-04-04T14:10:03.443
> 
> 标签：jetty, gradle, embedded-jetty

我需要在我的 gradle 构建中创建许多不同的模式来运行码头。

它们在系统属性和类路径上有所不同。

如何使用 gradle jetty 插件来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:05:42.180

您可以创建多个类型的任务`JettyRun`。要动态创建不同的任务实例，您可以使用 Groovy 语法糖。

```
4.times { // this can be replaced by iterating over your different environment settings 
   task "jettyRun${it}(type:JettyRun) {
       // do you custom configuration here
   }
} 
```

bb，雷内

# python - 使用 pexpect/pxssh 远程执行带参数的 shellscript

> ID：15813630
> 
> 赞同：0
> 
> 时间：2013-04-04T14:10:11.033
> 
> 标签：python, pexpect

我正在尝试使用 pexpect 和 pxssh 来自动化一些任务。我对python不是很熟悉。我想在服务器上运行带有一些参数的 shellscript。但是 shellscript 在本地托管。

我现在正在尝试这样做：

```
s = pxssh.pxssh()
s.login(host, user, pass)

f = open("./connect.sh", "r")
for line in f:
    s.sendline(line)

s.prompt()
print s.before 
```

`connect.sh`有一个 awk one 班轮。因此它读取一行，并通过 pxssh 将其直接发送到服务器。这行得通。

但是，我想将参数传递给 shellscript。awk one 衬里有 1 美元和 2 美元，因此需要更换。我想我可以用第一个参数手动替换 $1，用第二个参数替换 $2，所以我形成了一个新的 awk 命令，然后使用 pxssh 将新命令发送到服务器。但我认为有一种更聪明的方法可以做到这一点。那么正确的方法是什么？

# git - 取消了一个 git-clone，下载的文件在哪里？

> ID：15813635
> 
> 赞同：14
> 
> 时间：2013-04-04T14:10:17.347
> 
> 标签：git

我刚刚在接收对象时取消了一个 git-clone，在我的 Mac OSX 10.6.8 上使用 ^C。根据“接收对象”行，Git 已经下载了 1.2GB。我想删除这些文件，因为那是一大块内存，但我在任何地方都找不到它们。

我将它们克隆到的文件夹尚未创建，并且父目录中没有明显的.git- *xyz文件夹可以容纳它们。*

有什么想法吗？还是它们只是在某些操作系统定义的临时文件夹中，并且会在某个时候自动清理？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T17:13:35.357

正如其中一位评论者所说，对于 git clone git://foosite/fooproj，git 将创建一个名为 fooproj/.git 的目录并将所有 repo 文件下载到那里。

克隆的第二阶段通常是对 origin/master 分支的“签出”，但是由于您的 ctrl-c 被应用程序捕获，因此目录可能已被删除，并且没有进行签出。

即如果

$ ls -a fooproj

没有产生任何东西，那么文件已经被删除了。

# ruby-on-rails - Ruby on Rails 3 - 如何在我的控制器中检查 radio_button_tag？

> ID：15813636
> 
> 赞同：0
> 
> 时间：2013-04-04T14:10:17.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, radio-button

我在联系表单上有一个单选按钮，有人可以在其中选择 5 个值中的 1 个。我没有单选按钮的默认值。我正在使用 form_tag，因为这些数据不会存储在数据库中。

这是我的单选按钮代码：

```
 <%= label_tag "Purpose:" %>&nbsp;
    <%= radio_button_tag :purpose, '1' %><%= label_tag :purpose_feedback, 'Suggestions' %> 
    <%= radio_button_tag :purpose, '2' %><%= label_tag :purpose_prayer, 'Prayer Request' %>
    <%= radio_button_tag :purpose, '3' %><%= label_tag :purpose_praise, 'Testimony' %>
    <%= radio_button_tag :purpose, '4' %><%= label_tag :purpose_bug, 'Defects/Bugs' %>
    <%= radio_button_tag :purpose, '5' %><%= label_tag :purpose_other, 'Other' %> 
```

我的表单上有带有六个文本字段的单选按钮。我在控制器中逐个字段进行错误检查，从表单顶部的单选按钮开始。错误检查正在正确检查我的所有字段。但是，如果我为 params[: purpose] 选择一个单选按钮值，则该值会正确填充，但在显示视图时不会选中单选按钮。例如，如果我选择用途并为三个文本字段输入值，则文本字段的值仍在表单上，​​但未选中单选按钮，即使用途具有值。

我找到了这个链接[提交表单后如何设置单选按钮的值？](https://stackoverflow.com/questions/12161135/how-to-set-the-value-of-radio-button-after-submitting-form)并在我的控制器中开发了以下代码：

```
 def check_radio_button

    case params[:purpose]
    when '1'
      radio_button_tag(:purpose, '1', :checked => true)
    when '2'
      radio_button_tag(:purpose, '2', :checked => true)
    when '3'
      radio_button_tag(:purpose, '3', :checked => true)
    when '4'
      radio_button_tag(:purpose, '4', :checked => true)
    when '5'
      radio_button_tag(:purpose, '5', :checked => true)
    end

  end 
```

当我尝试选择第一个单选按钮（目的 = '1'）显示我的视图时，出现以下错误：

```
undefined method `radio_button_tag' for #<PagesController:0x007f94d05c5e88> 
```

出现错误的那一行是 params[: purpose] == 1 显示正确填充目的的那一行。

有关检查单选按钮的其他示例与更新数据库的 form_for 一起使用。

任何帮助，将不胜感激。我会继续寻找。

更新：3012 年 4 月 4 日上午 11:15 CST

现在正在检查我的单选按钮。按照 Mischa 的建议，我将更正的逻辑移到了助手中。

这是我的帮助代码：

```
 def check_radio_button (purpose)

    if params[:purpose].blank?
      radio_button_tag(:purpose, purpose)
    elsif purpose == params[:purpose]
      radio_button_tag(:purpose, purpose, :checked => true)
    else
      radio_button_tag(:purpose, purpose)
    end

  end 
```

这是我按照 Catfish 的建议重写的视图代码：

```
 <%= check_radio_button("1") %><%= label_tag :purpose_feedback, 'Suggestions' %> 
    <%= check_radio_button("2") %><%= label_tag :purpose_prayer, 'Prayer Request' %>
    <%= check_radio_button("3") %><%= label_tag :purpose_praise, 'Testimony' %>
    <%= check_radio_button("4") %><%= label_tag :purpose_bug, 'Defects/Bugs' %>
    <%= check_radio_button("5") %><%= label_tag :purpose_other, 'Other' %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:08:59.600

您的问题是这`radio_button_tag`不是您的控制器中使用的功能。您发布的链接在帮助程序中有 radio_button_tag。

重新阅读您发布的问题，然后再试一次。

基本上，您创建一个呈现 check_box_tag 的辅助方法，然后在视图中调用该辅助方法：

示例助手

```
def my_check_box_tag(my_param) do
  ....
end 
```

在我看来

```
<%= my_check_box_tag("test") %> 
```

# python - Windows 32 上的 PySide 和 VTK

> ID：15813643
> 
> 赞同：0
> 
> 时间：2013-04-04T14:10:37.330
> 
> 标签：python, windows, qt, pyside, vtk

我有一个 PySide/VTK 应用程序，使用 QVTKRenderWindowInteractor 连接。PySide 1.0.9 在带有 QT4.8/VTK 5.8 的基于 Unix 的系统上运行良好。（所有 Python 2.7.3）

然后我在 Microsoft Windows 系统 (XP 32) 上移植，使用 PySide win32 分发版 (1.1.x) Qt4 和 VTK 5.10，我在 QVTKRenderWindowInteractor 中出现类型错误，同时检索 self.winId() 预计可转换为诠释：

```
TypeError: int() argument must be a string or a number, not 'PyCObject' 
```

PySide API 实际上说 PySide.QtGui.QWidget.winId() 返回一个长...

我正在 MS-Windows 和 Unix 上开始更多测试，但也许你们中的一些人可以给我一些建议？我必须寻找什么以及在哪里寻找？

是否与Qt 的 PySide 接口生成器生成的**32 位**系统上的这种**long的错误转换有关？**

 **见第 152 行 [http://sourceforge.net/p/pycgns/code/ci/17b696c3b0ad2b387b7e0ddc5d9b195cbc6abf70/tree/NAVigater/CGNS/NAV/Q7VTKRenderWindowInteractor.py](http://sourceforge.net/p/pycgns/code/ci/17b696c3b0ad2b387b7e0ddc5d9b195cbc6abf70/tree/NAVigater/CGNS/NAV/Q7VTKRenderWindowInteractor.py)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T00:54:34.763

将此行替换为：

```
WId = self.winId()

if type(WId).__name__ == 'PyCObject':
    from ctypes import pythonapi, c_void_p, py_object

    pythonapi.PyCObject_AsVoidPtr.restype  = c_void_p
    pythonapi.PyCObject_AsVoidPtr.argtypes = [py_object]

    WId = pythonapi.PyCObject_AsVoidPtr(WId)

self._RenderWindow.SetWindowInfo(str(int(WId))) 
```**

# android - 实现单击列表项并长按android中的元素

> ID：15813649
> 
> 赞同：1
> 
> 时间：2013-04-04T14:10:57.600
> 
> 标签：android, listview, onclick

它是如此简单。我想在我的列表视图的列表项上实现 onclick，同时长按列表视图的文本视图。但似乎我一次只能申请一个。不可能那么难。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:05:25.087

下面的代码对我来说很好。

基本上，您可以在 getView 方法中将 setOnLongClickListener 添加到 textview 中。

代码取自[这里](http://www.mkyong.com/android/android-listview-example/)。我刚刚添加了 textView.setOnLongClickListener。当您单击列表项时，会显示吐司。当您长按列表中的文本视图时，会显示日志。

```
public class ListMobileActivity extends ListActivity {
static final String[] MOBILE_OS = new String[] { "Android", "iOS",
        "WindowsMobile", "Blackberry"};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(new MobileArrayAdapter(this, MOBILE_OS));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    String selectedValue = (String) getListAdapter().getItem(position);
    Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();
}
} 
```

这是自定义适配器：

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;

public MobileArrayAdapter(Context context, String[] values) {
    super(context, R.layout.list_mobile, values);
    this.context = context;
    this.values = values;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.list_mobile, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
    textView.setText(values[position]);
    textView.setOnLongClickListener(new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            Log.i("MobileArrayAdapter", (String) ((TextView)v).getText());
            return false;
        }

    });
    // Change icon based on name
    String s = values[position];

    System.out.println(s);

    if (s.equals("WindowsMobile")) {
        imageView.setImageResource(R.drawable.windowsmobile_logo);
    } else if (s.equals("iOS")) {
        imageView.setImageResource(R.drawable.ios_logo);
    } else if (s.equals("Blackberry")) {
        imageView.setImageResource(R.drawable.blackberry_logo);
    } else {
        imageView.setImageResource(R.drawable.android_logo);
    }

    return rowView;
}
} 
```

希望这可以帮助。

# iphone - 表格视图单元格中的图像视图框架

> ID：15813650
> 
> 赞同：1
> 
> 时间：2013-04-04T14:10:58.437
> 
> 标签：iphone, ios, image, uitableview

我已将图像添加到我的 iOS 应用程序的资源文件夹中。我想将该图像添加到我的`UITableView`. 我像这样调整图像的大小`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

     cell.imageView.frame=CGRectMake(10, 27, 30, 30);
} 
```

但是我的图像以资源文件图像的大小显示，但我希望它在上述框架中。

我的研究给了我这个想法：

```
-(void)layoutsubviews
{
   cell.imageView.frame=CGRectMake(10, 27, 30, 30);
} 
```

我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:57:05.013

Try this out

```
-(void)layoutsubviews
    {
       self.imageView.frame=CGRectMake(10, 27, 30, 30);
    } 
```

I am not sure how the compiler is letting you access the `cell` in the `-layoutSubviews` method. In short, whatever frames you set here will override the default frames of a UITableViewCell.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:59:27.913

你试过`[cell.imageView setContentMode:UIViewContentModeAspectFit];`吗？

# c# - 如何从数据库中选择一周的日期？

> ID：15813651
> 
> 赞同：1
> 
> 时间：2013-04-04T14:10:59.787
> 
> 标签：c#, database, datetime, linq-to-sql

我想要做的是在我的数据库（ado.net with linq to sql）中搜索上周的所有条目。

数据库有一个名为 date 的字段，我需要当前日期前 7 天的条目。

```
var records = (from r in context.PumpInfoTables
               where r.Date.Equals(DateTime.Now)
               //&& where r.date <= 7 days <--help
               select r); 
```

所以我正在寻找有关此查询的帮助，是否可以使用 between 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:13:04.983

```
DateTime weekFromNow = DateTime.Now.AddDays(-7);
var records = (from r in context.PumpInfoTables
                           where r.Date < DateTime.Now
                           && r.Date >= weekFromNow
                           select r); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:13:38.787

这真的很简单：

```
var oneWeekAgo = DateTime.Today.AddDays(-7);
var records = (from r in context.PumpInfoTables
               where r.Date >= oneWeekAgo
               select r); 
```

这假设您没有来自未来的条目。如果有，请改用它：

```
var today = DateTime.Today;
var oneWeekAgo = today.AddDays(-7);
var records = (from r in context.PumpInfoTables
               where r.Date >= oneWeekAgo && r.Date <= today + 1
               select r); 
```

请注意：
我的代码使用`DateTime.Today`代替`DateTime.Now`，假设您只对日期部分感兴趣，而不是时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:14:46.230

像这样的东西？：

```
var records = (from r in context.PumpInfoTables
                           where r.Date > DateTime.Today.AddDays(-7)
                           select r); 
```

# php - 这个 php 语法有什么问题？

> ID：15813652
> 
> 赞同：1
> 
> 时间：2013-04-04T14:11:01.683
> 
> 标签：php, javascript, jquery

执行此代码时，我的浏览器控制台出现错误：-

```
 <script type="text/javascript">
       $(function(){
           if(<?php (strpos($_SERVER['REQUEST_URI'],'/web/login/index/1') === 0)?>) {
              var loggedOut= <?=$fb_logout;?>;
            }
           else{
             var loggedOut = null;  
            }

        some more java script
        .
        .
        .

        .  
      </script> 
```

如果请求来自具有 /web/login/index/1 部分 URl 的页面，我想要做的是使用值 1 初始化loggedOut，该值存储在 fb_logout 中。我在浏览器控制台中收到错误消息，说“语法错误”，在“if()”结束括号之后指向“jquery.min.js (line 3, col 15)”。我正在使用 jQuery 库。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:12:46.830

您需要返回/显示语句的结果：

```
<?=((strpos($_SERVER['REQUEST_URI'],'/web/login/index/1') === 0) ? 'true': 'false')?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:23:17.423

主要答案：您没有输出比较结果。

建议：使用三元运算符怎么样？

```
 var loggedOut = <?php echo (strpos($_SERVER['REQUEST_URI'],'/web/login/index/1') === 0) ? $fb_logout :  'null' ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:15:41.180

现在，试着检查一下：

```
<?php
if (strpos($_SERVER['REQUEST_URI'], '/web/login/index/1') === 0) {
    echo "false";
} else {
    echo "true";
}
?> 
```

作为上面代码中的第一个 PHP 代码。

# python - Python代码，控制台文本的时间延迟

> ID：15813654
> 
> 赞同：2
> 
> 时间：2013-04-04T14:11:12.307
> 
> 标签：python, time, console, delay

我正在制作一个应该在控制台上打印文本的代码，每个字母都应该有一点延迟。我试过这样的东西

```
from time import sleep
print "H", sleep(0.1), "e", sleep(0.1), "l", sleep(0.1), "l", sleep(0.1), "o" 
```

但它在那里放了随机的“无”。我该怎么办？请帮忙 ：？：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:14:39.690

`sleep`返回 None，它被打印出来。您可以`print`在没有换行符的情况下每个字符然后睡觉：

```
import sys
from time import sleep

for c in "Hello":
    print c,        # note the comma
    sleep(0.1)
print               # the final newline 
```

但为避免中间有空格，您必须执行以下操作：

```
import sys
from time import sleep

for c in "Hello":
    sys.stdout.write(c)
    sleep(0.1)
sys.stdout.write('\n') 
```

根据您的环境，您可能还需要刷新标准输出缓冲区：

```
import sys
from time import sleep

for c in "Hello":
    sys.stdout.write(c)
    sys.stdout.flush()
    sleep(0.1)
sys.stdout.write('\n')
sys.stdout.flush() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:15:46.670

您需要使用单独的打印来执行此操作：

```
from time import sleep

print "H",
sleep(0.1)
print "e",
sleep(0.1)
# ... 
```

请注意，像这样使用 print 将在字符之间有一些空格。

您看到`None`打印的原因是因为`sleep`返回`None`并且您的脚本尝试打印`sleep`返回的内容。

# algorithm - 使用带有哈希表的数组列表

> ID：15813655
> 
> 赞同：2
> 
> 时间：2013-04-04T14:11:12.903
> 
> 标签：algorithm

我正在尝试从头开始构建一个简单的哈希表。我目前使用的哈希表使用了一个链表数组。散列函数将键对对象的散列值取模数组的大小进行索引。这一切都很好，但我想知道一旦它开始填满，我是否可以通过使用数组列表来动态扩展我的数组（如果你这么认为，请告诉我为什么这不是一个好主意）。显然，哈希函数会受到影响，因为我们使用数组长度查找索引。什么是一个好的散列函数可以让我的链表数组扩展而不损害散列函数的完整性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:15:07.870

如果我正确理解您的问题，您将不得不在扩展存储桶数组后重新散列所有元素。它可以通过迭代旧哈希表的内容，并将它们插入到新扩展的哈希表中来完成。

# joomla - 每页页脚中的自定义脚本

> ID：15813656
> 
> 赞同：0
> 
> 时间：2013-04-04T14:11:13.307
> 
> 标签：joomla

我正在编写一个 Joomla 扩展，它允许自定义脚本在每个“站点”页面上运行。我已经完成了包括数据库访问在内的后端部分，但是，现在我完全不知道如何将自定义 javascript 添加到“站点”的每个页面，无论安装什么主题。另外，我不想打扰页面上的任何其他内容。

我已经在网上搜索了将近 4 个小时，并且尝试过以各种方式修改模板的 index.php 文件，但都是徒劳的。

有什么帮助吗？

提前谢谢...

**编辑** 我需要将此作为扩展分发...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:34:51.137

您需要创建一个[内容插件](http://docs.joomla.org/Category%3aPlugin_Development)。例如

```
class plgContentMyplugin extends JPlugin
{
    public function onContentPrepare($context, &$article, &$params, $page = 0)
    {
        $document = JFactory::getDocument();
        $document->addScript(JURI::base().'plugins/content/myplugin/js/myscript.js' );
    }
} 
```

这将添加`myscript.js`到`<head>`. 只需查看文档如何打包插件

# php - html5 textarea 无法在智能设备中拉伸

> ID：15813662
> 
> 赞同：0
> 
> 时间：2013-04-04T14:11:20.913
> 
> 标签：php, android, html, html5boilerplate

我在我的一个 html 页面中使用了 html textarea。我正在使用 html5**样板**模板。可以在任何设备上毫无问题地查看页面。但是 textarea 元素不能被拉伸。每个文本区域右下角的偶数图案（这表明它可以进一步拉伸）也不可见。

为了进一步说明，这里是页面在 PC (Chrome) 和 iPhone (safari) 中的外观。 ![从 Chrome 浏览器输出](https://i.stack.imgur.com/ilaay.png) *Chrome 浏览器* ![图片来自 Iphone](https://i.stack.imgur.com/azpcI.png) *的输出 Iphone Safari的输出*

您可以看到 textarea 在两个设备上的显示方式不同。这也显示了 android 设备中的相同行为。

这是我的代码

```
echo("  <form method=\"post\" action=\"".$_SERVER['PHP_SELF']."\">
<text>Content name: </text><input type=\"text\" name=\"content_name\"/>
<text>Content type: </text><input type=\"text\" name=\"content_type\"/>
<text>Content value: </text><textarea cols=\"60\" name=\"content_value\" name=\"content_value\"></textarea>
<text></text><input class=\"submitbtn\" type=\"submit\" value=\"submit\" name=\"submit\"></input>
</form></div>"); 
```

如果我做错了什么，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:05:45.120

为了阻止 chrome 显示调整大小，您可以将其添加到您的 textarea 元素样式中：

样式=“调整大小：无；”

所以你得到

```
<textarea style=\"resize: none;\" cols=\"60\" name=\"content_value\" name=\"content_value\"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:14:10.520

您可以删除 cole="\60\" 并使用 CSS 设置它，例如 style="width: 100%;"

# python - 加入作者姓名，第一个用逗号分隔，最后一个用“and”

> ID：15813664
> 
> 赞同：-2
> 
> 时间：2013-04-04T14:11:24.367
> 
> 标签：python, join

我对 Python 完全陌生，并且有一个用 分隔的名称列表`\and`，我需要将第一个用逗号分隔，最后一个用“和”分隔。但是，如果名称超过 4 个，则返回值应该是第一个名称以及短语“et al.”。所以如果我有

```
 authors = 'John Bar \and Tom Foo \and Sam Foobar \and Ron Barfoo' 
```

我应该得到“John Bar et al.”。而随着

```
authors = 'John Bar \and Tom Foo \and Sam Foobar' 
```

我应该得到“John Bar、Tom Foo 和 Sam Foobar”。

它还应该只使用一个作者姓名，并单独返回该单一姓名（和姓氏）。

我试着做类似的事情

```
 names = authors.split('\and')
  result = ', '.join(names[:-1]) + ' and '.join(names[-1]) 
```

但这显然行不通。所以我的问题是我如何使用`join`和`split`让第一作者用逗号分隔，最后一个作者用“和”分隔，考虑到如果有超过四个作者，只有第一作者姓名应该与“等”一起返回。 .

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T14:21:46.387

从拆分名称开始：

```
names = [name.strip() for name in authors.split(r'\and')]  # assuming a raw \ here, not the escape code \a. 
```

然后根据长度重新加入：

```
if len(names) >= 4:
    authors = '{} et al.'.format(names[0])
elif len(names) > 1:
    authors = '{} and {}'.format(', '.join(names[:-1]), names[-1])
else:
    authors = names[0] 
```

这也适用于只有*一位*作者的条目；我们只是将名称重新分配给`authors`.

组合成一个函数：

```
def reformat_authors(authors):
    names = [name.strip() for name in authors.split(r'\and')]
    if len(names) >= 4:
        return '{} et al.'.format(names[0])
    if len(names) > 1:
        return '{} and {}'.format(', '.join(names[:-1]), names[-1])
    return names[0] 
```

带演示：

```
>>> reformat_authors(r'John Bar \and Tom Foo \and Sam Foobar \and Ron Barfoo')
'John Bar et al.'
>>> reformat_authors(r'John Bar \and Tom Foo \and Sam Foobar')
'John Bar, Tom Foo and Sam Foobar'
>>> reformat_authors(r'John Bar \and Tom Foo')
'John Bar and Tom Foo'
>>> reformat_authors(r'John Bar')
'John Bar' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:21:24.820

让我们把这个问题分成几个部分：

首先，获取单个作者的列表：

```
>>> authors = 'John Bar \\and Tom Foo \\and Sam Foobar \\and Ron Barfoo'
>>> authorlist = [item.strip() for item in authors.split("\\and")]
>>> authorlist
['John Bar', 'Tom Foo', 'Sam Foobar', 'Ron Barfoo'] 
```

现在检查列表中的条目数并采取相应措施：

```
>>> if len(authorlist) > 3:
...     print("{0} et al.".format(authorlist[0]))
... elif len(authorlist) == 1:
...     print(authorlist[0])
... else:
...     print("{0} and {1}".format(", ".join(authorlist[:-1]), authorlist[-1]))
...
John Bar et al. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T20:58:32.790

```
def natural_join(val, cnj="and"):
    if isinstance(val, list):
        return " ".join((", ".join(val[0:-1]), "%s %s" % (cnj, val[-1]))) if len(val) > 1 else val[0]
    else:
        return val

natural_join(['pierre'])
# 'pierre'

natural_join(['pierre', 'paul'])
# 'pierre and paul'

natural_join(['pierre', 'paul', 'jacques'])
# 'pierre, paul and jacques'

natural_join(['pierre', 'paul', 'jacques'], cnj="et")
# 'pierre, paul et jacques' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:20:11.810

首先，您应该拆分您的字符串，以使用`split`.

```
parts = author.split(' \and ') 
```

然后你应用你的条件：

1.  如果有 4 个或更多名称，则返回第一个名称 + 'el at'

    ```
    if len(parts) >= 4:
        return parts[0]+' et al' 
    ```

2.  如果有超过 1 个名字，用 ', ' 连接它们，最后一个用 ' 和 ' 连接

    ```
    elif len(parts) > 1:
        return ' and '.join([', '.join(parts[:-1]), parts[-1]]) 
    ```

3.  如果只有一个名称，则返回该名称。

    ```
    return parts[0] 
    ```

最终功能：

```
def my_func(author):
    parts = author.split(' \and ')
    if len(parts) >= 4:
        return parts[0]+' et al'
    elif len(parts) > 1:
        return ' and '.join([', '.join(parts[:-1]), parts[-1]])
    return parts[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:20:47.640

看起来你应该检查一下`string.split`方法。这里有几个案例：要么有一个名字，要么有 2-3 个名字，要么有 4 个以上的名字。这些中的每一个都需要单独处理，因此只需弄清楚每种情况下需要做什么：

```
# First split up the names by your specified delimiter (and strip off whitespace)
names = [name.strip() for name in authors.split(r'\and')]

# Now deal with your three cases for formatting.
if len(names) == 1:
    print names[0]
elif len(names) < 4:
    print ', '.join(names[:-1])+' and '+names[-1]
else:
    print names[0]+' et al.' 
```

# sql - 初学者可以在哪里运行他们的 SQL 代码？如果是 PL，那为什么它没有编译器？

> ID：15813674
> 
> 赞同：-4
> 
> 时间：2013-04-04T14:11:43.887
> 
> 标签：sql, rdbms

我对数据库这个主题完全陌生，我只有理论知识。我想运行我读过的 SQL 命令，但完全不知道在哪里运行它。定义说 SQL 是一种特殊用途的编程语言。如果是这样，为什么它没有编译器吗？如果我必须在我的计算机上安装 RDBMS 来练习 SQL，你会建议学习者使用什么？SQL 命令可以在所有 RDBMS 中运行吗？我对此感到非常沮丧，完全一无所知。请帮助我迈出第一步。只是一件简单的事情——到底在哪里运行那些SQL命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:13:10.923

您可以使用[http://sqlfiddle.com/](http://sqlfiddle.com/)来测试您的查询。在那里你可以选择一个数据库（mysql、Oracle、Sql Server 或其他），生成测试表，用测试数据填充它们并生成对该数据的测试查询

# node.js - 所有路由的 HTTPS 重定向 node.js/express - 安全问题

> ID：15813677
> 
> 赞同：17
> 
> 时间：2013-04-04T14:11:46.507
> 
> 标签：node.js, https, express

我最近尝试在 node/express 服务器上设置 HTTPS。我已经成功地使用以下代码重定向所有路由以使用 https：

```
// force https redirect
var https_redirect = function(req, res, next) {
  if (req.secure) {
    if(env === 'development') {
      return res.redirect('https://localhost:3000' + req.url);
    } else {
      return res.redirect('https://' + req.headers.host + req.url);
    }
  } else {
    return next();
  }
};

app.get('*', function(req, res, next) {
  https_redirect(req, res, next);
}); 
```

这似乎工作正常。但是，由于在我有几个问题之前我还没有涉足这个问题：

1.  这是从 http 重定向到 https 的理想方式吗？
2.  如果用户使用 http 路由，那么在重定向之前，任何人都可以使用 sslstrip 之类的东西来嗅探会话信息。

节点：v0.8.2；快递：v3.05

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-05T07:28:47.930

```
function requireHTTPS(req, res, next) {
    if (!req.secure) {
        //FYI this should work for local development as well
        return res.redirect('https://' + req.get('host') + req.url);
    }
    next();
}

app.use(requireHTTPS);
app.get('/', routeHandlerHome); 
```

中间件方法将起作用，因为 express 将在运行路由器之前按添加的顺序运行中间件，并且通常这种站点范围的策略作为中间件与通配符路由相比更干净。

关于关于嗅探会话 cookie 的问题 2，必须通过将 cookie 标记为`secure`设置它们时来解决。如果它们没有被标记为安全，浏览器也会将它们与 HTTP 请求一起传输，从而使它们暴露在嗅探之下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:21:52.050

您可以简单地使用您的 https_redirect 函数（尽管稍作修改）来自动重定向所有安全请求：

```
// force https redirect
var https_redirect = function () {
  return function(req, res, next) {
    if (req.secure) {
      if(env === 'development') {
        return res.redirect('https://localhost:3000' + req.url);
      } else {
        return res.redirect('https://' + req.headers.host + req.url);
      }
    } else {
      return next();
    }
  };
};
app.use(https_redirect());

app.get('/', routeHandlerHome); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T21:08:18.307

我使用这个简单的代码来重定向请求，具体取决于应用程序是处于开发阶段还是生产阶段。

```
// force https redirect
var forceHTTPS = function () {
  return function(req, res, next) {
    if (!req.secure) {
      if (app.get('env') === 'development') {
         return res.redirect('https://localhost:3001' + req.url);
      } else {
        return res.redirect('https://' + req.headers.host + req.url);
      }
    } else {
      return next();
    }
  };
}; 
```

# jquery - 通过切换触发手风琴菜单

> ID：15813679
> 
> 赞同：0
> 
> 时间：2013-04-04T14:11:51.120
> 
> 标签：jquery, accordion

我有一个 2 级手风琴菜单，我想隐藏在移动视图中，并添加一个菜单文本，以便单击它时，它首先打开第一级，如果单击父级，则打开第二级，但我不太清楚如何使它正确发生。

这是我的演示代码。现在，当单击菜单时，它会打开所有级别的手风琴。

[http://jsbin.com/upuwiy/3/edit](http://jsbin.com/upuwiy/3/edit)

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:21:56.733

您所要做的就是最初隐藏第二级选项

你可以在这里看到一个例子，我在每个内部 ul 上添加了 inner-options 类，它将 display 属性设置为 none。

[固定版本](http://jsbin.com/upuwiy/4/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:25:16.427

问题与您的这部分代码有关。这只会隐藏主 ul 而不是内部 ul。

```
jQuery('ul.sf-menu').hide();//hide all nested ul's 
```

试试这个

```
jQuery('ul.sf-menu ul').hide();//hide all nested ul's 
```

# flex4 - 图片库。如何前进到下一张图片？

> ID：15813680
> 
> 赞同：0
> 
> 时间：2013-04-04T14:11:52.717
> 
> 标签：flex4, flash-builder

我试图使用 xml 提要和 sparks 列表组件制作图片库。在水平列表中显示图像。当然可以单击每个项目以查看更大的图像，但是要查看其他图像或列表中的下一个图像，您必须单击后退按钮，然后选择另一个。

我如何移动图像以移动到列表中的下一个项目，而无需返回主列表。

谢谢。

# c++ - C++ 继承的构造函数

> ID：15813684
> 
> 赞同：2
> 
> 时间：2013-04-04T14:12:00.850
> 
> 标签：c++, inheritance, constructor

我目前正在开发一个 c++ 程序，主要目的是你有两个不同的对象在屏幕上浮动，相互碰撞等等。无论如何，我遇到的问题是我需要从我的基类派生两个类。但是，在派生类的定义和声明中，我遇到了一个错误并且无法解决。我已经搜索了网络并征求了我的同事的意见，但无法找到问题的根源。代码是

```
Jetsam(RandomNumber &rnd, Console &console); 
```

（对于头文件）

和

```
Jetsam::Jetsam(RandomNumber &rnd, Console &console): Element(rnd, console){}; 
```

（对于 cpp 文件）

我得到的错误是 IntelliSense：

> Jetsam::Jetsam(RandomNumber &rnd, Console &console)" 没有为以下内容提供初始化程序：e:\c++\my game\my game\jetsam.cpp。

有谁知道出了什么问题。任何帮助将非常感激 ：）

干杯，阿林。

按照要求：

## 捷萨姆

```
#pragma once
#include "RandomNumber.h"
#include "Console.h"
#include "element.h"
#include <iostream>
using namespace std;

class Jetsam : public Element
{
public:
    Jetsam(RandomNumber &rnd, Console &console);
    ~Jetsam();
    void printAt(void);

protected:
    RandomNumber &rnd;
    Console &console;
}; 
```

## 元素

```
#pragma once
#include "RandomNumber.h"
#include "Console.h"
#include <iostream>
using namespace std;

// code shell, amend as appropriate

class Element
{
protected:
    RandomNumber &rnd;
    Console &console;
    int x;
    int y;
    int energy;
    int direction;
    int speed;
    char identifier;
    static char nextIdentifier;

public:

    Element();
    Element(RandomNumber &rnd, Console &console);
    // precondition: references to RandomNumber and Console objects are provided, along with any other desired parameters
    // postcondition: Element object created and private members initialised
    // example of use: Element element(rnd, console);

    virtual void print(void);
    // precondition: none
    // postcondition: identifier, x and y are sent to the standard output
    // example of use: element.print();

    virtual void printAt(void)=0;
    // precondition: none
    // postcondition: text background is changed proportionate to its energy in the following order
    //                BLUE, GREEN, AQUA, YELLOW, RED, PURPLE, e.g. an object with 23 energy would have an AQUA background
    //                object's identifier is sent to the standard output at its x, y coordinates
    // example of use: element.printAt();

    int getX(void);
    int getY(void);
    int getEnergy(void);
    int getDirection(void);
    int getSpeed(void);
    //getters for the base class
    void setX(int);
    void sety(int);
    void setEnergy(int);
    void setDirection(int);
    void setSpeed(int);
    //setters for the base class
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:28:57.403

问题是类`Element`和`Jetsam`定义这些成员：

```
RandomNumber &rnd;
Console &console; 
```

这意味着 的每个实例`Jetsam`实际上都有其中两个：`Element::rnd`和`Jetsam::rnd`. 由于它们是引用，它们必须在构造函数的 mem-initialiser 列表中进行初始化；没有其他方法可以初始化它们。

要简单地修复错误，您必须这样做：

```
Jetsam::Jetsam(RandomNumber &rnd, Console &console) :
  Element(rnd, console)
  , rnd(rnd)
  , console(console)
{} 
```

但是，我怀疑您并不真的希望它们被复制（尤其是因为它们在`protected`里面`Element`）。所以正确的解决方案是简单地从`Jetsam`. 之后，`Jetsam`将如下所示：

```
class Jetsam : public Element
{
public:
    Jetsam(RandomNumber &rnd, Console &console);
    ~Jetsam();
    virtual void printAt(void);
}; 
```

请注意，`virtual`在派生类中重写虚函数时重复关键字通常是一个好主意（它有助于提高可读性），即使标准没有要求。当然，如果使用支持它的 C++11 编译器，那就`override`更可取了。

# ruby-on-rails - 在两个 ruby on rails 应用程序之间共享一个数据库

> ID：15813694
> 
> 赞同：0
> 
> 时间：2013-04-04T14:12:29.857
> 
> 标签：ruby-on-rails, database

我有一个来自现有 ror 应用程序的现有 sqlite 数据库，并且想简单地设置一个新的 rails 应用程序，以便我的用户只能查看数据库中的记录。如何设置链接到现有数据库的脚手架。数据库名称默认为“development.sqlite3”，并有一个名为“library”的表。此表用于在幻灯片中显示图像。（仅包含图像的回形针类型值和自动生成的 id。）

听说要配置config/database.yml，然后不用迁移就创建模型，接下来呢？如何自动将新模型映射编辑到正确的表。

---更新1：

我试图在没有迁移的情况下创建一个与原始表同名的模型，并像下面这样编辑模型：

```
class Library < ActiveRecord::Base

 self.table_name = "library"

end 
```

这样我现在可以访问所有列......但是库表也有一个回形针类型值（对于图像“house”），house_file_name; 房子内容类型；house_file_size;house_updated_at; 我可以根据这些列显示来自该数据库的原始图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:52:34.030

如果新应用中的模型使用与原应用相同的命名，则默认使用同一张表。如果你想为模型指定一个不遵循 rails 约定的表，你可以调用`table_name=`你的模型：

```
class Foo < ActiveRecord::Base
  self.table_name = "library"
end 
```

# php - 滚动到页面顶部时刷新页面

> ID：15813695
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:12:32.900
> 
> 标签：php, javascript, ajax, autoload

我正在创建一个网站，当用户滚动到页面顶部时`php`，我希望在其中进行划分。`reload``javascript`

任何人都可以通过示例指导我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:18:11.187

使用像 jQuery 这样的东西，你可以这样做；

```
$(window).scroll(function () { 

   var offset = 50;

   if( $(window).scrollTop() <= offset ) {

   // Reload your division    
   //

   }

 }); 
```

笔记; .scroll 函数正在触发您滚动的每个像素，对于浏览器加载，您可能需要为此添加超时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:21:06.190

您需要观察 scrollTop 值。简单的例子：

```
$(window).scroll(function () { 
    if ( $(window).scrollTop <= 30 ) {
        window.location.reload();
    }
}); 
```

# mysql - 将表内容迁移到另一个表并更改游戏规则Mysql

> ID：15813696
> 
> 赞同：0
> 
> 时间：2013-04-04T14:12:38.087
> 
> 标签：mysql, wordpress

我又被mysql卡住了:)

我的问题同时很简单/复杂。

我准备了包含列的数据集： `user_id, user_email, user_country`.......

我需要将其导入/插入到 wp_usermeta 表中。

wp_usermeta 具有以下列：

```
umeta_id (autoincrement), user_id, meta_key, meta_value 
```

所以从我的数据集中，user_id 应该是 user_id，user_email 和 user_country 成为 meta_keys 和它们的内容 meta_values。

最后我希望得到这个：

```
user_id   meta_key        meta_value
12        user_country    Italy
12        user_email      sa@sa.com 
```

由于缺乏正确的词，我试图“解构”数据集。

可以用mysql吗？还是我应该为我做这件事的 php 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:24:51.467

我相信你正在寻找一个 php 循环来做到这一点。

在您的脚本中创建一个查询，以获取您希望引入的所有行。

然后做一个`while`遍历结果的循环，在其中你可以做一个 foreach 循环来提取键和值。

查看 .php 的 PHP 手册`mysqli_fetch_array`。另外，请特别看一下[这个例子](http://www.php.net/manual/en/mysqli-result.fetch-array.php#104189)。

# pdo - MYSQLi 中是否默认禁用准备好的语句？就像在 PDO 中一样？

> ID：15813700
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:12:47.827
> 
> 标签：pdo, mysqli, prepared-statement

在 PDO 中，准备好的语句默认是禁用的。

你需要`$dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);`启用它们。

所以我想知道它在MYSQLi中是否相同？或者在 MYSQLi 中默认启用准备好的语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:23:03.457

> 如果它在 MYSQLi 中是一样的？

不。

Mysqli 根本没有仿真模式。

# backbone.js - 嵌套的 ItemViews，事件无法正常工作

> ID：15813706
> 
> 赞同：0
> 
> 时间：2013-04-04T14:12:59.313
> 
> 标签：backbone.js, marionette

我有 2 个模型，通过backbone.relational 和backbone.localstorage 实现，它们运行良好。

我有 2 个视图，第一个是“单项”查看器，第二个是具有渲染功能的项视图，可以按照我想要的方式查看我的单项视图，问题是事件不起作用，无论是在父视图中还是在单个项目视图中。我以类似的方式重新实现了该代码，以向您展示它是如何不工作的（代码在 coffeescript 中）：

```
log = console.log

class $.Girl extends Backbone.RelationalModel
  localStorage: new Backbone.LocalStorage 'gals'
  initialize: -> if typeof @get('id') is 'undefined' then @save() else @fetch()

class $.Girls extends Backbone.RelationalModel
  localStorage: new Backbone.LocalStorage 'gals'
  relations:[{
    type: Backbone.HasMany
    key: 'gals'
    relatedModel: $.Girl
    includeInJson: 'id'
  }]
  initialize: ->
    if typeof @get('id') is 'undefined' then @save() else @fetch()
    @fetchRelated()

class $.GirlView extends Marionette.ItemView
  tagName: 'tr'
  template: (data)-> '<td>'+data.name+' -- '+data.age+'<button>Love</button></td>'
  initialize: ->
    @listenTo @model,'change',@render

  events:
    'click button': 'sayLove'

  sayLove : -> log 'I Love YOU!'

class $.GirlsView extends Marionette.ItemView
  template: (data)->
    '<table>
        <thead><tr><th>My Gals</th></tr></thead>
        <tbody></tbody>
        <tfoot><tr><td>I Love Them!</td></tr></tfoot>
      </table>'
  initialize: (options)->
    @models = @model.get('gals').models
    @list = []
    self = @
    _.each @models,(girl)-> self.list.push new $.GirlView {model:girl}

  events:
    'click th': 'hello'
  render: ->
    @$el.html(@template {})
    self = @
    _.each @list,(girl)->
      girl.delegateEvents()
      self.$('tbody').append girl.render().$el

  hello: -> log 'hello'

gal1 = new $.Girl {name:'gal1',age:'22',id:'gal-1'}
gal2 = new $.Girl {name:'gal2',age:'19',id:'gal-2'}
gals = new $.Girls {title:'maGals',id:'gals-1',gals:['gal-1','gal-2']}

gv = new $.GirlsView {model:gals}
gv.render()
$('body').append gv.$el.html() 
```

这对我来说有点像你好世界。任何想法如何实现嵌套 itemViews 与事件工作或此片段的任何其他想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:36:24.330

在附加您的子视图后尝试调用 delegateEvents：

```
self.$('tbody').append girl.render().el
girl.delegateEvents()
// or maybe @delegateEvents()? the context should be the child here 
```

**编辑：**

更改`$('body').append gv.$el.html()`为`$('body').append @$el`。

# wso2 - WSO2 是否同时计算 SOA 收益？

> ID：15813707
> 
> 赞同：1
> 
> 时间：2013-04-04T14:12:59.480
> 
> 标签：wso2, wso2greg

我正在研究 WSO2 Governance Registry，它的所有功能都给我留下了深刻的印象。但是，我想知道它是否衡量 SOA 的好处。

其他一些 SOA 治理工具可让您了解开发特定服务所花费的小时数，并计算每次重用该服务时节省了多少小时。随着时间的推移，您可以了解通过重用节省了多少小时，因此有可能也节省了大致数量的金钱。

总之，WSO2 Governance Registry（或其他 WSO2 产品）是否提供该功能？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:38:35.773

治理注册表不支持此功能。

但是，AppFactory 中有一些朝着这个方向发展的路线图项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-13T16:55:48.300

此功能在 GReg 5.0.0 及以后版本中可用。现在您可以根据预定义的时间约束创建生命周期检查点。

请找到[这篇文章](http://sencs.blogspot.com/2016/03/how-to-set-lifecycle-checkpointsaka.html)。

希望这可以帮助。

# eclipse - BlackBerry App 启动 MyProject 时出错：找不到模块“xxxxxxx”

> ID：15813710
> 
> 赞同：0
> 
> 时间：2013-04-04T14:13:04.207
> 
> 标签：eclipse, blackberry, blackberry-eclipse-plugin, blackberry-jde

在我的黑莓应用程序中，我有三个项目；**MainProj**，**OwnersAppComm**，**JSON-ME**，其构建路径配置如下。

## 主项目

Java 构建路径

```
 - Projects  - OwnersAppComm 

            - Libraries - None

            - Order and Export - MainProj/src (exported)
                               - MainProj/res (exported)
                               - OwnersAppComm (not exported)
                               - BB JRE 4.5.0 (not exported) 
```

## OwnersAppComm

Java 构建路径

```
 - Projects - JSON-ME

            - Libraries - None

            - Order and Export - OwnersAppComm/src (exported)
                               - JSON-ME/src (exported)
                               - BB JRE 4.5.0 (not exported) 
```

## JSON-ME

Java 构建路径

```
 - Projects - None

            - Libraries - BB JRE 4.5.0

            - Order and Export - JSON-ME/src (exported)
                               - BB JRE 4.5.0 (not exported) 
```

当我运行此项目时，我收到此错误：错误启动 MainProj：在运行 JRE > 4.5 的模拟器中找不到模块“JSON$2dME”。在运行 JRE 4.5 的 8300 模拟器中，我没有收到此错误。

我尝试从每个子项目中制作 JAR，但我得到了同样的错误。

[此处](https://stackoverflow.com/questions/7469210/blackberry-error-starting-module-not-found-adding-external-jar-to-eclipse-plug)的另一个问题描述了 Eclipse 的 BlackBerry 插件的类似问题，但没有解决方案。

有谁知道如何正确包含这两个子项目，以便在高于 4.5 的 JRE 中没有错误？

谢谢和问候，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:33:38.570

最后我让它像这样工作：

*   我将 JSON-ME 的内容添加到 OwnersAppComm 中（不是理想的解决方案，但没有其他选择）。
*   OwnersAppComm 的 Java Build Path 改成了这个，

## OwnersAppComm

Java 构建路径

```
 - Projects - None

        - Libraries - BB JRE 4.5.0 

        - Order and Export - OwnersAppComm/src (exported)

                           - BB JRE 4.5.0 (not exported) 
```

*   然后我把 MainProj 的 Java Build Path 改成了这个。

## 主项目

Java 构建路径

```
 - Projects  - OwnersAppComm 

        - Libraries - BB JRE 4.5.0 

        - Order and Export - MainProj/src (exported)
                           - MainProj/res (exported)
                           - BB JRE 4.5.0 (not exported)
                           - OwnersAppComm (not exported) 
```

仅此而已！它起作用了，我不知道为什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:35:06.267

唔。我似乎记得不久前遇到过类似的事情，但我不记得具体细节。您是否尝试过检查 MainProj 中 OwnersAppComm 的导出框？

# magento - 从主题的布局设置主页

> ID：15813715
> 
> 赞同：0
> 
> 时间：2013-04-04T14:13:14.373
> 
> 标签：magento, layout

我正在尝试通过节点`local.xml`中的主题布局更新文件设置 CMS 主页。`<cms_index_index>`我发誓我已经看到了在布局节点中临时更改商店配置的功能（但也许我梦到过），但我无法在类`Mage_Core_Block_Abstract`及其子类中找到布局功能。

作为参考，我已经签入`Mage_Cms_IndexController`并找到了呈现主页的函数：

```
public function indexAction($coreRoute = null)
{
    $pageId = Mage::getStoreConfig(Mage_Cms_Helper_Page::XML_PATH_HOME_PAGE);
    if (!Mage::helper('cms/page')->renderPage($this, $pageId)) {
        $this->_forward('defaultIndex');
    }
} 
```

或者，我这样做是完全错误的吗？对于这样的问题，最佳实践是什么？我不想为新主题添加商店视图，因为新主题适用于移动平台，并且需要商店视图中的相同设置。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:30:07.477

这是不可能的。在检查是否存在已指定的有效页面之前，不会调用布局配置；因为这些检查失败，默认路由器将匹配并且（默认情况下）应用程序将显示 404 页面。

# perl - 计算方程之间的百分比差异

> ID：15813719
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:13:28.330
> 
> 标签：perl, math

我需要比较的两个方程之间的系数数量不同。IE：

```
 Y = coef3*X^3 + coef2*X^2 + coef1*X + coef0 
```

这些系数可以是 0-> inf 的任何值。

我需要将每个方程与之前的方程进行比较，并返回这两个方程之间的百分比差异。我有 X、Y 的值，以及我需要找到百分比差异的每个方程的系数。

我可以取两个已知 Y 值之间的标准百分比差异并计算百分比差异，但由于这些是多项式，百分比差异总是会发生变化。

我还可以取一个具有设定半径的圆，并找到每个方程与该圆相对于 X 轴相交的角度，以便找到可以与 90 度等于 100% 变化的百分比相关的度数方程之间。然而，我不确定这是否准确，因为圆圈之外的任何东西都会有可能不同的百分比差异。

这将用 Perl 编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:52:00.587

我假设如果您提交以下内容，您的老师现在会为您提供帮助：

```
#!/usr/bin/env perl

use 5.012;
use strict;
use warnings;

use List::Util qw( sum );

my @f = map polynomial_maker(@$_), (
    [4, 2, 1], # 4x^2 + 2x + 1
    [10, undef, undef, undef, 1, 0], # 10x^5 + x
);

my @v = (1, 2, 3, 4);

for my $f (@f) {
    for my $i (1 .. $#v) {
        my $y0 = $f->($v[$i - 1]);
        my $y1 = $f->($v[$i]);
        printf "y0 = %.2f\ty1 = %.2f\t%% ch = %.2f\n",
            $y0,
            $y1,
            100 * (($y1 - $y0) / $y0)
        ;
    }
    say '-' x 80;
}

sub polynomial_maker {
    my @coeff = reverse @_;
    return sub {
        no warnings 'uninitialized';
        sum map $coeff[$_] * ($_[0]**$_), 0 .. $#coeff;
    };
} 
```

# c++ - 如何使用 GNU Make 项目设置 Google 测试？

> ID：15813723
> 
> 赞同：15
> 
> 时间：2013-04-04T14:13:31.490
> 
> 标签：c++, g++, makefile, googletest

由于 Google 测试网页上基本上没有文档，我该怎么做？到目前为止我所做的：

*   我从项目页面下载了 googletest 1.6 并在`./configure && make`里面做了一个
*   我添加`-Igtest/include` `-Lgtest/lib`到我的编译器/链接器标志
*   我写了一个小样本测试：

    ```
    #include "gtest/gtest.h"

    int main(int argc, char **args)
    {
      return 0;
    }

    TEST(someTest,testOne)
    {
      ASSERT_EQ(5,5);
    } 
    ```

    这编译得很好，但链接器似乎一点也不好玩。我收到一大堆错误消息，风格为

    > test/main.o: 在函数`someTest_testOne_Test::TestBody()': main.cpp:(.text+0x96): undefined reference to`testing::internal::AssertHelper::AssertHelper(testing::TestPartResult::Type, char const*, int, char const*)'

现在我忘记做什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T23:16:23.053

最好的 Makefile 示例是[与 Google Test 一起分发的](https://github.com/google/googletest/blob/master/googletest/scripts/test/Makefile)。它根据您是要使用 Google 的功能还是您自己的功能，向您展示如何链接`gtest_main.a`或使用您的二进制文件。`gtest.a``main()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-09T13:33:17.440

I installed Google Test on my system with `sudo apt-get install libgtest-dev` and the Fixture I'm working on doesn't have a `main()` and can be build with:

```
g++ unitTest.cpp -o unitTest /usr/src/gtest/src/gtest_main.cc /usr/src/gtest/src/gtest-all.cc -I /usr/include -I /usr/src/gtest -L /usr/local/lib -lpthread 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-01T03:38:58.740

在我向项目 makefile 添加内容之前，我想弄清楚它实际运行的是什么命令。所以这里是我用来手动构建 sample1 单元测试的命令列表。

g++ -c -I../include sample1.cc

g++ -c -I../include sample1_unittest.cc

g++ -pthread -o s1_ut sample1.o sample1_unittest.o ../lib/.libs/libgtest.a ../lib/.libs/libgtest_main.a

注意：如果你得到一堆与 pthread 相关的链接器错误，你忘记了第三个命令中的 -pthread。如果你得到一堆与 C++ 运行时库相关的链接器错误，你输入的是 gcc 而不是 g++。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-31T21:12:29.440

作为参考，我有一个`docker`系统设置，`g++`并且`gtest`可以正常工作。我在此处提供所有文件以供将来参考：

### Dockerfile

```
FROM gcc:9.2.0

WORKDIR /usr/src/app

RUN apt-get -qq update \
    && apt-get -qq install --no-install-recommends cmake \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

RUN git clone --depth=1 -b master https://github.com/google/googletest.git
RUN mkdir googletest/build

WORKDIR /usr/src/app/googletest/build

RUN cmake .. \
    && make \
    && make install \
    && rm -rf /usr/src/app/googletest

WORKDIR /usr/src/app

COPY . .
RUN mkdir obj

RUN make

CMD [ "./main" ] 
```

### 生成文件

```
CXX = g++
CXXFLAGS = -std=c++17 -Wall -I h -I /usr/local/include/gtest/ -c
LXXFLAGS = -std=c++17 -I h -pthread
OBJECTS = ./obj/program.o ./obj/main.o ./obj/program_unittest.o
GTEST = /usr/local/lib/libgtest.a
TARGET = main

$(TARGET): $(OBJECTS)
    $(CXX) $(LXXFLAGS) -o $(TARGET) $(OBJECTS) $(GTEST)
./obj/program.o: ./cpp/program.cpp
    $(CXX) $(CXXFLAGS) ./cpp/program.cpp -o ./obj/program.o
./obj/program_unittest.o: ./cpp/program_unittest.cpp
    $(CXX) $(CXXFLAGS) ./cpp/program_unittest.cpp -o ./obj/program_unittest.o
./obj/main.o: ./cpp/main.cpp
    $(CXX) $(CXXFLAGS) ./cpp/main.cpp -o ./obj/main.o
clean:
    rm -fv $(TARGET) $(OBJECTS) 
```

### cpp/maincpp

```
#include <iostream>
#include "program.h"
#include "gtest/gtest.h"

int main(int argc, char **argv)
{
    ::testing::InitGoogleTest(&argc, argv);
    std::cout << "RUNNING TESTS ..." << std::endl;
    int ret{RUN_ALL_TESTS()};
    if (!ret)
        std::cout << "<<<SUCCESS>>>" << std::endl;
    else
        std::cout << "FAILED" << std::endl;
    return 0;
} 
```

### cpp/程序.cpp

```
#include "program.h"

// Returns n! (the factorial of n).  For negative n, n! is defined to be 1.
int Factorial(int n)
{
    int result = 1;
    for (int i = 1; i <= n; i++)
    {
        result *= i;
    }

    return result;
}

// Returns true if and only if n is a prime number.
bool IsPrime(int n)
{
    // Trivial case 1: small numbers
    if (n <= 1)
        return false;

    // Trivial case 2: even numbers
    if (n % 2 == 0)
        return n == 2;

    // Now, we have that n is odd and n >= 3.

    // Try to divide n by every odd number i, starting from 3
    for (int i = 3;; i += 2)
    {
        // We only have to try i up to the square root of n
        if (i > n / i)
            break;

        // Now, we have i <= n/i < n.
        // If n is divisible by i, n is not prime.
        if (n % i == 0)
            return false;
    }

    // n has no integer factor in the range (1, n), and thus is prime.
    return true;
} 
```

### cpp/program_unittest.cpp

```
#include <limits.h>
#include "program.h"
#include "gtest/gtest.h"
namespace
{

// Tests Factorial().

// Tests factorial of negative numbers.
TEST(FactorialTest, Negative)
{
    // This test is named "Negative", and belongs to the "FactorialTest"
    // test case.
    EXPECT_EQ(1, Factorial(-5));
    EXPECT_EQ(1, Factorial(-1));
    EXPECT_GT(Factorial(-10), 0);

}

// Tests factorial of 0.
TEST(FactorialTest, Zero)
{
    EXPECT_EQ(1, Factorial(0));
}

// Tests factorial of positive numbers.
TEST(FactorialTest, Positive)
{
    EXPECT_EQ(1, Factorial(1));
    EXPECT_EQ(2, Factorial(2));
    EXPECT_EQ(6, Factorial(3));
    EXPECT_EQ(40320, Factorial(8));
}

// Tests IsPrime()

// Tests negative input.
TEST(IsPrimeTest, Negative)
{
    // This test belongs to the IsPrimeTest test case.

    EXPECT_FALSE(IsPrime(-1));
    EXPECT_FALSE(IsPrime(-2));
    EXPECT_FALSE(IsPrime(INT_MIN));
}

// Tests some trivial cases.
TEST(IsPrimeTest, Trivial)
{
    EXPECT_FALSE(IsPrime(0));
    EXPECT_FALSE(IsPrime(1));
    EXPECT_TRUE(IsPrime(2));
    EXPECT_TRUE(IsPrime(3));
}

// Tests positive input.
TEST(IsPrimeTest, Positive)
{
    EXPECT_FALSE(IsPrime(4));
    EXPECT_TRUE(IsPrime(5));
    EXPECT_FALSE(IsPrime(6));
    EXPECT_TRUE(IsPrime(23));
} 
```

### h/程序.h

```
#ifndef GTEST_PROGRAM_H_
#define GTEST_PROGRAM_H_

// Returns n! (the factorial of n).  For negative n, n! is defined to be 1.
int Factorial(int n);

// Returns true if and only if n is a prime number.
bool IsPrime(int n);

#endif // GTEST_PROGRAM_H_ 
```

`cpp/program.cpp`和`h/program.h`文件来自`googletest`repo[样本 1](https://github.com/google/googletest/tree/master/googletest/samples)。`Dockerfile`改编自[这里](https://github.com/srz-zumix/docker-googletest/blob/master/Dockerfile)。

# xml - 复制命名空间的所有元素，仅此而已

> ID：15813724
> 
> 赞同：1
> 
> 时间：2013-04-04T14:13:36.293
> 
> 标签：xml, xslt, xml-namespaces

我们有一堆文件是 html 页面，但其中包含额外的 xml 元素（都以我们的公司名称“TLA”为前缀）为我现在正在重写的旧程序提供数据和结构。

示例表格：

```
<html >
<head>
    <title>Highly Simplified Example Form</title>
</head>
<body>
    <TLA:document xmlns:TLA="http://www.tla.com">
        <TLA:contexts>
            <TLA:context id="id_1" value=""></TLA:context>
        </TLA:contexts>
        <TLA:page>
            <TLA:question id="q_id_1">
                <table>
                    <tr>
                        <td>
                            <input id="input_id_1" type="text" />
                        </td>
                    </tr>
                </table>
            </TLA:question>
        </TLA:page>
        <!-- Repeat many times -->
    </TLA:document>
</body>
</html> 
```

我的任务是编写一个预处理器，它将提取所有“TLA”元素并忽略 html 元素

所需的 XML 输出：

```
<?xml version="1.0" encoding="utf-8" ?>
<TLA:document xmlns:TLA="http://www.tla.com">
    <TLA:contexts>
      <TLA:context id="id_1" value=""></TLA:context>
    </TLA:contexts>
    <TLA:page>
      <TLA:question  id="q_id_1">
      </TLA:question>
    </TLA:page>
    <!-- Repeat many times -->
</TLA:document> 
```

这对于 XSLT 应该是可行的，但我无法制定正确的代码。这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
    xmlns:tla="http://www.tla.com"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="tla:*">
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

这是提取我想要的元素（但不是它们的属性！），但也提取了 html 元素的文本属性和内容。如何排除 html 元素及其内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:51:46.987

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:tla="http://www.tla.com">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="text()" />

  <xsl:template match="tla:* | tla:*/@* | tla:*/text()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时（一旦添加了缺少的命名空间声明），结果是：

```
<TLA:document xmlns:TLA="http://www.tla.com">
  <TLA:contexts>
    <TLA:context id="id_1" value="" />
  </TLA:contexts>
  <TLA:page>
    <TLA:question id="q_id_1" />
  </TLA:page>
</TLA:document> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:35:49.023

你可以试试这样的...

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:tla="http://www.tla.com" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:apply-templates select="@*|node()"/>
    </xsl:template>

    <xsl:template match="tla:*">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates select="node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# c# - 在 ASP.NET MVC 中，重定向外部 URL 以运行服务

> ID：15813725
> 
> 赞同：0
> 
> 时间：2013-04-04T14:13:36.703
> 
> 标签：c#, .net, web-services, asp.net-mvc-4

我正在使用 MVC4 并且我有一个表单页面，当用户单击提交按钮时，我想获取所有信息并发送 Web 服务（在后台）并显示一个消息页面。一切正常，但在控制器页面中不运行此 url。没有任何错误，但不起作用。

```
return Redirect("http://ww.example.com./webservices/addlead.php?action=Exp&first_name=" + r.Name + "&last_name=" + r.Surname + "&phone=" + r.Telephone + "&hash=" + r.HashCode); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:15:32.277

您在 中缺少**w**`www`。

```
return Redirect("http://www.example.com/somepage") 
```

但是如果你想调用 web 服务来做某事，你最好创建它的代理类并使用它，你可以调用 web 服务。拨打电话，获取结果并将结果（适当的视图/json/其他类型）返回给用户。

您还可以查看[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)具有访问外部资源的方法的类。

# c++ - Mudflap 不合理地报告内存访问冲突

> ID：15813734
> 
> 赞同：0
> 
> 时间：2013-04-04T14:13:58.397
> 
> 标签：c++, debugging

在使用 mudflap 调试我的程序时，它报告了这个错误：

```
*******
mudflap violation 1 (unregister): time=1365083992.573241 ptr=0x20ce510 size=0
pc=0x7f745259d5f6
Nearby object 1: checked region begins 257B after and ends 257B after
mudflap object 0x20ce440: name=`malloc region'
bounds=[0x20cc4d0,0x20ce40f] size=8000 area=heap check=0r/0w liveness=0
alloc time=1365083992.572980 pc=0x7f745259da51
      /usr/lib/gcc/x86_64-pc-linux-gnu/4.6.3/libmudflap.so.0(__mf_register+0x41) [0x7f745259da51]
      /usr/lib/gcc/x86_64-pc-linux-gnu/4.6.3/libmudflap.so.0(__wrap_malloc+0xe2) [0x7f745259e752]
      /usr/lib/gcc/x86_64-pc-linux-gnu/4.6.3/libstdc++.so.6(_Znwm+0x1d) [0x7f7452348f9d]
      /usr/lib/gcc/x86_64-pc-linux-gnu/4.6.3/libstdc++.so.6(_Znam+0x9) [0x7f74523490b9]
number of nearby objects: 1
Neoprávněný přístup do paměti (SIGSEGV) 
```

经过一番测试，似乎

```
int *a[ 1000 ]; 
```

是合法的，而

```
int ** a = new int * [ 1000 ]; 
```

根据 Mudflap 不合法并产生上述错误。

第一个和第二个示例之间有什么区别（如果有）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:26:59.153

```
int *a[ 1000 ]; 
```

这是一个声明。它声明了一个包含 1000 个指针的数组`int`。把它想象成 1000 个小盒子，每个里面你可以放一个`int*`.

```
int ** a = new int * [ 1000 ]; 
```

这是一个声明。它声明了一个指向 的指针`int`，仅此而已。它只是一个小盒子，你可以在里面放一个`int**`.

但是，碰巧您正在使用*new-expression* :`int**`的结果初始化 this 的值。这会动态分配一个包含 1000 个指向 int 的指针的数组，然后为您提供指向其中第一个指针的指针。所以它给你一个，你用它来初始化。*`new int * [ 1000 ]``int**``a`*

 *在第一行中，声明了一个 s 数组，`int*`因此当它超出范围时将被销毁。然而，在第二行中，只`int**`声明了一个并且只有当它超出范围时才会被销毁*。*您动态分配的数组不会。我想你得到这个违规的原因是因为你没有破坏动态分配的对象。

你必须这样做：

```
delete[] a; 
```

规则是，无论何时使用`new`/ `new[]`，都应该有一个对应的`delete`/ `delete[]`。*

# xamarin.android - MVVMCross Databiding v3

> ID：15813737
> 
> 赞同：0
> 
> 时间：2013-04-04T14:14:02.017
> 
> 标签：xamarin.android, mvvmcross

任何人都可以使用与 mvvmcross v3 一起使用的转换器为我提供示例数据绑定吗？在 Xamarin.Android 上？谢谢你的帮助非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:56:51.663

ValueConversion 示例集应该为您提供很多使用[https://github.com/slodge/MvvmCross-Tutorials/tree/master/ValueConversion](https://github.com/slodge/MvvmCross-Tutorials/tree/master/ValueConversion)

# r - R Sweave“不运行”选项

> ID：15813738
> 
> 赞同：3
> 
> 时间：2013-04-04T14:14:04.537
> 
> 标签：r, latex, sweave

我在 R 中使用 Sweave 制作包小插图，并想知道是否有办法在 Sweave 标记中“不运行”某些代码，例如：

```
\documentclass{article}
\usepackage{Sweave}

\begin{document}

<<a>>=
source("http://bioconductor.org/biocLite.R")
biocLite("Rgraphviz",depend=TRUE)
@

<<<b>>=
x <- 1
cat(x, "\n")
@ 

\end{document} 
```

Sweave 中是否有不运行标签中的代码的选项 `<<a>>=`？（我可以简单地使用“逐字”而不是 Sweave 标记，但是对于 Rd 文件是否有类似“未运行”的内容？）我查看了 Sweave 用户手册中的选项，但没有找到我想要的.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T14:21:48.460

您可以`eval`在代码块上使用该选项。就像是 ：

```
<<a, eval=FALSE, echo=TRUE>>=
source("http://bioconductor.org/biocLite.R")
biocLite("Rgraphviz",depend=TRUE)
@ 
```

# php - MySQL - 选择用户不拥有的所有行

> ID：15813739
> 
> 赞同：0
> 
> 时间：2013-04-04T14:14:07.307
> 
> 标签：php, mysql, sql, join

我有一个小的 MySQL 问题。我想选择我的表中包含用户不拥有的数据的所有行（它是一个交换工具）。

例子：

```
id  |  owner  |  event
----------------------
1   |    4    |    3
2   |    5    |    3
3   |    3    |    2
4   |    5    |    6 
```

我是业主#4。我想查看除我已经拥有的事件之外的所有事件，所以我想得到如下结果：

```
event |  offered by
-------------------
2     |     3
6     |     5 
```

是否可以通过 SQL 进行选择，或者我是否必须选择所有用户自己的事件并`id`从结果中删除所有其他具有相同事件的事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T14:17:02.503

```
SELECT  a.event, a.owner AS `Offered By`
FROM    tableName a
WHERE   a.event NOT IN
        (
            SELECT  b.event
            FROM    TableName b
            WHERE   owner = 4
        ) 
```

或者通过使用`JOIN`我更喜欢的，

```
SELECT  a.event, a.owner AS `Offered By`
FROM    tableName a
        LEFT JOIN tableName b
            ON  a.event = b.event AND
                b.owner = 4
WHERE   b.event IS NULL 
```

*   [SQLFiddle 演示（*两个查询*）](http://www.sqlfiddle.com/#!2/2be85/2)

输出

```
╔═══════╦════════════╗
║ EVENT ║ OFFERED BY ║
╠═══════╬════════════╣
║     2 ║          3 ║
║     6 ║          5 ║
╚═══════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:16:31.243

```
SELECT event, offered_by FROM events_table WHERE owner <> 4 
```

`events`或者如果它们是 2 张桌子，例如`offers`

```
SELECT tb1.event, tb1.offered by FROM offers as tb1
INNER JOIN events as tb2 on tb1.event = tb2.event
WHERE tb2.owner <> 4 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T14:17:18.460

我只是在这里假设 php

```
SELECT event
FROM EXAMPLE_TABLE
WHERE owner NOT IN '$owner_id' 
```

# performance - kineticjs - 显示/隐藏画布缓慢由于事件侦听器？

> ID：15813742
> 
> 赞同：0
> 
> 时间：2013-04-04T14:14:10.693
> 
> 标签：performance, canvas, kineticjs, listeners

我正在开发一个具有动力学的网络应用程序。我有不同的“视图”每个视图都包含多个图层。每个分层包含图像/组/形状，但主要是图像。

当显示一个视图时，另一个视图将被隐藏（显然），并且显示的视图被构建（图像被创建并添加到分配的图层）如果尚未完成，以防止在网络开始时出现大量绘图-应用程序

+查看
| + 层
| | + 形状
| | + ..
| + 层
| + ...
...

随着我的项目的增长，我注意到在视图之间切换时会出现延迟。于是我开始寻找...

我想'也许大量图像会导致画布滞后'，所以我用放置在 DOM 中的图像（带背景的 div）替换了不需要在画布上的图像。

使用这两种方法都会有一个 moueUp 事件导致 200 毫秒的延迟！动力学中对代码的引用指向了这个方法：

```
Kinetic.DD._endDrag = function (evt){ ... } 
```

在单击的对象上未设置导致视图更改的拖动事件

当查看完整的动力学测试用例时，还有另一个事件；mouseMove 会导致 300 毫秒的延迟！kintec 中对代码的引用将我指向这部分：

```
that.content.addEventListener 
inside 
_bindContentEvents: function () 
```

评论说：

```
/**
* begin listening for events by adding event handlers
* to the container
*/ 
```

这些函数内部发生了什么？没什么，它只是闲置......这可以通过创建配置文件来证明改变视图的时间。95% 的 CPU 时间都花在了空闲上……

我被卡住了如何摆脱这种滞后，这使我的网络应用程序变得敏捷！（这是在桌面上，它也需要在移动设备（标签）上执行！！

# iis-7.5 - IIS 静态压缩：倾向于最小化带宽而不是延迟？

> ID：15813743
> 
> 赞同：1
> 
> 时间：2013-04-04T14:14:13.627
> 
> 标签：iis-7.5

如果我将 IIS 配置为对静态文件使用数据压缩，第一个客户端通常会收到未压缩的内容，而后面的客户端会收到压缩的内容。推测 IIS 在后台压缩文件并将其缓存以供以后请求。

但是，我希望第一个客户端也接收压缩内容。那就是：我更愿意用延迟换取带宽。有什么方法可以配置 IIS 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T07:26:49.103

嗯，它实际上工作方式有点不同。IIS 不会在后台压缩文件，但它有一个阈值来决定是否应该压缩内容。这可以防止它使用 CPU 资源和缓存存储来处理不常请求的内容。默认情况下，IIS 仅在 10 秒内收到两个对该内容的请求时才会压缩内容。

您可以通过更改web.config 中元素中的`frequentHitThreshold`和`frequentHitTimePeriod`属性来更改这些默认值（请参阅[iis.net 上的配置参考](http://www.iis.net/configreference/system.webserver/serverruntime)）。我尚未对其进行测试，但我希望仅设置为即可为您提供所需的结果。`<serverRuntime />``frequentHitThreshold``1`

```
<configuration>
  <system.webServer>
    <serverRuntime frequentHitThreshold="1" />
  </system.webServer>
</configuration> 
```

希望这可以帮助。

# cmake - cmake 不支持导入库？

> ID：15813746
> 
> 赞同：6
> 
> 时间：2013-04-04T14:14:22.610
> 
> 标签：cmake

当我尝试使用导入库时

```
 add_library(libname SHARED IMPORTED)
    set_property(TARGET libname PROPERTY IMPORTED_LOCATION /<foldername>/<sub-foldername>/lib") 
```

cmake 喊道：

> /CMakeLists.txt:28 (target_link_libraries) 处的 CMake 警告 (dev)：无法为不是由该项目构建的目标“libname”指定链接库。
> 
> CMake 不支持这一点，但它曾经意外地工作并且被允许兼容。
> 
> 未设置策略 CMP0016：如果只有参数不是目标，则 target_link_libraries() 报告错误。运行“cmake --help-policy CMP0016”以获取策略详细信息。使用 cmake_policy 命令设置策略并禁止显示此警告。此警告适用于项目开发人员。使用 -Wno-dev 来抑制它。

如果这是真的，那么将我的构建树中某处的库包含到另一个项目中的另一种最佳方法是什么。我有一个库设置，另一个地方有将使用这些库的可执行文件。通读 cmake 文档，感觉这将是最好的前进方式，但似乎它只是被支持的一个破碎部分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-21T11:00:56.980

`Cannot specify link libraries for target "libname" which is not built by this project`

当您使用`target_link_libraries`某个目标时，您正在指定如何构建它，但导入的库**已经**构建。CMake 告诉过你...

将导入的目标链接到可执行文件的示例：

```
add_library(boo SHARED IMPORTED)
set_target_properties(boo PROPERTIES IMPORTED_LOCATION "/path/to/boo/library")
add_executable(foo foo.cpp)
target_link_libraries(foo boo) 
```

*注意*：[使用导入的目标](https://gitlab.kitware.com/cmake/community/wikis/doc/tutorials/Exporting-and-Importing-Targets)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-08T22:12:44.257

在尝试将 Poco C++ 库导入我的项目时，我遇到了与 navderm 相同的错误`libPocoFoundation.so`，在尝试不同的解决方案失败后，我设法找到了一个对我有用的解决方案：

```
cmake_minimum_required(VERSION 3.5)
project(MyProject)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

add_library(PocoLib SHARED IMPORTED GLOBAL)

# It's important to specify the full path to the library you want to import
set_target_properties(PocoLib PROPERTIES IMPORTED_LOCATION "/usr/local/lib/Poco_1.7.2/lib/libPocoFoundation.so")

# create my executable
set(EXEC_SOURCE_FILES main.cpp)
add_executable(MyProject ${EXEC_SOURCE_FILES})

target_link_libraries(MyProject PocoLib) 
```

# mysql - 如何增加 LOAD DATA INFILE 查询的最大上传文件大小？

> ID：15813750
> 
> 赞同：1
> 
> 时间：2013-04-04T14:14:32.470
> 
> 标签：mysql, sql, mysqldump

我正在使用加载数据查询将文本文件加载到数据库中。上传文件大小高达 2GB 没有问题，但我无法上传超过 2GB 的文件。我的查询如下

```
LOAD DATA INFILE 'mytempfile' INTO TABLE feeds 
```

如何在 mysql 中增加我的最大上传文件大小？请指教..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T04:11:05.763

我得到了答案。我可以将大尺寸的 zip 文件拆分成小尺寸的多文件。如果我们加载大尺寸的文件数据库转储问题发生。它对我很好。干杯。

# vb.net - 确定 VB.NET 字体是否为固定宽度

> ID：15813751
> 
> 赞同：1
> 
> 时间：2013-04-04T14:14:36.533
> 
> 标签：vb.net, fonts

我想遍历一长串**字体**并将它们的状态**确定为****固定/非固定宽度**和**文本/符号**字体。

给定任意字体，是否有可能确定它是固定宽度还是可变宽度？它当然看起来不是一个简单的单一变量——可能需要进行一些测量。但是，我想避免像这样注册标志性或符号字体，这也可能不一定是属性。

# mysql - SQL 函数应该是大写还是小写？

> ID：15813756
> 
> 赞同：6
> 
> 时间：2013-04-04T14:14:40.427
> 
> 标签：mysql, sql, function, sql-function

我是 SQL 新手，我想知道编写函数的正确方法是什么。我知道像 SELECT 这样的语句的规范是大写的，但是函数的规范是什么？我见过人们用小写字母和其他大写字母写它们。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T14:15:55.490

对此没有规范，有标准，但这些标准可能因公司而异。

SQL 代码不区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:25:59.777

It depends on the function a bit, but there is no requirement. There is really no norm but some vendors have specific standards / grammar, which in their eyes aids with readability (/useability) of the code.

Usually 'built-in' functions (non vendor specific) are shown in uppercase.

```
/* On MySQL */
SELECT CURRENT_TIMESTAMP;
-> '2001-12-15 23:50:26' 
```

Vendor specific functions are usually shown in lowercase.

A good read, on functions in general, can be found [here](http://oreilly.com/catalog/sqlnut/chapter/ch04.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:18:03.530

通常你应该用大写写 SQL 代码（和 SQL 保留代码），用小写写字段和其他东西。但这不是必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:18:15.177

SQL 关键字通常是大写的，但没有一种“正确”的方式。小写也可以。（注意：许多人认为在 SQL 中使用大写关键字可以提高可读性，但并不是说使用小写字母很难阅读。）然而，在大多数情况下，没有人会避免使用类似以下内容：

```
SELECT * FROM `users` WHERE id="3" 
```

虽然，如果您愿意，这也可以：

```
select * from `users` where id='3' 
```

这是他们的清单。请注意，它们是大写的，但不是必需的：http: [//developer.mimer.com/validator/sql-reserved-words.tml](http://developer.mimer.com/validator/sql-reserved-words.tml)

这是我保存在“定期阅读的有趣文章”中的另一个好资源。它详细说明了一些应该考虑大小写的有趣实例：http: [//dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)

# java - 如何使用 itext api 找出 PDF 文件的 LineSeparator 坐标？

> ID：15813760
> 
> 赞同：1
> 
> 时间：2013-04-04T14:14:53.177
> 
> 标签：java, itext

我面临一个问题：我有一个包含 5 页数据的 PDF 文件。我想从该文件中提取数据。我能够找到文本的坐标，但我无法找到线条的坐标。

这是pdf样本

姓名 年龄 角色

* * *

Ranveer 22 工程师

* * *

实际上，这条线之前可能有很多细节，我想要线坐标，这样我就可以在那里停止我的循环坐标，这样它就可以在那条线之前获取所有细节。

所以我的问题是如何在 pdf 文件中找到任何行的坐标。

# bash - bash 中带有 mkfifo 的 gunzip

> ID：15813762
> 
> 赞同：1
> 
> 时间：2013-04-04T14:14:59.800
> 
> 标签：bash, unix, pipe, gunzip, mkfifo

我正在尝试对文件进行压缩，然后将结果保存在使用 mkfifo 创建的命名管道中，该管道最终将用于连接命令。我见过很多关于使用 mkfifo 压缩东西的例子，但在这种情况下几乎没有关于 gunzip 的例子。我的问题概述是：

获取两个 *.gz 文件的内容，而无需将它们实际解压缩到磁盘。为此，请捕获 gunzip -c *.gz 的流（这是我想使用命名管道作为保存流内容的文件的地方）。获取两个命名管道并对它们执行连接。Unix代码中的简化想法有点像......

```
mkfifo pipe1
mkfifio pipe2

gunzip -c fileA.gz > pipe1 &
gunzip -c fileB.gz > pipe2 &

join pipe1 pipe2

rm pipe1 pipe2 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:17:07.303

您实际上并不需要命名管道。Bash 有一种特殊的语法，可以在一个命令中执行此操作：

```
join <(gunzip -c fileA.gz) <(gunzip -c fileB.gz) 
```

# ios - 在主线程上发布 NSNotification

> ID：15813764
> 
> 赞同：74
> 
> 时间：2013-04-04T14:15:05.393
> 
> 标签：ios, objective-c, cocoa, nsnotificationcenter

我发现以下代码片段允许`NSNotification`从任何后台线程发布到主线程。我想知道这是否是一种安全且可接受的做法？

```
dispatch_async(dispatch_get_main_queue(),^{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ImageRetrieved" 
                                                        object:nil 
                                                      userInfo:imageDict];
}); 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-04T14:19:14.893

**是的，你可以**。

通常，您希望在 main 上发送 NSNotifications，尤其是当它们触发 UI 活动（例如关闭模式登录对话框）时。

[向特定线程发送通知](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Articles/Threading.html)

> 定期通知中心在发布通知的线程上发送通知。分布式通知中心在主线程上传递通知。有时，您可能需要在由您而不是通知中心确定的特定线程上传递通知。例如，如果在后台线程中运行的对象正在侦听来自用户界面的通知，例如窗口关闭，您希望在后台线程而不是主线程中接收通知。在这些情况下，您必须捕获在默认线程上传递的通知并将它们重定向到适当的线程。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-04T14:17:45.350

# 是的

这是 - 您正在进入主线程并发布您的通知。没有比这更安全的了。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-11-11T10:28:43.923

**是的**

**斯威夫特 2**语法

```
dispatch_async(dispatch_get_main_queue()) {
    NSNotificationCenter.defaultCenter().postNotificationName("updateSpinner", object: nil, userInfo: ["percent":15])
} 
```

**斯威夫特 3**语法

```
DispatchQueue.main.async {
    NotificationCenter.default.post(name: "updateSpinner", object: nil, userInfo: ["percent":15])
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-03-15T04:03:34.523

沿着这条线的某个地方，这成为可能：

```
addObserver(forName:object:queue:using:) 
```

这是[here](https://developer.apple.com/reference/foundation/notificationcenter/1411723-addobserver)，但重点是`queue`对象。

> 应该添加块的操作队列。如果您通过`nil`，则该块在发布线程上同步运行。

那么如何获取主runloop对应的队列呢？

`let mainQueue = OperationQueue.main`

注意：这是您订阅通知的时间，因此您只需执行一次即可。每次通话都这样做是非常多余的。

# java - 在 Google Android 中以编程方式连接到 WiFi？

> ID：15813767
> 
> 赞同：2
> 
> 时间：2013-04-04T14:15:09.990
> 
> 标签：java, android, networking, wifi

我正在尝试按照基本的 Android Wifi 教程在我的应用程序中启用 wifi 功能，但是每当我尝试执行它时 - wifi 连接永远不会建立。

我完全按照 SO 教程/示例进行操作，在 eclipse 中没有错误或问题，我启动了应用程序......然后噗：什么也没发生。

附言

我的 logcat 中有一些有趣的活动 - 我觉得它可以解释为什么我无法连接。

教程/示例来源：

[如何以编程方式连接到 Android 中的特定 Wi-Fi 网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)

来源：

```
import java.util.List;
import android.app.Activity;    
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.util.Log;
import android.content.Context; 

public class Connect extends Activity  {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.connect);
        String networkSSID = "ANDRE-PC_NETWORK";
        String networkPass = "<password-ommited>";
        WifiConfiguration conf = new WifiConfiguration();
        conf.SSID = "\"" + networkSSID + "\"";   //ssid must be in quotes
        conf.wepKeys[0] = "\"" + networkSSID + "\""; ; 
        conf.wepTxKeyIndex = 0;
        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40); 
        conf.preSharedKey = "\""+ networkPass +"\"";
        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);

        WifiManager wifiManager = (WifiManager)getSystemService(WIFI_SERVICE); 
        wifiManager.addNetwork(conf);

        List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
        for( WifiConfiguration i : list ) {
            if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
                 wifiManager.disconnect();
                 wifiManager.enableNetwork(i.networkId, true);
                 wifiManager.reconnect();
                 break;
            }           
         }
    }} 
```

如果您在我的 logcat 中看到任何有趣的内容 - 请告诉我！

我什至不知道从哪里开始...

LOGCAT w 十六进制键：

```
04-04 10:47:29.712: W/SignalStrength(675): getCdmaLevel =4
04-04 10:47:29.712: W/SignalStrength(675): getEvdoLevel =4
04-04 10:47:29.712: W/SignalStrength(675): getLevel=4 (SignalStrength: 99 0 -76 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4401)
04-04 10:47:29.712: W/SignalStrength(852): getCdmaLevel =4
04-04 10:47:29.712: W/SignalStrength(852): getEvdoLevel =4
04-04 10:47:29.712: W/SignalStrength(852): getLevel=4 (SignalStrength: 99 0 -76 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4401)
04-04 10:47:29.712: W/SignalStrength(852): getCdmaLevel =4
04-04 10:47:29.712: W/SignalStrength(852): getEvdoLevel =4
04-04 10:47:29.712: W/SignalStrength(852): getLevel=4 (SignalStrength: 99 0 -76 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4401)
04-04 10:47:29.712: D/STATUSBAR-NetworkController(852): onSignalStrengthsChanged signalStrength=SignalStrength: 99 0 -76 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4401 level=4
04-04 10:47:29.712: W/AlarmManager(675): FACTORY_ON= 0
04-04 10:47:29.722: W/SignalStrength(675): getDbm=-76
04-04 10:47:29.722: W/SignalStrength(675): getCdmaAsuLevel=8
04-04 10:47:29.722: W/SignalStrength(675): getEvdoAsuLevel=2
04-04 10:47:29.722: W/SignalStrength(675): getAsuLevel=2
04-04 10:47:31.313: W/PowerManagerService(675): Timer 0x7->0x3|0x0
04-04 10:47:31.313: I/PowerManagerService(675): Ulight 0x7->0x3|0x0
04-04 10:47:31.313: D/LightsService(675): setLightLocked is called
04-04 10:47:31.624: E/SMD(187): DCD ON
04-04 10:47:31.644: D/PowerManagerService(675): lightSensorChangedLocked value=73 immediate=false
04-04 10:47:31.644: D/PowerManagerService(675): getAutoBrightnessValue : in bound ( 45 < 73 <= 1372 )
04-04 10:47:31.644: D/PowerManagerService(675): getAutoBrightnessValue : in bound ( 45 < 73 <= 1372 )
04-04 10:47:31.644: D/PowerManagerService(675): lcdValue 130
04-04 10:47:31.644: D/PowerManagerService(675): buttonValue 130
04-04 10:47:31.644: D/PowerManagerService(675): keyboardValue 0
04-04 10:47:31.644: D/PowerManagerService(675): lightSensorChangedLocked : mKeyboardLight : 0
04-04 10:47:32.254: W/SignalStrength(675): getCdmaLevel =5
04-04 10:47:32.254: W/SignalStrength(675): getEvdoLevel =4
04-04 10:47:32.254: W/SignalStrength(675): getLevel=4 (SignalStrength: 99 0 -69 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4501)
04-04 10:47:32.254: W/SignalStrength(852): getCdmaLevel =5
04-04 10:47:32.254: W/SignalStrength(852): getEvdoLevel =4
04-04 10:47:32.254: W/SignalStrength(852): getLevel=4 (SignalStrength: 99 0 -69 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4501)
04-04 10:47:32.254: W/SignalStrength(852): getCdmaLevel =5
04-04 10:47:32.254: W/SignalStrength(852): getEvdoLevel =4
04-04 10:47:32.254: W/SignalStrength(852): getLevel=4 (SignalStrength: 99 0 -69 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4501)
04-04 10:47:32.254: D/STATUSBAR-NetworkController(852): onSignalStrengthsChanged signalStrength=SignalStrength: 99 0 -69 -25 -92 -25 5 99 2147483647 2147483647 2147483647 2147483647 cdma 0x4501 level=4
04-04 10:47:32.264: W/SignalStrength(675): getDbm=-69
04-04 10:47:32.264: W/SignalStrength(675): getCdmaAsuLevel=16
04-04 10:47:32.264: W/SignalStrength(675): getEvdoAsuLevel=2
04-04 10:47:32.264: W/SignalStrength(675): getAsuLevel=2
04-04 10:47:32.264: W/AlarmManager(675): FACTORY_ON= 0
04-04 10:47:33.055: I/wpa_supplicant(1553): Scan requested (ret=0) - scan timeout 30 seconds
04-04 10:47:34.427: E/MP-Decision(1542): UP Ld:88 Nw:1.990000 Tw:140 rq:1.500000 seq:147.000000
04-04 10:47:34.437: D/dalvikvm(29031): GC_CONCURRENT freed 103K, 87% free 565K/4096K, paused 1ms+0ms, total 4ms
04-04 10:47:34.617: E/SMD(187): DCD ON
04-04 10:47:34.757: E/MP-Decision(1542): DOWN Ld:29 Ns:1.100000 Ts:190 rq:1.000000 seq:195.000000
04-04 10:47:35.147: D/PowerManagerService(675): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1026000  uid : 1000  pid : 675  tag : ActivityManager
04-04 10:47:35.147: W/ActivityManager(675): mDVFSLock.acquire()
04-04 10:47:35.167: D/Launcher.HomeFragment(1074): onPause
04-04 10:47:35.167: D/widget(1074): [MSC_HERO_Accu_JB]>>> WC:1232 [0:0]  fireOP
04-04 10:47:35.167: D/Launcher(1074): onPause, Launcher: 1105102976
04-04 10:47:35.167: D/widget(1074): [MSC_HERO_Accu_JB]>>> WC:1037 [0:0]  onPause 
04-04 10:47:35.167: V/WindowManager(675): rotationForOrientationLw(orient=-1, last=0); user=0  mLidState=-1 mDockMode=0 mHdmiPlugged=false mAccelerometerDefault=false sensorRotation=-1
04-04 10:47:35.187: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.197: D/dalvikvm(29049): GC_CONCURRENT freed 104K, 86% free 588K/4096K, paused 0ms+1ms, total 3ms
04-04 10:47:35.197: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.217: D/Launcher(1074): onTrimMemory. Level: 20
04-04 10:47:35.237: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.247: I/Adreno200-EGLSUB(192): <CreateImage:897>: Android Image
04-04 10:47:35.247: I/Adreno200-EGLSUB(192): <GetImageAttributes:1162>: RGBX_8888
04-04 10:47:35.257: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.257: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.268: I/Adreno200-EGLSUB(192): <CreateImage:897>: Android Image
04-04 10:47:35.268: I/Adreno200-EGLSUB(192): <GetImageAttributes:1106>: RGBA_8888
04-04 10:47:35.268: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.298: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.358: E/MP-Decision(1542): UP Ld:98 Nw:1.990000 Tw:140 rq:1.500000 seq:188.000000
04-04 10:47:35.358: E/wpa_supplicant(1553): Line 0: Too long WEP key 0 '"73:75:70:65:72:6d:61:6e"'.
04-04 10:47:35.358: E/WifiConfigStore(675): failed to set wep_key0: "73:75:70:65:72:6d:61:6e"
04-04 10:47:35.358: E/WifiConfigStore(675): Failed to set a network variable, removed network: 10
04-04 10:47:35.388: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.388: D/STATUSBAR-StatusBarManagerService(675): setSystemUiVisibility(0x0)
04-04 10:47:35.388: D/STATUSBAR-StatusBarManagerService(675): manageDisableList what=0x0 pkg=WindowManager.LayoutParams
04-04 10:47:35.408: I/ClipboardServiceEx(675): Send intent for dismiss clipboard dialog inside hideCurrentInputLocked() !
04-04 10:47:35.458: E/Sensors(675): accelHandler 2.301614 0.295785 9.055569
04-04 10:47:35.458: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.458: I/Adreno200-EGLSUB(192): <CreateImage:897>: Android Image
04-04 10:47:35.458: I/Adreno200-EGLSUB(192): <GetImageAttributes:1162>: RGBX_8888
04-04 10:47:35.468: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.468: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.598: D/PowerManagerService(675): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
04-04 10:47:35.598: D/Launcher.HomeFragment(1074): onStop
04-04 10:47:35.598: D/Launcher(1074): onStop, Launcher: 1105102976
04-04 10:47:35.598: W/ActivityManager(675): mDVFSLock.release()
04-04 10:47:35.608: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.658: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.668: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.668: D/KeyguardViewMediator(675): setHidden false
04-04 10:47:35.928: E/MP-Decision(1542): DOWN Ld:19 Ns:1.100000 Ts:190 rq:0.000000 seq:217.000000
04-04 10:47:36.379: I/wpa_supplicant(1553): nl80211: Received scan results (3 BSSes)
04-04 10:47:36.379: I/wpa_supplicant(1553): wlan0: CTRL-EVENT-NO-CONNECTION
04-04 10:47:36.379: I/wpa_supplicant(1553): wpa_supplicant_req_new_scan: wpa_s->global->bStopPeriodicScan : 0, timeout_sec : 8
04-04 10:47:36.379: D/Tethering(675): interfaceLinkStateChanged wlan0, true
04-04 10:47:36.379: D/Tethering(675): interfaceStatusChanged wlan0, true
04-04 10:47:36.389: W/AlarmManager(675): FACTORY_ON= 0
04-04 10:47:36.399: W/AlarmManager(675): FACTORY_ON= 0
04-04 10:47:37.620: E/SMD(187): DCD ON
04-04 10:47:39.122: I/rmt_storage(128): rmt_storage_rw_iovec_cb: /boot/modem_fs2: clnt_h=0x2: req_h=0x6ae msg_id=3: R/W request received
04-04 10:47:39.122: I/rmt_storage(128): wakelock acquired: 1, error no: 110
04-04 10:47:39.122: I/rmt_storage(128): rmt_storage_client_thread: /boot/modem_fs2: clnt_h=0x2 Unblock worker thread (th_id: 1103109840)
04-04 10:47:39.122: D/QMI_FW(128): QCSI: QMI_CSI_RX: cntl_flag - 00, txn_id - 0356, msg_id - 0003, msg_len - 002b
04-04 10:47:39.222: D/QMI_FW(128): QCSI: xport_handle_event[16]
04-04 10:47:39.302: I/rmt_storage(128): rmt_storage_client_thread: /boot/modem_fs2: clnt_h=0x2: req_h=0x6ae msg_id=3: Bytes written = 3145216
04-04 10:47:39.302: I/rmt_storage(128): rmt_storage_client_thread: /boot/modem_fs2: clnt_h=0x2: req_h=0x6ae msg_id=3: Bytes written = 512
04-04 10:47:39.302: I/rmt_storage(128): rmt_storage_client_thread: /boot/modem_fs2: clnt_h=0x2: req_h=0x6ae msg_id=3: Send response: res=0 err=0
04-04 10:47:39.302: I/rmt_storage(128): rmt_storage_client_thread: /boot/modem_fs2: clnt_h=0x2 About to block rmt_storage client thread (th_id: 1103109840) wakelock released: 1, error no: 0
04-04 10:47:39.302: D/QMI_FW(128): QCSI: QMI_CSI_TX: cntl_flag - 02, txn_id - 0356, msg_id - 0003, msg_len - 0007
04-04 10:47:39.302: D/QMI_FW(128): QCSI: Sent[16]: 14 bytes to port 1280
04-04 10:47:39.452: D/PowerManagerService(675): lightSensorChangedLocked value=69 immediate=false
04-04 10:47:39.452: D/PowerManagerService(675): getAutoBrightnessValue : in bound ( 45 < 69 <= 1372 )
04-04 10:47:39.452: D/PowerManagerService(675): getAutoBrightnessValue : in bound ( 45 < 69 <= 1372 )
04-04 10:47:39.452: D/PowerManagerService(675): lcdValue 130
04-04 10:47:39.452: D/PowerManagerService(675): buttonValue 130
04-04 10:47:39.452: D/PowerManagerService(675): keyboardValue 0
04-04 10:47:39.452: D/PowerManagerService(675): lightSensorChangedLocked : mKeyboardLight : 0
04-04 10:47:39.762: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 10:47:40.623: E/SMD(187): DCD ON 
```

LOGCAT：没有十六进制的键

```
04-04 11:27:25.210: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 11:27:25.240: E/SMD(187): DCD ON
04-04 11:27:26.741: I/wpa_supplicant(1553): State: DISCONNECTED -> SCANNING
04-04 11:27:26.741: I/wpa_supplicant(1553): CTRL-EVENT-STATE-CHANGE id=10 state=3 BSSID=00.00.00
04-04 11:27:26.741: I/wpa_supplicant(1553): 414E4452452D50435F4E4554574F524B
04-04 11:27:26.781: I/wpa_supplicant(1553): Scan requested (ret=0) - scan timeout 30 seconds
04-04 11:27:27.182: D/ActivityThread(31678): setTargetHeapUtilization:0.25
04-04 11:27:27.182: D/ActivityThread(31678): setTargetHeapIdealFree:8388608
04-04 11:27:27.182: D/ActivityThread(31678): setTargetHeapConcurrentStart:2097152
04-04 11:27:27.202: I/ActivityThread(31678): Pub com.wssyncmldm.ContentProvider: com.wssyncmldm.db.sql.XDMDbContentProvider
04-04 11:27:27.212: I/DBG_DM(31678): [][Line:67][onCreate] 
04-04 11:27:27.232: I/DBG_DM(31678): [v5_1209_3_1][Line:686][xdmGetCheckWifiOnlyModel] isWifiOnly : false
04-04 11:27:27.232: I/DBG_DM(31678): [v5_1209_3_1][Line:701][xdmGetCheckDataOnly] Voice : true
04-04 11:27:27.242: I/DBG_DM(31678): [v5_1209_3_1][Line:702][xdmGetCheckDataOnly] SMS : true
04-04 11:27:27.242: I/DBG_DM(31678): [v5_1209_3_1][Line:709][xdmGetCheckDataOnly] isDataOnly : false
04-04 11:27:27.242: D/dalvikvm(675): WAIT_FOR_CONCURRENT_GC blocked 0ms
04-04 11:27:27.422: D/dalvikvm(675): GC_EXPLICIT freed 58K, 28% free 38507K/53191K, paused 7ms+16ms, total 179ms
04-04 11:27:27.422: I/DBG_DM(31678): [v5_1209_3_1][Line:52][onCreate] DMApplication Start !
04-04 11:27:27.432: I/DBG_DM(31678): [v5_1209_3_1][Line:1779][xdmGetRootingPrefValue] 0
04-04 11:27:27.432: I/DBG_DM(31678): [v5_1209_3_1][Line:86][xdmGetRootingFeature] Default : false
04-04 11:27:27.432: I/DBG_DM(31678): [v5_1209_3_1][Line:172][xdmAgentTaskHandler] XEVENT_OS_INITIALIZED
04-04 11:27:27.442: I/DBG_DM(31678): [v5_1209_3_1][Line:148][xdmAgentSetSyncMode] nSync = 0
04-04 11:27:27.452: I/DBG_DM(31678): [v5_1209_3_1][Line:546][xdmGetEnableLiveDemoFromCSCFeature] enable LiveDemo : false
04-04 11:27:27.462: I/DBG_DM(31678): [v5_1209_3_1][Line:1860][xdbDMffs_Init] xdbDMffs_Init
04-04 11:27:27.472: I/DBG_DM(31678): [v5_1209_3_1][Line:372][xdmInitExternalStorageState] 
04-04 11:27:27.482: I/DBG_DM(31678): [v5_1209_3_1][Line:427][xdmInitExternalStorageState] bExternalStorageAvailable [true]
04-04 11:27:27.482: I/DBG_DM(31678): [v5_1209_3_1][Line:428][xdmInitExternalStorageState] bExternalSDStorageAvailable [false]
04-04 11:27:27.502: I/DBG_DM(31678): [v5_1209_3_1][Line:182][xdmAgentTaskHandler] XEVENT_PHONEBOOK_INITIALIZED
04-04 11:27:27.522: I/DBG_DM(31678): [v5_1209_3_1][Line:1084][onCallStateChanged] >>>>>>>>>>> onCallStateChanged
04-04 11:27:27.522: I/DBG_DM(31678): [v5_1209_3_1][Line:1104][onCallStateChanged] >>>>>>>>>>> CALL_STATE_IDLE
04-04 11:27:27.532: I/DBG_DM(31678): [v5_1209_3_1][Line:1591][xdmProtoIsWIFIConnected] WiFi DisConnected
04-04 11:27:27.532: I/DBG_DM(31678): [v5_1209_3_1][Line:1591][xdmProtoIsWIFIConnected] WiFi DisConnected
04-04 11:27:28.023: E/Watchdog(675): !@Sync 1425
04-04 11:27:28.243: E/SMD(187): DCD ON
04-04 11:27:28.403: D/dalvikvm(31695): GC_CONCURRENT freed 103K, 87% free 565K/4096K, paused 0ms+1ms, total 5ms
04-04 11:27:29.264: D/PowerManagerService(675): acquireDVFSLockLocked : type : DVFS_MIN_LIMIT  frequency : 1026000  uid : 1000  pid : 675  tag : ActivityManager
04-04 11:27:29.264: W/ActivityManager(675): mDVFSLock.acquire()
04-04 11:27:29.274: D/dalvikvm(31708): GC_CONCURRENT freed 104K, 86% free 589K/4096K, paused 0ms+0ms, total 4ms
04-04 11:27:29.745: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 11:27:30.105: I/wpa_supplicant(1553): nl80211: Received scan results (4 BSSes)
04-04 11:27:30.105: I/wpa_supplicant(1553): wlan0: CTRL-EVENT-NO-CONNECTION
04-04 11:27:30.105: I/wpa_supplicant(1553): wpa_supplicant_req_new_scan: wpa_s->global->bStopPeriodicScan : 0, timeout_sec : 8
04-04 11:27:30.105: W/AlarmManager(675): FACTORY_ON= 0
04-04 11:27:30.115: D/Tethering(675): interfaceLinkStateChanged wlan0, true
04-04 11:27:30.115: D/Tethering(675): interfaceStatusChanged wlan0, true
04-04 11:27:30.115: W/AlarmManager(675): FACTORY_ON= 0
04-04 11:27:30.265: D/PowerManagerService(675): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
04-04 11:27:30.265: W/ActivityManager(675): mDVFSLock.release()
04-04 11:27:30.856: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 11:27:31.246: E/SMD(187): DCD ON
04-04 11:27:34.249: E/SMD(187): DCD ON
04-04 11:27:34.530: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 11:27:35.651: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 11:27:37.153: D/dalvikvm(193): WAIT_FOR_CONCURRENT_GC blocked 0ms
04-04 11:27:37.223: D/ActivityThread(31724): setTargetHeapUtilization:0.25
04-04 11:27:37.223: D/ActivityThread(31724): setTargetHeapIdealFree:8388608
04-04 11:27:37.223: D/ActivityThread(31724): setTargetHeapConcurrentStart:2097152
04-04 11:27:37.233: D/dalvikvm(193): GC_EXPLICIT freed 38K, 43% free 12111K/20995K, paused 4ms+43ms, total 74ms
04-04 11:27:37.233: D/dalvikvm(193): WAIT_FOR_CONCURRENT_GC blocked 0ms
04-04 11:27:37.243: E/SMD(187): DCD ON
04-04 11:27:37.293: D/dalvikvm(193): GC_EXPLICIT freed <1K, 43% free 12111K/20995K, paused 5ms+3ms, total 59ms
04-04 11:27:37.293: I/nmc-java(31724): loadLibrary >>> java.library.path=/vendor/lib:/system/lib
04-04 11:27:37.293: I/nmc-java(31724): loadLibrary >>> data directory=/data
04-04 11:27:37.293: I/nmc-java(31724): loadLibrary >>> packageName=com.nuance.nmc.sihome.metropcs
04-04 11:27:37.293: I/nmc-java(31724): loadLibrary >>> Loading '/data/data/com.nuance.nmc.sihome.metropcs/lib/libnmc.so' ...
04-04 11:27:37.293: E/nmc-java(31724): loadLibrary >>> Unsatisfied link error: Cannot load library: load_library[1093]: Library '/data/data/com.nuance.nmc.sihome.metropcs/lib/libnmc.so' not found
04-04 11:27:37.293: I/nmc-java(31724): loadLibrary >>> Loading '/system/lib/libnmc.so' ...
04-04 11:27:37.303: D/dalvikvm(193): WAIT_FOR_CONCURRENT_GC blocked 0ms
04-04 11:27:37.333: D/dalvikvm(193): GC_EXPLICIT freed <1K, 43% free 12111K/20995K, paused 2ms+3ms, total 32ms
04-04 11:27:38.154: I/wpa_supplicant(1553): Scan requested (ret=0) - scan timeout 30 seconds
04-04 11:27:39.455: V/AlarmManager(675): waitForAlarm result :4
04-04 11:27:39.455: V/AlarmManager(675): trigger ELAPSED_REALTIME_WAKEUP or RTC_WAKEUP
04-04 11:27:40.016: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 11:27:40.246: E/SMD(187): DCD ON
04-04 11:27:40.536: I/DBG_DM(31678): [v5_1209_3_1][Line:434][xdmInitAdpWaitBearerSetting] waits 13 sec
04-04 11:27:40.536: I/DBG_DM(31678): [v5_1209_3_1][Line:3343][xdbGetFUMOStatus] xdbGetFUMOStatus : 0
04-04 11:27:40.546: I/DBG_DM(31678): [v5_1209_3_1][Line:1759][xdmGetUpdateReport] wssGetUpdateReport : 0
04-04 11:27:40.546: I/DBG_DM(31678): [v5_1209_3_1][Line:207][xdmAgentTaskHandler] XEVENT_DM_INIT
04-04 11:27:40.566: I/SysScopeVerifier(31678): SHA1-Digest :hI/erQ2i2NX0ldg3pB2Zct4P4i8=
04-04 11:27:40.566: I/SysScopeVerifier(31678): SHA1-Digest :MqtHJr/par3LL1huEuNvd7lYic0=
04-04 11:27:40.606: I/SysScopeVerifier(31678): classes.dexMqtHJr/par3LL1huEuNvd7lYic0=
04-04 11:27:40.616: I/SysScopeVerifier(31678): lib/armeabi/libcordon.sohI/erQ2i2NX0ldg3pB2Zct4P4i8=
04-04 11:27:40.626: E/DBG_DM(31678): Warning!!! [v5_1209_3_1][Line:1818][xdmCheckSystemRooting] Device is ok
04-04 11:27:40.626: I/DBG_DM(31678): [v5_1209_3_1][Line:442][xdmInitAdpWaitSystemRootingCheck] Check completed.
04-04 11:27:40.626: I/DBG_DM(31678): [v5_1209_3_1][Line:1591][xdmProtoIsWIFIConnected] WiFi DisConnected
04-04 11:27:40.626: I/DBG_DM(31678): [v5_1209_3_1][Line:54][xdmInitAdpGetNetStatus] SIM : Network unknown
04-04 11:27:40.626: E/DBG_DM(31678): Warning!!! [v5_1209_3_1][Line:214][xdmAgentTaskHandler] Network Status is not ready. DM Not Initialized
04-04 11:27:40.636: I/DBG_DM(31678): [v5_1209_3_1][Line:983][xdmGetTopActivityName] TopActivity : com.nfc.linked.Connect
04-04 11:27:40.636: I/DBG_DM(31678): [v5_1209_3_1][Line:207][xdmAgentTaskHandler] XEVENT_DM_INIT
04-04 11:27:40.646: I/SysScopeVerifier(31678): SHA1-Digest :hI/erQ2i2NX0ldg3pB2Zct4P4i8=
04-04 11:27:40.646: I/SysScopeVerifier(31678): SHA1-Digest :MqtHJr/par3LL1huEuNvd7lYic0=
04-04 11:27:40.666: I/SysScopeVerifier(31678): classes.dexMqtHJr/par3LL1huEuNvd7lYic0=
04-04 11:27:40.676: I/SysScopeVerifier(31678): lib/armeabi/libcordon.sohI/erQ2i2NX0ldg3pB2Zct4P4i8=
04-04 11:27:40.676: E/DBG_DM(31678): Warning!!! [v5_1209_3_1][Line:1818][xdmCheckSystemRooting] Device is ok
04-04 11:27:40.676: I/DBG_DM(31678): [v5_1209_3_1][Line:442][xdmInitAdpWaitSystemRootingCheck] Check completed.
04-04 11:27:40.686: I/DBG_DM(31678): [v5_1209_3_1][Line:1591][xdmProtoIsWIFIConnected] WiFi DisConnected
04-04 11:27:40.686: I/DBG_DM(31678): [v5_1209_3_1][Line:54][xdmInitAdpGetNetStatus] SIM : Network unknown
04-04 11:27:40.686: E/DBG_DM(31678): Warning!!! [v5_1209_3_1][Line:214][xdmAgentTaskHandler] Network Status is not ready. DM Not Initialized
04-04 11:27:40.686: I/DBG_DM(31678): [v5_1209_3_1][Line:983][xdmGetTopActivityName] TopActivity : com.nfc.linked.Connect
04-04 11:27:40.856: V/AT_Distributor(200): received[idx : 0, fd : 11] : UART, 1
04-04 11:27:41.477: I/wpa_supplicant(1553): nl80211: Received scan results (3 BSSes)
04-04 11:27:41.477: I/wpa_supplicant(1553): wlan0: CTRL-EVENT-NO-CONNECTION
04-04 11:27:41.477: I/wpa_supplicant(1553): wpa_supplicant_req_new_scan: wpa_s->global->bStopPeriodicScan : 0, timeout_sec : 8
04-04 11:27:41.477: D/Tethering(675): interfaceLinkStateChanged wlan0, true
04-04 11:27:41.477: D/Tethering(675): interfaceStatusChanged wlan0, true
04-04 11:27:41.497: W/AlarmManager(675): FACTORY_ON= 0
04-04 11:27:41.497: W/AlarmManager(675): FACTORY_ON= 0
04-04 11:27:43.249: E/SMD(187): DCD ON 
```

权限：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.CALL_PHONE"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-14T20:07:38.670

改变

```
conf.wepKeys[0] = "\"" + networkSSID + "\""; 
```

到

```
conf.wepKeys[0] = "\"" + networkPass + "\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:22:04.777

当你像这样设置你的 Wi-Fi 连接并且 logcat 没有显示错误、调试信息或任何类似的东西时，这通常意味着你输入的预共享密钥与网络的密钥不匹配。我认为这是因为这条线：

```
conf.preSharedKey = "\"+ networkPass +\""; 
```

它应该是：

```
conf.preSharedKey = "\""+ networkPass +"\""; 
```

# arrays - Bash shell 数组操作

> ID：15813768
> 
> 赞同：2
> 
> 时间：2013-04-04T14:15:16.287
> 
> 标签：arrays, bash, shell, scripting

我有一个小脚本，它从文本文件中读取行并将它们存储在一个数组中。

```
#!/bin/bash

while read line 
do
    array+=("$line")
done < $1

for ((i=0; i < ${#array[*]}; i++))
do
    echo "${array[i]}"
done 
```

这是我运行脚本后打印的文本文件中的行：

```
This is line1 of file1 with 10 words.
This is line2 of file2 with 100 words.
This is line3 of file3 with 1000 words.
... 
```

到目前为止还好。从这里开始，我试图在行中使用单词并形成一个新的语句集。最终输出将按以下格式构建：

```
Capture ThisFile info-count1
filenum file1
Position of line: line1; Count of words: 10 
```

有没有办法可以遍历每个数组元素（行字）并做到这一点？

基本上，从这里开始，当我在数组中有行时，我想遍历每一行，选择行中的某些单词并创建一个新的语句集。

..... 更新： .....

这就是我最终完成的方式：

```
#!/bin/bash

while read line
do
    getthelines=($line)
    printf '\n'
    echo "Capture ThisFile info_count"
    echo "filenum ${getthelines[4]}"
    echo "Position of line: ${getthelines[2]}; Count of words: ${getthelines[6]}"
    printf '\n'
done < $1 
```

非常感谢。

> ### 也可以看看：
> 
> *   [在 Bash 中将字符串拆分为数组](https://stackoverflow.com/questions/10586153/bash-split-string-into-array)
> *   [将输出重定向到 bash 数组](https://stackoverflow.com/questions/1753366/redirect-output-to-a-bash-array)
> *   [如何在 Bash 中迭代关联数组](https://stackoverflow.com/questions/3112687/how-to-iterate-over-associative-array-in-bash)
> *   [遍历 bash 数组，动态替换数组名，这可能吗？](https://stackoverflow.com/questions/10637758/iterate-over-bash-arrays-substitute-array-name-dynamically-is-this-possible)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:19:49.233

没门。我昨天写了这段代码来迭代一个数组。

```
line="This is line1 of file1 with 10 words."
words=($line)
for word in ${words[@]};
do 
    echo "Word: $word"
done 
```

输出：

```
Word: This
Word: is
Word: line1
Word: of
Word: file1
Word: with
Word: 10
Word: words. 
```

# azure - 在 Azure Web 角色虚拟机上安装 IIS 媒体服务

> ID：15813772
> 
> 赞同：0
> 
> 时间：2013-04-04T14:15:23.810
> 
> 标签：azure, azure-web-roles

我想在 Azure Web 角色虚拟机实例上安装 IIS 媒体服务。

有关更多详细信息，请参阅：[http ://azlivestreaming.codeplex.com/documentation?referringTitle=Home](http://azlivestreaming.codeplex.com/documentation?referringTitle=Home)

一种方法是[http://azlivestreaming.codeplex.com/discussions/257666](http://azlivestreaming.codeplex.com/discussions/257666)，但解释得不好。

**IIS 媒体服务 4**

IIS 媒体服务 4 是通过 Web 角色启动任务和 Web 管理 API 自动安装和配置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:52:06.637

无论哪种方式，我建议您放弃提供的链接，因为它们非常过时并且存在您提到的问题。与其选择 PaaS 解决方案，不如检查 IaaS 解决方案。

要解决第一个问题，您应该查看[Windows Azure 虚拟机](http://www.windowsazure.com/en-us/home/features/virtual-machines/)。这是 Microsoft 提供的 IaaS（基础架构即服务）产品。如果发生硬件故障，您有一个持久的虚拟机保证不会丢失数据。我不完全确定 IIS 媒体服务如何与发布点一起工作，但是虽然 WebRole（PaaS 产品）是无状态的非持久性 VM，但 Windows Azure 虚拟机是状态完整的 VM。因此，无论您可以在本地小型（或大型）数据中心使用虚拟化服务器做什么，您（很可能）都可以使用 Windows Azure VM。

您可以间接解决问题二（Azure Blob 的存档路径）。直接是不可能的。但间接地，使用 IaaS VM，您可以[附加额外的数据磁盘](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/attach-a-disk/)。根据 VM 大小，您对附加的数据磁盘数量有不同的配额。每个数据盘最大可达到 999GB。数据磁盘作为页 Blob 持久保存在 Windows Azure Blob 存储中。因此，它与 Blob 存储本身一样冗余（3 个副本）和可靠。现在您可以将归档路径指向代表此数据磁盘的卷（或 NTFS 路径）。缺点是只有一个 VM 可以读取**和**一次写入同一个磁盘（Blob 存储中的 VHD 文件）。此外，您将无法像通常那样直接访问 blob 存储中的档案。但最终目标是让档案可靠且冗余地存储，对吗？

# c# - 防止 TreeView 向下滚动页面到选定节点

> ID：15813780
> 
> 赞同：0
> 
> 时间：2013-04-04T14:15:47.057
> 
> 标签：c#, visual-studio-2010, sharepoint, treeview

我有一个带有很多节点的 TreeView（位于 SharePoint 网站上的 UserControl 中）。在用户单击这些节点中的任何一个后，将调用 PostBack 并将页面重新加载到相同的位置（垂直）。我需要的是页面不滚动到选定的节点，但保持在其顶部。我假设默认情况下 TreeView 不能做任何滚动动作，所以它可能是 SharePoint ......

这是我关于这个问题的代码：

 `````
protected void Page_Load(object sender, EventArgs e)  
 {

 if (!IsPostBack)  
 {   
 Load_Tree(); TreeViewDeps.ExpandDepth = 1; }  
 }  

 protected void TreeView_OnSelectedNodeChanged(object sender, EventArgs e)   
 {  
 Search_TextBox.Text = "";   
LoadList(TreeViewDeps.SelectedNode.Value.ToString(), TreeViewDeps.SelectedNode.Text);    
} 
`````

# java - 如何让 JList 项目显示在 JTextField 中

> ID：15813785
> 
> 赞同：1
> 
> 时间：2013-04-04T14:16:02.357
> 
> 标签：java, swing, jtextfield, jlist, listselectionlistener

我制作了一个带有 4 个选项的简单 JList，并且在 JList 旁边有一个 JTextField。如何从 JList 中获取用户的选择以显示在 JTextField 中？（代码已被编辑以包含 Listener 类）

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class JListExample extends JFrame
{   
private JPanel p1, p2;
private JList jList;                                                                        // instance variables        
private JScrollPane scrollPane;
private JTextField jtfChoice;

public JListExample()                                                                   // constructor
{
    String[] itemList =  {"alpla", "beta", "gamma", "delta", "omega"};      // array  of Strings for list of items
    jList = new JList(itemList);
    jList.setSelectedIndex(1);                                                          // default item selected
    jList.setVisibleRowCount(3);                                                        // no. of visible rows
    jList.setSize(220, 200);

    p1 = new JPanel();
    p1.add(jtfChoice = new JTextField(8), BorderLayout.CENTER);

    p2 = new JPanel();
    p2.add(scrollPane = new JScrollPane(jList), BorderLayout.WEST);
    p2.add(p1);

    add(p2, BorderLayout.EAST);
    ListenerClass ListSelectionListener = new ListenerClass();
    jList.addListSelection(listener);
}

public static void main(String[] args)
{       
    JListExample frame = new JListExample();                                    // new frame object 
    frame.setTitle("JList Example");                                            // set frame title
    frame.pack();                                                                           // sizes the frame so components fit frame  
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);                   // ends program on frame closing
    frame.setLocationRelativeTo(null);                                              // centre frame
    frame.setVisible(true);                                                 // make frame visible
}
private class ListenerClass implements ListSelectionListener
{   
    public void valueChanged(ListSelectionEvent e)
    {
        JTextField.setText();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:01:23.213

您引用的是类名，而不是变量：

```
JTextField.setText(); 
```

你想要的是：

```
jtfChoice.setText(); 
```

此外，`awt`当您应该导入事件时，您正在导入`swing`事件：

```
import javax.swing.event.*; 
```

此外，您永远不会声明`listener`：

```
ListenerClass ListSelectionListener = new ListenerClass();
jList.addListSelection(listener);  //listener doesn't exist 
```

这是你应该做的：

```
ListenerClass listener = new ListenerClass();
jList.addListSelectionListener(listener); 
```

总而言之，最终的功能类如下所示：

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;

public class JListExample extends JFrame {

    private JPanel p1, p2;
    private JList jList;
    private JScrollPane scrollPane;
    private JTextField jtfChoice;

    public JListExample() // constructor
    {
        String[] itemList = {"alpla", "beta", "gamma", "delta", "omega"};
        jList = new JList(itemList);
        jList.setSelectedIndex(1);
        jList.setVisibleRowCount(3);
        jList.setSize(220, 200);

        p1 = new JPanel();
        p1.add(jtfChoice = new JTextField(8), BorderLayout.CENTER);

        p2 = new JPanel();
        p2.add(scrollPane = new JScrollPane(jList), BorderLayout.WEST);
        p2.add(p1);

        add(p2, BorderLayout.EAST);
        ListenerClass listener = new ListenerClass();
        jList.addListSelectionListener(listener);
    }

    public static void main(String[] args) {
        JListExample frame = new JListExample();
        frame.setTitle("JList Example");
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    private class ListenerClass implements ListSelectionListener {

        public void valueChanged(ListSelectionEvent e) {
            jtfChoice.setText(jList.getSelectedValue().toString());
        }
    }
} 
```

在一个完全不相关的注释上：您的评论并没有真正添加任何东西。当你说这样的话：

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // ends program on frame closing 
```

您所做的只是复制代码已经说过的内容。好的代码应该是自我记录的，注释应该解释*为什么*和*如何*，而不是*什么*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:22:36.483

您可以简单地添加一个[ListSelectionListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#addListSelectionListener%28javax.swing.event.ListSelectionListener%29)，您可以在其中更新 JTextField。

# java - 调用 Weka 时找不到或加载主类

> ID：15813795
> 
> 赞同：3
> 
> 时间：2013-04-04T14:16:25.923
> 
> 标签：java, class, classpath, weka

我为我的`Java`菜鸟道歉，但我试图`Weka`从控制台使用，由于某种原因，我收到以下错误：

```
Error: Could not find or load main class weka.classifiers.trees.J48 
```

我正在尝试以下命令：

```
java weka.classifiers.trees.J48 -l C:\xampp\htdocs\frequencyreplyallwords.arff -T C:\xampp\htdocs\testfreqrep.arff -p 0 > C:\xampp\htdocs\output.txt 
```

我怀疑类路径存在一些问题，但由于我不太了解 Java，是否有任何简单的方法可以检查一切是否正确？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-30T19:35:13.670

**Linux/macOS 解决方案**

1.  [从这里](http://www.cs.waikato.ac.nz/ml/weka/downloading.html)的这个目录下载一个相关的版本，比如[这里](http://prdownloads.sourceforge.net/weka/weka-3-9-1.zip)的 Developer Linux 版本，3.9.1 版本

2.  将以下行添加到您的`~/.bash_profile`

**的命令输出`cat ~/.bash.profile`**

```
export R_HOME="/Applications/R.app/Contents/MacOS/R"    #for WEKA MLR R plugin 
export CLASSPATH="/Applications/weka-3-9-1/weka.jar"    #for WEKA commandline
export WEKAINSTALL="/Applications/weka-3-9-1"

export WEKA_HOME="/Applications/weka-3-9-1"
export CLASSPATH=$CLASSPATH;$WEKA_HOME/weka.jar
export HEAP_OPTION=-Xms4096m -Xmx8192m
export JAVA_COMMAND java $HEAP_OPTION 
```

之后你应该能够运行

```
java weka.classifiers.trees.J48 -t $WEKAINSTALL/data/iris.arff 
```

输出

```
J48 pruned tree
------------------

petalwidth <= 0.6: Iris-setosa (50.0)
petalwidth > 0.6
|   petalwidth <= 1.7
|   |   petallength <= 4.9: Iris-versicolor (48.0/1.0)
|   |   petallength > 4.9
|   |   |   petalwidth <= 1.5: Iris-virginica (3.0)
|   |   |   petalwidth > 1.5: Iris-versicolor (3.0/1.0)
|   petalwidth > 1.7: Iris-virginica (46.0/1.0)

Number of Leaves  :     5

Size of the tree :  9

Time taken to build model: 0.44 seconds
Time taken to test model on training data: 0.01 seconds

=== Error on training data ===

Correctly Classified Instances         147               98      %
Incorrectly Classified Instances         3                2      %
Kappa statistic                          0.97  
Mean absolute error                      0.0233
Root mean squared error                  0.108 
Relative absolute error                  5.2482 %
Root relative squared error             22.9089 %
Total Number of Instances              150     

=== Detailed Accuracy By Class ===

                 TP Rate  FP Rate  Precision  Recall   F-Measure  MCC      ROC Area  PRC Area  Class
                 1.000    0.000    1.000      1.000    1.000      1.000    1.000     1.000     Iris-setosa
                 0.980    0.020    0.961      0.980    0.970      0.955    0.990     0.969     Iris-versicolor
                 0.960    0.010    0.980      0.960    0.970      0.955    0.990     0.970     Iris-virginica
Weighted Avg.    0.980    0.010    0.980      0.980    0.980      0.970    0.993     0.980     

=== Confusion Matrix ===

  a  b  c   <-- classified as
 50  0  0 |  a = Iris-setosa
  0 49  1 |  b = Iris-versicolor
  0  2 48 |  c = Iris-virginica

=== Stratified cross-validation ===

Correctly Classified Instances         144               96      %
Incorrectly Classified Instances         6                4      %
Kappa statistic                          0.94  
Mean absolute error                      0.035 
Root mean squared error                  0.1586
Relative absolute error                  7.8705 %
Root relative squared error             33.6353 %
Total Number of Instances              150     

=== Detailed Accuracy By Class ===

                 TP Rate  FP Rate  Precision  Recall   F-Measure  MCC      ROC Area  PRC Area  Class
                 0.980    0.000    1.000      0.980    0.990      0.985    0.990     0.987     Iris-setosa
                 0.940    0.030    0.940      0.940    0.940      0.910    0.952     0.880     Iris-versicolor
                 0.960    0.030    0.941      0.960    0.950      0.925    0.961     0.905     Iris-virginica
Weighted Avg.    0.960    0.020    0.960      0.960    0.960      0.940    0.968     0.924     

=== Confusion Matrix ===

  a  b  c   <-- classified as
 49  1  0 |  a = Iris-setosa
  0 47  3 |  b = Iris-versicolor
  0  2 48 |  c = Iris-virginica 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-05T07:50:46.890

您可以使用参数提供类路径`-cp`：

```
java -cp /path/to/weka/weka.jar weka.classifiers.trees.J48 ...
# on Windows, this is probably something like 
java -cp C:\path\to\weka\weka.jar weka.classifiers.trees.J48 ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:42:29.647

我假设，您使用 Windows，所以这是 Windows 命令行示例。如果你得到

```
SET WEKA_HOME=C:\Program Files\Weka-3-7
SET CLASSPATH=%CLASPATH%;%WEKA_HOME%\weka.jar
SET HEAP_OPTION=-Xms4096m -Xmx8192m
SET JAVA_COMMAND=java %HEAP_OPTION%
%JAVA_COMMAND% weka.core.SystemInfo 
```

您应该获取系统值以及 weka 值，例如 weka.version: 3.7.9

# android - 我可以将 Flash Professional SWF 集成到 Flash builder 中吗？

> ID：15813797
> 
> 赞同：0
> 
> 时间：2013-04-04T14:16:26.380
> 
> 标签：android, ios, flash-builder, flash

我正在尝试使用 Flash Professional 和 Flash Builder 为移动设备制作游戏。我想使用专业的 Flash 制作游戏组件。然后，我希望导出 swf 文件，以便可以将其导入到 flash builder 项目中。目标是使用 flash builder 创建移动菜单系统，并让它导航到游戏 swf 文件。这可能吗？

对不起，如果这是一个初学者问题。我对 Flash 比较陌生。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:19:55.940

如果您想访问 flash ide 中的符号，那么您正在寻找一个 swc 文件；）

如果您想在您的应用程序中加载 swf，那么只需使用您可以在网络上找到的众多 swf 加载器之一。

[http://helpx.adobe.com/flash/kb/load-external-swf-swf.html](http://helpx.adobe.com/flash/kb/load-external-swf-swf.html)

# iphone - Sharekit - 架构 i386 的 ndefined 符号：

> ID：15813802
> 
> 赞同：0
> 
> 时间：2013-04-04T14:16:34.440
> 
> 标签：iphone, ios, objective-c, xcode, sharekit

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_EvernoteSession", referenced from:
  objc-class-ref in AppDelegate.o
"_OBJC_CLASS_$_SHK", referenced from:
  objc-class-ref in AppDelegate.o
"_OBJC_CLASS_$_SHKConfiguration", referenced from:
  objc-class-ref in AppDelegate.o
"_OBJC_CLASS_$_SHKFacebook", referenced from:
  objc-class-ref in AppDelegate.o
"_OBJC_CLASS_$_SHKGooglePlus", referenced from:
  objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我用谷歌搜索了很多，但找不到适合我的anithyng。我已经按照安装指南一步一步地进行操作，我已经三重检查了我是否添加了所有需要的框架，我阅读并尝试了[使用 ShareKit 的“未找到架构 i386 的符号”问题，](https://stackoverflow.com/questions/6889940/symbols-not-found-for-architecture-i386-problem-using-sharekit)但仍然得到这个错误...请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:43:01.483

经过 12 个小时的疯狂后，我意识到我的文件夹树是错误的。您可以通过 git（对于像我这样的图标推送者也很容易）或通过浏览器下载文件，但您必须注意以下结果：

```
Project Root
 |
 |-Submodules
   |
   |-ShareKit
      |
      |-Submodules
         |
         |-All the subfolder with files (notice that if you download it as .zip from github, the folder will be created but they are EMPTY! 
```

如果您与此有任何不同，您将遇到巨大且不可预测的问题！

谢谢大家的帮助。

PS：我建议尝试将 ShareKit 添加到一个新的空项目中，只是为了熟悉它并保留您的真实项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:23:33.187

首先告诉我您是否必须将任何内容`framework`作为复制粘贴？在大多数情况下，都会产生此类问题。

通常，当您的类`.m`文件未存储/放入时会发生这种类型的错误`Compile Sources`

在这种情况下，您需要手动将此`.m`文件添加到`Compile Sources`

**以下步骤描述如何手动放入`.m`文件`Compile Sources`**

```
Select Project Form Project Manager
  |
  | 
  Targets
       |
       |
     Build Phases
          |
          |
        Compile Sources
                |
                |
        Click on '+' button and add .m file in it 
```

这是如何将文件手动放入`Compile Sources`.

**编辑：**

我不确定，但我认为您忘记添加`CoreData.framework`先添加它。请参阅此问题[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)如何添加**框架**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:59:30.643

尝试这个：

1）清理你的代码（按 Cmd + Shift + K）

2) 退出 Xcode 并重新启动

3) 确保在 Build Phases 和 Compile Sources 中添加了 SHKFacebook.m、SHKConfiguration.m 等文件。

4) 确保 Sharekit 中的所有子模块都已下载...

希望这可以帮助...

# android - Android 中的自定义布局：我应该重写哪个函数来获取其子项的尺寸？

> ID：15813805
> 
> 赞同：1
> 
> 时间：2013-04-04T14:16:40.020
> 
> 标签：android, android-relativelayout, ondraw

我正在尝试实现一个自定义布局，它扩展了 RelativeLayout，以管理其动画内容。动画由 TextViews 组成，以新闻栏的方式滚动，我在[RelativeLayout 中提到过 android:clipChildren="false" 不起作用：动画会被剪辑吗？](https://stackoverflow.com/questions/15798077/relativelayout-androidclipchildren-false-does-not-work-animation-will-get-cl)

应用程序启动后，我从 Web 下载新闻标题列表，然后创建 TextView 并以编程方式添加到此自定义布局中。为了开始为 TextView 设置动画，我需要它们的位置和尺寸。因此，在将 TextViews 添加到我的自定义布局后，我需要重写一个函数，该函数在绘制子 TextViews 并正确设置其尺寸时调用。我试图覆盖 onDraw 但它只被调用一次。

这是我的代码：

```
public class NewsAnimationLayout extends RelativeLayout
{

public NewsAnimationLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    setWillNotDraw(false);
    // TODO Auto-generated constructor stub
}

public NewsAnimationLayout(Context context, AttributeSet attrs,
        int defStyle) {
    super(context, attrs, defStyle);
    setWillNotDraw(false);
    // TODO Auto-generated constructor stub
}

public NewsAnimationLayout(Context context) {
    super(context);
    setWillNotDraw(false);
    // TODO Auto-generated constructor stub
}

    @Override
    protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

       //Here I will animate child objects.
    }

 }; 
```

在这种情况下我该怎么办，你能澄清一下吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:49:15.017

看来我想通了。

覆盖`onLayout`可以解决问题，似乎每当我们将新子项添加到 ViewGroup 时，Android 系统都会调用它，以便确定它们的位置和尺寸。

类中的此代码`NewsAnimationLayout`报告正确的位置和尺寸：

```
@Override
protected void onLayout (boolean changed, int left, int top, int right, int bottom) {
    super.onLayout(changed,left,top,right,bottom);
    System.out.println("onLayout");
    //Here I will animate child objects.

    int i;
    for(i=0;i<this.getChildCount();i++)
    {
        View v = this.getChildAt(i);

        System.out.println("Child "+i+" X="+v.getX()+" Y="+v.getY());
        System.out.println("Child "+i+" W="+v.getWidth()+" H="+v.getHeight());
    }
} 
```

# jquery-ui - jquery attr('name') 返回未定义

> ID：15813810
> 
> 赞同：0
> 
> 时间：2013-04-04T14:17:03.947
> 
> 标签：jquery-ui, menuitem

我正在尝试在我的 jquery 菜单 ui 中获取所选 ui.item 的名称属性。我需要添加了“选定”类的项目的名称属性，但 attr('name') 返回未定义。单击提交按钮时，我需要获取该名称属性。

```
<script>
    $(function () {
        var selection = ' ';

        $(".menu").menu({
            select: function (event, ui) {
                $('.selected', this).removeClass('selected');
                selection = ui.item.addClass('selected').attr('name');
            } // closes select function
        }); // closes menu

        $("button").button();
        $("button").click(function () {
            alert(selection)
        }); //closes click()
    });
</script>

<ul class="menu" id="menu">
    <li>
        <a href="#" name="academic_artStudies">
            <img src="" alt="" />
            <h2>Academic: Art Studies</h2>
        </a>
    </li>
    <li>
        <a href="#" name="academic_Literature">
            <img src="" alt="" />
            <h2>Academic: Literature</h2>
        </a>
    </li>
    <li>
        <a href="#" name="academic_socialSciences">
            <img src="" alt="" />
            <h2>Academic: Social Sciences</h2>
        </a>
    </li>
    <li>
        <a href="#" name="academic_physicalNaturalSci">
            <img src="" alt="" />
            <h2>Academic: Physical/Natural Sciences</h2>
        </a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:26:53.140

`ui.item`返回`<li>`您点击的。它没有`name`属性。`<a>`标签，它的孩子，做的。您需要先获取*标签*`<a>`，然后才能获取名称。

 *```
selection = ui.item.addClass('selected').children('a').attr('name'); 
```

演示：http: [//jsfiddle.net/ntUcW/1/](http://jsfiddle.net/ntUcW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:28:33.340

根据[文档](http://api.jqueryui.com/menu/#event-select)， ui.item 是活动元素（单击），而不是您可能假设的 li 元素。从 ui.item 你需要做`ui.item.children('a').attr('name')`才能获得你所追求的价值。*

# c - Matlab 脚本移至 C，但 ode45 的输出不同

> ID：15813815
> 
> 赞同：0
> 
> 时间：2013-04-04T14:17:13.780
> 
> 标签：c, matlab, gsl, ode

我在 C 中实现了一个 Matlab 脚本的等效版本。为了运行 ode45，我选择了 GNU 科学库。但是 ode45 为每个版本生成不同的输出。我已经工作了一段时间，但我无法找到问题所在。我使用 gsl_odeiv2_driver_apply_fixed_step 进行与 Matlab 中相同的步骤。

**Matlab 脚本**

```
function ExpoGrowthEqn
% code to solve the exponential growth equation 
% dN/dt = r*N, N(0)=N0

% parameter values
r=0.2;
N0=10;

% numerical parameters
step=0.25;
tspan=[0:step:10];

% EXACT solution is: N(t)=N0 * exp(r*t)
for i=1:length(tspan)
    N(i,1)=N0*exp(r*tspan(1,i));
end
plot(tspan,N,'ob') %plots EXACT solution
hold on

% solve ODE using ode45
options = odeset('RelTol',1e-12,'AbsTol',1e-12);
    [t y] = ode45( @growth_eqn, tspan, N0, options, r);
    plot(t,y,'-r') %plot APPROXIMATE solution

    solutions=[t N y]
end

function dy = growth_eqn(t, y, r)
N=y(1)
dy=r*N;
end 
```

**C代码**

```
void fixed_step(void) {

    PARAM parameters;
    parameters.N = 11500000;
    parameters.beta = 0.1;
    parameters.gamma = 1/2;   

    double I0=500.0/parameters.N;
    double R0=9000000.0/parameters.N;
    double S0=1-I0-R0;
    double y[3] = {S0, I0, R0};

    gsl_odeiv2_system sys = {func, NULL, 3, &parameters};
    gsl_odeiv2_driver * d = gsl_odeiv2_driver_alloc_y_new (&sys, gsl_odeiv2_step_rkf45, 1e-12, 1e-12, 0);

    printf ("=== Initial values ===\n");
    printf ("y[0]=%6.15lf y[1]=%6.15lf y[2]=%6.15lf\n", y[0], y[1], y[2]);
    int length = 53;
    const double step = 0.25;
    double ti; double t = 0.0, tant = t;
    int i;
    for (i = 0; i <= length*(1/step); i++)
    {
        printf ("%.2f(%3.d) -> t=%.2f %6.15lf %6.15lf %6.15lf\n", (float)tant, i, (float)t, y[0], y[1], y[2]);
        tant = t;
        int status = gsl_odeiv2_driver_apply_fixed_step (d, &t, step/8, 8, y);

        if (status != GSL_SUCCESS)
        {
            printf ("error, return value=%d\n", status);
        }
    }
    gsl_odeiv2_driver_free (d);        
} 
```

**Matlab 输出**

```
S                   I                   R
------------------------------------------------------------------
0.217347826086956   0.000043478260870   0.782608695652174
0.217347603416592   0.000038578485741   0.782613818097667
0.217347405784518   0.000034229664122   0.782618364551360
0.217347230418583   0.000030370797298   0.782622398784119
0.217347074884551   0.000026948321844   0.782625976793605
...
0.217345850226451   0.000000000007068   0.782654149766481
0.217345850226413   0.000000000006234   0.782654149767354
0.217345850226380   0.000000000005510   0.782654149768110
0.217345850226351   0.000000000004888   0.782654149768761
0.217345850226327   0.000000000004356   0.782654149769316
0.217345850226307   0.000000000003903   0.782654149769790
0.217345850226289   0.000000000003514   0.782654149770197
0.217345850226273   0.000000000003172   0.782654149770554
0.217345850226259   0.000000000002859   0.782654149770881
0.217345850226245   0.000000000002556   0.782654149771198 
```

**C 输出**

```
=== Initial values ===
y[0]=0.217347826086956 y[1]=0.000043478260870 y[2]=0.782608695652174
0.00(   ) -> t=0.00 0.217347826086956 0.000043478260870 0.782608695652174
0.00(  1) -> t=0.25 0.217347589196436 0.000043715151390 0.782608695652174
0.25(  2) -> t=0.50 0.217347351015482 0.000043953332344 0.782608695652174
0.50(  3) -> t=0.75 0.217347111537070 0.000044192810757 0.782608695652174
0.75(  4) -> t=1.00 0.217346870754133 0.000044433593694 0.782608695652174
...
51.00(205) -> t=51.25 0.217258883883215 0.000132420464611 0.782608695652174
51.25(206) -> t=51.50 0.217258162689554 0.000133141658272 0.782608695652174
51.50(207) -> t=51.75 0.217257437570519 0.000133866777307 0.782608695652174
51.75(208) -> t=52.00 0.217256708504771 0.000134595843055 0.782608695652174
52.00(209) -> t=52.25 0.217255975470856 0.000135328876970 0.782608695652174
52.25(210) -> t=52.50 0.217255238447202 0.000136065900623 0.782608695652174
52.50(211) -> t=52.75 0.217254497412123 0.000136806935703 0.782608695652174
52.75(212) -> t=53.00 0.217253752343811 0.000137552004014 0.782608695652174 
```

在第二列的末尾，数据有很大不同。在 Matlab 中几乎是 0 但不是 C 代码。

**Matlab 时间戳**

```
t =
                0
0.250000000000000
0.500000000000000
0.750000000000000
1.000000000000000
1.250000000000000
1.500000000000000
1.750000000000000
...
52.250000000000000
52.500000000000000
52.750000000000000
53.000000000000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:30:45.917

`tspan`当您指定（阅读[此处](http://www.mathworks.com/help/matlab/ref/ode45.html)）时，Matlab 在其内部计算中不使用固定步长。它在那些选定的时间输出。因此，您正在进行两种不同的计算。阅读[第一个 GSL 示例](http://www.gnu.org/software/gsl/manual/html_node/ODE-Example-programs.html)，了解如何使用具有固定输出时间的自适应时间步进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:12:53.050

抱歉，我没有包含导致问题的一小段代码。C 代码已被编辑以添加缺少的 4 行。发现问题：

> // gamma = 0.0 参数.gamma = 1/2;

结果返回 0。显然这是错误的。用逗号声明数字可以解决它。

> // gamma = 0.5 参数.gamma = 1.0/2.0;

# testing - Ember.js 的测试数据生成（如 factory_girl 或机械师）

> ID：15813816
> 
> 赞同：4
> 
> 时间：2013-04-04T14:17:16.413
> 
> 标签：testing, ember.js, factory-bot, machinist

我正在针对 Ember.js 应用程序编写单元和集成测试，但在测试应用程序时我无法连接到服务器。这意味着我需要使用 DS.FixtureAdapter 来备份我的数据存储。

但我个人并不喜欢大型应用程序中的固定装置，因为很难想出一套适用于每个测试用例的固定装置。我更喜欢 factory_girl 和 machinist 之类的工具，它们允许我生成与所有其他测试隔离的特定于测试的数据：

```
FactoryGirl.define do
  factory :user do
    name 'John Doe'
    date_of_birth { 21.years.ago }
  end
end

# In specific test cases:
user = FactoryGirl.build(:user)
young_user = FactoryGirl.create(:user, date_of_birth: 17.years.ago) 
```

当然 factory_girl 和 machineist 也可以自动生成相关模型。

现在有什么简单的方法可以在 Ember.js 中做到这一点吗？是否有可能使这更容易的技术、约定或库？谷歌搜索还没有真正的任何选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-03T12:44:47.637

我最近创建了一个名为 Ember Data Factory Guy 的项目，以帮助为使用 ember-data 的 ember 项目创建夹具数据。它与 REST 或 ActiveModel 适配器一起使用，并具有测试助手，使其非常容易使用。

在这里查看：

[https://github.com/danielspaniel/ember-data-factory-guy](https://github.com/danielspaniel/ember-data-factory-guy)

它支持belongsTo、hasMany（甚至多态）关联.. 序列、嵌入belongsTo .. 和其他一些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:54:09.183

我过去曾使用 rake 任务用 FactoryGirl 创建一堆对象，然后通过序列化程序将其转储到`fixtures.json`文件中。

优点：

*   当您有复杂的序列化逻辑或计算属性时，它会使事情保持干燥。
*   您对测试更有信心。

缺点：

*   这有点骇人听闻。
*   可用性一般，因为您必须记住重新生成设备文件（缓慢、乏味）。
*   很难为不同的测试用例生成不同的fixture 集，因此您通常会被一组全局fixture 所困。

我目前没有代码，但这不是一个非常复杂的设置。对于利大于弊，我持观望态度。

顺便说一句，我发现为 Konacha 动态生成固定装置太慢而无法使用（参见[#60](https://github.com/jfirebaugh/konacha/pull/60#issuecomment-7790134)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T12:39:16.430

我认为您可以在客户端和模拟请求中生成数据。我建议您可以将 jasmine 或 mocha 与[factory_girl js](https://github.com/Coffa/factory_girl)一起使用。

## 用于生成数据

```
FactoryGirl.define('user', function() {
      this.id = 1
})
FactoryGirl.create('user') 
```

更多细节在这里：[https ://github.com/Coffa/factory_girl](https://github.com/Coffa/factory_girl)

## 余烬

你可以在这里查看[使用 Ember 测试助手的设置是什么？](https://stackoverflow.com/questions/16419592/whats-the-setup-to-use-ember-testing-helpers)

# git - 完全删除 Heroku

> ID：15813819
> 
> 赞同：4
> 
> 时间：2013-04-04T14:17:21.710
> 
> 标签：git, heroku, command-line, uninstallation, foreman

你能告诉我如何从计算机以及他们的网站上完全删除 heroku 帐户和应用程序吗？我想从头开始，因为 heroku 命令行客户端给了我未知的错误，只需告诉我从我的窗口中删除/卸载 heroku 及其所有东西（如工头、git 等）的方法即可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T19:03:13.430

要卸载计算机上安装的 heroku 工具带的工具：

1.  打开开始菜单
2.  搜索“卸载”
3.  点击卸载程序
4.  卸载 Git、Heroku、Ruby。

确保通过打开“~\”删除了工具带使用的配置文件，显示隐藏文件然后删除名为 .heroku 的文件夹（如果它仍然存在）。

应用程序可以从 heroku 中删除，方法是转到该站点，单击应用程序列表中的应用程序，进入高级并按删除应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-05T17:40:48.407

如果您使用以下方式安装：

```
$ sudo snap install --classic heroku 
```

卸载使用：

```
$ which heroku
/snap/bin/heroku
$ sudo rm snap/bin/heroku
$ heroku --version
heroku : command not found 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:16:42.413

还删除所有heroku gem，例如`gem uninstall heroku --all`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-17T14:54:09.750

如果您使用以下方式安装：

```
$ sudo snap install --classic heroku 
```

卸载使用：

```
$ sudo snap remove heroku 
```

# javascript - d3中的鼠标进入

> ID：15813820
> 
> 赞同：1
> 
> 时间：2013-04-04T14:17:24.640
> 
> 标签：javascript, d3.js

我在 d3 中写了一个图表，当鼠标触摸它时会更新（使用鼠标悬停），数据会更新，但是如果鼠标仍在栏上，鼠标悬停将不断更新图表。

所以我在看 jQuery mouseenter。有没有可能在 d3 中实现 mouseenter？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T16:16:52.233

通过 d3 添加 mouseenter 事件。

`d3.select(".class").on("mouseenter", function(){ // do stuff })`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T22:45:35.433

~~我认为“mouseover”和“mouseenter”之间的区别在于“mouseover”为元素本身及其所有子元素触发，而“mouseenter”只为元素本身触发。~~

Mouseover：当指针移到附加元素或子元素上时触发。将指针移动到其他子元素将触发一个新事件。[https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/mouseover?redirectlocale=en-US&redirectslug=Mozilla_event_reference%2Fmouseover](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/mouseover?redirectlocale=en-US&redirectslug=Mozilla_event_reference%2Fmouseover)

Mouseenter：当指针移到附加元素上时触发。子元素不会触发事件。[https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/mouseenter?redirectlocale=en-US&redirectslug=Mozilla_event_reference%2Fmouseenter](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/mouseenter?redirectlocale=en-US&redirectslug=Mozilla_event_reference%2Fmouseenter)

所以如果你想要你自己的“mouseenter”，你可以做一个检查，比如`if (this === d3.event.target)`，然后是 a `d3.event.stopPropagation()`，这样你就只会得到分配给监听器的元素。希望这可以帮助。

# java - JSoup 解析带有未闭合标签的无效 HTML

> ID：15813821
> 
> 赞同：9
> 
> 时间：2013-04-04T14:17:29.013
> 
> 标签：java, html-parsing, web-crawler, jsoup

使用 JSoup 包括最后一个版本 1.7.2 存在一个错误，解析带有**未闭合标签的****无效**HTML 。

 **例子：

```
String tmp = "<a href='www.google.com'>Link<p>Error link</a>";
Jsoup.parse(tmp); 
```

生成的文档是：

```
<html>
 <head></head>
 <body>
  <a href="www.google.com">Link</a>
  <p><a>Error link</a></p>
 </body>
</html> 
```

浏览器会生成如下内容：

```
<html>
 <head></head>
 <body>
  <a href="www.google.com">Link</a>
  <p><a href="www.google.com">Error link</a></p>
 </body>
</html> 
```

Jsoup 应该用作浏览器或源代码。

有什么解决办法吗？查看API我没有找到任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-06T23:23:00.037

正确的行为是在解析这个无效的 HTML 时充当其他浏览器。感谢您提交此[错误](https://github.com/jhy/jsoup/issues/313)。我已经解决了阻止收养机构将原始属性保留在新节点中的问题。它将在 1.7.3 中可用，或者您现在可以从头构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T02:27:53.400

如果您的目标是获取浏览器生成的源代码，则可以使用 selenium，然后将其传递给 Jsoup 进行解析。但是 selenium 应该打开一个真正的浏览器，当然它可以自动打开它。像这样的代码：

```
public static void main(String[] args) {

    //System.setProperty("webdriver.chrome.driver", "./chromedriver.exe");
    //WebDriver driver = new ChromeDriver();
    WebDriver driver = new FirefoxDriver();
    driver.get("file:///C:/Users/jgong/Desktop/a.html");

    String html = driver.getPageSource();
    System.out.println(html);
    driver.quit();
    Document doc = Jsoup.parse(html);
    System.out.println(doc.html());

} 
```

a.html 是：

```
<html><head></head><body><a href="www.google.com">Link<p>Error link</a></body></html> 
```

结果是你想要的：

```
<html><head></head> <body> <a href="www.google.com">Link</a><p><ahref="www.google.com">Error link</a> </p></body></html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T16:14:37.293

您的 HTML 无效

> ### 文档类型在此处不允许元素“P”；缺少“APPLET”、“OBJECT”、“MAP”、“IFRAME”、“BUTTON”开始标签之一
> 
> ```
> <a href='www.google.com'>Link<p>Error link</a> 
> ```
> 
> 所提到的元素不允许出现在您放置它的上下文中；其他提到的元素是唯一允许在那里并且可以包含提到的元素的元素。这可能意味着您需要一个包含元素，或者您可能忘记关闭前一个元素。
> 
> 此消息的一个可能原因是您试图将块级元素（例如“<p>”或“<table>”）放入内联元素（例如“<a>”、“<span> "，或 "<font>")。

没有修复损坏的 HTML 的标准方法，每个不同的解析器都会尽力而为。如果您想要无效 HTML 的可重复结果，您应该严格使用同一解析器的相同版本。**

# jquery - jquery如何反序列化json对象

> ID：15813823
> 
> 赞同：15
> 
> 时间：2013-04-04T14:17:37.287
> 
> 标签：jquery, asp.net, json

如何反序列化下面的这个 json 对象？

```
[{"id":"67","name":"TestString"}] 
```

我尝试在下面执行此操作，但无法成功...

```
success: function (data, status) {
          $.each(data, function (dt) {

              var mydata = data.d;

              alert(mydata); // returns [{"id":"67","name":"TestString"}]

              $("#txt_speciality").tokenInput("add", mydata.id);
          });
} 
```

这是我创建 json 对象的方式

```
[WebMethod]
public static string get_specialities(string ProfessionalID)
{
    Database db = DatabaseFactory.CreateDatabase("Connection String2");
    DbCommand dbCommand;
    dbCommand = db.GetStoredProcCommand("Select_Professionals_Speciality");
    db.AddInParameter(dbCommand, "prof_id", DbType.Int16, Convert.ToInt16(ProfessionalID));
    IDataReader dr = db.ExecuteReader(dbCommand);
    //[{ id: 3, name: "test3" }]
    string return_str="[";
    int i = 0;
    while (dr.Read()) {
        if (i > 0)
            return_str += ",";
        return_str += "{\"id\":\"" + dr["SpecialtyID"].ToString().Trim() + "\",\"name\":\"" + dr["SpecialtyName"].ToString().Trim() + "\"}";
        i++;
    }
    return_str += "]";
    return return_str;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-04T14:22:30.953

你可以这样做：

```
var mydata; // [{"id":"67","name":"TestString"}]

var json = $.parseJSON(mydata); 
```

json 变量将包含反序列化的 json 对象

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T14:20:26.563

我认为这是您需要的： JSON.parse(data)

```
success: function (data, status) {
          data = JSON.parse(data);
          $.each(data, function (dt) {

          var mydata = data.d;

          alert(mydata); // returns [{"id":"67","name":"TestString"}]

          $("#txt_speciality").tokenInput("add", mydata.id);
      });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:21:05.723

如果你真的想使用 jQuery，[这里是功能](http://api.jquery.com/jQuery.parseJSON/)但是，任何当代浏览器都有功能

```
JSON.parse() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:20:58.100

如果您以文本形式检索数据，则它不会在到达时被解析为数组，而是作为字符串。

使用[`.getJSON`](http://api.jquery.com/jquery.getJSON)或`datatype:json`在您的[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)选项中解决此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:21:44.240

```
var object = JSON.parse(data); 
```

现在您无法访问所有属性。例如 object.id

# networking - 响应不同浏览器发送的请求的两个传入数据包，每个浏览器如何知道哪个是针对它的？

> ID：15813824
> 
> 赞同：0
> 
> 时间：2013-04-04T14:17:38.513
> 
> 标签：networking

假设两个不同的浏览器在同一秒向服务器发送了两个请求 - 浏览器如何知道哪个数据包打算发送给它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:16:44.420

问题不成立。浏览器 A 看不到任何用于浏览器 B 的数据。TCP 仅在发送数据的连接结束时将数据传递到套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:52:44.117

Browse 不关心它的意图，浏览器将简单地通过其**套接字地址**进行通信。您可以将其想象为，IP 地址区分网络中的一个唯一系统，但 TCP/UDP 将根据端口在该系统内进行区分。这就是 TCP 如何设法在系统内同时向 2 个不同的浏览器提供数据。

> TCP/IP 传输层寻址是使用 TCP 和 UDP 端口完成的。特定 IP 设备中的每个端口号标识特定的软件进程。 [使用端口进行复用和解复用](http://www.tcpipguide.com/free/t_TCPIPPortsTransportLayerTCPUDPAddressing.htm)

从[端口解释](http://www.linuxjunkies.org/articles/port_explained.html)

> 通过知道正在使用的 IP 地址，程序因此能够将数据发送到另一台计算机。但是一个重要的因素被遗漏了。接收计算机如何知道将哪个程序用于它接收的数据。出于这个原因，有一个端口号系统，也称为端口。每次传输数据时，数据包必须包含接收方的IP，以及负责的程序的端口号。

# elasticsearch - 轮胎与几个弹性实例一起工作..怎么样？

> ID：15813828
> 
> 赞同：0
> 
> 时间：2013-04-04T14:17:49.400
> 
> 标签：elasticsearch, tire

我正在研究轮胎宝石文档。我需要一些方法来搜索另一个弹性实例或在另一个弹性实例上创建索引。不要问我为什么——这是架构问题。

我们可以在块中定义一些基本设置：

```
Tire.configure do
  url 'http://localhost:9200/'
end 
```

我应该怎么做才能对另一个实例运行一些命令第一个想法是创建子类并重新定义 url，但这对我来说听起来很糟糕。有谁知道这样做的干净方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:08:02.593

不幸的是，Tire 不允许在同一个 Ruby 进程中连接到另一个集群。这是设计的可悲结果，将在客户端的未来版本中修复。

根据您需要的功能，您在此处的选择是：

1/使用不同的进程连接到另一个集群，使用Redis之类的东西来实现进程之间的发布/订阅通信。

2/ 使用不同的 Ruby 客户端。

3/ 使用`Tire::Configuration.client`不同的 URL。

# twitter-bootstrap - 引导标题背景移动设备

> ID：15813829
> 
> 赞同：0
> 
> 时间：2013-04-04T14:17:51.863
> 
> 标签：twitter-bootstrap, background, responsive-design, padding

我有以下内容：

```
<header class="container-fluid" id="header">...</header> 
```

这有一个背景图像应用到它并跨越桌面视图上屏幕的整个宽度。但是，当您将窗口大小调整为移动设备大小时，两侧会有额外的白色填充，这意味着背景没有覆盖整个屏幕，实际上与里面的内容相同

实现这一目标的最佳方法是什么？笔记。背景仅适用于页面的标题部分，而不是整个页面。

桌面视图：http: [//i.imgur.com/T5Mqlqv.jpg](http://i.imgur.com/T5Mqlqv.jpg)

手机浏览：http: [//i.imgur.com/fXvPdLz.jpg](http://i.imgur.com/fXvPdLz.jpg)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:20:01.733

在 767px 及以下的视点处，Bootstrap 在 body 的左右两侧添加 20px 的 padding，即

```
@media (max-width: 767px){
body {
padding-right: 20px;
padding-left: 20px;
}
} 
```

因此，如果您希望标题背景扩展全宽，则需要覆盖它。

像下面这样的东西应该可以解决问题。

```
@media (max-width: 767px){
#header {
padding-right: -20px;
padding-left: -20px;
}
} 
```

祝你好运！

# text - 我需要从每一行中删除文本文件中的特定单词

> ID：15813831
> 
> 赞同：0
> 
> 时间：2013-04-04T14:17:58.923
> 
> 标签：text, word, aspell

我有如下文字的文本文件。

```
motať sa
živiť sa
sabotovať
baviť sa
nasavať 
```

我想从每一行中删除单词 sa wrom。但我不会从单词“sabotovať”或“nasavať”中删除“sa”。我的最终结果将如下所示：

```
motať
živiť
sabotovať
baviť
nasavať 
```

对于 ASPELL，我需要这个，因为 ASPELL 在“sa”是新词的单词之间留有空白。我正在使用 WINDOWS。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:20:34.983

您可以（应该）`sed`从 cygwin 或其他适用于您的 Windows 系统的 unix 工具集中获取

删除行尾的单词

```
sed 's/ sa$//' inputFile > outputFile 
```

评论中的新问题（删除特定单词）

```
sed 's/budeš//' inputFile > outputFile 
```

评论中的另一个新问题（删除一行中的一个单词 - 包括 EOL）

```
sed 's/ sa//' inputFile > outputFile 
```

# awk - 如何使用 awk 找到最大和最小的数字？

> ID：15813836
> 
> 赞同：0
> 
> 时间：2013-04-04T14:18:13.120
> 
> 标签：awk, compare

我试图在一列中找到最大和最小的数字。输出应具有最大和最小数字以及最大和最小数字的名称。

我写的awk代码是这样的：

```
 BEGIN{first=1;}
     {if (first) { max = min = $2; first = 0; next;}
     if (max < $2) max=$2 cmax=$1 ; if (min > $2) min=$2 cmin=$1; }
END { print cmin min \n cmax max } 
```

你能帮我指出这段代码的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:25:25.900

问题是线条`if (max < $2) max=$2 cmax=$1`和`if (min > $2) min=$2 cmin=$1`应该是`if (max < $2){ max=$2; cmax=$1 }`和`if (min > $2){ min=$2; cmin=$1}`分别。另一个错误是`print cmin min \n cmax max`至少应该是`print cmin min "\n" cmax max`. 当您更好地格式化代码时，更容易发现错误：

```
BEGIN{
    first=1
}
{
    if (first) {  # We should move this to it's own block and test against NR
        max = min = $2
        first = 0
        next
    }    
    if (max < $2) {  # confusing using max to store min
        max=$2 
        cmax=$1 
    }
    if (min > $2) { # and min to store max your operators are the wrong way round
       min=$2 
       cmin=$1
    } 
}
END { 
    print cmin min "\n" cmax max  
} 
```

您的脚本现在应该可以工作，但仍然存在一些问题，与以下版本相比：

```
NR==1{                   # If we are on the first line in the file
    min=max=$2           # Set initial min/max values
    next                 # Skip to next line
}
{
    if ($2 > max) {      # If the value in field 2 is greater than current max
        max=$2           # Store the new values
        cmax=$1 
    } 
    if ($2 < min) {      # If the value in field 2 is less than current min
        min=$2           # Store the new values
        cmin=$1
    } 
}
END {
    # Use printf to properly format the output
    printf "%s %d\n%s %d\n",cmin,min,cmax,max
} 
```

附注：如果您在第二个字段上对文件进行预排序，则可以更简洁：

```
sort -nk2 file | awk 'NR==1{print}END{print}' 
```

# c#-4.0 - 主数据服务 - 合并成员

> ID：15813840
> 
> 赞同：1
> 
> 时间：2013-04-04T14:18:18.260
> 
> 标签：c#-4.0, sql-server-2012, master-data-services, master-data-management

谁能告诉我如何使用 C# 作为代码隐藏来合并 MDS 实体中的两个成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-10T01:12:49.727

您可以使用 EntityMembersMerge 功能。以下是功能详情：

```
public void EntityMemberMerge(string modelName, string versionName, string entityName, string memberCode, string newMemberName) 
```

# java - 从 Eclipse 调试器复制对象

> ID：15813841
> 
> 赞同：10
> 
> 时间：2013-04-04T14:18:25.343
> 
> 标签：java, eclipse

有没有办法可以在调试时将对象复制到文件中，以便以后可以使用它进行测试？我在eclipse上使用java。具体来说，我想复制请求对象以制作 junits

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T18:01:06.413

如果您的对象的类（或其任何超类）实现接口 java.io.Serilizable，您可以轻松地序列化此对象并将其存储在文件中。假设您有一个对象：

```
MyClass myObj = new MyClass(); 
```

只需在 Eclipse 中打开“显示”视图（窗口 -> 显示视图 -> 其他... -> 调试/显示）并输入：

```
java.io.ObjectOutputStream oos = new java.io.ObjectOutputStream(new java.io.FileOutputStream("/path/to/your/file"));
oos.writeObject(myObj);
oos.close(); 
```

选择此代码并按 Ctrl+i - Eclipse 将执行代码，因此 myObj 将存储在文件中（在本例中为“/path/to/your/file”）。在显示视图中使用 java.io 包中的类的规范名称，因为此包可能未导入当前正在执行的类中。

稍后，您可以恢复此对象（例如，在测试类中）：

```
import java.io.*;

ObjectInputStream ois = new ObjectInputStream(new FileInputStream("/path/to/your/file"));
MyClass myObj = (MyClass) ois.readObject();
ois.close(); 
```

当然，您应该将其包装在通常的 try/catch/finally 中，以避免资源泄漏。

不幸的是，如果 MyClass 没有实现 java.io.Serializable 接口，这将不起作用。

# jquery - Keith Wood JQuery Datepicker with Knockout binding

> ID：15813842
> 
> 赞同：2
> 
> 时间：2013-04-04T14:18:33.543
> 
> 标签：jquery, knockout.js, datepicker

我正在使用 Keith Wood Jquery Date Picker 和 Knockout JS。这可以在这里看到：

[http://jsfiddle.net/dDzRV/1/](http://jsfiddle.net/dDzRV/1/)

```
 $(function () {
    $('#popupDatepicker').datepick();

});

function AppViewModel() {
    this.dateString = ko.observable("10/10/2010");

}

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

当我更改文本框时，淘汰赛绑定会适当更新。但是，当使用 datepicker 时，敲除不会注册更改。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:44:31.940

这个[小提琴](http://jsfiddle.net/5TFvr/3/)显示了一个工作示例。基本上，您需要在`onSelect`DatePicker 事件中设置值。

```
var viewModel;
$(function () {
  viewModel = new AppViewModel();
    // Activates knockout.js
      ko.applyBindings(viewModel); 

    $('#popupDatepicker').datepick({ 
        onSelect: function(dates) { 

                var minDate = dates[0]; 
                viewModel.dateString($.datepick.formatDate(minDate));
            } 
    });

});

// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {
    this.dateString = ko.observable("10/10/2012");

} 
```

# caching - 应用结构缓存作为队列

> ID：15813843
> 
> 赞同：2
> 
> 时间：2013-04-04T14:18:39.690
> 
> 标签：caching, msmq, appfabric-cache

我有一个 .net WCF 服务（托管在 IIS 7.5 上），它对插入多个表的 SQL Server 2008 r2 存储过程进行大量调用。尽管在夜间处理的请求量较少，但此 WCF 服务的客户端使用 24/7。大多数情况下这可以正常工作，但每月必须运行一次 SSIS 作业，这会向同一个表进行大量插入。当 SSIS 作业运行时（大约需要 4 小时才能完成），它会导致 WCF 服务出现问题，从而导致超时。

我最初的想法是修改存储过程，以便对临时表进行插入，然后将其合并到主表中。但是，负责 SQL 服务器的 DBA 告诉我，在 SSIS 作业运行期间，服务器已完全耗尽。

所以，我需要想出某种形式的缓存/队列，它不会命中 SQL Server。此缓存还需要具有弹性和可扩展性。App Fabric 缓存是最好的工具吗？我快速浏览了 API，但看不到像队列一样使用它的明显方法，从缓存中获取的方法似乎需要一个密钥——新的服务从缓存中提取并写入永久 SQL 存储（一旦 SSIS 作业完成）。

过去我曾使用 MSMQ 来解决类似的问题，但所有关于此的文档似乎都非常陈旧，所以 App Fabric Cache 可能是当今的首选？

谢谢，

抢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:05:16.333

我想您可以使用 AppFabric 对 SQL 的写入/插入进行排队，但我不认为 AppFabric 打算这样做。

您可以使用 AppFabric 实现此目的的一种方法：

1.  给每个写入/插入一个随机密钥。
2.  创建一个索引对象来存储插入的键。
3.  当您需要进行批量插入时，您可以调用一个 GET 来返回用于插入的键数组。
4.  遍历键列表并开始插入。

这听起来更像是 MSMQ 的工作——这是我开始阅读您的问题时想到的第一个技术。

您还可以考虑一些开源替代品，例如 RabbitMQ 或 ActiveMQ。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:22:22.637

我看到两个直接选项：a) 要求客户端使用 NetMsmqBinding。但请注意，Windows Server AppFabric 正在与 Azure AppFabric 融合，并且还有其他选项。特别是，您可能希望查看 Service Bus for Windows Server v1.0，这是一个免费扩展，可让 Win Server 更符合 Azure 平台。无论是 Windows Server 服务总线还是 MSMQ，如果您对设置不太熟悉，可以通过社区的建议轻松完成。

b) 使用 Sql Server 服务代理。这是 SQL Server 原生的消息传递系统，允许您异步调用 sp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:28:38.970

感谢您的输入。

在研究了各种选项后，我认为答案是导入批量数据，然后使用滑动窗口分区“拼接”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T02:33:45.333

好吧，当我第一次阅读这个问题时，我想到了 Redis。它非常容易设置（与 AppFabric 相比），并且具有经过验证的可扩展性。您可以将其用于分布式缓存，或者在这种情况下，您可以使用内置的队列功能。无需添加更多工具和复杂性。

# mysql - mysql连接的JDBC驱动程序错误

> ID：15813844
> 
> 赞同：1
> 
> 时间：2013-04-04T14:18:46.847
> 
> 标签：mysql, eclipse, jdbc

我想用简单的 jtextfield 绑定 mysql 数据。所以我写了如下代码：

```
public class SimpleForm extends JFrame implements ActionListener {
    private static final long serialVersionUID = 1L;
    Connection connection = null;
    Statement s = null;
    ResultSet rs;
    String tableName = "mytable";
    JTextField jtf1, jtf2;
    JButton jb;
    String selTable;
    public SimpleForm() {
        initComponents();
        DoConnect();
    }
    public void DoConnect() {
        try {
            connection = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/myschema", "root", "root");
            s = connection.createStatement();
            DatabaseMetaData dbm = connection.getMetaData();
            String[] types = { "TABLE" };
            rs = dbm.getTables(null, null, "%", types);
            selTable = "SELECT * FROM " + tableName;
        } catch (SQLException e) {
            System.out.println("Oops! Error occured..");
            e.printStackTrace();
        } finally {
            try {
                s.close();
                connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
    private void initComponents() {
        JPanel jp = new JPanel(new FlowLayout());
        JLabel jl1 = new JLabel("ID");
        jtf1 = new JTextField();
        jtf1.addActionListener(this);
        JLabel jl2 = new JLabel("Name");
        jtf2 = new JTextField();
        jtf2.addActionListener(this);
        jb = new JButton("Next");
        jb.addActionListener(this);
        jp.add(jl1);
        jp.add(jtf1);
        jp.add(jl2);
        jp.add(jtf2);
        jp.add(jb);
        add(jp);
    }
    public void actionPerformed(ActionEvent e) {
        try {
            s.execute(selTable);
            rs = s.getResultSet();
            if ((rs != null) && (rs.next())) {
                rs.next();
                jtf1.setText(rs.getString(1));
                jtf2.setText(rs.getString(2));
            }
        } catch (SQLException e1) {
            e1.printStackTrace();
        }
    }
    public static void main(String[] args) {
        new SimpleForm().setVisible(true);
    }
    } 
```

我在 eclipse indigo 和 mysql 数据库中做这个。我已经在 lib 文件夹中导入了驱动程序的 jar 文件。我仍然收到以下错误。

```
Oops! Error occured..
java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/myschema
    at java.sql.DriverManager.getConnection(DriverManager.java:604)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at main.SimpleForm.DoConnect(SimpleForm.java:55)
    at main.SimpleForm.<init>(SimpleForm.java:46)
    at main.SimpleForm.main(SimpleForm.java:135)
Exception in thread "main" java.lang.NullPointerException
    at main.SimpleForm.DoConnect(SimpleForm.java:74)
    at main.SimpleForm.<init>(SimpleForm.java:46)
    at main.SimpleForm.main(SimpleForm.java:135) 
```

所以请帮我解决这个问题。我真的不明白这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:00:10.393

你应该试试这个：

- 你必须使用构建路径在 Eclipse 中为 mysql-connector.jar 设置类路径，并且你必须将 mysql-connector 放到你的 web 应用程序的 WEB-INF 目录的 lib 文件夹中 - （如果你正在开发任何 web 应用程序） .

我希望它有所帮助。

# javascript - 如何将日期范围选择器（AngularJS 自定义指令）链接到 AngularUI-Select2 行为？

> ID：15813847
> 
> 赞同：2
> 
> 时间：2013-04-04T14:18:49.047
> 
> 标签：javascript, angularjs, angularjs-directive, daterangepicker

我正在使用

1.  [Angular UI - Select2 指令](http://angular-ui.github.com#directives-select2)以显示选项框。
2.  [引导日期范围选择器](https://github.com/dangrossman/bootstrap-daterangepicker)以显示日期选择器

他们两个单独工作都很好。

**日期选择器的工作**

每当更改日期范围时，都会通过 AngularJS 获取新数据。这是代码：

HTML

```
<div ng-app="my-app" ng-controller="MyController">

    <div id="reportrange" class="reportrange"
        my-date-picker="changeDate($startDate, $endDate)">
        <span></span>
    </div>

</div> 
```

角脚本

```
//directive code
    var mod = angular.module('my-app', ['ngResource', 'ui']);

    mod.directive('myDatePicker', function ($timeout) {
        return {
            restrict: 'A',
            link: function (scope, element, attr) {
                $(element).daterangepicker({
                    //options now shown for brevity
                }, function (startDate, endDate) {
                    $('#reportrange span').html(startDate.toString('MMMM d, yyyy') + ' - ' + endDate.toString('MMMM d, yyyy'));

                    var fStartDate =  moment(startDate).format('YYYY-MM-DD');
                    var fEndDate = moment(endDate).add('days', 1).format('YYYY-MM-DD');

                    scope.$eval(attr.myDatePicker, {$startDate: fStartDate, $endDate: fEndDate});

                });

                var inEndDate = Date.today();
                var inStartDate = Date.today().add({ days: -29 });
                //Set the initial state of the picker label
                $('#reportrange span').html(inStartDate.toString('MMMM d, yyyy') + ' - ' + inEndDate.toString('MMMM d, yyyy'));
            }
        };
    });

//Controller code
function MyController($scope, $resource, $timeout) {
    var inEndDate = moment(Date.today()).format('YYYY-MM-DD');
    var inStartDate =  moment(Date.today().add({ days: -29 })).format('YYYY-MM-DD');
    var User = $resource('/fetch?from=:from&to=:to', {from: inStartDate, to: inEndDate}, {
        getAll: {method: 'GET', isArray: true}
    });

    $scope.changeDate = function(fromDate, toDate) {
        $scope.customers = User.getAll({from: fromDate, to: toDate});
    };

    $scope.customers = User.getAll();
} 
```

这工作正常。我正在获取`customers`所选范围的列表（每次更改范围时通过 $resource 获取）

**Select2 AngularUI 的工作**

```
<select ui-select2 ng-model="selectedCity" >        
    <option value="1">City1</option>
    <option value="2">City2</option>    
    <option value="3">City3</option>        
</select> 
```

这也工作正常。

The requirement is that whenever an option is selected (eg 2nd option, City2) I want to get `customers`list for the selected range for City2\. 在选择 City2 时，用户也可以更改日期范围并获取新的`customers`值列表。

所以我不知道如何将日期时间选择器和这个选择选项联系起来？请指导我。

我被困住了。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:07:14.047

添加内部控制器。

```
$scope.$watch('selectedCity', function(newVal, oldVal){
  if(newVal){ 
   $scope.customers = User.getAll({from: fromDate, to: toDate, city: newVal});
 }
}); 
```

当 selectedCity 发生变化并且您可以获得客户时，将执行此功能。您还需要将选定的开始日期和结束日期存储在 $scope 对象中（在 内`$scope.changeDate`）。

# javascript - 如何使用角度检测浏览器后退按钮单击事件？

> ID：15813850
> 
> 赞同：79
> 
> 时间：2013-04-04T14:18:59.460
> 
> 标签：javascript, jquery, angularjs

是否可以通过使用浏览器中的历史返回按钮检测用户进入页面？最好我想使用 angular.js 来检测这个动作。

我不想使用角度路由。如果用户提交表单并且在成功提交到服务器并重定向之后，它也应该工作，如果用户使用浏览器的后退按钮返回表单也应该是可能的。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-04-04T16:22:12.080

这是Angular的解决方案。

```
myApp.run(function($rootScope, $route, $location){
   //Bind the `$locationChangeSuccess` event on the rootScope, so that we dont need to 
   //bind in induvidual controllers.

   $rootScope.$on('$locationChangeSuccess', function() {
        $rootScope.actualLocation = $location.path();
    });        

   $rootScope.$watch(function () {return $location.path()}, function (newLocation, oldLocation) {
        if($rootScope.actualLocation === newLocation) {
            alert('Why did you use history back?');
        }
    });
}); 
```

我正在使用运行块来启动它。首先，我将实际位置存储在 $rootScope.actualLocation 中，然后我监听 $locationChangeSuccess，当它发生时，我用新值更新实际位置。

在 $rootScope 我观察位置路径的变化，如果新位置等于 previousLocation 是因为 $locationChangeSuccess 没有被触发，这意味着用户已经使用了历史记录。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-18T01:00:46.370

如果您想要更精确的解决方案（前后检测），我扩展了[Bertrand](https://stackoverflow.com/users/736482/bertrand)提供的解决方案：

```
$rootScope.$on('$locationChangeSuccess', function() {
    $rootScope.actualLocation = $location.path();
});

$rootScope.$watch(function () {return $location.path()}, function (newLocation, oldLocation) {

    //true only for onPopState
    if($rootScope.actualLocation === newLocation) {

        var back,
            historyState = $window.history.state;

        back = !!(historyState && historyState.position <= $rootScope.stackPosition);

        if (back) {
            //back button
            $rootScope.stackPosition--;
        } else {
            //forward button
            $rootScope.stackPosition++;
        }

    } else {
        //normal-way change of page (via link click)

        if ($route.current) {

            $window.history.replaceState({
                position: $rootScope.stackPosition
            });

            $rootScope.stackPosition++;

        }

    }

 }); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-17T10:50:44.170

对于 ui 路由，我使用下面的代码。

在里面`App.run()`，使用

```
 $rootScope.$on("$stateChangeStart", function (event, toState, toParams, fromState, fromParams) 
 {

    if (toState.name === $rootScope.previousState )
       { 
          // u can any 1 or all of below 3 statements
         event.preventDefault();  // to Disable the event
         $state.go('someDefaultState'); //As some popular banking sites are using 
         alert("Back button Clicked");

       }
 else
      $rootScope.previousState= fromState.name;
   }); 
```

您可以在 '$stateChangeSuccess' 事件中获取 'previousState' 值，如果您愿意，也可以如下所示。

```
 $rootScope.$on("$stateChangeSuccess", function (event, toState, toParams, fromState, fromParams) 
   {

        $rootScope.previousStatus = fromState.name;
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-23T11:34:55.733

我知道这是一个老问题。无论如何 ：）

Bema 的回答看起来很棒。但是，如果您想让它与“正常”网址一起使用（我猜没有哈希），您可以比较绝对路径，而不是返回的路径`$location.path()`：

```
myApp.run(function($rootScope, $route, $location){
//Bind the `$locationChangeSuccess` event on the rootScope, so that we dont need to 
//bind in induvidual controllers.

    $rootScope.$on('$locationChangeSuccess', function() {
        $rootScope.actualLocation = $location.absUrl();
    });      

    $rootScope.$watch(function () {return $location.absUrl()}, function (newLocation, oldLocation) {
        if($rootScope.actualLocation === newLocation) {
            alert('Why did you use history back?');
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:28:04.113

JavaScript 有一个原生的历史对象。

```
window.history 
```

查看 MDN 了解更多信息；[https://developer.mozilla.org/en-US/docs/DOM/window.history?redirectlocale=en-US&redirectslug=window.history](https://developer.mozilla.org/en-US/docs/DOM/window.history?redirectlocale=en-US&redirectslug=window.history)

不确定它在多浏览器支持上有多好。

**更新**

似乎我上面所说的仅适用于 Gecko 类型的浏览器。

对于其他浏览器尝试使用`history.js`；[https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-07T20:58:45.370

所以，我已经将@Bema 的答案转录成 TypeScript，这就是它的样子：

```
namespace MyAwesomeApp {
    // ReSharper disable once Class
    function detectBackButton(
        $rootScope: ng.IRootScopeService,
        $location: ng.ILocationService
    ) {
        let actualLocation: string = '';

        $rootScope.$on('$locationChangeSuccess',
            () => {
                actualLocation = $location.path();
            });

        $rootScope.$watch(() => $location.path(),
            (newLocation: string, oldLocation: string) => {
                if (actualLocation === newLocation) {
                    //$rootScope.$broadcast('onBackButtonPressed', null);
                }
            });
    }

    detectBackButton.$inject = [
        '$rootScope',
        '$location'
    ];

    angular
        .module('app')
        .run(detectBackButton);
} 
```

我们不必在`$rootScope`服务之外创建属性，我们可以让我们的“位置更改成功”和“位置更改”代码都关闭局部`actualLocation`变量。从那里，您可以做任何您喜欢的事情，就像在原始代码中一样。就我而言，我会考虑广播一个事件，以便各个控制器可以做他们必须做的任何事情，但*如果你*必须这样做，你可以包括全局操作。

感谢您的出色回答，我希望这对其他打字稿用户有所帮助。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-09-14T19:54:02.663

我对这个问题的解决方案是

```
app.run(function($rootScope, $location) {
    $rootScope.$on('$locationChangeSuccess', function() {
        if($rootScope.previousLocation == $location.path()) {
            console.log("Back Button Pressed");
        }
        $rootScope.previousLocation = $rootScope.actualLocation;
        $rootScope.actualLocation = $location.path();
    });
}); 
```

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2013-08-14T08:32:48.167

按下后退按钮时，角度仅触发**$routeChangeStart**事件，**$locationChangeStart**未触发。

# javascript - 在 Internet Explorer 中检查用户的主页

> ID：15813851
> 
> 赞同：94
> 
> 时间：2013-04-04T14:19:06.557
> 
> 标签：javascript, internet-explorer

Google 会显示一个弹出窗口，询问您是否要将主页设置为 google.com。这很正常，当我说 OK 时，它会将其设置为 google.com。然而，在那之后，我不再得到弹出窗口了。据我所知，没有人应该能够检索我主页的价值，因为它是私人信息。但不知何故，谷歌正在跟踪它。当我将主页设置为不同的站点时，我得到了弹出窗口。我删除了 cookie，但即便如此，它也只有在我将主页设置为另一个站点时才会显示。

我在 IE8 和 IE9 上测试了这种行为。弹出窗口永远不会出现在 Firefox 和 Chrome 中。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-04T14:49:59.297

Internet Explorer 可以询问给定的 URL 是否是主页，在[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms531418%28v=vs.85%29.aspx)上有详细说明。该链接指向演示 API 的[示例页面。](http://samples.msdn.microsoft.com/workshop/samples/author/behaviors/homepage1.htm)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-04T14:54:12.160

谷歌使用的代码可以在这里查看：

```
google.promos.mgmhp.isGoogleHomepage = function (a) {
    var b = !1;
    try {
        b = window.external.isGoogleHomePage()
    } catch (d) {
        if (h(a)) return !0;
        var c = google.promos.gpd(a, "mgmhp_hp_url");
        c && g.push(c);
        for (c = 0; c < g.length; c++) {
            var k = g[c];
            if (b = b || a.isHomePage(k)) return !0
        }
    }
    return b
}; 
```

他们正在使用专有的 isHomePage 方法来检查 google.com 是否是您的主页。[更多信息在这里。](http://samples.msdn.microsoft.com/workshop/samples/author/behaviors/homepage1.htm)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-04T14:43:58.260

以下css代码是罪魁祸首。

行为： url(#default#homePage) url(#default#userData);

这就是我不喜欢IE的原因。行为 url(#default#userData) 告诉浏览器将此作为会话信息存储在客户端或浏览器内存中。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/ms533015 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms533015(v=vs.85).aspx)

# asp.net - 启用连接池时，dataadapter.fill 命令在重负载下随机返回 0 行

> ID：15813856
> 
> 赞同：1
> 
> 时间：2013-04-04T14:19:16.003
> 
> 标签：asp.net, ado.net

我们一直在 ASP.NET 应用程序中遇到 ADO.NET 命令的问题，我们已将其归结为...

没有返回错误，但 dataadapter.fill 命令只返回 0 行。

这只发生在某些时候，绝大多数时候，查询正常执行。我们知道 SQL server 没有返回错误（使用 sql profiler），并且查询应该返回了结果（重新运行 dataadapter.fill 确实返回了一些行并且这些行一直存在于数据库中）这似乎发生了仅当我们打开 ado.net 连接池并且服务器负载过重时。

我们正在使用 SqlClient 连接/命令对象并连接到 SQL Server 数据库（到目前为止，我们已经在 SQL 2005 和 SQL 2008 中看到了这种行为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T02:13:06.013

select 语句是否返回多个结果集？如果是，那么您可能想要使用：

```
using(DbDataAdapter dataAdapter = _providerFactory.CreateDataAdapter())
{
  dataAdapter.TableMappings.AddRange(tableMappings);
  dataAdapter.SelectCommand = selectCommand;

  // This is crucial for HasChanges() to return the correct value
  dataAdapter.AcceptChangesDuringFill = false;

  MyTypedDataSet dataSet = new MyTypedDataSet();
  dataSet.EnforceConstraints = false;
  dataAdapter.Fill(dataSet);
  bool hasData = dataSet.HasChanges();
  return hasData;
} 
```

# css - div浮动中的绝对位置div容器

> ID：15813859
> 
> 赞同：1
> 
> 时间：2013-04-04T14:19:21.790
> 
> 标签：css

总而言之，我知道如果绝对位置子 div 没有设置`left`属性，那么这个子 div 的默认开始位置将在父 div 中。但绝对 div 的宽度不受父 div 宽度的限制。但是如果我们将值设置为它的 TLRB 属性。然后正如[w3cschool 教程](http://www.w3schools.com/cssref/pr_class_position.asp)所说。`The element is positioned relative to its first positioned (not static) ancestor element.` 我的问题是如何在 div 中制作绝对位置的子 div 容器？我能想到的一种方法是使用 javascript 来计算和设置适当的宽度值。但我想知道它是否可以由css制作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:30:51.090

如果父 div 有`position:relative`，而子div 有`position:absolute; width:100%`，那么子 div 将与父 div 具有相同的宽度。[在 jsfiddle 检查](http://jsfiddle.net/Qyy2W/)

# android - android:valueTo 代表什么样的值

> ID：15813862
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:19:34.207
> 
> 标签：android, xml, animation, android-animation, android-xml

因此，我一直在搜索 Android 文档，试图找出`android:valueTo`in 实际代表/接受的 value 类型，但没有运气。该[文档](http://developer.android.com/guide/topics/resources/animation-resource.html#obj-animator-element)有以下内容：

```
android:valueTo:
   float, int, or color. Required. The value where the animated property ends. 
   Colors are represented as six digit hexadecimal numbers (for example
   , #333333). 
```

现在这只告诉我值类型（float、int、color），但不告诉我它代表什么。例如，如果我使用以下代码对视图的 x 坐标进行动画处理，那么值`android:valueTo`是否采用视图属性接受的格式（如果属性允许 % 或 dp，那么您可以在此处使用），浮动是否总是代表 %和 int 总是 dp 甚至是别的什么？

```
<objectAnimator
        android:propertyName="x"
        android:duration="@android:integer/config_mediumAnimTime"
        android:valueTo="-50"
        android:valueType="intType"/> 
```

在现场如何使用 % 或 dp 是不允许的，只能使用实数，因此通过反复试验来解决这个问题并没有奏效。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T11:41:17.813

从我从博客[文章](http://android-developers.blogspot.com/2011/05/introducing-viewpropertyanimator.html)和[视频](http://www.youtube.com/watch?v=3UbJhmkeSig)中收集到的信息来看，objectAnimator 属性可以采用的值似乎因属性而异。例如，scale 表示百分比缩放，因此值 2 表示 200%。而translationX使用dp，所以2和300都在dp中。因此，在 Android 3.1 之前的动画集中可以使用 %、%p 或 dp，但在新框架中似乎无法使用。

# c++ - 基类模板的成员在具有相同模板参数的派生类模板中超出范围

> ID：15813863
> 
> 赞同：15
> 
> 时间：2013-04-04T14:19:37.193
> 
> 标签：c++, templates

下面的代码给了我一个编译错误*'value' is not declared in this scope*。

```
template<class T>
struct Base {
    int value;
};

template <class T>
struct Derived : public Base<T> {
    int getValue() { return value; }
}; 
```

我觉得非常奇怪

*   如果`Derived`继承自`Base<std::string>`，则代码编译，
*   如果我`return Base<T>::value`，代码编译。

为什么代码不能按原样编译？以什么方式没有在范围内声明“价值” `Derived<T>::getValue()`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-04T14:22:54.410

因为`value`是一个*非限定名称*，并且在名称查找的第一阶段，编译器将不知道这是一个从基类继承的数据成员（它还没有被实例化`Base<T>`）。因此，它将搜索全局命名空间，并没有找到名为`value`;的变量。因此，它将发出错误。

这是解决此问题的典型方法：

```
template <class T>
struct Derived : public Base<T> {
    int getValue() { return this->value; }
    //                      ^^^^^^
}; 
```

显式取消引用`this`告诉编译器后面的名称是（可能继承的）数据成员的名称，并且查找应该延迟到实际实例化成员函数的位置。当然，您的解决方案是：

```
return Base<T>::value; 
```

同样好，因为它还告诉编译器`value`是从基类继承的`Base<T>`。

对于从 派生的问题`Base<std::string>`，编译器可以立即去查找是否`Base<std::string>`包含一个名为的数据成员`value`（因为它不依赖于任何模板参数），如果是这样，它将能够确定表达式是好的——形成。

但是，如果您的基类是`Base<T>`，在`T`名称查找的第一阶段是未知的，则编译器无法分辨是什么`value`（甚至可能根本没有`Base`针对不同s 的特化）。`T``value`

C++11 标准的第 14.6/3 段：

> 在类或类模板的定义中，如果基类依赖于模板参数，则在非限定名称查找期间，无论是在类模板或成员的定义点还是在类模板或成员的实例化期间，都不会检查基类范围类模板或成员。[...] [*示例*：
> 
> ```
> struct A {
>     struct B { / ... / };
>     int a;
>     int Y;
> };
> 
> int a;
> 
>   template<class T> struct Y : T {
>     struct B { / ... / };
>     B b; // The B defined in Y
>     void f(int i) { a = i; } // ::a
>     Y* p; // Y<T>
>   };
> 
> Y<A> ya; 
> ```
> 
> 模板参数的成员`A::B`、`A::a`和不影响 中名称的绑定 。—<em>结束示例]`A::Y``A``Y<A>`

# android - 如何更改 Facebook 应用程序平台状态

> ID：15813864
> 
> 赞同：2
> 
> 时间：2013-04-04T14:19:42.113
> 
> 标签：android, facebook, facebook-graph-api, facebook-authentication

我制作了一个连接到 facebook 的 android 应用程序，问题是当用户单击登录 Facebook 按钮时，如果他的 Facebook 应用程序平台已关闭，则程序无法登录并且不会通知用户原因。

我如何通知用户这一点。如果有为什么要通过 android 应用程序更改此 On/Off 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T23:11:38.547

你可以看看我的帖子。我在那里使用 Facebook 3.0.1 SDK。如果 facebook 应用程序是打开的，用户不需要再次输入他/她的密码和用户名，在这种情况下只需要一个权限来分享一些东西。如果 facebook 应用程序没有打开，它会将用户定向到登录页面。您可以参考我的帖子（[通过 android 中的 facebook/twitter 应用程序分享，如果设备上安装了 facebook/twitter，请不要打开浏览器](https://stackoverflow.com/questions/17164455/share-via-facebook-twitter-application-in-android-dont-open-browser-if-facebo)）并通过检查接受的答案来查看它是如何完成的。我希望它有帮助

# c# - 如何更改复选框上的检查图像

> ID：15813869
> 
> 赞同：12
> 
> 时间：2013-04-04T14:19:52.247
> 
> 标签：c#, .net, winforms, checkbox

它有文本、图像，然后是复选框，

我想使用更好的图像进行检查，但找不到更改已检查和未检查图像的方法

```
this.checkBox1.CheckAlign = System.Drawing.ContentAlignment.MiddleRight;
this.checkBox1.Checked = true;
this.checkBox1.CheckState = System.Windows.Forms.CheckState.Checked;
this.checkBox1.Image = global::ClientExam.Properties.Resources.action32;
this.checkBox1.Location = new System.Drawing.Point(145, 140);
this.checkBox1.Name = "checkBox1";
this.checkBox1.Size = new System.Drawing.Size(273, 127);
this.checkBox1.TabIndex = 0;
this.checkBox1.Text = "checkBox1";
this.checkBox1.TextImageRelation = System.Windows.Forms.TextImageRelation.TextBeforeImage;
this.checkBox1.UseVisualStyleBackColor = true; 
```

有人知道不需要我自己编写控件的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-06-01T09:19:43.230

对于不想覆盖 OnPaint 的任何人，有一个替代解决方案：

1.  添加一个`ImageList`控件并用图像填充它以反映选中/未选中状态。
2.  将`Checkbox`控件的`Appearance`属性设置为`Button`（摆脱标准 CheckBox 图标）
3.  将它的`FlatStyle`属性设置为`Flat`（这样控件看起来就不像一个按钮）。
    注意：您可能还想检查它`FlatAppearance`的属性组。即`CheckedBackColor`, `MouseDownBackColor`, `MouseOverBackColor`, 即将它们全部设置为`Control`值。
4.  将`Checkbox`控件的`ImageList`属性设置为控件的名称`ImageList`。
5.  设置`Checkbox`控件`Imageindex`和`ImageAlign`属性以反映其当前状态。
6.  最后也是最重要的设置`Checkbox`控件的`TextImageRelation`属性（此值不会让文本和图像重叠，除非您希望它们重叠）。ie`ImageBeforetext`值代表常见的 CheckBox 图标位置。

现在唯一要做的就是在状态改变时改变图像，像这样：

```
 private void chkMyCheckBoxWithAnImage_CheckedChanged(object sender, EventArgs e)
    {
        if (chkMyCheckBoxWithAnImage.Checked)
            chkMyCheckBoxWithAnImage.ImageIndex = 1;
        else
            chkMyCheckBoxWithAnImage.ImageIndex = 0;
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-04T14:24:31.930

如果您正在寻找如何在 Winforms 中执行此操作，简单的答案是创建一个派生自 CheckBox 的新复选框类，然后重写[OnPaint](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)方法。

这是一个关于如何通过覆盖该`OnPaint`方法来创建自定义外观复选框的示例：

```
public class CustomCheckBox : CheckBox
{
    public CustomCheckBox()
    {
        this.SetStyle(ControlStyles.UserPaint, true);
        this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
    }

    protected override void OnPaint(PaintEventArgs pevent)
    {
        base.OnPaint(pevent);
        if (this.Checked)
        {
            pevent.Graphics.FillRectangle(new SolidBrush(Color.Blue), new Rectangle(0, 0, 16, 16));
        }
        else
        {
            pevent.Graphics.FillRectangle(new SolidBrush(Color.Red), new Rectangle(0, 0, 16, 16));
        }
    }
} 
```

这很简单，但它给了你基本的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:28:50.820

一个简单的：

覆盖复选框`OnPaint(PaintEventArgs e)`如下：

```
Graphics g = e.Graphics;

        base.OnPaint(e);
        //// Fill the background
        //SetControlSizes();

        // Paint the outer rounded rectangle
        g.SmoothingMode = SmoothingMode.AntiAlias;
        using (GraphicsPath outerPath = GeneralUtilities.RoundedRectangle(mLabelRect, 1, 0))
        {
            using (LinearGradientBrush outerBrush = new LinearGradientBrush(mLabelRect,
                   mGradientTop, mGradientBottom, LinearGradientMode.Vertical))
            {
                g.FillPath(outerBrush, outerPath);
            }
            using (Pen outlinePen = new Pen(mGradientTop, mRectOutlineWidth))
            {
                outlinePen.Alignment = PenAlignment.Inset;
                g.DrawPath(outlinePen, outerPath);
            }
        }

        //// Paint the gel highlight
        using (GraphicsPath innerPath = GeneralUtilities.RoundedRectangle(mHighlightRect, mRectCornerRadius, mHighlightRectOffset))
        {
            using (LinearGradientBrush innerBrush = new LinearGradientBrush(mHighlightRect,
                   Color.FromArgb(mHighlightAlphaTop, Color.White),
                   Color.FromArgb(mHighlightAlphaBottom, Color.White), LinearGradientMode.Vertical))
            {
                g.FillPath(innerBrush, innerPath);
            }
        }
        // Paint the text
        TextRenderer.DrawText(g, Text, Font, mLabelRect, Color.White, Color.Transparent,
        TextFormatFlags.HorizontalCenter | TextFormatFlags.VerticalCenter | TextFormatFlags.EndEllipsis); 
```

但是如果你想拥有一个好的你必须使用[wpf CheckBox ControlTemplate Example](http://msdn.microsoft.com/en-us/library/ms752319%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T14:56:44.647

我以不同的方式解决了这个问题，我使用背景图像并将其居中，然后在检查更改时更改主图像。这似乎是我想要的。

这样做有一个问题，如果背景图像尺寸不合适，与检查图像重叠，那么它看起来就不正确。

正确的解决方案是 icemanind 描述的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-07T11:52:39.543

[![自定义复选框](https://i.stack.imgur.com/ky44Z.png)](https://i.stack.imgur.com/ky44Z.png)

完整的自定义 CheckBox 控件，支持主题化

1.  预定义样式（VS 2019 Dark and Light）。

2.  支持 AutoSize 属性。

3.  支持焦点、鼠标输入和鼠标按下事件中的自定义颜色。

4.  支持自定义复选标记（形状和颜色）。

5.  用于自定义 CheckBox 控件外观的公共属性。

    ```
    'Copyright (c) Smart PC Utilities, Ltd.
    'All rights reserved.

    #Region "References"

    Imports System.ComponentModel
    Imports System.Drawing.Drawing2D

    #End Region

    Namespace FlatUI

    ''' <summary>
    ''' Flat CheckBox control
    ''' </summary>
    Public NotInheritable Class FlatCheckBox
        Inherits CheckBox

    #Region "Private Members"

        Dim _theme As UITheme = UITheme.LightBlue

        Private _boxNormalBackColor As Color = Color.FromArgb(243, 249, 255)
        Private _boxFocusBackColor As Color = Color.FromArgb(243, 249, 255)
        Private _boxMouseDownBackColor As Color = Color.FromArgb(51, 153, 255)

        Private _boxNormalBorderColor As Color = Color.FromArgb(30, 30, 30)
        Private _boxFocusBorderColor As Color = Color.FromArgb(51, 153, 255)
        Private _boxMouseDownBorderColor As Color = Color.FromArgb(51, 153, 255)

        Private _checkMarkNormalColor As Color = Color.FromArgb(30, 30, 30)
        Private _checkMarkFocusColor As Color = Color.FromArgb(30, 30, 30)
        Private _checkMarkMouseDownColor As Color = Color.FromArgb(243, 249, 255)

        Private _focusCuesColor As Color = Color.Gray

        Private _isMouseEnter As Boolean
        Private _isMouseDown As Boolean

    #End Region

    #Region "Constants"

        Const TEXT_X = 21
        Const TEXT_Y = 2

        Const BOX_X = 4
        Const BOX_Y = 4

        Const BOX_WIDTH = 12
        Const BOX_HEIGHT = 12

    #End Region

    #Region "Public Methods"

        Public Sub New()

            SetStyle(ControlStyles.OptimizedDoubleBuffer, True)

            BackColor = Color.FromArgb(251, 251, 251)
            ForeColor = Color.FromArgb(30, 30, 30)
            Appearance = Appearance.Button
            FlatStyle = FlatStyle.Flat
            FlatAppearance.BorderSize = 0
            DoubleBuffered = True
            UseVisualStyleBackColor = False

        End Sub

    #End Region

    #Region "Public Properties"

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The box backcolor in the normal state.")> <DefaultValue(GetType(Color), "243, 249, 255")>
        Public Property BoxNormalBackColor As Color
            Get
                Return _boxNormalBackColor
            End Get
            Set(value As Color)
                _boxNormalBackColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The box backcolor when the CheckBox control is focused.")> <DefaultValue(GetType(Color), "243, 249, 255")>
        Public Property BoxFocusBackColor As Color
            Get
                Return _boxFocusBackColor
            End Get
            Set(value As Color)
                _boxFocusBackColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The box backcolor when the CheckBox control is clicked.")> <DefaultValue(GetType(Color), "51, 153, 255")>
        Public Property BoxMouseDownBackColor As Color
            Get
                Return _boxMouseDownBackColor
            End Get
            Set(value As Color)
                _boxMouseDownBackColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The box border color in the normal state.")> <DefaultValue(GetType(Color), "30, 30, 30")>
        Public Property BoxNormalBorderColor As Color
            Get
                Return _boxNormalBorderColor
            End Get
            Set(value As Color)
                _boxNormalBorderColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The box border color when the CheckBox control is focused.")> <DefaultValue(GetType(Color), "51, 153, 255")>
        Public Property BoxFocusBorderColor As Color
            Get
                Return _boxFocusBorderColor
            End Get
            Set(value As Color)
                _boxFocusBorderColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The box border color when the CheckBox control is clicked.")> <DefaultValue(GetType(Color), "51, 153, 255")>
        Public Property BoxMouseDownBorderColor As Color
            Get
                Return _boxMouseDownBorderColor
            End Get
            Set(value As Color)
                _boxMouseDownBorderColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The CheckBox check-mark color in the normal state.")> <DefaultValue(GetType(Color), "30, 30, 30")>
        Public Property CheckMarkNormalColor As Color
            Get
                Return _checkMarkNormalColor
            End Get
            Set(value As Color)
                _checkMarkNormalColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The CheckBox check-mark color when the CheckBox control is focused.")> <DefaultValue(GetType(Color), "30, 30, 30")>
        Public Property CheckMarkFocusColor As Color
            Get
                Return _checkMarkFocusColor
            End Get
            Set(value As Color)
                _checkMarkFocusColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The CheckBox check-mark color when the CheckBox control is clicked.")> <DefaultValue(GetType(Color), "243, 249, 255")>
        Public Property CheckMarkMouseDownColor As Color
            Get
                Return _checkMarkMouseDownColor
            End Get
            Set(value As Color)
                _checkMarkMouseDownColor = value
                Invalidate()
            End Set
        End Property

        <Localizable(True)> <Category("Flat CheckBox")> <Description("The CheckBox control focus cues color.")> <DefaultValue(GetType(Color), "Gray")>
        Public Property FocusCuesColor As Color
            Get
                Return _focusCuesColor
            End Get
            Set(value As Color)
                _focusCuesColor = value
                Invalidate()
            End Set
        End Property

        <Category("Flat CheckBox")> <Description("The general style of the Flat CheckBox control.")> <DefaultValue(GetType(UITheme), "1")> Public Property Theme As UITheme
            Get
                Return _theme
            End Get
            Set(value As UITheme)
                _theme = value

                If _theme = UITheme.DarkBlue Then

                    BackColor = Color.FromArgb(37, 37, 38)
                    ForeColor = Color.Gainsboro
                    BoxNormalBackColor = Color.FromArgb(31, 31, 32)
                    BoxFocusBackColor = Color.FromArgb(31, 31, 32)
                    BoxMouseDownBackColor = Color.FromArgb(0, 122, 204)
                    BoxNormalBorderColor = Color.Gainsboro
                    BoxFocusBorderColor = Color.FromArgb(0, 122, 204)
                    BoxMouseDownBorderColor = Color.FromArgb(0, 122, 204)
                    CheckMarkNormalColor = Color.FromArgb(241, 241, 241)
                    CheckMarkFocusColor = Color.FromArgb(241, 241, 241)
                    CheckMarkMouseDownColor = Color.FromArgb(241, 241, 241)
                    FocusCuesColor = Color.Gray

                ElseIf _theme = UITheme.LightBlue Then

                    BackColor = Color.FromArgb(251, 251, 251)
                    ForeColor = Color.FromArgb(30, 30, 30)
                    BoxNormalBackColor = Color.FromArgb(243, 249, 255)
                    BoxFocusBackColor = Color.FromArgb(243, 249, 255)
                    BoxMouseDownBackColor = Color.FromArgb(51, 153, 255)
                    BoxNormalBorderColor = Color.FromArgb(30, 30, 30)
                    BoxFocusBorderColor = Color.FromArgb(51, 153, 255)
                    BoxMouseDownBorderColor = Color.FromArgb(51, 153, 255)
                    CheckMarkNormalColor = Color.FromArgb(30, 30, 30)
                    CheckMarkFocusColor = Color.FromArgb(30, 30, 30)
                    CheckMarkMouseDownColor = Color.FromArgb(243, 249, 255)
                    FocusCuesColor = Color.Gray

                End If

                Invalidate()

            End Set
        End Property

    #End Region

    #Region "Private Methods"

        Private Sub ResizeForAutoSize()
            If AutoSize Then SetBoundsCore(Left, Top, Width, Height, BoundsSpecified.Size)
        End Sub

        Private Function GetAutoSize() As Size

            Dim g = CreateGraphics()
            Dim textSize = g.MeasureString(Text, Font)
            Dim cntrlSize As New Size(CInt(textSize.Width + TEXT_X), CInt(textSize.Height + (TEXT_Y * 2)))

            Return cntrlSize

        End Function

    #End Region

    #Region "Overridden Methods"

        Protected Overrides Sub OnPaint(e As PaintEventArgs)

    #Disable Warning CA1062 ' Validate arguments of public methods
            e.Graphics.SmoothingMode = SmoothingMode.AntiAlias
    #Enable Warning CA1062 ' Validate arguments of public methods
            e.Graphics.Clear(BackColor)

            'Draw CheckBox text

            Using b As New SolidBrush(ForeColor)
                e.Graphics.DrawString(Text, Font, b, TEXT_X, TEXT_Y)
            End Using

            'Draw box background

            Dim boxBackgroundColor As Color

            If _isMouseDown Then
                boxBackgroundColor = _boxMouseDownBackColor
            ElseIf Focused OrElse _isMouseEnter Then
                boxBackgroundColor = _boxFocusBackColor
            Else
                boxBackgroundColor = _boxNormalBackColor
            End If

            Using b As New SolidBrush(boxBackgroundColor)
                e.Graphics.FillRectangle(b, BOX_X, BOX_Y, BOX_WIDTH, BOX_HEIGHT)
            End Using

            'Draw check mark

            If Checked Then

                Dim checkMarkColor As Color

                If _isMouseDown Then
                    checkMarkColor = _checkMarkMouseDownColor
                ElseIf Focused OrElse _isMouseEnter Then
                    checkMarkColor = _checkMarkFocusColor
                Else
                    checkMarkColor = _checkMarkNormalColor
                End If

                Dim rectCheck = New Rectangle(BOX_X + 2, BOX_Y + 3, BOX_WIDTH - 4, BOX_HEIGHT - 6)

                Using p = New Pen(checkMarkColor, 2)
                    e.Graphics.DrawLines(p, New Point() {New Point(rectCheck.Left, rectCheck.Bottom - CInt(rectCheck.Height / 2)), New Point(rectCheck.Left + CInt(rectCheck.Width / 3), rectCheck.Bottom), New Point(rectCheck.Right, rectCheck.Top)})
                End Using

            End If

            'Draw box border

            Dim boxBorderColor As Color

            If _isMouseDown Then
                boxBorderColor = _boxMouseDownBorderColor
            ElseIf Focused OrElse _isMouseEnter Then
                boxBorderColor = _boxFocusBorderColor
            Else
                boxBorderColor = _boxNormalBorderColor
            End If

            Using p = New Pen(boxBorderColor)
                e.Graphics.DrawRectangle(p, BOX_X, BOX_Y, BOX_WIDTH, BOX_HEIGHT)
            End Using

            'Draw focus cues

            If Focused Then

                Dim textSize = e.Graphics.MeasureString(Text, Font)

                Dim focusRect = New Rectangle(TEXT_X - 1, TEXT_Y - 1, CInt(textSize.Width), CInt(textSize.Height))
                focusRect.Inflate(-1, -1)

                Using p As New Pen(_focusCuesColor) With {.DashStyle = DashStyle.Dot}
                    e.Graphics.SmoothingMode = SmoothingMode.Default
                    e.Graphics.DrawRectangle(p, focusRect)
                End Using

            End If

            ResizeForAutoSize()

        End Sub

        Public Overrides Function GetPreferredSize(proposedSize As Size) As Size
            Return GetAutoSize()
        End Function

        Protected Overrides Sub SetBoundsCore(x As Integer, y As Integer, width As Integer, height As Integer, specified As BoundsSpecified)

            If AutoSize AndAlso (specified And BoundsSpecified.Size) <> 0 Then
                Dim cntrlSize = GetAutoSize()
                width = cntrlSize.Width
                height = cntrlSize.Height
            End If

            MyBase.SetBoundsCore(x, y, width, height, specified)

        End Sub

        Protected Overrides Sub OnResize(e As EventArgs)
            MyBase.OnResize(e)
            Invalidate()
        End Sub

        Protected Overrides Sub OnMouseEnter(eventargs As EventArgs)

            MyBase.OnMouseEnter(eventargs)

            _isMouseEnter = True
            Invalidate()

        End Sub

        Protected Overrides Sub OnMouseLeave(eventargs As EventArgs)

            MyBase.OnMouseLeave(eventargs)

            _isMouseEnter = False
            Invalidate()

        End Sub

        Protected Overrides Sub OnMouseDown(mevent As MouseEventArgs)

            MyBase.OnMouseDown(mevent)

            _isMouseDown = True
            Invalidate()

        End Sub

        Protected Overrides Sub OnMouseUp(mevent As MouseEventArgs)

            MyBase.OnMouseUp(mevent)

            _isMouseDown = False
            Invalidate()

        End Sub

        <DefaultValue(GetType(Color), "251, 251, 251")> Public Overrides Property BackColor As Color
            Get
                Return MyBase.BackColor
            End Get
            Set(value As Color)
                MyBase.BackColor = value
            End Set
        End Property

        <DefaultValue(GetType(Color), "30, 30, 30")> Public Overrides Property ForeColor As Color
            Get
                Return MyBase.ForeColor
            End Get
            Set(value As Color)
                MyBase.ForeColor = value
            End Set
        End Property

    #End Region

    End Class

    End Namespace 
    ```

主题枚举

```
'Copyright (c) Smart PC Utilities, Ltd.
'All rights reserved.

Namespace FlatUI

    Public Enum UITheme As Integer

        ''' <summary>
        ''' Undefined style
        ''' </summary>
        Undefined = -1

        ''' <summary>
        ''' Visual Studio 2019 Dark style
        ''' </summary>
        DarkBlue = 0

        ''' <summary>
        ''' Visual Studio 2019 Light style
        ''' </summary>
        LightBlue = 1

    End Enum

End Namespace 
```

# ruby-on-rails - 是否有 rspec 助手来测试更新验证？

> ID：15813874
> 
> 赞同：1
> 
> 时间：2013-04-04T14:19:59.410
> 
> 标签：ruby-on-rails, activerecord, rspec, rspec2

我正在使用以下验证

“validates_presense_of :column, :on => :update”

rspec 是否提供了帮助程序来测试上述内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:24:05.837

也许：

```
describe ThingsController, "#update" do
  context "for a thing" do
    before do
      get :update, :id => 1
    end
    it { should validate_presence_of :your_column_name }
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:40:10.820

找到了这个，这正是我想要的

[http://remarkable.rubyforge.org/activerecord/classes/Remarkable/ActiveRecord/Matchers.html](http://remarkable.rubyforge.org/activerecord/classes/Remarkable/ActiveRecord/Matchers.html)

# c# - 从存储过程中读取输出参数值

> ID：15813878
> 
> 赞同：1
> 
> 时间：2013-04-04T14:20:05.490
> 
> 标签：c#, mysql

我的应用程序使用一些存储过程相当快地插入到多个表中。每个表中插入行的 PK 值用于插入到下一个表中：

基本上，我的存储过程如下所示：

```
create procedure `insert_file`(out @fileid bigint, @filedata longblob, @datesaved datetime)
    begin
        insert into file(filedata, datesaved)
        values(@filedata, @datesaved);

        set @fileid = last_insert_id();
    end $$
delimiter ; 
```

我所期望的是输出刚刚插入的行的 ID，以便我可以在我的“加入”表（将此文件连接到另一个对象的表 - 例如用户或文章）中使用它。

这是我的阅读代码：

```
Int64 lastInsertID;

// db.getReader(string cmd, List<MySqlParameter>());
using (MySqlDataReader dr = db.getReader("insert_file", requiredParameters))
{
    if (dr.HasRows())
    {
        dr.Read();

        lastInsertID = dr.GetInt64("@fileid");
    }
} 
```

虽然这在我的脑海中似乎是有道理的，但我一直收到一个错误：

> 在结果中找不到指定的列：@fileid

有人可以帮我理解我在这里做错了什么（以及如何解决它）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:23:09.150

*   首先：在阅读器打开之前，您无法读取输出参数。
*   第二：您无法使用读取器读取输出参数，因为存储过程使用 Set 语句并将值分配给变量而不是您使用数据读取器返回的结果集

可能您可以尝试更改存储过程的最后一行

```
 select last_insert_id(); 
```

但是，那么您就不再需要输出参数了。

使用该参数的正确方法是通过 ExecuteNonQuery

```
using (MySqlConnection cn = new MySqlConnection(GetConnectionString()))
using(MySqlCommand cmd = new MySqlCommand("insert_file", cn))
{
    cn.Open();
    // Add the required parameters here //
    cmd.ExecuteNonQuery();
    lastInsertID = Convert.ToInt32(cmd.Parameters["@fileid"].Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:28:23.547

如果 Rows 集合中有 Row，则 forst 单元格中的值应该是您要查找的值。尝试这个：

```
Int64 lastInsertID;

    // db.getReader(string cmd, List<MySqlParameter>());
    using (MySqlDataReader dr = db.getReader("insert_file", requiredParameters))
    {
        if (dr.HasRows())
        {
            dr.Read();

            lastInsertID = dr.Rows[0].Items[0];
        }
    } 
```

# javascript - 在 Docslist 中找出一个文件夹是否有子文件夹，以及该子文件夹是否有子文件夹等等

> ID：15813879
> 
> 赞同：0
> 
> 时间：2013-04-04T14:20:05.633
> 
> 标签：javascript, google-apps-script

我想知道是否可以循环遍历包含其他文件夹的文件夹，而其他文件夹包含其他文件夹，依此类推。我不知道有多少子文件夹有子文件夹，并且想找到一种无需硬编码即可检查的方法。向下两层很容易，但在那之后我很难处理多分支并以我以后可以操作的方式存储它。有小费吗？最后，文件夹结构将用于创建动态 Google 站点布局。

这是我到目前为止的一个例子：

```
function myFunction() {
 //Get the folder
 var topFolders = DocsList.getFolder('TestFolder');
 var lvlOneFolders = topFolders.getFolders();
 var num1Folders = lvlOneFolders.length;
 var someArray = [];

 for (var i = 0; i < num1Folders; i++){

 someArray[i] = lvlOneFolders[i].getFolders();
  }

 Logger.log(someArray);

} 
```

问候，

肖恩

```
function myFunctionTest() {
  var site = SitesApp.getSite('finance-in-motion.com', 'test-site');
  //Get the folder
  var rootFolder = DocsList.getFolder('TestFolder');
  var rootName = rootFolder.getName();
  var files = rootFolder.getFiles();
  var page;

  site.createWebPage(rootName, rootName,"<h1>What evs21</h1>");

  page = site.getChildByName(rootName);

  createFiles(page,files);

  recursTest(rootFolder);

  }

function recursTest (currentFolder){

  var curLength=currentFolder.getFolders().length;

   for(var i = curLength; i > 0; i --){

     var folders = currentFolder.getFolders();
     var parentName = currentFolder.getName();
     var foldername = folders[i-1].getName();
     var files = folders[i-1].getFiles();
     getSiteTest(foldername,parentName,files);

     if(folders[i-1].getFolders().length != 0){
       recursTest(folders[i-1]);
     }
   }

 }

 function getSiteTest(title,parent,files) {

   var site = SitesApp.getSite('finance-in-motion.com', 'test-site');

   var matches = site.search(parent);

   var page = matches[0];

   var child;

   //create the sibling page
   page.createWebPage(title, title,"<h1>What evs21</h1>");

   child = page.getChildByName(title);

   createFiles(child,files);

  }

 function createFiles(page,files){

   var name;

   if (files.length !=0){

      for (i in files){

         name = files[i].getName();
         page.createWebPage(name,name,"<h1>What evs21</h1>"); 

   }

         }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:38:13.080

巧合的是，我遇到了类似的问题。我正在收集从属文件夹和文件的文件夹名称和数量。这可能会有所帮助。

```
 function listFolders() {
    var start = new Date();
    var topFolder = DocsList.getFolderById(TOP) ; // start point
    var foldersArray = [];
    foldersArray = getFolders(topFolder.getName(),topFolder,foldersArray);
    // do what you want with array of folder data
    }
    function getFolders(path, container,arrayin) {
    Logger.log(arrayin)

    var folders = container.getFolders(0, 300);
     var folderCount = folders.length;
         var fileCount = container.getFiles().length;
             arrayin.push([container.getId(),path,fileCount,folderCount]);
                 Logger.log(path + " #files= "+fileCount+ " #folders = "+folderCount);
    for (var i=0;i<folders.length;i++) {

    var thisFolder = folders[i].getName();
    var thisPath = path+"/"+thisFolder;

    getFolders(thisPath,folders[i],arrayin)
    }
return arrayin;
} 
```

我不是最棒的 javascript 人，所以欢迎对递归的东西进行改进

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T21:26:47.610

**编辑：**使用**DavidF 更好**的答案我编写了这个电子表格绑定脚本，它可以很好地展示结果，其中包含不同文件类型和总计的列。

只是为了说明;-)

**Edit2：** *我用 url 替换了 ID，因此我可以直接从 SS 转到该文件夹​​并添加执行时间显示 + 一些格式和公式。（注意：container.getUrl() 不适用于根文件夹，这就是为什么我在 IF 条件下用直接 url 替换它的原因）*

这是代码：

```
function onOpen() {
  var menuEntries = [ {name: "Update data", functionName: "listFolders"}
                     ];
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    ss.addMenu("ListFolders",menuEntries);//
}

function listFolders() {
    var start = new Date();
    var dateString = Utilities.formatDate(new Date(),Session.getTimeZone(), 'MMM-dd-yyyy');
    var topFolder = DocsList.getRootFolder() ; // start point
    var foldersArray = [];
    foldersArray = getFolders(topFolder.getName().replace('Root','MyDrive'),topFolder,foldersArray);
    foldersArray.unshift(['Folders url','path','# SubFolders','# Spreadsheets','# Docs','# Forms','# Drawings','# Presentations','# others',])
//    Logger.log(foldersArray)
    var l = foldersArray.length
    var duration = (new Date().getTime()-start.getTime())/1000;
    var durationString = Utilities.formatString("%01.1f", duration)
    var sh = SpreadsheetApp.getActiveSheet().clear();
    sh.getRange(1,1,1,foldersArray[0].length).setBackground('#ffffaa').setBorder(true,true,true,true,true,true).setFontWeight('bold');
    sh.getRange(1,1,l,foldersArray[0].length).setValues(foldersArray).setVerticalAlignment('middle').setWrap(false);  
    sh.getRange(l+1,2,1,foldersArray[0].length-1)
    .setFormulas([['="Situation on '+dateString+' ..............Total = "&SUM(C'+(l+1)+':I'+(l+1)+')','=SUM(C2:C'+l+')','=SUM(D2:D'+l+')','=SUM(E2:E'+l+')','=SUM(F2:F'+l+')','=SUM(G2:G'+l+')','=SUM(H2:H'+l+')','=SUM(I2:I'+l+')']])  
    .setBackground('#ffffaa').setBorder(true,true,true,true,true,true).setFontWeight('bold').setVerticalAlignment('middle').setHorizontalAlignment('right');  
    sh.getRange(l+1,1).setFontColor('grey').setFontSize(9).setVerticalAlignment('middle').setHorizontalAlignment('center').setValue('execution time: '+durationString+' Seconds');
    sh.setFrozenRows(1);
}

function getFolders(path, container,arrayin) {
     var folders = container.getFolders(0, 300);
     var folderCount = folders.length;
         var ssCount = container.getFilesByType(DocsList.FileType.SPREADSHEET).length;
         var docCount = container.getFilesByType(DocsList.FileType.DOCUMENT).length;
         var formCount = container.getFilesByType(DocsList.FileType.FORM).length;
         var drawCount = container.getFilesByType(DocsList.FileType.DRAWING).length;
         var presCount = container.getFilesByType(DocsList.FileType.PRESENTATION).length;
         var otherCount = container.getFilesByType(DocsList.FileType.OTHER).length;

         if(path=='MyDrive'){arrayin.push(['https://drive.google.com/?hl=fr&tab=wo#my-drive',path,folderCount,ssCount,docCount,formCount,drawCount,presCount,otherCount])}
         else{arrayin.push([container.getUrl(),path,folderCount,ssCount,docCount,formCount,drawCount,presCount,otherCount])}

    for (var i=0;i<folders.length;i++) {
      var thisFolder = folders[i].getName();
      var thisPath = path+"/"+thisFolder;
      getFolders(thisPath,folders[i],arrayin)
      }
  return arrayin;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/kxkv8.png)

* * *

*上一个答案：*

这是一条路。

它从根开始扫描 3 个级别，但您可以通过遵循相同的结构轻松增强它以使其更深入。

结果出现在一个数组中，所有文件夹都以经典方式（文件夹/子文件夹/子子文件夹）表示，因为我不知道您想如何使用它。 3

```
function folderTree() {
 var result = [] 
 var foldersL1 = DocsList.getRootFolder().getFolders()
   for(n=0;n<foldersL1.length;++n){
result.push(foldersL1[n].getName())
     var foldersL2 = foldersL1[n].getFolders()
       for(m=0;m<foldersL2.length;++m){
result.push(foldersL1[n].getName()+'/'+foldersL2[m].getName())       
         var foldersL3 = foldersL2[m].getFolders()
            for(o=0;o<foldersL3.length;++o){
result.push(foldersL1[n].getName()+'/'+foldersL2[m].getName()+'/'+foldersL3[o].getName()+'/')
            }
          }
        }
Logger.log(result)     
} 
```

# inheritance - class_initialize() 是做什么的？

> ID：15813880
> 
> 赞同：2
> 
> 时间：2013-04-04T14:20:10.517
> 
> 标签：inheritance, createjs

我正在尝试学习如何创建 createjs 对象。

我正在调查 createjs/tutorials/Inheritance/demo.html 和 Button.js

```
(function() {
var Button = function(label, color) {
  this.initialize(label, color);
}
var p = Button.prototype = new createjs.Container(); // inherit from Container

p.label;
p.background;
p.count = 0;

*p.Container_initialize = p.initialize;*
Button.prototype.initialize = function (label, color) {

    *this.Container_initialize();*

    this.label = label;
    if (!color) { color = "#CCC"; }

    var text = new createjs.Text(label, "20px Arial", "#000");
    text.textBaseline = "top";
    text.textAlign = "center";

    var width = text.getMeasuredWidth()+30;
    var height = text.getMeasuredHeight()+20;

    this.background = new createjs.Shape();
    this.background.graphics.beginFill(color).drawRoundRect(0,0,width,height,10);

    text.x = width/2;
    text.y = 10;

    this.addChild(this.background,text); 
    this.addEventListener("click", this.handleClick);  
    this.addEventListener("tick", this.handleTick);
} 

p.handleClick = function (event) {    
    var target = event.target;
    alert("You clicked on a button: "+target.label);
} 

p.handleTick = function(event) {       
    p.alpha = Math.cos(p.count++*0.1)*0.4+0.6;
}

window.Button = Button;
}()); 
```

有一个自调用函数 this.Container_initialize(); 我试图将其注释掉，这使代码无法正常工作。有人可以解释 Container_initialize 函数的作用吗？那是无限循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:46:47.863

这不是一个无限循环，正在发生的事情是您正在制作旧初始化的“副本”（实际上只是一个新的引用）。

```
p.Container_initialize = p.initialize; 
```

这里，`p.initialize`与 相同`createjs.Container.prototype.initialize`。当你写：

```
Button.prototype.initialize = function(...) { 
```

您正在覆盖`Container.prototype.initialize`，但由于您将其保存在 中，`Container_initialize`您仍然可以调用它。

至于函数的作用，那是阅读源代码的问题，它可能会设置容器对象所需的任何内部内容。这就是为什么你不能不调用它的原因。

# jquery - 使用 jQuery 更改单元格的宽度

> ID：15813884
> 
> 赞同：1
> 
> 时间：2013-04-04T14:20:20.083
> 
> 标签：jquery

这是代码..

```
<td align="right" width="135"> 
    <div align="right">
        <font class="class123"><b>$9.67</b></font>
    </div>
</td> 
```

我在表格中有多个该单元格的实例，并且想更改它们的宽度。我尝试过类似...

```
jQuery(".class123").closest("tr").html(); 
```

并考虑换掉所有的html，但我认为这不是最好的方法。我需要为所有细胞做这件事。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:26:57.953

（我认为）这就是你想要的..

仅更改样式- [jsFiddle 1](http://jsfiddle.net/fYp44/)。

```
$(".class123").closest("td").css('width', '300px'); 
```

或者宽度本身 - [jsFiddle 2](http://jsfiddle.net/fYp44/2/)

```
$(".class123").closest("td").width('400px'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:26:38.200

让我知道我是否理解...您想更改所有 td 宽度属性对吗？试试这个：

```
$('.class123').each(function(){
   $(this).closest('td').attr('width', 500);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:28:07.347

像这样的东西：

```
$(".class123").each(function(index, data){
    $(this).width("1009034823px"); //Or however large you want it.
}); 
```

看看文档：[jquery.width()](http://api.jquery.com/width/)

PS：您提供的 html 没有任何 TR 元素，因此我删除了该部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:29:06.760

html

```
 <table>
  <tr>
   <td id="myRow"></td>
 </tr> 
```

jQuery

```
$(document).ready(function () {
  var newWidth = $("#myRow").width();
   $("#myRow").width(newWidth*0.4);
} 
```

该代码改变了宽度，可能是你想要这个东西。

# matlab - MATLAB，如何在不超过内存限制的情况下计算大坐标集之间的距离？

> ID：15813888
> 
> 赞同：6
> 
> 时间：2013-04-04T14:20:33.773
> 
> 标签：matlab, math, matrix, coordinates, sparse-matrix

（使用`MATLAB`）我有一个大的坐标矩阵和一个大的稀疏邻接矩阵，它们的坐标相互连接。我之前在 SO 上问过，如何在[这个 SO question中](https://stackoverflow.com/q/15482539/410975)*有效地*计算这些距离，但我现在遇到了**内存问题**，这是一个更严重的问题。

 **我使用这个 MATLAB 函数来计算距离矩阵`Dists = pdist2(fruchterman_graph(:,:),fruchterman_graph(:,:),'euclidean');`，但它在大型网络上无论是速度还是内存都失败了。

这是仅在小图（不是数十万）上运行的代码：

```
coordinate = kamada_graph;
    [n, d] = size(kamada_graph);
    assert(d == 2);
    resi = sparse(adj*  spdiags((1:n)',0,n,n));
    resj = sparse(spdiags((1:n)',0,n,n) * adj);
    res = sparse(n,n);
    f = find(adj);  
    res(f) = sqrt((coordinate(resi(f), 1) - coordinate(resj(f), 1)) .^ 2 +...
                          (coordinate(resi(f), 2) - coordinate(resj(f), 2)) .^ 2); 
```

这在*大*图上创建

> ？？？错误使用 ==> 查找矩阵太大而无法返回线性索引。
> 用于`[i,j] = find(S)`稀疏矩阵。
> ==> modulesize_graphs 中的错误在 49 `[f] = find(adj)`；

我改变了被称为的行：

```
[i,j] = find(ajd);    
res(i,j) = sqrt((coordinate(resi(i,j), 1) - coordinate(resj(i,j), 1)) .^ 2 +...
    (coordinate(resi(i,j), 2) - coordinate(resj(i,j), 2)) .^ 2); 
```

现在在小型网络（约500个顶点）上出现错误：

> ？？？内存不足。
> 键入 HELP MEMORY 作为您的选项。
> ==> modulesize_graphs 中的错误为 50
> `res(i,j) = sqrt((coordinate(resi(i,j), 1) - coordinate(resj(i,j), 1)) .^ 2 +...`

无论如何，有没有使用邻接矩阵和坐标矩阵计算距离矩阵`(N,2)`，值`x`，`y`而不会陷入内存问题并且可能也不会太慢？

`Adj`所需的输出是距离矩阵，即根据邻接矩阵连接的所有点之间的距离。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:28:40.783

要使用最少的内存计算逐点距离，您始终可以逐个元素地遍历邻接矩阵：

```
%# assuming a square and symmetric adjacency matrix
nCoords = size(adjMat,1);

%# there are at most (n^2-n) distances 
%# if this runs out of memory already, there 
%# is a way to only store existing distances to save 
%# even more memory
distances = NaN((nCoords^2-nCoords)/2,1);

ct = 0;
for row = 1:nCoords
   for col = 1:row-1
     ct = ct+1;
     if adjacencyMatrix(row,col)
        distances(ct) = sum( (coordinate(row,:)-coordinate(col,:)).^2 );
     end
   end
end

distances = sqrt(distances); 
```

* * *

使用稀疏方法，您可能想尝试以下方法（我认为您不需要`resi`and `resj`，除非我完全误解了您的问题）。

```
[row,col]=find(adjacencyMatrix);

distances = sqrt(sum( (coordinate(row,:) - coordinate(col,:)).^2 ,2));

sparseDistanceMatrix = sparse(row,col,distances); 
```**

# python - 使用 assimulo ida 的敏感性（来自日晷）

> ID：15813892
> 
> 赞同：1
> 
> 时间：2013-04-04T14:20:54.527
> 
> 标签：python, solver, differential-equations, equation-solving

我正在尝试使用 ida 和 assimulo 来解决敏感性问题。在没有敏感性的情况下解决问题可以正常工作，但现在我想用最终时间、初始值和控件（我的方程中使用的参数）的敏感性来解决。

我在 assimulo 页面上只找到了一个示例（这仅具有初始敏感性），我没有正确理解。

有人可以帮助我并解释需要如何实施不同的敏感性吗？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-01T20:19:35.807

我使用 CVode 求解器遵循关于不连续性的示例（[https://jmodelica.org/assimulo/_modules/assimulo/examples/cvode_with_disc.html#run_example](https://jmodelica.org/assimulo/_modules/assimulo/examples/cvode_with_disc.html#run_example)），这意味着我对“Explicit_Problem”类进行了子类化。

为了集成我的 ode 系统（具有不连续性），我确实覆盖了方法 'rhs'，它对我的​​ ode 系统进行了编码。更具体地说，我使用了以下签名：`def rhs(self, t, y, sw)`.

然后，为了获得参数敏感性，我只是像这样修改了签名`def rhs(self, t, y, sw, p)`，注意附加参数`p`！我还需要分配`p0`参数值，如示例中的初始值分配`y0`所示。就这么简单。

请注意，计算参数灵敏度也可能需要更多的计算时间（我发现要多 5 到 10 倍，但我的 ode 系统通常没有那么大）。

不幸的是，灵敏度是使用有限差分（前向或中央）计算的。据我了解，SUNDIALS 求解器能够进行最先进的算法微分，以获得求解它们的灵敏度方程以及原始 ode。希望在下一个版本中看到这一点:-)

# c++ - 在 C 中的不同函数中共享打开的文本文件

> ID：15813894
> 
> 赞同：2
> 
> 时间：2013-04-04T14:20:58.300
> 
> 标签：c++, c

指针不是我在 C 语言中的强项。所以我可能需要你们的一点帮助:)。我想在不同的函数中使用我的文本文件，但我只能在我的 A() 函数中打开它。

```
#include<stdio.h>
#include<stdlib.h>

void B(){
    // I want to work with FILE.TXT in this function without openining it here.

}

void A() {
    FILE *fr;
    fr = fopen("FILE.TXT","r");

    fclose(fr);
}

int main() {
char c;
while(c!='*') {
        c = getchar();
        if(c=='A') A(); 
        if(c=='B') B();
    }
    return 0;
} 
```

感谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:22:03.230

只需将`FILE*`周围作为参数传递给需要执行 I/O 的任何函数。

```
int main()
{
    FILE *fp = fopen("FILE.TXT", "r");
    // don't forget error checking

    A(fp);

    fclose(fp);
}

void A(FILE *fp)
{
    // whatever
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:29:19.053

您只需将其作为 FILE 指针参数传递给函数 B，如下所示：

> void B(FILE* const f){
>       //用 f 做事
> }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T15:27:55.470

要在函数中使用文件，您需要`FILE*`在该函数中有对象。有几种不同的选择，这些是最明显的选择：

1.  在 main 中打开`fr`，并将其传递给`A()`and`B()`
2.  `fr`创建一个全局变量，在其中打开它（`A()`确保不要关闭它！），在 B() 中使用它。

我更喜欢选项 1。使用全局变量通常会降低代码的可读性。

另请注意，您的代码允许在 A 之前调用 B()，这将尝试在打开文件之前使用该文件。假设您没有实现选项 1，您的代码将需要确保不会发生这种情况（或者以某种方式处理它）。

文件绝对不可能在 A 中打开和关闭，然后在 B 中使用。

# javascript - 在 contenteditable div 内的 span 元素后设置光标

> ID：15813895
> 
> 赞同：11
> 
> 时间：2013-04-04T14:20:58.383
> 
> 标签：javascript, contenteditable, html

如何在 contenteditable div 内的 span 元素之后设置光标？现在，我在 contenteditable div 内的 span 元素中有一个图像。

当我添加一些字符时，它们会添加到跨度内，但我希望将它们添加到跨度元素之后。有什么想法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-04T14:37:20.230

在 IE <= 8 以外的浏览器中，可以这样做：

```
function placeCaretAfterNode(node) {
    if (typeof window.getSelection != "undefined") {
        var range = document.createRange();
        range.setStartAfter(node);
        range.collapse(true);
        var selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
    }
} 
```

但是，一些浏览器（尤其是基于 WebKit 的浏览器）对于文档中哪些位置对插入符号有效有固定的想法，并且会将您添加到选择中的任何范围标准化以符合这些想法。下面的示例将在 Firefox 和 IE 9 中执行您想要的操作，但在 Chrome 或 Safari 中不会：

[http://jsfiddle.net/5dxwx/](http://jsfiddle.net/5dxwx/)

没有一种解决方法是好的。选项包括：

*   在 span 之后添加一个零宽度的空格字符并选择它
*   使用`<a>`元素而不是 a ，因为 WebKit 对元素`<span>`进行了例外处理`<a>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-02T13:45:05.520

我设法使用带有`&nbsp`. 例子 ：-`"<a>"+ content/element you want to add +"</a>&nbsp;"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T10:58:33.217

这个函数管理我的想法：

```
<script type="text/javascript">
function pasteHtmlAtCaret(char) {
        var sel = rangy.getSelection();
        var range = sel.rangeCount ? sel.getRangeAt(0) : null;
        var parent;
        if (range) {
            var parentEl = document.createElement("span");
        jQuery(parentEl).addClass('char').addClass('latest');
            parentEl.appendChild(range.createContextualFragment(char));

            // Check if the cursor is at the end of the text in an existing span
            if (range.endContainer.nodeType == 3
            && (parent = range.endContainer.parentNode)
            && (parent.tagName == "SPAN")) {
            range.setStartAfter(parent);
            }
            range.insertNode(parentEl);
        if(jQuery(parentEl).parent().get(0).tagName.toLowerCase() == 'span'){
            var spanParent = jQuery(parentEl).parent('span');
            var parentEl = jQuery('<span class="char latest spanchild"></span>').insertAfter(spanParent).append(parentEl).get(0);
        }
        jQuery("span.spanchild").each(function(index, element){
            var content = jQuery(element).children('span.char').first().html();
            jQuery(element).children('span.char').remove();
            jQuery(element).html(content);
            jQuery(element).removeClass('spanchild');
        });
            range.setStartAfter(parentEl);
            rangy.getSelection().setSingleRange(range);
        jQuery(parentEl).removeClass('latest');
        }
}
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-03T02:29:47.053

只是`span.contentEditable = false`为了蒂姆的解决方案正常工作;）

# oracle11g - EntityFramework 4.1 Code First Oracle 插入 PL/SQL 代码

> ID：15813896
> 
> 赞同：2
> 
> 时间：2013-04-04T14:20:58.463
> 
> 标签：oracle11g, ef-code-first, entity-framework-4.1, ef-model-first

我的项目有两个 EF 4.1 上下文，一个是模型优先，另一个是代码优先。这两个上下文都扩展了 DbContext 并连接到 Oracle 数据库。

在对大表（5M 记录）执行更新时，**模型优先**上下文会按预期生成 SQL，并且运行速度很快（毫秒）：

```
update <schema.table_name> set field = 'value' where id = 1234 
```

在对大表（4.7M 记录）执行更新时，**代码优先**上下文会产生一些奇怪的 PL/SQL：

```
declare
"UWI" nvarchar2(
                128)
;
begin
update
                "SCHEMA"."TABLE"
set "FIELD" = 'VALUE' /* :p0 */,

where ("UWI" = '2224434' /* :p37 */)

returning
"UWI" into
"UWI";
open '' /* :p38 */ for select

"UWI" as "UWI" 
from dual;
end; 
```

此更新语句需要 3 秒才能完成。

这是代码优先上下文的代码优先 EntityTypeConfiguration：

```
public WellEntityConfiguration()
{
    this.ToTable("TABLE", "SCHEMA");

    this.HasKey(entity => entity.Uwi);
    this.Property(entity => entity.Uwi).HasColumnName("UWI");

    ... //lots of properties being set
} 
```

有没有我可以设置的配置来强制 EF 生成简单的更新语句而不是疯狂的 PL/SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:09:46.067

答案有两个。

**从生成的 SQL 中删除 PL/SQL**

数据库中的列名全大写（“UWI”），而类的属性是驼峰式（“Uwi”）。我将属性名称更改为全大写，EF 删除了 PL/SQL 代码并仅生成 SQL：

```
UPDATE "SCHEMA"."TABLE"
SET "FIELD" = "VALUE"
WHERE ("UWI" = '2224434') 
```

但是，这并不能提高性能。

**为什么更新慢**

在与 DBA 一起跟踪查询后，我们发现 EF 将 Uwi 的值绑定到十六进制字符串而不是“2224434”。这导致 Oracle 进行全表扫描并影响性能。我需要在`Uwi`属性上指定列类型，如下所示：

```
this.Property(entity => entity.Uwi).HasColumnName("UWI").HasColumnType("VARCHAR2"); 
```

这`HasColumnType`是灵丹妙药，我的更新语句在 80 毫秒内返回。

# c - 如何在C中为非常大的二维数组分配内存

> ID：15813900
> 
> 赞同：1
> 
> 时间：2013-04-04T14:21:08.183
> 
> 标签：c, allocation, large-data

我有一个包含 500 万行和 4 列的文件。像往常一样，我尝试读取 500 万乘 4 数组中的数据。

```
long M = 5000000;
double *coordinates[M];
for (i = 0; i < M; i++){
    coordinates[i] = (double *) calloc(3, sizeof(double));
} 
```

但是当我运行这段代码时，它有段错误。在网上搜索了答案后，我知道这是因为堆栈没有那么多内存。如果数组是一维的，有人建议使用 malloc 在堆上分配内存。但我需要一个二维数组，我真的需要这么多内存，我希望有人能帮我解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:42:26.880

你真的需要额外的指针层吗？

```
size_t M = 4321098;
double (*coordinates)[4] = calloc(M, sizeof *coordinates); 
```

你就完成了。 `coordinates[234329][3]=3.1415926535;`一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:23:56.803

你可以改变

```
double *coordinates[M]; 
```

到

```
double **coordinates = malloc(M * sizeof(*coordinates)); 
```

`free`稍后在程序中确保此内存。

```
for (i = 0; i < M; i++){
    free(coordinates[i]);
}
free(coordinates); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:46:40.717

正如大家所说，问题在于您试图在函数的堆栈上分配该数组。但是，如果您在代码中将该数组定义为静态怎么办？（就像函数中的全局变量或静态变量？）不必在每次调用函数时都分配它。

这将避免对 malloc 和 calloc 的调用（以固定大小的数组而不是动态数组为代价）。

```
#include <stdio.h>
#include <stdlib.h>
#define ROWS 10000000
#define COLS 4
double coordinates[ROWS][COLS];

int main() {

    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            coordinates[i][j] = 1.0;
        }
    }

    printf("%.4f\n", coordinates[0][2]);

    return 0;
} 
```

自动变量和静态变量之间的区别在于，自动变量存在于函数内部（可能每次调用函数时都会分配它们，而静态变量会永远保持其值，并且可能只分配一次）。

类似的东西。我使用的是 C99，所以你可以用.. c99 编译它

或 gcc -std=c99

或 CC=c99 制作文件

此外，在 Linux 中（我也认为在 Windows 中）您可以[增加程序的堆栈大小。](https://stackoverflow.com/questions/2279052/increase-stack-size-in-linux-with-setrlimit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:23:44.283

您试图在堆栈上声明该数组，而不是在导致堆栈溢出错误的堆上。

尝试以下...

```
double** coordinates = malloc( sizeof( double* ) * M ); 
```

# ruby-on-rails - 为整个应用程序轨定义清理功能

> ID：15813901
> 
> 赞同：2
> 
> 时间：2013-04-04T14:21:08.790
> 
> 标签：ruby-on-rails, validation, dry, sanitize

我有一个应用程序，我想在将用户输入保存到数据库之前对其进行清理。我可以轻松地在所有模型中添加一个函数`clean`并用 调用它`before_validation :clean`，但我的函数`clean`是通用的。

我想知道它是否存在一种方法来为应用程序中的所有模型验证调用此函数并且只声明一次。

我已经进行了一些研究，但我没有找到适合我的答案，这让我很困扰，在我的所有模型中重复该函数和 before_validation，它还不是很干燥。

预先感谢您的回复。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:12:47.637

行！我认为您可能希望使用超级模型进行一些继承，因为在活动记录库中注入可能对您自己很危险，所以如果您有一个超级模型从 ActiveRecord 库继承并经过验证，然后您创建其他模型下降这一点，您将对所有这些都进行验证，而无需再次进行验证。

```
class SuperModel < ActiveRecord::Base
 #This if for avoid single table inheritance 
 self.abstract_class = true
 #-------------------------------------------------------------------------------
 before_validation :clean

end
class Example < SuperModel
 #this will have the before_validation :clean
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:41:11.720

我想你想扩展活动记录验证......看看这个： [通过扩展向 ActiveRecord 模块添加自定义验证？](https://stackoverflow.com/questions/9026878/adding-custom-validations-to-activerecord-module-via-extend)

# sql-server - SQL 存储过程影响行

> ID：15813902
> 
> 赞同：1
> 
> 时间：2013-04-04T14:21:09.867
> 
> 标签：sql-server

这是我的存储过程：

```
create procedure insertBook2 @author varchar(32), @title varchar(32), @pages int
as
begin
    declare @identity int
    insert into inventar(author,class) values (@author,'book')
    select @IDENTITY=SCOPE_IDENTITY()
    insert into book(id,title,pages) values (@identity,@title,@pages)
end 
```

和表关系

```
inventar(id,class,author)
book(id,title,pages); 
```

我执行了程序，但它影响了 3 行。在表格簿值上添加了另一行： *id=id title=NULL 和 pages=NULL*在具有真实信息的行之前：/ 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:25:41.457

Your stored procedure looks fine in that it should create the correct number of rows, that is one in each table.

However, I see you are doing

```
select @IDENTITY=SCOPE_IDENTITY() 
```

whereas you should really use

```
set @IDENTITY=SCOPE_IDENTITY() 
```

as you're setting a variable, not querying a table.

That would cause you to get extra output saying "1 rows affected", which is perhaps what caused your confusion.

# xpath - 如何在两个节点之间选择文本

> ID：15813903
> 
> 赞同：7
> 
> 时间：2013-04-04T14:21:10.097
> 
> 标签：xpath

我想使用 Xpath 从网页中选择一些文本，但该文本位于两个节点之间。

```
...
<table>
    <th>Abbreviation</th>
    <tr>
        <td>
            <span><u>General</u><br/></span>
            My Text <!--The text i want to get-->
            <br/><u>Def</u>
            Some other Text
       </td>
</table>
... 
```

请注意，我无法更改页面，因为它是我无法控制的来源。

我已经浏览过 W3C 和维基百科文档，但没有找到任何东西（或理解）。

谢谢您的回答

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T14:38:57.757

您可以使用以下 XPath 表达式。它搜索 a `span`with a `u`child，然后选择后面的第一个文本。

```
//span[u]/following-sibling::text()[1] 
```

# loops - 批处理循环未按预期执行

> ID：15813904
> 
> 赞同：2
> 
> 时间：2013-04-04T14:21:10.893
> 
> 标签：loops, batch-file, goto

我正在编写一个脚本来通过 IPMI 启动系统。在启动其他机器之前，必须可以访问其中一台机器。

我写了一个简单的循环，希望它能够工作，但这给我带来了一些麻烦

```
:PING_LOOP
ping -n 1 -w 1000 <IP Address>
IF %ERRORLEVEL% NEQ 0 GOTO PING_LOOP 
```

`<IP Address>`在继续之前我需要等待的机器的 IP 地址在哪里。该循环适用于 3 或 4 次迭代，但在此之后即使系统无法访问也会失败。是否有一个原因？

编辑：这个脚本是从 Win Server 2008 R2 机器上运行的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:48:51.023

好吧想通了。

显然，当你`ping`得到它时，即使你没有得到一个 ping，它也会`Destination host unreachable`产生一个`ERRORLEVEL`of ，这对我来说没有意义。`0`也许我只是不完全理解如何`ping`工作

不过，这是一个快速修复。我只是解析出TTL。这有点天真，但它适用于我的应用程序。

```
:PING_LOOP
ping -n 1 -w 1000 <IP Address> | find "TTL"
IF %ERRORLEVEL% NEQ 0 GOTO PING_LOOP 
```

# php - empty() 返回错误结果

> ID：15813905
> 
> 赞同：4
> 
> 时间：2013-04-04T14:21:13.197
> 
> 标签：php

```
$user = new User(1);

var_dump($user->ID);
if (empty($user->ID))
    echo "empty";

// output string(2) "77" empty 
```

那么为什么`true`即使`$user`var 不为空，empty() 也会返回呢？

我的用户类的相关部分：

```
class User {
    protected $data = null;

    public function __construct($userID) {
        // sql select
        $this->data = $sqlResult;
    }

    // ...

    public function __get($name) {
        if (isset($this->data[$name]))
            return $this->data[$name];
        else
            return null;
    }

} 
```

**更新：**

所以我更新了我的 User 类并添加了 __isset() 方法

```
public function __isset($name) {
        if (isset($this->data[$name]) && !empty($this->data[$name]))
                return true;
        else
                return false;
} 
```

这导致我遇到另一个问题：当调用`empty()`我的非空 var`empty($user->ID)`时，它会返回 false，但是当使用`isset($user->ID)`声明为空的 var（例如`$user->ID = ''`）时，它也会返回 false，因为`isset()`会`__isset()`在类内部调用，对吗？

有没有办法解决这种行为？PHP 指出，我应该将重载的属性复制到一个局部变量中，这对我来说似乎是太多的文书工作；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T14:24:05.500

`empty()`不叫`__get()`。您需要实施`__isset()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:25:28.653

引用[手册](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)：

> **注意**：
> 
> 除了 isset() 之外，不能在其他语言结构中使用重载属性。这意味着如果对重载属性调用 empty()，则不会调用重载方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:29:16.393

根据文档，您应该重载[__isset()](http://www.php.net/manual/en/language.oop5.overloading.php#object.isset)以使 empty 工作

# ios - 记住用户已登录 - 我将在 iOS 应用程序中将此类信息保存在哪里？

> ID：15813906
> 
> 赞同：1
> 
> 时间：2013-04-04T14:21:13.260
> 
> 标签：ios, objective-c, ios5, ios6

假设用户登录到我的应用程序中的某个服务。我如何“记住”用户这样做了，所以它不会再提示他/她这样做？

例如，每次应用程序启动时，*如果用户登录，我希望它对用户帐户执行某些操作，*否则，不要执行任何操作。用户从他们可以调用的可选登录窗口登录。一旦他们登录，我想（至少在概念上）设置一个变量，这样我就可以喜欢`if (userIsLoggedIn) { ... }`并相应地做事。

这是 NSUserDefaults 吗？核心数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:25:17.880

您可以轻松地将其存储在 NSUserDefaults 中。

```
// init
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
// set the default value
[defaults setObject:@"YES" forKey:@"loggedIn"];
// read value
NSString *loggedIn = [defaults objectForKey:@"loggedIn"] 
```

**更新：**

用 BOOL 设置：

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"loggedIn"]; 
```

读取值：

```
if(![[NSUserDefaults standardUserDefaults] boolForKey:@"loggedIn"]) {
    // go to login screen
} else {
   // go to main screen
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:28:46.470

如果您使用登录凭据，NSUserDefaults 会使您的应用面临安全风险。

我会推荐使用**NSKeyedArchiver**。

这个网站对如何实现它有一个非常简单的解释！

[http://haoxiang.org/2011/11/ios-how-to-save-and-load-a-custom-object/](http://haoxiang.org/2011/11/ios-how-to-save-and-load-a-custom-object/)

Apple API Doc 仅供将来参考。 [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:24:11.020

```
[[NSUserDefaults standardUserDefaults] setObject:@YES forKey:@"isLoggedIn"]; 
```

有效评论：您也可以使用`setBool:forKey`相同的结果。在这个任务之后立即调用`synchronize`也没有什么坏处（尽管它可能并不重要）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:45:26.680

正如其他答案所指出的那样`NSUserDefaults`，如果您要存储简单的非私有状态，这很有用。

我通常喜欢用一个类别来包装它，这样我就可以更容易地与用户默认值交互，而不必担心键等。

一个例子看起来像这个类别

**NSUserDefaults+PASAuthorisation.h**

```
@interface NSUserDefaults (PASAuthorisation)

@property (nonatomic, assign, getter=pas_isLoggedIn) BOOL pas_loggedIn;

@end 
```

**NSUserDefaults+PASAuthorisation.m**

```
#import "NSUserDefaults+PASAuthorisation.h"

static NSString * const PASLogginInKey = @"PASLogginInKey";

@implementation NSUserDefaults (PASAuthorisation)

- (BOOL)pas_isLoggedIn;
{
  return [self boolForKey:PASLogginInKey];
}

- (void)setPas_loggedIn:(BOOL)pas_loggedIn;
{
  [self setBool:pas_loggedIn forKey:PASLogginInKey];
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:28:11.153

Core Data 并不适合像这样的小而独特的数据。

NSUserDefaults 是处理此类小事的正确位置，但如果这些小事应该保密——比如登录详细信息——钥匙串会更好。

# android - Android resteasy-mobile 示例客户端

> ID：15813910
> 
> 赞同：0
> 
> 时间：2013-04-04T14:21:23.370
> 
> 标签：android, web-services, resteasy

我是 Android 编程新手，我需要实现一个 Android resteasy-mobile 客户端。我需要连接远程 JAX-RS Web 服务。我正在搜索周围，但找不到简单的示例客户端。你能告诉我如何制作一个 Android resteasy-mobile 客户端吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:58:43.107

最后，我决定使用 Jersey 服务器实现一个 Android json (Jackson) 客户端。如果有人需要知道它是怎么回事，这是我的代码：

服务器：

```
package com.sl;

import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

import com.sl.model.pojo.UserLocation;

@Path("/json/service")
public class JSONService {

    @GET
    @Path("/get")
    @Produces(MediaType.APPLICATION_JSON)
    public UserLocation getTrackInJSON() {

        UserLocation ul = new UserLocation();
        ul.setCodigo("1");
        ul.setLatitud(Float.valueOf("1.1"));
        ul.setLongitud(Float.valueOf("1.2"));

        return ul;

    }

    @POST
    @Path("/post")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createTrackInJSON(UserLocation userLocation) {

        String result = "Record saved.";
        return Response.status(201).entity(result).build();

    }

} 
```

web.xml

```
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>Restful Web Application</display-name>

<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
        <param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.sl</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

客户：

ReceiveFeedTask.java

```
package android.jaxrs;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.codehaus.jackson.map.ObjectMapper;

import android.jaxrs.model.pojo.UserLocation;
import android.os.AsyncTask;
import android.util.Log;

public class RetreiveFeedTask extends AsyncTask<String, String, Boolean> {

    private static String TAG = "ReceiveFeedTask";
    private  String jaxrsmessage = null;

    private static String IP = "191.162.1.107"; //IP CASA
    //private static String IP = "10.0.2.2"; //IP LOCALHOST

    private static String DIRECCION_GET = "http://" + IP + ":8080/ServidorLoc/rest/json/service/get";
    private static String DIRECCION_POST = "http://" + IP + ":8080/ServidorLoc/rest/json/service/post";

    private final ObjectMapper mapper = new ObjectMapper();

    @Override
    protected Boolean doInBackground(String... params) {
        HttpClient httpclient = null;

        try {
             android.os.Debug.waitForDebugger();
             httpclient = new DefaultHttpClient();

             HttpGet request = new HttpGet(DIRECCION_GET);

             request.addHeader("Content-Type", "application/json");
             request.addHeader("Accept", "application/json");
             HttpResponse response = httpclient.execute(request);
             HttpEntity entity = response.getEntity();
             InputStream instream = entity.getContent();
             jaxrsmessage = read(instream);
             Log.d(TAG, jaxrsmessage);

             //POST
             UserLocation ul= new UserLocation(); 
             ul.setCodigo("2");
             ul.setLatitud(Float.valueOf("2.1"));
             ul.setLongitud(Float.valueOf("2.2"));

             String json = mapper.writeValueAsString(ul);

             HttpPost post = new HttpPost(DIRECCION_POST);
             post.setHeader("Content-Type", "application/json");
             StringEntity se = new StringEntity(json);
             post.setEntity(se);
             HttpResponse httpResponse = new DefaultHttpClient().execute(post);
             String retSrc = EntityUtils.toString(httpResponse.getEntity());
             Log.d(TAG, retSrc);

        } catch (ClientProtocolException e) {
            Log.e(TAG, "Se ha producido un error: " + e.toString() + "\nMensaje: " + e.getMessage());
        } catch (IOException e) {
            Log.e(TAG, "Se ha producido un error: " + e.toString() + "\nMensaje: " + e.getMessage());
        } catch (Exception e){
            Log.e(TAG, "Se ha producido un error: " + e.toString() + "\nMensaje: " + e.getMessage());
        }finally {
            httpclient.getConnectionManager().shutdown();
        }
        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {

    }

    private static String read(InputStream instream) {
        StringBuilder sb = null;
        try {
             sb = new StringBuilder();
             BufferedReader r = new BufferedReader(new InputStreamReader(
                   instream));
             for (String line = r.readLine(); line != null; line = r.readLine()) {
                sb.append(line);
             }

            instream.close();
            r.close();

        } catch (IOException e) {
            Log.e(TAG, "Se ha producido un error: " + e.toString() + "\nMensaje: " + e.getMessage());
        }
        return sb.toString();

   }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="android.jaxrs"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

     <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name">
        <activity
            android:name="android.jaxrs.AndroidJAXRSClient"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

就这样！！！:)

# javascript - 有没有办法使用 javascript/jquery 搜索一组 li 标签并缩小搜索范围

> ID：15813912
> 
> 赞同：15
> 
> 时间：2013-04-04T14:21:27.917
> 
> 标签：javascript, jquery, search

我一直在网上寻找有关如何做到这一点的想法。我有一个[DrillDown 菜单](http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/getting-started/)，在某些时候有六级深度（不是我的选择，这是客户想要的）我创建了一个包含所有这些项目的 xml 文档，用户可以选择总共 106 个不同的选项仅在侧面菜单中（再次是客户想要的）。我想创建一个搜索框，允许我输入其中一个选项的名称，并且列表将缩小为仅显示带有用户输入的单词的选项。

我的问题是否有允许这种行为的插件？

如果不是，你如何在一组 li 元素中搜索文本？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-04T14:29:44.450

自己编写代码相当简单，下面的 jQuery 从输入#inputString 中获取一个字符串，并将遍历列表项“ul li”并根据它们是否与输入字符串匹配来显示/隐藏。

如果需要，您可以修改“ul li”选择器以包含其他列表

```
jQuery("#inputString").keyup(function () {
    var filter = jQuery(this).val();
    jQuery("ul li").each(function () {
        if (jQuery(this).text().search(new RegExp(filter, "i")) < 0) {
            jQuery(this).hide();
        } else {
            jQuery(this).show()
        }
    });
}); 
```

我希望有很多插件可以做同样的事情，给它一个谷歌！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T14:25:10.447

您可以尝试按`contains`选择器过滤：

```
var matches = $( 'ul#myMenu' ).find( 'li:contains(search string) ' );
$( 'li', 'ul#myMenu' ).not( matches ).slideUp();
matches.slideDown(); 
```

请参阅[jsFiddle上的示例](http://jsfiddle.net/59FbY/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:27:31.987

> 如何在一组 li 元素中搜索文本？

```
var filteredLIS = $("li:contains('" + yourQuery + "')"); 
```

参考：[http ://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-01T10:56:48.060

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
    // Start here: Search Service area via jQuery
  window.filter = function(element)
  {
    var value = $(element).val().toUpperCase();
    $(".left_message > li").each(function() 
    {
      if ($(this).text().toUpperCase().search(value) > -1){
        $(this).show();
      }
      else {
        $(this).hide();
      }
    });
  }
});
</script>

<input type="text"  placeholder="Enter text to search" onkeyup="filter(this);">

<ul role="tablist" class="left_message">
    <li><a href="#"><span>Anupk Kumar</span></a></li>
    <li><a href="#"><span>Pradeep Kumar</span></a></li>
    <li><a href="#"><span>Zahid Gani</span></a></li>
    <li><a href="#"><span>Amitabh</span></a></li>
    <li><a href="#"><span>Chandan Gupta</span></a></li> 
</ul>

Result : Search Zahid , they return following output

<ul role="tablist" class="left_message">`enter code here`
    <li><a href="#"><span>Zahid Gani</span></a></li>    
</ul> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:28:06.223

在此处使用向下钻取示例：

```
http://www.designchemical.com/lab/jquery-drill-down-menu-plugin/getting-started/ 
```

这是我的建议：

```
$('#drilldown').find("a:contains('Product')"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T14:38:45.857

你可以尝试使用这个概念：

```
$('.search').keyup(function(){
    if( $(this).val().length > 0 ){
        var foundin = $('#drilldown').find('li a:contains("'+$(this).val()+'")');
    }
}); 
```

# javascript - javascript太多小数做减法

> ID：15813918
> 
> 赞同：1
> 
> 时间：2013-04-04T14:21:42.447
> 
> 标签：javascript, decimal, arithmetic-expressions

我正在用 Javascript 做一个简单的减法，结果与实际结果不匹配：

```
<html>
<head>
    <title></title>
</head>
<body>

<table>
<tr><td>Price: </td><td><input type="text" id="price" value="4500.60" onblur="calculatePrecio();"></td></tr>
<tr><td>Discount: </td><td><input type="text" id="discount" value="500" onblur="calculatePrecio();"></td></tr>
</table>

<div id="divTotalAmount"></div>

<script>

calculatePrecio();

function calculatePrecio()
{
    var price = document.getElementById('price').value;
    var discount = document.getElementById('discount').value;

    p = price;
    d = discount;

    totalAmount = p - d;

    document.getElementById('divTotalAmount').innerHTML = "<h1>"+totalAmount+"</h1>";
}

</script>

</body>
</html> 
```

你们能帮帮我吗？另外我只是不想知道如何进行，如果可能的话，我想知道原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:26:05.397

要格式化输出，您可以简单地使用该`toFixed`方法。

```
var x = 5.3, y = 3;
var z = (x - y).toFixed(2); 
```

[这里](http://jsfiddle.net/alexflav23/CC9q9/)是工作的 jsFiddle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:26:01.990

例如，您可以使用`totalAmount.toFixed(2)`....它会像这样 xxxxxxxx.xx

# asp.net - IE 10 - 无效的回发或回调参数

> ID：15813922
> 
> 赞同：2
> 
> 时间：2013-04-04T14:21:51.040
> 
> 标签：asp.net, internet-explorer, web-applications, callback

我们的一个应用程序中有一个报告生成器，它是在 .NET 2.0 中构建的

每当我们尝试在 IE 10 中运行报告时，我们都会收到带有以下消息的服务器错误：

```
Invalid postback or callback argument.  Event validation is enabled using 
<pages enableEventValidation="true"/> in configuration or 
<%@ Page EnableEventValidation="true" %> in a page.  
For security purposes, this feature verifies that arguments to postback or callback 
events originate from the server control that originally rendered them.  If the data is 
valid and expected, use the ClientScriptManager.RegisterForEventValidation method in 
order to register the postback or callback data for validation. 
Description: An unhandled exception occurred during the execution of the current web 
request. Please review the stack trace for more information about the error and where it 
originated in the code. 

Exception Details: System.ArgumentException: Invalid postback or callback argument.      
Event validation is enabled using <pages enableEventValidation="true"/> 
in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security   
purposes, this feature verifies that arguments to postback or callback events originate 
from the server control that originally rendered them.  If the data is valid and 
expected, use the ClientScriptManager.RegisterForEventValidation method in order to 
register the postback or callback data for validation.

Source Error: 

 An unhandled exception was generated during the execution of the current web request. 
Information regarding the origin and location of the exception can be identified using   
the exception stack trace below.  

Stack Trace: 

[ArgumentException: Invalid postback or callback argument.  Event validation is enabled 
using <pages enableEventValidation="true"/> in configuration or <%@ Page 
EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies 
that arguments to postback or callback events originate from the server control that 
originally rendered them.  If the data is valid and expected, use the 
ClientScriptManager.RegisterForEventValidation method in order to register the postback 
or callback data for validation.]
   System.Web.UI.ClientScriptManager.ValidateEvent(String uniqueId, String argument) +8636377
   System.Web.UI.WebControls.ListBox.LoadPostData(String postDataKey, NameValueCollection postCollection) +360
   System.Web.UI.WebControls.ListBox.System.Web.UI.IPostBackDataHandler.LoadPostData(String postDataKey, NameValueCollection postCollection) +13
   System.Web.UI.Page.ProcessPostData(NameValueCollection postData, Boolean fBeforeLoad) +343
    System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1743

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5420; ASP.NET      
Version:2.0.50727.5420 
```

仅当我们在 IE 10 中运行报告时才会发生此错误。

如果我们使用任何其他 IE 版本或任何其他浏览器，我们不会收到任何错误并且报告运行良好。

根据 Microsoft 文档，这可以在 .NET 3 及更高版本上解决。但是我们已经有了 .NET 3.5，但仍然不能在 IE 10 上运行。

这是页眉：

```
<%@ Page EnableEventValidation="true" Language="VB"  %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
    Client_Id.Value = Request.QueryString("Client_Id")
    Project_Id.Value = Request.QueryString("Project_Id")
    System_Id.Value = Request.QueryString("System_Id")
    Report_Page_Heading.Text = Replace(Request.QueryString("H"), "'", "")

    PartExportFields.SelectParameters.Add("Client_Id", Replace(Client_Id.Value, "'", ""))
    PartExportFields.SelectParameters.Add("Project_Id", Replace(Project_Id.Value, "'", ""))
    PartExportFields.SelectParameters.Add("System_Id", Replace(System_Id.Value, "'", ""))

    SavedCustomReports.SelectParameters.Add("Client_Id", Replace(Client_Id.Value, "'", ""))
    SavedCustomReports.SelectParameters.Add("Project_Id", Replace(Project_Id.Value, "'", ""))
    SavedCustomReports.SelectParameters.Add("System_Id", Replace(System_Id.Value, "'", ""))

    ListBox1.SelectedValue = Request.QueryString("edit")
End Sub

Protected Sub ListBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs)

End Sub

Protected Sub TextBox1_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs)

End Sub

Protected Overrides Sub Render(ByVal writer As System.Web.UI.HtmlTextWriter)

    Page.ClientScript.RegisterForEventValidation("Client_Id", Replace(Client_Id.Value, "'", ""))
    Page.ClientScript.RegisterForEventValidation("Project_Id", Replace(Project_Id.Value, "'", ""))
    Page.ClientScript.RegisterForEventValidation("System_Id", Replace(System_Id.Value, "'", ""))
    MyBase.Render(writer)
End Sub    
</script> 
```

任何想法或帮助都会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:30:06.343

我在使用 IE 10 时遇到了类似的问题。IE 10 不能很好地处理网络表单（具有讽刺意味的是，Microsoft 技术不适用于 Microsoft 技术）。请参阅此[链接](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)。您可以应用一些机器范围的补丁来解决一些问题。此外，在 IE 10 上使用一些 Microsoft Ajax 的东西根本不起作用。我能够解决这个问题的唯一方法是发送一个标题，告诉 IE 在 IE 9 模式下运行页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T11:25:08.797

我找到的唯一解决方案是运行 Windows 更新。

这为 IE 下载了所有必要的修复程序。

之后错误就消失了。

# rest - 在 jax-rs 中映射多个查询参数

> ID：15813927
> 
> 赞同：2
> 
> 时间：2013-04-04T14:22:00.873
> 
> 标签：rest, jersey, jax-rs

我使用 Jersey 作为实现库。

```
@Path("books")
public class Sample {

    @GET
    public List<Book> getBooks(@Context UriInfo uriInfo)
    {
        MultivaluedMap<String,String> params = uriInfo.getQueryParameters();
        String pageStart = params.getFirst("p");
        String pageSize = params.getFirst("s");
    }
} 
```

它适用于 /books 但不适用于 /books?p=1&s=10 （http 404 错误）

我不想像“books?p={p}&s={s}”这样定义我的路径，因为会有无法预定义的动态参数。

问题：

有什么方法可以将 /books?p=1&s=10 映射到 getBooks 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:28:30.377

can check by having you `@Path("books")` changed to `@Path("/books")`

# shell - Unix“邮件”命令包装文本？

> ID：15813934
> 
> 赞同：1
> 
> 时间：2013-04-04T14:22:13.640
> 
> 标签：shell, unix, outlook

我注意到有时当我`mail`自己使用 SQL*Plus 日志文件时，生成的消息与日志文件不匹配。

例如，以下面的 SQL*Plus 日志文件为例：

```
SQL> SELECT column_a, column_b, column_c, column_d, column_e, column_f FROM some_table_a;
SQL> SELECT column_a, column_b, column_c, column_d, column_e, column_f FROM some_table_b;
SQL> SELECT column_a, column_b, column_c, column_d, column_e, column_f FROM some_table_c;
SQL> SELECT column_a, column_b, column_c, column_d, column_e, column_f FROM some_table_d;
SQL> SELECT column_a, column_b, column_c, column_d, column_e, column_f FROM some_table_e;
SQL> SELECT column_a, column_b, column_c, column_d, column_e, column_f FROM some_table_f;
SQL>
SQL> QUIT 
```

我使用以下方式将其发送给自己：`cat sql.log | mail me@email.com`

* * *

当它到达时，它看起来像：

```
SQL> SELECT column_a, column_b, column_c, column_d, column_e, column_f 
SQL> FROM some_table_a; SELECT column_a, column_b, column_c, column_d, 
SQL> column_e, column_f FROM some_table_b; SELECT column_a, column_b, 
SQL> column_c, column_d, column_e, column_f FROM some_table_c; SELECT 
SQL> column_a, column_b, column_c, column_d, column_e, column_f FROM 
SQL> some_table_d; SELECT column_a, column_b, column_c, column_d, 
SQL> column_e, column_f FROM some_table_e; SELECT column_a, column_b, 
SQL> column_c, column_d, column_e, column_f FROM some_table_f;
SQL> 
SQL> QUIT 
```

它几乎就像`mail`命令将行换行，粘贴在下一行，并`SQL>`在它认为合适的地方添加更多内容。

有没有办法阻止它这样做？为什么它首先会这样做？

* * *

**编辑：** 使用 99% 的日志和文件，不会出现线路混乱。它只是每隔一段时间才会发生一次。我怀疑这与`>`大多数线路上都有一个有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:27:04.923

哦，废话，我想通了。

Unix`mail`不是罪魁祸首，它是**Microsoft Outlook**。

我刚刚注意到，在这`TO:`条线附近，有一个部分写着`Extra line breaks in this message were removed`。当我点击它时，我可以选择`Restore line breaks`，我很高兴。

* * *

**编辑：**我为解决方案附上了图片。

**选项：**
![为单个消息恢复换行符的选项](https://i.stack.imgur.com/FZRRo.png)

**永久修复：**
![在此处输入图像描述](https://i.stack.imgur.com/sg9zM.png)

# wordpress - 类别未出现在正确的层次结构中

> ID：15813936
> 
> 赞同：0
> 
> 时间：2013-04-04T14:22:28.430
> 
> 标签：wordpress

当我创建帖子并尝试将帖子分配给类别时，右侧的小部件会显示混合的类别。例如，当我创建类别时，我在父类别“Men”下有“accessories”类别，但在小部件中它没有出现在它下面；只有当我转到左侧菜单上的类别时，它才会以正确的顺序出现。怎么了？

在类别中，我有这个层次结构

> ![在此处输入图像描述](https://i.stack.imgur.com/JTNk0.jpg)

但是当我将帖子分配给但当我将帖子分配给类别时，例如*Men-Accesories-Ties*，*Men*在类别中出现第二而不是第一，因此也弄乱了面包屑

> ![在此处输入图像描述](https://i.stack.imgur.com/IMSej.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:33:49.600

[*我将把这个答案的第一个版本留在底部，因为它可能有用。*]

[无法](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/category-template.php#L1053)以分层方式组织该列。解决方案是制作一个自定义列并使用此[Codex 片段](http://codex.wordpress.org/Template_Tags/wp_list_categories#Display_Categories_Assigned_to_a_Post)：

```
// Change "post_" for the desired post type
add_filter( 'manage_edit-post_columns', 'custom_categories_register_so_15813936', 20, 1 );
add_action( 'manage_post_posts_custom_column', 'custom_categories_display_so_15813936', 20, 2 );

function custom_categories_register_so_15813936( $columns ) 
{
    $columns[ 'custom-cat' ] = 'Categories';
    return $columns;
}

function custom_categories_display_so_15813936( $column_name, $post_id ) 
{
    if ( 'custom-cat' != $column_name )
        return;

    // get the category IDs assigned to post
    $categories = wp_get_post_categories( $post_id, array( 'fields' => 'ids' ) );
    // separator between links
    $separator = ', ';

    if ( $categories ) {
        $cat_ids = implode( ',' , $categories );
        $cats = wp_list_categories( 'title_li=&style=none&echo=0&include=' . $cat_ids );
        $cats = rtrim( trim( str_replace( '<br />',  $separator, $cats ) ), $separator );
        $cats = str_replace( site_url('category/'), admin_url('edit.php?category_name='), $cats );
        echo str_replace( '/" title', '" title', $cats );
    }
} 
```

左侧是默认列，右侧是自定义列。

> ![在此处输入图像描述](https://i.stack.imgur.com/DM7pL.png)

* * *

[**第一个版本**]
我想您是在谈论后端（`/wp-admin`）。您看到的行为是 WordPress 默认的。要摆脱该“功能”，您需要插件[Category Checklist Tree](http://wordpress.org/extend/plugins/category-checklist-tree/)：

> 在帖子编辑屏幕上，保存帖子后，您会注意到选中的类别显示在顶部，打破了类别层次结构。该插件删除了该“功能”。
> 
> 此外，它会自动滚动到第一个选中的类别。
> 
> 也适用于自定义分类法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:32:02.953

试试[这个插件](http://wordpress.org/extend/plugins/extended-categories-widget/)。它说它可以在小部件中分层显示类别。

# c# - 创建用于获取变量值的函数

> ID：15813938
> 
> 赞同：1
> 
> 时间：2013-04-04T14:22:33.900
> 
> 标签：c#, class, function, variables

我应该更喜欢直接从其他类获取变量（`int number = something.number;`）还是应该使用函数来获取该数字（如下例所示）？有什么不同？

```
class someclass
{
    private int number;
    public float GetSomething()
    {
        return number;
    }
}
class otherclass
{
    someclass something;
    private void somefunction()
    {
        int number = something.GetSomething();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:25:24.153

**使用字段引用**或**getter 方法**的区别在于，如果您创建了一个您希望“客户端代码”使用的方法，那么您**以后可以随时更改方法代码**，而客户端不必更改他的代码。如果您使用**field**，则客户端必须将其代码从使用该字段更新为使用方法，如果您决定要在方法中进行验证。因此，简而言之，使用**getter 方法**进行**未来验证**是更好的做法。但是，在像 C# 这样的语言中，您也可以使用**属性**，它们的**作用类似于方法**，但**看起来像字段**，因此您可以两全其美：良好的语法（字段）和面向未来的（方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:24:29.143

直接访问类之外的类变量不是一个好习惯，因此强烈建议使用[方法](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.80%29.aspx)（也包括[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)）。当无法直接访问您的类变量时，其他类可以使用它，并且每当您更改类的内部结构时，您都可以轻松完成。考虑你的班级：

```
class someclass
{
    // it's a field
    private int number;

    // it's a property
    public int Number
    {
        get{return this.number;}
    }

    //or you can use method
} 
```

**编辑：**如果一段时间后您发现最好将`number`' 的类型更改为`int?`，您可以这样做，因为从来没有在课堂之外使用任何人`number`，所以您可以简单地更改 number 并以这种方式更改您的属性

```
class someclass
{
    private int? number;

    public int Number
    {
        get{return this.number.Value;}
    }

    //or you can use method
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:26:47.967

对于那种类型的数据，你最好使用一个属性：

```
class someclass
{
    private int number;

    public int Number 
    {
        get {return number;}
        set {number = value;}
    }
} 
```

那么你可以在其他任何地方使用 someclass.Number

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:31:13.543

公开字段是不好的做法，因为它没有公开方法或属性那么广泛。例如，您想根据其他字段值更改此字段的计算逻辑。这两种方法都可以实现，但如果您使用方法或属性，实现起来会更容易、更清晰。

# wpf - WPF 分辨率模拟

> ID：15813953
> 
> 赞同：1
> 
> 时间：2013-04-04T14:23:29.080
> 
> 标签：wpf, dynamic, user-interface, screen-resolution

我们有一个 WPF 系统，我们允许我们的客户为他们的用户设计一个 UI 界面。我们遇到的主要问题之一是我们的客户可能会设计一种分辨率（即 1366x768）的界面，以部署到另一种分辨率（即 1024x768）的系统中。我们已经提出了自己的解决方案，但似乎总是遇到关于重叠元素、大小差异等的问题。我发布这个问题是为了向 Stack Overflow 大众询问他们可能有的关于在另一个中模拟一个分辨率的想法（即，在分辨率为 1366x768 的屏幕上预览 1024x768 分辨率的用户界面）。请随时获取创意果汁并发布建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:33:47.157

您可以尝试将父容器包装在 ViewBox 中，并将 ViewBox 的高度和宽度设置为 1024x768 或 1366x768 并查看是否正确调整了子容器的大小。

# c# - c#通过IP地址在2个子网之间发送文件

> ID：15813955
> 
> 赞同：0
> 
> 时间：2013-04-04T14:23:34.877
> 
> 标签：c#, winforms, networking

我正在尝试使用接收器的 IP 地址通过 Internet 发送文件。我设法在同一子网中的两台计算机之间成功发送文件。

我确实了解每个子网中的 IP 地址是如何被屏蔽的，那么我如何才能真正发送到另一个子网中的特定 IP 呢？

```
Socket clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

//some other codes

clientSocket.Connect("ip here", 9050); //target machine's ip address and the port number
clientSocket.Send(m_clientData);
clientSocket.Close(); 
```

编辑：我有关于接收者、内部 ip、外部 ip、ma​​c 地址等的完整信息。那么我怎样才能发送到这个特定的节点呢？

# python - Python：同时绘制多个图形（matplotlib）

> ID：15813956
> 
> 赞同：0
> 
> 时间：2013-04-04T14:23:42.490
> 
> 标签：python, graph, matplotlib, plot

我有一个函数，它接受一个参数 p，然后用 plt.plot() 输出一个图形。

但是我想传递一个包含许多 p 值的列表并让它同时绘制所有图（例如，像一个图矩阵，我不知道它实际上叫什么。一种由许多图组成的网格） . 如何才能做到这一点？

例如，这是我当前的功能（简化）：

```
def graph(p):
    x = np.array(get x values from p here) #pseudocode line
    y = np.array(get y values from p here) #pseudocode line

    plt.title("title")
    plt.ylabel("ylabel")
    plt.xlabel("xlabel")
    plt.plot(x, y, 'ro', label = "some label")
    plt.legend(loc='upper left')
    plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:44:59.743

如果你知道你想要多少地块，你可以做这样的事情

```
def graph(p):
    x = np.array(get x values from p here) #pseudocode line
    y = np.array(get y values from p here) #pseudocode line

    plt.title("title")
    plt.ylabel("ylabel")
    plt.xlabel("xlabel")
    plt.plot(x, y, 'ro', label = "some label")
    plt.legend(loc='upper left')

    # Removed the show line from here
    # plt.show()

# Number of subplots. This creates a grid of nx * ny windows
nx = 3
ny = 2

# Iterate over the axes
for y in xrange(nx):
    for x in xrange(ny):
        plt.subplot(nx, ny, y * ny + x + 1)  # Add one for 1-indexing
        graph(p)

# Finally show the window
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:05:20.913

```
def graph(p, ax=None):
    if ax is None:
        ax = plt.gca()
    x = np.linspace(0, np.pi * 2, 1024)
    y = np.sin(x) + p

    ax.set_title("title")
    ax.set_ylabel("ylabel")
    ax.set_xlabel("xlabel")
    ax.plot(x, y, 'ro', label = "some label")
    ax.legend(loc='upper left')

# Number of subplots. This creates a grid of nx * ny windows
nx = 3
ny = 2

fig = plt.gcf()
# Iterate over the axes
for j in xrange(nx * ny):
    t_ax = fig.add_subplot(nx, ny, j + 1)  # Add one for 1-indexing
    graph(j, t_ax)

plt.show()
fig.tight_layout()
plt.draw() 
```

[请参阅此处以获取有关指南`tight_layout`](http://matplotlib.org/users/tight_layout_guide.html)

# objective-c - Apple 帮助创作

> ID：15813958
> 
> 赞同：2
> 
> 时间：2013-04-04T14:23:44.497
> 
> 标签：objective-c, xcode

我正在按照[本指南](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ProvidingUserAssitAppleHelp/authoring_help/authoring_help_book.html#//apple_ref/doc/uid/TP30000903-CH206-CIHEAADH)公开一些 Apple 帮助。我工作的应用程序多年来一直内置帮助，但它突然停止工作，并且没有对应用程序 plist 或任何帮助文件进行任何更改。我们假设苹果改变了一些东西，所以我确保它符合苹果要求的规格。当我说“不工作”时，我的意思是我们使用的链接`NSHelpManager`将打开帮助查看器，但会返回一个未找到的页面。

检查清单的事项：

1.  页面顶部有一个名称正确的锚点
2.  文件夹结构是之前链接的那篇文章的副本
3.  我们正在重新索引帮助页面
4.  我们确实清除了所有缓存

这是我们用来打开帮助页面的代码：

```
NSString *locBookName = [[NSBundle mainBundle] objectForInfoDictionaryKey: @"CFBundleHelpBookName"];
[[NSHelpManager sharedHelpManager] openHelpAnchor:@"mypage" inBook:locBookName]; 
```

在这种情况下，我们会有一个`<a name="mypage"></a>`顶部带有 a 的页面，因此它应该正确链接。我们的脚本如下：

hvfix（清除所有缓存）：

```
rm -rf ~/Library/Caches/com.apple.help*
rm -rf ~/Library/Preferences/com.apple.help*
rm -rf ~/.Trash/*
killall helpd
defaults write com.apple.helpindexer IndexAnchors YES 
```

updatehelpindex.sh（重新生成索引）

```
#!/bin/sh
hiutil -C -f MyApp.help/Contents/Resources/English.lproj/MyApp.helpindex
MyApp.help/Contents/Resources/English.lproj/ 
```

我们进行构建，将文件夹放入 Applications 文件夹以注册应用程序 + 帮助。我们甚至尝试重新启动或注销/登录，但仍然一无所获。我知道这是一个非常繁琐的过程，但我们尝试的任何方法似乎都不起作用。我们想要做的就是使用`NSHelpManager`来打开一个帮助锚。毫无疑问，这在 10.6+ 中有效，因为许多其他应用程序都这样做（一些报告表明它在 10.7/8 中无效，但它们一定是不真实的）。

想法？

**编辑（文件夹结构）：**

它位于 MyProj.help 文件夹中，该文件夹位于整个 Cocoa 项目的名为“help”的子目录中。

```
+ Contents
     Info.plist
     + Resources
         + shrd
              (a bunch of image files)
         + English.lproj
               MyProj.helpindex
               index.html
               + css
               + pgs
               + gfx 
```

和预期的一样，在文件夹中，'css' 有一堆 CSS 文件，'pgs' 有 HTML 页面，'gfx' 有图像文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:46:38.507

当 HelpBook 向系统注册时，沙盒会影响 HelpViewer 的目录搜索，这似乎是一个错误（如[本错误报告](http://openradar.appspot.com/12116431)中所述），这完全解释了为什么它出现在 10.7 和 10.8 上，而不是 10.6 和更早版本。甚至 Apple 的[NSAlertTest](http://developer.apple.com/library/mac/#samplecode/NSAlertTest/Introduction/Intro.html)也深受其害。不幸的是，由于截至本文发布时错误报告仍未解决，因此没有可行的解决方案，但我运行的少数测试证实 NSHelpManager 完全忽略了我机器上的沙盒帮助 plist。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T10:54:19.470

好的，这是一个相当混乱的过山车，但它与您在 Xcode 中的文件夹结构设置有关。以下是一些值得了解的事情：

*   人们选择把它放在 English.lproj 中。不要这样做，有几个原因。首先，如果您将帮助文件夹拖到文件列表中，它不会在 Xcode 中显示子目录/文件，其次，该文件夹中的内容应该是扁平的，而不是结构化的。
*   在根目录中创建一个“帮助”文件夹并将您的文件放入其中。如果您想要本地化，您可以将它们放在名为“English.lproj”的子目录中。
*   不要创建包含所有帮助文件的“.help”文件夹。这似乎破坏了索引。我们不知道为什么。
*   相反，拥有 /help/Contents/stuff 并将该文件夹拖放到您的项目目录列表中（我的在“资源”组中）。确保它是一个蓝色文件夹，并且您可以看到整个目录（所有 HTML 等）
*   对其运行帮助索引器以生成 .helpindex 文件
*   确保您的 plist 条目反映了该文件夹的名称和 index.html 文件中指定的元标记名称

如果您遵循上述规则，事情应该可以正常工作。似乎在 ML 中创建一个 .help 文件夹会破坏从这里开始的事情，所以基本上，不要遵循 Apple 指南。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-12T15:54:29.710

我在此处添加此响应是因为我发现了一种非常愚蠢的解决方法。通过使用 Apple 的`hiutil`命令行工具，我看到所有 Apple 的官方帮助书籍都使用了某种使用重定向器文件的索引：

```
$ hiutil -Df /Applications/Xcode.app/Contents/Resources/Xcode.help/Contents/Resources/en.lproj/search.helpindex
> <?xml version="1.0" encoding="UTF-8"?>
> <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
> <plist version="1.0">
> <dict>
>     <key>dev01043b473</key>
>     <array>
>         <string>/redirect.html?topic=dev01043b473</string>
>     </array>
>     <key>dev0125622ec</key>
>     <array>
>         <string>/redirect.html?topic=dev0125622ec</string>
>     </array>
> ... 
```

受此启发，我尝试`.searchindex`手动生成一个文件，使用它`NSUnarchiver`来打开由.`hiutil``NSArchiver`

`/Library/Documentation/Resources/Eagle/index.html`我基于Apple未公开的“Eagle”帮助引擎（但是因为我使用的是 HTML 索引，所以我的锚点会生成纯 HTML 文件，而 Eagle 没有美化这些文件。

[![Noto help without style screenshot](https://i.stack.imgur.com/2zipT.png)](https://i.stack.imgur.com/2zipT.png)

然后我想到了这个愚蠢的想法：工作量很大，但是如果您为每个锚点创建一个单独的 html 文件，您可以像在 中一样使用元重定向头标签`redirect.html`，除了您的重定向将是静态的。因此，对于我的`editor-prefs.html`文件，我创建了一个`editor-prefs-anchor.html`包含以下内容的文件：

```
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Editor Options</title>
    <meta http-equiv="refresh" content="0;url=../index.html?localePath=en.lproj#/editor-prefs" />
</head>

<body>
    <a id="editor-prefs">
</body>

</html> 
```

元重定向标签负责重定向到正确的 Eagle 驱动的 URL，它有效！

[![Noto帮助截图](https://i.stack.imgur.com/dK4AO.png)](https://i.stack.imgur.com/dK4AO.png)

如果有人像我一样在 Eagle 中挣扎，我希望这对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-23T12:32:12.370

我遇到了同样的问题（锚在我的应用程序的帮助书中不起作用）并在其他 Apple 应用程序的帮助书中进行了一些探索，特别是 Safari。我在 Safari 应用程序的 Safari.help 包的 Info.plist 中发现了这个有趣的条目：

```
 <key>HPDBookIndexPath</key>
    <string>search.helpindex</string> 
```

我将其更改为与我的应用程序帮助包中的 .helpindex 文件的名称相匹配，并且锚点开始工作。

# orchardcms - 果园能做到吗？

> ID：15813962
> 
> 赞同：1
> 
> 时间：2013-04-04T14:23:52.847
> 
> 标签：orchardcms, orchardcms-1.6

我可以拥有一个管理两个模块的内容管理器 Orchard 站点，每个模块都有不同的外观（主题）站点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:33:05.167

我不确定这是否是您的意思，但是您可以在同一个 Orchard 应用程序上运行多个站点，并使用不同的主题。

您只需在您的果园模块页面中启用多租户功能即可做到这一点。

# android - Android 应用程序已安装但无法运行

> ID：15813963
> 
> 赞同：0
> 
> 时间：2013-04-04T14:23:53.903
> 
> 标签：android, xml, splash-screen

我开始了一个新的应用程序，在解决了我的问题后，我开始制作它。在此过程中，我制作了一个简单的初始屏幕，但是当我启动模拟器时，它会安装并且不会运行。

XML 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.pathfinderapprentice"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="android.intent.action.MAIN"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.pathfinderapprentice.SPALSH" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.pathfinderapprentice.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.pathfinderapprentice.MAIN_ACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

还有java类

```
package com.example.pathfinderapprentice;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
        Thread timer = new Thread() {
            public void run() {
                try {
                    sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    Intent openStartingPoint = new Intent(
                            "com.example.pathfinderapprentice.MAIN_ACTIVITY");
                    startActivity(openStartingPoint);
                }
            }
        };
        timer.start();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        finish();
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:29:18.650

您还没有定义一个名为

```
com.example.pathfinderapprentice.Splash 
```

在您的清单中。纠正一下：

```
 <activity
        android:name="android.intent.action.MAIN"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.pathfinderapprentice.SPALSH" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

到

```
 <activity
        android:name="com.example.pathfinderapprentice.Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:31:47.300

您的清单文件中有问题。当您在清单中声明了两次相同的活动或您将两个活动定义为主要活动时，就会发生此错误。

在活动标签中，您将名称定义为 android:name="android.intent.action.MAIN"

你必须像这样在这里定义名称

```
android:name="com.example.pathfinderapprentice.MainActivity" 
```

并且不要修改内部意图。

您的活动标签应如下所示

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Convert"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:35:17.027

首先，您的清单是错误的：

```
 <activity
        android:name="android.intent.action.MAIN"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.pathfinderapprentice.SPALSH" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

应该

```
 <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

最重要的是，您不应该为这种计时器使用线程，只需使用 a`Handler`然后使用`postDelayed()`or `postAtTime()`。

# netbeans - 用于比较和合并不同文件夹中文件的工具

> ID：15813968
> 
> 赞同：0
> 
> 时间：2013-04-04T14:24:01.530
> 
> 标签：netbeans, merge, comparison, diff

我正在开发两个非常相似的基于 Java 的项目，这意味着我对第一个项目所做的我可以在 Netbeans 中使用 diff to... 命令将更改应用于第二个项目。但是，图像文件夹存在问题。例如，我在第一个项目上工作了一周，这周我在图像目录中放置了 34 张新图像。然后我必须将其中一些图像放在第二个项目的图像目录中。复制/粘贴不是解决方案，因为项目不完全相同。

这就是为什么我需要你向我推荐一些工具，它可以告诉我秒目录中缺少哪些图片，这样我就可以简单地将它们拖到他们的新位置:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:49:01.763

`diff -rq <path1> <path2>`将为您提供仅在其中一个路径中的文件列表，并指示两者中存在的文件名是否实际上具有相同的内容。

# c++ - 覆盖 c 字符串时访问冲突

> ID：15813975
> 
> 赞同：0
> 
> 时间：2013-04-04T14:24:13.763
> 
> 标签：c++, c

我有点困惑为什么以下事情会爆炸：

```
char* c = "Hello World!";
*c = 'h'; 
```

当我在堆上分配字符串时，它可以工作。所以我只是好奇我的初始版本有什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:25:29.787

`char* c = "Hello World!";`是指向通常存储在只读内存段中的字符串文字的指针。试图修改它是未定义的行为。指向诸如此类的字符串文字的指针应该更正确地定义为

```
const char *c = "Hello World!"; 
```

但`const`经常省略（至少在 C 中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:25:16.327

```
char* c = "Hello World!"; 
```

这`c`是一个指向文字字符串的指针，因此您无法修改它

你可以改用这个

```
char c[] = "Hello World!";
*c = 'h', 
```

`c`这是一个 char 数组，包含字符串的字符，`"Hello World!"`因此您可以对其进行修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T14:25:57.917

您指向`c`一个字符串文字，很可能存储在只读内存段中，您无法更改它。即使您*可以*根据 C 规范进行物理更改：

6.4.5（字符串文字）

> 如果程序尝试修改 [a string literal]，则行为未定义。

如果您在堆（或堆栈）上分配内存，然后将字符串复制到该位置，则可以根据需要更改它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T14:25:16.260

修改字符串文字是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。主要原因是编译器被允许放置`"Hello World!"`在只读内存中。

另一方面，以下是好的：

```
char c[] = "Hello World!";
*c = 'h'; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-04T14:27:34.823

像这样`char * c = "Hello";`的字符串是字符串常量，并且存储在只读数据段中，因此您无法修改它们[但有些编译器确实允许这样做]

堆分配的字符串不在只读段中，因此可以自由修改。

# c# - datatemplate 绑定图片刷源

> ID：15813980
> 
> 赞同：2
> 
> 时间：2013-04-04T14:24:27.413
> 
> 标签：c#, windows-phone-7, xaml, datatemplate

我正在将 imagebrush 源绑定到我在 xaml 中的数据模板。数据模板是--->

```
<DataTemplate x:Key="UserGridListTemplate">
            <Grid Height="140" Width="155">
                <Grid.Background>
                    <ImageBrush ImageSource="{Binding imagePath}"/>
                </Grid.Background>
            </Grid>
</DataTemplate> 
```

和xaml--->

```
<ListBoxItem ContentTemplate="{StaticResource UserGridListTemplate}" >
      <local:MultiLineItem  ImagePath="/ShareItMobileApp;component/Images/facebook-avatar(1).png"/>
</ListBoxItem> 
```

但发生异常 **AG_E_PARSER_BAD_PROPERTY_VALUE [行：3 位置：33]**

谁能帮我解决这个问题？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:01:34.947

您收到该错误的原因是因为`ImageBrush`不派生自`FrameworkElement`这意味着您不能像那样直接绑定数据。您可以创建一个转换器，将您`imagePath`转换为 ImageBrush 并将该 ImageBrush 设置为网格`Background`属性的背景。

首先，您需要创建一个转换器来将您的路径字符串转换为 ImageBrush。

```
public class ImagePathConverter : IValueConverter
{     
    public object Convert(object value, Type targetType, object parameter)
    {
        if(value == null) return null;

        Uri uri = new Uri(value.ToString(), UriKind.RelativeOrAbsolute);
        ImageBrush ib = new ImageBrush();
        ib.ImageSource = new BitmapImage(uri);
        return ib;
    }

    public object ConvertBack(object value, Type targetType, object parameter)
    {
        throw new NotImplementedException();
    }
} 
```

然后，您可以在 Grid 的后台绑定上使用该转换器（在您使用 key 将其添加为资源之后`ImgPathConverter`）。

```
<DataTemplate x:Key="UserGridListTemplate">
   <Grid Height="140" Width="155"
     Background={Binding imagePath, Converter={StaticResource ImgPathConverter}}/>
</DataTemplate> 
```

# c - sleep() 会干扰 scanf() 吗？

> ID：15813984
> 
> 赞同：1
> 
> 时间：2013-04-04T14:24:42.360
> 
> 标签：c, linux, pthreads, sleep, scanf

我有两个线程

`xThread`：在控制台上连续打印 X

`inputThread`: 从标准输入获取输入

当用户输入“C”或“c”时，连续打印停止

```
#include<stdio.h>
#include<sys/select.h>
#include<pthread.h>
#define S sleep(0)

int read_c = 0;
pthread_mutex_t read_c_mutex = PTHREAD_MUTEX_INITIALIZER;

void* inputThread_fn(void* arg)
{
char inputChar;

while(1)
{
    S;

    printf("\nChecking input");
    scanf("%c",&inputChar);
    if(inputChar=='C' || inputChar == 'c')
    {
    pthread_mutex_trylock(&read_c_mutex); /*<--This must be _lock ?
    because with the use of trylock even If i don't aquire a lock I go ahead and modify
    the variable?*/
        read_c = 1;
    pthread_mutex_unlock(&read_c_mutex);        
    pthread_exit(NULL);
    }
}

}

void* xThread_fn(void* arg)
{
    while(1)
    {
        S;
    pthread_mutex_trylock(&read_c_mutex);
    if(!read_c)
    printf(" X");
    else
    pthread_exit(NULL);
    pthread_mutex_unlock(&read_c_mutex);
    }

}

void* yThread_fn(void* arg)
{
    while(1)
    {
        S;
    pthread_mutex_trylock(&read_c_mutex);
    if(!read_c)
    printf(" Y");
    else
    pthread_exit(NULL);
    pthread_mutex_unlock(&read_c_mutex);
    }

}

int main()
{
pthread_t xThread,yThread,inputThread;

pthread_create(&xThread,NULL,xThread_fn,NULL);
pthread_create(&inputThread,NULL,inputThread_fn,NULL);

pthread_join(xThread,NULL);
pthread_join(inputThread,NULL);

return 0;   
} 
```

当我使用`sleep(1)`线程时，会产生线程并且[不管首先启动哪个线程]，当程序到达`scanf`时`inputThread`它会暂停用户输入，并且代码在我输入输入之前不会继续。

当我使用 执行代码时`sleep(0)`，`scanf`不会停止输入，它会一直打印“X”，直到我输入“C”或“c”

`sleep()`以某种方式干扰吗`scanf`？

**注意：**我知道`select`被用于非阻塞输入。我也尝试过，代码运行良好。我只想知道在上述情况下为什么会出现不一致的行为？

* * *

更新（使用`trylock`）

* * *

```
 void* inputThread_fn(void* arg)
{
char inputChar;

    while(1)
    {
    S;
    scanf("%c",&inputChar);
        if(inputChar=='C' || inputChar == 'c')
        {
            pthread_mutex_trylock(&read_c_mutex);
                read_c = 1;
            pthread_mutex_unlock(&read_c_mutex);        
            pthread_exit(NULL);
        }
    }
}

void* xThread_fn(void* arg)
{
    while(1)
    {
    S;
    pthread_mutex_trylock(&read_c_mutex);
        if(!read_c)
        {
            pthread_mutex_unlock(&read_c_mutex);
            printf(" X");
        }
        else
        {
            pthread_mutex_unlock(&read_c_mutex);
            pthread_exit(NULL);
        }
    fflush(stdout); 
    }
}

void* yThread_fn(void* arg)
{
    while(1)
    {
    S;
    pthread_mutex_trylock(&read_c_mutex);
        if(!read_c)
        {
            pthread_mutex_unlock(&read_c_mutex);
            printf(" Z");
            fflush(stdout);
        }
        else
        {
            pthread_mutex_unlock(&read_c_mutex);
            pthread_exit(NULL);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:38:56.767

您看不到输出的原因是您没有刷新缓冲区。

您不需要刷新缓冲区的`sleep(0)`原因是因为写入器线程写入的数据太多以至于缓冲区填满并自动刷新。

```
#define SLEEP_TIME 1

void* xThread_fn(void* arg)
{
    while (1) {
        sleep(SLEEP_TIME);
        pthread_mutex_lock(&read_c_mutex);
        if (read_c) {
            pthread_mutex_unlock(&read_c_mutex);
            return NULL;
        }
        pthread_mutex_unlock(&read_c_mutex);
        printf(" X");
        fflush(stdout); // <-- necessary
    }
} 
```

## 不要使用`pthread_mutex_trylock()`

不要`pthread_mutex_trylock()`在这里使用。这是错的。

`lock()`和之间的区别在于`trylock()`总是`lock()`会成功¹但`trylock()`有时会失败。这就是为什么它被称为“尝试”。

由于`trylock()`有时会失败，因此您必须处理失败的情况。您的代码无法处理这种情况：它只是向前推进，假装它获得了锁。所以，假设`trylock()`不锁定互斥锁。发生什么了？

```
pthread_mutex_trylock(&read_c_mutex);  // Might fail (i.e., not lock the mutex)
read_c = 1;                            // Modifying shared state (Wrong!)
pthread_mutex_unlock(&read_c_mutex);   // Unlocking a mutex (Wrong!) 
```

然后是代码应该如何处理`trylock()`失败的问题。如果您无法回答这个问题，那么默认答案是“使用`lock()`”。

在阅读器线程中，您不能使用`trylock()`，因为您*必须*锁定互斥锁：

```
int r = pthread_mutex_trylock(&read_c_mutex);
if (r != 0) {
    // Uh... what are we supposed to do here?  Try again?
} else {
    read_c = 1;
    pthread_mutex_unlock(&read_c_mutex);
} 
```

在作者线程中，使用没有意义`trylock()`：

```
int r = pthread_mutex_trylock(&read_c_mutex);
if (r != 0) {
    // Okay, just try again next loop...
} else {
    if (read_c) {
        pthread_mutex_unlock(&read_c_mutex);
        pthread_exit(NULL);
    } else {
        pthread_mutex_unlock(&read_c_mutex);
    }
} 
```

然而，这完全没有意义。写线程失败的唯一原因`trylock()`是读线程拥有锁，只有当它当前正在设置时才会发生这种情况`read_c = 1;`。所以你不妨等待它完成，因为你知道你无论如何都会退出（为什么在你知道用户已经通知你的程序停止之后还要写更多的输出？）

只需使用`lock()`. 您将使用`lock()`99% 的时间，并`trylock()`用于其他 1%。

¹：`lock()`函数可能会失败，但这通常意味着您滥用了互斥锁。

## `lock()`关于和的误解`trylock()`

你说的是`trylock()`：

> 如果我有另一个线程访问该变量`read_input`，那么使用它是否合适？

我认为这里对互斥锁的性质存在一个非常根本的误解。如果另一个线程没有同时访问该变量，那么您根本不需要互斥锁*。*

假设你在办公室做重要的工作，你需要使用复印机。一次只能一个人使用复印机。你去复印机，有人已经在使用它了。

1.  如果你排队等到轮到你，那就是`lock()`。

2.  如果您放弃并回到办公桌前，那就是`trylock()`。（您的程序实际上忽略了 的返回码`trylock()`，因此您基本上开始在复印机上捣碎按钮，即使其他人正在使用它。）

现在想象一下使用复印机需要一分钟，只有两个人使用过复印机，而且他们每二十年才使用一次复印机。

1.  如果您使用，那么您在使用复印机之前*最多*`lock()`要排队等待一分钟。

**   如果您使用`trylock()`，那么您将放弃并回到办公桌前等待二十年，然后再次尝试复印机。* 

 *使用它没有任何意义`trylock()`，不是吗？您的线程是否如此急躁，以至于他们每二十年排一次队连一分钟都不能？

现在你的老板下来说：“我让你复印的那份报告呢？” 你说，“好吧，我六年前去过复印机，但有人在用它。”

这些数字（每 20 年一分钟）基于[每个程序员都应该知道的延迟数字](https://gist.github.com/jboner/2841832)，其中指出锁定/解锁互斥体大约需要 25ns。因此，如果我们假装需要一分钟来锁定然后解锁互斥锁，那么`sleep(1)`就会导致线程等待二十年。*

# javascript - Tips.hide() 函数。infoVis/JIT 中的潜在错误？

> ID：15813990
> 
> 赞同：2
> 
> 时间：2013-04-04T14:24:58.220
> 
> 标签：javascript, data-visualization, graph-visualization, infovis, thejit

我有一个启用了“提示”的力导向图。我不想为那些隐藏的节点显示提示，即“alpha”为零的节点。在 onShow 回调函数中，我尝试使用tips.hide() 但它没有隐藏提示。这是我的代码。

```
Tips: {  
  enable: true,  
  type: 'Native',  
  onShow: function(tip, node) { 
     if( node.getData('alpha') == 0 ) this.fd.tips.hide(false); 
     else tip.innerHTML = node.name;  
  }  
} 
```

当我深入研究 infovis 库 jit.js 时，我发现了一些看起来像错误的东西。下面是基本上将 style.display 设置为“无”的隐藏功能。

```
 hide: function(triggerCallback) {
    this.tip.style.display = 'none';
    triggerCallback && this.config.onHide();
  } 
```

现在看看下面的代码。

```
 onMouseMove: function(e, win, opt) {
    if(this.dom && this.isLabel(e, win)) {
      this.setTooltipPosition($.event.getPos(e, win));
    }
    if(!this.dom) {
     var node = opt.getNode();
     if(!node) {
       this.hide(true);
       return;
     }
     if(this.config.force || !this.node || this.node.id != node.id) { 
       this.node = node;
       this.config.onShow(this.tip, node, opt.getContains());
     }
     this.setTooltipPosition($.event.getPos(e, win));
   }
  },

  setTooltipPosition: function(pos) {
    var tip = this.tip, 
        style = tip.style, 
        cont = this.config;
    style.display = '';             //This looks like a problem
    //get window dimensions
    var win = {
       'height': document.body.clientHeight,
       'width': document.body.clientWidth
    };
    //get tooltip dimensions
    var obj = {
       'width': tip.offsetWidth,
       'height': tip.offsetHeight  
    };
    //set tooltip position
    var x = cont.offsetX, y = cont.offsetY;
    style.top = ((pos.y + y + obj.height > win.height)?  
        (pos.y - obj.height - y) : pos.y + y) + 'px';
    style.left = ((pos.x + obj.width + x > win.width)? 
        (pos.x - obj.width - x) : pos.x + x) + 'px';
  } 
```

如您所见，onShow 函数是从 onMouseMove 函数调用的。在 onShow 之后，调用 setTooltipPosition 函数将 style.display 设置回 ' '（参见我在代码中的注释）。因此，即使从 onShow 函数调用 hide()，提示也不会被隐藏。当我在 setTooltipPosition 中注释掉该行时，它起作用了，即对于隐藏的节点隐藏了工具提示。

这是 infovis 中的错误还是我做错了什么。我想知道如果隐藏功能不是错误，应该如何使用它。

另外，有没有人知道隐藏工具提示的任何其他更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T00:22:22.203

我有一个类似的问题。解决方案是使用 .css('visibility', 'visible') 而不是 .hide() - 因为元素在开始使用 css 样式时是隐藏的。

# javascript - Magento：管理类别中的空白选项卡内容

> ID：15813995
> 
> 赞同：0
> 
> 时间：2013-04-04T14:25:09.467
> 
> 标签：javascript, prototypejs, magento-1.4

## **为什么我在 Magento 的类别编辑表单上得到一个空白选项卡内容区域？**

**背景**

* * *

在 Magento 中，我添加了`input_renderer`一个自定义类别属性，该属性会生成一个下拉菜单 ( `select`)。渲染器的工作是附加一些 JavaScript 来监听`change`“父”下拉列表中的事件，并根据该父下拉列表的值填充自己的选项。这是我所拥有的：

![在此处输入图像描述](https://i.stack.imgur.com/HUTPU.png)

**这在我的开发环境中运行良好。但是在暂存时，一旦获取了 General 选项卡内容（包括我的 JS 代码），内容区域就会折叠并变为空白**：

*   控制台中没有抛出 JS 错误
*   服务器日志中没有引发警告/错误
*   这只是在添加我的 JS 代码后才开始发生

上周我发布了一个相关问题，因为我对我的 JavaScript 代码找不到问题感到沮丧。所以现在我从不同的角度来看它。

其他人报告了“白屏”问题，但没有给出对我有用的解决方案。

* * *

**任何指针**？如果你想看我的**源代码，这里是输入渲染器**：

[https://gist.github.com/vbuck/5310724](https://gist.github.com/vbuck/5310724)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T21:08:16.973

看起来你正在用你的 ajax url 做一些时髦的事情。我的建议是在继续之前对其进行调试。

*   你能在你的网络标签中看到来电吗？
*   Console.log 最终的 url 并在新窗口中尝试。
*   生成后，您将在 url 中插入参数...这真的有效吗？
*   这是一个管理模块，你为什么不使用：

    `Mage::helper("adminhtml")->getUrl()`

顺便说一句，

```
<code>
script language="text/javascript"
</code> 
```

被认为是不好的做法，你应该使用

```
<code>
script type="text/javascript"
</code>. 
```

不过，这可能不是您问题的根源。

希望你能得到一些好的指点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T14:28:32.060

只是为了记录，这是一个错误的变量分配问题。我将 JS 移动到它自己的文件中，通过布局更新加载，然后从块中*初始化*`getAfterElementHtml`它（in ）。正是在这里，我发现我的一个变量由于块方法中的语法错误而没有被分配。

# xml - xslt 生成 xhtml 1.0 严格

> ID：15813997
> 
> 赞同：-2
> 
> 时间：2013-04-04T14:25:12.993
> 
> 标签：xml, xslt, xhtml, markup, xhtml-1.0-strict

我生成 xhtml，但验证器（[http://validator.w3.org/check](http://validator.w3.org/check)）给我错误“文档类型不允许元素“li”在这里；缺少“ul”、“ol”开始标签之一

代码是：

```
<xsl:template match="/">
        <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
                <title>Catalogue</title>
            </head>
            <body>
                <h1>Producers</h1>
                <div style="margin:1em;background-color:lightgray;padding:0.5em">
                        <strong>Quick links to producers</strong>
                        <xsl:call-template name="producer" />
                </div>
                <xsl:apply-templates select="//producer[@id]" />
                <h1>Products</h1>
                <xsl:apply-templates select="//product[@id]" />
            </body>
        </html>
    </xsl:template>

    <xsl:template name="producer">
        <xsl:for-each select="//producer[@id]">
           <li>
              <a href="#{@id}"> 
                <b>
                    <xsl:value-of select="name"/>
                </b>
                <xsl:text>  (</xsl:text><xsl:value-of select="@id"/><xsl:text>) </xsl:text>
              </a>
          </li>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="producer[@id]">
        <a name="{@id}"/>
        <div style="border: thin solid gray;margin:1em;padding:0.5em;">
            <h2>
                <xsl:value-of select="name"/>
            </h2>
                <xsl:text>
                    <xsl:value-of select="description"/>
                </xsl:text>
                <xsl:apply-templates select="//producer[@id=current()/@id]/products"/>            
        </div>
    </xsl:template> 
```

知道如何生成有效的 xhtml 吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:26:34.333

在列表项周围放置一个列表。