# StackOverflow 问答 12674000-12674999

# javascript - 如何在javascript中使用对象值作为对象名称？

> ID：12674003
> 
> 赞同：0
> 
> 时间：2012-10-01T13:12:46.553
> 
> 标签：javascript, jquery, object

我如何使用对象值作为对象名称

像这样

```
$.each(columns, function(index, value) {
    var objectName = value.object; // need to pass this 
    to the next $.each
    //lets say i'm expecting objectName = x 
    $.each(values, function(i, v) {
        // console.log(v.x) ; // this works fine 
        console.log(v.objectName);
    });
});​ 
```

我试过`toString()`了 没有用 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:15:43.277

使用变量（标识符）而不是实际对象属性时使用方括号表示法

```
console.log(v[objectName]) 
```

* * *

有关主题的进一步参考：[http ://www.jibbering.com/faq/faq_notes/square_brackets.html](http://www.jibbering.com/faq/faq_notes/square_brackets.html)

> **作为标识符**
> 的字符串变量 方括号中使用的字符串不必是字符串文字。它可以是任何产生字符串的表达式。这是方括号符号变得最有用的地方，因为表达式可以是对将属性名称作为其值的字符串变量的引用，或者返回字符串的函数调用，或者连接两个字符串的表达式，或者任何组合这些 [...]

# ios - AVAudioPlayer 音量很低

> ID：12674005
> 
> 赞同：2
> 
> 时间：2012-10-01T13:12:50.913
> 
> 标签：ios, objective-c, audio, volume, playback

使用 AVAudioPlayer 播放声音时，音量非常低，您必须将手机靠近耳朵才能听到任何声音，使用音量按钮调节音量对其没有太大影响。

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:47:25.747

我让它工作了，我将 kAudioSessionProperty_OverrideCategoryDe​​faultToSpeaker 设置为 true，现在它可以正常工作了。

```
 UInt32 doChangeDefaultRoute = 1;
    AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(doChangeDefaultRoute), &doChangeDefaultRoute); 
```

斯威夫特 2.0 语法：

```
audioSession.setCategory(AVAudioSessionCategoryPlayAndRecord, withOptions: [.DefaultToSpeaker]) 
```

你必须把它放在一个 do 块中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:18:17.677

播放前，使用`[yourPlayer setVolume:1.0];`设置最大音量。

使用 iPhone 上的音量按钮设置音量有时仅在实际播放声音时才有效。

最后，使用音频编辑器打开您的声音文件，例如[Audacity](http://audacity.sourceforge.net/download/)。如果您发现整个声音的音量非常低（没有填满采样区域的整个高度），请使用适当的过滤器（例如“标准化”）。

其他声源（播放 MP3 音乐或观看视频时）是否正常工作？

# facebook - 拒绝 Facebook 内置的点赞操作

> ID：12674006
> 
> 赞同：4
> 
> 时间：2012-10-01T13:12:55.803
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试提交内置的类似操作。

第一次，我在我的网站上使用了一个标有“喜欢”且没有任何徽标的按钮并将其链接到操作，但我得到了以下反馈：

> 您的“赞”或“推荐”按钮品牌与 Facebook 条款第 5.6 节和平台政策第 I.8 节 (https://developers.facebook.com/docs/guides/policy/examples_and_explanations/branding/) 有冲突。请使用反映您自己的品牌和网站用户体验的不同图形重新提交。

然后我将按钮文本更改为“有用吗？”，但我得到了以下反馈：

> 您的行为与平台政策 (https://developers.facebook.com/policy/) 的第 IV.3 节相冲突。您必须向用户明确说明您将在 Facebook 上发布故事，并在实际发布故事之前获得他们的许可。此外，您的操作不得混淆或误导，并且应准确代表用户在您的应用中执行的操作。

这令人困惑，我不确定问题是什么，请帮助:)

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:36:44.057

[这一切都在Facebook 品牌页面](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/branding/)底部附近进行了解释。在您第一次尝试时，您使用了“喜欢”，而这在您的自定义按钮上是不允许的。您第二次使用“有用吗？” 这还不够清楚而且令人困惑。

我建议您阅读品牌政策示例和其他材料。

[Facebook 条款第 5.6 节](http://www.facebook.com/legal/terms)

> 您不得使用我们的版权或商标（包括 Facebook、Facebook 和 F 徽标、FB、Face、Poke、Book 和 Wall）或任何容易混淆的类似标记，除非我们的品牌使用指南明确允许或事先获得书面许可.

[平台政策第 I.8 节](http://developers.facebook.com/policy/)

> 您不得使用或衍生使用 Facebook 图标，或使用有关 Facebook 特性和功能的术语，如果此类使用可能使用户误认为所引用的是 Facebook 特性或功能。

第 IV.3 节

> 如果用户授予您发布权限，则您代表用户执行的操作必须符合用户的预期，并且与用户在您的应用中的操作一致。

# php - PHP In ajax responseText take all the html cose instead of ONLY the echo passed trought PHP

> ID：12674010
> 
> 赞同：0
> 
> 时间：2012-10-01T13:13:13.497
> 
> 标签：php, html, ajax, responsetext

Using that javascript ajax function I pass the content of a form, that contain the dato value, to the PHP login.php than trought the echo pass back the content (the insert form) that I want to be switched to the cancel form, using the content respondText (that may take only the echo of the PHP).

BUT INSTEAD the responseText contain ALL the html code, with the old html plus the cancella_form passed by the echo, that's also out of the div with id=visibile.

Any ideas why? D:

```
//ajaxSubmit(dato)
function ajaxSubmit( url , divId , hideId ) {

            //in setXmlHttpObject() I just control the user's browser
            // and assign the right XmlHttp Object
    var ajaxRequest = setXmlHttpObject();

    var dato = 'nome='+document.getElementsByName('dato')[0].value;
    ajaxRequest.open("POST", url, true);
    ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    ajaxRequest.send(dato);

    ajaxRequest.onreadystatechange = function() {
        //Comunication complete
        if (ajaxRequest.readyState == 4 && ajaxRequest.status==200) {
            //Comuncation succesfull
            if(ajaxRequest.statusText === "OK"){
                var str= ajaxRequest.responseText;//<<<HERE///////
                $(str).replaceAll("#visibile");

            }
            //Comuncation failed
            else{
                var str= "ERROR: Ajax: "+ajaxRequest.responseText;
                document.write(str);

            }
        }
    }

}//FINE ajaxRequest();

<?php

    include("prova_login_adv.php");

    $conn= mysql_connect('localhost','root','');
    mysql_select_db('db_prova',$conn ) or die(mysql_error());

    //
    if(isset($_POST['nome'])){
        $dato= $_POST['nome'];
        mysql_query(" INSERT INTO test (valore) VALUES ('$dato') ") or die(mysql_error());

            /// NOW I declare what I want to be replaced in the div id="visibile"
        echo "

            <form id='form_cancella' name='form_cancella' action='' methos='POST' onSubmit=' return false;' >
              <text name='dato' value='".$dato."' >Benvenuto <b>".$dato."</b></text>
              <input type='submit' name='cancella' value='cancella' onClick=\" ajaxSubmit('logout.php','visibile','form_cancella');\" />
            </form>

        ";

    }

?> 
```

# php - FPDF error: Could not include font metric file, but file exists

> ID：12674011
> 
> 赞同：0
> 
> 时间：2012-10-01T13:13:13.880
> 
> 标签：php, fpdf

I'm getting this error in a website I've taken over from someone else:

```
FPDF error: Could not include font metric file 
```

I have the path to the folder defined with:

```
define('FPDF_FONTPATH','xxxxx'); 
```

I have looked at other answers on Stackoverflow, which suggest that this means the folder or file do not exist. But in this case they do (I'm able to point at them with the web browser).

I would like to include a link here but would rather not for security reasons, unless anyone knows a safe way of doing so?

Any help much appreciated!

Thanks, G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:59:21.470

我遇到了同样的问题。

原因原来是我将字体代码从记事本复制到手动创建的 php 文件中（例如手动创建的 helvetica.php）。

过了一会儿，我决定显式地导入文件（eclipse->file->import）。之后错误消失了。这可能是一个权限问题。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T14:01:04.117

我解决了在 php 字体文件中添加（例如：）`opensans-regular.php`，在底部添加以下行：

```
$fpdf_charwidths['opensans-regular']=$cw; 
```

# windows-phone-7 - Main menu in windows phone 7 on xna framework

> ID：12674017
> 
> 赞同：0
> 
> 时间：2012-10-01T13:13:41.187
> 
> 标签：windows-phone-7, xna, windows-phone-7.1

I am writing a game using xna for wp7 for the first time and finding difficult to implement main menu and managing game state. please provide any tutorials/links.

I searched on SO, found below link but the this link is broken. [http://create.msdn.com/en-US/education/catalog/sample/game_state_management](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:46:03.533

试试诺基亚开发者网站： http: [//www.developer.nokia.com/Develop/Windows_Phone/Code_examples/](http://www.developer.nokia.com/Develop/Windows_Phone/Code_examples/)

他们在 XNA 上有一些很好的例子。

你知道你可以混合 XNA 和 Silverlight 吗？即菜单可以在 Silverlight 中，而您的实际游戏屏幕可以使用 XNA。

# c# - 创建父子树视图复选框节点

> ID：12674020
> 
> 赞同：1
> 
> 时间：2012-10-01T13:13:58.213
> 
> 标签：c#, asp.net, visual-studio-2010, treeview, checkbox

我需要创建一个带有复选框的树视图控件。但是，我的树视图需要为父级和子级设置复选框。*在我的情况下，业务逻辑是用户可能选择“MS Office”但可能不想要“Microsoft”。*

我遇到了[asp.net TreeView: how to use CheckBox in TreeView](http://asp-net-example.blogspot.com/2008/12/aspnet-treeview-how-to-use-checkbox-in.html)这有帮助，但是，我似乎无法为“Microsoft”和“Adobe”节点创建复选框。我该怎么做呢？

![在此处输入图像描述](../Images/13e75908004afbce1550a163d32788b1.png)

**html代码是：**

```
<form id="form1" runat="server">  
    <div>  
    <h2 style="color:Green">TreeView: ShowCheckBoxes</h2>  
        <asp:Label   
            ID="Label1"   
            runat="server"   
            Text="Checked Favorite"  
            Font-Size="Medium"  
            ForeColor="SeaGreen"  
            Font-Italic="true"  
            >  
        </asp:Label>  
        <br /><br />  
        <asp:TreeView   
            ID="TreeView1"  
            runat="server"  
            DataSourceID="XmlDataSource1"  
            >  
            <DataBindings>  
                <asp:TreeNodeBinding DataMember="Products" Text="Products" />  
                <asp:TreeNodeBinding DataMember="Type" TextField="Name" />  
                <asp:TreeNodeBinding DataMember="Product" TextField="Name" ValueField="ID" />  
            </DataBindings>  
        </asp:TreeView>  
        <br />  
        <asp:XmlDataSource   
            ID="XmlDataSource1"  
            runat="server"  
            >  
            <Data>  
                <Products>  
                    <Type Name="Microsoft">  
                        <Product ID="1" Name="MS Office"/>  
                        <Product ID="2" Name="ASP.NET"/>  
                    </Type>  
                    <Type Name="Adobe">  
                        <Product ID="1" Name="ColdFusion"/>  
                        <Product ID="2" Name="Flex"/>  
                        <Product ID="2" Name="Photoshop"/>  
                    </Type>  
                </Products>  
            </Data>  
        </asp:XmlDataSource>  
        <asp:Button ID="Button1" runat="server" Text="Submit Favorite" OnClick="Button1_Click" />  
    </div>  
    </form> 
```

**后面的代码是：**

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;

namespace TreeviewCheckboxSample
{
    public partial class Treeview : System.Web.UI.Page
    {
        protected void Button1_Click(object sender, EventArgs e)
        {
            Label1.Text = "Your favorite:";
            if (TreeView1.CheckedNodes.Count > 0)
            {
                foreach (TreeNode node in TreeView1.CheckedNodes)
                {
                    Label1.Text += "<br />" + node.Text.ToString();
                }
            }
            else
            {
                Label1.Text = "Checked before submit.";
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!this.IsPostBack)
            {
                TreeView1.ShowCheckBoxes = TreeNodeTypes.Leaf;
                TreeView1.ForeColor = System.Drawing.Color.Black;
                TreeView1.BackColor = System.Drawing.Color.White;
                TreeView1.Width = 200;
                Button1.Font.Bold = true;
                Button1.ForeColor = System.Drawing.Color.Crimson;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:19:19.383

该[`ShowCheckBoxes`物业](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.showcheckboxes.aspx)并没有真正涵盖这种情况。

但是，您可以在绑定树后更改每个单独节点的[`ShowCheckBox`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.showcheckbox.aspx)。该页面包含一些示例代码，甚至可以根据节点的深度执行此操作，这看起来就像您所追求的那样。

# javascript - 如何在提交时调用 javascript 函数为输入分配值？（ACE 编辑器）

> ID：12674023
> 
> 赞同：0
> 
> 时间：2012-10-01T13:14:06.653
> 
> 标签：javascript, html, forms, submit, ace-editor

我的目标是将 ACE 编辑器中的代码作为变量发送到`send.php`PHP 文件。我尝试了许多不同的方法，但我无法将编辑器内的代码分配给表单输入。

* * *

**JavaScript**

此 javascript 函数应为带有 的元素分配一个值`id="code"`，即：`<input type="hidden" id="code" value="" />`。

`editor.getSession().getValue();`返回编辑器内的代码。

```
<head>
 <script>

   function getVal() {
   document.getElementById('code').value = editor.getSession().getValue();
   }

 </script>
</head> 
```

**HTML**

现在，`<form onsubmit="getVal();"`应该`function getVal()`在用户提交表单时执行，以便在将输入发送到文件`code`时输入将具有值。`send.php`

```
<body>

  <div>
     <form onsubmit="getVal();" method="post" action="send.php">

        <label for="Name">From:</label>
        <input type="text" name="Name" id="Name" />
        <label for="Address">To:</label>
        <input type="text" name="Address" id="Address" />
        <label for="Subject">Subject:</label>
        <input type="text" name="Subject" id="Subject" />

        <input type="hidden" id="code" value="" />

        <div id="editor"> //ACE Editor
        </div>

        <input type="submit">

     </form>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:59:33.283

这个功能是我完成这项工作所需要的：

```
function getVal()
{
  var editor = ace.edit("editor"); 
  // this line is necessary
  // "editor" is the id of the ACE editor div

  var code = editor.getSession().getValue();

  document.getElementById('code').value = code;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:51:42.207

代码是正确的， editor.getSession().getValue() 为空，所以它什么也不写！

# java - After upgrade from v. 5.011 to 6.5 TreeitemRenderer's render() not called

> ID：12674028
> 
> 赞同：1
> 
> 时间：2012-10-01T13:14:22.153
> 
> 标签：java, zk

I upgrade my application from ZK 5.011 to 6.5 and now TreeitemRenderer's render() not called.

This is my code:

```
// --- node (domain) class ---

public class CatalogTreeNode implements Serializable {

    private static final long serialVersionUID = 1L;

    public CatalogTreeNode( int nodeID, String nodeName, CatalogTreeNode parent ) {
        this.nodeID = nodeID;
        this.nodeName = nodeName;
    }

    private int nodeID;
    private String nodeName;

    // setters and getters
 }

// --- tree model class ---
// I need "load on demand"

public class CatalogTreeModel extends AbstractTreeModel<CatalogTreeNode> 
{
    private static final long serialVersionUID = 2L;

    public CatalogTreeModel( CatalogTreeNode root ) 
    {
        super( root );
        //...
    }

    @Override
    public CatalogTreeNode getChild( CatalogTreeNode parent, int childIndex ) {
        //...
    }

    @Override
    public int getChildCount( CatalogTreeNode node ) {  
        //...
    }

    @Override
    public boolean isLeaf( CatalogTreeNode node ) {
       //...
    }

    @Override
    public int getIndexOfChild( CatalogTreeNode parent, CatalogTreeNode child ) {
        //...
    }
}

// -- using in controller ---

public class MainFormController extends GenericForwardComposer<Component> {

    private Tree myTree;

    // ...

    @Override
    public void doAfterCompose( Component comp ) throws java.lang.Exception {
        super.doAfterCompose(comp);

        CatalogTreeNode catTreeRoot = new CatalogTreeNode( -1, "ROOT", null );

        catTreeRoot.addChild( new CatalogTreeNode( 1, "One", catTreeRoot ) );
        catTreeRoot.addChild( new CatalogTreeNode( 2, "Two", catTreeRoot ) );

            CatalogTreeModel model = new CatalogTreeModel( catTreeRoot );
                // model != null - Ok!

        CatalogTreeItemsRenderer renderer = new CatalogTreeItemsRenderer();
                // render != null - Ok!

        myTree.setItemRenderer( renderer ); 

        myTree.setModel( model );

        // ...
    }

    // renderer
    private class CatalogTreeItemsRenderer implements TreeitemRenderer<CatalogTreeNode> {

    @Override
    public void render( Treeitem item, CatalogTreeNode data, int index ) throws Exception {
            ...
        }
    }
} 
```

With ZK v. 5.011 this work fine, but after upgrade ZK to v. 6.5 method render(...) of CatalogTreeItemsRenderer is not called at all and tree is empty!

# python - Average of numbers in a list

> ID：12674033
> 
> 赞同：0
> 
> 时间：2012-10-01T13:14:59.293
> 
> 标签：python, list

I'm trying to import a txt file into python that contains a list of numbers. I'm suppose to get the average of the numbers and the standard deviation of the numbers in the file. My script is wrong though, can someone show me the right way.

```
from sys import argv
script, filename = argv
txt = open(filename)
for line in txt:
    total = 0
    length = 0
    amount = float(line)
    total += amount
    length = length + 1
average = total/length
print average 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T13:16:14.460

```
total = 0
length = 0 
```

应该在循环之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:16:56.207

将以下语句移到循环之外：-

```
total = 0
length = 0 
```

# php - 在 PHP 中查找上个月的最后一天

> ID：12674041
> 
> 赞同：30
> 
> 时间：2012-10-01T13:15:20.457
> 
> 标签：php, datetime

我有点不确定为什么无法找到上个月的最后一天。每个步骤似乎都正常工作，除非创建最终日期。

```
<?php

$currentMonth = date('n');
$currentYear = date('Y');

if($currentMonth == 1) {
    $lastMonth = 12;
    $lastYear = $currentYear - 1;
}
else {
    $lastMonth = $currentMonth -1;
    $lastYear = $currentYear;
}

if($lastMonth < 10) {
    $lastMonth = '0' . $lastMonth;
}

$lastDayOfMonth = date('t', $lastMonth);

$lastDateOfPreviousMonth = $lastYear . '-' . $lastMonth . '-' . $lastDayOfMonth;

$newLastDateOfMonth = date('F j, Y', strtotime($lastDateOfPreviousMonth));

?> 
```

`$lastDateOfPreviousMonth`按预期返回 2012-09-30；但是，在尝试将其转换为 2012 年 9 月 30 日之后 -`$newLastDateOfMonth`将返回 2012 年 10 月 1 日。我似乎哪里出错了？

编辑：如果在 2013 年 1 月 1 日使用`date("t/m/Y", strtotime("last month"));`或`date('Y-m-d', strtotime('last day of previous month'));`其中任何一个仍然可行，即它们会考虑到年份的变化吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-10-01T13:17:21.890

```
echo date('Y-m-d', strtotime('last day of previous month'));
//2012-09-30 
```

或者

```
$date = new DateTime();
$date->modify("last day of previous month");
echo $date->format("Y-m-d"); 
```

稍后编辑：[php.net 文档 - strtotime()、DateTime 和 date_create() 的相对格式](http://www.php.net/manual/en/datetime.formats.relative.php)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-01T13:19:55.520

为此有一个 php 函数。

```
echo date("t/m/Y", strtotime("last month")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T13:19:27.007

本月的第一天，负 1 秒。

```
echo date('Y-m-d',strtotime('-1 second',strtotime(date('m').'/01/'.date('Y')))); 
```

[这里](http://codepad.org/ZnWB48pl)的例子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-19T14:35:30.247

请尝试以下答案。

代码：

```
echo date("t/m/Y", strtotime(date('Y-m')." -1 month")); 
```

您将获得前 12 个月的最后一天。

例子：

```
 <?php
for ($i = 1; $i <= 12; $i++) {
    $months[] = date("t/m/Y l", strtotime(date('Y-m')." -$i months"));
}
print_r($months);
?> 
```

输出：

```
Array
(
    [0] => 30/11/2018 Monday
    [1] => 31/10/2018 Friday
    [2] => 30/09/2018 Wednesday
    [3] => 31/08/2018 Sunday
    [4] => 31/07/2018 Thursday
    [5] => 30/06/2018 Tuesday
    [6] => 31/05/2018 Saturday
    [7] => 30/04/2018 Thursday
    [8] => 31/03/2018 Monday
    [9] => 28/02/2018 Monday
    [10] => 31/01/2018 Friday
    [11] => 31/12/2017 Tuesday
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-26T21:57:28.703

您也可以使用`strtotime()`的零处理功能来实现此目的：

```
# Day Before
    echo date('Y-m-d', strtotime('2016-03-00')); // 2016-02-29

# Year can be handled too
    echo date('Y-m-d', strtotime('2016-01-00')); // 2015-12-31

# Month Before
    echo date('Y-m-d', strtotime('2016-00-01')); // 2015-12-01

# Month AND Day
    echo date('Y-m-d', strtotime('2016-00-00')); // 2015-11-30 
```

*如果您将 00 视为“比第一个 (01) 少一个”，那么这是有道理的。*

所以为了达到这个问题的目的，“上个月的最后一天”是一个简单的例子

```
date('your_format', strtotime('YYYY-ThisMonth-00'));
# So:
date('Y-m-d', strtotime('2016-11-00')); // 2016-10-31 
```

# flash - AR Drone 2 和 ffserver + ffmpeg 流媒体

> ID：12674048
> 
> 赞同：3
> 
> 时间：2012-10-01T13:15:50.140
> 
> 标签：flash, ffmpeg, streaming, codec, ar.drone

我希望能够将 AR Drone 2 的视频源从 Debian 服务器重新传输到 Flash。

我知道 AR Drone 使用编解码器 p264。在视频编解码器方面我完全是绿色的，所以我不知道什么适合我想要实现的目标？

与我使用 ffplay 直接连接到 AR Drone 时相比，我已经能够从 AR Drone 流式传输视频，但延迟非常高且质量极低。

我目前在标准 ffserver.conf 中使用 .swf 示例：

```
<Stream test.swf>
Feed feed1.ffm
Format swf
VideoFrameRate 30
VideoIntraOnly
NoAudio
</Stream> 
```

.ffm Feed 的设置如下：

```
<Feed feed1.ffm>
File /tmp/feed1.ffm
FileMaxSize 17K
ACL allow 127.0.0.1
NoAudio
</Feed> 
```

我用于向 ffserver 提要提供输入的命令：

```
ffmpeg -i http://192.168.1.1:5555 http://localhost:8090/feed1.ffm 
```

由于流目前无法观看，我如何才能实现更低的延迟和更高的质量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T22:27:35.243

不幸的是，ffserver 根本无法完成您想要完成的工作。你和互联网上的其他人一样碰壁。我能得到的最好的结果是大约 3 秒的延迟，随着流运行几个小时，它会逐渐增加到大约 5-10 秒。

对我来说，流也没有用 ffmpeg 解码。我不知道为什么。它与 ffplay 一起使用，这让我更加困惑！

我正在研究 Py-Media，看看我是否可以为类似的项目编写自己的代码。我想流式传输 ardrone 视频并缩小流中的图像。

ps 查看 gstreamer，我看到其他人讨论它会产生不同的结果。

# mysql - mysql批量插入多对多表

> ID：12674049
> 
> 赞同：0
> 
> 时间：2012-10-01T13:15:53.907
> 
> 标签：mysql

我引入了一个新的多对多表，想知道是否有办法用 2 个表执行 SELECT/INSERT。

表：

1.  用户
2.  团体
3.  用户组（空）

如何将所有用户插入每个组？例如，用所有内容填充 user_groups 表。

user_groups 包含用户和组的外键。

更新显示表结构的更多详细信息：

```
--
-- Table structure for table `groups`
--

CREATE TABLE IF NOT EXISTS `groups` (
  `group_id` int(6) NOT NULL AUTO_INCREMENT,
  `group_name` varchar(255) NOT NULL,
  PRIMARY KEY (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE IF NOT EXISTS `users` (
  `user_id` int(6) NOT NULL AUTO_INCREMENT,
  `user_name` varchar(255) NOT NULL,
  `user_address` varchar(255) NOT NULL,
  PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `user_groups`
--

CREATE TABLE IF NOT EXISTS `user_groups` (
  `user_group_id` int(6) NOT NULL AUTO_INCREMENT,
  `user_id` int(6) NOT NULL,
  `group_id` int(6) NOT NULL,
  PRIMARY KEY (`user_group_id`),
  KEY `user_id` (`user_id`,`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:05:55.277

你可以做一个插入...选择。

[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

您只需要找到一种方法来选择所需的数据集，如果我对您的理解正确，您希望将每个用户添加到每个组中。具有始终为 true 的连接条件的 INNER JOIN 会将每个用户与每个组匹配。

所以选择会是这样的

`SELECT users.user_id, groups.group_id FROM users INNER JOIN groups ON 1=1`

所以整个查询应该是这样的

`INSERT INTO user_groups (user_id,group_id) SELECT users.user_id, groups.group_id FROM users INNER JOIN groups ON 1=1`

# wcf - 如何更改 WCF 服务 URL？

> ID：12674050
> 
> 赞同：0
> 
> 时间：2012-10-01T13:16:08.597
> 
> 标签：wcf, iis, hosting

我有一个 WCF 3.0 服务，该服务已使用 BasicHttpBinding 进行配置，并已部署并托管在 IIS 中。

我可以使用以下网址访问我的服务：

[http://mydomain.com/subfolder1/subfolder2/myservice.svc/basic](http://mydomain.com/subfolder1/subfolder2/myservice.svc/basic)

地址末尾的“basic”是端点的相对地址，“/subfolder1/subfolder2”是 myservice.svc 文件物理部署到的位置：

```
 <endpoint address="basic" binding="basicHttpBinding" 
          contract="Company.MyService.Implementation.Contracts.IMyService">
 </endpoint> 
```

如何配置设置，以便我可以使用以下 url 访问我的服务，而无需指定 .svc 路径：

[http://mydomain.com/myService/basic](http://mydomain.com/myService/basic)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:37:31.230

事实上，这不是您服务的责任。您应该构建“无地址”服务，而不是在配置中指定一个绝对值。

您的问题与 IIS 下的网络托管有关。服务的物理路径（部署位置）和虚拟路径（客户端访问它的位置）之间存在巨大差异。

在您的示例中，您只需在*http://mydomain.com/*下创建一个新的 Web 应用程序并发布您的服务。*subfolder1*似乎是现有网站的虚拟目录。只需在此处使用 IIS 管理器创建 Web 应用程序。

# android - 如何开始更快地接收 GPS？

> ID：12674055
> 
> 赞同：1
> 
> 时间：2012-10-01T13:16:17.900
> 
> 标签：android, gps

目前我在 5 到 10 分钟后收到 GPS 请告诉我如何更快地接收 GPS 的做法或想法。也许我可以结合 GPS + Internet + WIFI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:18:07.190

如果您使用 GPS + A-GPS（移动网络）+ WiFi，它会更快。你用什么型号的手机？

如果您在构建 GPS 时发现位置比在外面慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:43:06.633

您可以告诉 LocationManager 使用您的网络提供商来加速 GPS 定位。只需确保在设置侦听器时从 LocationManager.NETWORK_PROVIDER 请求更新。也许这太明显了，但是：在外面或至少直接在窗户后面尝试，它不会在你房间某处的开发计算机附近工作得那么好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:52:00.240

经验法则是使用所有可用的位置提供者并获得最佳结果（您已经有 reo meier 博客的链接）。您应为用户提供最佳可用位置（前提是满足精度和年龄要求），同时等待某些提供商提供更好的修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T15:53:04.803

这是一篇旨在让技术水平较低的用户可以访问的文章，但包含一些有关提高手机 GPS 性能的有用信息和建议，包括非常激烈的事情，例如刷新自定义 ROM 或收音机：[如何修复我的 Android 糟糕的 GPS？](http://lifehacker.com/5873007/how-can-i-fix-my-androids-crappy-gps)

# java - 从 Windows 登录屏幕捕获键盘输入

> ID：12674056
> 
> 赞同：-1
> 
> 时间：2012-10-01T13:16:22.050
> 
> 标签：java, windows, security, login, keyboard-input

我想做以下事情来完成我的 Java 项目：-

1.  锁定 Windows 桌面。
2.  Windows 桌面锁定时检测按键事件。
3.  将键盘输入的键保存在文本文件中。

第一步是使用以下代码完成的：

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("C:\\Windows\\System32\\rundll32.exe user32.dll,LockWorkStation"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:41:53.973

出于安全考虑，用户应用程序将永远无法做到这一点。但是，如果您使用驱动程序拦截较低级别的输入，则可以绕过限制。[这个 StackOverflow 问题](https://stackoverflow.com/questions/9652358/simulating-input-in-windows-logon-screen-using-a-driver)讨论了一个类似的问题。[链接的驱动程序](http://oblita.com/Interception.html)看起来很适合您的目的。

# java - SpringMvc - java.lang.NoSuchMethodException

> ID：12674061
> 
> 赞同：4
> 
> 时间：2012-10-01T13:16:46.827
> 
> 标签：java, spring-mvc, annotations, datasource

尝试设置我正在使用 Spring 3.0 的数据源时出现以下错误是我的代码：

**错误**

```
520  [ContainerBackgroundProcessor[StandardEngine[Catalina]]] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'countryManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'countryDao' while setting bean property 'countryDao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'countryDao' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.jdbc.JdbcCountryDAO]: No default constructor found; nested exception is java.lang.NoSuchMethodException: com.crimetrack.jdbc.JdbcCountryDAO.<init>() 
```

**JdbcCountryDAO.java**

```
@Repository
public class JdbcCountryDAO extends JdbcDaoSupport implements CountryDAO{

    private final Logger logger = Logger.getLogger(getClass());

    @Autowired
    JdbcCountryDAO(DataSource dataSource){
        setDataSource(dataSource);
    }

    public List<Country> getCountryList() {
        int countryId = 6;
        String countryCode = "AI";
        logger.debug("In getCountryList()");
        String sql = "SELECT * FROM TBLCOUNTRY WHERE countryId = ? AND countryCode = ?";
        logger.debug("Executing getCountryList String "+sql);

        Object[] parameters = new Object[] {countryId, countryCode};

        logger.info(sql);

        //List<Country> countryList = getJdbcTemplate().query(sql,new CountryMapper());

        List<Country> countryList = getJdbcTemplate().query(sql, parameters,new CountryMapper());
        return countryList;
    } 
```

**应用程序上下文.xml**

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${jdbc.driverClassName}"/>
            <property name="url" value="${jdbc.url}"/>
            <property name="username" value="${jdbc.username}"/>
            <property name="password" value="${jdbc.password}"/>
    </bean>

  <bean id="countryManager" class="com.crimetrack.service.CountryManager">
        <property name="countryDao" ref="countryDao"/>
    </bean>
    <bean id="countryDao" class="com.crimetrack.jdbc.JdbcCountryDAO">
        <property name="dataSource" ref="dataSource"/>
    </bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:36:08.177

你需要这样做：

```
<bean id="countryDao" class="com.crimetrack.jdbc.JdbcCountryDAO">
    <constructor-arg index="0" ref="dataSource"/>
</bean> 
```

`dataSource`不是类的属性，`JdbcCountryDAO`它是构造函数参数。Spring 对你说：`No default constructor found`，因为这不是默认构造函数：

```
@Autowired
JdbcCountryDAO(DataSource dataSource){
    setDataSource(dataSource);
} 
```

它有一个`DataSource`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:32:24.530

我认为错误的原因很简单，因为您的 JdbcCountryDAO 的构造函数范围是默认范围，您需要将其设置为`public`.

# java - 无法在 JBoss 6 EAP 上排除 logmanager 模块

> ID：12674062
> 
> 赞同：1
> 
> 时间：2012-10-01T13:16:48.193
> 
> 标签：java, log4j, jboss6.x

我试图从 JBoss 6 EAP 中的 jboss-deployment-structure.xml 中排除所有日志记录模块。

我的 jboss-deployment-structure.xml 是：

```
<jboss-deployment-structure>
  <deployment>
    <exclusions>
      <module name="org.apache.log4j" />
      <module name="org.jboss.logging" />
      <module name="org.jboss.logmanager" />
      <module name="org.jboss.log4j.logmanager" />
    </exclusions>
  </deployment>
</jboss-deployment-structure> 
```

因此，在使用上述配置部署我的 .war 后，我得到：

```
[ModuleClassLoader for Module "org.jboss.log4j.logmanager:main" from local module loader @10ab323 (roots: /home/me/dev/jboss-eap-6.0/modules)] whereas object of type "org.apache.log4j.ConsoleAppender" was loaded by [ModuleClassLoader for Module "deployment.myapp.war:main" from Service Module Loader]. 
```

所以我通常想让 JBoss 停止尝试加载 log4j 并让我的应用程序加载它。

是否可以禁用 logmanager 模块？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T08:00:29.127

我能够使用这个 jboss-deployment-structure.xml 解决这个问题

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2">
<deployment>
    <exclusions>
        <module name="org.apache.log4j"/>
        <module name="org.apache.commons.logging"/>
    </exclusions>
</deployment> 
```

我在 WEB-INF 下创建的。您还应该将 log4j.jar 放在 WEB-INF/lib 中。

# java - 如何将 BufferedImage 保存为文件

> ID：12674064
> 
> 赞同：156
> 
> 时间：2012-10-01T13:16:50.680
> 
> 标签：java, file-io, bufferedimage

我正在使用[imgscalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library) Java 库来调整图像大小。

resize() 方法调用的结果是一个 BufferedImage 对象。我现在想将其保存为文件（通常为 .jpg）。

我怎样才能做到这一点？我想从`BufferedImage`->出发，`File`但也许这不是正确的方法？

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2012-10-01T13:19:13.370

```
File outputfile = new File("image.jpg");
ImageIO.write(bufferedImage, "jpg", outputfile); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-12-30T01:36:49.233

答案在 Java 文档的[Tutorial for Writing/Save an Image](https://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)中。

该类`Image I/O`提供了以下保存图像的方法：

```
static boolean ImageIO.write(RenderedImage im, String formatName, File output)  throws IOException 
```

本教程解释说

> BufferedImage 类实现了 RenderedImage 接口。

所以它可以在方法中使用。

例如，

```
try {
    BufferedImage bi = getMyImage();  // retrieve image
    File outputfile = new File("saved.png");
    ImageIO.write(bi, "png", outputfile);
} catch (IOException e) {
    // handle exception
} 
```

`write`用[try 块](https://docs.oracle.com/javase/tutorial/essential/exceptions/try.html)包围调用很重要，因为根据[API](https://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write(java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File))，该方法会抛出`IOException`“如果在写入过程中发生错误”

还更详细地解释了方法的目标、参数、返回和抛出：

> 使用支持给定格式的任意 ImageWriter 将图像写入文件。如果已经存在 File，则丢弃其内容。
> 
> # 参数：
> 
> im - 要写入的 RenderedImage。
> 
> formatName - 一个包含格式的非正式名称的字符串。
> 
> output - 要写入的文件。
> 
> # 回报：
> 
> 如果没有找到合适的作者，则返回 false。
> 
> # 抛出：
> 
> IllegalArgumentException - 如果任何参数为空。
> 
> IOException - 如果在写入过程中发生错误。

然而，`formatName`可能看起来仍然相当模糊和模棱两可；本教程将其清除了一点：

> ImageIO.write 方法调用实现PNG 的代码编写“PNG 编写器插件”。使用术语插件是因为 Image I/O 是可扩展的并且可以支持多种格式。
> 
> 但以下标准图像格式插件：JPEG、PNG、GIF、BMP 和 WBMP 始终存在。
> 
> 对于大多数应用程序，使用这些标准插件之一就足够了。它们的优点是随时可用。

但是，您可以使用其他格式：

> Image I/O 类提供了一种插入支持其他可用格式的方法，并且存在许多这样的插件。如果您对系统中可以加载或保存的文件格式感兴趣，可以使用 ImageIO 类的 getReaderFormatNames 和 getWriterFormatNames 方法。这些方法返回一个字符串数组，列出此 JRE 支持的所有格式。
> 
> `String writerNames[] = ImageIO.getWriterFormatNames();`
> 
> 返回的名称数组将包括已安装的任何其他插件，并且这些名称中的任何一个都可以用作格式名称来选择图像编写器。

完整且实用的示例可以参考 Oracle 的[`SaveImage.java`示例。](https://docs.oracle.com/javase/tutorial/2d/images/examples/SaveImage.java)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-10-01T13:19:52.120

`BufferedImage`您可以使用类的 write 方法保存对象[`javax.imageio.ImageIO`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html)。该方法的签名是这样的：

```
public static boolean write(RenderedImage im, String formatName, File output) throws IOException 
```

这`im`是`RenderedImage`要写入的，`formatName`是包含格式的非正式名称（例如png）的字符串，是`output`要写入的文件对象。PNG文件格式的方法的示例用法如下所示：

```
ImageIO.write(image, "png", file); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-04-12T22:13:43.943

**创建 java.awt.image.bufferedImage 并将其保存到文件：**

```
import java.io.*;
import java.awt.image.*;
import javax.imageio.*;
public class Main{
    public static void main(String args[]){
        try{
            BufferedImage img = new BufferedImage( 
                500, 500, BufferedImage.TYPE_INT_RGB );

            File f = new File("MyFile.png");
            int r = 5;
            int g = 25;
            int b = 255;
            int col = (r << 16) | (g << 8) | b;
            for(int x = 0; x < 500; x++){
                for(int y = 20; y < 300; y++){
                    img.setRGB(x, y, col);
                }
            }
            ImageIO.write(img, "PNG", f);
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

**笔记：**

1.  创建一个名为 MyFile.png 的文件。
2.  图像为 500 x 500 像素。
3.  覆盖现有文件。
4.  图像的颜色为黑色，顶部有一条蓝色条纹。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-21T17:03:11.513

1.  下载[imgscalr-lib-xxjar](https://github.com/thebuzzmedia/imgscalr/downloads)和[imgscalr-lib-xx-javadoc.jar](https://github.com/thebuzzmedia/imgscalr/downloads)并将其添加到您的项目库中。
2.  在您的代码中：

    ```
    import static org.imgscalr.Scalr.*;

    public static BufferedImage resizeBufferedImage(BufferedImage image, Scalr.Method scalrMethod, Scalr.Mode scalrMode, int width, int height)  {
        BufferedImage bi = image;
        bi = resize( image, scalrMethod, scalrMode, width, height);
    return bi;
    }

    // Save image:
    ImageIO.write(Scalr.resize(etotBImage, 150), "jpg", new File(myDir)); 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T13:24:02.070

作为一个班轮：

```
ImageIO.write(Scalr.resize(ImageIO.read(...), 150)); 
```

# runtime-error - ASMX web-service-call 请求失败，HTTP 状态 401: Unauthorized

> ID：12674071
> 
> 赞同：0
> 
> 时间：2012-10-01T13:17:11.543
> 
> 标签：runtime-error, http-status-code-401

在 Episerver 项目中，从一台服务器上的网站调用另一台服务器上的 ASMX-webservice。调用的用户有权在 IIS 7 中设置写入、创建和检索文件夹中的文件。

进行此调用时会出现以下错误消息：

```
RemotePublishForLedigeStillinger.DataFactoryService.RawPage rawPageLedigeStillingerRemote = dfService.GetDefaultPageData(pageRef, Int32.Parse(pageidOfLedigeStillingar)); 
```

如何解决以下错误？：

```
Detailed error information (authorized by permissions to functions)
Error occured   01.10.2012 14:35:07
User IP 172.29.2.84
User Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1
Url ....
Referer ...

The request failed with HTTP status 401: Unauthorized.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Net.WebException: The request failed with HTTP status 401: Unauthorized.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[WebException: The request failed with HTTP status 401: Unauthorized.]
   System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall) +431289
   System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) +204
   RemotePublishForLedigeStillinger.DataFactoryService.DataFactoryService.GetDefaultPageData(PageReference pageLink, Int32 pageTypeID) in C:\Programmering\RemotePublishTest\RemotePublishTest\Web References\DataFactoryService\Reference.cs:147
   RemotePublishForLedigeStillinger.Program.PublishPageToRemoteService(PageData pageLedigeStillingerOriginal) in C:\Programmering\RemotePublishTest\RemotePublishTest\Program.cs:143
   EPiServer.Templates.RelatePlus.Pages.JobAd.RemotePublishPage(PageData pageToPublish) in C:\Repo\Projects\dikt.intranett\www\Templates\RelatePlus\Pages\JobAd.aspx.cs:125
   EPiServer.Templates.RelatePlus.Pages.JobAd.Godkjent_OnClick(Object sender, EventArgs e) in C:\Repo\Projects\dikt.intranett\www\Templates\RelatePlus\Pages\JobAd.aspx.cs:110
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +111
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +110
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1565 
```

IIS 日志显示了这一点：

```
2002:5100:9dbc:8000:0:5efe:10.50.0.227, -, 10/1/2012, 14:52:20, W3SVC2, DRINVS253, 2002:5100:9dbc:8000:0:5efe:10.50.0.160, 15, 775, 1700, 401, 0, POST, /WebServices/DataFactoryService.asmx, -,
2002:5100:9dbc:8000:0:5efe:10.50.0.227, dr-2\epi.admin, 10/1/2012, 14:52:20, W3SVC2, DRINVS253, 2002:5100:9dbc:8000:0:5efe:10.50.0.160, 0, 806, 1700, 401, 0, POST, /WebServices/DataFactoryService.asmx, -, 
```

部署 web 服务的服务器上的 web.config 中的一些数据。：

```
<episerver.basicAuthentication sendBasicChallenge="true" basicRealm="" />
    <system.web>
      <httpModules>
    <add 
        name="BasicAuthentication" 
        type="EPiServer.Security.BasicAuthentication, EPiServer" /> 

   </httpModules> 

      <httpRuntime maxRequestLength="1000000" />
      <authorization>
        <allow roles="Administrators,WebServices,dr-2\epi.admin" />
        <deny users="*" />
      </authorization>
    </system.web>
    <system.webServer>

        <modules runAllManagedModulesForAllRequests="true">
         <add name="BasicAuthentication" type="EPiServer.Security.BasicAuthentication, EPiServer" />
        </modules> 

    <handlers>
        <clear />
        <add name="webresources" path="WebResource.axd" verb="GET" type="System.Web.Handlers.AssemblyResourceLoader" />
        <add name="WebServiceHandlerFactory-Integrated" path="*.asmx" verb="GET,HEAD,POST,DEBUG" type="System.Web.Services.Protocols.WebServiceHandlerFactory, System.Web.Services, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" allowPathInfo="false" preCondition="integratedMode" responseBufferLimit="4194304" />
        <add name="wildcard" path="*" verb="*" type="EPiServer.Web.StaticFileHandler, EPiServer" />
      </handlers>
    </system.webServer> 
```

补充：用户是'dr-2\epi-admin'。

它的登录详细信息被发送到服务器：

```
public DataFactoryService() {
    this.Url = System.Configuration.ConfigurationManager.AppSettings[urlForLedigeStillingerRemoteServiceStringFromAppSettingsGlobal];
    this.UseDefaultCredentials = true;

        //.Default.RemotePublishForLedigeStillinger_DataFactoryService_DataFactoryService;
    if ((this.IsLocalFileSystemWebService(this.Url) == true)) {
        this.UseDefaultCredentials = true;
        this.useDefaultCredentialsSetExplicitly = false;
    }
    else {
        this.useDefaultCredentialsSetExplicitly = true;
    }
} 
```

删除“拒绝”标签后，请求被进一步处理，我知道收到此错误：

> 或发生 01.10.2012 15:39:56 用户 IP 172.29.2.84 用户代理 Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1 Url [Url 已删除]
> 
> 引用 [Url 已删除] System.Web.Services.Protocols.SoapException：服务器无法处理请求。
> ---> EPiServer.Core.EPiServerException：对于 EPiServer.WebServices.DataFactoryService.ValidateWebServiceAccess()的 EPiServer.WebServices.DataFactoryService的用户，用户没有访问远程站点上 Web 服务的“Permission.WebServiceAccess”访问权限.GetDefaultPageData(PageReference pageLink, Int32 pageTypeID) --- 内部异常堆栈跟踪结束 --- 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.Services.Protocols.SoapException：System.Web.Services.Protocols.SoapException：服务器无法处理请求。
> ---> EPiServer.Core.EPiServerException：对于 EPiServer.WebServices.DataFactoryService.ValidateWebServiceAccess()的 EPiServer.WebServices.DataFactoryService的用户，用户没有访问远程站点上 Web 服务的“Permission.WebServiceAccess”访问权限.GetDefaultPageData(PageReference
> 
> ## pageLink, Int32 pageTypeID) --- 内部异常堆栈跟踪结束
> 
> 源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [SoapException：System.Web.Services.Protocols.SoapException：服务器无法处理请求。
> ---> EPiServer.Core.EPiServerException：对于 EPiServer.WebServices.DataFactoryService.ValidateWebServiceAccess()的 EPiServer.WebServices.DataFactoryService的用户，用户没有访问远程站点上 Web 服务的“Permission.WebServiceAccess”访问权限.GetDefaultPageData(PageReference pageLink, Int32 pageTypeID) --- 内部异常堆栈跟踪结束 ---] System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall) +431766
> System. Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] 参数) +204
> RemotePublishForLedigeStillinger.DataFactoryService.DataFactoryService.GetDefaultPageData(PageReference pageLink, Int32 pageTypeID) 在 C:\Programmering\RemotePublishTest\RemotePublishTest\Web References\DataFactoryService\Reference.cs:148
> RemotePublishForLedigeStillinger.Program.PublishPageToRemoteService(PageData pageLedigeStillingerOriginal) 在 C:\Programmering\RemotePublishTest \RemotePublishTest\Program.cs:143
> EPiServer.Templates.RelatePlus.Pages.JobAd.RemotePublishPage(PageData pageToPublish) 在 C:\Repo\Projects\dikt.intranett\www\Templates\RelatePlus\Pages\JobAd.aspx.cs:125 EPiServer.Templates.RelatePlus.Pages。 JobAd.Godkjent_OnClick(Object sender, EventArgs e) 在 C:\Repo\Projects\dikt.intranett\www\Templates\RelatePlus\Pages\JobAd.aspx.cs:110 System.Web.UI.WebControls.Button.OnClick(EventArgs e) +111
> System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +110
> System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
> System.Web。 UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
> System.Web.UI.Page.RaisePostBackEvent（NameValueCollection postData）+36 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+1565

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:21:57.657

乍一看，在我看来，匿名用户和/或托管服务的应用程序池的身份没有权限枚举组 dr-2\epi.admin，在“角色...允许”中指定" 您的配置文件的块...或调用用户身份不是这些角色，并且默认拒绝规则适用。

# .net - 使用 MSMQ 异步 IO 时的 .NET 堆碎片

> ID：12674074
> 
> 赞同：5
> 
> 时间：2012-10-01T13:17:18.737
> 
> 标签：.net, msmq, memory-fragmentation

我有一个从大量 MSMQ 队列（目前大约 10000 个）读取的应用程序。我使用`queue.BeginPeek`UInt32.MaxValue 超时从队列接收消息。当消息出现在队列中时，我对其进行处理并`queue.BeginPeek`再次调用。所以我听所有的队列，但是消息处理是在线程池上完成的。

我注意到内存使用量缓慢增长（两周的工作导致从 200 MB 增长到 800 MB）。在调查了转储文件后，我看到了带有许多空闲对象的典型堆碎片图片（其中一些有大约几兆字节的大小）。并且孔之间有固定的物体。

在处理创建固定对象的非托管代码调用时，这似乎很常见。但是我在互联网上没有找到任何解决方案。

.NET 中的内存管理是否如此纯粹，以至于它甚至不允许完成如此简单的场景，或者我错过了什么？

**编辑：**我对示例应用程序进行了一些调查。在为新对象分配内存时，固定对象之间的空洞（空闲内存区域，所谓的空闲对象）被 GC 重用。但是在我的生产应用程序中，固定对象是长期存在的，它们最终出现在第二代，它们之间有孔（因为 GC 只是移动了分隔代的边界）。由于我几乎没有正常的长寿命对象，因此我在转储文件的第二代中看到了这个漏洞。

所以我的应用程序的内存消耗可以增长到 10000*（孔的平均大小）。（10000 是将来还可以增加的队列数）。我目前不知道如何解决这个问题。唯一的方法是不时重新启动应用程序。

再一次我只能问，为什么 .NET 没有用于固定对象的单独堆？（也许这是新手问题）。目前我看到调用使用非托管代码的异步操作可能会导致内存问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:01:25.397

查看 MSMQ 托管包装器的源代码后，您似乎偶然发现了使用 API 的真正问题。调用`BeginPeek`将创建一组属性，然后在传递给非托管 API 之前将其固定。仅当收到消息时，这些属性才会取消固定，但要继续接收消息，您必须`BeginPeek`在此时调用，从而导致内存碎片随着时间的推移。

如果这种碎片是一个真正的问题，我能想出的唯一技巧是每隔一小时左右，你应该取消所有对 的调用`BeginPeek`，强制进行垃圾收集，然后恢复正常的监听操作。这应该允许垃圾收集器处理碎片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:25:41.243

好吧，如果固定对象的寿命很长是一个问题，那么一个简单的解决方法是在`BeginPeek`更短的时间内使用超时来阻止它们进入下一代。每次超时后，`EndPeek`您可以重新发出`BeginPeek`. 根据 Martin 所指的属性的创建和处置时间，您可能必须重新创建队列对象（显然不是队列本身，只是经过组合的包装器）。尽管运气好的话，您不必走那么远。

# c# - 如何在匿名类型中使用复杂的属性名称？

> ID：12674076
> 
> 赞同：6
> 
> 时间：2012-10-01T13:17:24.340
> 
> 标签：c#, asp.net-mvc-3, post, anonymous-types

在我的 MVC3 应用程序中，我想创建一个匿名集合，其字段名称如下：

```
new 
{                                                                            
   Buyer.Firstname = "Jim",
   Buyer.Lastname = "Carrey",
   Phone = "403-222-6487",
   PhoneExtension = "",
   SmsNumber = "",
   Buyer.Company = "Company 10025",
   Buyer.ZipCode = "90210",
   Buyer.City = "Beverly Hills",
   Buyer.State = "CA",
   Buyer.Address1 = "Address 10025"
   Licenses[0].IsDeleted = "False",
   Licenses[0].ID = "6",
   Licenses[0].AdmissionDate = "2,1999",
   Licenses[0].AdmissionDate_monthSelected = "2",                                                                           

                                                                    } 
```

我想要这个以便在我的应用程序的集成测试期间发送自定义发布请求。如何使用此字段名称声明一个匿名集合？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T13:20:24.100

使用匿名对象的匿名集合，如下所示：

```
Licenses = new [] {
    new {
        IsDeleted = "False",
        ID = "6",
        AdmissionDate = "2,1999",
        AdmissionDate_monthSelected = "2"
    } //, ... and so on
} 
```

......在上下文中：*（[编辑]哦，我没有看到你的买家......）*

```
new 
{    
    Buyer = new {
        Firstname = "Jim",
        Lastname = "Carrey",
        Company = "Company 10025",
        ZipCode = "90210",
        City = "Beverly Hills",
        State = "CA",
        Address1 = "Address 10025",
    },                                                                        
    Phone = "403-222-6487",
    PhoneExtension = "",
    SmsNumber = "",
    Licenses = new [] {
        new {
            IsDeleted = "False",
            ID = "6",
            AdmissionDate = "2,1999",
            AdmissionDate_monthSelected = "2"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T13:23:01.340

您可以使用对象和集合初始化语法：

```
var anonymousObject = new 
{                                                                            
    Phone = "403-222-6487",
    PhoneExtension = "",
    SmsNumber = "",
    Buyer = new 
    {
        Firstname = "Jim",
        Lastname = "Carrey",
        Company = "Company 10025",
        ZipCode = "90210",
        City = "Beverly Hills",
        State = "CA",
        Address1 = "Address 10025"
    },
    Licenses = new[]
    {
        new
        {
            IsDeleted = "False",
            ID = "6",
            AdmissionDate = "2,1999",
            AdmissionDate_monthSelected = "2",                                                                           
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T13:26:39.600

试试这个：

```
var x = new {
    Phone = "403-222-6487",
    PhoneExtension = "",
    SmsNumber = "",
    Buyer = new {
        Firstname = "Jim",
        Lastname = "Carrey",
        Company = "Company 10025",
        ZipCode = "90210",
        City = "Beverly Hills",
        State = "CA",
        Address1 = "Address 10025"
    },
    Licenses = new[] {
        new {
            IsDeleted = "False",
            ID = "6",
            AdmissionDate = "2,1999",
            AdmissionDate_monthSelected = "2"},
        new {
            IsDeleted = "True",
            ID = "7",
            AdmissionDate = "17,2001",
            AdmissionDate_monthSelected = "3"}
    }
}; 
```

注意：我为买家使用嵌套匿名类型，为许可证使用另一种匿名类型的嵌套数组。这允许您访问这样的值

```
string name = x.Buyer.Lastname;
string id = x.Licences[0].ID; 
```

# parsing - 批处理文件解析并返回结果

> ID：12674078
> 
> 赞同：0
> 
> 时间：2012-10-01T13:17:34.920
> 
> 标签：parsing, batch-file, findstr

我必须使用批处理文件并且必须解析其中一个参数。结果应该转到批处理文件中的命令之一。

所以批处理文件的参数之一是这样的：

> `Lorem [ABC-1234] ipsum`

批处理文件中的命令之一需要上述参数中的 ABC-1234 值。正则表达式的使用会非常好，FINDSTR 会找到它，但如果找到模式，它会返回它的输入。

> `echo Lorem [ABC-1234] ipsum | findstr /R "\[[A-Z]*\-[0-9]*\]"`

这将返回：

> `echo Lorem [ABC-1234] ipsum`

但我想得到

> `ABC-1234`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:49:58.017

假设 之前没有其他`[`或`]`字符`[ABC-1234]`，则可以使用 FOR /F

```
for /f "eol=[ tokens=2 delims=[]" %%A in ("Lorem [ABC-1234] ipsum") do echo %%A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:34:32.037

**findstr 确实返回整行，不仅是**您必须修剪结果的字符串，还用于搜索本身

```
[A-Z]*-[0-9]* 
```

就足够了，或者更好

```
([A-Z]*-[0-9]*) 
```

这已经如上所述：

```
echo Lorem [ABC-1234] ipsum | findstr /R [A-Z]*-[0-9]* 
```

# python - 动态创建类实例的最有效方法是什么？

> ID：12674080
> 
> 赞同：4
> 
> 时间：2012-10-01T13:17:49.877
> 
> 标签：python, class, dynamic, performance

我不知道从一开始就会有多少类实例，所以我需要动态创建它们，但我也希望保持代码的整洁和可读性。

我正在考虑做这样的事情：

```
names = ['Jon','Bob','Mary']

class Person():
    def __init__(self, name):
        self.name = name

people = {}
for name in names:
    people[name] = Person(name) 
```

它有效，但我似乎找不到任何人在网上这样做的例子（尽管我看起来并不多）。有什么理由我应该避免这样做吗？如果是这样，为什么以及什么是更好的选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:49:51.497

如果您想动态创建类实例，这正是您在代码中所做的，那么我认为您的解决方案看起来非常好，并且是一种 Python 方式（尽管我不得不说当然还有其他方式）。只是为了给您一些思考：您可以像这样在类中注册/存储每个新实例：

```
class Person():
    people={}
    @classmethod
    def create(cls,name):
        person=Person(name)
        cls.people[name]=person
        return person
    def __init__(self, name):
        self.name = name 
```

如果你喜欢冒险，你可以尝试使用元类，但我会把它留给你的研究 :-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:31:32.440

Use `type(name, bases, dict)`

[From documentation:](http://docs.python.org/library/functions.html#type)

> Return a new type object. This is essentially a dynamic form of the class statement. The name string is the class name and becomes the **name** attribute; the bases tuple itemizes the base classes and becomes the **bases** attribute; and the dict dictionary is the namespace containing definitions for class body and becomes the **dict** attribute. For example, the following two statements create identical type objects:

```
>>> class X(object):
...     a = 1
...
>>> X = type('X', (object,), dict(a=1)) 
```

For your example:

```
>>> JonClass = type('JonClass', (object,), {'name': 'Jon'})
>>> jon_instance = JonClass()
>>> jon_instance.name
'Jon'
>>> type(jon_instance)
<class '__main__.JonClass'> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:05:09.447

使用生成器表达式创建字典怎么样？

```
people = dict((name, Person(name)) for name in names) 
```

但除此之外，您的解决方案是完全有效的。

# c# - 在 protobuf-net 中使用继承进行序列化

> ID：12674085
> 
> 赞同：3
> 
> 时间：2012-10-01T13:18:02.013
> 
> 标签：c#, serialization, protobuf-net

给定一个看起来像这样的 .proto：

```
message Base {
    string Dummy = 1
}

message Derived {
    Base Super = 1
    string Parp = 2 
} 
```

...还有一些 C# 类似：

```
public class Base {
    public string Dummy;
}

public class Derived : Base {
    public string Parp
} 
```

如何在 protobuf-net 中自定义序列化以便能够做到这一点？最初，我开始考虑使用 TypeModel 并为 Base MetaType 调用 AddSubType，但后来它似乎为 Base 创建了类型定义，其中包含所有派生类的可选字段（即相反的方式与我需要的方式）

我想我可能可以自己走层次结构，但看看 TypeModel，它似乎支持将类型提供给 Deserialise，但它在序列化过程中使用 value.GetType()。即便如此，我如何做到这一点也不完全清楚。我唯一的选择是使用 ProtoWriter 手动编写每个字段吗？这是我目前正在尝试的，但我希望有更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:46:43.463

首先要注意的是protobuf本身不支持继承。对此没有“官方”布局。Protobuf-net 不会按照您希望的方式支持序列化：选择子类型封装（而不是基本类型封装）是为了解决几个问题，包括：

*   满足 Liskov 替换原则
*   当调用者不知道/预期序列化类型时正常工作
*   基本上，完全可以工作（除了最简单的例子，两端都提前知道他们得到了哪个子类型，这在很大程度上违背了多态性的观点）

但是，您可以手动映射 DTO，基本上这样您的 DTO 层根本不使用继承。

# java - 计算数组中的负数

> ID：12674088
> 
> 赞同：0
> 
> 时间：2012-10-01T13:18:07.313
> 
> 标签：java, negative-number

我正在寻找在数组中找到负数的解决方案，我从搜索中想出了类似这段代码的东西。

```
public static void main(String args[]){
    int arrayNumbers[] = { 3, 4, 7, -3, -2};
    for (int i = 0; i <= arrayNumbers.length; i++){
        int negativeCount = 0;
        if (arrayNumbers[i] >= 0){
                negativeCount++;
    }
    System.out.println(negativeCount);
    }
} 
```

我想知道是否有更简单或更短的方法来查找数组中的负数与上面的代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T13:24:01.103

一个计算减号的基于 Java 7 字符串的单行代码：

```
System.out.println(Arrays.toString(array).replaceAll("[^-]+", "").length()); 
```

* * *

一种基于 Java 8 流的方式：

```
System.out.println(Arrays.stream(array).filter(i -> i < 0).count()); 
```

* * *

关于您的代码，它有一些问题：

*   由于您不关心元素的索引，因此请改用foreach[语法](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)
*   在循环 *外*声明计数变量的范围，否则
    *   每次迭代它都会被设置为零，并且
    *   即使它确实包含正确的计数，您也无法使用它，因为它超出了您需要返回它的范围（仅在循环内部）（在循环之后）
*   使用正确的测试`number < 0`（您的代码`>= 0`计算*非*负数）

尝试这个：

```
public static void main(String args[]) {
    int[] array = { 3, 4, 7, -3, -2};
    int negativeCount = 0;
    for (int number : array) {
        if (number < 0) {
            negativeCount++;
        }
    }
    System.out.println(negativeCount);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:21:37.770

A few issues with the code:

*   the terminating condition in the `for` will produce an out of bounds exception (arrays use zero-based index)
*   the scope of `negativeCount` is within the `for` only
*   the negative check is incorrect

A slightly shorter version would use the extended `for`:

```
int negativeCount = 0;
for (int i: arrayNumbers)
{
    if (i < 0) negativeCount++;
} 
```

For a shorter version (but arguably less readable) eliminate the `for`'s `{}`:

```
int negativeCount = 0;
for (int i: arrayNumbers) if (i < 0) negativeCount++; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:22:55.283

你的negativeCount应该在你的循环之外声明..另外，你可以将你的循环移到你`System.out.println(negativeCount)`的循环之外，因为它会在每次迭代时打印出来。

你可以使用**增强的for**循环

```
public static void main(String args[]){
    int arrayNumbers[] = { 3, 4, 7, -3, -2};

    int negativeCount = 0;
    for (int num: arrayNumbers) {
        if (num < 0){
                negativeCount++;
        }

    }
    System.out.println(negativeCount);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:23:10.967

使用 foreach 语法稍微短一点：

```
 int negativeCount = 0;
 for(int i : arrayNumbers)
 {
      if(i < 0)negativeCount++;
 } 
```

# xslt - XSLT 对每个兄弟节点的子节点进行分组

> ID：12674089
> 
> 赞同：1
> 
> 时间：2012-10-01T13:18:07.563
> 
> 标签：xslt, grouping, parent-child, siblings

我最近一直在使用 XSLT，但现在我在尝试对新的 xml 文件进行分组时遇到了一个新问题。我不知道如何在分组上设置范围。我想对`<Detail>`每个`<Info>`节点内部进行分组。简单的示例文件：

```
<?xml version="1.0" encoding="utf-8"?>
<File>
  <Info>
    <Id>1111</Id>
  <Detail type="A" group="1" >
    <Data>
      <Nr>1</Nr>
    </Data>
    <Data>
      <Nr>2</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="1">
    <Data>
      <Nr>3</Nr>
    </Data>
    <Data>
      <Nr>4</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="2">
    <Data>
      <Nr>5</Nr>
    </Data>
  </Detail>
  <Detail type="A" group="1">
    <Data>
      <Nr>6</Nr>
    </Data>
  </Detail>
 </Info>
 <Info>
   <Id>2222</Id>
    <Detail type="A" group="1" >
      <Data>
        <Nr>1</Nr>
      </Data>
    </Detail>
    <Detail type="B" group="1">
      <Data>
        <Nr>2</Nr>
      </Data>
    </Detail>
    <Detail type="A" group="1">
      <Data>
        <Nr>3</Nr>
      </Data>
    </Detail>
  </Info>
</File> 
```

输出应该是

```
<?xml version="1.0" encoding="utf-8"?>
<File>
  <Info>
    <Id>1111</Id>
  <Detail type="A" group="1" >
    <Data>
      <Nr>1</Nr>
    </Data>
    <Data>
      <Nr>2</Nr>
    </Data>
      <Data>
      <Nr>6</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="1">
    <Data>
      <Nr>3</Nr>
    </Data>
    <Data>
      <Nr>4</Nr>
    </Data>
  </Detail>
  <Detail type="B" group="2">
    <Data>
      <Nr>5</Nr>
    </Data>
  </Detail>
 </Info>
 <Info>
   <Id>2222</Id>
    <Detail type="A" group="1" >
      <Data>
        <Nr>1</Nr>
      </Data>
          <Data>
        <Nr>3</Nr>
      </Data>
    </Detail>
    <Detail type="B" group="1">
      <Data>
        <Nr>2</Nr>
      </Data>
    </Detail>
  </Info>
</File> 
```

在我的尝试中，我不知道如何从`<Info>`元素中复制值（ID，它也可能是其他元素），我只是写出`<Info>`元素，并且每个元素都`<Detail>`被分组到第一个`<Info>`元素中，最后一个`<Info>`元素为空。

到目前为止，这是我的 xslt

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:key name="details" match="Detail"
          use="concat(@type,'_',@group)"/>
  <xsl:template match='/'>
    <File>
      <xsl:for-each select="File/Info">
        <Info>
        <xsl:for-each select="Detail[count(. | key('details', concat(@type,'_',@group))[1]) = 1]">
        <xsl:sort select="concat(@type,'_',@group)" />
        <Detail type="{@type}" group="{@group}">
          <xsl:for-each select="key('details', concat(@type,'_',@group))">
            <xsl:copy-of select="Data"/>
          </xsl:for-each>
        </Detail>
        </xsl:for-each>
        </Info>
      </xsl:for-each>
    </File>
  </xsl:template>
</xsl:stylesheet> 
```

这是我到目前为止的结果

```
<File>
  <Info>
    <Detail type="A" group="1">
      <Data>
        <Nr>1</Nr>
      </Data>
      <Data>
        <Nr>2</Nr>
      </Data>
      <Data>
        <Nr>6</Nr>
      </Data>
      <Data>
        <Nr>1</Nr>
      </Data>
      <Data>
        <Nr>3</Nr>
      </Data>
    </Detail>
    <Detail type="B" group="1">
      <Data>
        <Nr>3</Nr>
      </Data>
      <Data>
        <Nr>4</Nr>
      </Data>
      <Data>
        <Nr>2</Nr>
      </Data>
    </Detail>
    <Detail type="B" group="2">
      <Data>
        <Nr>5</Nr>
      </Data>
    </Detail>
  </Info>
  <Info />
</File> 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:39:25.133

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kDetailChildren" match="Detail"
  use="concat(generate-id(..),'+',@type,'+',@group)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "Detail
   [not(generate-id()
       =
        generate-id(key('kDetailChildren',
                        concat(generate-id(..),'+',@type,'+',@group)
                        )[1])
        )]"/>
 <xsl:template match="Detail">
  <Detail>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select=
    "key('kDetailChildren',
         concat(generate-id(..),'+',@type,'+',@group)
         )/node()"/>
  </Detail>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<File>
    <Info>
        <Id>1111</Id>
        <Detail type="A" group="1" >
            <Data>
                <Nr>1</Nr>
            </Data>
            <Data>
                <Nr>2</Nr>
            </Data>
        </Detail>
        <Detail type="B" group="1">
            <Data>
                <Nr>3</Nr>
            </Data>
            <Data>
                <Nr>4</Nr>
            </Data>
        </Detail>
        <Detail type="B" group="2">
            <Data>
                <Nr>5</Nr>
            </Data>
        </Detail>
        <Detail type="A" group="1">
            <Data>
                <Nr>6</Nr>
            </Data>
        </Detail>
    </Info>
    <Info>
        <Id>2222</Id>
        <Detail type="A" group="1" >
            <Data>
                <Nr>1</Nr>
            </Data>
        </Detail>
        <Detail type="B" group="1">
            <Data>
                <Nr>2</Nr>
            </Data>
        </Detail>
        <Detail type="A" group="1">
            <Data>
                <Nr>3</Nr>
            </Data>
        </Detail>
    </Info>
</File> 
```

**产生想要的正确结果：**

```
<File>
   <Info>
      <Id>1111</Id>
      <Detail type="A" group="1">
         <Data>
            <Nr>1</Nr>
         </Data>
         <Data>
            <Nr>2</Nr>
         </Data>
         <Data>
            <Nr>6</Nr>
         </Data>
      </Detail>
      <Detail type="B" group="1">
         <Data>
            <Nr>3</Nr>
         </Data>
         <Data>
            <Nr>4</Nr>
         </Data>
      </Detail>
      <Detail type="B" group="2">
         <Data>
            <Nr>5</Nr>
         </Data>
      </Detail>
   </Info>
   <Info>
      <Id>2222</Id>
      <Detail type="A" group="1">
         <Data>
            <Nr>1</Nr>
         </Data>
         <Data>
            <Nr>3</Nr>
         </Data>
      </Detail>
      <Detail type="B" group="1">
         <Data>
            <Nr>2</Nr>
         </Data>
      </Detail>
   </Info>
</File> 
```

**说明**：

1.  正确使用*身份规则*和使用复合键的*Muenchian*分组方法。

2.  请注意父母的身份是如何包含在密钥中的。

# c - 数组到指针衰减并将多维数组传递给函数

> ID：12674094
> 
> 赞同：14
> 
> 时间：2012-10-01T13:18:18.993
> 
> 标签：c, arrays, pointers, multidimensional-array, callstack

我知道一个数组衰减为一个指针，这样如果一个声明

```
char things[8]; 
```

然后在`things`其他地方使用，`things`是指向数组中第一个元素的指针。

另外，据我了解，如果有人声明

```
char moreThings[8][8]; 
```

then`moreThings`不是指向 char 的指针类型，*而是*类型为“指向 char 的指针数组”的类型，因为衰减只发生一次。

什么时候`moreThings`传递给一个函数（比如原型`void doThings(char thingsGoHere[8][8])`，堆栈到底发生了什么？

如果`moreThings`不是指针类型，那么这真的还是传递引用吗？我想我一直认为它`moreThings`仍然代表多维数组的基地址。如果`doThings`接受输入`thingsGoHere`并将其传递给另一个函数怎么办？

规则是否差不多是除非指定一个数组输入，否则`const`该数组将始终是可修改的？

我知道类型检查的东西只发生在编译时，但我仍然对技术上算作通过引用传递的东西感到困惑（即只有当类型指针的参数被传递时，或者指针数组是传递时也可以通过引用？）

很抱歉，这个问题有点到处都是，但由于我难以理解这一点，因此很难表达出精确的询问。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-01T13:24:35.093

你弄错了：`moreThings`也衰减到指向第一个元素的指针，但由于它是一个字符数组的数组，第一个元素是一个“8 个字符的数组”。所以衰减的指针是这种类型：

```
char (*p)[8] = moreThings; 
```

指针的*值*当然与 的值`&moreThings[0][0]`，即第一个元素的第一个元素的值相同，也与 的值相同`&a`，但在每种情况下*类型不同。*

这是一个例子，如果`char a[N][3]`：

```
+===========================+===========================+====
|+--------+--------+-------+|+--------+--------+-------+|
|| a[0,0] | a[0,1] | a[0,2]||| a[1,0] | a[1,1] | a[1,2]|| ...
|+--------+--------+-------+++--------+--------+-------++ ...
|            a[0]           |            a[1]           |
+===========================+===========================+====
                                    a
^^^
||+-- &a[0,0]
|+-----&a[0]
+-------&a 
```

*   `&a`: 整个字符数组的地址，这是一个`char[N][3]`

*   `&a[0]`, 等同于`a`: 第一个元素的地址，它本身就是一个`char[3]`

*   `&a[0][0]`: 第一个元素的第一个元素的地址，它是一个`char`

这表明不同的对象可能具有相同的地址，但如果两个对象具有相同的地址*和*相同的类型，则它们是相同的对象。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-01T13:57:12.550

## “数组地址和指向多维数组的指针”

**让我们首先从一维数组开始：**

*   声明`char a[8];`创建一个包含 8 个元素的数组。
    这`a`是**第一个元素的地址，**而**不是数组的地址**。

*   `char* ptr = a;``ptr`与指向 char 的指针 一样是正确的表达式，并且可以寻址第一个元素。

*   但是表述`ptr = &a`是**错误**的！因为`ptr`无法寻址数组。

*   **&a 表示数组的地址。**`a`和的真正值`&a`相同，但语义不同，一个是字符的地址，另一个是 8 个字符的数组的地址。

*   `char (*ptr2)[8];` 这里`ptr2 is pointer to an array of 8 chars`, 而这一次 `ptr2=&a`是一个有效的表达式。

*   is的数据类型和`&a`is的`char(*)[8]`类型在大多数操作`a`中`char[8]`简单地衰减为，例如`char*``char* ptr = a;`

    为了更好地理解阅读：两者之间的[区别`char *str`以及`char str[]`两者在内存中的存储方式？](https://stackoverflow.com/questions/15177420/what-does-sizeofarr-return/15177499#15177499)

**第二种情况，**

*   声明`char aa[8][8];`创建一个二维数组`8x8`大小。

*   **任何二维数组也可以看作一维数组，其中每个数组元素都是一维数组**。

*   `aa`是第一个元素的地址，它是 8 个字符的数组。表达`ptr2 = aa`有效且正确。

*   如果我们声明如下：

    ```
    char (*ptr3)[8][8];    
    char ptr3 = &aa;  //is a correct expression 
    ```

    **同样，**
    `moreThings`在您的声明`char moreThings[8][8];`中包含第一个元素的地址，它是 8 个元素的 char 数组。

    为了更好地理解阅读：两者之间的[区别`char* str[]`以及`char str[][]`两者在内存中的存储方式？](https://stackoverflow.com/questions/17564608/what-does-the-array-name-mean-in-case-of-array-of-char-pointers/17661444#17661444)

* * *

**知道会很有趣：**

*   `morething`是 8 个字符数组的地址。

*   `*morething`是第一个元素的地址，即`&morething[0][0]`.

*   `&morething`是 8 x 8 的二维数组的地址。

    > **并且以上三个的地址值都是相同的，但在语义上都是不同的。**

*   `**morething`是第一个元素的值，即`morething[0][0]`。

    为了更好地理解，请阅读：[和之间的](https://stackoverflow.com/questions/15177420/what-does-sizeofarr-return/15177499#15177499)[区别，何时声明为？`&str``str``str``char str[10]`](https://stackoverflow.com/questions/15177420/what-does-sizeofarr-return/15177499#15177499)

**此外，**

*   `void doThings(char thingsGoHere[8][8])`只不过是 void `doThings(char (*thingsGoHere)[8])`，因此接受任何二维数组，第二维为 8。

* * *

**关于 C 和 C++ 中的变量类型：（**我想补充一下）

*   **在 C的 C++ 概念**中，没有什么是通过引用传递的。**如果它在 C 中使用，则意味着作者在谈论指针变量。**
***   C 支持`pass by Address`和`pass by value`。*   C++ 支持`Pass by address`,`pass by value`也支持`pass by Reference`.

    阅读：[指针变量和引用变量](https://stackoverflow.com/questions/17852911/assigning-int-value-to-an-address/17852936#17852936)** 

 **在最后，

*   数组的名称是常量标识符而不是变量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-01T13:57:22.960

克雷克很好地解释了，

除此之外，我们可以通过下面的例子来证明：

```
#include <stdio.h>

int main ()
{
 int a[10][10];

 printf (".. %p  %p\n", &a, &a+1);
 printf (".. %p  %p \n ", &a[0], &a[0]+1);
printf (".. %p   %p \n ", &a[0][0], &a[0][0] +1);
} 
```

输出是：

```
.. 0x7fff6ae2ca5c  0x7fff6ae2cbec    = 400 bytes difference
.. 0x7fff6ae2ca5c  0x7fff6ae2ca84    = 40 bytes difference
 .. 0x7fff6ae2ca5c   0x7fff6ae2ca60  = 4 bytes difference. 
```

&a +1 -> 通过添加整个数组大小来移动指针。即：400字节

&a[0] + 1 -> 通过增加列的大小来移动指针。即：40字节。

&a[0][0] +1 -> 通过添加元素的大小来移动指针，即：4 字节。

[ int 大小为 4 个字节 ]

希望这可以帮助。:)**

# c# - 为什么 linq 查询在 c# .net 中不起作用

> ID：12674101
> 
> 赞同：-4
> 
> 时间：2012-10-01T13:18:49.487
> 
> 标签：c#, linq

我想了解为什么以下特定查询没有从文件夹中提取文件，是否我做错了什么，请告知

c# Linq 查询：

```
var query = from o in Directory.GetFiles("/YourFolder", "*.*",
                SearchOption.AllDirectories)
        let x = new FileInfo(o)
        where x.CreationTime <= DateTime.Now.AddMonths(-10)
        select o; 
```

在我保存 200 个文件的文件夹中，但它没有获取任何文件，在 10 的位置如果我给 0 它正在拉所有 200 个文件，这是什么原因？请指教

文件创建时间都是 1/5/2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:20:55.817

Try something like this instead:

```
DateTime minDate = DateTime.Now.AddMonths(-10);
var query = Directory.GetFiles("/YourFolder", "*.*",SearchOption.AllDirectories).Where(f => new FileInfo(f).CreationTime <= minDate); 
```

Functionally it's the same - but marginally easier to debug.

# php - 上传到 YouTube 时收到 TOKEN_INVALID

> ID：12674103
> 
> 赞同：0
> 
> 时间：2012-10-01T13:18:55.037
> 
> 标签：php, youtube-api, zend-gdata

我正在尝试使用 Zend_Gdata（Zend Framework 1.12.0）通过 API 将视频上传到 YouTube。我直接上传工作没有问题，但基于浏览器的上传总是给我一个 400 - INVALID TOKEN 错误。我很确定我一定错过了一些重要但小到不会注意到的东西。

这涉及到两个文件：

**索引.php**

```
<?php
$youTubeAPIKey = '<API_Key>';
$username = '<user>';
$password = '<pass>';

set_include_path(get_include_path().PATH_SEPARATOR.__DIR__."/vendor");
require_once 'Zend/Loader/Autoloader.php';
Zend_Loader_Autoloader::getInstance();

try
{
    $authenticationURL= 'https://www.google.com/accounts/ClientLogin';
    $httpClient = Zend_Gdata_ClientLogin::getHttpClient(
              $username,
              $password,
              $service = 'youtube',
              $client = null,
              $source = 'BrowserUploaderTest', // a short string identifying your application
              $loginToken = null,
              $loginCaptcha = null,
              $authenticationURL);

    $yt = new Zend_Gdata_YouTube($httpClient, "browser upload test", "Test version 0.1", $youTubeAPIKey);
    $videoEntry = new Zend_Gdata_YouTube_VideoEntry();

    $videoEntry->setVideoTitle("Test movie");
    $videoEntry->setVideoDescription("This is a test movie");
    $videoEntry->setVideoPrivate();

    // @todo This must be a valid YouTube category, how to get a list of valid categories?
    $videoEntry->setVideoCategory('Autos');
    $videoEntry->setVideoTags('cars, funny');

    // Get an upload token
    $tokenHandlerUrl = 'http://gdata.youtube.com/action/GetUploadToken';
    $tokenArray = $yt->getFormUploadToken($videoEntry, $tokenHandlerUrl);
    $token = $tokenArray['token'];
    $url = $tokenArray['url'];
    // print "Token value: {$tokenArray['token']}\n url: {$tokenArray['url']}\n";
    $nextUrl = "http://" . $_SERVER['HTTP_HOST'] . "/uploadDone.php";
}
catch (Zend_Gdata_App_HttpException $httpException)
{
    echo $httpException->getRawResponseBody();
}
catch (Zend_Gdata_App_Exception $e) {
    echo $e->getMessage();
}
catch (Exception $e)
{
    print $e->getTraceAsString();
}
?><!DOCTYPE html>
<html>
    <head>
        <title>Testing Youtube upload</title>
    </head>

    <body>
        <table>
            <tr>
                <td>
                    Url:
                </td>
                <td>
                    <?= $url ?>
                </td>
            </tr>
            <tr>
                <td>
                    Token:
                </td>
                <td>
                    <?= $token ?>
                </td>
            </tr>
        </table>
        <form action="<?= $url ?>.?nexturl=<?= urlencode($nextUrl) ?>" enctype="multipart/form-data" method="post">
            <input name="token" type="hidden" value="<?= $token ?>" />
            <input name="file" type="file" />
            <input type="submit" value="Upload file" />
        </form>
    </body>
</html> 
```

并**上传Done.php**

```
<?php
print nl2br(print_r($_GET, true));
print nl2br(print_r($_POST, true)); 
```

我已经在 Stack Overflow 上进行了搜索，并在 Google 上搜索了几个小时，但没有找到任何可以解决问题的方法，这让我相信我错过了一些非常简单的东西。任何帮助，将不胜感激。

**注意：** 此代码仅用于测试 API 的使用，主要取自 Google 的开发人员指南 (https://developers.google.com/youtube/2.0/developers_guide_php#Browser_based_Upload)，并在 Yii 框架文档 ( http://www.yiiframework.com/wiki/375/youtube-api-v2-0-browser-based-uploading/）。生产代码将以更结构化的方式重写，但目前这并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:53:42.747

你`action="<?= $url ?>.?nexturl=<?= urlencode($nextUrl) ?>"`看起来很可疑；在您的变量被评估之后，那里的错误`.`字符是否`$url`会导致 URL 混乱？

# php - PHP 包含来自单独 php 文件的内容

> ID：12674104
> 
> 赞同：0
> 
> 时间：2012-10-01T13:18:56.237
> 
> 标签：php, include

“search.php”中的搜索表单位于供应商的服务器上，并且已设置好以便我的站点可以显示它。URL 是： http: [//mysite.com/search.php](http://mysite.com/search.php)。

搜索结果页面位于供应商的服务器上，也在一个名为“result.php”的单独文件中。它也已配置，因此 URL 如下所示：[http://mysite.com/result.php](http://mysite.com/result.php)。

我想在“result.php”文件中插入“search.php”表单，这样用户就不必在页面之间来回切换。

我试过了：

```
 <?php
 include 'http://mysite.com/search.php';
 ?> 
```

它不起作用，然后我意识到我需要将“allow_url_fopen”设置为yes才能在include语句中使用URL。这不是我想做的事情，因为我在这里阅读了其他帖子，其中涉及安全问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:21:25.770

You can just do

```
<?php
include $_SERVER['DOCUMENT_ROOT']"./search.php";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:30:27.037

I'm not sure you can include another server's php file, allow_url_fopen and allow_url_include are to get the file output of the designated url, i mean, the final result, you won't be able to use the variables or functions from that script.

try using file_get_contents(), or if you are displaying final results anyway, you could just use an iFrame

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:26:11.613

你可以试试

```
include __dir__  . "/search.php"; 
```

# django - Django使用变量重定向到站点根目录......？

> ID：12674108
> 
> 赞同：0
> 
> 时间：2012-10-01T13:19:11.157
> 
> 标签：django, redirect, root, reverse

我正在尝试将浏览器重定向回站点根目录并传递一个变量以触发 JS 通知功能......这都是 Django 的。

我现在拥有的是这样的：

网址.py：

```
url(r'^accounts/password/reset/complete/$', views.passwordResetComplete,
    name='password_reset_complete'), 
```

视图.py：

```
def passwordResetComplete(theRequest):
return redirect(home(theRequest, 'Password reset successful'))

def home(theRequest, myMessage=None):
.........
    return render_to_response('new/index.html',
                              {
                             "myTopbar": myTopbar,
                             "isLoggedIn": isLoggedIn,
                             "myMessage": myMessage
                            },
                            context_instance=RequestContext(theRequest)
                         ) 
```

我收到此错误：

```
NoReverseMatch: Error importing 'Content-Type: text/html; charset=utf-8.......(gives full HTML of page) 
```

我一直在研究几种不同的解决方案，但似乎没有什么能以我需要的方式工作。我最接近的是在根目录中使用 JS 函数重定向到“/？query-string”以检查该查询字符串并运行该函数（如果存在）。但是，这会在用户导航网站期间将查询字符串留在 URL 中（即 100% AJAX）。我想避免在 URL 中包含任何字符串/长 href。

如果有人能告诉我如何解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:42:30.317

HTTP 是一种无状态协议，这意味着每个请求都是完全唯一的，并且与以前做过的任何事情和所有事情都是分开的。更简单地说，使用 URL “传递变量”的唯一方法（在 HTTP 中）是将其添加到 URL 本身（`/someobject/1/`例如，`1`对象 id 所在的位置）或查询字符串（`?someobject=1`）中。无论哪种方式，信息都嵌入在*URL*中，由您的应用程序从 URL 中破译该信息并对其进行处理。

引入“会话”的概念是作为向 HTTP 无状态协议提供状态的一种方式。它的工作方式是服务器向客户端发送一个包含一些可识别信息（通常只是一个会话 ID）的 cookie。然后，客户端在每个请求的请求标头中将 cookie 发送回服务器。服务器看到 cookie，查找会话并继续无缝地处理正在进行的任何事情。这不是真正的状态，但它确实提供了本质上*模仿*状态的能力，并且它是在请求之间传递数据而不实际将数据嵌入 URL的*唯一方法。*

如果您需要返回给用户的只是一条消息，例如“密码重置成功”，您可以而且应该简单地使用[Django 的消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)，它本身使用会话传递消息。它为客户端设置一个 cookie，以便您可以重定向到任何 URL。cookie 将与对该新 URL 的请求一起传回，Django 会将会话中的消息添加到该 URL 模板中的适当位置。

如果您需要实际调用一些 JavaScript，那么您应该通过 AJAX 发出请求。在响应中，您可以通过 JSON 返回您想要的任何数据（并根据您的喜好对这些数据进行操作），甚至返回要运行的 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:47:14.400

在[重定向文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)之后，您不能简单地重定向到视图，而只能重定向到已经分配给 url 的 url 或对象/视图。因此，您有 2 个选项：

a）像这样直接调用视图：

```
return home(theRequest, 'Password reset successful') 
```

b）添加这样的 URL 模式：

```
url(r'^your_patterns/$', views.home, msg='',name='home'), 
```

然后你将能够做你最初做的事情：

```
return redirect(views.home,('Password reset successful',)) 
```

或者从我的角度来看，甚至更整洁：

```
return redirect('home',('Password reset successful',)) 
```

# .net - .Net 3.5 的 ISet、SortedSet 和元组

> ID：12674119
> 
> 赞同：0
> 
> 时间：2012-10-01T13:19:41.670
> 
> 标签：.net, .net-3.5

是否有 .Net 3.5 库实现 .Net 4 类`System.Collections.Generic.ISet`、`System.Collections.Generic.SortedSet`和~~`System.Tuple`~~？

我目前仅限于 .net 3.5，并希望在不可预见的未来某个时候升级到 .net 4.5。

### 笔记

[元组在别处回答](https://stackoverflow.com/q/7120845/143739)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:28:30.580

查看[C5 通用集合库](http://www.itu.dk/research/c5/)。关于`Tuple`类，很容易自己实现。

# java - 使用摆动的动画管道

> ID：12674122
> 
> 赞同：2
> 
> 时间：2012-10-01T13:19:52.340
> 
> 标签：java, swing, animation, paint, jlayeredpane

我尝试优化我的应用程序的绘图。目前我已经实现了一个动画以及几个 GUI 组件。有些是完全分开的，有些是相互重叠的。目前我面临摆动组件重叠的问题。GUI 的一部分，与我的动画重叠，需要绘制大量字符串和 - 放入放置的 Jlist 中 - 常见的摆动组件。

结果，重叠的 GUI 会随着动画的更新而重绘。我尝试使用很多不同的方法来确保在彼此面前绘制的内容。GlassPane、Jlayeredpane 之类的东西。不幸的是，在任何这些尝试中，重叠的 Menus paintcomponent 方法，只需要在用户与其交互时被调用，由于动画而被频繁调用，并导致相当高的 cpu 使用率。

我试图在分层窗格中以较低的顺序定位菜单，即：

```
 getLayeredPane().add(map, JLayeredPane.DEFAULT_LAYER);
    getLayeredPane().add(mapController, JLayeredPane.PALETTE_LAYER);
    getLayeredPane().add(settings, JLayeredPane.PALETTE_LAYER);        
    getLayeredPane().add(painter, JLayeredPane.POPUP_LAYER); 
```

在画家的绘画过程中，我尝试修改该区域 - 即：

```
@Override
protected void paintComponent(Graphics g) {

    g2 = (Graphics2D)g;
    g2.setRenderingHints(DefaultResources.getRenderQuality());

    g2.clip(JMain.getInstance().getMapBounds());

    ...} 
```

好吧 - 只要画家组件 !isOpague(); 下面的所有组件都将重新绘制。不幸的是，如果我确实将菜单放在更高的顺序，它们也需要随着任何动画更新而重新绘制。

有人知道如何避免使用动画组件永久重绘重叠组件吗？

我见过的唯一解决方案是使用重量级容器。不幸的是，相对定位在移动目的期间也表现出一种行为，这是不合适的。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:54:50.293

好吧，很明显，如果您有重叠的非透明组件，除非您优化对某些特定矩形的动画重绘调用，否则所有这些组件都将根据其中一个的任何更改进行重绘，因此不会有任何无用的操作。

让我更详细地描述一下 Swing 的工作原理 - 您在 paint、paintComponent 和其他方法（在每个组件重绘时调用）中所做的所有绘画都是在单个图像的子图像上完成的，该图像包含整体的“缓存”版本框架接口。

现在假设您更改了 UI 中的某些内容（添加/删除/重绘组件） - 最终图像（或包含您的组件的至少一小部分）必须正确更新。要做到这一点，以防您的组件不透明 - 所有子组件都将使用您的组件边界作为重绘矩形重新绘制，以为您的组件创建适当的背景。如果您的组件是不透明的——它将是唯一一个重绘的组件，但它还必须自己填充整个边界矩形，否则您将在每次重绘时在组件后面看到可怕的绘画伪影。

**总结一下**- 为了避免重叠组件的无意义重绘，有几种方法：

1.  优化对您实际需要重绘的区域的动画重绘调用
2.  使用不透明组件，除非您想在组件中绘制透明的东西
3.  优化所有重叠组件的绘制操作，因此重新绘制不会花费太多时间

根据您的具体情况，可能还有更多优化方法，但您必须自己找到它们，因为如果不看全貌，这是不可能的。

您还可以在本书中找到很多关于 Swing 优化的有用信息：[Filthy Rich Clients](http://filthyrichclients.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:05:03.657

好的，我们开始：

```
package animationissue;

import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;

public class AnimationIssue extends JFrame {

JPanel a = new JPanel() {

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        System.out.println("map has become repainted");
    }
};
JPanel b = new JPanel() {

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        System.out.println("menu as well");
    }
};

public AnimationIssue() {
    this.setSize(500, 500);
    this.setLayout(null);

    a.setSize(400, 400);
    b.setSize(400, 200);

    this.getLayeredPane().add(a, JLayeredPane.DEFAULT_LAYER); // Map
    this.getLayeredPane().add(b, JLayeredPane.PALETTE_LAYER); // Menu

    a.setLocation(0, 0);
    b.setLocation(0, 100);

    a.setBackground(Color.red);
    b.setBackground(Color.blue);

    Thread t = new Thread(new Runnable() {

        @Override
        public void run() {
            // doin some computations for animation
            // cast a repaint after having finished new 
            //animation information i.e. interpolation
            while (true) {
                try {
                    Thread.sleep(2000);
                } catch (Exception e) {
                }

                // case 1 - just a repaint of the whole component - triggering map redraw results in menu redraw
                // a.repaint();

                // case 2 - repaint of specified rectangle 
                // Either passing one - the menu does not get repainted, or passing       both - menu also gets repainted       

                //a.repaint(0, 0, 400, 100);
                //a.repaint(0, 300, 400, 100);

                // paintimmediately works for now

                //a.paintImmediately(0, 0, 400, 100);
                //a.paintImmediately(0, 300, 400, 100);

                // Just repainting Menu does not trigger map to become repainted, except if its opague, but then it should become repainted
                b.repaint();

            }

        }
    });

    t.start();
}

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    AnimationIssue f = new AnimationIssue();
    f.setVisible(true);
} 
```

}

我真的很期待优化行为，如果没有必要，不会重绘菜单。您必须将菜单想象成一个包含多个 JList 的组件，其中包含大量 String 绘制任务，这对 cpu 使用率确实有巨大影响。我一直不知道，因为它每秒重绘大约 25 次。

如果使用paintImmediately 是正确的，我只是不确定当前的解决方案。除此之外-如果您或某人有替代方法-更好的方法来防止无用的重绘（我真的认为 Glasspane 或 JLayeredPane 或 isOptimizedDrawing 或 isOpaque 可能会有所帮助），我真的很感激。

此致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:56:36.720

好吧，在优化方面，我确实有一个组件，这造成了一些麻烦，但我计划重写那个组件。因此，我只想确保绘画区域正确。在那之后，我计算了所有必要的区域并将它们填充到一个列表中，当数据发生变化时我将其传递。

只要我只应用了一个矩形，它就可以正常工作。一旦我通过第二个，它的 y - 扩展似乎就被忽略了。例如：

[x=0,y=0,宽度=322,高度=20] [x=0,y=620,宽度=322,高度=20]

y=20 和 y=620 之间的所有内容也会被重绘。

```
for (Rectangle rec : clippingAreas) {                    
                 painter.repaint(rec);
            } 
```

好的，我已经在 EDT 中尝试了paintImmediately，它现在确实有效，但我想知道这是否是正确的方法：

```
SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                for (Rectangle rec : clippingAreas) {
                    painter.paintImmediately(rec);                        
                }
            }
        }); 
```

# php - 谷歌 tts api 土耳其语

> ID：12674129
> 
> 赞同：0
> 
> 时间：2012-10-01T13:20:26.300
> 
> 标签：php, google-translate, text-to-speech

我正在创建一个由 google tts api 读取的页面。但是这些词在我的页面上没有正确翻译。当我在谷歌翻译中翻译相同的短语时，它是完美的翻译。注意：我说的是声音。

我正在使用 CURL 获取 mp3，“tl”参数是“tr”。

```
http://translate.google.com/translate_tts?tl=tr&q="some turkish text" 
```

所以你们怎么看伙计们，我的问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:44:56.670

您在单击页面上重定向到 Google 翻译 URL 的链接时是否遇到问题？如果是这样，这是因为 Google 会阻止所有来自引荐来源网址的请求。尝试使用 PHP 或其他一些后端技术获取音频。

Google 的 TTS 不是文档化的 API，并且在**q**参数中也被限制为 100 个字符。

# windows-phone-7 - 跟踪 Windows Phone 系统托盘状态更改：电池+时间或已满

> ID：12674130
> 
> 赞同：0
> 
> 时间：2012-10-01T13:20:30.917
> 
> 标签：windows-phone-7, windows-phone-7.1, system-tray

当 Windows Phone 的系统托盘可见时，它可能部分处于两种状态：电池 + 时间或已满（如果显示所有数据）。我想在我的应用程序中知道状态已更改。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:22:53.663

使用当前版本的 Windows Phone SDK，你真的不能这样做......

# javascript - 组合框选择的索引事件没有一键输出

> ID：12674131
> 
> 赞同：0
> 
> 时间：2012-10-01T13:20:30.927
> 
> 标签：javascript, ajax

我有一个表单，其中有两个组合框和一个网格，我已经在组合框的 selectedindex 更改事件上编写了过滤代码，为组合框设置了 SuggestAppend 属性。当我输入一个国家/地区名称，例如印度并按 Enter 选择索引更改事件不会立即触发，当我单击某个地方时，它会触发并提供输出。请建议我该怎么做。在此先感谢

```
 protected void cbCountry_SelectedIndexChanged(object sender, EventArgs e)
        {
            GetCondition();
            Fillgrid();
        }

     public string GetCondition()
            {
                string Condition = "";
                if (cbEmployee.SelectedIndex > 0)
                {
                    Condition = Condition + " And reg_no=" + cbEmployee.SelectedValue;
                }

                if (cbCountry.SelectedIndex > 0)
                {
                    Condition = Condition + " And country='" + cbCountry.SelectedItem.Text + "'";
                }
      return Condition;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:43:15.047

```
on the grid tag

<Grid>

try the following code

    <ClientSettings AllowKeyboardNavigation="true" 
                KeyboardNavigationSettings-AllowSubmitOnEnter="true"
                KeyboardNavigationSettings-AllowActiveRowCycle="true" 
                KeyboardNavigationSettings-CollapseDetailTableKey="LeftArrow"
                KeyboardNavigationSettings-ExpandDetailTableKey="RightArrow">

            </ClientSettings>

</Grid> 
```

这将确保您在网格中启用键盘导航

# java - java.sql.SQLException:[Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application

> ID：12674133
> 
> 赞同：2
> 
> 时间：2012-10-01T13:20:36.067
> 
> 标签：java, database, ms-access, datasource, jdbc-odbc

I have a java application that uses access database. My PC has 64-bit Operating System, 64-bit Microsoft Office, and 64-bit JDK. I even installed the Access Database Engine x64\. Basically everything on it is 64-bit.

In control panel, my target is `C:\Windows\SysWOW64\odbcad32.exe` and I specified that start in: `%windir%\SysWOW64`. The problem now this error message that I keep on getting.

> java.sql.SQLException:[Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application

Does any one know what is causing this error?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-24T03:50:29.840

好的，在这种情况下，如果您的 Java 应用程序运行 64 位，您将需要 64 位驱动程序。我相信以下链接有 64 位下载：

[Microsoft Access 数据库引擎 2010 可再发行组件](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

# ruby-on-rails - rails 和 sqlserver 编码

> ID：12674135
> 
> 赞同：0
> 
> 时间：2012-10-01T13:20:43.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在使用 mysql 和 sqlserver 开发应用程序。sqlserver 用于连接到旧表。

这是我的定义

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: spvalores_development  
  username: secret
  password: secret
  pool: 5
  host: 192.168.100.35  
  socket: mysql
  port: 3306

sql_server_db:
  adapter: sqlserver
  database: SPPokerManager
  dsn: DesaSqlServer
  mode: odbc
  username: sa
  password: master
  encoding: utf8 
```

我使用的宝石：

```
gem 'activerecord-sqlserver-adapter'
gem 'ruby-odbc' 
```

这是我的模型

```
class Client < ActiveRecord::Base
  self.table_name =  "dbo.LOB_CLIENTE"
  self.primary_keys = :CASINO_ID, :CLIENTE_ID
  establish_connection :sql_server_db

  attr_accessible :CASINO_ID, :CLIENTE_ID, :CDNI, :CAPELLIDO, :CNOMBRES,:TIPODOCUMENTO_ID, :CNICKNAME, :CDIRECCION, :CTELEFONO, :CCELULAR, :CEMAIL, :COBSERVACIONES, :CLIENTEPERFIL_ID
  attr_accessible :DFECHAINGRESO, :BIDENTIFICADO, :BACEPTAENVIOSMS, :IFOTO, :COLATIPOPREFERIDA_ID
  attr_accessible :BACTIVO, :CNROJUGADOR, :CSEXO, :DFECHANACIMIENTO, :NACIONALIDAD_ID, :CEMAIL2, :CPATROCINADOR, :CPAISRESIDENCIA, :CPROVINCIARESIDENCIA, :CCIUDADRESIDENCIA
  attr_accessible :DFECHAHORA_CESIONIMAGEN, :BFIRMA, :BJUGADORFRECUENTE, :DFECHAACTUALIZACION

  def as_json(options={})
    nick = self.CNICKNAME.force_encoding("ISO-8859-1").encode("UTF-8")
    name = self.CNOMBRES.force_encoding("ISO-8859-1").encode("UTF-8") unless self.CNOMBRES.nil?
    surname = self.CAPELLIDO.force_encoding("ISO-8859-1").encode("UTF-8") unless self.CAPELLIDO.nil?
    {:CLIENTE_ID => self.CLIENTE_ID ,:CNICKNAME => nick ,:CAPELLIDO => surname ,:CNOMBRES => name, :CDNI => self.CDNI, :TIPODOCUMENTO_ID =>  self.TIPODOCUMENTO_ID }
  end 

end 
```

我总是收到这样的错误：

```
incompatible character encodings: ASCII-8BIT and UTF-8 
```

我解决的唯一方法是做这样的事情

```
modelinstance.field.force_encoding("ISO-8859-1").encode("UTF-8") 
```

那张桌子上有很多字段。此外，我肯定需要查询像这样的其他表。

查看数据库属性，排序规则是 Modern_Spanish_CI_AS

我如何配置 Rails 以在排序规则 Modern_Spanish_CI_AS 中显示和保存属性

提前谢谢，希望清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:02:44.987

好吧，我终于解决了这个问题。

我需要使用 tiny_tds：

这是解释：

[https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/wiki/Using-TinyTds](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/wiki/Using-TinyTds)

# jquery - jquery tablesorter zebra function

> ID：12674140
> 
> 赞同：1
> 
> 时间：2012-10-01T13:21:08.407
> 
> 标签：jquery, html-table, tablesorter

I'm working with jquery.tablesorter plugin. I use sub grid. but the zebra function do this:

```
 $("tr:visible", table.tBodies[0]).each(function(i) { 
```

but that put function on every child tr. Can you help me to change this line for creating function only on first child of the grid.

```
<table class="GridA">
<tr class="firstchild"><td></td></tr>
<tr class="expand-child"><td>    
    <table class="GridB">
    <tr><td>
    </td>
    </tr>
    </table>
</td>
</tr>
<tr class="firstchild"><td></td></tr>
<tr class="expand-child"><td>    
    <table class="GridB">
    <tr><td>
    </td>
    </tr>
    </table>
</td>
</tr>
</table> 
```

Limit function to first TR ("firstchild")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:23:59.167

您可以使用`:first`选择器：

```
$("tr:visible:first", table.tBodies[0]) 
```

* * *

```
$("tr:visible:first-child", table.tBodies[0]) 
```

# asp.net - SQL Server 2012 和 .NET Framework 4.0

> ID：12674141
> 
> 赞同：1
> 
> 时间：2012-10-01T13:21:08.520
> 
> 标签：asp.net, sql-server-2008, entity-framework

我有一台为 SQL Server 2008 R2 和 ASP.NET 4.0 配置的服务器。

托管公司不支持 .Net Framework 4.5 和 SQL Server 2012 以及最新的实体框架。

我已经使用 .Net Framework 4.5 和最新的 Entity Framework 5 创建了我的网站。如何将发布设置更改为旧服务器执行该设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:36:04.167

更改网站的目标框架，在解决方案资源管理器中右键单击网站选择“属性”。在出现的对话框中选择应用程序现在将目标框架更改为 4.0 并发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:27:28.137

您需要更改网站的目标框架。在 Visual Studio（选择您的网站项目）中，转到“项目”>“设置”。将 Target Framework 从 .Net Framework 4.5 更改为 .Net 4。然后重新构建所有并测试您的应用程序。

如果一切正常，您可以正常发布到您的网络主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:59:56.123

以上2个答案都是正确的。此外，许多托管公司不支持任何版本的 MVC 或 EF dll。有任何简单的解决方法。只要您可以使用 .NEt 4.0 在 Visual Studio 2010 中编译代码，右键单击您的项目并单击“添加可部署的可部署依赖项”。选中您需要的 dll 组的复选框，它们将被添加到您的项目中，以便可以与您的网站一起部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:45:19.707

从 Nuget 安装 EF5 时，它将安装 EntityFramework.dll 程序集版本 5.0.0.0。如果您的应用面向 .NET Framework 4.5 或 EntityFramework.dll 程序集版本 4.4.0.0 如果您的应用面向 .NET Framework 4。它们之间的区别在于 .NET Framework 4 的 EF5 的范围缩小到核心支持的范围作为 .NET Framework 一部分的程序集 (System.Data.Entity.dll)（尤其是在 .NET Framework 4 上，您将不会获得枚举、空间类型等）。如果您在安装 EntityFramework 后更改了目标，那么您很可能需要卸载您拥有的内容并再次安装以获得正确版本的 EntityFramework.dll。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T02:55:07.177

您只需在框架 4 中创建一个新项目，并通过右键单击项目中的解决方案添加现有项目

# android - 使用 Android MapView 同时平移和缩放

> ID：12674144
> 
> 赞同：1
> 
> 时间：2012-10-01T13:21:19.420
> 
> 标签：android, android-mapview

是否可以使用 处理同时缩放**和**平移事件`MapView`？

Android 版 Google 地图应用程序允许在捏拉缩放手势进行时平移地图。这有助于在放大地图区域时进行微调。默认`MapView`似乎不支持这一点。

我准备自己实现这个功能，但我更喜欢使用内置机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:17:28.517

我使用`Overlay`. 通过覆盖覆盖`onTouchEvent()`并检测缩放和平移事件何时发生，可以并行处理这些事件。

对于任何面临这个问题的人，我已经发布了一个[基于我的解决方案的示例项目](https://github.com/acj/PinchPanMapView/)。

**编辑**：

新的[Google Maps v2](https://developers.google.com/maps/documentation/android/)库支持同时缩放和平移。除非需要自定义事件处理算法，否则我强烈建议升级到新库。

# php - php echo checked from database

> ID：12674147
> 
> 赞同：0
> 
> 时间：2012-10-01T13:21:24.973
> 
> 标签：php, echo, checked

I'm trying to add a "checked statement" based upon the users value already entered into the database.

I've designed the database side as q1,q2 etc and have a single varchar with an "a","b", or "c".

I basically want the code to retrieve the answer and put it into the checkbox as "checked", for some reason I just can't get it to work.

my code so far is:

```
<?php
//retreive questions from database and put into question box

$query2 = "SELECT `QuestionId`, `Question`, `Opt1`, `Opt2`, `Opt3`, `Opt4`,`Answer` FROM `pf_questions`";

$question2 = mysql_query($query2);

while($row = mysql_fetch_array($question2)){

    $id         = $row['QuestionId'];
    $question   = $row['Question'];
    $opt1       = $row['Opt1'];
    $opt2       = $row['Opt2'];
    $opt3       = $row['Opt3'];
    $opt4       = $row['Opt4'];
    $answer     = $row["Answer"];

?>
<div id="ContainerQuestion">
    <span class="Question">Question <?php echo $id; ?>. <?php echo $question; ?></span>

        <p><input type=radio name='q<?php echo $id; ?>' value="a"> <?php echo $opt1; ?> </p>
        <p><input type=radio name='q<?php echo $id; ?>' value="b"> <?php echo $opt2; ?> </p>
        <p><input type=radio name='q<?php echo $id; ?>' value="c"> <?php echo $opt3; ?> </p>

        <p><input type=radio name='q<?php echo $id; ?>' value="d"> <?php echo $opt4; ?> </p>

</div>
<?php
}

?> 
```

Can I do the query inside the while function and just have each input type say if($row['1'] = 'a') echo "checked='checked'"; or am I wrong?

Any help will be awesome. thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:28:30.873

```
<p><input type=radio name='q<?php echo $id; ?>' <?php echo $answer == 'a'?'checked="checked"':'' ?> value="a"> <?php echo $opt1; ?> </p>
<p><input type=radio name='q<?php echo $id; ?>' <?php echo $answer == 'b'?'checked="checked"':'' ? value="b"> <?php echo $opt2; ?> </p>
<p><input type=radio name='q<?php echo $id; ?>' <?php echo $answer == 'c'?'checked="checked"':'' ? value="c"> <?php echo $opt3; ?> </p>
<p><input type=radio name='q<?php echo $id; ?>' <?php echo $answer == 'd'?'checked="checked"':'' ? value="d"> <?php echo $opt4; ?> </p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:30:25.493

Assuming that the `$answer` fields are either 'a', 'b', 'c', or 'd', this should work:

```
<p><input type=radio name='q<?php echo $id; ?>' value="a" <?php if($answer == 'a'){ echo "checked='checked'";} ?>> <?php echo $opt1; ?> </p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:25:51.963

将单选按钮更改为：

```
<p><input type=radio name='q<?php echo $id; ?>' value="a" <?php echo ($row[1] == 'a') ? 'selected="selected"':''; ?>> <?php echo $opt1; ?> </p>
<p><input type=radio name='q<?php echo $id; ?>' value="b" <?php echo ($row[1] == 'b') ? 'selected="selected"':''; ?>> <?php echo $opt2; ?> </p>
<p><input type=radio name='q<?php echo $id; ?>' value="c" <?php echo ($row[1] == 'c') ? 'selected="selected"':''; ?>> <?php echo $opt3; ?> </p>
<p><input type=radio name='q<?php echo $id; ?>' value="d" <?php echo ($row[1] == 'd') ? 'selected="selected"':''; ?>> <?php echo $opt4; ?> </p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:26:02.680

试试这个方法

```
 <p><input type="radio" name="q<?php echo $id; ?>" value="a" <?php if($opt1=='a') echo "checked='checked'"; ?>><?php echo $opt1; ?> </p> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T13:26:16.133

您可以通过使用简单地检查答案是否与选项匹配

```
<?=( $answer  == 'a')?("checked='checked'"):(""); ?> 
```

如果答案与选项 echo 相同，则为`checked='checked'`空字符串

**完整代码**

```
 <?php
    //retreive questions from database and put into question box

    $query2 = "SELECT `QuestionId`, `Question`, `Opt1`, `Opt2`, `Opt3`, `Opt4`,`Answer` FROM `pf_questions`";

    $question2 = mysql_query($query2);

    while($row = mysql_fetch_array($question2)){

        $id         = $row['QuestionId'];
        $question   = $row['Question'];
        $opt1       = $row['Opt1'];
        $opt2       = $row['Opt2'];
        $opt3       = $row['Opt3'];
        $opt4       = $row['Opt4'];
        $answer     = $row["Answer"];

    ?>
    <div id="ContainerQuestion">
        <span class="Question">Question <?php echo $id; ?>. <?php echo $question; ?></span>

            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'a')?("checked='checked'"):(""); ?>  value="a"> <?php echo $opt1; ?> </p>
            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'b')?("checked='checked'"):(""); ?> value="b"> <?php echo $opt2; ?> </p>
            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'c')?("checked='checked'"):(""); ?> value="c"> <?php echo $opt3; ?> </p>

            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'd')?("checked='checked'"):(""); ?> value="d"> <?php echo $opt4; ?> </p>

    </div>
    <?php
    }

    ?> 
```

**注意**假设您的答案存储在`$row["Answer"];`与选项（a，b，c，d）相同

# c++ - 如何在 Xcode 4.5 中调试 Libcurl

> ID：12674155
> 
> 赞同：2
> 
> 时间：2012-10-01T13:22:11.457
> 
> 标签：c++, xcode, curl, libcurl

我们正在将我们的应用程序从 Windows 移植到 OSX，我在使用 Curl 时遇到了一些问题，与 Windows 版本不同，它不允许我在 Xcode 中选择符号位置来调试 curl 库中发生的事情。我已经从源代码构建了 Curl，我想这只是将 lib 和目标文件复制到它可以读取的地方的问题？

谢谢

# iphone - 是否可以从 UITabBarController 中隐藏某些选项卡？

> ID：12674161
> 
> 赞同：0
> 
> 时间：2012-10-01T13:22:33.900
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller

我想实现一个`UITabBarController`环境（由他们自己管理的几个视图控制器链`UINavigationControllers`），但不希望所有选项卡都在其中可见`TabBar`（我只希望 10 个选项卡中的 3 个可见）。“主页”屏幕将包含用于切换到特定“选项卡”的按钮。这可能吗？如果没有，有人可以建议一种替代方法来完成这种行为吗？

我查看了`UITabBarController`类引用，没有看到任何指示像“ `willDisplayTab`”或类似方法的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:28:57.940

```
UITabBarController *controller = [[UITabBarController alloc] init];

controller.viewControllers = [NSArray arraywithObjects:v1,v2,v3,nil]; 
```

这将返回视图控制器（选项卡）数组。当您想要删除或添加其他新选项卡时，您可以更改视图控制器数组。

例如，Yoo 可以将所有视图控制器保存在一个数组中，而将可见的视图控制器保存在另一个数组中。

但问题是您何时会更新可见选项卡？

# ios - 创建与 iOS 和嵌入式设备的 UDP 连接

> ID：12674165
> 
> 赞同：0
> 
> 时间：2012-10-01T13:22:46.627
> 
> 标签：ios, embedded, udp

如果我有一个 iOS 客户端和一个嵌入式设备，我想通过使用 UDP 的 WiFi 连接在两者之间进行通信，我是否需要编写一个服务器（python 或其他东西）来促进连接？我正在尝试在网上查找，但有很多模棱两可的文章。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:01:44.113

您必须为将要侦听数据的设备（iOS 或嵌入式）编写服务器应用程序。

但是，对于简单的单客户端 UDP 连接，您的服务器基本上只是一个 UDP 套接字，您将其绑定到要使用的端口 - 然后开始侦听数据。您不需要任何连接处理，因为 UDP 是无连接的。

在您的客户端上，您只需将数据发送到服务器的 IP 和端口即可。

我自己做了这个，将我的 iPod Touch 连接到一台小型 ITX 计算机（运行 WinXP），通过 WiFi[控制一个小型移动机器人。](http://www.youtube.com/watch?v=9OrJTeyz_5U)

# asp.net - 如何确定从我的本机 asp.net 应用程序或 WCF 服务调用的方式

> ID：12674166
> 
> 赞同：3
> 
> 时间：2012-10-01T13:22:49.173
> 
> 标签：asp.net, wcf

我有一个直接调用业务层的 asp.net 应用程序，并且相同的业务层作为 WCF 服务公开，以便其他一些应用程序（外部网站/控制台应用程序）可以使用它。

在我的 BL 中，我想确定调用是来自我的本机 asp.net 应用程序还是来自 WCF 调用，是否有任何万无一失的方法可以在不传递额外参数的情况下确定这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T13:27:34.340

您可以获取调用方法的名称、模块或其他信息。

```
using System.Diagnostics;

var stackTrace = new StackTrace();
var callingMethod = stackTrace.GetFrame(1).GetMethod();
var methodName = callingMethod.Name;
var methodModule = callingMethod.Module;
// etc. 
```

文档：http: [//msdn.microsoft.com/en-us/library/system.reflection.methodbase.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.aspx)

# python - 带有子文件夹的 Python 单元测试发现

> ID：12674167
> 
> 赞同：35
> 
> 时间：2012-10-01T13:22:52.153
> 
> 标签：python, unit-testing

我的 unittest 文件夹是这样组织的。

```
.
|-- import
|   |-- import.kc
|   |-- import.kh
|   `-- import_test.py
|-- module
|   |-- module.kc
|   |-- module.kh
|   `-- module_test.py
`-- test.py 
```

我想简单地运行以使用*unittest* Python 模块`test.py`运行我的每一个。`*_test.py`

 *目前，我的 test.py 包含

```
#!/usr/bin/env python

import unittest

if __name__ == "__main__":
    suite = unittest.TestLoader().discover('.', pattern = "*_test.py")
    unittest.TextTestRunner(verbosity=2).run(suite) 
```

python 文档说它应该自动在子文件夹中发现我的测试。但事实并非如此。

目前，它只输出

```
----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK 
```

我确定这不是我的`*_test.py`文件的问题，因为当我将它们移动到根目录时，它工作正常。我做错了什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-01T13:34:21.957

添加`__init__.py`和`import`目录`module`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:38:19.077

如果可以切换，请考虑使用[鼻子](https://nose.readthedocs.org/en/latest/)而不是香草模块。`unittest`你不需要弄乱你自己的 test.py 文件或任何东西；a run of`nosetests`会找到并运行你所有的测试。*

# php - 在php中解开二级数组

> ID：12674174
> 
> 赞同：0
> 
> 时间：2012-10-01T13:23:07.540
> 
> 标签：php, multidimensional-array

我有闲置的多维数组结构：

```
array
  '2012-10-02' => 
     array
       0 => 
        array
          'item1' => 
            array
              ...

   '2012-10-03' => 
     array
       0 => 
         array
           'item1' => 
             array
               ... 
```

如何解开 Item 数组，使结构如下所示：

```
array
  '2012-10-02' => 
     array
       'item1' => 
          array
           ...
   '2012-10-03' => 
      array
        'item1' => 
          array
            ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:26:11.637

您需要遍历数组并为每个项目“提升”`$item[0]`到`$item`曾经拥有的位置。例如：

```
foreach($input as &$element) {  // by reference!
    $element = $element[0];
}

// not strictly required, but prevents you from accidentally messing with
// $element outside of the loop (which would almost certainly be a bug)
unset($element); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:29:51.983

您应该尝试使用`array_map`返回第一个元素

```
$array = array("2012-10-02" => array(array("item1"=>array())),"2012-10-03" => array(array("item1"=>array())));

#before
var_dump($array);

$array = array_map(function($var) {return $var[0];} , $array);

#after
var_dump($array); 
```

前

```
array
  '2012-10-02' => 
    array
      0 => 
        array
          'item1' => 
            array
              ...
  '2012-10-03' => 
    array
      0 => 
        array
          'item1' => 
            array
              ... 
```

后

```
array
  '2012-10-02' => 
    array
      'item1' => 
        array
          empty
  '2012-10-03' => 
    array
      'item1' => 
        array
          empty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T07:19:31.250

当按唯一键分组时，PHP PDO`fetchAll`会产生类似的情况。`PDO::FETCH_GROUP`按原样使用结果需要数据访问权限，例如`$rows['key_1'][0]['data_1']`. 下面的循环摆脱了无关的包装器数组。然后可以访问相同的数据`$rows['key_1']['data_1']`。

```
public function get_unique_assoc_rows() {
    $stmt = $this->pdo->prepare('SELECT assoc_key, other_field'
            . ' FROM some_table');
    $stmt->execute();
    $rows = $stmt->fetchAll(PDO::FETCH_GROUP);

    foreach ($rows as &$row) {
        $row = $row[0];
    }
    return $rows;
} 
```

注意：对于非唯一键，不要这样做，因为您需要包装数组。

# iphone - 沿着 Iphone 中的路径拖动

> ID：12674177
> 
> 赞同：4
> 
> 时间：2012-10-01T13:23:19.047
> 
> 标签：iphone, xcode4, core-animation, core-graphics

我有一个图像。我想沿着路径拖动该图像。路径可以是圆形或矩形。如果图像被触摸和拖动，它应该只沿着路径移动，而不应该离开路径。我曾尝试使用 Core Graphics 和 Core 动画，但找不到正确的方法。我在网上搜索过，但它总是显示如何沿路径移动对象。找不到有关沿路径拖动对象的任何信息。我还发现它们不是 Apple 提供的从 UIBezierPath 中提取点的方法。

他们无论如何都会这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T23:17:38.353

该类`UIBezierPath`有一个名为 的实例方法`- (BOOL)containsPoint:`。使用此方法和 2`UIBezierPath`秒，您可以检查您的对象是否沿路径移动。

```
+---------+
|xxxxxxxxx|
|x+-----+x|
|x|     |x|
|x|     |x|
|x|     |x|
|x+-----+x|
|xxxxxxxxx|
+---------+ 
```

这里的技巧是使 1 条路径比第一个路径略小（可能是 2 个像素），同时确保两条路径具有共同的中心。您的对象现在必须经过的路径/路线将是贝塞尔路径区域的差异，您可以从调用`- (BOOL)containsPoint:`.

如果您的对象包含在 big`UIBezierPath`中，而不包含在 small 中，那么您知道您走在正确的道路上。

# android - 在 Web 视图中打开文件上传菜单不起作用

> ID：12674179
> 
> 赞同：4
> 
> 时间：2012-10-01T13:23:24.050
> 
> 标签：android, webview, android-webview, webchromeclient

我需要能够在 Web 视图中从 AndroidAddMember.aspx 页面打开文件上传菜单。我找到了这个修复，但我认为我没有正确实施它。[使固定](http://m0s-programming.blogspot.com/2011/02/file-upload-in-through-webview-on.html)

文件上传按钮在手机和 PC 上的浏览​​器中可以正常工作，但是一旦在网络视图中，该按钮就不起作用。

我在下面的第一个案例语句中嵌入了带有按钮的页面。

任何帮助都会很棒。谢谢

```
@Override   
 protected void onActivityResult(int requestCode, int resultCode,    
                                    Intent intent) {    
  if(requestCode==FILECHOOSER_RESULTCODE)    
  {    
   if (null == mUploadMessage) return;    
           Uri result = intent == null || resultCode != RESULT_OK ? null   
                   : intent.getData();    
           mUploadMessage.onReceiveValue(result);    
           mUploadMessage = null;    

}    
}    

@Override
public boolean onOptionsItemSelected(MenuItem item) {    
    // Handle item selection    
    switch (item.getItemId()) {        
    case R.id.register:            

        wv = new WebView(this);  
        wv.setWebViewClient(new WebViewClient());   
        wv.getSettings().setJavaScriptEnabled(true); 

        wv.loadUrl("http://www.mysite.com/AndroidAddMember.aspx"); 

          wv.setWebViewClient(new WebViewClient());    
          wv.setWebChromeClient(new WebChromeClient()    
          {    
                 //The undocumented magic method override    
                 //Eclipse will swear at you if you try to put @Override here    

              public void openFileChooser(ValueCallback<Uri> uploadMsg) {    

                  mUploadMessage = uploadMsg;    
                  Intent i = new Intent(Intent.ACTION_GET_CONTENT);    
                  i.addCategory(Intent.CATEGORY_OPENABLE);    
                  i.setType("image/*");    
                  Myactivity.this.startActivityForResult(Intent.createChooser(i,"File Chooser"), FILECHOOSER_RESULTCODE);    

                 }    
        });    
            setContentView(wv);    

                 return true;
    default:            
        return super.onOptionsItemSelected(item);    
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:47:34.003

实际上，webview 不允许以这种方式上传文件。您必须在应用程序的菜单中创建一个上传按钮。并获取文件输入，然后通过 http 上传到您的网站。

或者更好的是，您应该使用 phonegap 使其成为可能。在电话间隙，您可以轻松使用文件上传和下载。

[http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File)

只有这样您才能将文件上传到您的服务器或没有办法。Webview 仅提供基本功能。

你可能会更好地使用这种方式。

# php - 具有 0 的字段的 SQL 平均值

> ID：12674182
> 
> 赞同：0
> 
> 时间：2012-10-01T13:23:37.363
> 
> 标签：php, sql

我有一个带有一些评分的 SQL 查询，例如

```
location, cleanliness, money, kitchen, checkinprocess, servicebyowner 
```

对于很少的数据`checkinprocess`，`servicebyowner`都是`0`。我只想计算这些值的平均值。

我想检查我的查询，例如，如果有 20 行作为结果，则必须仅针对现有行计算平均值`checkinprocess`（`serviceby owner`如果仅针对 10 行结果中的 2 行），它必须仅计算 2 行的平均值，但对于其他行，它可以根据行数计算。这是我写的查询：

```
 select count(customdata) as CNT,
         customdata,
         sum(service_by_owner) as ser,
         sum(checkinprocess) as chk,
         sum(locationrating) as loc,
         sum(cleanlinessrating) as cle,
         sum(valueformoneyrating) as val,
         sum(kitchenequipmentrating) as kit
    from feedback
group by customdata HAVING customdata !='null' AND customdata!=''; 
```

我可以根据行计算其余四个字段的平均值，但这两个字段对我来说有点棘手。

**编辑：**

PHP用于计算平均值：

```
foreach($result as $row){
  $arrValues[] = array("customdata"=>$row['customdata'],
                       "checkinprocess"=>ceil(($row['chk'])),
                       "service_by_owner"=>(ceil($row['ser'])),
                       "valueformoneyrating"=>ceil(($row['val']/($row['CNT']*4))*100), 
                       "locationrating"=>ceil(($row['loc']/($row['CNT']*4))*100),
                       "kitchenequipmentrating"=>ceil(($row['kit']/($row['CNT']*4))*100), 
                       "cleanlinessrating"=>ceil(($row['cle']/($row['CNT']*4))*100));
} 
```

这个 checkinprocess 和 servicebyowner，我必须只计算现有行的平均值，而不是所有为 0 的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:37:57.300

有点猜测。. . 但您似乎想要非 0 值的平均值。您可以使用 SQL avg 函数执行此操作：

```
select count(customdata) as CNT,
       customdata,
       avg(case when service_by_owner <> 0 then service_by_owner*1.0 end)*4*100.0 as ser,
       avg(case when checkinprocess<> 0 then checkinprocess*1.0 end)*4*100.0  as chk,
       avg(case when locationrating<> 0 then locationrating*1.0 end)*4*100.0  as loc,
       avg(case when cleanlinessrating<> 0 then cleanlinessrating*1.0 end)*4*100.0  as cle,
       avg(case when valueformoneyrating<> 0 then valueformoneyrating*1.0 end)*4*100.0  as val,
       avg(case when kitchenequipmentrating<> 0 then kitchenequipmentrating*1.0 end)*4*100.0  as kit
from feedback
WHERE customdata <> 'null' AND customdata <> ''; 
group by customdata 
```

【4*100的乘法以评论为准。】

您没有提及您使用的是哪个 SQL 引擎，所以我将所有值转换为浮点数（乘以 1.0），因此平均值始终是浮点数。这在所有数据库中都不是必需的。

我还将条款更改`HAVING`为`WHERE`条款。这在某种程度上是一个偏好问题，但我认为这是过滤输入而不是输出。另外，你的意思是`customdata <> 'null'`或`customdata is not null`？

# python - 蟒蛇：没有。字符串中每个字符的出现次数

> ID：12674193
> 
> 赞同：0
> 
> 时间：2012-10-01T13:24:06.127
> 
> 标签：python, string, collections

> **可能重复：**
> [如何使用python获取每个字符的出现次数](https://stackoverflow.com/questions/5192753/how-to-get-the-number-of-occurrences-of-each-character-using-python)

获取字符串中每个字符的计数并存储它的最佳方法是什么（我为此使用字典 - 这个选择会产生很大的不同吗？）？我想到的几种方法：

1.

```
for character in string:
    if character in characterCountsDict:
        characterCountsDict[character] += 1
    else:
        characterCountsDict[character] = 1 
```

2.

```
character = 0
while character < 127:
    characterCountsDict[str(unichr(character))] = string.count(str(unichr(character))
    character += 1 
```

我认为第二种方法更好......但是它们中的任何一个都好吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T13:26:09.447

```
>>> from collections import Counter
>>> Counter("asdasdff")
Counter({'a': 2, 's': 2, 'd': 2, 'f': 2}) 
```

请注意，您可以`Counter`像字典一样使用对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T14:51:12.290

如果您对最有效的方式感兴趣，它似乎是这样的：

```
from collections import defaultdict

def count_chars(s):
    res = defaultdict(int)
    for char in s:
        res[char] += 1
    return res 
```

时间：

```
from collections import Counter, defaultdict

def test_counter(s):
    return Counter(s)

def test_get(s):
    res = {}
    for char in s:
        res[char] = res.get(char, 0) + 1
    return res

def test_in(s):
    res = {}
    for char in s:
        if char in res:
            res[char] += 1
        else:
            res[char] = 1
    return res

def test_defaultdict(s):
    res = defaultdict(int)
    for char in s:
        res[char] += 1
    return res

s = open('/usr/share/dict/words').read()
#eof

import timeit

test = lambda f: timeit.timeit(f + '(s)', setup, number=10)
setup = open(__file__).read().split("#eof")[0]
results = ['%.4f %s' % (test(f), f) for f in dir() if f.startswith('test_')]
print  '\n'.join(sorted(results)) 
```

结果：

```
0.8053 test_defaultdict
1.3628 test_in
1.6773 test_get
2.3877 test_counter 
```

# php - 通过替换特殊字符的seolink生成器功能

> ID：12674194
> 
> 赞同：0
> 
> 时间：2012-10-01T13:24:06.660
> 
> 标签：php, cakephp

我正在尝试创建一个接受字符串并将其转换为 seolink 的函数。但它看起来很不专业

优化它的更好方法是什么？因为可能有太多特殊字符。

函数看起来像

```
 function seo_url($title) {
        $titel = substr($title,0,160);

        // Replace underscore with "-" 
        $titel = ereg_replace("_","-",$title);

        // Replace space with "-" 
        $titel = ereg_replace(" ","-",$title); 

       // Replace special characters
        $titel = Ereg_replace ("À", "A", $Titel); 
        $titel = ereg_replace("í", "i", $title); 
        $titel = ereg_replace("ó", "o", $title); 
        $titel = ereg_replace("ú", "u", $title); 
        $titel = ereg_replace("ñ", "n", $title); 
        $titel = ereg_replace("Ñ", "n", $title); 

        $titel = Strtolower (trim($title)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:02:09.860

您为什么要在字符串中说要替换的内容而不是要保留的内容。这就像倒退着走。例子：

```
$string = preg_replace('/[^a-z0-9_]/i', '_', $string); 
$string = preg_replace('/_[_]*/i', '_', $string); 
```

**和下面的完整功能：**

```
public function getStringAsURL($string){ 
            // Define the maximum number of characters allowed as part of the URL 

            $currentMaximumURLLength = 100; 

            $string = strtolower($string); 

            // Any non valid characters will be treated as _, also remove duplicate _ 

            $string = preg_replace('/[^a-z0-9_]/i', '_', $string); 
            $string = preg_replace('/_[_]*/i', '_', $string); 

            // Cut at a specified length 

            if (strlen($string) > $currentMaximumURLLength) 
            { 
                $string = substr($string, 0, $currentMaximumURLLength); 
            } 

            // Remove beggining and ending signs 

            $string = preg_replace('/_$/i', '', $string); 
            $string = preg_replace('/^_/i', '', $string); 

            return $string; 
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:42:52.840

我使用此功能来清理网址，与您的类似，但不使用正则表达式：

```
function seo_url($str) {
  $str = mb_strtolower($str);
  $str = trim($str);
  $str = str_replace(array(' ', '\'', ',', '.', ';', ':'), '', $str);
  $str = str_replace('_', '-', $str);
  $str = str_replace(array('á', 'é', 'í', 'ó', 'ú', 'ö', 'ü', 'à', 'è', 'ì', 'ò', 'ù', 'â', 'ê', 'î', 'ô', 'û', 'ñ', 'ç'),
                     array('a', 'e', 'i', 'o', 'u', 'o', 'u', 'a', 'e', 'i', 'o', 'u', 'a', 'e', 'i', 'o', 'u', 'n', 'c'),
                     $str);

  return $str;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:30:17.800

The only real way to make it look neater and smaller would be to use an or expression in your regex.

ie.

```
ereg_replace("Ñ|ñ", "n", $title);
ereg_replace("Ã¨|Ã©|Ãª|Ã«","e", $title); 
```

This as far as I have seen is the most common way to do this, and also faster I would hasten to guess.

You can download a character map or create your own for generating the regex string, then store the character map yourself for ease of editing also.

Then your code would be again much smaller and more robust, as it would load in an external character map, which maps each character to it's counterpart.

**another solution** [Removing Accented UTF-8 Characters With PHP](http://www.randomsequence.com/articles/removing-accented-utf-8-characters-with-php/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:27:09.453

据我所知，我认为你会从阅读[.htaccess RewriteRule中受益](http://kb.mediatemple.net/questions/85/Using+.htaccess+rewrite+rules)

从 PHP 中删除这种逻辑可能非常有用

这是我在这里找到的一个使用这种逻辑[的示例（将空格重写为与谷歌相关的 SEO 的破折号）](https://stackoverflow.com/questions/5821120/301-redirect-with-spaces)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T13:45:20.930

使用类函数`Translit::makeUrl($str)`

```
final class Translit {

    static function translit($string) {

        $replace=array(
            "_"=>"-",
            "`"=>"",
            "a"=>"a",
            "À"=>"A",
            "б"=>"b",
            "Б"=>"B",
            // etc.
        );
        return $str=iconv("UTF-8","UTF-8//IGNORE",strtr($string,$replace));
    }

    static function makeUrl($str) {
        $result = self::translit($str);

        $result = str_replace(' ', '-', $result);
        $result = preg_replace('/[\-]{2,}/','', $result);

        return strtolower($result);
    }
} 
```

# c# - 从 PDF 中删除文本

> ID：12674195
> 
> 赞同：1
> 
> 时间：2012-10-01T13:24:16.283
> 
> 标签：c#, pdf, itextsharp

我正在寻找从 pdf 中删除/删除所有文本的解决方案。我已经使用 iTextSharp 一段时间了，使用它从 pdf 中提取文本很容易（不使用 OCR）。但是我找不到删除文本的选项。

[坦率地说，这个解决方案](https://stackoverflow.com/a/8779464/1711839)对我不起作用。

```
 page.GetAsArray(PdfName.CONTENTS); 
```

为我返回 null，在使用`PdfName.Text`和我尝试过的其他一些时也是如此。

使用的库并不重要，我只是认为 iTextsharp 应该能够做到这一点。但是，如果有其他（免费）解决方案，请带上它

编辑：**只是为了弄清楚为什么我要从 pdf 中删除所有文本**

我想减小 pdf 的大小。我通过降低 pdf 中图像的分辨率来做到这一点。然而，在很多情况下，矢量图占据了大部分空间。所以我想到了以下内容：删除所有文本，而不是将剩余的 pdf（只有图像和矢量）转换为位图（jpeg）。之后，我再次将文本粘贴在上面。另一种选择是使文本不可见，但我认为这并不容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:13:20.740

1.  页面字典的`/Contents`并不总是由数组组成。很明显，如果内容存储为流，则`GetAsArray()`返回。`null`
2.  假设您使用`GetAsStream()`并从流中删除了所有文本内容，那么您可能仍然在 XObjects 中有文本内容。该文本不会从内容流中引用，但 iText 将无法将 XObjects 删除为“未使用的对象”，因为这些对象仍会从`/Resources`页面字典中引用。

请阅读[ISO-32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)以找出您做错了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:54:56.563

现在您已经更新了您的问题，并揭示了预期措施的动机，让我告诉您真相：

*   这些措施绝不会*减小*PDF 的大小。

*   相反，它们会导致文件大量增加：

    1.  首先删除文本+字体可能会导致大小略有缩小，是的。

    2.  然后将页面的剩余部分转换为位图肯定会大大增加尺寸（或者您同意非常低的图像质量，也许？）。

    3.  最后再次“粘贴”文本将再次增加文件大小（很可能与您在第一步中保存的数量相同）。

这根本不是一个好计划。

如果您提供（链接到）您的典型示例 PDF 文件之一，我可能会想出一个 Ghostscript（以及其他工具）命令行，它可以开箱即用并更有效地缩小 PDF 大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T14:35:44.887

To remove all text in a PDF, the easiest solution is using ghostcript

```
gs -o output_no_text.pdf -sDEVICE=pdfwrite -dFILTERTEXT  input.pdf 
```

# serial-port - 通过 pl2303 连接器和 serialstream.h/libserial 在 ubuntu 上设置 buad 速率时出错

> ID：12674205
> 
> 赞同：2
> 
> 时间：2012-10-01T13:24:50.860
> 
> 标签：serial-port, embedded-linux, baud-rate, libserial

我正在 Ubuntu 上开发一个串行通信应用程序。我正在使用 pl2303 转换器和[libserial](http://libserial.sourceforge.net/)。

我的问题是我无法设置波特率。执行下面的源代码后，我得到错误状态 = 2。

我的源代码是：

```
bool setUpCom()
{
    SerialStream my_serial_stream ;
    my_serial_stream.Open( "/dev/ttyUSB0" ) ;

    if ( ! my_serial_stream.good() )
    {
        printf("\nNo COM Port");
        return false;
    }

    my_serial_stream.SetBaudRate( SerialStreamBuf::BAUD_115200 );   
    my_serial_stream.SetCharSize( SerialStreamBuf::CHAR_SIZE_8 ) ;

   if ( ! my_serial_stream.good() )
   {  
       std::cerr << "Error setting serial port state=2" ;
       return false; 
   }

   my_serial_stream.SetNumOfStopBits(1) ;

   if ( ! my_serial_stream.good() )
   {
       std::cerr << "Error setting serial port state=3" ;
       return false;
   }

   my_serial_stream.SetParity( SerialStreamBuf::PARITY_NONE ) ;

   if ( ! my_serial_stream.good() )
   {
       std::cerr << "Error setting serial port state=4" ;
       return false;
   }

   my_serial_stream.SetBaudRate( SerialStreamBuf::BAUD_115200 );

   if ( ! my_serial_stream.good() )
   {
       std::cerr << "Error setting serial port state =5" ;
       return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:33:29.320

你确定调用`my_serial_stream.good()`是好的吗？

在[http://libserial.sourceforge.net/doxygen/class_lib_serial_1_1_serial_stream.html](http://libserial.sourceforge.net/doxygen/class_lib_serial_1_1_serial_stream.html)它没有列出。有一种`IsOpen()`方法代替。

# .htaccess - 我将如何为此设置 URL 重写？

> ID：12674210
> 
> 赞同：0
> 
> 时间：2012-10-01T13:24:59.633
> 
> 标签：.htaccess, url-rewriting

我尝试了一些不同的方法，但都没有成功。

基本上，我有一些非常难看的网址。

```
http://example.com/index.php?p=1_4_Contact-Us
http://backlinktuners.com/index.php?p=1_2_Services 
```

我希望它们简单一些，

```
http://example.com/contact-us 
```

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:54:51.120

为了清楚起见（因为在这种情况下，要求一个 URL*成为*其他 URL 没有任何意义），听起来你在要求一个客户端重定向，这意味着当有人`http://backlinktuners.com/index.php?p=1_2_Services`在他们的 URL 地址栏中输入时，他们的请求得到重定向到`http://example.com/contact-us`，这将替换其地址栏中的另一个 URL，然后他们的浏览器将请求资源`http://example.com/contact-us`（旧 URL 被扔出窗口）。

尝试将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^p=[0-9_]+_Contact-Us [NC,OR]
RewriteCond %{QUERY_STRING} ^p=[0-9_]+_Services [NC]
RewriteRule ^/?index.php$ /contact-us [L,R=301] 
```

当然，如果你什么都没有`http://example.com/contact-us`，浏览器只会看到 404 错误。

# excel - Excel宏查找行的长度

> ID：12674211
> 
> 赞同：1
> 
> 时间：2012-10-01T13:25:02.370
> 
> 标签：excel, vba

我正在使用 Excel 宏，

我遇到`ActiveCell.End(xlDown).Select`了转到表格最后一行的命令

我目前正在使用此命令来查找总行数

```
ActiveCell.End(xlDown).Select

y = ActiveCell.Row 
```

但问题是对于大数据，命令会跳过数据，其中下一行的数据发生变化。

可能的问题是什么？

（您可以看到表 1069 和 1070 数据类型是日期，格式相同但代码不确定地跳过[注意：当第二列发生变化时]）

```
.
.
.
1068 > 20-08-2012 C0 138225 98.91608138 99.25925926
1069 > 20-08-2012 C0 138226 99.71159982 98.95776825
1070 > 21-08-2012 __ 506821 65335U11 0     
1071 > 21-08-2012 C0 100381 0 0
.
.
.
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:42:51.837

我正在删除评论，但您应该始终使用`xlUp`而不是`xlDown`避免出现空白问题。

请在目标列中选择一个单元格并运行以下命令：

```
Sub findTherow()
Dim y As Integer
With Excel.ActiveSheet
            y = .Cells(.Rows.Count, ActiveCell.Column).End(Excel.xlUp).Row
End With
MsgBox ("Look what I found:" & y)
End Sub 
```

# css - 来自外部 url 的 Cakephp 图片

> ID：12674215
> 
> 赞同：0
> 
> 时间：2012-10-01T13:25:07.127
> 
> 标签：css, image, cakephp, include

我的数据库中有几个图像链接。这些链接是绝对网址。

我的问题是，蛋糕不会显示图像。

我的观点：

```
<h2><?php echo h($item['Item']['title']); ?></h2>
<img src="<?php echo h($item['Item']['cover']); ?>"> 
```

显示：

```
"My title" (in h2)
and no image 
```

Firebug 输出如下，“img”标签显示为灰色：

```
<h2>My title</h2>
<img src="http://example.com/images/SY317.jpg"> 
```

为了测试，我已经从 webroot/css 中删除了所有的 css 文件。

**有人知道我的错误在哪里吗？** 我想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:29:26.920

您列出的代码：

```
<img src="<?php echo h($item['Item']['cover']); ?>"> 
```

转换为“普通”PHP：

```
<img src="<?php echo htmlspecialchars($item['Item']['cover']); ?>"> 
```

URL 格式看起来很好，所以图像很可能不存在。这实际上与 CakePHP（甚至是 PHP）无关。

即使它是一个外部图像，使用 CakePHP 的 Html 帮助器来显示图像仍然是一个好主意。这使您可以更轻松地在整个站点上操作图像...例如，如果您想添加水印，或跟踪图像视图的数量，或使用缩略图...等等：

```
<?php echo $this->Html->image($item['Item']['cover'], array(
    'height'=>'100',
    'width'=>'100',
    'alt'=>'my image')); ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T13:34:12.760

像这样使用 cake HtmlHelper 函数：

```
<?php echo $html->image($item['Item']['cover']); ?> 
```

# android - 安卓3G信号强度

> ID：12674216
> 
> 赞同：1
> 
> 时间：2012-10-01T13:25:07.497
> 
> 标签：android

为什么我们必须设置一个监听器才能在 3g 模式下获取单个当前小区的信号强度？

我们使用 NeghbouringcellInfo 类获得相邻小区的信号强度？

为什么我们不能像这样获得当前小区的信号强度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:29:14.070

试试下面的代码：

```
 ConnectivityManager manager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();

    if (is3g) {
        myListener = new MyPhoneStateListener();
        TelephonyManager telManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        telManager.listen(myListener, PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);
    }

    private class MyPhoneStateListener extends PhoneStateListener {
        public int singalStenths = 0; 
        @Override
        public void onSignalStrengthsChanged(SignalStrength signalStrength){
            super.onSignalStrengthsChanged(signalStrength);
            int singalStrength  = signalStrength.getGsmSignalStrength();
            singalStenths = signalStrength.getGsmSignalStrength();
            System.out.println("----- gsm strength" + singalStrength );
            System.out.println("----- gsm strength" + singalStenths );

            if (singalStenths > 30) {
                signalstrength.setText("Signal Str : Good");
                signalstrength.setTextColor(getResources().getColor(R.color.good));
            }
            else if(singalStenths > 20 && singalStenths < 30) {
                signalstrength.setText("Signal Str : Average");
                 signalstrength.setTextColor(getResources().getColor(R.color.average));
            }
            else if(singalStenths < 20) {
                signalstrength.setText("Signal Str : Weak");
                 signalstrength.setTextColor(getResources().getColor(R.color.weak));
            }
        }
    }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T13:11:06.820

实现是这样的，我们必须实现侦听器来获取当前单元格的信号强度，我已经编写了侦听器并在第一次读取时停止了侦听器，然后保持在变量中。没有其他办法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T06:52:39.407

我尝试使用“Hazmat”代码，但不幸的是在我的设备上不起作用（Samsung S3 mini Android 4.1.2）。似乎三星的某些手机在此功能方面存在问题，而三星没有人关心。[其他三星机型也有类似问题](http://forum.xda-developers.com/showpost.php?p=18846375&postcount=12)：

三星 Galaxy SI -> 没问题

三星 Galaxy SII -> 没有实力也没有刷新

三星 Galaxy Tab 10.1 -> 无力无刷新

三星 Galaxy Note -> 没有力气也没有刷新

（安卓版本：2.3.3、2.3.4、2.3.5、3.1）

[也在这里](https://code.google.com/p/android/issues/detail?id=18336)和[这里](http://developer.samsung.com/forum/thread/can-not-read-signal-strength-on-galaxy-sii-and-other-samsung-devices/77/129957)报道。

结论：请注意，许多**三星设备无法正常使用此功能！** 我不知道有任何解决方法。三星使我们的应用程序不可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:34:11.437

如果我理解得很好，您不想设置监听器，而只是在需要时获取信号强度。如果是这种情况，这里是如何做到的：

[`android.telephony.SignalStrength`](http://developer.android.com/reference/android/telephony/SignalStrength.html)

您将获得 3G 或 CDMA 或您连接的任何类型的手机。

希望能帮助到你。

-------- 评论后编辑 --------------

侦听器只是一种很好的方式，可以通知您感兴趣的内容发生了变化，而无需不断地轮询它。它效率更高。

这是我从 Android 源代码中获取的示例。

```
public void onSignalStrengthsChanged(SignalStrength signalStrength) {
        if (mTelephonyManager.getPhoneType() == TelephonyManager.PHONE_TYPE_CDMA) {
            String updateMsg = "cdma dBM=" + signalStrength.getCdmaDbm();
            mTrackerData.writeEntry(SIGNAL_PROVIDER_TAG, updateMsg);
        } else if  (mTelephonyManager.getPhoneType() == TelephonyManager.PHONE_TYPE_GSM) {
            String updateMsg = "gsm signal=" + signalStrength.getGsmSignalStrength();
            mTrackerData.writeEntry(SIGNAL_PROVIDER_TAG, updateMsg);
        }
    } 
```

这是取自`frameworks/base/tests/LocationTracker/src/com/android/locationtracker/TrackerService.java`. 是的，此方法由侦听器调用，但不是必须的。这只是一种比不断轮询更有效的做事方式。另一方面，如果您只想要特定时间的信号强度，只需一个镜头，没有什么能阻止您从其他地方调用它。

另外，我建议您下载您的 Android 发行版。使用“grep”，它提供了很多关于如何使用类、方法等的示例。我从中学到了很多。这些示例很好，因为它们是由编写操作系统的人编写的。此外，您可以在 [Android 源代码中获取源代码](http://source.android.com/source/downloading.html)

# sql - 使用 SQL 交叉连接

> ID：12674219
> 
> 赞同：0
> 
> 时间：2012-10-01T13:25:09.183
> 
> 标签：sql, join

我有一个包含调查数据的表，两个数据点是 Ethnicity 和 Flavor_Pref。Flavor_Pref 保存一个整数 1、2、3、4、5。1 = 非常不喜欢，5 非常喜欢。

```
 Ethnicity            Flavor_Pref
 African American         3
 Caucasian                2
 Asian                    4
 Hispanic                 1
 African American         3
 Caucasian                4
 Asian                    5
 Hispanic                 2
 African American         4
 Caucasian                1
 Asian                    4
 Hispanic                 2
 African American         3
 Caucasian                2
 Asian                    2
 Hispanic                 1 
```

我想运行一个查询来获得 4 列，每个民族一个。每个组有不同数量的响应。

这就是我正在做的事情：我得到了超过 100 万个结果……我只有 400 个调查。

```
 select  AA.Flavor_Pref as AA,H.Flavor_Pref as H,C.Flavor_Pref AS C,
  A.Flavor_Pref AS A  from
  (SELECT ETHNICITY,Flavor_Pref FROM FLAVORS WHERE ETHNICITY = 'AFRICAN AMERICAN')AS AA
  CROSS JOIN
  (SELECT ETHNICITY,Flavor_Pref FROM FLAVORS WHERE  ETHNICITY = 'HISPANIC') AS H
  CROSS JOIN 
  (SELECT ETHNICITY,Flavor_Pref FROM FLAVORS WHERE ETHNICITY = 'CAUCASIAN') AS C
  CROSS JOIN 
  (SELECT ETHNICITY,Flavor_Pref FROM FLAVORS WHERE  ETHNICITY = 'ASIAN' ) AS A 
```

我正在寻找的是：在这种情况下，西班牙裔结果较少，因此没有报告任何内容。

```
 African Americans            Hispanic        Caucasian          Asian
         3                         1                2               4
         3                         2                4               5
         4                         2                1               5
         .                         .                .               .
         .                         .                .               .
         .                         .                .               .
         3                                          2               4
         2                                          1               1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:30:38.847

What you are looking for is `PIVOT`ing rows in to columns. Here is the standard way to do this, it will for all the RDBMS:

```
SELECT 
  MAX(CASE WHEN Ethnicity = 'African American' THEN Flavor_Pref END)
     AS 'African Americans',
  MAX(CASE WHEN Ethnicity = 'Hispanic' THEN Flavor_Pref END)
     AS 'Hispanic',
  MAX(CASE WHEN Ethnicity = 'Caucasian' THEN Flavor_Pref END)
     AS 'Caucasian',
  MAX(CASE WHEN Ethnicity = 'Asian' THEN Flavor_Pref END)
     AS 'Asian'
FROM @flavors 
GROUP BY Flavor_Pref 
```

## [Here is a live demo](https://data.stackexchange.com/stackoverflow/query/81427)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:43:08.903

您想要每个种族最受欢迎的口味。您可以使用排名函数在大多数数据库中执行此操作：

```
select max(case when ethnicity = 'African American' and seqnum = 1 then flavor_pref end) as AfricanAmerican,
       max(case when ethnicity = 'Hispanic' and seqnum = 1 then flavor_pref end) as Hispanic,
       max(case when ethnicity = 'Caucasian' and seqnum = 1 then flavor_pref end) as Caucasian,
       max(case when ethnicity = 'Asian' and seqnum = 1 then flavor_pref end) as Asian
from (select t.ethnicity, t.flavor_pref, cnt,
             row_number() over (partition by t.enthnicity order by cnt desc) as seqnum
      from (select t.ethnicity, t.flavor_pref, count(*) as cnt
            from t
            group by t.ethnicity, t.flavor_pref
           ) t
     ) ts 
```

# java - Java - 语法让我难过

> ID：12674221
> 
> 赞同：1
> 
> 时间：2012-10-01T13:25:15.400
> 
> 标签：java, syntax

我认为我的代码存在一些基本问题。我对java语法不太熟悉，所以我不太确定我哪里出错了。任何帮助将不胜感激。

我尝试在中间使用构造函数，并在底部使用一些访问器，但我认为我自己过于复杂了。

```
import java.util.Scanner;    
public class FerryBooking {

    public static void main(String args[]){
        class VehicleBooking {
            private String booking_ID = new String("");
            private String registration = new String("");
            private String make_model = new String("");
            private int number_passengers = 1;
            private boolean insurance_choice = false;
            private boolean insurance_flag = false;

            public static final int booking_fee= 100;
            public static final int extra_passenger = 50;
            public static final int insurance_fee = 50;

            VehicleBooking() {
                Scanner input = new Scanner(System.in);
                Scanner scan = new Scanner(System.in);

                System.out.print("Enter booking ID");
                booking_ID = input.next();
                System.out.print("Enter registration number");
                registration = input.next();
                System.out.print("Enter vehicle make/model");
                make_model = input.next();
                System.out.print("Enter number of passengers");
                number_passengers = scan.nextInt();
            }

            public String getBookingID(){
                return booking_ID;
            }
            public String getRegistration(){
                return registration;
            }
            public String getMakeModel(){
                return make_model;
            }
            public int getPassengers(){
                return number_passengers;
            }
            public boolean getInsurance(){
                return insurance_choice;
            }
            public boolean addInsurance(){
                insurance_choice = true;
                if (insurance_flag = false) {
                    insurance_flag = true;
                    return true;
                } else if (insurance_flag = true) {
                    return false;
                }
                return true;
            }
            public double getBookingFee(){
                int final_cost = booking_fee + (getPassengers()*extra_passenger);
                if (insurance_choice = true){
                    final_cost = final_cost + insurance_fee;
                }
                return final_cost;
            }
        }
    }
} 
```

**- 编辑 -**

我重写了很多代码，并将其缩小到我的大问题所在；构造函数。但是，我收到与提供给我的代码的构造函数相关的错误。

```
import java.util.Scanner;

public class VehicleBooking {

    private String booking_ID = "";
    private String registration = "";
    private String make_model = "";
    private int number_passengers = 1;
    private boolean insurance_choice = false;

    public static final int BOOKING_FEE= 100;
    public static final int EXTRA_PASSENGER = 50;
    public static final int INSURANCE_FEE = 50;

    public VehicleBooking(String booking_ID1, String registration1,  String make_model1, int number_passengers1) {

        /** Initialise the variables **/
        booking_ID = booking_ID1;
        registration = registration1; 
        make_model = make_model1;
        number_passengers = number_passengers1;
    }

    public static void main(String args[]) {
        VehicleBooking vb = new VehicleBooking(booking_ID1, registration1, make_model1, number_passengers1);
    }       
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:36:18.117

首先不要像下面这样初始化一个字符串：-

```
private String booking_ID = new String(""); 
```

而是使用`String.valueOf()`或仅将空字符串分配给变量：-

```
private String booking_ID = ""; 
```

其次，养成`CONSTANTS`用`UPPER_CASE`信声明自己的习惯：-

```
public static final int BOOKING_FEE = 100; 
```

第三，看看你的构造函数： -

```
 VehicleBooking()  {
        Scanner input = new Scanner(System.in);
        Scanner scan = new Scanner(System.in);

        System.out.print("Enter booking ID");
        booking_ID = input.next();
        System.out.print("Enter registration number");
        registration = input.next();
        System.out.print("Enter vehicle make/model");
        make_model = input.next();
        System.out.print("Enter number of passengers");
        number_passengers = scan.nextInt();
    } 
```

你不应该`I/O`在你的构造函数中进行操作..`Constructors`用于初始化对象的状态。它的唯一目的是`initialize`。

出于 I/O 目的，创建不同的方法`readInput()`并在创建对象后调用它。

**另一件事： -** 这是你`if-else-if`用过的块..

```
 if (insurance_flag = false) {
             insurance_flag = true;
             return true;
         } else if (insurance_flag = true) {
             return false;
         } 
```

在这段代码中，你`if`的总是`false`和你`else if`的总是`true`..因为你实际上是把这些分配`values`给你的`insurance_flag`..你应该`==`用于比较目的..

所以，使用**`if (insurance_flag == false)`**.. 实际上你不需要与布尔文字比较......

只需使用： - **`if (!insurance_flag)`**.. 它们是等价的..

理想情况下，您应该将包含上述方法的方法更改为以下方法：-

```
 public boolean addInsurance(){
            boolean returnValue = !insurance_flag;
            insurance_flag = true;
            return returnValue;
       } 
```

因为这就是您的方法正在做的事情，但是以一种奇怪的方式..

您也可以**`final_cost = final_cost + insurance_fee;`**用以下代码替换：-

```
final_cost += insurance_fee; 
```

通过这种方式使用它，`final_cost`将不会被评估`twice`..

****编辑 ** ： -****

 **你`constructor`应该看起来像这样： -

```
public VehicleBooking(String bookingId, String registration, String makeModel, 
                      String numberOfPassengers)  {

    /** Initialize the instance variables **/
    /** this represent the reference to current object **/
    this.booking_ID = bookingId;
    this.registration = registration; 
    this.make_model = makeModel;
    this.number_passengers = numberOfPassengers;
} 
```

因此，您实际上是将读取的那些值作为参数传递给构造函数，并使用这些参数初始化实例属性。

我想这会清除你的疑问..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:28:45.957

首先，不要使用

```
private String booking_ID = new String(""); 
```

您正在创建一个新的空不可变对象。您至少应该让 JVM 实习生空白字符串！

```
if (insurance_flag = false) 
```

那是分配，而不是评估，使用 ==，如果 (!insurance_flag) 更好

```
 public boolean addInsurance(){
        insurance_choice = true;
        if (insurance_flag = false) {
            insurance_flag = true;
            return true;
         } else if (insurance_flag = true) {
            return false;
         }
        return true;
    } 
```

这整个函数没有多大意义，你已经在圈子里编码了。只需将保险标志设置为真。Insurance_flag 除了返回之外没有在任何地方使用……为什么你只想在第一次设置标志时返回 true？就让它作废吧。用于“设置”动作。

此外，您将品牌和型号组合成一个字符串，这并不是一种非常面向对象的构建项目的方式。理想情况下，您应该将 Vehicle 对象附加到您的 VehicleBooking 而不是 Vehicle 本身的属性。

抛弃内部类，不要在构造函数中执行输入。从输入构造（即传入）或使用构建器。**

# android - 巨大的滚动视图布局减慢了应用程序

> ID：12674222
> 
> 赞同：0
> 
> 时间：2012-10-01T13:25:48.120
> 
> 标签：android, android-activity, scrollview

我在项目的滚动视图中遇到了一些问题。我必须在我的申请中填写一个巨大的表格。我把它们放在滚动视图中。我在那个滚动视图中有超过 70 行。问题是活动变慢了，当我试图插入编辑文本时，它的执行速度非常慢。加载活动时，显示屏幕需要太多时间。我知道单个活动中有很多视图，因此它变得越来越慢。但在我的应用程序中，我需要在滚动中的单个活动中实现此表单。任何人都可以建议我任何更好的想法来实现这一点。

圣努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:32:05.327

如果你有很多行，你能不能把它们放在一个负责自己滚动的 ListView 中。我在列表视图中有几百行，它滚动得非常快。此外，使用“Holder”模式重复使用单个视图。[这是对持有人模式](http://www.vogella.com/articles/AndroidListView/article.html)的一个很好的参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:30:39.580

You Should Use Custome ListView for This.[Read This Tutorial](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:38:43.377

您如何看待创建列表视图活动并通过列表项实现您的控件。在这种情况下，您应该覆盖列表视图适配器的 getView （每个控件的特定视图实现（位置 0 - 第一个控件，位置 1 秒......等，使用 switch 语句或类似的东西）

这种方法的好处是“轻松”创建控件：列表视图将只创建它可以在屏幕上显示的项目，其他视图将“按需”创建

使用布局 ID 创建以下数组： `int[] layouts = new int[]{R.layout.button_layout, R.layout.spinner_layout, R.layout.two_checkboxes, ... etc}`

并分别为每个项目创建布局文件。然后在 getView 方法中的特定位置膨胀它们。

# android - 在活动之间切换的意图杀死了我的第二个活动

> ID：12674226
> 
> 赞同：0
> 
> 时间：2012-10-01T13:26:03.280
> 
> 标签：android, android-intent, android-activity

这是我的问题：我的应用程序中有多个活动，其中两个有点“特殊”。Activity A 是 home 类型的 Activity，用来启动其他的 Activity。它还包含一些其他信息，可以从后台更新（使用 onNewIntent）。在清单中，我将其声明为 singleTop。它为结果启动其他活动，因此它不能是 singleTask 或 Instance（startActivityForResult 不适用于它们）。Activity B 是一个独立的 Activity，它在某些事件上启动，也声明为 singleTop。它还为结果启动其他活动，并使用其 onNewIntent。我有两个单独的通知，它们链接到相应的活动。我两个都用

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

正常流程是：

1.  A 正在运行
2.  发生了一些事情 - B 启动
3.  如果用户按下主页按钮，我有两个通知 A 和 B

问题是：如果用户按下 A 的通知，A 会启动，但是 B 会被杀死（由于 clear_top**标志**）

我读过这篇文章 - [http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html) 据我了解，FLAG_ACTIVITY_NEW_TASK 应该在单独的任务中启动活动，FLAG_ACTIVITY_CLEAR_TOP 在这种情况下不应该杀死 B .

一种解决方法是重新编写逻辑，使它们成为 singleTasks 并处理 onNewIntent 中其他活动的结果，但如果有其他解决方案，我不喜欢这样做。我也试过

```
FLAG_ACTIVITY_REORDER_TO_FRONT | FLAG_ACTIVITY_SINGLE_TOP 
```

和

```
FLAG_ACTIVITY_MULTIPLE_TASK | FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_SINGLE_TOP | FLAG_ACTIVITY_CLEAR_TOP 
```

启动 B，但都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:38:29.197

我的问题是，这两个活动都在同一个任务上运行。尽管文档 FLAG_ACTIVITY_NEW_TASK 不会在新任务中启动 Activity - 它会将 . 您必须在该特定活动的清单中使用 android:taskAffinity 并将其设置为唯一值。只有这样，它才会在新任务中启动。这样，用于 A 的 FLAG_ACTIVITY_CLEAR_TOP 不会破坏 B。

# javascript - JavaScript KeyDown 冲突

> ID：12674236
> 
> 赞同：0
> 
> 时间：2012-10-01T13:26:24.297
> 
> 标签：javascript

我不知道如何解决这个问题：当我按住**左键+空格**键时，动画可以工作，但是当我按住**左键**（不离开它）然后按**空格**键（一次，一直按住左键）时，动画会跳转，但不会向左移动...即使我按下其他键，动画也会停止**（要重置它，我必须全部离开）**。有人可以解释我为什么会这样并给我一些实用的解决方案吗？非常感谢你！这是代码：

```
<style>
#map{
    position:relative;
    height:220px;
    width:800px;
}
#character{
    height:100px;
    width:100px;
    position:absolute;
    bottom: 10px;
    left: 0px;
    z-index:1;
}
</style>
<div id="map"><div id="character"><img src="images/bart.gif"></div></div>
<script>
enableJump = true;
jump = function(){
    if(enableJump){ enableJump = false;
        salta = function(){
            if(flagY){
                posY++;
                if(posY >= 90) flagY = false;
                jj = document.getElementById('character').style.bottom=posY;
            }
            else{
                posY--;
                jj = document.getElementById('character').style.bottom=posY;
                if(posY < 10){
                    flagY = true;
                    clearInterval(j);
                    enableJump = true;
                    up = false;
                }
            }
        }
        j = setInterval(salta,8);
    }
}
up = false; dx = false;
document.onkeydown = function(evt){
    code = evt.keyCode;
    if(code == 32) up=true;
    if(code == 39) dx=true;
    moveCharacter();
}
document.onkeyup = function(evt){
    code = evt.keyCode;
    if(code == 32) up=false;
    if(code == 39) dx=false;
}
posX = 10; posY = 10; flagY = true; var j;
moveCharacter = function(){
    if(dx == true && up == true){
        jump();
        posX+=10;
        x1 = document.getElementById('character').style.backgroundImage='url(images/character_left.gif)';
        temp = document.getElementById('character').style.left=posX;
    }
    else if(dx){
        posX+=10;
        x1 = document.getElementById('character').style.backgroundImage='url(images/character_left.gif)';
        temp = document.getElementById('character').style.left=posX;
    }
    else if(up){ jump(); }
}
</script> 
```

代码已清理（没有跳转但有同样的问题，按住左键并按下另一个键它会停止，我必须让它重置它）

```
<script>
var dx = false;
var posX = 10;
var posY = 10;
document.onkeydown = function(evt){
    if(evt.keyCode == 39) dx=true;
    moveCharacter();
}
document.onkeyup = function(evt){
    if(evt.keyCode == 39) dx=false;
}
moveCharacter = function(){
    if(dx){
        posX+=10;
        document.getElementById('character').style.left=posX;
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:07:55.010

`keydown`JavaScript 仅在按下最后一个键时重复该事件。您需要存储被按下的键的状态，同时监听`keydown`和`keyup`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:47:33.220

这可能无法回答您的问题，但会帮助您更好地设计游戏逻辑：http: [//jsfiddle.net/N2UYx/](http://jsfiddle.net/N2UYx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:43:07.773

最后我解决了这个问题：功能keydown，keyup，movecharacter被删除。我补充说：

```
var keysDown = {};
try {
    if (window.addEventListener) {
        window.addEventListener("keydown", function (v) {keysDown[v.keyCode] = true;}, false);
        window.addEventListener("keyup", function (v) {delete keysDown[v.keyCode];}, false);
    } else if (document.attachEvent) {
        document.attachEvent("onkeydown", function (v) {keysDown[v.keyCode] = true;});
        document.attachEvent("onkeyup", function (v) {delete keysDown[v.keyCode];});
    } else if (window.attachEvent) {
        window.attachEvent("onkeydown", function (v) {keysDown[v.keyCode] = true;});
        window.attachEvent("onkeyup", function (v) {delete keysDown[v.keyCode];});
    } else {
        document.addEventListener("keydown", function (v) {keysDown[v.keyCode] = true;}, false);
        document.addEventListener("keyup", function (v) {delete keysDown[v.keyCode];}, false);
    }
} catch (e) {
    alert("Keys don't work!\nError: "+e);
}
...
var update = function () {
    if (38 in keysDown) { // Player holding up
        ..
    }
    if (40 in keysDown) { // Player holding down
        ..
    }
    if (37 in keysDown) { // Player holding left
        ..
    }
    if (39 in keysDown) { // Player holding right
        ..
    }
};
setInterval(update,10); 
```

参考：[http](http://www.lostdecadegames.com/how-to-make-a-simple-html5-canvas-game/) ://www.lostdecadegames.com/how-to-make-a-simple-html5-canvas-game/ http://stackoverflow.com/questions/9507200/why-keydown-listener-doesnt-work-即内

它适用于 Chrome、Firefox、IE7/8/Quirks 模式（不适用于文档模式 IE9 标准） 感谢您的关注！

# entity-framework - 为什么我在使用 WCF 服务应用程序的 EF5 时遇到问题？

> ID：12674237
> 
> 赞同：0
> 
> 时间：2012-10-01T13:26:26.500
> 
> 标签：entity-framework, wcf-data-services

我之前创建了 EF 数据服务，但每次尝试创建 EF5 - WCF 服务应用程序时都会收到此消息。

> 无法加载操作“ProcessRequestForMessage”，因为它具有 System.ServiceModel.Channels.Message 类型的参数或返回类型，或者具有 MessageContractAttribute 和其他不同类型参数的类型。当使用 System.ServiceModel.Channels.Message 或带有 MessageContractAttribute 的类型时，该方法不得使用任何其他类型的参数。

1.  我创建 WCF 服务应用程序，
2.  添加引用 System.Data.Services
3.  生成 EF 模型
4.  将代码生成策略更改为“默认”并删除“.tt”
5.  将 DataService< DBEntities> 继承到我的服务类 (Service1)
6.  添加所需的“InitilizeService”例程
7.  web.config 没有变化

当我尝试调试时，我收到了消息。我正在使用 VS2012

自从我使用数据服务以来已经有一段时间了，但是查看我的旧 VS2010 项目，我已经修改了 web.config 以包含一个服务，该服务的端点以“System.Data.Services.IRequestHandler”作为合同。

我也再次尝试了，并将绑定更改为“webHttpBinding”，这似乎也不起作用。有任何想法吗？

如果一切都失败了，我想我可以使用 Open Access ORM 及其内置的服务生成工具，因为我至少可以让它工作。

此致

克里斯·利奇

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:29:22.823

添加：Factory="System.Data.Services.DataServiceHostFactory, Microsoft.Data.Services, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T09:58:11.367

我遇到了同样的错误，但我注意到我的服务主机标记文件中缺少“Factory”属性。因此，单击您的数据服务文件并选择“查看标记”并检查是否有工厂属性并且它是正确的：

前：

```
<%@ ServiceHost Language="C#" Debug="true" 
    Service="ServiceNamespace.ServiceClassName"    
    CodeBehind="ServiceClassName.svc.cs" %> 
```

后：

```
<%@ ServiceHost Language="C#" Debug="true" 
    Service="ServiceNamespace.ServiceClassName"
    Factory="System.ServiceModel.Activation.WebServiceHostFactory, System.ServiceModel.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"      
    CodeBehind="ServiceClassName.svc.cs" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T14:14:10.383

没有直接弄清楚，但是我从这个网站[http://code.msdn.microsoft.com/windowsdesktop/WCF-Data-50-for-OData-v3-53074189](http://code.msdn.microsoft.com/windowsdesktop/WCF-Data-50-for-OData-v3-53074189)下载了演示项目并修改了数据服务然后 Voala . 没有更多错误

希望这对其他人有帮助

为尝试的人干杯。

# c# - 在 XAML 中，如何将项目彼此相邻放置在网格中

> ID：12674238
> 
> 赞同：3
> 
> 时间：2012-10-01T13:26:33.147
> 
> 标签：c#, visual-studio-2010, xaml

好的，Xaml 是我的弱点之一，所以我真的很感激这方面的一些帮助......我想要实现的是在列表框中添加标题、姓名、姓氏，如下所示：

John Doe 先生 John Doe
女士
Jane Doe 女士

这是我到目前为止的 xaml，结果是名称 title 和 surname 相互重叠：

```
<DataTemplate>
                <Grid>
                    <TextBlock Text="{Binding Title}"  Width="60" Height="25" Margin="4" HorizontalAlignment="Left" />
                    <TextBlock Text="{Binding FirstName}" Width="60" HorizontalAlignment="Center" />
                    <TextBlock Text="{Binding LastName}" Width="60" HorizontalAlignment="Right" />

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>
                </Grid>
            </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:29:08.940

在每个`TextBlock`你需要设置`Grid.Column="?"`哪里？是 0、1 或 2。

如果您不指定列（或行），元素将默认转到 (0,0)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:29:21.050

使用. `Grid.Column`_ `TextBlock`IE：

```
<TextBlock Text="{Binding Title}"  Width="60" Height="25" Margin="4" HorizontalAlignment="Left" Grid.Column="0"/> 
<TextBlock Text="{Binding FirstName}" Width="60" HorizontalAlignment="Center" Grid.Column="1" /> 
<TextBlock Text="{Binding LastName}" Width="60" HorizontalAlignment="Right" Grid.Column="2" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:30:49.657

For each element in the grid, if you want them in an explicit Row or Column, you must specify them. To do this you would use `Grid.Row="X"` or `Grid.Column="X"`. If you leave these off, the default value is 0.

In your case, you would want to do the following.

```
<DataTemplate>
    <Grid>
        <TextBlock Text="{Binding Title}"  Width="60" Height="25" Margin="4" HorizontalAlignment="Left" Grid.Column="0" />
        <TextBlock Text="{Binding FirstName}" Width="60" HorizontalAlignment="Center" Grid.Column="1" />
        <TextBlock Text="{Binding LastName}" Width="60" HorizontalAlignment="Right" Grid.Column="2" />

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
    </Grid>
</DataTemplate> 
```

# sql - 在 VBA 中引用查询结果，是否可以使用 SQL？

> ID：12674242
> 
> 赞同：2
> 
> 时间：2012-10-01T13:27:06.180
> 
> 标签：sql, database, vba, ms-access

基本上我需要找到给定数据集中的最大值并记录该值以将其应用于另一条记录。

我尝试使用 SQL“SELECT MAX(SCID) FROM [Stock Conversion];” 但这只是将这段 SQL 输入到表上的 Field 中。

现在我创建了一个查询来查找该值，有没有办法在代码中引用查询的结果来实现这一点？

这是上下文的代码：

```
Private Sub listResult_DblClick(Cancel As Integer)

Dim sc1 As DAO.Recordset
Set sc1 = CurrentDb.OpenRecordset("Stock Conversion Items", dbOpenDynaset)
Dim strSource3 As String

strSource3 = DONT KNOW

sc1.AddNew
sc1.Fields("[SCID]").Value = strSource3
sc1.Fields("[Result PC]").Value = Me.listResult.Column(0)
sc1.Fields("[Status]").Value = "NEW"
sc1.Update

End Sub 
```

在此先感谢，鲍勃 P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:46:34.030

使用 MS Access，您可以使用域聚合函数：

```
strSource3 = DMax("MyField","MyTable") 
```

如果你想使用 SQL，那么：

```
Dim rs As Recordset

Set rs = CurrentDB.Openrecordset( _
   "SELECT MAX(SCID) As MaxSCID FROM [Stock Conversion];")
strSource3 = rs!MaxSCID 
```

在多用户环境中对最大值非常小心。由于另一个用户输入数据，它们可能会发生变化。

来自聊天

似乎可以使用[LasModified](http://msdn.microsoft.com/en-us/library/office/ff195859.aspx)属性从以前的代码中获取所需的 ID。这在多用户环境中要安全得多。

```
Dim rs As DAO.Recordset
Set rs = CurrentDb.OpenRecordset("Table1", dbOpenDynaset)

rs.AddNew
rs!AField = "abc"
rs.Update 
rs.Bookmark = rs.LastModified 
strSource3 = rs!SCID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:50:51.550

尝试这个：

```
strSource3 = dmax("[field_name]","table_name") 
```

# ruby - Ruby 无法找到 gem 或“require”文件

> ID：12674244
> 
> 赞同：0
> 
> 时间：2012-10-01T13:27:09.897
> 
> 标签：ruby, rubygems

一个简单的 Ruby 代码

```
require 'rest-client'
server = "http://localhost:3000"
response = RestClient.get(server + "/posts.json") 
```

它抛出一个异常

```
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- rest-client (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/alex/app1.rb:41:in `<main>'
[Finished in 0.1s with exit code 1] 
```

`rest-client gem`已安装。而且我使用的是 Ruby`1.9.3`而不是更多，我的机器上`1.9.1.`没有安装 ruby ​​。`1.9.1`

```
rvm rubies

   ruby-1.9.2-p290 [ x86_64 ]
   ruby-1.9.2-p320 [ x86_64 ]
=* ruby-1.9.3-p194 [ x86_64 ] 
```

这是怎么回事，我要摆脱它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:32:05.570

Ruby 1.9.3（和 1.9.2）将 gem 存储在 1.9.1 文件夹中（我知道，这很尴尬）。

如果项目使用 Bundler，请确保在 bundle 中列出依赖项`Gemfile`。此外，确保 gem 存在于特定的 Ruby 版本中。

```
$ gem list 
```

也许您为 Ruby 1.9.2 安装了它，而您现在使用的是 1.9.3。

# lucene - 游戏框架 2 的搜索模块

> ID：12674246
> 
> 赞同：6
> 
> 时间：2012-10-01T13:27:21.937
> 
> 标签：lucene, playframework-2.0, elasticsearch

我目前正在探索 Play framework 2，我必须说我印象深刻！只有一件事我（目前）无法解决，那就是搜索实现。

目前我发现： [搜索模块](http://www.playframework.org/documentation/1.0/search)和[弹性搜索](http://www.playframework.org/modules/elasticsearch)，但两者都适用于 Play 1

他们在 Play 2 中工作吗？

我来自 Spring and Seam 世界，其中 Hibernate Search 非常普遍。有没有实现呢？你如何玩 2 人实现你的搜索功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:38:00.683

AFAIK，Play 2.0 中没有任何用于全文搜索的核心模块

GitHub 上有一个项目将 ElasticSearch 整合到 Play 1.x：[https](https://github.com/cleverage/play2-elasticsearch) ://github.com/cleverage/play2-elasticsearch 。

还有一个示例如何在 Play 2.0 上的每个 Ebean 操作后更新 ES：[https ://groups.google.com/forum/#!topic/play-framework/cZqt6U-2LHg%5B1-25%5D](https://groups.google.com/forum/#!topic/play-framework/cZqt6U-2LHg%5B1-25%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T17:11:49.447

如果您已经在使用关系数据库，则从 Postgres 全文索引开始（mysql 5.6 全文不处理词干提取，但它也可能满足您的需求）。如果您已经在使用的数据库满足您的需求，那么不必同步/管理更多堆栈复杂性非常方便。

# css - Twitter Bootstrap：如何对齐图像上的文本，以便在调整浏览器大小时缩放？

> ID：12674248
> 
> 赞同：2
> 
> 时间：2012-10-01T13:27:29.547
> 
> 标签：css, twitter-bootstrap

我在尝试将一些文本和按钮放在大图像上时遇到问题。我已经设法用 CSS 做了一个部分解决方案，但我的问题是，每当我缩小浏览器窗口时，文本 + 按钮的大小不会随图像缩小……这让一切都变得很丑陋。

有一些（简单的）解决方案吗？

我的 CSS：

```
titleImageDiv { 
  position: relative; 
  width: 100%; /* for IE 6 */
}

#titleImageCaption { 
  position: absolute; 
  top: 10%;
  left: 2%;
}

#titleImageButton { 
    position: absolute;
    top: 75%;
    left: 2%; 
} 
```

我的 HTML

```
<div class='row'>
  <div class='span12' id='titleImageDiv'>
    <img alt='Image' src='/assets/my_caption_pic.jpg'>
    <h1 id='titleImageCaption'>SOME CAPTION</h1>
    <form action="/someaction class="button_to" method="post">
      <div>
      <input class="btn btn-large" id="titleImageButton" type="submit" value="PRESS COOL BUTTON!" />
      </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:34:47.033

尝试使用媒体查询.... 例如：如果查看区域小于 600 像素，则将应用此 CSS。

```
@media screen and (max-width: 600px) {
  #titleImageDiv { ..}

#titleImageCaption { }

#titleImageButton { }

} 
```

您可以使用具有不同 css 的不同查询....希望以下链接对您有所帮助...`http://webdesignerwall.com/tutorials/css3-media-queries`

# android - Android 位图、自定义 ImageSwitcher 和内存不足错误

> ID：12674250
> 
> 赞同：0
> 
> 时间：2012-10-01T13:27:32.123
> 
> 标签：android, memory-leaks

我已经实现了一个随机图像切换器，它获取一组图像，然后随着时间的推移循环它，从一个线程接收消息。

```
package com.silice.smallshi;

import com.silice.smallshi.R;

import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.AnimationUtils;
import android.widget.ImageButton;
import android.widget.ImageSwitcher;
import android.widget.ImageView;
import android.widget.ViewSwitcher.ViewFactory;
import android.widget.RelativeLayout.LayoutParams;
// esta clase es una vista custom basada en un ImageSwitcher que realiza transiciones de manera aleatoria
public class RandomSlider extends ImageSwitcher implements ViewFactory {
    private RandomSliderManager thisManager;
    private Handler innerHandler;
    private int ImagesId[] = {R.drawable.image1,R.drawable.image2,R.drawable.image3,R.drawable.image4,R.drawable.image5};

    public RandomSlider(Context context) {
        this(context,null);
    }

    public RandomSlider(Context context, AttributeSet attr) {
        super(context,attr);
        this.setFactory(this);
        this.setInAnimation(AnimationUtils.loadAnimation(getContext(), android.R.anim.fade_in));
        this.setOutAnimation(AnimationUtils.loadAnimation(getContext(), android.R.anim.fade_out));
        innerHandler = new Handler(){
            @Override
            public void handleMessage(Message msg) 
            {
                Bundle b = msg.getData();
                int index = b.getInt("index");
                setImageResource(ImagesId[index]);
            }
        };
    }
    // funcion que permite empezar a cambiar imagenes de modo random 
    public void startRandom(){
        thisManager = new RandomSliderManager();
        thisManager.setHandler(innerHandler);
        thisManager.start();
    }
    // esta funcion detiene el cambio de imagen de manera random
    public void stopRandom(){
        if(thisManager.isAlive()){
            thisManager.interrupt();
            thisManager = null;
        }
    }
    public View makeView() {
        ImageView iView = new ImageView(getContext());
        iView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        iView.setLayoutParams(new
                    ImageSwitcher.LayoutParams(
                                LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
        iView.setBackgroundColor(0xFF000000);

        return iView;
    }
    @Override
    protected void onFinishInflate(){
        super.onFinishInflate();
        this.startRandom();
    } 
```

在 RandomSlider 类中

```
package com.silice.smallshi;

import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Log;
// este es el responsable de pedirle al RandomSlider que cambie de imagen
public class RandomSliderManager extends Thread{
    private Handler innerHandler, objHandler;
    private boolean running = false;
    private int lastindex = 0;

    @Override
    public void run(){
        /*Looper.prepare();
        innerHandler = new Handler();
        Message message = innerHandler.obtainMessage();
        innerHandler.dispatchMessage(message);
        Looper.loop();*/
        running = true;
        while(running){
            try {
                int index = (int)(Math.random() * ((4) + 1));
                Log.v("Index:", ""+index);
                if(index!=lastindex){
                    lastindex = index;  
                }else{

                    Bundle b = new Bundle();
                    b.putInt("index", index);
                    Message msg = new Message();
                    msg.setData(b);
                    objHandler.sendMessage(msg);
                    Thread.sleep(7000);
            }
            } catch (InterruptedException e) {
                running = false;
            }
        }
    }

    public boolean isRunning(){
        return running;

    }

    public void setHandler(Handler rHandler){
        objHandler = rHandler;
    }

} 
```

这是 RadomSliderManager 类，其中线程每 x 秒向随机滑块发送消息，说嘿这是新的随机索引更改它。有时我的应用程序会让我内存不足，尤其是在 4.0+ 设备上。我怎样才能弄清楚这个错误。

# shell - 在 csh 中转义 $

> ID：12674254
> 
> 赞同：2
> 
> 时间：2012-10-01T13:27:35.693
> 
> 标签：shell, csh

我怎样才能`$`在 csh 中逃脱？在 <双引号> ( `""`) 内。我正在尝试这样做，但无法逃脱 <dollar> 符号 ( `$`)

```
alias e "echo \\!:2-$" 
```

这有效，但不足以满足我的需求

```
alias e echo \\!:2-$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:36:56.317

尝试使用单引号代替 - `alias e 'echo \!:2-$'`。您还需要反斜杠转义历史替换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-09T13:22:42.150

对这个老问题提出的答案是不正确的。

它*可以*在 CSH 和其他 shell 中完成，无论使用哪种引号，但对于某些 shell，如果使用双引号，则需要先退出双引号。

以下应该适用于（几乎）所有的 shell，所以为了简单起见，我使用它。我使用反引号来获取命令的输出，因为它更易于遵循并且避免需要添加额外的“$”符号（更现代的风格）。注意“$”的不同用法，实际获取变量和作为文字（为了方便起见，在单引号内和外单引号）。

这应该适用于大多数 shell。

**示例命令：**

```
echo "My terminal is $term, first file found in /dev is </dev/`ls /dev | head -n 1`>, the
dollar symbol is '"`echo '$'`"', and a newspaper costs "`echo '$'`"2.50." 
```

**输出：**

```
My terminal is xterm, first file found in /dev is </dev/acpi>, the dollar symbol
is '$', and a newspaper costs $2.50. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-19T18:58:27.973

如果您确实需要`$`在双引号字符串中使用字符，请尝试为该字符设置一个变量（最好在 ~/.tcshrc 文件中）。

例如，这是一个别名，它在给定命令的情况下以“filename.old24.ext”格式创建顺序编号的备份文件`bak filename ext`：

```
set DOLLAR='$'
alias bak '/bin/ls -1v \!:1.old*.\!:2 | tail -n 1 | awk -F"." "{printf substr(${DOLLAR}2,4)+1}" | xargs -0 -ISEQ cp -ip \!:1.\!:2 \!:1.oldSEQ.\!:2' 
```

注意，在`${DOLLAR}`传递给 awk 的字符串中使用了 。`$`当 shell 执行别名时，它将被实际字符替换。

# c++ - VC++ 2010：从 VC6++ 转换后显示打开对话框出错

> ID：12674261
> 
> 赞同：0
> 
> 时间：2012-10-01T13:28:05.797
> 
> 标签：c++, windows, file, mfc, dialog

将 VC++ 6 项目转换为 VC++ 2010 后，我修复了所有错误，但其中一个我找不到解决方案。我在构建时收到的错误：

**错误 1 ​​错误 C2440: 'static_cast' : 无法从 'void (__thiscall CUploadDlg::* )(void)' 转换为 'LRESULT (__thiscall CWnd::* )(WPARAM,LPARAM)'**

错误代码：

```
BEGIN_MESSAGE_MAP(CUploadDlg, CDialog)
    //{{AFX_MSG_MAP(CUploadDlg)
    ON_MESSAGE(PARSE_DB_MSG, ParseUserDb)
    //}}AFX_MSG_MAP
END_MESSAGE_MAP() 
```

被调用方法的代码：

```
void CUploadDlg::ParseUserDb()
{
    m_parse_db.ShowWindow(SW_SHOW);    
    m_block_numbers = getBlockNumber();    
    Sleep(1200);    
//  CMainFrame *pFrame = (CMainFrame *)AfxGetMainWnd();    
//  if(pFrame)  pFrame->UpdateDataBase(m_Path);    
    m_parse_finish.ShowWindow(SW_SHOW);    
//  Sleep(500);    
//  pFrame->SaveDataBase();//    
//  CDialog::OnCancel();
    //return 0L;
} 
```

项目类型：应用程序，在静态库中使用 MFC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:35:55.183

查看 MFC 消息映射的消息破解者期望的函数原型。ON_MESSAGE() 是一个通用包装器，除了基本的 msgID（它是如何分发到地图的）之外，它不知道如何破解给定消息。剩余的参数必须传递给消息处理程序，因此它期望 ParseUserDb 看起来像这样：

```
LRESULT CUploadDialog::ParseUserDb(WPARAM wParam, LPARAM lParam)
{
// your code; don't forget a return value, likely 0L;
}; 
```

# lua - 如何提取非固定字符串的数据

> ID：12674263
> 
> 赞同：2
> 
> 时间：2012-10-01T13:28:24.243
> 
> 标签：lua, pattern-matching, design-patterns, string-matching

我有一些链接在**Lua**[`magnet`](http://en.wikipedia.org/wiki/Magnet_uri)中作为字符串提交。这些磁铁通常具有以下格式：

 **```
magnet:?xt=<hashing>&xl=<size>&dn=<name> 
```

但随着客户的不同，磁铁也可以生成为：

```
magnet:?xl=<size>&xt=<hashing>&dn=<name> 
```

从这种类型的字符串中，我想在**`xl=`**（纯数字）之后获取数据，之后**`xt=`**由`%w`and `:`（`%w`字母数字匹配在哪里）组成。

目前我正在使用两个单独的语句来获取这些值。这可以在单个语句中实现`string.find()`吗？

```
sInput = "magnet:?xt=urn:tree:tiger:ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890ABC&xl=1234567890123456789&dn=This+Is+The+Name+Of+File.EXT"
local _, _, sHash = sInput:find( "xt=([%w%:]+)" )
local _, _, iSize = sInput:find( "xl=(%d+)" ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:48:27.533

我认为你最好将所有值收集到一个表中：

```
local sInput="magnet:?xt=<hashing>&xl=<size>&dn=<name>"
local s=sInput:match("%?(.*)$").."&"
local t={}
for k,v in s:gmatch("(%w+)=(.-)&") do
        t[k]=v
end 
```

如果您想限制以开头的键，请`x`使用`gmatch("(x%w+)=(.-)&")`. 如果您知道这一点`xt`并且`xl`永远不是列表中的最后一项，您可以简单地执行以下操作：

```
for k,v in sInput:gmatch("(x%w+)=(.-)&") do 
```**

# ios - iOS 6 - viewDidUnload 迁移到 didReceiveMemoryWarning？

> ID：12674268
> 
> 赞同：33
> 
> 时间：2012-10-01T13:28:56.490
> 
> 标签：ios

因此，`viewDidUnload`从 iOS 6 开始已弃用，我现在需要做什么？

删除它，将它的所有内容迁移到 中`didReceiveMemoryWarning`，或者留下它，不做任何事情`didReceiveMemoryWarning`？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-10-01T15:54:20.567

简短的回答是，在许多情况下，您不需要更改任何内容。而且，您当然*不想*简单地将所有内容迁移`viewDidUnload`到`didReceiveMemoryWarning`.

通常，我们大多数人都会设置对in的`IBOutlet`引用（主要是因为 Interface Builder 会为我们放置它）并在. 如果您就是这样做的，那么您可能不需要任何代码更改。`nil``viewDidUnload``didReceiveMemoryWarning`

根据 iOS 6`viewDidUnload`文档：

> 在低内存条件下不再清除视图，因此永远不会调用此方法。

因此，您*不*希望将`IBOutlet`引用设置移动到`nil`任何地方，因为不再清除视图。将它们设置为`nil`in`didReceiveMemoryWarning`或类似的东西是没有意义的。

但是，如果您通过`viewDidUnload`在`didReceiveMemoryWarning`. 但话又说回来，我们大多数人已经在那里有了它。

最后，如果你在 中释放任何东西`didReceiveMemoryWarning`，只要确保你的代码在你弹回时不依赖它们被重新创建`viewDidLoad`，因为它不会被调用（因为视图本身从未被卸载）。

正如 applefreak 所说，这取决于你在`viewDidUnload`. 如果您用您的`viewDidUnload`.

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-03-01T10:46:51.530

**简短的回答：**

切勿使用 -didReceiveMemoryWarning 进行平衡拆除，因为它可能永远不会或多次调用。如果您在 -viewDidLoad 中进行了设置，请将清理代码放在 -dealloc 中。

* * *

**长答案：**

给出一个笼统的答案并不容易，因为这确实取决于具体情况。但是，有两个重要的事实需要说明：

**1\. -viewDidUnload 已弃用，实际上从 iOS6 及更高版本开始从未调用过。所以，如果你有你的清理代码，你的应用程序会在这些操作系统版本下泄漏**

**2\. -didReceiveMemoryWarning 可能会被调用多次或从不调用。因此，对于平衡拆解您在其他地方创建的对象来说，这是一个非常糟糕的地方**

我的答案是查看您使用属性的常见情况，例如：

```
@property (strong) UIView *myCustomView  // <-- this is what I'm talking about
@property (assign) id *myDelegate 
```

在这里您必须进行一些清理，因为您创建并拥有 customView 或 InterfaceBuilder 创建了它，但您保留了它。在 iOS 6 之前你可能会做这样的事情：

```
- (void)viewDidLoad {
    self.myCustomView = [[UIView alloc] initWithFrame:…];
}
- (void)viewDidUnload {  // <-- deprecated!
    [myCustomView removeFromSuperView];
    self.myCustomView = nil;
} 
```

...因为（再次）`myCustomView`是保留的财产，由您创建和拥有，因此您必须小心并在最后“释放”它（将其设置为 nil）。

在 iOS 6 中，替换`-viewDidUnload`保留属性并将其设置为 nil 的最佳位置可能是`-dealloc`. 还有`viewWillAppear`and `viewDidDisappear`，但这些与视图/控制器的生命周期无关，而是与显示周期相关（另一方面， -...appear 方法非常适合取消/注册通知侦听器！）。因此，在每次显示之前和之后创建和销毁视图可能并不合适。`dealloc`是我们唯一可以确定在控制器生命周期结束时调用的方法。`[super dealloc]`请注意，如果您使用 ARC ，则不得调用：

```
- (void)dealloc {
    self.myCustomView = nil;
} 
```

但是，如果您`viewDidLoad`用于执行一些可以在内存不足的情况下释放的视图相关设置，那么其他显示如何处理内存不足情况的帖子是完全有效的。在这种情况下，您也可以使用 dealloc，但您必须检查您的视图是否仍然存在。

## ViewController 的生命周期

也许查看 ViewController 的一般生命周期也很有帮助：

这是 viewController 的生命周期*（斜体表示这些方法可能会被多次调用）*：

> *   init：已加载 ViewController，尚无可用的界面元素（IBOutlet）（全部为零）
> *   viewDidLoad：nib/storyboard 已经加载，所有对象都可用。用户什么都看不到
> *   *viewWillAppear：即将显示的视图*
> *   *viewDidAppear：视图在屏幕上*
> *   *viewWillDisappear：视图即将消失*
> *   *viewDidDisappear：刚刚从窗口中取出的视图*
> *   viewDidUnload：在 iOS6/7 中从不调用
> *   *didReceiveMemoryWarning：您不知道是否、何时以及多久调用一次。在 iOS6 之前它可能会卸载视图，在 iOS6 之后它只是清除屏幕外缓存或什么都不做*
> *   dealloc：viewController 即将被销毁

因此，总结起来有多种可能性；现在去哪里真的取决于在哪里初始化了什么：

*   -dealloc 如果在 -init: 或 -viewDidLoad: 中创建
*   -viewWill/DidDisappear（与 -viewWill/DidAppear 配对）
*   -didReceiveMemoryWarning（可能会或可能不会被调用）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-01T09:57:58.780

如果您需要知道您的 UIViewController 是否正在关闭，您可以将此代码添加到您的 viewWillDisappear：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    if ([self isBeingDismissed] || [self isMovingFromParentViewController])
    {
        // Do your viewDidUnload stuff
    }
} 
```

它不会与 viewDidUnload 在视图控制器生命周期中同时调用一次，但在大多数情况下可以满足您的需要！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T14:55:18.470

取决于您在做什么，`viewDidUnload`但您可以使用`didReceiveMemoryWarning`或`dealloc`发布数据。看到[这个](https://stackoverflow.com/questions/12603336/ios6-viewdidunload-deprecated)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-05T23:40:54.700

在大多数典型情况下，可以使用此方法代替旧的 viewDidUnload。

```
// The completion handler, if provided, will be invoked after the dismissed controller's viewDidDisappear: callback is invoked.
- (void)dismissViewControllerAnimated: (BOOL)flag completion: (void (^)(void))completion NS_AVAILABLE_IOS(5_0); 
```

Swift 2017 语法：

```
override func dismiss(animated flag: Bool, completion: (() -> Void)? = nil) {
    if (yourChildViewController  != nil) {
      print("good thing we did this!")
    }
    yourChildViewControllerProperty = nil
    super.dismiss(animated: flag, completion: completion)
} 
```

# charts - Highcharts plotbands 文本不应与列重叠

> ID：12674271
> 
> 赞同：1
> 
> 时间：2012-10-01T13:29:10.903
> 
> 标签：charts, highcharts

在下面的示例中，您将看到我的列绘制在我的 plotband 文本上。我想将列区域向右移动或定义一些边距，以便文本始终完全可见。

[例子](http://jsfiddle.net/CXCFR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:04:16.513

请看看[这个小提琴](http://jsfiddle.net/h8TYk/)。我把我的评论放在你需要的行上。

简而言之，我们在左侧创建了一个空类别，因此所有其他列都被推到了右侧。

# sql-server - SQL Server：转换为今天，然后增加 8 小时

> ID：12674274
> 
> 赞同：1
> 
> 时间：2012-10-01T13:29:13.277
> 
> 标签：sql-server, dateadd, datepart, string-to-datetime

`nextUpdate`可以是过去的任何日期时间值。我正在尝试将`nextUpdate`字段更新为今天的日期，但保持时间不变，然后添加 8 小时。

我明白了

> 将字符串转换为日期时间时出错

T-SQLe：

```
UPDATE 
    business.dbo.db_schedule  
SET 
    nextUpdate = DATEADD(hh, 8, CONVERT(datetime, CONVERT(VARCHAR(8), GETDATE(), 111) + ' ' + CONVERT(VARCHAR(8), nextUpdate, 108), 111))  
WHERE
    sno = 8 
```

`datetime`我所在位置的格式是 111

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:31:28.330

```
UPDATE business.dbo.db_schedule
SET nextUpdate= DATEADD(hh, 8,
                DATEADD(d, DATEDIFF(D,nextUpdate,Getdate()),
                          nextUpdate))
where sno=8 
```

# sql - 查找对某个表的所有外键引用

> ID：12674275
> 
> 赞同：1
> 
> 时间：2012-10-01T13:29:15.180
> 
> 标签：sql, tsql, sql-server-2005

我有一张表，我想找到所有其他外键的表。我认为这个线程有答案：[如何列出引用 SQL Server 中给定表的所有外键？](https://stackoverflow.com/questions/483193/how-can-i-list-all-foreign-keys-referencing-a-given-table-in-sql-server-2005)

但是在尝试了这些事情之后，它实际上并没有列出所有的表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:41:00.500

在这里，您有另一个代码片段，在`WHERE`子句的末尾，用您的表名替换。

```
SELECT
    K_Table = FK.TABLE_NAME,
    FK_Column = CU.COLUMN_NAME,
    PK_Table = PK.TABLE_NAME,
    PK_Column = PT.COLUMN_NAME,
    Constraint_Name = C.CONSTRAINT_NAME
FROM
    INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK
    ON C.CONSTRAINT_NAME = FK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK
    ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU
    ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (
            SELECT
                i1.TABLE_NAME,
                i2.COLUMN_NAME
            FROM
                INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
            INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2
                ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
            WHERE
                i1.CONSTRAINT_TYPE = 'PRIMARY KEY'
           ) PT
    ON PT.TABLE_NAME = PK.TABLE_NAME
 WHERE PK.TABLE_NAME = 'your_table_name' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:36:59.077

尝试这样的事情：

```
;WITH ReferencingFK AS 
(
    SELECT 
        fk.Name AS 'FKName',
        OBJECT_NAME(fk.parent_object_id) 'ParentTable',
        cpa.name 'ParentColumnName',
        OBJECT_NAME(fk.referenced_object_id) 'ReferencedTable',
        cref.name 'ReferencedColumnName'
    FROM 
        sys.foreign_keys fk
    INNER JOIN 
        sys.foreign_key_columns fkc ON fkc.constraint_object_id = fk.object_id
    INNER JOIN 
        sys.columns cpa ON fkc.parent_object_id = cpa.object_id AND fkc.parent_column_id = cpa.column_id
    INNER JOIN 
        sys.columns cref ON fkc.referenced_object_id = cref.object_id AND fkc.referenced_column_id = cref.column_id
)
SELECT 
    FKName,
    ParentTable,
    ParentColumnName,
    ReferencedTable,
    ReferencedColumnName
FROM 
    ReferencingFK
WHERE
    ReferencedTable = '**YourTableNameHere**'
ORDER BY 
    ParentTable, ReferencedTable, FKName 
```

# objective-c - 新的“非法尝试在不同上下文中的对象之间建立关系'xyz'”

> ID：12674276
> 
> 赞同：1
> 
> 时间：2012-10-01T13:29:16.107
> 
> 标签：objective-c, xcode, core-data

当尝试在第二个 NSManagedObjectContext 中添加核心数据对象时，我收到一条错误消息，指出非法尝试在不同上下文中的对象之间建立关系“信息”。但是，这两个实体位于相同的上下文中（至少，它们应该）。调试器给出相同的十六进制数。这段代码有什么问题？

```
-(void) loadHistoricalPrices
{
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

// Create context on background thread
if(document!=NULL)
{
    NSManagedObjectContext *context = NULL;
    NSNotificationCenter *nc =NULL;

    context = [[NSManagedObjectContext alloc] init];
    [context setUndoManager:nil];
    [context setPersistentStoreCoordinator: [document.managedObjectContext persistentStoreCoordinator]];

    // Register context with the notification center
    nc = [NSNotificationCenter defaultCenter];
    [nc addObserver:self
           selector:@selector(mergeChanges:)
               name:NSManagedObjectContextDidSaveNotification
             object:context];

    NSEntityDescription * infoEntity;
    infoEntity = [NSEntityDescription entityForName:@"Info" inManagedObjectContext:context];
    NSEntityDescription * historyEntity;
    historyEntity = [NSEntityDescription entityForName:@"History" inManagedObjectContext:context];

// fetching an object-array of info-entity, called result

    if([result count]>0)
    {

        NSArray * items;
       // getting items to insert into history-entity

        for(NSString * item in items)
        {
            NSArray * subs;
            subs=[item componentsSeparatedByString:@","];
            if([subs count]>5)
            {
                    HistoryMO * newHistory;

                    newHistory = [[[HistoryMO alloc] initWithEntity:historyEntity insertIntoManagedObjectContext:context] autorelease];
                    [newHistory setValue:[NSNumber numberWithDouble:[[subs objectAtIndex:4] doubleValue]] forKey:@"course"];
[newHistory setValue:infoMO forKey:@"info"];

// >>>>> CRASHES HERE

            }                
        }
    }

    // merge data
    if([[[context persistentStoreCoordinator] persistentStores] count]>0)
    {
        NSLog(@"saving...");

        error=NULL;
        [context save:&error];
        if (!error) [context reset]; else NSLog(@"error saving historic prices %@",[error localizedDescription]);
        if (!error) NSLog(@"saved successfully");
    }

    [nc removeObserver:self];
    [context release];
}
[pool release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:01:40.100

如果 infoMO 来自同一上下文，则在以下行中调用 [context reset] 后它会失效：

`if (!error) [context reset]; else NSLog(@"error saving historic prices %@",[error localizedDescription]);`

所以你需要重新获取它。这就是 ChrisH 的解决方案奏效的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:19:52.897

从哪里来`infoMO`？看起来它正在发生在你有`// getting items to insert into history-entity`评论的地方。我的猜测是您正在使用不同的上下文来获取这些对象。`infoMO`您必须使用与插入到 中的对象相同的上下文来查找对象`HistoryMO`，否则上下文无法管理关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:37:01.523

很难从您的代码示例中分辨出来，但根据您的崩溃信息，您的`infoMO`对象来自另一个上下文。您不能在来自不同上下文的两个对象之间创建关系。

最简单的解决方案是使用 NSManagedObject 的 objectID 属性在当前上下文中获取对 infoMO 的引用。

假设您的 infoMO 实例属于 Info 类，您可以这样做：

```
Info *contextInfoMO = [context objectWithID:infoMO.objectID];
[newHistory setValue:contextInfoMO forKey:@"info"]; 
```

# arduino - 模拟读取示例不起作用

> ID：12674278
> 
> 赞同：0
> 
> 时间：2012-10-01T13:29:18.730
> 
> 标签：arduino

我尝试从 arduino.cc 运行[ReadAnalogVoltage 示例](http://arduino.cc/en/Tutorial/ReadAnalogVoltage)并按照原理图使用电位器，但它始终在串行监视器上显示 1023 值。我也已经尝试过其他端口和其他电位器......解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:17:01.580

如果您在链接的页面中使用了该代码，您应该会在串行监视器中看到一个浮点值。即从 0.0 到 5.0 的值

你的电位器可能有问题。通过测试中间引脚和外部引脚之一之间的电阻，用万用表测试电位器的电阻，当您转动电位器时，电阻应该会发生变化。[这个页面有一些关于电位器如何工作的重要信息。](http://fddrsn.net/pcomp/examples/potentiometers.html)

# ruby-on-rails - 我们如何在 Rails 中读取 MDB 文件以将其转储到 PostgreSQL 中？

> ID：12674282
> 
> 赞同：1
> 
> 时间：2012-10-01T13:29:31.287
> 
> 标签：ruby-on-rails, ruby

在 Ubuntu 上，我使用`dbtools`通过终端命令读取 *.mdb 文件。

是否有 gem 或方法可以让我使用 Rails 读取 MDB 文件？

我想在 Windows 中运行相同的项目。

我想将 MDB 转换为 SQL 文件并将其转储到 PostgreSQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:59:00.040

似乎你已经拥有了编写这样一个 gem 所需的一切:)

在你前进的道路上，只有痛苦。我完全不支持的观点是，您最好的选择可能是带有基于 JDBC 的 MS Access 驱动程序或 JDBC/ODBC 桥的 JRuby。这样，您就可以在两个平台上拥有相同的工具集，并避免*大量*其他问题——您只是遇到了从 Java 访问 MSAccess 的“正常”问题，虽然这比从 MRI Ruby 更复杂，但它并不难。

当然 SQLite 将是一个跨平台的选项，但我假设您必须使用 MSAccess 的具体原因。

如果您的应用程序的数据需求非常简单，您可以通过将适当的 mdbtools 命令包装到适当的模型中或将它们与自定义模块混合来实现您需要的足够行为。但是，这会很痛苦，而且你不会得到任何 ActiveRecord，尽管这可能很好。

您与使用新 NoSQL 数据库的任何人都处于相似的位置——您需要自行开发，并且您将使用更少的 AR。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T20:33:27.630

此 gem 用于只读访问 rails: [activemdb](https://github.com/automatthew/activemdb)中的 MDB 文件。我还没试过。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T14:21:31.763

我会使用不同的攻击。

在您的 Ubuntu 主机上，加载 PostgreSQL 驱动程序和开发包，然后安装[pg](http://rubygems.org/gems/pg)和[Sequel](http://sequel.rubyforge.org/) gem。

在那里编写一些代码来读取MDB文件，并使用Sequel通过网络直接连接到Postgres并直接插入记录。

替代方法是让 Sequel 将必要的 SQL 命令写入文件，或者使用 CSV 模块创建一个中间文件，然后将其导入 PostgreSQL，但在我看来，这是一个浪费的中间步骤。

您不需要从 Rails 执行此操作；我会完全避免使用 Rails，因为它确实不会为您的任务增加任何价值。

如果你想利用你的 ActiveRecord 知识，你可以在 Rails 之外使用它，并让它直接从 Ubuntu 系统连接到 Postgres。

# .net - ServiceStack.net 会话结束事件或回调？

> ID：12674285
> 
> 赞同：1
> 
> 时间：2012-10-01T13:29:44.120
> 
> 标签：.net, session, session-timeout, servicestack

我正在使用带有身份验证的 ServiceStack.Net，并且正在使用自定义会话，一切都很好。

我想知道是否有事件或回调、覆盖或任何其他机制来知道会话何时结束（即客户端断开）或会话何时到期？

像 global.asax "Session_End"

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:46:26.810

不，没有**Session End**事件，因为无法确定何时从任何可用于缓存会话的支持[缓存提供程序中删除会话。](https://github.com/ServiceStack/ServiceStack/wiki/Caching)

所以你不应该真的试图依赖这个，如果他们被分配了一个现有的会话但现在不再存在，你可以确定它是否已过期（或真的不再存在），例如：

```
var hadSessionWithId = httpReq.GetSessionId();
var existingSession = Cache.Get<TUserSession>(SessionExtensions.SessionKey);
if (hadSessionWithId ?? existingSession == null) //Existing session invalidated. 
```

# emacs - 如何在 Emacs 中运行 Racket？

> ID：12674288
> 
> 赞同：9
> 
> 时间：2012-10-01T13:29:53.170
> 
> 标签：emacs, racket

我不喜欢 DrRacket，因为它没有 Emacs 方便的编辑功能，但是我只能通过在中添加命令“racket current-file.scm”`.emacs`来运行 Scheme 文件，现在，我想在 Emacs 中运行 Scheme 文件，描述为“运行：重置交互窗口并在定义窗口中运行程序。” 在[DrRacket 的手册](http://docs.racket-lang.org/drracket/Menus.html#%28part._menu~3aracket%29)中，我阅读了命令 Racket 的帮助“ [19.1 Running racket and gracket](http://docs.racket-lang.org/guide/racket.html) ”，似乎它没有回答我的问题，我该怎么办？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T15:05:47.667

您可能想尝试Emacs 的[Geiser](http://www.nongnu.org/geiser/)模式。Racket Guide中还有一[节](http://docs.racket-lang.org/guide/other-editors.html)专门介绍如何使用其他编辑器和 CLI 工具。

更新：现在我也强烈推荐 Greg Hendershott 的[球拍模式](https://github.com/greghendershott/racket-mode)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-18T23:06:11.840

Greg Hendershott`racket-mode`为使用 Emacs 的 Racket 编写了文章。

```
https://github.com/greghendershott/racket-mode 
```

在此处查看 2014 RacketCon 的演示文稿：

```
https://www.youtube.com/watch?v=QWiteH8PARQ&noredirect=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-02T13:29:03.067

racket-lang官网提供了一些在emacs中使用racket的方法。这是链接[球拍语言 emacs](http://docs.racket-lang.org/guide/Emacs.html)。您可以使用[quack](http://www.neilvandyke.org/quack/)或 geiser。

# wcf - How do I built RESTful services with WCF?

> ID：12674291
> 
> 赞同：0
> 
> 时间：2012-10-01T13:29:54.760
> 
> 标签：wcf, rest

Forgive my ignorance but is it possible to build RESTful services with WCF or would I need some other technology entirely to do this. I understand, roughly, what RESTful services are but was just wondering about how to built them in .NET.

# database - Heroku：上线后要改变什么？

> ID：12674293
> 
> 赞同：1
> 
> 时间：2012-10-01T13:30:01.280
> 
> 标签：database, heroku, production-environment, dev-to-production

我已经在 heroku 上构建了一个应用程序，我们即将上线。现在，我正在使用“Shared Database 5MB”插件，但找不到更改为生产数据库的位置。

在上线之前我还应该应用哪些其他更改？有没有关于heroku或其他地方的好教程？我还没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:34:41.037

我建议创建一个并行的新 Heroku 项目：一个用于开发，一个用于生产。

你的本地 git 仓库可以有两个远程 git 仓库，一个指向开发 Heroku 项目，一个指向生产 Heroku 环境。

然后从您的代码库中创建一个开发分支。将开发分支推送到开发项目并从主分支推送生产。

当您准备好将代码推送到生产合并开发分支到主分支，然后推送到远程生产 Heroku 项目时。

这将允许您在不影响现有用户的情况下继续开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:34:00.170

[在这里](https://devcenter.heroku.com/articles/database)，您可以找到有关生产与开发数据库计划的信息。

开发与生产

> Heroku 为您提供运行开发或生产数据库的选择。
> 
> ## Heroku Postgres 开发数据库
> 
> Heroku Postgres 开发计划已取代旧的共享数据库系统。它运行 Postgres 9.1 并提供与生产计划几乎完全一致的功能，但旨在用于开发和登台应用程序。
> 
> 大多数在 Heroku 上创建的新应用都会自动安装开发数据库。如果您的应用程序中未定义 DATABASE_URL，请参阅故障排除部分。
> 
> 有关更多信息，请阅读 Heroku Postgres Starter Tier 文章。
> 
> ## Heroku Postgres 生产数据库
> 
> 生产计划适用于生产规模应用。此外，生产数据库提供了许多优于共享的优势，包括直接访问（通过 psql 或任何本机 postgres 库）、存储过程和 Postgres 9.1 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T23:48:44.990

我还建议设置一个日志和性能监控插件。如果您想稍后提取旧日志，Loggly 可让您免费将日志推送到 S3（好吧，s3 存储不是免费的，但推送是免费的）。

您还需要设置异常监控 - logentries 插件非常适合。

New relic 是我所知道的唯一性能监控插件，而且价格稍贵。

# php - jQuery ajax JSON custom error handling

> ID：12674298
> 
> 赞同：1
> 
> 时间：2012-10-01T13:30:25.040
> 
> 标签：php, jquery, ajax, json

I want to working with login system jQuery ajax and json. I'm facing no problem with success function. I dn't know how to through custom errors like "incorrect login".

Here is my code, Please help me.

```
<script>
    $(document).ready(function(){
        $("#login").click(function(){
            if($("#defaultEmail").val() == ""){
                $("#defaultEmail").addClass("field-err");
                $("#defaultEmail").focus();
            }else if($("#defaultPassword").val() == ""){
                $("#defaultEmail").removeClass("field-err");
                $("#defaultPassword").addClass("field-err");
                $("#defaultPassword").focus();
            }else{
                $("#defaultPassword").removeClass("field-err");
                $('#loading').css('display', 'block');
                var email = $('#defaultEmail').val();
                var password = $('#defaultPassword').val();
                var queryString = "email=" + email + "&password=" + password + "";
                $.ajax({
                  url: 'secureLogin.php',
                  contentType: "application/json; charset=utf-8",
                  dataType:'json',
                  async: false,
                  type:'GET',
                  data: queryString,
                  success: function(data){
                    $('#loading').css('display', 'none');
                    var url = "c_profile.php";
                    $(location).attr('href',url);
                  },
                  error: function(request,error){
                    $('#loading').css('display', 'block');
                    $("#log-ajax-error").append("ERROR: " + error);
                  }
                });
            }
        });
    });
</script> 
```

Here is my sucureLogin.php code

```
$email = $_GET['email'];
$password = $_GET['password'];
$encrypted_pass = md5($password);

    $sel = @mysql_query("SELECT `name`, `company`, `cid` FROM `company` WHERE `email` = '$email' AND `password` = '$encrypted_pass'");
    $count = @mysql_num_rows($sel);
    if($count > 0){
        while($data = @mysql_fetch_array($sel)){
                       // Success here
        }
    }else{
        $arr = array('a' => 'Unable to login');
        echo json_encode($arr);
    } 
```

i'm throwing json_encode for the error. Please help me with this. Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:36:52.110

在服务器端

```
$arr = array('error' => 'Unable to login');
echo json_encode($arr); 
```

在客户端

```
success: function(data){
    $('#loading').hide(); 
    if( 'error' in data ){ 
        $("#log-ajax-error").append("ERROR: " + data.error);
    }
    else{
       var url = "c_profile.php";
       $(location).attr('href',url);
    }
}, 
```

如果 ajax 请求出错，将调用错误回调，因此您的代码需要在成功处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:36:26.923

在ajax中，错误处理程序不构成你抛出的错误，它构成了连接错误，或者是请求的错误。这意味着，无论您如何发回错误响应，它都会触发成功回调。

在您成功后，您应该对响应进行一些检查：

```
成功：函数（数据）{

   如果（数据.状态 === 假）
   {

      // 有一个错误

   } 别的 {

      $('#loading').css('display', 'none');
      var url = "c_profile.php";
      $(location).attr('href',url);

   }

},

```

并在您的 PHP 处理程序中添加一个状态键：

```
$arr = 数组（
   '状态' => 真（或假），
   'a' => '无法登录'
);

```

# r - R ggplot2 change colours of dodged barchart

> ID：12674300
> 
> 赞同：3
> 
> 时间：2012-10-01T13:30:34.730
> 
> 标签：r, ggplot2, scale

I working on a ggplot2 plot of the following data:

```
means <- c(2.4,3,3,3.16,2.5,2.5,3,4.5)
sds <- c(1.0,1.2,1.0,1.1,2.1,0.7,2.8,0.7)
teams <- c(1,1,1,1,2,2,2,2)
scales <- c(1,2,3,4,1,2,3,4)

datas <- data.frame(teams, scales, means, sds) 
```

Thanks to a very active helper, the plot looks like this:

```
graph <- 
    ggplot(data=datas,  aes(scales, y=means, group=teams)) + 
    geom_bar(aes(fill=teams), stat="identity", 
             position="dodge") + 
    geom_errorbar(aes(ymin= means - sds, ymax = means + sds, width=0.2), 
                  position=position_dodge(width=0.90)) +
    coord_flip() 
```

Now I want to change the colour of the bars into special colours. I got a hint that scale_fill_manual would do it (I tried scale_fill_manual(values= c('#0023a0', '#f9a635'))+...) but all I get is an error (Continuous value supplied to discrete scale). Any ideas?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T13:47:14.880

```
ggplot(data = datas,  aes(scales, y = means, group = teams)) + 
    geom_bar(aes(fill = as.factor(teams)), stat = "identity", 
             position = "dodge") + 
    geom_errorbar(aes(ymin = means - sds, ymax = means + sds, width=0.2), 
                  position = position_dodge(width = 0.90)) +
    coord_flip()  + scale_fill_manual("Teams",values = c('#0023a0', '#f9a635')) 
```

# github - GitHub: Reopening a merged pull request

> ID：12674304
> 
> 赞同：137
> 
> 时间：2012-10-01T13:30:41.780
> 
> 标签：github, merge, pull-request

*   I made some changes
*   I submitted a pull request
*   The pull request was accepted and merged.
*   We found a bug
*   The changes were removed again (force push to 1 commit before) whilst I fixed the bug.

I've now fixed the bug and want to resubmit the pull request with 1 extra commit. Is there any way to reopen the pull request or update it, or do I have to create a new pull request, type out the description etc again? Gitorious has this feature and we've recently moved to GitHub.

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-10-11T11:11:14.167

答案似乎是：**你不能。**

一旦拉取请求被合并并关闭，它就会被永久锁定并且无法重新打开。如果您的拉取请求被合并、关闭，那么您的更改被拉出（通过强制向后推到合并之前），您将需要向分支添加提交并创建一个新的拉取请求，复制所有细节并可能提供指向原始拉取请求的链接以手动保存历史记录。

可能是对未来 GitHub 的一个很好的功能请求。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-14T16:47:30.030

我刚刚成功地重新打开了一个拉取请求

1.  评论拉取请求
2.  点击评论表单上出现的“提交并重新打开”按钮。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-21T13:33:51.797

您可以使用还原操作：

[![在此处输入图像描述](../Images/4c76ea37d7ac0997ddc2fb05e8e1625e.png)](https://i.stack.imgur.com/jne2l.png)

它将创建另一个拉取请求，以撤消合并 PR 中所做的所有更改。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-15T06:33:34.043

只需从您已完成额外 1 次提交的现有分支派生一个新分支。从那里提交拉取请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-22T08:02:01.810

您可以只恢复已恢复的 PR，这应该包含从原始 PR 恢复的所有更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-15T07:56:44.620

我已经尝试了所有的技巧和窍门。**简单地说 - 你不能重新打开它。**

就是这样。（即使我很伤心他们还没有想出这个）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-22T08:49:38.007

好吧，现在是 2021 年，而且——<a href="https://stackoverflow.com/a/12838195/848301">差不多十年后——令我沮丧、昏迷和喜悦的是，一个简单的`gh pr reopen N`¹ 确实重新打开了我的 PR——在我*知道*以前无法通过 UI 重新打开的情况（或者我相信）。¯\_(ツ)_/¯

愿这对你也有用！

(¹)`gh`是[GitHub 的官方命令行工具](https://github.com/cli/cli)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-07T11:50:12.210

我设法通过以下方式重新打开它：

1.  恢复基础分支
2.  重新打开并发表评论

# php - phpexcel另存为pdf

> ID：12674308
> 
> 赞同：1
> 
> 时间：2012-10-01T13:30:56.337
> 
> 标签：php, phpexcel

我正在测试 phpexcel，需要将文件另存为 pdf，但是我收到以下错误：

TCPDF 错误：[图像] 无法获取图像：zip://pcash.xlsx#xl/media/image3.emf

```
$objWriter = PHPExcel_IOFactory::createWriter($excel2, 'PDF');
$objWriter->save('pcash1.pdf'); 
```

我看过这个帖子，但真的不明白为什么内置的 PDF 编写器显然无法创建 PDF？

[PHPExcel 创建/样式/保存 PDF 文档](https://stackoverflow.com/questions/7678566/phpexcel-create-style-save-pdf-documentation)

是否无法将文件另存为 pdf，如果不是，为什么不，因为这似乎是一个内置功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:02:32.887

检查 tcPDF 库的文档，通过[ImageMagick](http://www.php.net/manual/en/book.imagick.php)扩展（如果扩展是在 PHP 中加载）和 Windows 平台（显然[ImageMagick 仅支持 Windows 平台上的 EMF](http://www.imagemagick.org/www/formats.html)）支持 EMF 格式的图像。

# ruby - How to use local gem with bundler

> ID：12674309
> 
> 赞同：0
> 
> 时间：2012-10-01T13:30:59.650
> 
> 标签：ruby, rubygems, bundler

I have local ruby gem, with a development version forked from github. So I have it locally. Now I want to use it in my application. I'm using bundler so I did:

> gem 'otrs_connector', :path => '/devel/otrs_connector'

problem is that I get errors about missing files

```
require 'rubygems'
require 'otrs_connector' 
```

then run

```
$ ruby app.rb 
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- otrs_connector  (LoadError) 
```

how can I load my "under development" gem?

this is my /devel/otrs_connector

```
$ ls -al /devel/otrs_connector
total 112
drwxr-xr-x  15 marcinkrzyzanowski  staff    510 Oct  1 15:22 .
drwxr-xr-x  33 marcinkrzyzanowski  staff   1122 Oct  1 15:17 ..
-rw-r--r--   1 marcinkrzyzanowski  staff     55 Oct  1 15:04 .document
drwxr-xr-x  13 marcinkrzyzanowski  staff    442 Oct  1 15:04 .git
-rw-r--r--   1 marcinkrzyzanowski  staff    820 Oct  1 15:04 .gitignore
-rw-r--r--   1 marcinkrzyzanowski  staff    480 Oct  1 15:04 Gemfile
-rw-r--r--   1 marcinkrzyzanowski  staff    773 Oct  1 15:04 Gemfile.lock
-rw-r--r--   1 marcinkrzyzanowski  staff   1054 Oct  1 15:04 LICENSE.txt
-rw-r--r--   1 marcinkrzyzanowski  staff   2016 Oct  1 15:04 README.rdoc
-rw-r--r--   1 marcinkrzyzanowski  staff   1428 Oct  1 15:04 Rakefile
-rw-r--r--   1 marcinkrzyzanowski  staff      5 Oct  1 15:04 VERSION
drwxr-xr-x   4 marcinkrzyzanowski  staff    136 Oct  1 15:04 lib
-rw-r--r--   1 marcinkrzyzanowski  staff  16896 Oct  1 15:22 otrs_connector-1.3.0.gem
-rw-r--r--   1 marcinkrzyzanowski  staff   2954 Oct  1 15:04 otrs_connector.gemspec
drwxr-xr-x   4 marcinkrzyzanowski  staff    136 Oct  1 15:04 test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:36:05.087

文件存储在哪里？我认为您将其存储在`devel`主文件夹中的文件夹中，而不是`/devel`. 如果以 开头的路径`/`，则指向 HD 路径的根。

您可能希望将路径更改为

```
gem 'otrs_connector', :path => '~/devel/otrs_connector' 
```

（请注意`~`这是您的主文件夹路径的替代品）。

# powershell - 获取无法将参数绑定到参数“路径”，因为它在 powershell 中是空错误

> ID：12674310
> 
> 赞同：19
> 
> 时间：2012-10-01T13:31:02.293
> 
> 标签：powershell

我正在尝试根据文件名将文件名中的特殊字符删除到某个目的地后移动所有邮件。FOLDLIST 是一个数组，其中我有条件变量和目标文件夹名称。

```
 Set-Location 'C:\Users\abrahame\Desktop\Work\PSG Mail Movement\Mail'
    $DESLOC="c:\Temp\ua-closed bugs"
    $FOLDLIST = @(("UA", "CLOSE",  "ua-closed bugs"), ("VS", "CLOSE", "vs-closed-bugs"), ("CM", "CLOSED", "cm - closed-bugs"))
    gci | Foreach-object { $NEWN = $_.Name -replace '&',' ' -replace '_', ' ' -replace '#', ' ' -replace '!', ' '  -replace '@', ' '  -replace '$', ' '  -replace '%', ' '  -replace '^', ' '  -replace '&', ' '  -replace '\(', ' ' -replace '\)', ' '  -replace '\[', ' ' -replace '\]', ' ' -replace '\{', ' '  -replace '\}', ' ' -replace '\-', ' ';
            write-host $NEWN.Length
            if($NEWN.Length -gt  70){
                    $NEWN="$NEWN.Substring(1,70)"
                    $NEWN=$NEWN.msg

            }

            $FOLDLIST | ForEach-Object {
            $CXR=$_[0]
            $STAT=$_[1]

            if ($NEWN -match ("$CXR") -and $NEWN -match ("$STAT")){
            write-host $CXR -  $STAT
                    $DIR=$_[2]
                    $NEWN=$NEWN.trim()
                    $DPATH="$DESLOC\$DIR\$NEWN"
                    write-host $DPATH
                    mv $_.Name $DPATH
            }
            }

    } 
```

我收到这个错误。请告知我在哪里做错了..

```
 67
    UA - CLOSE
    c:\Temp\ua-closed bugs\ua-closed bugs\RE  CLOSE OA TICKET   10350   OA   UAT PHASE FOR HP FARES  1 .msg
    Move-Item : Cannot bind argument to parameter 'Path' because it is null.
    At C:\Users\abrahame\Desktop\Work\PSG Mail Movement\mailmove_multdimentional.ps1:24 char:5
    +         mv <<<<  $_.Name $DPATH
        + CategoryInfo          : InvalidData: (:) [Move-Item], ParameterBindingValidationException
        + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.MoveItemCom
       mand 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:52:37.193

我的猜测是 $_.Name 不存在。

如果我是你，我会将脚本带入 ISE 并逐行运行，直到你到达那里，然后查看 $_ 的值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:47:04.093

`$_`是当前管道中的活动对象。您已经启动了一个新管道，它`$FOLDLIST | ...`表示`$_`该数组中沿管道传递的对象。您应该将第一个管道中的 FileInfo 对象存储在一个变量中，然后稍后引用该变量，例如：

```
write-host $NEWN.Length
$file = $_
...
Move-Item $file.Name $DPATH 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2019-09-29T06:36:00.697

1.  PM>卸载-打包EntityFramework -Force
2.  PM>Iinstall-Package EntityFramework -Pre -Version 6.0.0

我用 NugetPackageConsole 中的这段代码解决了这个问题。它可以工作。问题出在版本中。我认为它会帮助其他人。

# ios - NSDocument won't open

> ID：12674312
> 
> 赞同：0
> 
> 时间：2012-10-01T13:31:06.180
> 
> 标签：ios, objective-c, json, nsdocument

I am making my first IOS application and using JSON and core data for getting and storing my data.

But for some reason or another it won't open it's `NSDocument`. This is what I am doing.

```
- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.genkDatabase.fileURL path]]) {
        // does not exist on disk, so create it
        [self.genkDatabase saveToURL:self.genkDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            NSLog(@"test1"); 
            [self setupFetchedResultsController];
            NSLog(@"test12");
            [self fetchFlickrDataIntoDocument:self.genkDatabase];

        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateClosed) {
        NSLog(@"test2"); 
        // exists on disk, but we need to open it
        [self.genkDatabase openWithCompletionHandler:^(BOOL success) {
            NSLog(@"test4");
            [self setupFetchedResultsController];
            NSLog(@"test5");
        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateNormal) {
        NSLog(@"test3");
        // already open and ready to use
        [self setupFetchedResultsController];
    }
}

- (void)setupFetchedResultsController // attaches an NSFetchRequest to this UITableViewController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"News"];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"News.title" ascending:YES]];
    // no predicate because we want ALL the Photographers

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.genkDatabase.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
    NSLog(@"test10");
} 
```

When you look at my log, you see the following.

> Test 2 Test 4 Test 10 Test 5

As you can see it opens it succefully. Then executes the method `setupFetchedResultsController`. But then it suddenly stops. I don't get any errors.

What It normally should do is go to the `fetchFlickrDataIntoDocument` method.

Can anybody help me please ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:11:55.620

我相信 `[self fetchFlickrDataIntoDocument:self.genkDatabase];` 应该在您的数据库不存在时调用此方法，因此您希望在磁盘上的文档目录中创建它。当您运行测试时，您的数据库已经存在并且尚未打开，因此您的程序尝试打开它。您基本上只需遵循条件语句：`if (self.genkDatabase.documentState == UIDocumentStateClosed)`。我不明白为什么你的程序应该调用，`fetchFlickrDataIntoDocument:self`因为它应该只在你的数据库不存在时发生。

# xml - iMacros can fill out a web form and submit it, but can the data come from a (local) XML source?

> ID：12674315
> 
> 赞同：2
> 
> 时间：2012-10-01T13:31:14.587
> 
> 标签：xml, imacros

iMacros works great to record a macro of the actions required to fill out a web form for later automation. However, I'd like to get the data for the form's fields from an XML source on my hard drive. iMacros doesn't seem to provide features for XML parsing (that I could find). Is it possible?

My motivation is that I want to import/convert (possibly using Chrome) [HotPotatoes JQuiz](http://hotpot.uvic.ca/wintutor6/jquiz1.htm) files (stored in XML on my local drive) for use on [Mentimeter](https://www.mentimeter.com/). I realize I could write a Java program to output the iMacro file (a sort of programmatic hard-coding), but want to avoid this solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-04T13:00:51.777

您可以使用 csv，如本例所示：

[http://wiki.imacros.net/Form_Filling](http://wiki.imacros.net/Form_Filling)

`CSV`以格式保存信息并读取行

# java - Add faceting over multivalued to application using Hibernate Search

> ID：12674316
> 
> 赞同：0
> 
> 时间：2012-10-01T13:31:17.847
> 
> 标签：java, lucene, hibernate-search

we use Hibernate Search in our application. We use faceting. Recently we have found a big limitation. Faceting over fields that can have multiple values doesn't work properly with Hibernate Search - if a document has multiple values for faceted field (ex. multiple categories), only one of the values is taken into account.

I can currently think of a couple two solutions:

*   use bobo-browse (http://code.google.com/p/bobo-browse/)
*   solr (http://lucene.apache.org/solr/)

In both solutions we continue to maintain the index using Hiberante Search and making queries as we did before (using Hiberante Search), and run additional bobo-browse or solr query for faceting, where required (bobo-browse or solr would use index in kind of "read-only" manner). The problem is that we update index quite often, and would like to get really fresh data in faceting queries. Bobo-browse doesn't automatically integrate with Hiberante Search, and to keep search up to date, I might get into some problems (ex. [https://groups.google.com/forum/?fromgroups=#!topic/bobo-browse/sn_Efc-YClU](https://groups.google.com/forum/?fromgroups=#!topic/bobo-browse/sn_Efc-YClU)). The documentation looks a bit untidy and not yet completed. Solr on the other hand seems like a really big thing to add, just to get faceting work properly. And I'm still afraid I might run into some problems with updating/refreshing index.

Do you have any experience in that matter? Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:28:11.470

作为一名 Hibernate Search 开发人员，我建议加入我们并帮助实现您所需要的。

我们中没有人真正需要多值刻面，所以我们也不确定选择哪种解决方案；看来您有真正的需求，这是探索替代方案并尝试它们的完美选择。

Hibernate Search 已经依赖于许多 Solr 模块，尤其是因为有大量优秀的分析器。我相信我们可以找到一种方法来嵌入 Solr 的分面逻辑并将其很好地打包到我们一致的 API 中，而无需在服务器模式下实际启动 Solr。

我想我们可以对 Bobo-browse 做同样的事情；我希望 Solr 不添加其他依赖项，但如果 bobo-browse 证明了一个更好的解决方案，为什么不......但你可以帮助我们做出这个选择。

你会得到什么作为交换？

*   我们会维护它：兼容性将与任何未来版本保持一致。希望你能有所帮助。
*   其他用户的永恒感谢；）
*   来自成千上万其他用户的坚如磐石的测试
*   来自..的错误修正和改进
*   简历上的摇滚明星徽章

需要什么？

*   单元测试
*   文档更新
*   合理的代码

[https://community.jboss.org/wiki/ContributingToHibernateSearch](https://community.jboss.org/wiki/ContributingToHibernateSearch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T18:53:53.623

这是针对休眠搜索的多值构面计数问题的某种解决方案。

博客： http: [//outbottle.com/hibernate-search-multivalue-facet-counts/](http://outbottle.com/hibernate-search-multivalue-facet-counts/)

该博客包含一个 Java 类，可以重用该类来为单值和多值字段生成构面计数。

提供的解决方案基于此处提供的 BitSet 解决方案：http: [//sujitpal.blogspot.ie/2007/04/lucene-search-within-search-with.html](http://sujitpal.blogspot.ie/2007/04/lucene-search-within-search-with.html)

该博客有一个 Maven 项目，它非常全面地演示了该解决方案。该项目演示了使用 hibernate-search faceting API 来过滤......

日期范围和一对多（单值）构面组和多对多（多值）构面组的组合。

然后调用该解决方案以正确导出每个构面组的构面计数。

该解决方案促进了类似于此 jsFiddle 仿真的结果：http: [//goo.gl/y5C9UO](http://goo.gl/y5C9UO)（除了仿真不演示范围分面）。

jsFiddle 是一个更大的博客的一部分，该博客总体上探讨了方面搜索的概念：http: [//outbottle.com/understanding-faceted-searching/](http://outbottle.com/understanding-faceted-searching/)。如果您像我一样，并且发现构面搜索的整个概念非常混乱，那么这将有所帮助。

它可能不是世界上最好的解决方案，所以请随时反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:23:49.723

我还将 Bobo Browse 与 Hibernate Search 结合使用。我也有定期更新和只读问题的问题。Bobo 并不是最简单的库，我已经多次研究与 Hibernate Search 集成的方法，但由于复杂性而放弃了。

我使用索引的定时重新加载来确保新鲜度，但这会产生大量要收集的垃圾。Lucene 随着时间的推移优化了重新打开索引阅读器的过程，但 Bobo 团队并没有真正专注于支持这一点。 [https://linkedin.jira.com/browse/BOBO-31](https://linkedin.jira.com/browse/BOBO-31)描述了这个问题。

Hibernate Search 基础架构应该提供足够的集成灵活性。Zoie 是一个像 Hibernate Search 一样的实时索引系统，集成了 Bobo [https://linkedin.jira.com/wiki/display/BOBO/Realtime+Faceting+with+Zoie](https://linkedin.jira.com/wiki/display/BOBO/Realtime+Faceting+with+Zoie)或许它可以激发你的努力

# android - How do I redirect a button to a URL or website(browser) Android?

> ID：12674318
> 
> 赞同：-3
> 
> 时间：2012-10-01T13:31:29.703
> 
> 标签：android, url, redirect, browser

> **Possible Duplicate:**
> [How do I launch a URL from my application on Android?](https://stackoverflow.com/questions/2060949/how-do-i-launch-a-url-from-my-application-on-android)

I can't seem to figure out how to work on this. I need to click a button that will redirect to a URL / Website. Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:52:00.667

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class GoogleActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button english = (Button)findViewById(R.id.google);//button name in xml file
        english.setOnClickListener(google); // on button click listener 
    }

    private Button.OnClickListener google
    = new Button.OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Uri uri = Uri.parse("http://www.google.com");
         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
         startActivity(intent);

            }

        };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:33:22.247

```
 button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(Intent.ACTION_VIEW, 
             Uri.parse("http://www.google.com"));
        startActivity(intent);

    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:34:44.803

```
load_url.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
 Uri uri = Uri.parse("http://www.google.com");
 Intent intent = new Intent(Intent.ACTION_VIEW, uri);
 startActivity(intent);

            }
        }); 
```

**更新：**

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testtone"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**MainActivity.java**

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button mButton = (Button) findViewById(R.id.button1);
        mButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Uri uri = Uri.parse("http://www.google.com");
                Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                startActivity(intent);

            }

        });
    }

} 
```

# r - 将数据和元数据解析为相应数据帧的最有效方法

> ID：12674321
> 
> 赞同：2
> 
> 时间：2012-10-01T13:32:00.850
> 
> 标签：r

我想将来自 HTTP 请求的数据转换为数据框。

via`httr`返回的数据格式如下，包含列标题和类型等元数据。

我想将其转换为相应的数据框： Columns based on `data$columnHeaders`- 从一组定义的规则中解析（基于`data$columnHeaders$dataType`或`data$columnHeaders$name`

似乎问题已经解决了，但是我找不到经过验证的、快速有效的解决方案。

`dput()`结果`data`：_

```
data <- structure(list(columnHeaders = list(structure(list(name = "ga:date", 
    columnType = "DIMENSION", dataType = "STRING"), .Names = c("name", 
"columnType", "dataType")), structure(list(name = "ga:visitors", 
    columnType = "METRIC", dataType = "INTEGER"), .Names = c("name", 
"columnType", "dataType"))), rows = list(c("20120912", "26121"
), c("20120913", "32003"), c("20120914", "38348"), c("20120915", 
"26679"), c("20120916", "26249"), c("20120917", "29867"), c("20120918", 
"31572"), c("20120919", "27576"), c("20120920", "26730"), c("20120921", 
"28598"), c("20120922", "25319"), c("20120923", "27428"), c("20120924", 
"33255"), c("20120925", "32071"), c("20120926", "28272"))), .Names = c("columnHeaders", 
"rows")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:45:20.473

感谢您提供可重现的示例。我在评论中建议的答案或多或少是我在这里提出的：

```
out <- as.data.frame(do.call("rbind", data[["rows"]]))
names(out) <- make.names(sapply(data[["columnHeaders"]], "[[", 1))

str(out)
#-----
'data.frame':   15 obs. of  2 variables:
 $ ga.date    : Factor w/ 15 levels "20120912","20120913",..: 1 2 3 4 5 6 7 8 9 10 ...
 $ ga.visitors: Factor w/ 15 levels "25319","26121",..: 2 12 15 4 3 10 11 7 5 9 ...
head(out,3)
#-----
   ga.date ga.visitors
1 20120912       26121
2 20120913       32003
3 20120914       38348 
```

请注意，我曾经`make.names()`确保列名是有效的 R 名称...否则您的列名中会出现冒号，这将在下游出现问题。

我还将在这里阅读两行之间的内容，并假设您的第一列应该代表一个日期，第二列应该代表一个数字。您会注意到 R 目前认为这两个都是`factor`变量。以下是我如何将它们转换为适当的数据类型：

```
#Date column
out$ga.date <- as.Date(out$ga.date, format = "%Y%m%d")
#Numeric column
out$ga.visitors <- as.numeric(as.character(out$ga.visitors))

str(out)
#-----
'data.frame':   15 obs. of  2 variables:
 $ ga.date    : Date, format: "2012-09-12" "2012-09-13" "2012-09-14" ...
 $ ga.visitors: num  26121 32003 38348 26679 26249 ... 
```

现在我认为你有一些有用的东西可以做一些分析。有关格式化日期和日期/时间对象的详细信息，请参阅`?as.Date`和。`?strptime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:49:21.607

我试图（a）复制您的数据，（b）将复制的数据转换为数据框。

```
#(a) Replicating data 
a<-c("20120912", "26121")
b<-c("20120913", "32003") 
c<-c("20120914", "38348")
data<-rbind(a,b,c)
colnames(data)<-c("date","visitors")

#(b) Converting to data frame
str(data) #chr [1:3, 1:2]
data<-data.frame(data)
str(data) #'data.frame':   3 obs. of  2 variables 
```

这是否回答了您的问题，还是我对您的理解有误？祝你好运！

# java - 如何在 Eclipse (Mylyn/Team) 中访问变更集？

> ID：12674322
> 
> 赞同：4
> 
> 时间：2012-10-01T13:32:02.153
> 
> 标签：java, version-control, mylyn, changeset

我想**通过 Java 以编程方式访问 SVN、CVS 和 Git 的变更集**。即我想要**“同步”视图**中显示的数据。

我尝试了几种方法来找到代码中的正确用法，这是我能找到的少数文档（但没有成功）：

*   我设法通过 访问 Synchronize-View `TeamUI.getSynchronizeManager()`，但没有访问变更集。

*   我尝试的另一件事是通过`FocusedTeamUiPlugin.getDefault().getContextChangeSetManagers()`（得到管理器，然后是我试图获取 ChangeSets 的 ChangeSetProvider）来获取 cangesets - 但它们总是空的（因为它们是在我第一次调用它时创建的）。

那么，如何在 Eclipse (Mylyn) 中访问 ChangeSets（使用 Java）？**最后，我需要提交的数量和代码流失（添加/删除/编辑的代码）**。还是可能有其他更好的方法？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:15:33.187

我认为 Eclipse 尚未将此功能作为公共 API 实现。但是，这些链接可能会有所帮助：

内部变更集类和其他 API：[http ://www.cct.lsu.edu/~rguidry/ecl31docs/api/index.html?org/eclipse/team/internal/core/subscribers/ChangeSet.html](http://www.cct.lsu.edu/~rguidry/ecl31docs/api/index.html?org/eclipse/team/internal/core/subscribers/ChangeSet.html)

一个功能增强请求，他们谈论为什么他们还没有实现它（但它的日期是 2008 年，但是错误仍然存​​在？）[https://bugs.eclipse.org/bugs/show_bug.cgi?id=116084](https://bugs.eclipse.org/bugs/show_bug.cgi?id=116084)

对不起，我不能提供更多帮助！也许这会帮助你朝着正确的方向前进......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T04:04:31.770

你也许可以绕过 Eclipse：

*   应用 rsync 从 CVS 服务器获取 CVS "*,v" 文件。这个对我有用。
*   将[cvs2svn](http://cvs2svn.tigris.org/)的“cvs2git”命令应用于 CVS 存储库。这个对我有用。
*   将“git svn clone”（记录在“git-svn”下）应用到 SVN 存储库。我还没有尝试过。
*   最后，使用[JGit 的 API](http://jgit.info/javadoc/)从所有 repos 中获取变更集，此时它们都是 git repos。我想你会特别需要这些：
    *   类 Git
    *   类文件解析器
    *   类 BaseConnection
    *   接口存储库
    *   类 CheckoutCommand
    *   类 LogCommand
    *   类 RevCommit
    *   类 DiffCommand
    *   类 DiffEntry
    *   类 DiffFormatter

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T10:34:25.620

我已经找了1个月了。我尝试为 Eclipse 编写一个插件，该插件能够读取项目的变更集（存储库的“工作副本”）。

我现在所做的是一个丑陋的解决方法。

我使用 Runtime.exec() 运行 cmd-command / Shell- 命令。如果你安装了一个 svn-commandline 客户端，你可以输入`svn status -v -u` It 给你一个包含变更集信息的工作副本的所有文件的列表。

然后你可以解析列表以找到所有以“M”开头的行 - 用于“修改”以获取更改文件的路径。

# ios - iOS：在外部应用程序中编辑文件

> ID：12674323
> 
> 赞同：1
> 
> 时间：2012-10-01T13:32:03.837
> 
> 标签：ios, file-sharing, external-application

这是一个简单的问题（答案可能不那么简单，我猜......）

在我的应用程序中，我有一个 .XLSX 文件，我想用 Apple 的 Number App 版本（或任何其他可以编辑此类文件的应用程序）打开该文件，并将编辑后的文件带回我的应用程序

我知道可以使用外部应用程序打开文件，但是编辑后如何将其取回？

（对不起我的英语不好）

# sql - 将嵌套 XML 数据与数据库表结构匹配的最快方法

> ID：12674327
> 
> 赞同：3
> 
> 时间：2012-10-01T13:32:05.663
> 
> 标签：sql, sql-server-2005, data-structures, orm

我有一个创建的应用程序`datarequests`可能非常复杂。这些需要作为表存储在数据库中。`datarequest`（作为 XML）的大纲将是......

```
<datarequest>
  <datatask view="vw_ContractData" db="reporting" index="1">
    <datefilter modifier="w0">
      <filter index="1" datatype="d" column="Contract Date" param1="2009-10-19 12:00:00" param2="2012-09-27 12:00:00" daterange="" operation="Between" />
    </datefilter>
    <filters>
      <alternation index="1">
        <filter index="1" datatype="t" column="Department" param1="Stock" param2="" operation="Equals" />
      </alternation>
      <alternation index="2">
        <filter index="1" datatype="t" column="Department" param1="HR" param2="" operation="Equals" />
      </alternation>
      </filters>
    <series column="Turnaround" aggregate="avg" split="0" splitfield="" index="1">
      <filters />
    </series>
    <series column="Requested 3" aggregate="avg" split="0" splitfield="" index="2">
      <filters>
        <alternation index="1">
          <filter index="1" datatype="t" column="Worker" param1="Malcom" param2="" operation="Equals" />
        </alternation>          
      </filters>
    </series>
    <series column="Requested 2" aggregate="avg" split="0"  splitfield="" index="3">
      <filters />
    </series>
    <series column="Reqested" aggregate="avg" split="0" splitfield="" index="4">
      <filters />
    </series>
  </datatask>
</datarequest> 
```

这对包含日期范围、主过滤器、系列和系列过滤器的数据请求进行编码。基本上，任何具有该`index`属性的元素都可以在其父元素内多次出现 - 例外情况是`filter`within `datefilter`。

但是这个结构有点学术，问题更根本：

当请求通过时，像这样的 XML 将作为存储过程的参数发送到 SQLServer。这个 XML 被分解成一个去规范化的表，然后迭代地写入规范化的表，例如`tblDataRequest (DataRequestID PK)`, `tblDataTask`, `tblFilter`, `tblSeries`。这可以。

当我想**将给定的 XML 定义与已保存在 DB 中的定义匹配**时，就会出现问题。我目前通过...

*   将 XML 分解为非规范化表
*   使用 CTE 将数据库中的*所有现有数据*提取到相同的非规范化形式中
*   使用巨大的`WHERE`条件匹配（34 行长）

..这将返回与给定 XML 完全匹配的任何 DataRequestID。*我担心这种方法最终会变得非常缓慢——部分原因是我不相信 CTE 会做任何巧妙的过滤，它会在*每次应用巨大的`WHERE`.

我认为必须有更好的解决方案，例如

*   在存储 a 时`datarequest`，还要以某种方式存储 datarequest 的哈希值，然后简单地匹配它。在发生碰撞的情况下，使用当前方法。但是，我想使用 set-logic 来做到这一点。而且，我担心 XML 中无关紧要的小差异会改变散列 - 虚假空间等。
*   不知何故，从下往上迭代地执行匹配。例如，生成在最低级别匹配的过滤器列表。将其用作`IN`匹配系列的一部分。使用它作为`IN`匹配 DataTasks 等的一部分。问题是，当我考虑这个太久时，我开始昏迷。

**基本上 - 以前有没有人遇到过这种问题（他们必须有）。解决它的推荐路线是什么？**示例（伪）代码会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T15:01:51.527

为了消除微小差异的可能性，我将通过 XML 转换 (XSLT) 运行请求。

或者，因为您已经获得了将其解析为非规范化暂存表的代码，这也很好。然后我会简单地使用[FOR XML](http://msdn.microsoft.com/en-us/library/ms178107.aspx)来创建一个新的 XML 文档。

您的目标是创建一个标准化的 XML 文档，该文档在适当的地方尊重排序并在不存在的地方消除不一致。

完成后，将其存储在新表中。现在，您可以将“标准化”请求 XML 与现有数据进行直接比较。

要进行实际比较，您可以使用哈希，将 XML 存储为字符串并进行直接字符串比较，或者像这样进行完整的 XML 比较：http: [//beyondrelational.com/modules/2/blogs/28/帖子/10317/xquery-lab-36-writing-a-tsql-function-to-compare-two-xml-values-part-2.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10317/xquery-lab-36-writing-a-tsql-function-to-compare-two-xml-values-part-2.aspx)

只要 XML 从不超过 8000 字节，我的偏好是创建一个唯一字符串（如果您有特殊字符支持，则为 VARCHAR(8000) 或 NVARCHAR(4000)）并在列上创建一个唯一索引。

# c - C：在模块中转换双精度字符串（内核中的又名）

> ID：12674330
> 
> 赞同：0
> 
> 时间：2012-10-01T13:32:21.797
> 
> 标签：c, string-conversion

我很想使用过时的“atoi”之类的东西，但事实证明我在内核空间中没有它。

我的模块的 write 方法中有这段代码。写入由我在用户空间控制，碰巧用户总是会以这种格式写一些东西：

“0.9 9.5 7.6”

因此 - 我有这段代码来解析它：

```
 ssize_t write_info( struct file *filp, const char __user *buff, unsigned long len, void *data )
{
    char *seedid;
    char *low_in;
    char *high_in;
    char *dropper;
    unsigned long long seedid_var;
    double d_1;
    double d_2;
    printk(KERN_INFO "Whaddup u writin'?\n");
    dropper = kstrdup(buff, 0);
    seedid  = strsep(&dropper, " ");
    printk("HERE IS: %s\n\n", seedid);
    sscanf(seedid, "%lld", &seedid_var);
    printk("AND BACK AGAIN: %lld\n\n\n", seedid_var);

    low_in  = strsep(&dropper, " ");
    printk("HERE IS: %s\n\n", low_in);
    sscanf(low_in, "%f", &d_1);
    printk("AND BACK AGAIN: %f\n\n", d_1);

    high_in  = strsep(&dropper, " ");
    printk("HERE IS: %s\n\n", high_in);
    sscanf(high_in, "%f", &d_2);
    printk("AND BACK AGAIN: %f\n\n", d_2);
... 
```

然后，我通过在它创建的 procfile 上回显（调用我的 write 方法）来触发我的模块，如下所示：

```
echo "0.9 9.8 3.4 " > name_of_my_proc 
```

使用 dmesg：

```
[ 2211.808474] Whaddup u writin'?
[ 2211.808505] HERE IS: 0.9
[ 2211.808508] 
[ 2211.808514] AND BACK AGAIN: 0
[ 2211.808516] 
[ 2211.808517] 
[ 2211.808520] HERE IS: 9.8
[ 2211.808522] 
[ 2211.808524] AND BACK AGAIN: %f
[ 2211.808526] 
[ 2211.808529] HERE IS: 3.4
[ 2211.808531] 
[ 2211.808533] AND BACK AGAIN: %f 
```

当打印回内核时......没有任何表现像我想要的那样！我的 0.9 被杀死为 0（这不是一个合法的 long long 值，如果是这样的话，那是有道理的）。最重要的是，我的双打没有被转换——它只是打印字符 %f。我可以做些什么来让它们在我打字时打印出来？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:03:57.837

您使用了错误的扫描码。

```
Scan code:  Data type:
%d          int
%ld         long
%f          float
%lf         double 
```

另请注意，它`long long`是整数数据类型，不能存储小数。

# android - 当我离开我的应用程序以更改设备字体并返回我的应用程序时，它崩溃了。

> ID：12674338
> 
> 赞同：2
> 
> 时间：2012-10-01T13:32:59.297
> 
> 标签：android, android-fragments, android-activity, font-size

我的应用程序有 1 个活动，其中包含一些片段。但是当我进入我的片段（JungleInfo）时，我然后点击菜单按钮并转到手机的“显示”部分以更改我的 android 设备的字体例如）正常到大或大到正常。一旦我这样做了，我再次打开我的应用程序，认为我的应用程序中的文本应该增长/缩小，并且仍然像我在其他应用程序中看到的那样位于同一个片段上，但它只是崩溃了。

这个 Log.i 代码片段是当我从 Activity (MainActivity) -> ListFragment (JungleList-Fragment) -> Fragment (JungleInfo-Fragment)

```
10-01 12:47:45.193: I/MainActivity(1039): onCreate
10-01 12:47:45.453: I/MainActivity(1039): onStart
10-01 12:47:45.483: I/MainActivity(1039): onResume
10-01 12:47:50.913: I/Jungle-ListFragment(1039): onAttach
10-01 12:47:50.923: I/Jungle-ListFragment(1039): onCreateView
10-01 12:47:50.993: I/Jungle-ListFragment(1039): onActivityCreated
10-01 12:47:52.244: I/Jungle-ListFragment(1039): onDestroyView
10-01 12:47:52.244: I/JungleInfo-Fragment(1039): onAttach
10-01 12:47:52.244: I/JungleInfo-Fragment(1039): onCreate
10-01 12:47:52.244: I/JungleInfo-Fragment(1039): onCreateView
10-01 12:47:52.924: I/JungleInfo-Fragment(1039): onActivityCreated 
```

现在我只是去更改了设备的字体大小，然后重新进入了我的应用程序，这就是我得到的：

```
10-01 12:48:23.533: I/JungleInfo-Fragment(1039): onPause
10-01 12:48:23.533: I/MainActivity(1039): onPause
10-01 12:48:24.253: I/MainActivity(1039): onStop
10-01 12:48:54.313: I/JungleInfo-Fragment(1039): onDestroyView
10-01 12:48:54.373: I/MainActivity(1039): onDestroy
10-01 12:48:54.483: I/Jungle-ListFragment(1039): onAttach
10-01 12:48:54.503: I/JungleInfo-Fragment(1039): onAttach
10-01 12:48:54.503: I/JungleInfo-Fragment(1039): onCreate
10-01 12:48:54.503: I/MainActivity(1039): onCreate
10-01 12:48:55.423: I/JungleInfo-Fragment(1039): onCreateView
10-01 12:48:55.483: D/AndroidRuntime(1039): Shutting down VM
10-01 12:48:55.483: W/dalvikvm(1039): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
10-01 12:48:55.513: E/AndroidRuntime(1039): FATAL EXCEPTION: main
10-01 12:48:55.513: E/AndroidRuntime(1039): java.lang.RuntimeException: java.lang.NullPointerException 
```

我追踪了这个以找到什么是空的，我发现了这个，

在我的 JungleInfo 课程中，我有这个：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
...
    jungleChoice = ((MainActivity)getActivity()).fragmentDataJungle.toString();  //This is null when the app gets loaded up again after a device font change.
...
} 
```

现在第一次运行它不是空的，因为我使用它来告诉下一个片段用户在 ListFragment 中选择了什么，但是当我退出以更改设备字体然后重新进入应用程序时，它现在为空。

根据我对其他 StackOverflow 问题和 android 开发者页面的总结，[http://developer.android.com/reference/android/app/Fragment.html#Layout](http://developer.android.com/reference/android/app/Fragment.html#Layout)我认为我需要在我的 Activity 或 Fragments 生命周期中做一些事情（特别是在 onPause()、onResume() 或我在 onCreateView() 方法中收集的关于 Fragments 的内容，因为它处理的是 savedInstanceState）来保存保留在jungleChoice 中的内容。但如果是这种情况，我不知道如何在 onPause() 中保存它，然后在 onResume()/onCreateView() 中重新加载它。任何人都可以阐明我的问题是什么或可能的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:00:03.553

试试这个链接，就持久状态的选项进行很好的讨论。一般来说，savedInstanceState 适用于诸如方向变化之类的瞬态情况，但对于更长的持久性，您可能需要考虑 SQLite 或 SharedPreferences。

[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

祝你好运。

# ios - UITableViewDelegate 方法没有被调用

> ID：12674341
> 
> 赞同：1
> 
> 时间：2012-10-01T13:33:21.590
> 
> 标签：ios, cocoa-touch, uitableview

`UITableViewController`我使用 IB在 Storyboard中创建了一个。我将 设置`UITableview's` `delegate`为它的控制器。有`UITableView`静态单元格。只有2节。第一部分有 3 个不可选择的行。最后一节有 1 行可供选择。我只在 IB 中设置了这一切。

然后我在 UITableViewController 中实现了这个方法。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"SELECTED");

    if (indexPath.section == 1 && indexPath.row == 0) {
        //login and report the result
        [self login];
    }
} 
```

当我选择第二部分中的唯一一行时，上面的方法不会被调用。可能出了什么问题。我还仔细检查了 UITableView 出口检查器中的委托设置。一切都很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:47:51.547

只需这样做：控制将您的 tableView 从 Storyboard 拖到 viewcontroller .h 文件，为 ex 创建 @property。表视图。再次添加到 .h 文件。然后在 viewDidLoad 的 .m 文件中写下：

```
 -(void)viewDidLoad{
       //your other code
       self.tableView.delegate = self;
       self.tableView.dataSource = self;
       //other code ...
     } 
```

我更喜欢使用 tblView 作为属性名称，因为您会看到 tableView 隐藏实例的警告。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:39:01.023

看到控制台中的 NSLog 语句了吗？在 viewDidAppear 中怎么样，`NSLog(@"Delegate: %@",tableView.delegate)`

看看你是否在控制台中得到 NULL 。

您知道数据源已正确连接，否则您将看不到任何单元格。它必须是您的代表连接 =)

# lua - lua：检索表中的键列表

> ID：12674345
> 
> 赞同：45
> 
> 时间：2012-10-01T13:33:45.913
> 
> 标签：lua, lua-table, keyset

我需要知道如何在 lua 中检索表的键集。例如，如果我有下表：

```
tab = {}
tab[1]='a'
tab[2]='b'
tab[5]='e' 
```

我想检索一个如下所示的表：

```
keyset = {1,2,5} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-01T13:35:28.457

```
local keyset={}
local n=0

for k,v in pairs(tab) do
  n=n+1
  keyset[n]=k
end 
```

请注意，您不能保证`keyset`. 如果您希望键按排序顺序排列，请`keyset`使用`table.sort(keyset)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-29T10:40:57.657

```
local function get_keys(t)
  local keys={}
  for key,_ in pairs(t) do
    table.insert(keys, key)
  end
  return keys
end 
```

# sql - Access VBA：查询不返回任何行

> ID：12674346
> 
> 赞同：0
> 
> 时间：2012-10-01T13:33:53.860
> 
> 标签：sql, ms-access, vba, dao, ms-access-2010

我写了一些VBA：

```
For x = LBound(resProdID) To UBound(resProdID)
    CurrentDb.QueryDefs("qry_findID_vba").SQL = "" & _
    "SELECT tbl_products.ProdID " & _
    "FROM tbl_products " & _
    "WHERE (tbl_products.Size = " & resSize(x) & " " & _
    "AND tbl_products.SupplID = '" & Forms.frm_suppliers.SupplID & "')"

    Dim dbs As DAO.Database
    Dim rst As DAO.Recordset

    Set dbs = CurrentDb()
    Set rst = dbs.OpenRecordset("qry_findID_vba")

    MsgBox rst.RecordCount

    If rst.RecordCount <> 0 Then
        rst.MoveLast
        rst.MoveFirst

        newProdID(x) = rst.Fields(0).Value
        MsgBox "This never fires"
     End If

    rst.Close
    Set rst = Nothing
    dbs.Close
    Set dbs = Nothing
Next x 
```

当我运行它时，会弹出一个显示 0 的框。我单击“确定”，它会再重复一次。这是因为我的 resProdID 数组中有两个项目。

但是，如果我正常打开查询“qry_findID_vba”，它会显示一行，就像我预期的那样。

为什么 VBA 不返回这一行？我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:05:08.460

此代码消息框的计数是否正确？你可以用它来代替吗？（注意，我实际上并没有运行它，所以要注意轻微的语法错误。）

```
For x = LBound(resProdID) To UBound(resProdID) 
    Dim sql as String
    Dim rst As DAO.Recordset 
    sql = "Select tbl_products.ProdID FROM tbl_products " & _
          "WHERE (tbl_products.Size = " & resSize(x) & " " & _
          "AND tbl_products.SupplID = '" & Forms.frm_suppliers.SupplID & "')" 
    Set rst = dbs.OpenRecordset(sql)
    if not rst.eof then 
        MsgBox rst.fields("ProdID")    
    else
        Msgbox "None found!"
    end if
    rst.Close 
    Set rst = Nothing 
Next x 
```

此外，尝试将所有内容复制到新表单，并压缩和修复数据库......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:56:38.923

首先，您确实应该使用 QueryDef 参数。它们提供了许多好处：

*   防止格式错误的输入和 SQL 注入的安全网。
*   您无需在每次参数值更改时重新定义查询 SQL 文本。
*   它们使您的 VBA 独立于查询文本。这是一个简单的查询，但如果您不必为了更改 SQL 而更改 VBA 代码，则更复杂的查询会受益。
*   它们提供类型安全——您可以在 VBA 中使用类型化变量，并确保查询不会因数据类型错误而失败。
*   它们可以重复使用——例如，参数化查询可以绑定到表单或直接执行。
*   最后但同样重要的是，在 VBA 中使用时，它看起来更漂亮、更清晰。

您的情况正是参数化 QueryDefs 的用途。

`qry_findID_vba`将Access中的查询文本更改为：

```
PARAMETERS [ProductSize] Text (255), [SupplID] Number;
SELECT ProdID
FROM tbl_products
WHERE [tbl_products].[Size] = [ProductSize] AND [tbl_products].[SupplID] = [SupplID]; 
```

根据您在表中的实际数据类型替换参数数据类型。

接下来，当您处于循环中时，不要一次又一次地重新定义固定变量。`dbs`并且`rst`根本不需要在循环内定义。

最后一点，该`RecordCount`属性并不像您想象的那样工作。[引用文档](http://msdn.microsoft.com/en-us/library/office/ff821452.aspx)，强调我的：

> 使用该`RecordCount`属性可查明 Recordset 或 TableDef 对象中有多少条记录已被访问。**在访问所有记录之前****，RecordCount 属性不指示** 动态集、快照或仅转发类型的Recordset 对象中包含多少记录。 [...] 要强制访问最后一条记录，请使用Recordset 对象上的方法。**`MoveLast`**

 **除了调用`MoveLast`，您还可以检查`.EOF`属性。如果为假，则至少有一条记录可用。

对于像这样的一次性查询结果，我建议使用快照类型 Recordset。您可以在调用QueryDef时定义[要使用的类型。](http://msdn.microsoft.com/en-us/library/office/bb225803%28v=office.12%29.aspx)`OpenRecordset`

现在：

```
Dim qry_findID_vba As DAO.QueryDef 
Set qry_findID_vba = CurrentDb().QueryDefs("qry_findID_vba")

qry_findID_vba.Parameters("SupplID") = Forms.frm_suppliers.SupplID

For x = LBound(resProdID) To UBound(resProdID)
    qry_findID_vba.Parameters("ProductSize") = resSize(x)

    With qry_findID_vba.OpenRecordset(dbOpenSnapshot)
        If Not .EOF Then 
            newProdID(x) = .Fields("ProdID").Value 
        End If
    End With
Next x 
```

请注意，我`With`用来保存维护辅助`rst`变量。**

# c# - extjs actioncolumn 渲染器阻止处理程序

> ID：12674350
> 
> 赞同：1
> 
> 时间：2012-10-01T13:34:04.367
> 
> 标签：c#, extjs

我的网格上有一个带有以下代码的操作列：

```
 this.columns =
    [
        {
            xtype: 'actioncolumn',
            items: [{
                icon: '../Content/Images/Approve.png',
                handler: function (grid, rowIndex, colIndex, node, e, record, rowNode) {
                    alert('test approve')
                }
            }
          ...rest of the columns 
```

当我单击该图标时，我收到“测试批准”消息，因此它按预期工作！

如果我在下面添加渲染方法以禁用已批准行的操作列：

```
 renderer: function (value, metadata, record) {
                if (record.get('Approved') = 1) {                        
                    this.items[0].disabled = true
                } else {
                    this.items[0].disabled = false;                       
                }
            } 
```

`handler`停止在启用的项目上工作。似乎该`renderer`功能正在阻止`handler`被调用。我什至尝试在`handler`里面添加代码`renderer`，也没有成功。

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T21:22:56.120

您在 if 语句中的条件语句，我假设您的意思是比较而不是分配。那可能是你的代码被破坏的地方

# c# - C# 中的文件搜索

> ID：12674359
> 
> 赞同：-5
> 
> 时间：2012-10-01T13:34:28.827
> 
> 标签：c#

我做了这个代码：

```
string[] paths = GetFiles(dir).ToArray();

int numberOfFiles = paths.Length;
int i = 0;
while (i < numberOfFiles - 1)
{
    scanfile(paths[i]);
    i++;
} 
```

对于 GetFiles：

```
static IEnumerable<string> GetFiles(string path) {
Queue<string> queue = new Queue<string>();
queue.Enqueue(path);
while (queue.Count > 0)
{
    path = queue.Dequeue();
    try
    {
        foreach (string subDir in Directory.GetDirectories(path))
        {
            queue.Enqueue(subDir);
        }
    }
    catch (Exception ex)
    {
        Console.Error.WriteLine(ex);
    }
    string[] files = null;
    try
    {
        files = Directory.GetFiles(path);
    }
    catch (Exception ex)
    {
        Console.Error.WriteLine(ex);
    }
    if (files != null)
    {
        for (int i = 0; i < files.Length; i++)
        {
            yield return files[i];
        }
    }
}
}

public string scanfile(string path)
    {
        int offset = 0;
        int length = 0;
        byte[] buffer;
        var variable1 = new StringBuilder();

        FileInfo fi = new FileInfo(path);
        length = (int)fi.Length;

            using (var mmf1 = MemoryMappedFile.CreateFromFile(path,
                FileMode.OpenOrCreate, null, offset + length))
            {
                // Create reader to MMF
                using (var reader = mmf1.CreateViewAccessor(300,
                4000, MemoryMappedFileAccess.Read))
                {
                    // Read from MMF
                    buffer = new byte[4000];
                    reader.ReadArray<byte>(0, buffer, 0, 4000);
                }
            }

        return variable1.ToString();

    } 
```

PS：获取文件我也是从 Stack Overflow 中获取的。

但是，如果我将它用于目录中的许多文件，它会非常慢，因为它首先计算目录中的文件。

你能帮我优化这些代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:47:27.237

好的，让我们看看我们是否可以简化一下。让我们使用此代码获取所有文件：

```
// Get list of files in the specific directory.
// ... Please change the first argument.
string[] files = Directory.GetFiles("{root path}",
    "*.*",
    SearchOption.AllDirectories); 
```

请注意，`AllDirectories`记录如下：

> 在搜索操作中包括当前目录及其所有子目录。此选项包括重新分析点，例如搜索中的已安装驱动器和符号链接。

现在让我们使用一个简单的`foreach`循环来遍历它们：

```
foreach (var file in files)
{
    // ... do something
} 
```

有没有理由这不起作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:37:34.977

您应该使用 foreach 循环遍历 GetFiles 的结果，而不是将其作为数组获取，然后扫描单个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:13:44.363

简单地看看[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd383571.aspx)。他们也是如何遍历所有 *.txt 文件并获取包含*Microsoft*的所有行的示例。

该示例还通过简单地跳过此文件来处理未经授权的访问异常。

# android - 如何在自定义邮件发件人中从文件浏览器和相机传递附件

> ID：12674360
> 
> 赞同：0
> 
> 时间：2012-10-01T13:34:30.247
> 
> 标签：android, android-camera, attachment, email-attachments, android-file

我使用教程来实现自定义电子邮件发件人，

现在我有这个代码

```
 try {
      m.addAttachment("/sdcard/filelocation");

      if(m.send()) {
        Toast.makeText(Comunic.this, "Ok", Toast.LENGTH_LONG).show();
      } else {
        Toast.makeText(Comunic.this, "Error.", Toast.LENGTH_LONG).show();
      }
    } catch(Exception e) {
      Toast.makeText(Comunic.this, "Error.", Toast.LENGTH_LONG).show();
    } 
```

并且需要传入

```
m.addAttachment("/sdcard/filelocation"); 
```

从文件浏览器中选择的文件或照片（根据用户的选择）。

我怎样才能做到这一点？

`m`是一个`Mail Object`

```
Mail m = new Mail(username, password); 
```

邮件类是

```
 public class Mail extends javax.mail.Authenticator {
      private String _user;
      private String _pass;

      private String[] _to;
      private String _from;

      private String _port;
      private String _sport;

      private String _host;

      private String _subject;
      private String _body;

      private boolean _auth;

      private boolean _debuggable;

      private Multipart _multipart;

      public Mail() {
        _host = "smtp.gmail.com"; // default smtp server
        _port = "465"; // default smtp port
        _sport = "465"; // default socketfactory port

        _user = ""; 
        _pass = "";
        _from = ""; // email sent from
        _subject = ""; // email subject
        _body = ""; // email body

        _debuggable = false; // debug mode on or off - default off
        _auth = true; // smtp authentication - default on

        _multipart = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added.
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
        mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
        CommandMap.setDefaultCommandMap(mc);
      }

      public Mail(String user, String pass) {
        this();

        _user = user;
        _pass = pass;
      }

      public boolean send() throws Exception {
        Properties props = _setProperties();

        if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) {
          Session session = Session.getInstance(props, this);

          MimeMessage msg = new MimeMessage(session);

          msg.setFrom(new InternetAddress(_from));

          InternetAddress[] addressTo = new InternetAddress[_to.length];
          for (int i = 0; i < _to.length; i++) {
            addressTo[i] = new InternetAddress(_to[i]);
          }
            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

          msg.setSubject(_subject);
          msg.setSentDate(new Date());

          // setup message body
          BodyPart messageBodyPart = new MimeBodyPart();
          messageBodyPart.setText(_body);
          _multipart.addBodyPart(messageBodyPart);

          // Put parts in message
          msg.setContent(_multipart);

          // send email
          Transport.send(msg);

          return true;
        } else {
          return false;
        }
      }

  public void addAttachment(String filename) throws Exception {
    BodyPart messageBodyPart = new MimeBodyPart();
    DataSource source = new FileDataSource(filename);
    messageBodyPart.setDataHandler(new DataHandler(source));
    messageBodyPart.setFileName(filename);

    _multipart.addBodyPart(messageBodyPart);
  }

  @Override
  public PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(_user, _pass);
  }

  private Properties _setProperties() {
    Properties props = new Properties();

    props.put("mail.smtp.host", _host);

    if(_debuggable) {
      props.put("mail.debug", "true");
    }

    if(_auth) {
      props.put("mail.smtp.auth", "true");
    }

    props.put("mail.smtp.port", _port);
    props.put("mail.smtp.socketFactory.port", _sport);
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false");

    return props;
  }

      public String getBody() {
        return _body;
      }

      public String getFrom() {
            return _from;
      }

      public String[] getTo() {
            return _to;
      }

      public String getSubject() {
            return _subject;
      }

      public void setBody(String _body) {
        this._body = _body;
      }

      public void setFrom(String _from) {
            this._from = _from;
      }

      public void setTo(String[] _to) {
            this._to = _to;
      }

      public void setSubject(String _subject) {
            this._subject = _subject;
      }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:27:23.263

检查您发送的文件路径`/mnt/sdcard/mnt/sdcard/AAAAAA/readme.txt`。

**/mnt/sdcard/**重复两次..

# wpf - wpf 3d，Model3DGroup的多个实例，试图优化性能

> ID：12674361
> 
> 赞同：2
> 
> 时间：2012-10-01T13:34:32.010
> 
> 标签：wpf, performance, 3d

我的程序显示了一个静态场景，其中包含在不同位置的 3d 模型（例如树）的多个实例。该模型可能很“重”，介于 50000 到 100000 个三角形之间，并且性能会随着实例数量的增加而迅速下降（超过 10 个实例时性能无法接受）。

我的第一个代码，没有优化，看起来像这样：

```
 public partial class Vue3D : Window
   {
    public ModelVisual3D modelVisual = new ModelVisual3D();
    public Model3DGroup model3DGroup = new Model3DGroup();

    public Vue3D()
      {
        ...
        modelVisual.Content = model3DGroup;
        view1.Children.Add(modelVisual); // view1 = viewport3D
        ...
        BuildScene();
      }

    void BuildScene()
      {
        Model3DGroup model = GetModel("tree");
        foreach (Point3D pnt in <point collection>)
        {
          Model3DGroup modelClone = model.Clone();
          Transform3DGroup tg = new Transform3DGroup();
          tg.Children.Add(new TranslateTransform3D(pnt.X, pnt.Y, pnt.Z>)); 
          modelClone.Transform = tg;
          model3DGroup.Children.Add(modelClone);
        }
      }
  } 
```

对于每个实例，我克隆完整的模型，并在转换后将克隆添加到视口。假设树模型包含 2 个 GeometryModel3D：{mesh1（20000 个三角形），texture1} 和 {mesh2（40000 个三角形），texture2}。如果我展示 10 棵树，我将添加 20 个 GeometryModel3D。

由于所有这些实例共享相同的 2 个纹理，我认为我可以通过仅创建 2 个 GeometryModel3D 来加快速度：一个具有与纹理 1 关联的所有三角形，一个具有与纹理2 关联的所有三角形。这就是我在这段代码中尝试的：

```
void BuildScene()
  {
    List<Transform3DGroup>> listTg = new List<Transform3DGroup>();
    foreach (Point3D pnt in <point collection>)
    {
      Transform3DGroup tg = new Transform3DGroup();
      tg.Children.Add(new TranslateTransform3D(pnt.X, pnt.Y, pnt.Z>)); 
      listTg.Add(tg);
    }
    Model3DGroup model = GetModel("tree");
    foreach (GeometryModel3D gmodel in model.Children)
    {
      MeshGeometry3D mesh = gmodel.Geometry as MeshGeometry3D;
      GeometryModel3D newgmodel = new GeometryModel3D();
      newgmodel.Material = gmodel.Material;
      newgmodel.BackMaterial = gmodel.BackMaterial;
      MeshGeometry3D newmesh = new MeshGeometry3D();
      newgmodel.Geometry = newmesh;
      foreach (Transform3DGroup tg in listTg)
      {
        foreach (int indice in mesh.TriangleIndices)
          newmesh.TriangleIndices.Add(indice + newmesh.Positions.Count);
        foreach (Point3D p3 in mesh.Positions)
          newmesh.Positions.Add(tg.Transform(p3));
        if (mesh.TextureCoordinates != null)
        {
          foreach (System.Windows.Point p in mesh.TextureCoordinates)
            newmesh.TextureCoordinates.Add(p);
        }
      }
      newmesh.TriangleIndices.Freeze();
      newmesh.TextureCoordinates.Freeze();
      newmesh.Positions.Freeze();
      newgmodel.Material.Freeze();
      newgmodel.BackMaterial.Freeze();
      newgmodel.Freeze();
      model3DGroup.Children.Add(newgmodel);
    }
  } 
```

而且性能并没有更好，实际上更糟......我在这里错过了什么？看来我的假设是错误的，即最小化 GeometryModel3D 的数量是有益的。我在某处读过，在 wpf 3d 中，三角形的数量对性能没有太大影响，但纹理的数量更为关键。在这里，我有大量的三角形，但只有 2 个纹理，只有一个 ModelVisual3D，而且全部都被冻结了……有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:27:35.707

我很幸运地分离了网格，应用了任何变换，然后重新连接了网格。我从这里得到了这个想法：http: [//msdn.microsoft.com/en-us/library/bb613553.aspx](http://msdn.microsoft.com/en-us/library/bb613553.aspx)

# sql - SQL 将处理后的 id 添加到以逗号分隔的单个单元格

> ID：12674363
> 
> 赞同：1
> 
> 时间：2012-10-01T13:34:40.220
> 
> 标签：sql, sql-server, datatable, sql-server-2008-r2, conditional

我有以下 sql 查询来了解它的作用请阅读下面的描述

```
select catalogid, numitems, allitems - numitems ignoreditems
    from (
      select i.catalogid,
        sum(case when (ocardtype in ('PayPal','Sofort') OR
                       ocardtype in ('mastercard','visa') and
                       odate is not null) AND NOT EXISTS (
                         select * from booked b
                         where b.ignoredoid = o.orderid
                       ) then numitems
                       else 0 end) numitems,
        sum(numitems) allitems
      from orders o
      join oitems i on i.orderid=o.orderid
      group by i.catalogid
    ) X 
```

以及以下 sql 表

项目表

```
+---------+-----------+----------+
| orderid | catalogid | numitems |
+---------+-----------+----------+
| O737    |       353 |        1 |
| O738    |       364 |        4 |
| O739    |       353 |        3 |
| O740    |       364 |        6 |
| O741    |       882 |        2 |
| O742    |       224 |        5 |
| O743    |       224 |        2 |
+---------+-----------+----------+ 
```

订单表

```
 +-----------------+------------+------------+
    |         orderid | ocardtype  |   odate    |
    +-----------------+------------+------------+
    |     O737        | Paypal     |            | 'OK
    |     O738        | MasterCard | 01.02.2012 | 'OK
    |     O739        | MasterCard | 02.02.2012 | 'OK
    |     O740        | Visa       | 03.02.2012 | 'OK
    |     O741        | Sofort     |            | 'OK
    |     O742        |            |            | 'ignore because ocardtype is empty
    |     O743        | MasterCard |            | 'ignore because Mastercard no odate
    +-----------------+------------+------------+ 
```

结果数据表

```
+-----------+----------+--------------+
| catalogid | numitems | ignoreditems |
+-----------+----------+--------------+
|       353 |        4 |            0 |
|       364 |       10 |            0 |
|       882 |        2 |            0 |
|       224 |        0 |            7 |
+-----------+----------+--------------+ 
```

想法是根据 oitems 表中的数据对具有相同目录 ID 的产品的 numitems 列求和，并具有以下条件

1.  如果`ocardtype`为空，则忽略`numitems`并将其视为`0` 总和并将忽略的项目加到`ignoreditems`列中
2.  如果`ocardtype`某些订单是 MasterCard 或 Visa 并且`odate`为空 然后忽略`numitems`并将其视为`0`并将忽略的项目汇总到`ignoreditems`列
3.  如果 ocardtype 是 Paypal 或 Sofort，那么只需进行`numitems`总和而不检查，`odate`因为这些类型不需要`odate`
4.  在另一个名为booked 的表中，我有一个名为ignoreoid 的列，此列包含`orderids`上表中我想忽略的列，即使满足上述3 个条件

至此，感谢@Richard aka cyberkiwi 对他在这个[问题上的回答，查询运行良好](https://stackoverflow.com/questions/12668630/sql-select-case)

* * *

问题是，我需要结果数据表如下所示

```
+-----------+----------+--------------+-------------------+
| catalogid | numitems | ignoreditems | orderidcollection |
+-----------+----------+--------------+-------------------+
|       353 |        4 |            0 | O737,O739         |
|       364 |       10 |            0 | O738,O740         |
|       882 |        2 |            0 | O741              |
|       224 |        0 |            7 |                   |'O742 & O743 are ignored      
+-----------+----------+--------------+-------------------+ 
```

如您所见，唯一的变化是添加了`orderidcollection`列，只有在代码中没有忽略该顺序时，它才必须将 以逗号分隔的新列添加`orderid`到新列中，我已经搜索了几个小时没有运气！这甚至可以用 SQL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:37:25.697

我对您上一个问题的 Linq-to-Sql 回答扩展到了这个问题（LINQpad 查询）：

```
Dim odateRequired = {"MasterCard", "Visa"}
Dim odateNotRequired = {"Paypal", "Sofort"}

Dim result = From o In Orders Join i In Oitems On o.orderid Equals i.orderid _
             Let check = Not (From b In Bookeds Where b.ignoredoid=i.orderid).Any _
                     AndAlso o.ocardtype IsNot Nothing _
                     AndAlso ((odateRequired.Contains(o.ocardtype) AndAlso o.odate IsNot Nothing) _
                        OrElse odateNotRequired.Contains(o.ocardtype)) _
         Group By i.catalogid Into _
         numitems = Sum(If(check, i.numitems, 0)), _
         ignoreditems = Sum(If(check, 0, i.numitems)), _
         group
         Select catalogid, numitems, ignoreditems, _
             orderidcollection = String.Join(",", (From g in group Where g.check Select g.i.orderid))
result.Dump 
```

请注意，此解决方案会发出多个 SQL 查询来确定`orderids`for each `catalogid`where`check`是`True`要累积 each`orderidcollection`的。`String.Join`可能有一个更有效的解决方案（或者使用一些可能令人费解的 Linq- `catalogid, numitems, check, orderid`to -Sql 导致生成的 SQL 执行相当于最后的积累）。

另请注意，此查询包括您的`Booked`表（使用 LINQpad 的复数形式）。

# asp.net - ASP.Net MVC 没有路由，但默认工作正常

> ID：12674368
> 
> 赞同：0
> 
> 时间：2012-10-01T13:34:51.777
> 
> 标签：asp.net, asp.net-mvc

我在我的应用程序中添加了一个新控制器，然后从那里添加了一个新视图（右键单击，在上下文菜单上添加视图）

我已将路由添加到 Route 表，但是当我浏览到它时，我得到一个`404`.

我只能假设这是一个根本性的错误，就好像我替换了默认路由中的值一样，我仍然无法访问我的页面。

路由表是；

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
    "Classroom",
    "{controller}/{action}/",
    new { controller = "Classroom", action = "Index" }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    //defaults: new { controller = "Classroom", action = "Index", id = UrlParameter.Optional }
); 
```

只有回报`View()`；在索引方法中。我已经安装了 Glimpse，但是当我得到一个 404 时，我实际上看不到正在传回的 url。

那么，我可以使用哪些技术/技巧来追踪它，（以及任何可能导致这种情况的常见问题？）

Visual Studio 2012，使用内置的网络服务器。

这是固定的。对我来说，这是一个愚蠢的问题。控制器被称为 Classroom 而不是 ClassroomController

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:36:23.137

> 我已将路线添加到 Route 表

不，您不需要为此添加任何路线。摆脱`Classroom`你的路线，`Global.asax`只留下`Default`一条。现在您可以安全地导航到您的控制器，使用`/classroom/index`它将`Index`呈现`ClassroomController`.

# castle-windsor - 当 URI 未知时在容器中注册 WcfClient

> ID：12674369
> 
> 赞同：5
> 
> 时间：2012-10-01T13:35:03.007
> 
> 标签：castle-windsor, wcf-client

在我注册一个新的 WCF 端点时，我不知道 URI 是什么......

```
public void Install(IWindsorContainer container, IConfigurationStore store)
{
   var defaultClientModel = new DefaultClientModel
   {
     Endpoint = WcfEndpoint
       .ForContract<IMyService>()
       .BoundTo(new WSHttpBinding(SecurityMode.None))
       .At(  URI??? )
   };

   container.Register(WcfClient.ForChannels(defaultClientModel));
} 
```

有什么方法可以在请求 IMyService 实例时从容器中检索 URI（这是已知的）？

是否可以使用工厂方法/动态参数之类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:28:38.777

看起来您可以在 Windsor 3.1 中使用以下语法来执行此操作：

```
public void Install(IWindsorContainer container, IConfigurationStore store)
{
container.Register(
    Component.For<IMyService>()
    .AsWcfClient()
    .DependsOn((k, d) =>
        d["EndPoint"] = WcfEndpoint.BoundTo(new WSHttpBinding(SecurityMode.None)).At( URI??? )));
} 
```

Windsor 将在首次解析 IMyService 时尝试使用给定的动态解析委托解析端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:22:34.970

我认为您想使用[UsingFactoryMethod](http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx#Using_a_delegate_as_component_factory_6)来创建您的服务。

*   我会在容器中注册一个自定义 UriResolver
*   在工厂方法中解析上述 UriResolver 的实例（在需要解析服务之前不会调用它）
*   在工厂方法中创建服务
*   搜索城堡温莎 doco 并发誓很多。

以下链接可能有用

[ravendb，城堡 IoC，Wcf 设施 - 文档会话 liefstyle](https://stackoverflow.com/questions/5310397/ravendb-castle-ioc-wcf-facility-doc-session-liefstyle)

[使用 Castle Windsor WcfFacility 创建客户端端点](https://stackoverflow.com/questions/10085172/using-castle-windsor-wcffacility-to-create-client-endpoints)

[http://www.mail-archive.com/castle-project-users@googlegroups.com/msg09012.html](http://www.mail-archive.com/castle-project-users@googlegroups.com/msg09012.html)（这个看起来有你需要的类似代码）

[https://stackoverflow.com/questions/10250077/problems-using-castle-windsor-factory-method](https://stackoverflow.com/questions/10250077/problems-using-castle-windsor-factory-method)

[将参数传递给 Castle Windsor 中的 UsingFactoryMethod](https://stackoverflow.com/questions/5453648/passing-parameters-to-usingfactorymethod-in-castle-windsor)

[Castle Windsor：UsingFactoryMethod 无法实例化并出现奇怪的错误](https://stackoverflow.com/questions/1837893/castle-windsor-usingfactorymethod-cant-instantiate-with-a-weird-error)

[http://docs.castleproject.org/Default.aspx?Page=Typed-Factory-Facility-interface-based-factories&NS=Windsor&AspxAutoDetectCookieSupport=1](http://docs.castleproject.org/Default.aspx?Page=Typed-Factory-Facility-interface-based-factories&NS=Windsor&AspxAutoDetectCookieSupport=1)

# iphone - 在应用程序开发中的异步调用中，来自服务器的响应在客户端（IOS）中为空

> ID：12674379
> 
> 赞同：1
> 
> 时间：2012-10-01T13:35:39.500
> 
> 标签：iphone, objective-c, ios, xcode

我正在从客户端对服务器进行异步调用，并在服务器上打印数据。但是我在客户那里得到的回应是空的

我的回复检索部分如下：-

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
    NSLog(@"connection did receive response");

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    // Append the new data to receivedData.
    // receivedData is an instance variable declared elsewhere
    if(!receivedData)
    {
        receivedData = [NSMutableData data];
    }

    [receivedData appendData:data];

    NSLog(@"connection did receive data");
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
    // inform the user
    NSLog(@"Connection failed! Error - %@ %@",

    [error localizedDescription],
    [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // receivedData is declared as a method instance elsewhere
    NSString *responseFromServer = [[NSString alloc]initWithData:receivedData encoding:NSUTF8StringEncoding]; 
    NSLog(@"connection did finish load");
    NSLog(@"response from the server=%@", responseFromServer);
 } 
```

所以'responseFromServer'的值是空的。

谁能告诉我我哪里出错了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:40:34.060

您确定`receivedData`包含 UTF8 编码的数据 = 字符串吗？`initWithData:encoding:`文档...

**返回值**

通过使用编码将数据中的字节转换为 Unicode 字符来初始化的 NSString 对象。返回的对象可能与原始接收者不同。**如果由于某种原因初始化失败（例如，如果数据不代表用于编码的有效数据），则返回 nil。**

...如您所见，如果初始化失败，它将返回 nil 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:30:26.047

如果您没有强烈引用接收数据，您可能想要开始这样做

`receivedData = [NSMutableData data];`是一个自动释放的对象。确保 receivedData 是一个强属性或保留属性，然后像这样设置它`self.receivedData = [NSMutableData data];`

在最终的 connectionDelegate 方法触发之前 receivedData 可能会自动释放，因此 responseString 在 initWithData 方法中使用 nil 数据

# python - 非阻塞客户端中的事务？

> ID：12674384
> 
> 赞同：2
> 
> 时间：2012-10-01T13:35:52.963
> 
> 标签：python, sql, postgresql, asynchronous, tornado

我们正在使用[momoko](http://momoko.61924.nl/index.html)并在 tornado 应用程序中使用以下标准设置异步连接到数据库：

```
class BaseHandler(tornado.web.RequestHandler):
    @property
    def db(self):
        # Create a database connection when a request handler is called
        # and store the connection in the application object.
        if not hasattr(self.application, 'db'):
            self.application.db = momoko.AsyncClient({
                'host': 'localhost',
                'database': 'momoko',
                'user': 'frank',
                'password': '',
                'min_conn': 1,
                'max_conn': 20,
                'cleanup_timeout': 10
            })
        return self.application.db 
```

有一天，我发现这样的代码会阻塞应用程序：

```
fail = yield gen.Task(self.db.execute, 'BEGIN; SELECT * FROM non_existing_table; END;') 
```

脑海中浮现的第一个想法是：

```
try:
    fail = yield gen.Task(self.db.execute, 'BEGIN; SELECT * FROM non_existing_table; END;')
except:
    reconnect() 
```

在研究了一些主题之后，我发现最好做这样的事情：

```
try:
    fail = yield gen.Task(self.db.execute, 'BEGIN; SELECT * FROM non_existing_table; END;')
except:
    yield gen.Task(self.db.execute, 'ROLLBACK;') 
```

最后，在探索了momoko的[源代码](https://github.com/FSX/momoko/blob/master/momoko/clients.py#L34)后，我发现最好使用阻塞客户端进行事务。

于是 BaseHandler 转化为：

```
class BaseHandler(tornado.web.RequestHandler):
    @property
    def db(self):
        # Create a database connection when a request handler is called
        # and store the connection in the application object.
        if not hasattr(self.application, 'db'):
            self.application.db = momoko.AsyncClient({
                'host': 'localhost',
                'database': 'momoko',
                'user': 'frank',
                'password': '',
                'min_conn': 1,
                'max_conn': 20,
                'cleanup_timeout': 10
            })
        return self.application.db

    @property
    def bdb(self):
        # Create a database connection when a request handler is called
        # and store the connection in the application object.
        if not hasattr(self.application, 'bdb'):
            self.application.bdb = momoko.BlockingClient({
                'host': 'localhost',
                'database': 'momoko',
                'user': 'frank',
                'password': '',
                'min_conn': 1,
                'max_conn': 20,
                'cleanup_timeout': 10
            })
        return self.application.bdb 
```

现在我的问题......有什么安全的方式来使用交易`AsyncClient`吗？或者`AsyncClient`通常用于从数据库中读取，而不是用于在那里写入/更新数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:03:14.880

我正在开发 Momoko 1.0.0，我刚刚发布了第一个测试版。交易是新功能之一。这是我在邮件列表上的帖子：[https ://groups.google.com/forum/?fromgroups=#!topic/python-tornado/7TpxBQvbHZM](https://groups.google.com/forum/?fromgroups=#!topic/python-tornado/7TpxBQvbHZM)

1.0.0 之前的版本不支持事务，因为每次运行`execute`时都有可能`AsyncClient`为您选择一个新连接，如果出现任何问题，您将无法回滚事务。

我希望这个能有一点帮助。:)

# python - python中具有3位数字的最高回文

> ID：12674389
> 
> 赞同：7
> 
> 时间：2012-10-01T13:36:04.633
> 
> 标签：python, math, logic, palindrome

在[http://projecteuler.net/](http://projecteuler.net/)的问题 4 中，它说：

> 回文数的两种读法都是一样的。由两个 2 位数字的乘积构成的最大回文数是 9009 = 91 * 99。
> 
> 找出由两个 3 位数字的乘积构成的最大回文数。

我这里有这段代码

```
def isPalindrome(num):
    return str(num) == str(num)[::-1]
def largest(bot, top):
    for x in range(top, bot, -1):
        for y in range(top,bot, -1):
            if isPalindrome(x*y):
                return x*y
print largest(100,999) 
```

它应该找到最大的回文，它吐出`580085`我认为是正确的，但欧拉项目不这么认为，我这里有什么问题吗？

* * *

当我崇敬 for 循环时，我没有考虑清楚，我删除了检查最大的、愚蠢的我的东西。这是工作代码

```
def isPalindrome(num):
    return str(num) == str(num)[::-1]
def largest(bot, top):
    z = 0
    for x in range(top, bot, -1):
        for y in range(top,bot, -1):
            if isPalindrome(x*y):
                if x*y > z:
                    z = x*y
    return z
print largest(100,999) 
```

它吐出 906609

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T13:40:57.100

反向迭代不会找到最大的`x*y`，它会找到最大的回文`x`。有比 580085 更大的答案；它有一个更小`x`但更大的`y`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T13:48:17.830

这将更有效地写成：

```
from itertools import product

def is_palindrome(num):
    return str(num) == str(num)[::-1]

multiples = ( (a, b) for a, b in product(xrange(100,999), repeat=2) if is_palindrome(a*b) )
print max(multiples, key=lambda (a,b): a*b)
# (913, 993) 
```

`itertools`如果你在 Python 中做 Euler，你会发现生成器非常有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-13T09:27:13.063

不是最有效的答案，但我确实喜欢它足够紧凑，可以放在一条线上。

```
print max(i*j for i in xrange(1,1000) for j in xrange(1,1000) if str(i*j) == str(i*j)[::-1]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-26T08:31:59.677

尝试使其更高效，同时保持清晰：

```
def is_palindrome(num):
    return str(num) == str(num)[::-1]

def fn(n):
    max_palindrome = 1
    for x in range(n,1,-1):
        for y in range(n,x-1,-1):
            if is_palindrome(x*y) and x*y > max_palindrome:
                max_palindrome = x*y
            elif x * y < max_palindrome:
                break
    return max_palindrome

print fn(999) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-20T15:01:02.167

这里我添加了两个'break'来提高这个程序的速度。

```
def is_palindrome(num):
    return str(num) == str(num)[::-1]
def max_palindrome(n):
    max_palindrome = 1
    for i in range(10**n-1,10**(n-1)-1,-1):
        for j in range(10**n-1,i-1,-1):
            if is_palindrome(i*j) and i*j > max_palindrome:
                max_palindrome = i * j
                break
            elif i*j < max_palindrome:
                break
    return max_palindrome
n=int(raw_input())
print max_palindrome(n) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-01T03:30:41.643

简单的：

```
def is_pallindrome(n):
    s = str(n)
    for n in xrange(1, len(s)/2 + 1):
        if s[n-1] != s[-n]:
            return False    
    return True

largest = 0
for j in xrange(100, 1000):
    for k in xrange(j, 1000):
        if is_pallindrome(j*k):
            if (j*k) > largest: largest = j*k
print largest 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-01T12:27:10.887

每次它不必从 999 开始，因为它已经在前面找到了。下面是一个使用字符串函数的简单方法，使用三位数字找到最大回文

```
def palindrome(y):
    z=str(y)
    w=z[::-1]
    if (w==z):
        return 0
    elif (w!=z):
        return 1        
h=[]
a=999
for i in range (999,0,-1):
    for j in range (a,0,-1):
    l=palindrome(i*j)
    if (l==0):
        h=h+[i*j]               
    a-=1
print h
max=h[0]

for i in range(0,len(h)):
    if (h[i] > max):
    max= h[i]
print "largest palindrome using multiple of three digit number=%d"%max 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-03T23:28:06.610

这是我解决这个问题的代码。

```
lst = []
for i in range(100,1000): 
    for n in range(2,i) : 
        lst.append (i* n) 
        lst.append(i*i)

lst2=[]
for i in lst: 
    if str(i) == str(i)[::-1]:
        lst2.append(i)
print max(lst2) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-28T17:41:21.827

580085 = 995 X 583，其中 906609 = 993 X 913。只有通过从上到下应用暴力破解才能找到它！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-18T12:39:24.497

这是我的 Python 代码：

```
max_pal = 0
for i in range(100,999):
    for j in range(100,999):
      mult = i * j 
      if str(mult) == str(mult)[::-1]: #Check if the number is palindrome
          if mult > max_pal: 
              max_pal = mult
print (max_pal) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-02T22:29:05.383

```
def div(n):
    for i in range(999,99,-1):
        if n%i == 0:
            x = n/i
            if x % 1 == 0:
                x = n//i
                if len(str(x)) == 3:
                    print(i)
                    return True
    return False

def palindrome():
    ans = []
    for x in range(100*100,999*999+1):
        s = str(x)
        s = int (s[::-1])
        if x - s == 0:
            ans.append(x)

    for x in range(len(ans)):
        y = ans.pop()
        if div(y):
            return y

print(palindrome()) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-21T15:28:15.800

## 这是我在python中创建的用于检查3位数字的乘积是否为回文的函数

## 功能：

```
def is_palindrome(x):
    i = 0
    result = True
    while i < int(len(str(x))/2):
        j = i+1
        if str(x)[i] == str(x)[-(j)]:
            result = True
        else:
            result = False
            break
        i = i + 1
    return result 
```

* * *

主要的：

* * *

```
max_pal = 0
for i in range (100,999):
    for j in range (100,999):
        x = i * j
        if (is_palindrome(x)):
            if x > max_pal:
                max_pal = x

print(max_pal) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-19T10:12:17.287

这是我的解决方案：

```
lst1 = [x for x in range(1000)]
palindrome = []

def reverse(x):
    a = str(x)[::-1]
    return int(a)

x = 0
while x < len(lst1):
    for y in range(1000):
        z = lst1[x] * y
        if z == reverse(z):
            palindrome.append(z)
    x += 1

duppal = set(palindrome)
sortpal = sorted(duppal)
total = sortpal[-1]
print(sortpal)
print('Largest palindrome: ' + str(total)) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-04-26T20:58:43.890

重新思考：效率和绩效

```
def palindrome(n):    

    maxNumberWithNDigits = int('9' * n) #find the max number with n digits

    product = maxNumberWithNDigits * maxNumberWithNDigits 

    #Since we are looking the max, stop on the first match

    while True:        
        if str(product) == str(product)[::-1]: break;

        product-=1

    return product

start=time.time()
palindrome(3)
end=time.time()-start 
```

回文...：997799，0.000138998031616 秒

# android - Draw方法中Bitmap的NullPointer

> ID：12674391
> 
> 赞同：2
> 
> 时间：2012-10-01T13:36:08.773
> 
> 标签：android, canvas, bitmap

我正在尝试在画布上绘制位图。位图返回 null，但我不明白为什么。我已经阅读了 Bitmap 和 decodeResources 的文档。由于 decode 找不到它，drawable 似乎返回 null 。我试图使用调试会话，但我没有走得太远。

请就空异常提出建议。

故障类：

```
public class SnapShot extends Activity {

private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

public void draw(Canvas canvas) {
    drawIcon(canvas);    
}

private void drawIcon(Canvas canvas) {
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.buttongreen); //this is line 36
    canvas.drawBitmap(bitmap, 150, 150, paint);
} 
```

}

堆栈跟踪：

```
10-01 09:24:30.638: E/AndroidRuntime(27206): FATAL EXCEPTION: main
10-01 09:24:30.638: E/AndroidRuntime(27206): java.lang.NullPointerException
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.content.ContextWrapper.getResources(ContextWrapper.java:80)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at com.game.SnapShot.drawIcon(SnapShot.java:36)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at com.game.SnapShot.draw(SnapShot.java:29)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at com.game.onDraw(AugmentedView.java:77)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.View.draw(View.java:6880)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.View.draw(View.java:6883)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.View.draw(View.java:6883)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.ViewRoot.draw(ViewRoot.java:1522)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.os.Looper.loop(Looper.java:130)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at android.app.ActivityThread.main(ActivityThread.java:3683)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at java.lang.reflect.Method.invokeNative(Native Method)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at java.lang.reflect.Method.invoke(Method.java:507)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-01 09:24:30.638: E/AndroidRuntime(27206):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:49:19.273

如果您在视图中编写 drawIcon(Canvas canvas) 方法，那么您应该有一个上下文来调用 getResource()。

例如：

```
Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.buttongreen);
    canvas.drawBitmap(bitmap, 150, 150, paint); 
```

# java - 在jsp中运行jar文件方法

> ID：12674392
> 
> 赞同：-1
> 
> 时间：2012-10-01T13:36:10.810
> 
> 标签：java, jsp, jar

我试图在我的 jsp 中调用 jar 文件方法，但它不调用这些方法。我已将 jar 文件放入`WEB_INF/lib`文件夹并构建路径。我也在我的jsp中正确导入了这个。

这是我的导入代码：

```
<%@ page language="java" %>
<%@ page import="java.util.*" %>
<%@ page import="com.esign.genericlog.*" %> 
```

Genericlog 包含类`GenericLog`，其中包含我试图调用的方法。

这是我调用该方法的代码：

```
<%
    GenericLog gl = new GenericLog();
    String uname = request.getParameter("uname");
    String pass = request.getParameter("password"); 

    gl.write(uname);
    gl.write(pass);
    gl.writeInfo(uname);
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:52:57.987

编译或运行时发现了什么错误？

我有一个使用这样的 jar 类的 jsp 文件：

```
<%@ page import="org.apache.commons.logging.Log" %>
<%
Log log = Log();
log.debug("mi debug message");

%>

<html> ... 
```

并且该类（日志）位于 jar 文件中。尝试导入您必须实例化的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:16:30.823

将您的属性文件放入内置路径。为了清楚地查看这个链接，可能会有所帮助！ [http://www.dzone.com/tutorials/java/log4j/sample-log4j-properties-file-configuration-1.html](http://www.dzone.com/tutorials/java/log4j/sample-log4j-properties-file-configuration-1.html)

# php - 如何区分 SimpleXML 多维数组？

> ID：12674395
> 
> 赞同：0
> 
> 时间：2012-10-01T13:36:16.733
> 
> 标签：php, multidimensional-array, simplexml

我有一个 SimpleXML 对象，它是通过合并来自 PubMed 的多个 XML（下面的片段）制成的，但是合并中有重复。如何比较所有第一个子数组 - array[][0]、array[][1] 等 - 并丢弃任何重复项？我虽然也许序列化是答案，但你不能序列化 SimpleXML 对象 afaik ..

我不知道从哪里开始？

```
Array
(
  [0] => Array
    (
        [title] => SimpleXMLElement Object
            (
                [0] => Superstructure of the centromeric complex of TubZRC plasmid partitioning systems.
            )

        [link] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [Version] => 1
                    )

                [0] => 23010931
            )

        [author] => Aylett, CH., LÃ¶we, J.
        [journal] => SimpleXMLElement Object
            (
                [0] => Proc. Natl. Acad. Sci. U.S.A.
            )

        [pubdate] => 2012-9-27
        [day] => SimpleXMLElement Object
            (
                [0] => 25
            )

        [month] => SimpleXMLElement Object
            (
                [0] => Sep
            )

        [year] => SimpleXMLElement Object
            (
                [0] => 2012
            )

    )
    [1] => Array
    (
        [title] => SimpleXMLElement Object
            (
                [0] => Superstructure of the centromeric complex of TubZRC plasmid partitioning systems.
            )

        [link] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [Version] => 1
                    )

                [0] => 23010931
            )

        [author] => Aylett, CH., LÃ¶we, J.
        [journal] => SimpleXMLElement Object
            (
                [0] => Proc. Natl. Acad. Sci. U.S.A.
            )

        [pubdate] => 2012-9-27
        [day] => SimpleXMLElement Object
            (
                [0] => 25
            )

        [month] => SimpleXMLElement Object
            (
                [0] => Sep
            )

        [year] => SimpleXMLElement Object
            (
                [0] => 2012
            )

    ) 
```

或者，它可以在初始 XML 合并阶段完成 - 如果有人可以建议如何修改它以删除重复项，我现在使用下面的代码？

```
function simplexml_merge (SimpleXMLElement &$xml1, SimpleXMLElement $xml2) {
    $dom1 = new DomDocument();
    $dom2 = new DomDocument();

    $dom1->loadXML($xml1->asXML());
    $dom2->loadXML($xml2->asXML());

    $xpath = new domXPath($dom2);
    $xpathQuery = $xpath->query('/*/*');
    for ($i = 0; $i < $xpathQuery->length; $i++) {
        $dom1->documentElement->appendChild(
        $dom1->importNode($xpathQuery->item($i), true));
    }
    $xml1 = simplexml_import_dom($dom1);
}

$xml1 = new SimpleXMLElement($search1);
$xml2 = new SimpleXMLElement($search2);

simplexml_merge($xml1, $xml2); 
```

谢谢。

……

为清楚起见 - 这是我要导入 SimpleXML 的 XML 源布局 - 每个 PubmedArticle 都是一个“元素”，我有兴趣比较并确保没有重复 -

```
 <xml...>
    <Document>
        <PubmedArticle>
            <MedlineCitation>
                <PMID version="1">xxx</PMID>
                ...
            </MedlineCitation>
            ...
        </PubmedArticle>
        <PubmedArticle>
            <MedlineCitation>
                <PMID version="1">xxx</PMID>
                ...
            </MedlineCitation>
            ...
        </PubmedArticle>
        etc
     </Document>
     </xml> 
```

PMID 节点是唯一的，因此可用于检查重复项。

……

使用来自@Gordon 的链接 - 我知道使用：

```
//Get my source XML
$xml1 = new SimpleXMLElement($search1);
$xml2 = new SimpleXMLElement($search2);

//Run through $xml1 and build a query based on it's PMIDs
$query = array();
foreach ($xml1->PubmedArticle as $paper) {
    $query[] = sprintf('(PMID != %s)',$paper->MedlineCitation->PMID);
}
$query = implode('and', $query);

//Run through $xml2 and get node which don't have PMID matching $xml1
foreach ($xml2->xpath(sprintf('PubmedArticle/MedlineCitation[%s]', $query)) as $paper) {
    echo $paper->asXml();
} 
```

但是我仍然有一个问题 - 合并输出。的输出`$xml2`首先缺少`<PubmedArticle>`每个“匹配”周围的节点。然后我假设我可以使用相同的合并代码（上面）来进行合并。你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:41:25.287

将其转换为数组（我不会为您编写，只是迭代和添加。），然后`array_diff()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:45:46.817

决定遵循@Gordon 的路线，因为它保留了 XML。最终一切正常：

```
//function to check 2 xml inputs for duplicate nodes
    function dedupeXML($xml1, $xml2) {
        $query = array();
        foreach ($xml1->PubmedArticle as $paper) {
            $query[] = sprintf('(MedlineCitation/PMID != %s)',$paper->MedlineCitation->PMID);
        }
        $query = implode('and', $query);

        $xmlClean = '<Document>';
        foreach ($xml2->xpath(sprintf('PubmedArticle[%s]', $query)) as $paper) {
            $xmlClean .= $paper->asXML();
        }
        $xmlClean .= '</Document>';
        $xmlClean = new SimpleXMLElement($xmlClean);
        return $xmlClean;
    }
//function to merge 2 xml inputs
    function mergeXML (SimpleXMLElement &$xml1, SimpleXMLElement $xml2) {
        // convert SimpleXML objects into DOM ones
        $dom1 = new DomDocument();
        $dom2 = new DomDocument();
        $dom1->loadXML($xml1->asXML());
        $dom2->loadXML($xml2->asXML());
        // pull all child elements of second XML
        $xpath = new domXPath($dom2);
        $xpathQuery = $xpath->query('/*/*');
        for ($i = 0; $i < $xpathQuery->length; $i++) {
            // and pump them into first one
            $dom1->documentElement->appendChild(
            $dom1->importNode($xpathQuery->item($i), true));
        }
        $xml = simplexml_import_dom($dom1);
        return $xml;
    }

    $xml1 = new SimpleXMLElement($search1);
    $xml2 = new SimpleXMLElement($search2);
    $xml3 = new SimpleXMLElement($search3);
    //dedupe and merge inputs
    //input 1 & 2
    $xml2Clean = dedupeXML($xml1, $xml2);
    $xml12 = mergeXML($xml1, $xml2Clean);
    //input 1+2 & 3
    $xml3Clean = dedupeXML($xml12, $xml3);
    $xml123 = mergeXML($xml12, $xml3Clean); 
```

这将很容易适应其他数据源 - 只需修改`dedupeXML`函数以匹配 XML 的数据结构。

# heroku - URI 不匹配 Rails 在生产环境中的资产 URL 中生成 MD5 摘要，但控制器 GET 是非 MD5 URL

> ID：12674399
> 
> 赞同：0
> 
> 时间：2012-10-01T13:36:26.597
> 
> 标签：heroku, ruby-on-rails-3.2, html5-video, asset-pipeline

我有一个 Rails 应用程序，其中有一两个页面使用 html5 视频标签，以及相应的 Rails video_tag() 方法在页面上显示视频。

我已经添加

```
<%= video_tag "car_circle.mp4", width: "640", height: "500", controls: true %> 
```

到视图中的 html.erb 文件。

Rails 3.2 在 /public 目录中查找视频，因此我将视频添加到名为**public/videos**的文件夹中。

为了将此文件夹添加到资产管道，我将此行添加到**application.rb**

```
 config.assets.paths << "#{Rails.root}/public/videos" 
```

这部分有效。视频资产会进行预编译，其中包含视频的*页面*实际上会加载。但是，视频本身没有。这是因为，虽然视频可以在各自的 URL 上观看，例如**/videos/car_circle.mp4 ，但视频***应该*加载的页面上的视频 URI是**/videos/car_circle-4e5f6739c10827a6fc3d479d1ac5c275.mp4** .

这是 Rails 在生产中添加到 URI 的 MD5 摘要。我需要我的视频 URI 来匹配视频所在页面上的摘要 URI。

到目前为止，我已尝试通过设置禁用消化

```
 config.assets.digest = true 
```

为假。但是，不建议这样做，无论如何它都会使我的应用程序崩溃。

关于如何正确获取我的资产的任何建议？显然这只是生产中的一个问题，这是 Rails 默认使用摘要 URI 的唯一地方。非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:20:01.553

尝试使用纯 html 元素声明，如下所示：

```
<video width="640" height="500" control="controls">
    <source src="../../../public/videos/car_circle.mp4" type="video/mp4">
</video> 
```

甚至`.erb`文件仍将接受纯 html 声明，该声明应不受任何 Rails 更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:38:41.997

对视频标签使用纯 html 也对我有用。

我将视频文件保存在 public/videos 中

并将 html 引用为

```
<video autoplay="autoplay" loop="loop" src="/videos/test.mp4"> 
```

这对我来说很好。

# php - PHP 从特定服务器获取时间

> ID：12674411
> 
> 赞同：0
> 
> 时间：2012-10-01T13:37:01.717
> 
> 标签：php

只是想知道 PHP 中是否有一种方法可以从特定服务器（例如谷歌）检索时间。我想制作一个可以检索服务器上设置的时间的脚本。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:56:21.807

如果您可以信任 HTTP 请求返回的[`Date:`标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.18)，您可以在[PHP中使用](http://us.php.net/manual/en/index.php)[cURL](http://us.php.net/manual/en/book.curl.php)执行类似的操作。

```
<?                                                                                                                                  
$date = null;

function header_callback($curl, $header)
{
    global $date;

    if (preg_match('/^Date:/', $header)) {
        $date = trim(substr($header, 5));
        $date = DateTime::createFromFormat('D, d M Y H:i:s e', $date);
    }

    return strlen($header);
}

$curl = curl_init("http://www.google.com/");

curl_setopt($curl, CURLOPT_NOBODY, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HEADERFUNCTION, 'header_callback');

curl_exec($curl);

curl_close($curl);

if ($date != NULL) {
    echo "Date from HTTP: " . $date->format('r');
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:38:46.280

没有内置的 PHP 函数来查询特定的时间服务器，但您可以编写一个脚本来执行此操作。可以在此页面上找到一些示例：[http ://www.kloth.net/software/timesrv1.php](http://www.kloth.net/software/timesrv1.php)

上一个链接中的这个示例在端口 37 上使用了 TIME 协议：

```
<?php
/* Query a time server
   (C) 1999-09-29, Ralf D. Kloth (QRQ.software) <ralf at qrq.de> 
*/

function query_time_server ($timeserver, $socket) {    
  $fp = fsockopen($timeserver,$socket,$err,$errstr,5);
        # parameters: server, socket, error code, error text, timeout
  if ($fp) {
    fputs($fp,"\n");
    $timevalue = fread($fp,49);
    fclose($fp); # close the connection
  }
  else {
    $timevalue = " ";
  }

  $ret = array();
  $ret[] = $timevalue;
  $ret[] = $err;     # error code
  $ret[] = $errstr;  # error text
  return($ret);

} # function query_time_server 

$timeserver = "ntp1.sf-bay.org";
$timercvd = query_time_server($timeserver,37);
if (!$timercvd[1]) { # if no error from query_time_server
  $timevalue = bin2hex ($timercvd[0]);
  $timevalue = abs (HexDec('7fffffff') - HexDec($timevalue) - HexDec('7fffffff')) ;
  $tmestamp = $timevalue - 2208988800; # convert to UNIX epoch time stamp
  $datum = date("Y-m-d (D) H:i:s",$tmestamp - date("Z",$tmestamp)); /* incl time zone offset */
  $doy = (date("z",$tmestamp)+1);

  echo "Time check from time server ",$timeserver," : [<font color=\"red\">",$timevalue,"</font>]";
  echo " (seconds since 1900-01-01 00:00.00).<br>\n";
  echo "The current date and universal time is ",$datum," UTC. ";
  echo "It is day ",$doy," of this year.<br>\n";
  echo "The unix epoch time stamp is $tmestamp.<br>\n";
} #if (!$timercvd)
else {
  echo "Unfortunately, the time server $timeserver could not be reached at this time. ";
  echo "$timercvd[1] $timercvd[2].<br>\n";
} # else
?> 
```

# facebook - IOS：安全警告：以上 URL 对现金卡或礼品卡无效

> ID：12674417
> 
> 赞同：1
> 
> 时间：2012-10-01T13:37:18.767
> 
> 标签：facebook, facebook-oauth

我的 IOS 应用程序使用 facebook 登录按钮。当您单击该按钮时，它会弹出 Facebook 登录提示。输入您的信息后，它会弹出一个白屏，上面写着：

> **安全警告：**以上 URL**不适用于现金卡或礼品卡**。泄露URL**可能会导致您的帐户被劫持**。

我似乎无法在网上找到有关此问题的任何信息。我应该从哪里开始寻找任何想法？

我们正在使用 facebook 为桌面应用程序推荐的客户端流程。[在这里](https://developers.facebook.com/docs/authentication/#client-side-flow)阅读更多

包含此消息的页面位于[http://www.facebook.com/connect/login_success.html](http://www.facebook.com/connect/login_success.html)

# perl - 比较和编辑哈希中的底层结构

> ID：12674418
> 
> 赞同：0
> 
> 时间：2012-10-01T13:37:22.247
> 
> 标签：perl, search, hash, structure

我有一个复杂结构的哈希，我想执行搜索和替换。第一个哈希如下：

```
$VAR1 = {
  abc => { 123 => ["xx", "yy", "zy"], 456 => ["ab", "cd", "ef"] },
  def => { 659 => ["wx", "yg", "kl"], 456 => ["as", "sd", "df"] },
  mno => { 987 => ["lk", "dm", "sd"] },
} 
```

并且我想迭代搜索所有'123'/'456'元素，如果找到匹配项，我需要对子层进行比较，即`['ab','cd','ef']`和`['as','sd','df']`在这种情况下，只保留带有['ab '，'cd'，'ef']。所以输出将如下：

```
$VAR1 = {
  abc => { 123 => ["xx", "yy", "zy"], 456 => ["ab", "cd", "ef"] },
  def => { 659 => ["wx", "yg", "kl"] },
  mno => { 987 => ["lk", "dm", "sd"] },
} 
```

所以删除是基于子结构，而不是索引。怎么做到呢？谢谢您的帮助！！

假设我将声明要保留的值，即我将保留 456 => ["ab", "cd", "ef"] 基于预先声明的值 ["ab", "cd", " ef"] 并在其他任何地方删除 456 的任何其他实例。搜索必须针对每个键。因此代码将通过哈希，首先取 123 => ["xx", "yy", "zy"] 并将其与哈希其余部分的键进行比较，如果未找到匹配项，则不执行任何操作。如果找到匹配项，例如 456 => ["ab", "cd", "ef"]，它将比较两者，正如我所说，在匹配的情况下，带有 [" ab", "cd", "ef"] 将保留，它将保留 456 => ["ab", "cd", "ef"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:00:06.233

这是一个使用智能匹配运算符执行数组比较的解决方案：

**更新：**正如 Borodin 指出的那样，我的原始代码是错误的。这是固定版本。

**更新 2：**将其更改为根据哈希结构选择要保留的值。

```
my $VAR1 = {
  abc => { 123 => ["xx", "yy", "zy"], 456 => ["ab", "cd", "ef"] },
  def => { 659 => ["wx", "yg", "kl"], 456 => ["as", "sd", "df"] },
  mno => { 987 => ["lk", "dm", "sd"] },
};

my %keep_values = (
    '456' => ['ab','cd','ef']
);

foreach my $outer_key (keys %$VAR1)
{
    foreach my $keepers (keys %keep_values)
    {
        if (exists $VAR1->{$outer_key}{$keepers} and 
            #use the smart match operator to compare arrays.
            !(@{$VAR1->{$outer_key}{$keepers}} ~~ @{$keep_values{$keepers}}))
        {
            delete $VAR1->{$outer_key}{$keepers};
        }
    }   
} 
```

有关智能匹配运算符的更多信息，请参阅[perlop](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)。

# jquery - 用jquery接收json？

> ID：12674422
> 
> 赞同：-4
> 
> 时间：2012-10-01T13:37:34.380
> 
> 标签：jquery, ajax, json, api, jsonp

有人可以帮我用 jquery 接收这个 json 吗？

```
{
"output_type":"json","diagnostic":{"status":"200","elapsetime":"0.4187","memoryusage":"17.91MB","confirm":"success","lang":"id","currency":"IDR"},"results":{"result":[{"id":"business:3772","label":"Puri Maharani Boutique Hotel & Spa - Denpasar, Denpasar Timur, Kesiman Kertalangu","value":"Puri Maharani Boutique Hotel & Spa","category":"Hotel"},{"id":"business:3852","label":"Maharani Hotel  - Jakarta Selatan","value":"Maharani Hotel ","category":"Hotel"},{"id":"business:3874","label":"Maharadja Hotel - Jakarta Selatan, Mampang Prapatan, Tegal Parang","value":"Maharadja Hotel","category":"Hotel"},{"id":"business:4776","label":"Pita Maha Resort and Spa - Gianyar, Ubud, Ubud","value":"Pita Maha Resort and Spa","category":"Hotel"},{"id":"business:4779","label":"The Royal Pita Maha Resort and Spa - Gianyar, Ubud, Kedewatan","value":"The Royal Pita Maha Resort and Spa","category":"Hotel"},{"id":"business:18420","label":"Villa Mahapala Bali - Denpasar, Denpasar Selatan, Sanur","value":"Villa Mahapala Bali","category":"Hotel"},{"id":"business:105246","label":"Mahagiri Dreamland Villas &amp; Spa - Badung, Kuta Selatan, Pecatu","value":"Mahagiri Dreamland Villas &amp; Spa","category":"Hotel"}]},"token":"bc8d3a106572e4cff038261afb568ecf"} 
```

我使用 $.getJSON 和 $.ajax 函数，但出现了一些问题，有人可以帮我处理一些 jquery 代码吗？

这是我的代码，

```
function getAPI() {
            jQuery.ajax({
            url: 'http://api.master18.tiket.com/search/autocomplete/hotel?q=mah&token=90d2fad44172390b11527557e6250e50&secretkey=83e2f0484edbd2ad6fc9888c1e30ea44&output=json',
        beforeSend: function(x) {
            if(x && x.overrideMimeType) {
             x.overrideMimeType("application/j-son;charset=UTF-8");
            }
        },
            type:"get",
            dataType: 'json',
            crossDomain: true,
         success: function(data) { console.log(data); }
         });
    } 
```

但错误是 Uncaught SyntaxError: Unexpected token ：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:39:24.260

您的问题似乎被标记为`jsonp`，所以我怀疑您正在尝试执行跨域 AJAX 调用。如果是这种情况，如果远程服务器支持，您确实可以使用[JSONP 。](http://en.wikipedia.org/wiki/JSONP)

因此，如果您不进行跨域 AJAX 调用：

```
$.getJSON('/script', function(json) {
    // TODO: manipulate the result here
}); 
```

如果远程服务器支持 JSONP：

```
$.getJSON('http://example.com/script?callback?', function(json) {
    // TODO: manipulate the result here
}); 
```

# javascript - Javascript代码的O/P

> ID：12674424
> 
> 赞同：0
> 
> 时间：2012-10-01T13:37:42.060
> 
> 标签：javascript

在下面的 JavaScript 代码中：-

```
var a  = [];
for (i in a) {
  alert(i);

} 
```

我得到 o/p 为 - $family、$constructor、each、clone、clean、invoke、associate、link、contains、append、getlast、getRandom、include、combine、erase、empty、flatten、pick、hexToRgb、rgbToHex。

任何人都可以解释为什么会这样吗？它是否与 Array 对象的属性有关，如果是这样，那么为什么不提醒所有属性？此外，如果我们采用像 var a = {} 这样的空对象字面量，我们不会得到任何 o/p。

现在，如果我将上面的代码更改为：-

```
var a  = [9,2];
for (i in a) {
    if (a.hasOwnProperty(i)) {
        alert(a.hasOwnProperty(i));
        alert(i);
      }
} 
```

我得到的输出为 0 和 1。为什么会这样？这些是这个 Array 对象的属性（也是索引）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:45:12.077

for-in 语法用于对象。它迭代对象的所有字段，包括方法。当你想迭代一个数组时，总是使用这个：

```
for (var i = 0; i < array.size; i++) {
    doSomething(array[i]);
} 
```

您的后一个循环`hasOwnProperty`不会遍历数组的标准方法，因为您的数组`a`从基 Array 类继承了这些方法，因此它们不是它*自己的*属性。但是当你明确地向数组添加一个方法时，它也应该列出该函数，因为它现在是一个*自己的*属性：

```
var a  = [9,2];
a.hello = function() { };

for (i in a) {
    if (a.hasOwnProperty(i)) {
        alert(a.hasOwnProperty(i));
        alert(i);
      }
} 
```

这应该列出 0、1 和 hello。

如果您希望它输出 9 和 2，而您想知道为什么它输出 0 和 1：那是因为 for-in 数组迭代的是键，而不是值。数组基本上是对象，其中每个数组元素都是以数组索引为名称的属性。所以

```
var a = [9, 2]; 
```

相当于这个对象（加上继承自 Array 的东西）：

```
var a = {
    0: 9,
    1: 2
} 
```

# python - 如何匹配一个字符单词？

> ID：12674426
> 
> 赞同：1
> 
> 时间：2012-10-01T13:37:53.260
> 
> 标签：python, regex

如何仅匹配字符长度为 1 的单词？还是我必须在执行匹配操作后检查匹配的长度？我的过滤器如下所示：

```
sw = r'\w+,\s+([A-Za-z]){1} 
```

所以它应该匹配

```
rs =re.match(sw,'Herb, A') 
```

但不应该匹配

```
rs =re.match(sw,'Herb, Abc') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:39:10.033

如果您使用`\b\w\b`，您将只匹配一个 word 类型的字符。所以你的表达是

```
sw = r'\w+,\s+\w\b' 
```

（因为`\w`前面至少有一个`\s`你不需要第一个`\b`）

确认：

```
>>> sw = r'\w+,\s+\w\b'
>>> print re.match(sw,'Herb, A')
<_sre.SRE_Match object at 0xb7242058>
>>> print re.match(sw,'Herb, Abc')
None 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:49:30.867

您可以使用

```
(?<=\s|^)\p{L}(?=[\s,.!?]|$) 
```

这将匹配前面和后面跟着空格字符或字符串结尾的单个字母。标点符号也增加了前瞻……这完全取决于您的输入数据。您也可以对非字母进行前瞻，但这引出了“a123”是否真的是一个单字母词的问题。或“我是”。

# c# - 我需要收到 NewLine 上的 SerialPort 事件

> ID：12674430
> 
> 赞同：0
> 
> 时间：2012-10-01T13:38:10.310
> 
> 标签：c#, .net, serial-port

我需要事件，它将在收到整行后调用我的函数，而不仅仅是一个字节。

.NET 中的 SerialPort 对象有 3 个事件：DataReceived、ErrorReceived、PinChanged。

当我使用 DataReceived 时 - 事件在 1 个字节后“触发”，或者在“ReceiveByteThreshold”属性中定义的“x”个字节后“触发”。线长可能会有所不同，所以我无法预测“x”。

有人可以给我一个提示吗？

我必须创建一些缓冲区，它将收集字节直到 LF/CRLF，或者有更好的解决问题的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T14:18:08.283

你不能得到这个，唯一的选择是 SerialPort.ReceivedBytesThreshold 来延迟 DataReceived 事件处理程序调用，这对于可变长度响应是无用的。

解决方法非常简单，只需在 DataReceived 事件处理程序中调用 ReadLine()。这将阻塞工作线程，不会影响程序中发生的任何其他事情。在 ReadLine() 调用被阻塞时触发任何附加事件都没有危险，它在 SerialPort 类内部互锁。如果通信不够可靠，请在必要时使用 ReadTimeout 属性，以便 ReadLine() 不会永远阻塞。将其设置为接收最长可能响应的预期延迟的十倍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T13:47:58.740

你必须自己做。使用 DataReceived 并检查每个字节。收集缓冲区中的字节，直到获得换行符，然后在该点将缓冲区作为一行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:01:02.240

提示：

该类`SerialPort`有一个属性`NewLine`来设置用于解释对[ReadLine](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readline.aspx)方法的调用结束的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-25T09:19:29.517

这是我快速实现的、非阻塞的、相同的线程解决方案。它是一个非常基本的状态机，它等待'\r' 和'\n'，然后发送所有缓冲的字符进行解析。您可以通过更改状态机本身将其更改为您想要的任何换行符值。在这种方法中，您可以注册 OnNewLineReceived 事件并处理来自 SerialStringMessgae 事件处理程序的数据。没有尝试/捕获开销。没有死锁。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace NonBlockingSerialPortReadLine
{
    public partial class Form1 : Form
    {
    System.IO.Ports.SerialPort sp = new System.IO.Ports.SerialPort();
    public event EventHandler OnNewLineReceived;
    System.Windows.Forms.Timer NewDataTimer = new System.Windows.Forms.Timer();
    int StateMachine = 0;
    StringBuilder stringBuffer = new StringBuilder();

    public Form1()
    {
        InitializeComponent();
        InitTimer();
        InitOnNewLineReceived();
    }

    private void InitTimer()
    {
        NewDataTimer.Interval = 50;
        NewDataTimer.Tick += NewDataTimer_Tick;
    }

    private void InitOnNewLineReceived()
    {
        OnNewLineReceived += Form1_OnNewLineReceived;
    }

    void Form1_OnNewLineReceived(object sender, EventArgs e)
    {
        SerialStringMessgae STM = e as SerialStringMessgae;
        string messgae = STM.message;

        // PARSE YOU MESSAGE HERE - the debug line below is not mandatory

        System.Diagnostics.Debug.WriteLine(messgae);
    }

    class SerialStringMessgae : EventArgs
    {
        public string message;
    }

    private void StartListeningButton_Click(object sender, EventArgs e)
    {
        StartListeningButton.Enabled = false;
        sp = new System.IO.Ports.SerialPort("COM4",57600, System.IO.Ports.Parity.None, 8, System.IO.Ports.StopBits.One);
        try
        {
            sp.Open();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
            return;
        }
        if (sp.IsOpen)
        {
            NewDataTimer.Enabled = true;
        }

    }

    void NewDataTimer_Tick(object sender, EventArgs e)
    {
        string newData = sp.ReadExisting();
        foreach (char c in newData)
        {
            switch (StateMachine)
            {
                case 0:
                    // waiting for '\r'
                    if (c == '\r')
                    {
                        StateMachine = 1;
                    }
                    else
                    {
                        stringBuffer.Append(c);
                    }
                    break;
                case 1:
                    // waiting for '\n'
                    if (c == '\n')
                    {
                        if (OnNewLineReceived != null)
                        {
                            SerialStringMessgae STM = new SerialStringMessgae();
                            STM.message = stringBuffer.ToString();
                            OnNewLineReceived(this, STM);
                        }
                    }
                    // after parsing the message we reset the state machine
                    stringBuffer = new StringBuilder();
                    StateMachine = 0;
                    break;
            }
        }
    }

}
} 
```

# jquery - 通过ajax发送值到php switch

> ID：12674432
> 
> 赞同：0
> 
> 时间：2012-10-01T13:38:18.540
> 
> 标签：jquery, ajax

我想将值从单选按钮发送到 php 开关，但开关不接收 ajax 响应。这是我的表格：

```
 <form action="" id="demoForm" method="post">
            <fieldset>
                <legend>Demo form</legend>
                <span style="font-size: 0.9em;">This ajax submit demo form.</span>
                <p>

                    <input class="myradio" type="radio" name="email" value="pop" />
                    <input class="myradio" type="radio" name="email"  value="gdp" />
                </p>
                <p>
                    <input type="submit" name="submit" id="submit" style="float: right; clear: both; margin-right: 3px;" value="Submit" />
                </p>
    </fieldset>
    </form> 
```

这是我的js文件：

```
 $(document).ready(function(){

$('#submit').click(function(e) {
 e.preventDefault(); 

    email = $(".myradio:checked").val()

    $.ajax({
        type : 'GET',
        url : 'index.php',

        data: {
            "email" : email},

        dataType : 'json',  

        success : function(data){

            $('#message').removeClass().addClass((data.error === true) ? 'error' : 'success').text(data).show(500);
            if (data.error === true)
                $('#demoForm').show(500);
        }

    });

    return false;
});
}); 
```

这是我的 index.php 与开关：

```
<?php

$action =  htmlspecialchars(trim($_GET['email']));

 switch ( $action ) {
 case 'pop':
 pop();
 break;
 case 'gdp':
 gdp();
 break;
 default:
 homepage();
 }

 function pop() {

 require("chore2.php");

 }

 function gdp() {

 }

function homepage() {

require("homepage.php");

 }

 ?> 
```

在萤火虫中，我可以确保响应看起来正确，即： index.php?email=pop

但是开关没有获取值，并且没有任何反应。有人知道为什么吗？

# c# - 如何将父引用分配给对象

> ID：12674441
> 
> 赞同：-1
> 
> 时间：2012-10-01T13:38:43.117
> 
> 标签：c#, reference

假设我有以下对象：

```
ZeroObject A = new ZeroObject("A");
ZeroObject B = new ZeroObject("B");
ZeroObject C = new ZeroObject("C");
ZeroObject D = new ZeroObject("D"); 
```

当我做：

```
B = A; 
```

在代码的某个地方，`B`应该有一个引用`A`，对吧？

然后：

```
C = B; 
```

这意味着`C`是的参考`B`。有没有办法在不使用的情况下提供`C`参考：`A`

```
C = A; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:42:25.027

首先，我假设`ZeroObject`是一个类。如果不是，请忽略此答案。

> 当我做
> 
> ```
> B = A; 
> ```
> 
> 在代码的某处，
> 
> ```
> B should have a reference of A, right? 
> ```

好吧，这意味着`B`它将具有与 相同的值`A`。*对 的值的`A`*任何进一步更改（例如，使其引用不同的对象）都不会影响`A`. 但是，如果您更改对象中的数据`A`并`B`引用，您将能够通过任一引用看到该更改。

阅读[我关于引用类型和值类型](http://pobox.com/%7Eskeet/csharp/parameters.html)的文章以获取更多信息。

> 有没有办法在不使用的情况下为 C 提供 A 的参考
> 
> C = A;
> 
> 在 C# 中？

那么有一些奇怪的方法可以做到这一点。例如：

```
public void SetValue<T>(out T target, T value)
{
     target = value;
}

...

SetValue(out C, A); 
```

...但目前尚不清楚您为什么*要这样做*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:46:42.657

我不相信发明一些未定义的“ZeroObject”会有所帮助，所以我将继续使用字符串：

```
string A = "A";
string B = "B";
string C = "C";

//Values are now A, B, C

B = A;

//Values are now A, A, C

C = B;

//Values are now A, A, A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:42:10.097

这取决于你的*确切*意思，说“给 C 参考”。

如果这是关于“指向**相同**的内存位置”，那么将它们相互分配就足够了。

所以

```
 B = A;
    C = B 
```

`C`将指向相同的`A`内存空间。

但老实说，这是一种*非常*奇怪的工作方式。只需分配一个参考`C=A`。

如果这不是您要搜索的内容，请澄清。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:43:13.283

ZeroObject 是你自己的类吗？

以编程方式，听起来您想要一个引用的对象，例如子对象（在这种情况下可能会调用它）。

因此，理想情况下，您需要 ZeroObject 类上的另一个属性，类型为 ZeroObject - 命名为 ReferenceObject（或任何您喜欢的），您可以将子对象分配给其中。

IE

```
public class ZeroObject
{
    //Properties
    ZeroObject ReferenceObject { get; set; }
}

ZeroObject A = new ZeroObject("A");
ZeroObject B = new ZeroObject("B");

A.ReferenceObject = B; 
```

然后只需`B`通过`A.ReferenceObject`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T13:46:20.817

你`ZeroObject`必须有相应的属性

```
public class ZeroObject
{
    public ZeroObject (string name)
    {
        Name = name;
    }

    public ZeroObject Parent { get; set }

    public string Name { get; private set; }
} 
```

现在，你可以写

```
ZeroObject A = new ZeroObject("A");
ZeroObject B = new ZeroObject("B");
ZeroObject C = new ZeroObject("C");
ZeroObject D = new ZeroObject("D");

B.Parent = A;
C.Parent = B;
D.Parent = C; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T13:46:27.213

如果您想要相同的对象而不引用它，请检查该链接并使用该基本解决方案。

[深度克隆对象](https://stackoverflow.com/questions/78536/cloning-objects-in-c-sharp)

# java-ee-6 - 是否在服务器启动时初始化了没有接口视图 (@LocalBean) EJB bean

> ID：12674444
> 
> 赞同：1
> 
> 时间：2012-10-01T13:38:57.920
> 
> 标签：java-ee-6, glassfish-3, ejb-3.1

我正在使用 Glassfish 服务器。似乎`@LocalBean`在服务器启动时正在初始化。对于其他 bean，它们在查找时正确初始化。这是 LocalBean 的正确行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:03:06.847

没有规则说`@LocalBean`应该急切地初始化而其他人不应该。由容器提供者决定**何时**初始化特定的 bean。

您可以控制 bean 何时初始化的唯一情况是使用带有注释的`@Singleton`EJB 。`@Startup`这将强制容器提供者在服务器启动期间创建单例 bean 的实例。这是放置初始化逻辑的好地方。

对于 Glassfish，您观察到的行为可能是正确的，但我不会对其进行转发，因为其他容器提供商可能会选择不同的方法。

# android - 在Android中通过FFMpeg实现视频过滤

> ID：12674447
> 
> 赞同：2
> 
> 时间：2012-10-01T13:39:10.927
> 
> 标签：android, android-ndk, ffmpeg

我有一个视频文件，我正在尝试使用 -vf 参数来缩放它，用于 android 项目中使用的 ffmpeg “Angel” repo 版本。通过 NDK 构建的过程很顺利，但是当我编写此代码时，应用程序会启动并退出。如果我使用 -vf 以外的任何其他参数，它可以正常工作并导出视频。

```
JNIEXPORT jint JNICALL Java_com_schemaphic_mirrorapp_jni_NativeHelper_hFlipVideoEffect( JNIEnv *env, jstring outFile )
{
//ffplay -i INPUT -vf "crop=iw/2:ih:0:0,split[tmp],pad=2*iw[left]; [tmp]hflip[right]; [left][right] overlay=W/2"
//fmpeg -i input -vf scale=iw/2:-1 output
//ffmpeg -i input -vf yadif=0:0:0,scale=iw/2:-1  output

char** arguments;
int count = 6;

arguments = calloc( count, sizeof( char* ) );

arguments[0] = "ffmpeg";

arguments[1] = "-i";
arguments[2] = "/sdcard/mirrorapp/cropVideo.mp4";

arguments[3] = "-vf";
arguments[4] = "scale=120:-1";

//arguments[5] = "-aspect";
//arguments[6] = "3:2";
//arguments[5] = "-vcodec";
//arguments[6] = "mpeg4";
/*arguments[9] = "-r";
arguments[10] = "19";
arguments[5] = "-cropright";
arguments[6] = "240";
arguments[7] = "-padleft";
arguments[8] = "0";
arguments[9] = "-padtop";
arguments[10] = "0";
arguments[11] = "-aspect";
arguments[12] = "3:2";
arguments[13] = "-an";
arguments[5] = "-vcodec";
arguments[6] = "mpeg4";*/
//arguments[7] = "-sameq";
arguments[5] = "/sdcard/mirrorapp/cropFlipVideo.mp4";

ffmpeg_main( count, arguments );
//free(arguments);

return 1;
} 
```

这给我的印象是设置是正确的。参数 -vf 不知何故不起作用或不确定较新的语法。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:50:17.970

我想我有你的答案：

```
arguments[3] = "-vf";
arguments[4] = "\"scale=120:-1\""; 
```

我相信`ffmpeg`希望过滤器参数在双引号内。

# adobe-illustrator - 如何以编程方式捕获和复制 Ai 路径形状？

> ID：12674448
> 
> 赞同：0
> 
> 时间：2012-10-01T13:39:11.307
> 
> 标签：adobe-illustrator, extendscript

我正在使用 ExtendScript 编写 Adob​​e Illustrator 脚本。我想知道是否有一种偷偷摸摸的方式或脚本可用于以编程方式捕获然后复制路径形状，类似于 JavaScript 的`.toSource()`等价物。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:06:55.040

试试这个：

```
main();
function main(){

var doc = app.activeDocument; // get the active doc

var coords = new Array(); // make a new array for the coords of the path
var directions = new Array();

var sel = doc.selection[0];// get first object in selection

if(sel == null) {
    // check if something is slected
    alert ("You need to sevlect a path");
    return;
    }

    var points = sel.pathPoints;// isolate pathpoints
    // loop points
    for (var i = 0; i < points.length; i++) {
    // this could be done in one lines
    // just to see whats going on line like
//~      coords.push(new Array(points[i].anchor[0],points[i].anchor[1]));
    var p = points[i]; // the point
    var a = p.anchor; // his anchor
    var px = a[0];// x
    var py = a[1]; // y
    var ldir = p.leftDirection;
    var rdir = p.rightDirection;
    directions.push(new Array(ldir,rdir));
    coords.push(new Array(px,py));// push into new array of array   
  }
var new_path = doc.pathItems.add(); // add a new pathitem

new_path.setEntirePath(coords);// now build the path

    // check if path was closed
if(sel.closed){
    new_path.closed = true;
    }

// set the left and right directions
for(var j = 0; j < new_path.pathPoints.length;j++){

    new_path.pathPoints[j].leftDirection = directions[j][0];
    new_path.pathPoints[j].rightDirection = directions[j][1];    
    }
} 
```

# css - 底部对齐 - 响应式布局

> ID：12674449
> 
> 赞同：0
> 
> 时间：2012-10-01T13:39:20.327
> 
> 标签：css

我有一个对齐问题。我正在使用 twitter bootstrap 构建这个响应式网站，我的客户希望我将来自两个不同跨度的一些内容对齐底部，如下所示：

![在此处输入图像描述](../Images/d86c64e4c6ae2769bcbe152d6ad7422e.png)

他希望右侧 span4 右侧的灰色框与另一个 span4 左侧的 flexSlider 底部对齐。如何做到这一点？我不能在右侧使用边距，因为上部内容是动态的并且可以更长。我尝试使用相对定位的包装器并绝对定位它，但是当尝试将浏览器窗口调整为更小的尺寸时，灰色框的宽度和一切都变得一团糟......除了绝对定位之外还有其他方法吗？

这是标记：

```
 <div class="span8">
                    <div class="row section professionIntro">
                        <div class="span4">
                            <div class="flexslider section">
                                  <ul class="slides">
                                    <li>
                                      <img src="img/slide1.png" alt="slide 1" />
                                    </li>
                                    <li>
                                      <img src="img/slide2.png" alt="slide 2" />
                                    </li>
                                    <li>
                                      <img src="img/slide3.png" alt="slide 3" />
                                    </li>
                                  </ul>
                            </div>
                        </div>
                        <div class="span4">
                            <p class="intro">Som dataingeniør jobber du med systemutvikling og drift av maskiner eller systemer.</p>
                            <ul class="infoExpand">
                                <li class="expandVideo">
                                    <h2 class="videoSign">Video dataingeniøren hverdag</h2>   
                               </li>
                            </ul>
                        </div>    
                    </div> 
```

感谢任何帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T22:46:19.617

添加 css 响应式：

```
http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css 
```

如果是按钮位置：绝对是转换位置：静态；

```
.videoSign {
    position : static;
    bottom:auto;
    top:auto;
    left:auto;
    right:auto;
} 
```

**示例：http:** [//jsfiddle.net/sEryj/](http://jsfiddle.net/sEryj/)

# javascript - Chrome 扩展：在客户端运行内容编辑器

> ID：12674450
> 
> 赞同：2
> 
> 时间：2012-10-01T13:39:21.480
> 
> 标签：javascript, jquery, html, google-chrome-extension, html-editor

我正在开发一个非常简单的表单填充器，其中包含特定站点的 Chrome 扩展程序。我从用户那里得到名字、主题和消息，然后把它放在正确的地方。

我的消息部分有问题，因为它使用了 HTML 编辑器。我希望能够让用户`href`使用 Microsoft Word 甚至 Front Page，当然还有内容编辑器来创建带有链接的文本消息，并且只需将用户制作的内容复制到扩展程序中，它就会将其填充到正确的位置网站。

我尝试使用[http://ckeditor.com/](http://ckeditor.com/)但没有服务器就无法工作。（使用 1 Visual Studio 创建来测试它）。

是否有像 ckeditor 这样的内容编辑器，它也可以在客户端工作，并且我可以使用 Javascript 从用户那里获取信息？

我知道这是一个奇怪的要求，甚至听起来不合逻辑，但这是给朋友（和学习）的。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:01:06.317

在网上搜索几天后，我发现了这个：[http ://html5demos.com/contenteditable](http://html5demos.com/contenteditable)

它仅适用于 html 5，而且功能惊人！

如果任何 1 也有这个奇怪的请求，这个简单的代码让你开始：

```
 <div contenteditable="true">this is a smaple</div> 
```

这个属性是使魔法发生的原因：`contenteditable="true"`

在那个 div 中，你可以从你的工作空间之外扔掉任何东西。意思是，你可以用WORD做一个href，然后把它复制到div，它会为你设置好！

1 件事仍然很奇怪，如果您没有 div 的边框，它不会像普通文本字段或 textarea 那样为您设置 1。所以如果你没有看到它，它并不意味着不存在！

请享用。

# c++ - std::string 数组的初始化程序太多

> ID：12674453
> 
> 赞同：0
> 
> 时间：2012-10-01T13:39:25.527
> 
> 标签：c++, stdstring

MEA CULPA：

好吧，我错了。我找到了 VarInfo::m_datatypeName[] 的声明，它是 VarInfo::m_datatypeName[9]。是的，硬编码。我向所有为我挠头的人道歉。

* * *

我收到此错误：

```
too many initializers for 'std::string[9]' 
```

对于这个声明：

```
std::string       VarInfo::m_datatypeName[]  = { "", "STRING", "TIME", "MACADDRESS", "IPADDRESS", "STRINGSET", "SET", "UINT32", "INT32", "BOOL" }; 
```

**新的信息：**

注意：声明中没有 9 或 10。如果分配列表中的项目不超过九个，这很好用。问题是第 10 项。

**结束新信息：**

我有一个模糊的回忆，std::string 声明为一些默认数量的字符预先分配了空间，所以我想怀疑字符串数组的类似行为。

所以，这就是问题所在。我应该如何正确声明这一点？希望不必硬声明 m_datatypenames 的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:40:20.937

```
std::string m_datatypeName[9] 
```

应该是

```
std::string m_datatypeName[10] 
```

`"", "STRING", "TIME", "MACADDRESS", "IPADDRESS", "STRINGSET", "SET", "UINT32", "INT32", "BOOL"`最多添加 10 个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:41:21.527

将其声明为：

```
std::string m_datatypeName[10]; 
```

因为有十个字符串用于初始化数组，而不是九个。

如果你想避免指定元素的数量，你可以使用 a `std::vector<std::string>`：

```
struct VarInfo
{
    static std::vector<std::string> m_datatypeName;
}; 
```

如果是 C++11，您可以使用初始化大括号（[http://ideone.com/mGS9H](http://ideone.com/mGS9H)上的演示）：

```
std::vector<std::string> VarInfo::m_datatypeName
    {
        "", "STRING", "TIME", "MACADDRESS", "IPADDRESS",
        "STRINGSET", "SET", "UINT32", "INT32", "BOOL"
    }; 
```

或者如果不是 C++11，你可以使用[`boost::assign::list_of`](http://www.boost.org/doc/libs/1_51_0/libs/assign/doc/index.html#list_of)：

```
#include <boost/assign/list_of.hpp>

std::vector<std::string> VarInfo::m_datatypeName =
    boost::assign::list_of
        ("")("STRING")("TIME")("MACADDRESS")("IPADDRESS")
        ("STRINGSET")("SET")("UINT32")("INT32")("BOOL"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T13:41:27.473

你给一个 10 个参数`std::string[9]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:42:28.870

> 我有一个模糊的回忆，std::string 声明为一些默认数量的字符预先分配了空间，所以我想怀疑字符串数组的类似行为。

呃，没有。`T[]`行为完全相同，无论`T`. 如果您不想使用`std::vector`，则必须对数组中的数字进行硬编码。

# mysql - 为什么 Rails 读取旧的数据库值？

> ID：12674456
> 
> 赞同：2
> 
> 时间：2012-10-01T13:39:43.600
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord, amazon-web-services

如果我通过 MySQL 工作台手动更新记录，则在相应站点上需要多次刷新页面才能获取更新的记录，但如果我从 MySQL 工作台重新加载记录，则更新就在那里。我在应用程序服务器上没有缓存设置。

这可能是什么原因造成的？我想不出还有什么要检查的。会不会是某种池化问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:08:06.240

这样可以避免每次访问属性时都接触数据库。您可以调用`reload`同步对象数据的方法。

```
user = User.first
# at this moment object changed from outside
user.reload 
```

# android - 从 ReceiverRestrictedContext 获取应用程序，就好像使用了 getApplication（不是 getApplicationContext）

> ID：12674459
> 
> 赞同：3
> 
> 时间：2012-10-01T13:39:50.907
> 
> 标签：android, android-context

我有一个 BroadcastReceiver，它必须从应用程序类中获取和修改一些数据。在某些活动中也会检索和修改这些数据。

我读了这篇文章：

[getApplication() 与 getApplicationContext()](https://stackoverflow.com/questions/5018545/getapplication-vs-getapplicationcontext)

而且，正如它所说，getApplication 并不总是返回与 getApplicationContext 相同的对象。在我的例子中，如果我使用 getApplicationContext 在我的 BroadcastReceiver 中设置一个整数，然后我在我的活动中检查它的值（使用 getApplication）它总是 0（默认值）。

我尝试在两个地方都使用 getApplicationContext ，但返回的对象不一样。有什么方法可以在 BroadcastReceiver 中获取与使用 getApplication 进行活动相同的对象吗？我应该改用 SharedPreferences 吗？

这是一个例子：

广播接收器：

```
MyApp app = (MyApp)context.getApplicationContext();
app.setNumPA(10); 
```

活动：

```
MyApp app = (MyApp) getApplication();
Log.d("MyActivity", "Num PA: "+app.getNumPA()); 
```

在我的活动中，日志始终显示“Num PA：0”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:50:31.880

您肯定应该使用一些持久性存储，例如`SharedPreferences`.

这背后的一个原因 - 您的应用程序实例几乎可以在任何时候被 Android 操作系统杀死（当您的应用程序在后台时）。所以，你不能依赖你的变量，甚至`static`. 您应该将状态保存在持久存储中。

# ios - 在IOS中添加时间间隔？

> ID：12674462
> 
> 赞同：1
> 
> 时间：2012-10-01T13:40:09.210
> 
> 标签：ios, datetime

嗨，在我的项目中，我的 Textfield 为 from，另一个是 From 字段中 ex 的延迟，我的值为“18:30”（字符串），延迟字段为“18”（整数），现在我需要添加这两个值和应该在另一个文本字段中显示像“18:48”（字符串）这样的值。如果有人知道指导我，谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T14:08:18.443

请参考以下代码进行查询。

```
NSString *str=@"18:30";
int addTime=18;
NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
[formatter setDateFormat:@"HH:mm"];
NSDate *dateInput=[formatter dateFromString:str];
dateInput=[dateInput dateByAddingTimeInterval:addTime*60];
NSString *dateOutPut=[formatter stringFromDate:dateInput];
NSLog(@"OutputDate= %@",dateOutPut); 
```

控制台输出：18:48

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T13:05:51.993

```
NSString *str=@"18:30";
int addTime=18;
NSDateFormatter *formatter=[[NSDateFormatter alloc] init];
[formatter setDateFormat:@"HH:mm"];
NSDate *dateInput=[formatter dateFromString:str];
dateInput=[dateInput dateByAddingTimeInterval:addTime*60];
NSString *dateOutPut=[formatter stringFromDate:dateInput];
NSLog(@"OutputDate= %@",dateOutPut); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-16T09:36:48.967

```
//convert string object into NSDate object
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"hh:mm a"];

//Set System Timezone
[formatter setTimeZone:[NSTimeZone systemTimeZone]];
NSDate *TimeInDateFormat = [formatter dateFromString:@"12:45 AM"];

//Additing 01:00 Houes
NSTimeInterval secondsInOneHours = 1 * 60 * 60;
NSDate *dateOneHoursAhead = [TimeInDateFormat 
dateByAddingTimeInterval:secondsInOneHours];
NSLog(@"after added dateOneHoursAhead: %@",dateOneHoursAhead); 
```

abow 代码输出为：

```
after added dateOneHoursAhead: 01:45 PM 
```

现在试试........

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-02T17:19:08.890

这是快速版本。

```
 let str: String = "10:30"
        let addTime: Int = 30  //minutes
        let formatter = DateFormatter()
        formatter.dateFormat = "HH:mm"
        var dateInput: Date? = formatter.date(from: str)
        dateInput = dateInput?.addingTimeInterval(TimeInterval(addTime*60))
       endtime = formatter.string(from: dateInput!) 
```

感谢@Andy Paul 提供客观的 c 版本代码。

# c# - 如何在所有内容页面上显示图像 ASP.Net MVC

> ID：12674464
> 
> 赞同：0
> 
> 时间：2012-10-01T13:40:14.057
> 
> 标签：c#, asp.net, asp.net-mvc-3

如果我停留在我的默认页面然后显示图像但是当我转到另一个页面图像不显示时，我已将它放在我的应用程序中的 MasterPage 上。你能帮我为什么这在另一个页面上不起作用。

```
<ul  id="scroller">
   <div class="serv"> <a href="#"  onmouseover="document.wordpress.src='images/wordpress-development_red.png'" onmouseout="document.wordpress.src='images/wordpress-development.png'"> <img src="images/wordpress-development.png" name="wordpress"><br />
       WORDPRESS </a>
  </div>

  <div class="serv1"> <a href="#"  onmouseover="document.Android.src='images/mobil-app-development_red.png'" onmouseout="document.Android.src='images/mobil-app-development.png'"> <img src="images/mobil-app-development.png" name="Android"/><br />
      Android</a>
 </div>
</ul> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:43:39.580

我怀疑你的图片的网址是错误的。由于您已经对其进行了硬编码，这不足为奇。您**永远不**应该在 ASP.NET MVC 应用程序中对 url 进行硬编码。您应该**始终**使用 url 助手：

```
<a href="#" onmouseover="document.wordpress.src='@Url.Content("~/images/wordpress-development_red.png")'" onmouseout="document.wordpress.src='@Url.Content("~/images/wordpress-development.png")'">
    <img src="@Url.Content("~/images/wordpress-development.png")" name="wordpress">
    <br />
    WORDPRESS 
</a> 
```

如果您使用的是 WebForms 视图引擎（请适当标记您的问题，以便我们不必猜测）：

```
<a href="#" onmouseover="document.wordpress.src='<%= Url.Content("~/images/wordpress-development_red.png") %>'" onmouseout="document.wordpress.src='<%= Url.Content("~/images/wordpress-development.png") %>'">
    <img src="<%= Url.Content("~/images/wordpress-development.png") %>" name="wordpress">
    <br />
    WORDPRESS 
</a> 
```

# android - 将页脚添加到可展开的 ListView

> ID：12674471
> 
> 赞同：2
> 
> 时间：2012-10-01T13:40:44.803
> 
> 标签：android, listview, android-listview, footer, expandablelistview

我有一个可扩展的 listView，它已经有一些数据（来自数据库）。当用户打开我的应用程序时，会显示一个“加载”标题，在此期间从 Internet 中提取新数据。

现在，当收到新数据时，我将其存储在数据库中并更新我的光标。新数据显示在旧数据上方。

我还有一个页脚，询问我是否必须从互联网加载更多数据。现在，页脚显示在旧数据下方。我想要一个介于新数据和旧数据之间的视图，即在新数据下方，以便在单击该视图时，从互联网上提取新数据，该数据被推到新数据下方但旧数据上方。（您可以想象 twitter 时间线示例来理解我的问题。）

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:24:03.787

我不知道它是否会完全按照您的预期工作，但请尝试添加 View 的 MergeAdapter（下面的链接）。您将拥有一个 ListView 和两个相同的适配器 - 一个用于旧数据和新数据。之间会有一些视图 - 在你的情况下加载按钮。

```
MergeAdapter adapter = new MergeAdapter();;
adapter.addAdapter(oldAdapter);
adapter.addView(loadingLayout);
adapter.addAdapter(newAdapter); 
```

MergeAdapter 可以在单个 ScrollBar 的单个活动中显示（类似于）两个 ListView。但是删除添加的视图存在/存在一些问题。检查是否启用了此选项。
链接到 MergeAdapter：[https](https://github.com/commonsguy/cwac-merge)
://github.com/commonsguy/cwac-merge 也许这在某些情况下会有所帮助：[http ://pivotallabs.com/users/joe/blog/articles/1759-android-tidbits-6- 22-2011-隐藏标题视图](http://pivotallabs.com/users/joe/blog/articles/1759-android-tidbits-6-22-2011-hiding-header-views)

# android - 带有自定义拇指的 Android 搜索栏，其中包含动态文本

> ID：12674477
> 
> 赞同：9
> 
> 时间：2012-10-01T13:41:02.227
> 
> 标签：android, seekbar

我想创建 android 自定义`SeekBar`，*其中包含带有文本的拇指*以显示当前的搜索位置。

这是我的代码：

```
SeekBar sb;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.custom_seek_bar_activity);

    sb = (SeekBar)findViewById(R.id.slider);
    sb.setMax(100);
    sb.setProgress(10);
    BitmapDrawable bd = writeOnDrawable(R.drawable.star2, Double.toString(50));

    sb.setThumb(bd);

    sb.setOnSeekBarChangeListener(new OnSeekBarChangeListener(){
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser)
        {
            int pos = sb.getProgress();
            double star = pos/(20.0);
            TextView tv = (TextView)findViewById(R.id.percent);
            tv.setText(Double.toString(star)+"%");
            BitmapDrawable bd = writeOnDrawable(R.drawable.star2, Double.toString(star));
            bd.setBounds(new Rect(0,0, 
                bd.getIntrinsicWidth(), 
                bd.getIntrinsicHeight()
            ));
            seekBar.setThumb(bd);
        }

        @Override
        public void onStartTrackingTouch(SeekBar arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStopTrackingTouch(SeekBar arg0) {
            // TODO Auto-generated method stub

        }
    });

}   

public BitmapDrawable writeOnDrawable(int drawableId, String text){

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId).copy(Bitmap.Config.ARGB_8888, true);

    Paint paint = new Paint(); 
    paint.setStyle(Style.FILL);  
    paint.setColor(Color.BLACK); 
    paint.setTextSize(10); 

    Canvas canvas = new Canvas(bm);
    canvas.drawText(text, 0, bm.getHeight()/2, paint);

    return new BitmapDrawable(bm);
} 
```

但是当我移动拇指时，它会转到搜索栏的开头。有没有人有解决方案来移动带有搜索栏位置的自定义拇指？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T13:11:07.907

我使用 SeekBar 在我的应用程序中显示计时器倒计时。在计时器拇指内，我使用以下代码显示当前的 SeekBar 进度号：

```
 SeekBar timerBar = (SeekBar) findViewById(R.id.seekBarTimer);
    if (timerBar != null) {
        timerBar.setMax((int) (Settings.countdownSeconds + 1));
        timerBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar arg0) {
            }

            @Override
            public void onStartTrackingTouch(SeekBar arg0) {
            }

            @Override
            public void onProgressChanged(SeekBar timerBar, int arg1, boolean arg2) {
                Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.seek_thumb);
                Bitmap bmp = bitmap.copy(Bitmap.Config.ARGB_8888, true);
                Canvas c = new Canvas(bmp);
                String text = Integer.toString(timerBar.getProgress());
                Paint p = new Paint();
                p.setTypeface(Typeface.DEFAULT_BOLD);
                p.setTextSize(14);
                p.setColor(0xFFFFFFFF);
                int width = (int) p.measureText(text);
                int yPos = (int) ((c.getHeight() / 2) - ((p.descent() + p.ascent()) / 2));
                c.drawText(text, (bmp.getWidth()-width)/2, yPos, p);
                timerBar.setThumb(new BitmapDrawable(getResources(), bmp));
            }
        });
        timerBar.setProgress(0);
    } 
```

R.drawable.seek_thumb drawable 是我的拇指可绘制对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T09:33:07.143

我现在得到了解决方案，在`setBound()`我通过左上角的方法中`0`，这就是为什么它在开始时显示搜索栏。进行以下更改后，我得到了它的工作原理。

事件中的调用`setThumbPos()`方法`onProgressChanged()`

```
public void setThumbPosition(SeekBar seekBar){
    int max = seekBar.getMax();

    int available = seekBar.getWidth() - seekBar.getPaddingLeft() - seekBar.getPaddingRight();
    float scale = max > 0 ? (float) seekBar.getProgress() / (float) max : 0;

    //scale = 1;
    int pos = sb.getProgress();
    double star = pos/(20.0);

    BitmapDrawable bd = writeOnDrawable(R.drawable.star2, Double.toString(star));

    int thumbWidth = bd.getIntrinsicWidth();
    int thumbHeight = bd.getIntrinsicHeight();
    //available -= thumbWidth;

    int thumbPos = (int) (scale * available);
    if(thumbPos <= 0+thumbWidth){
        thumbPos += (thumbWidth/2);
    }else if(thumbPos >= seekBar.getWidth()-thumbWidth){
        thumbPos -= (thumbWidth/2);
    }

    bd.setBounds(new Rect(thumbPos,0, 
            thumbPos+bd.getIntrinsicWidth(), 
        bd.getIntrinsicHeight()
    ));

    seekBar.setThumb(bd);

    TextView tv = (TextView)findViewById(R.id.percent);
    tv.setText(Double.toString(star)+"%");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T09:56:06.153

我最终使用了这个简单的解决方案。它可能不如适当的自定义 SeekBar*那样*高性能，但它很容易插入现有布局，并在 SeekBar 拇指顶部使用任何标签或其他视图。

```
protected void positionThumbLabel(SeekBar seekBar, TextView label)
{
  Rect tr = seekBar.getThumb().getBounds();
  label.setWidth(tr.width());
  label.setX(tr.left + seekBar.getPaddingLeft());
} 
```

通过一些小的更改，您可以相对于拇指的中心定位覆盖：

```
protected void positionThumbOverlayCenter(SeekBar seekBar, View overlay)
{
  Rect tr = seekBar.getThumb().getBounds();
  overlay.setX(tr.centerX() - (overlay.getWidth() * 0.5f) + seekBar.getPaddingLeft());
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-30T06:42:24.033

在此处选择与您的情况相匹配的解决方案：[http ://www.helptouser.com/code/10722746-add-dynamic-text-over-android-seekbar-thumb.html](http://www.helptouser.com/code/10722746-add-dynamic-text-over-android-seekbar-thumb.html)

# objective-c - 使用 NSOperationQueue 加载 UITableViewCell

> ID：12674479
> 
> 赞同：0
> 
> 时间：2012-10-01T13:41:20.533
> 
> 标签：objective-c, uitableview, nsoperationqueue

大家好，我有一个 UITableView，可以从 NSMutableArray 加载预先计算的单元格。我想使用 NSOperationQueue 或 PerformSelectorOnMainThread 来更新用户界面以启用平滑滚动，但我得到一个错误......这是我的代码......

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  //queue is being initialized in viewDidLoad          
  [queue addOperationWithBlock:^ {
      [[NSOperationQueue mainQueue] addOperationWithBlock:^ {
          NSLog(@"Updating...");      
          return [self.CellObjects objectAtIndex:indexPath.row];          
          //if you remove the line above with the return, NSOperationQueue will work but I need the above line to load the cell.
      }];
  }];
} 
```

有没有办法让它工作？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:51:13.597

为什么不简单...

```
return [self.CellObjects objectAtIndex:indexPath.row]; 
```

...？

一团糟。为什么你有两个电话`addOperationWithBlock:`？而且你的`return`陈述与返回值无关`tableView:cellForRowAtIndexPath:`。它是你的块的返回值，所以它永远不会起作用。

你的错误是什么？我认为这是关于不兼容的块指针，因为它期望`void(^)(void)`并且您正在尝试发送`UITableViewCell *(^)(void)`.

块不会在那里帮助你。如果您在 中预先计算了单元格`CellObjects`，则只使用该`return self.CellObjects[indexPath.row];`行。

也不要使用像`CellObjects`. 应命名为`cellObjects`。检查案件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:54:37.877

以这种方式抵消你的细胞检索不会给你任何优势。您需要在 UITableView 实例要求单元格之前计算您的单元格高度/大小/内容。

UITableView 期望从主线程上的委托回调返回一个 UITableViewCell。

一个更好的主意是将计算放在其他线程上，如果它们需要时间并且它们完成后你可以回调你的 UITableView 到`reloadData`.

# android - 如何使用 GSON 在 Android 中解析带有字段属性的 JSON

> ID：12674481
> 
> 赞同：0
> 
> 时间：2012-10-01T13:41:21.763
> 
> 标签：android, gson

带有@ 的值是field street 的属性......我以前从未在json 中见过这个，所以我有点迷路了。

```
"street":{"$":"Stadhouderskade","@label":"Street","@id":"123"} 
```

XML 中的相同内容将是：

```
<street id="123" label="Street">Stadhouderskade</street> 
```

如何使用 gson 获取此字段值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:48:01.890

*所有*值都是街道的属性，对象与 XML 完全不同。在 XML 中有“两种属性”：

*   只能是字符串的属性
*   可以结构化的内容

与 JSON 不同，它不会直接映射到对象。因此，只需使用[FieldNamingStrategy](http://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/FieldNamingStrategy.java?r=411)将“$”映射到“name”，将“@something”映射到“something”，类如下

```
class Street {
    String name;
    String label; // maybe should be omitted as "Street" is quite useless here
    int id;
} 
```

或者 JSON 还有其他问题吗？我写的内容必须足够显示的部分。

# android - 如何从内存转储中找出预加载的系统可绘制对象（位图）的 ID 或名称

> ID：12674484
> 
> 赞同：5
> 
> 时间：2012-10-01T13:41:26.407
> 
> 标签：android, memory-management, bitmap, android-resources, eclipse-memory-analyzer

我正在分析我们应用程序的内存使用情况，发现奇怪`Drawables`，它不断“吃掉”几兆字节的堆。以下是[MAT](http://www.eclipse.org/mat/)的几张截图：

![支配树](../Images/299a824d9f898b74fa2af4a4883e107b.png) *具有 2 个非常大的位图的支配树*

![path_to_gc_roots](../Images/0d259d44b78de45282dfdf7cc5e21b02.png) *上述位图之一的 GC 根路径*

无论我使用我们的应用程序多长时间或多密集，此位图总是出现在我的手机（*Samsung Galaxy Nexus，OS 4.1.1 ）的堆转储中。*

我已经尝试使用 MAT 搜索此位图的来源 - 没有运气。我能找到的所有有用信息都是`width`位`height`图，都是 512x512： ![位图信息](../Images/5fcc0515fd1c59c1b2e27e52868ea68b.png)

但是我们的应用程序没有任何单一的 512x512 可绘制对象。我认为这是一些“系统”可绘制对象。但究竟是什么？为什么它们这么大？

我还查看了`android.content.res.Resources`类的源代码，搜索字段的用法`sPreloadedDrawables`- 也没有运气。我从内存转储中得到的只是`key`来自`sPreloadedDrawables`数组，但我无法从这个键中确定文件名或资源 ID。

所以，我的问题是：

*   **如何确定此位图的名称或 ID**？

*   **加载这个巨大的位图是什么，为什么它们总是留在内存中**？

**更新**：

我找到了一种[从内存转储中查看此位图](https://stackoverflow.com/questions/12709603/mat-eclipse-memory-analyzer-how-to-view-bitmaps-from-memory-dump)的方法。这两个位图是一个简单的渐变，一个是黑色，另一个是白色。我想这是ICS 主题`Holo.Light`的资源。`Holo.Dark`但是我的第二个问题仍然是实际的：为什么这个位图总是留在内存中？有没有办法上传或回收它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:13:54.197

这张来自 android.jar 的图片，您必须将其包含到您的项目中。有两个垂直梯度的正方形。第一个 - 从 0x000000 到 0x272d33，第二个 - 从 0xe8e8e8 到 0xfafafa。您可以在 android.jar/res/drawable-nodpi/background_holo_dark.png 和 background_holo_light.png 中找到它们。当然，根据您的 Android SDK 版本，您可以获得不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:17:01.053

我猜它们会留在内存中，因为它们是活动的默认背景。尝试在您的主题中指定不同的背景，看看它们是否仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T08:42:23.143

预加载的可绘制对象由 Zygote 加载。

`ZygoteInit#preloadResources()`

```
 /**
 * Load in commonly used resources, so they can be shared across
 * processes.
 *
 * These tend to be a few Kbytes, but are frequently in the 20-40K
 * range, and occasionally even larger.
 */
private static void preloadResources() {
    final VMRuntime runtime = VMRuntime.getRuntime();

    try {
        mResources = Resources.getSystem();
        mResources.startPreloading();
        if (PRELOAD_RESOURCES) {
            Log.i(TAG, "Preloading resources...");

            long startTime = SystemClock.uptimeMillis();
            TypedArray ar = mResources.obtainTypedArray(
                    com.android.internal.R.array.preloaded_drawables);
            int N = preloadDrawables(runtime, ar);
            ar.recycle();
            Log.i(TAG, "...preloaded " + N + " resources in "
                    + (SystemClock.uptimeMillis()-startTime) + "ms.");

            startTime = SystemClock.uptimeMillis();
            ar = mResources.obtainTypedArray(
                    com.android.internal.R.array.preloaded_color_state_lists);
            N = preloadColorStateLists(runtime, ar);
            ar.recycle();
            Log.i(TAG, "...preloaded " + N + " resources in "
                    + (SystemClock.uptimeMillis()-startTime) + "ms.");
        }
        mResources.finishPreloading();
    } catch (RuntimeException e) {
        Log.w(TAG, "Failure preloading resources", e);
    }
} 
```

你看，预加载的drawable是`com.android.internal.R.array.preloaded_drawables`

# java - 从批处理运行可执行 jar - 如何指定 java 主目录？

> ID：12674485
> 
> 赞同：1
> 
> 时间：2012-10-01T13:41:27.863
> 
> 标签：java, batch-file, executable

我正在批量运行一个小终端 jar 工具：

```
%cd%
"c:\program files (x86)\Java\jre7\bin\java" -jar myfile.jar 
```

但是对于我正在运行的每台新机器，我必须首先检查并编辑 java home 的路径。是否有任何批处理方法不必一直编辑它，而是自动查找 java-homedir？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:57:46.060

在 Windows 上，您可以按顺序检查：

1.  JAVA_HOME 环境变量。
2.  路径中的 java 可执行文件。
3.  `reg query "HKLM\Software\JavaSoft\Java Runtime Environment\"`列出你所有的 java 运行时。

使用最后一个命令，您可以看到 CurrentVersion 并`reg query "HKLM\Software\JavaSoft\Java Runtime Environment\your_version_number"`找到 java 主目录。

如果所有以前的方法都失败了，您需要扫描文件系统以查找 java 二进制文件:(。

# c# - 在两个不同端口上连接到服务器的 TCP 套接字

> ID：12674488
> 
> 赞同：1
> 
> 时间：2012-10-01T13:42:01.293
> 
> 标签：c#, sockets, tcp, proxy

我有一个自定义 TCP 服务器在端口 5888（虚拟端口）上侦听。代理服务器侦听传入连接。当代理接收到某些页面的 HTTP 请求时，它应该将其中继到主服务器的 80 端口。对于其他页面请求，代理需要将数据发送到主服务器的 8081 端口。

端口 80 用于服务 HTML 页面，而端口 8081 用于将数据流式传输到客户端。

我能够接收代理上的传入连接，然后从客户端读取数据。读取数据后，我可以确定连接到主服务器上的哪个端口来发送数据。

我一直在决定如何连接 2 个端口以将数据从客户端发送到主服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:49:17.310

在这种情况下，您需要 2 个套接字连接对象到不同端口上的同一 IP（这是合法的），或者您有一个连接对象根据您必须处理的端口重新连接。

根据您必须切换连接的频率，后一个版本可能会产生巨大的开销，而第一个版本允许您几乎同时将数据发送到两个端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:55:25.120

您需要停止将您的程序视为服务器。收到连接后，读取数据，并决定将其发送到哪个端口，换档并开始像客户端一样操作。

只需在端口 80 或 8081 上打开到“localhost”的新连接，然后重新发送您收到的数据，就好像您是原始客户端一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:02:27.313

您的客户端连接到端口 5888 上的代理服务器，因此无论您从哪个真实服务器（Web 或流媒体）获取数据，您都将仅使用端口 5888 将数据提供给客户端。

这似乎是一个不太实际的解决方案。我在这里假设您正在尝试实现一种控制端口和数据端口结构，其中一个端口控制来自另一个端口的流。

只需创建两个套接字就足以从两个服务器获取数据。在这里，您必须手动创建一个您的客户端可以理解的协议，因为您将使用单端口向客户端提供 html 和流数据。

# asp.net - 如何将来自单独程序集的用户控件添加到 Sharepoint 应用程序页面？

> ID：12674489
> 
> 赞同：1
> 
> 时间：2012-10-01T13:42:00.883
> 
> 标签：asp.net, sharepoint, web-config, sharepoint-2007, iis-6

这个问题可能有一个非常简单的解决方案，但由于我根本不了解 Sharepoint，而且似乎无法通过谷歌搜索我的智慧之路，也许你们中的一个人可以引导我朝着正确的方向前进。

背景：目前我在一个项目中工作，我们的 Web 解决方案的一部分是由 Sharepoint 构成的，我之前完全没有来自 Sharepoint 的经验。最近，我一直在为看似非常简单的任务而苦苦挣扎，将（网络）用户控件添加到我们解决方案中的一个 Sharepoint 页面。这项任务有两个重要要求；

*   用户控件和代码隐藏必须位于并组成一个单独的程序集
*   该大会必须签署

用户控件程序集实际上是另一个带有 Default.aspx 的 ASP.NET Web 应用程序，所以我可以使用 Cassini 的模型来调试用户控件。当我通过 Default.aspx 调试它时，它工作正常，显示用户控件，我可以按预期使用它。

我的 web.config 中有这些行：

```
<SafeControls>
[..]
<SafeControl Assembly="MyMainNamespace.SubNamespace.SelectorPopup, Version=1.0.0.0, Culture=neutral, PublicKeyToken=7fa78676161515a2" Namespace="MyMainNamespace.SubNamespace.SelectorPopup" TypeName=" *" Safe=" True " />
[..]
</SafeControl> 
```

在 Sharepoint 页面上，我输入了以下内容：

```
<% @Register TagPrefix= "Selector" Namespace="MyMainNamespace.SubNamespace.SelectorPopup" Assembly="MyMainNamespace.SubNamespace.SelectorPopup" %>
[..]
<Selector:SelectorBoxControl runat="server" SelectorType="ContentArea" ></ Selector: SelectorBoxControl> 
```

我们的项目是部署在 IIS6 (Windows Server 2003) 上的 .NET 3.5 (2.0) 上的 ASP.NET Web 项目，我们使用的是 Sharepoint 2007、SQL Server 2005。构建、部署和 Visual Studio 标记都很好。

问题：部署到我们的测试环境后，Sharepoint 页面上根本不显示用户控件，我不知道为什么。

构建和部署工作正常，甚至显示 Sharepoint 页面，只是我的控件无处可见。实际上，HTML 响应完全不包含我的用户控件的痕迹。即使我在控件中放置了纯 HTML 文本并且没有任何功能。没有错误消息，并且事件处理程序没有提供有关可能的错误或警告的信息。

我错过了什么吗？有什么我需要启用的，我需要添加的属性或某处的引用吗？无论如何我可以让这种非显示行为生成一个可以理解的错误消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:12:57.810

我将其发布为答案，因为尽管我们交换了评论，但我不确定您和我一直在谈论同一件事。

如您所知，ASP.NET 中有两种控件，用户控件和 Web 自定义控件。 *用户*控件有一个包含标记的 .ascx 文件，并且 - 这很重要 - 不能在项目之间共享。编译他们所在的项目并引用该程序集没有好处，因为 .ascx 文件不是程序集的一部分。Web*自定义控件*没有标记文件：它们完全是在代码中创建的，它们的控件以编程方式创建并添加到自定义控件的 Controls 集合中。

因此，您要替换的单独程序集中的第三方控件是 Web 自定义控件，或者 - 如果它在其源中使用单独的标记文件 - 它必须使用一种技巧，例如虚拟路径提供程序技巧，以实现这一目标。

您谈到了用户控件和代码隐藏，就好像它们是分开的一样，这让我相信您确实在谈论 Web 用户控件。但是这些根本无法在 Web 项目之间共享。如果您的控件需要存在于外部程序集中，最简单的做法是将其重写为以编程方式构建其内容的自定义控件。

还有其他选项，例如[Virtual Path Provider](http://www.codeproject.com/Articles/15494/Load-WebForms-and-UserControls-from-Embedded-Resou)解决方案，或 Scott Guthrie 的著名解决方案（[此处](http://msdn.microsoft.com/en-us/library/aa479564.aspx)）。但最简单的选择是将其编写为自定义控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:16:35.680

我认为您需要向 GAC 注册您的 dll 以便 SharePoint 找到它。我可能在那里错了，复制到 bin 目录就可以了。但我很确定您在注册时需要在 Assembly 属性中使用完全限定名称。

```
<% @Register TagPrefix= "Selector" Namespace="MyMainNamespace.SubNamespace.SelectorPopup" Assembly="MyMainNamespace.SubNamespace.SelectorPopup, Version=1.0.0.0, Culture=neutral, PublicKeyToken=7fa78676161515a2" %> 
```

# iphone - 如何在 iphone sdk 中的 skyDrive 上上传/下载文件夹

> ID：12674498
> 
> 赞同：2
> 
> 时间：2012-10-01T13:42:36.313
> 
> 标签：iphone

我正在研究 SkyDrive API。我能够上传/下载文件和重命名文件。但我需要将文件夹上传到 SkyDrive 并从 SkyDrive 下载文件夹。

我搜索但找不到文件夹下载/上传的任何内容。有没有办法从 SkyDrive 上传/下载文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:16:43.507

您不能直接从 SkyDrive SDK 执行此操作，您需要遍历文件夹中的文件列表以创建嵌套数组，然后让您的代码自己执行此操作。您也可以查看[SMEStorage 多云 API](http://smestorage.com/?p=static&page=for_developers)，它的 API 也支持 skydrive，并且似乎支持文件夹下载

# android - 使用 delemeter "##&&**&&##" 拆分字符串的异常

> ID：12674499
> 
> 赞同：0
> 
> 时间：2012-10-01T13:42:38.557
> 
> 标签：android, string

我在根据以下 delemeter 拆分字符串时遇到问题：

```
 ##&&**&&## 
```

这就是我尝试拆分字符串的方式：

```
 String[] errorDetails = errors.split("##&&**&&##"); 
```

但我得到以下异常：

```
 regex.PatternSyntaxException: Syntax error in regexp pattern near index 6:##&&**&&## 
```

这里索引 6 被指出为“**”之后的第一个“&”。

我也尝试使用 toString() 方法，但它仍然给我同样的问题。谁能给我任何想法如何摆脱它。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:52:38.640

字符 * 在正则表达式中具有特殊含义。您需要对其进行转义以删除特殊含义。

```
String[] errorDetails = errors.split("##&&\\*\\*&&##"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:59:20.510

您的 " `##&&**&&##`" 被视为正则表达式，但它不被认为具有有效的语法。如何以正确的语法使用正则表达式来准确表示“ `##&&**&&##`”，如下所示？

```
.split("[#]{2}[&]{2}[*]{2}[&]{2}[#]{2}"); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:47:15.620

尝试以下一种：

```
 String[] errorsdetails = errors.split("@#$"); 
```

# objective-c - 在objective-c中创建自定义动态类

> ID：12674502
> 
> 赞同：7
> 
> 时间：2012-10-01T13:42:50.050
> 
> 标签：objective-c, ios, objective-c-runtime, inline-code

在我的应用程序中`UIViewController`，我经常使用它`UIAlertView`来向用户提问。

因为我需要每个人的响应，所以`UIAlertView`我让我的控制器成为 的代表`UIAlertViewDelegate`，这很好，但是在 7 `UIAlertView`'si` 之后我试图找到一种更好的方式来使用代表。

在java中，我知道我可以为单一目的创建内联类，就像这个问题一样：[Java - 内联类定义](https://stackoverflow.com/questions/8913406/java-inline-class-definition)

我想知道的是：有没有办法创建一个动态委托的类？实现这样的目标

```
id<UIAlertViewDelegate> myCustomClass = @class {
    my class code goes here
}

UIAlertView* alertView;
alertView = [[UIAlertView alloc] initWithTitle:@"Title"
                                       message:@"Message"
                                      delegate:myCustomClass
                             cancelButtonTitle:@"No"
                             otherButtonTitles:@"OK", @"Sure", @"Maybe", nil] ];    
[alertView show]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T13:46:50.030

不——Objective-C 中没有“内联类”。话虽如此，您可以在运行时使用objective-c 创建自定义对象，这有点复杂，但我愿意分享一些代码来完成您所说的。

这是一个例子：

**NSObject+子类.h**

```
#import <objc/runtime.h>

typedef struct selBlockPair { SEL aSEL; id (^__unsafe_unretained aBlock)(id, ...); } selBlockPair;
#define NIL_PAIR ((struct selBlockPair) { 0, 0 })
#define PAIR_LIST (struct selBlockPair [])
#define BLOCK_CAST (id (^)(id, ...))

@interface NSObject (subclass)

+(Class) newSubclassNamed:(NSString *) name
            protocols:(Protocol **) protos
                 impls:(selBlockPair *) impls;

@end 
```

**NSObject+子类.m**

```
@implementation NSObject (subclass)

+(Class) newSubclassNamed:(NSString *)name
             protocols:(Protocol **)protos
                 impls:(selBlockPair *)impls
{
    if (name == nil)
    {
        // basically create a random name
        name = [NSString stringWithFormat:@"%s_%i_%i", class_getName(self), arc4random(), arc4random()];
    }

    // allocated a new class as a subclass of self (so I could use this on a NSArray if I wanted)
    Class newClass = objc_allocateClassPair(self, [name UTF8String], 0);

    // add all of the protocols untill we hit null
    while (protos && *protos != NULL)
    {
        class_addProtocol(newClass, *protos);
        protos++;
    }

    // add all the impls till we hit null
    while (impls && impls->aSEL)
    {
        class_addMethod(newClass, impls->aSEL, imp_implementationWithBlock(impls->aBlock), "@@:*");
        impls++;
    }

    // register our class pair
    objc_registerClassPair(newClass);

    return newClass;
}

@end 
```

**示例用法：**

```
int main()
{
    @autoreleasepool {
        __strong Class newClass = [NSString newSubclassNamed:@"MyCustomString" protocols:NULL impls: PAIR_LIST {
            @selector(description),
            BLOCK_CAST ^id (id self) {
                return @"testing";
            },
            NIL_PAIR
        }];

        NSString *someString = [newClass new];
        NSLog(@"%@", someString);
    }
} 
```

输出：

```
2012-10-01 10:07:33.609 TestProj[54428:303] 测试

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:47:05.697

Objective-C 不支持这种类型的 Java 匿名内部类。如果您想单独回复代表，我的好方法是尝试使用积木。

不幸的是，Apple 没有在 UIAlertViews 中添加块，但您可以自己实现它们。网上已经有很多人这样做了。看看这里：[http](http://blog.mugunthkumar.com/coding/ios-code-block-based-uialertview-and-uiactionsheet/) ://blog.mugunthkumar.com/coding/ios-code-block-based-uialertview-and-uiactionsheet/或[https://github.com/MugunthKumar/UIKitCategoryAdditions](https://github.com/MugunthKumar/UIKitCategoryAdditions)。

基本思想是您可以创建一个子类（如果使用关联对象，则创建一个类别），这将是它自己的委托，并告诉它自己的委托调用您传入的块

# reporting-services - 如何使用 Reporting Services 在散点图上添加回归线

> ID：12674515
> 
> 赞同：0
> 
> 时间：2012-10-01T13:43:17.070
> 
> 标签：reporting-services, plot, regression

我有两个数据集：

*   对于 scatter 我有选定时期的 X 和 Y 值（很多），
*   对于回归线，我有第一点和最后一点的数据。

是否可以在同一张图表中显示这两个系列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:50:15.217

尝试使用这里的方法：http: [//blogs.msdn.com/b/robertbruckner/archive/2010/04/11/reporting-services-recipes-book-downloads.aspx](http://blogs.msdn.com/b/robertbruckner/archive/2010/04/11/reporting-services-recipes-book-downloads.aspx)

下载关于线性回归的那个。

您必须在查询级别从数据中计算回归点。

这有助于我做类似的事情。

# css - 使表头链接在两端改变颜色和背景图像曲线

> ID：12674517
> 
> 赞同：0
> 
> 时间：2012-10-01T13:43:33.323
> 
> 标签：css

`a:active,a:link,a:visited{color:#06c}`控制所有的标题链接颜色。如何在不删除或更改整体颜色的情况下克服它？

我已经设置了`table thead th a {color: #ffffff;}`。

table thead 实际上具有左右半径的背景图像。如何让它显示出来？

[jsfiddle](http://jsfiddle.net/nNw62/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:02:18.187

您需要将边框半径应用于包含表格的 div 并剪辑溢出...边框半径不适用于 tr、td、thead、table 等。

[此处](http://jsfiddle.net/Jayx/sA4e8/2/)为示例 JSfiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:46:31.277

您可以添加它以覆盖您的主题中的链接颜色：

```
thead a:active, thead a:link, thead a:visited, a:hover {color: white;} 
```

为了使圆角可见，您应该将样式应用于表格，而不是 thead ：

```
table {
    width:100%; height:29px; background:url('http://cdn2.f-cdn.com/img/bg/mod_top_blue1.png');
    -moz-border-radius-topright:10px;
    -moz-border-radius-topleft:10px; 
    -webkit-border-top-right-radius:10px;
    -webkit-border-top-left-radius:10px;
    background-color: #FFFFFF;
} 
```

# iphone - 如果语句不适用于空格字符

> ID：12674522
> 
> 赞同：0
> 
> 时间：2012-10-01T13:43:53.883
> 
> 标签：iphone, objective-c, ios, xcode, if-statement

我正在使用一些非常奇怪的 IF。如果没有空格字符，xcode 似乎只能读取它们。如果有，它不会读取它们。这是我的代码。它适用于前 2 个，但最后一个不适用。

有什么线索吗？？

非常感谢！

```
if (txtParametro1EQQP.text == @"Adulto") {
    pvObjetivoAdultoEQQP.alpha = 1;
    pvPacienteEQQP.alpha = 0;
    pvObjetivoCriancaEQQP.alpha = 0;
    pvObjetivoAdultoDialiseEQQP.alpha = 0;
}else if (txtParametro1EQQP.text == @"Criança"){
    pvObjetivoCriancaEQQP.alpha = 1;
    pvPacienteEQQP.alpha = 0;
    pvObjetivoAdultoEQQP.alpha = 0;
    pvObjetivoAdultoDialiseEQQP.alpha = 0;
}else if (txtParametro1EQQP.text == @"Adulto em diálise"){
    pvObjetivoAdultoDialiseEQQP.alpha = 1;
    pvPacienteEQQP.alpha = 0;
    pvObjetivoAdultoEQQP.alpha = 0;
    pvObjetivoCriancaEQQP.alpha = 0;
} 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T13:45:43.720

您应该使用`[myLabel.text isEqualToString:@"Whatever string"]`它来在 Cocoa 中进行字符串比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:48:45.170

您的代码没有任何问题，`txtParametro1EQQP's`文本和您正在比较的文本有问题，

您正在比较的文本 = Adulto em diálise

txtParametro1EQQP 中的文本 = Adulto em dialise

**á**和**a**有区别

 **所以只需检查价值`txtParametro1EQQP`**

# haskell - 递归地将整数与元组列表进行比较

> ID：12674523
> 
> 赞同：1
> 
> 时间：2012-10-01T13:43:54.340
> 
> 标签：haskell, recursion, functional-programming

我正在编写一个 Haskell 函数，它递归地将整数`i`与元组列表进行比较。特别是，我想将整数与列表中的`i`每个`a`进行比较`(a,b)`。如果`i < a`然后打印`b`与`a`

样本输入/输出

```
check 0.01 [(0.25, 'x'),(0.50,'y'),(0.75,'z')] = 'x'
check 0.4 [(0.25, 'x'),(0.50,'y'),(0.75,'z')] = 'y'
check 100 [(0.25, 'x'),(0.50,'y'),(0.75,'z')] = ' ' 
```

我写了一个关于如何处理它的伪代码，但我无法将该伪代码转换为实际的 Haskell 函数。这是我到目前为止所拥有的：

```
check :: a -> [(a,b)] -> b
check i (a,b):xs = tuples d xs
    | if d <= a in (a,b) then = b //pseudocode
    | id d !<= a in (a,b) then recursively check the next tuple //pseudocode
    | otherwise ' ' // d is larger than all the a's of the tuple so return a space 
```

我相信我正在考虑的方式是正确的，但我无法弄清楚如何遍历元组，将整数`i`与元组的`a`s 进行比较。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:56:36.550

需要注意的几点：

*   你不能在同一个函数中同时返回一个数字`1`和一个字符，因为它们是不同的类型。`' '`你可以做的 insted 是用来`Maybe b`返回`Nothing`你想返回`' '`的地方和`Just 1`你想返回的地方`1`。

*   由于您正在对类型进行比较，`a`因此您需要`a`属于`Ord`类型类。

所以你修改后的程序变成了

```
check :: (Ord a) => a -> [(a,b)] -> Maybe b
check d [] = Nothing
check d ((a,b):xs) | d <= a = Just b
                 | otherwise = check d xs 
```

尝试在 ghci 中的功能给出

```
> check 0.01 [(0.25, 1),(0.50,2),(0.75,3)]
Just 1
> check 0.4 [(0.25, 1),(0.50,2),(0.75,3)]
Just 2
> check 100 [(0.25, 1),(0.50,2),(0.75,3)]
Nothing 
```

您还可以使用`find`from`Data.List`编写具有类型的函数

```
find :: (a -> Bool) -> [a] -> Maybe a 
```

所以你的功能检查变成

```
check2 :: (Ord a) => a -> [(a,b)] -> Maybe b
check2 a = fmap snd . find ((> a) . fst) 
```

（编辑）根据编辑的问题进行更改

```
check :: (Ord a) => a -> [(a,Char)] -> Char
check d [] = ' '
check d ((a,b):xs) | d <= a = b
                   | otherwise = check d xs 
```

为了能够使用原始检查功能，您还可以使用`fromMaybe`from`Data.Maybe`

```
newCheck ::  Ord a => a -> [(a, Char)] -> Char
newCheck d xs = fromMaybe ' ' $ check d xs 
```

# c# - 如何在给定屏幕坐标的文本框中选择单词？

> ID：12674530
> 
> 赞同：1
> 
> 时间：2012-10-01T13:44:55.383
> 
> 标签：c#, windows-phone-7

我有一个箭头的图像，它跟随手指。当我抬起手指时，我想在箭头末尾的 TextBox 中选择一个单词。所以我有一个屏幕坐标

```
imgArrow_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e) 
```

事件并且必须开火

```
TextBox_Tap(object sender, System.Windows.Input.GestureEventArgs e) 
```

在 TextBox 中获得光标的正确位置。

问题是如何`TextBox_Tap()`使用给定的坐标进行射击，因为我无法构建`GestureEventArgs e`自己。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:14:54.740

尝试这样做：

```
input.getWordUnderPosition(x, y); 
```

# time-series - 在 MATLAB 中将数据拟合到 B 样条

> ID：12674532
> 
> 赞同：2
> 
> 时间：2012-10-01T13:45:08.843
> 
> 标签：time-series, matlab, curve-fitting, bspline

我正在尝试估计矩阵形式的时间序列数据中的缺失值。列代表时间点，即现在，我想将矩阵的每一行拟合到 B 样条，并用它来估计缺失值。我可以使用 MATLAB 将数据拟合到普通样条曲线，但我完全坚持试图弄清楚如何拟合数据以创建 B 样条曲线。使用曲线拟合工具箱中的默认 bspline 函数可以让我将节点向量设置为时间点向量，但我无法设置控制点，即行的元素。
任何帮助将非常感激。

**编辑：添加示例**

时间序列数据的行如下所示：

```
-0.11    0.1    0.01    0.06    0.04   -0.26    0.04    0.19   -0.22    -0.2    0.12    0.21    -0.26    -0.3    0.22    0.58    -0.36    0.13 
```

我的节点向量基本上是时间点，它看起来像这样：

```
 0     7    14    21    28    35    42    49    56    63    70    77    84    91    98   105   112   119 
```

基本上我想将每一行与结向量一起使用来构造一个 B 样条曲线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:51:06.317

这些怎么样？

1.  [快速 B 样条类](http://www.mathworks.com/matlabcentral/fileexchange/32509-fast-b-spline-class)
2.  [N 维 B 样条](http://www.mathworks.com/matlabcentral/fileexchange/19632-n-dimensional-bsplines)
3.  [B样条工具](http://www.mathworks.com/matlabcentral/fileexchange/27047-b-spline-tools)
4.  [样条拟合](http://www.mathworks.com/matlabcentral/fileexchange/13812-splinefit)

# android - SmartWirelessHeadset Pro 图标

> ID：12674533
> 
> 赞同：0
> 
> 时间：2012-10-01T13:45:10.250
> 
> 标签：android, wireless, sony, headset

（我已经为 Sony SmartWatch 创建了一个 Android/Extension 应用程序，现在我也在添加对 Sony Smart Wireless Headset Pro 的支持。）

我的问题是扩展程序的黑白 PNG 图标显示不正确（看起来它已损坏或其他什么？）。

我首先想到可能是构建签名应用的时候出现压缩错误，所以我构建了一个未签名的版本，将压缩后的图标替换为我原来的图标，然后进行签名。这不起作用，所以现在我认为耳机读取图像的方式可能有问题？

我还尝试了所有使用 GIMP 创建的不同图像颜色模式（1 位、24 位、32 位 PNG），但我无法让它工作。

有谁知道这个图标是否有任何特定限制（除了大小 18x18px）或者您是否必须以某种特殊格式保存文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:08:29.457

感谢您的反馈意见。我们将调查这是否是智能无线耳机专业版软件/固件的问题，如果我们发现任何问题，我将在此线程中发布更多信息。

通常，[智能扩展 SDK](http://developer.sonymobile.com/knowledge-base/tool-guides/download-the-new-smart-extension-sdk-and-create-smart-extras-apps/ "智能扩展 SDK")包含有关所需和推荐的图像格式的信息。例如，在 Smart Wireless Headset pro 白皮书第 2.2 章中。但我猜你已经看过这些规格了。

**更新！**

可从[Google Play](https://play.google.com/store/apps/details?id=com.sonyericsson.extras.smartwirelessheadsetpro)（版本 1.0.95）或 Sony Mobile[支持网站](http://www.sonymobile.com/global-en/software/accessories/smart-wireless-headset-pro/)修复图标问题。感谢彼得指出这个问题！

# android - 以编程方式将apk文件从资产文件夹保存到android中的系统/应用程序

> ID：12674535
> 
> 赞同：0
> 
> 时间：2012-10-01T13:45:12.610
> 
> 标签：android, system, android-assets, apk

我正在尝试以编程方式将 apk 文件从资产文件夹保存到 android 中的系统/应用程序文件夹。

我正在使用以下代码。但错误显示只读文件系统。

```
AssetManager assetManager = getAssets();
    InputStream in = null;
    OutputStream out = null;
    try {
        in = assetManager.open("youtuberanjit.apk");
        out = new FileOutputStream("/system/app/youtuberanjit.apk");
        byte[] buffer = new byte[1024];
        int read;
        while((read = in.read(buffer)) != -1){
            out.write(buffer, 0, read);
        }
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(
                Uri.fromFile(new File("/system/app/youtuberanjit.apk")), "application/vnd.android.package-archive");
        startActivity(intent);
    }catch(Exception e){
        // deal with copying problem
        Log.e("ERRORR", ""+e.getMessage());
    } 
```

请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:25:12.847

`/system`除非您有权这样做，否则您不能写信给。为此，您将需要一个有根设备。

为什么您希望它成为系统应用程序，而不是“普通”用户应用程序？

# asp-classic - 删除经典 asp 数组中的第一个元素

> ID：12674536
> 
> 赞同：-1
> 
> 时间：2012-10-01T13:45:13.407
> 
> 标签：asp-classic

> **可能重复：**
> [使用经典 asp 收集数组中的第一个元素](https://stackoverflow.com/questions/12672926/collect-1st-element-in-an-array-using-classic-asp)

我在经典 asp 中有一个二维数组，我的目标是在该数组中找到第一个元素并将其保存在一个变量中。之后剩余的元素（第一个元素除外）保存在同一个数组中。

示例：如果“ `aryReturn`”是一个类似的数组。

```
aryReturn(0,0) = 1001
aryReturn(1,0) = 1002
aryReturn(2,0) = 1003 
aryReturn(3,0) = 1004
aryReturn(4,0) = 1005
aryReturn(5,0) = 1006 
```

现在我想`aryReturn(0,0)= 1001`在`Dim intValue`.

```
intValue = 1001 
```

然后在那之后，它应该返回带有剩余元素的数组。aryReturn =

```
aryReturn(0,0) = 1002
aryReturn(1,0) = 1003
aryReturn(2,0) = 1004 
aryReturn(3,0) = 1005
aryReturn(4,0) = 1006 
```

请帮助我...谢谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:52:42.057

content.remove("aryReturn")(0,0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:53:38.790

我研究了很多关于这个主题的页面。我发现的所有页面都建议重建现有数组，而无需删除要删除的元素。[这个](http://www.naterice.com/articles/67) 页面很容易阅读。如果您不满意，请尝试使用关键字**vbscript 删除**其他页面的数组项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:40:12.607

我不知道任何这样的直接功能。你可以使用我的小代码。只需复制和粘贴。我认为你可以使用它

```
dim aryReturn(5,0)
aryReturn(0,0) = 1001
aryReturn(1,0) = 1002
aryReturn(2,0) = 1003 
aryReturn(3,0) = 1004
aryReturn(4,0) = 1005
aryReturn(5,0) = 1006
var1=aryReturn(0,0)
  for i=0 to ubound(aryReturn)-1
     aryReturn(i,0)=aryReturn(i+1,0)
  response.Write(aryReturn(i,0)&"<br>")
  next 
```

# python - 循环树状结构

> ID：12674537
> 
> 赞同：2
> 
> 时间：2012-10-01T13:45:14.897
> 
> 标签：python, tree, iteration, generator

我有这种结构：

```
[
    array([ 0\. ,  4.5,  9\. ]),
    [
        array([ 100.,  120.,  140.]),
        [
            array([ 1000.,  1100.,  1200.]), 
            array([ 1200.,  1300.,  1400.])
        ],
        array([ 150.,  170.,  190.]),
        [
            array([ 1500.,  1600.,  1700.]), 
            array([ 1700.,  1800.])
        ]
    ]
] 
```

（其中`array`s 是`numpy.array`s）

如何编写一个给我的生成器：

```
(0, 4.5), (100, 120), (1000, 1100)
(0, 4.5), (100, 120), (1100, 1200)
(0, 4.5), (120, 140), (1200, 1300)
(0, 4.5), (120, 140), (1300, 1400)
(4.5, 9), (150, 170), (1500, 1600)
(4.5, 9), (150, 170), (1600, 1700)
(4.5, 9), (170, 190), (1700, 1800) 
```

到目前为止，我唯一拥有的是：

```
def loop_bin(bins):
    for i in range(len(bins)-1):
        yield [bins[i], bins[i+1]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:09:44.327

查看您的情况，我将其分解为几种不同类型的迭代：`overlap`和`paired`（以及常规迭代）。

然后我递归地遍历你的树结构，在`dopair`其中分析类型以确定它应该如何迭代它看到的数据。这个决定是基于我们是在处理一个节点（它包含一个子树）还是一个叶子（一个数组）。

`generator`开始了这一切。`izip`允许我们同时迭代两个生成器。

```
from itertools import izip

class array(list):
    pass

arr = [
    array([ 0\. ,  4.5,  9\. ]),
    [
        array([100.,  120.,  140.]),
        [
            array([ 1000.,  1100.,  1200.]), 
            array([ 1200.,  1300.,  1400.])
        ],
        array([ 150.,  170.,  190.]),
        [
            array([ 1500.,  1600.,  1700.]), 
            array([ 1700.,  1800.])
        ]
    ]
]

# overlap(structure) -> [st, tr, ru, uc, ct, tu, ur, re]
def overlap(structure):
    for i in range(len(structure)-1):
        yield (structure[i],structure[i+1])

# paired(structure) -> [st, ru, ct, ur]
def paired(structure):
    for i in range(0,len(structure)-1,2):
        yield (structure[i],structure[i+1])

def dopair(first,second):
    if all(isinstance(x,array) for x in second): 
        for pa,ir in izip(overlap(first),second):
            for item in overlap(ir):
                yield pa, item
    else:
        for pa,(i,r) in izip(overlap(first),paired(second)):
            for item in dopair(i,r):
                yield (pa,) + item

def generator(arr):
    for pa,ir in paired(arr):
        for x in dopair(pa,ir):
            yield x

for x in generator(arr):
    print x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:52:10.343

关于什么：

```
def foo(m):

  for i in range(0, len(m), 2):

    for j in range(len(m[i])-1):
      current = tuple(m[i][j:(j+2)])
      mm = m[i+1]
      if(len(mm) % 2 != 0 or (len(mm) > 1 and not type(mm[1][0]) is types.ListType)):
        currentl = mm[j]
        for k in range(0, len(currentl)-1):
          yield current, tuple(currentl[k:(k+2)])

      else:
        for res in foo(mm[2*j:2*j+2]):
          # this is for pretty print only
          if type(res) is types.TupleType and len(res)>1 and not type(res[0]) is types.TupleType:
            yield current, res
          else:
            # pretty print again
            c = [current]
            c+= res
            yield tuple(c) 
```

这些`tuple`东西是为了漂亮的印刷品，以便更接近你的例子。我不太确定用于检测叶子的标准。另请注意，我使用以下 pythonic 数组进行了实验：

```
arr = [
    [ 0\. ,  4.5,  9\. ],
    [
        [100.,  120.,  140.],
        [
            [ 1000.,  1100.,  1200.], 
            [ 1200.,  1300.,  1400.]
        ],
        [ 150.,  170.,  190.],
        [
            [ 1500.,  1600.,  1700.], 
            [ 1700.,  1800.]
        ]
    ]
] 
```

而不是给出的 numpy 数组，但是使用 numarray 运行的更改应该很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:00:53.223

使用递归来做到这一点：

```
def foo( lst, path ):
    if type(lst[0]) != type(array([])):
        return [path+[(lst[0],lst[1])], path+[(lst[1],lst[2])]]

    i = 0
    ret = []
    while i < len(lst):
        node = lst[i]
        successor = lst[i+1] if i+1<len(lst) else None
        if type(node) == type(array([])):
            if type(successor) == list:
                children = successor
                ret.extend( foo( children, path + [(node[0], node[1])] ) )
                ret.extend( foo( children, path + [(node[1], node[2])] ) )
                i+=1
            else:
                ret.append( path + [(node[0], node[1])] )
                ret.append( path + [(node[1], node[2])] )
        i+=1
    return ret 
```

调用`foo( input, [] )`计算。

# ruby - 访问扩展 ActiveRecord 的模块类中的方法

> ID：12674540
> 
> 赞同：0
> 
> 时间：2012-10-01T13:45:28.897
> 
> 标签：ruby, module, gem

所以我正在编写一个包含多个 lib 文件的 gem，每个文件都包含相同模块的类，如下所示：

**主“加载器”库**

```
#lib/jobhandler.rb

require 'jobhandler/job'

module JobHandler
end 
```

**另一个文件中相同模块的另一个类**

```
#lib/jobhandler/job.rb

module JobHandler
  class Job < ActiveRecord::Base
    def self.class_thingy
      return "I am a class method"
    end

    def instance_thingy
      return "I am an instance method of a class inside a module that extends AR"
    end
  end
end 
```

**问题**

```
# These work fine....
Autocrat::Job.new # <Autocrat::Job:0x7fd9b017a138>
Autocrat::Job     # Autocrat::Job(id: integer....) < ActiveRecord::Base

#But this doesn't
Autocrat::Job.class_thingy # NoMethodError: undefined method `class_thingy'
Autocrat::Job.new.instance_thingy # NoMethodError: undefined method `instance_thingy'

#it doesn't even see the methods
Autocrat::Job.methods - ActiveRecord::Base.methods # [] 
```

问题是我无法访问或调用 Job 类的类或实例方法。我可以很好地实例化 Job，它似乎不知道这些方法存在。

有任何想法吗？

# bash - .bashrc：脚本内优先级

> ID：12674545
> 
> 赞同：0
> 
> 时间：2012-10-01T13:45:50.607
> 
> 标签：bash

我正在尝试用我的 bash 提示符做两件“高级”的事情。

1.  我想显示我上一个命令的状态。我想展示我的
2.  当前的 git 分支（如果我在 git repo 中）

我可以分别做这两个，我也可以做'then'，但我不能做'then'（这是我想要的）。当我尝试在状态停止工作之前放置时，无论最后一个命令的状态是什么，都保持在相同的状态。/：

我附上我的`.bashrc`下面。如您所见，最后两行是两种可能性。注释掉的那个是不起作用的。

`.bashrc`：

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting

alias sublime="'/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl'"
alias nano="sublime"
export EDITOR="sublime"

GREEN="\[\e[32;1m\]"
YELLOW="\[\e[33m\]"
RED="\[\e[31m\]"

DEFAULT="\[\e[0m\]"
BRACKETS=$GREEN
HAPPY=$YELLOW
SAD=$RED
BRANCH=$YELLOW

function parse_git_branch () {
       git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

SUCCESS_STR="\`if [ \$? = 0 ]; then echo $HAPPY^_^$DEFAULT; else echo $SAD'O_o'$DEFAULT; fi\`"

# Nice looking bash prompt
PS1="\n$BRACKETS[$DEFAULT\u$BRACKETS]-[$DEFAULT\w$BRACKETS]\n$SUCCESS_STR$BRANCH\$(parse_git_branch) $ "
# PS1="\n$BRACKETS[$DEFAULT\u$BRACKETS]-[$DEFAULT\w$BRANCH\$(parse_git_branch)$BRACKETS]\n$SUCCESS_STR $ " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:52:04.307

对于第一点，这就是我在所有 *nix 上所做的。

把它放在你身上`~/.bashrc`（简化 PS1 以避免噪音）：

```
PROMPT_COMMAND=$(
    cat<<-'EOF'

    _temp_var=$val_ret _pipe_status="${PIPESTATUS[@]}"

    if((val_ret == 0)); then
        _temp_var=$(( $(tr -s " " "+" <<< "$_pipe_status") ))
    else
        _temp_var=$val_ret
    fi

    if((_temp_var == 0)); then
        PS1="\u@\h:\w$"
    else
        PS1="\u@\h:\w|ERROR:$_temp_var|$"
    fi
    EOF
) 
```

看看它做了什么：

![迅速的](../Images/d1993a3841ef57499a18b0bf36719146.png)

来自`man bash`：

> PROMPT_COMMAND
> 
> 如果设置，则在发出每个主要提示之前将该值作为命令执行。

# facebook - 如何强制更改 og:title？

> ID：12674558
> 
> 赞同：2
> 
> 时间：2012-10-01T13:46:49.080
> 
> 标签：facebook, facebook-opengraph, meta-tags

我们有每月的广告活动，对于最后一个活动，我们设置了开放的图形标签和所有内容以获得适当的 facebook 喜欢，但我们总是喜欢网站的主页。

现在，**og:title 标签似乎已修复。**我在某处读到，在 50 次喜欢后，它变得固定。我们真的，真的需要改变它，因为它引用了我们不再存在的旧广告活动。

有谁知道强制刷新 og:title 的方法？我们甚至尝试过联系 facebook，但不知道如何联系。

请注意，facebook 调试器工具不会更新我们的 og:title，但它会正确更新其他所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:09:26.773

Facebook 缓存您的 og:meta 标签。[您可以通过访问Facebook 调试器](https://developers.facebook.com/tools/debug)并输入您的 URL来强制重置缓存。它似乎通过 GET 变量处理 URL，因此您可以自动执行此过程。

根据我的经验，如果更新了 og:title 标签，即使拥有数千个赞的页面也会更新其标题。只是需要更多时间。

如果它没有更新，你确定你的页面源代码中的信息是正确的，并且调试器没有抛出任何错误吗？另外，您确定本地缓存没有提供过时的内容吗？

# sql - DateDiff 每 3 天

> ID：12674559
> 
> 赞同：1
> 
> 时间：2012-10-01T13:46:54.087
> 
> 标签：sql, sql-server, vb.net

我想知道你是否知道如何在我做调度程序时每 3 天计算一次差异。

```
SELECT DISTINCT 
    CLAIM_NO,
    ModifiedBy,
    ClaimType,
    ClaimStatus,
    EmailAddress,
FROM EP_ADMIN_ITEM_REMINDER
WHERE Status = 1 AND DATEDIFF(Day,DateAdded,getdate()) = 3 
```

这是我在 DATEDIFF 中的代码，我将其放入 WHERE 子句中，我有 2 列用于日期 1st DateAdded 2nd DateSent。我需要每 3 天安排一次我的事情，所以它会首先更新日期，它会检查日期是否比添加到 3 中的日期更格雷特。我只想知道我的`WHERE`条款是否正确。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:57:59.530

```
SELECT DISTINCT 
CLAIM_NO,
ModifiedBy,
ClaimType,
ClaimStatus,
EmailAddress,
FROM EP_ADMIN_ITEM_REMINDER
WHERE Status = 1 AND DATEDIFF(Day,DateAdded,getdate()) > 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:27:42.937

牢记 SARGability。具体来说，运行像你这样的函数会降低性能（我不记得 DATEDIFF 是否为此进行了优化），因为它必须为每一行运行它。尝试

```
WHERE [DateAdded] > DATEADD(day, -3, getdate()) 
```

# ruby-on-rails - Active Record 搜索条件重复 - 如何避免这种情况？

> ID：12674560
> 
> 赞同：0
> 
> 时间：2012-10-01T13:47:01.967
> 
> 标签：ruby-on-rails, activerecord

这里有课，我需要收集一些关于喜欢、评论、内容、视图的统计信息

```
class UsersActivityTable

  def initialize(user_ids, content_ids, start_date, end_date)
    @user_ids, @content_ids, @start_date, @end_date = user_ids, content_ids,  start_date,  end_date
  end

  def rows
    @rows ||= @user_ids.map do |user_id|
                OpenStruct.new( :full_name => sum_users(user_id),
                                :contributed => sum_contributed(user_id),
                                :interacted => sum_interacted(user_id)
                              )
               end
  end

  private

  def sum_users(user_id)
    @sum_users ||= Hash[ User.value_of(:id, :first_name, :last_name).map{|usr| [usr[0], "#{usr[1]} #{usr[2]}"] } ]
    @sum_users[user_id]
  end

  def sum_contributed(user_id)
    @sum_contributed ||= Content.where(:user_id => @user_ids, :id => @content_ids)
                                .where('date(created_at) between ? and ? ', @start_date, @end_date)
                                .group(:user_id)
                                .count
    @sum_contributed[user_id].to_i
  end

  def sum_interacted(user_id)
    sum_comments(user_id).to_i + sum_views(user_id).to_i + sum_likes(user_id).to_i
  end

  def sum_comments(user_id)
    @sum_comments ||= Comment.where(:user_id => @user_ids, :content_id => @content_ids)
                             .where('date(created_at) between ? and ? ', @start_date, @end_date)
                             .group(:user_id)
                             .count
    @sum_comments[user_id]
  end

  def sum_likes(user_id)
    @sum_likes ||= Like.where(:user_id => @user_ids, :content_id => @content_ids)
                       .where('date(created_at) between ? and ? ', @start_date, @end_date)
                       .group(:user_id)
                       .count
    @sum_likes[user_id]
  end

  def sum_views(user_id)
    @sum_views ||= View.where(:viewable_type => 'Content', :user_id => @user_ids, :viewable_id => @content_ids)
                       .where('date(created_at) between ? and ? ', @start_date, @end_date)
                       .group(:user_id)
                       .count
    @sum_views[user_id]
  end
end 
```

如您所见，有一些重复：

```
.where('date(created_at) between ? and ? ', @start_date, @end_date)
.group(:user_id)
.count 
```

我为每个实体执行它。有什么方法可以应用条件 lambda 之类的吗？

我认为是可能的 - 在集合实例上定义方法并调用它：

```
# pseudo code
group_results = lambda{|el| el.where('date(created_at) between ? and ? ', @start_date, @end_date)
                             .group(:user_id)
                             .count }
Content.where(...).tap{|collection| collection.defune_method .... }.group_results 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:51:52.790

有时对于非平凡的统计数据，返回您想要的所有内容的 find_by_sql 会更有效，甚至可能比复杂的 ruby*​​ 更清晰。*

当然是 YMMV :)

# android - Android：禁用视图获得焦点

> ID：12674564
> 
> 赞同：3
> 
> 时间：2012-10-01T13:47:10.637
> 
> 标签：android, view, checkbox, radio-button, android-edittext

我不知道如何搜索这个主题，所以我希望这里没有同样的问题。

在我的“菜单”中`Activity`，我有两个`RadioButtons`带有 EditText 的，用户应该选择两个选项之一，然后在`EditText`. 然而，第`RadioButton`一个选项有一个额外的选项，可以通过 a 进行选择`CheckBox`，因此如果用户选中该选项，则会启用`CheckBox`进一步的选项。's 是通过 onCheckedChangeListener 在两者上禁用和启用`EditText`的，就像这样`EditText``RadioButtons``CheckBox`

```
radio1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked){
                    if(radio2.isChecked()){
                        radio2.setChecked(false);
                    }
                    edit1.setEnabled(true);
                    check1.setEnabled(true);
                }else{
                    check1.setEnabled(false);
                    check1.setChecked(false);
                }   
            }
        }); 
```

现在的问题是，当我选择选项一时，在第一个中输入一个值`EditText`，而第二个仍然禁用，我可以按“前进按钮”（我真的不知道它是怎么调用的，看图片下面）和残疾人`EditText`得到集中。

![在此处输入图像描述](../Images/22ed7d3ac5883ea387e66b83239bde73.png)

这`EditText`是不应该集中的

![在此处输入图像描述](../Images/54fd3796aab24da06852fad800a8fe58.png)

不应该是残疾人`View`不能专注吗？这甚至是可能的，这绝对是不合逻辑的。有没有办法进行一般设置，或者`setFocusable(boolean)`每次更改状态时都添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-13T10:38:18.540

即使 setEnabled 为 false，editTexts 仍然可以接收焦点。要禁用焦点，请应用 editText.setFocusable(false)。如果不存在其他可编辑元素，则在单击软键盘上的 imeOption 时应用此功能将隐藏软键盘。

# java - 如何避免 Hibernate 中的旧式外连接（+）？

> ID：12674565
> 
> 赞同：7
> 
> 时间：2012-10-01T13:47:10.783
> 
> 标签：java, hibernate, hql

我写了这样的 HQL 查询：

```
SELECT a FROM A a LEFT JOIN a.b where ... 
```

Hibernate 生成这样的 sql 查询：

```
SELECT a FROM A a LEFT JOIN a.b where a.b_id = b.id(+) 
```

但是当我写这样的东西时：

```
SELECT a FROM where a.b.id > 5 
```

它生成 SQL：

```
SELECT a.* FROM A b cross join B b where b.id > 5 
```

因此，当我结合这些方法时，我会收到 Oracle 错误：

```
SQL Error: 25156, SQLState: 99999
ORA-25156: old style outer join (+) cannot be used with ANSI joins 
```

那么有没有办法对 Hibernate 说我只想接收一种类型的查询（旧式或新式）？

**更新：** 通过组合我的意思是像这样的 HQL 查询：

```
SELECT alarm FROM Alarm as a LEFT JOIN alarm.madeBy as user where user.name = 'George' and a.source.name = 'UFO' 
```

所以这里我指定**Alarm**应该使用 LEFT JOIN与**User连接，而不是指定如何将****Alarm**与**Source**连接，因此 Hibernate 将其与 Cross Join 连接。

SQL 查询将是这样的：

```
FROM Alarms a, Users u cross join Sources s where a.user_id = u.user_id(+) and a.source_id = s.source_id and u.name = 'George' and s.name = 'UFO' 
```

为了更多的理解，我将添加警报实体的小例子：

```
@Entity
@Table(name = 'Alarms')
public class Alarm {
   @Id
   private BigDecimial id;

   @ManyToOne
   @JoinColumn(name = "user_id")
   private User madeBy;

   @ManyToOne
   @JoinColumn(name = "source_id")
   private Source source;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T04:46:52.973

所以这个问题的解决就是设置hibernate的Dialect为org.hibernate.dialect.Oracle9Dialect

```
<property name="hibernate.dialect">org.hibernate.dialect.Oracle9Dialect</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T08:10:00.380

我了解到您尝试使用 HQL 获取下面的 SQL 查询。

```
SELECT a.* FROM A ,B where a.b_id = b.id(+) and b.id > 5 
```

首先，你不应该在你的 HQL 中 使用像**abXX这样的代码。**
示例代码是

```
SELECT a FROM A a LEFT JOIN a.b where b.id is null or (b.id is not null and b.id > 5) 
```

然后 hibernate 生成一个不会导致异常的 SQL 查询。

# python - 在 Python 中更改内容类型

> ID：12674569
> 
> 赞同：1
> 
> 时间：2012-10-01T13:47:15.183
> 
> 标签：python, post, content-type

所以我尝试在远程设备上上传文件。

如果我使用代码：

```
#!/usr/bin/python

import httplib
import urllib2
from poster.encode import multipart_encode
from poster.streaminghttp import register_openers
import poster
register_openers()

params = {'restore': open("Config.cfg", "rb"), 'upload': 'PC ==>; Unit'}

datagen, headers = multipart_encode(params)

request = urllib2.Request('http://www.test.com/saveRestore.htm.cgi', datagen, headers)
u = urllib2.urlopen(request)
print u.read() 
```

该文件使用 Content-Type text/plain ..

那么如何将此内容类型更改为例如 text/html ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:49:33.310

添加：

`headers['Content-Type'] = 'text/html'`

在实例化您的 Request 对象之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:52:20.490

您可以使用 python 中的机械化库：

```
import mechanize
b = mechanize.Browser()

# Set any header you like:
b.addheaders = [('Content-Typoe', 'text/html; charset=utf-8')]
response = b.open('http://www.reddit.com')
data = response.read() 
```

# asp.net-mvc - 正确使用 .net MVC Html.CheckBoxFor

> ID：12674572
> 
> 赞同：79
> 
> 时间：2012-10-01T13:47:26.950
> 
> 标签：asp.net-mvc, checkboxfor

我只想知道`Html.CheckBoxFor`ASP.NET MVC 中 HTML 助手的正确语法。

我想要完成的是使用 ID 值最初检查复选框，以便我可以在控制器中引用它以查看它是否仍然被选中。

下面会是正确的语法吗？

```
@foreach (var item in Model.Templates) 
{ 
    <td> 
        @Html.CheckBoxFor(model => true, item.TemplateId) 
        @Html.LabelFor(model => item.TemplateName)
    </td> 
} 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-01T13:58:31.583

## 这不是正确的语法

第一个参数**不是**复选框值，而是复选框的视图模型绑定，因此：

```
@Html.CheckBoxFor(m => m.SomeBooleanProperty, new { @checked = "checked" }); 
```

第一个参数必须标识模型中的布尔属性（它是一个[表达式](https://msdn.microsoft.com/en-us/library/system.linq.expressions.expression(v=vs.110).aspx)，而不是返回值的匿名方法），第二个属性定义任何其他 HTML 元素属性。我不是 100% 确定上述属性最初会检查您的复选框，但您可以尝试。但要小心。即使它可能会起作用，但在加载有效的模型数据并且该特定属性设置为`false`.

## 正确的方法

尽管我*的正确建议*是为您的视图提供初始化模型，并将该特定布尔属性初始化为`true`.

## 属性类型

根据 Asp.net MVC`HtmlHelper`扩展方法和内部工作，复选框需要绑定到布尔值，而不是您想要做的整数。在这种情况下，隐藏字段可以存储`id`.

## 其他帮手

当然，您可以使用其他辅助方法来获得有关复选框值和行为的更大灵活性：

```
@Html.CheckBox("templateId", new { value = item.TemplateID, @checked = true }); 
```

> ***注意****：* `checked` *是 HTML 元素的布尔属性，而不是 value 属性，这意味着您可以为其分配任何值。正确的 HTML 语法不包括任何赋值，但无法提供具有未定义属性的匿名 C# 对象，该属性将呈现为 HTML 元素属性。*

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-05T14:21:54.763

默认情况下，以下代码**不会**生成选中的复选框，因为模型属性会覆盖 html 属性：

```
@Html.CheckBoxFor(m => m.SomeBooleanProperty, new { @checked = "checked" }); 
```

相反，在您的**GET Action**方法中，需要执行以下操作：

```
model.SomeBooleanProperty = true; 
```

即使模型无效（即发布表单时出现一些错误），上述内容也会**保留您的选择（如果您取消选中该框）。**

但是，下面的代码肯定会生成一个选中的复选框，**但不会保留您的未选中响应**，而是在每次表单错误时都选中该复选框。

```
 @Html.CheckBox("SomeBooleanProperty", new { @checked = "checked" }); 
```

> **更新**

```
//Get Method
   public ActionResult CreateUser(int id)
   {
        model.SomeBooleanProperty = true;         
   } 
```

上面的代码会在开始时生成一个选中的复选框，并且即使在表单错误的情况下也会保留您的选择。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-01T17:17:48.223

我在使用 ASP.NET MVC 5 时遇到问题，即使我的模型显然将值设置为 true，CheckBoxFor 也不会检查服务器端验证失败的复选框。我的 Razor 标记/代码如下所示：

```
@Html.CheckBoxFor(model => model.MyBoolValue, new { @class = "mySpecialClass" } ) 
```

为了使它起作用，我不得不将其更改为：

```
@{
    var checkboxAttributes = Model.MyBoolValue ?
        (object) new { @class = "mySpecialClass", @checked = "checked" } :
        (object) new { @class = "mySpecialClass" };
}
@Html.CheckBox("MyBoolValue", checkboxAttributes) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-09T21:53:05.183

把它放在你的模型上：

```
[DisplayName("Electric Fan")]
public bool ElectricFan { get; set; }

private string electricFanRate;

public string ElectricFanRate
{
    get { return electricFanRate ?? (electricFanRate = "$15/month"); }
    set { electricFanRate = value; }
} 
```

这在你的cshtml中：

```
<div class="row">
    @Html.CheckBoxFor(m => m.ElectricFan, new { @class = "" })
    @Html.LabelFor(m => m.ElectricFan, new { @class = "" })
    @Html.DisplayTextFor(m => m.ElectricFanRate)
</div> 
```

这将输出：

![MVC 输出](../Images/6d97ec16999c4d3cd7bc848c39c8d72e.png) 如果您单击复选框或粗体标签，它将选中/取消选中该复选框

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-01T04:40:32.697

在 POST 上绑定时，上述答案均不适合我，直到我在 CSHTML 中添加以下内容

```
<div class="checkbox c-checkbox">
    <label>
        <input type="checkbox" id="xPrinting" name="xPrinting" value="true"  @Html.Raw( Model.xPrinting ? "checked" : "")>
        <span class=""></span>Printing
    </label>
</div>

// POST: Index

[HttpPost]
public ActionResult Index([Bind(Include = "dateInHands,dateFrom,dateTo,pgStatus,gpStatus,vwStatus,freeSearch,xPrinting,xEmbroidery,xPersonalization,sortOrder,radioOperator")] ProductionDashboardViewModel model) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-14T17:18:32.630

我正在寻找从数据库中动态显示标签的解决方案，如下所示：

```
checkbox1 : Option 1 text from database
checkbox2 : Option 2 text from database
checkbox3 : Option 3 text from database
checkbox4 : Option 4 text from database 
```

所以上述解决方案都不适合我，所以我这样使用：

```
 @Html.CheckBoxFor(m => m.Option1, new { @class = "options" }) 
 <label for="Option1">@Model.Option1Text</label>

 @Html.CheckBoxFor(m => m.Option2, new { @class = "options" }) 
 <label for="Option2">@Mode2.Option1Text</label> 
```

这样当用户点击标签时，复选框将被选中。

可能它可以帮助某人。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-27T09:38:58.893

我很难让它工作，并为任何想要/需要使用 FromCollection 的人添加了另一个解决方案。

代替：

```
@Html.CheckBoxFor(model => true, item.TemplateId) 
```

像这样格式化 html 助手：

```
@Html.CheckBoxFor(model => model.SomeProperty, new { @class = "form-control", Name = "SomeProperty"}) 
```

然后在您的逻辑所在的视图模型/模型中：

```
public void Save(FormCollection frm)
{   
    // to do instantiate object.

    instantiatedItem.SomeProperty = (frm["SomeProperty"] ?? "").Equals("true", StringComparison.CurrentCultureIgnoreCase);

    // to do and save changes in database.
} 
```

# c# - 单击时功能区按钮未触发由 onAction 设置的事件

> ID：12674575
> 
> 赞同：7
> 
> 时间：2012-10-01T13:47:39.040
> 
> 标签：c#, add-in, outlook-2010

我已经为 Outlook 2010 设计了一个加载项，我试图在其中触发（或者更确切地说，捕获）一个在单击按钮时触发的事件，如[本文](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/a3fa9ea5-6710-48c4-adb7-1f11afe34f81/)所示。我选择了正确的 XML（因为在功能区上可以看到对它的更改）。但是，我试图捕捉的事件要么根本没有被触发，要么（更有可能）以不同于我所听内容的其他方式触发（正在听？）。

我还尝试参考 MSDN 上的参考资料，[这里](http://msdn.microsoft.com/en-us/library/documentformat.openxml.office2010.customui.button.onaction.aspx)，[这里](http://msdn.microsoft.com/en-us/library/aa942866%28v=vs.100%29.aspx)和主要是[这里](http://msdn.microsoft.com/en-us/library/aa722523.aspx)。但无济于事......我想知道它是否与“重新利用”信息有关。

这是标记。

```
<tab idMso="TabMail">
  <group id="group1" label="CRMK">
    <button 
      id="MyId"
      onAction="Button_Click"
      label="Do me!"
      size="large" />
  </group>
  <group id="group2" label="group2">
    <button id="button1" label="button1" showImage="false" />
  </group>
</tab> 
```

后面的代码是这样的。

```
private void Button_Click(Object sender, RibbonControlEventArgs eventArgs)
{
  MessageBox.Show("Button clicked...");
} 
```

我错过了什么？我怎样才能调试这样的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T02:12:31.590

这是因为你的签名。丝带对象是错误的。应该如下。

```
public void Button_Click(Office.IRibbonControl control){ ... } 
```

# asp.net - 用于 '&' 的 Object 类型的操作数；可能发生运行时错误

> ID：12674578
> 
> 赞同：0
> 
> 时间：2012-10-01T13:47:54.340
> 
> 标签：asp.net, vb.net, debugging

当我将我的代码设置为“STRICT”（Option Strict On）时，我收到以下错误：*用于'&'的对象类型的操作数；可能会发生运行时错误*。

这是有问题的行：

```
dataSet.Sort = CType(ViewState("sortExp") & DESCENDING, String) 
```

只是想知道怎么了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:56:05.137

`ViewState("sortExp")`返回一个`object`. 与`&`您尝试连接`DESCENDING`（我假设它是一个字符串。）在严格模式下这是不允许的。尝试这个：

```
dataSet.Sort = ViewState("sortExp").ToString() & DESCENDING 
```

# android - 将本地 Android DB 授权和同步到服务器的标准方法是什么

> ID：12674579
> 
> 赞同：0
> 
> 时间：2012-10-01T13:47:54.117
> 
> 标签：android, database, authentication, synchronization, android-contentprovider

我是 Android 新手，即将编写一个应用程序，允许用户离线编辑一些数据，然后在线时将其同步到某处服务器上的主数据库。

我假设为了让用户能够离线工作，我需要在 Android 设备上拥有一个数据库，该数据库可以通过内容提供程序/数据库适配器类进行更新。

我的问题是，我的本地数据库与服务器数据库的身份验证和同步的高级选项是什么？是否有任何常见/推荐的方法？我听说过在服务器上使用 RESTful API（但我对它们了解不多）——这是一种标准方法吗？

此外，是否有一种通用的方法来完成同步的频率 - 例如定期？在线时立即更改？

任何帮助将不胜感激，因为这对我来说是一个灰色地带。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:22:02.823

回答所有这些问题有点困难，因为它实际上取决于应用程序以及您希望它如何工作。但是，我肯定会研究 RESTful Web 服务。网上有很多很好的教程，但基本上你必须设置一个 Web 服务器，它可以接受 URL 中的参数，有时也可以接受 POST 正文中的数据。对于您的情况，它可能是带有数据的 POST，因此您可以将更新发送到数据库。

但是，还有一些其他问题，当然同步必须双向进行。如果服务器和移动客户端上的数据都发生了变化怎么办？你如何在那里解决冲突？

其次，关于多久同步一次的问题——这完全取决于您以及数据的时间紧迫性。当然，您在同步之间等待的时间越长，在线数据就越陈旧，并且在这两个地方被修改的可能性就越大。定期同步可能是一个好的开始，然后在连接恢复时添加同步，如果您发现几个同步周期已经过去而无法连接 - 例如，如果手机处于飞行模式。但是在定期同步时，您需要非常注意数据使用情况和电池电量，因此选择一个合理的时间段 - 也许每小时一次？并且仅在进行更改时才同步。

抱歉，在不知道您对数据的实际用例的情况下，我觉得我无法提供更详细的信息。

# c++ - 矩阵 37x37 的行列式

> ID：12674580
> 
> 赞同：1
> 
> 时间：2012-10-01T13:47:55.717
> 
> 标签：c++, visual-studio-2008, matrix

我做了一个程序来计算矩阵的行列式。我的程序有效，但问题是计算需要很长时间，尤其是对于大矩阵。你能告诉我如何执行我的程序以便在尽可能短的时间内计算行列式吗？

```
 double Matrice::Determinant(int n)
{
   cout<<"n = "<<n<<endl;
   int i,j,j1,j2;
   double det = 0;
   Matrice tmp(n,n);
   if (n < 1) 
   {
   } 
   else if (n == 1) 
   { 
      det = this->get_el(0,0);
   } else if (n == 2) {
      det = this->get_el(0,0) * this->get_el(1,1) - this->get_el(1,0) * this->get_el(0,1);
   } else {
      det = 0;
      for (j1=0;j1<n;j1++) {
         for (i=1;i<n;i++) {
            j2 = 0;
            for (j=0;j<n;j++) {
               if (j == j1)
                  continue;
               tmp.set_el(i-1,j2,get_el(i,j));
               j2++;
            }
         }
         det += pow(-1.0,1.0+j1+1.0) * get_el(0,j1) * tmp.Determinant(n-1);
      }
   }
   return det;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:23:02.900

您的算法看起来像是定义公式的直接实现，位于`O(n!)`.

中的标准算法在于首先使用[高斯消元](https://en.wikipedia.org/wiki/Gaussian_elimination)`O(n^3)`将其转换为三角矩阵。完成此操作后，行列式就是对角线元素的乘积。

# android - 在 Android 中拉伸图像

> ID：12674584
> 
> 赞同：0
> 
> 时间：2012-10-01T13:48:02.090
> 
> 标签：android, android-layout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:scaleType="fitXY"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:padding="5dip">

    <ImageView android:id="@+id/header"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:src="@drawable/green_bg" />

</RelativeLayout> 
```

这是我的页眉布局，我需要将图像拉伸到如下所示。 [http://postimage.org/image/gfebtdxgj/](http://postimage.org/image/gfebtdxgj/)

1.  如何在图像上方添加左右两个按钮。
2.  如何拉伸标题图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:52:11.277

可能的重复：

[android：在imageview中拉伸图像以适应屏幕](https://stackoverflow.com/questions/4668001/android-stretch-image-in-imageview-to-fit-screen)

Android 文档[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-17T05:41:32.687

将此代码用于您的两个问题：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:scaleType="fitXY"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dip">
<Button
    android:id="@+id/btn1"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    />
<Button
    android:id="@+id/btn2"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    />
<ImageView android:id="@+id/header"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:src="@drawable/green_bg"
    android:scaleType="centerCrop"
    android:layout_below="@id/btn1"/>

 </RelativeLayout> 
```

# hibernate - 我可以在 NHibernate 中查询派生字段吗？

> ID：12674585
> 
> 赞同：2
> 
> 时间：2012-10-01T13:48:02.940
> 
> 标签：hibernate, nhibernate, nhibernate-mapping, hibernate-mapping

是否可以向实体中的派生字段添加限制，即。一个不坚持的？例如，如果这是我的实体：

```
public class Employee 
{
    public long Id { get; set; }
    public string Forename { get; set; }
    public string Surname {get; set; }
    public string FullName { get { return Forename + " " + Surname; }}
} 
```

这是映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               namespace="Domain.Entities"
               assembly="Domain">
  <class name="Employee" table="`Employee`">
    <id name="Id" column="Id" type="long">
      <generator class="identity"/>
    </id>
    <property name="Forename"/>
    <property name="Surname"/>
  </class>
</hibernate-mapping> 
```

这是我的查询：

```
public Employee GetByFullName(string fullName)
{
    return _session
        .CreateCriteria<Employee>
        .Add(Restrictions.Eq("FullName", fullName))
        .List<Employee>();
} 
```

请忽略我可以自己编写查询的事实，这是一个简单的示例来演示。这在更复杂的场景中会很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:03:18.073

这取决于，基本上如果您可以使用 SQL 复制派生字段，那么它可以完成（所以基本上可以完成，但它的实用性会有所不同）。在您的示例中，您需要映射您的 Fullname 属性，例如：

```
<property name="Fullname" formula="Forename + ' ' + Surname"/> 
```

然后要阻止 NHibernate 抱怨，您需要为 Fullname 定义一个空设置器：

```
public virtual string Fullname {
    get { return Forename + " " + Surname; }
    set { } // do nothing
} 
```

然后你就可以查询 Fullname 并且 NHibernate 会正确地将公式插入到 sql 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:52:03.483

不。Hibernate / NHibernate 中的查询总是被翻译成 SQL。如果该字段不在数据库中，则无法查询。

# jquery - PHPStorm IDE 中低效的 jQuery 使用警告

> ID：12674591
> 
> 赞同：100
> 
> 时间：2012-10-01T13:48:30.217
> 
> 标签：jquery, jquery-selectors, performance

我最近升级了我的 PHPStorm IDE 版本，它现在警告我 jQuery 使用效率低下。

例如：

```
var property_single_location = $("#property [data-role='content'] .container"); 
```

提示此警告：

> 检查 jQuery 选择器是否以有效的方式使用。它建议拆分以 ID 选择器开头的后代选择器，并警告可能缓存的重复选择器。

所以我的问题是：

> 为什么这效率低下，执行上述选择器的有效方法是什么？

我猜：

```
var property_single_location = $("#property").find("[data-role='content']").find(".container"); 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-05-18T02:14:01.167

我今天也有同样的问题，感谢[Scott Kosman](https://twitter.com/humantorch) [**在这里**](http://24ways.org/2011/your-jquery-now-with-less-suck/)找到了解决方案。

基本上答案是单独选择 ID，然后用于`.find(...)`以下任何内容。以你为例：

```
$("#property [data-role='content'] .container"); 
```

把它改成这样会让 PhpStorm 很开心，而且[速度显然可以提高一倍以上](http://24ways.org/2011/your-jquery-now-with-less-suck/)：

```
$("#property").find("[data-role='content'] .container"); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-17T16:07:04.293

我相信在使用最新版本的 jQuery 和浏览器时这两种方法之间的差异可以忽略不计。我构建了一个测试，表明现在执行组合选择器而不是在 id 上选择然后找到一个非常简单的情况实际上要快 10%：

[http://jsperf.com/jquery-find-vs-insel](http://jsperf.com/jquery-find-vs-insel)

对于在任何深度按班级选择多个孩子，“查​​找”似乎确实更快：

[http://jsperf.com/jquery-find-vs-insel/7](http://jsperf.com/jquery-find-vs-insel/7)

在 jQuery 论坛上对此进行了一些讨论，但它已有 3 年历史： [https](https://forum.jquery.com/topic/which-jquery-selection-is-efficient) ://forum.jquery.com/topic/which-jquery-selection-is-efficient 正如他们在此处指出的那样，如果您正在做很多对同一 id 选择器的操作，通过缓存顶级元素可以找到最大的性能改进。另一方面，如果您只进行几个选择，则几乎没有性能差异。

因此，我认为 IntelliJ 夸大了这种代码风格的重要性。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-17T08:24:05.373

The first question is to hit Alt+Enter, and select the first tip in the list, then hit Enter, you'll see what it thinks the most efficient way.

# xml - 使用 Delphi XML 数据绑定向导时不存在必需的标记

> ID：12674592
> 
> 赞同：99
> 
> 时间：2012-10-01T13:48:52.090
> 
> 标签：xml, delphi, xsd, delphi-xe2

我正在使用`XML Data Binding Wizard`in `Delphi XE2`。架构具有这种类型的必需标签：

```
<xs:element name="MyReport" type="MyReportType" />
<xs:complexType name="MyReportType">
  <xs:all>
    <xs:element name="Header" type="HeaderType" />
    <xs:element name="Values" type="ValuesType" />
    <xs:element name="Events" type="EventsType" />
  </xs:all>
</xs:complexType> 
```

问题是，如果我不向`Values`-group 添加任何元素，则将没有`<Values>`-tag，并且 XML 文件将无法通过`XSD`. `Values`如果接口提供了“添加” -tag的方法，这可能不会成为问题。

是否有处理此问题的标准方法，或者我是否正确使用生成的代码？

**简而言之**，是否有*任何*方法、变通方法或其他方法，使用 , 中的代码`Data Binding Wizard`来生成以下`XML`（当没有子节点时使用上述模式进行验证所需要的），给定的`HeaderType`，`ValuesType`并且`EventsType`是 complexType ：

```
<MyReport>
  <Header />
  <Values />
  <Events />
</MyReport> 
```

（我知道还有其他类似的问题，例如`<xs:sequence>`未在最终文件中强制执行正确顺序生成的代码`XML`，但至少对于那个，只需按正确的顺序插入子项即可解决。我仍然认为如果能提供一个完整的界面，它会很好地`Embarcadero`考虑更多这些功能。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-17T09:18:55.320

不确定是否理解，但也许您正在寻找的是：use="optional"

```
<xs:element name="MyReport" type="MyReportType" />
<xs:complexType name="MyReportType">
  <xs:all>
    <xs:element name="Header" type="HeaderType" use="optional" />
    <xs:element name="Values" type="ValuesType" use="optional" />
    <xs:element name="Events" type="EventsType" use="optional" />
  </xs:all>
</xs:complexType> 
```

告诉我是否还好。

# html - 将 Boilerplate 和 Bootstrap 与 CodeIgniter 或 Yii 集成

> ID：12674597
> 
> 赞同：2
> 
> 时间：2012-10-01T13:49:14.107
> 
> 标签：html, codeigniter, twitter-bootstrap, yii, html5boilerplate

我一直是一名 PHP 程序员，但直到现在还没有任何框架。现在我有一个不错的项目要开始，我想介绍一些 PHP 框架：Yii 或 CodeIgniter。

我还不知道哪一个最适合我。我想将此项目与这些“工具”集成：

*   jQuery
*   HTML5 样板
*   推特引导
*   CSS SASS

你知道哪个框架更容易与这些工具集成吗？而且，你知道我在哪里可以找到这个集成的好教程吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:22:29.217

CodeIgniter 和 Yii 是**服务器端**框架。有问题的库（SASS 除外）位于**客户端**。无论你选择 CodeIgniter 还是 Yii，基本的集成都是一样的。因为我是一名 CodeIgniter 开发人员，所以我可以告诉你故事的一半：

我敦促您阅读文档[介绍部分](http://codeigniter.com/user_guide/toc.html)下的所有内容，并花几天时间浏览这些教程，并将您的大脑直接放在 MVC 上。只有到那时，请查看[我之前的回答，](https://stackoverflow.com/questions/9540576/header-and-footer-in-codeigniter/9540985#9540985)该回答解释了如何创建模块化布局。一旦您对此感到满意，将 jQuery 和 Bootstrap 包含到您的项目中就很简单了。

至于样板 - 请选择与您的项目相关的部分，并根据链接的答案将它们插入正确的“视图”。Boilerplate 的某些部分会踩到 Bootstrap 的脚趾（特别是 CSS 重置，要小心）。

Paul Irish去年就[HTML5 Boilerplate做了一场精彩的演讲。](http://www.youtube.com/watch?v=qyM37XKkmKQ)Boilerplate 本身可能已经进行了重大更新，但它应该可以帮助您入门。

CodeIgniter 拥有[无与伦比的文档](http://codeigniter.com/user_guide/)和[出色的社区](http://codeigniter.com/forums/)。如果您选择这条路线 - 欢迎！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:57:45.097

看看这里提供的 Yii Boilerplate 系统（由主要 Yii 开发人员发布）： [https ://github.com/clevertech/YiiBoilerplate](https://github.com/clevertech/YiiBoilerplate)

他们已经将 HTML5 Boilerplate、Twitter Bootstrap、Yii、一些基本的 Behat 配置和一堆 Yii 最佳实践集成到一个地方。这让我们的生活变得更加轻松。

更多信息在这里： [http ://www.yiiframework.com/wiki/374/yiiboilerplate-setup-a-professional-project-structure-in-seconds/](http://www.yiiframework.com/wiki/374/yiiboilerplate-setup-a-professional-project-structure-in-seconds/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:56:33.227

jQuery 只是一个 Javascript 库，因此您只需以这种方式将其包含在您的 javascript 文件中，并包含在您的`<head>`或您的**页脚**中：

```
<script type="text/javascript" src="yourFolder/jQuery.js"></script> 
```

**HTML5Boilerplate**和**Bootstrap**只是**StarterKit**，它们提供了一些文件夹和文件来更好地组织您的工作。

如您在网站上看到的，Bootstrap 还添加了一些插件和组件，并且是**响应式**的。

所以我建议你只选择其中之一。

对于**Less**或**Sass**，您需要一个编译器。您可以编写“嵌套”CSS 语法，但您需要编译它，否则浏览器无法读取它。

因此，答案是您可以使用任何 php 框架并将此工具/库集成到您的项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T05:50:37.600

你可以为 Yii 框架使用这个 Sass 和 Compass 扩展：
[Sass (SCSS) and Compass support for the Yii framework](http://www.yiiframework.com/extension/sass/ "Sass (SCSS) 和 Compass 对 Yii 框架的支持")
[Composer package](https://packagist.org/packages/artem-frolov/yii-sass "Packagist.org 上的 artem-frolov/yii-sass Composer 包")

# sql - 在 SQL Server 中创建相关矩阵

> ID：12674600
> 
> 赞同：3
> 
> 时间：2012-10-01T13:49:20.647
> 
> 标签：sql, sql-server, tsql

我正在尝试在 SQL Server 中获取相关矩阵，并且我的数据以下列方式在表中：

```
RptLOB1     RptLOB2   Correlation
AE          AE             1
Bail        AE            0.35
Commercial  Bail          0.25
Commercial  AE            0.15 
```

...等等。

我想编写一个代码，所以我的输出如下所示：

```
 AE     Bail   Commercial
AE          1      0.35      0.15
Bail        0.35    1        0.25
Commercial  0.15   0.25       1 
```

RptLOB 的顺序无关紧要，只要从上到下和从左到右的顺序相同即可。我一直在试图找到一种方法来解决这个问题，但我不太确定最好的方法是什么。我在考虑使用 PIVOT，但这不会在顶部输出 RptLOB（它们将被视为表中的列）。

编辑：

此输出将被插入到另一个表中，如下所示：

```
col1             col2        col3                            col4        col5              

Generic
Company Inputs   Insurance   Stochastic Model Correlations   Exposure    Correlation Matrix
                 AE          Bail                            Commercial
AE               1           0.35                            0.15
Bail             0.35        1                               0.25
Commercial       0.15        0.25                            1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T14:16:08.687

您可以`PIVOT`为此使用 a 。如果您知道必须转换的列数，则可以使用静态版本：

```
select *
from 
(
  select RptLOB1 RptLOB1, RPTLOB2 RPTLOB2, Correlation
  from yourtable
  union all
  select RPTLOB2, RptLOB1, Correlation
  from yourtable
  union all
  select distinct RptLOB1, RptLOB1, 1.0
  from yourtable
) x
pivot
(
  max(Correlation)
  for RPTLOB2 in ([AE], [Bail], [Commercial])
) p; 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4f4fa/25)

如果您有未知数量的值要关联，那么您将需要使用动态版本：

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT distinct  ',' 
                      + quotename(RptLOB1)
                    from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select RptLOB1, '+@colspivot+ '
     from 
     (
       select RptLOB1 RptLOB1, RPTLOB2 RPTLOB2, Correlation
       from yourtable
       union all
       select RPTLOB2, RptLOB1, Correlation
       from yourtable
       union all
       select distinct RptLOB1, RptLOB1, 1.0
       from yourtable
      ) x
      pivot
      (
        max(Correlation) 
        for RPTLOB2 in ('+ @colspivot +')
      ) p'

exec(@query) 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4f4fa/31)

编辑 - 根据您的评论，如果您希望列标题位于另一行，则可以使用以下内容：

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX),
    @colsRow as  NVARCHAR(MAX),
    @colsConverted as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT distinct  ',' 
                      + quotename(RptLOB1)
                    from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsRow = STUFF((SELECT distinct  ', ''' 
                      + RptLOB1 + ''' as ' + RptLOB1
                    from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsConverted
      = STUFF((SELECT distinct  ', CAST(' 
                + quotename(RptLOB1) 
                 + ' as varchar(50))'
                from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select ''RptLOB1'' as RptLOB1, 
      '+ @colsRow + '
     union all 
     select RptLOB1, '+ @colsConverted+ '
     from 
     (
       select RptLOB1 RptLOB1, RPTLOB2 RPTLOB2, Correlation
       from yourtable
       union all
       select RPTLOB2, RptLOB1, Correlation
       from yourtable
       union all
       select distinct RptLOB1, RptLOB1, 1.0
       from yourtable
      ) x
      pivot
      (
        max(Correlation) 
        for RPTLOB2 in ('+ @colspivot +')
      ) p'

exec(@query) 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4f4fa/42)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:58:26.993

问题是你的数据不够完整。所以，用你需要的东西来增强它：

```
with d as (
    select RptLOB1, RptLOB2, Correlation from t union all
    select RptLOB2, RptLOB1, Correlation from t union all
    select distinct RptLob1, RptLob1, 1.0 from t
)
select RptLOB1, RptLOB2, Corr
from d
pivot (max(correlation) for val in ('AE', 'Bail', 'Commercial')) as corr 
```

如果您不知道所有值的名称，那么一般情况下您将需要动态 SQL。

# .net - Visual Studio 2012 可以并行运行单元测试吗？

> ID：12674606
> 
> 赞同：15
> 
> 时间：2012-10-01T13:49:37.533
> 
> 标签：.net, visual-studio, unit-testing, parallel-processing

Visual Studio **2012可以****并行**运行单元测试吗？Visual Studio **2010**有一个选项可以做到这一点：

[http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx](http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx)

...但我在 Visual Studio 2012 中找不到类似的东西。我尝试了参考文章中描述的过程，但即使加载相同的测试设置文件，我也无法并行运行测试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T13:36:19.373

不。VS2012 单元测试框架目前不并行运行测试。

**编辑**：将 Dave 的部分评论移到答案中，以便更好地参考。

请参阅[此链接](http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx)，了解如何使用 .testsettings 启用并行运行。一旦你在你的 .testsettings 文件中配置了这个，你就可以将它设置为 VS 中的活动设置文件，这将强制在旧的 mstest 框架中执行，这个功能是可用的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-06T20:42:10.407

您可以强制 VS2012 使用 2010 测试设置文件。您可以将 FileName.testsettings 添加到 2012 .runsettings 文件中。这被认为是遗留的，可能不会永远得到支持。

例如

```
<MSTest>
 <CaptureTraceOutput>True</CaptureTraceOutput>
 <DeploymentEnabled>False</DeploymentEnabled>
 <SettingsFile>FILENAME.testsettings</SettingsFile>
 <ForcedLegacyMode>True</ForcedLegacyMode>
</MSTest> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T22:42:20.000

我有一个从 2010 升级到 2012 的测试项目。它不会在 IDE 中并行运行，但使用带有测试 DLL 的 mstest.exe 可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T12:09:42.660

Visual Studio 2012 不允许并行运行测试。

但是您可以尝试使用[ParallelTestRunner](https://github.com/sscobici/ParallelTestRunner)工具从命令行并行运行 Visual Studio 2012/2013/2015 测试。

# eclipse - 签出 Maven 项目后要执行哪些步骤

> ID：12674607
> 
> 赞同：1
> 
> 时间：2012-10-01T13:49:42.533
> 
> 标签：eclipse, maven

我通常使用 .NET WinForms，但现在必须处理其他团队成员编写的一些 Java 应用程序。他们有一堆 POM.XML 文件，所以我知道它正在运行 bu Maven 但不熟悉 Maven，所以这是我到目前为止所做的步骤：

*   在 EClipse 中安装了一些 Subversion 插件并检查了他们的项目。
*   这些项目旁边没有小“M”图标，所以我右键单击，有一些命令，如 Convert to Maven 或我选择的类似命令，现在它们已 Mavenized ！我猜
*   但是有很多编译错误，修复它们的步骤是什么？也许我还没有编译项目？在此之后我应该采取的步骤顺序是什么？我已经看到一些“mvn clean install”coomands fold 运行，但就像我说的不确定下一步是什么？到目前为止，我已经将项目签出到 eclipse 中，并正确点击并说转换为 maven。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:52:35.247

1.  查看项目
2.  在命令行执行`mvn clean install`根级别（包含 pom 的第一级）。这将执行构建，其中包括下载所有库。
3.  `Import Existing Maven Project`在日食。这将比导入项目然后尝试转换为 eclipse 更安全
4.  开发（是的，我知道这应该是`...`）
5.  利润！

为了让它工作，你至少应该有 eclipse 的 m2e 插件。我认为它在 Eclipse 的 Java EE 版本中是标准的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:58:17.263

选择项目或`pom.xml`（根中的那个，如果有的话），右键-> `Run As...`->`Maven install`

然后 Maven 将尝试编译该项目。通常，这发生在后台，但是当出现问题时，Eclipse 中的错误消息并不能完全提供帮助。

当您在控制台中运行 Maven 时，它将打印一条有意义的错误消息。很可能，它无法下载依赖项。

# java - Mime 7 位编码和 UnsupportedEncodingException

> ID：12674610
> 
> 赞同：0
> 
> 时间：2012-10-01T13:49:56.263
> 
> 标签：java, mime, mime-message

我已经实施了一种方法，但我不确定它是否正确，或者将来会给我带来问题。
给这封电子邮件：

```
Date: Mon, 17 Sep 2012 04:14:36 +0200   
Content-Type: text/plain;
    charset="utf-7"   
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
To: user@address.com

Dear Sir/madam, ... etc 
```

而这段代码：

```
MimePart part; //The email 
if (part.isMimeType("text/plain")) {
   String plainContent = part.getContent().toString(); 
```

例外是：

```
java.io.UnsupportedEncodingException: utf-7 
```

我做了这个修改，所以字符集总是`utf-8`和编码`quoted-printable`

```
part.setHeader("Content-Transfer-Encoding", "quoted-printable");
part.setHeader("Content-Type", "text/plain; charset=utf-8"); 
```

例外不再存在并且`plainContent`是正确的。但这似乎太容易解决了……我将来会遇到哪些问题？有没有更好的方法来跳过异常并在不强制 carset 和编码的情况下获取电子邮件内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:40:55.587

如果有人真的发送 UTF-7，你会导致客户端解码不正确。但这非常罕见；大多数网站都使用 Unicode 发送 UTF-8。对于您发布的示例内容，它是纯 ASCII，因此它对 UTF-7 和 UTF-8 都有效。（UTF-7 为 + 和 - 分配了特殊的语义，因此对于包含这些字符序列的消息，即使 ASCII 也不安全。也就是说，UTF-7 错误地标记为 US-ASCII 或反之亦然会错误地解码。）

将 Quoted-Printable 分配给真正不是的东西同样是随意的；消息中的任何等号在 QP 中都有特殊含义。我认为你应该离开它。

正确的解决方案是真正重新编码消息正文，即从 UTF-7 转换为 UTF-8（并可能将其包装在quoted-printable 中），然后分配正确的内容类型标头；或者，说服发送这些消息的任何人坚持使用普通的旧 US-ASCII 或切换到 UTF-8。（或者，了解如何教 Java 处理 UTF-7 编码；但这超出了我的能力范围。）

另见[http://en.wikipedia.org/wiki/UTF-7](http://en.wikipedia.org/wiki/UTF-7)

* * *

基本的 RFC822 电子邮件是纯 7 位的。为了实现丰富的内容和不同的字符集，[MIME](http://en.wikipedia.org/wiki/MIME)是在 1990 年代初期开发的。您问题的核心是两个 MIME 标头`Content-Type:`和`Content-Transfer-Encoding:`. 它们都用于标识 MIME 部分的类型，但它们是不同的概念。描述`Content-Type`了数据是什么（`text/html`, `audio/midi`,`application/octet-stream`用于无类型二进制数据等）。指示它是`Content-Transfer-Encoding:`如何被编码以通过电子邮件（或另一个 MIME 管道）传输的。

`Content-Transfer-Encoding:`基本上定义了两种编码和三种未编码类型。CTE：`7bit`表示数据本身适合通过7位通道传输（也有行长限制）；`8bit`不是，如果通道不能容纳 8 位数据，则​​需要重新编码。同样，`binary`它也是 8 位的，但另外不能保证行长（即它可能包含超过大约 1,000 个字符的行）。因此，要通过7 位通道传输`binary`或数据，您需要将内容重新编码为或。这两种编码都将 8 位字符替换为 7 位序列；接收者应执行反向替换以解码和提取数据。`8-bit``base64``quoted-printable`

一旦提取发生，数据基本上就可以在接收端使用了。但是，对于文本类型，还有字符集编码的问题。许多字符集只是 7 位或 8 位，因此流中的一个字节对应一个字符。但多字节字符集的行为并非如此，因此它们也需要以某种方式进行编码。但这与上面描述的 MIME 7bit/8bit 不同。字符编码告诉您字节流如何编码多字节字符。

[UTF-8](http://en.wikipedia.org/wiki/Utf-8)将多字节字符编码为 8 位字符序列（虽然方便地 7 位字符与 US-ASCII 7 位编码相同）。编码具有一些不错的属性，您可以在 Wikipedia 中了解这些属性。

UTF-7 从未被正式接受为官方的 Unicode 编码，也没有被广泛使用。它与 US-ASCII 不完全兼容，因为`+`和`-`字符用于编码多字节字符序列。

如果您希望解码 UTF-7 并且您的语言不支持该编码，则必须编写自己的解码器。另一种方法是不对编码进行解码，而是将其留给下游消费者进行解码。在这种情况下，请注意以某种方式将字符编码中继到下游。但是，由于 UTF-7 未得到广泛支持，我建议将其重新编码为广泛支持和理解的 UTF-8（而且，如前所述，如果不存在多字节字符，则与 US-ASCII 透明兼容）。

所以，总结一下；如果更改标头，则还必须更改编码。如果幸运（并且您的示例具有代表性），文本不包含任何实际编码的 UTF-7 多字节字符，在这种情况下，您可以安全地将其重新标记为 US-ASCII。如果它确实包含`+`or`-`字符，它们是需要解码的 UTF-7 序列的一部分（尽管同样，您可能很幸运，并且这些序列只是编码文字加号或减号的 UTF-7 转义）。

# java - 覆盖 Arrays.BinarySearch 的 equals 方法

> ID：12674611
> 
> 赞同：1
> 
> 时间：2012-10-01T13:50:21.317
> 
> 标签：java, equals, binary-search

我有一个类，它`implements comparable`可以根据其中一个类变量来比较和排序其实例的数组。现在我希望能够使用`Arrays.binarySearch`. 为此，覆盖该`equals`方法就足够了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:51:59.367

不，`binarySearch`适用于“或多或少”比较而不是相等比较。如果您`Comparable`正确实施，以便它始终如一地遵守接口，特别是在项目相等时返回 0，那么这应该是所需要的。（或者，您可以指定一个`Comparator`.）

当然，数组必须正确排序才能`binarySearch`工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:52:42.033

`equals`不用于排序操作。相反，假设`compareTo == 0`和`equals == true`是一回事。

相反，您需要实现 compareTo 以在它们相等时返回 0 或实现您自己的比较器。

# c - C将节点添加到链表的头部

> ID：12674616
> 
> 赞同：2
> 
> 时间：2012-10-01T13:51:07.307
> 
> 标签：c, linked-list, nodes, head

我在c中创建了一个链表结构

```
struct node{
   int value;
   struct node* next;
}; 
```

在列表开头添加节点的方法：

```
void addFirst(struct node *list, int value){
    struct node *new_node = (struct node*) malloc (sizeof (struct node));
    new_node->value = value;
    new_node->next = list;
    list = new_node;
   } 
```

我创建了一个列表（malloc 和所有内容），然后调用此方法，它在方法中添加了新节点，但是当我回到我的主节点时，我的旧列表保持不变。使用 DDD 调试器检查所有内容。这怎么可能？我无法更改方法签名，因此必须这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:54:43.810

无法以这种方式将节点指针更改为函数。在函数中，您可以更改指针的内容，而不是指针的地址。要做到这一点，你必须通过你的指针指针`struct node **list`

在这里之后如何做到这一点：

```
void addFirst(struct node **list, int value){
    struct node *new_node = (struct node*) malloc (sizeof (struct node));
    new_node->value = value;
    new_node->next = *list;
    *list = new_node;
} 
```

或者你可以这样做

```
struct node * addFirst(struct node *list, int value){
    struct node *new_node = (struct node*) malloc (sizeof (struct node));
    new_node->value = value;
    new_node->next = list;
    return new_node;
} 
```

在你的鳕鱼中，你可以在调用这个函数后得到头部

```
head = addfirst(head,45); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T14:00:55.233

如果你真的需要这样做，你必须重新投射指针。像这样的东西：

```
struct node *my_list = null;
addFirst((struct node *)&my_list, 123);

void addFirst(struct node *list, int value){
    struct node **real_list = (struct node **)list;
    struct node *new_node = (struct node*) malloc (sizeof (struct node));
    new_node->value = value;
    new_node->next = *real_list;
    *real_list = new_node;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T13:57:01.980

在 C 语言中，如果您希望函数能够更改在其参数中接收到的值，则需要传递该值的地址。因此，要更改列表指针的值，您需要传递列表指针的地址。您的 addFirst() 函数应如下所示：

```
void addFirst(struct node **list, int value){
     struct node *new_node = (struct node*) malloc (sizeof (struct node));
     new_node->value = value;
     new_node->next = *list;
     *list = new_node;
} 
```

调用该函数时，您可以这样称呼它：

```
addFirst(&list, value); 
```

现在，如果你想保留函数的签名，一种可能是改变你考虑头节点的方式。如果您声明头节点的目的只是保存指向第一个值的指针，但本身不包含值，您可以执行以下操作：

```
struct node *head;

void addFirst(struct node *list, int value){
     struct node *new_node = (struct node*) malloc (sizeof (struct node));
     new_node->value = value;
     new_node->next = list->next;
     list->next = new_node;
}

addFirst(head, 45); 
```

现在，您只需更改在列表上工作的所有函数，因此它们的工作方式相同，考虑到“头”仅指向列表的真正第一个节点，而不是列表本身的成员。出于所有实际目的，“真正的”头是头->下一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-06T06:56:00.640

我已经了解了@Vlad Lazarenko 的答案，并且我编写了这样的代码，对吗？

```
addFirst((struct node**)head,123);

void addFirst(struct node **list,int value)
{
    struct node *new_node=malloc(sizeof(struct node));
    new_node->value=value;
    new_node->next=*list;
    list=&new_node;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T13:54:45.420

一切都很好，但在`void addFirst(struct node *list, int value)`函数中`list`是按值传递的。这意味着正在复制一个指针，并且在`addFirst`函数内部为该指针分配一个新地址对于`addFirst`. 要解决它，您必须通过指针 ( `struct node **`) 传递一个指针，或者将其设为返回值并要求调用者将其用作新的“头”。

并且不要忘记`;`在结构声明之后。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-01T13:52:58.453

```
void addFirst(struct node **list, int value){
    struct node *new_node = (struct node*) malloc (sizeof (struct node));
    new_node->value = value;
    new_node->next = *list;
    *list = new_node;
} 
```

这是正确的代码。问题是`struct node *list`您传递的指针无法更改，因为它是一个堆栈变量。如果将其更改为，则将`struct node **list`指针传递给列表的第一个节点。现在您可以将其更改为指向列表的新第一个节点。

# php - Google Apps 不会收到 PHP mail() 电子邮件

> ID：12674618
> 
> 赞同：3
> 
> 时间：2012-10-01T13:51:08.820
> 
> 标签：php, linux, apache, google-app-engine, email

来自谷歌的[这个](http://support.google.com/a/bin/answer.py?hl=en&answer=55299)支持线程。我相信这是问题所在：

“因为您的网站和您的 Google Apps 电子邮件地址共享同一个域名，所以在托管您网站的服务器上运行的邮件代理认为它负责处理发往您的域名的邮件。这是一个典型的默认设置。当有人提交“在您网站上的表格中，邮件代理识别您的域名并得出结论认为它应该向自己发送邮件。邮件代理将尝试在本地传递邮件。”

我应该在哪里解决这个问题，是 PHP 还是 Apache 问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:54:30.667

您有两个基本选择：

*   配置您的 sendmail（或替换邮件）以使用您的帐户信息将所有邮件直接发送到 Google 的 SMTP 服务器。这就是`mail()`函数正在使用的。
*   跳过 sendmail 并让 PHP 直接通过 SMTP 连接到您的 Google SMTP 帐户。使用像 phpMailer 这样的库来简化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:59:02.703

同意 Matt S，当网络服务器本身已被 Google 列入黑名单时，他的解决方案适用于 Google Apps 邮件。我以前遇到过这种情况，无论在 Google Apps 邮件中设置了什么过滤器，它都会从该服务器收到任何垃圾邮件。

但是，您在问题中的引用与您的站点所在服务器上的邮件服务器有关。如果您已设置为使用 Google Apps，但您的邮件服务器仍处于打开状态（在 Plesk 中它位于 Services->Mail 中），那么您将不会收到该电子邮件。因此，请先关闭邮件服务器，如果失败，请按照 Matt S 的建议进行操作。

# php - 除非语音标记之间有逗号，否则将字符串拆分为数组

> ID：12674620
> 
> 赞同：1
> 
> 时间：2012-10-01T13:51:16.613
> 
> 标签：php, csv, import

我正在编写一个 csv 文件重要脚本。有两种分隔符可供选择，逗号或分号。我注意到虽然在文本文件中，一些文本的中间有分号和逗号。每个文本字段周围都有语音标记，但有些字段是空白的，有些是数字的。我正在寻找一种方法来仅拆分语音标记之外的文本，同时保留文本而不是语音标记。

这是我用来拆分行的当前函数。

```
function parse_lines($p_CSVLines,$c_Names,$separator)
{
    $content = FALSE;
    if( !is_array($content) ) { // the first line contains fields numbers
        $this->fields = $c_Names;
        $content = array();
    }

    foreach($p_CSVLines as $line_num => $line){
        if($line != ''){ // skip empty lines
            $elements = split($separator, $line);
            $item = array();
            foreach($this->fields as $id => $field){
                if( isset($elements[$id]) ){
                   $field = trim($field,"\"");
                   $item[$field] = trim($elements[$id],"\"");
                }
            }
            $content[] = $item;
        }
    }
    return $content;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:25:34.997

请注意，`split()`强烈建议不要使用 ，现在已弃用。您可以使用`preg_split()`或`explode()`。

您在这里要做的是使用 REGEX 搜索不在文本中间的分号和逗号。`preg_split()`应该用正确的表达方式完成工作。

见[http://ca3.php.net/manual/en/function.preg-split.php](http://ca3.php.net/manual/en/function.preg-split.php)

# bash - svn diff summarise 和 awk 文件名与空格问题

> ID：12674623
> 
> 赞同：0
> 
> 时间：2012-10-01T13:51:34.437
> 
> 标签：bash, svn

我有一个带有一行的 bash 脚本：

```
for i in $(svn diff --summarize $REPO$OLD $REPO$NEW |awk '{print $0}'); 
 do
 print $i 
```

输出：

```
A
https://domainname.com/projectxyz/uploads/Screen
shot
2012-05-08
at
1.57.50
PM.png 
```

我需要的是这样的单行字符串：

```
"Ahttps://domainname.com/projectxyz/uploads/Screen shot 2012-05-08 at 1.57.50 PM.png" 
```

注意：**使用 MAC 操作系统**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:26:50.053

尝试像这样在子shell周围加上引号：

```
for i in "$(svn diff --summarize $REPO$OLD $REPO$NEW |awk '{print $0}')"
do
    echo $i
done 
```

编辑：

你可以试试这个方法：

```
svn diff --summarize $REPOS@OLDREV $REPOS@NEWREV |
    while read line
    do
        echo $line
    done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:13:13.333

尝试类似：

```
for i in $(svn diff --summarize $REPO$OLD $REPO$NEW |awk '{print }'); 
 do
 print $i 
```

打印整行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:00:14.640

再次进行一些研发后，我发现它不是 **awk**工具，而是**for**循环错误，默认情况下，它根据**IFS**变量 value 标记字符串，默认为空格。即使 awk 返回整个字符串 for 循环也会根据**IFS**进行拆分。所以我在 Mac OS 上的工作解决方案是：

```
IFS=$'\n'
for i in $(svn diff --summarize $REPO$OLD $REPO$NEW |awk '{print $0}'); 
 do
 print $i 
```

我仍然不知道为什么它在不设置**IFS的情况下在 linux 下工作而不是在 MAC OS 上工作**

# authentication - 如何在 OpenStack 中集成专有的联合 IdP

> ID：12674628
> 
> 赞同：0
> 
> 时间：2012-10-01T13:51:49.430
> 
> 标签：authentication, saml, federated-identity, openstack

我应该将现有的 saml 框架与 openstack 集成以访问云。我正处于这个项目的开始阶段。我刚刚安装了 openstack 并阅读了一些文档。我已经读过，由于它的架构，keystone 可以处理自定义框架，但我有点迷茫。我需要帮助才能开始，我应该寻找什么？你有我可以观看开始的文档或灵感项目的链接吗？

更详细地重新措辞：

我有一个名为 FC 的联合身份提供程序，它使用自己的登录页面。这是标准用例：

*   受保护的页面将用户重定向到 FC 的登录页面
*   用户输入姓名和密码，然后提交表单
*   登录页面将名称和密码发送到身份服务器，询问他的凭据
*   服务器提供凭据
*   用户被重定向到初始（不再）受保护的页面
    *   本例中的受保护页面是 OpenStack 的仪表板！

阅读@Heckj 的答案，我是否应该为 keystone 编写一个身份后端，将名称和密码发送到 FC 登录页面并处理其答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:57:58.730

在 OpenStack 的 Folsom 版本中，身份机制和 API 不支持任何联合的概念。[这是 OpenStack Grizzly 设计峰会上讨论的主题之一——您可以在联邦蓝图](https://blueprints.launchpad.net/keystone/+spec/federation)上看到该讨论/对话的一些细节。

对于 OpenStack 的 Essex 和 Folsom 版本，身份服务（[Keystone](https://launchpad.net/keystone)）具有一种机制，用于通过从 Driver 继承和实现来编写身份“插件”（在[https://github.com/openstack/keystone/blob/master/keystone /identity/core.py](https://github.com/openstack/keystone/blob/master/keystone/identity/core.py)）。这方面的示例可以在[https://github.com/openstack/keystone/tree/master/keystone/identity/backends](https://github.com/openstack/keystone/tree/master/keystone/identity/backends)上的项目提供的后端中找到。

恐怕没有关于制作自定义身份后端的具体文档和示例，但已经完成 - 在[https://gist.github.com/3176390上有一个示例混合 SQL/LDAP 后端的要点](https://gist.github.com/3176390)

为 DeLac 的扩展扩展一点：

Keystone 提供了一组特定于 OpenStack 的信息，它比基本身份验证更详细一些——最具体地说，它包括项目或租户的概念，以及用户是否被授权访问该项目或租户。当 keystone 提供与其他 OpenStack 项目一起使用的令牌凭证时，这些项目可以查询回 Keystone 以确定这些额外的详细信息，以提供授权策略的实施。

如果您想插入另一个或替代身份验证机制来支持 Keystone（例如联合身份提供者），从 Folsom 版本开始，您可以通过创建一个 Keystone 身份后端来实现，该后端可以针对您的特定提供者进行身份验证，并且还可以执行任何业务您认为合适的逻辑来提供有关用户及其与项目的关联方式以及用户对每个项目的角色的信息。

所有 keystone 都可以修改为使用 SAML 或该方案的其他变体，但这将是对许多组件的整体替换，而不仅仅是在这种情况下对身份验证进行插件升级。正在进行一些努力以使其更容易一些（特别是启用基于 PKI 的身份验证而不是简单的令牌），但在这种方式中任何重要的事情都将是一项艰巨的任务。也就是说，Keystone 和其他 OpenStack 组件具有定义合理的 API 和它们正在使用的接口，因此这不是一项不可能完成的任务。

# ruby - 如何通过反射调用 ruby 模块方法？

> ID：12674629
> 
> 赞同：2
> 
> 时间：2012-10-01T13:51:49.880
> 
> 标签：ruby, reflection, ruby-1.8

我想让以下工作。这个想法是我可以向 Routes 添加方法，如果它们存在，我以后可以使用它们。我正在使用 Ruby 1.8。

```
module Routes
  def home
    #stuff
  end

  def work
    #end
  end
end

Routes.method_defined? :home
# true

Routes.send(:home)
#NoMethodError: undefined method `home' for Routes:Module 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:00:02.630

使用以下代码，您可以做到这一点：

```
Class.new.extend(Routes).send(:home) 
```

# ruby-on-rails - 多列索引的 Rails 迁移 - 我如何命名索引？

> ID：12674637
> 
> 赞同：3
> 
> 时间：2012-10-01T13:52:14.170
> 
> 标签：ruby-on-rails, ruby, migration

这会添加索引，但不允许我设置名称。我怎样才能做到这一点？

```
class AddIndexEventScheduleidDayStarttime < ActiveRecord::Migration
  def up
    add_index(:events, [:schedule_id, :day , :start_time], {:name => "event_schedule_by_day_and_time_index"})
  end 

  def down
    remove_index(:events, {name: "event_schedule_by_day_and_time_index"})
  end 
end

$ rake db:migrate
==  AddIndexEventScheduleidDayStarttime: migrating ============================
-- add_index(:events, [:schedule_id, :day, :start_time], {:name=>"event_schedule_by_day_and_time_index"})
   -> 0.2210s
==  AddIndexEventScheduleidDayStarttime: migrated (0.2212s) =================== 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T14:06:02.707

如果您查看文档（http://api.rubyonrails.org/classes/ActiveRecord/Migration.html），您会看到 add_index 是 `add_index(table_name, column_names, options)`

所以写你的代码如下：

```
 def up
    add_index(:events,[:schedule_id, :day , :start_time],name: "event_schedule_by_day_and_time_index")
  end 
```

应该是你想要的。选项位于列 ID 之后。

# image - Flex 基于 Web 的应用程序中的图像处理

> ID：12674641
> 
> 赞同：1
> 
> 时间：2012-10-01T13:52:25.003
> 
> 标签：image, apache-flex, positioning

我真的遇到了一个问题，或者更多的错误。我有一个用 Flex 4.1 编写的业务应用程序，编译后的 Flash 对象在不同的​​浏览器上以不同的方式显示其中的图像。

例如这个页面： http: [//www.maastrichtuniversity.nl/web/Main/ProspectiveStudents/HomepageNewPortalProspectiveStudents/ChooseYourProgramme/RequestBrochures.htm](http://www.maastrichtuniversity.nl/web/Main/ProspectiveStudents/HomepageNewPortalProspectiveStudents/ChooseYourProgramme/RequestBrochures.htm)

如果您在 Chrome 或 Safari 等浏览器上选择学士学位课程，您将看到标志与文本对齐（标志使用 x,y 坐标定位。如果您在 IE 8 或 9 上执行完全相同的操作，您将看到所有标志都移动左边几个pizels，开始覆盖一些标签。

有没有其他人遇到过这个问题，以及如何解决它？这是用于定位标志的 mxml 代码。

```
<mx:Image x="241" y="65" width="15" height="10" source="en.jpg"/>
            <mx:Image x="245" y="95" width="15" height="10" source="en.jpg"/>
            <mx:Image x="230" y="111" width="15" height="10" source="en.jpg"/>
            <mx:Image x="262" y="65" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="160" y="246" width="15" height="10" source="en.jpg"/>
            <mx:Image x="335" y="260" width="15" height="10" source="en.jpg"/>
            <mx:Image x="199" y="305" width="15" height="10" source="en.jpg"/>
            <mx:Image x="182" y="246" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="169" y="275" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="199" y="290" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="152" y="124" width="15" height="10" source="en.jpg"/>
            <mx:Image x="158" y="140" width="15" height="10" source="en.jpg"/>
            <mx:Image x="129" y="154" width="15" height="10" source="en.jpg"/>
            <mx:Image x="152" y="230" width="15" height="10" source="en.jpg"/>
            <mx:Image x="173" y="124" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="162" y="170" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="232" y="185" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="166" y="200" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="285" y="215" width="15" height="10" source="nl.jpg"/>
            <mx:Image x="312" y="80" width="15" height="10" source="nl.jpg"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:02:40.230

这可以通过以下方式实现：

```
<?xml version="1.0"?>
<!-- sparktextcontrols/TLFFloat.mxml -->
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009"    
    xmlns:mx="library://ns.adobe.com/flex/mx"     
    xmlns:s="library://ns.adobe.com/flex/spark">

    <s:layout> 
        <s:VerticalLayout/> 
    </s:layout>

    <fx:Script>
        <![CDATA[
            private function changeSelection(event:Event):void {
                image1.float = event.currentTarget.selectedItem;
            }
        ]]>
    </fx:Script>

    <s:HGroup>
        <s:Label text="float for the image (default:none):"/>
        <s:ComboBox id="cb1" 
            change="changeSelection(event)" 
            creationComplete="cb1.selectedIndex=0">
            <s:ArrayCollection>
                <fx:String>none</fx:String>
                <fx:String>left</fx:String>
                <fx:String>right</fx:String>
                <fx:String>start</fx:String>
                <fx:String>end</fx:String>
            </s:ArrayCollection>
        </s:ComboBox>
    </s:HGroup>

    <s:RichEditableText id="myRET1" width="300">
        <s:textFlow>
            <s:TextFlow columnWidth="290">
                <s:p id="p1">Images in a flow are a good thing. For example, here is a float. <s:img id="image1" float="none" source="@Embed(source='../assets/bulldog.jpg')" paddingRight="10" paddingTop="10" paddingBottom="10" paddingLeft="10"></s:img>Don't you agree? 
                It should show on the left. If it doesn't show up on the left, then it is a bug. You can submit bugs at http://bugs.adobe.com/jira/. You can set how the float is positioned within
                the paragraph by using the ComboBox below. You can select left, right, start, end, or none. This example does not use the clearFloats property. That is in a different example.</s:p>
            </s:TextFlow>
        </s:textFlow>
    </s:RichEditableText>   

</s:Application> 
```

# jasper-reports - 具有多列的报告：如何在每列中重新打印组标题？

> ID：12674642
> 
> 赞同：1
> 
> 时间：2012-10-01T13:52:28.143
> 
> 标签：jasper-reports

*我正在使用JasperReports 4.7.1*创建每页 2 列的报告。

当属于一个组的记录跨越多个列时，我不仅要在组的开头打印标题，还要在每列的开头打印标题。

使用组属性中的***Reprint Header***（***isReprintHeaderOnEachPage***属性），可以在每页的开头打印标题。但是我仍然找不到在新专栏开始时做同样的事情的方法。

我怎样才能做到这一点？

当前报告页面的屏幕截图...

![在此处输入图像描述](../Images/737d63bce5703b600f581ffabec75b04.png)

我想要实现的目标（注意第二列中的标题）......

![在此处输入图像描述](../Images/7539734de48e6c8985bdf5107c9a428b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T11:40:27.613

我遇到了与您类似的问题，我设法通过添加 ColumnHeader 带并仅在我的 2 列报告的第 2 列中显示它来解决它。

将 isReprintHeaderOnEachPage 设置为 true 并且 groupHeader 和 columnHeader 的高度必须相同，这样我的解决方案才能正常工作，这一点很重要。

这是相关代码（当然，您将“电话号码”替换为适当的组表达式：

```
<group name="telephoneNumberGroup" isStartNewPage="true" isReprintHeaderOnEachPage="true">
    <groupExpression><![CDATA[$F{telephoneNumber}]]></groupExpression>
    <groupHeader>
        <band height="17">
            <textField>
                <reportElement positionType="Float" x="5" y="0" width="170" height="15" uuid="5e8b892b-f907-4907-9c6d-4419e57325e5"/>
                <textElement verticalAlignment="Middle">
                    <font fontName="Arial" size="6" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{telephoneNumber}]]></textFieldExpression>
            </textField>
        </band>
    </groupHeader>
</group>
<columnHeader>
    <band height="17">
        <printWhenExpression><![CDATA[$V{COLUMN_NUMBER} == 2]]></printWhenExpression>
        <textField>
            <reportElement positionType="Float" x="5" y="0" width="170" height="15" uuid="5e8b892b-f907-4907-9c6d-4419e57325e5"/>
            <textElement verticalAlignment="Middle">
                <font fontName="Arial" size="6" isBold="true"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{telephoneNumber}]]></textFieldExpression>
        </textField>
    </band>
</columnHeader> 
```

# winforms - ClickOnce 部署无法解析远程名称：'WORKFREE'

> ID：12674653
> 
> 赞同：0
> 
> 时间：2012-10-01T13:53:12.633
> 
> 标签：winforms, visual-studio, clickonce

我需要帮助来解决这个问题。我构建并打包了一个我想通过电子邮件或网络共享的应用程序。问题是通过电子邮件共享时，出现以下问题。请问如何更新清单以避免这种情况？

```
PLATFORM VERSION INFO
                Windows                                             : 6.1.7601.65536 (Win32NT)
                Common Language Runtime       : 4.0.30319.269
                System.Deployment.dll                                : 4.0.30319.1 (RTMRel.030319-0100)
                clr.dll                                     : 4.0.30319.269 (RTMGDR.030319-2600)
                dfdll.dll                                                 : 4.0.30319.1 (RTMRel.030319-0100)
                dfshim.dll                                            : 4.0.31106.0 (Main.031106-0000)

SOURCES
                Deployment url                                                : file:///C:/Users/Owner/APPDATA/LOCAL/TEMP/install/AFDBFrontEnd.application
                Deployment Provider url                              : http://WORKFREE/AFDBFrontEnd/AFDBFrontEnd.application

ERROR SUMMARY
                Below is a summary of the errors, details of these errors are listed later in the log.
                * Activation of C:\Users\Owner\APPDATA\LOCAL\TEMP\install\AFDBFrontEnd.application resulted in exception. Following failure messages were detected:
                                + Downloading http://WORKFREE/AFDBFrontEnd/AFDBFrontEnd.application did not succeed.
                                + The remote name could not be resolved: 'WORKFREE'

COMPONENT STORE TRANSACTION FAILURE SUMMARY
                No transaction error was detected.

WARNINGS
                There were no warnings during this operation.

OPERATION PROGRESS STATUS
                * [10/1/2012 7:30:02 AM] : Activation of C:\Users\Owner\APPDATA\LOCAL\TEMP\install\AFDBFrontEnd.application has started.

ERROR DETAILS
                Following errors were detected during this operation.
                * [10/1/2012 7:30:11 AM] System.Deployment.Application.DeploymentDownloadException (Unknown subtype)
                                - Downloading http://WORKFREE/AFDBFrontEnd/AFDBFrontEnd.application did not succeed.
                                - Source: System.Deployment
                                - Stack trace:
                                                at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
                                                at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
                                                at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
                                                at System.Deployment.Application.DownloadManager.DownloadManifestAsRawFile(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
                                                at System.Deployment.Application.DownloadManager.DownloadManifest(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ManifestType manifestType, ServerInformation& serverInformation)
                                                at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirect(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
                                                at System.Deployment.Application.DownloadManager.FollowDeploymentProviderUri(SubscriptionStore subStore, AssemblyManifest& deployment, Uri& sourceUri, TempFile& tempFile, IDownloadNotification notification, DownloadOptions options)
                                                at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
                                                at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
                                                at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
                                --- Inner Exception ---
                                System.Net.WebException
                                - The remote name could not be resolved: 'WORKFREE'
                                - Source: System
                                - Stack trace:
                                                at System.Net.HttpWebRequest.GetResponse()
                                                at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)

COMPONENT STORE TRANSACTION DETAILS
                No transaction information is available. 
```

# c# - 如何从开罗保存 jpg

> ID：12674654
> 
> 赞同：2
> 
> 时间：2012-10-01T13:53:14.587
> 
> 标签：c#, svg, gtk, cairo, librsvg

下面是我用来从 svg 文件中保存 png 的代码。这行得通，但我还需要将它保存为 jpeg。有人可以建议我如何做到这一点吗？

```
 private void RasterizeSvg(string tempsvg, string rsltPath, int _width, int _height)
    {
        bool callSuccessful = SetDllDirectory(@"C:\ProgramDownloads\librsvg\librsvg-dev_2.32.1-1_win32\bin");
        if (!callSuccessful)
        {
            throw new Exception("Could not set DLL directory");
        }
        g_type_init();
        IntPtr error;
        IntPtr rsvghandle = rsvg_handle_new_from_file(tempsvg, out error);
        if (error != IntPtr.Zero)
        {
            throw new Exception(Marshal.ReadInt32(error).ToString());
        }
        IntPtr cairosurface = cairo_image_surface_create(cairo_format_t.CAIRO_FORMAT_RGB24, _width, _height);
        IntPtr cairorenderer = cairo_create(cairosurface);
        bool brslt = rsvg_handle_render_cairo(rsvghandle, cairorenderer);

        //cairo_surface_write_to_png(cairosurface, rsltPath);

        IntPtr pixbuf = IntPtr.Zero;
        cairo_set_source_surface(pixbuf, cairosurface, 0, 0);
        cairo_rectangle(pixbuf, 0, 0, _width, _height);
        cairo_fill(pixbuf);

        callSuccessful = gdk_pixbuf_save(pixbuf, rsltPath, "jpg", out error, __arglist(""));
        if (!callSuccessful)
        {
            throw new Exception(error.ToInt32().ToString());
        }
    } 
```

我更改了 cairo_set_source 的顺序，将 cairo_rectangle 放在首位，但我仍然遇到访问冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:08:48.003

您将一个空 pixbuf 指针传递给 cairo_set_source_surface。你应该通过这样的东西......

IntPtr pixbuf = cairo_create (cairosurface);

还

gdk_pixbuf_save 的第三个参数应该是“jpeg”

也许你也应该初始化错误？

# ios - UINavigationController 不推送视图控制器

> ID：12674656
> 
> 赞同：0
> 
> 时间：2012-10-01T13:53:17.017
> 
> 标签：ios, uinavigationcontroller, ios-simulator

我创建了一个具有登录名的应用程序。

它从一个欢迎视图控制器开始，检查用户是否登录，如果没有，打开一个登录视图控制器。如果用户已登录，或者一旦他们登录，就会像这样将用户推送到 Home View Controller。

```
App Delegate (did finish launching)

self.welcomeViewController = [[APPWelcomeViewController alloc] init];
self.homeViewController = [[APPHomeViewController alloc] initWithNibName:@"APPHomeViewController" bundle:nil];

self.navController = [[UINavigationController alloc] initWithRootViewController:self.welcomeViewController];
self.navController.navigationBarHidden = YES;

self.window.rootViewController = self.navController; 
```

用户登录后，它会推送主页视图。

```
// Push the homeViewController onto the navController
[self.navController pushViewController:self.homeViewController animated:YES]; 
```

到目前为止，这一切都很好。然后我使用模态视图控制器进行设置，其中包括一个注销按钮。用户的注销运行这个：

```
// Log the user out
[User logOut];

// Then we need to remove the Settings Modal View Conrtoller
[self.presentingViewController dismissModalViewControllerAnimated:YES];

// Then we need to take user back to welcomeViewController
[self.navigationController pushViewController:welcomeViewController animated:YES]; 
```

它会按预期关闭设置视图控制器，但导航控制器仍保留在主页视图上。没有错误，有谁知道为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:03:30.103

通过重新排列代码解决。在 appdelegate 上搜索当前用户，然后使用主视图的根控制器加载导航控制器或运行加载欢迎视图控制器的方法。

然后欢迎视图控制器也检查用户，如果不是当前用户，它会显示模式登录视图控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:08:45.303

一旦您使用包含欢迎视图控制器的导航控制器初始化窗口，您就不需要推送导航控制器。

如果你想在这个堆栈中添加更多视图（在欢迎视图控制器内）你调用方法 self.navigation 控制器 pushviewcontroller ...如果你想从堆栈中删除，调用 popviewcontroller ..你会去你的主视图堆栈（根） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:08:48.617

试试这个：

```
// Take me back to the root navigation view controller (APPWelcomeViewController)
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

# sql - 如何连接 2 个同表查询结果，在 SQLite 中保持唯一键？

> ID：12674658
> 
> 赞同：2
> 
> 时间：2012-10-01T13:53:18.577
> 
> 标签：sql, sqlite

考虑下表：

```
CREATE TABLE `foo`(
  `aaa` VARCHAR(45) NOT NULL,
  `bbb` VARCHAR(45) NOT NULL,
  `ccc` INT NOT NULL,
  `ddd` INT NOT NULL,
  PRIMARY KEY(`aaa`, `bbb`, `ccc`)
); 
```

以下数据：

```
INSERT INTO `foo` (`aaa`, `bbb`, `ccc`, `ddd`)
VALUES
('qwe', 'rty', 0, 123),
('asd', 'fgh', 0, 456),
('asd', 'fgh', 1, 678); 
```

将得到以下结果：

```
'qwe', 'rty', 0, 123
'asd', 'fgh', 1, 678 
```

目标是得到

*   每个 ( `aaa`, `bbb`) 密钥对只有一条记录
*   如果表中 ( , ) 密钥对的`ccc`记录超过 1 条，则使用= 1 的记录`aaa``bbb`

所以我认为我需要连接 2 个查询的结果集：

```
SELECT * FROM `foo` WHERE `ccc` = 1 
```

和

```
SELECT * FROM `foo` WHERE `ccc` = 0 
```

当第一个查询结果中已经存在相同的 ( `aaa`, `bbb`) 密钥对行时，丢弃第二个查询结果行。

如何在 SQLite 中编写代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:55:49.050

试试这个，

```
SELECT  a.*
FROM    foo a
        INNER JOIN
        (
            SELECT  aaa, bbb, MAX(ccc) maxC
            FROM foo
            GROUP BY aaa, bbb
        ) b ON a.aaa = b.aaa AND
                a.ccc = b.maxC AND
                a.bbb = b.bbb 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!7/0b317/2)

# android - 在 Eclipse 中使用没有反射的隐藏 API

> ID：12674662
> 
> 赞同：1
> 
> 时间：2012-10-01T13:53:40.623
> 
> 标签：android, eclipse, adt

我为我的自定义 ROM 开发应用程序，我需要调用 PackageManager 的方法，这些方法的注释如下：

```
 /* 
      @hide
      */
      public abstract void deletePackage(
          String packageName, IPackageDeleteObserver observer, int flags); 
```

我想这都是关于另一个 android.jar 的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:32:10.397

最后构建了自定义 SDK，我在其中删除了注释。

# jquery - 如何在jqgrid中更改行的特定单元格值

> ID：12674663
> 
> 赞同：29
> 
> 时间：2012-10-01T13:53:45.487
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我想更改特定行的单元格值，我有行 ID。我尝试过使用以下内容。但它不起作用。

```
$("#my-jqgrid-table").jqGrid('setCell',rowId,'Currency', '12321'); 
```

我在用`loadonce: true`

请有人可以帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-01T14:28:36.360

您可以使用`getRowData`and`setRowData`方法来实现这一点（它们直接使用*数据数组*）：

```
var rowData = $('#my-jqgrid-table').jqGrid('getRowData', rowId);
rowData.Currency = '12321';
$('#my-jqgrid-table').jqGrid('setRowData', rowId, rowData); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-13T20:04:24.367

这是根据[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)的正确方法：-

```
$("#my-jqgrid-table").jqGrid("setCell", rowid, "Currency", "New value"); 
```

检查所有变量是否正确，因为您所做的似乎正确。loadOnce 没有影响，你肯定在别处有错误。

*   你确定行名是货币（不是索引）
*   检查变量rowId，它应该是rowid还是rowID

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-02T05:02:22.600

感谢大家的努力，在工作中的一位朋友的帮助下，我设法用一些 jquery 来解决这个问题。

这是我所做的......

```
$("#" + rowId).find('td').eq('3').html('newText') 
```

之所以使用这里`3`是因为我想更改我的第三列。

希望这对将来的某人有用:)

# sql-server - 从 sp_msForEachTable 运行时，由于 QUOTED_IDENTIFIER ALTER INDEX 失败

> ID：12674664
> 
> 赞同：14
> 
> 时间：2012-10-01T13:53:52.900
> 
> 标签：sql-server, sql-server-2008-r2, reindex, sp-msforeachtable

当我尝试在表上重建索引时：

```
ALTER INDEX ALL ON [dbo].[Allocations] REBUILD 
```

效果很好。

但是当我打电话

```
EXECUTE sp_msForEachTable 'ALTER INDEX ALL ON ? REBUILD' 
```

我到达同一张桌子，但失败了：

> 消息 1934，级别 16，状态 1，第 2 行
> ALTER INDEX 失败，因为以下 SET 选项的设置不正确：'QUOTED_IDENTIFIER'。验证 SET 选项对于索引视图和/或计算列上的索引和/或过滤索引和/或查询通知和/或 XML 数据类型方法和/或空间索引操作是否正确。

* * *

并确认它是同一张桌子：

```
EXECUTE sp_msForEachTable 'print ''Rebuilding ?'';
ALTER INDEX ALL ON ? REBUILD;
PRINT ''   Done ?''' 
```

这给出了结果：

```
Rebuilding [dbo].[SystemConfiguration]
   Done [dbo].[SystemConfiguration]
Rebuilding [dbo].[UserGroups]
   Done [dbo].[UserGroups]
Rebuilding [dbo].[Groups]
   Done [dbo].[Groups]
Rebuilding [dbo].[UserPermissions]
   Done [dbo].[UserPermissions]
Rebuilding [dbo].[AllocationAdmins]
   Done [dbo].[AllocationAdmins]
Rebuilding [dbo].[Allocations]
Msg 1934, Level 16, State 1, Line 2
ALTER INDEX failed because the following SET options have incorrect settings: 'QUOTED_IDENTIFIER'. Verify that SET options are correct for use with indexed views and/or indexes on computed columns and/or filtered indexes and/or query notifications and/or XML data type methods and/or spatial index operations. 
```

我没有做错什么？

* * *

**注意**：

```
EXECUTE sp_msForEachTable 'DBCC DBREINDEX(''?'')' 
```

工作***正常！***

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-01T14:01:29.167

带引号的标识符设置针对每个存储过程进行存储，并将`sp_MSforeachtable`其定义为`OFF`. 但是，您可以解决此问题 - 通过`ON`在执行重新索引之前将其设置为：

```
create table dbo.T (
    ID int not null,
    constraint PK_T PRIMARY KEY (ID)
)
go
create view dbo.V ( ID)
with schemabinding
as
    select ID from dbo.T
go
create unique clustered index IX_V on dbo.V(ID)
go
ALTER INDEX ALL ON dbo.V REBUILD --Fine
go
exec sp_MSforeachtable  'ALTER INDEX ALL ON ? REBUILD' --Errors
go
exec sp_MSforeachtable  'SET QUOTED_IDENTIFIER ON;
ALTER INDEX ALL ON ? REBUILD' --Fine 
```

* * *

[`SET QUOTED_IDENTIFIER`](http://msdn.microsoft.com/en-us/library/ms174393.aspx)：

> 创建存储过程时，会捕获`SET QUOTED_IDENTIFIER`和`SET ANSI_NULLS`设置并将其用于该存储过程的后续调用。

* * *

而且，当然，插入关于`sp_MSforeachtable`未记录的常见警告，因此您不能依赖它的任何行为是稳定的。

* * *

因为[`DBCC DBREINDEX`](http://msdn.microsoft.com/en-us/library/ms181671.aspx)- 所有赌注都取消了。`DBCC`生活在自己的小、非常定制的代码世界中。但是，当然，未来的工作也不应该依赖它：

> 此功能将在 Microsoft SQL Server 的未来版本中删除。不要在新的开发工作中使用此功能，并尽快修改当前使用此功能的应用程序。改为使用[`ALTER INDEX`](http://msdn.microsoft.com/en-us/library/ms188388.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T13:57:10.500

您也需要`SET QUOTED_IDENTIFIER ON`in the `sp_msForEachTable`，因为`sp_msForEachTable`没有正确的设置。

```
EXECUTE sp_msForEachTable 'SET QUOTED_IDENTIFIER ON; ALTER INDEX ALL ON ? REBUILD;' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T23:16:14.917

不要使用 sp_msforeachtable。它已被记录为错过对象。使用 sys.tables 遍历表列表会更好。

```
DECLARE @id INT ,
    @table NVARCHAR(256) ,
    @reindex NVARCHAR(4000)
SELECT  @id = MIN(object_id)
FROM    sys.tables
WHILE @id IS NOT NULL 
    BEGIN
        SELECT  @table = QUOTENAME(s.name) + '.' + QUOTENAME(t.name)
        FROM    sys.tables t
                INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
        WHERE   t.object_id = @id

        SELECT  @reindex = 'SET QUOTED IDENTIFIER ON; ALTER INDEX ALL ON '
                + @table + ' REBUILD;'
        PRINT @reindex --prints the reindex command
        --EXEC @reindex --uncomment to actually reindex

        SELECT  @id = MIN(object_id)
        FROM    sys.tables
        WHERE   object_id > @id
   END 
```

例如：

```
CREATE PROCEDURE dbo.sp_ForEachTable @query varchar(8000) AS

  --todo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-28T15:34:02.730

代码示例中缺少下划线：

**曾是**

```
ELECT  @reindex = 'SET QUOTED IDENTIFIER ON; ALTER INDEX ALL ON '
                + @table + ' REBUILD;' 
```

**是**

```
ELECT  @reindex = 'SET QUOTED_IDENTIFIER ON; ALTER INDEX ALL ON '
                + @table + ' REBUILD;' 
```

# asp.net - 为什么一个新的 MVC4 项目会默认映射一个 WebApi 路由？

> ID：12674667
> 
> 赞同：2
> 
> 时间：2012-10-01T13:54:01.877
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

默认的 MVC4 应用程序将带有一个`RouteConfig`看起来像这样的类：

```
public static void RegisterRoutes(RouteCollection routes) {
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

我的问题是，为什么`MapHttpRoute`？这是为新的 WebApi 功能设置路由，但我没有选择 WebApi 项目，只是一个普通的 MVC4 项目。普通的 MVC4 项目中似乎不需要 WebApi。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:18:54.617

我是 MVC 和 WebApi 背后的微软开发人员之一。我们在模板中为这两种技术提供路由注册的原因是我们希望让您更容易开始将 Web API 控制器添加到您的项目中。就像 MVC 一样，如果没有注册路由，那么您的`Controller`课程将无法工作。通过这两条路线，我们使入门体验对开发人员更加友好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T14:54:57.387

ASP.NET Web API 是 ASP.NET MVC 4 的一个特性。它是 ASP.NET Webstack 的一部分（喜欢 ;）这背后的想法是，如果你想为你的 RESTFUL 服务使用 HTTP 强类型模型，那么支持是盒子外面。并且应该是使用“常规”控制器处理 RESTFUL 请求的首选方式。

当您选择 Web API 项目模板时，MVC 唯一的变化是项目文件树结构。但是由于 Web API 是 MVC 的一部分，因此对常规 MVC 项目的依赖项的一些引用仍然存在。

如果 ASP.NET Web API 的路由注册困扰您，您可以随时将其删除。

# jquery - Slickgrid 一次保存所有数据

> ID：12674669
> 
> 赞同：2
> 
> 时间：2012-10-01T13:54:14.193
> 
> 标签：jquery, slickgrid

我试图一次将所有数据保存在一个 slickgrid 中，而不是一次保存一个，我的计划是使用 [在 SlickGrid 中保存更改，](https://stackoverflow.com/questions/3228066/saving-changes-in-slickgrid) 所以我的代码是：

```
<script language='javascript' type="text/javascript">
    function saveQuote() {

    $("input[name='mydata']").val(jQuery.parseJSON(grid.getData()));
  }
</script> 
```

我的数据是一个文本框......（所以我可以调试并查看发生了什么）我的网格一开始是空的，用户添加数据（有计算等）但是当我按下我的保存按钮并调用我的 saveQuote no数据正在呈现，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:31:20.523

问题在于：

```
 $("input[name='mydata']").val(jQuery.parseJSON(grid.getData())); 
```

所以我把它换成了

```
$("input[name='mydata']").val(JSON.stringify(grid.getData())); 
```

完整代码现在是：

```
<script language='javascript' type="text/javascript">
   function saveQuote() {
    $(function() {
        $("input[name='mydata']").val(JSON.stringify(grid.getData()));
            });
} 
```

# jquery-ui - Jquery ui滑块范围 - 左右拖动器的单独事件

> ID：12674674
> 
> 赞同：0
> 
> 时间：2012-10-01T13:54:35.450
> 
> 标签：jquery-ui, jquery-ui-slider

我在一页上使用许多 jQuery ui 滑块作为范围滑块。一次大约有 60 个范围 sladers。

滑块必须做到：

1.  当我拖动左拖动器时 - 右拖动器必须移动到。它需要固定范围并将其移动到最大/最小线
2.  当我拖动右拖动器时 - 左不移动，但更改 #1 动作中使用的范围 len

对于存储范围的 len，我在 html 中使用 attr：

```
div class="slider" range="10" 
```

*   当我移动左拖动器时 - 我添加范围属性以计算右拖动器位置。
*   当我向右拖动器移动时-我更改了范围属性。

在 javascript 中，我使用更改和滑动事件 - 但我不知道左或右拖动器创建事件。

如何为范围滑块中的左右拖动器创建单独的事件？

# api - 使用 Yahoo! 查找所有 Delicious 帖子 来自所有用户的管道

> ID：12674678
> 
> 赞同：0
> 
> 时间：2012-10-01T13:54:44.170
> 
> 标签：api, search, yql, yahoo-pipes, delicious-api

我想尝试创建一个雅虎管道，它将返回 Delicious 上标有类别的所有文章、网址和保存次数，例如“寿司”。

那可能吗？（我知道我可以使用自己的标签或网络中的标签来做到这一点。而且我知道我可以简单地转到 Delicious 并按下加载更多按钮，直到我用完列表。）

但是 json 结构或 XML 输出文件会更容易处理。

有人知道如何得到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:28:15.667

为了在您的应用程序中访问美味的数据，您需要获得 Yahoo! API 密钥并将其配置为使用美味的社交书签。您可以通过为您的应用程序创建一个项目来做到这一点。 [https://developer.apps.yahoo.com/dashboard/createKey.html](https://developer.apps.yahoo.com/dashboard/createKey.html)

在第二个链接中有一些示例，显示了与您尝试做的类似的事情。

在这里阅读更多：http:
[//developer.yahoo.com/delicious/](http://developer.yahoo.com/delicious/)

# asp.net-mvc - 使用 BeginForm 将值传递给控制器

> ID：12674686
> 
> 赞同：0
> 
> 时间：2012-10-01T13:55:12.017
> 
> 标签：asp.net-mvc

我需要将**表单值**传递给我的控制器**以及**我正在使用的模型。

发布到控制器时，以下语法是否正确？

HTML

```
@using (Html.BeginForm("GeneratePDF", "Home", FormMethod.Post)) 
```

控制器

```
public ActionResult GeneratePDF(FormCollection values, ViewModelTemplate_Guarantors tg) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:02:10.340

你不能将两者结合到一个特定的 ViewModel 中吗？就像是

```
public GeneratePDFModel
{
    public string FormCollectionValueFoo {get;set;}
    public string FormCollectionValueBar {get;set;}
    ViewModelTemplate_Guarantors OtherModel {get;set;}
} 
```

还是来源于`ViewModelTemplate_Guarantors`？

```
public GeneratePDFModel : ViewModelTemplate_Guarantors
{
    public string FormCollectionValueFoo {get;set;}
    public string FormCollectionValueBar {get;set;}
} 
```

这样，一切都是强类型的。

# jquery - 如何在Phonegap中更新后刷新ul控件

> ID：12674687
> 
> 赞同：0
> 
> 时间：2012-10-01T13:55:16.590
> 
> 标签：jquery, html, cordova

这是我的 ul 控制

```
<ul id="basket" class="big-menu">
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul> 
```

我使用此代码删除所有 li ->`$("#basket").find('li').remove().end();`
它们已被删除，但在触碰 Phonegap 应用程序中的屏幕之前不要刷新屏幕。

我们如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:48:49.500

尝试

```
 $( '#basket' ).listview('refresh'); 
```

# javascript - 在 shopify .liquid 主题代码中定义 element.style

> ID：12674689
> 
> 赞同：4
> 
> 时间：2012-10-01T13:55:45.790
> 
> 标签：javascript, jquery, shopify

Jquery 幻灯片无法正常工作。

我试图覆盖“新标准”shopify 主题中的“默认”容器宽度。默认最大宽度为 884 像素。我的客户想将整个网站的宽度扩展到 948 像素，当然包括幻灯片。我想在这样做的过程中，我更改了一些禁用幻灯片功能的东西。

我已经将原始主题文件与我在 textwrangler 中编辑的主题文件进行了比较，以尝试查看是否有一些小细节使其无法正常工作。但是在分析了 JSHOP.js 文件、style.css.liquid 文件、theme.liquid 文件等之后，我无法找到问题所在。

似乎没有为#SLIDE div 定义 element.style。CSS似乎很好。但是为了让每张幻灯片的左边距重新计算（即 948*2*-1、948*3*-1），JSHOP 源代码（又名 element.style）中必须有 javascript。正确的？

#slideshow-controls 未显示在幻灯片下方。

幻灯片不显示超过一张幻灯片

要查看该网站——详细信息如下： 网站：www.deekeller.com 密码：粉色：1111

# ios - iOS 开发。如何区分个人与客户团队的配置文件？

> ID：12674697
> 
> 赞同：2
> 
> 时间：2012-10-01T13:56:30.633
> 
> 标签：ios, xcode, provisioning-profile

作为一名合同 iOS 开发人员，我有我的个人团队配置文件，并且我有一个为我的客户创建的团队配置文件。在 Xcode 中，它们以相同名称的配置文件的形式出现 - 令人抓狂的是，它们的唯一区别是它们的创建日期。叹。

有没有人找到一种方法来消除这些多个团队配置文件的歧义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T18:06:05.907

我不知道你为什么会有同名的个人资料。当您创建它们时，您不会称它们为不同的东西吗？

无论哪种方式，在 Xcode
- Open Organizer
- 在顶部，在 Library 下，单击 Provisioning Profiles
- 右键单击​​每个并选择 Reveal Profile in Finder

这将为您提供每个配置文件的十六进制 ID（它们是唯一的，并且当您在开发门户中更改配置文件时会更改）

希望这可以帮助

# javascript - jQuery grayScale 不是灰度并显示错误的图像

> ID：12674701
> 
> 赞同：0
> 
> 时间：2012-10-01T13:56:37.990
> 
> 标签：javascript, jquery, image, wordpress, grayscale

我正在使用[这个 jQuery 灰度插件](https://github.com/Prydie/jQuery-GreyScale-Plugin)。[示例页面](http://www.pryde-design.co.uk/projects/jQGreyScale/example.html)，[开发者页面](http://www.pryde-design.co.uk/2011/08/greyscale-jquery-plugin/)。

现在该效果仅适用于 Internet Explorer。我在那个页面上有三张图片。前两个不是灰度的——我可以看到它们总是有颜色的（有/没有悬停效果）。第三张图像是灰度的，但是如果我将鼠标悬停在它上面，我会看到第二张图像的灰度图像。

这就是我实例化 grayScale 函数的方式：

```
<script type="text/javascript">
    jQuery(function() {
        // fade in the grayscaled images to avoid visual jump
        jQuery("[class^='wp-image-'], [class*=' wp-image-']").hide().fadeIn(1000);
    });
    // user window.load to ensure images have been loaded
    jQuery(window).load(function () {
        jQuery("[class^='wp-image-'], [class*=' wp-image-']").greyScale({
            // call the plugin with non-defult fadeTime (default: 400ms)
            fadeTime: 500,
            reverse: false
        });
    });
</script> 
```

这是 Firebug 中第二张图片的输出：

```
<div class="gsWrapper" style="position: relative; display: inline-block;">
    <img width="80" height="80" alt="" src="http://www.adomain.com/wp-content/uploads/2012/04/picture2.jpg" title="Picture" class="size-full wp-image-317 alignnone" style="display: inline;">
</div> 
```

这是 Firebug 中第三个图像的输出：

```
<div class="gsWrapper" style="position: relative; display: inline-block;">
    <img width="80" height="80" alt="" src="http://www.adomain.com/wp-content/uploads/2012/04/picture3.jpg" title="Picture 3" class="alignnone size-full wp-image-320" style="display: inline;">
    <canvas style="left: 0px; position: absolute; top: 0px;" width="80" height="80" class="gsCanvas"></canvas>
    <canvas style="left: 0px; position: absolute; top: 0px;" width="80" height="80" class="gsCanvas"></canvas>
    <canvas style="left: 0px; position: absolute; top: 0px; opacity: 1;" width="80" height="80" class="gsCanvas"></canvas>
</div> 
```

Firebug 没有显示我认为这个功能有效，但现在看起来很糟糕。发生了什么变化？如何定位错误？

我试图加载脚本`functions.php`以`wp_enque_script`避免 jQuery 冲突。此外，我将我的 jQuery 代码放在下面`wp_head()`，`header.php`并将我的调用从此处更改`$`为`jQuery`. 目前我正在使用 jQuery 1.7.2（用 1.8.2 尝试过，效果相同）。我也尝试停用所有插件，但效果仍然相同。

现在我将页面保存在 Internet Explorer 中并在 Firefox 中打开。该页面然后工作。好像跟渲染有关系？

**编辑：**

所以该插件适用`canvas`于FF。每个图像都应该有一个`canvas`图像：

```
<div class="gsWrapper" style="position: relative; display: inline-block;">
    <img width="80" height="80" alt="" src="http://www.adomain.com/wp-content/uploads/2012/04/image4.jpg" title="image4" class="alignnone size-full wp-image-1515" style="display: inline;">
    <canvas style="left: 0px; position: absolute; top: 0px; opacity: 1;" width="80" height="80" class="gsCanvas"></canvas>
</div> 
```

在我的例子中，只有最后一个图像有一个画布字段（这里最后一个图像有所有画布字段！）。所以代码被附加到错误的元素上。该插件具有以下JS代码：

```
this.each(function(index) {
    $(this).wrap('<div class="gsWrapper">');
    gsWrapper = $(this).parent();
    // ... 
```

所以首先它在它周围包裹一个元素，然后再次访问它。也许错误与这些行一起出现`index`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:25:22.740

似乎我发现了错误。该域有一个临时 URL。现在该网站上线并获得了一个新域名。该脚本发出了一个代理请求，在这里它以某种方式附加到了错误的元素上。

现在我将 HTML 中的链接更改为新域，现在它工作正常。尽管如此，代理请求似乎失败了，应该改进：

```
$.getImageData({
    url: $(this).attr('src'),
    success: $.proxy(function(image) {
        can = greyScale(image, image.width, image.height);
        if ($options.reverse) { can.appendTo(gsWrapper).css({"display" : "block", "opacity" : "0"}); }
        else { can.appendTo(gsWrapper).fadeIn($options.fadeTime); }
      }, gsWrapper),
    error: function(xhr, text_status){
      // silently fail on error
    }
}); 
```

# php - 如何从表中删除一行

> ID：12674703
> 
> 赞同：2
> 
> 时间：2012-10-01T13:56:51.277
> 
> 标签：php, jquery, dom-manipulation

我有一个 html 表，在每一行上，我想添加一个删除按钮。当用户点击它时，我想做两件事：

1）从表中删除行。2）从被删除的行中提取数据 - 一个特定的单元格，然后使用该值对将从数据库中删除记录的函数进行 ajax 调用。该函数返回一个新的项目列表，然后我将使用它重新显示同一个表。

我在stackoverflow上找到了其他人的以下帖子： [如何从jQuery中的表中删除当前行？](https://stackoverflow.com/questions/2161991/how-to-remove-current-row-from-table-in-jquery)

所以我想这解决了第一点。但我不知道如何修改帖子所选答案中的代码以允许抓取行中的 id 值，然后进行 ajax 调用。

```
 <table class="table table-bordered table-striped"  id="databaserecords">
      <thead>
          <tr>
              <th>Id</th>
              <th>Name</th>
              <th>Status</th>
              <th>Voice</th>
              <th>Jumbo</th>
              <th>Mode</th>
              <th>&nbsp;</th>
          </tr>
      </thead>
      <tbody>

          <?php foreach ($dblist as $record): ?>
              <tr>          
              <td class ='recordId'><?php echo $record['Id'] ?></td>
              <td class ='recordName'><?php echo $record['Name'] ?></td>
              <td><?php echo $record['Status'] ?></td>
              <td><?php echo $record['Voice'] ?></td>
              <td><?php echo $record['Jumbo'] ?></td>
              <td class='recordmode'><?php echo $record['Mode'] ?></td>
              <td><button id="deleteRecord">Delete Record</button></td>
            </tr>
          <?php endforeach ?>

 <script>

    $('#deleteRecord').live('click', function()  {

                //get a count of all records. only allowed to delete if you have more than one record.
                var recCount = $('#databaserecords tbody tr').length;

                if (recCount > 1)
                {
                    $thevalueIwanttoSave = $(this).closest('recordId').val();
                                alert($thevalueIwanttoSave);
                            }

    });

 </script> 
```

现在，警报总是说我的变量未定义。你能为我指出正确的方向吗？我确实知道如何编写 ajax 调用......我想我只需要帮助来从表中获取值。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:59:38.713

您的选择器不正确。

```
$thevalueIwanttoSave = $(this).parent().siblings('.recordId').text(); 
```

`closest`选择元素的最近父级（*recordId*不是父级/祖父级或按钮元素的..），并且您还错过了一个`.`for 类选择器。`val`用于获取/设置表单元素的值，对于您应该使用的 td 元素`text`或`html`方法。另请注意，**ID 必须是唯一的**（您可以使用类代替）并且`live`不推荐使用方法，您可以使用`on`方法。

```
$('#databaserecords').on('click', '.deleteRecord', function() { 

    var recCount = $('#databaserecords tbody tr').length;

    if (recCount > 1) {
        var text = $(this).parent().siblings('.recordId').text();
        alert(text);
        // $(this).closest('tr').remove()
    }

});​ 
```

*   [兄弟姐妹（）](http://api.jquery.com/siblings/)
*   [父母（）](http://api.jquery.com/parent/)
*   [最接近（）](http://api.jquery.com/closest/)
*   [文本（）](http://api.jquery.com/text/)
*   [在（）](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:00:03.270

```
$thevalueIwanttoSave = $(this).parent('tr').find('.recordId').text(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T13:58:51.277

在删除按钮的属性中添加 ID，您可以通过 jQuery 获取它。

在你的 php 循环中：

```
<button class="deleteRecord" recordID="<?php echo $record['Id'] ?>">删除记录</button>
```

在 JQuery 上

```
$(".deleteRecord").click(function() {
    var id = $(this).attr("recordID");
    ...
});
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T13:59:43.257

应该是`.recordId`，不是`recordId`

```
$thevalueIwanttoSave = $(this).closest('.recordId').val();
    alert($thevalueIwanttoSave); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-01T14:01:35.407

您需要使用 a`.`来选择具有类 recordId 的元素。还使用 text() 来获取值：

```
$thevalueIwanttoSave = $(this).siblings('.recordId').text();
alert($thevalueIwanttoSave); 
```

# haskell - 我可以在 Haskell 中作为单个 IO 操作懒惰地读取 n 个文件吗？

> ID：12674709
> 
> 赞同：5
> 
> 时间：2012-10-01T13:57:17.037
> 
> 标签：haskell, file-io, io, lazy-evaluation, lazy-sequences

如何使用恒定内存懒惰地将多个文件作为单个 ByteString 读取？

```
readFiles :: [FilePath] -> IO ByteString 
```

我目前有以下实现，但根据我从分析中看到的以及我的理解，我将以`n-1`内存中的文件结束。

```
readFiles = foldl1 joinIOStrings . map ByteString.readFile
    where joinIOStrings ml mr = do
                                l <- ml
                                r <- mr
                                return $ l `ByteString.append` r 
```

我知道这里的缺陷是我正在应用 IO 操作然后重新包装它们，所以我认为我需要的是一种在`foldl1 joinIOStrings`不应用它们的情况下替换它们的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T14:24:04.840

> 如何使用恒定内存懒惰地将多个文件作为单个 ByteString 读取？

如果您想要持续使用内存，则需要`Data.ByteString.Lazy`. 严格`ByteString`不能懒惰地读取，并且需要`O(sum of filesizes)`内存。

对于不是太多的文件，只需将它们全部`D.B.L.readFile`读取（懒惰地读取）并连接结果就可以了，

```
import qualified Data.ByteString.Lazy as L

readFiles :: [FilePath] -> IO L.ByteString
readFiles = fmap L.concat . mapM L.readFile 
```

将`mapM L.readFile`打开文件，但仅在需要时读取每个文件的内容。

如果文件数量很大，以至于操作系统允许单个进程打开文件句柄的限制可能会被耗尽，那么您需要更复杂的东西。您可以制作自己的懒惰版本`mapM`，

```
import System.IO.Unsafe (unsafeInterleaveIO)

mapM_lazy :: [IO a] -> IO [a]
mapM_lazy [] = return []
mapM_lazy (x:xs) = do
              r <- x
              rs <- unsafeInterleaveIO (mapM_lazy xs)
              return (r:rs) 
```

这样每个文件只会在需要其内容时打开，而之前读取的文件已经可以关闭。由于无法保证关闭句柄的时间，因此仍有可能会遇到资源限制。

或者您可以使用您最喜欢[`iteratee`](http://hackage.haskell.org/package/iteratee)的[`enumerator`](http://hackage.haskell.org/package/enumerator),[`conduit`](http://hackage.haskell.org/package/conduit)或任何以系统方式解决问题的软件包。它们中的每一个都有其相对于其他的优点和缺点，并且如果编码正确，则消除了意外达到资源限制的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:22:37.083

我假设您使用的是惰性字节字符串（来自`Data.ByteString.Lazy`）。可能有其他方法可以做到这一点，但一种选择是简单地使用`concat :: [ByteString] -> ByteString`：

```
import Control.Monad
import Data.ByteString.Lazy (ByteString)
import qualified Data.ByteString.Lazy as ByteString

readFiles :: [FilePath] -> IO ByteString
readFiles = fmap ByteString.concat . mapM ByteString.readFile 
```

（注意：我没有时间测试代码，但是阅读文档说这应该可以）

# dkim - 即使 DKIM TXT 记录可用，Google Apps DKIM 启动身份验证也会失败

> ID：12674712
> 
> 赞同：2
> 
> 时间：2012-10-01T13:57:27.040
> 
> 标签：dkim

我正在为我的域 jkltech.in 使用 Google Apps，我想用 DKIM 密钥签署我的电子邮件，因为我正在为我的网站使用 Google App Engine。

我已向我的 DNS 提供商注册了我的 TXT 记录，但我无法在我的 Google Apps 帐户中开始身份验证。我正在免费使用 Google Apps。我已经使用各种工具（例如 dig 和其他在线工具）验证了我的 DNS 条目，[http://www.protodave.com/security/checking-your-dkim-dns-record/](http://www.protodave.com/security/checking-your-dkim-dns-record/)

请让我知道我缺少什么，是我的 TXT 记录错误还是我的配置有其他问题，

问候，杰伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:01:17.780

这显然是一个已知问题，他们仍在努力修复。[请参阅https://productforums.google.com/d/topic/apps/FOsrXULt66Y/discussion](https://productforums.google.com/d/topic/apps/FOsrXULt66Y/discussion)上的 Google 产品论坛主题。干杯。

# sql - SQL 不同的列类型比较错误

> ID：12674714
> 
> 赞同：0
> 
> 时间：2012-10-01T13:57:44.597
> 
> 标签：sql, sql-server, string, comparison

嗨，我有一个存储过程，假设在不同表上的 2 列之间进行比较

1.  用户.ID => int
2.  Trans.ID => nvarchar

有时 Trans.ID 中的值根本不是数字，有时它是 null，这会导致尝试比较时出错

有没有办法尝试将 Trans.ID 解析为一个数字，以防它不成功返回 0？

我试过`NullIf()`了，但是当里面的值不是数字时它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:00:22.987

如果使用 sql server 你可以这样做

```
CASE WHEN ISNUMERIC(Trans.ID) = 0  then null 
else cast(Trans.ID as int) end = Users.ID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:59:54.443

假设 Trans.ID 是一个`varchar(20)`字段，可以将`Users.ID`字段转换为 varchar，用于`COALESCE`处理 NULL 值，比较如下：

```
WHERE CAST(Users.ID AS varchar(20)) = COALESCE(Trans.ID, '') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:00:01.367

您可以执行以下操作：

```
select * from users u 
inner join trans t on u.userid  = (CASE WHEN ISNUMERIC(t.id) = 1 THEN CONVERT(int, t.id) ELSE 0 END) 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:05:18.697

IsNumeric() 并不总是正确的，例如 ' - ' 和 '.' 两者都为 IsNumeric 返回 1，但会使您的查询失败。

此功能（改编自[此处](https://stackoverflow.com/a/4690444/573261)）

```
create function dbo.GetNumeric(@x varchar(10)) returns float as
begin
return
    case
    when @x is null or @x = '' then null -- blanks
    when @x like '%[^0-9e.+-]%' then null -- non valid char found
    when @x like 'e%' or @x like '%e%[e.]%' then null -- e cannot be first, and cannot be followed by e/.
    when @x like '%e%_%[+-]%' then null -- nothing must come between e and +/-
    when @x='.' or @x like '%.%.%' then null -- no more than one decimal, and not the decimal alone
    when @x like '%[^e][+-]%' then null -- no more than one of either +/-, and it must be at the start
    when @x like '%[+-]%[+-]%' and not @x like '%[+-]%e[+-]%' then null
    else convert(float,@x)
    end
end 
```

您的查询（涉及不等式）

```
where users.id >= case when IsNull(dbo.GetNumeric(trans.id),0) 
```

如果trans.id不涉及小数点

```
where user.id >= case when trans.id not like '%[^0-9]%' and trans.id >''
                      then trans.id end 
```

当然，如果它是一个简单的相等，只需将 int 转换为 varchar

```
where right(users.id,10) = trans.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T14:00:47.917

如果只是相等比较（我认为这是有道理的），我会转换`Users.ID`为`NVARCHAR`然后与`Trans.ID`.

# mysql - 防止通过使用 Mysql 触发器删除或更新记录表单

> ID：12674716
> 
> 赞同：0
> 
> 时间：2012-10-01T13:57:47.727
> 
> 标签：mysql, triggers

我正在使用 Mysql 并尝试在表上创建一个触发器，以防止删除或更新特定记录，例如我有一个表`demo`

```
id    username    password
1     dames       t312llok
2     sauce       12ff1fff1
3     hynes       5656166oo9 
```

我想阻止记录：

```
id    username    password
1     dames       t312llok 
```

通过使用触发器被删除或更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-03T15:07:44.513

如果您使用的是 MySQL 5.5 或更高版本，这很简单。

```
DELIMITER $$
DROP TRIGGER IF EXISTS demo_bd $$
CREATE TRIGGER demo_bd BEFORE DELETE ON demo FOR EACH ROW
BEGIN
  IF OLD.id = 1 THEN
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'This magical user cannot be deleted';
  END IF;
END $$
DELIMITER ; 
```

对于更新，它的代码完全相同，只是稍作调整。

```
DELIMITER $$
DROP TRIGGER IF EXISTS demo_bu $$
CREATE TRIGGER demo_bu BEFORE UPDATE ON demo FOR EACH ROW
BEGIN
  IF OLD.id = 1 THEN
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'This magical user cannot be updated';
  END IF;
END $$
DELIMITER ; 
```

另外...不要在数据库中存储密码。

# tfs - 解锁 Team Foundation Server 2010 中的文件

> ID：12674717
> 
> 赞同：2
> 
> 时间：2012-10-01T13:57:49.817
> 
> 标签：tfs, tfs-2010

在将 TFS 从一台服务器移动到另一台服务器后，面临锁定问题。

在将 TFS 移动到另一台服务器时，一些文件已检出。将 TFS 移动到另一台服务器后，这些文件由以前的服务器用户名签出。如何删除所有以前的用户名及其对文件的锁定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:32:38.703

**多种选择**

*   [更新 TFS 中的身份，以便旧用户映射到新用户](http://msdn.microsoft.com/en-us/library/ms253054.aspx)
*   将旧工作区的所有者更改为新用户（请参阅[“如何更改 TFS 工作区的所有者”](http://www.bandgap.cs.rice.edu/classes/comp410/resources/Using%20TFS/How%20to%20change%20the%20owner%20of%20a%20TFS%20workspace.aspx)）
*   使用“tf workspace /delete”删除旧工作区
*   以管理员身份使用命令“tf lock”（请参阅[​​ Undo / Unlock for Others with Team Foundation Version Control](http://weblogs.asp.net/dmckinstry/archive/2006/07/09/Undo-_2F00_-Unlock-for-Others-with-Team-Foundation-Version-Control.aspx)）

# c# - 如何从文件中删除一行而不覆盖新文件中的内容

> ID：12674721
> 
> 赞同：0
> 
> 时间：2012-10-01T13:58:09.950
> 
> 标签：c#, file, c#-4.0, file-io, c#-3.0

```
FileName="1.pdf",filepath="f:/test1"
FileName="2.pdf",filepath="f:/test2"
FileName="3.pdf",filepath="f:/test3"
FileName="4.pdf",filepath="f:/test4"
FileName="5.pdf",filepath="f:/test5"
FileName="6.pdf",filepath="f:/test6" 
```

我不想创建一个新文件。在同一个文件中覆盖是可以的

我尝试了以下。

```
var reader = File.OpenText("f:/test5");
reader. // ? 
```

我不知道在读者之后放什么。如果有任何替代方法，请为我​​提供解决方案。我只想根据唯一文件名删除特定行。如果我有 5.pdf 作为文件名，那么我需要从文件中删除或删除 "FileName="5.pdf"...line 的整行。我不想覆盖文件中的内容又是新文件了，给我一个解决办法，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:08:44.027

您不能在不重写文件的情况下从文本文件中删除一行。做这样的事情

```
string filename =
   Path.Combine(
       Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory),
       "Test1.txt");

string[] lines = File.ReadAllLines(filename);
var list = new List<string>(lines);
list.RemoveAt(4);
File.WriteAllLines(filename, list.ToArray()); 
```

* * *

编辑：

您可以找到具有特定文件名的行，如下所示：

```
int index = list.FindIndex(s => s.EndsWith("/test5\""));
// Or whatever test is appropriate.

if (index >= 0) {
    list.RemoveAt(index);
    File.WriteAllLines(filename, list.ToArray());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:07:26.180

如果您不介意使用 gnu 工具，可以使用 sed [http://en.kioskea.net/faq/1451-sed-delete-one-or-more-lines-from-a-file](http://en.kioskea.net/faq/1451-sed-delete-one-or-more-lines-from-a-file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:08:43.043

据我所知，这在技术上是不可能的，因为操作系统将创建一个新的 IO 工件。（*顺便说一下，对此不太确定*）。

但更重要的是，它*非常*危险。IO 操作可能会失败，因此您必须以某种方式保证文件操作的**一致性**。

一种可能的方法是：

*   将除要跳过的那些行之外的所有行写入新的 TEMP 文件
*   用其他临时名称重命名旧文件
*   以前一个文件的名称重命名第一个 TEMP 文件
*   删除原始文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:13:31.090

无论您使用什么实用程序或编写什么代码，操作系统总是会创建一个新文件来执行此操作。

# python - 如何在 windows 和 linux 上制作文件的完整备份副本

> ID：12674722
> 
> 赞同：2
> 
> 时间：2012-10-01T13:58:15.567
> 
> 标签：python, file, copy, backup

我想使用属于它的所有元数据制作文件的真实备份副本。

我正在搜索 lib 并找到[了 shutils](http://docs.python.org/library/shutil.html)但它并没有复制所有的元数据。

我怎样才能在linux和windows上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:30:58.923

在 Windows 上，您可以使用 win32file.BackupRead 和 BackupWrite 复制所有元数据、备用数据流、安全描述符、扩展属性等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:10:46.110

第一个问题是每个文件系统（每个家庭 ext*、fat*...）和每个系统都有自己的元数据。

在[Windows 上是](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)：

*   所有者
*   文件属性（存档，只读）
*   安全属性
*   共享属性
*   也许有些锁，天知道是什么

在 Linux 上是：

*   mod ( `chmod 0755`, 用[tar](http://unixhelp.ed.ac.uk/CGI/man-cgi?tar)保存)
*   所有者
*   团体
*   selinux 上下文（在某些系统上）

有很多问题，例如：

*   如果用户不存在怎么办
*   如果计算机上没有启用 selinux 怎么办
*   如果不允许共享怎么办
*   如何处理从 Windows 到 Linux 的转换（反之亦然）

更不用说一些可能由 Linux 中的 gnome 或 Windows 中的 applocker 创建的策略。

因此，要**回答您的问题**：没有简单的方法可以备份适用于所有系统的所有元数据（二进制文件系统副本除外）。

您的工作是根据您真正需要什么以及您可以保留其系统默认值来处理上述所有情况（以及更多情况）。

# jquery - 如何禁用jQuery多选中的所有复选框

> ID：12674726
> 
> 赞同：-4
> 
> 时间：2012-10-01T13:58:22.150
> 
> 标签：jquery, multi-select

在 jQuery 中，如何禁用多选中的所有复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:09:00.667

```
$("input[type=checkbox]:not(:checked)").attr("disabled", "disabled") 
```

这很好用，但考虑将操作限制在页面的给定部分可能会起作用。取消选中所有复选框现在可能没问题，但稍后您可能会在页面（或其他任何内容）中添加更多内容，因此取消选中所有复选框可能不正确或错误。

为每个复选框指定一个类，或者您可以使用它来限制对给定容器的操作

```
$(".example_container").find("input[type=checkbox]:not(:checked)").attr("disabled", "disabled") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:00:36.843

```
$("input[type=checkbox]:not(:checked)").attr("disabled", "disabled") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:00:51.367

```
$('input[type=checkbox]:not(:checked)').attr('disabled', 'disabled'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:02:40.413

利用

```
 $("input:not(:checked)").attr("disabled", "disabled"); 
```

# c++ - 函数不会接受 auto_ptr 的迭代器

> ID：12674735
> 
> 赞同：2
> 
> 时间：2012-10-01T13:58:42.643
> 
> 标签：c++, standard-library, auto-ptr, huffman-code

我写了一些我试图修复的有缺陷的 Huff 压缩代码。我做的第一件事是将指针切换到`auto_ptr`（我没有使用另一个智能指针是有原因的）。我创建了一个向量，`auto_ptr`但是当我尝试将 auto_ptr 传递给函数时，`*(vector.begin())`它不起作用。

我试图将所有权传递给我的函数代码（它是作为 set_node 的成员函数）：

```
struct Node {
    int weight;
    char litteral;
    auto_ptr<Node> childL;
    auto_ptr<Node> childR;
    void set_node(int w, char l, auto_ptr<Node>& L(), auto_ptr<Node>& R()){
        weight = w;
        litteral = l;
        childL = L;
        childR = R;
    }
}; 
```

这就是我尝试调用它的方式（p 是一个节点）：

```
p.set_node(w, '*', *nodes->begin(), *(nodes->begin()+1)); 
```

这是向量的声明方式：

```
vector<auto_ptr<Node> >* nodes = new vector<auto_ptr<Node> >; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T14:05:39.193

你**不能**在. `std::auto_ptr`_ `std::vector`您将需要找到替代方案。问题是没有*副本*。`std::auto_ptr`复制构造函数在某种意义上是一种*移动*操作，它从原始自动指针中窃取内容并将其移动到新指针中。该操作要求源是非常量的`std::auto_ptr`（因为它从中删除了托管对象）。

# debian - Debian 上的 TYPO3：安装工具“class.t3lib_flashmessage.php”后出错

> ID：12674736
> 
> 赞同：0
> 
> 时间：2012-10-01T13:58:43.543
> 
> 标签：debian, typo3

我试图在我的 Debian 服务器上运行 TYPO3。

现在，在我运行安装工具和`1-2-3 Wizard`.

> 致命错误：require()：打开失败需要'/var/www/vipkaisers/t3lib/class.t3lib_flashmessage.php'（include_path='/var/www/vipkaisers/typo3/contrib/pear/:.:/usr/share /php:/usr/share/pear') 在第 5063 行的 /var/www/typo3/versions/typo3_src-4.5/t3lib/class.t3lib_div.php

有人可以帮忙吗？是否需要更多信息？

问候， 马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:03:51.603

问题没有解决，但我重新安装了我的 debian 服务器并手动配置了 apache2 和其他。我认为我的问题来自配置错误的服务器设置。

问候， 马克斯

# javascript - Ext JS xtemplate 在嵌套的 JSON 上循环

> ID：12674739
> 
> 赞同：0
> 
> 时间：2012-10-01T13:58:57.623
> 
> 标签：javascript, json, templates, extjs

我看不出为什么这个视图中的表头没有生成：

[http://jsfiddle.net/Jd6Lh/](http://jsfiddle.net/Jd6Lh/)

我以为您声明了“for”以更改上下文节点，因此从提供的示例中，我希望输出表头。

你能告诉我我做错了什么吗？我是 Ext JS 的新手，所以刚刚开始了解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:05:26.753

您在 Ext 对象 (Ext.Template) 上调用了错误的方法——请尝试调用 Ext.XTemplate()。

# jenkins - 每当构建 SNAPSHOT 依赖项时构建 - Jenkins 上的 Gradle

> ID：12674744
> 
> 赞同：6
> 
> 时间：2012-10-01T13:59:20.107
> 
> 标签：jenkins, gradle, artifactory

在 Jenkins 上构建 maven 项目时，可以指定构建触发器：

**构建 SNAPSHOT 依赖项时构建**

这是开箱即用的。

我有一个 Gradle 项目，我在 Jenkins（1.483 版）上使用 gradle（1.2 版）构建，使用 Artifactory 作为我的二进制存储。但找不到相同的选项。Jenkins 是否有任何 Gradle 插件可以启用此功能，或者是否可以在 .gradle 文件中全局配置它？

# android - 如果使用 robolectric 的某些方法没有找到阴影方法，我该怎么办？

> ID：12674747
> 
> 赞同：0
> 
> 时间：2012-10-01T13:59:35.427
> 
> 标签：android, testing, shadow, robolectric

我正在使用[Robolectric](http://pivotal.github.com/robolectric/)测试 android 代码，发现有一些测试失败，因为有些方法没有影子方法。

在我的逻辑代码中，我从另一个活动中检索了位图：

```
Bitmap bitmap = getBitmapFromResult(data);
BitmapDrawable drawable = new BitmapDrawable(getResources(), bitmap);
imageView.setImageDrawable(drawable); 
```

后来在另一种方法中，我从 中获取位图`imageView`，并将其保存到文件中：

```
BitmapDrawable drawable = (BitmapDrawable)imageView.getDrawable();
Bitmap bitmap = drawable.getBitmap();
// save to file
bitmap.compress(...); 
```

但是最后一行在测试时会抛出 NullPointerException 。

我调试了代码，发现当测试代码使用 robolectric 运行时，`drawable`它`ShadowBitmapDrawable`包含一个`null`位图。所以`drawable.getBitmap()`返回一个`null`导致异常的。

然后我启用了登录我的测试代码：

```
Robolectric.logMissingInvokedShadowMethods(); 
```

在控制台中发现一行我认为导致我的测试代码失败：

```
No Shadow method found for BitmapDrawable.<init>(android.content.res.Resources, android.graphics.Bitmap) 
```

我现在能做什么？是否可以添加阴影方法来修复它以及如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:04:52.440

从 github 克隆源代码：[https ://github.com/pivotal/robolectric/](https://github.com/pivotal/robolectric/)

将阴影方法添加到`ShadowBitmapDrawable.java`：

```
public void __constructor__(android.content.res.Resources res, Bitmap bitmap) {
    this.bitmap = bitmap;
} 
```

然后编译它并打包到一个jar中。它是固定的。

# c++ - 如何知道向量的内部数组何时被重新分配？

> ID：12674749
> 
> 赞同：3
> 
> 时间：2012-10-01T13:59:37.857
> 
> 标签：c++, std, stdvector

我有一个`std::vector`包含很多元素。由于向量很大，我将指向某些特定元素的指针存储在另一个向量中，以便能够更快地访问它们。但是随着向量的增长，有时它的内部容器会被重新分配，导致我所有的指针都变得无效。

有没有办法知道这种情况何时发生？这样我可以更新另一个列表中的指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T14:12:19.527

你不应该存储指针，你应该存储索引：

即，而不是：

```
var1 = &vector[0];
var2 = &vector[13]; 
```

和访问`*var1`，`*var2`

你应该存储：

```
i1 = 0;
i2 = 13; 
```

和访问`vector[i1]`，`vector[i2]`

* * *

注意：如果您使用修饰符方法，您仍然应该小心：

*   `pop_back()`（这使得最后一个位置无效）
*   `erase(i)`（移动所有大于 i 的索引）
*   ETC ...

（你的第一种方法有同样的警告）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T14:08:59.610

也许你应该看看 boost::container::stable_vector: [http://www.boost.org/doc/libs/1_51_0/doc/html/boost/container/stable_vector.html](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/container/stable_vector.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:07:09.490

您可以存储指向各个元素的指针，而不是将元素直接存储在大向量中。因此，`std::vector<int>`您使用 a 而不是 a `std::vector<int *>`。即使向量重新分配其内容，数据本身的地址也不会改变，因此指向它的其他指针将保持有效。但是，这需要您创建输入到向量中的每个元素`new`，然后手动`delete`删除任何数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:09:22.583

我道歉，我的评论完全错了。`N3337 23.3.6.3 vector capacity paragraph 5`：

> 备注：重新分配使所有引用序列中元素的引用、指针和迭代器无效。保证在调用之后的插入过程中不会发生重新分配，`reserve()`直到插入会使向量的大小大于 的值`capacity()`。

# ruby-on-rails - 如何使用 heroku 获得工作太阳黑子轨道

> ID：12674750
> 
> 赞同：0
> 
> 时间：2012-10-01T13:59:39.027
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

嗨，我正在使用 sunspot_rails gem 进行搜索。它在我的本地机器上工作正常，但使用 heroku 配置它时出现问题。我有这个错误

```
 Errno::ECONNREFUSED (Connection refused - connect(2)): 
```

这是我的 sunspot.yml 设置

```
 production:
    solr:
      hostname: index.websolr.com
      port: 8983
      log_level: WARNING

  development:
    solr:
      hostname: localhost
      port: 8982
      log_level: INFO 
```

当我用这个命令启动太阳黑子太阳能时

```
 heroku run rake sunspot:solr:start 
```

请帮忙..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:20:39.047

您尝试使用的命令会触发 solr 服务器，但您正在使用配置中所述的 websolr。

除了不依赖 websolr 的本地，您不需要运行该命令。

根据文档， sunspot_rails 处理 WEBSOLR_URL 如果该环境变量由插件正确设置，您可以使用“heroku config”检查。

此外，[https://github.com/outoftime/sunspot/blob/master/sunspot_rails/lib/sunspot/rails/configuration.rb#L312](https://github.com/outoftime/sunspot/blob/master/sunspot_rails/lib/sunspot/rails/configuration.rb#L312)告诉我们，如果您在生产密钥下的 yml 中不提供任何 url 或主机它将回退到该环境变量。因此，您可能只需要从那里擦除主机名和端口，它应该可以按预期工作。

# php - 对低敏感用户帐户的双盐身份验证有何看法？

> ID：12674756
> 
> 赞同：3
> 
> 时间：2012-10-01T13:59:54.190
> 
> 标签：php, codeigniter, authentication, ion-auth

我目前正在开发一个需要用户帐户的网络项目。该应用程序是服务器端的[CodeIgniter](http://ellislab.com/codeigniter/)，因此我使用[Ion Auth](http://benedmunds.com/ion_auth/)作为身份验证库。

我之前写过一个身份验证系统，我使用了 2 个盐来保护密码。一个是服务器范围的盐，它作为 .htaccess 文件中的环境变量，另一个是在用户注册时创建的随机生成的盐。

这是我在该身份验证系统中用于对密码进行哈希处理的方法：

```
 $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    //create a random string to be used as the random salt for the password hash
    $size = strlen($chars);
    for($i = 0; $i < 22; $i++) {
        $str .= $chars[rand(0, $size - 1)];
    }

    //create the random salt to be used for the crypt
    $r_blowfish_salt = "$2a$12$" . $str . "$";

    //grab the website salt
    $salt = getenv('WEBSITE_SALT');

    //combine the website salt, and the password
    $password_to_hash = $pwd . $salt;

    //crypt the password string using blowfish
    $password = crypt($password_to_hash, $r_blowfish_salt); 
```

我不知道这是否有漏洞，但无论如何，我转向 Ion Auth 以获得更完整的功能集以与 CI 一起使用。

我注意到 Ion 仅使用一个盐作为其散列机制的一部分（尽管确实建议设置 encryption_key 以保护数据库会话。）

将存储在我的数据库中的信息包括姓名、电子邮件地址、国家/地区位置、一些注释（建议不要包含敏感信息）以及 Facebook、Twitter 或 Flickr 帐户的链接。基于此，我不相信我有必要在我网站的安全页面上建立 SSL 连接。

我的问题是，为什么只有 1 种盐被用作 Ion Auth 库的一部分，有什么特别的原因吗？是否暗示我在它提供的功能之前编写了自己的额外加盐，或者我错过了什么？

此外，是否值得使用 2 个盐，或者一旦攻击者拥有随机盐和散列密码，所有赌注都没有了？（我认为不是，但值得检查一下我是否什么都不担心......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:16:48.980

有人可能以某种方式找到注入代码的方法，或者您错误地将目录打开以供查看，或者有人发现注入黑客并且可以看到系统盐文件或用户数据的论点并没有那么令人信服的理由使用双盐。如果有这样的任何一个，你确实比用户加盐和加密密码列表更担心！

综上所述，双盐解决方案确实更加安全，特别是如果您以外的其他人有可能在您的代码中看到系统盐。想想可能承包商或同事离开的情况。如果他们知道使用的盐和盐渍模式/算法，他们可以创建彩虹表并将其用于您的站点。将第二个随机盐添加到用户记录中可以防止这种情况。

这一切都是关于权衡您的安全措施的价值与某人需要通过合理努力来获得您的安全措施的价值。此外，完全不使用盐或根本不加密而不是完全疏忽比存储我们的基本数据的许多其他不太安全的地方更好。如果没有信用信息、医疗记录、社交安全信息。数字，只是普通的用户信息（电子邮件、地址等），而且你没有计划引入这些数据，单盐可能就足够了。如果您现在不能 100% 确定地做出这个判断，那么更安全的选项会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:17:25.340

这是因为 Ion_Auth 使用 bcrypt - 所以你通常不需要做更多的事情。

此外 - 您可以配置“random_rounds”，这有点像配置中的随机加盐（在一定程度上）。

编辑：您可以[查看此 SO 线程](https://stackoverflow.com/q/1561174/1317935)以获取有关 bcrypt 和其他类型加密的更多详细信息

# twitter-bootstrap - Backbone.Marionette，网格中的收集项目（无表）

> ID：12674757
> 
> 赞同：2
> 
> 时间：2012-10-01T13:59:54.503
> 
> 标签：twitter-bootstrap, marionette

我试图弄清楚如何有效地将模型集合移动到视图中的网格模式。

这是一个关于简单集合的行/列原理的问题。

假设我有以下*Collection*：

```
[
    {id: 1, title="test 1"},
    {id: 2, title="test 2"},
    {id: 3, title="test 3"},
    {id: 4, title="test 4"},
    {id: 5, title="test 5"},
    {id: 6, title="test 6"}
] 
```

我希望它显示为：

网格：

“测试 1” “测试 2” “测试 3”

“测试 4” “测试 5” “测试 6”

在 twitter 引导程序中，我会这样写：

```
<div id="myContainer">
    <div class="row-fluid">
        <div class="span4">test 1</div>
        <div class="span4">test 2</div>
        <div class="span4">test 3</div>
    </div>
    <div class="row-fluid">
        <div class="span4">test 4</div>
        <div class="span4">test 5</div>
        <div class="span4">test 6</div>
    </div>
</div> 
```

我尝试覆盖我的 appendHtml `CompositeView`：

```
appendHtml: function(compositeView, itemView, index){
    ... 
    if ((index % 3) === 0  || lastelement){
        ... append
    }
} 
```

更直接地这个实现：

```
 this.cacheColumns.push(itemView.el);

                    // If current index (+1) has rest of 0 when we devide it by column amount 

                    // OR

                    // End of array loop.

                    if (((index+1) % this.colAmount) === 0 || index == this.collection.length-1){

                            var row = $('<div class="row-fluid" />');

                            for(var i = 0; i < this.cacheColumns.length; i++){

                                    row.append(this.cacheColumns[i]);                               

                            }

                            this.cacheColumns = [];

                            collectionView.$(".jsListImages").append(row);

                    } 
```

然而，这种方法在添加/删除项目时会产生很多错误，奇怪的错误。

是否应该创建一个生成 3 个项目集合的新集合的方法？

所以而不是：

```
Collection -> Item 
```

我可以

```
Collection -> Collection -> Item 
```

现在我也尝试了这个实现，添加/删除项目时没有按预期工作，使用后退/前进箭头进入特定页面时也生成了未知项目：

```
View.ImageMultiUploader = Marionette.CompositeView.extend({
    template : '#common-multi-imageuploader-composite',

    itemView : ImageMultiItem,

    colAmount : 3, // How many columns we got.

    cacheColumns : [], // appendHtml uses this. don't change.

    /**

     * Custom implementation of appendHtml, using this, we can use row/column

     * principle on a collection. 

     */

    appendHtml : function(collectionView, itemView, index) {

        this.cacheColumns.push(itemView.el);

        // If current index (+1) has rest of 0 when we devide it by column amount 

        // OR

        // End of array loop.

        if (((index + 1) % this.colAmount) === 0
                || index == this.collection.length - 1) {

            var row = $('<div class="row-fluid" />');

            for ( var i = 0; i < this.cacheColumns.length; i++) {

                row.append(this.cacheColumns[i]);

            }

            this.cacheColumns = [];

            collectionView.$(".jsListImages").append(row);

        }

    },

    onRender : function() {

        console.log(this.collection)

    }

}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T20:56:59.460

我遇到了几乎相同的问题，@g00fy 的回答让我指出了正确的方向。在早期的迭代中，我在我的集​​合中使用 parse() 方法将数据重新格式化为“行”和“列”组。我后来遇到的是想将相同的数据集用于不同的用途——但我的解析解决方案打破了这一点。

我没有创建第二个集合 + 提取，而是在外部视图初始化期间修改数据。以下是相关代码：

```
Views.GridRow = Backbone.Marionette.CompositeView.extend({
    template: "#row-template",
    itemView: Views.GridItem,
    itemViewContainer: "div.row-fluid",
    initialize: function() {
        this.collection = new Backbone.Collection(_.toArray(this.model.attributes));
    }
});

Views.Grid = Backbone.Marionette.CompositeView.extend({
    template: "#grid-template",
    itemView: Views.GridRow,
    itemViewContainer: "section",
    initialize: function() {
        var grid = this.collection.groupBy(function(list, iterator) {
            return Math.floor(iterator / 4); // 4 == number of columns
        });
        this.collection = new Backbone.Collection(_.toArray(grid));
    }
}); 
```

这是一个工作演示：

[http://jsfiddle.net/bryanbuchs/c72Vg/](http://jsfiddle.net/bryanbuchs/c72Vg/)

我想不通的是如何将分组数据从网格传递到行，因为我可以轻松访问（“this.collection”）。我最终做的是将数据移动到新的通用 Collection 对象中，并且在行中我从模型属性中获取它。不是说这是要走*的路，但它确实有效。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:58:17.747

您可能想要使用：*CompositeView (TableView)* -> *CompositeView (RowView)* -> *ItemView (ColumnView)*

第一个*CompositeView (TableView)*将渲染表格并将 3 个对象从集合传递到*RowView*。

您需要更改*TableView*中的一些内部结构以将 3 个对象而不是一个对象传递给*RowView*，或者您可以重组集合以按行分组，例如：

```
[
    [{id: 1, title="test 1"},        {id: 2, title="test 2"},        {id: 3, title="test 3"}],
    [{id: 4, title="test 4"},        {id: 5, title="test 5"},        {id: 6, title="test 6"}]
] 
```

第二个*CompositeView (RowView)*将渲染行和*ItemView中的每个对象*

# c# - WCF 中的双向连接

> ID：12674764
> 
> 赞同：0
> 
> 时间：2012-10-01T14:00:13.133
> 
> 标签：c#, winforms, wcf, reference

我正在创建一个简单的通知程序，并为此使用 WCF。在本程序中，两个用户使用 IP 地址相互连接。当他们连接时，如果每个用户填写一个文本框并按下回车，其他用户将通知。

为此，我在解决方案（服务器和客户端）中有两个项目 A 和 B，我成功地建立了从 A 到 B 的连接。

为此，我将 B 的引用添加到 A 中。

现在我想这样做是为了从 B 到 A 的连接。但是当我想将 A 的引用添加到但我得到

循环参考错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:05:23.693

首先，您必须确定是否有多个客户端需要连接到您在服务器上运行的程序。如果是这样，您必须为您的客户端应用程序添加服务引用或创建代理。如果您希望您的服务器将消息“推送”到您的客户端应用程序，您必须`callback`从客户端注册一个到您的 WCF 服务。请阅读[此](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)链接以获取有关 WCF 回调的更多信息。

# ruby - 允许用户为我的班级创建插件，如何正确扩展它？

> ID：12674765
> 
> 赞同：0
> 
> 时间：2012-10-01T14:00:15.240
> 
> 标签：ruby

我有一个类，我希望其他开发人员能够创建模块来扩展我的类并给它更多`instance variables`。

如何根据特定文件夹中的文件自动在我的类中包含模块？即加载所有文件并将它们作为我的课程的模块包含在内

我怎样才能做到这一点并以某种方式避免方法命名冲突？我在想我可以在初始化方法中传递插件的名称，然后这样做：

```
class MyClass
  def initialize(plugin_name=nil)
  end

  def method_missing(method_name)
    "#{plugin_name}".send(method_name)
  end
end 
```

理论上这样的工作是否可行，请在method_missing中提供帮助，因为我以前从未写过。我试图基本上指定一个特定的插件名称以避免任何名称冲突。

或者我应该在包含插件时在方法冲突时输出错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:36:27.773

让外部代码在你的类中融合听起来很危险，并且正如你所猜测的那样会导致名称冲突。它还可能导致意外行为，因为您允许外部代码与您的类内部发生混乱。

处理插件的最佳方法是封装将被替换的行为。让我们举个例子：

假设您正在构建一个 Logger，我们可以想象您可以创建插件来指定将写入日志的位置。

然后，您可以创建以下类：

```
class Logger 
   def initialize(store)
     @store = store 
   end

   def info(message)
     @store.write(:info, message) 
   end 
 end 

class StandardOutputStore
  def write(level, message) 
    puts "#{level}: #{message}" 
  end 
end 

class FileStore
  def initalize(filename)
    @filename = filename
  end

  def write(level, message)
    File.open(@filename, "a") do |file|
      file.write("#{level}: #{message}") 
    end
  end
end 
```

然后你可以通过这种方式实例化正确的插件：

```
logger = Logger.new(StandardOutputStore.new)
logger.warn "hello"

logger = Logger.new(FileStore.new("/tmp/log"))
logger.warn "hello" 
```

这种做事方式提供了模块化、更大的灵活性，并且比使用外部代码重载类中的内容更可靠。

加载在目录中找到的模块是玩弄 Dir.glob 和 require 的问题。要探索在您的插件目录下找到的内容，您可以强制您的用户在模块中编写插件，例如 Foo::Plugins::FileStore 并在需要文件后检查 Foo::Plugins 模块中存在哪些常量。有关详细信息，请参阅[http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-constants](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-constants)。

编辑：由于您向 ERB 模板提供了方法，因此您没有任何要映射的接口，因此您可以执行以下操作：

插件采用以下形式：

```
module Plugins
  module Emoticons
    def smile
        ":-)"
    end
  end
end 
```

然后，您可以使用以下内容加载它们：

```
Dir["/plugins/*.rb"].each {|file| require file } 
```

并包含它们，因为 TemplateMethods 是一个包含在您的 ERB 模板上下文中的模块。

```
 Plugins.constants.each do |constant|
   mod = Plugins.const_get constant
   TemplateMethods.send(:include, mod)
 end 
```

使用 send 不是很优雅，我建议在 TemplateMethods 上构建一个封装整个事物的类方法，例如 TemplateMethods.load_plugins_method！这里的爆炸会警告动态模块包含所做的侵入性操作。

那应该做的工作:)

# c# - 为什么在发布时 Visual Studio 2012 中会缺少“更新数据库”？

> ID：12674771
> 
> 赞同：1
> 
> 时间：2012-10-01T14:00:42.710
> 
> 标签：c#, .net, entity-framework, visual-studio-2012, one-click-web-publishing

我正在尝试将应用程序部署到我的网络服务器并且一切正常，除了它不更新远程数据库。

使用新的演示 MVC 项目，您可以在发布时选择“更新数据库”。由于某种原因，当我想发布自己的 MVC 项目时，该选项不可用。

为什么这个选项不显示？

*   我正在使用 EF（数据库优先）
*   我在连接字符串字段下收到警告：为了发布代码优先模型，您必须启用 EF 代码优先迁移。（*虽然这个项目不应该先使用代码*）
*   Web Deploy 3.0 和 dbDacFx 提供程序安装在服务器上

-- 编辑 -- 我现在重新创建了项目，并且更新数据库一直显示*，直到第一次 web 发布*。然后它就会消失并显示警告*，以便发布代码优先模型，您必须启用 EF 代码优先迁移*。（虽然我没有先使用代码，我先使用数据库）这是VS中的错误还是我做错了什么？

--FIX-- 我通过在 web.config 中添加另一个指向我的数据库的连接字符串（没有 EF 干扰）使它工作：`<add name="DeployCode" connectionString="Data Source=(localdb)\Projects;Initial Catalog=xxxxx;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False;" providerName="System.Data.SqlClient" />`

# java - 在运行时添加和移动组件 Java

> ID：12674772
> 
> 赞同：0
> 
> 时间：2012-10-01T14:00:42.863
> 
> 标签：java, swing, button, label

我想在**运行时**添加、移动和设置组件的属性（字体和旋转） 。

换句话说，我需要添加一个按钮、一个标签、使用鼠标拖动它们并在运行时设置组件的属性。是否有任何示例 Java swing 或类似的？

**这是我的代码** **：**

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.AffineTransform;
import java.awt.image.AffineTransformOp;
import java.awt.image.BufferedImage;
import java.awt.image.BufferedImageOp;
import java.io.File;
import java.sql.SQLException;
import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.LineBorder;

public class prova extends JFrame implements MouseMotionListener,MouseListener{

    //*************** INIZIALIZZAZIONE VARIABILI  ***************************  

Checkbox CB=new Checkbox("Label",true);
Button BP=new Button("BUTTON_1");
Button B=new Button("OK");
JComboBox combo1=new JComboBox();
JMenuBar menuBar;
int app=0;
static int anglePeso=0;
static int angleTara=0;
ImageIcon ic;
Border border = LineBorder.createBlackLineBorder();
static int pesoX=184;
static int pesoY=91;
static boolean taraVisible=false;
static boolean pesoVisible=false;
static boolean logo1Visible=false;
static boolean BarCodeVisible=false;  
static String font="";
static String rot="";
Label societa=new Label ("Società");
Label importo=new Label ("Importo");
Label nome=new Label("Nome Prodotto");
static int logo1X=250;
static int logo1Y=90;
static Component C;
static int label1X=183;
static int label1Y=91;
static int taraX=100; 
//TextField TF=new TextField(10);
static Panel P=new Panel();
//List TA=new List();
boolean b1=false;
int c1=0;int c2=0;
static JLabel logo2=new JLabel("Logo2");
  static int aa=0;

  static int importoX=0;
  static int importoY=0;

 public static boolean isBarCodeVisible() {
        return BarCodeVisible;
    }

    public static void setBarCodeVisible(boolean BarCodeVisible) {
        prova.BarCodeVisible = BarCodeVisible;
    }

    public static Component getC() {
        return C;
    }

    public static void setC(Component C) {
        prova.C = C;
    }

    public static int getAnglePeso() {
        return anglePeso;
    }

    public static void setAnglePeso(int anglePeso) {
        prova.anglePeso = anglePeso;
    }

 static ImageIcon immLogo1;

    public JLabel getBarcode() {
        return barcode;
    }

    public void setBarcode(JLabel barcode) {
        this.barcode = barcode;
    }

    public static ImageIcon getImmLogo1() {
        return immLogo1;
    }

    public static void setImmLogo1(ImageIcon immLogo1) {
        prova.immLogo1 = immLogo1;
    }

    public static void setFont(String font) {
        prova.font = font;
    }

    public static String getRot() {
        return rot;
    }

    public static void setRot(String rot) {
        prova.rot = rot;
    }

    public static boolean isPesoVisible() {
        return pesoVisible;
    }

    public static void setPesoVisible(boolean pesoVisible) {
        prova.pesoVisible = pesoVisible;
    }

    public static boolean isTaraVisible() {
        return taraVisible;
    }

    public static void setTaraVisible(boolean taraVisible) {
        prova.taraVisible = taraVisible;
    }

static JLabel label1=new JLabel("Peso"){

protected void paintComponent(Graphics g) {
Graphics2D g2 = (Graphics2D)g;
g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
RenderingHints.VALUE_ANTIALIAS_ON);
AffineTransform aT = g2.getTransform();
Shape oldshape = g2.getClip();
double x = getWidth()/2.0;
double y = getHeight()/2.0;
aT.rotate(Math.toRadians(anglePeso), x, y);
// g2.transform(aT);
g2.setTransform(aT);
g2.setClip(oldshape);
super.paintComponent(g);
}
};
Label data=new Label("Data");
static JLabel tara=new JLabel("Tara"){

        protected void paintComponent(Graphics g) {
Graphics2D g2 = (Graphics2D)g;
g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
RenderingHints.VALUE_ANTIALIAS_ON);
AffineTransform aT = g2.getTransform();
Shape oldshape = g2.getClip();
double x = getWidth()/2.0;
double y = getHeight()/2.0;
aT.rotate(Math.toRadians(angleTara), x, y);
// g2.transform(aT);
g2.setTransform(aT);
g2.setClip(oldshape);
super.paintComponent(g);
}
};
static JLabel logo1=new JLabel("Logo1");

    public static JLabel getTara() {
        return tara;
    }

    public static void setTara(JLabel tara) {
        prova.tara = tara;
    }
static JLabel barcode=new JLabel ("Bar Code");/*{

protected void paintComponent(Graphics g) {
Graphics2D g2 = (Graphics2D)g;
g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
RenderingHints.VALUE_ANTIALIAS_ON);
AffineTransform aT = g2.getTransform();
Shape oldshape = g2.getClip();
double x = getWidth()/2.0;
double y = getHeight()/2.0;
aT.rotate(Math.toRadians(angle), x, y);
// g2.transform(aT);
g2.setTransform(aT);
g2.setClip(oldshape);
super.paintComponent(g);
}
};
*/

    public static JLabel getLogo1() {
        return logo1;
    }

    public static void setLogo1(JLabel logo1) {
        prova.logo1 = logo1;
    }

    public static boolean isLogo1Visible() {
        return logo1Visible;
    }

    public static void setLogo1Visible(boolean logo1Visible) {
        prova.logo1Visible = logo1Visible;
    }

    public static int getLogo1X() {
        return logo1X;
    }

    public static void setLogo1X(int logo1X) {
        prova.logo1X = logo1X;
    }

    public static int getLogo1Y() {
        return logo1Y;
    }

    public static void setLogo1Y(int logo1Y) {
        prova.logo1Y = logo1Y;
    }

    public static int getTaraX() {
        return taraX;
    }

    public static void setTaraX(int taraX) {
        prova.taraX = taraX;
    }

    public static int getTaraY() {
        return taraY;
    }

    public static void setTaraY(int taraY) {
        prova.taraY = taraY;
    }
static int taraY=90;

    public int getLabel1X() {
        return label1X;
    }

    public void setLabel1X(int label1X) {
        this.label1X = label1X;
    }

    public int getLabel1Y() {
        return label1Y;
    }

    public void setLabel1Y(int label1Y) {
        this.label1Y = label1Y;
    }

public prova(){

}

public prova(String titlu)
{
super(titlu);
}
void init(int b,int h, String [] par) throws ClassNotFoundException, SQLException
{
setLayout(null);

System.out.println("****************COORINATE PESO: "+label1X+" "+label1Y);

menuBar = new JMenuBar();
JMenuBar menubar = new JMenuBar();
  JMenu filemenu = new JMenu("File");
  filemenu.add(new JSeparator());
  JMenu editmenu = new JMenu("Edit");
  editmenu.add(new JSeparator());
  JMenuItem fileItem1 = new JMenuItem("New");
  JMenuItem fileItem2 = new JMenuItem("Open");
  JMenuItem fileItem3 = new JMenuItem("Close");
  fileItem3.add(new JSeparator());
  JMenuItem fileItem4 = new JMenuItem("Save");
  JMenuItem editItem1 = new JMenuItem("Cut");
  JMenuItem editItem2 = new JMenuItem("Copy");
  editItem2.add(new JSeparator());
  JMenuItem editItem3 = new JMenuItem("Paste");
  JMenuItem editItem4 = new JMenuItem("Insert");
  filemenu.add(fileItem1);
  filemenu.add(fileItem2);
  filemenu.add(fileItem3);
  filemenu.add(fileItem4);
  editmenu.add(editItem1);
  editmenu.add(editItem2);
  editmenu.add(editItem3);
  editmenu.add(editItem4);
  menubar.add(filemenu);
  menubar.add(editmenu);
  setJMenuBar(menubar);
  //setSize(400,400);
  //setVisible(true);

fileItem4.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                System.out.println("Cliccato Save ");
                 punti();
                setVisible(false);
            }
        });
InserimentoDB is=new InserimentoDB();

Image im=is.getImage("select immagine from etichette where id= 75");
ic=new ImageIcon(im);

P.setBackground(Color.red);

String[] mm=new String [4];

mm[0]="0";
mm[1]="90";
mm[2]="180";
mm[3]="270";

        combo1.setModel(new DefaultComboBoxModel(mm) {});

   combo1.addMouseMotionListener(this);
combo1.addMouseListener(this);  

combo1.setLocation(200,100);combo1.setSize(80,40);
//add(combo1);

        System.out.println("LabelX: "+label1X);
        System.out.println("LabelY: "+label1Y);

     // label1.getParent().repaint();

/*
l.addMouseMotionListener(this);
l.addMouseListener(this);

l1.addMouseMotionListener(this);
l1.addMouseListener(this);

l2.addMouseMotionListener(this);
l2.addMouseListener(this);

l3.addMouseMotionListener(this);
l3.addMouseListener(this);

*/
for (int i=0; i<par.length; i++){

    System.out.println("Parametri ricevuti "+par[i]);

}

//TA.addMouseMotionListener(this);
//TA.addMouseListener(this);
B.addMouseMotionListener(this);
B.addMouseListener(this);
P.addMouseMotionListener(this);
P.addMouseListener(this);
CB.addMouseMotionListener(this);
CB.addMouseListener(this);

if (par[6].equalsIgnoreCase("logo1")){

    if(logo1Visible){

        System.out.println("*******LOGO1: "+immLogo1);
       // logo1.setIcon(immLogo1);
    logo1.addMouseMotionListener(this);
    logo1.addMouseListener(this);

  //  System.out.println("Imm Logo1: "+immLogo1.getDescription());

    logo1.setIcon(ic);

    logo1.setLocation(logo1X,logo1Y);

    //label1.setLocation(pesoX,pesoY);
    logo1.setSize(384,160);
    add(logo1);

    }

}

if (par[0].equalsIgnoreCase("peso")){

    if(pesoVisible){

       // label1.setBorder(border);
    label1.addMouseMotionListener(this);
    label1.addMouseListener(this);

    label1.setBorder(BorderFactory.createEtchedBorder());

    //label1.setFont(font);

    label1.setLocation(label1X,label1Y);

    //label1.setLocation(pesoX,pesoY);
    label1.setSize(100,20);
   // label1.setIcon(immLogo1);
    add(getContent());
    //add(getCombo());

    label1.setName("peso");

    add(label1);
    repaint();

    }

}

if (par[1].equalsIgnoreCase("tara")){

    if(taraVisible){

    tara.addMouseMotionListener(this);
    tara.addMouseListener(this);
    //tara.setLocation(49,130);

     tara.setBorder(BorderFactory.createEtchedBorder());
    tara.setLocation(taraX,taraY);
    tara.setSize(100,20);
    tara.setName("tara");
    add(tara);
    repaint();
    }
}

if (par[2].equalsIgnoreCase("importo")){

    importo.addMouseMotionListener(this);
    importo.addMouseListener(this);
    importo.setLocation(44,91);importo.setSize(100,20);
    importo.setName("IMPORTO");

    add(importo);
}

if (par[3].equalsIgnoreCase("bar code")){

    if(BarCodeVisible){

    barcode.addMouseMotionListener(this);
    barcode.addMouseListener(this);

    ImageIcon icon =  new ImageIcon("/home/max/Downloads/ce.jpg");
    barcode.setIcon(icon);

    barcode.setLocation(81,223);barcode.setSize(284,177);

    add(barcode);
    }
}

if (par[4].equalsIgnoreCase("data")){

    data.addMouseMotionListener(this);
    data.addMouseListener(this);
   // data.setLocation(184,177);
    data.setSize(100,20);
    data.setName("data");
    add(data);
}

if (par[5].equalsIgnoreCase("nome prodotto")){

    nome.addMouseMotionListener(this);
    nome.addMouseListener(this);
    nome.setLocation(43,186);nome.setSize(100,20);

    add(nome);
}

ImageIcon icon1 =  new ImageIcon("/home/max/Downloads/ce.jpg");
    logo2.setIcon(icon1);
    logo2.setLocation(100, 50);
    add(logo2);

//add(B);***********************

B.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                //throw new UnsupportedOperationException("Not supported yet.");

                System.out.println("Cliccato");

                punti();
                setVisible(false);
            }
        });

/*data.addMouseMotionListener(this);
data.addMouseListener(this);

societa.addMouseMotionListener(this);
societa.addMouseListener(this);

barcode.addMouseMotionListener(this);
barcode.addMouseListener(this);

TA.setLocation(50,50);
TA.setSize(100,100);TA.add("List");

CB.setLocation(120,370);CB.setSize(100,20);

data.setLocation(184,177);data.setSize(100,20);
societa.setLocation(112,41);societa.setSize(100,20);

barcode.setLocation(44,178);barcode.setSize(100,20);*/

B.setLocation(100,150);B.setSize(80,40);

P.setLayout(new BorderLayout());
P.setLocation(100,200);P.setSize(150,150);
P.setBackground(Color.yellow);
P.add(BP,BorderLayout.NORTH);
//P.add(TF,BorderLayout.SOUTH);
//add(TA);add(B);add(P);add(CB);
//add(l);add(l1);add(l2);add(l3);add(label);

//add(label);
//add(data);add(societa);add(tara);add(barcode);

setLocation(500,500);
setSize(b*10,h*10);
setVisible(true);

//show();
}
//mouseDragged
public void mouseDragged(MouseEvent e)
{
Component C=e.getComponent();
if(b1==false){b1=true;Point p=new
Point(e.getPoint());c1=p.x;c2=p.y;}
Point z=new Point(e.getPoint());
Point q=new Point(C.getLocation());
C.setBounds(q.x+(z.x-c1),q.y+(z.y-c2),C.getSize().
width,C.getSize().height);
repaint();
}
//mouseReleased
public void mouseReleased(MouseEvent e)
{
b1=false;
System.out.println("Mouse Rilascaito");
Component C=e.getComponent();
System.out.println("*******++++++++++**********+++++++++Coordinate"+ C);
System.out.println("NOme: "+C.getName());

if(C.getName().equalsIgnoreCase("importo")){

    importo.setLocation(C.getX(), C.getY());

    importoX=C.getX();
    importoY=C.getY();

}

if(C.getName().equalsIgnoreCase("data")){

    data.setLocation(C.getX(), C.getY());

}

if(C.getName().equalsIgnoreCase("peso")){

    label1X=C.getX();
    label1Y=C.getY();

}
C.getX();
C.getY();

//Attenzione qui sotto da controllare!!!!!!!

//pesoX=e.getX();
//pesoY=e.getY();

repaint();
}
//mouseEntered
public void mouseEntered(MouseEvent e)
{
Cursor c1=new Cursor(Cursor.HAND_CURSOR);
setCursor(c1);
}
//mouseExited
public void mouseExited(MouseEvent e)
{
Cursor c2=new Cursor(Cursor.DEFAULT_CURSOR);
setCursor(c2);
}
//mouseClicked
public void mouseClicked(MouseEvent e)
{

    if (e.getClickCount() == 2) {
         Component C=e.getComponent();

         System.out.println("*****************+NOme componente: "+C.getName());

         System.out.println("Coordinate: "+C.getLocation());

         System.out.println("XXX: "+C.getX());
         System.out.println("YYY: "+C.getY());
       // Configurazione cc=new Configurazione();
       // cc.setComponente(C.getName());

       // cc.main();

         Configurazione cf=new Configurazione();

        // cf.setC(C);

         cf.main();

         //RotLabel rot=new RotLabel();

         //rot.main();

        System.out.println("\n\nRotazione: "+rot);
        System.out.println("Font: "+font);
        System.out.println("\n\n");

        System.out.println("+++++++++++++++++++++++++++++++Clicccato 2 volte");
    /* JFrame frame=new JFrame("Configurazione");
     frame.setSize(400, 400);
     frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
     frame.setLocation(200, 300);
     JLabel titolo=new JLabel("Configurazione "+C.getName());
     JLabel rotazione=new JLabel("Rotazione");
     String [] val=new String [4];
     val[0]="0";
     val[1]="90";
     val[2]="180";
     val[3]="270";
     JComboBox scelta=new JComboBox(val);
     frame.add(titolo);
     frame.add(rotazione);
     frame.add(scelta);

//3\. Create components and put them in the frame.
//...create emptyLabel...
//frame.getContentPane().add(new JLabel("Configurazione"), BorderLayout.CENTER);

//4\. Size the frame.
frame.pack();

//5\. Show it.
frame.setVisible(true);*/

    }

Component C=e.getComponent();
C.getParent().repaint();
repaint();
System.out.println("Coordinate"+ C);

}
//mouseMoved
public void mouseMoved(MouseEvent e)
{
Component C=((Component)e.getSource());
java.util.Random r=new java.util.Random();
java.util.Random g=new java.util.Random();
java.util.Random b=new java.util.Random();
int cr=r.nextInt(255);int cg=g.nextInt(255);
int cb=b.nextInt(255);
Color col=new Color(cr,cg,cb);
//C.setBackground(col);

}
//mousePressed
public void mousePressed(MouseEvent e){}

public class mouse_events{}

public static  void punti(){

    Inizio in=new Inizio();

    System.out.println("\n\n****************Controllo visibilità: ");
    System.out.println("Peso: "+pesoVisible);
    System.out.println("Tara: "+taraVisible);
    System.out.println("Logo1: "+logo1Visible);

    System.out.println("***********************************\n\n");

    if(logo1Visible){

    System.out.println("Parametri Logo1 "+logo1.getLocation());
    System.out.println("Parametri  X Logo1 "+logo1.getX());

    in.setLogo1X(logo1.getX());

   //System.out.println("Scrivo app: "+app);
    System.out.println("Parametri Y Logo1 "+logo1.getY());
    in.setLogo1Y(logo1.getY());
    }

    if(pesoVisible){

    System.out.println("Parametri Label "+label1.getLocation());
    System.out.println("Parametri  X Label "+label1.getX());

    in.setLabelX(label1.getX());

   //System.out.println("Scrivo app: "+app);
    System.out.println("Parametri Y Label "+label1.getY());
    in.setLabelY(label1.getY());
    }

    if(taraVisible){

    System.out.println("Parametri tara "+tara.getLocation());
    System.out.println("Parametri  X Tara "+tara.getX());
    in.setTaraX(tara.getX());

   //System.out.println("Scrivo app: "+app);
    System.out.println("Parametri Y Tara "+tara.getY());
    in.setTaraY(tara.getY());

    }

    System.out.println("Parametri Bar Code "+barcode.getLocation());
    System.out.println("Parametri  X Bar code "+barcode.getX()/10);
    in.setBarX(barcode.getX()/10);

   //System.out.println("Scrivo app: "+app);
    System.out.println("Parametri Y Bar Code "+barcode.getY()/10);
    in.setBarY(barcode.getY()/10);

//    System.out.println("Parametri nome "+nome.getLocation());
//    System.out.println("Parametri  X nome "+nome.getX()/10);
//    in.setNomeX(nome.getX()/10);

   //System.out.println("Scrivo app: "+app);
//    System.out.println("Parametri Y nome "+nome.getY()/10);
//    in.setNomeY(nome.getY()/10);

//    System.out.println("Parametri importo "+importo.getLocation());
//    System.out.println("Parametri  X importo "+importo.getX()/10);
//    in.setImportoX(importo.getX()/10);

   //System.out.println("Scrivo app: "+app);
//    System.out.println("Parametri Y importo "+importo.getY()/10);
//    in.setImportoY(importo.getY()/10);

 //   System.out.println("Parametri data "+data.getLocation());
 //   System.out.println("Parametri  X data"+data.getX()/10);
 //   in.setDataX(data.getX()/10);

  //aa=data.getX();

   //System.out.println("Scrivo app: "+app);
 //   System.out.println("Parametri Y data "+data.getY()/10);
 //   in.setDataY(data.getY()/10);

}

public void visibile(boolean vis){

  P.setVisible(vis);
 /*   
WindowEvent close = new WindowEvent(FRAME, WindowEvent.WINDOW_CLOSING);
FRAME.dispatchEvent(close);
    */

}

/*
private JComboBox getCombo(){
//final JSlider slider = new JSlider(-180, 180, angle);

    String[] val=new String [4];
    val[0]="0";
    val[1]="90";
    val[2]="180";
    val[3]="270";
 //final JComboBox combo1=new JComboBox(val);   

combo1.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
             // angle = Integer.parseInt(combo1.getSelectedItem().toString());//.getValue();
                label1.getParent().repaint();
            }
        });
return combo1;
}*/

private JPanel getContent() {
label1.setFont(new Font("Monospaced", Font.PLAIN, 24));
label1.setBorder(BorderFactory.createEtchedBorder());
JPanel panel = new JPanel(new GridBagLayout());
panel.add(label1, new GridBagConstraints());
return panel;
}

 /*   
public static void main(String[] args)
{
prova t=new prova("MOUSE EVENT");
t.init();
}*/

public static void refresh(){

    //P.getParent().repaint();
    P.repaint();

    //add(label1);

    //repaint();
}

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:04:24.653

几年前，我为此编写了一个框架。也许它可以作为一个开始（该库是开源的）：

教程：[http ://softsmithy.sourceforge.net/lib/current/docs/tutorial/swing/customizer/index.html](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/swing/customizer/index.html)

Javadoc：[http ://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/index.html](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/index.html)

主页：[http ://softsmithy.sourceforge.net/](http://softsmithy.sourceforge.net/)

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-core</artifactId>  
    <version>0.2</version>   
</dependency> 
```

更多信息： http: [//puces-blog.blogspot.ch/2012/07/news-from-software-smithy-version-02.html](http://puces-blog.blogspot.ch/2012/07/news-from-software-smithy-version-02.html)

其他解决方案：

您可以考虑使用 NetBeans 平台并尝试重用其 Matisse 组件或 Visual Graph 库。

# sharepoint - 无法使用 Excel 中的 ADODB 连接到 SharePoint 网站

> ID：12674775
> 
> 赞同：1
> 
> 时间：2012-10-01T14:00:48.450
> 
> 标签：sharepoint, excel, vba

我希望能够在 excel 中创建一个 adodb 记录集，我可以根据需要循环进行添加/编辑等。以下创建记录集，但在最后一行引发错误 (80004005)“无法连接到 SharePoint 网站。稍后再试”：

```
 strLURL = "<SharePoint list URL>"
    strGUID = "{D16F31E9-41F3-4193-8926-35FFC0714C86}"
    intIMEX = 1
    strList = "Planner"
    strConn = "Provider=Microsoft.ACE.OLEDB.12.0;WSS;"
    strConn = strConn & "IMEX=" & intIMEX & ";"
    strConn = strConn & "RetrieveIds=Yes;"
    strConn = strConn & "DATABASE=" & strLURL & ";"
    strConn = strConn & "LIST=" & strGUID & ";"
    strConn = strConn & "VIEW=; RetrieveIds=Yes;"
    strConn = strConn & "Table = " & strList

    Dim cnCur As New ADODB.Connection
    Dim rsCur As New ADODB.Recordset
    Dim strSQL As String

    cnCur.Open ConnectionString:=strConn
    strSQL = "SELECT * FROM [" & strList & "]"
    rsCur.Open Source:=strSQL, ActiveConnection:=cnCur 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:46:52.660

虽然您确实不应该直接访问 SQL Server 数据库，但问题中描述的技术并不违反此规则。所描述的技术使用类似 SQL 的 API 来查询列表。您会注意到该查询没有引用实际的 SQL Server 表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:05:46.290

我无法找到使用 ADODB 连接的解决方案。相反，我使用了处理 listobjects 的方法——这些方法非常简单：

```
'Declare variables
Dim lo as ListObject
Dim ws as Worksheet
Dim sServerName As String 'site address e.g "http://yoursite.com/_vti_bin/"
Dim sName As String 'list id e.g {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}
Dim sGUID As String 'view GUID e.g {yyyyyyyy-yyyy-yyyy-yyyy-yyyyyyyyyyyy}

'Create listobject
Set lo = ws.ListObjects.Add( _
       SourceType:=xlSrcExternal, _
       Source:=Array(sServerName, sName, sGUID), _
       Destination:=Range("A1") _
        )

'Do something with your listobject here

'Push updates back to server
lo.UpdateChanges (xlListConflictDialog) 
```

# bash - Bash 双进程替换给出了错误的文件描述符

> ID：12674783
> 
> 赞同：8
> 
> 时间：2012-10-01T14:01:06.943
> 
> 标签：bash, process, pipe, file-descriptor, substitution

当我尝试在 bash 函数中引用两个进程替换管道时，只有第一个引用的管道有效。第二个给出“错误的文件描述符”错误，如下所示：

```
$ foo(){
> cat "$1"
> cat "$2"
> }
$ foo <(echo hi) <(echo bye)
hi
cat: /dev/fd/62: Bad file descriptor
$ 
```

似乎一旦引用了第二个管道，就会删除第二个管道，但是 a) 我似乎无法在任何文档中确认这种行为，并且 b) 我希望它不会。=)

关于我做错了什么的任何想法？FWIW 我这样做是为了制作一个包装器来使用 Mac OS X 的 FileMerge 图形差异工具，而不是命令行工具，它已经很高兴从命令行使用多个管道。

-抢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T18:43:51.523

首先，我认为@Michael Krelin 认为这与 OS X (v3.2.48) 提供的 bash 版本有关是正确的。从我的测试来看，文件描述符在函数执行的第一个外部命令之后被丢弃：

```
$ bar() { echo "Args: $*"; echo "First ext command:"; ls /dev/fd; echo "Second ext command:"; ls /dev/fd; }
$ bar <(echo hi) <(echo bye)
Args: /dev/fd/63 /dev/fd/62
First ext command:
0   1   2   3   4   5   6   62  63
Second ext command:
0   1   2   3   4   5   6 
```

请注意，/dev/fd/62 和 63 在两个`ls`列表之间消失。不过，我想我找到了一种解决方法：在脆弱的 fd 有机会消失之前将它们复制到非脆弱的 fd：

```
$ baz() { exec 3<"$1" 4<"$2"; ls /dev/fd; ls /dev/fd; cat /dev/fd/3; cat /dev/fd/4; }
$ baz <(echo hi) <(echo bye)
0   1   2   3   4   5   6   62  63
0   1   2   3   4   5   6
hi
bye 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T14:14:40.840

`/bin/bash`OSX（3.2.48）提供的失败。来自 macports 的那个（4.2.37 - 通常`/opt/local/bin/bash`如果你安装了它）工作正常。无论是版本还是构建我不知道。也许您可能想为这个脚本使用 macports bash。一个人肯定必须在每台 Mac 上都有 macport，所以我假设你有 ;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T14:05:15.147

你确定你是用 bash 而不是其他 shell 运行它吗？你检查过输出`echo $SHELL`吗？

使用 bash 对我来说效果很好：

```
[16:03:51][tim@tim(1)]:~
(0)$function foo() { cat "$1"; cat "$2"; };
[16:03:59][tim@tim(1)]:~
(0)$foo <(echo "lva") <(echo hi)
lva
hi 
```

例如，当我将 shebang 更改为 #!/bin/dash 时，我得到了错误。

请尝试将 #!/bin/bash 作为 shebang 放在脚本的第一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:15:41.137

这看起来像这里的问题：http: [//bugs.alpinelinux.org/issues/1465](http://bugs.alpinelinux.org/issues/1465)

# php - 在类别 php 之后显示产品

> ID：12674786
> 
> 赞同：0
> 
> 时间：2012-10-01T14:01:12.050
> 
> 标签：php, mysql, arrays, list, loops

我有以下标记，它显示了类别和子类别的列表：

```
<table border="0" width="100%" cellspacing="0" cellpadding="2">
<tr class="dataTableHeadingRow">
<td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
<td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
</tr>

<?php
function category_list( $category_parent_id = 0 )
{
    $sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id AND c.parent_id='.$category_parent_id;
    $res  = tep_db_query( $sql );
    $cats = array();

    while ( $cat = tep_db_fetch_array( $res ) )
    {
        $cats[] = $cat;
    }

    if (count($cats) == 0)
    {
        return '';
    }

    $list_items = array();

    foreach ( $cats as $cat )
    {
        $list_items[] = '<tr class="dataTableRow"><td class="dataTableContent">'; 

        if($category_parent_id != 0) $list_items[] = '&nbsp;&nbsp;&nbsp;';
        if($category_parent_id == 0 )$list_items[] = '<b>';

        $list_items[] = $cat['categories_name'];

        if($category_parent_id == 0) $list_items[] = '</b>';
        $list_items[] = '</td><td class="dataTableContent">'; 
        $list_items[] = category_list( $cat['categories_id'] );
        $list_items[] = '</td></tr>'; 
    }
    $list_items[] = '';

    return implode( '', $list_items );
}  

echo category_list();
?>
</table> 
```

每个类别都以粗体显示，子类别略微向右缩进显示。我需要展示每个子类别中可用的产品。我尝试将所需的产品字段添加到 sql 查询中，但它没有响应。我需要添加以搜索产品的字段是：`products_id, products_name`，这些来自表`TABLE_PRODUCTS_DESCRIPTION`，并且为了对其类别进行排序，还有另一个名为 的表`TABLE_PRODUCTS_TO_CATEGORIES`，其中包含字段`products_id and categories_id`。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:29:31.343

我不太喜欢`from`查询中加入 2 个表的内容。我以我喜欢的方式更改了查询。`from`如果你愿意，你可以改变它的方式。

```
$sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order, pd.products_id, pd.products_name
from ' . TABLE_CATEGORIES . ' c 
inner join ' . TABLE_CATEGORIES_DESCRIPTION . ' cd on c.categories_id = cd.categories_id 
inner join '. TABLE_PRODUCTS_TO_CATEGORIES .' pc on pc.categories_id=c.categories_id 
inner join ' . TABLE_PRODUCTS_DESCRIPTION . ' pd on pd.products_id=pc.products_id
where c.parent_id='.$category_parent_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:21:16.440

看起来您正在使用 osCommerce 或其分支之一，并且您希望显示每个类别的产品数量。

如果您只有两个级别的类别可以做，如果您的类别树更深，请注意这是一个真正的性能杀手，因为在 osCommerce 中构建类别树已经完成，比方说，并没有真正优化性能，尤其是对于复杂的树结构。

直接的方法是，计算该`TABLE_PRODUCTS_TO_CATEGORIES`列`categories_id`包含当前类别 ID 的表的条目：

```
$query = 'SELECT COUNT(*) FROM `'.TABLE_PRODUCTS_TO_CATEGORIES.'` WHERE `categories_id` = "'.$cat['categories_id'].'"'; 
```

获取结果，你就有了计数。

使用这种方法，您只能直接获得 tnis 类别中的产品数量，而不是位于子类别中的产品数量。

您可能还可以查看一下，`includes/boxes/categories.php`因为这已经内置在 osC 中 - 方法`tep_show_category()`和此处调用的方法`tep_count_products_in_category()`可能可用于您的目的，因此无需自己编写。

# javascript - 有什么方法可以防止在 jstree 中关闭节点时调用“select_node.jstree”？

> ID：12674789
> 
> 赞同：3
> 
> 时间：2012-10-01T14:01:31.733
> 
> 标签：javascript, jquery, events, jstree

当你打开节点时，它很好。未调用“select_node.jstree”。但是，当您选择一个节点然后关闭其父节点时，jstree 会出于某种奇怪的原因为该父节点触发“select_node.jstree”。有没有办法解决这个问题，或者这只是 jstree 的一个缺陷？我会很感激帮助！这是我的代码：

```
 $("#RequirementsTree")
    .bind("select_node.jstree", function(event, data) {
            ReqNode = data.rslt.obj;
            $("#req_tree_modal").dialog({ height: 400, width: 600, modal: true, closeOnEscape: true, resizable: false, show: "blind" });
            $("#RMSDoc_ParentNodeID").val(data.rslt.obj.attr("id").substring(4));
            if(is_requirement_node(data))
            {
                dispEditRequirementView();

                var ReqCheck = data.rslt.obj.attr("name");

                @* This is a REQUIREMENT *@
                if(ReqCheck == "requirement")
                {
                    // Ajax call to Server with requirement id passed in
                    $.ajax({
                        type: "POST",
                        url: '@Url.Content("~/RMS/getRequirementStateByID")',
                        data: {
                            ReqID : data.rslt.obj.attr("id").substring(4)
                        },
                        success: function(new_data) {
                            if(new_data == 1){
                                $("#RMSDoc_ReqEnabled").attr("checked", "checked");
                                $("#RMSDoc_ReqEnabled").val("true");
                            }
                            else if(new_data == 0) {
                                $("#RMSDoc_ReqEnabled").removeAttr("checked");
                                $("#RMSDoc_ReqEnabled").val("false");
                            }
                        }   
                    });

                    $("#RMSDoc_RBSRequirement_RequirementsId").val(data.rslt.obj.attr("id").substring(4));
                    $("#RMSDoc_RBSRequirement_RequirementsText").val($.trim(data.rslt.obj.text()));
                    $("#ExistingTreeSubmit").val("@Model.RMSDoc.RMSEditReqButton.ConfigurableLabelDesc");

                }
                else {
                    alert("Requirement node select error");
                }
            }
            @* This is a TREE BRANCH *@
            else
            {
                dispAddRequirementView();
                $("#RMSDoc_TreeBranch_Text").val($.trim($('.jstree-clicked').text()));
                $("#RMSDoc_TreeBranch_id").val(data.rslt.obj.attr("id").substring(4));
                $("#RMSDoc_TreeBranch_Level").val(data.rslt.obj.attr("name").substring(7));
                $("#RMSDoc_RBSRequirement_RequirementsText").val("");
                $("#ExistingTreeSubmit").val("@Model.RMSDoc.RMSCreateReqButton.ConfigurableLabelDesc");
            }
     }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:18:44.263

更新：我找到了一种让它在插件中工作的方法，将以下内容添加到“ui”配置部分：

```
 "ui": {
            "select_limit": 1,
            "selected_parent_close":false
        }, 
```

I believe what was happening is that when a sub-node was selected, collapsing the parent node would cause the parent node to be selected, triggering the event.

---------- 原始答案 ---------

我不确定在插件范围内工作的答案。但我确实找到了解决方法。

我为树“an”中的每个锚 () 标签添加了一个类。

```
<li class='jstree-closed' id="phtml_3" rel="folder">
    <a href="#" class="an">test node 2</a>
</li> 
```

然后我连接 JQuery 来寻找这个类的锚点，并以这种方式处理我的点击。

```
instance.on("click", "a.an", function (e) {
    alert("click");
}); 
```

我仍然需要添加代码以从父容器中查找 ID，这不是最佳的......但我不必再与崩溃竞争我的点击。

# python - 使用pywin32 DosDateTimeToTime解包DOS打包时间

> ID：12674794
> 
> 赞同：3
> 
> 时间：2012-10-01T14:01:44.850
> 
> 标签：python, pywin32

有没有人使用 pywin32 pywintypes.DosDateTimetoTime 将 DOS 打包的日期/时间结构转换为 Python 中的可读时间格式？

我找不到太多关于如何使用此功能、需要哪些参数以及采用什么格式的文档。

我正在编写一个脚本来从旧的 DOS 备份文件中提取文件，基本上是在尝试复制旧的 DOS 恢复命令。我正在根据找到的备份文件的格式提取文件[http://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/dos/restore/brtecdoc.htm](http://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/dos/restore/brtecdoc.htm)

谢谢，杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:35:41.777

[它需要两个参数（16 位整数），它们与DosDateTimeToFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724247%28v=vs.85%29.aspx)的前两个参数 相同

您可以在 pywin32 的源代码 PyWinTypesmodule.cpp 中看到：

```
static PyObject *PyWin_DosDateTimeToTime(PyObject *self, PyObject *args)
{ 
    WORD wFatDate, wFatTime;
    if (!PyArg_ParseTuple(args, "hh", (WORD *)&wFatDate, (WORD *)&wFatTime))
        return NULL;
    FILETIME fd;
    If (!DosDateTimeToFileTime(wFatDate, wFatTime, &fd))
      return PyWin_SetAPIError("DosDateTimeToFileTime");
} 
```

这些必须是此[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724247%28v=vs.85%29.aspx)中描述的格式，为方便起见，相关部分复制如下：

```
wFatDate [in]
The MS-DOS date. The date is a packed value with the following format.
    Bits    Description
    0-4     Day of the month (1–31)
    5-8     Month (1 = January, 2 = February, and so on)
    9-15    Year offset from 1980 (add 1980 to get actual year)

wFatTime [in]
The MS-DOS time. The time is a packed value with the following format.
    Bits    Description
    0-4     Second divided by 2
    5-10    Minute (0–59)
   11-15    Hour (0–23 on a 24-hour clock) 
```

# java - Google App Engine 上的 org.datanucleus.transaction.Transaction 回滚

> ID：12674796
> 
> 赞同：1
> 
> 时间：2012-10-01T14:01:53.087
> 
> 标签：java, google-app-engine, jdo

我在 Google App Engine 上的应用程序中遇到严重错误。

当我这样做时：

```
CompanyUser.validate("email", email);
    CompanyUser.validate("password", password, password);
    Validator.checkValidation();

    CompanyUser user;

    try {
        user = company.getUserByEmail(email);

        //(user.getPassword() == "") se o usuário administrador resetar a senha, alterar o e-mail ou cadastrar um novo usuário
        //(user.isWaitingConfirmation()) nos mesmos casos acima e mais quando o usuário alterar seu próprio e-mail ou o usuário administrador se cadastrar (cadastro na home do site)
        if(Tools.isEmptyString(user.getPassword()) || user.isWaitingConfirmation()) {
            if(user.getLastAccessDate() == null)    //Se for usuário novo
                throw new AuthenticationException("Seu usuário encontra-se bloqueado.<br />Para ativar seu acesso ao portal, acesse seu e-mail e siga as instruções.");
            else
                throw new AuthenticationException("Seu usuário encontra-se bloqueado.<br />Para reativar seu acesso ao portal, acesse seu e-mail e siga as instruções.");
        }

        byte[] bDigest = user.getPasswordBytes();
        byte[] bSalt = user.getPasswordSaltBytes();
        byte[] proposedDigest = user.getHash(password, bSalt);

        if (Arrays.equals(proposedDigest, bDigest)) {
            try{
                user.setLastAccessDate(Tools.getCurrentTime());
                company.saveDetached();
            } catch (DeadlineExceededException e) {
                Tools.sendMail("ERRO Severidade média: Não esta salvando ultimo acesso de Usuario", "ERRO: Não esta salvando ultimo acesso do Usuario " + user.getEmail() + " da empresa " + user.getCompany().getName()+ "" +
                        "Objeto esta com transação aberta.", Tools.getChaintSupportEmail());
            }
            return user;
        }

    } catch (ObjectNotFoundException e) {
        user = null;
    }

    throw new AuthenticationException("Usuário/Senha não conferem"); 
```

* * *

```
public Object saveDetached() throws InvalidFieldsValueException {

    if(IdModel.getErrorList().isEmpty() == false) {
        Vector<ValidatorError> el = IdModel.getErrorList();
        Validator.clearError();
        throw new InvalidFieldsValueException(el);
    }

    return  PersistenceManager.saveDetached(this, true);

} 
```

* * *

```
public static Object saveDetached(Object object, boolean detach) {
    Object ob = null;
    String msg ="";
    javax.jdo.PersistenceManager pm = getPM();
    pm.setDetachAllOnCommit(detach);

    Transaction t = pm.currentTransaction();
    try {
        t.begin();
        ob = pm.makePersistent(object);
        t.commit();
    } catch (Exception e) {
        String[] fieldNames = NucleusJDOHelper.getDetachedObjectDirtyFields(object, pm);
        for(String s:fieldNames) {
            msg = msg.concat(s+";\n");
        }

    } finally {
        String[] fieldNames;
        if (t.isActive()) {
            fieldNames = NucleusJDOHelper.getDetachedObjectLoadedFields(object, pm);
            msg = msg+"NucleusJDOHelper.getDetachedObjectLoadedFields";
            for (String s : fieldNames) {
                msg = msg.concat(s + ";\n");
            }
            Tools.getLogger().warning(msg);
            t.rollback();
        }
        pm.close();
    }
    return ob;
} 
```

有时候是这样的：

> 201.86.195.206 - - [24/Sep/2012:14:24:48 -0700] "GET / HTTP/1.1" 500 0 - "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1" "tci.chainit.com.br" ms=60020 cpu_ms=22858 exit_code=104 instance=00c61b117c6e51b4aec6d2e4089516b479c2a0 E2012-09-24 18:24:47.974 org.datancle.资源回滚失败：org.datanucleus.store.appengine.DatastoreXAResource@2d659，错误代码 UNKNOWN 和事务：[DataNucleus Transaction，ID=Xid= W2012-09-24 18:24:48.375 / com.google.apphosting 错误。 runtime.HardDeadlineExceededError：此请求 (b08d8999601781ee) 于 2012/09/24 21:23:48.426 UTC 开始，并且仍在 2012/09/24 21:24:48.373 UTC 执行。在 java.util.concurrent.locks 的 sun.misc.Unsafe.park(Native Method)。在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:336) 在 com.google.tracing 的 com.google.tracing.TraceContext.runInContext(TraceContext.java:701) 运行(TraceContext.java:459) .TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:328) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:456) 在 com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java :251) 在 java.lang.Thread.run(Thread.java:679) C2012-09-24 18:24:48.376 来自 servlet com.google.apphosting.runtime.HardDeadlineExceededError 的未捕获异常：此请求 (b08d8999601781ee) 于 2012 年开始/09/24 21:23:48.426 UTC 并且仍在 2012/09/24 21:24:48.373 UTC 执行。在 java.util.concurrent.locks.LockSupport 的 sun.misc.Unsafe.park(Native Method)。
> 
> 处理此请求的进程遇到问题，导致它退出。这可能会导致一个新进程被用于对您的应用程序的下一个请求。如果您经常看到此消息，则可能是在应用程序初始化期间引发了异常。（错误代码 104）

对我来说，回滚操作似乎没有在每个请求必须结束的 60 秒内完成，并且回滚操作被取消。通过这种方式，对象以我们无法在其上书写的状态结束。

在我看来，这个问题非常严重，因为用户对象以这种“不可更改”状态结束，并且无法由它自己修复，也不能由我们的 Datanucleous 的 JDO 修复。

# java - JTabbedPane 和 JInternalFrame 哪个更好用？

> ID：12674797
> 
> 赞同：1
> 
> 时间：2012-10-01T14:01:53.127
> 
> 标签：java, swing, jtabbedpane, jinternalframe

我有一个基于 java 的工具，可以在新选项卡中显示每个新的画布图像，并计划使用更多功能对其进行改进。很快它的 gona 变得复杂的工具可以选择创建图像、查看序列图像，因此考虑使用 JInternal 框架而不是 JTabbedPane。那么想知道在效率、处理能力和内存方面哪个是更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:01:44.283

我认为这在很大程度上取决于图像的大小以及您实际希望向用户显示图像的方式。

如果您有非常大的图像，例如 10+ MPixels 的图像，或者您的用户不需要同时查看多个图像，那么您可以使用 JTabbedPane。当您一次只显示一个图像时，您可以通过只将该图像加载到内存中来改善内存消耗，并可能将其他图像包裹在`SoftReference`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:15:11.377

我会选择`JInternalFrame`，如图所示[，](https://stackoverflow.com/a/8090328/230513)因为每个框架都可以单独调整大小。`JTabbedPane`，如图所示[，](https://stackoverflow.com/a/11949899/230513)具有很大的吸引力，但如果不滚动，则一刀切*可能不适合所有人。*只有分析这些示例才能真正解决效率、处理能力和内存问题。

![图片](../Images/fd0bc25e46539257ae514b2d6e6b3e38.png)

# java - oGoogle+ 身份验证

> ID：12674801
> 
> 赞同：0
> 
> 时间：2012-10-01T14:02:07.357
> 
> 标签：java, oauth-2.0, google-plus

我尝试了几种方法来获取 google+ 的个人资料信息。

我想通过 oAuth 访问我的 GooglePlus 帐户，以获取此处提到的信息：[https ://developers.google.com/+/api/latest/people](https://developers.google.com/+/api/latest/people)

我下载了 google api java 客户端并尝试了此示例以获取访问权限： [https](https://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10) ://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10但此示例现在已弃用。在我创建客户端 ID 和客户端密码之前！

但是每次获得授权的尝试都失败了。顺便说一句，搜索教程和示例，但我没有找到任何东西。我希望这里有人可以帮助我一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:12:23.070

看看这个不推荐使用的文档和示例： [https ://code.google.com/p/google-api-java-client/wiki/OAuth2](https://code.google.com/p/google-api-java-client/wiki/OAuth2)

# python - 如何在内存受限的系统上使用 cx_Oracle 下载巨大的 Oracle LOB？

> ID：12674806
> 
> 赞同：6
> 
> 时间：2012-10-01T14:02:20.350
> 
> 标签：python, oracle, blob, cx-oracle, lob

我正在开发一个系统的一部分，其中进程限制为大约 350MB 的 RAM；我们使用 cx_Oracle 从外部系统下载文件进行处理。

外部系统将文件存储为 BLOB，我们可以通过以下方式获取它们：

```
# ... set up Oracle connection, then
cursor.execute(u"""SELECT   filename, data, filesize
                   FROM    FILEDATA
                   WHERE   ID = :id""", id=the_one_you_wanted)
filename, lob, filesize = cursor.fetchone()

with open(filename, "w") as the_file:
    the_file.write(lob.read()) 
```

`lob.read()`当我们遇到大于 300-350MB 的文件时，显然会失败`MemoryError`，所以我们尝试了这样的方法，而不是一次读取所有文件：

```
read_size = 0
chunk_size = lob.getchunksize() * 100
while read_size &lt; filesize:
    data = lob.read(chunk_size, read_size + 1)
    read_size += len(data)
    the_file.write(data) 
```

不幸的是，我们仍然`MemoryError`经过几次迭代。从所花费的时间`lob.read()`和我们最终得到的内存不足的情况来看，看起来好像**每次都**`lob.read()`从数据库中提取 (chunk_size + read_size) 个字节。也就是说，读取需要 O(n) 时间和 O(n) 内存，即使缓冲区小得多。

 **为了解决这个问题，我们尝试了类似的方法：

```
read_size = 0
while read_size &lt; filesize:
    q = u'''SELECT dbms_lob.substr(data, 2000, %s)
            FROM FILEDATA WHERE ID = :id''' % (read_bytes + 1)
    cursor.execute(q, id=filedataid[0])
    row = cursor.fetchone()
    read_bytes += len(row[0])
    the_file.write(row[0]) 
```

这一次提取 2000 个字节（argh），并且需要很长时间（对于 1.5GB 文件来说大约需要两个小时）。为什么是 2000 字节？根据 Oracle 文档，`dbms_lob.substr()`将其返回值存储在 RAW 中，限制为 2000 字节。

有什么方法可以将`dbms_lob.substr()`结果存储在更大的数据对象中，一次读取几兆字节？如何使用 cx_Oracle 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:37:57.793

我认为 lob.read() 中的参数顺序在您的代码中是相反的。第一个参数应该是偏移量，第二个参数应该是要读取的数量。这将解释 O(n) 时间和内存使用情况。**

# ios - xcode - 将 *.ogg 文件添加到沙盒

> ID：12674809
> 
> 赞同：0
> 
> 时间：2012-10-01T14:02:29.197
> 
> 标签：ios, xcode, sandbox, ogg

我想在我的项目中添加一个 *.ogg 文件。我需要 XCode 将其放置在沙盒中的某个位置。如果我拖放，它将不起作用。如果我对 mp3 文件做同样的事情，它可以工作。知道我怎样才能在沙盒中拥有那个 ogg 文件吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:22:17.707

有人告诉我解决方法。我必须从 Project / Buid Phases / Copy Bundle Resources 中手动添加文件，并且它起作用了。

# html - 加载消息出现在顶部而不是中间

> ID：12674810
> 
> 赞同：0
> 
> 时间：2012-10-01T14:02:33.690
> 
> 标签：html

我想在页面加载时使用 ajax 显示加载消息。我有代码，但消息显示在顶部..我希望它在屏幕中间..我该怎么办？代码片段如下：

```
 <div id='loadpage'>
      <table height=100% width=100% border=0>
           <tr height=100%>
                <td width=100% align=center valign=center>Please Wait</td>
           </tr>
      </table>
 </div>
 var progressTimeID = setTimeout("document.getElementById('loadpage').innerHTML='<table style=\"height:100%;\" width=100% border=0><tr height=100%>    <td width=100% align=center valign=center>Please Wait</td></tr></table>';", 1000);
clearTimeout(progressTimeID); 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:06:21.987

我敢肯定，这是因为你`height=100%`100% 什么都不是。因此，请确保所有父母都有一个明确的身高。甚至你的身体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:07:04.190

您需要在 CSS 中设置`html`,`body`和`div#loadpage`to `height:100%`。

```
html,
body,
div#loadpage
{
    width: 100%;
    height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:07:32.720

干得好：

**编辑：**

```
<html>
<head>

<script>

    function load_show() {

        document.getElementById('loadpage').innerHTML = "<img src=\"http://websurvey.textalk.se/en/pics/ajax-loader-big.gif\" />";

    }

    function show_div() {

        var progressTimeID = setTimeout(function(){load_show()}, 1000);

    }

</script>

<style>

    body {

        background: #fff;

    }

    #loadpage {

        position: absolute;
        display: block;
        top: 50%;
        left: 50%;
        margin-top: -33px;
        margin-left: -33px;
        width: 66px;
        height: 66px;

    }

    #click {

        position: absolute;
        top: 20px;
        left: 50%;
        margin-left: -50px;
        width: 100px;
        height: 20px;
        cursor: pointer;

    }

</style>

</head>
<body>

<div id="click" onclick="show_div()">
    show loader
</div>

<div id="loadpage">
    CONTENT
</div>

</body>
</html> 
```

*   请不要使用表格布局。
*   启动后您无法清除超时。它将制动它以使其不执行...

# python - 需要修改正则表达式才能在其他情况下工作

> ID：12674814
> 
> 赞同：0
> 
> 时间：2012-10-01T14:02:47.770
> 
> 标签：python, regex

刚刚发现我的文件结构可能会有所不同，而我的正则表达式有时会因为这种变化而起作用。我的正则表达式是
`v6 = re.findall(r'(?s)----------\s*LOW VOLTAGE SUMMARY BY AREA.*?\rACTIVITY.+?',wholefile)`

它当前与文件的以下部分匹配。

```
----------           LOW VOLTAGE SUMMARY BY AREA            ----------

         BUS   NAME   BASKV    VOLT    TIME       AREA     ZONE

       12006  [AMISTAD 69.0]   0.971   1.8700  10 NEW MEXICO    121
       11223  [WHITESA213.8]   0.918   1.9900  11 EL PASO       110
       70044  [B.HYDROB4.16]   0.955   2.3233  70 PSCOLORADO    703
       70044  [B.HYDROB4.16]   0.955   2.3233  70 PSCOLORADO    703
       79086  [PAGOSA   115]   0.937   2.0333  73 WAPA R.M.     791

ACTIVITY? 
PDEV

ENTER OUTPUT DEVICE CODE:
 0 FOR NO OUTPUT
 1 FOR PROGRESS WINDOW 
```

但是，文件的该部分有时如下

```
 ----------           LOW VOLTAGE SUMMARY BY AREA            ----------

         BUS   NAME   BASKV    VOLT    TIME       AREA     ZONE

       12006  [AMISTAD 69.0]   0.742  13.2060  10 NEW MEXICO    121
       11223  [WHITESA213.8]   0.916   1.8367  11 EL PASO       110
       70187  [FTGARLND69.0]   0.936  19.6099  70 PSCOLORADO    710
       73216  [WINDRIVR 115]   0.858   3.6100  73 WAPA R.M.     750

(VFSCAN) AT TIME = 20.0000 UP TO  100 BUSES WITH LOW FREQUENCY BELOW 59.600:

X ----- BUS ------ X    FREQ       X ----- BUS ------ X    FREQ
12063 [ROSEBUD 13.8]   59.506 
```

在这两种情况下，我只想捕获以下部分：

```
----------           LOW VOLTAGE SUMMARY BY AREA            ----------

     BUS   NAME   BASKV    VOLT    TIME       AREA     ZONE

   12006  [AMISTAD 69.0]   0.971   1.8700  10 NEW MEXICO    121
   11223  [WHITESA213.8]   0.918   1.9900  11 EL PASO       110
   70044  [B.HYDROB4.16]   0.955   2.3233  70 PSCOLORADO    703
   70044  [B.HYDROB4.16]   0.955   2.3233  70 PSCOLORADO    703
   79086  [PAGOSA   115]   0.937   2.0333  73 WAPA R.M.     791 
```

无论我查看的是哪个版本的文件，我的正则表达式如何返回上面的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:08:20.063

这应该工作

```
v6 = re.findall(r'(?s)----------\s*LOW VOLTAGE SUMMARY BY AREA.*?\r(ACTIVITY|\(VFSCAN\)).+?',wholefile) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:12:05.103

我不建议使用正则表达式，而是做一些解析。假设您的数据在一个名为的字符串中`data`：

```
lines = [line for line in data.split("\n")]

# find start of header
for index, line in enumerate(lines):
    if "LOW VOLTAGE SUMMARY BY AREA" in line:
        start_index = index
        break

# first first data entry (line starting with whitespace and then a number)
for index, line in enumerate(lines[start_index:]):
    if line.strip() and line.split()[0].isdigit():
        first_entry_index = start_index + index
        break

# find last data entry (line starting with whitespace and then a number)
for index, line in enumerate(lines[first_entry_index:]):
    # we don't do this inside the if because it's possible
    # to end the data with only entries and whitespace
    end_entry_index = first_entry_index + index

    if line.strip() and not line.split()[0].isdigit():
        break

# print all lines between header and last data entry
print("\n".join(lines[start_index:end_entry_index])) 
```

# ruby-on-rails - Ruby on Rails：下拉搜索 - 布尔类型的无效输入语法：“%%”

> ID：12674815
> 
> 赞同：0
> 
> 时间：2012-10-01T14:02:58.073
> 
> 标签：ruby-on-rails, ruby, postgresql, syntax

我正在尝试构建一个搜索功能，用户可以在其中搜索不同的字段，例如。使用下拉菜单的客户、行业、技术。搜索功能一直有效，直到我决定允许用户一次搜索不止一种技术。

这是我的模型：

```
class Project < ActiveRecord::Base
  attr_accessible :tech2, :tech3, :tech4, :tech5, :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

def self.search(search_client, search_industry, search_role, search_tech, search_tech2, search_tech3, search_tech4, search_tech5 , search_business_div, search_project_owner,  search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_role.present? || search_tech.present? || search_tech2.present? || search_tech3.present? || search_tech4.present? || search_tech5.present? || search_business_div.present? || search_project_owner.present? || search_status.present? ||  search_keywords.present?

where(['client LIKE ? AND industry LIKE ? AND role LIKE ? AND (tech LIKE ? OR ? OR ? OR ? OR ? ) AND business_div LIKE ? AND project_owner LIKE ? AND status LIKE ? AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" , "%#{search_role}%" , "%#{search_tech}%"  , "%#{search_tech2}%" , "%#{search_tech3}%"  , "%#{search_tech4}%" , "%#{search_tech5}%" ,"%#{search_business_div}%" , 
      "%#{search_project_owner}%"  , "%#{search_status}%", 
       "%#{search_keywords}%"
    ])

end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

这是我在项目控制器中的搜索操作：

```
def search

@search = params[:client], params[:industry], params[:role], params[:tech], params[:tech2],params[:tech3],params[:tech4],params[:tech5], params[:business_div], params[:project_owner], params[:status], params[:keywords]

@project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

@search_performed = !@search.reject! { |c| c.blank? }.empty? 

   @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

尝试搜索技术时出现此错误：

```
ActiveRecord::StatementInvalid in Projects#search

    PG::Error: ERROR:  invalid input syntax for type boolean: "%%"
LINE 1: ...ND role LIKE '%%' AND (tech LIKE '%Telephony%' OR '%%' OR '%...
                                                             ^
: SELECT COUNT(*) FROM "projects"  WHERE (client LIKE '%%' AND industry LIKE '%%' AND role LIKE '%%' AND (tech LIKE '%Telephony%' OR '%%' OR '%%' OR '%%' OR '%%' ) AND business_div LIKE '%%' AND project_owner LIKE '%%' AND status LIKE '%%' AND keywords LIKE '%%')

Extracted source (around line #169):

166: 
167: <% if @project_search.total_entries > 0 %>
168: <% if @search_performed %>
169: 
170: <style>
171: CSS3 Code
172: 
```

我认为这与其他返回 null 的技术下拉菜单有关。希望有人能看到问题。提前致谢。

**更新：**

```
def self.like(text); "%#{text}%"; end

  def self.search(search_client, search_industry, search_role, search_tech, search_tech2, search_tech3, search_tech4, search_tech5, search_business_div, search_project_owner,  search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end
    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end

    # here lies the problem. you search in the 'tech' column, but you seem to want to search in many columns...
    search_techs = [search_tech, search_tech2, 
          search_tech3, search_tech4, 
          search_tech5].select(&:present?).compact
    if search_techs.present?
      sql = (['tech LIKE ?'] * search_techs.size).join(" OR ")
      args = search_techs.collect {|t| like(t)}
      _projects = _projects.where [sql, *args]
    end
    if search_business_div.present?
      _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
    end
    if search_project_owner.present?
      _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
    end

     if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end

todays_date = DateTime.now.to_date

if !search_start_date_A.blank? or !search_start_date_B.blank?
    search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
    search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
    todays_date = nil
    search_start_date_dd = nil

    end

if search_start_date_dd.blank?
    todays_date = nil
end

        if search_start_date_dd.blank?

      _projects = _projects.where [' DATE(start_date) BETWEEN ? AND ?', search_start_date_A, search_start_date_B]
    end

        if search_start_date_A.blank? or search_start_date_B.blank?
      _projects = _projects.where ['DATE(start_date) BETWEEN ? AND ?', search_start_date_dd, todays_date]
    end

    if search_keywords.present?
      _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
    end
    # now you have applied only the present scopes. return the result, and watch 
    # the query as it executes.
    _projects
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:13:10.463

根据 sql 语法，您的查询无效。

```
tech LIKE '%1%' OR '%2%' OR '%3%' 
```

试试这个：

```
tech LIKE '%1%' OR tech LIKE '%2%' OR tech LIKE '%3%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:32:52.333

您的搜索方法可以写得更好，它将帮助您找到问题（基本上取决于无用的 LIKE。

但是您正在使数据库成为不是他的工作的东西。如此多的 LIKE 是任何 RDBMS 的墓碑。使用solr之类的全文搜索工具，API更简单，效果会更好！

这里有一个几乎等效的`search`方法，每个 LIKE 仅在需要时添加。

```
class Project < ActiveRecord::Base

  def self.like(text); "%#{text}%"; end

  def self.search(search_client, search_industry, search_role, 
                  search_tech, search_tech2, search_tech3, search_tech4, 
                  search_tech5, search_business_div, search_project_owner,
                  search_status, search_start_date_dd, search_start_date_A, 
                  search_start_date_B,  search_keywords)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end
    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end
    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    # here lies the problem. you search in the 'tech' column, but you seem to want to search in many columns...
    search_techs = [search_tech, search_tech2, 
          search_tech3, search_tech4, 
          search_tech5].select(&:present?).compact
    if search_techs.present?
      sql = (['tech LIKE ?'] * search_techs.size).join(" OR ")
      args = search_techs.collect {|t| like(t)}
      _projects = _projects.where [sql, *args]
    end
    if search_business_div.present?
      _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
    end
    if search_project_owner.present?
      _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
    end
    if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end
    if search_keywords.present?
      _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
    end
    # now you have applied only the present scopes. return the result, and watch 
    # the query as it executes.
    _projects
  end 
```

# plugins - 要添加的 Sublime Text 2 包；输入时自动按下

> ID：12674816
> 
> 赞同：1
> 
> 时间：2012-10-01T14:02:58.890
> 
> 标签：plugins, sublimetext2, sublimetext

当你写例如。console.log("whatevs") 并且您的光标放在 ") 之前我想绑定一个组合键来添加 ; 然后返回。

是的，你可以制作一个宏来实现这一点，或者制作一个带有正确放置选项卡的控制台日志片段。但是，如果这是 python 并且我想添加 : 或其他语言？

于是我开始写一个小插件。但我不知道如何知道我正在编辑什么类型的文件。也许我在[文档](http://www.sublimetext.com/docs/api-reference)中错过了它。

我的问题是：是否已经有一个插件可以实现这一点，是否有更详细的文档 somwwhere 或者也许有人知道这一点并且可以让我走上正确的轨道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:21:51.997

[https://github.com/LewisW/SublimeAutoSemiColon](https://github.com/LewisW/SublimeAutoSemiColon)几乎就是你想要的。如果您的光标位于 () 之间并且您按下 ; 它会自动跳到行尾并添加到那里。

你也可以查看它的源代码，以便为基础工作以创建你想要的东西。

# database - AbstractMultiTenantConnectionProvider，选择ConnectionProvider

> ID：12674820
> 
> 赞同：1
> 
> 时间：2012-10-01T14:03:16.080
> 
> 标签：database, hibernate, connection, database-schema, multi-tenant

使用 AbstractMultiTenantConnectionProvider 会给我带来一些问题。如果我有 1000 个租户并且我想在不重新启动网络服务器的情况下添加更多租户，我如何轻松使用 selectConnectionProvider？

```
 @Override
protected ConnectionProvider selectConnectionProvider(String tenantIdentifier) {

if( "xml1".equals(tenantIdentifier) ) 
    return xml1;

if( "xml2".equals(tenantIdentifier) ) 
    return xml2;

return null;
} 
```

正如您在此示例中看到的，租户是静态链接的。我怎么能解决这个问题。感谢您提供任何提示或解决方案！干杯，吨。

它是来自这里的后续问题[实施 AbstractMultiTenantConnectionProvider](https://stackoverflow.com/questions/12351724/implement-an-abstractmultitenantconnectionprovider)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:35:39.683

使其成为一个注册表（如模式中所示），您可以根据需要在其中注册/注销租户（“根据需要”由您的应用程序/环境定义）。从结构上讲，MultiTenantConnectionProvider 内部是一个 Map。您可以使用以下方法从 Hibernate SessionFactory 访问 MultiTenantConnectionProvider：

```
MultiTenantConnectionProvider multiTenantConnectionProvider = 
( (SessionFactoryImplementor) sessionFactory )
        .getServiceRegistry()
        .getService( MultiTenantConnectionProvider.class );
YourMultiTenantConnectionProviderImpl yourMultiTenantConnectionProvider = (YourMultiTenantConnectionProviderImpl) multiTenantConnectionProvider;
yourMultiTenantConnectionProvider.registerTenant( ... );
...
yourMultiTenantConnectionProvider.deregisterTenant( ... ); 
```

然后，您只需要决定如何在启动/停止之间保留租户（写入文件等）。就我个人而言，我会在 registerTenant/deregisterTenant 调用后立即坚持。或者，您可以等到关闭（让 YourMultiTenantConnectionProviderImpl 实现 Stoppable），但在 JVM 崩溃的情况下您可能会错过写一些内容。

# php - 如何从 Spotify 应用程序访问我的数据库

> ID：12674821
> 
> 赞同：1
> 
> 时间：2012-10-01T14:03:14.787
> 
> 标签：php, database, spotify

好的，所以我正在构建一个 Spotify 应用程序，并且我需要在这个应用程序中访问我的 MySQL 数据库来获取和插入数据，现在 Spotify 不支持我通常会使用的 PHP 女巫，那么我该如何解决这个问题？我不知道如何在不使用 PHP 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:10:25.357

Spotify API 使用 JavaScript，您可以使用例如 jQuery 框架。只需将 jquery.js 保存到您的插件文件夹并将其包含在您的脚本中。然后，您可以使用 $.post() 和其他方法从外部服务器保存/检索数据。

# android - Android中的离线语音到文本？

> ID：12674822
> 
> 赞同：0
> 
> 时间：2012-10-01T14:03:21.387
> 
> 标签：android, speech-to-text

我想在 android 中做一个应用程序，将语音从来电转换为文本。由于我在通话时无法连接到移动数据，我必须离线进行转换.. 可以吗？我可以使用任何 API 或库来执行此操作吗？接听来电有什么限制吗？请回复..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:07:33.950

常规应用程序可以记录电话所有者的对话，但也可以记录远程用户的声音，您需要具有 root 访问权限以及内核补丁。

至于语音转录，我不知道您可以直接通过电话免费使用任何 api（假设您获得了录制的音频）。

# bash - 在一行 shell 中重命名多个文件

> ID：12674823
> 
> 赞同：3
> 
> 时间：2012-10-01T14:03:21.677
> 
> 标签：bash, shell

# 问题

在一个目录中有以下格式的文件：*-foo-bar.txt。

示例目录：

```
$ ls *-*
asdf-foo-bar.txt  ghjk-foo-bar.txt  l-foo-bar.txt     tyui-foo-bar.txt
bnm-foo-bar.txt   iop-foo-bar.txt   qwer-foo-bar.txt  zxcv-foo-bar.txt 
```

所需目录：

```
$ ls *.txt
asdf.txt  bnm.txt  ghjk.txt  iop.txt  l.txt  qwer.txt  tyui.txt  zxcv.txt 
```

# 解决方案 1

我想到的第一个解决方案看起来有点像这个丑陋的黑客：

```
ls *-* | cut -d- -f1 | sed 's/.*/mv "\0-foo-bar.txt" "\0.txt"/' > rename.sh && sh rename.sh 
```

上述解决方案会即时创建一个脚本来重命名文件。该解决方案还尝试根据[http://mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)`ls`解析不是一件好事的输出。

# 解决方案 2

这个问题可以用这样的 shell 脚本更优雅地解决：

```
for i in *-*
do
    mv "$i" "`echo $i | cut -f1 -d-`.txt"
done 
```

上述解决方案使用循环重命名文件。

# 问题

有没有办法在一行中解决这个问题，这样我们就不必显式编写循环脚本，或生成脚本，或调用新的或当前的 shell（即避免使用 sh、bash、. 等命令） ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T14:06:52.030

您是否尝试过[重命名](http://linux.die.net/man/1/rename)命令？

例如：

```
rename 's/-foo-bar//' *-foo-bar.txt 
```

如果您没有可用的，我会使用`find`,`sed`和`xargs`:

```
find . -maxdepth 1 -mindepth 1 -type f -name '*-foo-bar.txt' | sed 's/-foo-bar.txt//' | xargs -I{} mv {}-foo-bar.txt {}.txt 
```

# c# - DataGridCell 和自定义框架元素内容

> ID：12674825
> 
> 赞同：0
> 
> 时间：2012-10-01T14:03:28.083
> 
> 标签：c#, wpf, datagrid

我正在考虑将我的一个应用程序转换为 WPF，我主要关心的问题之一是`DataGrid`控件的性能（我用户的计算机是过时的 XP 机器，没有专用图形）。我尝试了几千行，滚动性能很糟糕。

我想知道是否有办法将数据网格单元格的内容设置为派生自的自定义类`FrameworkElement`？

这是一个示例类，当放入虚拟化堆栈面板时，它的性能似乎要好得多：

```
public class LiteTextBlock : FrameworkElement
{
    private Size _mySize;
    private string _myText;
    private double totalWidth;
    private GlyphTypeface _typeface;
    private int _fontSize;
    private GlyphRun _run;

    public LiteTextBlock(Size mySize, string myText, GlyphTypeface typeface, int fontSize)
    {
        _mySize = mySize;
        this.Width = _mySize.Width;
        this.Height = _mySize.Height;
        _myText = myText + " additional information";
        _typeface = typeface;
        _fontSize = fontSize;
    }

    protected override void OnRender(DrawingContext drawingContext)
    {
        if (_run == null)
        {
            totalWidth = 0;

            ushort[] glyphIndexes = new ushort[_myText.Length];
            double[] advanceWidths = new double[_myText.Length];

            for (int i = 0; i < _myText.Length; i++)
            {
                ushort glyphIndex = _typeface.CharacterToGlyphMap[_myText[i]];
                double width = _typeface.AdvanceWidths[glyphIndex] * _fontSize;

                if (totalWidth + width >= _mySize.Width - 10)
                {
                    Array.Resize(ref glyphIndexes, i);
                    Array.Resize(ref advanceWidths, i);
                    break;
                }

                glyphIndexes[i] = glyphIndex;
                advanceWidths[i] = width;
                totalWidth += width;
            }

            Point origin = new Point(5, 0);

            _run = new GlyphRun(_typeface, 0, false, _fontSize, glyphIndexes
                , origin, advanceWidths, null, null, null, null, null, null);
        }

        drawingContext.DrawGlyphRun(Brushes.Black, _run);
    }
} 
```

谁能告诉我这是否可能？

免责声明：我已经尝试过使用轻量级控件，例如`ListView`，但性能仍然很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:19:55.760

是的，有办法。

您需要实现自定义[DataGridColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.aspx)并覆盖其[GenerateElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.generateelement.aspx)方法，并且需要处理[DataGrid.AutoGeneratingColumn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)事件以将自定义 DataGridColumn 设置为 DataGrid。

这是自定义 DataGridColumn 的示例：

```
public class DataGridLiteTextColumn : DataGridColumn
{
    private readonly PropertyDescriptor property;

    private readonly GlyphTypeface glyphTypeface = new GlyphTypeface(new Uri("file:///C:\\WINDOWS\\Fonts\\Arial.ttf"));

    public DataGridLiteTextColumn(PropertyDescriptor property)
    {
        this.property = property;
    }

    protected override FrameworkElement GenerateElement(DataGridCell cell, object dataItem)
    {
        var value = property.GetValue(dataItem);
        return new LiteTextBlock(new Size(100, 20), value != null ? value.ToString() : string.Empty, this.glyphTypeface, 10);
    }

    protected override FrameworkElement GenerateEditingElement(DataGridCell cell, object dataItem)
    {
        throw new NotImplementedException();
    }
} 
```

这是 DataGrid.AutoGeneratingColumn 事件的处理程序：

```
private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    e.Column = new DataGridLiteTextColumn((PropertyDescriptor)e.PropertyDescriptor);
} 
```

此代码将用于显示值，尽管 LiteTextBlock 构造函数大小参数可能未设置为适当的值。要编辑值，您还必须实现[GenerateEditingElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcolumn.generateeditingelement.aspx)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:41:41.997

`UI Virtualization`默认启用。但在以下任何一种情况下它都会被禁用 -

1.  DataGrid 在测量排列过程中具有无限的高度。如果 DataGrid 认为它有足够的空间来排列所有项目，那么它不会虚拟化任何东西。当您将 DataGrid 放在堆栈面板中时，通常会发生这种情况。

2.  数据网格的 ItemsPanel。虚拟化由 VirtualizingStackPanel 完成。如果您更改 ItemsPanel，则 VirtualizingStackPanel 将被删除。

3.  项目分组。在 .NET4.0 中，虚拟化不支持分组。在某些情况下，将 GroupStyle 分配给 DataGrid 将关闭虚拟化，即使项目未分组。

请检查您没有陷入上述任何情况。

作为旁注，您还可以`Data Virtualization`在数据网格的 Items Source 上实现。可以在此处找到具有相同证明的示例 -[数据虚拟化](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization "数据虚拟化")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:41:55.153

确保 DataGrid 的[EnableRowVirtualization](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.enablerowvirtualization.aspx)属性设置为 True。默认情况下它应该是 True，但请确保它没有在某处的 Style 中设置为 False。

# php - WordPress - 添加/编辑帖子屏幕选项不显示类别

> ID：12674827
> 
> 赞同：2
> 
> 时间：2012-10-01T14:03:30.133
> 
> 标签：php, wordpress, taxonomy, categories

希望这是一个非常简单的修复，但我只是在我的添加新/编辑帖子屏幕选项中注意到我没有启用/禁用类别（见图）。任何帮助都非常感谢！

![Word Press 3.4.2 - 添加/编辑帖子屏幕选项](../Images/716b3525276c0a9d9e68eaaa805c68ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:45:45.247

在`wp-admin/includes/screen.php`我们看到：

```
<div class="metabox-prefs">
    <?php
        meta_box_prefs( $this ); // draw checkboxes in screen options
    ?>
</div> 
```

和`meta_box_prefs`function 考虑到`get_hidden_meta_boxes`函数：

```
function meta_box_prefs( $screen ) {
    global $wp_meta_boxes;

    $hidden = get_hidden_meta_boxes($screen);

    // hide some boxes
} 
```

此功能包括 2 个过滤器`default_hidden_meta_boxes`和`hidden_meta_boxes`：

```
function get_hidden_meta_boxes( $screen ) {
    // code
    $hidden = apply_filters( 'default_hidden_meta_boxes', $hidden, $screen );
    // code
    return apply_filters( 'hidden_meta_boxes', $hidden, $screen, $use_defaults );
} 
```

* * *

我的结论是**你的一个插件隐藏`categories`**在你的`screen options`.

# ios - AutoHotKey iOS 双空格脚本

> ID：12674830
> 
> 赞同：1
> 
> 时间：2012-10-01T14:03:42.397
> 
> 标签：ios, autohotkey

在 iOS 中，“设置”>“通用”>“键盘”中有一个名为“”的选项。捷径'。启用后，“双击空格键将插入一个句点，后跟一个空格”并自动将下一个字母大写。

有谁知道如何创建一个 AutoHotKey 脚本来执行此操作，因为我发现它在 iOS 中非常有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:57:58.833

本，

你可以试试这个：

```
~$Space:: ; trigger on {Space}
if (A_PriorHotkey <> "~$Space" or A_TimeSincePriorHotkey > 250)
    Return
SendInput, {BS 2}.{Space}
Input, NextKey, I L1 T10 V B, {LControl}{RControl}{LAlt}{RAlt}{LShift}{RShift}{LWin}{RWin}{AppsKey}{F1}{F2}{F3}{F4}{F5}{F6}{F7}{F8}{F9}{F10}{F11}{F12}{Left}{Right}{Up}{Down}{Home}{End}{PgUp}{PgDn}{Del}{Ins}{BS}{Capslock}{Numlock}{PrintScreen}{Pause}

If NextKey and NextKey is lower
    SendInput, {BS}+%NextKey%
Return 
```

# selenium - 测试失败时浏览器不会关闭

> ID：12674831
> 
> 赞同：-1
> 
> 时间：2012-10-01T14:03:44.423
> 
> 标签：selenium, grid

我正在使用 selenium grid 2 进行并行测试。我有下一个问题，当测试失败时，浏览器没有关闭导致阻塞节点。如果可以为节点定义任何超时以重新启动浏览器或取消测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T14:47:34.530

使用 try catch 并在测试失败时关闭浏览器 finally 使用

```
try{
steps you want to test
}
catch(exception e){
System.out.println(e.printstacktrace)
}
finally{
driver.close();
driver.quit();
} 
```

不惜一切代价 finally 块将执行并且您的浏览器将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:36:23.547

如果在 selenium grid2 节点上测试失败，则该节点不会被阻塞。即使浏览器在上次失败的测试中保持打开状态，同一节点也可以用于另一个测试。

# google-chrome - 使用 Google Chrome 启动应用程序池很慢

> ID：12674833
> 
> 赞同：0
> 
> 时间：2012-10-01T14:03:54.237
> 
> 标签：google-chrome, iis-7.5, application-pool

这是让我完全困惑的一个。

IE、Firefox、Safari 不会发生此问题，只有 Google Chrome。（我没有测试过其他浏览器）。

基本上，我运行自己的 Web 服务器 IIS 7.5，并在其上拥有许多开发网站，这些网站将在同一台服务器上发布并用于生产。由于有许多网站，我必须对应用程序池使用动态空闲时间，因为资源受到限制。

通常这不会成为问题，并且是看似基于 Microsoft 最佳实践的做事方式，但是一旦应用程序池超时/闲置，Chrome 加载页面似乎存在问题。

现在我知道应用程序池需要时间才能重新启动，它们会在几秒钟内完成并在不久之后提供内容，但对于 Chrome，应用程序池需要将近一分钟才能启动。

然而，这不会在网站首次加载时发生 - 它只会在同一浏览器/会话中的后续加载时发生。

正如我所说，IE、Firefox 或 Safari 不会发生这种情况，我测试过的其他浏览器，应用程序池几乎立即重新启动。

我曾认为这可能是服务器端问题，但由于其他浏览器工作正常，我只能认为是 Chrome 有问题。但是我仍然想确保它实际上不是服务器端问题。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:42:39.537

我刚刚意识到我在 Stack 上发布了它应该在 Server Fault 上的位置。

对不起。

无论如何，我在问题中写的一些东西促使我进一步调查，我发现这似乎不是应用程序池问题，虽然它可能是，但更像是 PHP-CGI 问题。它甚至可能被本地化到我自己的机器上。

# facebook - Facebook 错误中的内联视频播放器

> ID：12674837
> 
> 赞同：1
> 
> 时间：2012-10-01T14:04:14.803
> 
> 标签：facebook, flash, apache-flex, video, inline

虽然我在早期阶段创建了一个播放器，但我需要像 youtube 一样在 Facebook 时间轴内播放视频。我已将标签放置如下：

```
<meta property="og:title" content="Little Cast Video Test"/>
    <meta property="og:description" content="Little Cast Video Test"/>
    <meta property="og:type" content="movie"/>
    <meta property="og:video:height" content="270"/>
    <meta property="og:video:width" content="480"/>
    <meta property="og:url" content="http://littlecast.confiz.com/littlecast/fbtest.html"/>
    <meta property="og:video" content="http://littlecast.confiz.com/littlecast/main.swf">
    <meta property="og:video:secure_url" content="https://littlecast.confiz.com/littlecast/main.swf">
    <meta property="og:image" content="http://littlecast.confiz.com/littlecast/thumb.jpg"/>
    <meta property="og:video:type" content="application/x-shockwave-flash"> 
```

Facebook 调试器还显示此页面中没有错误/警告，但播放器仍然没有显示，也没有播放到 facebook。

我需要让我的播放器从 facebook 获得批准还是应该按原样工作？

PS：我的播放器是用 Flex 编写的。如果您需要检查 html 主机文件，请点击此网址：[我的网址](http://littlecast.confiz.com/littlecast/fbtest.html)

# asp.net - Web 应用程序非常慢，直到重新启动 iis

> ID：12674839
> 
> 赞同：2
> 
> 时间：2012-10-01T14:04:25.000
> 
> 标签：asp.net, debugging, iis

我在 IIS 中有一些问题。我为我的问题安装了调试诊断工具。

运行它并开始分析后，我收到 1 条错误消息：

在 w3wp_ *system* _PID_ *696* _Date__09_22_2012__Time_11_44_51AM_ *967* _Second_Chance_Exception_C0000005.dmp 中，msxml6!Base::freeRentalObjects+75 in C:\Windows\System32\msxml6.dll 中来自 Microsoft Corporation 的汇编指令导致访问冲突异常（0xC0000005）线程上的内存位置 0x00000008

我该如何解决这个问题？

# objective-c - 如何将开源 tableview 徽章委托给 UITableview

> ID：12674840
> 
> 赞同：0
> 
> 时间：2012-10-01T14:04:24.250
> 
> 标签：objective-c, ios, uitableview, badge

我知道关于如何将徽章添加到 tableviewcell 的类似问题已被问过几次，但我无法使其正常工作

基本上我想要的是向用户显示一个简单的通知，要么是表格视图单元格右侧的红色数字，要么是一个矩形，或者像本机电子邮件应用程序一样。

所以我尝试了这两个源代码[TDbadgcell](https://github.com/tmdvs/TDBadgedCell)和[DDbadgecell](https://github.com/digdog/DDBadgeViewCell)

现在的问题是我不能委托他们，我必须导入他们的 .h 类并在我的表格视图中调用以下任一函数

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    TDBadgedCell *cell = [[TDBadgedCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; 
```

或者

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    DDBadgeViewCell *cell = (DDBadgeViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[DDBadgeViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    } 
```

但是当我这样做时，我的`tableView didSelectRowAtIndexPath:`方法`(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`不起作用，我可以单击行但它们保持蓝色，没有任何反应，我在表格右侧的箭头也消失了。

那么如何使用上述源代码或任何其他方法将徽章添加到表格视图单元格行？

编辑::: 放置 NSLOG 后，我可以看到确实调用了选择行，但执行 segue 仍然不起作用。无需添加上述任何代码，它就可以完美运行。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //static NSString *CellIdentifier = @"MeetingCell";

    static NSString *CellIdentifier = @"Cell";
    DDBadgeViewCell *cell = (DDBadgeViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[DDBadgeViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSString *description =@":";
    NSString *name =@"";
    NSString *fileStatus=@"";

    name = [[self agenda] getFileNameWithSection:[indexPath section] Row:[indexPath row]];
    description = [[self agenda] getFileDescriptionWithSection:[indexPath section] Row:[indexPath row]];

    fileStatus = [[self agenda] getFileStatusWithFileName:name];

    NSString * cellLabel = [NSString stringWithFormat:@" %@ : %@",description,name];

    //alloc row images
    UIImage *docImage = [UIImage imageNamed:@"ICON - Word@2x.png"];
    UIImage *xlsImage = [UIImage imageNamed:@"ICON - Excel@2x.png"];
   // UIImage *picImage = [UIImage imageNamed:@"ICON - Image@2x.png"];
    UIImage *pdfImage = [UIImage imageNamed:@"pdf icon@2x copy.png"];
    UIImage *pptImage = [UIImage imageNamed:@"ICON - PPT@2x.png"];

    //Determine what status to display for a file
    //No need to that since wee use push notification
    if ([fileStatus isEqualToString:@"new"]){
        cellLabel = [NSString stringWithFormat:@"%@ (%@)",cellLabel,@"New"];
        cell.badgeText = [NSString stringWithFormat:@"Update"];
        cell.badgeColor = [UIColor orangeColor];
    }else if ([fileStatus isEqualToString:@"outdated"]){
        cellLabel = [NSString stringWithFormat:@"%@ (%@)",cellLabel,@"Outdated"];
        cell.badgeText = [NSString stringWithFormat:@"Update"];
        cell.badgeColor = [UIColor orangeColor];
    }else if ([fileStatus isEqualToString:@"updated"]){
        cellLabel = [NSString stringWithFormat:@"%@ (%@)",cellLabel,@"Latest"];
    }

    UIFont *font1 = [UIFont fontWithName:@"Century Gothic" size:15.0f];
    cell.textLabel.font=font1;
    //if there is no file user can not tocuh the row
    if ([name length]==0) {
        cell.userInteractionEnabled = NO;
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.textLabel.text = description;

    }else{
        //set cell title

        cell.textLabel.text = cellLabel;
    }
    //set row images
    if ([name rangeOfString:@"docx"].location != NSNotFound) {

        cell.imageView.image= docImage;

    }else if ([name rangeOfString:@"xlsx"].location != NSNotFound){
        cell.imageView.image= xlsImage;

    }
    else if ([name rangeOfString:@"pdf"].location != NSNotFound){
        cell.imageView.image= pdfImage;
    }
    else if ([name rangeOfString:@"ppt"].location != NSNotFound){
        cell.imageView.image= pptImage;
    }

    cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"rounded corner box center@2x.png"]];
    // At end of function, right before return cell
    cell.textLabel.backgroundColor = [UIColor clearColor];

    NSLog(@"%@",cell.textLabel.text);
    return cell;

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];.0

     */

    NSLog(@"didselect row is called %d",indexPath.row);

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[DBSession sharedSession] isLinked]) {
    if([[segue identifier] isEqualToString:@"pushDocumentView"])
    {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSInteger section =[indexPath section];
        NSInteger row = [indexPath row];
        NSString *fileName = [[self agenda] getFileNameWithSection:section Row:row];

        NSDictionary * agendaDic = [[[self agenda]revision] objectForKey:fileName];
        NSString *fileStatus  =[agendaDic objectForKey:@"status"];

        DocumentViewController *docViewController  = [segue destinationViewController];
        //This will display on the Document Viewer
        docViewController.fileName=fileName;
        //This will determine remote or local copy display
        docViewController.fileStatus=fileStatus;

    }
    }else {
        [self displayError];
        [self setWorking:NO];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:18:58.693

刚刚用标识符称为 perfromsegue

因为`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`当你打电话时也会调用它 `[self performSegueWithIdentifier:@"yoursegue" sender:self];`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];.0

     */

    [self performSegueWithIdentifier:@"yoursegue" sender:self];

    NSLog(@"didselect row is called %d",indexPath.row);

} 
```

# joomla - 为每个 ul 和 li添加了 nolink 类

> ID：12674841
> 
> 赞同：0
> 
> 时间：2012-10-01T14:04:29.310
> 
> 标签：joomla, joomla3.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:49:44.123

我想我找到了问题所在。
这是由于`/administrator/modules/mod_submenu/tmpl/default.php`第 26 行文件中未关闭的标签。

已在 JoomlaCode 上创建工单：[[#29623] 子菜单布局中缺少结束链接标签](http://joomlacode.org/gf/project/joomla/tracker/?action=TrackerItemEdit&tracker_item_id=29623)

我们只需要等待下一个 Joomla 版本。

您还可以`'</a>'`在第 26 行的末尾添加标签，如下所示：

```
?><a class="nolink"><?php echo $item[0]; ?></a><?php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T05:24:09.507

`function addtoolbar`更改文件中的以下代码`view.html.php`。

在编辑页面视图中将主菜单参数更改为 false。

```
JFactory::getApplication()->input->set('hidemainmenu', false); 
```

如果我们需要使用上面的代码显示主菜单，那么下面的代码`<a class="nolink"></a>`不会在编辑页面中生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:00:12.067

我尝试了 Joomla 3.0 附带的所有默认编辑器：（
在用户 -> 用户管理器 -> 超级用户 -> 基本设置 -> 编辑器中：）

*   编辑器 - CodeMirror*   编辑器 - 无*   编辑 - TinyMCE

    这里没有出现这个问题。我还尝试使用 TinyMCE 编辑器上的按钮添加 ul 和 li 标签。

    您能否详细说明您是如何添加这些 ul 和 li 标签的？
    你用的是什么编辑器？

# ruby-on-rails - 升级 Rails 和旅程路由器后控制器测试中的路由错误

> ID：12674842
> 
> 赞同：1
> 
> 时间：2012-10-01T14:04:31.280
> 
> 标签：ruby-on-rails, rspec, routes, journey

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:26:49.170

我认为你的问题在于你的正则表达式和你的测试数据不匹配。在您的错误消息中，我看到：

```
No route matches {:plate=>"ABC1586", :model=>"model", :type=>"type", 
 :brand=>"brand", :controller=>"site/vehicles", :action=>"show"} 
```

但是该路线具有以下用于板的正则表达式：

```
:plate => /[a-z]{3}\d{4}/ 
```

这需要所有小写字母；大写字母不匹配。因此，您需要修复您的测试数据，或者修复您路线中的正则表达式。

# perl - 找到关于 perl 中每个键的最大哈希值

> ID：12674845
> 
> 赞同：0
> 
> 时间：2012-10-01T14:04:50.857
> 
> 标签：perl, hash, key

我有一个具有这种结构的文件

```
>test1
MATRTQARGA 
>test2
MRIIEGKLQLQG
>test1
 MATRTQARGAVVELLYAFESGNEEIKKIASSML 
```

在我想要的结果中

```
>test2
MRIIEGKLQLQG
>test1
MATRTQARGAVVELLYAFESGNEEIKKIASSML 
```

我正在考虑一个**哈希结构**，其中键是带有 > 的行，每个 > 行之后的下一行将是每个键的值，然后我如何打印长度最长的字符串，但是由于哈希结构不能有重复的键我不知道该怎么办

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:14:12.587

您不需要重复的键，您只需为每个键存储当前最长的值，并在获得更长的值时替换它：

```
my %longest;
my $curkey;

while (<>) {
  chomp;
  if (/^>/) {
    $curkey = $_;
    $curkey =~ s/^.//; # Remove '>' prefix;
    next;
  } 
  if (length($_) > length($longest{$curkey})) {
    $longest{$curkey} = $_;
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T15:37:29.937

另一种不太直观的方式

```
#!/usr/bin/env perl
use strict;
use Data::Dumper;

local $/ = ">"; # local not really needed here, as its in the global scope..
my %unqs;

while(<DATA>) {
    next if (m/^\s*>/);
    my @arr = grep { not m/>|^\s*$/ } split(/\n/);
    $unqs{$arr[0]} = $arr[1] if (length($arr[1]) > length($unqs{$arr[0]}));
}

print Dumper(\%unqs);

__DATA__
>test1
MATRTQARGA 
>test2
MRIIEGKLQLQG
>test1
MATRTQARGAVVELLYAFESGNEEIKKIASSML 
```

现在您可以使用`%unqs`哈希并将其打印到文件中，您最终将得到您想要的。

# r - 我的班怎么了？

> ID：12674847
> 
> 赞同：2
> 
> 时间：2012-10-01T14:04:58.687
> 
> 标签：r, xts

为什么“myclass”在以下示例中消失了？如何避免这种情况？

```
#
library(xts)

# sample data
fo <- "%Y-%m-%d %X"
st <- Sys.time()
delta <- seq(from=0, by=10, length.out=10)
ma1 <- matrix(data=sin(delta/50), ncol=1, nrow=10)
ma2 <- matrix(data=sin(delta/25), ncol=1, nrow=10)
d1a <- xts(x=ma1, order.by=strptime(st, format=fo) + delta)
d2a <- xts(x=ma2, order.by=strptime(st, format=fo) + delta)
d1b <- xts(x=ma1, order.by=strptime(st, format=fo) + delta)
d2b <- xts(x=ma2, order.by=strptime(st, format=fo) + delta)
d1c <- xts(x=ma1, order.by=strptime(st, format=fo) + delta)
d2c <- xts(x=ma2, order.by=strptime(st, format=fo) + delta)

# original class
class(d1a)
class(d2a)
#
d3a <- d1a + d2a

# class
class(d1b) <- "myclass"
class(d2b) <- "myclass"
#
d3b <- d1b + d2b

# class
class(d1c) <- c("myclass","xts","zoo")
class(d2c) <- c("myclass","xts","zoo")
#
d3c <- d1c + d2c

#
class(d3a)
[1] "xts" "zoo"
class(d3b)
[1] "myclass"
class(d3c)
[1] "xts" "zoo" # expected was "myclass" "xts" "zoo" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:29:00.303

很简单，因为您还没有为 定义`+`方法`myclass`，所以 xts 方法被调度......它返回一个 xts-class 对象。

这可以通过定义轻松解决：

```
Ops.myclass <- xts:::Ops.xts 
```

# c# - json字符串反序列化的困难

> ID：12674852
> 
> 赞同：0
> 
> 时间：2012-10-01T14:05:19.243
> 
> 标签：c#, json, silverlight, windows-phone-7

`Silverlight`我在Windows Phone中发出网络请求。这就是回应。

```
{"result": {
"account": null,
"checkInfo": null,
"command": null,
"shifts": [
    {
        "description": "17:45 - 17:55 work shift",
        "id": 5459,
        "venueId": 132
    }]}} 
```

我使用`Newtonsoft.Json.dll`，我的目的是捕捉数组 - 班次。

```
JObject obj = JObject.Parse(StringShifts);
JArray sh = (JArray)obj["shifts"]; 
```

但每一次`sh`的价值都是`null`。我在做什么错？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:16:55.913

```
var obj = (JObject)JsonConvert.DeserializeObject(json);
foreach (var shift in obj["result"]["shifts"])
{
    Console.WriteLine((string)shift["description"]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:31:39.587

另一种方法是：（这非常有帮助，如果您在项目中进行更多这样的操作）在您的项目
中创建这些类

```
public class Shift
    {
        public string description { get; set; }
        public int id { get; set; }
        public int venueId { get; set; }
    }

    public class Result
    {
        public object account { get; set; }
        public object checkInfo { get; set; }
        public object command { get; set; }
        public List<Shift> shifts { get; set; }
    }

    public class RootObject
    {
        public Result result { get; set; }
    } 
```

然后在你的代码中

```
 var rootObject = JsonConvert.DeserializeObject<RootObject>(StringShifts);
 foreach(var shift in rootObject.result.shifts)
 {
     Console.Write(shift.description);
 } 
```

这样您就可以更好地控制您的 json 响应数据。但是 LB 的答案是否是您应用程序中的一次处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:20:38.223

您缺少`results`根节点；这就是你应该如何使用它：

```
JArray sh = (JArray)obj["result"]["shifts"]; 
```

另外，请注意`}`上面的 JSON 示例末尾缺少一个！

# asp.net - 开发站点创建会话正常，生产站点没有

> ID：12674854
> 
> 赞同：0
> 
> 时间：2012-10-01T14:05:25.787
> 
> 标签：asp.net, session-variables

我有两个站点在同一台服务器上运行（Win2003 上的 IIS7）。

站点 A 是我的生产站点。

站点 B 是站点 A 的开发版本。除了其 web.config 文件中的连接字符串外，**两个站点都运行相同的代码**。

global.asax 中的 Session_OnStart 中创建了一些会话变量。在过去的几周里，我注意到站点 A 的会话变量没有正确创建。（这些变量用于填充几个下拉列表）这会导致下拉列表不会自动填充或其他错误，具体取决于用户尝试点击的页面。

站点 B 的会话变量一直在正常工作。当我点击站点 B 时，下拉菜单按我的预期填充。

我想尝试的第一件事是重置 IIS 以查看这是否可以解决问题，但我想知道如果两个站点都运行相同的代码，为什么我的会话无法正确创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:17:17.553

我想出了一个解决方案，但我仍然不知道为什么会这样。

我结束了防御性编码以处理我感兴趣的会话变量，但未正确初始化。发生这种情况时，我有正确设置变量的代码。（多年来我一直是 .NET 开发人员，这是会话第一次成为问题）

我可以排除大多数常见原因 - 我知道会话没有超时，并且我知道没有对 web.config 或任何 IIS 设置进行更新（它是一个生产站点，所以没有人在不提供支持的情况下接触 IIS票，并且唯一为 IIS 提供支持票的人是我）。

当用户单击站点中的特定链接时，这似乎是一个问题。由于某种原因，访问此特定页面导致会话变量丢失。我无法解释原因，但至少我已经让代码正常工作并且不再抛出异常。

# javascript - 在 Optimizely 中，基本的 jquery 点击事件不起作用

> ID：12674856
> 
> 赞同：0
> 
> 时间：2012-10-01T14:05:27.223
> 
> 标签：javascript, jquery, javascript-events, optimizely

在 Optimizely 中，我正在尝试做一些基本的点击事件。我知道 Optimizely 只在 jquery 1.6 上，所以使用`on()`, `off()`for events 是没用的。为了确保，我使用的是最基本的事件处理程序`click(function(){ ... }));`，但即使这样也不起作用。我被告知要使用 window.$ 但在`click()`这种技术中也不起作用。Optimizely中的jquery不同吗？

我知道 Optimizely 和 jQuery 之间存在某种问题，但请有人能帮我解释一下吗？

JS 片段：

```
(function(window.$) {

  window.$.fn.tabbs = function(options) {
    var settings = {
            dir: 'top',
            trigger: 'a',
            target: '.tab-section',
            selected: 'selected'
        },
        html = $('html');

    window.alert('jquery object: ' + window.$);

    if (html.hasClass('no-js')) {
        html.removeClass('no-js').addClass('js');
    } else {
        html.addClass('js');
    }

    var classAction = function(obj, action, cls) {
        window.$(obj)[action](cls);
    };

    window.$.extend(settings, options);

    return this.each(function() {
        var tabs = window.$(this),
            tab = tabs.find(settings.trigger),
            tabSection = window.$(settings.target),
            tabsSystemContainer = tabs.closest('div');

        switch(settings.dir) {
            case 'left':
                tabsSystemContainer.removeClass(settings.dir || 'top').addClass('left' || settings.dir);
                break;
            default:
                tabsSystemContainer.removeClass('left' || settings.dir).addClass(settings.dir || 'top');
        }
        //this where I'm having problems
        tab.click(function(e) {
            var self = window.$(this);

            e.preventDefault();

            window.alert('Hello, inside tab click event...');
        });
    });
  };
}(window.jQuery));

window.$('.tabs').tabbs(); 
```

许多Thnaks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:35:24.873

第 1 行有语法错误：

```
(function(window.$) { 
```

应该读

```
(function($) { 
```

您可以使用任何您喜欢的 jQuery (>= 1.6)：只需嵌入您想要的，然后在 Optimizely 的设置 -> jQuery 设置中，选择“不要在项目代码中包含 jQuery”，一切都会正常工作。不过，请确保在 Optimizely 脚本标记之前包含您自己的 jQuery。

# jquery - Safari Mobile 中的点击高亮和 jQuery on() 函数产生巨大的高亮

> ID：12674857
> 
> 赞同：1
> 
> 时间：2012-10-01T14:05:28.837
> 
> 标签：jquery, ios, css, mobile-safari

我`on()`在 iOS 的 Safari 移动浏览器上使用 jQuery 的功能，如下所示：

```
$("#content").on(".element", click(function(){ do stuff}); 
```

单击`.element`Safari 时会突出显示整个`#content`区域，而不仅仅是该区域`.element`。

使用时

```
$(".element").click(function(){do stuff}); 
```

而是突出显示右侧区域。我想这是预期的行为，但对用户来说根本不直观，所以我正在寻找一种解决方法。

我知道我可以通过使用完全摆脱突出显示，`-webkit-tap-highlight-color: rgba(0,0,0,0);`但我认为突出显示实际上通常非常有用，因为 CSS 的悬停在移动设备上已经没有用了。

**jQuery 的 on 函数和 Safari Mobile 有没有办法获得点击高亮`.element`？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:41:52.057

我通过以下方式解决了它：

1.  放入启用css伪类`document.addEventListener("touchstart", function(){}, true);`的文档准备功能`:active`
2.  完全禁用点击突出显示：`-webkit-tap-highlight-color: rgba(0,0,0,0);`
3.  添加`.element:active{background: #cccccc;}`

这样，点击的（活动）元素在触摸时会获得漂亮的灰色背景。

# sql - Oracle 物化视图的生命周期

> ID：12674861
> 
> 赞同：1
> 
> 时间：2012-10-01T14:05:38.570
> 
> 标签：sql, oracle, materialized-views

我正在寻找 Oracle 物化视图的生命周期。例如语句：

`Create materialized view foo
Refresh On Commit
...`

每次提交到我的数据库时，是否会更新此视图，或者仅更新视图语句中引用的表之一？除此之外，Oracle 会在什么时候销毁旧缓存并用新缓存替换它？具体来说，物化视图的“陈旧”窗口是什么？意思是它取决于创建物化视图需要多长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:37:53.453

该`ON COMMIT`子句将[修改在基表上发布 DML 的所有事务的提交过程](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6002.htm#SQLRF54159)：

> 指定 ON COMMIT 以指示每当数据库提交在物化视图的主表上操作的事务时将发生快速刷新。此子句可能会增加完成提交所需的时间，因为数据库执行刷新操作是提交过程的一部分。

提交将取决于物化视图的刷新是否成功（这意味着提交可能会失败，因为无法刷新依赖的 MV）。

刷新发生在与发出提交的事务相同的事务中。这意味着一旦提交完成，所有会话都可以看到更改（因此数据永远不会过时）。

您必须注意的一些事项：

*   使用 on-commit MV 有性能成本：物化视图日志（将 DML“触发器”添加到基表）增加了 DML 上的工作，显然提交将执行比平常更多的工作。对您的工作量进行基准测试，以确保额外的工作不会成为负担。
*   在聚合的提交 MV 中，并发事务可以更新相同的 MV 行，这可能会导致在额外工作之上的提交期间出现一些争用。
*   有些工具不希望提交失败，这可能会导致一些 UI 问题（通常是旧的客户端-服务器应用程序）。

# apache - 将 db.example.com 重写为 example.com/db

> ID：12674866
> 
> 赞同：0
> 
> 时间：2012-10-01T14:06:01.503
> 
> 标签：apache

我有自己的 apache 服务器，我正在尝试了解它的怪癖......我有 DNS 将 example.com 指向 1.2.3.4，并且我已经在 apache2 服务器上设置了一个虚拟主机。

现在我想在同一个 vhost 中指向 db.example.com 来服务 example.com/db 的内容。我希望我可以使用某种 mod_rewrite og ServerAlias，但到目前为止我已经热了一堵墙。

DNS部分被覆盖了，我只是不知道在apache中做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:08:52.327

在您的`.htaccess`文件中，尝试以下内容：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^db\.example\.com 
RewriteRule (.*) http://example.com/db/$1 [L] 
```

# ios - Xcode 4.5 故事板崩溃

> ID：12674868
> 
> 赞同：1
> 
> 时间：2012-10-01T14:06:07.127
> 
> 标签：ios, xcode, interface-builder, uistoryboard, autolayout

很多时候，当我尝试在情节提要中编辑 UILabel 时，Xcode 会崩溃。有什么想法可能导致这种情况吗？看起来它与自动布局约束之一有关。这是错误报告：

```
Process:         Xcode [43938]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5 (1839)
Build Info:      IDEApplication-1839000000000000~3
App Item ID:     497799835
App External ID: 10747437
Code Type:       X86-64 (Native)
Parent Process:  launchd [43283]

Date/Time:       2012-10-01 09:43:36.443 -0400
OS Version:      Mac OS X 10.7.4 (11E53)
Report Version:  9
Sleep/Wake UUID: 8C7C93A7-0BEF-42C6-944C-488D8C7896DD

Interval Since Last Report:          152594 sec
Crashes Since Last Report:           6
Per-App Interval Since Last Report:  135715 sec
Per-App Crashes Since Last Report:   5
Anonymous UUID:                      E745D8FE-362B-4FD2-8594-7EC5C26767B2

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4G182
ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilderCocoaTouch/IDEInterfaceBuilderCocoaTouch-1926/IBPlugin/Utilities/IBObjectMarshalling.m:651
Details:  Failed to start deciding frames for IBNSLayoutConstraint, IBUILabel, IBUITabBarItem, IBUITableView, IBUIView, and IBUIViewController.

Interface Builder encountered an error communicating with the iOS Simulator. If you choose to file a crash report or radar for this issue, please check Console.app for crash reports for "Interface Builder Cocoa Touch Tool" and include their content in your crash report.

Exception name: IBAssertionFailure
Exception reason: ASSERTION FAILURE: realConstraint
Reason:     Should have found real constraint for represented constraint <NSLayoutConstraint:0x86a8c30 H:[UIView:0x868a0f0(71)]>
File:       /SourceCache/IBAutolayoutFoundationIOS/IBAutolayoutFoundation-1818/Framework/Classes/Arbitration/IBAutolayoutEngine.m:223
Method:     __76-[IBAutolayoutEngine realConstraintsFromCollectionOfRepresentedConstraints:]_block_invoke_0
Exception backtrace: 
  0\. CoreFoundation           0x022a4012 __exceptionPreprocess
  1\. libobjc.A.dylib          0x01703e7e objc_exception_throw
  2\. CoreFoundation           0x0232cfb1 -[NSException raise]
  3\. ???                      0x0000beae [IBCocoaTouchTool startAutolayoutFrameDecisionSessionWithRequest:document:]
  4\. ???                      0x000342a5 [IBMessageReceiveChannel deliverMessage:toTarget:withArguments:result:]
  5\. ???                      0x00033fa9 [IBMessageReceiveChannel deliverMessage:toTarget:withArguments:result:]
  6\. ???                      0x00033c47 [IBMessageReceiveChannel runBlockingReceiveLoopNotifyingQueue:notifyingTarget:]
  7\. libdispatch.dylib        0x04c3d731 _dispatch_barrier_sync_f_slow_invoke
  8\. libdispatch.dylib        0x04c4c014 _dispatch_client_callout
  9\. libdispatch.dylib        0x04c3c7d5 _dispatch_main_queue_callback_4CF
 10\. CoreFoundation           0x0224aaf5 __CFRunLoopRun
 11\. CoreFoundation           0x02249f44 CFRunLoopRunSpecific
 12\. CoreFoundation           0x02249e1b CFRunLoopRunInMode
 13\. Foundation               0x01308c7c -[NSRunLoop(NSRunLoop) runMode:beforeDate:]
 14\. ???                      0x0000cf06 [IBCocoaTouchTool startServingReceiveChannel:]
 15\. ???                      0x0000d09f [IBCocoaTouchTool startServingWithSocket:]
 16\. ???                      0x0000e1b7 [IBCocoaTouchTool .cxx_destruct]
 17\. ???                      0x00002365 ???
Exception info:{
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:16:57.110

我有同样的问题......在使用“圆角矩形按钮”的情节提要中工作时，它会崩溃。有时只有一两个按钮，有时我可以添加十个按钮，然后它就崩溃了。

编辑：经过一些实验，我在情节提要的“文件检查器”中取消选中“使用自动布局”并且它可以工作。也许你会试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T04:33:34.257

一种解决方法是从 Storyboard 剪切并粘贴到 .xib。

* 对我来说，当 ContainerView 被拖到画布上时，它会在带有 .xib 的 IB 中崩溃。Xcode 版本 8.2.1。

# d3.js - D3 强制布局：使拖动（缩放）上的平移更平滑

> ID：12674872
> 
> 赞同：9
> 
> 时间：2012-10-01T14:06:33.897
> 
> 标签：d3.js, zooming, drag, force-layout, pan

我有一个 d3.js 静态力布局图，它可以变得相当大（有时部分被剪裁），所以我想让用户通过拖动来平移整个图。我认为我不需要拖动单个节点，我有一种感觉会令人困惑，但希望能够显示被 svg 边界裁剪的图形部分。

我在[http://bl.ocks.org/3811811](http://bl.ocks.org/3811811)有一个最小的例子，它使用

```
visF.append("rect")
 .attr("class", "background")
 .attr("width", width)
 .attr("height", height)
 .call(d3.behavior.zoom().on("zoom", redrawVisF));
function redrawVisF () {
  visF.attr("transform","translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");
} 
```

来实现平移，但我发现它真的很“飘忽”，而且根本不是很平滑，以至于我猜它会阻止人们尝试拖动功能。有没有人知道为什么会发生这种情况和/或如何解决它的想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T16:07:38.430

问题是`d3.behavior.zoom`检索当前鼠标相对于单击项目的容器元素的位置，并且您正在移动容器元素！所以相对位置是不断变化的，因此你会看到抖动效果。

您可能想要移动背景`<rect>`，使其成为元素的直接子`<svg>`元素。这实现了两件事：

1.  该位置现在将相对于`<svg>`不会移动的容器。
2.  目前，您在`<rect>`缩放或平移时正在移动 ，因此可缩放区域会发生变化，并且视口的某些部分不再可缩放。将背景`<rect>`放在同一个地方也可以解决这个问题。

# ruby - Sequel 中的存储过程返回码（Ruby ORM）

> ID：12674874
> 
> 赞同：2
> 
> 时间：2012-10-01T14:06:35.410
> 
> 标签：ruby, sequel

在 MS SQL Server 中，存储过程可以返回一个称为[返回码](http://msdn.microsoft.com/en-us/library/ms190778%28v=sql.105%29.aspx)的整数值，以指示过程的执行状态。

续集支持吗？

返回的值`my_stored_proc.call()`与我在 SQL 中返回的整数不匹配。还有其他方法可以访问它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T11:55:58.817

现在使用以下方法从Sequel 的[4.6版开始支持：](https://github.com/jeremyevans/sequel/blob/master/doc/release_notes/4.6.0.txt)`call_mssql_proc`

```
DB.call_mssql_sproc(:SequelTest, {:args => ['Input String', :output]})

> {:result => 0, :numrows => 1, :var1 => "1"} 
```

结果将在`:result`元素中。

阅读“ [MSSQL 中的存储过程](https://github.com/jeremyevans/sequel/blob/master/doc/mssql_stored_procedures.rdoc)”了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T07:12:04.973

Jeremy Evans 在 Sequel Talk Google Group 上的回复是：

> 不幸的是，Sequel 对存储过程的支持相当有限。我不相信它支持返回码或输入/输出变量。它的设计类似于准备好的语句支持，其中删除/更新返回受影响的行数，而选择产生行。
> 
> 如果 Sequel 的支持不能满足您的需求，请使用 Database#synchronize 获取底层数据库连接，并使用连接的 API（取决于使用的驱动程序）直接对其进行操作。

“[从 JDBC MSSQL 获取返回值](https://stackoverflow.com/questions/1947754/getting-the-return-value-from-jdbc-mssql)”描述了如何从 Java 角度进行操作。

而且，这是 Ruby 实现的（工作）第一次尝试：

```
return_code = @db.synchronize do |conn|
  stmnt = conn.prepareCall('{ ? = call dbo.sp_sequel_test() }')
  stmnt.registerOutParameter(1, java::sql::Types::INTEGER)
  stmnt.execute
  # output parameters have not yet been processed, must call getMoreResults() first.
  stmnt.getMoreResults  
  stmnt.getInt(1)
end 
```

# spring - 在 ResourceBundleMessageSource 中嵌套标签 - 可能吗？

> ID：12674875
> 
> 赞同：1
> 
> 时间：2012-10-01T14:06:40.503
> 
> 标签：spring, resourcebundle

我想使用[ResourceBundleMessageSource](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/ResourceBundleMessageSource.html)实现以下行为：

有下面的文件，我想呈现`Dear Customer of MyCompany`消息。

```
# messages.properties
company.name=MyCompany
welcomeMessage.beginning=Dear Customers of ${company.name} 
```

是否可以以某种方式将一个标签的键嵌套在另一个标签的值中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T14:58:36.153

是的，解析任意对象是 MessageSource 接口的一部分。因此，要解析纯消息代码，您只需将其包含在 DefaultMessageSourceResolvable 中，例如：

```
messageSource.getMessage("welcomeMessage.beginning",
                         new Object[]{new  DefaultMessageSourceResolvable("company.name")},
                         locale); 
```

您不需要花哨的消息格式（标准 MessageFormat 也不允许您使用），只需使用：

```
# messages.properties
company.name=MyCompany
welcomeMessage.beginning=Dear Customers of {0} 
```

# spss - 如何使用SPSS按组获取问卷项目的描述性统计？

> ID：12674878
> 
> 赞同：6
> 
> 时间：2012-06-14T12:22:29.543
> 
> 标签：spss

我使用李克特量表问卷对产品进行了评估，并将日期导入 SPSS。我的专栏安排如下：

ID、组、Q1、Q2、Q3、Q4

我有两个不同的小组完成问卷，每个人都有不同的数字 ID。在 Q 列下，我有来自李克特量表的那个人的分数（从 1 到 5）。

总共有 300 多个回复。

我正在使用菜单栏中的“描述性统计/频率”进行分析，但没有得到我正在寻找的表格。基本上，它将所有受访者包括在一起，而我希望它比较表格中的两组。

**如何使用 SPSS 按组获取问卷项目的描述性统计数据？**

此外，如果您对我可以在 SPSS 中对此类数据执行何种分析有任何进一步的建议，我将不胜感激。我想表明，各组之间的意见没有显着差异，从数据来看，情况似乎如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T04:12:05.760

一种选择

*   按组拆分文件
*   像往常一样运行描述性统计

请参阅加州大学洛杉矶分校的这个 SPSS 常见问题解答项目， [了解如何按类别分析数据](http://www.ats.ucla.edu/stat/spss/faq/catfaq.htm)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T15:55:18.090

对您的问题的简短回答是，`crosstabs Q1 to Q4 by group.`将生成您想要的表格。或者，如果您有`ctables`可用的包，则将生成更紧凑的表

```
variable level group_id Q1 to Q4 (nominal).
ctables
/table Q1 + Q2 + Q3 + Q4 by group_id. 
```

如果需要，可以对其进行详细说明以产生其他统计数据。在我看来，卡方检验足以解决您的问题。

就进一步的分析而言，这是一个开放式的问题，需要更多的关注才能有效地回答。我经常建议对这种探索性分析进行视觉探索，因此我建议在网站上仔细阅读这个问题，[使用 R 或 SPSS 可视化李克特响应](https://stats.stackexchange.com/a/25145/1036)，以获得有关如何可视化响应的潜在想法。另一个激励帖子可能是[如何可视化 3D 应急矩阵？](https://stats.stackexchange.com/q/4211/1036).

不过，在这个网站上还有很多与分析李克特反应相关的问题，如果没有更具体的分析动机，很难给出更具体的建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T16:17:41.450

虽然上述答案都有其优点，但我通常更喜欢这个过程（在语法窗口中输入以下内容并运行）：

```
means q1 to q4 by group/stat anova. 
```

这将为您提供组均值、样本量和标准差，以及对每个变量 Q1 到 Q4 的组间均值差异的检验。当然，测试只会在您的数据符合方差分析的标准假设的范围内为您提供有效的结果。有人可能会说以 1-5 顺序测量的变量不适合方差分析，在学术环境中这通常是正确的，但在商业环境中，大多数人愿意为了方便而牺牲一些严谨性。比较 4x2=8 均值比比较 4x5x2=40 响应类别的分布要方便得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T14:00:48.500

这可以通过使用 SPSS for Windows 中的“Crosstabs”功能轻松完成：

分析 --> 描述性统计 --> 交叉表。将因变量移动到“**行**”框中，然后将分组变量移动到“**列**”框中，然后单击“确定”。

# python - 将upload_to函数与模型类相关联的首选pythonic方式？

> ID：12674884
> 
> 赞同：2
> 
> 时间：2012-10-01T14:07:04.160
> 
> 标签：python, django, django-models

我有一个带有[Django ImageField](https://docs.djangoproject.com/en/dev/ref/models/fields/#imagefield)的类，我一直在努力在两种存储该字段`upload_to`功能的替代方案之间做出决定。第一种方法非常简单。该函数在模块级别定义（参见 [https://stackoverflow.com/a/1190866/790075](https://stackoverflow.com/a/1190866/790075)，[https://stackoverflow.com/a/3091864/790075](https://stackoverflow.com/a/3091864/790075)）：

```
def get_car_photo_file_path(instance, filename):
    ext = filename.split('.')[-1]
    filename = "%s.%s" % (uuid.uuid4(), ext) # chance of collision <1e-50
    return os.path.join('uploads/cars/photos', filename)

class CarPhoto(models.Model):
    photo = models.ImageField(upload_to=get_car_photo_file_path) 
```

这简单易懂，但是通过添加一个实际上只与 CarPhoto 类相关的函数来污染模块范围。

在第二种方法中，我使用可调用类模式将函数与 CarPhoto 类更紧密地关联起来。这将`upload_to`功能移出模块范围，但感觉不必要地复杂。

```
class CarPhoto(models.Model):
    class getCarPhotoFilePath():
        # Either use this pattern or associate function with module instead of this class
        def __call__(self, instance, filename):
            ext = filename.split('.')[-1]
            filename = "%s.%s" % (uuid.uuid4(), ext) # chance of collision <1e-50
            return os.path.join('uploads/cars/photos', filename)

    photo = models.ImageField(upload_to=getCarPhotoFilePath()) 
```

我已经看到了使用`@staticmethod`and`@classmethod`装饰器的建议（参见[https://stackoverflow.com/a/9264153/790075](https://stackoverflow.com/a/9264153/790075)），但我发现当我这样做时，函数永远不会执行，并且文件名最终看起来像：`/path/to/file/<classmethod object>`，使用方法嵌入在文件路径中的对象，这当然不是故意的！

以下哪个是首选模式？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:23:25.560

我建议你：

```
import this 
```

对我来说，这属于[Python 的禅宗](http://www.python.org/dev/peps/pep-0020/)部分，说明：

```
Simple is better than complex.
Complex is better than complicated. 
```

我认为您的简单解决方案更好。但是，你的情结并不会感觉过于复杂。我想你可能会没事的。只是我的两分钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:42:12.957

目前在我正在使用的代码中，我们有最简单的代码的变体。唯一的区别是，由于该函数是供内部使用的，所以它带有`_`前缀标记。

```
def _get_car_photo_file_path(instance, filename):
    [...]

class CarPhoto(models.Model):
    photo = models.ImageField(upload_to=_get_car_photo_file_path) 
```

但是，我确实相信这会更 Pythonic（或者更确切地说是 OOP）：

```
class CarPhoto(models.Model):

    @staticmethod
    def _get_file_path(instance, filename):
        [...]

    photo = models.ImageField(upload_to=_get_file_path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:00:52.493

有一个命名约定来防止名称污染。

*   用于`_get_car_photo_file_path`将您的函数标记为内部函数（尽管没有隐藏）；
*   用于`__get_car_photo_file_path` [防止](http://docs.python.org/tutorial/classes.html#tut-private)从课堂外访问它。

您可以在您的类中添加这样的类方法或静态方法`CarPhoto`，这比添加可调用类更简单（后者让我想起了 Java 为一种方法而定义匿名类的方式）。

该名称将清楚地表明这`_get_car_photo_file_path`是一个实现细节，而不是接口的一部分，从而防止污染类的命名空间。作为`CarPhoto`的方法，该函数不会污染模块的命名空间。

# git - _netrc 可以处理带空格的密码吗？

> ID：12674888
> 
> 赞同：8
> 
> 时间：2012-10-01T14:07:21.143
> 
> 标签：git, .netrc

以下配置有效：

```
machine code.mycompany.net
login supernerd
password HelloW0rld 
```

以下配置不起作用：

```
machine code.mycompany.net
login supernerd
password Please excuse my dear aunt sally. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T14:25:31.137

从这个[错误报告](http://bugs.python.org/issue557704)或[这个页面](http://www.gnus.org/distribution.html)中，密码中的空格似乎在 a `.netrc (`or `_netrc`) 文件中不受支持。
或者即使它们是，并非所有使用该`.netrc`文件的程序都能够正确解释所述空间。

* * *

正如[runrig](https://stackoverflow.com/users/10415/runrig)[在评论](https://stackoverflow.com/questions/12674888/can-netrc-handle-passphrases-with-spaces/12675195?noredirect=1#comment45821702_12675195)中提到的那样：

> 在这里引用另一个答案中的字段应该可以，但是python库不喜欢它。
> 但是，例如，命令行`ftp`和`perl netrc`库就可以了。

因此，当使用这些命令时，这应该可以工作：

```
password "Please excuse my dear aunt sally." 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T16:12:59.490

在 SGI 上运行的 IRIX 6.5 上使用 ftp，我在密码周围添加了引号，它工作正常，例如：

```
password "Please excuse my dear aunt sally." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-17T05:28:21.807

我研究过wget的netrc.c；我希望大多数 netrc 解析器的工作方式类似：

请注意，`#`空格后开始注释直到行尾。

字符串可以放在双引号之间（例如，如果字符串以 开头`#`，或者包含很多我们不想反斜杠的空格）。

```
"#pass%"
"S3cret with spaces" 
```

为确保将字符理解为字符串的一部分，请在其前面加上反斜杠，以便逐字理解。有或没有双引号都支持：

```
S3cret\ with\ spaces
\#not-a-comment
backslash:\\
"anything"
"double\"quote" 
```

# javascript - 如何创建一个包含浏览窗口并允许我在浏览窗口上自定义右键菜单的网站？

> ID：12674889
> 
> 赞同：0
> 
> 时间：2012-10-01T14:07:24.513
> 
> 标签：javascript, jquery, html, ajax

我想创建一个网站，其中有一个窗口/框架，可以让我浏览其他网站。另外，我需要在浏览窗口/框架中自定义右键菜单。我知道 iframe 解决了前者，但从我的互联网搜索看来，后者（自定义右键单击菜单）似乎无法在 iframe 上实现。因此，有什么方法可以让我在网页中浏览网站并在其上设置自定义右键菜单？感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:13:07.360

唯一可能的方法是使用 AJAX 和跨站点请求并将结果加载到您的网页中。请注意，这有很多限制。首先，您将只能查询允许跨站点请求的站点或具有公共 API 的站点。这意味着你不会得到你想要得到的实际页面，而只是一些你需要以某种方式显示的简单数据。

# jquery - 如何从 jQuery 访问启用 SSL 的 WCF 服务？

> ID：12674894
> 
> 赞同：0
> 
> 时间：2012-10-01T14:07:38.140
> 
> 标签：jquery, wcf

我想从 asp.net 2.0 应用程序访问启用 SSL 的 WCF 服务。站点托管在 IIS 7 上。

**这是代码**

```
function getCourse() {
    $.ajax({
        type: "GET",
        url: "https://website.com/service.svc/task",
        processData: false,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        timeout: 7000,
        username: "someusername",
        password: "somepassword",
        success: function (data) { alert("success"); },
        error: function (xhr, status, error) { alert("error"); }
    });
}; 
```

我收到 401 错误，我没有在 iis 或 webconfig 中进行任何与 ssl 访问相关的配置？我在这里错过了什么吗？还是我使用 asp.net 2.0 应用程序的事实导致了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:01:00.633

好吧，我认为您可能需要在 jquery ajax 函数中添加其他标头，如下所示：

```
headers: { 
    Authenticate: Basic username:password (to base64)
} 
```

或者

```
beforeSend: setHeaders

function setHeader(xhr) {
    xhr.setRequestHeader('Authorization', 'Basic base64.encode(username:password)');
} 
```

根据 Wiki，401 Unauthorized 被定义为

> 类似于 403 Forbidden，但专门用于需要身份验证但已失败或尚未提供身份验证时使用。
> 
> 响应必须包含一个**WWW-Authenticate 标头**字段，该字段包含适用于所请求资源的质询。请参阅基本访问身份验证和摘要访问身份验证。

参考 HTTP 状态码：[http](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)
://en.wikipedia.org/wiki/List_of_HTTP_status_codes 基本访问认证：[http ://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)

# c++ - 带有 XCppRefl 的代码不起作用

> ID：12674899
> 
> 赞同：0
> 
> 时间：2012-10-01T14:07:51.407
> 
> 标签：c++, reflection

我正在尝试使用 XCppRefl lib 来实现 C++ 中的反射。[http://www.extreme.indiana.edu/reflcpp/](http://www.extreme.indiana.edu/reflcpp/)。我可以在 linux 中成功安装这个库并运行使用库的源代码给出的测试。

这是我写的代码——

```
#include <iostream>
using namespace std;

#include <reflcpp/ClassType_tmpl.hpp>
#include <reflcpp/BoundClassType_tmpl.hpp>
#include <reflcpp/Exceptions.hpp>

using namespace reflcpp;

#include "Complex.h"

int main()
{
    //ClassType ct = ClassType::getClass( string("Complex") );
    ////PtrHolder_smptr_t obj = ct.createInstance();
    //assert(ct.name() == "B");
    Complex x;

    int ret;
    Complex a;

    ClassType c = ClassType::getClass( string("Complex") );

    //cout<<"name :: "<<c.name()<<endl;
} 
```

它似乎编译得很好——

```
 $ g++ -g -I /usr/local/include/reflcpp-0.2/ -L /usr/local/include/reflcpp-0.2/ -lreflcpp  main.cpp 
```

但是，当我执行可执行文件（a.out）时，我得到一个核心转储

```
a.out: Type.cpp:87: static const reflcpp::Type_body* reflcpp::Type_body::getType(const std::string&): Assertion `s_class_name_map' failed.
Aborted (core dumped) 
```

有人用过这个库吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:35:29.747

您必须将 main.o 链接到 libreflcpp.a 。编译后使用这个：

```
g++ -p -pg -o"project_name"  ./A.o ./A_reflection.o ./main.o  /usr/local/lib/libreflcpp.a 
```

# javascript - 我可以更改 chrome 中事件的 keyCode 属性吗？

> ID：12674902
> 
> 赞同：0
> 
> 时间：2012-10-01T14:08:02.687
> 
> 标签：javascript, internet-explorer, google-chrome

我们正在使用以下代码为 IE 中的 onKeyPress 事件分配新的键代码：

```
window.event.keyCode=65 
```

在 IE 中，这会更改链中其他事件处理程序接收的密钥，但此代码在 chrome 中不起作用。有没有办法做到这一点？

示例 HTML：

```
<input type="text" name="hotelfloornew" id="hotelfloornew" 
       onkeypress="uPPer();" size="25" /> 
```

对应的JS：

```
function uPPer()
{
    switch (window.event.keyCode)
    {       
        case 97:window.event.keyCode=65;break;
        case 98:window.event.keyCode=66;break;  
        case 99:window.event.keyCode=67;break;  
        case 100:window.event.keyCode=68;break;
.
.
.

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:09:12.213

IE 分配了一个全局事件值，但这不是标准化的。在其他浏览器中，使用提供给您的回调的值：

```
window.onkeypress = function(event) {
   console.log(event.keyCode);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:01:59.087

更改`keyCode`事件的属性是一种只能在旧 IE 中使用的骇人听闻的技巧。它应该是只读的，并且在所有合理的浏览器中。不要这样做。

如果您需要更改按键的效果，请阻止其默认操作并手动执行您自己的替换操作。如果要将键入的字符映射到其他字符，[可以使用我之前在 Stack Overflow 上发布的代码](https://stackoverflow.com/a/4605347/96100)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:11:39.873

```
function doKey(e) {
        evt = e || window.event; // compliant with ie6        
        alert(evt.keyCode+' Pressed');
    } 
```

window.event.keyCode 主要用于 IE... 这是一个示例代码，它将提醒所有导航器中按下的 keyCode。

# mysql - MySQL 导入数据库，无插入

> ID：12674913
> 
> 赞同：0
> 
> 时间：2012-10-01T14:08:46.410
> 
> 标签：mysql, database, insert, structure, workbench

我正在使用 MySql Workbench 和 WAMP 服务器。我在服务器上有一个数据库，当我在工作台上单击逆向工程时，它会导入 db 结构，但不会导入任何插入。我该怎么做才能将数据库数据以及结构放入工作台。

另外在我使用工作台时，我注意到它没有自动与服务器上的数据库同步，即。当我插入一个新行时，它没有反映在服务器中。每次我进行更改时，我必须将数据库转发到服务器吗？很抱歉我缺乏理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:19:23.130

MySql Workbench 逆向工程只是获取数据库的Schema。

如果您想搜索数据库、进行备份、获取架构等等，那么您可以使用[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)。有一些安装程序可以将整个系统配置为使用 WAMP 环境并包含它，例如[Xampp](http://www.apachefriends.org/es/xampp.html)或[ZendServer](http://www.zend.com/en/products/server/)；

![在此处输入图像描述](../Images/56b5a21a5baac95f97bb2be539ef4235.png)

# iphone - iPhone 5 的弱光增强模式

> ID：12674917
> 
> 赞同：2
> 
> 时间：2012-10-01T14:08:53.450
> 
> 标签：iphone, ios, camera

有没有人能够让 iPhone 5 的新低光增强模式在他们的自定义相机应用程序中工作？我尝试了以下代码，但没有发现任何区别 - 而本机相机应用程序显着提高了亮度。

```
if ([[captureManager backFacingCamera] isLowLightBoostEnabled]) {

    [[captureManager backFacingCamera] automaticallyEnablesLowLightBoostWhenAvailable];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T14:35:50.150

`lockForConfiguration`根据文档（嗯，头文件），您需要：

```
if ([[self backFacingCamera] respondsToSelector:@selector(isLowLightBoostSupported)]) {
  if ([[self backFacingCamera] lockForConfiguration:nil]) {
    if ([self backFacingCamera].isLowLightBoostSupported)
      [self backFacingCamera].automaticallyEnablesLowLightBoostWhenAvailable = YES;
    [[self backFacingCamera] unlockForConfiguration];
  }
} 
```

此外，`isLowLightBoostEnabled`它告诉您是否确实增强了弱光，而不是是否可以。这就是`isLowLightBoostSupported`上面的选择器（只有 iOS 6 设备会响应）。

# php - 将 SQL 转储到文件：带有重音（意大利语）不同字符集的数据

> ID：12674922
> 
> 赞同：0
> 
> 时间：2012-10-01T14:09:09.577
> 
> 标签：php, mysql, character-encoding

我正在使用一个过程来转储数据库内容并编写一个文件 sql ...

一切正常，但在我的文件中，所有具有特定字符（如 è、àù éç 等）的数据都在文件中丢失了......我现在有点困惑。...我必须在哪里设置正确的字符集？

我的数据库有一个默认字符集 UTF8 和排序规则 UTF8_general_ci

在我的服务器端脚本中从数据库中正确处理数据（CRUD 正常工作并且数据正确显示）。当我在变量中获取数据并将完整的 SQL 过程写到文件中时，重音字母会损坏......

这是我的转储程序，它返回我的数据库的完整转储

==================================================== =======================

函数转储数据库（）{

```
 // Connect to database
    $db = mysql_select_db($this->DATABASE_DB);

    if (!$db) {
        die ('Can\'t use foo : ' . mysql_error());
    }
    if (!empty($db)) {

        // Get all table names from database
        $c = 0;
        $result = mysql_list_tables($this->DATABASE_DB);
        for($x = 0; $x < mysql_num_rows($result); $x++) {
            $table = mysql_tablename($result, $x);
            if (!empty($table)) {
                $arr_tables[$c] = mysql_tablename($result, $x);
                $c++;
            }
        }

            // Structure Header
            $structure .= "-- \n";
            $structure .= "-- Backup effettuato il `".date('Y-m-d H:i:s')."` \n";
            $structure .= "-- Backup per database `{$this->DATABASE_DB}` \n";               
            $structure .= "-- \n\n";

            $structure .= "-- \n\n";
            $structure .= "-- \n\n";

            $structure .= "SET NAMES utf8; \n";
            $structure .= "SET FOREIGN_KEY_CHECKS = 0;";

            $structure .= "-- \n\n";
            $structure .= "-- \n\n";

        // List tables
        $dump = '';
        for ($y = 0; $y < count($arr_tables); $y++){

            // DB Table name
            $table = $arr_tables[$y];

            // Structure Header
            $structure .= "-- \n";
            $structure .= "-- Table structure for table `{$table}` \n";
            $structure .= "-- \n\n";

            // Dump Structure
            $structure .= "DROP TABLE IF EXISTS `{$table}`; \n";
            $structure .= "CREATE TABLE `{$table}` (\n";
            $result = mysql_db_query($this->DATABASE_DB, "SHOW FIELDS FROM `{$table}`");
            while($row = mysql_fetch_object($result)) {

                $structure .= "  `{$row->Field}` {$row->Type}";
                $structure .= (!empty($row->Default)) ? " DEFAULT `{$row->Default}`" : false;
                $structure .= ($row->Null != "YES") ? " NOT NULL" : false;
                $structure .= (!empty($row->Extra)) ? strtoupper(" {$row->Extra}") : false;
                $structure .= ",\n";

            }

            $structure = ereg_replace(",\n$", "", $structure);

            // Save all Column Indexes in array
            unset($index);
            $result = mysql_db_query($this->DATABASE_DB, "SHOW KEYS FROM `{$table}`");
            while($row = mysql_fetch_object($result)) {

                if (($row->Key_name == 'PRIMARY') AND ($row->Index_type == 'BTREE')) {
                    $index['PRIMARY'][$row->Key_name] = $row->Column_name;
                }

                if (($row->Key_name != 'PRIMARY') AND ($row->Non_unique == '0') AND ($row->Index_type == 'BTREE')) {
                    $index['UNIQUE'][$row->Key_name] = $row->Column_name;
                }

                if (($row->Key_name != 'PRIMARY') AND ($row->Non_unique == '1') AND ($row->Index_type == 'BTREE')) {
                    $index['INDEX'][$row->Key_name] = $row->Column_name;
                }

                if (($row->Key_name != 'PRIMARY') AND ($row->Non_unique == '1') AND ($row->Index_type == 'FULLTEXT')) {
                    $index['FULLTEXT'][$row->Key_name] = $row->Column_name;
                }

            }

            // Return all Column Indexes of array
            if (is_array($index)) {
                foreach ($index as $xy => $columns) {

                    $structure .= ",\n";

                    $c = 0;
                    foreach ($columns as $column_key => $column_name) {

                        $c++;

                        $structure .= ($xy == "PRIMARY") ? "  PRIMARY KEY  (`{$column_name}`)" : false;
                        $structure .= ($xy == "UNIQUE") ? "  UNIQUE KEY `{$column_key}` (`{$column_name}`)" : false;
                        $structure .= ($xy == "INDEX") ? "  KEY `{$column_key}` (`{$column_name}`)" : false;
                        $structure .= ($xy == "FULLTEXT") ? "  FULLTEXT `{$column_key}` (`{$column_name}`)" : false;

                        $structure .= ($c < (count($index[$xy]))) ? ",\n" : false;

                    }

                }

            }

            $structure .= "\n);\n\n";

            // Header
            $structure .= "-- \n";
            $structure .= "-- Dumping data for table `$table` \n";
            $structure .= "-- \n\n";

            // Dump data
            unset($data);

            //mysql_set_charset('latin1');
            $result     = mysql_query("SELECT * FROM `$table`");
            $num_rows   = mysql_num_rows($result);
            $num_fields = mysql_num_fields($result);

            for ($i = 0; $i < $num_rows; $i++) {

                $row = mysql_fetch_object($result);
                $data .= "INSERT INTO `$table` (";

                // Field names
                for ($x = 0; $x < $num_fields; $x++) {

                    $field_name = mysql_field_name($result, $x);

                    $data .= "`{$field_name}`";
                    $data .= ($x < ($num_fields - 1)) ? ", " : false;

                }

                $data .= ") VALUES (";

                // Values
                for ($x = 0; $x < $num_fields; $x++) {
                    $field_name = mysql_field_name($result, $x);

                    $data .= "'" . str_replace('\"', '"', mysql_escape_string($row->$field_name)) . "'";
                    $data .= ($x < ($num_fields - 1)) ? ", " : false;

                }

                $data.= ");\n";
            }

            $data.= "\n";

            $dump .= $structure . $data;
            $dump .= "-- --------------------------------------------------------\n\n";

        }

        return $dump;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:11:52.280

尝试在之后添加此代码`SET NAMES utf8;` 或使用`mysqldump`实用程序。

```
SET character_set_results = 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8'; 
```

# android - 如何在 TextView 中显示终端窗口输出

> ID：12674925
> 
> 赞同：0
> 
> 时间：2012-10-01T14:09:11.807
> 
> 标签：android, android-layout, android-ndk

我正在使用我的 Android 应用程序来启动本机二进制文件。我想在我的应用程序的一个小窗口中显示该二进制文件的输出。我将如何在 TextView 中显示输出或在小窗口中显示终端（首选）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:59:36.470

Alex 链接到的文章的要点是`Runtime.exec()`返回一个`Process`对象，它允许您`stderr`通过`Process.getOutputStream()/getErrorStream()`. 获取它们，在线程中读取它们（它们会正确阻塞 - 您不想阻塞 UI 线程），将数据传递回 UI 线程。好多了，好多了。我撤销我之前的回答。

该文章还建议将流包装在 a 中`BufferedReader`，以便您可以执行`readLine`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:37:39.250

这是一个方案。这个不需要NDK。

您在应用程序的数据目录中创建一个临时文件。您运行二进制文件，在命令行中使用`Runtime.exec()`. 您必须指定的命令行不会调用二进制文件本身，而是调用`sh`，并且命令行参数之一将是重定向：`>myfile.txt`.

然后，您启动一​​个读取同一文件的工作线程。您需要仔细实施新数据检测——因为这是一个文件，而不是管道，一旦到达文件末尾，读取操作将简单地终止；在出现新数据之前它不会阻塞。

`Activity.runOnUiThread()`然后，您使用或将数据从工作线程传递`Handler.post()`到主线程，用于更新 TextView 的内容。

一种更简洁的方法是创建一个管道对，并使用从管道句柄到文件句柄值 1 ( )`mkfifo()`将输出重定向到适当的位置。这就是他们在 C/Linux 世界中通常的做法。那里可能有一个Android示例，我从来没有这样做过。`dup2()``stdout`

哦，在你做所有这些之前，请确保二进制文件没有更可口的界面。通常情况下，Linux 二进制文件基于静态/动态库，其中包含所有美味的功能，可以链接并直接调用。

编辑：特别是如果它是`logcat`. 还有其他方法可以在 Android 中读取日志。

# git - 将现有的 git repo 推送到 github：系统无法拉取

> ID：12674930
> 
> 赞同：2
> 
> 时间：2012-10-01T14:09:30.483
> 
> 标签：git, github

我有一个使用 git 的本地仓库。现在我想把它推送到我的 github 仓库。我按照在线说明在 web 目录中添加远程仓库：

> git remote add github git@github.com:[username]/[repo_name].git

之后我进行推送（**git push -u github master**），终端响应建议我进行拉取以避免非快进。

然后我尝试拉动：（第一次尝试）

> git pull -u github master（第二次尝试） git pull github master

两者都返回**致命：呃哦。您的系统根本没有报告任何 Git 命令。**

我已经检查了 .git/config 文件，远程 git 已经存在。为什么 git 可以推动而不是拉动。

我的 .git/config 文件是：

```
[remote "github"]
        url = git@github.com:[username]/[repo_name].git
        fetch = +refs/heads/*:refs/remotes/github/* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:21:01.230

确保这不是路径问题，如[该线程](http://comments.gmane.org/gmane.comp.version-control.msysgit/14008)中所述（适用于 Windows，但也适用于其他操作系统）。
还要检查您是否没有任何`git alias`可能阻止 a`git pull`正常工作的活动。

* * *

关于路径问题，[OP aladine](https://stackoverflow.com/users/306103/aladine)在评论中确认：

> 我发现重新安装 git 后，它可以正常工作。

# css - 通过单击其他链接隐藏 CSS 页面

> ID：12674934
> 
> 赞同：0
> 
> 时间：2012-10-01T14:09:50.277
> 
> 标签：css, hide, hyperlink, show-hide

我想知道，我得到了这个代码：

```
<li><a href="#home">Home</a></li> 
<li><a href="#link1">Link 1</a></li> 
```

CSS中的这段代码：

```
#link1
{
display: none;
}

#link1:target
{
display: block;
} 
```

还有一些设计的东西，但它包含在我的 CSS 代码的 li 部分中，所以这里不需要它。

**现在，**我的主页始终可见。当我点击“Link 1”时，如何让 home-part 消失？因为现在“Link 1”的内容出现在主页内容下方，而不是在它的位置（主页内容必须消失，我说过，它没有）

我想将所有内容保存在一个 html 文档中，这就是我使用 CSS 的原因，而不是链接到另一个页面，这可能会使这更容易。

如果我不清楚或者您需要一些额外的代码，请告诉我，但请告诉我当时不清楚的地方。谢谢 ：]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:13:23.303

你有没有尝试过javascript/jQuery？

```
$('#link1').click(function() 
{
  $('#home').hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:16:56.407

尝试使用 jQuery 选项卡。非常容易使用，它会为你做这一切。 [http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

# android - 如何在位图而不是屏幕上获取触摸事件坐标

> ID：12674941
> 
> 赞同：2
> 
> 时间：2012-10-01T14:10:26.707
> 
> 标签：android, imageview, android-imageview, android-image

问候，

如何获取位图的坐标而不是屏幕的坐标。通过 event.getX(),event.getY() 方法获得的屏幕坐标，但未获取位图的坐标。请帮助任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:12:55.613

您无法直接获取位图的坐标。你需要自己计算。使用 ImageView 的位置，你可以处理它。

当然，当您在 Activity onCreate 之后，您可以访问任何膨胀（活动）视图参数。例如。图像视图一个；a.getPaddingBottom(); 像所有坐标（左右等...）在此之后，您需要 ImageView 的高度和宽度。不，当您知道视图位置、高度和宽度时，您可以计算。

例子：

```
final ImageView iv_YourImage = (ImageView) findViewById(R.id.iv_imageview);
public boolean onTouch(View v, MotionEvent event){
int topParam =  iv_YourImage.getPaddingTop();
 int rightParam =  iv_YourImage.getPaddingRight();
int maxTopParam = topParam+iv_YourImage.getMaxHeight();
int maxRightParam = rightParam + iv_YourImage.getMaxWidth();
 if(event.getX>topParam&&event.getX<maxTopParam){
    //the x coordinate is in your image... do the same to Y
 }
return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T05:25:58.807

如果答案太短，请查看以下代码：

[Android：检测对 ImageView 中实际图像的触摸](https://stackoverflow.com/questions/12753847/android-detect-touch-on-actual-image-in-imageview/14167661#14167661)

该代码替换了此答案的填充和最大高度编码，并使用 getWidth() 和 getHeight() 将其替换为显示图像的实际宽度和高度。并使用屏幕宽度和高度来计算其位置。如果您想为您的问题提供更详细的答案，您应该提供更多信息，例如您在哪里绘制位图...您是在活动 XML 中定义它还是在随机位置（例如 X 和 Y 坐标）绘制它对于触摸事件，答案取决于该信息。

```
package com.example.img;

imports....

public Image extends Activity {

ImageView imgYourImage;
// int imgWidth;
// etc...

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image);

    imgYourImage = (ImageView) findViewById(R.id.yourImage);
    imgDimension();
}

private void imgDimension() {
    imgWidth = imgYourImage.getWidth();
    // at newer api's you can use getLeft() and getTop() of imageView
    // if getLeft() works you have the leftX coordinate of image already.
    // do same with height
    // also get the screen Width and Height by display.getWidth() (depreciated)
    // Or the newer code display.getSize()
    leftX = (screenwidth - imgWidth) / 2;
    rightx = leftx + imgWidth;
} 
```

请注意，此代码仅在图像显示在屏幕的水平中心时才有效。如果图像显示在屏幕的垂直中心，则使用顶部和底部。

# java - JSpinner 动态更新，如何删除元素？

> ID：12674944
> 
> 赞同：0
> 
> 时间：2012-10-01T14:10:33.000
> 
> 标签：java, swing, jspinner

我有一个带有**SpinnerListModel的****JSpinner**。我想要做的是，一旦列表加载到模型中并且 JSpiner 显示在框架中，应该可以从微调器中**删除**元素。这将通过单击同一帧上的按钮来完成。单击操作的处理程序将删除当前在微调器上选择的元素。就我当前的实现而言，问题是当这个处理程序返回时，微调器有一个**IndexOutOfBoundsException**（即当我从列表中删除最后一个元素时），这表明 JSpinner 没有很好地更新。

 ******我创建了一个扩展**JSpinner的新类****ExtendedSpinner**，仅用于使用 fireStateChanged。这是在移除元素时更新**JSpinner 。**它适用于删除列表中间的元素，但不适用于最后一个元素。

 ****我究竟做错了什么？这是代码：

```
package image;

import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.SpinnerListModel;
import javax.swing.SpinnerModel;

public class ImageDealer2 {

protected JFrame selectCoverFrame;
protected JExtendedSpinner spinnerCovers;
protected JButton deleteCoverButton;
protected SpinnerListModel spinnerCoversM;
protected ArrayList<Object> stringList = new ArrayList<Object>();

public ImageDealer2() {
selectFrameInit();
}

public void selectFrameInit(){

selectCoverFrame = new JFrame("Select");
selectCoverFrame.setSize(new Dimension(500,100));
selectCoverFrame.getContentPane().setLayout(new    BoxLayout(selectCoverFrame.getContentPane(),BoxLayout.Y_AXIS));

stringList.add("a");
stringList.add("b");
stringList.add("c");
stringList.add("d");

spinnerCoversM = new SpinnerListModel(stringList);
spinnerCovers = new JExtendedSpinner(spinnerCoversM);

deleteCoverButton = new JButton("Delete current element");
DeleteCurrentCoverHandler deleteCurrentCoverHandler = new DeleteCurrentCoverHandler();
deleteCoverButton.addActionListener(deleteCurrentCoverHandler);

selectCoverFrame.getContentPane().add(spinnerCovers);
selectCoverFrame.getContentPane().add(deleteCoverButton);
selectCoverFrame.setVisible(true);
}

public class JExtendedSpinner extends JSpinner{

/**
 * 
 */
private static final long serialVersionUID = 6109392800971431371L;

public JExtendedSpinner() {
    super();
    // TODO Auto-generated constructor stub
}

public JExtendedSpinner(SpinnerModel model) {
    super(model);
    // TODO Auto-generated constructor stub
}

public void fireUpdate(){
    this.fireStateChanged();
}
}    

private class DeleteCurrentCoverHandler implements ActionListener {

public void actionPerformed(ActionEvent e) {
    if (stringList.size()>1){
        stringList.remove(spinnerCovers.getValue());
        spinnerCoversM.setList(stringList);
        spinnerCovers.setModel(spinnerCoversM);
        spinnerCovers.fireUpdate();
    } else{
        stringList.clear();
        selectCoverFrame.dispose();
    }

}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:15:53.173

我认为您对此过于复杂，您不需要扩展 JSpinner。

启动程序时，请确保在创建 JSpinner 之前添加值：

```
 //create the list   
    stringList.add("a");
    stringList.add("b");
    stringList.add("c");
    stringList.add("d");

    //make sure you set the model to the list
    jSpinner.setModel(new javax.swing.SpinnerListModel(stringList)); 
```

您应该像这样创建事件（在其他任何事情之前执行此操作）：

```
 jSpinner.addChangeListener(new javax.swing.event.ChangeListener() {
        public void stateChanged(javax.swing.event.ChangeEvent evt) {
            stateChanged(evt);
        }
    }); 
```

该`stateChanged(evt)`方法应如下所示：

```
 //Get selected item/object
    Object selected = jSpinner.getValue();
    //Remove selected item/object
    stringList.remove(selected); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T23:36:01.303

你很亲密。
在列表中添加和删除元素时，您确实需要触发一个事件，但这是模型的责任，而不是微调器。所以你必须实现你自己的模型。
另一个问题是当列表被清空时，微调器没有任何东西可以显示，这可能就是你得到异常的原因。
所以你必须决定当微调器被清空时该怎么做。

例如，假设您希望微调器在它为空时被禁用，并在它不为空时重新启用。
正如我之前告诉你的，你必须实现你的`SpinnerListModel`以便手动触发添加和删除的事件。但是现在您还希望根据模型禁用和启用微调器。因此，您可以实现模型以获取微调器的参考...
遵循示例代码：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Objects;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerListModel;

public class ImageDealer2 {
    public static class RemoveSpinnerListModel extends SpinnerListModel {
        private static final String VALUE_OF_EMPTY_LIST = ""; //This value indicates the spinner is empty.

        protected JSpinner spin; //The spinner which this model referes to.

        private boolean empty; //indicates if the list spinner is empty.
        //The spinner is empty if it contains only the VALUE_OF_EMPTY_LIST value.

        public RemoveSpinnerListModel() {
            super(new ArrayList(Arrays.asList(VALUE_OF_EMPTY_LIST))); //We initialize to an "empty" read-write list.
            empty = true; //The spinner does not contain any valid value.
        }

        public void setSpinner(final JSpinner spin) {
            this.spin = Objects.requireNonNull(spin); //Just a null check plus assignment.

            //We ensure the list has at least one element in it (the VALUE_OF_EMPTY_LIST):
            if (getList().isEmpty())
                ((List)getList()).add(VALUE_OF_EMPTY_LIST);

            //The spinner is empty if and only if the list contains only the VALUE_OF_EMPTY_LIST.
            empty = getList().size() == 1 && getList().get(0).equals(VALUE_OF_EMPTY_LIST);

            //We enable/disable the spinner accordingly:
            spin.setEnabled(!empty);

            if (empty) //If the spinner is empty of valid values:
                spin.setValue(VALUE_OF_EMPTY_LIST); //then we add the VALUE_OF_EMPTY_LIST.
        }

        public void add(final Object value) {
            if (empty) //If the spinner contains only the VALUE_OF_EMPTY_LIST, then:
                getList().clear(); //Remove the VALUE_OF_EMPTY_LIST string.
            ((List)getList()).add(value); //Add the requested value.
            if (spin != null) {
                spin.setEnabled(true); //Enable the spinner for sure, because now it has at least one valid value.
                spin.setValue(value);
            }
            empty = false; //The spinner is surely not empty.
            fireStateChanged(); //Important step: updates the spinner via firing an event in the model.
        }

        public void remove(final Object value) {
            if (!getList().isEmpty()) { //If there is something to remove.
                getList().remove(value); //Remove the requested value.
                if (getList().isEmpty()) //If now the list is empty, then we mark the spinner as empty:
                    markTheSpinnerAsEmpty();
                else //Else the list still contains valid elements, so we mark the spinner as not-empty:
                    empty = false;
            }
            else //Else, the list is empty, so nothing to remove and the spinner must be marked as empty:
                markTheSpinnerAsEmpty();
            if (spin != null)
                spin.setEnabled(!empty);
            fireStateChanged(); //Important step: updates the spinner via firing an event in the model.
        }

        public void clear() {
            getList().clear(); //Remove everything for sure.
            markTheSpinnerAsEmpty();
        }

        private void markTheSpinnerAsEmpty() {
            ((List)getList()).add(VALUE_OF_EMPTY_LIST);
            if (spin != null) {
                spin.setValue(VALUE_OF_EMPTY_LIST); //Let's show the user that nothing is here.
                spin.setEnabled(false);
            }
            empty = true;
        }
    }

    protected JFrame selectCoverFrame;
    protected JSpinner spinnerCovers;
    protected JButton deleteCoverButton;
    protected RemoveSpinnerListModel spinnerCoversM;

    public ImageDealer2() {
        selectFrameInit();
    }

    private void selectFrameInit() {

        selectCoverFrame = new JFrame("Select");
        selectCoverFrame.setSize(new Dimension(500, 100));
        selectCoverFrame.getContentPane().setLayout(new BoxLayout(selectCoverFrame.getContentPane(), BoxLayout.Y_AXIS));

        spinnerCoversM = new RemoveSpinnerListModel();
        spinnerCoversM.add("a");
        spinnerCoversM.add("b");
        spinnerCoversM.add("c");
        spinnerCoversM.add("d");

        spinnerCovers = new JSpinner(spinnerCoversM);
        spinnerCoversM.setSpinner(spinnerCovers); //DO NOT forget this step!

        deleteCoverButton = new JButton("Delete current element");
        DeleteCurrentCoverHandler deleteCurrentCoverHandler = new DeleteCurrentCoverHandler();
        deleteCoverButton.addActionListener(deleteCurrentCoverHandler);

        final JButton addButton = new JButton("Add an element");
        AddANewCoverHandler addANewCoverHandler = new AddANewCoverHandler();
        addButton.addActionListener(addANewCoverHandler);

        final JPanel buttonPanel = new JPanel(); //FlowLayout.
        buttonPanel.add(deleteCoverButton);
        buttonPanel.add(addButton);

        selectCoverFrame.getContentPane().add(spinnerCovers);
        selectCoverFrame.getContentPane().add(buttonPanel);
        selectCoverFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //With this call, when you close the frame, then the application gets terminated.
        selectCoverFrame.setLocationRelativeTo(null); //With this call, the frame gets to the center of the screen.
        selectCoverFrame.setVisible(true);
    }

    private class DeleteCurrentCoverHandler implements ActionListener {
        @Override
        public void actionPerformed(final ActionEvent e) {
            spinnerCoversM.remove(spinnerCovers.getValue());
        }
    }

    private class AddANewCoverHandler implements ActionListener {
        @Override
        public void actionPerformed(final ActionEvent e) {
            spinnerCoversM.add(JOptionPane.showInputDialog("Enter the new element string:"));
        }
    }

    public static void main(final String[] args) {
        new ImageDealer2();
    }
} 
```

如果要从微调器中添加或删除任何对象，则必须通过此模型进行。
对于任何其他“只读”操作（例如`isEmpty()`和`size()`），您可以调用`getList()`模型的 。
也许这是一个比预期更大的解决方案，但它是可重用的。**********

# ios - 如何检测用户正在使用输入法进行中途输入？

> ID：12674949
> 
> 赞同：13
> 
> 时间：2012-10-01T14:10:47.117
> 
> 标签：ios, uitextview, uikeyboard

如果用户使用中文拼音等输入法在 UITextView 中输入，则存在拼音已显示在文本视图中但用户仍未选择最终中文字符的状态。截图会更清晰：

![在此处输入图像描述](../Images/1ffc36485d4feb985de9d30417cce533.png)

我想为用户做一些文本完成，但应该只为真正的输入（用户选择的汉字）做，而不是为中间的拼音输入做。所以我需要检测这个挂起状态。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-19T15:45:46.617

终于明白了。像拼音这样的输入法被称为`Multistage Text Input`。第一阶段叫`Marked`，第二阶段叫`Committed`。要确定它是否处于`Marked`阶段，应该查询`UITextInput`协议的`markedTextRange`属性：

```
if (textView.markedTextRange != nil) {
    // Marked.
} 
```

# java - 条件静态字段可能吗？

> ID：12674950
> 
> 赞同：2
> 
> 时间：2012-10-01T14:10:48.793
> 
> 标签：java, static

我有一堂课如下：

```
public class Level{
public int level;
public int score;
} 
```

基本上，对于特定的级别值，我希望将分数表现为静态的。例如，在一场比赛中，一个团队有多个参赛者，每个参赛者都会为特定级别的分数做出贡献。只要级别相等，我希望将他们的每个贡献都添加到分数中。我想知道是否可以这样做。

**编辑**

如果我像这样更改我的类，我觉得问题会更容易可视化：

```
public class Participants{
public String name;
public String teamID;
public int[] levelScores; //where the level is denoted 
                            //by the index of this array
} 
```

现在，对于所有具有相同 teamID 的参与者，必须共享 levelScores，并且必须将具有相同 teamID 的任何参与者对象的贡献添加到相应的 levelScore。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:14:26.797

这涉及更改代码并且不太可能值得额外的复杂性恕我直言。我只会使用你拥有的代码（如果可以的话，让这些字段成为最终的）

```
abstract Level {
    public int getLevel();
    public int getScore();
}

class LevelOne extends Level {
    public int getLevel() { return 1; }
    public int getScore() { return LEVEL_ONE_SCORE; }
}

class LevelTwo extends Level {
    private final int score;
    public int getLevel() { return 2; }
    public int getScore() { return score; }
}

class LevelN extends Level {
    private final int level;
    private final int score;
    public int getLevel() { return level; }
    public int getScore() { return score; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T14:23:52.993

更改为使用访问器方法（getter/setter）并执行以下操作：

```
class Level {
    private static int levelOneScore;
    private int level;
    private int score;

    public int getLevel (
        return level;
    );

    public int getScore() {
        return level == 1 ? levelOneScore : score;
    }

    public void setScore(int score) {
        if (level == 1) {
            levelOneScore = score;
        } else {
            this.score = score;
        }
    }
} 
```

我省略了该`setLevel()`方法，因为感觉级别应该是最终的。如果`level`是`final`，您可以（并且应该）将其实现为一个单独的类，该类覆盖 get/set score 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T14:45:34.283

只是看看你的个人资料......你正在自学，所以我假设你不会使用 JNDI、Spring 或任何其他类型的容器或框架之类的东西。

在不使用完全静态的类层次结构的情况下执行此操作的最简单方法是使用`level`作为键来引用分数：

```
public class Level {
   private static Level instance = null;
   private static Map<Integer, Integer> scoreMap = new HashMap<Integer, Integer>();

   public static Level getInstance() {
      if (instance == null) {
         instance = new Level();
      }
      return instance;
   }

   public static int getScore(int level) {
      return scoreMap.get(level);
   }

   public static void setScore(int level, int score) {
      scoreMap.put(level, score);
   }
} 
```

任何使用的类`Level`都会这样做：

```
int myLevel = 1; // I assume the class will know its level somehow

Level scoreKeeper = Level.getInstance();

int myScore = scoreKeeper.getScore(myLevel); 
```

这个解决方案使用了可怕的 Singleton 反模式，但它会让你实现你可能想要实现的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:14:20.480

静态数据由类的所有实例共享。您的 1 级实例会共享它，您的 levelN 也会共享它:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T14:17:04.317

这个答案有很多开销，但是您可以创建一个具有一个字段的分数类，`int score`并将所有级别对象指向分数对象，其中级别 = 1。这样，每次更改分数时，指向它的所有对象都会更改分数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T14:12:22.167

不，我不认为这是可能的。`static`只是跨应用程序共享的一份副本。你需要考虑重新设计你的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T14:21:59.917

不可能按照你的想法去做。但是可以使用单个静态方法创建一个类，该方法将分数返回到适当的输入值。

方法：

```
 public static int(int level) {
        if(level==1) {
            return //what you want.
        }

} 
```

我希望我有所帮助。

# c - 无法使用c中的多个管道从进程中读取消息

> ID：12674953
> 
> 赞同：0
> 
> 时间：2012-10-01T14:11:08.220
> 
> 标签：c

我为多个孩子创建管道。代码捕获来自键盘的信号，然后孩子应将消息及其结果发送给父亲。信号的处理工作正常，但我无法将结果发送给父亲。我在这里做错了吗？

父进程的代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>
#include <sys/types.h>

pid_t *childs; //array for storing childs pids
int number_of_childs;//variable for the number of childs
int exit_count=0;
int *fd;

/*Handler for the SIGINT signal*/

void control_handler(int sig)
{
if (sig==SIGINT){

    int j,bytes;
    char message[512];
    /*Sending SIGUSR1*/

    for (j=0;j<number_of_childs;j++)
    {
    kill(childs[j],SIGUSR1);
    }

    /*Reading from PIPES*/

    for (j=0;j<number_of_childs;j++)
    {   
    close(fd[(2*j)+1]);  
    bytes = read(fd[(2*j)], message, sizeof(message));
    printf("Read from: %s\n",message);
    close(fd[2*j]);
    }
}

if (sig==SIGUSR2)
{
exit_count++;
}

}

main (int argc,char *argv[]){

int i,child_status;
char cast[512];
char cast2[512];
char cast3[512];
int pid;
number_of_childs=atoi(argv[1]);

signal(SIGINT,control_handler);
signal(SIGUSR2,control_handler);

/*Creating array for children pipes*/
fd=(int*)malloc((2*number_of_childs)*sizeof(int));

/*array that holds the pids for every child used in sending signals*/
childs=malloc(number_of_childs*sizeof (pid_t));

for (i=0;i<number_of_childs;i++){
pid=fork();
    /*Create pipes to communicate with all children*/

    if(pipe(fd+(2*i))==-1)
    {
    perror("pipe");exit(1);
    }

    /*Fathers code goes here*/

    if(pid!=0)
        {
        printf("Parent process: PID= %d,PPID=%d, CPID=%d \n",getpid(),getppid(),pid);
        childs[i]=pid; // Keep all your childs in an array
        printf("Child:%d\n",childs[i]); 
        }

    /*If you are a child*/

        else 
        {
        /*Change the code for the childs and set the time of execution*/
        sprintf(cast,"%d",i+1); // make the time char
        sprintf(cast2,"%d",(2*i)+1);    //make the pipe char
        sprintf(cast3,"%d",number_of_childs);   
        execl("./Child.out","",cast,cast2,cast3,NULL);
        }
    }   
        /*Father should never terminate*/               
        while (exit_count!=number_of_childs);
        printf("Father pospastex!!\n");

} 
```

孩子的代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>
#include <sys/types.h>
#include <time.h> 
#include <string.h>
#define WRITE 0
#define READ 1

/*Global declerations*/

int alarmflag=0;
double result=0;
int count=0;
int global_pipe;
int *fd;

/*Handler for the alarm and SIGUSR1 signal*/
void signal_handler (int sig)
{

if(sig==SIGALRM)
{
printf("Im child with pid:%d im going to die my value is %lf \n",getpid(),result);
alarmflag=1;
}

if(sig==SIGUSR1)
{
count++;
char message[512];

    if(count==1)
    {
    close(fd[global_pipe-1]);
    sprintf(message,"%d,%lf",getpid(),result);
    write(fd[global_pipe],message,strlen(message)+1);
    close(fd[global_pipe]); 
    //printf("PID:%d report: %lf\n",getpid(),result);
    }
    if(count==2)
    {
    close(fd[global_pipe-1]);
    sprintf(message,"%d,%lf",getpid(),result);
    write(fd[global_pipe],message,strlen(message)+1);
    close(fd[global_pipe]); 
    //printf("PID:%d report2 : %lf\n",getpid(),result);
    //kill(getppid(),SIGUSR2);
    //exit(0);
    }
}
if(sig==SIGINT)
{
/*Do nothing*/ 
}

}

double p_calculation ()
{
 int i=2;
 result=3;
 double prosimo=-1;

 while(!alarmflag)
    {
 prosimo=prosimo*(-1);
 result=result+(prosimo*(4/((double)i*((double)i+1)*((double)i+2))));
 i=i+2;
    }

}

main(int argc,char *argv[])
{
int pipe;
int size_fd;

size_fd=(atoi(argv[3]));
pipe=(atoi(argv[2]));
global_pipe=pipe;

fd=(int*)malloc(size_fd*sizeof(int));

/*handling signals*/
signal(SIGALRM,signal_handler);
signal(SIGUSR1,signal_handler);
signal(SIGINT,signal_handler);

/*Notify for execution time*/
printf("PID : %d with PPID : %d executing for %d seconds \n",getpid(),getppid(),atoi(argv[1]));
//printf("pipe:%d\n",pipe);
/*end this after the value passed as argument*/
alarm(atoi(argv[1]));
p_calculation();

/*Notify for finish*/

printf("Done!!!\n");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:56:25.353

有许多与您的管道有关的问题：

*   你在调用`pipe`之后调用`fork`，所以你最终得到了两个独立的管道（一个在子管道中，一个在父管道中）。父母听它创建的那个（没有人写信），所以它什么也看不到。

*   您将全局`fd`数组中的索引传递给孩子而不是管道的文件描述符。孩子有自己的`fd`包含随机垃圾的全局数组，因此您实际上是在写入随机文件描述符而不是管道。

*   您不会在它们存在的各种进程中关闭不需要的管道末端，因此您永远不会可靠地获得 EOF

如果您在 stackoverflow 上搜索[pipe+child](https://stackoverflow.com/search?q=pipe%20child)，您会看到大量示例代码的问题，这些示例代码试图做与您正在做的事情类似的事情——您可能会发现通读这些问题和答案很有用。

# css - 图标字体与图像

> ID：12674954
> 
> 赞同：16
> 
> 时间：2012-10-01T14:11:21.107
> 
> 标签：css, icons, icon-fonts

我的经理告诉我不要在我们的网站上使用图标字体，因为这是另一个 http 请求加上额外的 kB 下载。另外因为我必须使用`content before`字体（我不能更改 html），他更喜欢背景图片，所以它可以在 IE7 中使用。

就我个人而言，我喜欢这些小东西，非常漂亮、清脆和可调整大小！

如果我们在一个网站上只使用几个图标，我明白了，但如果我会使用，说一个网站上的 5 个图标 - 你们怎么看？是否值得使用图标字体，还是他认为它不值得？

我只是喜欢任何新的和令人兴奋的东西，今年是视网膜显示器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T14:30:32.053

## 图标字体和高密度屏幕

随着更多高分辨率/密度显示器的出现，使用图标字体将变得越来越重要。

图标在`16×16px`高密度显示器 (>300ppi) 上看起来很糟糕。由于自动缩放，它可能会显示得非常小或不清晰。`1em`另一方面，无论屏幕密度如何，字体图标都将正确且清晰地呈现。

当然，这一切都归结为您的

*   应用程序用户和
*   您的要求（IE7 似乎是主要的破坏者）

现在精灵是要走的路。

## 缺点？

图标字体也有不同的问题。所有图标都是单色的。~~目前还没有具有多色功能的字体标准。而且很可能不会。至少不是字体。~~有可能使用 SVG 字体进行多色，这本身不是字体标准/格式，但可以作为字体容器并用作浏览器中的字体传递机制。将多色图标作为 SVG 字体可以使用彩色的可缩放图标（感谢 @Joey）。

矢量图标图像更适合全彩色可调整大小的图标。

## 请求和字体图标

你老板关于额外要求的论点是完全错误的。您的图标是文件的一部分还是（最好的情况下）精灵图像的一部分并不重要。

两者都产生一个 HTTP 请求来获取资源。文件大小很大程度上取决于复杂性和格式，但精灵图像可能会更小。但是拥有几公斤大的字体文件并没有太大的区别。之后它们都被缓存在客户端上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T15:10:06.383

我个人使用 Font Awesome 作为我的主要字体资源，在我的情况下，我从 CDN 加载它，跳跃使用它的其他页面已经获取它，并被浏览器缓存。

如果文件大小是一个问题，我可以向你推荐这个令人难以置信的很棒的工具

[http://fontello.com/](http://fontello.com/)

它允许您将多种字体合并到一个文件中，并且仅包含您实际使用的图标。

[http://www.icnfnt.com/](http://www.icnfnt.com/)对 fontawesome 也是如此，但我有点喜欢更多的 fontello，因为它允许使用更多的字体。

在我看来，图标字体是诚实的方法......

**编辑**我最近也经常使用这个应用程序：http: [//icomoon.io/](http://icomoon.io/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T19:34:43.310

当你使用字体时，不同平台的不同浏览器会给出不同的结果。PNG 文件将提供稳定和独立的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-25T23:09:19.477

我已经使用 icomoon 实现了一个字体图标库，它适用于包括 ie7 在内的所有浏览器。对于小图标集，这是一个合适的做法，字体的比例适当，可以更改为您需要的任何颜色，您不必担心 PNG/GIF 透明背景颜色匹配。

但是...如果您的库变得更大（我的现在大约有 40 个图标），则维护变得越来越困难。如果设计师停止在项目上工作，或者您需要更改图标，则更新字体是一个费力的过程。然后一切都需要重新测试。使用 CSS 动态图标也很困难（对于 ie7）。

因此，考虑到维护的难度，我正在考虑切换回一系列（不同颜色的）精灵。原因是：

任何设计师都可以轻松地将新图标添加到集合中。CSS 不需要重新测试或更改。您不必为 IE 使用 javascript 变通方法。你根本不需要javascript。

对于视网膜显示器，只需创建两倍大小的精灵版本。无论如何，您可能需要为视网膜使用不同版本的 CSS，因为您网站上的所有其他图像都会有相同的密度问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T14:17:04.223

我会推荐 2 种解决方案来解决您的问题

使用[Fontsquirrel](http://www.fontsquirrel.com/)制作一个 webfont 并通过你的 css 将它嵌入到你的网站中，如果那不是很漂亮，则将它添加到你的 ftp 目录中，然后使用[google web fonts](http://www.google.com/webfonts)

如果不是那种看起来我应该去你老板说的图像解决方案..

所有这一切还取决于您需要多长时间来解决您的问题等

顺便说一句，如果您无法访问 html，我认为您可以访问可以通过大多数后端执行的 css，如果您无法访问图像！

最后但并非最不重要的一点是，如果您决定使用图像解决方案，请制作一个您将其引导到背景位置的精灵。这样，您只需为所有小图标加载 1 张图片。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-01T14:15:27.247

他是对的。在这种情况下，我会使用 css sprites。如果你必须支持 ie7（我很抱歉）你真的没有任何选择。自己探索这些东西——当然，你永远不知道什么时候会派上用场。

# javascript - 评估 javascript 函数 IE6 需要很长时间

> ID：12674956
> 
> 赞同：0
> 
> 时间：2012-10-01T14:11:21.830
> 
> 标签：javascript, time, eval

我有下面的代码块。我已经调试并找到了导致 IE6 长时间延迟的代码段。

基本上，代码循环通过将其转换为 XML 并发送到 PDF 的文档。在 Ubuntu 和 Firefox 4 上需要 3 秒。在 IE 上，它可能经常需要 40 秒。

```
/**
* This function builds up the XML to be saved to the DM.
*/
function getXMLToSave(){

var text="<workbook><sheet><name>Adv4New</name>";

//show_props(document.adv4.row10col1, "document.adv4.row10col1");

for(i=1;i<157;i++){
    text = text + "<row number='" + i + "'>";
    for(j=1;j<=7;j++){
        text = text + "<col ";
        //alert(eval('document.adv4.row'+i+'col'+j+'.readonly'));
        try{
            text = text + "number='" + j + "' label='" + eval('document.adv4.row'+i+'col'+j+'.className')+ "'";
        }
        catch (e) {
            text = text + "number='" + j + "' label=''";
        }
        try {
            if(eval('document.adv4.row'+i+'col'+j).readOnly)
            text = text + " type='readonly'";
            else
            text = text + " type=''";
        }
        catch (e) {
            text = text + " type=''";
        }
        try {
            text = text + " color='" + eval('document.adv4.row'+i+'col'+j+'.style.color') + "'";
        }
        catch (e) {
            text = text + " color=''";
        }
        text = text + ">";
        try {
            // don't wrap in a CDATA (like previously), but run cleanNode
            // this fixes html entities
            var content = eval('document.adv4.row'+i+'col'+j+'.value');
            text = text + cleanNode(content);
        }
        catch (e) {
            text = text + "0";
        }
        text = text + "</col>";
    }
    text = text + "</row>";
}
text = text + "</sheet></workbook>";

return text; 
```

}

我相信它是导致 IE6 延迟的 eval 函数。有没有一个巧妙的解决方案来解决这个问题。非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:16:22.243

你为什么首先使用 eval ？

```
eval('document.adv4.row'+i+'col'+j+'.style.color') 
```

使用括号符号！

```
document.adv4["row"+i+"col"+j].style.color 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T14:16:48.717

你根本不需要`eval()`：

```
 text = text + "number='" + j + "' label='" + document.adv4['row' + i + 'col' + j].className + "'"; 
```

此外，在 IE6 中（但**不是**在较新的浏览器中），通过重复添加更多内容来构建大字符串非常非常慢。在该浏览器中，通过创建一个子字符串数组然后在完成所有部分后将它们全部连接在一起来构建字符串要快得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T14:17:04.067

**不要使用 eval** *EVAL* is *EVIL*。话虽如此，你真的不应该关心IE6：连MS都不支持了，你何必呢？

无论如何，更改所有`eval`调用，例如：

```
eval('document.adv4.row'+i+'col'+j+'.value'); 
```

到

```
document.adv4['row' + i + 'col' + j].value; 
```

直接访问元素。请记住，节点是对象，因此可以使用点表示法 ( `foo.bar`) 或*“关联数组”*表示法来访问它们的属性：`foo['bar']`，当您需要变量的值来访问属性时，后者非常有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T14:16:54.963

不要使用 eval - 句点。eval() 应该重命名为 evil()。几乎没有你真正需要使用 eval 函数的情况。

在这种情况下，您可以使用`document.getElementById()`来查找具有特定 id 的 DOM 节点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T14:15:39.403

一种解决方案可能是生成一个颜色数组（或者如果需要，也可以是一个对象）然后使用它。

但是，问自己一个问题“我真的应该支持 IE6 吗？”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T14:25:15.583

很可能是所有的字符串连接都让它变慢了。每次向文本添加内容时，它都会将之前的所有文本复制到一个新字符串中。

较新的浏览器已针对这种特殊情况优化了代码，因此对它们的影响较小。

而不是像这样连接字符串：

```
text = text + "something"; 
```

改用数组：

```
var text = []; 
```

然后使用以下方法将项目添加到数组中`push`：

```
text.push("<workbook><sheet><name>Adv4New</name>"); 
```

最后只需将字符串连接在一起：

```
return text.join(''); 
```

# asp.net - 在 .net 中缓存动态页面

> ID：12674963
> 
> 赞同：3
> 
> 时间：2012-10-01T14:11:49.590
> 
> 标签：asp.net, visual-studio-2010, asp.net-caching

我有一些动态的 asp.net 页面。他们有数据列表控件。我想缓存我的页面，但我也想在缓存期间查看数据的变化。我不知道我该怎么做。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:27:54.677

您可以缓存页面，但在每次页面刷新时使用[Post Cache Substitution](http://msdn.microsoft.com/en-us/library/ms227429%28v=vs.100%29.aspx)重新填充数据列表。

# hbase - 在hbase中为我的种子文件中的每个不同的url创建不同的表？

> ID：12674965
> 
> 赞同：1
> 
> 时间：2012-10-01T14:11:52.133
> 
> 标签：hbase, nutch

我正在使用与 Hbase 0.92.1 集成的 nutch 2.1。当我从网站获取数据时，所有数据都只写入 Hbase 的一个表中，这是我的问题。该表的名称是“网页”。

有没有办法为我的种子文件中的每个不同 URL 创建一个新表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:02:10.073

我正在寻找类似的功能，但无法理解如何在没有黑客攻击的情况下使用 crawlId。

尚不清楚的是，inject 可以采用 -crawlId 参数（例如，nutch injection seed.txt -crawlId firstSeed）...这将在 HBase 中为整个 .txt 文件创建一个名为 firstSeed_webpage 的单独表。

对于上述用例，编写一个可以逐行读取 .txt 并给每个 URL 一个新的 crawlId 的 bash 脚本将是相当简单的。

！！！！！！（注意：对于与该爬网相关的所有命令，您应该包含 -crawlId 标志以表示您打算使用哪个表。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:48:54.480

我找到了。在 nutch 2.0 中，表名的前缀是所谓的 crawlId :)。

# eclipse - Ant-Contrib 内容辅助 Eclipse

> ID：12674967
> 
> 赞同：0
> 
> 时间：2012-10-01T14:12:00.767
> 
> 标签：eclipse, ant, ant-contrib

我正在`ANT`使用`eclipse`.

我刚刚安装了 eclipse 4.2。

当我使用旧版本的 eclipse 时，内容辅助`ANT-contrib`正在工作。现在使用 4.2 它无法正常工作。

我想知道如何在 Eclipse 中为 ant-contrib 获得内容协助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:03:04.880

这个[答案](https://stackoverflow.com/questions/11857906/how-to-use-ant-contrib-tasks-in-eclipse-auto-content-assist)说您需要在自己的 Ant 文件中以某种方式引用 ant-contrib 任务，并在 Eclipse 设置中激活某个首选项。

# c++ - 为什么在 C 和 C++ 的设计中都没有对 CPU 状态寄存器的内在访问？

> ID：12674969
> 
> 赞同：7
> 
> 时间：2012-10-01T14:12:10.027
> 
> 标签：c++, c, language-design

在溢出标志的情况下，访问这个标志似乎对跨架构编程来说是一个巨大的福音。它将提供一种安全的替代方法来依赖未定义的行为来检查有符号整数溢出，例如：

```
if(a < a + 100) //detect overflow 
```

我确实了解有安全的替代方案，例如：

```
if(a > (INT_MAX - 100)) //detected overflow 
```

但是，似乎 C 和 C++ 语言都缺少对状态寄存器或其中的各个标志的访问。为什么不包含此功能，或者做出了哪些语言设计决定禁止包含此功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T14:26:11.633

因为 C 和 C++ 被设计为独立于平台的。状态寄存器不是。

如今，二进制补码普遍用于实现有符号整数运算，但并非总是如此。一个人的补码或符号和绝对值曾经很常见。在最初设计 C 语言时，这种 CPU 仍在普遍使用。例如，COBOL 区分负 0 和正 0，它们存在于那些架构上。显然，这些架构上的溢出行为是完全不同的！

顺便说一句，你*不能*依赖未定义的行为来检测溢出，因为[合理的编译器](http://gcc.gnu.org)在看到

```
if(a < a + 100) 
```

将写一个警告并编译

```
if(true) 
```

...（前提是优化已打开且特定优化未关闭）。

请注意，您不能依赖警告。编译器只会在条件结束`true`或`false`等效转换之后发出警告，但在许多情况下，条件将在存在溢出的情况下被修改，而不会以普通`true`/结束`false`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T14:32:20.767

*   因为 C++ 被设计为一种可移植语言，即可以在许多 CPU 上编译的语言（例如 x86、ARM、LSI-11/2，以及 Game Boy、手机、冰柜、飞机、人体操作芯片和激光剑等设备）。
    *   跨 CPU 的可用标志可能有很大不同
    *   即使在同一个 CPU 中，标志也可能不同（采用 x86 标量指令与矢量指令）
    *   某些 CPU 甚至可能根本没有您想要的标志
*   必须回答这个问题：*当编译器无法确定它是否被使用时，是否应该始终提供/启用该标志？*，这不符合**您使用**的不成文但神圣的 C 和 C++ 法律的报酬
*   因为必须禁止编译器优化和重新排序代码以保持这些标志有效

后者的示例：

```
int x = 7;
x += z;
int y = 2;
y += z; 
```

优化器可以将其转换为伪汇编代码：

```
alloc_stack_frame 2*sizeof(int)
load_int 7, $0
load_int 2, $1
add z, $0
add z, $1 
```

这反过来会更类似于

```
int x = 7;
int y = 2;
x += z;
y += z; 
```

现在，如果您查询中间的寄存器

```
int x = 7;
x += z;
if (check_overflow($0)) {...}
int y = 2;
y += z; 
```

然后在优化和反汇编之后，你*可能会*这样结束：

```
int x = 7;
int y = 2;
x += z;
y += z;
if (check_overflow($0)) {...} 
```

那么这是不正确的。

可以构建更多示例，例如常量折叠编译时间溢出发生的情况。

* * *

旁注：我记得一个旧的 Borland C++ 编译器有一个小的 API 来读取当前的 CPU 寄存器。但是，上面关于优化的论点仍然适用。

在另一个旁注：检查溢出：

```
// desired expression: int z = x + y
would_overflow = x > MAX-y; 
```

更具体

```
auto would_overflow = x > std::numeric_limits<int>::max()-y; 
```

或者更好，不太具体：

```
auto would_overflow = x > std::numeric_limits<decltype(x+y)>::max()-y; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T14:26:13.637

我可以想到以下几个原因。

1.  通过允许访问寄存器标志，语言跨平台的可移植性受到严重限制。

2.  优化器可以彻底改变表达式，并使您的标志无用。

3.  它会使语言更复杂

4.  大多数编译器都有大量的内在函数，可以在不借助标志的情况下执行最常见的操作（例如带进位的加法）。

5.  大多数表达式可以以安全的方式重写以避免溢出。

6.  如果您有非常特殊的需求，您总是可以退回到内联汇编

对状态寄存器的访问似乎还不足以进行标准化工作。

# mysql - 加入MYSQL表的正确方法

> ID：12674971
> 
> 赞同：0
> 
> 时间：2012-10-01T14:12:21.480
> 
> 标签：mysql, sql, database, join

我正在尝试将我对 mysql 的知识从“我可以让它工作”提升到“我可以让它正常工作”。我现在正在使用连接，我想知道执行以下操作的最佳方法：

我有 2 个表“项目”和“类别”。在“items”表中，我有一个名为 category 的字段，它将链接到“categories”表的主键 cid。这样做的最佳方法是什么？这就是我一直这样做的方式，但我觉得这无论如何都不是最好的方式

```
SELECT C.something, C.soemthing 2 FROM categories C, items I WHERE C.cid=I.category AND C.categoryName='New' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T14:14:45.220

您的查询已经正确，但我建议使用`ANSI SQL-92`格式

```
SELECT C.something, C.soemthing2 
FROM   categories C INNER JOIN items I 
              on C.cid=I.category
WHERE  C.categoryName='New' 
```

问题，你想达到什么目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:14:57.123

您的查询将返回正确的结果集，但以下内容更具可读性：

```
SELECT C.something, C.soemthing 2 
FROM categories C 
INNER JOIN items I ON C.cid = I.category 
WHERE  C.categoryName='New'; 
```

# java - SWT 检查表禁用复选框

> ID：12674974
> 
> 赞同：1
> 
> 时间：2012-10-01T14:12:25.097
> 
> 标签：java, checkbox, swt

我`Table`通过以下方式创建了一个 SWT：

```
new Table(tabFolder, SWT.CHECK | SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL); 
```

它现在每行都有一个复选框。如何禁用（灰色）此复选框的单个`TableItem`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:27:55.783

使用`TableItem.setGrayed (boolean grayed)`. 即使它是灰色的，您仍然可以选中/取消选中它。要禁用选中/取消选中，请使用`TableItem.setChecked(boolean checked)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:20:17.343

我不确定您是否可以禁用自动管理的复选框（即在表中使用 SWT.CHECK）。

解决方案是管理自己的编辑器（[见片段](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet126.java)）

然后在需要时在编辑器上执行此操作：

```
myButton.setEnabled(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T15:27:01.587

据我所知，禁用选中表中的一行的唯一方法是向表中添加一个侦听器，并在选中复选框后立即重置选择。要“变灰”（不幸的是，不是按钮而是行），您可以使用适当的 ColumnLabelProvider。

# c# - 将值从代码隐藏传递到 JavaScript

> ID：12674976
> 
> 赞同：0
> 
> 时间：2012-10-01T14:12:29.670
> 
> 标签：c#, javascript, asp.net, code-behind

尝试将值 (abc) 从代码隐藏传递给 JavaScript，但页面失败且无法加载。语法有问题吗？我注意到通常 <%...%> 以黄色突出显示，但在我的代码中并非如此。

```
<script src="../Scripts/jqModal.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $().ready(function() {    });

    $("a").click(function() {
    if (this.id == "optionalFeatures_Online") {
        var abc = "<%=Variable_codebehind %>";
    }
        });
</script> 
```

On_Load 事件背后的代码：

```
 protected override void OnLoad(EventArgs e)
    {
        Variable_codebehind = "hello world"; 
    } 
```

**来自日志文件的错误：**

Web.HttpUnhandledException' 被抛出。---> System.Web.HttpException：无法修改Controls 集合，因为该控件包含代码块（即<% ... %>）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:49:26.677

您可以使用 Page.RegisterStartupScript 并从 Code-Behind 传递一些变量。将脚本放在 .js 文件中，并在代码隐藏的 OnLoad 方法上调用它：

OnLoad 代码隐藏：

```
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "MyScript", String.Format("MyScript({0});", codeBehindVar)); 
```

MyScript.js

```
function MyScript(myVar)
{
   var self = this;
   $("a").click(function() {
   if (this.id == "optionalFeatures_Online") {
      var abc = self.myVar;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:16:11.587

首先将值绑定到隐藏控件

然后从隐藏控件中获取值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T14:24:16.643

```
<script src="../Scripts/jqModal.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {    
        $("a").click(function() {
            if (this.id == "optionalFeatures_Online") {
                var abc = <%=Variable_codebehind %>;
            }
        });
    });
</script> 
```

On_Load 事件背后的代码：

```
 protected override void OnLoad(EventArgs e)
    {
        Variable_codebehind = HttpUtility.JavaScriptStringEncode("hello world", true); 
    } 
```

# jsf - 命令链接不适用于具有数据表多项选择的表单 - JSF

> ID：12674977
> 
> 赞同：1
> 
> 时间：2012-10-01T14:12:46.113
> 
> 标签：jsf, jakarta-ee, datatable, commandlink

我在数据表中添加一行并刷新它的 commamd 链接有问题。它工作正常，但是当我在同一个表单上添加另一个具有多项选择的表时，它停止了工作。他们之间是不是有些不兼容？

我正在使用 PrimeFaces 3.4、Mojarra 2.1.6 和 Glassfish 3

这是我的表格：

```
<h2>Projeto para Credenciamento Equipe de Saúde da Família</h2>
    <hr />
    <h:form id="formCredenciamentoEsf" prependId="false">
        <p:fieldset legend="Caracterização Geral">

            <p:panelGrid id="microareas" columns="2" cellspacing="8">

                <p:dataTable
                    value="#{credenciamentoEsfMB.credenciamentoESF.projeto.caracterizacaoTerritorialDemograficaList}"
                    var="carac" emptyMessage="Adicione uma microárea.">
                    <p:column
                        headerText="Microáreas que compõem a área de abrangência da ESF">
                        <p:inputText value="#{carac.microarea}" size="50" />
                    </p:column>
                    <p:column
                        headerText="População Estimada por Microárea (nº de pessoas)">
                        <p:inputText value="#{carac.populacaoEstimadaMicroarea}"
                            size="50" />
                    </p:column>
                    <p:column>
                        <p:commandLink
                            actionListener="#{credenciamentoEsfMB.removerCaracteristica}"
                            update=":formCredenciamentoEsf:microareas">
                            <f:setPropertyActionListener value="#{carac}"
                                target="#{credenciamentoEsfMB.caracteristicaSelecionada}" />
                            <h:outputText value="Remover " />
                        </p:commandLink>
                    </p:column>
                </p:dataTable>

            </p:panelGrid>

            <h:panelGrid columns="2">                   
                               <p:commandLink actionListener="#{credenciamentoEsfMB.addCaracteristicaTerritorialDemografica}"
                    update=":formCredenciamentoEsf:microareas">
                    <h:outputText value="Adicionar Microárea" />
                </p:commandLink>
                <h:outputLabel/>

                <h:outputLabel
                    value="População total coberta pela ESF (nº de pessoas):"></h:outputLabel>
                <p:inputText id="populacaoCoberta"
                    value="#{credenciamentoEsfMB.credenciamentoESF.populacaoTotalCoberta}" />

                <h:outputLabel
                    value="Caracterização da população a ser coberta pelas ações da ESF:" />

                <p:dataTable
                    value="#{credenciamentoEsfMB.populacaoCobertaDataModel}" var="pop"
                    id="dtCaracteristicaPopulacaoCoberta"
                    selection="#{credenciamentoEsfMB.populacaoCobertaSelecionadas}" >
                    <p:column selectionMode="multiple" />

                    <p:column headerText="População a ser atendida">
                        <h:outputLabel
                            value="#{pop.caracteristicaPopulacaoCoberta.descricao}" />
                    </p:column>
                    <p:column headerText="Nº de pessoas">
                        <p:inputText value="#{pop.numPessoas}" />
                    </p:column>
                </p:dataTable>

            </h:panelGrid>
        </p:fieldset>
    </h:form>
</ui:define> 
```

当我放置最后一个带有多项选择的数据表时，链接“Adicionar Microárea”不起作用。

这是我的托管 bean：

```
@ManagedBean
@ViewScoped
public class CredenciamentoEsfMB {

    ....

    public PopulacaoCobertaDataModel getPopulacaoCobertaDataModel() {
        List<CaracteristicaPopulacaoCoberta> caracteristicas =  caracteristicaPopulacaoCobertaEjb.buscarTodos();
        populacaoCobertaEsf = new ArrayList<PopulacaoCobertaESFESB>();
        for (CaracteristicaPopulacaoCoberta caracteristicaPopulacaoCoberta : caracteristicas) {
            PopulacaoCobertaESFESB p = new PopulacaoCobertaESFESB();
            p.setCaracteristicaPopulacaoCoberta(caracteristicaPopulacaoCoberta);
            p.setCredenciamentoESFESB(credenciamentoESF);
            populacaoCobertaEsf.add(p);
        }
        this.populacaoCobertaDataModel = new PopulacaoCobertaDataModel(this.populacaoCobertaEsf);
        return this.populacaoCobertaDataModel;
    }

    public void removerCaracteristica() {       
        credenciamentoESF.getProjeto()
                .getCaracterizacaoTerritorialDemograficaList().remove(caracteristicaSelecionada);
    }

    public void addCaracteristicaTerritorialDemografica(ActionEvent e) {
        System.out.println("Adicionando microarea");
        credenciamentoESF.getProjeto()
                .getCaracterizacaoTerritorialDemograficaList()
                .add(new CaracterizacaoTerritorialDemografica());
    }

} 
```

有谁知道发生了什么？

# class - 如何使 UIPickerView 类立即报告其对其他类的值？

> ID：12674978
> 
> 赞同：0
> 
> 时间：2012-10-01T14:12:51.997
> 
> 标签：class, uipickerview

我在 MyViewController 中有一个 UIpickerView“myPicker。选择器是一个名为 MyPicker 的类中的 NSObject。

当我将 pickerView 设置为选定的值时，myPicker 不会立即告诉 MyViewController 它的新状态。

我该如何安排这样的即时通讯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:30:43.093

我自己找到了答案。我使用了 NSNotification。

# erlang - 这种 erlang gen_server 应该如何测试？

> ID：12674980
> 
> 赞同：1
> 
> 时间：2012-10-01T14:13:01.760
> 
> 标签：erlang

我有一个 gen_server 导出这样的函数：

```
my_function(Param) ->
    gen_server:cast(?SERVER, {forward, Param}). 
```

并有一个像这样的handle_cast：

```
handle_cast({forward, Param}, #state{peer=Socket} = State) ->
    gen_tcp:send(Socket, Param),
    {noreply, State}. 
```

在大多数情况下，使用 gen_tcp 连接的对等方将回复不同消息中的一条，我在 handle_info 中处理回复

```
handle_info({tcp, Socket, Data}) ->
    io:format("Received : ~p~n", [Data]),
    {noreply, State}. 
```

有什么推荐的方法可以在 erlang 中测试这种场景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:41:18.867

您可以使用设置/拆卸功能来执行以下操作：

```
my_test_() -> {
    setup,
    fun() -> my_server:start_link() end,
    fun(_) -> my_server:stop() end,
    fun() ->
        %% here you do all the message sending and such
    end
}. 
```

您还需要导出一个 stop/0 函数，该函数将负责调用/转换 gen_server 以停止它。

[您可以在此处](http://www.erlang.org/doc/apps/eunit/chapter.html#Fixtures)找到有关固定装置的更多信息

HTH，阿林

# qt - Qt 中的退出应用程序

> ID：12674984
> 
> 赞同：5
> 
> 时间：2012-10-01T14:13:07.017
> 
> 标签：qt, exit, exit-code

我在 Qt 中构建了一个包含两个按钮的应用程序：一个退出按钮和一个导入按钮。按下导入按钮时，屏幕上的滚动区域中会显示按钮列表（文件 loggers.csv 包含数据 1;2;3;4;5;）。

一切正常，但是当我按下退出按钮（当然应该关闭所有内容）时，应用程序没有正确停止（Qt 的停止按钮仍然处于活动状态，而播放按钮没有）。当我运行调试器并按下退出按钮时，它会给出一个错误：指定给 RtlFreeHeap(0ADF0000, 0028FE40) 的地址无效。有谁能够帮助我？

**主要的**

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    MainWindow w;

    w.showFullScreen();

    return a.exec();
} 
```

**主窗口.h**

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtGui>
#include "logger.h"

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

    QPushButton exit_btn;
    QPushButton import_btn;

private slots:

    void createMenus();
    void exit();
    void import();

private:

    int window_width;
    int window_height;

    int numLoggers;
    int numSelected;

    QVector<Logger*> loggers;

    QScrollArea * scroll_area;

    QVBoxLayout scrollLayout;

    QWidget viewport;

    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

**主窗口.cpp：**

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "QtGui"

MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    window_width = QApplication::desktop()->width();
    window_height = QApplication::desktop()->height();

    createMenus();

    connect(&exit_btn,SIGNAL(clicked()),this,SLOT(exit()));
    connect(&import_btn,SIGNAL(clicked()),this,SLOT(import()));
}

MainWindow::~MainWindow()
{
   delete ui;
}

void MainWindow::createMenus()
{
    import_btn.setParent(ui->centralWidget);
    import_btn.setGeometry(400,300,100,100);
    import_btn.setText("IMPORT");

    exit_btn.setText("EXIT");
    exit_btn.setParent(ui->centralWidget);
    exit_btn.setGeometry(window_width-50,12,32,32);

    viewport.setLayout(&scrollLayout);
    viewport.resize(0,0);

    scroll_area = new QScrollArea(ui->centralWidget);
    scroll_area->setGeometry(0,66,317,window_height-116);
    scroll_area->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    scroll_area->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    scroll_area->setWidget(&viewport);
    scroll_area->setGeometry(0,97,317,window_height-228);

    scrollLayout.setMargin(0);
    scrollLayout.setSpacing(0);
}

void MainWindow::exit()
{
    close();
    qApp->quit();
}

void MainWindow::import()
{
    numSelected=0;

    QFile f("Loggers3.csv");

    if (f.open(QIODevice::ReadOnly))
    {
        numLoggers=0;

        QString data;
        data = f.readAll();
        QStringList vals = data.split(';');

        while(vals.size()>=1)
        {
            Logger * logger = new Logger;

            logger->setNumber(vals[0].toInt());
            vals.removeAt(0);

            loggers<<logger;

            numLoggers++;
        }
        f.close();

        for(int i=0; i<numLoggers;i++)
        {
            loggers[i]->createButtons();
            scrollLayout.addWidget(loggers[i]->button);
        }

        viewport.resize(367,numLoggers*60);
    }
} 
```

**记录器.h**

```
#ifndef LOGGER_H
#define LOGGER_H

#include <QtGui>

class Logger : public QWidget
{
    Q_OBJECT
public:
    explicit Logger(QWidget *parent = 0);

    ~Logger();
    int number;
    QLabel num;
    QToolButton * button;
    bool checked;

signals:

public slots:

    void setNumber(int number);
    void createButtons();
};

#endif // LOGGER_H 
```

**记录器.cpp**

```
#include "logger.h"
#include <QtGui>

Logger::Logger(QWidget *parent) :
    QWidget(parent)
{
    button = new QToolButton;
    button->setCheckable(true);
    button->setMinimumSize(317,60);
    button->setStyleSheet("QToolButton{background-image: url(images/btn_bg); border:none}");
}

Logger::~Logger()
{
}

void Logger::setNumber(int logNumber)
{
    number=logNumber;
}

void Logger::createButtons()
{
    QLayout * layout = new QHBoxLayout;

    QSpacerItem *spacer = new QSpacerItem(120, 31, QSizePolicy::Maximum, SizePolicy::Maximum);

    num.setStyleSheet("color: white; font: bold 16px");
    num.setText(QString::number(number));

    layout->addWidget(&num);
    layout->addItem(spacer);

    button->setLayout(layout);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T18:40:01.820

我不完全确定您要达到的目标...但是您的问题在于这两行：

```
viewport.setLayout(&scrollLayout);
viewport.resize(0,0); 
```

在 QWidget 类的文档中，它指出：

> 如果这个小部件上已经安装了布局管理器，QWidget 不会让你安装另一个。您必须先删除现有的布局管理器（由 layout() 返回），然后才能使用新布局调用 setLayout()。

这就是你的问题所在。不信，在这两行代码之前加上这个检查。

```
 if(layout()){
        qDebug() << "Another layout exists";
    } 
```

* * *

来源：[QVBoxLayout 类参考](http://doc.qt.digia.com/qt-maemo/qvboxlayout.html#details)

QVBoxLayout 类垂直排列小部件。

此类用于构造垂直框布局对象。有关详细信息，请参阅 QBoxLayout。

该类的最简单用法是这样的：

```
 QWidget *window = new QWidget;
 QPushButton *button1 = new QPushButton("One");
 QPushButton *button2 = new QPushButton("Two");
 QPushButton *button3 = new QPushButton("Three");
 QPushButton *button4 = new QPushButton("Four");
 QPushButton *button5 = new QPushButton("Five");

 QVBoxLayout *layout = new QVBoxLayout;
 layout->addWidget(button1);
 layout->addWidget(button2);
 layout->addWidget(button3);
 layout->addWidget(button4);
 layout->addWidget(button5);

 window->setLayout(layout);
 window->show(); 
```

首先，我们在布局中创建我们想要的小部件。然后，我们创建 QVBoxLayout 对象并将小部件添加到布局中。最后，我们调用 QWidget::setLayout() 将 QVBoxLayout 对象安装到小部件上。此时，布局中的小部件被重新设置为将窗口作为其父级。

* * *

**项目中的关键错误来源：**

***小部件应该在堆上构建，因为当它们的父级被删除时，它们会被自动删除。*** 您有一个在堆上实例化的自定义小部件类。成员也应该放在堆上。此外，您应该考虑在 GUI 代码中使用父/子层次结构，以确保正确的内存管理和正确的删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:24:54.600

以我的经验，如果您的程序停止，`RtlFreeHeap`这是内存损坏的好兆头。

打电话时

```
import_btn.setParent(ui->centralWidget); 
```

`centralWidget`拥有`import_btn`. 这意味着，当`centralWidget`被删除时（作为`delete ui;`您`MainWindow`的析构函数的一部分发生），它将调用`delete`您的成员变量！

这会导致报告的内存损坏。

您需要`QPushButton`动态分配 's，而不是作为普通成员变量。所以让他们`QPushButton*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T09:35:32.107

以下是我从 mainwindow.cpp 执行此操作的方法，这要感谢这个问题：[How to create a correct exit button in qt](https://stackoverflow.com/questions/11845734/how-to-create-a-correct-exit-button-in-qt)

```
QPushButton * quit_btn = new QPushButton(this);
quit_btn->setGeometry(540,440,93,27);
quit_btn->setText("Exit");
QObject::connect(quit_btn,SIGNAL(clicked()),qApp,SLOT(quit())); 
```

完美运行：D

# three.js - 挤压样条 (THREE.SceneUtils.createMultiMaterialObject) 不响应 Three.Ray

> ID：12674987
> 
> 赞同：0
> 
> 时间：2012-10-01T14:13:13.460
> 
> 标签：three.js

我有一个使用[挤压样条示例](http://mrdoob.github.com/three.js/examples/webgl_geometry_extrude_splines.html)和[鼠标工具提示示例](http://stemkoski.github.com/Three.js/Mouse-Tooltip.html)中的元素的页面。在继续之前尝试调试此项目的起始元素。鼠标工具提示正在处理各种对象，但拉伸样条线除外。

使用 webGL 渲染器，如果这很重要的话。

样条创建代码（不包括 Vector3 线或圆形拉伸）：

```
function addGeometry( geometry, color, x, y, z, rx, ry, rz, s, name ) {
    var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, [
        new THREE.MeshLambertMaterial( { color: color } )
    ] );
    mesh.position.set( x, y, z );
    mesh.scale.set( s, s, s );
    mesh.name = name;
    scene.add( mesh );
} 
```

update() 中的 intersect/Three.Ray 代码与上面链接的示例相同。我还尝试将样条线添加到父级，但鼠标悬停仍然没有变化。本周晚些时候，我可能会过渡到 ThreeX DOM 事件和 Tween :D

可能是单独问题的小问题：

*   见证了飞机上与 Ray 相关的 OnMouseOver 事件的一些不准确性。这也可能是我使用大距离的事实？平面为 1000x1000，相机距离为 2000 像素。我知道这很荒谬，我也在解决这个问题。

谢谢收听！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:11:56.297

由于您只提供了代码片段，因此猜测如下：由于多材质对象是分层的，因此您需要将递归标志设置`ray.intersectObjects()`为 true，如下所示：

```
var intersects = ray.intersectObjects( scene.children, true ); 
```

# php - 令人困惑的 SalesForce 错误

> ID：12674988
> 
> 赞同：0
> 
> 时间：2012-10-01T14:13:13.273
> 
> 标签：php, salesforce

我正在使用 SalesForce PHP Toolkit 并获得很好的连接。但是当我使用任何示例代码时 - 请参见[此处](http://wiki.developerforce.com/page/PHP_Toolkit_20.0_Create_Delete_Undelete_Sample_%28Partner%29)

```
INVALID_FIELD: No such column '' on entity 'Contact'. If you are attempting to use a custom field, be sure to append the '__c' after the custom field name. Please reference your WSDL or the describe call for the appropriate names. 
```

我可能只是在努力寻找答案，因为谷歌不会让我搜索“”

环境是 CentOS 6 和 PHP 5.3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T01:09:00.873

我刚刚在这里创建了一个帐户来回答这个问题。我花了一整天的时间才发现 PHP Toolkit 中的这个错误。该问题是由“fieldsToNull”属性引起的。我读了大约。[这里](http://boards.developerforce.com/t5/APIs-and-Integration/Soap-Exception-quot-No-such-column-on-entity-Lead-quot/td-p/455829)的解决方案让我知道在哪里寻找解决方案。

所以一个正确的例子是：

```
 $fields = array('LastName' => 'Doe');
 $sObject = new SObject();
 $sObject->fields = $fields;
 $sObject->fieldsToNull = NULL;//this is the solution! :)      
 $sObject->type = 'Contact'; 
```

然后，照常处理 PHP Toolkit 示例的其余部分。它适用于我的合作伙伴 WSDL+Developer SF 帐户。

希望能帮助到你！

# c++ - 来自多个进程的 pantheios 并发写入日志文件

> ID：12674990
> 
> 赞同：0
> 
> 时间：2012-10-01T14:13:27.547
> 
> 标签：c++, logging, pantheios

任何人都知道 pantheios 是否支持从多个进程并发写入日志文件。如果我启动程序的两个实例，则不会将任何内容写入日志文件。我应该在库中设置一些参数以便它可以工作，还是不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:16:13.357

好的，这是 3 个月前，但仍然是一个相关的未回答问题。我们遇到了这个问题，发现[这里记录了 Windows](http://www.pantheios.org/doc/html/group__group____backend____stock__backends____file____flags.html)：

您需要设置 PANTHEIOS_BE_FILE_F_SHARE_ON_WINDOWS 标志，以便在 be_file_Context::Open() 方法 (pantheios bec.file.cpp) 中传递给 CreateFile() 的共享模式参数包括 FILE_SHARE_WRITE。

例如，您的 pantheios_be_file_setFilePath() 调用可能是：

```
pantheios_be_file_setFilePath(your_path_name.c_str(),
  PANTHEIOS_BE_FILE_F_SHARE_ON_WINDOWS,
  PANTHEIOS_BE_FILE_F_SHARE_ON_WINDOWS,
  PANTHEIOS_BEID_ALL); 
```