# StackOverflow 问答 13761000-13761999

# linux - 如何使用 SVN 重置存储库

> ID：13761001
> 
> 赞同：0
> 
> 时间：2012-12-07T10:13:17.727
> 
> 标签：linux, svn

我在我的服务器上使用 SVN，但我不知道如何重置我的存储库？

这个存储库上有很多数据，我想重置它，然后用一个完全不同的文件夹进行新的提交。

你有什么想法 ？我怎样才能检索一个空的存储库？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:22:58.897

存储库只不过是一个目录。手动删除它，然后`svnadmin create`再次运行。您还将获得一个新的 UUID，恕我直言，这是一个好主意：您不会让客户误以为它仍然是所有历史突然消失的旧仓库。

# ruby-on-rails - 切换到 Capistrano 后，乘客上 Rails 应用程序上的 Bundler::GemfileError

> ID：13761003
> 
> 赞同：1
> 
> 时间：2012-12-07T10:13:19.880
> 
> 标签：ruby-on-rails, rvm, capistrano, bundler, passenger

我有一个在 Phusion Passenger 上运行的 Rails 应用程序，Apache 正在生产中。当我过去手动部署时一切正常（通过 SSH 连接到服务器并获取最新更新等），但我最近切换到 Capistrano 以使我的团队成员的生活更轻松。现在，当我尝试访问该站点时，Passenger 会抛出以下错误：`Exception PhusionPassenger::UnknownError in PhusionPassenger::Rack::ApplicationSpawner (There was an error in your Gemfile, and Bundler cannot continue. (Bundler::GemfileError))`

如果我运行 rails console`bundle exec rails console production`并运行`app.get('/')`，它会返回状态码 200。所以这个 GemfileError 只有在请求通过Passenger时才会被抛出。

我一直为我拥有的每个 Rails 应用程序使用带有 gemsets 的 rvm，但 Capistrano 现在将包安装在`/var/www/mywebsite/shared/bundle`.

在我看来，rvm 和 capistrano 在处理 gem 的方式上存在冲突，但这并不能解释为什么它只会在这种环境下给出 GemfileError。

## 乘客错误

### 错误信息：

```
There was an error in your Gemfile, and Bundler cannot continue. (Bundler::GemfileError) 
```

### 异常类：

```
PhusionPassenger::UnknownError 
```

### 应用程序根：

```
/var/www/3eadmin/current 
```

### 回溯

```
#   File    Line    Location
0   /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/dsl.rb   12  in `rescue in evaluate'
1   /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/dsl.rb   6   in `evaluate'
2   /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/definition.rb    18  in `build'
3   /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler.rb   144 in `definition'
4   /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler.rb   112 in `setup'
5   /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/setup.rb 17  in `'
6   /home/hatd/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb  60  in `require'
7   /home/hatd/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb  60  in `rescue in require'
8   /home/hatd/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb  35  in `require'
9   /var/www/3eadmin/releases/20121207090404/config/setup_load_paths.rb 17  in `'
10  /home/hatd/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb  36  in `require'
11  /home/hatd/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb  36  in `require'
12  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/utils.rb    301 in `prepare_app_process'
13  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb 156 in `block in initialize_server'
14  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/utils.rb    563 in `report_app_init_status'
15  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb 154 in `initialize_server'
16  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  204 in `start_synchronously'
17  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  180 in `start'
18  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb 129 in `start'
19  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    253 in `block (2 levels) in spawn_rack_application'
20  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   132 in `lookup_or_add'
21  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    246 in `block in spawn_rack_application'
22  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   82  in `block in synchronize'
23      prelude>    10:in `synchronize'
24  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   79  in `synchronize'
25  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    244 in `spawn_rack_application'
26  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    137 in `spawn_application'
27  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    275 in `handle_spawn_application'
28  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  357 in `server_main_loop'
29  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  206 in `start_synchronously'
30  /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/helper-scripts/passenger-spawn-server 
```

## 软件版本

*   `ruby -v`: ruby​​ 1.9.3p327 (2012-11-10 修订版 37606) [i686-linux]
*   `rvm -v`: rvm 1.17.2 (stable) by Wayne E. Seguin, Michal Papis [https://rvm.io/]
*   `bundle -v`：捆绑器版本 1.2.3
*   `capistrano`: 2.13.5

## 软件位置

*   `which ruby`：/home/hatd/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
*   `which rvm`：/home/hatd/.rvm/bin/rvm
*   `which bundle`：/home/hatd/.rvm/gems/ruby-1.9.3-p327@global/bin/bundle

## rvm 信息输出

```
ruby-1.9.3-p327:

  system:
    uname:       "Linux hatd 3.2.0-23-generic-pae #36-Ubuntu SMP Tue Apr 10 22:19:09 UTC 2012 i686 i686 i386 GNU/Linux"
    system:      "ubuntu/12.04/i386"
    bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.17.2 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "1 day 18 hours 3 minutes 27 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p327"
    date:         "2012-11-10"
    platform:     "i686-linux"
    patchlevel:   "2012-11-10 revision 37606"
    full_version: "ruby 1.9.3p327 (2012-11-10 revision 37606) [i686-linux]"

  homes:
    gem:          "/home/hatd/.rvm/gems/ruby-1.9.3-p327"
    ruby:         "/home/hatd/.rvm/rubies/ruby-1.9.3-p327"

  binaries:
    ruby:         "/home/hatd/.rvm/rubies/ruby-1.9.3-p327/bin/ruby"
    irb:          "/home/hatd/.rvm/rubies/ruby-1.9.3-p327/bin/irb"
    gem:          "/home/hatd/.rvm/rubies/ruby-1.9.3-p327/bin/gem"
    rake:         "/home/hatd/.rvm/gems/ruby-1.9.3-p327@global/bin/rake"

  environment:
    PATH:         "/home/hatd/.rvm/gems/ruby-1.9.3-p327/bin:/home/hatd/.rvm/gems/ruby-1.9.3-p327@global/bin:/home/hatd/.rvm/rubies/ruby-1.9.3-p327/bin:/home/hatd/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
    GEM_HOME:     "/home/hatd/.rvm/gems/ruby-1.9.3-p327"
    GEM_PATH:     "/home/hatd/.rvm/gems/ruby-1.9.3-p327:/home/hatd/.rvm/gems/ruby-1.9.3-p327@global"
    MY_RUBY_HOME: "/home/hatd/.rvm/rubies/ruby-1.9.3-p327"
    IRBRC:        "/home/hatd/.rvm/rubies/ruby-1.9.3-p327/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

## Capistrano config/deploy.rb 包含

```
require 'bundler/capistrano' 
```

## .bundle/config 内容

```
---
BUNDLE_FROZEN: '1'
BUNDLE_PATH: /var/www/3eadmin/shared/bundle
BUNDLE_DISABLE_SHARED_GEMS: '1'
BUNDLE_WITHOUT: development:test 
```

## 宝石文件内容：

```
source 'https://rubygems.org'

gem 'rails', '3.1.3'

gem 'community_engine' , '2.0.0.beta4', :path => 'vendor/gems/community_engine-2.0.0.beta4'
gem 'pg'
gem 'json'
gem 'jquery-rails'
gem 'authority', '~> 2.0.0'
gem 'friendly_id', '~> 3.3'
gem 'hpricot'
gem 'aws-sdk', '~> 1.3.4'
gem 'bootstrap-sass', '~> 2.1.0.1'
gem 'coffee-rails', '~> 3.1.1'
gem 'rack-cors', :require => 'rack/cors'
gem 'event-calendar', :require => 'event_calendar'
gem 'apns'

group :development do 
  gem 'sqlite3'
  gem 'rspec-rails', "~> 2.9.0"
  gem 'capistrano'
  gem 'rvm-capistrano'
  gem 'guard-rspec', "~> 0.7.0"
end

group :assets do
  gem 'sass-rails', '~> 3.1.4'
  gem 'uglifier', '>= 1.0.3'
end

group :test do
  gem 'rspec-rails', "~> 2.9.0"
  gem 'capybara', '~> 1.1.2'
  gem 'factory_girl_rails', '~> 3.2.0'
end 
```

## 宝石列表输出

```
*** LOCAL GEMS ***

bundler (1.2.3)
daemon_controller (1.1.0)
fastthread (1.0.7)
passenger (3.0.18)
rack (1.4.1)
rake (10.0.2)
rubygems-bundler (1.1.0)
rvm (1.11.3.5) 
```

## 捆绑列表输出

```
gems included by the bundle:
  * XMLCanonicalizer (1.0.1)
  * actionmailer (3.1.3)
  * actionpack (3.1.3)
  * activemodel (3.1.3)
  * activerecord (3.1.3)
  * activeresource (3.1.3)
  * activesupport (3.1.3)
  * acts_as_commentable (3.0.1)
  * addressable (2.2.8)
  * apns (0.9.0)
  * arel (2.2.3)
  * authlogic (3.1.3)
  * authority (2.0.0)
  * aws-sdk (1.3.9)
  * babosa (0.3.7)
  * bborn-acts-as-taggable-on (2.2.1)
  * bootstrap-sass (2.1.0.1)
  * builder (3.0.0)
  * bundler (1.2.3)
  * cocaine (0.3.0)
  * coffee-rails (3.1.1)
  * coffee-script (2.2.0)
  * coffee-script-source (1.3.1)
  * community_engine (2.0.0.beta4)
  * configatron (2.9.1)
  * dynamic_form (1.1.4)
  * erubis (2.7.0)
  * event-calendar (2.3.3)
  * execjs (1.3.2)
  * faraday (0.7.6)
  * friendly_id (3.3.3.0)
  * haml (3.1.7)
  * hike (1.2.1)
  * hpricot (0.8.6)
  * htmlentities (4.3.1)
  * httparty (0.8.3)
  * i18n (0.6.0)
  * jquery-rails (1.0.19)
  * json (1.7.1)
  * kaminari (0.14.0)
  * koala (1.4.0)
  * log4r (1.1.10)
  * macaddr (1.6.1)
  * mail (2.3.3)
  * meta_search (1.1.3)
  * mime-types (1.18)
  * multi_json (1.0.4)
  * multi_xml (0.4.4)
  * multipart-post (1.1.5)
  * net-ldap (0.2.2)
  * nokogiri (1.5.2)
  * oa-basic (0.3.2)
  * oa-core (0.3.2)
  * oa-enterprise (0.3.2)
  * oa-more (0.3.2)
  * oa-oauth (0.3.2)
  * oa-openid (0.3.2)
  * oauth (0.4.6)
  * oauth2 (0.5.2)
  * omniauth (0.3.2)
  * paperclip (2.7.0)
  * pg (0.13.2)
  * polyamorous (0.5.0)
  * polyglot (0.3.3)
  * prototype-rails (3.1.0)
  * pyu-ruby-sasl (0.0.3.3)
  * rack (1.3.6)
  * rack-cache (1.2)
  * rack-cors (0.2.7)
  * rack-mount (0.8.3)
  * rack-openid (1.3.1)
  * rack-ssl (1.3.2)
  * rack-test (0.6.1)
  * rails (3.1.3)
  * rails_autolink (1.0.9)
  * railties (3.1.3)
  * rake (0.9.2.2)
  * rakismet (1.3.0)
  * rdoc (3.12)
  * recaptcha (0.3.4)
  * rest-client (1.6.7)
  * ri_cal (0.8.8)
  * ruby-openid (2.2.0)
  * ruby-openid-apps-discovery (1.2.0)
  * rubyntlm (0.1.1)
  * sanitize (2.0.3)
  * sass (3.1.17)
  * sass-rails (3.1.4)
  * sprockets (2.0.4)
  * systemu (2.5.2)
  * thor (0.14.6)
  * tilt (1.3.3)
  * tinymce-rails (3.4.9)
  * treetop (1.4.10)
  * tzinfo (0.3.33)
  * uglifier (1.2.4)
  * uuid (2.3.5)
  * uuidtools (2.1.2)
  * yamler (0.1.0) 
```

## 乘客设置

### /etc/apache2/mods-available/passenger.load

```
LoadModule passenger_module /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18/ext/apache2/mod_passenger.so 
```

### /etc/apache2/mods-available/passenger.conf

```
PassengerRoot /home/hatd/.rvm/gems/ruby-1.9.3-p327@global/gems/passenger-3.0.18
PassengerRuby /home/hatd/.rvm/wrappers/ruby-1.9.3-p327@global/ruby 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:24:55.617

好的，我希望这个问题的答案可能更有启发性，但这里是：

生产服务器上安装的 Bundler 版本是 1.2.3。我的开发机器上的版本是 1.2.1。

修复？

```
gem uninstall bundler
gem install bundler -v 1.2.1 
```

这种事情属于 Bundler 的问题页面，我将在此之后及时发布。

# c# - 为什么我不能只用 .DeleteObject(o) 删除实体？

> ID：13761004
> 
> 赞同：0
> 
> 时间：2012-12-07T10:13:20.017
> 
> 标签：c#, linq, entity-framework, lambda

此代码有效：

```
var c = cboCustomer.SelectedItem as Customer;
var t = cboTrailer.SelectedItem as Trailer;
using (var db = new CAPSContainer())
{
   db.Attach(c);
   db.Attach(t); 
   c.Trailers.Remove(t);
   db.DeleteObject(t);
   db.SaveChanges();
} 
```

但我不明白为什么我不能这样做：

```
db.Attach(t);
db.DeleteObject(t);
db.SaveChanges(); 
```

如果我尝试，我会得到：

**“CAPSContainer.Trailers”中的实体参与“CustomerTrailer”关系。找到 0 个相关的“客户”。1“客户”是预期的。**

我首先使用的是 EF 5.0 模型，这里是 edmx 图表的一部分：

![在此处输入图像描述](../Images/49ca9efb6f5c94c7a568fc3f217a70b5.png)

我发现很难理解为什么，请帮忙。

**更新 1（如 Boomer 所建议的）：**

```
 using (var db = new CAPSContainer())
            {
                db.Attach(c);
                //db.Attach(t);
                //c.Trailers.Remove(t);
                db.DeleteObject(t);
                db.SaveChanges();
            } 
```

返回：

**无法删除该对象，因为它在 ObjectStateManager 中找不到。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:30:00.183

错误很明显，因为在这种关系中需要客户。就像您在数据库中插入 Trailer 记录而不指定 CustomerID，您可以在 SQL 中执行此操作吗？

例如，更好的方法是通过 ID 删除该对象。在这种情况下，您不必`t`在删除之前附加：

```
using (var db = new CAPSContainer())
{   
    db.DeleteObject(db.Trailers.Where(p => p.ID == t.ID));
    db.SaveChanges();
} 
```

或者在加载所有`Trailers`（在下拉列表中）时，您还应该获得`Customer`它以及附加的任何其他强制性实体。

# java - Java - 持久性和实体类

> ID：13761005
> 
> 赞同：0
> 
> 时间：2012-12-07T10:13:28.100
> 
> 标签：java, database, jpa, persistence

我使用 JPA 从数据库中创建了许多实体类。

这些是类：

1.  航班
2.  乘客
3.  PassengersFlights（包含乘客和航班的主键）
4.  用户

在数据库中，PassengersFlights 表中有两个外键 - 一个指向航班，一个指向乘客。

我唯一的问题是乘客和航班的主键是PassengersFlights 实体类中的数据类型Passengers 和Flights。但是，它们各自实体类中的数据类型是数据库中定义的 String 和 int。

我有以下代码来更新PassengersFlights 表：

```
// Updating the Passengers_Flights table
try
{
    Class.forName("com.mysql.jdbc.Driver");
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/flights_db", "root", "hello");

    EntityManagerFactory emFactory = Persistence.createEntityManagerFactory("Flights_AssignmentPU");
    EntityManager em = emFactory.createEntityManager();

    PassengersFlights booking = new PassengersFlights();
    booking.setPassportNum(passport);
    booking.setFlightId(flight_id);
    em.getTransaction().begin();
    em.persist(booking);
    em.getTransaction().commit();
    em.close();
}
catch (Exception e)
{
    response.sendRedirect("ErrorPage.html");
} 
```

我遇到的问题是设置护照号码和航班号时。在项目中，它们被定义为 string 和 int。但是，它需要乘客和航班数据类型。请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:35:24.413

如果`passport`和`flight_id`是其可敬实体的主键，您可以使用[`getReference()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getReference%28java.lang.Class,%20java.lang.Object%29)给定主键获取所需类型的代理对象：

```
booking.setPassportNum(em.getReference(Passenger.class, passport));
booking.setFlightId(em.getReference(Flight.class, flight_id)); 
```

另请注意，如果`Passengers_Flights`只是一个没有额外字段的链接表，您可以使用 对乘客和航班之间的关系进行建模[`@ManyToMany`](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToMany.html)，而链接表没有单独的实体。

# jquery - jquery表继承包含td的高度

> ID：13761006
> 
> 赞同：0
> 
> 时间：2012-12-07T10:13:40.253
> 
> 标签：jquery, css, sharepoint

我将如何使用 jquery 将每个 .ms-cal-tweekitem 的高度设置为 .ms-cal-eworkday 的呈现高度。这是在共享点日历​​中，我不允许编辑 ASPX :(。

Sharepoint 正在使用行跨度来更改每个事件的高度，但包含的表格没有扩展以填充它的高度：100% 剂量似乎有效。

```
<td class="ms-cal-eworkday" rowspan="8"> 
<table cellpadding="0" cellspacing="0" border="0" class="ms-cal-tweekitem" dir="" style="background-color: rgb(6, 92, 165);">
<tbody><tr>
    <td valign="top" href="/schools/ecclesfield/newdemosite/minibus-booking/Lists/Minibus/DispForm.aspx?ID=4" onclick="GoToLink(this);return false;" target="_self">
     <div>
      <img src="/_layouts/images/blank.gif" width="50" height="1" alt=""><br>
      <img src="/_layouts/images/recursml.gif" class="ms-cal-hidden" alt="" align="absmiddle">
      <a onfocus="OnLink(this)" class="ms-cal-dayitem" href="/schools/ecclesfield/newdemosite/minibus-booking/Lists/Minibus/DispForm.aspx?ID=4" onclick="GoToLink(this);return false;" target="_self" tabindex="5">
        <nobr>03:00 PM</nobr>
        <br>
        <b>test3</b>
        <br>
        YS12 NHT
        </a>
     </div>
     </td>
 </tr>
 </tbody></table>
</td> 
```

谢谢

刘易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:17:37.230

简单：

```
 var ms-cal-eworkdayHeight = $('.ms-cal-eworkday').height();
 $('.ms-cal-tweekitem').height(ms-cal-eworkdayHeight); 
```

你也可以这样做：

```
 var ms-cal-eworkdayHeight = $('.ms-cal-eworkday').outerHeight();
 $('.ms-cal-tweekitem').height(ms-cal-eworkdayHeight); 
```

`outerHeight()`将返回高度加上任何填充或边距。

# python - 在 Python 中实现自动计数器的建议

> ID：13761007
> 
> 赞同：3
> 
> 时间：2012-12-07T10:13:43.007
> 
> 标签：python

在 Tex 中，每次调用引用时，计数变量都会自动更新，这样数字计数器就会自动上升。

我想在 python 中为计数器做类似的事情，例如，每次我需要计数器时，它已经有了新值，而无需我添加

```
A+=1 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:22:57.960

使用[`itertools.count()`](http://docs.python.org/library/itertools.html#itertools.count)，这是一个迭代器，所以使用[`next()`函数](http://docs.python.org/library/functions.html#next)将对象推进到下一个值：

```
from itertools import count

yourcounter = count()

next_counted_value = next(yourcounter) 
```

您可以创建一个 lambda 来包装函数：

```
yourcounter = lambda c=count(): next(c) 
```

或者使用一个[`functools.partial()`对象](http://docs.python.org/library/functools.html#functools.partial)：

```
from functools import partial

yourcounter = partial(next, count()) 
```

然后每次调用对象：

```
next_counted_value = yourcounter() 
```

# php - 这是真正的长轮询吗？

> ID：13761008
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:13:45.160
> 
> 标签：php, jquery, mysql, long-polling

经过大量试验，我成功地能够保持与数据库的连续服务器连接。现在编码 keet cheking 并显示消息，如果数据库中有新消息。

请检查并判断 **此代码​​中是否使用了真正的长轮询技术？**如果不是，那么请建议，我错在哪里（偏离长轮询）以及如何才能使这成为真正的长轮询。

当前，我收到这些错误。但是它仍然保持与数据库的持续连接。

1.  **每次，只拉一条消息而不是全部。**（我使用了 .each 循环，但它停止了长轮询）
2.  每 10/15 秒后，出现令牌错误（**Parse erroe(syntax error=unexpected token)**）。

    ```
    var last_msg_id = 2;

    function load_msgs() {
    $.ajax({
    type:"Post",
    url:"getdata.php",
    data:{
        last_msg_id:last_msg_id
    },
    dataType:"json",
    async:true,
    cache:false,
    success:function(data) {
        var json = data;
        $("#commidwin").append(json['msg']);
        last_msg_id = json["last_msg_id_db"];
        setTimeout("load_msgs()", 1000);
    },
    error:function(XMLhttprequest, textstatus, errorthrown) {
        alert("error:" + textstatus + "(" + errorthrown + ")");
        setTimeout("load_msgs()", 15000);
    }

    });
    } 
    ```

php文件在这里

```
 $last_msg_id=$_POST['last_msg_id'];
$last_msg_id_db=1;

while($last_msg_id>$last_msg_id_db){
    usleep(10000);
    clearstatcache();

    $sql=mysqli_query($db3->connection,"SELECT * FROM chat_com where id>'$last_msg_id' ORDER by id ASC");

    $sql_m=mysqli_query($db3->connection,"SELECT max(id) as maxid  FROM chat_com");
    $row_m=mysqli_fetch_array($sql_m);
    $last_msg_id_db=$row_m['maxid'];

    while($row=mysqli_fetch_array($sql)){
        $textt=$row['mesg'];

        $last_msg_id_db=$last_msg_id_db;
        $response=array();
        $response['msg']=$textt;
        $response['last_msg_id_db']=$last_msg_id_db;
    }
}

echo json_encode($response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:46:05.653

轮询比简单的 while 更难：因为通常你输出到浏览器的所有东西都会在完成时被解释。你的例子很清楚：

```
success:function(data) {
    var json = data;
    $("#commidwin").append(json['msg']);
    last_msg_id = json["last_msg_id_db"];
    setTimeout("load_msgs()", 1000);
}, 
```

jQuery 将等到响应完成来构建您的`data`变量，然后调用您的成功回调。

创建长轮询的一种方法是拥有一个任务和一个追随者：

*   该任务是“无限”循环，它只显示捕获和触发事件，放在“盒子”中。

*   追随者是每 X 秒进行一次 ajax 调用，它在任务填充的“框”内查找，并立即在页面内执行操作。

这是一个长轮询的例子，没有追随者，只是一个停止轮询的事件（发布），但你会明白的：

```
<?php

// For this demo
if (file_exists('poll.txt') == false)
{
    file_put_contents('poll.txt', '');
}

// If this variable is set, a long-polling is starting...    
if (isset($_GET['poll']))
{

    // Don't forget to change the default time limit
    set_time_limit(120);

    date_default_timezone_set('Europe/Paris');
    $time = time();

    // We loop until you click on the "release" button...
    $poll = true;
    $number_of_tries = 1;
    while ($poll)
    {
        // Here we simulate a request (last mtime of file could be a creation/update_date field on a base)
        clearstatcache();
        $mtime = filemtime('poll.txt');

        if ($mtime > $time)
        {
            $result = htmlentities(file_get_contents('poll.txt'));
            $poll = false;
        }

        // Of course, else your polling will kill your resources!
        $number_of_tries++;
        sleep(1);
    }

    // Outputs result
    echo "Number of tries : {$number_of_tries}<br/>{$result}";
    die();
}

// Here we catch the release form
if (isset($_GET['release']))
{
    $data = '';
    if (isset($_GET['data']))
    {
        $data = $_GET['data'];
    }
    file_put_contents('poll.txt', $data);
    die();
}
?>

<!-- click this button to begin long-polling -->
<input id="poll" type="button" value="Click me to start polling" />

<br/><br/>

Give me some text here :
<br/>
<input id="data" type="text" />
<br/>

<!-- click this button to release long-polling -->
<input id="release" type="button" value="Click me to release polling" disabled="disabled" />

<br/><br/>

Result after releasing polling :
<div id="result"></div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript">

    // Script to launch polling
    $('#poll').click(function() {
        $('#poll').attr('disabled', 'disabled');
        $('#release').removeAttr('disabled');
        $.ajax({
            url: 'poll.php',
            data: {
                poll: 'yes' // sets our $_GET['poll']
            },
            success: function(data) {
                $('#result').html(data);
                $('#poll').removeAttr('disabled');
                $('#release').attr('disabled', 'disabled');
            }
        });
    });

    // Script to release polling
    $('#release').click(function() {
        $.ajax({
            url: 'poll.php',
            data: {
                release: 'yes', // sets our $_GET['release']
                data: $('#data').val() // sets our $_GET['data']
            }
        });
    });

</script> 
```

# 示范：[这里](http://home.fuz.org/tests/poll.php)。

# javascript - 从 URL 中的目录路径重定向到特定页面

> ID：13761011
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:13:51.960
> 
> 标签：javascript, jquery

我有目录 abc，里面有两个文件。一个是 login.php，另一个是 index.php。我有路径 localhost/abc 重定向到 index.php，但我想重定向到 login.php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:29:21.033

默认情况下，页面将始终打开`index.php`目录中的文件。这是默认行为。您可以通过更改服务器设置来更改它，但这取决于您使用的服务器，例如。Apache IIS 等

假设您正在使用 Apache... 您需要`httpd.config`在 apache 文件夹中的文件中更改以下行

```
<IfModule dir_module>
    DirectoryIndex index.php index.php3 index.html index.htm
</IfModule> 
```

此行将查找 index.php，如果未找到，它将搜索其后列出的连续文件。您可以根据需要更改文件的顺序。

由于您已标记您的问题 javascript，您可以使用以下代码重定向到所需的页面，而无需更改服务器设置

```
<script type="text/javascript" language="javascript">
    window.location = 'login.php';
</script> 
```

但我认为你想做一些事情，如果用户没有登录然后重定向到你可以做的登录页面..

假设您`PHP`一次又一次地使用会话

```
//write this in index.php
if(isset($_SESSION["isLoggedin"]) && $_SESSION["isLoggedin"]==true){ //if user has logged in and session variable has been set.
    header("Location:login.php"); //this will redirect the page to login.php
} 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:20:20.063

当访问 localhost/abc 它重定向到 index.php

```
//index.php
//javascript method
if( !checkLogin() ){
    window.location.href = 'login.php'
}
//php way
if( !checkLogin() ){
    header('location: login.php');
} 
```

checkLogin 未登录时返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:38:32.503

### 如果可以使用 PHP，为什么要使用 javascript 重定向？

*   如果 javascript 被禁用，那么重定向将不起作用！
*   在某些情况下，您必须对 url 进行编码
*   HTTP 比 JavaScript 更适合这项工作
*   搜索引擎跟随他们
*   您可以说明它是否是永久的

### 使用 PHP 重定向 302

```
<? header('Location: /login.php'); ?> 
```

标头函数将原始标头数据发送到客户端 Web 浏览器，在这种情况下发送**302 状态代码**，指示浏览器重定向到给定位置。但它不会是好的 SEO 明智的。

# json - getJSON 在 iOS 上的 Cordova 2.1.0 中不起作用

> ID：13761012
> 
> 赞同：4
> 
> 时间：2012-12-07T10:13:57.390
> 
> 标签：json, cordova

我正在为 iOS 开发一个 Phonegap 应用程序。我都是新手！

无论如何，它看起来不错，但我无法运行以下 JSON 调用。它没有到达服务器 - 日志中没有任何内容。

我收到“进”警报，但没有收到“出”警报。

该代码在标准网页上运行良好。

我已经包括

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js'></script> 
```

我已将 * 添加到强大的 Google 上的 Cordova.plist 的 ExternalHosts！

我错过了什么？

谢谢。

```
function GetData(){
  alert('in');
  $.getJSON('http://dev.myurl.com/brief/getdata.php', function(data)
              {
                $.each(data, function(key, val) {
                       alert(val.itemValue);               
                }) // each
              }// function
            );//getjson
   alert('out');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:54:31.667

你已经尝试过这个：

```
function GetData(){
    alert('in');
    $.get('http://dev.myurl.com/brief/getdata.php', function(data){
        $.each(data, function(key, val) {
               alert(val.itemValue);               
        })
    }), 'json';
    alert('out');
} 
```

# android - 如何保留布局及其数据

> ID：13761013
> 
> 赞同：0
> 
> 时间：2012-12-07T10:13:57.890
> 
> 标签：android

我需要你的帮助，我有 2 个活动 A 和 B，其中 A 是主要活动。现在 B 使用从 A 开始的活动，`startActivityForResult()`当我完成时从 B 开始，它将返回到活动 A。

这工作正常，但实际目的就像 Gmail 应用程序，当您从 B 返回到 A，然后从 A 再次启动活动 B，然后 A 需要在我离开时使用其最后一个屏幕启动活动。

例如：来自 gmail 中的收件箱->标签->草稿如何实现这一点以保持数据/布局不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:21:32.247

也许**`android:launchMode="singleInstance"`**在活动 A 和 B 上会完成它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:22:19.570

**`How to switch Activity from 2 activities without losing its data and current state of data`**

好的，我有解决方案，每次启动您的应用程序时，只会创建活动并查看并放入堆栈，因此下次您再次启动此活动时，只需从后台打开，因此该活动将在堆栈中可用并放在前面使用开始活动

从A开始ActivityB

```
Intent intent = new Intent(context,ActivityB.class);
intent.addFlags(Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY);
intent.addFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

现在从 ActivityB 启动 ActivityA

```
Intent intent = new Intent(getInstance(), ActivityA.class);
intent.addFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
intent.addFlags(Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY);
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

它只是在活动开始时放在前面并将当前活动置于后台

# c# - Gridview 每组仅显示 2 个项目

> ID：13761015
> 
> 赞同：0
> 
> 时间：2012-12-07T10:14:02.330
> 
> 标签：c#, windows-8, winrt-xaml, windows-store-apps

我的 Gridview 运行良好，但有一个问题我一段时间以来都想不通。Gridview 每组显示不超过 2 个项目。ItemTemplate 和传入的 List 是有效的。

```
<GridView   x:Name="mainGridView" ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}" 
                                                SelectionMode="Multiple" IsItemClickEnabled="True" ItemClick="GridView_ItemClick_1" Grid.Row="1" 
                                                Margin="0,-3,0,0" Padding="116,25,40,46" 
                                                FontFamily="Global User Interface"  ItemTemplate="{StaticResource mainPageTileTemplates}"
                                                ItemContainerStyle="{StaticResource GridViewItemStyleStretch}" SelectionChanged="Item_selected" >

                    <GridView.GroupStyle>
                        <GroupStyle>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <TextBlock Text='{Binding Key}'  Foreground="#FF116C15" Margin="5" FontSize="28" FontFamily="Segoe UI Light" />
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                            <GroupStyle.ContainerStyle>
                                <Style TargetType="GroupItem">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="GroupItem">
                                                <StackPanel Orientation="Vertical">
                                                    <ContentPresenter Content="{TemplateBinding Content}" />
                                                    <ItemsControl x:Name="ItemsControl" ItemsSource="{Binding GroupItems}" />
                                                </StackPanel>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </GroupStyle.ContainerStyle>
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <VariableSizedWrapGrid Orientation="Vertical"  MaximumRowsOrColumns="5" />
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                        </GroupStyle>
                    </GridView.GroupStyle>
                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid Orientation="Vertical" MaximumRowsOrColumns="1" />
                        </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
                    <Button Visibility="Collapsed"/>
                </GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:22:01.017

也许在您的 GroupItems 集合中，您仅将元素绑定到仅包含前 2 个元素的 Top 集合（与模板一样，但在 Top 上有 12 个元素）。检查 GroupItems 的路径。

# php - 正则表达式只允许字符和 1 个点之间

> ID：13761018
> 
> 赞同：0
> 
> 时间：2012-12-07T10:14:07.150
> 
> 标签：php, jquery, regex

我想要一个正则表达式，它只允许 az 字符和字符**之间**的 1 个点，而不是字符串的开头或结尾，这就是我得到的：

```
var myRegexp = /^[a-zA-Z]*(\.{1}[a-zA-Z]*)?$/; 
```

但它也允许点是第一个或最后一个字符，我怎么能在字符串的开头或结尾禁止点？

上面的代码在 JS 中有效，那么 PHP 中的正则表达式与 preg_match() 一样吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:16:43.277

这`*`意味着 0-many。如果您使用 a `+`then 这将强制在点之前和之后至少出现 1 个字符。IE

```
var myRegexp = /^[a-zA-Z]+(\.{1}[a-zA-Z]+)?$/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:16:53.277

试试这个

```
var myRegexp = /^[a-z]+(\.[a-z]+)?$/i; 
```

# php - 如何在 Facebook 上分享我网站的内容

> ID：13761019
> 
> 赞同：6
> 
> 时间：2012-12-07T10:14:11.270
> 
> 标签：php, facebook, facebook-graph-api

我有一个网站，上面有一个名为 share 的 facebook 按钮。我希望当用户单击该按钮时，我的网页内容应该在他的墙上共享。我的代码在页面的 head 标签中是这样的：

```
<script>
    function fbs_click(){
        u = location.href;
        t = document.title;
        window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');
        return false;
    }
</script> 
```

我也知道`u= url`您的内容页面`t= title`或网站名称，这是在正文标签内：

```
<a rel="nofollow" href="http://www.facebook.com/share.php?u=http://lums.edu.pk/event-detail/lecture-on-citation-management-and-referencing-1133"
class="fb_share_button" onclick="return fbs_click()" target="_blank"  
style="text-decoration:none;">Share</a> 
```

?u 是我要分享的链接。这段代码为我打开了一个分享页面，只分享我的网址而不是我的页面内容。我的内容包括图像、标题和细节（我从数据库表中获取这些值）。请有人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:46:33.857

最后我得到了我的解决方案。这是为我工作的实际代码。我错误地处理了我的链接。应该是这样的

```
 ?u=http%3A%2F%2Fmywebsite.com%2Fcontent+of+my+page" target="_blank">this link</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:26:40.747

看看下面的 OpenGraph 标签：

```
<meta property="og:title" content="TITLE" /> 
<meta property="og:image" content="URL" /> 
<meta property="og:description" content="DESCRIPTION" /> 
<meta property="og:url" content="URL" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T10:29:09.833

This example is using JSP. JS is based on top example.

```
<a id="fb_link" href="#fb_link" onclick="fbs_click('${product.id}');">Share me on FB</a>

function fbs_click(id) {
var url = 'http://www.facebook.com/sharer.php?u=' +
    encodeURIComponent('https://www.mysite.com.au/product/detail?advertiseId=') + id;
window.open(url, 'Share on FaceBook', 'left=20,top=20,width=550,height=400,toolbar=0,menubar=0,scrollbars=0,location=0,resizable=1');
return false;
} 
```

Have to mention that for some magic reason location=0 doesn't work in my firefox ...

# html - Modernizr 支持如何检测设备方向？

> ID：13761020
> 
> 赞同：1
> 
> 时间：2012-12-07T10:14:17.810
> 
> 标签：html, modernizr, device-orientation

谁能告诉我如何检查 html 文件中的modernizr（例如：modernizr.geolocation）是否支持设备方向。我需要检查浏览器是否支持该功能设备方向。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:15:09.027

尽管您需要确保您构建的 Modernizr 版本包含此功能，但您可以使用`Modernizr.hasEvent('deviceOrientation')`（在“非核心检测”框中包含“事件设备方向”）。

# ajax - 如何提高ajax页面加载速度？

> ID：13761029
> 
> 赞同：0
> 
> 时间：2012-12-07T10:14:52.783
> 
> 标签：ajax, jquery-ui, jquery

我正在使用以下代码进行 ajax 页面加载

```
<script type="text/javascript">
    jQuery('.filter-menu a').live('click', function(e) {
        e.preventDefault();
        var link = jQuery(this).attr('href');
        jQuery('#gallery-ajax').fadeIn(200, function() {
            jQuery('#gallery-ajax').animate({ opacity:0.1 }, 500);
        }).load(link + ' #gallery-ajax', function(){ 
            jQuery('#gallery-ajax').fadeIn(200, function() { 
                jQuery('#gallery-ajax').animate({opacity:1});
            }); 
        });
    });
</script> 
```

这工作正常，但以非常低的速度加载较新的内容。谁能告诉我如何提高加载新内容的速度或为我提供一些替代的 jQuery AJAX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:45:30.883

你可以尝试去掉一些额外的淡入淡出功能：

```
<script type="text/javascript">
jQuery('.filter-menu a').live('click', function(e) {
    e.preventDefault();
    var link = jQuery(this).attr('href');
    jQuery('#gallery-ajax').hide().load(link + ' #gallery-ajax', function(){ 
        jQuery('#gallery-ajax').fadeIn(200); 
    });
});
</script> 
```

当然，这不是完全相同的行为，但它肯定会出现得更快。

# batch-file - 如何从一个文本文件中读取空间并逐行放入另一个文件

> ID：13761030
> 
> 赞同：0
> 
> 时间：2012-12-07T10:14:55.217
> 
> 标签：batch-file, dos

在有一些空间的文本文件中，我需要在下一个文本文件中使用这些空间。例如在 a.txt 中：

```
 c:/abc/text
                   c:/bec/text 
```

我需要将相同的内容放入另一个文件中，但是当我在批处理脚本中执行时，空间已删除并显示如下：

```
c:/abc/text
c:/bec/text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:23:57.633

干得好

```
for /f "tokens=* delims=" %%a in (C:\text.txt) do echo %%a>>C:\new.txt 
```

# c# - 剧情外的传说

> ID：13761032
> 
> 赞同：1
> 
> 时间：2012-12-07T10:15:05.320
> 
> 标签：c#, wpf, plot, legend, dynamic-data-display

你知道我怎样才能把传说放在情节区域之外吗？（在代码和 xaml 中）

谢谢您的帮助！

顺式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:23:33.107

当前 D3 库中没有实现将图例移出绘图仪。最多可以通过编辑源代码中的 Legend.xaml.cs 文件将图例移动到绘图仪中的不同位置。您必须更改代码隐藏中的依赖属性才能在绘图仪区域周围移动图例。

如果要将图例放在绘图仪之外，则必须重新创建 Legend.xaml 以使其独立于绘图仪，但仍会收到创建图例所需的相同信息。如果您确实做到了，请在此处发布作为答案！

# java - 将字节转换为整数时的问题（Java 特定？）

> ID：13761033
> 
> 赞同：1
> 
> 时间：2012-12-07T10:15:07.833
> 
> 标签：java, binary

我对从字节到整数的转换有点困惑。考虑以下代码：

```
byte[] data = new byte[] { 0, (byte) 0xF0 };

int masked = data[0] << 8 & 0xFF | data[1] & 0xFF; //240
int notMasked = data[0] << 8 | data[1]; //-16 
```

因为java中的字节是有符号的，`data[1]`不是十进制的240，而是2的补码，-16。但是，它仍然应该是二进制的：`0x11110000`那么，我为什么需要这样做`data[1] & 0xFF`？

Java 在将所有内容传递给`|`运算符之前是否将其转换为整数？那为什么会`&0xFF`有所作为呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:20:15.387

Java 字节是有符号的（不幸的是） - 因此，当您将值提升为 an`int`以执行按位`|`时，它最终会被符号扩展为`0xFFFFFFF0`. 然后搞砸了`|`with `data[0]`。掩码`& 0xff`将其转换为整数值 240（只是`0x000000F0`）。

但是，您仍然遇到问题。这段代码：

```
int masked = data[0] << 8 & 0xFF | data[1] & 0xFF; 
```

应该：

```
int masked = ((data[0] & 0xff) << 8) | (data[1] & 0xFF); 
```

...否则您在换班*后*进行掩蔽，这是行不通的。我添加了括号，因为我不确定`&`,`<<`和`|`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:00:16.237

它类似于一个已知的“谜题”

```
byte x = -1;
x = x >>>= 1;
System.out.println(x); 
```

生产

```
-1 
```

不换班？这是因为在编译算术/移位/比较表达式之前，javac 将 byte（以及 short 和 char）提升为 int 或 long（如果表达式中有 long），所以它的工作方式如下

```
x -> int = 0xFFFFFFFF; 0xFFFFFFF >>> 1 = 0x7FFFFFF; (byte)0x7FFFFFF -> 0xFF 
```

# javascript - PrototypeJS：如何获取具有显示的元素的位置：无？

> ID：13761037
> 
> 赞同：2
> 
> 时间：2012-12-07T10:15:28.463
> 
> 标签：javascript, prototypejs

我有一个 <ul> 元素，它使用“display: none”隐藏。我尝试使用获取元素的位置

```
Element.cumulativeOffset(element); 
```

这对我没有任何用处。有没有另一种方法来获得这样一个元素的位置，或者它根本就没有位置？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:14:16.140

您可以将其设置为零宽度和高度，而不是将其设置为`display:none`，这仍然允许您计算偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T23:04:10.140

您可以在进行这些类型的测量之前测试该元素是否隐藏，如果是，则显示该元素，测量，然后再次隐藏它。这对用户来说都是透明的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T16:27:53.827

另外值得注意的是`Element.cumulativeOffset(element)`返回一个`Element.Offset`对象而不是原始数字。尝试使用`.toArray()`.`Element.cumulativeOffset(element)`

你也可以这样称呼`$('elementid').cumulativeOffset().toArray()`

[元素#cumulativeOffset](http://api.prototypejs.org/dom/Element/prototype/cumulativeOffset/)

# powershell - 文件夹删除脚本中的非终止异常

> ID：13761044
> 
> 赞同：0
> 
> 时间：2012-12-07T10:15:49.133
> 
> 标签：powershell, powershell-2.0

我编写了一个 Powershell 脚本，它会定期删除我机器上的文件夹。算法如下：

*   深入每个目录结构到最低的子文件夹
*   检查子文件夹的创建日期
*   如果是 14 天或更早，请将其删除
*   记录一切（不是算法的一部分，只是好的做法）

运行时，它完全按预期运行......

...除了它抛出以下非终止异常：

```
Get-ChildItem : Could not find a part of the path 'C:\foo\baz'.
At C:\src\CoreDev\Trunk\Tools\BuildClean script\buildclean.ps1:55 char:15
+     Get-ChildItem <<<<  -recurse -force |
    + CategoryInfo          : ReadError: (C:\foo\baz:String) [Get-ChildItem],
   DirectoryNotFoundException
    + FullyQualifiedErrorId : DirIOError,Microsoft.PowerShell.Commands.GetChil
   dItemCommand 
```

为什么会这样？更重要的是，我怎样才能删除它，它会引起问题吗？

脚本如下：

```
# folderclean.ps1

# This script will remove each leaf node of a directory, provided that leaf is over
# 14 days old.

# CONSTANT DECLARATIONS
# testing (run on my local machine)
$proj_loc = "C:\foo", "C:\bar"
$logpath = "C:\Logs\BuildClean\$(Get-Date -format yyyyMMdd).log"

function Write-ToLogFile {
    param ([string]$stringToWrite)

    Add-Content $logpath -value $stringToWrite
}

# Function to check if a folder is a leaf folder.
#   First, retrieve the directory $item is pointing to
#   Then, create a list of children of $item that are folders
#   If this list is either empty or null, return $true
#   Otherwise, return $false
function Folder-IsLeaf($item) {
    $ary = Get-ChildItem $item -force | ?{ $_.PSIsContainer }
    if (($ary.length) -eq 0 -or $ary -eq $null) {
        return $true
    }

    return $false
}

# Deletes leaf folders that are older than a certain threshhold.
#   Get a list of children of the folder, where each child is a folder itself and 
#       was created over 14 days ago and the folder is a leaf
#   For each of these children, delete them and increment $folderCount
#   Get a list of children of the folder, where each child is a folder itself and 
#       was last modified over 14 days ago and the folder is a leaf
#   For each of these children, delete them and increment $folderCount
function Remove-LeafFolders($path) {
    $createdCount = 0
    $modifiedCount = 0

    Write-ToLogFile "Operation started at $(Get-Date -format "dd/MM/yyyy hh:mm:ss.fff")"
    Write-ToLogFile "Looking in $proj_loc"
    Write-ToLogFile ""
    $start = $(Get-Date)

    $proj_loc | 
    Get-ChildItem -recurse -force | 
    ?{
        $_.PSIsContainer -and ($_.CreationTime).AddDays(15) -lt $(Get-Date) -and $(Folder-IsLeaf $_.FullName) -eq $true
    } | %{
        $formattedDate = $($_.CreationTime).ToString("dd/MM/yyyy hh:mm:ss");
        Write-ToLogFile "Folder $($_.FullName) is being removed; created: $formattedDate"
        Remove-Item $_.FullName -recurse;
        $createdCount += 1
    }

    $end = $(Get-Date)
    $elapsed = $end - $start
    Write-ToLogFile "Operation completed at $(Get-Date -format "dd/MM/yyyy hh:mm:ss.fff")."
    Write-ToLogFile "Folders removed: $createdCount"
    Write-ToLogFile "Time elapsed: $(($elapsed).TotalMilliseconds) ms"
    Write-ToLogFile "-------------------------------"
}

Remove-LeafFolders($proj_loc) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:43:32.550

我发现[了另一个 StackOverflow 问题](https://stackoverflow.com/questions/1752677/how-to-recursively-delete-an-entire-directory-with-powershell-2-0)，在查看了答案后，我意识到问题出在管道上。所以，我改变了我的代码如下：

```
...
$leafList = $proj_loc | 
    Get-ChildItem -recurse -force | 
    ?{

        $_.PSIsContainer -and ($_.CreationTime).AddDays(15) -lt $(Get-Date) -and $(Folder-IsLeaf $_.FullName) -eq $true
    }

    Foreach ($folder in $leafList)
    {
        $formattedDate = $($folder.CreationTime).ToString("dd/MM/yyyy hh:mm:ss");
        Write-ToLogFile "Folder $($folder.FullName) is being removed; created: $formattedDate"
        Remove-Item $folder.FullName -recurse;
        $createdCount += 1
    }
... 
```

我创建了一些本地文件夹，并搞砸了它们。没有出现异常，所以这似乎奏效了：

```
Operation started at 10/12/2012 05:16:18.631
Looking in C:\foo C:\bar

Folder C:\foo\baz is being removed; created: 09/01/2010 02:00:00
Folder C:\bar\baz3\recursion is being removed; created: 01/01/2008 01:00:00
Operation completed at 10/12/2012 05:16:18.748.
Folders removed: 2
Time elapsed: 33.0033 ms
-------------------------------
Operation started at 10/12/2012 05:41:59.246
Looking in C:\foo C:\bar

Folder C:\foo\baz2\NewFolder is being removed; created: 10/10/2010 10:10:10
Folder C:\bar\baz3\barbar is being removed; created: 20/11/2012 05:37:38
Operation completed at 10/12/2012 05:41:59.279.
Folders removed: 2
Time elapsed: 21.0021 ms
------------------------------- 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T17:12:06.700

我认为使用自下而上的方法完成这种递归删除会更容易，而不是 Get-ChildItem 默认为您提供的自上而下。试试这个：

```
$proj_loc | 
    Get-ChildItem -recurse -force -Name | sort -desc | Get-Item |
    ? { ....
    } 
```

# android - 带有 tesseract-android-tools-library 的 Android 版本

> ID：13761045
> 
> 赞同：1
> 
> 时间：2012-12-07T10:15:52.503
> 
> 标签：android

我开发了一个 OCR 应用程序，它可以在 Android 4.0 版本上完美运行，但在 2.2 和 2.3 Android 版本上却不能。不知道这个版本有什么问题。我在谷歌上搜索了很多，但没有找到原因。

```
 package com.datumdroid.android.ocr.simple;

 import java.io.File;
 import java.io.FileInputStream;
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
 import java.util.zip.GZIPInputStream;

 import android.app.Activity;
 import android.content.Intent;
 import android.content.res.AssetManager;
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Matrix;
 import android.media.ExifInterface;
 import android.net.Uri;
 import android.os.Bundle;
 import android.os.Environment;
 import android.provider.MediaStore;
  import android.util.Log;
  import android.view.View;
  import android.widget.Button;
  import android.widget.EditText;

  import com.googlecode.tesseract.android.TessBaseAPI;

  public class SimpleAndroidOCRActivity extends Activity {
public static final String PACKAGE_NAME = "com.datumdroid.android.ocr.simple";
public static final String DATA_PATH = Environment
        .getExternalStorageDirectory().toString() + "/SimpleAndroidOCR/";

// You should have the trained data file in assets folder
// You can get them at:
// http://code.google.com/p/tesseract-ocr/downloads/list
public static final String lang = "eng";

private static final String TAG = "SimpleAndroidOCR.java";

protected Button _button;
// protected ImageView _image;
protected EditText _field;
protected String _path;
protected boolean _taken;

protected static final String PHOTO_TAKEN = "photo_taken";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    String[] paths = new String[] { DATA_PATH, DATA_PATH + "tessdata/" };

    for (String path : paths) {
        File dir = new File(path);
        if (!dir.exists()) {
            if (!dir.mkdirs()) {
                Log.v(TAG, "ERROR: Creation of directory " + path + " on  
   sdcard failed");
                return;
            } else {
                Log.v(TAG, "Created directory " + path + " on sdcard");
            }
        }

    }

    // lang.traineddata file with the app (in assets folder)
    // You can get them at:
    // http://code.google.com/p/tesseract-ocr/downloads/list
    // This area needs work and optimization
    if (!(new File(DATA_PATH + "tessdata/" + lang + ".traineddata")).exists()) {
        try {

            AssetManager assetManager = getAssets();
            InputStream in = assetManager.open("tessdata/eng.traineddata");
            //GZIPInputStream gin = new GZIPInputStream(in);
            OutputStream out = new FileOutputStream(DATA_PATH
                    + "tessdata/eng.traineddata");

            // Transfer bytes from in to out
            byte[] buf = new byte[1024];
            int len;
            //while ((lenf = gin.read(buff)) > 0) {
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
            in.close();
            //gin.close();
            out.close();

            Log.v(TAG, "Copied " + lang + " traineddata");
        } catch (IOException e) {
            Log.e(TAG, "Was unable to copy " + lang + " traineddata " +  
    e.toString());
        }
    }

    // _image = (ImageView) findViewById(R.id.image);
    _field = (EditText) findViewById(R.id.field);
    _button = (Button) findViewById(R.id.button);
    _button.setOnClickListener(new ButtonClickHandler());

    _path = DATA_PATH + "/ocr.jpg";
}

public class ButtonClickHandler implements View.OnClickListener {
    public void onClick(View view) {
        Log.v(TAG, "Starting Camera app");
        startCameraActivity();
    }
}

// Simple android photo capture:
// http://labs.makemachine.net/2010/03/simple-android-photo-capture/

protected void startCameraActivity() {
    File file = new File(_path);
    Uri outputFileUri = Uri.fromFile(file);

    final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

    startActivityForResult(intent, 0);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    Log.i(TAG, "resultCode: " + resultCode);

    if (resultCode == -1) {
        onPhotoTaken();
    } else {
        Log.v(TAG, "User cancelled");
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putBoolean(SimpleAndroidOCRActivity.PHOTO_TAKEN, _taken);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    Log.i(TAG, "onRestoreInstanceState()");
    if (savedInstanceState.getBoolean(SimpleAndroidOCRActivity.PHOTO_TAKEN)) {
        onPhotoTaken();
    }
}

protected void onPhotoTaken() {
    _taken = true;

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 4;

    Bitmap bitmap = BitmapFactory.decodeFile(_path, options);

    try {
        ExifInterface exif = new ExifInterface(_path);
        int exifOrientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);

        Log.v(TAG, "Orient: " + exifOrientation);

        int rotate = 0;

        switch (exifOrientation) {
        case ExifInterface.ORIENTATION_ROTATE_90:
            rotate = 90;
            break;
        case ExifInterface.ORIENTATION_ROTATE_180:
            rotate = 180;
            break;
        case ExifInterface.ORIENTATION_ROTATE_270:
            rotate = 270;
            break;
        }

        Log.v(TAG, "Rotation: " + rotate);

        if (rotate != 0) {

            // Getting width & height of the given image.
            int w = bitmap.getWidth();
            int h = bitmap.getHeight();

            // Setting pre rotate
            Matrix mtx = new Matrix();
            mtx.preRotate(rotate);

            // Rotating Bitmap
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, false);
        }

        // Convert to ARGB_8888, required by tess
        bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);

    } catch (IOException e) {
        Log.e(TAG, "Couldn't correct orientation: " + e.toString());
    }

    // _image.setImageBitmap( bitmap );

    Log.v(TAG, "Before baseApi");

    TessBaseAPI baseApi = new TessBaseAPI();
    baseApi.setDebug(true);
    baseApi.init(DATA_PATH, lang);
    baseApi.setImage(bitmap);

    String recognizedText = baseApi.getUTF8Text();

    baseApi.end();

    // You now have the text in recognizedText var, you can do anything with it.
    // We will display a stripped out trimmed alpha-numeric version of it (if lang is 

  eng)
    // so that garbage doesn't make it to the display.

    Log.v(TAG, "OCRED TEXT: " + recognizedText);

    if ( lang.equalsIgnoreCase("eng") ) {
        recognizedText = recognizedText.replaceAll("[^a-zA-Z0-9]+", " ");
    }

    recognizedText = recognizedText.trim();

    if ( recognizedText.length() != 0 ) {
        _field.setText(_field.getText().toString().length() == 0 ? recognizedText : 
  _field.getText() + " " + recognizedText);
        _field.setSelection(_field.getText().toString().length());
    }

    // Cycle done.
}

// www.Gaut.am was here
// Thanks for reading!
} 
```

# iphone - 降低应用程序的 CPU 使用率

> ID：13761049
> 
> 赞同：0
> 
> 时间：2012-12-07T10:16:06.483
> 
> 标签：iphone, instruments

我遇到了 CPU 使用率问题。当我启动我的应用程序时，它的动画以良好的速度开始，突然动画速度降低，然后应用程序崩溃。但是当我使用 Activity Monitor(Instrument) 检查应用程序时，我的应用程序使用的 CPU 接近 80%-90%。我无法减少 CPU 使用率。

**代码：**

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{   

    CGPoint location;

    UITouch *touch = [[event allTouches] anyObject];
    location = [touch locationInView:self.view];

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{

    CGPoint location;

    UITouch *touch = [[event allTouches] anyObject];
    location = [touch locationInView:self.view];

    touchMovedX = location.x;
    touchMovedY = location.y; 

   [self merge];
}  

 // -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    //{
       // [self merge];
   // }

-(void)merge
{

    CGSize size = CGSizeMake(320, 480);
    UIGraphicsBeginImageContext(size);

    CGPoint point1 = CGPointMake(0,0);

    CGPoint point2 = CGPointMake(touchMovedX,touchMovedY);

    UIImage *imageOne = [UIImage imageNamed:@"iphone.png"];
    [imageOne drawAtPoint:point1];

    UIImage *imageTwo = [UIImage imageNamed:@"Cloud.png"];

    [imageTwo drawAtPoint:point2];

    imageB.image=imageTwo;

    UIImage *imageC = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    imageview = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,480)];
    imageview.image=imageC;

    [self.view addSubview:imageview];
}

-(IBAction)save:(id)sender  {

UIImage* imageToSave = imageview.image;

UIImageWriteToSavedPhotosAlbum(imageToSave, nil, nil, nil);
[imageToSave release]; 
```

}

任何帮助都是不言而喻的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:33:29.540

不要调用`touchesMoved`你的`touchesBegan`代码。`touchesMoved`由 iOS 调用以响应被移动的触摸

同样`touchesEnded`- 当用户从屏幕上移开手指时调用它

此外 - 您的合并代码正在向您的视图添加越来越多的子视图 - 在每次调用合并时，您正在调用`[self.view addSubview:imageview]`这将增加您在处理所有子视图时的 CPU 使用率。每次您在触摸中移动手指时，这将添加一个新的子视图并且永远不会删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:17:19.883

```
-(void)viewDidAppear:(BOOL)animated{
    UIPanGestureRecognizer *pgr1 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(image1Moved:)];
    [iv1 addGestureRecognizer:pgr1];

}

-(void)image1Moved:(UIPanGestureRecognizer *)pgr{
    NSLog(@"Came here");
     [iv1 setCenter:[pgr locationInView:self.view]];
} 
```

做一些类似上面的事情。您可以在哪里移动图像视图。

此外，使用另一个按钮调用合并，您可以随意移动图像，但是当需要合并时，单击一个按钮。这样，您将只调用一次 Merge，它不会对 CPU 造成任何负载。

看起来您是初学者，我强烈建议您遵循一些教程并了解更多关于

1.  实例变量
2.  特性
3.  手势识别器等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:04:57.603

导致 CPU 使用的不是 touchesMoved 或 touchesBegan。绝对是[自合并]。我假设您正在 [self merge] 中执行一些 CPU 密集型工作，并且已经完成了很多次。

您必须在另一个线程上执行任何 CPU 密集型工作才能使应用程序响应。此外，如果您每一步都在做事情，那么它可能会变得太慢。

请在合并方法中发布您正在执行的操作的代码。

你可以做三件事

1.  改进合并方法以使其高效。

2.  使用 Grand Central 调度

阅读关于 dispatch_async(dispatch_get_global_queue, ^{ }); 等等。这将在 Grand Central Dispatch 部分下。

1.  另一种方法是 [self performSelector:@(merge) afterDelay:0.5s]; 此方法将调用合并，仅每 0.5 秒一次。

然后如果您不希望多次调用相同的方法，或者每次移动都没有必要，就在调用之前

[NSObject cancelPreviousPerformRequestsWithTarget:<#(id)#> 选择器:<#(SEL)#> 对象:<#(id)#>

cancel 方法将取消之前的调用并再次调用该方法。

但同样，这一切都取决于你想要做什么。

# image - 未捕获的错误：INDEX_SIZE_ERR：DOM 异常 1

> ID：13761050
> 
> 赞同：1
> 
> 时间：2012-12-07T10:16:14.150
> 
> 标签：image, html

```
pdf.drawImage(document.getElementById("Im0_2") ,0,0,1064,442); 
```

它在我的代码中抛出`Uncaught Error: INDEX_SIZE_ERR: DOM Exception 1`了这一行 n 图像没有被加载 任何人都可以帮助我解决这个问题

# java - TableViewer 选择更改

> ID：13761052
> 
> 赞同：2
> 
> 时间：2012-12-07T10:16:24.327
> 
> 标签：java, block, jface, master-detail, tableviewer

我有一个小问题，我正在寻求帮助。

我的 Master 部分有一个`TableViewer`，并且有很多条目会很快更新它。我的详细信息页面显示所选项目信息。我想让这个详细信息页面持久化，并且只有在选择发生变化时才会收到通知。

我面临的问题是，当向 tableviewer 添加新项目时，选择会自动更改。

编辑：我有一个更新的处理程序，`TableViewer`在列表的开头添加一个新项目，这是我的输入`TableViewer`。

When the `TableViewer`is `SWT.VIRTUAL`the selection is on the index and when an item is added, the selected row is the same but items have moved.

何时`TableViewer`不在`SWT.VIRTUAL`对象上进行选择但性能非常低！

有什么建议吗？谢谢

```
public void update(Object obj_p) {
    if (obj_p instanceof IMessageEvent) {
        IMessageEvent event = (IMessageEvent) obj_p;
        synchronized (_currentListEvents) {
            _currentListEvents.addFirst(event);
            if (_currentListEvents.size() > _maxEvents) {
                _currentListEvents.removeLast();
            }
        }
    }
    if (null == obj_p) {
        synchronized (_currentListEvents) {
            _currentListEvents.clear();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:22:19.757

创建 TableViewer 时使用 SWT.FULL_SELECTION 样式。

有一个简单的可运行代码。它的行为与您发布的完全一样，正在更改选择，但是当您使用注释的 TableViewer 构造函数时，它对我有用。

```
import java.util.ArrayList;
import java.util.List;

import org.eclipse.jface.viewers.ArrayContentProvider;
import org.eclipse.jface.viewers.ISelectionChangedListener;
import org.eclipse.jface.viewers.LabelProvider;
import org.eclipse.jface.viewers.SelectionChangedEvent;
import org.eclipse.jface.viewers.StructuredSelection;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class TestCase {

private static List<String> model = new ArrayList<String>();
private static TableViewer viewer;

public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

//  viewer = new TableViewer(shell, SWT.SINGLE | SWT.FULL_SELECTION |    SWT.H_SCROLL | SWT.V_SCROLL | SWT.VIRTUAL);
    viewer = new TableViewer(shell, SWT.SINGLE | SWT.H_SCROLL | SWT.V_SCROLL | SWT.VIRTUAL);

    viewer.getTable().setHeaderVisible(true);
    viewer.getTable().setLinesVisible(true);
    viewer.setUseHashlookup(true);

    viewer.setContentProvider(ArrayContentProvider.getInstance());
    viewer.setLabelProvider(new LabelProvider());

    model.add("element2");
    model.add("element1");
    model.add("element0");

    viewer.setInput(model);

    viewer.setSelection(new StructuredSelection(model.get(1)));

    viewer.addSelectionChangedListener(new ISelectionChangedListener() {

        @Override
        public void selectionChanged(SelectionChangedEvent event) {
            System.out.println("selection changed");
        }
    });

    addContent();

    shell.setSize(400, 400);
    shell.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
}

private static void addContent() {
    Display.getCurrent().timerExec(2000, new Runnable() {

        @Override
        public void run() {
            model.add(0, "element" + model.size());
            viewer.refresh();
            addContent();
        }
    });
}

} 
```

# objective-c - 我可以使用哪种设计模式来解决这种情况？

> ID：13761053
> 
> 赞同：1
> 
> 时间：2012-12-07T10:16:36.327
> 
> 标签：objective-c, design-patterns, singleton, hierarchy

首先，我使用的是Objective-C，但这一点都不重要。

我的情况是：

我有两种不同的情况。我通过预处理器宏来区分它们，例如：

```
#ifdef USER
    do some stuff for scenario 1
#else
    do some stuff for scenario 2 
```

这两种方案都适用于整个应用程序中的项目列表，但不同之处在于获取这些项目的方式。

在第一个中，我通过向服务器发送请求来获取项目。

在第二个中，我从本地设备存储中获取它们。

我现在拥有的是实施的第二种情况。我有一个单例类，它通过从本地存储中获取项目列表来返回给我。（就像一个传统的数据库单例）

我想添加其他场景。由于项目可以从应用程序的任何点获取，我希望这也是一个单例。

有一个单例超类，然后有两个子类实现不同的获取项目的方式是否有意义？单例层次结构对我来说听起来很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:25:30.853

[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)结合[战略](http://en.wikipedia.org/wiki/Strategy_pattern)。

工厂作为使用另一个类来创建实例的模式，而不仅仅是使用构造函数。您很可能已经在使用 Singleton 执行此操作。

用于配置工厂在 rutime 实际创建哪种对象的能力的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:29:58.163

这不完全是等级制度。您提到的超类实际上是您的 2 个具体类的**接口**，如果您愿意，可以是单例。接口是一个抽象实体，因此任何与实例相关的术语都与它无关。

您通过使用预处理器进行场景选择来静态定义程序行为。如果您坚持这种方法并且它符合您的要求，那么您就不需要任何设计模式。在您的代码中，只需使用我上面提到的接口，它是静态实例化数据的端口。如果您想拥有更大的灵活性（这听起来很可能），您可以在运行时选择您的方案。在这种情况下，您可能会发现[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)可用于应用场景，而[工厂模式](http://en.wikipedia.org/wiki/Factory_pattern)可用于实例化。

# python - 从元组列表中格式化 JSON 字符串的更 Pythonic 方式

> ID：13761054
> 
> 赞同：10
> 
> 时间：2012-12-07T10:16:40.277
> 
> 标签：python, json, list, tuples

目前我正在这样做：

```
def getJSONString(lst):
    join = ""
    rs = "{"
    for i in lst:
        rs += join + '"' + str(i[0]) + '":"' + str(i[1]) + '"'
        join = ","
    return rs + "}" 
```

我称之为：

```
rs = getJSONString([("name", "value"), ("name2", "value2")]) 
```

它不需要嵌套（它只是一个简单的名称值对列表）。但我愿意以不同的方式调用该函数。这一切似乎有点笨拙，有没有更优雅的方式？这需要在 2.x 下运行。

请注意，这不是以下内容的重复：[Python - 将元组列表转换为字符串](https://stackoverflow.com/questions/3292643/python-convert-list-of-tuples-to-string)（除非可以修改该答案以创建 JSON 字符串作为输出）。

编辑：将名称值对作为字典传递会更好吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-07T10:19:34.213

有一种更好的方法来生成 JSON 字符串：[`json`模块](http://docs.python.org/2/library/json.html).

```
import json
rs = json.dumps(dict(lst)) 
```

这利用了`dict()`可以采用一系列键值对（双值元组）并将其转换为映射的事实，该映射`json`模块直接将其转换为 JSON 对象结构。

示范：

```
>>> import json
>>> lst = [("name", "value"), ("name2", "value2")]
>>> rs = json.dumps(dict(lst))
>>> print rs
{"name2": "value2", "name": "value"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:25:23.233

```
(lambda lst: json.dumps({item[0]:item[1] for item in lst}))([(1,2), (3,4)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-19T04:30:01.537

我认为这是一个非常简单的解决方案。礼貌 w3 学校 [https://www.w3schools.com/python/python_json.asp](https://www.w3schools.com/python/python_json.asp)

```
import json 
```

一些 JSON：

```
x =  '{ "name":"John", "age":30, "city":"New York"}' 
```

解析 x：

```
y = json.loads(x) 
```

结果是一个 Python 字典：

```
print(y["age"]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-30T05:35:34.133

您可以将其转换为一个完整的 JSON 内容：

```
import ast
import json

stli = '[(\'Rated 4.0\', \'RATED\\n  A beautiful place to dine in.The interiors take you back to the Mughal era. The lightings are just perfect.We went there on the occasion of Christmas and so they had only limited items available. But the taste and service was not compromised at all.The only complaint is that the breads could have been better.Would surely like to come here again.\'), (\'Rated 4.0\', \'RATED\\n  I was here for dinner with my family on a weekday. The restaurant was completely empty. Ambience is good with some good old hindi music. Seating arrangement are good too. We ordered masala papad, panner and baby corn starters, lemon and corrionder soup, butter roti, olive and chilli paratha. Food was fresh and good, service is good too. Good for family hangout.\\nCheers\'), (\'Rated 2.0\', \'RATED\\n  Its a restaurant near to Banashankari BDA. Me along with few of my office friends visited to have buffet but unfortunately they only provide veg buffet. On inquiring they said this place is mostly visited by vegetarians. Anyways we ordered ala carte items which took ages to come. Food was ok ok. Definitely not visiting anymore.\'), (\'Rated 4.0\', \'RATED\\n  We went here on a weekend and one of us had the buffet while two of us took Ala Carte. Firstly the ambience and service of this place is great! The buffet had a lot of items and the good was good. We had a Pumpkin Halwa intm the dessert which was amazing. Must try! The kulchas are great here. Cheers!\'), (\'Rated 5.0\', \'RATED\\n  The best thing about the place is itÃ\x83Â\x82Ã\x82Â\x92s ambiance. Second best thing was yummy ? food. We try buffet and buffet food was not disappointed us.\\nTest ?. ?? ?? ?? ?? ??\\nQuality ?. ??????????.\\nService: Staff was very professional and friendly.\\n\\nOverall experience was excellent.\\n\\nsubirmajumder85.wixsite.com\'), (\'Rated 5.0\', \'RATED\\n  Great food and pleasant ambience. Expensive but Coll place to chill and relax......\\n\\nService is really very very good and friendly staff...\\n\\nFood : 5/5\\nService : 5/5\\nAmbience :5/5\\nOverall :5/5\'), (\'Rated 4.0\', \'RATED\\n  Good ambience with tasty food.\\nCheese chilli paratha with Bhutta palak methi curry is a good combo.\\nLemon Chicken in the starters is a must try item.\\nEgg fried rice was also quite tasty.\\nIn the mocktails, recommend "Alice in Junoon". Do not miss it.\'), (\'Rated 4.0\', \'RATED\\n  You canÃ\x83Â\x82Ã\x82Â\x92t go wrong with Jalsa. Never been a fan of their buffet and thus always order alacarteÃ\x83Â\x82Ã\x82Â\x92\. Service at times can be on the slower side but food is worth the wait.\'), (\'Rated 5.0\', \'RATED\\n  Overdelighted by the service and food provided at this place. A royal and ethnic atmosphere builds a strong essence of being in India and also the quality and taste of food is truly authentic. I would totally recommend to visit this place once.\'), (\'Rated 4.0\', \'RATED\\n  The place is nice and comfortable. Food wise all jalea outlets maintain a good standard. The soya chaap was a standout dish. Clearly one of trademark dish as per me and a must try.\\n\\nThe only concern is the parking. It very congested and limited to just 5cars. The basement parking is very steep and makes it cumbersome\'), (\'Rated 4.0\', \'RATED\\n  The place is nice and comfortable. Food wise all jalea outlets maintain a good standard. The soya chaap was a standout dish. Clearly one of trademark dish as per me and a must try.\\n\\nThe only concern is the parking. It very congested and limited to just 5cars. The basement parking is very steep and makes it cumbersome\'), (\'Rated 4.0\', \'RATED\\n  The place is nice and comfortable. Food wise all jalea outlets maintain a good standard. The soya chaap was a standout dish. Clearly one of trademark dish as per me and a must try.\\n\\nThe only concern is the parking. It very congested and limited to just 5cars. The basement parking is very steep and makes it cumbersome\')]'

inputlist = list(ast.literal_eval(stli))

rs = json.dumps(dict(inputlist))

print(rs) 
```

**输出：**

```
{"Rated 4.0": "RATED\n  The place is nice and comfortable. Food wise all jalea outlets maintain a good standard. The soya chaap was a standout dish. Clearly one of trademark dish as per me and a must try.\n\nThe only concern is the parking. It very congested and limited to just 5cars. The basement parking is very steep and makes it cumbersome", "Rated 2.0": "RATED\n  Its a restaurant near to Banashankari BDA. Me along with few of my office friends visited to have buffet but unfortunately they only provide veg buffet. On inquiring they said this place is mostly visited by vegetarians. Anyways we ordered ala carte items which took ages to come. Food was ok ok. Definitely not visiting anymore.", "Rated 5.0": "RATED\n  Overdelighted by the service and food provided at this place. A royal and ethnic atmosphere builds a strong essence of being in India and also the quality and taste of food is truly authentic. I would totally recommend to visit this place once."} 
```

# jquery - 背景颜色不适用于 kendoGrid 的多行

> ID：13761056
> 
> 赞同：1
> 
> 时间：2012-12-07T10:16:43.580
> 
> 标签：jquery, kendo-ui

我写了这行代码来设置行背景颜色

`$("#gridSellIn tbody tr:first").addClass('rowColor');`.

它适用于第一行网格，但我需要将此颜色应用于 3、12、16 行。我需要写什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:23:12.940

尝试使用[eq()](http://api.jquery.com/eq-selector/)选择器：

```
$("#gridSellIn tbody tr:eq(0)").addClass('rowColor');
$("#gridSellIn tbody tr:eq(2)").addClass('rowColor')
$("#gridSellIn tbody tr:eq(11)").addClass('rowColor')
$("#gridSellIn tbody tr:eq(15)").addClass('rowColor') 
```

谢谢

# rest - 支持列表和单个项目的 Struts 2 ModelDriven Action

> ID：13761058
> 
> 赞同：0
> 
> 时间：2012-12-07T10:16:55.040
> 
> 标签：rest, struts2

我继承了一些基于 struts2 REST-plugin 的代码，下面的结构让我感到困惑：

```
@Namespace("/merchants/{id}")
public class MerchantAction extends ActionSupport implements ModelDriven<Object> {
private Merchant merchant = new Merchant(); // A Model
private Iterable<Merchant> merchants;       // A list of models

.... 
public HttpHeaders index() {
    merchants = merchantService.findAllMerchants();
    return new DefaultHttpHeaders("index");
}
@Override
public Object getModel() {
    return (merchant != null ? merchant : merchants);
}

 public void setId(String id) {
    merchant = merchantService.findMerchant(id));
} 
```

换句话说，它似乎在返回列表和返回 getModel() 调用中的单个项目之间切换。这是犹太洁食吗？我觉得有点奇怪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:58:47.250

我考虑过你的方法，但最终放弃了。IMO，它失去了强类型动作的优势。

我的解决方案是，为每个动作创建一个`ViewModel`。在视图模型中，可以有单个模型、模型列表和其他页面使用项，例如下拉列表项或单选按钮项。

所以`UserViewModel`就像：

```
public class UserViewModel implements IViewModel<User> {

    private User model;
    private List<User> list;

    public void setModel(User user) {
        this.model = user;
    }

    public User getModel() {
        return model;
    }

    public void setList(List<User> list) {
        this.list = list;
    }

    public List<User> getList() {
        return list;
    }
} 
```

动作如下：

```
public class UserController implements ModelDriven<UserViewModel> {

    private int id;
    private UserViewModel model = new UserViewModel();

    public String index() { 
        return "success";
    }

    public String show() {
        return "success";
    }

    public void setId(int id) {
        this.id = id;
    }

    public int getId() {
        return this.id;
    }

    @Override
    public UserViewModel getModel() {       
        return model;
    }
} 
```

但是这样一来，我还是丢失了jsp文件中的快捷方式。我应该写 long`model.userName`而不是 short `userName`。

我仍在寻找最好的解决方案。

# escaping - 用于 ？（特殊字符）在 httpd-vhost.conf 的服务器名中

> ID：13761059
> 
> 赞同：1
> 
> 时间：2012-12-07T10:16:59.523
> 
> 标签：escaping, xampp

我创建了一个新的虚拟主机，如下所示：

```
<VirtualHost http://developer.com/TimeService/V1/gettime:80> 
```

服务器名称[http://developer.com/TimeService/V1/gettime](http://developer.com/TimeService/V1/gettime)

DocumentRoot D:/xampp/htdocs/developer.com

ServerAdmin admin@developer.com

选项索引 FollowSymLinks

AllowOverride FileInfo

命令允许，拒绝

允许所有人

我希望前 2 行看起来像

```
<VirtualHost http://developer.com/TimeService/V1/gettime?appid:80> 
```

服务器名称[http://developer.com/TimeService/V1/gettime?appid](http://developer.com/TimeService/V1/gettime?appid)

我面临的问题是我什么时候放？（特殊字符）在上面的 http 中，apache 服务器拒绝启动。

我应该如何让 apache 认识到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:28:27.667

服务器名称仅限于完全限定域名 [http://httpd.apache.org/docs/current/mod/core.html#servername](http://httpd.apache.org/docs/current/mod/core.html#servername)

您可以改用重写或重定向。

# database - Phonegap LocalStorage api理解

> ID：13761061
> 
> 赞同：1
> 
> 时间：2012-12-07T10:17:07.250
> 
> 标签：database, cordova, local-storage

从直接取自 phonegap 的示例中。

```
function queryDB(tx) {
  tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
}

function successCB() {
  var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
  db.transaction(queryDB, errorCB);
} 
```

我想知道这个“tx”是什么？

TX 100% 是否需要作为参数？

我寻求一些理解，我对此有点困惑。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:49:07.267

在 Phonegap 示例中，tx 参数是来自 db.transaction >> populateDB 参数的数据

```
function onDeviceReady() {
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(populateDB, errorCB, successCB);
}

// Populate the database 
//
function populateDB(tx) {
     tx.executeSql('DROP TABLE IF EXISTS DEMO');
     tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
} 
```

**编辑：**

我发现这篇文章可以帮助你。这向您解释了如何将您的 Phonegap 应用程序连接到您的服务器数据库。

[将数据库同步添加到您的 PhoneGap 项目](http://css.dzone.com/articles/adding-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:02:05.463

因此，假设我想编写自己的插入 sql 函数，该函数从 HTML 表单接收数据。

那么我会“必须”没有例外这样做..？

```
function costumInsert() {
  db.transaction(myInsert, errorCB, successCB);
}

function myInsert(tx) {
  tx.executeSql('INSERT INTO....);
} 
```

# javascript - 如何使用 dijit.Dialog 将内容添加到已经从 href 获取内容的 containerNode

> ID：13761065
> 
> 赞同：2
> 
> 时间：2012-12-07T10:17:18.587
> 
> 标签：javascript, xhtml, dialog, href, dojo

我是这个 javascript 和 dijit 的新手。

我的问题：在我的 js 函数中，我正在构建一个 dijit.Dialog，使用已发送到函数的参数。其中一个参数是指向外部 xhtml 文件的 href，该文件仅包含应该在对话框中显示的文本。现在，我想在 containerNode 中添加一个 div，其中包含另一个指向对话框的链接（带有一个应该特定于每个用户的链接）。问题是我可以确保添加的 div 一直存在，直到我到达 dialog.show，之后它就消失了。来自 xhtml 的文本接管。如果我将它放在 domNode 中（如按钮），它会显示在错误的位置。我还尝试了另一种方法，让链接位于外部 href 中（在文件三中），给它一个 id 并尝试以这种方式访问​​它并对其进行操作。像这样：

```
document.getElementById("bytlosen").href="www.xxx.se"; 
```

但它不起作用。我得到“document.getElementById(...) 为空。

如果有人可以帮助我如何将 div（链接）添加到对话框中，我会非常高兴！如果我没关系

1.  将它放在文件 3 中，并且可以从文件 2 访问它并对其进行操作，

2.  只需在 js 中添加 div（在文件二中），或者

3.  还有其他方法吗？

我有三个文件：

文件一.xhtml（调用文件二）：

```
 <li><a href="#" onclick="new Xxxx.contactsDialog(Xxxx.CONTACT_INFO_TITLE, '${request.contextPath}/content/three.xhtml')">Kontakta oss</a></li> 
```

文件二.js：

```
 Xxxx.contactsDialog = function(title, href, cssClass, destroy) {
if (href) {
    var options = {
            title: title,
            href: href
    };
    if (cssClass)
        options["class"] = cssClass;                

    var dialog = new dijit.Dialog(options);             
    var div = document.createElement("div");

    var bytLosen = document.createElement("a");
    bytLosen.appendChild(document.createTextNode("Byt lösenord"));
    bytLosen.setAttribute("href", "https://xxxx.xxx.se/xxx/xxx/xxxx=xxxx&TARGET=xxx.xxx.se");
    bytLosen.setAttribute("target", "_blank");
    div.appendChild(bytLosen);
    dialog.containerNode.appendChild(div);

    var okButton = document.createElement("button");
    okButton.setAttribute("type", "submit");
    okButton.setAttribute("style", "margin-top: 10px");
    okButton.innerHTML = "Ok";
    dojo.addClass(okButton, "button");
    dialog.domNode.appendChild(okButton);

    dialog.startup();
    dialog.show();

    dojo.connect(okButton, "onclick", function() {
        dialog.hide();
        if (destroy) {
            dialog.destroy();
        }
    });
    return true;
} else
    return false;   
    }; 
```

文件三.html：

```
 <div class="popupHeader">Synpunkter och felanmälan <span style="font-weight: normal">skickas till:</span></div>
    <div><a href="mailto:xxxxxx@xx.se">ajourhallning-xxx@xx.se</a></div>

    <div class="popupHeader">Länkar <span style="font-weight: normal">(till xxxx's externa hemsida)</span></div>
    <div><a href="http://www.xxxxxx.se" target="_blank">www.xxxxx.se</a></div>
    <div><a href="http://www.xxxxx.se/xxxxx" target="_blank">www.xxxx.se/xxx</a></div>

    <div class="popupHeader">Byt lösenord</div> 
```

# c++ - 在销毁之前锁定对象的互斥锁将释放内存或其他一些意外

> ID：13761074
> 
> 赞同：1
> 
> 时间：2012-12-07T10:18:17.537
> 
> 标签：c++, unix, memory, pthreads

在此对象之前锁定 c++ 对象的互斥体**（不解锁）**是否是一种良好且**安全**的做法？我这样做是为了保护其他线程在此毫秒内可能使用对象（概率非常低）。`delete`

 **之后内存会没有分配吗？这是一个好习惯吗？

例子：

```
 ptr_to_delete->MUTEX.lock_writing(); // can not delete session if its already locked. (additational protection)
    ptr_to_delete->cleanup();
    delete ptr_to_delete; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:29:25.030

“我这样做是为了保护其他线程在此毫秒内可能使用对象”。在这种情况下，对象的互斥锁是否被锁定并不重要——如果你在一个线程中删除了对象，而其他线程仍然有一个可以使用的指向它的指针*，*你会遇到麻烦。

**编辑**：

还是有问题的。正如 piokuc 所说，您需要在某个时候释放和释放互斥锁，否则您的程序将会泄漏。

仍然存在工作线程和清理线程可以同时获得指向对象的指针的情况。如果清理线程在工作线程使用它之前删除了该对象，您将获得未定义的行为（即崩溃）。

您应该为您的指针数组创建一个访问器函数，该函数仅在未锁定时返回一个指针（并在返回之前将其锁定）。这样，一次只有一个线程可能有指针，并且工作线程不可能获取/使用已被清理线程删除的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:19:47.597

Pthreads 没有`lock_writing`函数，因此无法在不知道其功能的情况下查看您的代码。

但是，调用`pthread_mutex_destroy`已锁定的互斥锁是未定义的行为。因此，假设对象的析构函数确实销毁了它的互斥体（显式地或作为数据成员的析构函数的一部分），您*必须*在此之前解锁互斥体。

如果您在正确的位置解锁它，那么您的代码是正确的。如果你在错误的地方解锁它，那么它是不正确的。我不能准确地告诉你正确的地方在哪里。

> 当其他线程可以从数组和内存中删除对象时，其他线程可以同时从数组中获取指向对象的指针。“工作”线程将始终获取指针，然后锁定互斥锁，进行一些工作，然后解锁互斥锁并永远丢失指针。

可能您需要一个互斥锁来保护整个数据结构，而不仅仅是其中的一个对象。在我看来，可能存在竞争条件：

```
Thread 1                                Thread 2
                                    get pointer to object from data structure
get ptr from data structure
lock object
cleanup
unlock object
destroy object
                                    lock object (oops, it doesn't exist any more) 
```**

# 3d - 3D 对象的相机距离

> ID：13761076
> 
> 赞同：1
> 
> 时间：2012-12-07T10:18:40.940
> 
> 标签：3d, camera, projection, perspective

假设我有一个 3D 对象。我没有关于对象形式的详细信息，我拥有的唯一信息是 3 轴坐标的范围（最小/最大 x 坐标等）。

给定一个相机“方向”（基本上相机从哪个角度看物体），我如何计算相机必须有多远才能在一定尺寸的屏幕上查看整个物体。

所以基本上我有以下输入：

*   对象边界
*   相机“方向”
*   屏幕尺寸

并想计算相机距离。

我该如何解决这个问题？

当知道相机在 3D 坐标中的位置时，我发现了很多关于如何将 3D 点投影到 2D 平面上的信息，但是我未能以匹配我的输入/输出的方式调整公式。

示例输入为：

*   x: (0-100), y: (0-100), z: (0-100)
*   相机观察物体时好像它绕 Z 轴旋转 45° 和绕 X 轴旋转 45°
*   屏幕尺寸为 600x600

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:25:32.330

我将在下面的答案中假设一个正交投影，但是扩展到透视投影应该很容易。对于较小的物体，正交投影看起来不错（因为我们习惯于看不到它们的透视效果）。

对于每个点，`i`让`x[i]`, `y[i]`,`z[i]`为对象空间中的原始坐标。

让`x'[i]`,成为旋转到相机空间`y'[i]`的`z'[i]`点（这可以通过将旋转变换应用于每个点来计算 - 我认为这部分对你来说很容易）。

正交投影将是：

```
X[i] = f*x'[i] + Cx
Y[i] = f*y'[i] + Cy 
```

哪里`f`是一些数字，我们将计算它来处理缩放，并且`Cx`是`Cy`图像的中心。这可以变得更复杂，以允许例如透视投影、非统一纵横比。例如，请参阅我对另一个问题的回答：(( [3D 点投影以形成图像](https://stackoverflow.com/questions/14504006/3d-points-projected-to-form-an-image/14564131#14564131))) 来处理透视投影。

由于我们将求解`f`，因此我们重新排列：

```
f = (X[i] - Cx)/x'[i]
f = (Y[i] - Cy)/y'[i] 
```

让`MaxX`是像素坐标中最大的理想`X`点，像素坐标中的最大点和`MaxY`最小`Y`的点（我们取像素的中心）。`MinX``MinY`

例如

```
MinX=0.5
MaxX=599.5
MinY=0.5
MaxY=599.5 
```

我们希望选择一个`f`足够小，以便最极端`x'[i]`或`y'[i]`点映射到这些像素之一。

*注意：我假设对象已经居中：如果不是，那么我们还需要计算一个好的`Cx`和`Cy`太（并且可以像这样实现更紧密的图像拟合）。*

计算每个`X`和`Y`方向上的最大和最小旋转点（`min_i(x[i])`表示 的`x[i]`所有可能值中的最小值`i`）：

```
minx = min_i(x[i])
maxx = max_i(x[i])
miny = min_i(y[i])
maxy = max_i(y[i]) 
```

现在求解每个极值像素映射到每个极值点所需的焦距：

```
f_1 = (MinX - Cx)/minx
f_2 = (MaxX - Cx)/maxx
f_3 = (MinY - Cy)/miny
f_4 = (MaxY - Cy)/maxy 
```

我们选择其中最小的一个，以确保整个对象都适合屏幕。

**例子**

如果我们假设最左边的点（旋转后）在

```
minx = -1.2 
```

最右边的点：

```
maxx = 1.5 
```

最高点（请注意，我假设像素坐标与空间坐标对齐）：

```
miny = -1.3 
```

最不利的点（请注意，我假设像素坐标与空间坐标对齐）：

```
maxy = 1.3 
```

我们使用您的`600x600`图像示例。

对于其中的每一个，我们解决`f`：

```
f_1 = (0.5 - 300)/-1.2 = 249.6
f_2 = (599.5 - 300)/1.5 = 199.7
f_3 = (0.5 - 300)/-1.3 = 230.4
f_4 = (599.5 - 300)/1.3 = 230.4 
```

现在我们选择最小的`f`，所以我们得到：

```
f=199.7 
```

正交投影将是：

```
X[i] = 199.7*x'[i] + 300
Y[i] = 199.7*y'[i] + 300 
```

提醒：您可以通过添加透视投影、允许不同的图像中心、缩放等以多种方式使其更加复杂。这种方法旨在成为最简单的入门方法。

# azure - 在 Windows Azure Dashboard 中选择什么来获得免费试用？

> ID：13761077
> 
> 赞同：-2
> 
> 时间：2012-12-07T10:18:48.097
> 
> 标签：azure

我希望将 Windows Azure 用于工作中的内部应用程序。我已经注册，并希望利用 90 天免费试用，看看它是否能满足我们的需求。

所以我的问题是，在仪表板上我需要选择什么来获得免费试用？

我不想选择最终让我们付出代价的东西，而我们只是在研究使用它的可能性。还是我只是我们需要的服务，它们是从试用津贴中提取的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:16:36.567

您可以做任何您需要的服务，这些服务都是从试用津贴中提取的。

如果您达到试用限额，您的所有服务都将被删除，但存储帐户中的数据将被保留。在下一个计费周期开始之前，您将无法执行任何操作。

当您默认创建试用版时，它有“ [SPENDING LIMIT](http://www.windowsazure.com/en-us/pricing/spending-limits/) ”，如果您不想收费，请确保不要删除它。

# php - Codeigniter 2.1.3：sess_destroy() 导致未定义索引：当 'sess_use_database' == TRUE 时 session_id 等通知

> ID：13761078
> 
> 赞同：3
> 
> 时间：2012-12-07T10:18:48.860
> 
> 标签：php, codeigniter, session

我一直在使用数据库的会话测试 codeigniter 的功能，当我注销时（使用 sess_destroy()），我会收到以下通知：

```
 A PHP Error was encountered

            Severity: Notice

            Message: Undefined index: session_id

            Filename: libraries/Session.php

            Line Number: 272
            A PHP Error was encountered

            Severity: Notice

            Message: Undefined index: ip_address

            Filename: libraries/Session.php

            Line Number: 272
            A PHP Error was encountered

            Severity: Notice

            Message: Undefined index: user_agent

            Filename: libraries/Session.php

            Line Number: 272
            A PHP Error was encountered

            Severity: Notice

            Message: Undefined index: last_activity

            Filename: libraries/Session.php

            Line Number: 272
            A PHP Error was encountered

            Severity: Notice

            Message: Undefined index: session_id

            Filename: libraries/Session.php

            Line Number: 288
            A PHP Error was encountered

            Severity: Notice

            Message: Undefined index: last_activity

            Filename: libraries/Session.php

            Line Number: 289 
```

我需要做什么来解决这个问题？（我知道我可以关闭错误报告等，但我更感兴趣的是为什么会发生这种情况以及如何解决它）。

我用它来创建表：

```
 CREATE TABLE IF NOT EXISTS  `ci_sessions` (
                        session_id varchar(40) DEFAULT '0' NOT NULL,
                        ip_address varchar(45) DEFAULT '0' NOT NULL,
                        user_agent varchar(120) NOT NULL,
                        last_activity int(10) unsigned DEFAULT 0 NOT NULL,
                        user_data text NOT NULL,
                        PRIMARY KEY (session_id),
                        KEY `last_activity_idx` (`last_activity`)
                ); 
```

会话库是自动加载的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-14T13:28:14.127

随着 2.1.3 的发布，这导致了您的问题：

> 修复了一个错误 (#1314) - 会话库方法 sess_destroy() 没有破坏 userdata 数组。

$this->tank_auth->logout() 包含函数 sess_destroy(); 所以在你调用它之后，你不能在 $this->_show_message() 中使用 set_flashdata()。

您需要做的是创建一个新会话。这就是您的注销方法在 auth.php 中的样子：

```
/**
 * Logout user
 *
 * @return void
 */
function logout() {
    $this->tank_auth->logout(); // Destroys session
    $this->session->sess_create();
    $this->_show_message($this->lang->line('auth_message_logged_out'));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-16T21:53:04.070

只是为 Ben 的回答添加一个简短的注释。他对问题的识别是正确的，但我发现，由于操作的顺序，在 Tank_auth 库中添加 create session 行更有效。

这是 Tank_auth.php 库中修改后的 logout() 函数：

```
 /**
 * Logout user from the site
 *
 * @return  void
 */
function logout()
{
    $this->delete_autologin();

    // See http://codeigniter.com/forums/viewreply/662369/ as the reason for the next line
    $this->ci->session->set_userdata(array('user_id' => '', 'username' => '', 'status' => ''));

    $this->ci->session->sess_destroy();
    $this->ci->session->sess_create();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:22:20.937

检查你的`application/config/config.php`文件，看看你有没有`$config[‘sess_use_database’] = TRUE`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:48:16.473

我想，刷新是你所缺少的。您是否尝试过重定向（'注销'，'刷新'）;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T14:30:24.903

对于 Zach：由于您使用的是 Tank auth，请确保您的注销功能是这样的：-

```
 function logout(){
        if ($this->tank_auth->is_logged_in()) {
            $this->tank_auth->logout();

            redirect('');           

        } 
    } 
```

您还可以自动加载最常用的帮助程序和库：

```
$autoload['libraries'] = array('database','session','form_validation','pagination');
$autoload['helper'] = array('form','url','html'); 
```

您的配置似乎很好，可能是您尝试注销两次。如果仍然存在问题，请显示您的注销代码。

# asp.net - 实体框架错误

> ID：13761085
> 
> 赞同：0
> 
> 时间：2012-12-07T10:19:30.857
> 
> 标签：asp.net, visual-studio-2010, entity-framework

我有一个小问题。每次尝试更新我的实体集时，我都会遇到以下错误。

> 无法更新 EntitySet 'ShoppingCart'，因为它有一个 DefiningQuery 并且 ModificationFunctionMapping 元素中不存在 InsertFunction 元素来支持当前操作。

代码是：`

```
public void AddItem(string cartID, string productID, string quantity)
        {
            using (CommerceEntities db = new CommerceEntities())
            {
                try
                {
                    var myItem = (from c in db.ShoppingCarts
                                  where c.CartID == cartID &&
                                      c.ProductID == productID
                                  select c).FirstOrDefault();
                    if (myItem == null)
                    {
                        ShoppingCart cartadd = new ShoppingCart();
                        cartadd.CartID = cartID;
                        cartadd.Quantity = quantity;
                        cartadd.ProductID = productID;
                        cartadd.DateCreated = DateTime.Now;
                        db.ShoppingCarts.AddObject(cartadd);
                    }
                    else
                    {
                        myItem.Quantity += Convert.ToInt32(quantity);
                    }
                    db.SaveChanges();
                }
                catch (Exception exp)
                {
                    throw new Exception("ERROR: Unable to Add Item to Cart - " +exp.Message);
                }
            }
        } 
```

`

请帮我。如果需要，我可以提供更多信息，我是此实体框架模型的新手，并遵循[此页面](http://www.asp.net/web-forms/tutorials/tailspin-spyworks/tailspin-spyworks-part-5)上的教程。

更新：我添加了主键并重新设计了整个数据库。现在错误变为：

> System.Data.UpdateException 未被用户代码处理 Message=更新条目时发生错误。有关详细信息，请参阅内部异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:43:32.363

如果实体集从数据库视图、自定义数据库查询或数据库表没有主键映射，通常会发生这种情况。

# java - 将 FORTRAN 循环转换为 Java

> ID：13761087
> 
> 赞同：0
> 
> 时间：2012-12-07T10:19:41.783
> 
> 标签：java, loops, fortran

对于一项任务，我得到了一些涉及 FORTRAN 代码的工作，但唯一的问题是我们还没有被教过，所以我不完全确定发生了什么，所以我试图将它转换为 Java试图掌握它。以下是 FORTRAN 代码：

```
L1:        DO 20 I = 1, 512
L2:           SUM(I) = 0
L3:           DO 40 J = 1, I
L4: 40         SUM(I) = SUM(I) + 1
L5: 20      CONTINUE 
```

这个想法是 L2 和 L4 都需要一个机器周期，我必须计算出循环完成需要多长时间。以下是我的 Java，我认为它至少相当接近于计算出我想要的值：

```
public static void main(String[] args) {
    int cycles = 0;
    for(int i = 1; i < 512; i++){
        cycles = cycles + 1;
        for(int j = 1; j < i; j++){
            cycles = cycles +1;
        }
    }
    System.out.println(cycles);
} 
```

这看起来正确吗？任何帮助表示赞赏。我已经从数学上考虑过了，得到了不同的答案（尽管两者都很接近），所以我不确定哪个更好。

**编辑：**我想明确一点，我并没有尝试将 FORTRAN 直接移植到 Java，而只是使用 Java 计算上面提到的周期时间。

**编辑2：**我不是要创建数组，只计算循环期间所用的周期。因为 L2 和 L4 行都需要一个循环，所以我在 Java 中交换它只是为了弄清楚所用的循环，而不是 FORTRAN 循环所做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:49:41.373

在 Fortran 语句中

```
DO 20 I = 1, 512 
```

开始一个循环，其结尾是带有标签的行`20`。同样，内部循环在标记为 的语句处结束`40`。在现代 Fortran 中，这可能看起来像

```
 DO I = 1, 512
       SUM(I) = 0
       DO J = 1, I
          SUM(I) = SUM(I) + 1
       END DO
    END DO 
```

甚至，由于 Fortran（自 Fortran 90 起）具有数组语句，并且正如 Duffymo 所观察到的，`SUM`它是一个数组

```
 DO I = 1, 512
          SUM(I) = I
       END DO 
```

或者，正如我所写，使用带有隐含 do 循环的数组构造函数：

```
SUM = [(I,I=1,512)] 
```

Fortran 将 的元素设置`I`为。`SUM``I`

因此，为了更直接地回答 OP 的问题，原始 Fortran 代码执行了 2`512`行和 4 行`1+2+3+4+...+512`。

我的观点是，编写一个 Java（或实际上任何语言）程序来计算这个总和正是计算机科学（或软件工程或......）的学生不应该做的那种事情。*前 N 个整数之和*有一个众所周知的封闭式方程（斜体是为了阐明您应该在谷歌上搜索的术语是什么），任何有抱负的软件开发人员都应该知道这个封闭式。这样一个有抱负的人应该准确地知道这种封闭形式，以便能够弄清楚在循环中调用了多少操作，例如所示的那些，而不必编写程序来进行毫无意义的迭代。

To conclude, OP's Java program would get an `F-` on any course I taught because it is not an implementation of what ought to have been implemented - a function to calculate the sum of the first `N` integers. That `F-` would be applied irrespective of the correctness or otherwise of the program. Since I'm not a teacher that's not much of a threat, but I simply wouldn't hire anyone pretending to be a software engineer without this knowledge.

# javascript - ASP.NET MVC 4 项目所需的最少 javascript 文件

> ID：13761088
> 
> 赞同：2
> 
> 时间：2012-12-07T10:19:45.120
> 
> 标签：javascript, asp.net-mvc-4

需要利用以下功能的基本 ASP.NET MVC 4 项目需要哪些 javascript 文件：

a）客户端验证（我假设捆绑中的文件`~/bundles/jqueryval`用于不显眼的javascript和不引人注目的javascript验证以及捆绑中的基本`jquery-1.7.1.js`（或其缩小版本）`~/bundles/jquery`）

b）Ajax 调用和 ASP.NET MVC 4 的远程验证（我假设`jquery.unobtrusive-ajax.js`或其缩小版本。由于在 中没有为此文件注册的包`BundleConfig.cs`，我假设如果需要我必须添加一个，并且还必须`Styles.Render`在布局中添加该包或视图）。这个对吗？

c）HTML 5（我需要`modernizr.js`吗？）

d) 文件是做什么`knockout-2.1.0.js`用的？

e) 如果我`BundleTable.EnableOptimizations = true;`在`BundleConfig.cs`文件中设置，ASP.NET MVC 会自动选择缩小版本吗？

# constants - 在 MIPS 中移动符号扩展常量

> ID：13761089
> 
> 赞同：4
> 
> 时间：2012-12-07T10:19:51.577
> 
> 标签：constants, mips, bit-shift, 16-bit, sign-extension

为什么我们在 MIPS 的分支指令中将符号扩展的 16 位常量移动 2？我对这个想法感到困惑。这种移位对符号扩展的 16 位常数有什么好处。这是图片：

![在此处输入图像描述](../Images/357d7c930e4570b206a906bc3786adbf.png)

问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T10:23:25.250

MIPS 指令是 32 位 = 4 字节，因此分支偏移指定为 4 的倍数，即分支偏移 1 = 4 字节。与以字节为单位指定偏移量相比，这可以实现更大范围的分支偏移量（因为会有两个冗余位）。当然，左移 2 与乘以 4 相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-05T15:19:00.567

每个向左移动两次的二进制数都是 4 的倍数。因此，通过将立即数向左移动两次并将其添加到下一个指令地址，将获得下一个指令地址。

# c#-4.0 - 性能问题：如何一次执行两个 lambda 表达式？使用“包含”和“任何”运算符

> ID：13761092
> 
> 赞同：4
> 
> 时间：2012-12-07T10:19:58.790
> 
> 标签：c#-4.0, lambda, asp.net-mvc-4, entity-framework-5

示例代码

```
var Ids = _db.Projects.Where(Project=>Project.Title!="test23rdoct")
    .Select (pro => pro.Id);

Expression<Func<Company, bool>> masterExpression = 
    Company => Company.Participants.Any(part => ids.Contains(part.Project.Id));

IQueryable<Object> queryEntity = _db.Companies.Where(masterExpression) 
```

上述查询执行两次。在服务器中存储 id（有时 id 超过 50k 个）。它会导致性能问题。有人可以建议如何组合这两个查询并立即执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:37:35.413

怎么样：

```
var queryEntity = _db.Companies.Where(c => c.Partipants.Any(p => p.Project.Title != "test23rdoct")); 
```

**编辑**：使用复杂的查询，您还可以拆分：

```
Func<Project, bool> projectFilter = Project => ((Compare(Convert(Project.Title), "a") > 0) AndAlso ((Convert(Project.Title) != "test23rdoct") AndAlso
(Project.Participants.Any(Participant => (Compare(Convert(Participant.ParticipantRole.Name), "Finance") > 0)) AndAlso 
(Project.Participants.Any(Participant => (Convert(Participant.Person.FirstName) != "test1")) AndAlso 
Project.Participants.Any(Participant => (Compare(Convert(Participant.Company.Name), "test") > 0)))))); 
```

然后做：

```
var queryEntity = _db.Companies.Where(c => c.Partipants.Any(p => projectFilter(p.Project)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:39:58.800

这样的使用`Join`是否适合您的需求？

```
Expression<Func<Company, bool>> masterExpression = 
    Company => Company.Participants.Join (Ids, p => p.Project.ID, id => id, (p, id) => p).Any();
IQueryable<Object> queryEntity = _db.Companies.Where(masterExpression); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:03:20.667

我得到了避免两次执行 Lambda 的解决方案。为此，我使用了这些扩展方法 Invoke() 和 AsExpandable()。它在 Linqkit dll 中可用。

```
Expression<Func<Company, bool>> masterExpression = Company => Company.Participants.Any(part => masterLamba.Invoke(part.Project));
queryEntity = _db.Companies.AsExpandable().Where(masterExpression); 
```

# sql-server - 如何在多页 SRSS 报告中添加子报告？

> ID：13761094
> 
> 赞同：0
> 
> 时间：2012-12-07T10:20:03.853
> 
> 标签：sql-server, reporting-services

我们正在为我们的报告使用 SQL Server Reporting Services。我们有一份由几个子报告组成的报告。为简单起见，我们以汽车为例。每辆车都有自己的零件清单。一对多的关系。

所以在汽车报告上，有所有的汽车信息——还有一个子报告，即零件清单。这适用于单个汽车，因为只有一个 Car.ID，可以将其作为参数传递以按特定汽车过滤零件列表。

但是，如果报告中指定了几辆汽车，我们希望每辆汽车都在它自己的页面上。有它自己的零件清单。

我环顾四周，正在努力弄清楚。我正在研究的解决方案是将所有内容都放在 List 控件中，并在每条记录后添加一个分页符。然后为数据集中的每个项目添加一个行号，然后匹配页码和子报告的行号。

我认为必须有一种更简单的方法来做到这一点，但我忽略了。或者如果没有，我该如何匹配页码和行号？我试过使用 Lookup 功能——

```
=Lookup(=Fields!Page.Value, =Globals!PageNumber, =Fields!ID.Value, "DataSet1") 
```

但是，这会返回一个错误，即 Globals!PageNumber 变量仅可用于页眉/页脚部分。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:53:47.437

没关系，我是个白痴，完全把它复杂化了。

如果其他人觉得它有用，这里是步骤。

1.  创建您的子报告，将记录的 ID 指定为参数。

2.  创建您的主要封装报告。

3.  向页面添加列表控件，转到 Tablix 属性并添加分页符。

4.  将您的子报表添加到列表控件

5.  通过使用字段集合指定标识参数的值 - 在本例中：=Fields!ID.Value

6.  测试报告，然后坐下来，不要想我试图让它变得多么复杂。

# gwt - 等待应用程序返回成功或失败（AsyncCallBack）

> ID：13761100
> 
> 赞同：1
> 
> 时间：2012-12-07T10:20:18.520
> 
> 标签：gwt, asynchronous, gwtp

例如，让我们检查下面的代码

```
private void loadUserFromServer() {
    dispatchAsync.execute(new FindLoggedUserAction(),
          new AsyncCallback<FindLoggerUserResult>() {
        @Override
        public void onFailure(Throwable caught) {
             //do something
        }

        @Override
        public void onSuccess(BuscarUsuarioLogadoResult result) {
           //dosomething with user
           result.getUser();

       }
       operationTwo();
} 
```

我的问题是，我必须执行 operationTwo(); 在 dipatcher 的一些结果之后（成功或失败）。

*这只是一个示例，假设我不能将 operationTwo() 放入 onSucess 或 onFailure()*

我真正的问题

该用户必须登录的演示者的我的 GateKeeper。

```
private UserDTO user;
@Override
public boolean canReveal() {
        if(getUser() == null){
            ShowMsgEvent.fire(eventBus,"Must Login first", AlertType.ERROR);
            return false;
        }
        return true;
    }
}
public UserDTO getUser()
{
    if(user == null) 
    {
        //call server
        loadUserFromServer();
    }
    return user;
}
 private void loadUsuarioFromServer() {
    dispatchAsync.execute(new BuscarUsuarioLogadoAction()
     ,new AsyncCallback<BuscarUsuarioLogadoResult>() {
        @Override
        public void onFailure(Throwable caught) {
             //something
        }

        @Override
        public void onSuccess(BuscarUsuarioLogadoResult result) {
            if(!(result.getDto().equals(user)))
            {
                setUsuario(result.getDto(), false); //Set user UserDTO user
                //event for update Presenter Login/Logout
                // and Label with username
                fireUserUpdateEvents();
            }
            else
            {
                setUsuario(result.getDto(), false);
            }
        }
    }); 
```

如您所见，当调用具有该 Gatekeeper 的 Presenter 并且用户为 null 时，会调用 getUser()，但是当 dispatch 执行时，该方法不会等到 Sucess 或 Failure 返回

结果：getUser() 返回 null。

在 dispatch 成功后，getUser() 返回一个 DTO。但是，如您所见，canReveal() 已经返回 false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:38:55.320

不要认为 GateKeeper 是处理您案例安全性的好方法。你将无法获得稳定的工作。您将遇到的问题：

1.  您没有处理网络连接丢失。如果您的代码已经被缓存但您需要重新加载用户，那么双重检查将是一个大问题。
2.  同步调用总是有问题的，特别是在网络连接不好的情况下。您将收到大量未响应的消息。

要处理演示者访问，最好使用revealInParent 方法。您的大多数演示者已经覆盖它，它看起来像：

```
@Override
protected void revealInParent() {
    RevealContentEvent.fire(...);
} 
```

因此，在实际下载用户数据之前，您不能触发 Reveal 事件。在您的情况下，代码将如下所示：

```
 @Override
 protected void revealInParent() {
   if(getUser() == null){
        RevealContentEvent.fire(...);
        return;
   }  
   dispatchAsync.execute(new BuscarUsuarioLogadoAction()
   ,new AsyncCallback<BuscarUsuarioLogadoResult>() {
      @Override
      public void onFailure(Throwable caught) {
           //something
      }

      @Override
      public void onSuccess(BuscarUsuarioLogadoResult result) {
        if(!(result.getDto().equals(user)))
        {
            setUsuario(result.getDto(), false); //Set user UserDTO user
            //event for update Presenter Login/Logout
            // and Label with username
            fireUserUpdateEvents();
        }
        else
        {
            setUsuario(result.getDto(), false);
        }
        RevealContentEvent.fire(...);
      }
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:27:27.753

我们也遇到过类似的问题。最好使用异步调用链。由于您不能这样做，因此您的问题有两种选择

1.  设置一个计时器，该计时器将不时检查用户是否为空，并且仅在填充用户后才返回。
2.  使用 JSNI（本机代码）并进行同步调用。但要注意这是不好的做法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:04:12.330

是的，正如 Abhijith 在上一个答案中提到的，有 2 个选项 - 1) 同步调用 - GWT 不支持。所以排除了。2) 设置定时器 - 除非用户登录，否则控制不会退出定时器循环。所以失败状态永远不会从计时器返回。这种方法仅满足您的一半需求（仅服务于成功状态）。

要解决您的问题，请尝试以下代码片段 -

```
private UserDTO user;
private CanRevealCallBack revealCallBack; 

public interface CanRevealCallBack {
     returnStatus(boolean status);
}

@Override
public void canReveal(CanRevealCallBack callBack) {
    revealCallBack = callBack;
    if(user == null){
          loadUserFromServer();       
    }
    else{
          revealCallBack.returnStatus( true );
    }
}

private void loadUsuarioFromServer() {
dispatchAsync.execute(new BuscarUsuarioLogadoAction()
 ,new AsyncCallback<BuscarUsuarioLogadoResult>() {
    @Override
    public void onFailure(Throwable caught) {
         //something
    }

    @Override
    public void onSuccess(BuscarUsuarioLogadoResult result) {
        if(!(result.getDto().equals(user)))
        {
            setUsuario(result.getDto(), false); //Set user UserDTO user
            //event for update Presenter Login/Logout
            // and Label with username
            fireUserUpdateEvents();
        }
        else
        {
            setUsuario(result.getDto(), false);
        }

        if(result.getDto() == null){
            revealCallBack.returnStatus( true );  
        }
        else{
            revealCallBack.returnStatus( false ); 
        }
    }
}); 
```

因此，您必须将revealCallback 传递给canReveal 方法。CallBack 被执行并返回异步调用成功的状态。在回调的 returnStatus 方法中，您可以使用正确的用户登录状态对逻辑进行编程。

# windows-services - 启动自定义服务时出现错误 1053

> ID：13761103
> 
> 赞同：1
> 
> 时间：2012-12-07T10:20:30.190
> 
> 标签：windows-services, tomcat6

我使用 sc.exe 为 tomcat6.exe 创建了一个服务。命令是：

```
sc.exe create "Tomcat Service" binPath= "D:\tomcat\bin\tomcat.exe 
```

创建服务成功，但在启动服务时出现以下错误。

```
Error 1053: the service did not respond to the start or control request in a timely fashion 
```

从 cmd using`sc.exe start "Tomcat Server"`和 services.msc 开始都会导致相同的错误。

任何人都可以帮助我吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:48:47.817

虽然 Tomcat.exe 是一个真正的 Windows 服务，但使用 SC 安装它还不够好。[使用“service.bat”文件或通过为 tomcat6.exe 编写您自己的命令行选项](http://tomcat.apache.org/tomcat-6.0-doc/windows-service-howto.html#Installing_services)（包括 //IS// 参数）将 Tomcat 6 安装为服务。

# c# - 重复的过程（奇怪的 问题）

> ID：13761104
> 
> 赞同：0
> 
> 时间：2012-12-07T10:20:34.170
> 
> 标签：c#, wpf

我试图阻止多次打开帮助文件。这是我正在使用的方法：

```
 public void openHelp()
    {
        int count = 0;
        string helpPath = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) + @"\MyApp\Help\eHelp.chm";

        System.Diagnostics.Process[] helpProcs = System.Diagnostics.Process.GetProcesses();
        foreach (System.Diagnostics.Process proc in helpProcs)
        {
            if (proc.MainWindowTitle == "Sample App Help")
            {
                count++;
            }
        }

        if (count == 0)
        {
            System.Diagnostics.Process.Start(helpPath);
        }
        else
        {
        }
    } 
```

这个想法是，如果您发现该进程具有相同的 MainWindowTitle，则不要启动一个新进程。但是，这并不可靠。在某些情况下，它仍然会启动该过程，即使一个已经在运行。是不是逻辑有问题？

谢谢你。

PS 当然 MainWindowTitle 是“示例应用程序帮助”，至少这是我在调试时看到的。

**更新：仅当用户最小化帮助文件时才会出现问题。所以我怀疑系统中发生了一些事情，我需要检查一些东西。有什么建议么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:36:38.310

[Process.MainWindowTitle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowtitle.aspx)中的备注部分包含以下注释：

> 主窗口是当前具有焦点的窗口；请注意，这可能不是该过程的主要窗口。您必须使用 Refresh 方法刷新 Process 对象以获取当前主窗口句柄（如果它已更改）。

这可能是您的问题的原因吗？

保留新启动的帮助查看器的进程 ID 怎么样，在启动另一个帮助查看器之前，只需检查旧的帮助查看器是否还活着。

```
int id = ...

try
{
    var proc = Process.GetProcessById(id);
}
catch
{
    // no process running with that id
} 
```

# mpi - mpi_gather 用于具有动态数组的结构

> ID：13761105
> 
> 赞同：0
> 
> 时间：2012-12-07T10:20:34.400
> 
> 标签：mpi

我有一个结构：

```
typedef struct 
{ 
double distance;
int* path;
} tour; 
```

然后我试图从所有进程中收集结果：

```
 MPI_Gather(&best, sizeof(tour), MPI_BEST, all_best, sizeof(tour)*proc_count, MPI_BEST, 0, MPI_COMM_WORLD); 
```

收集我的根目录后，看到 all_best 仅包含 1 个正常元素和其他元素中的垃圾。all_best 的类型是游览*。

MPI_BEST 的初始化：

```
 void ACO_Build_best(tour *tour,int city_count, MPI_Datatype *mpi_type /*out*/)
 {
int block_lengths[2];
MPI_Aint displacements[2];
MPI_Datatype typelist[2];
MPI_Aint start_address;
MPI_Aint address;

block_lengths[0] = 1;
block_lengths[1] = city_count;

typelist[0] = MPI_DOUBLE;
typelist[1] = MPI_INT;

MPI_Address(&(tour->distance), &displacements[0]);
MPI_Address(&(tour->path), &displacements[1]);

displacements[1] = displacements[1] - displacements[0];
displacements[0] = 0;

MPI_Type_struct(2, block_lengths, displacements, typelist, mpi_type);
MPI_Type_commit(mpi_type);
} 
```

欢迎任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:12:21.087

除了将不正确的长度传递给 之外`MPI_Gather`，MPI 实际上并不遵循指向指针的指针。使用这种结构化类型，您将发送指针的值`distance`和值`path`（本质上是一个在发送到其他进程时没有意义的地址）。如果假设`distance`本质上给出了 中的元素数量，那么您可以通过和`path`的组合来实现您的目标：`MPI_Gather``MPI_Gatherv`

首先，收集长度：

```
int counts[proc_count];

MPI_Gather(&best->distance, 1, MPI_INT, counts, 1, MPI_INT, 0, MPI_COMM_WORLD); 
```

现在`counts`填充了正确的长度，您可以继续并使用它`MPI_Gatherv`来接收所有路径：

```
int disps[proc_count];

disps[0] = 0;
for (int i = 1; i < proc_count; i++)
   disps[i] = disps[i-1] + counts[i-1];
// Allocate space for the concatenation of all paths
int *all_paths = malloc((disps[proc_count-1] + counts[proc_count-1])*sizeof(int));
MPI_Gatherv(best->path, best->distance, MPI_INT,
            all_paths, counts, disps, MPI_INT, 0, MPI_COMM_WORLD); 
```

现在你有所有路径的串联`all_paths`。`counts[i]`您可以通过获取从位置开始的元素`disps[i]`来检查或提取单个路径`all_paths`。或者你甚至可以构建一个`tour`结构数组并让它们使用已经分配和填充的路径存储：

```
tour *all_best = malloc(proc_count*sizeof(tour));
for (int i = 0; i < proc_count; i++)
{
   all_best[i].distance = counts[i];
   all_best[i].path = &all_paths[disps[i]];
} 
```

或者您可以复制这些段：

```
for (int i = 0; i < proc_count; i++)
{
   all_best[i].distance = counts[i];
   all_best[i].path = malloc(counts[i]*sizeof(int));
   memcpy(all_best[i].path, &all_paths[disps[i]], counts[i]*sizeof(int));
}
// all_paths is not needed any more and can be safely free()-ed 
```

编辑：因为我忽略了`tour`结构的定义，所以上面的代码实际上适用于：

```
struct
{
   int distance;
   int *path;
} 
```

其中`distance`包含 中重要元素的数量`path`。这与您的情况不同，但是如果没有有关如何`tour.path`分配（和调整大小）的一些信息，很难给出具体的解决方案。

# database - 将 SQL Server 数据从一个数据库迁移到另一个数据库

> ID：13761107
> 
> 赞同：0
> 
> 时间：2012-12-07T10:20:41.123
> 
> 标签：database, sql-server-2008, data-migration

我们有 2 台服务器，其数据库包含相同的表和结构，但数据不同。一个是测试环境，另一个包含生产数据。

我们希望将数据从生产数据库复制到测试数据库。实现这一目标的最佳方法是什么？

如果我先删除数据；我可以插入数据吗？或者主键会从它们所在的位置开始计算吗？为具有自动编号的表插入主键怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:31:31.250

这将取决于您的特定需求和数据结构，但这里有一些可供考虑的选项（根据我的建议优先考虑）：-

*   简单的备份和恢复将是最简单快捷的解决方案；
*   使用数据脚本工具（如[Red-Gate 的 Data Compare](http://red-gate.com/products/sql-development/sql-data-compare/)）可以解决您的需求；
*   可以开发一个 SSIS 包来在两个实例之间来回抽取数据；或者
*   `SET IDENTITY INSERT ON / OFF`使用身份种子表的命令编写您自己的脚本

# c# - 关闭客户端后wcf“远程主机强制关闭现有连接”

> ID：13761108
> 
> 赞同：4
> 
> 时间：2012-12-07T10:20:44.387
> 
> 标签：c#, wcf, tcp

关闭客户端程序后，出现错误“远程主机强制关闭现有连接”。我添加了此代码以确保在程序关闭时关闭客户端连接。

我还有一个关闭客户端的按钮，该按钮可以正常工作。

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{          
    try
    {
       client.Close();  
    }
    catch (CommunicationException ex)
    {
       client.Abort();
    }
    catch (TimeoutException ex)
    {
       client.Abort();
    }
    catch (Exception ex)
    {
       client.Abort();
       throw ex;
    }
} 
```

我在这里想念什么吗？这是堆栈跟踪：

```
< StackTrace>
bei System.ServiceModel.Channels.SocketConnection.HandleReceiveAsyncCompleted()
bei System.ServiceModel.Channels.SocketConnection.OnReceiveAsync(Object sender, SocketAsyncEventArgs eventArgs)
bei System.ServiceModel.Channels.SocketConnection.OnReceiveAsyncCompleted(Object sender, SocketAsyncEventArgs e)
bei System.Net.Sockets.SocketAsyncEventArgs.OnCompleted(SocketAsyncEventArgs e)
bei System.Net.Sockets.SocketAsyncEventArgs.FinishOperationAsyncFailure(SocketError socketError, Int32 bytesTransferred, SocketFlags flags)
bei System.Net.Sockets.SocketAsyncEventArgs.CompletionPortCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
bei System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
< /StackTrace> 
```

我希望堆栈跟踪可以帮助某人帮助我：D 我正在使用 nettcp，并且该错误仅在我关闭程序时发生。

谢谢，曼努埃尔

更新：wcf 配置：服务器：

```
 <serviceBehaviors>
        <behavior name="MyBehaviour">
          <serviceMetadata/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
 <services>
      <service name="Service" behaviorConfiguration="MyBehaviour">
        <host>
        </host>

        <endpoint address="" binding="netTcpBinding" bindingConfiguration="TCP" contract="IService"/>
        <endpoint address="mextcp" binding="mexTcpBinding" contract="IMetadataExchange"/>

      </service>
    </services>

<netTcpBinding>
        <binding name="TCP" portSharingEnabled="true" receiveTimeout="01:30:00" sendTimeout="01:10:00"
          openTimeout="00:10:00" closeTimeout="00:10:00">
         <security mode="None"/>
        </binding>
      </netTcpBinding> 
```

客户：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
               <binding name="NetTcpBinding_IService" receiveTimeout="01:30:00" sendTimeout="01:00:00" openTimeout="00:10:00" closeTimeout="00:10:00">
               <security mode="None" />
              </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://host/Service.svc"
                binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IService"
                contract="ServiceRef.IService" name="NetTcpBinding_IService" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:45:27.590

这个错误有几个可能的原因，但最常见的原因是在对等方已经关闭连接时发送数据：换句话说，应用程序协议错误。对等方也可能通过故意重置连接而不是正常关闭连接而行为不端。在任何一种情况下，除了关闭套接字并忘记对等方之外，您在运行时无能为力。但是您应该在编译之前调查原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T12:17:13.673

这个错误有很多原因。如果序列化对象的格式不正确，wcf 也会抛出这种错误。考虑一个例子：在我的要求中，我必须通过响应类对象向客户端发送主数据（例如：用户、产品、国家）。在那我添加了我使用过的通用类对象，而不是像产品，国家这样的主类对象。当时，我得到了同样的错误。

公共属性 genericObj 作为对象

```
 Public Sub New()
        MyBase.New()
        Me.genericObj = New Object
    End Sub 
```

上面的代码给我带来了同样的错误，你得到了什么。

然后我改为如下所示：

```
 <DataMember()>
    Public Property loginObject As csCSLogin

    Public Sub New()
        MyBase.New()
        Me.loginObject = New csCSLogin
    End Sub 
```

# wcf - WCF 大型 SOAP 请求异常 400 错误请求

> ID：13761111
> 
> 赞同：1
> 
> 时间：2012-12-07T10:20:48.983
> 
> 标签：wcf, soap

我正在寻找 SOAP 请求超过 64K 的 WCF 错误 400 错误请求的解决方案。我知道当我用谷歌搜索时有很多解决方案。但是，我仍然无法成功修复我的网站以使其正常工作。因此，我在这里寻求专业意见。

**客户端代码：**

```
Private Sub Calculate()
    Dim svc As New XXXService.XXXServiceClient
    Dim i As Integer
    Dim attributes As List(Of XXXService.AttributesStruct)
    Dim calculateSingleResponse As XXXService.SingleXXXResponseStruct

    Try
        attributes = New List(Of XXXService.AttributesStruct)
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_One", .AttributesValue = "1"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Two", .AttributesValue = "XXX"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Three", .AttributesValue = "1"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Four", .AttributesValue = "0"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Five", .AttributesValue = "1"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Six", .AttributesValue = "70"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Seven", .AttributesValue = "80"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Eight", .AttributesValue = "09.12.2012"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Nine", .AttributesValue = "12.12.2012"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Ten", .AttributesValue = "15.11.2012"})
        i = 0
        While i < 80
            attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Eleven[" & i.ToString & "]", .AttributesValue = "2"})
            attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Twelve[" & i.ToString & "]", .AttributesValue = "5"})
            attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Thirteen[" & i.ToString & "]", .AttributesValue = "1"})
            attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Fourteen[" & i.ToString & "]", .AttributesValue = "NA"})
            attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Fifteen[" & i.ToString & "]", .AttributesValue = "0"})
            attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Sixteen[" & i.ToString & "]", .AttributesValue = "0"})
            i = i + 1
        End While
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Seventeen", .AttributesValue = "0"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Eighteen", .AttributesValue = "0"})
        attributes.Add(New XXXService.AttributesStruct With {.AttributesKey = "A_Nineteen", .AttributesValue = "0"})
        calculateSingleResponse = _
            svc.Calculate("Test", True, "XXX", attributes.ToArray(),{"P_XXX"})                  
        svc.Close()
        Response.Write("********************************************<br/>")
        Response.Write("[ErrorCode: " & calculateSingleResponse.ErrorCode & "]<br/>")
        Response.Write("[ErrorDescription: " & calculateSingleResponse.ErrorDescription & "]<br/>")

    Catch ex As Exception
        Response.Write("EXCEPTION:" & "<br/>" & ex.Message & "<br/>" & ex.StackTrace & "<br/>")
        If Not ex.InnerException Is Nothing Then
            Response.Write("INNER EXCEPTION:" & "<br/>" & ex.InnerException.Message & "<br/>" & ex.InnerException.StackTrace)
        End If
    End Try

End Sub 
```

**客户端配置：**

```
<system.web>
  <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
  <httpRuntime maxRequestLength="2147483647" />
</system.web>
<system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IXXXService" closeTimeout="10:01:00"
      openTimeout="10:01:00" receiveTimeout="10:10:00" sendTimeout="10:01:00"
      allowCookies="false" bypassProxyOnLocal="true" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
      <behavior name="BasicHttpBehaviour_IXXXService">
          <dataContractSerializer maxItemsInObjectGraph="2147483646" />
      </behavior>
    </endpointBehaviors>
</behaviors>
<client>
  <endpoint address="http://127.0.0.1:999/XXXService.svc"
    behaviorConfiguration="BasicHttpBehaviour_IXXXService" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IXXXService" contract="XXXService.IXXXService"
    name="BasicHttpBinding_IXXXService" />
</client>
</system.serviceModel> 
```

**服务器端配置：**

```
<system.serviceModel>
    <services>
        <service name="WcfClient.XXXService">
            <endpoint address="" binding="wsHttpBinding" bindingConfiguration="BasicHttpBinding_IXXXService"
                contract="WcfClient.IXXXService" />
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
            <host>
                <timeouts closeTimeout="00:01:10" openTimeout="00:01:00" />
            </host>
        </service>
    </services>
    <bindings>
        <wsHttpBinding>
            <binding name="BasicHttpBinding_IXXXService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="true" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
            </binding>
        </wsHttpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- For wcf caller to receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
                <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:35:16.420

我自己发现了这个问题：

1.  服务器端和客户端之间的绑定必须相同，因此我将两者都更改为 basicHttpBinding
2.  服务名称区分大小写，我将“WcfClient.XXXService”更改为“wcfClient.XXXService”，现在可以使用。

希望这可以帮助其他有同样困难的人=）

# java - Java 多线程 - 埃拉托色尼筛法的基本并行示例

> ID：13761113
> 
> 赞同：4
> 
> 时间：2012-12-07T10:20:55.037
> 
> 标签：java, multithreading, parallel-processing

我想创建一个简单的并行筛选 Erastosthenes Java 程序，它至少比我在下面发布的串行版本更有效。

```
 public void runEratosthenesSieve(int upperBound) {
      int upperBoundSquareRoot = (int) Math.sqrt(upperBound);
      boolean[] isComposite = new boolean[upperBound + 1];
      for (int m = 2; m <= upperBoundSquareRoot; m++) {
            if (!isComposite[m]) {
                  System.out.print(m + " ");
               int threads=4;
               for (int n=1; n<=threads; n++) {
                  int job;
                  if (n==1) {job = m * m;} else {job = (n-1)*upperBound/threads;}
                  int upToJob = n*upperBound/threads; 
                   for (int k = job;  k <= upToJob; k += m)
                  {
                       isComposite[k] = true;
                  }               
               } 
            }
      }
      for (int m = upperBoundSquareRoot; m <= upperBound; m++)
            if (!isComposite[m])
                  System.out.print(m + " ");
  } 
```

我创建了一个循环来划分 4 个线程的工作。虽然我不知道如何从中制作实际的线程代码。如何发送变量并启动 4 个线程，每个线程都有部分工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T20:23:03.627

我可以提出以下解决方案：有 4 个工作线程和 1 个主线程。工作线程从队列中获取作业。Job 基本上是 3 个数字：from、to、step。Master 意味着 while 必须等到所有线程都完成。完成后，它会搜索下一个素数并创建 4 个工作。[使用Semaphore](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html#release%28%29)可以实现 master 和 worker 之间的同步：master 尝试获取 4 个许可，而每个 worker 完成后释放 1 个许可。

```
public class Sieve {

    // Number of workers. Make it static for simplicity.
    private static final int THREADS = 4;

    // array must be shared between master and workers threads so make it class property.
    private boolean[] isComposite;
    // Create blocking queue with size equal to number of workers.
    private BlockingQueue<Job> jobs = new ArrayBlockingQueue<Job>(THREADS);
    private Semaphore semaphore = new Semaphore(0);
    // Create executor service in order to reuse worker threads. 
    // we can use just new Thread(new Worker()).start(). But using thread pools more effective.
    private ExecutorService executor = Executors.newFixedThreadPool(THREADS);

    public void runEratosthenesSieve(int upperBound) {
        int upperBoundSquareRoot = (int) Math.sqrt(upperBound);
        isComposite = new boolean[upperBound + 1];

        // Start workers.
        for (int i = 0; i < THREADS; i++) {
            executor.submit(new Worker());
        }
        for (int m = 2; m <= upperBoundSquareRoot; m++) {
            if (!isComposite[m]) {
                System.out.print(m + " ");
                for (int n=1; n<= THREADS; n++) {
                    int from;
                    if (n == 1) {
                        from = m * m;
                    } else {
                        from = (n-1)*upperBound/THREADS;
                    }
                    Job job = new Job(from, n*upperBound/threads, m);
                    // Submit job to queue. We don't care which worker gets the job.
                    // Important only that only 1 worker get the job. But BlockingQueue does all synchronization for us.
                    jobs.put(job);
                }
                // Wait until all jobs are done.
                semaphore.acquire(THREADS);
            }
        }
        for (int i = 0; i < n; i++) {
            // put null to shutdown workers.
            jobs.put(null);
        }
        for (int m = upperBoundSquareRoot; m <= upperBound; m++) {
            if (!isComposite[m]) {
                System.out.print(m + " ");
            }
        }
    }

    private class Job {
        public int from, to, step;

        public Job(int from, int to, int step) {
            this.from = from;
            this.to = to;
            this.step = step;
        }
    }

    private Worker implements Runnable {
        while (true) {
            Job job = jobs.take();
            // null means workers must shutdown
            if (job == null) {
                return;
            }
            for (int i = job.from; i <= job.to; i += job.step) {
                isComposite[i] = true;
            }
            // Notify master thread that a job was done.
            semaphore.release();
        }
    }
} 
```

# eclipse-plugin - 将默认 CDT 编辑器集成到 Eclipse 插件中

> ID：13761114
> 
> 赞同：2
> 
> 时间：2012-12-07T10:20:56.727
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-cdt

我正在开发一个基于 Eclipse 的插件并尝试将它与 Eclipse 集成。该插件读取 xml 文件并在树查看器中显示内容。xml 文件包含与 C/C++ 源文件及其包含文件相关的信息。我已将所有内容加载到树查看器中。现在我想在选择文件时显示默认的 CDT 编辑器。我怎样才能做到这一点。

此外，我还想获得内容帮助，因为 eclipse 提供了在同一文件中定义的功能以及包含文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T07:38:04.963

定义自己的编辑器并使其成为`extends`CDT编辑器，需要检查插件是否并添加到MANIFEST.MF中的'Require-Bundle：'

如果 CDT 内容辅助还不够，您需要重新定义自己的内容。

# node.js - Express.js 和 Mongoose 模型关系 - 在模型还是路由器中？

> ID：13761115
> 
> 赞同：1
> 
> 时间：2012-12-07T10:20:57.333
> 
> 标签：node.js, model-view-controller, design-patterns, express, mongoose

在节点上使用 Express.js 和 Mongoose 构建 REST API - 我偶然发现了一个代码设计问题 - 我应该在哪里处理关系 - 在模型或路由器中？

首先，我对 MVC 等很陌生，尽管 express.js 不是一个完整的 MVC，但我想遵循最佳设计实践。

这个问题相当简单——应用程序有用户，每个用户可以有多个文档（项目、订单等）。显然，我必须至少为每个创建的文档存储用户 ID。问题是 - 我应该在哪里做？

我可以从每个路由器的会话中获取用户 ID 并将其附加到文档中，或者我可以将当​​前用户 ID 设置为全局变量，例如 app.currentUserID 并在我的模型中使用它来将 ID 附加到文档。

实际上还有更有趣的情况，一个用户可以有多个组织，我必须为用户在与特定组织操作时创建的每个文档设置组织 ID。

所以问题是：我应该在我的路由器中处理这种逻辑（快递没有这样的“控制器”）还是模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:09:58.643

在模型中进行。即使您没有创建强制关系，存储相关对象的实际 ID 仍然会更改模型，因此没有理由将逻辑留在路由器中。

MongoDB（和 Mongoose）不像关系数据库那样具有参照完整性。这意味着如果您插入与不存在的对象的关系，数据库不会给您错误。它让应用程序代码处理这些关系。

Mongoose 试图将结构引入原本非常自由的 nosql 数据库。因此，它提供了使用[ObjectId](http://mongoosejs.com/docs/api.html#types_objectid_ObjectId)模式类型创建此类关系的能力。

阅读以下 SO 答案以获取更多信息：[https ://stackoverflow.com/a/7813331/1801](https://stackoverflow.com/a/7813331/1801)

# c - 二指针法

> ID：13761118
> 
> 赞同：4
> 
> 时间：2012-12-07T10:21:20.470
> 
> 标签：c, algorithm

最近我在一个关于 codeforces 的编程竞赛中遇到了一个问题。问题标签是指使用两个指针的方法可以解决问题。究竟什么是两指针方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:53:33.643

从我在这些链接中可以看出，“双指针方法”只是指使用两个不同的索引索引到两个不同的数组（它们将数组索引称为指针，这与大多数 C 程序员使用该术语的方式有些不同） .

他们在类似问题的情况下使用它

```
if (a[i] + b[j] == X)
  // do something with i and j 
```

where`i`和`j`are 指针（在术语“指针”的一般意义上，而不是 C 数据类型意义上）。

这并不是什么非常奇特的东西，直到今天我才知道有人为它创造了一个特定的术语。

当您与大多数 C 程序员交谈时，“双指针方法”之类的术语意味着涉及双重取消引用，例如

```
x = **p; 
```

这与他们在 codeforces 链接上谈论的完全不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:24:16.240

谷歌报告“双指针方法”的点击次数为 2350，但前几页使用该短语来指代各种算法。它很少大写。可能他们指的是在其他讨论、文献等中已经建立的几个备选方案之一，这些备选方案特定于主办比赛的小组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:23:16.920

可能他们的意思是有一个指向指针的指针。

在 C 中，这通常在您需要调用函数来修改调用者拥有的指针时使用。

一个示例可能是在二叉树中插入树节点的函数：

```
void tree_insert(Node **root, int value)
{
  Node *here = *root;

  if(here == NULL)
  {
    if((*root = malloc(sizeof ***root)) != NULL)
      (*root)->value = value;
  }
  else if(value < here->value)
    tree_insert(&root->left, value);
  else if(value > here->value)
    tree_insert(&root->right, value);
} 
```

通过传递一个指向树根的指针（它本身就是一个指针），函数可以改变它。

使用它，可以通过以下方式初始化树：

```
Node *tree = NULL;

tree_insert(&tree, 42);
tree_insert(&tree, 4711); 
```

在这个例子中，我们当然也可以使用函数的返回值，但希望你明白这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T10:27:47.190

我猜你在谈论这样的事情：

```
int **allocation(int n, int m) {
   int **matrix;
   int i;

   matrix = (int **) malloc(sizeof(int *) * n);
   for (i = 0; i < n; i++)
     matrix[i] = (int *) malloc(sizeof(int) * m);

   return matrix;
} 
```

# java - 如何将用户的输入作为整数更改为另一个整数？

> ID：13761120
> 
> 赞同：0
> 
> 时间：2012-12-07T10:21:30.050
> 
> 标签：java

我正在用 Zeller 算法找到一周中的某一天。

我必须将 1 转换为 13 并将 2 转换为 14。但是我收到复制局部变量的错误。这本书显示了使用临时变量更改变量，但它不适用于 Eclipse。它显示一个错误。这是一个例子：

```
System.out.println("Enter a month 1-12: ");
int m = input.nextInt();
// Convert January to 13 and February to 14; Zeller's requirement
if (m == 1){
int temp = 13;
int m = temp;
}
else if (m == 2){
int temp = 14;
int m = temp;
} 
```

}

我刚刚开始阅读 Java 入门书籍，也许这里有简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:25:20.090

这是一个简单而智能的解决方案：

```
System.out.println("Enter a month 1-12: ");
int m = input.nextInt();
m = m + 12; 
```

此外，您得到的错误是因为两个变量 ( `m`) 具有相同的名称。

在 Java 的一个块中不能有两个同名的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:23:37.013

试试这个。您不需要再次声明`int m`它已经在声明中并将您的代码初始化为`int m = input.nextInt();`

```
System.out.println("Enter a month 1-12: ");
int m = input.nextInt();
// Convert January to 13 and February to 14; Zeller's requirement

if (m == 1){
int temp = 13;
m = temp;
}
 else if (m == 2){
int temp = 14;
 m = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T10:23:49.197

在 if else 条件之外声明变量 temp 和 m。似乎该变量被声明了两次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T10:32:07.000

尽管其他答案是正确的（您必须考虑变量的使用位置，并且仅在其`int`前面的第一个创建位置，如果您想使用更多，请阅读“变量范围”）。

我想提供一个关于重用变量的额外提示。例如，您可以这样做：

```
System.out.println("Enter a month 1-12: ");
int inputMonth = input.nextInt();

// This will hold our result.
int convertedMonth; 
// Convert January to 13 and February to 14; Zeller's requirement
if (inputMonth == 1){
   convertedMonth = 13;
}
else if (inputMonth == 2){
   convertedMonth = 14;
}
else{
   convertedMonth = inputMonth;
} 
```

这样，变量的名称总是说明其中存储的内容。与`m`在某些时候具有用户输入，然后具有转换后的输入相反。（而不是我示例中的最后一个 else，您可以决定通过立即设置默认值来开始`convertedMonth`：

```
int convertedMounth = inputMonth; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T10:31:51.240

您不能在代码中多次声明具有相同名称的变量。您一次又一次地声明“m”，而不是在其中分配值，而是在声明和分配 . 以后避免此类错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T10:26:21.987

只需在 if/else 语句中跳过对应于 m 的*int关键字。*

# c# - 在 C# 中的 Datagridview 中编辑 Combobox 项

> ID：13761124
> 
> 赞同：2
> 
> 时间：2012-12-07T10:21:49.943
> 
> 标签：c#, winforms, datagridview, datagridviewcomboboxcell

我有一个`Datagridview`Winform。其中一列是`Combobox`. 除了能够从下拉列表中选择条目之外，是否可以设置属性以便用户可以输入。

我能够`Combobox`在属性窗口中进行以下更改的项目上执行此操作：

```
AutoCompleteMode.SuggestAppend;
AutoCompleteSource.CustomSource;
DropDownStyle : Dropdown; 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T10:47:52.300

这样的事情可能会有所帮助：-

```
private void DataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    if (DataGridView1.CurrentCell.ColumnIndex == yourComboBoxColum)
    {
        ComboBox combo = e.Control as ComboBox;

        if (combo == null)
            return;

        combo.DropDownStyle = ComboBoxStyle.DropDown;
    }
} 
```

# .htaccess - htaccess 重写规则，去掉问号

> ID：13761125
> 
> 赞同：1
> 
> 时间：2012-12-07T10:21:54.543
> 
> 标签：.htaccess, mod-rewrite

假设我有以下网址：

```
http://example.com/?param 
```

我应该如何从 URL 中删除问号，即。改写

```
http://example.com/param 
```

像这样：

```
http://example.com/index.php?param 
```

这是我的代码，它不起作用：

```
RewriteEngine On
RewriteRule ^(.*)$ /index.php?$1 [P] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T10:36:52.200

需要发生两件完全不同的事情。首先，您需要从外部重定向浏览器以在 URL 地址栏中显示不同的内容。其次，当浏览器*重新发送*第二个请求时，服务器内部会重写查询字符串。您不能随意添加或删除 URL 中的东西，因为它们是*locators*。您可以创建一个新定位器，告诉浏览器使用这个新定位器而不是旧定位器，然后在服务器内部将新定位器更改回旧定位器。

请参阅[此答案的顶部以获取解释](https://stackoverflow.com/a/11711948/851273)

要使浏览器转到新 URL：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(index\.php)?\?([^&\ ]+)
RewriteRule ^ /%1? [L,R=301] 
```

这需要 URL 的请求：[http](http://example.com/?something) ://example.com/?something并将浏览器重定向到 URL：[http ://example.com/something](http://example.com/something)

然后你需要在内部重写它：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

当对[http://example.com/something](http://example.com/something)发出请求时，服务器会将 URI 重写为`/index.php?something`. 这是服务器内部的，因此浏览器对此一无所知，并且会在服务器处理 URI 时继续显示 URL [http://example.com/something](http://example.com/something)`/index.php?something`。

# sql - 将 T-SQL 查询文本插入 SQL Server 表

> ID：13761126
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:21:59.220
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

谁能帮我完成这项工作。

`[HOD_DESC] LIKE '%r%'`是一个格式化的 T-SQL 查询，我想插入到一个表中。

```
EXEC sp_s_saveReportSearch 'x= r ', '[HOD_DESC] LIKE '%r%'' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:24:54.187

只需将引号加倍即可：

```
EXEC sp_s_saveReportSearch 'x= r ','[HOD_DESC] LIKE ''%r%''' 
```

但是，我真的希望您这样做是有*充分*理由的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:24:33.867

在 SQL 字符串的引用部分周围加双引号：

```
EXEC sp_s_saveReportSearch 'x= r ','[HOD_DESC] LIKE ''%r%''' 
```

在列中，插入的值将是`[HOD_DESC] LIKE '%r%'`

# iphone - 如何以编程方式从视图控制器移动到情节提要中的其他视图控制器

> ID：13761128
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:21:56.527
> 
> 标签：iphone, objective-c

我在情节提要上创建了两个视图控制器，我想以编程方式从一个视图控制器转到另一个视图控制器。我在一个视图控制器中创建了一个按钮。我知道从一个视图控制器到另一个视图控制器很容易，只需将按钮从一个视图控制器拖到第二个视图控制器。但我想以编程方式执行此操作，因为我在按钮中有 if 和 else 条件，如果条件为真，那么我想将它移动到下一个视图控制器这是代码。

```
-(IBAction)loadView:(id)sender {
    if([username.text isEqualToString:@"adnan"] && [password.text isEqualToString:@"bhatti123"] )
    {
        // here I want to write that code which reach me to second view controller which I implement on storyboard 

    }   
    else 
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:13:58.700

将线从第一个视图控制器拖到第二个并设置 segue 的标识符：

![](../Images/b55f8b6d579901f8bd3516e83ab45bc6.png)

在`.m`文件中：

```
if([username.text isEqualToString:@"adnan"] && [password.text isEqualToString:@"bhatti123"] )
{
    [self performSegueWithIdentifier:@"nextView" sender:sender];
}   
else 
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:23:49.453

```
-(IBAction)loadView:(id)sender
{
      if([username.text isEqualToString:@"adnan"] && [password.text isEqualToString:@"bhatti123"] )
      {
         // here i want to write that code which reach me to second view controller which i implement on storyboard 
            SecondViewController *objSecondViewController = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];
            [self.navigationController pushViewController:objSecondViewController animated:YES];
            [objSecondViewController release];
     }   
     else 
     { 
        //write your else part code here
     }
} 
```

**更新 ：**

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; 
SecondViewController *objSecondViewController = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
[self.navigationController pushViewController:objSecondViewController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:26:04.287

```
SecondViewController *secondviewController = [[SecondViewController alloc] init];
[self presentviewController:secondviewController animation:YES completion:nil]; 
```

希望这可以帮助...

# java - java中以下表达式的正则表达式

> ID：13761131
> 
> 赞同：-2
> 
> 时间：2012-12-07T10:22:18.693
> 
> 标签：java, regex

以下模式的表达式可以是什么正则表达式（java）：

```
currency-symbol=digit(min length=0, max length=4).(optional)digit(min length=0, max length=4) 
```

例如：

```
eur=1

gbp=3.2

usd=40.05

AUD=0.33 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:25:20.183

```
[a-zA-Z]{3}=\d{0,4}([.]\d{0,4})? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:29:44.187

我会使用以下内容：

```
 Pattern pattern = Pattern.compile("^[a-zA-Z]{3}=\\d{0,4}(\\.\\d{0,4})?$"); 
```

# java - JScrollPane 在具有两个面板的 JFrame 中

> ID：13761133
> 
> 赞同：1
> 
> 时间：2012-12-07T10:22:20.293
> 
> 标签：java, swing, jpanel, jscrollpane

我想给我添加一个滚动条，`JTextArea`但它不会出现。我在论坛上读了很多东西，但都是徒劳的。任何建议都受到高度赞赏。提前致谢。下面是我的代码。

```
JPanel pan, pan2;
JTextArea text = new JTextArea();
JTextField fname = new JTextField(18);
JLabel filename = new JLabel("Filename");
JButton view = new JButton("View");
public FileReading() {
    setLayout(new BorderLayout());
    pan = new JPanel();
    pan2 = new JPanel();
    JScrollPane scroll = new JScrollPane(text);
    //scroll.setBounds(400,400,400,400);
    scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    text.setEditable(false);
    scroll.setViewportView(text);
    pan2.add(scroll);
    //scrollpane.setViewportView(text);
    pan2.setLayout(new BorderLayout());
    //pan2.add(scrollpane);
    pan.setLayout(new FlowLayout());
    pan.add(filename, FlowLayout.LEFT);
    pan.add(fname, FlowLayout.CENTER);
    pan.add(view, FlowLayout.RIGHT);
    view.addActionListener(this);
    fname.addActionListener(this);
    pan2.add(text, BorderLayout.CENTER);
    pan2.add(pan, BorderLayout.SOUTH);
    //BorderLayout.EAST
    //add(pan, BorderLayout.SOUTH);
    add(pan2);//, BorderLayout.CENTER
    setVisible(true);
}

public static void main(String args[]) {
    FileReading frame = new FileReading();
    frame.setTitle("Enter The Full Path to the File");
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(400,400,400,400);
    //frame.setSize(400,400);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:05:09.530

您需要将`scroll`（JScrollPane）添加到`pan2`不添加到`text`（JTextArea）试试这个

```
pan2.add(scroll, BorderLayout.CENTER); 
```

代替`pan2.add(text, BorderLayout.CENTER);`

**编辑**

`JTextArea`当我们添加`JScrollPane`到面板中时会自动添加，就像您在`text`里面添加的 (JTextArea)`JScrollPane`

这里->`JScrollPane scroll = new JScrollPane(text);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:04:50.430

可以试试这个

```
add(scroll);//, BorderLayout.CENTER
add(pan, BorderLayout.SOUTH); 
```

代替

```
add(pan2);//, BorderLayout.CENTER 
```

这样我们直接将滚动窗格添加到主框架并在下面放置其他内容

# c - FTP协议中的转义字符

> ID：13761134
> 
> 赞同：2
> 
> 时间：2012-12-07T10:22:29.267
> 
> 标签：c, ftp

我目前正在我的一个项目（ftp 客户端部分）上实现 ftp 协议。我正在关注[RFC959](https://www.rfc-editor.org/rfc/rfc959)

在这个 RFC 中，我面临一个问题：转义字符，事实上，它描述它必须使用转义字符。但我不知道具体的字符是什么。

这是 RFC 关于转义字符的部分：

```
 3.4.1\.  STREAM MODE

     The data is transmitted as a stream of bytes.  There is no
     restriction on the representation type used; record structures
     are allowed.

     In a record structured file EOR and EOF will each be indicated
     by a two-byte control code.  The first byte of the control code
     will be all ones, the escape character.  The second byte will
     have the low order bit on and zeros elsewhere for EOR and the
     second low order bit on for EOF; that is, the byte will have
     value 1 for EOR and value 2 for EOF.  EOR and EOF may be
     indicated together on the last byte transmitted by turning both
     low order bits on (i.e., the value 3).  If a byte of all ones
     was intended to be sent as data, it should be repeated in the
     second byte of the control code.

     If the structure is a file structure, the EOF is indicated by
     the sending host closing the data connection and all bytes are
     data bytes. 
```

有谁知道是什么性格？

一般来说，你有一些关于如何告诉 FTP 服务器我已经完成发送文件的线索吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T10:25:25.953

“控制代码的第一个字节将是全1，即转义字符。” - 换句话说 - 0xff

# date - 明天与前导零约会？

> ID：13761138
> 
> 赞同：0
> 
> 时间：2012-12-07T10:22:44.233
> 
> 标签：date, batch-file

我正在寻找一种以 DD/MM/YYYY 格式打印明天日期的方法。我目前正在运行以下一组 cmd：

```
@echo off

set /a d=%date:~0,2%
set /a m=%date:~3,2%
set /a y=%date:~6,4%

:loop
   set /a d+=1

   if %d% gtr 31 (
      set d=1
      set /a m+=1

      if %m% gtr 12 (
         set m=1
         set /a y+=1
      )
   )

xcopy /d:%m%-%d%-%y% /h /l "%~f0" "%~f0\" >nul 2>&1 || goto loop
echo The date tomorrow is "%d%/%m%/%y%".

pause 
```

上面的效果很好，打印“明天的日期是“8/12/2012”。但是，当小于 10 时，我需要我的 DAY 和 MONTH 值都带有前导零。我似乎无法弄清楚这是怎么回事可以的。有人能帮帮我吗？

干杯，

埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T21:48:17.927

您为日/月/年的集合获取了错误的信息。这是正确的集合

```
set /a d=%date:~7,2%
set /a m=%date:~4,2%
set /a y=%date:~10,4% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:14:25.200

您应该能够通过以下方式轻松找出哪些变量去了哪里：

```
@echo off

:testing
set /a a=%date:~0,1%
set /a b=%date:~1,1%
set /a c=%date:~2,1%
set /a d=%date:~3,1%
set /a e=%date:~4,1%
set /a f=%date:~5,1%
set /a g=%date:~6,1%
set /a h=date:~7,1%
set /a i=%date:~8,1%
set /a j=%date:~9,1%
set /a k=%date:~10,1%
set /a l=%date:~11,1%
set /a m=%date:~12,1%
set /a n=%date:~13,1%

echo.%a%-a
echo.%b%-b
echo.%c%-c
echo.%d%-d
echo.%e%-e
echo.%f%-f
echo.%g%-g
echo.%h%-h
echo.%i%-i
echo.%j%-j
echo.%k%-k
echo.%l%-l
echo.%m%-m
echo.%n%-n 
```

那么当你得到你想要的第一个值时

```
set /a var=%date:~NUM1,NUM2% 
```

其中 NUM1 是开始 NUM2 是向右移动的字符数， VAR 是您要设置的变量。

或者，使用 FOR 语句可能会更好。

我看到有人提到用户可能来自欧盟或英国。如果是这种情况，他们的日期设置将是（使用 FOR）：

```
@ECHO OFF
FOR /F "TOKENS=1* DELIMS= " %%A IN ('DATE/T') DO SET CDATE=%%B
FOR /F "TOKENS=1,2 eol=/ DELIMS=/ " %%A IN ('DATE/T') DO SET mm=%%B
FOR /F "TOKENS=1,2 DELIMS=/ eol=/" %%A IN ('echo %CDATE%') DO SET dd=%%B
FOR /F "TOKENS=2,3 DELIMS=/ " %%A IN ('echo %CDATE%') DO SET yyyy=%%B
set day=%dd%
set /a day+=01
SET date=%day%/%mm%/%yyyy%
echo.%date%
pause 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T15:12:03.817

哎呀。我想我刚刚通过添加以下内容解决了我自己的问题：

```
IF 1%d% LSS 100 SET d=0%d%
IF 1%m% LSS 100 SET m=0%m% 
```

在 xcopy 之前。所以它现在应该是：

```
@echo off

set /a d=%date:~0,2%
set /a m=%date:~3,2%
set /a y=%date:~6,4%

:loop
   set /a d+=1

   if %d% gtr 31 (
      set d=1
      set /a m+=1

      if %m% gtr 12 (
         set m=1
         set /a y+=1
      )
   )

IF 1%d% LSS 100 SET d=0%d%
IF 1%m% LSS 100 SET m=0%m%
xcopy /d:%m%-%d%-%y% /h /l "%~f0" "%~f0\" >nul 2>&1 || goto loop
echo The date tomorrow is "%d%/%m%/%y%".

pause 
```

希望对有类似问题的人有所帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:39:54.167

我测试了你的代码......它不起作用这是批处理代码的适当部分，可以满足你的需要。

```
:getdate
set /a day=%date:~7,2%
IF %day% LSS 10 set day=0%day%
rem echo.The day is - %day%

set /a month=%date:~4,2%
IF %month% LSS 10 set month=0%month%
rem echo.The month is - %month%

set /a year=%date:~10,4%
rem echo.The year is - %year%

REM Setting Month / Days
set jan=31
set feb=28
set mar=31
set apr=30
set may=31
set jun=30
set jul=31
set aug=31
set sep=30
set oct=31
set nov=30
set dec=31

REM If Months are # set Month to Days
IF %month% EQU 1 set mon=%jan%
IF %month% EQU 2 set mon=%feb%
IF %month% EQU 3 set mon=%mar%
IF %month% EQU 4 set mon=%apr%
IF %month% EQU 5 set mon=%may%
IF %month% EQU 6 set mon=%jun%
IF %month% EQU 7 set mon=%jul%
IF %month% EQU 8 set mon=%aug%
IF %month% EQU 9 set mon=%sep%
IF %month% EQU 10 set mon=%oct%
IF %month% EQU 11 set mon=%nov%
IF %month% EQU 12 set mon=%dec%

echo.Today's Date is %month%/%day%/%year%

set /a day+=1
if %day% GTR %mon% set /a month+=1
if %day% GTR %mon% set day=1
IF %day% LSS 10 set day=0%day%
IF %month% GTR 12 set month=1& set /a year+=1
IF %month% LSS 10 set month=0%month%

echo.Tomorrow's Date is %month%/%day%/%year% 
```

这将设置一个月中的天数（闰年除外）并且应该解决您遇到的任何问题，假设您还不知道这一点，但如果一个月只有 30 天，您当前的代码会将天设置为 31，无论是否据说二月，只有28天。

您必须在此处插入其他代码，因为我不确定您的循环在做什么，否则我只是更改了 d = 日、m = 月和 y = 年（mon 正在比较当月的天数）。

祝你好运，HTH

# spring - Spring：在@RequestParam 中类型不匹配时处理错误

> ID：13761141
> 
> 赞同：3
> 
> 时间：2012-12-07T10:22:53.947
> 
> 标签：spring, spring-mvc, error-handling

我有一个请求处理程序（@Controller 类中的方法），在提交表单时调用了一些 @RequestParam 参数。我有各种类型的参数，如字符串、整数、枚举和对象......当提交表单时，如果 spring 无法将参数绑定到 arg，则返回错误 400 或 500 的响应（我不明白哪种情况对应于每个错误呢）。我更愿意通过向用户发送反馈来处理这种不匹配，突出显示表单中的哪个字段不好以及为什么......

这样做的一个简单案例是将所有@RequestParams 更改为字符串，并在处理程序内进行转换，如果有任何错误，则以反馈进行响应。（错误可能从类型不匹配到无效参数变化，即年龄的负数）。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:46:46.273

`@RequestParam`最适合由您的应用程序生成参数而不是由用户输入的情况。

如果您想向用户提供反馈，最好使用带有`@ModelAttribute`和的传统表单处理方法`BindingResult`。这样，您可以执行任意验证，还可[以为类型不匹配错误提供有意义的错误消息](https://stackoverflow.com/questions/4082924/jsr-303-type-checking-before-binding)。

# android - 在 Android 的 LogCat 中查看应用程序

> ID：13761145
> 
> 赞同：0
> 
> 时间：2012-12-07T10:23:07.590
> 
> 标签：android, debugging, logcat

在 Eclipse 中，我正在调试我的应用程序，但在 LogCat 中，我在 Application 列下看不到我的应用程序。是否有一个原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:34:24.143

转到 DDMS -> 设备并选择您的模拟器。然后 logcat 将显示该设备模拟器的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:40:14.343

单击 DDMS。-> 选择设备名称。--->选择应用程序名称。

Logcat 将显示。

如果不是 GoTo Eclipse-->Window-->Reset Perspective。这是工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:19:08.580

我使用的是华为设备，这是一个已知问题。解决方案可以在这里找到： [https ://stackoverflow.com/a/12457005/753632](https://stackoverflow.com/a/12457005/753632)

# jquery - Jquery .live 多次触发

> ID：13761147
> 
> 赞同：0
> 
> 时间：2012-12-07T10:23:15.333
> 
> 标签：jquery, jquery-events

我的页面包含数据列表。当我选择并单击编辑按钮时，使用带有填充数据的 ajax 加载新表单。当我单击表单上的保存按钮时，它会触发多次。

```
 $('#datasave').live('click' , function() {
     alert("here");
 }); 
```

我在多次单击保存按钮时收到警报。第一次加载 2 次。
然后如果我重复上述内容，我会得到 3 次警报，
然后如果我重复上述内容，我会得到 4 次警报，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:24:36.547

尝试`delegate`

```
 $('body').delegate('#datasave','click' , function() {
     alert("here");
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:47:57.643

确保您只将“单击”事件绑定到按钮一次。

签入您的代码，警报数量每次都会增加，这意味着您一遍又一遍地绑定事件。

我的建议是，如果您使用“实时”方法，请在准备好文档时执行此操作：

html:

```
<input type="button" id="datasave" value="Sava Data" />​ 
```

jQuery：

```
$(document).ready(
    function(){
       $("#datasave").live(
           "click",
           function(){
              alert("Data Saved!");               
           }
       );            
    }
);​ 
```

# c++ - Eclipse CDT 调试：显示动态类型

> ID：13761152
> 
> 赞同：4
> 
> 时间：2012-12-07T10:23:26.233
> 
> 标签：c++, debugging, gdb, eclipse-cdt

我正在使用 CDT 进行 C++ 开发，它使用 gdb 进行调试。调试变量视图仅显示变量的声明类型，而不是基于 vtable 信息的实际类型。由于我严重依赖动态子类化，因此声明的类型通常不包含我需要的信息。我还必须检查实际子类的值。我发现了这个问题：[vtable in polymorphic class of C++ using gdb](https://stackoverflow.com/questions/2529561/vtable-in-polymorphic-class-of-c-using-gdb) ，据说 gdb 能够使用以下命令根据 vtable 信息打印实际类型：

```
set print object on 
```

但是如何在 Eclipse CDT 中做到这一点？

顺便说一句：这不是一个很常见的用例，因此默认情况下应该启用它吗？一旦有人使用继承和虚拟的东西，在调试过程中看到真实的对象类型是非常重要的。只显示声明的类型对我来说就像来自石器时代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T16:33:42.150

这应该从[CDT 8.1开始工作，这是](http://wiki.eclipse.org/CDT/User/NewIn81#Show_the_actual_variable_type_based_on_RTTI)[Eclipse Juno](http://www.eclipse.org/juno/projects.php)发布时的 CDT 版本。它需要 GDB 7.5.1 或更高版本才能工作。

**在具有最新 GDB 的 Linux 发行版上**

我已经尝试在 Ubuntu 14.04 上使用 CDT 打包 Eclipse 的 Juno Release 和 Luna M6 Release 版本（随附 GDB-7.7，它可以直接开箱即用。

**在 GDB 版本早于 7.5.1 的 Linux 发行版上**

如果你的发行版不提供 GDB，幸运的是它很容易构建。您可以从[http://www.gnu.org/software/gdb/download/](http://www.gnu.org/software/gdb/download/)下载源代码，只需按照 README 文件中的说明进行操作。为我构建花了不到 20 分钟。

完成后，您可以配置 Eclipse 以使用新的 GDB 版本，方法是：

*窗口*->*首选项*

从菜单栏中。

然后导航到 GDB 条目，如下所示，并将“GDB 调试器：”条目设置为新 GDB 可执行文件的路径。

![在此处输入图像描述](../Images/903c6388902150444a84254e533ccd12.png)

# python - 在 numpy 中有效地计算 parafac / CP 产品

> ID：13761159
> 
> 赞同：6
> 
> 时间：2012-12-07T10:23:55.410
> 
> 标签：python, numpy

这个问题的重点是 numpy。

我有一组矩阵，它们都共享相同的列数并且具有不同的行数。我们称它们为 A、B、C、D 等，并让它们的尺寸为 IaxK IbxK、IcxK 等

我想要的是有效地计算 IaxIbxIc...张量 P 定义如下： P(ia,ib,ic,id,ie,...)=\sum_k A(ia,k)B(ib,k)C (ic,k)...

因此，如果我有两个因素，我最终会得到简单的矩阵产品。

当然，我可以通过外部产品“手动”计算，例如：

```
 def parafac(factors,components=None):
        ndims = len(factors)
        ncomponents = factors[0].shape[1]
        total_result=array([])
        if components is None:
            components=range(ncomponents)

        for k in components:
            #for each component (to save memory)
            result = array([])
            for dim in range(ndims-1,-1,-1):
                #Augments model with next dimension
                current_dim_slice=[slice(None,None,None)]
                current_dim_slice.extend([None]*(ndims-dim-1))
                current_dim_slice.append(k)
                if result.size:
                    result = factors[dim].__getitem__(tuple(current_dim_slice))*result[None,...]
                else:
                    result = factors[dim].__getitem__(tuple(current_dim_slice))
            if total_result.size:
                total_result+=result
            else:
                total_result=result
        return total_result 
```

不过，我想要一些计算效率更高的东西，比如依赖内置的 numpy 函数，但我找不到相关函数，有人可以帮我吗？

干杯，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T23:50:19.857

非常感谢大家的回答，我花了一天的时间终于找到了解决方案，所以我把它贴在这里记录下来

此解决方案需要 numpy 1.6 并使用 einsum，这是一种强大的巫术魔法

基本上，如果您有 factor=[A,B,C,D] 与 A,B,C 和 D 矩阵具有相同的列数，那么您将使用以下方法计算 parafac 模型：

```
import numpy
P=numpy.einsum('az,bz,cz,dz->abcd',A,B,C,D) 
```

所以，一条线！

在一般情况下，我最终得到这个：

```
def parafac(factors):
    ndims = len(factors)
    request=''
    for temp_dim in range(ndims):
        request+=string.lowercase[temp_dim]+'z,'
    request=request[:-1]+'->'+string.lowercase[:ndims]
    return einsum(request,*factors) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:52:21.323

请记住，外部产品是伪装的 Kronecker 产品，您的问题应该通过这个简单的函数来解决：

```
def outer(vectors):
    shape=[v.shape[0] for v in vectors]
    return reduce(np.kron, vectors).reshape(shape)
def cp2Tensor(l,A):
    terms=[]    
    for r in xrange(A[0].shape[1]):
        term=l[r]*outer([A[n][:,r] for n in xrange(len(A))])
        terms.append(term)
    return sum(terms) 
```

cp2Tensor 获取实数列表和矩阵列表。

Jaime 评论后编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T21:54:49.943

好的，所以以下工作。首先是一个关于正在发生的事情的例子......

```
a = np.random.rand(5, 8)
b = np.random.rand(4, 8)
c = np.random.rand(3, 8)
ret = np.ones(5,4,3,8)
ret *= a.reshape(5,1,1,8)
ret *= b.reshape(1,4,1,8)
ret *= c.reshape(1,1,3,8)
ret = ret.sum(axis=-1) 
```

并且功能齐全

```
def tensor(elems) :
    cols = elems[0].shape[-1]
    n_elems = len(elems)
    ret = np.ones(tuple([j.shape[0] for j in elems] + [cols]))
    for j,el in enumerate(elems) :
        ret *= el.reshape((1,) * j + (el.shape[0],) +
                          (1,) * (len(elems) - j - 1) + (cols,))
    return ret.sum(axis=-1) 
```

# python - BeautifulSoup，你把我的 HTML 放在哪里？

> ID：13761164
> 
> 赞同：2
> 
> 时间：2012-12-07T10:24:11.107
> 
> 标签：python, parsing, beautifulsoup, urllib2, urllib

我正在使用 BS4 和 python2.7。这是我的代码的开始（感谢root）：

```
from bs4 import BeautifulSoup
import urllib2

f=urllib2.urlopen('http://yify-torrents.com/browse-movie')
html=f.read()
soup=BeautifulSoup(html) 
```

当我打印 html 时，它的内容与在 chrome 中查看的页面的来源相同。然而，当我打印汤时，它会切掉整个身体并留下这个（头部标签的内容）：

```
<!DOCTYPE html>

<html>
<head>
<title>Browse Movie - YIFY Torrents</title>
<meta charset="utf-8">
<meta content="IE=9" http-equiv="X-UA-Compatible"/>
<meta content="YIFY-Torrents.com - The official YIFY Torrents website. Here you will be able to browse and download all YIFY rip movies in excellent DVD, 720p, 1080p and 3D quality, all at the smallest file size." name="description"/>
<meta content="torrents, yify, movies, movie, download, 720p, 1080p, 3D, browse movies, yify-torrents" name="keywords"/>
<link href="http://static.yify-torrents.com/yify.ico" rel="shortcut icon"/>
<link href="http://yify-torrents.com/rss" rel="alternate" title="YIFY-Torrents RSS feed" type="application/rss+xml"/>
<link href="http://static.yify-torrents.com/assets/css/styles.css?1353330463" rel="stylesheet" type="text/css"/>
<link href="http://static.yify-torrents.com/assets/css/colorbox.css?1327223987" rel="stylesheet" type="text/css"/>
<script src="http://static.yify-torrents.com/assets/js/jquery-1.6.1.min.js?1327224013" type="text/javascript"></script>
<script src="http://static.yify-torrents.com/assets/js/jquery.validate.min.js?1327224011" type="text/javascript"></script>
<script src="http://static.yify-torrents.com/assets/js/jquery.colorbox-min.js?1327224010" type="text/javascript"></script>
<script src="http://static.yify-torrents.com/assets/js/form.js?1349683447" type="text/javascript"></script>
<script src="http://static.yify-torrents.com/assets/js/common.js?1353399801" type="text/javascript"></script>
<script>
        var webRoot = 'http://yify-torrents.com/';
        var IsLoggedIn = 0  </script>
<!--[if !IE]><!--><style type="text/css">#content input.field:focus, #content textarea:focus{border: 1px solid #47bc15 !important;}</style></meta></head></html> 
```

我哪里错了？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T15:02:15.037

我有同样的问题，这解决了我的问题：

```
soup = BeautifulSoup(html, 'html5lib') 
```

您需要安装 html5lib：

```
pip install html5lib 
```

或者

```
easy_install html5lib 
```

您可以在此处阅读有关 Beautiful Soup 的不同解析器（优缺点）的更多信息：

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)

# c# - 如何在c#中读取excel表格的注释

> ID：13761169
> 
> 赞同：5
> 
> 时间：2012-12-07T10:24:33.787
> 
> 标签：c#, excel, excel-interop

我正在尝试阅读 excel 表中的评论，但无法这样做。请帮忙。提前致谢。我的代码如下-

```
 Excel.Application appExl;
  Excel.Workbook workbook;
  Excel.Worksheet NwSheet;
  Excel.Range ShtRange;
  appExl = new Excel.Application();
  workbook = appExl.Workbooks.Open(Server.MapPath("~/" + System.Configuration.ConfigurationManager.AppSettings["ExcelFile"] + fileName), Missing.Value, Missing.Value,
  Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
  Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
  NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
  string obj = NwSheet.Range[0].Comment.Text; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:24:58.130

您基本上拥有它，但正如 Wimbo 所说，0 不是有效范围。

从 .Net 与 Office 互操作时，数组总是从一个开始。范围是一个二维数组，所以一旦你有了一个范围，就可以像这样访问该范围中左上角的单元格：

```
using Excel = Microsoft.office.Interop.Excel;
Excel.Range range = worksheet.Cells[1,1]; 
```

要访问左上角下方的单元格，您可以这样做：

```
Excel.Range range = worksheet.Cells[2,1]; //It goes row, then column 
```

要访问左上角单元格右侧的第一个单元格，请执行以下操作：

```
Excel.Range range = worksheet.Cells[1,2]; 
```

如果您在 .Net 4 或更高版本中工作，则无需指定可选参数（换句话说，您可以删除所有**Missing.Value**）。我猜你想在工作簿的第 1 页上的单元格 A1 中获得评论，我会这样做：

```
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

namespace ExcelComments
{
    class Program
    {
        static void Main()
        {
            var application = new Excel.Application();
            var workbook = application.Workbooks.Open(@"C:\Yada yada\workbook with comments.xlsx");
            Excel.Worksheet worksheet = workbook.Sheets[1];

            Excel.Range range = worksheet.Cells[1, 1];

            //Here is your comment as a string
            var myComment = range.Comment.Text();

            workbook.Close(false);
            application.Quit();

            Marshal.ReleaseComObject(application);
        }
    }
} 
```

# opencart - 从 opencart 的订单表中访问 date_added 列的最佳方法是什么？

> ID：13761175
> 
> 赞同：2
> 
> 时间：2012-12-07T10:24:47.577
> 
> 标签：opencart

我正在使用最新版本的 opencart。我想从订单表中访问 date_added 列的当前值。访问它的最佳方法是什么，以便我可以在结帐/成功页面上回显当前的 date_added 值？我知道我可以使用 mysql 查询直接从数据库中获取最新的 date_added 值。但是有没有更好的方法来做到这一点？例如，这个变量是存储在会话中的某处，还是存储在某处的数组中？如果是这样，请举例说明我可以用来执行此操作的代码。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:28:24.600

您需要根据`order_id`存储在

```
$this->session->data['order_id'] 
```

直到成功页面，此时 order_id 和所有其他订单信息被删除。因此，您需要`order_id`在此之前捕获`/catalog/controller/checkout/success.php`并从那里加载订单

建议您使用模型的`getOrder()`方法，`sale/order`而不是直接使用 SQL。只是从数据库中获取最新日期有点随意，因为在创建当前用户的时间和他们收到成功消息的时间之间可能会有订单（注意添加的日期`checkout/success`不一定是他们所在的日期）

# java - File.list() 是否有序（java）

> ID：13761176
> 
> 赞同：0
> 
> 时间：2012-12-07T10:24:50.917
> 
> 标签：java, sequence

我做了一个简单的测试

我在目录 A 中有一些文件，我多次调用 file.list()，然后打印结果

我发现结果总是有相同的序列

我想知道是什么决定了 file.list() 的顺序？

我不想对结果进行排序，所以不要告诉我使用 Comparator。

我只想知道是什么决定了 file.list() 的顺序？

我注意到 javadoc 告诉我们：

> 无法保证结果数组中的名称字符串会以任何特定顺序出现；特别是，它们不能保证按字母顺序出现。

那么为什么我每次都得到相同的有序结果呢？

有没有伊达？

谢谢

ps
操作系统：Ubuntu 10.04
android4.03

让我们更容易
选择一个操作系统：Ubuntu 10.04
并选择 java 1.6
我们只考虑一种情况，现在，为什么我每次都得到相同的结果？

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:27:07.443

> 那么为什么我每次都得到相同的有序结果呢？

因为“不保证做X”不等于“保证不做X”。碰巧的是，在您的系统上，实现*可能*总是按字母顺序返回结果。它可能取决于正在使用的文件系统。它几乎可以肯定取决于操作系统。这可能取决于您使用的 Java 版本。

重要的是它*不能*保证，所以你不应该依赖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:51:19.407

它至少取决于执行它的操作系统。我自己之前观察到，在 Windows 上它按字母顺序返回，而在 Linux 上它是相反的顺序。永远不要像文档中提到的那样依赖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:30:31.383

我认为它依赖于操作系统或文件系统。Java 查询文件系统以获取文件列表。因此结果对于 JAVA 是未知的。

因此，要确保列表按所需顺序排列，您应该对其进行排序。但是，如果您使用快速排序，那么无论如何它应该很快。通常列表已经按操作系统排序。

# java - 我进行分析时内存的奇怪行为

> ID：13761179
> 
> 赞同：2
> 
> 时间：2012-12-07T10:24:54.287
> 
> 标签：java, memory, netbeans, memory-leaks, profiling

我在进行分析时遇到了一个奇怪的问题。我解释一下，在下图中，我们可以清楚地看到最大的物体只取`35mo`. 看这个图： ![图1](../Images/ce72725d29e42533f7c9b96628c400d2.png) 。但是当我验证同时使用的内存时，我说它超过了`500mo` ![图2](../Images/f188eadf2df82c4c54e3423b4355ab87.png)

有人可以向我解释为什么最大的对象占用最大值`35mo`而使用的堆同时超过`500`？以及如何计算`heap used`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:41:37.520

可能您没有分析所有对象创建。Netbeans 中的标准配置文件设置之一仅配置 10 个对象创建中的 1 个。您的测量结果表明 35MB 是您数据的 51%。因此，您总共分析了 70MB。这大约是您测量的总堆大小的 1/10。

一般来说，如果您正在寻找有关谁是最大的记忆消耗者的线索，则仅测量部分创作就足够了。不跟踪所有创作的原因是性能。

如果您想查看所有内存的使用情况，可以执行以下操作：

在 Netbeans 6.9.1 中，这是一个设置为“跟踪每个 ... 对象分配”。您可以降低这个数字（如果十分之一不能帮助您找到问题，也不能告诉您有关应用程序的足够信息）。但是，这可能会使您的应用程序无法运行。

您还可以进行堆转储。这将不包含有关创建和删除对象的信息，但它会告诉您应用程序中当前处于活动状态的*所有对象。*

# c# - Windows 8 上的 Tahoma 字体渲染

> ID：13761181
> 
> 赞同：0
> 
> 时间：2012-12-07T10:25:00.793
> 
> 标签：c#, fonts, windows-8, gdi

有没有办法像以前的 Windows 版本一样在 Windows 8 上呈现 Tahoma 字体文本？我们在 WinForms 应用程序中使用 GDI Graphics.DrawString() 来绘制它，但结果看起来大不相同。字符间距很差。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T10:30:16.383

是的，您应该始终支持 TextRenderer 类。它修复了 Graphics.DrawString() 在低 DPI 设备（如显示器）上的严重损坏行为。TextRenderer.DrawText() 使用 GDI 的 DrawTextEx() winapi 函数，与许多本地 Windows 程序用于呈现文本的函数相同。

以下示例表格很好地证明了两者之间的区别：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
    }
    protected override void OnPaint(PaintEventArgs e) {
        var s = "Hiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii";
        e.Graphics.DrawString(s, this.Font, Brushes.Black, 0, 0);
        TextRenderer.DrawText(e.Graphics, s, this.Font, new Point(0, this.Font.Height), Color.Black);
        base.OnPaint(e);
    }
} 
```

在看起来像这样的 96 dpi 显示器上：

![在此处输入图像描述](../Images/d0150f960e852f1a4047d9f4952b49fc.png)

# xaml - Windows 8 App，改变 BackButtonStyle 的颜色

> ID：13761182
> 
> 赞同：5
> 
> 时间：2012-12-07T10:25:00.800
> 
> 标签：xaml, windows-8, windows-store-apps

我正在创建一个默认情况下请求黑暗主题的 Windows 商店应用程序。这很好，除了其中一页需要是白色的。我将所有内容放在网格中并将背景更改为白色.. 一切正常，除了我的导航按钮样式为：

```
<Button Foreground="Black" x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}" /> 
```

{StaticResource BackButtonStyle} 返回一个白色按钮（由于我的 Apps Dark 主题），因此后退按钮在白色背景下是不可见的。

如何将此返回按钮的颜色更改为黑色？即，它会在黑色圆圈内显示一个黑色箭头。

我尝试在 StandardStyles.xaml 中创建自己的样式，但没有任何乐趣：

```
<Style x:Key="PortraitBackButtonStyle" TargetType="Button" BasedOn="{StaticResource BackButtonStyle}">
    <Setter Property="Margin" Value="26,0,26,36"/>
</Style> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:49:07.073

将此样式放入`StandardStyles.xaml`文件中并在后退按钮中使用

```
<Color x:Key="Color1">#ffffff</Color>
<Color x:Key="Color2">#000000</Color>
<Color x:Key="Color3">#666666</Color>

<SolidColorBrush x:Key="MyBackButtonNormalBrush" Color="{StaticResource Color2}"/>
<SolidColorBrush x:Key="MyBackButtonBackgroundBrush" Color="{StaticResource Color1}"/>
<SolidColorBrush x:Key="MyBackButtonHoverBrush" Color="{StaticResource Color3}"/>

<Style x:Key="MyBackButtonStyle" TargetType="Button">
    <Setter Property="MinWidth" Value="0"/>
    <Setter Property="Width" Value="48"/>
    <Setter Property="Height" Value="48"/>
    <Setter Property="Margin" Value="36,0,36,36"/>
    <Setter Property="VerticalAlignment" Value="Bottom"/>
    <Setter Property="FontFamily" Value="Segoe UI Symbol"/>
    <Setter Property="FontWeight" Value="Normal"/>
    <Setter Property="FontSize" Value="56"/>
    <Setter Property="AutomationProperties.AutomationId" Value="BackButton"/>
    <Setter Property="AutomationProperties.Name" Value="Back"/>
    <Setter Property="AutomationProperties.ItemType" Value="Navigation Button"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid x:Name="RootGrid">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource MyBackButtonHoverBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NormalGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource MyBackButtonNormalBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource MyBackButtonNormalBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <DoubleAnimation
                                        Storyboard.TargetName="ArrowGlyph"
                                        Storyboard.TargetProperty="Opacity"
                                        To="1"
                                        Duration="0"/>
                                    <DoubleAnimation
                                        Storyboard.TargetName="NormalGlyph"
                                        Storyboard.TargetProperty="Opacity"
                                        To="0"
                                        Duration="0"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="Visibility">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="FocusVisualWhite"
                                        Storyboard.TargetProperty="Opacity"
                                        To="1"
                                        Duration="0"/>
                                    <DoubleAnimation
                                        Storyboard.TargetName="FocusVisualBlack"
                                        Storyboard.TargetProperty="Opacity"
                                        To="1"
                                        Duration="0"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused" />
                            <VisualState x:Name="PointerFocused" />
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Grid Margin="-1,-16,0,0">
                        <TextBlock x:Name="BackgroundGlyph" Text="&#xE0A8;" Foreground="{StaticResource MyBackButtonBackgroundBrush}"/>
                        <TextBlock x:Name="NormalGlyph" Text="{StaticResource BackButtonGlyph}" Foreground="{StaticResource MyBackButtonNormalBrush}"/>
                        <TextBlock x:Name="ArrowGlyph" Text="&#xE0A6;" Foreground="{StaticResource MyBackButtonBackgroundBrush}" Opacity="0"/>
                    </Grid>
                    <Rectangle
                        x:Name="FocusVisualWhite"
                        IsHitTestVisible="False"
                        Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}"
                        StrokeEndLineCap="Square"
                        StrokeDashArray="1,1"
                        Opacity="0"
                        StrokeDashOffset="1.5"/>
                    <Rectangle
                        x:Name="FocusVisualBlack"
                        IsHitTestVisible="False"
                        Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}"
                        StrokeEndLineCap="Square"
                        StrokeDashArray="1,1"
                        Opacity="0"
                        StrokeDashOffset="0.5"/>

                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-11T00:01:24.197

如果您的背景是白色的，您可以在后退按钮属性中编写以下代码：

```
 <Button x:Name="backButton" Margin="39,59,39,0" Command="{Binding NavigationHelper.GoBackCommand, ElementName=pageRoot}"
  Style="{StaticResource NavigationBackButtonNormalStyle}"
                            VerticalAlignment="Top"
                            AutomationProperties.Name="Back"
                            RequestedTheme="Light"
                            AutomationProperties.AutomationId="BackButton"
                            AutomationProperties.ItemType="Navigation Button"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:05:03.577

有一个明显的解决方案——重新设置控件样式。但是您不希望每次需要向 UI 添加控件时都键入样式名称。此外，您通常在深色背景上使用输入控件，因此您甚至不需要两种不同的样式。在这种情况下，可以使用不同的方法。

### 解决方案：

一、打开：

> C:\Program Files (x86)\Windows Kits\8.0\Include\winrt\xaml\design\themeresources.xaml

并搜索“Dark” ResourceDictionary 声明。复制所有与 buttona 关联的 SolidColorBrush 对象定义，最后将所有画笔粘贴到资源字典中，即可使用。

**来源：：**在[XAML Metro 应用程序中混合主题](http://lunarfrog.com/blog/2012/06/21/winrt-xaml-themes/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T13:31:35.703

要应用浅色主题/深色主题（根据您的要求），只需将以下代码复制到 StandardStyles.xaml 并更改相应的分辨率

1) 浅色主题

```
 <SolidColorBrush x:Key="AppBarBackgroundThemeBrushLight" Color="#FFFFFFFF" />
<SolidColorBrush x:Key="AppBarBorderThemeBrushLight" Color="#FFFFFFFF" />
<SolidColorBrush x:Key="AppBarItemBackgroundThemeBrushLight" Color="Transparent" />
<SolidColorBrush x:Key="AppBarItemDisabledForegroundThemeBrushLight" Color="#66000000" />
<SolidColorBrush x:Key="AppBarItemForegroundThemeBrushLight" Color="#FF000000" />
<SolidColorBrush x:Key="AppBarItemPointerOverBackgroundThemeBrushLight" Color="#3D000000" />
<SolidColorBrush x:Key="AppBarItemPointerOverForegroundThemeBrushLight" Color="#FF000000" />
<SolidColorBrush x:Key="AppBarItemPressedForegroundThemeBrushLight" Color="#FFFFFFFF" /> 
```

对于黑暗主题

```
 <SolidColorBrush x:Key="AppBarBackgroundThemeBrushDark" Color="{StaticResource SystemColorButtonFaceColor}" />
  <SolidColorBrush x:Key="AppBarBorderThemeBrushDark" Color="{StaticResource SystemColorHighlightColor}" />
  <SolidColorBrush x:Key="AppBarItemBackgroundThemeBrushDark" Color="{StaticResource SystemColorButtonFaceColor}" />
  <SolidColorBrush x:Key="AppBarItemDisabledForegroundThemeBrushDark" Color="{StaticResource SystemColorGrayTextColor}" />
  <SolidColorBrush x:Key="AppBarItemForegroundThemeBrushDark" Color="{StaticResource SystemColorButtonTextColor}" />
  <SolidColorBrush x:Key="AppBarItemPointerOverBackgroundThemeBrushDark" Color="{StaticResource SystemColorHighlightColor}" />
  <SolidColorBrush x:Key="AppBarItemPointerOverForegroundThemeBrushDark" Color="{StaticResource SystemColorHighlightTextColor}" />
  <SolidColorBrush x:Key="AppBarItemPressedForegroundThemeBrushDark" Color="{StaticResource SystemColorButtonFaceColor}" /> 
```

并相应地改变

```
AppBarItemForegroundThemeBrush to AppBarItemForegroundThemeBrushLight/AppBarItemForegroundThemeBrushDark 
```

[请参阅这些链接以在此处](http://lunarfrog.com/blog/2012/06/21/winrt-xaml-themes/)和[此处](https://stackoverflow.com/questions/15031365/how-do-i-mix-light-and-dark-themes-in-a-c-xaml-windows-store-metro-ui-app)自定义应用栏

它会帮助你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-07T11:48:58.240

在代码中，您可以在控件初始化后通过代码更改样式。

干杯马克

# c# - WindowsPrincipal.IsInRole 考虑组内的组？

> ID：13761184
> 
> 赞同：1
> 
> 时间：2012-12-07T10:25:03.740
> 
> 标签：c#, .net, windows, iprincipal

如果我有一个属于一个组的主体，该组属于一个组，该组属于一个添加到构建它的角色“管理员”的组，是否会调用`principal.IsInRole(WindowsBuiltInRole.Administrator)`返回 true？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:32:23.137

根据提供的信息，它将返回 true yes。然而，正如 Blam 所说，只需一项测试就足以确定行为是什么

# ruby-on-rails - Rails：嵌套视图或局部视图或..？

> ID：13761185
> 
> 赞同：0
> 
> 时间：2012-12-07T10:25:05.503
> 
> 标签：ruby-on-rails, model-view-controller, partials, theming

我是 Ruby on Rails 的新手，我来自 Drupal/PHP 背景。

我正在尝试做一些简单的事情。一些页面的“静态”控制器，如关于我们、免责声明等，以及视频的“视频”控制器。

整个应用程序具有相同的外观。我试图弄清楚如何避免重复视图。

在drupal中，主题是这样的：html.tpl.php（渲染page.tpl.php）-page.tpl.php（渲染多个block.tpl.php）-block.tpl.php（渲染更多嵌套的tpls或一些html由主题函数生成）。

我觉得这很棒。

在rails中，我读到的是application.html.erb（我认为它类似于Drupal的html.tpl.php，因为它通常包含整个应用程序中可用的样式表、js等）称为“布局”。然后是“视图”，它在此布局中“产生”内容。我们在控制器中指定视图，或者它会自动获取一个。我认为视图是 Drupal 的“page.tpl.php”。

我的大部分网站都使用相同的结构，即页眉、顶部菜单、内容、右侧边栏、页脚。但是每个区域的内容会根据路径而变化。所以我正在考虑这样做：

*   “静态”和“视频”都将调用相同的视图，具有不同的变量值，即内容区域和侧边栏的值。
*   此视图将使用“渲染”来渲染另一个视图，其中包含从控制器传递的变量子集，即它将渲染内容和侧边栏视图。
*   如果需要，这些视图将呈现更多视图，依此类推。

我读到的另一个是partials。我似乎无法区分在另一个视图中渲染视图和渲染部分视图。

哪种方法更好？还是有更好的“Rails Way”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:29:52.153

这是一个相当大的话题，但编辑过的亮点是

如果您想在每个页面上重复内容，例如标题或导航栏，则将其放入 layouts/application.html.erb

如果您想让您的视图与特定于该页面的内容保持一致，那么您可以使用部分。通常在视图中，我创建一个名为 shared 的文件夹，然后将我的部分文件放在那里。例如，如果我保存一个名为 _form.html.erb 的部分（确保在文件名的开头使用下划线命名部分），然后我会在我的视图中调用它

```
<%= render 'shared/form' %> 
```

你也可以在布局/应用程序文件中使用部分来保持干净

这只是我的做法，我相信更有经验的 Rails 人有更好的方法

希望对你有帮助，还有什么问题就问吧

# mysql - MySQL中每个区域的表

> ID：13761189
> 
> 赞同：1
> 
> 时间：2012-12-07T10:25:12.100
> 
> 标签：mysql, sql, database

有四个地区的记录总数超过一百万。我应该创建一个包含区域列的表还是为每个区域创建一个表并将它们组合起来以获得最高排名？

如果我结合所有四个区域，我的列都不会是唯一的，所以我还需要`id`为我的主键添加一个列。否则，`name`, `accountId`&`characterId`将是候选键，或者我应该只是添加一`id`列。

```
Table:
----------------------------------------------------------------
| name | accountId | iconId | level | characterId | updateDate |
---------------------------------------------------------------- 
```

**编辑：** 我应该考虑按以下方式对表进行分区`region_id`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:36:30.960

因为所有记录都与特定区域相关，所以 3NF（例如所有区域）中包含 regionId 和其他属性的单个数据库表应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:01:57.203

与数据库设计一样，正确答案通常是“**取决于**”。

首先，（恕我直言）一个好的主键应该属于数据库，而不是用户:)
所以，如果`accountId`和`characterId`是用户可编辑的或显眼地显示给用户，它们不应该用作表的主键(s) 无论如何。使用`name`（或任何其他用户生成的字符串）作为密钥只是自找麻烦。

至于地区，试着预测这些记录将如何使用。

*   大多数查询将仅使用单个区域，还是大多数查询将跨区域使用数据？
*   不同地区的模式是否有可能出现分歧？
*   相似的数据会有不同的使用场景吗？（例如不同地区的不同电话号码模式）

最重要的是，这两种方法都行得通，让您的数据告诉您哪种方法更易于管理。

# opencl - local_work_size 对性能的影响及其原因

> ID：13761191
> 
> 赞同：2
> 
> 时间：2012-12-07T10:25:14.097
> 
> 标签：opencl, pyopencl

大家好......
我是opencl的新手，并试图探索更多@它。

openCL 程序中 local_work_size 的工作是什么以及它对性能的影响。

我正在研究一些图像处理算法，对于我的 openCL 内核，我给出了

```
size_t local_item_size = 1; 
size_t global_item_size = (int) (ceil((float)(D_can_width*D_can_height)/local_item_size))*local_item_size; // Process the entire lists
ret = clEnqueueNDRangeKernel(command_queue, kernel, 1, NULL,&global_item_size, &local_item_size, 0, NULL, NULL); 
```

当我改变时，对于相同的内核

```
 size_t local_item_size = 16; 
```

保持一切不变。

我的性能提高了大约 4-5 倍。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:10:57.747

**local-work-size**又名**work-group-size**是每个**work-group中****工作项**的数量。

 **每个工作组都在一个**计算单元**上执行，该计算单元能够处理一堆工作项，而不仅仅是一个。

因此，当您使用太小的组时，您会浪费一些计算能力，并且只能在计算单元级别进行粗略的并行化。

但是，如果您在一个组中有太多工作项，您也可能会失去一些并行化的机会，因为某些计算单元可能不会被使用，而其他计算单元会被过度使用。

因此，您可以使用许多值进行测试以找到最佳值，或者让 OpenCL通过将**NULL**作为本地工作大小来为您**选择一个好的值。**

 **PS：我有兴趣了解 OpenCL 选择与您以前的值相比的性能，所以请您进行测试并发布结果。谢谢 ：）****

# javafx-2 - JavaFx 2.2 ColorPicker 无法选择某些颜色

> ID：13761199
> 
> 赞同：2
> 
> 时间：2012-12-07T10:25:31.930
> 
> 标签：javafx-2, color-picker

我最近迁移到 JavaFx 2.2.3 并在那里发现了一个新组件 ColorPicker。乍一看，与我为旧版本的 JavaFx（受此组件影响）编写的组件相比，它看起来很棒，它既简单又糟糕。但是当我开始使用它时，我无法使用组件选择一些颜色。例如，我想选择红色（#FF0000）但无法做到。它既不存在于预定义的颜色中，我也无法从自定义颜色的弹出对话框中选择它。它是一个错误吗？也许我做错了什么。更具体地说：如何使用此组件选择#FF0000 颜色？

# javascript - 如何使用 jquery 创建一个“导航”来隐藏和显示同一页面上的内容？

> ID：13761205
> 
> 赞同：1
> 
> 时间：2012-12-07T10:25:59.530
> 
> 标签：javascript, jquery, list

***期望的情况***：所有的测验内容从一开始就被隐藏了，我有一个带有 li 项目的 ul 列表作为我的“测验问题导航”，它应该一次显示 1 个测验问题（带有无线电 btns 选项和 div 响应）单击“问题导航”时。

***当前情况***：我正在考虑使用一个数组来检查相同的 attr 名称“qns1”，但我不熟悉 JavaScript 语法

**Javascript**

```
$(".span9").hide(); 
```

**HTML**

```
<ul class="quiznav">
     <li>Q1</li><br>
     <li>Q2</li><br>
     <li>Q3</li><br>
</ul>

<div class="span9">

        <div class="qnstitle" name="qns1">Q1\. Lorem ipsum dolor sit amet</div>
        <label class="radio">
            <input name="qns1" class="radioBtn" type="radio" value="A">a) asdf
        </label>
        <div class="resp" data-qns="qns1">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris aliquet ligula mi. Aenean eu magna quam. In ultrices nisi non tellus molestie ut mattis turpis convallis. </p>
        </div>

        <label class="radio">
            <input name="qns1" class="radioBtn" type="radio" value="B">b) bsdf
        </label>
        <div class="resp" data-qns="qns1">
            <p>Proin porta, ante eu feugiat facilisis, nulla erat porta dui, sed pellentesque orci sapien quis libero. Nam nec nibh metus, nec luctus massa.</p>
        </div>

        <label class="radio">
            <input name="qns1" class="radioBtn" type="radio" value="C">c) csdf
        </label>
        <div class="resp" data-qns="qns1">
            <p>Donec metus nibh, pharetra vitae semper id, blandit non lorem. Fusce ut metus a dui egestas congue quis quis augue. Suspendisse sed nunc sed nulla volutpat pharetra at vel purus.</p>
        </div>

        <br>

        <div class="qnstitle" name="qns2">Q2\. Nunc sed aliquet enim.</div>
        <label class="radio">
            <input name="qns2" class="radioBtn" type="radio" value="A">a) azzzddsaf
        </label>
        <div class="resp" data-qns="qns2">
            <p>Donec metus nibh, pharetra vitae semper id, blandit non lorem.</p>
        </div>

        <label class="radio">
            <input name="qns2" class="radioBtn" type="radio" value="B">b) bzzzzddafdsf
        </label>
        <div class="resp" data-qns="qns2">
            <p>Aenean eu metus id dui tristique aliquam. Pellentesque non scelerisque nisi. Integer a nibh orci</p>
        </div>

        <label class="radio">
            <input name="qns2" class="radioBtn" type="radio" value="C">c) czzdfasdf
        </label>
        <div class="resp" data-qns="qns2">
            <p>Pellentesque turpis libero, consectetur nec dictum eu, accumsan a sapien. Integer eget ultrices risus. Pellentesque vel orci purus.</p>
        </div>

<div class="qnstitle" name="qns3">Q3\. Nunc sed aliquet enim.</div>
        <label class="radio">
            <input name="qns3" class="radioBtn" type="radio" value="A">a) azzzddsaf
        </label>
        <div class="resp" data-qns="qns3">
            <p>Donec metus nibh, pharetra vitae semper id, blandit non lorem.</p>
        </div>

        <label class="radio">
            <input name="qns3" class="radioBtn" type="radio" value="B">b) bzzzzddafdsf
        </label>
        <div class="resp" data-qns="qns3">
            <p>Aenean eu metus id dui tristique aliquam. Pellentesque non scelerisque nisi. Integer a nibh orci</p>
        </div>

        <label class="radio">
            <input name="qns3" class="radioBtn" type="radio" value="C">c) czzdfasdf
        </label>
        <div class="resp" data-qns="qns3">
            <p>Pellentesque turpis libero, consectetur nec dictum eu, accumsan a sapien. Integer eget ultrices risus. Pellentesque vel orci purus.</p>
        </div>
    </div><!-- end of span9 --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:49:37.043

是的，将每个问题都包含在 a`div`中是必要的。这可能是您正在寻找的效果，根据导航的点击事件淡出当前问题并淡入新问题。该 API`.delay()`用于简化问题的转换。

```
$(".btn").click(function(){    
    $('.qns').fadeOut();
    $('#qns' + $(this).html()).delay(450).fadeIn(); 
}); 
```

在此处查看示例[JSFIDDLE](http://jsfiddle.net/bsXwn/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:37:19.373

您应该首先将每个问题包装起来，`div`然后您可以使用 jQuery`toggle()`根据问题导航的点击事件来显示和隐藏问题。

```
$(".btn").click(function(){
    $("#" + $(this).text()).toggle("fast");
});​ 
```

请参阅此处的示例**[FIDDLE](http://jsfiddle.net/aanred/E46BH/)**。

# jquery - 如何创建 facebook 通知标题栏？

> ID：13761209
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:26:06.173
> 
> 标签：jquery, ajax, facebook-graph-api, user-interface

我试图了解从数据库以推送方式获取通知的必要工具。facebook 或 stackoverflow 本身可能是一种很好的风格：D

1 - 浏览器和数据库之间的通信是如何工作的？
2-如何只刷新页面的一部分而不刷新所有页面？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:13:16.330

您正在寻找通常称为咆哮的东西。它们有各种形状和大小，并且有很多不同的方法来实现它们。以下是我从中学到的一些：

[Eric Hynds JQuery UI 通知小部件](http://www.erichynds.com/examples/jquery-notify/)

[咆哮](http://stanlemon.net/pages/jgrowl)

[堆栈溢出样式通知栏](http://blog.nerdstogeeks.com/2011/01/create-stackoverflow-kind-of.html)

至于触发通知，在加载时触发它然后进行[长轮询](https://stackoverflow.com/questions/9103490/ajax-long-polling)可能是确保它工作的有效方法。在我的应用程序中，我构建了一个“咆哮者”功能，我执行上述两项并在完成某些事件时触发......一旦在一起，它就可以很好地运行，既响应又及时。

最后，要仅刷新页面的单个部分，您只需在 ajax 调用后使用内部 HTML 或通过 Javascript 更改值。有一百万个 jQuery 内容替换教程将指导您上路。

# jquery - 使用jquery隐藏sharepoint中的一个特定行

> ID：13761212
> 
> 赞同：0
> 
> 时间：2012-12-07T10:26:12.383
> 
> 标签：jquery, css, sharepoint

我在 sharepoint 2010 中遇到以下问题。出于某种原因，_cts 文件夹显示在所有文档库中，我已经研究了几天，但我没有找到任何原因，所以我现在最好的解决方案是隐藏整行。

请在此处查看屏幕截图。

但是我不确定如何通过 jquery 隐藏它

[http://postimage.org/image/6qego8xg3/](http://postimage.org/image/6qego8xg3/)

```
<TABLE border=0 cellSpacing=0 cellPadding=0 width="100%" xmlns:ddwrt2="urn:frontpage:internal" xmlns:SharePoint="Microsoft.SharePoint.WebControls" xmlns:__designer="http://schemas.microsoft.com/WebParts/v2/DataView/designer" xmlns:asp="http://schemas.microsoft.com/ASPNET/20" xmlns:d="http://schemas.microsoft.com/sharepoint/dsp" xmlns:x="http://www.w3.org/2001/XMLSchema">
<SCRIPT type=text/javascript>
      ctx = new ContextInfo();

      var existingHash = '';
      if(window.location.href.indexOf("#") > -1){
        existingHash = window.location.href.substr(window.location.href.indexOf("#"));
      }
      ctx.existingServerFilterHash = existingHash;
      if (ctx.existingServerFilterHash.indexOf("ServerFilter=") == 1) {
        ctx.existingServerFilterHash = ctx.existingServerFilterHash.replace(/-/g, '&').replace(/&&/g, '-');
        var serverFilterRootFolder = GetUrlKeyValue("RootFolder", true,ctx.existingServerFilterHash);
        var currentRootFolder = GetUrlKeyValue("RootFolder", true);
        if("" == serverFilterRootFolder && "" != currentRootFolder)
        {
          ctx.existingServerFilterHash += "&RootFolder=" + currentRootFolder;
        }
        window.location.hash = '';
        window.location.search = '?' + ctx.existingServerFilterHash.substr("ServerFilter=".length + 1);
      }

          ctx.listBaseType = 1;

      ctx.NavigateForFormsPages = false;
      ctx.listTemplate = "30009";
      ctx.listName = "{55607631-9F43-4F52-B759-E9003D258CC0}";
      ctx.view = "{46C9A371-28FF-4003-AA75-46098AA5104B}";
      ctx.listUrlDir = "/apps/x/DocsOut";
      ctx.HttpPath = "http://sharepointluis/apps/x/_vti_bin/owssvr.dll?CS=65001";
      ctx.HttpRoot = "http://sharepointluis/apps/x";
      ctx.imagesPath = "/_layouts/images/";
      ctx.PortalUrl = "";
      ctx.SendToLocationName = "";
      ctx.SendToLocationUrl = "";

          ctx.RecycleBinEnabled = 1;

      ctx.OfficialFileName = "";
      ctx.OfficialFileNames = "";
      ctx.WriteSecurity = "1";
      ctx.SiteTitle = "x";
      ctx.ListTitle = "Outgoing Document";
      if (ctx.PortalUrl == "") ctx.PortalUrl = null;
      ctx.displayFormUrl = "http://sharepointluis/apps/x/_layouts/listform.aspx?PageType=4&ListId={55607631-9F43-4F52-B759-E9003D258CC0}";
      ctx.editFormUrl = "http://sharepointluis/apps/x/_layouts/listform.aspx?PageType=6&ListId={55607631-9F43-4F52-B759-E9003D258CC0}";
      ctx.isWebEditorPreview = 0;
      ctx.ctxId = 9;
      ctx.isXslView = true;

      if (g_ViewIdToViewCounterMap["{46C9A371-28FF-4003-AA75-46098AA5104B}"] == null)
          g_ViewIdToViewCounterMap["{46C9A371-28FF-4003-AA75-46098AA5104B}"]= 9;
      ctx.CurrentUserId = 1073741823;

        ctx.verEnabled = 1;

        ctx.ContentTypesEnabled = true;

      ctx9 = ctx;
      g_ctxDict['ctx9'] = ctx;
    </SCRIPT>

<SCRIPT type=text/vbscript>
    On Error Resume Next
    Set EditDocumentButton = CreateObject("SharePoint.OpenDocuments.3")
    If (IsObject(EditDocumentButton)) Then
        fNewDoc3 = true
    Else
        Set EditDocumentButton = CreateObject("SharePoint.OpenDocuments.2")
        If (IsObject(EditDocumentButton)) Then
            fNewDoc2 = true
        Else
            Set EditDocumentButton = CreateObject("SharePoint.OpenDocuments.1")
        End If
    End If    
    fNewDoc = IsObject(EditDocumentButton)
      </SCRIPT>

<TBODY>
<TR>
<TD><IFRAME style="DISPLAY: none" id=FilterIframe9 height=0 src="javascript:false;" width=0 name=FilterIframe9 FilterLink="?"></IFRAME>
<TABLE id=onetidDoclibViewTbl0 class=ms-listviewtable border=0 cellSpacing=0 summary="Outgoing Document " cellPadding=1 width="100%" xmlns:o="urn:schemas-microsoft-com:office:office" o:WebQuerySourceHref="http://sharepointluis/apps/x/_vti_bin/owssvr.dll?CS=65001&amp;XMLDATA=1&amp;RowLimit=0&amp;View={46C9A371-28FF-4003-AA75-46098AA5104B}" handleDeleteInit="true">
<TBODY>
<TR class="ms-viewheadertr ms-vhltr" vAlign=top>
<TH class=ms-vh-icon scope=col><INPUT class=s4-selectAllCbx title="Select or deselect all items" onclick=ToggleAllItems(event,this,9) value="" type=checkbox></TH>
<TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
<DIV class=ms-vh-div name="Edit" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=Edit&amp;SortDir=Asc" ResultType="" FieldType="Computed" DisplayName="Edit" CTXNum="9" FilterDisableMessage="" Filterable="FALSE" FilterDisable="" SortDisable="" Sortable="FALSE">Edit</DIV></TH>
<TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
<DIV class=ms-vh-div name="DocIcon" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=DocIcon&amp;SortDir=Asc" ResultType="" FieldType="Computed" DisplayName="Type" CTXNum="9" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortDocIcon onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=DocIcon&amp;SortDir=Asc">Type<IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
<DIV class=s4-ctx><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TH>
<TH oncontextmenu="" class=ms-vh2 onmouseover=OnChildColumn(this) onmouseout="" onclick="" scope=col noWrap>
<DIV class=ms-vh-div name="LinkFilename" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=LinkFilename&amp;SortDir=Asc" ResultType="" FieldType="Computed" DisplayName="Name" CTXNum="9" FilterDisableMessage="" Filterable="FALSE" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortLinkFilename onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=LinkFilename&amp;SortDir=Asc">Name<IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
<DIV style="LINE-HEIGHT: 32px; MARGIN: 0px; HEIGHT: 32px; TOP: 0px; LEFT: 278px" class=s4-ctx shown="false"><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"><IMG style="VISIBILITY: hidden" alt="Open Menu" src="/_layouts/images/ecbarw.png" width=7 height=4></A><SPAN>&nbsp;</SPAN></DIV></TH>
<TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
<DIV class=ms-vh-div name="SentDate" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=SentDate&amp;SortDir=Asc" ResultType="" FieldType="DateTime" DisplayName="SentDate" CTXNum="9" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortSentDate onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=SentDate&amp;SortDir=Asc">SentDate<IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
<DIV class=s4-ctx><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TH>
<TH oncontextmenu="" class=ms-vh2 onmouseover=OnChildColumn(this) onmouseout="" onclick="" scope=col noWrap>
<DIV class=ms-vh-div name="ContentType" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=ContentType&amp;SortDir=Asc" ResultType="" FieldType="Computed" DisplayName="Content Type" CTXNum="9" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable="FALSE">Content Type</DIV>
<DIV style="LINE-HEIGHT: 32px; MARGIN: 0px; HEIGHT: 32px; TOP: 0px; LEFT: 591px" class=s4-ctx shown="false"><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"><IMG style="VISIBILITY: hidden" alt="Open Menu" src="/_layouts/images/ecbarw.png" width=7 height=4></A><SPAN>&nbsp;</SPAN></DIV></TH>
<TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
<DIV class=ms-vh-div name="OutgoingDocumentType" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=OutgoingDocumentType&amp;SortDir=Asc" ResultType="" FieldType="TaxonomyFieldType" DisplayName="OutgoingDocumentType" CTXNum="9" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortOutgoingDocumentType onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=OutgoingDocumentType&amp;SortDir=Asc">OutgoingDocumentType<IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
<DIV class=s4-ctx><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TH>
<TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
<DIV class=ms-vh-div name="OutgoingMailType" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=OutgoingMailType&amp;SortDir=Asc" ResultType="" FieldType="TaxonomyFieldType" DisplayName="OutgoingMailType" CTXNum="9" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortOutgoingMailType onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=OutgoingMailType&amp;SortDir=Asc">OutgoingMailType<IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
<DIV class=s4-ctx><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TH>
<TH class=ms-vh2 onmouseover=OnChildColumn(this) scope=col noWrap>
<DIV class=ms-vh-div name="OutgoingDocumentStatus" SortFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=OutgoingDocumentStatus&amp;SortDir=Asc" ResultType="" FieldType="TaxonomyFieldType" DisplayName="OutgoingDocumentStatus" CTXNum="9" FilterDisableMessage="" Filterable="" FilterDisable="" SortDisable="" Sortable=""><A id=diidSortOutgoingDocumentStatus onfocus=OnFocusFilter(this) onclick="javascript:return OnClickFilter(this,event);" href="javascript: " SortingFields="View={46c9a371-28ff-4003-aa75-46098aa5104b}&amp;SortField=OutgoingDocumentStatus&amp;SortDir=Asc">OutgoingDocumentStatus<IMG class=ms-hidden border=0 alt="Use SHIFT+ENTER to open the menu (new window)." src="/_layouts/images/blank.gif" width=1 height=1></A><IMG border=0 alt="" src="/_layouts/images/blank.gif"><IMG border=0 alt="" src="/_layouts/images/blank.gif"></DIV>
<DIV class=s4-ctx><SPAN>&nbsp;</SPAN><A onfocus="OnChildColumn(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"></A><SPAN>&nbsp;</SPAN></DIV></TH></TR>
<TR class=ms-itmhover iid="9,1,1" setEdgeBorder="true">
<TD class="ms-vb-itmcbx ms-vb-firstCell"><INPUT class=s4-itm-cbx title="_cts&#13;&#10;  " value="" type=checkbox _setup="true"></TD>
<TD class=ms-vb-icon><A onclick="EditItemWithCheckoutAlert(event, 'http://sharepointluis/apps/x/_layouts/listform.aspx?PageType=6&amp;ListId={55607631-9F43-4F52-B759-E9003D258CC0}&amp;ID=1', '0', '0', '%2Fapps%x%2FDocsOut%2F%5Fcts', 'http://sharepointluis/apps/x', '', '1073741823');return false;" href="http://sharepointluis/apps/x/_layouts/listform.aspx?PageType=6&amp;ListId={55607631-9F43-4F52-B759-E9003D258CC0}&amp;ID=1" target=_self><IMG border=0 alt=Edit src="/_layouts/images/edititem.gif"></A></TD>
<TD class=ms-vb-icon><A onmousedown="VerifyFolderHref(this, event, '','FALSE','1', '', '', '')" onclick="return HandleFolder(this,event,&quot;/apps/x/DocsOut/Forms/LastModified.aspx?RootFolder=&quot; + escapeProperly(&quot;/apps/x/DocsOut/_cts&quot;) + '&amp;FolderCTID=0x010100709EF428D547F5428D5B747B7761A269&amp;View={46C9A371-28FF-4003-AA75-46098AA5104B}','TRUE','FALSE','','FALSE','1','','','','','1073741823','0','0','0x7fffffffffffffff');" href="/apps/x/DocsOut/Forms/LastModified.aspx?RootFolder=%2Fapps%x%2FDocsOut%2F%5Fcts&amp;FolderCTID=0x010100709EF428D547F5428D5B747B7761A269&amp;View={46C9A371-28FF-4003-AA75-46098AA5104B}"><IMG title="Folder: _cts" border=0 alt="Folder: _cts" src="/_layouts/images/folder.gif"></A></TD>
<TD class=ms-vb-title onmouseover=OnChildItem(this) height="100%">
<DIV id=1 class="ms-vb itx" onmouseover=OnItem(this) EventType="" Perm="0x7fffffffffffffff" Field="LinkFilename" CTXName="ctx9"><A onfocus=OnLink(this) onmousedown="&#13;&#10;                  javascript:VerifyFolderHref(this,event,'','FALSE','1','','','');return false;&#13;&#10;                " onclick="&#13;&#10;                  return HandleFolder(this,event,&quot;/apps/x/DocsOut/Forms/LastModified.aspx?RootFolder=&quot; + escapeProperly(&quot;/apps/x/DocsOut/_cts&quot;) + '&amp;FolderCTID=0x010100709EF428D547F5428D5B747B7761A269&amp;View={46C9A371-28FF-4003-AA75-46098AA5104B}','TRUE','FALSE','','FALSE','1','','','','','1073741823','0','0','0x7fffffffffffffff');&#13;&#10;                " href="/apps/x/DocsOut/Forms/LastModified.aspx?RootFolder=%2Fapps%x%2FDocsOut%2F%5Fcts&amp;FolderCTID=0x010100709EF428D547F5428D5B747B7761A269&amp;View={46C9A371-28FF-4003-AA75-46098AA5104B}">_cts</A></DIV>
<DIV style="LINE-HEIGHT: 22px; MARGIN: 0px; HEIGHT: 22px; TOP: 34px; LEFT: 278px" class=s4-ctx onmouseover="OnChildItem(this.parentNode); return false;" shown="false"><SPAN>&nbsp;</SPAN><A onfocus="OnChildItem(this.parentNode.parentNode); return false;" title="Open Menu" onclick="PopMenuFromChevron(event); return false;" href="javascript:;"><IMG style="VISIBILITY: hidden" alt="Open Menu" src="/_layouts/images/ecbarw.png" width=7 height=4></A><SPAN>&nbsp;</SPAN></DIV></TD>
<TD class=ms-vb2><NOBR></NOBR></TD>
<TD class=ms-vb2>Document</TD>
<TD class=ms-vb2></TD>
<TD class=ms-vb2></TD>
<TD class="ms-vb2 ms-vb-lastCell"></TD></TR></TBODY></TABLE>
<SCRIPT type=text/javascript>HideListViewRows("onetidDoclibViewTbl0");</SCRIPT>
</TD></TR></TBODY></TABLE> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:28:37.483

像这样？

```
$('#msomenuid2').closest('tr').remove(); 
```

**编辑：**

```
$('td:contains("_cts")').closest('tr').remove(); 
```

**编辑2：**

```
$('td > div[ctsname]').filter(function() {
    return $(this).text() == '_cts';
}).closest('tr').remove(); 
```

# java - Solr 4.0 如何更改拼写检查器分析器以使它们都相同？

> ID：13761215
> 
> 赞同：2
> 
> 时间：2012-12-07T10:26:27.987
> 
> 标签：java, solr

我刚刚从 3.6.1 升级到 4.0 solr，拼写检查器停止工作。我正在使用标准配置/拼写请求处理程序来测试拼写检查。

我不断收到“所有检查器都需要使用相同的分析器”错误。（https://svn.apache.org/repos/asf/lucene/dev/trunk/solr/core/src/java/org/apache/solr/spelling/ConjunctionSolrSpellChecker.java）

如何更改拼写检查分析器以使它们都相同？

这是我正在使用的处理程序：

```
 <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <!-- Solr will use suggestions from both the 'default' spellchecker
           and from the 'wordbreak' spellchecker and combine them.
           collations (re-written queries) can include a combination of
           corrections from both spellcheckers -->
      <str name="spellcheck.dictionary">default</str>
      <str name="spellcheck.dictionary">wordbreak</str>
      <str name="spellcheck">on</str>
      <str name="spellcheck.extendedResults">true</str>       
      <str name="spellcheck.count">10</str>
      <str name="spellcheck.alternativeTermCount">5</str>
      <str name="spellcheck.maxResultsForSuggest">5</str>       
      <str name="spellcheck.collate">true</str>
      <str name="spellcheck.collateExtendedResults">true</str>  
      <str name="spellcheck.maxCollationTries">10</str>
      <str name="spellcheck.maxCollations">5</str>         
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
</requestHandler> 
```

我知道这不是在生产中使用它的方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T23:06:07.017

答案在于solrconfig.xml中拼写检查“searchComponent”的配置。在那里，每个拼写检查器条目的“field”和/或“fieldType”属性应该具有相同的值。

# hook - Liferay 文档库：在文档下载时执行方法

> ID：13761216
> 
> 赞同：2
> 
> 时间：2012-12-07T10:26:29.960
> 
> 标签：hook, liferay, liferay-6, document-library

我在[Liferay 社区](http://www.liferay.com/community/forums/-/message_boards/message/18370614)问过同样的问题，但没有答案，所以我在这里尝试:)

每次用户从文档库下载文件时，我都需要执行操作/调用方法，为简单起见，每次用户单击直接文件时，我都会说 System.out.println("a file has been added")关联。

您对我如何实现这一目标有任何想法吗？我正在使用 LR 6.0.6 CE 并且真的会尽量避免使用 EXT 环境......任何关于如何用钩子实现这一点的想法将不胜感激！

我正在考虑在调用 System.out.println() 函数的 JSP (onClick) 上添加一些 javascript，但不确定是否可行。

我想到了动作钩子、模型监听器、覆盖服务……你认为最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:00:47.300

我找到了一种方法来实现这一点，为 DLFileEntry 模型创建模型侦听器并覆盖方法“onAfterUpdate”，每次下载文档时都会触发该方法，因为它会更改 readcount 变量的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:34:57.220

为了添加业务逻辑，您应该查看[DLFileEntryLocalService](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/documentlibrary/service/DLFileEntryLocalService.html)和此服务的包装器，而不是模型侦听器。模型侦听器用于与持久性相关的修复，而不是添加任意新逻辑 - 这是`*LocalService`包装器中更好的东西，`*LocalService`业务逻辑也是如此。

这需要一个 Hook，你远离 ext 是正确的——这里不需要它，而且你会遇到比使用 Hook 更多的升级问题。

# jquery - 获取渲染到页面后动态变化的asp.net服务器控件ID

> ID：13761219
> 
> 赞同：1
> 
> 时间：2012-12-07T10:26:41.353
> 
> 标签：jquery, asp.net, sharepoint

**我在 ID 为“ ResultOutput** ”的服务器控件上创建。这是一个文本框。之后，我将此控件添加到可视 webpart。我部署到共享点站点。渲染页面后，如果我看到该文本框的 ID，则 id 已更改为**ct100_m_g_cb6c8826_a6e5_4169_a3ef_4bfc7dfb26c_ct100_ResultOutput**。要检索服务器控件的 id，我们可以在 jquery 中使用，例如

`$('<%= ResultOutput.ClientID %>')`.

但在这种情况下，id 正在改变，所以 jquery 无法找到该 id。为了找出修改后的 id 中是否显示了实际的 id，我使用了 like `$("[id*=ResultOutput]").length`，它的值为 1。所以最后我们找到了那个元素。现在我想将一些文本分配到该文本框中。我无法找到 id 动态更改的解决方案。

如果我给`$("[id*=ResultOutput]").id`它是给我未定义的。在 jquery 中捕获它的方法是什么？我想在文本框控件中放置文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:29:58.717

要获取 id 必须使用`attr('id')`in jquery。 `$("[id*=ResultOutput]").attr('id')`给你身份证。如果要更改该文本框控件中的文本，则必须使用如下所示。

`var myboxid = $("[id*=ResultOutput]").attr('id'); $('#'+myboxid).val("yourvalue");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:29:30.207

jQuery 工厂方法通常***返回集合/数组。***

所以像下面一样访问它

```
 $("[id*=ResultOutput]")[0].id 
```

另外，我不确定您的 id 选择器中是否***缺少 #***符号。请包含并重试。

```
 $('#<%= ResultOutput.ClientID %>'). 
```

# eclipse - 如何在 Eclipse 插件中捕获方法内部的更改

> ID：13761220
> 
> 赞同：2
> 
> 时间：2012-12-07T10:26:41.827
> 
> 标签：eclipse, eclipse-pde, eclipse-plugin

作为我的 Eclipse 插件项目的一部分，我需要跟踪对方法的添加、删除和更改，以实现我所追求的功能。

通过注册侦听器`JavaCore.addElementChangedListener`并递归遍历`IJavaElementDelta`直到`IJavaElementDelta.getElement()`引用受影响的方法，我能够捕获方法的添加和删除。

例如，我将方法添加`a`到`B`我得到的类中：

```
[Working copy] B.java[*]: {CHILDREN | FINE GRAINED | AST AFFECTED}
    B[*]: {CHILDREN | FINE GRAINED}
        a()[+]: {}] 
```

问题是当编辑已经存在的方法时不会发生这种情况：当我修改方法的实现并为其触发更改事件时，增量的解析停止在包含此方法的类上，而不是扩展到它。

例如，我修改了我得到`a`的类中的方法`B`：

```
[Working copy] B.java[*]: {CONTENT | FINE GRAINED | AST AFFECTED} 
```

此信息不包含有关 method的信息`a`，即使它的实现刚刚更改。这个问题可能与这个旧的 Eclipse 错误报告有关[https://bugs.eclipse.org/bugs/show_bug.cgi?id=327753](https://bugs.eclipse.org/bugs/show_bug.cgi?id=327753)

**因此，问题是：**如何跟踪并获得有关其实现已更改的方法的通知（无需多次构建和存储 AST）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:37:34.590

经过一些严格的调查后，我得出的结论是，如果没有 AST 相关信息，就不可能捕获方法内部的变化。因此，我一直在寻找最有效的方法来存储所需的最少信息，以及比较这些信息的最合适的方法。

这是我提出的解决方案，根据几天的测试，它似乎足够有效，可以在每个`ElementChangedEvent`.

```
// during each user-invoked-compile, these are processed and cleared
private static HashMap<String, IMethod> added = new HashMap<String, IMethod>();
private static HashMap<String, IMethod> changed = new HashMap<String, IMethod>();
private static HashMap<String, IMethod> removed = new HashMap<String, IMethod>();

// this persists through out the entire session
private static HashMap<String, ASTNode> subtrees = new HashMap<String, ASTNode>();

private static void attachModelPart() {
    JavaCore.addElementChangedListener(new IElementChangedListener() {

        @Override
        public void elementChanged(ElementChangedEvent event) {
            ... // added and removed IMethod handling
            IJavaElementDelta delta = event.getDelta();
            if (delta.getElement() instanceof CompilationUnit) {
                delta.getCompilationUnitAST().accept(new ASTVisitor() {

                    @Override
                    public boolean visit(MethodDeclaration node) {
                        String mName = ((TypeDeclaration) node.getParent()).getName()
                                .getFullyQualifiedName() + "." + node.getName().getFullyQualifiedName();
                        // Finding match for this methods name(mName) in saved method subtrees...
                        boolean methodHasChanged = false;
                        if (subtrees.containsKey(mName)) {
                            // Found match
                            // Comparing new subtree to one saved during an earlier event (using ASTNode.subtreeMatch())
                            methodHasChanged = !node.subtreeMatch(new ASTMatcher(), subtrees.get(mName));
                        } else {
                            // No earlier entry found, definitely changed
                            methodHasChanged = true;
                        }
                        if (methodHasChanged) {
                            // "changed" is a HashMap of IMethods that have been earlierly identified as changed
                            // "added" works similarly but for added methods (using IJavaElementDelta.getAddedChildren())
                            if (!changed.containsKey(mName) && !added.containsKey(mName)) {
                                // Method has indeed changed and is not yet queued for further actions
                                changed.put(mName, (IMethod) node.resolveBinding().getJavaElement());
                            }
                        }
                        // "subtrees" must be updated with every method's AST subtree in order for this to work
                        subtrees.put(mName, node);
                        // continue visiting after first MethodDeclaration
                        return true;
                    }
                });
            }
        }
    }
} 
```

欢迎评论！

# asp.net - 无法检索元数据，无法找到请求的 .NET 框架数据提供程序

> ID：13761221
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:26:43.340
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

您好我正在学习 asp.net MVC，在尝试添加新控制器时出现此错误：

![在此处输入图像描述](../Images/ad814f8323e2ffa42e5b8d9d17fbecce.png)

这是我正在做的配置：

![在此处输入图像描述](../Images/094903dcdcc3cf5cb1e75f5d076a9c74.png)

这是我的代码：

```
 public class Movie {
    public int ID { get; set; }
    public string Title { get; set; }
    public DateTime ReleaseDate { get; set; }
    public string Genre { get; set; }
    public decimal Price { get; set; }
}

public  class MovieDBContext : DbContext
{
    public DbSet<Movie> Movies { get; set; }
}

<add name="MovieDBContext"
       connectionString="Data Source=|DataDirectory|Movies.sdf"
       providerName="System.Data.SqlServerCe.4.0"/> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:19:33.560

根据您的连接字符串，我认为您正在尝试连接到 SQL Server CE 数据库只需将其更改为常规 Sql 2008 / Sql 2012 连接字符串。

应该管用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-07T14:29:58.413

在连接字符串中

```
DataSource=.\App_Data\Movies.sdf 
```

# jquery - 在jqgrid中添加新行后如何触发loadComplete？

> ID：13761222
> 
> 赞同：0
> 
> 时间：2012-12-07T10:26:45.880
> 
> 标签：jquery, jqgrid

我有一个自定义格式化程序，可以在 jqgrid 的 loadComplete 中触发。当动态添加行时，需要相同的自定义格式化程序才能工作。所以我想像任何普通函数一样调用 loadComplete() 。自定义格式化程序在加载网格时效果很好，但在稍后添加行时不起作用。

动态添加行

```
function addRow(cfgid,cfgname,hostname,osname,cfgDesc,productId,cfgType,updateDate,emailAddress,absolutePath,fileName,productVersion,converted)
{

    var myrow = {cfgId:cfgid, '':'', cfgName:cfgname, hostname:hostname, osname:osname, cfgDesc:cfgDesc, productId:productId,hostname:hostname,cfgType:cfgType,updateDate:updateDate,emailAddress:emailAddress,absolutePath:absolutePath,fileName:fileName,productVersion:productVersion,converted:converted};

    $("#list1").addRowData(cfgid, myrow,"first");
    //$("#list1").loadComplete(); does not work
    $("#list1").trigger("reloadGrid");
    $("#list1").sortGrid('updateDate', true, 'desc');

} 
```

JqG​​rid

```
function drawDynamicGrid(xml)
{
    var emptyMsgDiv = $('<div>No configurations loaded</div>');

    var xmlObject=StringtoXML(xml);
    var getColumnIndexByName = function (grid, columnName) {
        var cm = grid.jqGrid('getGridParam', 'colModel'), i = 0, l = cm.length;
        for (; i < l; i += 1) {
            if (cm[i].name === columnName) {
                return i; // return the index
            }
        }
        return -1;
    },
    grid = jQuery("#list1"),
    convertIcon = '<span class="ui-state-default" style="border:0" id="converted"><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span></span>',
    iconAlert = '<span class="ui-state-error" style="border:0" id="expired"><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span></span>';
    grid.jqGrid({

      datastr : xml,
      datatype: 'xmlstring',
      colNames:['cfgId','Name', 'Host','Operating System', 'Description','Product', 'Type', 'Last Updated Time','Last Updated By','','','',''],
      colModel:[
          {name:'cfgId',index:'cfgId', width:90, align:"left", hidden:true},
          {name:'cfgName',index:'cfgName', width:80, align:"left", formatter: 'showlink', formatoptions: {baseLinkUrl: '#'} },
          {name:'hostname',index:'hostname', width:70, align:"left"},
          {name:'osname',index:'osname', width:90, align:"left"},
          {name:'cfgDesc',index:'cfgDesc', width:80, align:"left"},
          {name:'productId',index:'productId', width:40, align:"left"},
          {name:'cfgType',index:'cfgType', width:50, align:"left"},
          {name:'updateDate',index:'updateDate',sorttype:'Date', width:120, align:"left"},
          {name:'emailAddress',index:'emailAddress', width:120, align:"left"},
          {name:'absolutePath',index:'absolutePath', width:90, align:"left", hidden:true},
          {name:'fileName',index:'fileName', width:10, align:"left", hidden:true},
          {name:'productVersion',index:'productVersion', width:10, align:"left", hidden:true},
          {name:'converted',index:'converted', width:10, align:"left", hidden:true}
      ],
      pager : '#gridpager',
      rowNum:10,
      rowList:[10,50,100],
      scrollOffset:0,
      height: 'auto',
      emptyrecords: 'No configurations loaded',
      autowidth:true,
      viewrecords:true,
      gridview: true,
      multiselect: true,
      xmlReader: {
          root : "list",
          row: "Response",
          id: "cfgId",
          userdata: "userdata",
          repeatitems: false
      },

      loadComplete: function () {

            var count = grid.jqGrid('getGridParam');
            var ts = grid[0];
            if (ts.p.reccount === 0) {
                grid.hide();
                emptyMsgDiv.show();
            } else {
                grid.show();
                emptyMsgDiv.hide();
            }

            //for showlink and icon alert having date difference more than 90 days
            var iRow, row, trClasses, $cell,
            icfgName = getColumnIndexByName(grid, 'cfgName'),
            iupdateDate = getColumnIndexByName(grid, 'updateDate'),
            iconverted = getColumnIndexByName(grid, 'converted'),

            mygrid = grid[0],
            rows = mygrid.rows,
            cRows = rows.length,
            myLink = function (e) {
                var $td = $(e.target).closest('td'),
                    text = $td.text(),
                    $tr = $td.closest('tr'),
                    rowid = $tr[0].id;
                    goToViewAllPage(rowid);
            };
        for (iRow = 0; iRow < cRows; iRow += 1) {
            row = rows[iRow]; // row.id is the rowid
            trClasses = row.className.split(' ');
            if ($.inArray('jqgrow', trClasses) > 0) {
                // the row is a standard row (only if subGrid:true are used)
                var cellvalue1,firstDate,secondDate;
                $cell = $(row.cells[icfgName]);
                cellvalue1=$(row.cells[iupdateDate]).text();
                firstDate = new Date();
                //console.info(cellvalue1+", "+cellvalue1.length);
                //var cellvalue1="08-18-2011 11:49:01";
                var convertedText=$(row.cells[iconverted]).text();
                if(cellvalue1.length>25)
                {

                    secondDate=new Date();
                    //secondDate = secondDate.substring(0, secondDate.length-3);

                    if(diffOf2Dates(firstDate,secondDate,true)>=expireCondition)
                    {
                        $cell.prepend(iconAlert);
                    }
                    $cell.click(myLink);
                }
                else
                {
                    if(cellvalue1.length!=1)
                    {

                        secondDate = cellvalue1.substring(0, cellvalue1.length-6);
                        if(diffOf2Dates(firstDate,secondDate,false)>=expireCondition)
                        {
                            $cell.prepend(iconAlert);
                        }
                        $cell.click(myLink);
                    }

                    //I want to add this Icon when a new row is added using addRowData
                    if(convertedText=="yes"&&supportEng)$cell.prepend(convertIcon);

                }
            }
        }

        }
    });
    grid.jqGrid('navGrid','#gridpager',{edit:false,add:false,del:false});

    var myGrid = $("#list1");
    $("#cb_"+myGrid[0].id).hide();
    // place div with empty message insde of bdiv
    emptyMsgDiv.insertAfter(grid.parent());

    $("#list1").trigger("reloadGrid");
    $("#list1").sortGrid('updateDate', true, 'desc');
    $("#list1").setGridParam({rowNum:10});

} 
```

**更新**

服务器响应

```
<list>
  <Response>
    <cfgId>1223</cfgId>
    <cfgName>ld</cfgName>
    <cfgDesc>fhdf</cfgDesc>
    <cfgType>Production</cfgType>
    <fileName>4.xml</fileName>
    <absolutePath>../../../xmlrepository/121/4_ver3.xml</absolutePath>
    <emailAddress>mk@aol.com</emailAddress>
    <projectId>121</projectId>
    <hostname>abc-dev-01.24hourfit.com</hostname>
    <createDate>2012-12-07 12:15:48.0 IST</createDate>
    <updateDate>2012-12-07 12:15:48.0 IST</updateDate>
    <state>1</state>
    <productId>3</productId>
    <osname>Linux</osname>
    <productVersion>1.0 HotFix5</productVersion>
    <converted>yes</converted>
  </Response>
  <Response>
    <cfgId>1224</cfgId>
    <cfgName>DD</cfgName>
    <cfgDesc>dfsd</cfgDesc>
    <cfgType>Production</cfgType>
    <fileName>2.xml</fileName>
    <absolutePath>../../../xmlrepository/121/2_ver1.xml</absolutePath>
    <emailAddress>mk@aol.com</emailAddress>
    <projectId>121</projectId>
    <hostname>vkeh-jam</hostname>
    <createDate>2012-12-07 12:21:31.0 IST</createDate>
    <updateDate>2012-12-07 12:21:31.0 IST</updateDate>
    <state>1</state>
    <productId>3</productId>
    <osname>HP-UX</osname>
    <productVersion>5.0</productVersion>
    <converted>no</converted>
  </Response>
</list> 
```

goToViewAllPage 函数

```
function goToViewAllPage(rowid)
{
    var pageLoadContent='<table id="detailTable" width="100%"><tbody><tr><td align="center">Please Wait</td></tr><tr><td align="center"><img src="/informaticaCSM/infa9/csm/view/include/images/loading.gif" alt="Loading"/></td></tr></tbody></table>';
    //rowid=rowid.substring(4, rowid.length);
    $("#nextPageLoading").pageLoad({content:pageLoadContent});
    $("#nextPageLoading").css({"cursor":"wait"});
    $("#pageLoadingBackground").css({"cursor":"wait"});

    var rowData = jQuery("#list1").getRowData(rowid); 
    configid = rowData['cfgId'];
    configname=rowData['cfgName'];
    configdesc=rowData['cfgDesc'];
    configenv=rowData['cfgType'];
    filename=rowData['fileName'];
    updatedate=rowData['updateDate'];
    absolutepath=rowData['absolutePath'];
    productname=rowData['productId'];
    productversion=rowData['productVersion'];
    converted=rowData['converted'];

    //emailid=rowData['emailAddress'];
    emailid=logid;

    var form_ref=document.createElement("form");
    form_ref.id="viewform";
    form_ref.name="viewform";
    form_ref.action=redirectMainUrl+"showResult.action";
    form_ref.method="post";
    form_ref.target="_self";
    document.body.appendChild(form_ref);

    var cfgstField = document.createElement("input");
    cfgstField.name="sessiontoken";
    cfgstField.type="hidden";
    cfgstField.value=sessiontoken;
    form_ref.appendChild(cfgstField);

    var cfgidField = document.createElement("input");
    cfgidField.name="cfgid";
    cfgidField.type="hidden";
    cfgidField.value=configid;
    form_ref.appendChild(cfgidField);

    var cfgnameField = document.createElement("input");
    cfgnameField.name="cfgname";
    cfgnameField.type="hidden";
    cfgnameField.value=configname;
    form_ref.appendChild(cfgnameField);

    var cfgdescField = document.createElement("input");
    cfgdescField.name="cfgdesc";
    cfgdescField.type="hidden";
    cfgdescField.value=configdesc;
    form_ref.appendChild(cfgdescField);

    var cfgenvField = document.createElement("input");
    cfgenvField.name="cfgenv";
    cfgenvField.type="hidden";
    cfgenvField.value=configenv;
    form_ref.appendChild(cfgenvField);

    var cfgfileField = document.createElement("input");
    cfgfileField.name="cfgfile";
    cfgfileField.type="hidden";
    cfgfileField.value=filename;
    form_ref.appendChild(cfgfileField);

    var cfgabsField = document.createElement("input");
    cfgabsField.name="absFileName";
    cfgabsField.type="hidden";
    cfgabsField.value=absolutepath;
    form_ref.appendChild(cfgabsField);

    var cfgdateField = document.createElement("input");
    cfgdateField.name="updatedDate";
    cfgdateField.type="hidden";
    cfgdateField.value=updatedate;
    form_ref.appendChild(cfgdateField);

    var cfgproductField = document.createElement("input");
    cfgproductField.name="productname";
    cfgproductField.type="hidden";
    cfgproductField.value=productname;
    form_ref.appendChild(cfgproductField);

    var cfgproductVersionField = document.createElement("input");
    cfgproductVersionField.name="productversion";
    cfgproductVersionField.type="hidden";
    cfgproductVersionField.value=productversion;
    form_ref.appendChild(cfgproductVersionField);

    var projectIdField = document.createElement("input");
    projectIdField.name="projectid";
    projectIdField.type="hidden";
    projectIdField.value=$("#projectId").val();
    form_ref.appendChild(projectIdField);

    var cfgprevPageField = document.createElement("input");
    cfgprevPageField.name="backpage";
    cfgprevPageField.type="hidden";
    cfgprevPageField.value=$("#backPage").val();
    form_ref.appendChild(cfgprevPageField);

    var hiddenEmailField = document.createElement("input");
    hiddenEmailField.setAttribute("type", "hidden");
    hiddenEmailField.setAttribute("name", "emailaddress");
    //hiddenEmailField.setAttribute("value", document.getElementById("usernamespan").innerHTML);
    hiddenEmailField.setAttribute("value", emailid);
    form_ref.appendChild(hiddenEmailField);

    var hiddenEmailField = document.createElement("input");
    hiddenEmailField.setAttribute("type", "hidden");
    hiddenEmailField.setAttribute("name", "fullemailid");
    hiddenEmailField.setAttribute("value", fullEmailId);
    form_ref.appendChild(hiddenEmailField);    

    var hiddenConvertedField = document.createElement("input");
    hiddenConvertedField.setAttribute("type", "hidden");
    hiddenConvertedField.setAttribute("name", "converted");
    hiddenConvertedField.setAttribute("value", converted);
    form_ref.appendChild(hiddenConvertedField);

    setTimeout(function(){
        form_ref.submit();
    }, 10);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:30:25.093

我建议您将当前代码从`loadComplete`自定义格式化程序中删除。使用自定义格式化程序，`cellattr`或`rowattr`结合使用`gridview: true`是填充网格的最有效方式。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/12519858/315935)。

您可以将“cfgName”列的定义更改为以下内容：

```
{name: 'cfgName', width: 80, classes: "myLink",
    formatter: function (cellValue, options, rowObject) {
        var converted = rowObject.converted === undefined ?
                $(rowObject).find(">converted").text(): rowObject.converted,
            updateDate = rowObject.updateDate === undefined ?
                $(rowObject).find(">updateDate").text(): rowObject.updateDate;
        return (isAlertedDate(updateDate) ? iconAlert: "") +
            (converted === "yes" ? convertIcon : "") +
            "<span>" + cellValue + "</span>";
    },
    cellattr: function () {
        return " title=\"Click here to go to ViewAllPage\"";
    }} 
```

您可以`diffOf2Dates`在`isAlertedDate`. 此外，我建议不要使用链接 ( `<a>`) 以使代码更简单。而不是我使用`classes: "myLink"`并定义了以下CSS

```
.myLink { text-decoration: underline; cursor: pointer; } 
```

生成的网格将与以前完全相同：

![在此处输入图像描述](../Images/affad6910b461c33d27a67df93d46532.png)

要在单击链接时执行一些 JavaScript 代码（甚至在单击带有链接的单元格时），可以使用`beforeSelectRow`或`onCellSelect` [callback](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events)。例如

```
beforeSelectRow: function (rowid, e) {
    var iCol = $.jgrid.getCellIndex($(e.target).closest("td")[0]);
    if (this.p.colModel[iCol].name === 'cfgName') {
        //alert("GO!!!");
        goToViewAllPage(rowid);
        return false;
    }
} 
```

[您可以在演示](http://www.ok-soft-gmbh.com/jqGrid/AbhishekSimon13.htm)中看到我的意思。

# paypal - 在沙盒中测试 Paypal 立即购买

> ID：13761230
> 
> 赞同：0
> 
> 时间：2012-12-07T10:27:13.443
> 
> 标签：paypal, sandbox

我正在将一个 Paypal（企业帐户）“立即购买”按钮构建到网站中，并且在使用沙盒进行测试时遇到了各种问题。

我没有在 Paypal 中保存“立即购买”按钮，因为我需要动态指定金额，但是，如果这被证明是我的任何问题的原因，我可以找到解决方法。我已将我的 Paypal 首选项设置为启用自动退货、启用支付数据传输，并且在首选项中设置了退货 URL。

我想要实现的是用户选择他们的购买选项并点击“立即购买”，这将传递到 Paypal 付款页面，他们在其中输入信用卡详细信息（最常见）并确认付款，然后返回给我返回页面，我使用“tx”变量和相关处理获取所有详细信息。

我使用沙箱遇到的问题如下。

1.  当我点击购买按钮时，支付页面与现实生活中的不同。除了设置 Paypal 帐户外，它不提供通过信用卡支付的功能。为什么会这样，我能做些什么吗？我希望沙盒能够反映真实情况！

2.  如果我尝试使用“创建 Paypal 帐户”进行支付，我会被完全拒绝，因为它告诉我我不能使用 Paypal 已知的信用卡号或电子邮件地址。这应该是一个测试环境！我没有使用我帐户中已知的号码或电子邮件地址，那么我应该如何使用此功能？

3.  付款后，沙箱不会直接将我带回我的退货页面，我必须单击一个链接才能返回。事实上，除非我在按钮代码中指定了返回 URL，否则我什至无法单击此返回链接——它只是不存在！我在一年前在这个论坛上读到，不能提供返回参数，但无论哪种方式，它都不会自动返回。如果这反映了它在现实生活中的工作方式，那么我需要彻底重新考虑设计！这仅仅是因为我在沙箱中运行还是有其他原因？

4.  当我点击链接进入返回页面时，我没有收到传递给我的“tx”变量。我使用 PHP 作为返回值，而 phpinfo() 没有显示任何价值！我错过了在某处设置的东西吗？

我已经阅读了几乎所有我能找到的关于立即购买按钮和沙盒的内容，并且觉得它真的不应该这么难！任何指针都会受到极大的欢迎。前几个问题不太重要，但获得回报和沟通至关重要！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:34:55.987

1) 使用 Payments Standard 时，您将在 PayPal 页面上看到的选项是基于 cookie 的。如果正在使用的机器上的任何用户曾经登录过 PayPal 帐户，系统将假定他们有一个帐户并且可以简单地登录。清除浏览器缓存和 cookie 通常会解决这个问题，但当然仅限于下一次尝试. 如果您想始终强制使用访客结帐选项（没有 PayPal 帐户的信用卡），您需要使用快速结帐。

2) 您使用的抄送号码或电子邮件必须已与沙盒帐户关联。这些都由您的 developer.paypal.com 帐户管理。

3) 您是否在您的实际沙盒卖家账户中设置了自动退货和 PDT？这需要与您的真实 PayPal 帐户分开进行。沙盒账户都被视为自己的账户，需要进行相应的配置。

4) 同样，听起来您不能为您正在使用的实际沙盒卖家帐户启用 PDT。

# java - Quartz 中的作业顺序

> ID：13761231
> 
> 赞同：1
> 
> 时间：2012-12-07T10:27:16.830
> 
> 标签：java, jakarta-ee, quartz-scheduler

目前我正在使用 Quartz 并遇到一个问题：我需要以某种顺序运行任务，例如一个接一个。是否可以使用 Quartz 实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:03:55.923

您需要的是任务/作业链功能。

您可以自己实现它，也可以依赖石英提供[的 JobChainingJobListener](http://quartz-scheduler.org/api/2.1.5/org/quartz/listeners/JobChainingJobListener.html)

简单的例子：

```
chainListener = new JobChainingJobListener( "myChainListener" );
chainListener.addJobChainLink( job1.getKey(), job2.getKey() );

sched.scheduleJob( job1, trigger );
sched.addJob( job2, true );
sched.addGlobalJobListener( chainListener ); 
  sched.start(); 
```

我相信，如果您尝试用谷歌搜索它，您可以获得更多示例/解释。

至少它给了你一个开始。

祝你好运。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T10:48:35.950

对的，这是可能的。我打算建议使用[StatefulJob](http://quartz-scheduler.org/api/2.1.5/org/quartz/StatefulJob.html)，但事实证明它同时被弃用了。他们说要改用`DisallowConcurrentExecution`注释，因此您可以使用它。两者都阻止在当前作业完成之前执行第二个作业。第二个作业的执行会延迟到第一个作业完成。第一个完成后，延迟的就开始了。

# c# - Spec Explorer：错误测试

> ID：13761233
> 
> 赞同：1
> 
> 时间：2012-12-07T10:27:19.113
> 
> 标签：c#, specifications, model-based-testing

目前，我正在评估 Microsoft Research 的 Spec Explorer 2010。我有点想知道测试用例是如何生成的。

我正在玩 SE 生成的测试样本模型（累加器）。有一个方法 Accumulator.Add 将自然数 > 0 添加到成员变量中。

该模型指定：

```
[Rule(Action = "Add(x)")]
static void AddRule(int x)
{
    Condition.IsTrue(x > 0);
    accumulator += x;
} 
```

如您所见，上述条件 (x > 0) 已在模型代码中指定。此外，我在 CORD 文件中为 Accumulator.Add 指定了可能的输入：

```
config ParameterCombination: Main 
{
    action abstract static void Accumulator.Add(int x)
        where x in {-3..3};    
} 
```

但是语句 Condition.IsTrue(x > 0) 强制 SpecExplorer 仅生成值 > 0 的测试。这不是我所期望的：输入参数类型是 int，因此可以将非正数传递给方法。根据规范，该方法不应该允许这样的数字。从我的角度来看，SE 应该使用非正输入生成测试，以验证算法不接受它们。

这种行为可以以某种方式建模吗？请不要将我指向 PEX 之类的解决方案，因为 PEX 专用于白盒测试。SE 更侧重于黑盒测试，根据我所学到的，黑盒测试应该使用基于我的规范的等价类。那些将是：

```
Equivalence class 1: Positive input
Equivalence class 2: Non-positive input 
```

但 SE 从不为后一种情况生成测试用例。

有什么建议么？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:34:37.790

Afaik Spec Explorer 将根据对模型进行的探索生成测试。因此，如果由于（预）条件失败而没有触发规则，则 Spec Explorer 将不会创建测试。

我对此建模的建议是手动创建等价类，即为负值创建另一个规则，但对于相同的操作：

```
[Rule(Action="Add(x)")]
static void AddRule2(int x)
{
   Condition.IsTrue(x <= 0);
} 
```

配置文件和实现可以保持不变，如果添加负值，测试套件将报告错误（我刚刚尝试过）。

您还需要为负值创建第二条规则，或删除开头的条件。

# jquery - jQuery .animate() 不起作用，但 .css() 可以

> ID：13761234
> 
> 赞同：2
> 
> 时间：2012-12-07T10:27:23.970
> 
> 标签：jquery, html, animation, jquery-animate

我正在尝试使用以下代码创建鼠标悬停动画：

```
var menu = {
    colors: [ '#B8410D', '#1C70A8', '#27A328', '#B59215' ],

    alignMenuLeft: function() {
        var slider_div = jQuery('#slider-1');
        var menu_div = jQuery('#dupl-menu');
        var offset = slider_div.offset();

        menu_div.css({
            'top': offset.top,
            'left': offset.left + slider_div.width() - menu_div.width()
        });
    }
}

jQuery(document).ready(function($) {
    $('#slider-1').nivoSlider({
        effect: 'fade',
        animSpeed: 500,
        pauseTime: 4000,
        controlNav: false,
        captionOpacity: 0,
        directionNav: false,

        afterLoad: menu.alignMenuLeft
    });

    $('#dupl-menu .menu-item').mouseover(function() {
        console.log('mouseover');
        $(this)
            .stop()
            .animate({
                    borderRightColor: menu.colors[$(this).index()],
                    borderRightWidth: '6px',
                    borderRightStyle: 'solid'
                },
                { queue: false, duration: 600 });
    });

});

jQuery(window).resize(menu.alignMenuLeft); 
```

**（[小提琴](http://jsfiddle.net/6xDkF/)）**

但是，它不起作用。如果我添加一个函数作为`.animate`记录完成的第三个参数，它永远不会被调用。但如果我使用`.css`代替`.animate`，它确实有效，所以选择器是正确的。什么可能导致这个问题？

编辑：

这是 HTML：

```
<div id="dupl-menu">
    <div class="menu-main-container">
        <ul id="menu-main" class="menu">
            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-50"><a href="#item1">item1</a></li>
            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-51"><a href="#item2">item2</a></li>
            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-52"><a href="#item3">item3</a></li>
            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-53"><a href="#item4">item4</a></li>
        </ul>
    </div>      
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:45:42.547

您可能需要**jQuery UI**来调整某些属性。

根据您的代码查看我的示例：

[http://jsfiddle.net/Z4xf9/](http://jsfiddle.net/Z4xf9/)

我在某些地方改进了您的代码，希望现在更清晰。我更喜欢将新的`"on"`事件处理程序与`mouseenter`和一起使用`mouseleave`。

我强调了边框的大小和颜色，使变化更加明显。

祝你好运！

**编辑：**我不确定是什么`menu.colors[$(this).index()`，所以我把它留了下来，用一个简单的字符串颜色关键字替换了它……但你可以很容易地把它换掉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:40:26.320

问题有两个方面：一个问题是，正如许多人提到的，我需要 jquery-ui 来让动画处理这些属性。第二个问题是 li 元素原本没有边框属性。我添加了

```
#dupl-menu .menu-item {
  border-right: 0 solid white;
} 
```

对于 CSS，现在它可以正常工作（这就是小提琴中的不同之处）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T10:32:01.530

我认为如果你想做彩色动画，你需要包含 jQuery UI。

参考[jQuery UI 颜色动画](http://jqueryui.com/animate/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T10:46:48.443

如果您想为颜色样式设置动画，则需要包含 jQuery UI。vanilla animate() 用于更基本的事情；基本上任何通过整数值（位置、不透明度、高度、宽度等）通过 CSS 控制的东西——但不是颜色。你需要一个单独的插件，或者 jQuery UI）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T10:57:59.073

一旦你在 Fiddle 上解决了这个 TypeError，它就会起作用：

```
Uncaught TypeError: Object [object Object] has no method 'nivoSlider' 
```

删除几条 jQuery 行后对我有用：

**小提琴：http:** [//jsfiddle.net/6xDkF/5/](http://jsfiddle.net/6xDkF/5/)

# android - HTML 格式在 android 上看起来不错，但在 iphone 上却不行

> ID：13761237
> 
> 赞同：2
> 
> 时间：2012-12-07T10:27:27.847
> 
> 标签：android, iphone, html, ios

我正在发送 html 格式的邮件，格式如下

```
 nameValuePairs.add(new BasicNameValuePair("message", "<b> Your Last Alert: </b> <br/><br/>  On " + "<font color=\"red\"> " + mDate
                + "</font>" + " at " + "<font color=\"red\"> " + mTime + "</font>" + ", " + "\"<font color=\"red\">" + model + "</font>\""
                + " reported that its battery level was down to " + "<font color=\"red\"> " + batteryLevel + "%.</font>"
                + "<br/> You might want to get it on a charger before it's too late! <br/><br/><br/><br/><b> Do you know where \""
                + "<font color=\"red\">" + model + "</font>\"" + " is? </b><br/><br/> Click " + "<a href=\"" + s + "\"> here </a>"
                + " to view in Google Maps.<br/> To find \"<font color=\"red\">"+ model +"</font>\" with the Last Alert app on another iOS device, click <a href = \"" + linkForiPhone
                + "\"> here </a>. <br/>" + "Android users, Click <a href = \"" + linkForAndroid
                + "\"> here </a>. <br/><br/><br/><b><u> Last Known Location : </u></b><br/> " + address
                + "<br/><br/><br/><br/><br/><b><u>GPS Coordinates</b></u> <br/>" + cutLat + ", " + cutLong
                + "<br/><br/><b><u>Altitude</b></u><br/>" + alt + " " + "<br/><br/><b><u>Location Accuracy</b></u>" + "<br/>" + diameter
                + " Diameter")); 
```

***当我在 android 上打开这封邮件时，它看起来很棒，但在 iphone 上，它的格式不正确，如下所示***

![在此处输入图像描述](../Images/2f97e4a1a23f02eedb077bb976cfe531.png)

在 Android 中，它看起来很好，如下所示

![在此处输入图像描述](../Images/5c9991e089e9d64afd916f071ece01f4.png)

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:40:40.093

您可以使用直接链接到地图应用程序以获取地址

```
<a href=http://maps.google.com/maps?q=address>address</a> 
```

并且可能避免邮件应用程序的自动格式化。

# ajax - 必须点击 JSF h:commandButton 两次；阿贾克斯；该按钮在另一个视图中

> ID：13761240
> 
> 赞同：1
> 
> 时间：2012-12-07T10:27:43.617
> 
> 标签：ajax, jsf

我的问题类似于下一个问题：

[必须按两次命令按钮](https://stackoverflow.com/questions/10814888/have-to-press-command-button-twice) 和 [http://balusc.blogspot.ru/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm](http://balusc.blogspot.ru/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)

但

我的**登录按钮**（我必须单击两次）和**ajax 表单**位于不同的视图中（我有登录视图（带有登录按钮的视图）和主视图（我使用 ajax 来切换其中一个）此视图的部分内容））。

这是流程（它是如何发生的）：

当会话过期并且我尝试进行一些 ajax 操作时，我的 AjaxExceptionHandler 使用以下代码将我导航到登录视图（“loginViewExpired”）：

```
facesContext.getApplication().getNavigationHandler().handleNavigation(facesContext, null, "loginViewExpired");
facesContext.renderResponse(); 
```

我在这里，在我的登录视图中，我必须单击登录按钮两次，因为 javax.faces.ViewState 隐藏输入字段未添加到我的登录表单中（据我了解，来自 BalusC 博客）

有什么建议么？我可以以某种方式将 ViewState 从另一个视图中的 ajax 表单转移到登录视图中的表单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T12:46:19.643

使用 OmniFaces FullAjaxExceptionHandler 解决

[http://balusc.blogspot.ru/2012/03/full-ajax-exception-handler.html](http://balusc.blogspot.ru/2012/03/full-ajax-exception-handler.html)

# javascript - Javascript改变样式，样式等于某些东西

> ID：13761242
> 
> 赞同：1
> 
> 时间：2012-12-07T10:27:53.503
> 
> 标签：javascript, jquery, css, html

我正在尝试在图像上添加一些样式属性，但前提是它已经包含另一个属性。我或多或少地弄清楚如何使用以下方法做到这一点：

```
if ($('#content p img').css('float') == 'right')
    $('#content p img').css('margin-left', '20px').css('margin-bottom', '20px'); 
```

但这显然会改变所有图像，因此它们的左侧和底部都有边距。我该如何做同样的事情，但只为具有该`float: right;`属性的图像添加边距？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T10:30:28.123

使用[`filter`](http://api.jquery.com/filter/)：

```
$('#content p img').filter(function() {
    return this.style.float === "right";
}).css('margin-left', '20px').css('margin-bottom', '20px'); 
```

如果您愿意，您可以只调用[`css`](http://api.jquery.com/css)一次，传入一组更改以进行：

```
$('#content p img').filter(function() {
    return this.style.float === "right";
}).css({
    'margin-left':   '20px',
    'margin-bottom': '20px'
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T10:30:37.530

尝试：

```
$('#content p img').each(function(){
    if($(this).css('float') == 'right') 
        $(this).css('margin-left', '20px').css('margin-bottom', '20px');
}) 
```

# haskell - 在haskell中将枚举转换为类似int的类型

> ID：13761243
> 
> 赞同：5
> 
> 时间：2012-12-07T10:27:59.797
> 
> 标签：haskell, enums

我遵循 Haskell 的 Wiki 页面上的建议：[性能/数据类型](http://www.haskell.org/haskellwiki/Performance/Data_types)以提高我的代码的性能，但是当我改变时

```
data Color = Yellow | Red | Green | Blue | Empty deriving (Show, Eq) 
```

至

```
newtype Color = Color Int deriving (Eq,Ord,Enum) 
(yellow:red:green:blue:empty:_) = [Color 1 ..] 
```

正如文章中所建议的，GHC 说：

```
Can't make a derived instance of `Enum Color':
  `Color' must be an enumeration type
  (an enumeration consists of one or more nullary, non-GADT constructors)
  Try -XGeneralizedNewtypeDeriving for GHC's newtype-deriving extension
In the newtype declaration for `Color' 
```

我没有太多使用 Enums，如何将 Color 转换为 Enum 类型？我必须实现它定义的所有功能吗？我认为当您派生该类时它们都已实现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T10:30:20.817

有时 GHC 的建议很糟糕，但在这种情况下，它是正确的。在文件的顶部，放

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-} 
```

`GeneralizedNewtypeDeriving`是一种语言扩展，允许您指定某些类应“转发”到其表示的实例。也就是说，仅通过使用 's`newtype Color = Color Int deriving (Enum)`来实现`Color`'s`Enum`实例`Int`（在 GHC 为您生成的一些必要的包装/解包之后）。

但如果这是您需要的唯一原因`Enum`，您也可以省略它并直接执行

```
(yellow:red:green:blue:empty:_) = map Color [1..] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T12:07:56.643

请注意，通过派生`Enum`，您只会得到部分正确的实现。例如，`enumFrom yellow`将返回一个等同于 的列表`map Color $ [1..]`，这可能不是您想要的。

所以我宁愿建议`Enum`与[`Bounded`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aBounded)手动一起实现，这样它就可以满足[文档中给出的规则`Enum`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aEnum)。

[我想所有这些东西都可以用Template Haskell](http://www.haskell.org/haskellwiki/Template_Haskell)自动生成。这将成为一个有趣的库。

# python - Python 字典吃掉了 ram

> ID：13761244
> 
> 赞同：5
> 
> 时间：2012-12-07T10:28:11.947
> 
> 标签：python, dictionary, ram, steam

我对编程很陌生，并制作了一个程序来从 Team Fortress 2 玩家那里获取库存数据，并将库存项目放入字典中，其中 steamid 作为键，项目列表作为值。

我遇到的问题是，在字典中输入了大约 6000 个条目后，该程序基本上耗尽了我系统上的所有 RAM 并关闭。

我猜字典只是变得太大了，但根据我从类似问题中读到的内容，6000 个条目的字典不应该占用我那么多的 RAM。

我一直在寻找其他解决方案，但我可以为我的代码使用一些具体示例。

```
import re, urllib.request, urllib.error, gzip, io, json, socket, sys

with open("index_to_name.json", "r", encoding=("utf-8")) as fp:
    index_to_name=json.load(fp)

with open("index_to_quality.json", "r", encoding=("utf-8")) as fp:
    index_to_quality=json.load(fp)

with open("index_to_name_no_the.json", "r", encoding=("utf-8")) as fp:
    index_to_name_no_the=json.load(fp)

with open("steamprofiler.json", "r", encoding=("utf-8")) as fp:
    steamprofiler=json.load(fp)

inventory=dict()
playerinventories=dict()
c=0

for steamid in steamprofiler:
    emptyitems=[]
    items=emptyitems
    try:
        url=urllib.request.urlopen("http://api.steampowered.com/IEconItems_440/GetPlayerItems/v0001/?key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&steamid="+steamid+"&format=json")
        inv=json.loads(url.read().decode("utf-8"))
        url.close()
    except (urllib.error.HTTPError, urllib.error.URLError, socket.error) as e:
        c+=1
        print("URL/HTTP error, continuing")
        continue
    try:
        for r in inv["result"]["items"]:
            inventory[r["id"]]=r["quality"], r["defindex"]
    except KeyError:
        c+=1
        print(steamid, "didn't have an inventory")
        continue
    for key in inventory:
        try:
            if index_to_quality[str(inventory[key][0])]=="":
                items.append(
                    index_to_quality[str(inventory[key][0])]
                    +""+
                    index_to_name[str(inventory[key][1])]
                    )
            else:
                items.append(
                    index_to_quality[str(inventory[key][0])]
                    +" "+
                    index_to_name_no_the[str(inventory[key][1])]
                    )
        except KeyError:
            print("Key error, uppdate def_to_index")
            c+=1
            continue
playerinventories[int(steamid)]=items
items=emptyitems
c+=1
print(c, "inventories fetched") 
```

在保留字典外观的同时，我真的不知道有任何其他方法可以做到这一点，这非常重要，因为我希望能够知道它是谁的库存。如果我对此有任何不清楚的地方，请直说，我会尽力解释

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:54:51.967

我认为您的代码中有一些逻辑错误。例如，您将每个玩家的库存项目添加到`inventory`字典中，然后对其进行迭代以填充其他内容。

但是，您永远不会重置`inventory`字典，因此它会继续积累物品（因此第二个玩家似乎除了他们自己的物品之外还有第一个人的物品栏）。

您`items`稍后使用的字典也有类似的问题。您将它重置`emptyitems`为最初是一个空列表，但是因为 Python 中的赋值是通过引用进行的，所以这没有效果（`items`已经是与 相同的对象`emptyitems`）。

通过这两个修复程序，您可能有更好的机会不使用所有系统内存。

另一个杂项代码改进（可能与内存使用无关）：

在您的循环中`inventory`，您重复访问相同的两个值而不使用`key`for 任何内容。而不是`for key in inventory`尝试`for value1, value2 in inventory.itervalues()`（或者`in inventory.values()`如果您使用的是 Python 3）。然后使用`value1`代替`inventory[key][0]`和`value2`代替`inventory[key][1]`（或者更好的是，给他们更有意义的名字）。

**编辑**：这是循环的外观（我有点猜测以前在`inventory[key][0]`和中的两个值的名称`inventory[key][1]`）：

```
for quality, name in inventory.itervalues():
    try:
        if index_to_quality[str(quality)]=="":
            items.append(
                index_to_quality[str(quality)]
                +""+
                index_to_name[str(name)]
                )
        else:
            items.append(
                index_to_quality[str(quality)]
                +" "+
                index_to_name_no_the[str(name)]
                ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:52:00.127

我相信这说明了您的代码存在问题：

```
>>> emptyitems=[]
>>> a=emptyitems
>>> a.append("hello")
>>> a.append("bar")
>>> a
['hello', 'bar']
>>> emptyitems
['hello', 'bar'] 
```

换句话说，您正在捕获对列表的引用，该`emptyitems`列表确实会变得非常大。这可能不是您的意思，我可以想象处理一个非常大的列表会变得非常耗费内存。

# php - PHP更新5.3.2到5.4.2，方法重新定义

> ID：13761245
> 
> 赞同：1
> 
> 时间：2012-12-07T10:28:13.057
> 
> 标签：php, zend-framework

我有一个大型 Web 应用程序，它使用 Zend FrameWork 在 PHP 5.3.2 中工作，并被迁移到使用 PHP 5.4.2 的新服务器上。其中大部分仍然有效，但有一小部分（我们称之为“导入”）会给出错误：

> RptSchdlMdfctnBO::getWorkFlowData() 的声明应与 WorkFlowBaseBO::getWorkFlowData($Id) 兼容，文件 /www/vrs/vrs/application/models/wrkflows/RptSchdlMdfctnBO.php, line79

发生的情况是有这个类 RptSchdlMdfctnBO，它有一个空方法 getWorkFlowData($Id)，它在许多地方用相同的参数重新定义。但是在导入部分，这个方法是用两个参数重新定义的，然后总是用两个参数调用它；显然，这在 PHP 5.4.2 中是不被接受的。我试图更改方法的定义以接受第二个可选参数，但这并没有改变任何东西：

```
public function getWorkFlowData($Id,$Flags=0) 
```

两个问题：1）您能否将我链接到解释 PHP 中这种行为变化的地方？2）让导入功能工作的最危险的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:16:34.053

我建议向该类添加一个新方法，例如`getWorkFlowDataWithFlags($id, $flags)`并将功能重构`getWorkFlowData`到其中，并更改它`getWorkFlowData`只需`getWorkFlowDataWithFlags`使用默认标志 ​​0调用

# android - Android - 动态添加按钮 - 出现错误

> ID：13761247
> 
> 赞同：2
> 
> 时间：2012-12-07T10:28:22.197
> 
> 标签：android, android-relativelayout, layoutparams

我有一个由 XML 设计的布局。然后，我想通过Java编程添加一个按钮。无论我如何使用marginparams、layoutparams，我在执行addview 时总是会出错。

我究竟做错了什么？什么不见​​了？

另外，我收到警告，MarginLayoutParams 中的 RelativeLayout.LayoutParams.FILL_PARENT 已被弃用。那么另一种方法是什么？我正在尝试将新按钮放在相对布局上的特定位置。

谢谢， AJ

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Button btn = new Button(this);
    btn.setText("Go!");
    btn.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            number_of_cards=0;
        }
    });       

    RelativeLayout ll = (RelativeLayout) findViewById(R.layout.activity_main);

    //ll.addView(btn);
    //setContentView(ll);

    float density = getApplicationContext().getResources().getDisplayMetrics().density;
    MarginLayoutParams marginParams;
    RelativeLayout.LayoutParams layoutParams;

    int px_left = Math.round((float) (30+(4-1)*75) * density);
    int px_top = Math.round((float) (30+(1-1)*91) * density);
    marginParams = new MarginLayoutParams(RelativeLayout.LayoutParams.FILL_PARENT,RelativeLayout.LayoutParams.FILL_PARENT);
    marginParams.setMargins(px_left, px_top, 0, 0);
    layoutParams = new RelativeLayout.LayoutParams(marginParams);
    btn.setLayoutParams(layoutParams);              
    ll.addView(btn, layoutParams); // getting error here
    setContentView(R.layout.activity_main); 
```

LogCat 是：

```
12-07 10:57:03.534: E/AndroidRuntime(850): FATAL EXCEPTION: main

12-07 10:57:03.534: E/AndroidRuntime(850): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.first/com.example.first.First}: java.lang.NullPointerException

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.os.Handler.dispatchMessage(Handler.java:99)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.os.Looper.loop(Looper.java:123)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.app.ActivityThread.main(ActivityThread.java:3683)

12-07 10:57:03.534: E/AndroidRuntime(850):  at java.lang.reflect.Method.invokeNative(Native Method)

12-07 10:57:03.534: E/AndroidRuntime(850):  at java.lang.reflect.Method.invoke(Method.java:507)

12-07 10:57:03.534: E/AndroidRuntime(850):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

12-07 10:57:03.534: E/AndroidRuntime(850):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

12-07 10:57:03.534: E/AndroidRuntime(850):  at dalvik.system.NativeStart.main(Native Method)

12-07 10:57:03.534: E/AndroidRuntime(850): Caused by: java.lang.NullPointerException

12-07 10:57:03.534: E/AndroidRuntime(850):  at com.example.first.First.onCreate(First.java:127)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

12-07 10:57:03.534: E/AndroidRuntime(850):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)

12-07 10:57:03.534: E/AndroidRuntime(850):  ... 11 more 
```

我的 activity_main xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textScore"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="5dp"
    android:text="@string/text_score" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:32:07.293

它给你**NullPointerException**

解决方案是： - 写在下面的行

```
setContentView(R.layout.activity_main); 
```

后

```
super.onCreate(savedInstanceState); 
```

并写在下面的行

```
RelativeLayout ll = (RelativeLayout) findViewById(R.id.mRlayout1); 
```

代替

```
RelativeLayout ll = (RelativeLayout) findViewById(R.layout.activity_main); 
```

并使用以下代码更新您的 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/mRlayout1">

<TextView
    android:id="@+id/textScore"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="5dp"
    android:text="@string/text_score" />

</RelativeLayout> 
```

并从最后删除，它将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:31:30.470

您需要在调用`setContentView`之前调用`findViewById`.. 并在下面设置保证金检查..

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.activity_main);

Button btn = new Button(this);
btn.setText("Go!");
btn.setOnClickListener(new Button.OnClickListener() {
    public void onClick(View v) {
        number_of_cards=0;
    }
});       

RelativeLayout ll = (RelativeLayout) findViewById(R.layout.activity_main);

//ll.addView(btn);
//setContentView(ll);

float density = getApplicationContext().getResources().getDisplayMetrics().density;
MarginLayoutParams marginParams;
RelativeLayout.LayoutParams layoutParams;

int px_left = Math.round((float) (30+(4-1)*75) * density);
int px_top = Math.round((float) (30+(1-1)*91) * density);

layoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT,RelativeLayout.LayoutParams.FILL_PARENT);
layoutParams.setMargins(px_left, px_top, 0, 0);
btn.setLayoutParams(layoutParams);              
ll.addView(btn, layoutParams); // getting error here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T05:14:33.143

尝试删除此行... btn.setLayoutParams(layoutParams);

当您在 ll.addView(btn, layoutParams); 中提供布局参数时

问候，\n 苏曼

# javascript - 使用 javascript 编辑滑动 html 菜单

> ID：13761255
> 
> 赞同：0
> 
> 时间：2012-12-07T10:28:54.197
> 
> 标签：javascript, jsp, menu, sliding

我正在使用一个滑动菜单（选择/对象 html 之一），它是通过使用 jsp 页面从数据库中获取数据而动态生成的。

我还有一个输入文本字段，我可以在其中从滑动菜单中搜索内容。我想写一个包含在我的菜单中的词的词根，我的菜单必须“调整大小”显示所有我写的词根项目，只有那些项目。

我不能使用服务器端操作（比如通过 post 发送数据），但我需要解决这个客户端（因为我需要立即得到这个结果）。

我可以仅通过将 onclick 事件应用于按钮来解决此问题吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:57:29.820

看到这个演示：http: [//jsfiddle.net/UKseV/8/](http://jsfiddle.net/UKseV/8/)

由于无法隐藏`<option>`with `display:none`（演示： http: [//jsfiddle.net/UKseV/](http://jsfiddle.net/UKseV/) -style 已正确添加，但它不起作用），我克隆选择对象以存储初始选项，因为它们将从初始选项中删除目的。后来我使用该克隆对象来过滤选项并将符合我条件的选项添加到初始对象。这是一个代码：

HTML：

```
<select multiple id="testSelect">
<option>test</option>
<option>temp</option>
<option>cast</option>
<option>dest</option>
<option>inst</option>
</select>

<input type="text" value="" onkeyup="searhSelect(this)" />​ 
```

`searhSelect`每次按键时都会调用函数（当用户实际释放键时）并过滤`#testSelect`对象。

JS：

```
var optionsList;
function searhSelect(el) {
    var select = document.getElementById('testSelect');
    if(!optionsList) {        
        optionsList = select.cloneNode(true);  //copy select to a variable for future use      
    }
    select.innerHTML = "";//remove all options.

    for(var i =0; i < optionsList.options.length; i++) {
        var opt = optionsList.options[i];
        if((opt.innerText || opt.textContent).indexOf(el.value) != -1) {
            select.appendChild(opt.cloneNode(true));
        } 
    }
} 
```

​</p>

# oracle - 模糊算子是做什么的？

> ID：13761256
> 
> 赞同：2
> 
> 时间：2012-12-07T10:28:56.143
> 
> 标签：oracle, full-text-search, fuzzy-search

我正在使用 Oracle 11g。

我已经尝试过 Oracle Text 功能，到目前为止我很喜欢它。我现在需要支持搜索拼写错误的单词。所以，我发现`CONTAINS`支持`Fuzzy`运算符对我来说似乎很合适！

但我想了解更多关于运营商内部发生的事情。它有什么作用？它是否使用编辑距离或 jaro-winkler 距离进行相似度评分？我特别希望使用 jaro-winkler 距离。文档说它仅支持某些语言。我的语言不在列表中。我还能使用`Fuzzy`操作符，还是它什么都不做（NOP）？

如果我不能使用`Fuzzy`运算符来解决我的问题，有什么替代方案？我不完全理解`NDATA`，但我认为它不适用于我的问题。我找到了`JARO-WINKLER-SIMILARITY`正是我需要的功能，但是如何在搜索中（在`CONTAINS`功能中）使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:03:30.763

我对Oracle模糊搜索的理解是他们有自己的“黑匣子”功能来定义两个关键字之间的相似度，用户对这个功能没有太多的控制权。

如果要使用编辑距离实现模糊搜索，可以考虑使用 UDF。这是一个示例（使用 MySQL）： http: [//flamingo.ics.uci.edu/toolkit/](http://flamingo.ics.uci.edu/toolkit/)

# java - 将 JButton 添加到 JTable

> ID：13761260
> 
> 赞同：1
> 
> 时间：2012-12-07T10:29:19.273
> 
> 标签：java, swing, jtable, jbutton, jtableheader

在摇摆中，有没有可能在表格的标题上添加一个按钮。需要实施上述职位的秋千。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:38:27.183

是的，有可能。您可以简单地将按钮添加到表头。唯一要知道的是JTableHeader没有布局，所以需要设置一个。

这是一个简单的演示代码：

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;

public class TestTable2 {

    protected void initUI() {
        DefaultTableModel model = new DefaultTableModel();
        for (int i = 0; i < 5; i++) {
            model.addColumn("Col-" + (i + 1));
        }
        for (int i = 0; i < 200; i++) {
            Vector<Object> row = new Vector<Object>();
            for (int j = 0; j < 5; j++) {
                row.add("New cell - " + (j + 1));
            }
            model.addRow(row);
        }
        JTable table = new JTable(model);
        final JButton button = new JButton("Click me");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(button, "You have clicked me");
            }
        });
        JTableHeader header = table.getTableHeader();
        header.setLayout(new FlowLayout(FlowLayout.TRAILING, 5, 0));
        header.add(button);
        JFrame frame = new JFrame(TestTable2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable2().initUI();
            }
        });
    }

} 
```

# r - R - 为空间多边形中的特定国家着色

> ID：13761265
> 
> 赞同：3
> 
> 时间：2012-12-07T10:29:29.673
> 
> 标签：r, polygons

如何`$Name_3`在空间多边形中的字段识别的区域子集中（例如，只有“Magugu”和“Nkaiti）”中的一种颜色？我玩弄了`plot()`一个子集向量，但没有成功。提前非常感谢，W

```
Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 2800 obs. of  14 variables:
  .. ..$ PID      : int [1:2800] 97867 97868 97869 97870 97871 97872 97873 97874 97875 97876 ...
  .. ..$ ID_0     : int [1:2800] 225 225 225 225 225 225 225 225 225 225 ...
  .. ..$ ISO      : chr [1:2800] "TZA" "TZA" "TZA" "TZA" ...
  .. ..$ NAME_0   : chr [1:2800] "Tanzania" "Tanzania" "Tanzania" "Tanzania" ...
  .. ..$ ID_1     : int [1:2800] 12 12 12 12 12 12 12 12 12 12 ...
  .. ..$ NAME_1   : chr [1:2800] "Manyara" "Manyara" "Manyara" "Manyara" ...
  .. ..$ ID_2     : int [1:2800] 52 52 52 52 52 52 52 52 52 53 ...
  .. ..$ NAME_2   : chr [1:2800] "Babati" "Babati" "Babati" "Babati" ...
  .. ..$ ID_3     : int [1:2800] 1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 ...
  .. ..$ NAME_3   : chr [1:2800] "Magugu" "Mamire" "Mwada" "Nkaiti" ...
  .. ..$ NL_NAME_3: chr [1:2800] "" "" "" "" ...
  .. ..$ VARNAME_3: chr [1:2800] "" "" "" "" ...
  .. ..$ TYPE_3   : chr [1:2800] "Division" "Division" "Division" "Division" ...
  .. ..$ ENGTYPE_3: chr [1:2800] "Division" "Division" "Division" "Division" ...
  ..@ polygons   :List of 2800 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:04:21.797

基础图形`plot()`处理颜色的方式与所有基础图形对象的处理方式相同：传递一个颜色向量。向量对于 SpatialPolygonsDataFrame 的每个元素都有一个元素，元素内容是颜色。

有关如何在基本图形中绘制颜色的一般情况，请参阅此问题： [Plot with conditional colour based on values in R](https://stackoverflow.com/questions/11838278/plot-with-conditional-colors-based-on-values-in-r)

这个问题针对 SPDF 的特定应用： [https ://gis.stackexchange.com/questions/36877/how-do-i-change-the-polygon-fill-color-and-border-color-for-spatialpolygons-对象](https://gis.stackexchange.com/questions/36877/how-do-i-change-the-polygon-fill-color-and-border-color-for-spatialpolygons-obje)

# sql-server - 如何根据 SQL Server 中的筛选器选择分层表中的子项计数

> ID：13761267
> 
> 赞同：1
> 
> 时间：2012-12-07T10:29:35.013
> 
> 标签：sql-server, sql-server-2008

假设我有一张桌子`TableA`：

```
parent_id int
this_id int
filter int
this_date date 
```

以及一些示例数据：

```
parent_id = 1, this_id = 1, filter = 1, this_date = ...
parent_id = 1, this_id = 2, filter = 0, this_date = ...
parent_id = 1, this_id = 3, filter = 1, this_date = ...
parent_id = 4, this_id = 4, filter = 0, this_date = ...
parent_id = 4, this_id = 5, filter = 0, this_date = ...
parent_id = 4, this_id = 6, filter = 1, this_date = ...
parent_id = null, this_id = 7, filter = 0, this_date = ...
parent_id = null, this_id = 8, filter = 1, this_date = ... 
```

`parent_id`总是和其中一个孩子的一样`this_id`。如果没有孩子，`parent_id`则为空

桌子不能改变，这就是我们所拥有的。

我创建了一个视图来给我总结：

```
SELECT ISNULL(parent_id,this_id) id, COUNT(*) numparts, MAX(this_date)...
FROM TableA
GROUP BY ISNULL(parent_id,this_id) 
```

我想在我的摘要视图中添加具有`filter=1`.

所以我对这个例子的结果（如果我做 a `SELECT * FROM theview`）将是：

```
id  numparts dt    numOfFilter1
1      3     ...        2
4      3     ...        1
7      1     ...        0
8      1     ...        1 
```

实际上，我的过滤器列将是一个子查询，但我想一旦我对这个位进行了排序，我就可以弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:35:28.267

试试这样：

```
SELECT  ISNULL(parent_id,this_id) id, 
        COUNT(*) numparts, 
        MAX(this_date), 
        SUM(CASE WHEN filter = 1 THEN 1 ELSE 0 END) numOfFilter1
FROM    TableA
GROUP BY 
        ISNULL(parent_id,this_id) 
```

# javascript - 在自执行函数中访问阴影变量

> ID：13761271
> 
> 赞同：1
> 
> 时间：2012-12-07T10:29:54.643
> 
> 标签：javascript, function, scope, self-executing-function

在下面的示例中，是否有任何方法可以从*someFunction内部获取对在**someFunction外部声明的**someValue*变量的引用，或者它是否完全被函数的同名参数所掩盖。*我很感激我可以将它附加到窗口并使用this*从函数中访问它，但是在这种情况下有没有办法访问它？

 ***[编辑]澄清。我知道该参数正在隐藏变量。显然，更改参数的名称将消除此问题。我的问题是在这种情况下是否有任何方法可以访问变量。

```
(function($){

   var someValue = 41;

   function someFunction(someValue) {

      console.log(someValue); //= 22

   }

   someFunction(22);

}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:31:28.823

您似乎故意隐藏变量，然后尝试获取它的值。只需给它一个不同的名称或重命名您的参数。

```
 var someValue = 41;
   function someFunction(myParameter) {
      console.log(someValue); // someValue == 41
   }
   someFunction(22); // logs 41 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:36:17.127

`someValue`除非您要传递变量，否则无法记录在函数外部声明的内容：

```
(function($){
    var someValue = 41;

    function someFunction(someValue, otherValue) {
        console.log(someValue, otherValue); //= 22 41
    }
    someFunction(22, someValue);
}(jQuery)); 
```

或者重命名参数：

```
(function($){
    var someValue = 41;

    function someFunction(otherValue) {
        console.log(someValue); //= 41
    }
    someFunction(someValue);
}(jQuery)); 
```

这是因为`someValue`您用作参数的名称掩盖了在函数外部声明的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:55:03.757

因为您使用的是局部变量 (var)，所以 someValue 的上下文设置为函数。最好的解决方案是使用其他人建议的不同名称，如果您不顾一切地使用相同的名称，尽管您可以通过删除*var*关键字将其附加到窗口对象，如下所示：

```
(function($) {

    someValue = 41;

    function someFunction(someValue) {
        console.log(window.someValue); //= 41
        console.log(someValue); //= 22
    }

    someFunction(22);

}(jQuery)); 
```***

# python - SQLAlchemy 吃内存

> ID：13761276
> 
> 赞同：8
> 
> 时间：2012-12-07T10:30:04.997
> 
> 标签：python, memory, sqlalchemy

在用 Python 处理后，我试图将一些 XML 数据导入我的 MySQL 数据库。为简单起见，我通过一个使用 SQLAlchemy 访问我的数据库的脚本来完成这一切。

XML 文件有大约 80,000 个条目，我使用`xml.etree.cElementTree`'s`iterparse`方法处理它，并在使用它们后删除节点以将内存使用量保持在 20mb 左右。

一旦我包含 SQLAlchemy 并开始将内容添加到数据库中，我的内存使用量就会以每秒约 10mb 的速度上升，直到脚本耗尽我的所有内存并且操作系统将其杀死。

这基本上是我的代码的样子：

```
index = 0

for element in iterate_xml():
    ...

    index += 1

    session.add(Model(**data))

    if index % 1000 == 0:
        session.flush()
        session.commit() 
```

我不确定还能尝试什么。定期的`.flush()`，`.commit()`确实有一点帮助，但它们并不能解决问题。

SQLAlchemy 不是完成这项任务的正确工具吗？

* * *

我像这样设置 SQLAlchemy：

```
Base = declarative_base()
engine = create_engine(config.SQLALCHEMY_DATABASE_URI, echo=False)

Session = sessionmaker(bind=engine, autoflush=False, expire_on_commit=False)
session = Session() 
```

我的桌子看起来像这样：

```
columns = []

for name, datatype in structure.iteritems():
    if isinstance(datatype, int):
        datatype = String(datatype or 20)

    column = Column(name, datatype)
    columns.append(column)

metadata = MetaData(bind=engine)
table = Table('table_name', metadata,
    Column('id', Integer, primary_key=True),
    *columns
)

metadata.drop_all(engine)
metadata.create_all(engine)

class MyTable(Base):
    __tablename__ = 'table_name'
    __table_args__ = {
        'autoload': True,
        'autoload_with': engine
    } 
```

`structure`是一个将列名映射到数据类型的字典（它是从 XML 生成的）：

```
structure = {
    'column_name': SQLAlchemyDataType,
    ...
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T14:16:25.953

这是您的代码的仅 SQLAlchemy 版本。在 0.7 和 0.8 测试，它不会泄漏任何内存，这对我来说并不奇怪，因为我们在持续集成下进行了十几个测试，以确保在许多场景下都不会泄漏。所以第一步是确认这个脚本不会泄漏给你，然后试着弄清楚这个脚本和你的脚本之间有什么变化，以产生一个实际显示内存泄漏的测试用例。

```
from sqlalchemy import Column, String, Integer, create_engine
from sqlalchemy.orm import Session
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Model(Base):
    __tablename__ = "a"

    id = Column(Integer, primary_key=True)
    data = Column(String)

e = create_engine("sqlite:///somefile.db")

Base.metadata.create_all(e)

session = Session(e)

for index in xrange(10000000):
    session.add(Model(data="data %d" % index))

    if index % 1000 == 0:
        print "flushing... %d" % index
        session.flush()
        session.commit() 
```

当然，重要的是要注意 SQLAlchemy 过去泄漏内存的那些问题。这是最近修复的泄漏历史：

0.7.8 - 最新的。此处修复的泄漏仅在使用以下情况时发生：1\. C 扩展，2\. pyodbc 驱动程序，在某些结果获取操作期间（不是全部）

0.6.6 - C 扩展中的“十进制”结果处理器有泄漏。

0.6.6 - 如果用于以某些方式选择行，SQLSoup 扩展被识别为存在潜在泄漏（SQLSoup 现在是它自己的项目）

0.5.5 - 修复了当对象被解开并放回会话时潜在的内存泄漏

0.5.4 - 对 Session 的内存使用进行了重大改进。你肯定想远远超过这个版本。

# amazon-ec2 - aws / hadoop 流：将文件作为参数传递给流映射器

> ID：13761280
> 
> 赞同：2
> 
> 时间：2012-12-07T10:30:15.030
> 
> 标签：amazon-ec2, mapreduce, hadoop-streaming

我正在尝试将 S3 目录作为参数传递给弹性 mapreduce 流作业，但似乎 EMR 将我作为参数传递的目录与流映射器本身混淆了。

即当我运行以下它工作正常：

```
 "-mapper","perl sams_to_vcf.pl -ref ./ref_genome.fa -vars-only -no-dups", 
```

但是，如果我添加目录参数：

```
 "-mapper", "perl sams_to_vcf.pl -ref ./ref_genome.fa -vars-only -outdir s3://ht-out/Fd09/combined -no-dups", 
```

我得到以下信息：

```
 "LastStateChangeReason": "Streaming mapper doesn't exist: s3:\/\/ht-out\/Fd09\/combined", 
```

我很确定这是 EMR 或 hadoop 中的错误，但以防万一这不应该起作用的原因？

# asp.net - ASP .NET 检查其他用户是否对文件夹或文件具有权限

> ID：13761282
> 
> 赞同：1
> 
> 时间：2012-12-07T10:30:19.277
> 
> 标签：asp.net, sharepoint-2010

我正在开发一个 SharePoint 2010 Web 部件，它显示指向我们网络（网络共享）内的文件和文件夹的链接。

应用程序池用户有权访问所有文件夹。

如何检查当前登录的 Active Directory 用户是否有权访问该文件夹以最终删除其中一些链接？

也许是模仿？

# c++ - 调试参考值的变化

> ID：13761287
> 
> 赞同：0
> 
> 时间：2012-12-07T10:30:28.677
> 
> 标签：c++, debugging, eclipse-cdt

我有一个这样的方法调用：

```
Time processing = BE_ZERO;
DoSomething(DTO& data, Time& processing)
assert(processing== BE_ZERO); 
```

DoSomething 根据数据的内容向工作人员发送数据。processing 返回处理时间。在这种情况下，处理应该是 0，但我收到一个值！= 0。

现在我试图找到改变处理的地方。

我试图在处理上设置一个观察点，但 Eclipse 告诉我这是不可能的，因为处理不是字段。因此，我尝试向班上的公共成员传达相同的信息。

如何找到更改处理的地方？

谢谢

# c - cscope.out 和 ctags 文件有什么区别

> ID：13761293
> 
> 赞同：0
> 
> 时间：2012-12-07T10:30:49.620
> 
> 标签：c, linux, ctags, cscope

我知道 cscope 和 ctags 这两种工具之间的区别以及何时使用其中的哪一种。我想问的是他们的数据库文件。

默认情况下，`cscope`创建`cscope.out`为其数据库文件，而在其运行的目录中`ctags`创建`tags`。

1.  它们之间有什么重大区别吗？我相信有，因为尺寸有很大不同。cscope.out 大约是标签的 6-7 倍。
2.  一个应用程序可以使用另一个应用程序创建的 db 文件吗？
3.  有没有办法在它们之间转换？（如果选项 2 不可行。）

为什么我想要这个？：在使用 LARGE 代码（如内核源代码左右）时，创建 2 个文件需要很长时间。如果可能的话，我想对两者使用相同的文件。

我将这个问题的范围限制为 C 作为编程语言。因此，如果 2 个工具只查看`.c .h and .s`文件就足够了。

# java - 如何恢复具有多对一关系的 JPA 实体

> ID：13761294
> 
> 赞同：1
> 
> 时间：2012-12-07T10:30:53.113
> 
> 标签：java, jpa, merge, entitymanager

我有一个与其他实体（地址）有 ManyToOne 关系的 JPA 实体（Person）。在系统可以使用一个对象之前，这个对象必须得到主管的批准。我将原始实体存储为 byte[] 并对“工作”实体进行更改并将其存储在数据库中。如果此更改不被批准，我必须恢复原始状态。因此，我将存储的原始数据从 byte[] 转换并使用实体管理器将其合并到数据库中。一切正常，但如果一个新的地址实体已添加到“工作”人员，则在合并恢复的原件后，该实体不会从数据库中删除。我知道为什么会这样，但不知道如何解决我的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:49:59.860

orphanRemoval=true on @ManyToOne solves the problem

# objective-c - 在 Xcode、Objective-C 中没有得到正确的输出

> ID：13761301
> 
> 赞同：0
> 
> 时间：2012-12-07T10:31:19.777
> 
> 标签：objective-c, xcode, output

我正在使用以下代码阅读这本编程书

```
#import "Fraction.h"
int main (int argc, char * argv [])
{
    @autoreleasepool {
        Fraction *f = [[Fraction alloc] init];
        [f noSuchMethod];
        NSLog (@"Execution continues!");
    }
    return 0;
} 
```

显然它应该给我以下输出：

*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[Fraction noSuchMethod]：无法识别的选择器发送到实例 0x103f00”***第一次抛出调用堆栈：“”）

相反，我只是收到一条错误消息：No visible @interface for 'Fraction' declarations the selector 'noSuchMethod'

这是因为我有更新版本的 xcode，还是我做错了什么？这对我来说似乎很简单。

**编辑：**

另外......下面的代码可以在最新版本的xcode中工作吗？

```
int main (int argc, char * argv [])
{
    @autoreleasepool {
        Fraction *f = [[Fraction alloc] init];
        @try {
            [f noSuchMethod];
        }
        @catch (NSException *exception) {
            NSLog(@"Caught %@%@", [exception name], [exception reason]);
        }
        NSLog (@"Execution continues!");
    }
return 0;
} 
```

编辑#2： ![在此处输入图像描述](../Images/55f24714e0a482a6ca078bb7402045c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:33:43.833

如果你调用一个肯定不存在的方法，Xcode 不会让你编译。

否则使用该`performSelector:`方法。

**编辑**

如果你直接调用它不会编译的方法，就像你问的最初的问题一样。

如果由于某种原因您仍然想调用此方法，因为它可能是私有的或其他的，您可以通过 performSelector: 调用它。

它仍然会告诉您该对象可能不会响应它。您可以抑制警告，如您在此处看到的：

[http://www.stackoverflow.com/a/7933931/1320374](http://www.stackoverflow.com/a/7933931/1320374)

# jquery - 选中的jQuery复选框

> ID：13761309
> 
> 赞同：2
> 
> 时间：2012-12-07T10:31:43.170
> 
> 标签：jquery, checkbox

我有这个：

```
<div id="container1">
   <div class="block1">
      <input class="pos2" type="checkbox" /><label>Category1</label><br>
      <input class="pos3" type="checkbox" /><label>Subcategory1</label><br>
      <input class="pos3" type="checkbox" /><label>Subcategory1</label>
   </div>

   <div class="block1">
      <input class="pos2" type="checkbox" /><label>Category2</label><br>
      <input class="pos3" type="checkbox" /><label>Subcategory2</label>
      <input class="pos3" type="checkbox" /><label>Subcategory2</label>
   </div>
</container> 
```

我正在尝试使用 jquery 来自动检查复选框。例如：如果我要检查“pos2”，它将自动检查 pos3。

我用这个：

```
$("#container1 .block1 .pos2").click(function(){
     $(".block1").children(".pos3").attr('checked', 'checked');
}); 
```

但我需要它只检查我点击的 div 中的“pos3”。

**注意：复选框是使用 PHP 从数据库中的条目生成的。它们的数量可能会有所不同，因此我不能在元素上使用 id。**

谁可以帮我这个事？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:34:45.083

尝试这个：

```
$(".pos2").click(function(){
   $(this).siblings(".pos3").attr('checked', 'checked');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:36:04.333

```
$("#container1 .block1 .pos2").on('change', function(){
    $(this).siblings('.pos3').prop('checked', this.checked);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:34:55.580

此代码应该可以工作：

```
$("#container1 .block1 .pos2").click(function(){
    $(this).parent().find('.pos3').attr('checked', 'checked');
}); 
```

在处理函数中`this`指向被点击的对象。将获得该复选框的父级，并且 find 将仅在父级 div 内部[`.parent`](http://api.jquery.com/parent/)搜索（例如）`.pos3``$(".block1 .pos3")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T10:35:13.057

试试下面

```
 $("#container1 .block1 .pos2").click(function(){
    $(this).parents("div.block1:first")
     .children(".pos3").attr('checked', 'checked');
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T10:35:13.163

```
$("#container1 .block1 .pos2").click(function(){
$(this).siblings(".pos3").attr('checked', 'checked');
}); 
```

# c++ - 动态链接遇到dyld:lazy symbol binding failed: Symbol not found:

> ID：13761311
> 
> 赞同：1
> 
> 时间：2012-12-07T10:31:51.787
> 
> 标签：c++, dynamic-linking, libtool

我在`autotool`环境中。

我正在开发一个`A`使用库`B`并`C`作为依赖项的库。

*   我`B`用`libtool`所以输出是`libB.la`
*   我`C`用简单的 Makefile 构建，输出是`libC.a`
*   我也用 libtool 构建`A`，输出是`libA.la`

然后我构建了一个将这些库链接在一起的测试程序。

下面`Makefile.am`是。

```
check_PROGRAMS = acc_test

AM_CPPFLAGS = -I$(top_srcdir)/include \
              -I$(top_srcdir)/deps/C/include \
              -I$(top_srcdir)/deps/B/include

LDADD = $(top_builddir)/src/libA.la \
        $(top_builddir)/deps/B/src/libB.la \
        $(top_builddir)/deps/C/libC.a

acc_test_SOURCES = test.cpp 
```

当我跑步时`acc_test`，我遇到

> dyld：惰性符号绑定失败：找不到符号：__ZN7leveldb7OptionsC1Ev 引用自：/Users/somepath/build/src/.libs/libA.0.dylib 预期在：平面命名空间
> 
> dyld：找不到符号：__ZN7leveldb7OptionsC1Ev 引用自：/Users/somepath/cw/build/src/.libs/libA.0.dylib 预期在：平面命名空间

这是我的主要问题。

在我尝试了很多事情之后，我发现了这一点。

*   `C`调用内部库的某些功能时崩溃`A`。如果我将它们从代码中注释掉`A`，它不会崩溃。
*   `C`情况 1：如果我在 中显式地编写代码`test.cpp`，它不会崩溃。
*   案例2：如果我添加`AM_LDFLAGS = -static`，它不会崩溃。
*   案例3：我尝试用 模拟相同的情况`B`，它不会崩溃。

我的问题如下

1.  为什么它首先会崩溃？我想这是关于动态加载的，但我不完全理解。
2.  在情况 1 中，为什么它不会崩溃？
3.  在情况2中，为什么它不会崩溃？
4.  有没有其他方法可以解决这个问题`-static`？我认为如果用户在想要使用我的库时需要静态链接这些库，这很奇怪`A`
5.  在情况 3 中，为什么它不会崩溃？我注意到许多 lib 的实现`B`都在标题中。是否涉及？

谢谢

# wordpress - 将鼠标悬停在菜单上时，Wordpress 使整个页面不透明

> ID：13761312
> 
> 赞同：0
> 
> 时间：2012-12-07T10:31:53.240
> 
> 标签：wordpress, menu

我有一个客户的要求，不知道这是否可能。我们正在使用 Uber 菜单，当有人将鼠标悬停在菜单上时，网站的其余部分必须变得不透明或变暗或必须褪色。

有谁知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:00:56.120

您可能还想查看 CSS 解决方案，例如：

[http://faavorite.com/faave/73082894943387648](http://faavorite.com/faave/73082894943387648)（底部的小提琴）

或者，根据您的需要进行调整：

[http://css-tricks.com/hover-on-everything-but/](http://css-tricks.com/hover-on-everything-but/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:37:15.643

是的，这称为覆盖。例如，请参见此处（单击示例，然后单击图像）： http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/) 或：http: [//jquerytools.org/documentation/overlay/](http://jquerytools.org/documentation/overlay/)

# ruby-on-rails - 包含的模块方法不能在类方法中调用

> ID：13761318
> 
> 赞同：0
> 
> 时间：2012-12-07T10:32:16.140
> 
> 标签：ruby-on-rails, ruby, regex, include

我有一个`RegexHelper`包含方法的模块来验证字符串是否只是数字：

```
module RegexHelper
  def is_numeric?(str)
    !!str.match(/^[0-9]+$/)
  end
end 
```

我将这个模块包含在几个类中，当我尝试在实例方法中使用它们时效果很好。但是现在我想在类方法中使用它们，它根本不起作用，即使调用`RegexHelper.is_numeric?(my_str)`对我不起作用。

我认为问题可能是`include RegeHelper`在创建新对象时执行。那么，我怎样才能让整个班级都能够完成这项工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:33:33.960

试试这个：

```
extend RegeHelper 
```

`include`用于向类添加实例方法，`extend`用于添加类方法。

# php - WordPress 等 PHP 脚本中出现 cookie 登录问题的原因是什么？

> ID：13761319
> 
> 赞同：0
> 
> 时间：2012-12-07T10:32:15.407
> 
> 标签：php, wordpress, session, web-applications, cookies

我想知道大多数 PHP 脚本（如 Wordpress）中 cookie 登录问题的原因是什么？

这在 WordPress 登录页面和许多其他 PHP 脚本中很常见。有时您无法登录，它会告诉您清除浏览器 cookie 数据。

在我们的 Web 应用程序开发中，哪些因素会导致这个问题以及如何避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:33:33.217

这是一个相当广泛的问题。就我个人而言，我没有使用 Wordpress 体验过，但有可能：分配给用户的 cookie*集*最终处于冲突状态，并且程序不知道如何继续。

例如，假设我们在登录时设置了一个名为“login”的 cookie，其中包含一个用户名。假设我们在注销时设置了一个cookie，称为“注销”，然后我们删除了“登录”cookie。现在，如果我们在登录屏幕上，并且程序接收到两个 cookie，那么很明显它*不应该*失败——“登录”cookie 可以被忽略。但是，某些应用程序可能会感到困惑，并在这些明显冲突的情况下引发错误。开发人员的工作一如既往地进行防御性编程，因此即使有意外的输入，它仍然尽可能地工作。

正如我所说，我没有使用 Wordpress 体验过它，但我最近发现 WP 可能更容易受到它的影响，因为它不使用会话 - 只是 cookie。我发现一个 WP 主机根本不支持`$_SESSION`，因为在托管场中实施起来很棘手。现在，对于会话，如果您取消设置一个值，它将消失，因为您可以在服务器上控制它。但是对于 cookie，如果您取消设置一个值，它只是一个请求，浏览器可能不会接受它，或者客户端时间设置可能错误地允许死 cookie 持续存在。

# android - 从另一个来源加载首选项

> ID：13761322
> 
> 赞同：0
> 
> 时间：2012-12-07T10:32:33.240
> 
> 标签：android

我想从除 Android Shared Preferences XML 文件之外的其他来源加载和存储首选项。我知道可以通过注册**OnPreferenceChangeListener**来跟踪我的 Preference Activity 中的更改，但是如何从我自己的存储中加载首选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:35:49.763

我自己的存储是什么意思？

您可以指定要使用的共享首选项的文件名。还有其他用于保存状态信息的选项。

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# timeout - 螳螂错误报告超时

> ID：13761326
> 
> 赞同：3
> 
> 时间：2012-12-07T10:32:44.533
> 
> 标签：timeout, mantis

当我报告 Mantis 系统中的错误时，有时我需要很长时间才能输入所有信息（>5 分钟），当我最终点击“提交报告”按钮时，Mantis 报告超时。回击并不总是有效，要么我丢失了我输入的所有内容，要么重新提交仍然无效（同样的错误）。

问题：为什么这个“功能”在那里，有没有办法禁用它或让它（很多）超时？

我们正在使用 Mantis 1.2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T12:02:31.767

假设“Mantis 报告超时”，您的意思是*APPLICATION ERROR #2800: Invalid form security token。这可能是由于会话超时或意外提交表单两次造成的。*，那么问题很可能是由 PHP 会话超时引起的。

请参考[MantisBT 管理员指南中相应的故障排除部分](http://www.mantisbt.org/docs/master-1.2.x/en/administration_guide/admin.troubleshooting.html#ADMIN.TROUBLESHOOTING.ERRORS.2800)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T08:41:26.910

您必须在 OFF 中设置 security_validation ： $g_form_security_validation = OFF;

# http - 是否缺少有效的 http 标头应视为有效的 HTTP/0.9 内容

> ID：13761329
> 
> 赞同：0
> 
> 时间：2012-12-07T10:33:18.403
> 
> 标签：http, user-agent

我遇到了一个站点，该站点对于任何 HTTP 请求都返回没有任何标头的 html 文本。浏览器接受它，在“实时标头”中显示为 HTTP/0.9 200 ok

是否应该将任何不以“HTTP/...”开头的 HTTP 响应解释为有效的 HTTP/0.9 内容？

更新：感谢 CodeCaster 的回答，我发现在简单请求的情况下需要使用简单响应来回答。但是在非简单请求的情况下，服务器可以用简单响应来响应吗？我找不到有关此的任何信息。看起来用户代理总是默默地接受简单响应，无论他们的请求状态如何（简单/非简单）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:42:08.910

> [RFC 1945](https://www.rfc-editor.org/rfc/rfc1945#page-22) (HTTP/1.0)：

> Simple-Request 和 Simple-Response 不允许使用任何标头信息，并且仅限于单一请求方法 (GET)。

> ```
>  Simple-Request  = "GET" SP Request-URI CRLF 
> ```

> ```
>  Simple-Response = [ Entity-Body ] 
> ```

> 不鼓励使用 Simple-Request 格式，因为它会阻止服务器识别返回实体的媒体类型。

所以是的，但前提是请求是一个简单的请求（即只有一个 GET 行）。

# r - 用分隔符写函数

> ID：13761331
> 
> 赞同：0
> 
> 时间：2012-12-07T10:33:27.043
> 
> 标签：r

> **可能重复：**
> [使用分隔符写入 csv 文件](https://stackoverflow.com/questions/13758957/write-to-csv-file-using-separator)

我最近问[了这个](https://stackoverflow.com/questions/13758957/write-to-csv-file-using-separator)关于如何编写 csv 的问题。

现在我在数据中有一个包含新闻的列，其中数据中有**多个**“逗号”。当我使用`write.csv()`它时，它将列拆分为带有一些逗号值的不同行。我也尝试`write.csv2()`过`write.table ()`

如何在不拆分列的情况下编写 csv？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:51:35.547

查看帮助文件中 sep 后面提到的内容 ( `help(write.csv)`)

# php - 如何在创建对象时为 stdClass 对象设置属性

> ID：13761335
> 
> 赞同：45
> 
> 时间：2012-12-07T10:33:45.843
> 
> 标签：php, stdclass

我想在单个语句中为*stdClass对象设置属性。*我对此一无所知。我知道以下几点

```
$obj = new stdClass;
$obj->attr = 'loremipsum'; 
```

它需要两个语句。

```
$obj = (object) array('attr'=>'loremipsum'); 
```

它需要单个语句，但不是直接方法。

```
$obj = new stdClass(array('attr'=>'loremipsum')); 
```

它不工作。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-07T10:39:54.030

```
$obj = (object) array(
    'attr'=>'loremipsum'
); 
```

实际上，这就像它会得到的一样直接。即使是自定义构造函数也无法在单个表达式中执行此操作。

强制`(object)`转换实际上*可能*是从数组进行的简单转换，因为在内部，属性也存储在哈希中。

你可以像这样创建一个基类：

```
abstract class MyObject
{
    public function __construct(array $attributes = array())
    {
        foreach ($attributes as $name => $value) {
            $this->{$name} = $value;
        }
    }
}

class MyWhatever extends MyObject
{
}

$x = new MyWhatever(array(
    'attr' => 'loremipsum',
)); 
```

但是，这样做会锁定您的构造函数，要求每个类在覆盖时调用其父构造函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-27T17:05:54.033

尽管 Ja͢ck 给出了一个很好的答案，但重要的是要强调 PHP 解释器本身具有描述[如何正确表示对象或变量](http://php.net/manual/en/function.var-export.php)的方法：

```
php > $someObject = new stdClass();
php > $someObject->name = 'Ethan';
php > var_export($someObject);
stdClass::__set_state(array(
   'name' => 'Ethan',
)) 
```

有趣的是，使用`stdClass::__set_state`无法创建 stdClass 对象，因此显示它可能[是`var_export()`](https://bugs.php.net/bug.php?id=67918). **但是，它确实说明了没有直接的方法来创建具有在对象创建时设置的属性的 stdClass 对象。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-16T18:23:12.293

```
 foreach ($attributes as $name => $value) {
            if (property_exists(self::class, $name)) {
                $this->{$name} = $value;
            }
        } 
```

是最干净的，因为如果您 p​​rint_r(get_object_vars($obj)) 如果属性不存在，它将设置任意属性。

# rest - 具有由客户端分隔的多租户数据库的 Rest API

> ID：13761336
> 
> 赞同：12
> 
> 时间：2012-12-07T10:33:47.187
> 
> 标签：rest, asp.net-web-api

我有一个带有复合键的多租户数据库

```
clientId - docId 
```

路由看起来像这样

```
/api/controller/clientId/docId 
```

对于身份验证，我使用“全局”用户名，例如电子邮件 + 密码，通过 https 在每个请求的 http-header 中发送。用户名显式映射到客户端并在后端可用。

有什么方法可以在休息时正确地做到这一点并拥有最好的安全性？

1.  像上面一样路由，只需根据用户名验证clientId与路由中的相同

或者

1.  如下更改路由并在保存记录之前从数据库中获取 clientId？

    `/api/controller/docId`

这可能是一个显而易见的问题，但我担心潜在的安全问题。还是选择较短的路线只是一个明智的选择？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T11:39:47.573

我认为`/api/controller/docId`可能是最好的主意，或者使用单个代理键来表示 ClientId 和 docId（我的偏好）。

除非您需要允许客户端查看其他客户端资源，否则我会将其隐藏在 URI 方案中，最坏的情况是它可能被认为是信息泄漏，充其量是多余的，因为您已经验证了客户端并且知道他们是谁。这也是一种开销，即您仍然必须检查 url 中的客户端 ID 是否映射到请求的用户名和密码，因此无论如何您都需要检索每个请求的客户端 ID。

如果您查看了其他多租户环境（例如销售人员）的工作方式，您会发现他们必须通过安全机制推断客户端，或者幸运地为每个对象/资源拥有一个唯一的 ID。

我见过的一种方法是将客户端标识符（通常是某种代理键，避免暴露其他用户的 db id！）在 URL 的根目录下，例如 /api/{clientId}/controller/docId。在多租户环境中，每个资源可能/根据定义对于该客户端来说是唯一的。

这种方法有时给出的一个原因是每个客户都有一个唯一的 url 有助于缓存... /api/{clientId}/controller/docId 或 /api/controller/{clientId}/docId

**关于基本身份验证的简要说明**

您的方法没有问题，但请考虑......您可以在验证密码和用户名的同时检索客户端 ID，并将其添加为 IPrinciple 的声明。至少在代码中没有任何进一步的数据库查找以找到它（在该请求的生命周期内）。

更进一步......考虑一个两步身份验证机制，其中颁发令牌（遵循正确的用户名和密码），客户端 ID 实际上在令牌中作为声明。这样，带有令牌的后续请求意味着您不需要为每个请求回调数据库来验证和检索信息。看看 OAuth 不记名令牌[http://self-issued.info/docs/draft-ietf-oauth-v2-bearer.html](http://self-issued.info/docs/draft-ietf-oauth-v2-bearer.html)（一定要签名）或其他一些方法......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T13:55:31.633

Mark 的方法是完全有效的，但是我碰巧使用`/tenant/docid`了，因为每个租户都有不同的数据库。如果您在 URI 中不包含租户，那么尝试决定要连接到哪个数据库并寻找文档将是一件非常痛苦的事情。

# sql - 如何使用 SQL Server 连接选择中的所有列

> ID：13761337
> 
> 赞同：6
> 
> 时间：2012-12-07T10:33:48.870
> 
> 标签：sql, sql-server, sql-server-2008-r2

我需要我的选择有这样的模式：

```
 SELECT '<text> ' + tbl.* + ' </text>' FROM table tbl; 
```

理想的解决方案是将所有列用逗号分隔，以便获得该输出：

表 1 的 SQL 结果有两列：

```
'<text>col1, col2</text>' 
```

表 2 的 SQL 结果，包含三列：

```
'<text>col1, col2, col3</text>' 
```

我尝试使用这样的`CONCAT(...)`功能：

```
SELECT CONCAT('<text>', tbl.*, '</text>')
FROM table2 tbl 
```

但我明白这不是那么简单，因为列数可变。

有没有简单的解决方案来解决这个问题？

我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T10:42:24.270

**给定 tablename 的任意数量的列**；如果您需要用包裹的**列名**`<text>`

```
DECLARE @s VARCHAR(500)

SELECT @s =  ISNULL(@s+', ','') + c.name   
FROM  sys.all_columns c join sys.tables  t 
            ON  c.object_id = t.object_id
WHERE t.name = 'YourTableName'

SELECT '<text>' + @s + '</text>' 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/7f526/7)示例在这里

```
-- RESULTS 
<text>col1, col2, col3,...</text> 
```

如果您需要选择查询**结果集**，则用`<text>`then 包裹；

```
SELECT @S =  ISNULL( @S+ ')' +'+'',''+ ','') + 'convert(varchar(50), ' + c.name    FROM 
       sys.all_columns c join sys.tables  t 
       ON  c.object_id = t.object_id
WHERE t.name = 'YourTableName'

EXEC( 'SELECT ''<text>''+' + @s + ')+' + '''</text>'' FROM YourTableName') 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/7f526/9)示例在这里

```
--RESULTS
<text>c1r1,c2r1,c3r1,...</text>
<text>c1r2,c2r2,c3r2,...</text>
<text>c1r3,c2r3,c3r3,...</text> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T10:38:29.593

[SQL小提琴](http://sqlfiddle.com/#!3/ab734/2)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  ID int identity primary key,
  Name varchar(50),
)

insert into YourTable values
('Name 1'),
('Name 2'),
('Name 3'),
('Name 4'),
('Name 5') 
```

**查询 1**：

```
select (
       select (
              select ', '+T2.N.value('./text()[1]',  'varchar(max)')
              from (
                   select T.*
                   for xml path(''), type
                   ) as T1(N)
                cross apply T1.N.nodes('/*') as T2(N)
              for xml path(''), type
              ).value('substring(./text()[1], 3)',  'varchar(max)')
       for xml path('text'), type
       )
from YourTable as T 
```

**[结果](http://sqlfiddle.com/#!3/ab734/2/0)**：

```
|               COLUMN_0 |
--------------------------
| <text>1, Name 1</text> |
| <text>2, Name 2</text> |
| <text>3, Name 3</text> |
| <text>4, Name 4</text> |
| <text>5, Name 5</text> | 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T11:39:00.127

我尝试了一种更**通用**的方法

```
Create Procedure P_GetConcatColumns(@tablename varchar(200),@Seperator Varchar(20),@StartTag Varchar(20),@EndTag Varchar(20),@WhereString Varchar(400),@OrderString Varchar(400)) as

DECLARE @TmpTableName VARCHAR(100),
        @Columns NVARCHAR(4000),
        @SQL NVARCHAR(MAX),
        @GENNAME VARCHAR(100)

Select  @GENNAME='##'+Replace(Cast(NewID() as Varchar(40)),'-','')

IF OBJECT_ID('tempdb.dbo.' + @GENNAME) IS NOT NULL
BEGIN
    EXEC('DROP TABLE ' +@GENNAME);
END

Select @SQL='SELECT TOP 1 * INTO '+@GENNAME+' FROM ' + @tablename
Exec (@SQL)

SET @TmpTableName = 'tempdb.dbo.' + @GENNAME
SELECT @Columns = 
    STUFF(
    (
    SELECT '+' + @Seperator + '+CAST(Coalesce(' + c.name + ','''') AS VARCHAR(MAX))' + CHAR(13)
    FROM tempdb.sys.columns c
    WHERE c.[object_id] = object_Id(@TmpTableName)
    FOR XML PATH(''),TYPE
    ).value('.','VARCHAR(MAX)')
    ,1,len(@Seperator)+2,'')

--SET @SQL = N'SELECT ' +''''+ @StartTag +''''+'+'+ @Columns +''''+'+'+ @EndTag + ''' FROM ' + @tablename 
SET @SQL = N'SELECT ''' +@StartTag+ '''+'+ @Columns +'+'''+ @EndTag + ''' FROM ' + @tablename 
+' '+Coalesce(@WhereString,'')
+' '+Coalesce(@OrderString,'')
Print @SQL
EXEC sp_executeSQL @SQL

--ExampleCall P_GetConcatColumns 'Arten',''',''','<test>','</test>','where id>1','Order by ID desc' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-19T02:55:49.907

试试下面的代码：

```
SELECT Stuff(
(SELECT N', ' + COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS 
where TABLE_NAME = 'YourTableName' FOR XML PATH(''),TYPE)
.value('text( [1]','nvarchar(max)'),1,2,N'') 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-08-21T07:57:46.360

**IBMDB2：创建带有所需分隔符的文件，例如 delimiter='#|#' 下面的**
*Step1* :-*运行以下查询，您会在 query_to_execute 列中获得 SQL 语句：*

```
select table_name, 'select '||listagg(column_name, '||''#|#''||')||' from '||trim(table_schema)||'.'||(table_name) as query_to_execute
      from qsys2.SYSCOLUMNS                                  
     where table_name in ('YOURTABLE1', 'YOURTABLE2')                             
       and table_schema = 'YOURSCHEMA'                         
     group by table_schema, table_name 
```

**Step2** :-*运行上面形成的查询以获取 SQL 中的分隔文件。*

**Step3a**（如果从本机 iSeries 运行 SQL）：*将结果移动到平面文件，并将平面文件导入/FTP_get 到其他平台。*

**Step3b**（如果使用 Windows 中的查询工具运行 SQL）：将结果导出到您选择的 file_name.xxx。

通过这种方式，您可以使用我们选择的分隔符创建 CSV 或分隔文件。

/尼拉吉·库马尔

# mysql - Mysql 查询、选择、分组和按分钟求和

> ID：13761338
> 
> 赞同：3
> 
> 时间：2012-12-07T10:33:52.630
> 
> 标签：mysql, sum, group-by

我有一个像这样的数据库表：

```
id | donation_type | donation_amount | time_inserted
1    em1              20                2012-12-07 10:01:00
2    em1              50                2012-12-07 10:01:00
3    em1              100               2012-12-07 10:01:00
4    em1              150               2012-12-07 10:02:00
5    em1              100               2012-12-07 10:02:00
6    em1              30                2012-12-07 10:02:00
7    em1              40                2012-12-07 10:03:00
8    em1              65                2012-12-07 11:16:00 
```

我想要一个查询来计算每分钟有多少捐款。
我还想总结一下那一分钟的捐款金额。

所以我想要返回的结果（使用上表将是）：

```
10:00:01 => 3, amount => 170 # 3 donations in 10:01:00, totaling £170
10:00:02 => 3, amount => 280 # 3 donations in 10:02:00, totaling £280
10:00:03 => 1, amount => 40 # 1 donation in 10:03:00, totaling £40
11:16:00 => 1, amount => 65 # 1 donation in 11:16:00, totaling £40 
```

**编辑** - 我希望 SQL 查询返回的示例

```
# Example of what I would like returned..

time                  |  donation_count  | donation_sum_in_minute
2012-12-07 10:01:00           3                  170
2012-12-07 10:02:00           3                  280
2012-12-07 10:03:00           1                  40
2012-12-07 11:16:00           1                  65  #the next hour! 
```

我正在使用以下查询来获取自上午 10 点以来的捐款总额。但我也想按分钟对它们进行分组，给我上面的结果示例。

```
SELECT SUM(donation_amount) 
FROM `DONATION` 
WHERE `time_inserted` > '2012-12-07 10:00:00' 
AND `donation_type` = 'em1';
Returns: 807,563 # the total sum of donations since 10am today. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:10:59.050

```
SELECT 
  SUM(donation_amount) AS total_donation_amount,
  EXTRACT(YEAR from time_inserted) AS year,
  EXTRACT(MONTH from time_inserted) AS month,
  EXTRACT(DAY from time_inserted) AS day,
  EXTRACT(HOUR from time_inserted) AS hour,
  EXTRACT(MINUTE from time_inserted) AS minute
FROM `DONATION`
WHERE `time_inserted` > '2012-12-07 10:00:00' 
AND `donation_type` = 'em1'
GROUP BY year, month, day, hour, minute; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T16:02:46.963

怎么样：

```
SELECT sum(donation_amount), DATE_FORMAT(time_inserted, '%Y-%m-%d %H-%i') as dates, time_inserted FROM `donation`
group by dates
order by dates asc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T10:41:13.370

试试这个：

```
SELECT IFNULL(donation_type, 'Total') donation_type, 
       DATE_FORMAT(time_inserted, '%Y-%m-%d %H-%i') insertTime, 
       SUM(donation_amount), 
       COUNT(donation_type)
FROM `DONATION` 
WHERE `donation_type` = 'em1' 
GROUP BY insertTime WITH ROLLUP; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T10:43:30.393

```
SELECT 
    count(donation_amount) as T_Count,
    sum(donation_amount) as `Sum`
FROM
    donation
GROUP BY 
    time 
```

由于每次都不同，所以这将获取结果OK。

# php - 在 for 循环内对当前 SimpleXMLElement 对象进行 Xpath 查询

> ID：13761339
> 
> 赞同：2
> 
> 时间：2012-12-07T10:34:00.213
> 
> 标签：php, xpath, simplexml

如何在 for 循环内对当前 SimpleXMLElement 对象运行 Xpath 查询。例如

```
<?php
$xml = simplexml_load_string('<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book>
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
</book>

<book>
  <title lang="eng">Learning XML</title>
  <price>39.95</price>
</book>

</bookstore> ');

foreach ($xml as $value) {
    $result = $value->xpath('//title');
    var_dump($result);
    break;
}
?>

array
  0 => 
    object(SimpleXMLElement)[189]
      public '@attributes' => 
        array
          'lang' => string 'eng' (length=3)
      string 'Harry Potter' (length=12)
  1 => 
    object(SimpleXMLElement)[188]
      public '@attributes' => 
        array
          'lang' => string 'eng' (length=3)
      string 'Learning XML' (length=12) 
```

这会输出两个书籍元素的结果，而我的意图是只显示第一个。我试图让查询**只**在 for 循环中的 $value 对象上运行，因为我可能想在每本书上运行不同的查询（所以它必须在一个循环中！）不是在每一本书上，这是它目前的样子正在做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:37:34.020

您可以使用`.`来表示当前节点。所以`./Foo`选择直接的孩子命名`Foo`，并`.//Foo`选择所有的后代命名`Foo`。

如果没有点，`//`则假定引用文档的根，并选择`Foo`整个文档中调用的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:14:36.860

// 从当前节点中选择文档中与选择匹配的节点，无论它们在哪里。

当我运行查询以从根中选择所有节点时，我已经在所需的节点（例如 $value）中，因此从所有节点获取信息。

由于我已经在删除所需的节点元素，因此 // 获得了预期的结果，在当前节点上运行查询。

# apache - 让 WAMP 在 Windows 启动时自动启动（无需登录或任何 UAC 干扰）

> ID：13761340
> 
> 赞同：85
> 
> 时间：2012-12-07T10:34:01.180
> 
> 标签：apache, windows-7, wamp, wampserver

我希望在打开计算机时启动 WAMP。理想情况下，它甚至无需用户登录即可启动。我已将 WAMP 添加到注册表的启动中，但用户需要登录并且 UAC 仍在发挥它令人讨厌的部分。

有没有办法在不登录或 UAC 干扰的情况下做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2012-12-07T10:47:47.100

按照这些说明在启动时启动相应的 WAMP 服务。UAC 不会干扰这里，也不需要登录来启动你的网络服务器：

1.  以管理员身份登录。

2.  开始 -> 运行“services.msc”

3.  右键单击服务**wampapache**（也可能称为**wampapache64**）。转到属性并将启动类型设置为“自动”

4.  如果您希望 MySQL 在启动时也可用，则对**wampmysqld**（或**wampmysqld64**）重复步骤 3

![在此处输入图像描述](../Images/7e40d701fdded4cce4e327c32c51edc3.png)

在 Windows 7-10 上试用和测试

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-06-15T08:18:24.813

1) 打开任务计划程序
2) 在“操作”下 > 创建任务
3) 命名
4) 触发器 > 新建 > 开始任务 > “启动时”<br/> 5) 操作 > 新建 > 浏览 > c:\wamp \wampmanager.exe
6) 点击 OK
7) 重启并检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T20:46:21.233

1) 你需要创建一个批处理文件，路径为**wampserver.exe** 2) 使 Windows 任务计划程序运行批处理文件 3) 打开**Startup:shell**使批处理文件在计算机启动时自动运行 4) 禁用**UAC**把它在**NERVER NOTIFY**模式下，当 Wamp Server 启动时您没有消息。

我在这里找到了一个提供所有步骤和视频的博客：[https ://ddroid509ht.blogspot.com/2019/07/open-wamp-server-on-startup.html](https://ddroid509ht.blogspot.com/2019/07/open-wamp-server-on-startup.html)

# prolog - 从prolog中的嵌套结构创建列表

> ID：13761341
> 
> 赞同：0
> 
> 时间：2012-12-07T10:34:03.380
> 
> 标签：prolog

我想在序言中创建一个包含嵌套结构系数的列表。

例如：（`structure`--> 返回值）

`item(koeffizient(2), exponent(2), item(koeffizient(3), exponent(3)))`--> [0,0,2,3]

`item(koeffizient(5), exponent(0), item(koeffizient(1), exponent(1), item(koeffizient(3), exponent(3))))`--> [5,1,0,3]

`item(koeffizient(5), exponent(0))`--> [5]

`item(koeffizient(5), exponent(0), item(koeffizient(2), exponent(2)))`--> [5,0,2]

我怎样才能以递归方式做到这一点？其实我不知道我怎么能做到这一点。

谢谢你能给我的任何帮助=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:08:56.573

首先请注意，按照定义的方式使用递归结构并不是一个好主意，因为它将最后一项与其他项区分开来。

假设您的结构按指数排序（如您的示例所示），您可以贪婪地做到这一点：

```
structure(Struct, Exps):-
  structure(Struct, 0, Exps).

structure(item(koeffizient(Coeff), exponent(Exp)), Exp, [Coeff]).
structure(item(koeffizient(Coeff), exponent(MExp)), Exp, [0|Tail]):-
  MExp > Exp,
  succ(Exp, NExp),
  structure(item(koeffizient(Coeff), exponent(MExp)), NExp, Tail).
structure(item(koeffizient(Coeff), exponent(Exp), StructTail), Exp, [Coeff|Tail]):-
  succ(Exp, NExp),
  structure(StructTail, NExp, Tail).
structure(item(koeffizient(Coeff), exponent(MExp), StructTail), Exp, [0|Tail]):-
  MExp > Exp,
  succ(Exp, NExp),
  structure(item(koeffizient(Coeff), exponent(MExp), StructTail), NExp, Tail). 
```

过程只是用指数 0`structure/2`调用。`structure/3`

的第一个子句`structure/3`是基本情况。它返回最后一个指数的系数。

当当前指数不匹配时，第二个子句匹配基本情况。所以在这种情况下，我们返回一个零作为下一个系数，增加当前指数并应用递归。

当当前指数与结构的当前指数匹配时，第三个子句匹配递归情况。所以它返回相应的系数，增加当前指数并再次应用递归。

最后一个子句类似于第二个子句，但适用于仍然有更多项目的输入结构（除了当前的）。

如果，正如您的评论所说，输入没有排序，那么最好将您的输入转换为 Exp-Coeff 形式的有序元组列表。

使用这样的列表，您的`structure/2`程序保持不变，您可以简化`procedure/3`为：

```
structure([], _, []).
structure([Exp-Coeff|Tail], Exp, [Coeff|TailCoeffs]):-
  succ(Exp, NExp),
  structure(Tail, NExp, TailCoeffs).
structure([MExp-Coeff|Tail], Exp, [0|TailCoeffs]):-
  MExp > Exp,
  succ(Exp, NExp),
  structure([MExp-Coeff|Tail], NExp, TailCoeffs). 
```

# android - Testroid 代码与 Robotium 不同

> ID：13761342
> 
> 赞同：0
> 
> 时间：2012-12-07T10:34:17.343
> 
> 标签：android, robotium

我为我录制并 testroid 生成了 Robotium 代码：

```
public void testRecorded() throws Exception {
        try {
            solo.waitForActivity("SplashScreen");
            solo.waitForActivity("TutorialActivity");
            solo.sleep(3100);
            solo.drag(solo.toScreenX(0.988f), solo.toScreenX(0.134f),
                solo.toScreenY(0.523f), solo.toScreenY(0.581f), 6); 
```

但是当我在我手动编写的 Robotium 代码中粘贴相同的代码时，它无法识别 solo.toScreen、solo.clickOnView(solo.findViewById

它给出了无法解决的错误..

是否有一些不在 Robotium 中的 testroid 内置类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:24:07.003

Testdroid Recorder 使用额外的库，它有 ExtSolo 类。这个类扩展了 Solo 并提供了额外的方法。Api 和库可以在这里找到：http: [//docs.testdroid.com/_pages/extsolo.html](http://docs.testdroid.com/_pages/extsolo.html)

# c++ - C ++模板奇怪的语法让我讨厌

> ID：13761344
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:34:22.197
> 
> 标签：c++, templates

这是编译和运行良好的完整代码：

```
 # include <iostream>

using namespace std;

template<class T> class A { };

template<int i> class B { };

class C {
   public:
      int x;
};

class D {
   public:
      C y;
      int z;
};

template<class T> void f (T)          { cout << "T" << endl; };
template<class T> void f1(const T)    { cout << "const T" << endl; };
temlate<class T> void f2(volatile T) { cout << "volatile T" << endl;  };
template<class T> void g (T*)         { cout << "T*" << endl; };
template<class T> void g (T&)         { cout << "T&" << endl; };
template<class T> void g1(T[10])      { cout << "T[10]" << endl;};
template<class T> void h1(A<T>)       { cout << "A<T>" << endl; };

void test_1() {
   A<char> a;
   C c;

   f(c);   f1(c);   f2(c);
   g(c);   g(&c);   g1(&c);
   h1(a);
}

template<class T>          void j(C(*)(T)) { cout << "C(*) (T)" << endl; };
template<class T>          void j(T(*)())  { cout << "T(*) ()" << endl; }
template<class T, class U> void j(T(*)(U)) { cout << "T(*) (U)" << endl; };

void test_2() {
   C (*c_pfunct1)(int);
   C (*c_pfunct2)(void);
   int (*c_pfunct3)(int);
   j(c_pfunct1);
   j(c_pfunct2);
   j(c_pfunct3);
}

template<class T>          void k(T C::*) { cout << "T C::*" << endl; };
template<class T>          void k(C T::*) { cout << "C T::*" << endl; };
template<class T, class U> void k(T U::*) { cout << "T U::*" << endl; };

void test_3() {
   k(&C::x);
   k(&D::y);
   k(&D::z);
}

template<class T>     void m(T (C::*)() )
   { cout << "T (C::*)()" << endl; };
template<class T>     void m(C (T::*)() )
   { cout << "C (T::*)()" << endl; };
template<class T>     void m(D (C::*)(T))
   { cout << "D (C::*)(T)" << endl; };
template<class T, class U>  void m(C (T::*)(U))
   { cout << "C (T::*)(U)" << endl; };
template<class T, class U>  void m(T (C::*)(U))
   { cout << "T (C::*)(U)" << endl; };
template<class T, class U>  void m(T (U::*)() )
   { cout << "T (U::*)()" << endl; };
template<class T, class U, class V> void m(T (U::*)(V))
   {
 cout << "T (U::*)(V)" << endl; };

void test_4() {
   int (C::*f_membp1)(void);
   C (D::*f_membp2)(void);
   D (C::*f_membp3)(int);
   m(f_membp1);
   m(f_membp2);
   m(f_membp3);

   C (D::*f_membp4)(int);
   int (C::*f_membp5)(int);
   int (D::*f_membp6)(void);
   m(f_membp4);
   m(f_membp5);
   m(f_membp6);

   int (D::*f_membp7)(int);
   m(f_membp7);
}

template<int i> void n(C[10][i]) { cout << "E[10][i]" << endl; };
template<int i> void n(B<i>)     { cout << "B<i>" << endl; };

void test_5() {
   C array[10][20];
   n(array);
   B<20> b;
   n(b);
}

template<template<class> class TT, class T> void p1(TT<T>)
   { cout << "TT<T>" << endl; };
template<template<int> class TT, int i>     void p2(TT<i>)
   { cout << "TT<i>" << endl; };
template<template<class> class TT>          void p3(TT<C>)
   { cout << "TT<C>" << endl; };

void test_6() {
   A<char> a;
   B<20> b;
   A<C> c;
   p1(a);
   p2(b);
   p3(c);
}

int main() { test_1(); test_2(); test_3(); test_4(); test_5(); test_6(); } 
```

我的生活和大脑中所有问题的原因是：`test_3()`

便于阅读的相关代码：

```
class C {
   public:
      int x;
};

template<class T>          void k(T C::*) { cout << "T C::*" << endl; };
template<class T>          void k(C T::*) { cout << "C T::*" << endl; };
template<class T, class U> void k(T U::*) { cout << "T U::*" << endl; };

void test_3() {
   k(&C::x);
   k(&D::y);
   k(&D::z);
} 
```

这段代码最让我讨厌：

```
template<class T>          void k(T C::*) 
```

我的意思是那是什么样的语法以及它如何正常工作。为什么我们需要`T`之前`C::*`或`C`之前`T::*`反之亦然。请帮助我，有人告诉我为什么这种语法如此奇怪以及它是如何工作的。

我是 C++ 新手，在 C#、C 和 OOP 方面有很好的经验。请解释语法和任何替代方式/语法，以更简洁的方式编写上述代码行（如果有）。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T10:45:02.013

`T C::*`声明[指向`C`](https://stackoverflow.com/questions/670734/c-pointer-to-class-data-member)具有该类型的类的任何成员的指针`T`（其中`T`是模板参数）。参数没有名称，因此不能在函数内部使用。它仅用于重载解析。`C T::*`和也是如此`T U::*`。

从实例化中可以看出它起作用的原因：

```
k(&C::x); 
```

这解决了第一个重载，并且`T`将被推断为具有 type `int`，因为`C::x`is 属于 type `int`。

```
k(&D::y); 
```

这解决了第二个重载，因为`D::y`它的类型是`C`. `T`将被推断为有 type `D`。

```
k(&D::z); 
```

这解决了第三个重载。`T`将被推断为有类型`D`并且`U`将被推断为有类型`int`，因为`D::z`is of type `int`。

总而言之，我想说这个例子可能是为了迷惑人们。如果它是作为一个教程，它可以做更好的命名和一些评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:50:43.277

看起来该程序演示了各种重载解决方案。这只是练习语法。

`T C::*`声明一个对象，该对象引用类型为 的类的`C`成员`T`。要引用类的成员，您需要类的类型和成员的类型。声明中的`::`运算符对应于初始化中使用的运算符：

```
T C:: *x = & C::q; 
```

这里的`*`指针声明符匹配地址操作符`&`，类似于声明和初始化指针`T *y = & r;`。引用类成员的对象称为*指向成员*的指针，因为它在语法中看起来像一个指针。（但在引擎盖下它根本不是指针。）

指向成员的指针很少使用，在您更熟悉 C++ 之前，您可以放心地忽略它们。

这与模板没有任何特别的关系，程序只是使用指向成员的指针，因为它涉及两个底层类型`T`和`C`，并且模板重载决议根据签名中 T 和 C 的具体程度选择其中一个函数匹配参数类型的 T 和 C 部分。

# java - 当对象尚未初始化时如何跳过while（）循环的条件？

> ID：13761350
> 
> 赞同：0
> 
> 时间：2012-12-07T10:34:59.450
> 
> 标签：java, while-loop, initialization

我收到 NullPointerException 是因为我尝试从尚未初始化的对象中检查一些值，并且值仍然是`null`值。这样做的原因是我只在必要时等待初始化对象，当不需要时我认为我不需要浪费更多的内存空间。

我收到此异常是因为`player2.getHandTotal()`尚未初始化，因此没有方法可以从中提取值。现在，当我检查一个值时，我应该如何制定我的 while 循环以不抛出这个异常？我试图抛出`(player2 != null && dealer.getHandTotal() <= player2.getHandTotal())`并希望短路检查它，但这不起作用......

意思是当牌为同一玩家的 2 手`player2`时将使用的手。`split`如果没有要求，`split`例如没有 2 张卡片或卡片等级不一样，那么我不需要`player2`初始化对象。

**我真的不想加倍我的代码！这样做的原因是我必须加倍很多代码！**`player2`即使没有必要，我也会更好地初始化对象！

如何解决这个问题？

```
while(dealer.getHandTotal() <= 15 && 
        (dealer.getHandTotal() <= player.getHandTotal() || 
        dealer.getHandTotal() <= player2.getHandTotal()))
{
    deck = drawFromDeck(deck, dealer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:12:52.610

添加的条件*player2 != null*应该可以工作。还有什么东西会抛出 NullPointerException 吗？进行以下更改后，您能否向我们展示堆栈跟踪？

```
while (dealer.getHandTotal() <= 15 && 
        (dealer.getHandTotal() <= player.getHandTotal() || 
        (player2 != null && dealer.getHandTotal() <= player2.getHandTotal())))
{
    deck = drawFromDeck(deck, dealer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:15:06.957

> player2 的意思是当牌被分成 2 手给同一个玩家时使用的手。如果没有拆分要求，例如没有 2 张卡片或卡片等级不一样，那么我不需要初始化 player2 对象。

所以你的类结构不正确：玩家（和庄家）应该有一个或多个手，条件应该是这样的：

```
while(dealer.getHand().getTotal() <= 15 && 
        dealer.getHand().getTotal() <= getMaximumHandTotal()) {
   ...
}

private int getMaximumHandTotal() {
   int max = -1;
   for(Hand hand : player.getHands()) {
      if(hand.getTotal() > max) { max = hand.getTotal(); }
   }
   return max;
} 
```

然后在将来当你想添加额外的玩家时，你只需要在 getMaximumHandTotal() 中为所有玩家添加一个额外的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:45:13.687

我了解您不想浪费内存空间，但我不知道这是否可能。可能是这样，但我更愿意在循环周围或循环内部使用 try-catch 块来捕获 NullPointerException。

```
try{
  while(dealer.getHandTotal() <= 15 && 
        (dealer.getHandTotal() <= player.getHandTotal() || 
        dealer.getHandTotal() <= player2.getHandTotal()))
  {
    deck = drawFromDeck(deck, dealer);
  }

} catch (NullPointerException npe){
  // do something
} 
```

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T10:39:33.797

你能在进入循环之前检查所有值是否为空吗？像这样说`if(object1 != null && object2 !=null )`或者如果它是原始类型 if(value == -1 || value == 0)`。因此，在您进入循环之前，您必须对所有值进行验证

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T10:42:02.453

`player2.getHandTotal`当您不确定它不会为空时，您不能在条件语句中使用。

当 player2 为 null 时，这意味着满足第一个条件，但也意味着第二个条件将抛出 a `NullPointerException`，因为您在那里使用相同的引用和方法。

我建议在进入 while 循环之前检查一些值是否为空。

# asp.net - 正则表达式，检查几个可能的字符串的一次出现

> ID：13761360
> 
> 赞同：0
> 
> 时间：2012-12-07T10:35:29.760
> 
> 标签：asp.net, regex

我需要一个正则表达式验证器控件的正则表达式，其中输入字段必须恰好包含以下 1 个：

"youtube.com/watch?v=" 或 "vimeo.com/" 或 "youtu.be/"

如果这些字符串中的任何一个出现不止一次或根本不出现，则表达式应该会失败，以便我可以通知用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:37:10.497

这里不需要正则表达式！

你可以使用[String.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法

* * *

或者如果你需要正则表达式

```
^.*?(youtube\.com/watch\?v\=|vimeo\.com/|youtu\.be/).*$ 
```

# rewrite - 当我添加 wordpress 重写规则时出现 aspx 页面错误

> ID：13761365
> 
> 赞同：1
> 
> 时间：2012-12-07T10:35:46.363
> 
> 标签：rewrite

我有一个有许多 aspx 页面的网站。

我最近在根目录上添加了一个 wordpress 博客，所有这些都可以工作。

现在我试图更改永久链接以摆脱帖子中的 index.php。

重写 2.0，快速 CGI，PHP 5

我将此代码添加到我的 web.config 文件和 wordpress 与漂亮的永久链接完美配合：

```
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="wordpress" patternSyntax="Wildcard">
                <match url="*" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                <action type="Rewrite" url="index.php" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

现在我的使用重写的 aspx 页面也无法加载给我一个 404 ......一旦我从 web.config aspx 页面中删除上述代码就一切正常！

任何人有任何想法如何使这项工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:15:43.443

我建议尝试：

```
<system.webServer>
  <rewrite>
    <rules>
        <rule name="wordpress" patternSyntax="Wildcard">
            <match url="*.aspx" negate="true" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
            <action type="Rewrite" url="index.php" />
        </rule>
    </rules>
  </rewrite>
</system.webServer> 
```

这应该将除**.aspx**请求之外的所有内容发送到 index.php，我相信这是您在这里想要实现的。关键变化是：

**匹配 url="*.aspx" 否定="true"**

# android - 如何在 Android 中不使用 GPS 获取纬度经度值？

> ID：13761367
> 
> 赞同：1
> 
> 时间：2012-12-07T10:35:51.900
> 
> 标签：android

我有一个没有 GPS 模块的设备。有没有办法在不使用 Android 中的 GPS 模块的情况下获得 Lat Lon 值。

嘿，选民们，你能解释一下这个问题有什么问题吗？如果您对该问题有答案，请尝试理解这些问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T10:39:37.183

如果您的设备没有 GPS，那么您也可以使用 Network_Provider 获取纬度和经度，使用下面的代码使用 Network_Provider 获取纬度和经度，它将解决您的问题。

```
LocationManager lm = (LocationManager) GlobalApplication
            .getAppContext().getSystemService(Context.LOCATION_SERVICE);

Location location = lm
            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

if(location != null){
    double latitude = location.getLatitude();
    double longitude = location.getLongitude();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T10:43:58.390

只需将 Java 类放在您的包中即可。

**我的位置.java**

```
 import java.util.Timer;
import java.util.TimerTask;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public class MyLocation {
    Timer timer1;
    LocationManager lm;
    LocationResult locationResult;
    boolean gps_enabled=false;
    boolean network_enabled=false;

    public boolean getLocation(Context context, LocationResult result)
    {
        //I use LocationResult callback class to pass location value from MyLocation to user code.
        locationResult=result;
        if(lm==null)
            lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        //exceptions will be thrown if provider is not permitted.
        try
        {
            gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
        try
        {
            network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }

        //don't start listeners if no provider is enabled
        if(!gps_enabled && !network_enabled)
            return false;

        if(gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
        if(network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
        timer1=new Timer();
        timer1.schedule(new GetLastLocation(), 20000);
        return true;
    }

    LocationListener locationListenerGps = new LocationListener() 
    {
        public void onLocationChanged(Location location) 
        {
            timer1.cancel();
            locationResult.gotLocation(location);

          //  lm.removeUpdates(this);
            //lm.removeUpdates(locationListenerNetwork);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    LocationListener locationListenerNetwork = new LocationListener()
    {
        public void onLocationChanged(Location location) 
        {
            timer1.cancel();
            locationResult.gotLocation(location);
           // lm.removeUpdates(this);
         //   lm.removeUpdates(locationListenerGps);
        }
        public void onProviderDisabled(String provider) {}
        public void onProviderEnabled(String provider) {}
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    };

    class GetLastLocation extends TimerTask 
    {
        @Override
        public void run() {
             //lm.removeUpdates(locationListenerGps);
             //lm.removeUpdates(locationListenerNetwork);

             Location net_loc=null, gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             if(network_enabled)
                 net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null && net_loc!=null){
                 if(gps_loc.getTime()>net_loc.getTime())
                     locationResult.gotLocation(gps_loc);
                 else
                     locationResult.gotLocation(net_loc);
                 return;
             }

             if(gps_loc!=null){
                 locationResult.gotLocation(gps_loc);
                 return;
             }
             if(net_loc!=null){
                 locationResult.gotLocation(net_loc);
                 return;
             }
             locationResult.gotLocation(null);
        }
    }

    public static abstract class LocationResult
    {
        public abstract void gotLocation(Location location);
    }
} 
```

现在，在您的活动中，您可以找到如下代码所示的位置：

```
 public static Location loc;

        @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash_layout);

        // to Find the Location 
        LocationResult locationResult = new LocationResult(){
            @Override
            public void gotLocation(final Location location){
                loc=location;
                System.out.println("Latitude: "+loc.getLatitude());
                System.out.println("Longitude: "+loc.getLongitude());
            }
        };

        MyLocation myLocation = new MyLocation();
    myLocation.getLocation(SplashActivity.this, locationResult);
    }
} 
```

使用上面的代码，您不必在设备中使用 GPS。它将自动检查最佳可用的位置管理器并根据它找到位置。

它还需要 AndroidManifest.xml 文件中的一些权限。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T10:39:11.627

```
 Location location =myManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
    latPoint=location.getLatitude();
    lngPoint=location.getLongitude(); 
```

希望这会帮助你。在这里，我们使用不使用 GPS 的网络提供商获取纬度和经度。这就是你想要的。

# html - Internet Explorer 8 中隐藏的顶部 TD 边框

> ID：13761374
> 
> 赞同：2
> 
> 时间：2012-12-07T10:36:02.633
> 
> 标签：html, css, html-table, internet-explorer-8, border

我一整天都在尝试解决这种风格问题，但徒劳无功。

[http://jsfiddle.net/9HP9Q/1/](http://jsfiddle.net/9HP9Q/1/)

表格线周围必须有灰色边框。它适用于除 Internet Explorer 8 以外的所有浏览器。

```
.order_table table {
  border-collapse: collapse;
}
.order_table table tbody tr {
   border: 1px solid #DEDEDE;
} 
```

它确实为整个表格提供了边框，除了第一个`<TD>`，但后来我尝试使用强制它

```
.order_table table td.product_format {
  border-bottom: 1px solid #DEDEDE;
  border-top: 1px solid #DEDEDE;
} 
```

但它没有用。任何人都可以指导我正确的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:25:29.797

### 问题：

```
.order_table table tbody tr {
   border: 1px solid #DEDEDE;
   //IE put the background color upside the border
   background-color: #FAFAFA;
} 
```

### 解决方案：

```
.order_table table tbody tr {
   border: 1px solid #DEDEDE;
   //Deleted the background-color
} 
```

### 工作示例：

[http://jsfiddle.net/9HP9Q/2/](http://jsfiddle.net/9HP9Q/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:32:43.913

我想你想要小提琴中的输出[http://jsfiddle.net/9HP9Q/3/](http://jsfiddle.net/9HP9Q/3/)

我刚刚将颜色更改为红色以便于查看，所以请根据需要进行更改。

```
.product_name {
font-size: 30px;
font-family: 'MisoBold';
text-transform: uppercase;
color: #3F3F3F;
}
.order_table table {
margin-left: 0px;
width: 390px;
xheight: 100px;
border-collapse: collapse;
}
thead {
border-bottom: 1px solid #D5D3D0;
margin-bottom: 5px;
}

.order_table table {
border-collapse: collapse;
}
.order_table table tbody tr {
/*border: 1px solid #DEDEDE;*/
    border: 1px solid red;
/*background-color: #FAFAFA;*/
}
.order_table table td.product_format {
border-collapse: collapse;
padding-left: 20px;
font-weight: bold;
/*border-bottom: 1px solid #DEDEDE;
border-top: 1px solid #DEDEDE;*/
border-color: #DEDEDE;
position: relative;
height: 1px;
}
.price-promo {
top: 0 !important;
}
.qty_selector {
padding: 0px;
background: none;
border-top: none;
float: left;
  clear: both;
}
input[type="text"] {
width: 58px;
border: 1px solid #DEDEDE;
color: #333;
height: 23px;
padding-left: 8px;
overflow: hidden;
}
.qty_selector .qty_btn {
width: 11px;
margin-top: -2px;
padding-left: 3px;
background: none;
height: 32px;
  display: inline-block;
  vertical-align: middle;
}
.qty_selector .qty_btn a {
width: 11px;
padding: 0px;
background: none;
float: left;
margin: 1px 5px 1px 0;
}
.order_table table td {
vertical-align: middle;
padding: 7px;
}
.order_table table td.unit_price {
padding-right: 0;
text-align: center;
}
.unit_price .pricebykg {
font-size: 10px;
font-family: Arial, Helvetica, sans-serif;
margin-top: 10px;
} 
```

我已经评论了不必要的代码。

请让我知道我是否落后于某些地方来理解您的问题。

# git - Git：差异/合并输出中 +/- 符号的数量是什么意思？

> ID：13761376
> 
> 赞同：43
> 
> 时间：2012-12-07T10:36:04.910
> 
> 标签：git, diff

> **可能重复：**
> [Git Merge：这是什么意思？](https://stackoverflow.com/questions/4965322/git-merge-what-does-this-mean)
> [git diff --stat 解释](https://stackoverflow.com/questions/7024848/git-diff-stat-explanation)

抱歉这个愚蠢的问题，但我在任何地方都找不到明确的答案。

当你在 git 中合并两个分支时，你会得到这样的输出：

```
 some_file.txt  |  564 ++++++++++++++-- 
```

我不明白 `+`，`-`意思是添加和删除，但是：

*   ***符号的数量*代表什么？** 当您几乎没有更改时，每个符号似乎代表一条线，但是当您有更多符号时，我无法理解表示的逻辑

*   **是某种百分比的变化吗？**我的猜测是符号的数量代表了相对数量的变化——但相对于什么？当前文件？整个合并？

*   **它是如何计算的？**有这方面的*官方*消息吗？到目前为止，我对此的最准确答案是“这种表示不是很精确”......我只是好奇

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-07T12:57:03.587

它应该反映列出的每个文件的更改数量（以行为单位）。
加号表示添加，减号表示删除。

**编辑：***564*
给出 了更改的行数，而*-* / *+*给出了删除/添加的比例。 当更改的数量可以容纳一行时，每次添加都会得到“ *+* ”，每次删除都会得到“ *- ”；* 否则，这是一个近似值，例如

 ***```
CHANGES.txt     |   47 +++++++++++++++++++++++++++++++++
make-release.py |   77 +++++++++++++++++++++++++++++++++++++++----------------
2 files changed, 102 insertions(+), 22 deletions(-) 
```

`CHANGES.txt`因为你可以看到没有' *-* '，并且因为 47 ' *+* ' 很多，所以你有一个比例的数量（即 100%）。你会看到*x39* ' *+*
' 代表55 个添加，*x16* ' *-* ' 代表 22 个删除。 正好是它们的比例，正好适合输出画面的量。`make-release.py`

 ***希望有帮助。******

# text - 使用 sed 或 awk 修改文件中的文本

> ID：13761379
> 
> 赞同：0
> 
> 时间：2012-12-07T10:36:17.190
> 
> 标签：text, sed, awk, editing

我正在尝试修改文件以打印第二列的一部分，并在其下方的行上显示相应的序列。我试过 awk、sed 和 grep，但我只得到了部分文本。

```
>hg19_ct_UserTrack_3545_(null) range=chr1:20802866-20802871 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATAAG
>hg19_ct_UserTrack_3545_(null) range=chr1:23866529-23866534 5'pad=0 3'pad=0 strand=+ repeatMasking=none
TTATCT
>hg19_ct_UserTrack_3545_(null) range=chr1:24345525-24345530 5'pad=0 3'pad=0 strand=+ repeatMasking=none
GATAAG 
```

到

```
chr1 20802866 20802871  GATAAG
chr1 23866529 23866534  TTATCT
chr1 24345525 24345530  GATAAG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:43:37.663

```
$ sed 'N; s/.*range=\([[:alnum:]]*\):\([[:digit:]]*\)-\([[:digit:]]*\).*\n\([[:alpha:]]*\)/\1 \2 \3 \4/' test.fa
chr1 20802866 20802871 GATAAG
chr1 23866529 23866534 TTATCT
chr1 24345525 24345530 GATAAG 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:23:24.680

另一种解决方案：

```
awk -F "[=: -]" '{getline a; print $3,$4,$5,a}' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:48:43.347

```
awk -F'[=: -]' '/^>/{s=$3" "$4" "$5; next} {print s,$0}' file 
```

# objective-c - 内存之间是否存在差异：将数组中的数据存储为 NSDictionary 或作为单独的模型对象？

> ID：13761380
> 
> 赞同：0
> 
> 时间：2012-12-07T10:36:18.687
> 
> 标签：objective-c, memory-management

假设我有一个数组**employees1**：

```
[
{"id":"1", "name":"Bill"},
{"id":"2", "name":"Jhon"},
{"id":"3", "name":"Almas"},
] 
```

或带有对象的数组**employees2 ：**`Employee`

```
@interface Employee : NSObject {
    NSNumber *employeeID;
    NSString *name;
}
@property (nonatomic, retain) NSNumber *employeeID;
@property (nonatomic, retain) NSString *name; 
```

第二种情况更面向对象，易于在大型项目中使用。
如果我有很多员工，**employee2数组会分配比****employee1**更多的（2x，3x ...）内存吗？他们有多少不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:51:10.063

在大多数情况下，使用面向对象的模型可能会降低内存占用，因为您不需要`NSDictionary`实例的开销。

但是，您可以（就像我刚才所做的那样）编写一个简单的测试用例并在 Instruments 上运行它来证明给自己看。在这种情况下，我使用您的模型构建了这样一个测试，创建了 10K 个对象，并显示使用自定义对象您的整体内存占用减少了约 23%。

总是更好地进行测试，尽管老实说面向对象模型是如此清晰，以至于从长远来看，内存占用的微小差异即使是负差异也可能更好。

发表评论：我在这里和其他地方看到了许多与构建应用程序的整个模型层有关的`NSDictionary`问题`NSArray`。我无法想象永久维护该代码会多么令人头疼。使用面向对象更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:45:38.130

在真正成为问题之前，您真的不应该担心这些事情。如果内存**是**个问题，你应该通过不总是让所有员工同时在内存中来解决它，即将数据持久化到磁盘，并在需要时获取它。 [这是关于内存管理以及如何防止与内存相关的问题的指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。

# android - 从另一个视图返回后显示视图时如何捕获事件？

> ID：13761381
> 
> 赞同：0
> 
> 时间：2012-12-07T10:36:17.393
> 
> 标签：android, back-button

一个简单的问题，我就是找不到答案...

我有视图A和B，点击A上的一个按钮后，B出现，此时如果我点击设备上的返回按钮，A将再次显示。现在我在 B 中更改了一些东西，希望它会影响 A，例如通过全局变量设置 A 的背景颜色，这样当按下后退按钮时，A 的背景颜色会发生变化，我该怎么做呢？单击后退按钮显示 A 时会触发什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:41:45.820

您应该从 B 显式返回。所以应该有一个颜色选择器和 OK 按钮。该按钮应该关闭活动 B 并为 A 返回值。然后 A 将在 *onActivityResult*方法中检索该值。

后退按钮并非旨在提供结果。因此，如果您想要您描述的行为。然后当有人在 B 活动中选择颜色时，立即将其保存在 Shared Preferences 中（记得给文件命名）。*然后在活动 A 的onResume*方法中读取相同的首选项文件并相应地设置背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:43:58.623

首先，您需要覆盖 A 中的`onResume()`方法。`onResume()`一旦 A 恢复可见，将被触发。

然后您可以`onBackPressed()`在 B 中实现方法，以保存您通过`SharedPreference`或其他方式进行的设置。然后在 A 上检索它`onResume()`。

因此，整个解决方案将如下所示：

活动A：

```
@Override
public void onResume() {
super.onResume();
//blah blah
//Retrieve SharedPreferences or the saved data from B
} 
```

活动 B：

```
@Override
public void onBackPressed() {
//save your data or settings here
} 
```

我认为[Document 中的 Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)可以帮助您弄清楚它是什么`onResume()`以及何时触发。

在[文档](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)`onBackPressed()`中。

还有[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

# ruby - 验证超过 1 个空格字符

> ID：13761382
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:36:25.437
> 
> 标签：ruby, ruby-on-rails-3, validation

我正在处理 1 个项目，其中有 1 个表单，如果验证失败，我需要使用适当的消息进行验证

验证用于格式检查。我需要检查用户是否输入了超过 1 个空格字符的单词。我的意思是

如果用户输入

```
"hello    world" 
```

那么它应该显示“无效格式”。正确的格式应该是

```
"hello world" 
```

我的意思是只允许使用 1 个空格字符。

我试过这个

```
validates_format_of :name, :with => /\s/ 
```

但是当没有空格字符时会显示错误....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:47:34.137

尝试这个：

```
validates_format_of :name, :without => /\s{2,}/, :message => "invalid format" 
```

请注意，`\s`匹配任何空白字符，包括换行符、制表符等以及空格。如果您只想匹配两个或更多空格（而不是两个或更多空白字符），那么这会更好：

```
validates_format_of :name, :without => /\ {2,}/, :message => "invalid format" 
```

# c# - 枚举 TableLayoutPanel 单元格位置内的控件

> ID：13761384
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:36:32.820
> 
> 标签：c#, winforms, tablelayoutpanel

作为这个问题的后续 - [Direct access to TableLayoutPanel Cells](https://stackoverflow.com/questions/1598620/direct-access-to-tablelayoutpanel-cells)，如何枚举 TableLayoutPanel 中单元格内的控件？如下图所示，我想枚举给定单元格中的所有复选框（这样我就可以更改它们的值）。

![示例表布局面板](../Images/a5296c2b102b1c8533a9641a2f577f5b.png)

我编写了这段代码来尝试解释我想要做什么（*这*是一个复选框）；

```
var tableLayoutPanel = (TableLayoutPanel)this.Parent;
var cellPosition = tableLayoutPanel.GetCellPosition(this);
var controlAtPosition = tableLayoutPanel.GetControlFromPosition(cellPosition.Column,cellPosition.Row).Controls;
foreach (Control control in controlAtPosition)
{
   var ctrl = control.Name;
   // *** Enumerates nothing
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:11:37.770

您的示例代码令人困惑。显然，TableLayoutPanel 单元格中只允许使用一个控件，因此在您的示例中，您有一个包含这些复选框的容器控件。

简单的例子：

```
Panel p = tableLayoutPanel1.GetControlFromPosition(0, 0) as Panel;
if (p != null) {
  foreach (CheckBox cb in p.Controls.OfType<CheckBox>()) {
    MessageBox.Show(cb.Name + " " + cb.Checked.ToString());
  }
} 
```

# visual-studio-2012 - 无法在 windows phone 模拟器或设备之间切换

> ID：13761387
> 
> 赞同：2
> 
> 时间：2012-12-07T10:36:41.603
> 
> 标签：visual-studio-2012, windows-phone

我正在尝试移植我们现有的 Windows Phone 7.5 应用程序，以便在 Visual Studio 2012 中供我们的 Windows Phone 8 用户使用。该应用程序是在 Windows 7 机器上的 Visual Studio 2010 中开发的。我有一台安装了 Windows 8 和 Visual Studio 2012 的新笔记本电脑，在它上面一切都像一个魅力。我可以创建新项目，使用不同的模拟器并在我的 windows phone 8 测试设备上测试 windows phone 项目。

一旦我在 Visual Studio 2012 中打开 Windows Phone 7.5 应用程序解决方案，事情就变糟了。我只能在“Emulator WVGA 512MB”上测试应用程序。当我尝试将模拟器更改为设备，甚至是不同的模拟器时，没有任何反应。没有错误，没有例外。

我的解决方案肯定有问题，但我不知道是什么。该项目的属性和调试配置似乎与我的 windows 7 pc 上的完全相同。目标操作系统版本仍然是 windows phone OS 7.1。有类似经验的可以指点一下吗？我不知道，即使是事件日志也无法帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:28:10.800

@Mixx，您说“当我尝试将模拟器更改为设备，甚至是不同的模拟器时，没有任何反应。没有错误，没有异常。” 您的意思是您从工具栏中的下拉菜单中更改了选择？如果是，则仅更改该选择不会启动任何操作。它只是在您下次运行应用程序时更改选择/目标设备。

更改选择后，按 F5 在选定的目标环境（模拟器或设备）中运行应用程序。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:09:57.307

我想到了; 我的解决方案配置和我的项目配置有不同的名称。解决这个问题为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T16:00:11.970

我的猜测是您尚未在目标笔记本电脑中安装 Microsoft Zune。Windows Phone 7.x 开发设备需要它。

# php - 如何在Mysql中选择包括给定日期在内的日期范围之间的记录

> ID：13761388
> 
> 赞同：0
> 
> 时间：2012-12-07T10:36:47.520
> 
> 标签：php, mysql, date, between, date-range

我需要检查 from_date 和 to_date 范围内的日期。

例如）员工从 2012-11-08 到 2012-11-09 申请休假，这里我需要检查 2012-11-08，日期范围包括 from_date 和 to_date。

请建议我使用正确的查询来获取记录。

当我使用 Mysql BETWEEN 时，它只检查范围之间的日期，不包括 from_date 和 to_date。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:40:05.460

使用比较运算符：

其中 `from_date`>= '2012-11-08' 和`to_date`<= '2012-11-08'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:40:06.427

MySQL 中的 BETWEEN 是包容性的，即 2012-11-08 在 2012-11-08 - 2012-11-09 的范围内。您的问题可能是时间部分。

尝试将数据库字段转换为查询中的日期，看看你得到什么结果，即：

`SELECT x FROM y WHERE '2012-11-08' BETWEEN DATE(date_from) AND DATE(date_until)`

# dialog - Android 中的 Titanium 运行时错误对话框

> ID：13761389
> 
> 赞同：0
> 
> 时间：2012-12-07T10:36:50.677
> 
> 标签：dialog, runtime, titanium, distribution, appcelerator

这是 Titanium 开发人员的问题。当您运行应用程序并引发异常时，您会看到一个运行时错误对话框。这很好调试，但问题是当您构建应用程序以在 Google Play 中分发时，它仍然显示此对话框。有没有办法禁用它？因此，如果应用程序崩溃，用户只会收到标准的 Android 错误消息。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:07:57.060

使用最新版本的 Titanium SDK 的生产部署已禁用此功能：[https ://jira.appcelerator.org/browse/TIMOB-9735](https://jira.appcelerator.org/browse/TIMOB-9735)

您还重复了一个标题几乎相同的先前问题：[Disable runtime error dialog in Android (titanium)](https://stackoverflow.com/questions/10827463/disable-runtime-error-dialog-in-android-titanium/11165347#11165347)

# jquery - jQuery 在最后一个 div 处停止动画

> ID：13761391
> 
> 赞同：0
> 
> 时间：2012-12-07T10:36:58.017
> 
> 标签：jquery, jquery-animate

我想要实现的是在到达更大 div 中的第一个/最后一个 div 时“停止”动画。

我的设置：首先我计算视图以从某个 div 开始，类为“关闭”，然后我使用导航按钮为 #all_fixtures 左/右设置动画。这一切都很好！

我需要的是动画在到达**#all_fixtures包装器div 中的第一个/最后一个****.fixture** div时停止。

 ****jQuery**

```
// Find first div with the class '.closed' and start view there
$(function() {
$('#all_fixtures').css({marginLeft: -$('.closed').last().offset().left});
});

// Animate div left/right           
$('.scores_prev').click(function() {
$('#all_fixtures').animate({ 'left': '+=400px' }, 300 );
});

$('.scores_next').click(function() {
$('#all_fixtures').animate({ 'left': '-=400px' }, 300 );
}); 
```

**HTML**

```
 <div id="all_fixtures">
       <div class="fixture closed"> 4 </div>
       <div class="fixture closed"> 3 </div>
       <div class="fixture closed"> 2 </div>
       <div class="fixture closed"> 1 </div> <!-- start view here -->
       <div class="fixture"> 1 </div>
       <div class="fixture"> 2 </div>
    </div>
    <a class="scores_prev"> PREV </a>
    <a class="scores_next"> NEXT </a> 
```

**笔记：**

*   # all_fixtures 是 10000px

*   .fixture 的宽度约为 200 像素并向右浮动（意味着 #all_fixtures 左侧将有空白空间）

我已经尝试过这些方面的东西，但我无法让它工作：[https ://stackoverflow.com/a/10410528/1864622](https://stackoverflow.com/a/10410528/1864622)

///

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:28:04.500

您可以像这样在**#all_fixtures**包装器中获取第一个和最后一个 div：

```
$("#all_fixtures div.fixture:first");
$("#all_fixtures div.fixture:last"); 
```

获得 div 后，您可以通过调用[`.stop()`](http://api.jquery.com/stop/). 当在一个元素上调用 .stop() 时，当前正在运行的动画（如果有的话）会立即停止。例如，如果在调用 .stop() 时使用 .slideUp() 隐藏元素，则该元素现在仍将显示，但将是其先前高度的一小部分。不调用回调函数。**

# c# - 如何显示目录（文件夹）中的所有文件

> ID：13761394
> 
> 赞同：0
> 
> 时间：2012-12-07T10:37:13.353
> 
> 标签：c#, asp.net, image

我想将我所有的图片名称显示在`listbox`. 我试图弄清楚如何检索文件名。我试过这个

```
protected void Page_Load(object sender, EventArgs e)
{
string u = Request.Url.AbsoluteUri.ToString();
string serverPath = u.Substring(0, u.LastIndexOf("/")) + "/UBOimages";
Label1.Text = serverPath;
DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath("~/UBOimages"));
//FileInfo[] fileInfo = dirInfo.GetFiles();
Label2.Text = dirInfo.ToString();
} 
```

但标签中的结果如下所示：

```
http://localhost:49170/UBOimages
C:\Users\John\Documents\UBO\uboWebCustomer\HuronWood\HuronWood\UBOimages 
```

当加载到服务器上时，这个页面会给出一个错误，因为它不喜欢 dirInfo 路径。从文件夹（例如图像文件夹）中检索所有文件的正确方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:43:54.210

```
 DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath("~/UBOimages"));
    FileInfo[] fileInfo = dirInfo.GetFiles("*.*", SearchOption.AllDirectories); 
```

循环遍历此 fileinfo 数组或将其绑定到任何 Gridview 或 listview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:48:41.410

如果您需要获取名为“Data”的文件夹中的所有文件，只需将其编码如下

```
 string[] Documents = System.IO.Directory.GetFiles("../../Data/"); 
```

现在“文档”由文件夹“数据”中文件的完整对象名称数组组成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T10:49:12.970

[`System.IO.DirectoryInfo.GetFiles`](http://msdn.microsoft.com/fr-fr/library/ms143327.aspx)将帮助您获取给定目录的所有文件。

`DirectoryInfo.ToString`不打算用于列出目录文件。它将给出当前`DirectoryInfo`对象的字符串表示形式，您会看到在这种情况下它是目录路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T10:50:15.157

@我正在使用上面的答案来根据你的问题编写我的代码！！！

```
Using System.IO

protected void ListFiles()
{
        const string MY_DIRECTORY = "/MyDirectory/";
        string strFile = null;
        foreach (string s in Directory.GetFiles(Server.MapPath(MY_DIRECTORY), "*.*")) {
                strFile = s.Substring(s.LastIndexOf("\\") + 1);
                ListBox1.Items.Add(strFile);
        } 
```

希望这可以帮助！！！

# jquery - 对已重载的 ActionResult 方法的 Jquery Ajax 请求

> ID：13761399
> 
> 赞同：0
> 
> 时间：2012-12-07T10:37:52.790
> 
> 标签：jquery, ajax, asp.net-mvc, overloading

我使用 jQuery Ajax 请求来过滤 webgrid，我有几个 webgrids 和几个 ajax 请求。每个 Ajax 请求调用相同的 ActionResult 方法，但传递不同的参数。这个想法是根据我提供的参数调用正确的方法。然而事实并非如此。

**我收到此错误：**

```
The current request for action 'FilterGrid' on controller type 'UserManagerController' is ambiguous between the following action methods:<br>System.Web.Mvc.ActionResult FilterGrid(Int32, Int32, System.String, System.String, Int32, System.String) on type UserManager.Controllers.UserManagerController<br>System.Web.Mvc.ActionResult FilterGrid(System.String) on type UserManager.Controllers.UserManagerController 
```

**我的 jQuery**

```
 function filterGrid() {
        var filters = getFilterVals();
        $.ajax({
            url: '@Url.Action("FilterGrid", "UserManager")',
            type: "POST",
            async: true,
            dataType: "html",
            data: "group=" + filters.group,
            success: function (data) {
                $('#webgrid-wrapper').empty().html(data);
            },
            error: function (data) {

            }
        });
    } 
```

**我的控制器代码**

```
[HttpPost]
public ActionResult FilterGrid(int alf, int brad, string username, string group, int isactive, string email)
{

    List<UserManager.Models.vw_UserManager_Model> modelList = DAL.getGridUsers(alf, brad, username, group, isactive, email);

    switch (alf)
    {
        case 1:
            Session["chkBoxAlf"] = 1;
            break;
        case 0:
            Session["chkBoxAlf"] = 0;
            break;
    }

    switch (brad)
    {
        case 1:
            Session["chkBoxBrad"] = 1;
            break;
        case 0:
            Session["chkBoxBrad"] = 0;
            break;
    }

    switch (isactive)
    {
        case 1:
            Session["chkBoxIsActive"] = 1;
            break;
        case 0:
            Session["chkBoxIsActive"] = 0;
            break;
    }

    Session["txtFilterUsername"] = username;
    Session["txtFilterGroup"] = group;
    Session["txtFilterEmail"] = email;

    return PartialView("~/Views/Partial/_WebGridUserManagerUsers.cshtml", modelList);
}

[HttpPost]
public ActionResult FilterGrid(string group)
{
    return PartialView("~/Views/Partial/_WebGridUserManagerGroups.cshtml");
} 
```

我的断点

```
 [HttpPost]
        public ActionResult FilterGrid(string group)
        {
            return PartialView("~/Views/Partial/_WebGridUserManagerGroups.cshtml");
        } 
```

不会被击中。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:43:52.743

您不能有两个具有相同名称的 POST 方法，因为框架不知道要调用哪个。但是你可以配置 ActionName：

```
[ActionName("MethodName")]
public ActionResult Filter(string group){} 
```

在你的 ajax 中你调用 ~/Controller/MethodName

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T10:40:35.443

两个函数具有相同的名称，尝试重命名其中一个..

# iphone - 无法重新实现 UIToolbar 类的 draw 方法

> ID：13761402
> 
> 赞同：0
> 
> 时间：2012-12-07T10:37:59.803
> 
> 标签：iphone, objective-c, ios, uitoolbar

我无法覆盖 UIToolbar 类的 draw 方法。我想使用背景图像和一些按钮自定义工具栏。

我在 AppDelegate.m 和我的 viewcontroller 实现文件中都尝试了这个。这是我的代码：

```
@implementation UIToolbar (CustomImage)

- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed: @"tabbar.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}

@end 
```

我在视图控制器 viewDidLoad 方法中使用此代码添加工具栏：

```
 UIBarButtonItem *flexiableItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    UIBarButtonItem *item1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:nil];
    UIBarButtonItem *item2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:nil];

    NSArray *items = [NSArray arrayWithObjects:item1, flexiableItem, item2, nil];
    self.toolbarItems = items; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:56:05.793

也许更好地在应用程序启动时添加此代码？

```
[[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"tabbar.png"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

# java - Java 8 中的 Lambda 和泛型

> ID：13761405
> 
> 赞同：15
> 
> 时间：2012-12-07T10:38:06.473
> 
> 标签：java, lambda, java-8

我正在玩未来的 java 8 版本，也就是 JDK 1.8。

我发现你可以很容易地做到

```
interface Foo { int method(); } 
```

并像使用它一样

```
Foo foo = () -> 3;
System.out.println("foo.method(); = " + foo.method()); 
```

它只打印 3。

而且我还发现有一个 java.util.function.Function 接口以更通用的方式执行此操作。但是这段代码不会编译

```
Function times3 = (Integer triple) -> 3 * triple;
Integer twelve = times3.map(4); 
```

看来我首先必须做类似的事情

```
interface IntIntFunction extends Function<Integer, Integer> {}

IntIntFunction times3 = (Integer triple) -> 3 * triple;
Integer twelve = times3.map(4); 
```

所以我想知道是否有另一种方法可以避免 IntIntFunction 步骤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T11:39:49.690

@joop 和 @edwin 谢谢。

基于 JDK 8 的最新版本，这应该可以做到。

```
IntFunction<Integer> times3 = (Integer triple) -> 3 * triple; 
```

如果你不喜欢，你可以用类似的东西让它更平滑一些

```
IntFunction times3 = triple -> 3 * (Integer) triple; 
```

因此，您不需要指定类型或括号，但您需要在访问参数时强制转换。

# erlang - 在 Nitrogen 网络服务器中设置文件下载的内容标头

> ID：13761407
> 
> 赞同：2
> 
> 时间：2012-12-07T10:38:10.980
> 
> 标签：erlang, yaws, nitrogen

我在 Nitrogen Webserver 上动态生成一个文件，并希望浏览器在下载对话框中显示文件名。

目前我正在设置这样的东西 -

```
wf:content_type("application/x-download") 
```

这使浏览器可以要求保存文件，但文件的名称是url的名称（即氮erl页面）。

如何在内容上设置文件名，以便浏览器向用户显示相同的文件名？

我认为这样的事情可以在这样的基于 Java 的服务器中实现 -

```
resp.setHeader("Content-Disposition", "attachment; filename=\"" + fName + "\""); 
```

我在偏航上使用氮气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:23:57.863

你基本上差不多了：

`wf:header("Content-Disposition", "attachment; filename=\"" ++ Filename ++ "\""),`

# android - JavaMail 和 Gmail - 永久允许我的应用发送邮件

> ID：13761410
> 
> 赞同：0
> 
> 时间：2012-12-07T10:38:23.117
> 
> 标签：android, security, permissions, gmail, jakarta-mail

我正在使用 JavaMail 发送我的错误报告......一切正常，但 Gmail 说，一些奇怪的应用程序（我的应用程序）试图发送邮件......然后我必须单击一个链接并再次启动应用程序，之后这个应用程序被允许发送邮件......

如果我将我的应用程序发送给其他用户会发生什么？他们的发送尝试会全部失败吗？市场应用程序和普通应用程序之间有区别吗？在已签名的应用程序和未签名的应用程序之间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:50:23.197

试试这个代码。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button login = (Button) findViewById(R.id.mBtnSubmit);
        login.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                Properties props = new Properties();
                props.put("mail.smtp.host", "smtp.gmail.com");
                props.put("mail.smtp.socketFactory.port", "465");
                props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
                props.put("mail.smtp.auth", "true");
                props.put("mail.smtp.port", "465");

                Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("dipakkeshariya@android.com", "dipakkeshariya");
                    }
                });

                try {
                    Message message = new MimeMessage(session);
                    message.setFrom(new InternetAddress("dipak.keshariya@android.com"));
                    message.setRecipients(Message.RecipientType.TO, InternetAddress.parse("dipak.keshariya@mobileappdeveloper.com"));
                    message.setSubject("Testing Subject");
                    message.setContent("Hi Dipak Keshariya (Android Developer)", "text/html; charset=utf-8");

                    Transport.send(message);

                } catch (MessagingException e) {
                    throw new RuntimeException(e);
                }
            }
        });
    }
} 
```

有关更多信息，请参见下面的链接。

[Android – 通过 GMail 发送电子邮件（实际上是通过 SMTP）](http://androidcodeexamples.blogspot.in/2012/05/android-send-email-via-gmail-actually.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T19:55:06.740

然后试试这个：

```
public void envioEmail(final String from, final String mailhost, final String user, final String password, final Boolean auth, final String destinatario, final String assunto, final String mensagem) throws MessagingException, IOException {
    new Thread(){
        @Override
        public void run() {
            Properties props = System.getProperties();
            if (mailhost != null) props.put("mail.smtp.host", mailhost);
            if (auth) props.put("mail.smtp.auth", "true");
            props.setProperty("mail.smtp.starttls.enable", "true");

            Authenticator authh = new Authenticator() {
                @Override
                public PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(user, password);
                }
            };
            javax.mail.Session session = javax.mail.Session.getInstance(props, authh);
            javax.mail.Message msg = new MimeMessage(session);
            try {
                msg.setFrom(new InternetAddress(from));
                msg.setRecipient(javax.mail.Message.RecipientType.TO, new InternetAddress(destinatario));
                msg.setSubject(assunto);
                msg.setSentDate(new Date());
                msg.setText(mensagem);

                SMTPTransport t = (SMTPTransport) session.getTransport(ssl ? "smtps" : "smtp");
                try {
                    if (auth){
                        t.connect(mailhost, user, password);
                        t.sendMessage(msg, msg.getAllRecipients());
                    }else{
                        t.connect();
                        t.sendMessage(msg, msg.getAllRecipients());
                    }
                } finally {
                    t.close();
                }
                flag = true;
                atualizaTelaConexao("E-Mail enviado com sucesso!", ctx);
            } catch (MessagingException e) {
                flag = false;
                atualizaTelaConexao("Erro ao enviar E-Mail! Verifique as configuracoes de e-mail", ctx);
            }
        }
    }.start();
} 
```

# python - 每天运行 pylint 并在网页中显示结果

> ID：13761419
> 
> 赞同：0
> 
> 时间：2012-12-07T10:38:46.310
> 
> 标签：python, pylint

是否有任何项目（最好是开源的）可以每天在我的所有源代码上运行 pylint 并显示某种汇总分数的报告，以便我可以看到哪些文件做得好，哪些文件做得不好。我想展示代码质量的趋势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:53:57.060

您绝对应该尝试使用带有[违规](https://wiki.jenkins-ci.org/display/JENKINS/Violations)插件的 jenkins CI。

而且，仅供参考，对于 github 项目有一个很好且有用的服务：[https ://codeq.io](https://codeq.io)

# asp.net-mvc - MVC Knockout 字典绑定

> ID：13761421
> 
> 赞同：0
> 
> 时间：2012-12-07T10:39:09.047
> 
> 标签：asp.net-mvc, razor, knockout.js, knockout-2.0, knockout-mvc

我遇到了另一个 MVC/Knockout 问题。

这次它与序列化/字典集合有关。

我有以下视图模型

```
public class ListViewModel
{
    public Dictionary<ItemViewModel, List<ItemViewModel>> Events { get; set; }

    public ListViewModel()
    {
        Events = new Dictionary<ItemViewModel, List<ItemViewModel>>();
    }
}

public class ItemViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

和cshtml文件：

```
<h2>Events</h2>
<div data-bind="template: { name: 'events-template', foreach: Events }"></div>

<script type="text/html" id="events-template">
    <ul>
        <li>
            <div><span data-bind='text: Events().length'/></div>
            <ul data-bind="foreach: Events">
                <li><span data-bind="text: $data"> </span></li>
            </ul>
        </li>
    </ul>     
</script>

<script type="text/javascript">

    var ListViewModel = function(model) {
        var self = this;

        self.Events = ko.observableArray(ko.utils.arrayMap(model.Events, function(itemViewModel) {
            var item = new ItemViewModel(itemViewModel);
            return item;
        }));
    };

    var ItemViewModel = function(itemViewModel) {
        var self = this;
        self.Name = ko.observable(itemViewModel.name);
        self.Id = ko.observable(itemViewModel.Id);
    };

    $(function() {
        var data = @(Html.Raw(Json.Encode(Model)));        
        ko.applyBindings(new ListViewModel(data));
    });

</script> 
```

它似乎卡在 var data = @(Html.Raw(Json.Encode(Model)));

错误消息提到“类型通用字典......不支持字典的序列化/反序列化，键必须是字符串或对象。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:48:24.937

正如例外所说 - .NET 不支持字典的序列化。您必须考虑 3 个选项：

*   如果可能，替换`dictionary`为任何可序列化的数据结构。
*   编写 json 可序列化字典或查找现有字典。
*   写`javaScriptSerializer`这将序列化字典。

# python - PEP 412 是否使 __slots__ 多余？

> ID：13761423
> 
> 赞同：14
> 
> 时间：2012-12-07T10:39:14.343
> 
> 标签：python, python-3.3

[在 Python 3.3 中实现的PEP 412](http://www.python.org/dev/peps/pep-0412/)引入了对属性字典的改进处理，有效地减少了类实例的内存占用。 [`__slots__`](http://docs.python.org/3/reference/datamodel.html?highlight=__slots__#object.__slots__)是为相同的目的而设计的，那么再使用还有什么意义`__slots__`吗？

为了自己找出答案，我运行了以下测试，但结果没有多大意义：

```
class Slots(object):
    __slots__ = ['a', 'b', 'c', 'd', 'e']
    def __init__(self):
        self.a = 1
        self.b = 1
        self.c = 1
        self.d = 1
        self.e = 1  

class NoSlots(object):
    def __init__(self):
        self.a = 1
        self.b = 1
        self.c = 1
        self.d = 1
        self.e = 1 
```

Python 3.3 结果：

```
>>> sys.getsizeof([Slots() for i in range(1000)])
Out[1]: 9024
>>> sys.getsizeof([NoSlots() for i in range(1000)])
Out[1]: 9024 
```

Python 2.7 结果：

```
>>> sys.getsizeof([Slots() for i in range(1000)])
Out[1]: 4516
>>> sys.getsizeof([NoSlots() for i in range(1000)])
Out[1]: 4516 
```

我预计至少 Python 2.7 的大小会有所不同，所以我认为测试有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-03T05:08:07.757

不，PEP 412 不会*变得*多余`__slots__`。

* * *

首先，Armin Rigo 是正确的，您没有正确测量它。您需要测量的是对象的大小，加上值，加上`__dict__`本身（`NoSlots`仅用于）和键（`NoSlots`仅用于）。

或者你可以按照他的建议去做：

```
cls = Slots if len(sys.argv) > 1 else NoSlots
def f():
    tracemalloc.start()
    objs = [cls() for _ in range(100000)]
    print(tracemalloc.get_traced_memory())
f() 
```

当我在 OS X 上的 64 位 CPython 3.4 上运行它时，我得到`8824968`for`Slots`和`25624872`for `NoSlots`. 因此，看起来一个`NoSlots`实例占用 88 个字节，而一个`Slots`实例占用 256 个字节。

* * *

这怎么可能？

`__slots__`因为和 key-split之间还有两个区别`__dict__`。

首先，字典使用的哈希表保持在 2/3 以下，并且它们呈指数增长并且具有最小大小，因此您将有一些额外的空间。[通过查看注释良好的源](http://hg.python.org/cpython/file/default/Objects/dictobject.c)不难计算出多少空间：您将拥有 8 个哈希桶而不是 5 个插槽指针。

其次，字典本身不是免费的；它有一个标准的对象头、一个计数和两个指针。这听起来可能不是很多，但是当您谈论一个只有几个属性的对象时（请注意，*大多数*对象只有几个属性......），dict 标头可以产生与哈希表一样大的差异。

当然，在您的示例中，值，所以这里涉及的唯一成本是对象本身，加上 5 个插槽或 8 个哈希桶和 dict 标头，因此差异非常显着。在现实生活中，`__slots__`很少会有*这么*大的好处。

* * *

最后，请注意 PEP 412 仅声称：

> 基准测试表明，面向对象程序的内存使用减少了 10% 到 20%

想想你在哪里使用`__slots__`. 要么节省的钱太多以至于不使用`__slots__`会很荒谬，要么你真的需要挤出最后的 15%。或者，您正在构建一个 ABC 或其他您希望被谁知道的子类和子类可能需要节省的类。无论如何，在这些情况下，您获得一半的利益而没有利益`__slots__`，甚至三分之二的利益，仍然很少是足够的；你仍然需要使用`__slots__`.

真正的胜利是在不值得使用的情况下`__slots__`；您将免费获得小额福利。

（此外，肯定有一些程序员过度使用`__slots__`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T12:34:31.807

问题是`sys.getsizeof()`，它很少返回你所期望的。例如，在这种情况下，它计算对象的“大小”而不考虑其`__dict__`. 我建议您通过测量创建 100'000 个实例的实际内存使用情况来重试。

另请注意，Python 3.3 的行为是受 PyPy 启发的，它`__slots__`没有任何区别，所以我希望它在 Python 3.3 中也没有区别。据我所知，`__slots__`现在几乎没有任何用处。

# objective-c - 加密核心数据

> ID：13761427
> 
> 赞同：4
> 
> 时间：2012-12-07T10:39:34.000
> 
> 标签：objective-c, ios, encryption

我正在尝试加密我的核心数据。

正如另一个问题中所建议的那样，我已经阅读了尼克哈里斯的以下帖子[https://nickharris.wordpress.com/2010/07/14/core-data-and-enterprise-iphone-applications-protecting-your-data/](https://nickharris.wordpress.com/2010/07/14/core-data-and-enterprise-iphone-applications-protecting-your-data/) .

首先在我的设备上，我在设置中打开了我的密码。

然后在我的 appDelegate 中，当我创建我的 persistentStoreCoordinator 时，我将以下属性 NSFileProtectionComplete 添加到我的核心数据存储文件中，据我了解，这意味着当设备被密码锁定时，我的核心数据应该被加密或不可访问。

```
NSDictionary *fileAttributes = [NSDictionary dictionaryWithObject:NSFileProtectionComplete forKey:NSFileProtectionKey];
 if (![[NSFileManager defaultManager] setAttributes:fileAttributes ofItemAtPath:[storeURL path] error:&error]) {
        NSLog(@"Cant encrypt");
    } 
```

然而，完成所有这些之后，即使设备密码被锁定，我仍然可以使用 iExplorer 访问应用程序沙箱和包含 .sqllite 文件的文档文件夹，并且我可以将整个文件放到我的桌面上，并以完全未加密的方式查看它。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:57:15.180

以防万一有人感兴趣，我想通了为什么我愚蠢地认为我的问题中提到的苹果提供的加密不起作用......我正在打开我的 CoreData 文件的加密并测试我只是想抓住使用 iExplorer 从我的设备获取 .sqlLite 文件。它似乎正在访问该文件，因为 .sqlLite 文件是使用我的 sqlLite 浏览器打开的。但是，它实际上并没有从设备打开最新文件，而是打开了文件的缓存版本......

# spring - spring 通道如何与队列相关联？

> ID：13761428
> 
> 赞同：1
> 
> 时间：2012-12-07T10:39:35.060
> 
> 标签：spring, queue, channels

spring 通道如何与队列相关联？通道是否总是与队列相关，或者它们都是独立的实体？

我知道队列，但是弹簧通道如何包装队列（如果有的话）？

如果存在，请说明通道和队列的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:48:26.090

从[参考](http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html)：

> QueueChannel 实现包装了一个队列。与 PublishSubscribeChannel 不同，QueueChannel 具有点对点语义。换句话说，即使通道有多个消费者，也只有其中一个应该接收发送到该通道的任何消息。它提供了一个默认的无参数构造函数（提供 Integer.MAX_VALUE 的基本无限容量）以及一个接受队列容量的构造函数：

但是，据我所知，在企业集成中，通道和队列是彼此的同义词：

> “通道，也称为队列，是连接程序和传递消息的逻辑路径。”

（来自[eaipatterns.com](http://www.eaipatterns.com/Introduction.html)）

# php - phpseclib 自动重新连接或 SFTP 增加活动会话时间

> ID：13761432
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:39:56.707
> 
> 标签：php, phpseclib

我正在为从 SFTP 服务器下载的文件使用 phpseclib 库。有时即使 SFTP 中有文件，脚本也不会下载文件。有时我们刷新几次文件就会下载。

连接丢失时如何自动重新连接？

或者

如何增加活动会话时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:26:56.957

我想你可以把代码放在一个while循环中。例如。while (action_not_done) { $sftp = new Net_SFTP(); ... }

如果它超时......可能是你的超时设置得非常低，因为你正在尝试做的事情。下载 10GB 文件的 PHP 超时 10 秒可能还不够。

如果不是这样，那么发布日志会有所帮助。以下是如何获取它们的示例：

[http://phpseclib.sourceforge.net/sftp/examples.html#logging](http://phpseclib.sourceforge.net/sftp/examples.html#logging)

# android - 对话框单击时的 Android EditTextPreference

> ID：13761437
> 
> 赞同：1
> 
> 时间：2012-12-07T10:40:20.550
> 
> 标签：android, text, edit, preference

我的偏好片段中有一个 EditTextPrefernce。我在 XML 中将它设置为 androd:numeric="integer"。好的，这是可行的...但问题是用户必须在此首选项中插入一个值，他不能删除所有内容并单击确定，因为那时我将获得空值。我已将 XML 默认值设置为 10000，并且在 preference.getLong 方法中也设置了默认值 1000。

所以我认为当用户在对话框中按下“确定”时，我必须以某种方式检查编辑文本。这可能吗？还是有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:56:13.703

以下是您可以实现 所需内容**的代码片段，**

```
editPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener()
                {
                    @Override
                    public boolean onPreferenceChange(Preference preference, Object newValue)
                    {
                        try
                        {
                            //Put validation of newValue entered by user
                            //Following is example you can change as you wish
                            if(newValue != null)
                            {
                                long myVal = Long.parseLong(String.valueOf(newValue));
                                if(myVal> 0)
                                {
                                    //All ok
                                }
                                else
                                {
                                   //Invalid Number
                                }
                             }
                        }
                        catch (final Exception e)
                        {
                            return false;
                        }
                        return false;
                    }
                }); 
```

# jquery - Jquery UI Tooltip 可以有一个图标和一个标题。在示例中只是简单的文本

> ID：13761438
> 
> 赞同：0
> 
> 时间：2012-12-07T10:40:28.867
> 
> 标签：jquery, jquery-ui, tooltip

在[http://wiki.jqueryui.com/w/page/12138112/Tooltip](http://wiki.jqueryui.com/w/page/12138112/Tooltip) 有一个带有图标和标题的工具提示的 M1 示例。如何使用当前的 Jquery UI Tooltip 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:54:34.353

您可以通过使用“内容”选项在工具提示中添加 html 标记来做到这一点。查看这个[JQFAQ.com](http://jqfaq.com/how-to-add-icons-and-title-to-jquery-tooltip/)主题，它将向您解释如何执行此操作。

# database - django - 如何在自定义字段中为 oracle 后端设置异常？

> ID：13761444
> 
> 赞同：0
> 
> 时间：2012-12-07T10:40:50.030
> 
> 标签：database, django, oracle, orm, django-custom-field

问题：我正在编写自定义 django 模型字段。在 get_db_prep_save(self, value, connection) 中，我需要对 oracle 后端进行异常处理，并且其行为与其他后端不同。所以我正在寻找最好的、官方的和最优雅的方式来做到这一点。

免责声明：我不会接受这样的答案：“使用 settings.DATABASES 并查找 django.db.backends.oracle”，因为它完全是错误的。使用设置我无法确定我当前使用的是哪个数据库（默认或其他），oracle 后端路径将来可能会从 django.db.backends.oracle 更改为其他内容。我正在寻找的是在将自定义字段保存到数据库时检查我是否正在处理 oracle 的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:51:19.540

看[文档](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.get_db_prep_save)

> 将用于查询的特定连接作为连接参数传递。如果需要，这允许您使用特定于后端的转换逻辑。

因此，连接参数可以为您提供有关要连接的后端的信息。连接参数应该是要执行保存的实际 DB_ALIAS的代理对象（查看此[代码）。](https://github.com/django/django/blob/master/django/db/__init__.py#L39)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T10:55:38.923

我讨厌回答自己的问题，但我发现正确的答案是：

```
connection.vendor 
```

# java - java中的多线程 - 流口水和数据库

> ID：13761445
> 
> 赞同：0
> 
> 时间：2012-12-07T10:40:52.890
> 
> 标签：java, multithreading

我对多线程很陌生，并尝试过应用它，但我有点卡住了。

这是场景：使用drools 对从数据库读取的一组对象应用规则，然后将更新的值写回数据库。

现在，我多次重复上述过程，所以我想在一个线程（主线程）中运行读取+流口水过程，而在另一个线程中运行写入部分。

所以我写了下面的代码：

```
Thread thread = new Thread(new Runnable() 
{     public void run()
    { 
         try 
         {
    //writing the updated data in DB    
    aggregationDAO.updateCaseDetailsInOracle(queryList);
    } 
         catch (Exception e) {                              throw new RuntimeException();
    }
   }
});
    thread.start(); 
```

但是，我被困在这里。

首先，它希望 my`queryList`是最终的。

每次在同一个变量中加载新的更新数据时，我都无法使其成为最终结果。

第二，

即使在让我的程序运行多线程之后，我的运行时间也没有任何改善。

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:15:21.847

您只需使用自定义线程而不是“主线程”，因此没有任何改进。您的示例中没有“多”线程。

如果你想看到速度的提高，你应该同时运行几个线程。使用某种线程池进行并发任务处理，然后您将得到改进。

此外，变量必须是最终的，因为您正在创建匿名类 - Runnable。您应该创建新类，它将实现 Runnable 并将您的变量传递给构造函数。

```
class QueryTask implements Runnable {
    private final List queryList;
    public QueryTask(List queryList) {
        this.queryList = queryList;
    }

    @Override
    public void run() {
        try { //writing the updated data in DB
            aggregationDAO.updateCaseDetailsInOracle(queryList);
        } catch (Exception e) {
            throw new RuntimeException();
        }
    }
} 
```

**用法：**

```
final ExecutorService threadPool = Executors.newCachedThreadPool();
threadPool.submit(new QueryTask(queryList.subList(0, 5)));
threadPool.submit(new QueryTask(queryList.subList(6, 10))); 
```

这将同时按部分处理您的 queryList。

**更新：**

当您已经提交了所有任务时，您可以关闭线程池并等待所有任务完成。之后您不能添加任何新任务。

```
 threadPool.shutdown();
    try {
        threadPool.awaitTermination(10, TimeUnit.MINUTES);
    } catch (InterruptedException e) {               
        // Current thread was interrupted.
        final List<Runnable> runnables = threadPool.shutdownNow();
        System.out.println("Can't stop tasks: " + runnables.size());

        // Restore interrupted status.
        Thread.currentThread().interrupt();
    } 
```

# hadoop - hadoop.security - UserGroupInformation.getLoginUser(UserGroupInformation.java)

> ID：13761449
> 
> 赞同：1
> 
> 时间：2012-12-07T10:41:18.940
> 
> 标签：hadoop, hbase

使用远程连接连接到 hbase 时出现以下错误。注意：但是相同的代码在 hadoop-0.20.205 和 hbase-0.90.4 等 hbase 旧版本中工作，它不适用于 hadoop-1.0.3 和 hbase-0.94.1 等早期版本。

错误详情 ：

```
WARN client.HConnectionManager: Error obtaining current user, skipping username in HConnectionKey
java.io.IOException: failure to login at
org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:490) 
```

全栈跟踪：

```
WARN client.HConnectionManager: Error obtaining current user, skipping username in HConnectionKey
java.io.IOException: failure to login
    at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:490)
    at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:452)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.hbase.util.Methods.call(Methods.java:37)
    at org.apache.hadoop.hbase.security.User.call(User.java:586)
    at org.apache.hadoop.hbase.security.User.callStatic(User.java:576)
    at org.apache.hadoop.hbase.security.User.access$400(User.java:50)
    at org.apache.hadoop.hbase.security.User$SecureHadoopUser.<init>(User.java:393)
    at org.apache.hadoop.hbase.security.User$SecureHadoopUser.<init>(User.java:388)
    at org.apache.hadoop.hbase.security.User.getCurrent(User.java:139)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionKey.<init>(HConnectionManager.java:412)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:179)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:153)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:131)
    at org.witsml.www.wsdl._120.CommonHBaseFunctions.getResultScannerFromHBase(CommonHBaseFunctions.java:95)
    at org.witsml.www.wsdl._120.CommonWITSMLFunctions.getRecordFromHBase(CommonWITSMLFunctions.java:243)
    at org.witsml.www.wsdl._120.StoreSoapBindingImpl.WMLS_GetFromStore(StoreSoapBindingImpl.java:144)
    at org.witsml.www.wsdl._120.StoreSoapBindingSkeleton.WMLS_GetFromStore(StoreSoapBindingSkeleton.java:170)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
    at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
    at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
    at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454)
    at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)
    at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.security.auth.login.LoginException: java.lang.NoClassDefFoundError: Could not initialize class org.apache.hadoop.security.KerberosName
    at org.apache.hadoop.security.User.<init>(User.java:44)
    at org.apache.hadoop.security.User.<init>(User.java:39)
    at org.apache.hadoop.security.UserGroupInformation$HadoopLoginModule.commit(UserGroupInformation.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:784)
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)
    at javax.security.auth.login.LoginContext$5.run(LoginContext.java:721)
    at javax.security.auth.login.LoginContext$5.run(LoginContext.java:719)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokeCreatorPriv(LoginContext.java:718)
    at javax.security.auth.login.LoginContext.login(LoginContext.java:591)
    at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:471)
    at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:452)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.hbase.util.Methods.call(Methods.java:37)
    at org.apache.hadoop.hbase.security.User.call(User.java:586)
    at org.apache.hadoop.hbase.security.User.callStatic(User.java:576)
    at org.apache.hadoop.hbase.security.User.access$400(User.java:50)
    at org.apache.hadoop.hbase.security.User$SecureHadoopUser.<init>(User.java:393)
    at org.apache.hadoop.hbase.security.User$SecureHadoopUser.<init>(User.java:388)
    at org.apache.hadoop.hbase.security.User.getCurrent(User.java:139)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionKey.<init>(HConnectionManager.java:412)
    at org.apache.hadoop.hbase.client.HConnectionManager.getConnection(HConnectionManager.java:179)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:153)
    at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:131)
    at org.witsml.www.wsdl._120.CommonHBaseFunctions.getResultScannerFromHBase(CommonHBaseFunctions.java:95)
    at org.witsml.www.wsdl._120.CommonWITSMLFunctions.getRecordFromHBase(CommonWITSMLFunctions.java:243)
    at org.witsml.www.wsdl._120.StoreSoapBindingImpl.WMLS_GetFromStore(StoreSoapBindingImpl.java:144)
    at org.witsml.www.wsdl._120.StoreSoapBindingSkeleton.WMLS_GetFromStore(StoreSoapBindingSkeleton.java:170)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
    at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
    at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
    at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454)
    at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)
    at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:886)
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)
    at javax.security.auth.login.LoginContext$5.run(LoginContext.java:721)
    at javax.security.auth.login.LoginContext$5.run(LoginContext.java:719)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokeCreatorPriv(LoginContext.java:718)
    at javax.security.auth.login.LoginContext.login(LoginContext.java:591)
    at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:471)
    ... 52 more 
```

# asp.net - 实现基于表单的身份验证

> ID：13761454
> 
> 赞同：0
> 
> 时间：2012-12-07T10:41:37.540
> 
> 标签：asp.net

我有一个面向公共用户的网站，但也有一个大约 10 页的管理部分，我只需要为网站管理员保护它。

如果我在这 10 个页面上实施基于表单的身份验证，它是否也会传播到网站的公共部分？即web.config 中的更改。

我希望我的网站 3 个安全级别可用于：

1.  所有公共用户（未注册）
2.  注册公众用户
3.  网站管理员

我正在查看此示例（[http://support.microsoft.com/kb/301240](http://support.microsoft.com/kb/301240)），但它似乎关闭了整个应用程序的公共视图！？！

敬茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:02:26.990

您可以完全避免麻烦并在单个 Web 应用程序项目中为管理员和公共创建单独的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:27:25.353

我认为根据用户角色允许/拒绝权限会更容易。

例如，如果您需要允许 admin 角色下的所有用户并限制其他用户。

```
 <authorization>
    <allow roles="Admin" />
     <deny users="*" />
 </authorization> 
```

阅读一下

[使用角色管理授权](http://msdn.microsoft.com/en-us/library/9ab2fxh0%28v=vs.100%29.aspx)

[在 ASP.NET 中使用角色管理器](http://msdn.microsoft.com/en-us/library/ff647401.aspx#paght000013_step1)

[为用户分配角色](http://www.asp.net/web-forms/tutorials/security/roles/assigning-roles-to-users-cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:45:07.767

基于表单的身份验证使您可以控制受保护的内容。因此，当您说“看起来它关闭了整个应用程序的公共视图”时，这是不正确的。

您可以仅授予管理员用户访问 10 个管理页面的权限，并授予所有用户访问公共页面的权限。

在示例中，您具有以下内容：

```
<authorization>
   <deny users ="?" />
   <allow users = "*" />
</authorization> 
```

如果它位于包含您的管理页面的文件夹中，则不允许匿名用户访问这些页面。如果您将其放在根文件夹中，则匿名用户将无法访问您的任何站点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T14:14:21.073

通过网站管理工具，您可以设置用户、角色以及允许他们访问哪些页面，包括匿名用户，而无需进入代码。

这是 MSDN 工具概述：http: [//msdn.microsoft.com/en-us/library/yy40ytx0%28v=VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/yy40ytx0%28v=VS.100%29.aspx)

# java - AndroidPlot - 从 GraphWidget 中删除域值

> ID：13761455
> 
> 赞同：3
> 
> 时间：2012-12-07T10:41:39.173
> 
> 标签：java, android, graph, androidplot, android-graphview

我有一个这样的情节设置：

```
aHistoryPlot = (XYPlot) findViewById(R.id.plot);
    aHistoryPlot.setRangeBoundaries(0, 255, BoundaryMode.FIXED);
    aHistoryPlot.setDomainBoundaries(0, HISTORY_SIZE, BoundaryMode.FIXED);
    aHistoryPlot.addSeries(YHistorySeries, new LineAndPointFormatter(Color.rgb(100, 200, 100), Color.TRANSPARENT, null));
    aHistoryPlot.getGraphWidget().setMarginTop(10);
    aHistoryPlot.setDomainStepValue(5);
    aHistoryPlot.setTicksPerRangeLabel(3);
    aHistoryPlot.setDomainLabel(getResources().getString(R.string.string_time));
    aHistoryPlot.getDomainLabelWidget().pack();
    aHistoryPlot.setRangeLabel(getResources().getString(R.string.string_value));
    aHistoryPlot.getRangeLabelWidget().pack();
    aHistoryPlot.disableAllMarkup(); 
```

如何从图中删除域值？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T12:50:13.637

我相信将油漆设置为 null 会更好一些，您还可以获得标签占用的空间。这是我在速度测试代码中的代码，用于打开和关闭所有这些位。

```
 if (!mBackgroundOn) {
        // remove the background stuff.
        mDynamicPlot.setBackgroundPaint(null);
        mDynamicPlot.getGraphWidget().setBackgroundPaint(null);
        mDynamicPlot.getGraphWidget().setGridBackgroundPaint(null);
    }

    if (!mKeyOn)
        mDynamicPlot.getLayoutManager()
                .remove(mDynamicPlot.getLegendWidget());
    if (!mDomainLabelOn)
        mDynamicPlot.getLayoutManager().remove(
                mDynamicPlot.getDomainLabelWidget());
    if (!mDomainAxisOn) {
        mDynamicPlot.getGraphWidget().setDomainLabelPaint(null);
        mDynamicPlot.getGraphWidget().setDomainOriginLabelPaint(null);
    }
    if (!mBoarderOn){
        //mDynamicPlot.setDrawBorderEnabled(false);
        mDynamicPlot.setBorderPaint(null);
    }if (!mRangeLabelOn)
        mDynamicPlot.getLayoutManager().remove(
                mDynamicPlot.getRangeLabelWidget());
    if (!mRangeAxisOn) {
        mDynamicPlot.getGraphWidget().setRangeLabelPaint(null);
        mDynamicPlot.getGraphWidget().setRangeOriginLabelPaint(null);
        //mDynamicPlot.getGraphWidget().setRangeLabelVerticalOffset(rangeLabelVerticalOffset);
    }
    if (!mGridOn) {
      //mDynamicPlot.getGraphWidget().setGridLinePaint(null);
        mDynamicPlot.getGraphWidget().setDomainOriginLinePaint(null);
        mDynamicPlot.getGraphWidget().setRangeOriginLinePaint(null);
    }
    if (!mTitleOn) {
        mDynamicPlot.getLayoutManager().remove(mDynamicPlot.getTitleWidget());
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T13:18:55.447

您可以输入：

```
aHistoryPlot.getGraphWidget().getDomainLabelPaint.setColor(Color.TRANSPARENT); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-09T09:40:29.327

设置此项，将使您摆脱所有网格/边框的东西，并使您拥有透明的图形样式。

```
aprHistoryPlot.setPlotMargins(0, 0, 0, 0);
aprHistoryPlot.setPlotPadding(0, 0, 0, 0);
aprHistoryPlot.setDomainLabelWidget(null);
aprHistoryPlot.setRangeLabelWidget(null);

aprHistoryPlot.setBackgroundPaint(null);
aprHistoryPlot.getGraphWidget().setBackgroundPaint(null);
aprHistoryPlot.getGraphWidget().setGridBackgroundPaint(null);
aprHistoryPlot.setBorderPaint(null);

//aprHistoryPlot.setDomainLabel( null ); // crash
//aprHistoryPlot.setRangeLabel( null );

aprHistoryPlot.getGraphWidget().setDomainLabelWidth(0.0f);
aprHistoryPlot.getGraphWidget().setRangeLabelWidth(0.0f);

aprHistoryPlot.getGraphWidget().setDomainLabelPaint(null);
aprHistoryPlot.getGraphWidget().setDomainOriginLabelPaint(null);

aprHistoryPlot.getGraphWidget().setRangeLabelPaint(null);
aprHistoryPlot.getGraphWidget().setRangeOriginLabelPaint(null);

aprHistoryPlot.getGraphWidget().setDomainOriginLinePaint(null);
aprHistoryPlot.getGraphWidget().setRangeOriginLinePaint(null);

aprHistoryPlot.getLayoutManager().remove(aprHistoryPlot.getTitleWidget());

aprHistoryPlot.getGraphWidget().getDomainGridLinePaint().setColor(Color.TRANSPARENT);
aprHistoryPlot.getGraphWidget().getRangeGridLinePaint().setColor(Color.TRANSPARENT);
aprHistoryPlot.getGraphWidget().getRangeSubGridLinePaint().setColor(Color.TRANSPARENT);

aprHistoryPlot.getLayoutManager().remove(aprHistoryPlot.getLegendWidget());
aprHistoryPlot.getLayoutManager().remove(aprHistoryPlot.getDomainLabelWidget());
aprHistoryPlot.getLayoutManager().remove(aprHistoryPlot.getRangeLabelWidget()); 
```

# jsf-2 - 动态行应包含 PrimeFaces 数据表中的不同（动态）组件

> ID：13761460
> 
> 赞同：1
> 
> 时间：2012-12-07T10:41:49.877
> 
> 标签：jsf-2, datatable, primefaces

我想在 jsf 中使用必须动态添加行的 primefaces 创建一个数据表。但是动态添加的每一行都应该有不同的组件。例如，如果添加了第一行，那么它应该在所有列中包含 inputtext 组件。对于第二行，它应该在其第一列中包含 SelectOnemenu，并为其他列输入文本。同样，第三行应在第一列中包含输出文本，在其他列中包含输入文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:00:54.857

使用`rendered`属性。例如

```
<h:dataTable value="#{bean.fields}" var="field">
    <h:column>
        <h:inputText value="#{field.value}" rendered="#{field.type == 'TEXT'}" />
        <h:selectOneMenu value="#{field.value}" rendered="#{field.type == 'MENU'}">
            <f:selectItems value="#{field.availableValues}" />
        </h:selectOneMenu>
        <h:outputText value="#{field.value}" rendered="#{field.type == 'OUTPUT'}" />
    </h:column>
</h:dataTable> 
```

# visual-studio-2010 - Visual Basic 从文本框中复制特定部分

> ID：13761466
> 
> 赞同：0
> 
> 时间：2012-12-07T10:42:07.530
> 
> 标签：visual-studio-2010, url, textbox, visual-studio-2012, copy

您好，我如何将特定部分从文本框复制到 Visual Basic 中的其他文本框

示例：
我将文本文件加载到文本框，然后文本框包含以下内容：

最新版本：1.0.1.1
下载链接： http: [//www.downloadlinkhere.nl/](http://www.downloadlinkhere.nl/)

我想将 url 复制到另一个文本框我该怎么做？？？
我正在使用：Visual Studio 2012
和编程语言：Visual Basic

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:46:32.323

简单的答案，假设（如您的示例）在 URL 之后没有任何要丢弃的文本，并且“http”只会在文本中出现一次：

```
TextBox2.Text = TextBox1.Text.Substring(TextBox1.Text.IndexOf("http")) 
```

如果您的情况实际上比您的示例更复杂，您可能需要查看[正则表达式](http://www.programmersheaven.com/2/RegexNET)。

# javascript - 如何在 Canvas 元素上从 FontAwesome 渲染字形

> ID：13761472
> 
> 赞同：23
> 
> 时间：2012-12-07T10:42:35.590
> 
> 标签：javascript, html, canvas, webfonts

[FontAwesome](https://github.com/FortAwesome/Font-Awesome)在其 CSS 文件中指定字形，如下所示：

```
/*  Font Awesome uses the Unicode Private Use Area (PUA) to ensure 
    screen readers do not read off random characters that represent icons */
.icon-glass:before                { content: "\f000"; }
.icon-music:before                { content: "\f001"; } 
```

我正在尝试将此字体中的图标渲染到画布元素，但看不到如何访问这些字形。

```
ctx.font = "40px FontAwesome";
ctx.fillText("\f000",20,20); // no cigar 
```

如何在 JavaScript 字符串中指定这些字形？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-08T14:24:48.690

您应该使用[String.fromCharCode](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode)：

```
ctx.fillText(String.fromCharCode("0xf000"), 20, 20); 
```

或此 Unicode 转义语法：

```
ctx.fillText("\uf000", 20, 20); 
```

# c# - 使用动态属性初始化惰性属性

> ID：13761480
> 
> 赞同：2
> 
> 时间：2012-12-07T10:43:16.833
> 
> 标签：c#, generics, dynamic, reflection, lazy-evaluation

我想用反射动态地初始化一个惰性属性。

我循环我的对象属性，我想创建这个属性的延迟加载，如下所示：

```
Lazy<propertyInfo.propertyType> = new lazy<propertyInfo.propertyType>(() => methodInfo.invoke) 
```

懒惰不允许这样做。

有没有办法通过反射来做到这一点？（也许是 activator.createinstance）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:53:25.013

尝试这个：

```
Lazy<object> lazyType = new Lazy<object>(() => {
    return Activator.CreateInstance(propertyInfo.propertyType);
});

lazyType.Value; 
```

当您访问 Value 属性时，Lazy 对象将调用 Func，然后返回您的属性类型的实例。

希望能帮助到你

# jquery - jquery 验证仅在用户离开字段后显示错误消息（离开字段）

> ID：13761482
> 
> 赞同：0
> 
> 时间：2012-12-07T10:43:23.140
> 
> 标签：jquery, jquery-validate

在 beta 注册表单上使用 jquery 验证，如下所示：-

```
$('#beta_signup_form').validate({
    rules: {
        name: {
            required: true,
            minlength: 4
        },
        email: {
            required: true,
            email: true 
        }
    },
    errorElement: "span"

}); 
```

我只想在用户离开“名称”字段和用户离开“电子邮件”字段时显示错误元素。

这似乎是一个简单的配置问题，但我很难找到正确的方法。我该如何指定这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:58:36.250

请尝试以下选项：

```
$('#beta_signup_form').validate({
    rules: {

    },
    focusCleanup: true,
    onkeyup: false, 
```

# php - 使用 XML 节点中包含的数据创建 PHP 变量

> ID：13761483
> 
> 赞同：0
> 
> 时间：2012-12-07T10:43:23.107
> 
> 标签：php, xml

我在这方面遇到了一些严重的问题。我正在尝试做的是“提取”XML 中特定节点的所有内容，并将它们转换为 PHP 变量，以便以后使用它们。

这是我正在使用的一个小样本 XML 测试数据集。

```
<RECIPES>
<RECIPE>
<TI>Cinnamon Rolls</TI>
<IN>1/2 ea Sweet dough mixture</IN>
<IN>1/2 c Packed light brown sugar</IN>
<IN>1/2 c Pecans; chopped</IN>
<IN>1/2 c Dark seedless raisins</IN>
<IN>1 tsp Ground cinnamon</IN>
<IN>1/4 c Butter OR margarine; melted</IN>
<IN>Sugar Glaze (below opt)</IN>
<PR>Some Stuff.</PR>
</RECIPE>
<RECIPE>
<TI>SWEET BISCUITS</TI>
<IN>2 c Baking mix</IN>
<IN>2/3 c Milk</IN>
<IN>1/4 c Cinnamon Sugar</IN>
<IN>2 tb Butter</IN>
<PR>Some other stuff</PR>
</RECIPE>
<RECIPE> 
```

（实际上大约有 900 个）我想要实现的是从每个节点中提取数据，并将它们转换为变量；以下是我希望最终得到的结果。

```
$variable="Cinamon Rolls";
$variable2="Sweet Biscuits"; 
```

有没有办法做到这一点？从我一直在研究的内容来看，我很确定这与 SimpleXML 有关。我已经设法单独输出内容，但不知道如何存储它们。

**问题已解决** 感谢大家的帮助，

```
 $obj = simplexml_load_string($xml);

    foreach($obj->RECIPE as $r) {
        $variable = (string)$r->TI;
        echo $variable; } 
```

太棒了，非常感谢。救了我的屁股。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:45:42.290

使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)：

```
$obj = simplexml_load_string($xml);

foreach($obj->RECIPE as $r)
{
    $variable = (string)$r->TI;
    echo $variable;
} 
```

输出

> 肉桂卷
> 甜饼干

**[键盘演示](http://codepad.org/Hh5xBEbR)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:47:49.010

在数组中？

```
$xml = simplexml_load_file($file_location);
$array = array();

foreach ($xml->RECIPE as $recipe){
    $array[] = $recipe->TI
} 
```

# php - 如何将带有稀疏空间的数字格式化为千位分隔符？

> ID：13761490
> 
> 赞同：4
> 
> 时间：2012-12-07T10:43:40.173
> 
> 标签：php, number-formatting, multibyte

而不是显示格式如下的数字：

1,234,567.890，我想显示如下格式的数字：

1 234 567.890，与此略有不同：
1 234 567.890。

我正在使用 PHP 函数：

```
number_format($value, 0, ".", " ") 
```

但是，它产生了这个：

1�234�567.890

我已经将 http 标头和 html 文档设置为 UTF-8。我相信这个问题的出现是由于薄空间是一个多字节字符。我一直无法找到处理此问题的 mb 字符串函数。

有谁知道如何处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T10:52:17.457

> 5.4.0 此函数现在支持 dec_point 和数千个字节中的多个字节。在旧版本中只使用了每个分隔符的第一个字节。
> 
> [http://php.net/number_format](http://php.net/number_format)

基于此，对于旧 PHP 版本中的问题，这是一个非常 hacky 的解决方案，没有滚动您自己的实现`number_format`：

```
$separator = ' ';
echo preg_replace('/(?<=\d)\x' . bin2hex($separator[0]) . '(?=\d)/',
                  $separator,
                  number_format($value, 0, '.', $separator)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-11T08:46:53.513

在较新 (>5.4.0) 的 PHP 版本中，只需直接使用细空格作为分隔符，如下所示：

```
number_format($value, 0, ".", "&thinsp;"); 
```

# in-app-purchase - 应用内购买 Windows 应用商店应用

> ID：13761492
> 
> 赞同：1
> 
> 时间：2012-12-07T10:43:52.540
> 
> 标签：in-app-purchase, windows-store-apps

我使用 CurrentApp 对象在我的应用程序中执行应用内购买。该过程运行良好，用户成功购买了不同的功能。在修复了一些错误后，我不得不为该应用程序提供更新。更新后，通过应用内购买购买功能的用户抱怨丢失了以前购买的功能。windows store 如何持久化购买？我是否也需要在应用程序中手动存储所有交易详情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:29:30.607

```
if (!App.LicenseInformation.ProductLicenses[@"UpgradeOption1"].IsActive)       
{              
    // The content of code 
}
else
{
    // Include the upgrade logic
} 
```

希望它对你有帮助......否则你可以看看[这个](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/ece8960f-1018-4aa1-b48e-58a661d4c833)

还有一个很棒的[博客](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/2b736b3e-e9c9-4b62-8e9f-719906a3cc48..)

# sql-server - 我可以/应该为 SQL Server 中的合并复制编写系统表脚本吗

> ID：13761495
> 
> 赞同：0
> 
> 时间：2012-12-07T10:43:54.683
> 
> 标签：sql-server, replication, merge-replication

作为系统上唯一的开发人员，我刚刚开始了一份新工作。一开始我想建立一个和live系统一样的开发系统，但是没有任何数据。然后我想用测试数据填充它。所以我做的第一件事就是编写数据库脚本并在我自己的机器上重新创建数据库。但是，当我调用存储过程时遇到问题。我收到的错误消息是“无效的对象名称'dbo.sysmergearticles”。我相信这与合并复制有关，但这是一个我还一无所知的领域。现在我只想让测试系统启动并运行。如果我查看实时系统上的系统表，“dbo.sysmergearticles”就在那里，还有一大堆其他表。有没有办法可以编写这些对象的脚本，以便我可以使用脚本创建测试系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:33:56.837

您是对的，实时系统上存在 sysmergearticles 表明它参与了合并复制，或者具有来自先前合并发布或订阅的孤立元数据。

在实时系统上，在 SSMS 的对象资源管理器中，展开复制节点和发布/订阅节点。您将需要确定活动系统是否参与活动的合并拓扑，或者合并系统表是否是先前拓扑的孤立表。您可以运行以下查询来确定这一点：

```
select * 
from sys.databases
where is_published = 1 or is_merge_published = 1 or is_subscribed = 1 
```

如果活动系统涉及活动拓扑，那么您将需要确定它是发布者还是订阅者。从那里，您可以通过在对象资源管理器中右键单击发布或订阅来编写发布和订阅的脚本 -> 生成脚本...关于脚本复制的详细信息可以在[Scripting Replication](http://msdn.microsoft.com/en-us/library/ms152483.aspx)中找到。然后，您可以在测试系统上重新创建拓扑。

# python - 以下哪个更符合 Python 风格？

> ID：13761500
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:44:19.643
> 
> 标签：python, if-statement, tkinter

我在优秀的 Tkdocs 站点上使用的示例之一是关于复选框，我想修改它以显示哪些复选框被选中（在标签中）。

我定义了一个函数，然后重新做了它，认为第二个更清晰，因此更 Pythonic。

但是我相信还有更好的方法......

如果不明显 onevar twovar 和 threevar 是复选框，则 outvar 是我在标签中显示的变量...

欢迎评论！

```
 def checkvars(*args):
        if onevar.get():
            if twovar.get():
                if threevar.get():
                    outvar.set('All three are true')
                else:
                    outvar.set('one and two are set to true')
            elif threevar.get():
                outvar.set('one and three are set to true')
            else:
                outvar.set('one is set to true')
        elif twovar.get():
            if threevar.get():
                outvar.set('two and three are set to true')
            else:
                outvar.set('two is set to true')
        elif threevar.get():
            outvar.set('three is set to true')
        else:
            outvar.set('They are all false')

    def checkvars2(*args):
        if onevar.get() and twovar.get() and threevar.get():
            outvar.set('All three are true')
        elif onevar.get() and twovar.get():
            outvar.set('one and two are set to true')
        elif onevar.get() and threevar.get():
            outvar.set('one and three are set to true')
        elif onevar.get():
            outvar.set('one is set to true')
        elif twovar.get() and threevar.get():
            outvar.set('two and three are set to true')
        elif twovar.get():
            outvar.set('two is set to true')
        elif threevar.get():
            outvar.set('three is set to true')
        else:
            outvar.set('They are all false') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:10:58.800

怎么样？

```
def checkvars(*args):
    numbers = ['one', 'two', 'three']
    flags = [x.get() for x in (onevar, twovar, threevar)]
    numbers = filter(flags, numbers)
    if len(numbers) == 0:
        outvar.set('They are all false')
    elif len(numbers) == len(numbers):
        outvar.set('All three are true')
    else:
        is_are = {1 : 'is'}.get(l, 'are')
        comma_list = ''.join(('%s, ' % x for x in numbers[:-2]))
        and_list = ' and '.join(numbers[-2:])
        outvar.set(%s%s %s set to true' % (comma_list, and_list, is_are)) 
```

将最后一个 else 更改为 ', ' 当有 3 个或更多数字时分隔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:11:10.400

俄佐立答案的小变化以确保完整性：

```
def checkvars(*args):
    flags = [x.get() for x in (onevar, twovar, threevar)]

    # Generate a list containing the corresponding string representation of
    # each checked flag value.
    # For example: (True, False, True) gives ('one', 'three')
    num_strings = ('one', 'two', 'three')
    val_strings = [s for f, s in zip(flags, num_strings) if f]

    # Number of checked values correspond to the number of strings.
    checked_count = len(val_strings)
    if checked_count == 0:
        outvar.set('They are all false')
    elif checked_count == len(flags):
        outvar.set('All three are true')
    else:
        verb = 'is' if len(val_strings) == 1 else 'are'
        outvar.set('%s %s set to true' % (' and '.join(val_strings), verb)) 
```

不管是什么语言，一个有这么多`if`/的函数`elif`是很少被接受的。

# javascript - 页面更改期间的jQuery Mobile调用功能

> ID：13761507
> 
> 赞同：1
> 
> 时间：2012-12-07T10:45:09.313
> 
> 标签：javascript, jquery-mobile

我正在使用 jQuery Mobile 并希望在单击锚点后调用一个函数。此函数会将数据放入被调用页面上可见的列表视图中。不幸的是，它不起作用。这是一些代码，我真的希望你能帮助我！

```
<a href="#pageXY" onclick="changeActorInfo(5)" data-transition="flip">
   <img class="tmdbCast1" width="100" height="150">
   <span id="springboardLabelActors" class="tmdbCast1name"></span>
</a> 
```

Firebug 返回以下内容： 错误：无法在初始化之前调用 listview 上的方法；试图调用方法“刷新”

感谢您的帮助！如果您需要更多，请告诉我！

编辑：

```
function changeActorInfo(cID) {

actorID = cID;
getActorInfo(actorID); 
```

};

```
function getActorInfo(pID){
$('.dListDarsteller').show().listview('refresh');
$('.logoListDarsteller').hide();
$.ajax({
    url: "http://api.themoviedb.org/3/person/" +pID+ "?api_key=XXX&append_to_response=credits",
    dataType: 'jsonp',
    success: function(results){
        var name = results.name;
        $('.tmdbTitelDarsteller').html('<br><span class="titel">' +name);
        (...)
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:23:46.873

您的函数`.listview('refresh');`在 jQuery Mobile 初始化内容之前调用。在任何情况下，您只能在将`.listview('refresh');`动态内容添加到您的列表视图对象后调用。

# python - 在 django 中获取多个站点 ID 的问题

> ID：13761510
> 
> 赞同：2
> 
> 时间：2012-12-07T10:45:20.660
> 
> 标签：python, django, templates, mezzanine, multiple-sites

我在一个夹层项目中使用了两个域名（.com 和 .mx）。当我使用**Site.objects.get_current()**函数获取当前站点 ID 时，它只返回一个**1**。我在浏览器中使用的是 .com 还是 .mx。

我认为这是因为在我的 settings.py 中定义了**SITE_ID = 1** ，当我将其编辑为 2 时，**Site.objects.get_current()** 函数返回 2。

但我真正想要的是**按站点定义模板** ，即当用户使用 .com 时，他会看到**a.html**，当他使用 .mx 时，他会看到**b.html**。但正如我告诉**Site.objects.get_current( )**函数只给我一个 id 无论我使用 .com 还是 .mx ，所以我不能按站点定义模板。

所以请建议我一些获取动态站点ID的方法，或者还有另一种方法可以按站点定义模板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:53:06.433

这并不是 Sites 框架的工作原理。为了区分使用站点框架的站点，每个站点都必须有自己的设置模块（因为这是您设置的地方`SITE_ID`）。

您正在寻找的是一种从请求中获取当前站点的方法。您可以为此使用该[`RequestSite`](https://docs.djangoproject.com/en/1.4/ref/contrib/sites/#requestsite-objects)对象：

```
from django.contrib.sites.models import RequestSite    
site_name = RequestSite(request).domain 
```

还有[django-dynamicsites](https://bitbucket.org/uysrc/django-dynamicsites/)做同样的事情还有一些额外的（重定向，模板/url分配，......）

# php - 我的表单在刷新页面时添加了空白字段

> ID：13761512
> 
> 赞同：1
> 
> 时间：2012-12-07T10:45:32.883
> 
> 标签：php, javascript

> **可能重复：**
> [如何使用 JavaScript 验证表单？](https://stackoverflow.com/questions/6454875/how-to-validate-a-form-using-javascript)

我想使用 javascript 那就是我的表单不会在刷新时或通过空白字段向表中添加任何数据我的代码在这里

```
<form id="form1" name="form1" method="post" onsubmit="return validateForm()" action="">
    Name <input type="text" name="name" /> <br />
    Website <input type="text" name="website" /> <br />
    Description <input type="text" name="description" /> <br />
      <input type="submit" name="submit" value="Submit"/>
    </form>
    <?php
    global $wpdb;
    $wpdb->query("insert into ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
    values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}')");

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:53:46.800

尝试：

[演示](http://jsbin.com/emozom/3/edit)

```
 <form id="form1" name="form1" method="post" onsubmit="return validateForm();" action="aaa">
        Name <input type="text" class="txt" name="name" /> <br />
        Website <input type="text" class="txt" name="website" /> <br />
        Description <input type="text" class="txt" name="description" /> <br />
        <input type="submit" id="submit" value="Submit"/>
    </form>

    <script type="text/javascript">
        function validateForm(){
            var arr = document.getElementsByClassName('txt');
            var errors = '';
            for(var i=0;i<arr.length;i++){
                if(!arr[i].value){
                    errors += arr[i].getAttribute('name') + ' cannot be blank\n';
                }
            }
            if(errors.length){
                alert(errors);
                return false;
            }
        }
    </script> 
```

# javascript - 如何使用 javascript document.referrer 显示以前的域

> ID：13761516
> 
> 赞同：-4
> 
> 时间：2012-12-07T10:45:41.837
> 
> 标签：javascript

我想向我的页面显示用户来自的域`document.referrer`。但我不想显示此站点的所有名称，例如：www.mysite.pl/page2314 但只显示域 - www.mysite.pl

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:51:50.213

您可以使用这样的正则表达式：

```
var referrer = document.referrer
var doman = referrer.match(/:\/\/([^/]+)\//)[1] 
```

这将匹配 url 中的任何内容，`://`直到（但不包括）以下内容`/`。

如果`document.referrer`是`http://stackoverflow.com/questions`，匹配的域将是`stackoverflow.com`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:52:01.980

只匹配第一部分的正则表达式呢？像

编辑：谢谢@David

`document.referrer.match(/((ht{1}(tp|tps):\/\/)[\w\d\S]+?)\//g)[0] //"http://stackoverflow.com/"`

当然你可以使用任何合适的正则表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:52:59.437

```
var ref = document.referrer;
ref = ref.substring(ref.indexOf("://") + 3)
ref = ref.split("/")[0]; 
```

现在 ref 只包含域。另一种方法是使用正则表达式。

# java - 具有方法参数的强类型 ArrayList

> ID：13761517
> 
> 赞同：1
> 
> 时间：2012-12-07T10:45:43.250
> 
> 标签：java, android, generics, casting

是否可以`ArrayList`从方法参数参数化一个？例如，我有一个从布局`getAllViewsFromRoot(View root)`中检索所有内容的方法。`Views`现在我想要一个在布局中获取所有 ProgressBars 的方法，所以我可以使用这个（工具包）方法：

```
public static ArrayList<ProgressBar> getAllProgressBars(View root) {
  ArrayList<View> allviews = getAllViewsFromRoot(root);
  ArrayList<ProgressBar> results = new ArrayList<ProgressBar>();
  for (View view : allviews)
    if (view instanceof ProgressBar)
      results.add((ProgressBar)view);
  return results;
} 
```

但是由于我需要对不同类型的`Views`. 我希望这会奏效，但它不会：

```
public static ArrayList<?> getViewsFromViewGroup(ViewGroup root, Class clazz) {
    ArrayList<View> views = getAllViewsFromRoots(root);
    ArrayList<View> result = new ArrayList<clazz>();
    for (View view : views) {
        if (clazz.isInstance(view.getClass())) {
            result.add(view);
        }
    }
    return result;
} 
```

在其他地方我会打电话`ArrayList<ProgressBar> pbs = Toolkit.getViewsFromViewGroup(root, ProgressBar.class)`。

换句话说，我可以指定如何使用方法参数对 ArrayList 进行强类型化吗？

**我想要的任何一种可能吗？**我不一定非常需要它，但我喜欢以通用的方式解决问题。

**编辑**

我已经设法让代码与下面的答案一起使用（感谢**thkala**）。我怀疑这实际上要容易得多。

```
public static <T> ArrayList<T> getViewsFromViewGroup(View root, Class<T> clazz) {
    ArrayList<T> result = new ArrayList<T>();
    for (View view : getAllViewsFromRoots(root)) 
        if (clazz.isInstance(view)) 
            result.add(clazz.cast(view));
    return result;
} 
```

因此，如果您想从布局中的某个点检索所有 ProgressBar，只需调用：

```
ArrayList<ProgressBar> myPbs = Toolkit.getViewFromViewGroup(myRootView, ProgressBar.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:50:42.980

这个怎么样：

```
public static <T> ArrayList<T> getViewsFromViewGroup(ViewGroup root, Class<T> clazz) {
    ...
} 
```

`Class`是参数类型，因此您可以使用它的参数来指定方法中的泛型参数。自然，您将不得不`T`在方法主体中使用参数 - 除非您打算使用反射，否则您甚至可以完全忽略该`clazz`参数。

# sql-server - 如何通过 IIS 启动 SQL Server LocalDB

> ID：13761518
> 
> 赞同：7
> 
> 时间：2012-12-07T10:45:50.047
> 
> 标签：sql-server, iis, localdb

我正在将 SQL Server LocalDB 用于网站。

安装 SQL Server LocalDB 并在安装过程中创建数据库。共享实例是通过[LocalDBCreateInstance](http://msdn.microsoft.com/en-us/library/hh214784.aspx)、[StartLocalDBInstance](http://msdn.microsoft.com/en-us/library/hh217143.aspx)和[LocalDBShareInstance](http://msdn.microsoft.com/en-us/library/hh245693.aspx)创建的。

如果实例启动，网站可以成功连接数据库。

但是，如果实例停止，它不会自动启动。从控制台应用程序访问数据库（当实例停止时）会导致实例启动。

所以这似乎是某种权限问题。

应用程序池以 AppPool 身份运行。但是，将其切换到网络服务或本地系统并不能解决问题。

应用程序池配置为加载其用户配置文件，并且“setProfileEnvironment”属性也设置为 true。（这两个设置都是必需的，如此[处](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-2-instance-ownership.aspx)和[此处](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)所述）。

我已经使用 Sysinternal Process Monitor 监控了数据库访问，但没有找到任何“拒绝访问”条目。

我还尝试从网站本身（在 Global.asax 中）调用[StartLocalDBInstance 。](http://msdn.microsoft.com/en-us/library/hh217143.aspx)调用成功返回（返回值为S_OK），但实例仍然停止。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T18:21:27.797

这就是在 IIS 下使用 LocalDB 的缺点——实例归您的交互式登录所有，并且实例进程只能由该登录启动。由于 IIS 作为某个服务帐户运行，它无法启动属于您的交互式登录帐户的 LocalDB 实例。

您可能会使用 IIS 服务帐户拥有的 LocalDB 实例，但请注意您可能会遇到用户配置文件问题 - LocalDB 需要创建和加载用户配置文件，而 IIS 使用有时可能无法完全创建和加载的轻量级用户配置文件.

有关在完整 IIS 中运行 LocalDB 的更详细讨论，请参阅这两篇博客文章。我只推荐它用于开发环境，并将基于服务的 SQL Express 用于生产。

1.  [第 1 部分：用户资料](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx)
2.  [第 2 部分：实例所有权](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-2-instance-ownership.aspx)

# android - Button 中的自定义 TextView

> ID：13761519
> 
> 赞同：3
> 
> 时间：2012-12-07T10:45:58.303
> 
> 标签：android, button, textview

我创建了一个自定义 textview 类。通过这个类，我可以设置字体，设置文本的内阴影，设置文本的外阴影，设置文本的半径和颜色。我也想在按钮中出现的文本中使用 textviews 的这些特性。我已经通过谷歌进行了研究，但我无法找到解决我问题的解决方案。因此，如果有人对此主题有任何想法，那么您将有很大的帮助。

我在我的文本视图中定义的属性是

```
 xmlns:braindigit="http://schemas.android.com/apk/res/com.example.MyCustomTextView" //this is in the main layout        

   <com.example.MyCustomTextView
    android:id="@+id/stateInfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/you_are_not_logged_in"
        android:textColor="#3191d2"
        android:textSize="18sp"
        android:textStyle="bold"
        braindigit:innerShadowColor="#003456"
        braindigit:innerShadowDy="1"
        braindigit:innerShadowRadius="1"
        braindigit:outerShadowColor="#ffffff"
        braindigit:outerShadowDy="1"
        braindigit:outerShadowRadius="1" /> 
```

自定义文本视图没有问题。但是，我不知道如何将这些自定义文本值用于我的按钮。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T10:48:58.010

如果您的自定义类扩展了 TextView，您可以使用相同的实现并扩展 Button。Button 继承自 TextView。

# jquery - 使用 JQuery 从 Ajax 函数中的 WebMethod 下拉项的简单返回值

> ID：13761520
> 
> 赞同：0
> 
> 时间：2012-12-07T10:46:00.323
> 
> 标签：jquery, ajax, webmethod

我在 aspx 页面上有两个 dropdownsddl1、ddl2 和一个按钮 btn。当我单击按钮时，需要从两个下拉列表中获取显示所选项目值的警报框。我可以知道如何通过网络方法做到这一点...

**按钮：**

```
<input  id="Test" type="button" value="clickme" onclick='<%# String.Format("showingddlvalues(\"{0}\")",Eval("ddl1ID")) %>' /> 
```

**网络方法：**

*[网络方法]*

```
 public static string showingddlvalues(string ddl1ID)
    {
        return String.Format("showing selected ddl1ID{0} value here ", ddl1ID);
    } 
```

**jQuery：**

```
function showingddlvalues(ddl1ID) {
    $.ajax({
        type: "POST",
        url: "Default.aspx/showingddlvalues",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: "{ddl1ID:'" + ddl1ID + "'}",
        success: AjaxSucceeded,
        error: AjaxFailed
    });
}

function AjaxSucceeded(result) {
    alert(result.d);
}

function AjaxFailed(result) {
    alert('error:' + result.status + ' ' + result.statusText);
}​ 
```

请纠正我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:09:39.100

像这样修改你的 jQuery & web 方法并再次检查结果：

**jQuery：**

```
function showingddlvalues(ddl1ID) {

    var value = $('#' + ddl1ID).val();

    $.ajax({
        type: "POST",
        url: "Default.aspx/showingddlvalues",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: "{value:'" + value + "'}",
        success: AjaxSucceeded,
        error: AjaxFailed
    });
}​ 
```

**网络方法：**

```
[WebMethod]
public static string showingddlvalues(string value)
{
    return String.Format("{0}", value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:51:43.697

尝试，

var js = $('#idOfDrop option:selected').text();

或者

var js = $("[name=nameOfSelect] :selected")

警报（js）；

您将从下拉列表中获取所选值

# qt - 设置 Qt 使用环境

> ID：13761522
> 
> 赞同：5
> 
> 时间：2012-12-07T10:46:10.377
> 
> 标签：qt

在我开始解释问题之前——是的，我在来这里之前查看了 Qt 论坛和网站。

我下载并安装了 Qt 库和 IDE。安装后我得到以下信息：

[http://store.picbg.net/pubpic/04/59/4ce35a1b489a0459.png](http://store.picbg.net/pubpic/04/59/4ce35a1b489a0459.png)

单击命令提示符图标后，我得到以下信息： [http ://store.picbg.net/pubpic/79/13/0d46b97041da7913.jpg](http://store.picbg.net/pubpic/79/13/0d46b97041da7913.jpg)

当我输入“vcvarsall.bat”时，我得到无效命令错误。我显然做错了什么，问题是 - 究竟是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T14:38:29.293

您的错误只是意味着它`vcvarsall.bat`不在您的`PATH`环境变量中列出的文件夹中。您可以通过两种方式解决此问题。

*   [您可以将`PATH`环境变量设置为包含 vcvarsall.bat 所在的文件夹。](https://www.google.com/search?q=windows%20set%20path%20environment%20variable&aq=f&oq=windows%20set%20path%20environment%20variable&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)
*   您可以`cd`进入所在的文件夹`vcvarsall.bat`并从那里调用`vcvarsall.bat`。

在我的情况下（默认情况下），`vcvarsall.bat`位于以下目录中：

`C:\Program Files\Microsoft Visual Studio 9.0\VC\vcvarsall.bat`

**编辑：**对于 Visual Studio 2017，位置已更改。现在位于：

`C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvarsall.bat`

# c - 从完整图计算最短路径

> ID：13761524
> 
> 赞同：0
> 
> 时间：2012-12-07T10:46:19.143
> 
> 标签：c, graph, brute-force, backtracking

我有一个矩阵 NxN，其中是无向图中顶点和j`matrice[i][j]`之间的边的成本。`i``f`

我需要确定的是包含矩阵中所有顶点的最短路径。

所以对于像这样的输入：

```
0 198 67 368
198 0 131 432
67 131 0 301
368 432 301 0 
```

我需要尝试所有可能的路径，在这种情况下：

```
0-->1-->2-->3-->0 
```

是正确的，长度为 998。

我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:50:01.047

您正在描述被广泛研究的[旅行推销员问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Exact_algorithms)。

虽然有很多方法可以近似解决方案 - 确切的解决方案确实需要指数运行时间，并且蛮力是解决它的一种选择（在 O 中`(n!)`）。

这个想法是生成所有可能的排列并评估每个排列 - 并找到最小值。
[例如，这个问题](https://stackoverflow.com/q/9148543/572670)讨论了如何生成所有排列。同样的想法也适用于您的问题。

可以进行一些可能的优化，例如[分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)技术 - 或使用智能[DP](http://en.wikipedia.org/wiki/Dynamic_programming)解决方案。

# javascript - phonegap db 查询插入/选择语法

> ID：13761525
> 
> 赞同：0
> 
> 时间：2012-12-07T10:46:24.917
> 
> 标签：javascript, android, ios, cordova

我正在使用 phonegap(cordova 2.1.0) 进行 IOS/android 应用程序开发。每次我必须进行查询以选择或插入/更新时，我都会这样做：

```
//to insert username, password into db
var db = window.openDatabase(dbName, "1.0", gAppConfig.dbMessage, 200000);                
db.transaction(queryUpdateURL, errorQuery);

function queryUpdateURL(tx) 
            {
                var newURL = document.getElementById('changeServerURL').value ; 
                alert('new url='+newURL);

                tx.executeSql("update "+gAppConfig.configTable+" set value='"+newURL+"' where key='serverURL'; ", queryUpdateSuccess, errorQuery);

                return;
            } 
```

因此，每次执行查询时都必须打开数据库，或者只打开一次就足够了。然后，如果数据库打开成功，则调用“queryUpdateURL”，如果其中给出的查询成功，则调用“queryUpdateSuccess”，否则调用 errorQuery 函数。所以，只需进行一次查询，就会调用三个函数。它是正确的方式/唯一的方式还是存在任何其他解决方法。这似乎真的很痛苦，为单个查询创建三个函数。任何建议都非常受欢迎。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:40:03.223

欢迎来到异步编程。为了减少您需要进行的方法调用次数，您始终可以保存“db”变量，这样您就不必继续调用 window.openDatabase。除此之外，您需要遵循事务 -> executeSql -> 成功或失败堆栈才能将内容添加到数据库中。

# php - 用于获取 Youtube API 2.0 上传视频的访问令牌的 PHP google API 服务帐户

> ID：13761526
> 
> 赞同：2
> 
> 时间：2012-12-07T10:46:25.220
> 
> 标签：php, video, upload, youtube

我的主要问题是：我可以使用从服务帐户获得的访问令牌将视频上传到 youtube 吗？

帐户是新帐户，已连接到 youtube，频道已创建，并以以下模式获取访问令牌：

```
$client = new Google_Client();
$client->setApplicationName('Youtube Login');

$key = file_get_contents($key_file);

$client->setClientId($client_id);
$client->setAssertionCredentials(new Google_AssertionCredentials(
   $service_account_name,
   array(
      'https://www.googleapis.com/auth/youtube.upload',
      'https://www.googleapis.com/auth/youtube'
      'https://gdata.youtube.com/action/GetUploadToken',
      'https://gdata.youtube.com'
   ),
   $key)
);

$client::$auth->refreshTokenWithAssertion();
$json = $client->getAccessToken();
$accessToken = json_decode($json)->access_token; 
```

所以访问令牌是可以的。现在，当我创建标题并插入访问令牌和开发人员密钥以及此处描述的所有内容时：[https](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading) ://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading 我收到 NoLinkedYouTubeAccount 错误。

如果不能使用服务帐户以这种方式上传视频，有没有办法在视频上传中跳过用户交互？

我们有该帐户，但我们不希望仅仅因为 ClientLogin 已弃用且 Youtube API v2.0 不支持 OAuth2 服务帐户访问令牌而将用户重定向到任何地方。

有办法吗？搜索了整个网络，看到类似的未回答的问题，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T12:41:37.010

您不能使用服务帐户来完成此操作： [https](https://code.google.com/p/google-api-php-client/wiki/OAuth2?hl=de-DE#Service_Accounts) ://code.google.com/p/google-api-php-client/wiki/OAuth2?hl=de-DE#Service_Accounts 我也在寻找一种执行方式youtube api 调用没有最终用户身份验证。 [对于使用 Google Youtube API v3 的已知帐户，您如何在没有用户干预的情况下接收访问令牌？](https://stackoverflow.com/questions/18080219/how-do-you-recieve-an-access-token-without-user-intervention-for-a-known-account)

# flash-builder - Flashbuilder 在 Loading Workbench 处停止加载

> ID：13761529
> 
> 赞同：0
> 
> 时间：2012-12-07T10:46:29.237
> 
> 标签：flash-builder

当我按下 Flashbuilder 图标以启动它时，它会在“Loading Workbench”中的初始屏幕处停止并永远停留在那里。根据进程管理器，它只加载 92804K 的内存。我该如何解决？我不能工作`t_t`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T07:36:47.183

在[Eclipse/Flash Builder 4.7 Hanging on Loading Workbench](http://bbishop.org/blog/?p=656)中，Brian Bishop 解释说，如果 Eclipse/FlashBuilder 崩溃恢复失败，就会发生这种情况。要解决此问题，您可以尝试以下操作：

转到`workspace\.metadata\.plugins\org.eclipse.core.resources`并删除该`.snap`文件。

如果仅删除此文件，您不会丢失工作区配置。

snap 文件在这里解释：[What are *.snap files in eclipse?](https://stackoverflow.com/questions/2026502/what-are-snap-files-in-eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:50:02.170

我通过删除`.metadata`文件解决了这个问题，因为它是我当前的工作区。不幸的是，我丢失了所有配置。

# c++ - 线程同步 101

> ID：13761530
> 
> 赞同：0
> 
> 时间：2012-12-07T10:46:32.770
> 
> 标签：c++, multithreading

我对线程基础有疑问。如果我启动一个新线程*T1*，主线程必须等待*T1*加入或无需等待即可继续执行？

如果必须等待，我可以让主线程和新线程异步运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:48:20.633

如果您不调用`join()`两个线程同时执行。默认情况下，线程异步运行。`join()`阻塞调用线程，直到线程终止。

* * *

我想添加以使线程同步执行，并提供并发控制机制。

可以探索一下[POSIX 线程编程](https://computing.llnl.gov/tutorials/pthreads/)

# android - HTML解析Android中的特殊字符

> ID：13761534
> 
> 赞同：0
> 
> 时间：2012-12-07T10:46:42.123
> 
> 标签：android, html, unicode

我有一个简单的问题：一旦我检索到邮件文本，有时会发生`Html.fromHtml`无法正确解析字符串的情况。

我给你举个例子。这是 HTML 字符串：

```
&amp;#‪8211‬;&amp;#‪8211‬;&amp;#‪8211‬;&amp;#‪8211‬;&amp; 
```

它需要是这样的：

––––––––––––––––––––––––––––––––––––––––––</p>

Android中有没有办法实现这一点？我需要使用正则表达式吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:57:22.730

您示例中的字符串是`&#8211;&#8211;&#8211;&`（字面意思）的 HTML 表示法，因此正确的浏览器行为是以这种方式呈现它。由于某种无法从描述中猜到的原因，一些软件应用了*双重*编码，即首先将破折号“-”编码为`&#8211;`，然后再将其编码`&`为`&amp;`。

顺便说一句，一系列连续的破折号可能会或可能不会产生连续的线；这取决于字体。有更可靠的方法来产生长线，例如`<hr>`CSS 中的元素和边框属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T20:28:51.567

您可以使用以下方法过滤掉隐藏字符（在这种情况下）：

```
myString = myString.replaceAll( "[\\u202C\\u202A]", "" ); 
```

之后它只是：

```
Html.fromHtml(myString); 
```

它将在 html 上下文中工作。或者，如果您想要真正的破折号字符：

```
Html.fromHtml(Html.fromHtml(myString)); 
```

概念演示：http: [//jsfiddle.net/CGzDc/](http://jsfiddle.net/CGzDc/)（javascript，您必须在此答案中使用代码来获取 java ）

# android - 从非活动类启动活动并将上下文传递给它

> ID：13761540
> 
> 赞同：0
> 
> 时间：2012-12-07T10:47:00.613
> 
> 标签：android, android-intent, android-activity, android-context

我知道这是常见问题，但找不到我的错误。我需要将 Activity 的 Context 传递给非活动的 RestClient 类。我这样做：

```
public class RestClient {
 public void setContextRest(Context ctx)
    {
        this.context = ctx;
    }
    public Context getContextRest()
    {
        return  this.context;
    }
    public RestClient(Context context)
    {
        this.context = context;
    }
} 
```

在我的活动课上：

```
 RestClient helper = new RestClient(LoginActivity.this);
 helper.setContextRest(LoginActivity.this); 
```

这就是我在 RestClient 中获得它的方式：

```
Intent i = new Intent(context, LoginActivity.class);
i.putExtra("relogin", true);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

我得到

```
 java.lang.NullPointerException
    at android.content.ComponentName.<init>(ComponentName.java:75)
    at android.content.Intent.<init>(Intent.java:2823)
    at com.library.RestClient.Execute(RestClient.java:276)
    at com.library.JSONParser.getJSONFromUrl(JSONParser.java:46)
at com.library.UserFunctions.loginUser(UserFunctions.java:76)
    at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:318)
    at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
    threadid=9: thread exiting with uncaught exception (group=0x40018578) 
```

在`Intent i = new Intent(context, LoginActivity.class);`. 问题是由于`context`某种原因它是空的。请告诉我它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:26:52.277

以这种方式创建您的 RestClient：

```
public class RestClient {
    Context context;

    public RestClient(Context mcontext) {
       context = mcontext;
    }
    ....
    .... 
} 
```

现在，像这样初始化你的restclient：

```
RestClient client;
client = new RestClient(getApplicationContext()); 
```

它将允许您在 RestClient 类中的任何位置访问上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:53:10.547

```
 Intent i = new Intent(this.context, LoginActivity.class); 
```

它应该 this.context 而不仅仅是上下文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:29:07.420

也许它与正确的设计模式相矛盾，但我在 Activity 中使用了 Singletone，它可以正常工作。像这样：

```
 public static Context getInstance(){
        if (instance == null)
        {
            instance = LoginActivity._context;
        }
        return instance;
    } 
```

# c# - C# WPF D3（动态数据显示）图表项目

> ID：13761541
> 
> 赞同：3
> 
> 时间：2012-12-07T10:47:00.690
> 
> 标签：c#, wpf, charts, dynamic-data-display

**我正在尝试使用 D3。首先我下载了​​最后一个版本并通过VS2012打开它。不做任何更改我尝试运行测试项目，我在运行时收到奇怪的错误消息，详细信息如下。我能解决这个问题吗？**

```
System.Security.VerificationException was unhandled by user code
  HResult=-2146233075
  Message=Operation could destabilize the runtime.
  Source=DynamicDataDisplay
  StackTrace:
       at Microsoft.Research.DynamicDataDisplay.Charts.AxisControl`1..ctor()
       at Microsoft.Research.DynamicDataDisplay.Charts.NumericAxisControl..ctor() in c:\Projects\DynamicDataDisplay\Charts\Axes\Numeric\NumericAxisControl.cs:line 10
       at Microsoft.Research.DynamicDataDisplay.Charts.NumericAxis..ctor() in c:\Projects\DynamicDataDisplay\Charts\Axes\Numeric\NumericAxis.cs:line 18
       at Microsoft.Research.DynamicDataDisplay.Charts.HorizontalAxis..ctor() in c:\Projects\DynamicDataDisplay\Charts\Axes\Numeric\HorizontalAxis.cs:line 18
       at Microsoft.Research.DynamicDataDisplay.ChartPlotter..ctor() in c:\Projects\DynamicDataDisplay\ChartPlotter.cs:line 16
       at System.Xaml.Schema.XamlTypeInvoker.DefaultCtorXamlActivator.InvokeDelegate(Action`1 action, Object argument)
       at System.Xaml.Schema.XamlTypeInvoker.DefaultCtorXamlActivator.CallCtorDelegate(XamlTypeInvoker type)
       at System.Xaml.Schema.XamlTypeInvoker.DefaultCtorXamlActivator.CreateInstance(XamlTypeInvoker type)
       at System.Xaml.Schema.XamlTypeInvoker.CreateInstance(Object[] arguments)
       at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CreateInstanceWithCtor(XamlType xamlType, Object[] args)
       at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CreateInstance(XamlType xamlType, Object[] args)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:11:15.140

自己的问题和自己的解决方案:) 我解决了我的问题。问题是库和测试项目构建目标平台不一致。当我将测试项目构建目标平台从 x86 更改为任何 cpu 时，问题就解决了。仍然我不明白VS2012错误信息的含义:)但无论如何问题都解决了。

# asp.net-mvc - 数据合同强制从 Web API 帖子中设置日期值

> ID：13761542
> 
> 赞同：1
> 
> 时间：2012-12-07T10:47:04.550
> 
> 标签：asp.net-mvc, json, entity-framework, angularjs

我有一个从 Angular/Json 客户端调用的 WepApi，它首先序列化为在 EF 代码中创建的模型。我想发布产品模型并在 post/save 函数中设置 changedate 属性。我得到 ModelState.IsValid = false，是否有任何解决方法我想保留我的 ef 模型属性

```
[Required]  
public DateTime ChangeDate { get; set; } 
```

得到这个错误托盘张贴

> {"$id":"1","Message":"发生错误。","ExceptionMessage":"类型 'Entity.Product' 上的属性 'ChangeDate' 无效。值类型的属性标记为 [必需]还必须用 [DataMember(IsRequired=true)] 标记才能被识别为必需的。考虑使用 [DataContract] 赋予声明类型

代码模型

```
[DataContract]
public class Product
{
    public Product()
    {
        ChangeDate = DateTime.Now;
    }

    //Serialization
    [DataMember]
    //DataAnnotations
    [DisplayName("ProductId")]
    [Description("ProductId")]
    public int ProductId { get; set; }

    //Serialization
    [DataMember(IsRequired = true)]
    //DataAnnotations
    [DisplayName("ChangeDate")]
    [Description("Date when product last was changed")]
    [Required]
    [DisplayFormat(DataFormatString = "{0:d}")]
    public DateTime ChangeDate { get; set; }

    //Serialization
    [DataMember]
    //DataAnnotations
    [DisplayName("Name")]
    [Description("Name")]
    [Required(ErrorMessage = " ")]
    [StringLength(100)]
    public String Name { get; set; } 

    public HttpResponseMessage Post(Entity.Product product,Boolean directSave = true)
    {
        if (ModelState.IsValid)
        {
            product.ChangeDate = DateTime.Now;
            _productRepository.Add(product);
            if (directSave)
                _context.Save();

            var response = Request.CreateResponse(HttpStatusCode.Created, product);
            response.Headers.Location = GetLocation(product.ProductId);
            return response;
        }

        return Request.CreateResponse(HttpStatusCode.BadRequest);
    } 
```

# c# - XSD.exe 忽略简单的复杂类型

> ID：13761543
> 
> 赞同：2
> 
> 时间：2012-12-07T10:47:10.820
> 
> 标签：c#, wcf, xsd, xsd.exe

我们有一个大型 wcf 服务和一个大型 xsd 文档，其中包含多个元素和复杂类型。我们使用 xsd.exe 生成代码，并使用`XmlSerializerFormat`我们`ServiceContract`的 WCF 服务再次序列化这些对象。

现在我们遇到了 xsd.exe 和字符串数组定义的问题。

图像我们定义了以下元素..

```
<xs:element name="Configuration" type="Configuration"/>
<xs:complexType name="Configuration">
    <xs:sequence>
    <xs:element name="Name" type="xs:string"/>
    <xs:element name="Parameters" type="Parameters" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="Parameters">
     <xs:sequence>
    <xs:element name="Parameter" type="xs:string" maxOccurs="unbounded"/>
      </xs:sequence>
  </xs:complexType> 
```

这将导致：

```
 /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "2.0.50727.3038")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(Namespace="http://mynamespace.com/")]
    [System.Xml.Serialization.XmlRootAttribute(Namespace="http://mynamespace.com/", IsNullable=false)]
    public partial class Configuration {

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string Name;

        /// <remarks/>
        [System.Xml.Serialization.XmlArrayAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        [System.Xml.Serialization.XmlArrayItemAttribute("Parameter", Form=System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable=false)]
        public string[] Parameters;
    } 
```

如您所见，xsd.exe 工具足够智能，可以查看 complextype `Parameters`，因此将其设为`string[]`.

问题是，如果我们在 WCF 服务中使用它，它将创建`ArrayOfString`复杂类型而不是我们的`Parameters`复杂类型。更糟糕的是，我们有几个 string[] 导致`ArrayOfString1`,`ArrayOfString2`等等`ArrayOfString3`..

问题是：我们如何避免 XSD 使我们的复杂类型变平`Parameters`？

# sql - 找出时差并将时差分组

> ID：13761550
> 
> 赞同：1
> 
> 时间：2012-12-07T10:47:39.273
> 
> 标签：sql, sql-server

```
SELECT
yt1.[timestamp] AS StartTime,
MIN(yt2.[timestamp]) AS EndTime,
DATEDIFF(s, yt1.[timestamp], MIN(yt2.[timestamp])) AS DifferenceInSeconds
FROM
yourTable yt1
LEFT JOIN yt2 ON yt1.[timestamp] < yt2.[timestamp]
WHERE
yt1.Col1 IS NULL
OR yt1.Col2 IS NULL
...
OR yt1.Col20 IS NULL
OR yt2.Col1 IS NULL
...
OR yt2.Col20 IS NULL 
GROUP BY yt1.[timestamp] 
```

在同一个查询中，当前输出就像

```
18-05-2012 20:07
18-05-2012 20:17
18-05-2012 20:27
18-05-2012 20:37 
```

等有 10 分钟的间隔，连续的间隔我们应该看到 18-05-2012 20:07 作为开始时间和 18-05-2012 20:37 作为结束时间和间隔 40 分钟。你能帮忙吗

# windows-phone-8 - Windows Phone 8：dllimport 不起作用

> ID：13761551
> 
> 赞同：4
> 
> 时间：2012-12-07T10:47:39.630
> 
> 标签：windows-phone-8

我正在尝试导入 coredll 并在 C# Windows Phone 项目中使用它的一个 api 这是代码片段

```
[DllImport("coredll.dll", SetLastError = true)]
static extern Int32 GetLastError();
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        try
        {
           GetLastError();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
      } 
```

我在 Windows Phone 8 手机 System.NotSupportedException 上遇到以下异常：DllImport 不能用于用户定义的方法 **PS：这适用于任何 API，而不仅仅是这个 API。** coredll 是一个 C++ 库，我在 C# 项目中使用它。这里出了什么问题？谢谢，病毒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:24:30.940

问题出`DllImport`在 Windows Phone 8 上不受支持。您必须使用 Windows 运行时组件（现有的或您自己编写的）在 C++ 和 .NET 语言之间架起桥梁。

# winforms - 从 Crystal Reports 中的组字段以外的字段排序

> ID：13761562
> 
> 赞同：0
> 
> 时间：2012-12-07T10:48:17.490
> 
> 标签：winforms, crystal-reports, visual-studio-2005

使用：VS2005；VS2005的水晶报表；甲骨文 9i；赢表格；

我有一份报告，其中显示了相应的 A/c 经理及其收入收益。该报告按 A/c Manager ID 分组，并允许对其进行深入分析。该组设置为“更改 A/c Manager ID”，因此我应该使用 A/c Manager ID 字段对结果集进行排序，我这样做了，结果证明是完美的。

空调经理ID | 收入 -------------- -------- 1\. A 100 2\. B 200 3\. C 50

在一个新要求上，我应该将排序顺序更改为收入字段。但是，在实施时，我看到相同的 A/c Manager 分散在各处，如果您更改“除 Group Sorting 之外的排序”字段（在本例中不是 A/c Manager ID），这很明显。

空调经理ID | 收入 -------------- -------- 1\. B 200 2\. A 100 3\. C 50

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:22:18.943

从报告菜单中，选择组排序专家 :)

# php - jquery ajax代码不起作用

> ID：13761566
> 
> 赞同：-4
> 
> 时间：2012-12-07T10:48:25.217
> 
> 标签：php, javascript, jquery, html, ajax

我在jquery和ajax中写了一个代码作为学习的例子。但是它不起作用。这是代码。

jQuery

```
$(document).ready(function() {    
    $("#ra").click(function(){  
        var value=145;
        $.ajax({
            url: "ajax.php",
            type: "POST",
            data: ({name: value}),
            success: function(data){
            $("#raaagh").html(data);
            }
        });        
    });
}); 
```

php

```
<?php
    $score = "1";    
    $userAnswer = $_POST['name'];    
    if ($_POST['name'] == "145"){
        $score++;
    }       
    echo $score;    
?> 
```

html

```
<button id="ra">Ajax Away</button>
<div id="raaagh"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:14:25.840

这是工作代码..我认为您错过了包括`JQuery`：

html.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(e) {
    $("#ra").click(function(){  
        var value=145;
        $.ajax({
            type: "POST",
            url: "ajax.php",
            data: ({name: value}), //you can POST multiple parameters
            //data: ({name: value, email:value, phone: value}),
            success: function(data){
                $("#raaagh").html(data);
            }
        });        
    });
});
</script>
</head>
<body>
    <button id="ra">Ajax Away</button>
    <div id="raaagh"></div>
</body>
</html> 
```

ajax.php：

```
<?php
    $score = 1;
    $userAnswer = $_POST['name'];    
    if ($_POST['name'] == "145"){
        $score++;
    }       
    echo $score;    
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T11:00:51.283

尝试这个：

回声 json_encode($score);

# html - HTML 元标记验证错误 - 内容限制？

> ID：13761569
> 
> 赞同：0
> 
> 时间：2012-12-07T10:48:38.913
> 
> 标签：html, validation, meta

元标记内容中可能包含的内容是否有任何限制？

我定义了以下元标记：

```
 <meta name="doctype" content="<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">"/> 
```

不幸的是，w3 验证器抛出了一个没有意义的错误，因为内容实际上只是一个字符串：

> “-”不是为任何属性指定的组的成员

谁能解释这个问题，我们需要客户端 jQuery 脚本中的不同信息，并且直到现在一直使用不同的元标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:52:25.027

> 元标记内容中可能包含的内容是否有任何限制？

这取决于 HTML 的版本。

大多数版本对此都很放松。HTML 5 有相当严格的限制（尽管其中包括“以及此 Wiki 页面上的任何内容”……据我所知，没有任何验证器能够保持最新状态）。

> “-”不是为任何属性指定的组的成员

这是因为您不能在以字符`"`分隔的属性值中包含原始`"`字符。您需要将其表示为`&quot;`（或数字字符引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:50:55.390

在任何 HTML 规范中，`meta`带有属性的标签`name`可能包含任何内容。（在实践中，这些标签大多会被任何软件忽略，但在形式上是有效的。）尽管如此，HTML5 草案强加了非常具体的规则。

然而，在这种情况下，问题纯粹是语法问题，不依赖于 HTML 版本。字符串`content="<!DOCTYPE HTML PUBLIC \"`被解析为属性规范，其余的则导致语法错误。反斜杠（反斜线）“\”在 HTML 中没有特殊含义；它只是另一个字符，它不能用作任何类型的转义符号。

然而，最终的问题是尝试使用`meta`标签来指定文档类型。即使您将语法修复为正式正确，它也不会起作用，也不会产生任何影响。指定文档类型的方法是在文档的最开始包含一个 doctype 声明，例如

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" 
    "http://www.w3.org/TR/html4/strict.dtd"> 
```

如果你不在一开始就这样做，那么以后再尝试指定它为时已晚。

# c# - 我是否需要为我的 Windows 应用程序创建 RGBA 以外的图标？

> ID：13761577
> 
> 赞同：3
> 
> 时间：2012-12-07T10:49:05.203
> 
> 标签：c#, c++, windows, icons

我很好奇是否还有人为您的 Windows 应用程序创建除 RGB/A（或带 alpha 通道的 32 位）以外的图标？

PS。我知道建议的模型是创建 256 色版本的图标，但我总是在这些方面挣扎。如果我在图标编辑器中自动转换它们，它们会完全破坏原始图标的外观，带有锯齿状边缘和大约 Windows95 的外观。因此，如果仍然需要这些，有没有人知道有多少人仍在使用除 32 位 TrueColor 以外的颜色设置的统计数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:02:35.617

用户选择使用 32 位颜色以外的颜色并不多。真正需要 256 色图标是因为它们在使用较低像素深度以提高带宽效率的远程桌面应用程序上运行时。

话虽如此，我的经验是，仅加载 32bpp 图标的应用程序在有限带宽、低像素深度的远程桌面下看起来仍然合理。而且我怀疑大多数人在更高带宽连接的现代运行他们的远程桌面时具有不错的像素深度

如果要生成 256 色图标，通常需要创建定制的低像素深度图标。当您将现代 alpha 混合图标合并到低像素深度时，它很少看起来很好。

如果我是你，我会在低带宽设置下通过远程桌面尝试你的应用程序，看看它的外观。即使它看起来有点脏，这对你来说可能并不重要。你可能已经准备好做出这种牺牲。

# python - 使用开发服务器上的祖先从 AppEngine 数据存储区读取 100 行时的性能问题。

> ID：13761578
> 
> 赞同：1
> 
> 时间：2012-12-07T10:49:06.573
> 
> 标签：python, performance, google-app-engine

我的 Google AppEngine 应用中的查询性能不佳。这就是我正在做的事情：

```
import models
from time import time

parent = models.ParentEntity.gql("WHERE string_property = :1", "a guid").get()

start = time()

data_rows = []

children = models.ChildEntity.gql("WHERE ANCESTOR IS :1", parent.key())
for child in children.run():
    data_rows.append(child.data)

print "Loaded %s rows in: %s" % (len(data_rows), time() - start) 
```

我在机器上的交互式控制台中运行了 3 次，输出如下：

```
Loaded 653 rows in: 8.18052411079
Loaded 653 rows in: 5.93607997894
Loaded 653 rows in: 9.97486710548 
```

5-9秒加载653行正常吗？这是在开发Web服务器上，在真实服务器上会更好吗？我知道 memcache 并且已经在使用它，但是在我确实需要填充缓存的时候，我怎样才能让事情变得更快呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:08:15.420

您不应将开发服务器视为实时服务器性能的任何指示。它使用平面文件或 sqlite3 数据库模拟 BigTable 基础架构，因此性能非常糟糕。正确测试这一点的唯一方法是在 AppEngine 本身上。

请注意，祖先查询尽可能高效，因此当您在生产环境中尝试时应该不会有任何问题。

# android - Android - 如何使图形标题适合屏幕

> ID：13761585
> 
> 赞同：0
> 
> 时间：2012-12-07T10:49:17.247
> 
> 标签：android, achartengine

我正在使用 achartengine 来显示折线图。我的图表标题太长了。因此，一些文本超出了屏幕范围。现在我想把它适应屏幕宽度（是否可以将它设置为多行？）。我试过但我没有。谁能帮我。

参考图片 ![在此处输入图像描述](../Images/cb70cbef200942a5b936a5329aeec1e4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:47:02.220

首先也是最简单的方法是在标题中添加换行符`First line\nSecond line`。

第二种方法是修改 achart 的源。课堂上有`drawString`方法`AbstractChart`。我不知道它是否绘制图形标题，但它会让您了解它是如何完成的。

```
/**
 * Draw a multiple lines string.
 * 
 * @param canvas the canvas to paint to
 * @param text the text to be painted
 * @param x the x value of the area to draw to
 * @param y the y value of the area to draw to
 * @param paint the paint to be used for drawing
 */
protected void drawString(Canvas canvas, String text, float x, float y, Paint paint) {
    String[] lines = text.split("\n");
    Rect rect = new Rect();
    int yOff = 0;
    for (int i = 0; i < lines.length; ++i) {
        canvas.drawText(lines[i], x, y + yOff, paint);
        paint.getTextBounds(lines[i], 0, lines[i].length(), rect);
        yOff = yOff + rect.height() + 5; // space between lines is 5
    }
} 
```

您必须确定需要多少行。我们可以用paint的`measureText(String)`方法来测量文本的宽度。然后，如果文本宽度大于可用宽度，则将文本分成两行。

```
if (paint.measureText(text) > canvas.getWidth()) {
    ... // Split text in two lines
        // For example you can do following steps
        // 1\. Find last position of space with `text.lastIndesOf(' ')`.
        // 2\. Then take substring from beginning of text to found last position of space.
        // 3\. Try again with `paint.measureText` if substing fits in available width.
        // 4\. In case it fits - insert line break instead of space, if not start again from 1\. (find location of pre-last space, get substring from start to found location, check if it fits and so on...)
} 
```

# excel - 由于不确定原因，VBA 代码显示错误 2042

> ID：13761586
> 
> 赞同：5
> 
> 时间：2012-12-07T10:49:20.630
> 
> 标签：excel, vba

我有一个`fila`带有 Excel 值的整行变量

问题是当我在 Excel 中时`#N/A`，VBA 采用类似`Error 2042`.

我无法将该值分配给`valor` **并**产生错误。直到此时一切正常，现在我正在尝试定义 a`On Error Goto`以进入循环中的下一次迭代`For`，但我**不**知道为什么 VBA 不处理错误。

```
Do While Not IsEmpty(ActiveCell)

    txt = ActiveCell.Value2
    cell = ActiveCell.Offset(0, 1).Value2       
    fila = Range("C20:F20")

    For j = 1 To UBound(fila, 2)
        On Error GoTo Siguiente
        If Not IsEmpty(fila(1, j)) Then            
            valor = fila(1, j)
            cmd = Cells(1, j + 2).Value2
            devolver = function1(cmd, txt, cell, valor)
            arrayDevolver(p) = devolver
            p = p + 1                
        End If
Siguiente:
    Next
Loop 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T11:17:35.580

这不是 VBA 错误 - 因此错误处理不会捕获它。要检测此问题`IsError`，请在写入阵列之前使用

下面的简单代码处理此测试的*错误 2042*问题

```
Sub Test()
    Dim varIn As Variant
    [a1].FormulaR1C1 = "=NA()"
    If IsError([a1].Value2) Then
        varIn = "skip record"
    Else
        varIn = [a1].Value2
    End If
End Sub 
```

# python - OS X 双叉 - 守护脚本

> ID：13761587
> 
> 赞同：0
> 
> 时间：2012-12-07T10:49:31.013
> 
> 标签：python, process, daemon

我在我的一个项目中遇到了一些问题。我正在尝试在 python 中编写一种可在 OS X 10.8 (Mountain Lion) 上运行的键盘记录器。但是当我尝试在后台/作为进程/守护进程中启动我的脚本时出现此错误。

错误 ：

```
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___​YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___​YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___​YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___​YOU_MUST_EXEC__() to debug.
The process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().
Break on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___​YOU_MUST_EXEC__() to debug. 
```

剧本

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-
from Daemon import Daemon

import sys
import os

import exceptions
import sys
from Foundation import NSObject, NSLog
from AppKit import NSApplication, NSApp, NSWorkspace
from Cocoa import *
from Quartz import CGWindowListCopyWindowInfo, kCGWindowListOptionOnScreenOnly, kCGNullWindowID
from PyObjCTools import AppHelper
import keycode

import exceptions
import sys
from Foundation import NSObject, NSLog
from AppKit import NSApplication, NSApp, NSWorkspace
from Cocoa import *
from Quartz import CGWindowListCopyWindowInfo, kCGWindowListOptionOnScreenOnly, kCGNullWindowID
from PyObjCTools import AppHelper
import keycode

evtypes = dict(
    NSLeftMouseDown     = 1,
    NSLeftMouseUp       = 2,
    NSRightMouseDown    = 3,
    NSRightMouseUp      = 4,
    NSMouseMoved        = 5,
    NSLeftMouseDragged  = 6,
    NSRightMouseDragged = 7,
    NSMouseEntered      = 8,
    NSMouseExited       = 9,
    NSKeyDown           = 10,
    NSKeyUp             = 11,
    NSFlagsChanged      = 12,
    NSAppKitDefined     = 13,
    NSSystemDefined     = 14,
    NSApplicationDefined = 15,
    NSPeriodic          = 16,
    NSCursorUpdate      = 17,
    NSScrollWheel       = 22,
    NSTabletPoint       = 23,
    NSTabletProximity   = 24,
    NSOtherMouseDown    = 25,
    NSOtherMouseUp      = 26,
    NSOtherMouseDragged = 27
)

evtypes_rev = dict([[v,k] for k,v in evtypes.items()])

class Hooker(object):
    def __call__(self, *args, **kwargs):
        try:
            evt = kwargs.get('event')
            del kwargs['event'] 
            items = ' '.join( [ x[0]+"="+unicode(x[1]) for x in kwargs.iteritems()] )
            print "%20s | %22s | %s" % ( self.__class__.__name__, evtypes_rev[evt.type()], items)
            os.path.join(os.path.expanduser("~"), "Desktop")
            fichier = open("MY_TEXT_FILE.txt", "a")
            fichier.write("%20s | %22s | %s" % ( self.__class__.__name__, evtypes_rev[evt.type()], items))
            fichier.close()
        except Exception as e:
            print 'Horrific error!', e
            AppHelper.stopEventLoop()
            sys.exit(0)

class KeyHooker(Hooker): pass
class MouseButtonHooker(Hooker): pass
class MouseMoveHooker(Hooker): pass
class ScreenHooker(Hooker): pass

class SniffCocoa:

    def __init__(self):

        self.key_hook = KeyHooker()
        self.mouse_button_hook = MouseButtonHooker()
        self.mouse_move_hook = MouseMoveHooker()
        self.screen_hook = ScreenHooker()
        self.currentApp = None

    def createAppDelegate (self) :

        sc = self
        class AppDelegate(NSObject):
            def applicationDidFinishLaunching_(self, notification):
                mask = (
                          NSKeyDownMask 
                        | NSKeyUpMask
                        | NSLeftMouseDownMask 
                        | NSLeftMouseUpMask
                        | NSRightMouseDownMask 
                        | NSRightMouseUpMask
                        | NSMouseMovedMask 
                        | NSScrollWheelMask
                       )
                NSEvent.addGlobalMonitorForEventsMatchingMask_handler_(mask, sc.handler)
        return AppDelegate

    def run(self):
        NSApplication.sharedApplication()
        delegate = self.createAppDelegate().alloc().init()
        NSApp().setDelegate_(delegate)
        self.workspace = NSWorkspace.sharedWorkspace()
        AppHelper.runEventLoop()

    def cancel(self):
        AppHelper.stopEventLoop()

    def handler(self, event):

        try:
            activeApps = self.workspace.runningApplications()
            for app in activeApps:
                if app.isActive():
                    if app.localizedName() != self.currentApp:
                        self.currentApp = app.localizedName()
                        options = kCGWindowListOptionOnScreenOnly 
                        windowList = CGWindowListCopyWindowInfo(options, kCGNullWindowID)

                        for window in windowList:
                            if window['kCGWindowOwnerName'] == self.currentApp:
                                geom = window['kCGWindowBounds'] 
                                self.screen_hook( event=event,
                                                name = window['kCGWindowName'],
                                                owner = window['kCGWindowOwnerName'],
                                                x = geom['X'], 
                                                y = geom['Y'], 
                                                w = geom['Width'], 
                                                h = geom['Height'])
                                break
                    break

            loc = NSEvent.mouseLocation()

            # mouse clicky buttons
            if event.type() in ( NSLeftMouseDown, NSRightMouseDown, NSLeftMouseUp, NSRightMouseUp):
                self.mouse_button_hook(event=event, x=loc.x, y=loc.y)

            # mouse scrolly buttons 
            elif event.type() == NSScrollWheel:
                if event.deltaY() > 0 and event.deltaY() < 0:
                    self.mouse_button_hook(event=event, x=loc.x, y=loc.y)
                if event.deltaX() > 0 and event.deltaX() < 0:
                    self.mouse_button_hook(event=event, x=loc.x, y=loc.y)

            # keys down
            elif event.type() in ( NSKeyDown, NSKeyUp ):

                flags = event.modifierFlags()
                modifiers = [] # OS X api doesn't care it if is left or right
                if (flags & NSControlKeyMask):
                    modifiers.append('CONTROL')
                if (flags & NSAlternateKeyMask):
                    modifiers.append('ALTERNATE')
                if (flags & NSCommandKeyMask):
                    modifiers.append('COMMAND')

                self.key_hook(event=event, key=event.keyCode(), char=keycode.tostring( event.keyCode() ), mods=modifiers, is_repeat=event.isARepeat())

            # Mouse moved
            elif event.type() == NSMouseMoved:
                self.mouse_move_hook(event=event, x=loc.x, y=loc.y)
            else:
                pass

        except ( KeyboardInterrupt ) as e:
            print 'handler', e
            AppHelper.stopEventLoop()

class pantalaimon(Daemon):
    def run(self):
        x = 0
        while True:
                sc = SniffCocoa()
                sc.run()

if __name__ == "__main__":
        daemon = pantalaimon('daemon-example.pid')
        if len(sys.argv) == 2:
                if 'start' == sys.argv[1]:
                        daemon.start()
                elif 'stop' == sys.argv[1]:
                        daemon.stop()
                elif 'restart' == sys.argv[1]:
                        daemon.restart()
                else:
                        print "Unknown command"
                        sys.exit(2)
                sys.exit(0)
        else:
                print "usage: %s start||stop||restart" % sys.argv[0]
                sys.exit(2) 
```

我们导入的守护进程类：

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-
'''
    ***
    Modified generic daemon class
    ***

    Author:     http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/
                www.boxedice.com

    License:     http://creativecommons.org/licenses/by-sa/3.0/

    Changes:    23rd Jan 2009 (David Mytton <david@boxedice.com>)
                - Replaced hard coded '/dev/null in __init__ with os.devnull
                - Added OS check to conditionally remove code that doesn't work on OS X
                - Added output to console on completion
                - Tidied up formatting 
                11th Mar 2009 (David Mytton <david@boxedice.com>)
                - Fixed problem with daemon exiting on Python 2.4 (before SystemExit was part of the Exception base)
                13th Aug 2010 (David Mytton <david@boxedice.com>
                - Fixed unhandled exception if PID file is empty
'''

# Core modules
import atexit
import os
import sys
import time
import signal

class Daemon(object):
    """
    A generic daemon class.

    Usage: subclass the Daemon class and override the run() method
    """
    def __init__(self, pidfile, stdin=os.devnull, stdout=os.devnull, stderr=os.devnull, home_dir='.', umask=022, verbose=1):
        self.stdin = stdin
        self.stdout = stdout
        self.stderr = stderr
        self.pidfile = pidfile
        self.home_dir = home_dir
        self.verbose = verbose
        self.umask = umask
        self.daemon_alive = True

    def daemonize(self):
        """
        Do the UNIX double-fork magic, see Stevens' "Advanced 
        Programming in the UNIX Environment" for details (ISBN 0201563177)
        http://www.erlenstar.demon.co.uk/unix/faq_2.html#SEC16
        """
        try: 
            pid = os.fork() 
            if pid > 0:
                # Exit first parent
                sys.exit(0) 
        except OSError, e: 
            sys.stderr.write("fork #1 failed: %d (%s)\n" % (e.errno, e.strerror))
            sys.exit(1)

        # Decouple from parent environment
        os.chdir(self.home_dir)
        os.setsid() 
        os.umask(self.umask)

        # Do second fork
        try: 
            pid = os.fork() 
            if pid > 0:
                # Exit from second parent
                sys.exit(0) 
        except OSError, e: 
            sys.stderr.write("fork #2 failed: %d (%s)\n" % (e.errno, e.strerror))
            sys.exit(1) 

        if sys.platform != 'darwin': # This block breaks on OS X
            # Redirect standard file descriptors
            sys.stdout.flush()
            sys.stderr.flush()
            si = file(self.stdin, 'r')
            so = file(self.stdout, 'a+')
            if self.stderr:
                se = file(self.stderr, 'a+', 0)
            else:
                se = so
            os.dup2(si.fileno(), sys.stdin.fileno())
            os.dup2(so.fileno(), sys.stdout.fileno())
            os.dup2(se.fileno(), sys.stderr.fileno())

        def sigtermhandler(signum, frame):
            self.daemon_alive = False
        signal.signal(signal.SIGTERM, sigtermhandler)
        signal.signal(signal.SIGINT, sigtermhandler)

        if self.verbose >= 1:
            print "Started"

        # Write pidfile
        atexit.register(self.delpid) # Make sure pid file is removed if we quit
        pid = str(os.getpid())
        file(self.pidfile,'w+').write("%s\n" % pid)

    def delpid(self):
        os.remove(self.pidfile)

    def start(self, *args, **kwargs):
        """
        Start the daemon
        """

        if self.verbose >= 1:
            print "Starting..."

        # Check for a pidfile to see if the daemon already runs
        try:
            pf = file(self.pidfile,'r')
            pid = int(pf.read().strip())
            pf.close()
        except IOError:
            pid = None
        except SystemExit:
            pid = None

        if pid:
            message = "pidfile %s already exists. Is it already running?\n"
            sys.stderr.write(message % self.pidfile)
            sys.exit(1)

        # Start the daemon
        self.daemonize()        
        self.run(*args, **kwargs)

    def stop(self):
        """
        Stop the daemon
        """

        if self.verbose >= 1:
            print "Stopping..."

        # Get the pid from the pidfile
        try:
            pf = file(self.pidfile,'r')
            pid = int(pf.read().strip())
            pf.close()
        except IOError:
            pid = None
        except ValueError:
            pid = None

        if not pid:
            message = "pidfile %s does not exist. Not running?\n"
            sys.stderr.write(message % self.pidfile)

            # Just to be sure. A ValueError might occur if the PID file is empty but does actually exist
            if os.path.exists(self.pidfile):
                os.remove(self.pidfile)

            return # Not an error in a restart

        # Try killing the daemon process    
        try:
            while 1:
                os.kill(pid, signal.SIGTERM)
                time.sleep(0.1)
        except OSError, err:
            err = str(err)
            if err.find("No such process") > 0:
                if os.path.exists(self.pidfile):
                    os.remove(self.pidfile)
            else:
                print str(err)
                sys.exit(1)

        if self.verbose >= 1:
            print "Stopped"

    def restart(self):
        """
        Restart the daemon
        """
        self.stop()        
        self.start()

    def run(self):
        """
        You should override this method when you subclass Daemon. It will be called after the process has been
        daemonized by start() or restart().
        """ 
```

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:17:46.457

正如错误所说，如果您使用的是 CoreFoundation 库，则 fork() 的子代无法继续运行，而您在调用 fork() 之前明确导入了该库。除非您在子进程中调用 os.exec() ，否则您将遇到您提到的信号。显然，这严重限制了 fork() 的实用性，因此您可能需要找到一种不同的守护进程方法。

我只是间接知道这个问题，因为虽然我不使用 OSX，但当我编写一个使用 os.fork() 的 Python 程序时，我的同事抱怨这个问题。显然，一些 Python 标准库使用了 CoreFoundation，所以即使不直接使用也不一定能避免这个问题。您可能必须在 OSX 上完全避免使用 os.fork() 。

如果不清楚，这不是 CPython 中的缺陷，而是 Python 使用的 OSX 系统库。鉴于此类明显与 Unix 传统不一致的方面，具有讽刺意味的是，根据商标持有者的说法，OSX 是正式的 UNIX®，而 GNU/Linux 和其他类似 Free Unix 的操作系统却不是。

# excel - Excel 范围到单元格值的转换

> ID：13761601
> 
> 赞同：0
> 
> 时间：2012-12-07T10:50:51.563
> 
> 标签：excel, vba

当我们将 Range(A4) 写入 Cell(1,4) 时。我应该如何将 Range(A2:AB256) 写入 Cell 格式？

谢谢，奥雅纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:02:35.170

直接，您不能，但如果您的目标是通过索引访问一系列单元格，您可以使用 Range-method 和两个单元格作为参数：

```
Set myRange = mySheet.Range(mySheet.Cells(1, 2), mySheet.Cells(28, 256)) 
```

或者您可以从单元格地址解析列字母：

```
Dim columnNumber As Integer
Dim columnLetter As String

columnNumber = 5
columnLetter = Split(Cells(1, columnNumber).Address, "$")(1) 
```

# ruby-on-rails - 从 Rails 环境中解耦服务类

> ID：13761602
> 
> 赞同：0
> 
> 时间：2012-12-07T10:50:51.877
> 
> 标签：ruby-on-rails, ruby, decoupling

假设我的 rails 应用程序中有一个服务类。它做什么并不重要，但让我们假设它可以用于向客户端推送通知。

```
# lib/services/event_pusher.rb
class EventPusher
  def initialize(client)
    @client = client
  end

  def publish(event)
    PusherGem.trigger(@client, event)
  end
end 
```

我现在可以在我的控制器中使用这个类：

```
require "lib/services/event_pusher"

class WhateverController < ApplicationController
  def create
    @whatever = Whatever.new(params[:whatever])

    if @whatever.save
      EventPusher.new(current_user).publish('whatever:saved')
    end
  end
end 
```

现在这个服务类在我调用时向第三方发出请求`publish`。我不希望在运行测试时发生这种情况。

在我看来，我有两个选择。

**选项 1：**
我必须记住`EventPusher.trigger`使用环境检查对所有调用进行后缀。请记住，我可以在我的应用程序的每个创建/更新/销毁操作中调用它。

```
if @whatever.save
  EventPusher.new(current_user).publish('whatever:saved') unless Rails.env.test?
end 
```

**选项 2：**
我必须将我的服务类与 Rails 耦合。

```
def publish(event)
  PusherGem.trigger(@client, event) unless Rails.env.test?
end 
```

哪个是正确的选项（或者是否有秘密选项 3）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:28:41.717

你在使用 RSpec 吗？如果是这样，您可以在测试本身中覆盖 EventPusher 的发布方法的功能，如下所示：

```
EventPusher.any_instance.stub(:publish) 
```

上面的代码用一个返回 nil 的空方法替换了原来的 publish 方法。该方法仍然存在并且仍然会被调用，但它不会在您的测试范围内做任何事情。

如果其他代码期望发布方法返回某些内容，例如 'true' 表示成功，那么您可以添加以下内容：

```
EventPusher.any_instance.stub(:publish).and_return(true) 
```

或者，如果您更愿意覆盖 PusherGem 的静态触发方法，则使用以下稍微不同的语法：

```
PusherGem.stub!(:trigger) 
```

或者

```
PusherGem.stub!(:trigger).and_return("something here, perhaps?") 
```

# google-app-engine - 将 Google Cloud SQL 与 App Engine 结合使用

> ID：13761603
> 
> 赞同：1
> 
> 时间：2012-12-07T10:51:04.050
> 
> 标签：google-app-engine, google-cloud-sql

我已经搜索了建议的主题以找到这个问题的答案，但我什么也没得到。

我正在学校做一个项目，如果我能启动并运行 Cloud SQL 和 AppEngine，我真的很想。

我目前正在使用“将 Google Cloud SQL 与 App Engine 结合使用”，该指南中指出您的 SQL 必须与您的 AppEngine 应用程序位于同一区域（欧盟/美国）。我查看了应用程序仪表板中的每个选项，但找不到任何说明我所在位置的信息。

有谁知道如何解决这个问题，还是我必须“尝试并失败”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T11:39:00.080

除非您是付费应用程序用户，否则您的数据中心将位于美国。

[位置数据](https://developers.google.com/appengine/docs/premier/location)

> 应用程序可以在美国或欧盟运行。如果您有 App Engine Premier 帐户，您可以在管理控制台中创建应用程序时选择应用程序的运行位置。（如果您没有 Premier 帐户，那么您的应用程序将在默认位置美国运行。）您在创建应用程序后无法更改该位置。

# html - 在访客电子邮件管理器 Thunderbird、Outlook 中打开 html 链接... rails 3

> ID：13761604
> 
> 赞同：0
> 
> 时间：2012-12-07T10:51:05.377
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我有这个链接：

```
<div class="email_button">
   <%= link_to "mailto:?subject=#{t('.incredible')}#{@product.title}&body=#{t('.hi')},%0A%0A #{t('.check_it')}#{@canonical_url}", :title => "#{t('.send_email')}", :class => "btn btn-small", :target => "_blank", :rel => "nofollow" do %>
    <i class="icon-envelope"></i>
    <%= "Email" %>
   <% end %>
  </div> 
```

生成的html：

```
<a title="Send by email" target="_blank" rel="nofollow" class="btn btn-small" href="mailto:?subject=Incredible. Product title &amp;body=Hi,%0A%0A Take a look: http://www.mydomain.com/es/products/myproduct-1">
    <i class="icon-envelope"></i>
    Email
</a> 
```

此代码在访客电子邮件管理器中打开一封新电子邮件。`http://www.mydomain.com/es/products/myproduct-1`不像**html 链接**那样可见。它像**文本链接**一样可见。

**如何将 html 链接发送给访问者电子邮件管理器而不是文本链接？**

# java - 在 struts.xml 中使用插件阻止运行应用程序

> ID：13761608
> 
> 赞同：1
> 
> 时间：2012-12-07T10:51:15.803
> 
> 标签：java, struts2

在我的菜单的struts2 web 应用程序中，我使用struts 菜单插件。我在struts2 web 应用程序中使用eclipse juno。当我在我的 struts.xml 中编写以下插件时，它会运行我的项目一段时间，但一段时间后它会阻止我的应用程序运行。我的struts.xml如下：

```
<struts>
    <constant name="struts.enable.DynamicMethodInvocation"
        value="false" />
    <constant name="struts.devMode" value="false" />
    <constant name="struts.custom.i18n.resources"
        value="ApplicationResources" />

    <package name="default" extends="jasperreports-default,struts-default" namespace="/">

        <action name="login" 
            class="net.viralpatel.struts2.action.LoginAction">
            <result name="success" >Welcome.jsp</result>
            <result name="error">Login.jsp</result>
        </action>
    </package>

     <plug-in className="net.sf.navigator.menu.MenuPlugIn">
        <set-property property="menuConfig" value="/WEB-INF/menu-config.xml"/>
     </plug-in>

</struts> 
```

之后，如果我从我的 struts.xml 中剪切该插件代码并刷新我的项目并再次粘贴它，那么它会成功运行一段时间。一段时间后它再次在我的项目上显示错误图标。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:51:46.370

`<plug-in>`struts2 web 应用程序不需要在struts.xml 中编写。

> Struts 1 提供了一个插件类，它提供了类似监听器的能力。Struts 2 插件类似于 Eclipse 或 FireFox 插件，完全不像 Struts 1“插件”。
> 
> Struts 2 插件是一个单独的 JAR，其中包含扩展、替换或添加到现有 Struts 框架功能的类和配置。除了 JAR 文件之外，还可以通过将 JAR 文件添加到应用程序的类路径来安装插件，以实现插件本身可能具有的任何依赖项。要配置插件，JAR 应该包含一个 struts-plugin.xml 文件，该文件遵循与普通 struts.xml 文件相同的格式。

参考以下链接： [http ://struts.apache.org/2.0.11/docs/plugins.html](http://struts.apache.org/2.0.11/docs/plugins.html)

# java - jsp生成的servlet扩展了哪个类

> ID：13761611
> 
> 赞同：2
> 
> 时间：2012-12-07T10:51:20.980
> 
> 标签：java, jsp, servlets

我们都知道 JSP 被翻译成 servlet，但是当 jsp 被翻译成 servlet 时，它是像普通 servlet 一样扩展 HTTPServlet 还是扩展了其他一些类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T10:54:09.583

```
<%=this.getClass().getSuperclass()%><br />
<%=this.getClass().getSuperclass().getSuperclass()%> 
```

印刷

```
class org.apache.jasper.runtime.HttpJspBase
class javax.servlet.http.HttpServlet 
```

在Tomcat7上给我

# python - Python openweather，json - 按城市名称获取天气 - 我怎么能说这个城市不正确？

> ID：13761612
> 
> 赞同：3
> 
> 时间：2012-12-07T10:51:26.383
> 
> 标签：python, json, weather, weather-api

我找到并修改了简单的代码，以使用 openweather 和 json 格式在 Python 中获取天气状况。但我有一个问题——我怎么能说城市不正确呢？

我的意思是，即使我经过一个错误的、不存在的城市，阅读也总会给出答案（没有像“空响应”之类的东西）。

请参阅下面的代码以了解我在说什么：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import urllib2, json

city = "etre4t5r5e4re" # the city name is incorrent
url = "http://openweathermap.org/data/2.1/forecast/city?q="
url += city
try :
    request = urllib2.Request(url)
    response = urllib2.urlopen(request)
except urllib2.HTTPError, e:
    info = wx.MessageBox(u"Internet connection error", u"Error", wx.OK | wx.ICON_ERROR)
except urllib2.URLError, e:
    info = wx.MessageBox(u"Internet connection error", u"Error", wx.OK | wx.ICON_ERROR)
except httplib.HTTPException, e:
    info = wx.MessageBox(u"Internet connection error", u"Error", wx.OK | wx.ICON_ERROR)
except Exception:
    info = wx.MessageBox(u"Error", u"Error", wx.OK | wx.ICON_ERROR)
weather = response.read()

if __name__ == '__main__':
    print(weather) # it will show weather but thats not what I want for non-existing city! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:15:34.567

当请求的城市不存在时，会有一个经常性 ID，您可以基于您的代码，或者提出第二个请求。我已经解释了我会使用的两种解决方案。

```
#!/usr/bin/python

import urllib2, json

city = "etre4t5r5e4re"
root = "http://openweathermap.org/data/2.1/forecast/city?q=%s"
url  = root % city

response = urllib2.urlopen(url)
j = json.load(response)

# Solution 1
if j.get('url', '').split('/')[-1] == '7284885':
    print " ! This city seems to be THE Unknown city"

# Solution 2
if 'No station' in urllib2.urlopen(j.get('url')).read():
    print " ! Again.. This city seems to be THE Unknown city" 
```

# vb.net - 将文本框中的数据添加到 vb.net 中的数据表

> ID：13761614
> 
> 赞同：0
> 
> 时间：2012-12-07T10:51:35.180
> 
> 标签：vb.net, textbox, datatable

我正在尝试将数据从文本框输入到数据表，但我似乎无法让它正常工作。我尝试过变量、对象、数组和子程序。提到的都没有解决。

该程序只是一个图表生成器，它从 5 个文本框中获取 5 个变量并将它们输入到数据表中以填充折线图。

```
Dim dtTest As New DataTable
Dim a As Integer

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    dtTest.Columns.Add("Grades", GetType(Integer))
    dtTest.Columns.Add("Exams", GetType(Integer))

    dtTest.Rows.Add(1, a) // **it wont work with variables**
    dtTest.Rows.Add(2, 80) // 
    dtTest.Rows.Add(3, 60)
    dtTest.Rows.Add(4, 90)
    dtTest.Rows.Add(5, 70)

    With Chart1.ChartAreas(0)
        .AxisX.Minimum = 0
        .AxisX.Maximum = 6
        .AxisY.Minimum = 50
        .AxisY.Maximum = 100
        .AxisY.Interval = 10
        .AxisX.Title = "Grades"
        .AxisY.Title = "Exams"
    End With

End Sub 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:10:07.173

经过一些测试，我的猜测是您的问题是图表中缺少显示的数据。添加这个（如果您不执行第一行，则需要将底部两行中的“Derp”更改为“Series1”。）：

```
 Chart1.Series("Series1").Name = "Derp"
    Chart1.Series("Derp").XValueMember = "Grades"
    Chart1.Series("Derp").YValueMembers = "Exams" 
```

# php - PHP svn，svn_add 在 linux/ubuntu 上不起作用

> ID：13761621
> 
> 赞同：0
> 
> 时间：2012-12-07T10:52:05.323
> 
> 标签：php, svn

我在 SVN PHP 库中工作，当我尝试使用 svn_add 它显示以下错误

警告：svn_add(): svn 错误发生 155007（路径不是工作副本目录）'/var/www/myrepo' 不是第 7 行 /var/www/test/test.php 中的工作副本

还尝试了 svn_checkout、svn_cat 等我在本地机器上完成了 svn 存储库设置，我正在传递以下 URL '/var/www/repo/'。

这是我的代码

$path = '/var/www/myrepo/'; svn_add($path.'test.txt');

也尝试了它的 http URL，它适用于 Rabbit VCS SVN，并使用相同的 URL 执行所有操作。

请提出任何解决方案。

这是 phpsvn 的链接：http: [//pk1.php.net/manual/en/book.svn.php](http://pk1.php.net/manual/en/book.svn.php)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:08:10.870

从手册：

> svn_add — 安排在工作目录中添加项目

你必须在 repo 的工作目录中。在打电话之前`svn_add`，做一个`chdir($path)`

# recursion - Brainfuck 中的递归函数示例

> ID：13761624
> 
> 赞同：1
> 
> 时间：2012-12-07T10:52:28.810
> 
> 标签：recursion, fibonacci, brainfuck

直截了当-我一直在学习brainfuck，但我无法绕过其中的递归概念。我已经用谷歌搜索并搜索了论坛 - 如果需要，请提前道歉 - 并没有提出任何结果。

首先，真的有可能吗？

如果有，有例子吗？我会添加任何我能想到的有用的东西。

我特别想用递归来计算斐波那契数，所以如果我们能以此为基础，将会有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T23:29:01.570

由于 BF 除了磁带和指针以及非常基本的循环功能之外并没有真正提供任何东西（通常你需要确保指针在它开始的地方结束，这就是所谓的平衡循环。在极少数情况下你可以在没有平衡的情况下进行循环（例如数组），在其中实现递归算法非常困难。您可以尝试在 bf 中模拟“普通”计算机（这完全取决于您如何处理磁带）。我相信 C2BF 项目以这种方式工作（它将 C 编译为brainfuck）。如果我没记错的话，他们会在交替的堆栈/堆对中处理单元组（使某些指针操作有点不同，因为所有内容都必须乘以 2）

所以，在所有这些文本之后，这是我的结论：虽然它真的很困难，但在 Brainfuck 中实现递归算法是可能的。我敦促您记住的是，每个递归算法都可以迭代地完成。您只需要维护自己的堆栈即可。如果您想递归地实现它，这实际上就是您最终要做的事情。但是，如果您将其视为迭代并维护自己的堆栈，而不是递归，它将帮助您了解您实际在做什么，并最终产生更好的设计算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-23T17:27:27.000

更新：我已经实现了这样的事情。[https://github.com/benrap/Assembly2Brainfuck](https://github.com/benrap/Assembly2Brainfuck)

原始信息：

我还没有实现这样的东西，但我会更新一次。但是，我想到了一个真正的递归函数的实现。首先请注意，brainfuck 只在一个方向上运行代码，因此我们实际上不能使用代码存储进行递归。我们拥有的唯一其他存储方式是代码正在更改的存储。所以实际上，我们必须编写代码将我们的函数保存在存储中，然后读取该存储*而不更改它*并相应地执行它。这反过来将需要一个堆栈和一些更复杂的东西。

正如我所说，我计划进行这样的实现，所以一旦我有了一个工作原型，我就会更新。希望我的回答就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T20:53:35.033

标准 Brainfuck 既没有调用也没有调用堆栈，因此您必须实现自己的堆栈才能进行递归编程。

二维语言 SNUSP 具有与 Brainfuck 相同的运算符和内存模型，但增加了调用堆栈和 ENTER（“@”）和 LEAVE（“#”）指令，允许递归编程。Brainfuck 用于循环的括号替换为反射器（“\”、“/”）、跳过（“！”）和如果为零则跳过（“？”）。例如，这里是斐波那契函数的递归实现：

```
 /========\    />>+<<-\  />+<-\
fib==!/?!\-?!\->+>+<<?/>>-@\=====?/<@\===?/<#
      |  #+==/     fib(n-2)|+fib(n-1)|
      \=====recursion======/!========/ 
```

# magento - Magento - 根据 IP 隐藏价格

> ID：13761627
> 
> 赞同：1
> 
> 时间：2012-12-07T10:52:43.203
> 
> 标签：magento

我将要上线一个 Magento 网站，并且客户已经提出了最后一分钟的请求。他们是一家英国制造商，他们不想与他们的全球供应链竞争，所以他们想要；

1.  拥有来自北美的 IP 的所有用户都会被重定向到一个完全不同的网站（非 Magento，与我无关），理想情况下会使用重定向消息。
2.  拥有来自北美、英国和爱尔兰以外任何地方的 IP 的所有用户都可以看到该网站，但定价和购物车被禁用，因此他们看不到价格并且无法进行购买
3.  英国和爱尔兰正常运作。

我正在尝试找出解决此问题的最佳方法。我知道三个选项；

*   **.HTACCESS**

我曾在一家商店工作过，之前开发人员在 .htaccess 中设置了大量的 IP 列表（主要是为了安全而阻止中国和俄罗斯）。我可以做类似的事情，用美国 IP 重定向用户，然后可能像这样设置一个环境变量；

[如何从 .htaccess 设置自定义全局](https://stackoverflow.com/questions/8781181/how-to-set-a-custom-global-from-htaccess)

可以在模板中访问它以不显示添加到购物车和价格标记。

***优点：***相对容易

***缺点：***可怕。IP 列表将被硬编码，显示/不显示价格等的条件代码将基于模板，而不是通过模块完成。此外，无法以这种方式处理“您正在转移到我们的美国商店”请求。

*   **使用商业模块的商店切换**

另一种选择可能是自定义/配置以下商业模块来处理请求；

[http://www.mageworx.com/store-and-currency-auto-switcher-magento-extension.html](http://www.mageworx.com/store-and-currency-auto-switcher-magento-extension.html)

我认为这将涉及建立新网站而不是新商店（因为当前安装已经有 1 个网站和 2 个商店，每个商店都有一个商店视图。）。新网站将有自己的主题，不显示购物车/价格信息。

***优点：*** IP 没有硬编码，使用 MaxMind GeoIP 数据库。基于模块。
***缺点：***同样，是否显示价格的代码是基于模板的。此外，这会给用户增加很多管理开销——额外的网站、额外的商店视图使事情变得复杂。并且没有使用该模块 99% 的功能。

*   **一个自定义模块来处理它**

我知道这是理想的解决方案，但我在应用程序/设计中比在应用程序/代码中更快乐。我知道如何构建一个模块，并且以前构建过非常小的模块，但是.... 基于 Alan Storm 的博客文章here；

[http://magento-quickies.tumblr.com/post/32402056167/magento-startup-events](http://magento-quickies.tumblr.com/post/32402056167/magento-startup-events)

我想象我会使用该`controller_front_init_before`事件并创建一个观察者，它扩展与产品视图模板中使用的 isSaleable() 方法相关的一个或多个类。可能吗？？

***优点：*** 这是正确的方法。没有管理开销。易于禁用/启用。

任何关于此的建议、指针或链接都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:25:41.733

这是您所谓的“理想解决方案”的开始。

[从MagnetoConnect](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/14060/)或[GitHub](https://github.com/openstream/geoip)获取我的免费 G​​eoIP 扩展。然后在任何模板中使用：

```
$geoIP = Mage::getSingleton('geoip/country');
...
<?php if($geoIP->isCountryAllowed()) ?>
    the block of code you want to display only for selected countries
<?php endif ?> 
```

更多信息在我的文章[中](http://www.openstream.ch/developer-blog/magento-geoip-extension-2/)。

如果您有任何问题，请随时提问。

# azure - Azure SDK 1.8 将多个 Web 角色绑定到本地模拟器上的同一端口

> ID：13761628
> 
> 赞同：4
> 
> 时间：2012-12-07T10:52:43.903
> 
> 标签：azure, azure-web-roles, azure-sdk-.net

将 azure SDK 更新到 1.8 后，我无法再正常运行我们的项目了。看起来本地模拟器使用相同的端口号以错误的方式创建 IIS 应用程序。如果我只是创建一个具有 5 个 Web 角色的新云项目，然后在 Azure 项目属性中设置使用 IIS Web 服务器，则可以重现该问题 ![Azure 项目属性](../Images/af2d65ca9eb6c4cb5181c0cc2ecab07f.png)

运行应用程序后，IIS 显示它们中的大多数已停止，因为同一端口已在使用中。它们都使用 8085 端口，必须仅分配给最后一个应用程序

![在此处输入图像描述](../Images/d8da3c702169afb9638e36193471c54a.png)

![在此处输入图像描述](../Images/e391af37cae92b34a713287c85002498.png)

向 Microsoft 报告的错误： [http ://connect.microsoft.com/VisualStudio/feedback/details/773786/azure-sdk-1-8-binds-several-web-roles-to-the-same-port-on-local -模拟器#详细信息](http://connect.microsoft.com/VisualStudio/feedback/details/773786/azure-sdk-1-8-binds-several-web-roles-to-the-same-port-on-local-emulator#details)

不适用于 SDK 1.8 的默认 Visual Studio 服务配置

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="WindowsAzure1" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
  <WebRole name="WebRole1" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
  <WebRole name="WebRole2" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="8080" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
  <WebRole name="WebRole3" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="8081" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
  <WebRole name="WebRole4" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="8082" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
  <WebRole name="WebRole5" vmsize="Small">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="8083" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
    </Imports>
  </WebRole>
</ServiceDefinition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T08:49:02.863

此处发布了相同的问题： [只有一个实例适用于 IIS7.5 上的 Azure 2012 年 10 月 SDK](https://stackoverflow.com/questions/13288143/only-one-instance-works-with-azure-october-2012-sdk-on-iis7-5)

我用相同的设置遇到了这个问题，尝试了一切合乎逻辑的解决方案，搜索了网络......什么都没有。我不明白这怎么可能。同一项目在旧版本的 Azure 模拟器上运行良好。谢谢女士。

* * *

更新：我在此处建议的注册表黑客攻击后解决了我的问题：

[在具有 VS2012 但没有 VS2010 的干净机器上具有多个角色实例的 Windows Azure Compute Emulator (SDK 1.8) 的奇怪行为](https://stackoverflow.com/questions/13946634/strange-behavior-of-windows-azure-compute-emulator-sdk-1-8-with-multiple-role)

似乎问题在于 VS2010 与 VS2012 的模拟器混淆选择设置。就我而言，我同时安装了 2010 和 2012，但即使仅全新安装 2012，它似乎也会影响您。

Microsoft.WindowsAzure.Common.Workarounds.TryGetVS2010SPVersion（仅名称）看起来像一个 hack，它需要一个额外的 reg hack 来修复它。再次感谢女士。:)

任何有此问题的人，请堆积此连接错误以供 MS 修复： [https ://connect.microsoft.com/VisualStudio/feedback/details/773786/azure-sdk-1-8-binds-several-web-roles-到本地模拟器上的相同端口](https://connect.microsoft.com/VisualStudio/feedback/details/773786/azure-sdk-1-8-binds-several-web-roles-to-the-same-port-on-local-emulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:52:56.467

您是否为云项目中的每个角色设置了不同的端点？如果不是，我希望能解决问题。这是有关如何执行此操作的基本博客文章：

[http://robindotnet.wordpress.com/2012/07/02/how-to-set-up-an-https-endpoint-for-a-windows-azure-web-role/](http://robindotnet.wordpress.com/2012/07/02/how-to-set-up-an-https-endpoint-for-a-windows-azure-web-role/)

# html - 输入类型文本填充字符串：“Foo” 不工作

> ID：13761631
> 
> 赞同：3
> 
> 时间：2012-12-07T10:52:53.447
> 
> 标签：html, css, input

我有一个用这个字符串填充的输入文本，`"foo foo"<foo@foo.it>`但在插入之后，字符串看起来像这样`"foo foo"<foo@foo.it></foo@foo.it>`。我该如何解决？我想以第一种格式显示字符串！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:56:41.310

你可能有这样的事情：

`<input type="text" value=""foo foo"<foo@foo.it>" />`

`value`将属性周围的双引号更改为单引号。这将允许您在属性值内使用双引号：

`<input type="text" value='"foo foo"<foo@foo.it>' />`

但是现在你不能在值中使用单引号。如果你需要单双，那么你将不得不使用`textarea`.

或者，您可以将双引号替换为`&quot;`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T11:18:55.230

像这样转义你的字符串：

```
<input type="text" value="\"foo foo\"<foo@foo.it>"/> 
```

祝你好运

# android - 如何在 Android 应用程序中将元素动态添加到 GUI？

> ID：13761634
> 
> 赞同：-1
> 
> 时间：2012-12-07T10:53:07.253
> 
> 标签：android, eclipse, user-interface

我想要做的是创建一个复选框的布局，其中复选框的数量由用户决定。

就像我说 5 那么在我的应用程序的下一页上，应该出现 5 个复选框。另外，我希望此复选框之外的文本从 1 自动填充到 5。

或者假设我用按钮替换复选框，按钮应该是动态创建的，而且，如果是按钮，按钮应该改变颜色以表示它被点击。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:59:04.730

这是我的代码片段。你要的是哪一个。

```
// get the parent element which will hold your newly created objects
LinearLayout layout = (LinearLayout) findViewById(R.id.shouldContainer);

// create the laout parameters objects which will hold information how you would like your widget to be presented
//you can specify the same attributes as doing it "staticly" with XML file
LayoutParams layoutParams = new LayoutParams(LayoutParams.FILL_PARENT, 0);
layoutParams.weight = 1;

//create your desired object, add listneres to it, text and more
Button button = new Button(this);
//add your object, in this case button to the parent element on given position with given layout parameters
layout.addView(button, position, layoutParams); 
```

当然，您必须根据需要配置布局选项。

# android - Android 动态加载列表视图 onScrollListener 问题

> ID：13761639
> 
> 赞同：4
> 
> 时间：2012-12-07T10:53:15.927
> 
> 标签：android, listview, scrollbar, dynamic-loading

我已经实现了一个列表视图，每个用户滚动到底部屏幕，它会自动将新数据添加到列表视图滚动完成后，onScroll() 调用每个进入显示视图的新项目，从开始到结束滚动。

```
lv_best = (ListView) findViewById(R.id.lv_best);
bestadapter = new LazyAdapter(this, lst_tab_best);
lv_best.setAdapter(bestadapter);
lv_best.setOnScrollListener(new AbsListView.OnScrollListener() {

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) { }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
                        int visibleItemCount, int totalItemCount) {

    Log.d("onScroll ", firstVisibleItem+"-"+visibleItemCount+"-"+totalItemCount);
    boolean loadMore = firstVisibleItem + visibleItemCount >= totalItemCount;
    if(loadMore){
            new ChangeTab_best().execute();
     }
     }
    }); 
```

我在模拟器中运行，上面列出了 5 个项目，但我无法检测到 ListView 中滚动的结束，多次调用 ChangeTab_best()。当我看到 Logcat android 时，所有变量 firstVisibleItem,visibleItemCount,totalItemCount 始终等于 0

那么这里发生了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T16:11:44.300

要检测屏幕底部的项目，您必须使用`firstVisibleItem`和`visibleItemCount`。我使用 AsyncTask 创建了一个[`demo example`](https://github.com/lalit3686/ListViewLoadingItems)相同的对象，它将在后台加载项目并更新 UI。

Total of`firstVisibleItem`和`visibleItemCount`会给你加载的项目数，然后你可以实现加载更多项目的逻辑。

```
int loadedItems = firstVisibleItem + visibleItemCount; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:50:19.197

上述实现可能会导致边缘条件下的错误。页面中第一个可见项目和项目的总和可能比预期多或少 1 个计数。在我改用新方法之前，我一直在使用相同的东西。我所做的是实现了一个listview适配器的侦听器，并在getview中检查是否（位置==要显示的数组中的项目的totalItemCount），如果是，我从适配器调用我的侦听器。非常简单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:10:54.713

```
 lv_best.setOnScrollListener(new OnScrollListener() {
                @Override
                public void onScrollStateChanged(AbsListView view, int scrollState) {
                    switch (scrollState) {
                    case OnScrollListener.SCROLL_STATE_IDLE:
                                         // when list scrolling stops

                                        manipulateWithVisibleViews(view);

                        break;
                    case OnScrollListener.SCROLL_STATE_TOUCH_SCROLL:
                        break;
                    case OnScrollListener.SCROLL_STATE_FLING:
                        break;
                    }
                }

                @Override
                public void onScroll(AbsListView view, int firstVisibleItem,
                        int visibleItemCount, int totalItemCount) { 
                }
            });

private void manipulateWithVisibleViews(AbsListView view){
        int count = view.getChildCount(); // visible views count
        int lastVisibleItemPosition = view.getLastVisiblePosition();

        for (int i = 0; i < count; i++) {
            View convertView = view.getChildAt(i);
            // update views
            }
        }

} 
```

# ruby-on-rails-3 - 如何在 cabybara 测试中访问类变量？

> ID：13761640
> 
> 赞同：0
> 
> 时间：2012-12-07T10:53:19.407
> 
> 标签：ruby-on-rails-3, testing, capybara, acceptance-testing

在我的水豚测试中，我想检查某些链接是否可见。在每次测试之前，我以 foo 身份登录。是否可以在上下文之外访问该 @foo 变量？对于数据设置将非常方便。我的来源如下所示：

```
 before :each do
    @foo = FactoryGirl.create(:foo)
    # log in and stuff
  end

  context "foo wants do leave bar" do
    bar = FactoryGirl.create(:bar)
    bar.foos << @foo

    it "should have link 'leave' if foo is in bar" do
      visit #...
    end
  end 
```

可悲的是，@foo 在上下文中被报告为 nil。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:02:40.447

我自己解决了：

您必须在 it 块中创建、访问和分配，而不是在上下文块中。

# java-me - 多次安装后jar文件停止安装

> ID：13761641
> 
> 赞同：1
> 
> 时间：2012-12-07T10:53:24.477
> 
> 标签：java-me, jar, installation

在 Samsum DUOS e2252 中，我的 .jar 文件几天前曾经安装并正常运行，但后来它突然停止安装，但它仍然给我安装选项，当我点击是时它显示正在处理，然后它说“想要启动应用程序？” 当按下是它运行它，但退出后转到它曾经安装的地方，我没有找到安装的应用程序，而每次运行它我必须转到源文件并执行从开始，这可能是什么问题？我希望手机内存或堆可能有问题。

注意：我已经执行了软硬重置并删除了手机的所有数据，但同样的问题。

# java - 无法从 Servlet 连接数据库

> ID：13761644
> 
> 赞同：3
> 
> 时间：2012-12-07T10:53:36.847
> 
> 标签：java, jsp, servlets, xampp

我已经使用 Xampp Server 启动了 jsp servlet 应用程序，其中我有`dbconnection.java`和`LoginValidator.java`（servlet）文件。

尝试从 servlet ( `LoginValidator.java`) 访问数据库时出现错误。

它收到以下错误：

```
Class Not found Exception : com.mysql.jdbc.Driver 
```

我已经导入了`mysql-connector-java-5.1.18-bin.jar`. 我进行了很多搜索，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:29:25.147

mysql-connector-java-5.1.18-bin.jar 在您的项目中的什么位置？mysql-connector-java-5.1.18-bin.jar 在类路径项目中吗？

如果部署了 mysql-connector-java-5.1.18-bin.jar，请查看服务器上的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:06:12.597

尝试将连接器 jar 放入应用程序的 /WEB-INF/lib/ 目录。如果它不起作用，那么试试这个丑陋的技巧：将你的 mysql-connector jar 放入 \xampp\tomcat\lib\ 目录。您可能错误地导入了连接器 jar，因此它不在类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:58:21.333

您必须将`mysql-connector-java-5.1.18-bin.jar`文件放入文件夹中：

```
YOUR_WEBAPPS_FOLDER/YOUR_WEBAPP/WEB-INF/lib/ 
```

这样当您的 servlet 由 Web 容器编译时，它将在类路径中可用。

# javascript - KineticJS 的 iOS 滚动/捏缩放问题

> ID：13761648
> 
> 赞同：1
> 
> 时间：2012-12-07T10:53:49.903
> 
> 标签：javascript, canvas, kineticjs

如标题所述；使用带有 canvas 标签的 KineticJS 时，我似乎无法让 iOS 滚动/捏缩放；我在另一个问题中看到 evt.preventDefault 会阻止这种情况。我已将其注释掉（仅用于测试），但似乎仍然存在同样的问题。我的画布不是整个页面？所以肯定它只会在那个特定的地方禁用捏缩放/滚动吗？

我知道这与 KineticJS 有关，因为如果我停止加载它，那么捏缩放/滚动就可以了。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:52:14.523

您可以下载 kineticjs 插件来帮助您解决此问题，或者您可以在画布内创建一个允许滚动/缩放的对象。

```
 shape = new kinetic.shape({config}); 
```

然后附加您要捕获的事件

```
 shape.on('touchmove', function{
     // define what you want the effect to be
 }); 
```

您的另一个选择是通过 kineticjs 代码找到负责捕获触摸事件并禁用/覆盖它的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T14:24:43.527

本教程有一个用于动态 js 的捏缩放替代方案。我在评论部分添加了一些滚动功能

[http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/](http://www.html5canvastutorials.com/labs/html5-canvas-multi-touch-scale-stage-with-kineticjs/)

# localhost - chmod() 本地主机上的目录

> ID：13761649
> 
> 赞同：1
> 
> 时间：2012-12-07T10:53:57.020
> 
> 标签：localhost, chmod

我目前正在尝试在本地主机上为 .csv 文件上传表单，但是我还不能用它上传文件。这是因为我需要 chmod 本地主机上的目录。目前我正在使用这个：

```
$allowed_filetypes = array('.csv');
$max_filesize = 524288;
$upload_path = '/csvfiles/';

$filename = $_FILES['userfile']['name'];

// Check if we can upload to the specified path, if not DIE and inform the user.

if(!is_writable($upload_path)){
 $chmod = chmod ($upload_path & "/" & $_FILES, 777);

 // Upload the file to your specified path.
 if(move_uploaded_file($_FILES['userfile']['tmp_name'],$upload_path . $filename)){
    echo 'Upload succesful';
    }else{
    echo 'There was an error during the file upload.  Please try again. :('; // It failed :(.
         }
    } else
    die ('You cannot upload to the specified directory, please CHMOD the directory.'); 
```

我不确定这行代码需要是什么：

```
$chmod = chmod ($upload_path & "/" & $_FILES, 777); 
```

我的脚本不断死亡，目录没有任何反应。

另外，如果您有此类事情的经验，请随时调试！:D

```
Side note: My OS is RHEL5 
```

提前致谢，

-最大限度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:00:07.563

1) 检查它是否已经可写 2) 如果不是，使用 exec() 来 chmod。

```
if(!is_writable($path)) {
    exec("chmod -R 777 $path");
} 

// code for uploading. 
```

这段代码可以做得更漂亮，例如将它包装成一个递归函数，但我会把它留给你:)

*   此信息基于您实际拥有 chmod 目录的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:59:45.420

您正在尝试将`$_FILES`数组连接到一个字符串以创建最终的路径`chmod`，这可能就是问题所在。如果我理解正确，您需要将其更改为：

```
$chmod = chmod ($upload_path & "/" & $filename, 777); 
```

或者

```
$chmod = chmod ($upload_path & "/" & $_FILES['userfile']['name'], 777); 
```

所以你将*文件名*附加 到`$upload_path`.

# c# - 当某些条件为真时，在 WPF 中为数据网格的单元格设置动画？

> ID：13761650
> 
> 赞同：2
> 
> 时间：2012-12-07T10:54:01.153
> 
> 标签：c#, wpf, xaml, wpfdatagrid

我目前正在研究 datagrid-WPF，它正在显示来自数据库的表。该表将有关学生结果的信息显示为通过和失败。现在我想将datagrid-cell上的单元格设置为绿色，当它是PASS时，它是红色，当它是失败时。

如何在 c# 和 XAML 中实现这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:25:35.337

你可以使用一些东西作为`DataGridTemplateColumn`..

跟随一个例子..

```
<DataGridTemplateColumn CellStyle="{StaticResource CenterAlignCell}" Header="Result" IsReadOnly="True" Width="*" Visibility="Visible" CanUserResize="True" SortMemberPath="GAIN_AT_POSITION" CanUserSort="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Background="{Binding GainHighlight}">
                                <TextBlock Text="{Binding GAIN_AT_POSITION, StringFormat=N2}" Foreground="{Binding GainForeGround}"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn> 
```

ps：`GainHighlight`是我的类中绑定UI的属性。

我希望有所帮助。

最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:22:55.177

使用样式和转换器

```
 public class SomeConverter: IValueConverter
{
    public object Convert(object value, Type targetType,
        object parameter, CultureInfo culture)
    {
        string cellValue = value.ToString();
        return cellValue == "PASS";
    }

    public object ConvertBack(object value, Type targetType,
        object parameter, CultureInfo culture)
    {
        return false;
    }
}

<DataGrid ItemsSource="{Binding List}" AutoGenerateColumns="False">
<DataGrid.Resources>
    <myApp:SomeConverter
        x:Key="SomeConverter">
    </myApp:SomeConverter>
    <Style TargetType="DataGridCell" x:Key="FlashStyle">
        <Style.Triggers>
            <DataTrigger 
                Binding="{Binding Col1, 
                Converter={StaticResource SomeConverter}}" 
                Value="True" >
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard 
                            x:Name="Blink" 
                            AutoReverse="True" 
                            RepeatBehavior="Forever">
                            <ColorAnimationUsingKeyFrames 
                                BeginTime="00:00:00"
                                Storyboard.TargetProperty="(Background).(SolidColorBrush.Color)">
                                <EasingColorKeyFrame 
                                    KeyTime="00:00:01" 
                                    Value="Green" />
                            </ColorAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</DataGrid.Resources>
<DataGrid.Columns>
    <DataGridTextColumn 
        Binding="{Binding Col1}" 
        CellStyle="{StaticResource FlashStyle}"></DataGridTextColumn>
    <DataGridTextColumn 
        Binding="{Binding Col2}"></DataGridTextColumn>
</DataGrid.Columns> 
```

并在 xaml 中包含 value = false 的第二个数据触发器并触发红色

并将样式添加到数据网格列

```
<DataGrid.Columns>
<DataGridTextColumn 
    Binding="{Binding SomeCol}" 
    CellStyle="{StaticResource FlashStyle}"></DataGridTextColumn>
<DataGridTextColumn 
    Binding="{Binding AnotherCol}"
    CellStyle="{StaticResource FlashStyle}"></DataGridTextColumn> 
```

# css - 用于输入占位符的 HTML5 图像图标

> ID：13761654
> 
> 赞同：23
> 
> 时间：2012-12-07T10:54:18.517
> 
> 标签：css, html, cross-browser, placeholder

我想将图像图标添加到输入占位符，如下图所示： ![在此处输入图像描述](../Images/51901b9bad929d6a0beb3e889bfa9c93.png)

请注意，这是一个占位符，因此当用户开始输入时，该图标也会消失。

我为使用`::-webkit-input-placeholder`和`::before`. 不幸的是，简单的 Mozilla 应用程序似乎不起作用。

所以我的问题是：**是否有跨浏览器解决方案可以将图像图标添加到输入占位符？**

webkit的解决方案：

```
#myinput::-webkit-input-placeholder::before { 
    content: ' ';
    position: absolute;
    top: 2px; /* adjust icon position */
    left: 0px;
    width: 14px; /* size of a single icon */
    height: 14px;
    background-image: url("/path/to/icons.png"); /* all icons in a single file */
    background-repeat: no-repeat;
    background-position: -48px 0px; /* position of the right icon */
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-07T10:58:35.470

1.  您可以将其设置为`background-image`并使用`text-indent`或 a`padding`将文本向右移动。
2.  你可以把它分成两个元素。

**老实说，如果没有很好的后备**，我会避免使用 HTML5/CSS3 。有太多人使用不支持所有新奇事物的旧浏览器。不幸的是，我们需要一段时间才能放弃回退:(

我提到的第一种方法是最安全和最简单的。两种方式都需要 Javascript 来隐藏图标。

**CSS：**

```
input#search {
    background-image: url(bg.jpg);
    background-repeat: no-repeat;
    text-indent: 20px;
} 
```

**HTML：**

```
<input type="text" id="search" name="search" onchange="hideIcon(this);" value="search" /> 
```

**Javascript：**

```
function hideIcon(self) {
    self.style.backgroundImage = 'none';
} 
```

* * *

### 2013 年 9 月 25 日

我不敢相信我说过“两种方式都需要 JavaScript 来隐藏图标。”，因为这并不完全正确。

正如此答案中所建议的，隐藏占位符文本的最常见时间是更改。但是对于图标，可以将它们隐藏在焦点上，这可以在 CSS 中使用`active`伪类来完成。

```
#search:active { background-image: none; } 
```

哎呀，使用 CSS3 你可以让它消失！

[http://jsfiddle.net/2tTxE/](http://jsfiddle.net/2tTxE/)

* * *

### 2013 年 11 月 5 日

当然，还有 CSS3 ::before 伪元素。但请注意浏览器支持！

```
 Chrome  Firefox     IE      Opera   Safari
:before     (yes)   1.0         8.0     4       4.0
::before    (yes)   1.5         9.0     7       4.0 
```

[https://developer.mozilla.org/en-US/docs/Web/CSS/::before](https://developer.mozilla.org/en-US/docs/Web/CSS/::before)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-21T15:58:37.373

`CSS：

```
input#search{
 background-image: url(bg.jpg);
 background-repeat: no-repeat;
 text-indent: 20px;
}

input#search:focus{
 background-image:none;
} 
```

HTML：

```
<input type="text" id="search" name="search" value="search" />` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-19T04:25:45.800

```
<html>
<head>
<style> 
input[type=text] {
    width: 50%;
    box-sizing: border-box;
    border: 2px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    background-color: white;
    background-image: url('searchicon.png');
    background-position: 10px 10px; 
    background-repeat: no-repeat;
    padding: 12px 20px 12px 40px;
}
</style>
</head>
<body>

<p>Input with icon:</p>

<form>
  <input type="text" name="search" placeholder="Search..">
</form>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-03T15:17:24.450

我不知道随着时间的推移是否有更好的答案，但这很简单而且很有效；

```
input[type='email'] {
  background: white url(images/mail.svg) no-repeat ;
}
input[type='email']:focus {
  background-image: none;
} 
```

风格适合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-09T08:21:57.437

添加到蒂姆的答案：

```
 #search:placeholder-shown {
     // show background image, I like svg 
     // when using svg, do not use HEX for colour; you can use rbg/a instead
     // also notice the single quotes
     background-image url('data:image/svg+xml; utf8, <svg>... <g fill="grey"...</svg>')
     // other background props
   }

   #search:not(:placeholder-shown) { background-image: none;} 
```

# objective-c - 使用字符串函数从 xml 标签中获取值

> ID：13761655
> 
> 赞同：0
> 
> 时间：2012-12-07T10:54:21.637
> 
> 标签：objective-c, xml, string

你好，这是我在一个字符串中的 xml ......

```
<?xml version="1.0" encoding="utf-8"?>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 

xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 

xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<soap:Body><CelsiusToFahrenheitResponse 

xmlns="http://tempuri.org/"><CelsiusToFahrenheitResult>73.4</CelsiusToFahrenheitResult>

</CelsiusToFahrenheitResponse></soap:Body></soap:Envelope> 
```

我想要 73.4 `<CelsiusToFahrenheitResult>73.4</CelsiusToFahrenheitResult>`……有没有最快的方法使用字符串函数来做到这一点？...不想遍历整个 xml！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:02:52.867

不使用 xml 解析器的最简单的解决方案是使用`NSRegularExpression`. 像这样的东西：

```
NSString *pattern = @"<CelsiusToFahrenheitResult>(.*)</CelsiusToFahrenheitResult>";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:nil];
__block NSString *fahrenheitString = nil;
[regex enumerateMatchesInString:yourString options:0 range:NSMakeRange(0, [yourString length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop){
    if (0 < [match numberOfRanges]) {
        NSRange range = [match rangeAtIndex:1];
        fahrenheitString = [yourString substringWithRange:range];
    }    
}]; 
```

# windows-phone-8 - Windows Phone 8 Hyper-V 虚拟机远程调试

> ID：13761657
> 
> 赞同：2
> 
> 时间：2012-12-07T10:54:26.970
> 
> 标签：windows-phone-8, virtual-machine, remote-debugging, hyper-v

我想将 VS2012 Windows Phone 8 开发保留在 Hyper-V Win8 VM 中。在这种情况下，我遇到了“堆叠 Hyper-V”的问题——我找不到运行与 Windows Phone 8 SDK 一起安装的 Hyper-V Windows Phone 8 VM 的方法。（使用 VMWare 的已知“技巧”超出了本主题的范围——我想仅使用 MS 工具来保持开发。）

显而易见的（？）解决方案似乎是在 Windows 8 Professional 下的物理 PC 上设置一个单独的 Hyper-V Windows Phone 8 VM，并从在 Hyper-V VM 中运行的 VS2012 连接到该 VM。但是我找不到 Windows Phone 8 Hyper-V VM 映像来尝试设置这样的开发环境，我也不清楚如何将 VS2012 调试会话连接到这样一个单独的 Windows Phone 8 Hyper-V VM，假设我会以某种方式得到它启动并运行。

您能否建议如何解决我上面概述的问题，即：

*   1) 下载 Windows Phone 8（和 Windows Phone 7.1）Hyper-V VM 映像；
*   2）设置单独的Windows Phone 8 VM（如果（1）可用，我想这应该很容易，只是在这里提到它以获得任务/问题的完整列表）；
*   3) 将 VS2012 Windows Phone 8 解决方案/项目调试会话连接到正在运行的 Windows Phone 8 VM

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:33:52.400

这是不可能的 3) 因为当前版本的 Windows Phone 8 工具不支持这种情况：即 Visual Studio 和 Hyper-V 仿真器的组合必须在同一台主机 PC 上。

这种方式使 1) 和 2) 毫无意义。

也没有 Windows Phone 7.1 Hyper-V 映像之类的东西，WP7.1 模拟器使用不同的虚拟化技术，它确实从 Hyper-V 虚拟机（缓慢）运行。

看起来您需要切换到 VMWare 或使用物理机（如果由于 Hyper-V 支持问题而无法运行模拟器，请使用真实设备）。

# php - Doctrine2：来自一个数据库字段的多个对象属性

> ID：13761660
> 
> 赞同：0
> 
> 时间：2012-12-07T10:54:42.743
> 
> 标签：php, symfony, doctrine-orm

在 Doctrine2 实体中是否可以有多个表示一个 db 字段？

现场示例：我在数据库字段中加密了对象。我创建了用于即时解密该字段的特殊数据类型。现在，从 db 中选择后，我需要在实体中同时拥有加密和解密的值。

我试图以这种方式解决这个问题：

```
/**
 * @var array
 * @ORM\Column(type="EncryptedData", name="data")
 */
private $data;

/**
 * @var string
 * @ORM\Column(type="text", name="data")
 */
private $encryptedData; 
```

但是教义会产生关于重复字段的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:08:53.243

然而在数据库中应该是一个领域？你需要这样的东西：

```
/**
 * @var array
 * @ORM\Column(type="EncryptedData", name="data")
 */
private $data;

private $encryptedData;

public function getData()
{
    return $this->data;
}

public function getEncryptedData()
{
    if ($this->encryptedData === null) {
        // do with that data whatever you need
        $this->encryptedData = processSomehow($this->data);
    }

    return $this->encryptedData;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:14:25.683

您收到重复字段错误，因为这两个字段在您的注释中都称为“数据”。如果您想在数据库表中同时包含这两个字段，请尝试以下操作：

```
/**
 * @var array
 * @ORM\Column(type="text", name="data")
 */
private $data;

/**
 * @var string
 * @ORM\Column(type="text", name="encrypteddata")
 */
private $encryptedData; 
```

也就是说，在数据库中存储敏感的未加密数据在安全方面并不是一个好主意。

希望能帮助到你。

# python - 获取 Google+ 社区成员的列表

> ID：13761665
> 
> 赞同：7
> 
> 时间：2012-12-07T10:55:10.877
> 
> 标签：python, api, google-plus

[Google+ 社区](http://www.google.com/+/learnmore/communities/)服务似乎在没有 API 的情况下启动。有没有人想出一个 Python 脚本来拉下 Google+ 社区的成员列表？

查看社区成员的调用 URL 格式如下：

```
https://plus.google.com/u/0/_/communities/members?hl=en_GB&ozv=es_oz_20121205.15_p1&avw=sq%3A1&_reqid=2638839&rt=j 
```

然后是以下页面：

```
https://plus.google.com/u/0/_/communities/readmembers?hl=en_GB&ozv=es_oz_20121205.15_p1&avw=sq%3A4&_reqid=3038839&rt=j
https://plus.google.com/u/0/_/communities/readmembers?hl=en_GB&ozv=es_oz_20121205.15_p1&avw=sq%3A4&_reqid=3238839&rt=j
https://plus.google.com/u/0/_/communities/readmembers?hl=en_GB&ozv=es_oz_20121205.15_p1&avw=sq%3A4&_reqid=3438839&rt=j 
```

我不确定`_reqid`计数是否真的在进行分页？

我认为，返回的数据至少与 Google+ 朋友列表使用的数据有相似之处，所以理想情况下，我正在寻找的是一个 Python 库，它提供了一个虚假的 Google+ 社交 API，可以抓取：1）Google+ 朋友列表，以及2) Google+ 社区成员列表。

# c# - 如何在 c# 属性声明中使用 Fluent 风格的语法糖

> ID：13761666
> 
> 赞同：2
> 
> 时间：2012-12-07T10:55:18.287
> 
> 标签：c#, fluent

我以前从未使用过流利的代码风格。所以这是我第一次尝试使用 C# 属性声明以流利的风格开发一些东西，但是我得到了一个错误。谁能帮我？

```
public class MailTemplate
{
    string _MailBody = "";
    public MailTemplate MailBody
    {
        get { return _MailBody; }
        set { _MailBody = value ; }
    }

    string _Subject = "";
    public MailTemplate Subject
    {
        get { return _Subject; }
        set { _Subject = value; }
    }

    string _MailFrom = "";
    public MailTemplate MailFrom
    {
        get { return _MailFrom; }
        set { _MailFrom = value; }
    }
} 
```

请帮助我如何分配或初始化邮件正文，以后也可以使用相同的属性名称读取。我认为在流畅风格开发的情况下不能使用属性。这里需要一些光。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:05:34.377

该类的流畅构建器界面`MailTemplate`如下所示：

```
public class MailTemplateBuilder
{
    string _body;
    string _subject;
    string _sender;

    public MailTemplateBuilder WithBody(string body)
    {
        _body = body;
        return this;
    }

    public MailTemplateBuilder WithSubject(string subject)
    {
        _subject = subject;
        return this;
    }

    public MailTemplateBuilder WithSender(string sender)
    {
        _sender = sender;
        return this;
    }

    public MailTemplate Build()
    {
        return new MailTemplate(_sender, _subject, _body);
    }
} 
```

用法如下所示：

```
var template = _builder.WithBody("body")
                       .WithSubject("subject")
                       .WithSender("sender")
                       .Build(); 
```

* * *

另一种方法是使用扩展方法：

```
public static class MailTemplateBuilder
{
    public static MailTemplate WithBody(this MailTemplate item, string body)
    {
        item.MailBody = body;
        return item;
    }

    public static MailTemplate WithSubject(this MailTemplate item, string subject)
    {
        item.MailSubject = subject;
        return item;
    }

    public static MailTemplate WithSender(this MailTemplate item, string sender)
    {
        item.MailFrom = sender;
        return item;
    }
} 
```

用法现在看起来像这样：

```
var template = new MailTemplate().WithBody("body")
                                 .WithSubject("subject")
                                 .WithSender("sender"); 
```

**请注意：**
在这两种情况下，`MailTemplate`该类都不会被此流畅接口的代码污染。这将是一个简单的类：

```
public class MailTemplate
{
    public string MailBody { get; set; } = "";
    public string Subject { get; set; } = "";
    public string MailFrom { get; set; } = "";
} 
```

因此，在您使用任何一种提供的流畅接口创建该实例后，您可以通过访问属性来简单地读取值：

```
var body = template.MailBody; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T11:01:48.630

一些框架，例如 FluentNHibernate 只是将自己作为 lambda 传递：

```
MailTemplate
    .ConfigureWith(mt => mt.MailBody = "hello world")
    .ConfigureWith(mt => mt.MailFrom = "rdingwall@gmail.com")
    .DoSomeOtherStuff()
    .Build(); 
```

对此的实现将是：

```
public class MailTemplate
{
    // regular auto properties
    public string MailFrom { get; set; }
    public string MailBody { get; set; }

    public MailTemplate ConfigureWith(Action<MailTemplate> func)
    {
        func(this);
        return this;
    }

    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T11:03:15.273

您不能使用这样的属性来编写流畅的界面 - 字段是类型`string`，但您的属性都试图返回一个`MailTemplate`.

代替属性，将它们变成可以链接在一起的*方法。*

```
public class MailTemplate
{
    string _MailBody = "";

    public MailTemplate Body(string mailBody)
    {
        _MailBody = mailBody;
        return this;
    }

    ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-28T11:37:38.653

正如@Richard 所说，**FluentNHibernate**只是将自己作为 lambda 传递。你也可以使用**c#**来做同样的事情。

```
public class MailTemplate
{

    public string To { get; set; }
    public string From { get; set; }
    public string Subject { get; set; }
    public string Body { get; set; }
    public string Attachement { get; set; }

    public static MailTemplate Configure { get => new MailTemplate(); }

    public MailTemplate With(Action<MailTemplate> func)
    {
        func(this);
        return this;
    }

    internal void Build()
    {
        Console.WriteLine("Sending the mail....");
    }
} 
```

这是如何调用此方法

```
MailTemplate
            .Configure
                .With(mt => mt.To = "michaelameyaw7@gmail.com")
                .With(mt => mt.From = "persol.system@gmail.com")
                .With(mt => mt.Subject = "Fluent Try Test")
                .With(mt => mt.Body = "Hello, this is mail body")
                .With(mt => mt.Attachement = "file.pdf")
           .Build(); 
```

# selenium-rc - 单击应该执行 Javascript 的按钮不会带来结果

> ID：13761668
> 
> 赞同：1
> 
> 时间：2012-12-07T10:55:23.180
> 
> 标签：selenium-rc, robotframework

我遇到了问题，当单击应该执行 Javascript 的按钮时，并没有带来任何结果。

这是日志的一部分：

```
20121206 10:02:35.859 :  INFO : Simulating Mouse Over on element 'xpath=//button[contains(@class,"x-btn-text")]/.[contains(text(),"+ Add")]'
20121206 10:02:35.904 :  INFO : Clicking element 'xpath=//button[contains(@class,"x-btn-text")]/.[contains(text(),"+ Add")]'.
20121206 10:02:56.231 :  FAIL : Element 'xpath=//input[@name="type"]' did not appear in 20 seconds 
```

这是屏幕截图，它看起来如何，当它不起作用时：

![+添加按钮不起作用](../Images/b77eae1c9075420032de3df8d01da535.png)

如果我手动执行此操作，单击“+ 添加”按钮应执行一些 Javascript 并打开此表单：

![+工作时添加](../Images/39799ed67e3e9c507742153a019e3db0.png)

在此表单中，我想验证类型字段（等待页面包含元素 xpath=//input[@name="type"]）等一些操作，但这没关系，直到我没有打开表单。

我正在使用：Seleniun 服务器 2.25 Firefox 12\. RFM 2.7.5

什么可能导致问题/我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:16:50.530

它应该工作。你从哪里得到一个表达“ `xpath=//button[contains(@class,"x-btn-text")]/.[contains(text(),"+ Add")]`”？您可以将按钮添加一个 ID 并尝试使用指向 ID 标识符的 xpath 来单击它，例如`xpath//button[@id=addButton]`？

# scala - Scala：使用稍后创建的实例初始化字段

> ID：13761670
> 
> 赞同：2
> 
> 时间：2012-12-07T10:55:39.973
> 
> 标签：scala, initialization, field

假设我有这两个类：

```
class Person (val name: String, val surname: String)

class Family (val nameFamily: String, val members: Set[Person]) 
```

现在在 main 方法中实例化两个类，如下所示：

```
val F1 = new Family ("Red", Set(P1, P2))
val P1 = new Person ("John", "Smith")
val P2 = new Person ("Luis", "Smith") 
```

main 方法允许我在实例化之前输入家庭成员。我想要这个作为我的模型。但是如果我在创建之前输入成员，当我去写：

```
println(F1.members) 
```

我返回一个集合（空）。

如果你先写主要人物，像这样：

```
val P1 = new Person ("John", "Smith")
val P2 = new Person ("Luis", "Smith")  
val F1 = new Family ("Red", Set(P1, P2)) 
```

我没有问题。

但我想以任何顺序编写实例，最后运行家庭验证。

我可以解决这个问题。我的意思是，我可以使用稍后创建的实例来初始化我的字段。

请原谅我糟糕的英文翻译。

**上传#1**

我已经在 Scala 中实现了一个域，我使用 DSL 创建了域的实例。我的 DSL 允许我以混合顺序实例化类。例如，我创建一个 Component，然后在这个 Component 中添加一些 Type。然后我创建我添加到组件的类型。在主要方法中我可以做到。作为主体的最后一条语句，我进行了验证。开始验证时，Type in the Component 没有找到任何东西，因为这些是稍后实例化的。这个问题只能用懒惰的方式解决吗？或者在域级别是否有解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:07:00.493

您可以使用`lazy val`：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Person (val name: String, val surname: String)
case class Family (val nameFamily: String, val members: Set[Person])

lazy val f1 = new Family ("Red", Set(p1, p2))
lazy val p1 = new Person ("John", "Smith")
lazy val p2 = new Person ("Luis", "Smith")

// Exiting paste mode, now interpreting.

defined class Person
defined class Family
f1: Family = <lazy>
p1: Person = <lazy>
p2: Person = <lazy>

scala> f1
res0: Family = Family(Red,Set(Person(John,Smith), Person(Luis,Smith))) 
```

如果您只想在创建对象后在某处设置一些值，则应使用 scala 2.10 中的 Promise：

```
import concurrent.{Promise, Future}

case class Person (val name: String, val surname: String)
class Family (val nameFamily: String) {
  private val membersPromice = Promise[Set[Person]]
  def setMembers(m: Set[Person]) { membersPromice.success(m) }
  val membersFuture = membersPromice.future
  def members = membersFuture.value.map(_.get)
  override def toString() = "Family(" + nameFamily + ", " + members.getOrElse("<future>") + ")"
} 
```

用法：

```
scala> val f = new Family("red")
f: Family = Family(red, <future>)

scala> val (p1, p2) = (Person("John", "Smith"), Person("Luis", "Smith"))
p1: Person = Person(John,Smith)
p2: Person = Person(Luis,Smith)

scala> f.setMembers(Set(p1, p2))

scala> f
res1: Family = Family(red, Set(Person(John,Smith), Person(Luis,Smith)))

scala> f.setMembers(Set(p1, p2))
java.lang.IllegalStateException: Promise already completed. 
```

您可以使用[类型安全的构建器模式](https://web.archive.org/web/20120513085210/http://www.tikalk.com/java/blog/type-safe-builder-scala-using-type-constraints)：

```
case class Person (val name: String, val surname: String)
case class Family (val nameFamily: String, val members: Set[Person])

sealed abstract class TBool
class TTrue extends TBool
class TFalse extends TBool
class FamilyBuilder[WithName <: TBool, WithMembers <: TBool](val nameFamily: Option[String], val members: Option[Set[Person]]) {
  def withName(nameFamily: String)(implicit i: WithName =:= TFalse) = new  FamilyBuilder[TTrue, WithMembers](Some(nameFamily), members)
  def withMembers(members: Set[Person])(implicit i: WithMembers =:= TFalse) = new  FamilyBuilder[WithName, TTrue](nameFamily, Some(members))
  def create()(implicit i1: WithName =:= TTrue, i2: WithMembers =:= TTrue) = Family(nameFamily.get, members.get)
}
object FamilyBuilder {
  def apply() = new FamilyBuilder[TFalse, TFalse](None, None)
} 
```

用法：

```
scala> FamilyBuilder() withName "Red" withMembers Set(p1, p2) create()
res1: Family = Family(Red,Set(Person(John,Smith), Person(Luis,Smith)))

scala> FamilyBuilder() withMembers Set(p1, p2) withName "Red" create()
res2: Family = Family(Red,Set(Person(John,Smith), Person(Luis,Smith)))

scala> FamilyBuilder() withName "Red" create()
<console>:1: error: Cannot prove that TFalse =:= TTrue.
              FamilyBuilder() withName "Red" create()
                                             ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:07:02.273

你只需要让 people 变量变得懒惰

```
val F1 = new Family ("Red", Set(P1, P2))
lazy val P1 = new Person ("John", "Smith")
lazy val P2 = new Person ("Luis", "Smith")

scala> println(F1.members)
Set($line1.$read$$iw$$iw$Person@185623a7, $line1.$read$$iw$$iw$Person@3f3eb56c) 
```

* * *

**已编辑**

您可以在类本身中将 Family 成员定义为惰性

```
class Family(val nameFamily: String, memberSet: => Set[Person]) {
    lazy val members= memberSet
} 
```

这样，`members`属性仅根据需要进行评估

# mysql - 创建具有动态参数数量的 MySQL 存储函数

> ID：13761672
> 
> 赞同：6
> 
> 时间：2012-12-07T10:55:50.060
> 
> 标签：mysql, arguments, user-defined-functions, variadic-functions

我正在尝试创建一个 MySQL 函数`IS_IN_ENUM('value', 'val1', 'val2', 'val3')`，如果“value”在（“val1”、“val2”、“val3”）中，则该函数返回 true。我知道我可以做到`SELECT 'value' IN ('val1', 'val2', 'val3')`，但这没那么有趣，因为我只想学习如何创建这样的函数。

我给你一个例子，考虑以下`ADD`函数：

```
CREATE FUNCTION my_add (
    a DOUBLE,
    b DOUBLE
)
RETURNS DOUBLE
BEGIN

    IF a IS NULL THEN
        SET a = 0;
    END IF;

    IF b IS NULL THEN
        SET b = 0;
    END IF;

    RETURN (a + b);
END; 
```

如果我这样做`SELECT my_add(1, 1)`，我会得到 2（哇！）。

如何改进此功能以便能够调用：

```
SELECT my_add(1, 1); -- 2
SELECT my_add(1, 1, 1); -- 3
SELECT my_add(1, 1, 1, 1); -- 4
SELECT my_add(1, 1, 1, 1, 1, 1, .....); -- n 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T18:16:59.260

您展示的函数示例是*存储函数*，而不是 UDF。正如@Enzino 回答的那样，MySQL 中的存储函数不支持可变数量的参数。

MySQL UDF 是用 C 或 C++ 编写的，编译成动态对象文件，然后使用[不同的语法`CREATE FUNCTION`](http://dev.mysql.com/doc/refman/5.5/en/create-function-udf.html)与 MySQL 服务器链接。

有关编写 UDF 的详细信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/adding-udf.html](http://dev.mysql.com/doc/refman/5.5/en/adding-udf.html)。但我不知道您是否想编写 C/C++ 代码来执行此操作。

MySQL UDF 确实支持可变数量的参数。事实上，所有 UDF 都隐式接受任意数量的参数，作为程序员，您可以确定给定参数的数量和数据类型是否对您的函数有效。

UDF 中的处理函数参数记录在[http://dev.mysql.com/doc/refman/5.5/en/udf-arguments.html](http://dev.mysql.com/doc/refman/5.5/en/udf-arguments.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:32:43.460

> 我正在尝试创建一个 MySQL 函数 IS_IN_ENUM('value', 'val1', 'val2', 'val3') 如果 'value' 在 ('val1', 'val2', 'val3') 中则返回 true。

为此，您可以使用本机函数 FIELD：

[http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_field](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_field)

IS_IN_ENUM 表示 FIELD != 0。

还要检查 FIND_IN_SET

[http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set)

存储函数不支持可变数量的参数。

现在，如果你真的想在 MySQL 服务器代码中自己实现这样的原生函数，请寻找 in 的子`Create_native_func`类`sql/item_create.cc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T08:30:36.110

老问题，但您不需要创建 is_in_enum 因为它已经内置。只需从值 IN (1,2,3,4) 的表中选择 true；

# c# - 使用开放 XML 创建工作簿的副本

> ID：13761675
> 
> 赞同：0
> 
> 时间：2012-12-07T10:55:56.010
> 
> 标签：c#, xml

我的本地机器上有一个现有的 excel 文件。我需要创建它的副本并将其保存在其他位置我如何使用 Open XML 来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:05:10.217

我不确定您为什么要为此使用 Open XML，它可以使用 File.Copy 轻松完成，如下所示：

```
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            File.Copy(@"C:\whatever\original.xlsx", @"C:\whatever\new.xlsx");
        }
    }
} 
```

# jquery - 不使用 Bootstrap .popover 维护的类

> ID：13761676
> 
> 赞同：0
> 
> 时间：2012-12-07T10:55:57.307
> 
> 标签：jquery, class, twitter-bootstrap, popover

我正在使用 Twitter Bootstrap 弹出框添加标签。

在弹出窗口中，我使用 html 选择器加载标签列表，当单击标签时，我添加了一个类。问题是当我关闭弹出框并想要第二次打开它时，设置的类不再可见。

这是我的 JS：

```
 var isVisible = false;
    var clickedAway = false;

    $('.btn-label-popover').popover({
            animation: true,
            placement: 'top',
            title: 'Selecteer labels',
            content: $('.controls .popover-content').html(),
            trigger: 'manual'
        }).click(function(e) {
            e.preventDefault();
            if(isVisible & clickedAway){
                $('.btn-label-popover').popover('hide');
                isVisible = clickedAway = false;
            } else {
                $(this).popover('show');
                clickedAway = false;
                isVisible = true;
            }
    });

    $('body').on('click', '.popover-content span', function(e){
        e.stopPropagation();
        var identifier = $(this).parent().attr('class');
        $('.'+identifier+' span').toggleClass('label-inverse');
        $('.'+identifier+' span').toggleClass('label-reminder');
    });

    $(document).click(function(e) {
      if(isVisible & clickedAway)
      {
        $('.btn-label-popover').popover('hide');
        isVisible = clickedAway = false;
      }
      else
      {
        clickedAway = true;
      }
    });

    $(document).keyup(function(e) {
        if (e.keyCode == 27) {
            if(isVisible & clickedAway)
            {
                $('.btn-label-popover').popover('hide');
                isVisible = clickedAway = false;
            } else {
                clickedAway = true;
            }
        }
    }); 
```

有没有办法通过添加的类来获取 HTML？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:58:02.650

您丢失类的原因是 Twitter 引导程序在隐藏时从 DOM 中删除了弹出框。您需要将每个更改的弹出框的 id/class 存储在一个数组中，并使用它来重新添加必要的类。例如：

```
var identifiers = [];

$('.btn-label-popover').popover({
        // your options
    }).click(function(e) {
        e.preventDefault();
        if(isVisible & clickedAway){
            $('.btn-label-popover').popover('hide');
            isVisible = clickedAway = false;
        } else {
            $(this).popover('show');

            // Loop through changed popovers
            for(i=0; i<identifiers.length, i++){
                $('.'+identifiers[i]+' span').toggleClass('label-inverse');
                $('.'+identifier[i]+' span').toggleClass('label-reminder');
            }
            clickedAway = false;
            isVisible = true;
        }
});

$('body').on('click', '.popover-content span', function(e){
    e.stopPropagation();
    var identifier = $(this).parent().attr('class');

    // Add to an array
    identifiers.push(identifier);

    $('.'+identifier+' span').toggleClass('label-inverse');
    $('.'+identifier+' span').toggleClass('label-reminder');
}); 
```

# vim - 使用 Vim 删除文件中的所有空格并用逗号替换它们

> ID：13761677
> 
> 赞同：28
> 
> 时间：2012-12-07T10:56:00.620
> 
> 标签：vim

`,`任何人都知道如何使用 Vim 在文件中删除所有空格并用逗号替换它们？文件输入示例（单词可能无处不在！）：

```
C1       TEST   PROD
A1    BE

T1     B1 
```

文件输出示例（属于同一行的所有单词如下例所示）：

```
C1,TEST,PROD
A1,BE
T1,B1 
```

**我找到了**： `%s/\s\{1,}/,/gc`

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-07T10:57:40.313

首先删除空行：

```
:g/^\s*$/d 
```

然后`:s///`在每行 ( `%`) 上使用替换 ( ) 将所有 ( `g`) 连续空格 ( `\s\+`) 替换为逗号 ( `,`)。

```
 :%s/\s\+/,/g 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-13T12:01:17.107

另一种方法：

`%s/\s\{1,}/,/gc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-21T15:14:28.833

当转换带有标题的文本文件和带有空格的文本字段时，我使用了`%s/\s\{2,}/,/g`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-31T19:49:20.113

如果文件包含 n 行，并且在每行的开头、每行的结尾和中间包含空格。并且您想删除开头和结尾的空格，并用逗号“，”替换多个空格之间的空格。并且还重定向输出并保存到一个新文件，保持原始文件不变。

使用以下命令 -

```
sed -e 's/^[ \t]*// ; s/[[:blank:]]*$// ; s/\s\+/,/g ; s/,$//' input-file-name | tee output-file-name 
```

如果不在同一目录中，则给出输入文件名的路径。

或者你可以写下所有这些——

```
"s/^[ \t]*//
s/[[:blank:]]*$//
s/\s\+/,/g ; s/,$//" 
```

在一个txt文件中保存它。并使用 -f 选项。

所以命令变成 -

```
sed -f commands.txt input-file-name.txt | tee output-file-name.txt 
```

commnads.txt 包含 sed 命令的上述条件

# windows - 为什么我们需要 IAudioRenderClient 接口

> ID：13761681
> 
> 赞同：0
> 
> 时间：2012-12-07T10:56:15.257
> 
> 标签：windows, audio, com, wasapi

这个问题是关于 Windows 音频会话 API 的。看了微软的示例代码，发现得到一个IAudioClient后，在其上调用“GetService”方法，得到一个IAudioRenderClient。然后调用IAudioRenderClient的GetBuffer和ReleaseBuffer方法添加要播放的缓冲区。

我的问题：

1.  为什么需要IAudioRenderClient，为什么不直接把GetBuffer和ReleaseBuffer方法放在IAudioClient中呢？即在什么情况下我们需要多个 IAudioRenderClient 用于单个 IAudioClient？

2.  因为当我们播放音频时，总是需要一个 IAudioClient，而在这个 IAudioClient 上我们调用 GetService 来获得一个 IAudioRenderClient，我们没有任何机会调用 CoCreateInstance() 来创建 IAudioRenderClient 是吗？那么为什么我们需要一个 IID 用于 IAudioRenderClient 呢？

==================================================== ==============================

经过更多阅读，我认为 IAudioClient 可以是 IAudioRenderClient 或 IAudioCaptureClient。但是另一个问题来了，为什么我们调用GetService来获取IAudioRenderClient而不是QueryInterface呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T09:34:03.767

1.  因为`IAudioCaptureClient`也有`GetBuffer`和`ReleaseBuffer`。如果你把`GetBuffer`and `ReleaseBuffer`on `IAudioClient`，那么你怎么知道你是在处理捕获缓冲区还是渲染缓冲区？这种方法还可以防止`IAudioClient`对所有可能的服务使用过多的方法。（这被称为“[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)”，被认为是好的设计）。
2.  您不使用`CoCreateInstance`，因为您的系统可能安装了许多声卡。`IAudioRenderClient`如果你传递 ion 的 IID，它怎么知道你想要哪个`IAudioRenderClient`？

# git - gitignore - 在结帐时隐藏被忽略的文件

> ID：13761682
> 
> 赞同：5
> 
> 时间：2012-12-07T10:56:17.983
> 
> 标签：git, git-branch, gitignore, git-checkout

这是我的问题（通过示例步骤）：

*   我有一个带有两个不同分支（branchA 和 branchB）的 Git 存储库，它们目前是相同的。
*   结帐到 branchB 并创建一个新文件“foo.txt”。
*   将该文件添加到该分支的“.gitignore”，以便在分支B 中成功忽略它。
*   创建另一个文件“hello.txt”，将其暂存并提交。
*   结帐到分支 A。
*   foo.txt 出现在 branchA 中，但 hello.txt 没有。

为什么 foo.txt 出现在 branchA 中而不是像 hello.txt 那样“隐藏”？

从我的角度来看，这是一个很大的烦恼，似乎是一个错误/功能请求，但 Git 是否被设计成这样？我很惊讶地发现没有其他人抱怨这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:16:15.203

这不是一个错误。要了解它的工作原理，您需要了解一些事情。

*   `.gitignore`不是“自动”在全球范围内应用的。你需要提交它。
*   任何未提交的文件都将在每个分支中可见。切换分支时，您应该`commit`选择文件，或者您可以`stash`。

另外，这个问题*以前也*有人问过，不过我不怪你没有在搜索中找到它。[在不同的 git 分支中处理两个不相关的文件](https://stackoverflow.com/questions/12446614/working-on-two-unrelated-files-in-separate-git-branches)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T18:47:27.117

foo.txt 没有出现在 branchA 中，它只是不再被忽略，因为当您签出 branchA 时，您对 .gitignore 的更改（我假设您将这些更改提交给了 branchB）丢失了。foo.txt 只是一个未跟踪的文件。当您切换到 branchA 时让 foo.txt “消失”表示您希望从工作目录中删除该文件。这与忽略文件非常不同。

无论您使用 $GIT_DIR/info/exclude 文件检出哪个分支，您都可以指定影响整个存储库的忽略模式。但是，这是您的存储库本地的，因此此文件中指定的忽略模式不会传播到其他存储库。请参阅 gitignore(5)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:07:16.810

快速回答：

*   hello.txt 不是“隐藏的”，它已被提交给 branchB，因此在您将 branchB 合并或变基到 branchA 之前，您不会在 branchA 中看到
*   .gitignore 也是如此。如果你将 .gitignore 提交给了 branchB（我猜你是这样做的），然后签出 branchA，那么，branchA 没有 .gitignore 文件，这就是你看到 foo.txt 的原因。同样，您需要将 branchB 合并或变基到 branchA

# java - 将 jtable 中的编辑和删除信息添加到数据库

> ID：13761685
> 
> 赞同：0
> 
> 时间：2012-12-07T10:56:29.193
> 
> 标签：java, mysql, database, jtable

我正在尝试将此表中的信息类型保存或删除到数据库中。当我运行这段代码时，我不断收到错误消息，而且我一辈子都无法弄清楚我做错了什么。框架打开，当您输入与您要更改的内容相对应的代码指定的 ID 时，它仍然没有改变。

```
import java.io.*;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.sql.*;
import java.util.*;

class Changeadd {
JFrame f;
JPanel p1, p2, p3;
JTabbedPane tp;
ImageIcon btnimg1, btnimg2;
JLabel l1, l2, l3, l4, l5, l6, l7, l8, l9, l10;
JTextField tf1, tf2, tf3, tf4, tf5, tf6, tf7, tf8, tf9, tf10;
JScrollPane sp1;
JButton savebtn, resetbtn, editbtn1, editbtn2, deletebtn;

Changeadd() {
    f = new JFrame("Form");
    p1 = new JPanel(new GridLayout(5, 2));
    p2 = new JPanel(new GridLayout(5, 2));
    p3 = new JPanel(new GridLayout(2, 2));
    tp = new JTabbedPane();
    l1 = new JLabel("MenuID");
    l2 = new JLabel("Name");
    l3 = new JLabel("Info");
    l4 = new JLabel("Price");
    l5 = new JLabel("Enter Menu ID to delete");

    l7 = new JLabel("MenuID");
    l8 = new JLabel("Name");
    l9 = new JLabel("Info");
    l10 = new JLabel("Price");
    tf1 = new JTextField(12);
    tf2 = new JTextField(12);
    tf3 = new JTextField(12);
    tf4 = new JTextField(12);
    tf5 = new JTextField(12);
    tf6 = new JTextField(12);
    tf7 = new JTextField(12);
    tf8 = new JTextField(12);
    tf9 = new JTextField(12);
    tf10 = new JTextField(12);
    savebtn = new JButton(" Add ");
    resetbtn = new JButton(" Reset");
    editbtn1 = new JButton(" Edit ");
    editbtn2 = new JButton(" Save");
    deletebtn = new JButton("Delete");
    p1.add(l1);
    p1.add(tf1);
    p1.add(l2);
    p1.add(tf2);
    p1.add(l3);
    p1.add(tf3);
    p1.add(l4);
    p1.add(tf4);
    p1.add(savebtn);
    p1.add(resetbtn);

    p2.add(l7);
    p2.add(tf7);
    p2.add(l8);
    p2.add(tf8);
    p2.add(l9);
    p2.add(tf9);
    p2.add(l10);
    p2.add(tf10);
    p2.add(editbtn1);
    p2.add(editbtn2);

    p3.add(l5);
    p3.add(tf5);
    p3.add(deletebtn);
    resetbtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            tf1.setText("");
            tf2.setText("");
            tf3.setText("");
            tf4.setText("");
        }
    });
    savebtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            String value1 = tf1.getText();
            String value2 = tf2.getText();
            String value3 = tf3.getText();
            String value4 = tf4.getText();
            Connection con = null;
            String url = "jdbc:mysql://localhost:3306/mydb";
            String db = "myDB";
            String driver = "com.mysql.jdbc.Driver";
            String user = "root";
            String pass = "root";
            System.out.println(value1 + value2 + value3 + value4);
            try {
                Class.forName(driver);
                con = DriverManager.getConnection(url + db, user, pass);
                PreparedStatement st = con
                        .prepareStatement("INSERT INTO menu(menu.menuID,menu.name,menu.info,menu.price) values(?,?,?,?)");
                st.setString(1, value1);
                st.setString(2, value2);
                st.setString(3, value3);
                st.setString(4, value4);
                st.executeUpdate();
                JOptionPane.showMessageDialog(p1,
                        "Data is successfully inserted into database.");
                con.close();
            } catch (Exception e) {
                JOptionPane.showMessageDialog(p1,
                        "Error in submitting data!");
            }
        }
    });

    deletebtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {

            String value1 = tf5.getText();
            Connection con = null;
            String url = "jdbc:mysql://localhost:3306/mydb";
            String db = "myDB";
            String driver = "com.mysql.jdbc.Driver";
            String user = "root";
            String pass = "root";
            try {
                Class.forName(driver);
                con = DriverManager.getConnection(url + db, user, pass);
                PreparedStatement st = con
                        .prepareStatement("DELETE FROM menu WHERE menu.menuID = ?");
                st.setString(1, value1);
                st.executeUpdate();
                JOptionPane.showMessageDialog(p3,
                        "Record is deleted successfully.");
                con.close();
            } catch (Exception exp3) {
                JOptionPane.showMessageDialog(p3,
                        "Error in deleting record.");
            }
        }
    });
    editbtn1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {

            String value = tf7.getText();
            Connection con = null;
            String url = "jdbc:mysql://localhost:3306/mydb";
            String db = "myDB";
            String driver = "com.mysql.jdbc.Driver";
            String user = "root";
            String pass = "root";
            try {
                Class.forName(driver);
                con = DriverManager.getConnection(url + db, user, pass);
                PreparedStatement st = con
                        .prepareStatement("SELECT FROM menu WHERE menu.menuID=?");
                st.setString(1, value);
                ResultSet res = st.executeQuery();
                res.next();
                tf7.setText(Integer.toString(res.getInt(1)));
                tf8.setText(res.getString(2));
                tf9.setText(res.getString(3));
                tf10.setText(Integer.toString(res.getInt(4)));
                con.close();
            } catch (Exception e) {
                JOptionPane.showMessageDialog(p2, "Can not edit data");
            }
        }
    });
    editbtn2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
            Connection con = null;
            String url = "jdbc:mysql://localhost:3306/mydb";
            String db = "myDB";
            String driver = "com.mysql.jdbc.Driver";
            String user = "root";
            String pass = "root";
            try {
                int x = JOptionPane.showConfirmDialog(p2,
                        "Confirm edit? All data will be replaced");
                if (x == 0) {
                    try {
                        String value1 = tf7.getText();
                        String value2 = tf8.getText();
                        String value3 = tf9.getText();
                        String value4 = tf10.getText();

                        Class.forName(driver);
                        con = DriverManager.getConnection(url + db, user,
                                pass);
                        ;
                        Statement st = con.createStatement();
                        st.executeUpdate("UPDATE menu set menu.name'"
                                + value2 + "', menu.info'" + value3
                                + "', menu.price'" + value4
                                + "' where menu.menuID='" + value1 + "'");
                        JOptionPane.showMessageDialog(p2,
                                "Updated successfully");
                        con.close();
                    } catch (Exception ex) {
                        JOptionPane.showMessageDialog(p2,
                                "Error in updating edit fields");
                    }
                }
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(p2, "Error");
            }
        }
    });
}

void dis() {
    f.getContentPane().add(tp);
    tp.addTab("Add Record", p1);
    tp.addTab("Edit Record", p2);
    tp.addTab("Delete Record", p3);

    f.setSize(350, 180);
    f.setVisible(true);
    f.setResizable(true);
}

public static void main(String z[]) {
    Changeadd pro = new Changeadd();
    pro.dis();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:00:13.587

我认为你的网址是错误的

```
String url = "jdbc:mysql://localhost:3306/mydb"; 
```

已包含附加的 mydb

```
con = DriverManager.getConnection(url + db, user, pass); 
```

将通过

```
"jdbc:mysql://localhost:3306/mydbmyDB" 
```

还

您必须将`mysql-connector-java-5.1.18-bin.jar`文件放入文件夹中：

```
YOUR_WEBAPPS_FOLDER/YOUR_WEBAPP/WEB-INF/lib/ 
```

这样当您的 servlet 由 Web 容器编译时，它将在类路径中可用。

# jquery - jquery单选按钮选择中的问题

> ID：13761686
> 
> 赞同：2
> 
> 时间：2012-12-07T10:56:30.267
> 
> 标签：jquery

我对 jquery 不太灵活。我有一些 li 标签，对于每个 li 标签，我有一个 radio 类型的输入标签，例如：

```
<li><input type='radio' value='cool' name='radiooption' id='2'>2</li>
<li class='answered'><input type='radio' name='radiooption' value='cool1' id='3'>3</li>
<li><input type='radio' value='cool' name='radiooption' id='4'>4</li>
<li><input type='radio' value='cool' name='radiooption' id='5'>5</li> 
```

现在通过jquery如何添加标签`checked="checked"`下的单选按钮？`li``class='answered'`

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:00:17.063

您需要先修复您的标记（您缺少结束`</li>`s）。至于 jQuery，这样的东西应该可以解决问题：-

```
$('li.answered').children('input[type="radio"]').prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:01:22.980

```
$('.answered').find('input').attr('checked', 'checked'); 
```

# javascript - 可变数量的异步事件完成后的操作

> ID：13761690
> 
> 赞同：1
> 
> 时间：2012-12-07T10:56:41.383
> 
> 标签：javascript, jquery

我有可变数量的要执行的异步事件。我希望在他们全部完成后能够采取进一步的行动。下面的代码片段显示了我尝试使用 jquery 延迟对象调用事件。有人可以帮忙吗？（我知道代码不会按原样运行）。bubble.transitionTo 是异步事件。警报（“完成”）；在异步回调完成之前调用，实际上是在它们执行之前。

```
var events = [];
    for (var i = 0; i < stageBubbles.length; i++) {
        var element = stageBubbles[i];
        var bubble = new Object();
        bubble = this.dataPointLayer.get('#' + element.name)[0];
        bubble.setOpacity(0.5);
        events.push(bubble.transitionTo({
            x: element.x,
            y: element.y,
            radius: element.radius,
            duration: 3,
            easing: 'ease-in',
            callback: function () {

            }
        }));
    }
    $.when.apply(this, events).done(function () { alert('complete'); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:37:40.550

这个 transitionTo 函数在哪里定义？我在任何 jQuery 项目的文档中都找不到它。很可能是它没有实现 $.Deferred 方法。

如果我的假设是正确的，你可以尝试这样的事情。

```
 showBubbles = function (stageBubbles) {
        var events = [],
            deferred = $.Deferred(),
            completedCount = 0;

        for (var i = 0; i < stageBubbles.length; i++) {
            var element = stageBubbles[i];
            var bubble = new Object();
            bubble = this.dataPointLayer.get('#' + element.name)[0];
            bubble.setOpacity(0.5);
            bubble.transitionTo({
                x: element.x,
                y: element.y,
                radius: element.radius,
                duration: 3,
                easing: 'ease-in',
                callback: function () {
                    completedCount += 1;
                    if (completedCount == stageBubbles.length) {
                        deferred.resolve();
                    }
                }
            });
        }
        return deferred.promise();
    };
    $.when(showBubbles.call(this, stageBubbles)).done(function () { alert('complete'); }); 
```

此函数返回一个延迟对象，该对象在为所有气泡调用回调时解析。

# mysql - 只有一列的表或添加数字主键？

> ID：13761692
> 
> 赞同：11
> 
> 时间：2012-12-07T10:56:49.920
> 
> 标签：mysql, database, database-design, schema

假设我需要一个带有帐户 ID 且没有其他信息的简单表。有两种方法可以做到：

```
id varchar(255) PRIMARY KEY 
```

或者添加数字主键：

```
id int PRIMARY KEY
accountId varchar(255) UNIQUE NOT NULL 
```

这两种方法的优点/缺点是什么？您会选择哪一种，为什么？

第一个解决方案对可维护性（如果我们需要更改单行的 id）和性能有什么影响？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T11:28:46.033

这归结为数据库世界中*代理键*与*自然键*的争论。有关该主题的文本，请参见[此处](http://weblogs.sqlteam.com/mladenp/archive/2009/10/06/Why-I-prefer-surrogate-keys-instead-of-natural-keys-in.aspx)、[此处](http://www.sqlmag.com/article/data-modeling/surrogate-key-vs-natural-key-23449)和[此处的示例。](https://stackoverflow.com/questions/7971575/natural-key-vs-surrogate-key-an-innodb-foreign-key)我认为这两种选择都是有效的，但在这种情况下，我会选择`AccountID`作为自然键（假设`AccountID`每个帐户都是唯一的，不会为空，并且不会受到更改），因为这意味着更少的开销。在这种情况下，我看不到代理键的附加值。

自然键：

*   对用户有意义
*   需要时很难改变
*   可能导致在查询中需要更少的连接

代理键：

*   对用户没有任何意义
*   不受更改
*   可能导致在查询中需要更多连接
*   可能需要额外或更大的索引

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:15:59.333

不同之处在于 PRIMARY KEY 约束暗示/强制执行 NOT NULL CONSTRAINT。在第一个示例中，`varchar(255)`将有效提升为`varchar(255) NOT NULL`

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE pk
        ( id varchar(255) PRIMARY KEY
        );

CREATE TABLE uniq
        ( id int PRIMARY KEY
        , accountid varchar(255) UNIQUE
        );

INSERT INTO pk (id) VALUES(NULL);
INSERT INTO uniq (id, accountid) VALUES(1, NULL); 
```

结果：

```
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "pk_pkey" for table "pk"
CREATE TABLE
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "uniq_pkey" for table "uniq"
NOTICE:  CREATE TABLE / UNIQUE will create implicit index "uniq_accountid_key" for table "uniq"
CREATE TABLE
ERROR:  null value in column "id" violates not-null constraint
INSERT 0 1 
```

由于 PK (-->>NOT NULL) 约束，第一次插入失败；第二个成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:00:20.260

如果该列的内容是唯一的（这似乎是 ID 的情况），则继续并将其设为主键，否则创建另一个数字列作为主键。

问候，

# ruby-on-rails - 如何将日期格式从 yyyy/mm/dd 更改为 dd/mm/yyyy Ruby on Rails

> ID：13761696
> 
> 赞同：0
> 
> 时间：2012-12-07T10:57:19.683
> 
> 标签：ruby-on-rails, ruby, date

```
<div class="field2">
<%= f.label :shod_date, "Date of last shoeing" %><br />
<%= f.date_select :shod_date %> 
```

有人可以告诉我要添加哪些代码以及我应该在哪里添加它们。还有我应该运行哪些命令。另外，我希望最初的年份可以追溯到 2007 年，因为起始年份从 2007 年开始，到 2012 年结束

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:08:00.523

尝试这个：

```
<%= f.date_select :shod_date,
    use_month_numbers: true,
    order: [:day, :month, :year],
    start_year: 2007,
    date_separator: "/" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:24:44.993

使用 shod_date.strftime("%d-%m-%Y")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:06:39.173

您可以使用[国际化 (I18n)](http://guides.rubyonrails.org/i18n.html)更改**日期格式**

只需在您的`config/locales/en.yml`：

```
en:
  date:
    order:
      - :day
      - :month
      - :year 
```

请注意，此示例适用于英语 ( `en`) 语言环境，您应该替换`en`为您的语言。

使用 i18n，您`date_select`将使用这种格式进行设置。如果您只想在这一点上更改顺序，请使用`order: [:day, :month, :year]`@hirata-yasuyuki 建议的属性。

要仅显示 2007 年和当前之间的年份，您可以设置两个属性：**`start_year`**和**`end_year`**帮助者`date_select`。

您的代码显示如下：

```
<%= f.date_select :shod_date, start_year: 2007, end_year: Time.now.year %> 
```

# python - 如何在 unittest.TestCase 中访问 unittest.main(verbosity) 设置

> ID：13761697
> 
> 赞同：22
> 
> 时间：2012-12-07T10:57:20.330
> 
> 标签：python, unit-testing

根据文档，我可以在调用时设置 python unittest 的详细级别`unittest.main`，例如

```
unittest.main(verbosity=2) 
```

如何在 ? 中访问此信息`unittest.TestCase`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-01T08:49:52.207

任何基于补丁或子类化的方法的问题`unittest.TestProgram`在于，您必须在开始之前将补丁安装到位`unittest.TestProgram`。但是，如果您的测试用例是通过发现运行的，那将是不可能的：

```
python -m unittest discover -v 
```

在发现情况下工作的一种方法是使用[`inspect`](https://docs.python.org/3/library/inspect.html)模块搜索堆栈，直到`unittest.TestProgram`找到方法：

```
import inspect
import unittest

def unittest_verbosity():
    """Return the verbosity setting of the currently running unittest
    program, or 0 if none is running.

    """
    frame = inspect.currentframe()
    while frame:
        self = frame.f_locals.get('self')
        if isinstance(self, unittest.TestProgram):
            return self.verbosity
        frame = frame.f_back
    return 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T12:43:25.833

实现此目的的一种方法是子类化`unittest.TestCase`并`unittest.main`在文件中。在这里，您定义一个变量（例如`globalverb`），可以全局使用，也可以作为类或单例使用，然后覆盖`unittest.main`：

```
def main(*args, **kwargs):

    # parse arguments etc to get the verbosity number or whatever
    # ...
    # set this number to the defined class
    globalverb = verbose_number
    return unittest.main(*args, **kwargs) 
```

稍后，您的子类`unittest.TestCase`：

```
class MyTestCase(unittest.TestCase):
    def my_special_function(self):
        if globalverb ... 
```

使用这种方法，可以在（派生的）TestCase 中使用详细、详细或任何其他数字和信息，从传递给单元测试的参数。

欢迎评论。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-23T11:18:18.917

我无法让 Martjin Pieters 的解决方案发挥作用，我认为是因为 unittest.main 在初始化时运行测试，然后将其结果分配给全局。

相反，我将我的初始化替换为：

```
    def new_parseArgs(self, argv):
        全局 old_parseArgs,verbosity
        old_parseArgs(self, argv)
        冗长 = self.verbosity

    如果 __name__ == '__main__'：
        # monkeypatch unittest.TestProgram.parseArgs() 以节省冗长
        # 在全局变量中
        old_parseArgs = unittest.TestProgram.parseArgs
        unittest.TestProgram.parseArgs = new_parseArgs

        单元测试.main()

```

在需要了解详细程度的测试用例中，我使用如下内容：

```
            全局冗长

    ...

            如果详细程度 >= 2：
                print("键的顺序：%s" % dd.keys())

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-10T15:55:41.420

我的解决方案完全不同。我没有使用猴子补丁，而是利用我所有的测试都是通过特制的启动脚本触发的。它收集了各种配置变量和设置环境，因此只需添加一个额外的导出就非常简单了。

对于更通用的情况，这可能是一个明智的解决方案，而不是直接运行测试，而是创建 test-runner.sh （或其他），它将进行完全相同的 shell 调用，但带有额外的 export 前缀。

因为一张图值千言万语：

这是我的测试跑步者：

```
#!/usr/bin/env bash

VERBOSE=false

while getopts ":vt:" opt; do
    case $opt in
        t)
            TEST_TO_RUN=$OPTARG
            ;;
        v)
            VERBOSE=true
            ;;
        \?)
          echo "Invalid option: -$OPTARG" >&2
          exit 1
          ;;
        :)
          echo "Option -$OPTARG requires an argument." >&2
          exit 1
      ;;
    esac
done

ENVS=""
ENVS+=" PYTHONPATH=$PYTHONPATH:$PWD"

PARAMS=""
PARAMS+=" -s --nologcapture --with-id"
PARAMS+=" --cov-config=.apirc --cov-report html --with-cov"

SERVER_PRIMER="coverage run --rcfile=.apirc"

if [[ ! -z "$TEST_TO_RUN" ]]; then
    PARAMS+=" $TEST_TO_RUN"
fi

if [[ "$VERBOSE" = true ]]; then
    PARAMS+=" -v"
    ENVS+=" TEST_VERBOSITY=2"
fi

eval "$ENVS nosetests $PARAMS"

RESULT_TEST=$? 
```

然后我在单元测试中有这个方法：

```
@property
def verbosity(self):
    return int(os.environ.get('TEST_VERBOSITY', 0)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-11T23:38:47.233

如果您只想访问该`-v`选项，您可以`self._resultForDoCleanups.showAll`在测试中检查它（继承自`unittest.TestCase`）。`-v`如果为该测试调用该字段，则该字段为真。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-30T20:25:32.653

爬上堆栈，找到由 unittest.main() 创建的“TestProgram”实例，然后访问详细字段：

```
class MyTestCase(unittest.TestCase):

    def test_verbosity(self):
        """Return current verbosity"""
        for f in inspect.getouterframes(inspect.currentframe() ):
            args, _,_, local_dict = inspect.getargvalues(f[0])
            if args: 
                first_arg = args[0] 
                first_value = local_dict[first_arg]
                if type(first_value).__name__ == "TestProgram":
                    return first_value.verbosity 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-06T13:59:24.503

这仅在通过命令行开关设置详细程度时才有效。

我将以下内容放在`test.py`文件的顶部：

```
verbose = sum(arg.count('v')
for arg in sys.argv if arg.startswith("-") and not arg.startswith("--")) 
```

在其他地方，我可以在代码中检查 的值`verbose`并相应地跟踪。例子：

```
if verbose > 2:
  sys.stderr.write("Some very noisy message\n")
  sys.stderr.flush() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-04T01:14:03.313

如果您总是从命令行运行，则只需解析来自`sys.argv`. 您可以手动执行（在列表中查找出现的“-v”、“-vv”等），但我通常更喜欢在源代码中查找相关的解析器并使用相同的版本（带有虚假的选项被剥离）。在你的情况下，这看起来像这样：

相关代码似乎在[这里](https://github.com/python/cpython/blob/daa0fe03a517d335d48e65ace8e5da636e265a8f/Lib/unittest/main.py#L167)。我们可以提取那段代码并得到以下信息：

```
 import argparse

    verbosity_parser = argparse.ArgumentParser(add_help=False)
    verbosity_parser.add_argument(
        '-v', '--verbose', dest='verbosity', 
        action='store_const', const=2,
        help='Verbose output')  # We could remove this if we want
    args, rest = verbosity_parser.parse_known_args()
    verbosity = args.verbosity 
```

## 编辑

我刚刚意识到解析器是多么简单。我习惯了有多个详细级别的 Django。在这种情况下，您可能只检查是否`{'-v', '--verbose'} & set(sys.argv)`或类似的东西。

如果您还想处理`--quiet`标志，只需添加另一个调用以`add_argument`使用该`argparse`方法，再次基于源代码：

```
 parser.add_argument('-q', '--quiet', dest='verbosity',
                        action='store_const', const=0,
                        help='Quiet output')  # this could be removed 
```

如果我们愿意，我们还可以处理看似隐含的默认值：

```
 if verbosity is None:
        verbosity = 1 
```

# objective-c - 对象 c - 从其他 2 个对象中释放作为所有者的对象

> ID：13761698
> 
> 赞同：2
> 
> 时间：2012-12-07T10:57:23.190
> 
> 标签：objective-c

通过研究目标 C 的内存管理，我有一个关于引用计数的问题：

我有一个对象名称 obj_number。我已经分配了

```
 obj_number = [[NSNumber alloc] init]; 
```

然后在这个类的另一个方法（名为A）中，我设置

```
 obj_number = [dataset objectAtIndex:0]; 
```

走出这个方法一个数据集将被自动释放。我出去后检查了这个方法obj_number也无法访问，也许它也被释放了。

我看看一个对象是否只是在一个所有权之下，所以如果父级解除分配它也被解除分配，但在我的情况下，我认为 obj_number 在 2 个所有权下（保留计数可能等于 2），那么为什么用完方法 A 它被释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:09:58.527

编辑：您使用的是非 ARC 吗？

在方法中，你可能有这样的：

```
-(void)A{
    ....
    obj_number = [dataset objectAtIndex:0];
    [dataset autorelease];
} 
```

在上面，您将 obj_number 的指针更改为指向`[dataset objectAtIndex:0]`.

根据你的`under 2 ownership (retain count may equals to 2)`

我希望你的意图是`copy`或`retain`这个值，对吧？

然后您只能使用`obj_number = [[dataset objectAtIndex:0] copy];//or retain`它的保留计数将增加到 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:16:07.123

您需要为 提供一个 setter 方法`obj_number`，您可以通过在文件中提供 a和`@property`在文件中提供 a 来实现。setter 方法将确保释放旧值并保留新值。`.h``@sythesize``.m`

MyClass.h：

```
@interface MyClass : NSObject
{
    NSNumber *_obj_number;    // Use a different name for the ivar and property!
    ...
}

@property (retain, nonatomic, readwrite) NSNumber *obj_number;

...

@end 
```

我的班级.m：

```
@implementation MyObject
@synthesize obj_number = _obj_number;

...

- (void)dealloc
{
    self.obj_number = nil;
    ...
    [super dealloc];
} 
```

分配给 时`obj_number`，您必须放弃所有权：

```
- (void)someMethod
{
    // We own myNumber, so release
    NSNumber *myNumber = [[NSNumber alloc] initWithUnsigned:12];
    self.obj_number = myNumber;
    [myNumber release];

    // However this is easier:
    self.obj_number = [NSNumber numberWithUnsigned:12];
}

- (void)someOtherMethod
{
    // We don't own [dataset objectAtIndex:0] so no need to release
    self.obj_number = [dataset objectAtIndex:0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:20:33.190

你不应该考虑保留计数。重要的是所有权。

```
obj_number = [[NSNumber alloc] init]; 
```

创建一个您拥有的新 NSNumber 实例。这意味着您必须在不再需要它时释放它。

```
obj_number = [dataset objectAtIndex:0]; 
```

这为您提供了一个您不拥有的对象。你不必释放它。如果您想要所有权，您必须向其发送保留消息，并且必须稍后释放它。

您的代码的另一点。如果你写这样的东西，你就有内存泄漏（如果你不使用 ARC）：

```
//obj_number = [[NSNumber alloc] init]; // returns nil, so no leak
obj_number = [[NSNumber alloc] initWithInt:1];
some code // No [obj_number release] or [obj_number autorelease] here
obj_number = [dataset objectAtIndex:0]; 
```

最后一行导致泄漏。在该行之后，obj_number 指向数据集中索引 0 处的对象，不再指向您在开始时分配的 NSNumber。

编辑：就像 trojanfoe 所说，在大多数情况下，最好使用属性，因为它们为您进行内存管理。

# git - Git历史页面修改问题 - 文本重叠

> ID：13761705
> 
> 赞同：0
> 
> 时间：2012-12-07T10:57:41.957
> 
> 标签：git, eclipse-plugin

我正在尝试将任务 ID 列添加到 Git 历史记录视图中。但得到以下问题

![历史错误](../Images/9803c289eb9a612fcddf9f9ff812d42f.png) [图片链接](http://www.uploadimage.in/di/RLVH/history_error.jpg)

如果您看到图像，则最后一列（任务 id）正在以一个字符的偏移量覆盖自身。它看起来与列数有关，因为当我通过重新排列进行实验时，最后一列总是有问题。

如果有人对此有任何想法，请告诉我。

**CommitGraphTable**类中添加的代码

```
private void createColumns(final Table rawTable, final TableLayout layout) {

...//existing code in the method
final TableColumn task = new TableColumn(rawTable, SWT.NONE);
task.setResizable(true);
task.setText(UIText.CommitGraphTable_TaskIdColumn);
// task.setWidth(50);
layout.addColumnData(new ColumnWeightData(5, 100, true));
} 
```

**CommitLabelProvider**类中添加的代码

```
public String getColumnText(final Object element, final int columnIndex) {

...//existing code in the method
if (columnIndex == 6){
    return (taskId);//$NON-NLS-1$
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:53:59.647

我错过了一个代码来更改。由 XXX 评论标记

```
private void createPaintListener(final Table rawTable) {
    // Tell SWT we will completely handle painting for some columns.
    //
    rawTable.addListener(SWT.EraseItem, new Listener() {
        public void handleEvent(final Event event) {
            if (0 <= event.index && event.index <= 6)
                    //XXX changed the index comparison from 5 to 6
                event.detail &= ~SWT.FOREGROUND;
        }
    }); 
```

# database - Phonegap如何在android上保存永久数据

> ID：13761707
> 
> 赞同：20
> 
> 时间：2012-12-07T10:57:51.420
> 
> 标签：database, cordova, local-storage

我正在寻找一种使用`PhoneGap`.

1.  `LocalStorage`
2.  文件输入/输出
3.  ?

我听说`LocalStorage`不是 100% 永久的，而是在胡同的某个地方。

我真的不喜欢从文件 I/O 开始，因为我需要的是创建一个包含食谱的数据库，并且它们需要保留。

“3号”是我要问的。有什么建议么？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-07T11:44:06.930

我正在使用本地存储，这是保留已保存数据的最佳解决方案。就像你说的，它不是 100% 永久的。就我而言，仅当您卸载应用程序时才会清除本地存储。使用 Phonegap 查找有关本地存储的更多信息 [http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#localStorage)

[您可以在http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)上获得有关 localstorage 的更多信息

您也可以使用数据库。您可以在 [http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#openDatabase找到这方面的信息](http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#openDatabase)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-01T20:33:34.267

如果您想**在应用程序卸载后将**数据永久存储在设备上，则必须在 iOS 和 android 上以不同的方式执行此操作。

在**iOS**上，您可以使用钥匙串[https://github.com/shazron/KeychainPlugin](https://github.com/shazron/KeychainPlugin)。

在**Android**上，您可以使用文件插件，并将数据存储在 SD 卡 (cordova.file.externalRootDirectory) 上。

在这两种情况下，即使用户重新安装应用程序，数据也会保留在设备上。

如果您使用的是 ionic（或只是 angular），则可以使用[ng-persist](https://github.com/AlexDisler/ng-persist)将这两个插件包装在一个 angular 服务中，并为 ios 和 android 提供相同的 API。

更多细节在这里[http://alexdisler.com/2014/04/23/persist-data-mobile-device-app-removed-uninstalled-cordova-ionic/](http://alexdisler.com/2014/04/23/persist-data-mobile-device-app-removed-uninstalled-cordova-ionic/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-26T11:12:59.810

您可以执行以下步骤来永久保存任何数据，

1.  您的 HTML 文件

    `<div id="deviceready">`

    ```
    <div id="result"></div> 
    ```

    `</div>`

2.  你的JS文件

    ```
    window.onload = function(){

        document.addEventListener("deviceready", init, false);
    }

    function init(){
     document.getElementById("signin").addEventListener("submit",login, false);
    }

    function saveData(){
      window.localStorage.setItem("header", 'Some Text Here');
    }

    function getData(){    
      document.getElementById("result").innerHTML = 
         window.localStorage.getItem("header");
      }
    } 
    ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-05T18:01:36.913

在 AppStore 中，当您发布应用程序的新版本时，所有存储在用户身上的数据都将被重置。在更新您的应用程序之前，您需要找到更好的方式来存储您的数据。

# api - 使用嵌套 AND 和 OR 进行 Twitter 搜索？

> ID：13761710
> 
> 赞同：2
> 
> 时间：2012-12-07T10:58:11.303
> 
> 标签：api, search, twitter

我想使用 Twitter 搜索 API 来查找包含以下内容的推文：

```
(keyword1 OR keyword2)

AND

(keyword3 OR keyword4) 
```

换句话说，应该总是有一个来自第一组的关键字，和一个来自第二组的关键字。这可能使用 Twitter 的标准搜索 API 吗？

我已经阅读了文档，但是并没有真正提到这种搜索。

# c# - “EntityFramework”组装错误

> ID：13761713
> 
> 赞同：0
> 
> 时间：2012-12-07T10:58:14.850
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

昨晚我的电脑在没有完全关机的情况下关闭，今天早上我在尝试访问我的 asp.net mvc 4 应用程序时遇到以下错误：

```
Could not load file or assembly 'EntityFramework' or one of its dependencies. 
Parâmetro incorreto. (Exception from HRESULT: 0x80070057 (E_INVALIDARG)) 
```

我正在寻找遮阳篷，我试图从临时目录中删除所有数据，清理解决方案并重建，更改了应用程序池，什么也没有

我需要一些建议，请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:04:20.847

我找到了删除 Visual Studio 找到的所有实体包并重新安装它们的解决方案。所有过程都是使用工具包管理器完成的 -> 包管理器

# wcf - 拦截不适用于 WCF 和 Ninject 3.0

> ID：13761714
> 
> 赞同：1
> 
> 时间：2012-12-07T10:58:14.947
> 
> 标签：wcf, ninject, ninject-interception

我对 Ninject 3.0 和拦截 WCF 方法有疑问。

我正在使用任务服务

```
<%@ ServiceHost Language="C#" Debug="true" Service="Fasade.TaskService"     Factory="Ninject.Extensions.Wcf.NinjectServiceHostFactory"%> 
```

我的配置是：

```
var settings = new NinjectSettings {LoadExtensions = false};
IKernel kernel = new StandardKernel(
   new NinjectSettings {LoadExtensions = false},
   new WcfModule(),
   new DynamicProxyModule()
);

kernel.Bind<ITaskService>().To<TaskService>().InRequestScope().Intercept().With(new ServiceInterceptor()); 
```

ServiceInterceptor 实现 IInterceptor，

当我将 UnitTest 用于内核时，ninject 将 DynamicProxy 对象用于 ITaskService 实现操作，但它在 WCF 中不起作用。

我不知道为什么 NinjectServiceHostFactory 不使用 DynamicProxy 和 Interception 来返回 ITaskService 的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:40:07.867

代替

```
kernel.Bind<ITaskService>().To<TaskService>().
    InRequestScope().Intercept().With(new ServiceInterceptor()) 
```

您应该将绑定更改为

```
Bind<TaskService>().ToSelf().
    InRequestScope().Intercept().With<ServiceInterceptor>(); 
```

因为在服务文件 .svc 中有实现

```
Service="Fasade.TaskService" 
```

# batch-file - 批处理命令根据喜好打开文件夹

> ID：13761717
> 
> 赞同：0
> 
> 时间：2012-12-07T10:58:21.187
> 
> 标签：batch-file, batch-processing

```
@echo off
start /wait /min C:\Folder1
start /wait /min C:\Folder2
start /wait /min C:\Folder3
start /wait /min C:\Folder4 
```

我想使用批处理文件让窗口打开文件夹并排列它们，如 Folder1 Folder2 Folder3 Folder4 等等......

相反，我得到了随机排列...例如 Folder2 Folder3 Folder1 Folder4

无论如何安排他们根据我的喜好打开？

谢谢。

PS 我正在使用 Windows 8 64 位仅供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:12:33.140

您可以通过`explorer`使用指定的路径调用它们来让它们按照调用它们的顺序出现

```
explorer C:\Folder1
explorer C:\Folder2
explorer C:\Folder3
explorer C:\Folder4 
```

# java - 在 Java 中序列化对象

> ID：13761720
> 
> 赞同：1
> 
> 时间：2012-12-07T10:58:35.657
> 
> 标签：java, serialization

我有以下Java类：

```
public class GetCardInfoRequest implements RequestBase, java.io.Serializable{

public String CardID;
public String CardUniqueID;
public String who;
public String pass;

public GetCardInfoRequest(){}
public GetCardInfoRequest(String id, String uniqueid, String who, String pass){
    CardID = id;
    CardUniqueID = uniqueid;
    this.who = who;
    this.pass = pass;
}

@Override
public RequestType getRequestType() {
    return RequestType.GetCardInfo;
}

public String getCardID() {
    return CardID;
}

public String getCardUniqueID() {
    return CardUniqueID;
}
} 
```

而且我在序列化方面遇到问题。我一直在阅读有关 java 序列化的教程，但它们似乎都暗示使对象可序列化就像简单地实现“java.IO.Serializable”接口一样简单，唯一需要注意的是没有不可序列化的字段班上。

正如您在此处看到的，我实现了 java.io.Serializable，并且我的所有字段都是简单的字符串（注意：我实现的“RequestBase”接口只是说该类必须具有 getRequestType 方法，仅此而已）。但是，当我尝试将类的实例序列化为字节数组时，如下所示：

```
ByteArrayOutputStream b = new ByteArrayOutputStream();
    ObjectOutputStream o = new ObjectOutputStream(b);
    o.writeObject(req);
    request = b.toByteArray(); 
```

引发了“Java.io.NotSerializableException”。（在第 3 行）

我敢肯定这是微不足道的，但由于所有教程都非常通用，我不明白这个非常简单的代码有什么问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:15:23.697

`NotSerializableException`仅在类未实现时才抛出它的状态`Serializable`。该消息还应该是无法序列化的类的名称。可能的问题是：

*   您没有传递您认为正在传递的对象（异常的消息是什么？）
*   您正在使用过期的 GetCardInfoRequest 类文件运行（尝试干净的构建）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-25T22:01:36.157

Java中对象的序列化意味着将对象更改为一些字节。因此，您可以保存这些字节并通过反序列化读取对象。请注意，此操作独立于平台和 JVM。因此，您可以在一个平台上序列化对象并在另一个平台上反序列化它。总之，serialize 将对象转换为字节，反序列化将字节转换为对象。为了实施这些行动。您需要具有可序列化的对象：

```
public class Coordinate implements java.io.Serializable{
    int x;
    int y;
    Coordinate(int x, int y){
        this.x = x;
        this.y = y;
    }
} 
```

你需要实现序列化和反序列化方法：

```
import java.io.*;

public class SerializeDeserializeExample {

    public static void main(String [] args) {
        Coordinate c = new Coordinate(10,77);

        //Serialize
        try {
            FileOutputStream fileOut =
                    new FileOutputStream("coordinate.ser");
            ObjectOutputStream out = new ObjectOutputStream(fileOut);
            out.writeObject(c);
            out.close();
            fileOut.close();
            System.out.printf("Serialized data is saved in coordinate.ser");
        }catch(IOException i) {
            i.printStackTrace();
        }

        //Deserialize
        Coordinate d = null;
        try {
            FileInputStream fileIn = new FileInputStream("coordinate.ser");
            ObjectInputStream in = new ObjectInputStream(fileIn);
            d = (Coordinate) in.readObject();
            in.close();
            fileIn.close();
        }catch(IOException i) {
            i.printStackTrace();
            return;
        }catch(ClassNotFoundException e) {
            System.out.println("Coordinate class not found");
            e.printStackTrace();
            return;
        }

        System.out.println("Deserialized coordinate...");
        System.out.println("x: " + d.x);
        System.out.println("y: " + d.y);
    }

} 
```

欲了解更多信息，请访问：[https](https://github.com/m-vahidalizadeh/foundations/blob/master/src/algorithms/SerializeDeserializeExample.java) ://github.com/m-vahidalizadeh/foundations/blob/master/src/algorithms/SerializeDeserializeExample.java 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:17:18.077

好吧，我觉得自己像个白痴，但是重新启动 Eclipse 解决了问题-_-

抱歉浪费了你们的时间，但我已经习惯了 Visual Studio，这是我第一次使用这个 IDE，可能做了一些我不应该做的事情（我必须说它比 VS 更令人困惑）。

再次感谢您的帮助，也很抱歉浪费您的时间。

# python - Python 正则表达式编译（使用 re.VERBOSE）不起作用

> ID：13761723
> 
> 赞同：9
> 
> 时间：2012-12-07T10:58:41.193
> 
> 标签：python, regex

我试图在编译正则表达式时添加注释，但是当使用 re.VERBOSE 标志时，我不再得到匹配结果。

（使用 Python 3.3.0）

前：

```
regex = re.compile(r"Duke wann", re.IGNORECASE)
print(regex.search("He is called: Duke WAnn.").group()) 
```

输出：杜克万

后：

```
regex = re.compile(r'''
Duke # First name 
Wann #Last Name
''', re.VERBOSE | re.IGNORECASE)

print(regex.search("He is called: Duke WAnn.").group())` 
```

输出：AttributeError：“NoneType”对象没有属性“组”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T11:01:45.243

空格被忽略（即，你的表达式是有效的`DukeWann`），所以你需要确保那里有一个空格：

```
regex = re.compile(r'''
Duke[ ] # First name followed by a space
Wann #Last Name
''', re.VERBOSE | re.IGNORECASE) 
```

请参阅[http://docs.python.org/2/library/re.html#re.VERBOSE](http://docs.python.org/2/library/re.html#re.VERBOSE)

# google-chrome - css 中的省略号在 Firefox (16.0.2) 中有效，但在 Chrome (22.0.1229.94) 中无效

> ID：13761725
> 
> 赞同：10
> 
> 时间：2012-12-07T10:58:49.213
> 
> 标签：google-chrome, ellipsis, css

我有以下html：

```
<div class="x">
    <div class="y" title="aaaaa">
        <a href="/">
            aaaaa
        </a>
    </div>
    <div class="y" title="bbbbbb">
        <a href="/">
           bbbbbb
        </a>
    </div>
    <div class="y" title="ccccc">
        <a href="/">
            ccccc
        </a>
    </div>
    <div class="y" title="dddddddd">
        <a href="/">
            dddddddd
        </a>
    </div>
</div> 
```

使用CSS：

```
.x{
    width: 10em;
    background-color: #FFB9B9;
    white-space: nowrap;
    overflow: hidden; 
    text-overflow: ellipsis;
}
.y {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 18px;
    font-weight: bold;
    line-height: 18px;
    white-space: nowrap;    
    background-color: #E1CECE;
    display: inline-block;
} 
```

你可以在这里看到：http: [//jsfiddle.net/fDBbm/](http://jsfiddle.net/fDBbm/)

省略号从一开始就在 Firefox (16.0.2) 中有效，但在 Chrome (22.0.1229.94) 中无效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:40:14.583

这是一个源于使用`display:inline-block`and的错误`text-overflow: ellipsis`。不幸的是，当配对/一起使用时，Chrome 无法正确处理这些属性。

几个月前报告了该错误：[http ://code.google.com/p/chromium/issues/detail?id=133700](http://code.google.com/p/chromium/issues/detail?id=133700)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T06:36:54.670

作为一种解决方法，您可以使用`display:inline`而不是`display:inline-block;`

**[小提琴](http://jsfiddle.net/danield770/fDBbm/5/)**

但是，这会导致单个 'y' 元素失去其背景颜色......

所以要解决这个问题，我们可以添加：

```
.y:after {
    content: '';
    display: inline-block;
} 
```

**[小提琴](http://jsfiddle.net/danield770/fDBbm/6/)**

现在它可以在 FF 和 Chrome（以及顺便说一句，IE）中工作。

# php - 模型、库、核心、钩子、助手文件夹的使用和教程

> ID：13761727
> 
> 赞同：0
> 
> 时间：2012-12-07T10:58:54.740
> 
> 标签：php, codeigniter

这是关于 Codeigniter 的一个非常基本的问题。我正在从他们的网站上阅读 Codeigniter 关于模型、库等文件夹用途和使用的官方文档。但是，它仍然让我困惑何时使用它们中的每一个。图书馆和助手有什么区别？如果有人可以为我提供每个链接或明确的定义以及使用示例，那就太好了。

此外，我想在库文件夹下创建一个用于测试的简单库类，因此我创建了 Test.php 文件，它包含

```
<?php

class Core{

    public function __constructor(){
        echo 'worked';
    }

    public function test(){
           return 'Test function';
    }

} 
```

在我的控制器中，我尝试使用 $this->load->library('core'); 调用它 但它不起作用。另外，如何从 Core 库中调用 test() 函数？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:31:50.220

模型对象是应用程序中实现领域逻辑的部分，也称为业务逻辑。通常用于与您的数据库交互。

库是可以在您的应用程序中使用的类。

助手更像是可以实现的独立功能。

关于您对图书馆的使用。
CI 中的库与类具有相同的文件名，因此要么将文件重命名为 core.php，要么将类的名称更改为 Test。
一旦您加载了库（直接或使用自动加载 - 在配置文件夹中找到），它就会被添加到 CI 超级对象中。然后，您可以像这样访问它；$this->core->test();
注意我不确定核心是否是在 Codeigniter 中使用的安全名称。

# .net - .Net Winform 按钮作为 FoxPro C00005 错误的 COM

> ID：13761730
> 
> 赞同：1
> 
> 时间：2012-12-07T10:59:01.820
> 
> 标签：.net, com, foxpro, visual-foxpro

根据您可以在网上找到的指南（例如来自 rick strahls 博客），我们为 foxpro（9 和 SP）创建了一个 .net (3.5) COM 控件

现在有时在 foxpro 中，我们在释放对象时会得到 C000005。

所以我们试图重现这个场景。当实例化和释放对象一百/千次时，我们得到了同样的错误。

我们使用一个空的 FoxPro SCX 表单和一个没有任何代码的简单 .net 按钮。

如果我们不处理 .net 对象，我们会得到一个类似的 .net 异常“尝试读取或写入受保护的内存”

“。（完整的例外见底部）

这里是 VFP 代码：

```
Local lnAnzahl as Number, ;
 lni as Number

set procedure to DummyProcedure.prg

lnAnzahl = val(inputbox("wie oft", "oft","0"))

for lni = 1 to lnAnzahl
 thisform.newobject("cntTest","netcontrol","c0005nativetest.vcx")
 thisform.RemoveObject("cntTest")     
endfor 
```

.net 错误消息

> System.AccessViolationException: Es wurde versucht, im geschützten Speicher zu lesen oder zu schreiben。Dies ist häufig ein Hinweis darauf, dass anderer Speicher beschädigt ist。在 System.Runtime.InteropServices.ComTypes.IAdviseSink.OnViewChange(Int32 aspect, Int32 index) 在 System.Windows.Forms.Control.ActiveXImpl.ViewChanged() 在 System.Windows.Forms.Control.ActiveXImpl.ViewChangedInternal() 在 System. Windows.Forms.Control.OnInvalidated(InvalidateEventArgs e)
> 北 System.Windows.Forms.Control.NotifyInvalidate(矩形 invalidatedArea) 北 System.Windows.Forms.Control.Invalidate(Boolean invalidateChildren)
> 北 System.Windows.Forms.Control.WmUpdateUIState(Message& m) 北 System.Windows.Forms.Control.WndProc(Message& m) 北 System.Windows.Forms.ScrollableControl.WndProc(Message& m) 北 System.Windows.Forms.ContainerControl .WndProc(Message& m) 在 System.Windows.Forms.UserControl.WndProc(Message& m) 后面是 System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m) 在 System.Windows.Forms.Control.ActiveXImpl.System.Windows 后面.Forms.IWindowTarget.OnMessage(Message& m) bei System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
> bei System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

这是一个已知问题吗？任何建议我们如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T16:57:38.637

我们在生产环境中遇到过这个错误。

显然，从 VFP 环境中真正释放 .NET COM 组件是不可能的：它一直保存在内存中，直到应用程序停止。

Rick Strahl 为我们在这里遇到的问题提供了一个非常优雅的解决方案：

[在 Visual FoxPro 中托管 NET 运行时](http://weblog.west-wind.com/posts/2007/Jul/01/Hosting-the-NET-Runtime-in-Visual-FoxPro)

...链接到讨论这些问题的其他帖子，总结如下：

> .NET 运行时锁定到 VFP：一旦加载了 .NET COM 组件，就无法完全卸载该组件。这意味着在 .NET COM 开发期间，您必须关闭 Visual FoxPro 才能重新加载 .NET COM 组件。
> 
> .NET 组件可能不会卸载相关资源：.NET 垃圾收集器会清理正在运行的 .NET 实例内部的对象和对象状态。这意味着当您删除对象时，实际对象及其相关资源可能会立即卸载。例如，如果您加载具有关联内存缓冲区的位图对象，并简单地清除引用，则关联的内存缓冲区数据不会立即释放。使用 Dispose() 方法（如果可用）可以帮助显式卸载相关资源。
> 
> 并非所有类型都可以在 Visual FoxPro 中工作：某些数据类型——特别是值类型和一些专门的集合类型——在通过 COM 访问时在 Visual FoxPro 中不起作用。此外，某些从 COM 传递到 Visual FoxPro 的数组类型无法修改并与新的或删除的元素一起发回。
> 
> 将类型从 FoxPro 传递到 .NET 通常不是类型安全的：除非您有传递给 .NET 的 VFP COM 组件，否则您不能轻松地将在 Visual FoxPro 中创建的强类型对象传递给 .NET。FoxPro 对象作为通用“对象”引用传递，并且在大多数情况下必须使用反射访问。

# c# - 异步 CTP + Postsharp

> ID：13761732
> 
> 赞同：1
> 
> 时间：2012-12-07T10:59:06.030
> 
> 标签：c#, .net, async-await, postsharp, async-ctp

两个框架的组合有什么限制吗？（在 vs2012 中）

搜索并没有找到任何有效信息。我可以使用异步等待，通常与 PostSharp 一起使用？我专门指“OnMethodBoundaryAspect”和类似的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:59:54.563

显然有效。由于使用了此处提到的任务，因此仅是必要的谨慎：

[http://theburningmonk.com/2012/11/aop-using-postsharp-attributes-with-async-tasktaskt-methods/](http://theburningmonk.com/2012/11/aop-using-postsharp-attributes-with-async-tasktaskt-methods/)

# php - 如何将 100.50 之类的数字四舍五入到 101？

> ID：13761733
> 
> 赞同：-2
> 
> 时间：2012-12-07T10:59:04.753
> 
> 标签：php

有没有办法将 PHP 数字四舍五入，例如 100.50 到 101

或 100.47 到 101 以便点之后的任何内容都被四舍五入到下一个正数？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:00:28.997

您必须使用[ceil 功能](http://php.net/manual/fr/function.ceil.php)

```
<?php
echo ceil(4.3);    // 5
echo ceil(9.999);  // 10
echo ceil(-3.14);  // -3
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:03:30.707

ceil() 函数返回向上舍入到最接近整数的数字值。

**语法**ceil(x)

**例子**

```
<?php
echo(ceil(0.60) . "<br />");
echo(ceil(0.40) . "<br />");
echo(ceil(5) . "<br />");
echo(ceil(5.1) . "<br />");
echo(ceil(-5.1) . "<br />");
echo(ceil(-5.9))
?> 
```

**输出**

```
1
1
5
6
-5
-5 
```

# c++ - 具有多个读取器/写入器 (MPMC) 的无锁分块环形缓冲区可能吗？

> ID：13761734
> 
> 赞同：0
> 
> 时间：2012-12-07T10:59:11.880
> 
> 标签：c++, c, queue, fifo, lock-free

对于我当前的项目，我想实施或（更好地重用）一个

**可变大小数据包的有界分块环形缓冲区。**

每个读者都应该维护自己的读指针；这意味着每个阅读器都应该阅读所有数据包（如果阅读速度足够快）。如果写入器赶上读取器，则读取器指针应向前移动到下一个有效数据包。

在寻找现有的作品和论文时，我发现了各种无锁队列、FIFO 等，但这些都没有实现上述语义！

是否知道实现这种语义的现有实现，或者可能适合支持它？

非常欢迎有用的指点！

# database - 即使我使用 ContentProvider，也无需事先关闭（）消息即可完成游标

> ID：13761735
> 
> 赞同：3
> 
> 时间：2012-12-07T10:59:13.430
> 
> 标签：database, cursor, android-contentprovider

我使用`ContentProvider`但有时我会收到标题中写的信息。是什么原因？我读到如果我在关闭游标之前关闭数据库，则会出现此消息。我还读到，如果我使用，我不应该注意关闭光标`ContentProvider`

链接：[在 ContentProvider 中关闭数据库](https://stackoverflow.com/questions/4547461/closing-the-database-in-a-contentprovider)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T21:17:34.660

确实，使用 ContentProvider 时不必关闭数据库，但这不适用于游标。您必须使用`getContentResolver().query()`which 返回游标。最终，您将不得不用 关闭返回的光标`.close()`，否则您将收到该讨厌的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T14:20:09.343

使用如下代码在严格模式下运行

```
 StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
             .detectDiskReads()
             .detectDiskWrites()
             .detectNetwork()   // or .detectAll() for all detectable problems
             .penaltyLog()
             .build());
     StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
             .detectLeakedSqlLiteObjects()
             .detectLeakedClosableObjects()
             .penaltyLog()
             .penaltyDeath()
             .build()); 
```

这开始产生可关闭的东西等。因此有助于调试错误产生的位置。

来源：[https ://developer.android.com/reference/android/os/StrictMode.html](https://developer.android.com/reference/android/os/StrictMode.html)

# sql-server-2008 - SQL Server 2008 导入向导

> ID：13761736
> 
> 赞同：1
> 
> 时间：2012-12-07T10:59:33.913
> 
> 标签：sql-server-2008

CSV 文件包含 3 个缺失（329 列），我正在尝试使用导入向导加载。但它不是导入数据，而是引发“意外且不可恢复”的错误

我也更改了 db 属性的事务日志，它不工作请建议我。

# f# - 为什么一个变量可以在一个模式中绑定两次？

> ID：13761741
> 
> 赞同：19
> 
> 时间：2012-12-07T10:59:52.040
> 
> 标签：f#, pattern-matching

通常，F# 不允许模式变量在同一模式中出现两次。但是在下面的代码中，F# 没有抱怨——这是一个错误吗？

```
type foo = { A: int }
let test (x, {A = x}) = x
let result = test ("bla", {A = 3}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T17:46:32.453

我不认为这是一个错误，虽然它看起来令人困惑，但这只是编译器编译上述值绑定的方式。

第 14.6.3 节指出，如果值定义不是单值模式（如这里的情况），则详细表达式为

```
tmp <typars1… typarsn> = expr
ident1 <typars1> = expr1
…
identn <typarsn> = exprn 
```

其中 tmp 是一个新的标识符，每个 expri 都是针对输入 tmp [来自[规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335819040)] 模式 pat (§7) 的编译结果。

要查看编​​译器做了什么，我们可以使用 F# 引号，例如：

```
<@ let test (x:int, {A = x:int})= x in test (3, {A = 5}) @>;; 
```

在字符串格式中，我得到（留下一些东西）：

```
Let (test,
     Lambda (tupledArg,
             Let (x, TupleGet (tupledArg, 0),
                  Let (_arg1, TupleGet (tupledArg, 1),
                       Let (x, PropertyGet (Some (_arg1), A, []), x)))),
     Application (test, NewTuple (Value (3), NewRecord (foo, Value (5))))) 
```

这就是为什么我们得到“内部”x。

我不认为这是一个错误，但如果这会产生警告，它可能会更加一致。

# hadoop - 在多租户 hadoop 安装中控制 IOPS

> ID：13761742
> 
> 赞同：0
> 
> 时间：2012-12-07T10:59:56.277
> 
> 标签：hadoop

今天的调度程序更多地基于基于内核的潜水 MEM/CPU 来模拟映射/减少插槽。但是可以使用什么样的防护技术来确保控制 IOPS，从而我映射器不会接管 IO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:13:11.327

我不知道 hadoop 这样做的能力。必须注意的是，如今与资源管理有关的 Yarn 能够仅考虑内存。
我会尝试推测为什么会这样：
a) 很难预测这项工作需要多少 IO/CPU。在不知道的情况下 - 不可能限制
b) 考虑到多种类型的资源的调度问题将更加困难

# c# - 在一个视图中更新标题记录或添加行记录

> ID：13761743
> 
> 赞同：0
> 
> 时间：2012-12-07T10:59:59.480
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我有一个显示`HeaderModel`详细信息的视图。在此下方显示`LineModel`与此标题关联的 s。

有些`LineModel`字段是必需的。

我的问题是在更新标题时`ModelState.IsValid`是错误的，因为`LineModel`没有填写新的某些字段。

我怎样才能解决这个问题并允许更新标题并在一个视图中添加行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:03:51.560

如果我理解得很好，您可以使用绑定排除：

```
public ActionResult Update([Bind(Exclude = "LineModelNameProperty")]HeaderModel model){

} 
```

# android - 泰米尔语日历视图

> ID：13761752
> 
> 赞同：6
> 
> 时间：2012-12-07T11:00:17.180
> 
> 标签：android, calendar, tamil

如何在日历视图中设置泰米尔语日期，在我的应用程序中设置泰米尔语字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:53:33.067

您可以将泰米尔语变量名称和所有其他 GUI 文本放在泰米尔语中。只需将所有这些都放在项目（基于 Eclipse 的项目）的***values 文件夹（在 res 文件夹内）内的******string.xml***文件中。你必须在这里声明你的泰米尔语变量，它工作正常。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:27:47.893

不幸的是，谷歌语言环境不支持泰米尔语。因此，您需要为泰米尔语创建自己的语言环境，然后使用它来创建您的日历。这当然会非常乏味。*

# iphone - 我可以将图像从 FTP 加载到我的 iphone 应用程序中的图像视图吗

> ID：13761756
> 
> 赞同：-2
> 
> 时间：2012-12-07T11:00:26.703
> 
> 标签：iphone, objective-c, ios, ftp, uiimageview

我在 FTP 中有一些图像，我需要在我的 iphone 应用程序的图像视图中显示这些图像，是否可以在不下载图像的情况下加载图像，只需将 FTP 图像 URL 加载到图像视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:13:35.823

有一个很酷的库叫做[SDWebImage](https://github.com/rs/SDWebImage)。它异步下载图像，因此您的应用程序保持响应。它向 UIImageView 添加了一个类别，因此您只需将 url 传递给 ImageView，一切都会自动为您完成。它也适用于`ftp://`url。

像这样的东西应该工作：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f,0.0f,50.0f,50.0f)];

[imageView setImageWithURL:[NSURL URLWithString:@"ftp://example.com/path/image.jpeg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

您还可以指定在未下载图像时显示的占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:10:10.047

查看 Apple 的[简单 FTP 示例](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009243)。

一旦您有权访问 FTP 服务器：

```
NSURL *theUrl = [NSURL URLWithString:@"ftp://userid:password@your.server/image.png"];
UIImage *newImage = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:url]];
UIImageView *newImageView = [UIImageView imageViewWithImage:newImage]; 
```

请记住，此过程需要时间，因此请在后台线程上进行工作以确保应用程序的响应能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:04:16.027

是的，您可以只使用 FTP URL 来加载图像。

# jquery - jQuery隐藏文本，悬停显示？

> ID：13761762
> 
> 赞同：5
> 
> 时间：2012-12-07T11:00:50.480
> 
> 标签：jquery, hover, displayobject

希望只是一个快速的问题:)

我正在尝试编写有助于做到这一点的小 jQuery：

*   页面上显示的文本：CA
*   鼠标悬停时显示的文本：加利福尼亚州

不幸的是，我设法以错误的方式做到了这一点，我知道我需要使用 .hide() 函数，但我就是不知道如何使用它。抱歉，我对 jQuery 很陌生，只是想了解一下。

这是我制作的一个 jfiddle[链接](http://jsfiddle.net/liamtarpey/UttAa/)，最好是文本从右侧滑入。我尝试过使用跨度，但在不同的 div 中使用 p 标签似乎效果更好。我知道我需要将 HTML 全部放在一行上，以消除 CA 和 LIFORNIA 之间的小空间。有人可以帮忙吗？

HTML：

```
<div class="state">
     <p>CA</p>
</div>
<div class="state-full">
     <p>LIFORNIA</p>
</div> 
```

CSS：

```
.state, .state-full {
     display: inline-block;
     cursor: pointer;
} 
```

jQuery：

```
$('.state').hover(function() {
     $('.state-full').slideToggle(100, 'linear');
     $('.state-full').display(100, 'linear');
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:18:20.667

您拥有的代码可以正常工作，您只需要稍微修改您的 HTML 和 CSS 以使其更具语义。尝试这个：

```
<div class="state">      
    <span>CA</span>
    <span class="state-full">LIFORNIA</span>
</div> 
```

```
.state, .state-full { cursor: pointer; }
.state-full { display: none; }
.state span { float: left; } 
```

```
$('.state').hover(function() {
    $('.state-full', this).slideToggle(100, 'linear').display(100, 'linear');
}); 
```

请注意，我向选择器添加了一个上下文，因为我假设您将在页面上拥有多个上下文。

[**示例小提琴**](http://jsfiddle.net/WP8ca/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T11:08:17.073

尝试这个：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.state').mouseenter(function () {
            $(this).html("CALIFORNIA");
        });
        $('.state').mouseleave(function () {
            $(this).html("CA");
        });
    });
</script> 
```

希望能帮助到你 ：）

# php - php sql 负数天数结果

> ID：13761763
> 
> 赞同：0
> 
> 时间：2012-12-07T11:00:55.793
> 
> 标签：php, sql

只是想知道为什么 $days 给了我 -0.511111111111 天。$dc_time->fields[0] 的值为 2012-12-07 12:16:00。有人可以解决问题吗？谢谢。

```
$dc_date = $dc_time->fields[0];
$today = date('Y-m-d');

$dc_date = strtotime($dc_date);
$today = strtotime($today);
$delta = $today - $dc_date;
$days= ($delta/86400); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:23:29.783

您的`$today`变量没有获取时间，因此将其设置为默认值（午夜）。

要么给你一点时间`$today`：

```
$dc_date = $dc_time->fields[0];
$today = date('Y-m-d H:i:s');

$dc_date = strtotime($dc_date);
$today = strtotime($today);
$delta = $today - $dc_date;
$days= ($delta/86400); 
```

或者，如果您实际上不需要它，只需立即获取时间戳：

```
$dc_date = $dc_time->fields[0];

$dc_date = strtotime($dc_date);
$today = time();
$delta = $today - $dc_date;
$days= ($delta/86400); 
```

您的脚本认为时间在未来，因为`$today`将是 [今天日期] 上午 00:00:00。我希望这有帮助。

# sql-server - 如何使用 SQL Server 中的列值查找列和表名？

> ID：13761768
> 
> 赞同：0
> 
> 时间：2012-12-07T11:01:17.300
> 
> 标签：sql-server, tsql

在 T-SQL 中，如果只知道一列的值说：“法拉利”，那么是否可以使用任何查询或技巧知道列名表名、数据库名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:06:21.570

并不是说这是最佳的，但这会找到值为“法拉利”的列的表名、模式和列名

```
-- I will use a PROC so we create a table-type
create type Meta as table (rid int identity primary key, ts varchar(100), tn varchar(100), cn varchar(100))

--Now create the proc
    create proc [dbo].[foo] 
(   
    @t Meta readonly,
    @v varchar(50)
)
AS
begin
    declare @max int
    declare @c bit
    declare @i int
    declare @ts varchar(100)
    declare @tn varchar(100)
    declare @cn varchar(100)
    declare @q nvarchar(max)

    set @max = (select max(rid) from @t);
    set @c = 0;
    set @i = 0;
    while(@i <= @max)
    begin
        set @i += 1;
        select @ts = ts, @tn = tn, @cn = cn from @t where rid = @i;
        set @q = N'select @p0 = 1 from ' + @ts + '.' + @tn + ' where ' + @cn + '=@p1;';
        exec sp_executesql @q, N'@p0 bit out, @p1 varchar(50)', @p1=@v,@p0=@c out
        if(@c > 0)
        begin
            set @c = 1;
            break;
        end
    end

    if(@c = 1)
        select @ts + '.' + @tn + '.' + @cn;
    else
        select null;
end

-- Now use it
declare @v varchar(50)
set @v = 'Ferrari'

declare @t Meta
insert into @t
select
    c.TABLE_SCHEMA, c.TABLE_NAME, c.COLUMN_NAME
from INFORMATION_SCHEMA.COLUMNS c
where
    c.DATA_TYPE like '%varchar'
    and c.CHARACTER_MAXIMUM_LENGTH >= len(@v)

exec dbo.foo @t = @t, @v = @v 
```

# jquery - jQuery选择器的奇怪问题

> ID：13761773
> 
> 赞同：3
> 
> 时间：2012-12-07T11:01:31.997
> 
> 标签：jquery, jquery-selectors

我有一个包含以下字符串的变量：

```
var html = '<a href="http://www.taxibooking.dch/wp-content/uploads/2012/12/4-3.jpg"><img src="http://www.taxibooking.dch/wp-content/uploads/2012/12/4-3-300x202.jpg" alt="" title="4 (3)" width="300" height="202" class="alignnone size-medium wp-image-7" /></a>'; 
```

然后我尝试使用以下两个操作：

```
full_url = jQuery('a', html).attr('href');
tiny_url = jQuery('img', html).attr('src'); 
```

虽然`tiny_url`工作正常并返回值始终为空`http://www.taxibooking.dch/wp-content/uploads/2012/12/4-3-300x202.jpg`。`full_url`

谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:05:46.127

那是因为`a`元素不在*您*传递的 html 中，而是在第一级。

你可以这样做：

```
full_url = jQuery('a', '<div>'+html+'</div>').attr('href'); 
```

但定义和重用 jQuery 对象会更有效：

```
var $div = $('<div>'+html+'</div>');
full_url = jQuery('a', $div).attr('href');
tiny_url = jQuery('img', $div).attr('src'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:08:13.847

问题 id 因为`a`是包含元素，所以 jQuery 试图`a`在第一个元素中找到一个元素`a`，显然什么也不返回。

相反，您可以`filter()`像这样使用：

```
var full_url = jQuery(html).filter('a').attr('href');
var tiny_url = jQuery(html).find('img').attr('src'); 
```

[**示例小提琴**](http://jsfiddle.net/NavFu/)

或者，您可以将 HTML 包装在 a 中`div`并保持 jQuery 原样。

```
$html = jQuery('<div>' + html + '</div>');
full_url = jQuery('a', $html).attr('href');
tiny_url = jQuery('img', $html).attr('src'); 
```

# azure - SQL Azure 联合的标识替代方案：Azure 队列或服务总线队列是一个不错的选择吗？

> ID：13761783
> 
> 赞同：2
> 
> 时间：2012-12-07T11:02:14.010
> 
> 标签：azure, azure-sql-database, federation, azure-queues

与许多开发人员一样，我正在寻找一种将现有应用程序集成到 SQL Azure 联合的方法，而替换身份列（我的表的主键）是一个大问题。

由于许多原因，我不想将 GUID 用作我的主键（请不要打开关于 GUID 的辩论，这不是我的问题：我只是不想要 GUID，句号）。

因此，我需要构建一个密钥提供程序来替换标准 SQL 数据库的“身份”功能。我正在使用实体框架，所以我可以很容易地找到一个`Id`在插入之前设置值的地方（通过覆盖`SaveChanges`我的`ObjectContext`类的方法）。我只需要找到一个“不太复杂”的实现来获取当前的 ID，即“农场就绪”。

我已经阅读了这篇 SO 帖子：“[分片数据库（Azure 联合数据库）的 ID 生成](https://stackoverflow.com/questions/9320174/id-generation-for-sharded-database-azure-federated-database)”和“来自 MSDN 杂志[的在 Windows Azure 中同步多个节点](http://msdn.microsoft.com/en-us/magazine/gg309174.aspx)”，但这个解决方案对我来说听起来有点复杂。

我正在考虑为每个 SQL 表创建（自动）一个 azure 队列，其中包含一个预加载的连续整数列表。当我想要一个 Id 值时，我只需要从队列中获取一条消息（它变得不可见并在途中被删除），这给了我当前可用的 Id。

关于“Windows Azure Queues”和“Windows Azure Service Bus Queues”之间的选择，我更喜欢“Windows Azure Queues”，因为[Service Bus Queues 的“高”延迟](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)。我不认为 Azure Queues 缺少“订购保证”是个问题。

**您如何看待使用 Azure 队列提供 Id 值的想法？**你有没有看到任何放弃这个想法的论据？在 SQL Azure 联合数据库中提供整数 id 是否有更好的想法，甚至是好的做法？谢谢。

**编辑 ：**

阿斯塔科夫建议[使用 SnowMaker](http://blog.tatham.oddie.com.au/2011/07/14/released-snowmaker-a-unique-id-generator-for-azure-or-any-other-cloud-hosting-environment/)。我终于完成了[SnowMaker](https://bitbucket.org/jyl2002/snowmaker-compatible-with-azure-storage-lib-v2)的一个分支，以与 Azure 存储库的 v2 完全兼容。

**编辑 2**

请注意，***Azure SQL Federation 将于 2015 年 9 月***停用，包括 Web 层和业务层，如此[处](http://msdn.microsoft.com/library/azure/dn741330.aspx)所述。但是这个问题对于自定义分片解决方案仍然有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:02:45.810

[造雪机](http://blog.tatham.oddie.com.au/2011/07/14/released-snowmaker-a-unique-id-generator-for-azure-or-any-other-cloud-hosting-environment/)

虽然从未在生产中尝试过，但似乎相当合理和可靠。

**更新**

两件事：您可以安全地参考 Azure Storage Client 1.7.XX 和 Azure.Storage 2.X 以使 SnowMaker 工作。或者像您一样修复它以与 Storage 2 一起使用。

作为旁注，我个人认为身份并不能解决任何问题，它甚至引入了这样的问题（但我仍然使用它）。考虑到它赋予我们的权力和规模，不要认为缺乏身份是联邦的劣势。为了事情大，我们必须摆脱由数字自动生成的传统思维。

不幸的是，我还没有与联邦合作的实际项目经验，但我真的很想尝试一下。我知道有使用联合的大型应用程序部署并且可大规模扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:48:23.790

另一个选择是[RustFlakes](https://github.com/peschkaj/rustflakes)项目。它提供了一种在分布式系统中生成唯一的、连续的 ID 而不会相互冲突的方法。它们与 GUID（128 位）大小相同，但由于它们是连续的，因此不会导致您在使用 GUID 时遇到的所有页面拆分、索引和相关问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T02:43:59.360

不确定这是否对您有用，因为它不是 C#，但我已使用 0.3.3 版本的 Nodejs Azure Storage SDK 将 Snowmaker 移植到 Nodejs。

您可以使用 npm 安装它：

> `npm install snowmaker`

Github 存储库是[https://github.com/johnhamm/node-snowmaker](https://github.com/johnhamm/node-snowmaker)

# java - Android - 使用两个 xml 文件显示单个 Activity

> ID：13761785
> 
> 赞同：0
> 
> 时间：2012-12-07T11:02:18.037
> 
> 标签：java, android, android-layout, android-xml

我开发`Android`了一些具有通用 UI 格式的屏幕的应用程序。

自顶向下方法的格式是：

1.  标题页眉（两个`buttons`, `ImageView`）
2.  内容区域 - 活动之间会有所不同（包含 ListView、Tabs、Buttons、TextView、WebView ......）
3.  页脚布局（`Relative Layout`带三个`Imagebuttons`）

我想重新格式化代码，使其`xml`包含标题页眉和页脚布局，其他`xml`包含`ListView`标签，按钮..根据使用情况。我能做到这一点吗？请帮助我提供示例代码/链接....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:07:26.330

您可以使用 include 元素来拥有子 xml 文件：

```
<LinearLayout ... >
    <include layout="@layout/header" />
    <include layout="@layout/content" />
    <include layout="@layout/footer" />
</LinearLayout> 
```

这将允许您轻松创建重复使用这些部分的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:10:13.150

使用标签。

```
 <include 
        android:id="@+id/some_id_if_needed"
        layout="@layout/some_layout"/> 
```

另外，请阅读[合并布局文章](http://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:10:27.613

你需要的是`include`标签。您可以重复使用您的布局。您需要做的就是包括它们：

```
<include
android:id="@+id/layout_id"
layout="@layout/layout_name" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T11:10:53.323

您可以使用包含标记在活动视图中添加更多 xml，只需查看此[http://developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)。

例如，在您的情况下，

1.  在您的 main.xml 中，使用相对布局
2.  为 header 添加单独的 xml，在 main.xml 中添加 using tag add
3.  在 main.xml 中添加相对布局，使用高度作为包装内容并添加列表视图
4.  为页脚添加单独的相对布局 xml，在 main.xml 中添加使用标签添加并使用 android:layout_alignParentBottom="true"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T11:32:12.790

我建议您利用 Java 中的继承。有一个`BaseActivity`您可以在活动中定义所有常见事物并扩展它并在所有子活动中设置内容的地方。在`BaseActivity`的布局中有一个空的内容布局，稍后在子活动中您可以使用[LayoutInflater](http://developer.android.com/reference/android/view/LayoutInflater.html)填充内容。

伪代码：

```
BaseActivity extends Activity{
    View mBody;
    void onCreate(Bundle prevState){
        super.onCreate(prevState);
        setContentView(R.layout.baselayout);
        mBody = findViewById(R.id.body)
    }

    void setBody(int bodyLaout){
        //here populate the mView using LayoutInflater
    }
}

Activity1 extends BaseActivity{
    void onCreate(...){
        super.onCreate(...);
        setBody(R.layout.activity_one);
    }
} 
```

# jquery - jquery显示隐藏的div

> ID：13761787
> 
> 赞同：0
> 
> 时间：2012-12-07T11:02:30.400
> 
> 标签：jquery

首先，我有点不好意思问这个问题，很多人已经问过这个问题了，但是即使经历了这么多帖子，我也无法实现我想要的。基本上，最初隐藏的 div 必须在单击按钮时显示。

我尝试使用`display:none`and隐藏 div `hide()`，然后使用`show()`,`toggle()`和`css("display","block")`. 使用上述各种组合，我仍然无法得到结果。

代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<link href="css/smoothness/jquery-ui-1.9.2.custom.min.css" rel="stylesheet" type="text/css" />
<script src="jQuery/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="jQuery/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#one').hide();
        $('#Button1').click(function () {
            $('#one').toggle(500);
        });         
    });
</script>
</head>
<body>
<form id="form1" runat="server">
<div id="one" style="height: 20px;width:200px; background-color: Red; ">       
</div>
<asp:Button ID="Button1" runat="server" Text="Show" />
</form>
</body>
</html> 
```

单击按钮时，div 会显示一秒钟，然后再次消失。

如果我在上面的代码中使用`show()`而不是，也会发生同样的事情。`toggle()`

`style="display:none"`如果我设置为 div 而不是 using`hide()`然后使用`show()`or ，同样的事情`toggle()`。

我也尝试过使用`$('#one').css("display","block");`但同样的结果。

谁能告诉我哪里出错了。刚开始学习 jQuery，当一些看似如此简单的东西不起作用时，这真的很令人沮丧。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:12:47.653

由于您使用的按钮类型与浏览器中呈现的类型`button` 相同，因此请用作`asp:Button``type="submit"``return false;`

```
$(document).ready(function () {
        $('#one').hide();
        $('#Button1').click(function () {
            $('#one').toggle(500);
            return false;
        });         
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:06:47.843

您正在提交表单并重新加载页面，按钮元素的默认类型是*submit*，您可以尝试使用`preventDefault`事件对象的方法或将按钮的 type 属性设置为`button`。

```
$(document).ready(function () {
    $('#one').hide();
    $('#Button1').click(function(e) {
        e.preventDefault();
        $('#one').toggle(500);
    });         
}); 
```

# jquery - jquery 验证：仅当所有监视的元素都验 证时才启用提交按钮

> ID：13761790
> 
> 赞同：1
> 
> 时间：2012-12-07T11:02:37.780
> 
> 标签：jquery, jquery-validate

观察表单中的多个元素，我只想在所有元素都成功验证时**启用**提交按钮。这是我尝试过的：-

```
$('#beta_signup_form').validate({
    rules: {
        name: {
            required: true,
            minlength: 4
        },
        email: {
            required: true,
            email: true 
        }
    },
    focusCleanup: true,
    onkeyup: false,
    errorElement: "span",
    submitHandler: function(form) {
        if ($('#beta_signup_form').valid()) {
            console.log("now we enable the submit button!");
        }   
    }

}); 
```

**更新**

在我们启用提交按钮之前，我希望`submitHandler`触发和 if`if ($('#beta_signup_form').valid())`条件来检查我们所有的字段是否有效，以便用户可以单击它来进行 ajax 调用以提交表单。

但是不知何故，当所有字段都有效时，什么都不会触发。

我弄清楚我做错了什么，那就是该`submitHandler`属性与检测“所有字段验证”事件无关。只有当我点击我的表单按钮时，该`submitHandler`属性才会被触发，这不是我需要的。

所以我的问题是 - 我需要绑定哪个事件？**当表单中的所有字段都**验证时，是否有可用于设置触发器的属性？

这是表单html代码：-

```
 <form id="beta_signup_form" postUrl="{% url 'signups_beta_users' %}" method="post" csrf_token="{{ csrf_token }}">{% csrf_token %}
        <div>
            <input type="text" id="name" name="name" placeholder="Name" />
        </div>
        <div>
            <input type="email" id="email" name="email" placeholder="Email address" />
        </div>
        <button class="btn btn-success" type="submit" id="request-trial" href="#request-for-free-trial">Notify Me</button>
        <div class="loading"></div>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:55:20.350

这段代码非常适合我（见这里：http: [//jsfiddle.net/tCpXT/](http://jsfiddle.net/tCpXT/)）：

```
 <form id="beta_signup_form" postUrl="" method="post">
                <div>
                    <input type="text" id="name" name="name" placeholder="Name" />
                </div>
                <div>
                    <input type="email" id="email" name="email" placeholder="Email address" />
                </div>
                <button class="btn btn-success" type="submit" id="request-trial" href="#request-for-free-trial">Notify Me</button>
                <div class="loading"></div>
            </form>​
    <script type="text/javascript">
            $(document).ready(function() {
                $("#beta_signup_form").validate({
                rules: {
                    name: {
                        required: true,
                        minlength: 4
                    },
                    email: {
                        required: true,
                        email: true 
                    }
                },
                submitHandler: function(form) {
                    if ($("#beta_signup_form").valid()) {
                        alert('now we enable the submit button!');
                    }   
                }
                });

            });
            </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:48:28.260

我的答案：

```
$(document).ready(function() {
    $("#beta_signup_form").validate({
        rules: {
            name: {
                required: true,
                minlength: 4
            },
            email: {
                required: true,
                email: true
            }
        },
        submitHandler: function(form) {
            alert('submitted');
        }
    });
});​ 
```

我发布我的答案以响应[先前接受的答案](https://stackoverflow.com/a/13764485/594235)，以证明您不需要任何特殊功能来执行 OP 的要求。默认情况下，该`.validate()`插件的行为已经如此。

这是来自已接受答案的 jsFiddle：http: [//jsfiddle.net/99mbLp1b/](http://jsfiddle.net/99mbLp1b/)

在该答案中，唯一的区别是在`submitHandler`.

```
submitHandler: function(form) {

    if ($("#beta_signup_form").valid()) {
        alert('now we enable the submit button!');
    }  

} 
```

[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，这`submitHandler`是“***表单有效时****处理实际提交的回调”。*

 **因此，如果`submitHandler`仅在表单有效时调用，那么整个条件检查是完全多余和不必要的......

```
if ($("#beta_signup_form").valid()) { ... }; 
```

它总是会是，因为如果表单还不是有效的`true`，你甚至永远不会进入函数。`submitHandler`

见演示证明：http: [//jsfiddle.net/uehu47w1/](http://jsfiddle.net/uehu47w1/)

如您所见，它的运行方式与[另一个 answer 中的 jsFiddle](http://jsfiddle.net/99mbLp1b/)相同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T11:08:36.997

也许您还必须测试 0（请参见此处：[jQuery Validation `valid()` method return 0 when required is not true](https://stackoverflow.com/questions/482224/the-jquery-validation-valid-method-returns-0-when-required-is-not-true)）

所以它会是：

```
 if (($('#beta_signup_form').valid())||($('#beta_signup_form').valid()=="")) {
        console.log("now we enable the submit button!");
    } 
```**

# caching - symfony2.1 无法清除缓存

> ID：13761795
> 
> 赞同：0
> 
> 时间：2012-12-07T11:03:10.893
> 
> 标签：caching, symfony-2.1

清除应用程序中的缓存时出现一个错误，我认为这是我遇到问题的原因： ![在此处输入图像描述](../Images/ca321f007c6703786149947aa429adad.png)

你有什么主意吗

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:01:28.747

这似乎是一个特权问题（访问拒绝=拒绝访问）。

您应该尝试以管理员身份运行 cmd 窗口（右键单击 -> 以管理员身份运行）并再次运行该命令和/或查看缓存文件夹的权限并为当前用户提供读/写/执行权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:38:49.763

当您尝试使用该网站时，您的应用程序是否会抛出错误？如果没有，请尝试更新您的供应商。

```
php composer.phar self-update
php composer.phar update 
```

# xpages - 如何通过 oAuth 让外部移动应用程序访问 XPages REST 服务

> ID：13761799
> 
> 赞同：1
> 
> 时间：2012-12-07T11:03:15.423
> 
> 标签：xpages, ibm-sbt

我相信最新版本的 SBT 不包含让 Domino 充当 OAuth 提供者的控件。有什么计划吗？

我的客户喜欢向外部移动应用程序提供经过身份验证的 REST 调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T16:06:34.333

SBT 为您提供充当 OAuth 客户端的类，而不是构建 OAuth 提供者。也就是说，核心 Domino 团队在这方面正在进行一些工作。我不能承诺任何计划，但我听说它可能是 9.0 的附加组件...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:26:20.520

我知道它不是原生的，但是，Matt White 写了一篇带有代码的文章来展示如何做到这一点。它可能是您可以用来提供功能的东西？查看更多： http: [//mattwhite.me/2010/10/20/how-to-get-sso-for-facebook-working-with-xpages.html](http://mattwhite.me/2010/10/20/how-to-get-sso-for-facebook-working-with-xpages.html)

# hadoop - Hadoop JobClient 中的 submitJob 方法抛出空指针

> ID：13761800
> 
> 赞同：1
> 
> 时间：2012-12-07T11:03:20.957
> 
> 标签：hadoop, mapreduce

我正在尝试执行 MapReduce 作业，并且我想定期轮询其状态。我正在尝试在代码中使用 Jobclient 类的 submitJob(jobConf) 方法，如下所示

```
 JobConf conf = new JobConf(SampleJobClass.class)   
 JobClient j= new JobClient();
 j.setConf(conf);
 System.out.println("from conf" +j.getConf().toString());
 RunningJob submitJob=j.submitJob(conf);` 
```

我不断收到空指针错误`j.submitJob(conf)` 错误堆栈是：

```
Exception in thread "main" java.lang.NullPointerException
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:844)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:818) 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:58:05.400

根据提供的信息，我假设您使用 hadoop-2.0.0-mr1-cdh4.0.0 / 4.0.1。
在第 844 行：

```
return ugi.doAs(new PrivilegedExceptionAction<RunningJob>() { 
```

NPE 可能发生，因为 ugi 为空。( *UserGroupInformation* ) 这是在 `init()`方法中设置的，但在默认构造函数中没有调用。因此，手动调用它：

```
j.init(conf); 
```

或简单地使用：

```
j = new JobClient(conf); 
```

它在内部调用*init()*。

另一方面，我宁愿在命令行中运行 Hadoop 作业，然后执行一些轮询作业信息的客户端代码，例如：

```
InetSocketAddress jobtrackerAddr = new InetSocketAddress("myhost",8021);
Configuration conf = new Configuration();
JobClient jobClient = new JobClient(jobtrackerAddr, conf);
JobStatus[] runningJobs = jobClient.jobsToComplete();
... 
```

（要检索多个集群信息，请参阅我之前的[回答](https://stackoverflow.com/a/12388997)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T04:24:33.360

我也有这个问题。但是使用`j.runJob(conf);`效果很好。你也可以使用静态函数`JobClient.runJob(conf);` 我不知道为什么，但我去阅读JobClienta的源代码并找到静态函数runJob的实现。

```
public static RunningJob runJob(JobConf job) throws IOException {
JobClient jc = new JobClient(job);
RunningJob rj = jc.submitJob(job);
try {
  if (!jc.monitorAndPrintJob(job, rj)) {
    throw new IOException("Job failed!");
  }
} catch (InterruptedException ie) {
  Thread.currentThread().interrupt();
}
return rj; 
```

所以我以这种方式使用 submitJob 功能：

```
JobClient jcli = new JobClient(jconf);
        RunningJob rJob = jcli.submitJob(jconf);
        while (true){
            Thread.sleep(5000);
            System.out.println(rJob);
            if (rJob.isComplete())
                break;
        } 
```

我工作！也许这对你也有用。

# git - Hudson - Git - 克隆只需要的分支

> ID：13761801
> 
> 赞同：3
> 
> 时间：2012-12-07T11:03:25.090
> 
> 标签：git, hudson, git-clone

是否可以在 hudson 中仅克隆一个 git 分支？Hudson 2.2.0 版和 git 插件 2.2.0 版克隆了整个指定项目，因此占用了大量空间（预计会永远增长）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:35:14.283

将 hudson-git 插件中的 refspec 配置为以下值似乎有效：

```
+refs/heads/master:refs/remotes/origin/master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:25:01.897

不是直接的，但如果你可以调整[Hudson Git 插件](http://wiki.hudson-ci.org/display/HUDSON/Git+Plugin)本身，你可以使用正确的 git 命令克隆一个分支：
请参阅“[如何在 git 中克隆单个分支？](https://stackoverflow.com/a/9920956/6309) ”

从 git1.7.10 开始，这是可能的：

```
git clone <url> --branch <branch> --single-branch <folder> 
```

* * *

请注意，**[git 插件 2.0](https://wiki.jenkins-ci.org/display/JENKINS/Git+plugin+2.0+beta+testing)**将允许**指定要克隆的正确分支**：

![混帐 2.0](../Images/4d0181811bc0f6d18218fc81eebb7c0c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:09:36.783

你`clone`对`checkout`. Clone 克隆一个存储库，这就是 git 的工作方式，checkout 会将您切换到给定的分支。因此，Git 是分布式的，整个存储库与克隆一起复制到您的本地计算机。因此，您可以访问任何已推送的分支、提交、标记。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T15:23:30.283

git“分支”只是一个 40 字节的书签，指向项目历史中的一个位置——除非你的分支有*很大*的分歧，否则你并没有真正节省太多空间，因为无论如何你都会下载完整的历史。

如果节省空间是目标，也许使用“浅克隆”选项？那只会下载一层历史，而不是全部。

# string - 使用 -ash 在字符串中捕获特定单词之后的单词

> ID：13761802
> 
> 赞同：-1
> 
> 时间：2012-12-07T11:03:24.477
> 
> 标签：string, shell, word, busybox, ash

```
get_channel()
{
    local wifidev="$1"

    set -- $( iw dev "$wifidev" info )
    # e.g. 'Interface wlan0 ifindex 6 wdev 0x2 addr 10:6f:3f:0e:31:8e type IBSS wiphy 0 channel 11 (2462 MHz) NO HT'

    case "$@" in
        *" channel "*)
            while [ "$1" != "channel" ]; do shift; done
            echo "$2"
        ;;
        *)
            return 1
        ;;
    esac
} 
```

看起来很复杂。我想在“频道”这个词之后有数字，没有 sed 或 awk。是否有一个可移植的 8-) 大括号扩展，只在“通道”之后加上这个词，比如：

```
channel="${@#*channel }"
set -- $channel
echo $1 
```

也许还有更好的方法？

编辑：建议我们现在使用这种方法：

```
set -- $( iw dev "$dev" info )
mychan="$@"
mychan="${mychan#*channel }"
case "$mychan" in
    [0-9]*)
        echo "${mychan%% *}"
    ;;
esac 
```

它足够快速和安全（+便携）-但也许还有一个不错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:25:13.800

这似乎没有做任何事情：

```
${@#* channel } 
```

我猜特殊参数 $@ 太特殊了。

首先将位置参数存储在 tmp 变量中

```
local tmp="$*"
tmp=${tmp#* channel }
if [ "$tmp" = "$*" ]; then
    # no "channel" here
    return 1
fi
echo ${tmp%% *} 
```

# asp.net-mvc - System.TypeLoadException = "未找到入口点。" ASP.NET MVC

> ID：13761807
> 
> 赞同：1
> 
> 时间：2012-12-07T11:03:39.660
> 
> 标签：asp.net-mvc, asp.net-mvc-3, exception, mvccontrib-grid

**1\. 将模型从动作传递到视图**

```
 public ActionResult Request()
        {
            List<string> buildType = new List<string>();
            BuildRepository bs = new BuildRepository();
            buildType = bs.PopulateBuildType();
            if (buildType.Count() > 0)
            {
                ViewBag.BuildType = new SelectList(buildType);
            }

            List<string> buildMode = new List<string>();
            buildMode.Add("Complete");
            buildMode.Add("Repack");
            ViewBag.BuildMode = new SelectList(buildMode);

            BuildModel bsm = new BuildModel();
            bsm.BuildStatusData();
            return View(bsm);
        } 
```

**2\. 将模型从视图传递到局部视图**

```
@{
    BuildModel bm = Model as BuildModel;
}

   <div id="buildstatus">
        @Html.Partial("_BuildStatus", bm)
    </div> 
```

**3\. 能够获取 BuildStatus 属性（数据源）的记录。但是，虽然没有呈现 Grid(3rd property Grid)。在检查列时出现错误“base {System.TypeLoadException} = {"Entry point was not found.":""}"**

```
@{
    BuildModel bm = Model as BuildModel;
}
<div id="buildstatus">
    @{Html.Grid<BuildStatus>("BuildStatusGrid").Datasource(bm.BuildStatus)
      .Column(col =>
          {
              col.Add(c => c.BuildType).HeaderText("Build Type");
              col.Add(c => c.QueuedItems).HeaderText("Queued Time");
              col.Add(c => c.LastStartTime).HeaderText("Last Start Time");
          }).Render(); }
</div> 
```

# java - GWT、PhoneGap 和视频 VLC

> ID：13761816
> 
> 赞同：2
> 
> 时间：2012-12-07T11:04:13.547
> 
> 标签：java, javascript, gwt, cordova, vlc

我想构建一个可以运行的 GWT-Phonegap 应用程序：

*   在普通的网络浏览器或移动浏览器中
*   在 Android 手机/平板设备上
*   在 iPhone/iPad 设备上
*   在 Windows 手机/平板电脑设备上

因此，GWT 将我的 Java 源代码编译成 JavaScript（由 Web 和移动浏览器直接执行），然后 GWT-Phonegap 将该 JavaScript 绑定到适用于 Android、iOS 和 Windows 设备的本机二进制文件。

这是踢球者：我想在应用程序中嵌入一个 VLC 媒体播放器。因此，无论您从哪个平台（网络、移动或本地）访问我的应用程序，您都可以通过嵌入式 VLC 播放器观看视频。

根据[VLC 网站上的这个页面](http://wiki.videolan.org/GWT)，这对于网络/移动平台来说很容易做到。但是原生平台呢？这甚至可能吗？我可能的解决方案是什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:12:06.117

如果你想使用 vlc，你必须编写一个原生 phonegap 插件，然后通过 jsni 从 gwt 调用它。

在您发送的链接中，您通过安装在 FF 或 IE 的 activex 控件中的插件调用 vlc 查看器。他们没有说任何关于 webkit 的事情。

vlc 可以在 android 和 ios 中编译，所以理论上你可以创建那个插件，认为 phonegap 插件对于每个平台都有一个 native 部分，这里你从 vlc 源中获取代码，以及一个可以共享给所有人的 js 部分平台。

另一个可以正常工作的选项是使用[phonegap-video](https://github.com/macdonst/VideoPlayer)插件在 android 和 ios 的标准 html 视频标签中播放视频。

# c# - 如何将 ms 图表控件从当前页面加载到新页面。（客户端）

> ID：13761831
> 
> 赞同：0
> 
> 时间：2012-12-07T11:05:36.683
> 
> 标签：c#, mschart

```
var divToPrint = document.getElementById('<%= Page.Master.FindControl("ContentPlaceHolder2").FindControl("divReport").ClientID %>');
var newWin = window.open('', '_blank', features);
newWin.document.open();
newWin.document.write('<html><head></head><body onload= "window.print()">' + divToPrint.innerHTML + '</body></html>'); 
newWin.document.close();
newWin.focus(); 
```

**Divreport**包含一个 MS-Chart 控件（c# asp.net）。

上面的代码应该在新页面中显示图表控件，并在新页面加载时打开一个打印窗口。

我的问题是，图表控件加载正确，但有时不会，为什么会这样？图表控件本身会更改为图像，它将被加载到其他页面上（因为我使用的是 html）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:02:43.763

我已经通过在其他页面中创建新图表而不是通过来解决。只是我已经通过查询字符串发送了所需的数据。:-)

# doctype - 我需要文档类型声明吗？

> ID：13761832
> 
> 赞同：0
> 
> 时间：2012-12-07T11:05:43.117
> 
> 标签：doctype

如果我的网站是简单的 HTML，我是否需要 DOCTYPE 声明？我需要在每个 HTML 页面上使用它吗？

拥有它有什么好处？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:09:13.600

有一个`DOCTYPE`声明告诉浏览器你正在使用什么版本的 HTML。

好处是浏览器可以更好地处理 HTML 文件并产生预期的结果 - 如果您没有`DOCTYPE`, 浏览器将进入[quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)并且生成的渲染页面很可能不是您所期望的。

简而言之 -`DOCTYPE`在页面上放置 a 可确保浏览器的行为符合规范/标准。不把它放在一个页面上意味着不同的浏览器会有不同的行为。

# gradle - 如果它们已经出现在我的 Maven 本地仓库中，为什么 gradle/ivy 不下载依赖项？

> ID：13761839
> 
> 赞同：0
> 
> 时间：2012-12-07T11:05:52.050
> 
> 标签：gradle, ivy

有时我的 maven repo 只包含没有罐子的 pom。在这种情况下，gradle/ivy 会引发异常并停止构建：

```
* What went wrong:
Could not resolve all dependencies for configuration ':core:compile'.
> Artifact 'ch.qos.logback:logback-classic:1.0.6@jar' not found. 
```

有具有此 jar 文件的存储库。为什么 gradle 不检查其他项目 repos 并停止构建？在这种情况下，如何告诉 gradle 检查其他存储库？

**补充：** 为了解决这个问题（`Artifact 'ch.qos.logback:logback-classic:1.0.6@jar' not found.`）我只是`logback-classic`从我的 maven 本地 repo 中删除文件夹。然后 gradle 将从其他链接的存储库下载 pom/jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:54:02.573

默认情况下，Gradle 将始终从同一个 Maven 存储库中获取 POM 和工件。并且由于它将本地 Maven 存储库视为另一个 Maven 存储库，这就是您得到的行为。要使其在其他存储库中查找工件，您可以使用`repositories { maven { url "..."; artifactUrls "...", "..." } }`. 对于`mavenLocal`and `mavenCentral`，语法是`mavenLocal(artifactUrls: ["...", "..."])`。

# file - 如何将本地文件添加到 maven 项目中？

> ID：13761840
> 
> 赞同：0
> 
> 时间：2012-12-07T11:05:52.020
> 
> 标签：file, maven, local

您好我正在尝试使用 OpenNLP 中的标记器来开发一个 Maven 项目。它需要加载一个本地文件，但我不知道如何将它添加到项目中，这样即使我在其他机器上启动了项目，它仍然可以工作。如下，项目需要加载这个本地文件，我应该如何配置要添加到项目中的文件？

```
InputStream modelIn;
    try {
        modelIn = new FileInputStream("E:\\en-token.bin");
        // Make sure the "en-token.bin" file is already in your local disk

        TokenizerModel model = null;
        try {
            model = new TokenizerModel(modelIn);
        } catch (IOException ex) {
            ex.printStackTrace();
        } finally {
            if (modelIn != null) {
                try {
                    modelIn.close();
                } catch (IOException e) {
                }
            }
        }
        Tokenizer tokenizer = new TokenizerME(model);
        String tokens[] = tokenizer.tokenize(string);
        List<String> tokenResult = Arrays.asList(tokens);
        return tokenResult;

    } catch (FileNotFoundException ex) {
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:17:02.713

此类文件应放在**src/main/resources**文件夹中，该文件夹将打包成 jar 文件。

# java - 医院收银员的多柜员模型

> ID：13761844
> 
> 赞同：0
> 
> 时间：2012-12-07T11:06:14.083
> 
> 标签：java, finance, software-design, percona, bank

我目前正在开发一个医院管理系统。我的申请将在医院有多名收银员，他们 24/7 全天候工作，他们从患者那里收钱并签发收据凭证或在退款的情况下将钱退还给患者。

目前，我正在为每笔交易存储员工用户帐户号，在一天结束时，员工打印出他用他必须发送给会计部门的总金额进行的交易清单。但我需要有人告诉我需要什么政策来防止员工在他/她的现金箱中的总金额出现任何错误。

我是否需要阻止其他人删除或修改记录，即使是会计部门的负责人？

我觉得我需要一些作为银行出纳员的东西，但我找不到可以帮助我或向我解释我到底需要在这部分的政策中加入什么的东西。

我正在使用：Java 作为 GUI 和编程语言，MySQL (Percona) 作为我的数据库，Crystal Reports 作为我的报告和打印解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:16:05.500

我认为您需要更加原子地考虑这一点。而不是有可以编辑或删除的交易，只是有发生的动作。

所以一定要让你的人在其中运行一个事务，如果有人想编辑那个事务，让他们把它作为变更集来做，有点像版本控制系统的工作方式。因此，您仍然保留有关原始交易的信息，但随后进行了应应用于该交易的更改。

如果您有一些用于事务/操作的基本 ID，然后每个更改集都指向该 ID，那么至少您可以按日期顺序将所有更改联系在一起，然后运行它们以计算出总数，您可以稍后轻松地缓存这些更改以用于性能目的上。

每当涉及到金钱时，允许编辑或删除数据是非常危险的，这就是为什么大多数地方倾向于保留所有信息并且只是将其归档为过时并在其位置放置更新的记录，或者有一些数据原始记录的踪迹以及上面发生的变化。

最终，这一切都归结为可追溯性......

# java - Java Unicode 翻译

> ID：13761848
> 
> 赞同：3
> 
> 时间：2012-12-07T11:06:27.683
> 
> 标签：java, unicode

我遇到了以下代码：

```
public class LinePrinter {
    public static void main(String args[]) {
      //Note: \u000A is unicode for Line Feed
      char c=0x000A;
      System.out.println(c);
    }
} 
```

由于已完成 Unicode 替换，因此无法编译。

问题是，为什么*注释*( `//`) 不覆盖编译器完成的 Unicode 替换？我认为编译器应该先忽略注释，然后再对代码翻译做任何其他事情。

**编辑：**

不确定以上是否足够清楚。

我知道上面会发生什么以及为什么会出错。我的期望是编译器在对代码进行任何翻译之前应该忽略所有注释行。显然这里不是这样。我期待这种行为的基本原理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T11:09:05.233

它在 Java Puzzlers # 14 - 解释的摘录：

> 理解这个难题的关键是 Java 没有为字符串文字中的 Unicode 转义提供特殊处理。编译器将 Unicode 转义转换为它们所代表的字符，然后再将程序解析为标记，例如字符串文字 [JLS 3.2]。

JLS v7 中的相关段落是[第 3.3 段](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.3)：

> Java 编程语言的编译器（“Java 编译器”）首先识别其输入中的 Unicode 转义，将 ASCII 字符 \u 后跟四个十六进制数字转换为指示的十六进制值的 UTF-16 代码单元（第 3.1 节），并且传递所有其他字符不变。

JLS 第 3 节的介绍提示了为什么会出现这种情况：

> 程序是用 Unicode（第 3.1 节）编写的，但提供了词汇翻译（第 3.2 节），因此 Unicode 转义（第 3.3 节）可用于包含仅使用 ASCII 字符的任何 Unicode 字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:35:40.017

`native2ascii`该规范规定，Java 编译器必须在执行任何其他操作之前将 Unicode 转义符转换为其相应的字符，以允许在代码通过非加密通道存储或发送时（通过）保护标识符中的非 ASCII 字符。8 位清洁。

此规则适用于全局，特别是您甚至可以使用 Unicode 转义来转义注释标记。例如以下两个片段是相同的：

```
// Deal with opening and closing comment characters /*, etc.
myRisquéParser.handle("/*", "*/");

\u002F\u002F Deal with opening and closing comment characters /*, etc.
myRisqu\u00E9Parser.handle("/*", "*/"); 
```

如果编译器在处理 Unicode 转义之前尝试删除注释，它最终会剥离从`/*, etc.`到 的所有内容`handle("/*", "*/`，留下

```
\u002F\u002F Deal with opening and closing comment characters "); 
```

然后将其转义为单行注释，然后在下一个解析阶段将其删除。因此不会产生编译器错误或警告，而是默默地删除一整行代码......

# xcode - Xcode 报错，构建成功后

> ID：13761850
> 
> 赞同：0
> 
> 时间：2012-12-07T11:06:33.860
> 
> 标签：xcode, xcode4.5, xcode4.6

Xcode 4.5（但我认为更早）报告构建错误，但我刚刚创建了一个成功的构建。它还取决于我在项目浏览器中选择的文件。有些文件会出错，有些则不会。

这让我相信我的代码的自动评估存在错误。它似乎失去了#imports或更深的链接到其他标题......

我已经有一段时间没有这个问题了，但今天它又回来了。非常奇怪和烦人。

是否有要删除的自动完成缓存或其他东西。（删除派生数据没有帮助，或者清理构建。）

有没有人找到解决这个问题的方法？

编辑：仍然发生在 Xcode 4.6 中可能有助于在标题中更多地使用@class，但未经验证。

# c++ - 确定如何实现 OpenMP 原子指令

> ID：13761851
> 
> 赞同：3
> 
> 时间：2012-12-07T11:06:38.217
> 
> 标签：c++, gcc, openmp, atomic

实现 OpenMP 标准的编译器可以但没有义务利用特殊的硬件指令来按照`#pragma omp atomic`指令原子进行某些内存更新，从而避免昂贵的锁。根据[http://gcc.gnu.org/onlinedocs/gccint/OpenMP.html](http://gcc.gnu.org/onlinedocs/gccint/OpenMP.html)，GCC 实现原子更新如下：

> 只要有可能，就会使用内置的原子更新。如果失败，则尝试比较和交换循环。如果这也失败了，则使用表达式周围的常规临界区。

1.  如何确定在给定机器和 GCC 版本上实际使用这三个中的哪一个？是否有一些 GCC 的详细选项，我可以设置它来查找，而无需分析我的程序或查看生成的字节码？

2.  是否有一些文档列出了提供原子加法/增量/等指令的 CPU/架构，允许我预测给定机器的结果？

我在各种不同的机器上使用 GCC 版本 4.2 到 4.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:32:12.477

`-fdump-tree-all`您可以使用该选项查看中间树表示。鉴于该选项，GCC 在几个中间步骤写入一组文件，并且可以观察应用于树的连续转换。该`.ompexp`文件在这里特别有趣，因为它包含在 OpenMP 表达式扩展为其具体实现之后的树。

例如`parallel`下面简单代码中区域内的块：

```
int main (void)
{
    int i = 0;

    #pragma omp parallel
    {
       #pragma omp atomic
       i++;
    }

    return i;
} 
```

在 64 位 Linux 上由 GCC 4.7.2 转换为：

```
;; Function main._omp_fn.0 (main._omp_fn.0, funcdef_no=1, decl_uid=1712, cgraph_uid=1)

main._omp_fn.0 (struct .omp_data_s.0 * .omp_data_i)
{
  int D.1726;
  int D.1725;
  int i [value-expr: *.omp_data_i->i];
  int * D.1723;
  int * D.1722;

<bb 2>:
  D.1722_2 = .omp_data_i_1(D)->i;
  D.1723_3 = &*D.1722_2;
  __atomic_fetch_add_4 (D.1723_3, 1, 0);
  return;

} 
```

最终结束于：

```
00000000004006af <main._omp_fn.0>:
  4006af:       55                      push   %rbp
  4006b0:       48 89 e5                mov    %rsp,%rbp
  4006b3:       48 89 7d f8             mov    %rdi,-0x8(%rbp)
  4006b7:       48 8b 45 f8             mov    -0x8(%rbp),%rax
  4006bb:       48 8b 00                mov    (%rax),%rax
  4006be:       f0 83 00 01             lock addl $0x1,(%rax)
  4006c2:       5d                      pop    %rbp
  4006c3:       c3                      retq 
```

至于第二个问题，可能还取决于 GCC 是如何构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:31:40.417

GCC 将定义宏

```
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_1 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_2 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_4 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_8 1
#define __GCC_HAVE_SYNC_COMPARE_AND_SWAP_16 1 
```

如果相应的操作可用。

通常，人们总是可以期望在任何支持多个处理器的架构上进行比较和交换（以 CAS 或 LL/SC 的形式）。

此外，在 x86 上还有原子增量和减量。

# c# - 使用静态文本将数据绑定到标签

> ID：13761852
> 
> 赞同：0
> 
> 时间：2012-12-07T11:06:40.573
> 
> 标签：c#, asp.net

```
<asp:Label ID="IDLabel" runat="server" Text='<%# Bind("ID") %>' /> 
```

当我调用 DataBind() 函数时，ID 显示如下：

```
14 
```

但是如果我想这样显示 ID 怎么办：

```
ID: 14 
```

这没有用。

```
<asp:Label ID="IDLabel" runat="server" Text='ID: ' + '<%# Bind("ID") %>' /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:09:00.917

```
Text='<%# "ID: " +Eval("ID").ToString() %>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:08:41.850

试试这个：

```
<asp:Label ID="IDLabel" runat="server" Text='<%# "ID: " +Eval("ID").ToString() %>' /> 
```

您不能连接 XML 中的属性值。

你基本上有这样的XML：

```
<element attribute="ID" + "sometext"/> 
```

这是无效的 - 相反，您需要让预处理器更改 XML 的输出，以便只修改属性的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:09:34.007

```
<asp:Label ID="IDLabel" runat="server" Text='<%# "ID: " + Bind("ID") %>'   /> 
```

或者

```
<asp:Label ID="IDLabel" runat="server" Text='<%# String.Format("ID: {0}", Bind("ID")) %>'   /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T11:23:40.200

```
<asp:Label ID="IDLabel" runat="server" Text='<%# "ID: " +Eval("ID").ToString() %>' /> 
```

# iphone - 在 iPhone 中以 POPUP 形式查看

> ID：13761853
> 
> 赞同：0
> 
> 时间：2012-12-07T11:06:47.233
> 
> 标签：iphone, objective-c, ios

我需要在其他视图上显示一个视图（让我们称之为子视图）作为弹出窗口（让我们称之为父视图）。子视图将包含图像、标签和一个按钮（关闭 childView）。我已经用谷歌搜索了大约一个小时左右，但我并不真正了解如何开始这项任务。请帮助我解决问题的方法和解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:14:38.383

试试这个代码。它会在你的主视图中添加一个子视图以及一个动画：

```
 //if you want to set your child view frame to your parent view frame.use this
        self.childview.frame = self.view.frame;
       //if not
        self.childview.frame = CGRectMake(10,10,100,100);//ur own frame positon  
self.childview.alpha = 0.0f;
[self.view addSubview:self.childview];

[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationCurveEaseOut
                 animations:^{
                     self.childview.alpha = 1.0f;
                 }
                 completion:^(BOOL finished) {
                 }]; 

    ///After this..if you want to remove it.

       [self.childview removeFromSuperview]; 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:10:31.583

将此演示用于您的此要求..

1.  [弹出视图](https://github.com/sonsongithub/PopupView)

在这个上面的演示中，您可以从 PopUPView 访问视图中的 UIButton ProgressBar 等控件，这是`SNPopupView`与其委托方法一起使用的最佳演示和类

这也是另一个演示

2 [alpopoverview](http://www.mobilebricks.com/ios/alpopoverview)

# android - Android 通知中心不会重定向到 html 页面以获取多条消息

> ID：13761855
> 
> 赞同：0
> 
> 时间：2012-12-07T11:06:52.503
> 
> 标签：android, android-emulator

我在我们的应用程序中使用推送通知，当我在通知中心收到推送通知时，如果我单击该通知，它会正确重定向到该特定的 html 页面。但是当我收到多个推送通知时，如果我单击除第一个通知之外的任何其他通知，它将不会重定向，只有消息首先出现在通知中心列表中才会重定向。如何重定向通知中心android中的每条消息。下面是用于在android中重定向的代码。

```
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);             
    Bundle extras = getIntent().getExtras();        
    if (extras != null) {                                   
        super.loadUrl("file:///android_asset/www/homePage.html");       
        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManager.cancelAll();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:23:29.360

问题是单击第一个通知后您的活动已经创建，因此单击第二个通知时不会调用 onCreate() 。

您需要`android:launchMode="singleTop"`在 AndroidManifest.xml 中为您的活动设置，并覆盖 onNewIntent。

有关详细信息，请参阅[Activity#onNewIntent](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)。

# java - CFX 抛出错误：“java.io.IOException：HTTPS 主机名错误”

> ID：13761859
> 
> 赞同：0
> 
> 时间：2012-12-07T11:07:01.417
> 
> 标签：java, coldfusion

我开发了一个用于 ColdFusion 10 的 Java CFX 标记。有一个 Java 类获取一个 URL 作为参数，并且应该返回该 URL 后面的网站内容。

我们正在使用 https 协议，我需要忽略证书错误。因此，我已经实现了这里建议的解决方案：[HTTPS hostname wrong: should be . 这是什么原因造成的？](https://stackoverflow.com/a/3293720/522293)

我已经按照 Adob​​e 在这里推荐的方式测试了我的方法：[调试 Java CFX 标记的方法](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec0a4b8-7fed.html)

一切正常。

但是当我将我的 CFX 标签附加到我的 ColdFusion 实例并尝试从 ColdFusion 使用它时，我会变成这样的错误：

> java.io.IOException：HTTPS 主机名错误

我的问题是，为什么？调试我的 CFX 标签没有显示错误，但在 ColdFusion 中使用它会带来该错误。对我来说，看起来 ColdFusion 在运行时覆盖了我的一些类声明。有人有什么想法吗？这种现象已知吗？有没有其他人经历过这种奇怪的行为？还是我有什么问题？

要了解我的问题，这里还有一些事实：

*   操作系统：Suse Linux Enterprise Server
*   CF：ColdFusion 10 多服务器
*   Java 开发环境：NetBeans 7.1.2
*   CF 的开发环境：ColdFusion Builder 2.1

一些用于演示目的的源代码：

```
...
url = new URL("https://domainname/path/file.type");
HostnameVerifier hv = new HostnameVerifier() {
    @Override
    public boolean verify(String urlHostName, SSLSession ssls) {
       System.out.println("Warning: URL HOST: " + urlHostName + " vs. " + ssls.getPeerHost());
        return true;
    }
};
HttpsURLConnection.setDefaultHostnameVerifier(hv);
URLConnection conn = url.openConnection();
...(Do something)... 
```

问题：

*   使用 main 方法进行调试工作正常
*   以同样的方式在 ColdFusion 中使用 CFX 标签会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:04:06.033

好的，最后我设法让它工作了——方法如下：

首先，我重建了一些代码，如下所示。

```
SSLContext sc = SSLContext.getInstance("SSLv3");
sc.init(new KeyManager[0], new TrustManager[] {new DefaultTrustManager()}, new SecureRandom());
SSLContext.setDefault(sc);

URL url = new URL(URLStr);
HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
/**
* Create our own hostname verifier which always returns true
* to guarantee that our certificates are accepted
*/
conn.setHostnameVerifier(new HostnameVerifier(){
@Override
public boolean verify(String string, SSLSession ssls) {
    return true;
}
}); 
```

DefaultTrustManager 内容如下：

```
 private static class DefaultTrustManager implements X509TrustManager { 
@Override public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {} 
@Override public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {} 
@Override public X509Certificate[] getAcceptedIssuers() { 
return null; 
} 
} 
```

如您所见，我没有将自己的 HostnameVerifier 设置为默认值，而是设置在具体连接上 (conn.setHostNameVerifier())。此外，我必须将 url.openConnection 转换为 HttpsURLConnection。

至今。然后再一次 - 调试器就像一个魅力，部署在 CF-Server 上的 Cfx - 没有任何反应，但是日志中出现奇怪的错误：

```
"Error","ajp-bio-8013-exec-1","12/07/12","16:53:07","sys_bdr","com.sun.net.ssl.internal.www.protocol.https.HttpsURLConnectionOldImpl cannot be cast to javax.net.ssl.HttpsURLConnection The specific sequence of files included or processed is: /path/to/test/file/test.cfm, line: 61 "
 java.lang.ClassCastException: com.sun.net.ssl.internal.www.protocol.https.HttpsURLConnectionOldImpl cannot be cast to javax.net.ssl.HttpsURLConnection 
```

最后一个问题可以通过使用此处描述的解决方案来解决：http: [//danwatt.org/2012/06/making-java-coldfusion-tomcat-and-payflowpro-play-nicely/](http://danwatt.org/2012/06/making-java-coldfusion-tomcat-and-payflowpro-play-nicely/)

ColdFusion 需要使用另一个 JVM 参数启动：

`-Djava.protocol.handler.pkgs=javax.net.ssl`

总而言之：这里有一些编码问题，可以修复，另外还有一个缺少的 ColdFusion JVM 参数。

# php - PDO 无法连接到数据库

> ID：13761861
> 
> 赞同：-1
> 
> 时间：2012-12-07T11:07:03.910
> 
> 标签：php, mysql, pdo

我最近移动到云服务器，我的站点不再连接到数据库，所有配置设置都相同，只是我收到此错误...

```
ERROR: SQLSTATE[28000] [1045] Access denied for user 'access@tmysute.co.uk'@'localhost' (using password: YES) 
```

我仔细检查了密码和用户名，一切都是正确的，以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:07:41.547

您需要将 mysql 服务器绑定到 0.0.0.0 而不是 127.0.0.1 或仅注释 bind-address 部分。这是有关如何的[链接:)](https://serverfault.com/questions/139323/mysql-bind-to-more-than-one-ip-address)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:10:29.977

您的数据库必须配置为允许来自非本地 IP 的连接。这是共享主机的常见做法，您必须迁移您的数据库或与管理员交谈。

# ios - 如何更改标记图标？

> ID：13761864
> 
> 赞同：3
> 
> 时间：2012-12-07T11:07:14.753
> 
> 标签：ios, objective-c, mapkit

我想知道是否有办法改变那些用作标记的红色别针。如果有办法，该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:53:33.483

您可以在 mapView 中使用 3 种颜色引脚，如下所示。

1.  `MKPinAnnotationColorGreen;`
2.  `MKPinAnnotationColorPurple`
3.  `MKPinAnnotationColorRed`

如果您想添加自定义视图或图像，那么您可以通过编程方式添加

您也可以在`MKMapView`下面的委托方法中更改引脚..

```
- (MKAnnotationView *)mapView:(MKMapView *)_mapView viewForAnnotation:(id <MKAnnotation>)annotation 
{
 MKPinAnnotationView *pinView  = (MKPinAnnotationView *)[_mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];
        if (annotation == _mapView.userLocation) 
        {
//            pinView.pinColor = MKPinAnnotationColorRed;
//            return pinView;
            return nil;
        }
        pinView.pinColor = MKPinAnnotationColorGreen; // you can use MKPinAnnotationColorPurple, MKPinAnnotationColorRed;
        pinView.canShowCallout = YES;
        pinView.animatesDrop = NO;

        return pinView;
} 
```

对于自定义图像或图钉，请使用以下代码..

```
- (MKAnnotationView *)mapView:(MKMapView *)_mapView viewForAnnotation:(id <MKAnnotation>)annotation 
{
    static NSString *AnnotationViewID = @"annotationViewID";

    MKAnnotationView *annotationView = (MKAnnotationView *)[_mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];

    if (annotationView == nil)
    {
        annotationView = [[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID] autorelease];
    }

    annotationView.image = [UIImage imageNamed:@"yourImageName"];//add any image which you want to show on map instead of red pins
    annotationView.annotation = annotation;

    return annotationView;
} 
```

# sublimetext2 - Sublime Text中是否有increasIndentPattern？

> ID：13761867
> 
> 赞同：2
> 
> 时间：2012-12-07T11:07:19.460
> 
> 标签：sublimetext2

我正在尝试在 Sublime Text 包中添加自动缩进功能。
至于TextMate，`increaseIndentPattern = '\{';`可以轻松缩进。
[http://manual.macromates.com/en/appendix#indentation_rules](http://manual.macromates.com/en/appendix#indentation_rules)
如何在 SUBlime Text 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T19:53:34.190

Sublime Text 2 已经内置了简单的缩进。

点击`Ctrl+]`向右缩进，然后`Ctrl+[`缩进或删除缩进。

同样，您可以选择要缩进的文本，然后按一下`Tab`键。这将缩进选定的文本块。`Shift+Tab`将删除所选文本的缩进。

如果您正在使用预定义的语法，您可以为“ReIndent”命令[定义一个键绑定](https://gist.github.com/JLMorales/6080845)，这将在整个文档上执行*Edit>Line>Reindent命令。*

但是，如果您真的想亲自动手设置程序如何缩进特定的语言语法，您可以转到*Preferences* Menu 并点击*Browse Packages*。

寻找你想要修改缩进规则的语言，我以 PHP 为例。现在有 2 个文件对我的 PHP 副本具有缩进规则。他们的名字如下：

1.  缩进规则 Annex.tmPreferences
2.  缩进规则.tmPreferences

应该有这些相同文件名的另一个副本，最后带有 *.cache。随意在 .cache 之后添加 .old 并修改普通的 *.tmPreferences 。

# ruby-on-rails - Rails）我现在应该使用什么 Markdown？

> ID：13761870
> 
> 赞同：0
> 
> 时间：2012-12-07T11:07:44.813
> 
> 标签：ruby-on-rails, markdown, redcloth

我需要以下功能：

1.  硬包装文本
2.  自动链接（将网址制作成可点击的链接）
3.  @name 应该变成指向用户/显示操作的链接（我应该能够编写这个辅助方法）
4.  防止代码注入

据我所知，redcarpet 似乎不能正常工作，我发现*redcloth*是一种选择。但它似乎有点过时了，而且它没有提供 filter_html 或 autolink 选项。我可以安装 gems *sanitize*和*autolink*以与 redcloth 一起使用，但我相信会有更好的方法。

谁能给我建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:08:37.437

我建议查看[html-pipeline gem](https://github.com/jch/html-pipeline)。它有过滤器可以做很多你想做的事情，包括：

*   `MentionFilter`- 用链接替换`@user`提及
*   `AutolinkFilter`- HTML 中的自动链接网址
*   `CamoFilter`[- 用伪装的](https://github.com/atmos/camo)https 版本替换 http 图像 url
*   `EmailReplyFilter`- 用于处理电子邮件的实用过滤器
*   `EmojiFilter`- 每个人都喜欢[表情符号](http://www.emoji-cheat-sheet.com/)！
*   `HttpsFilter`- 用于将 http github url 替换为 https 版本的 HTML 过滤器。
*   `ImageMaxWidthFilter`- 链接到大图像的全尺寸图像
*   `MarkdownFilter`- 将 Markdown 转换为 html
*   `PlainTextInputFilter`- html 转义文本并将结果包装在 div 中
*   `SanitizationFilter`- 白名单清理用户标记
*   `SyntaxHighlightFilter`[- 带有语言学家](https://github.com/github/linguist)的代码语法荧光笔
*   `TextileFilter`- 将纺织品转换为 html
*   `TableOfContentsFilter`- 具有名称属性的锚标题

# java - 为什么以及何时使用 TreeMap

> ID：13761871
> 
> 赞同：26
> 
> 时间：2012-12-07T11:07:46.500
> 
> 标签：java, collections, treemap

有人可以告诉我何时以及为什么使用**TREEMAP**。我浏览了[这个链接](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html) ，但没有找到我的答案。

根据我的想法，我们使用树形图根据您的键获取数据排序，同样我们也可以通过其他方式实现。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-07T11:18:34.870

假设您要实现一个字典并按字母顺序打印它，您可以使用 TreeMap 和 TreeSet 的组合：

```
public static void main(String args[]) {
    Map<String, Set<String>> dictionary = new TreeMap<>();
    Set<String> a = new TreeSet<>(Arrays.asList("Actual", "Arrival", "Actuary"));
    Set<String> b = new TreeSet<>(Arrays.asList("Bump", "Bravo", "Basic"));

    dictionary.put("B", b);
    dictionary.put("A", a);

    System.out.println(dictionary);
} 
```

所有排序都是自动完成的，它会打印：

> {A=[Actual, Actuary, Arrival], B=[Basic, Bravo, Bump]}

当然，您也可以手动对结构进行排序，但使用 TreeMap/Set 可以更有效，减少代码行数（= 错误数）并且更具可读性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-07T11:13:30.177

这是让对象按某个键排序的有效方法。如果随机访问对您也很重要，那么 TreeMap 就是答案。使用此数据结构，您可以按顺序迭代。

如果不需要随机访问，则使用排序集/包或列表。

[为什么Java中没有SortedList？](https://stackoverflow.com/questions/8725387/why-there-is-no-sortedlist-in-java)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T11:12:15.360

您链接到的 javadoc 清楚地表明它是[可导航](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html)和[排序](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)的地图接口的实现。当您需要此功能时，您会使用它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-07T11:09:18.277

[树状图](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

> 基于红黑树的 NavigableMap 实现。地图根据其键的自然顺序排序，或者由地图创建时提供的比较器排序，具体取决于使用的构造函数。
> 
> 此实现为 containsKey、get、put 和 remove 操作提供有保证的 log(n) 时间成本。算法是对 Cormen、Leiserson 和 Rivest 的算法简介中的那些算法的改编。

当您需要有序键时使用此数据结构，不仅可以升序，还可以传递`comparator`给构造函数`TreeMap(Comparator<? super K> comparator)` 来编写自己的排序逻辑。它也是一种自平衡二叉搜索树。

# ruby - 每次我进行更改时，Rails Server 都会重新启动

> ID：13761872
> 
> 赞同：1
> 
> 时间：2012-12-07T11:07:47.387
> 
> 标签：ruby, ruby-on-rails-3

我有一个模块文件需要用于我的 rails 项目。当我对任何 Rails 模型、视图、控制器等进行更改时，服务器不需要重新启动。但是当我对该模块进行更改时，我需要重新启动服务器。

`module.rb`不从 Rails 类继承任何东西。

**结构是这样的：**

```
class_1.rb < class_2.rb includes module.rb 
```

`class_1.rb, class_2.rb are also not ActiveRecord classes`. 它们都位于我的模型目录中。

我的`config/enviroments/development.rb`文件是正确的，因为它有：

```
 config.cache_classes = false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:12:25.653

**更新：对于 rails 3.2.9，这应该可以直接使用！**
这是我尝试过的，它无需重新启动服务器即可工作：

```
# ../models/a.rb
class A
  include SomeModule
  def test
    " test:a"
  end
end

# ../models/b.rb
class B < A
  def test
    super + " test:b"
  end
end

# ../models/some_module.rb
module SomeModule
  def call_test
    test + " test:module" 
  end
end

# ../controllers/home_controller.rb
class HomeController < ApplicationController
  def index
    @i = B.new.call_test
  end
end 
```

* * *

当您的模块不在自动加载路径中时，您可以将它放在您的 application.rb 中：

```
# Autoload lib/ folder including all subdirectories
config.autoload_paths += Dir["#{config.root}/your_module_folder/**/"] 
```

# linux - 从 shell 脚本中的字符串中删除单引号

> ID：13761874
> 
> 赞同：1
> 
> 时间：2012-12-07T11:07:57.670
> 
> 标签：linux, shell

这是我的shell脚本-

```
if ! options=$(getopt -o : -l along:,blong:,clong: -- "$@")
then
    # something went wrong, getopt will put out an error message for us
    exit 1
fi

set -- $options

while [ $# -gt 0 ]
do
    case $1 in
        --along) echo "--along selected :: $2" ;;
        --blong) echo "--blong selected :: $2" ;;
        --clong) echo "--clong selected :: $2" ;;
    esac
    shift
done 
```

当我运行脚本时，我得到以下输出 -

```
./test.sh --along hi --blong hello --clong bye
--along selected :: 'hi'
--blong selected :: 'hello'
--clong selected :: 'bye' 
```

问题是我不想用单引号（'hi'，'hello'，'bye'）显示参数。我应该怎么做才能摆脱那些引号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T11:17:31.937

使用选项`-u`或`--unquoted`用于getopt，即

```
if ! options=$(getopt -u -o : -l along:,blong:,clong: -- "$@") 
```

getopt 的联机帮助页说`-u`：

> 不要引用输出。请注意，空格和特殊（依赖于 shell）字符可能会在此模式下造成严重破坏（就像它们对其他 getopt(1) 实现所做的那样）。

# javascript - 同一域 xmlhttprequest 访问被拒绝 ie8

> ID：13761877
> 
> 赞同：0
> 
> 时间：2012-12-07T11:08:08.980
> 
> 标签：javascript, xmlhttprequest

我对 Web 开发领域相当陌生，我正在尝试在 Internet Explorer 8 中读取一个 txt 文件，并将其与网站的源代码进行比较，看看它们是否相等。这样我就可以确定网页是否正常运行。

我设法使用 xmlhttprequest 获取源代码，并尝试了相同的方法来获取文本文件（与我的网页在同一个域中），但我收到了拒绝访问错误。

经过一些研究，我可以看到跨域 xmlhttprequests 不起作用，但这不是我想要做的，所以我不知道如何继续。

在 Firefox（当前版本）中运行相同的代码。它将读取文件而不是网页！

我不介意我最终使用的两个浏览器中的哪一个，但目前每个浏览器都做了我想要的一半。

我的代码是：

```
function source1(){
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET", "http://website",true);
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4) {
            document.getElementById('textzone').value = xmlhttp.responseText
            var inputString = xmlhttp.responseText;
            alert(inputString);
            comparison(inputString)
        }
    }
    xmlhttp.send(null)
}

function comparison(inputString){
    xmlhttp1=new XMLHttpRequest();
    xmlhttp1.open("GET", "comparisondoc.txt", false);
    xmlhttp1.onreadystatechange=function() {
        if (xmlhttp1.readyState==4) {
            var compareString = xmlhttp1.responseText;
            alert(compareString)
            if(inputString==compareString){
                alert("Strings are equal");
            }
        }
    }
    xmlhttp.send(null)
} 
```

我只需要知道为什么文件无法在 ie8 中打开，或者为什么网站源代码在 Firefox 中显示为空白（在警报中）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:32:39.283

尝试添加 if(xmlhttp.status == 200) { } 东西。请记住，这两个都在循环状态“与”就绪状态。

从技术上讲，您可能在某处出错（我不想推测）停止下一个请求的进度或任何没有状态检查的情况。

此外，您“应该”尝试其他请求技术。即.. xmlhttp.onreadystatechange = function(){itsReady(inputString)}; // 我们保持这一行简短而简单地调用另一个函数，其中包含您的状态和就绪状态检查、响应内容和更多函数。

在非常正常的运行中，循环看起来像： hi rdySte:1///status 0//////// hi rdySte:2///status 200//////// hi rdySte:3// /状态 200//////// hi rdySte:4///状态 200////////

我在尝试 long onreadystatechange = function (){ ... All stuff..} 时遇到了很多奇怪的问题，我使用 short onreadystatechange 技术成功地运行了一组疯狂的请求功能。

我在最后一分钟注意到-> 你的函数之间的异步标志不同是有原因的吗？除非您有充分的理由，否则我会将它们全部设置为 true。

这将起作用：（*测试：2 页 t1.php 包含一个 num 或其他任何内容，并且 t2.txt 在 sam dir 中有一个 num ，因为调用了函数*）

```
function source1(){
                                            var avar = 1;
                                                xmlhttp=new XMLHttpRequest();
                                                xmlhttp.open("GET", "t1.php",true); // shortened f-names for ease of test
                                                xmlhttp.onreadystatechange = function(){jsg_snd(avar)};
                                                xmlhttp.send(null)
}

function jsg_snd(avar){
    if (xmlhttp.readyState==4) {
        if (xmlhttp.status == 200) {
                                            var inputString = xmlhttp.responseText;
                                                document.getElementById('text_zone').innerHTML = inputString;
                                                document.getElementById('text_zone1').value = inputString;
                                                // alert(inputString);//
                                                comparison(inputString)
        }
    }
}

function comparison(inputString){
        xmlhttp1=new XMLHttpRequest();
                                                xmlhttp1.open("GET", "t2.txt", true);
                                                xmlhttp1.onreadystatechange= function(){jsg_snd1(inputString);};
                                                xmlhttp1.send(null)
}

function jsg_snd1(inputString){
    if (xmlhttp1.readyState==4) {
        if (xmlhttp1.status == 200) {
                                            var compareString = xmlhttp1.responseText;
                                                        //alert(compareString)
            if(inputString==compareString){
                                                        //alert("Strings are equal");
                                                document.getElementById('text_zone').innerHTML += "; Ok "+inputString+"=="+compareString+"";
            }
        }
    }
} 
```

现在你体内的 html 应该如下所示：

```
 <tt id = 'text_go' onMouseUp="source1();" >Go!</tt>
    <tt id = 'text_zone' onMouseUp="text_zone.innerHTML = '';" >Click to clear!</tt>
    <input type ='text' id = 'text_zone1' onMouseUp="text_zone1.value = '';" value = 'Click to clear!' > 
```

额外的东西是为了*_* __s 和咯咯笑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:28:36.487

可能是浏览器支持问题。尝试以下代码来初始化您的 XMLHttpRequest ：

```
function createRequest() {
  try {
    request = new XMLHttpRequest();
  } catch (trymicrosoft) {
    try {
      request = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (othermicrosoft) {
      try {
        request = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (failed) {
        request = false;
      }
    }
  }

  if (!request)
    alert("Error initializing XMLHttpRequest!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:29:56.733

检查您的比较功能。您应该在 2 个地方使用 xmlhttp1 而不是 xmlhttp

```
function comparison(inputString){
    xmlhttp1=new XMLHttpRequest();
    xmlhttp1.open("GET", "comparisondoc.txt", false);
    xmlhttp1.onreadystatechange=function() {
        if (xmlhttp1.readyState==4) {
            <!--alert(xmlhttp1.responseText)-->
            var compareString = xmlhttp1.responseText;
            alert(compareString)
            if(inputString==compareString){
                alert("Strings are equal");
            }
        }
    }
    xmlhttp1.send(null)
} 
```

# jquery - JQuery-mobile : 通过 AJAX 请求加载 JQPlot 图

> ID：13761878
> 
> 赞同：0
> 
> 时间：2012-12-07T11:08:08.713
> 
> 标签：jquery, jquery-mobile, jqplot

我是 JQuery Mobile 的新手，我正在尝试根据用户选择显示带有 JqPlot 图形的页面。

我今天早上阅读并实验，通过设计，通过单击链接显示/加载的页面的 javascript 代码不会执行。

为了考虑加载页面的JS脚本，`data-ajax`链接的数据属性必须设置为false。但是在这种情况下，浏览器会重新加载所有页面，对于用户来说并不是平滑过渡。

```
<p><a href="myUrl.php" data-ajax= "false" data-transition="slideup" data-role="button" data-theme="c"> 
```

我找到了解决方法，**但我需要对我的代码进行专家审查**。思路是`pageshow`在图表容器页面上声明一个事件，通过JQuery函数`#page-detail`加载图表创建页面。`.load()`

通过这种方式，我能够：

*   顺利过渡到我的页面
*   有一个加载 div 我的图表将被加载
*   当数据加载和 JqPlot 图准备好时渲染我的图

我的代码：

```
 $(document).on('pageshow','#page-detail',function(){       
        //Apply a loading layer to the graph container
        $('#graph-container').html("<div id='graph-loading-layer' class='loading loading-col2a'>"+g_graphLoadingText+"</div>");                    

        //Load my graphic page creation. In this page, there are JS code to create the JQplot graphic
        $('#graph-container').load(g_baseUrl+"index/graph/format/html",{chartHeight : newHeight+'px'},function(response, status, xhr) {
            console.log('loaded')
        });                 
    }); 
```

我上面的解决方案很痛苦，我确信我可以轻松加载我的图表是否有人有更好的解决方案？更好的代码实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:12:49.677

JQuery`.load()`是加载页面的好选择，包括按照标准页面加载执行 Javascript 和应用 CSS。我在一个 MVC 单页网站的部分页面中使用了这种技术，发现它非常有效。

我对您对链接的担忧并不完全清楚，但在链接的“点击”处理程序中使用 JQuery .load() 肯定也可以。

您的代码看起来不错，很高兴看到您在异步加载发生时应用了加载层。我不确定 100% 确定该层如何为您工作，但我认为您可能需要在`.load()`完成后隐藏/删除它，因此您的加载后处理程序中可能需要一些额外的代码来做所以？

# c# - shell 中的 stderr 并复制到日志文件中

> ID：13761881
> 
> 赞同：3
> 
> 时间：2012-12-07T11:08:13.720
> 
> 标签：c#, wpf, process, stderr

我使用 Process 类在我的 WPF C# 应用程序中运行 pscp.exe（来自 Putty），如下所示：

```
Process p = new Process();
p.StartInfo.FileName = "pscp.exe";
p.StartInfo.Arguments = "-v -scp -pw xx toto@192.168.0.1:/path .";
p.Start();
p.WaitForExit(); 
```

该过程打开一个命令提示符并正确退出，就可以了。

现在，我想在进程的stderr中登录一个文件，没问题，我使用：

```
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardError = true; 
```

我在我的文件中打印流，但外壳中没有显示任何内容（没关系，这是一个重定向）。

我的需要是在 shell 中显示 stderr 并将其复制到我的日志文件中（没有重定向，我想要两次）。

编辑：一个代表我需要的明确示例：想象一个 WPF 应用程序，它有一个调用此函数的按钮：

```
Process p = new Process();
p.StartInfo.FileName = "pscp.exe";
p.StartInfo.Arguments = "-v -scp -pw xx toto@192.168.0.1:/path .";
p.Start();
p.WaitForExit(); 
```

该过程以 cmd 提示符开始（在其中打印 stdout + stderr），同时将 stderr 打印在日志文件中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:13:20.300

正如 Hylaean 所述：首先，您准备 Process 对象并注册事件：

```
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.CreateNoWindow = true;
p.ErrorDataReceived += new DataReceivedEventHandler(shell_ErrorDataReceived);
p.OutputDataReceived += new DataReceivedEventHandler(shell_OutputDataReceived);

shellOut = openWriter(outputFileName);   //  opens a StreamWriter 
```

在事件处理程序中，您可以使用 stderr 和 stdout 数据做您喜欢的事情：

```
// write out info to the display window
private static void shell_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    string s = e.Data;

    if ((s != null) && (shellOut != null))
    {
        SomeOutOrLog(s);         //  output or log the string to somewhere
        shellOut.WriteLine(s);
    }
}

private static void shell_ErrorDataReceived(object sender, DataReceivedEventArgs e)
{
    string s = e.Data;

    if (s != null) 
    {
        SomeOutOrLog(s);   //  output or log the string to somewhere
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:45:34.670

您需要订阅 ErrorDataReceivedEvent

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.errordatareceived.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.errordatareceived.aspx)

```
Process p = new Process();
p.StartInfo.FileName = "pscp.exe";
p.StartInfo.Arguments = "-v -scp -pw xx toto@192.168.0.1:/path .";
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardError = true;
p.ErrorDataReceived += (o, e) => Console.Error.WriteLine(e.Data);
p.Start();
p.WaitForExit(); 
```

# c# - 使用函数 sql 更新所有记录

> ID：13761888
> 
> 赞同：3
> 
> 时间：2012-12-07T11:08:56.220
> 
> 标签：c#, sql, sql-server-2008-r2

我正在寻找更新 sql 中的计算总和

基本上我有一张桌子：

```
ImportID  SeiralNumber   Day   Hour     value    Difference   Complete
1             123         1     1         6         NULL        0
2             123         1     2         8         NULL        0
3             123         1     5         21        NULL        0
4             123         1     6         28        NULL        0
5             222         2     2         12        NULL        0
6             222         2     5         18        NULL        0
7             222         2     4         16        NULL        0
8             222         1     12        8         NULL        0 
```

对于每个序列号，将有一天 1-365 和小时到 1-12，我要做的就是计算与之前记录的差异

因此，以 ImportID 6 为例，我需要获取同一天和前一小时的记录（importID 7），然后我需要使用 18 -17 = 1 的值字段更新差异。

注意 序列中可能存在间隙，如果没有先前的记录，则差异应保持为`NULL`。一旦他们被计算出来，他们需要被插入到一个新的表中，只有当差异是现在`not null`并且它已经不存在于表中时，在成功插入时它们被标记为**complete**。之前的记录也可以是前一天（第 1 天第 12 小时）之前的记录（第 2 天，第 1 小时）

目前我正在使用循环来选择空值，获取上一条记录，更新记录，如果它可以插入其他表，则更新 Completed 字段。

我的问题是，这正在处理一百万条记录，并且需要很长时间才能将适用的记录（已完成 = 0）选择到临时表中并遍历每个记录。

有没有更快的方法将这些作为更新声明进行批量处理？还是单独声明？

结果应该是

```
ImportID  SeiralNumber   Day   Hour     value    Difference   Complete
1             123         1     1         6         NULL        0
2             123         1     2         8         2           1
3             123         1     5         21        NULL        0
4             123         1     6         28        7           1
5             222         2     1         12        4           1
6             222         2     5         18        2           1
7             222         2     4         16        NULL        0
8             222         1     12        8         NULL        0 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:49:04.283

我想这基本上是不是？

```
DECLARE @TABLE TABLE
(
    ImportId INT,
    SerialNumber INT,
    Day INT,
    Hour INT,
    Value INT,
    Difference INT,
    Complete INT
)

INSERT INTO @TABLE VALUES
(1,123,1,1,6,NULL,0),
(2,123,1,2,8,NULL,0),
(3,123,1,5,21,NULL,0),
(4,123,1,6,28,NULL,0),
(5,222,2,1,12,NULL,0),
(6,222,2,5,18,NULL,0),
(7,222,2,4,16,NULL,0),
(8,222,1,12,8,NULL,0)

SELECT * FROM @Table

UPDATE T
    SET T.Difference = T.Value - TT.Value,
    Complete = 1
FROM
(
    SELECT *
    ,ROW_NUMBER() OVER (PARTITION BY SerialNumber ORDER BY Day ASC, Hour ASC) AS RowCounter
    FROM @TABLE
    WHERE Complete = 0 --Ignore completed ones  
)AS T
INNER JOIN
(
    SELECT *
    ,ROW_NUMBER() OVER (PARTITION BY SerialNumber ORDER BY Day ASC, Hour ASC) AS RowCounter
    FROM @TABLE
)AS TT
ON T.SerialNumber = TT.SerialNumber
WHERE
(
    T.RowCounter = TT.RowCounter + 1
    AND
    T.Day = TT.Day 
    AND
    T.Hour = TT.Hour + 1
)
OR
(
    T.Day = TT.Day + 1 
    AND
    T.Hour = 1
    AND
    TT.Hour = 12
)

SELECT * FROM @TABLE 
```

# c# - C# VS：每次加载表单时如何使更改保持不变

> ID：13761893
> 
> 赞同：2
> 
> 时间：2012-12-07T11:09:20.163
> 
> 标签：c#, arrays, visual-studio, constants

我正在使用 Visual Studio C# 制作一个简单的程序

该计划是关于车库预订系统的。在预订表格中，用户将从下拉列表中选择一个级别，并根据他的要求显示 10 个标签。用户将点击他需要的地点（标签现在将有一个汽车图像 - 表示已保留 - ）然后获取票。

我的问题是当用户返回主页并返回预订表格，并再次选择他之前选择的同一级别时。标签将显得干净而空旷，因为之前没有人预订过。

我的问题，使标签图像和文本更改并且每次加载表单时都不会返回其默认值的最佳方法是什么？

我已经声明了两个标签数组，实际上我添加了 20 个不可见标签。

```
public partial class Form3 : Form
{

      Label[] level1 = new Label[10];
     Label[] level2 = new Label[10]; 
```

我在构造函数中分配了标签：

```
public Form3()
    {

        InitializeComponent();
        label4.Click += new EventHandler(SpotChosen);
        label5.Click += new EventHandler(SpotChosen);
        label6.Click += new EventHandler(SpotChosen);
        label7.Click += new EventHandler(SpotChosen);
        label8.Click += new EventHandler(SpotChosen);
        label9.Click += new EventHandler(SpotChosen);
        label10.Click += new EventHandler(SpotChosen);
        label11.Click += new EventHandler(SpotChosen);
        label12.Click += new EventHandler(SpotChosen);
        label13.Click += new EventHandler(SpotChosen);

        label14.Click += new EventHandler(SpotChosen);
        label15.Click += new EventHandler(SpotChosen);
        label16.Click += new EventHandler(SpotChosen);
        label17.Click += new EventHandler(SpotChosen);
        label18.Click += new EventHandler(SpotChosen);
        label19.Click += new EventHandler(SpotChosen);
        label20.Click += new EventHandler(SpotChosen);
        label21.Click += new EventHandler(SpotChosen);
        label22.Click += new EventHandler(SpotChosen);
        label23.Click += new EventHandler(SpotChosen);

        level1[0] = label4;
        level1[1] = label5;
        level1[2] = label6;
        level1[3] = label7;
        level1[4] = label8;
        level1[5] = label9;
        level1[6] = label10;
        level1[7] = label11;
        level1[8] = label12;
        level1[9] = label13;

        level2[0] = label14;
        level2[1] = label15;
        level2[2] = label16;
        level2[3] = label17;
        level2[4] = label18;
        level2[5] = label19;
        level2[6] = label20;
        level2[7] = label21;
        level2[8] = label22;
        level2[9] = label23;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:22:02.953

每次加载表单时，标签都会重新呈现，并采用您设置的默认值。

有许多技术可以保留控件的最后状态。基本上，当预订表格关闭时，您需要在内存中存储标签状态的标志。这可以在 Form_unload 事件上完成，您可以使用的一种技术是将它们保存在静态字典中，其中字符串键可以是标签 id，而 SomeFlagType 是您用来标记此“Spot 已保留”的某种类型，如果我没有误会你的话。所以你的值可能是一个布尔标志，甚至是你存储在你想要保留的控件中的值。

在 Form_Load 事件中，您可以通过标签的 id “查询”字典并返回标志或值并将其应用于标签。

如果它是一个多用户客户端-服务器环境，并且您希望将静态字典存储在服务器端供所有人查询，则方法会略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:23:37.423

首先，在您的表单中使用一个面板（您可以在其中放置所有标签），以便您可以通过这种方式将事件处理程序添加到所有标签：

```
 foreach (Control c in Panel1.Controls)
       {
                c.Click += SpotChosen;
       }
 private void SpotChosen(object sender, EventArgs e)
      {
          var label = sender as Label;

      } 
```

为了保存控件的设置，我认为您可以使用`Properties.Settings.Default.Save();` [http://msdn.microsoft.com/en-us/library/bb397755.aspx](http://msdn.microsoft.com/en-us/library/bb397755.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:15:46.620

首先 - 命名。这么多带有名称 labelN 的标签。很容易混淆。此外，您不需要 23 次设置事件处理程序，您可以遍历特定标签并为所有标签分配一个事件处理程序。我建议你用标签来解决这个问题。也许您还需要编写 UserControl 。

第二。尝试使用模式 Singleton 或 State，或者更好地以 MVC/MVP 风格实现您的 windows 窗体应用程序。至少 Singleton 对您来说是最简单的解决方案。

# c# - 在控制台应用程序中覆盖 txt 文件 C# 中的输出

> ID：13761894
> 
> 赞同：1
> 
> 时间：2012-12-07T11:09:22.677
> 
> 标签：c#, file

```
if (string.IsNullOrEmpty(indata))
{
    StreamWriter sw = new StreamWriter(@"c:\arjun.txt", true);
    sw.WriteLine("0");
    sw.Close();  
} 
```

这是我的代码。如何覆盖`arjun.txt`我需要单个结果的文件中的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:10:13.270

该`true`部分的意思是“附加” - 要么完全摆脱它，在这种情况下，您将使用`StreamWriter`由默认值覆盖的构造函数重载，或者更改`true`为`false`.

或者最好只使用：

```
File.WriteAllLines(@"c:\argun.txt", new[] {"0"}); 
```

当您*可以*一次性指定所有数据时，其中的便捷方法[`File`](http://msdn.microsoft.com/en-us/library/3saad2h5.aspx)非常有用。

# google-chrome - 供应商前缀 webkit 和 WebKit (diff case) 有什么区别？

> ID：13761898
> 
> 赞同：0
> 
> 时间：2012-12-07T11:09:42.380
> 
> 标签：google-chrome, webkit, vendor-prefix

我看到供应商前缀用于某些 API（例如 webkitURL）中的较小情况和某些 API（WebKitBlobBuilder）中的骆驼情况。有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:37:10.903

## PhistucK 在 Chrome DevTools Google 群组上的回复：

构造函数的 WebKit 前缀大写。成员（属性、方法、事件）具有小写前缀。URL 不是构造函数，它的命名只是有点不合常规。Blob 是 WebKitBlob window.URL 是 window.webkitURL navigator.getUserMedia 是 navigator.webkitGetUserMedia

# ruby-on-rails-3 - 使用 Devise 计算每日活跃用户

> ID：13761904
> 
> 赞同：3
> 
> 时间：2012-12-07T11:10:00.977
> 
> 标签：ruby-on-rails-3, devise

我是一名 RoR 开发人员，我想为我的网站计算**DAU**。DAU 我的意思是：

**DAU - 访问我的网站并登录或访问该网站并已登录的用户总数。**

我在我的网站中实现了[**设计**](https://github.com/plataformatec/devise)，因为它跟踪 current_sign_in_at。后来发现这些属性的意思是：

**current_sign_in_at** - 该人最近一次登录我的网站。（使用它，我可以获得访问我的网站并登录的人数。）

**但我错过了访问该网站并已登录的人数。**

我发现实现它的一种方法是在延迟作业中触发一个函数，该函数在调用根操作和加载我的网站主页时更新时间戳。但由于我的网站每分钟获得大约 1000 - 2000 次点击，我猜这个功能将成为瓶颈。

任何人都可以请建议我实施它的最佳方法。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:28:17.597

可能的解决方案：

*   使用 Google Analytics（自定义变量）、KISSmetrics（访问者身份）或 Mixpanel（distinct_id）之类的服务并将用户 ID 发送给他们，您就可以找到每日活跃用户。

*   您可以执行您提到的操作，每次收到请求时将用户的最后一次活动时间存储在数据库中，如果每分钟获得 1000-2000 次点击，您可能希望将其存储在内存存储中，如 redis反而。如果用户将从不同的路径访问您的网站，而不仅仅是根 url，您可以在应用程序控制器中创建一个 after_filter，以使用用户的当前时间更新 redis 存储。

*   如果您对查看更多日活跃用户感兴趣，那么在另一个数据库中为您的用户创建日志是值得的。我再次建议在 application_controller 中使用 before 或 after_filter 来排队作业以存储时间、user_id 以及您可能感兴趣的任何其他数据。我正在使用与我的 ActiveRecord MySQL 数据库分开的 mongo db 来执行此操作。

# php - 从命令行调用 PHP 函数

> ID：13761915
> 
> 赞同：44
> 
> 时间：2012-12-07T11:10:32.690
> 
> 标签：php, function, command-line-interface

我有一个名为 address.php 的文件，其中包含一些函数。我想从命令行调用该文件中的特定函数。如何？

该函数的名称称为 exportAddress，该函数需要一个参数。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-07T11:12:52.163

通过使用该`-r`参数，您可以在线运行脚本。

`php -r "require 'address.php'; exportAddress(12345);"`

没有其他选择。PHP 中的函数只能由 PHP 脚本调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T11:19:44.377

采用

```
php  -r 'include  "/var/www/test/address.php";exportAddress(1);' 
```

where `"/var/www/test/arr.php"`是文件名，包括路径，并且`exportAddress()`是该文件中的一个函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-04T05:12:14.800

将此添加到文件“/var/www/test/address.php”的顶部...

```
foreach ($argv as $i=>$arg )
{
    if ( $arg == "exportAddress" )
    { 
        exportAddress($argv[$i+1]);
    }
} 
```

然后从命令行执行：

```
php /var/www/test/address.php exportAddress 12345 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-18T09:50:23.150

您可以按如下方式组织您的文件“somefile.php”：

```
function func1(){....}
function func2(){....}
function func3(){....}
....
foreach ($argv AS $arg){
    function_exists($arg) AND call_user_func($arg);
} 
```

然后从命令行或 Linux cronjob，运行以下命令：

```
php /path/to/somefile.php arg1 arg2 arg3 ... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-15T19:19:17.130

自 PHP 5.1.0（Windows 上为 7.1.0）起 PHP 可以通过运行从 shell 执行

```
php -a 
```

这将启动 PHP 的交互式 shell。更多信息[在这里](https://www.php.net/manual/en/features.commandline.interactive.php)。

使用 PHP 的 shell，运行时您可以像从文件中获取文件一样获取文件。

因此，如果上一个命令是从包含该文件的文件夹中运行的：

```
php > require 'myFile.php'; 
```

如果它在子文件夹中：

```
php > require 'path/to/file/myFile.php'; 
```

然后执行 myFile.php 中定义的任何函数。

```
php > myFunction(myParamsIfAny); 
```

我想您可以使用在同一文件中定义的任何变量，或者需要包含所需变量的任何其他文件，尽管我没有尝试过。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-25T07:53:58.210

要扩展 Samer Ata 和 Simon Rodan 的答案，您可以使用以下命令来执行具有任意数量参数的任何函数：

```
if(isset($argv[1]) && function_exists($argv[1])) {
  $parameters = array_slice($argv, 2);
  call_user_func($argv[1], ...$parameters);
} 
```

这是通过删除脚本和函数名称`$argv`，然后使用扩展运算符 ( `...`) 将数组中的每个元素解释为`call_user_func`.

从 PHP 5.6 开始支持操作符（5.5 可以使用函数做一些事情）。您可以在[PHP 官方文档](https://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list)中了解更多信息。为了完整起见，这也称为参数解包。

# iphone - GKLocalPlayer isAuthenticated 属性总是返回 NO

> ID：13761918
> 
> 赞同：0
> 
> 时间：2012-12-07T11:10:34.820
> 
> 标签：iphone, ios, game-center

我用代码块检查本地玩家是否通过 Game Center 进行了身份验证

```
if ([[GKLocalPlayer localPlayer] isAuthenticated]) 
{
    NSLog(@"authenticated");
} 
```

此代码在我第一次使用 GameCenter 登录时运行。当我杀死我的应用程序并重新启动时，它返回 NO（播放器未通过身份验证）

每次启动应用程序时都必须登录吗？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:44:21.747

You have to authenticate localPlayer every time your app becomes active but the user only has to input his user/password info the first time. After that it "remembers" who the user is.

Note that the authentication method in iOS 5 is not the same as iOS 6.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:39:49.057

是的，每次应用启动时都必须调用 authenticatedPlayer。第一次 iOS 会提示用户获得 GameCenter 权限。不用担心调用登录，一旦用户选择允许游戏中心，它会自动登录验证。

# objective-c - IOS上db的理想位置

> ID：13761919
> 
> 赞同：0
> 
> 时间：2012-12-07T11:10:41.233
> 
> 标签：objective-c, ios, cordova

我正在使用 phonegap 进行 IOS 应用程序开发。现在，phonegap 默认尝试在“NSCachesDirectory”中查找数据库，但每当 IOS 遇到内存问题时，它会尝试从“NSCachesDirectory”中删除数据，因此数据不安全。如果我没记错的话，这个问题在科尔多瓦 2.1.0 中得到了解决，在该版本中备份了数据，然后再进行恢复。所以，只是想确认我是否朝着正确的方向前进，或者数据本身是否可以存储在“NSDocumentDirectory”中，以便数据得到保护，并且 phonegap 在“NSDocumentDirectory”中查找 db 而不是缓存目录。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:37:21.310

只有用户生成的或**应用程序无法重新创建的**文档和其他数据，才应存储在**/Documents 目录**中（***您可以将 DB 存储在 Documents 目录中***）

可以再次下载或重新生成的数据应存储在 /Library/Caches 目录中。

# java - 如何对调用 super 的重写方法进行单元测试？

> ID：13761920
> 
> 赞同：5
> 
> 时间：2012-12-07T11:10:44.563
> 
> 标签：java, unit-testing, junit

*http://stackoverflow.com/questions/6645263/unit-testing-overridden-methods-which-call-super （这个问题的措辞相似但不一样）*

我有一些类似的东西：

```
public class SuperClass {
   private int superClassInteger = 2;

   public void superClassMethod() {
      superClassInteger = 5;
   }

   public int getSuperClassInteger() {
      return superClassInteger();
   }
} 
```

然后在我的测试中我有：

```
public class SuperClassTest {
   public void testSuperClassMethod() {
       SuperClass superClass = new SuperClass();
       superClass.superClassMethod();
       assertEquals(5, super.getSuperClassInteger())
   }
} 
```

然后我有一个子类：

```
public class SubClass {
   private int subClassInteger = 2;

   public void subClassMethod() {
      super.superClassMethod();
      subClassInteger = 32;
   }

   public int getSuperClassInteger() {
      subClassInteger;
   }
} 
```

然后我对子类的测试：

```
public class SubClassTest {
   public void testSubClassMethod() {
       SubClass subClass = new SubClass();
       subClass.subClassMethod();
       assertEquals(5, subclass.getSuperClassInteger());
       assertEquals(32, subclass.getSubClassInteger())
   }
} 
```

我的问题是为了测试子类的行为，我正在重复我为超类所拥有的测试代码。我可以拿出来：`assertEquals(5, subclass.getSuperClassInteger());`因为我只想测试子类的业务逻辑。但是，这样做的问题是，如果有人不小心删除了`superClassMethod`对测试的调用，仍然会通过。所以我需要验证是否调用了 super。测试这个用例的常用方法是什么？

注意：我知道组合/策略模式与继承有助于解决这个问题，但要解决这个问题，你基本上是在说我不应该重写方法并在我的代码中调用 super（我很难相信永远不会有用于）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T11:17:19.347

使用模拟间谍。您可以使用该测试框架检查几乎所有方法调用。

[http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T17:37:18.397

这可能不是您想要的答案（即不是一种解决方法），~~而是您应得的答案，~~但您永远不应该重写方法并调用 super。

我正在做一个做很多事情的遗留项目，维护、调试和测试是一场噩梦。

相反，最好使用带有模板方法模式的抽象类：

# 前

```
public class SuperClass<T> {
  public void include(T t) {
    validate(T);
    dao.save(T);
  }

  // I've found code like that.
  public void validate(T t) {
  }
}

public class SubClass1 extends SuperClass<MyClass> {
  @Override
  public void include(MyClass mc) {
    doStuff(mc);
    doMoreStuff(mc);
    super.include(mc);
  }

  @Override
  public void validate(MyClass mc) {
    doValidationStuff();
  }
}

public class SubClass2 extends SuperClass<AnotherClass> {
  @Override
  public void include(AnotherClass ac) {
    doDifferentStuff();
    super.include(mc);
  }
} 
```

# 后

```
public abstract class AbstractClass<T> {
  abstract void validate(T t);

  // this method can now be tested
  public void include(T t) {
    validate(T);
    dao.save(T);
  }
}

public class Class1 extends AbstractClass<MyClass> {
  public void validate(MyClass mc) {
    doValidationStuff();
    doStuff(mc);
    doMoreStuff(mc);
  }
}

public class Class2 extends AbstractClass<AnotherClass> {
  public void validate(AnotherClass ac) {
    doDifferentStuff();
  }
} 
```

可以看到，这种重构简化了维护和测试，不用担心在Class1和Class2测试中必须mock超类方法调用，代码封闭修改开放扩展，即更易维护.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:34:48.747

使用 JMockit 并通过验证检查对 super 的调用。

[JMockit](http://code.google.com/p/jmockit/)

这个例子

```
public void test {
  SubClass subClass = new SubClass();
  subClass.subClassMethod();
  new Verifications() {
    // mock only this method of superClass - and only in this test
    @Mocked (methods = "superClassMethod") 
    SuperClass superClass; 
    {
     superClass.superClassMethod();
     times = 1; // specify invocation count
    }
  };

 } 
```

# razor - Razor：从页面模板上的组件模板中检索变量

> ID：13761924
> 
> 赞同：3
> 
> 时间：2012-12-07T11:10:54.720
> 
> 标签：razor, tridion, experience-manager

* * *

大家好，我一直在研究一组 Razor 模板，这些模板既可以使用 Experience Manager 进行站点编辑，又可以使用 Twitter 引导程序完全响应多个屏幕宽度。因此，我需要根据 Experience Manager 编辑器添加或删除的内容动态操作 DOM 输出，但仍保持响应式设计。这种结构的一部分是遵守 twitter bootstrap 规定的规则。

twitter 引导程序通过使用类引入动态计算的 div 宽度来实现出色的[响应式设计。](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)例如， A`<div class="span12>`使用包装器的整个宽度。“span6”有效地使用了一半，并计算了一定的边距以允许另一个具有“span6”的 div。但是，这仅在调用前面的类时才有效`<div class="row-fluid">`，并且只要跨度`<numbers>`实际上加起来正好为 12。当我需要在`<div class="row-fluid">`实际达到此数字时关闭时，就会出现问题。

澄清一下：它必须像这样输出

```
<div class="row-fluid">
    <div class="span6">..code</div>
    <div class="span4">..code</div>
    <div class="span2">..code</div>
</div> 
```

使用**组件模板**`<div class="span[#]">`呈现，以便允许**页面模板**呈现的中的多个组件。**`<div class="row-fluid>`**

 ****但是，从**组件模板级别**来看，我似乎无法检索页面本身上实际存在的该模板组件的实际数量。我根据组件本身的架构选项计算所用组件的宽度。我使用以下**组件模板**代码来正确呈现它：

```
@{
var spanClass = String.Empty;
if (Fields.HasField("component_width") && Fields.component_width != null) {
    if (Fields.component_width.ToLower() == "full") {
        spanClass = "span12";
    } else if (Fields.component_width.ToLower() == "half") {
        spanClass = "span6";
    } else if (Fields.component_width == "40%") {
        spanClass = "span5";
    } else if (Fields.component_width == "35%") {
        spanClass = "span4";
    } else if (Fields.component_width == "25%") {
        spanClass = "span3";
    }
}
}
<div class="@spanClass">...code 
```

`<row-fluid>`回答我的问题：如果达到数字 12，我需要能够关闭div。因此，如果选择了一个带有“Full”（宽度）选项的组件，则需要出现以下输出代码：

```
<div class="row-fluid">
    <div class="span12">..code</div>
</div> 
```

如果页面上有两个组件选择了“half”选项，则必须允许

```
<div class="row-fluid">
    <div class="span6">..code</div>
    <div class="span6">..code</div>
</div> 
```

请注意最后的关闭 div。有什么方法可以`var spanClass = String.Empty;`从页面模板访问我在组件模板上创建的变量？就像是：

```
@foreach (var cp in GetComponentPresentationsByTemplate("XM_Generic Content")) {
            @if (cp.Component.spanClass == "span6") {
                <div class="row-fluid">
                @cp.RenderComponentPresentation()
                @if (cp.Index == 1) {
                   </div>
                }
            }
} 
```

我还在了解 Razor 模板、响应式设计的实用性，当然还有 StackOverflow。很有可能我完全错过了一些东西，在我的代码中犯了愚蠢的错误，只是问了一个愚蠢的问题。无论如何，让我知道。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T13:34:09.857

该包不在模板运行时之间共享，因此这种行为是正常的（无法从不同的实例看到在一个模板中设置的变量）。

有一些方法可以解决这个问题，但您应该考虑一下，也许 Tridion 选择隔离模板执行是有充分理由的。

请参阅[此处](http://www.tridiondeveloper.com/using-context-variables-as-a-templating-cache)了解解决此问题的方法之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T18:55:53.233

使用 ContextVariables 字典的标准技术不允许您在 CT 中设置某些内容并从 PT 访问它。实际上，每次渲染组件时，渲染上下文都会从页面渲染上下文中获取变量的新副本。回信给他们，因此无效。有一种技术可以解决这个问题，[在 tridion-practice 上有详细描述](http://code.google.com/p/tridion-practice/wiki/PassContextFromOneComponentRenderToAnother)。如前所述，诉诸这些技术不应该是您的第一选择，但有时您需要这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T11:29:42.723

目前，用户似乎正在定义组件字段中的宽度位置。我认为，它很典型，但是如果您创建 5 个将调用相同 Razor TBB 的组件模板，并在组件模板上定义一个参数模式，可以在其中设置组件的宽度，那么之后您可以轻松地在页面模板。****

# external - flowplayer 在加载外部源时开始/停止

> ID：13761927
> 
> 赞同：1
> 
> 时间：2012-12-07T11:10:58.637
> 
> 标签：external, playback, flowplayer

我有一个来自外部提供商的 flowplayer 中显示的视频，我只有这几行可以将视频嵌入到 ma 页面：

```
<script src="http://domain.com/live/js/jquery.min.js"></script>
<script src="http://domain.com/live/js/flowplayer.min.js"></script>
<script src="http://domain.com/live/js/flowplayer.playlist.min.js"></script>
<script src="http://domain.com/live/js/mi/vod.de.php?id=10857"></script> 
```

播放器在页面加载时立即启动。

这是播放器的 div：

```
<div id="panes">
    <a id="player" style="display:block;width:624px;height:344px;"></a>
 </div> 
```

如何手动停止、暂停和播放视频？如何找出如何与播放器“交谈”以停止/播放视频？

我试过了：

```
$f('player', '??', { 
```

但是我怎么知道 swf 文件的路径呢？

请帮忙！

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:10:55.287

1.  您必须使用[Flowplayer](http://flowplayer.org/download/)的最新版本。
2.  使用此格式启动 Flowplayer

（你可以在这里找到一些讨论[https://github.com/flowplayer/flowplayer/issues/19](https://github.com/flowplayer/flowplayer/issues/19)）

> ```
> $(document).ready(function () {
>     try {         
>        flowplayer().load([{ mp4: "http://stream.flowplayer.org/bauhaus/624x260.mp4" }]);
>     } catch (e) {
>                     alert(e.message);
>                 }
> 
>     }); 
> ```

# antlr4 - 我在哪里可以找到 G4 结构 ANTLR4 的 g4 文件？

> ID：13761931
> 
> 赞同：-2
> 
> 时间：2012-12-07T11:11:27.583
> 
> 标签：antlr4

我想用 ANTLR 4 验证 G4 结构文件...可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:42:54.667

您正在寻找 ANTLRv4Parser.g4 和 ANTLRv4Lexer.g4。您可以在 Pragmatic Bookshelf 网站 (pragprog.com) 上的“The Definitive ANTLR 4 Reference”一书的源代码下载中找到它们。检查代码/参考目录。

# ios - Xcode 派生数据位置

> ID：13761934
> 
> 赞同：33
> 
> 时间：2012-12-07T11:11:31.873
> 
> 标签：ios, xcode

Xcode 继续将派生数据写入项目文件夹，即使它在 xcode 项目设置中设置为默认值，除了项目设置之外，还有其他方法可以强制执行此操作吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-07T11:55:35.523

默认情况下，Xcode 将所有项目的派生数据存储在主目录下的单个共享文件夹中，位置如下：

```
~/Library/Developer/Xcode/DerivedData 
```

更新：

**在 Xcode 6 中，您可以从Preferences -> Locations Tab**访问或更改派生数据位置

 **![在此处输入图像描述](../Images/5f428c8ac9e4c6187d3f6c835dd2daef.png)**

# c# - Timer C# Stop() 并没有真正停止

> ID：13761937
> 
> 赞同：1
> 
> 时间：2012-12-07T11:11:52.360
> 
> 标签：c#, timer

我有一个表单，其中包含一个文本框，显示时间间隔为 1 秒，直到 2 分钟。它工作正常。但是，我需要计时器在一轮游戏结束时停止，并在单击另一个表单的按钮时重新开始。所以我`_timer.Stop()`在 timer_tick 事件处理程序和Form 2`_timer.Start()`的按钮事件处理程序中。`click`

我的问题是计时器从经过多少时间开始，直到我按下另一个表单上的按钮，而不是从 0:00 开始。有任何想法吗？

这是有关计时器的代码：

```
 private DateTime _myDateTime;
 private System.Windows.Forms.Timer _timer;
 private DateTime newDate;

 public Tournament()
 {
     _timer = new System.Windows.Forms.Timer();
     _timer.Interval = 1000;
     _timer.Tick += Timer_Tick;
     _myDateTime = DateTime.Now;

     newDate = new DateTime();
     newDate = newDate.AddMinutes(2.00);
     _timer.Start();
     InitializeComponent();
 }

 void Timer_Tick(object sender, EventArgs e)
 {
        var diff = DateTime.Now.Subtract(_myDateTime);
        this.textBox1.Text = diff.ToString(@"mm\:ss");

        DateTime dt = Convert.ToDateTime(diff.ToString());

        if (newDate.Minute == dt.Minute)
        {
           _timer.Stop();
           _myDateTime = DateTime.Now;

           displayPointsOrResults();

           this.textBox1.Text = diff.ToString(@"mm\:ss");  
        }
  } 
```

在`displayPointsOrResults()`我创建另一个表单的实例中，`Points()`所以在点表单中我有按钮 1，我在它的事件处理程序中有这个，除了与计时器无关的其他事情： `tournament.Timer1.Start();`

我从锦标赛课程中获取计时器并重新开始的地方。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:14:19.730

> 我的问题是计时器从经过多少时间开始，直到我按下另一个表单上的按钮，而不是从 0:00 开始。

是的，它会 -`_myDateTime`当你*停止*计时器时你正在重置：

```
_timer.Stop();
_myDateTime = DateTime.Now; 
```

您应该将第二行移到重新启动它的位置。

请注意，您的标题不正确-计时器确实*在*停止，因为它不再滴答作响。如果您明白我的意思，计时器实际上并没有执行计时 - 它*只是*定期调用事件处理程序的一种方式。问题在于事件处理程序本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:15:01.087

啊全球vars，祝福和诅咒在一起。当您按下按钮时，您
是否已将 DateTime.Now 重置为？`_myDateTime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:16:58.787

当您停止计时器并重新启动它时，应将日期时间设置为现在。

```
_myDateTime = DateTime.Now; 
```

# php - PHP - 从数据库中选择多个列

> ID：13761939
> 
> 赞同：0
> 
> 时间：2012-12-07T11:11:55.383
> 
> 标签：php, forms, search, multiple-columns

```
$search_exploded = explode (" ", $search);
foreach($search_exploded as $search_each) {
    $x++;
    if($x==1) 
        $construct .="Name  LIKE '%$search_each%'";
    else
        $construct .="AND Name LIKE '%$search_each%'";
}

$construct ="SELECT * FROM Rating, Attraction WHERE $construct" ; 
```

* * *

**我有列名称、摘要、描述、营业时间、地址、邮政编码**

我想要做的是触发 '$construct' 查询中的所有这些列，其中包括 LIKE '%$search_each%'

结构是什么，我尝试过 OR、AND 和 UNITE

我已经没有想法了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:23:08.230

```
$columns = array('Name', 'Summary', 'Description', 'OpeningHours', 'Address', 'Postcode')
foreach($columns as $column) {
    $search_exploded = explode (" ", $search[$column]);
    foreach($search_exploded as $search_each) {
        $x++;
        if($x==1) 
            $construct .="$column  LIKE '%$search_each%'";
        else
            $construct .="AND $column LIKE '%$search_each%'";
    }
} 
```

您必须记住，`$search`现在是一个数组，其中搜索条目作为每个列键的字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:16:33.653

像这样使用`concat_ws()`：

```
$construct ="SELECT * FROM Rating, Attraction WHERE
concat_ws(Name, Summary, Description, OpeningHours, Address, Postcode)
LIKE '%$search_each%'"; 
```

希望它工作...

# android - 天气预报程序

> ID：13761940
> 
> 赞同：1
> 
> 时间：2012-12-07T11:11:58.200
> 
> 标签：android, android-widget, weather

我正在做一个“天气预报”项目，信息是从[这个静态 URL](http://myexample.info/?cities)中给出的。我必须获得城市列表及其条件。例如，当我输入 Tokyo 时，它应该显示如下：

```
Tokyo, Japan#14#Cloudy ## 
```

我还创建了`ArrayList`城市列表。我已经完成了布局 xml 文件。

输出格式为纯文本：

*   每个输出行都以换行符结束`(\n)`
*   流程总是由包含两个符号的行终止`(##)`

它给了我错误：

```
Invalid layout of java.lang.String at value

A fatal error has been detected by the Java Runtime Environment:

Internal Error (javaClasses.cpp:129), pid=6464, tid=7052
fatal error: Invalid layout of preloaded class 
```

这是我的代码：

```
import android.app.Activity;
import android.os.Bundle;

public class Meteo extends Activity{

        @Override
    protected void onCreate(Bundle savedInstanceState) { {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.meteo);

        String url = `http://myexample.info/?cities`;
        // Weather information
        String weather = "Tokyo, Japan#14#Cloudy ##";
        // Get the city name
        String city = url.substring(url.indexOf("?") + 1).trim();
        System.out.println(city);
        // Check the weather of the city: 14#Cloudy
        // Remove city name
        // Remove last #
        if (weather.toLowerCase().contains(city.toLowerCase())) {
            // Get condition: 
            String condition = weather.substring(weather.indexOf("#") + 1,
                    weather.length() - 2);
            System.out.println(condition);
            // Split with # sign and you have a list of conditions
            String[] information = condition.split("#");
            for (int i = 0; i < information.length; i++) {
                System.out.println(information[i]);
            }
        }

            @Override

            protected void onPause() {
                // TODO Auto-generated method stub
                super.onPause();
            } 
```

如何解决无效布局错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:21:15.107

更改字符串“ ```url =http://myexample.info/?cities `

至

字符串 url = "http://myexample.info/?cities";

由于 //.

# visual-c++ - bjam 的 cxxflags 选项是否删除尾随减号？

> ID：13761947
> 
> 赞同：2
> 
> 时间：2012-12-07T11:12:27.353
> 
> 标签：visual-c++, boost, boost-build, bjam

我正在尝试将 Visual-C++ 编译器选项`/Zc:wchar_t-`（注意尾随减号将其关闭）传递给 bjam，boost 的构建工具，如下所示：

```
bjam --build-type=complete runtime-link=shared variant=debug toolset=msvc-8.0 cxxflags="/Zc:wchar_t-" threading=multi debug-symbols=on debug-store=database --with-program_options stage 
```

但是，当我检查包含生成的编译器选项 (at `...\boost_1_44_0\bin.v2\libs\program_options\build\msvc-8.0\debug\debug-store-database\threading-multi\options_description.obj.rsp`) 的 *.rsp 文件时，它将始终包含`/Zc:wchar_t`as 选项，无论我是否指定`-`。

有什么东西`cxxflags`可以从传递的选项中删除尾随的减号吗？

[**请注意**，该选项`/Zc:`已设置在 中`tools\build\v2\tools\msvc.jam`，导致当我使用 cxxflags 指定该选项时，该选项在 RSP 文件中提供了两次——仍然是带有 cxxflags 的选项总是删除其尾随减号，而——如果我编辑 msvc.jam—— msvc.jam 中的一个被逐字记录，减号被保留。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-09T13:48:25.950

我使用了一种解决方法。添加空格以避免删除尾随 -

```
cxxflags="/Zc:wchar_t- " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T08:29:00.453

简短的回答是：是的，bjam 搞砸了。

可以破解`.jam`文件以手动提供此选项，然后它就可以工作。（是的，我会提供确切的位置，但我已经失去了那个测试环境。）

# ruby - Sass @function 返回前缀或后缀列表

> ID：13761948
> 
> 赞同：-3
> 
> 时间：2012-12-07T11:12:29.910
> 
> 标签：ruby, sass

我正在尝试编写一个 sass `@function function_name($prefix, $list_of_values)` ，它将返回一个值列表，其中每个值`$list_of_values`都将以逗号为前缀`$prefix`和后缀，最后一个除外。可能它已经存在于 sass 或 compass 中，我只是不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:16:21.473

这是一种写法：

```
@function prefixer($prefix, $list) {
    $new-list: ();
    @for $i from 1 to length($list) {
        $new-list: append($new-list, $prefix + nth($list, $i), comma);
    }
    $new-list: append($new-list, nth($list, length($list), comma));
} 
```

# c# - 我的 IEnumerable 是否应该枚举作为参数传递给 AddRange() 之类的方法的 IEnumerable？

> ID：13761954
> 
> 赞同：2
> 
> 时间：2012-12-07T11:12:48.070
> 
> 标签：c#

我的班级实现`IEnumerable<T>`. 类还实现：

```
void AddRange(IEnumerable<T> items) 
{
    // items can be a deffered query against the collection items being added to
    var itemslist = items.ToList();
    ...processing and adding...
} 
```

但我有些怀疑*转换为静态集合是否是一个好的设计*。

例如 List 本身没有这样的东西：

```
var list = new List<int> {1, 2, 3};
list.AddRange(list.Select(i => i+list.Count).ToList()); 
```

没有例外。

```
var list = new List<int> {1, 2, 3};
list.AddRange(list.Select(i => i+list.Count)); 
```

InvalidOperationException ：在枚举期间修改了集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:19:20.293

`List<T>.AddRange`将根据传递的序列是否实现而表现不同`ICollection<T>`。在第一种情况下，`List<T>`implements `ICollection<T>`，因此`AddRange`可以调用`CopyTo`进行批量复制。在第二个中，您只是传入了一个任意的`IEnumerable<T>`，因此它必须对其进行迭代才能继续。

不过，从根本上说，在第二种情况下，您正在做一些奇怪的事情。简单的答案是不要那样做。我不希望结果得到保证 - 它是否急切地迭代传递的序列*然后*复制它，或者它是否懒惰地执行它应该取决于实现。任何一种实现都适用于任何*健全*的序列。

# mysql - COALESCE 两个日期返回二进制？

> ID：13761960
> 
> 赞同：3
> 
> 时间：2012-12-07T11:12:52.640
> 
> 标签：mysql, sql, mysql5

为什么`COALESCE(date1,date2)`返回`Blob`（二进制）？两列都是 type `DATETIME`。

这是完整的sql查询：

```
SELECT COALESCE( last_modified, date_purchased )As LastModifiedOrPurchased
FROM Orders
ORDER BY COALESCE( last_modified, date_purchased )DESC
LIMIT 1; 
```

我通常使用 SQL-Server 作为 rdbms 但需要编写一个同步工具。现在我正在尝试选择两个日期之一。如果`last_modified`是 null`date_purchased`应该返回。

但即使有多个记录的两个日期都不为空，查询也只会返回`Blob`. 如何获得正确的最后日期？

**编辑**：在[**SQL-Fiddle**](http://sqlfiddle.com/#!8/35cae/3/0)上，它不能用 MySql 5.1.61 重现（我在 5.0.51 上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:48:05.947

这可能是一个已修复的错误：**[bug-35662](http://bugs.mysql.com/bug.php?id=35662)**

> [2008 年 3 月 28 日 22:44] 帕特里克·克鲁斯
> 
> 描述：在**5.0.51a 上为 Windows**
> `COALESCE(date, date)` XP 32 位返回 varbinary （仅测试过这种风格）
> 
>  **`COALESCE(date,date)`在 Mac OS 上返回日期
> 
> …………
> _
> _
> 
> [2008 年 3 月 31 日 17:41] Omer BarNir
> 该错误已在 5.0.52 中修复，并且在测试 5.0.56 时未观察到 - 关闭**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:00:17.440

我仍然不知道为什么会在 MySql Workbench（以及 MS Visual Studio）中发生这种情况。但我找到了一种解决方法。我只是将结果转换为`DATETIME`它并按预期工作：

```
SELECT CAST(COALESCE( last_modified, date_purchased )AS DATETIME)As LastModifiedOrPurchased
FROM Orders
ORDER BY COALESCE( last_modified, date_purchased )DESC
LIMIT 1; 
```

编辑：正如杰克所评论的，`IFNULL`作品也：

```
SELECT IFNULL( last_modified, date_purchased )As LastModifiedOrPurchased
FROM Orders
ORDER BY IFNULL( last_modified, date_purchased )DESC
LIMIT 1; 
```**

# python - 调用 close() 后大文件没有立即刷新到磁盘？

> ID：13761961
> 
> 赞同：14
> 
> 时间：2012-12-07T11:12:52.673
> 
> 标签：python, windows, io, python-3.x, large-files

我正在用我的 python 脚本创建大文件（超过`1GB`，实际上有 8 个）。在我创建它们之后，我必须创建将使用这些文件的进程。

脚本如下所示：

```
# This is more complex function, but it basically does this:
def use_file():
    subprocess.call(['C:\\use_file', 'C:\\foo.txt']);

f = open( 'C:\\foo.txt', 'wb')
for i in 10000:
    f.write( one_MB_chunk)
f.flush()
os.fsync( f.fileno())
f.close()

time.sleep(5) # With this line added it just works fine

t = threading.Thread( target=use_file)
t.start() 
```

但应用程序的`use_file`行为就像`foo.txt`是空的。发生了一些奇怪的事情：

*   如果我`C:\use_file C:\foo.txt`在控制台中执行（脚本完成后）我会得到正确的结果
*   如果我在另一个 python 控制台中手动执行`use_file()`，我会得到正确的结果
*   `C:\foo.txt``open()`在被调用后立即在磁盘上可见，但`0B`在脚本结束之前保持大小
*   如果我添加`time.sleep(5)`它只是开始按预期工作（或者更确切地说是需要）

我已经发现：

*   [`os.fsync()`](http://docs.python.org/2/library/os.html#os.fsync)但它似乎不起作用（结果`use_file`好像`C:\foo.txt`是空的）
*   使用`buffering=(1<<20)`（打开文件时）似乎也不起作用

我对这种行为越来越好奇。

**问题：**

*   python *fork* `close()`操作是否进入后台？这是在哪里记录的？
*   如何解决这个问题？
*   我错过了什么吗？
*   添加后`sleep`：那是 Windows/python 错误吗？

* * *

*注意：（*对于对方有问题的情况）应用程序`use_data`使用：

```
handle = CreateFile("foo.txt", GENERIC_READ, FILE_SHARE_READ, NULL,
                               OPEN_EXISTING, 0, NULL);
size = GetFileSize(handle, NULL) 
```

然后处理`size`来自`foo.txt`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T11:25:10.140

`f.close()`调用`f.flush()`，它将数据发送到操作系统。这*不一定*将数据写入磁盘，因为操作系统会缓冲它。正如您正确计算的那样，如果您想强制操作系统将其写入磁盘，您需要`os.fsync()`.

您是否考虑过将数据直接导入`use_file`?

* * *

编辑：你说`os.fsync()`'不起作用'。澄清一下，如果你这样做

```
f = open(...)
# write data to f
f.flush()
os.fsync(f.fileno())
f.close()

import pdb; pdb.set_trace() 
```

然后查看磁盘上的文件，它有数据吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-25T07:00:21.707

编辑：更新了特定于 Python 3.x 的信息

在[https://bugs.python.org/issue4944](https://bugs.python.org/issue4944)有一个超级旧的错误报告讨论了一个可疑的类似问题。我做了一个显示错误的小测试：[https ://gist.github.com/estyrke/c2f5d88156dcffadbf38](https://gist.github.com/estyrke/c2f5d88156dcffadbf38)

在上面的错误链接中得到用户 eryksun 的精彩解释后，我现在明白为什么会发生这种情况，而且它本身并不是一个错误。在 Windows 上创建子进程时，默认情况下它会从父进程继承所有打开的文件句柄。因此，您所看到的可能实际上是共享冲突，因为您尝试在子进程中读取的文件已打开，可以通过*另一个*子进程中的继承句柄进行写入。导致这种情况的可能事件序列（使用上面 Gist 中的再现示例）：

```
Thread 1 opens file 1 for writing
  Thread 2 opens file 2 for writing
  Thread 2 closes file 2
  Thread 2 launches child 2
  -> Inherits the file handle from file 1, still open with write access
Thread 1 closes file 1
Thread 1 launches child 1
-> Now it can't open file 1, because the handle is still open in child 2
Child 2 exits
-> Last handle to file 1 closed
Child 1 exits 
```

当我编译简单的 C 子程序并在我的机器上运行脚本时，它在 Python 2.7.8 的大多数情况下至少在一个线程中失败。在 Python 3.2 和 3.3 中，没有重定向的测试脚本不会失败，因为`close_fds`参数的默认值`subprocess.call`现在`True`是不使用重定向的时候。使用重定向的其他测试脚本在这些版本中仍然失败。在 Python 3.4 中，两个测试都成功了，因为 PEP 446 默认情况下使所有文件句柄都不可继承。

## 结论

从 Python 中的线程生成子进程意味着子进程继承*所有*打开的文件句柄，即使是从生成子进程的线程之外的其他线程。至少对我来说，这不是特别直观。

可能的解决方案：

*   升级到 Python 3.4，默认情况下文件句柄是不可继承的。
*   传递`close_fds=True`给以`subprocess.call`完全禁用继承（这是 Python 3.x 中的默认设置）。请注意，这会阻止子进程的标准输入/输出/错误的重定向。
*   确保在生成新进程之前关闭所有文件。
*   用于在 Windows 上`os.open`打开带有`os.O_NOINHERIT`标志的文件。
    *   `tempfile.mkstemp`也使用这个标志。
*   请改用 win32api。为参数传递 NULL 指针`lpSecurityAttributes`也可以防止继承描述符：

    ```
    from contextlib import contextmanager
    import win32file

    @contextmanager
    def winfile(filename):
        try:
            h = win32file.CreateFile(filename, win32file.GENERIC_WRITE, 0, None, win32file.CREATE_ALWAYS, 0, 0)
            yield h
        finally:
            win32file.CloseHandle(h)

    with winfile(tempfilename) as infile:
        win32file.WriteFile(infile, data) 
    ```

# sql - SQLite，选择具有相同标准的值（在所有表中）

> ID：13761964
> 
> 赞同：1
> 
> 时间：2012-12-07T11:13:12.373
> 
> 标签：sql, database, sqlite, conditional-statements

我有一个类似于下面给出的 SQLite 数据库表

```
Name   | Surname | AddrType | Age | Phone
John   | Kruger  | Home     | 23  | 12345
Sarah  | Kats    | Home     | 33  | 12345
Bill   | Kruger  | Work     | 15  | 12345
Lars   | Kats    | Home     | 54  | 12345
Javier | Roux    | Work     | 45  | 12345
Ryne   | Hutt    | Home     | 36  | 12345 
```

我想为表中的每一行选择与相同“姓氏”值匹配的名称值。

例如，对于第一行，查询将是“从 myTable 中选择名称，其中 Surname='Kruger'”，而对于第二行，查询将是“从 myTable 中选择名称，其中 Surname='Kats' 等等......

是否可以遍历整个表并选择所有这样的值？

PS：我将在 C++ 应用程序中使用这些方法，另一种方法是使用 sqlite3_exec() 并逐行处理每一行。我只想知道是否有任何其他可能的方法可以使用相同的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:51:07.070

基本上，您只想排除任何没有好友的记录。

像加入表格这样简单的东西应该可以工作：

```
SELECT a.Name 
FROM tab AS a
JOIN tab AS b 
    ON a.Surname = b.Surname; 
```

如果发生率很高（并且对于所有数据集总是很高），只需返回完整的排序表并自己进行重复检查可能会更快。不过，这将是一个非常强大的假设。

```
SELECT Name
FROM tab
SORT BY Surname; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:53:25.373

我会做：

```
sqlite> SELECT group_concat(Name, '|') Names FROM People GROUP BY Surname;
Names
----------
Ryne
Sarah|Lars
John|Bill
Javier 
```

然后使用“|”在 C++ 中拆分“名称”的每个值 分隔符（或您在 group_concat 函数中选择的任何其他分隔符。

# api - UPS Rates API - 如何获取服务描述

> ID：13761965
> 
> 赞同：7
> 
> 时间：2012-12-07T11:13:11.803
> 
> 标签：api, ups, rates

我正在构建一个运费计算器，我需要 API 响应中的服务代码、描述和价格。我注意到我从未收到以下回复：/RatingServiceSelectionResponse/RatedShipment/Service/Description - 但我收到了价格和服务代码的回复。

我就此联系了支持人员，他们说：“不幸的是，服务描述（在响应中）仅在我们的 Time in Transit API 中可用”

有一个不提供服务描述的 Rates API 似乎很奇怪，没有这个信息似乎有点没用。

有谁知道是否有任何方法可以使用从 Rates API 返回的服务代码来查找服务描述？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T16:01:30.440

*代码可在 Rating Package Web Services Developers Guide 的附录 E 中找到*。

我对 UPS API 也有过类似的挫败感。
你是对的 - ...服务/描述在费率服务的响应中是空白的。因此，您必须使用 ...Service/Code 值并根据这些代码编写自己的代码描述图。

例如，以下是我在 Perl 脚本中绘制的值：

```
%ups_service_code   = (
    '01'    => 'UPS Next Day Air',
    '02'    => 'UPS 2nd Day Air',
    '03'    => 'UPS Ground',
    '07'    => 'UPS Worldwide Express',
    '08'    => 'UPS Worldwide Expedited',
    '11'    => 'UPS Standard',
    '12'    => 'UPS 3 Day Select',
    '13'    => 'UPS Next Day Air Saver',
    '14'    => 'UPS Next Day Air Early A.M.',
    '54'    => 'UPS Worldwide Express Plus',
    '59'    => 'UPS 2nd Day Air A.M.',
    '65'    => 'UPS Saver',
    ## 82-86 are Polish Domestic Shipments
    '82'    => 'UPS Today Standard',
    '83'    => 'UPS Today Dedicated Courier',
    '84'    => 'UPS Today Intercity',
    '85'    => 'UPS Today Express',
    '86'    => 'UPS Today Express Saver'
); 
```

现在，真正令人沮丧的是，当您实现 TimeInTransit (TNT) 服务时，您发现它返回了描述但没有代码！
但我发现 TNT 服务返回的描述与开发人员指南中的费率代码描述相匹配（在上面的示例中）。所以，这就是我最终将 TNT 数据与速率数据匹配的方式。

希望这可以帮助！

**更新：**
对于 TransitInTime 请求，您可以在“*运输时间”文档*中找到代码，请查看 PDF 部分“服务代码”的末尾。无论如何，此代码与费率中使用的代码不同，因此您必须为此创建另一个地图。

这是一个例子

```
/* Mapping for destination within the origin country */
        $SCmappings = array(
            '23' => '54',   /* UPS Express Plus                     */
            '24' => '07',   /* UPS Express                          */
            '25' => '11',   /* UPS Standard                         */
            '26' => '65',   /* UPS Express Saver                    */
            '39' => '70'    /* UPS Access Point Economy             */
        );

        /* Mapping for destination within the European Union */
        $EUmappings = array(
            '08' => '11',   /* UPS Standard                         */
            '10' => '07',   /* UPS Express                          */
            '18' => '65',   /* UPS Express Saver                    */
            '22' => '54',   /* UPS Express Plus                     */
            '29' => '08',   /* UPS Express Freight - UPS Expedited  */
            '39' => '70'    /* UPS Access Point Economy             */
        );

        /* Mapping for destination outside the European Union */
        $nonEUmappings = array(
            '01' => '07',   /* UPS Worldwide Express                */
            '05' => '08',   /* UPS Worldwide Expedited              */
          //  '11' => '???',   /* UPS Express NA 1                     */
            '21' => '54',   /* UPS Worldwide Express Plus           */
            '28' => '65',   /* UPS Worldwide Express Saver          */
            '29' => '11',   /* UPS Express Freight - UPS Standard   */
            '39' => '70'    /* UPS Access Point Economy             */
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T08:18:38.313

这就是 Magento 映射 UPS 代码的方式。

```
public function getCode($type, $code='')
    {
        $codes = array(
            'action'=>array(
                'single'=>'3',
                'all'=>'4',
            ),

            'originShipment'=>array(
                // United States Domestic Shipments
                'United States Domestic Shipments' => array(
                    '01' => Mage::helper('usa')->__('UPS Next Day Air'),
                    '02' => Mage::helper('usa')->__('UPS Second Day Air'),
                    '03' => Mage::helper('usa')->__('UPS Ground'),
                    '07' => Mage::helper('usa')->__('UPS Worldwide Express'),
                    '08' => Mage::helper('usa')->__('UPS Worldwide Expedited'),
                    '11' => Mage::helper('usa')->__('UPS Standard'),
                    '12' => Mage::helper('usa')->__('UPS Three-Day Select'),
                    '13' => Mage::helper('usa')->__('UPS Next Day Air Saver'),
                    '14' => Mage::helper('usa')->__('UPS Next Day Air Early A.M.'),
                    '54' => Mage::helper('usa')->__('UPS Worldwide Express Plus'),
                    '59' => Mage::helper('usa')->__('UPS Second Day Air A.M.'),
                    '65' => Mage::helper('usa')->__('UPS Saver'),
                ),
                // Shipments Originating in United States
                'Shipments Originating in United States' => array(
                    '01' => Mage::helper('usa')->__('UPS Next Day Air'),
                    '02' => Mage::helper('usa')->__('UPS Second Day Air'),
                    '03' => Mage::helper('usa')->__('UPS Ground'),
                    '07' => Mage::helper('usa')->__('UPS Worldwide Express'),
                    '08' => Mage::helper('usa')->__('UPS Worldwide Expedited'),
                    '11' => Mage::helper('usa')->__('UPS Standard'),
                    '12' => Mage::helper('usa')->__('UPS Three-Day Select'),
                    '14' => Mage::helper('usa')->__('UPS Next Day Air Early A.M.'),
                    '54' => Mage::helper('usa')->__('UPS Worldwide Express Plus'),
                    '59' => Mage::helper('usa')->__('UPS Second Day Air A.M.'),
                    '65' => Mage::helper('usa')->__('UPS Worldwide Saver'),
                ),
                // Shipments Originating in Canada
                'Shipments Originating in Canada' => array(
                    '01' => Mage::helper('usa')->__('UPS Express'),
                    '02' => Mage::helper('usa')->__('UPS Expedited'),
                    '07' => Mage::helper('usa')->__('UPS Worldwide Express'),
                    '08' => Mage::helper('usa')->__('UPS Worldwide Expedited'),
                    '11' => Mage::helper('usa')->__('UPS Standard'),
                    '12' => Mage::helper('usa')->__('UPS Three-Day Select'),
                    '14' => Mage::helper('usa')->__('UPS Express Early A.M.'),
                    '65' => Mage::helper('usa')->__('UPS Saver'),
                ),
                // Shipments Originating in the European Union
                'Shipments Originating in the European Union' => array(
                    '07' => Mage::helper('usa')->__('UPS Express'),
                    '08' => Mage::helper('usa')->__('UPS Expedited'),
                    '11' => Mage::helper('usa')->__('UPS Standard'),
                    '54' => Mage::helper('usa')->__('UPS Worldwide Express PlusSM'),
                    '65' => Mage::helper('usa')->__('UPS Saver'),
                ),
                // Polish Domestic Shipments
                'Polish Domestic Shipments' => array(
                    '07' => Mage::helper('usa')->__('UPS Express'),
                    '08' => Mage::helper('usa')->__('UPS Expedited'),
                    '11' => Mage::helper('usa')->__('UPS Standard'),
                    '54' => Mage::helper('usa')->__('UPS Worldwide Express Plus'),
                    '65' => Mage::helper('usa')->__('UPS Saver'),
                    '82' => Mage::helper('usa')->__('UPS Today Standard'),
                    '83' => Mage::helper('usa')->__('UPS Today Dedicated Courrier'),
                    '84' => Mage::helper('usa')->__('UPS Today Intercity'),
                    '85' => Mage::helper('usa')->__('UPS Today Express'),
                    '86' => Mage::helper('usa')->__('UPS Today Express Saver'),
                ),
                // Puerto Rico Origin
                'Puerto Rico Origin' => array(
                    '01' => Mage::helper('usa')->__('UPS Next Day Air'),
                    '02' => Mage::helper('usa')->__('UPS Second Day Air'),
                    '03' => Mage::helper('usa')->__('UPS Ground'),
                    '07' => Mage::helper('usa')->__('UPS Worldwide Express'),
                    '08' => Mage::helper('usa')->__('UPS Worldwide Expedited'),
                    '14' => Mage::helper('usa')->__('UPS Next Day Air Early A.M.'),
                    '54' => Mage::helper('usa')->__('UPS Worldwide Express Plus'),
                    '65' => Mage::helper('usa')->__('UPS Saver'),
                ),
                // Shipments Originating in Mexico
                'Shipments Originating in Mexico' => array(
                    '07' => Mage::helper('usa')->__('UPS Express'),
                    '08' => Mage::helper('usa')->__('UPS Expedited'),
                    '54' => Mage::helper('usa')->__('UPS Express Plus'),
                    '65' => Mage::helper('usa')->__('UPS Saver'),
                ),
                // Shipments Originating in Other Countries
                'Shipments Originating in Other Countries' => array(
                    '07' => Mage::helper('usa')->__('UPS Express'),
                    '08' => Mage::helper('usa')->__('UPS Worldwide Expedited'),
                    '11' => Mage::helper('usa')->__('UPS Standard'),
                    '54' => Mage::helper('usa')->__('UPS Worldwide Express Plus'),
                    '65' => Mage::helper('usa')->__('UPS Saver')
                )
            ),

            'method'=>array(
                '1DM'    => Mage::helper('usa')->__('Next Day Air Early AM'),
                '1DML'   => Mage::helper('usa')->__('Next Day Air Early AM Letter'),
                '1DA'    => Mage::helper('usa')->__('Next Day Air'),
                '1DAL'   => Mage::helper('usa')->__('Next Day Air Letter'),
                '1DAPI'  => Mage::helper('usa')->__('Next Day Air Intra (Puerto Rico)'),
                '1DP'    => Mage::helper('usa')->__('Next Day Air Saver'),
                '1DPL'   => Mage::helper('usa')->__('Next Day Air Saver Letter'),
                '2DM'    => Mage::helper('usa')->__('2nd Day Air AM'),
                '2DML'   => Mage::helper('usa')->__('2nd Day Air AM Letter'),
                '2DA'    => Mage::helper('usa')->__('2nd Day Air'),
                '2DAL'   => Mage::helper('usa')->__('2nd Day Air Letter'),
                '3DS'    => Mage::helper('usa')->__('3 Day Select'),
                'GND'    => Mage::helper('usa')->__('Ground'),
                'GNDCOM' => Mage::helper('usa')->__('Ground Commercial'),
                'GNDRES' => Mage::helper('usa')->__('Ground Residential'),
                'STD'    => Mage::helper('usa')->__('Canada Standard'),
                'XPR'    => Mage::helper('usa')->__('Worldwide Express'),
                'WXS'    => Mage::helper('usa')->__('Worldwide Express Saver'),
                'XPRL'   => Mage::helper('usa')->__('Worldwide Express Letter'),
                'XDM'    => Mage::helper('usa')->__('Worldwide Express Plus'),
                'XDML'   => Mage::helper('usa')->__('Worldwide Express Plus Letter'),
                'XPD'    => Mage::helper('usa')->__('Worldwide Expedited'),
            ),

            'pickup'=>array(
                'RDP'    => array("label"=>'Regular Daily Pickup',"code"=>"01"),
                'OCA'    => array("label"=>'On Call Air',"code"=>"07"),
                'OTP'    => array("label"=>'One Time Pickup',"code"=>"06"),
                'LC'     => array("label"=>'Letter Center',"code"=>"19"),
                'CC'     => array("label"=>'Customer Counter',"code"=>"03"),
            ),

            'container'=>array(
                'CP'     => '00', // Customer Packaging
                'ULE'    => '01', // UPS Letter Envelope
                'CSP'    => '02', // Customer Supplied Package
                'UT'     => '03', // UPS Tube
                'PAK'    => '04', // PAK
                'UEB'    => '21', // UPS Express Box
                'UW25'   => '24', // UPS Worldwide 25 kilo
                'UW10'   => '25', // UPS Worldwide 10 kilo
                'PLT'    => '30', // Pallet
                'SEB'    => '2a', // Small Express Box
                'MEB'    => '2b', // Medium Express Box
                'LEB'    => '2c', // Large Express Box
            ),

            'container_description'=>array(
                'CP'     => Mage::helper('usa')->__('Customer Packaging'),
                'ULE'    => Mage::helper('usa')->__('UPS Letter Envelope'),
                'CSP'    => Mage::helper('usa')->__('Customer Supplied Package'),
                'UT'     => Mage::helper('usa')->__('UPS Tube'),
                'PAK'    => Mage::helper('usa')->__('PAK'),
                'UEB'    => Mage::helper('usa')->__('UPS Express Box'),
                'UW25'   => Mage::helper('usa')->__('UPS Worldwide 25 kilo'),
                'UW10'   => Mage::helper('usa')->__('UPS Worldwide 10 kilo'),
                'PLT'    => Mage::helper('usa')->__('Pallet'),
                'SEB'    => Mage::helper('usa')->__('Small Express Box'),
                'MEB'    => Mage::helper('usa')->__('Medium Express Box'),
                'LEB'    => Mage::helper('usa')->__('Large Express Box'),
            ),

            'dest_type'=>array(
                'RES'    => '01', // Residential
                'COM'    => '02', // Commercial
            ),

            'dest_type_description'=>array(
                'RES'    => Mage::helper('usa')->__('Residential'),
                'COM'    => Mage::helper('usa')->__('Commercial'),
            ),

            'unit_of_measure'=>array(
                'LBS'   =>  Mage::helper('usa')->__('Pounds'),
                'KGS'   =>  Mage::helper('usa')->__('Kilograms'),
            ),
            'containers_filter' => array(
                array(
                    'containers' => array('00'), // Customer Packaging
                    'filters'    => array(
                        'within_us' => array(
                            'method' => array(
                                '01', // Next Day Air
                                '13', // Next Day Air Saver
                                '12', // 3 Day Select
                                '59', // 2nd Day Air AM
                                '03', // Ground
                                '14', // Next Day Air Early AM
                                '02', // 2nd Day Air
                            )
                        ),
                        'from_us' => array(
                            'method' => array(
                                '07', // Worldwide Express
                                '54', // Worldwide Express Plus
                                '08', // Worldwide Expedited
                                '65', // Worldwide Saver
                                '11', // Standard
                            )
                        )
                    )
                ),
                array(
                    // Small Express Box, Medium Express Box, Large Express Box, UPS Tube
                    'containers' => array('2a', '2b', '2c', '03'),
                    'filters'    => array(
                        'within_us' => array(
                            'method' => array(
                                '01', // Next Day Air
                                '13', // Next Day Air Saver
                                '14', // Next Day Air Early AM
                                '02', // 2nd Day Air
                                '59', // 2nd Day Air AM
                                '13', // Next Day Air Saver
                            )
                        ),
                        'from_us' => array(
                            'method' => array(
                                '07', // Worldwide Express
                                '54', // Worldwide Express Plus
                                '08', // Worldwide Expedited
                                '65', // Worldwide Saver
                            )
                        )
                    )
                ),
                array(
                    'containers' => array('24', '25'), // UPS Worldwide 25 kilo, UPS Worldwide 10 kilo
                    'filters'    => array(
                        'within_us' => array(
                            'method' => array()
                        ),
                        'from_us' => array(
                            'method' => array(
                                '07', // Worldwide Express
                                '54', // Worldwide Express Plus
                                '65', // Worldwide Saver
                            )
                        )
                    )
                ),
                array(
                    'containers' => array('01', '04'), // UPS Letter, UPS PAK
                    'filters'    => array(
                        'within_us' => array(
                            'method' => array(
                                '01', // Next Day Air
                                '14', // Next Day Air Early AM
                                '02', // 2nd Day Air
                                '59', // 2nd Day Air AM
                                '13', // Next Day Air Saver
                            )
                        ),
                        'from_us' => array(
                            'method' => array(
                                '07', // Worldwide Express
                                '54', // Worldwide Express Plus
                                '65', // Worldwide Saver
                            )
                        )
                    )
                ),
                array(
                    'containers' => array('04'), // UPS PAK
                    'filters'    => array(
                        'within_us' => array(
                            'method' => array()
                        ),
                        'from_us' => array(
                            'method' => array(
                                '08', // Worldwide Expedited
                            )
                        )
                    )
                ),
            )
        );

        if (!isset($codes[$type])) {
            return false;
        } elseif (''===$code) {
            return $codes[$type];
        }

        if (!isset($codes[$type][$code])) {
            return false;
        } else {
            return $codes[$type][$code];
        }
    } 
```

# c - 比较 C 中的两个 XMLNode（libxml 库）

> ID：13761966
> 
> 赞同：2
> 
> 时间：2012-12-07T11:13:15.043
> 
> 标签：c, xml, xmlnode, nsxmlnode

我正在使用[libxml library](http://www.xmlsoft.org/docs.html)解析 C 中的一些 xml 文件。我想比较两个 xmlnode 以查看它们是否包含相同的数据。有什么功能可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:28:25.653

[libxml API 文档](http://xmlsoft.org/html/libxml-tree.html)似乎很合理，并建议[xmlBufGetNodeContent](http://xmlsoft.org/html/libxml-tree.html#xmlBufGetNodeContent)和[xmlBufContent](http://xmlsoft.org/html/libxml-tree.html#xmlBufContent)可能会做你想做的事。

```
xmlNode node1, node2;
......
xmlBuf buf;
xmlChar* content1 = NULL;
xmlChar* content2 = NULL;
if (xmlBufGetNodeContent(&buf, &node1) == 0) {
    content1 = xmlBufContent(&buf);
}
if (xmlBufGetNodeContent(&buf, &node2) == 0) {
    content2 = xmlBufContent(&buf);
}
if (strcmp(content1, content2) == 0) {
    /* nodes match */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-26T15:17:01.917

我认为 api 调用 xmlBufGetNodeContent 和 xmlBufContent 不再有效。由于这些调用中涉及的数据类型 - xmlBufPtr 不再可用，至少在 libxml2 2.7.6 上没有，我使用了不同的 api 调用[xmlNodeDump](http://www.xmlsoft.org/html/libxml-tree.html#xmlNodeDump)或[xmlNodeGetContent](http://www.xmlsoft.org/html/libxml-tree.html#xmlNodeGetContent)。希望它可以帮助其他有类似问题的人。

# javascript - 检测postMessage是否可以发送对象？

> ID：13761968
> 
> 赞同：8
> 
> 时间：2012-12-07T11:13:23.280
> 
> 标签：javascript, html, dojo, web-worker, postmessage

我正在寻找一种简洁的方法来检测浏览器中的 postMessage 是否支持对象的发送和接收或仅支持字符串。我认为那里一定有人写了一些东西来做到这一点，但我还没有设法找到解决方案。

我正在使用 postMessage 向/从 WebWorker 发送数据。虽然检测浏览器是否支持 worker 很简单，但检测对象是否可以通过 postMessage 发送被证明更加困难。

我想写一个简单的检测函数。所以，如果浏览器支持发送对象来使用它。如果只允许字符串，我可以回退到使用 JSON.stringify()。我可能会将该功能分配给 dojo/has 测试（尽管这与问题/答案无关）。

其他人做了什么来解决这个问题？任何建议都会很棒，我对 WebWorkers 和 postMessage 都是新手。提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-23T12:11:00.137

我发现了一种更简单的方法来检测 postMessage 是否仅支持字符串或是否支持其他类型。只需在对象上添加一个自定义 toString 方法。当尝试在 IE8 和 IE9 中使用 postMessage 发送对象时，它们将使用对象上的 toString 方法转换为字符串。由于支持发送对象的浏览器不调用 toString，我们可以利用它来发挥我们的优势。这个测试不是异步的，所以你会立即得到结果。没有用网络工作者测试过这个，但我想你可以使用相同的技术。

```
var onlyStrings = false;
try{window.postMessage({toString:function(){onlyStrings=true;}},"*");}catch(e){}

console.log("Browser only supports postMessage with strings? " + onlyStrings); 
```

~~在 IE8、IE9、IE10 和最新版本的 Chrome、Firefox、Safari 和 Opera 中测试：http: [//jsbin.com/igowoFaj/1/edit ?js,console](http://jsbin.com/igowoFaj/1/edit?js,console)~~

更新：使用更多测试和浏览器进行了[BrowserScope 测试。](http://gregers.no/browserscope/postmessage-object-test.html)结论是发送可克隆对象、数组、数字、像素数据和数组缓冲区`onlyStrings`是安全的`false`。理论上所有允许发送对象的浏览器都应该使用[结构化克隆算法](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/The_structured_clone_algorithm)，但是 Android 浏览器和 Opera Mobile 有一些怪癖。BrowserScope 测试结果有点难以阅读，因为 send_xxx 的 0 只有在浏览器确实支持该类型时才会有问题，所以也要检查 supports_xxx。如果它们相等，则可以，但如果浏览器支持但无法发送（当 onlyStrings 为 false 时），则这是一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T06:36:36.380

我想知道同样的事情。我创建了这个脚本来检测是否可以通过对当前窗口的简单回调将对象传递到 postMessage 中。你会看到 IE 9 返回 false，IE 10 返回 true。

[http://jsfiddle.net/milesplit/DvqqH/](http://jsfiddle.net/milesplit/DvqqH/)

```
var supportsPostObject = false;

(function(){
    var callback = function(e) {
        supportsPostObject = (typeof(e.data)!='string');
    };
    (window.addEventListener) ?
        window.addEventListener('message', callback) :
        window.attachEvent('onmessage', callback);
    ('postMessage' in window) && window.postMessage({}, '*');
})();

setTimeout(function(){
   alert(supportsPostObject);
}, 0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T11:28:10.093

您可以尝试在恢复脚本之前执行操作。你可以试试这个：

**dummy_task.js**

```
self.onmessage = function(event) {
    self.postMessage(event.data);
}; 
```

**javascript**

```
workerSupportObject(callback);

function workerSupportObject(callback) {
    var callbackIsCalled = false; // to make sure callback isn't run twice
    var worker = new Worker('dummy_task.js'); // create a worker

    // create event
    worker.onmessage = function(event) {
        // if the value is the same as we sent, it probably works
        if(!callbackIsCalled) callback.call(null, event.data.value === 'dummy');
        callbackIsCalled = true;
    };

    try {
        // send dummy JSON data
        worker.postMessage({'value': 'dummy'});
    } catch(e) {
        // oh... an error... clearly that's a no.
        if(!callbackIsCalled) callback(null, false);

        callbackIsCalled = true;
    }
}

function callback(objectSupported) {
    console.log('Worker supports objects: ', objectSupported);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:39:00.970

`postMessage`也适用于`iframe`s 之间；假设工人和框架之间的行为是相同的，你应该尝试以下或类似的东西：

```
<html>
   <body>
      <iframe id='if'>

      </iframe>
      <script>
         var iframe = document.getElementById('if');
         var iframeScript = iframe.contentDocument.createElement("script");
         iframeScript.appendChild(
            iframe.contentDocument.createTextNode(
               'window.addEventListener("message", function(e) {console.log(e.data);}); console.log("listener attached");')); 
         iframe.contentDocument.body.appendChild(iframeScript);
         iframe.contentWindow.postMessage("asdf", "*");
         iframe.contentWindow.postMessage({'whatAmI': 'an object, maybe?'}, "*");
      </script>
   </body>   
</html> 
```

您可能需要替换 console 或 console.log 才能看到结果，但在 Chrome 上，这让我

```
listener attached about:blank (1):1
asdf about:blank (1):1
Object {whatAmI: "an object, maybe?"} about:blank (1):1 
```

当我将它保存到本地文件并打开它时。

jsfiddle 版本（以及使用实际工作人员的版本）留给读者作为练习。`:)`

# erlang - 连接到另一个节点上产生的进程

> ID：13761969
> 
> 赞同：3
> 
> 时间：2012-12-07T11:13:26.137
> 
> 标签：erlang, distributed, distributed-computing

假设我有一个名为“server”的节点，它会生成一个名为“server1”的进程，如下所示：

```
register(server1,spawn(module, generate_new_server, [])) 
```

如何从名为“user”的不同节点向“server1”发送消息？

使用 net_adm 我只能 ping 节点“server”，但不能 ping 生成的节点“server1”。我想我如何启动服务器有问题，即

```
erl -sname server 
```

现在如果我在另一台机器上

```
erl -sname user
net_adm:ping('server@pc') 
```

从“user@pc”我可以连接到它，但如果我这样做

```
erl -sname user
net_adm:ping('server1@pc') 
```

它告诉我无法访问该节点。是否有不同的语法可用于连接到“server1”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:27:15.757

net_adm:ping 用于 ping 远程 erlang 节点，而不是在该节点上运行的进程。为了向远程进程发送消息，您可以在全局而不是本地注册它：

在服务器节点上：

```
 global:register_name(server1,spawn(fun() -> receive X -> io:format("Received ~p~n", [X]) end end)). 
```

然后在用户节点上：

```
global:send(server1, test). 
```

服务器节点上的输出：

```
Received test 
```

# wcf - 如何从 RestSharp 调用 WCF 服务

> ID：13761973
> 
> 赞同：0
> 
> 时间：2012-12-07T11:13:35.747
> 
> 标签：wcf, xamarin.android, restsharp

有人可以发布一些示例代码以从 RestSharp 访问 WCF 服务。我正在尝试将数据输入 MonoDroid 应用程序，而 RestSharp 看起来很简单。但是我似乎找不到任何有效的示例代码。我在共享托管下的网站上托管了 WCF 服务。我已经在下面发布了我正在使用的 RestSharp 代码，但我收到了一个错误。有人可以告诉我我在这里做错了什么

```
 var client = new RestClient("http://mysamplesite.com/testService");
        // client.Authenticator = new HttpBasicAuthenticator(username, password);

        var request = new RestRequest("gettestdata", Method.GET);
        request.AddParameter("key", ""); 

        // execute the request
        IRestResponse response = client.Execute(request);
        var content = response.Content; // raw content as string

        if (!string.IsNullOrWhiteSpace(response.Content) && response.StatusCode == System.Net.HttpStatusCode.OK)
            DeserialiseData(content); 
```

应用程序“MYSAMPLESITE.COM/TESTSERVICE”中的服务器错误 Internet Information Services 7.5

错误摘要 HTTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。

详细的错误信息

IIS Web 核心错误代码 0x80070002 请求的 URL [http://www.mysamplesite.com:80/TestService/GetTestData](http://www.mysamplesite.com:80/TestService/GetTestData) 物理路径D:\rwq1 \n
Logon MethodAnonymous \n Logon UserAnonymous \n
最可能的原因: \n \t

*   指定的目录或文件在 Web 服务器上不存在。URL 包含印刷错误

# javascript - 为拖放界面选择 Javascript MVC 框架

> ID：13761981
> 
> 赞同：4
> 
> 时间：2012-12-07T11:14:08.370
> 
> 标签：javascript, backbone.js, javascript-framework, backbone-events, javascriptmvc

**用例：**我从一个涉及大量客户端脚本的项目开始。它类似于一个迷你 CMS，用户可以在其中**拖放**html 组件。有点类似[这个](http://app.imcreator.com)。现在，我必须选择一个 MVC 框架来定义用户将使用的组件。（执行拖动、调整大小、删除等操作）。

现在我面临的**问题** 是，选择一个易于**学习和实施**的框架。我有 Javascript 和 jQuery 的基本知识，并且已经使用了一段时间，但没有使用 MVC 的经验。

我过去 2 天的研究表明，**backbone.js**是一个很好的开始，但我想对它在处理 html 组件和 DOM 元素方面提供的灵活性提出评论/建议。如何存储 HTML 组件的初始内容？（外箱和结构）。

另外，如何处理多个相同类型的组件？动态生成 ID 是一种选择，但使用动态 ID 管理多个元素变得困难。有没有其他方法可以处理它们？

哪个框架可以轻松处理这些组件上的事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T12:18:26.973

我将骨干用于涉及拖放的网络应用程序，我使用 jquery ui 来实现拖放功能。例如，当您想要实现可放置的主干视图时，它们与 imo 集成得很好

```
render: function(){
    var $el = this.$el,
        over = false,
        origWidth;

       if (!this.$el.is('.ui-sortable'))
            this.$el.sortable({
                revert: false,
                axis: 'y',
                placeholder: 'placeholder',
                items: '.load-order',
                containment: this.el,
                receive: this.onOrderDrop,
                over: this.onOrderOver
                out: function(e, ui){
                    // Resize back to original width
                    if (over && ui.helper)
                        ui.helper.stop().animate({width: origWidth}, 'fast');
                    over = false;
                } 
```

更新：

使用主干视图，您有一个骨架 html 结构，然后随着主干视图递增。每个视图都有一个模板，该模板使用模型数据进行渲染，您可以在[Backbone Essentials中了解更多信息](http://addyosmani.github.com/backbone-fundamentals/#views)

我还制作了一个小 todolist 来演示带有主干
[http://www.github.com/joaoxsouls/todolist的可拖动事件](http://www.github.com/joaoxsouls/todolist)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T21:11:15.653

为什么要使用 BackboneJS？

如果它不是必需品，而您只是想要一个拖放界面，您可能想看看这个： http: [//omshankar.kodingen.com/engine-1.73/](http://omshankar.kodingen.com/engine-1.73/)
JavaScript 已被最小化，仅使其成为单行。`{}`函数和变量都完好无损，在Chrome中点进去可以看到`Sources`

如果它是极端必要的，你绝对可以在主干中拖放。唯一的问题是，每次调用它时，您可能都必须在`item`'s函数中再次初始化拖放。 关于拥有结构、外壳和组件，按照您想要的方式进行操作。可以办到。一个示例 Backbone 应用程序：http: [//omshankar.kodingen.com/exp/backbone-html5-dd/](http://omshankar.kodingen.com/exp/backbone-html5-dd/)`render`
`HTML``HTML`

它也有一个拖放功能，但那是将图像文件从您的操作系统拖到浏览器中，与您无关

如果你想**存储**HTML，你可以通过本地存储来做，或者只是在你的 HTML 文件中。仅对那些动态的部分应用/制作主干视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:20:30.143

我建议[Angular JS](http://angularjs.org)？它具有强大的绑定和指令功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T23:25:52.103

AngularJS 很棒，特别是如果你将它与 ConversationJS 之类的东西结合使用：

[https://github.com/rhyneandrew/Conversation.JS](https://github.com/rhyneandrew/Conversation.JS)

我不是“意大利面条”角度感觉的忠实粉丝，Conversation 允许您在不改变其工作方式的情况下将其解耦。它使代码库更加干净。

# ios - 从 URL 问题启动应用程序

> ID：13761985
> 
> 赞同：0
> 
> 时间：2012-12-07T11:14:19.463
> 
> 标签：ios, xcode, url-scheme

我正在尝试使用 Safari 中的 URL 启动我的应用程序。

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    NSLog(@"Launched with URL");
    return YES;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@"Launched normally");
    // Override point for customization after application launch.
    return YES;
} 
```

（也试过`-(BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url` ）如果应用程序在后台（即，如果我双击主页按钮，它就在那里）应用程序正确启动并且控制台显示`Launched with URL`. 但是，如果我完全关闭它，也就是说，双击主页按钮，按住应用程序并单击减号，当尝试通过 Safari 再次启动它时，它只会显示黑屏并且不会向控制台记录任何内容。

这发生在设备和模拟器上（5.1 两者）当应用程序完全关闭时是否应该调用另一个委托？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:30:07.177

如果您的应用程序是从 Safari 打开的，这意味着您已经正确实现了 URL 模式。在这些应用程序委托事件中处理 Opened URl

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
}
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
{
}
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:
                                                        (NSString *)sourceApplication
                                                        annotation:(id)annotation
{
} 
```

只需确保您已正确编码您的 URL，这可能是您的 URL 中断的情况。

# php - 如何按月搜索数据库

> ID：13761986
> 
> 赞同：-2
> 
> 时间：2012-12-07T11:14:22.060
> 
> 标签：php, sql

所以我正在制作一个网站，您可以在其中发布活动。日期通过三个下拉菜单（月、日、年）完成。这些值以数字形式保存在我的 SQL 表中（即 12/7/2012）。我有一个搜索页面，其中有一个月份的下拉菜单。我想创建一个搜索功能，搜索并查找用户选择的月份中的所有事件。

如何使我的函数在可以点击的 12 个月中的任何一个上都通用？

这是我对 php 的尝试

> $month = $_GET['month'];
> 
> $monthresult = query("SELECT * FROM events WHERE month LIKE '%" .$month."%'");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:21:34.323

我不认为这是最好的方法，但你应该做这样的事情

```
$monthresult = query("SELECT * FROM events WHERE month LIKE '%/$month/%'"); 
```

月份在中间，所以通过使用斜线我们确保它不会影响日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:42:02.107

好的，我想通了，而且效果很好

> $month = $_GET['month'];
> 
> $monthresult = query("SELECT * FROM events WHERE month LIKE '$month'");

我正在使用 INT 将日期保存在我的表中

# c# - 创建用户向导 - 用户代码未处理空引用异常

> ID：13761987
> 
> 赞同：2
> 
> 时间：2012-12-07T11:14:22.953
> 
> 标签：c#, asp.net, createuserwizard

我是 ASP.NET 的新手。我有一个名为 RegisterUserWithRoles 的 createUserWiazrd，取自本教程的第 4 步[http://www.asp.net/web-forms/tutorials/security/roles/assigning-roles-to-users-cs](http://www.asp.net/web-forms/tutorials/security/roles/assigning-roles-to-users-cs)

这是aspx文件：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true"    
 CodeFile="CreateUsers.aspx.cs" Inherits="Membership_CreateUser" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
<h2>
    Create Users</h2>
<p>
    <asp:CreateUserWizard ID="RegisterWithRoles" runat="server" 
        ContinueDestinationPageUrl="~/Default.aspx" LoginCreatedUser="False" 
        onactivestepchanged="RegisterWithRoles_ActiveStepChanged">
        <WizardSteps>
            <asp:CreateUserWizardStep runat="server" />

            <asp:WizardStep ID="SpecifyRoles" runat="server" AllowReturn="False" 
                StepType="Step" Title="Specify Roles">
                <asp:CheckBoxList ID="RoleList" runat="server">
                </asp:CheckBoxList>
            </asp:WizardStep>

            <asp:CompleteWizardStep runat="server" />
        </WizardSteps>
    </asp:CreateUserWizard>
</p>
<p>

</p>
</asp:Content> 
```

和背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Security;

public partial class Membership_CreateUser : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)       
    {            
        // Reference the SpecifyRolesStep WizardStep
        WizardStep SpecifyRolesStep = RegisterWithRoles.FindControl("SpecifyRolesStep") as     
WizardStep;

        // Reference the RoleList CheckBoxList            
        CheckBoxList RoleList = SpecifyRolesStep.FindControl("RoleList") as CheckBoxList;

        // Bind the set of roles to RoleList            
        RoleList.DataSource = Roles.GetAllRoles();            
        RoleList.DataBind();       
    }  
}

protected void RegisterWithRoles_ActiveStepChanged(object sender, EventArgs e)
{
    // Have we JUST reached the Complete step?       
    if (RegisterWithRoles.ActiveStep.Title == "Complete")
    {
        // Reference the SpecifyRolesStep WizardStep            
        WizardStep SpecifyRolesStep = RegisterWithRoles.FindControl("SpecifyRoles") as 
WizardStep;

        // Reference the RoleList CheckBoxList            
        CheckBoxList RoleList = SpecifyRolesStep.FindControl("RoleList") as CheckBoxList;

        // Add the checked roles to the just-added user            
        foreach (ListItem li in RoleList.Items)
        {
            if (li.Selected)
                Roles.AddUserToRole(RegisterWithRoles.UserName, li.Text);
        }
    } 
}
} 
```

我不断收到错误

```
null reference exception was unhandled by user code - Object reference not set to an instance of an object. 
```

有五个角色，我使用`ASP.NET Configuration`. 你能帮我理解这个错误的根源吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:38:48.557

尽管我不使用提供的向导来实现此功能，并且堆栈跟踪会很有用，但我有理由相信问题出在此处-

```
WizardStep SpecifyRolesStep = RegisterWithRoles.FindControl("SpecifyRolesStep") as WizardStep; 
```

您选择**SpecifyRolesStep**的 FindControl ID与您的 ASPX 文件中的 ID 不匹配 -

```
<asp:WizardStep ID="SpecifyRoles" runat="server" AllowReturn="False" 
            StepType="Step" Title="Specify Roles"> 
```

"as" 关键字（而不是简单地使用语法*(WizardStep)RegisterWithRoles.FindControl("SpecifyRolesStep")*进行转换）应该意味着即使 FindControl 不返回对象或对象是不兼容的类型，因此最好在可能的情况下使用此“as”关键字（如您在此处所使用的那样），**然后**在使用以下语法操作生成的对象之前检查空值 -

```
if (RoleList != null)
{ 
  //code working with RoleList object
}
else
{ 
   //handle missing control
} 
```

当然，在对象为空的情况下并不总是可以继续程序流，这可能对功能至关重要，因此除了抛出带有更具体的错误消息以帮助调试的 ApplicationException 之外，您可能无法处理错误。

在这种情况下，当您要做的只是抛出异常时，您显然必须作为开发人员始终花时间检查空值（并使代码混乱）做出判断。

除了背景之外，您要么需要更改用于 SpecifyRolesStep 的 FindControl 参数，要么将 ASPX 中的 WizardStep 重命名为“SpecifyRoles”以匹配。

# r - R语言中C函数分配的内存会发生什么

> ID：13761988
> 
> 赞同：1
> 
> 时间：2012-12-07T11:14:23.500
> 
> 标签：r, memory-management, garbage-collection, package

在我的 R 包中，实现该函数的 C 代码分配了一些内存供使用。这段记忆会发生什么？它会在 R 的 GC 的雷达下还是内存泄漏？如果它在 R 的垃圾收集下，这块内存会被回收吗？

我在作为服务器运行的 R 的服务器进程中分配了 5 GB 的巨大数据。在这里，如果我可以像我们在 Java 中分配外部堆内存一样，从 GC 的雷达中分配这些内存，那将是一个好主意。所以基本上，我可以在我的 C 代码中分配大量内存而 R 不会干扰该内存吗？

我打算使用 malloc 或 calloc 来分配内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:40:17.613

这在“编写 R 扩展”中得到了相当清楚的描述——一个使用`calloc()`/的 R 变体`malloc()`访问相同的内存池。这样 R 可以`gc()`做这些事情，以及为什么需要`PROTECT()`and `UNPROTECT()`。

> ## 6.1.2 用户控制的内存
> 
> 另一种内存分配形式是 的接口`malloc`，该接口提供 R 错误处理。此内存一直持续到用户释放，并且是为 R 工作区分配的内存的附加内存。
> 
> 接口函数是
> 
> ```
>  TYPE* Calloc(size_t N, TYPE)
>  TYPE* Realloc(ANY *P, size_t N, TYPE)
>  void Free(ANY *P) 
> ```
> 
> 提供`calloc`和`realloc`的`free`类似物 如果在分配过程中出现错误，则由 R 处理，因此如果这些例程返回，则内存已成功分配或释放。 `Free` 将指针 P 设置为`NULL`。（有些但不是所有版本的 S 都这样做。）
> 
> `Free`当不再需要时，用户应该安排到这个内存，包括错误或用户中断。这通常可以通过`on.exit`调用 R 函数中的操作最方便地完成 - 请参阅 `pwilcox`示例。
> 
> 不要假设`Calloc`/分配的内存与 :`Realloc`使用的内存来自同一个池`malloc`：特别是不要使用 `free`或`strdup`与它一起使用。
> 
> 这些入口点需要以`R_`if `STRICT_R_HEADERS`已定义为前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:25:23.153

来自钱伯斯的*数据分析软件*：

> 每当任何计算可能动态分配 R 存储并且结果未在 R 级别分配时，必须使用 PROTECT 和 UNPROTECT 宏来保护相应 C 引用的使用。原因是存储会在 R 中被释放，而在计算过程中碰巧对动态存储进行了垃圾收集。

# json - NicEdit 字体和 json

> ID：13761991
> 
> 赞同：1
> 
> 时间：2012-12-07T11:14:33.200
> 
> 标签：json, nicedit

我在我的应用程序中使用 nicEdit 文本编辑器，我面临两个问题。

1.  如何更改 nicEdit 控制的文本编辑器的默认字体系列/大小。我在文本编辑器的样式属性中有我的字体属性，但这似乎不起作用。

2.  我在具有 nicEdit.js 的同一页面中导入了 json2.js（我从 www.json.org 获得）。当我打开此页面时，开始时的字体标签图像（如粗体 [B] ）会重复多次。导致此问题的 json.js 和 nicEdit.js 之间的共性可能是什么，以及解决方法？

感谢您的所有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:59:40.427

要设置字体系列和大小：

在 nicEdit.js 的第 428 行（其中 'var s' 使用文本区域的样式属性初始化），添加以下内容：fontSize: '14px', fontFamily: 'arial' （或您想要的东西）。

如果您不喜欢这种硬编码，并且希望它从元素的样式本身中获取，请使用：

theFontFamily = e.getStyle('fontFamily') || e.style.fontFamily

theFontSize = e.getStyle('fontSize') || e.style.fontSize;

在上述同一行，使用这些变量。

# javascript - 带有变量的主干js动态事件

> ID：13761992
> 
> 赞同：2
> 
> 时间：2012-12-07T11:14:34.780
> 
> 标签：javascript, backbone.js

可以说我得到了这个观点：

```
var HomeView = Backbone.View.extend({
    el: '#application',
    initialize: function() {
        this.template = template; // Comes from requireJS (not relevant)
        this.$elements = {};
    },
    render: function() {
        this.$el.html(this.template);

        this.$elements = {
            signIn: {
                email: $('#sign-in-email'),
                password: $('#sign-in-password')
            }
        };

        // Demonstration.
        this.$elements.signIn.email.myPluginInit();
        this.$elements.signIn.password.myPluginInit();

        //
        // NOTE: How to handle the events?
        //
    }
}); 
```

我有 this.$elements 对象，它将在那里包含我的 DOM 的所有对象，我如何在它们上放置事件，因为使用此解决方案它们是可变的。这就是我以前做的事情（参见backbone.org）。

```
var HomeView = Backbone.View.extend({
  events: {
    'click #sign-in-email': 'clickedSignInEmail',
    'focus #sign-in-password': 'focusSignInPassword'
  }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T11:40:54.793

> 与手动使用 jQuery 在渲染期间将事件绑定到子元素相比，使用[delegateEvents](http://backbonejs.org/#View-delegateEvents)提供了许多优势。所有附加的回调在传递给 jQuery 之前都绑定到视图，所以当回调被调用时， this 继续引用视图对象。当再次运行 delegateEvents 时，可能使用不同的事件哈希，所有回调都将被删除并重新委托 - 对于在不同模式下需要表现不同的视图很有用。

示例代码：

```
initialiaze: function () {
  // …
  this.events = this.events || {};
  // dynamically build event key
  var eventKey = 'click ' + '#sign-in-email';
  this.events[eventKey] = 'clickedSignInEmail';
  this.delegateEvents();
  // …
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:33:33.947

使用普通的 jQuery 事件处理语法怎么样？

```
this.$elements.signIn.email.click(this.clickedSignInEmail);
this.$elements.signIn.password.focus(this.focusSignInPassword); 
```

您还可以使用[Backbone.View.delegateEvents](http://backbonejs.org/#View-delegateEvents)方法，但这需要您从选择器构造事件哈希。

# python - 比较字典python中的值

> ID：13761994
> 
> 赞同：3
> 
> 时间：2012-12-07T11:14:40.720
> 
> 标签：python, dictionary

我在 Python 中有 2 个具有这种格式的嵌套字典：

```
1166869: {'probL2': '0.000', 'probL1': '0.000', 'pronNDiff_site': '1.000', 'StateBin': '0', 'chr': 'chrX', 'rangehist': '59254000-59255000', 'start_bin': '59254000', 'countL2': '4', 'countL1': '0'} 

1166870: {'probL2': '0.148', 'probL1': '0.000', 'pronNDiff_site': '0.851', 'StateBin': '0', 'chr': 'chr2', 'rangehist': '59254000-59255000', 'start_bin': '59255000', 'countL2': '5', 'countL1': '15'} 

1166871: {'probL2': '0.000', 'probL1': '0.000', 'pronNDiff_site': '1.000', 'StateBin': '0', 'chr': 'chrY', 'rangehist': '59290000-59291000', 'start_bin': '59290000', 'countL2': '1', 'countL1': '2'} 
```

其中 1166869、1166870 和 1166871 代表我从中读取数据的文件中的一行，其余键是数据本身。

现在我想创建一个列表，将所有不同的值存储在键“chr”中，因为有一些重复的值。

我怎样才能浏览字典并在两个值之间进行比较？此代码不起作用：

```
for k in range(len(file_dict)):
    for j in range(len(file_dict)-1):
        if (file_dict[j]["chr"] != file_dict[k]["chr"]):
            list_chr.append(file_dict[j]["chr"]) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:16:25.420

使用一套，一次性使用所有物品：

```
chr = { v['chr'] for v in file_dict.itervalues() } 
```

这使用集合理解在一行代码中生成您的集合。

集合推导是在 Python 2.7 中引入的；在早期版本中使用：

```
chr = set(v['chr'] for v in file_dict.itervalues()) 
```

在 Python 3 中，您需要替换`.itervalues()`为`.values()`.

您自己的代码不起作用，因为 python 字典不是列表；您不是按索引检索值，而是按键检索值。您必须将其更改为：

```
for key in file_dict:
    for other_key in file_dict:
        if key == other_key:
            continue

        if file_dict[key]['chr'] != file_dict[otherkey]['chr']:
            list_chr.append(filed_dict[key]['chr']) 
```

但这*确实*效率低下，更不用说不正确了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:33:42.603

怎么样？

```
list_chr = list(set([val['chr'] for val in file_dict.values()])) 
```

这是如何运作的？

首先，列表理解获取内部 dict 中的所有 chr 条目，然后将这些条目转换为一个集合，这样就没有重复的条目，如果这是您喜欢的格式，这些条目将被转换为列表

请注意，也许你真的想使用一个集合，那么查找时间是 O(1) 而不是 O(n)

# iphone - 为 NSString 获取 CGSize？

> ID：13761996
> 
> 赞同：1
> 
> 时间：2012-12-07T11:14:47.230
> 
> 标签：iphone, objective-c, nsstring, height, cgsize

我正在尝试获得一个`CGSize`，`NSString`但我遇到了问题。这是我正在使用的代码：

```
CGFloat actualMessageFontSize;
CGSize messageSize = 
 [message sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" 
                                       size:14.0f] 
           minFontSize:14.0f 
        actualFontSize:&actualMessageFontSize 
              forWidth:(alertViewWidth - textIndent) 
         lineBreakMode:NSLineBreakByWordWrapping]; 
```

我`NSLog`在`CGSize`这段代码之后并且高度不会改变，即使我在里面放了一个巨大的`NSString`东西。你知道为什么会发生这种情况，或者我应该尝试什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:19:10.900

使用这种方法和

```
-(float) calculateHeightOfTextFromWidth:(NSString*) text: (UIFont*)withFont: (float)width :(UILineBreakMode)lineBreakMode
{
    [text retain];
    [withFont retain];
    CGSize suggestedSize = [text sizeWithFont:withFont constrainedToSize:CGSizeMake(width, FLT_MAX) lineBreakMode:lineBreakMode];

    [text release];
    [withFont release];

    return suggestedSize.height;
} 
```

并像下面一样使用它......我用它来`UILable`查看代码..

```
 UILabel *lblAddress = [[UILabel alloc]init];
    [lblAddress setFrame:CGRectMake(110, 31, 200, 31)];        
    lblAddress.text = @"ABDKFNKG KKGK jfnjgdf gdklfg fldgmfkgml f";
    lblAddress.lineBreakMode = UILineBreakModeWordWrap;
    lblAddress.numberOfLines = 0;///write this line for multiple line and set 0 or anything lese
    lblAddress.font = [UIFont fontWithName:@"Helvetica" size:12];

    lblAddress.frame = CGRectMake(lblAddress.frame.origin.x, lblAddress.frame.origin.y, 
                             200,[self calculateHeightOfTextFromWidth:lblAddress.text :lblAddress.font :200 :UILineBreakModeWordWrap] ); 

    lblAddress.textColor = [UIColor darkGrayColor];

    [self.view addSubview:lblAddress]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:19:30.797

您已更改框架`UILabel`或`UITextView`其中的哪些可能用于相应更改。

```
 CGFloat actualMessageFontSize = 12.0;
CGSize messageSize = [message sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:14.0f] minFontSize
//set frame accordingly
yourLabel.frame = CGReactMake(yourLabel.frame.origin.x,yourLabel.frame.origin.y,messageSize.width,messageSize.wiheight,); 
```