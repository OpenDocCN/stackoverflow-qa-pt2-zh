# StackOverflow 问答 15274000-15274999

# extjs - 如何使用 ExpandAll 和 CollapseAll 使用分组功能进行分组网格

> ID：15274002
> 
> 赞同：1
> 
> 时间：2013-03-07T14:39:34.907
> 
> 标签：extjs, grid, extjs4, grouping

我正在尝试将 expandAll() 和 collapseAll() 用于分组网格 Ext 4.1

但它在覆盖后不起作用：出现错误 expandAll() 未定义

```
 Ext.override(Ext.grid.feature.Grouping, {
                  collapseAll: function() {
                    var self = this, view = self.view;
                    view.el.query(self.eventSelector).forEach(function (group) {
                      var group_body = Ext.fly(group.nextSibling, '_grouping');
                      self.collapse(group_body);
                    });
                  },

                  expandAll: function() {
                    var self = this, view = self.view;
                    view.el.query(self.eventSelector).forEach(function (group) {
                      var group_body = Ext.fly(group.nextSibling, '_grouping');
                      self.expand(group_body);
                    });
                  }
                }); 
```

这是我的视图文件：

```
 Ext.define('MCT.view.MyGrid',
   {
     extend:'Ext.grid.Panel',
     initComponent:function(){
       var me  = this;
       this.bbar = [{xtype:'button',text:'Expand All', handler:function(){

          me.features[0].expandAll();

          this.callParent(arguments);

        }}];
     },
     features : [{
        ftype : 'grouping',
                    groupHeaderTpl :'.......',
                    startCollapsed : true
       }]

  }); 
```

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:37:41.863

这适用于我的应用程序...

```
 xtype: 'tool',                   
    type: 'collapse-top',
    hidden: true,
    handler: function (event, target, owner, tool) {
        var agPanel = owner.up(), //getting thePanel
            view = agPanel.view,  
            gFeature = view.features[0]; //I júst have one feautre... so [0] works

        gFeature.collapseAll();
    } 
```

就我而言，我已将折叠顶部工具放入触发组的工具栏中。有趣的是，它只有在您从面板中获得视图并从视图中获得分组功能时才有效。

我认为在你的情况下，当你这样做时它应该工作

```
var view = me.view;
view.features[0].expandAll(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-07T07:23:18.293

就我而言，以下代码有效。

```
view.normalView.features[0].collapseAll();
view.normalView.features[0].expandAll(); 
```

*ps：我曾经将view.features作为**`null`***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T07:10:17.750

IE < 9 不支持 forEach

这是链接：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FObjects%2FArray%2FforEach#Compatibility](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference%2FObjects%2FArray%2FforEach#Compatibility)

所以解决方法是：

```
 if ( !Array.prototype.forEach ) {
    Array.prototype.forEach = function(fn, scope) {
     for(var i = 0, len = this.length; i < len; ++i) {
         fn.call(scope, this[i], i, this);
     }
   }
 } 
```

它适用于 IE 和 Chrome。未在 FF 中测试。

# mootools - 将 mootools 函数、id 更改为类？

> ID：15274004
> 
> 赞同：0
> 
> 时间：2013-03-07T14:39:40.610
> 
> 标签：mootools

我有一个分配给 id´s (#item & #content) 的函数。但是我怎样才能重写它，以便它与类一起工作？

```
window.addEvent('domready', function() {

    var myVerticalSlide = new Fx.Slide('content');

    $('item').addEvent('click', function(event){
        event.stop();
        myVerticalSlide.toggle();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:29:03.817

If i correctly understood, count of 'item' and count of 'content' will be the same. Try something like it

```
<script>
    window.addEvent('domready', function() {
        $$('.item').each(function(el,ind){
            new Fx.Slide($$('.content')[ind]).hide();
            el.addEvent('click', function(event){
                event.stop();
                var myVerticalSlide = new Fx.Slide($$('.content')[ind]).toggle();
            }); 
        })
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:53:29.070

这是整个代码：

```
 <style type="text/css">
    .wrapper{
        max-width:613px;
        float:left;
        position:relative;
    }
    .new { 
        border: solid 1px #ddd; 
        padding: 5px; 
        float:left;
        max-width:660;
        min-width:320px;
    }
    .item{
        width:120px;
        padding:10px;
        display:block;
        background-color:#CCC;
        float:left;
        margin:5px;
    }
    .content{
        padding:10px;
        height:80px;
        visibility:hidden;
    }
    .item:hover > .content{

    }
    .full{
        position:absolute;
        width:100%;
        display:block;
        height:100px;
        background-color:#666;
        left:0px;
    }
  </style>

<script type='text/javascript'>//<![CDATA[ 

window.addEvent('load', function() {
(function(){
    var wrap,
        overview = document.getElement('div.overview');

    overview.getElements('div.item').each(function(a, i){
        if (i % 4 == 0){
            wrap && overview.adopt(wrap);
            wrap = new Element('div.new');
        }
        wrap.adopt(a);
    });

    overview.adopt(wrap);
}());
});
window.addEvent('domready', function() {
        $$('.item').each(function(el,ind){
            new Fx.Slide($$('.content')[ind]).toggle();
            el.addEvent('click', function(event){
                event.stop();
                var myVerticalSlide = new Fx.Slide($$('.content')[ind]).toggle();
            }); 
        })
    });//]]>  
</script>
</head>
<body>
<div class="wrapper">
    <div class="overview">
        <div  class="item">Test1
        <div  class="content">
            <div class="full">
                <p>Content1</p>
            </div>
        </div>
        </div>
        <div class="item">Test2
        <div class="content">
            <div class="full">
                <p>Content2</p>
            </div>
        </div></div>
        <div class="item">Test3
        <div class="content">
            <div class="full">
                <p>Content3</p>
            </div>
        </div></div>
        <div class="item">Test4
        <div class="content">
            <div class="full">
                <p>Content4</p>
            </div>
        </div></div>
        <div class="item">Test5
        <div class="content">
            <div class="full">
                <p>Content5</p>
            </div>
        </div></div>
        <div class="item">Test6
        <div class="content">
            <div class="full">
                <p>Content6</p>
            </div>
        </div></div>
        <div class="item">Test7
        <div class="content">
            <div class="full">
                <p>Content7</p>
            </div>
        </div></div>
        <div class="item">Test8
        <div class="content">
            <div class="full">
                <p>Content8</p>
            </div>
        </div></div>
        <div class="item">Test9
        <div class="content">
            <div class="full">
                <p>Content9</p>
            </div>
        </div></div>
        <div class="item">Test10
        <div class="content">
            <div class="full">
                <p>Content10</p>
            </div>
        </div></div>
        <div class="item">Test11
        <div class="content">
            <div class="full">
                <p>Content11</p>
            </div>
        </div></div>
    </div>
</div> 
```

另一件事是，当我单击第一个 div 时，它会打开，之后，当我单击第二个 div 时，它也会打开，但是当我单击第二个 div 时，第一个 div 应该关闭。

# mysql - mysql升级后功能不起作用

> ID：15274007
> 
> 赞同：1
> 
> 时间：2013-03-07T14:39:44.460
> 
> 标签：mysql, function

我已将我的 mysql 数据库移至新服务器，但遇到了此错误。

此函数在以前版本的 mysql 中有效，但在较新的 mysql 中会出现二进制错误并永远运行。

```
DELIMITER $$

USE `ddvier`$$

DROP FUNCTION IF EXISTS `HTML_strip`$$

CREATE DEFINER=`donty`@`localhost` FUNCTION `HTML_strip`(X TEXT) RETURNS TEXT CHARSET latin1
BEGIN
DECLARE sstart INT UNSIGNED;
DECLARE ENDS INT UNSIGNED;
SET sstart = LOCATE('<', X, 1);
REPEAT
SET ENDS = LOCATE('>', X, sstart);
SET X = CONCAT(SUBSTRING( X, 1 ,sstart -1) ,SUBSTRING(X, ENDS +1 )) ;
SET sstart = LOCATE('<', X, 1);
UNTIL sstart < 1 END REPEAT;
RETURN X;
END$$

DELIMITER ; 
```

# python - 如何在 .ini 文件中使用 Configparser 进行更改持久化

> ID：15274013
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:39:57.190
> 
> 标签：python

如何修改.ini文件？我的ini文件看起来像这样。我希望格式部分 ini 像这样更改[空格被替换为一个制表符，后跟 $] Format="[%TimeStamp%] $(%ThreadID%) $<%Tag%> $%_%"

```
[Sink:2]

Destination=TextFile
FileName=/usr/Desktop/A.log
RotationSize=5000000
MaxSize=50000000
MinFreeSpace=10000000
AutoFlush=true
Format="[%TimeStamp%] (%ThreadID%) <%Tag%> %_%"
Filter="%Severity% >= 0" 
```

这是我写的

```
import ConfigParser
config = ConfigParser.RawConfigParser()
config.read('/usr/local/ZA/var/loggingSettings.ini')
format = config.get('Sink:2', 'Format')
tokens = "\t$".join(format.split())
print format
print tokens
config.set('Sink:2', 'Format', tokens)
newformat = config.get('Sink:2', 'Format')
print newformat 
```

输出正是我想要的。但是当我打开 .ini 文件时，我在这里看不到任何变化？可能是当我再次阅读该部分时，它是从内存中加载的吗？我如何使更改永久化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:44:52.633

尝试使用该[`write`](http://docs.python.org/3/library/configparser.html#configparser.ConfigParser.write)方法。

```
with open('myconfig.ini', 'w') as f:    
    config.write(f) 
```

当您阅读配置时，`config.read('myconfig.ini')`您已经完全“保存”了文件。现在你要做的是修改内容。

```
# Get a config object
config = RawConfigParser()
# Read the file 'myconfig.ini'
config.read('myconfig.ini')
# Read the value from section 'Orange', option 'Segue'
someVal = config.get('Orange', 'Segue')
# If the value is 'Sword'...
if someVal == 'Sword':
    # Then we set the value to 'Llama'
    config.set('Orange', 'Segue', 'Llama')
# Rewrite the configuration to the .ini file
with open('myconfig.ini', 'w') as myconfig:
    config.write(myconfig) 
```

# javascript - 如何使用 jQuery 更改一个类中的每个元素的内容

> ID：15274014
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:39:58.977
> 
> 标签：javascript, jquery, class, foreach, currency

希望有人可以帮助我。我有一个类的 30 个元素的内容。

我需要使用`click(function(){...`方法更改每个元素，例如我单击一个按钮。

例如，每个元素的值应该是 * 2 之前的值；

这是我的html的一部分：

```
<p>from <span class="currency">69.95</span></p>
<p>Economy Worldwide - above <span class="currency">65.05</span></p><p>Express Worldwide - above <span class="currency">195.15</span></p> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:43:22.917

我会通过以下方式做到这一点：

```
$("button").click(function() {
    $(".currency").text(function(i, val) {
        return val * 2;
    });
}); 
```

**演示：http:** [//jsfiddle.net/eGxAV/](http://jsfiddle.net/eGxAV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:43:45.317

我建议：

```
$('.currency').click(function(){
    $('.currency').text(function(i,t){
        return parseFloat(t * 2).toFixed(2);
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:45:21.510

```
$('button').click(function () {
    $('span.currency').each(function () {
        var newVal = $(this).text() * 2;
        $(this).text(newVal.toFixed(2));
    });
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/UNPpL/)**

# c - 为什么我在这里分叉超过 5 次？

> ID：15274016
> 
> 赞同：5
> 
> 时间：2013-03-07T14:40:09.870
> 
> 标签：c, fork

所以我在这里有代码，我希望它严格运行 ls -l 5 次，但它似乎运行的次数要多得多。我在这里做错了什么？我想运行 ls 5 次，所以我 fork 5 次。也许我没有正确理解等待的概念？我浏览了大量教程，似乎没有一个教程能够彻底使用 fork 处理多个进程。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

int main()
{
    pid_t pidChilds[5];

    int i =0;

    for(i = 0; i<5; i++)
    {
        pid_t cpid = fork();
        if(cpid<0)
            printf("\n FORKED FAILED");
        if(cpid==0)
            printf("FORK SUCCESSFUL");
        pidChilds[i]=cpid;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T14:43:47.190

您正在循环中分叉，并且分叉准复制包括指令指针在内的过程。

含义：**例如，您的第一个子进程将发现自己处于一个仍有 4 轮的循环中**。

并且处理产生的 4 个进程**中**的每一个都会发现它必须再进行 3 轮。

等等。

`fork()`返回您所在的进程是父进程还是子进程。`break;`如果您在子进程中，您应该检查该返回值和循环。

> " 成功时，父进程返回子进程的PID，子进程返回0。失败时，父进程返回-1，不创建子进程，并适当设置errno。"

所以你应该`if(cpid==0) break;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:13:52.183

当你在 C 中使用 fork 时，你必须想象进程代码和状态被复制到一个新进程中，此时它从停止的地方开始执行。

当你在 C 中使用 exec 时，你不得不想象如果调用成功，整个进程都会被替换掉。

这是您的代码，重新编写以产生预期的行为。请阅读评论。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

int main()
{
    pid_t cpid;
    pid_t pidChildren[5];

    int i;
    for (i = 0; i < 5; i++)
    {
        cpid = fork();
        if (cpid < 0) {
            printf("fork failed\n");
        } else if (cpid == 0) {
            /*  If we arrive here, we are now in a copy of the
                state and code of the parent process. */
            printf("fork successful\n");
            break;
        } else {
            /*  We are still in the parent process. */
            pidChildren[i] = cpid;
        }
    }

    if (cpid == 0) {
        /*  We are in one of the children;
            we don't know which one. */
        char *cmd[] = {"ls", "-l", NULL};
        /*  If execvp is successful, this process will be
            replaced by ls. */
        if (execvp(cmd[0], cmd) < 0) {
            printf("execvp failed\n");
            return -1;
        }
    }

    /* We expect that only the parent arrives here. */
    int exitStatus = 0;
    for (i = 0; i < 5; i++) {
        waitpid(pidChildren[i], &exitStatus, 0);
        printf("Child %d exited with status %d\n", i, exitStatus);
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:43:49.630

每个`i`'th*在循环内*`fork`开始，因此它将运行该循环的剩余迭代，递归地分叉。*`n-i`*

# performance - Azure 数据库设计，划分数据表与联合？

> ID：15274020
> 
> 赞同：2
> 
> 时间：2013-03-07T14:40:18.277
> 
> 标签：performance, database-design, azure, azure-sql-database, sharding

我正在研究将 .NET Web 应用程序迁移到 Azure 的可行性。处理 Web 服务器方面的多角色设置似乎功能强大。

我对 Azure 数据库性能和针对我们的需求采用正确的横向扩展策略持保留意见。我们使用由 120 个表组成的单个数据库，80% 的事务在 10 个表上运行。其余的用于各种帐户级别设置和全局参考。最大的表由 500 万行组成，并在其余 9 个大表上使用一组触发器进行操作，每个表又包含 500k 到 250k 行之间的任何位置。

我最初的想法如下：

1.  将最大的表移动到它自己的数据库实例中并使用同义词引用它。我现在意识到 Azure DB 似乎不支持跨数据库实例的 SYNONYMS。

2.  使用联合将工作负载分散到更多 Azure 数据库实例中。我们的数据库只有 5GB，所以也许这是一个不成熟的选择？

3.  使用具有 SQL 的更高规格的虚拟机来为数据库提供服务。

我很感激这里有很多未知数，我不期待一个明确的答案，我只是想看看 Stackoverflow 社区可以提供什么体验。

**附加信息**

*   当前设置：具有 120 个表的单个数据库的单个 SQL Server 2008 R2 实例在具有 12 GB RAM 的体面规格多核服务器上运行。
*   当前的性能非常好，以至于我们可以用一些来换取可扩展性。
*   数据库以每月 10% 的速度增长，并且严重依赖关系数据、触发器和复杂的存储过程，因此很难使用 Azure 表作为替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:12:38.713

您试图同时解决两个问题，这可能不是最好的方法。首先，您正在**迁移**现有应用程序。其次，您正在尝试开发**横向扩展**架构。如果您尝试同时执行这两项操作，您将遇到架构问题。我建议您先迁移应用程序，而不必过多担心横向扩展。一旦你的应用程序运行起来，你就可以开发一个更具可扩展性的架构。您会发现很少有同时具有可扩展性、SQL 和低成本的解决方案——因此，您提出的任何“可扩展”解决方案，对 SQL 的依赖程度如此之高，都会有一些痛苦的妥协。

为了构建更具可扩展性的东西，您将不得不仔细查看并计划对现有架构进行大量返工。将应用程序分解为单独的工作负载，放弃对 T-SQL、触发器和复杂存储过程的高度依赖……以及其他一些东西。这是否值得的需求/业务案例取决于您的应用程序路线图。

假设您有长期充分的理由迁移到 Windows Azure（现有应用程序不是其中之一），那么您目前正在着手迁移策略的第一步。我建议在第一步中你尽可能少地改变，只是“让它工作”。在这种情况下，将 SQL 放在 VM 上可能是最有意义的——如果没有别的办法，那就是给予更多的控制和回旋余地。一切运行后（迁移的第 1 步），您可以查看迁移的其他阶段。第 2 步到*第 n*步意味着您的应用程序架构将发生巨大变化，更多地使用表存储，而更少使用 SQL。因此，通过第*n* - *m*步，SQL 的性能和/或可扩展性将不会成为问题。

云应用的数据模型比较复杂，需要仔细考虑。这是我在[CALM](https://github.com/projectcalm/Azure-EN)的数据模型中详细写过的内容。

不要恐慌。

如果您的应用程序有一个平凡的未来，那么 co-lo 托管解决方案可能是最好的——您可以在其中专门配置满足您需求的数据库服务器。如果您对自己的应用程序抱有很高的抱负，那么随着时间的推移，您可以将其迁移到在 Azure 上运行良好的可扩展性和云友好性更高的架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:07:45.033

我会选择选项＃3。SQL Azure 的性能可能有点……不可预测，尤其是在处理对大量数据的性能敏感查询时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:16:32.357

VM 选项将是您最简单的途径，特别是如果您不打算对您的应用程序进行一些更改。

SQL Federations 将需要更改您的应用程序（USE FEDERATION 事物）。

最重要的是，对于 SQL Azure，您必须考虑瞬时故障处理/限制。此外，您必须验证您在 SQL Server 中使用的所有现有功能是否完全受支持（例如，部分支持的 TSQL、CLR 支持等...）

# php - mysql_num_rows 不起作用，但它确实适用于另一个查询

> ID：15274023
> 
> 赞同：0
> 
> 时间：2013-03-07T14:40:29.397
> 
> 标签：php, mysql, rows

我有两种获取玩家用户名的方法，一种是在他们登录时，另一种是在他们使用电子邮件登录时。然而，当他们以新玩家身份登录时，它会连接到 Minecraft.net 数据库并检查用户名/密码/电子邮件是否正确，如果正确，它将在没有密码的情况下将它们添加到我们的数据库中。

但我似乎无法让第二个 MYSQL 查询工作，没有 mysql 错误或连接错误，但是当里面有 1 行时，行继续显示为 0。

```
if (strpos($_POST['username'],'@') === false) {
                $username = $_POST['username'];
                $res = mysql_query("SELECT * FROM users WHERE user_email='$username'");
                $ign_exists_check = mysql_num_rows($res);
                $username_exists_check = 0;
                if(!$res) die ('Unable to run query1:'.mysql_error());
            }
            else {
                $username = $_POST['username'];
                $res2 = mysql_query("SELECT * FROM users WHERE user_name='$username'");
                $username_exists_check = mysql_num_rows($res2);
                $ign_exists_check = 0;
                if(!$res2) die ('Unable to run query1:'.mysql_error());
            }
            die($username_exists_check . $ign_exists_check);
            if ($usernamea_exists_check == 0 && $ign_exists_check == 0)
                { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:52:28.833

你的逻辑似乎颠倒了。

当用户名中没有@时，您查询`user_email`
的代码中也有太多重复

```
if (strpos($_POST['username'],'@') === false) {
    $username = mysql_real_escape_string($_POST['username']);
    $sql = "SELECT * FROM users WHERE user_name='$username'"
    $username_exists_check = 1;
} else {
    $email = mysql_real_escape_string($_POST['username']);
    $sql = "SELECT * FROM users WHERE user_email='$email'"
    $username_exists_check = 0;
}
$res = mysql_query($sql) or trigger_error(mysql_error().$sql);
$user = mysql_fetch_array($res);
if ($user) {
    $ign_exists_check = !$username_exists_check;
} else {
    $ign_exists_check = $username_exists_check = 0;
}
var_dump($row,$username_exists_check,$ign_exists_check); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:53:02.577

如果您没有错误并且返回 0 行，那么查询“有效”，它根本没有找到任何符合条件的行。您需要做的是回显查询：

```
echo "SELECT * FROM users WHERE user_name='$username'"; 
```

然后，您将准确地看到它正在搜索的内容。实际上，获取回显查询并尝试使用 phpMyAdmin 之类的工具对数据库运行它。

但是，我确实注意到的是，您的逻辑表明，如果您在发布的用户名字段中没有找到 @，则在 user_email 列中查找用户名，如果有 @，则在 user_name 字段中查找。也许您的支票应该是：

```
if (strpos($_POST['username'],'@') !== false) { 
```

# ruby-on-rails - 在 Rails 应用程序中的何处安装 .js 代码以便将其插入 /body 之前？

> ID：15274024
> 
> 赞同：0
> 
> 时间：2013-03-07T14:40:30.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这很尴尬，但我有一个小的 js 代码（类似于谷歌分析的嵌入标签），现在我把它放在 application.js 文件中，但它没有用。所以我在资产的 javascripts 文件夹中创建了 some_random_code.js 并将代码放入其中，但该代码仍然无法正常工作。令人惊讶的是，当我将代码放在 application.html.erb 的 /body 之前时，代码就可以工作了。

我究竟做错了什么 ？如何在 application.html.erb 或任何页面的 /body 之前插入一些 javascript 标签代码？

我搜索并确实发现了类似的问题，例如[Rails 3.1 newbie：我应该在哪里放置 javascript 代码？](https://stackoverflow.com/q/7763675/692622)但不知何故，那些并没有解决我的问题，因此在 SO

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:33:26.007

好吧，我使用谷歌分析并将代码放在头脑中，就像这样

```
<head>

<%= stylesheet_link_tag  "application", :media => "all" %>
<%= javascript_include_tag "application", :media => "all" %>
<%= csrf_meta_tags %>

<%= yield(:head) %>
 <script type="text/javascript">
  //Google Analytics javascript code
 </script>
</head> 
```

# ruby-on-rails - 具有设计的表用户的自定义表名

> ID：15274026
> 
> 赞同：5
> 
> 时间：2013-03-07T14:40:33.413
> 
> 标签：ruby-on-rails, devise

对于我的应用程序，我有几个用户表（franceusers，belgiumusers，...），我想根据我尝试使用 table_name_prefix 和 table_name 的域使用一个或另一个，但它似乎不起作用

```
class User < ActiveRecord::Base
rolify
# Include default devise modules. Others available are:
# :token_authenticatable, :confirmable,
# :lockable, :timeoutable and :omniauthable
devise :database_authenticatable, :registerable, #:confirmable,
:recoverable, :rememberable, :trackable, :validatable

def self.table_name
debugger
'franceusers'
end

def self.table_name_prefix
debugger
'france'
end
end 
```

感谢调试器，我可以看到它被调用但不是 self.table_name_prefix。即使调用 self.table_name，也要在表用户而不是 franceusers 中设计搜索用户

在控制台 User.table_name => "franceusers"

User.table_name_prefix => "法国"

更奇怪的是，我也在使用activeadmin，当我浏览用户列表时，出现错误：Mysql2::Error: Unknown column 'franceusers.id' in 'order Clause': SELECT users.* FROM users ORDER BY franceusers.id desc限制 30 偏移量 0

似乎它可以找到字段的 table_prefix 但不能找到 FROM。

我做了什么坏事吗？还有其他方法可以更改用户表名吗？我不能将所有用户表合并为一个，因为这是我老板的指示：-s

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-02T22:00:51.787

如果您有不同类型的用户，并且您有上面的要求，他们必须每个都在不同的数据库中，那么我可能会为每个用户创建一个用户类（假设我们说的是 5-10 而不是 100）。

有一个 FranceUser 和一个 SpainUser 等。然后将通用设计逻辑提取到一个模块中，您可以将其包含在每个类中。您还需要覆盖 login/register/etc 控制器，以便能够将各种表连接在一起并搜索正确的用户。您还需要在多个数据库表中实现诸如电子邮件唯一性约束之类的东西。基本上，这听起来像是一个非常糟糕的主意，您将不得不做很多工作，否则您可以通过设计免费获得。

这是可行的，但我建议你找出你的老板有什么用例将你的数据分成多个表，然后找到更好的方法来解决他的问题。它可能只是像想要简单的报告一样简单，并且有比使用设计然后覆盖其一半功能更简单和更优雅的方法来解决这些问题。

祝你好运 ：）

# c# - 从托管 C++ 到 C# 的结构列表

> ID：15274031
> 
> 赞同：8
> 
> 时间：2013-03-07T14:40:47.777
> 
> 标签：c#, list, managed-c++

首先，我想参考这个问题：[Sharing variables between C# and C++](https://stackoverflow.com/questions/13275264/sharing-variables-between-c-sharp-and-c)。

这似乎是我正在寻找的东西，但是在尝试实现它时，我遇到了一些错误。

首先这是我的代码：

C++ MyCppWrapper.h

```
namespace CppWrapping
{
    #pragma pack(1)
    public struct MyPoint
    {
    public: 
        float X;
        float Y;
        float Z;
        unsigned char R;
        unsigned char G;
        unsigned char B;
        unsigned char A;

    }MyPoint_t;
    #pragma pack()

    public ref class MyCppWrapper
    {
    public:
        MyCpplWrapper(void);
        List<MyPoint>^ getData();
    };
}; 
```

C++ MyCppWrapper.cpp

```
List<MyPoint>^ MyCppWrapper::getData()
{
    List<MyPoint>^ temp = gcnew List<MyPoint>();
    for (int i = 0; i < Data.Length; i++)
    {
        PointT& pt = Data.points[i];
        MyPoint holder = MyPoint();
        holder.X = pt.x;
        holder.Y = pt.y;
        holder.Z = pt.z;
        holder.R = pt.r;
        holder.G = pt.g;
        holder.B = pt.b;
        holder.A = pt.a;
        temp[i] = holder;
    }
    return temp;
} 
```

C# MyLinker.cs

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
private struct MyPoint_t
{
    public float X;
    public float Y;
    public float Z;
    public byte R;
    public byte G;
    public byte B;
    public byte A;
};

public void getData()
{
    _wrapper = new MyCppWrapper();
    List<MyPoint_t> data = _wrapper.getData();
} 
```

有很多错误，但归结为以下三个错误：

```
error C3225: generic type argument for 'T' cannot be 'CppWrapping::MyPoint', it must be a value type or a handle to a reference type

'CppWrapping.MyPoint' is inaccessible due to its protection level

'CppWrapping.MyCppWrapper.getData()' is inaccessible due to its protection level 
```

`List data = _wrapper.getData();`当我将光标悬停在代码上时，代码下方也会出现红色标记：

```
Cannot convert source type 'System.Collections.Generic.List<CppWrapping.MyPoint>' to target type 'System.Collections.Generic.List<ProjectA.MyLinker.MyPoint_t>' 
```

我该如何解决这个问题？

## 编辑：

我改为`public struct MyPoint`将`public value struct MyPoint` 错误数量从 58 减少到 1。我现在遇到的错误是：

```
Cannot implicitly convert type 'System.Collections.Generic.List<CppWrapping.MyPoint>' to 'System.Collections.Generic.List<ProjectA.MyLinker.MyPoint_t>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:27:03.290

```
public struct MyPoint {} 
```

这声明了一个*非托管*结构，您的 C# 代码无法访问它，因为它被导出为没有任何成员的不透明值类型。您必须将其声明为

```
public value struct MyPoint {} 
```

接下来要做的是从 C# 代码中删除 MyPoint_t 声明。类型标识包括该类型来自的程序集，因此 MyPoint_t 与 MyPoint 不兼容。您可以简单地使用 C++/CLI 程序集中的 MyPoint 类型：

```
_wrapper = new MyCppWrapper();
List<MyPoint> data = _wrapper.getData(); 
```

或者简单地利用 C# 中的类型推断：

```
var data = _wrapper.getData(); 
```

# dynamic - DLL 和 LIB 文件

> ID：15274033
> 
> 赞同：9
> 
> 时间：2013-03-07T14:40:51.587
> 
> 标签：dynamic, dll, compiler-construction, static, linker

DLL 和 LIB 文件有什么区别？DLL 文件里面有什么，LIB 文件里面有什么？创建可执行文件是否需要 DLL 和 LIB 文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T15:44:11.370

DLL 文件是最终的构建产品，它是您安装在客户机器上的文件。它与 EXE 文件非常相似，结构相同，但可以按需加载到另一个程序中。

LIB 文件用于构建您的程序，它只存在于您的构建机器上，您不会发布它。有两种。静态链接库是一袋 .obj 文件，收集到一个文件中。当需要解析外部标识符时，链接器会从文件中挑选任何代码块。

但与 DLL 更相关的是，LIB 文件也可以是导入库。然后它是一个简单的小文件，其中包含 DLL 的名称和 DLL 导出的所有函数的列表。当您构建使用 DLL 的程序时，您需要将它提供给链接器，以便它知道外部标识符实际上是 DLL 导出的函数。链接器使用导入库将条目添加到 EXE 的导入表中。然后 Windows 在运行时使用它来确定需要加载哪些 DLL 才能运行程序。

# javascript - 为 Hubot 添加 Post 支持

> ID：15274035
> 
> 赞同：25
> 
> 时间：2013-03-07T14:40:56.340
> 
> 标签：javascript, node.js, heroku, http-post, hubot

我正在尝试将[`http-post-say.coffee`](https://github.com/github/hubot-scripts/blob/master/src/scripts/http-post-say.coffee)脚本添加到 Heroku 上托管的 hubot 应用程序中。

文档表明，一旦您添加脚本，它就会创建`'/hubot/say'`接受以下格式的发布请求的路由。

```
curl -X POST http://localhost:8080/hubot/say -d message=lala -d room='#dev' 
```

我添加了脚本并修改了网址，但收到以下错误： `Cannot POST /hubot/say`

我的下一步是添加一些依赖项。我注意到使用的其他应用程序`robot.router.post`具有这些依赖项。

```
"htmlparser": "1.7.6",
"connect": "2.3.4",
"connect_router": "1.8.6",
"scoped-http-client": "0.9.7" 
```

我部署了我的更改，`Cannot POST /hubot/say`但当我尝试走那条路线时我仍然收到。

有什么我想念的吗？我对 Node.js 或 hubot 不是很熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-08T00:08:25.733

您必须了解，一旦您将代码推送到 heroku 并让它在那里运行，该 URL 将不再是`localhost`与您创建时创建的机器相关的实际 heroku URL `heroku create`。

URL 应类似于：

```
curl -X POST `http://herokumachinename/hubot/say -d message=lala -d room='#dev'` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T10:25:40.720

要在 Hubot 中加载内置脚本，您必须将其添加到`hubot-scripts.json`，例如：

```
["http-post-say.coffee"] 
```

（因为脚本本身看起来不错，听起来你已经推送到 Heroku（重新启动 Hubot），这是我能想到的唯一可以解释它不起作用的事情。）

# dotnetnuke-6 - DNN 6.x 中的 RadEditor - 嵌套的项目符号语法不正确

> ID：15274036
> 
> 赞同：1
> 
> 时间：2013-03-07T14:40:59.740
> 
> 标签：dotnetnuke-6, radeditor, bulletedlist

通常，使用 RadEditor 创建嵌套的项目符号列表很容易。我创建了一个很长的项目符号列表，然后选择列表的子部分，我想把它做成一个子列表，点击缩进按钮，我很好。

但是在 DNN 6.x 中，当我这样做时，它会在闭合的 li 元素之间插入子列表，而不是作为其中一个 li 元素的子列表。

**预期语法：**

```
 <ul>
 <li>Item one</li>
 <li>Item two
      <ul>
          <li>sub one</li>
          <li>sub two</li>
      </ul
 </li>
 <li>Item three</li>
 </ul> 
```

**我得到的语法：**

```
 <ul>
 <li>Item one</li>
 <li>Item two</li>

      <ul>
          <li>sub one</li>
          <li>sub two</li>
      </ul

 <li>Item three</li>
 </ul> 
```

关于为什么会发生这种情况以及如何避免它的任何想法？

# crystal-reports - 打印 Crystal Reports 时加载新的 XML 文件

> ID：15274037
> 
> 赞同：4
> 
> 时间：2013-03-07T14:41:01.377
> 
> 标签：crystal-reports

上周在这里获得了一些关于使用 office.interop dll 打印的帮助。我的应用程序需要以报告样式格式打印来自新数据库条目的数据，我使用 office.interop 功能成功地做到了这一点，但是，我从未意识到您需要在计算机上安装 office 才能工作，所以经过一番研究，我意识到唯一现实的方法是使用水晶报表，除非有人有其他建议？

所以，问题是：我已经成功地设置了水晶报表来读取 XML 文件来生成，而且效果很好，我可以打印出来没问题。我通过在我的程序的主代码中使用从 mySql 数据库中提取的数据填充数据集来生成 XML 文件，但是，即使我添加了新信息，这会再次生成 XML 文件并覆盖前一个文件，报告仍然会打印我用来生成报告的原始 XML 文件。所以我想知道是否有办法让报告在打印之前刷新其数据并再次从 XML 文件中提取详细信息。

我在打印功能之前尝试了报告上的 .Refresh()，但是我得到一个数据库错误并且没有打印任何内容。

这是我用来打印报告的代码：

```
checkInReceipt cir = new checkInReceipt();
cir.Refresh(); // if i leave this in, it generates a db error, take it out and it prints data from an old XML file.
cir.PrintToPrinter(1, true, 1, 1); 
```

# ruby-on-rails - 如何在寻找错误时在rails应用程序中跟踪redirect_to

> ID：15274038
> 
> 赞同：9
> 
> 时间：2013-03-07T14:41:03.997
> 
> 标签：ruby-on-rails

在调试问题时，当您有很多 gem 和 before_filters 时，很难在 rails 应用程序中跟踪 redirect_to。那么有没有一种方法可以让我更快地追踪它们？任何可用的方法或rails助手？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-07T14:41:03.997

在您的应用程序控制器中添加以下方法

```
def redirect_to(options = {}, response_status = {})
  ::Rails.logger.error("Redirected by #{caller(1).first rescue "unknown"}")
  super(options, response_status)
end 
```

然后您将能够在日志文件中看到调用“redirect_to”调用的文件、方法名称（将被记录）

例如：

```
Started GET "http://server.com/really_important_page" for 127.0.0.1
Processing by HomeController#really_important_page as HTML
Redirected by app/controllers/application_controller.rb:53:in `ensure_random_bugs'
Redirected to https://server.com/not_the_page_you_wanted
Completed 302 Found in 1ms 
```

这节省了我的一天，所以想在这里分享，希望你觉得它有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:37:43.280

调试器宝石呢？

然后您可以`debugger`在代码中的任何位置插入并且执行将在那里停止您可以按照流程按下`n`或通过键入获得完整的控制台`irb`

# r - 使用 lm 并预测矩阵中的数据

> ID：15274039
> 
> 赞同：5
> 
> 时间：2013-03-07T14:41:05.107
> 
> 标签：r, dataframe, lm, predict

我`R`只使用了一点点，从不使用数据帧，这使得理解预测的正确使用变得困难。我将数据放在普通矩阵中，而不是数据框中，将它们称为`a`和`b`，它们分别是`N x p`和`M x p`矩阵。我可以运行回归`lm(a[,1] ~ a[,-1])`。我想使用生成的`lm`对象`b[,1]`从`b[,-1]`. 我天真的猜测是`predict(lm(a[,1] ~ a[,-1]), b[,-1])`行不通的。`lm`使用获取预测向量的正确语法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T15:18:32.257

您可以将整个矩阵存储在 a 的一列中`data.frame`：

```
x <- a [, -1]
y <- a [,  1]
data <- data.frame (y = y, x = I (x))
str (data)
## 'data.frame':    10 obs. of  2 variables:
## $ y: num  0.818 0.767 -0.666 0.788 -0.489 ...
## $ x: AsIs [1:10, 1:9] 0.916274.... 0.386565.... 0.703230.... -2.64091.... 0.274617.... ...

model <- lm (y ~ x)
newdata <- data.frame (x = I (b [, -1]))
predict (model, newdata) 
##         1         2 
## -3.795722 -4.778784 
```

关于 pls 包的论文（[Mevik, B.-H. and Wehrens, R. The pls Package: Principal Component and Partial Least Squares Regression in R Journal of Statistical Software, 2007, 18, 1 - 24.](http://www.jstatsoft.org/v18/i02/)）解释了这种技术.

另一个带有光谱数据集（奎宁荧光）的示例在[`vignette ("flu")`](http://hyperspec.r-forge.r-project.org/blob/flu.pdf)我的包 hyperSpec 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:53:11.857

要从`data.fram`矩阵中提取 '，只需执行以下操作：

```
m = matrix(runif(100), 10, 10)
df = as.data.frame(m) 
```

并执行线性回归：

```
lm_result = lm(V1 ~ V100, df)
predicted_values = predict(lm_result, b) 
```

或者对于多元回归：

```
lm_result = lm(V1 ~ V2 + V3 + V4, df)
predicted_values = predict(lm_result, b) 
```

假设列`V1`-`V4`存在于`b`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:50:09.533

您可以手动计算预测：

```
> fit <- lm(a[,1] ~ a[,-1])
> fit$coefficients[1] + b[,-1] %*% fit$coefficients[-1]
     [,1]
[1,]    1
[2,]    2
[3,]    5 
```

这里，`fit$coefficients[1]`是截距，`fit$coefficients[-1]`是剩余系数（并且`%*%`是矩阵乘法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-24T22:45:41.730

我在函数内部使用 lm 来循环遍历许多不同的线性模型，然后对预测执行留一法交叉验证。@PaulHiemstra 的 sprintf 成功了。

# android - Robotium clickOnButton 类中的 2 个测试

> ID：15274050
> 
> 赞同：2
> 
> 时间：2013-03-07T14:41:43.487
> 
> 标签：android, testing, robotium

我有一个针对这个问题的简单测试项目，但我无法理解它是如何失败的。

被测项目仅在布局中添加一个按钮以进行测试。

```
<Button 
    android:id="@+id/test_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Click" /> 
```

这是测试类：

```
public class TestMainActivity extends ActivityInstrumentationTestCase2<MainActivity> {

    private Solo solo;

    public TestMainActivity() {
        super(MainActivity.class);
    }

    public void setUp() throws Exception {
        solo = new Solo(getInstrumentation(), getActivity());
    }

    public void test1() {
        solo.clickOnButton(com.example.testrobotium.R.id.test_button);
    }

    public void test2() {
    }

    @Override
    public void tearDown() throws Exception {
        solo.finishOpenedActivities();
    }
} 
```

执行此测试类时，返回的错误跟踪如下，指向对 clickOnButton 的调用：

junit.framework.AssertionFailedError: 2131165185 未找到按钮！在 com.jayway.android.robotium.solo.Waiter.waitForAndGetView(Waiter.java:417) 在 com.jayway.android.robotium.solo.Clicker.clickOn(Clicker.java:374) **在 com.jayway.android.robotium .solo.Solo.clickOnButton(Solo.java:1052)** 在 com.example.testrobotium.test.TestMainActivity.test1(TestMainActivity.java:22) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:204) 在 android .test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:194) 在 android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:186) 在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169) 在 android.test.AndroidTestRunner。 runTest(AndroidTestRunner.java:154) 在 android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529) 在 android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)

我是否在我的测试课程中遗漏了导致此问题的某些内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:56:03.510

问题是您使用它的方式无法使用robotium！

solo.clickOnButton() 有两种实现，一种将按钮中的文本作为参数，另一种采用索引。您正在传递按钮的 ID，它恰好是一个 int 值，但 int 值不是索引。

您希望您的代码改为以下内容：

```
solo.clickOnView(solo.getView(com.example.testrobotium.R.id.test_button)); 
```

如果您需要更多解释，我将很乐意提供帮助。

# webmatrix - 在 WEB MATRIX 中显示名称问题？

> ID：15274053
> 
> 赞同：1
> 
> 时间：2013-03-07T14:41:53.147
> 
> 标签：webmatrix

一旦会员登录，我想显示用户的名字。即，webmatrix WebSecurity.CurrentUserName 到名字

另外，我确实更改了代码，但我无法登录，

WebSecurity.InitializeDatabaseConnecti… "UserProfile", "UserId", "FirstName", true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T17:39:02.050

`WebSecurity.InitializeDatabaseConnection()`根据您的参数创建数据库对象。由于助手在创建成员资格模式时进行了多次引用，因此稍后将在项目之后对此设置进行更改。它要么删除数据库然后重新创建它，要么手动编辑表列，跟踪所有主键引用。再次重新运行该项目。

# javascript - 空格验证后将焦点放在文本的最后一个字符

> ID：15274056
> 
> 赞同：0
> 
> 时间：2013-03-07T14:42:07.350
> 
> 标签：javascript

我想在空格验证后将焦点放在文本的最后一个字符上。焦点不会落在最后一个元素上。请查看代码并向我提出任何更改建议。

```
var pattern=/^\s|\s$/;
var textentered=document.textentered.text.value;
if(textentered.match(pattern))
{
  alert("Spaces are not allowed");
  textentered.focus();
  return false;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:49:38.173

我想你想要

```
document.textentered.text.focus(); 
```

目前，您正试图专注于价值，而不是元素。

# plsql - 如何在没有循环的情况下重新排列分层数据？

> ID：15274060
> 
> 赞同：1
> 
> 时间：2013-03-07T14:42:19.353
> 
> 标签：plsql, oracle10g, oracle11g

我正在尝试重新排列分层数据集中的节点。这是您所期望的结构。一个菜单项将有一个父菜单项，但在这种情况下......我在一个父项下大约有 n 个菜单项。如果我将菜单项从位置 10 移动到位置 5，如下所示：

```
1 2 3 4 5 6  7 8 9 10 <-- Original
1 2 3 4 5 10 6 7 8 9  <-- New 
```

有没有办法在一个操作中做到这一点，而不是循环遍历集合并将新位置与现有位置进行比较？我以为我看到了一些可以做到这一点的 RANK 功能，但我似乎找不到它。

更新：这是它的结构：

```
MENUID, PARENTID, SORT_RANK
1       100       1
2       100       2
3       100       3
4       100       4
5       100       5 
```

如果我将 MENUID 5 向上移动三个位置，它将位于 2 到 3 之间，我想更新排序等级。有没有办法在不获取 parentID 结构并遍历所有记录的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:37:09.443

我想到了两种可能性。

第一个是将移动项目的 SORT_RANK 更改为前后项目的平均值，因此，如果要移动 MENUID=5 的项目，使其介于 MENUID 2 和 MENUID 3 之间，则应将 SORT_RANK 设置为 MENUID= 5 到 2.5。因此，类似于以下内容：

```
UPDATE MENU_TABLE
  SET SORT_RANK = ((SELECT SORT_RANK FROM MENU_TABLE WHERE MENUID = 2) + 
                   (SELECT SORT_RANK FROM MENU_TABLE WHERE MENUID = 3)) / 2
  WHERE MENUID = 5; 
```

通过这种方式，您最终会得到具有非整数值的 MENUID，但它们仍然会正确排序。

第二个是执行以下操作：

```
UPDATE MENU_TABLE
  SET SORT_RANK = SORT_RANK + 1
  WHERE PARENTID = 100 AND
        SORT_RANK > 2;

UPDATE MENU_TABLE
  SET SORT_RANK = 3
  WHERE MENUID = 5; 
```

但是，后一种方法需要两个语句，这可能不是您想要的。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:33:21.187

我不确定数据按层次结构构建的事实是否重要。

您可以通过一个查询来更新您的订单。假设物品`rank_order` `:R_START`到达地点`:R_STOP`：

```
SQL> variable r_start NUMBER
SQL> variable r_stop NUMBER
SQL> EXEC :r_start := 5; :r_stop := 3;

PL/SQL procedure successfully completed

SQL> UPDATE mytable
  2     SET sort_rank = CASE WHEN sort_rank = :R_START  THEN :R_STOP
  3                      ELSE sort_rank + sign(:R_START - :R_STOP)
  4                      END
  5   WHERE parentid = 100
  6     AND sort_rank BETWEEN LEAST(:R_START, :R_STOP)
  7                       AND GREATEST(:R_START, :R_STOP);

3 rows updated

SQL> select * from mytable order by sort_rank;

    MENUID   PARENTID  SORT_RANK
---------- ---------- ----------
         1        100          1
         2        100          2
         5        100          3
         3        100          4
         4        100          5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:58:43.103

我将用一个问题来回答你的问题；你为什么要求你的`SORT_RANK`字段由整数组成？

如果该`SORT_RANK`字段只是 a `NUMBER`，而不是 a `NUMBER(10,0)`，您可以将任何项目移动到任何位置的任何位置，而不会出现重新排名问题。

# riak - 如何在高度分布式环境下将数据附加到 Riak 密钥？

> ID：15274070
> 
> 赞同：5
> 
> 时间：2013-03-07T14:42:46.920
> 
> 标签：riak

使用 Riak，我想以一种可以不时获取所有数据的方式顺序附加数据。想想日志，如果我选择增加的日志行并将它们传输到 riak，在某些时候我想重新组合我添加的所有内容。

我想为此创建一个新的存储桶，然后添加由序列号或日期时间戳定义的密钥，并将内容添加到其中，然后使用[列表密钥 API](http://docs.basho.com/riak/latest/references/apis/protocol-buffers/PBC-List-Keys/)并重组我需要的数据。这样做的问题是列表密钥 API 效率不高，建议生产。我喜欢这种方法的原因是数据没有并发写入问题（没有锁等），因为所有键都是独立的。

另一种方法是使用单个密钥，打开它并附加到它，但**我非常担心**并发/锁定问题。此操作将在分布式环境下执行，肯定是一个糟糕的选择

**问题**：在 Riak 中还有其他方法可以做到这一点吗？键的任何附加模式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T13:39:16.763

虽然在写入时将大量小记录写入存储桶很容易且高效，但您付出的代价是当您尝试读取值时会变得昂贵，因为您很可能不知道键。如果您需要通过二级索引、键过滤器或者更糟糕的是，通过遍历存储桶中的所有键（这是一个非常繁重的操作，从不推荐用于生产环境）来查找这些键，那么效率将大大降低而不是通过键检索数据，而不是扩展。

Riak 中也没有附加功能，这意味着您需要先读取然后写入记录才能更新它并附加新的日志条目。根据您组织和协调写作的方式，正如您指出的那样，这可能会导致同一记录的并发更新，在设计解决方案时需要考虑这一点。

假设您正在收集的记录（例如日志条目）可以被视为一组，我推荐的一种技术是时间盒。时间装箱时，您根据时间段聚合数据。如果我们假设我们正在为一组服务器（在本例中命名为服务器）收集日志，我们可以创建具有基于服务器 ID 和日期时间标识符的键的记录，例如测量周期的开始。我们不需要完整的时间戳，只要足以让我们识别记录即可。包含 2013 年 3 月 7 日 14:15 到 14:20 期间的 server3 日志条目的记录可以命名为“server3_20130307_1415”。接下来的 5 分钟时间将相应地命名为“server3_20130307_1420”。如果一段时间内没有数据，则不会创建记录。

这使您可以自动知道涵盖特定时期的记录的密钥，并允许您严格根据密钥访问来检索记录，这可以很好地扩展和执行。您自然需要根据生成的数据量调整单个记录所涵盖的时间段，因为您通常希望将 Riak 中的对象大小保持在 1-2MB 以下。如果每个周期都有大量数据，那么考虑在应用程序级别压缩数据也是值得的，以便低于这个推荐的大小。

如果您希望能够访问更大的数据块而不必检索可能大量的记录，您可以定期聚合记录。例如，您可以读取一个小时内的所有记录，并将聚合数据写入一个名为“server3_20130307_14”的新记录，该记录涵盖整个 14:00-15:00 期间。如您所知，这很简单，并且很容易作为批处理作业实施。

采用这种方法时，如前所述，您需要考虑并发写入的可能性。我认为最好的方法是允许兄弟姐妹（使用存储桶属性 [1] 将存储桶的“allow_mult”设置为 true，将“last_write_wins”设置为 false）。这将导致 Riak 在并发更新的情况下保留记录的所有版本，并且您需要在读取具有兄弟姐妹的记录时解析在应用程序层中创建的任何兄弟姐妹。尽管这确实增加了一些复杂性，但它确保您不会丢失任何数据。

由于我们假设这种情况下的日志条目可以被视为一个集合，您可以通过集合并集合并所有兄弟的集合，然后更新对象（使用正确的向量时钟）以解析兄弟。

[1] [http://docs.basho.com/riak/latest/references/apis/http/HTTP-Set-Bucket-Properties/](http://docs.basho.com/riak/latest/references/apis/http/HTTP-Set-Bucket-Properties/)

# c# - 获取 Clicked ListView 项目属性

> ID：15274071
> 
> 赞同：3
> 
> 时间：2013-03-07T14:42:49.643
> 
> 标签：c#, listview, windows-8, microsoft-metro, onitemclick

我有一个带有 ListView 的 Windows 8 应用程序：

```
<ListView x:Name="EventListView" ItemClick="EventListView_ItemClick_1" IsItemClickEnabled="True"/> 
```

有一些 Event 对象（一个单独的类，具有 EventType、Description、Time 等字符串属性）是 ListView 的来源：

```
List<Event> eventlist = new List<Event>{
    new Event(CONNECTION,   "Disconnected",         DateTime.Now.ToString(),  MONITOR,         "SAMSUNG M5",        CONNECTION_IMG,   RED),
    new Event(SYNC,         "Synchronised",         DateTime.Now.ToString(),  LAPTOP,          "ASUS X402",         SYNC_IMG,         BLUE),
    new Event(WARNING,      "Overheated!",          DateTime.Now.ToString(),  PRINTER,         "CANON MP280",       WARING_IMG,       YELLOW),
};

EventListView.ItemsSource = eventlist; 
```

我试图访问点击项目的信息，但它似乎没有设置：

```
private void EventListView_ItemClick_1(object sender, ItemClickEventArgs e)
{
    Event item = sender as Event;
    GetInfoText.Text = item.Description.ToString();
} 
```

如何获取单击项目的事件属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:51:52.913

`Event`对象存储在参数`e`中：

```
private void EventListView_ItemClick_1(object sender, ItemClickEventArgs e)
{
    Event item = e.ClickedItem as Event;
    GetInfoText.Text = item.Description.ToString();
} 
```

我相信`sender`参数是列表视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:59:25.857

由于您将 ListView 命名为**EventListView**，因此您可以执行以下操作：

```
private void EventListView_ItemClick_1(object sender, ItemClickEventArgs e)
{
    Event item = EventListView.SelectedItem as Event;
    GetInfoText.Text = item.Description.ToString();
} 
```

至少，我是这样做的。

# doxygen - doxygen 标记文件中到底有什么？

> ID：15274074
> 
> 赞同：2
> 
> 时间：2013-03-07T14:42:50.840
> 
> 标签：doxygen

根据[文档](http://www.doxygen.nl/manual/external.html)，您始终使用指向一组 HTML 文件的 doxygen 标记文件。那么标签文件本身究竟做了*什么*？对于一个生成 700 个 HTML 文件的中等规模的项目，我的标记文件是 500Kb，所以里面显然有很多东西。但是什么 - 为什么我不告诉 doxygen 外部文档的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:39:59.503

标记文件就像 C 的预编译头文件。它包含外部项目中的所有符号，并且每个符号都包含指向相应 HTML 文档的深层链接。它只是一个 XML 文件，因此您可以打开它并查看其中的内容。

您不能只告诉 doxygen 外部文档的位置，因为它没有任何信息可以为每个符号深度链接到哪里。它所能做的就是指向文档树的根目录，但这对用户不是很友好。

理论上，doxygen 可以尝试直接从生成的 HTML 文件中提取链接。事实上，这在过去是可能的，但这是非常脆弱的，并且确实经常中断，因此该功能被删除了。

# java - 为什么当我点击按钮时我的秋千会挂起？

> ID：15274075
> 
> 赞同：3
> 
> 时间：2013-03-07T14:42:52.047
> 
> 标签：java, swing, jbutton

我有一个用 Swing 编码的带有 JButton 的表单，我单击它来完成操作。但是当我单击它时，我的框架会挂起。在使用任务栏结束它之前，我无法退出它。问题是什么？这是我的代码：

```
jButton1.addActionListener(new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent evt) {
        jButton1ActionPerformed(evt);
    }
});

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    String[] stopwords = {"a", "sometime", "sometimes", "somewhere", "still",
            "such", "system", "take", "ten", "than", "that", "the", "their", 
            "them", "themselves", "then", "thence", "there", "thereafter",
            "thereby", "therefore", "therein", "thereupon", "these", "they",
            "thickv", "thin", "third", "this", "those", "though", "three",
            "through", "throughout", "thru", "thus", "to", "together", "too",
            "top", "toward", "towards", "twelve", "twenty", "two", "un",
            "under", "until", "up", "upon", "us", "very", "via", "was", "we",
            "well", "were", "what", "whatever", "when", "whence", "whenever",
            "where", "whereafter", "whereas","whereby", "wherein", "whereupon",
            "wherever", "whether", "which", "while","whither", "who", "whoever",
            "whole", "whom", "whose", "why", "will", "with", "within", "without",
            "would", "yet", "you", "your", "yours", "yourself", "yourselves",
            "contact", "grounds", "buyers",  "tried", "said,", "plan", "value",
            "principle.", "forces", "sent:", "is,", "was", "like", "discussion",
            "tmus", "diffrent.", "layout", "area.", "thanks", "thankyou",
            "hello", "bye", "rise","fell","fall","psqft.","http://","km","miles"};
    try {
        Scanner fip1 = new Scanner(new File(selectedFile));
        FileOutputStream out=new FileOutputStream("d:/StopWords.txt");
        while(fip1.hasNext()) {
            int flag=1;
            String s1=fip1.next();
            s1=s1.toLowerCase();
            for(int i=0;i<stopwords.length;i++){
                if(s1.equals(stopwords[i])) {
                    flag=0;
                }
            }
            if(flag!=1) {
             // System.out.println(s1);
             // jTextArea1.append("\n"+s1);
             PrintStream p=new PrintStream(out);
             p.println(s1);  
             p.close();
         }
     }
         JOptionPane.showMessageDialog(null,"STOP WORD REMOVAL IS DONE");        
     } catch(Exception e){
         System.err.println("cannot read file");
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:50:31.010

这听起来像是一个循环，Java 有非常好的调试服务，通常内置在你的 IDE 中。您应该尝试这些，看看您是否可以追踪正在发生的事情。在处理按钮的地方停下来，然后按照此处的代码进行操作。

您也可以将 Hashmap 用于您的停用词列表，但这不是您的错误，只是一种改进。

编辑：正如@robin 指出的 Swing 动作必须迅速结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:56:43.450

我认为这是因为扫描仪的使用。为什么不使用输出流？不管问题如何——你应该使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)来做脏的 IO 工作，并保持 UI 响应。

# c++ - Boost 的 TCP basic_resolver_query 构造函数的参数

> ID：15274077
> 
> 赞同：0
> 
> 时间：2013-03-07T14:42:54.780
> 
> 标签：c++, boost, boost-asio

在放置一个非常简单的 c++ 程序来监听给定端口时，我遇到了一些麻烦。主要是，我在创建 basic_resolver_query 时遇到问题。如果我这样做：

```
boost::asio::ip::tcp::resolver::query query( "0.0.0.0", "5938" ); 
```

我工作完美。但显然我不想对端口进行硬编码，所以我一直试图从文件中读取它并将其传递到那里：它不起作用。

如果我尝试直接将它作为 传递`std::string`，它不起作用，我想这是可以预料的。但我试过通过`m_listenPort.c_string()`，但它没有这样做。

我一直在尝试查看文档和示例，但我什么也找不到。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:45:01.607

据我所知，自从 Boost.Asio 被引入以来，它就可以`boost::asio::ip::basic_resolver_query`用两个参数来构造。`std::string`这是[1.35](http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/reference/ip__basic_resolver_query/basic_resolver_query/overload3.html)和[1.53](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/ip__basic_resolver_query/basic_resolver_query/overload3.html)中的重载构造函数文档。

```
#include <string>
#include <boost/asio.hpp>

int main()
{
  std::string host = "127.0.0.1";
  std::string port = "1234";
  using boost::asio::ip::tcp;
  tcp::resolver::query query1("127.0.0.1", "1234");
  tcp::resolver::query query2(host, port);
  tcp::resolver::query query3(host.c_str(), port.c_str());
} 
```

是否有可能您没有使用或提供用户定义转换为可以构造`std::string`的类型的类型？`std::string`例如，`std::string`提供`c_str()`，而不是`c_string()`。此外，它可以通过`const char*`、 not`const unsigned char*`或构造`const signed char*`，因为这三种类型是不同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:19:36.317

以下对我有用：

```
std::string host = "192.168.1.1", port = "1234";
tcp::resolver::query query(tcp::v4(), host, port); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:25:09.480

在尝试使用 IP 地址而不是 URL 时，我也遇到了一些问题。发现了创建端点并在 socket 对象的 next_layer 对象上的 connect 方法中使用它的技术对我有用：

```
const boost::asio::ip::address IP(boost::asio::ip::address::from_string(serverPath));
int iport = atoi(port.c_str());
const boost::asio::ip::tcp::endpoint EP(IP, iport);
// Set up an SSL context.
boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
// Specify to not verify the server certificiate right now.
ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
// Init the socket object used to initially communicate with the server.
pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
//
// Try to connect to the server.  Note - add timeout logic at some point.
boost::system::error_code EC;
pSocket->next_layer().connect(EP, EC);
if (EC)
{
   // Log an error.  This worker thread should exit gracefully after this.
   stringstream ss;
   ss << "SSLSocket::Connect: connect failed to " << sClientIp << " : " << uiClientPort << ".  Error: " << EC.message() + ".\n";
   Log.LogString(ss.str(), LogError);
} 
```

# crash - 仅当从商店下载时，Windows Phone 应用程序才会崩溃

> ID：15274083
> 
> 赞同：5
> 
> 时间：2013-03-07T14:43:15.360
> 
> 标签：crash, windows-phone, windows-store-apps, marketplace

我有一个非常奇怪的问题，我开发了一个 Windows 手机应用程序，如果从 Visual Studio 安装，它可以完美运行......我作为测试版上传到商店，从商店安装，但应用程序总是在闪屏上崩溃！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:55:14.353

如果您的应用程序使用定期后台代理并且您正在使用该`LaunchForTest`方法对其进行测试，您应该确保您没有在代码的发布版本中调用它。
使用适当的条件编译时检查来保护它：

```
#if DEBUG
ScheduledActionService.LaunchForTest(periodicTaskName, TimeSpan.FromSeconds(1)); 
#endif 
```

请注意，这`DEBUG`是在“调试”配置中默认定义的，而不是在“发布”配置中针对此类情况定义的。

如果市场/商店完成的自动化测试能够检测到这一点，但目前他们没有检测到这一点，那就太好了。也许有一天...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:01:53.120

可能是您的应用需要超过 4 秒的时间才能可用。在调试期间，该要求被禁用，但是当它在商店中时，您的应用程序需要是活泼的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:18:18.987

非常感谢你们，是的，问题是 ScheduledActionService.LaunchForTest，现在我以这种方式评论了所有代码：

```
//#define DEBUG_AGENT

 //#if(DEBUG_AGENT)
        //ScheduledActionService.LaunchForTest(periodicTaskName, TimeSpan.FromSeconds(1)); 
        //#endif 
```

你认为我可以取消注释第二部分吗，这样：

```
//#define DEBUG_AGENT

 #if(DEBUG_AGENT)
        ScheduledActionService.LaunchForTest(periodicTaskName, TimeSpan.FromSeconds(1)); 
        #endif 
```

该应用程序是否可以正常工作？

谢谢 ！！！

# javascript - 从充满 img 的 div 中获取 img 宽度：z-index 和不透明度是决定因素

> ID：15274088
> 
> 赞同：0
> 
> 时间：2013-03-07T14:43:30.077
> 
> 标签：javascript, z-index, element, image, opacity

我的页面中有以下代码。

```
<div id="divId">
  <img src="somePic0.png" style="z-index:10; opacity:0;"/>
  <img src="somePic1.png" style="z-index:9; opacity:0;"/>
  <img src="somePic2.png" style="z-index:8; opacity:1;"/> <!-- need the height of this! -->
  <img src="somePic3.png" style="z-index:7; opacity:1;"/>
  <img src="somePic4.png" style="z-index:6; opacity:1;"/>
</div> 
```

我需要得到注释行的 img 高度！

想要一个 jQuery 解决方案，但纯 javascript 是可以的！

编辑：图像属性“不透明度”循环。它们都从 1 开始，然后逐渐下降到 0。当它们都达到零时，它们都再次设置为 1。然后他们再次“倒计时”。这个 div 的目的是循环背景图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:48:16.913

如果图像的位置是它的定义（即你想要第三张图像），试试这个：

```
 var height = document.getElementById('divId').children[2].height; 
```

如果你想要一个`z-index`8 的，试试这个：

```
 var height = (function(c) {
     var l = c.length, i;
     for( i=0; i<l; i++) {
         if( c[i].style.zIndex == 8) return c[i].height;
     }
 })(document.getElementById('divId').children); 
```

如果你正在寻找第一个不透明的图像，试试这个：

```
 var height = (function(c) {
     var l = c.length, i;
     for( i=0; i<l; i++) {
         if( c[i].style.opacity == 1) return c[i].height;
     }
 })(document.getElementById('divId').children); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:48:33.017

你不能给那些imgs添加一个类吗？还是身份证？

如果没有，你可以用 jQuery 来做

```
$("img[src='" + nameofthe pic + "']").width() 
```

编辑：

要获得最高 z-index 的宽度和不透明度，您需要遍历图像并比较 css 以获得您想要的......我认为这会做到......

```
var z_index = 0;
var $img;

    $.each($("imgs selector"), function(i, e){
        if($(e).css("opacity") == 1){
            if ($(e).css("z-index") > z_index){
                z_index = $(e).css("z-index");
                $img = $(e);
            }

        }
    });

    $img.width(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:51:06.030

向每个节点添加类，遍历它们，然后从中收集您需要的相关信息。

```
 <div id="divId">
        <img class="node" src="somePic0.png" style="z-index:10; opacity:0;"/>
        <img class="node" src="somePic1.png" style="z-index:9; opacity:0;"/>
        <img class="node" src="somePic2.png" style="z-index:8; opacity:1;"/> 
        <img class="node" src="somePic3.png" style="z-index:7; opacity:1;"/>
        <img class="node" src="somePic4.png" style="z-index:6; opacity:1;"/>
   </div>

    <script>
        /** 
         *  var collectNodes = document.getElementById('divId').children; 
         *     for <= IE8\. (Thanks Kolink)
        **/ 
        var collectNodes = document.getElementsByClassName('node');
        var y = 0;
        for ( var x = 0; x < collectNodes.length; x++ ) {
            if ( collectNodes[x].style.opacity !== "" && !y ) {
                y = x;
            }
        }
        console.log ( collectNodes[y].style.opacity );
        console.log ( collectNodes[y].height );
   </script> 
```

jsFiddle：http: [//jsfiddle.net/XHr3P/3/](http://jsfiddle.net/XHr3P/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:20:18.547

既然您说您更喜欢 jQuery 解决方案，我将提出一种使用 jQuery 的方法。我创建了一个小型 jQuery 插件，它将返回不透明度设置为`1`最高 z-index 的元素。

```
(function( $ ) {
  $.fn.getHighestVisibleZ = function() {
    var highestZ, $elm;
    this.filter(function (){
       return $(this).css("opacity") === "1";
    }).each(function(){
        var z = parseInt($(this).css("zIndex"), 10);
        if (!highestZ || highestZ < z) {
           highestZ = z;
           $elm = $(this);
        }
    });
    return $elm;
  };
})( jQuery );

// You could now use the plugin like so    
console.log($("#divId img").getHighestVisibleZ().width()); 
```

[**工作示例**](http://jsfiddle.net/wDJXs/)

*请注意，z-index 仅适用于非静态元素，因此要使其正常工作，您的图像必须具有静态以外的位置。*

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-07T14:57:36.380

这是我的首选方式

```
var index = 2;
var width;
$("img").each(function(arg){
    if(index==arg){
      width = $(this).width();
    }  
}); 
```

这是小提琴 [http://jsfiddle.net/UNPpL/2/](http://jsfiddle.net/UNPpL/2/)

# c# - 如何混合 DynamicParameters 和 DependsOn

> ID：15274103
> 
> 赞同：4
> 
> 时间：2013-03-07T14:43:57.337
> 
> 标签：c#, castle-windsor

我想我错过了一些东西，或者我正在做一些愚蠢的事情，但我无法理解它。假设以下两个类：

```
public class A
{
    public A(string a, string b)
    {
    }
}

public class B
{
    public B(A boris2)
    {
    }
} 
```

而这个`main`方法：

```
private static void Main(string[] args)
{
    var container = new WindsorContainer();
    container.Register(
        Component.For<A>().LifeStyle.Transient.ImplementedBy<A>().Named("Boris2")
        //.DynamicParameters((k,d)=>{
        //  d["b"] = "jkl";
        //})
        .DependsOn(new { a = "ghi", b="jkl" })
        );

    container.Register(
        Component.For<B>().LifeStyle.Transient.ImplementedBy<B>()
        .DependsOn(Dependency.OnComponent("boris2", "Boris2"))
        );

    var b = container.Resolve<B>();
    Console.WriteLine("Okay");
    Console.ReadKey();
} 
```

如果我如上所示运行此方法，它会打印`Okay`，然后按回车键，然后退出。一切皆好。但是，如注释掉的代码所示，我希望`b`动态计算参数（最终会，但我只是想解决问题的核心）

所以，如果我第一次打电话`Register`看起来像这样：

```
 container.Register(
        Component.For<A>().LifeStyle.Transient.ImplementedBy<A>().Named("Boris2")
        .DynamicParameters((k, d) =>
        {
            d["b"] = "jkl";
        })
        .DependsOn(new { a = "ghi" })
        ); 
```

我*认为*这大致等价，现在我得到一个例外：

```
Castle.MicroKernel.Handlers.HandlerException was unhandled
  HelpLink=groups.google.com/group/castle-project-users
  HResult=-2146233088
  Message=Can't create component 'PlayAreaCS_Con.B' as it has dependencies to be satisfied.

'PlayAreaCS_Con.B' is waiting for the following dependencies:
- Component 'Boris2' (via override) which was registered but is also waiting for dependencies.

'Boris2' is waiting for the following dependencies:
- Parameter 'b' which was not provided. Did you forget to set the dependency?

  Source=Castle.Windsor
  StackTrace:
       at Castle.MicroKernel.Handlers.DefaultHandler.AssertNotWaitingForDependency()
       at Castle.MicroKernel.Handlers.DefaultHandler.ResolveCore(CreationContext context, Boolean requiresDecommission, Boolean instanceRequired, Burden& burden)
       at Castle.MicroKernel.Handlers.DefaultHandler.Resolve(CreationContext context, Boolean instanceRequired)
       at Castle.MicroKernel.Handlers.AbstractHandler.Resolve(CreationContext context)
       at Castle.MicroKernel.DefaultKernel.ResolveComponent(IHandler handler, Type service, IDictionary additionalArguments, IReleasePolicy policy)
       at Castle.MicroKernel.DefaultKernel.Castle.MicroKernel.IKernelInternal.Resolve(Type service, IDictionary arguments, IReleasePolicy policy)
       at Castle.MicroKernel.DefaultKernel.Resolve(Type service, IDictionary arguments)
       at Castle.Windsor.WindsorContainer.Resolve[T]()
       at PlayAreaCS_Con.Program.Main(String[] args) in c:\Dev\PlayAreaCS_Con\PlayAreaCS_Con\Program.cs:line 49
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我什至尝试将两个参数都移入`DynamicParameters`和删除`DependsOn`，认为将两者混合在一起可能会出现一些问题，但它仍然会出错。据我所知，它根本没有调用我的 lambda。

我究竟做错了什么？

**编辑**

如果我注释掉：

```
.DependsOn(Dependency.OnComponent("boris2", "Boris2")) 
```

从我的第二个`Register`电话开始，它就起作用了。但我确实需要在容器中注册几个相同的组件，仅按名称区分。（我已经从第一次`Register`通话中删除了其他注册，因为它似乎不相关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:41:42.963

我不知道该说什么，除了：在我的机器上工作（使用 Windsor 3.2），使用原始（第一个）代码，我只是取消了注释掉的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T23:45:30.950

我刚刚尝试了类似的场景。我正在使用动态参数，一切都很好。

我添加了命名注册并使用 DependsOn(ServiceOverride.ForKey) 引用了一些注册，我得到了一大堆“正在等待以下依赖项”错误。

然后我将所有动态依赖项转换为匿名对象形式，一切都很好。在这些步骤之间我没有做任何其他事情。我使用的是温莎 3.3.0 版。我很高兴它终于奏效了。

# algorithm - 树中最长路径的公共段

> ID：15274106
> 
> 赞同：1
> 
> 时间：2013-03-07T14:44:05.493
> 
> 标签：algorithm, tree

我遇到了一个编程问题

1.  给定一棵加权树。
2.  一个感兴趣的节点集合，我们称这个集合为 S。

我们需要返回最长的理想路径中最短的公共段。理想路径是在属于上述集合 S 的顶点上开始和终止的路径。不能保证公共路径存在。我知道在线性时间内找到树中最长的路径，我们也可以轻松地将其扩展到理想路径的情况，但是 2 dfs 的经典算法无助于找到最长的路径，而只是最长的路径长度。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:59:51.220

如果你有：

1.  路径开始
2.  路径长度，来自 DFS 或 BFS 等算法
3.  路径末端

您可以轻松获得路径。更改代码：

```
//current vertex is v, next is u, current length is l
u.length = l + 1;
u.visited = true;
cont.push(u); 
```

添加行：

```
u.previous = v; 
```

然后你可以通过以下方式找到路径：

```
v = path_end;
while(v != path_begin){
    //mark, v belongs to "path"
    v = v.previous
} 
```

# code-analysis - ExpandoObject 导致违反规则 CA1502：避免过于复杂

> ID：15274107
> 
> 赞同：0
> 
> 时间：2013-03-07T14:44:06.457
> 
> 标签：code-analysis, fxcop, expandoobject

我有执行邮件合并类型操作的代码，并且我正在使用动态/ExpandoObject 来组装属性。我这样做而不是构建一个匿名类，因为在邮件合并发生之前，不同的方法会添加属性。代码运行良好。

问题是 Visual Studio 代码分析将 ExpandoObject 上的每个属性集操作评分为 1 点圈复杂度。所以一个简单的线性方法设置一堆没有分支逻辑的属性是得到分数> 25，这是违反此规则的值。

这是我的代码问题，还是代码分析工作方式的问题？

我的代码如下所示：

```
 dynamic replacementFields = new ExpandoObject();
        replacementFields.time = DateTime.Now();
        replacementFields.url = Request.Url;
        replacementFields.server = Environment.MachineName;
        replacementFields.firstName = "Jeff";

        ... (a bunch more)

        replacementFields.phone = "555-1212"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:00:19.133

这是 CA1502 规则实施的一个已知问题 ( [https://connect.microsoft.com/VisualStudio/feedback/details/729236/use-of-dynamic-types-makes-cyclomatic-complexity-almost-meaningless](https://connect.microsoft.com/VisualStudio/feedback/details/729236/use-of-dynamic-types-makes-cyclomatic-complexity-almost-meaningless) )，这会为使用匿名方法或动态类型的方法生成不适当的高圈复杂度统计信息。要了解原因，请使用像 Reflector 这样的反编译器（但没有启用任何优化，这会隐藏有问题的生成代码）来查看编译后的 IL（这是 FxCop 规则分析的内容）。

# php - symfony 中的 sfParseException 是什么？

> ID：15274109
> 
> 赞同：1
> 
> 时间：2013-03-07T14:44:08.260
> 
> 标签：php, symfony1

当我尝试在 symfony 1.x 和 php 中创建新项目时出现错误。如果这很重要，我在 Windows 7 上。错误显示在下面，有什么想法吗？

> ****-------------------------------------------------- -------------------------------------------------- ---------------------------
> [sfParseException]**
> 配置文件“C:\xampp\htdocs\sf_sandbox\config/../data/symfony /config/php.yml”指定键“magic_quotes_runtime”，它不是 php.ini 指令。**

**[![在此处输入图像描述](../Images/52c3c19f4eb6ef9ef51fa6e5c8f3d5cc.png)](https://i.stack.imgur.com/3MU0X.jpg)**

# c++ - c++十进制到二进制混淆

> ID：15274112
> 
> 赞同：0
> 
> 时间：2013-03-07T14:44:19.190
> 
> 标签：c++, binary, decimal

我已经在 J​​ava 中解决了这个问题并使用`Integer.toBinaryString()`了类似的函数在 c++ 中不可用（据我所知）

我已经制作了这个功能并且它完全可以工作但是我很困惑为什么它可以工作，任何帮助将不胜感激

```
void decimalToBinary (int number)
{
    int remainder;
    if (number <= 1)
    {
        cout << number;
        return;
    }
    remainder = number % 2;
    decimalToBinary(number >> 1);
    cout << remainder;
} 
```

我理解的主要问题是递归调用，为什么它需要`number >> 1`在那里？

因为当它最初被调用时，它使用数字，并检查它是否 <=1 在这种情况下它只输出数字（0/1）并结束函数，否则它获取数字并从除以 2 中得到余数（ 1/0) 然后再次调用该函数`number >> 1`

是否`number >> 1`意味着它从整数 ex 1234 中删除结束号在递归调用中将是 123？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:45:53.730

这`>>`与除以 2 的效果相同。

该数字以二进制形式存储，因此将其向右移动一位会将该位推出，这具有将数字除以 2 的效果，就像您将十进制数向右移动一位一样它除以 10。

您可以使用具有相同效果的除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:50:38.817

>> 运算符基本上将位向右移动作为参数给出的次数，它基本上等于将数字除以该参数的 2 次幂 (x/2^n)。要将十进制数转换为二进制数，您需要将数字递归地除以 2，直到无法再除以 - 在这种情况下，当它小于 1 时。并且在途中您必须收集每个此类除法中的提醒，即有效地是您想要获得的二进制数。

# ruby-on-rails - Postgres 数据库列默认使用 ruby on rails 4

> ID：15274116
> 
> 赞同：1
> 
> 时间：2013-03-07T14:44:31.670
> 
> 标签：ruby-on-rails, postgresql, ruby-on-rails-4

我想使用 UUID 作为我在带有 postgres db 的 ruby​​ on rails 中的默认密钥，我希望 Postgres 生成密钥。这样做的 RoR 方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:32:14.887

这似乎可以解决问题：

```
create_table(:deals, :id => false) do |t|
  t.uuid :uuid, :null => false
  t.integer :quantity
  t.timestamps
end

add_index(:deals, :uuid, :unique => true, :name => 'deals_pkey') 
```

# jquery - 如何将图像添加到 jquery 工具提示

> ID：15274123
> 
> 赞同：18
> 
> 时间：2013-03-07T14:44:51.300
> 
> 标签：jquery, tooltip

我还没有看到这个确切的问题得到解决......如果已经解决，请指出我。

我正在使用 jquery 的 ui 工具提示。我有一个链接，当您将鼠标悬停在它上面时，我想显示一张图片。到目前为止，没有什么对我有用。

标题中的ui代码：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script> 
```

HTML：

```
(see <a id='riverroad' href='#' title='' >image of 1 Maple St.</a>) 
```

代码：

```
$( "#riverroad" ).tooltip({ content: "<img src='./images/myimage.jpg/>" }); 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T15:10:33.493

试试这个：

**html**

```
<a id="riverroad" href="#" title="" >image of 1 Maple St.</a> 
```

**jQuery**

```
$( "#riverroad" ).tooltip({ content: '<img src="yourImagePath" />' }); 
```

见工作[小提琴](http://jsfiddle.net/soyuka/vvVwD/)。

当然包括 Jquery 1.9.1 和 JqueryUI 1.9.2。顺便检查一下你的图片路径是否正确。

编辑：您告诉我您正在使用 jQuery 设置链接，请参阅第二个工作示例：

**html**

```
<div id="content">    
</div> 
```

**jQuery**

```
$(document).ready(function() {
   $("#content").html('<a id="riverroad" href="#" title="" >image of 1 Maple St.</a>');
   $("#content #riverroad").tooltip({ content: '<img src="http://icdn.pro/images/fr/a/v/avatar-barbe-brun-homme-utilisateur-icone-9665-128.png" />' }); 

}); 
```

这是新的[小提琴](http://jsfiddle.net/soyuka/vvVwD/1/)！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T15:01:10.110

首先，您缺少`src`标签的结束引号。您的代码应该是：

```
$( "#riverroad" ).tooltip({ content: "<img src='./images/myimage.jpg' />" }); 
```

此外，这应该使用[jQueryUI 网站](http://jqueryui.com/tooltip/#custom-content)上显示的以下代码：

HTML：

```
<a id='riverroad' href='#' title='' >image of 1 Maple St.</a> 
```

JS：

```
<script>
  $(function() {
    $( document ).tooltip({
      items: "a",
      content: function() {
        var element = $( this );
        if (element.attr('id') === 'riverroad') {
          return "<img class='map' src='./images/myimage.jpg' />";
        }
      }
    });
  });
</script> 
```

这是关于 jsFiddle 的演示：http: [//jsfiddle.net/QgPEw/1/](http://jsfiddle.net/QgPEw/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-10T06:11:35.147

*只需在标题*中直接传递 HTML 内容就可以了。

```
<a id="riverroad" href="#" title="<img src='http://icdn.pro/images/fr/a/v/avatar-barbe-brun-homme-utilisateur-icone-9665-128.png'" >image of 1 Maple St.</a> 
```

只要记住在*title*中使用单引号即可。

# java - 如何使正则表达式匹配日期，特别是一个除外

> ID：15274128
> 
> 赞同：0
> 
> 时间：2013-03-07T14:45:03.620
> 
> 标签：java, regex, selenium, junit4

我正在用硒做测试。我过滤了某个日期的记录（例如：10/03/2013）应该有其他日期的记录。

如何在 Selenium 中验证这一点？我认为正则表达式可能很有用。

ps：日期为dd/MM/YYYY格式

编辑：来源： http: [//pastebin.com/F16rSHwE](http://pastebin.com/F16rSHwE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:56:53.747

这个正则表达式应该可以解决问题：

```
^(0[1-9]|[12][0-9]|3[01])//(0[1-9]|1[012])//(19|20)\d\d 
```

**请注意**

*   我总是不擅长转义长表达式，所以请仔细检查我:)
*   这将匹配dd/MMM/YYYY 格式的*任何*日期，因此如果要排除一个，则需要一些其他逻辑
*   现在，我的代理拒绝连接到 pastebin，所以我无法查看您的代码以提供更多帮助（简单的复制粘贴问题应该是更好的选择）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:14:19.137

使用零宽度负前瞻断言。

```
(?!<YOUR-EXCLUDED-DATE-PATTERN>)<GENERIC-DATE-PATTERN> 
```

# node.js - Node js Express 和 Simple Socket 服务器

> ID：15274138
> 
> 赞同：0
> 
> 时间：2013-03-07T14:45:30.790
> 
> 标签：node.js, express

事情是这样的：

我想创建一个简单的 API 服务器，来自用户的请求被解析并转换为传输到套接字服务器的简单套接字消息。

这是代码

快递服务器：

```
var express = require('express');

var app = express(),
    handler = require('./lib/urlparser.js');

app.get('/', function(req, res){
  var body = 'Hello World';
  res.setHeader('Content-Type', 'text/plain');
  res.setHeader('Content-Length', body.length);
  res.end(body);
});

app.get('/:command/:mode/:addr/:value', handler.handleRequest);

app.listen(80);
console.log('Listening on port 80...'); 
```

和 handleRequest 模块

```
 exports.handleRequest = function(req, res) {

    var net = require('net');
    var HOST = '192.168.1.254';
    var PORT = 8888;
    var client = new net.Socket();

    /* translate the url params and save it to var request and send it */
    /* The code goes here */

        client.connect(PORT, HOST, function() {
            //console.log('Connected To: ' + HOST + ':' + PORT);
            client.setEncoding('utf-8');
            client.write(request);
            //console.log('Message Sent');
        });

        client.on('data', function(val) {
            //console.log('The Data: ' + val);
            res.send([{addr:'test'}, {value: val}]);
            client.destroy();
        });

        client.on('close', function() {
            //console.log('Connection closed');
        });

    }; 
```

这段代码有效，我只需要知道它是否正确或者有什么方法可以包含 net 模块并在主 js 文件中声明套接字服务器的 ip 和端口（在模块之外？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:03:29.873

您绝对可以将代码从模块移动到主文件。

首先，在主文件中，创建一个名为 handleRequest 的函数，该函数采用与 handleRequest 模块中的函数相同的变量并具有相同的主体。那是，

```
var handleRequest = function(req,res){
    var net = require('net')
    ...
    ...
} 
```

其次，改变这一行：

```
app.get('/:command/:mode/:addr/:value', handler.handleRequest); 
```

进入这个：

```
app.get('/:command/:mode/:addr/:value', handleRequest); 
```

现在您不再需要包含该模块。祝你好运！

# c# - C# GUI Creation - 用于大量输出文本的容器类型是什么？

> ID：15274139
> 
> 赞同：-2
> 
> 时间：2013-03-07T14:45:34.817
> 
> 标签：c#, user-interface

我希望用 VS C# 构建一个 GUI。此 GUI 将持续显示（大量）更新的文本，您可以滚动查看这些文本。我会使用什么容器？我将如何减轻在努力中消耗过多内存的情况？什么策略最好做到这一点？

**我的目标：** 在我的 UI 上创建一个面板，显示我的应用程序正在处理的所有文本信息。

*就像在 unix shell 中使用详细命令启动程序一样。*

**GUI 类型：** Windows 窗体

**更新间隔：**随机 - 虽然更新每分钟发生多次

所有更新都将累积并在面板上可见（这就是我所说的大量）。这将在正在运行的应用程序的生命周期内增长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:04:10.360

每当我必须显示越来越多的文本（一行一行地出现）时，我都会使用任何类型的列表而不是文本容器。每次操作都会复制字符串，因此性能很糟糕。

在列表（即 ListBox）上，您可以在开头或结尾插入新项目。

如果您想将整个文本作为一个文本，您可以在导出时连接文本，这比更新内容的频率要低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:50:41.463

如果您要附加到内容，那么您想使用类似 a 的东西`DataGridView`，它允许您附加到可变集合。a的`Text`属性`TextBox`包含一个不可变的字符串，因此附加到它通常是低效的，因为它需要在 GC 之前构造一个新的字符串对象。

# c# - .NET 桌面应用程序（Google、Yahoo、Facebook ...）的单点登录

> ID：15274142
> 
> 赞同：7
> 
> 时间：2013-03-07T14:45:40.577
> 
> 标签：c#, .net, login, single-sign-on

我需要在我的应用程序中提供登录机制。我想为最常见的 IP 提供登录，例如*Google*、*Yahoo!* 、*脸书*、*微软直播*等。

我的应用程序是用 C# 编写的**桌面应用程序，因此****不是**Web 应用程序。

*   你知道我可以用来实现这个目的的任何库或框架吗？
*   我必须为每个提供者实施登录机制吗？

注意：我知道微软在 Azure 中提供了[独特的登录机制](http://www.windowsazure.com/en-us/home/features/identity/)，但我对这个 Azure 服务不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:38:52.937

[OpenAuth](http://oauth.net)将满足您的需求，但使用起来可能很复杂。不过，有大量资源可以帮助您。[这](http://www.deanhume.com/Home/BlogPost/a-simple-guide-to-using-oauth-with-c-/49)是描述使用 OAuth 的过程的文章的链接，并且有一个很好的 SO 答案[这里](https://stackoverflow.com/a/4463378/376474)有代码示例，您可以使用它来开始。

您将需要注册您想要用于登录的服务并接收它们的密钥。引用自链接文章：

> 1.  使用您正在为其开发的服务注册您的应用程序。例如 Twitter、Twitpic、SoundCloud 等。您将收到一个消费者密钥和秘密。
> 2.  然后，您（应用程序的开发人员）通过传递使用者密钥和使用者秘密来启动 OAuth 流程
> 3.  该服务将向您返回一个请求令牌。
> 4.  然后，用户需要批准应用程序运行请求。
> 5.  用户授予权限后，您需要将请求令牌交换为访问令牌。
> 6.  现在您已收到访问令牌，您可以使用它来使用您的凭据和访问令牌签署所有 http 请求。

尽管您需要来自每个提供商的密钥，但身份验证方法将是相同的，因此您实际上不需要实现特定于每个服务提供商的单独登录代码。

# java - 尝试编写正则表达式来处理 ID3v23 TCON 值的解码

> ID：15274145
> 
> 赞同：-3
> 
> 时间：2013-03-07T14:45:49.863
> 
> 标签：java, regex

如何编写正则表达式（在 java 中）从 mp3 中的 ID3 标签的 TCON 帧中拆分字符串，即[http://id3.org/id3v2.3.0](http://id3.org/id3v2.3.0)

示例如下（可能有多少个术语没有最大值）

输入：`(1)(2)`

输出：

```
(1)
(2) 
```

输入：`(1)Indie(2)`

输出：

```
(1)Indie
(2) 
```

输入：`Indie Rock`

输出：

```
Indie
Rock 
```

还有两种特殊的文本可以放在括号 (RX) 和 (CR) 中，所以

输入：`(RX)(CR)`

输出：

```
(RX)
(CR) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:56:58.490

你可以使用：

```
String[] arr = str.split(" |(?<=.)(?=\\(\\d+\\))"); 
```

`(?<=.)`表示最后一个字符是任何东西（因此不是行首）。

`(?=\\(\\d+\\))`表示下一个字符`(`后跟 1 个或多个数字，后跟`)`.

**注意：**以上内容可能比需要的复杂一些，您可以简化`(?=\\(\\d+\\))`为`(?=\\()`肯特的回答。这完全取决于您想要匹配的内容。

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:59:28.910

```
String[] ss = str.split(" |(?<=\\S)(?=\\()"); 
```

该`ss`数组保存输出段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:50:26.627

您可以 replaceAll 使其以逗号（或其他标记）分隔然后拆分：

```
str.replaceAll("(\\(\\d+\\)\\w*)", "$1,").split(",") 
```

# c# - 如何将基类型列表转换为派生类型列表

> ID：15274146
> 
> 赞同：3
> 
> 时间：2013-03-07T14:45:50.237
> 
> 标签：c#, .net, linq

从派生类到基类，似乎有很多问题相反，但我的问题是如何将基类型列表转换为派生类型列表？

```
public class MyBase {
    public int A;
}

public class MyDerived : MyBase {
    public int B;
}

public void MyMethod() {
    List<MyBase> baseCollection = GetBaseCollection();
    List<MyDerived> derivedCollection = (List<MyDerived>)baseCollection; // Which doesn't work
} 
```

我最终得到的解决方案不是很优雅。

```
public class MyBase {
    public int A;
}

public class MyDerived {
    public int B;
    public MyBase BASE;
}
public void MyMethod() {
    List<MyBase> baseCollection = GetBaseCollection();
    List<MyDerived> derivedCollection = new List<MyDerived>();
    baseCollection.ForEach(x=>{
        derivedCollection.Add(new derivedCollection(){ BASE = x});
    });
} 
```

一定会有更好的办法...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T14:48:18.033

您可以使用 Linq 方法`OfType<MyDerived>()`，例如：

```
List<MyDerived> derivedCollection = baseCollection.OfType<MyDerived>().ToList(); 
```

它将删除所有不是`MyDerived`类的项目

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T14:47:32.543

*将*基类列表转换为派生类列表基本上是非类型安全的。

您的代码将基础列表*复制到派生列表。*

你可以更简单地做到这一点：

```
List<MyDerived> derivedCollection = baseCollection.ConvertAll(x => new derivedCollection(){ BASE = x}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T14:48:26.247

```
using System.Linq;

// with exception in case of cast error
var derivedCollection = baseCollection.Cast<MyDerived>().ToList();

// without exception in case of cast error
var derivedCollection = baseCollection.OfType<MyDerived>().ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:00:24.073

尝试这个：

```
public class MyBase
{
    public int A;
}

public class MyDerived : MyBase
{
    public int B;

    public MyDerived(MyBase obj)
    {
        A = obj.A;
    }
}

public void MyMethod() {
    List<MyBase> baseCollection = GetBaseCollection();
    List<MyDerived> derivedCollection = baseCollection.Select(x => new MyDerived(x)).ToList();
} 
```

# qt - 动态连接/断开信号和插槽

> ID：15274147
> 
> 赞同：1
> 
> 时间：2013-03-07T14:45:52.763
> 
> 标签：qt, optimization, signals, slot

我的程序有两种状态，出于某些原因它可以在它们之间切换。在这些状态下，程序需要接收不同的信号，这意味着它必须在运行期间连接和断开某些信号。

这种方法有多糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:52:15.330

这是一个很好的方法，我以前用过没有问题。取决于您实际在做什么，[`QSignalMapper`](http://qt-project.org/doc/qt-4.8/qsignalmapper.html)可能对您有用。

# sql - Google 电子表格：用于自动更新的 SQL 查询

> ID：15274150
> 
> 赞同：1
> 
> 时间：2013-03-07T14:45:53.527
> 
> 标签：sql, google-sheets

假设我有一个包含几列和多行的主表，并且随时更新。现在我需要使用主表中的一些数据作为参考，在另一个表中创建分析报告。如何使用 SQL 查询来引用原始工作表中的适当数据？通过这样做，当原始工作表更新为更多记录时会发生什么？它们会自动包含在第二张表中吗？

我只是一个初学者，但如果有人对这件事有任何线索，或者是否有任何可以实施的替代方法，请告诉我！我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:49:44.717

我认为您正在寻找[Google Query Language](https://developers.google.com/chart/interactive/docs/querylanguage)。

> QUERY 函数是一个内置函数，允许您使用 Google Visualization API 查询语言对一组值执行查询。
> 
> 查询字符串 - 用于应用数据操作的查询字符串。该查询直接从输入范围对列 ID 进行操作，并使用 SQL 语言的子集。例如，“select E”、“select A, B”、“sum(B),C group by C”、“select D where D < 'Nick'”。

[文档](http://support.google.com/drive/bin/answer.py?hl=en&answer=1388882)

# java - 无法使用边框布局编辑 JFrame 中 JTextField 的宽度

> ID：15274153
> 
> 赞同：1
> 
> 时间：2013-03-07T14:46:01.730
> 
> 标签：java, swing, jtextfield, border-layout, preferredsize

感谢所有在 JTextField 问题上帮助我的人。通过使用 BorderLayout.PAGE_START，我成功地将 JTextField 添加到了带有边框布局的框架中。但现在我无法编辑 JTextField 的宽度。只有高度在变化。请看一下下划线。[这会改变 JTextField 的高度，但宽度不会改变]。

![具有完全拉伸的 TextField 的 JFrame  ](../Images/3a43a31e20afe3b3e2fd0eecbf634861.png)

边框布局是否将所有组件拉伸到最大宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:09:13.737

不要这样使用`setPreferredSize()`，因为你不知道字体会有多大。改为这样[做。](https://stackoverflow.com/a/15237679/261156)

编辑：我忘记了`BorderLayout.PAGE_START`，所以只使用`FlowLayout`新的`JPanel()`；它使用文本字段的内置首选大小。

```
JTextField textField = new JTextField(10);
JPanel panel = new JPanel();
panel.add(textField);
frame.add(panel, BorderLayout.PAGE_START);
...
frame.pack();
frame.setVisible(true); 
```

# php - 绕过 Gmail 的垃圾邮件过滤器（使用 PHP 从共享主机发送的邮件）

> ID：15274157
> 
> 赞同：16
> 
> 时间：2013-03-07T14:46:16.753
> 
> 标签：php, email, spam, swiftmailer, spam-prevention

**TL;DR：**从共享主机（例如 Unoeuro 或 One.com 的廉价域名）发送的邮件最终会成为垃圾邮件。怎么修？

* * *

我制作了一个邮件系统，它首先生成了一个 PDF 文件（使用[FPDF](http://www.fpdf.org/)），然后它使用 PHP 的 Swiftmailer 将 PDF 文件作为附件发送。这封电子邮件已发送给 130 人（作为“一张”发票）。但它进入了几乎每个人的垃圾邮件过滤器。我尝试调整 SwiftMailers 标头设置，但没有任何运气。甚至是我以前没有发送过的邮件（经过彻底测试）。这是我的初始设置：

```
function sendMailEt($toEmail, $toName, $invoiceNumber){

require_once('includes/lib/swift_required.php');

$transport = Swift_SmtpTransport::newInstance('mailout.one.com', 25)
  ->setUsername('EMAIL-ACCOUNT1@THE-DOMAIN.DK')
  ->setPassword('THE-PASSWORD')
  ;    

$mailer = Swift_Mailer::newInstance($transport);

$message = Swift_Message::newInstance('FROM COMPANY')
      ->setSubject('Thanks for signing up - COMPANY')
  ->setFrom(array('EMAIL-ACCOUNT1@THE-DOMAIN.DK' => 'Company name'))
  ->setTo(array($toEmail => $toName))
      ->setBody('A brief body, that explains that this is an invoice and that it has to be paid within 5 days. (written in danish)')
      ->addPart('A brief body, that explains that this is an invoice and that it has to be paid within 5 days. (written in danish)', 'text/html')

   ->attach(Swift_Attachment::fromPath('/URL-TO-THE-PDF-FILE.pdf'))
  ;

$result = $mailer->send($message);
} 
```

我还尝试使用 PHP 的本机功能发送电子邮件`mail()`，然后简单地链接到发票 ( `http://www.company-domain-name.dk/invoice/base64_encoded-name.pdf`)...同样的结果（垃圾邮件）。

我尝试自己编写整个标题。我已经阅读了大量关于标题应包含哪些内容的论坛，但他们都写了不同的东西。所以我尝试了一些不同的东西（我之前发送过的电子邮件和我没有发送过的电子邮件）......结果相同（垃圾邮件）。

然后我尝试在他们的标题中完全按照 MailChimps 的方式编写标题。这导致我这样做：

```
 $headers = "Reply-To: Company name <UNUSED-EMAIL-ACCOUNT-FROM-DOMAIN@DOMAIN-NAME.DK>\r\n"; 
 $headers .= "Return-Path: Company name <UNUSED-EMAIL-ACCOUNT-FROM-DOMAIN@DOMAIN-NAME.DK>\r\n"; 
 $headers .= "From: Message from Company name <UNUSED-EMAIL-ACCOUNT-FROM-DOMAIN@DOMAIN-NAME.DK>\r\n"; 
 $headers .= "MIME-Version: 1.0\r\n";
 $headers .= "Sender: Message from Company name <UNUSED-EMAIL-ACCOUNT-FROM-DOMAIN@DOMAIN-NAME.DK>\r\n";
 $headers .= "Content-type: text/plain; charset=\"utf-8\"; \r\n";
 $headers .= "X-Mailer: PHP". phpversion() ."\r\n"; 
```

然后我这样发送邮件：

```
mail($toName . '<'.$toEmail.'>', utf8_decode('Faktura på depositumet'), utf8_decode($someMessage), $headers); 
```

...相同的结果（垃圾邮件）。

网络空间是 One.com，所以我不能使用[PHPmailer](https://github.com/PHPMailer/PHPMailer)（因为必须安装，而且不能在 one.com 的服务器上完成）。而且我无法使用 One.com 定义 SPF。

我想要的只是能够发送不属于垃圾邮件的电子邮件。

以下是我的问题：

1.  是因为我的标题已关闭，还是因为“更深”？

2.  Gmail 垃圾邮件过滤器是禁止单个电子邮件帐户（例如 `this@example.com`）还是禁止整个域（例如 `@example.com`）？

3.  可以以某种方式将列入黑名单的电子邮件列入白名单吗？

* * *

*** 加法 1 ***

好的......我现在尝试了很多事情：

*   我尝试像推荐的那样添加 LoneWolfPR 的返回路径，但没有帮助。
*   我联系了 One.com（托管公司），并与他们确认，无法设置 SPF 记录或 DKIM 记录。它仍然不是。
*   我考虑设置一个“取消订阅”链接，其中包含一个带有表单的网站链接，但我不相信这种方法。我的意思是 - 发票一直通过电子邮件发送。为什么你应该能够取消订阅发票？！由于这在我的脑海中毫无意义，所以我只尝试了大约 20 分钟（显然，没有结果）。

这是我当前的电子邮件标题（通过单击“查看原件”从 Gmail 获得）：

```
Delivered-To: NEWLY-CREATED-GMAIL-ACCOUNT@gmail.com
Received: by 10.76.75.104 with SMTP id b8csp48728oaw;
        Sat, 16 Mar 2013 17:32:56 -0700 (PDT)
X-Received: by 10.152.116.45 with SMTP id jt13mr7897860lab.0.1363480376067;
        Sat, 16 Mar 2013 17:32:56 -0700 (PDT)
Return-Path: <XXX111@DOMAIN-NAME.dk>
Received: from mail-out2.b-one.net (mail-out2.one.com. [91.198.169.19])
        by mx.google.com with ESMTP id p10si4637427lbb.120.2013.03.16.17.32.55;
        Sat, 16 Mar 2013 17:32:55 -0700 (PDT)
Received-SPF: neutral (google.com: 91.198.169.19 is neither permitted nor denied by best guess record for domain of XXX111@DOMAIN-NAME.dk) client-ip=91.198.169.19;
Authentication-Results: mx.google.com;
       spf=neutral (google.com: 91.198.169.19 is neither permitted nor denied by best guess record for domain of XXX111@DOMAIN-NAME.dk) smtp.mail=XXX111@DOMAIN-NAME.dk
Date: Sat, 16 Mar 2013 17:32:55 -0700 (PDT)
Message-Id: <51450f37.6a0b700a.6239.5dbcSMTPIN_ADDED_MISSING@mx.google.com>
Received: from localhost.localdomain (srv18.one.com [193.202.110.18])
    by mail-out2.b-one.net (Postfix) with ESMTP id F3D0B10365
    for <NEWLY-CREATED-GMAIL-ACCOUNT@gmail.com>; Sun, 17 Mar 2013 01:32:53 +0100 (CET)
Received: from 85.218.159.219 by www.DOMAIN-NAME.dk via URL_TO_THE_SCRIPT.php with HTTP; Sun, 17 Mar 2013 00:32:53 +0000
To: RECIEVERS_NAME <NEWLY-CREATED-GMAIL-ACCOUNT@gmail.com>
Subject: EMAIL-SUBJECT
X-PHP-Originating-Script: 87486:NAME-OF-THE-SCRIPT-THE-E-MAIL-WAS-SENT-FROM.php
Reply-To: COMPANY NAME <XXX111@DOMAIN-NAME.dk>
From: Besked fra COMPANY NAME <XXX111@DOMAIN-NAME.dk>
MIME-Version: 1.0
Sender: Besked fra COMPANY NAME <XXX111@DOMAIN-NAME.dk>
Content-type: text/plain; charset="utf-8"; 
X-Mailer: PHP5.3.21 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T15:05:59.343

1）通常一个电子邮件地址不会轻易进入黑名单，需要时间和/或很多人将您标记为垃圾邮件发送者才能将该地址实际加入黑名单。

2) 是的。整个域名可以被列入黑名单，因为垃圾邮件发送者通常会生成随机电子邮件地址，例如 f4j3ifl@something.com。

3）不管去垃圾邮件箱多少次，基本上，现在的垃圾邮件过滤器都很强大，因为垃圾邮件发送者每天都在尝试改进他们的方式，所以过滤器每天都变得更加严格。如果它第一次进入垃圾邮件文件夹，而用户实际上并没有把它放入垃圾邮件箱，它会继续下去，除非用户取消标记它，或者你解决了问题。

如何避免垃圾邮件？

基本上，您需要一些签名，并且需要大量访问您的 DNS 记录，因为我们将在其中进行大部分设置。

*   **反向 DNS 查找**：在专用服务器甚至某些 VPS 上，您可以设置反向 dns 记录，有时您只需打开一张票，IT 就会为您设置。如果您不能拥有它，请更改您的主机或继续被标记为垃圾邮件发送者 xD。这是为了防止伪造标题，因为您可以在标题上设置您的电子邮件来自 gmail.com，但这不是电子邮件服务器检查它的方式。

*   **SPF 也是必须的**，如果你不能设置 SPF，那就不要再尝试了，考虑改变你的主机，你几乎可以在这里停止阅读 xD。

*   **DKIM/域密钥**：最好是 DKIM，是一个加密签名，你在 DNS 上设置公钥，并在你的电子邮件服务器中存储一个私钥，当服务器收到一封电子邮件时，它在标题中附加了私钥（你需要一个管理 DKIM 的邮件服务器软件，例如 Windows，它适用于我*hmailserver*）并且邮件服务（例如 gmail）将检查您的 dns 记录以查看公钥是否匹配。**这几乎也是必须的**

* * *

这三个是基础，如果你设置了 DMARC 和 ADSP，它会让你在 SpamAssassins 中获得更好的分数。为了获得更好的分数搜索谷歌上的一些垃圾邮件关键字列表并尽量避免它们，有些东西比如用“Dear xxx”开头的电子邮件对你的分数有害，设置取消订阅系统（即使它很糟糕，只要当您提供清晰的链接时）也会对您有所帮助。

还：

*   避免在（任何）背景上使用草率的 html 和白色文本，一些垃圾邮件发送者使用它来适应隐藏文本，这些过滤器比您想象的要聪明。

*   阅读具体建议。大多数电子邮件服务在其网站上都有常见问题解答或其他内容，其中包含一些提示，可帮助您发送电子邮件而不是进入垃圾邮件。在其中一些上，您甚至可以申请进入白名单（至少在几年前，在 gmail 之类的某些服务上，他们不再这样做了）

*   如果您是批量发送，请注意时间！如果您每秒有 X 封电子邮件发送到某个地方，您可能会进入黑名单，设置脚本或其他东西以获得 1 秒左右的延迟，延迟可能取决于目的地是否进入黑名单。

* * *

希望这些提示对您有所帮助，我最近不得不处理一些垃圾邮件过滤器，这让我很头疼，这就是为什么我知道所有这些信息，这就是我所有的研究 xD 即使在我设置了所有签名和东西之后，一些电子邮件仍然进入垃圾邮件箱（比例较小，但它仍然伤害了我）唯一可靠的方法是让用户将您添加到联系人列表中（同时拥有正确的签名和标题），所以如果可能的话提醒他们这样做.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T18:54:28.060

需要记住的一件事是，我遇到了 Gmail 和 Yahoo! 阻止电子邮件的问题！来自 php 的邮件，因为 Return-Path 标头与 from 不匹配。在许多服务器上，如果您在标头中明确设置 Return-Path，PHP Mail 将忽略它并将返回路径设置为机器名称。您必须使用“-f”标志在邮件功能的“附加参数”部分强制它。现在我从来没有使用过 Swift Mailer，所以我不知道 PHP 的本机 mail() 函数的等价物，但这是使用 mail() 的样子；

```
mail($to,$subject,$message,$headers,'-f returnpath@example.com') 
```

如果您可以在 swift mailer 中找到与此等效的内容，它可能会解决您的问题。

# 编辑：

看起来您实际上根本没有设置 Return-Path。我知道 GMail 真的不喜欢被排除在外。尝试将其显式设置为您的 Swift_Mailer 消息（并确保它与您的 From 匹配）：

```
$message->setReturnPath('from@example.com'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T09:30:08.000

**解决方案：**使用[Mailgun](https://www.mailgun.com/)（未测试）或[Sendgrid](https://sendgrid.com/)（已测试并且效果很好！）。两者之间存在价格差异，但简而言之：如果您很小，Mailgun 就很好；如果你很大，Sendgrid 很好。

要么， - 或使用[MailChimps API](https://developer.mailchimp.com/)或其他东西发送邮件。它无法在共享主机上修复（很可能）。原因如下。

* * *

**说明：**我后来更多地了解了共享主机的工作原理。假设几个不同的站点位于同一台服务器上（例如`domain-1.org`、`domain-2.org`和`domain-3.org`）。这意味着，如果`domain-3.org`发送一堆垃圾邮件，Gmail（和其他垃圾邮件过滤器）就会将该 IP 地址标记为垃圾邮件。因此，如果`domain-2.org`随后发送内容，那么（可能）将来自某个 IP 地址，因此最终成为垃圾邮件。共享主机实际上对此无能为力（并且不在乎，因为很少有人遇到这个问题）。这就是它如此便宜的原因。

Sendgrid 和 Mailguns IP 地址被所有垃圾邮件过滤器标记为“正常”，这就是您为它们付费的服务。他们通过监视您发送的多少电子邮件被标记为“垃圾邮件”来保持这种状态。如果它是 5%-10% 或低得离谱的东西，那么 Sendgrid/Mailgun 会阻止你的帐户，直到你修复它（经历一个漫长的过程，你必须联系他们的客户服务并做 1.000 冰雹玛丽和各种奇怪的东西）。

我听说如果你拥有自己的服务器（价格更高），并设置自己的邮件服务器，那么你必须非常小心，不要被标记为垃圾邮件。因为垃圾邮件过滤器现在真的很难......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T02:53:19.927

确保您用作 FROM 的电子邮件地址实际上是一个电子邮件地址。通过从主机（one.com 为您）进入我的帐户管理并添加我希望电子邮件来自的帐户，我已经解决了同样的问题。我添加了一个名为“mailer”的帐户，并通过面板设置了一个自动回复器，上面写着“对不起。这个电子邮件地址是为服务器功能保留的”。

然后在 from 标头中使用 (mailer@yourdomain.com)

拥有那个实际的电子邮件地址和自动回复器就可以了。我认为gmail足够聪明，可以知道以前从未使用过的电子邮件地址是垃圾邮件。此外，电子邮件地址必须来自脚本所在的域，这样当它说它来自那里时，它就不会撒谎。

这是我想从共享主机 (justhost.com) 发送电子邮件时使用的代码，它不会发送到垃圾邮件（这是使用来自网络表单的发布数据）：

```
<?php

// Contact subject

$subject = $_POST["subject"];

// Details

$message=$_POST["detail"];

// Email of sender

$mail_from=$_POST["customer_mail"]; 

//Name of sender

$name=$_POST["name"];
putenv("TZ=America/Phoenix");
$now = date("F j, Y, g:i a T");

$header="Reply-To: $name <$mail_from>";

$header .= "From: MyDomainName.com <mailer@mydomainname.com>";
$header .= "\r\n";
$header .= "Reply-To: $name <$mail_from>"; 
$introMSG= "Message From:".$name." <".$mail_from.">"."\r\n"
."Sent On:".$now."\r\n"."From a web form on MyDomaiNname.com"."\r\n"."-----------
-----------------------"."\r\n"."\r\n";

$to ='me@mydomainname.com'; // Domain Owners Email Address

$send_contact=mail($to,$subject,$introMSG.$message,$header);

$send_copy=mail($mail_from,"Copy Of:".$subject,$introMSG.$message,$header);

// Check if message sent

if($send_contact){

echo "<strong>Thanks! Your message has been sent to me.</strong>";

}

else {

echo "<strong>There was an error sending your message </strong>"; 

}

if($send_copy){
echo "<strong><br>A copy of this message was sent to your email.<br>If you do not
receive a copy please check your spam folder</strong>";

}

else{
echo "<strong> There was an error sending a copy of this message to your email
</strong>"; 

}

$send_reminder=mail("5555555555@txt.att.net","","You Have a new contact message from
".$name.", remember to check your spam folder.",$header);

if($send_reminder){

echo ".";

}

else {

echo "<br><strong>TXT Error</strong>";

}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T06:09:28.267

至少有两个“垃圾邮件”看起来从您的电子邮件标题中跳出来：

```
Message-Id: <51450f37.6a0b700a.6239.5dbcSMTPIN_ADDED_MISSING@mx.google.com> 
```

注意到**SMTPIN_ADDED_MISSING**部分了吗？您的行为不像一个正确的邮件程序并生成一个唯一的 Message-ID。您可能会发现阅读 RFC 5322 具有指导意义。

```
Received: from localhost.localdomain (srv18.one.com [193.202.110.18])
by mail-out2.b-one.net (Postfix) with ESMTP id F3D0B10365
for <NEWLY-CREATED-GMAIL-ACCOUNT@gmail.com>; Sun, 17 Mar 2013 01:32:53 +0100 (CET) 
```

最初收到的标头具有非法的 HELO 主机名 (localhost.localdomain)。您的邮件应用程序*应该*为您提供一种将其设置为有效值的方法。它甚至可能像配置运行 PHP 的机器的主机名一样简单。请参阅 RFC 1035（主机名有效性）、RFC 2821 (SMTP) 和 RFC 5321 (SMTP)。

# javascript - 如何在页面加载时做到这一点我可以滚动页面，而不是嵌入的 PDF 对象

> ID：15274158
> 
> 赞同：1
> 
> 时间：2013-03-07T14:46:16.807
> 
> 标签：javascript, html

我在我的页面上嵌入了一个 PDF 对象。现在，当我加载页面并使用鼠标滚轮滚动时，它会在 PDF 中上下滚动，而不是实际页面。我必须先点击页面上的一些空白，然后才能滚动。

我是否需要创建一些其他可以将焦点设置在页面加载上的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:49:09.437

为您的页面主体提供一个 id/name 标记并将焦点设置为该标记，或者如果您在 iframe 中加载 pdf，只需将焦点设置为 iframe 中的父级

# android - 将图像从文件转换为 ByteBuffer。

> ID：15274160
> 
> 赞同：2
> 
> 时间：2013-03-07T14:46:24.813
> 
> 标签：android

我需要将文件中包含的图像转换为`ByteBuffer`.

```
final File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath(), "wakaicon.png");

try {
    FileInputStream fileInputStream = null;
    try {               
        fileInputStream = new FileInputStream(file);
    } catch(FileNotFoundException e) {              
        Log.e("DEBUG", "[Picture Not Found]");
    }
} /* Exception handling */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:59:03.927

我找到了解决方案：文件->位图->字节数组

```
Bitmap bitmap = BitmapFactory.decodeFile(file.getPath());
byte[] pixels = new byte[bitmap.getWidth() * bitmap.getHeight()]; 
for (int i = 0; i < bitmap.getWidth(); ++i) { 
for (int j = 0; j < bitmap.getHeight(); ++j) 
pixels[i + j] = (byte) ((bitmap.getPixel(i, j) & 0x80) >> 7); } 
} 
```

# android - ACTION_SEND Intent 带有导致其他应用程序崩溃的自定义附加内容

> ID：15274163
> 
> 赞同：1
> 
> 时间：2013-03-07T14:46:33.693
> 
> 标签：android, android-intent

我正在实施一个从我的应用程序共享内容的选项。当用户按下共享按钮时，将执行以下代码。

```
public static void openShareIntent(Context context, String text, Wish wish)
{
    Intent share = new Intent(Intent.ACTION_SEND);
    share.setType("text/plain");       
    share.putExtra(Intent.EXTRA_TEXT, text);
    share.putExtra("share_wish", wish);

    startIntent(context, share);
} 
```

我正在为我的 Intent 设置一个特殊的额外功能，即对象`wish`女巫实现了`Parcelable`接口。

这个对象包含一些额外的信息。如果用户从可用应用程序中选择我的应用程序（实际共享内容的当前应用程序）进行共享，我想使用此信息`text/plain`。

`Parcable`但问题是，当我包含我的对象时，所有其他流行的应用程序（Facebook、Twitter 等）和内置应用程序（消息传递）都会崩溃。崩溃的不是我的应用程序，其他应用程序正在抛出`quit unexpectedly`错误。

当我`SharingActivity`使用此 Activity 不知道的一些额外名称调用 my 时，它不会崩溃。它只是忽略了那个额外的。

[Wish对象源代码](https://gist.github.com/pzagor2/5108651)

我做错了什么还是什么？这是不可能的，因为其他应用程序不知道我的`Wish`对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:10:55.503

> 但问题是，当我包含 Parcable 对象时，所有其他流行的应用程序（Facebook、Twitter 等）和内置应用程序（消息传递）都会崩溃。

永远不要将自定义`Parcelable`对象传递给缺少您的`Parcelable`类定义的应用程序。

> 这是不可能的，因为其他应用程序不知道我的 Wish 对象吗？

正确的。

相反，传递一个*标识符*（字符串，`int`等等），它`SharingActivity`可以用来`Wish`从你的中心数据模型中找到你的。

或者，不用创建自定义，而是`Wish`使用 a`Bundle`来表示“愿望”，就像`Bundle`所有应用程序中的通用类定义一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T06:41:24.823

您可以将您的数据打包并发送出去。例如：

```
Bundle b = new Bundle();
b.putParcelable("object_key", yourObject);
shareIntent.putExtra("bundle_key", b); 
```

# java - 在该类的方法体内实例化一个泛型类

> ID：15274165
> 
> 赞同：1
> 
> 时间：2013-03-07T14:46:35.460
> 
> 标签：java, list, generics

我正在尝试在该类的方法中实例化一个泛型类，但出现编译时错误。希望有人可以在这里提供一些见解：

```
//returns a new ILo<T> with all items in this list that satisfy
//the given predicate
public ILo<T> filter(ISelect<T> pred);

// Represents a nonempty list of items of type T
class ConsLo<T> implements ILo<T>{
    T first;
    ILo<T> rest;

//returns a new ILo<T> with all items in this list that satisfy
//the given predicat
public ILo<T> filter(ISelect pred) {
    return new ConsLo<T>(pred.select(this.first),
             this.rest.filter(pred));
} 
```

我已经提供了方法的接口定义，然后是 ConsLo 类的定义，然后是我正在处理的方法声明。我不明白如何实例化这个类，同时保持通用性，以便使用任何类型和谓词谓词。这是编译器错误：

```
ILo.java:95: error: method select in interface ISelect<T#3> cannot be applied to given types;
return new ConsLo<T>(pred.select(this.first),
                         ^
required: T#1
found: T#2
reason: actual argument T#2 cannot be converted to T#1 by method invocation conversion
where T#1,T#2,T#3 are type-variables:
T#1 extends Object declared in method <T#1>filter(ISelect<T#1>)
T#2 extends Object declared in class ConsLo
T#3 extends Object declared in interface ISelect 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:53:44.760

您应该使用以下通用版本`ISelect`：

```
public ILo<T> filter(ISelect<T> pred) {
    return new ConsLo<T>(pred.select(this.first),
        this.rest.filter(pred));
} 
```

这种方式`pred`将是，而不是 ISelect - 这是编译器抱怨`ISelect<T>`的两种类型。`T#1``T#2`

# c# - Kendo + Web Api vs. MVC vs. Web Service 何去何从？

> ID：15274170
> 
> 赞同：1
> 
> 时间：2013-03-07T14:46:40.510
> 
> 标签：c#, jquery, asp.net-mvc, web-services, kendo-ui

我刚刚开始一个项目，我想在 C# 中使用 Kendo UI（基于 jquery）。几周前，我成功地使用 Web 服务 (asmx) 处理请求，对结果和性能感到满意，并且能够快速创建表单。

由于这是一个新项目，我想我可以研究不同的概念，例如 MVC 和 WebApi。我发现 MVC 是最复杂的，所以我选择了 WebApi 并开始使用控制器和请求。到目前为止，我发现（不要评判我，我对这些新概念不熟悉）是 Web 服务似乎更简单、更灵活。

所以我想我正在寻找的是......使用 MVC 与 WebApi 甚至与 Web 服务的主要优势是什么。Web 服务有什么缺点吗？让我的数据层由实体框架控制、所有模型定义以及我的请求由 Web 服务处理是不是一种不好的做法？

欢迎任何澄清。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:05:02.440

在更广泛的意义上，Web API 是用来创建 Web 服务的！它使用 HTTP 作为创建服务的标准（而不是像 asmx 中的 SOAP），因为它更开放，任何类型的客户端（如移动应用程序、桌面应用程序、Web 应用程序等）都可以理解 HTTP 协议。另一个优点是您可以轻松地使用 JavaScript/jQuery 与您的 Web API 进行通信。使用 SOAP Web 服务，简直就是一场噩梦！

Kendo UI 和 Web API 是一个很好的组合。我们最近使用这种组合创建了一个移动 iPad 应用程序，它就像一个魅力。我们还使用带有 oracle 的实体框架作为后端数据库，它从未出现任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:50:50.093

如果您有需要，Web 服务很好。需要在不止一种不同类型的应用程序（例如 Web、移动应用程序和桌面应用程序）中需要该逻辑/数据。（或者如果您想出售您提供的服务）

仅将 Web 服务用于您不会扩展到其他事物的网站是完全矫枉过正的。

此外，MVC 框架和 Web Api 框架非常相似，只是 Web api 专门用于 Web 服务。两者中的编码将是白面包和小麦面包之间的区别。

# drupal-7 - 数学drupal模块

> ID：15274171
> 
> 赞同：0
> 
> 时间：2013-03-07T14:46:41.590
> 
> 标签：drupal-7, drupal-modules

我正在尝试学习编写drupal模块并正在编写一个简单的数学模块[http://nodeone.se/en/the-math-question-module](http://nodeone.se/en/the-math-question-module)

我的 GUI 很好，但实际数学似乎有问题。我似乎从来没有得到正确的答案，因为我认为它会在检查当前答案之前加载一组新问题。

这是我到目前为止所拥有的：

```
 <?php

/**
 * @file
 * Tests users on their math skills through a series of question and answers
 */

/**
 * Implements hook_menu().
 */
function math_question_menu() {
  // add new navigation menu item
  $items['math_question'] = array(
    'title' =>  'Math questions',
    'description' => 'Test you math skills with these questions.',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('math_question_page'),
    'access callback' => 'user_access',
    'access arguments' => array('administer_site_configuration'),
  );
  return $items; 
}
  $val1 = rand(1,10);
  $val2 = rand(1,10);
  variable_set('val1', $val1);
  variable_set('val2', $val2);
/**
 * Builds the form for configuring Math Questions.
 */
function math_question_page() {
  global $user;
  $num1 = variable_get('val1');
  $num2 = variable_get('val2');
  $total = $num1 + $num2;
  variable_set('total',$total);
  $form['math_question'] = array(
    '#type' => 'item',
    '#markup' => 'What is ' . $num1 . ' + ' . $num2 . ', ' . 
      check_plain($user->name) . '?',
    );
  $form['answer'] = array(
    '#type' => 'textfield',
    '#title' => t('Answer'),
    );
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Check my answer'),
    );
  return $form;
}

function math_question_page_validate($form, $form_state) {
  if (empty($form['answer']['#value'])) {
     form_error($form['answer'], t('This field is required.'));
   }
   if ($form['answer']['#value'] == 
      variable_get('total')) {
    $msg = t('Good job!');
    $type = 'status';
  } 
  else {
    $msg = t('Try again...');
    $type = 'error';
  }
  drupal_set_message(check_plain($msg), $type);
} 
```

* * *

修改代码：。.

```
 /**
     * Builds the form for configuring Math Questions.
     */
   function math_question_page() {
      global $user;
        $val1 = rand(1,10);
        $val2 = rand(1,10);
       $total = $val1 + $val2;
      $form['math_question'] = array(
        '#type' => 'item',
        '#markup' => 'What is ' . $val1 . ' + ' . $val2 . ', ' . 
          check_plain($user->name) . '?',
        );
      $form['answer'] = array(
        '#type' => 'textfield',
        '#title' => t('Answer'),
        );
      $form['total'] = array(
        '#type' => 'hidden',
        '#value' => $total,
        );
      $form['submit'] = array(
        '#type' => 'submit',
        '#value' => t('Check my answer'),
        );
      return $form;
    }

    function math_question_page_validate($form, $form_state) {
      if (empty($form['answer']['#value'])) {
         form_error($form['answer'], t('This field is required.'));
       }
       if ($form['answer']['#value'] == 
          $form['total']['#value']) {
        $msg = t('Good job!');
        $type = 'status';
      } 
      else {
       $msg = t('Try again...');
       $type = 'error';
      }
      drupal_set_message(check_plain($msg), $type);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:50:23.503

表单提交后 Drupal 重定向，因此您的表单字段（连同您的表单）在调用验证之前重新创建。请参阅[另一个问题](https://drupal.stackexchange.com/a/22893/14480)中的详细信息。

您的表单是使用 math_question_page 创建的，它不接受任何 form_state 参数。如果你有 form_state，那么你可以检测到 math_question_page 还没有提交，并且只保留最后一次调用的状态（最后一个随机值）。

为了使用 form_state 参数调用 math_question_page，您可以在菜单中使用[drupal_build_form](http://api.drupal.org/api/drupal/includes!form.inc/function/drupal_build_form/7)而不是 drupal_get_form。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:31:53.703

在验证函数`math_question_page_validate()`中，您应该从 $form_state 变量而不是 $form 访问值。

例如：

```
if (!$form_state['values']['answer'] == $form_state['values']['total']) {
    form_set_error('answer', $error);
} 
```

~~您还可以将答案存储在 $form_state 变量中以将其传递给验证函数（无需将值存储在 $form 中）。如果将其存储为 $form_state['total']，则可以以相同的方式访问它（如下所示）。~~

~~if (!$form_state['total'] == $form_state['values']['answer']) {form_set_error('answer', $error);}~~

非常感谢[papirrin](https://stackoverflow.com/users/1277693/papirrin)教授[这个](https://stackoverflow.com/a/15308905/1767085)。

我建议使用 variable_get() 来保证正确答案的安全。您保留在表单中的随机值将无法在表单重新生成后继续存在。

我的工作代码在这里。

```
/**
* Builds the form for configuring Math Questions.
*/
function math_question_page($form, &$form_state) {
  global $user;
    $val1 = rand(1,10);
    $val2 = rand(1,10);
    $total = $val1 + $val2;
    // Store the correct answer safely away from this form
  if (!variable_get('math_question_answer',FALSE)) {
    variable_set('math_question_answer', $total);
  }
  $form['math_question'] = array(
    '#type' => 'item',
    '#markup' => 'What is ' . $val1 . ' + ' . $val2 . ', ' . 
      check_plain($user->name) . '?',
    );
  $form['answer'] = array(
    '#type' => 'textfield',
    '#title' => t('Answer'),
    );
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Check my answer'),
    );
  $form_state['redirect'] = FALSE;
  return $form;
}

function math_question_page_submit($form, &$form_state) {
  if (empty($form['answer']['#value'])) {
     form_set_error('answer', t('This field is required.'));
  } 
  else {
    if ($form_state['values']['answer'] == variable_get('math_question_answer')) {
      $msg = t('Good job!');
      $type = 'status';
    } 
    else {
      $msg = t('Try again...');
      $type = 'error';
    }
    drupal_set_message(check_plain($msg), $type);
  }
  variable_del('math_question_answer');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T08:26:32.550

我也在学习编写 drupal 模块（两周前开始教程系列）。我试图做同样的模块，我认为在数据库中保存随机值的实现是不正确的。练习中问的第一件事是：

> 1.  任何访问 /question 路径的用户都会得到一个简单的加两个数字的问题，例如“什么是 4 + 9？”。
> 
> 因此页面的访问参数应该是“访问参数”=> 数组（“访问内容”）而不是“访问参数”=> 数组（“administer_site_configuration”）。

这会带来以下问题：如果有 2 个（或更多）用户同时浏览此页面，最新用户将覆盖数据库中的值，因此其他用户将无法完成“问题”，因为他的答案将不等于数据库中的答案。在这种情况下，将值保存到数据库不是一种选择......

同时我试图让它在没有数据库的情况下工作，但我的情况与这个问题的起始者相同，当我提交表单时，表单会覆盖值（因此，由于答案错误而引发错误）。

如果我能完成它，我会在此处发布代码，或者如果其他人在没有 variable_set() 和 variable_get() 的情况下设法完成它，我请他们在此处发布代码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:52:06.937

不要将 $total 存储在全局变量“total”中，而是尝试将其存储为表单上的隐藏字段（除非您担心用户作弊）。你可以写：

'#type' => '隐藏，

创建一个隐藏的“总计”字段，然后在验证中检查该值，以防止总计被覆盖。

# c# - 我如何解决失败的 ajax 返回

> ID：15274182
> 
> 赞同：1
> 
> 时间：2013-03-07T14:47:18.783
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-3, linq

我有一些 JavaScript 调用函数来重新填充下拉列表。有 2 个调用填充 2 个不同的下拉列表。两者在本地开发中都可以正常工作。在服务器上只有一个工作。一个错误出来。我远程调试并且调用到达函数并且函数返回正确的结果。在它离开发生错误的功能之后。应用程序是asp.net mvc 3 服务器是windows server 2008 iis7。

我怎样才能缩小导致问题的原因。

```
<script type="text/javascript">

function getSects(abbr) {
    $.ajax({
        url: "@Url.Action("SectionSwitch", "Assets")",
        data: { abbreviation: abbr },
        dataType: "json",
        type: "POST",
        error: function () {
            alert("An error occurred.");
        },
        success: function (data) {
            // var test = JSON.parse(data);
            //alert(test);
            var items = "";
            $.each(data, function (i, item) {
                items += "<option value=\"" + item.sectionNum + "\">" +      item.sectionname + "</option>";

            });

            $("#Asset_Section_SectionKey").html(items);
        }
    });
}

function getDivs(abbr) {
    $.ajax({
        url: "@Url.Action("DivisionSwitch", "Assets")",
        data: {abbreviation: abbr},
        dataType: "json",
        type: "POST",
        error: function() {
            alert("An error occurred.");
        },
        success: function (data2) {
           // var test = JSON.parse(data);
            //alert(test);
            var items = "";
            $.each(data2, function(i, item) {
                items += "<option value=\"" + item.DivisionKey + "\">" + item.DivisionDescription + "</option>";

            });

            $("#Asset_Section_Division_DivisionKey").html(items);
        }
    });
}

$(document).ready(function(){
    $("#Asset_Section_Division_Department_DepartmentKey").change(function () {
        var abbr = $("#Asset_Section_Division_Department_DepartmentKey").val();

        getDivs(abbr);
    });

    $("#Asset_Section_Division_DivisionKey").change(function () {
        var abbr = $("#Asset_Section_Division_DivisionKey").val();

        getSects(abbr);
    });
});
</script> 
```

它的函数 getDivs 抛出错误。以下是功能：

```
 public ActionResult DivisionSwitch(int abbreviation)
    {

        var newdivision = from f in db.Divisions
                          where f.DepartmentKey == abbreviation
                          select f;

        return Json(newdivision);

    }

    public ActionResult SectionSwitch(int abbreviation)
    {

        var newsection = (from t in db.Sections
                          where t.DivisionKey == abbreviation
                          select new sectionInfo { sectionNum = t.SectionKey, sectionname = t.SectionDesciption });

        return Json(newsection);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:50:35.170

设置一个[错误处理程序](http://api.jquery.com/ajaxError/)，看看它要说什么

```
$( document ).ajaxError(function(event, jqxhr, settings, exception) {
    console.log(jqxhr);
    console.log(exception);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:51:06.170

更改 ajax 方法上的错误属性以采用 3 个参数`(jqXHR, textStatus, errorThrown)`并警告`errorThrown`and `textStatus`：

```
error: function (jqXHR, textStatus, errorThrown) {
        alert("Error, status: " + textStatus + " error: " + errorThrown);
    }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:51:39.357

您的 $.ajax 的错误部分可以接受三个类型的参数 `jqXHR`, `textStatus`, `errorThrown`。

第一个参数是 jqXHR 类型的对象，另外两个是字符串。您可以使用`jqXHR.responseText`来查看错误。

```
$.ajax({ // Some settings
    error: function(jqXHR, textStatus, errorThrown) {
        alert(jqXHR.responseText);
        // or
        console.log(jqXHR);
    } 
```

根据 jQuery 网站，他们的示例建议如下：

```
$.ajax({ // your settings

}).done(function(data, textStatus, jqXHR) { 
    // Handle success 
}).fail(function(jqXHR, textStatus, errorThrown) {
    // Handle error here
}); 
```

有关更多信息，请查看[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/#jqXHR)并阅读折旧部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:02:46.950

感谢所有帮助，但我决定重写返回的内容，类似于工作调用返回的内容。显然，服务器对返回的内容有问题。

```
public ActionResult DivisionSwitch(int abbreviation)
{

    var newdivision = from f in db.Divisions
                      where f.DepartmentKey == abbreviation
                      select f;

    return Json(newdivision);

}

public ActionResult SectionSwitch(int abbreviation)
{

    var newsection = (from t in db.Sections
                      where t.DivisionKey == abbreviation
                      select new sectionInfo { sectionNum = t.SectionKey, sectionname = t.SectionDesciption });

    return Json(newsection);

} 
```

我现在已将代码更改为：

```
public ActionResult DivisionSwitch(int abbreviation)
    {

        var newdivision = (from f in db.Divisions
                          where f.DepartmentKey == abbreviation
                           select new DivisionInfo { DivisionNum = f.DivisionKey, Divisionname = f.DivisionDescription });

        return Json(newdivision);
} 
```

我刚刚创建了一个新类来存储结果并将其缩小到所需的两个字段。

```
 public class DivisionInfo
{
    public int DivisionNum { get; set; }
    public string Divisionname { get; set; }
} 
```

# css - 如何从子元素中删除父元素的旋转？

> ID：15274184
> 
> 赞同：0
> 
> 时间：2013-03-07T14:47:29.253
> 
> 标签：css, css-transforms

我有一个旋转子元素的父元素。当我单击一个按钮时，我希望子元素动画到它所在的位置，如果没有对父元素应用旋转但父元素应该保持旋转。

如果您只是减去父级对子级的旋转，则它仅适用于 rotateZ

```
.parent { -webkit-transform:rotateX(45deg); }
.child { -webkit-transform:rotateX(-45deg); } 
```

![在此处输入图像描述](../Images/871a93e93fa772c8c0c5fdd278425f14.png)

[小提琴](http://jsfiddle.net/yzw68/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:07:55.200

将孩子旋转 180 度减去父母的旋转对我有用：http: [//jsfiddle.net/e9raN/](http://jsfiddle.net/e9raN/)

```
#parent {
    -webkit-transform: rotateX(30deg) rotateY(30deg);
}

#child {
    -webkit-transform: rotateX(150deg) rotateY(150deg);
} 
```

我不知道为什么否定不起作用，但这似乎是唯一的解决方案。

# c++ - 自定义迭代器

> ID：15274190
> 
> 赞同：1
> 
> 时间：2013-03-07T14:47:54.880
> 
> 标签：c++, iterator

我正在使用数据结构制作一个库：`std::vector<std::string>`. 我必须满足 API，它表示为了遍历我的数据结构，用户必须执行以下操作：

```
for (lib::result::const_iterator it = data.begin(); it != data.end(); it++) 
```

有两种方法可以做到这一点，`lib::result::const_iterator`我自己实现或继承自`std::vector<std::string>::iterator`，它们都应该工作。我读过从向量迭代器继承是一个坏主意。

我决定使用 Boost 迭代器外观，这是个好主意吗？另外，我在实施 `increment()`. 如果我有一个指向 std::vector 中的字符串的指针，我如何指向下一个字符串？

最后，我的实现可能会从`std::vector<std::string>`, 变为`std::vector<MyDatatype>`，所以我想使用 boost 外观，所以如果我决定对我的数据结构进行更改，事情会更容易。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:09:15.257

您可以只使用向量迭代器：

```
class MyClass
{
     typedef std::vector<std::string>  MyData;

     MyData    data;

     public:
         typedef  MyData::iterator       iterator;
         typedef  MyData::const_iterator const_iterator;

         iterator       begin()       {return data.begin();}
         const_iterator begin() const {return data.begin();}

         .... etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:09:14.210

```
namespace lib {
  struct class {
    typedef std::vector<std::string>::const_iterator const_iterator;
    const_iterator begin() const;
    const_iterator end() const;
  };
}; 
```

如果更改底层类型，假设迭代器与`std::vector<std::string>`迭代器兼容，只需更改 typedef。如果它与迭代器不兼容`std::vector<std::string>`，那么您正在破坏您的 API。但是，这确实是另一天的问题。

如果你确实需要实现一个迭代器，boost 的“迭代器适配器”是一个不错的选择：`std::vector<std::string>`用你的迭代器包装。

如果我必须在库版本更改时生成稳定的二进制接口，我可能会使用“迭代器 fascade”。在这种情况下，我的“迭代器外观”将转发到实现外观的每个功能的`pImpl`-type`virtual`接口（它重复“迭代器外观”从其实现中需要的方法）。然后，内部`pImpl`实现将以`std::vector<std::string>`类似于“迭代器适配器”的工作方式将方法转发给 。但在几乎所有情况下，这都是矫枉过正。

但是第一种情况——你 typedef的地方`std::vector<std::string>::const_iterator`——是最有效和最容易实现的。

# c++ - 在 Qt 的信号/槽机制中返回一个无符号字符

> ID：15274192
> 
> 赞同：0
> 
> 时间：2013-03-07T14:48:00.063
> 
> 标签：c++, multithreading, qt, signals-slots

我在 Qt 中使用 QThreads，并且我在工作线程中创建了一个信号，以便它可以返回一个`unsigned char buf[10]`要在`gui thread`. 这是我的信号。

```
unsigned char Worker::newinfo(unsigned char buf[10])
{
    return buf;
} 
```

这里有什么问题？

在接收到 buf 的函数中，我发出信号，以便可以在 gui 插槽中捕获它：

```
emit newinfo(buf);

connect(worker, SIGNAL(newinfo(unsigned char[])), this, SLOT(process_new_info(unsigned char[]))); 
```

它告诉我有多重防御`newinfo()`。

这是我的工人阶级：

```
class Worker : public QObject
{
    Q_OBJECT

public:
    Worker(FILE *datafile, int sockint, int bitsint);
    ~Worker();

    FILE *data;
    int sock;
    int bits;

public slots:
    void doWork();

signals:
    void finished();
    unsigned char newinfo(unsigned char buf[10]);

private:

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:54:32.123

这根本没有意义。如果您更改为`std::vector<unsigned char>`或，您的问题就会消失`QByteArray`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:08:09.263

`moc_gui.cpp:110: multiple definition of Worker::newinfo(unsigned char*)' gui.cpp:64: first defined here`

信号不是由程序员明确定义的，而是由 moc 定义的。当你定义信号或槽时，它们必须是无效的。

似乎您想要做的事情可以通过[QtConcurrent::run()](http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html)（用于异步执行）和[QFutureWatcher](http://qt-project.org/doc/qt-4.8/qfuturewatcher.html)（用于异步访问结果）的组合来实现。查一下，有很多帖子。

编辑：首先`return buf[10];`在上面的代码中返回 buf 的第 11 个元素，这没有意义，因为你说你有`10`元素。其次，假设其他一切都是正确的，在信号中传输指针是缺陷的来源。两个线程可能同时访问相同的数据，或者 GUI 可能会尝试访问无效的数据缓冲区。而且`ypnos`，您可以通过传递可以在线程之间安全传输的对象来避免此特定问题。

# java - 带有 Java 5 的 Websphere 上的 Jersey REST 服务

> ID：15274193
> 
> 赞同：1
> 
> 时间：2013-03-07T14:48:03.693
> 
> 标签：java, maven, jersey, websphere, java-5

我已经阅读了这个问题，但它并没有真正帮助我[使用 java 5 解决我的问题 Jersey](https://stackoverflow.com/questions/6350008/jersey-with-java-5)。

当我在 Glassfish 上使用具有以下依赖项的应用程序时，一切正常：

```
<dependency>
     <groupId>com.sun.jersey</groupId>
     <artifactId>jersey-server</artifactId>
     <version>1.12</version>
</dependency>
<dependency> 
    <groupId>com.sun.jersey</groupId> 
    <artifactId>jersey-json</artifactId> 
    <version>1.12</version> 
</dependency> 
```

尝试在 WAS 6.1 上部署它时，我收到一个错误，即 Jersey 的 ServletContainer 类不在类路径中，因此我添加了以下依赖项：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-servlet</artifactId>
    <version>1.12</version>
</dependency> 
```

现在应用程序启动但我得到以下错误。问题是我的 Websphere 上有 Java 5，但 Jersey 的 ServletContainer 类是用 Java 6 编译的。

```
java.lang.UnsupportedClassVersionError 
(com/sun/jersey/spi/container/servlet/ServletContainer) 
bad major version at offset=6 
```

我找不到 jersey-servlet 的任何依赖关系，它将用 Java 5 编译。任何人都知道我应该怎么做才能让这个服务在 Java 5 的 WAS 上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:18:28.397

我相信[Jersey 1.2](https://blogs.oracle.com/sandoz/entry/jersey_1_2_is_released)是针对 Java 5 编译的最后一个版本。如果这对您来说是一个交易破坏者，您可能需要考虑另一种解决方案。

# linux-kernel - 使用读或写锁关闭 rw_semaphore

> ID：15274198
> 
> 赞同：2
> 
> 时间：2013-03-07T14:48:07.877
> 
> 标签：linux-kernel, synchronization, semaphore

我的代码有一个`rw_sempaphore`可以通过一次调用我的函数来解锁`unlock()`。但是，当我的代码被调用时，它不知道它当前是否具有读锁或写锁。所以它不知道它是否应该调用`up_write()`or `up_read()`。

我可以一个接一个地打电话而没有任何负面影响吗？有没有办法判断当前线程是否有读锁或写锁？

我试着打电话`downgrade_write()`，然后`up_read()`，但这似乎也不起作用。降级读锁不好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:03:00.047

> 我可以一个接一个地打电话而没有任何负面影响吗？

当然不是！想象一下：

```
thread A                    thread B:

down_write
                            down_read (blocked)
...
unlock
|\ up_write
|                           (released, acquired read lock)
| ...
 \ up_read (lock messed up) 
```

我从来没有使用过`rw_semaphore`，但如果它是一个单写多读锁，那么这就是你的解决方案。

**编辑：请注意，这要求锁是递归的。如果`rw_semaphore`事实证明它确实*不是*递归的。**

如果我们可以检测到锁是在读模式还是写模式下锁定，这个问题就很容易解决（假设您已经知道它*被*锁定在其中一种模式下，即没有解锁）。

由于锁是多读的，那么我们可以使用 read-try-lock 来了解情况：

```
if (down_read_trylock(sem))
    /* semaphore was locked in read mode */
else
    /* semaphore was locked in write mode */ 
```

在这种`if`情况下，信号量已经被锁定在读取模式，我们再次锁定它，所以它需要**两个** `up_read`s。在 else 情况下，信号量被锁定在写模式，所以我们需要一个`up_write`. 这假设`down_read_trylock`不会由于达到最大读锁数或任何其他原因而失败，除了锁被锁定在写模式下。

所以总而言之：

```
void unlock(struct rw_semaphore *sem)
{
    if (down_read_trylock(sem))
    {
        up_read(sem);
        up_read(sem);
    }
    else
        up_write(sem);
} 
```

注意：使用前请测试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:08:35.573

我最终存储了使用的进程的 PID `down_write()`。该`unlock()`函数检查 PID 是否匹配，`up_write()`如果匹配则执行。否则，它会`up_read()`。

不是最漂亮的，但它有效。

# matlab - Matlab中两个向量的直方图

> ID：15274205
> 
> 赞同：1
> 
> 时间：2013-03-07T14:48:34.237
> 
> 标签：matlab, histogram

在此先感谢您的帮助。

我有两组平行向量：

```
x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 55]; 
x_count = [7721, 6475, 3890, 2138, 1152, 784, 674, 492, 424, 365, 309, 302, 232, 250, 220, 208, 190, 162, 144, 134, 97, 93, 89, 97, 92, 85, 77, 87, 64, 75, 72, 82, 61, 48, 46, 44, 35, 20, 28, 20, 21, 10, 6, 8, 4, 4, 4, 3, 1, 1];

y = [1, 2, 3, 4, 5, 6, 7, 8, 9, 55];    
y_count = [88, 40, 24, 12, 8, 5, 1, 1, 1, 100]; 
```

其中 x, y 是类别，x_count, y_count 是每个类别的频率。x 和 y 的长度可以不相等，并且不需要包含相同的类别。

我想创建一个并排的条形图/直方图，其中 x 轴是类别，像这样并排放置：[在 matlab 中并排乘直方图](https://stackoverflow.com/questions/6471924/side-by-side-multiply-histogram-in-matlab)。频率计数沿着 y 轴。

我试过谷歌搜索，但仍然坚持这一点。如果有人可以提供帮助，那就太好了。只有当 x 和 y 具有相同的长度时，[matlab 中的并排乘直方图](https://stackoverflow.com/questions/6471924/side-by-side-multiply-histogram-in-matlab)的解决方案才有效，但我的不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:02:23.417

你可以试试这个：

```
% create unique bins
bins = unique([x y]); 

% create vectors with zeros same size as bins
xBins = zeros(size(bins));
yBins = zeros(size(bins)); 

% fill in counts in the respective spots
xBins(ismember(x, bins)) = x_count;
yBins(ismember(y, bins)) = y_count;

bar(bins, [xBins' yBins']); 
```

# .net - Azure SQL 数据库在本地运行时工作，但在发布到 Azure 时不工作

> ID：15274208
> 
> 赞同：3
> 
> 时间：2013-03-07T14:48:41.480
> 
> 标签：.net, azure, ef-code-first, asp.net-web-api, entity-framework-5

我的问题与SO上的[这个](https://stackoverflow.com/questions/12726981/azure-sql-database-working-when-ran-locally-but-not-when-published-to-azure)问题非常相似，但不完全一样。

当我在本地连接到我的天蓝色数据库时，它运行完美。但是当我部署到 Azure 时，它​​似乎无法连接到数据库。我首先使用的是 Entity Framework 5 代码，并且我还在 EF 5 参考上设置了 copy local:true。

这些是我的连接字符串：

```
 <add name="api" connectionString="
    Server=tcp:[hidden].database.windows.net,1433;Database=API;
    User ID=[hidden]@[hidden];
    Password=[hidden];Trusted_Connection=False;
    Encrypt=True;Connection Timeout=30;
    PersistSecurityInfo=True;" providerName="System.Data.SqlClient" />

    <add name="Membership" connectionString="
    Server=tcp:[hidden].database.windows.net,1433;
    Database=Membership;User ID=[hidden]@[hidden];
    Password=[hidden];Trusted_Connection=False;
    Encrypt=True;Connection Timeout=30;
    PersistSecurityInfo=True;" providerName="System.Data.SqlClient"/> 
```

我添加了

```
 <customErrors mode="Off"/> 
```

在我的 web.config 文件中，所以我可以看到堆栈跟踪，这些是我得到的异常：

```
[TargetInvocationException: Exception has been thrown by the target of an invocation.]
[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]
[ProviderIncompatibleException: An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. 
```

读取堆栈跟踪时，可以确定问题是我无法初始化成员数据库。这必须是 Azure 部署问题，但我似乎无法弄清楚..

**编辑：**

API 数据库现在正在工作，但成员资格给出了同样的错误。我将网站缩放为保留而不是共享。不知道会不会有什么影响。

**固定的：**

嗯，这很奇怪.. 突然网站与两个数据库都有连接。没有做任何其他将服务器从共享更改为保留..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:47:39.263

检查在 Windows Azure 门户上制定的 IP 规则，并确保您当前的 IP 地址在您允许访问在 Windows Azure 上运行的数据库的范围内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:22:29.780

确保您的 IP 地址在数据库允许的 IP 地址列表中。

# c# - WPF 自定义 MaskControl 问题

> ID：15274210
> 
> 赞同：0
> 
> 时间：2013-03-07T14:48:43.133
> 
> 标签：c#, wpf, controls, mask

好吧，在被困在这几天之后，我决定在这里问我的问题。我已经为 MaskControl 制作了一个从 TextBox 继承的自定义控件。现在我遇到的问题如下。

经过一些研究，我发现如果你这样做

```
MaskedTextBox Mask="999999.99" 
```

9 应该是数字并且是可选的。因此，例如我输入 555 并点击 Save，Binding 的值为 555___ ， __ 。所以我回到了互联网，但经过几个小时的搜索，我什么也没找到，所以我为什么要在这里问。

我将把我的代码附在一个 pastebin 中。提前致谢

ControlClass [MyMaskedTextBoxControl](http://pastebin.com/cqQp6Gff)

# php - 如何以兼容的方式包含 PHP 文件以使用和不使用 Phar 进行打包？

> ID：15274211
> 
> 赞同：5
> 
> 时间：2013-03-07T14:48:43.100
> 
> 标签：php, require, phar

给定一个具有以下结构的 PHP 应用程序：

```
/
    lib/
        mylib.php
    web/
        index.php // includes "mylib.php" with: require_once __DIR__ . "/../lib/mylib.php" 
```

我正在尝试使用相同的源库同时涵盖以下情况：

1.  **No Phar**：能够按原样使用应用程序，*DocumentRoot*指向*web/*并将所有请求重定向到*index.php*。
2.  **Minimal Phar**：能够生成仅包含*web/index.php*的 phar并将保存为：*web/application-minimal.phar*。
3.  **Full Phar**：能够生成包含*lib*目录和*web/index.php*内容的 phar ，并将保存为：*web/application-full.phar*。

对于 phar 文件，所有请求都将被重定向到 phar 文件本身。

是否可以在不必更改 *require_once* 的情况下实现所有这些用例？

我尝试了不同的方法（相对/绝对）来包含来自 *web/index.php" 的*lib/mylib.php*，以及尝试使用*Phar::mount()*的一些技巧。我的尝试都没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:21:35.140

只需依靠您的包含路径。

不要这样做：

```
require_once __DIR__ . "/../lib/mylib.php"; 
```

但：

```
require_once "mylib.php"; 
```

并在脚本开头设置包含路径：

```
set_include_path(__DIR__ . '/../lib/' . PATH_SEPARATOR . get_include_path()); 
```

# c# - P2P 真的是无服务器的吗？

> ID：15274213
> 
> 赞同：4
> 
> 时间：2013-03-07T14:48:52.390
> 
> 标签：c#, wcf, p2p

我在这里遵循本指南。[点对点](http://msdn.microsoft.com/en-us/library/vstudio/ms751502%28v=vs.90%29.aspx)

我认为 P2P 会带来的优势之一是它是无服务器设置。现在我已经完成了这项工作，我注意到您确实需要一个解析器来跟踪谁已连接。

对我来说，这确实需要一台服务器，因为您首先需要一个解析器才能使 P2P 工作。

阿米错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:13:38.417

我想这取决于您对服务器的定义。以 P2P 游戏为例，大多数玩家将连接到一个中心点，进行匹配，然后在他们之间进行通信，而无需服务器参与。

这意味着服务器不必托管任何数据，它只需要协调那些做的事情。它可以降低资源（因为每个客户端只需要连接一次）并且基础架构通常更健壮。

您是否需要一个中央应用程序来协调对等点？是的

该应用程序是否需要将内容/数据流式传输到每个对等方？不

# html - 构建无法提交的表单

> ID：15274214
> 
> 赞同：0
> 
> 时间：2013-03-07T14:48:55.463
> 
> 标签：html, forms

是否可以在不使用 JavaScript 的情况下构建无法提交的 HTML？

我希望能够使用`<input type="reset">`，当然，我还没有添加`<input type="submit">`，但是有人可以在我的一个控件中按 Enter 键，无论如何都会提交它。

那么，这在没有 JavaScript 的情况下可行吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:14:06.230

我想答案是否定的。

好吧，这也是一个答案，即使它不是我想要的:)

# jquery - JQuery Ajax，加载img

> ID：15274221
> 
> 赞同：1
> 
> 时间：2013-03-07T14:49:24.773
> 
> 标签：jquery

使用 jQuery 和 Ajax 加载 img

1-我尝试直接加载img，它不起作用：

```
$("#target").load("img.jpg"); 
```

2-我可以加载另一个 html 中的 img。在这里，我在 div 目标中加载 img.html 中的 img1 中的 img：

```
$(function(){
   $("#linkajax").click(function(e){
      e.preventDefault();
      $("#target").load("img.html #img1");     
   });
}) 
```

2 是使用 Ajax 和 jQuery 加载 img 的最佳方式还是有更好、更直接的方式？

（我正在使用Ajax，因为我需要加载很多img。我想先加载，然后在用户点击时快速淡入。我在这里简化案例只是为了更好地解释它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:52:20.423

你为什么这样做，只是附加一个图像。

```
$("#target").append("<img src='img.jpg' />"); 
```

另一种方式

```
$('<img/>', {
    src: 'img.jpg'
}).appendTo("#target"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:52:49.113

为什么需要ajax来引用图像文件？

```
$('#target').append('<img src="img.jpg" alt="my image"/>'); 
```

ETA：如果您想通过 ajax 检索图像路径列表，那么这样的事情将是合适的：

```
$('#linkajax').on('click ', function(){
  $.ajax({
     url: "getsrcs.php", //or some script to return a JSON array
     dataType: 'json',  
  }).done(function(data) { //where data is a JSON array like [img1.jpg, img2.jpg ...]
       $(data).each(function(){
         var img = $(' < img src = "'+this+'" / > ');
         $('#target ').append(img);//you can put your fade effect here if you like
       });
    }
  );  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:19:22.587

在我看来，您需要预加载所有图像才能更快地显示。没有必要为此使用ajax。只需创建一个 Image 对象并将所有 url 连续应用到它。这样，您的浏览器将缓存所有这些，当被询问时，只需从缓存中提供它们。

```
var img = new Image(),
    urls = ['images/image.jpg','images/image2.jpg'],
    imgIdx = 0;

img.onload = function() {
    imgIdx++;
    if (imgIdx < urls.length) img.src = urls[imgIdx];
}

img.src = urls[imgIdx]; 
```

# asp.net-mvc - ASP.NET 数据注释 - 数字或特定字符串

> ID：15274223
> 
> 赞同：1
> 
> 时间：2013-03-07T14:49:30.733
> 
> 标签：asp.net-mvc, data-annotations

我有一个我想应用的`System.ComponentModel.DataAnnotations.RangeAttribute`领域

```
[Range(0, Int32.MaxValue)] 
```

但我希望这个字段是一个字符串，因为我希望它能够拥有另一个值，那就是“无限”。是否有一些属性或属性组合我可以用来说“允许任何正整数或字符串“无限”？

谢谢，

萨钦

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:56:53.170

尝试在这个问题中使用正则表达式： [RegEx that matches positive numbers](https://stackoverflow.com/questions/4466002/regex-that-matches-positive-numbers)

希望有帮助。谢谢。

# java - Json 数组上的 Mongodb 聚合（JAVA）

> ID：15274225
> 
> 赞同：1
> 
> 时间：2013-03-07T14:49:42.217
> 
> 标签：java, mongodb, aggregation-framework

我有一个典型的 Web 应用程序，我正在尝试从 mongodb 集合中生成构面。目前这是通过使用 Java 驱动程序 (v2.10.1) 的聚合框架来完成的。除了包含子数组的文档之外，构面已正确生成，例如我有以下 json 文档：

1.  `{name: polo, fueltypes:[benzin, lpg], color: black}`
2.  `{name: golf, fueltypes:[benzin, cng], color: blue}`
3.  `{name: a4, fueltypes:[diesel], color: blue}`

返回的结果集为：

姓名：

```
{_id: polo, count: 1}
{_id: golf, count: 1}
{_id: a4, count: 1} 
```

颜色：

```
{_id: black, count: 1}
{_id: blue, count: 2} 
```

燃料类型：

```
{_id: [benzin,lpg,cng,diesel], count: 3} 
```

Fueltypes 字段的聚合结果包含所有数组字段。

然而，期望的结果应该是：

燃料类型：

```
{_id: benzin, count: 2}
{_id: lpg, count: 1}    
{_id: diesel, count: 1}    
{_id: cng, count: 1} 
```

和相应的java代码：

```
String str = "name" ; //or fueltypes, color
// create match
BasicDBObject match = new BasicDBObject();
match.put("$match", new BasicDBObject());

// build the $projection operation
DBObject fields = new BasicDBObject();

// fields.put("count", 1);
DBObject project = new BasicDBObject();

// Now the $group operation
DBObject groupFields = new BasicDBObject();

DBObject unwindFields = new BasicDBObject();
// build the $projection operation
fields.put(str, 1);
project.put("$project", fields);

// Now the $group operation
groupFields.put("_id", "$" + str);

// performing sum and storing it in the count attribute
groupFields.put("count", new BasicDBObject("$sum", 1));

DBObject group = new BasicDBObject("$group", groupFields);
AggregationOutput output = serviceCollection.aggregate(match, project, group); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:18:37.857

按数组“fueltypes”分组为您提供数组的出现次数。

要单独计算它的元素，您必须使用 $unwind 运算符，如下所示：

```
// create unwind
BasicDBObject unwind = new BasicDBObject();
unwind.put("$unwind", "$" + str); 
```

并将其包含在 $group 运算符之前。或者，仅当 str 为“fueltypes”时，您才可以调用 $unwind。

有关展开的更多信息，请参阅[http://docs.mongodb.org/manual/reference/aggregation/](http://docs.mongodb.org/manual/reference/aggregation/)

# symfony - 使用 UniversalLoader 在 Symfony 2 中添加自定义命名空间

> ID：15274237
> 
> 赞同：0
> 
> 时间：2013-03-07T14:50:28.847
> 
> 标签：symfony, namespaces

这篇文章专门讨论似乎存在的添加您自己的命名空间的简单解决方案，即在 app/autoload.php 中使用加载器的解决方案。

有很多文档都在谈论诸如 registerNamespace 或 registerPrefix 之类的魔术方法。

问题是 UniversalClassLoader 对象存在这些方法。

我下载了 Symfony 标准版 2.2，app/autoload.php 看起来更像这样（与 Symfony 标准版 2.1 几乎相同）：

```
use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';

// intl
if (!function_exists('intl_get_error_code')) {
  require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

实际上使用的加载器是作曲家加载器。如果您希望添加 'seculibs/collections' 命名空间，则可以使用的唯一方法是像这样的 'add' 方法，例如：

```
$loader->add("seculibs\\collections", __DIR__.'/../vendor/seculibs/collections/'); 
```

但这似乎不起作用：当我执行程序时，我对 /seculibs/collections/xx.php 有相同的 classNotFound

所以我像这样更改了 autoload.php ：

```
 require_once ('/../vendor/symfony/symfony/src/Symfony/Component/ClassLoader/UniversalClassLoader.php');

use Doctrine\Common\Annotations\AnnotationRegistry;
use Symfony\Component\ClassLoader\UniversalClassLoader;

$loader = require __DIR__.'/../vendor/autoload.php';
$universalLoader = new UniversalClassLoader();

$universalLoader->registerNamespace("seculibs\\collections", __DIR__.'/../vendor/seculibs/collections/');
$universalLoader->register();

// intl
if (!function_exists('intl_get_error_code')) {    
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php'; 
```

}

```
AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

没有...

但显然它适用于很多人所以..我做错了什么？他们有其他一些可以在秘密网站上找到的 Symfony 版本吗？

其中一门课是这样的：

```
namespace seculibs\collections;

class LinkedMap {
    private $items;

    public function __construct() {
        $this->items = array();
    }

    public function __destruct() {
        unset($this->items);
    }

 .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:19:43.350

您可以将自己的库添加到 composer.json 自动加载配置中，因此即使它们不是由 composer 加载的，它们也会在生成的自动加载器中。

```
"autoload": {
    "psr-0": {
        "": "src/",
        "MyLib_": "/home/sites/MyLib"
    }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:34:06.233

```
$loader->add('seculibs\\collections',__DIR__ . '/../vendor');

new LinkedMap(); 
```

假设你有文件：vendor/seculibs/collections/LinkedMap.php

通常，您的库中会有另一个级别。就像是：

供应商/MyStuff/seculibs/collections

然后添加行将指向 vendor/MyStuff

# mysql - 选择 3 个带有计数和连接的表

> ID：15274240
> 
> 赞同：2
> 
> 时间：2013-03-07T14:50:32.560
> 
> 标签：mysql, sql, select, join

我有 3 个表 tb1、users、users_credits。我的目标是将两个选择（sel1，sel2）组合成一个视图，并在没有行的 sel2 中显示 0（左连接？）

选择1

```
SELECT 
users.userid, 
users.datareg,
users_credits.credits,
FROM 
users,
users_credits,
WHERE
users.userid = users_credits.userid 
```

选择2

```
SELECT COUNT(*) FROM tb1 where tb1.id_user = users.userid 
```

表结构

```
tb1
`id` int(11) NOT NULL AUTO_INCREMENT,
`id_user` decimal(11,0) NOT NULL,
`datains` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`id`) 
```

用户

```
`userid` int(4) unsigned NOT NULL AUTO_INCREMENT,
`datareg` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 PRIMARY KEY (`userid`) 
```

users_credits

```
`id` int(11) NOT NULL AUTO_INCREMENT,
`userid` int(11) NOT NULL,
`credits` decimal(5,0) NOT NULL,
`data` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`id`) 
```

做这个的最好方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:53:33.860

```
SELECT  users.userid, 
        users.datareg,
        users_credits.credits,
        COALESCE(c.totalCount,0) totalCount
FROM    users
        LEFT JOIN users_credits
            ON users.userid = users_credits.userid
        LEFT JOIN
        (
            SELECT  id_user, COUNT(*) totalCount 
            FROM    tb1 
            GROUP   BY id_user
        ) c ON c.id_user = users.userid 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

**更新 1**

```
SELECT  users.userid, 
        users.datareg,
        users_credits.credits,
        COALESCE(c.totalCount,0) totalCount,
        c.max_datains
FROM    users
        LEFT JOIN users_credits
            ON users.userid = users_credits.userid
        LEFT JOIN
        (
            SELECT  id_user, MAX(datains) max_datains, COUNT(*) totalCount 
            FROM    tb1 
            GROUP   BY id_user
        ) c ON c.id_user = users.userid 
```

**更新 2**

您需要为此创建两个视图：

第一种观点：

```
CREATE VIEW tbl1View
AS
SELECT  id_user, MAX(datains) max_datains, COUNT(*) totalCount 
FROM    tb1 
GROUP   BY id_user 
```

第二视图

```
CREATE VIEW FullView
AS
SELECT  users.userid, 
        users.datareg,
        users_credits.credits,
        COALESCE(c.totalCount,0) totalCount,
        c.max_datains
FROM    users
        LEFT JOIN users_credits
            ON users.userid = users_credits.userid
        LEFT JOIN tbl1View c ON c.id_user = users.userid 
```

# json - 在 MongodDB JSON 样式的文档中存储 HTML 的好策略是什么

> ID：15274251
> 
> 赞同：44
> 
> 时间：2013-03-07T14:50:55.580
> 
> 标签：json, mongodb, meteor

可以在 MongoDB 中存储 HTML 吗？有缺点吗？有更好的选择吗？

我对 JSON 有点陌生，但我计划将我的 WordPress 网站迁移到自定义的流星/mongodb 网站。

在 WordPress 中，我们的“帖子”本质上是产品记录，“主要内容”是产品的描述。这些描述包含一些 HTML 标记，例如“强”标记、中断标记和 href 超链接。

```
<p>Who hasn't wished for a mini-Roomba to handle the arduous task of cleaning their iPhone screen? Now your dreams have come true! See the Takara web page for a <a href="http://www.takaratomy.co.jp/products/automee/" title="automee s" target="_blank">demo video.</a><strong>Colors: </strong> White, Red, Orange and Blue Runs on a single AA battery.<br> 1,575 yen</p> 
```

与 XML 不同，JSON 缺少 CDATA 之类的东西。尝试将 HTML 放在我的 JSON 样式的文档描述字段中是不是一个坏主意？这样做是否有特殊的转义字符？还是应该将 HTML 产品描述存储为外部静态文件？还是有其他最佳实践？

```
{
'_id':'236',
'name':'Tokyo Marui M9A1 Gas Blow Back Airsoft Gun',
'description':'<p>html here?</p>',
'tags': ['toys','outdoors']
...
} 
```

任何提示，建议，链接表示赞赏！

**编辑**

添加了示例产品描述文本。

**编辑2**

我发现这篇 stackoverflow 文章： [如何在 MongoDB 中存储 HTML 数据？](https://stackoverflow.com/questions/12139656/how-to-store-html-data-in-mongodb)

另一个在谷歌 [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/HW5XB5yox20](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/HW5XB5yox20)

他们似乎说应该没问题。但是没有太多讨论，所以只是寻求更多的确认。

**编辑3**

附加参考 [https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/0m8KJ7mPWiQ](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/0m8KJ7mPWiQ)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T15:13:28.390

好的，我似乎找到了足够的文章来得出结论：

在 MongoDB 中将 html 片段和文件存储为标准 utf-8 编码字符串非常好，但有一些注意事项： [http ://docs.mongodb.org/manual/faq/developers/#when-should-i-use-gridfs](http://docs.mongodb.org/manual/faq/developers/#when-should-i-use-gridfs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-12T22:01:44.300

您可以将其存储为字符串的常规文本类型，但在保存到数据库之前验证 HTML。这是一个使用[express-validator](https://www.npmjs.com/package/express-validator)和[sanitize-html的示例](https://www.npmjs.com/package/sanitize-html)

```
body('description').not().isEmpty().trim().isLength({ min: 3 }).customSanitizer(value => {
    return sanitizeHtml(value, {
        exclusiveFilter: (frame) => {
            return frame.tag === 'script';
        },
        textFilter: (value) => {
            return value.replace(/\\n|\s\s/g, "").trim()
        }
    })
}) 
```

在这里，我在描述 req.body.description 中从用户那里获取 HTML 并且您可以看到 express-validator 来验证特定规则和 sanitize-html 来控制我在默认选项旁边需要什么，并且我将脚本标签剥离为以及换行符和空格。我希望这会有所帮助。

# mysql - MySQL 复杂内连接查询出现错误

> ID：15274255
> 
> 赞同：1
> 
> 时间：2013-03-07T14:51:08.647
> 
> 标签：mysql, mysql-workbench

查询定义：
选择艺术成绩85或以上的学生，
以及
任何计算机课程成绩85或以上的
学生

```
select Students.StudFirstName,Student_Schedules.Grade
from 
(Select Distinct Students.StudentID,Students.StudFirstName,Student_Schedules.Grade 
from (((Students

Inner Join Student_Schedules
On Student_Schedules.StudentID = Students.StudentID)

Inner Join Classes
On Classes.ClassID = Student_Schedules.ClassID)

Inner Join Subjects
On Subjects.SubjectID = Classes.SubjectID)

Inner Join Categories
On Subjects.CategoryID = Categories.CategoryID

where Categories.CategoryDescription = 'Art' and Student_Schedules.Grade >= 85)
            As Stud_Art 
```

上面的代码提取了艺术成绩85或以上的学生

```
Inner Join

(Select Distinct Students.StudentID,Students.StudFirstName,Student_Schedules.Grade 
from (((Students

Inner Join Student_Schedules
On Student_Schedules.StudentID = Students.StudentID)

Inner Join Classes
On Classes.ClassID = Student_Schedules.ClassID)

Inner Join Subjects
On Subjects.SubjectID = Classes.SubjectID)

Inner Join Categories
On Subjects.CategoryID = Categories.CategoryID

WHERE Categories.CategoryDescription LIKE '%Computer%' AND Student_Schedules.Grade >=    85)

As Stud_CS 
```

以上代码提取计算机成绩85或以上的学生

```
On Stud_CS.StudentID = Stud_Art.StudentID; 
```

上面的代码匹配来自 Art and Computer 的 StudentID

来自 MySQLWorkBench 的错误：
错误代码：1054。“字段列表”中的未知列“Students.StudFirstName”

上述查询可以通过 SubQuery 技术解决，但我想了解如何使用 Inner Join 技术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:55:16.550

您正在尝试检索 Student.StudFirstName 和 Student_Schedules.Grade，但您的表别名是 Stud_Art 和 Stud_CS。可能是这个问题吗？

我认为第一部分应该是这样的：

```
select Stud_Art.StudFirstName,Stud_Art.Grade 
```

# extjs - 带有 ajax 代理的 ExtJS 存储不加载数据

> ID：15274259
> 
> 赞同：2
> 
> 时间：2013-03-07T14:51:16.927
> 
> 标签：extjs, extjs4, extjs4.1

我是 ExtJS 的初学者，正在学习 sencha 的教程，只是不想工作（应用教程）。

我有一个简单的网格存储，当存储使用 AJAX 代理读取 json 文件时，数据不显示，并且根据 firebug 中的 net 选项卡没有加载任何内容，因为它是空的。并且不会抛出任何错误。但是如果我为我的 json 文件添加了一个错误的 url，那么它会抛出一个无法找到的错误。

我的商店是这样的：

```
Ext.define('AM.store.Users', {
    extend: 'Ext.data.Store',
    model: 'AM.model.User',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        url: 'data/users.json',
        reader: {
            type: 'json',
            root: 'users',
            successProperty: 'success'
        }
    }
}); 
```

我的json文件是这样的：

```
{
    "success": true,
    "users": [
        {"name": "Ed",    "email": "ed@sencha.com"},
        {"name": "Tommy", "email": "tommy@sencha.com"}
    ]
} 
```

模型：

```
Ext.define('AM.model.User', {
    extend: 'Ext.data.Model',
    fields: ['name', 'email']
}); 
```

这些与教程的可下载源文件中的完全相同，但也不起作用。如果数据是在商店内定义的，一切都很好。请帮忙，这里完全被屏蔽了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:19:07.657

您需要像 Eric 所说的那样在服务器设置中进行 ajax 调用。要回答有关加载外部数据的问题，您不能这样做，因为它首先不起作用的原因是出于安全原因，如果可以规避，那就没有意义了。我认为您可以从外部文件加载数据的唯一方法是将 JSON 数据保存为外部 .js 文件中的对象，然后使用商店的 data 属性将数据设置为外部文件中的该对象.

# css - 无法删除标题和菜单导航栏之间的空间

> ID：15274260
> 
> 赞同：1
> 
> 时间：2013-03-07T14:51:22.010
> 
> 标签：css, header, margin, padding, nav

无论出于何种原因，我都无法摆脱标题和导航栏菜单之间的差距。我已经尝试了所有我能想到的填充/边距调整以向上推或移动栏，但它只是在菜单上做一些时髦的事情或向上推其他内容。我需要一些帮助。

和代码

```
#header_wrap {
    width:100%;
    height:144px;
    text-align: center;

}

#header {
    width:980px;
    margin:0 auto;

}

#preloadedImages
{
    width: 0px;
    height: 0px;
    display: none;
    background-image:url(Logo/logo14hover.gif);

}

.site_logo {
    float:left;
    width:302px;
    height:144px;
    background:url(Logo/logo14.gif) no-repeat;

}

.site_logo:hover {  
    float:left;
    width:302px;
    height:144px;
    background:url(Logo/logo14hover.gif) no-repeat;

}

.headerpic { 
    float:left;
    width:678px;
    height:144px;
    background:url(Images/headerpic.gif) no-repeat;

}

#menu_wrap {
     position:relative;
         z-index:2;
    text-align:center; 
    width:100%;
    padding: 0px 0px;
    }

#menu {
     position:relative;
     z-index:2;
    width:1000px;
    text-align:center; 
    margin:0 auto;
    height:61px;
    padding: 0px 0px;
    }

nav ul ul {
    display: none;

}

    nav ul li:hover > ul {
        display: block;
    }

nav ul {

    background: #bbb38f; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2JiYjM4ZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM2YjY0NDEiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #bbb38f 0%, #6b6441 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#bbb38f), color-stop(100%,#6b6441)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #bbb38f 0%,#6b6441 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #bbb38f 0%,#6b6441 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #bbb38f 0%,#6b6441 100%); /* IE10+ */
background: linear-gradient(to bottom,  #bbb38f 0%,#6b6441 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#bbb38f', endColorstr='#6b6441',GradientType=0 ); /* IE6-8 */
    box-shadow: 0px 0px 9px rgba(0,0,0,0.5);

    padding: 0px 0px;
    list-style:none;
    position: relative;
    display:inline-table;
    text-decoration:none;
    font-family:Copperplate Gothic Light,Georgia, Palatino, Times New Roman, serif; 
    font-size:17px;
    color:#FFFFFF;
    font-weight:light;
    outline:none;   
    text-shadow: 1px 1px #000000;

}

    nav ul:after {
        content: ""; clear: both; display: block;
    }

nav ul li {
    float: left;
}

nav ul li:hover {
        background: #736e57;
        background: linear-gradient(top, #BBB38F 0%, #6B6441 40%);
        background: -moz-linear-gradient(top, #BBB38F4 0%, #6B64415 40%);
        background: -webkit-linear-gradient(top, #BBB38F 0%,#6B6441 40%);
        text-decoration:none; 
        font-family:Copperplate Gothic Light,Georgia, Palatino, Times New Roman, serif; 
        font-size:17px;
        color:#FFFFFF;
        font-weight:light;
        outline:none;
        filter:alpha(opacity=100);
        opacity: 1;
        -moz-opacity:1;

}

nav ul li:hover a {
    color:#FFFFFF;
    filter:alpha(opacity=100);
    opacity: 1;
    -moz-opacity:1;

}

nav ul li a {
    color:#FFFFFF;
    display: block;
    padding: 12px 42px;
    text-decoration:none;
    filter:alpha(opacity=100);
    opacity: 1;
    -moz-opacity:1;

}

nav ul li:hover > ul {
    background: #303030;
    text-decoration:none;
    display: block;

    }

nav ul ul {
    background: #303030;

    font-family:  Helvetica, Copperplate Gothic Light, Arial, sans-serif;   
    font-size:14px;
    text-decoration:none;
    color:#000;
    font-weight:light;
    outline:none;
    filter:alpha(opacity=95);
    opacity: 0.95;
    -moz-opacity:0.95;
}

    nav ul ul li {
        text-decoration:none;
        float: none; 
        position: relative;

    }
        nav ul ul li a {
            text-decoration:none;
            padding: 0px 0px;
            color:#000;
            filter:alpha(opacity=100);
            opacity: 1;
            -moz-opacity:1;

        }   
            nav ul ul li a:hover {
                text-decoration:none;
                background: #736e57;
                text-shadow: 1px 1px #000000;
                filter:alpha(opacity=100);
                opacity: 1;
                -moz-opacity:1;
            }

nav ul ul {

    text-decoration:none;
    padding: 0px;
    position: absolute;

    }

    nav ul ul li {

        float: none; 
        position: relative;
    }
        nav ul ul li a {
            filter:alpha(opacity=100);
            opacity: 1;
            -moz-opacity:1;
            padding: 10px 40px 10px 15px;
            color:#000;
            font-family:  Helvetica, Copperplate Gothic Light, Arial, sans-serif;
            font-size:15px;
            text-align: left;

        }   
            nav ul ul li a:hover {
                font-family:  Helvetica, Copperplate Gothic Light, Arial, sans-serif;
                font-size:15px;
                background: #6B6441;
                text-align: left;
                background: #bbb38f; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2JiYjM4ZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM2YjY0NDEiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #bbb38f 0%, #6b6441 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#bbb38f), color-stop(100%,#6b6441)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #bbb38f 0%,#6b6441 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #bbb38f 0%,#6b6441 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #bbb38f 0%,#6b6441 100%); /* IE10+ */
background: linear-gradient(to bottom,  #bbb38f 0%,#6b6441 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#bbb38f', endColorstr='#6b6441',GradientType=0 ); /* IE6-8 */
    filter:alpha(opacity=100);
    opacity: 1;
    -moz-opacity:1;
            }

nav ul ul ul {
    position: absolute;
    left: 100%; top:0;

} 
```

和 HTML

```
<div align="center" id="header_wrap">
<div id="header">
<a href="index.html"><div id="preloadedImages"></div><div class="site_logo"></div></a>
<div class="headerpic"></div>
</div>
</div>
<!-- START MENU NAV BAR CODE -->
<div id="menu_wrap">
<div id="menu">
<nav>
<ul>
    <li><a href="Company/company.html">Company</a>
        <ul>
        <li><a href="Company/mission.html">Mission</a></li>
        <li><a href="Company/philosophy.html">Philosophy</a></li>
        </ul>
    </li>
    <li><a href="Solutions/solutions.html">Solutions</a>
        <ul>
        <li><a href="Solutions/QPipe-Estimator/qpipe-estimator.html">Q Pipe Estimator</a>
            <ul>
            <li><a href="Solutions/QPipe-Estimator/advantage.html">Advantage</a></li>
            <li><a href="Solutions/QPipe-Estimator/differentiator.html">Differentiator</a></li>
            <li><a href="Solutions/QPipe-Estimator/features.html">Features</a></li>
            <li><a href="Solutions/QPipe-Estimator/screenshots.html">Screen Shots</a></li>
            </ul>
        </ul>
        </li>
    </li>
    <li><a href="#">Services</a>
        <ul>
        <li><a href="Services/technical-support.html">Technical Support</a></li>
        <li><a href="Services/training.html">Training</a></li>
        <li><a href="Services/customization.html">Customization</a></li>
        <li><a href="Services/faqs.html">FAQ's</a></li>
        </ul>
    </li>
    <li><a href="#">Industry</a>
        <ul>
        <li><a href="Industry/focus.html">Focus</a></li>
        <li><a href="Industry/customers.html">Customers</a></li>
        </ul>
    </li>
    <li><a href="Contact/contact-information.html">Contact</a>
        <ul>
        <li><a href="Contact/contact-information.html">Contact Information</a></li>
        <li><a href="Contact/request-information.html">Request Information</a></li>
        </ul>
    </li>
    <li><a href="http://web.qsoftsolutions.com/">Login</a>
    </li>
</ul>
</nav>
</div>
</div>
<!-- END MENU NAV BAR CODE --> 
```

在评论中添加小提琴链接

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T15:32:55.957

只需删除您的主要`ul`（的直接后代`nav`）的默认边距

使用以下 CSS 选择它，或给出特定`ul`的 a`class`或`id`（这样您只针对`ul`引起您的麻烦）。

```
nav > ul {margin: 0} 
```

我把它放在你的小提琴顶部，并[在这里更新](http://jsfiddle.net/xtsAx/9/)

我意识到现在已经回答了这个问题，因为我花了太长时间格式化它，但我只想指出它与这无关，`box-shadow`这对定位没有影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:15:25.787

`ul`默认边距负责此空间。尝试设置`margin-top:0`为`nav ul`. 演示：http: [//jsfiddle.net/xtsAx/8/](http://jsfiddle.net/xtsAx/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T05:07:02.873

对我来说，这个错误是因为我使用 Dream Weaver 来编辑我的代码。**这通过添加默认标题**给我打了个嗝。当我删除这些标题并`<html> <head>...<?php>....?> .... </html>`让它完美运行时。 **总是由织梦者删除 html 标签和标题。**

**更新：我在 Firefox 中再次遇到同样的错误，所以我申请了

```
 *{
margin:0;
padding:0;
} 
```

因此现在完全摆脱了它。**

# c# - 识别数组中基类的实现

> ID：15274262
> 
> 赞同：7
> 
> 时间：2013-03-07T14:51:23.133
> 
> 标签：c#, design-patterns, casting, magic-string

我有以下问题：我有一组自动（监听事件）控制我的模型的引擎。下图显示了一般的类图： ![类图](../Images/6f4e29c1a1c4486828c7528dea94c879.png)

现在我有一个知道 EngineFacade 的客户端，我想从客户端的 Engine2 设置属性 Active，但是客户端和 EngineFacade 都不知道三个引擎中的哪一个是 Engine2。

有两种方法，但我不喜欢其中任何一种：

1.  检查其中一个引擎是否属于 Engine2 类型 - 如果有另一个类执行相同的任务但名称不同，我必须在 EngineBuilder 和 EngineFacade 中更改它。
2.  检查标识符字符串 - 我真的不喜欢魔术字符串。

我在客户端站点上所知道的是存在或应该有一个处理网格的引擎。但我不知道更多。

也许我必须在两个恶魔之间做出选择，但也许你们中的一个有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:51:58.173

您可以在 的实现上使用属性`Engine2`，如下所示：

```
[AttributeUsage(AttributeTargets.Class)]
public class HandlesGridAttribute : Attribute { } 
```

然后您将其应用于您的推导：

```
[HandlesGrid]
public Engine2 : EngineBase { ... } 
```

然后，在您的客户端中，检查属性：

```
IEnumerable<EngineBase> bases = ...;

// Get all the implementations which handle the grid.
IEnumerable<EngineBase> handlesGrid = bases.
    Where(b => b.GetType().
        GetCustomAttributes(typeof(HandlesGridAttribute), true).Any());

// Set the active property.
foreach (EngineBase b in handlesGrid) b.Active = true; 
```

这里的主要缺点（可能适用于您，也可能不适用于您）是您无法在运行时更改值（因为该属性是在编译时烘焙的）。如果您的引擎以这种方式不是动态的，那么属性是正确的方法。

如果您需要更改派生是否可以在运行时执行此操作，那么您必须退回到您的第二个选项，即识别引擎属性的代码结构。请注意，它不一定是字符串（我也不喜欢那样），但它可以是更有条理的东西，可以为您提供您正在寻找的信息。

# solr - SOLR SynonymFilter 和 WordDelimiter 问题

> ID：15274265
> 
> 赞同：0
> 
> 时间：2013-03-07T14:51:33.880
> 
> 标签：solr, lucene

**1\. 我在做什么：**

我目前正在尝试实现一些流行的同义词，以增加显示的广告数量。

**2\. 限制：**

由于业务逻辑，我的默认运算符是 AND 因此，据我了解，搜索：

“ps3 slim 250gb 新”

应该返回包含该查询中每个术语的项目。我尝试切换到“OR”，但这将返回仅包含“new”或“slim”字样的项目。

由于我们总是按日期而不是按相关性排序，这是一个大问题。所以'和'它是。

这个想法是用大量的同义词和停用词来处理这个问题。

**3\. 我的设置：**

我当前的 SOLR 设置包含以下分析器链：

```
<fieldtype name="text_pt" class="solr.TextField" positionIncrementGap="100">
   <analyzer type="index">
       <tokenizer class="solr.WhitespaceTokenizerFactory"/>
       <filter class="solr.ASCIIFoldingFilterFactory" protected="protwords.txt"/>
       <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" 
            generateNumberParts="1" preserveOriginal="1" catenateWords="1" 
            catenateNumbers="1" catenateAll="0"/>
       <filter class="solr.LowerCaseFilterFactory"/>
       <filter class="solr.StopFilterFactory" ignoreCase="false" words="portugueseStopWords.txt"/>
       <filter class="solr.BrazilianStemFilterFactory"/>
       <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
   </analyzer>
   <analyzer type="query">
       <tokenizer class="solr.WhitespaceTokenizerFactory"/>
       <filter class="solr.ASCIIFoldingFilterFactory" protected="protwords.txt"/>
       <filter class="solr.SynonymFilterFactory" ignoreCase="true" synonyms="portugueseSynonyms.txt" 
                expand="true"/>
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="portugueseStopWords.txt"/>
       <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" 
                catenateWords="1" preserveOriginal="1" catenateNumbers="1" catenateAll="0"/>
       <filter class="solr.LowerCaseFilterFactory"/>
       <filter class="solr.BrazilianStemFilterFactory"/>
       <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
   </analyzer>
</fieldtype> 
```

**4.问题：**

我有同义词：

```
plaistation, plastation => playstation  #dirty spelling correction
ps3, playstation3  #just a synonym 
```

第一个只是工作。第二个结果似乎是同义词和 WordDelimiter 之间的冲突，如*分析*页面和*&debugQuery 所示*：

*调试查询*

```
<str name="querystring">title_search_pt:(ps3)</str>
<str name="parsedquery">MultiPhraseQuery(title_search_pt:"(ps3 ps) (3 playstation3 playstation) 3")</str> 
```

*查询分析器*

```
WhitespaceTokenizerFactory => [pos:1] ps3
ASCIIFoldingFilterFactory  => [pos:1] ps3
SynonymFilterFactory       => [pos:1] ps3 
                              [pos:1] playstation3

StopFilterFactory          => [pos:1] ps3 
                              [pos:1] playstation3

WordDelimiterFilterFactory => [pos:1] ps3  [pos:2] 3              [pos:3] 3
                              [pos:1] ps   [pos:2] playstation3
                                           [pos:2] playstation 
```

如您所见，在 WordDelimiterFilter 搞砸之前一切都很好。
我所期待的是*ps*和*playstation*都在 pos:1 和 3 在 pos:2。
如果我将“OR”作为默认操作，这将不是问题，但由于这对我来说不可能，这将尝试匹配同时具有 ps3 和 playstation3 的文档，而不是给我更多结果，它甚至给了我较少的..

**5.问题：**

我能做些什么呢？我认为 WordDelimiterFilter 提供了很多很好的东西来完全删除它，但是这个令牌位置移动对我来说看起来不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:14:56.010

我使用添加同义词的讨厌方法解决了这个问题，利用了这样的短语同义词的“限制”：

```
ps3 => playstation 3, ps 3
ps2 => playstation 2, ps 2 
```

这是一种同时使用替换（=>）和同义词（用逗号分隔的两个词）的技巧。

**查询分析器**是这样的：

```
WhitespaceTokenizerFactory => [pos:1] ps3
ASCIIFoldingFilterFactory  => [pos:1] ps3
SynonymFilterFactory       => [pos:1] ps            [pos:2] 3
                              [pos:1] playstation   [pos:2] 3

StopFilterFactory          => [pos:1] ps            [pos:2] 3
                              [pos:1] playstation   [pos:2] 3

WordDelimiterFilterFactory => [pos:1] ps            [pos:2] 3
                              [pos:1] playstation   [pos:2] 3
...
RemoveDuplicatesTokenFilterFactory =>  [pos:1] ps            [pos:2] 3
                                       [pos:1] playstation 
```

和**调试查询**：

```
<str name="querystring">title_search_pt:(ps3 new)</str>
<str name="parsedquery">+MultiPhraseQuery(title_search_pt:"(playstation ps) 3") +title_search_pt:new</str> 
```

我可以从同义词中删除 3 中的一个，因为这两个 3 最终将位于相同的标记位置，并且将被 RemoveDuplicatesTokenFilterFactory 删除。但是我保持这样，所以我的同义词文件不那么神秘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T14:48:26.260

要完成您的答案：

您也可以在文件中添加您放入同义词中的所有单词（或仅添加一个给您带来问题的单词），`protwords.txt`以便所有标记器都会忽略它们并按原样索引它们。

如果与同义词文件一起使用，这是有道理的，因为同义词是您要按原样查找的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:06:28.213

您可以设置`splitOnNumerics="0"`WordDelimiterFilterFactory[的属性](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)

> **splitOnNumerics="1"**导致字母 => 数字转换生成一个新部分
> 
> “j2se” => “j” “2” “se”
> 
> 默认为真（“1”）；设置为 0 以关闭

这应该消除将 ps3 和 playstation3 分成两个标记的问题，一个带有单词，一个带有数值。

# macos - BASH 用户驱动器选择

> ID：15274269
> 
> 赞同：2
> 
> 时间：2013-03-07T14:51:41.047
> 
> 标签：macos, bash, shell

我正在为 mac os x 创建一个简单的脚本，以根据 /Volumes 的内容为用户提供可供备份的可用驱动器列表，但是如果驱动器名称包含一个空格。find 命令在单独的行上输出每个驱动器，但“for each”将名称分成几部分。例子：

脚本：

```
#!/bin/bash
find /Volumes -maxdepth 1 -type d
echo ""

i=1
for Output in $(find /Volumes -maxdepth 1 -type d)
do
DriveChoice[$i]=$Output
echo $i"="${DriveChoice[$i]}
i=$(( i+1 ))
done 
```

输出：

```
/Volumes
/Volumes/backup
/Volumes/EZBACKUP DRIVE
/Volumes/Tech

1=/Volumes
2=/Volumes/backup
3=/Volumes/EZBACKUP
4=DRIVE
5=/Volumes/Tech
logout

[Process completed] 
```

这似乎应该是相当直截了当的。有没有更好的方法让我做到这一点？

更新：谢谢chepner，效果很好。这是一个生成同上命令的简单脚本，但无论如何我都会在这里发布它，以防有人发现它的任何部分有用：

```
#!/bin/bash
#Get admin rights
sudo -l -U administrator bash
#Set the path to the backup drive
BackupPath="/Volumes/backup/"
#Generate a list of source drives, limiting out invalid options
i=1
while read -r Output; do
if [ "$Output" != "/Volumes" ] && [ "$Output" != "/Volumes/backup" ] && [ "$Output" != "/Volumes/Tech" ] ; then
    DriveChoice[$i]=$Output
    echo "$i=${DriveChoice[$i]}"
    i=$(( i+1 ))
fi
done < <( find /Volumes -maxdepth 1 -type d)

#Have the user select from valid drives
echo "Source Drive Number?"
read DriveNumber
#Ensure the user input is in range
if [ $DriveNumber -lt $i ] && [ $DriveNumber -gt 0 ]; then
    Source=${DriveChoice[$DriveNumber]}"/"
    #Get the user's NetID for generating the folder structure
    echo "User's NetID?"
    read NetID
    NetID=$NetID
    #Grab today's date for generating folder structure
    Today=$(date +"%m_%d_%Y")
    #Destination for the Logfile
    Destination=$BackupPath$NetID"_"$Today"/"
    #Full path for the LogFile
    LogFile=$Destination$NetID"_log.txt"
    mkdir -p $Destination
    touch $LogFile
    #Destination for the backup
    Destination=$Destination"ditto/"
    #Execute the command
    echo "Processing..."
    sudo ditto "$Source" "$Destination" 2>&1 | tee "$LogFile"
else
    #Fail if the drive selection was out of range
    echo "Drive selection error!"
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:56:57.000

由于您看到的空间问题，您无法安全地迭代`find`使用循环的输出。`for`使用带有内置的`while`循环代替：`read`

```
#!/bin/bash
find /Volumes -maxdepth 1 -type d
echo ""

i=1
while read -r output; do
    DriveChoice[$i]=$output
    echo "$i=${DriveChoice[$i]}"
    i=$(( i+1 ))
done < <( find /Volumes -maxdepth 1 -type d) 
```

# jquery - jQuery Ajaxy 插件：在主菜单上调用 ajax 后，在新菜单上再次使用该插件

> ID：15274273
> 
> 赞同：0
> 
> 时间：2013-03-07T14:51:49.987
> 
> 标签：jquery, ajax

我在网站的主菜单上使用 Ajaxy。我的问题是，当我从 ajax 调用中获得结果时，我会动态创建一个树形菜单，因此我必须在树形菜单上使用与主菜单上相同的功能。树形菜单是使用以下代码创建的：

```
$("#tree .menu").html($("#main .menu").html()); 
```

即使使用另一个插件也可以使它工作吗？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:01:01.070

如果我正确理解您的问题，您想复制 DOM 中的现有元素并向其添加事件（单击、拖动、插件等）。

如果是这样，那么你可以这样做：

*   克隆要复制的元素`.clone()`并将其存储在变量中（将是一个 jQuery 对象）。
*   使用您想要的对象（添加事件、更改 html 等）
*   完成后将其放入所需的 DOM 中

这是一个简单的例子：

```
 $(document).ready(function() {
        $('.tree li').click(click_func);

        $('a').click(function() {
            var $tree_copy = $('.tree:first').clone();

            // use the cloned object as an jQuery object
            $tree_copy.find('li').click(click_func2);

            // add it to the DOM
            $('body').append($tree_copy);
        });
    }); 
```

[JsFiddle 示例](http://jsfiddle.net/kNebA/)

# php - 从 foreach 循环 + mysql while 循环中获取总数

> ID：15274274
> 
> 赞同：0
> 
> 时间：2013-03-07T14:51:51.383
> 
> 标签：php, mysql

我正在获取 $_post 数组并在每次迭代时运行一个查询，然后尝试获取累积的总点数，它似乎用最后一个点迭代覆盖了总数。我该如何解决？

```
 $full_total = 0;
    foreach($postid as $key => $value){

      $array = explode(',', $value);

      if($value[0]!=''){
        $id = $array[0];
        $query = "SELECT * FROM products WHERE id = '$id'";
        $result = mysqli_query($dbc, $query);

          while ($row = mysqli_fetch_array($result)) {
            echo '<tr valign="bottom">';
            echo '<td>' . stripslashes($row['rangeCode']) . '-' . stripslashes($row['pointsType']) . '</td>';
            echo '<td>' . stripslashes($row['category']) . '</a></td>';
            echo '<td>' . stripslashes($row['itemDesc']) . '</a></td>';
            echo '<td class="middle">' . stripslashes($row['points']) . '</a></td>';
            echo '</tr>';
            $total_donations = $row['points'];
          }
      }
      }
  $full_total += $total_donations;
  echo $full_total; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:54:51.987

您必须`$full_total`像这样在 foreach 循环中插入

```
 $full_total = 0;
foreach($postid as $key => $value){

  $array = explode(',', $value);

  if($value[0]!=''){
    $id = $array[0];
    $query = "SELECT * FROM products WHERE id = '$id'";
    $result = mysqli_query($dbc, $query);

      while ($row = mysqli_fetch_array($result)) {
        echo '<tr valign="bottom">';
        echo '<td>' . stripslashes($row['rangeCode']) . '-' . stripslashes($row['pointsType']) . '</td>';
        echo '<td>' . stripslashes($row['category']) . '</a></td>';
        echo '<td>' . stripslashes($row['itemDesc']) . '</a></td>';
        echo '<td class="middle">' . stripslashes($row['points']) . '</a></td>';
        echo '</tr>';
        $full_total += $row['points'];
      }
  }
  }
 echo $full_total; 
```

# html - 无法正确隐藏 Outlook 2013 HTML 电子邮件中的图像

> ID：15274278
> 
> 赞同：2
> 
> 时间：2013-03-07T14:52:03.483
> 
> 标签：html, outlook, gmail, html-email

我在 Outlook 2013 中正确隐藏图像时遇到问题，即使它们被隐藏，它们也会在它们被隐藏的地方添加一行间距，使电子邮件看起来被拉伸。这是我想从桌面版本中隐藏的图像上的代码。

```
<tr style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;">
 <td width="20" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="spacer-width">
  <img class="spacer-width" src="spacer.gif" height="0" width="0" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" alt="" />
 </td>
 <td width="560" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="secondary-fullwidth">
  <img src="btn-8.gif" height="0" width="0" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="btn-two" alt="Request A Test Drive" />
 </td>
 <td width="20" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="spacer-width">
  <img class="spacer-width" src="spacer.gif" height="0" width="0" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" alt="" />
 </td>
</tr> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T13:30:34.173

我使用以下修复程序隐藏 Outlook 2007 及更高版本的内容：

```
 <!--[if !gte mso 9]><!---->
    <tr style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;">
 <td width="20" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="spacer-width">
  <img class="spacer-width" src="spacer.gif" height="0" width="0" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" alt="" />
 </td>
 <td width="560" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="secondary-fullwidth">
  <img src="btn-8.gif" height="0" width="0" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="btn-two" alt="Request A Test Drive" />
 </td>
 <td width="20" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" class="spacer-width">
  <img class="spacer-width" src="spacer.gif" height="0" width="0" style="display: none; line-height: 0; font-size: 0; height: 0; padding: 0; mso-hide: all;" alt="" />
 </td>
</tr>
<!--<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:59:59.260

尝试添加可见性：隐藏；到CSS。它在 Outlook 中得到支持，我记得某处“新”Internet Explorer（也许我当时正在使用 8）需要同时正确隐藏某些内容。

# c# - 网络流的 StreamWriter 中的 WriteLine() 是否总是传递整行？

> ID：15274279
> 
> 赞同：2
> 
> 时间：2013-03-07T14:52:10.890
> 
> 标签：c#, networkstream

问题很简单：网络流的 StreamWriter 中的 WriteLine() 是否总是传递整行？还是有一些限制？例如，它只提供某种尺寸的线。

我的意思是，如果我调用 WriteLine（1 行上的一些非常长的字符串（例如 10000000 个字符）），StreamReader 的 ReadLine() 会像我发送它一样接收它吗？或者它只会收到一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:56:33.530

是的，`ReadLine`在`StreamReader`流的另一端总是会读取一个完整的行（或产生`OutOfMemoryException`），但这是[`ReadLine`](http://msdn.microsoft.com/en-GB/library/system.io.streamreader.readline.aspx)网络流的更多属性。在网络级别，对于`NetworkStream`，它*可能*已被拆分为多个单独的发送和接收。

`ReadLine`在看到换行符序列之前不会返回。

* * *

（警告 - 如果您传递给的字符串在`WriteLine`内部包含换行符序列，那么您只会收到该部分的字符串，直到第一个换行符序列）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:56:23.997

`WriteLine`可能会将您的字符串分成许多数据包，但只要您在`ReadLine`另一端使用，您就不需要关心。

`ReadLine`将始终读取整行，无论它是否包含多个数据包，只要连接不会失败（并且有足够的内存等）。

更准确地说：您`StreamWriter`将始终将整个字符串传送到您的 NetworkStream，它可能会或可能不会一次发送所有字符串，具体取决于包括字符串、网络配置等在内的多种因素。另一方面，类似的事情发生了。NetworkStream.Read 将一次读取尽可能多的内容，并将其全部传递给 StreamReader，但如果您使用`StreamReader.ReadLine`，该方法将在获得完整行之前不会返回任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T14:54:24.650

**无论如何**，它都会写和读它。

例如，就在今天早些时候，我正在`BigIntegers`使用流写入超过**183,000 位数字**的数字`WriteLine`（尽管花了一段时间！）。

# automatic-ref-counting - 用于带有 ARC 的 xcode 4.6 ios 6 的 JSONKit？

> ID：15274282
> 
> 赞同：1
> 
> 时间：2013-03-07T14:52:13.537
> 
> 标签：automatic-ref-counting, xcode4.6, touchxml, jsonkit, json-framework

好吧，我确实添加了 JSONKit 类（JSONKit.h 和 JSONKit.h），但是在 .m 文件中，我有很多警告和编译错误，例如：

```
NSError *error;  //--> ARC forbids Objetive-C in structs or unions

or 

id key, object; whit the same error

anObject = [anObject retain]; //---> ARC forbids explicit message send 'retain''

or many error's in this part code:

static void _JKArrayInsertObjectAtIndex(JKArray *array, id newObject, NSUInteger objectIndex) {
  NSCParameterAssert((array != NULL) && (array->objects != NULL) && (array->count <= array->capacity) && (objectIndex <= array->count) && (newObject != NULL));
  if(!((array != NULL) && (array->objects != NULL) && (objectIndex <= array->count) && (newObject != NULL))) { [newObject autorelease]; return; }
  if((array->count + 1UL) >= array->capacity) {
    id *newObjects = NULL;
    if((newObjects = (id *)realloc(array->objects, sizeof(id) * (array->capacity + 16UL))) == NULL) { [NSException raise:NSMallocException format:@"Unable to resize objects array."]; }
    array->objects = newObjects;
    array->capacity += 16UL;
    memset(&array->objects[array->count], 0, sizeof(id) * (array->capacity - array->count));
  }
  array->count++;
  if((objectIndex + 1UL) < array->count) { memmove(&array->objects[objectIndex + 1UL], &array->objects[objectIndex], sizeof(id) * ((array->count - 1UL) - objectIndex)); array->objects[objectIndex] = NULL; }
  array->objects[objectIndex] = newObject;
} 
```

如何以最佳方式使用适用于 xcode 4.6 iOS 6 的 JSONKit 和 JSON 框架？

＆ 多谢！！！来自玻利维亚的问候！！摇滚吧！！！XD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:57:22.413

尝试使用 JSONKit 的另一个分支。通过简单的搜索，我找到了一些可以纠正这个问题的叉子。

**也许这个：** [https ://github.com/Kelp404/JSONKit/network](https://github.com/Kelp404/JSONKit/network)

[原 JSONKit](https://github.com/johnezang/JSONKit)的最后一次提交在这一天长达 8 个月......这很*糟糕*！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T15:41:44.463

对于任何感兴趣的人，我只是分叉了原始存储库并添加了看起来适用于 iOS6 的修复程序（和一个 Podspec 文件）。[https://github.com/JoistApp/JSONKit](https://github.com/JoistApp/JSONKit)

# jquery - jquery mobile alert on link with cancel

> ID：15274292
> 
> 赞同：1
> 
> 时间：2013-03-07T14:52:46.047
> 
> 标签：jquery

这应该是基本的，我以前没有这样做过..您只需点击一个链接，然后“取消”或“确定” - 对于当前脚本，点击取消也会重定向您。当它应该让你留在当前页面时。

这是用于移动设备的，我是否也应该使用 .on 来代替？

js

```
$("a").click(function(event){
    if (confirm('click ok to continue, or cancel to stay on page')) {
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:59:03.723

尝试`preventDefault()`：

```
$("a").click(function(event){
    event.preventDefault();

    if (confirm('click ok to continue, or cancel to stay on page')) {

    }
}); 
```

或者：

```
$("a").click(function(event){

    var answer = confirm('click ok to continue, or cancel to stay on page');

    if(answer){
        // go to destination
        return true;
    }else{
        // cancel
        return false;
    }
}); 
```

# php - 将文件从实时服务器上传到 youtube 不起作用？

> ID：15274293
> 
> 赞同：4
> 
> 时间：2013-03-07T14:52:46.370
> 
> 标签：php, xml, curl, youtube, youtube-api

我正在使用您的管 API 集成。此代码在本地主机中完美运行。但它无法在实时服务器上运行。此外，它无法将视频从实时服务器上传到 YouTube。我无法从我的实时服务器上传 youtube 上的视频。我我试图解决将近 2 天。这是将视频上传到 YouTube 的示例代码。

```
 <?php
    $youtube_email = "xxxxxxxx"; // Change this to your youtube sign in email.
    $youtube_password = "xxxxxxxxx"; // Change this to your youtube sign in password.

    $postdata = "Email=".$youtube_email."&Passwd=".$youtube_password."&service=youtube&source=Example";
    $curl = curl_init("https://www.google.com/youtube/accounts/ClientLogin");
    curl_setopt($curl, CURLOPT_HEADER, "Content-Type:application/x-www-form-urlencoded");
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $postdata);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 1);
    $response = curl_exec($curl);
    curl_close($curl);

    list($auth, $youtubeuser) = explode("\n", $response);
    list($authlabel, $authvalue) = array_map("trim", explode("=", $auth));
    list($youtubeuserlabel, $youtubeuservalue) = array_map("trim", explode("=", $youtubeuser));

    $youtube_video_title = "kamal"; // This is the uploading video title.
    $youtube_video_description = "kamal"; // This is the uploading video description.
    $youtube_video_category = "News"; // This is the uploading video category.
    $youtube_video_keywords = "kamal, video"; // This is the uploading video keywords.

    $data = '<?xml version="1.0"?>
                <entry xmlns="http://www.w3.org/2005/Atom"
                  xmlns:media="http://search.yahoo.com/mrss/"
                  xmlns:yt="http://gdata.youtube.com/schemas/2007">
                  <media:group>
                    <media:title type="plain">'.$youtube_video_title.'</media:title>
                    <media:description type="plain">'.$youtube_video_description.'</media:description>
                    <media:category
                      scheme="http://gdata.youtube.com/schemas/2007/categories.cat">'.$youtube_video_category.'</media:category>
                    <media:keywords>'.$youtube_video_keywords.'</media:keywords>
                  </media:group>
                </entry>';

    $key = "XXXXXXXXXXXXXXXXXXX"; // Get your key here: http://code.google.com/apis/youtube/dashboard/.

    $headers = array("Authorization: GoogleLogin auth=".$authvalue,
                     "GData-Version: 2",
                     "X-GData-Key: key=".$key,
                     "Content-length: ".strlen($data),
                     "Content-Type: application/atom+xml; charset=UTF-8");

    $curl = curl_init("http://gdata.youtube.com/action/GetUploadToken");
    curl_setopt($curl, CURLOPT_USERAGENT, $_SERVER["HTTP_USER_AGENT"]);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_TIMEOUT, 10);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
    curl_setopt($curl, CURLOPT_REFERER, true);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($curl, CURLOPT_HEADER, 0);

    $response = simplexml_load_string(curl_exec($curl));
    curl_close($curl);
    ?>
    <script type="text/javascript">
      function checkForFile() {
        if (document.getElementById('file').value) {
          return true;
        }
        document.getElementById('errMsg').style.display = '';
        return false;
      }
    </script>

    <?php
    $nexturl = "http%3A%2F%2Fwww.walola.com"; // This parameter specifies the URL to which YouTube will redirect the user's browser when the user uploads his video file.
    ?>

    <form action="<?php echo($response->url); ?>?nexturl=<?php echo(urlencode($nexturl)); ?>" method="post" enctype="multipart/form-data" onsubmit="return checkForFile();">
      <input id="file" type="file" name="file"/>
      <div id="errMsg" style="display:none;color:red">
        You need to specify a file.
      </div>
      <input type="hidden" name="token" value="<?php echo($response->token); ?>"/>
      <input type="submit" value="go" />

    </form>
    </php> 
```

请为此提供近似解决方案....尽快...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:50:54.407

基于浏览器的上传完成后加载的页面由您作为表单属性中的`nexturl=`参数传入的 URL 确定，如[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading#Uploading_the_Video_File)中所述。`action`

您在`<?php echo(urlencode($nexturl)); ?>`那里作为值传递，因此，如果您在上传完成时收到页面未找到响应，那是因为该值。

查看您的代码，我认为问题在于您的`$nexturl`值是“http%3A%2F%2Fwww.walola.com”，它已经是 URL 转义，然后您正在调用`urlencode()`它。尝试使用“ [http://www.walola.com](http://www.walola.com) ”`$nexturl`代替，然后调用`urlencode()`它。

# ruby-on-rails - 在 Rails 控制器中测试对象实例化

> ID：15274295
> 
> 赞同：1
> 
> 时间：2013-03-07T14:52:51.663
> 
> 标签：ruby-on-rails, rspec, controllers

（在 RSpec 中）我正在测试我的控制器中的一个对象正在被实例化：

控制器：

```
stripe_params = StripeParams.new(params) 
```

测试：

```
it "creates a new params instance" do
  get :message, params
  StripeParams.should_receive(:new).with(params)
end 
```

...但是，这给了我以下测试错误：

预期：1 次
收到：0 次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:18:22.297

你必须在运行代码之前工作期望：

```
it "creates a new params instance" do
  StripeParams.should_receive(:new).with(params) 
  get :message, params
end 
```

# wordpress - 将旧 URL 重定向到新子域

> ID：15274296
> 
> 赞同：0
> 
> 时间：2013-03-07T14:52:59.573
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect, subdomain

我在 下有一个博客`example.com/blog`，但现在我更改为`blog.example.com`，它重定向到同一个旧文件夹。

我不希望用户直接访问旧 URL，因此，将 /blog 重定向到博客。我该怎么做？

我更喜欢使用 .htaccess。当前是 WordPress 默认值：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:57:49.710

你可以试试这个

```
 RewriteRule ^blog/(.*)$ http://blog.example.com/$1 [R=301,L] 
```

或者你可以做这样的事情来检查主域 - 这会检查你是否已经在 blog.example.com ，否则它会重定向。

```
 RewriteCond %{HTTP_HOST} !^blog\.example\.com$ [NC] 
    RewriteRule ^blog/$ http://blog.example.com [L,NC,R=301] 
```

# javascript - 负载测试 JavaScript 小部件？

> ID：15274300
> 
> 赞同：2
> 
> 时间：2013-03-07T14:53:06.963
> 
> 标签：javascript, load-testing

我想弄清楚如何加载测试我的 JavaScript 小部件。它将在大约 1000 个网站上运行，每个网站每天大约有 2k 访问者，所以我真的需要在让我的用户安装小部件之前找到一种方法来测试这个场景。

任何想法我应该采取什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:31:57.343

听起来小部件本身（在浏览器中运行的 javascript 代码的一个实例）一次不会被多个用户（一个浏览器）使用。您的服务器端 API，OTOH，将。因此，您需要通过模拟您希望使用您的小部件生成的服务器的 HTTP 流量级别来测试您的服务器。为此，您需要 Web 负载测试工具。

根据 API 的简单程度，您可以使用 JMeter 之类的东西。如果 API 使用更复杂，您可能需要更复杂的工具。

# javascript - 通过 JS 使用动态 url 的 twitter 分享按钮

> ID：15274301
> 
> 赞同：0
> 
> 时间：2013-03-07T14:53:10.327
> 
> 标签：javascript, twitter, share

我让这个工作感到头疼。我设法用 fb 做到了，但 twitter 不起作用。

我制作了一个 js 函数，它采用带有一些其他参数的页面的 html 路径，我只想使用该函数而不是手动编写 url。问题是，twitter 停在文本上，并没有写出“htmlpath”给出的 url。

{ window.open(" [http://twitter.com/intent/tweet?text=An%20Awesome%20Link&url=](http://twitter.com/intent/tweet?text=An%20Awesome%20Link&url=) " + htmlpath); }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:56:54.213

如果我冒险猜测，那将是您需要预先添加协议（很可能是`http://`or `https://`）。如果协议不存在，Twitter 将不会添加链接。

```
// maybe something like this?
window.open(
    "http://twitter.com/intent/tweet?text=An%20Awesome%20Link&url=" + 
    ((htmlpath.substr(0,4) == 'http')?htmlpath:'http://' + htmlpath)
); 
```

# excel - 在 VBA 中使用 Dir() 查找包含 ~ 的隐藏文件或系统文件

> ID：15274302
> 
> 赞同：3
> 
> 时间：2013-03-07T14:53:10.337
> 
> 标签：excel, vba

我正在尝试为 SharePoint 重命名一系列包含非法字符（例如 #、&、~ 等）的文件。我修改了[此](http://www.ammara.com/access_image_faq/recursive_folder_search.html)站点的代码以查找要重命名的文件/文件夹。当我运行以下命令时

```
strTemp = Dir(strFolder & "*~*", vbHidden) 
```

（或与此相关的任何其他属性）我在目录中获得了大量不包含 a 的文件`~`，但它似乎仍然没有找到一些包含初始`~`文件的文件（例如由编辑 a 引起的临时文件从未删除的文档）。

有人知道如何找到这些文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:14:37.167

很抱歉将其发布为答案，但我似乎无法添加评论。

ecksc 已经回答了他自己的问题，但我只想指出，您不需要将常量替换为数字 6。要组合属性，您可以使用添加它们`+`，例如：

```
strTemp = Dir(strFolder & "*~*", vbHidden + vbSystem) 
```

# spring - 我的 Spring 配置文件之一中的前缀属性

> ID：15274303
> 
> 赞同：0
> 
> 时间：2013-03-07T14:53:11.337
> 
> 标签：spring, jsp, spring-mvc, spring-security

我在 webapps 目录中有 login.jsp ， forgotpass.jsp 文件，在 WEB-INF/jsp 文件夹下还有 2 个 jsp 文件。

现在，当用户在 login.jsp 页面上单击 ForgotPassword 链接时，当用户输入一些数据时，他被重定向到 forgotpassword.jsp，这些数据由 Spring 控制器之一读取，spring 控制器设置一个属性并返回相同的 jsp 页面。

我的 remote-servlet.xml 文件具有以下配置。

```
...
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="/WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean> 
```

忘记密码控制器.java

```
@RequestMapping(value = "/pass", method =RequestMethod.POST)
    public String recoverPassword(@RequestParam String email, ModelMap model){
        List<String> emails = usersDao.getEmails();
        ...
        if (!emails.contains(email)) {        
            model.addAttribute("failMessage", "Password Recovery Failed ! Invalid loginId or EmailId");
        }else{
            String validEmail = email;
            model.addAttribute("successMessage", "A New Password is Sent to your emailId "+ "xxx"+email.substring(email.indexOf('@')-3,email.length()));
        }
        return "forgotpassword";
    }
} 
```

**问题是在为配置属性添加前缀和后缀之后，返回路径将是 /myapp-Path/WEB-INF/jsp/forgotpassword.jsp。**

**但是我的 forgotpassword.jsp 在 /webapps/ 目录下，但是 Spring 正在 WEB-INF/jsp/ 文件夹下检查它。**

**我们可以添加另一个带有前缀“/”和后缀“.jsp”的属性吗？如果这是不可能的，请建议我任何解决方案。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:25:30.870

如果您不想将 forgotPass.jsp 放在同一个文件夹中，您总是可以返回一个[ModelAndView](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/web/servlet/ModelAndView.html)，将[View](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/web/servlet/View.html)设置为[JstlView](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/web/servlet/view/JstlView.html)，或者为此滚动您自己的。但是，我必须同意@funnyfox 的观点，您有一些要求阻止这些 JSP 文件位于同一目录树中，这似乎很愚蠢。

# sql - 是否可以使用 SQL Server 使用相同的数据透视列进行多个数据透视

> ID：15274305
> 
> 赞同：26
> 
> 时间：2013-03-07T14:53:13.883
> 
> 标签：sql, sql-server, pivot, unpivot

我正面临以下挑战。我需要在同一列上旋转表数据两次。这是数据的屏幕截图。

![每年出售物品的购买和销售价值的物品清单](../Images/3521e52eae0b1dfeac4547f73bc219d4.png)

我希望每个项目 ID 都有一行，其中包含每年的购买价值和销售价值。我尝试通过选择“年份”列两次，对其进行格式化，以便每个销售年份以“S”为前缀，每个购买年份以“P”开头，并使用 2 个枢轴围绕 2 年列旋转. 这是 SQL 查询（用于 SQL Server 2008）：

```
SELECT [Item ID], 
        [P2000],[P2001],[P2002],[P2003],
        [S2000],[S2001],[S2002],[S2003]
FROM 
(

SELECT [Item ID]
      ,'P' + [Year] AS YearOfPurchase
      ,'S' + [Year] AS YearOfSelling

  ,[Purchasing value]
  ,[Selling value]
  FROM [ItemPrices]
) AS ALIAS

PIVOT 
(
MIN ([Purchasing value]) FOR [YearOfPurchase] in ([P2000],[P2001],[P2002],[P2003])
)
AS pvt

PIVOT 
(
MIN ([Selling value]) FOR [YearOfSelling] in ([S2000],[S2001],[S2002],[S2003])
)
AS pvt2 
```

结果并不完全是我所希望的（见下图）：

![实际情况：行数过多](../Images/bb662b9446575e54e09cac0b08bb7e20.png)

如您所见，每个项目 ID 仍然不止一行。有没有办法将行数减少到每个项目正好一个？所以它看起来有点像下面的 Excel 屏幕截图？

![所需情况：每个项目 ID 一行](../Images/c3d4f0efbca03248bc318b19a3be8a53.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-07T15:23:03.303

我的建议是同时应用`UNPIVOT`和`PIVOT`函数来获得结果。

这`UNPIVOT`会将`PurchasingValue`和`SellingValue`列转换为行。完成此操作后，您可以将数据转换为结果。

代码将是：

```
select *
from
(
  select itemid, 
    case 
      when col = 'PurchasingValue' then 'P'
      when col = 'SellingValue' then 'S'
    end + cast(year as varchar(4)) new_col,
    value
  from yourtable
  unpivot
  (
    value
    for col in ([PurchasingValue], [SellingValue])
  ) unpiv
) src
pivot
(
  max(value)
  for new_col in (P2000, P2001, P2002, P2003,
                  S2000, S2001, S2002, S2003)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/55d1e/3)。结果是：

```
| ITEMID | P2000 | P2001 | P2002 | P2003 | S2000 | S2001 | S2002 | S2003 |
--------------------------------------------------------------------------
|      1 |  1000 |  1100 |  1200 |  1300 |   900 |   990 |  1080 |  1170 |
|      2 |   500 |   550 |   600 |   650 |   450 |   495 |   540 |   585 | 
```

在 SQL Server 2008+ 中，您可以将`CROSS APPLY`with`VALUES`与`PIVOT`函数一起使用：

```
select *
from
(
  select itemid,
    col+cast(year as varchar(4)) new_col,
    value
  from yourtable
  cross apply
  (
    VALUES
        (PurchasingValue, 'P'),
        (SellingValue, 'S')
   ) x (value, col)
) src
pivot
(
  max(value)
  for new_col in (P2000, P2001, P2002, P2003,
                  S2000, S2001, S2002, S2003)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/55d1e/7)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-09-01T19:03:17.487

旋转多列的一种简单方法是仅使用 Aggregate(Case) 表达式。

```
SELECT  [Item ID],
        [P2000] = SUM(CASE WHEN [Year] = 2000 THEN [Purchasing value] END),
        [P2001] = SUM(CASE WHEN [Year] = 2001 THEN [Purchasing value] END),
        [P2002] = SUM(CASE WHEN [Year] = 2002 THEN [Purchasing value] END),
        [P2003] = SUM(CASE WHEN [Year] = 2003 THEN [Purchasing value] END),
        [S2000] = SUM(CASE WHEN [Year] = 2000 THEN [Selling value] END),
        [S2001] = SUM(CASE WHEN [Year] = 2001 THEN [Selling value] END),
        [S2002] = SUM(CASE WHEN [Year] = 2002 THEN [Selling value] END),
        [S2003] = SUM(CASE WHEN [Year] = 2003 THEN [Selling value] END)
FROM    ItemPrices
GROUP BY [Item ID] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T15:11:58.840

使用 GROUP BY ItemID，并在每个结果列上使用聚合函数 SUM(isnull(value,0))。

# asp.net-mvc-4 - SignalR 和 Ninject - Ninject 不返回路由的控制器

> ID：15274308
> 
> 赞同：1
> 
> 时间：2013-03-07T14:53:27.557
> 
> 标签：asp.net-mvc-4, ninject, signalr

我正在尝试在使用 Ninject 进行 DI 的现有 ASP.Net MVC 4 项目中设置 SignalR，但是每当我尝试访问 SignalR 默认路由（我已确认在路由表中）时，我都会收到以下异常抛出：

```
Exception message: The IControllerFactory 'Infrastructure.NinjectControllerFactory' did not return a controller for the name 'signalr'. 
```

我尝试通过以下方式将 Ninject 内核注入 SignalR：

```
GlobalHost.DependencyResolver = new NinjectSignalRDependencyResolver(ninjectKernel); 
```

我正在通过以下方式设置默认路由：

```
RouteTable.Routes.MapHubs(); 
```

在 Global.asax Application_Start

我似乎找不到任何方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:08:02.640

好的，我自己解决了 - 这不是 ninject 问题，而是路由顺序问题。

我需要 ~/signalr 路由在路由表顺序中更高，这意味着移动 RouteTable.Routes.MapHubs(); 进入我的 Application_Start 顶部，在 RegisterRoutes 调用上方。

# wcf - 间歇性 WCF 连接（没有端点 ..）错误

> ID：15274309
> 
> 赞同：2
> 
> 时间：2013-03-07T14:53:31.473
> 
> 标签：wcf, nettcpbinding, basichttpbinding

我有一个托管在 IIS (IIS 8) 中的 WCF 服务。该服务处于 Per Call Mode 并且并发模式设置为 Multiple。我有大约 600 个客户连接到它。它有一个 HTTPS 端点。它还有一个 net.tcp 端点，但未使用。除了我的一些客户之外，并非所有客户都面临着一个非常奇怪的问题。客户端使用一段时间后停止工作。我有错误记录，在客户端我看到错误说

```
There was no end point listening at ... 
```

服务器或服务上没有错误。该服务似乎运行良好。我可以从浏览器浏览到服务页面，其他客户端仍然可以使用该服务。运行跟踪也无济于事。我已经花了足够的时间试图弄清楚但没有运气。此外，在同一台计算机上，只需重新启动客户端似乎就可以工作并连接到相同的服务。客户端是一个 WinForms 应用程序。我在我的机器上执行了 DNS 刷新，即使这样也无济于事。

可能的问题是什么？我想到的事情是客户端可能无法解析名称，但这与它首先连接是矛盾的。该服务可能已关闭，但我的其他客户仍在使用相同的服务，他们没有遇到问题。这可能是客户端机器的问题，因为它使用 Win XP，但我不确定这是否会导致问题。或者它可能是由于间歇性互联网连接而导致的问题。

有没有人遇到过这样的问题？一些见解将非常有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:12:23.603

IIS 一次只能为有限数量的客户端提供服务。然后它将其他请求放入队列中。那个队列也是有限的。当该队列填满时，IIS 返回一个 500 错误，这被解释为“没有端点正在监听...”

你应该试试这段代码。

```
public void Main()
{
    while(thereIsStillThisProblem)
    {
        var pc = new Pc();
        pc.OS = new Windows2012();
        pc.Start();
        pc.Software.Add(new ServiceHost());
    }
} 
```

[http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/iis/64e30660-d2f0-4e90-98cc-1652214a2b93.mspx](http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/iis/64e30660-d2f0-4e90-98cc-1652214a2b93.mspx)

编辑：请记住，如果您使用的是 .net 4.5，您还可以做一件事。我会让[Jon Skeet 解释一下。](https://stackoverflow.com/a/12655008/1808494)

# c++ - 使用 Boost::asio 的 TCP/IP 客户端

> ID：15274313
> 
> 赞同：1
> 
> 时间：2013-03-07T14:53:43.117
> 
> 标签：c++, multithreading, tcp, boost-asio, tcpclient

我正在尝试使用 boost 库制作 TCP/IP 客户端。这就是我设计程序的方式

->读取线程从服务器读取

-> 写线程发送命令

-> 解析从服务器读取的数据的函数

```
int main()
{

TCP_IP_Connection router;
router.Create_Socket();
boost::thread_group t;
t.create_thread(boost::bind(&TCP_IP_Connection::get_status,&router,'i'));
t.create_thread(boost::bind(&TCP_IP_Connection::readTCP,&router));
std::string reply="\nend of main()";
std::cout<<reply;
t.join_all();
return 0;
}

void TCP_IP_Connection::Create_Socket()
{

tcp::resolver resolver(_io);//resolve into TCP endpoint
tcp::resolver::query query(routerip,rport);

tcp::resolver::iterator endpoint_iterator = resolver.resolve(query); 
//list of endpoints
tcp::resolver::iterator end;
boost::asio::streambuf b;
_socket = new tcp::socket(_io); //create socket
boost::system::error_code error= boost::asio::error::host_not_found;

try
 {
   while (error && endpoint_iterator != end) //if error go to next endpoint
  {
   _socket->close();
   _socket->connect(*endpoint_iterator++, error);
  }

if(error)
  throw boost::system::system_error(error);

 //else the router is connected
}

catch (std::exception& e)
 {
   std::cerr << e.what() << std::endl;
 }
}

void TCP_IP_Connection::get_status(char p)

{
    try
    {
     if(p=='i')
     _socket->send(boost::asio::buffer("llist\n\n"));
                  //sending command for input command
     else
        _socket->send(boost::asio::buffer(" sspo l1\n\n")); 
                  //sending signal presence for output command
    }
catch (std::exception& e)
 {
   std::cerr << e.what() << std::endl;
 }

}

void TCP_IP_Connection::readTCP()

 {

   this->len=0;
   boost::system::error_code error= boost::asio::error::host_not_found;
   try
   {    //loop reading all values from router
       while(1)
      {

       //wait for reply??

     _socket->async_read_some(boost::asio::buffer(this-
        >reply,sizeof(this>reply)),boost::bind(&TCP_IP_Connection::dataProcess,this,
  boost::asio::placeholders::error,boost::asio::placeholders::bytes_transferred));

    _io.run();

    if(error==boost::asio::error::eof) //connection closed by router
       std::cout<<"connection closed by router";
       }

    }

  catch (std::exception& e)
   {
   std::cerr << e.what() << std::endl;
   }

}

 void TCP_IP_Connection::dataProcess(const boost::system::error_code &er,size_t l) 
{
if(!er)
{
if(l>0)
{
for(int i=0;i<l;i++)
{
this->data[i]=this->reply[i];
             //if(data[i]="\n")
 std::cout<<this->data[i];
 }
 }
 }
} 
```

当我运行代码时，我得到的只是服务器的响应，表明客户端已连接，而不是我发送的命令的响应。但是当我尝试调试时，我会根据需要得到完整的输出。我在线程或 TCP 读取缓冲区中做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:59:27.637

您的代码正在创建 2 个线程。创建的第一个线程有一个名为 get_status 的线程函数。在 get_status 中，没有循环，因此它只执行一次代码。它似乎正在向服务器发送字符串“llist\n\n”，这是同步完成的。之后，它不会发送任何其他内容。那么，您是否希望服务器在发送第一个命令后发送其他数据？在第二个线程中的代码执行之前，第一个线程中的代码可能会或可能不会完全执行。

创建了第二个线程，该线程似乎负责处理来自套接字的信息。while(1) 有一个无限循环，但没有退出循环的逻辑，因此除非抛出异常，否则它将永远运行。我相信 async_read_some 方法在缓冲区满之前不会导致任何数据传输。缓冲区的大小由回复的大小指定。这可能是您的问题，因为在收到回复长度指定的所有数据之前，不会调用 dataProcess 方法。在许多协议中，前 4 个字节指定消息的长度。因此，如果您正在处理可变长度消息，那么您的代码将必须考虑到这一点。

值得一提的另一项是 readTCP 中调用 _io.Run 的循环代码并不是真正需要的。您可以将工作对象添加到您的 io_service 对象，以使其连续运行。例如：

```
void SSLSocket::InitAsynchIO()
{
   // This method is responsible for initiating asynch i/o.
   boost::system::error_code Err;
   string s;
   stringstream ss;
   //
   try
   {
      ss << "SSLSocket::InitAsynchIO: Worker thread - " << Logger::NumberToString(boost::this_thread::get_id()) << " started.\n";
      Log.LogString(ss.str(), LogInfo);
      // Enable the handlers for asynch i/o.  The thread will hang here until the stop method has been called or an error occurs.
      // Add a work object so the thread will be dedicated to handling asynch i/o.
      boost::asio::io_service::work work(*IOService);
      IOService->run();
      Log.LogString("SSLSocket::InitAsynchIO: receive worker thread done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::InitAsynchIO: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
} 
```

可以让您的第一个线程执行您的第一次异步读取。您的读取处理程序可以设置为调用自身以处理下一条消息。例如：

```
void SSLSocket::HandleRead(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called to process an incomming message.
   //
   std::stringstream ss;
   int ByteCount;
   try
   {
       ss << "SSLSocket::HandleRead: From worker thread " << boost::this_thread::get_id() << ".\n";
      Log.LogString(ss.str(), LogInfo);
      // Set to exit this thread if the user is done.
      if (!ReqAlive)
      {
         // IOService->stop();
         return;
      }
      if (!error)
      {
         // Get the number of bytes in the message.
         if (bytesTransferred == 4)
         {
            ByteCount = BytesToInt(pDataBuf);
         }
         else
         {
            // Call the C# callback method that will handle the message.
            ss << "SSLSocket::HandleRead: From worker thread " << boost::this_thread::get_id() << "; # bytes transferred = " << bytesTransferred << ".\n";
            Log.LogString(ss.str(), LogDebug2);
            Log.LogBuf(pDataBuf, (int)bytesTransferred, true, LogDebug3);
            Log.LogString("SSLSocket::HandleRead: sending msg to the C# client.\n\n", LogDebug2);
            CallbackFunction(this, bytesTransferred, (void*)pDataBuf);
            // Prepare to read in the next message length.
            ByteCount = MsgLenBytes;
         }
         pDataBuf = BufMang.GetPtr(ByteCount);
         boost::system::error_code Err;
         // boost::asio::async_read(pSocket, boost::asio::buffer(pDataBuf, ByteCount), boost::bind(&SSLSocket::HandleRead,
           //  this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         Locking CodeLock(SocketLock); // Single thread the code.
         boost::asio::async_read(*pSocket, boost::asio::buffer(pDataBuf, ByteCount), boost::bind(&SSLSocket::HandleRead,
            this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::read(pSocket, boost::asio::buffer(reply_), boost::asio::transfer_exactly(ByteCount), Err);
      }
      else
      {
         Log.LogString("SSLSocket::HandleRead failed: " + error.message() + "\n", LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleRead: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
} 
```

如果以上都没有帮助，那么放入一些调试代码，将所有调用记录到日志文件中，以便您可以看到发生了什么。您可能还需要考虑下载 Wire Shark 以查看哪些数据流出和流入。

# php - Mysql 和 PhP - Mysql 查询不起作用

> ID：15274318
> 
> 赞同：-5
> 
> 时间：2013-03-07T14:53:46.747
> 
> 标签：php, mysql

**我有一些错误：md100sms.php 没有在硬币列中将硬币添加到数据库**

```
<?PHP
  if(isset($_GET['do']) && $_GET['do']=="aktivieren" && isset($_GET['hash']) && !empty($_GET['hash'])) {
    echo '<div class="main main_top">
    Information
</div>
<div class="main main_content">';
    if(strlen($_GET['hash'])==32 && $_GET['hash']!=1 && checkAnum($_GET['hash'])) {
      $cmdHash = "SELECT id,web_aktiviert FROM account.account WHERE web_aktiviert='".$_GET['hash']."' AND web_aktiviert!='1' LIMIT 1;";
      $qryHash = mysql_query($cmdHash,$sqlServ);

      if(mysql_num_rows($qryHash)) {

        $getData = mysql_fetch_object($qryHash);
        $userUpdate = "UPDATE account.account SET web_aktiviert='1',status='OK' WHERE id='".$getData->id."' LIMIT 1;";
        $updateQry = mysql_query($userUpdate,$sqlServ);

        if($updateQry) {
          echo'Ihr Account wurde erfolgreich aktiviert. Sie k&ouml;nnen sich nun einloggen.';
          echo'<meta http-equiv="refresh" content="1; URL=index.php?s=login"> ';
        }
        else {
          echo'Query fehlgeschlagen. Bitte einen Admin kontaktieren!';
        }

      }
      else {
        echo'Es wurde kein passender Eintrag gefunden. Aktivierung fehlgeschlagen.';
      }

    }
    else {
      echo'Kein valider Hash!';
    }
    echo '</div>
<div class="main main_bottom">
</div>';
  }

  if(!empty($_SESSION['user_id'])) 
  {
    echo '<div id="con-top" class="post-top1">Login</div>
<div id="con-mid">
    ';
    echo'<ul style="margin-top:0;">';
    if($_SESSION['user_admin']>0) {
      echo'<li><a href="index.php?s=admin">Administrar</a></li>';
    }
    if($_SESSION['user_admin']>=0) {
      echo'<a href="index.php?s=itemshop"><input type="submit" class="btn" value="ItemShop" name="submit"></a>&nbsp;&nbsp;';
      echo'<a href="index.php?s=spenden"><input type="submit" class="btn" value="Comprar Moedas" name="submit"></a>&nbsp;&nbsp;';
      echo'<a href="index.php?s=charaktere"><input type="submit" class="btn" value="Personagens" name="submit"></a>&nbsp;&nbsp;';
      echo'<a href="index.php?s=passwort"><input type="submit" class="btn" value="Alterar Dados" name="submit"></a>&nbsp;&nbsp;';
        echo'<a href="index.php?s=Vote"><input type="submit" class="btn" value="Votar no Servidor" name="submit"></a>&nbsp;&nbsp;';
    }    
    $cmdStats = "SELECT SUM( player.playtime ) AS ges_spielzeit, COUNT( * ) AS ges_chars, player_index.empire
    FROM player.player
    INNER JOIN player.player_index ON player_index.id = player.account_id
    WHERE player.account_id = '".$_SESSION['user_id']."'
    LIMIT 1";

    $qryStats = mysql_query($cmdStats,$sqlServ);
    $getStats = mysql_fetch_object($qryStats);

    if(!empty($getStats->empire)) {
      $reich = '<img src="img/reiche/'.$getStats->empire.'.png" title="Reino" alt="Reino"/>';
    }
    else {
      $reich='Conta sem reino.';
    }

    echo'<table>
      <tr>
        <th class="topLine">ID:</th>
        <td class="tdunkel">'.$_SESSION['user_name'].'</td>
      </tr>
      <tr>
        <th class="topLine">Reino:</th>
        <td class="thell">'.$reich.'</td>
      </tr>
      <tr>
        <th class="topLine">Personagens:</th>
        <td class="tdunkel">'.$getStats->ges_chars.'</td>
      </tr>
      <tr>
        <th class="topLine">Tempo de Jogo:</th>
        <td class="thell">'.$getStats->ges_spielzeit.' Minutos</td>
      </tr>';
    $sqlAcc = "SELECT account.social_id AS loeschcode, safebox.password AS lagerpw
    FROM account.account 
    LEFT JOIN player.safebox 
    ON account.id=safebox.account_id 
    WHERE account.id='".$_SESSION['user_id']."'";

    $qryAcc = mysql_query($sqlAcc) or die(mysql_error());
    $getAcc = mysql_fetch_object($qryAcc);

    if(empty($getAcc->lagerpw)) $getAcc->lagerpw = '000000';

      echo'<tr style="margin-bottom:0;">
        <th class="topLine">Codigo Personagem:</th>
        <td class="tdunkel">'.$getAcc->loeschcode.'</td>
      </tr>
    </table>
</div>
<div id="con-bot"></div>    </div>';
  }
  else 
  {
  ?>
<div id="con-top" class="post-top1">Entrar</div>
<div id="con-mid">
<form action="index.php?s=login" method="POST" class="login">
      <input type="text" class="bar" name="userid" onFocus="if(this.value=='Oseuid') this.value=''" onBlur="if(this.value=='')this.value='Oseuid'" value="Oseuid">
      <input type="password" class="bar" name="userpass" onFocus="if(this.value=='Passwortpasswort') this.value=''" onBlur="if(this.value=='')this.value='Passwortpasswort'" value="Passwortpasswort">
      <input type="submit" class="btn" value="LOGIN" name="submit">
      <span><br>
       <a href="index.php?s=register">Criar um nova conta!</a><br />
       <a href="index.php?s=lostpw">Esqueceste a senha?</a>
      </span>
    </form>
</div>
<div id="con-bot"></div>    </div>
  <?PHP
  }
?> 
```

**md100sms.php**

```
<div id="con-top" class="post-top1">Moedas Automaticas - 100 Moedas</div>
<div id="con-mid">

<font color="green">Moedas compradas com sucesso.<br>
Foram adicionadas <font color="white">100</font> Moedas à tua conta.</font>
<?PHP
          $sqlCmd = sprintf("UPDATE account.account SET coins = coins +100 WHERE id = '.$_SESSION['user_id'].'")
  ?>

</div>
<div id="con-bot"></div></div> 
```

当我转到 md100sms.php 时，页面显示：`Successful added coins, 100 coins.`

但是当我在数据库中查看我的帐户时，没有添加任何硬币。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:56:04.580

尝试添加`session_start();`到页面顶部。

另外，请检查您在查询中的报价。尝试：

```
$sqlCmd = sprintf("UPDATE account.account SET coins = coins + 100 WHERE id = '".$_SESSION['user_id']."'"); 
```

# objective-c - 将元素从一个数组复制到另一个数组

> ID：15274319
> 
> 赞同：0
> 
> 时间：2013-03-07T14:53:47.053
> 
> 标签：objective-c, nsarray

我喜欢将数组 A 元素复制到具有特定的数组 B 元素

例子 ：

```
array A=[0123]        
array  b=[1111111111111111111] 
```

我想要`b = [1111111101231111111]

```
int ip=0;                        
[b addObjectsFromArray:[A objectsAtIndexes:[NSIndexSetindexSetWithIndexesInRange:NSMakeRange(ip, 10)]]]; 
```

我知道如何复制数组元素，我想知道如何将数组 b 中从 9 到 13 开始的对象替换为数组 a 元素，任何人都可以给我提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:06:02.330

```
 NSArray *a = @[@0,@1,@2,@3];
    NSArray *b = @[@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1,@1];

    NSMutableArray *c = [b mutableCopy];
    // The range here is index->8 (9th object) and length->4
    [c replaceObjectsInRange:NSMakeRange(8,4) withObjectsFromArray:a]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:01:11.897

您需要创建数组的可变副本并修改它们：

```
NSMutableArray* mutableArray = [yourArray mutableCopy]; 
```

然后您将访问此方法：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

# web-services - Nancy C# 模拟 WS

> ID：15274321
> 
> 赞同：0
> 
> 时间：2013-03-07T14:53:54.447
> 
> 标签：web-services, simulate, nancy

我正在尝试将 Nancy C# 框架用于在内部控制目标上运行的 MVC 应用程序（例如，读取串行端口并发送响应），而无需安装 IIS 或安装完整的 WS 结构。 ..

但是我如何模拟 WS utilziando Nancy ... 示例： `Send http://localhost:1234/comandos`并理解它并返回 True 或 False ...

另一件事，在这种情况下如何使用用户身份验证？我的问题有替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:03:31.770

我建议您先通读[Nancy 文档](https://github.com/NancyFx/Nancy/wiki/Documentation)。

您可能需要运行一个[自托管的 Nancy 应用程序](http://theburningmonk.com/2011/09/nancy-self-hosting/)。

[您可以在文档](https://github.com/NancyFx/Nancy/wiki/Documentation)中阅读有关身份验证的信息。

# html - 奇怪的白色像素边框 - IE 9

> ID：15274327
> 
> 赞同：4
> 
> 时间：2013-03-07T14:54:21.493
> 
> 标签：html, css, internet-explorer

我在 IE-9 上遇到了边界半径的问题

![在此处输入图像描述](../Images/ba3f73233d4b5c07e5b5e0d2ca5331a8.png)

如您所见，它在左边框上创建了一些白色像素。任何想法为什么会这样？

**这只发生在 IE 9 上，**所有其他浏览器都可以

这是标记：

```
 <ul class="tags clearfix">
                        <li>
                            <a href="javascript:void(0)">Etiqueta Uno</a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">Otra etiqueta</a>
                        </li>
                    </ul><!-- tags --> 
```

这是CSS：

```
#article_sidebar ul.tags li {
    background: #000000;
    list-style: none;
    float: left;
    margin-right: 4px;
    padding: 0px 18px 0px 19px;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    line-height: 20px;
    margin-bottom: 4px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:21:20.647

@fxg 你为什么不也尝试制作一个**IE-Only Stylesheet**。你可以参考[这个](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)来制作一个样式表，它只针对 IE，你可以在那个样式表中给出

```
li{
    border: 0 none;
} 
```

希望，这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:18:43.603

您可以尝试`overflow: hidden;`为`li`s 和/或`outline: none;`为`a`s 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:11:38.093

如果我不得不猜测，我会说这是一个舍入错误。这可能在某些条件下发生，例如当计算值是非终止浮点值（即 - 3.3333333...）时。根据浏览器如何进行舍入，这可能会产生视觉错误，例如您所看到的。

看看你的填充值。注意你的 padding-right 是 18px，右侧没有这个问题，但是你的 padding-left 是 19px？尝试将您的 padding-left 更改为 18px 并查看是否可以解决问题。

另外，尝试将您的边框半径值更改为稍大一些的值，例如 3px 或 4px，看看它是否会发生任何变化。

另外，请确保您没有意外放大。`ctrl`您可以通过按+来确保重置浏览器的缩放`0`。

# java - 如何在java中获取打印机列表？

> ID：15274328
> 
> 赞同：1
> 
> 时间：2013-03-07T14:54:22.217
> 
> 标签：java, printers

如何在 中显示设备上安装的所有打印机`Java`？

到目前为止找到我使用的打印机：

```
 PrintUtility.findPrintService(printer); //Selects any printer with the name provided
    PrintService[] services = PrintServiceLookup.lookupPrintServices(psInFormat, null);
    //System.out.println("Printers avialiable are " + services);
    System.out.println("Printer Selected " + services[Printerinx]); 
```

但我希望在控制台中显示所有打印机。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:12:57.980

尝试

```
PrintServiceLookup.lookupPrintServices(null, null); 
```

这将返回 PrintService[]，其中填充了系统可用的所有打印机。

# c# - 在 .Net 4.5 中使用 async/await 编写多线程方法

> ID：15274332
> 
> 赞同：13
> 
> 时间：2013-03-07T14:54:28.363
> 
> 标签：c#, .net, asynchronous

我有一个小问题。

我承认在 .Net 4.5 之前我并没有太多使用多线程，但是有了新`async/await`功能，我决定试一试。我开始尝试它，一切似乎都很好，但我无法在网络上的任何地方找到解决我的“问题”的方法。

所以大家解释一下怎么`await`可以用在.Net平台新改造的方法上（例如`WriteAsync()`，`ReadAsync()`等等……），但是如果我想用在我自己的方法上呢？例如，假设我正在执行一项极其昂贵的计算，并希望我的所有 4 个内核都在处理它。我会有类似的东西：

```
async Task DoLotsOfWork<T>(T[] data, int start, int end)
{
    //Do very expensive work
} 
```

但由于我在那里没有`await`关键字，因此该方法仅被视为同步方法。我想从外部调用它 4 次，以便它可以在我的所有内核上运行，同时我向用户显示一些敏感的东西（例如“请稍候......”）。我能想出的唯一解决方案是`await Task.Yield();`在方法的开头添加一个。像这样的东西：

```
async Task DoLotsOfWork<T>(T[] data, int start, int end)
{
    await Task.Yield();
    //Do very expensive work
} 
```

在这种情况下，该方法的行为将与我预期的一样。但是有没有更好的解决方案呢？我觉得它应该比完全编写那行代码更容易/更明智。我知道我可以创建一个`Task/Thread`对象并调用该`Start()`方法，但这需要更多的工作。我只是认为有了新的 async/await 功能，这种事情会更容易。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T15:02:27.600

因此，首先您需要一种同步完成非常昂贵的工作的方法：

```
public void DoLotsOfWork<T>(T[] data, int start, int end) 
{
    Thread.Sleep(5000);//placeholder for real work
} 
```

然后我们可以`Task.Run`在一个线程池线程中使用这个工作的多个实例来启动。

```
List<Task> tasks = new List<Task>();
for(int i = 0; i < 4; i++)
{
    tasks.Add(Task.Run(()=>DoLotsOfWork(data, start, end));
} 
```

然后我们可以进行非阻塞等待，直到所有这些都完成：

```
await Task.WhenAll(tasks); 
```

# powershell - 连接分隔符被忽略

> ID：15274336
> 
> 赞同：1
> 
> 时间：2013-03-07T14:54:45.257
> 
> 标签：powershell, powershell-3.0

我正在尝试在 PowerShell 中创建一个数组，然后将其加入单个字符串。这是我的代码：

```
$solutionRoot = "c:\temp"
$libraryPaths = @(
    $solutionRoot + "\a",
    $solutionRoot + "\b"
)

$joined = ($libraryPaths -join ",")
$joined

$joined2 = [string]::Join(",", $libraryPaths)
$joined2 
```

但是，输出是：

```
c:\temp\a c:\temp\b
c:\temp\a c:\temp\b 
```

并且我的路径之间没有分隔符（所需的输出是`c:\temp\a,c:\temp\b`）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:04:37.677

`$libraryPaths`您并没有真正开始使用数组。试试这个：

```
$solutionRoot = "c:\temp"
$libraryPaths = @(
    ($solutionRoot + "\a"),
    ($solutionRoot + "\b")
)

$joined = ($libraryPaths -join ",")
$joined

$joined2 = [string]::Join(",", $libraryPaths)
$joined2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:20:20.153

要不就：

```
$libraryPaths = @(
    "$solutionRoot\a",
    "$solutionRoot\b"
) 
```

# ios - iOS 视图对象属性与操作方法

> ID：15274337
> 
> 赞同：1
> 
> 时间：2013-03-07T14:54:49.853
> 
> 标签：ios, objective-c, xcode

只需要对视图对象进行一些说明。如果我在这里提到的任何事情不清楚，请告诉我。

只是几个问题：

为诸如标签之类的对象创建属性究竟做了什么？

为什么我们不需要为我们创建的某些按钮创建属性？

为什么我们必须为某些视图对象创建属性？我问这个是因为我创建了一个开关，但我想使用它的值发送到我的模型，但我必须创建一个属性才能使其工作。这与开关的getter和setter有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:03:27.400

> 为诸如标签之类的对象创建属性究竟做了什么？

当您说“创建属性”时，我假设您的意思是`IBOutlet`在视图控制器中创建一个属性以引用相关标签。目的是允许您以编程方式与该标签进行交互（例如更改它显示的文本等）。如果您不打算与该标签进行交互（例如，它只是一个提示），则`IBOutlet`不需要。但是，如果您需要与它交互（例如，根据其他地方的一些其他用户输入更改它的值），那么您可能有一个`IBOutlet`.

> 为什么我们不需要为我们创建的某些按钮创建属性？

您只需要为`IBOutlet`您将以编程方式与之交互的那些对象创建引用（例如更改按钮上的文本，检索开关的值），否则您不需要`IBOutlet`属性。对于按钮，您可能有一个`IBAction`，或者如果使用 segue，您甚至可能不需要它。您通常根本不需要`IBOutlet`按钮的属性引用（但如果出于任何原因需要它，您*可以拥有一个）。*

但简而言之，您只需`IBOutlet`为将在您自己的代码中与之交互的那些控件创建属性引用。

* * *

> 为什么我们必须为某些视图对象创建属性？我问这个是因为我创建了一个开关，但我想使用它的值发送到我的模型，但我必须创建一个属性才能使其工作。这与开关的getter和setter有关吗？

如果你想`UISwitch`从一些随机方法中访问状态，那么，是的，getter 方法会让你很容易做到这一点。并且通过定义一个属性，会为你合成getter方法。

另一方面，如果您有一个`IBAction`与“值更改”事件相关联的`UISwitch`，您可以从`sender`参数访问它而无需额外的属性。

```
- (IBAction)changedSwitchValue:(id)sender
{
    UISwitch *switchControl = sender;

    if (switchControl.on)
        NSLog(@"Switch is on");
    else
        NSLog(@"Switch is off");
} 
```

但是如果你想从其他方法访问`on`属性，拥有一个属性引用是非常有用的。`UISwitch``IBOutlet`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:12:25.813

> 为诸如标签之类的对象创建属性究竟做了什么？

属性用于为实例变量生成 getter 和 setter 您可以手动实现相同的访问器。如果您正在谈论，`IBOutlet`那么它是 GUI 对象和代码之间交互的方式（您可以访问对象的属性），`IBOutlet`成为用户界面上添加的对象与代码之间的连接

> 为什么我们不需要为我们创建的某些按钮创建属性？

有时，当您在不使用 .xib 或 GUI 的情况下以编程方式创建对象时，您不需要创建对象，`IBOutlet`而是可以只使用类中没有插座的属性来访问对象的属性，但在这种情况下，您将拥有手动将所有方法设置为对象的选择器，例如在`UIButton`.

[你可以在这里找到很好的参考资料来了解它在实践中是如何工作的](http://cocoadevcentral.com/d/learn_objectivec/)

# grid - 使用 In-Cell 和 Inline 的 Kendo UI 网格

> ID：15274340
> 
> 赞同：0
> 
> 时间：2013-03-07T14:54:59.600
> 
> 标签：grid, kendo-ui, edit

我一直在无休止地寻找这个答案，并有一种不支持的感觉。但我想在放弃之前仔细检查一下。

我有一个 Kendo Grid，如果列 downs 没有值并且想要内联编辑该列确实具有值的行，我希望在其中打开 incell 编辑。

如果这是可能的，我该如何实施。

这是我厌倦的，尝试网格默认为内联，但从未让单元格编辑工作。尝试网格默认为单元格，在编辑事件中，我检查该列是否有值，如果有，我关闭单元格。我添加了一个自定义命令按钮，并尝试在单击事件的行上启用编辑模式。但似乎你不能这样做。

这是我的点击事件所做的......

```
editClick = function(e) {
    var grid = $("#grid").data("kendoGrid");
    var row = grid.dataItem($(e.currentTarget).closest("tr"));
    grid.editRow(row); 
}; 
```

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:31:08.073

这**不受支持**- 网格无法在不同的编辑模式之间动态切换，而且解决方法有点不可能。

# puppet - 将 vagrant 共享文件夹与 puppet 进行符号链接

> ID：15274343
> 
> 赞同：2
> 
> 时间：2013-03-07T14:55:02.473
> 
> 标签：puppet, vagrant

我需要在带有 vagrant 的旧服务器上重新创建设置，我们在主目录中提供站点。无法在 vagrant 中将共享文件夹设置为 /home，因为这将删除 vagrant 用户。因此，我想创建一个共享文件夹，它实际上是指向主目录的符号链接。

如果我在我的 Vagrantfile 中创建这样的共享目录：

```
config.vm.share_folder "v-www", "/webroot", "/Users/me/sites/vagrant" 
```

然后尝试使用 puppet 覆盖此目录创建一个符号链接，如下所示：

```
class misc {
  file { '/webroot':
   ensure => 'link',
   target => '/home',
   force => true,     
  }
} 
```

它抛出一个错误：

> 错误：无法删除现有文件
> 
> 错误：/Stage[main]/Misc/File[/webroot]/ensure：从目录更改为链接失败：无法删除现有文件

当我登录该框并手动尝试此操作时，这也会失败，因为我实际上无法删除 webroot - 我认为这是因为它创建为某种 nfs 共享或类似的东西。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:51:10.487

Try adding a replace:

```
class misc {
  file { '/webroot':
   ensure  => 'link',
   target  => '/home',
   force   => true,     
   replace => true,
  }
} 
```

# android - 从 ListFrament 开始

> ID：15274344
> 
> 赞同：-1
> 
> 时间：2013-03-07T14:55:04.413
> 
> 标签：android, android-listfragment

我一直在开发我的第一个 Android 应用程序。我确切地知道我想要什么，但不知道如何开发它。我已经知道我必须使用`ListFragment`. 所以，我在互联网上搜索教程和指南。但是，我不理解它100％。我还阅读了 Android 开发人员指南。

所以，我请你们帮助我开发我的第一个应用程序。我不要求大代码。只是一个简单的入门代码供我理解`ListFragment`。此外，允许链接到好的教程。

谢谢！

PS：我想要`ListFragment`来自 XML 文件的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:58:44.987

首先欢迎来到安卓社区。

使用片段创建您的第一个应用程序是非常重要的第一步。您可能想从“Hello world”教程开始，并尝试首先创建所有基本布局。

确保您阅读了官方 Android 开发者网站上的[应用程序基础知识](http://developer.android.com/guide/components/fundamentals.html)（[尤其是关于活动](http://developer.android.com/guide/components/activities.html)的），这个网站现在对您来说是黄金。

如果您真的想从片段开始，请确保您已阅读[片段部分](http://developer.android.com/guide/components/fragments.html)

现在对于非常酷的示例，实际上最好的做法是安装 Eclipse 并安装开始开发您的第一个应用程序所需的所有其他内容。

正如[这里所解释的](http://developer.android.com/training/basics/firstapp/index.html)

现在带有 Android 插件的 Eclipse 有一个非常酷的向导，它实际上创建了一个带有列表和细节片段的示例！

![在此处输入图像描述](../Images/d54d107f10b2edf241d81d52dc7b0cb1.png)

# java - Android FLAG_ACTIVITY_NEW_TASK 不工作

> ID：15274347
> 
> 赞同：0
> 
> 时间：2013-03-07T14:55:20.383
> 
> 标签：java, android

我在自定义 onClick 侦听器中对 Intent 调用 startActivity() 时遇到问题。代码编译得很好，但是当它到达执行的那个点时，我得到一个 nullPointerException。

**代码**

```
private static class ProverbAdapter extends ArrayAdapter<String> {
    MainActivity ma;
    public ProverbAdapter(Context context, int layout, int resId, String[] items) {
        super(context, layout, resId, items);
        this.ma = new MainActivity();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        Context context = getContext();
        if(row == null) {
            row = LayoutInflater.from(context).inflate(R.layout.proverb_layout, parent, false);
        }

        String item = getItem(position);
        TextView proverbDate = (TextView)row.findViewById(R.id.proverb_date);
        TextView proverbText = (TextView)row.findViewById(R.id.proverb_content);
        String[] data = item.split("----");
        proverbDate.setText(data[0]);
        proverbText.setText(data[1]);

        ImageButton emailButton = (ImageButton)row.findViewById(R.id.emailButton);
        ImageButton twitterButton = (ImageButton)row.findViewById(R.id.twitterButton);
        ImageButton facebookButton = (ImageButton)row.findViewById(R.id.facebookButton);

        emailButton.setOnClickListener(this.ma.new ProverbOnClickListener(data[0], data[1], "email", context));
        twitterButton.setOnClickListener(this.ma.new ProverbOnClickListener(data[0], data[1], "twitter", context));
        facebookButton.setOnClickListener(this.ma.new ProverbOnClickListener(data[0], data[1], "facebook", context));

        return row;
    }
}

public class ProverbOnClickListener implements OnClickListener {

     String proverb_date, proverb_content, eventType;
     Context context;

     public ProverbOnClickListener(String proverb_date, String proverb_content, String eventType, Context context) {
          this.proverb_date = proverb_date;
          this.proverb_content = proverb_content;
          this.eventType = eventType;
          this.context = context;
     }

     @Override
     public void onClick(View v) {
         Toast.makeText(this.context, this.eventType + ": " + this.proverb_content, Toast.LENGTH_SHORT).show();
         if(this.eventType == "email") {
             Intent i = new Intent(Intent.ACTION_SEND);
                     i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
             i.setType("message/rfc822");
             i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"recipient@example.com"});
             i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
             i.putExtra(Intent.EXTRA_TEXT   , "body of email");
             try {
                 context.startActivity(Intent.createChooser(i, "Send mail..."));
             } catch (android.content.ActivityNotFoundException ex) {
                 Toast.makeText(this.context, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
             }
         }
     }

  } 
```

**例外**

> 致命异常：main android.util.AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

我按照编译器的建议添加了新标志，但它仍然因相同的错误而崩溃。

***** **编辑****** *****

 **在第一个响应中遵循建议后，我的适配器现在看起来像：

```
private static class ProverbAdapter extends ArrayAdapter<String> {
    Context context;
    public ProverbAdapter(Context context, int layout, int resId, String[] items) {
        super(context, layout, resId, items);
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if(row == null) {
            LayoutInflater li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = li.inflate(R.layout.proverb_layout, parent, false);
        }

        String item = getItem(position);
        TextView proverbDate = (TextView)row.findViewById(R.id.proverb_date);
        TextView proverbText = (TextView)row.findViewById(R.id.proverb_content);
        String[] data = item.split("----");
        proverbDate.setText(data[0]);
        proverbText.setText(data[1]);

        ImageButton emailButton = (ImageButton)row.findViewById(R.id.emailButton);
        ImageButton twitterButton = (ImageButton)row.findViewById(R.id.twitterButton);
        ImageButton facebookButton = (ImageButton)row.findViewById(R.id.facebookButton);

        emailButton.setOnClickListener(new ProverbOnClickListener(data[0], data[1], "email", context));
        twitterButton.setOnClickListener(new ProverbOnClickListener(data[0], data[1], "twitter", context));
        facebookButton.setOnClickListener(new ProverbOnClickListener(data[0], data[1], "facebook", context));

        return row;
    }
} 
```

但是我收到一个编译错误。

> 无法访问 MainActivity 的封闭实例类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:15:26.100

尝试一些修改

```
this.ma = new MainActivity(); //it is wrong 
```

不要实例化 Activity

试试这样

```
 Context context;
    public ProverbAdapter(Context context, int layout, int resId, String[] items) {
        super(context, layout, resId, items);
       this.context=context;
    } 
```

在需要上下文的地方使用这个变量上下文**

# javascript - 使用 javascript 的框架

> ID：15274348
> 
> 赞同：-4
> 
> 时间：2013-03-07T14:55:23.263
> 
> 标签：javascript, html, frame, frames

我的代码有什么问题？

第一帧

```
<script type="text/javascript">
var Clicks = 0 ;
function AddClick(){
Clicks = Clicks + 1;
document.getElementById('CountedClicks').innerHTML =  Clicks ;
}
localStorage.setItem('Clicks');
</script>
</head>
Fish and Chips
<p align="right"> <input Type="BUTTON" VALUE="Order" onclick=" AddClick()"></p> 
```

帧 2

```
<head>
<script type="text/javascript">
var loc = "";

function go() {
window.location.href = loc;
}
function set_loc(theURL) {
loc = theURL;
}
window.onload = function() {
            div = document.getElementById("CountedClicks");
            div.innerHTML=localStorage.getItem('variable');
        }
</script>
</head>
    <body>
    <div id="container" style="background-color:#8A4117;height:30%;width:98%;borde-radius:15px" >
You have ordered <span id="CountedClicks">0 </span> items.<br>
<p align="right"><input type=submit name="Submit" value="Checkout" onchange="set_loc('pay.html');" /></a></p>
</div> 
```

我无法使用它计算来自另一个框架的单击按钮的数量。*不是我自己的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:57:25.743

您永远不会将任何数据写入本地存储。您无法获取不存在的项目。

# jsf - 将重复的组件添加到 JSF 面板网格

> ID：15274349
> 
> 赞同：1
> 
> 时间：2013-03-07T14:55:24.827
> 
> 标签：jsf, components, containers

我对 Java/JSF 开发（以前是大型机遗留系统）相当陌生，所以我希望有人能够让我知道我要问的问题是否可行以及如何去做。或者至少指出我正确的方向。

我正在尝试创建一个 portlet，我可以在其中一次又一次地添加相同的组件，最多 30 次。最终，这些组件背后的数据将在每个组件中都不同，但来自同一个数据库。到目前为止，我所做的是创建一个容器组件和一个按钮，该按钮调用一个方法来向容器中添加一些东西。如下所示：

```
<h:body>
      <h:form>
        <ice:panelGrid binding="#{simpleBean.containerComponent}"/>
        <br/>
        <ice:commandButton  value="add new section" action="#{simpleBean.addComponent}" />
       </h:form>
</h:body> 
```

我正在努力的是创建和渲染组件的支持 bean。目前我只是想创造任何重复的东西。最终的代码将比这更复杂。

```
private HtmlPanelGrid containerComponent;
private int i = 1;

public void addComponent() {

UIColumn uiColumn = new UIColumn();
uiColumn.setId("UIColumn_"+i);

HtmlOutputText htmlOutputText = new HtmlOutputText();
htmlOutputText.setId("HtmlOutputText_"+i);
htmlOutputText.setValue("HtmlOutputText_1_Value");

HtmlInputText htmlInputText = new HtmlInputText();
htmlInputText.setId("HtmlInputText_"+i);
htmlInputText.setValue("HtmlInputText_1_Value");

uiColumn.getChildren().add(htmlOutputText);
uiColumn.getChildren().add(htmlInputText);

if (containerComponent == null) {
    containerComponent = new HtmlPanelGrid();
}

containerComponent.getChildren().add(uiColumn);

i++;
} 
```

第一次单击按钮时，我可以获取代码以呈现某些内容，但随后没有任何反应。在理想情况下，我会在屏幕上显示 30 个相同的组件。

任何人都可以提供任何建议吗？

先感谢您。

克里斯

# ember.js - Ember 数据访问应用程序初始化

> ID：15274350
> 
> 赞同：0
> 
> 时间：2013-03-07T14:55:25.590
> 
> 标签：ember.js

目前我真的很沮丧。我将尝试用我的数据库的一些数据填充表格。因此我有一个控制器和一个视图。

```
App.TableController.extend({
   content: [],
   contentBinding:'App.incidient.content'
  })
App.TableView = Ember.CollectionView.extend({
  tagName: 'tbody',
  itemViewClass: Ember.View.extend({
  templateName: 'table'
}) 
```

我的 html 代码如下所示：

```
<div class="row-fluid">
<table class="table table-striped">
<thead>
        <tr>
            <th>
              Title
            </th>
            <th>
              Customer
            </th>
            <th>
              Machine
            </th>
            <th>
              Priortity
            </th>
            <th>
              Status
            </th>               
        </tr>
        <thead>
  {{view App.TableView}}
</table>
 </div>
</script>

<script type="text/x-handlebars" data-template-name="table">
  {{#each item in content}}
            <td> 
               {{view item.incidient.title}}
            </td>
            <td> 
              {{view item.incidient.customer}}
            </td>
            <td> 
              {{view item.incidient.machine}}
            </td>
            <td> 
              {{view item.incidient.priority}}
            </td>
            <td> 
              {{view item.incidient.status}}
           </td>  
   {{/each}}
</script> 
```

我并没有因为我的代码不起作用而感到沮丧。更重要的是：

1.  我没有找到任何好的指南或帖子，我可以看到如何调试我的应用程序。Chrome 的调试工具根本没有帮助，因为我不知道如何访问我的 TableController 的内容，或者更好地在哪里可以找到它。
2.  我不明白应用程序在哪里初始化我的所有控制器以及我如何访问它们。使用旧路由器：它就像“App.router.myController”，但这不再起作用。
3.  我不知道如何从不同的控制器访问数据。我试图将 Table.Controller.content 绑定到“App.incidient.content”，而 Ember 甚至没有抛出异常或其他东西

我希望你能帮忙。我不认为这些问题真的很难回答，但对于像我这样的菜鸟来说，它们是非常基础的。

问候和感谢

亚历克斯

# php - php mysql + 会话问题

> ID：15274352
> 
> 赞同：0
> 
> 时间：2013-03-07T14:55:30.117
> 
> 标签：php, mysql, session, login, dreamweaver

我正在使用 php 和 mysql 创建一个简单的登录和注销脚本，但是当我尝试输入 login.php 或索引文件时，我收到一条错误消息：**页面未正确重定向 Firefox 已检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

此问题有时可能是由禁用或拒绝接受 cookie 引起的。** 我不知道如何解决或错误是什么，如果有人帮助我，我将不胜感激

# 索引.php

```
<?php
require_once('connect.php');
ob_start();
session_start();
//checked wether the user is loged in  or not 

$user = $_SESSION['username'];

if(!isset($_SESSION['username']))
{
    $user = $_SESSION['username'];
    header("Location: index.php");
    exit();
}
else
{

    header("Location: home.php");
}

// login script
if(isset($_POST['username'])&& isset($_POST['password']))
{
    $user_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST['username']);
    $user_password = preg_replace('#[^A-Za-z0-9]#i', '', $_POST['password']);
    $md5password = md5($user_password);
    $sql = mysql_query("SELECT id FROM members WHERE username = '".$user_login."' AND password = '".$user_password."'") or die ("could not select from database");

    $userCount = mysql_num_rows($sql);
    if($userCount ==1)
    {
        while($row = mysql_fetch_array($sql))
        {

            $id = $row['id'];
        }

        $_SESSION['id'] = $id;
        $_SESSION['username'] = $user_login;
        $_SESSION['password'] = $user_password;
        header("Location: index.php");
        exit();
    }
    else
    {
         echo "that info is incorrect";
         exit();
    }
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<form action="login.php" method="post">

<input name="username" type="text" value="username" size="32" />
<input name="pass" type="password" value="password" size="32" />
<input name="login" type="submit" value="login" />

</form>

</body>
</html>
<?php  ob_end_flush(); ?> 
```

# 主页.php

```
<?php
//home.php
session_start();
$user = $_SESSION['username'];
if(!isset($_SESSION['username']))
{
    header("Location: index.php");
    exit();
}
else
{

    echo "hi $user you are loged in //Welcome to our website <a href=\"logout.php\">Logout</a>";

}

?> 
```

# 注销.php

```
<?php
session_start();
session_destroy();
header("Location: index.php");

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:07:39.337

在`index.php`你需要把这个 if 条件放在'session_start();'之后

```
if($_SESSION['username'])
{
    header("Location: home.php");
    exit();
} 
```

在 while 循环中，它应该`header("Location: home.php");`代替`header("Location: index.php");`

在`home.php`页面中，您应该在打开 php 标签后放在顶部

```
ob_start();
session_start(); 
```

希望它会奏效。

++++++++++++++++++++++++++++++++++++++++++++++

使用此代码 **index.php**

```
<?php
require_once('connect.php');
ob_start();
session_start();
//checked wether the user is loged in  or not 

$user = $_SESSION['username'];

if($_SESSION['username'])
{
    $user = $_SESSION['username'];
    header("Location: home.php");
    exit();
}

// login script
if(isset($_POST['username'])&& isset($_POST['password']))
{
    $user_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST['username']);
    $user_password = preg_replace('#[^A-Za-z0-9]#i', '', $_POST['password']);
    $md5password = md5($user_password);
    $sql = mysql_query("SELECT id FROM members WHERE username = '".$user_login."' AND password = '".$user_password."'") or die ("could not select from database");

    $userCount = mysql_num_rows($sql);
    if($userCount ==1)
    {
        while($row = mysql_fetch_array($sql))
        {

            $id = $row['id'];
        }

        $_SESSION['id'] = $id;
        $_SESSION['username'] = $user_login;
        $_SESSION['password'] = $user_password;
        header("Location: home.php");
        exit();
    }
    else
    {
         echo "that info is incorrect";
         exit();
    }
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<form action="login.php" method="post">

<input name="username" type="text" value="username" size="32" />
<input name="pass" type="password" value="password" size="32" />
<input name="login" type="submit" value="login" />

</form>

</body>
</html>
<?php  ob_end_flush(); ?> 
```

**主页.php**

```
<?php
ob_start();
session_start();

//home.php
$user = $_SESSION['username'];
if(!isset($_SESSION['username']))
{
    header("Location: index.php");
    exit();
}
else
{

    echo "hi $user you are loged in //Welcome to our website <a href=\"logout.php\">Logout</a>";

}
?> 
```

`logout.php`是正确的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:34:25.360

首先，在 index.php 中你不需要“//检查用户是否登录”，我们应该在 home.php 中检查。此代码导致您的错误：“页面未正确重定向 Firefox 检测到服务器正在以永远不会完成的方式重定向此地址的请求”。您进行了重复（未创建会话，但已检查...）。

其次，在 home.php 中，你必须编写 session_start() 方法，这是使用 session 时需要的代码。

参考我的代码：

**索引.php**

```
<?php
ob_start();
session_start();

//check session is existed    
if (isset($_SESSION['username'])) {
    header("Location: home.php");
}

if (isset($_POST['username']) && isset($_POST['password'])) {
    $user_login = $_POST['username'];
    $user_password = $_POST['password'];

    if ($user_login == 'namluu' && $user_password =='123456') {
        $_SESSION['username'] = $user_login;
        $_SESSION['password'] = $user_password;
        header("Location: home.php");
        exit();
    } else {
        echo 'Infor not correct';
        exit();
    }
}
?>
<html>
  <head></head>
  <body>
    <form action="index.php" method="post">
      <input type="text" name="username" />
      <input type="text" name="password" />
      <input type="submit" name="login" value="login" />
    </form>
  </body>
</html>
<?php
  ob_end_flush();
?> 
```

**主页.php**

```
<?php
session_start();
//home.php
$user = $_SESSION['username'];
if(!isset($_SESSION['username']))
{
    header("Location: index.php");
    exit();
}
else
{
    echo "hi $user you are loged in //Welcome to our website <a href=\"logout.php\">Logout</a>";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:00:48.310

您还没有到达`session_start()`home.php 的顶部，这意味着您将在 home.php 和 index.php 之间创建一个无限循环。

目前正在发生的事情是当您访问 index.php 时，它会识别会话并将用户重定向到 home.php。由于`session_start()`home.php 中没有，它无法识别会话并将用户重定向回 index.php。因此，您有一个无限循环。

# mysql - ZF2 清理数据库查询的变量

> ID：15274354
> 
> 赞同：0
> 
> 时间：2013-03-07T14:55:45.313
> 
> 标签：mysql, zend-framework2, input-sanitization

在 Zend Framework 2 中进行数据库查询时，我应该如何清理用户提交的值？例如下面 SQL 中的 $id

```
$this->tableGateway->adapter->query(
  "UPDATE comments SET spam_votes = spam_votes + 1 WHERE comment_id = '$id'",
  \Zend\Db\Adapter\Adapter::QUERY_MODE_EXECUTE
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:58:22.457

执行时可以传参数..

```
 $statement = $this->getAdapter()->query("Select * from test WHERE id = ?");
 $result = $statement->execute(array(99));

 $resultSet = new ResultSet;
 $resultSet->initialize($result); 
```

您也可以将它们直接传递给查询方法

```
 $statement = $this->getAdapter()->query(
    "Select * from test WHERE id = ?", 
    array(99)
 );
 $result = $statement->execute();

 $resultSet = new ResultSet;
 $resultSet->initialize($result); 
```

两者都会产生查询“Select * from test WHERE id = '99'”

如果要使用命名参数：

```
$statement = $this->getAdapter()->query("Select * from test WHERE id = :id");
$result = $statement->execute(array(
    ':id' => 99
));

$resultSet = new ResultSet;
$resultSet->initialize($result); 
```

如果您想引用您的表/字段名称等：

```
$tablename = $adapter->platform->quoteIdentifier('tablename');

$statement = $this->getAdapter()->query("Select * from {$tablename} WHERE id = :id");
$result = $statement->execute(array(
    ':id' => 99
)); 
```

# asp.net - 无法从子页面访问 page_load 事件的母版页中的隐藏字段值

> ID：15274356
> 
> 赞同：3
> 
> 时间：2013-03-07T14:55:53.237
> 
> 标签：asp.net, master-pages, webforms

我正在尝试从在我的子 aspx 页面中设置的母版页访问隐藏字段值，但无法通过母版页代码隐藏 page_load 事件访问它。

子 aspx 页面：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
<telerik:RadStyleSheetManager ID="RadStyleSheetManager1" runat="server">
</telerik:RadStyleSheetManager>
<div class="center_content">
    <div style="text-align: left">
        <h2>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </h2>
    </div>
    <div style="text-align: left">
        <uc1:Chart ID="Chart1" runat="server" />
    </div>
    &nbsp;</div>
    <asp:HiddenField ID="hid1" runat="server" Value="Satellite Availability % Report" /> 
```

母版页：

```
<asp:Label runat="server" ID="Label1" Style="text-align: right; font-size: xx-large; color: #808080"></asp:Label> 
```

母版页代码背后：这是我想从子页面设置报告的文本值的地方。

```
protected void Page_Load(object sender, EventArgs e)
    {
        HiddenField hid1 = (HiddenField)MainContent.FindControl("MainContent_hid1");
    if (hid1 != null)
    {
        Label1.Text = hid1.Value;
    }        }
<input type="hidden" name="ctl00$MainContent$hdnRptTitle" id="MainContent_hdnRptTitle" value="Satellite Availability % Report" /> 
```

hdnRptTitle 变量没有智能感知。

我怎样才能让它工作？看起来很简单，但不知道为什么它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:24:39.067

您可以将以下代码添加到您的`MasterPage`：

```
HiddenField hid1 = (HiddenField)MainContent.FindControl("hid1");
if (hid1 != null)
{
     Label1.Text = hid1.Value;
} 
```

**编辑：**确保您的`Label`on 在`MasterPage`您的之外`ContentPlaceHolder`，因为我在第一次测试时犯了这个错误。

上面的代码应该按照提供的方式工作，使用您的控件名称，我不确定您为什么使用：

`.FindControl("MainContent_hid1");`

代替

`.FindControl("hid1");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:26:18.467

你可以这样使用。 您的母版页上
可以有多个。 在这种情况下使用包含您的 id我假设它是`conterntPlaceHolder`
`hidden field``ContentPlaceHolder1`

```
 HiddenField hid1 = (HiddenField)ContentPlaceHolder1.FindControl("hdnRptTitle");
   if (hid1 != null)
   {
     Label1.Text = hid1.Value;
   } 
```

有关`so`
[如何从 asp.net 中的母版页访问内容页面控件的类似帖子](https://stackoverflow.com/questions/4979669/how-to-access-content-page-controls-from-master-page-in-asp-net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:25:42.300

为什么您认为您可以访问母版页的内容页中的控件？A`MasterPage`用于多个页面，为什么要将其与特定页面硬链接，没有它就无法工作。如果这`HiddenField`对于主服务器的操作至关重要，则应在此处声明。

> 对于每个子页面，有一个不同的 rpt 标题需要显示在母版页上。我怎样才能做到这一点？

然后内容页面可以访问它的主人来设置文本，反之亦然。

您可以在 master 中提供公共属性，例如：

```
public string ReportTitle
{
    get { return this.LblReportTitle.Text; }
    set { this.LblReportTitle.Text = value; }
} 
```

并且在其中`ContentPage`，例如在它的`Page_Load`：

```
protected void Page_Load(object sender, EventArgs e)
{
    // assuming the type of your master is SiteMaster
    var master = this.Master as SiteMaster;
    if (master != null)
        master.ReportTitle = hdnRptTitle.Value;
} 
```

这种方法仍然将主人与它的一个（或多个）孩子联系起来，但如果内容页面使用不同的主人类型，它仍然会“工作”。如果有人删除或更改属性，您也会收到编译器错误通知。

但是，内容存储报告类型的位置或主显示它的位置是实现细节，将来可以更改而不会破坏任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:27:10.990

您可以引用母版页并获得这样的控件：

VB.Net：

```
Dim te As HiddenField
Dim val As String

te = Me.Page.Master.FindControl("hdnRptTitle")
val = te.Value 
```

C＃：

```
HiddenField te = default(HiddenField);
string val = null;

te = this.Page.Master.FindControl("hdnRptTitle");
val = te.Value; 
```

# jquery - 如何在 jquery 点击事件中使用路径助手？

> ID：15274357
> 
> 赞同：3
> 
> 时间：2013-03-07T14:55:54.667
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我在 erb 模板中有一个 div，单击它时我想触发控制器的显示操作。

```
<div class = "box"> 
  Content within the box
</div>

<script>
  $(document).ready(function() {
    $('.box').click(function(){
      $.get(<%=hack_path(h) %>)
    });
  });
</script> 
```

我收到错误“参数数量错误（0 代表 1）”。我想知道我是否在正确的轨道/模式上以达到预期的结果，还是应该使用其他技术？

这是实际的模板：

```
<h1>Hacks</h1>

<% @hack.each do |h| %> 
  <div class = "box">
    <table>
    <h3><%= h.hack_name %></b></h3>
    <%= h.id %>
    <span id = "showhack"> <%= link_to 'Show', hack_path(h) %></span>
    <%= link_to 'Edit', edit_hack_path(h) %>
    <%= link_to 'Destroy', hack_path(h), method: :delete, data: { confirm: 'Are you sure?' } %>
    <%= link_to "Get Data", :controller => :admins, :action => :checkSerials, :method => :get %>

  <% h.serials.each do |s| %>  
    <tr>
      <th>Series Title</th>
      <th>Series Name</th>
      <th>Series Id</th>
      <% s.observations.sort{|a,b| a.id <=> b.id}.last(5).each do |o| %>
        <th><%= o.date %></th>
      <% end %>
    </tr>    
    <tr>
      <td><%= link_to s.title, [h, s] %></td>
      <td><%= s.series_name %></td>
      <td><%= s.id %></td>
    <% s.observations.sort{|a,b| a.id <=> b.id}.last(5).each do |o| %>
    <% if s.units_short == 'Mil. of $' %>
      <td><%= number_to_currency(convertMtoBHack(o.value), :precision => 0) %></td>
    <% else %>
    <td><%= number_to_currency(o.value, :precision => 0) %></td>
  <% end %>
  <% end %>
  </tr>
  <tr>
    <td><%= s.frequency_short %></td>
    <td><%= s.units_short %></td>
  </tr>

<% end %>
</table>
</div> 
```

```
 <script>
 $(document).ready(function() {

   $('.box').click(function(){
   $.get(<%= hack_path(@hack).to_json %>)
   });
  });
 </script>

<div><%= link_to 'New Hack', new_hack_path %></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:01:03.700

您必须转义字符串。否则它将被渲染为`$.get(/what/ever/path)`当然是错误的。

我建议使用`to_json()`，它也可以保护您免受其他讨厌的影响：

```
$.get(<%= hack_path(h).to_json %>) 
# renders to $.get("/what/ever/path") 
```

但通常你有多个地方使用同一个处理程序，你最终会使用数据标签将 URLS 添加到标记中并使用`$.data()`.

```
<div data-url=<%= hack_path(h).to_json %>> 
```

在javascript部分中：

```
var url = $(target).data("url"); 
```

例如，如果您想让“hack”的标题可点击：

```
<td class="hacktitle" data-url=<%= hack_url(h).to_json %>><%= link_to s.title, [h, s] %></td>

/* somewhere else in javascript */

$("table.hacks").on("click", "td.hacktitle", function(event) {
    var targetTd = $(event.target);
    var url = targetTd.data("url");
    $.get(url); 
```

当您使用 HAML 时，所有这些都更加方便（无论如何我都会推荐）

```
%div{:data => {:url => hack_path()}}
  some content 
```

# maven - 如何按组、工件和版本计算 POM 文件的 URL？

> ID：15274360
> 
> 赞同：0
> 
> 时间：2013-03-07T14:56:03.080
> 
> 标签：maven, repository

可以通过 URL 下载 POM 文件

> [http://search.maven.org/remotecontent?filepath](http://search.maven.org/remotecontent?filepath)

例如，Apache Commons Daemon 包的 POM 文件由三个属性标识

*   神器：commons-daemon
*   组：commons-daemon
*   版本：1.0.13

生成的 URL 是：

> [http://search.maven.org/remotecontent?filepath=commons-daemon/commons-daemon/1.0.13/commons-daemon-1.0.13.pom](http://search.maven.org/remotecontent?filepath=commons-daemon/commons-daemon/1.0.13/commons-daemon-1.0.13.pom)

[如果我使用交互式搜索](http://search.maven.org/#search%7Cga%7C1%7Cg%3a%22commons-daemon%22%20AND%20a%3a%22commons-daemon%22%20AND%20v%3a%221.0.13%22%20AND%20p%3a%22jar%22)按三个属性进行搜索，则此 URL 由中央存储库计算。可以使用返回[XML 文档](http://search.maven.org/solrsearch/select?q=g%3a%22commons-daemon%22%20AND%20a%3a%22commons-daemon%22%20AND%20v%3a%221.0.13%22%20AND%20p%3a%22jar%22&wt=xml)的 REST API 完成相同的搜索。这是 XML 响应的结果节点：

```
<result name="response" numFound="1" start="0">
  <doc>
    <str name="a">commons-daemon</str>
    <arr name="ec">
      <str>-javadoc.jar</str>
      <str>-sources.jar</str>
      <str>.jar</str>
      <str>-bin-windows.zip</str>
      <str>-native-src.tar.gz</str>
      <str>-src.zip</str>
      <str>-src.tar.gz</str>
      <str>-native-src.zip</str>
      <str>.pom</str>
      <str>-bin.tar.gz</str>
      <str>-bin.zip</str>
    </arr>
    <str name="g">commons-daemon</str>
    <str name="id">commons-daemon:commons-daemon:1.0.13</str>
    <str name="p">jar</str>
    <arr name="tags">
      <str>software</str>
      <str>commons</str>
      <str>invocation</str>
      <str>provides</str>
      <str>alternative</str>
      <str>mechanism</str>
      <str>apache</str>
      <str>daemon</str>
      <str>java</str>
      <str>code</str>
      <str>like</str>
      <str>unix</str>
    </arr>
    <long name="timestamp">1360214551000</long>
    <str name="v">1.0.13</str>
  </doc>
</result> 
```

结果列出所有可用文件，但仅列出后缀。URL 丢失了，我不清楚如何计算它们。

计算完整文件路径的正确规则是什么？

据我所见，该目录似乎是通过附加组、工件和版本以及用斜杠替换任何点来创建的。并且版本号也是文件名的最后一部分。但是如何计算文件名的开头呢？它总是神器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:11:39.353

查看@Brett Porter 编写的[存储库布局规范。](https://cwiki.apache.org/confluence/display/MAVENOLD/Repository+Layout+-+Final)

引用：

> 对于主要工件：
> 
> `/$groupId[0]/../$groupId[n]/$artifactId/$version/$artifactId-$version.$extension`
> 
> 对于次要工件：
> 
> `/$groupId[0]/../$groupId[n]/$artifactId/$version/$artifactId-$version-$classifier.$extension`

[他在这个](https://stackoverflow.com/a/8382083/367285)SO 答案中自我引用了它。

# mongodb - mongodb 和一个“深”的 mongoexport

> ID：15274362
> 
> 赞同：1
> 
> 时间：2013-03-07T14:56:05.657
> 
> 标签：mongodb, mongoexport

是否可以使用 mongoexport 进行“深度”导出，从而将任何可能的 DBRef 解析为 mongo 数据库中的其他对象？

例子：

假设我的一个集合“应用程序”包含一个具有属性的文档：

```
{
    "service" : DBRef("service", NumberLong(1))
} 
```

mongoexport 是否可以进行一些深度导出，将此 dbref 解析为具有其基础信息的实际对象，而不是像在 json 文件中那样将其输出：

```
"service" : { "$ref" : "service", "$id" : 1 } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T13:44:53.163

[数据库引用（又名 DBRefs）](http://docs.mongodb.org/manual/reference/database-references/)只是 MongoDB 中的一种符号数据约定，并且（在 MongoDB 2.4 中）没有任何特殊的服务器端支持来填充引用。

许多应用程序驱动程序或框架都[支持使用 DBRefs](http://docs.mongodb.org/manual/reference/database-references/#support)，但这样做是通过生成额外的查询来获取引用的文档。

如果要在导出数据时填充 DBRefs，则必须编写自己的导出脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T02:29:33.767

不幸的是，目前 mongodb 没有实现它，它将数据导出为 csv 或 json，实际上它将使用扩展 JSON 实现：[http ://docs.mongodb.org/manual/reference/mongodb-extended-json/](http://docs.mongodb.org/manual/reference/mongodb-extended-json/)

它将 DBRef 表示为 data_ref：[http ://docs.mongodb.org/manual/reference/mongodb-extended-json/#data_ref](http://docs.mongodb.org/manual/reference/mongodb-extended-json/#data_ref)

问候， 莫西

# windows-7 - 在其他 Windows 操作系统中使用 directshow 过滤器

> ID：15274364
> 
> 赞同：1
> 
> 时间：2013-03-07T14:56:13.257
> 
> 标签：windows-7, filter, windows-ce, directshow

我在 Windows7 中编译了 DirectShow 过滤器。我可以在 Wince 中使用这个 DLL 过滤器吗？或者我需要在 Wince 中编译它然后才能使用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:55:59.233

Win CE 在 ARM 和 MIPS 芯片上运行，因此您必须重新编译。

# node.js - 同步文本编辑

> ID：15274367
> 
> 赞同：2
> 
> 时间：2013-03-07T14:56:28.350
> 
> 标签：node.js, text, editing, simultaneous

我正在尝试编写一个网页，它允许同时编辑一个文本文档。

在 Node.js 中编写 Chat 之类的程序并不是很困难，但是处理相同的文本就有点棘手了。我考虑过发送 char 位置和更改字符，但如果有人在更改之前键入一些内容，则更改将被放置在错误的位置。

在我的客户之间交换修改的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:04:00.210

您应该使用 Socket.io 来制作您的实时应用程序。

我刚刚创建了一篇关于实时版本的不错的博客文章，请参见[此处](http://www.laktek.com/2010/05/25/real-time-collaborative-editing-with-websockets-node-js-redis/)。它还提供了 github 项目和[开源在线编辑器](http://etherpad.org/)项目的链接。看看并尝试了解他们是如何做这样的事情的，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:01:01.633

两个人不能同时从不同的地方操作同一个对象。你基本上有两个选择。1\. 让他们轮流拿东西 2\. 如果他们都想要，就复制它，但这听起来不像是结局很好

# c# - WPF 应用程序中的触摸模式

> ID：15274368
> 
> 赞同：0
> 
> 时间：2013-03-07T14:56:32.823
> 
> 标签：c#, .net, wpf, user-interface, touch

有些人可能已经注意到 Office 2013 包含一个称为触摸模式的新功能。

![触控鼠标Office 2013](../Images/569879f4b03bfae681575b792f960f84.png)

这就是它的样子 ![在此处输入图像描述](../Images/6401801854e0c6053cdd77279f811d69.png)

我想知道我是否可以在 WPF 中实现相同的目标。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:17:21.823

我只需要在我的主网格中添加类似这样的内容（下面的代码）。感谢 HighCore 为我指明了正确的方向。

```
<Grid.LayoutTransform>
    <ScaleTransform x:Name="ApplicationScaleTransform"
                CenterX="0"
                CenterY="0"
                ScaleX="1.2"
                ScaleY="1.2" />
</Grid.LayoutTransform> 
```

但是如何使用 MVVM 模式实现这一点？

当然，我可以简单地创建一个绑定，将 ScaleX 和 ScaleY 绑定到我的 ViewModel 中的一个属性。

但它真的属于 ViewModel 吗？我的意思是这显然是 GUI 的一部分，应该只在视图中。

**编辑：** 也许我应该将 ScaleX 和 ScaleY 绑定到 XAML 代码隐藏中的属性（例如 MainWindow.xaml.cs） 问题是 DataContext 已经设置为 ViewModel。

**EDIT2 我的解决方案**

上面的代码片段导致所有元素“增长”。我对这段代码的问题是我的文本框的字体大小也受到了影响。我通过为每个应该缩放的元素定义一个样式来设法处理这种不需要的行为。

```
<ResourceDictionary>
            <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
            <Style TargetType="ScrollBar">
                <Setter Property="LayoutTransform" >
                    <Setter.Value>
                        <ScaleTransform x:Name="ApplicationScaleTransform"
                        CenterX="0"
                        CenterY="0"
                            ScaleX="{Binding ScaleFactor, UpdateSourceTrigger=PropertyChanged}"
                            ScaleY="{Binding ScaleFactor, UpdateSourceTrigger=PropertyChanged}"
                         />
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="TabItem">
                <Setter Property="LayoutTransform" >
                    <Setter.Value>
                        <ScaleTransform x:Name="ApplicationScaleTransform"
                        CenterX="0"
                        CenterY="0"
                            ScaleX="{Binding ScaleFactor, UpdateSourceTrigger=PropertyChanged}"
                            ScaleY="{Binding ScaleFactor, UpdateSourceTrigger=PropertyChanged}"
                         />
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="Button">
                <Setter Property="LayoutTransform" >
                    <Setter.Value>
                        <ScaleTransform x:Name="ApplicationScaleTransform"
                        CenterX="0"
                        CenterY="0"
                            ScaleX="{Binding ScaleFactor, UpdateSourceTrigger=PropertyChanged}"
                            ScaleY="{Binding ScaleFactor, UpdateSourceTrigger=PropertyChanged}"
                         />
                    </Setter.Value>
                </Setter>
            </Style>
            <ResourceDictionary.MergedDictionaries></ResourceDictionary.MergedDictionaries>
        </ResourceDictionary> 
```

**问题：**这段代码看起来有点难看有没有办法为多个目标类型定义相同的片段？例如

# c++ - 编译器如何知道函数调用后控制应该返回到哪里？

> ID：15274370
> 
> 赞同：5
> 
> 时间：2013-03-07T14:56:36.573
> 
> 标签：c++

考虑以下函数：

```
int main()
{
    //statement(s);
    func1();
    //statement(s);
}

void func1()
{
    //statement(s);
    func2();
    //statement(s);
}

void func2()
{
    //statement(s);
} 
```

`func2`编译器如何知道在执行完所有操作后返回到哪里？我知道控制转移到函数`func1`（以及确切地说是哪个语句），但是*编译器**怎么*知道呢？什么告诉编译器返回到哪里？

 ** * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T14:58:28.173

这通常使用[*调用堆栈*](http://en.wikipedia.org/wiki/Call_stack)来实现：

*   当控制权转移到函数时，要返回的地址被压入堆栈。
*   当函数完成时，地址从堆栈中弹出并用于将控制权转移回被调用者。

详细信息通常由正在为其编译代码的硬件架构规定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:00:14.893

实际上，编译器并没有运行代码，但是机器运行，并且当它调用一个新函数时，它会将当前正在调用的函数之后要执行的*下一*条指令的地址存储在堆栈上，这样当函数返回它可以将其弹出回指令指针（IP）并从那里恢复。

为了解释起见，我已经简化了一些事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T14:58:46.757

当一个函数被调用时，调用函数中正确的返回地址被放置在某个地方，通常是堆栈，尽管标准没有强制要求，这正是用于存储返回地址的目的。

编译器有责任确保其调用约定是这样的，除非出现问题（例如，[堆栈溢出](https://stackoverflow.com/)），否则被调用函数知道如何返回调用函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:06:39.050

运行时使用一些称为“调用堆栈”的东西，它基本上保存了在被调用函数返回后要调用的下一条语句的地址。因此，当进行函数调用时，在控件跳转到新指令地址之前，调用函数中的下一条指令地址被压入堆栈。并且每次后续调用任何函数都会重复此过程。现在为什么只有一个堆栈？因为有必要回到它停止的地方——这基本上是一种“后进先出”的行为，而堆栈是执行此操作的数据结构。当您在 Visual Studio 中调试程序时，您实际上可以查看此调用堆栈 - 有一个名为“调用堆栈”的单独窗口，它显示放置在调用堆栈中的地址条目。*

# sql - 以选定的版权年份范围为列标题的交叉表查询

> ID：15274374
> 
> 赞同：0
> 
> 时间：2013-03-07T14:56:43.940
> 
> 标签：sql, ms-access, ms-access-2007, pivot-table, crosstab

这是另一个与我之前的帖子相关的问题，[但](https://stackoverflow.com/questions/15262565/crosstab-query-with-copyright-year-range-as-column-heading)有不同的问题。

在我之前的帖子中，我询问了如何创建一个交叉表查询，该查询将根据版权年份的 4 年范围输出一列。答案非常好，但现在我面临另一个挑战。

为了清楚，这里是表上的数据：

```
ID      CallNo      CopyrightYear
1       AH          2000
2       AB          2000
3       BC          2001
4       AH          2000
5       ZA          2005
6       BC          2001
7       AP          2003
10      ZA          2006
11      DA          2009
12      DA          2010
13      RA          1999
14      WE          1997
15      HK          1996
16      AG          2011 
```

根据上一篇文章的sql语句应该是这样的：

```
TRANSFORM Count(tab1.ID) AS CountOfID
SELECT tab1.CallNo, Count(tab1.ID) AS [Total Of ID]
FROM table1 AS tab1
GROUP BY tab1.CallNo
PIVOT CStr(Int(([CopyrightYear])/5)*5)+' to '+CStr(Int(([CopyrightYear])/5)*5+4); 
```

输出是：

```
CallNo  1995 to 1999    2000 to 2004    2005 to 2009    2010 to 2014
AB                          1       
AG                                                          1
AH                          2       
AP                          1       
BC                          2       
DA                                          1               1
HK          1           
RA          1           
WE          1           
ZA                                          2 
```

我的问题是如何结合版权年份低于 1999 年和高于 2010 年的所有结果。我想要的新列输出是这样的：

```
CallNo  1999 below      2000 to 2004    2005 to 2009    2010 above
AB                          1       
AG                                                          1
AH                          2       
AP                          1       
BC                          2       
DA                                          1               1
HK          1           
RA          1           
WE          1           
ZA                                          2 
```

这意味着如果有一个版权年份低于 1999 年，如 1980 年，它将被计算在“1999 年以下”列下。与上述2010年相同，如果有2014年、2016年甚至2020年等版权年份，则该值将计入“2010年以上”列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:22:52.157

您应该使用为数据透视转换提供的数据尝试其他方法，这种方法更直接但可能需要更多时间：

创建一个这样的表并进行转换：

```
+--------------+--------+------------+
| NUMOFRECORDS | CALLNO | DATERANGE  |
+--------------+--------+------------+
|            1 | AB     | 2000 2004  |
|            1 | AG     | 2010 above |
|            1 | AP     | 2000 2004  |
|            1 | DA     | 2005 2009  |
|            1 | DA     | 2010 above |
|            1 | HK     | 1999 Below |
|            1 | RA     | 1999 Below |
|            1 | WE     | 1999 Below |
|            2 | AH     | 2000 2004  |
|            2 | BC     | 2000 2004  |
|            2 | ZA     | 2005 2009  |
+--------------+--------+------------+ 
```

使用联合查询创建表，如下所示：

```
SELECT count(ID) AS NumOfRecords, CallNo, '1999 Below' AS DateRange
FROM table1
WHERE CopyrightYear <= DateValue('1-1-1999')
GROUP BY CallNo;

UNION
SELECT count(ID) as NumOfRecords, CallNo, '2000 2004' as DateRange
FROM table1
WHERE CopyrightYear between DateValue('1-1-2000') and DateValue('1-1-2004')
GROUP BY CallNo

UNION
SELECT count(ID) as NumOfRecords, CallNo, '2005 2009' as DateRange 
FROM table1
WHERE CopyrightYear between DateValue('1-1-2005') and DateValue('1-1-2009')
GROUP BY CallNo

UNION
SELECT count(ID) as NumOfRecords, CallNo, '2010 above' as DateRange
FROM table1
WHERE CopyrightYear >= DateValue('1-1-2010')
GROUP BY CallNo 
```

使用该查询为您交叉表查询，如下所示：

```
TRANSFORM Sum(Query1.NumOfRecords) AS SumOfNumOfRecords
SELECT Query1.CallNo
FROM Query1
GROUP BY Query1.CallNo
PIVOT Query1.DateRange; 
```

在 MS-Access 2010 上测试...

# java - 正则表达式适用于 java.util.regex.Pattern 但不适用于 com.oroinc.text.regex.Perl5Matcher

> ID：15274375
> 
> 赞同：0
> 
> 时间：2013-03-07T14:56:45.773
> 
> 标签：java, regex, perl

我今天在我们的遗留代码中遇到了一个错误，它使用`Perl5Compiler`并`Perl5Matcher`使用以下正则表达式来验证英国邮政编码：

```
((?i)(([A-Z]{2}[0-9]{1,2})|([A-Z]{1,2}[0-9][A-Z])|([A-Z][0-9]{1,2}))\\s([0-9][A-Z]{2})|(BFPO\\s\\d{1,4})|(GIR\\s0AA)) 
```

但是，它无法正确验证诸如“G12 4NNT”之类的邮政编码（在这种情况下，最后一部分只能是数字后跟 2 个字母）。我通过使用`java.util.regex.Pattern`正确使用上述正则表达式并通过所有单元测试的类来解决此问题。

但是，现在我很好奇为什么它不适用于`Perl5`那些。这两个 API 使用的正则表达式语法有根本区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:13:03.790

我认为问题[与上述链接答案](https://stackoverflow.com/questions/784267/why-do-regular-expressions-in-java-and-perl-act-differently/784452#784452)的问题相同。

如果您在 Java 中使用该`matches()`方法：

```
text.matches("((?i)(([A-Z]{2}[0-9]{1,2})|([A-Z]{1,2}[0-9][A-Z])|([A-Z][0-9]{1,2}))\\s([0-9][A-Z]{2})|(BFPO\\s\\d{1,4})|(GIR\\s0AA))"); 
```

它与完整的字符串匹配，要在 Perl 中具有相同的行为，您必须在表达式周围锚定：

```
^((?i)(([A-Z]{2}[0-9]{1,2})|([A-Z]{1,2}[0-9][A-Z])|([A-Z][0-9]{1,2}))\\s([0-9][A-Z]{2})|(BFPO\\s\\d{1,4})|(GIR\\s0AA))$ 
```

`^`匹配字符串的开头

`$`匹配字符串的结尾

# asp.net - 无效的 JSON 原语：

> ID：15274381
> 
> 赞同：0
> 
> 时间：2013-03-07T14:56:54.993
> 
> 标签：asp.net, json, web-services, javascriptserializer

我是使用 API 并使用 asp.net 从他们那里获得响应的新手，我正在我的 asp.net Web 应用程序中调用 API，如下所示：

```
 public ActionResult MakeCall() {
            CallTRunkAPIResponse response = GET("https://apibetaus.calltrunk.com/api/v2/GetAccountSummarySimple?access_token=mytokenkeyhere");
            return Content("Make a call");
        } 
```

我创建了一个方法来获取响应，将响应传输为 json 格式，然后使用 javascript 序列化程序转换为我的对象类型，如下所示：

```
 public CallTRunkAPIResponse GET(string url)
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

        request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)";
        request.Headers.Add("X-Client:" + "header info from api here");
        request.Headers.Add("X-Authenticator-Session:" + "session key from api here");

        request.Method = "GET";

        request.ContentType = "application/json";
        try
        {
            WebResponse response = request.GetResponse();

            using (Stream responseStream = response.GetResponseStream())
            {
                StreamReader reader = new StreamReader(responseStream, Encoding.UTF8);
                //return reader.ReadToEnd();

                JavaScriptSerializer js = new JavaScriptSerializer();
                var objText = reader.ReadToEnd();
                CallTRunkAPIResponse myojb = (CallTRunkAPIResponse)js.Deserialize(objText, typeof(CallTRunkAPIResponse));
                return myojb;
            }
        }
        catch (WebException ex)
        {
            WebResponse errorResponse = ex.Response;
            using (Stream responseStream = errorResponse.GetResponseStream())
            {
                StreamReader reader = new StreamReader(responseStream, Encoding.UTF8);
                String errorText = reader.ReadToEnd();

                // log errorText
            }
            throw;
        }
    }

} 
```

我的对象是这样的（不知道下面的响应我应该在这个响应类中有哪些属性：

```
 public class CallTRunkAPIResponse {

        public string Status { get; set; }
        public string Content { get; set; }
        public string Region { get; set; }
    } 
```

响应应该是这样的，但我收到错误：

```
{
"Status":"OK",
"Content":{
"Region":"beta.us",
"CurrencyCode":"USD",
"CurrencySymbol":"$",
"Languages":["en"],
"Version":{
"Api":{
"DisplayVersion":"2.0",
"Version":3},
"Client":{
"ReportedVersion":0,
"NewestVersion":2,
"MinVersion":2}
}
}
} 
```

但我收到此错误：

```
System.ArgumentException: Invalid JSON primitive: . 
```

在：

```
 CallTRunkAPIResponse myojb = (CallTRunkAPIResponse)js.Deserialize(objText, typeof(CallTRunkAPIResponse)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:58:46.053

该异常很可能是由于服务调用导致抛出异常并且异常字符串不是有效的 JSON 对象，因此它无法解析响应。

检查以下内容：

*   网络通话真的成功了吗？如果它失败了，很可能是客户端的异常处理不好，并且您正在尝试将异常对象响应转换为 JSON 对象，从而导致您看到的错误消息。
*   该调用确实通过了服务器，并且存在异常和/或调用导致返回给客户端的错误消息，这又不是有效的 JSON 对象，因此您不能将其转换为一个。

# java - 如何获取 JSON 文件的特定部分以用于 HTML？

> ID：15274390
> 
> 赞同：0
> 
> 时间：2013-03-07T14:57:13.640
> 
> 标签：java, html, json

我想从文件中导入 JSON 数据，我现在的代码是：

```
<script>                            
    $.getJSON('data.json', function(data) {             
    var output = "<tr>";
    for ( var i in data.users) {
    output += "<td>"
    + "-- "
    + data.users[i].time
    + " --<br>-- "
    + data.users[i].senderID
    + " --<br>"
    + data.users[i].message
    + "<br></br></td>";
    }
    output += "</tr>";
    document.getElementById("placeholder").innerHTML = output;
    });
</script> 
```

但是我无法再访问它，因为它没有使用像“users”这样漂亮整洁的名称生成，正如您在下面看到的那样，它是“¬í t'”，但您不能将其引用为它的一部分，它不是有效字符

```
 ¬í t’{  
    "messageId": 53,  
    "userTo": {    
    "userId": 4,    
    "userName": "Bob123",    
    "userLastCheckedDate": "Mar 7, 2013 11:14:53 AM"
    },

    "userFrom": {
    "userId": 1,
    "userName": "Joe123",    
    "userLastCheckedDate": "Mar 7, 2013 10:41:44 AM"
    },

    "messageContent": "a lovely message here",
    "messageSentDate": "Mar 7, 2013 11:36:14 AM",
    "messageReadDate": "Mar 7, 2013 12:49:52 PM"
    } 
```

有任何想法吗？谢谢！

此外，这是生成 JSON 的 java

```
 Gson gson = new GsonBuilder().setPrettyPrinting().create();
    String json = gson.toJson(userMessages.get(0));
    out.write(json);

    FileOutputStream fout = new FileOutputStream("D:\\web\\data.txt");
    ObjectOutputStream oos = new ObjectOutputStream(fout);   
    oos.writeObject(json);
    oos.close(); 
```

# jquery - 属性的敲除映射不起作用

> ID：15274392
> 
> 赞同：0
> 
> 时间：2013-03-07T14:57:21.577
> 
> 标签：jquery, asp.net-mvc-4, knockout.js

映射似乎无法正常工作：

```
 @{ var jsonData = new HtmlString(new JavaScriptSerializer().Serialize(Model)); }

    var initialData = @jsonData; 
```

---> 在那个阶段，initialData 包含正确的json格式数据

```
 var viewModel;
    ko.mapping.fromJS(initialData, viewModel); 
```

---> 这里，viewModel 包含了所有的属性。在 Chrome 调试器中，如果我键入 viewModel.Products （这是一个数组属性），它会被发现并且似乎已正确映射。

但是，如果我执行 viewModel.Products[0]，则返回“未定义”，这很奇怪，因为该数组实际上包含 4 个项目（我可以在 jSon 数据中看到它）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:59:32.043

映射后它应该是一个可观察的属性，因此您可以像访问它一样访问它（它是一个函数）：

```
viewModel.Products()[0]; 
```

# bash - 在 shell 命令中使用循环时的错误消息

> ID：15274396
> 
> 赞同：2
> 
> 时间：2013-03-07T14:57:28.910
> 
> 标签：bash, loops, sh, subshell

我做错了什么？

```
unset list
list=("A" "B" "C")
/bin/sh -c "for i in `seq 1 ${#list[@]}` ; do echo $i ; done " 
```

它应该返回：

```
1
2
3 
```

代替：

```
/bin/sh: -c: line 1: syntax error near unexpected token `2'
/bin/sh: -c: line 1: `2' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:04:03.313

在您的原始代码中，您传递给的双引号字符串`/bin/sh`在调用`sh`. 特别是，涉及的命令替换`seq`和参数`$i`都被扩展了。结果，您得到以下信息（您可以`set -x`在运行代码之前通过调用来确认）：

```
for i in 1
2
3 ; do echo  ; done 
```

1 之后的换行符被视为`for`将迭代的序列的终止。此时，`sh`会期望关键字`do`，但会看到`2`。

解决此问题的一种方法是，假设您确实需要将字符串传递给 shell 的另一个实例，即告诉`seq`使用不同的分隔符（例如空格）。您还需要转义美元符号，`$i`以便它由子 shell 评估，而不是当前 shell。

```
unset list
list=("A" "B" "C")
/bin/sh -c "for i in `seq -s' ' 1 ${#list[@]}` ; do echo \$i ; done " 
```

这将适用于`sh`，因为子shell 看不到数组，无论如何它都不会理解。sudo_O 提供了一个不同的答案，它涉及保护传递给的整个字符串`sh`，并包括该`list`字符串中的定义，以便它在子shell中可见。请注意，您`sh`必须是 shell，例如`bash`，因为 POSIX`sh`不支持数组，正如 jordanm 所指出的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:21:50.497

@chepner 给了你正确的答案。

顺便说一句，您也可以像这样缩短命令（不涉及进一步的 shell）

```
unset list
list=("A" "B" "C")
for i in `seq 1 ${#list[@]}` ; do echo $i ; done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:06:58.837

`list`生成子shell时不会定义 数组，因此它没有长度：

```
for i in `seq 1 ${#list[@]}` 
```

被视为：

```
for i in seq 1 0 
```

看：

```
$ sh -c 'echo ${#list[@]}'
0 
```

并且`seq 1 0`不产生任何输出，因此看不到任何结果。

`list`在当前 shell 中设置并打印出每个值：

```
$ list=("A" "B" "C")

$ for i in `seq 1 ${#list[@]}`;do echo $i;done
1
2
3 
```

或者`list`在子shell中定义：

```
$ sh -c 'list=("A" "B" "C");for i in `seq 1 ${#list[@]}`;do echo $i;done'
1
2
3 
```

# java - Character.isLetter 是否需要规范化文本？

> ID：15274399
> 
> 赞同：9
> 
> 时间：2013-03-07T14:57:40.203
> 
> 标签：java, unicode

我有一个程序通过删除任何不是字母或数字的字符来过滤字符串。该程序支持多种语言，包括中文、俄语、阿拉伯语等。程序如下：

```
StringBuilder strBuilder = new StringBuilder();

for (int i = 0; i < src.length(); i++) {
    int ch = src.codePointAt(i);
    if (Character.isLetterOrDigit(ch)) {
        strBuilder.appendCodePoint(ch);
    }
} 
```

我使用`codePointAt`方法通过高和低代理支持以 UTF 32 位表示的字符。我需要知道在执行过滤之前是否需要对每个字符串进行规范化？我指的是`Normalizer.normalize`在执行循环之前调用该方法。如果是，`Normalizer.Form`我应该使用哪个？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T17:28:58.117

这一切都取决于你真正希望你的算法如何表现。

例如，让我们考虑字符串`"a\u0308"`（u+0061ʟᴀᴛɪɴ＆nbsp;sᴍᴀʟʟᴀᴀᴀ，然后是u+0308ᴄᴏᴍʙɪɴɪɴɢs），它在规范上等同于OR `"ä"`（`"\u00e4"`u+00e4ʟᴀᴛɪɴe4ʟᴀᴛɪɴe4ʟᴀᴛɪɴs，ssᴍᴀʟʟsᴍᴀʟʟᴍᴀʟʟʟᴇᴛᴛᴇʀᴀ 规范等效意味着您的算法不应区分这两者。使规范等效字符串具有相同行为的一种简单方法是将两者规范化为相同的规范规范化形式：NFC 或 NFD。

根据这些字符串所代表的内容，您可能希望改用兼容性等效（NFKC 或 NFKD）。例如，通常建议将其用于标识符。这两个将兼容性字符转换为其推荐的等效字符（例如 U+2126 ᴏʜᴍ sɪɢɴ 到 U+03A9 ɢʀᴇᴇᴋ ᴄᴀᴘɪᴛᴀʟ ʟᴇᴛᴛᴇʀ ᴏᴍᴇɢᴀ 或连字字符）。

不管你想要哪种等价，原则都是一样的：如果你想把等价的字符串平等地归一化，这是最简单的方法。

一旦您对所有等效字符串具有相同的行为，您需要考虑另一个问题：如果您要丢弃所有“不是字母或数字的字符”，那么带有字母和组合的字符串会发生什么标记，如`"\u092C\u093F"`(U+092C ᴅᴇᴠᴀɴᴀɢᴀʀɪ ʟᴇᴛᴛᴇʀ ʙᴀ 后跟 U+093F ᴅᴇᴠᴀɴᴀɢᴀʀɪ ᴠᴏᴡᴇʟ sɪɢɴ ɪ)？这是两个独立的代码点，U+093F 不是字母。这两个不构成任何规范化形式。您是否希望删除组合标记（留下ब）？

如果丢弃它们没问题，您可以使用您当前的算法。否则，您可能想要迭代字素簇，粗略地说，它是基本字符序列，后面是组合标记。[Java](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)和[ICU](http://site.icu-project.org/)都提供了用于查找字素集群的 API（Java 将这些称为“字符中断”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:15:47.017

请注意，您用于迭代代码点的代码并不完全正确，我相信您想要：

```
for(int cp, i = 0; i < s.length(); i += Character.charCount(cp)) {
    cp = s.codePointAt(i);
    // Process cp...
} 
```

对不起，不知道你是否需要标准化。

# sql-server-2012 - sql server 2012 网格结果复制/粘贴到 excel 2010

> ID：15274404
> 
> 赞同：0
> 
> 时间：2013-03-07T14:57:50.250
> 
> 标签：sql-server-2012, excel-2010

所以我第一次遇到这个问题，再次运行查询为时已晚。

问题是 varchar 字段的字符返回实际上是在 excel 中做一个新行，所以我的复制/粘贴被搞砸了。

我想我有解决方案，但我想知道其他人是否有其他解决方案

我的解决方案是创建一个小脚本，它将找到“不正确”的行并将内容移动到正确的位置

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:42:34.997

我如何解决我的问题（特定于我的问题的代码）

```
Sub test()

Dim cell As Range
Dim lastGoodRow As Range
For Each cell In Range("a1:a1938")

If IsNumeric(cell.Text) Then
    Set lastGoodRow = Range("v" & cell.Row)
End If

If Not IsNumeric(cell.Text) Then
    lastGoodRow.Value = lastGoodRow.Text & vbCrLf & cell.Text
    If Range("b" & cell.Row).Text <> "" Then
    Range("B" & cell.Row & ":J" & cell.Row).Select
    Selection.Copy
    Range("W" & lastGoodRow.Row).Select
    ActiveSheet.Paste
    End If
End If

Next cell

End Sub 
```

# php - 分块文件上传到 MySQL（来自 PHP）

> ID：15274406
> 
> 赞同：0
> 
> 时间：2013-03-07T14:57:56.493
> 
> 标签：php, mysql, file, upload, insert

我希望能够将文件上传到 MySQL 数据库，即使它们很大。

目前我必须遵守`max_allowed_packets`设置为 1Mb 的 MySQL 变量，并且我不能/不想更改它。

所以我想将文件内容分成 N 个块，然后对第一个块执行“INSERT INTO”，获取它`mysql_insert_id`，然后执行“UPDATE SET”循环，在其中我将剩余的块连接到 BLOB 字段中。

我不是特别喜欢这种解决方案，我觉得它有点*太脏*了。所以我在这里问：有没有其他更好的方法来实现这一目标？也许举个例子？

# javascript - case user.length < 4; console.log("nametoo short :("); break; 为什么这不起作用？

> ID：15274407
> 
> 赞同：1
> 
> 时间：2013-03-07T14:57:58.697
> 
> 标签：javascript, switch-statement, string-length

我正在处理 switch 语句，并且一直在尝试使这里的代码正常工作，但它似乎没有输出正确的 console.log 案例字符串。

```
var user = prompt("What is your name?").toLowerCase();
switch(user){
    case "luka":
    console.log("What a beautiful name, my name is exactly the same :) Hi Luka! :D");
    break;

    case user.length > 10:
    console.log("That's a long name!");
    break;

    case user.length < 4:
    console.log("Not to be rude or impolite to you in any way, but your name is kinda       short :( Not that it isn't cool or something :D");
    break;

} 
```

我试过像这样 (user).length < 4 那样在用户周围加上括号，但这不起作用，我的其他一些尝试也不起作用。有人知道如何正确实施吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T14:59:25.020

你不应该在 switch 语句中使用条件。

使用 if/else if

```
var user = prompt("What is your name?").toLowerCase();
if (user==="luka") {
    console.log("What a beautiful name, my name is exactly the same :) Hi Luka! :D");
} else if (user.length > 10) {
    console.log("That's a long name!");
} else if (user.length < 4) {
    console.log("Not to be rude or impolite to you in any way, but your name is kinda       short :( Not that it isn't cool or something :D");
} else {
    console.log("in else");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:00:28.683

这不是 JavaScript`switch`语句的工作方式。“case”表达式中的值与`switch`表达式的值进行比较。

您在那里的声明相当于：

```
if (user === "luka") {
    console.log("What a beautiful name, my name is exactly the same :) Hi Luka! :D");
}
else if (user === (user.length > 10)) {
    console.log("That's a long name!");
}
else if (user === (user.length < 4)) {
    console.log("Not to be rude or impolite to you in any way, but your name is kinda       short :( Not that it isn't cool or something :D");    
} 
```

因此，您将“用户”的值与与这些值进行比较的*结果*进行比较`user.length`。那些比较结果是布尔值，所以“使用”对他们来说*永远*不会`===`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T15:02:28.040

`switch`在像您这样的情况下使用一种可能的解决方法：

```
var user = prompt("What is your name?").toLowerCase();
switch (true) {
    case (user === "luka"):
        console.log("What a beautiful name, my name is exactly the same :) Hi Luka! :D");
        break;

    case (user.length > 10):
        console.log("That's a long name!");
        break;

    case (user.length < 4):
        console.log("Not to be rude or impolite to you in any way, but your name is kinda       short :( Not that it isn't cool or something :D");
} 
```

但是我会遵循[@epascarello 的](https://stackoverflow.com/a/15274431/1249581)建议并使用`if/else`块。

# mysql - 在日期问题之间进行选择

> ID：15274410
> 
> 赞同：0
> 
> 时间：2013-03-07T14:58:15.660
> 
> 标签：mysql, sql, date

我有这个 SQL：

```
$sql="SELECT * 
FROM   table 
WHERE  expiresdate >= Date(Now()) 
       AND expiresdate <= Date_add(Date(Now()), INTERVAL 10 day) 
ORDER  BY expiresdate ASC"; 
```

它基本上应该显示数据库中将在 10 天内过期的所有行但是，假设过期日期是 2013-03-06 - 此行不会在过期日期后的任何一天显示

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:02:33.823

这应该是您需要的：

```
SELECT
    * 
FROM
    `table`
WHERE
    expiresdate <= CURDATE() + INTERVAL 10 DAY
ORDER BY
    expiresdate ASC 
```

# phantomjs - 如何使用phantomjs？

> ID：15274415
> 
> 赞同：5
> 
> 时间：2013-03-07T14:58:29.827
> 
> 标签：phantomjs

我想学习 phantomjs，但我找不到好的教程。我有两个问题：

1.  以下代码中的问题在哪里（需要捕获按钮的标签并写入文件）：

    ```
    var page = require('webpage').create();
    var fs = require('fs');

    page.onConsoleMessage = function(msg) {
        phantom.outputEncoding = "utf-8";
        console.log(msg);
    };

    page.open("http://vk.com", function(status) {
        if ( status === "success" ) {
            page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", function() {
                page.evaluate(function() {
                    var str = $("#quick_login_button").text();
                    f = fs.open("ololo.txt", "w");
                    f.writeLine(str);
                    f.close();
                    console.log("done");
                });
                phantom.exit();
            });
        }
    }); 
    ```

2.  phantomjs 中有什么教程可以给我建议吗？（非官方网站）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:45:03.313

因为执行是沙盒的，所以网页无法访问幻像对象。

```
var page = require('webpage').create();
var fs = require('fs');

page.onConsoleMessage = function(msg) {
    phantom.outputEncoding = "utf-8";
    console.log(msg);
};

page.open("http://vk.com", function(status) {
    if ( status === "success" ) {
        page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", function() {
            var str = page.evaluate(function() {
                return $("#quick_login_button").text();        
            });
            f = fs.open("ololo.txt", "w");
            f.writeLine(str);
            f.close();
            console.log("done");

            phantom.exit();
        });
    }
}); 
```

PhantomJS 附带了很多包含的示例。看看[这里](https://github.com/ariya/phantomjs/wiki/Examples)。

# sql - 使用单个脚本在不同数据库上执行大量脚本

> ID：15274416
> 
> 赞同：2
> 
> 时间：2013-03-07T14:58:36.120
> 
> 标签：sql, sql-server-2008-r2

我必须在数据库服务器上执行大量脚本，我可以在批处理的帮助下执行它，但是这个数据库服务器有多个数据库，所以对于我在下面编写的每个数据库都提到了脚本-EX-

对于数据库名称1-

```
for %%G in (*.sql) do sqlcmd /S [Server] /d [A] -E   -i"%%G" pause 
```

对于数据库名称2-

```
for %%G in (*.sql) do sqlcmd /S [Server] /d [B] -E   -i"%%G" pause 
```

有什么办法让我不必为每个数据库名称编写这个 .bat 文件？我想编写适用于所有数据库的单个脚本......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:05:27.960

您可以将脚本更改为：

```
for %%G in (*.sql) do sqlcmd /S %1 /d %2 -E   -i"%%G" pause 
```

然后在启动 bash 脚本时传入服务器和数据库名称。例如，如果您的脚本名为“myscript.bat”，那么您可以通过命令行从命令行启动它

```
> myscript.bat server name 
```

# javascript - 奇怪的扭曲拉斐尔旋转

> ID：15274418
> 
> 赞同：0
> 
> 时间：2013-03-07T14:58:41.983
> 
> 标签：javascript, jquery, animation, raphael

在我看来，我已经使用 Raphael 成功获得了 5 个不同的指针。这些指针可以旋转 360 度并随机执行此操作。但是一个行为有点奇怪（最大的指针）。当它开始旋转时，有时它会最小化并且有点作弊以到达另一个旋转点。所以它不会进行完全旋转，而是将自身缩放到中心点，然后将自身缩放到出口点。

这就是我初始化指针的方式：

```
this.canvas = Raphael(document.getElementById('pointer-4'), 126, 126);
this.pointer = this.canvas.image(WEBROOT + 'img/comparator/gauge/pointer-4.png', (126 / 2) - 41, (126 / 2) - 10, 60, 14); 
```

然后我将它初始化为起点：

```
this.pointer.stop().animate({transform: ['R', -60, (126 /2), (126 /2)]}, 1300, 'bounce'); 
```

这是旋转部分：

```
var randomRotation = Math.random() * 280 - 60;
var randomDuration = Math.random() * 700 + 1300;
this.pointer.stop().animate({transform: ['R', randomRotation, (126 / 2), (126 / 2) - 3]}, randomDuration, 'bounce'); 
```

希望任何人都遇到过同样的问题并且知道它来自哪里。

# javascript - Javascript函数不适用于画布游戏

> ID：15274420
> 
> 赞同：0
> 
> 时间：2013-03-07T14:58:43.813
> 
> 标签：javascript, canvas, html5-canvas

我正在创建一个画布游戏（概念是横向滚动无尽的游戏）。我正在尝试制作电源，所以我有一个主游戏 JS 文件以及 powerup.js 等。目前我正专注于我的无敌力量。我创建了一些理论上应该可以工作的简单代码：

在 powerup.js

```
function powerUpInvincibility() {
    invincible = true;
    //window.setInterval(powerUpInvincibilityReset, this.powerUpTime[0]);
}

function powerUpInvincibilityReset() {
    jet1.invincible = false;
} 
```

我在主 js 中设置了无敌变量，但它们都是链接的，我在所有 JS 文件中都有代码工作，但即使我在 Chrome 的控制台中调用 powerUpInvincibility 函数，变量也不会改变。

我试过把它作为喷气机和电源的变量，但这也不起作用，我已经检查了好几次拼写错误。

我迷路了，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:47:29.933

好的对不起大家！实际的问题是我的一个 powerUp 函数试图在 this 不是 powerUp.prototype 函数时访问它。感谢您的回答！

# visual-studio-2010 - VS2010有什么办法可以导出监视窗口的内容吗

> ID：15274423
> 
> 赞同：5
> 
> 时间：2013-03-07T14:58:58.973
> 
> 标签：visual-studio-2010

VS2010有什么方法可以导出监视窗口的内容，类似于导出断点。我需要能够将监视窗口的完整内容（包括所有子节点）导出到文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T03:47:55.287

我怀疑是否可以导出监视窗口的内容。

替代方式 - 导出数据提示。1\. 在源窗口中，将鼠标指针放在当前范围内的任何变量上。出现数据提示。2\. 右键单击​​一个变量，然后单击固定到源。3\. 在调试菜单上，单击导出/导入数据提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-29T01:16:17.773

[这里](https://marketplace.visualstudio.com/items?itemName=OmarElabd.ObjectExporter)有一个 Visual Studio 扩展。请也看一下。

如果没有帮助，请按照以下步骤操作：

*目标是将变量值一一写入即时窗口并从那里复制到 Excel 工作表。*

**#1。**当断点命中时，Menu ->Debug->Windows->Immediate（或 VS2019 中的 Ctrl+Alt+I）

**#2。**键入变量名，IntelliSense 将列出该根变量的所有属性。获取每个值并复制/粘贴到 Excel 工作表。希望它会有所帮助。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T19:00:36.727

如果你只是想保存一个在监视窗口上，单击根/父对象，右键单击-> 全选。

然后复制并粘贴到空白的excel工作簿中。

# jenkins - 詹金斯内存不足错误

> ID：15274425
> 
> 赞同：0
> 
> 时间：2013-03-07T14:59:02.857
> 
> 标签：jenkins, continuous-integration

我已经将 jenkins 部署为 tomcat 上 AIX 中的 war 文件。

现在我没有设置任何工作。

说在工作几分钟后，我出现内存不足错误，只有在 tomcat 重新启动后我才能访问 Jenkins。

我该如何解决这个问题。

堆栈跟踪如下所示：

```
Exception: jar:file:/opt/apache-tomcat-5.5.25/webapps/jenkins/WEB-INF/lib/jenkins-core-1.504.jar!/jenkins/model/Jenkins/sidepanel.jelly:26:86: <st:include> java.lang.OutOfMemoryError
Stacktrace: 
javax.servlet.ServletException: jar:file:/opt/apache-tomcat-5.5.25/webapps/jenkins/WEB-INF/lib/jenkins-core-1.504.jar!/jenkins/model/Jenkins/sidepanel.jelly:26:86: <st:include> java.lang.OutOfMemoryError
    at org.kohsuke.stapler.jelly.JellyRequestDispatcher.forward(JellyRequestDispatcher.java:60)
    at jenkins.model.Jenkins.doScript(Jenkins.java:3356)
    at jenkins.model.Jenkins.doScript(Jenkins.java:3332)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:288)
    at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:151)
    at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:90)
    at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:111)
    at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:573)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:487)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:810) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:20:43.117

有一个详细的 Jenkins wiki 主题[我得到 OutOfMemoryError](https://wiki.jenkins-ci.org/display/JENKINS/I%27m+getting+OutOfMemoryError)关于分析原因、增加堆空间等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:55:17.377

几个月前有一个模拟问题，这是一个“真正的记忆问题”。升级内存，一切正常。你交叉检查过这个吗？

# java - Eclipselink - @CascadeOnDelete 不适用于 @OneToOne 关系

> ID：15274428
> 
> 赞同：2
> 
> 时间：2013-03-07T14:59:09.467
> 
> 标签：java, jpa, jdbc, eclipselink

我班上有两个关系：

```
@OneToOne(mappedBy = "poi", cascade = { CascadeType.ALL })
@CascadeOnDelete
protected PoiDescription description;

@OneToMany(mappedBy = "poi", cascade = { CascadeType.ALL })
@CascadeOnDelete
protected List<PoiAdditional> additionals = new ArrayList<>(); 
```

在我生成的 DDL（用于 postgres）中，我变成：

```
ALTER TABLE POI_DESCRIPTION ADD CONSTRAINT FK_POI_DESCRIPTION_POI_ID FOREIGN KEY (POI_ID) REFERENCES POI (ID)
ALTER TABLE POI_ADDITIONAL ADD CONSTRAINT FK_POI_ADDITIONAL_POI_ID FOREIGN KEY (POI_ID) REFERENCES POI (ID) ON DELETE CASCADE 
```

为什么关系@OneToMany 有语句“ON DELETE CASCADE”而关系@OneToOne 没有？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:39:27.463

EclipseLink 中的当前 DDL 生成代码似乎是检查 @OneToOne 源上的 @CascadeOnDelete，而不是 mappedBy。但我认为你是对的，它应该使用mappedBy检查映射。

请记录一个错误。

作为一种解决方法，您应该能够将其添加到双方。

# java - 使用 X-Stream 在 Android 中反序列化 XML

> ID：15274435
> 
> 赞同：1
> 
> 时间：2013-03-07T14:59:28.243
> 
> 标签：java, android, xstream

*已解决* 将内容内容更改为：

```
// Lists
    @XStreamImplicit(itemFieldName = "Contents")
    public List<Contents> Contents = new ArrayList<Contents>(); 
```

我正在尝试反序列化以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Items>
   <Item>
      <type>Test</type>
      <uid>1</uid>
      <depends>1</depends>
      <catid>1</catid>
      <label>Test</label>
      <defaultVal>default</defaultVal>
      <answer>Test</answer>
      <Contents>
         <Content>
            <uid>1</uid>
            <label>Test</label>
         </Content>
      </Contents>
   </Item>
</Items> 
```

问题是，当我到达 Contents 时，它会由于深入另一个级别而崩溃。

这就是我对我的 XML 进行反序列化的方式，它可以在没有内容的情况下工作。

```
public static Object DeSerializeFromXML(String xml, Class items, Class item)
{
    XStream xstream = new XStream();
    xstream.processAnnotations(new Class[] { items, item });

    return xstream.fromXML(xml);
} 
```

下面是我如何调用 DeSerialize 方法：

```
Items reader = (Items)Data.Serialization.Instance().DeSerializeFromXML(xml, Items.class, Item.class); 
```

最后我的对象：

物品.cs

```
@XStreamAlias("Items")
public class Items
{
    public Items() { items = new ArrayList<Item>(); }

    @XStreamImplicit(itemFieldName = "Item")
    public List<Item> items = new ArrayList<Item>();
} 
```

物品.cs

```
@XStreamAlias("Item")
public class Item
{
    // Type
    public String type = "";

    // Ids
    public int uid = 0;
    public int catid = 0;
    public int depends = 0;

    // Values
    public String label = "";
    public String defaultVal = "";
    public String answer = "";

    // Lists
    public Contents content;    

    public Item()
    {
    }

    public Item(String type, int uid, int catid, int depends, String label,
            String defaultval, String answer)
    {
        this.type = type;
        this.uid = uid;
        this.catid = catid;
        this.depends = depends;
        this.label = label;
        this.defaultVal = defaultval;
        this.answer = answer;

        content = new Contents();
    }

    @XStreamAlias("Contents")
    public static class Contents
    {
        public Contents()
        {
            contents = new ArrayList<Content>();
        }

        @XStreamImplicit(itemFieldName = "Content")
        public List<Content> contents = new ArrayList<Content>();
    } 
```

内容.cs

```
@XStreamAlias("Content")
public class Content
{
    public int uid = 0;
    public String label = "";

    public Content()
    {
    }

    public Content(int uid, String label)
    {
        this.uid = uid;
        this.label = label;
    } 
```

我不太确定我对下一个级别的注释是否正确。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:59:56.887

通过将 Contents 更改为列表并将 XStream marshall 添加到它来解决它。

```
@XStreamImplicit(itemFieldName = "Contents")
public List<Contents> Contents = new ArrayList<Contents>(); 
```

# ruby-on-rails - 名称修复/验证？

> ID：15274438
> 
> 赞同：2
> 
> 时间：2013-03-07T14:59:31.640
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我经常发现，用户在注册时输入的名称格式很差。我从 Paypal IPN 和其他支付网关获得各种疯狂​​的格式，甚至从所有小写字母到所有大写字母，甚至完全搞砸了。

我对这些信息所做的一件事是发送电子邮件并提供问候，但我不喜欢格式不正确的名称。以前有人想过这个问题并想出一个快乐的中间道路解决方案吗？例如，我意识到简单地纠正看似错误的拼写是一种糟糕的形式，但至少修正“合理的”是明智的。至少是大写。也许简单地将名字和姓氏字符串中每个不同“单词”的第一个字母向上转换就足够了？

或者有没有更好的方法？也许是“McBerry”和“van Buuren”之类的常用名称大写数据库？宝石或类似的工具？只是有点好奇。也许在这个话题上花这么多心思是愚蠢的，但我真的很喜欢在与用户交流时尽可能礼貌和专业，而不是像往常一样使用格式不正确的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:33:54.087

您可以希望做的最好的事情是将他们的名字/姓氏/中间名的第一个字母大写：

"`bob".capitalize => "Bob"`

来自红宝石：

```
capitalize → new_str click to toggle source

Returns a copy of str with the first character converted to uppercase and the remainder to lowercase. Note: case conversion is effective only in ASCII region.

"hello".capitalize    #=> "Hello"
"HELLO".capitalize    #=> "Hello"
"123ABC".capitalize   #=> "123abc" 
```

您还可以使用`downcase`将所有内容调平，然后`capitalize`使其“正确”。

例如：

```
fName = "jIMMY"
lName = "sMITH"

fName.downcase
lName.downcase

fName.capitalize
lNmae.capitalize

puts fName + lName => Jimmy Smith 
```

但是，对于类似 的名称`VanBuuren`，可能会更难一些。

这是一个指向 Ruby 字符串的链接，其中包含一些可以帮助您完成任务的方法。

[http://www.ruby-doc.org/core-2.0/String.html](http://www.ruby-doc.org/core-2.0/String.html)

# ruby - 将 ruby 的基准输出保存到文件中

> ID：15274440
> 
> 赞同：5
> 
> 时间：2013-03-07T14:59:34.827
> 
> 标签：ruby, benchmarking

我编写了一个简短的 ruby​​ 脚本来计时我拥有的命令行实用程序的运行时间。我正在使用 ruby​​ 的`Benchmark`模块：

```
Benchmark.bm(" "*7 + CAPTION, 7, FMTSTR, ">avg:") do |bench|
  #this loops over a  couple of runs
  bench.report("Run #{run}: ") do
    begin
    Timeout::timeout(time) {
      res = `#{command}`
    }
    rescue Timeout::Error
    end
  end
end 
```

超时使用可能有点粗略，但应该可以满足我的需要。问题`Benchmark.bm`只是打印基准测试结果。我希望能够将它们保存到一个文件中以供进一步处理（它在一个脚本中运行了几次，所以我不想只消耗终端输出 - 对于这么简单的事情来说似乎太费劲了）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:37:22.087

这比您想象的要容易，只需将以下行添加到脚本的开头。

```
$stdout = File.new('benchmark.log', 'w')
$stdout.sync = true 
```

一切都被重定向到文件，当然如果你需要一些输出到控制台，你将不得不像这样停止重定向。

```
$stdout = STDOUT 
```

编辑：这里是我用来测试这个的 scipt

```
require 'benchmark' 

$stdout = File.new('console.out', 'w')
$stdout.sync = true

array = (1..100000).to_a 
hash = Hash[*array]

Benchmark.bm(15) do |x| 
  x.report("Array.include?") { 1000.times { array.include?(50000) } } 
  x.report("Hash.include?")  { 1000.times { hash.include?(50000) } } 
end 
```

# c++ - 在不关闭文件的情况下将打开文件的 ios_base 从“out”更改为“app”

> ID：15274444
> 
> 赞同：0
> 
> 时间：2013-03-07T14:59:49.150
> 
> 标签：c++, io

`FILE*`在 C++ 中是否可以在不关闭并重新打开它的情况下更改打开的输出模式？
我有一个`FILE*`打开模式`std::ios_base::out`，想以`std::ios_base::app`更优雅的方式切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:07:46.087

如果您想在文件末尾写入，只需查找文件末尾，这是更简单的解决方案。

在 POSIX 系统（包括 linux、unix、...）和很可能在 Windows 上，一旦打开文件，就无法更改文件的打开模式。因此，您必须关闭它并重新打开它。

如果您的操作系统有一些允许这样做的特殊性并且您不关心可移植性，您可以通过在子类中使用正确的系统调用来实现这一点`std::filebuf`，然后创建自己的`std::fstream`子类。

# javascript - 如何让灯箱滚动灯箱而不是页面

> ID：15274445
> 
> 赞同：3
> 
> 时间：2013-03-07T14:59:50.517
> 
> 标签：javascript, jquery, html, css

当用户单击产品时，我正在使用 lightbox_me jquery 插件打开灯箱。通常，灯箱内容会延伸到首屏下方，而当您向下滚动时，右侧滚动条会移动整个页面。

我希望它像 pinterest 灯箱一样工作，右滚动条只滚动灯箱，页面的其余部分保持固定。我已经看过一些关于此的帖子，但似乎没有什么对我有用。

```
jQuery(function(){

$('.productBoxLink').click(function(e) {
    var box = $(this).siblings(".productLightboxContent").html();
    $('.lightBox').lightbox_me({
        centered: false,
        modalCSS:  {top: '50px'},
        onLoad: function() { 
              $('.productLightbox').html(box);
              $('.productUpdateInner').show();
            },
        onClose: function() {
              $('.productUpdateInner').hide();
            }
        });
    return false;
  });
});

.lightBox {
width: 450px;
background-color: #fff;
top: 400px;
position: fixed;
padding: 30px;
text-align: center;
display: none;
clear: both;
-moz-box-shadow: 0 0 5px #5C5C5C;
-webkit-box-shadow: 0 0 5px #5C5C5C;
box-shadow: 0 0 5px #5C5C5C;
border-radius: 5px;
} 
```

我读过这可以通过对我的 CSS 进行一些更改来完成。有谁知道我如何使用显示的代码实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:02:56.630

将此添加到 .lightBox：

```
height:600px; /* You need to set a specific height - px or %*/
overflow-x:scroll; /* Tell the container to scroll if the content goes beyond bounds*/ 
```

**更新**

```
width:100%;
overflow-x:scroll; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:05:12.543

如果你想让它的大小大于视口，很可能是因为你的`position: fixed`线。将其更改为`position: absolute`，您应该会很好。

固定和绝对都将元素从文档流中取出，因此它的呈现方式应该没有净变化，而是`fixed`将其固定到该特定位置并强制它永远不动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T14:41:13.957

我想一般的答案是制作灯箱的背景（即灯箱之前的内容；主要内容包装器）`position: fixed;`并用javascript将其**顶部**值调整为与灯箱打开时用户滚动位置相对应的负值. 除此之外，灯箱需要`position: absolute;`与固定的**顶部**/**左侧**值相同。

当用户关闭灯箱时，需要恢复以前的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T22:11:07.840

打开灯箱时向 html 添加一个类。例如：

```
.lightbox-active{overflow:hidden} 
```

此外，您的灯箱应该具有下一个样式：

```
.lightbox{overflow-x:hidden;overflow-y:scroll} 
```

当您关闭灯箱时，您已经从 html 中删除了 lightbox-active 类。

# vb.net - 在后台线程中使用 ASP.NET ReportViewer 控件

> ID：15274448
> 
> 赞同：1
> 
> 时间：2013-03-07T15:00:08.207
> 
> 标签：vb.net, multithreading, reporting-services

我有一个应用程序将大约 100 个报告呈现为 PDF，并使用带有 SSRS 2008 的 asp.net Report Viewer 控件将它们保存到磁盘。我正在尝试在单独的线程上在后台运行这个称为 ProcessReports 的方法，以便浏览器不空闲/不超时（过程大约需要 10 分钟）。

当我开始一个新线程时：

```
 Dim t As New Thread(AddressOf ProcessReports)
    t.Start() 
```

我希望主线程在标签中显示进度消息

```
 lblMessage1.Visible = True
     lblMessage1.Text = "Processing..." 
```

问题：当后台线程运行 ProcessReports 方法并点击 ReportViewer 控件时：

```
 ReportViewer1.ServerReport.ReportServerUrl = _
       New Uri("https://mysite.net/ReportServer")
    ReportViewer1.ServerReport.ReportPath = _
       "/mypath/My_Report" 
```

标签从不显示任何内容，并且我不断收到以下错误消息：

```
 Object reference not set to an instance of an object. 
```

如何在主线程显示进度消息时让 ReportViewer 控件在后台线程上工作？

# mysql - grails服务死锁与mysql

> ID：15274451
> 
> 赞同：1
> 
> 时间：2013-03-07T15:00:16.617
> 
> 标签：mysql, grails, service, locking, acl

我正在尝试将一长串文件添加到 mysql 中，并使用带有 grails 的 spring ACL 服务来附加权限。所以，在我的控制器中，我有：

```
Files.withTransaction {
            Files file = new Files(dataStore:ds,created:new Date(),path:target,name:fileName,contentType:contentType,contentLength:contentLength,isFolder:false).save(flush:true)
            file = Files.lock(file.id)
            filesService.addPermission(file, username ,BasePermission.ADMINISTRATION)
        } 
```

我不担心 Files 域对象，它支持大量数据，（特别是因为我在 mysql 中禁用了版本控制），问题出在使用 aclUtilService 的 filesService 上，

```
@Transactional
    @PreAuthorize("hasRole('ROLE_ADMIN') or hasRole('ROLE_USER') or hasRole('ROLE_GROUP_OWNER')")
    def addPermission(Files f, String username,Permission permission) {
        aclUtilService.addPermission f,username,permission
    } 
```

随机我有以下死锁（乐观？）错误：

> 尝试获取锁时发现死锁；尝试重新启动事务。Stacktrace 如下： com.mysql.jdbc.exceptions.jdbc4.MySQLTransactionRollbackException: 尝试获取锁时发现死锁；尝试在 com.mysql.jdbc.Util.getInstance(Util.java:381) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError. java:1045) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3558) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO .java:3490) 在 com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959) 在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2109) 在 com.mysql.jdbc.ConnectionImpl.execSQL( ConnectionImpl.java:2648) 在 com.mysql.jdbc.PreparedStatement。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:25:43.003

只是将事务封装在控制器中并在服务中使用@Transactional 来解决问题：

```
Files.withTransaction {
                    Files file = new Files(
...
                    if (file.validate()) {
                        file.save()
                        filesService.addPermission(file,username,BasePermission.ADMINISTRATION)

...}
} 
```

# c# - 无法显示数据

> ID：15274452
> 
> 赞同：0
> 
> 时间：2013-03-07T15:00:19.123
> 
> 标签：c#, xaml, listview, data-binding, winrt-xaml

我不明白为什么，但我无法在列表视图上显示数据。

我能做些什么？

这是我的代码：

```
<FlipView HorizontalAlignment="Left" Margin="209,52,0,0"
          VerticalAlignment="Top" Width="892" Height="432" Grid.Row="1">
    <ListView HorizontalAlignment="Left" Height="426" 
              VerticalAlignment="Top" Width="453" 
              Margin="433,0,0,0" DataContext="TwitterDataViewModel"
              ItemsSource="{Binding ListeTweet}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" Height="132">
                    <Image Source="{Binding ImageUrl}" Height="73" 
                           Width="73" VerticalAlignment="Top" Margin="0,10,8,0"/>
                    <StackPanel Width="370">
                        <TextBlock Text="{Binding Name}" Foreground="#FFC8AB14"
                                   FontSize="28" />
                        <TextBlock Text="{Binding Text}" TextWrapping="Wrap"
                                   FontSize="24" />
                    </StackPanel>
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</FlipView> 
```

有什么事？

* * *

我照顾了我的 TwitterDataViewModel，它是一个 INotifyPropertyChanged 类......

```
namespace App1
{
public class TwitterDataViewModel : INotifyPropertyChanged
{
    private User _user;
    public User User
    {
        get { return _user; }
        set
        {
            _user = value;
            RaisePropertyChanged("User");
        }
    }

    private List<Tweet> _listeTweet;
    public List<Tweet> ListeTweet
    {
        get { return _listeTweet; }
        set
        {
            _listeTweet = value;
            RaisePropertyChanged("ListeTweet");
        }
    }
    private List<User> _listeUser;
    public List<User> ListeUser
    {
        get { return _listeUser; }
        set
        {
            _listeUser = value;
            RaisePropertyChanged("ListeUser");
        }
    }

    private List<NameValueItem> _listeDonneesGraphiques;
    public List<NameValueItem> ListeDonneesGraphiques
    {
        get { return _listeDonneesGraphiques; }
        set
        {

            _listeDonneesGraphiques = value;
            RaisePropertyChanged("ListeDonneesGraphiques");
        }
    }

    public TweetViewModel tweetviewmodel { get; set; }
    public UserViewModel userviewmodel { get; set; }

    public TwitterCommand<object> ClickSearch { get; set; }

    readonly Page page;

    public TwitterDataViewModel(Page page)
    {
        tweetviewmodel = new TweetViewModel(page);
        userviewmodel = new UserViewModel(page);
        this.page = page;
        ClickSearch = new TwitterCommand<object>(AfficheDonnee); //bouton NEXT

    }

    void AfficheDonnee(object obj)                      //Méthode qui sera exécutée lors du click sur le bouton NEXT
    {          
                                     //Consiste à afficher les données précédemment récupérées.

        ListeTweet = tweetviewmodel.RecupererTweets(); //ok ca fonctionne
        //tweetviewmodel.TrouverMot();
        //tweetviewmodel.TrouverTweetSpecific();
        //Task.Run(async () => 
        //{
        //    //je fais une tâche et j'attend 15 minutes
        //    userviewmodel.GetScreenName();
        //    await Task.Delay(15 * 600);//15 minutes

        //});

        //Task.Run( () =>
        //{

        //    userviewmodel.GetScreenName();

        //});

        //User = userviewmodel.RecupererInfoUser();
      //  ListeUser = userviewmodel.GetScreenName();
        //ListeDonneesGraphiques = new List<NameValueItem>(); //Liste des données numérique qui va servir pour le graphique de données
        //tweetviewmodel.TrouverMot();                                                    //Problème à l'affichage

        //ListeDonneesGraphiques.Add((new NameValueItem() { Name = "Tweets", Value = userviewmodel.Users.NbStatus }));
        //ListeDonneesGraphiques.Add((new NameValueItem() { Name = "Following", Value = userviewmodel.Users.NbFollowing }));
        //ListeDonneesGraphiques.Add((new NameValueItem() { Name = "Followers", Value = userviewmodel.Users.NbFollowers }));
        //ListeDonneesGraphiques.Add((new NameValueItem() { Name = "Favorite", Value = userviewmodel.Users.NbFavorite }));
        //ListeDonneesGraphiques.Add((new NameValueItem() { Name = "Listed", Value = userviewmodel.Users.NbListe }));
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void RaisePropertyChanged(string prop)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(prop));
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:04:55.593

ItemsSource 是依赖属性吗？还是使用 INotifyPropertyChanged 接口？

如果 UI 没有收到数据填充的通知，则不会显示任何内容

看看[这个](https://stackoverflow.com/questions/2095868/wpf-seemingly-super-simple-dependency-property)...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:37:48.187

当您向 a 添加项目时，`List<>`它不会改变 - 它的内容会改变，但`List`本身不会改变。
当您将项目添加到列表时，`ListeTweet`不会调用 setter。但是，您的吸气剂是！

为了解决您的问题，您可以将您的列表更改为在您`ListeTweet`向其中添加项目时[`ObservableCollection<Tweet>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)将引发事件的列表。`OnCollectionChanged`

# android - 如何为应用程序的 TalkBack 设置不同的标签？

> ID：15274459
> 
> 赞同：2
> 
> 时间：2013-03-07T15:00:44.187
> 
> 标签：android, talkback

假设我有一个很棒的应用程序，因为它是一个很棒的应用程序，所以它必须有一个 Web2.0 的名称，所以我们称它为**iFygs**之类的东西（完全虚构，如果有人真的在某个地方有这个应用程序，对不起）。我想保持我对这两个词的品牌影响，就像上面一样。另一方面，我想在我可以到达的地方相对容易接近，我认为上面的内容清楚地被读为**I Figs**，而不是现在读到的那个听起来像**eh-fi-gs**

有没有办法像为 ImageButton 一样为 android 的活动提供 contentDescription。或者有没有办法专门为屏幕阅读器提供翻译，比如 res/values-en-rUS-sr/ 或类似的东西？或者这只是不可能做到，因为它实际上是我的家庭发射器正在这样做，所以我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T22:24:10.373

在清单中为您的活动添加标签

```
<activity
   android:name="com.package.ifygs.activity"
   android:label="I Figs" /> 
```

您还可以在其中设置字符串资源。有关该属性的更多信息：http: [//developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

# actionscript-3 - 如何删除数组actionscript3中的重复值

> ID：15274460
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:00:48.133
> 
> 标签：actionscript-3, flash

我的 arr4 数组值为 11,11,11,12,12,12。我想删除重复值，我想得到输出 11,12（在删除重复值之后）。但是使用这个代码我只得到了输出 12

```
 var g:int = 0;
    var arr4:Array = new Array();
        while(g < arr4.length) {
       while(g < arr4.length+1 && arr4[g] == arr4[g+1]) {
           arr4.splice(g, 1);
       }
        g++;
        } 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:05:00.430

这是一种更清洁更快的方法

```
 function myFilter(element:*, index:int, arr:Array):Boolean {
        return (index==arr.lastIndexOf(element));
    }

    var arr4:Array = new Array(1, 1, 1, 2, 2, 2,3, 3, 3);
    arr4= arr4.filter(myFilter)
    trace('numbers filtered:' + arr4) 
```

[编辑]

这是一些比较速度的测试代码。
这可能不是最好的测试，但它确实表明过滤方法比循环方法花费大约 0.02% 的时间。

```
function getArray():Array{
    return [1,8,4,6,1,1,10,0,7,5,8,3,8,6,0,6,7,4,4,5,1,6,2,4,7,1,5,1,0,7,4,7,4,4,1,5,5,9,0,7,6,10,4,10,9,4,3,8,2,0,10,8,2,1,1,3,0,4,1,4,8,8,8,2,9,3,0,8,10,3,4,8,1,4,9,9,9,8,1,5,8,1,9,1,7,4,1,4,7,5,4,0,1,8,0,1,9,8,10,9,9,9,2,10,1,2,5,3,7,4,8,0,6,9,8,6,6,9,8,3,4,7,3,1,2,8,1,0,9,5,8,2,7,7,8,2,4,7,2,9,10,7,2,3,2,8,1,1,9,1,7,5,7,8,9,10,8,2,2,7,2,3,7,1,7,5,9,9,3,5,2,4,1,9,8,9,4,8,9,6,8,4,10,4,9,8,7,7,9,8,0,1,7,2,0,5,6,2,4,10,8,4,4,0,3,6,0,4,0,9,8,3,7,3,10,9,6,9,8,3,8,10,2,5,4,6,3,5,7,2,8,0,3,5,9,5,1,3,9,10,10,6,5,2,4,1,1,9,2,6,3,2,5,8,2,3,3,4,2,5,10,9,10,1,5,8,4,6,1,5,1,10,4,6,9,9,0,5,10,6,5,7,10,5,3,6,2,1,7,9,0,2,2,7,10,8,7,5,4,10,3,3,2,7,7,3,5,3,1,9,4,0,2,3,7,2,1,9,2,2,4,1,2,2,4,9,5,2,2,9,7,6,8,3,6,3,5,6,8,0,2,10,1,1,5,3,8,7,3,3,4,2,7,1,7,3,7,5,1,2,2,8,0,1,4,4,1,7,2,8,3,1,1,10,4,4,7,6,9,2,6,4,1,7,2,4,5,8,8,7,8,8,6,9,1,8,1,2,1,7,3,1,9,9,6,6,2,8,6,3,1,9,2,8,5,1,6,3,5,4,9,0,1,8,6,2,6,5,1,4,8,7,10,5,2,1,9,7,10,0,2,9,0,2,2,4,1,6,9,8,10,9,1,4,8,0,9,5,6,3,5,2,7,0,9,5,5,8,9,6,6,8,4,6,1,5,7,5,5,2,8,1,6,1,8,7,8,9,5,1,5,6,8,8,6,2,8,8,9,1,1,8,2,4,1,8,10,10,3,7,7,6,6,2,7,9,6,9,7,6,2,1,1,3,2,6,7,2,6,1,6,1,5,9,4,9,8,7,5,6,5,7,10,2,8,3,5,1,2,5,3,7,9,0,7,2,9,10,9,9,6,5,4,0,7,9,4,3,9,9,8,4,3,8,10,6,10,4,4,4,7,2,3,6,5,3,8,7,8,5,3,0,4,6,5,8,6,2,5,1,9,3,7,10,7,1,5,8,7,10,5,8,6,
    6,4,6,5,5,6,9,0,6,6,4,5,7,4,2,3,7,10,3,8,1,1,3,7,5,5,6,6,0,6,6,0,5,6,10,2,9,7,9,4,10,3,5,3,8,6,3,5,8,6,8,8,8,4,5,3,9,4,0,6,1,1,7,0,1,5,7,7,5,5,1,8,10,2,8,1,7,6,4,5,1,2,8,4,4,3,2,9,5,1,1,8,9,7,1,8,6,3,0,6,7,6,10,7,4,2,9,3,4,9,2,1,5,4,9,4,5,7,9,3,1,6,9,1,9,3,5,2,3,8,9,3,6,8,2,7,2,1,9,4,9,9,4,10,8,3,1,8,7,4,6,3,2,9,7,2,10,0,8,0,9,7,2,10,1,4,5,10,7,3,3,3,9,0,8,7,9,8,5,0,9,3,2,6,2,7,7,9,2,10,0,6,5,3,6,3,5,2,6,3,1,1,3,8,1,2,10,7,1,8,3,3,3,8,5,6,7,4,7,5,7,2,5,6,5,8,1,10,1,7,4,2,9,9,5,8,8,2,0,2,6,8,8,7,9,7,1,7,9,4,3,6,1,7,4,7,10,2,5,1,4,1,3,9,10,6,1,7,6,0,5,2,7,6,8,3,5,7,1,10,10,8,5,5,8,4,10,5,1,8,7,0,2,5,5,1,1,2,6,7,2,2,1,8,9,2,5,3,7,8,5,8,1,8,2,8,2,7,5,2,3,1,5,9,2,8,4,1,1,0,8,7,1,6,3,9,1,4,4,2,8,2,8,7,8,4,8,9,9,7,4,3,2,1,1,7,7,3,10,3,8,6,9,7,4,5,0,8,2,2,7,10,3,9,8,6,1,7,7,7,9,6,1,4,10,6,0,2,4,0,5,5,5,9,4,1,8,8,4,9,1,7,8,6,9,4,0,0,3,3,5,5,7,1,7,10,9,0,0,6,6,5,7,2,2,9,2,2,2,1,10,9,1,7,8,7,7,2,7,2,0,8,4,10,9,9,8,5,4,7,2,2,9,6,4,9,9,2,2,2,9,5,2,5,3,2,5,7,4,4,5,3,7,6,5,1,9,8,10,1,7,8,5,7,8,1,4,9,5,4,10,3,4,2,8,5,4,3,5,5,3,7,7,8,4,5,3,2,10,9,5,5,1,10,8,8,8,6,10,3,8,0,7,10,2,2,6,3,0,7,4,9,2,6,1,0,10,5,2,2,0,5,5,2,7,5,8,3,9,6,8,9,8,9,8,5,9,4,9,7,10,5,1,7,6,9,1,1,2,3,4,2,5,3,3,2,9,10,0,0,2,4,0,3,0,8,5,1,5,4,5,9,9,9,10,5,6,8,5,2,7,7,6,6,6,8,1,0,6,9,3,1,9,5,4,2,1,1,10,1,3,4,5,7,4,8,3,8,5,4,10,0,6,1,7,1,9,8,0,0,9,4,6,3,1,8,0,2,4,10,6,6,5,5,7,1,8,4,5,6,0,3,7,1,2,9,3,10,4,1,1,10,9,7,1,4,8,6,3,0,7,7,9,8,9,1,8,6,10,7,7,5,1,6,8,6,5,9,2,5,1,1,8,1,6,4,6,7,10,1,1,
    1,8,10,5,4,4,3,9,7,5,4,8,5,5,10,8,7,7,3,5,8,6,7,8,1,0,0,3,5,8,4,2,7,10,8,3,0,2,7,5,2,5,1,5,8,1,6,1,10,2,3,6,9,7,1,1,1,3,6,5,6,0,9,2,3,2,3,6,9,8,4,10,2,1,10,8,4,6,8,4,7,9,6,5,1,9,9,5,6,10,7,4,1,3,1,4,5,8,3,3,5,9,9,6,9,1,8,2,9,2,9,6,5,10,9,0,1,8,6,1,8,1,1,9,8,1,7,5,9,5,9,1,7,5,9,10,1,0,10,3,0,9,7,5,10,8,7,0,2,1,3,6,5,3,5,9,2,2,8,3,7,8,4,2,5,10,4,7,6,1,7,6,2,2,7,0,2,1,3,8,3,2,4,10,2,8,8,10,6,0,6,7,9,2,5,5,1,2,4,5,4,1,5,9,5,0,9,2,5,4,0,4,7,9,3,4,9,0,9,3,10,9,0,9,6,4,7,5,6,0,5,8,9,1,4,0,9,4,3,0,7,6,1,9,3,6,5,6,7,3,4,2,6,2,7,8,3,9,1,10,10,10,3,0,6,4,4,3,7,8,3,2,4,8,2,2,3,6,7,9,5,2,7,4,1,1,5,3,8,3,9,2,5,2,8,1,3,9,2,0,5,7,5,7,9,6,1,4,1,9,2,5,5,10,7,3,4,4,3,6,6,2,8,4,4,4,3,5,6,9,8,5,7,4,3,1,9,7,8,2,3,6,2,6,4,4,0,8,9,8,4,9,2,3,8,5,2,4,6,2,6,6,6,3,9,10,5,7,6,9,2,5,7,3,2,4,5,9,3,0,5,10,1,10,4,9,6,3,9,7,5,7,9,7,5,10,3,5,1,6,1,8,9,7,3,6,2,0,1,8,2,5,5,5,3,10,4,5,5,1,8,2,0,6,2,8,1,7,10,3,0,1,0,8,1,2,5,5,3,4,2,7,3,5,1,7,7,9,9,5,4,8,7,7,2,8,8,10,2,10,9,8,5,2,3,9,3,5,10,10,7,3,7,8,7,10,5,6,4,6,9,8,8,7,2,7,3,4,2,6,8,1,9,10,5,10,4,1,9,4,6,3,10,10,1,1,2,6,2,2,4,6,5,7,6,4,9,5,7,5,6,8,3,1,1,8,6,4,8,6,7,8,10,1,0,7,7,5,2,10,10,4,9,7,3,8,6,8,6,1,1,9,4,6,0,5,3,9,1,4,7,5,9,
    3,10,6,9,6,6,4,0,0,2,4,7,2,8,0,9,4,3,3,4,6,5,0,3,2,2,2,8,3,10,10,1,6,8,8,9,9,9,9,9,7,9,6,9,6,2,3,8,6,2,8,3,2,2,10,2,5,0,2,9,4,8,4,8,2,4,7,4,3,9,9,2,7,0,9,9,9,7,5,3,7,6,6,0,3,9,6,4,5,5,7,2,2,5,0,9,5,0,7,0,8,9,6,8,4,3,6,2,0,6,6,3,8,3,3,0,2,6,3,8,10,5,3,4,6,4,1,7,4,8,1,4,3,4,4,3,9,10,5,8,3,6,0,4,6,3,5,4,1,2,10,5,8,7,4,1,8,2,8,4,9,2,1,6,4,2,10,7,3,3,6,0,3,4,0,3,5,3,2,3,5,5,9,9,1,6,1,10,3,3,6,6,4,3,3,10,4,5,4,4,6,10,10,8,9,9,4,6,7,8,4,2,1,3,4,6,4,4,6,3,3,4,9,2,6,9,4,1,7,4,7,4,4,2,10,5,9,2,8,6,5,7,9,6,0,2,4,9,6,9,7,10,7,4,0,9,8,2,8,8,7,6,2,0,7,3,7,2,6,10,1,2,6,2,2,1,9,4,1,6,0,6,4,10,1,4,8,3,5,0,9,7,8,6,3,0,5,7,10,7,7,8,4,5,8,2,7,6,0,6,5,0,4,3,9,2,4,8,10,2,6,6,5,5,9,6,2,1,2,1,7,8,9,9,7,1,0,3,2,2,8,3,9,7,10,9,1,4,3,9,1,6,1,2,9,1,1,3,5,0,3,6,10,9,1,7,10,7,9,3,2,2,1,1,8,4,1,2,6,2,8,2,0,3,6,5,6,6,9,6,8,9,3,6,10,0,0,9,5,1,5,8,9,3,3,6,6,7,5,5,8,4,9,1,7,8,6,2,9,4,1,8,3,5,1,5,8,4,3,6,3,7,5,6,0,1,4,4,7,9,2,3,3,0,2,1,3,7,8,3,9,2,2,1,2,9,9,2,10,10,5,9,3,3,7,8,9,9,5,8,2,0,8,9,6,4,3,0,4,7,7,0,3,4,8,1,7,5,8,2,8,1,4,7,1,6,9,4,9,8,3,9,1,5,1,5,7,5,4,9,4,5,5,9,2,8,5,3,7,1,5,8,6,9,8,1,6,9,1,9,3,0,1,3,9,9,4,1,1,7,4,4,8,5,10,3,9,2,5,3,5,7,10,5,1,9,9,3,7,1,7,7,10,5,5,8,3,4,4,7,2,9,6,2,3,9,7,6,4,8,8,3,1,4,9,10,9,6,6,10,9,8,3,1,8,2,1,7,5,6,4,3,10,6,9,7,9,6,7,6,2,10,1,8,7,7,4,4,0,6,3,1,1,9,6,3,2,5,1,4,0,5,4,10,2,2,8,4,9,0,3,5,4,3,2,9,3,1,10,1,0,9,2,9,8,4,10,6,10,1,2,3,4,2,6,7,5,9,1,7,1,9,5,1,10,7,1,0,1,3,7,0,9,8,3,3,3,5,7,4,9,6,5,6,1,6,10,10,7,5,8,5,2,8,6,5,1,3,2,5,5,7,2,
    4,2,1,4,3,4,9,4,9,4,9,7,3,0,10,4,9,5,2,9,8,3,9,5,1,1,9,9,1,3,6,2,6,2,0,9,8,5,7,10,3,5,5,5,4,6,1,3,8,6,5,1,9,9,9,8,4,9,8,1,6,10,1,7,9,7,9,4,9,10,2,8,6,3,6,7,7,1,2,2,3,1,8,1,2,8,10,8,7,4,1,5,3,6,9,1,3,3,7,8,3,4,3,6,1,9,4,3,1,10,9,1,7,8,0,9,9,10,7,4,1,2,5,0,9,8,6,8,9,2,5,0,2,5,6,7,2,5,6,2,3,2,7,1,10,7,9,3,1,9,4,10,6,1,6,8,4,7,9,2,0,2,9,8,8,6,10,7,2,6,8,9,3,6,9,4,4,0,8,3,2,6,6,1,3,9,7,1,10,9,2,5,10,3,6,5,10,3,8,1,7,9,2,8,4,4,4,5,10,2,3,9,6,0,4,0,7,7,8,2,6,4,9,4,4,0,10,5,1,10,0,8,5,8,4,4,6,2,3,6,2,4,0,1,5,6,0,4,10,7,10,7,6,3,2,5,1,5,5,7,4,1,2,0,9,7,2,9,7,3,3,0,1,6,2,7,2,0,5,1,0,4,3,5,5,3,1,7,2,1,5,6,10,3,4,0,9,4,2,4,8,4,10,5,3,5,4,7,3,2,6,1,0,7,8,4,2,9,1,2,6,4,3,7,10,6,7,10,9,2,7,8,6,3,0,1,7,7,0,1,2,4,3,4,5,9,1,4,8,7,2,7,7,3,1,5,7,4,8,1,7,6,9,8,10,5,1,2,5,1,0,2,2,4,9,1,3,5,7,2,5,2,1,9,5,3,4,10,4,8,4,5,3,7,2,6,2,2,2,3,5,5,2,5,4,2,2,5,6,4,2,7,4,1,1,8,5,10,7,2,5,2,4,6,1,4,4,1,6,1,8,8,6,0,4,8,2,3,10,8,3,3,1,10,4,2,7,5,7,10,5,7,0,5,8,4,3,8,7,5,3,0,8,10,2,7,10,10,5,6,1,7,5,1,9,8,7,0,8,1,5,1,2,0,1,3,6,1,9,9,7,4,8,2,4,6,9,8,6,6,9,3,7,4,0,7,1,2,9,0,4,4,6,8,8,7,5,6,9,5,0,9,4,2,8,7,4,8,3,9,1,1,1,3,6,2,2,4,6,10,10,1,8,1,1,8,7,7,4,3,3,6,5,4,7,2,10,1,10,9,4,7,2,1,8,5,5,1,1,0,2,3,5,0,9,2,6,8,2,6,8,5,0,9,9,9,4,6,2,2,7,10,9,3,5,3,6,6,5,9,5,9,2,6,1,3,6,4,4,9,5,3,2,3,0,6,5,0,6,4,4,0,9,1,7,4,2,5,8,4,3,1,2,7,2,2,7,3,7,4,10,2,10,2,3,9,0,9,1,4,3,1,4,8,3,2,6,10,0,3,1,2,0,2,2,5,8,6,3,1,0,0,5,7,2,7,1,10,5,9,4,2,7,3,0,5,4,4,6,7,2,3,7,2,6,10,4,6,6,5,8,5,10,3,2,5,2,1,1,7,2,1,
    8,4,1,5,7,2,8,7,5,3,2,10,6,2,9,2,8,3,7,0,7,1,5,7,4,2,9,6,4,3,1,2,8,3,7,2,0,2,10,10,6,7,2,6,6,6,6,9,7,10,10,5,5,2,0,10,7,6,2,1,9,5,7,10,2,6,4,7,4,10,2,6,5,5,9,1,5,7,3,4,2,8,2,0,5,4,1,10,6,7,9,2,7,10,8,7,1,9,7,9,3,3,7,7,7,4,9,5,8,2,9,9,6,5,1,3,5,4,4,9,1,8,6,9,10,8,8,10,8,2,2,10,1,4,8,5,8,3,0,3,9,6,8,2,8,1,2,3,5,5,6,0,2,8,3,6,2,5,2,6,10,8,2,4,2,10,3,4,4,5,7,4,5,1,3,10,7,8,3,1,7,4,7,6,0,7,3,3,7,5,3,6,3,2,6,7,8,4,5,8,8,5,2,1,8,10,5,2,2,8,1,9,6,10,8,9,5,2,1,10,0,9,8,0,8,10,9,2,2,1,7,0,8,6,7,5,2,8,1,2,3,0,2,1,7,2,10,1,4,6,0,9,6,9,8,5,10,8,9,8,6,2,0,3,10,6,1,3,6,8,2,1,3,5,8,3,0,9,6,8,6,5,9,8,1,3,3,3,8,3,9,7,2,8,2,7,2,4,5,6,4,4,6,6,2,2,2,6,7,4,7,1,9,6,8,5,5,7,3,6,6,8,8,9,5,3,6,2,5,4,4,6,5,4,4,8,5,6,4,7,6,5,4,5,1,6,10,10,6,9,4,8,5,6,9,9,0,6,10,1,7,8,6,6,3,7,6,6,7,9,2,2,10,7,8,6,4,8,5,2,3,4,5,9,5,2,5,7,9,7,3,1,9,1,8,8,8,6,7,4,5,6,5,8,5,4,2,9,5,7,1,8,8,2,4,3,6,4,7,2,6,2,1,8,5,8,10,7,2,9,3,2,5,2,6,0,5,3,1,4,8,9,3,9,4,7,9,0,3,9,3,4,9,7,1,3,1,8,1,0,3,4,7,6,3,1,3,1,9,8,8,10,3,1,4,9,3,9,8,3,6,5,5,6,6,3,1,1,7,9,2,4,2,6,1,1,9,9,2,7,10,0,7,3,9,9,0,0,4,3,2,3,3,8,6,8,1,10,9,4,7,9,6,5,2,6,2,7,2,1,9,8,6,9,9,4,3,3,4,4,8,9,10,9,7,5,1,7,6,0,5,9,9,5,9,3,9,2,2,8,8,2,10,6,10,1,5,8,10,5,2,5,6,4,4,9,2,7,8,1,9,3,1,6,5,9,10,5,2,9,5,2,7,2,1,2,7,5,0,2,7,5,7,2,2,2,8,0,10,9,2,8,6,5,8,4,6,1,6,7,1,5,9,5,10,7,9,8,5,8,0,9,6,1,7,4,10,0,8,9,8,4,6,8,6,9,8,2,7,6,4,6,9,3,7,6,8,10,1,8,7,4,5,1,2,1,7,4,4,2,1,3,8,1,3,7,4,6,6,3,0,8,1,2,6,8,5,5,1,8,4,2,6,7,6,7,8,7,6,3,1,4,10,5,7,6,1,2,5,9,0,4,9,6,7,8,5,0,9,5,2,2,4,10,0,7,5,4,3,9,7,7,8,10,5,7,10,0,2,8,4,4,1,2,6,6,0,6,8,4,3,7,5,1,4,5,9,2,9,4,3,4,4,4,2,1,9,7,2,2,1,5,8,8,3,2,5,4,7,3,2,1,8,6,3,5,5,8,4,4,0,0,2,10,7,8,8,4,5,0,9,5,5,0,7,1,1,0,4,1,8,
    6,5,0,3,7,6,2,4,4,3,1,1,9,2,1,7,8,1,10,6,3,7,5,5,6,4,1,2,0,8,4,6,2,1,4,6,5,3,1,5,9,4,8,4,8,1,3,6,5,7,4,1,4,4,6,9,7,2,4,7,3,4,1,5,6,7,9,9,8,5,5,8,7,8,6,9,5,4,10,5,10,2,5,7,8,0,8,6,1,8,1,1,7,2,2,3,2,1,1,1,5,1,7,3,6,2,7,0,10,3,6,9,0,4,6,2,4,7,1,3,2,9,5,9,9,7,8,9,6,3,7,2,5,1,8,9,9,8,7,2,3,3,8,3,5,0,3,8,6,1,4,4,1,7,3,0,1,7,3,7,0,4,4,2,4,3,10,2,2,9,4,0,5,8,9,5,7,9,4,3,1,2,2,9,4,7,6,0,6,0,3,10,6,0,3,9,5,0,9,9,1,5,3,10,4,4,9,7,6,3,3,2,8,1,6,1,1,10,6,6,2,8,8,4,4,1,1,4,4,1,7,3,5,10,10,10,6,8,2,1,0,9,5,10,7,3,9,5,2,3,8,4,4,0,4,6,6,9,3,7,4,9,9,1,3,6,8,5,9,5,1,3,3,3,4,9,1,9,2,7,1,0,2,7,0,1,0,4,5,7,9,5,8,10,5,9,8,4,1,5,3,2,1,9,5,7,9,7,0,2,4,1,7,5,0,7,8,5,8,7,3,8,2,4,4,1,2,6,0,4,9,9,2,10,7,0,8,9,9,7,5,1,1,9,8,1,7,6,3,4,3,10,4,9,8,7,9,7,9,10,3,10,8,2,9,1,0,8,5,2,6,0,1,8,2,7,9,8,3,9,6,4,2,3,7,2,8,3,7,1,2,9,6,7,5,8,9,2,0,8,7,7,7,4,1,1,6,8,8,9,6,10,5,5,5,9,2,5,8,4,7,6,9,4,2,6,8,3,0,9,8,5,7,2,6,4,4,9,8,1,1,9,10,2,6,8,0,0,6,2,3,4,4,2,1,7,6,2,2,8,9,7,6,3,6,10,2,4,6,6,6,2,2,8,1,9,0,0,7,4,4,8,7,5,2,5,6,5,10,2,9,7,7,10,1,5,1,9,8,6,10,6,7,6,9,0,7,5,3,10,2,0,1,1,9,4,9,1,6,8,8,0,10,9,3,6,1,2,4,6,4,7,9,9,6,4,9,0,4,1,4,1,3,0,6,5,3,7,2,2,9,1,6,6,2,3,4,7,4,9,7,7,9,0,3,2,7,8,9,9,4,9,7,7,4,6,1,5,5,3,3,3,4,4,6,5,4,7,1,3,7,5,3,5,3,5,5,10,3,1,6,8,10,9,3,7,8,2,8,5,1,10,8,7,9,6,3,7,8,8,5,5,4,1,5,3,4,1,7,8,9,8,10,9,8,1,10,6,8,3,4,4,5,10,0,8,4,5,10,8,9,6,8,8,1,3,7,1,1,1,3,2,5,2,2,5,0,3,
    2,2,10,1,7,9,4,7,9,7,7,10,2,3,2,1,0,3,5,8,8,9,5,2,1,6,6,2,5,9,9,2,2,4,3,1,8,9,7,7,5,1,1,7,1,5,9,6,1,0,1,3,2,7,3,5,9,1,8,7,4,1,2,4,9,4,7,6,1,2,0,8,1,7,9,5,9,2,4,4,6,1,6,2,8,6,3,3,1,6,7,1,6,10,4,1,6,4,3,8,7,9,10,3,5,5,5,5,2,1,5,5,2,5,7,6,9,5,5,10,3,4,9,0,0,8,5,8,4,6,0,2,5,0,2,2,9,7,3,7,6,3,5,4,3,5,7,2,9,9,2,7,4,3,6,9,7,0,6,9,9,4,4,6,1,5,2,0,5,2,8,9,2,0,4,7,0,5,8,3,3,4,7,1,7,7,3,3,0,7,9,8,7,0,7,6,9,7,6,2,4,9,1,3,0,7,9,7,7,8,10,5,8,6,3,2,3,0,3,10,8,3,2,7,1,5,4,2,1,10,4,1,7,3,2,2,0,7,1,5,4,5,2,5,9,2,1,4,6,4,7,7,6,6,6,6,6,6,6,0,7,4,1,2,2,7,3,8,6,8,2,5,8,5,7,3,8,2,2,4,1,8,8,1,4,8,8,2,10,3,6,1,4,2,4,7,8,9,4,6,8,2,3,1,5,1,3,4,0,3,1,2,4,8,10,9,6,2,7,2,8,3,2,6,1,2,5,6,10,3,6,6,5,6,4,10,5,5,1,4,7,6,2,7,6,9,8,4,8,9,7,7,6,9,7,1,6,4,6,4,2,6,9,5,4,1,6,6,5,8,5,1,1,6,5,9,3,6,1,2,6,7,4,2,2,5,9,7,1,9,9,5,10,5,10,8,3,7,5,4,10,4,8,2,3,0,8,0,10,8,3,5,3,5,7,7,6,8,7,9,3,9,4,7,8,8,5,9,2,6,0,0,3,5,3,6,6,4,2,7,2,4,6,4,10,8,4,8,8,10,6,9,4,7,1,8,9,3,1,6,4,8,6,6,7,10,5,3,9,5,7,7,8,7,9,2,7,3,1,2,5,4,1,1,4,2,6,10,8,6,7,0,8,1,5,8,3,2,5,1,8,4,2,1,7,4,7,4,2,5,1,4,7,3,5,3,1,1,3,7,3,5,7,2,2,9,3,9,2,3,2,4,7,6,3,4,3,0,2,8,0,10,1,2,2,7,5,9,4,1,10,9,5,7,4,3,6,7,5,9,5,2,8,3,1,9,3,8,1,5,6,3,10,8,1,7,10,1,5,1,1,5,5,10,6,2,7,2,4,9,7,3,2,1,9,7,3,3,1,3,5,2,7,4,3,7,5,4,10,6,8,9,4,9,6,9,2,7,0,2,7,
    8,2,2,9,7,2,5,1,8,9,3,3,8,9,8,3,5,4,5,0,0,6,8,1,7,9,10,5,7,0,9,2,6,2,0,5,5,9,5,8,3,8,2,5,8,4,5,6,9,9,7,8,2,3,3,2,9,2,8,7,0,7,4,4,7,5,3,1,2,8,0,4,7,4,9,10,10,1,6,2,6,2,1,2,5,0,8,2,3,1,5,3,5,4,2,3,7,6,10,2,9,7,5,1,4,3,4,7,2,7,3,6,5,8,1,2,2,3,2,0,4,9,3,9,10,7,7,1,9,6,5,10,6,7,6,4,10,4,7,4,4,3,3,8,10,5,8,7,7,8,7,7,7,1,3,9,4,7,4,9,9,7,1,4,8,6,5,4,7,6,0,7,5,4,4,9,4,7,10,8,4,6,10,8,6,10,7,8,2,9,9,5,9,9,9,5,10,8,3,9,10,7,5,8,3,10,7,4,3,7,8,0,4,10,9,8,9,8,5,2,5,7,5,2,9,6,2,4,10,6,7,7,9,7,4,7,7,10,8,1,7,1,3,6,7,4,1,5,1,5,2,4,6,10,10,10,2,2,4,7,9,6,4,9,4,6,5,10,8,0,7,6,3,6,6,7,5,9,4,6,2,7,3,1,8,9,0,0,9,5,1,6,8,7,7,1,7,0,1,9,0,5,0,0,0,4,5,9,1,4,1,3,0,2,10,6,2,9,5,6,1,5,5,8,1,8,5,2,3,9,5,7,7,6,1,6,3,8,0,6,1,2,4,2,10,5,10,7,9,3,10,2,5,5,3,6,10,0,4,3,8,8,2,5,4,8,5,10,1,6,2,4,6,7,2,5,4,6,9,6,10,3,9,4,1,3,5,8,1,5,5,10,2,9,8,3,4,6,7,10,9,10,0,5,4,8,2,0,4,3,1,2,7,7,7,5,5,1,5,5,7,7,6,2,5,3,2,3,4,9,1,2,10,6,10,0,2,3,8,6,4,1,4,5,5,2,9,7,0,5,9,3,1,6,6,8,4,1,2,5,8,6,5,3,4,2,6,5,8,1,2,8,2,4,5,5,3,0,5,7,4,1,8,5,4,8,2,1,4,1,5,4,9,1,5,7,2,7,2,1,4,3,2,3,7,3,0,1,3,2,5,2,8,7,5,1,9,3,6,3,2,5,8,6,9,6,2,6,5,6,7,5,8,4,9,8,1,3,4,6,8,0,2,8,2,7,6,1,3,10,1,2,0,0,6,3,4,2,2,2,1,9,5,3,5,3,5,
    5,3,7,7,1,3,6,10,6,7,8,4,3,8,4,3,8,10,4,5,6,7,6,0,5,4,6,6,9,2,1,9,6,9,10,0,8,3,5,10,2,4,3,2,2,0,6,9,0,5,7,10,6,4,8,8,1,4,2,10,4,8,9,10,6,1,1,9,3,6,5,7,8,10,2,4,9,9,10,1,0,2,7,3,2,7,3,2,10,7,4,9,5,6,4,4,5,5,5,1,8,5,2,6,1,4,3,1,10,1,3,1,2,5,6,5,9,4,3,1,2,0,7,2,2,2,3,4,3,6,4,3,8,1,0,6,8,8,9,4,1,2,0,8,10,8,6,2,9,3,8,9,1,2,0,2,10,7,9,9,9,8,1,7,9,7,8,9,8,7,5,5,1,10,7,5,3,9,0,5,2,10,3,2,0,9,4,9,7,10,2,1,0,7,5,4,1,7,6,3,6,2,6,8,4,10,8,5,8,3,5,6,4,8,7,6,9,5,5,10,7,3,4,4,0,3,5,4,2,3,1,8,8,7,3,0,0,7,1,3,3,9,2,8,1,7,0,9,9,4,6,1,6,5,10,7,9,1,2,7,4,10,8,2,10,2,5,2,9,2,5,6,10,5,4,1,8,10,7,9,1,4,4,0,2,2,10,9,6,8,10,7,8,9,3,3,7,5,4,6,8,3,10,7,1,7,3,7,6,4,5,4,9,6,7,6,1,7,0,2,5,8,9,7,7,10,1,9,6,7,7,5,8,7,3,5,7,8,2,7,0,6,8,5,8,3,4,5,8,9,2,2,5,7,0,4,0,1,6,8,1,2,1,5,2,5,7,4,3,8,3,4,6,3,3,1,7,4,6,0,2,4,4,1,2,4,4,0,2,1,5,2,7,4,9,7,7,9,9,0,3,3,7,7,3,1,4,1,10,3,9,6,6,5,6,4,10,6,1,2,5,0,7,7,2,0,5,4,1,6,0,9,6,9,2,3,1,8,6,1,3,4,4,6,7,0,6,6,9,8,4,9,3,8,8,5,1,4,8,9,1,5,0,2,1,1,0,10,4,
    6,3,3,2,5,5,3,2,2,7,7,5,5,5,3,3,8,4,6,10,4,9,7,4,9,8,3,1,0,1,1,8,5,0,8,3,8,8,3,3,3,3,6,7,1,1,3,4,3,8,8,5,10,0,7,5,9,7,5,8,6,7,5,5,9,2,8,6,7,4,9,6,8,8,6,2,0,0,1,2,1,3,2,1,2,3,3,3,4,2,2,7,7,6,10,5,4,1,5,9,0,1,4,5,3,9,10,4,1,0,7,4,10,3,2,9,9,0,9,3,6,1,3,2,5,5,7,3,0,6,8,3,2,6,9,4,5,2,3,5,6,2,2,1,0,2,6,5,2,2,6,5,10,7,9,2,1,4,7,4,9,3,6,7,5,5,4,1,4,3,6,7,10,5,3,5,8,2,6,6,3,5,8,3,7,0,4,2,4,5,8,5,3,4,6,8,5,3,9,4,4,4,4,6,10,0,5,5,7,10,5,5,1,9,4,5,5,7,9,0,8,2,4,8,4,4,10,7,0,5,10,9,5,8,2,9,6,9,1,1,9,10,7,9,9,2,8,6,5,8,2,4,6,9,10,8,7,8,8,9,10,7,7,4,1,10,1,10,5,9,9,8,1,4,4,1,4,3,9,8,3,8,0,0,9,6,3,2,10,7,4,2,1,2,7,1,7,9,7,8,2,2,1,6,2,9,7,2,3,3,9,8,5,0,8,3,8,6,1,8,3,2,1,5,5,1,8,7,5,6,9,4,4,8,5,1,3,6,6,4,8,7,5,1,6,8,8,7,7,5,3,5,0,1,7,2,8,4,1,6,9,7,7,9,3,4,3,7,9,7,10,6,5,8,1,8,2,5,2,5,4,5,6,1,1,9,4,0,8,3,8,4,5,1,4,5,10,5,5,3,7,8,7,5,8,6,4,8,3,6,5,0,9,5,1,2,5,0,2,9,7,3,5,5,8,5,3,2,4,10,2,9,5,6,1,0,6,4,6,9,8,4,1,6,4,3,8,10,4,2,3,3,7,8,10,4,8,7,10,2,7,7,8,2,3,8,0,4,9,9,2,5,2,4,5,6,4,8,5,1,4,8,4,7,2,1,0,0,5,5,3,9,3,2,1,4,6,6,4,7,7,5,6,4,2,1,5,0,2,4,5,6,4,3,4,8,7,2,2,4,9,6,4,6,7,10,2,8,10,3,3,9,4,4,8,3,2,7,4,2,9,5,2,5,6,3,0,6,10,3,9,1,2,9,9,1,8,9,1,2,4,7,0,9,9,5,10,4,9,2,7,7,1,5,6,2,7,1,5,9,1,0,7,6,3,4,9,6,6,1,3,1,9,3,5,5,1,4,3,9,2,6,8,8,10,7,6,7,6,10,7,9,7,7,1,5,5,8,6,9,7,6,1,0,10,10,6,8,2,5,1,4,9,8,4,2,8,1,8,8,2,8,8,3,6,7,6,1,4,6,3,2,6,8,3,8,7,2,2,4,6,9,4,5,4,0,5,5,10,8,1,8,2,0,8,4,9,5,5,3,8,2,9,8,6,1,
    5,7,6,3,5,8,0,6,3,6,2,4,5,4,9,3,3,10,10,8,1,3,4,3,0,4,8,8,10,2,5,5,4,6,3,2,10,6,6,0,6,9,1,2,3,9,9,4,3,9,6,2,5,5,6,6,1,1,2,9,9,6,5,5,3,2,7,9,2,3,10,5,4,7,1,1,7,1,2,2,8,4,6,10,3,7,8,2,5,0,4,5,1,6,5,9,1,9,3,8,4,2,9,3,6,5,3,4,2,5,8,8,6,8,4,2,1,2,10,5,7,10,10,5,9,1,10,3,8,3,8,9,4,2,8,5,9,3,4,4,4,3,7,5,9,7,4,5,7,3,7,4,3,2,1,6,2,5,0,4,5,5,7,5,9,7,5,8,10,5,6,3,4,2,7,4,7,0,7,9,4,0,9,1,7,2,9,9,8,1,10,10,7,10,4,6,5,7,6,6,1,2,8,9,3,7,7,4,3,2,4,2,9,3,1,4,10,1,1,3,5,5,7,5,4,7,10,4,0,3,2,1,1,4,7,5,9,3,3,8,4,6,8,2,6,0,5,4,2,10,10,4,1,10,5,6,7,10,7,5,1,10,2,6,4,9,8,6,9,5,6,4,5,8,1,9,3,9,4,4,3,8,8,1,3,2,0,2,2,4,4,6,0,2,1,4,10,2,3,2,9,8,8,4,2,7,3,5,0,4,7,3,4,9,7,4,5,10,5,1,6,4,4,1,7,2,0,3,10,3,4,3,0,5,1,2,1,8,10,7,7,9,7,2,6,9,2,8,9,5,5,8,4,1,6,3,1,6,10,10,9,5,3,3,8,7,2,7,4,1,9,10,2,8,3,3,1,4,5,2,2,6,8,8,7,3,9,9,9,8,4,5,4,9,0,5,2,9,3,0,4,7,4,5,2,2,2,6,6,1,8,9,8,1,2,1,6,4,1,2,2,8,1,7,9,2,9,7,7,0,2,9,7,7,0,3,2,1,10,0,5,10,9,5,5,8,3,8,5,9,3,8,9,1,4,1,1,3,5,3,4,3,4,6,3,4,10,5,3,8,1,6,9,2,0,3,6,9,4,6,4,6,4,9,5,3,4,2,8,7,3,2,1,4,4,2,2,5,2,6,7,6,6,0,7,0,0,1,6,2,3,2,4,1,0,5,6,6,6,7,4,9,8,4,1,9,8,4,5,5,2,6,7,3,5,6,2,9,3,1,3,7,0,5,7,4,8,6,3,3,4,4,0,5,0,9,1,8,7,5,4,5,0,2,3,7,10,5,8,8,3,3,10,4,3,5,9,9,10,10,4,0,4,6,4,8,5,10,0,5,9,7,1,4,8,8,5,7,9,5,4,7,7,7,1,1,8,3,0,9,10,9,7,0,6,4,5,
    1,6,0,6,4,7,8,6,1,6,5,4,4,2,5,8,4,6,9,3,4,4,3,3,10,8,1,6,4,1,8,7,6,0,8,9,2,7,5,3,4,7,6,5,7,9,7,6,2,8,2,9,6,8,4,3,7,3,0,8,8,1,9,2,9,7,7,6,5,3,2,7,1,5,8,9,9,1,9,9,8,2,3,3,4,1,6,7,6,5,7,10,1,6,9,1,2,3,9,8,7,1,2,0,5,6,8,1,6,7,6,4,1,1,3,5,2,8,7,3,5,1,3,8,6,7,1,3,6,6,7,6,5,5,7,5,4,8,8,7,1,9,1,3,2,6,2,7,6,0,9,7,9,0,2,6,9,0,1,1,2,7,6,0,3,6,3,9,6,4,0,6,3,3,4,6,8,8,7,2,6,10,4,8,3,4,8,2,8,9,6,7,8,0,3,0,5,3,5,8,8,9,5,6,3,6,9,2,3,7,5,1,9,5,7,6,8,7,3,5,7,2,0,6,6,3,8,3,9,7,7,8,7,9,6,4,8,5,2,6,5,9,1,10,2,10,6,8,4,5,6,9,2,0,5,0,2,5,5,6,9,2,2,8,4,4,9,3,6,4,9,4,5,10,3,4,4,7,1,1,3,0,9,10,2,9,9,7,7,9,3,3,1,8,10,1,0,7,7,3,8,10,8,3,9,0,4,4,10,4,1,8,3,1,7,4,10,9,6,1,9,9,3,7,7,5,5,2,9,2,2,0,0,9,7,0,6,5,9,8,1,9,7,5,8,5,3,1,5,3,2,2,6,3,5,6,5,9,4,4,10,9,7,8,2,2,7,7,2,1,9,10,3,6,7,10,3,6,8,1,5,2,9,6,0,5,5,8,9,2,3,4,9,3,7,3,8,4,2,3,0,2,6,3,3,1,3,10,8,7,9,2,5,4,2,3,7,8,1,5,6,4,8,8,1,10,9,9,2,0,6,0,9,1,6,5,2,9,10,8,1,9,3,2,9,4,3,1,2,1,1,7,1,3,6,9,3,3,7,2,2,0,6,4,2,8,10,0,1,7,5,8,4,3,5,6,4,5,7,6,7,5,10,7,2,10,4,10,5,1,3,9,2,9,8,0,6,5,3,1,4,3,6,2,2,5,4,0,0,9,3,5,5,5,0,9,0,8,2,9,6,5,5,8,5,10,9,1,6,0,4,9,7,2,9,
    4,2,9,9,4,9,3,1,5,1,9,8,5,2,9,1,6,4,1,10,9,4,1,6,7,6,7,7,4,5,9,0,3,2,4,5,2,8,4,2,2,8,1,1,3,5,9,9,1,1,8,6,4,5,8,5,7,9,4,7,0,9,6,2,2,9,6,3,2,0,9,6,9,1,5,7,4,2,9,10,9,8,9,6,8,3,1,5,7,1,4,3,9,2,5,5,9,9,8,2,0,8,7,7,9,1,5,2,2,7,8,4,0,8,4,1,8,7,4,8,8,1,4,2,7,8,8,8,0,0,7,8,2,3,9,9,1,8,0,7,2,6,9,8,4,2,5,5,9,4,10,1,9,7,10,4,3,8,2,2,4,2,9,8,5,3,1,2,8,10,0,10,8,3,3,8,0,0,3,4,2,0,2,7,2,10,1,0,6,6,5,6,3,0,9,4,1,7,1,10,1,3,2,2,2,6,1,3,0,3,7,4,6,8,5,9,4,1,4,4,3,8,3,0,6,2,7,9,7,2,5,5,2,5,9,10,6,1,9,10,8,8,2,9,10,5,4,2,5,9,8,8,9,3,5,10,8,10,0,6,4,2,1,9,5,4,1,4,2,8,10,2,0,2,1,5,2,6,5,3,8,6,2,7,0,10,6,3,7,6,2,4,8,9,8,6,7,6,8,6,7,6,4,0,4,6,0,6,9,8,7,3,4,4,4,2,10,3,1,3,5,0,1,7,3,10,3,1,5,0,7,8,6,1,10,2,7,4,3,4,0,10,1,0,6,5,0,10,0,4,1,3,6,3,9,8,3,9,0,0,5,7,1,1,3,7,4,2,1,9,3,4,2,6,5,9,8,2,10,6,4,10,5,4,4,4,6,5,5,4,6,8,8,9,1,6,3,9,3,3,6,6,1,2,8,7,8,5,3,7,10,10,1,10,7,3,8,2,1,2,3,4,2,9,6,7,3,3,3,5,0,3,9,2,5,10,2,8,3,10,7,10,8,6,8,4,8,8,4,4,2,4,8,3,2,1,3,8,10,3,1,10,7,2,8,2,8,7,6,
    3,7,7,3,0,5,5,0,9,9,7,5,7,8,3,5,8,2,4,6,1,8,2,5,9,3,5,6,9,2,7,2,4,2,9,6,4,7,9,6,5,4,3,8,4,5,6,6,2,1,3,8,5,10,2,2,9,8,1,5,7,1,7,1,10,8,3,3,3,2,9,9,3,7,7,3,4,6,0,9,7,6,5,7,4,8,7,2,7,1,4,9,8,1,7,8,3,9,5,6,6,3,7,9,6,6,5,3,6,2,5,3,5,4,2,1,4,8,6,1,4,0,0,4,2,1,7,3,3,10,10,3,0,8,1,1,6,5,1,9,5,4,5,2,3,8,5,6,3,5,1,9,6,8,5,8,5,8,1,3,1,3,0,2,2,2,8,6,5,5,9,5,8,0,0,4,3,4,9,2,6,0,10,4,1,7,5,2,6,9,6,0,3,5,9,0,6,3,4,8,6,2,5,2,2,8,7,9,0,1,4,7,7,10,0,1,5,0,9,4,9,4,0,4,10,7,1,4,5,2,8,7,0,9,9,3,4,3,0,2,10,2,3,1,2,5,9,9,6,2,7,0,8,9,0,7,8,4,4,6,4,8,7,8,10,1,7,8,8,9,7,6,3,2,0,3,9,4,2,10,6,5,8,1,6,9,0,5,1,5,5,1,1,8,1,3,1,4,5,4,9,3,9,2,3,9,3,6,8,2,2,9,2,6,5,6,5,2,5,6,4,7,1,1,0,10,6,8,1,9,5,3,9,6,9,8,4,1,7,2,3,9,1,8,6,7,8,9,1,4,1,6,4,3,2,3,10,8,6,3,7,1,0,2,1,0,4,1,10,3,4,10,5,9,1,10,4,1,5,5,5,2,2,1,4,0,6,9,8,9,9,7,1,9,5,5,5,6,9,3,6,6,6,9,6,1,3,5,8,1,8,5,5,9,8,8,5,5,2,3,2,7,3,8,3,6,10,6,7,7,1,8,2,9,5,1,3,4,6,4,1,6,0,1,5,3,3,1,6,8,2,1,9,2,5,9,5,8,2,6,1,6,7,9,9,4,4,3,4,1,5,9,4,4,7,8,8,6,6,2,4,8,8,3,5,7,6,1,7,6,2,6,4,1,6,5,10,3,4,5,7,3,8,7,8,5,4,6,1,2,4,0,6,5,9,7,2,1,5,9,5,9,6,2,5,7,10,9,7,2,4,6,0,1,4,6,9,7,4,3,6,5,2,10,6,4,8,2,5,4,2,9,8,3,4,5,2,9,3,3,8,1,0,8,1,7,1,9,7,9,5,9,7,9,9,5,9,2,2,4,3,8,0,7,3,2,8,4,5,7,10,10,4,2,8,4,7,7,2,8,6,10,9,10,3,9,2,6,4,0,5,1,7,0,3,0,8,0,1,1,5,8,2,1,4,
    8,4,2,6,0,9,9,8,2,2,2,1,4,6,3,5,5,8,6,9,3,2,1,3,3,5,6,5,1,4,7,3,5,8,8,2,1,10,10,7,3,2,9,9,4,8,1,8,10,3,3,8,3,7,5,7,5,4,10,7,0,10,2,2,1,6,2,10,9,4,6,4,10,8,2,0,8,3,8,8,1,4,3,5,7,6,6,6,7,9,2,5,2,6,1,8,1,6,1,4,9,5,9,2,5,8,6,6,9,4,3,0,8,9,6,1,9,9,8,9,2,8,4,1,3,7,6,7,9,8,9,0,9,5,2,9,6,10,9,2,2,2,2,8,2,9,8,6,2,5,6,5,0,5,1,0,2,1,6,3,8,1,5,1,7,9,4,10,7,9,9,2,4,7,3,9,9,4,4,10,7,3,3,3,6,10,8,10,6,9,2,8,7,8,5,3,7,4,1,6,3,2,2,1,3,6,7,2,9,6,2,7,6,8,5,5,5,9,6,9,7,1,9,2,10,3,2,10,9,8,7,8,8,1,8,8,6,8,1,9,3,6,9,4,7,5,5,3,0,9,3,2,3,7,7,6,5,8,1,10,10,2,3,8,3,9,3,7,7,10,0,4,10,1,7,1,6,6,1,8,7,6,3,1,9,5,10,9,9,9,8,0,5,7,7,9,3,3,7,6,6,4,9,9,7,5,8,8,9,9,5,7,3,3,7,0,6,3,4,4,9,8,3,6,2,7,9,3,0,5,1,6,6,1,5,0,4,1,7,6,4,9,4,7,7,6,9,8,0,8,8,6,7,3,0,6,7,3,10,8,3,6,8,4,9,0,7,7,2,8,8,3,9,6,7,7,4,0,10,2,1,3,6,4,9,4,4,10,2,2,8,3,1,9,8,1,0,2,8,4,3,9,3,5,5,1,7,3,4,3,8,4,9,6,4,1,4,4,1,8,5,2,10,8,2,7,0,10,10,3,3,9,2,1,7,8,2,0,10,2,7,7,4,4,2,5,8,3,1,3,3,3,1,10,2,6,6,8,10,2,8,1,1,7,5,8,6,3,2,7,9,5,3,2,8,3,8,6,2,10,4,7,2,4,10,6,6,5,7,1,3,0,6,3,3,7,5,6,3,10,1,2,2,7,3,1,0,8,6,7,7,5,2,7,2,7,0,7,2,8,7,7,2,7,1,8,5,6,1,0,3,6,10,7,0,4,8,4,2,1,9,2,1,1,7,4,8,2,1,7,5,8,2,6,5,1,7,7,1,9,1,4,1,7,5,7,3,4,8,7,7,2,3,2,10,0,2,2,5,9,3,10,9,5,1,1,6,4,5,4,7,6,9,3,5,2,0,1,5,3,8,1,6,9,3,10,8,8,3,2,4,4,3,5,9,5,10,7,1,5];

}

var beforeTime:Date
var afterTime:Date
var arr1:Array
var arr2:Array
var i:int
var j:int

for (j=0;j<10;j++){
    arr1 = getArray()
    beforeTime = new Date()
    arr1 = arr1.filter(myFilter)
    afterTime = new Date()
    trace('mine'+(afterTime.time-beforeTime.time))
}

for (j=0;j<10;j++){
    arr2 = getArray()
    beforeTime = new Date()
    arr2.sort();
    for (i = arr2.length -1; 1 <= i; --i ){
        if ( arr2[i-1] == arr2[i] ){
            arr2.splice(i-1,1);
        }
    }
    afterTime = new Date()
    trace('his' +(afterTime.time-beforeTime.time))
}

function myFilter(element:*, index:int, arr:Array):Boolean {
    return (index==arr.lastIndexOf(element));
}

// outputs
mine4
mine4
mine4
mine3
mine4
mine4
mine3
mine4
mine4
mine3
his192
his189
his188
his188
his190
his189
his189
his191
his194
his190 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-07T15:08:36.687

如果未排序，则首先排序数组

```
var arr4:Array = [10,10,11,11,11,12,12];

for ( var i = arr4.length -1; 1 <= i; --i )
{
    if ( arr4[i-1] == arr4[i] )
    {
        arr4.splice(i-1,1);
    }
}

trace( arr4 ); 
```

输出 10,11,12

# c# - .NET PictureBox - 如何确保资源被释放

> ID：15274463
> 
> 赞同：2
> 
> 时间：2013-03-07T15:01:00.480
> 
> 标签：c#, dispose, picturebox

我有一个`OpenFileDialog`和`PictureBox`用户控制。为了更好地理解这个问题，我将用几句话解释这个用户控件是如何工作的。用户可以选择要为表单打开的图像。该图像的名称保存在数据库中，并且该图像的文件被复制到默认位置。当数据库中保存了一些图像时，它会在加载带有图片框控件的表单时加载到图片框中。如果用户选择另一个图像并想用新图像保存表单，我有一个方法可以从我的默认位置删除旧图像文件，这就是问题发生的地方。

当我加载图像并尝试保存新图像时，有时（实际上非​​常罕见）我会收到一个错误，`The resource is being used by another process..`如果需要我可以粘贴确切的错误。我认为问题是由图片框及其处理图像的方式引起的。

这是我的代码：

```
if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                try
                {
                    if (MyImage != null)
                    {
                        MyImage.Dispose();

                    }
                    selectedFile = openFileDialog1.FileName;
                    selectedFileName = openFileDialog1.SafeFileName;

                    MyImage = new Bitmap(openFileDialog1.FileName);
                    pictureBox1.Image = (Image)MyImage;

                    int imageWidth = pictureBox1.Image.Width;
                    int picBoxWidth = pictureBox1.Width;

                    if (imageWidth != 0 && picBoxWidth > imageWidth)
                    {
                        pictureBox1.Width = imageWidth;
                    }
                    else
                    {
                        pictureBox1.Width = defaultPicBoxWidth;
                    }
                }
                catch (Exception ex)
                {
                    logger.Error(ex.ToString());
                    MessageBox.Show("Error loading image!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                } 
```

和我的删除方法：

```
public void DeleteImage(AppConfig imageInfo, string imageName)
        {
            string imgPath = imageInfo.ConfigValue.ToString();
            try
            {
                File.Delete(imgPath + "\\" + imageName);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        } 
```

我以为 ：

```
if (MyImage != null)
                        {
                            MyImage.Dispose();

                        } 
```

将处理此问题，但有时仍会发生。而且因为不是每次都更重要的是要处理它，因为在某些时候我可能会决定我已经解决了它，但实际上只是幸运一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:12:26.077

```
 MyImage = new Bitmap(openFileDialog1.FileName);
    pictureBox1.Image = (Image)MyImage; 
```

是的，该代码锁定了文件。锁是由 GDI+ 创建的内存映射文件对象产生的，它可以有效地将文件的像素数据映射到内存中，而无需在分页文件中分配空间。只要图像显示在图片框中并且未处理，您将无法删除文件，锁定可以防止这种情况。您必须先处理图像并将 Image 属性设置回 null，然后才能删除文件。

您可以通过制作图像的内存副本来防止文件被锁定：

```
 using (var temp = new Bitmap(openFileDialog1.FileName)) {
        pictureBox1.Image = new Bitmap(temp);
    } 
```

当然，如果图像很大，则应避免使用它。并且请注意另一个进程实际上可能对文件有类似的锁定。对此你无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:51:33.623

像这样的事情的一个主要困难`PictureBox`是，因为 a`PictureBox`无法知道它是否是图像的唯一用户，因此它无法知道它是否应该在不再需要该图像时处理该图像。

因此，任何拥有图片框的代码也必须拥有与之相关的图像的所有权。我可以建议这样做三种方法：

*   创建一个控件，该控件派生自`PictureBox`该文档本身，并假定其拥有任何图像的所有权。这样的控件可能应该用一种方法替换 image 属性（其语义是，*一旦*将`SetImageWithOwnership`图像传递给*图像被赋予盒子*）。`PictureOwningBox``Dispose`

**   将事件处理程序附加到 a`PictureBox`以处理盒子被破坏或分配给它的不同图像的情况。

    *   有任何代码会导致`PictureBox`处理或加载不同的图像，也处理`Image`分配给它的。* 

 *虽然在某些情况下调用`GC.Collect`并让垃圾收集器处理事情是合适的，但这种方法通常是不合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:09:29.970

试试看：

```
 using(Bitmap MyImage = new Bitmap(openFileDialog1.FileName))
                {
                  pictureBox1.Image = (Image)MyImage;

                  int imageWidth = pictureBox1.Image.Width;
                  int picBoxWidth = pictureBox1.Width;

                  if (imageWidth != 0 && picBoxWidth > imageWidth)
                  {
                      pictureBox1.Width = imageWidth;
                  }
                  else
                  {
                      pictureBox1.Width = defaultPicBoxWidth;
                  }
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:10:01.777

我以前遇到过这样的问题，我发现确保资源被释放的一种方法`Dispose()`是使用`GC.Collect()`. 我确信有一种更清洁的方法来处理资源处理，但是`GC.Collect()`运行所需的时间不应妨碍您的程序。*

# windows - Windows 8 上的旧 jre 1.3

> ID：15274470
> 
> 赞同：2
> 
> 时间：2013-03-07T15:01:10.230
> 
> 标签：windows, java, backwards-compatibility

我们有一个非常古老的客户端-服务器应用程序，它使用 JRE 1.3，它的网络通信基于套接字并有一个桌面客户端，我的老板让我调查在 Windows 8 上安装它的机会。我没有 Windows 8 在手，那么有人试图做这样的事情吗？桌面应用程序非常庞大，因此升级它不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:06:11.123

Java 努力保持非常严格的向后兼容性，因此我会尝试在 Windows 8 机器上安装最新的 Oracle Java JRE 版本并在其上执行应用程序。

它很有可能开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:32:39.140

正如 Andrea 在另一个答案中所说，向后兼容性在 Java 中非常重要。然而，事情确实会被弃用，并可能最终被删除。

您可能需要查看以下各种 Java 版本中不推荐使用的内容列表，以防其中的某些内容是您的应用程序工作方式的核心。

*   Java 7： [http ://docs.oracle.com/javase/7/docs/api/deprecated-list.html](http://docs.oracle.com/javase/7/docs/api/deprecated-list.html)
*   Java 6： [http ://docs.oracle.com/javase/6/docs/api/deprecated-list.html](http://docs.oracle.com/javase/6/docs/api/deprecated-list.html)
*   Java 5： [http ://docs.oracle.com/javase/1.5.0/docs/api/deprecated-list.html](http://docs.oracle.com/javase/1.5.0/docs/api/deprecated-list.html)
*   Java 4： [http ://docs.oracle.com/javase/1.4.2/docs/api/deprecated-list.html](http://docs.oracle.com/javase/1.4.2/docs/api/deprecated-list.html)

# objective-c - 需要相应地组合变量和格式

> ID：15274472
> 
> 赞同：0
> 
> 时间：2013-03-07T15:01:14.357
> 
> 标签：objective-c

我有这些变量：

```
place.address
place.city
place.state
place.zip 
```

（其中每一个都等于您所期望的，例如 place.address = 123 main st. 和 place.city = Chicago）

如何设置它，以便它可以像字母一样正确组合和格式化。

```
123 main st.
Chicago, IL 60609 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:05:48.020

实现`[Place formatAddress]`（假设`place`是一个名为 的类的实例`Place`）：

```
- (NSString *)formatAddress
{
    NSString *str = [NSString stringWithFormat:@"%@\n%@, %@ %@",
        self.address, self.city, self.state, self.zip];
    return str;
} 
```

# html - html居中对齐

> ID：15274477
> 
> 赞同：1
> 
> 时间：2013-03-07T15:01:21.703
> 
> 标签：html, alignment, center

我怎样才能使文本中心，但第一个字母从同一个地方开始？

由此

```
 text 1
                                text text
                             text 2 text text 
```

对此

```
 text 1
                             text text
                             text 2 text text 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:04:00.093

试试这个

```
<style>
   .center{
      margin: auto auto;
      width: 250px;
   }
</style>

<div class="center">
       Multiline text
       ight here
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:34:26.497

所以你不应该使用对齐中心。但不是一个 div 包含您的文本，您应该有 2 或 3 个 div（就像列），您的文本将正常显示在内部，左对齐，就像你想要的

# javascript - 如何检测 chrome 同步功能是否处于活动状态？- Chrome 扩展

> ID：15274481
> 
> 赞同：5
> 
> 时间：2013-03-07T15:01:32.983
> 
> 标签：javascript, google-chrome, google-chrome-extension, add-on

我想使用`chrome.storage.sync`，但如果该功能已关闭或用户未登录，我想通知用户。显然，没有办法检查这一点。如果同步功能关闭或用户未登录，`chrome.storage.sync`只需在本地存储数据。有什么方法可以检测同步功能是否已打开并且用户是否已登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:05:26.870

[这个问题](https://stackoverflow.com/questions/8887770/google-chrome-sync-check-if-enabled-via-api-extension)包含您正在寻找的信息，chrome 似乎没有提供一种方法来检测用户是否已登录以进行 chrome 同步。无论他们是否登录，您都可以始终只使用 chrome.storage.sync。只需通知您的用户，如果他们没有启用 chrome 同步，他们保存的数据将不会保留到其他计算机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:05:17.403

尝试这个 ：

```
if(chrome.sync.aboutInfo.type_status.length > 0) { //sync enabled
    ...
} else { // sync disabled
    ...
} 
```

# javascript - 创建一个带有可拖动/可调整大小的蒙版叠加层

> ID：15274483
> 
> 赞同：1
> 
> 时间：2013-03-07T15:01:37.367
> 
> 标签：javascript, html, html5-canvas, kineticjs

我正在尝试降低 kineticjs 并开发了一个小应用程序，使我的图像可拖动和调整大小。到目前为止，一切都很好;

但是：我想要一个在中心具有可变高度/宽度块的叠加层，它应该显示下面的图像（具有可拖动/可调整大小的完整）和半透明叠加层。

我希望能够在覆盖仍然完整的情况下仍然在覆盖后面调整大小/拖动（像这样，但使用 kineticjs：[http](http://envyum.nl/pointer/) ://envyum.nl/pointer/ ）

有没有办法这样做？也许通过从重叠的矩形中切出一个块？并且鼠标可以忽略`pointer-events: none`css3中的can等覆盖吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:16:54.160

我在上面的评论中有一个我在谈论的样本：http: [//jsfiddle.net/KwQBB/](http://jsfiddle.net/KwQBB/)

这不需要一个新层，但这样做可能是一个好习惯。

您可以将逻辑定制为您想要的任何东西，尤其是模拟“剪切”

```
 var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 500
  });
  var layer = new Kinetic.Layer();

  var pentagon = new Kinetic.RegularPolygon({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    sides: 5,
    radius: 70,
    fill: 'red',
    stroke: 'black',
    strokeWidth: 4,
    draggable: true,
    dragOnTop: false
  });
  var rect1 = new Kinetic.Rect({  // overlay
    x: 0,
    y: 0, 
    width: stage.getWidth(),
    height: 100,
    fill: 'gray',
    opacity: 0.5,
    listening: false     // <------ Extremely important
  });
  var rect2 = new Kinetic.Rect({ // overlay
    x: 0,
    y: stage.getHeight()/2, 
    width: stage.getWidth(),
    height: 100,
    fill: 'gray',
    opacity: 0.5,
    listening: false     // <------ Extremely important
  });

  // add the shape to the layer
  layer.add(pentagon);
  layer.add(rect1);
  layer.add(rect2);   // add more rectangles to complete overlay

  // add the layer to the stage
  stage.add(layer); 
```

# spring - 电话号码是 Springs 模型中的 3 个字段，但我只想要一个验证错误

> ID：15274485
> 
> 赞同：0
> 
> 时间：2013-03-07T15:01:46.167
> 
> 标签：spring, spring-mvc, spring-validator

在我正在处理的当前项目中，模型 bean 在 3 个字段中有电话号码，但我们只想要一个弹簧验证错误。可以这样做吗>

```
@NotEmpty(message = "Your Question must not be blank.")
@Size(min = 10, max = 200)
private String content;

@NotEmpty(message = "Area Code must not be blank.")
@Size(min = 3, max = 3, message = "Area must be 3 numbers")
private String areacode;

@NotEmpty(message = "Phone Number must not be blank.")
@Size(min = 3, max = 3, message = "phone number first part must be 3 numbers")
private String phone3;

@NotEmpty(message = "Phone Number must not be blank.")
@Size(min = 4, max = 4, message = "Phone number last part must be 4 numbers")
private String phone4; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:42:19.680

如果无论何时验证错误发生在类级别而不是在字段中都无关紧要，那么您可以使用休眠验证[ScriptAssert](http://docs.jboss.org/hibernate/validator/4.1/api/org/hibernate/validator/constraints/ScriptAssert.html) Validation

```
@ScriptAssert(
     lang="javascript"
     script="_this.areacode!=null and _this.phone3!=null and _this.phone4!=null"
 )
public class YourClass {
     private String areacode;
     private String phone3;
     private String phone4;
} 
```

有关更多其他想法，请查看跨域验证讨论/问题。 [使用 Hibernate Validator (JSR 303) 进行跨字段验证](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)

# apache-flex - Flash builder 代码导航失败

> ID：15274486
> 
> 赞同：1
> 
> 时间：2013-03-07T15:01:46.950
> 
> 标签：apache-flex, flex4, flash-builder

我在使用 Flash Builder 时遇到问题。它似乎仅在将路径属性设置`output folder`和构建到基本上是对 JBoss 文件夹位置的引用的路径时才会发生。`output folder url`

*   一切都编译并运行良好，但是代码导航 `CTRL+CLICK`显示`Source could not be found for <path>.swc`错误：

![在此处输入图像描述](../Images/f4730559b0314acb8705c94e0b25197c.png)

*   项目布局：一个主应用+1个库项目

![在此处输入图像描述](../Images/08ea40fb721790a3bed7d767183b969f.png)

*   主应用程序的构建路径：

![在此处输入图像描述](../Images/83ff2b2ffca41f636310b10e21ffa054.png)

*   库项目的构建路径：

![在此处输入图像描述](../Images/614e964bd4b5c01b4e6fbe5d47fd2127.png)

*   图书馆项目包含的类：

![在此处输入图像描述](../Images/3a51b0597d06ebd28e68fe1273761c8d.png)

*   主应用程序 mxml 的内容：

    ```
     <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               minWidth="955" 
               minHeight="600" 
               xmlns:local="*" 
               xmlns:test="be.some.test.*">
         <fx:Declarations>
            <test:SomeLibraryComponent/> <!--ctrl + click failing-->
         </fx:Declarations>
      </s:Application> 
    ```

*   主`.actionScriptProperties`应用程序文件：

    ```
    <actionScriptProperties analytics="false" mainApplicationPath="TestCodeNavi.mxml" projectUUID="d4c352fe-5d3a-454e-bb58-db0d96bd9edd" version="10">
       <compiler additionalCompilerArguments="-locale en_US" autoRSLOrdering="true" copyDependentFiles="true" fteInMXComponents="false" generateAccessible="true" htmlExpressInstall="true" htmlGenerate="true" htmlHistoryManagement="true" htmlPlayerVersionCheck="true" includeNetmonSwc="false" outputFolderLocation="MIRAGE_JBOSS_SERVER/deploy/mirage-server.war/TestCodeNavi" outputFolderPath="bin-debug" removeUnusedRSL="true" rootURL="http://localhost:8080/mirage-server/TestCodeNavi" sourceFolderPath="src" strict="true" targetPlayerVersion="0.0.0" useApolloConfig="false" useDebugRSLSwfs="true" verifyDigests="true" warn="true">
    <compilerSourcePath/>
    <libraryPath defaultLinkType="0">
      <libraryPathEntry kind="4" path="">
        <excludedEntries>
          <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/flex.swc" useDefaultLinkType="false"/>
          <libraryPathEntry kind="3" linkType="1" path="${PROJECT_FRAMEWORKS}/libs/core.swc" useDefaultLinkType="false"/>
        </excludedEntries>
      </libraryPathEntry>
      <libraryPathEntry kind="3" linkType="1" path="/TestCodeNaviLibrary/bin-debug/TestCodeNaviLibrary.swc" sourcepath="/TestCodeNaviLibrary" useDefaultLinkType="false"/>
    </libraryPath>
    <sourceAttachmentPath>
      <sourceAttachmentPathEntry kind="3" linkType="1" path="/TestCodeNaviLibrary/bin-debug/TestCodeNaviLibrary.swc" sourcepath="/TestCodeNaviLibrary" useDefaultLinkType="false"/>
    </sourceAttachmentPath>
      </compiler>
      <applications>
        <application path="TestCodeNavi.mxml"/>
       </applications>
       <modules/>
       <buildCSSFiles/>
      <flashCatalyst validateFlashCatalystCompatibility="false"/>
     </actionScriptProperties> 
    ```

非常感谢对此的一些指示。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:16:44.497

尝试以下操作：

1.  关闭 Flash Builder 中的所有项目
2.  在 notepad++ 中打开 .actionScriptProperties 文件并查看库路径和源路径。如果您在库路径中发现任何额外条目，您可以将其删除，保存文件并再次打开 Flash Builder。

另一个问题可能是，在库项目“类”选项卡中检查您已选择所有需要包含在项目中的类。

# c - k 和 r 行计数 1.5.3 不起作用？

> ID：15274489
> 
> 赞同：3
> 
> 时间：2013-03-07T15:01:55.787
> 
> 标签：c, getchar

我在使用 k&r 1.5.3 时遇到问题。显然我是一个完整的初学者。下面是完全来自书中的代码，和我输入的完全一样。它编译良好并运行。它返回字符，但从不打印行数。我在 Ubuntu 机器中使用 ssh。我妻子的mac上的key不能解释为'\n'吗？

```
#include <stdio.h>

/*count lines in input*/

main()
{
     int c, n1;

     n1 = 0;
     while ((c = getchar()) != EOF)
          if (c == '\n')
               ++n1;
     printf("%d\n", n1);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:03:26.397

正确的。Mac`\r`用作行尾：[http ://en.wikipedia.org/wiki/Newline](http://en.wikipedia.org/wiki/Newline)

像这样更新您的代码：

```
#include <stdio.h>

/*count lines in input*/

main()
{
     int c, n1;

     n1 = 0;
     while ((c = getchar()) != EOF)
          if (c == '\r')                      /* use \r for Macs */
               ++n1;
     printf("%d\n", n1);
} 
```

**然而**

当我尝试做同样的事情时，我必须`Ctrl-D`输入一个`EOF`并触发程序打印行数。

# python - 如何在 django 中将字符串转换为本地化日期

> ID：15274490
> 
> 赞同：1
> 
> 时间：2013-03-07T15:01:58.927
> 
> 标签：python, django, date, localization, date-format

我们在 Django 中进行 AJAX 调用，其中用户输入日期和数字，AJAX 调用查找是否已经存在具有该数字和日期的文档。

该应用程序是国际化和本地化的。问题是如何将 AJAX 发送的日期解释为有效的 Python/Django 日期对象。当然，这必须使用当前用户的语言环境来完成。

我发现的一种解决方案不起作用： [Django：如何在视图中获取格式日期？](https://stackoverflow.com/questions/8287883/django-how-to-get-format-date-in-views)
`get_format()`返回一个字符串（在我们的例子中`j-n-Y`），但`strftime()`期望格式字符串为`%j-%n-%Y`.

为什么 Django 格式与格式不同`stftime()`让我印象深刻，仅供参考，我们目前使用的是 Django 1.5。

我认为问题在于，在我能找到的所有示例中，日期已经是日期对象，而 Python/Django 只是进行格式化。我们需要的是使用当前语言环境将字符串转换为日期，然后对其进行格式化。我认为这将是一个标准问题，但我找到并尝试过的所有可能的解决方案似乎都不起作用......

谢谢，
埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:06:48.090

向 Django 提交票证给了我答案的线索。您可以通过将特定类型的数据传递给相应的字段并调用 to_python() 将其转换为对象。在我的情况下，它会是这样的：

```
from django.forms.fields import DateField

field = DateField()
value = request.GET.get('date', '')
formatted_datetime = field.to_python(value) 
```

埃里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:07:53.250

在我看来，让用户从日历中选择日期，而不是键入其字符串表示形式，会让您的生活更轻松。这样你就知道你得到了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:44:31.500

如果您知道格式，那么您应该能够使用`datetime.strptime`.

已将它与 ajax 调用一起成功地用于代码中。

有关更多信息，请参见此处：http: [//docs.python.org/2/library/datetime.html#strftime-strptime-behavior](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)

# ios - 移动和旋转 UIImageView

> ID：15274491
> 
> 赞同：0
> 
> 时间：2013-03-07T15:02:01.170
> 
> 标签：ios, uiimageview, rotation, move

我有一个带有循环旋转动画的 UIImageView，我需要在屏幕中将 UIImageView 移动 x 和 y。

旋转动画代码为：

```
-(void)rotate{

if (leftRotate){
    leftRotate = NO;
}else{
    leftRotate = YES;
}

CGRect initFrame = self.frame;

[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationOptionRepeat|UIViewAnimationOptionAutoreverse
                 animations:^{

                     if (leftRotate){
                         self.transform = CGAffineTransformRotate(self.transform, -1 * (M_PI/8));
                     }else{
                         self.transform = CGAffineTransformRotate(self.transform, M_PI / 8);
                     }

                 }
                 completion:^(BOOL completed) {
                     if (completed){
                         if (!stopRotate){
                             [self rotate];
                         }
                     }
                 }];
} 
```

我尝试了不同的方法来移动图像，比如设置中心，但我不能移动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:08:47.863

我找到了方法，我必须将中心设置在动画之外：

```
CGPoint facePosition = CGPointMake(self.face1.center.x+1,
                                 self.face1.center.y);

self.face1.center = facePosition; 
```

# android - 将 Android TextViews 与不同的行号对齐

> ID：15274492
> 
> 赞同：0
> 
> 时间：2013-03-07T15:02:02.917
> 
> 标签：android, textview, alignment

我正在尝试对齐 n 个文本视图，其中可以有不同数量的垂直和水平居中的行，并且具有更多行的文本视图“下降”，即使它们具有固定的大小和中心对齐方式。是否可以通过代码对齐它们**？**

这是我的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="one line"
        android:textSize="48dp"
        tools:context=".MainActivity" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="two lines"
        android:textSize="48dp" />

</LinearLayout> 
```

这是我的java类：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView oneline=(TextView) findViewById(R.id.textView1);
        TextView twolines=(TextView) findViewById(R.id.textView2);
        twolines.setText("two lines \n two lines");
        oneline.setHeight(200);
        twolines.setHeight(200);
        oneline.setWidth(400);
        twolines.setWidth(400);
        oneline.setBackgroundColor(Color.YELLOW);
        twolines.setBackgroundColor(Color.YELLOW);
        oneline.setGravity(Gravity.CENTER);
        twolines.setGravity(Gravity.CENTER);     
    } 
```

这就是结果：-\ ![偏斜](../Images/72d3692819bab45ecede67c00be88a6a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:39:47.060

我不知道为什么会发生这种情况，但是当您将布局更改为相对时，问题就消失了。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:background="@android:color/darker_gray"
        android:gravity="center"
        android:text="one line"
        android:textSize="20sp"
        tools:context=".MainActivity" />

    <TextView
        android:layout_toRightOf="@id/textView1"
        android:id="@+id/textView2"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_gravity="top"
        android:background="@color/abs__holo_blue_light"
        android:gravity="center"
        android:text="two lines
two lines"
android:layout_gravity="center"
        android:textSize="20sp"
         />

</RelativeLayout> 
```

**编辑** 实际上这只是baseline_alignment 问题。这是基于代码的解决方案。

```
 TextView oneline=(TextView) findViewById(R.id.textView1);
        TextView twolines=(TextView) findViewById(R.id.textView2);
        twolines.setText("two lines \n ywo lines");
        oneline.setHeight(200);
        twolines.setHeight(200);
        oneline.setWidth(400);
        twolines.setWidth(400);
        oneline.setBackgroundColor(Color.YELLOW);
        twolines.setBackgroundColor(Color.RED);

        oneline.setGravity(Gravity.CENTER);
        twolines.setGravity(Gravity.CENTER);

        ViewParent v = ((View) oneline).getParent();
        ((LinearLayout) v).setBaselineAligned(false); 
```

# android - 如何使用适用于 Android 的 Universal Image Loader 加载缩略图？

> ID：15274494
> 
> 赞同：4
> 
> 时间：2013-03-07T15:02:04.073
> 
> 标签：android, thumbnails, universal-image-loader

我正在使用这个库： [https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

我想使用 lib 将图像缩略图加载到 ImageView 中。

我可以传递什么内容uri：

```
imageLoader.displayImage(imageUri, imageView); //? 
```

文档给出了使用内容 url 的示例：

```
String imageUri = "content://media/external/audio/albumart/13"; // from content provider 
```

我非常想从这样做切换：

```
 return MediaStore.Images.Thumbnails.getThumbnail(context.getContentResolver(), id, MediaStore.Images.Thumbnails.MICRO_KIND, null); 
```

使用库。

如您所见，我有 id，但我需要为 MICRO_KIND 图像缩略图构建一个 url...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:33:39.870

我认为您可以使用下一个 URI 格式：`content://media/external/images/thumbnails/13`

```
String uri = "content://media/external/images/thumbnails/" + id; 
```

# scala - 编译后对象的静态方法消失了

> ID：15274495
> 
> 赞同：0
> 
> 时间：2013-03-07T15:02:04.977
> 
> 标签：scala

使用这段非常简单的代码

```
import java.util.Properties

class MyProperties extends Properties

object MyProperties {

    def get(): MyProperties = new MyProperties

    def anotherMethod(): MyProperties = new MyProperties

} 
```

`get()`编译后的代码中缺少该方法；类的 Java 反编译`MyProperties`产生（省略了 scala 签名）

```
import java.util.Properties;
import scala.reflect.ScalaSignature;

public class MyProperties extends Properties
{
  public static MyProperties anotherMethod()
  {
    return MyProperties..MODULE$.anotherMethod();
  }
} 
```

但是，如果`MyProperties`不扩展，则生成`java.util.Properties`该`get()`方法。

`java.util.Properties`继承`public V get(Object key)`from`java.util.Dictionary`但这是一个具有不同签名的非静态方法。

为什么`get()`生成的字节码中缺少（静态）方法？

Scala 2.10.1-rc2 - JVM 1.6.0_41

**编辑** 与 2.10.0 相同的问题

**编辑 2** 这在 java 中“有效”

```
import java.util.Properties;

public class MyPropertiesjava extends Properties {

    private static final long serialVersionUID = 1L;

    public static MyProperties get() {

        return new MyProperties();
    }

    public static MyProperties antotherMethod() {

        return new MyProperties();
    }
} 
```

**编辑 3** 对以下 Régis 解决方法的一个小编辑（类型不能是“全局”）

```
import java.util.Properties

class MyPropertiesImpl extends Properties

object MyProperties {

    type MyProperties = MyPropertiesImpl

    def get(): MyProperties = new MyPropertiesImpl

    def anotherMethod(): MyProperties = new MyPropertiesImpl

} 
```

**编辑** Typesafe 团队[在此处跟踪的 4 个问题](https://issues.scala-lang.org/browse/SI-7225)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:20:14.000

您没有查看正确的类文件。尝试反编译`MyProperties$`。

**更新**：我的错，我现在明白你实际上是在寻找静态转发器`get`。它从 中消失的原因`MyProperties.class`是因为`get`类中已经有一个方法`MyProperties`（从 继承`Properties`）会与自动生成的静态转发器冲突（因此编译器**不会**生成它）。有关更多上下文，请参阅我之前提出的其他答案：[https ://stackoverflow.com/a/14379529/1632462](https://stackoverflow.com/a/14379529/1632462) 但是，我必须说你提出了一个很好的观点，通常不应该有冲突，因为它们有不同的签名（不像一个是静态的，另一个不是，因为静态和非静态方法共享相同的命名空间JVM AFAIK）。我猜编译器采取了简单的方法，只检查方法名称的存在，而不是检查确切的签名。

这里修复它的一种方法是重命名`MyProperties`（并可能添加一个类型别名，以便 API 保持不变）：

```
class MyPropertiesImpl extends Properties
type MyProperties = MyPropertiesImpl 
object MyProperties {
    def get(): MyProperties = new MyPropertiesImpl
    def anotherMethod(): MyProperties = new MyPropertiesImpl
} 
```

因为`MyProperties`不再是`MyPropertiesImpl`问题的伴侣消失了。

# json - 将多个 JSON 对象记录到单个文件 - 文件格式

> ID：15274496
> 
> 赞同：0
> 
> 时间：2013-03-07T15:02:10.547
> 
> 标签：json, logging, protocol-buffers, bson, messagepack

我有一个解决方案，我需要能够将多个 JSON 对象记录到一个文件中。基本上每天做一个日志文件。从单个文件中写入（然后读取）这些内容的最简单方法是什么？

MongoDB 如何使用 BSON 处理这个问题？它用什么作为“记录”之间的分隔符？

协议缓冲区、BSON、MessagePack 等是否提供压缩和记录概念？压缩将是一个很好的好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:05:05.423

使用协议缓冲区，您可以按如下方式定义消息：

```
Message JSONObject {
    required string JSON = 1;
}

Message DailyJSONLog {
  repeated JSONObject JSON = 1;
} 
```

这样，您只需从内存中读取文件并对其进行反序列化。序列化它们的方式也基本相同。在磁盘上拥有文件（序列化`DailyJSONLog`）后，您可以轻松地将序列化`JSONObject`的 s 附加到该文件的末尾（因为`DailyJSONLog`消息非常简单地是一个重复字段）。

唯一的问题是，如果您每天有很多消息，或者您想在一天中从某个位置开始（您无法轻松到达重复列表的中间（或任意））。

我已经解决了这个问题，方法是对其进行`JSONObject`序列化，然后对其进行 base64 编码。我会将这些存储到一个由新行分隔的文件中。这使您可以非常轻松地查看每个文件中有多少条记录，访问文件中的任意 JSON 对象并轻松地继续扩展文件（您也可以非常简单地扩展上述“重复”消息，但它是一种简单的操作方式...）

压缩是一个不同的主题。协议缓冲区不会压缩字符串。如果您要定义一个 pb 消息来匹配您的 JSON 消息，那么您将受益于让 pb 可能将任何整数“压缩”成它们的`[varint][1]`编码格式。如果您也尝试使用 base64 编码路线，您将获得“更少”的压缩。

# blackberry-10 - 黑莓 10 左滑块

> ID：15274503
> 
> 赞同：0
> 
> 时间：2013-03-07T15:02:32.820
> 
> 标签：blackberry-10

菜单从屏幕左侧弹出的菜单滑块很棒。“我只是想看看如何在我的应用程序中模拟它。

任何人都知道如何实现它？”

我希望它看起来和图片上的一模一样，左侧有菜单项。

![左侧菜单滑块](../Images/f450fae3617ee962264977090261767b.png)

有一个类似的Android[问题](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:16:29.077

您可以为此目的使用[TabbedPane](https://developer.blackberry.com/cascades/reference/bb__cascades__tabbedpane.html)，在左侧菜单中填充一组[Actions](https://developer.blackberry.com/cascades/reference/bb__cascades__actionitem.html)。但是，使用`TabbedPane`意味着您必须使用[Tabs](https://developer.blackberry.com/cascades/reference/bb__cascades__tab.html)。

在您的情况下，您很可能必须使用从*右侧*`Actions`弹出的菜单，因为这符合[黑莓设计指南](https://developer.blackberry.com/design/bb10/)并符合您的目标，我可以从提供的屏幕截图中看到它更好。

# android - 如何在 Android 中与 OpenGL 共享 Renderscript 分配

> ID：15274505
> 
> 赞同：6
> 
> 时间：2013-03-07T15:02:35.757
> 
> 标签：android, opengl-es-2.0, renderscript

我有一个渲染脚本，它处理在输出中提供给分配的图像。我想在我的 OpenGL 程序中将此分配用作纹理，但我不知道如何从分配中获取纹理 ID。

另一方面，我知道我可以使用图形渲染脚本，但由于它已被弃用，我想必须有其他方法来实现相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T16:51:45.513

创建分配时指定 USAGE_IO_OUTPUT。假设您在脚本中生成纹理数据，您还将添加 USAGE_SCRIPT。然后你可以打电话

Allocation.setSurface(GLSurface)

将分配链接到纹理。每次你想用你需要调用的脚本的内容来更新纹理。

分配.ioSend()

这将在不制作额外副本的情况下移动数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-27T02:10:34.037

您已经根据将分配转换为纹理来表达问题，但更容易想到创建纹理然后授予该纹理的分配所有权。这样，您将在将纹理 ID 传递给分配之前知道它。当心：分配有能力[从根本上改变](http://developer.android.com/reference/android/renderscript/Allocation.html#USAGE_IO_OUTPUT)纹理的属性。

## 一步步：

1.  创建 GL 纹理

2.  使用其 ID创建[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html#SurfaceTexture%28int%29)

3.  使用使用情况创建分配`Allocation.USAGE_IO_OUTPUT | Allocation.USAGE_SCRIPT`

4.  将 SurfaceTexture 传递给分配`setSurface()`

5.  将数据放入分配

6.  调用`ioSend()`分配以更新纹理

7.  尽可能频繁地重复步骤 5 和 6，以更新纹理

我离 GL 专家还很远，所以第 2 步坦率地说是猜想。下面是对 HelloCompute 示例的改编，我在其中替换 `displayout`为[TextureView](http://developer.android.com/reference/android/view/TextureView.html)，这是一个可以为我轻松创建纹理和 SurfaceTexture 的视图。从那时起，我按照上面的步骤。

```
package com.example.android.rs.hellocompute;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.SurfaceTexture;
import android.os.Bundle;
import android.renderscript.Allocation;
import android.renderscript.Element;
import android.renderscript.RenderScript;
import android.renderscript.Type;
import android.view.Surface;
import android.view.Surface.OutOfResourcesException;
import android.view.TextureView;
import android.widget.ImageView;

public class HelloCompute extends Activity {
    private Bitmap mBitmapIn;

    private RenderScript mRS;
    private ScriptC_mono mScript;
    private Allocation mSurfaceAllocation;
    private Allocation mCanvasAllocation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mBitmapIn = loadBitmap(R.drawable.data);
        int x = mBitmapIn.getWidth();
        int y = mBitmapIn.getHeight();

        ImageView in = (ImageView) findViewById(R.id.displayin);
        in.setImageBitmap(mBitmapIn);

        mRS = RenderScript.create(this);
        mScript = new ScriptC_mono(mRS, getResources(), R.raw.mono);

        mCanvasAllocation = Allocation.createTyped(mRS, 
                new Type.Builder(mRS, Element.RGBA_8888(mRS))
                    .setX(x).setY(y).create(), 
                Allocation.USAGE_IO_INPUT | Allocation.USAGE_SCRIPT);

        mSurfaceAllocation = Allocation.createTyped(mRS, 
                new Type.Builder(mRS, Element.RGBA_8888(mRS))
                    .setX(x).setY(y).create(), 
                Allocation.USAGE_IO_OUTPUT | Allocation.USAGE_SCRIPT);

        TextureView mTextureView = (TextureView) findViewById(R.id.displayout);
        mTextureView.setSurfaceTextureListener(
          new TextureView.SurfaceTextureListener() {
            @Override
            public void onSurfaceTextureAvailable(SurfaceTexture s, 
                    int w, int h) {
                if(s != null) mSurfaceAllocation.setSurface(new Surface(s));
                mScript.forEach_root(mCanvasAllocation, mSurfaceAllocation);
                mSurfaceAllocation.ioSend();
            }

            @Override
            public void onSurfaceTextureUpdated(SurfaceTexture s) {
            }

            @Override
            public void onSurfaceTextureSizeChanged(SurfaceTexture s, 
                    int w, int h) {
                if(s != null) mSurfaceAllocation.setSurface(new Surface(s));
            }

            @Override
            public boolean onSurfaceTextureDestroyed(SurfaceTexture s) {
                mSurfaceAllocation.setSurface(null);
                return true;
            }
        });

        try {
            Surface surface = mCanvasAllocation.getSurface();
            Canvas canvas = surface.lockCanvas(new Rect(0,0,100,100));
            canvas.drawBitmap(mBitmapIn, 0, 0, new Paint());
            surface.unlockCanvasAndPost(canvas);
            mCanvasAllocation.ioReceive();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (OutOfResourcesException e) {
            e.printStackTrace();
        }
    }

    private Bitmap loadBitmap(int resource) {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        return BitmapFactory.decodeResource(getResources(), resource, options);
    }
} 
```

# ruby-on-rails - Ruby：向现有模块添加方法

> ID：15274507
> 
> 赞同：2
> 
> 时间：2013-03-07T15:02:49.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, module, metaprogramming

有一个模块：

```
module ActionDispatch
  module Routing
  end
end 
```

和方法：

```
def add_movie_path
end

def edit_movie_path
end 
```

我如何添加到模块**路由**这个方法？

这是唯一的方法吗[？](http://www.ruby-doc.org/core-2.0/Module.html#method-i-module_exec)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:14:03.127

尝试：

```
module ActionDispatch
  module Routing
    def add_movie_path
    end

    def edit_movie_path
    end
     module_function :edit_movie_path
  end
end 
```

这样你就可以像这样调用**实例方法**：

```
class Make
   include ActionDispatch::Routing
end 

class MakeAll
   def only_needs_the_one_method
      ActionDispatch::Routing.edit_movie_path
   end
end 
```

您还可以通过使用将其定义为**类方法**`self.class_name`，然后像这样直接访问它：

```
module ActionDispatch
  module Routing
    def self.add_movie_path
    end

    def self.edit_movie_path
    end
  end
end

class Make
    include ActionDispatch::Routing
   def do_something
     ActionDispatch::Routing.add_movie_path
   end
end 

class MakeAll
   def only_needs_the_one_method
      ActionDispatch::Routing.edit_movie_path
   end
end 
```

有关更多信息，请参阅[Modules Magic](http://railsforum.com/viewtopic.php?id=20194)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:09:13.947

除非我误解了您的要求，否则类似：

```
module ActionDispatch
  module Routing
    def add_movie_path
    end

    def edit_movie_path
    end
  end
end 
```

或者，您可以使用`module_eval`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:11:47.527

只需将您的方法放在模块中即可。

```
module ActionDispatch
  module Routing
    def add_movie_path
    end

    def edit_movie_path
    end  
  end
end 
```

# sql - SQL 插入新行

> ID：15274508
> 
> 赞同：1
> 
> 时间：2013-03-07T15:02:54.137
> 
> 标签：sql

我有一个问题，我不知道如何在表格中添加新行。我只想再添加一行具有相同 ID_Group 但具有不同 ID_item 的行。我有一个名为 ID_group 的列，其 id 从 1 到 230，每个 ID_group 有 7 行（下面的查询）。现在我需要向每个 ID_group 添加第 8 行，因为有一个新的 id_item 是 7（逻辑上）这个查询只显示我在说什么

```
id_group    id_item
   9        0
   9        1
   9        2
   9        3
   9        4
   9        5
   9        6
  10        0
  10        1
  10        2
  10        3
  10        4
  10        5
  10        6
  11        0
  11        1
  11        2
  11        3
  11        4
  11        5
  11        6
  13        0
  13        1
  13        2
  13        3
  13        4
  13        5
  13        6 
```

你能帮助我吗？

还有一件事。我是 SQL 和开发新手，对任何愚蠢的问题感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:05:59.797

```
Insert MyTable (Id_group, ID_Item)
select distinct Id_group,7 from MyTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:08:35.700

假设 T-SQL 并且我理解您正在尝试为每个现有的 id_group 添加一个 id_item 7，这应该这样做：

```
INSERT INTO [tablename] (id_group,id_item)
SELECT DISTINCT id_group,7
FROM [tablename]; 
```

您必须将实际表名替换为`[tablename]`.

# internet-explorer - 使用带参数的 Activex 控件

> ID：15274509
> 
> 赞同：1
> 
> 时间：2013-03-07T15:02:54.883
> 
> 标签：internet-explorer, vb6, activex

我已经构建了一个 ActiveX 控件，当我使用不带参数时它可以工作，当它与参数一起使用时它不起作用。

```
<OBJECT  classid="clsid:959B7E21-5C0B-4BEC-BA2E-48DA2B6D66C8"></OBJECT> 
```

当我如下使用时，它不会在 IE 中加载，没有任何显示。

```
<OBJECT  classid="clsid:959B7E21-5C0B-4BEC-BA2E-48DA2B6D66C8">                
            <PARAM NAME="Id" VALUE="2">
</OBJECT> 
```

我也收到了这个警告

![在此处输入图像描述](../Images/09a93d11a27e41bbff6b955005463d77.png)

在我的控件代码中，我为控件定义了如下属性，

```
Option Explicit
Dim m_Id As Integer
Public Property Get Id() As String
    Id= m_Id 
End Property

Public Property Let Id(ByVal New_Id As String)
    m_Id = New_Id
    PropertyChanged "Id"
End Property 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:24:06.143

您的 ActiveX 不适合编写脚本。请参阅[ActiveX 控件的安全初始化和脚本](http://msdn.microsoft.com/en-us/library/aa751977%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:19:51.403

执行以下操作后，警告消息消失了。

> 1.  开始 -> 运行 -> 注册表编辑器
> 2.  转到 HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\0
> 3.  双击 1201 并将值更改为 0（可能是 1）
> 4.  关闭注册表编辑器

# ios - AppDelegate 和 .xib 未正确实施，但构建成功？

> ID：15274515
> 
> 赞同：0
> 
> 时间：2013-03-07T15:03:07.537
> 
> 标签：ios, xcode, uitableview, delegates, xib

如果不粘贴所有代码，我真的不知道如何解释这一点，但我会试一试。“假设”我的 .hs 和 .ms 是准确的，我感觉我的 .xib 设置不正确，但我不能真正粘贴代码。相反，我压缩了文件并上传了源代码。（如果你足够勇敢，它就在这里：[http](http://bit.ly/ZtDkGi) ://bit.ly/ZtDkGi ）我得到了一个成功的构建，但我的模拟器的屏幕在应用程序启动后只是黑色的。

本质上，我必须手动添加一个 appDelegate 对象。我将课程设置为适当的课程 - 但它仍然没有拉动。如果有人愿意提供帮助，那就太好了。

这是我的 Test_TableViewAppDelegate.h

```
#import <UIKit/UIKit.h>
@interface Test_TableViewAppDelegate : NSObject <UIApplicationDelegate>
{

}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *navController;

@end 
```

这是我的**新**Test_TableViewAppDelegate.m

#import "Test_TableViewAppDelegate.h"

```
@implementation Test_TableViewAppDelegate

@synthesize window=_window;
@synthesize navController=_navController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
//self.window.backgroundColor = [UIColor whiteColor];

UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
window.backgroundColor = [UIColor greenColor];
self.window = window;

UIViewController *fvc = [[UIViewController alloc] init];

UIViewController *rootController = [[UIViewController alloc] initWithNibName:@"RootViewController" bundle:nil];
UINavigationController *nc = [[UINavigationController alloc]initWithRootViewController:rootController];

//UINavigationController *nc = [[UINavigationController alloc]initWithRootViewController:fvc];
self.navController = nc;

//[self.window addSubview: nc.view];
//[self.window makeKeyAndVisible];

self.window.rootViewController = self.navController;
[self.window makeKeyAndVisible];
return YES;
} 
```

RootViewController.h

```
#import <UIKit/UIKit.h>

@interface RootViewController : UITableViewController {
NSMutableArray *petsArray;

}

@end 
```

根视图控制器.m

```
#import "RootViewController.h"

@interface RootViewController ()

@end

@implementation RootViewController 
```

最后但并非最不重要的一点是 main.m（我认为这也可能是一个问题）

```
#import "Test_TableViewAppDelegate.h"

int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([Test_TableViewAppDelegate class]));
}
} 
```

提前致谢。我会很感激的：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:18:09.957

在您的代表中`Test_TableViewAppDelegate` ，为什么您向窗口添加两次视图？

```
// you could remove these two lines
[self.window addSubview: nc.view];
[self.window makeKeyAndVisible];  

//keep these two lines
self.window.rootViewController = self.navController;
[self.window makeKeyAndVisible]; 
```

您添加到 navigationController 的这个视图没有用任何 nib 名称初始化

```
UIViewController *fvc = [[UIViewController alloc] init]; 
```

在您的委托中初始化应该是这样的

```
RootViewController *rootController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];
UINavigationController *nc = [[UINavigationController alloc]initWithRootViewController:rootController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:20:54.057

我相信你得到黑屏的原因是你没有正确分配和初始化你的导航控制器！

相反，您应该尝试以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    // create the base window
    UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    window.backgroundColor = [UIColor greenColor];
    self.window = window;

    [window release];

    // this is the home page from the user's perspective

    FirstViewController *fvc = [[FirstViewController alloc] init];

    UINavigationController *nc = [[UINavigationController alloc]initWithRootViewController:fvc];
    self.navigationController = nc;

    [fvc release];
    [nc release];

    // show them
    [self.window addSubview: nc.view];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

希望这有效！

# c# - ASP.NET MVC 在运行时查看可扩展性

> ID：15274519
> 
> 赞同：7
> 
> 时间：2013-03-07T15:03:27.677
> 
> 标签：c#, asp.net-mvc, template-engine

我们正在将我们的应用程序迁移到 .NET。主要目标之一是允许修改每个客户端的应用程序，但不允许修改源代码。我们通过对接口进行编程并使用依赖解析器（具有覆盖基本注册的选项）和 MEF 在核心框架中解决了这个问题。

现在，当涉及到视图（客户端看到的 UI）时，模板看起来是静态的，如果客户端想要在屏幕上添加一个新字段，他们似乎需要修改视图本身。

我能想到的唯一两件事就是修改viewengine的搜索路径。这将允许复制基础并获取对它的更改。不是很喜欢这个，因为它是代码的副本。

另一种方式，我们现在正在做的是，我们创建一个类，它是输出 HTML 的其他对象的容器。基本上我们有一个 PageObject、LabelObject、InputObject..ect，我们可以调用它们来渲染和输出 HTML。因为它们是类，所以我们可以使用与其他应用相同的方法来给出分片。走这条路，我们实际上并没有使用视图引擎进行渲染，而只是为了组合所有的局部视图。似乎有点笨拙。

是否有不同的方法来实现这个目标，或者我可以使用不同的视图引擎来实现在不触及基本视图的情况下为客户定制的目标？我知道 HTML 不是一个对象，但在处理 HTML 并允许自定义时，似乎在 ASP.NET WebForms 和 ASP.NET MVC 之间必须有一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:08:37.087

我会创建一个强类型的局部视图或模板（DisplayTemplate 或 EditorTemplate 基于要求），它`@model`是作为输入和标签呈现的事物的集合。允许客户端添加/删除持久集合中的项目（即在数据库中），您的问题可以使用内置的 ViewEngine 解决。

# visual-studio - 使用 SCons TryCompile 检查 Windows 上的编译器标志支持

> ID：15274521
> 
> 赞同：4
> 
> 时间：2013-03-07T15:03:32.637
> 
> 标签：visual-studio, warnings, configure, scons

使用 GCC 和 clang，我已经能够使用 SCons 的“TryCompile”功能来构建一个简单的配置检查，以确定当前配置的编译器是否支持给定的编译标志。基本上就是克隆 env，把有问题的 flag 添加到 CFLAGS、CCFLAGS 或 CXXFLAGS，酌情执行 TryCompile，如果 TryCompile 成功，则支持该 flag，我们可以将其添加到真正的 env 中。

*   这与 gcc 完美配合，因为未知标志是错误并且编译器以非零状态退出。
*   使用 clang，它也可以很好地工作：默认情况下，clang 将未知错误视为警告，但如果你传递它 -Werror 它会将未知标志转换为错误。所以我的 TryCompile 包装器总是通过 -Werror 以及要测试的标志，如果它知道我们正在使用 clang。

但是，这一切都被 Microsoft 工具链所破坏，因为据我所知，*没有办法*说服编译器将未知标志视为错误：它们始终是警告，即使您传递标志以产生警告错误也是如此。由于编译退出干净或不接受标志，TryCompile 总是成功。有关我为使 MSVC 以非零状态退出而进行的各种尝试的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/15259720/how-can-i-make-the-microsoft-c-compiler-treat-unknown-flags-as-errors-rather-t "这个问题")

关于如何完成这项工作的任何想法？是否有另一个我忽略的 SCons 设施可以为我完成这项工作？我应该在 MS 平台上插入 TryCompile 并解析编译器输出而不是检查退出状态。我很高兴使用 TryCompile 通过 clang 和 gcc 进行配置时间标志检测，但如果我不能让 MSVC 合作，我将需要放弃这整个方法，我很讨厌这样做，因为到目前为止，它运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:45:10.867

让 Windows 再一次在游行中下雨 :) 显然，Windows 编译器总是返回成功，不管发生什么。

我能想到几个你可以尝试的选项。

首先，SCons 提供了[多平台配置（Autoconf 功能）](http://www.scons.org/doc/2.2.0/HTML/scons-user/c4241.html)，可以帮助您实现相同的结果。它不包括任何编译器选项，但至少包括以下内容：

*   检查头文件是否存在
*   检查函数的可用性
*   检查库的可用性
*   检查 typedef 的可用性
*   添加您自己的自定义检查

另一种选择是使用 Microsoft 编译选项构建某种字典。每个编译器版本可能需要一本字典。这个特殊的选择可能需要很长时间来准备，而且可能不值得。

另一种选择是使用 Object() 或 Program() 构建器而不是 TryCompile() 构建器，并尝试*捕获*故障并做出相应的反应。我不确定 SCons 是否允许您将编译失败作为异常捕获并在失败时继续执行，但值得一试。

# google-app-engine - 带有 Maven 的谷歌云端点

> ID：15274522
> 
> 赞同：0
> 
> 时间：2013-03-07T15:03:34.117
> 
> 标签：google-app-engine, google-cloud-endpoints

我正在尝试在 gae 上使用谷歌云端点。我正在尝试将它集成到 Maven 中。我发现这个 maven 插件可以这样做： [http ://code.google.com/p/maven-endpoint-plugin/](http://code.google.com/p/maven-endpoint-plugin/)

我能够定义我的 api 并生成 api。当我的 api 部署在应用程序引擎上时，我可以调用它。但是当我尝试在本地调用它进行调试时，我得到以下异常：

```
javax.servlet.ServletContext log: unavailable
java.lang.IllegalArgumentException: '' not a valid path variable name
    at com.google.api.server.spi.tools.devserver.ParameterizedPath.validateName(ParameterizedPath.java:96)
    at com.google.api.server.spi.tools.devserver.ParameterizedPath.getVariableNames(ParameterizedPath.java:68)
    at com.google.api.server.spi.tools.devserver.ParameterizedPath.<init>(ParameterizedPath.java:53)
    at com.google.api.server.spi.tools.devserver.RestMethodDispatcher.saveRestMethod(RestMethodDispatcher.java:37)
    at com.google.api.server.spi.tools.devserver.RestMethodDispatcher.<init>(RestMethodDispatcher.java:30)
    at com.google.api.server.spi.tools.devserver.RestApiServlet.loadApiConfigs(RestApiServlet.java:120)
    at com.google.api.server.spi.tools.devserver.ApiServlet.init(ApiServlet.java:65)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

mars 07, 2013 2:53:38 PM com.google.apphosting.utils.jetty.JettyLogger warn
Avertissement: /_ah/api/project/v1/addProject
java.lang.IllegalArgumentException: '' not a valid path variable name
    at com.google.api.server.spi.tools.devserver.ParameterizedPath.validateName(ParameterizedPath.java:96)
    at com.google.api.server.spi.tools.devserver.ParameterizedPath.getVariableNames(ParameterizedPath.java:68)
    at com.google.api.server.spi.tools.devserver.ParameterizedPath.<init>(ParameterizedPath.java:53)
    at com.google.api.server.spi.tools.devserver.RestMethodDispatcher.saveRestMethod(RestMethodDispatcher.java:37)
    at com.google.api.server.spi.tools.devserver.RestMethodDispatcher.<init>(RestMethodDispatcher.java:30)
    at com.google.api.server.spi.tools.devserver.RestApiServlet.loadApiConfigs(RestApiServlet.java:120)
    at com.google.api.server.spi.tools.devserver.ApiServlet.init(ApiServlet.java:65)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

而且我也无法生成客户端库（执行 mvn compile 或使用 google eclipse 插件）

有没有人成功地将 google cloud enpoints 与 maven 集成： - 生成客户端库 - 在本地测试 - 部署到应用程序引擎并使其工作（这是唯一的步骤，我设法开始工作）

这是 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>

    <groupId>com.kubity</groupId>
    <artifactId>Kubity</artifactId>

    <properties>
        <appengine.app.id>!!!!</appengine.app.id>
        <appengine.app.version>!!!!</appengine.app.version>
        <appengine.target.version>1.7.5</appengine.target.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <endpoint.service.classnames>com.kubity.business.project.api.ProjectEndpoint</endpoint.service.classnames>
        <!-- <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory> -->
    </properties>

    <repositories>
        <repository>
            <id>objectify-appengine</id>
            <name>Objectify Maven Repository</name>
            <url>http://objectify-appengine.googlecode.com/svn/maven</url>
        </repository>
        <repository>
            <id>cbreleases</id>
            <url>https://repository-michael.forge.cloudbees.com/release</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>cbreleases</id>
            <url>https://repository-michael.forge.cloudbees.com/release</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>

    <dependencies>
        <!-- Compile/runtime dependencies -->
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-1.0-sdk</artifactId>
            <version>${appengine.target.version}</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>com.googlecode.objectify</groupId>
            <artifactId>objectify</artifactId>
            <version>3.1</version>
        </dependency>

        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0.2</version>
        </dependency>

        <!-- using jersey to test the upload web service, this might change in 
            the future -->
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.17</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-json</artifactId>
            <version>1.17</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-multipart</artifactId>
            <version>1.17</version>
        </dependency>
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-servlet</artifactId>
            <version>1.17</version>
        </dependency>

        <dependency>
            <groupId>com.google.api</groupId>
            <artifactId>appengine-local-endpoints</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.api</groupId>
            <artifactId>appengine-endpoints</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.7</version>
        </dependency>

        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.2.2</version>
        </dependency>

        <!-- Test Dependencies -->
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-testing</artifactId>
            <version>${appengine.target.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-stubs</artifactId>
            <version>${appengine.target.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <version>2.5.1</version>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <archiveClasses>true</archiveClasses>
                    <webResources>
                        <!-- in order to interpolate version from pom into appengine-web.xml -->
                        <resource>
                            <directory>${basedir}/src/main/webapp/WEB-INF</directory>
                            <filtering>true</filtering>
                            <targetPath>WEB-INF</targetPath>
                        </resource>
                    </webResources>
                    <nonFilteredFileExtensions>
                        <nonFilteredFileExtension>p12</nonFilteredFileExtension>
                    </nonFilteredFileExtensions>
                </configuration>
            </plugin>

            <plugin>
                <groupId>com.google.appengine</groupId>
                <artifactId>appengine-maven-plugin</artifactId>
                <version>${appengine.target.version}</version>
                <!--<configuration>
                    <jvmFlags>
                        <jvmFlag>-Xdebug</jvmFlag>
                        <jvmFlag>-Xrunjdwp:transport=dt_socket,address=1044,server=y,suspend=y
                        </jvmFlag>
                    </jvmFlags>
                    <disableUpdateCheck>true</disableUpdateCheck>
                </configuration-->
            </plugin>

            <plugin>
                <groupId>com.mic.endpoint.api</groupId>
                <artifactId>endpoint-maven-plugin</artifactId>
                <version>0.0.2-SNAPSHOT</version>
                <!-- <version>0.0.1</version> -->
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>generate</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <applicationId>${appengine.app.id}</applicationId>
                    <serviceClassNames>${endpoint.service.classnames}</serviceClassNames>
                    <!-- <apiOutputDirectory>${webappDirectory}/WEB-INF</apiOutputDirectory>
                    <classPath>${webappDirectory}/WEB-INF/classes</classPath> -->
                </configuration>
                <dependencies>
                    <dependency>
                        <groupId>javax.persistence</groupId>
                        <artifactId>persistence-api</artifactId>
                        <version>1.0.2</version>
                    </dependency>
                </dependencies>
            </plugin>
        </plugins>

    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:17:19.967

如果您依赖 com.google.appengine appengine-endpoints 1.7.7 com.google.appengine appengine-api-1.0-sdk 1.7.7 javax.servlet servlet-api 2.5

并且您使用 Google App Engine Maven 插件 1.7.7：

```
 <plugin>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-maven-plugin</artifactId>
            <version>1.7.7</version>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>endpoints_get_discovery_doc</goal>
                        <!--goal>endpoints_get_client_lib</goal-->
                    </goals>
                </execution>
            </executions>
            <configuration>
                <serviceClassNames>YOURENDPOINTSCLASSES(comma separated)</serviceClassNames>
            </configuration>
        </plugin> 
```

你很高兴实现这两个目标：enpoints_get_discovery_doc 和 endpoints_get_client_lib

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:54:52.890

我终于能够在我的本地端点服务器上运行我的端点。该异常与 Maven 插件无关。我没有正确使用 enpoint 注释，这就是为什么我一直有这个异常。我无法弄清楚为什么它可以在 gae 生产服务器上运行。这是错误：我写了

```
public void deleteProject(@Named Long projectId) {
    projectManager.deleteProject(projectId);
} 
```

而不是写

```
public void deleteProject(@Named("id") Long projectId) {
    projectManager.deleteProject(projectId);
} 
```

我忘记为我的一些方法定义“@Named”注释的名称参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:27:44.990

添加这个

```
<dependency>
    <groupId>com.google.appengine</groupId>
    <artifactId>appengine-endpoints</artifactId>
    <version>1.7.6</version>
    <scope>runtime</scope>
</dependency> 
```

到您的 Maven 依赖项（当然，我使用的是 1.7.6 版本）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:35:42.907

你能发布你的 pom.xml 吗？

提前..您不能使用 Maven 插件创建客户端库。它只是创建您的 api 文件。您必须使用 SDK 附带的端点命令工具在外部创建它们

# ajax - 带有参数的 f:ajax 侦听器不适用于复合组件

> ID：15274526
> 
> 赞同：1
> 
> 时间：2013-03-07T15:03:47.533
> 
> 标签：ajax, jsf, jsf-2, listener

当我尝试`f:ajax`在我的复合组件内部传递一个时，我的所有侦听器参数都被解析为 null。

```
<c:forEach var="paragraph" items="#{Chapiter.paragraphList}"> 
  <c:forEach var="field" items="#{paragraph.fieldList}"> 
    <util:inputNumber type="double" value="#{field.value}" decimal="2"> 
        <f:ajax listener="#{myean.doSomething(field, paragraph)}"> 
        </f:ajax>
    </util:inputNumber>
  </c:forEach> 
</c:forEach> 
```

当然，我已经像这样向我的复合组件添加了客户端行为

在模糊事件上调用侦听器方法，但我的参数“字段”和“段落”始终具有空值。

我认为这些变量不能从复合组件中访问。

我试图通过复合属性将这两个变量传递给复合组件，但我不认为这是一个干净的解决方案。

有正确的方法吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:08:26.010

如果要将参数作为字符串传递，则需要这样编写：

```
<f:ajax listener="#{myean.doSomething('arg1', 'arg2')}"> 
```

否则它将期望`arg1`和`arg2`被定义变量。我假设您将函数定义为接受 2 个字符串作为参数。

另外-您确定您的听众执行了吗？您如何尝试获得这些值。请分享代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:14:12.013

在`<c:forEach>`视图构建期间运行，因此`paragraph`和`field`变量仅在视图构建期间可用。它们在组件树访问期间和视图渲染期间都不可用。ajax 动作侦听器方法是在 JSF 组件树访问期间确定的，而不是在视图构建期间确定的，因此参数将始终解析`null`。

如果您替换`<c:forEach>`为`<ui:repeat>`（并确保您使用的是最新的 Mojarra 版本，其中所有特殊`<ui:repeat>`问题都已解决），并将 bean 放在视图范围内，同时保持 getter 没有业务逻辑，那么它应该可以正常工作。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# eclipse - Eclipse：在编辑器视图中运行外部软件

> ID：15274530
> 
> 赞同：0
> 
> 时间：2013-03-07T15:03:57.317
> 
> 标签：eclipse, eclipse-plugin

我正在使用 Eclipse 来编辑我编写的几乎所有文件。但对于某些人来说，我更喜欢使用 gEdit（例如 CoffeeScript 文件）。

我想知道是否有办法以某种方式将 gEdit（或任何其他软件）的 UI 嵌入到 Eclipse 的编辑器视图中。我可以在一个统一的环境中使用我最喜欢的编辑器，这也可以为这些文件带来丰富的 Eclipse 环境（即使我很清楚其中大部分都不起作用）。

但有可能吗？更好的是，是否已经有一个插件？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:21:55.453

> 我想知道是否有办法以某种方式将 gEdit（或任何其他软件）的 UI 嵌入到 Eclipse 的编辑器视图中。

不，没有。

但是，您可以从 Eclipse 执行外部编辑器。

在 Eclipse 主菜单中，左键单击 Window -> Preferences。

在首选项对话框中，左键单击常规 -> 编辑器 -> 文件关联。

![文件关联](../Images/c3cb9bffe6fba83880dfb0dada8d2ba5.png)

对于任何文件类型，您都可以关联一个或多个编辑器。这些编辑器可以在 Eclipse 外部。

完成此操作后，您可以通过在 Package Explorer 中双击模块名称来调出外部编辑器。

使用外部编辑器完成编辑后，刷新模块，以便 Eclipse 知道您进行了更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:46:46.760

SWT 允许使用 OLE 集成应用程序。不幸的是，这显然仅在 Windows 上运行时可用。

有关详细信息，请参阅Lars Vogel 的[这篇文章](http://www.vogella.com/articles/EclipseMicrosoftIntegration/article.html)。

![在此处输入图像描述](../Images/25cfd1f5c31cf586217190189b3e8a8e.png)

# matlab - 在 Matlab R2012a 中使用 pnet 以 osc（开放声音控制）格式发送 udp 数据包

> ID：15274533
> 
> 赞同：0
> 
> 时间：2013-03-07T15:04:01.817
> 
> 标签：matlab, udp, osc

我有一个关于 MATLAB 中的 udp 数据包的问题。我一直在使用 oscsend.m 脚本将 udp 数据包发送到其他应用程序。 [http://www.mathworks.fr/matlabcentral/fileexchange/31400-send-open-sound-control-osc-messages/content/oscsend.m](http://www.mathworks.fr/matlabcentral/fileexchange/31400-send-open-sound-control-osc-messages/content/oscsend.m) 它工作正常。但是，现在我需要使用 TCP/UDP/IP 工具箱 2.0.6 [http://www.mathworks.de/matlabcentral/fileexchange/345-tcpudpip-toolbox-2-0-6](http://www.mathworks.de/matlabcentral/fileexchange/345-tcpudpip-toolbox-2-0-6)中的 pnet 功能， 因为我不再可以访问 oscsend 使用的 Matlab 中的仪器控制工具箱。

我在网上查找答案，甚至联系了作者，但到目前为止都没有运气。即使这个问题看起来微不足道，我也无法让它发挥作用。

通常，仪器控制工具箱的用法是：

```
u = udp('127.0.0.1', 12345) %12345 being the port
fopen(u)
oscsend(u, /test, 'f', 1.05) %"f" indicating a floating number 
```

但现在没有 udp 或 fopen 我尝试像这样使用 pnet

```
%write data to UDP
data = [oscstr(path) types data];
sock=pnet('udpsocket',12345) %it returns 0, a sign that the socket is working
%however when I try to send the oscsend signal through this socket nothing happens
pnet(sock, 'writepacket' data) %data being the output of oscsend 
```

我也尝试将 pnet 函数集成到 oscsend 中，但没有成功，但我无法接收到信号，（我正在使用另一个 MATLAB 实例，它正在接收从前面提到的端口发送的数据）。这就是我在 oscsend 中所做的，但没有一个起作用

```
%write data to UDP
data = [oscstr(path) types data];
%pnet(u, 'writepacket', data, '127.0.0.1', 12345 );%
%pnet u 'write' data %
%pnet(u,'write',data, '127.0.0.1', 12345 )
%pnet(u,'write',data, '127.0.0.1', 12345 ) %returned value?
%pnet(0,'write',data, '127.0.0.1', 12345 ) %
%sock = pnet('udpsocket',12345 ); %
%pnet(sock,'write', data, '127.0.0.1', 12345 ) 
```

提前感谢所有花时间阅读本文的人。最好的。马里奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:39:07.823

我不清楚您要将数据发送到哪个 UDP 端口，以及您使用哪种进程来监控和测试代码。涉及两个端口...一个是您要绑定到的本地端口（这是“udpsocket”的参数），另一个端口是数据包的目标端口，与目标主机一起给出。

在我看来，仪器控制工具箱语法在创建过程中需要目标主机名和端口。如果您愿意，它允许您将本地端口指定为可选参数。相反， pnet('udpsocket') 采用本地端口。您应该注意到在您的第一组代码中没有指定目标主机，这应该让您怀疑...如果您继续阅读 pnet.m 的 UDP 文档，您会看到还有另一个函数：`pnet(sock, 'udpconnect', 'hostname', port)`“连接" 将 UDP 套接字连接到主机/端口对，以便在执行 writepacket 时可以省略主机名/端口。

因此，我认为这与您的原始仪器控制工具箱代码等效：

```
sock=pnet('udpsocket',1237);  % Does local port matter?  You haven't said...
pnet(sock, 'udpconnect', '127.0.0.1', 12345); % Destination port
pnet(sock, 'writepacket', data); 
```

对于 UDP，您应该始终使用“writepacket”，而不是“write”。请注意，您可以像我上面列出的那样执行“udpconnect”，或者您可以为每个 writepacket 提供主机名/端口，就像您尝试做的那样。

我无法从您的问题中弄清楚 6351 是如何进入的，因为它从未出现在您的参考代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T12:37:08.457

顺便说一句，还有[oscmex](http://sourceforge.net/projects/oscmex/)，一个基于[liblo](http://liblo.sourceforge.net/)的库，允许您直接从 matlab 发送/接收 OSC 消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:21:26.803

感谢我的主管，如果您需要通过 oscsend.m 使用 pnet [http://www.mathworks.fr/matlabcentral/fileexchange/31400-send-open-sound-control-osc-messages/content发送 udps，这里是代码/oscsend.m](http://www.mathworks.fr/matlabcentral/fileexchange/31400-send-open-sound-control-osc-messages/content/oscsend.m) 只需在 oscsend.m 末尾添加以下代码

```
%write data to UDP
data = [oscstr(path) types data];
pnet(u, 'write', data)
pnet(u, 'writepacket', '127.0.0.1', 12345); %127.0.0.1 being the IP and 12345 the port 
```

# c++ - 在 Ubuntu 上构建 Virtuoso（与 Mono 集成）：libgc 上的构建错误

> ID：15274537
> 
> 赞同：1
> 
> 时间：2013-03-07T15:04:14.467
> 
> 标签：c++, linux, ubuntu, mono, virtuoso

更新：好的，我在[此页面](http://www.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSBldMono)上找到了它：您必须使用 --enable-mono 参数运行 ./configure。然后，您还会发现缺少一些没有在任何地方提及的依赖项。

可悲的是，这给我留下了另一个我无法解决的问题。由于我们这里还有未完成的赏金，所以让我们问这个。

在执行 ./autogen 和 ./configure --enable_mono 之后（在代码分支develop/6 和develop/7 上尝试过），我收到以下错误：

```
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I../../libsrc/Dk -fno-strict-aliasing -O2 -DMONO_USE_EXC_TABLES -fexceptions -D_REENTRANT -D_GNU_SOURCE -Wall -DNDEBUG -DPOINTER_64 -I/usr/local/src/virtuoso-opensource/libsrc/Xml.new -DOPENSSL_NO_KRB5 -Dlinux -D_GNU_SOURCE -DFILE64 -D_LARGEFILE64_SOURCE -I../../binsrc/mono/mono-1.1.7/libgc/include -I../../libsrc -I../../libsrc/Dk -DNO_UDBC_SDK -DUSE_INCLUDED_LIBGC=1 -g -O2 -MT libthrp_gc_la-sched_pthread_gc.lo -MD -MP -MF .deps/libthrp_gc_la-sched_pthread_gc.Tpo -c sched_pthread_gc.c  -fPIC -DPIC -o .libs/libthrp_gc_la-sched_pthread_gc.o
sched_pthread_gc.c:42:22: fatal error: gc_typed.h: No such file or directory
compilation terminated.
make[2]: *** [libthrp_gc_la-sched_pthread_gc.lo] Error 1
make[2]: Leaving directory `/usr/local/src/virtuoso-opensource/libsrc/Thread'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/local/src/virtuoso-opensource/libsrc'
make: *** [all-recursive] Error 1 
```

[此链接](http://code.metager.de/source/xref/openlink/virtuoso-opensource/libsrc/Thread/sched_pthread_gc.c)包含有问题文件的内容。如果我删除 for`gc_typed.h`的导入，则找不到下一个导入。我只是做了`sudo apt-get install libgc-dev`哪些工作。Make 仍然给我同样的错误。我相信这个文件周围的某个地方和这个编译错误被埋没了，但我无法修复它。

我是 Linux 菜鸟，有人可以给我建议这里可能是什么问题或如何解决它？

附加信息： 1.`ldconfig -v -p`明确表示 libgc.so 存在，那么这个 make 脚本为什么要寻找头文件？

```
...
libgdbm_compat.so.3 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgdbm_compat.so.3
libgdbm.so.3 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgdbm.so.3
libgd.so.2 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgd.so.2
libgcrypt.so.11 (libc6,x86-64) => /lib/x86_64-linux-gnu/libgcrypt.so.11
libgccpp.so.1 (libc6,x86-64) => /usr/lib/libgccpp.so.1
libgccpp.so (libc6,x86-64) => /usr/lib/libgccpp.so
libgcc_s.so.1 (libc6,x86-64) => /lib/x86_64-linux-gnu/libgcc_s.so.1
libgc.so.1 (libc6,x86-64) => /usr/lib/libgc.so.1
libgc.so (libc6,x86-64) => /usr/lib/libgc.so
libgamin-1.so.0 (libc6,x86-64) => /usr/lib/libgamin-1.so.0
libgailutil.so.18 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgailutil.so.18
libfuse.so.2 (libc6,x86-64) => /lib/libfuse.so.2
... 
```

1.  为了安装支持 Mono 的 Virtuoso，我使用了以下教程：

    *   Virtuoso [GitHub 页面上的 README](https://github.com/openlink/virtuoso-opensource)
    *   [我在这个 Mono-Virtuoso 页面](http://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSBldMono)上进行导出时遇到了一些小问题，可能是其中一个问题吗？
2.  Virtuoso 之前一直在工作，我只是没有让 Virtuoso 使用 --enable-mono 构建。Mono 运行良好，可以毫无问题地构建和执行 dll 和 exe。.

.

.

> 原始问题：
> 
> 我在 Ubuntu 服务器上安装了 Virtuoso 和 Mono，并[使用本教程](http://docs.openlinksw.com/virtuoso/rthclrmono.html)将 sanity.cs 类编译为 sanity.dll 文件。当我尝试导入“向量”时，我收到一条消息：
> 
> ```
> SQLState: 42001
> Message: SR185: Undefined procedure DB.DBA.import_clr. 
> ```
> 
> 这是否意味着我将 .dll 放在了错误的位置？还是我安装了错误的 Virtuoso 版本？
> 
> 我使用 apt-get 安装 Virtuoso 和 Mono。
> 
> 更新：好的，Virtuoso 的 apt-get 版本太旧了。OpenLink Twitter 帐户告诉我，新版本应该从 Github 帐户构建。
> 
> [现在我按照https://github.com/openlink/virtuoso-opensource](https://github.com/openlink/virtuoso-opensource)上的自述文件在 Ubuntu 上构建了 Virtuoso ，但这并没有解释如何以任何方式集成 Mono。
> 
> *   我已经使 sanity.cs Hello World 文件工作，确认 Mono 设置正确。
> *   服务器运行，但 Virtuoso.ini 中的 Mono 部分为空：
> 
> .
> 
> ```
> [Mono]
> ;MONO_TRACE                     = Off
> ;MONO_PATH                      = <path_here>
> ;MONO_ROOT                      = <path_here>
> ;MONO_CFG_DIR                   = <path_here>
> ;virtclr.dll                    = 
> ```
> 
> 我将默认路径放在此文件中，如下所示：
> 
> ```
> [Mono]
> ;MONO_TRACE                     = Off
> ;MONO_PATH                      = /usr/bin/mono
> ;MONO_ROOT                      = /usr/lib/mono
> ;MONO_CFG_DIR                   = /etc/mono
> ;virtclr.dll                    = 
> ```
> 
> 我的系统上不能`find`有 virtclr.dll。我怎样才能生成它？有人可以帮助我提供一个链接，解释如何在 Virtuoso 中集成 Mono 或告诉我如何继续吗？我应该用不同的设置构建 Virtuoso 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:02:41.393

这有点乱。它取决于`mono-1.1.7`，并且在尝试使用它所依赖的项目之前不会构建它；所以构建很混乱。我强烈怀疑开发人员没有构建/测试他们项目的这方面。

您需要`mono-1.1.7`手动下载 - 这是因为 mono tarball 的位置不是他们认为的位置。例如来自：

```
wget -O binsrc/mono/mono-1.1.7.tar.gz ftp://ftp1.freebsd.org/mirror/FreeBSD-Archive/ports/distfiles/mono-1.1.7.tar.gz 
```

如果你没有 wget，那么你可以使用 curl：

```
curl -o binsrc/mono/mono-1.1.7.tar.gz ftp://ftp1.freebsd.org/mirror/FreeBSD-Archive/ports/distfiles/mono-1.1.7.tar.gz 
```

运行配置：

```
./configure --enable-mono 
```

交换`binsrc`和中的`libsrc`子目录的顺序`Makefile`：

```
sed -i 's/libsrc binsrc/binsrc libsrc/' Makefile 
```

运行 make （如果你想让它更快，请使用 -j 选项，例如 -j2）：

```
make 
```

构建将失败。不要恐慌。**再次**交换 binsrc 和 libsrc ：

```
sed -i 's/binsrc libsrc/libsrc binsrc/' Makefile 
```

并重新运行make：

```
make 
```

此时构建应该成功。

请记住，它使用 mono-1.1.7 的私有副本，并且大多数现代 linux 发行版使用 2.0，因此可能与此存在一些冲突。

# c# - 无法定义两个对象之间的关系，因为它们附加到不同的 ObjectContext 对象

> ID：15274539
> 
> 赞同：27
> 
> 时间：2013-03-07T15:04:27.090
> 
> 标签：c#, .net, exception, entity-framework-4

我已经阅读了一些与此特定错误消息有关的问题/答案，但我不太了解适当的解决方案。

我读过很多次，您应该创建 EF4 上下文，使用它，然后处理它。在我的整个应用程序中，我使用不同的上下文对象在这里和那里加载实体，然后最终希望将实体关联在一起。

我创建了一个简单的控制台应用程序，很容易导致错误。非常简单的模型用图表表示，然后是代码。

如何让两个不同的实体共享相同的上下文？我真的必须创建一个新的上下文，再次加载这两个实体（即使我已经拥有它们），只是为了关联它们并保存？

如果我只是错过了一个已经存在的、适当的问题/答案，请指出我正确的地方。

![简单的 EF4 模型图](../Images/0a4ee891e2b239b75b203f33dc941b6e.png)

```
internal class Program {

    private static void Main(string[] args) {
        DeleteAllEntities();
        CreateInitialEntities();
        Owner o = LoadOwner();
        Child c = LoadChild();
        AssociateAndSave(o, c);
    }

    private static void AssociateAndSave(Owner o, Child c) {
        using (var context = new ModelEntities()) {
            // Exception occurs on the following line.
            o.Children.Add(c);
            context.Attach(o);
            context.SaveChanges();
        }
    }

    private static Owner LoadOwner() {
        using (var context = new ModelEntities()) {
            return ((from o in context.Owners
                     select o).First());
        }
    }

    private static Child LoadChild() {
        using (var context = new ModelEntities()) {
            return ((from c in context.Children
                     select c).First());
        }
    }

    private static void CreateInitialEntities() {
        using (var context = new ModelEntities()) {
            Owner owner = new Owner();
            Child child = new Child();
            context.Owners.AddObject(owner);
            context.Children.AddObject(child);
            context.SaveChanges();
        }
    }

    private static void DeleteAllEntities() {
        using (var context = new ModelEntities()) {
            List<Child> children = (from c in context.Children
                                    select c).ToList();
            foreach (var c in children)
                context.Children.DeleteObject(c);
            List<Owner> owners = (from o in context.Owners
                                  select o).ToList();
            foreach (var o in owners)
                context.Owners.DeleteObject(o);
            context.SaveChanges();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T15:09:23.683

您应该在同一上下文中获得对子对象和所有者对象的引用。一种方法是获取 id，然后将它们作为参数传递给`AssociateAndSave(int oId, int cId)`方法。

然后，您检索对**同一上下文**中对象的引用并制作附件。

```
private static void Main(string[] args)
{
    DeleteAllEntities();
    CreateInitialEntities();
    int oId = LoadOwnerId();
    int cId = LoadChildId();
    AssociateAndSave(oId, cId);
}

private static int LoadOwnerId()
{
    using (var context = new ModelEntities())
    {
        return (from o in context.Owners
                select o).First().Id;
    }
}

private static int LoadChildId()
{
    using (var context = new ModelEntities())
    {
        return (from c in context.Children
                select c).First().Id;
    }
}

private static void AssociateAndSave(int oId, int cId)
{
    using (var context = new ModelEntities())
    {
        var owner = (from o in context.Owners
                        select o).FirstOrDefault(o => o.ID == oId);
        var child = (from o in context.Children
                        select o).FirstOrDefault(c => c.ID == cId);

        owner.Children.Add(child);
        context.Attach(owner);
        context.SaveChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T15:09:00.360

您不能使用另一个上下文的实例从一个上下文中删除对象，因为每个上下文单独跟踪其对象。

一个想法是为您的每个方法提供您的上下文类型的参数，以便您的操作在相同的上下文中进行。

前任：

```
private static void CrudOperationExample(DBContext contextInstane)
{
    //perform crud operations.
} 
```

我想做得更好，我建议你寻找依赖注入，因为它在 ORM 中非常有帮助。

# javascript - 使用线程 - UbuntuTouch/QML/Javascript

> ID：15274540
> 
> 赞同：1
> 
> 时间：2013-03-07T15:04:27.317
> 
> 标签：javascript, multithreading, ubuntu, qml

我正在迈出第一步，使用 qt creator 为 Ubuntu touch 编写 QML/javascript 应用程序。

目前我认为没有太多关于这个主题的文档。

谁能指出我在这种情况下处理多个线程的好/干净的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:33:07.830

QML 的设计并不是为了在多个线程中工作。最初的意图是任何线程都应该由 C++ 中存在的层处理。但是，如果您确实需要访问线程来执行诸如计算之类的事情，并且您不能/不愿意在 C++ 级别编写代码，那么 WorkerScript QML 元素可能能够提供您想要的功能。

[https://qt-project.org/doc/qt-5.0/qtqml/qml-qtquick2-workerscript.html](https://qt-project.org/doc/qt-5.0/qtqml/qml-qtquick2-workerscript.html)

值得注意的是，根据您尝试执行的操作，这可能会或可能不会完全适合使用。

# c++ - 当我在 GDB 中设置断点时，对于 c++ 文件，它到底在哪里中断？

> ID：15274543
> 
> 赞同：1
> 
> 时间：2013-03-07T15:04:33.017
> 
> 标签：c++, debugging, gdb

我想知道它到底会在哪里中断，以及它会在此事件之前和之后执行什么 2 案例：行和函数

线路案例：

```
(gdb) break test.c:851 
```

代码：

```
850 setup();
851 return configure();
852 
```

这会执行configure（）吗？或不

功能案例：

```
(gdb) TestClass::initialize() 
```

代码：

```
849 initialize(){
850 setup();
851 return configure();
852 
```

它会执行 setup() 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:16:08.547

根据我的经验，一旦上一行的代码完成，gdb 就会中断。您可以通过从断点单步执行来验证这一点，您将观察到配置函数中的代码将被执行，并且该值将返回到第 851 行，此时`return`关键字将启动并返回该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:23:29.073

通常，在编译调试时，断点会在您所在的源代码行的第一条指令**之前**停止。但是，在优化代码时，内联和指令重新排列可能会导致[不直观的结果](http://gcc.gnu.org/ml/gcc-help/2008-10/msg00200.html)。可以肯定的是，在汇编指令上设置断点。

通常它不会执行您的行或函数的第一行。但是您应该知道，在某些情况下可能并非如此。请注意，gdb 取决于提供给它的信息，因此结果可能因语言/编译器而异。

# request - 网络 - SNMP 请求/响应模式 - 如何完成订单？没有时间戳字段

> ID：15274545
> 
> 赞同：0
> 
> 时间：2013-03-07T15:04:34.337
> 
> 标签：request, timestamp, response, snmp, wireshark

我有一个与 SNMP 协议相关的小问题。我知道在陷阱模式下，代理可以向管理器报告消息，这些消息可以使用 SNMP 的时间戳字段进行排序。

但是在请求/响应模式下，当从经理向代理进行查询时，请求消息和响应消息上都没有时间戳字段，那么经理如何对这些消息进行排序呢？想象一个完成许多请求并完成许多响应的世界......？消息是否在应用程序（如wireshark）上排序，与wireshark 上实际捕获的时间有关..？或者..？

非常感谢提前;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:57:22.043

> 消息是否在应用程序（如wireshark）上排序，与在wireshark上实际捕获的时间相关

是的。

经理可以做的唯一“排序”是按响应的到达时间排序。

> 想象一个完成了许多请求并完成了许多响应的世界

经理将通过响应 ID 匹配请求和回复。

# java - Spring如何在运行时从application.properties重新加载值

> ID：15274547
> 
> 赞同：4
> 
> 时间：2013-03-07T15:04:52.777
> 
> 标签：java, spring, spring-mvc, dependency-injection

在我的 Spring 应用程序中，我`application.properties`从应用程序外部加载文件，例如`/user/home/properties/application.properties`. 文件中的值是通过 bean 中的 @Value 注解注入的。我的新要求是能够更改`application.properties`文件中的值并重新加载（或重新注入）bean 中的新值。

在 Spring 3.2 中是否有可能发生这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:20:14.897

在主类中的独立 spring 应用程序上，您可以执行以下操作：

```
 //load the appcontext with refresh value as false
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(
                    new String[] { "classpath:appcontext.xml" }, false);
//add the props file
context.getEnvironment().getPropertySources().addFirst(new ResourcePropertySource("classpath:app.properties"));
//refresh the context
context.refresh(); 
```

这样做是使用在 appcontext.xml 文件中调用的所有属性中定义的属性加载 spring 上下文，但在加载时不会刷新。然后它说首先加载**app.properties**。那时只考虑 app.properties 中的值。然后刷新上下文。现在 app.properties 文件中的属性值已加载。有了这个，您不需要重建应用程序，您只需更改值并重新启动应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-18T16:10:31.367

应用程序上下文启动后，您无法重新加载 application.properties 中的属性，除非 java 进程已关闭并且您需要再次构建和运行。理想的选择是使用会话或缓存或任何事件驱动的消息传递框架，如 Kafka。这完全取决于您的要求和您能够使用的框架。

# memory-management - Dynamics AX 2012 不释放内存

> ID：15274550
> 
> 赞同：0
> 
> 时间：2013-03-07T15:05:04.417
> 
> 标签：memory-management, axapta, x++, dynamics-ax-2012, aot

我正在尝试将 AOT CUS 层导出为 XPO 文件。参考[这个问题](https://stackoverflow.com/questions/15166313/how-to-mimic-the-aot-export-by-layer-functionality-x)。我已经从上述问题的答案中提出了很好的建议，但我遇到了“内存不足”的问题。我做了一些进一步的研究和一些额外的实验。这是我用来爬下 AOT 树并仅导出属于“CUS”层的节点的算法示例。

```
private void GetAOLHelper(TreeNode baseNode, str baseExportDirectory, int currentLevel, int maxLevel)
{
    int cusLayerTest;
    int CusLayerValue = 4096;
    str ExportFileName = "";
    str ExportDirectoryName = "";
    TreeNode nextNode;

    if (baseNode != null)
    {
        cusLayerTest = CusLayerValue & baseNode.applObjectLayerMask();
        if (cusLayerTest > 0)
        {
            ExportFileName = baseNode.AOTname() + ".xpo";
            this.NodeExport(baseNode, baseExportDirectory, ExportFileName);
        }
        else
        {
            if (currentLevel < maxLevel)
            {
                nextNode = baseNode.AOTfirstChild();
                while (nextNode != null)
                {
                    this.GetAOLHelper(nextNode, baseExportDirectory, currentLevel + 1, maxLevel);
                    nextNode = nextNode.AOTnextSibling();
                }
                nextNode = null;
            }
        }
    }
} 
```

该算法的症结如下：我想爬下 AOT 树（从特定节点开始）并导出任何作为“CUS”层对象的层。我在“maxlevel”停止爬下树，这意味着我只深入树 X 层。我目前仅在 AOT 树的“数据字典”节点上运行此算法。

我面临的问题是，当此作业运行时，AX32.exe 进程的内存占用量几乎为 1 GB。如果我对多个节点运行此代码，则内存需求会不断攀升。我很好奇为什么 AX 在算法完成后没有释放内存。我对 Google 的研究提出了一些与 AX 垃圾收集有关的问题。我想知道是否有办法在 AX 中强制进行垃圾收集？如果我尝试导出 AOT 中的每个节点，我会遇到前面提到的“内存不足”异常。在我关闭 AX32.exe 客户端之前，内存不会被释放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:30:44.433

TreeNode 对象不像大多数其他对象那样被垃圾收集。你必须自己释放它。`treeNodeRelease()`当你完成一个节点时调用。

# internet-explorer - IE中出现的L形

> ID：15274559
> 
> 赞同：1
> 
> 时间：2013-03-07T15:05:26.183
> 
> 标签：internet-explorer, shape

在 IE 浏览器中，该站点的某些区域出现了一个奇怪的 L 形。知道那是什么吗？

![](../Images/869149dfb4f11830009c66fd685610c0.png)

# symfony - Symfony 中的 Doctrine 实体中的 @var 注释是什么？

> ID：15274560
> 
> 赞同：6
> 
> 时间：2013-03-07T15:05:26.443
> 
> 标签：symfony, doctrine

也许是一个愚蠢的问题，但它让我不知道......

当我创建一个实体时，`app/console doctrine:generate:entity`它会为每个属性添加一个`@var`注释。是`@var`用来做什么的？

它显然表明了数据类型，但我没有在任何文档中看到它，而且无论它是否存在，事情似乎都有效，所以我只是想知道它的用途。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T15:08:35.210

这是一个标准的[phpdoc](http://www.phpdoc.org/)注释。它与 Doctrine 注释无关，它们被 Doctrine 忽略。它们在生成文档时使用，也用作支持代码完成的 IDE 的元数据。

# java - 员工的工作使用java计算工资

> ID：15274563
> 
> 赞同：-5
> 
> 时间：2013-03-07T15:05:29.293
> 
> 标签：java

代码中缺少某些内容..如果我选择兼职（第 1 号），它必须只显示小时费率和计算收入的工作时间..但是加班费、加班时间和加班费会在它们出现时继续显示如果我选择（第 2 号）应该出来：

```
import java.io.*;
    import java.util.*;
    import java.util.Scanner;
//author: Misty Stewart

     public class salary{
            static Scanner console=new Scanner(System.in);
              public static void main (String[]args)  { 

              String name = "";
              int kindOfEmployee;
              int overtimePay = 0;
              int HRate = 0;
              int HWorked = 0;
              int regularPay = 0;
              int overtimeRate = 0;
              int overtimeHours = 0;
              int Income = 0;

              Scanner input = new Scanner(System.in);

              System.out.println("Enter Name of the employee:");
              name = console.next ();
            System.out.println("1]Part-time Employee");
            System.out.println("2]Full-time Employee");
            System.out.println("Choose what kind of employee?");
            kindOfEmployee=console.nextInt();

            System.out.println("Hourly Rate:");
              HRate = input.nextInt();
              System.out.println("Hours Worked:");
              HWorked = input.nextInt();
              System.out.println("Regular Pay:");
              regularPay = input.nextInt(); 
            System.out.println("Overtime Rate:");
              overtimeRate = input.nextInt();
              System.out.println("Overtime Hours:");    
              overtimeHours = input.nextInt();   
              overtimePay = overtimeRate*overtimeHours;

              System.out.println("Name of the employee: "+name);
              System.out.println("Income: "+Income);

              if (kindOfEmployee == 1){
                  Income = HRate*HWorked;            
                       }
              if (kindOfEmployee == 2){
                   Income = regularPay+overtimePay;     
                    }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:50:43.077

尝试

```
if (kindOfEmployee == 2) {
    System.out.println("Overtime Rate:");
    overtimeRate = input.nextInt();
    System.out.println("Overtime Hours:");    
    overtimeHours = input.nextInt();   
    overtimePay = overtimeRate*overtimeHours;
} 
```

# android - ImageView 在 Android 中设置为默认值

> ID：15274565
> 
> 赞同：0
> 
> 时间：2013-03-07T15:05:30.390
> 
> 标签：android, imageview

我在网上搜索将 设置`imageView`为默认大小，`imageView`单击按钮时是否更改。到目前为止，我已经尝试了这两个。

```
android:scaleType="fitXY"
android:adjustViewBounds="true" 
```

`ImageView`当我单击一个按钮来更改它包含的图像时，我仍然会展开。有没有办法设置`ImageView`大小默认值是否会更改按钮单击事件的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T15:06:48.643

是的简单使用：

```
<ImageView
    android:src="@drawable/somebackground"
    android:layout_width="40dp"
    android:layout_height="40dp"/> 
```

而不是`wrap_content`or `match_parent`。

**编辑**：

如果您更改的图像大小不同，请记住使用某种`scaleType`（我更喜欢`android:scaleType="centerCrop"`）。

# php - 在选择框中按日期和时间搜索

> ID：15274566
> 
> 赞同：0
> 
> 时间：2013-03-07T15:05:32.780
> 
> 标签：php, date, time

嗨，我有一个表，我希望在其中搜索以前的记录，我有带搜索选项的选择框这里是代码

```
 if (isset($_REQUEST['searchtype']) && isset($_REQUEST['period']))
    {
    if ($_REQUEST['searchtype'] == "All")
        {
        $period = "All";
        }
    elseif ($_REQUEST['searchtype'] == "Last24hours")
        {
        $period = date('Y-m-d H:i:s')-86400;
        }
    elseif ($_REQUEST['searchtype'] == "Last10days")
        {
        $period = date('Y-m-d H:i:s')-864000;
        }
    elseif ($_REQUEST['searchtype'] == "LastHour")
        {
        $period = date('Y-m-d H:i:s')-3600;
        }
    elseif ($_REQUEST['searchtype'] == "Lastweek")
        {
        $period = date('Y-m-d H:i:s')-604800;
        }
    elseif ($_REQUEST['searchtype'] == "LastMonth")
        {
        $period = date('Y-m-d H:i:s')-2592000;
        }
      else
        {
        $period = $_REQUEST['searchtype'];
        } 
```

我该怎么做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:14:30.413

像这样使用`$period = time() - 86400;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:37:51.390

```
if (isset($_REQUEST['searchtype']) && isset($_REQUEST['period']))
{
    $searchtype = $_REQUEST['searchtype'];
    switch($searchtype)
    {
        case 'Last24hours':
            $period = time() - 86400;
        break;
        case 'Last10days':
            $period = time() - 864000;
        break;
        case 'LastHour':
            $period = time() - 3600;
        break;
        case 'Lastweek':
            $period = time() - 604800;
        break;
        case 'LastMonth':
            $period = time() - 2592000;
        break;
        case 'ALL':
        default:
            $period = "All";
    }

    $sql_by_time = ($period != "All") ? " AND time > $period" : "";
} 
```

用你在你的`SELECT * FROM`

```
SELECT * FROM YOUR_TABLE
WHERE YOUR_WHERE
$sql_by_time 
```

# asp.net-mvc-4 - 配置要发送到服务器的项目列表

> ID：15274579
> 
> 赞同：1
> 
> 时间：2013-03-07T15:06:14.543
> 
> 标签：asp.net-mvc-4, telerik-mvc

我希望用户能够在表单中构建客户端项目列表，然后在提交表单时将整个列表发送到服务器。

每个项目都有几个可以设置的属性。例如，这是一个 Order 模型：

```
class Order
{
    int Id;
    string Description;
    Guid UserId;
    string Product;
} 
```

用户应该能够在提交表单之前添加和配置任意数量的订单。

我想我可以使用内嵌编辑的 Telerik 网格来做到这一点。不幸的是，每个字段的可用选项列表将根据为其他字段选择的值而变化。我无法使用 InCell 编辑来完成这项工作，因为我无法从我的 javascript 事件处理程序中访问其他 ui 元素。

我也尝试通过正常的内联编辑来做到这一点，但唯一返回的项目是要添加的新订单。我无法访问 GridModel 来添加新订单。在用户完成编辑之前，我不想保留订单列表。

任何帮助将不胜感激。

编辑：如果我采用制作自己的列表的解决方案，我会遇到级联组合框的问题。每个组合框都有一个类似于“UserId_0”的名称，具体取决于它在列表中的索引。

但是现在如何获取下游列表呢？
这是我的两个组合框：

```
 <td>
        @(Html.Telerik().ComboBox()
            .Name("UserId_" + i.ToString())
            .BindTo(new SelectList(Model.UserIds, "Id", "Name"))
            .Placeholder("Select UserId...")
            .AutoFill(true)
            .CascadeTo("Product_" + i.ToString())
            .SelectedIndex(0))
 </td>
 <td>
       @(Html.Telerik().ComboBox()
            .Name("Product_" + i.ToString())
            .AutoFill(true)
            .DataBinding(binding => binding.Ajax().Select("GetProducts", "Order"))
            .Placeholder("Select Product...")
            .SelectedIndex(0))
 </td> 
```

我的 Controller 方法看起来像这样。这很糟糕，但是我如何访问该值？

```
 public JsonResult GetProducts(Guid? UserId)
    {
        // Hack!
        ValueProviderResult userResult = ValueProvider.GetValue("UserId");
        for (int i=0; i < 10; i++)
        {
            userResult = ValueProvider.GetValue("UserId_" + i);
            if (userResult != null)
            {
                break;
            }
        }

        if (userResult != null)
        {
            // Get list of products based on value
            return Json(new SelectList(productList, "Id", "Name"));
        }
        else
        {
            return Json(null);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:17:31.923

不要浪费您的时间来使用一些小部件来实现这一点 - 更好地检查如何将[项目集合发送到服务器](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)并使用复选框左右实现您自己的表单。

如果您想使用一些小部件 - 您可以以类似于此[演示](http://demos.telerik.com/aspnet-mvc/grid/checkboxesajax)的方式尝试 Grid 。

# java - 在 android eclipse 中导入任务

> ID：15274581
> 
> 赞同：0
> 
> 时间：2013-03-07T15:06:28.290
> 
> 标签：java, android, eclipse, task

我目前正在学习 Android 和 Java，但在导入时遇到了一些问题。实际上，我已经下载了 Android 的教程视频。在他们中，这个人声明：

```
Task t = new Task(taskname); 
```

在 java.class 文件中...

所以eclipse给了他错误，然后在Task下方出现一条红线，然后当他将鼠标悬停在任务上时，这条线出现：

```
import Task (with his package name) 
```

但是在我的日食中，当我将鼠标悬停在这条线上时，这个库或导入线没有出现。问题出在哪里？我想可能有一些文件我没有下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:09:26.007

我认为 SDK 中没有 Task 类...在示例中查看它可能是他给出的任务名称。您尝试手动编写它！并检查错误是否发生！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T06:16:08.307

例如，您需要在`src`say下添加一个新包`com.glen.tasks_manager.tasks`并在 named 中添加一个 java 类`Task.java`，这样当您将鼠标悬停在任务代码上时，它将为您刚刚创建的包名称提供导入，包括新的 java 类名称。

# php - 您将如何在 php 5.4 中实现基本的文件上传进度条？

> ID：15274582
> 
> 赞同：5
> 
> 时间：2013-03-07T15:06:31.137
> 
> 标签：php, javascript, file-upload

我注意到这是对 PHP 5.4 中添加的 PHP 的改进。

我也知道这使用了 SESSION 状态，为了让它显示出来，你需要某种 Javscript 来更新 HTML。我相信javascript是通过按下提交按钮触发的。并且可以设置间隔计时器来检查进度。

我想做的就是让进度更新 div 的 HTML。（例如 25%...35%）

到目前为止我的理解：
-您需要一个具有隐藏值的表单
-这会根据该名称创建一个包含信息的会话变量
-您需要观察进度以获得其状态

选项
- 方法 1：使用您可以在网上找到的预建的。很少/没有解释它。
- 方法2：将文件发送到另一个php文件并使用JSinterval检查其进度。
- 方法3：有没有办法在同一页面上完成所有操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:11:42.860

```
<div id="progress"></div>
<form action="/upload.php" method="POST" enctype="multipart/form-data" id="upload">
 <input type="hidden" name="<?php echo ini_get("session.upload_progress.name"); ?>" value="upload" />

 <input type="file" name="file" id="file" />
 <input type="submit" value="Upload" onclick="upload()"/>
</form>

    <script>
      //Check Sumbit has been clicked; either onclick or event handler
      //Setup an interval timer updating the 'PROGRESS' div each check
      //Each Interval: Get SESSION VARIABLE status and Update the div 'PROGRESS'
      //Once file has completed; Do we redirect or submit the form?

    function upload()
    {
    var xmlhttp;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("progress").innerHTML=setInterval(function(){xmlhttp.responseText},500);
        }
      }
    xmlhttp.open("POST","upload_progress.php",true);
    xmlhttp.send();

    }

</script> 
```

# http-redirect - 如何只重定向子目录而不是内容？

> ID：15274583
> 
> 赞同：0
> 
> 时间：2013-03-07T15:06:32.757
> 
> 标签：http-redirect

我有以下设置：

```
http://example.com/foo/cake1.php
http://example.com/foo/cake2.php
http://example.com/foo/cake3.php 
```

当我用户访问时：

```
http://example.com/foo 
```

我想将它们发送到：

```
http://example.com 
```

并保存

```
http://example.com/foo/cake[1-3].php 
```

等等

我试过了：

```
Redirect /foo / 
```

但这会重定向 foo 下的所有内容。我只想将 foo 重定向到根目录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:00:32.900

终于想通了：

```
RedirectMatch 301 ^/foo/$ / 
```

# c# - 发布后会话丢失（在开发机器上工作）

> ID：15274585
> 
> 赞同：0
> 
> 时间：2013-03-07T15:06:34.967
> 
> 标签：c#, asp.net, session, telerik

我正在开发一个 Holiday Tracker 应用程序，其中一件具体的事情是扼杀整个“页面生命周期”。

在我的用户计划程序中，每个用户都可以插入他的假期，有时它正在工作（因此他可以插入/删除/编辑和查看他的假期）。还有一个假期页面（同样的故事，只是有一个网格）。

但有时设置的会话会丢失。如果我使用 Visual Studio 2012 进行调试，它就可以工作。但是，如果我发布应用程序，它就不起作用。它只是以某种方式迷失了

Global.asax.cs 中的代码

```
 void Session_Start(object sender, EventArgs e) {
        // Code that runs when a new session is started
        if (HttpContext.Current.User != null && HttpContext.Current.User is HtUser)
        {
            HtUser user = (HtUser)HttpContext.Current.User;
            Session["UserId"] = user.UserId;
            if(user.HtDepartments.Any() && user.HtDepartments.First().HtBusinessUnit != null){
                int BusinessUnitId  = user.HtDepartments.First().HtBusinessUnit.BusinessUnitId;
                Session["BusinessUnitId"] = BusinessUnitId;
            }

        }
    } 
```

我认为可能存在错误。

调度器：

```
<%--<telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server" LoadingPanelID="RadAjaxLoadingPanel1">--%>

        <div style="float: left; margin-right: 20px; margin-bottom: 10px;">
            <asp:Label runat="server" Text="Unbooked vacation:"></asp:Label>
            <asp:Label ID="lblBookedVacation" runat="server" Text=""></asp:Label>
        </div>

        <div style="float: right; margin-right: 20px; margin-bottom: 10px;">
            <asp:Button runat="server" ID="btnExport" Text="Export to Lotus Notes" OnClientClick="Export(this, event); return false;" OnClick="btnExport_Click"></asp:Button>
        </div>
        <div style="clear: both;" />
        <div>
            <telerik:RadScheduler runat="server" ID="RadScheduler1" Width="750px" Height="700px"
                DayStartTime="07:00:00" DayEndTime="18:00:00" SelectedView="WeekView" DataSourceID="dsVactationDays"
                DataKeyField="VacationDayId" DataSubjectField="Title" DataStartField="FromDate" DataEndField="ToDate" OnAppointmentUpdate="RadScheduler1_AppointmentUpdate"
                OnAppointmentInsert="RadScheduler1_AppointmentInsert"
                OnRecurrenceExceptionCreated="RadScheduler1_RecurrenceExceptionCreated" OnTimeSlotCreated="RadScheduler1_TimeSlotCreated" OnAppointmentDataBound="RadScheduler1_AppointmentDataBound">
                <AdvancedForm Modal="true"></AdvancedForm>
                <TimelineView UserSelectable="false"></TimelineView>
                <TimeSlotContextMenuSettings EnableDefault="true"></TimeSlotContextMenuSettings>
                <AppointmentContextMenuSettings EnableDefault="true"></AppointmentContextMenuSettings>
            </telerik:RadScheduler>
        </div>
        <asp:TextBox ID="txtID" runat="server"></asp:TextBox>
        <asp:DataGrid runat="server" DataSourceID="dsVactationDays" AutoGenerateColumns="true"></asp:DataGrid>

        <asp:EntityDataSource ID="dsVactationDays" runat="server" ConnectionString="name=HolidayTrackerEntities" DefaultContainerName="HolidayTrackerEntities"
            EnableDelete="True" EnableFlattening="False" EnableInsert="True" EnableUpdate="True" EntitySetName="HtVacationDays"
            Where="it.UserId == @UserId">
            <WhereParameters>
                <asp:SessionParameter DbType="Int32" Name="UserId" SessionField="UserId" />
            </WhereParameters>
        </asp:EntityDataSource>

    <%--</telerik:RadAjaxPanel>--%> 
```

背后的代码

```
 private const int AppointmentsLimit = 1;
       // private HtUser paramUser;
        private HtUser user;
        private HtUser User
        {
            get
            {
                if (user == null)
                {
                    user = HtUser.INIT_USER(this.Page, false);
                }
                return user;
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack) {
                if (this.User != null) {
                    updateUnbookedVacationNotification();
                }
            }
            txtID.Text = Session["UserId"] != null ? Session["UserId"].ToString() : "FUUUUU";
        }

        private void updateUnbookedVacationNotification() {
            double avAmount = User.GetAnnualVacationAmountByYear(this.RadScheduler1.SelectedDate.Year);
            double bookedAmount = User.GetBookedVacation(this.RadScheduler1.SelectedDate.Year);
            this.lblBookedVacation.Text = (avAmount - bookedAmount).ToString();
        }

        //private void getParameters()
        //{
        //    if (Page.Request["UserId"] != null)
        //    {
        //        int userId = Constants.TryConvert(Page.Request["userId"], this.Page);
        //        this.paramUser = HtUser.GetById(userId);
        //    }

        //}
        private bool ExceedsLimit(Appointment apt)
        {
            int appointmentsCount = 0;
            foreach (Appointment existingApt in RadScheduler1.Appointments.GetAppointmentsInRange(apt.Start, apt.End))
            {
                if (existingApt.Visible)
                    appointmentsCount++;
            }

            return (appointmentsCount > AppointmentsLimit - 1);
        }

        private bool AppointmentsOverlap(Appointment appointment)
        {
            if (ExceedsLimit(appointment))
            {
                foreach (Appointment a in RadScheduler1.Appointments.GetAppointmentsInRange(appointment.Start, appointment.End))
                {
                    if (a.ID != appointment.ID)
                    {
                        return true;
                    }
                }
            }

            return false;
        }

        private void RegisterScript()
        {
            Label1.Text = "Invalid move! There are appointments arranged for this time period.";
            ScriptManager.RegisterClientScriptBlock(this, GetType(), "LabelUpdated",
                    "$telerik.$('.lblError').show().animate({ opacity: 0.9 }, 2000).fadeOut('slow');", true);
        }

        protected void RadScheduler1_AppointmentInsert(object sender, SchedulerCancelEventArgs e)
        {
            if (ExceedsLimit(e.Appointment))
            {
                e.Cancel = true;
                RegisterScript();
            }
            else
            {
                int id = HtUser.GetUserIdByLogin(Page.User.Identity.Name);
                e.Appointment.Attributes.Add("UserId", id.ToString());
            }

        } 
```

登录部分 Global.asax.cs

```
protected void WindowsAuthentication_OnAuthenticate(Object source, WindowsAuthenticationEventArgs e)
        {
            if (Request.Cookies.Get(Constants.AUTHORIZATION_COOKIE_NAME) != null)
                return;

            String strUserIdentity;
            FormsAuthenticationTicket formsAuthTicket;
            HttpCookie httpCook;
            String strEncryptedTicket;
            AdLookup adLookup = new AdLookup();

            strUserIdentity = e.Identity.Name;

            bool loggedIn = false;
            String email = null;
            String role = null;

            email = strUserIdentity; 
            HtUser userInfo = null;
            if (email != null && email != "")
            {
                userInfo = HtUser.GetByLogin(e.Identity, email);

                if (userInfo != null && userInfo.UserName.Length > 0)
                {
                    loggedIn = true;
                    role = HtUser.GetUserRoleString(userInfo);
                }
                //Checks if user is in domain
                else
                {
                    userInfo = adLookup.GetAdUserByUsername(HtUser.getUserNameFromDomainString(email));
                    if (userInfo != null && userInfo.UserName.Length > 0)
                    {
                        loggedIn = true;
                        role = UserRoles.User;
                    }
                }
            }
            //}

            if (loggedIn)
            {
                formsAuthTicket = new FormsAuthenticationTicket(1, email, DateTime.Now,
                                                                DateTime.Now.AddMinutes(60), false, role);
                strEncryptedTicket = FormsAuthentication.Encrypt(formsAuthTicket);
                httpCook = new HttpCookie(Constants.AUTHORIZATION_COOKIE_NAME, strEncryptedTicket);
                Response.Cookies.Add(httpCook);
                HttpContext.Current.User = userInfo;
            }
            else
            {
                HttpContext.Current.User = null;
            } 
```

网络配置

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    <add name="ConnectionString" connectionString="Data Source=ch-s-0008086;Initial Catalog=HolidayTracker;Persist Security Info=True;User ID=sa;Password=123.;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" />
    <add name="HolidayTrackerConnectionString" connectionString="Data Source=ch-s-0008086;Initial Catalog=HolidayTracker;User ID=sa;Password=123." providerName="System.Data.SqlClient" />
    <add name="HolidayTrackerEntities" connectionString="metadata=res://*/Model.HolidayTracker.csdl|res://*/Model.HolidayTracker.ssdl|res://*/Model.HolidayTracker.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=ch-s-0008086;Initial Catalog=HolidayTracker;Persist Security Info=True;User ID=sa;Password=123.;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
    <add name="HolidayTrackerEntities1" connectionString="metadata=res://*/DAL.HTTracker.csdl|res://*/DAL.HTTracker.ssdl|res://*/DAL.HTTracker.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ch-s-0008086;initial catalog=HolidayTracker;user id=sa;password=123.;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <appSettings>
    <add key="LDAP_SERVER_NAME" value="asdasdasd" />
    <add key="LDAP_USERNAME" value="asdasdas" />
    <add key="LDAP_PASSWORD" value="asdasdasd" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Speech, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <customErrors mode="Off" />
    <authentication mode="Windows" />
    <identity impersonate="false" />
    <httpHandlers>
      <add path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler" verb="*" validate="false" />
      <add path="Telerik.Web.UI.SpellCheckHandler.axd" type="Telerik.Web.UI.SpellCheckHandler" verb="*" validate="false" />
      <add path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" validate="false" />
      <add path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.RadUploadProgressHandler" verb="*" validate="false" />
      <add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" validate="false" />
    </httpHandlers>
    <pages>
      <controls>
        <add tagPrefix="telerik" namespace="Telerik.Web.UI" assembly="Telerik.Web.UI" />
      </controls>
    </pages>
    <httpModules>
      <add name="RadUploadModule" type="Telerik.Web.UI.RadUploadHttpModule" />
      <add name="RadCompression" type="Telerik.Web.UI.RadCompression" /></httpModules>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="RadUploadModule" />

      <remove name="RadCompression" /><add name="RadUploadModule" type="Telerik.Web.UI.RadUploadHttpModule" preCondition="integratedMode" />
      <add name="RadCompression" type="Telerik.Web.UI.RadCompression" preCondition="integratedMode" /></modules>
    <handlers>
      <remove name="ChartImage_axd" />
      <remove name="Telerik_Web_UI_SpellCheckHandler_axd" />
      <remove name="Telerik_Web_UI_DialogHandler_aspx" />
      <remove name="Telerik_RadUploadProgressHandler_ashx" />
      <remove name="Telerik_Web_UI_WebResource_axd" />
      <add name="ChartImage_axd" path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler" verb="*" preCondition="integratedMode" />
      <add name="Telerik_Web_UI_SpellCheckHandler_axd" path="Telerik.Web.UI.SpellCheckHandler.axd" type="Telerik.Web.UI.SpellCheckHandler" verb="*" preCondition="integratedMode" />
      <add name="Telerik_Web_UI_DialogHandler_aspx" path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" preCondition="integratedMode" />
      <add name="Telerik_RadUploadProgressHandler_ashx" path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.RadUploadProgressHandler" verb="*" preCondition="integratedMode" />
      <add name="Telerik_Web_UI_WebResource_axd" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" preCondition="integratedMode" />
    </handlers>
    <directoryBrowse enabled="true" />
  </system.webServer>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:28:19.263

如果您使用 InProc 会话存储并发布您的应用程序，应用程序池将被 IIS 回收，并且 w3wp.exe 进程会重新生成。然后您的会话数据会立即丢失。

如果这是您遇到的问题，并且您想避免它，则可以选择将会话存储在其他地方（例如在数据库中）。有关详细信息，请参阅有关[ASP.NET 会话状态模式](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)的 MSDN 文章。

# pdf - 如何获得扩展的pdf版本

> ID：15274588
> 
> 赞同：4
> 
> 时间：2013-03-07T15:06:39.483
> 
> 标签：pdf, version

在adobe reader的工具栏中，在文件->属性->说明->PDF版本中，只能找到pdf的“大”版本，而找不到最近Adobe软件引入的版本扩展。

例如，如果我有两个 pdf 文件，一个是 pdf 1.7.3，另一个是 pdf 1.7.5。在文件属性中，我只能找到 pdf 版本 1.7。

有人知道如何详细检查pdf版本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:23:25.300

PDF 版本只有 2 个数字，XY 现有的 PDF 版本是 1.0、1.1、1.2、1.3、1.4、1.5、1.6 和 1.7。
从 1.7 Adob​​e 开始，添加了版本扩展。版本扩展信息（字典）存储在文档目录的 /Extension 键中。版本扩展字典具有 /ExtensionLevel 条目，它可以为您提供上述版本中的第三个数字。
我假设您将 PDF 1.7 扩展级别 3 视为 1.7.3。

# sql-server-2008 - 我们应该如何知道 DMV 在 Microsoft sql server 中被刷新

> ID：15274590
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:06:43.510
> 
> 标签：sql-server-2008, sql-server-2008-r2, sql-server-2012

嗨，我正在使用 SQL Server，我想知道 DMV 是否被刷新以及何时刷新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:48:27.890

您是否尝试重置 DMV 中的计数器？[因为您正在做的是清除该 DB 中的计划缓存](http://sqlblog.com/blogs/kalen_delaney/archive/2007/09/29/geek-city-clearing-a-single-plan-from-cache.aspx)。这对于做你所说的你想做的事情并没有真正的帮助。

现在，如果您真的要尝试重置 DMV 性能计数器，您将需要使用`DBCC SQLPERF('sys.dmv_name_here',CLEAR);`. 我想你可以验证它是否有效的方法是在运行之前和之后查询 DMV，`SQLPERF`并注意到计数器实际上下降了。

--

编辑

--

经过反思，您可能会在刷新计划缓存时尝试将计划缓存统计信息归零。当您刷新计划时，我假设计划句柄将被删除或变得无用。我必须参加变更控制会议，所以我还不能测试这个理论，但我回来后会的。无论如何，如果您想在刷新您想要运行的计划缓存后清除计划缓存的统计信息

```
DBCC SQLPERF('sys.dm_exec_cached_plans', CLEAR); 
```

在您正在刷新的数据库中。

# c# - TDD - 使用属性自动生成代码

> ID：15274593
> 
> 赞同：2
> 
> 时间：2013-03-07T15:06:47.393
> 
> 标签：c#, visual-studio-2012, tdd, code-generation

我正在使用 MsTest 和 RhinoMocks 一起练习 TDD，并且我试图尽可能地懒惰，即尽可能使用 VS2012 自动生成。但是使用 Arrange-Act-Assert 方法创建一个完整的测试方法并不总是正确的，只是为了设置我的类及其构造函数和属性。

目前，我发现在我的测试类中创建一些属性是最容易的——即使我不使用它们——仅用于代码生成的目的。我的问题是，这是一个坏习惯吗，有没有更好/更简单的方法呢？欢迎任何评论，无论好坏；谢谢！

```
[TestClass]
public class MainViewModelTest
{
    private MainViewModel MainViewModel
    {
        get
        {
            var facilityDataEntity = MockRepository.GenerateStub<FacilityDataEntity>();

            var viewModel = new MainViewModel(facilityDataEntity)
            {
                FacilityValue = string.Empty,
                FacilityLabel = string.Empty
            };

            return viewModel;
        }
    }

    private MainViewModel MainViewModelWithFacilityAndShopOrderData
    {
        get
        {
            var facilityDataEntity = MockRepository.GenerateStub<FacilityDataEntity>();
            var shopOrderDataEntity = MockRepository.GenerateStub<ShopOrderDataEntity>();

            var viewModel = new MainViewModel(facilityDataEntity, shopOrderDataEntity)
            {
                FacilityValue = string.Empty,
                FacilityLabel = string.Empty,
                ShopOrder = 99999999,
                RequiredQuantity = 0M,
                ItemCode = string.Empty,
                ItemDescription = string.Empty
            };

            return viewModel;
        }
    }

    [TestMethod]
    public void MainViewModel_TranslateDataEntityListMethodReturnsMainViewModelRecords()
    {
        // Arrange
        var facilityDataEntityList = MockRepository.GenerateStub<IEnumerable<FacilityDataEntity>>();
        var shopOrderDataEntityList = MockRepository.GenerateStub<IEnumerable<ShopOrderDataEntity>>();

        // Act
        IEnumerable<MainViewModel> facilityResults = MainViewModel.TranslateDataEntityList(facilityDataEntityList);
        IEnumerable<MainViewModel> shopOrderResults = MainViewModel.TranslateDataEntityList(facilityDataEntityList, shopOrderDataEntityList);

        // Assert
        Assert.IsInstanceOfType(facilityResults, typeof(IEnumerable<MainViewModel>));
        Assert.IsInstanceOfType(shopOrderResults, typeof(IEnumerable<MainViewModel>));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:42:59.317

在您的测试类中包含通用代码并没有错，但我会避免在您的测试之间潜在地共享状态。

您可以在此处使用两种方法。

## 类/测试初始化

正如[彼得](https://stackoverflow.com/users/5620/peter-ritchie)在他的评论中提到的那样，包含初始化方法来为您做这类事情很容易。

```
//Only runs once per test run
[ClassInitialize]
public void InitClass(){

   //Ideally this should be reserved for expensive operations
   // or for setting properties that are static throughout
   // the lifetime of your test.

}

//Runs for every test
[TestInitialize]
public void TestInit(){

   //Here you can setup common stub/mock behavior
   // that will be common for every test, but ensure
   // it is clean for each test run

} 
```

## 设置/工厂方法

另一种选择是创建专门的设置或工厂方法，可用于减少重复的测试代码并使测试的意图更清晰。

```
[TestMethod]
public void ShouldFailIfUserNameIsTed(){

   var user = SetupUserScenario("Ted");

   var result = _myUserService.Validate(user);

   Assert.IsFalse(result);
}

private User SetupUserScenario(String username){

   var user = new User();
   user.Name = username;

   //Do a bunch of other necessary setup

   return user;
} 
```

希望这一切都有意义，但我也提醒您不要对此过于疯狂。如果你在设置方法中投入了太多东西，那么你的测试就会变得不那么清晰。您应该能够阅读测试并弄清楚发生了什么，而无需检查代码中的许多其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:53:11.927

这就是`ClassInitialize`功能的用途。我会先选择预期和推荐的方式来做某事。它更容易识别，并且花费更少的时间来理解代码。

# oracle - 颠覆 Oracle 变量替换

> ID：15274595
> 
> 赞同：0
> 
> 时间：2013-03-07T15:06:49.507
> 
> 标签：oracle, svn

当使用 Toad 和 Subversion 撤消对包含 & 符号的包的包主体的检出时，设置定义在 & 符号更改为大写后关闭文本。

例如：

```
cCCS_REQUEST := cCCS_REQUEST
||'&credit_exp=30&country=Canada&term='||TO_CHAR(nContract_Term); 
```

改为：

```
cCCS_REQUEST := cCCS_REQUEST
||'&CREDIT_EXP=30&COUNTRY=Canada&TERM='||TO_CHAR(nContract_Term); 
```

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:29:58.757

Toad 和 SQL Developer SVN 客户端中必须有某种方法不进行此类替换。但是，您也许可以使用该`CHR()`函数对 & 符号进行编码：

```
cCCS_REQUEST := cCCS_REQUEST
||CHR(38)||'credit_exp=30'||CHR(38)||'country=Canada'||CHR(38)||'term='||TO_CHAR(nContract_Term); 
```

# node.js - 仅显示所需参数

> ID：15274596
> 
> 赞同：0
> 
> 时间：2013-03-07T15:06:49.637
> 
> 标签：node.js, geddy

我按照[本教程](http://geddyjs.org/tutorial)创建了一个应用程序（没有脚手架）。

创建项目后，我可以单击它，它会显示一个大参数列表。像这里：[http](http://s15.postimage.org/j6at9koiz/parameters.png) ://s15.postimage.org/j6at9koiz/parameters.png 。

这样做的代码是：

```
<% if (todos && todos.length) { %>
  <% for (var i in todos) { %>
  <div class="row todo-item">
    <div class="span8">
        <h3><%- linkTo(todos[i].title, todoPath(todos[i].id)) %></h3>
    </div>
    <div class="span4"><h3><i class="icon-list-alt"></i><%= todos[i].status; %></h3></div>
  </div>
  <% } %>
<% } %> 
```

更具体地说，以下行显示带有标题的链接，这些链接将我带到每个项目的参数列表：

```
<%- linkTo(todos[i].title, todoPath(todos[i].id)) %> 
```

我可以做一些事情来只显示一些参数而不是现在显示的整个列表吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:01:56.337

您需要为 todo 资源添加视图文件。如果你正在搭建脚手架，那么 geddy 默认会创建它们。但除此之外，您必须在`app/views/todos`.

查看文件

*   _form.html.ejs
    *   编辑/新表格
*   添加.html.ejs

    *   新资源视图
    *   `/todos/add`
*   编辑.html.ejs

    *   编辑视图
    *   `/todos/:id/edit`
*   index.html.ejs
    *   索引视图
    *   `/todos`
*   显示.html.ejs

    *   显示单个资源
    *   `/todos/:id`

您可以手动编辑它们。要更改单个待办事项在`/todos/:id`路线上的显示方式，请编辑`show.html.ejs`

```
<div class="hero-unit">
  <%- linkTo('Edit this todo', editTodoPath(params.id), {class: 'btn pull-right'}); %>
  <h3>Params</h3>
  <ul>
    <li>todo.title</li>
    <li>todo.property1</li>
    <li>todo.property2</li>
  </ul>
</div> 
```

# python - 在 pywin32 中打开 MS Word 文件

> ID：15274601
> 
> 赞同：3
> 
> 时间：2013-03-07T15:07:03.233
> 
> 标签：python, ms-word, pywin32

我无法使用 pywin32 打开 word 文件。我一直在尝试寻找 pywin32 的教程，但没有一个代码有效。word文档的位置是C:\Users\User\Documents\python progs\misc\formatting for is。

```
import win32com.client as win32

word = win32.gencache.EnsureDispatch('Word.Application')
word.Visible = False
word.Documents.Open('C:\\sectarianism.doc')

Traceback (most recent call last):
  File "C:\Users\User\Documents\python progs\misc\formatting for isn\formatting.py", line 5, in <module>
    word.Documents.Open('C:\\sectarianism.doc')
  File "C:\Python25\lib\site-packages\win32com\gen_py\00020905-0000-0000-C000-000000000046x0x8x4\Documents.py", line 96, in Open
    , Visible, OpenAndRepair, DocumentDirection, NoEncodingDialog, XMLTransform
com_error: (-2147352567, 'Exception occurred.', (0, u'Microsoft Word', u'This file could not be found.\r (C:\\sectarianism.doc)', u'C:\\Program Files\\Microsoft Office\\Office12\\1033\\WDMAIN11.CHM', 24654, -2146823114), None)
>>> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-17T19:35:48.207

您需要从正确的位置打开文件。

你可以试试这个：

```
import win32com.client as win32
import os

word = win32.gencache.EnsureDispatch('Word.Application')
word.Visible = False
doc_path = os.path.join('c:', os.sep, 'Users', 'User', 'Documents', 'python', 'progs', 'misc', 'formatting for isn', 'sectarianism.doc')
doc = word.Documents.Open(doc_path) 
```

当然，记得用 doc.Close() 关闭文档，稍后再用 Word.Quit() 退出 Word。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-18T10:09:20.897

我正在使用两个选项。这些操作的好来源是[这本书](https://doc.lagout.org/programmation/python/Python%20Programming%20on%20Win32_%20Help%20for%20Windows%20Programmers%20%5BHammond%20%26%20Robinson%202000-02-03%5D.pdf)。比较老了，但还是有很多好的例子。

第一的：

```
from win32com.client import Dispatch

myWord = Dispatch('Word.Application')
myWord.Visible = 1  # comment out for production

myWord.Documents.Open(working_file)  # open file

# ... doing something

myWord.ActiveDocument.SaveAs(new_file)
myWord.Quit() # close Word.Application 
```

第二：

```
from win32com import client

app = client.gencache.EnsureDispatch("Word.Application")
app.Documents.Open(file) # open file
app.ActiveDocument.ActiveWindow.View.Type = 3  # prevent that word opens itself
app.Quit() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T07:56:58.670

我建议这种方法：

```
>>> import win32api
>>> win32api.ShellExecute(0, 'open', 'D:\\test.docx', '', '', 1) 
```

这将通过默认程序（例如 Microsoft Word）打开文件（.docx 或任何其他类型）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-14T10:27:13.190

遇到同样的问题，我只是将地址字符串中的所有斜杠“/”更改为双反斜杠：“\\”。一切都很顺利。

# django - django1.5 ListView中的ajax发布数据

> ID：15274604
> 
> 赞同：1
> 
> 时间：2013-03-07T15:07:10.393
> 
> 标签：django, django-templates, django-views

所以，我有一个带有博客文章的小型博客应用程序（这里是 django 新手），并且我希望对这些项目中的每一个都包括一个“评级”（类似于 stackoflow 上的向上/向下）。所以，我拥有的是 ListView 中基于 ajax 的 GET - 但我现在意识到我需要 POST 来“修改”这个评级数据。我一直在寻找从 django ListView 发布数据，但我无法看到如何做到这一点。当前的 GET 代码是所有博客文章（分页）的列表视图，如下所示：

```
#views.py
class AwesomeDisplayListView(JSONResponseMixin,ListView):
    model = blogposts
    template_name = "awesome_list.html"
    paginate_by = '15'
    context_object_name = "searchres"

    def get_context_data(self, **kwargs):
        print "this is get_context_data"
        context = super(SearchDisplayListView, self).get_context_data(**kwargs)
        q = self.request.GET.get('q')
        context['searchq'] = q
        return context

    def get_queryset(self):
        print "this is get_queryset"
                # get some queryset
        return queryset 

    def render_to_response(self, context):
        if self.request.is_ajax():
            obj = {'name':'ajax', 'birthday':'may'}
            return JSONResponseMixin.render_to_response(self, obj)
        else:
            return ListView.render_to_response(self, context) 
```

上面的代码可以很好地将数据（“obj”）获取到模板中，并且我能够呈现博客文章和 GET ajax，但是，我想做的是发布数据，以便：[1] 评级是从当前值增加 1 [2] 特定操作（点击投票），需要 login_required。

我想知道是否有人可以指出我正确的方向来做到这一点。我已经用谷歌搜索了这个问题，人们似乎建议组合 Mixins - 但是，不确定是否应该是这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:26:45.723

通过查看基于类的视图源代码，我无法告诉您我学到了多少。一旦你看到它，就很容易修改你的类对象来做你想做的事。在您的情况下，如果您`post`向您的类添加一个方法，它将在发布到映射到视图的 url 时被调用。

```
def post( self, request, *args **kwargs ):
  # receive the post, process the rating, return your JSON response 
```

**回应您的评论**

由于您希望用户能够从 ListView 投票/否决，因此您需要某种方式来识别被投票到处理请求的 POST 视图的帖子。

因此，如果您将博文的 id 与投票一起发送，您可以获取该模型并相应地更新它。

假设这样的模型

```
class BlogPost( models.Model ):
  upvotes=models.IntegerField( default=0 )
  downvotes=models.IntegerField( default=0 )

  def get_score( self ):
    return self.upvotes - self.downvotes

  score=property( get_score ) 
```

你的模板.html

```
{% for post in object_list %}
 <div class="blogpost" data-pk="{{post.pk}}">
  <span class="score">{{post.score}}</span>
  <a class="upvote" href="#">Upvote</a>
  <a class="downvote" href="#">Downvote</a>
 </div>
{% endfor %} 
```

你的javascript.js

```
$('.blogpost').on( 'click', '.upvote,.downvote', function( e ){
  e.preventDefault();
  var id=$( this ).closest('.blogpost').data('pk'),
  upvote=$( this ).is('.upvote'),
  xhr=$.ajax({
    url: location.href, 
    type: 'post',
    data:{ id: id, upvote: upvote ? 1 : 0 },
    dataType: 'json'
  });
  xhr.done( function( data ){
     // successful submission
  });
}); 
```

视图.py

```
class AwesomeDisplayListView(JSONResponseMixin,ListView):
  model = BlogPost
  template_name = "awesome_list.html"
  paginate_by = '15'
  context_object_name = "searchres" 

  def post( self, request, *args, **kwargs ):
    id=request.POST.get('id')
    upvote=int( request.POST.get('upvote') )
    blogpost=BlogPost.objects.get( pk=id )
    if upvote:
      blogpost.upvotes=blogpost.upvotes + 1
    else:
      blogpost.downvotes=blogpost.downvotes + 1
    blogpost.save()
    return http.HttpResponse( json.dumps({ 'score': blogpost.score }) ) 
```

为了进一步扩展我的上一条评论，评级模型可能会使这更容易。

```
class BlogPost( models.Model ):
  title=models.CharField( max_length=100 )
  def get_score( self ):
    return self.ratings.filter( up=True ).count() - self.ratings.filter( up=False ).count()

  score=property( get_score )

class Rating( models.Model ):
  blogpost=models.ForeignKey( BlogPost, related_name="ratings" )
  user=models.ForeignKey( User )
  up=models.BooleanField( default=True )

  class Meta:
    unique_together=('blogpost','user',) 
```

然后在您的帖子视图中

```
def post( self, request, *args, **kwargs ):
  id=request.POST.get('id')
  upvote=bool( int( request.POST.get('upvote') ) )
  blogpost=BlogPost.objects.get( pk=id )
  rating, is_new=Rating.objects.get_or_create( user=request.user, blogpost=blogpost )
  if rating.up != upvote:
    rating.up=upvote
    rating.save() 
```

# mysql - 使用 MariaDB 的 Ruby convert_tz 返回 nil

> ID：15274605
> 
> 赞同：2
> 
> 时间：2013-03-07T15:07:17.233
> 
> 标签：mysql, ruby-on-rails, mariadb, convert-tz

做常规时：

```
select convert_tz(now(), "UTC", "Europe/London") 
```

直接在 MariaDB 服务器上，它将产生：

```
+-------------------------------------------+
| convert_tz(now(), "UTC", "Europe/London") |
+-------------------------------------------+
| 2013-03-07 16:01:32                       |
+-------------------------------------------+ 
```

但如果通过 ruby​​ 1.8.7 或 1.9.3 宽度完成：

```
q = 'select convert_tz(now(), "UTC", "Europe/London")'
ActiveRecord::Base.connection.select_all(q) 
```

它将产生：

```
"convert_tz(now(), \"UTC\", \"Europe/London\")" => nil 
```

对 MySQL 设置执行相同操作：

```
q = 'select convert_tz(now(), "UTC", "Europe/London")'
ActiveRecord::Base.connection.select_all(q) 
```

结果是：

```
"convert_tz(now(), \"UTC\", \"Europe/London\")" => "2013-03-07 16:05:14" 
```

现在在 MySQLWorkbench 中测试，同样的错误结果在那里发生，返回 null 而不是转换后的时间。

所以我想这是 MariaDB 中的东西还是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T16:41:41.310

您可能错过了时区信息。您可以通过使用该`mysql_tzinfo_to_sql`实用程序或从[mysql 开发站点](https://dev.mysql.com/downloads/timezones.html)下载表来生成它。

如果您使用的是 Mac 或 Linux，那么以下内容可能对您有用（可能需要更新您的 zoneinfo 的位置）

```
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -uroot -Dmysql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:22:49.810

升级到 5.5.29-MariaDB 解决了这个问题，所以我猜它与 5.5.28 有关。

# java - Java EE 中的 Spring 原型或提供程序

> ID：15274607
> 
> 赞同：1
> 
> 时间：2013-03-07T15:07:25.130
> 
> 标签：java, spring, jakarta-ee

我有一堂课

```
public class Test {

   @Autowired
   private Testing abc;

   public Testing getTesting() {
     return abc;
   }

}

@Component
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
public class Testing {

   private int i;
} 
```

每次我使用支持自动装配的 bean 工厂手动创建类 Test 时，我都希望创建一个测试实例。

然而今天我被介绍了一个新概念 javax.inject.Provider

```
public class Test {

   @Autowired
   private Provider<Testing> abc;

   public Testing getTesting() {
     return abc.get();
   }
}

@Component
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
public class Testing {

   private int i;

   //transactional methods
} 
```

它提供了什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:13:41.637

> *   检索多个实例。
> *   实例的惰性或可选检索。
> *   打破循环依赖。
> *   抽象范围，以便您可以从包含范围内的实例中查找较小范围内的实例。

来自[Java EE 文档：Provider](http://docs.oracle.com/javaee/6/api/javax/inject/Provider.html)

**更新：** [Java EE 文档：Inject Annotation](http://docs.oracle.com/javaee/6/api/javax/inject/Inject.html)讨论了如何使用`Provider`.

> A conservative injector might detect the circular dependency at build time and generate an error, at which point the programmer could break the circular dependency by injecting Provider or Provider instead of A or B respectively.

# jquery - jQuery EasySlider 1.7

> ID：15274608
> 
> 赞同：0
> 
> 时间：2013-03-07T15:07:36.673
> 
> 标签：jquery, easyslider

谁能告诉我我做错了什么？我无法让滑块工作。图像只是堆叠在一起。我是新手。任何信息或说明都会有所帮助。

谢谢

```
<head>

    <link href="css/main.css" rel="stylesheet" type="text/css" />
    <link href="css/screen.css" media="screen" />
    <link href="css/css3menu1/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/easySlider1.7.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){   
            $("#slider").easySlider({
                auto: true, 
                continuous: true
            });
        }); 
    </script>

    </div>
    <div id="slider">
        <ul>    
            <li><img src="images/01.jpg" /></li>
            <li><img src="images/02.jpg" /></li>
            <li><img src="images/03.jpg" /></li>
            <li><img src="images/04.jpg" /></li>
            <li><img src="images/05.jpg" /></li>    
        </ul>
    </div>
    <div id="socialicons"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:26:25.483

在包含滑块插件*之前*，您需要包含 jQuery 。

# java - 通过 JSNI 从 jQuery 滑块中调用 Java 函数

> ID：15274612
> 
> 赞同：0
> 
> 时间：2013-03-07T15:07:48.817
> 
> 标签：java, jquery, gwt, jsni

我有主类（比如`StockWatcher`）调用 JSNI 来在页面加载时在正文中定义一个 jQuery UI 对话框。该对话框在`JSNI`函数内调用。上`onModuleLoad`，我做类似的事情`prepareUI();`。`prepareUI`JSNI 运行如下：

```
public void native prepareUI() /*-{
  $wnd.jQuery($doc).ready(function($) { 
    message = "<div id = 'message'>Don't do this...</div>
    $(message).appendTo("body");
    $( "#message" ).dialog({
            modal: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            },
            close:function() {  this.@com.google.gwt.sample.stockwatcher.client.StockWatcher::doit()(); },
            autoOpen: true,
            show: {
            effect: "puff",
            duration: 500
            },
            hide: {
            effect: "explode",
            duration: 500
            }
        });
 });
}-*/; 
```

接下来是`doit()`函数，很简单：

```
public void doit() {
  Window.alert("Foo");
} 
```

但是，在页面加载时，即使对话框正确显示，甚至在单击`Ok`按钮时正确关闭，警报也不会弹出（控制台中未显示错误）。谁能告诉我如何解决这个问题？完成此操作的类在`StockWatcher`包中`com.google.gwt.sample.stockwatcher.client`（想象一下默认的 GWT`StockWatcher`包层次结构）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:54:51.873

你的问题是`this`. 当函数被调用时，`this`不是你的`StockWatcher`类（它将是你的`#message`元素）。您必须在方法的顶部使用`$.proxy`或简单。`var that = this`这都是关于*范围界定*的。

顺便说一句，您还应该用 包装您的函数`$entry`：它将确保 GWT 中的一些事情顺利进行：异常被路由到，并且*通过*和`GWT.UncaughtExceptionHandler`调度的命令被正确调用。 *`Scheduler#scheduleEntry``Scheduler#scheduleFinally`*

 *使用示例`$.proxy`：

```
var closeFn = $.proxy($entry(function() {
    this.@com.google.gwt.sample.stockwatcher.client.StockWatcher::doit()();
  }), this);
$wnd.jQuery($doc).ready(function($) {
  …
  $( "#message" ).dialog({
    …
    close: closeFn,
… 
```

使用示例`var that = this`：

```
var that = this;
$wnd.jQuery($doc).ready(function($) {
  …
  $( "#message" ).dialog({
    …
    close: $entry(function() { that.@com.google.gwt.sample.stockwatcher.client.StockWatcher::doit()(); }),
… 
```*

# google-app-engine - 当缓存和数据库索引变得非常不同时该怎么办？

> ID：15274613
> 
> 赞同：0
> 
> 时间：2013-03-07T15:07:54.770
> 
> 标签：google-app-engine, memcached, google-cloud-datastore, search-engine, google-search-api

我在 gae 中将 memcache 和数据存储索引与 google search api 一起使用。一个实际的问题是如何在删除实体后刷新数据存储索引，因为尽管实体已被删除，但它似乎仍在索引中。如果 memcache 和 index start 包含“相同”数据集的非常不同的内容，即可以从 memcache、数据存储索引或数据存储往返显示的实体列表，我应该如何处理更假设的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:33:12.750

对于第一个问题，我建议使用实体的键作为索引的 doc_id，并且由于您有对文档的引用，您可以在[pre_delete_hook中](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model__pre_delete_hook)[删除](https://developers.google.com/appengine/docs/python/search/overview#Deleting_Documents)它。这样您还可以使数据保持最新，这是必要的，因为将具有现有 doc_id 的新文档添加到索引将导致覆盖现有文档。（例如，有一个创建相应搜索文档的 post_put_hook） 其次，最好确保您不会遇到这种情况，而不是通过保持更新来纠正它。

# regex - 匹配记事本++正则表达式中所有出现的html元素属性

> ID：15274616
> 
> 赞同：0
> 
> 时间：2013-03-07T15:08:03.933
> 
> 标签：regex, notepad++

我有一个文件，其中包含数百个这样的链接：

```
<h3>aspnet</h3>
<a href="http://example.com/1" icon="data:image/png;base64,iwl1zecylifzn3fz9fr3l4cdjqhigcmjo9m">Ex 1</a>
<a href="http://example.com/2" icon="data:image/png;base64,ivborw0kggoaaaansuheugaaaqcayaaaaf8">Ex 2</a>
<a href="http://example.com/3" icon="data:image/png;base64,jmiaw+f2pwdohka6t+hnyfanbkwoa1olmug">Ex 3</a> 
```

所以我想删除所有元素

`icon="data:image/png;base64,ivborw0kggoaaaansuheugaaabaaaaaqcayaaaaf8..."`

从所有的行。我浏览了[官方的 Notepad++ 正则表达式 wiki](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Regular_Expressions)，经过几次试验后得出了这个结论：

```
icon=\"[^\.]+\" 
```

这样做的问题是，它选择了第二个双引号并在下一个出现的双引号处停止。为了说明，这将选择以下内容：

```
icon="data:image/png;base64,...jbvebich4sec9zgth1sfue1cdt...">EX 1</a> <a href=" 
```

如果我将上述正则表达式修改为，

```
icon=\"[^\.]+\"> 
```

然后它几乎是完美的，但它也在选择`>`：

```
icon="data:image/png;base64,...jbvebich4sec9zgth1sfue1cdt..."> 
```

我正在寻找的正则表达式会像这样选择：

```
icon="data:image/png;base64,...jbvebich4sec9zgth1sfue1cdt..." 
```

我也尝试了以下，但它根本不匹配任何东西

```
icon=\"[^\.]+\"$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:13:41.950

只需匹配除引号之外的任何内容，然后是引号：

```
icon="[^"]+" 
```

刚刚使用 notepad++ 6.2.2 进行了测试，并确认这与所写的正确匹配。

分解：

```
icon=" 
```

这是相当明显的，匹配文字文本`icon="`。

```
[^"]+ 
```

这意味着匹配任何不是`"`. 后面加上`+`它的意思是“一次或多次”。

最后我们匹配另一个字面量`"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:11:45.873

我不是记事本++ 用户。所以不知道notepad ++如何使用正则表达式，但你可以尝试替换

`icon=\"[^>]*`到`(empty string)`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-27T06:34:54.453

试试这个解决方案：
这是我只是检查你想要的工作。
实现目标的方式：

查找内容：`(icon.*")|.*?`
替换为：`$1`

# sqlite - 如何解决这个 java.lang.NullPointerException

> ID：15274619
> 
> 赞同：0
> 
> 时间：2013-03-07T15:08:12.547
> 
> 标签：sqlite

嗨，我是 android 编程新手，我不知道或者我真的无法弄清楚为什么在我单击我创建的应用程序上的按钮后会收到此错误消息

> java.lang.NullPointerException at com.example.dailydoseofhappiness.MainActivity.searchRecord(MainActivity.java:62) at com.example.dailydoseofhappiness.MainActivity.searchRecord(MainActivity.java:52)

这是代码片段。

```
public void onClick(View arg){ 
     if(arg.getId()==R.id.btnfortune){ //this is line 52
         searchRecord(count);
     }

 }

public void searchRecord(int count)
throws SQLException
{
    Cursor rsCursor;
    String [] rsFields = {"mesNum","Message"}; // this is line 62
    rsCursor = dbm.dbase.query("MessageFile", rsFields, "mesNum = " + count, null,       null, null, null, null);
    rsCursor.moveToFirst();

    if(rsCursor.isAfterLast()==false){

     lblmessageS.setText(rsCursor.getString(0));
    }
    rsCursor.close();
     } 
```

如果有什么问题，谁能检查这个代码片段非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:30:56.520

试试这个`searchRecord`方法。我添加了一些愚蠢的检查，所以如果任何变量为空，它会警告你：

```
public void searchRecord(int count) throws SQLException {
    Cursor rsCursor;
    String [] rsFields = {"mesNum","Message"}; // this is line 62

    if (dbm == null)
        throw new Exception("dbm object is null");

    if (dbm.dbase == null)
        throw new Exception("dbm.dbase is null");

    rsCursor = dbm.dbase.query("MessageFile", rsFields, "mesNum = " + count, null, null, null, null, null);

    if (rsCursor == null)
        throw new Exception("rsCursor is null");

    rsCursor.moveToFirst();

    if (rsCursor.isAfterLast()==false){
        if (lblmessageS == null)
            throw new Exception("lblmessageS is null");

        lblmessageS.setText(rsCursor.getString(0));
    }

    rsCursor.close();
 } 
```

# c# - 当数据库中已经存在基础时，流畅的 NHibernate 自动映射子类

> ID：15274621
> 
> 赞同：0
> 
> 时间：2013-03-07T15:08:18.810
> 
> 标签：c#, fluent-nhibernate, fluent-nhibernate-mapping

我在使用 Fluent NHibernate 自动映射我的对象时遇到了困难。

我已经调用`Document`了表已经存在于 SqlServer 中的类。

类`Packet` ***扩展*** `Document`并拥有一个成员`PacketDefinition`。

`PacketDefinition`有一个`List`（**不是windows窗体，而是我自己的类**`Form`）类型。

 **![在此处输入图像描述](../Images/f1312ea3c7bd39e6715b1fc6363eccd1.png)

我正在尝试`Packet`使用以下配置自动映射对象。

```
 var mapping = CreateMappings();

        _sessionFactory = Fluently.Configure()
                                  .Database(
                                      MsSqlConfiguration.MsSql2008.ConnectionString(
                                          c => c.Server("machinename\\sql2012").Database("DatabaseName").TrustedConnection())
                                                        .ShowSql)
                                  .Mappings(m => m.AutoMappings.Add(mapping))
                                  .ExposeConfiguration(BuildSchema)
                                  .BuildSessionFactory();

    private static AutoPersistenceModel CreateMappings()
    {
        return AutoMap
            .AssemblyOf<Packet>();
    }

    private static void BuildSchema(Configuration config)
    {
        new SchemaExport(config).Create(false, true);
    } 
```

问题是当我尝试自动映射`Packet`类时，我收到错误消息

**`System.Data.SqlClient.SqlException : There is already an object named 'Document' in the database.`**

我知道该`Document`表已经存在于数据库中，我不想删除它。我尝试使用忽略基类

```
AutoMap.AssemblyOf<Packet>().IgnoreBase<Document>(); 
```

但是随后自动映射也会创建`Document`in `Packet`table 的所有属性，这并不好。

如果我创建一个单独的数据库，然后尝试运行相同的代码，它的工作原理是`Document`该数据库中不存在表。我不想删除现有表，因为其中有很多数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:01:21.243

如果我理解正确，您正试图避免删除您的 Document 表，因为“其中有很多数据”。

我不知道有什么方法可以做你想做的事。FNH 和 NH 没有任何数据迁移功能 (AFAIK)，我认为当您尝试以这种方式使用它时，您只是在与系统作斗争。

如果它只是一个表，也许你可以做一些简单的事情，比如将它导出为像 CSV 文件这样的平面格式，然后让 FNH 重建模式，然后再次导入数据。

但是，随着架构的发展和变得更加复杂，这种方法可能无法很好地扩展。

在我的项目中，我们能够避开这个问题，因为我们首先将数据保存在我们的遗留程序也使用的专有二进制文件中，因此我们可以在架构更改时重新导入所有数据。但这对于大多数项目来说并不理想。**

# c++ - Qt Q_OBJECT 类编译

> ID：15274629
> 
> 赞同：0
> 
> 时间：2013-03-07T15:08:48.980
> 
> 标签：c++, qt, compilation, qmake, qobject

添加标记为的类时，无错编译需要什么

```
Q_OBJECT 
```

? 应该运行 qmake 文件吗？

新类写在 .h .cpp 文件中，这些文件已经添加到 .pro .pri 文件中。

我的形而上学问题是

1/ qmke_all.bat 运行和重建是否足以清除 Qt 依赖项？如果不是，程序是什么？

2/ 为什么需要这个程序，会发生什么？

3/ .pro .pri 有什么用？他们都在这里与 qt 进行“映射”吗？添加类但没有 .h .cpp 文件时，我应该对它们进行任何更改吗？

我用VS2010

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:59:45.530

如果您已将 Q_OBJECT 添加到自定义类中，则需要在编译之前运行 qmake，否则它不会生成所需的元代码。

1）不知道你在这里的意思，对不起。

2）或在这里。

3) .pro 和 .pri 本质上是 qmake 的指令文件，与 Makefile 的 make 工作方式非常相似。有明显的区别，但当你说它们用于映射时，你离你不远了，它们在那里告诉 qmake 如何生成必要的编译文件。当您添加新类时，如果它们没有被自动添加，那么您需要添加 .cpp 和 .h 文件。

# python - 在 Python 中使用 Rpy2 更改 ggplot2 中的因子顺序

> ID：15274630
> 
> 赞同：1
> 
> 时间：2013-03-07T15:08:50.083
> 
> 标签：python, ggplot2, rpy2

我正在尝试将以下代码转换为 Rpy2，但没有成功：

```
neworder <- c("virginica","setosa","versicolor")
library("plyr")
iris2 <- arrange(transform(iris,
             Species=factor(Species,levels=neworder)),Species) 
```

在这种情况下，这意味着只是更改`factor`特定列的顺序`Species`。

我也不想`plyr`在 Rpy2 中使用所有这些东西，因为我可以修改绘制为 Python 对象的数据框。以下不起作用：

```
# start with Python df 'mydf' and convert to R df
# to get mydf_r. The column equivalent of Species here
# is "variable"
# ...
mydf_r.variable = r.factor(ro.StrVector(["a", "b", "c"]))
# call ggplot...
ggplot2.ggplot(mydf) + ... 
```

这不起作用。如何获得等效的 R 代码？即我有一个熔化的数据框，其中有几个`variable`绘制为的值，`c, b, a`我想`a, b, c`通过更改`factor`. `variable`谢谢。

**编辑**我可以使用以下代码更改顺序：

```
labels = robj.StrVector(tuple(["a", "b", "c"]))
variable_factor = r.factor(labels, levels=labels)
r_melted = r.transform(r_melted, **{"variable": variable_factor})
p = ggplot2.ggplot(r_melted) + \
    ggplot2.geom_boxplot(aes_string(**{"x": "variable",
                                       "y": "value"
                                        "fill": "group"})) + \
    ggplot2.scale_fill_manual(values=np.array(["#00BA38", "#F8766D"])) + \
    ggplot2.coord_flip() 
```

但是，这破坏了 ggplot 正确制作箱线图并按`group`变量对其进行颜色编码的能力。如果我删除这些行：

```
labels = robj.StrVector(tuple(["a", "b", "c"]))
variable_factor = r.factor(labels, levels=labels)
r_melted = r.transform(r_melted, **{"variable": variable_factor}) 
```

然后一切正常......我想要的只是改变`variable`值出现在箱线图中的顺序。

@lgautier：您提供的解决方案看起来像我想要的，但在这里对我不起作用。我用数据集为它做了一个测试用例`iris`：

**原情节**

```
import os
iris = pandas.read_table(os.path.expanduser("~/iris.csv"),
                         sep=",")
iris["Species"] = iris["Name"]
r_melted = conversion_pydataframe(iris)
p = ggplot2.ggplot(r_melted) + \
    ggplot2.geom_boxplot(aes_string(**{"x": "PetalLength",
                                       "y": "PetalWidth",
                                       "fill": "Species"})) + \
    ggplot2.facet_grid(Formula("Species ~ .")) + \
    ggplot2.coord_flip()
p.plot() 
```

产生：

![在此处输入图像描述](../Images/43618157611616d041144689999ed913.png)

但如果我添加：

```
labels = robj.StrVector(tuple(["versicolor", "virginica", "setosa"]))
variable_i = r_melted.names.index("Species")
r_melted[variable_i] = robj.FactorVector(r_melted[variable_i],
                                         levels=labels) 
```

在绘图之前，我得到：

![在此处输入图像描述](../Images/a6644d76e977ec0f4c7c922c97466965.png)

`Species`我认为这是因为我使用的名称与名称值不完全匹配。如果 rpy2 在发生这种情况时引发错误，那将很有帮助。但无论如何，如果我想覆盖因子的名称怎么办？即取第一个因素名称并使其成为`x`第二个`y`等，并按该顺序显示？这样做的唯一方法是在数据框中使用正确的名称为其创建一个新列吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:46:33.660

您需要即时更改所用因子的级别（下面的第一个示例），或者在数据框的列中更改（第二个示例）。

如果`labels`是一个相对较短的列表，则以下内容将起作用：

```
# r_melted is the one defined upstream of your code snippet,
# not the results of calling r.transform()
labels = robj.StrVector(tuple(["a", "b", "c"]))
p = ggplot2.ggplot(r_melted) + \
    ggplot2.geom_boxplot(aes_string(**{"x": "factor(variable, levels = %s)" % labels,
                                       "y": "value"
                                       "fill": "group"})) + \
    ggplot2.scale_fill_manual(values=np.array(["#00BA38", "#F8766D"])) + \
    ggplot2.coord_flip() 
```

如果`labels`更大（或根本不需要 R 代码）：

```
# r_melted is the one defined upstream of your code snippet,
# not the results of calling r.transform()
from rpy2.robjects.vectors import FactorVector
variable_i = r_melted.names.index('variable')
r_melted[variable_i] = FactorVector(r_melted[variable_i],
                                    levels = robj.StrVector(tuple(["a", "b", "c"]))
p = ggplot2.ggplot(r_melted) + \
    ggplot2.geom_boxplot(aes_string(**{"x": "variable",
                                       "y": "value"
                                       "fill": "group"})) + \
    ggplot2.scale_fill_manual(values=np.array(["#00BA38", "#F8766D"])) + \
    ggplot2.coord_flip() 
```

# javascript - 按对象键过滤对象数组

> ID：15274632
> 
> 赞同：2
> 
> 时间：2013-03-07T15:09:00.160
> 
> 标签：javascript, arrays, underscore.js

我在 Javascript 中有一组对象：

```
var List = [
            {
                employee:'Joe',
                type:'holiday',
            },
            {
                employee:'Jerry',
                type:'seminar',

            },
            {
                employee:'Joe',
                type:'shore leave',
            }
           ]; 
```

我想获得两个新的对象数组；一个用于关键员工“Joe”，另一个用于关键员工“Jerry”。对象应保持相同的键/值对。

我一直在尝试使用 underscore.js 获得解决方案，但它变得太复杂了。关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:15:08.373

```
var joe = List.filter(function(el){
 return el.employee === "Joe"
});

var jerry = List.filter(function(el){
 return el.employee === "Jerry"
}); 
```

这使用[Array.prototype.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)并将在 IE9 及更高版本 + 所有最近的 Chrome/Firefox/Safari/Opera 版本中工作。

如果您事先不知道名称，那么您可以创建一个地图 var names = {};

```
for(var i =0; i<List.length; i++){
  var ename = List[i].employee;
  if(typeof names[ename] === "undefined"){
     names[ename] = List.filter(function(el){
     return el.employee === "ename"
    });
   } 
```

}

附带说明一下，Javascript 约定仅将构造函数的变量的第一个字母大写。所以列表应该是列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:17:45.343

```
var emps = {};  
_.each(List, function(item){
   emps[item.employee] = emps[item.employee] || [];
   emps[item.employee].push(item);
}); 
```

或使用`groupBy`

```
var emps = _.groupBy(List, function(item){
   return item.employee;
}); 
```

`console.log(emps);`给

```
{
    "Jerry": [
        {
            "employee": "Jerry",
            "type": "seminar"
        }
    ],
    "Joe": [
        {
            "employee": "Joe",
            "type": "holiday"
        },
        {
            "employee": "Joe",
            "type": "shore leave"
        }
    ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T09:39:03.930

抱歉 - 我没有代表。尚未发表评论，但我认为应该是

```
return el.employee === ename;  // No quotes around ename 
```

否则@Ben 给出的答案是完美的——如果使用下划线在项目中是不可能的，它可以扩展到“groupby”函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-17T17:28:53.850

为了完整起见，还有 Underscore 的版本，[`_.filter`](https://underscorejs.org/#filter)它与[`_.matcher`](https://underscorejs.org/#matcher)iteratee[简写](https://underscorejs.org/#iteratee)一起使用。这本质上是本麦考密克[答案](https://stackoverflow.com/a/15274750/1166087)的一个更短的版本。

```
var joe = _.filter(List, {employee: 'Joe'});
var jerry = _.filter(List, {employee: 'Jerry'}); 
```

# c# - 在应用程序中包含 SQL Server 数据库

> ID：15274636
> 
> 赞同：3
> 
> 时间：2013-03-07T15:09:11.713
> 
> 标签：c#, sql-server

我已经开发了连接到 SQL Server 2008 数据库的 ac# 应用程序，我想安装一个项目。如何在无需安装 SQL Server 2008 的情况下将我的数据库包含在应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:14:45.837

这不可能。如果您不想在客户端系统中安装 sql server，最好使用[SQL SERVER COMPACT EDITION 。](http://en.wikipedia.org/wiki/SQL_Server_Compact)Sql Server 精简版使您可以创建无需 sql server 即可访问的本地数据库。但是使用它，您将无法在网络上使用您的应用程序。

# memory-management - 出现错误：malloc：*** 对象 0x1107e790 的错误：未分配被释放的指针 *** 在 malloc_error_break 中设置断点以进行调试

> ID：15274644
> 
> 赞同：0
> 
> 时间：2013-03-07T15:09:27.143
> 
> 标签：memory-management, ios6, malloc, breakpoints, nszombie

我在 NSZombie 中得到以下输出，

![在此处输入图像描述](../Images/435fcdba359a5b4a0a134b5025286a4f.png)

我不知道如何解决它：

我正在使用以下代码：

```
 AsyncronousUIImage *image=[[AsyncronousUIImage alloc] init];
        [image loadImageFromURL:imageURL inImageView:templateView];
        image.delegate=self; 
```

# excel-formula - 重新排列表格

> ID：15274646
> 
> 赞同：0
> 
> 时间：2013-03-07T15:09:28.767
> 
> 标签：excel-formula, excel-2010

我正在使用查询从数据库中获取数据。我的问题是数据的排列不是那么用户友好。

我的数据采用以下格式，.. 只有更大的表：

```
Measurand    Date   Trunk 1 Trunk 2 Trunk 3 Trunk 4

a 1.1.2012 00:00 Value.a.1 Value.a.2 Value.a.3 Value.a.4

b 1.1.2012 00:00 Value.b.1 Value.b.2 Value.b.3 Value.b.4

c 1.1.2012 00:00 Value.c.1 Value.c.2 Value.c.3 Value.c.4

a 2.1.2012 00:00 Value.a.5 Value.a.6 Value.a.7 Value.a.8

b 2.1.2012 00:00 Value.b.5 Value.b.6 Value.b.7 Value.b.8

c 2.1.2012 00:00 Value.c.5 Value.c.6 Value.c.7 Value.c.8

a 3.1.2012 00:00 Value.a.9 Value.a.10 Value.a.11 Value.a.12

b 3.1.2012 00:00 Value.b.9 Value.b.10 Value.b.11 Value.b.12

c 3.1.2012 00:00 Value.c.9 Value.c.10 Value.c.11 Value.c.12 
```

我想写一个公式或做一些巫术使它看起来像：

```
Date a b c

1.1.2012 00:00  Value.a.1   Value.b.1   Value.c.1

1.1.2012 00:00  Value.a.2   Value.b.2   Value.c.2

1.1.2012 00:00  Value.a.3   Value.b.3   Value.c.3

1.1.2012 00:00  Value.a.4   Value.b.4   Value.c.4

2.1.2012 00:00  Value.a.5   Value.b.5   Value.c.5

2.1.2012 00:00  Value.a.6   Value.b.6   Value.c.6

2.1.2012 00:00  Value.a.7   Value.b.7   Value.c.7

2.1.2012 00:00  Value.a.8   Value.b.8   Value.c.8

3.1.2012 00:00  Value.a.9   Value.b.9   Value.c.9

3.1.2012 00:00  Value.a.10  Value.b.10  Value.c.10

3.1.2012 00:00  Value.a.11  Value.b.11  Value.c.11

3.1.2012 00:00  Value.a.12  Value.b.12  Value.c.12 
```

我知道这是一个可怕的显示，但由于缺少点我无法插入图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:41:39.197

我在这里可以看到的最懒惰的选择是创建一个数据透视表，将整个表作为输入范围，将trunk1-trunk4 设置为数据字段（按此顺序），将被测量作为列字段，将日期作为行字段。这将为您提供所需的布局，只要每个日期每个树干每个被测量只有 1 个值。

只要您不不断添加大量新中继线，保持更新就不应该做太多工作。我认为没有任何简单的方法可以一次性添加大量数据字段，除非您使用一点 VBA。

# windows - 转到 Drupal 站点的 /admin 页面时出现 403 错误

> ID：15274648
> 
> 赞同：0
> 
> 时间：2013-03-07T15:09:30.003
> 
> 标签：windows, drupal, iis-7, drupal-7, http-status-code-403

我在这里有一个令人沮丧的问题。不太确定是什么原因造成的。我的 Drupal 站点在带有 IIS 7 的 Windows 服务器上运行。当我转到[http://example.com/admin](http://example.com/admin)页面时，我收到 403 错误。[但是，如果我使用http://example.com/?q=user](http://example.com/?q=user)登录，然后转到 /admin 它工作正常。我猜测 IIS 中的设置有问题，或者某种权限有问题。我网站的根目录中没有管理目录，所以它不是流氓文件夹搞砸的情况。有任何想法吗？？

这是我的 web.config..

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <!-- Don't show directory listings for URLs which map to a directory. -->
    <directoryBrowse enabled="false" />
    <rewrite>
      <rules>
        <rule name="Protect files and directories from prying eyes" stopProcessing="true">
          <match url="\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)$|^(\..*|Entries.*|Repository|Root|Tag|Template)$" />
          <action type="CustomResponse" statusCode="403" subStatusCode="0" statusReason="Forbidden" statusDescription="Access is forbidden." />
        </rule>
        <rule name="Force simple error message for requests for non-existent favicon.ico" stopProcessing="true">
          <match url="favicon\.ico" />
          <action type="CustomResponse" statusCode="404" subStatusCode="1" statusReason="File Not Found" statusDescription="The requested file favicon.ico was not found" />
        </rule>
        <!-- Rewrite URLs of the form 'x' to the form 'index.php?q=x'. -->
        <rule name="Short URLs" stopProcessing="true">
          <match url="^(.*)$" ignoreCase="false" />
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
            <add input="{URL}" pattern="^/favicon.ico$" ignoreCase="false" negate="true" />
            <!--<add input="{REQUEST_URI}" pattern="^/(gallery2|message-boards)" negate="true" />-->
          </conditions>
          <action type="Rewrite" url="index.php?q={R:1}" appendQueryString="true" />
        </rule>
      </rules>
    </rewrite>

   <!-- <httpErrors>
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" prefixLanguageFilePath="" path="/index.php" responseMode="ExecuteURL" />
    </httpErrors> 
    -->

    <defaultDocument>
      <!-- Set the default document -->
      <files>
        <remove value="index.php" />
       <add value="index.php" />
      </files>
    </defaultDocument>
       <staticContent>
            <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
        </staticContent>
   </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:15:22.900

/?q=user 表示您没有启用干净的 URL。

尝试通过导航到 /?q=admin 登录。然后确保您在站点的根目录中有 .htaccess（它是隐藏的，因此您必须在您使用的任何平台上启用“查看隐藏文件”）。

一旦你确定它在那里——如果没有重新下载 Drupal，隐藏文件可见以获取文件——清除缓存，转到“配置”->“搜索和元数据”->“清理 URL”-> 启用

# xpages - 制作一个“公共”的servlet？

> ID：15274652
> 
> 赞同：0
> 
> 时间：2013-03-07T15:09:52.930
> 
> 标签：xpages

我终于让我的测试 servlet 从这个线程工作了？

[从 xpages 客户端脚本和常规注释表单调用 HttpServlet 类？](https://stackoverflow.com/questions/15226268/calling-httpservlet-class-from-xpages-client-side-script-and-regular-notes-forms)

剩下的问题是我被要求登录。但是我的最终 servlet 需要在不登录的情况下运行。我将我的 acl 设置为读取公共文档和为匿名写入公共文档。

我不知道该怎么做是让 serlet 公开访问。其他设计文档具有“可供公共访问用户使用”属性，但我没有看到 java 文件的此类属性。这会设置在其他地方吗？也许在我的 IServletFactory 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:33:16.630

我不知道为什么我之前需要登录，但看起来它现在正在工作。唯一需要的是启用读取公共公共文档。

这有点令人担忧，因为至少看起来没有办法让一些 servlet 不公开。就我而言，这不是问题，但对其他人来说可能是问题。

我还注意到，如果您更改公共访问 acl 设置，看起来您出于某种原因需要重新构建您的 servlet，否则 servlet 将无法运行。当我有机会时，我会为这两个问题开一张带有注释支持的票。

对于那些想要执行 servlet 的人，我建议这篇文章：

[http://8b30b0.wordpress.com/2013/02/04/creating-a-basic-domino-servlet/#comments](http://8b30b0.wordpress.com/2013/02/04/creating-a-basic-domino-servlet/#comments)

但这里有一个更简化的 IServletFactory 版本，它可能更容易理解和工作。

```
package test;

import javax.servlet.Servlet;
import javax.servlet.ServletException;

import com.ibm.designer.runtime.domino.adapter.ComponentModule;
import com.ibm.designer.runtime.domino.adapter.IServletFactory;
import com.ibm.designer.runtime.domino.adapter.ServletMatch;

public class TestFactory implements IServletFactory {

private ComponentModule module;

public ServletMatch getServletMatch(String contextPath, String path)
        throws ServletException {
    System.out.println("TestFactory:getServletMatch");

    String servletPath = "";
    String pathInfo = path;
    return new ServletMatch(getWidgetServlet(),servletPath,pathInfo);        
} 

public void init(ComponentModule arg0) {
    System.out.println("TestFactory:init");
    this.module = arg0;
}

public Servlet getWidgetServlet() throws ServletException {
    return module.createServlet("com.pnc.cld.HelloWorld", "testServlet",null);
 } 

} 
```

# python - 有人可以向我解释隐含的“for循环”吗？

> ID：15274662
> 
> 赞同：1
> 
> 时间：2013-03-07T15:10:40.227
> 
> 标签：python, list-comprehension

非常抱歉，我不理解隐式 for 循环。所以我想我可以问问是否有人会为我解释更多。

我已经 - 非常痛苦 - 编写了以下隐式 for 循环：

```
ueberdata= [1,5,2,6,1,2,3,4,1,3,5,6]
order = [1,3,5]
ind = [list(ueberdata).index(i) for i in order] 
```

这给了我这些东西第一次出现的索引。

```
ind : 0,6,11 
```

到目前为止一切顺利。现在我想扩展这个例子。也许 ueberdata 更大。也许我现在想拥有所有索引。我很难过。我必须以某种方式嵌套这些 for 循环。有人可以帮助我理解这足以解决这个问题吗？

一些澄清（对不起，我真的需要更好地表达自己）：我本质上想要做的是绘制一个数据集。我想在我的情节上看到这 3 种类型的数据点。现在我的数据集当然长于 3 :)。我想绘制另一列，所以我需要这些索引。抱歉刚才说了，但我认为这可能会分散我的问题。我想绘制文件中的所有数据点，而不仅仅是第一组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:12:39.640

这就是所谓的“[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)”。

您的代码可以变得更简单，但不确定为什么要在已经拥有列表时重新创建它：

```
ind = [uberdata.index(i) for i in order] 
```

如果您想要更多索引，只需`order`更长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:20:02.247

如果你想要所有的索引，你可以这样做

```
>>> ueberdata= [1,5,2,6,1,2,3,4,1,3,5,6]
>>> order = [1,3,5]
>>> [[i for i,j in enumerate(ueberdata) if j==k] for k in order]
[[0, 4, 8], [6, 9], [1, 10]] 
```

如果列表可能非常大，那么创建帮助程序 defaultdict 会更有效

```
>>> from collections import defaultdict
>>> D = defaultdict(list)
>>> orderset = set(order)
>>> for i,j in enumerate(ueberdata):
...  if j in orderset:
...   D[j].append(i)
... 
>>> [D[i] for i in order]
[[0, 4, 8], [6, 9], [1, 10]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:25:24.490

从[python 文档](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)中，列表推导可以读作

> “括号中包含一个表达式，后跟一个 for 子句，然后是零个或多个 for 或 if 子句。结果将是一个新列表，该列表是在其后的 for 和 if 子句的上下文中评估表达式而产生的。”

```
[list(ueberdata).index(i) for i in order] 
```

在某种意义上类似于

```
ind=[]
for i in order:
  ind.append(list(ueberdata).index(i)) 
```

它不取决于列表的大小，回答您的第一个问题。

为了获取所有索引，我会使用一个辅助函数，比如

```
lambda value : [x for x in range(len(ueberdata)) if ueberdata[x] == value] 
```

# javascript - ajax调用进度条/进度状态

> ID：15274663
> 
> 赞同：-3
> 
> 时间：2013-03-07T15:10:41.817
> 
> 标签：javascript, jquery, html, ajax

我正在使用 ajax 调用，我需要在我的文本框中显示一些进度状态。这是我的ajax调用。

```
<input type="text" name="cm" id="cm" />

<script type="text/javascript" language="javascript">
    $('#cm').blur(function(){
        $.ajax({
            type:'get',
            url: "/validatecm/"+cmnumber,
            cache:false,
            async:false,
            data:cmnumber,
            success: function(data) {
                alert (data)
            },
            error: function(data) {
                alert(data)
            }
        });
    });
</script> 
```

在执行此 AJAX 调用时，我需要在我的文本框旁边显示一些进度状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:16:55.007

你可以有这样的东西。AJAX 是异步的。我没有发现这个的用例是同步的。因此，删除`async`标志。

```
$('#cm').blur(function(){
    $(this).next("img").show();
    $.ajax({
        type:'get',
        url: "/validatecm/"+cmnumber,
        cache:false,
        // async:false,
        data:cmnumber,
        success: function(data) {
               alert (data);
               $(this).next("img").hide();
        }
        error: function(data) {
            alert(data) }
    }
} 
```

上述脚本的一个小模拟将是：

```
$(document).ready(function(){
    $("input").blur(function(){
        $(this).next("img").show();
        var a = $(this);
        setTimeout(function(){
            a.next("img").hide();
            a.val("AJAX Load Complete...");
        }, 1000);
    });
}); 
```

**演示：[jsFiddle](http://jsfiddle.net/praveenscience/QS3RC/)。**

# php - PHP MySQL查询以奇怪的顺序显示结果

> ID：15274664
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:10:44.663
> 
> 标签：php, mysql

我在数据库表中有两组 4 个评分输入，一组`priority_id`为 19，另一`priority_id`组为 20。如果我在 phpMyAdmin 中运行下面的 sql 查询，它将返回`id`主键字段的值并将它们列在正确的顺序。如果我运行我的 php 文件并选择`priority_id`19 的值，它们会以正确的顺序显示在屏幕上。但是，如果我选择`priority_id`20 的值，则 id 值会以一种奇怪的、不合理的顺序显示在屏幕上。任何人都有想法可能导致这种情况？我已经尝试将其添加`order by`到 sql 查询中，但这似乎没有帮助。

```
$input_ids = array();

$query = "SELECT * FROM rating_inputs WHERE priority_id = '20'";
echo $query . "<br/>";

$result = mysql_query($query);
$z=0;
while($row=mysql_fetch_assoc($result)){
    $input_ids[$z] = $row['id'];
    echo "input id: " . $input_ids[$z] . "<br/>";
    $z=$z+1;
} 
```

这些是我的数据库字段及其数据。值字段目前为空。

编号 | priority_id | 类别 ID | 价值

```
53 | 19 | 1  |
54 | 19 | 4  |
55 | 19 | 10 | 
56 | 19 | 11 | 
57 | 20 | 1  | 
58 | 20 | 4  | 
59 | 20 | 10 | 
60 | 20 | 11 | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:13:39.263

记录在数据库中没有内在顺序。出于所有意图和目的，检索它们的顺序是随机的。如果它们按任何特定顺序排列，那是因为它们碰巧按该顺序存储或按该顺序在索引中遇到。

如果您期望特定顺序，请`ORDER BY`在查询中使用子句。

# asp.net-mvc - 在 MVC4 上使用 HttpClient 进行异步调用

> ID：15274670
> 
> 赞同：6
> 
> 时间：2013-03-07T15:11:09.827
> 
> 标签：asp.net-mvc, asp.net-4.5

我在 .net 4.5 中对这项新技术进行了一些尝试，我想检查此调用的代码以及我应该如何控制异步调用的错误或响应。该调用运行良好，我需要完全控制从我的服务返回的可能错误。

这是我的代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Newtonsoft.Json;

namespace TwitterClientMVC.Controllers
{
    public class Tweets
    {
        public Tweet[] results;
    }

    public class Tweet
    {
        [JsonProperty("from_user")]
        public string UserName { get; set; }

        [JsonProperty("text")]
        public string TweetText { get; set; }
    }
}

public async Task<ActionResult> Index()
{                                             
    Tweets model = null;

    HttpClient client = new HttpClient();

    HttpResponseMessage response = await client.GetAsync("http://mywebapiservice");

    response.EnsureSuccessStatusCode();

    model = JsonConvert.DeserializeObject<Tweets>(response.Content.ReadAsStringAsync().Result);

    return View(model.results);            
} 
```

这是更好的方法吗？或者我错过了什么？谢谢

我重构它，这个方法也是异步的吗？

```
public async Task<ActionResult> Index() 
    {
        Tweets model = null;
        using (HttpClient httpclient = new HttpClient())
        {
            model = JsonConvert.DeserializeObject<Tweets>(
                await httpclient.GetStringAsync("http://search.twitter.com/search.json?q=pluralsight")
            );
        }
        return View(model.results);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T15:16:12.660

> 这是更好的方法吗？

如果远程服务返回的状态码不是 2xx ，`response.EnsureSuccessStatusCode();`则会抛出异常。`IsSuccessStatusCode`因此，如果您想自己处理错误，您可能想使用该属性：

```
public async Task<ActionResult> Index()
{                                             
    using (HttpClient client = new HttpClient())
    {
        var response = await client.GetAsync("http://mywebapiservice");

        string content = await response.Content.ReadAsStringAsync();
        if (response.IsSuccessStatusCode)
        {
            var model = JsonConvert.DeserializeObject<Tweets>(content);
            return View(model.results);            
        }

        // an error occurred => here you could log the content returned by the remote server
        return Content("An error occurred: " + content);
    }
} 
```

# sql - 使用 SSIS 包加载数据时理解间歇性不一致的问题

> ID：15274671
> 
> 赞同：8
> 
> 时间：2013-03-07T15:11:11.217
> 
> 标签：sql, sql-server-2008, ssis, common-table-expression

**问题**

在过去的几个月里，下面描述的过程在运行的绝大多数时间里都没有任何问题（在 2008 r2 上）。然而，我们有三个错误连接数据的实例。问题是，这是什么原因造成的，我该如何补救？

```
DATA_PreImp

    sourceid    col01   col02   col03   col04   col...
    100001      John    Smith   
    100002      Calvin  Klein
    100003      Peter   Parker
    100004      Moe     Greene 
```

通常呈现的结果是属性正确连接到 Items_Main 但有时（小于 1%）顺序被打乱，因此 col01 的值与其余列的值不连接到相同的 Items_Main。

任何关于造成这种情况的原因的见解将不胜感激。

**数据移动过程**

我们有一个 SSIS 包，它将数据从名为 DATA_PreImp 的平面表传输到由三个相关表（基于属性）组成的结构。

*   Items_Main 应该为 DATA_PreImp 中的每一行包含一行
*   Items_Featurevalues 包含 DATA_PreImp 中一行的每一列值的一行
*   Items_MainRel 包含 Items_Main 和 Items_FeatureValues 之间的连接

SSIS 包中的第一步将数据从 DATA_PreImp 插入到 Items_Main，并将生成的标识符插入到空 DATA_PreImpMappingTMP 表的 TARGET_ID 列中。

```
insert into items_main(creationdate, status)
output inserted.itemid into DATA_PreImpMappingTMP(TARGET_ID)
select getdate(), '0' from data_preimp
order by sourceid asc; 
```

SSIS 包中的第二步用 TARGET_ID（最初是 Itemid）和特征标识符（在本例中为 5）填充 Items_MainRel 表。

```
insert into items_mainrel(itemid, featureid)
output inserted.itemrelid into DATA_PreImpMapping2TMP(INDREL_ID)
select TARGET_ID, 5 from DATA_PreImpMappingTMP
order by TARGET_ID asc; 
```

第三步是用来自 DATA_PreImp 的 SOURCE_ID 填充 DATA_PreImpMapping2TMP 表中的 SOURCE_ID 列。

```
with cte as (select sourceid, row_number() over (order by sourceid asc) as row from data_preimp)
update m set m.SOURCE_ID = s.sourceid, m.FEAT_ID = 5
from DATA_PreImpMapping2TMP as m
join cte as s on s.row = m.ROW; 
```

最后一步是用来自 DATA_PreImpMapping2TMP 和 DATA_PreImp 的数据填充 Items_FeatureValues 表。

```
insert into items_featurevalues(itemrelid, languageid, fnvarchar)
select DATA_PreImpMapping2TMP.INDREL_ID, 0, data_preimp.col01
from DATA_PreImpMapping2TMP
join data_preimp on (DATA_PreImpMapping2TMP.SOURCE_ID = data_preimp.sourceid)
where FEAT_ID = 5 
```

**数据表结构**

以下是创建场景所需的内容：

```
CREATE TABLE [dbo].[DATA_PreImp](
    [sourceid] [bigint] IDENTITY(1,1) NOT NULL,
    [col01] [nvarchar](500) NULL,
    [col02] [nvarchar](500) NULL,
    [col03] [nvarchar](500) NULL,
    [col04] [nvarchar](500) NULL,
    [col05] [nvarchar](500) NULL,
    [col06] [nvarchar](500) NULL,
    [col07] [nvarchar](500) NULL,
    [col08] [nvarchar](500) NULL,
    [col09] [nvarchar](500) NULL,
    [col10] [nvarchar](500) NULL,
 CONSTRAINT [PK_DATA_PreImp] PRIMARY KEY CLUSTERED 
(
    [sourceid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[DATA_PreImpMappingTMP](
    [ROW] [int] IDENTITY(1,1) NOT NULL,
    [TARGET_ID] [int] NULL,
PRIMARY KEY CLUSTERED 
(
    [ROW] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[Items_Main](
    [Itemid] [int] IDENTITY(1,1) NOT NULL,
    [creationDate] [smalldatetime] NOT NULL,
    [status] [int] NOT NULL,
    [purchdate] [smalldatetime] NULL,
    [logindate] [smalldatetime] NULL,
 CONSTRAINT [PK_Items_Main] PRIMARY KEY CLUSTERED 
(
    [Itemid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[DATA_PreImpMapping2TMP](
    [ROW] [int] IDENTITY(1,1) NOT NULL,
    [SOURCE_ID] [int] NULL,
    [INDREL_ID] [int] NULL,
    [FEAT_ID] [int] NULL,
PRIMARY KEY CLUSTERED 
(
    [ROW] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[Items_Features](
    [featureId] [int] IDENTITY(1,1) NOT NULL,
    [featureRef] [varchar](15) NOT NULL,
    [featureName] [varchar](50) NOT NULL,
    [creationDate] [smalldatetime] NOT NULL,
    [status] [int] NOT NULL,
    [fieldType] [varchar](50) NOT NULL,
    [featureType] [int] NOT NULL,
    [featureDesc] [varchar](500) NULL,
 CONSTRAINT [PK_Items_Features] PRIMARY KEY CLUSTERED 
(
    [featureId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]) ON [PRIMARY]

CREATE TABLE [dbo].[Items_MainRel](
    [ItemRelId] [int] IDENTITY(1,1) NOT NULL,
    [Itemid] [int] NOT NULL,
    [featureId] [int] NOT NULL,
 CONSTRAINT [PK_Items_MainRel] PRIMARY KEY CLUSTERED 
(
    [ItemRelId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[Items_FeatureValues](
    [valueId] [int] IDENTITY(1,1) NOT NULL,
    [ItemRelId] [int] NOT NULL,
    [languageId] [int] NOT NULL,
    [FnVarChar] [nvarchar](250) NULL,
    [FInt] [int] NULL,
    [FImage] [int] NULL,
    [FNText] [ntext] NULL,
    [FSmallDateTime] [smalldatetime] NULL,
 CONSTRAINT [PK_Items_FeatureValues] PRIMARY KEY CLUSTERED 
(
    [valueId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO    

ALTER TABLE [dbo].[Items_MainRel]  WITH CHECK ADD  CONSTRAINT [FK_Items_MainRel_Items_Features] FOREIGN KEY([featureId])
REFERENCES [dbo].[Items_Features] ([featureId])
GO

ALTER TABLE [dbo].[Items_MainRel] CHECK CONSTRAINT [FK_Items_MainRel_Items_Features]
GO

ALTER TABLE [dbo].[Items_MainRel]  WITH CHECK ADD  CONSTRAINT [FK_Items_MainRel_Items_Main] FOREIGN KEY([Itemid])
REFERENCES [dbo].[Items_Main] ([Itemid])
GO

ALTER TABLE [dbo].[Items_MainRel] CHECK CONSTRAINT [FK_Items_MainRel_Items_Main]
GO

ALTER TABLE [dbo].[Items_FeatureValues]  WITH CHECK ADD  CONSTRAINT [FK_Items_FeatureValues_Items_MainRel] FOREIGN KEY([ItemRelId])
REFERENCES [dbo].[Items_MainRel] ([ItemRelId])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[Items_FeatureValues] CHECK CONSTRAINT [FK_Items_FeatureValues_Items_MainRel]
GO

INSERT INTO DATA_PreImp (col01,col02,col03,col04) 
VALUES('John', 'Smith', '1964', 'NewYork'),
        ('Calvin', 'Klein', '1960', 'Washington D. C.'),
        ('Peter', 'Parker', '1974', 'Losangles'),
        ('Moe', 'Greene', '1928', 'Lasvegas')

INSERT INTO Items_Features (featureRef, featureName, creationDate, [status], fieldType, featureType, featureDesc)
VALUES ('firstname','First_Name', GETDATE(), 0, 'FnVarChar', 3, 'FirstName'),
    ('lastname','Last_Name', GETDATE(), 0, 'FnVarChar', 3, 'LastName'),
    ('Birth','Birth', GETDATE(), 0, 'FnVarChar', 3, 'Birth'),
    ('City','City', GETDATE(), 0, 'FnVarChar', 3, 'City') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T19:00:41.033

问题是计算列 CUST_CD。经过大量研究，BULK INSERT 似乎不喜欢复杂的计算类型（请参阅[在 SSIS 数据加载中使用 SQL Server 空间类型](https://stackoverflow.com/questions/4031909/using-sql-server-spatial-types-in-ssis-data-load)）。解决方案是删除计算列并将其设为 varchar(20) NULL。然后我创建了一个新的执行 SQL 任务，它使用计算值更新任何 NULL 行。

# jquery - 加载后的主干js事件

> ID：15274673
> 
> 赞同：2
> 
> 时间：2013-03-07T15:11:12.427
> 
> 标签：jquery, backbone.js

我有一个 div：

```
<div class = "desc"></div> 
```

此 div 位于主干视图加载的模板中。

这是主干视图： DetailsView = Backbone.View.extend({ events: {.....});

我想在模板加载时调用以下 jquery 函数：

我怎样才能做到这一点？

```
 $('#desc').expander({
     slicePoint: 50,
     expandText: 'Click Here to Read More',
     userCollapseText: 'Hide Text'
 }); 
```

它来自扩展器 jquery 插件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:16:55.857

您可以执行以下操作：

```
... Rest of View...

render: function() {
    // do your normal render stuff
    this.afterRender();
},

afterRender: function() {
    // do the stuff you want to do after the template is rendered
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:07:04.683

可以这样做：

```
initialize: function () {
    this.once('renderEvent', function () {
        // that will be executed just once after the view has been rendered
    });
},

render: function () {
    // display html
    // ...
    this.trigger('renderEvent');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T05:46:39.717

您是否在标题中包含了您的 JS 文件？或在页脚部分。这是实施过程中发生的一个常见问题。

# c++ - CMake 无法在 Linux 中编译

> ID：15274675
> 
> 赞同：0
> 
> 时间：2013-03-07T15:11:25.203
> 
> 标签：c++, c, makefile, cmake

我正在更改在 Windows 上工作的 CMake 文件以在 Linux 中创建共享对象。

CMake 文件生成一个 makefile，当我在 Linux 上“make”时，它构建了 foo 库的对象，并显示了所有四个库的链接。例如：

> 链接 CXX 静态库 lib_foo_d.a

和最终的共享对象

> 链接 CXX 静态库 lib_scen_files_d.a

但最后它显示

> /usr/bin/ld: lib_foo3/lib_foo3_d.a(chap_alt_scence_defs.cpp.o):
> 重定位 R_X86_64_32 反对 `.rodata' 制作共享对象时不能使用；
> 使用 -fPIC
> lib_foo3/lib_foo3_d.a 重新编译：无法读取符号：错误值
> collect2：ld 返回 1 退出状态

我尝试了其他一些选择，但没有任何乐趣。下面是我的 CMakeLists.txt。任何帮助/批评都会对我有益。

```
CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )
CMAKE_POLICY( SET CMP0017 NEW ) 

PROJECT( disk_space_model )
INCLUDE( ../libs/helper_functions.cmake )
INCLUDE_THIRD_PARTY_SFC()
find_path_for_libs()

add_s_library( lib_foo1 )
add_s_library( lib_foo2) 
add_s_library( lib_foo3) 
add_s_library( lib_foo4) 

SET(    HEADER_FILES 
        stdafx.h
        INS_sensor_model.h
)

SET(    SOURCE_FILES
        Disk_space_model.cpp
)

SET(    RESOURCE_FILES 
        "Disk Space DLL.rc"
        resource.h
)

COMMON_SETUP()
set( LIB_FILES 
        lib_foo
        lib_foo1
        lib_foo3 
        lib_foo4 )

set(CMAKE_SHARED_LINKER_FLAGS "-Wl,--export-all-symbols")
ADD_LIBRARY( disk_space_model SHARED ${SOURCE_FILES} ${HEADER_FILES} ${RESOURCE_FILES}  ${CMAKE_HELPER_FILES} )
SET_OUTPUT_DIRS( disk_space_model )
TARGET_LINK_LIBRARIES( disk_space_model ${LIB_FILES} ) 
```

谢谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:31:32.160

链接器告诉您出了什么问题：该对象在共享库中使用，但未使用`-fPIC`. 您需要以某种方式添加此标志。

使用 CMake 2.8.9 或更高版本时，您可以简单地`POSITION_INDEPENDENT_CODE`在相关目标（静态库）上设置属性。

在 CMake 的早期版本中，您需要将标志直接添加到目标的`COMPILE_FLAGS`属性中（在编译器的正确拼写中，可能只是`-fPIC`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:29:08.093

为了在 Linux 上构建共享库，所有链接到它的目标文件的源都必须编译为可重定位的（链接器抱怨的 -fPIC 选项）。您尝试将静态库 lib_foo1 lib_foo2 lib_foo3 等链接到您的共享库中，但它失败了。所以可能的解决方案：

*   构建每个库 lib_foo1 lib_foo2 .. 的共享版本 (.so) 以及静态版本 (.a)
*   使用 -fPIC 参数构建静态库
*   不要将静态库链接到共享库，而是将它们链接到应用程序。如果在您的共享库中使用来自静态库的函数，这可能是不可能的。

# java - Java中的反射和继承

> ID：15274676
> 
> 赞同：3
> 
> 时间：2013-03-07T15:11:26.323
> 
> 标签：java, reflection

我有以下代码片段：

```
class BaseClass {
    public Integer getX() {
        return 5;
    }
}

class InheritedClass extends BaseClass implements Interface {
}

interface Interface {
    public Number getX();
}

public class Test5 {
    public static void main(String[] args) throws Exception {
        System.out.println(InheritedClass.class.getMethod("getX").getReturnType());
    }
} 
```

这段代码返回`java.lang.Number`，这对我来说很奇怪，因为 BaseClass 的`getX`方法返回`java.lang.Integer`。最有趣的是，如果`BaseClass`实现了Interface，返回的类型是java.lang.Integer...这是正常的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:24:22.740

这是我认为会发生的事情。

通过同时扩展`BaseClass`和实现`Interface`，子类承诺提供两种`getX()`方法：

```
public Integer getX();
public Number getX(); 
```

由于您不能重载返回类型，因此只能有一种方法。此外，它的返回类型必须是`Number`而不是`Integer`（因为您可以将后者转换为前者，反之则不行）。

为了协调上述所有内容，编译器会自动在 中生成以下方法`InheritedClass`：

```
 public java.lang.Number getX();
    Code:
       0: aload_0       
       1: invokevirtual #22                 // Method getX:()Ljava/lang/Integer;
       4: areturn 
```

如您所见，它具有 in 方法的签名`Interface`，但会自动委托给 in 方法`BaseClass`（带有隐式向上转换）。

这种自动生成的方法是您的反射代码正在使用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:16:59.607

是的，这很正常：

*   `Integer`是一个子类`Number`
*   从 Java 5.0 开始，Java 中的派生类或接口实现方法可以返回父类或接口中声明的返回类型的子类。这称为[*返回类型协方差*](https://stackoverflow.com/q/10134571/335858)。
*   因为`InheritedClass`实现了`Interface`，所以使用来自该接口的返回类型`getX`，即`Number`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:44:15.573

JLS 的相关部分是[§8.4.8.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.4)：

> 一个类可以继承多个具有重写等效签名的方法（[第 8.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)）。
> 
> 如果其中一个继承的方法不是`abstract`......则`abstract`认为不是的方法会覆盖并因此实现代表继承它的类的所有其他方法。

我们在这里考虑的两种方法是：

*   `public Integer getX();`
*   `public abstract Number getX();`

由于`BaseClass.getX`is not `abstract`，并且它是可[返回类型可替换的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.5)（`Integer`是 的子类`Number`）`Interface.getX`，`BaseClass.getX`因此选择覆盖`Interface.getX`。

这很奇怪，因为这不是您看到的结果。但是，如果你尝试在 中定义一个方法`public Number getX()`，`InheritedClass`你会收到一个错误，这与上面的一致。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T15:27:25.180

这是包含泛型的 Java 框架 1.6 的功能。Integer 和 Double 是 Number 的子类型。

# jquery - 这可以用更少的js代码来优化吗？

> ID：15274677
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:11:28.800
> 
> 标签：jquery

目前有 3 个对话框用于 3 个不同的链接。这可以用更少的代码编写吗？

js

```
$("a.link1").click(function(event){
    var msg = confirm('link 1, or cancel');

    if(msg){
        // go to destination
        return true;
    }else{
        // cancel
        return false;
    }
});

$("a.link2").click(function(event){
    var msg = confirm('link 2, or cancel');

    if(msg){
        // go to destination
        return true;
    }else{
        // cancel
        return false;
    }
});

$("a.link3").click(function(event){
    var msg = confirm('link 3, or cancel');

    if(msg){
        // go to destination
        return true;
    }else{
        // cancel
        return false;
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:16:37.433

在所有链接上使用相同的类，将您的消息放入每个链接的数据属性中，然后

```
$('a.link').click(function() { 
  return confirm($(this).data('message'));
} 
```

html:

```
<a href="wherever.com" data-message="Are you sure?">Go to wherever</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:12:58.017

您可以使用带有通配符的属性选择器来绑定事件，并使用一些模式来制作确认链接消息。

```
$("a[class^=link]").click(function(event){
    var msg = confirm('link 1, or cancel');

    if(msg){
        // go to destination
        return true;
    }else{
        // cancel
        return false;
    }
}); 
```

如果您没有带有模式的链接，您可以使用一些数组来存储链接

```
arr = {"link1", "link2", "link3"};
$("a[class^=link]").click(function(event){
    classIndex = this.className.replace('link', '')  

    var msg = confirm(arr[classIndex-1]+ ', or cancel');

    if(msg){
        // go to destination
        return true;
    }else{
        // cancel
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:14:24.640

```
$('a[class^=link]').click(function() {

    if ( confirm($(this).attr('class') + ', or cancel') ) {   
        return true;
    }

    return false;
}); 
```

还是您需要文本“链接”和数字之间的空格？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:17:35.840

是的，你可以这样做：

```
$("a.confirmlink").click(function(){
   return confirm("Go to " + $(this).attr("href") + "?");
}); 
```

# apache - 通过 LAN 访问多个 MAMP Pro 站点？

> ID：15274693
> 
> 赞同：5
> 
> 时间：2013-03-07T15:12:07.487
> 
> 标签：apache, mamp, virtualhost, lan

我使用 MAMP Pro 2.1.1 在 Mac 10.8.3 上开发我的网站。

我为每个项目创建一个主机。在我的本地机器上完美运行。但是，现在我需要让我的 iPad 和其他设备通过我们的 LAN 访问它。

我已经搜索和谷歌搜索，并尝试实施[此处找到](https://stackoverflow.com/questions/11092154/is-there-a-definitive-guide-for-setting-up-mamp-pro-so-local-network-users-can-v)的步骤，但无济于事。

iPad 只需将 Mac 的 IP 地址输入 Mobile Safari 即可访问 MAMP 上的主“本地主机”。所以它可以看到MAMP。

问题是访问其他虚拟主机之一。例如，我创建了一个虚拟主机“myhost”，将 IP 设置为 Mac 的 IP，端口设置为 8050。

但 iPad 不会加载它。我尝试将网站的权限设置为每个人的读/写权限。我尝试以 www/mysql 和我自己（默认）身份运行。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:02:18.163

我认为您必须在设备上编辑“主机”文件或尝试对所有网站使用“本地主机”并在可能的情况下通过 apache 端口将它们分开。

# python - 从 sklearn 导入时出现 ImportError：无法导入名称 check_build

> ID：15274696
> 
> 赞同：127
> 
> 时间：2013-03-07T15:12:12.280
> 
> 标签：python, numpy, scipy, scikit-learn

尝试从 sklearn 导入时出现以下错误：

```
>>> from sklearn import svm

Traceback (most recent call last):
  File "<pyshell#17>", line 1, in <module>
   from sklearn import svm
  File "C:\Python27\lib\site-packages\sklearn\__init__.py", line 16, in <module>
   from . import check_build
ImportError: cannot import name check_build 
```

我正在使用 python 2.7、scipy-0.12.0b1 superpack、numpy-1.6.0 superpack、scikit-learn-0.11 我有一台 Windows 7 机器

我已经检查了这个问题的几个答案，但没有一个给出解决这个错误的方法。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2014-10-08T11:03:26.847

安装 scipy 后为我工作。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-07-25T22:53:14.547

```
>>> from sklearn import preprocessing, metrics, cross_validation

Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    from sklearn import preprocessing, metrics, cross_validation
  File "D:\Python27\lib\site-packages\sklearn\__init__.py", line 31, in <module>
    from . import __check_build
ImportError: cannot import name __check_build
>>> ================================ RESTART ================================
>>> from sklearn import preprocessing, metrics, cross_validation
>>> 
```

因此，只需尝试重新启动 shell！

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-06-06T04:09:47.707

我的 Python 3.6.5 64 位 Windows 10 解决方案：

1.  `pip uninstall sklearn`
2.  `pip uninstall scikit-learn`
3.  `pip install sklearn`

无需重新启动命令行，但您可以根据需要执行此操作。我花了一天时间来修复这个错误。希望这有帮助。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-26T01:02:22.093

安装`numpy`后`scipy`，`sklearn` 还是有错误

解决方案：

`Path`为 Python 和`PYTHONPATH`环境变量设置系统变量

系统变量：添加`C:\Python34`到路径用户变量：添加新：（名称）`PYTHONPATH`（值）`C:\Python34\Lib\site-packages;`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-07T16:02:07.183

通常当我遇到这类错误时，打开`__init__.py`文件并四处寻找会有所帮助。转到目录`C:\Python27\lib\site-packages\sklearn`并确保有一个称为`__check_build`第一步的子目录。在我的机器上（安装了工作的 sklearn、Mac OSX、Python 2.7.3）我有`__init__.py`, `setup.py`、它们的关联`.pyc`文件和一个二进制`_check_build.so`.

在该目录中四处`__init__.py`寻找，下一步我将去`sklearn/__init__.py`注释掉 import 语句—— check_build 东西只是检查东西是否被正确编译，它似乎没有做任何事情，只是调用一个预编译的二进制。当然，这需要您自担风险，并且（可以肯定）是一种解决方法。如果您的构建失败，您可能很快就会遇到其他更大的问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-10-10T19:05:55.723

我在 Windows 上遇到了同样的问题。[按照这个答案的建议，通过从](https://stackoverflow.com/a/34710032/2314737)[http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)安装 Numpy+MKL 解决了这个问题（建议在其他依赖它的软件包之前安装 numpy+mkl）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-01-24T14:54:55.360

从 python.org 安装新的 64 位版本的 Python 3.4 后，我在导入 SKLEARN 时遇到问题。

原来是 SCIPY 模块坏了，当我尝试“导入 scipy”时，alos 失败了。

解决方案是卸载 scipy 并使用 pip3 重新安装：

```
C:\> pip uninstall scipy

[lots of reporting messages deleted]

Proceed (y/n)? y
  Successfully uninstalled scipy-1.0.0

C:\Users\>pip3 install scipy

Collecting scipy
  Downloading scipy-1.0.0-cp36-none-win_amd64.whl (30.8MB)
    100% |████████████████████████████████| 30.8MB 33kB/s
Requirement already satisfied: numpy>=1.8.2 in c:\users\johnmccurdy\appdata\loca
l\programs\python\python36\lib\site-packages (from scipy)
Installing collected packages: scipy
Successfully installed scipy-1.0.0

C:\Users>python
Python 3.6.4 (v3.6.4:d48eceb, Dec 19 2017, 06:54:40) [MSC v.1900 64 bit (AMD64)]
 on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import scipy
>>>
>>> import sklearn
>>> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-03-01T01:58:09.603

如果您使用 Anaconda 2.7 64 位，请尝试

```
conda upgrade scikit-learn 
```

并重新启动python shell，这对我有用。

当我遇到同样的问题并解决它时进行第二次编辑：

```
conda upgrade scikit-learn 
```

也适合我

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-01-21T13:59:54.037

其他答案都不适合我。经过一些修补后，我卸载了 sklearn：

```
pip uninstall sklearn 
```

然后我从这里删除了 sklearn 文件夹：（调整你的系统和 python 版本的路径）

```
C:\Users\%USERNAME%\AppData\Roaming\Python\Python36\site-packages 
```

并从本网站的轮子安装它：[链接](https://www.lfd.uci.edu/~gohlke/pythonlibs/)

该错误可能是因为与安装在其他地方的 sklearn 存在版本冲突。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-15T06:18:22.613

对我来说，我通过使用最新的 python 版本（3.7）从新安装 Anaconda 将现有代码升级到新设置为此，

```
from sklearn import cross_validation, 
from sklearn.grid_search import GridSearchCV 
```

到

```
from sklearn.model_selection import GridSearchCV,cross_validate 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-06-17T06:17:45.123

无需卸载然后重新安装 sklearn

试试这个：

```
from sklearn.model_selection import train_test_split 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-11-03T14:57:17.150

我有同样的问题重新安装anaconda为我解决了这个问题

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-03-24T15:54:35.247

在窗口中：

我试图从 shell 中删除 sklearn：pip uninstall sklearn，然后重新安装它但不起作用..

解决方案：

```
1- open the cmd shell.
2- cd c:\pythonVERSION\scripts
3- pip uninstall sklearn
4- open in the explorer: C:\pythonVERSION\Lib\site-packages
5- look for the folders that contains sklearn and delete them ..
6- back to cmd: pip install sklearn 
```

# wpf - 从字节数组创建 BitmapImage

> ID：15274699
> 
> 赞同：6
> 
> 时间：2013-03-07T15:12:25.513
> 
> 标签：wpf, bitmapimage, notsupportedexception

我正在创建一个包含任意值的字节数组，并希望将其转换为 BitmapImage。

```
 bi = new BitmapImage();
    using (MemoryStream stream = new MemoryStream(data))
    {
      try
      {
        bi.BeginInit();
        bi.CacheOption = BitmapCacheOption.OnLoad;
        bi.StreamSource = stream;
        bi.DecodePixelWidth = width;

        bi.EndInit();

      }
      catch (Exception ex)
      {
        return null;
      }
    } 
```

这段代码一直给我一个 NotSupportedException。如何从任何字节数组创建 BitmapSource？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T09:01:39.487

给定一个字节数组，其中每个字节代表一个像素值，您可以创建如下所示的灰度位图。您需要指定位图的宽度和高度，这当然必须与缓冲区大小相匹配。

```
byte[] buffer = ... // must be at least 10000 bytes long in this example

var width = 100; // for example
var height = 100; // for example
var dpiX = 96d;
var dpiY = 96d;
var pixelFormat = PixelFormats.Gray8; // grayscale bitmap
var bytesPerPixel = (pixelFormat.BitsPerPixel + 7) / 8; // == 1 in this example
var stride = bytesPerPixel * width; // == width in this example

var bitmap = BitmapSource.Create(width, height, dpiX, dpiY,
                                 pixelFormat, null, buffer, stride); 
```

* * *

每个字节值还可以表示调色板的索引，在这种情况下，您必须指定`PixelFormats.Indexed8`并且当然还要传入适当的调色板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:05:20.630

字节数组必须包含有效的图像数据（PNG / JPG / BMP）。 ~~如果您删除 using-block 并且数据有效，那么您的代码应该可以工作。BitmapImage 似乎不会立即加载图像，因此它无法在之后加载它，因为流已经被释放。~~

“任意值”是什么意思？随机 RGB 值？然后我建议使用[Bitmap](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.setpixel.aspx)类并将生成的 Bitmap 保存在 Memorystream 中。

如果您只想将 Byte[] 绑定到用户界面中的图像控件：直接绑定到数组。它无需转换器即可工作。

# knockout.js - 复制可观察到的绑定到对话

> ID：15274702
> 
> 赞同：1
> 
> 时间：2013-03-07T15:12:32.977
> 
> 标签：knockout.js

我有一个 foreach (over Foos) 表，用户点击一个项目，这个方法被调用：

```
 AddFoo = function (addingItem) {
        var addingItem = jQuery.extend(true, {}, existingObservableBoundToJqueryDialogue);
        this.Foos.push(addingItem);  //EditingItem is bound to the add dialogue, and I want a new observable with the same properties not bound to the dialogue

    }; 
```

我遇到的麻烦是，如果我去编辑表中的这个 observable（新的 addItem ），它会更改以这种方式添加的所有项目（每个 addedItem ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:18:16.490

非常快速的解决方案是使用[淘汰映射](http://knockoutjs.com/documentation/plugins-mapping.html)插件创建普通的香草 json 对象，然后从中创建新的淘汰模型：

```
var addingItem = ko.mapping.fromJS(ko.mapping.toJS(existingObservableBoundToJqueryDialogue)); 
```

这将展开 observable，然后从其值创建另一个 :)

[jsfiddle 上的工作示例](http://jsfiddle.net/BvCL2/)

# gwt - GWT 将字段动态添加到编辑器

> ID：15274703
> 
> 赞同：0
> 
> 时间：2013-03-07T15:12:34.943
> 
> 标签：gwt, dynamic, editor

是否可以在 GWT 中动态构建编辑器？我见过的所有示例都使用 uiBinder 和 @UiField 注解来静态定义要显示的可编辑字段。如果在运行时，我想根据应用程序的某些设置添加一个附加字段，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:45:32.883

Editor Framework 的代码生成器需要知道要生成什么。它还借助注释从视图（编辑器）的声明字段中提取该信息，以生成一些支持的 java 类。

> 因此，如果您不声明该字段，那么代码生成器将无法为其生成支持代码。结果值不会绑定到编辑器。
> 
> 但是，如果您要动态添加的字段都是相同类型的，那么您就有机会使用 ListEditors 或 CompositeEditors 并为您的新视图 (Editor) 创建一个新的适配器来实现此要求。

# sql - 将多张发票组合在一起

> ID：15274706
> 
> 赞同：0
> 
> 时间：2013-03-07T15:12:41.393
> 
> 标签：sql, sql-server

一笔付款可以有多个发票，因此查询表或结果集可能会带回多行。

我该如何阻止这个？

```
Customer Name   Payment no   Invoice No
-------------   ----------   ----------    
Dave A          1            10
Dave T          2            10
Dave T          2            12 
```

所以我想要：

```
Customer Name   Payment no   Invoice No
-------------   ----------   ----------    
Dave A          1            10
Dave T          2            10, 12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:15:39.803

```
SELECT
     [Customer Name], [Payment no],
     STUFF(
         (SELECT ',' + CAST([Invoice No] AS VARCHAR(10))
          FROM TableName
          WHERE [Customer Name] = a.[Customer Name] AND
                [Payment no] = A.[Payment no]
          FOR XML PATH (''))
          , 1, 1, '')  AS InvoiceList
FROM TableName AS a
GROUP BY [Customer Name], [Payment no] 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/01130/3)

# lwjgl - 创建一个最大化的 lwjgl 窗口

> ID：15274707
> 
> 赞同：4
> 
> 时间：2013-03-07T15:12:42.740
> 
> 标签：lwjgl

如何以编程方式创建最大化的 lwjgl 窗口或使已创建的显示最大化？

*注意：我没有问如何为显示器设置全屏模式。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T18:48:06.690

Display.setResizable(true)

this will enable the maximize button.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-31T20:56:44.897

我使用了网站上的 LWJGL 示例，它获取了可能的显示模式并将其设置为全屏中的最佳模式。只需创建另一个类并使用此代码！

```
public class DisplayConfig {

//This is the Class that lets us switch between full screen
//and window mode.
public void setDisplayMode(int width, int height, boolean fullscreen){

    //If the display mode we are trying to achieve is already running
    //we just jump straight back out.
    if((Display.getDisplayMode().getWidth() == width) && 
            (Display.getDisplayMode().getHeight() == height) &&
            (Display.isFullscreen() == fullscreen)){
        return;
    }
    try{
        DisplayMode targetDisplayMode = null;

        //if we are in full screen mode we will have to check and iterate
        //through the computers available display modes to get back to
        //where we started
        if(fullscreen){
            DisplayMode[] modes = Display.getAvailableDisplayModes();
            int freq =0;
            for (DisplayMode displayMode : modes) {
                System.out.println(displayMode.getWidth()+" "+displayMode.getHeight());
            }

            for (int i = 0; i < modes.length; i++) {
                DisplayMode current = modes[i];
                if((current.getWidth() == width) && (current.getHeight() == height)){
                    if((targetDisplayMode == null) || (current.getFrequency() >= freq)){
                        if((targetDisplayMode == null) || (current.getBitsPerPixel() > targetDisplayMode.getBitsPerPixel())){
                            targetDisplayMode = current;
                            freq = targetDisplayMode.getFrequency();
                        }
                    }
                    if((current.getBitsPerPixel() == Display.getDesktopDisplayMode().getBitsPerPixel()) &&
                            (current.getFrequency() == Display.getDesktopDisplayMode().getFrequency())){
                        targetDisplayMode = current;
                        break;
                    }
                }
            }
        } else {
            targetDisplayMode = new DisplayMode(width, height);
        }
        if (targetDisplayMode == null){
            System.out.println("Failed to find value mode: "+width+"x"+height+" fs="+fullscreen);
            return;
        }
        Display.setDisplayMode(targetDisplayMode);
        Display.setFullscreen(fullscreen);

    } catch (LWJGLException e){
        System.out.println("Unable to setup mode "+width+"x"+height+" fullscreen="+fullscreen + e);
    }
}   
} 
```

[http://lwjgl.org/wiki/index.php?title=LWJGL_Basics_5_（全屏）](http://lwjgl.org/wiki/index.php?title=LWJGL_Basics_5_(Fullscreen))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:16:05.983

```
Dimension screenDimensions = Toolkit.getDefaultToolkit().getScreenSize();
screenDimensions.width;
screenDimensions.height;
    // this gets the height and width of your screen
    // and 
Display.setDisplayMode(new DisplayMode(screenDimensions.width, screenDimensions.height)); 
```

# r - 按设定的观察次数对变量进行分箱

> ID：15274710
> 
> 赞同：3
> 
> 时间：2013-03-07T15:12:57.627
> 
> 标签：r

快速提问。我以多种不同的方式对变量进行分类以进行探索性数据分析。假设我有一个名为`var`data.frame的变量`df`。

```
df$var<-c(1,2,8,9,4,5,6,3,6,9,3,4,5,6,7,8,9,2,3,4,6,1,2,3,7,8,9,0) 
```

到目前为止，我采用了以下方法（下面的代码）：

```
#Divide into quartiles
df$var_quartile <- with(df, cut(var, breaks=quantile(var, probs=seq(0,1, by=.25)), include.lowest=TRUE))
# Values of var_quartile
> [0,3],[0,3],(7.25,9],(7.25,9],(3,5],(3,5],(5,7.25],[0,3],(5,7.25],(7.25,9],[0,3],(3,5],(3,5],(5,7.25],(5,7.25],(7.25,9],(7.25,9],[0,3],[0,3],(3,5],(5,7.25],[0,3],[0,3],[0,3]

#Bin into increments of 2
df$var_bin<- cut(df[['var']],2, include.lowest=TRUE, labels=1:2)
# Values of var_bin
> 1 1 2 2 1 2 2 1 2 2 1 1 2 2 2 2 2 1 1 1 2 1 1 1 2 2 2 1 
```

我想做的最后一件事是将变量按时间顺序排序后分成 10 个观察的部分。这是在找到中位数后进行拆分的相同方法（计数到中间观察值），只是我想以 10 个观察值为增量进行计数。

使用我的示例，这将分为`var`以下部分：

```
0,1,1,2,2,2,3,3,3,3
4,4,4,5,5,6,6,6,6,7
7,8,8,8,9,9,9 
```

**注意——我需要在非常大的数据集中运行这个操作（通常是 3-600 万个宽幅观察）。**

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:58:02.150

`cut_number()`from **ggplot2**旨在将数字向量切割成包含相等数量点的间隔。在您的情况下，您可以像这样使用它：

```
library(ggplot2)
split(var, cut_number(var, n=3, labels=1:3))
# $`1`
#  [1] 1 2 3 3 2 3 1 2 3 0
# 
# $`2`
# [1] 4 5 6 6 4 5 6 4 6
# 
# $`3`
# [1] 8 9 9 7 8 9 7 8 9 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T15:36:54.083

```
vec <- c(1,2,8,9,4,5,6,3,6,9,3,4,5,6,7,8,9,2,3,4,6,1,2,3,7,8,9,0) # your vector

nObs <- 10 # number of observations per bin

# create data labels
datLabels <- ceiling(seq_along(vec)/nObs)[rank(vec, ties.method = "first")] 

# test data labels:
split(vec, datLabels)

$`1`
 [1] 1 2 3 3 2 3 1 2 3 0

$`2`
 [1] 4 5 6 6 4 5 6 7 4 6

$`3`
 [1] 8 9 9 8 9 7 8 9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:20:17.920

你的意思是这样的吗？

```
x <- sample(100)
binSize <- 10
table(floor(x/binSize)*binSize) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-04T22:59:26.637

我在不使用剪切的情况下创建了相同大小的组。

```
# number_of_groups_wanted  = number of rows / divisor in ceiling code  
# therefore divisor in ceiling code should be =  number of rows / number_of_groups_wanted, 
# divisor in ceiling code = (nrow(df)/number_of_groups_wanted)  
# min assigns every tied element to the lowest rank 
number_of_groups_wanted = 100 # put in the number of groups you want
df$group = ceiling(rank(df$var_to_group, ties.method = "min")/(nrow(df)/number_of_groups_wanted)) 

df$rank = rank(df$var_to_group, ties.method = "min") # this line is just used to check data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T15:36:55.030

这应该这样做。

```
df$var_bin<- cut(df[['var']], breaks = Size(df$var/10), 
                 include.lowest=TRUE, labels=1:10) 
```

# c++ - 使用 base64 编码 CV_32FC1 Mat 数据

> ID：15274713
> 
> 赞同：2
> 
> 时间：2013-03-07T15:13:01.270
> 
> 标签：c++, opencv, base64, surf, feature-descriptor

您好，我正在尝试从 SURF 描述符中提取数据，当我使用 ORB 描述符尝试此操作时，它可以工作。当我使用 SURF 时，程序退出，并在 base64 编码行出现分段错误 11，我使用该站点的 base64 函数：[Encoding and decoder base64](http://www.adp-gmbh.ch/cpp/common/base64.html)。

确切的问题是 ORB 描述符的格式是`CV_8UC1`SURF 描述符`CV_32FC1`。所以我必须 base64 编码一个 32 位浮点数而不是 8 位无符号字符。

我怎样才能做到这一点？

```
Mat desc;
vector<KeyPoint> kp;

SurfFeatureDetector detector(500);
SurfDescriptorExtractor extractor;
// OrbDescriptorExtractor extractor; This works

detector.detect(image, kp);
extractor.compute(image, kp, desc);

desc.convertTo(desc, CV_8UC1, 255, 0);

unsigned char const* inBuffer = reinterpret_cast<unsigned char const*>(desc.data);
unsigned int in_len = desc.total();
string code = base64_encode(inBuffer, in_len).c_str(); // This line causes the error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:04:32.623

您的问题的一个来源可能是您在使用它之前没有检查`inBuffer`值。`NULL`如果没有从您传入的图像中生成描述符，则`desc.data`，并且通过扩展`inBuffer`，将是`NULL`.

还有几件事：

1.  您的使用`reinterpret_cast`是不必要的，而且很可能是不安全的。有关强制转换类型的良好解释，请参阅[此问题](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)。如果你想要一个指向描述符数据的 const 指针，你可以像这样简单地分配一个：

    ```
    const uchar* inBuffer = desc.data; 
    ```

2.  SURF 使用`float`描述符，而 ORB 使用二进制描述符。如果您打算使用 SURF，您可能需要更改您的代码。的分配`inBuffer`可以更改为

    ```
    const float* inBuffer = reinterpret_cast<const float*>(desc.data); 
    ```

    在这种情况下使用`reinterpret_cast`可能是合适的。但是，除非您确实必须这样做，否则建议避免进行直接指针操作。考虑使用`cv::Mat_<float>`元素访问。

**编辑：**鉴于更新的问题，第 2 点不太相关。出现了一个额外的问题：将 from 转换`float`为`uchar`via`convertTo()`将丢失信息。在这种情况下，转换将使描述符数据的原始精度无法恢复。假设您的 base64 编码有效，则可以像以前一样简单地处理描述符数据，但这超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:38:58.690

```
cv::initModule_nonfree(); //Patent protection related. 
```

不要忘记包含库（例如 opencv_nonfree243.lib）。

# apache - htaccess 在末尾添加一个斜杠

> ID：15274715
> 
> 赞同：1
> 
> 时间：2013-03-07T15:13:06.733
> 
> 标签：apache, .htaccess

我正在尝试将所有对 flv 文件的请求发送到下载脚本。

在我的 htaccess 中，我添加了

```
RewriteRule ^/flashvideos/(.+).flv$  download.php?id=$1 [L,QSA] 
```

所以请求`http://website/flashvideos/3791.flv`会去`http://website/download.php?id=3791`，但他们去`http://website/flashvideos/3791.flv/`

我在 htaccess 文件中的任何地方都看不到执行此操作的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:23:22.890

好的，我发现了发生了什么。我的格式不对。这有效：

```
RewriteCond %{REQUEST_URI} ^/flashvideos/(.+).flv$
RewriteRule .  download.php?id=$1 [L] 
```

# java - 总是选择默认打印机而不是指定的打印机，JAVA

> ID：15274716
> 
> 赞同：1
> 
> 时间：2013-03-07T15:13:08.190
> 
> 标签：java, printing

我在java中有一个打印程序，但由于某种原因它总是选择默认打印机（8600），即使我为打印机传递了一个xps的值，我做错了什么，我怎样才能让它选择所需的打印机

这是我的代码：

```
 PrintService[] printServices = PrintServiceLookup.lookupPrintServices(null, null);
        System.out.println("Number of print services: " + printServices.length); //tells me how many print services are isntalled on the server.

        for (PrintService printer2 : printServices) {
            System.out.println("Printer: " + printer2.getName()); //prints out the names of all printers on the server, testing purposes 
        } 

        PrintUtility.findPrintService(printer); // selects only the 8600 printer // EDIT now selects any printer with the name provided

        PrintService[] services =
                PrintServiceLookup.lookupPrintServices(psInFormat, null);
        //System.out.println("Printers avialiable are " + services);
        System.out.println("Printer Selected " + services[Printerinx]);

        //PrintService defaultService = PrintServiceLookup.lookupDefaultPrintService();

        DocFlavor[] docFalvor = services[Printerinx].getSupportedDocFlavors();
        for (int i = 0; i < docFalvor.length; i++) {
            System.out.println(docFalvor[i].getMimeType());
        }
        if (services.length > 0) {
            DocPrintJob job = services[Printerinx].createPrintJob();
            try {
                job.print(myDoc, aset);
                System.out.print("Printing Doc");
            } catch (PrintException pe) {
                System.out.print(pe);
            }
        } 
```

这是控制台：

```
INFO: Number of print services: 7
INFO: Printer: Send To OneNote 2013
INFO: Printer: Microsoft XPS Document Writer
INFO: Printer: HP988FD1 (HP Officejet Pro 8600)
INFO: Printer: HP Officejet Pro 8600 (Network)
INFO: Printer: Fax - HP Officejet Pro 8600 (Network)
INFO: Printer: Fax
INFO: Printer: Adobe PDF
INFO: Printer Selected Win32 Printer : HP Officejet Pro 8600 (Network)
INFO: image/gif 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:07:40.343

好的，printinx，我已经选择了可以使用的打印机，0 表示第一台等，我已经将它设置为 printinx = "3" 所以它总是选择第 4 台打印机，这已被删除，并且每台打印机都给出了正确的 printinx，现在它应该正常工作

# c# - Outlook Add In 在 Property_Change 事件后获取项目

> ID：15274719
> 
> 赞同：1
> 
> 时间：2013-03-07T15:13:28.220
> 
> 标签：c#, outlook, outlook-addin, outlook-2007

正如标题所示，我正在寻找一种方法来获取触发事件的 Item。

我在 Application_ItemLoad 事件中绑定 Property_Change 事件，其中我有一个似乎无法使用的对象 Item。

触发 Property_Change 后，我需要触发事件的 Item 才能调用我的函数。有没有办法得到这个？（我知道我可以通过 ActiveExplorer 获取当前打开的项目，但是如果在主窗口中修改了项目，我会得到空值）。

代码：ThisAddIn.cs

```
private Explorer _Explorer;
private List<WrapperItem> list = new List<WrapperItem>;

private void ThisAddIn_Startup(object sender, System.EventArgs e){
   _Explorer = this.Application.ActiveExplorer();
   _Explorer.SelectioNChange += _Explorer_SelectionChange;
}

void _Explorer_SelectionChange()
{
     list.Clear();
     foreach (MailItem mail in _Explorer.Selection)
     {
         list.Add(new WrapperItem(mail));
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:00:29.143

您正在为特定项目设置事件接收器，对吗？你的代码是什么？

如果要跟踪来自多个对象的事件，经验法则是创建自己的包装类，该类将包含指向引发事件的对象的指针，并在同一个包装类中实现事件处理程序。这样，当事件触发时，您将知道是哪个对象引发了它。

一个示例包装器（在我的头顶上）可能看起来像

```
public class MailItemWrapper
{
  public MailItem item;
  public MailItemWrapper(MailItem OutlookItem)
  {
    item = OutlookItem;
    item.PropertyChange += new System.EventHandler(PropertyChangeHandler);
  }
  private PropertyChangeHandler(string Name)
  {
    MessageBox.Show(string.Format("Property named {0} changed on item {1}", name, item.Subject))
  }
} 
```

# sql-server - 使用TOP时查询延迟

> ID：15274720
> 
> 赞同：1
> 
> 时间：2013-03-07T15:13:31.410
> 
> 标签：sql-server, optimization

在下面的查询中，如果我以“SELECT [Nominal]...”的形式运行它，那么它将在不到一秒的时间内执行并返回超过 12000 个结果。

但是，`TOP 5`执行需要超过 7 分钟，最终得出了预期的答案。

为了部分解决这个问题，我可以将它放入一个临时表中，然后`TOP 5`从那里做一个。但是，我需要将其合并到一个带有变量子句的函数中`PrID`。但是函数不适用于临时表。将整个查询放在函数中将重新引入 7 分钟延迟。

最后，我无法重新设计现有的或创建新的永久表。

```
SELECT TOP 5
[Nominal].[OwId],
[Nominal].[PrID],
CASE
    WHEN ISNULL(Archived, 0) = 0
        THEN '.\Document Store\ '
    WHEN [Archived] = 1
        THEN '.\Archive Store\ '
    END +
CASE
    WHEN [Documents].Spare1 IS NOT NULL
        THEN CONVERT(nVarChar(50),[Documents].Spare1)
    WHEN [Documents].Spare1 IS NULL
        THEN CONVERT(nVarChar(50),[Documents].ID)
    END
    + '.pdf' AS [File Name],
[Documents].[Date],
[Nominal].[Statement Number],
[Nominal].[Total]
FROM [Documents]
    INNER JOIN [Nominal]
    ON [Document Name] = 
    REPLACE(
        REPLACE(
            'Statement - ' 
                + [account] 
                + ' ' 
                + CONVERT(nVarChar(50),[Statement Number]),
            '/',
            ' '),
        ',',
        '')
ORDER BY [Statement Number]; 
```

编辑，回复评论：

我对这一切并不精通，我不得不谷歌搜索大部分评论。现在我可以看到问题所在：

如果没有 TOP 5，成本最高的是哈希匹配（内部连接），成本：预期的 76%，因为整个过程只需几秒钟，这不是问题。

对于 TOP 5，最昂贵的是表扫描 [Documents]，成本：100% 内部连接似乎已被两个嵌套循环替换（不确定嵌套循环和哈希匹配的确切区别以及为什么它需要两个但费用不存在）

有人指点吗？

# javascript - JS 中的启用验证器

> ID：15274721
> 
> 赞同：3
> 
> 时间：2013-03-07T15:13:31.560
> 
> 标签：javascript, jquery, asp.net, validation

我有一个验证器`Webform.aspx`

```
<asp:RequiredFieldValidator ID="val1" ClientIDMode="Static" runat="server"/> 
```

在我的 jquery 中，我有一个函数试图禁用它，由标记中的一个按钮调用

```
btnclick = function()
{
    var a = $('#val1');
    alert(a); //alerts [object Object]
    ValidatorEnable(a, false); //gets a console error
} 
```

执行此功能时，控制台中出现错误（我使用的是 Google Chrome），说`uncaught TypeError: Cannot set property 'visibility' of undefined`

这是说我的 var a 未定义吗？...但这没有任何意义，因为它正在提醒`[object Object]`

我也做到了`alert(a.length`），这`1`正如预期的那样给了我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T15:22:39.477

`ValidatorEnable`需要一个元素，而不是 jQuery 对象。您可以使用索引获取第一个匹配的元素。

```
var a = $('#val1');
ValidatorEnable(a[0], false); 
```

# shadow - 拐角处缺少 Turn.js 阴影效果

> ID：15274728
> 
> 赞同：0
> 
> 时间：2013-03-07T15:13:57.050
> 
> 标签：shadow, turnjs

我一直在试图弄清楚为什么我好几周都无法在杂志的角落获得那种漂亮的阴影效果。我什至不知道应该应用什么 css 类才能获得这种效果。我也一直在研究网络以寻求某种解决方案，但到目前为止没有成功。一点帮助将不胜感激。这是我的开发服务器[http://vm.penegalab.com](http://vm.penegalab.com)的链接！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:23:27.227

```
 .btn-custom {
       background-color: hsl(94, 94%, 30%) !important;
       background-repeat: repeat-x;
       filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#e2fdcd", endColorstr="#42ef84");
       background-image: -khtml-gradient(linear, left top, left bottom, from(#e2fdcd), to(#429404));
       background-image: -moz-linear-gradient(top, #e2fdcd, #429404);
       background-image: -ms-linear-gradient(top, #e2fdcd, #429404);
       background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #e2fdcd), color-stop(100%, #429404));
       background-image: -webkit-linear-gradient(top, #e2fdcd, #429404);
       background-image: -o-linear-gradient(top, #e2fdcd, #429404);
       background-image: linear-gradient(#e2fdcd, #429404);
       border-color: #429404 #429404 hsl(94, 94%, 15%);
       color: #333 !important;
       text-shadow: 0 1px 1px rgba(255, 255, 255, 0.99);
      -webkit-font-smoothing: antialiased; 
```

}

这有帮助吗？我在一个我认为有按钮创建应用程序的网站上得到了这个？如果它是您所指的渐变效果，我可以寻找它这是一个不同的网站，但甚至很酷！ [http://css-tricks.com/examples/ButtonMaker/#](http://css-tricks.com/examples/ButtonMaker/#)玩阴影效果。看看你喜欢什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T13:21:01.787

这可能会有所帮助。

```
 .turn-page-wrapper{
       -moz-box-shadow: 10px 10px 5px #999;
       -webkit-box-shadow: 10px 10px 5px #999;
        box-shadow: 10px 10px 5px #999;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-08T11:30:20.400

**最新答案 - 2020**

`#flipbook`用 div包裹起来。`Ex: .flipbook-container`

然后在您的 css 文件中，在下面添加以下 css 部分`.flipbook-container`

```
.shadow {
   -webkit-box-shadow: 0 0 20px 0 #ccc;
           box-shadow: 0 0 20px 0 #ccc;
} 
```

而已。希望这个答案可能对某人有所帮助！

# bash - 逐行读取并执行 if 命令

> ID：15274729
> 
> 赞同：0
> 
> 时间：2013-03-07T15:14:00.827
> 
> 标签：bash, if-statement, count, while-loop

我有以下问题。我有一个这样的文件：

```
134 Apple
345 Strawberries
45 Pears
1450 Oranges 
```

我想做的是读取每一行，如果值高于，例如 70，将字符串写入另一个文件，如：

```
134 Apple
345 Strawberries
1450 Oranges 
```

我认为关键是**读取行**和**if**时的命令，但我不知道如何组合它们

我已经尝试过（只是为了直观地打印结果，因为我不知道如何将提示定向到“if 命令”中的文件）

```
READ=awk '{print $1}' mylist.txt
if [ $READ -gt 70]; then echo "you have more that 70 fruits"
fi 
```

但它不起作用，因为（我认为）它不仅可以读取“数字”，还可以读取“单词”，或者读取所有数字而不仅仅是一个唯一的数字。它给了我这个错误：“一元运算符预期”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:31:09.500

如何用这个单线做：

```
awk '($1+0)>70{print > "new.txt"}' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:19:25.703

```
while read count fruit ; do
  if [ $count -gt 70 ]; then
    echo $count $fruit
  fi
done < mylist.txt > newlist.txt 
```

将输出写入 newlist.txt。

您得到“预期一元运算符”的原因是因为所有数字都在您的 READ 变量中一个接一个地放置，因此您的 if 语句变为：

```
if [ 134 345 45 1450 -gt 70]; then 
```

which bash 不知道如何解释。

# ios - 如何为 iOS 版 Unity3d 添加可访问性

> ID：15274733
> 
> 赞同：9
> 
> 时间：2013-03-07T15:14:13.180
> 
> 标签：ios, unity3d, accessibility, unity3d-2dtools

有什么方法可以通过 Unity3d 与 iOS 的 VoiceOver 可访问性原生支持进行通信？我们有一个需要可访问的应用程序，但我们不知道如何去做。

创建我们自己的自定义 VoiceOver 是不可能的，因为我们需要语言支持，所以我们需要本地化。我们的直觉告诉我们通过插件与 iOS 通信，但似乎 iOS 硬件无法捕获统一点击，而且它似乎覆盖了我们的一些手势。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-13T21:46:09.250

[这里](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAccessibilityElement_Class/index.html#//apple_ref/occ/cl/UIAccessibilityElement)有一些注释

> 通常，您不会为应用程序中的项目创建可访问性元素，因为默认情况下可以访问标准 UIKit 控件和视图。但是，如果您的视图包含非视图项，例如图标或文本图像，需要残障用户访问，您可以创建可访问性元素来表示它们。在这种情况下，包含视图应实现 UIAccessibilityContainer 非正式协议，并使用此方法创建一个可访问性元素来表示应向辅助应用程序公开的每个项目。

[在](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAccessibilityContainer_Protocol/)这里

> UIAccessibilityContainer 非正式协议为 UIView 子类提供了一种方法，可以将选定的组件作为单独的元素进行访问。例如，一个视图可能包含图标或绘制的文本，对于最终用户来说，它们作为单独的项目出现和发挥作用。但是因为这些组件不是作为 UIView 的实例来实现的，所以残障用户不能自动访问它们。因此，这样的容器视图应该实现 UIAccessibilityContainer 方法，以向辅助应用程序（例如 VoiceOver）提供有关这些组件的可访问性信息。

我不熟悉 Unity 本身，但这似乎可以破解包含视图以支持可访问性 - 您可以构建一组`UIAccessibilityElemets`表示当前在屏幕上可见的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-03T19:54:27.500

不幸的是，Unity 和 VoiceOver 本身不能一起工作，因为 Unity 负责所有渲染 - 包括 UI。这就是 VoiceOver 或任何其他屏幕阅读器无法访问 UI 并使其可访问的原因。正如您已经提到的，您真正唯一的选择是在 Unity 中实现相同的功能。您可以自己实现它，也可以使用为您完成它的插件。

有一个可用的插件可以为 Unity UI 重新创建屏幕阅读器功能。它的工作方式类似于 VoiceOver 和 TalkBack，并使用本机 VoiceOver 语音进行文本到语音输出。 [https://assetstore.unity.com/packages/tools/gui/ui-accessibility-plugin-uap-87935](https://assetstore.unity.com/packages/tools/gui/ui-accessibility-plugin-uap-87935)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T10:45:46.747

Unity3d 不支持 VoiceOver 使用的 .ipa 文件来提供允许该功能运行的挂钩。因此，该功能不能直接用于使应用程序更易于访问。

因此，必须使用在 Unity 中开发基于 VoiceOver 的系统的方法，该方法可以利用当前的一些 VoiceOver 约定 - 即重新创建 VoiceOver 在 Unity 中处理页面和应用程序的方法。

除此之外，我不确定如果不采取“漫长的道路”来创建自己的语言支持，并使用与 VoiceOver 类似的辅助功能，你能做什么。

# java - 从 arraylists 填充表

> ID：15274735
> 
> 赞同：0
> 
> 时间：2013-03-07T15:14:18.893
> 
> 标签：java

我想`y`用 arraylist 中存储的数据填充表格。我有三个数组列表：`bornesNom`,`bornesX` 和`bornesY`, 表包含三列`Nom`,`X`和`Y`.

我想设置`TableModel`但不知道如何设置。

该表基于此模型：

```
TableModel  bornesTableModel = new DefaultTableModel(
new String[][] { { "One", "Two","Two" }, { "Three", "Four", "Four" } },
new String[] { "Nom", "X", "Y" }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:51:05.853

根据您的评论，我认为实际问题是如何将 3 个列表转换为二维数组。

除了拥有 3 个单独的列表似乎是您的设计中的一个严重缺陷之外（您最好有一个包含一个实例的数据的对象列表），我会尝试给您一个提示：

创建一个二维数组，其第一个维度与列表的大小相同。然后同时遍历所有列表并提取给定索引处的数据。创建并填充一个长度为 3 的 String 数组，并将其分配给外部数组的索引。

我将提供一个小例子，但请记住，当列表不匹配时，您必须处理案例。

基本上它可能看起来像这样：

```
List<String> listA = ...;
List<String> listB = ...;
List<String> listC = ...;

//note: the lists could have different lengths so this is unsafe
//I'll leave this as an excercise for you
int listLength = listA.size(); 

String array[][] = new String[listLength][];

for( int i = 0; i < listA.size(); i++ )
{
  array[i] = new String[3];
  array[i][0] = listA.get( i );
  array[i][1] = listB.get( i );
  array[i][2] = listC.get( i );
} 
```

另一种选择可能是`TableModel`根据 3 个列表滚动您自己的列表，但在此之前，请尝试使用适当的数据结构替换列表。

# php - 没有在 PHP 中使用 Curl 获取网页的内容

> ID：15274742
> 
> 赞同：0
> 
> 时间：2013-03-07T15:14:33.680
> 
> 标签：php, curl

我正在使用 Curl 将一些数据发布到网页。我的问题是如何获取该网页的数据并将其存储在文件中？

```
 <?
 extract($_POST);
 //set POST variables
 $trainno="12635";
 $url = 'http://www.indianrail.gov.in/cgi_bin/inet_trnnum_cgi.cgi';
 $fields = array(
                    'lccp_trnname'=>urlencode($trainno),
           );

 //url-ify the data for the POST
 foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
 rtrim($fields_string,'&');

 //open connection
 $ch = curl_init();

 //set the url, number of POST vars, POST data
 curl_setopt($ch,CURLOPT_URL,$url);
 curl_setopt($ch,CURLOPT_POST,count($fields));
 curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
 curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');

 //execute post
 $result = curl_exec($ch);

 //close connection
 curl_close($ch);
 echo $result;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:22:02.807

你的问题不清楚。您是说站点调用没有返回任何内容，或者只是没有将其放入 $result 中？

要将 curl 返回的数据获取到 $result 中，您需要设置：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:25:59.040

您需要查看 PHP 的 DOMDocument::loadHTML() 方法（[http://docs.php.net/manual/en/domdocument.loadhtml.php](http://docs.php.net/manual/en/domdocument.loadhtml.php)）。当您构建查询字符串时，您不需要手动执行此操作；你应该使用 http_build_query() ( [http://www.php.net/manual/en/function.http-build-query.php](http://www.php.net/manual/en/function.http-build-query.php) )。

# php - Jquery json添加新行

> ID：15274743
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:14:37.440
> 
> 标签：php, javascript, jquery

你好，我想制作一个 html 表并通过 json 填充行，并通过 php/mysql 只添加来自数据库的新信息，如下所示：

php代码：

```
$res = mysql_query("select * from generalTabl");
while($row = mysql_fetch_array($res))
{
    $arr[] = $row;
}
echo '{"Info1":'.json_encode($arr).'}'; 
```

jQuery代码：

```
function getData(){
    var url = "/json.php";
    $.getJSON(url, function(jsonData) {
        $.each(jsonData.Info1, function(nr,jsonData){
            $("#tt").append('<tr>' +jsonData.titlu+'</tr>')
        })
    })
}
setInterval("getData()" ,1000); 
```

以及如何仅使用数据库中的新信息填充最后

问题是每次 setInterval 启动函数时添加新行而不是仅当信息是新的时才添加行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:18:44.927

在循环内部，使用`data2`代替`jsonData`

```
$.each(jsonData.Info1, function(nr,data2){
    $("#tt").append('<tr>' +data2.titlu+'</tr>')
}) 
```

假设您从服务器获取的 JSON 数据有一个名为的属性`Info1`，并且它有一个集合，其中包含一个名为的属性`titlu`。

要仅附加新项目，您可以检查记录 ID（可能是表中的唯一主键）以查看列表/表中是否已存在。如果没有，请追加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:20:30.960

对于初学者，请对您现有的代码做一些说明。

首先，您对`Info1`密钥的使用完全是多余的。将 PHP 的最后一行更改为：

```
echo json_encode($arr); 
```

然后在您的 jQuery 中将您的`$.each`行更改为：

```
$.each(jsonData,function() { 
```

请注意，我已经删除了函数的参数，因为您似乎没有使用它们。

接下来，在您的循环中，您反复调用*原始 object*的`titlu`属性，这可能不是您想要的。用这个替换循环的内容：

```
$("#tt").append("<tr>"+this.titlu+"</tr>"); 
```

最后，您***永远不***应该将字符串传递给`setTimeout`or `setInterval`。在这种情况下，它尤其糟糕，因为您需要做的就是使用`setInterval(getData,1000);`.

* * *

有了这个，我建议确保每一行都有一个 ID。然后，当附加到您的表时，请尝试以下操作：

```
if(!document.getElementById("row"+this.id))
    $("#tt").append("<tr id='row"+this.id+"'>"+this.titlu+"</tr>"); 
```

# c# - 在 WP7 中注释视频

> ID：15274745
> 
> 赞同：1
> 
> 时间：2013-03-07T15:14:45.327
> 
> 标签：c#, windows-phone-7, video, annotations

我有一个简单的 wp7 应用程序，除其他外，我可以捕获/预览/下载/上传视频。没什么花哨的，只是基本的功能。我现在要做的是向存储在隔离存储中的视频（作为 mp4）添加一些注释（视频上的文本）。对其进行注释后，我将再次将带注释的视频保存到隔离存储中。

注释应该以编程方式完成 - 例如，当我的应用程序的状态发生变化时，一些预定义的文本注释将添加到当前视频中。如果可能的话，基本上我想有这样的东西：

```
public mp4Video annotateVideo(mp4Video video, string text){
    ...
    //code that sets the annotation
    ...
    return annotatedVideo;
} 
```

有谁知道我该怎么做？例子会很棒。

# c# - 传入一个旋转的位图来处理

> ID：15274747
> 
> 赞同：0
> 
> 时间：2013-03-07T15:14:47.440
> 
> 标签：c#, bitmapimage

我有一个要旋转的位图，我想传入要处理的旋转位图，但从我的代码看来，它传递的是原始位图而不是旋转的位图。

知道如何调整它吗？

```
 using (var fullImg = new Bitmap(workGif))
 {
   try
   {   
     RectangleF cloneRect = new RectangleF(0,0, fullImg.Width,fullImg.Height);
     PixelFormat format = fullImg.PixelFormat;

     Bitmap result = fullImg.Clone(cloneRect, format);
     result.RotateFlip(RotateFlipType.Rotate180FlipNone);

     string QRinfo = Process(result);
     MessageBox.Show(QRinfo);
   }
 } 
```

# xml - 使用 VBScript 解析 SOAP 响应

> ID：15274748
> 
> 赞同：1
> 
> 时间：2013-03-07T15:14:49.470
> 
> 标签：xml, web-services, asp-classic, vbscript

我对 XML 和 Web 服务非常陌生，所以我正在寻找一些方向。我有一个经典的 ASP Web 应用程序（好吧，别开玩笑了！），它使用 Web 服务从数据库中检索数据。我可以调用 Web 服务并很好地接收 SOAP 响应。我的问题是在尝试解析响应时出现的。我调用网络服务的代码是这样的......

```
Dim objXMLHttp, strEnvelop, strReturn
strEnvelope = <I build the soap message here>
set objXMLHttp = Server.CreateObject("MSXML2.XMLHTTP")
objXMLHttp.open "POST", "web service URL", false
objXMLHttp.setRequestHeader "Content-Type", "text/xml"
objXMLHttp.send strEnvelope
strReturn = objXMLHttp.responseText 
```

所有这些都完美运行，并且 strReturn 中包含响应 XML。XML 看起来像这样......

```
<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
<Body xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
<lookupCaseOutputCollection xmlns="http://xmlns.oracle.com/pcbpel/adapter/db/lookupCase" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<lookupCaseOutput>
<C_CASE_ID>100000</C_CASE_ID>
<I_FIRST_NM>BERNADINE</I_FIRST_NM>
<I_MI_NM>C</I_MI_NM>
<I_LAST_NM>TWOTEETH</I_LAST_NM>
<I_DOB_DT>1977-06-26</I_DOB_DT>
</lookupCaseOutput>
</lookupCaseOutputCollection>
</Body>
</Envelope> 
```

当需要解析响应 XML 时，我得到了...

```
Dim xmlDoc
set xmlDoc = CreateObject("MSXML2.DOMDocument")
xmlDoc.async = false
xmlDoc.Load strReturn 
```

这就是我卡住的地方。我需要能够提取和显示单个标签 C_CASE_ID、I_FIRST_NM 等的值。我不知道如何做到这一点。有没有人有任何建议/例子？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:48:16.237

首先，您需要[`loadXML`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms754585%28v=vs.85%29.aspx)而不是[`load`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762722%28v=vs.85%29.aspx)从字符串加载 XML 数据。后者用于从文件加载 XML 数据。

将结构解析为`DOMDocument`对象后，您可以使用[记录](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757878%28v=vs.85%29.aspx)的属性和方法。我建议使用`selectNodes()`或`selectSingleNode()`使用[XPath](http://saxon.sourceforge.net/saxon6.5.3/expressions.html)表达式来选择您感兴趣的节点：

```
xmlDoc.loadXML strReturn

WScript.Echo xmlDoc.selectSingleNode("//C_CASE_ID").text
WScript.Echo xmlDoc.selectSingleNode("//I_FIRST_NM").text
'... 
```

# c++ - 将对象向量保存到文件 C++

> ID：15274751
> 
> 赞同：2
> 
> 时间：2013-03-07T15:15:08.180
> 
> 标签：c++, file, object, vector, save

我有一个对象，它代表我正在编程的游戏中地面的各个瓷砖。我还有一个包含对象实例的向量。将此列表保存到文件的最佳方法是什么？我可以遍历向量并保存每个 x,y 坐标和对象使用的图像，但这似乎有点粗糙。我可以使用 boost 头文件，但目前在尝试构建和使用 boost 的其余部分时遇到了一些主要问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:24:13.950

C++ 没有内置的序列化功能，所以无论你做什么都会有点“粗鲁”，一般来说，如果你保存的对象需要很少或现在需要构造（例如 int、floats 等），那么你可以简单地写出整个一口气矢量，像这样：

```
std::vector <int> data(16, 0);
std::ofstream output("binary.data");
output.write(static_cast<char *>(&(data[0])), data.size()*sizeof(int)); 
```

但是，如果您有需要多步构造函数的数据类型（例如 std::string），那么您**必须**循环遍历每个元素并使用足够的信息将它们单独写出，以便在从磁盘读取时重构对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:26:25.740

这对我来说似乎是一个足够好的解决方案。像这样的格式： {x, y, image_filename} 也会使调试更容易一些，因为您可以通过检查来验证您的保存代码或加载代码是否导致问题（如果出现任何问题）。无论如何，我不认为您可以通过使用二进制解决方案来节省太多空间，因为您最有可能需要完整的 image_filename。

你可以看看[Boost::Serialization](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)提供了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:36:31.360

我完全赞同 [Boost::Serialization](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)。您实际上可以选择是否需要文本或二进制格式。我通常在开发/调试期间写入/读取文本档案，然后切换到二进制格式进行部署。请注意，二进制格式*不能*在不同架构之间移植，因此如果您关心存档可移植性，请坚持使用文本格式。

如果您的对象发生变化或者您希望序列化派生类，这样做非常容易，您也可以进行归档版本控制。真的没有必要重新实现这个特定的轮子:-)

也许您可以提供更多有关您在安装 Boost 时遇到的问题（版本？操作系统？编译器？）的信息，肯定有人会提供帮助。

# actionscript-3 - 在 AS3 中使用 Greensock 对文本进行补间模糊

> ID：15274752
> 
> 赞同：0
> 
> 时间：2013-03-07T15:15:10.000
> 
> 标签：actionscript-3, tween, gsap

我正在尝试将一些文本从模糊到非模糊再到模糊。为此，我尝试在补间之前设置 blurX 和 blurY，但这完全阻止了补间的发生。难道我做错了什么？

```
TweenMax.set(text, {alpha:0, blurFilter:{blurX:20, blurY:20}});
TweenMax.to(text, 5, {alpha:1, blurFilter:{blurX:0, blurY:0}, ease:SlowMo.ease.config(1, 0, true), yoyo:true}); 
```

编辑：消除轻松让褪色发生，但它仍然没有溜溜球

```
TweenMax.to(text, 5, {alpha:1, blurFilter:{blurX:0, blurY:0}, yoyo:true}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:21:57.070

忘记输入重复功能：

```
TweenMax.to(text, 5, {alpha:1, blurFilter:{blurX:0, blurY:0}, repeat:1, yoyo:true}); 
```

为了更平滑的缓动（在这种情况下，由于某种原因缓动有效，而在上述情况下没有）：

```
TweenMax.to(text, 5, {ease:SlowMo.ease.config(1, 0), alpha:1, blurFilter:{blurX:0, blurY:0}, repeat:1, yoyo:true, delay:(8)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:22:23.833

该`yoyo`参数取决于，因此如果您希望补间永远持续，则`repeat`必须插入`repeat: -1`with 。`yoyo: true`

# c# - 正则表达式按标签拆分

> ID：15274755
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:15:23.053
> 
> 标签：c#, regex

我有一个像这样的文本文件：

```
<page>
Line 1
Hello World
<endpage>
<page>
Another page
<endpage> 
```

现在我想在`<page>`and `<endpage>`-tags 处拆分此文本。我尝试使用以下正则表达式：

```
Regex regex = new Regex(@"<page>.*?<endpage>");
MatchCollection matchCollection = regex.Matches(text); 
```

但这仅适用于`<page>`and之间没有换行符的情况`<endpage>`。解决我的问题的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:17:53.540

为了能够匹配多行，`.*`您需要启用该`RegexOptions.Singleline`选项：

```
Regex regex = new Regex(@"<page>.*?<endpage>", RegexOptions.Singleline); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:18:31.240

默认情况下，`.`不匹配换行符。这意味着只有当所有内容都发生在同一行时，您的模式才会匹配。

为了使其匹配多行，您需要`RegexOptions.Singleline`（名称有点混乱，但想法是整个字符串被视为“单行”，而不是遍历并测试每行上的正则表达式）。

# routes - Zend Tree Route 多段

> ID：15274762
> 
> 赞同：0
> 
> 时间：2013-03-07T15:15:31.967
> 
> 标签：routes, zend-framework2

我正在尝试使用子段创建路由示例：/account/:accountId/user/edit/:userId

模块.config.php：

```
'router' => array(
    'routes' => array(
         'account' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/account/:accountid',
                'constraints' => array(
                    'accountid' => '[a-z0-9_-]*',
                ),
                'defaults' => array(
                    'controller' => 'My\Controller\Account',
                    'action'     => 'index',
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'user' => array(
                        'type' => 'segment',
                        'options' => array(
                            'route' => '/user/edit/:userid',
                            'constraints' => array(
                                'userid' => '[a-z0-9_-]*',
                            ),
                            'defaults' => array(
                                'action' => 'edit'
                            )
                        ),
                    )
                )
            ),
        ), 
```

当我打电话时：

```
<?= $this->url('account/user', ['accountid' => 'foo', 'userid' => 'bar']); 
```

我只得到： /account/foo 我想要的地方 /account/foo/user/edit/bar

我确实尝试将 may_terminate 更改为 false 而没有更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:12:49.390

我自己犯了几次同样的错误，并花费了大量时间来解决它。

请仔细查看您的配置。`may_terminate`&`child_routes`不应在`options`键内，而应与`options`. 正确的配置应该看起来

```
'router' => array(
    'routes' => array(
         'account' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/account/:accountid',
                'constraints' => array(
                    'accountid' => '[a-z0-9_-]*',
                ),
                'defaults' => array(
                    'controller' => 'My\Controller\Account',
                    'action'     => 'index',
                ),
            ), // options
            'may_terminate' => true,
            'child_routes' => array(
                'user' => array(
                    'type' => 'segment',
                    'options' => array(
                        'route' => '/user/edit/:userid',
                        'constraints' => array(
                            'userid' => '[a-z0-9_-]*',
                        ),
                        'defaults' => array(
                            'action' => 'edit'
                        ),
                    ),
                ),
            ),
        ),
    ),
) 
```

# xpages - XPages 扩展库和对象数据源的使用

> ID：15274765
> 
> 赞同：1
> 
> 时间：2013-03-07T15:15:41.950
> 
> 标签：xpages, xpages-extlib

包含在扩展库中（默认在 Domino 9 中）有一个“对象数据源”功能。它非常方便，但我找不到任何关于此的文档。我对 'ignoreRequestParams' 属性有疑问......这是什么意思以及如何使用它？通过启用此功能，URL 参数是否可以自动绑定到数据源对象属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T08:15:42.053

原始的两个数据源（Domino 文档和 Domino 视图）都支持允许 URL 查询字符串参数覆盖属性值的行为。例如，默认情况下，文档数据源会在查询字符串中查找`databaseName`、`formName`和；`documentId`对于它找到的任何这些，相应的属性都设置为参数值，而不管该属性可能已在 XSP 标记中分配了什么值。

可以通过两种方式自定义此行为：

1.  如果属性被赋予一个非空字符串值，那么只有当 URL 包含与指定前缀*和*属性名称 `requestParamPrefix`相匹配的相应参数时，每个属性才会被覆盖——例如，。通过默认参数（*不带*匹配前缀）提供的值将被忽略。*`blog_documentId``comment_formName`*
***   如果该`ignoreRequestParams`属性的计算结果为 true，则无论任何查询字符串参数值如何，数据源的任何属性都不会被 URL 覆盖。此属性的**默认**值为 false，因此如果要确保 URL*永远不会*影响该实例的属性值，则必须在特定数据源实例上将其设置为 true。**

 **但是，尚未为对象数据源实现此行为。因此，为`ignoreRequestParams`或`requestParamPrefix`属性设置的任何值都不会影响此类数据源的任何实例的行为。

也许它没有被实现的原因是因为对象数据源是完全任意的，所以没有预定义的假设它的任何实例都将支持特定的属性。您在`createObject`数据源实例的属性中定义一个“方法绑定”（SSJS 函数或 Java 方法），它构成了用于创建数据对象的业务逻辑。因此，生成的对象可以是您想要的任何东西，它可以支持您想要的任何属性，并且确定这些属性的初始值的逻辑可以是您想要的任何东西。因此，您当然可以自由地引用`param`该方法绑定中的内部全局变量，以在定义数据源的初始状态时考虑您希望的任何 URL 参数。

例如，以下将是`createObject`对象数据源实例的属性的完全有效的方法绑定：

```
return {
    firstName: (param.get("firstName") || ""),
    lastName: (param.get("lastName") || ""),
    email: (param.get("email") || "")
}; 
```

这将导致您可以将数据组件绑定到的对象......例如，如果您`var`的数据源是“注册”：

`#{registration.firstName}`

如果 URL 包含与属性名称匹配的参数，则对象的每个属性都将具有默认值。

自然，您的逻辑可能比这复杂得多：使用视图和键参数（而不是文档 ID）来检索文档并加载字段值，根据 URL 中标识的外键查询非 Domino 数据。 . 使用这种类型的数据源，正是*因为*没有预先定义任何东西，所以没有限制。**

# php - codeigniter 的应用范围类

> ID：15274766
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:15:45.233
> 
> 标签：php, codeigniter, global-scope

我开始第一次使用 codeigniter 并开始规划编码结构。

我有许多在整个应用程序中定期引用的“对象”：用户、文章、照片、评论、论坛主题等。这些对象将执行常见功能，例如获取/设置有关用户、文章的特定详细信息，照片，评论，主题等。这些东西通常在几乎每个控制器上都会被引用。

存储这些的正确/最佳实践方法在哪里以及如何存储？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T21:37:47.400

一般来说，我建议在控制器中构建你的方法，然后重构并将方法推送到模型中。然后在你的模型中重构。控制器说 - 这样做并像指挥官一样挥手。它没有说如何去做，“如何”在模型中。

我刚刚学习的另一个建议 - 是从用户角色的角度设计和构建应用程序 - 例如管理员、购买者、编辑器等。不要将使用的工具（如 CRUD）放在中心的应用程序。应用程序应该由用户需要做什么来驱动。“鲍勃叔叔”马丁有一句很棒的名言——如果你让建筑师给你展示一个房子的设计，他们不会带着锤子、锯子和卷尺等工具的清单回来。并且架构设计并没有被一堆实现细节所困扰。蓝图 - 或您的对象设计 - 仅针对必要的内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-07T15:23:26.003

这正是 MVC 的工作原理......

听起来您会为每个业务对象创建模型/库，然后使用 config->autoload 来包含它们或将它们加载到您的核心控制器类 (application/core/MY_Controller) 中。

# mysql - 将“维度查找/更新”与 MySql 一起使用时如何解决不正确的 SQL 语法错误？

> ID：15274768
> 
> 赞同：3
> 
> 时间：2013-03-07T15:16:07.130
> 
> 标签：mysql, jdbc, mysql-connector, kettle

我正在将 Kettle 4.1 与 MySql 5.6 一起使用，并尝试从[Pentaho Kettle Solutions: Building Open Source ETL Solutions with Pentaho Data Integration运行第 4 章](http://ca.wiley.com/WileyCDA/WileyTitle/productCd-0470635177.html)[演示](http://media.wiley.com/product_ancillary/77/04706351/DOWNLOAD/635179_downloads.zip)，并且 [“维度查找/更新”步骤](http://wiki.pentaho.com/display/EAI/Dimension+Lookup-Update)失败并出现错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“OPTION SQL_SELECT_LIMIT=1”附近使用正确的语法

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:16:07.130

您需要[升级 Kettle 正在使用的 MySql Connector 版本](http://forums.pentaho.com/showthread.php?94086)。转到您的 Kettle 安装`libext\JDBC`文件夹并替换为从[MySql 站点](http://dev.mysql.com/downloads/connector/j/)`mysql-connector-java-3.1.14-bin.jar`下载的较新版本的 Connector/J 。只需从 zip 中提取新版本并将其复制并*删除*旧版本即可。然后重新运行，它应该可以工作。

 *就个人而言，它在连接器版本上失败了`5.1.6`，但它在`5.1.23`（当前最新版本）YMMV 上工作。*

# javascript - 如何通过元素名称获取输入类型

> ID：15274775
> 
> 赞同：0
> 
> 时间：2013-03-07T15:16:16.827
> 
> 标签：javascript, dom-events

有没有办法通过元素名称来获取输入类型？

```
<form name="formQuestionnaire">
    <input name="age" type="radio" id="age-1" />
    <input name="age" type="radio" id="age-2" />
</form>

document.forms['formQuestionnaire'].elements['age'] 
```

返回单选/复选框/文本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:17:48.760

尝试

```
var x = document.forms['formQuestionnaire'].elements['age'];
x = x.length ? x[0] : x;
alert(x.type) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/EMNDR/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T13:34:09.863

如果你想要多个元素。 [小提琴](http://jsfiddle.net/EMNDR/23/)

```
var x = document.forms['formQuestionnaire'].elements['age'];

for(var i=0;i< x.length;i++){

var u = x.length ? x[i] : x;

    alert(u.type);

}
```

```
<form name="formQuestionnaire">
    <input name="age" type="radio" id="age-1" />
    <input name="age" type="checkbox" id="age-2" />
</form>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:18:30.023

```
<input type="age" name="age" type="radio" />

...
var input = document.getElementById('age');
alert(input.type); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:18:33.020

您还可以获得`type`财产：

```
var type = document.forms["formQuestionnaire"].elements["age"].type; 
```

它比 using 好一些`getAttribute("type")`，因为在未定义`type` *属性*的情况下（默认为`text`），后者给出`null`，而`type` *属性*返回`text`，因为它应该是。

# cuda - 向量类型的全局数组解决方法

> ID：15274777
> 
> 赞同：0
> 
> 时间：2013-03-07T15:16:30.547
> 
> 标签：cuda

使用 CUDA，我尝试使用由向量组成的数组（在我的情况下为 int2）进行编译时优化，但我无法以干净的方式实现这一点。更具体地说，我正在研究一个使用两个常量数组 c 和 w 的问题。数组 w 由浮点数组成，数组 c 由 int2 组成。现在，由于这些数组是常量，我希望编译器执行编译时优化，从而有效地优化数组访问。例如，对于以下两个设备函数，编译器展开循环并通过直接将其替换为 c 和 w 的值来优化数组访问：

```
__forceinline__ __device__ float someFunction1() {
  const int2  c[9] = {make_int2(0, 0), make_int2(1, 0), make_int2(0, 1), make_int2(-1, 0), make_int2(0, -1),
                      make_int2(1, 1), make_int2(-1, 1), make_int2(-1, -1), make_int2(1, -1)};
  const float w[9] = {4.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/36.0f, 1.0f/36.0f, 1.0f/36.0f, 1.0f/36.0f};
  #pragma unroll
  for (int i = 0; i < 9; ++i) {
    //Do something here, accessing c[i] and w[i]
  }
}

__forceinline__ __device__ float someFunction2() {
  const int2  c[9] = {make_int2(0, 0), make_int2(1, 0), make_int2(0, 1), make_int2(-1, 0), make_int2(0, -1),
                           make_int2(1, 1), make_int2(-1, 1), make_int2(-1, -1), make_int2(1, -1)};
  const float w[9] = {4.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/36.0f, 1.0f/36.0f, 1.0f/36.0f, 1.0f/36.0f};
  #pragma unroll
  for (int i = 0; i < 9; ++i) {
    //Do something here, accessing c[i] and w[i]
  }
} 
```

现在，问题是我不想在每个使用 c 和 w 的设备函数中连续声明 c 和 w。我可以全局声明 w，但不允许全局声明 c，因为 CUDA 不允许我在全局变量中调用 make_int2 构造函数。也就是说，下面的程序给出了错误“无法为设备上的非空构造函数或析构函数生成代码”：

```
//Declaring array c like this is not allowed
__device__ const int2  c[9] = {make_int2(0, 0), make_int2(1, 0), make_int2(0, 1), make_int2(-1, 0), make_int2(0, -1),
                               make_int2(1, 1), make_int2(-1, 1), make_int2(-1, -1), make_int2(1, -1)};
__device__ const float w[9] = {4.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/9.0f, 1.0f/36.0f, 1.0f/36.0f, 1.0f/36.0f, 1.0f/36.0f};

__forceinline__ __device__ float someFunction() {
  #pragma unroll
  for (int i = 0; i < 9; ++i) {
    //Do something here, accessing c[i] and w[i]
  }
} 
```

我的问题是：如何防止在访问这些变量的每个函数中声明 c 和 w 并且仍然具有我想要的编译时优化？或者另有说明：是否有一种解决方法来全局声明一个向量数组？

注意：我知道我可以将 c 和 w 存储在全局或 __constant__ 内存中，但这不会给我编译时优化。__constant__ 内存在不定期访问时也可能出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:54:03.390

我不知道这是否真的可以实现您在编译器优化方面所寻找的东西，但是将指针从 int 转换为 int2 似乎对我有用：

```
#include <stdio.h>

  __device__ const int  ci[16] = {0, 0, 1, 0, 0, 1, -1, 0, 0, -1, 1, 1, -1, 1, -1, -1};

  __device__ const int2 *c = (const int2 *)ci;

  __global__ void mykernel(){

  int2 temp = c[1];
  int2 temp1 = c[4];
  printf("c[1].x = %d\n", temp.x);
  printf("c[4].y = %d\n", temp1.y);
  }

int main(){

  mykernel<<<1,1>>>();
  cudaDeviceSynchronize();
  printf("Done\n");
  return 0;
} 
```

请注意，`const`和[__ constant__](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#constant)不是一回事。您可以从and`const`的变量定义中消除声明，但我认为将它放在那里将有助于编译器实现您想要的。`c``ci`

# android-activity - Google TV 上未触发向上/向下翻页 KeyEvent

> ID：15274780
> 
> 赞同：0
> 
> 时间：2013-03-07T15:16:36.920
> 
> 标签：android-activity, google-tv, keyevent

我在 GTV 中有一个活动，其布局包含垂直 ScrollView 内的水平 ScrollView。水平 ScrollView 包含许多按钮，使用嵌套的垂直和水平线性布局按行排列。（如果您想知道为什么有人会设计如此疯狂的 UI，这是电视的 EPG！）

在我的活动代码中，我重写了 onKeyDown，并针对某些按键执行了各种自定义操作。这工作正常，除了向上和向下翻页键。我放在 *case KeyEvent.KEYCODE_PAGE_DOWN:* 下的任何代码都不会运行。实际上，当按下这些键时，根本不会触发 onKeyDown 方法。

但是我可以看到操作系统正在接收这些按键，并且正在对它们进行操作（页面正在向上和向下滚动）。

我已经在 2 个不同的物理 GTV 设备（来自不同的制造商）上对此进行了测试，两者都存在问题。

如果有人可以提出解决方案，我将非常感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:07:57.220

有几件事（因为您没有发布任何代码）我正在做一些假设。

1.  KeyEvent.KEYCODE_PAGE_DOWN - 你可能想要 KEYCODE_DPAD_DOWN 代替（同样 KEYCODE_DPAD_UP - 我在遥控器上看不到向上/向下翻页键 - 只是 dpad。

2.  由于您自己处理关键事件，因此您应该在 onKeyDown 实现上返回 true - 否则系统可能会吞下您的关键事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:37:08.007

我相信您想要的键是 KEYCODE_CHANNEL_UP 和 KEYCODE_CHANNEL_DOWN，这些至少映射到索尼遥控器上的向上翻页/向上频道和向下翻页/向下频道键。

# java - 文本分类分类器

> ID：15274781
> 
> 赞同：6
> 
> 时间：2013-03-07T15:16:36.807
> 
> 标签：java, machine-learning, classification, document-classification, categorization

有人知道好的开源文本分类模型吗？我知道 Stanford Classifier、Weka、Mallet 等，但它们都需要培训。

我需要将新闻文章分类为体育/政治/健康/游戏/等。有没有预先训练好的模型？

Alchemy、OpenCalais 等不是选项。我需要开源工具（最好是 Java）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:58:52.973

拥有一个预训练模型假设用于训练的语料库与您尝试分类的文档来自完全相同的域。通常，这不会给您想要的结果，因为您没有原始语料库。机器学习不是静态的，当你训练一个分类器时，你需要在新的特征/信息可用时更新模型。

例如，在体育/政治/健康/游戏/等领域对新闻文章进行分类。

首先是什么语言？我们只是在谈论英语吗？原始语料库是如何标记的？而最大的未知数是 etc. 类别。

训练你自己的分类器真的很容易。如果要对文本进行分类，MALLET 是最佳选择。您可以在 10 分钟内启动并运行。您可以在 1 小时内将 MALLET 添加到您自己的应用程序中。

如果您想对新闻文章进行分类，可以使用很多开源语料库作为开始培训的基础。我将从 Reuters-21578 或 RCV-1 开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:16:49.693

您所说的分类是非常重要的。

分类是一项有**监督**的任务，它需要预先标记好的语料库。从已经标记的语料库开始，您必须使用多种方法和方法创建模型，最后您可以使用该模型对未标记的测试语料库进行分类。如果是这种情况，您可以使用多类分类器，这通常是二元分类器的二叉树应用程序。此类任务的最先进方法是使用机器学习的一个分支，**SVM**。两个最好的 SVM 分类器是**LibSVM**和**SVMlight**. 这些是开源的、易于使用的并且包括多类分类工具。最后，您必须进行文献调查，以了解除了获得良好结果之外还需要做什么，因为仅使用这些分类器是不够的。您必须**操作/预处理您的语料库**以提取信息承载部分（例如 unigrams）并排除噪声部分。一般来说，你很可能还有很长的路要走，但 NLP 是一个非常有趣的话题，值得研究。

但是，如果您所说的分类是聚类，那么问题将更加复杂。聚类是一项**无监督的**任务，这意味着您不会在您正在使用的程序中包含有关哪个示例属于哪个组/主题/类的信息。也有关于混合半监督方法的学术工作，但它们与聚类问题的真正目的有点不同。在处理语料库时需要使用的预处理与在分类问题中必须做的事情具有相似的性质，因此我不再赘述。要进行聚类，您必须遵循几种方法。首先，您可以使用**LDA（潜在狄利克雷分配）**降低语料库的维数（特征空间的维数）的方法，这将有助于提高效率和从特征中获取信息。在 LDA 旁边或之后，您可以使用**Hierarchical Clustering**或类似的其他方法（例如**K-Means**）来对未标记的语料库进行聚类。您可以使用**Gensim**或**Scikit-Learn**作为集群的开源工具。两者都是功能强大、有据可查且易于使用的工具。

在所有情况下，都要进行大量的学术阅读，并尝试理解这些任务和问题背后的理论。通过这种方式，您可以针对您具体处理的问题提出创新且有效的解决方案，因为 NLP 中的问题通常依赖于语料库，并且您在处理特定问题时通常是靠自己的。很难找到通用且即用型的解决方案，我也不建议依赖这样的选择。

我可能过度回答了您的问题，对于不相关的部分，我深表歉意。

祝你好运=)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T07:38:34.337

根据您的需要，有很多分类器。首先，我认为你可能想缩小你想用分类器做什么。

训练是分类步骤的一部分，我认为你不会在那里找到太多预训练的分类器。此外，训练几乎总是分类的简单部分。

话虽如此，实际上您可以查看很多资源。我不能假装相信这一点，但这是其中一个例子：

> **Weka** - 是用于数据挖掘的机器学习算法的集合。它是最流行的文本分类框架之一。它包含多种算法的实现，包括朴素贝叶斯和支持向量机（SVM，在 SMO 下列出）[注意：其他常用的非 Java SVM 实现是 SVM-Light、LibSVM 和 SVMTorch]。一个相关的项目是 Kea（Keyphrase Extraction Algorithm），一种从文本文档中提取关键短语的算法。
> 
> **Apache Lucene Mahout** - 一个孵化器项目，用于在 Hadoop map-reduce 框架之上创建通用机器学习算法的高度可扩展的分布式实现。

来源：[http ://www.searchenginecaffe.com/2007/03/java-open-source-text-mining-and.html](http://www.searchenginecaffe.com/2007/03/java-open-source-text-mining-and.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:48:17.750

OpenNLP 有很长的预训练模型列表

[http://opennlp.sourceforge.net/models-1.5/](http://opennlp.sourceforge.net/models-1.5/)

# javascript - 如何在 Jade（或 HTML）中创建浮动文本？

> ID：15274784
> 
> 赞同：0
> 
> 时间：2013-03-07T15:16:52.827
> 
> 标签：javascript, html, pug

如果用户尝试使用不正确的凭据登录，我有一个 Jade 文件，该文件会在页面加载时显示错误消息。问题是错误消息在出现时将页面上的所有其他内容向下移动，因为它本质上只是一段文本。

```
extends layout

block head
    title Login
block content
p
  if (errMessage)
     p= errMessage
br
| Some other text and login boxes here 
```

如何更改消息文本，使其基本上漂浮在其他所有内容之上并且不影响后面的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:27:12.500

为错误消息制作容器`position:absolute;`

# javascript - 使用 XML 中的 oAuth 获取 Google 用户名

> ID：15274789
> 
> 赞同：0
> 
> 时间：2013-03-07T15:17:02.913
> 
> 标签：javascript, xml, oauth-2.0, google-sites, google-gadget

我现在无法获取已登录 Google 用户的用户名。我想从此链接获取我需要的数据：

```
https://accounts.google.com/o/oauth2/auth?
scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&
state=%2Fprofile&
redirect_uri={REDIRECT_URL}
response_type=token&
client_id={CLIENT_ID} 
```

此链接使用 oAuth 进行身份验证并获取我的帐户信息，但我不想使用“Redirect_URL”我只想将数据作为 XML 文件获取并与 JavaScript 一起使用。我希望此链接在我的 Google 站点小工具中运行，因此我可以在我的小工具中使用此链接中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:15:31.773

根据您的问题，我认为您误解了 Oauth2 流程。

您将用户重定向到 Google 的 url，用户在其中使用他的 google 凭据对自己进行身份验证。因此，用户在谷歌网站上进行身份验证，而不是在您的应用程序内部。这是为了确保用户不必在任何其他应用程序/站点中填写他的凭据，然后是谷歌。当用户接受您的应用程序使用他们的信息时，谷歌将调用您的重定向网址并为您提供可用于获取用户数据的代码。因此，您可以从 Google 获取重定向，并使用您在回调中从 Google 获得的代码（您的重定向 url）请求您需要的数据。

也看看这张图片：

![在此处输入图像描述](../Images/a3b2ad9ff1afb6743b7ffc068ee8d873.png)

# c# - Razor Helper 的 ClientId

> ID：15274790
> 
> 赞同：0
> 
> 时间：2013-03-07T15:17:05.520
> 
> 标签：c#, html, razor

我是剃须刀的新手，所以我可能错过了一些东西。

我想要做的是编写一个帮助器来输出一个 HTML 片段，当 DOM 准备好时，这个 HTML 需要发生几件事。

现在我当然会自动从 WebForms 中想到`ClientId`从帮助程序输出中唯一标识 HTML，但是 Razor 中是否有等价物？

显然，我可以在渲染时生成一些独特的东西，这不是问题，我只是不想做 razor 可能提供的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:35:42.963

我最终决定让开发人员将 a 传递`ClientInstanceName`给辅助函数，然后用于标识辅助函数中的元素。

这样他们就可以确保它在他们正在处理的页面上是唯一的，并且还知道如何在需要时访问元素或在需要时应用 CSS。

# c - 我如何为 mac 编程

> ID：15274791
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:17:05.357
> 
> 标签：c, printf, max, main

你好，

我想为mac编程。

我已经知道一些程序语言，比如 c

这在mac上有效吗？

```
main()
{ printf("hello world");} 
```

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:23:25.273

是的，您可以在 Mac 上使用 C 编程语言。Mac OS X 上的主要编程语言是基于 C 语言的 Objective-C。

您可以从 AppStore 下载 Xcode 并开始开发您自己的应用程序。C 非常好，因为它是 Objective-C 的子集。

我建议你从这里开始： http: [//www.cocoalab.com/?](http://www.cocoalab.com/?q=becomeanxcoder) q=becomeanxcoder它有点过时，但你会得到基本的想法。

# linux - valgrind vgdb 与 emacs 中的 gdb

> ID：15274798
> 
> 赞同：2
> 
> 时间：2013-03-07T15:17:30.070
> 
> 标签：linux, emacs, gdb, valgrind

我正在尝试将 valgrind vgdb 与 command: 一起使用`valgrind --vgdb-error=0 ./a.out [args]`。

当我`target remote | /usr/lib64/valgrind/../../bin/vgdb`在 emacs gdb 中运行时`Non-stop mode requested, but remote does not support non-stop`出现错误。

emacs 运行的 gdb 命令是：`gdb -i=mi a.out`.

我的 valgrind、gdb 和 emacs 版本：valgrind-3.7.0、GNU gdb (GDB) SUSE (7.5.1-2.5.1) 和 GNU Emacs 24.2.1。

有没有办法解决这个问题，或者我的 gdb、valgrind 或 emacs 版本无法处理我想要做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T21:15:42.810

目前 valgrind gdbserver 不支持不间断模式，很难实现（见[https://bugs.kde.org/show_bug.cgi?id=328081](https://bugs.kde.org/show_bug.cgi?id=328081)）

所以，在使用 emacs 的 gdb 模式时，必须禁用 non-stop 模式。Mx customize-option gdb-non-stop-setting 将其设置为关闭 + 应用并保存

之后，emacs + vgdb + valgrind 应该可以一起正常工作。

# javascript - 当我仍然将鼠标悬停在鼠标悬停对象上时，正在调用 Mouseout 函数

> ID：15274806
> 
> 赞同：1
> 
> 时间：2013-03-07T15:17:56.563
> 
> 标签：javascript, google-maps-api-3

使用 Google Maps api，我使用 addDomListener 调用 mouseout 命令，如下所示：

```
 google.maps.event.addDomListener(document.getElementById(#myID), 'mouseout', mouseoutListener); 
```

myID 是一个 div，带有一些子元素，例如

```
<div id="myID">
  <title>etc</title>
  <address>etc</title>
</div> 
```

mouseout 在离开 #myID 时有效，但问题是*它也会在将鼠标悬停在子元素上时触发*。我知道 jQuery 通过制作 mouseenter 和 mouseleave 触发器解决了这个问题，但不幸的是，这些在这个 API 中不可用（据我所知）。

这是如何实现的？

换句话说，您如何 getElementById AND 以使其涵盖所有子元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:12:31.073

您也可以将 mouseleave 和 mouseenter 与 addDomListener 一起使用，问题是并非所有主流浏览器都支持这些事件（它们应该在 IE、FF 和 Opera 中工作，但在 Chrome 和 Safari 中失败）。

您可以使用另一个库，例如 jQuery，它具有针对这些事件的跨浏览器实现。

# php - 如何在多维数组中找到字符串长度最长的数组

> ID：15274808
> 
> 赞同：-3
> 
> 时间：2013-03-07T15:18:01.683
> 
> 标签：php, multidimensional-array

**嗨，大家好 ！我有一个像这样的多维数组：**

```
$arr =
大批
(
    [0] => 数组
        (
            ['id'] => 1
            ['title'] => 一项测试
        )

    [1] => 数组
        (
            ['id'] => 4
            ['title'] => 两个测试 xyz
        )

    [2] => 数组
        (
            ['id'] => 2
            ['title'] => fdfdf dfdfdffdfdf
        )

    [3] => 数组
        (
            ['id'] => 3
            ['title'] => fddddđ fffffffff ssss
        )

)

```

有什么办法让最长的字符串和它的长度在任何`$array['title']`元素？我想得到“fddddđ fffffffff ssss”及其长度。请告诉我任何方式让：获得最长的字符串，获得最长的字符串和两者。谢谢 。

我看到了一种方法：`max(array_map('strlen', $ary));` <== 但它用于单个数组，在这个主题中，我希望有任何方法可以在 $arr['title'] 中找到

**更新 ：**

但如果我想得到：

1.  最长的字符串 + 最长的字符串里面`$arr['title']`
2.  里面`$arr['id']`最大的“id”值数字，现在最大的“id”值数字是 $arr[1]['id'] 里面的 4

**<== 并将它们全部分配给一个新数组，例如：**

```
    大批（
         'id' => 4,
         'title' => 'fddddđ fffffffff ssss'
)

```

我该怎么办？回复前请仔细看我的更新，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:21:14.250

```
$max = '';
$maxlen = 0;

foreach ($arr as $elm) {
    $len = strlen($elm['title']);

    if ($len > $maxlen) {
        $maxlen = $len;
        $max = $elm['title'];
    }
}

echo "The longest string is \"$max\" and it is $maxlen chars long.\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:42:55.330

这是一个将迭代多维数组并返回它找到的最长字符串数组的版本。改编为 Sean Bright 的代码以保持简单。

```
 $arr = array(

    "0" => array(
            'id' => 1,
            'title' => "one test"
        ),

    "1" => array(
            'id' => 2,
            'title' => "two test xyz"
        ),

    "2" => array(
            'id' => 3,
            'title' => "fdfdf dfdfdffdfdf"
        ),

    "3" => array(
            'id' => 4,
            'title' => "fddddđ fffffffff ssss"
       )

);

function longest_string(&$arr, &$max='',&$maxlen=false){

    foreach ($arr as $elm=>$val) {
        $len = strlen($val);

       if ($len > $maxlen) {

            $maxlen = $len;
            $max = $arr;
        }

        if( is_array($val) ){
            longest_string($val, $max, $maxlen);
        }

    }

    return $max;
}

echo  var_dump(longest_string($arr1));

// array(2) { ["id"]=> int(4) ["title"]=> string(22) "fddddđ fffffffff ssss" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:28:04.887

```
 $string="";
    foreach($arr as $list)
    {
      $string=strlen(list['title'])>strlen($string)?ist['title']:$string;

    }
    echo $string;
    echo strlen($string)

you can find largest string also string length try it 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:24:40.673

```
$maxlen = 0;
$idxMax = null;

foreach($arr as $idx => $elem) {
  if(strlen($elem['title']) > $maxlen)
    $idxMax = $idx;
}

printf('Longest string: "%s" (%d), at index %d',
  $arr[$idxMax]['title'],
  strlen($arr[$idxMax]['title']),
  $idxMax); 
```

要回答您更新的问题，请使用`$arr[$idxMax]['id']`. 如果您想要包含字符串及其索引的数组，只需将其分配给一个新变量：

```
$longestEntry = $arr[$idxMax]; 
```

要将最高 ID 与最长字符串组合，请使用：

```
$maxlen = 0;
$maxId = $arr[0]['id']; // assuming array has at least one element
$idxMax = null;

foreach($arr as $idx => $elem) {
  if(strlen($elem['title']) > $maxlen)
    $idxMax = $idx;

  $maxId = max($elem['id'], $maxId);
}

$max = array(
  'id' => $maxId,
  'title' => $arr[$idxMax],
); 
```

# javascript - 在 jQuery mobile 中，tap 和 vclick 之间有什么区别？

> ID：15274809
> 
> 赞同：15
> 
> 时间：2013-03-07T15:18:02.967
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我应该使用哪个事件来收听？为什么要使用 vclick？我只是不知道使用哪种情况。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-07T15:32:11.980

如果 jQuery Mobile Tap 过去只能在移动设备上工作。这不再是这种情况了。

创建 VClick 是为了弥补桌面/移动设备之间的点击/点击不兼容之间的差距。

现在你可以自由使用水龙头，但几乎没有问题。在 iOS 平台上点击会失败。应改为使用 Touchstart。

例子：

## 点击

将在桌面和移动设备上工作。

*   Android 4.1.1 - 无延迟
*   iOS - 无延迟
*   桌面版 Firefox 19 和 Chrome 25.0.1364.152 - 无延迟

[http://jsfiddle.net/Gajotres/PYPXu/embedded/result/](http://jsfiddle.net/Gajotres/PYPXu/embedded/result/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $( document ).on( "vclick", '[data-role="page"]', function() {
        $( this ).append( "<span style='color:#00F;'>vmouseup fired.</span>" );
    });
}); 
```

轻敲：

## 轻敲

它以前只能在移动设备上工作，现在也可以在桌面浏览器上工作，但在 jQuery Mobile 1.1 及以下版本的 iOS 上会失败。

*   Android 4.1.1 - 无延迟
*   iOS - 无延迟
*   桌面版 Firefox 19 和 Chrome 25.0.1364.152 - 无延迟

[http://jsfiddle.net/Gajotres/k8kSA/](http://jsfiddle.net/Gajotres/k8kSA/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $( document ).on( "tap", '[data-role="page"]', function() {
        $( this ).append( "<span style='color:#00F;'>tap fired.</span>" );
    });
}); 
```

## 点击

将适用于移动设备和桌面浏览器。

*   Android 4.1.1 - 可见延迟（300+ 毫秒）
*   iOS - 无延迟
*   桌面版 Firefox 19 和 Chrome 25.0.1364.152 - 无延迟

[http://jsfiddle.net/Gajotres/L2FHp/](http://jsfiddle.net/Gajotres/L2FHp/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $( document ).on( "click", '[data-role="page"]', function() {
        $( this ).append( "<span style='color:#00F;'>click fired.</span>" );
    });
}); 
```

# 结论

如果您想要与**VClick**的向后 jQM 兼容性棒，在任何其他情况下使用**Tap**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:27:34.643

vclick（虚拟点击）模拟onclick事件。

[http://api.jquerymobile.com/vclick/](http://api.jquerymobile.com/vclick/)

在快速、完整的触摸事件单个目标对象之后触发点击事件。

[http://api.jquerymobile.com/tap/](http://api.jquerymobile.com/tap/)

这取决于您在做什么，但除非您有特定的理由不这样做（例如，使用相同的 js 支持桌面和移动设备），否则我会使用 tap。

更多信息在这里[https://coderwall.com/p/bdxjzg](https://coderwall.com/p/bdxjzg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-13T07:39:46.133

我刚刚注意到“tap”和“vclick”之间的主要区别。如果您选择一个按钮并按下回车键，'vclick' 会触发 - 'tap' 不会。

# javascript - 替换字符串中的某些字符

> ID：15274810
> 
> 赞同：0
> 
> 时间：2013-03-07T15:18:03.507
> 
> 标签：javascript, regex

在本网站上查阅了多个答案后，我仍然无法找到如何在 Javascript 中替换字符串中的某些字符的解决方案。我尝试将 .replace() 与正则表达式一起使用，但无济于事。

对于上下文，这是我所拥有的：

```
var text = document.getElementById('text');
var button = document.getElementById('myBtn');

button.onclick = function() {
   var splitter = text.value.split(" ");
   for(var i=0; i < splitter.length; i++) {
  if(splitter[i].match("er$")) {
    splitter[i].replace(/er$/, "x"); <----The one line causing me insanity.

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:20:53.740

javascript 中的字符串是不可变的，因此[replace](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)返回一个新字符串。

你可能想要

```
splitter[i] = splitter[i].replace(/er$/, "x"); 
```

另请注意，您不必测试它之前是否匹配，并且您可以在不拆分的情况下执行整个操作（通过使用`\b`带有此正则表达式的单词边界 : `/er\b/g`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:21:58.450

您可以按照此处所述使用此技术：

[如何在 JavaScript 中替换特定索引处的字符？](https://stackoverflow.com/questions/1431094/how-do-i-replace-a-character-at-a-particular-index-in-javascript)

```
String.prototype.replaceAt=function(index, character) {
      return this.substr(0, index) + character + this.substr(index+character.length);
   } 
```

并使用如下

```
var hello="Hello World";
alert(hello.replaceAt(3, "a")); 
```

# c - 有没有办法将字符串格式化为输入，以便 C 将其解释为十六进制？

> ID：15274814
> 
> 赞同：1
> 
> 时间：2013-03-07T15:18:13.333
> 
> 标签：c

我知道您可以告诉 C 使用 printf("\xab") 将值解释为十六进制。如果您在 C 程序中输入“\xab”作为输入，它会将其解释为字符 -xab。有没有办法将 printf 样式的格式信息嵌入到原始输入中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:21:01.713

不，这完全取决于读取字符的代码如何解释它们。您不能通过给它文本来神奇地强制程序从外部执行其他操作。我想缓冲区溢出攻击是一个反例，但这是相当极端的。

许多程序使用例如[`strtol()`](http://linux.die.net/man/3/strtol)自动支持`0x`（十六进制）和`0`作为前缀（浏览器地址栏是这种相当出乎意料的功能的一个常见示例）。例如，在 Windows 中，您可以执行以下操作来 ping 此站点：

```
C:\>ping 0xc6fcce10

Pinging 198.252.206.16 with 32 bytes of data: 
```

其中 0xc6fcce10 是单个 32 位十六进制数的 IP 地址。

# c++ - 将集合论应用于 C++11 可变参数模板

> ID：15274816
> 
> 赞同：5
> 
> 时间：2013-03-07T15:18:16.017
> 
> 标签：c++, templates, c++11, variadic-templates

假设我有两个可变参数模板；`typename... T, typename... U`，我将如何找到他们的；

1.  级联
2.  最大公共子序列
3.  最大公共子序列的逆

所以据我了解，串联很简单；`(t..., u...)`，但是如何找到两者的最大公共子序列呢？- 甚至可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T15:47:07.613

这是一个计算**对元组类型对的集合操作**的解决方案。我假设元组可以用来保存变量参数包，所以一旦你有了`Ts...`and `Us...`，你就可以：

```
typename tuple_intersect<std::tuple<Ts...>, std::tuple<Us...>>::type 
```

这给了你一个元组，和`Vs...`的交集在哪里。如果您需要再次提取为参数包，只需提供元组作为接受 a 的函数的输入：`Ts...``Us...``Vs...``tuple<Ts...>`

```
template<typename... Vs>
void func(std::tuple<Vs...>)
{
    // Here, you have Vs... (= Us... & Ts...) as an argument pack
} 
```

* * *

**框架**：

以下是以下所有主要元函数共有的一些简单元函数：

```
template<typename T, typename... Ts>
struct is_member_of_type_seq { static const bool value = false; };

template<typename T, typename U, typename... Ts>
struct is_member_of_type_seq<T, U, Ts...>
{
    static const bool value = std::conditional<
        std::is_same<T, U>::value,
        std::true_type,
        is_member_of_type_seq<T, Ts...>
        >::type::value;
};

template<typename, typename>
struct append_to_type_seq { };

template<typename T, typename... Ts>
struct append_to_type_seq<T, std::tuple<Ts...>>
{
    using type = std::tuple<Ts..., T>;
};

template<typename, typename>
struct prepend_to_type_seq { };

template<typename T, typename... Ts>
struct prepend_to_type_seq<T, std::tuple<Ts...>>
{
    using type = std::tuple<T, Ts...>;
}; 
```

* * *

> 1 - **串联**

这个很简单：

```
template<typename, typename>
struct concat_type_seq { };

template<typename... Ts, typename... Us>
struct concat_type_seq<std::tuple<Ts...>, std::tuple<Us...>>
{
    using type = std::tuple<Ts..., Us...>;
}; 
```

和一些测试：

```
static_assert(
    std::is_same<
        concat_type_seq<
            std::tuple<char, int, bool>,
            std::tuple<double, double, int>
            >::type,
        std::tuple<char, int, bool, double, double, int>
        >::value,
    "Error"
    ); 
```

* * *

> 2 -**最长公共子序列**

这个*稍微*复杂一点：

```
namespace detail
{
    // Meta-function that returns, given two sequences S1 and S2, the longest
    // subsequence of S1 in S2 that starts with the first element of S1 and
    // begins at the first element of S2 (in other words, it returns the
    // subsequence S2[0]..S2[N] such that S1[i] = S2[i] for each 0 <= i <= N.
    template<typename, typename>
    struct match_seq_in_seq_from_start
    {
        using type = std::tuple<>;
    };

    template<typename T, typename U, typename... Ts, typename... Us>
    struct match_seq_in_seq_from_start<std::tuple<T, Ts...>, std::tuple<U, Us...>>
    {
        using type = typename std::conditional<
            std::is_same<T, U>::value,
            typename prepend_to_type_seq<
                T,
                typename match_seq_in_seq_from_start<
                    std::tuple<Ts...>,
                    std::tuple<Us...>
                    >::type
                >::type,
            std::tuple<>
            >::type;
    };

    // Some testing...
    static_assert(
        std::is_same<
            match_seq_in_seq_from_start<
                std::tuple<int, double, char>,
                std::tuple<int, double, long>
                //         ^^^^^^^^^^^
                >::type,
            std::tuple<int, double>
            >::value,
        "Error!"
        );

    // Meta-function that returns the same as the meta-function above,
    // but starting from the first element of S2 which is identical to
    // the first element of S1.
    template<typename, typename>
    struct match_first_seq_in_seq
    {
        using type = std::tuple<>;
    };

    template<typename T, typename U, typename... Ts, typename... Us>
    struct match_first_seq_in_seq<std::tuple<T, Ts...>, std::tuple<U, Us...>>
    {
        using type = typename std::conditional<
            std::is_same<T, U>::value,
            typename match_seq_in_seq_from_start<
                std::tuple<T, Ts...>,
                std::tuple<U, Us...>
                >::type,
            typename match_first_seq_in_seq<
                std::tuple<T, Ts...>,
                std::tuple<Us...>
                >::type
            >::type;
    };

    // Some testing...
    static_assert(
        std::is_same<
            match_first_seq_in_seq<
                std::tuple<int, double, char>,
                std::tuple<bool, char, int, double, long, int, double, char>
                //                     ^^^^^^^^^^^
                >::type,
            std::tuple<int, double>
            >::value,
        "Error!"
        );

    // Meta-function that returns, given two sequences S1 and S2, the longest
    // subsequence of S1 in S2 that starts with the first element of S1.
    template<typename T, typename U>
    struct match_seq_in_seq
    {
        using type = std::tuple<>;
    };

    template<typename U, typename... Ts, typename... Us>
    struct match_seq_in_seq<std::tuple<Ts...>, std::tuple<U, Us...>>
    {
        using type1 = typename match_first_seq_in_seq<
            std::tuple<Ts...>,
            std::tuple<U, Us...>
            >::type;

        using type2 = typename match_seq_in_seq<
            std::tuple<Ts...>, 
            std::tuple<Us...>
            >::type;

        using type = typename std::conditional<
            (std::tuple_size<type1>::value > std::tuple_size<type2>::value),
            type1,
            type2
            >::type;
    };

    // Some testing...
    static_assert(
        std::is_same<
            match_seq_in_seq<
                std::tuple<int, double, char>,
                std::tuple<char, int, double, long, int, double, char>
                //                                  ^^^^^^^^^^^^^^^^^
                >::type,
            std::tuple<int, double, char>
            >::value,
        "Error!"
        );
}

// Meta-function that returns, given two sequences S1 and S2, the longest
// subsequence of S1 in S2 (longest common subsequence).
template<typename T, typename U>
struct max_common_subseq
{
    using type = std::tuple<>;
};

template<typename T, typename... Ts, typename... Us>
struct max_common_subseq<std::tuple<T, Ts...>, std::tuple<Us...>>
{
    using type1 = typename detail::match_seq_in_seq<
        std::tuple<T, Ts...>,
        std::tuple<Us...>
        >::type;

    using type2 = typename max_common_subseq<
        std::tuple<Ts...>,
        std::tuple<Us...>
        >::type;

    using type = typename std::conditional<
        (std::tuple_size<type1>::value > std::tuple_size<type2>::value),
        type1,
        type2
        >::type;
}; 
```

和一些测试：

```
// Some testing...
static_assert(
    std::is_same<
        max_common_subseq<
            std::tuple<int, double, char>,
            std::tuple<char, int, char, double, char, long, int, bool, double>
            >::type,
        std::tuple<double, char>
        >::value,
    "Error!"
    );

// Some more testing...
static_assert(
    std::is_same<
        max_common_subseq<
            std::tuple<int, double, char, long, long, bool>,
            //                      ^^^^^^^^^^^^^^^^
            std::tuple<char, long, long, double, double, char>
            //         ^^^^^^^^^^^^^^^^
            >::type,
        std::tuple<char, long, long>
        >::value,
    "Error!"
    ); 
```

* * *

> 3 -**反转**

这是反转类型序列的特征（返回具有反转类型列表的元组）：

```
template<typename... Ts>
struct revert_type_seq
{
    using type = std::tuple<>;
};

template<typename T, typename... Ts>
struct revert_type_seq<T, Ts...>
{
    using type = typename append_to_type_seq<
        T,
        typename revert_type_seq<Ts...>::type
        >::type;
}; 
```

和一些测试：

```
// Some testing...
static_assert(
    std::is_same<
        revert_type_seq<char, int, bool>::type,
        std::tuple<bool, int, char>
        >::value,
    "Error"
    ); 
```

* * *

> 4 -**交叉口**

这个没有被要求，但作为奖励提供：

```
template<typename, typename>
struct intersect_type_seq
{
    using type = std::tuple<>;
};

template<typename T, typename... Ts, typename... Us>
struct intersect_type_seq<std::tuple<T, Ts...>, std::tuple<Us...>>
{
    using type = typename std::conditional<
        !is_member_of_type_seq<T, Us...>::value,
        typename intersect_type_seq<
            std::tuple<Ts...>,
            std::tuple<Us...>>
            ::type,
        typename prepend_to_type_seq<
            T,
            typename intersect_type_seq<
                std::tuple<Ts...>,
                std::tuple<Us...>
                >::type
            >::type
        >::type;
}; 
```

和一些测试：

```
// Some testing...
static_assert(
    std::is_same<
        intersect_type_seq<
            std::tuple<char, int, bool, double>,
            std::tuple<bool, long, double, float>
            >::type,
        std::tuple<bool, double>
        >::value,
        "Error!"
        ); 
```

# ios - 在 ObjectiveC 中创建像 NSURLConnection 这样的委托

> ID：15274830
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:18:48.177
> 
> 标签：ios, objective-c, delegates, nsurlconnection

我正在为一个对象创建自己的委托，但我发现了一些问题......当我的委托被调用时，对象 Client 不存在于内存中。

如果我将 Client Object 声明为 UIViewController 的属性，问题就解决了，但我认为这不是一个好的解决方案。

为什么我的对象不在内存中？

**更新示例代码：**

```
//Class UIViewController

-(void)viewDidLoad {

    [super viewDidLoad];
    Client *client = [[Client alloc] initWithDelegate:self];
    [client login]; //It has two delegates methods (start and finish)
 }  

//In the same class, the delegate methods:    
- (void) start
{
   //DO START STUFF
} 

-(void) finish
{
   // DO FINISH STUFF
} 
```

客户端.h

```
@interface Client : NSObject <IClient>

@property (nonatomic,assign) id<IClient> _delegate;
-(void)login;
-(id)initWithDelegate:(id<IClient>)delegate;

@end 
```

客户端.m

```
@implementation Client

@synthesize _delegate;

//Constructor
- (id) initWithDelegate:(id)delegate
{
        self = [super init];
        if(self)
        {
            self._delegate = delegate;
        }
        return self;
}

-(void)login
{
     //Do stuff asynchronously like NSURLConnection
     //Not all code, just a part:
     NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request 
     delegate:self 
     startImmediately:NO];

     [connection start];

}

//Delegate method of NSURLConnection that login method fires 
//Just implemented one method delegate of NSURLCOnnection for the example

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error
{
        NSLog(@"ERROR");
        [_delegate stop]; //<---CRASH!!!
}

@end 
```

客户端.h

```
@protocol IClient <NSObject>

- (void) start;
- (void) finish;

@end 
```

当我使用`NSURLConnection`时，委托方法像 param the own 一样传递`NSURLConnection`，但我不知道我需要如何实现我的委托，如下所示：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:41:12.433

> 当我使用 NSURLConnection 时，委托方法像参数一样传递自己的 NSURLConnection

如果我正确理解 Google 翻译，您希望您的委托方法接收委托对象本身作为参数。那你为什么不简单地实现逻辑呢？

在代表中：

```
- (void)delegateCallback:(DelegatingObject *)obj
{
    // whatever
} 
```

在委托类/对象中：

```
[self.delegate delegateCallback:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:54:24.743

您正在使用 ARC，并且一旦 viewDidLoad 方法完成，客户端对象就没有强引用，因此它被释放。如果您使用的是 MRC，那么您将泄漏内存。

解决方案*是*将其作为属性或 ivar 存储在您的视图控制器中，我不明白您为什么认为这是一个坏主意。如果您的视图控制器离开屏幕或其他任何情况，它还使您有机会取消对象（如果适用）。

# c# - 修改由 JSON C# 填充的获取/设置值

> ID：15274833
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:18:54.163
> 
> 标签：c#, .net, json, json.net

我正在使用 Json.NET 在 C# 中检索 JSON 对象。我有一个类文件，其中包含以下对象：

```
public class Items
{   
    public string id { get; set; }
    public string url { get; set; }
    public string _external; // not fetched from JSON
} 
```

但是，我想知道如何为以后的项目执行以下操作，因为它应该是非常基本的，但是经过几个小时的搜索和尝试，我没有让它工作；

如果**url**字符串有值，我想修改**外部**方法以包含类似于**"yes"**的值。我尝试了几种不同的方法，只是为了向您展示不应该这样做：

```
 public string url_check
    {
        set
        {
            if (url == "")
            {
                this._external= "";
            }
            else if (url != "")
            {
                this._external= "[external]";
            }
        }

    } 
```

我应该如何以实际可行的方式实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:22:23.930

试试这个：

```
public string url_check
{
    set
    {
        if (!string.IsNullOrEmpty(url))
        {
            this._external= "";
        }
        else
        {
            this._external= "[external]";
        }
    }

} 
```

# mongodb - 如何在 mongoDB 中存储地理空间信息

> ID：15274834
> 
> 赞同：31
> 
> 时间：2013-03-07T15:18:57.360
> 
> 标签：mongodb, geospatial

根据 mongoDB 文档（[链接](http://docs.mongodb.org/manual/core/geospatial-indexes/)），如果您想在文档字段中存储地理空间信息，您有两个选项，数组或嵌入文档，顺序应始终为经度、纬度。

如果我想使用嵌入文档，如何确保字段的顺序？

或者嵌入文档中的字段是否必须具有特定名称？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-07T17:25:38.627

对于嵌入文档，无论嵌入文档中的字段名称如何，第一个字段应包含经度值，第二个字段应包含纬度值。例如：

```
 db.zips2.insert( { _id: 1, city: "b", loc: { x: -73.974, y: 40.764 } } )
 db.zips2.insert( { _id: 2, city: "b", loc: { x: -73.981, y: 40.768 } } ) 
```

这里的**x**字段是经度；**y**字段将是纬度。

问候

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-07T17:42:02.300

[二维地理空间索引，存储位置数据](http://docs.mongodb.org/manual/core/geospatial-indexes/#store-location-data)

“所有文档必须以相同的顺序存储位置数据。如果使用纬度和经度作为坐标系，请**始终先存储经度**。MongoDB 的 2d 球形索引运算符仅识别 [经度，纬度] 排序。”

[这是一篇关于 MongoDB 中地理空间查询的好文章，以](http://myadventuresincoding.wordpress.com/2011/10/02/mongodb-geospatial-queries/)备不时之需。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-15T12:27:07.267

我建议您将字段命名为：`x and y`，而不是`longitude/latitude`，因为在更新后，经度和纬度将按字母顺序重新排序，因此倒置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-27T20:36:40.283

MongoDB 文档说如下：

一个名为坐标的字段，用于指定对象的坐标。如果指定纬度和经度坐标，请先列出**经度**，**然后再列出纬度**：

有效的经度值介于 -180 和 180 之间，包括两个值。有效的纬度值介于 -90 和 90（包括两者）之间。

官方 MongoDB 文档：[https ://docs.mongodb.com/manual/geospatial-queries/#geospatial-indexes](https://docs.mongodb.com/manual/geospatial-queries/#geospatial-indexes)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-04T17:12:18.823

地理空间索引使我们能够根据地理位置查找事物。

我们有 2 个选项：

*   **二维**
*   **3D**

在二维中，我们有一个带有`x`&`y`坐标的笛卡尔平面和一堆不同的对象。

* * *

[![二维笛卡尔平面](../Images/ca99628975ead90db1b34b044f3df45e.png)](https://i.stack.imgur.com/Qs2jn.png)

* * *

文档需要存储某种 .`x`位置`y`和`ensureIndex({'location':'2d', 'type':1})`.

（`type`可选）选项指定索引的方向，即升序或降序。它可以是一个复合索引。

**示例用法：**

要查找附近的位置，请使用命令：

```
db.collectionName.find({location: {$near:[x,y]}}) 
```

在实践中，通常使用的方式是通过`limit`. 将结果限制为例如**20** append `.limit(20)`。

```
db.collectionName.find({location: {$near:[x,y]}}).limit(20) 
```

# jenkins - 为什么 Jenkins 作业在 CloudBees 上因“Server.InternalError - 不支持部署类型：zip”而失败？

> ID：15274836
> 
> 赞同：1
> 
> 时间：2013-03-07T15:19:01.497
> 
> 标签：jenkins, playframework, cloudbees

我正在尝试将我的[Play Framework](https://www.playframework.com/)应用程序部署到[CloudBees](http://www.cloudbees.com/)，并且它在本地运行良好`play run`。到 git 存储库后`git push`，它会自动`dist`然后部署生成的 zip 文件，但不幸的是失败了。

这是这个问题的日志：

```
[info] Packaging /scratch/jenkins/workspace/hello-play-tutorial/target/scala-2.11/hello-play-tutorial_2.11-1.0-SNAPSHOT-javadoc.jar ...
[info] Done packaging.
[info] 
[info] Your package is ready in /scratch/jenkins/workspace/hello-play-tutorial/target/universal/hello-play-tutorial-1.0-SNAPSHOT.zip
[info] 
[success] Total time: 5 s, completed Sep 8, 2014 8:07:39 AM
[cloudbees-deployer] Deploying as (jenkins) to the xxx account
[cloudbees-deployer] Deploying hello-play-tutorial
[cloudbees-deployer]   Resolved from workspace as /scratch/jenkins/workspace/hello-play-tutorial/target/universal/hello-play-tutorial-1.0-SNAPSHOT.zip
[cloudbees-deployer] Deploying via API server at https://api.cloudbees.com/api
[cloudbees-deployer] 0 MB
[cloudbees-deployer] 1 MB
[cloudbees-deployer] 3 MB
[cloudbees-deployer] 4 MB
[cloudbees-deployer] 6 MB
[cloudbees-deployer] 7 MB
[cloudbees-deployer] 9 MB
[cloudbees-deployer] 10 MB
[cloudbees-deployer] 12 MB
[cloudbees-deployer] 13 MB
[cloudbees-deployer] 15 MB
[cloudbees-deployer] 16 MB
[cloudbees-deployer] 18 MB
[cloudbees-deployer] 19 MB
[cloudbees-deployer] 21 MB
[cloudbees-deployer] 22 MB
[cloudbees-deployer] 24 MB
[cloudbees-deployer] 25 MB
[cloudbees-deployer] 27 MB
[cloudbees-deployer] 28 MB
com.cloudbees.plugins.deployer.exceptions.DeployException: remote file operation failed: /scratch/jenkins/workspace/hello-play-tutorial/target/universal/hello-play-tutorial-1.0-SNAPSHOT.zip at hudson.remoting.Channel@5c358135:24b747e7
    at com.cloudbees.plugins.deployer.engines.Engine.process(Engine.java:185)
    at com.cloudbees.plugins.deployer.engines.Engine.perform(Engine.java:119)
    at com.cloudbees.plugins.deployer.DeployPublisher.perform(DeployPublisher.java:122)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:20)
    at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:825)
    at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:797)
    at hudson.model.Build$BuildExecution.post2(Build.java:183)
    at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:746)
    at hudson.model.Run.execute(Run.java:1709)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:232)
Caused by: java.io.IOException: remote file operation failed: /scratch/jenkins/workspace/hello-play-tutorial/target/universal/hello-play-tutorial-1.0-SNAPSHOT.zip at hudson.remoting.Channel@5c358135:24b747e7
    at hudson.FilePath.act(FilePath.java:910)
    at hudson.FilePath.act(FilePath.java:887)
    at com.cloudbees.plugins.deployer.engines.Engine.process(Engine.java:179)
    ... 11 more
Caused by: hudson.remoting.ProxyException: hudson.util.IOException2: Server.InternalError - Deployment type not supported: zip
    at com.cloudbees.plugins.deployer.impl.run.RunEngineImpl$DeployFileCallable.invoke(RunEngineImpl.java:382)
    at com.cloudbees.plugins.deployer.impl.run.RunEngineImpl$DeployFileCallable.invoke(RunEngineImpl.java:289)
    at com.cloudbees.plugins.deployer.engines.Engine$FingerprintingWrapper.invoke(Engine.java:271)
    at com.cloudbees.plugins.deployer.engines.Engine$FingerprintingWrapper.invoke(Engine.java:259)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2462)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:328)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask.run(FutureTask.java:262)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:744)
Caused by: hudson.remoting.ProxyException: com.cloudbees.api.BeesClientException: Server.InternalError - Deployment type not supported: zip
    at com.cloudbees.api.BeesClient.readResponse(BeesClient.java:1805)
    at com.cloudbees.api.BeesClient.applicationDeployArchive(BeesClient.java:732)
    at com.cloudbees.plugins.deployer.impl.run.RunEngineImpl$DeployFileCallable.invoke(RunEngineImpl.java:374)
    ... 12 more
Build step 'Deploy applications' marked build as failure
Finished: FAILURE 
```

这个问题之前已经被问过，但还没有有效的答案—— [使用 jenkins 在 cloudbees 中构建播放框架应用程序时出错：不支持部署类型：zip](https://stackoverflow.com/questions/13759368/error-when-building-play-framework-app-in-cloudbees-with-jenkins-deployment-typ)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:27:48.510

您可能必须为您的应用程序设置参数，因为现在它认为您正在尝试`.war`为 Tomcat 部署一个，因为在任何地方都没有指定部署类型。

为此，只需键入以下内容并安装 CloudBees SDK：

```
bees app:update ACCOUNT/APPLICATION -t play2 
```

如果这不起作用，您可以尝试传统的方法，即：

```
bees config:set -a ACCOUNT/APPLICATION containerType=play2 
```

# android - 更新到最新的ADT后，出现R.drawable noclassdeffounderror

> ID：15274838
> 
> 赞同：0
> 
> 时间：2013-03-07T15:19:16.983
> 
> 标签：android

更新到最新的 ADT 后，出现 R.drawable noclassdeffounderror。更新前一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:48:03.590

如果您使用库，请确保导入了正确的 R 文件。我过去在一些工具更新后遇到过这个问题。

在我的情况下，应用程序 A 正在使用库 B。drawable 在 B 中，导入是来自 B 项目的 R 文件。在我的情况下，从 A 项目导入 R 文件修复了它。

# windows - Qt 5 应用程序崩溃

> ID：15274839
> 
> 赞同：1
> 
> 时间：2013-03-07T15:19:17.937
> 
> 标签：windows, qt

我是 Qt 的新手，今天用 MinGW for windows 安装了 SDK 版本 5.0.1。

我对新建项目向导（用于 Qt 小部件项目）生成的框架代码和所有包含的示例应用程序都有同样的问题：代码编译得很好，但在执行时（从 Qt Creator 中）它崩溃并返回代码 -1073741511。

当我尝试调试应用程序时，它给了我错误“在启动程序期间退出，代码为 0xc0000139。”。我试图在 main 函数的第一行设置一个断点，但它甚至没有达到那个点。

我的第一个想法是它可能缺少一些 Qt 库，但在 Qt Creator 的项目配置中设置的环境 PATH 变量指向正确的目录。

奇怪的是，我还在笔记本电脑上安装了相同的版本，一切正常。但是，我不知道我的工作 PC 和我的笔记本电脑之间有任何重大差异。两者都运行 64 位版本的 Windows 8。

# mapping - Structuremap WhatDoIHave 说我有。ObjectFactory 说我没有

> ID：15274840
> 
> 赞同：0
> 
> 时间：2013-03-07T15:19:18.897
> 
> 标签：mapping, structure, open-generics

天哪，路易丝，我正在尝试用 SM 重新安装一个瘟疫缠身的遗留应用程序，但遇到了各种奇怪的事情。所以我为所有奇怪的问题道歉。

所以我有这个代码

```
var whatDoIHave = ObjectFactory.Container.WhatDoIHave();
var validator = ObjectFactory.GetInstance<IValidator<ProfileActivityElement>>(); 
```

我有什么

```
IValidator`1<ProfileActivityElement> (IValidator`1<ProfileActivityElement>)                                                                                                                                                                                                                                                                                                                                                                                                                                                          
Scoped as:  Transient
4b774bc1-b46e-4fc1-95f4-348bb3786dc8   
Configured Instance of HSTM.HLC.BusinessLogic.Validators.ProfileActivityElememntValidator, HSTM.HLC.BusinessLogic, Version=13.1.28.895, Culture=neutral, PublicKeyToken=0ecfe41405c30fb3              
                                                                                                                                       29c5ff3e-73bd-44bb-9fc8-5a81fa640499                                                                                                                                                Configured Instance of HSTM.HLC.BusinessLogic.Validators.ProfileActivityElememntValidator, HSTM.HLC.BusinessLogic, Version=13.1.28.895, Culture=neutral, PublicKeyToken=0ecfe41405c30fb3 
```

验证器收到这样的错误

```
StructureMap Exception Code:  202
No Default Instance defined for PluginFamily     HSTM.HLC.BusinessLogic.IValidator`1[[HSTM.HLC.BusinessLogic.HCC.ProfileActivityElement,     HSTM.HLC.BusinessLogic, Version=13.1.28.895, Culture=neutral,     PublicKeyToken=0ecfe41405c30fb3]], HSTM.HLC.BusinessLogic, Version=13.1.28.895,     Culture=neutral, PublicKeyToken=0ecfe41405c30fb3 
```

这是完整的错误，没有内部错误。也许我只是忽略了一些语法错误。谢谢你的帮助，雷夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:19:07.717

所以这里的问题是我正在使用 ConnectImplementationsToTypesClosing() 来注册我的开放泛型。奇怪的是，这在我拥有的其他一些应用程序中运行良好，但在这个应用程序中，如前所述，它是遗留的和混乱的，它不是。事实上，它将开放的泛型注册为 pluginLibraries，但它们最终不会出现在配置文件 _instances 中，因此当您要求它们时它们并不存在。这就是为什么他们出现在我所拥有的东西上，但在我要求他们时却没有出现。

修复程序是由我忘记了姓氏的著名 Kevin M 提供给我的。我实现了它并且我的应用程序再次运行。

[凯文的修复](https://gist.github.com/KevM/3973710)

谢谢凯文

# web-services - 捕获使用 tSoap Talend 组件返回的附件

> ID：15274841
> 
> 赞同：1
> 
> 时间：2013-03-07T15:19:19.793
> 
> 标签：web-services, jasper-reports, jasperserver, talend

我正在使用 Talend 中的 tSoap 组件来调用 JasperServer Web 服务。Web 服务将 PDF 作为附件返回。我想在 Talend 中捕捉到这一点，但 tSoap 组件似乎不允许我这样做。我所能返回的只是一个不包含附件的 XML 肥皂消息。我将 XML 输出到一个文件，但我看到的只是 XML。

我也尝试在 tWebServices 中执行此操作，但遇到了同样的问题。

有谁知道这是否使用 tSoap 或 tWebServices 组件来完成？还是需要以其他方式完成？

我正在为 ESB 5.1 使用 Talend Open Studio。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:42:41.793

我无法对此进行测试，因为我手头没有任何返回 PDF 文件的 Web 服务。

但你可以试试这个：

1.  设置`tWebService`组件选择正确的操作和参数
2.  在输出映射的右列中，单击 Edit Schema
3.  添加与您的 PDF 文件匹配的列，并使用`Object`类型对其进行设置。
4.  将输出链接到`tJavaFlex`组件并使用对象做任何你想做的事情

我不确定它是否会起作用，但值得一试。

# android - 两部手机上的复选框间距非常不同

> ID：15274845
> 
> 赞同：4
> 
> 时间：2013-03-07T15:19:30.350
> 
> 标签：android, android-layout

我无法确定复选框和与之关联的文本之间的间距。

我的谷歌银河关系显示：

![截图 1](../Images/6232ca005e02a449c06c5b0ad9511d7a.png)

我的银河 s2 显示了这一点：

![截图 2](../Images/aef19a1856327468f8a9fcf7ace4ecc0.png)

我的布局很简单：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:background="@drawable/transparent_content_box"
    android:layout_marginBottom="5dp"
    android:orientation="vertical"
    >

    <CheckBox
        android:id="@+id/edit_profile_private_wardrobe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="@string/edit_profile_wardrobe"
        style="@style/Theme.CheckBoxHint"
        />

    <CheckBox
        android:id="@+id/edit_profile_send_me_vouchers"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:text="@string/edit_profile_vouchers"
        style="@style/Theme.CheckBoxHint"

        />

    <CheckBox
        android:id="@+id/edit_profile_third_party_email"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/edit_profile_email" 
        style="@style/Theme.CheckBoxHint"
        />

</LinearLayout> 
```

和我的风格一样：

```
<style name="Theme.CheckBoxHint">
    <item name="android:textSize">16sp</item>
    <item name="android:textColor">@color/white</item>
</style> 
```

通过使用可绘制的选择器并使用以下方法设置复选框来自定​​义复选框：

```
<style name="Theme.CheckBox" parent="android:Widget.CompoundButton.CheckBox">
    <item name="android:button">@drawable/check_box</item>
</style> 
```

然后在主应用程序主题中使用：

```
<item name="android:checkboxStyle">@style/Theme.PMBAppTheme.CheckBox</item> 
```

我尝试在复选框上将填充设置为 0，但这只会使文本位于复选框本身之上。

如何删除galaxy s2上复选框周围的额外间距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:49:42.220

事实证明，我的设置`<item name="android:background">@null</item>`解决`Theme.CheckBoxHint`了我的问题。必须有一些透明的可绘制对象用作背景。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-07T15:21:32.637

您需要设置边距，而不是填充。确保您的 Theme.CheckBoxHint 边距为 0。

# android - 在 Android 中，如何终止或停止由外部类启动的 AudioTrack 对象播放的声音？

> ID：15274846
> 
> 赞同：0
> 
> 时间：2013-03-07T15:19:32.683
> 
> 标签：android, audio, cardreader, xamarin.android

我目前在 Mono for Android 项目中使用第 3 方库。该库用于将读卡器设备 (IDTech Unimag Reader) 连接到耳机插孔。当我在连接设备的情况下使用应用程序时，一切正常，但是当我将应用程序发送到后台并拔下阅读器设备并插入耳机时，会播放令人讨厌的声音，直到我终止进程，声音才会停止。坏消息是读卡器库没有公开阻止这种声音的方法。是否可以以编程方式停止这种声音而不必终止进程？

# sql - 执行两个表oracle的UNION？

> ID：15274847
> 
> 赞同：0
> 
> 时间：2013-03-07T15:19:37.863
> 
> 标签：sql, oracle

我有两张桌子。`TableA`和`TableB`。这两个表都有一些数据，两列如下。

```
TableA
---------
id  Name
--- ----
1   abc
2   def

TableB
---------
id  Name
--- ----
1   xyz
2   pqr 
```

询问：

```
select id, name 
from TableA 
union
select id, name 
from TableB; 
```

要求是：我需要满足以下条件的查询。

1.  如果 TableA 有 TableB 中不存在的数据，则必须返回 TableA 数据
2.  如果 TableB 有 TableA 中不存在的数据，则必须返回 TableB 数据
3.  如果在具有相同 id 的两个表中都找到记录，则必须返回 TableB 数据

我该如何编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:26:15.753

您的查询不满足 (3)。

假设`id`不可为空，您可以编写：

```
SELECT id, name
  FROM tableB
 UNION ALL
SELECT id, name
  FROM tableA a
 WHERE a.id NOT IN (SELECT b.id
                      FROM tableB); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:23:42.893

您可以使用外部联接而不是联合来执行此操作：

```
select coalesce(TableA.id, TableB.id),
       coalesce(TableB.name, TableA.name)
    from TableA 
    full outer join TableB on
       TableA.id = TableB.id; 
```

[`coalesce`从列表中选择第一个不为 null 的参数](http://www.techonthenet.com/oracle/functions/coalesce.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:22:39.043

```
SELECT [id], [Name]
FROM TableB

UNION

SELECT [id], [Name]
FROM TableA
WHERE [id] NOT IN (SELECT [id] FROM [TableB] 
```

`UNION`将自动排除重复项。您需要更改的只是从`TableB`第一个选择。

编辑：对不起，我想我没有完全阅读你的问题。我根据以下评论编辑了我的答案。

# jquery-mobile - 删除内容和页脚之间的空白：使用 jQuery Mobile 的移动应用程序

> ID：15274850
> 
> 赞同：1
> 
> 时间：2013-03-07T15:19:55.173
> 
> 标签：jquery-mobile

我正在使用 jQuery Mobile 开发一个移动应用程序，并且在内容和页脚之间有一个空白区域。我如何关闭这个空间？

[底部有白色的网站](https://mydevl.georgiasouthern.edu/devl/rthompso/GATA/home.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:48:21.080

这个问题有3个解决方案。

1.  如果您可以**`data-theme`**对内容和页面容器使用相同的内容。不幸的是，它看起来不太好，因为它们之间仍然会有明显的差异

2.  不要**`data-theme`**在容器上使用，但始终只在页面 div 上使用。仍然不是最佳解决方案。

3.  调整您的内容大小，使其填满可用的可用空间。使用此方法：

    ```
    function getRealContentHeight() {
        var header = $.mobile.activePage.find("div[data-role='header']:visible");
        var footer = $.mobile.activePage.find("div[data-role='footer']:visible");
        var content = $.mobile.activePage.find("div[data-role='content']:visible:visible");
        var viewport_height = $(window).height();

        var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
        if((content.outerHeight() - header.outerHeight() - footer.outerHeight()) <= viewport_height) {
            content_height -= (content.outerHeight() - content.height());
        } 
        return content_height;
    } 
    ```

**[在我的其他文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**（我的个人博客）中阅读有关此解决方案的更多信息，或在**[此处](https://stackoverflow.com/a/14550417/1848600)**找到它，查找章节：**获取正确的最大内容高度**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T13:55:31.840

你可以在你的 style/css 中调整 ui-page-theme-a 的颜色，这样你就认不出来了

```
.ui-page-theme-a
{
    background-color: sameAsContent/Footer !important;
    border-color: sameAsContent/Footer !important;

} 
```

# c# - 在 C# 中使用正则表达式过滤值

> ID：15274851
> 
> 赞同：-4
> 
> 时间：2013-03-07T15:19:54.957
> 
> 标签：c#

我希望我的程序丢弃“appGUID”值为“wx”或“null”的所有行

如何使用正则表达式实现这一点。在此之后，它应该返回“WX Edit Bug”的唯一值。我试过了，但看起来我的代码中有一些错误。

我无法弄清楚它的正则表达式模式。请帮忙。

我的日志文件格式为：

> INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器：yukon.corp.adobe.com 用户：xinche appGUID：null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器: yukon.corp.adobe.com 用户:xinche appGUID: null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误: 3419432 服务器: yukon.corp.adobe.com 用户:prerelease appGUID: fcdd2153-bbdf INFO [ com.adobe.watson.vo.BugServices] WX 编辑错误：3419432 服务器：yukon.corp.adobe.com 用户：prerelease appGUID：fcdd2153-bbdf INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器: yukon.corp.adobe.com 用户:xinche appGUID: wx INFO [com.adobe.watson.vo.BugServices] WX 编辑错误: 3494430 服务器: yukon.corp.adobe.com 用户:xinche appGUID: wx INFO [com. adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器：yukon.corp.adobe.com 用户：xinche appGUID：null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3494430 服务器：yukon.corp.adobe.com 用户：xinche appGUID：null INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3419432服务器：yukon.corp.adobe.com 用户：prerelease appGUID：fcdd2153-bbdf INFO [com.adobe.watson.vo.BugServices] WX 编辑错误：3419432 服务器：yukon.corp.adobe.com 用户：prerelease appGUID：fcdd2153- bbdf

我的代码在这里：

```
IEnumerable<string> textLines
                          = Directory.GetFiles(@"C:\Users\karansha\Desktop\Dummy\", "*.*")
                            .Select(filePath => File.ReadLines(filePath))
                            .SelectMany(line => line);
            string x = string.Join(",", textLines);
            Regex regex = new Regex(@"(.*)?(wx|null)\b");
            var newString = regex.Replace(x, String.Empty);
            string discard = string.Join(",", newString);
            List<string> users = new List<string>();
            Regex regex1 = new Regex(@"WX Edit Bug:\s*(?<value>.*?)\s+Server");
            MatchCollection matches1 = regex1.Matches(discard);
            foreach (Match match in matches1)
            {
                var Editbug = match.Groups["value"].Value;
                if (!users.Contains(Editbug)) users.Add(Editbug);
            }
            int WX_Edit = users.Count; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:26:32.877

使用您提供的代码，并假设您的查询的第一部分有效，您可以尝试使用`Where`子句*（未经测试）*：

```
IEnumerable<string> textLines
    = Directory.GetFiles(@"C:\Users\karansha\Desktop\Dummy\", "*.*")
               .Select(filePath => File.ReadLines(filePath))
               .SelectMany(line => line)
               .Where(line => line.Contains("appGUID: null") || line.Contains("appGUID: wx"))
               .ToList(); 
```

# c# - File.Move 原子操作

> ID：15274861
> 
> 赞同：9
> 
> 时间：2013-03-07T15:20:20.560
> 
> 标签：c#, file, atomic

我正在尝试使用 C# 生成一个巨大的文本文件，而另一个进程不断查看该位置并尝试获取该文件（如果有）。

为了使文件原子以下是步骤：

```
1 - Write to file : Filename_temp.txt
2 - Check if Filename.txt already exists then Delete
3 - Do a File.Move to the same destination     
    From filename : Filename_temp.txt 
    TO : Filename.txt 
```

由于 C# 没有重命名，我必须依赖 File.Move，这是否确保移动操作将是原子性的，还是有另一种方法来实现这种原子性？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T15:30:57.060

根据 MSDN 博客文章[How to do atomic writes in a file](http://blogs.msdn.com/b/adioltean/archive/2005/12/28/507866.aspx)，重命名 NTFS 文件是一个原子操作：

> 解决方案？让我们记住元数据更改是原子的。重命名就是这样的情况。因此，我们可以只执行对临时文件的写入，并且在我们知道写入在磁盘上（完成并刷新）之后，我们可以将旧文件与新文件互换。

当然，这并不能保证`File.Move`只发出 NTFS 重命名操作，但我想不出它应该做更复杂的事情的正当理由。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T15:23:45.957

如果源和目标位于同一卷上，则 File.Move 应该是“重命名”。因此，无论文件大小如何，移动都应该是“即时的”。我想这是你的担心？

来自 MS 员工的常见问题解答[http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365240%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365240%28v=vs.85%29.aspx)我们有；

'常见问题：如果现有文件和新文件都在同一个驱动器上，MoveFileEx 是原子的吗？

简单的答案是“通常，但在某些情况下，它会默默地退回到非原子方法，所以不要指望它”。

我想如果它是 100% 关键的，你可以看看 Transactional NTFS。我不确定.Net 中是否有包装器，因此您可能需要使用 P/Invoke。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:29:35.033

This is a feature of windows, rather than c# or the .Net Framework.

See here

[Atomicity of File.Move](https://stackoverflow.com/questions/774098/atomicity-of-file-move)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:30:41.107

您可以将文件直接写入目标，并使用在大文件准备好后创建的零大小信号文件。您的阅读器进程可以查找信号文件并在信号文件可用后读取一个巨大的文件。我认为这可以解决“原子性”问题。

# jquery - 使用 jQuery 绘制六边形

> ID：15274867
> 
> 赞同：1
> 
> 时间：2013-03-07T15:20:40.687
> 
> 标签：jquery, css, jquery-ui, jquery-plugins

是否可以使用 jQuery、HTML 和 CSS 绘制六边形？

如果是，我们该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:23:49.510

jQuery 不画东西。您只能使用 CSS + HTML 来做到这一点。这是一个很酷的教程，展示了一种可以完成的方法：

[http://jtauber.github.com/articles/css-hexagon.html](http://jtauber.github.com/articles/css-hexagon.html)

注意：HTML/CSS 可能并不适合所有情况。改用 SVG 可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:24:07.660

我最好的建议是使用 SVG 或画布。

一个好的 SVG 库的例子是 raphaeljs，看看：

[http://raphaeljs.com/](http://raphaeljs.com/)

[http://raphaeljs.com/animation.html](http://raphaeljs.com/animation.html)

对于画布，制作形状非常简单

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Drawing_shapes](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Drawing_shapes)

# c++ - 使用 MXE - GSL 链接在 Linux for Windows 上进行交叉编译？

> ID：15274868
> 
> 赞同：2
> 
> 时间：2013-03-07T15:20:42.943
> 
> 标签：c++, linux, windows, cross-compiling, mxe

我有一个在 Linux 上开发的 C++ 项目，我想通过向我的 Windows 用户同事提供可执行文件来传递给他们。

我搜索了这个问题，发现一种方法是使用`i586-mingw32msvc-g++`而不是`g++`. 我也明白这个解决方案会跟踪需要重建的链接库的问题，我希望通过使用 MXE 脚本（[http://mxe.cc/](http://mxe.cc/)）来解决这个问题。

我的makefile是（我是新手，欢迎提出建议）：

```
#main.make
CC = i586-mingw32msvc-g++
CFLAGS = -Wall -O2 
LDFLAGS =
SOURCES =  <list of cpp files> 
LDLIBS =  -L/usr/i586-mingw32msvc/lib/ -llapack -lblas -lgsl -lgslcblas -lm -lmingw32
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE = main_simple.exe

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) 
    $(CC) $(LDFLAGS) $(OBJECTS) -o $@ $(LDLIBS) 

.cpp.o:
    $(CC) $(CFLAGS) -c $<   

clean:
    rm *.o main_simple.exe ./Output/* ./Output/*/* ./Output/*/*/* 
```

如果我尝试这样做，`make`我会收到一堆与 gsl 相关的错误，例如：

```
 utilities.o:utilities.cpp:(.text+0x2d1): undefined reference to `_gsl_matrix_alloc'
 utilities.o:utilities.cpp:(.text+0x2dc): undefined reference to `_gsl_vector_alloc'
 ....
 utilities.o:utilities.cpp:(.text+0x42e): undefined reference to `_gsl_matrix_free'
 utilities.o:utilities.cpp:(.text+0x70f): undefined reference to `_gsl_fit_linear'
 utilities.o:utilities.cpp:(.text+0x722): undefined reference to `_gsl_stats_correlation'
 collect2: ld returned 1 exit status 
```

这是否意味着编译器真的找到了我认为我与 MXE 交叉构建的库？我能做些什么？

或者，会`cmake`是更清洁的解决方案吗？我可以用它`.exe`从我的 Linux 机器上创建一个文件吗？或者在那种情况下我应该让我的同事在他们的机器上重新编译？

谢谢你能给我的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-11T11:04:03.317

问题是目前（2016 年 11 月）将 gsl 编译为共享库在 mxe 中已停用。这就是为什么您的链接器找不到对这些函数的引用并且您收到此错误的原因。

您现在可以使用 mxe 交叉编译器自己编译 gsl 或激活共享构建（查看 mxe 源代码中的 src/gsl.mk）。

由于我自己的项目需要 gsl，因此我尝试在对 mxe 的拉取请求中启用共享构建（[https://github.com/mxe/mxe/pull/1568](https://github.com/mxe/mxe/pull/1568)）。你可以试试这个修改你的运气，它确实对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T20:56:35.710

对于 diganose，我建议以下

1.  提供被调用的实际编译器和被调用标志的完整“构建转储”

2.  提供完整的错误日志

3.  使用一些二进制探索工具，如“objdump”（可能它位于 MXE 构建的 mingw 文件夹下，位于“i686-pc-mingw32-objdump”之类的东西下）查看您构建的库，看看它们是否包含丢失的符号.

换句话说，如果您构建了一个应该在其中包含 `_gsl_matrix_alloc' 函数的库，那么请查看您构建的库以确保它存在。如果您不知道哪个库应该包含该函数，那么做一些 shell 工作来搜索所有库以查找该符号名称。

是的，像 cmake 或 qmake 这样的构建系统可能会使事情变得更容易，尽管每次使用构建系统时，您都必须首先了解很多关于构建系统的知识。

最后，可能对您帮助最大的是找到另一个使用与您的库相同的库的程序，并且您知道交叉编译到 Windows，然后复制它们所做的。此类程序的一个很好的来源是访问 mxe.cc 并查看他们网页中的“使用 mxe 的项目”列表，看看他们中是否有人使用 GSL，然后看看他们是如何做到的。查找项目的另一种方法是使用 GSL 查找开源项目，看看他们是否在其主页上宣传 Windows 二进制下载。如果是这样，他们很可能正在使用交叉编译。

祝你好运！

# objective-c - 带有搜索字段的 Cocoa 绑定可变字典

> ID：15274870
> 
> 赞同：2
> 
> 时间：2013-03-07T15:20:44.270
> 
> 标签：objective-c, macos, cocoa, cocoa-bindings

在我的头文件中，我声明了一个属性

```
@property (strong) NSMutableDictionary *myContents; 
```

在我的实现中，我已将 plist（它们是字典）的内容分配给 NSMutableDictionary。

在我的窗口中，我有一个 NSSearchField 我想与 Dictionary 绑定，这就是问题所在。我有几个问题，经过重新研究后仍然不明白。

(1)我应该使用哪个？NSObjectController、NSDictionaryController 或 NSTreeController。

(2)我应该如何将控制器绑定到字典？是否有可以绑定的“键”和“值”，还是必须使用在另一个类中声明的属性并将其添加到字典中？

(3) 我可以将它绑定到一侧有“键”而另一侧有“值”的 NSTableView 吗？

谢谢！

**更新** 我的 plist 就像这个字典（根）>字典>字符串。我设置字典的方式是这样的：

```
NSString *myListPath = [[NSBundle mainBundle] pathForResource:@"Collection" ofType:@"plist"];
self.Dictionary1 = [[NSMutableDictionary alloc]initWithContentsOfFile:myListPath]; 
```

我通过以下方式访问其中之一：

```
 NSString *initialString = [[_Dictionary1 valueForKey:@"Book1"]objectForKey:@"1"]; 
```

Book1 是一个字典（第二个）。“1”是字符串，是 Book1 的章节。那我该怎么分呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:46:18.187

> (1)我应该使用哪个？NSObjectController、NSDictionaryController 或 NSTreeController。

使用 NSDictionaryController。

> (2)我应该如何将控制器绑定到字典？是否有可以绑定的“键”和“值”，还是必须使用在另一个类中声明的属性并将其添加到字典中？

第 1 步：`@property(strong)NSMutableDictionary *dict;`在 .h 文件中创建

第 2 步：创建一个 NSDictionaryController。

第 3 步：检查准备内容。

第 4 步：设置为：

![在此处输入图像描述](../Images/cce4e6dd35f3901e9fcd4331ab55b5fc.png)

第 5 步：创建一个 NSTableView。

第 6 步：对于第一列，执行以下操作：

![在此处输入图像描述](../Images/bf5ad25f5c7b60544af6f198e4d8fa8d.png)

第7步：同样为第二列`value`放入`Model Key Path`。

在此处查找[运行示例](http://www.keepandshare.com/doc/5940093/dictionarycontrollerwithsearchfield-35k?da=y)。

> (3) 我可以将它绑定到一侧有“键”而另一侧有“值”的 NSTableView 吗？

已经完成了。

**通过 NSSearchField 将 NSDictionaryController 与 NSTableView 绑定**

第 1 步：绘制一个 NSSearchField。

第 2 步：将其绑定到 Predicate 选项中的 NSDicitonaryController。

第 3 步：以谓词格式放入`key contains $value`

![在此处输入图像描述](../Images/1cceb7988eb33c979de139a887acc122.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T17:01:53.463

因为你的**第二个问题**是：

> NSString *myListPath = [[NSBundle mainBundle] pathForResource:@"Collection" ofType:@"plist"]; self.Dictionary1 = [[NSMutableDictionary alloc]initWithContentsOfFile:myListPath];
> 
> 我通过以下方式访问其中之一：
> 
> ```
> NSString *initialString = [[_Dictionary1 valueForKey:@"Book1"]objectForKey:@"1"]; 
> ```

您可以使用 ：

```
NSString *book=@"Book1";
NSString *chapter=[book integerValue];
NSString *initialString=self.Dictionary1[book][chapter]; 
```

# powershell - Active Directory Powershell - 获取 OU 详细信息

> ID：15274872
> 
> 赞同：3
> 
> 时间：2013-03-07T15:20:52.277
> 
> 标签：powershell

下面是代码：PowerShell 2.0

```
$DomainDN = Get-ADDomain -Server $svr | Select DistinguishedName | Out-String
$CountryDN = Get-ADOrganizationalUnit -Server $svr -LDAPFilter '(name=Countries)' -SearchBase '$DomainDN' -SearchScope 0 | Select DistinguishedName | Out-String 
```

执行后我收到以下错误：

```
Get-ADOrganizationalUnit : The supplied distinguishedName must belong to one of the following partition(s): 'CN=Configuration,DC=lab,DC=mydomain,DC=com , CN=Sche
ma,CN=Configuration,DC=lab,DC=mydomain,DC=com , DC=eul,DC=lab,DC=mydomain,DC=com , DC=ForestDnsZones,DC=lab,DC=mydomain,DC=com , DC=DomainDns
Zones,DC=eul,DC=lab,DC=mydomain,DC=com'.
At line:3 char:38
+ $CountryDN = Get-ADOrganizationalUnit <<<<  -Server $svr -LDAPFilter '(name=Countries)' -SearchBase '$DomainDN' -SearchScope 0 | Select DistinguishedName | Out-String
    + CategoryInfo          : InvalidArgument: (:) [Get-ADOrganizationalUnit], ArgumentException
    + FullyQualifiedErrorId : The supplied distinguishedName must belong to one of the following partition(s): 'CN=Configuration,DC=lab,DC=mydomain,DC=com , CN= 
   Schema,CN=Configuration,DC=lab,DC=mydomain,DC=com , DC=eul,DC=lab,DC=mydomain,DC=com , DC=ForestDnsZones,DC=lab,DC=mydomain,DC=com ,
   DC=DomainDnsZones,DC=eul,DC=lab,DC=mydomain,DC=com'.,Microsoft.ActiveDirectory.Management.Commands.GetADOrganizationalUnit 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:35:54.490

试试这种方式：

```
$domainDN = get-addomain -server $svr | 
  select-object -expandproperty DistinguishedName
$countryDN = get-adorganizationalunit -server $svr -ldapfilter '(name=Countries)' `
  -searchbase $domainDN | select-object -expandproperty DistinguishedName 
```

select-object -expandproperty 将返回一个字符串而不是 PSObject，因此您不需要输出字符串。

账单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:31:12.160

```
$DomainDN = Get-ADDomain -Server $svr | Select -ExpandProperty DistinguishedName 
```

或者

```
$DomainDN = (Get-ADDomain -Server $svr).DistinguishedName 
```

# java - Java 字符串不可变如何提高安全性？

> ID：15274874
> 
> 赞同：17
> 
> 时间：2013-03-07T15:20:53.303
> 
> 标签：java, string, security

我刚刚了解到 a`String`是不可变的。当我阅读它背后的原因时，出现了一些原因，例如性能提高，或者由于它的值不能被修改，它可以被多个线程共享。这些原因我都明白。

但我不明白它与安全性有何关系。`String`不可变对 Java 安全性有何帮助？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T15:28:51.353

A very common practice in writing class libraries is storing the parameters passed into your API, say, in a constructor, like this:

```
public class MyApi {
    final String myUrl;
    public MyApi(String urlString) {
        // Verify that urlString points to an approved server
        if (!checkApprovedUrl(urlString)) throw new IllegalArgumentException();
        myUrl = urlString;
    }
} 
```

Were `String` mutable, this would lead to a subtle exploit: an attacker would pass a good URL, wait for a few microseconds, and then set the URL to point to an attack site.

Since storing without copying is a reasonably common practice, and because strings are among the most commonly used data types, leaving strings mutable would open up many APIs that are not written yet open to a serious security problem. Making strings immutable closes this particular security hole for all APIs, including the ones that are not written yet.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T15:39:33.513

SecurityManager 概念需要不可变的字符串才能工作。dasbklinkenlight 的答案已经走在正确的轨道上，但可变字符串将完全打破沙盒概念。

例如，当您`new FileInputStream("foo");`读取文件时，API 实现将在内部执行以下操作：

*   使用“foo”作为参数调用安全管理器的 checkRead 方法，如果检查失败则抛出异常
*   如果安全检查通过，则使用操作系统调用实际打开文件

如果调用者能够在这两个步骤之间修改字符串，则一个文件的安全检查可能会成功，而实际上将打开另一个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:23:48.980

字符串是不可变的意味着你不能改变对象本身，但你当然可以改变引用。当您调用（例如）a = "ty" 时，实际上是在将 a 的引用更改为由字符串文字 "ty" 创建的新对象。改变一个对象意味着使用它的方法来改变它的一个字段，例如：

```
Foo x = new Foo("the field");
x.setField("a new field");
System.out.println(x.getField()); // prints "a new field" 
```

在不可变类（声明为 final）中，例如 String，您不能更改当前 String，但可以返回一个新 String，即：

```
String s = "some text";
s.substring(0,4);
System.out.println(s); // still printing "some text"
String a = s.substring(0,4);
System.out.println(a); // prints "some" 
```

# iphone - Facebook 通过 Facebook SDK 对 iPhone 原生应用发表评论

> ID：15274879
> 
> 赞同：2
> 
> 时间：2013-03-07T15:20:58.870
> 
> 标签：iphone, facebook, facebook-graph-api, facebook-ios-sdk

我敢肯定，至少有 100000 款 iPhone 应用程序试图满足我的需求。

我们的 iPhone 应用在 UIWebView 中显示网页（文章）。每篇文章都有**桌面版的**Facebook 评论社交插件。在 iPhone 应用程序上，我想显示评论并允许用户使用本机访问令牌添加自己的评论（意思是，无需再次通过网络连接）。

为什么这个简单而基本的功能如此复杂？

在应用程序中，用户通过 Facebook 登录，所以我有访问令牌。我知道在移动版本中显示社交插件的选项，但在这种情况下，没有使用访问令牌的选项。

我经历的另一个选择是使用 Facebook Graph API，但在这种情况下我不确定：

1.  如何将评论连接到网络上的同一篇文章 URL？
2.  如何在没有添加“基于网络”评论的选项的情况下显示评论

请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:19:40.260

您可以像这样获取评论的第一页：

```
 NSDictionary *params = @[@"ids" : pageId];
    self.connection =
        [FBRequestConnection
         startWithGraphPath:@"comments"
         parameters:params
         HTTPMethod:@"GET"
         completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
             // ...
         }]; 
```

其中 pageId 是包含社交插件的网页的 URL。评论以 JSON 形式返回。此响应包含一个用于获取下一页的 URL，您可以像这样获取它：

```
 FBRequest *fbRequest = [[FBRequest alloc] initWithSession:[FBSession activeSession]
                                                  graphPath:nil];
    FBRequestConnection *connection = [[FBRequestConnection alloc] init];
    [connection addRequest:fbRequest completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        // ...
     }];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:moreCommentsURL];
    connection.urlRequest = request;
    [connection start]; 
```

您必须构建自己的解决方案来显示这些评论。

# android - 如何在android中随机化布局

> ID：15274885
> 
> 赞同：0
> 
> 时间：2013-03-07T15:21:24.583
> 
> 标签：android

我有一个问答游戏，它的活动流程如下：

Q=问题

开始按钮意图> Q1意图> Q2意图> Q3意图> Q4意图> Q5

我怎样才能随机化这些问题？这样用户每次再玩，就不会是Q1先出现了。并且在所有 5 个问题随机出现后，它会指向特定页面，假设在所有 5 个问题随机显示后，它会返回主页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:24:45.123

您应该只创建 1 个问题 Intent 来动态加载您的问题。

因此，在方法中创建一个包含所有问题的简单列表的 Questions.class [`onCreate()`](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)。[随机化](http://developer.android.com/reference/java/util/Random.html)您在布局中加载的问题。

请阅读 Android 开发者指南。

# css - div中的div跳转到IE中的下一行

> ID：15274888
> 
> 赞同：1
> 
> 时间：2013-03-07T15:21:26.920
> 
> 标签：css, internet-explorer, html

我知道这个问题可能已经在这里每天都在讨论，但是在 IE9 中我的分区显示仍然存在问题。大多数解决方案都指向溢出：隐藏和空白：nowrap，或添加额外的边距，但这些似乎都不起作用。

这是我的CSS部分：

```
form.cmxform fieldset{
margin: 1em 2.4em 2.4em;
padding: 1em 2em 1em 2em;
border:2px solid black;
background:#FCFCFC;
}

form.cmxform legend {
font-size:14pt;
padding: 2 5 5 5px;
font-weight: bold;

}
form.cmxform label {

vertical-align: top;
text-align:left;
float: left;
width:450px;
}
form.cmxform fieldset ol {
margin: 0;
padding: 0;
}
form.cmxform fieldset li {
list-style: none;
padding: 5px;
margin: 0;
}  

div {
         display: inline-block;
         overflow: hidden;
         white-space: nowrap;
         }

li > div{
/*  width:750px;*/
border:none;
font-size:14px;
border:1px solid red; /* added for visibility */
display: inline-block;
overflow: hidden;
white-space: nowrap;
margin-right:3px;
}

li > div > div {
display: inline-block;
overflow: hidden;
white-space: nowrap;
border:1px solid black; /* added for visibility */
text-align:center;      /* added for style */
width:100px;
float:left;
margin-right:3px;
} 
```

这是它应该适用的html。

```
<form action="verwerking.php" method="post" class="cmxform">
<fieldset>
<legend>Hoe is dit kind op de peuterspeelzaal?</legend>
  <ol>
     <li><label>&nbsp;</label><div><div>Zeker Niet</div><div>&nbsp;</div><div>&nbsp;   </div><div>&nbsp;</div><div>Zeker Wel</div></div></li>
     <li><label>&nbsp;</label><div><div>--</div><div>-</div><div>0</div><div>+</div><div>++</div></div></li>
     <li><label>Dit kind neemt zonder problemen afscheid van de ouder</label><div>
     <div><input type="radio" name="p_afsche_pr13" value="1"></div>
     <div><input type="radio" name="p_afsche_pr13" value="2"></div>
     <div><input type="radio" name="p_afsche_pr13" value="3"></div>
     <div><input type="radio" name="p_afsche_pr13" value="4"></div>
     <div><input type="radio" name="p_afsche_pr13" value="5"></div></div></li>
</ol>
</fieldset> 
```

它目前在 chrome 中正常运行，但 IE 似乎不同意它。请问有人有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:17:25.623

添加宽度：600px；到 form.cmxform 字段集 {}

```
form.cmxform fieldset {
    margin: 1em 2.4em 2.4em;
    padding: 1em 2em 1em 2em;
    border:2px solid black;
    background:#FCFCFC;
    width:600px;
} 
```

如果您像这样发布它，您的 html 会更容易阅读：（这里没有进行任何更改，只是代码中的空格）

```
<form action="verwerking.php" method="post" class="cmxform">
<fieldset>
    <legend>Hoe is dit kind op de peuterspeelzaal?</legend>
    <ol>
        <li>
            <label>&nbsp;</label>
            <div>
                <div>Zeker Niet</div>
                <div>&nbsp;</div>
                <div>&nbsp;</div>
                <div>&nbsp;</div>
                <div>Zeker Wel</div>
            </div>
        </li>
        <li>
            <label>&nbsp;</label>
            <div>
                <div>--</div>
                <div>-</div>
                <div>0</div>
                <div>+</div>
                <div>++</div>
            </div>
        </li>
        <li>
            <label>Dit kind neemt zonder problemen afscheid van de ouder</label>
            <div>
                <div>
                    <input type="radio" name="p_afsche_pr13" value="1">
                </div>
                <div>
                    <input type="radio" name="p_afsche_pr13" value="2">
                </div>
                <div>
                    <input type="radio" name="p_afsche_pr13" value="3">
                </div>
                <div>
                    <input type="radio" name="p_afsche_pr13" value="4">
                </div>
                <div>
                    <input type="radio" name="p_afsche_pr13" value="5">
                </div>
            </div>
        </li>
    </ol>
</fieldset> 
```

也可以快速搜索“html span”。span 标签是一个内联元素。您可以使用带有 style="display:block;" 的跨度 或“显示：内联块；” 在这种情况下，您可以使用 li 更改所有 div

```
<span style="display:inline-block;">xxxXXXxxx</span> 
```

你不需要漂浮任何东西

# vbscript - 无法从任务调度程序映射网络驱动器 - 正在工作

> ID：15274891
> 
> 赞同：1
> 
> 时间：2013-03-07T15:21:29.220
> 
> 标签：vbscript, network-drive, fso

我们的本地服务器 (A) 上有一个 vbs 文件，它使用 mapnetworkdrive 联系远程位置 (B) 的两台服务器并将文件从 B 复制到 A。该脚本已经运行了大约 3 个月，没有任何问题。从上周开始，如果脚本从任务计划程序运行，它就无法将网络驱动器映射到 B，但是从命令行运行或双击 vbs 文件时它工作正常。

我知道脚本正在运行，因为它会在运行时记录内容。其中之一是尝试映射网络驱动器时的错误消息。它看起来像这样：

```
boh_mapped_drive_letter = "w:"
boh_mapped_drive = "\\xxx.xxx.xxx.xxx\sharename"
NetworkObject.MapNetworkDrive boh_mapped_drive_letter, boh_mapped_drive, False,      <username>, <password>
if err.number <> 0
    appendToFile logfile, vbtab & "error occurred - " & vbtab & err.number & " " & err.source & " " & err.description
    Err.Clear
end if 
```

我得到的错误是：

> 53 Microsoft VBScript 运行时错误 找不到文件

什么可能导致计划任务无法映射网络驱动器，但通过手动执行它仍然可以工作？

当您双击或 CLI 执行一个 vbs 文件时，它在哪个用户帐户下运行？它与从任务计划程序运行它的用户帐户不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:36:53.267

看起来我们可以通过选中“以最高权限运行”框来修复它。

# c++ - C++：严格别名与联合滥用

> ID：15274895
> 
> 赞同：11
> 
> 时间：2013-03-07T15:21:46.310
> 
> 标签：c++, pointers, unions, memory-alignment

提前道歉，因为这可能是一个愚蠢的第一个帖子。虽然有很多关于这个主题的材料，但对我来说，只有很少一部分是确定的和/或可以理解的。

我有一个`AlignedArray`模板类可以在堆上以任意对齐方式动态分配内存（我需要 32 字节对齐 AVX 汇编例程）。这需要一些丑陋的指针操作。

Agner Fog 在 cppexamples.zip 中提供了一个示例类，它滥用联合来执行此操作 ( [http://www.agner.org/optimize/optimization_manuals.zip](http://www.agner.org/optimize/optimization_manuals.zip) )。但是，我知道写给工会的一个成员然后从另一个成员读取会导致 UB。

AFAICT 将任何指针类型别名为 a 是安全的`char *`，但仅限于一个方向。这就是我的理解变得模糊的地方。这是我的课程的精简版`AlignedArray` （基本上是对 Agner 的重写，以帮助我理解）：

```
template <typename T, size_t alignment = 32>
class AlignedArray
{
    size_t m_size;
    char * m_unaligned;
    T * m_aligned;

public:
    AlignedArray (size_t const size)
        : m_size(0)
        , m_unaligned(0)
        , m_aligned(0)
    {
        this->size(size);
    }

    ~AlignedArray ()
    {
        this->size(0);
    }

    T const & operator [] (size_t const i) const { return m_aligned[i]; }

    T & operator [] (size_t const i) { return m_aligned[i]; }

    size_t const size () { return m_size; }

    void size (size_t const size)
    {
        if (size > 0)
        {
            if (size != m_size)
            {
                char * unaligned = 0;
                unaligned = new char [size * sizeof(T) + alignment - 1];
                if (unaligned)
                {
                    // Agner:
                    /*
                    union {
                        char * c;
                        T * t;
                        size_t s;
                    } aligned;
                    aligned.c = unaligned + alignment - 1;
                    aligned.s &= ~(alignment - 1);
                    */

                    // Me:
                    T * aligned = reinterpret_cast<T *>((reinterpret_cast<size_t>(unaligned) + alignment - 1) & ~(alignment - 1));

                    if (m_unaligned)
                    {
                        // Agner:
                        //memcpy(aligned.c, m_aligned, std::min(size, m_size));

                        // Me:
                        memcpy(aligned, m_aligned, std::min(size, m_size));

                        delete [] m_unaligned;
                    }
                    m_size = size;
                    m_unaligned = unaligned;

                    // Agner:
                    //m_aligned = aligned.t;

                    // Me:
                    m_aligned = aligned;
                }
                return;
            }
            return;
        }
        if (m_unaligned)
        {
            delete [] m_unaligned;
            m_size = 0;
            m_unaligned = 0;
            m_aligned = 0;
        }
    }
}; 
```

那么哪种方法是安全的（r）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:09:43.177

我有实现（替换）`new`和`delete`运算符的代码，适用于 SIMD（即 SSE / AVX）。它使用以下您可能会觉得有用的功能：

```
static inline void *G0__SIMD_malloc (size_t size)
{
    constexpr size_t align = G0_SIMD_ALIGN;
    void *ptr, *uptr;

    static_assert(G0_SIMD_ALIGN >= sizeof(void *),
                  "insufficient alignment for pointer storage");

    static_assert((G0_SIMD_ALIGN & (G0_SIMD_ALIGN - 1)) == 0,
                  "G0_SIMD_ALIGN value must be a power of (2)");

    size += align; // raw pointer storage with alignment padding.

    if ((uptr = malloc(size)) == nullptr)
        return nullptr;

    // size_t addr = reinterpret_cast<size_t>(uptr);
    uintptr_t addr = reinterpret_cast<uintptr_t>(uptr);

    ptr = reinterpret_cast<void *>
        ((addr + align) & ~(align - 1));

    *(reinterpret_cast<void **>(ptr) - 1) = uptr; // (raw ptr)

    return ptr;
}

static inline void G0__SIMD_free (void *ptr)
{
    if (ptr != nullptr)
        free(*(reinterpret_cast<void **>(ptr) - 1)); // (raw ptr)
} 
```

这应该很容易适应。显然，您将替换`malloc`and `free`，因为您正在使用全局`new`and`delete`用于原始（char）存储。它假设`size_t`对于地址算术来说足够宽 - 在实践中是正确的，但`uintptr_t`from`<cstdint>`会更正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:30:54.163

要回答您的问题，这两种方法都同样安全。唯一真正令人讨厌的两个操作是强制转换为`size_t`and `new char[stuff]`。您至少应该使用`uintptr_t`from`<cstdint>`为第一个。第二个操作创建了您唯一的指针别名问题，因为从技术上讲，`char`构造函数在每个`char`元素上运行，并且构成通过`char`指针访问数据。你应该`malloc`改用。

另一个所谓的“指针别名”不是问题。那是因为除了`new`操作之外，您没有通过别名指针访问任何数据。您只能通过`T *`对齐后获得的数据访问数据。

当然，您必须记住构造所有数组元素。即使在您的版本中也是如此。谁知道`T`会放什么样的人。而且，当然，如果你这样做，你必须记住调用它们的析构函数，并且必须记住在复制它们时处理异常（`memcpy`不要剪切它）。

如果您有特定的 C++11 功能，则不需要这样做。C++11 有一个专门用于将指针对齐到任意边界的函数。界面有点时髦，但它应该可以完成这项工作。该调用在.Thanks中[`::std::align`](http://en.cppreference.com/w/cpp/memory/align)定义。感谢[R. Martinho Fernandes](https://stackoverflow.com/users/46642/r-martinho-fernandes)指出。`<memory>`

这是建议修复的函数版本：

```
#include <cstdint>  // For uintptr_t
#include <cstdlib>  // For malloc
#include <algorithm>

template <typename T, size_t alignment = 32>
class AlignedArray
{
    size_t m_size;
    void * m_unaligned;
    T * m_aligned;

public:
    AlignedArray (size_t const size)
        : m_size(0)
        , m_unaligned(0)
        , m_aligned(0)
    {
        this->size(size);
    }

    ~AlignedArray ()
    {
        this->size(0);
    }

    T const & operator [] (size_t const i) const { return m_aligned[i]; }

    T & operator [] (size_t const i) { return m_aligned[i]; }

    size_t size() const { return m_size; }

    void size (size_t const size)
    {
        using ::std::uintptr_t;
        using ::std::malloc;

        if (size > 0)
        {
            if (size != m_size)
            {
                void * unaligned = 0;
                unaligned = malloc(size * sizeof(T) + alignment - 1);
                if (unaligned)
                {
                    T * aligned = reinterpret_cast<T *>((reinterpret_cast<uintptr_t>(unaligned) + alignment - 1) & ~(alignment - 1));

                    if (m_unaligned)
                    {
                        ::std::size_t constructed = 0;
                        const ::std::size_t num_to_copy = ::std::min(size, m_size);

                        try {
                            for (constructed = 0; constructed < num_to_copy; ++constructed) {
                                new(aligned + constructed) T(m_aligned[constructed]);
                            }
                            for (; constructed < size; ++constructed) {
                                new(aligned + constructed) T;
                            }
                        } catch (...) {
                            for (::std::size_t i = 0; i < constructed; ++i) {
                                aligned[i].T::~T();
                            }
                            ::std::free(unaligned);
                            throw;
                        }

                        for (size_t i = 0; i < m_size; ++i) {
                            m_aligned[i].T::~T();
                        }
                        free(m_unaligned);
                    }
                    m_size = size;
                    m_unaligned = unaligned;
                    m_aligned = aligned;
                }
            }
        } else if (m_unaligned) { // and size <= 0
            for (::std::size_t i = 0; i < m_size; ++i) {
                m_aligned[i].T::~T();
            }
            ::std::free(m_unaligned);
            m_size = 0;
            m_unaligned = 0;
            m_aligned = 0;
        }
    }
}; 
```

# ios - 呈现第一个视图后导航视图控制器

> ID：15274896
> 
> 赞同：0
> 
> 时间：2013-03-07T15:21:49.837
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我刚刚更改了我的应用程序，我很困惑。它从根视图开始，然后推送第二个视图，该视图上有一个按钮可以推送另一个视图......所以我决定改为呈现第二个视图控制器，但现在不能从第二个视图推送另一个视图。

根视图中的代码：

```
 //This works
 [[self navigationController] presentViewController:secondViewController
                                          animated:YES completion:nil]; 
```

第二视图的代码：

```
 //This Does not work
 [[self navigationController] pushViewController:locactionView animated:YES]; 
```

编辑：对不起，缺乏细节。不会抛出异常，它根本不会推送“位置视图”。在我展示视图之前，我推送了它，一切正常。同样，当视图最初被推送时，导航栏是可见的，现在正在呈现视图控制器，我无法推送视图或查看导航栏。我希望这有帮助。我不知道我可以添加什么代码，因为在问题发生之前我只更改了一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:28:53.223

In your AppDelegate you could initialize your NavigationController with the rootViewController first, and then you could push the viewControllers on the stack, that could solve your problem

```
YourNavigationController *yourNavigationController = [[YourNavigationController alloc] initWithRootViewController:self.firstViewController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:37:52.750

如果您的层次结构设置如下：

```
self.rootViewController = [[RootViewController alloc] initWithNibName:@"RootViewController"
                                                               bundle:nil];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.rootViewController];
self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible]; 
```

你不应该对这些东西有任何问题。您的问题可能是您正试图从您以模态方式呈现的视图控制器推送到导航控制器，而您不能这样做

# regex - 查找脚本标签中使用的 Razor

> ID：15274901
> 
> 赞同：1
> 
> 时间：2013-03-07T15:21:59.927
> 
> 标签：regex, asp.net-mvc, visual-studio-2010, razor, visual-studio-2012

在 Visual Studio 2010/2012 中，如何找到所有可能包含与 Razor 混合的 javascript 的脚本标签？

这应该是匹配的：

```
<script>
    var hola = '@serverVariable';
    alert(hola);
</script>

<script>
    var somenumber = @Int32.MaxValue;
    alert(somenumber );
</script>

<script>        
    @if(someFlag)
    {           
       @:alert('hello');
    }else{
       @:alert('bye');
    }
</script> 
```

这不应该匹配：

```
<script>
    @* A valid comment *@
    alert(hola);
</script>

<script>
    alert('hola  @@');
</script>

<script>
    alert('hola');
</script> 
```

我正在尝试将其作为正则表达式，但 VisualStudio 需要数小时才能找到所有引用，它是递归的，我不知道如何打破递归。

```
<script{1}([\s\r\n]|.)*?[^*@]@[^*@]([\s\r\n]|.)*?</script{1} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:34:48.443

以下似乎有效。它假定`<`脚本标签之间没有。

```
\<script\>([^<]|\n)*[^*@]\@[^*@]([^<]|\n)*\</script\> 
```

`@`似乎需要在 VS 正则表达式中进行转义 - 它*有时*与空格字符匹配。
和需要转义，否则它们表示单词的开始/结束`<`。`>`

我建议您使用具有更好正则表达式引擎的文本编辑器，例如 Notepad++，或尝试加载项：[NET Regular Expressions Find and Replace Add-In for Visual Studio 2008](http://www.codeproject.com/Articles/26929/NET-Regular-Expressions-Find-and-Replace-Add-In-f)。

# mod-rewrite - htaccess：简化较长的重写规则

> ID：15274903
> 
> 赞同：0
> 
> 时间：2013-03-07T15:22:07.560
> 
> 标签：mod-rewrite

我想写我的 .htaccess 文件，所以我有这部分

（例如：[http](http://www.mysite.com/tutorial/php/bydate/p7) ://www.mysite.com/tutorial/php/bydate/p7 ）

```
RewriteRule ^(album|tutorial)/(.*)/(bydate|byuser|byrate|bypost)/(asc|desc)/p([0-9]+)$ $1.php?cat=$2&sort=$3&order=$4&p=$5 [QSA]
RewriteRule ^(album|tutorial)/(.*)/(bydate|byuser|byrate|bypost)/(asc|desc)/$ $1.php?cat=$2&sort=$3&order=$4 [QSA]
RewriteRule ^(album|tutorial)/(.*)/(bydate|byuser|byrate|bypost)/p([0-9]+)$ $1.php?cat=$2&sort=$3&p=$4 [QSA]
RewriteRule ^(album|tutorial)/(.*)/(bydate|byuser|byrate|bypost)/$ $1.php?cat=$2&sort=$3 [QSA]
RewriteRule ^(album|tutorial)/(.*)/(asc|desc)/p([0-9]+)$ $1.php?cat=$2&order=$3&p=$4 [QSA]
RewriteRule ^(album|tutorial)/(.*)/(asc|desc)/$ $1.php?cat=$2&order=$3 [QSA]
RewriteRule ^(album|tutorial)/(.*)/p([0-9]+)$ $1.php?cat=$2&p=$3 [QSA]
RewriteRule ^(album|tutorial)/(.*)/$ $1.php?cat=$2 [QSA] 
```

我的问题是：

1-使用它更好吗？或者就足够了

```
RewriteRule ^(album|tutorial)/(.*)/$ $1.php?cat=$2 [QSA] 
```

（例如：[http://www.mysite/tutorial/php/?sort=bydate&order=desc&p=2](http://www.mysite/tutorial/php/?sort=bydate&order=desc&p=2)）

我对待我的php文件中的参数？

2-如果我想使用第一部分，有什么方法可以简化它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:24:32.133

处理 PHP 文件中的参数总是更好的方法。否则，您将拥有一个包含一百个 RewriteRules 的 .htaccess 文件...

看看 Wordpress 的 .htaccess 文件：

```
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

一切（现有文件和目录除外）都被重定向到 index.php 文件。这是所有的了。

# android - 更新 ADT 后创建 AVD 时出错，解析 devices.xml 时出错

> ID：15274904
> 
> 赞同：6
> 
> 时间：2013-03-07T15:22:07.607
> 
> 标签：android, sdk, adt

我刚刚将我的 Android SDK 以及我的 ADT 更新到了最新版本，之后我无法创建新的 AVD。

这是它给我的错误：

```
[2013-03-07 19:55:07 - SDK Manager] Error parsing C:\Users\sr\.android\devices.xml, backing up to C:\Users\sr\.android\devices.xml.old
[2013-03-07 19:55:15 - SDK Manager] Error parsing C:\Users\sr\.android\devices.xml, backing up to C:\Users\sr\.android\devices.xml.old 
```

我已经重新安装了我的 Eclipse、Android SDK 和 ADT，但仍然出现这个错误。我在 Windows 7 上运行此程序。如何解决此问题以便创建新的 AVD？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T05:55:46.860

我已经解决了这个问题。这是程序。只需检查 C:\AndroidInstallationDir\android-sdk- windows\tools\lib 中的旧 devices.xml 是否包含少数设备元素。然后将此 devices.xml 粘贴到 C:\Users\.android 重新启动您的 Eclipse。请尝试是否有效。谢谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T19:05:40.380

通过重命名/删除 devices.xml 文件，我能够让它再次工作；然后它重新创建它。另请参阅：[打开 AVD 管理器时出错](https://stackoverflow.com/questions/14110597/error-while-opening-avd-manager)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-07T03:49:08.803

按照以下步骤解决了我的问题

1.  将 Eclipse ADT 插件升级到最新版本（我使用的是 22.0.4->22.0.5 ）
2.  删除了 AVD 中新添加的虚拟设备

它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T12:12:18.847

我遇到了同样的问题，我通过编辑“devices.xml”并将“，”更改为“。”解决了这个问题。在价值观：

*   旧条目：
    ``<d:diagonal-length>4,30</d:diagonal-length>``
*   新条目：
    ``<d:diagonal-length>4.30</d:diagonal-length>``

*   旧条目：
    ``<d:xdpi>216,97</d:xdpi>``
    ``<d:ydpi>216,97</d:ydpi>``

*   新条目：
    ``<d:xdpi>216.97</d:xdpi>``
    ``<d:ydpi>216.97</d:ydpi>``

现在一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T08:09:24.867

我在这里遇到了类似的问题：
[Error parsing C:\Documents and Settings\<user>\.android\devices.xml](https://stackoverflow.com/questions/18402913/error-parsing-c-documents-and-settings-user-android-devices-xml)

这解决了它：
[https ://stackoverflow.com/a/18404643/891479](https://stackoverflow.com/a/18404643/891479)

这里有一个解释：
[https ://stackoverflow.com/a/13429067/891479](https://stackoverflow.com/a/13429067/891479)

# doctrine - 学说：构建模式无法正确生成模式

> ID：15274908
> 
> 赞同：0
> 
> 时间：2013-03-07T15:22:21.720
> 
> 标签：doctrine, schema, symfony-1.4, sfdoctrineguard

我之前创建了一个带有 sfDoctrineGuard 表和另外两个表的数据库：**almunos**和**socials**。我正在尝试运行任务

```
symfony doctrine:build-schema 
```

并且显然似乎有效，但令人惊讶的是只出现与 sfDoctrineGuard 插件相关的表，而不是其他两个表。为什么？我错过了什么？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:12:51.650

正如任务描述所说：

> 该`doctrine:build-schema`任务自省数据库以创建模式：
> 
> ```
> ./symfony doctrine:build-schema 
> ```
> 
> 该任务在`config/doctrine`.

因此，您必须查看文件夹内部`config/doctrine`以检查生成的`schema.yml`.

# ruby-on-rails - 使用多个 belongs_to 关联对同一模型进行多次连接

> ID：15274910
> 
> 赞同：0
> 
> 时间：2013-03-07T15:22:24.927
> 
> 标签：ruby-on-rails, associations, squeel

我有一个类协议，其中有两个属于成员类的关联 - 被称为主要和次要：

```
class Agreement < ActiveRecord::Base
  belongs_to :primary, class_name: 'Member'
  belongs_to :secondary, class_name: 'Member'
  ...

  def self.by_member(member_attribute_hash)
    # returns any agreements that has a primary OR secondary member that matches any of the values 
    # in the member_attribute_hash
    ...
  end
end 
```

Member 类不知道与 Agreement 类的关联——它不需要：

```
class Member < ActiveRecord::Base
  # contains surname, given_names, member_number
  ...

  def self.by_any(member_attribute_hash)
    # returns any member where the member matches on surname OR given_names OR member_number
    ...
  end
end 
```

我想做的是搜索主要或次要成员与一组标准匹配的所有协议。

从之前的工作（[参见问题 #14139609](https://stackoverflow.com/questions/14139609/can-you-add-clauses-in-a-where-block-conditionally-when-using-squeel)）中，我整理出了如何构建条件 where 子句`Member.by_any()`。

在搜索协议时尝试重用该方法导致我尝试这样做：

```
class Agreement < ActiveRecord::Base
  ...

  def self.by_member(member_attribute_hash)
    Agreement.joins{primary.outer}.merge(Member.by_any(member_attribute_hash)).joins{secondary.outer}.merge(Member.by_any(member_attribute_hash))
  end
end 
```

在控制台中运行此命令时`member_attribute_hash = {surname: 'Freud'}`，生成的 SQL 无法使用为第二次加入成员生成的别名：

```
SELECT "agreements".* 
FROM "agreements" 
  LEFT OUTER JOIN "members" 
        ON "members"."id" = "agreements"."primary_id" 
  LEFT OUTER JOIN "members" "secondarys_agreements" 
        ON "secondarys_agreements"."id" = "agreements"."secondary_id" 
WHERE "members"."surname" ILIKE 'Freud%' 
  AND "members"."surname" ILIKE 'Freud%' 
```

注意 WHERE 子句中的重复条件。这将返回主要成员具有“弗洛伊德”等姓氏的协议，但忽略次要成员条件，因为别名未通过合并。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:53:50.600

在努力理解这一点之后，我最终用`Member.by_any`Squeel 替换了示波器`sifter`：

```
class Member < ActiveRecord::Base
  # contains surname, given_names, member_number
  ...

  def self.by_any(member_attribute_hash)
    # returns any member where the member matches on surname OR given_names OR member_number
    squeel do
      [
        (surname =~ "#{member[:surname]}%" if member[:surname].present?),
        (given_names =~ "#{member[:given_names]}%" if member[:given_names].present?),
        (member_number == member[:member_number] if member[:member_number].present?)
      ].compact.reduce(:|)
      # compact to remove the nils, reduce to combine the cases with |
    end
  end
end 
```

`sifter`在 the和 the之间的唯一区别（代码方面）是将作用域中`scope`的 替换为sifter 中的。`where``squeel`

因此，我现在能够从协议模型中引用筛选器，而不是使用 a从协议模型`merge`中访问范围。它看起来像：`Member.by_any``Member :by_any`

```
class Agreement < ActiveRecord::Base
  ...

  def self.by_member(member_attribute_hash)
    Agreement.joins{primary.outer}.where{primary.sift :by_any, member_attribute_hash}.joins{secondary.outer}.where{secondary.sift :by_any, member_attribute_hash}
  end
end 
```

这解决了混叠问题 -*开始庆祝吧！*：

```
SELECT "agreements".* 
FROM "agreements" 
  LEFT OUTER JOIN "members" 
        ON "members"."id" = "agreements"."primary_id" 
  LEFT OUTER JOIN "members" "secondarys_agreements" 
        ON "secondarys_agreements"."id" = "agreements"."secondary_id" 
WHERE "members"."surname" ILIKE 'Freud%' 
  AND "secondarys_agreements"."surname" ILIKE 'Freud%' 
```

但我仍然没有得到我预期的结果——*庆祝活动被搁置了*。什么问题？`AND`where 子句中的错误。经过更多的挖掘（并且远离计算机一晚），一个精神焕发的头脑决定尝试这个：

```
class Agreement < ActiveRecord::Base
  ...

  def self.by_member(member_attribute_hash)
    Agreement.joins{primary.outer}.joins{secondary.outer}.where{(primary.sift :by_any, member_attribute_hash) | (secondary.sift :by_any, member_attribute_hash)}
  end
end 
```

制作这个：

```
SELECT "agreements".* 
FROM "agreements" 
  LEFT OUTER JOIN "members" 
        ON "members"."id" = "agreements"."primary_id" 
  LEFT OUTER JOIN "members" "secondarys_agreements" 
        ON "secondarys_agreements"."id" = "agreements"."secondary_id" 
WHERE ((("members"."surname" ILIKE 'Freud%') 
   OR ("secondarys_agreements"."surname" ILIKE 'Freud%'))) 
```

啊甜蜜...*重新开始庆祝*...现在我得到的协议具有根据单个筛选器中定义的规则匹配的主要或次要成员。

对于他在 Squeel 上所做的所有工作，Ernie Miller 大受好评。

# sql - 带有内部和外部联接查询的自联接

> ID：15274911
> 
> 赞同：3
> 
> 时间：2013-03-07T15:22:26.190
> 
> 标签：sql, sql-server, inner-join, outer-join, self-join

我有一个表，其中一个列（属性）包含名字、姓氏、帐号和与数据库中的事物相关的任何其他信息等信息。另一列 (attributeType) 包含一个数字，指示属性是什么，例如 1 可能是名字，2 姓氏和 3 帐号等。还有另一列 (enddate) 通过在那里有一个日期来指示记录是否是当前的。通常它会在当前设置为 9999 年，否则设置为过去的某个日期。描述同一事物的所有数据在另一列（实体）中也具有唯一值，因此实体列中具有相同编号的每条记录都将描述一个人。例如

```
entity  attribute  attributetype  enddate
------  ---------  -------------  --------
1       ben        1              9999-1-1
1       alt        2              9999-1-1
1       12345      3              9999-1-1
2       sam        1              9999-1-1
2       smith      2              9999-1-1
2       98765      3              1981-1-1 
```

我想从上表中选择一个具有特定名字和姓氏的人，该名字将是当前的，但如果不是，则不输出帐号。假设该表名为 tblAccount，我对名称部分执行以下操作：

```
select ta1.attribute '1st Name', ta2.attribute 'last name'
from tblAccount ta1
inner join tblAccount ta2 on ta1.entity = ta2.entity
where ta1.attribute = 'sam' and ta2.attribute = 'smith'
      and ta1.attributetype = 1 and ta2\. attributetype = 2
      and ta1.enddate > getdate() and ta2.enddate > getdate() 
```

它按预期输出名字和姓氏，但是当我想包含帐号列时，我什么也没得到：

```
select ta1.attribute '1st Name', ta2.attribute 'last name', ta3.attribute 'account#'
from tblAccount ta1
inner join tblAccount ta2 on ta1.entity = ta2.entity
left join tblAccount ta3 on ta1.entity = ta3.entity
where ta1.attribute = 'sam' and ta2.attribute = 'smith'
      and ta1.attributetype = 1 and ta2\. attributetype = 2
      and ta1.enddate > getdate() and ta2.enddate > getdate()
      and ta3.attributetype = 3 and ta3.enddate > getdate() 
```

我想看到的是在上述情况下，在 account# 列中没有任何内容输出的名字和姓氏，但它不是最新的。我做错了什么，如何更正此查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:29:02.010

You have to move the date comparison to the join condition:

```
select ta1.attribute '1st Name'
    , ta2.attribute 'last name'
    , ta3.attribute 'account#'
from tblAccount ta1
inner join tblAccount ta2 
    on ta1.entity = ta2.entity
     and ta1.attributetype = 1 and ta2\. attributetype = 2
     and ta1.enddate > getdate() and ta2.enddate > getdate()
left join tblAccount ta3 on ta1.entity = ta3.entity
      and ta3.attributetype = 3 and ta3.enddate > getdate()
where ta1.attribute = 'sam' and ta2.attribute = 'smith' 
```

When it's in the where clause it's comparing getdate() to NULL if there is no account, which returns NULL. So no record.

EDIT:

In response to the valid concern about multiple valid records, and to make the code a little more maintenance freindly:

```
DECLARE @FNAME VARCHAR(50) = 'sam'
    , @LNAME VARCHAR(50) = 'smith'
    , @now DATETIME2(7) = GETDATE();

SELECT 
    name.[1st Name]
    , name.[last name]
    , name.entity
    , 
        (
            select 
                top 1 
                ta3.attribute
            FROM tblAccount ta3 
            WHERE 
                ta3.entity = name.entity
                and 
                ta3.attributetype = 3 
                and 
                ta3.enddate > @now
            ORDER BY 
                ta3.enddate 
        )
FROM 
    (        
        select 
            ta1.attribute '1st Name'
            , ta2.attribute 'last name'
            , ta.entity
            , ROW_NUMBER()
                OVER(
                    PARTITION BY 
                        ta1.entity
                    ORDER BY 
                        ta1.enddate
                    ) r
        from 
            tblAccount ta1
        inner join tblAccount ta2 
            on 
            ta1.entity = ta2.entity
            and 
            ta2\. attributetype = 2
            and 
            ta2.enddate > @now
            and 
            ta2.attribute = @LNAME
        where 
            ta1.attributetype = 1 
            and 
            ta1.attribute = @fname 
            and 
            ta1.enddate > @now
    ) name
WHERE    
    NAME.r = 1 
```

;

This code works around the implied assumptions of one entity per first/last name and exactly one enddate after the execution time. The variables are a little more stored proc friendly, and allow you to change the "as of" date. And if you're stuck with EAV, you will likely want stored procs. I'm taking the first record ending after the date in question, on the assumption that any later record(s) should only be valid after that one expires. Maybe it's overkill, since it's beyond the scope of the OP's question but it's a valid point.

I say "stuck with EAV". While EAV isn't always bad; neither is shooting someone in the back. In either case, you'd better have solid justification if you expect to get it past a jury. In a NoSQL storage pattern it's fine, but EAV is usually a poor implementation pattern for the RDBMS paradigm.

Though from the OP's later comment, it looks like he's hit on one of the better reasons.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:45:44.137

在这个模型中，每个属性实际上是一个不同的实体，但它们都在同一个物理表中共享相同的存储（为什么？）。这产生：

```
with data as (
   select entity = 1, attribute = 'ben',   attributeType=1, enddate = convert(datetime,'99990101') union all
   select entity = 1, attribute = 'alt',   attributeType=2, enddate = convert(datetime,'99990101') union all
   select entity = 1, attribute = '12345', attributeType=3, enddate = convert(datetime,'99990101') union all
   select entity = 2, attribute = 'sam',   attributeType=1, enddate = convert(datetime,'99990101') union all
   select entity = 2, attribute = 'smith', attributeType=2, enddate = convert(datetime,'99990101') union all
   select entity = 2, attribute = '67890', attributeType=3, enddate = convert(datetime,'99990101') union all
   select entity = 2, attribute = '68790', attributeType=3, enddate = convert(datetime,'20130331') union all
   select entity = 2, attribute = '876', attributeType=3, enddate = convert(datetime,'19810101') 
) 
select top 1
    FirstName, LastName, AccountNum
from (
  select top 1 
    a1.entity, FirstName, LastName
  from (
    select entity, enddate, attribute as FirstName
    from data d 
    where d.enddate >= getdate()
      and attributeType = 1
  ) a1
  join (
    select entity, enddate, attribute as LastName
    from data 
    where enddate >= getdate()
      and attributeType = 2
  ) a2 on a1.entity = a2.entity
     and a1.enddate = a2.enddate
  where FirstName = 'sam' and LastName = 'smith'
    and a1.enddate >= getdate() and a2.enddate >= getdate()
  order by a1.enddate
) E
left join (
  select entity, enddate, attribute as AccountNum
  from data 
  where enddate >= getdate()
    and attributeType = 3
) a3 on a3.entity = E.entity
order by a3.enddate 
```

返回：

```
FirstName LastName AccountNum
--------- -------- ----------
sam       smith    68790 
```

请注意，至少对于会计部门来说，在一个月的安静时间输入未来的交易是很常见的，特别是如果这些交易将在一个月的繁忙时间（即月末）生效。年度交易也是如此。不应该假设只有一条记录可以存在到期 > getdate()。

# cron - 如何设置 Cron 作业？

> ID：15274912
> 
> 赞同：0
> 
> 时间：2013-03-07T15:22:27.927
> 
> 标签：cron, invoice

我正在尝试按照[http://www.fusioninvoice.com/support/recurring-invoices](http://www.fusioninvoice.com/support/recurring-invoices)上的记录设置经常性发票，但我不明白也无法弄清楚该怎么做。

我找到了一个字母数字“钥匙”，但不确定在哪里或做什么？

我需要创建文件还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:37:13.233

如果 curl 在您的系统上可用，您可以安排它来 ping URL。使用 crontab -e 编辑 cron 表并创建一个新条目。例如，这将在每天午夜 ping URL。

```
0 0 * * *  /usr/bin/curl --silent http://your-server.com/index.php/invoices/cron/recur/your-cron-key-here &>/dev/null 
```

# jquery - jTemplate processTemplate 回调

> ID：15274913
> 
> 赞同：1
> 
> 时间：2013-03-07T15:22:31.913
> 
> 标签：jquery, callback, jtemplate

使用 jTemplate 时，从不输入回调函数，我做错了什么？

```
updateTarget.processTemplate(tmpData, function() {
    console.log("hello");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:42:38.087

我以前从未使用过 jTemplates。但是在阅读了我的[参考](http://jtemplates.tpython.com/doc/symbols/jQuery.fn.html#.processTemplate)之后`processTemplate()`我看到没有回调选项，但是`processTemplateStart`方法中有一个作为最后一个参数（选项）。

`processTemplateStart(url, param, interval, args, options)`

> **选项** 选项和回调

但我找不到任何如何使用它的例子。但是如果你想`processTemplate`在它后面使用和执行代码，那么只需在方法后面添加代码即可。

```
updateTarget.processTemplate(tmpData);
console.log('Will be excecuted after the process template'); 
```

# c# - 逐行读取文件中的数据

> ID：15274917
> 
> 赞同：-5
> 
> 时间：2013-03-07T15:22:52.693
> 
> 标签：c#, .net, file-io

我目前正在打开一个文件并将其显示在消息框上。

```
private void button2_Click_1(object sender, EventArgs e)
{
    //OpenFileDialog1.ShowDialog();
    OpenFileDialog file = new OpenFileDialog();
    file.FileName = "";
    file.Title = "Open A Text document.";
    file.Filter = "(*.gc)|*.gc|(*.etf)|*.etf|(*.txt)|*.txt|(*.GC)|*.GC|(*.tap)|*.tap";
    DialogResult result = file.ShowDialog();
    if (result == DialogResult.OK)
    {
        System.IO.StreamReader OpenFile = new System.IO.StreamReader(file.FileName);
        textBox1.Text = OpenFile.ReadToEnd();
        OpenFile.Close();

    }

    if (file.FileName.Length > 0)
    {
        OpenFile(file.FileName);
    } 
```

但我需要逐行读取文件并将其显示在消息框上。有没有办法更改此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:25:10.957

有一个[File.ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)方法返回一个 IEnumerable 所以你可以这样做：

```
foreach(var line in File.ReadLines("myfile.txt")){
   //Do stuff with line
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:25:46.093

从文件中读取所有行的最简单方法是[File.ReadAllLines](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)方法（在内部使用`StreamReader`）：

```
foreach(string line File.ReadAllLines(fileName))
    MessageBox.Show(line); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:24:00.307

考虑使用[StreamReader.ReadLine()](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:24:40.977

这正是该[`ReadLine`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)方法的用途

```
while (OpenFile.Peek() >= 0) 
{
    MessageBox.Show(OpenFile.ReadLine());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T15:24:58.637

你试过这个`OpenFile.ReadLine()`方法吗？

* * *

或者，对于更激进的方法

```
string[] lines = OpenFile.ReadToEnd().Split('\n'); 
```

# android - 为什么我的时钟小部件在一段时间后会使用大量 RAM？

> ID：15274918
> 
> 赞同：1
> 
> 时间：2013-03-07T15:22:57.077
> 
> 标签：android, bitmap, widget, ram

我创建了一个时钟小部件，它每分钟从服务（通过广播接收器）更新，但几个小时后它需要大约 600mb 的 RAM。

该小部件每分钟绘制一个具有某些功能的位图，并通过简单的`ImageView`.

一开始，小部件只占用几 kb 的内存，但几分钟后它会占用数百 mb。有没有办法在创建新位图之前清除 RAM？

这是小部件代码的一部分：

```
public class Widget_01_Clock extends AppWidgetProvider {

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

Bitmap clock = WidgetPaint.getClockBitmap();

RemoteViews updateViews = new RemoteViews(context.getPackageName(),R.layout.w_01_clock);

updateViews.setImageViewBitmap(R.id.w_01_clock, clock);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:35:31.497

原因是每分钟您都会将新位图加载到内存中。所以你的解决方案应该是以下之一：

1.  正如已经建议的那样，回收您使用过的位图，以便将来将此内存块用于下一个位图。

2.  使用不会占用太多空间且不会导致`OutOfMemory`异常的非常小的图像（缩略图）。

我个人认为你应该两者都做，这里是创建图像文件缩略图版本的代码：

```
public static Bitmap decodeSampledBitmapFromFile(String path,
int reqWidth, int reqHeight) { // BEST QUALITY MATCH

// First decode with inJustDecodeBounds=true to check dimensions
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeFile(path, options);

// Calculate inSampleSize
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
options.inPreferredConfig = Bitmap.Config.RGB_565;
int inSampleSize = 1;

if (height > reqHeight) {
    inSampleSize = Math.round((float)height / (float)reqHeight);
}

int expectedWidth = width / inSampleSize;

if (expectedWidth > reqWidth) {
    //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger    SampSize..
    inSampleSize = Math.round((float)width / (float)reqWidth);
}

options.inSampleSize = inSampleSize;

// Decode bitmap with inSampleSize set
options.inJustDecodeBounds = false;

return BitmapFactory.decodeFile(path, options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T22:46:03.350

我和你在同一条船上，我可能已经找到了一个解决方案来保持它有点低。经过大量搜索和失败的结果，我可以让我的时钟小部件（其背景图像高达 800x800、溢出菜单图像、时间和日期——所有位图）通常不超过 45mb；如果用户没有弄乱小部件的设置和自定义，它有时会保持在 20MB 以下——在我写这篇文章的时候，它会下降到 ~11MB。（然后在搞乱自定义之后，跳到 41MB，现在坐在不到 10MB 大约一个小时）

你的问题是说你的时钟有一些功能；我假设这是某种图像？好吧，我注意到，每分钟，每次更新，我都会重新绘制所有内容（背景、菜单、时间和日期）。我设法将其分为三个部分：菜单（必须单独用于待处理的意图）、背景 + 日期（仅在我`UPDATE`有意图时更新`TIME CHANGED`）和时间。我在我的静态类中使用 a`SparseArray`来保存背景 + 日期位图，然后当我只更新时间时，我调用该位图，所以我不必重新创建它。然后当我设置我的远程视图时，我有类似的东西。

```
remoteViews.setImageViewBitmap(R.id.widget_consolidated, sparseArrayOfBitmaps.get(widgetNumber);
remoteViews.setImageViewBitmap(R.id.widget_time, functionToReturnTimeBitmap(arguments));
remoteViews.setImageViewBitmap(R.id.widget_overflow, functionToReturnMenuBitmap(arguments)); 
```

您可能需要做类似的事情。它不会总是保持低内存（至少对我来说），但它似乎确实有帮助。

# css - 使用 CSS 创建缩略图的垂直堆栈

> ID：15274919
> 
> 赞同：1
> 
> 时间：2013-03-07T15:22:59.650
> 
> 标签：css, html

我正在尝试创建一个垂直堆栈的图像缩略图。每行一个缩略图。

我正在尝试升级我的 CSS 技能。我有这个工作表使用

```
<table>
<tr>
 <td><img /></td>
</tr>
<tr>
 <td><img /></td>
</tr>
<tr>
 <td><img /></td>
</tr>
</table> 
```

我不想使用表格并使用 div 和 CSS 来完成此操作。这是我以后可以更好地控制间距和布局。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:24:54.583

非常简单：

```
<div><img /></div>
<div><img /></div>
<div><img /></div> 
```

div 是块级元素。除非您另有说明，否则它的作用类似于`<tr>`标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:29:39.810

使用一个简单的 div 并为每个 img 放置一些 id。在CSS中你可以修改不同id的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:29:43.537

我建议您从了解 DIV 及其属性开始。 [W3 Schools](http://www.w3schools.com/tags/tag_div.asp)是一个好的开始。

要开始使用您的，只需执行以下操作：

```
<div>
   <img src="" />
</div>
<div>
    <img src="" />
</div>
<div>
    <img src="" />
</div> 
```

默认情况下，DIV 被视为`block`元素，这意味着它们会自动从新行开始。因此，如果您希望它们显示为内联，则需要使用`display: inline-block;`或指定`float:left`；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:31:55.277

使用 divs/sections，定义你想要的列数，比如说 4 列...

[http://jsfiddle.net/tBDjV/](http://jsfiddle.net/tBDjV/)

```
<div class="col-1">
    <img />
    <img />
    <img />
</div>
<div class="col-2">
    <img />
    <img />
    <img />
</div>
<div class="col-3">
    <img />
    <img />
    <img />
</div>
<div class="col-4 last">
    <img />
    <img />
    <img />
</div>

.col-1, .col-2, .col-3, .col-4 {
float: left;
width: 22%;
margin-right: 4%;
box-sizing: border-box;
}

.last {
margin-right: 0;
} 
```

# objective-c - 从 OS X 应用程序挂载网络卷

> ID：15274920
> 
> 赞同：2
> 
> 时间：2013-03-07T15:22:59.760
> 
> 标签：objective-c, macos, cocoa

我正在尝试在 OS X 应用程序中安装网络卷。

`FSMountServerVolume`我使用已弃用的功能让它工作。文档说“要挂载网络卷，请改用 NetFSMountURLAsync”。但是当我尝试使用此功能时，我收到以下错误消息：

```
dyld: lazy symbol binding failed: Symbol not found: _NetFSMountURLSync  
Referenced from: /Users/username/Library/Developer/Xcode/DerivedData/AppName-ammmlfwhvlfxkdburfmzioformdn/Build/Products/Debug/AppName.app/Contents/MacOS/AppName
Expected in: /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS

dyld: Symbol not found: _NetFSMountURLSync
Referenced from: /Users/username/Library/Developer/Xcode/DerivedData/AppName-ammmlfwhvlfxkdburfmzioformdn/Build/Products/Debug/AppName.app/Contents/MacOS/AppName
Expected in: /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS 
```

我忘了什么吗？我导入了 NetFS 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:52:28.060

好的，它看起来像`NetFSMountURLSync()`10.8 中引入的 etc。

从[NetFS 更改](https://developer.apple.com/library/mac/#releasenotes/General/APIDiffsMacOSX10_8/NetFS.html)：

```
Added AsyncRequestID
Added NetFSMountURLAsync()
Added NetFSMountURLBlock
Added NetFSMountURLCancel()
Added NetFSMountURLSync()
Added #def kNAUIOptionAllowUI
Added #def kNAUIOptionForceUI
Added #def kNAUIOptionKey
Added #def kNAUIOptionNoUI
Added #def kNetFSMountAtMountDirKey 
```

因此，您将不得不在 10.7 及更低版本中使用“旧方式”，在 10.8 及更高版本中使用“新方式”。这意味着将其设为`NetFS.framework` *可选*而不是*必需*，并且需要执行各种运行时检查以查看您需要使用哪个 API。

# asp.net-mvc - 如何在 Razor 中编写 VB Inline html 模板？

> ID：15274921
> 
> 赞同：1
> 
> 时间：2013-03-07T15:23:00.607
> 
> 标签：asp.net-mvc, vb.net, templates, razor

我正在努力在 razor vb 中编写内联模板。

这是一个示例表单 c# 版本。有人可以翻译成 RAZOR vb 吗？

```
 <%Html.GridView<Employee>(
      this.ViewData.Model,
      data => { %>
        <table class="grid" cellpadding="0" cellspacing="0">
            <tr>
                <th>&nbsp;</th>
                <th>&nbsp;</td>
                <th>&nbsp;</td>
                <th>Name</th>
                <th>E-mail</th>
            </tr>
      <% }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T20:57:11.060

即使在最新的 Visual Studio 中，也没有出现这种支持，这是非常不幸的。似乎在某种程度上支持模板（取自[this](http://forums.asp.net/t/1657902.aspx?Razor%20Inline%20Template%20Item%20Keyword%20in%20VB)），但不适用于上面的复杂控制设置。真可惜。

# regex - 正则表达式查找特定的 URL 结构

> ID：15274922
> 
> 赞同：1
> 
> 时间：2013-03-07T15:23:01.780
> 
> 标签：regex

我有以下网址

```
http://mysite/us/product.aspx
http://mysite/de/support.aspx
http://mysite/spaces/product-space
http://mysite/spaces/product-space/forums/this is my topic
http://mysite/spaces/product-space/forums/here is another topic
http://mysite/spaces/support-zone
http://mysite/spaces/support-zone/forums/yet another topic
http://mysite/spaces/internal
http://mysite/spaces/internal/forums/final topic
http://mysite/support/product/default.aspx 
```

~~我想使用正则表达式添加一个抓取规则（这是与 SharePoint 2010 搜索相关的），它排除了不包含的 URL `/forums/*`，只留下论坛主题 URL。~~

我想要一个排除 URL 的规则，`../spaces/space1`但`../spaces/space2`保留所有其他的 URL，包括包含`/forums/`

即这里是我想用正则表达式识别的结果（将在 SharePoint 搜索中的“排除”规则中使用）：

```
http://mysite/spaces/product-space
http://mysite/spaces/support-zone
http://mysite/spaces/internal 
```

使这些结果与正则表达式不匹配（因此不被此规则排除）

```
http://mysite/us/product.aspx
http://mysite/de/support.aspx
http://mysite/spaces/product-space/forums/this is my topic
http://mysite/spaces/product-space/forums/here is another topic
http://mysite/spaces/support-zone/forums/yet another topic
http://mysite/spaces/internal/forums/final topic
http://mysite/support/product/default.aspx 
```

有人可以帮我吗？我整个早上都在看这个，我的头开始疼——我无法解释，我只是没有得到正则表达式结构。

谢谢

凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:28:09.653

...在`Multi-line`模式下（假设每行一个 URL），这对我有用：

```
(.*?\/forums\/.*?)$ 
```

希望这可以帮助

## **更新：**

鉴于您的评论，使用的模式可能是：

```
.*/spaces/(?!.*/).* 
```

基本上说匹配线之后有`/spaces/`但不再有`/`（如您在评论中所述的标准）。

* * *

使用@rvalvik 的正则表达式建议（另一种非常好的方式），您的答案将如下所示：

```
^(?!.*/forums/).*/spaces/.* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:34:37.430

您可以使用前瞻来断言`/forum/`URL 中的内容（如果存在则匹配）：

```
^(?=.*/forums/) 
```

或否定前瞻断言它不存在：

```
^(?!.*/forums/) 
```

**更新：**

此正则表达式将匹配您在“排除”列表中的网址：

```
^(?!.*/forums/).*/spaces/(?:space1|space2) 
```

简而言之，我们排除所有包含`/forums/`使用负前瞻的 url，然后我们匹配任何包含`/spaces/space1`or的内容`/spaces/space2`。

但是，有些系统要求您匹配整行，在这种情况下，您需要`.*`在末尾添加 a：

```
^(?!.*/forums/).*/spaces/(?:space1|space2).* 
```

# php - mysql_insert_id() 是如何工作的？

> ID：15274925
> 
> 赞同：0
> 
> 时间：2013-03-07T15:23:06.520
> 
> 标签：php, mysql

"mysql_insert_id — 获取上次查询生成的 ID"

想象一下 3 个在线用户调用相同的查询，例如 Insert into table。用户一将行插入表中，但用户否。三号将是最后一个调用查询的人，就在用户一号之后几毫秒。

什么会为用户一返回 mysql_insert_id ？是他的Id还是用户三的Id？

如果不推荐使用此功能，我可以使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:23:56.450

*每个连接*都会跟踪插入 ID 。如果没有持久连接，每个单独的脚本执行都有自己的连接。使用持久连接，每个 Apache 进程都有自己的 MySQL 连接（但每个单独的进程都连续提供结果 - 所以这不是问题）。只要您从与PHP`mysql_insert_id()`中的查询相同的页面加载中调用，就可以了。`INSERT`

要回答问题的第二部分，您应该使用`mysqli`or `PDO`（首选）库。`mysqli`有对应的`mysqli_insert_id`。`PDO`有`lastInsertId()`方法。

# php - PHP 脚本超时耗时太长

> ID：15274926
> 
> 赞同：0
> 
> 时间：2013-03-07T15:23:12.173
> 
> 标签：php, mysql, performance

我正在读取一个包含 1000 行的 csv 文件。我对每一行执行一个查询，这里是查询：

```
$foobar = 
    SELECT foo1.ID
    FROM foo1
    INNER JOIN foo2 ON foo2.ID = foo1.ID
    LEFT JOIN foo3 bar1 ON bar1.ID = foo1.ID
    LEFT JOIN foo3 bar2 ON bar2.ID = foo1.ID
    WHERE foo1.Text LIKE :txt
    AND foo2.col1 = 31 AND bar1.col1 = 138 AND bar2.col1 = 271
    AND (bar1.col2 = "" OR bar1.col2 IS NULL) 
    AND (bar2.col2 = "" OR bar2.col2 IS NULL) 
```

对此进行**解释**并仅返回 100 行被搜索和常量**ref**意味着它应该很快它使用**索引**。

现在在我的循环中，我有以下内容：

```
while ($line = fgetcsv($handle)){
    $foobar->execute(); 
    $data = $foobar->fetchAll(\PDO::FETCH_ASSOC);
    var_dump($data); echo '<br /><br />';
} 
```

为什么需要很长时间？CSV 文件中只有 1000 行，对查询运行解释似乎足够快。

它会在 5-10 分钟后超时，但不应该花那么长时间，我不知道是什么问题。

有一点需要注意**foo3**表包含**700**万条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:39:57.877

您是否确定脚本实际上可以检测到行尾？如果没有，那就试试

```
ini_set('auto_detect_line_endings',TRUE); 
```

而且您似乎没有指定数据的长度，请尝试以下操作：

```
$line = fgetcsv($handle, 1000) 
```

在仔细查看 PHP 手册之后，最常用的方法是检查

```
while (($line = fgetcsv($handle, 1000)) !== FALSE) 
```

我还注意到您在 fetchAll 语句中添加了一个 \，请尝试以下操作：

```
fetchAll(PDO::FETCH_ASSOC) 
```

您还可以执行以下操作来处理数据：

```
if($result = $stmt->fetchAll(PDO::FETCH_ASSOC))
{
    foreach($result as $res)
    {
        foreach($res as $key=>$val)
        {
            $temp[$key] = utf8_encode($val);
        }
        array_push($array, $temp);
    }
    var_dump($array);
    echo '<br /><br />';
} 
```

另一方面，您的主要问题可能是查询本身。也许我给你的方法可以带来更快的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:27:45.037

尝试在控制台中启动该过程。见 exec() 之后。该进程可以将有关进程状态的数据放入共享存储（mysql/file/etc...）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:34:50.790

仅仅因为查询“使用”索引，并不意味着“它应该很快”。速度取决于是否可以使用“正确”索引以及查询是否被构造为高效。

例如，您的查询使用：

```
WHERE foo1.Text LIKE :txt 
```

如果 foo1 中有很多行和/或 foo1.Text 很大（即 TEXT 类型字段）并且 :txt 可能以 % 开头，那么这意味着主表将无法使用索引。

此外，所有必需的连接索引可能都没有到位。例如，从您的查询中可以明显看出 foo3.ID 字段不是主键。

为了更好地回答“为什么需要很长时间？”这个问题，我需要更多关于 foo1/2/3 表结构的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:54:05.107

是否有可能只有其中一行有问题？我将从 CLI 运行它开始；将输出更改为仅记录行的索引和执行时间。这应该有助于澄清问题。

# javascript - 只创建一个构造函数实例？

> ID：15274927
> 
> 赞同：1
> 
> 时间：2013-03-07T15:23:19.427
> 
> 标签：javascript

我有*一部分*插件使用私有变量并公开*公共*方法：

[**JSBIN 1**](http://jsbin.com/ekowoj/1)

```
function  myWorld()
    {
      var myPrivate=1;
      this.do1=function (){alert(myPrivate);} ;
    }

var a=new  myWorld();

a.do1() //1
alert(a.myPrivate); //undefined (as it should be) 
```

但我想防止再次这样做：`new myWorld();`

我知道的唯一选择是使用对象文字：

[**JSBIN 2**](http://jsbin.com/ekowoj/2/)

```
var myWorld=
    {
      myPrivate:1,
      do1:function (){alert(this.myPrivate);} 
    }

alert(myWorld.myPrivate); //1 ( ouch....)
myWorld.do1() //1 
```

**问题**

如何封装私有字段并仍然防止使用`myWorld`被实例化`>1 times`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:25:57.270

尝试以下方式：

```
(function(){
  var instanciated = false;
  window.myWorld = function() {
    if( instanciated) throw new Error("myWorld can only be instanciated once!");
    instanciated = true;
    var myPrivate = 1;
    this.do1 = function(){alert(myPrivate);};
  }
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:26:02.273

闭包是定义范围的好工具：

```
 var myWorld= (function(){
    var myPrivate = 1;
    return {
      do1:function (){alert(myPrivate);} 
    }
  }());

   myWorld.do1(); 
```

您可能想查看免费的[学习 JavaScript 设计模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)一书

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:29:21.253

```
var a = new function myWorld()
{
  var myPrivate=1;
  this.do1=function (){alert(myPrivate);} ;
} 
```

This makes `myWorld` available only inside the function. If you don't event want it accessable there, then remove the name.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:56:07.963

您可以使用单例模式来维护对象的一个​​实例。就像是：

```
(function (global) {
    var _inst;

    global.myWorld = function () {
        if (_inst) throw new Error("A myWorld instance already exists. Please use myWorld.getInstance()");
        _inst = this;
    };

    global.myWorld.prototype = {
        do1: function() {
            console.log("do1");
        }
    };

    global.myWorld.getInstance = function() {
        if (_inst) return _inst;
        return new myWorld();
    };
}(window));

var world = new myWorld();
var world2 = myWorld.getInstance();
console.log(world === world2); // true
var world3 = new myWorld(); // throws Error 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T15:26:14.227

您可以在 IIFE 中隐藏私有变量：

```
var myWorld = (function() { 
    var myPrivate = 1;
    return { ... };
}()); 
```

# c# - 更新后刷新 GridView

> ID：15274928
> 
> 赞同：4
> 
> 时间：2013-03-07T15:23:22.093
> 
> 标签：c#, gridview, refresh

基本上，发生更新事件后，GridView 不会显示更新的值。我搜索了论坛并看到了许多解决方案，但是当我尝试它们时没有任何效果。

数据库肯定会更新，但只有在我重新启动项目后才能看到更新。

我做了什么：

*   非常自由地使用 GridView1.Databind();
*   GridView1.Databind() 的保守使用；
*   Page_Load 包含带有 GridView1.Databind() 的 (!IsPostBack) 包装器；
*   放置 GridView1.Databind(); 在 GridView1_RowUpdating 事件中。
*   ...以及我在搜索论坛后尝试的其他一些事情。

C＃：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.HtmlControls;
using System.Text;
using System.Data;
using System.Configuration;
using System.Data.SqlClient;
using System.IO;

public partial class Styles_ConsolidatedProducers : System.Web.UI.Page
{

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridView1.DataBind();
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        GridView1.DataBind();
    }
    else
    {
        //GridView1.DataBind();
    }
}

public override void VerifyRenderingInServerForm(Control control)
{
    /* Verifies that the control is rendered */
}

protected void Gridview1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    GridView1.DataBind();
}
protected void cmdReset_Click(object sender, EventArgs e)
{

    ToggleCheckState(false);
    cboBusinessSource.ClearSelection();
    cboConsolidatedProducer.ClearSelection();
    cboRelinkToConsolidatedProducer.ClearSelection();
    txtSearch.Text = "";
    lblRelinkToConsolidatedProducer.Visible = false;
    cboRelinkToConsolidatedProducer.Visible = false;
    cmdRelink.Visible = false;
    GridView1.DataBind();

}
protected void cboConsolidatedProducer_SelectedIndexChanged(object sender, EventArgs e)
{
    //GridView1.DataBind();
}
protected void cboBusinessSource_SelectedIndexChanged(object sender, EventArgs e)
{
    //GridView1.DataBind();
}

protected void cmdUnlink_Click(object sender, EventArgs e)

{
    {
        bool atLeastOneRowUpdated = false;
        // Iterate through the Products.Rows property
        foreach (GridViewRow row in GridView1.Rows)
        {
            // Access the CheckBox
            CheckBox cb = (CheckBox)row.FindControl("chkUpdate");
            if (cb != null && cb.Checked)
            {
                // Edit row is true.
                atLeastOneRowUpdated = true;
                // Get the MasterID for the selected row.
                int MasterID = Convert.ToInt32(GridView1.DataKeys[row.RowIndex].Value);

                SqlConnection con = new SqlConnection("FOO");
                con.Open();

                string updateSQL = "UPDATE tblMasterDetail " + "SET     ProducerConsolidatedID = @ProducerConsolidatedID, ProducerConsolidatedName = @ProducerConsolidatedName WHERE MasterID = @MasterID";
                Console.WriteLine(updateSQL);
                SqlCommand cmd = new SqlCommand(updateSQL, con);
                cmd.Parameters.Add("@MasterID", SqlDbType.Int, 10, "MasterID");
                cmd.Parameters.Add("@ProducerConsolidatedID", SqlDbType.NVarChar, 20, "ProducerConsolidatedID");
                cmd.Parameters.Add("@ProducerConsolidatedName", SqlDbType.NVarChar, 20, "ProducerConsolidatedName");
                //cmd.Parameters["@ProducerConsolidatedID"].Value = MasterID;
                cmd.Parameters["@MasterID"].Value = MasterID;
                cmd.Parameters["@ProducerConsolidatedID"].Value = "XX";
                cmd.Parameters["@ProducerConsolidatedName"].Value = "XX";
                //Update the row.
                cmd.ExecuteNonQuery();
                GridView1.DataBind();
                con.Close();
                ToggleCheckState(false);
                lblUpdatedRecords.Text += string.Format(
                    "Record unlinked: {0}<br />", MasterID);
                //"This would have updated ProductID {0}<br />", MasterID);
            }
        }
        // Show the Label if at least one row was deleted...
        lblUpdatedRecords.Visible = atLeastOneRowUpdated;
    }
}

private void ToggleCheckState(bool checkState)
{
    // Iterate through the Products.Rows property
    foreach (GridViewRow row in GridView1.Rows)
    {
        // Access the CheckBox
        CheckBox cb = (CheckBox)row.FindControl("chkUpdate");
        if (cb != null)
            cb.Checked = checkState;
    }
}

protected void cmdUncheckAll_Click(object sender, EventArgs e)
{
    ToggleCheckState(false);
    cboRelinkToConsolidatedProducer.Visible = false;
    lblRelinkToConsolidatedProducer.Visible = false;
    cmdRelink.Visible = false;
}
protected void txtSearch_TextChanged(object sender, EventArgs e)
{
    //GridView1.DataBind();
}

protected void cboRelinkToConsolidatedProducer_SelectedIndexChanged(object sender, EventArgs e)
{
    // Get value form dropdown.
    txtRelinkToConsolidatedProducerID.Text = cboRelinkToConsolidatedProducer.SelectedItem.Value;
    // Get value form dropdown.
    txtRelinkToConsolidatedProducerName.Text = cboRelinkToConsolidatedProducer.SelectedItem.Text;
    cmdRelink.Visible = true;
    //GridView1.DataBind();
}
protected void cmdRelinkTo_Click(object sender, EventArgs e)
{
    lblRelinkToConsolidatedProducer.Visible = true;
    cboRelinkToConsolidatedProducer.Visible = true;
}
protected void cmdRelink_Click(object sender, EventArgs e)
{
    bool atLeastOneRowUpdated = false;
    // Iterate through the Products.Rows property
    foreach (GridViewRow row in GridView1.Rows)
    {
        // Access the CheckBox
        CheckBox cb = (CheckBox)row.FindControl("chkUpdate");
        if (cb != null && cb.Checked)
        {
            // Edit row is true.
            atLeastOneRowUpdated = true;
            // Get the MasterID for the selected row.
            int MasterID = Convert.ToInt32(GridView1.DataKeys[row.RowIndex].Value);

            SqlConnection con = new SqlConnection("FOO");
            //con.Open();

            string updateSQL = "UPDATE tblMasterDetail " + "SET ProducerConsolidatedID = @ProducerConsolidatedID, ProducerConsolidatedName = @ProducerConsolidatedName WHERE MasterID = @MasterID";
            Console.WriteLine(updateSQL);
            SqlCommand cmd = new SqlCommand(updateSQL, con);
            cmd.Parameters.Add("@MasterID", SqlDbType.Int, 10, "MasterID");
            cmd.Parameters.Add("@ProducerConsolidatedID", SqlDbType.NVarChar, 20, "ProducerConsolidatedID");
            cmd.Parameters.Add("@ProducerConsolidatedName", SqlDbType.NVarChar, 20, "ProducerConsolidatedName");
            cmd.Parameters["@MasterID"].Value = MasterID;
            cmd.Parameters["@ProducerConsolidatedID"].Value = txtRelinkToConsolidatedProducerID.Text; 
            cmd.Parameters["@ProducerConsolidatedName"].Value = txtRelinkToConsolidatedProducerName.Text;
            con.Open();
            //Update the row.
            cmd.ExecuteNonQuery();
            GridView1.DataBind();
            con.Close();
            ToggleCheckState(false);
            lblUpdatedRecords.Text += string.Format(
                "Records relinked: {0}<br />", MasterID);
            //"This would have updated ProductID {0}<br />", MasterID);
            cboRelinkToConsolidatedProducer.Visible = false;
            lblRelinkToConsolidatedProducer.Visible = false;
            cmdRelink.Visible = false;
        }
    }
    // Show the Label if at least one row was deleted...
    lblUpdatedRecords.Visible = atLeastOneRowUpdated;
}

protected void cmdRefresh_Click(object sender, EventArgs e)
{
    GridView1.DataBind();
} 
```

}

标记：

```
<%@ Page Language="C#" AutoEventWireup="true" Debug="true"     EnableEventValidation="true" CodeFile="Search.aspx.cs" Inherits="Styles_ConsolidatedProducers"
EnableViewStateMac ="false" EnableSessionState="True" ValidateRequest ="false" ViewStateEncryptionMode ="Never" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Producer Search</title>
<style type="text/css">
    .style1
    {
        font-family: Calibri;
    }
    .style2
    {
        color: #FFFFFF;
    }
    .style3
    {
        font-size: xx-large;
    }
    #form1
    {
        font-family: Calibri;
    }
</style>
</head>
<body>
<form id="form1" runat="server">
<div style="background-color: #000000; width: 1251px;">

    <asp:Image ID="Image1" runat="server" Height="63px" ImageAlign="Left" 
        ImageUrl="~/BM.jpg" Width="93px" />
    <br />
    <span class="style1">
    <span class="style2"><span class="style3">search</span></span></span><br 
        class="style3" />
    <span class="style1"><span class="style2">
    <br />
    </span></span>&nbsp;
    <asp:Label ID="lblConsolidatedProducer" runat="server" style="color: #FFFFFF" 
        Text="Consol. Producer:"></asp:Label>
    <asp:DropDownList ID="cboConsolidatedProducer" AppendDataBoundItems="true" runat="server" 
        AutoPostBack="True" DataSourceID="ConsolidatedProducer" 
        DataTextField="ProducerConsolidatedName" 
        DataValueField="ProducerConsolidatedID" Height="22px" Width="259px" 
        onselectedindexchanged="cboConsolidatedProducer_SelectedIndexChanged">
        <asp:ListItem Value="%" Selected="True">None</asp:ListItem>
        <asp:ListItem Value="XX">Unlinked</asp:ListItem>
    </asp:DropDownList>
    <span class="style1">
    <asp:Label ID="lblBusinessSource" runat="server" style="color: #FFFFFF" 
        Text="Source:"></asp:Label>
    </span>
    <asp:DropDownList ID="cboBusinessSource" AppendDataBoundItems="true" 
        runat="server" AutoPostBack="True" 
        DataSourceID="BusinessSource" DataTextField="BusinessSourceCode" 
        DataValueField="BusinessSourceCode" Height="22px" Width="65px" 
        onselectedindexchanged="cboBusinessSource_SelectedIndexChanged">
        <asp:ListItem Value="%" Selected="True">All</asp:ListItem>
        </asp:DropDownList>
    <asp:Label ID="lblSearch" runat="server" style="color: #FFFFFF" 
    Text="Producer Name:"></asp:Label>
    <asp:TextBox ID="txtSearch" runat="server" 
        ontextchanged="txtSearch_TextChanged" AutoCompleteType="Disabled" 
        AutoPostBack="True" MaxLength="50"></asp:TextBox>
    <asp:SqlDataSource ID="BusinessSource" runat="server" 
        ConnectionString="<%$ ConnectionStrings:BMBESQLConnectionString %>" 
        SelectCommand="SELECT DISTINCT [BusinessSourceCode] FROM [tblMasterDetail] WHERE ([BusinessSourceCode] IS NOT NULL)" 
        CancelSelectOnNullParameter="False">
    </asp:SqlDataSource>
<asp:SqlDataSource ID="MasterDetail" runat="server" 
    ConnectionString="<%$ ConnectionStrings:BMBESQLConnectionString %>" 
    SelectCommand="SELECT MasterID, SystemSourceCode, BusinessSourceCode, PRODUCERMASTERID, PRODUCERCONSOLIDATEDID, ProducerConsolidatedName, GWP, FINMISNATIONALCODE, PRODUCERNATIONALCODE, PRODUCERNAME, [Update] FROM tblMasterDetail" EnableCaching="True"
    FilterExpression="[ProducerConsolidatedID] LIKE '{0}%' and [BusinessSourceCode] LIKE '{1}%' and [ProducerName] Like '%{2}%'" 
    CancelSelectOnNullParameter="False" 
    OldValuesParameterFormatString="original_{0}" 
    InsertCommand="INSERT INTO [tblMasterDetail] ([SystemSourceCode], [BusinessSourceCode], [PRODUCERMASTERID], [PRODUCERCONSOLIDATEDID], [ProducerConsolidatedName], [GWP], [PRODUCERNATIONALCODE], [FINMISNATIONALCODE], [PRODUCERNAME], [Update]) VALUES (@SystemSourceCode, @BusinessSourceCode, @PRODUCERMASTERID, @PRODUCERCONSOLIDATEDID, @ProducerConsolidatedName, @GWP, @PRODUCERNATIONALCODE, @FINMISNATIONALCODE, @PRODUCERNAME, @Update);" 
    DeleteCommand="DELETE FROM [tblMasterDetail] WHERE [MasterID] = @original_MasterID AND (([SystemSourceCode] = @original_SystemSourceCode) OR ([SystemSourceCode] IS NULL AND @original_SystemSourceCode IS NULL)) AND (([BusinessSourceCode] = @original_BusinessSourceCode) OR ([BusinessSourceCode] IS NULL AND @original_BusinessSourceCode IS NULL)) AND (([PRODUCERMASTERID] = @original_PRODUCERMASTERID) OR ([PRODUCERMASTERID] IS NULL AND @original_PRODUCERMASTERID IS NULL)) AND (([PRODUCERCONSOLIDATEDID] = @original_PRODUCERCONSOLIDATEDID) OR ([PRODUCERCONSOLIDATEDID] IS NULL AND @original_PRODUCERCONSOLIDATEDID IS NULL)) AND (([ProducerConsolidatedName] = @original_ProducerConsolidatedName) OR ([ProducerConsolidatedName] IS NULL AND @original_ProducerConsolidatedName IS NULL)) AND (([GWP] = @original_GWP) OR ([GWP] IS NULL AND @original_GWP IS NULL)) AND (([PRODUCERNATIONALCODE] = @original_PRODUCERNATIONALCODE) OR ([PRODUCERNATIONALCODE] IS NULL AND @original_PRODUCERNATIONALCODE IS NULL)) AND (([FINMISNATIONALCODE] = @original_FINMISNATIONALCODE) OR ([FINMISNATIONALCODE] IS NULL AND @original_FINMISNATIONALCODE IS NULL)) AND (([PRODUCERNAME] = @original_PRODUCERNAME) OR ([PRODUCERNAME] IS NULL AND @original_PRODUCERNAME IS NULL)) AND (([Update] = @original_Update) OR ([Update] IS NULL AND @original_Update IS NULL))" 
    ConflictDetection="CompareAllValues">
    <DeleteParameters>
        <asp:Parameter Name="original_MasterID" />
        <asp:Parameter Name="original_SystemSourceCode" />
        <asp:Parameter Name="original_BusinessSourceCode" />
        <asp:Parameter Name="original_PRODUCERMASTERID" />
        <asp:Parameter Name="original_PRODUCERCONSOLIDATEDID" />
        <asp:Parameter Name="original_ProducerConsolidatedName" />
        <asp:Parameter Name="original_GWP" />
        <asp:Parameter Name="original_PRODUCERNATIONALCODE" />
        <asp:Parameter Name="original_FINMISNATIONALCODE" />
        <asp:Parameter Name="original_PRODUCERNAME" />
        <asp:Parameter Name="original_Update" />
    </DeleteParameters>
    <FilterParameters>
        <asp:ControlParameter ControlID="cboConsolidatedProducer" 
            Name="ProducerConsolidatedID" PropertyName="SelectedValue" 
            DefaultValue="" ConvertEmptyStringToNull="true" />
        <asp:ControlParameter ControlID="cboBusinessSource" Name="BusinessSourceCode" 
            PropertyName="SelectedValue" ConvertEmptyStringToNull="true" 
            DefaultValue=" " />
        <asp:ControlParameter ControlID="txtSearch" DefaultValue=" " Name="ProducerName" 
            PropertyName="Text" Type="String" />
    </FilterParameters>

    <InsertParameters>
        <asp:Parameter Name="SystemSourceCode" />
        <asp:Parameter Name="BusinessSourceCode" />
        <asp:Parameter Name="PRODUCERMASTERID" />
        <asp:Parameter Name="PRODUCERCONSOLIDATEDID" />
        <asp:Parameter Name="ProducerConsolidatedName" />
        <asp:Parameter Name="GWP" />
        <asp:Parameter Name="PRODUCERNATIONALCODE" />
        <asp:Parameter Name="FINMISNATIONALCODE" />
        <asp:Parameter Name="PRODUCERNAME" />
        <asp:Parameter Name="Update" />
    </InsertParameters>

</asp:SqlDataSource>
    <asp:SqlDataSource ID="ConsolidatedProducer" runat="server" 
        ConnectionString="<%$ ConnectionStrings:BMBESQLConnectionString %>" 

        SelectCommand="SELECT DISTINCT ProducerConsolidatedName, ProducerConsolidatedID FROM tblProducerConsolidated WHERE (MakeConsolidated = 1) ORDER BY ProducerConsolidatedName" 
        CancelSelectOnNullParameter="False">
    </asp:SqlDataSource>

<asp:Button ID="cmdReset" runat="server" onclick="cmdReset_Click" 
    Text="Reset" />

    <br />
    <br />

</div>
<br />
<asp:Button ID="cmdRelinkTo" runat="server" Text="Relink" 
    onclick="cmdRelinkTo_Click" />
<asp:Button ID="cmdUnlink" runat="server" Text="Unlink" 
    onclick="cmdUnlink_Click" />
<asp:Label ID="lblRelinkToConsolidatedProducer" runat="server" 
    Text="Relink To:" Visible="False"></asp:Label>
<asp:DropDownList ID="cboRelinkToConsolidatedProducer" runat="server" 
    AutoPostBack="True" DataSourceID="ConsolidatedProducer" 
    DataTextField="ProducerConsolidatedName" 
    DataValueField="ProducerConsolidatedID" Height="22px" 
    onselectedindexchanged="cboRelinkToConsolidatedProducer_SelectedIndexChanged" 
    Visible="False" Width="259px">
</asp:DropDownList>
<br />
<asp:Button ID="cmdRelink" runat="server" onclick="cmdRelink_Click" 
    Text="Relink" Visible="False" />
<asp:TextBox ID="txtRelinkToConsolidatedProducerID" runat="server" 
    Visible="False"></asp:TextBox>
<asp:TextBox ID="txtRelinkToConsolidatedProducerName" runat="server" 
    Visible="False"></asp:TextBox>
<br />
<asp:Button ID="cmdUncheckAll" runat="server" onclick="cmdUncheckAll_Click" 
    Text="Clear" Height="26px" Width="54px" />
<asp:Button ID="cmdRefresh" runat="server" onclick="cmdRefresh_Click" 
    Text="Refresh" />
<br />
<br />
<asp:Label ID="lblRecordsFound" runat="server" style="color: #000000" Text="-"></asp:Label>
<br />
<br />
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
    AllowSorting="True" AutoGenerateColumns="False" 
    DataSourceID="MasterDetail"
    onrowupdating="GridView1_RowUpdating"
    Width="1243px" EmptyDataText="-"
    DataKeyNames="MasterID">
    <Columns>
        <asp:HyperLinkField DataNavigateUrlFields="MasterID" 
            DataNavigateUrlFormatString="ProducerDetail.aspx?masterid={0}" Text="View" />
        <asp:TemplateField HeaderText="Update" SortExpression="Update">
            <EditItemTemplate>
                <asp:CheckBox ID="Update" runat="server" Checked='<%# Bind("Update") %>' 
                    AutoPostBack='<%# Bind("Update") %>' />
            </EditItemTemplate>
            <ItemTemplate>
                <asp:CheckBox ID="chkUpdate" runat="server" Checked='<%# Bind("Update") %>' 
                    AutoPostBack='<%# Bind("Update") %>' />
            </ItemTemplate>
            <HeaderStyle HorizontalAlign="Center" />
        </asp:TemplateField>
        <asp:BoundField DataField="MasterID" HeaderText="ID" 
            InsertVisible="False" ReadOnly="True" SortExpression="MasterID" />
        <asp:BoundField DataField="SystemSourceCode" HeaderText="System" 
            ReadOnly="True" SortExpression="SystemSourceCode" />
        <asp:BoundField DataField="BusinessSourceCode" HeaderText="Source" 
            ReadOnly="True" SortExpression="BusinessSourceCode" />
        <asp:BoundField DataField="PRODUCERNAME" HeaderText="Producer Name" 
            ReadOnly="True" SortExpression="PRODUCERNAME" >
        <ControlStyle Width="100px" />
        </asp:BoundField>
        <asp:BoundField DataField="GWP" 
            HeaderText="GWP" SortExpression="GWP" DataFormatString="{0:c}" 
            ReadOnly="True" ApplyFormatInEditMode="True" />
        <asp:BoundField DataField="PRODUCERMASTERID" HeaderText="Producer Master ID" 
            ReadOnly="True" SortExpression="PRODUCERMASTERID" >
        <ControlStyle Width="100px" />
        </asp:BoundField>
        <asp:TemplateField HeaderText="Consol. ID" 
            SortExpression="PRODUCERCONSOLIDATEDID">
            <EditItemTemplate>
                <asp:TextBox ID="txtConsolidatedProducerID" runat="server" 
                    Text='<%# Bind("PRODUCERCONSOLIDATEDID") %>' AutoPostBack="True" CausesValidation="True"></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:TextBox ID="ConsolidatedProducerID" runat="server" 
                    Text='<%# Bind("PRODUCERCONSOLIDATEDID") %>' AutoPostBack="True" CausesValidation="True"></asp:TextBox>
            </ItemTemplate>
            <ControlStyle Width="100px" />
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Consol. Name" 
            SortExpression="PRODUCERCONSOLIDATEDID">
            <EditItemTemplate>
                <asp:TextBox ID="txtConsolidatedProducerName" runat="server" 
                    Text='<%# Bind("ProducerConsolidatedName") %>' AutoPostBack="True" CausesValidation="True"></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:TextBox ID="ConsolidatedProducerName" runat="server" 
                    Text='<%# Bind("ProducerConsolidatedName") %>' AutoPostBack="True" CausesValidation="True"></asp:TextBox>
            </ItemTemplate>
            <ControlStyle Width="100px" />
        </asp:TemplateField>
        <asp:BoundField DataField="PRODUCERNATIONALCODE" 
            HeaderText="Source Code" 
            SortExpression="PRODUCERNATIONALCODE" ReadOnly="True" />
        <asp:BoundField DataField="FINMISNATIONALCODE" HeaderText="FINMIS Code" 
            ReadOnly="True" SortExpression="FINMISNATIONALCODE" />
    </Columns>
</asp:GridView>
<asp:Label ID="lblUpdatedRecords" runat="server" EnableViewState="False"></asp:Label>
<br />
<br />
</form> 
```

所有其他功能都工作 - 这是唯一未解决的问题。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T17:38:50.277

您正在使用缓存，`SqlDataSource`这就是为什么它会在您的`DataBind`.

从您的标记：

```
<asp:SqlDataSource ID="MasterDetail" ... EnableCaching="True" 
```

尝试对显式刷新按钮进行以下更新：

```
protected void cmdRefresh_Click(object sender, EventArgs e)
{
    MasterDetail.EnableCaching = false;
    GridView1.DataBind();
    MasterDetail.EnableCaching = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:38:07.367

> 我从一个帖子中得到它，尽管它没有指定更多内容。试试这个。

```
 protected void GridView1_Init(object sender, EventArgs e)
 {
     Response.CacheControl = "no-cache";
 } 
```

> 注意：不需要对标记做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T23:21:07.533

我不知道这是否是最好的方法，但更新后对我来说效果很好。单击更新按钮后，我再次编写`SqlDataSource.SelectCommand`以选择我需要的数据。我的代码：

```
protected void teamSubmitBTN_Click(object sender, EventArgs e)
{
    ExpScheduleClass ESCU = new ExpScheduleClass();
    ESCU.updateTeamTable(teamLBL.Text, courseLBL.Text, studentLBL.Text);
    SqlDataSource1.SelectCommand = //your select cmd here...

} 
```

# android - 确保服务已绑定

> ID：15274937
> 
> 赞同：0
> 
> 时间：2013-03-07T15:23:34.573
> 
> 标签：android, android-service

像我之前的许多人一样，我正在使用 asmack 和 Openfire 编写一个聊天应用程序。它仍然很基本，但我已经成功地与一个用 Spark 登录的用户和另一个在模拟器上登录的用户发送和接收消息。

在阅读了一些 SO 之后，我决定为我绑定到每个 Activity 的 XMPP 连接创建一个服务。我目前有三个活动

*   MainActivity（用户登录并连接到 XMPPconnection）。
*   RosterActivity（包含用户联系人的列表视图）
*   聊天活动

我的问题是双重的：

1.  是否有必要将每个活动绑定到服务，或者是否可以将 MainActivity 绑定到它并将 XMPPConnection 作为额外的传递？如果是这样，如何通过？

2.  登录并启动 RosterActivity 后，我在 onCreate() 方法中绑定服务。在 onStart 方法中，如果我检查 mBound 变量，它总是错误的。我已经尝试过 SystemClock.sleep() 只是为了看看它是否可以工作，但它没有。真正让我困惑的是，当我第一次编写这个 Activity 时，我使用了一个按钮，单击该按钮将启动填充列表的过程。那工作得很好。

    那么我错过了什么？我显然不希望用户必须按下按钮才能查看联系人，我希望在 onStart() 处填充列表。为什么当我尝试从 onClickListener 内部访问它时服务绑定，为什么它在 onStart 上根本不起作用。

    我猜它与异步绑定有关，但我正试图找出究竟是什么。

主要活动 ：

```
package com.example.smack_text;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity 
{
XMPPService mService;
boolean mBound = false;
Button logBtn;
Button disBtn;
EditText userTxt;
EditText passTxt;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
//      BIND SERVICE
Intent intent = new Intent(getApplicationContext(), XMPPService.class);
bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
}

@Override
protected void onStart() 
{
super.onStart();

userTxt = (EditText) findViewById(R.id.userTxt);
passTxt = (EditText) findViewById(R.id.passTxt);

logBtn = (Button) findViewById(R.id.logBtn);
disBtn = (Button) findViewById(R.id.disBtn);
logBtn.setOnClickListener(new OnClickListener() 
    {

    @Override
    public void onClick(View v) 
        {
        final String user = new String(userTxt.getText().toString()); 
        final String pass = new String(passTxt.getText().toString());

        if(user=="" || pass=="")
            {
            Toast.makeText(getApplicationContext(), "Enter name and pass",           
Toast.LENGTH_LONG).show();
            }
        if(mBound)
        {
                mService.connect(user,pass);
                Log.d("Alex","connected");
        }
        else
        {
            Log.d("Alex","error in connecting");
        }
        Intent roster = new Intent();
        roster.setClass(getApplicationContext(), RosterActivity.class);
        startActivity(roster);
    }
});

disBtn.setOnClickListener(new OnClickListener() 
{
@Override
public void onClick(View v) 
    {
    if(mBound)
        {
        mService.disconnect();
        Log.d("Alex","disconnected");
        }
    else
        {
        Log.d("Alex","error in disconnecting");
        }
    }
});

}

@Override
protected void onDestroy() 
{
// Unbind from the service
if (mBound) 
    {
    unbindService(mConnection);
    mBound = false;
    }
super.onDestroy();
}

private ServiceConnection mConnection = new ServiceConnection() 
{
@Override
public void onServiceConnected(ComponentName name, IBinder service) 
    {
    mService = ((XMPPService.LocalBinder)service).getService();
    mBound = true;
    }

@Override
public void onServiceDisconnected(ComponentName name) 
    {
     mBound = false;
    }
};
} 
```

名册活动：

```
package com.example.smack_text;

import java.util.Collection;
import org.jivesoftware.smack.Roster;
import org.jivesoftware.smack.RosterEntry;
import org.jivesoftware.smack.packet.Presence;
import android.app.AlertDialog;
import android.app.ListActivity;
import android.content.ComponentName;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;
import android.os.SystemClock;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class RosterActivity extends ListActivity{

boolean mBound = false;
XMPPService mService;
Button btn;

@Override
public void onCreate(Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.roster);

    Intent intent = new Intent(getApplicationContext(), XMPPService.class);
    bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
    }

@Override
public void onStart(){
    super.onStart();
//      btn = (Button) findViewById(R.id.button1);
//      btn.setOnClickListener(new OnClickListener() {

//          @Override
//          public void onClick(View v) {

            if(mBound){
                Log.d("Alex","roster connected");

                Roster roster = mService.connection.getRoster();
//                  XWRIS TO RELOAD DN DOULEYEI
                roster.reload();

                Integer length = roster.getEntryCount();
                String[] users = new String[length];
                String[] userPresence = new String[length];

                Integer i=0;

                Collection<RosterEntry> entries = roster.getEntries();

                for(RosterEntry entry:entries){
                    users[i] = entry.getName();

Presence tmpPres = roster.getPresence(entry.getUser());
                    userPresence[i] = tmpPres.toString();
                    Log.d("RosterActivity" , entry.getUser().toString());

                    i++;

                }

ArrayAdapter<String> adapter = new ArrayAdapter<String>    (RosterActivity.this,

android.R.layout.simple_expandable_list_item_1,     users);
                    setListAdapter(adapter);

            }
            else{

Toast.makeText(getApplicationContext(), "service not bound yet", Toast.LENGTH_LONG).show();
            }

        }
//      });
//  }

@Override
protected void onDestroy() {

    // Unbind from the service
    if (mBound) {
        unbindService(mConnection);
        mBound = false;
    }
    super.onDestroy();
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    // Creating the dialog
    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    Object o = l.getItemAtPosition(position);
    String str = o.toString();
    Log.d("Roster Activity",str);

    builder.setTitle("Start Chat?");
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            Intent chat = new Intent();
            chat.setClass(getApplicationContext(), ChatActivity.class);
            startActivity(chat);
        }
    });

    AlertDialog alert = builder.create();
    alert.show();
}

private ServiceConnection mConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        mService = ((XMPPService.LocalBinder)service).getService();

        mBound = true;

    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
         mBound = false;

    }
    };

} 
```

XMPP服务：

```
package com.example.smack_text;

import java.io.File;

import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;

import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.Build;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class XMPPService extends Service{

XMPPConnection connection;
private final IBinder mBinder = new LocalBinder();

    @Override
    public void onCreate(){
        super.onCreate();
    }

    /**
     * Class used for the client Binder.  Because we know this service always
     * runs in the same process as its clients, we don't need to deal with IPC.
     */
    public class LocalBinder extends Binder {
        XMPPService getService() {
            return XMPPService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    public void connect(final String user, final String pass) {

        Log.d("Xmpp Alex","in service");

        ConnectionConfiguration config = new ConnectionConfiguration("10.0.2.2",5222);

//          KEYSTORE SETTINGS
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            config.setTruststoreType("AndroidCAStore");
            config.setTruststorePassword(null);
            config.setTruststorePath(null);
        } else {
            config.setTruststoreType("BKS");
            String path = System.getProperty("javax.net.ssl.trustStore");
            if (path == null)
                path = System.getProperty("java.home") + File.separator + "etc"
                    + File.separator + "security" + File.separator
                    + "cacerts.bks";
            config.setTruststorePath(path);
        }

//          Create XMPP Connection

        connection = new XMPPConnection(config);

//          THELEI TO RUNNABLE ALLIWS DN TREXEI

        new Thread(new Runnable() {
            @Override
            public void run() {

                try {
                    connection.connect();
                    connection.login(user, pass);
                    if(connection.isConnected()){
                        Log.d("Alex", "connected biatch!");
//                          try {
//                              Thread.sleep(5000);
//                          } catch (InterruptedException e) {
//                              e.printStackTrace();
//                          }
                    }
                    else{
                        Log.d("Alex","not connected");
                    }

                } catch (XMPPException e) {
                    e.printStackTrace();
                }
            }
        }).start();

    }

    public void disconnect(){
        if(connection.isConnected()){
            connection.disconnect();
        }

else{Toast.makeText(getApplicationContext(), "not     connected",Toast.LENGTH_LONG).show();
        }
    }

} 
```

和布局：

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/userTxt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="27dp"
    android:background="#FFFFFF"
    android:ems="10"
    android:inputType="textPersonName" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/userTxt"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="14dp"
    android:layout_marginTop="52dp"
    android:background="#FFFFFF"
    android:text="User Name :" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/userTxt"
    android:layout_marginTop="62dp"
    android:background="#FFFFFF"
    android:text="Password :" />

<EditText
    android:id="@+id/passTxt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/userTxt"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="58dp"
    android:background="#FFFFFF"
    android:ems="10"
    android:inputType="textPassword" />

<Button
    android:id="@+id/logBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView2"
    android:layout_below="@+id/passTxt"
    android:layout_marginTop="66dp"
    android:background="#FFFFFF"
    android:text="Log In" />

<Button
    android:id="@+id/disBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/logBtn"
    android:layout_alignRight="@+id/userTxt"
    android:background="#FFFFFF"
    android:text="disconnect" />

</RelativeLayout> 
```

名册.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:48:20.877

我一直认为这样的事情可能有点令人困惑，所以我在[Vapor API](http://vapor-api.com)中编写了支持使其更简单- 一个旨在使应用程序开发更容易的 Android 框架。

它为您隐式管理所有绑定，还允许您完全通过服务类检索绑定（您无需在代码中维护连接对象，它已经为您完成）。

如果你想尝试一下，你可以这样做（使用[VaporActivity](http://vapor-api.com/core/activity)和[VaporServiceBindable](http://vapor-api.com/core/servicebindable)）：

```
public class RosterActivity extends VaporActivity{

   public void create(VaporBundle bundle){

      $.srv(XMPPService.class); // optionally, first start the service

      // set up the callback for when the service is bound
      $.hook(SERVICE_BIND).hookIn(new $$hookee(){

          public void call(String hookName, VaporBundle args){

             // put your code here that depends on the binding...

          }

      });

      // bind to the service
      $.bind(XMPPService.class);

    }

} 
```

基于绑定是异步的事实，这显然是您描述的那种问题的简化框架。

更重要的是，如果您想在 Activity 中使用 Service 中的方法，您可以在任何地方轻松地做到这一点：

```
this.service(XMPPService.class).foo(); // some method in the service 
```

这会在后台检索`ServiceConnection`自动为您创建的较早版本，并为您提供`IBinder`对服务的访问权限。

如果您有兴趣，也应该查看[VaporService 。](http://vapor-api.com/core/service)它在自己的线程中运行服务，您可以任意暂停、休眠和重新启动，让您完全控制您的服务，而不必担心血淋淋的细节。

希望有帮助。

# c# - Web API - 整理并向用户发送数据

> ID：15274939
> 
> 赞同：1
> 
> 时间：2013-03-07T15:23:44.377
> 
> 标签：c#, asp.net-mvc, web-services, asp.net-web-api

我有一个使用 ASP MVC Web API 构建的 Web 服务，我希望将所有用户信息整理成一个文件传输到前端，在这种情况下是一个 ASP 网站。只是想知道在 Web 服务端整理和生成文档（即 .txt 文件或 .PDF）或整理信息并将其返回给客户端，然后他们将在其中创建文档是更好的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:26:58.910

最好在服务器端执行此操作，以便其他应用程序能够重用您的服务方法，而不必担心创建文档。创建 PDF 还需要在服务器端更好地安装和维护的库。如果需要，您可以创建另一个发送原始用户信息的服务方法，以便客户端可以使用该信息做任何需要的事情。

# ruby - GIVEN 和 THEN 中的定义相同......有什么方法可以编写一个方法吗？

> ID：15274941
> 
> 赞同：1
> 
> 时间：2013-03-07T15:23:47.877
> 
> 标签：ruby, cucumber, bdd

我有这个代码：

```
Given /^I wait for (\d+) seconds$/ do |seconds|
    $webClient.wait(seconds)
end
Then /^I wait for (\d+) seconds$/ do |seconds|
    $webClient.wait(seconds)
end 
```

我可以以某种方式将其定义为涵盖 THEN 和 GIVEN 的单一方法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:26:31.857

您不需要两次定义相同的步骤。Given/When/Then 主要是语法糖。

```
Given /^I wait for (\d+) seconds$/ do |seconds|
  $webClient.wait(seconds)
end 
```

通过上述步骤，您的功能中的以下任何一项都将按预期工作：

```
Given I wait for 15 seconds
When I wait for 12 seconds
And I wait for 8 seconds
Then I wait for 999 seconds 
```

# php - CakePHP - 路由到管理员

> ID：15274946
> 
> 赞同：0
> 
> 时间：2013-03-07T15:23:50.950
> 
> 标签：php, cakephp

菜鸟问题！

我有一个完整的管理员设置：登录，身份验证等等，它正在工作。所以，现在我需要一个新的控制器来处理另一种情况，然后我创建了一个名为 PressDownloadsController 的控制器，并为这个新控制器中的每个操作创建了正确的视图。

我还创建了以下路线：

```
Router::connect('/pressdownloads', array('controller' => 'pressdownloads', 'action' => 'downloads')); 
```

在 pressDownloads 控制器内部，一些动作之间有一些重定向。

当我尝试打开 url /pressdownloads/downloads 或只是 /pressdownloads 它只是进入管理控制器，我需要在访问 pressdownloads 区域之前登录。

为什么？

UsersController（管理员）中的身份验证设置：

好的。我得到它。所以身份验证设置：

```
 public $components = array(

    'Session',

    'Auth' => array(

        'loginAction' => array(

            'controller' => 'users',

            'action' => 'login',

            'prefix' => 'admin',

        ),

        'loginRedirect' => '/admin/events',

        'logoutRedirect' => '/admin',

        'authError' => 'Acesso negado',

        'flash' => array(

            'element' => 'admin/messages/error',

            'key' => 'auth',

            'params' => array()

        ),

        'authorize' => array('Controller'),

        'authenticate' => array(

            'Form' => array(

                'fields' => array('username' => 'email')

            )

        )

    )

); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:31:02.417

我相信您会在启用“管理员”后访问该链接。简而言之，您必须单击管理员提供的页面中的链接。

尝试在您当前的路线中添加其他参数**“admin”=> false 。**

```
Router::connect('/pressdownloads', 
                array(
                   'controller' => 'pressdownloads', 
                   'action' => 'downloads', 
                   'admin' => false
                )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:33:48.507

我建议检查 Auth 组件设置以及如何将管理区域与非管理区域分开。此外，您可以在路由中指定不使用管理员前缀，如下所示：

```
Router::connect('/pressdownloads', array('controller' => 'pressdownloads', 'action' => 'downloads', 'admin' => false)); 
```

# clojure - 为什么我不能将 404 与 (.getMessage e) 的返回进行比较？

> ID：15274949
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:24:04.457
> 
> 标签：clojure

我显然不明白 (.getMessage e) 返回什么，这可能就是为什么我在以下代码块（let 绑定的一部分）中显示以下问题的原因。

```
accumail-results (try
  (client/get accumail-url {:query-params (into {} (first one-parsed-csv-vec))})
  (catch Exception e
  (println (.getMessage e))
  (if (not (= (.getMessage e) 404))
    (exit-sys (str accmail-except-str (.getMessage e) ))))) 
```

我尝试将值设置为字符串并进行比较，但出现空指针错误。那么，为什么我不能将 (.getMessage e) 的输出与 404 进行比较。我知道我正在从我的 Web 应用程序返回 404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:37:58.250

`e`只是一个Java例外。[Exception.getMessage()](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html#getMessage%28%29)返回一个字符串，它永远不会等于数字 404。

如果异常包装了 HTTP 错误响应代码，那么您将需要有关特定异常类型的更多专业知识，以了解如何从异常中获取代码。它可以作为 Exception 子类的方法提供，或者您可能必须从消息中解析它。您如何获得错误代码将取决于您使用的 HTTP 客户端以及它如何表示错误。

# c - 指针指向字符串时没有输出

> ID：15274954
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:24:20.540
> 
> 标签：c

```
int main(){
 char a[80] = "Angus Declan R";
 char b[80];
 char *p,*q;
 p = a;
 q = b;
 while(*p != '\0'){
  *q++ = *p++;
 }
 *q = '\0';
 printf("\n p:%s q:%s \n",p,q);
 puts(p); //prints the string
 puts(q); //doesnt print the string
 return 0;
} 
```

为什么字符串没有从 p 复制到 q？尝试打印 q 时，它什么也不打印

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:26:25.637

添加

```
p = a;
q = b; 
```

再次之前

```
printf("\n p:%s q:%s \n",p,q);
 puts(p); //prints the string
 puts(q); //doesnt print the string 
```

因为`p`and`q`指针在`while`循环中递增，并且它们不再指向`a`and `b`char 数组的开头

**顺便说一句**，正如评论：

您可以替换此代码块

```
while(*p != '\0'){
  *q++ = *p++;
 }
 *q = '\0'; 
```

经过

```
while(*q++ = *p++); // more simple ;-) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:29:38.220

`puts(p); //prints the string`

由于情况的特殊情况，这只是运气。`p`和都`q`位于各自字符串的末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:33:31.843

您必须在显示之前将指针重新定位在字符串的正确位置（因此：p=a 和 q=b）。

```
int main(){
 char a[80] = "Angus Declan R";
 char b[80];
 char *p,*q;
 p = a;
 q = b;
 while(*p != '\0'){
  *q++ = *p++;
 }
 *q = '\0';
 p=a;
 q=b;
 printf("\n p:%s q:%s \n",p,q);
 puts(p); //prints the string
 puts(q); //doesnt print the string
 return 0;
} 
```

注意：您可能很幸运： puts(p); “打印字符串”可能是因为a和b是连续存储的。如果你做了类似的事情：

```
 char a[80] = "Angus Declan R";
 char c[80] = {"\0"}; //example
 char b[80]; 
```

看跌期权（p）；也不会打印任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:34:47.367

这是您修复的代码

```
#include <stdio.h>

int main()
{
 char a[80] = "Angus Declan R";
 char b[80];
 char *p,*q;
 p = a;
 q = b;
 while(*p != '\0')
  *q++ = *p++;
    *q++ = '\0';
 p = a;
 q = b;

 printf("\n p:%s q:%s \n",p,q);
 puts(p); 
 puts(q); 
 return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T17:59:20.850

字符串实际上是被复制的，你可以通过在最后输入这个 printf 语句来看到：

```
 printf("\n a: %s b: %s \n", a, b); 
```

但是，您忘记了有关`++`操作员的一些基本信息。当你写的时候`*q++ = *p++`，它和写的一样：

```
q = q + 1;
p = p + 1;
*q = *p; 
```

所以，在你的循环结束时， p 和 q 指向你的空字符，这显然不是你想要的。

# paypal - Paypal：仅在 DoExpressCheckoutPayment 方法中的令牌无效

> ID：15274957
> 
> 赞同：3
> 
> 时间：2013-03-07T15:24:25.767
> 
> 标签：paypal, express, token, checkout

我开始使用 PayPal，我的第一项工作是在我们的网站上对其进行调试。

实际上，当我们到达订单末尾时，它工作正常，但我们在日志中得到一个堆栈：`"Invalid token (#10410: Invalid Token)"`。当`doExpressCheckoutPayment`调用 并且似乎没有令牌和payerid 时会发生这种情况，因此会引发错误。所有其他信息似乎都已正确填写。

这是调试结果调用`doExpressCheckoutPayment`：

```
[DoExpressCheckoutPayment] => Array
(
    [TOKEN] => 
    [PAYERID] => 
    [PAYMENTACTION] => Sale
    [AMT] => 4.16
    [CURRENCYCODE] => EUR
    [BUTTONSOURCE] => Varien_Cart_EC_FR
    [NOTIFYURL] => *
    [RETURNFMFDETAILS] => 1
    [ITEMAMT] => 3.36
    [TAXAMT] => 0.80
    [SHIPPINGAMT] => 0.00
    [L_NUMBER0] => *
    [L_NAME0] => *
    [L_QTY0] => 1
    [L_AMT0] => 4.10
    [L_NUMBER1] => 
    [L_NAME1] => Discount
    [L_QTY1] => 1
    [L_AMT1] => -0.74
    [BUSINESS] => 
    [EMAIL] => *
    [FIRSTNAME] => *
    [LASTNAME] => *
    [MIDDLENAME] => 
    [SALUTATION] => 
    [SUFFIX] => 
    [COUNTRYCODE] => *
    [STATE] => *
    [CITY] => *
    [STREET] => *
    [ZIP] => *
    [PHONENUM] => *
    [SHIPTOCOUNTRYCODE] => *
    [SHIPTOSTATE] => *
    [SHIPTOCITY] => *
    [SHIPTOSTREET] => *
    [SHIPTOZIP] => *
    [SHIPTOPHONENUM] => *
    [SHIPTOSTREET2] => 
    [STREET2] => 
    [SHIPTONAME] => *
    [ADDROVERRIDE] => 1
    [METHOD] => DoExpressCheckoutPayment
    [VERSION] => 72.0
    [USER] => ****
    [PWD] => ****
    [SIGNATURE] => ****
)

[response] => Array
(
    [TIMESTAMP] => 2013-03-07T15:01:45Z
    [CORRELATIONID] => 64adbc2375f59
    [ACK] => Failure
    [VERSION] => 72.0
    [BUILD] => 5331358
    [L_ERRORCODE0] => 10410
    [L_SHORTMESSAGE0] => Invalid token
    [L_LONGMESSAGE0] => Invalid token.
    [L_SEVERITYCODE0] => Error
) 
```

问题是，在调用此方法之后，`setExpressCheckout`它被调用并且成功，因此正确放置了订单。

这是调用时的成功响应`setExpressCheckout`：

```
[response] => Array
(
    [TOKEN] => EC-5UG654898R029060W
    [TIMESTAMP] => 2013-03-07T15:01:48Z
    [CORRELATIONID] => 348b58c6200c1
    [ACK] => Success
    [VERSION] => 72.0
    [BUILD] => 5331358
) 
```

我不明白为什么在做 a 时`doExpressCheckoutPayment`会抛出失败，而在做时`setExpressCheckout`，没有检测到错误并且无论如何都接受了销售....

方法调用的顺序有问题吗？我的意思是，`setExpressCheckout`之前不应该被调用`doExpressCheckoutPayment`？

我们正面临 PayPal 的另一个问题，我希望解决这个问题能够解决另一个问题....

非常感谢你们的帮助！

塞布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:22:07.937

[SetExpressCheckout](https://developer.paypal.com/webapps/developer/docs/classic/api/merchant/SetExpressCheckout_API_Operation_NVP/)应该首先发生 - 您返回的令牌是您重定向客户浏览器的内容，当他们返回时，他们将在 URL 中拥有令牌，`getExpressCheckoutDetails`如果您需要查看他们的送货地址和关联的信息，最后你运行`doExpressCheckoutPayment`提交事务。

重申一下：您从 获得有效令牌，`setEC`在重定向中使用此令牌，将此令牌返回附加到`RETURNURL`客户返回的位置，并在任何后续`getEC`和`doEC`调用中引用此令牌。

# ios - UITableView push segue 触发多次

> ID：15274961
> 
> 赞同：5
> 
> 时间：2013-03-07T15:24:37.047
> 
> 标签：ios, uitableview, uinavigationcontroller, segue

我在我的应用程序中遇到了一个奇怪的错误：

**设置**

一个简单的 Master-Detail 应用程序，iPhone 风格（即没有拆分视图，没有弹出框，只有一个导航控制器、一个表格视图控制器和一个视图控制器）。

![在此处输入图像描述](../Images/870491b8cbe2235e1961d53674d5e65e.png)

**错误**

1.  触摸表格视图的“背景”部分（我的屏幕截图中的深灰色部分），例如部分页眉或页脚。
2.  在将手指放在屏幕上的同时，多次触摸一个单元格。
3.  松开所有手指。“detail”视图会正常推送，但是当点击后退按钮时，你会发现detail view被堆叠的次数与你在步骤2中点击单元格的次数一样多。

![在此处输入图像描述](../Images/f16e416727cec9ac02c8b497a17707be.png)

您还可以在第 2 步触摸多个单元格，它们的目标视图将以正确的顺序堆叠:)

**重现它**

我能够使用一个干净、新创建的应用程序以及在 iPhone 版 Twitter 应用程序的最新版本中重现该错误（通过用手指 #1 触摸“加载”标签并多次触摸一条推文）。

但是，我无法在“常规”选项卡（这是一个分组表视图）下的“设置”应用程序中触发相同的行为。

该错误已在 iOS 6.0 和 6.1 上重现。我没有要测试的旧版本设备。

**问题**

在创建基于导航/表格视图的应用程序时，这是一个已知的技巧吗？如果是，是否有解决方案来防止这种（奇怪的）行为？或者这是一个 iOS 错误（如果是，Apple 已经知道了）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:57:15.463

您可以使用的一种可能的权宜之计是实施

```
- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender 
```

并使用布尔标志或其他东西来指示您当前正在尝试执行该转场。前任：

```
BOOL doingSegue = NO;

-(void) viewWillAppear
{

    doingSegue = NO;
}

- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender
{

    if ( [identifier isEqualToString:@"MySegueIdentifier"] )
    {
        if ( doingSegue )
        {
            return NO;
        }
        else
        {
            doingSegue = YES;
            return YES;
        }
    }
    return YES;
} 
```

**斯威夫特版本**

```
var doingSegue = false

override func viewWillAppear(_ animated: Bool) {
    doingSegue = false
}

override func shouldPerformSegue(withIdentifier identifier: String, sender: Any?) -> Bool {
    if identifier == "MySegueIdentifier" {
        if doingSegue {
            return false
        }
        else {
            doingSegue = true
            return true
        }
    }
    return true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T13:06:38.653

这已由 Apple 在 iOS 7 中修复。

对于操作系统的早期版本，[Dan F 的回答](https://stackoverflow.com/a/15275764/404321)应该可以解决问题。

# html - Outlook 行高忽略 html 邮件

> ID：15274962
> 
> 赞同：0
> 
> 时间：2013-03-07T15:24:38.107
> 
> 标签：html, email, outlook, css

我为时事通讯创建了一个简短的 HTML 电子邮件。一切都在 gmail 和 hotmail 上完美显示。但是在 Outlook 上，图像之间存在一些空间。用萤火虫检查我可以看到我的行高被忽略了，我看到的空白实际上是我的 td 的行高。这是我的代码的一部分：

```
 <tr>
      <td width="10" height="80"  style="line-height:0px; line-height:0; border-right:1px solid #9cc020;">&nbsp;</td>
      <td width="15" height="80" style="line-height:0;" >&nbsp;</td>
      <td width="560" height="80"  colspan="5" style="line-height:0;">
         <img src="http://infos.mycookit.com/img/PL01bis/c1.jpg" alt="avec le code CHAMP" width="560" height="80" style="display:block">
      </td>
      <td width="10" height="80"  style="line-height:0; border-left:1px solid #9cc020;">&nbsp;</td>
    </tr> 
```

我还尝试将 font-size 设置为 0，设置 line-height (%, em, px) 的不同方法。我还删除了 tds 和 imgs 之间不必要的空白，但 line-height 完全被忽略了。如果我在萤火虫中改变它，它虽然有效。所以我知道问题就是这样。

有没有解决的办法？

---edit----- 哦，我也在这个线程上尝试了几乎所有的东西：[Line-height not working in Outlook 2010 for HTML Email，](https://stackoverflow.com/questions/8980956/line-height-not-working-in-outlook-2010-for-html-email?rq=1) 包括奇怪的黑客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:26:58.907

Outlook 不使用“真正的”html 渲染器，因此您陷入了困境。可能是“行高”根本不起作用，或者对某些元素不起作用。

您可以尝试各种替代技术。例如，使用附加元素（例如 div、span 等）将单元格内的内容包装起来，并为该元素提供填充或边距。例子

```
<td>
   <div style="padding: 10px 0;">[mycontent]</div>
</td> 
```

# jboss - 任何人都知道如何使用 Maven Cargo 为嵌入式 JBoss 容器自定义 servlet 端口？

> ID：15274965
> 
> 赞同：0
> 
> 时间：2013-03-07T15:24:40.350
> 
> 标签：jboss, jboss7.x, cargo, maven-cargo

我正在使用带有 Cargo 1.3.3 插件的 Maven 3.0.3。我正在尝试配置嵌入式 JBoss 7.1 容器。我想自定义 JBoss 侦听请求的端口，通常是 8080。但是，我不能t似乎自定义它，使用配置部分中的“cargo.servlet.port”属性。下面是我的配置

```
 <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <version>1.3.3</version>
                    <configuration>
                        <home>${project.build.directory}/jboss-${jboss.version}/container</home>
                        <properties>
                            <cargo.logging>high</cargo.logging>
                            <cargo.servlet.port>${jboss.servlet.port}</cargo.servlet.port>
                        </properties>
                        <container>
                            <containerId>jboss${jboss.major}x</containerId>
                            <zipUrlInstaller>
                                <url>http://download.jboss.org/jbossas/7.1/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final.zip</url>
                                <downloadDir>${project.basedir}/downloads</downloadDir>
                                <extractDir>${project.build.directory}/extracts</extractDir>
                            </zipUrlInstaller>
                            <output>${project.build.directory}/jboss${jboss.major}x.log</output>
                            <log>${project.build.directory}/cargo.log</log>
                        </container>
                        <deployables>
                            <deployable>
                                <location>target/${project.artifactId}.${project.packaging}</location>
                                <pingURL>http://localhost:${jboss.servlet.port}/${project.artifactId}</pingURL>
                                <pingTimeout>60000</pingTimeout>
                                <properties>
                                    <context>${project.artifactId}</context>
                                </properties>
                            </deployable>
                        </deployables>
                    </configuration>
                    <executions>
                        <execution>
                            <id>start-container</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                <goal>start</goal>
                                <goal>deploy</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>stop-container</id>
                            <phase>post-integration-test</phase>
                            <goals>
                                <goal>stop</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin> 
```

这是我在应用程序服务器日志中得到的绑定异常（我已经在端口 8080 上运行了一个 JBoss 实例）。

```
16:45:41,913 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-10) JBoss Web Services - Stack CXF Server 4.0.2.GA
16:45:42,010 ERROR [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-3) Error initializing endpoint: java.net.BindException: Address already in use /0.0.0.0:8080
    at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:983) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:190) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.Connector.init(Connector.java:983) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:267) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [classes.jar:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [classes.jar:1.6.0_41]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_41]

16:45:42,025 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.web.connector.http: org.jboss.msc.service.StartException in service jboss.web.connector.http: JBAS018007: Error starting web connector
    at org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:271)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [classes.jar:1.6.0_41]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [classes.jar:1.6.0_41]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_41]
Caused by: LifecycleException:  Protocol handler initialization failed: java.net.BindException: Address already in use /0.0.0.0:8080
    at org.apache.catalina.connector.Connector.init(Connector.java:985)
    at org.jboss.as.web.WebConnectorService.start(WebConnectorService.java:267)
    ... 5 more 
```

我喜欢 Cargo 插件的原因是它允许我使用我自己的 JBoss Standalone.xml 配置，但我对 Cargo 的替代品持开放态度，前提是我可以自定义我的配置。感谢您的指导， - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T07:30:28.227

您的配置中似乎只有一个小错误。属性是 Cargo 配置的一部分，它是插件配置的子/属性，所以实际上，您必须在配置标签内放置一个配置标签。这是我的（部分）：

```
 <plugin>
      <groupId>org.codehaus.cargo</groupId>
      <artifactId>cargo-maven2-plugin</artifactId>
      <version>1.3.3</version>
      <configuration>
        <container>
          <!-- Add your container here, we use a custom one -->
        </container>
        <configuration>
          <properties>
            <cargo.servlet.port>5556</cargo.servlet.port>
            <!-- other properties -->
          </properties>
          <configfiles combine.children="append">
            <!-- here we add our configuration files -->
            <configfile>
              <!-- Expect configfiles to be filtered and gathered in 
                target/jboss71x (in the respective subdirectories) -->
              <file>${project.build.directory}/cargo/jboss71x</file>
            </configfile>
          </configfiles>
        </configuration>
      </configuration>
    </plugin> 
```

# jquery - Uploadify：从队列中删除文件后，totalBytesTotal 未更新

> ID：15274971
> 
> 赞同：1
> 
> 时间：2013-03-07T15:24:52.240
> 
> 标签：jquery, uploadify

使用最新的**jQuery**和**Uploadify我使用****onUploadProgress**实现了一个进度条，效果很好。唯一的问题是，在上传期间从队列中删除文件时，totalBytesTotal 不会自行更新，这使我的进度条显示不正确的信息。

欢迎提出建议，解决方法。

顺便说一句：试过他们的论坛（垃圾邮件天堂，顺便说一句）似乎没有人有这样的问题。

```
$("#button_holder").uploadify({
    "onUploadProgress" : function(file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal){
        pos = Math.round((totalBytesUploaded/totalBytesTotal)*100);
        kb = (totalBytesTotal /1024).toFixed(1);
        $("#progress_text").html("uploading "+ TotalFiles +" files.<br>"+ pos +"% of "+ kb +"kB done.<br>please wait.");
        $("#progress_bar").animate({"width" : pos +"%"},100);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:56:36.757

对于遇到此问题的任何人，对我有用的技巧是使用**`onSelect`**和**`onUploadError`**管理自定义 var（在我的情况下*`MyBytesTotal`*）以及队列中文件的总大小，并依赖此 var 而不是**`totalBytesTotal`**in **`onUploadProgress`**。

```
$("#button_holder").uploadify({
    "onSelect" : function(file){
        MyFilesTotal++;
        MyBytesTotal = MyBytesTotal + file.size;
    },
    "onUploadProgress" : function(file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal){
        pos = Math.round((totalBytesUploaded/MyBytesTotal)*100);
        kb = (MyBytesTotal /1024).toFixed(1);
        $("#progress_text").html("uploading "+ MyFilesTotal +" files.<br>"+ pos +"% of "+ kb +"kB done.<br>please wait.");
        $("#progress_bar").animate({"width" : pos +"%"},100);
    },
    "onUploadError" : function(file, errorCode, errorMsg, errorString){
        MyFilesTotal--;
        MyBytesTotal = MyBytesTotal - file.size;
    }
}); 
```

我最终没有使用`MyFilesTotal`. 无论我做什么，在删除其中一些文件后，它都不会在队列中保留正确数量的文件。也许还有另一种获取我不知道的信息的方法。

# c# - 实体框架：关联不会更新

> ID：15274983
> 
> 赞同：1
> 
> 时间：2013-03-07T15:25:33.590
> 
> 标签：c#, .net, associations

我知道这确实是一个常见问题，但我无法找到解决问题的单一方法。

我有一个包含“页面”集合的对象“版本”。我现在正在尝试向现有版本添加新页面。该页面已成功存储，但后来当我访问该版本时，我仍然有旧的页面数量。

添加新页面时，我尝试了以下操作：

```
var edition = context.Editions.Where(x => x.Id == editionId).FirstOrDefault();
context.Pages.AddObject(page);
edition.Pages.Add(page);
context.ObjectStateManager.ChangeObjectState(edition , System.Data.EntityState.Modified);
context.SaveChanges(); 
```

我真的不知道我还能错过什么。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:32:29.200

也许我不明白，但是您是否尝试删除页面？

var edition = context.Editions.Where(x => x.Id == editionId).FirstOrDefault(); context.Pages.AddObject(page); edition.Pages.Clear(); //删除以前的页面 edition.Pages.Add(page);//添加新的 context.ObjectStateManager.ChangeObjectState(edition , System.Data.EntityState.Modified); context.SaveChanges();

# database - 将表格规范化为第三范式

> ID：15274985
> 
> 赞同：7
> 
> 时间：2013-03-07T15:25:40.417
> 
> 标签：database, database-design, relational-database, normalization, database-schema

这道题显然是一道作业题。我无法理解我的教授，也不知道他在选举期间说了什么。我需要逐步说明将下表首先标准化为 1NF，然后是 2NF，然后是 3NF。

![在此处输入图像描述](../Images/589fa7f4735cae664ceb91deb856bb57.png)

我感谢任何帮助和指导。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T16:50:17.450

好吧，我希望我没记错，让我们开始吧……

## 规则

为了使它们非常简短（并且不是很精确，只是为了让您初步了解它的全部内容）：

*   **NF1**：表格单元格不能包含多个值。
*   **NF2**：NF1，加上所有非主键列必须依赖于所有主键列。
*   **NF3**：NF2，加上非主键列可能不相互依赖。

## 指示

*   **NF1**：查找包含多个值的表格单元格，将它们放入单独的列中。
*   **NF2**：查找依赖于所有主键列的列，将它们放入另一个表中，该表只有它们真正依赖的主键列。
*   **NF3**：除了依赖于主键之外，查找依赖于其他非主键列的列。将依赖列放入另一个表中。

## 例子

### NF1

列“ `state`”具有类似“WA, Washington”的值。NF1 被违反，因为这是两个值，缩写和名称。

解决方案：要满足 NF1，创建两列，`STATE_ABBREVIATION`并且`STATE_NAME`.

### NF2

想象一下，您有一个包含这 4 列的表，表示汽车型号的国际名称：

*   `COUNTRY_ID`（数字，主键）
*   `CAR_MODEL_ID`（数字，主键）
*   `COUNTRY_NAME`(varchar)
*   `CAR_MODEL_NAME`(varchar)

该表可能有这两个数据行：

*   第 1 行：COUNTRY_ID=1，CAR_MODEL_ID=5，COUNTRY_NAME=USA，CAR_MODEL_NAME=Fox
*   第 2 行：COUNTRY_ID=2，CAR_MODEL_ID=5，COUNTRY_NAME=德国，CAR_MODEL_NAME=Polo

也就是说，模型“Fox”在美国被称为“Fox”，但同样的车型在德国被称为“Polo”（不记得这是不是真的）。

违反了NF2，因为国家名称不依赖于车型ID和国家ID，而只依赖于国家ID。

解决方案：要实现 NF2，请`COUNTRY_NAME`移入一个单独的表“COUNTRY”，其中包含列`COUNTRY_ID`（主键）和`COUNTRY_NAME`. 要获得包含国家名称的结果集，您需要使用 JOIN 连接两个表。

### NF3

假设您有一张包含这些列的表格，表示各州的气候条件：

*   `STATE_ID`（varchar，主键）
*   `CLIME_ID`（外键，“沙漠”、“雨林”等气候带的ID）
*   `IS_MOSTLY_DRY`（布尔）

违反了 NF3，因为 IS_MOSTLY_DRY 仅依赖于 CLIME_ID（我们至少假设），而不依赖于 STATE_ID（主键）。

解决方案：为满足NF3，将该列`MOSTLY_DRY`放入气候区表中。

* * *

以下是关于练习中给出的实际表格的一些想法：

我应用上述 NF 规则而不挑战主键列。但它们实际上没有意义，我们稍后会看到。

*   不违反 NF1，每个单元格只包含一个值。
*   EMP_NM 和所有电话号码都违反了 NF2，因为所有这些列都不依赖于完整的主键。它们都依赖于 EMP_ID (PK)，但不依赖于 DEPT_CD (PK)。我假设当员工转移到另一个部门时电话号码保持不变。
*   DEPT_NM 也违反了 NF2，因为 DEPT_NM 不依赖于完整的主键。它取决于 DEPT_CD，但不取决于 EMP_ID。
*   所有技能列也违反了 NF2，因为它们不是部门特定的，而是特定于员工的。
*   NF3被SKILL_NM违反了，因为技能名称只依赖于技能代码，甚至不是复合主键的一部分。
*   SKILL_YRS 违反了 NF3，因为它依赖于一个主键成员 (EMP_ID) 和一个非主键成员 (SKILL_CD)。所以它部分依赖于非主键属性。

因此，如果您删除所有违反 NF2 或 NF3 的列，则仅保留主键（EMP_ID 和 DEPT_CD）。剩下的部分违反了给定的业务规则：这种结构将允许员工同时在多个部门工作。

让我们从远处回顾一下。您的数据模型是关于员工、部门、技能以及这些实体之间的关系。如果将其标准化，您最终会得到一张员工表（包含 DEPT_CD 作为外键），一张用于部门，一张用于技能，另一张用于员工与技能之间的关系，持有“技能年”对于 EMP_ID 和 SKILL_CD 的每个元组（我的老师会称后者为“关联实体”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T20:16:30.923

查看表中的前两行，
并查看该表中哪些列被标记为“PK”，
并假设“PK”代表“主键”，
并查看为这两个列显示的值两行，
我建议你的教授从数据库教学中滚出来，直到他*对*这个主题进行了适当的教育后再回来。

这个练习不能被认真对待，因为问题陈述本身包含了无可救药的矛盾信息。

（请注意，因此，对于这个问题根本没有“好”或“正确”的答案！！！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:05:13.620

另一个过于简单的答案出现了。

在 3NF 关系表中，每个非键值都由键、整个键和除了键确定（所以帮助我 Codd ;)）。

1NF：关键。这意味着如果您指定键值和命名列，则在行和列的交叉处最多会有一个值。不允许使用多值，例如用逗号分隔的一系列值，因为您不能仅使用键和列名直接获取值。

2NF：全键。如果不属于键的列由键列的适当子集确定，则违反了 2NF。

3NF：只有钥匙。如果一列是由一组非关键列确定的，则违反了 3NF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-21T10:01:55.960

3NF 仅在它处于第二范式并且没有任何传递依赖并且所有非键属性都应该依赖于主键时才满足。

传递依赖：R=(A,B,C)。A->B 和 B->C 然后 A->C

# extjs - 向导中的单选按钮

> ID：15274989
> 
> 赞同：0
> 
> 时间：2013-03-07T15:25:45.677
> 
> 标签：extjs, extjs3, radio-group

我正在使用 extjs 3。当我第一次打开向导卡时，所有无线电组都正确显示。但是当我关闭向导卡并再次打开时，所有无线电组都没有显示。

```
xtype: 'radiogroup',
id: 'industry_select_type',
fieldLabel: 'Select By',
columns: 1,
items: [{
    boxLabel: 'None',
    name: 'industry_select_type',
    inputValue: '1', // do not set this field to 0, otherwise the radiogroup will not work properly.
    checked: true,
    listeners: {
        check: function (cb, checked) {
            toggleCheck(Ext.getCmp('indTree').root, false);
        }
    }
}, {
    boxLabel: 'All Industries',
    name: 'industry_select_type',
    inputValue: '2',
    listeners: {
        check: function (cb, checked) {
            if (checked) {
                Ext.getCmp('indTree').hide();
            }
        }
    }
}, {
    boxLabel: 'Specific Industries',
    name: 'industry_select_type',
    inputValue: '3',
    listeners: {
        check: function (cb, checked) {
            if (checked) {
                Ext.getCmp('indTree').show();
            } else {
                Ext.getCmp('indTree').hide();
            }
        }
    }
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T22:14:28.527

删除 Radiogroup 对象的 ID。

# windows-phone-8 - 当前活动的 LongListSelector Group Header 是什么

> ID：15274990
> 
> 赞同：0
> 
> 时间：2013-03-07T15:25:45.683
> 
> 标签：windows-phone-8, longlistselector

在我的 Windows Phone 8 应用程序中，我使用了 SDK 中的 LongListSelector 控件来显示分层数据。

如何（从我的应用程序按钮单击处理程序中）找出当前活动（堆叠在顶部）组标题是什么？SelectedItem 可能为空，因此我无法从中找到父组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:53:45.433

如果您没有选定的项目，则必须使用`ScrollOffset`内部`ScrollViewer`的来计算列表滚动了多少，然后根据已滚动的项目（和标题）的高度来确定它。

# c# - 使用 c# 将自动完成 xml 文件上传到谷歌搜索引擎

> ID：15274993
> 
> 赞同：0
> 
> 时间：2013-03-07T15:25:50.870
> 
> 标签：c#, php, google-search-api

我正在使用谷歌搜索引擎。

我可以添加自动完成条款并上传带有自动完成条款的 xml 文件。

我正在尝试通过控制台应用程序或 php 文件自动上传此 xml 文件。有没有办法可以使用 c# 或 php 或任何语言自动上传此 xml 文件？

这是用于澄清的图像

[http://postimage.org/image/6kldz1vnb/](http://postimage.org/image/6kldz1vnb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:53:04.793

Google 最近更改了自定义搜索下的布局和功能。我一直在尝试上传自动完成文件，但似乎此功能仍然无法正常工作。

此外，您只能上传一个 xml 文件，该文件将具有帮助部分中解释的定义格式。

# perl - Perl 非法除以零

> ID：15274994
> 
> 赞同：0
> 
> 时间：2013-03-07T15:25:51.370
> 
> 标签：perl, unix, activestate, divide-by-zero

我正在尝试运行这个 Perl 程序。

```
#!/usr/bin/perl
# ---------------     exchange.pl     -----------------

&read_exchange_rate;     # read exchange rate into memory

# now let's cycle, asking the user for input...

print "Please enter the amount, appending the first letter of the name of\n";
print "the currency that you're using (franc, yen, deutschmark, pound) -\n";
print "the default value is US dollars.\n\n";
print "Amount: ";

while (<STDIN>) {

  ($amnt,$curr) = &breakdown(chop($_));

  $baseval = $amnt * (1/$rateof{$curr});

  printf("%2.2f USD, ", $baseval * $rateof{'U'});
  printf("%2.2f Franc, ", $baseval * $rateof{'F'});
  printf("%2.2f DM, ", $baseval * $rateof{'D'});
  printf("%2.2f Yen, and ", $baseval * $rateof{'Y'});
  printf("%2.2f Pound\n\nAmount: ", $baseval * $rateof{'P'});
}

sub breakdown {
   @line = split(" ", $_);

   $amnt = $line[0];
   if ($#line == 1) {
     $curr = $line[1];
     $curr =~ tr/a-z/A-Z/;         # uppercase
     $curr = substr($curr, 0, 1);  # first char only
   } else { $curr = "U"; }
   return ($amnt, $curr);
}

sub read_exchange_rate {
  open(EXCHRATES, " 
```

每当它到达第 17 行 ( `$baseval = $amnt * (1/$rateof{$curr})`) 时，我都会收到错误消息`Illegal division by zero`。

怎么了？

我是 Perl 的新手，所以请解释一下你的答案。

这只发生在 Strawberry Perl 中。ActivePerl 可以工作，但它会将所有货币转换列为 0.0。

更新：我将代码更改为如下所示：

```
#!/usr/bin/perl

&read_exchange_rate;     # read exchange rate into memory

# now let's cycle, asking the user for input...

print "Please enter the amount, appending the first letter of the name of\n";
print "the currency that you're using (franc, yen, deutschmark, pound) -\n";
print "the default value is US dollars.\n\n";
print "Amount: ";

while (<STDIN>) {

  ($amnt,$curr) = &breakdown(chomp($_));

  $baseval = eval { $amnt * (1/$rateof{$curr}) };

  printf("%2.2f USD, ", $baseval * $rateof{'U'});
  printf("%2.2f Franc, ", $baseval * $rateof{'F'});
  printf("%2.2f DM, ", $baseval * $rateof{'D'});
  printf("%2.2f Yen, and ", $baseval * $rateof{'Y'});
  printf("%2.2f Pound\n\nAmount: ", $baseval * $rateof{'P'});
}

sub breakdown {
   @line = split(" ", $_);

   $amnt = $line[0];
   if ($#line == 1) {
     $curr = $line[1];
     $curr =~ tr/a-z/A-Z/;         # uppercase
     $curr = substr($curr, 0, 1);  # first char only
   } else { $curr = "U"; }
   return ($amnt, $curr);
}

sub read_exchange_rate {
  open EXCHRATES, "<exchange.db" or die "$!\n";

  while ( <EXCHRATES> ) {
    chomp; split;
    $curr = $_[0];
    $val  = $_[1];
    $rateof{$curr} = $val;
  }
  close(EXCHRATES);
} 
```

现在，当我使用 Open With（是的，我在 Windows 上）时，我在 Strawberry Perl 中得到了这个： `No such file or directory` 但如果我双击它，它开始正常，但会话看起来像这样：

```
Please enter the amount, appending the first letter of the name of
the currency that you're using (franc, yen, deutschmark, pound) -
the default value is US dollars.

Amount: 5 y
0.00 USD, 0.00 Franc, 0.00 DM, 0.00 Yen, and 0.00 Pound

Amount: 
```

显然有些不对劲。`chop`我已经更改了to的所有实例`chomp`。现在我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:31:26.150

您的代码不起作用的原因是`chop`返回从字符串末尾删除的字符，而不是删除最后一个字符的字符串。您还应该使用`chomp`which 是相同的，只是它仅在它是换行符时才返回最后一个字符。当文件的最后一行没有以换行符终止时，这可以避免出现问题。

此外，您必须*始终*`use strict`使用and启动 Perl 程序，`use warnings`并在第一次使用时声明所有变量。

您还应该避免使用`&`名称中的 & 号调用子例程。自 Perl 4 以来——大约 20 年前，这一直不是正确的做法。你的电话应该看起来像

```
read_exchange_rate(); 
```

# jsp - 用于查询字符串的多语言支持的 URL 编码

> ID：15274995
> 
> 赞同：0
> 
> 时间：2013-03-07T15:25:51.570
> 
> 标签：jsp, url, internationalization, urlencode, atg

我在 URL 的查询字符串中有一些日文文本。个人信息保护方针

但是当我尝试使用标签呈现它时，它显示在文本下方。

åäººæå ±ä¿è·æ¹é。
如何处理？