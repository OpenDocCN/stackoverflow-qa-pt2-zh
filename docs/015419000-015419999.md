# StackOverflow 问答 15419000-15419999

# caching - 如何强制 Windows Azure 存储提供的可缓存资源的特定 HTTP 标头？

> ID：15419001
> 
> 赞同：-1
> 
> 时间：2013-03-14T19:58:15.487
> 
> 标签：caching, azure, http-headers, azure-storage, azure-blob-storage

在[“优化缓存 - 让 Web 更快 - Google Developers”](https://developers.google.com/speed/docs/best-practices/caching)文档中，Google 指出

> 为所有可缓存资源指定**Expires**或**Cache-Control max-age**之一，以及**Last-Modified**或**ETag之一是很重要的。**同时指定 Expires 和 Cache-Control: max-age 或同时指定 Last-Modified 和 ETag 是多余的。

我正在使用 Microsoft.WindowsAzure.StorageClient 中的类将图像上传到 blob 容器，与开源项目[Azure Storage Explorer](http://azurestorageexplorer.codeplex.com/)中的代码几乎相同。

生成的图像与 Last-Modified 和 ETag 一起提供：

```
ETag: 0x8CFED5D3384112F
Last-Modified: Tue, 12 Mar 2013 17:21:43 GMT 
```

因此，下一个浏览器请求发送 HTTP 标头：

```
If-Modified-Since: Tue, 12 Mar 2013 17:21:43 GMT
If-None-Match: 0x8CFED5D3384112F 
```

如何强制 Azure 存储仅使用两个指令之一来消除这种冗余？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:44:03.887

就我个人而言，我不会太担心这两个标签被发回，因为这实际上是[RFC 2616](http://www.ietf.org/rfc/rfc2616.txt)推荐的。

> 13.3.4 何时使用实体标签和最后修改日期的规则
> ...
> HTTP/1.1 源服务器：
> ...
> ... HTTP/1.1 源服务器**的首选行为是发送*强实体*标签和*最后修改*值。**

HTTP 1.1 客户端**必须**在任何缓存条件请求中使用**实体标签，如果****实体标签**和**Last-Modified**都存在，它**应该**同时使用这两者。

我希望这将阐明为什么这两个标签都是从 Azure 存储服务器发回的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:58:36.460

简短的回答是你不能。

考虑到这一点，重要的是要记住，当您访问 blob 存储时，您不是在访问 Web 服务器上的文件，而是在使用恰好返回文件的 rest API。

Microsoft 无法删除他们认为对存储 API 至关重要的标头。

如果您担心标头过多，响应还包括几个 x-ms-... 标头，这些标头用于 API 的非浏览器客户端。

# winforms - Visual Studio 2012 中的 Tab Order Assignment 对话框在哪里？

> ID：15419007
> 
> 赞同：53
> 
> 时间：2013-03-14T19:58:31.343
> 
> 标签：winforms, visual-studio, visual-studio-2012, tab-ordering

据我所知，Visual Studio 有一个集成对话框，可让您轻松组织控件的 Tab 键顺序。

我刚刚创建了我的第一个 VS 2012 WinForms 项目，添加了我的所有控件并找到了 Tab Indexing 对话框，它似乎从 Visual Studio 中丢失了。

我发现[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/csz6b8x8%28v=vs.110%29.aspx)指出我可以通过转到 FORMAT>Tab 顺序来打开此对话框。问题是我的 FORMAT 菜单上没有 Tab Order 选项。或者，文档说明 Ctrl+D 应打开此对话框。它没有。

另一种选择是选择 VIEW>Tab Order 菜单选项。此方法使选项卡索引框悬停在您的控件上。随后，您可以按您希望它们选项卡的顺序一次单击一个控件，以设置选项卡顺序。

这是不可接受的，因为我的表单包含许多相互覆盖的面板和组框。我无法单击我的控件，因为其中许多控件在设计器中不再可见。

我有没有一种简单的方法来设置我的控件的选项卡顺序，就像以前在旧版本的 Visual Studio 中使用的那样？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-14T21:23:49.273

它仍然可用，您只需将其添加回“查看”菜单即可。工具 + 自定义、命令选项卡、菜单栏 = 查看。在控件中选择要插入它的菜单项，比如底部的菜单项。然后添加命令，类别 = 视图，命令 = 选项卡顺序。

[![标签顺序](../Images/4b406195fcaaf19feeffb614eabde968.png)](https://i.stack.imgur.com/y0dOq.jpg)

你对这个命令的记忆听起来确实有点模糊，它从未出现在“格式”菜单上，也从未出现过对话框。如果你想把它放在“格式”菜单上，那么你可以，只需在“命令”选项卡中选择“格式”菜单栏。但是，您不能将其设为对话框，它会在设计器视图中对控件进行编号。您实际上还记得 View + Document Outline 命令的一些可能性。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-09-16T19:42:28.440

转到对齐工具栏。最后，单击微小的“添加或删除按钮”向下箭头。单击“添加或删除按钮”按钮，然后查看列表底部。您应该看到标签顺序。单击它，它将被添加到对齐工具栏中。 ![在此处输入图像描述](../Images/5bddd977f5f7a688395d0f10867f1bbf.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-05T18:59:58.440

我发现这非常有用[http://msdn.microsoft.com/en-us/library/csz6b8x8.aspx](http://msdn.microsoft.com/en-us/library/csz6b8x8.aspx)

它允许您简单地按您希望它们通过标签的顺序单击各种控件。如上所述，当您处于“显示标签顺序”模式时执行此操作；Elton 关于将图标添加到工具栏的提示可以轻松切换模式。

Ctrl-双击第一个控件，然后单击后续控件，然后按 Enter 终止。如果您按住 Ctrl 键单击它之前的第 N 个控件，您也可以从第 N 个控件开始，然后按正常顺序单击。

（VS 快递 2013）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-05T21:55:02.410

在某些情况下，视图菜单中的 Tab 顺序工具会消失。例如，如果您单击文本框，然后转到其属性，则不会显示跳位顺序选项。您必须选择一个控件，然后立即转到视图菜单并选择 Tab 键顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T20:50:33.710

您可以使用“文档大纲”视图单击您的控件。如果它们都具有相同的 TabIndex 值，则它们的 Z 顺序将用作 Tab 顺序。Z 顺序也可以通过文档大纲视图进行更改。

# php - 使用自动完成检索多个属性 - json 编码

> ID：15419011
> 
> 赞同：1
> 
> 时间：2013-03-14T19:58:51.123
> 
> 标签：php, javascript, jquery, jquery-ui-autocomplete, tag-it

在创建带有标签的输入字段（如 Stack Overflow）时，我遇到了[tag-it](https://github.com/aehlke/tag-it)。在这个和[jQuery autocomplete](http://jqueryui.com/autocomplete/)的帮助下，我能够创建类似的功能。

```
$("#to").tagit({
    autocomplete: {
        source: "/searchUser.php"
    },
    filedName: "name"
}); 
```

在这种情况下，它只是检索名称，而我想将 ID（用户的 ID）与选定的名称相关联。读了一点，我发现我们可以使用这样的东西：

```
// in searchUser.php script

//while loop starts retrieving all names
    $names[]['label'] = $row['Name'];
    $names[]['id'] = $row['ID'];
echo json_encode($names); 
```

但是在自动完成完成的那一刻，`ID`数据就会丢失。

我的问题是，无论如何我都可以`ID`用关联的名称存储。

**`Might help`: tag-it 插件提供了`fieldName`通过创建隐藏的输入标签来设置 which 的功能。**

```
<input type="hidden" style="display:none;" value="Name" name="name"> 
```

# iphone - Webview 不会回到原来的页面

> ID：15419016
> 
> 赞同：0
> 
> 时间：2013-03-14T19:59:01.627
> 
> 标签：iphone, ios, objective-c, xcode

基本上我正在尝试调用后退按钮以转到上一个网页，但它似乎无法这样做。我不确定我是否遗漏了一个小细节。当我在原始页面上单击一个链接然后单击另一个链接然后按下返回按钮以访问第一个链接时，这似乎有效，但不会返回到原始页面（希望这是有道理的）。

```
 - (void)viewDidLoad {
[super viewDidLoad];
 webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 119,   self.view.bounds.size.width, self.view.bounds.size.height - 165)];
webView.backgroundColor = [UIColor whiteColor];
 webView.userInteractionEnabled = NO;
  webView.opaque = NO;
  [webView loadHTMLString:self.item.description baseURL:[NSURL URLWithString:self.item.link]];
  [self.view addSubview:webView];
  webView.delegate = self;
 webView.scalesPageToFit = YES;
    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame = CGRectMake(0, 0, 34, 34);
[backButton setImage:[UIImage imageNamed:@"back_arrow"] forState:UIControlStateNormal];
[backButton addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:backButton];

   }

- (void)back {
[webView goBack];
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:49:35.873

如果您没有在 .h 文件中提供 UIWebViewDelegate ，则首先提供它，然后如果您的问题没有解决，则只需注释此行并检查： `webView.userInteractionEnabled = NO;` 我运行您的代码一切都很好，但我运行您的代码并注释该行。

# php - 需要 HTML 表单将多行提交到 SQL 数据库

> ID：15419017
> 
> 赞同：0
> 
> 时间：2013-03-14T19:59:04.383
> 
> 标签：php, sql

因此，我刚刚在本主题中解决了我的表单的一些 javascript 问题：[如何将多行动态地从我的带有多行的 HTML 表单插入数据库？](https://stackoverflow.com/questions/15255737/how-can-i-insert-multiple-rows-into-a-db-from-my-html-form-with-multiple-rows-dy/15256207?noredirect=1#comment21800291_15256207)

但由于我有这样一个多部分的问题，我被要求创建一个新主题。下面是我在卡住的地方使用的新代码，希望能够提交我的表单，该表单具有向我的数据库添加多行的能力，并将这些 HTML 行分别添加到 SQL 数据库中的行。

预览：[http ://cl.ly/image/0K0Z202O1Q3e/Screen%20Shot%202013-03-14%20at%203.00.19%20PM.png](http://cl.ly/image/0K0Z202O1Q3e/Screen%20Shot%202013-03-14%20at%203.00.19%20PM.png)

**HTML**

```
<html>
<header>
<link rel="stylesheet" href="style.css" type="text/css">
<script type="text/javascript" language="javascript" src="/jquery/js/jquery-1.9.1.js">      
</script>
<script src="http://www.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js?   
key=Gmjtd%7Cluua2q6bn9%2C8g%3Do5-lzbsh"></script>
<script type="text/javascript" src="js/scripts.js"></script>
<title>Central Office Company Survey</title>
</header>
<body onload="get_company_name();">
<h1>Central Office Company Survey</h1>
<div id='map' style='width:0px; height:0px; position:absolute'></div>

<input type="hidden" id="co_city" name="co_city">
<input type="hidden" id="co_state" name="co_state">
<input type="hidden" id="co_zipcode" name="co_zipcode">

<table>
<th>Company</th>
<th>CO Name</th>
<th>Get Current Location</th>
<th>Lat</th>
<th>Long</th>
<th>Address</th>
<tr>
    <td><select id="company_name" name="company_name" /></select></td>
    <td><input name="co_name" type="text"></td>
    <td><input type="submit" value="Get GPS" onclick="gpslookup();" /></td>
    <td><input id="co_lat" name="co_lat" type="text" /></td>
    <td><input id="co_long" name="co_long" type="text" /></td>
    <td><input id="co_address" name="co_address" type="text" /></td>
</tr>
</table>
<table id="tabledata">
<thead>
    <th>Select</th>
    <th>Border Location Name</th>
    <th>Cable Location</th>
    <th>Direction of Vault Wall</th>
    <th>Cable Type</th>
    <th>Cable Size (pairs)</th>
    <th>Cable Gauge</th>
    <th>Vertical(s) appeared on Verticals</th>
    <th>Approximate Number of Jumpers</th>
    <th>Are Protectors Still In?</th>
    <th>Metered Distance</th>
    <th class="comments">Central Office Comments</th>
</thead>
<tbody id="input"></tbody>
<tbody id="template">
    <tr>
        <td><input type="checkbox" /></td>
        <td><input name="border_location" type="text" /></td>
        <td><input name="cable_location" type="text" /></td>
        <td><input name="vault_direction" type="text" /></td>
        <td><input name="cable_type" type="text" /></td>
        <td><input name="cable_size" type="text" /></td>
        <td><input name="cable_gauge" type="text" /></td>
        <td><input name="vertical" type="text" /></td>
        <td><input name="jumpers" type="text" /></td>
        <td><input name="protectors" type="text" /></td>
        <td><input name="metered_dist" type="text" /></td>
        <td><input name="comments" type="text" /></td>
    </tr>
</tbody>
</table>
<button id="ActionAddRow">Add Row</button>
<button onclick="deleteRow(); return false;">Delete Row</button>
<button id="ActionSubmit">Submit</button>
</body>
</html> 
```

**脚本.js**

```
//Button Functions
$(function () {
var addInputRow = function () {
    $('#input').append($('#template').html());
};

addInputRow();
$('#ActionAddRow').on('click', addInputRow);
$('#ActionSubmit').on('click', function () {
    var data = $('#input tr').map(function () {
        var values = {};
        $('input', $(this)).each(function () {
            values[this.name] = this.value;
        });
        return values;
    }).get();
    $.post('./php/upload_survey.php', {
        json: JSON.stringify(data),
        delay: 1
    }).done(function (response) {
        alert("Thank you. Your form has been submitted.");
        console.log(response);
    });
});
});

//Delete Selected Rows
function deleteRow() {
 try {
    var table = document.getElementById("tabledata");
    var rowCount = table.rows.length;

    for(var i=0; i<rowCount; i++) {
        var row = table.rows[i];
        var chkbox = row.cells[0].childNodes[0];
        if(null != chkbox && true == chkbox.checked) {
            if(rowCount <= 3) {
                alert("Cannot delete all the rows.");
                break;
            }
            table.deleteRow(i);
            rowCount--;
            i--;
        }
    }
}
catch(e) {
    alert(e);
}
}; 
```

**upload_survey.php**

```
//Assign passed parameters
    $values = json_decode($_POST['json']);

    $stringLogInfo =  "INFO: Location: $co_address CO Name = $co_name !!!\n\n";
    log_audit($logAuditFile, $logModule, $stringLogInfo);

//Parse and store the ini file, this will return an associative array
ini_set("display_errors", "1");
error_reporting(E_ALL);

//Insert Survey Form Information into the database
$sql="INSERT INTO table_name (company_name,...,...) 
VALUES ($values)";

mysql_query($sql) or die ("Unable to Make Query:" . mysql_error()); 
```

**到目前为止，每次我尝试让这个工作成功时，JS 都会成功触发，但我在 Chrome 的开发人员工具箱中收到一个错误：无法进行查询：列数与第 1 行的值计数不匹配

这里指的是js文件中的这个函数：console.log(response);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:41:30.167

我认为 PHP 中没有批量插入这样的东西。JAVA 的 addBatch 和 executeBatch 没有等价物。

因此，正确的方法是简单地迭代数组并使用准备好的语句插入单行。

# jquery - 通过 AJAX 提交多个表单 - 同步或异步

> ID：15419022
> 
> 赞同：0
> 
> 时间：2013-03-14T19:59:30.660
> 
> 标签：jquery, ajax

我有一些情况，我在同一个页面上有多个表单，我需要通过按一个“保存”按钮通过 ajax 提交。我通过使用 $.each 循环表单然后发出 ajax 请求来做到这一点。ajax 请求应该发回响应（错误/成功消息）。

我的问题是 - 使用 ASYNC 请求是否会出错，因为匹配哪个输出到哪个表单可能存在问题？你们有什么感想 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:14:50.097

永远不要使用同步 XHR 请求；没有正当理由使用它们，这会导致糟糕的用户体验。

您不必担心请求会混淆：

```
$('form').each(function() {
    var form = $(this);
    $.post(form.attr('action'), form.serialize(), function(r) {
        // `form` is still the particular form submitted,
        // and `r` will be the results of posting that form.
    });
}); 
```

# javascript - Javascript鼠标坐标

> ID：15419023
> 
> 赞同：0
> 
> 时间：2013-03-14T19:59:35.853
> 
> 标签：javascript, html

我的 HTML5 / Javascript 游戏有问题。在我的第一个菜单上，我有一个功能“mouseClicked”，它给了我精确的 X 和 Y 坐标，当我点击一个我有边界的区域时，游戏将开始......这运行得很完美，但是当游戏结束并且我的完成屏幕弹出时我想点击一个按钮，但它根本不起作用。我的控制台说它无法读取未定义的“pageX”的属性

这是一直困扰我的部分的视图。我对编程很陌生，所以请耐心等待我：P 我可以使用两次扫描我的坐标的功能吗？:o

```
function mouseClicked(e) {
mouseX = e.pageX - canvasBg.offsetLeft;
mouseY = e.pageY - canvasBg.offsetTop;
if (Playing == false && over == false) {
    if (btnPlay.checkClicked()) {  //this works great
        playGame();
    }
}
if (Playing == false && over == true)
    if (btnPlayAgain.checkClicked()) {
        init();
    }

}

function mouseClicked2(e) {
mouseX = e.pageX - canvasFinish.offsetLeft;
mouseY = e.pageY - canvasFinish.offsetTop;
if (isPlaying == false && over == true)
    if (btnPlayAgain.checkClicked()) {   // cannot load pageX 
        init();
    } 
```

}

# linux - 使用正则表达式解析日志文件以按日期提取失败的登录

> ID：15419024
> 
> 赞同：1
> 
> 时间：2013-03-14T19:59:42.310
> 
> 标签：linux, perl

perl 新手，可以使用一些帮助来了解正则表达式以及如何使用它们。我有一个文件名 auth.log，其中包含一堆成功和失败的登录。我有我希望正确的代码来读取文件并逐行读取，现在我只需要弄清楚如何拉出失败的代码并按日期将它们打印到屏幕上。下面是一个登录失败的例子，以及我在文件中读取的代码。我知道正则表达式会查找单词 failed 的匹配项，我只是无法获得语法。

9 月 14 日 07:23:59 icarus sshd [10393]：来自 137.190.220.15 端口 64704 ssh2 的 someUser 的密码失败

9 月 14 日 07:24:04 icarus sshd [10393]：来自 137.190.220.15 端口 64704 ssh2 的 someUser 的密码失败

9 月 14 日 07:30:17 icarus sshd [10523]：接受来自 137.190.19.13 端口 58506 ssh2 的 someUser 的密码

我相信我现在越来越近了，试图在其中启动一个计数变量只是为了吐出文件中有多少失败的密码，当我运行这个脚本时，我得到了大量的数字，最终只是再次以提示结束，我相信这意味着它至少仍在运行整个 auth.log，或者它没有尽头？有任何想法吗？

```
#!/usr/bin/perl
$count = 0;

open (MYFILE, 'auth.log');
while (my $line = <MYFILE>){
if ($line =~ /Failed password/){
$count++;
}
print $count;
#print "$line\n" if $line =~ /Failed password/; 
#this was a test to make sure it was was getting all the Failed password attempts in              the auth.log.
}
close (MYFILE); 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:27:23.067

```
use strict;
use warnings;

my $current_date = '';

open ( my $file, 'auth.log') or die 'Could not open auth.log';

while ( <$file> ) {
    next unless my ( $user_id ) = m/\Q: Failed password for \E(\w+)/;
    my ( $date ) = m/^((?:J[au]n|Feb|Ma[ry]|Apr|Jul|Aug|Sep|Oct|Nov|Dec) \s+ \d+)/x;
    if ( $date ne $current_date ) {
        $current_date = $date;
        %failures_for = ();
        print "$current_date\n--- --\n";
    }
    my $time = ++$failures_for{$user_id};
    print "$user_id #$time: $_";
}
print "\n";
close $file; 
```

我还添加了一个想法，即为用户保存失败计数，每天重置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:17:29.150

这是瑞士军刀的方法。

要查看所有失败：

```
cat auth.log | perl -ne 'print if /Failed password/' 
```

要查看 9 月的所有故障：

```
cat auth.log | perl -ne 'print if /Failed password/' | perl -ne 'print if /^Sep/' 
```

查看 'Sep 07 00:00:00' 和 'Oct 18 22:20:00' 之间的所有故障

```
cat auth.log | perl -ne 'print if /Failed password/' | perl -ane '$date = @F[0..2]; print if q(Sep 07 00:00:00) <= $date && $date <= q(Oct 18 22:20:00)' 
```

要计算它们：

```
cat auth.log | perl -ne 'print if /Failed password/' | perl -ane '$date = @F[0..2]; print if q(Sep 07 00:00:00) <= $date && $date <= q(Oct 18 22:20:00)' | wc -l 
```

为 SomeRandomUser 找到它们

```
cat auth.log | perl -ne 'print if /Failed password/' | perl -ne 'print if / for SomeRandomUser /' 
```

我的论点是，学习这种 Perl 风格可以让您以难以提前预料的方式快速地从日志文件中进行自定义提取。一旦你让它们工作，你可以在以后把它们变成一个更强大的程序，如果这为你的公司增加了价值。

附言。我最喜欢的是如何提取文件的第 123 到 456 行？您可以使用 head 和 tail 的组合，例如：

```
cat file | tail -n +123 | head -334 
```

但这需要两个命令，一些减法和一个可能的栅栏错误。相反，我记住了：

```
cat file | perl -ne 'print if 123 .. 456' 
```

从 123 打印到文件末尾：

```
cat file | perl -ne 'print if 123 .. eof' 
```

这在您的情况下可能很有用 - 您可以使用编辑器查看日志您感兴趣的日期的条目在第 1234 到 2345 行，然后执行

```
cat auth.log | perl -ne 'print if 1234 .. 2345' | perl -ne 'print if /Failed password/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T20:30:44.287

像这样的东西应该工作..

```
#!/usr/bin/perl
open(MYFILE, '<auth.log');
while (my $line = <MYFILE>) {
  print "$line\n" if $line =~ /Failed password/;
}
close(MYFILE); 
```

如果您想花哨并仅提取用户/ IP ..您可以这样做

```
print "$1 User: $2, IP: $3\n" if $line =~ m/^([A-Za-z]{3}\s+[0-9]{,2}\s+[0-9:]+).*Failed password for ([^ ]+) from ([^ ]+)/; 
```

这种技术在正则表达式中使用反向引用来调用，在 Perl 中，`$N`（其中 N 是某个数字）对应于每组括号中包含的字符串，从左到右。因此`$1`对应于日期 ..`$2`对应于 .. 之后的数据（在这种情况下为任何非空格字符）`Failed password for`或在您提供的所有日志中将包含`someUser`.. 同样`$3`将包含 IP，因为它是第三组括号，捕获字符串后面的任何非空格字符`from`。

# windows - 在 Windows 上连接到 oracle 数据库

> ID：15419026
> 
> 赞同：0
> 
> 时间：2013-03-14T19:59:51.747
> 
> 标签：windows, oracle, networking, jdbc, ora-12170

我的网络上有两台机器：

1.  **pc-1**在**Windows XP SP3**上运行，IP`192.168.1.15`
2.  **pc-2在****Windows Vista**上运行，IP`192.168.1.16`

现在我已经在**pc-2 (Vista) 上加载了****Oracle 11gR2** ，并且监听器正在使用以下设置运行：**`address=192.168.1.16 and port=1065.`**

 **我正在尝试通过**pc-1** (XP)连接到 Oracle 数据库，`jdbc thin driver`但出现错误**网络适配器无法建立连接。**
我的`JDBC url`：jdbc:oracle:thin:@192.168.1.16:1065:ora

**pc-2**是可达的，我检查了它`ping 192.168.1.16`

**我从PC-1**尝试了一些东西：

*   `TELNET 192.168.l.16 1065`给出错误**Connecting To 192.168.1.16...Could not open connection to the host, on port 1065: Connect failed.** `firewall`on **pc-2** (vista+oracle) 已关闭，所以我认为防火墙不会阻塞端口 1065 。

*   `tnsping 192.168.1.16:1065`给出**错误 TNS-12535: TNS:operation timed out**

*   `sqlplus sys/sys@//192.168.1.16:1065/ora as sysdba`但它给出了错误

    > **错误：ORA-12170：TNS：发生连接超时**

一些命令输出`PC-2`

*   `netstat -a`

`LOCAL ADDRESS`------------ `FOREIGN ADDRESS`-------------- `STATE`
192.168.1.16:1065----- PCNAME - ------------------聆听

谁能详细说明我该怎么办？我第一次尝试这样做，所以不知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:04:05.357

您必须在位于下的 tnsnames.ora 文件中提供正确的 SID 详细信息

对于 Linux：/home/oracle/oracle/product/10.2.0/db_1/network/admin/tnsnames.ora

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:04:39.697

你没有说你是如何连接的 - 我假设通过 TNS？

您是否在 XP 系统上的 TNSNAMES.ORA 文件中指定了 1065 端口？

您可以使用 EZCONNECT 从您的 XP 系统进行连接吗？这将 tnsnames.ora 排除在外。

```
sqlplus user/pw@//192.168.1.16:1065/db_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-18T14:34:26.353

错误：ORA-12170：TNS：发生连接超时

此错误通常表示网络连接失败

这很简单

关闭你的 Windows 防火墙**

# mysql - Mysql选择具有相同表的行不在where子句中

> ID：15419028
> 
> 赞同：0
> 
> 时间：2013-03-14T19:59:54.963
> 
> 标签：mysql

我有 2 个这样的表：

表格1

```
+----+------------+--------+
| 身份证 | 邮编4 | woonplaats |
+----+------------+--------+
| 1 | 9044 | 甜菜胶 |
| 2 | 9045 | 甜菜糖 |
| 3 | 1028 | 阿姆斯特丹 |
| 4 | 1029 | 阿姆斯特丹 |
| 5 | 1030 | 阿姆斯特丹 |
+----+------------+--------+

```

表 2

```
+----+------+------+
| 身份证 | 4PP | 地区 |
+----+------+------+
| 1 | 9044 | 2 |
| 2 | 9045 | 2 |
| 3 | 1028 | 4 |
| 4 | 1029 | 4 |
| 5 | 1030 | 4 |
+----+------+------+

```

我首先要选择 Beetgum 中的区域，在本例中为区域 2。然后我希望表 2 中的所有其他 4PP 具有相同的区域 (2)。所以查询的结果必须是 9044,9045

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:07:42.140

这是一个加入的:)

```
SELECT t2.*
FROM Table1 
INNER JOIN Table2 ON Table2.4PP = Table1.Postcode4
INNER JOIN Table2 t2 ON t2.Regio = Table2.regio
WHERE Table1.woonplaats = 'Beetgum' 
```

小提琴：[http ://sqlfiddle.com/#!2/347f3/3](http://sqlfiddle.com/#!2/347f3/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:07:04.107

这是一个非常糟糕的查询，直到有人给你一个花哨的连接（然后你应该使用它）

```
select t.4PP from Table2 t
WHERE t.Regio in
(
  select Regio
  from Table2 t2
  join Table1 t1 on t2.4PP=t1.Postcode4
  where t1.woonplats='Beetgum'
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:04:41.460

这应该这样做

```
select 4PP from table2 where Regio in (select Regio from table2 where 4PP in (select PostCode4 from table1 where woonplaats = "Beetgum")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T20:17:49.260

似乎这就是你要找的东西：

```
SELECT GROUP_CONCAT(Table3.4PP) 4PP FROM Table1
INNER JOIN Table2 ON(Table1.PostCode4 = Table2.4PP) 
INNER JOIN Table2 AS Table3 ON(Table2.Regio = Table3.Regio) 
WHERE woonplaats = 'Beetgum'; 
```

[演示](http://sqlfiddle.com/#!2/7b406/4)

# php - 表格跨页时 DOMPDF 挂起

> ID：15419034
> 
> 赞同：1
> 
> 时间：2013-03-14T20:00:06.770
> 
> 标签：php, dompdf

我从 dompdf 0.5 更新到 0.6 b3，以便更好地支持一些我想在应用程序中生成 PDF 时使用的 CSS。

在旧代码版本中，我当前的页面生成工作正常 - 一个表跨越多个页面没有问题。

但是在新版本中，一旦代码尝试生成一个表格跨越另一个页面的 PDF，DOMPDF 就会挂起。

我的错误日志给了我

```
PHP Fatal error:  Maximum execution time of 60 seconds exceeded in 
../sfDomPDFPlugin/lib/dompdf/include/frame.cls.php on line 374... 
```

我认为这是一个 CSS 规则，但我不清楚它可能是什么。建议？

更新：这是一些失败的示例代码。我不得不减少一点，但它包含了所有相关的标签。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>PDF</title>
<style type="text/css">
body
{
font-family: Helvetica, Arial, sans-serif;
background-image: url('/images/draft_watermark_small.png');
}
th {
font-size: 8pt;
}
#sf_admin_container ul, #sf_admin_container ol, #sf_admin_container li, #sf_admin_container h1, #sf_admin_container h2, #sf_admin_container h3, #sf_admin_container h4, #sf_admin_container h5, #sf_admin_container h6, #sf_admin_container pre, #sf_admin_container form, #sf_admin_container body, #sf_admin_container html, #sf_admin_container p, #sf_admin_container blockquote, #sf_admin_container fieldset, #sf_admin_container input { margin: 0; padding: 0; }
#sf_admin_container a img,:link img,:visited img { border: none; }
#sf_admin_container td
{
margin: 0;
font-family: Helvetica, Arial, sans-serif;
font-size: 8px;
background-color: #fff;
padding: 2px;
}
#sf_admin_container p
{
margin-bottom: 5px;
}
#sf_admin_container h1
{
margin: 2px 0pt;
padding: 3px;
padding-left: 0px;
color: #555;
font-family: Helvetica, Arial, Verdana, sans-serif;
font-size: 22px;
}
#sf_admin_container .sf_admin_default_action
{
background-color: #fc6 !important;
font-weight: bold !important;
}
#sf_admin_container .sf_admin_list
{
width: 100%;
border: 1px solid #000;
border-bottom: 1px;
border-right: 1px;
border-collapse: collapse;
}
#sf_admin_container .sf_admin_list th
{
color: #fff;
padding: 2px;
background-color: #900;
text-align: left;
}
#sf_admin_container .sf_admin_list th a
{
color: #333;
}
#sf_admin_container .sf_admin_list td
{
padding: 2px;
border-bottom: 1px solid #000;
border-right: 1px solid #000;
}
#sf_admin_container .sf_admin_filters li
{
list-style-type: none;
}
#sf_admin_container .sf_admin_row_0 td
{
background-color: #eee;
}
#sf_admin_container .sf_admin_row_1 td
{
border-bottom: 1px solid #FFF;
background-color: #EEF;
}
#sf_admin_container .sf_admin_row_2 td
{
}
#sf_admin_container .sf_admin_row_total td
{
border: 2px solid #000;
}
#sf_admin_container #heading
{
color: #fff;
background-color: #900;
padding: 3px;
font-size: 14pt;
font-weight: bold;
text-align: center;
}
#sf_admin_container #heading-bold
{
font-weight: bold;
}
#sf_admin_container #heading-total
{
color: #fff;
padding: 2px;
background-color: #900;
text-align: left;
}
div.wysiwyg-view h1
{
font-size: 2em; margin: .67em 0;
background-color: transparent !important;
color: #000 !important;
}
div.wysiwyg-view h2
{
font-size: 1.5em; margin: .75em 0;
background-color: transparent !important;
color: #000 !important;
}
div.wysiwyg-view h3
{
font-size: 1.17em; margin: .83em 0;
background-color: transparent !important;
color: #000 !important;
}
div.wysiwyg-view ol, ul, dir,
menu, dd { margin-left: 40px !important;}
div.wysiwyg-view ol { list-style-type: decimal !important; }
div.wysiwyg-view ol ul, ul ol,
ul ul, ol ol { margin-top: 0; margin-bottom: 0; }
div.wysiwyg-view blockquote { margin-left: 40px !important; margin-right: 40px !important;}
#watermark { position: fixed; bottom: 0px; right: 0px; width: 200px; height: 200px; opacity: .5; }
</style>
</head>
<body>
<div id="sf_admin_container">
<table width="100%">
<tbody>
<tr>
<td>
<img width="500" src="https://test-quote.expedient.com/images/expedient-logo-010313.png">
</td>
<td width="40%" style="border: 1px solid #000;vertical-align: top;padding: 0px;">
<div id="heading" style="font-size: 14pt;vertical-align: top;"> Quotation # 40414 </div>
<br>
<div style="left: 2px;position: relative;">
1050 Hull Street
<br>
Baltimore, MD 21230
<br>
Phone: 410-209-6700
<br>
www.datapointinc.com
<br>
<br>
Date: 03/14/13
</div>
</td>
</tr>
<tr>
<td colspan="2">
<table class="sf_admin_list" width="100%">
<tbody>
<tr>
<td id="heading" width="100%" colspan="6">
<b>Sample Quote</b>
</td>
</tr>
<tr>
<td id="heading-bold" width="40%">
<center> QUOTED FOR </center>
</td>
<td id="heading-bold" width="12%">
<center> SALES REP </center>
</td>
<td id="heading-bold" width="12%">
<center> SALES ENGINEER </center>
</td>
<td id="heading-bold" width="12%">
<center> CONTRACT TERM </center>
</td>
<td id="heading-bold" width="12%">
<center> TERMS </center>
</td>
<td id="heading-bold" width="12%">
<center> EST. DELIVERY </center>
</td>
</tr>
<tr>
<td>
<center> CeraTech (Kim Shumaker) </center>
</td>
<td>
<center> Geoffrey Maddock  </center>
</td>
<td>
<center> Brian Willis </center>
</td>
<td>
<center> 36 Months</center>
</td>
<td>
<center> Net 30</center>
</td>
<td>
<center> 3.00 weeks </center>
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<table class="sf_admin_list">
<tbody>
<tr>
<th style="width: 1em;">
<center>SKU</center>
</th>
<th style="width: 1em;">
<center>Type</center>
</th>
<th style="width: 1em;">
<center>Quantity</center>
</th>
<th>Name</th>
<th style="width: 4em;">
<center>Unit</center>
</th>
<th style="width: 4em;">
<center>One Time Costs</center>
</th>
<th style="width: 4em;">
<center>Monthly Recurring Cost</center>
</th>
</tr>
<tr>
<td id="topmenu" style="background-color: #ccc;text-align:center;" colspan="7">Cleveland (151)</td>
</tr>
<tr>
<td id="submenu" style="background-color: #ddd;text-align:center;" colspan="7">Managed Virtualization</td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance - Level 1</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396047">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396047">
<b></b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396047">
<b>0.00</b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396047" style="color:#333; text-indent: 10px;"> 1Ghz Peak, .5Ghz Average CPU; 1GB RAM</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance - Level 1</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396051">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396051">
<b></b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396051">
<b>0.00</b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396051" style="color:#333; text-indent: 10px;"> 1Ghz Peak, .5Ghz Average CPU; 1GB RAM</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 2 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance Level 1 - Installation</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396048">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396048">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396048">
<b> </b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396048" style="color:#333; text-indent: 10px;"> Per Virtual Instance. Setup and Configuration of Virtual Instance(2 Hours Maximum)</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 2 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance Level 1 - Installation</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396049">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396049">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396049">
<b> </b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396049" style="color:#333; text-indent: 10px;"> Per Virtual Instance. Setup and Configuration of Virtual Instance(2 Hours Maximum)</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 4 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance Level 2 - Installation</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396050">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396050">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396050">
<b> </b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396050" style="color:#333; text-indent: 10px;"> Per Virtual Instance. Setup and Configuration of Virtual Instance(2 Hours Maximum)</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 5 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance - Level 3</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396052">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396052">
<b></b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396052">
<b>0.00</b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396052" style="color:#333; text-indent: 10px;"> 3Ghz Peak, 1.5Ghz Average CPU; 3GB RAM</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr>
<td id="topmenu" style="background-color: #ccc;text-align:center;" colspan="7">Baltimore - 1050 Hull St.</td>
</tr>
<tr>
<td id="submenu" style="background-color: #ddd;text-align:center;" colspan="7">Managed Virtualization</td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 7 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance - Level 4</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396024">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396024">
<b></b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396024">
<b>0.00</b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396024" style="color:#333; text-indent: 10px;"> 4Ghz Peak, 2Ghz Average CPU; 4GB RAM (File)</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 8 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance Level 4 - Installation</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396025">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396025">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396025">
<b> </b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396025" style="color:#333; text-indent: 10px;"> Per Virtual Instance. Setup and Configuration of Virtual Instance(2 Hours Maximum)</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 396 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Enterprise Virtual Instance - Level 8</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396045">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396045">
<b></b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396045">
<b>0.00</b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396045" style="color:#333; text-indent: 10px;"> 8Ghz Peak, 4Ghz Average CPU; 8GB RAM</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr>
<td id="submenu" style="background-color: #ddd;text-align:center;" colspan="7">Shared Managed Firewall</td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 168 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Managed Firewall - Level 2</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396030">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396030">
<b></b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396030">
<b>0.00</b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396030" style="color:#333; text-indent: 10px;"> 3 Mbps Sustained Bandwidth, 2 VLAN's, Up to 20 Rules</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 169 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 1 </div>
</td>
<td>
<div>
<b>Managed Firewall - Level 2 - Setup and Configuration</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396018">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396018">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396018">
<b> </b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396018" style="color:#333; text-indent: 10px;"> Managed Firewall Configuration (2 hours maximum)</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr>
<td id="submenu" style="background-color: #ddd;text-align:center;" colspan="7">Colocation and Data Center Connectivity</td>
</tr>
<tr class="sf_admin_row_1">
<td width="25px">
<div style="text-align: center;"> 221 </div>
</td>
<td width="25px">
<div style="text-align: center;"> New </div>
</td>
<td width="25px">
<div style="text-align: center;"> 3 </div>
</td>
<td>
<div>
<b>Mbps Dedicated Internet Access to Colocation - Burstable</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_sale_unit_396020">
<b>0.00</b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_nrp_total_396020">
<b></b>
</div>
</td>
<td width="50px" style="text-align: right;">
<div id="lineitem_mrp_total_396020">
<b>0.00</b>
</div>
</td>
</tr>
<tr class="sf_admin_row_2">
<td width="25px"> </td>
<td width="25px"> </td>
<td width="25px"> </td>
<td>
<div id="lineitem_detail_396020" style="color:#333; text-indent: 10px;"> Sustained Internet Access burstable to 10Mbps ($150/Mbps)</div>
</td>
<td width="50px"> </td>
<td width="50px"> </td>
<td width="50px"> </td>
</tr>
<tr class="sf_admin_row_1">
<td colspan="4"></td>
<td width="50px">
<center>
<b>TOTAL</b>
</center>
</td>
<td id="heading-total" width="50px" style="text-align: right;">
<div id="lineitem_nrp_grand">$0.00</div>
</td>
<td id="heading-total" width="50px" style="text-align: right;">
<div id="lineitem_mrp_grand">$0.00</div>
</td>
</tr>
</tbody>
</table>
<div style="border: 1px solid #000;padding: 5px; margin-right: 3px; font-size: 8px;">
<div class="wysiwyg-view"> </div>
All product, service and pricing information is based on latest information available.
<br>
Subject to change without notice or obligation. Quote subject to, and not inclusive of, applicable shipping, handling and tax.
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:47:29.350

感谢 Brian S。他提到它在 0.6.0 beta 3 中对他有用，但不是最新的、未发布的代码。这让我仔细检查了一下，看起来我已经换了最新的代码来测试一些东西。恢复到那个发布版本，我得到了这个工作。

# javascript - 数据表的“select_none”按钮在多选模式下无法按预期工作

> ID：15419035
> 
> 赞同：0
> 
> 时间：2013-03-14T20:00:07.623
> 
> 标签：javascript, jquery, datatables

我正在使用来自[这里](http://www.datatables.net/)的 jquery 插件 Datatables 。

问题是它的行为不像它应该的那样。我在 TableTools 中有 2 个按钮，全选和全选，它们背后都有默认代码，我没有对它们进行任何更改。

我还使行多选。这是数据表声明的代码以及几乎所有重要的东西。

```
var oTable;
var gaiSelected =  [];
oTable = $('#listeLigne').dataTable({
                "sDom": 'T',
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "oLanguage": oLanguage,
                "bLengthChange": false,
                "iDisplayLength": -1,
                "oTableTools": {
                    "sSwfPath" : "<?= _s("js/DataTables-1.9.4/extras/TableTools/media/swf/copy_csv_xls_pdf.swf") ?>",
                    "aButtons": [
                        {
                            "sExtends":    "collection",
                            "sButtonText": "Sélection",
                            "aButtons": [ 
                                {
                                    "sExtends":    "select_all",
                                    "sButtonText": "Toutes"
                                },
                                {
                                    "sExtends":    "text",
                                    "sButtonText": "Actives"
                                },
                                {
                                    "sExtends":    "text",
                                    "sButtonText": "Inactives"
                                },
                                {
                                    "sExtends":    "text",
                                    "sButtonText": "Suspendues"
                                },
                                {
                                    "sExtends":    "select_none",
                                    "sButtonText": "Aucune"
                                }
                            ]
                        },
                        {
                            "sExtends":    "collection",
                            "sButtonText": "Sauvegarder",
                            "aButtons":    [ "csv", "xls", "pdf" ]
                        },
                        {
                            "sExtends":    "print",
                            "sButtonText": "Imprimer"
                        }
                    ]
                },
                "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                    if ( jQuery.inArray(aData[0], gaiSelected) != -1 )
                    {
                        $(nRow).addClass('row_selected');
                    }
                    return nRow;
                }
            });

$('#listeLigne tbody tr').live('click', function () {
                var aData = oTable.fnGetData( this );
                var iId = aData[0];

                if ( jQuery.inArray(iId, gaiSelected) == -1 )
                {
                    gaiSelected[gaiSelected.length++] = iId;
                }
                else
                {
                    gaiSelected = jQuery.grep(gaiSelected, function(value) {
                        return value != iId;
                    } );
                }

                $(this).toggleClass('DTTT_selected');
            } ); 
```

发生的情况是，如果我单击全选，它将全部选中，然后如果我单击全选，它会取消选择所有内容。但是，如果我单击其中一些并使它们被选中，然后按选择无，则没有任何反应。然后，如果我按全选然后全选，它确实有效。

我一直在查看数据表的内部代码，尝试了许多来自网络的不同解决方案（即使我没有看到很多人遇到同样的问题）。

索取您可能需要的任何其他信息。感谢您提供每一点信息和/或帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:46:24.870

最后，我为此替换了上面的代码：

```
oTable = $('#listeLigne').dataTable({
                "sDom": 'T',
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "oLanguage": oLanguage,
                "bLengthChange": false,
                "iDisplayLength": -1,
                "oTableTools": {
                    "sRowSelect": "multi",
                    "sSwfPath" : "<?= _s("js/DataTables-1.9.4/extras/TableTools/media/swf/copy_csv_xls_pdf.swf") ?>",
                    "aButtons": [
                        {
                                    "sExtends":    "select_none",
                                    "sButtonText": "Aucune"
                                },
                        {
                            "sExtends":    "collection",
                            "sButtonText": "Sélection",
                            "aButtons": [ 
                                {
                                    "sExtends":    "select_all",
                                    "sButtonText": "Toutes"
                                },
                                {
                                    "sExtends":    "text",
                                    "sButtonText": "Actives"
                                },
                                {
                                    "sExtends":    "text",
                                    "sButtonText": "Inactives"
                                },
                                {
                                    "sExtends":    "text",
                                    "sButtonText": "Suspendues"
                                },
                                {
                                    "sExtends":    "select_none",
                                    "sButtonText": "Aucune"
                                }
                            ]
                        },
                        {
                            "sExtends":    "collection",
                            "sButtonText": "Sauvegarder",
                            "aButtons":    [ "csv", "xls", "pdf" ]
                        },
                        {
                            "sExtends":    "print",
                            "sButtonText": "Imprimer"
                        }
                    ]
                }
            });

$('#listeLigne tbody tr').live('click', function () {
                var oTT = TableTools.fnGetInstance('listeLigne');
                oTT.fnSelect(this);
            } ); 
```

所以基本上，第一个是使用通过搜索谷歌“数据表选择行”找到的方法，它为您提供了标准的方法。但是，由于我使用的是 TableTools，所以它有所不同。在这种情况下，必须使用 TableTools 的 API。

请注意，.live 功能并不完整，因为它只会选择，但您明白我的意思。

DataTables 的文档非常完整，但有时很难找到东西，有时有时会过时。

# php - 在 PHP 中回显时添加指向图像的链接

> ID：15419040
> 
> 赞同：0
> 
> 时间：2013-03-14T20:00:24.553
> 
> 标签：php, mysql, post

在我的帖子表单中，我有一个“显示”页面，我在其中回显数据库中的所有内容。我正在尝试添加指向图像行的链接。但是当我刷新页面时，它只是白色的。

```
<?php
    $sql_connection = mysql_connect("localhost", "user", "root");

    mysql_select_db("database_name", $sql_connection);

    $result = mysql_query("SELECT * FROM content ORDER BY id DESC");

    while ($row = mysql_fetch_array($result)) {
        echo "<div>";
        echo "<a href="http://www.link.com"><img src=\"http://placehold.it/80x80\"></a> ";
        echo "<br />";
        echo "<br />";
        echo "<h3>" . $row["who"] . "</h3><br />";
        echo "<h4>" . $row["what"] . "</h4><br />";
        echo "<h4>" . $row["where"] . "</h4><br />";
        echo "<h3>" . $row["contact"] . "</h3><br />";
        echo "<img src=\"../img/share_facebook.png\"> ";
        echo "</div>";
    }
    mysql_close($sql_connection);
?> 
```

谁能解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:02:12.500

```
echo "<a href="http://www.link.com"><img src=\"http://placehold.it/80x80\"></a> "; 
```

您必须 escape() ALL 您的 " 或更改为：

```
echo '<a href="http://www.link.com"><img src="http://placehold.it/80x80"></a>'; 
```

# c# - 允许用户实现自己的方法。是否可以？

> ID：15419043
> 
> 赞同：2
> 
> 时间：2013-03-14T20:00:28.290
> 
> 标签：c#, wpf, code-injection

我不确定这是否可能，但我想问一下。我编写了一个从数据库表生成 c# 类的程序。允许用户编写自己的方法来满足他的需求格式将是非常好的，因为我定义的内容可能对某人来说是矫枉过正或矫枉过正。我意识到涉及很多变量，但这是次要的；我确信实现一个接口将是绕过一些潜在陷阱的可靠方法（我当然只是大声思考）

如果这是可能的，我应该从哪里开始学习我需要做什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:02:12.380

是的，您可以使用 CodeAccessSecurity 使其安全。然而这并不容易：

[http://www.codeproject.com/Articles/113169/C-As-A-Scripting-Language-In-Your-NET-Applications](http://www.codeproject.com/Articles/113169/C-As-A-Scripting-Language-In-Your-NET-Applications)

# html - CSS 2x3 网格布局问题

> ID：15419046
> 
> 赞同：0
> 
> 时间：2013-03-14T20:00:32.173
> 
> 标签：html, css

我正在尝试完成的 2x3 网格布局存在一些问题。[http://johns-webdesign.com/portfolioV2/](http://johns-webdesign.com/portfolioV2/)网格需要如下所示：

```
X | X | X
X | X | X 
```

如您所见，其中一个 div 似乎只是漂浮在网格布局下。如果不去 css 表，我只是不知道如何解决这个问题。

HTML

```
<div id="content">
    <div id="metro_left">
        <h1 style="color: #f7a70e">Here is some of my latest work</h1>
        <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
            <div class="image_caption"><a href="#">mX Fabrications</a></div>
        </div>

        <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
            <div class="image_caption"><a href="#">mX Fabrications</a></div>
        </div>

        <div class="content_spacer_down"></div>

        <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
            <div class="image_caption"><a href="#">mX Fabrications</a></div>
        </div>

        <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
            <div class="image_caption"><a href="#">mX Fabrications</a></div>
        </div>

        <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
            <div class="image_caption"><a href="#">mX Fabrications</a></div>
        </div>

        <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
            <div class="image_caption"><a href="#">mX Fabrications</a></div>
        </div>

    </div>

</div> 
```

CSS：

```
#content {
    width:1200px;
    height:580px;
}
#metro_left {
    padding:0;margin:0;float:left;
    width:800px;
    height:560px;
}
#latest_work_gallery {
    position:relative;
    float:left;
    width:250px;
    height:250px;
    margin:5px;
    border:1px solid #333;
    background-color: #f7a70e;
}
#latest_work_gallery:hover {
    margin:10px;
    -webkit-transform: scale(1.1); 
    -moz-transform: scale(1.1); 
    -ms-transform: scale(1.1); 
    -o-transform: scale(1.1); 
    transform: scale(1.1); 
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale')alpha(opacity = 100); /*For IE 8 and less */
}
.image_caption {
    clear:both;
    position: absolute;
    left:0px;
    bottom: 0;
    padding: 5px 15px;
    width:220px;
    font-size: 18px;
    line-height: 24px;
    background-color:#56FB39;
    opacity:0.8;
}
.image_caption a{color:#000;} 
```

我尝试切换花车，只是反映了这个问题。还试图清除左，右或两者。无砧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:04:39.683

删除：

```
<div class="content_spacer_down"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:07:02.060

你有两个 div，`.content_spaver_down`然后是 4 个 div。重新排列顺序。

```
 <div id="content">
        <div id="metro_left">
            <h1 style="color: #f7a70e">Here is some of my latest work</h1>
            <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
                <div class="image_caption"><a href="#">mX Fabrications</a></div>
            </div>

            <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
                <div class="image_caption"><a href="#">mX Fabrications</a></div>
            </div>

            <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
                <div class="image_caption"><a href="#">mX Fabrications</a></div>
            </div>

            <div class="content_spacer_down"></div>

            <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
                <div class="image_caption"><a href="#">mX Fabrications</a></div>
            </div>

            <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
                <div class="image_caption"><a href="#">mX Fabrications</a></div>
            </div>

            <div id="latest_work_gallery"><img src="images/current_work.jpg" width="250" height="250" />
                <div class="image_caption"><a href="#">mX Fabrications</a></div>
            </div>

        </div>

    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:07:07.110

您已经将前两个块放在了后面。由于它们向右浮动，因此缺少一个块。删除上面的div或者移动它，这样会出现在前三个div之后。

# iphone - 如何在移动 webkit 上删除图像周围的白色边框？

> ID：15419048
> 
> 赞同：3
> 
> 时间：2013-03-14T20:00:35.500
> 
> 标签：iphone, css, ipad, webkit, mobile-webkit

在桌面 Webkit 上，我的图像显示正常，没有任何问题。在移动 Webkit（例如 iPad iOS 5）上查看时，会出现明显的白色边框。我使用 background-image 和 background-size 是因为我的元素具有固定的比例，但图像源本身可以是任何随机比例。

**JSF中**：

[http://jsfiddle.net/tokyotech/A2zAv/](http://jsfiddle.net/tokyotech/A2zAv/)

**HTML：**

```
<img /> 
```

**CSS：**

```
body {
    background: #666; }

img {
    width: 8em;
    height: 8em;
    display: block;
    background: rgba(0,0,0,0.5);
    box-shadow: 0 1px 0 rgba(255,255,255,0.1),
        0 1px 0 rgba(0,0,0,0.5) inset;
    background-size: cover;    
    border-radius: 0.4em;
    background-image: url(http://1.bp.blogspot.com/_yhfaur8OkQ0/SwQzJkzYt5I/AAAAAAAAAtU/5eIqHFmS63s/s400/ev.jpg); 
} 
```

![在此处输入图像描述](../Images/be7c31975330d1eeb5e39ce73c711335.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:15:01.583

这是一个奇怪的问题，当您不指定`img src`. 浏览器想要显示元素存在但没有任何内容，所以它用边框包裹它。您可以通过在 HTML 中声明`img`' 源来解决此问题。

试试这个小提琴：http: [//jsfiddle.net/A2zAv/3/](http://jsfiddle.net/A2zAv/3/)

如果您不想声明 img src，请不要将 img 元素用于您的图像。您可以使用 div 来解决这个渲染问题。这将允许您根据`contain`需要将图像添加到容器中。

[http://jsfiddle.net/A2zAv/4/](http://jsfiddle.net/A2zAv/4/)

作为另一种选择，如果您绝对想使用`img`标签，您可以在图像的 src 中插入 1px x 1px 透明间隔 gif。

有关更多详细信息，请参阅[IMG 标签上的奇怪边框。](https://stackoverflow.com/questions/5743083/strange-border-on-img-tag)

# .htaccess - HTACCESS：重写一个uri请求[properties/a-zto myphp php文件

> ID：15419049
> 
> 赞同：1
> 
> 时间：2013-03-14T20:00:36.120
> 
> 标签：.htaccess, redirect, url-rewriting

我的目标是实现以下目标：

**我的查询：** `properties.php?id=1234-N-StreetName-etc`

**变成：**

```
properties/1234-N-Beverly-Blvd.html 
```

`properties.php`将根据 mysql 数据库评估`$id`(In this case ) 的值。`any-address.html`如果某个值不在数据库中，则文件 properties.php 会将用户重定向到 404 页面。 **$id 的值可以是**字母字符、破折号“-”或数字的任意组合。

我的代码不起作用：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php [nc]
RewriteRule ^properties/([a-zA-Z0-9_-]+)\.html$ properties.php?id=$1 
```

你能帮我获得正确的 htaccess 重写代码吗？

PS。我对.htaccess 一无所知。我从示例网站修改了此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:55:59.307

您将需要 L 标志将该规则标记为**Last**和 QSA 用于**Query String Append**。

在目录下的 .htaccess 中使用此代码`DOCUMENT_ROOT`：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^properties/([^.]+)\.html$ /properties.php?id=$1 [L,NC,QSA] 
```

### 要在子目录 sun 中应用此规则，请使用以下代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /sub

RewriteRule ^properties/([^.]+)\.html$ /sub/properties.php?id=$1 [L,NC,QSA]

# translate html -> php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^([^.]+)\.html$ /$1.php [L,NC] 
```

这将处理诸如 URI`/sub/properties/abc-123.html`并将其转发到`/sub/properties.php?id=abc-123`

# c# - 使用 MVVM 撤消/重做最佳实践

> ID：15419052
> 
> 赞同：3
> 
> 时间：2013-03-14T20:00:42.750
> 
> 标签：c#, mvvm, undo-redo

我基本上正在开发一个绘图编辑器，它允许您根据现有几何图形的关键点定义几何图形。然后，用户可以添加一些关于他们刚刚添加的东西的信息，例如名称、预期大小等。我用来完成它的 API 是很棒的[Reversible](http://www.codeproject.com/Articles/22502/Make-Your-Application-Reversible-to-Support-Undo-a) API，尽管我希望这个问题超出了 API 的范围我在用。

基本上有几个问题我想澄清一下：

1）如果您使用支持主/详细方式选择的应用程序支持撤消/重做，是否更改绘图对象的状态也会导致它被选中？示例是撤消操作更改了元素的名称，除非选择了该元素，否则该更改不会很明显。是否考虑过这样的标准行为？

2) 在处理某些类型的增量更改（拖动框，或使用数字微调器）时，将一组更改分组为单个用户交互（鼠标滑动或释放spinner button），但是在处理 MVVM 时，我目前只知道属性发生了变化，而不是变化的来源。这些类型的交互是否有一种标准方法可以在不完全分解模式的情况下传播到视图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:35:16.633

如有疑问，最好的方法是查看操作系统控件和平台上其他应用程序的典型行为，以便与用户熟悉的内容保持一致。特别是与最常用的应用程序的一致性。如果您检查其他应用程序如何处理 UI 问题，您通常可以学到很多东西，尤其是关于您在自己的设计中可能没有考虑到的微妙情况。

1) 通常，撤消倾向于选择已更改的项目，既可以突出显示更改的内容，也可以将用户的输入焦点移回上次编辑，以便他们可以继续。这对于文本等内容特别有效，因为如果您撤消/重做您键入的内容，您可能希望在刚刚撤消/重做的文本区域继续编辑。您对主/细节进行的主要选择是是仅选择主对象，还是选择更改的精确细节。

2）您的撤消管理器可以使用一些智能将类似的操作合并到一个撤消步骤中。例如，如果用户连续键入多个字符，它可能会注意到这些操作都是相似的，并将它们连接到单个撤消步骤中。只是如何做到这一点取决于您如何存储和处理撤消，但是对于体面的面向对象设计，这应该是一个容易添加的选项（即询问撤消记录本身是否可以合并，以便您可以轻松添加新类型的将来撤消记录）。请注意，在一个步骤中累积太多更改可能会非常烦人，因此您可能会发现一个动作 = 1 步骤的延迟实现实际上比试图过于聪明获得了更好的用户体验。我'

# ruby-on-rails - Rails - 如何使用表单上的隐藏字段来传递与在表单上创建的对象相关的对象的值？

> ID：15419055
> 
> 赞同：4
> 
> 时间：2013-03-14T20:00:51.067
> 
> 标签：ruby-on-rails, ruby

我正在尝试传递一个从`rfid_tag`一个创建一个的表单。设备。数据库中已经存在。 `device``hidden_field``has_many rfids``rfid`

以下是表单中的代码：

```
<th>RFID Tag #</th>
<td>
  <%= f.label(:@passed_rfid_tag, @passed_rfid_tag) %>
  <%= f.hidden_field :rfid_tag, :value => @passed_rfid_tag %>
</td>
</tr> 
```

以下是 devices_controller 的代码：

```
def create
   @cabinet = Cabinet.find(params[:device][:cabinet_id])
   @device = Device.create(params[:device])
   @device.rfids << Rfid.where('rfid_tag' => params[:rfid_tag]).first
   @device.row_id = @cabinet.row_id
   @device.save 
```

我收到以下错误，因为`rfid_tag`不是`device`. 它是 的一个属性`rfid`：

```
Can't mass-assign protected attributes: rfid_tag

app/controllers/devices_controller.rb:182:in `create' 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T20:17:30.153

发生质量分配错误是因为您`:rfid_tag`作为`params[:device]`属性哈希的一部分传递。

在您的示例代码中，`:rfid_tag`需要使用`hidden_field_tag`表单助手提供该字段。这将防止它被包含在`params[:device]`哈希中。

```
<tr>
  <th>RFID Tag #</th>
  <td>
    <%= label_tag 'rfid_tag', 'RFID Tag' %>
    <%= hidden_field_tag 'rfid_tag', @passed_rfid_tag %>
  </td>
</tr> 
```

然后，您可以通过 访问它`params[:rfid_tag]`。你的`create`方法应该仍然有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:34:24.793

按照 Dan Reedy 所说的去做，并在表单中使用 hidden_​​field_tag。

我担心控制器的 create 方法中的这一行：

```
@device.rfids << Rfid.where('rfid_tag' => params[:rfid_tag]).first 
```

如果您的 rfid 也有很多设备，那就太好了，这样您就有了多对多的关系。如果 rfid 标签只与一个设备一起使用，但您可能需要将其更改为：

```
rfid = Rfid.where('rfid_tag' => params[:rfid_tag]).first
rfid.device_id = @device.id
rfid.save! 
```

当然，一定要处理在数据库中找不到从 params 哈希获得的 cabinet_id 或 rfid_tag 的情况。永远不能指望用户提供的输入是有效的或对应于真实记录，即使它来自隐藏字段。

# javascript - 如何从多维数组中获取值并在javascript中进行比较？

> ID：15419060
> 
> 赞同：-1
> 
> 时间：2013-03-14T20:01:01.567
> 
> 标签：javascript, jquery, multidimensional-array

我遇到了一个问题，我不知道如何正确解决它。

我有多维数组，我想从该数组中获取某个值并将其放入新数组中。请参见下面的示例：

```
var myArr = [];
var extArr = [{ name:"john", id:1 }, { name: "bill", id: 2 }, ... , { name: "john", id: N }, ... ];

$.each(extArr, function(key, val){
    if (  ...  ) { // <-- I need a condition here to prevent "name" repetition
        myArr.push({ name: val.name, id: val.id });
    } else {
        // do nothing
    }
}); 
```

我需要找到防止将同名推入*myArr*的条件。例如，我不想在*myArr中有两个**johns*或多个*账单*。

 *我能想到的就是为 myArr 启动一个新的*$* *.each*循环，如下所示：

 *```
$.each(extArr, function(key, val){
    var checkcheck;
    $.each(myArr, function(key, name){
       if ( val.name == name.name ) {
           checkcheck = false;
       } else {
           checkcheck = true;
       }
    }
    if (  checkcheck == false  ) {
        myArr.push({ name: val.name, id: val.id });
    } else {
        // do nothing
    }
}); 
```

但我确信必须有一个更聪明的解决方案来解决这个问题。请帮我找到它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:02:30.773

您可以使用[$.inArray](http://api.jquery.com/jQuery.inArray/)来检查该值是否已经存在：

```
$.each(extArr, function(key, val){
    if ( $.inArray(val.name, myArr) == -1) 
         myArr.push(val.name);
}); 
```**

# java - 如何在 Libgdx 中管理具有多个屏幕的后退按钮？

> ID：15419062
> 
> 赞同：6
> 
> 时间：2013-03-14T20:01:06.163
> 
> 标签：java, libgdx, back

如果有什么方法可以管理 Libgdx 中的后退按钮？

例如在 Andengine 我已经实现了这样的：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {  
     if (keyCode == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_DOWN) {          
          switch (currentScene) {
               case SPLASH:
                   break;
               case MENU:
                   Process.killProcess(Process.myPid());
                   break;
               case WORLDMENU:
                       start(MENU);
                       break;
...
...
    }
  }
} 
```

我不知道如何在这里做，因为 ApplicationListener 只有创建、显示、渲染......我试过这个：

```
if (Gdx.input.isButtonPressed(Keys.BACK)){
    new ScreenChangeTask(MyScreen.SPLASH);
} 
```

但它仍然关闭我的应用程序。

仅供参考：我有`class Controller extends Game`并且我曾经`public void setScreen (Screen screen)`在屏幕之间切换。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T20:27:32.930

为了正确执行此操作，您需要告诉 LibGDX 捕捉后退键：

```
Gdx.input.setCatchBackKey(true); 
```

您应该在应用程序早期的某个地方执行此操作。当您希望用户能够使用返回键时，将其设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T10:09:49.593

放

```
Gdx.input.setCatchBackKey(true); 
```

然后在keyUp上实现以下代码...

```
 @Override
        public boolean keyUp(int keycode) {
            if (keyCode == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_DOWN) {          
              switch (currentScene) {
                   case SPLASH:
                       break;
                   case MENU:
                       Process.killProcess(Process.myPid());
                       break;
                   case WORLDMENU:
                           game.setScreen(new MenuScreen(game)); //MenuScreen is your class Screen
                           break;
            return false;
        }
    }
    } 
```

希望对你有帮助

# apache-flex - 在mx DataGrid中截断文本时如何在列中显示数据提示？

> ID：15419065
> 
> 赞同：1
> 
> 时间：2013-03-14T20:01:28.593
> 
> 标签：apache-flex, flex4, flex3, flex-spark

当文本在 mx DataGrid 中被截断时，有没有办法在单元格上显示工具提示？如果不在 mx DataGrid 中，我对 Spark 很感兴趣，但我必须转换，所以这是最后的手段。

**更新**
有一种方法有条件地显示提示。如果您创建一个 dataTipFunction 然后如果您返回 null 它不会显示工具提示。所以，理论上我可以得到文本的长度，看看它是否超过一定数量，如果它返回文本，如果不是这将不准确，因为如果文本包含 5 个“i”字符它会比 5 个“m”字符短得多，如下面的文字所示：

iiiiii
嗯嗯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T18:16:50.613

如果您对火花解决方案感兴趣，这是我的示例。使用火花标签“showTruncationTip”的神奇属性。

![在此处输入图像描述](../Images/867897ade488937592d1ce18f92a580a.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]private var collection:ArrayCollection = new ArrayCollection([
            {field01:"field01", content:"your content", field02:"field02"},
            {field01:"field01", content:"your content your content your content your content", field02:"field02"},
            {field01:"field01", content:"your content your content your content your content", field02:"field02"}
        ]);
    ]]>
</fx:Script>

<s:DataGrid
    x="10" y="10"
    width="320" height="120" 
    dataProvider="{collection}">

    <s:columns>
        <s:ArrayList>   
            <s:GridColumn dataField="field01" headerText="Field 1"/>
            <s:GridColumn dataField="content" headerText="Content" width="120">
                <s:itemRenderer>
                    <fx:Component>
                        <s:GridItemRenderer>
                            <s:HGroup width="100%" height="100%" verticalAlign="middle" paddingLeft="8">
                                <s:Label text="{data.content}" width="100%" maxDisplayedLines="1" showTruncationTip="true"/>
                            </s:HGroup>
                        </s:GridItemRenderer>
                    </fx:Component>
                </s:itemRenderer>
            </s:GridColumn>
            <s:GridColumn dataField="field02" headerText="Field 2" width="100"/>
        </s:ArrayList>                  
    </s:columns>                
</s:DataGrid>
</s:Application> 
```

# knockout.js - 通过 Knockout,js foreach 绑定中的属性访问复杂类型

> ID：15419067
> 
> 赞同：0
> 
> 时间：2013-03-14T20:01:49.980
> 
> 标签：knockout.js

我无法理解我应该如何使用给定数组的项目的属性。

下面是我得到的 JSON 响应示例：

```
[{
"Id":"3bddaa55-5cae-4d9d-8c2f-3cff9a853aa0",
"ServiceRequestId":"00000000-0000-0000-0000-000000000000",
"AuthorizationRequestId":"48c73685-ee1e-4eea-8bf0-74320d37c80c",
"Quantity":0,
"TreatmentStartDate":null,
"Dosage":{"Id":"cbdbed9e-4c80-4f5a-8a4b-8185c24e45a0",
          "Value":13.4,
          "Unit":"Spiel mit mehr"},
"Medication":{"IsAutoApproveWhiteList":null,
              "IsPartB":null,"Id":"b0f0e31c-3467-4d73-9dd5-e806a20223a3",
              "Name":"Pills of Awesomeness",
              "Code":"J1100",
              "BrandName":"Awesome Pills",
              "GenericName":"Awesome",
              "UnitOfMeasure":"Pounds",
"Dosages":[{"Id":"dd6e7cfb-252c-46c1-815f-832f9501e9ce",
            "Value":100,
            "Unit":"Fart"},
            {"Id":"4dc88918-c359-41fd-9eb8-50699ba627fd",
             "Value":75.6,
             "Unit":"Ride wit me."}],
            "MedicationType":725060001,
            "AllowedDiagnoses":null},
"DirectionsForUse":{"Id":"9faba6ed-5a67-4b45-bedb-a49191274cc7",
                    "Name":"Do not eat sand",
                    "IsValidAsLoadingDose":false},
"Refills":0,
"RequiredRegimenMedicationId":null,
"OptionalRegimenMedicationId":null,
"NonRegimenMedicationId":null,
"RequiredRegimenMedicationDosingId":null,
"OptionalRegimenMedicationDosingId":null,
"NonRegimenMedicationDosingId":null,
"DoseType":725060000,
"TypeOfMedication":0,
"MedicationType":0,
"Bsa":null,
"MaximumDosage":null,
"MaximumDosageFormulaId":null,
"NotAutoApprovedReason":0}] 
```

接下来是我要设置的代码：

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Dose</th>
            <th>Directions For Use</th>
            <th>Treatment Start Date</th>
            <th>Qty</th>
            <th>Refills</th>
            <th>Purchase Type</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: ServiceItems">
        <tr>
            <td><span data-bind="text: $root.Medication.DisplayName"></span></td>
            <td><span data-bind=""></span></td>
            <td><span data-bind=""></span></td>
            <td><span data-bind=""></span></td>
            <td><span data-bind="text: Quantity"></span></td>
            <td><span data-bind="text: Refills"></span></td>
            <td><span data-bind=""></span></td>
        </tr>
    </tbody>
</table>

@section Scripts
{
    <script type="text/javascript">

        function ServiceItem(data) {
            var self = this;

            self.TreatmentStartDate = ko.observable(data.TreatmentStartDate);
            self.ServiceRequestId = data.ServiceRequestId;
            self.DoseType = ko.observable(data.DoseType);
            self.Medication = ko.observable(data.Medication);
            self.Dosage = ko.observable(data.Dosage);
            self.DirectionForUse = ko.observable(data.DirectionForUse);
            self.RequiredRegimenMedicationId = ko.observable(data.RequiredRegimenMedicationId);
            self.RequiredRegimenMedicationDosingId = ko.observable(data.RequiredRegimenMedicationDosingId);
            self.OptionalRegimenMedicationId = ko.observable(data.OptionalRegimenMedicationId);
            self.OptionalRegimenMedicationDosingId = ko.observable(data.OptionalRegimenMedicationDosingId);
            self.NonRegimenMedicationId = ko.observable(data.NonRegimenMedicationId);
            self.NonRegimenMedicationDosingId = ko.observable(data.NonRegimenMedicationDosingId);
            self.Quantity = ko.observable(data.Quantity);
            self.Refills = ko.observable(data.Refills);
        }

        function Medication(data) {
            var self = this;

            self.Name = data.Name;
            self.Code = data.Code;
            self.BrandName = data.BrandName;
            self.GenericName = data.GenericName;
            self.UnitOrMeasure = data.UnitOrMeasure;
            self.Dosages = data.Dosages;
            self.MedicationTypes = data.MedicationTypes;
            self.AllowedDiagnoses = data.AllowedDiagnoses;

            self.DisplayName = ko.computed(function () {
                if (self.Name != null && self.Name != "") {
                    return self.Name;
                } else {
                    return self.BrandName;
                }
            });
        }

        function Dosage(data) {
            var self = this;

            self.Id = data.Id;
            self.Value = data.Value;
            self.unit = data.Unit;
        }

        function DirectionForUse(data) {
            var self = this;

            self.Id = data.Id;
            self.Name = data.Name;
            self.IsValidAsLoadingDose = data.IsValidAsLoadingDose;
        }

        function ServiceItemsViewModel() {
            var self = this;

            self.ServiceItems = ko.observableArray();

            //Operations
            self.add = function(item) {
                self.ServiceItems.add(item);
            };

            self.remove = function(item) {
                self.ServiceItems.remove(item);
            };
        }

        var viewModel = new ServiceItemsViewModel();

        $.getJSON('/Mapping/GetServiceItems', function (data) {
            ko.mapping.fromJS(data, {}, viewModel.ServiceItems);
        });

        ko.applyBindings(viewModel);

    </script>
} 
```

我希望在第一列中在 foreach 绑定运行期间触发 Medication 计算方法。我没有正确调用的线路是：

```
<td><span data-bind="text: $root.Medication.DisplayName"></span></td> 
```

我在 FireBugs 控制台中收到的错误消息是：

> 错误：无法解析绑定。消息：TypeError：$root.Medication 未定义；绑定值：文本：$root.Medication.DisplayName

如何传播到 Medication 属性并正确触发该方法？

谢谢！

## 编辑：

```
<td><span data-bind="text: $root.Medication.DisplayName"></span></td> 
```

改成：

```
<td data-bind="text: Medication.DisplayName"></td> 
```

我还在函数内部添加了一个警报，它不会触发。

```
function Medication(data) {
        var self = this;

        self.Name = data.Name;
        self.Code = data.Code;
        self.BrandName = data.BrandName;
        self.GenericName = data.GenericName;
        self.UnitOrMeasure = data.UnitOrMeasure;
        self.Dosages = data.Dosages;
        self.MedicationTypes = data.MedicationTypes;
        self.AllowedDiagnoses = data.AllowedDiagnoses;

        self.DisplayName = ko.computed(function () {
            alert('Explode Please');
            if (self.Name != null && self.Name != "") {
                return self.Name;
            } else {
                return self.BrandName;
            }
        });
    } 
```

当前结果不会产生错误，此表结果：

![上述编辑更改的结果](../Images/025366ac64e989453e226065c9686f94.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:30:33.447

`$root`将绑定的上下文更改为`foreach`页面视图模型：`ServiceItemsViewModel`。默认情况下，里面的上下文`foreach`是`ServiceItem`. 因为`ServiceItem`是上下文并且它是包含的视图模型`Medication`，所以正确的绑定`span`是：`<span data-bind="text: Medication.DisplayName"></span>`

[http://knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)

您还需要修复此行： `self.Medication = ko.observable(data.Medication);` 应该是：`self.Medication = ko.observable(new Medication(data.Medication));`

我怀疑它甚至需要成为可观察的，但如果不知道页面的其余行为，我无法确定。

**绑定建议** 我会`<td>`像这样直接绑定： `<td data-bind="text: Medication.DisplayName"/>`

[http://jsfiddle.net/5emCS/1/](http://jsfiddle.net/5emCS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:07:26.577

没关系，我想出了自己的问题。我正在使用 $root 下降到我的项目链中。谢谢

# jython - OpenRefine 使用 jython 从列表中删除重复项

> ID：15419080
> 
> 赞同：1
> 
> 时间：2013-03-14T20:02:31.800
> 
> 标签：jython, openrefine

我有一列包含重复的值，例如

```
VMS5796,VMS5650,VMS5650,CSL,VMA5216,CSL,VMA5113 
```

我正在使用删除重复项的 jython 应用转换（错误设置为保持原始），这是代码：

```
return list(set(value.split(","))) 
```

哪个在预览中有效，但未应用于该列。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:45:50.073

Map 函数非常强大，在 Python/Jython 中是一个未被充分利用的函数。可能不清楚这段代码在内部做了什么，但它在处理列单元格值中的列表或数组中的数百万位值时非常快，这些值需要“映射”为字符串类型，然后应用连接分隔符，例如逗号 ', '

```
deduped_list = list(set(value.split(",")))
return ', '.join(map(str, deduped_list)) 
```

可能还有其他甚至比这更快的变化，但这应该会让你朝着正确的方向前进。

有趣的是，您还可以获得“可打印表示”repr(object)，它可以被 OpenRefine 等 EVAL 接受，并且对于查看您的值的表示也很有用......，我刚刚发现，研究这个答案更深入地为您服务。

```
deduped_list = list(set(value.split(",")))
return ', '.join(map(repr, deduped_list)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:36:43.413

预览隐式地格式化显示的东西。您的表达式返回一个数组（不能存储在单元格中），因此如果您想获得它的字符串形式，请在末尾添加一个 .join(',') 。

# ajax - 下拉日期菜单

> ID：15419085
> 
> 赞同：1
> 
> 时间：2013-03-14T20:02:44.940
> 
> 标签：ajax, date, drop-down-menu

当谈到 JavaScript 和 Ajax 时，我一无所知。你们都可以给我一个简单的教程网站吗？

我要完成的算法相当简单。我有三个下拉菜单可以输入日期。用户选择一年，然后选择一个月，然后，基于之前的两个选择，选择一个日期。因此，如果用户选择 2012 年 2 月，日期列表将显示 29 天。如果他想查看 2013 年 2 月，日期列表将显示 28 天。或者再过一个月，显示 30 或 31 天。我需要什么样的功能来完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:07:55.870

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <form name="myform">
        <fieldset><legend>Selection Date</legend><label for="year">Year: </label>
            <select name="year" id="year" size="1">
                <option value=" " selected="selected"></option>
                <option value="2000">2000</option>
                <option value="2001">2001</option>
                <option value="2002">2002</option>
            </select>
            <label for="month">Month: </label>
            <select name="month" id="month" size="1">
                <option value=" " selected="selected"></option>
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>
            <label for="day">Day: </label>
            <select name="day" id="day" size="1">
                <option value=" " selected="selected"></option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
            </select>
        </fieldset>
    </form>
    <script type="text/javascript">
        function daysInMonth(month, year) {
            var days = new Date(year, month, 0);
            return days.getDate();
        }
        function setDayDrop(dyear, dmonth, dday) {
            var year = dyear.options[dyear.selectedIndex].value;
            var month = dmonth.options[dmonth.selectedIndex].value;
            var day = dday.options[dday.selectedIndex].value;
            if (day == ' ') {
                var days = (year == ' ' || month == ' ') ? 31 : daysInMonth(month, year);
                dday.options.length = 0;
                dday.options[dday.options.length] = new Option(' ', ' ');
                for (var i = 1; i <= days; i++)
                    dday.options[dday.options.length] = new Option(i, i);
            }
        }
        function setDay() {
            var year = document.getElementById('year');
            var month = document.getElementById('month');
            var day = document.getElementById('day');
            setDayDrop(year, month, day);
        }
        document.getElementById('year').onchange = setDay;
        document.getElementById('month').onchange = setDay;
    </script>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:07:58.770

感谢您的快速回复。我在将日历放入表单的 www 上找到了这个：

[任何时候](http://www.ama3.com/anytime/)

# objective-c - 返回位于本地堆栈上的块

> ID：15419086
> 
> 赞同：3
> 
> 时间：2013-03-14T20:02:46.187
> 
> 标签：objective-c, objective-c-blocks

clang 分析器可以检查返回的基于堆栈的内存。

```
dispatch_block_t getPrintBlock (const char *msg) {
    return ^{
        printf("%s", msg);
    };
} 
```

引发此错误：`returning block that lives on the local stack`

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:38:51.927

该错误意味着您返回的值在方法返回后将无效。这不仅仅是块的问题，请考虑：

```
- (int *) badMethod
{
   int aLocalIntVariable;

   return &aLocalIntVariable; // return a reference to aLocalIntVariable, but that variable is about to die...
} 
```

局部变量是在输入方法时创建的，它们所在的地方称为“堆栈”。当一个方法返回时，这些局部变量被销毁。你可以在这样的变量中返回一个*值*，但你不能返回对变量本身的*引用*——它将是无效的。您可以将对局部变量的引用传递给您调用的方法，因为在这种情况下您的局部变量仍然存在。

在您的情况下，您已经创建了一个块。Objective-C 碰巧在堆栈上创建块值，即有效地在匿名局部变量中，并使用引用来引用它们。您可以将这样的引用传递给您调用的方法，但不能返回它——匿名局部变量就像其他任何变量一样被销毁。

然而，Objective-C 为您提供了两种方法来创建块值的副本作为对象，它存在于“堆”上，并且比它的创建者更长寿。首先是`Block_copy`which 是一个函数：

```
<reference to heap allocated block> = Block_copy(<reference to stack allocated block>); 
```

这是执行此操作的原始方式，并且每个都支持 - 包括在纯 C 代码中，块是 C 的一部分，而不仅仅是 Objective-C。第二种方式*假装*块已经是一个对象并允许您发送标准`copy`消息：

```
<reference to heap allocated block> = [<reference to stack allocated block> copy]; 
```

如果您主要是 Objective-C 人，那么第二种方法可能感觉更舒服，但确实模糊了为什么首先需要它的问题。

ARC 在这里有所帮助，在自动化内存管理方面，它会自动将块从堆栈复制到堆中（至少在当前的编译器中，它在早期的编译器中可能无法正常工作），因此程序员可以忽略真正的实现细节。

**附录：ARC**

*上面的最后一段是由@newacct 查询的，结果是长长的问答评论交流。为了使信息更容易理解，我们都删除了我们的评论，我将这里的信息合并为附录。*

在了解 ARC 如何处理块时，有两个文档很有用：

1.  [Objective-C 自动引用计数](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)，特别是第 3 节（块是可保留对象指针）、3.2.3（可保留对象类型在返回边界上有效）和 7.5（块被复制时的规则）。
2.  [过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，特别是常见问题解答项目“块如何在 ARC 中工作？”

从这些可以确定，*大部分时间*ARC 将处理从堆栈到堆的所有块复制，作为其所有对象类型管理的一部分。

第二个参考文献强调了一种情况，即至少在编写文档时没有自动处理。这种情况是堆栈分配的块被传递给类型的方法参数`id`，例如：

```
- (void) takeBlockWithTypeLoss:(id)block { ... }

[obj takeBlockWithTypeLoss:^{ ... }]; 
```

在这种情况下，在编写文档时，ARC 没有复制该块。如果被调用的方法然后执行保留传递的块的操作，则会出现问题，因为保留值不在堆上。（*请注意，该块需要堆栈分配才能发生问题。在其环境中不引用变量的文字块是静态分配的，也是一个文字块，它首先存储在具有默认强所有权的局部变量中，然后传递给该方法将被复制。*）

这种情况是类型丢失的示例，已知是块类型的值作为`id`丢失类型信息传递。编译器总是可以确定这些点，那么为什么（或做过..）ARC 不复制该块？过去给出的答案只是效率之一，*可能*不需要副本，并且大量不需要的副本会影响性能。

*然而*，当前的编译器（Xcode 4.6.1）*似乎*可以处理剩下的这种情况，在类型丢失时，一个块被复制到堆中。如果有人可以证明这已记录在案（或者您确信您的编译器会处理这种情况，例如通过编写检查代码），那么它会出现`Block_copy()`（或`[block copy]`）可以归入历史记录，如果没有，那么当发生类型丢失时应该使用它。

**附录：2013 年 6 月**

正如[这个问题](https://stackoverflow.com/questions/17000926/some-questions-about-objective-c-block-and-copy)所揭示的，有一种情况是 Xcode 4.6.3/Clang 4.2**无法**处理的。当一个块作为变量参数之一传递给可变参数方法时，编译器不会自动将堆栈块提升到堆。这是上面提到的类型损失的一个子情况。

因此，存在当前编译器无法处理的情况，这表明编译器支持超过规范的原因是未记录的 - 支持不完整（尽管这些不是理论上的理由）。

所以和以前一样，如果存在类型丢失，那么编译器可能不会自动处理块提升（但如果需要，可以对其进行测试），不涉及类型丢失的情况会根据规范自动处理。

（顺便说一句。在对上述问题的评论中提到的[旧问题](https://stackoverflow.com/questions/6147940/blocks-and-stack)现在是规范涵盖的情况之一，并由编译器正确处理。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T20:04:42.653

您需要复制块以将其移动到堆中。

即类似的东西：

```
dispatch_block_t createPrintBlock (const char *msg) {
    return Block_copy(^{
        printf("%s", msg);
    }) ;
} 
```

# ruby-on-rails - 3rd 方 api 是否需要存根/模拟

> ID：15419092
> 
> 赞同：0
> 
> 时间：2013-03-14T20:02:57.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, controller, rspec2

我的控制器中有一个连接到第三方 api 并执行一些工作的操作。如果代码成功，则保存我的用户。如果第三方 api 失败，则不会保存用户。

```
def create
  if ThirdPartyApp.connect.eql? true
    User.create(params[:user])
  else
    redirect home_path
  end
end 
```

我想测试`User.create`代码而不必担心第三方应用程序代码。我知道存根和模拟，并理解一个测试实例方法和另一个类方法的区别。我不确定如何在我的 rspec 测试中使用它，因为在第三方应用程序运行所需的测试中无法满足某些条件。关于如何使用存根、模拟或其他方法编写此测试的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:59:51.977

这里有几个解决方案：

首先，您可以使用 VCR 之类的工具（Ryan Bates 对此有[很好的截屏视频](http://railscasts.com/episodes/291-testing-with-vcr)！）这样，您第一次运行测试时会记录来自 API 的响应，以便从第二次开始它只是“重播” '录音'使用他们的术语。

在如此依赖 API 响应的请求上使用存根/模拟可能很困难。如果是我（我猜你是如何测试这个控制器动作的）

```
it "creates user" do
  ThirdPartyApp.any_instance.stub(:connect) { true }
  # fill in form or submit params as required
  User.count.should == 1 # or some other assertion
end 
```

然后你可以测试失败是：

```
it "fails from the api" do
  ThirdPartyApp.any_instance.stub(:connect) { false }
  # fill in form or submit params as required
  current_path.should == '/whatever' # or some other assertion
end 
```

其他人可能会提出不同的解决方案，如果在这种情况下我可以选择，我会选择 VCR。

# php - 从命名空间调用 php 函数

> ID：15419094
> 
> 赞同：1
> 
> 时间：2013-03-14T20:03:03.460
> 
> 标签：php, namespaces, global-namespace

从我无法理解的命名空间调用一些 php 函数时，我似乎发现了一个错误：

```
<?php
namespace test;
$var = "foo/bar";
echo 'let\'s call \strpos($var, \'o\'):', \strpos($var, 'o');
try{
 echo '<br />let\'s call \unset($var):';
 \unset($var);  //error!
 unset($var);  //correct!
 echo '<br />let\'s call \isset($var):';
 \isset($var);  //error!
 isset($var);  //correct!
}catch(\Exception $e){
 echo 'We have error:', $e->getMessage();
}
?> 
```

Php 说：**`Parse error: syntax error, unexpected T_UNSET, expecting T_STRING in global_namespace.php on line 7`** 甚至不起作用，并且`try...catch`仅针对全局函数`isset()`和`unset()`！

我喜欢它很奇怪，至少！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:07:34.157

`isset`并且`unset`不是*函数*，它们是*语言结构*。这意味着它们更接近于运算符 like`+`和而`=`不是函数，因此不遵循相同的规则。只有一个`unset`，如果您愿意，您无法将其重新定义为函数。

此外，错误也不例外。你不能`catch`出错，因为它不是`throw`n。对于语法/解析器错误更是如此，它们甚至发生在任何代码执行之前。

# ruby-on-rails - reset_counters 在现有项目和新项目上失败

> ID：15419098
> 
> 赞同：1
> 
> 时间：2013-03-14T20:03:25.510
> 
> 标签：ruby-on-rails

好的..我希望我在做一些愚蠢的事情（通常是这种情况）。我一直在嗡嗡作响，将缓存计数器添加到我现有的项目中，当所有突然的 reset_counters 几乎所有事情都失败时。当一切正常时，我检查了一个旧副本，但它仍然失败，所以我开始了一个全新的演示项目。

我认为这是我的错误，因为它突然停止工作......而且我没有看到其他人有类似的问题。我正在使用 ruby​​ 1.9.3-p392 和 rails 3.2.12。

柜台本身既适用于现有项目，也适用于新项目。你只是不能使用reset_counters。

所以这是一个全新项目的问题：

```
class Post < ActiveRecord::Base
  attr_accessible :name
  has_many :comments
end

class Comment < ActiveRecord::Base
  attr_accessible :name
  belongs_to :post, :counter_cache => true
end 
```

在这里我们可以看到计数器的增量：

```
irb(main):073:0* post = Post.create(:name => 'i am a post')
   (0.3ms)  BEGIN
  SQL (0.4ms)  INSERT INTO `posts` (`comments_count`, `created_at`, `name`, `updated_at`) VALUES (0, '2013-03-14 19:56:53', 'i am a post', '2013-03-14 19:56:53')
   (0.5ms)  COMMIT
=> #<Post id: 3, name: "i am a post", created_at: "2013-03-14 19:56:53", updated_at: "2013-03-14 19:56:53", comments_count: 0>
irb(main):074:0> post.comments << Comment.new(:name => 'i am a comment')
   (0.2ms)  BEGIN
  SQL (0.3ms)  INSERT INTO `comments` (`created_at`, `name`, `post_id`, `updated_at`) VALUES ('2013-03-14 19:57:18', 'i am a comment', 3, '2013-03-14 19:57:18')
  Post Load (0.3ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 3 LIMIT 1
  SQL (0.3ms)  UPDATE `posts` SET `comments_count` = COALESCE(`comments_count`, 0) + 1 WHERE `posts`.`id` = 3
   (0.4ms)  COMMIT
  Comment Load (0.2ms)  SELECT `comments`.* FROM `comments` WHERE `comments`.`post_id` = 3
=> [#<Comment id: 3, name: "i am a comment", post_id: 3, created_at: "2013-03-14 19:57:18", updated_at: "2013-03-14 19:57:18">]
irb(main):075:0> post = Post.find(3)
  Post Load (0.5ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 3 LIMIT 1
=> #<Post id: 3, name: "i am a post", created_at: "2013-03-14 19:56:53", updated_at: "2013-03-14 19:56:53", comments_count: 1> 
```

运行我得到的代码：

```
irb(main):001:0> Post.reset_counters(1,:comments_count)
  Post Load (0.5ms)  SELECT `posts`.* FROM `posts` WHERE `posts`.`id` = 1 LIMIT 1
NoMethodError: undefined method `options' for nil:NilClass
    from /Users/charles/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/counter_cache.rb:22:in `block in reset_counters'
    from /Users/charles/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/counter_cache.rb:19:in `each'
    from /Users/charles/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/counter_cache.rb:19:in `reset_counters'
    from (irb):1
    from /Users/charles/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
    from /Users/charles/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
    from /Users/charles/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:41:33.723

你几乎完全正确。尽管中的参数`reset_counters`应该是对象名称，而不是列名称。因此，在您的情况下，您想要：

```
1.9.3-p392 :005 > Post.reset_counters(1, :comments)
  Post Load (0.3ms)  SELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", 1]]
   (0.1ms)  SELECT COUNT(*) FROM "comments" WHERE "comments"."post_id" = 1
   (2.3ms)  UPDATE "posts" SET "comments_count" = 1 WHERE "posts"."id" = 1
 => true 
```

# list - xtext 逗号分隔变量声明

> ID：15419099
> 
> 赞同：4
> 
> 时间：2013-03-14T20:03:26.080
> 
> 标签：list, variables, definition, xtext

我尝试根据以下语法定义一些 XText 来指定变量

```
variables
  MyVar1 : Bool at 0x020 value=true;
  MyVar2, MyVar3 : Int at 0x030 value 200;
end-variables 
```

所以每个定义在语法上都是

```
VarName ["," VarName]* ":" Type ["at" HEX]? ["value" VALUE]? ";" 
```

所有变量都可以通过引用来访问，大纲中的结果应该是这样的：

```
variables
+-MyVar1 : Bool
+-MyVar2 : Int
+-MyVar3 : Int 
```

**编辑：** 按照这里的要求，我的实际语法，相当于上面几行的语法定义。

```
Variable:
  name=ID
;
Declaration_Var:
  'variables'
  vars+=Declaration_Var_Body+
  'end-variables' ';'
;
Declaration_Var_Body:
  varDecl+=Variable(',' varDecl +=Variable)*
  ':' type=[TR_Any]
  ('at' address=HEX)?
;
TR_Any:
  ...
;
terminal HEX:
  ...
; 
```

有了这个，下面的字符序列

```
variables
  Test1, Test2, Test3 : DWORD at 0x20;
end_var; 
```

结果是这样的大纲：

```
<unnamed>
+-- 0x20
|   +-- Test1
|   +-- Test2
|   +-- Test3 
```

这几乎与我的预期相反。我所期望的和我想在大纲中生成的内容与此类似（数据类型和地址不得显示在那里，但至少它们必须可以作为变量声明的生成类的属性进行访问）

```
Test1
+-- DWORD
+-- 0x20
Test2
+-- DWORD
+-- 0x20
Test3
+-- DWORD
+-- 0x20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:29:27.613

在此处查看涵盖您案例的截屏视频：http: [//xtextcasts.org/episodes/18-model-optimization](http://xtextcasts.org/episodes/18-model-optimization)

您需要修改模型和元模型。要修改元模型，您需要定义一个后处理器。以下后处理器将`type`属性目录添加到`Variable`类中。

有关详细信息，请参阅：[http ://christiandietrich.wordpress.com/tag/postprocessor/](http://christiandietrich.wordpress.com/tag/postprocessor/)

```
class MyXtext2EcorePostProcessor implements IXtext2EcorePostProcessor {
  override process(GeneratedMetamodel metamodel) {
    metamodel.EPackage.process
  }

  def process(EPackage p) {
    for (clazz : p.EClassifiers.filter(typeof(EClass))) {
      if (clazz.name == typeof(Variable).simpleName) {
        val typeAttribute = EcoreFactory::eINSTANCE.createEAttribute
        typeAttribute.name = "type"
        typeAttribute.EType = EcorePackage::eINSTANCE.EString
        clazz.EStructuralFeatures += typeAttribute
      }
    }
  }
} 
```

然后你必须像这样绑定它`Generator`：

```
public class ExtendedGenerator extends Generator {
  public ExtendedGenerator() {
    new XtextStandaloneSetup() {
      @Override
      public Injector createInjector() {
        return Guice.createInjector(new XtextRuntimeModule() {
          @Override
          public Class<? extends IXtext2EcorePostProcessor>
                                 bindIXtext2EcorePostProcessor() {
            return MyXtext2EcorePostProcessor.class;
          }
        });
      }
    }.createInjectorAndDoEMFRegistration();
  }
} 
```

最后`ExtendedGenerator`在你的 mwe2-workflow 中使用新的：

```
... 
Workflow {
  ...
  bean = StandaloneSetup {
    ...
    component = postprocessor.ExtendedGenerator { // Set ExtendedGenerator!
      ...
    }
    ...
  }
  ...
}
... 
```

然后你必须`type`用数据填充你的新属性。您可以实现`IDerivedStateComputer`接口。

```
class MyDerivedStateComputer implements IDerivedStateComputer {

  override discardDerivedState(DerivedStateAwareResource resource) {
    resource.allContents.filter(typeof(VariableDefinition)).forEach [
      type = null
    ]
  }

  override installDerivedState(DerivedStateAwareResource resource,
                               boolean preLinkingPhase) {
    resource.allContents.filter(typeof(VariableDefinition)).forEach [
      type = (eContainer as DefinitionBlock).type
    ]
  }
} 
```

然后你必须像这样绑定它（第二个和第三个绑定方法只对非 Xbase 项目是必需的）

```
public class MyDslRuntimeModule extends AbstractMyDslRuntimeModule {
  public Class<? extends IDerivedStateComputer> bindIDerivedStateComputer() {
    return MyDerivedStateComputer.class;
  }

  // Not needed for Xbase-projects
  @Override
  public Class<? extends XtextResource> bindXtextResource() {
    return DerivedStateAwareResource.class;
  }

  // Not needed for Xbase-projects
  public Class<? extends IResourceDescription.Manager>
                         bindIResourceDescriptionManager() {
    return DerivedStateAwareResourceDescriptionManager.class;
  }
} 
```

您可以走得更远，动态重组模型以满足您的需求。请在此处发布您的解决方案作为单独的答案，以防您走得太远。

# asp.net-mvc - 如何将自定义验证添加到 Razor 页面？

> ID：15419101
> 
> 赞同：6
> 
> 时间：2013-03-14T20:03:35.050
> 
> 标签：asp.net-mvc, razor

我第一次使用 MVC 4。我的业务逻辑有点复杂，但我想这并不罕见。我有可以在特定范围内调整大小的项目。范围取决于项目。

```
public class MyItem
{
    public double Width { get; set; }

    public double MinWidth { get; set; }

    public double MaxWidth { get; set; }
} 
```

`CustomWidth`当由用户设置时，必须`MinWidth`包含`MaxWidth`在内。这似乎是一个普遍的问题。我已经尝试过该`CustomValidation`属性，但它仅在我尝试将实体保存到我的数据库时验证（使用实体框架）。

这是我正在使用的 Razor 页面。

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Post)) { 
<aside id="aside">
    <div class="editor-label">
        @Html.LabelFor(model => model.Width)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Width)
        @Html.ValidationMessageFor(model => model.Width)
    </div>  

    <div class="editor-label">
        @Html.LabelFor(model => model.Height)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Height)
        @Html.ValidationMessageFor(model => model.Height)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Depth)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Depth)
        @Html.ValidationMessageFor(model => model.Depth)
    </div>

    <input type="submit" value="save" />
</aside>
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:28:04.250

要进行自定义验证，您希望继承自`IValidatableObject`.

**注意自定义验证将在初始模型验证成功后进行

```
 public class MyItem : IValidatableObject
        {
            public double Width { get; set; }

            public double MinWidth { get; set; }

            public double MaxWidth { get; set; }
            public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
           {
                // Custom validation
           }

} 
```

[使用方法示例](https://stackoverflow.com/questions/3400542/how-do-i-use-ivalidatableobject)

# java - 来自相关包的图像

> ID：15419102
> 
> 赞同：2
> 
> 时间：2013-03-14T20:03:35.853
> 
> 标签：java, image, path, relative-path

我正在使用 java 小程序制作一个简单的游戏。我想将缓冲图像添加到项目中。

我创建了一个名为“resources.images.sprites”的包，并将图像放在那里。

如何访问图像？

我试过使用相对路径，但是“。” 从垃圾箱外开始，所以如果我将游戏放在网站上，我将无法访问它。

有任何想法吗？

这是我用于测试的主要代码......

```
package resources;

import java.io.File;
import java.util.HashMap;

import entities.Sprite;

public class ImageLibrary {

    private static final File sprite_path = new File(".");
    private static File[] sprite_files = sprite_path.listFiles();

    //private static HashMap<String,Sprite> sprite_map = new HashMap<String,Sprite>();

    public static void main(String[] args){
        System.out.println(sprite_files[0]); // To check the folder it's in...
    }

} 
```

编辑：我接受了答案，然后意识到我可以使用`getPath`URL 对象上的方法来获得我想要实现的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:07:48.110

使用[`ClassLoader`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html).

```
Classloader cl = ImageLibrary.class.getClassLoader();
URL imageUrl = cl.getResource("resources/images/sprites/MyImage.png"); 
```

一旦你有一个[`URL`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html)图像，你可以把它变成一个[`InputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)如果你需要的话。

```
InputStream imageStream = imageUrl.openStream(); 
```

# google-chrome - XHR1 请求和内存

> ID：15419104
> 
> 赞同：2
> 
> 时间：2013-03-14T20:03:38.483
> 
> 标签：google-chrome, memory, xmlhttprequest

当我使用 Chrome 使用简单的脚本发出一系列 XHR 请求时，例如：

```
var q = (function DUCK(){
    var x = new XMLHttpRequest();
    x.open('POST', '/someValidPage');
    x.onload = function(){console.log("responded!");}
    x.send();
});

//Just calling XHR a bunch of times to create the bug.
q(); q(); q(); q(); q(); q(); q(); q(); q(); q(); q();
q(); q(); q(); q(); q(); q(); q(); q(); q(); q(); q(); 
```

`x.onload`在进行所有`q()`调用之后，浏览器会立即构建一系列 22 个附加事件处理程序 ( )。这是意料之中的，但是响应已经下降并且对象不再被使用，XHR 对象保留在内存中，直到浏览器的垃圾收集器来清理它，它会删除所有额外的处理程序。

当我完成对象时，我想删除对象和事件......诸如 x.removeEventHandler('load') 之类的东西没有显示结果，并且不适用于 IE8（这也令人沮丧）。

如何正确分离事件并从内存中删除对象？

# c# - 如何使用 C# 驱动程序在 mongodb 中查询索引

> ID：15419106
> 
> 赞同：1
> 
> 时间：2013-03-14T20:03:42.320
> 
> 标签：c#, mongodb

我有以下数据结构：

```
{
   eventname: "blah",
   invitees: [
     {
        inviteid: 1,
        userid: 34234
     },
     {
        inviteid: 2,
        userid: 5232
     }]
} 
```

我将`ensureIndex`在我的受邀者列中使用，因此我不必搜索每个文档来查找受邀者列中的特定用户 ID。它基本上是在搜索特定用户 ID 被邀请参加的事件。有人建议我使用它`db.events.find({"invitees.userid" : 34234})`来查询它，但是我如何在 c# 中使用 10gen 驱动程序执行此操作。该`.find`方法只接受一个 Mongo Query 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:18:39.067

我这样做的方式是：

```
var collection = db.GetCollection<MyType>("collectionName");
var query = Query.EQ("fieldname", valueToQuery);
var results = collection.Find(query); 
```

# c++ - 派生赋值运算符从基础调用

> ID：15419114
> 
> 赞同：0
> 
> 时间：2013-03-14T20:04:04.520
> 
> 标签：c++, inheritance, operator-overloading, assignment-operator

[在来自此链接的问题的最佳评价答案中](https://stackoverflow.com/questions/1226634/how-to-use-base-classs-constructors-and-assignment-operator-in-c/1226792#1226792)，我不明白派生赋值运算符如何从基类调用赋值运算符，即在这部分代码中：

```
Derived& operator=(const Derived& d)
{
    Base::operator=(d);
    additional_ = d.additional_;
    return *this;
} 
```

做什么

```
Base::operator=(d) 
```

意思是？它有什么作用？干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:05:42.867

`Base::operator=`调用`Base`类版本`operator=`来复制对象的一部分，`Base`然后派生类复制其余部分。由于基类已经正确完成了所有需要的工作，为什么要重复工作，只需重用即可。所以让我们看这个简化的例子：

```
class Base
{
   std::string
      s1 ;
   int
      i1 ;
   public:
     Base& operator =( const Base& b)  // method #1
     {
        // trvial probably not good practice example
        s1 = b.s1 ;
        i1 = b.i1 ;

        return *this ;
     }
} ;

class Derived : Base
{
   double
     d1 ;
   public:
     Derived& operator =(const Derived& d ) // method #2
     {
       // trvial probably not good practice example
       Base::operator=(d) ;
       d1 = d.d1 ;
       return *this ;

     }

} ; 
```

`Derived`将有三个成员变量，两个来自`Base`:`s1`和`i1`一个它自己的`d1`。所以`Base::operator=`称我标记为的内容复制了继承自哪个`method #1`的两个变量是和，因此剩下要复制的就是哪个负责。`Derived``Base``s1``i1``d1``method #2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:14:04.870

它只是对当前对象的成员函数的调用。当前对象继承了一个完全限定名称为 的函数`Base::operator=`，您可以像调用任何其他非静态成员函数一样调用它。

# c++ - 在 C++ 中删除一个动态指针数组

> ID：15419122
> 
> 赞同：2
> 
> 时间：2013-03-14T20:04:29.060
> 
> 标签：c++, pointers, dynamic-memory-allocation

我有一个关于在 C++ 中删除动态指针数组的问题。假设我们有以下情况：

```
int n;
scanf("%d", &n);
Node **array1 = new Node*[n];
/* ... */ 
```

其中 Node 是预先定义的某个结构。假设在使用 new 运算符分配之后，我们更改了 array1 的内容（但我们没有删除任何内容！）。如果数组中可能存在重复指针（在线性时间内不对它们进行排序或插入集合），那么删除 array1 及其所有内容的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:13:52.550

使用此分配：

```
Node **array1 = new Node*[n]; 
```

array1 的内容是*未定义*的。每个元素都是 a `Node*`，并且由于内存未初始化，因此值可以是任何值。

分配指针数组*不会*构造指向类的对象。

因此，无论您将指针放入数组中，它们指向的对象都需要在其他地方构造和销毁。

所以要回答你的问题，删除 array1 的正确方法是

```
delete[] array1; 
```

但是，请注意，*这不会*导致为每个调用析构函数- 您应该在删除数组*之前*`Node*`处理您放入数组的任何内容。

 *编辑：我对原始问题感到困惑，其中提到了数组中的“更改值”，*就好像在您的示例中分配的数组中有*一个有效值一样。

但是...既然我知道您希望稍后跟踪要删除的指针，也许您可​​以为此目的创建另一个数组，其中每个指针仅存在一次。因此，您拥有上面当前拥有的数组，其中包含指向可能重复的节点的指针，无论您出于何种目的使用它。然后你有另一个数组*用于管理删除的明确目的*，其中每个指针只出现一次。`nodeCleanupArray[i] = pNewNode`设置类似right after应该很容易，然后您可以在线性时间和每个元素`pNewNode = new Node()`中爆炸该数组。`delete`（这意味着您不必费心检查 array1 中的元素，您将依赖 nodeCleanupArray 进行清理）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:19:50.293

这类问题有很多解决方案，但最明显的选择是将其更改为使用

```
std::vector< std::shared_ptr<Node> > 
```

现在您将拥有一个引用计数指针，而无需编写任何代码，以及一个不需要知道它的预定义大小的“数组”。

您当然可以在 中实现引用计数的对象`Node`，或者您自己的容器对象来做同样的事情，但这似乎是额外的麻烦，几乎没有好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:15:40.930

我这样做的方法是有一个引用计数器并有一个 Node::deref 方法，当引用计数为 0 时会删除节点本身。当遍历节点列表时，调用 node->deref 实际上不会删除对象，直到数组中的最后一个节点引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T20:12:21.523

尝试标记和扫描 :) 您正在尝试实施托管环境。

这是一个例子：

```
struct Node
{
... 
    bool marked;

    Node() : marked(false)
    {}
}; 
```

现在删除：

```
void do_delete(Node **data, size_t n)
{
    size_t uniq = 0;
    Node **temp = new Node*[n];

    for (size_t i = 0; i < n; i++)
    {
        if (data[i] && !data[i]->marked)
        {
            data[i]->marked = true;
            temp[uniq++] = data[i];
        }
    }

    for (i = 0; i < uniq; ++i)
    {
        delete temp[i];
    } 

    delete[] temp;
    delete[] data;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T20:31:20.543

> What is the proper way to delete the array1 and all its content

You show a single allocation; `new Node*[n]`. This allocation confers on the program the responsibility to call `delete [] whatever_the_return_value_was`. This is only about deleting that one allocation and not about deleting 'all its content'. If your program performs other allocations then the program needs to arrange for those responsibilities to be handled as well.

> if there is a possibility of repeated pointers in the array

Well it would be undefined behavior to `delete` a pointer value that is not associated with any current allocation, so you have to avoid deleting the same pointer value more than once. This is not an issue of there being a single correct way, but an issue of programming practices, design, etc.

Typically C++ uses RAII to handle this stuff automatically instead of trying to do what you want by hand, because doing it by hand is really hard to get right. One way to use RAII here would be to have a second object that 'owns' the Nodes. Your `array1` would then simply use raw pointers as 'non-owning' pointers. Deleting all the Nodes then would be done by letting the Node owning object go out of scope or otherwise be destroyed.

```
{
  // object that handles the ownership of Node objects.
  std::vector<std::unique_ptr<Node>> node_owner;

  // your array1 object that may hold repeated pointer values.
  std::vector<Node*> array1;

  node_owner.emplace_back(new Node); // create new nodes

  array1.push_back(node_owner.back().get()); // put nodes in the array
  array1.push_back(node_owner.back().get()); // with possible duplicates

  // array1 gets destroyed, but it's contents do not, so the repeated pointers don't matter
  // node_owner gets destroyed and destroys all its Nodes. There are no duplicates to cause problems.
} 
```

And the destruction does occur in linear time.*

# paypal - 逗号和美元价格中没有句点

> ID：15419124
> 
> 赞同：3
> 
> 时间：2013-03-14T20:04:32.443
> 
> 标签：paypal, comma, period

当我添加到购物车按钮时，价格（以美元为单位）显示为 18.00，而不是 18.00，这让一些客户认为价格是 1800 美元而不是 18 美元。这是我使用的代码：

```
<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="hosted_button_id" value="PXUZGKZW3BP6Q">
  <input type="image" src="http://www.mdna-games.com/cart.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

我已将“lc=EN”放在高级属性下，以确保页面始终以英文显示，但价格仍不按照英/美标准显示。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:53:19.200

该按钮支付的帐户恰好位于使用逗号而不是句点来表示小数的语言环境中。

解决方案是根据需要传递使用句点的区域设置代码。例如：

```
<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="lc" value="US">
  <input type="hidden" name="hosted_button_id" value="PXUZGKZW3BP6Q">
  <input type="image" src="http://www.mdna-games.com/cart.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

当您在 PayPal.com 上编辑托管按钮时，您还可以将“lc=US”放入“高级变量”部分

[有关更多详细信息，请参阅PayPal Payments Standard 的 HTML 变量](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables)下的语言环境列表

# virtual-machine - 在虚拟机内部运行的进程能否获取有关在虚拟机外部运行的进程的信息？

> ID：15419137
> 
> 赞同：1
> 
> 时间：2013-03-14T20:05:13.973
> 
> 标签：virtual-machine

假设我正在运行带有两个主要进程的 Windows 7，我将称之为 V 和 P。

V 是运行另一个 Windows 7 实例的虚拟机，而 P 是我想要有关信息的进程，两者都在“顶级”操作系统上。

V 中的 Windows 7 正在运行的进程 C 能否从 V 中获取有关诸如 P 之类的进程的信息？换句话说，在虚拟机内部运行的进程能否获得有关操作系统正在运行的进程的任何信息，该操作系统也在维护虚拟机进程？我觉得它会依赖于虚拟机进程的能力，如果它没有被编程来专门检索这些信息，那么它是不可能的。

我已经阅读了另一个关于甚至检测进程是否正在由虚拟机运行的困难的主题。有些人认为它不可靠或不可能。我不确定是否有一种标准的方法可以找到它，我相信这篇文章大约是 4 或 5 年前的。

那么这可以通过流程 C 来完成，还是需要更多的标准例程来完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:47:56.693

我不相信在虚拟机管理器下运行的操作系统（例如（VMWare 等）直接访问与主机操作系统相关的信息是可能的，因为默认情况下，大多数虚拟机管理器都试图完全隔离主机和来宾系统.

话虽如此，大多数虚拟机管理器都有允许虚拟机共享数据并与主机系统通信的机制。通过使用这些机制，主机操作系统可以将有关自身的信息传达给客户。

### 选项 1：共享文件

通过主机和来宾之间的共享网络，可以让主机系统将信息写入共享位置的文件，并让来宾打开并使用`CreateFile`UNC 路径解析该文件，例如`\\host\sharename\file.txt`

### 选项 2：通过套接字或命名管道进行数据传输

主机和来宾之间的共享网络将允许您使用[Windows 套接字](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740673%28v=vs.85%29.aspx)或[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365780%28v=vs.85%29.aspx)API 来创建 TCP 或 UDP 套接字，或者可以交换数据的命名管道。

这种方法将涉及在主机应用程序上运行的服务器应用程序，它将您所追求的进程信息写入套接字或管道，运行客户端进程的来宾系统可以在其中读取它。

### 选项 3：远程 Windows 管理规范 (WMI) 查询

WMI 提供了一种获取信息并与 Windows 操作系统的许多方面（包括有关进程的信息）进行交互的标准方法。

这可能是最复杂的选项，因为默认情况下 WMI 不接受来自远程主机（即您的 VM）的查询，因此需要将主机[配置](http://msdn.microsoft.com/en-nz/library/windows/desktop/aa389290%28v=vs.85%29.aspx)为允许远程 WMI 查询。

一旦配置了 WMI，就可以通过 WMI 命令行客户端 ( `wmic.exe`) 轻松使用它，因此您可以使用如下查询调用它：

在这个例子中：

*   `%HOST_NAME%`是托管 Windows 7 VM 的系统的名称
*   `%TARGET_PROCESS%`
    是您想要了解的进程的进程名称

`wmi \node:%HOST_NAME% process where name='%TargetProcess%' get executablepath`

[此特定查询获取 %TargetProcess% 的可执行路径，但根据Win32_Process WMI 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)文档¹的文档，还有更多可用的属性。

### 选项 4：共享剪贴板

一些虚拟机管理器允许来宾系统访问主机的剪贴板，因此可以在来宾和主机上运行的应用程序之间交换信息。

我很欣赏这可能是最不传统的选择，但您可以想象使用[Windows 剪贴板 API](http://msdn.microsoft.com/en-nz/library/windows/desktop/ms648709%28v=vs.85%29.aspx)将进程信息写入主机的剪贴板，然后将信息读入来宾系统上的进程。

¹**注意：**尽管`Win32_Process`类文档以标题大小写 () 列出了属性，`ExecutablePath`但我发现它们仅在`wmic`以全小写 ( `executablepath`)编写时才能在查询中正常工作

# extjs - 扩展 extjs 视图

> ID：15419139
> 
> 赞同：1
> 
> 时间：2013-03-14T20:05:14.700
> 
> 标签：extjs, extjs4

我需要创建几个具有相同内容的视图，只有一个彼此略有不同的网格。

我的想法是创建一个基本视图，但我不知道如何在继承的类中更改此网格。

根据：

```
Ext.define('App.view.cadastro.FiltroBase',{
    extend: 'App.controls.CoWindow',
    alias: 'widget.filtrobase',
    modal: false,
    width: 800,
    height: 400,
    layout: 'vbox',
    items: [
        {
            xtype: 'container',
            layout: {
                type: 'hbox',
                align: 'middle'
            },
            width: '100%',

            defaults: {
                padding: 4
            },
            items: [
                {
                    xtype: 'label',
                    text: i18n.procurarPor
                },
                {
                    xtype: 'combobox',
                    itemId: 'comboBox',
                    queryMode: 'local',
                    forceSelection: true,
                    width: 150
                },{
                    xtype: 'label',
                    text: 'Filtro:'
                },
                {
                    xtype: 'textfield',
                    itemId: 'filtro',
                    enableKeyEvents: true,
                    flex: 1
                },
                {
                    xtype: 'container',
                    width: 100,
                    layout: 'fit',
                    items: [
                        {
                            xtype: 'button',
                            text: i18n.pesquisar,
                            action: 'pesquisar',
                            itemId: 'botaoPesquisa',
                            icon: 'assets/img/16/find.png'
                        }
                    ]
                }

            ]
        },
        {
            xtype: 'grid',   ******************
            flex: 1,
            width: '100%',
            itemId: 'grid',
            columns: [
                {
                    text: i18n.nome,
                    dataIndex: 'nome',
                    flex: 1
                }
            ],
            dockedItems: [{
                xtype: 'pagingtoolbar',
                dock: 'bottom',
                displayInfo: true
            }]*****************
        }
    ],
    buttons: [
        {
            text: i18n.incluir,
            action: 'incluir',
            itemId: 'botaoIncluir',
            icon: 'assets/img/16/new.png'
        },
        {
            text: i18n.editar,
            action: 'editar',
            itemId: 'botaoEditar',
            icon: 'assets/img/16/edit.png'
        }
    ]

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T21:05:22.263

一般的想法是做这样的事情：

```
Ext.define('BaseGrid', function(){
    initComponent: function(){
        this.columns = this.getColumns();
        this.callParent();
    },

    getColumns: Ext.emptyFn
});

Ext.define('SubGrid', {
    getColumns: function(){
        return [];
    }
}); 
```

# c++ - 从 boost::interprocess::vector 中安全删除

> ID：15419141
> 
> 赞同：3
> 
> 时间：2013-03-14T20:05:27.300
> 
> 标签：c++, boost, vector, boost-interprocess

**类型：**

```
namespace bipc = boost::interprocess;

typedef bipc::allocator<char, bipc::managed_shared_memory::segment_manager> char_allocator; 
typedef bipc::basic_string<char, std::char_traits<char>, char_allocator> shmem_string; 

typedef bipc::allocator<shmem_string, bipc::managed_shared_memory::segment_manager> string_allocator;
typedef bipc::vector<shmem_string, string_allocator> shmem_vector; 
```

**当前使用情况：**

```
le_buffer = shmem.construct<shmem_vector>("le_buffer")(some_string_allocator);
le_buffer->push_back(some_shmem_string); 
```

**麻烦：**

现在我需要遍历这个向量并删除所有解析为 int 等于 123 的字符串。

```
int size = le_buffer->size();
for(int i=0; i<size; i++){
   int tmp = parse(le_buffer->at(i));
   if(tmp == 123) {
    // ???
   }
} 
```

如何安全地删除这些字符串`le_buffer`？

# mysql - 控制自动递增的列？

> ID：15419143
> 
> 赞同：1
> 
> 时间：2013-03-14T20:05:28.460
> 
> 标签：mysql, auto-increment

我有一个名为 ptb_users 的表，如下所示：

```
id (auto increment)  |  name   | email
1                       john     john@email.com
2                       kate     kate@gmail.com
29                      harry    harry@email.com
10016                   lisa     lisa@mail.com 
```

id 是一个自动增量值，到目前为止它已经上升到 id 的 1-29，但现在由于某种原因它跳过了 30-10015 并且它从 10016 开始自动增量？

有人知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:08:39.857

通常这是因为一个中止的事务分配了用于插入的 id 但随后中止。一般来说，自动增量只能保证产生唯一的 id，不应依赖于产生可预测的数字序列。

# java - .NET - .NET 的安全框架

> ID：15419147
> 
> 赞同：3
> 
> 时间：2013-03-14T20:05:51.233
> 
> 标签：java, .net, spring, security, frameworks

有人知道.NET 的任何安全框架吗？

通过安全框架，我指的是由一组库和 API 组成的框架，其中包含可用于提高正在开发的应用程序整体安全性的代码。

到目前为止，我只识别了 Spring.NET。我找到了其他 .NET 框架，例如 Castle MonoRail，但它并不完全针对解决安全问题。

举个例子，Java 程序员可以使用以下安全框架：

1.  阿帕奇希罗 (Java)
2.  JAAS (Java)
3.  JGuard (Java)
4.  JSecurity (Java)
5.  纠察队 (Java)
6.  弹簧安全（Java）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T20:13:37.397

我不知道那些框架，但快速浏览一下 Apache Shiro 和 Spring Security，我知道您正在寻找可以进行*加密*、*会话管理*、*身份验证*和*授权*的东西。不幸的是，除了 .NET 默认内置的框架外，我不知道有任何框架可以为您做到这一点。

**密码学**由[`System.Security.Cryptography`命名空间](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx)提供。

**ASP.Net 默认提供**身份验证**和**授权，如 Windows、Forms 或密码身份验证。**例如，参见 CodeProject 上的[ASP.NET 身份验证和授权](http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization)文章。**

 ****会话管理**也内置在 ASP.Net 中。例如，请参阅MSDN 上的[ASP.NET 状态管理概述](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)。**

# javascript - 有没有人有“开始”和“持续时间”以匹配视频持续时间的 XML 字幕的视频时间算法示例？

> ID：15419150
> 
> 赞同：1
> 
> 时间：2013-03-14T20:05:58.787
> 
> 标签：javascript, xml, html

有谁知道如何或有示例或来自某人提供的好示例的链接？我有包含“开始”时间、“持续”时间和字幕文本的 XML 文件。在 HTML5 中，我有快照 MJPEG 电影。在播放 MJPEG 视频时，我能够获得 fps 持续时间小数位数。现在我想知道如何将这个视频持续时间数字与字幕开始和持续时间数字一起使用，以便字幕文本可以在视频运行时显示匹配。

这是我的 XML 代码，

```
<transcript>
<text start="2.014" dur="1.276">Greetings fellow nerds.</text>
<text start="3.291" dur="3.446">In this video we&#39;re going to make glow sticks of various colors</text>
<text start="6.738" dur="2.277">and explain a few interesting points about them.</text>
<text start="9.016" dur="2.722">But first I need to crush your expectations.</text>
</transcript> 
```

获取视频持续时间的 Javascript 变量名称是 profTime。

这里的 HTML 视频代码示例和 id 是 profTime，

```
<div class="drsElement" 
 style="left: 47%; top: 52%; height: auto; width: 25%;   text-align:  left; " id="profDiv">
    <div class="drsMoveHandle" style = "position:relative;"><p id="profTime"> Time: 0</p></div>
        <div >
<input type="range" onchange="profOpc()" value="100" id="profOPC" min="20" max="100" />
</div>

    <div style=" width: auto; height: auto; position:relative; margin-bottom:7%;">
        <!-- video images area.... -->
        <img src="prof/0.jpg" style="width: 100%; height:auto;"   class="webcam2"  id="profVid"   alt="Live Stream"  onerror="ErrorPlayProf()"> 

    </div>
            <center>

        <input type="button" onclick="fivesecbackProf()" value="- 5 sec" id ="fivesecbackProfButt" />
        <input type="button" onclick="onesecbackProf()" value="- 1 sec" id ="onesecbackProfButt" />
        <input  type="button" onclick="liveProf()" value="Live" id ="liveProfButt" disabled = "true" />
        <input  type="button" onclick="onesecforProf()" value="+ 1 sec"id ="onesecforProfButt" disabled = "true" />
        <input  type="button" onclick="fivesecforProf()" value="+ 5 sec"id ="fivesecforProfButt" disabled = "true" />
    </center>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:26:05.693

您可能会发现这个[HTML5 视频 API 的交互式演示](http://www.w3.org/2010/05/video/mediaevents.html)很有用。

您需要的算法并不是特别困难。本质上，您希望通过侦听进度事件并根据视频的`currentTime`属性决定显示哪个 cuePoint 来监视视频播放的进度。以下是不完整的，但应该给你的想法。

```
var video = document.getElementById('video');
video.addEventListener('progress', progressHandler);

console.log(document.getElementById('video'));

function progressHandler() {
 //console.log(video.currentTime);
    var currentTime = video.currentTime;
    var cueStart = cuePoint.start;
    var cueEnd = cueStart + cuePoint.duration;

    if (currentTime > cueStart && currentTime < cueEnd) {
       displayCuePoint(cuePoint.text);   
    }
} 
```

如果您将 XML 中的每个文本节点映射到具有相应属性的 JavaScript 对象，您的工作可能会轻松很多。或者更好的是，在第一个实例中将数据加载为 JSON 并省去将其转换为更可用的东西的麻烦。

# wifi - Arduino 的 LiquidCrystal 库会干扰 Wi-Fi 库吗？

> ID：15419152
> 
> 赞同：0
> 
> 时间：2013-03-14T20:06:09.990
> 
> 标签：wifi, arduino, lcd

有一天，我在玩我的 Arduino 并有了一个很酷的想法。也许我可以在没有串行监视器的情况下进行无线连接！我可以改用液晶显示器！所以，我去上班了。我用 LCD 的东西替换了所有串行的东西。

最后，我的代码中没有错误（根据 Arduino 客户端）。

这是我的代码：

```
#include <LiquidCrystal.h>
#include <WiFi.h>

LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

char ssid[] = "Fake Network";                    // Your network SSID (name)
char key[] = "1";       // your network key
int keyIndex = 0;                                // Your network key Index number
int status = WL_IDLE_STATUS;                     // The Wi-Fi radio's status

void setup() {

    lcd.begin(16, 2);

    // Check for the presence of the shield:
    if (WiFi.status() == WL_NO_SHIELD) {
        lcd.println("WiFi shield not present");
        // Don't continue:
        while(true);
    }

    // Attempt to connect to Wi-Fi network:
    while ( status != WL_CONNECTED) {
        lcd.print("Attempting to connect to WEP network, SSID: ");
        lcd.println(ssid);
        status = WiFi.begin(ssid, keyIndex, key);

        // Wait 10 seconds for connection:
        delay(10000);
    }

    // Once you are connected:
    lcd.print("You're connected to the network");
    printCurrentNet();
    printWifiData();
}

void loop() {
    // Check the network connection once every 10 seconds:
    delay(10000);
    printCurrentNet();
}

void printWifiData() {
  // Print your Wi-Fi shield's IP address:
  IPAddress IPaddr = WiFi.localIP();
  lcd.print("IP Address: ");
  lcd.println(IPaddr);
  lcd.println(IPaddr);

  // Print your MAC address:
  byte MACaddr[6];
  WiFi.macAddress(MACaddr);
  lcd.print("MAC address: ");
  lcd.print(MACaddr[5],HEX);
  lcd.print(":");
  lcd.print(MACaddr[4],HEX);
  lcd.print(":");
  lcd.print(MACaddr[3],HEX);
  lcd.print(":");
  lcd.print(MACaddr[2],HEX);
  lcd.print(":");
  lcd.print(MACaddr[1],HEX);
  lcd.print(":");
  lcd.println(MACaddr[0],HEX);
}

void printCurrentNet() {
    // Print the SSID of the network you're attached to:
    lcd.print("SSID: ");
    lcd.println(WiFi.SSID());

    // Print the MAC address of the router you're attached to:
    byte bssid[6];
    WiFi.BSSID(bssid);
    lcd.print("BSSID: ");
    lcd.print(bssid[5],HEX);
    lcd.print(":");
    lcd.print(bssid[4],HEX);
    lcd.print(":");
    lcd.print(bssid[3],HEX);
    lcd.print(":");
    lcd.print(bssid[2],HEX);
    lcd.print(":");
    lcd.print(bssid[1],HEX);
    lcd.print(":");
    lcd.println(bssid[0],HEX);

    // Print the received signal strength:
    long rssi = WiFi.RSSI();
    lcd.print("signal strength (RSSI):");
    lcd.println(rssi);

    // Print the encryption type:
    byte encryption = WiFi.encryptionType();
    lcd.print("Encryption Type:");
    lcd.println(encryption,HEX);
    lcd.println();
} 
```

结果是.......什么都没有。什么都没有显示。

然后我去做了我的调试版本。请注意，我从代码的底部开始。

```
lcd.print("bug"); 
```

我把它放在我代码的每一行下面。最后，我到达了顶部，在这条线下：

```
lcd.begin(16, 2); 
```

你猜怎么着！任何一行都没有显示！我到处看了看，检查了显示引脚。

终于，我发现了问题！

这是一个我无法摆脱的可怕错误！WiFi.h 库不会显示显示！我不知道为什么，但如果我`#include <WiFi.h>`进入我的程序（或任何带有 LiquidCrystal 库的程序......事情完全一样！

这个问题的原因是什么，我该如何解决？我还没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:10:51.383

根据[文档](http://arduino.cc/en/Main/ArduinoWiFiShield)：

> Arduino 使用 SPI 总线（通过 ICSP 头）与 Wifi shield 的处理器和 SD 卡进行通信。这是在 Uno 上的数字引脚 11、12 和 13 以及 Mega 上的引脚 50、51 和 52 上。在 Uno`11`上是`MOSI`，并且`12`是`MISO`。

根据你的代码

```
LiquidCrystal lcd(12, 11, 5, 4, 3, 2); 
```

您正在使用引脚`11`和`12`LCD。现在，如果 LCD 使用 SPI，则 LCD 可以共享引脚`11`并`12`与[Wi-Fi](http://en.wikipedia.org/wiki/Wi-Fi)屏蔽，因为用于`SS`( `Slave Select`) 功能的同一组引脚将告诉外围设备应该监听哪一个。但是，LiquidCrystal 库将其前两个参数引脚分别用于`RS`和`Enable`，使其与 SPI 不兼容。解决方案：将您的 LCD 移到不同的引脚上。

# sql - 如何在excel中为多列创建关系？

> ID：15419154
> 
> 赞同：2
> 
> 时间：2013-03-14T20:06:15.190
> 
> 标签：sql, excel, join, relationship, powerpivot

我正在尝试在 powerpivot 中的两个表之间创建关系。但是，我的表没有任何键。我想做的是创建一个类似 SQL-Unique-Constraint 的关系，它基于多个值组合，是关键。

例如：

表 1 列是 First、Last、Address、Phone

表 2 列是相同的。

我想在 excel 中创建一个关系，相当于

`select * from Table1 full join Table2 on 1.Fist=2.First and 1.Last=2.Last and 1.Address=2.Address`

但是，创建关系对话框不允许选择多个列。我尝试了只创建多个 1 列关系的路线。但是，如果列中存在重复值，则关系也不能包含列。

我有一种感觉，我可能只是从错误的方向接近实现这一目标。任何帮助表示赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:50:06.403

泽，

您说得对，PowerPivot 本身并不支持多列关系。但是有两种解决方法：

*   为连接在一起的各个列的每个表添加一个键，并提供它在至少一个中是唯一的，则可以创建关系。如果您遇到两个表都没有唯一键的情况，则可以使用 SQL 创建一个唯一键的中间表。

*   从技术上讲，可以在表之间创建多个关系，但只能激活一个。有一个名为 USERELATIONSHIP() 的 DAX 函数可以使用非活动关系。这是一项先进的技术。

您的解决方案很可能是在源 SQL 查询中合并这两个表。雅各布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:08:28.313

如果您只想使用 2 列或更多列进行内部连接，请考虑创建一个计算列，将 2 个表中的每一个中的 2 或 3 列连接起来，然后在它们之间创建关系。

我有过类似的案例并使用过这种技术。

# android - 在 WebView 中显示带有 CSS 的 HTML 页面

> ID：15419159
> 
> 赞同：1
> 
> 时间：2013-03-14T20:06:37.467
> 
> 标签：android, css, webview

我正在尝试在 a 中加载网页`WebView`，但是当检索该页面时，我丢失了所有样式信息，可能是我的 Web 视图中未正确使用 CSS 文件。

为了检索我`HTTP POST`以这种方式使用的数据：

```
public void postData() throws IOException, ClientProtocolException {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
    nameValuePairs.add(new BasicNameValuePair("param1", "parameter1"));  
    nameValuePairs.add(new BasicNameValuePair("param2", "parameter2"));

    HttpClient httpclient = new DefaultHttpClient();  
    HttpPost httppost = new HttpPost(URL_STRING);  
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));  

    HttpResponse response = httpclient.execute(httppost);  
    String data = new BasicResponseHandler().handleResponse(response);
    WebView mWebView = (WebView) findViewById(R.id.wv);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadData(data, "text/html", "utf-8");
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:15:46.950

问题是相对路径`href="/maindir/css/sites.css"`：

**解决方案1：（** 在服务器更改）

如果您有权访问网络服务器，请尝试在`<link type="text/css" rel="stylesheet" href="/maindir/css/sites.css">`. 因此，`/maindir/css/sites.css`您将拥有`http://your.domain.com/maindir/css/sites.css`

**解决方案2：（**在客户端更改）

而不是`mWebView.loadData(data, "text/html", "utf-8");`使用方法[loadDataWithBaseURL (String baseUrl, String data, String mimeType, String encoding, String historyUrl)](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)将使用该`baseUrl`字符串来使相对路径起作用。

结果将类似于：

`mWebView.loadDataWithBaseURL("http://your.domain.com/", data, "text/html", "utf-8", null);`

# php - 将 Soap 身份验证标头从 PHP 发送到 ASP.NET Web 服务

> ID：15419161
> 
> 赞同：0
> 
> 时间：2013-03-14T20:06:43.193
> 
> 标签：php, asp.net, web-services

我正在尝试将带有身份验证凭据的soap 标头从PHP 发送到ASP.NET Web 服务。

```
/// <summary>
/// Soap Header for the Secured Web Service.
/// </summary>
public class TestWebServiceHeader : System.Web.Services.Protocols.SoapHeader
{
    public string Username;
    public string Password;
    public string AuthenticatedToken;
}

/// <summary>
/// Summary description for TestService
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
public class TestService : System.Web.Services.WebService
{
    public TestWebServiceHeader AuthHeader;
    public SoapUnknownHeader[] UnknownHeaders;

    [WebMethod]
    [System.Web.Services.Protocols.SoapHeader("AuthHeader")]
    [SoapHeader("UnknownHeaders")]
    public string HelloWorld()
    {
        foreach (SoapUnknownHeader header in UnknownHeaders)
        {
            if (header.Element.LocalName == "AuthHeader")
            {
                // FOUND HEADER
            }
        }

        if (AuthHeader == null)
        {
            // NULL AuthHeader
        }

        return "Hello World";
    }
} 
```

这是PHP

```
<?php
$service = new SoapClient("http://localhost/Orientation/TestService.asmx?wsdl");
$HeaderSecurity = array("Username"=>"user", "Password"=>"pass123");
$header = new SoapHeader('http://tempuri.org/', 'AuthHeader', $HeaderSecurity, false);
$service->__setSoapHeaders(array($header));   
$service->HelloWorld(); // Example

//$service = new SoapClient("http://localhost/Orientation/TestService.asmx?wsdl");
//$auth = array('user'=>'user', 'password'=>'pass123'); 
//$authvar = new SoapVar($auth, SOAP_ENC_OBJECT); 
//$header = new SoapHeader('http://tempuri.org/', 'AuthHeader xmlns="http://tempuri.org/"',      $authvar, false); 
//$service->__setSoapHeaders(array($header)); 
//$service->HelloWorld();
?> 
```

在 Web 服务中，来自 PHP 的 AuthHeader 始终为空。我可以在捕获 SoapUnknownHeaders 时找到标头，并且标头名称为 ns1:AuthHeader。如何在不使用 SoapUnknownHeaders 的情况下获取标题。拥有标题对象后，如何从标题中提取信息？我也无法让注释掉的部分在 PHP 中工作。SOAP_ENC_OBJECT 是否使调用更安全？

# jquery - 属性选择器问题

> ID：15419164
> 
> 赞同：3
> 
> 时间：2013-03-14T20:06:51.093
> 
> 标签：jquery, selector

我在所有选择框上应用一个类。

```
$('select[class!="skip_these"]').uniform(); 
```

上面的代码意味着当我应用到任何带有类的选择框时，`skip_there`它不会被应用并且它可以工作。

```
<select name="xyz" class="skip_these"></select> 
```

但是当我添加另一个类时，它适用，我不希望这样。

```
<select name="xyz" class="skip_these myclass"></select> 
```

有没有办法解决它？
我不想为此更改插件。

可以通过 jQuery 选择器来完成吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:08:01.047

```
$('select:not(.skip_these)').uniform(); 
```

这也可以：

```
 $('select').not('.skip_these').uniform(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T20:08:06.683

使用`:not`伪选择器：

```
$('select:not(.skip_these)').uniform(); 
```

# spring - 使用 jquery 和 spring mvc 进行即时搜索

> ID：15419172
> 
> 赞同：2
> 
> 时间：2013-03-14T20:07:09.980
> 
> 标签：spring, search, live

我需要一些关于 jquery 或其他脚本的帮助以进行即时搜索。我有jquery的基本知识。我使用 Spring MVC 作为后端程序。

在我的页面中，我需要搜索两个用户，并且结果必须显示在同一个搜索页面上。

我的问题是：我必须使用 PHP 连接到数据库吗？PHP是否与弹簧一起使用？

任何使用jquery和spring实时搜索的例子？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:15:56.973

我写了一篇关于集成 jQuery / AJAX / Spring MVC 的帖子。你可以阅读它@http [://stories.stefanocazzola.it/2012/07/spring-and-json-requests.html](http://stories.stefanocazzola.it/2012/07/spring-and-json-requests.html)

希望这可以帮助你，

斯特凡诺

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:19:30.417

你可以看看 [Spring 框架中的 JavaScript 动态语言支持](http://nurkiewicz.blogspot.com/2010/09/javascript-dynamic-language-support-in.html)

和[jquery 自动完成](http://jqueryui.com/autocomplete/)

“PHP 是否与 spring 一起工作”：不，不是。

就代码而言，我在周末创建了一些东西。

# svn - svnserve 中的 Authz 文件

> ID：15419180
> 
> 赞同：2
> 
> 时间：2013-03-14T20:07:36.233
> 
> 标签：svn, tortoisesvn, authz, svnserve

我正在尝试在 svnserve 中设置 authz 文件（在 SUN OS 下）。我的仓库名称是 CL_xyz，仓库路径是 /export/svnrepo/xyz。如何在第 x 步指定 repo 路径以获得所需的结果？现在，我收到一个错误-

```
Sending        test.txt
Transmitting file data .svn: E220001: Commit failed (details follow):
svn: E220001: Access denied
svn: E220001: Your commit message was left in a temporary file: 
```

**授权文件**

```
[groups]
admin = app
# [/foo/bar]
# harry = rw
# &joe = r
# * =

[/branches]  ----step x
#[/]

#* = rw
@admin = rw 
```

PS：我的 svnserve.conf 和 passwd 文件工作正常。

**svnserve.conf 文件**

```
anon-access = none
auth-access = write
password-db = passwd
authz-db = authz
realm = CL_xyz 
```

寻求专家来解决我的小问题。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:18:37.987

因此，当您使用“app”用户名进行身份验证并且能够使用该凭据进行读取时，例如，进行更新？

您只授予了存储库根路径之外的 /branches 路径中管理组成员的写入权限。我认为这是您要写入的路径？也许如果你显示你正在使用的 svn 命令行，它会有所帮助。

你能运行 svn info 并显示它的输出吗？

# c - C 中文件 I/O 的一些最佳实践是什么？

> ID：15419181
> 
> 赞同：6
> 
> 时间：2013-03-14T20:07:39.327
> 
> 标签：c, file, io

我正在编写一个相当基本的程序供个人使用，但我真的想确保我使用良好的实践，特别是如果我决定以后让它更健壮或其他什么。

出于所有意图和目的，该程序接受一些输入文件作为参数，使用`fopen()`从文件中读取打开它们，使用该信息进行处理，然后将输出保存为子文件夹中的几个不同文件。例如，如果程序在，`~/program`则输出文件保存在`~/program/csv/`

我只是直接输出到文件，例如 `output = fopen("./csv/output.csv", "w");`，循环打印到它`fprintf(output,"%f,%f", data1, data2);`，然后关闭，`fclose(output);` 我只是觉得这是不好的做法。

我是否应该将它保存在临时目录中，然后在写入时将其移动，然后在完成时将其移动？我应该使用更高级的文件 i/o 库吗？我只是在想这件事吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:23:30.500

我眼中的最佳实践：

*   检查对 fopen、printf、puts、fprintf、fclose 等的每次调用是否有错误
*   如果必须，请使用 getchar，如果可以，请使用 fread
*   如果必须使用 putchar，如果可以使用 fwrite
*   避免对输入行长度的任意限制（可能需要 malloc/realloc）
*   知道何时需要以二进制模式打开输出文件
*   使用标准 C，忘记 conio.h :-)
*   换行符位于行**尾**，而不是某些文本的开头，也就是说，它`printf ("hello, world\n");`与`"\nHello, world"`那些被强大的 William H. 误导的内容不同。经常写来应对他们的命令 shell 的愚蠢。
*   如果您需要超过 7 位 ASCII，请选择[Unicode](http://www.cl.cam.ac.uk/~mgk25/unicode.html)（最常见的编码是与 ASCII 兼容的 UTF-8）。这是您需要学习的最后一种编码。远离代码页和 ISO-8859-*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T20:13:53.573

> 我只是在想这件事吗？

你是。如果任务很简单，不要仅仅因为感觉“更专业”而故意做出复杂的解决方案。当您是初学者时，请关注代码的可读性，它将促进您和他人的生活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:14:13.287

没关系。默认情况下，I/O 使用文件函数完全缓冲`stdio`，因此您不会在每次调用`fprintf`. 事实上，在很多情况下，在你调用`fclose`.

检查 . 的返回`fopen`，完成后关闭文件等是一个很好的做法。让操作系统和编译器完成他们的工作，使其余部分高效，对于像这样的简单程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T20:15:41.847

如果没有其他程序正在检查是否存在以`~/program/csv/output.csv`进行进一步处理，那么您正在做的事情就很好。

否则，您可以考虑写入`FILE *`通过调用[`tmpfile`stdio.h](http://www.codecogs.com/reference/computing/c/stdio.h/tmpfile.php)或一些类似的库调用获得的文件，并在完成后将文件复制到最终目的地。您也可以放下一个锁定文件`output.csv.lck`并在完成后将其删除，但这取决于您是否能够修改其他程序的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T20:17:01.600

您可以制作自己的`cat`, `cp`,`mv`练习程序。

# php - 从整个 Html 中删除空格，但在 pre 中使用 php 中的正则表达式

> ID：15419185
> 
> 赞同：0
> 
> 时间：2013-03-14T20:07:50.227
> 
> 标签：php, regex, html-parsing

我正在使用这篇[文章](https://stackoverflow.com/questions/8762993/remove-white-space-from-entire-html-but-inside-pre-with-regular-expressions)中的以下正则表达式： (?<=\s)\s+(?![^<>]*)

当我这样做时：

```
echo gzencode( trim( preg_replace('/(?<=\s)\s+(?![^<>]*<\/pre>)/', '', $html) ), 9); 
```

所有 html 中的空格都被替换。甚至在 pre 标签内。我需要这个来压缩整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:20:32.403

试试这个：

```
echo gzencode( trim( preg_replace('/\s+(?![^<>]*<\/pre>)/', '', $html) ), 9); 
```

=)

# python - 如何使用某些构造函数创建派生类？（Python）

> ID：15419196
> 
> 赞同：1
> 
> 时间：2013-03-14T20:08:08.617
> 
> 标签：python, class

这是我的课：

```
class Player(object):
    def __init__(self, playernum):
    self.playernum = playernum

    def play_turn(self, board):
        """This method is passed an instance of ConnectFour.  
           It should examine the board (using methods on the ConnectFour class...
           assume you have it) and eventually call board.play_turn and return"""
    pass 
```

到目前为止，我明白如果我这样做：

```
class Human(Player): 
```

它将使 Human() 成为 Player 的派生类。

我想做的是在这个类中有一个构造函数 playernum。然后获取覆盖的 play_turn 并打印一个玩家编号（即 playernum）......我只想知道这将如何实现......我重复一遍吗

```
def play_turn(self,board): 
```

在 Human 类中，还是我简单地说

```
class Human(Player):
    play_turn 
```

和里面

```
play_turn(self,board):
    "put"
    print playernum 
```

我对类的派生及其背后的逻辑有点陌生。任何输入将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:11:56.100

您是正确的，要覆盖父类中的方法，您在派生类中“重复”该方法。您的代码最终应该看起来像：

```
class Human(Player):
    def play_turn(self, board):
        print self.playernum 
```

如果`play_turn`要包含其派生类的共享逻辑，则首先要调用父母的方法：

```
class Human(Player):
    def play_turn(self, board):
        super(Human, self).play_turn(board)
        print self.playernum 
```

# assembly - 系统写入整数

> ID：15419201
> 
> 赞同：0
> 
> 时间：2013-03-14T20:08:19.610
> 
> 标签：assembly, formatting, x86, memory-address, sys

我目前正在开发一个小型 ASM 程序，该程序获取进程 ID，然后将其写出屏幕。

这是代码：

```
SECTION .bss

    Pid: resb 4

SECTION .text

global start

start:
    mov eax, 0x14       ; System call 20 - Get PID
    push eax            ; Push to stack for BSD
    int 0x80            ; Call
    mov edx, eax        ; Save return value in EDX
    add esp, 0x4        ; Clean up the stack

    push 0x4            ; Push lenth of 4 bytes
    mov [Pid], edx      ; Move address to Pid Buffer
    push Pid
    push 0x1            ; Set file descriptor as 1 (stdout)
    mov eax, 0x4        ; Set system call 4 - Write
    push eax            ; Push the system call to stack
    int 0x80            ; Call
    add esp, 0x10       ; Clean up the stack

    mov eax, 1          ; Set call 1 - sys_exit
    mov ebx, 0          ; All went well
    int 0x80            ; Call 
```

我的问题是程序将 PID 打印为字符串而不是整数，这里也解释一下 GDB 中显示的相同地址，但输出格式不同。

```
String:  0x2016 <Pid>:  "z\035"
Hex:     0x2016 <Pid>:  0x00001d7a
Integer: 0x2016 <Pid>:  7546 
```

系统写入调用正在打印字符串，我需要它来打印整数。

有什么技巧可以做到这一点，还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:28:42.220

您可以将整数转换为字符串，然后打印字符串（使用`mov eax,4`... `int 0x80`，就像您现在所做的那样），或者，您可以使用`printf`with `call printf`，它需要`global main`（而不是`global start`），`extern printf`并使用`gcc`.

有关如何将整数转换为十进制数（字符串）的示例： [How do I print an integer in Assembly Level Programming without printf from the c library？](https://stackoverflow.com/questions/13166064/how-do-i-print-an-integer-in-assembly-level-programming-without-printf-from-the/13166463#13166463)

关于如何`printf`在 x86 程序集中使用的示例： [nasm display a dword with printf](https://stackoverflow.com/questions/15257224/nasm-displaying-a-dword-with-printf)

请注意，您需要**或****，** 以及`extern printf` **或** **，**具体取决于您的设置。`extern _printf` **`global main` **`global _main`****

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T22:28:46.720

**Linux 版本**

这是 James Parker 的代码转换为在**x86/x86_64 Linux**上运行的版本。

```
SECTION .data

    LookUpDig db "0123456789"             ; Translation Table
    PIDString db "PID: "
    PIDLength equ $-PIDString

SECTION .bss

    PID: resb 8                           ; Reserve space for result

SECTION .text

            global _start

    _start:
            mov     eax, 0x14             ; GET_PID call
            int     0x80                  ; Call
            mov     ebx, 0xA              ; Set divider to 10
            mov     ebp, PID+6            ; Save the address of PID+6 to EBP
            jnz     LoopMe                ; Run the loop to convert int to string

    LoopMe:
            div     ebx                   ; Divide the PID by 10
            mov     cl, [LookUpDig+edx]   ; Copy ASCII value to CL
            mov     [ebp], cl             ; Copy CL to PID buffer
            dec     ebp                   ; Move to next byte in the buffer
            xor     edx, edx              ; Clear the remainder, else weird results :)
            inc     eax                   ; Increase EAX tricking JNZ
            dec     eax                   ; Decrease to get back to original value
            jnz     LoopMe                ; Loop until EAX is zero (all integers converted)
            jz      PrintOut              ; When done call the print out function

    PrintOut:
            mov     edx, PIDLength        ; Push PIDString Length
            mov     ecx, PIDString        ; Push PIDString
            mov     ebx, 0x1              ; FD stdout
            mov     eax, 0x4              ; sys_write call
            int     0x80                  ; Call kernel

            mov     [PID+7], byte 0xA     ; Push a newline to PID string

            mov     edx, 0x8              ; Max length of 8 bytes
            mov     ecx, PID              ; Push PID value
            mov     ebx, 0x1              ; FD stdout
            mov     eax, 0x4              ; sys_write call
            int     0x80                  ; Call kernel

            mov     eax, 0x1              ; Set system_call
            xor     ebx,ebx               ; Exit_code 0
            int     0x80                  ; Call kernel 
```

**建造：**

```
nasm -f elf -o prnpid_32.o prnpid_32.asm
ld -o prnpid_32 prnpid_32.o                 # On native 32-bit machine
ld -m elf_i386 -o prnpid_32 prnpid_32.o     # On x86_64 
```

**输出：**

```
$ prnpid_32
PID: 1387 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:15:56.250

所以我终于弄清楚了问题所在。这是将来需要此功能的任何人的解决方案。

快速回顾一下，问题在于获取从系统调用 GET_PID 返回的整数并将其转换为字符串以供 SYS_WRITE 使用。

第一步是取整数并隔离每​​个数字；例如：

```
Returned PID: 60015 - Grab each integer own its own i.e. 5 1 0 0 6 
```

为了实现这一点，我使用 DIV 函数将整数除以 10，这将余数留在 EDX 中。如果我们看一下数学 60015/10 将导致 6001.5，所以余数 5 将存储在 EDX 中。然后可以使用循环来检索每个整数，直到它达到零，然后使用 JZ 退出循环。

下一步是获取每个整数并找到其 ASCII 码以存储到缓冲区中。为此，使用了转换表：

```
LookUpDig db "0123456789" 
```

获取存储在 EDX 中的数字并将其用作转换表的索引，这将检索该整数的 ASCII 版本以用于 sys_write。

```
mov cl, [LookUpDig+edx] 
```

获取 ASCII 值并将其插入结果缓冲区。

```
mov [ebp], cl 
```

将其放入循环中以从返回的整数构建字符串。

完整的程序应该为解决方案提供更多的上下文，我希望注释足够详细以解释每一行代码。

```
;*************************************************************
; Date    : 02/04/2013                                       *
; Compile : nasm -f macho -o pid.o space.asm                 *
; Link    : ld -macosx_version_min 10.7 -o pid pid.o         *          
; Descr.  : Prints the process PID, could be used in a       *
;           larger program.                                  *
; Nasm v. : NASM version 0.98.40                             *
;*************************************************************

SECTION .data

    LookUpDig db "0123456789"         ; Translation Table
    PIDString db "PID: "
    PIDLength equ $-PIDString

SECTION .bss

    PID: resb 8                       ; Reserve space for result

SECTION .text

global start

start:
    mov eax, 0x14             ; GET_PID call
int 0x80                  ; Call  
mov ebx, 0xA              ; Set divider to 10
mov ebp, PID+6            ; Save the address of PID+6 to EBP
jnz LoopMe                ; Run the loop to convert int to string

LoopMe: 
div ebx                   ; Divide the PID by 10
mov cl, [LookUpDig+edx]   ; Copy ASCII value to CL
mov [ebp], cl             ; Copy CL to PID buffer
dec ebp                   ; Move to next byte in the buffer
xor edx, edx              ; Clear the remainder, leave in for some weird results :)
inc eax                   ; Increase EAX tricking JNZ
dec eax                   ; Decrease to get back to original value
jnz LoopMe                ; Keep looping until EAX is zero (all integers converted)
jz PrintOut               ; When done call the print out function

PrintOut:
push PIDLength            ; Push PIDString Length
push PIDString            ; Push PIDString
push 0x1                  ; FD stdout
mov eax, 0x4              ; sys_write call
push eax                  ; Push call (BSD)
int 0x80                  ; Call
add esp, 0x10             ; Clear up the stack

mov [PID+7], byte 0xA     ; Push a newline to PID string

push 0x8                  ; Max length of 8 bytes
push PID                  ; Push PID value
push 0x1                  ; FD stdout
mov eax, 0x4              ; sys_write call
push eax                  ; Push call (BSD)
int 0x80                  ; Call
add esp, 0x10             ; Clean up stack

mov eax, 0x1              ; Set system_call
push 0x0                  ; Exit_code 0
int 0x80                  ; Call 
```

我希望这可以帮助将来遇到同样问题的其他人。****

# visual-studio-2010 - Adobe Reader X 插件适用于 Win7，而不是 XP？

> ID：15419202
> 
> 赞同：0
> 
> 时间：2013-03-14T20:08:25.663
> 
> 标签：visual-studio-2010, plugins, visual-studio-2005, windows-xp, adobe-reader

我们有一个专为 Reader X / XI 设计的托管 C++ Adob​​e Reader 插件。它在 Windows 7 中运行良好，但在 Windows XP 中会引发 COM 错误 - 未注册类。

奇怪的是，这只是在我们将项目从 vs2005 项目更新到 vs2010 之后才发生的。旧的 vs2005 插件工作得很好。有人知道为什么会这样吗？当我们迁移到 2010 时，我们只是使用了标准项目自动升级。所有其余代码都是相同的。

**编辑**：关于这个问题的更多说明

插件 DLL 本身加载得很好。只有当我们尝试通过 COM 互操作加载 .Net 4 dll 时，我们才遇到异常。

以前，我们尝试加载的 dll 是用 .net 2.0 编写的，并且在 Windows XP 中加载得很好。但是 .Net 4 dll 只会在 Win7 中加载。请注意，.Net 3.5 似乎与 2.0 一样工作。只有 .net 4 会中断（我们将完全相同的代码重新编译为 2.0、3.5 和 4.0 以进行检查）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:11:21.370

原来问题是 Adob​​e 的保护模式和尝试通过 COM 互操作加载 .Net 4 DLL 的组合，但仅限于 Windows XP。

奇怪的是...更改任何这些变量，一切正常。.Net 3.5 和 2.0 在保护模式下都可以正常加载。Windows 7 在保护模式下加载 .Net 4 dll 很好。

在 Adob​​e for Windows XP 中关闭保护模式可以解决问题，因此 DLL 可以正常加载。

我希望这可以帮助遇到此问题的其他人。

# ajax - 通过 Ajax 发送密码的安全性

> ID：15419205
> 
> 赞同：0
> 
> 时间：2013-03-14T20:08:41.133
> 
> 标签：ajax, security

是否可以传递这样的密码，或者方法应该是 POST 还是无关紧要？

```
xmlhttp.open("GET","pas123",true);
xmlhttp.send(); 
```

附加信息：我正在使用本地虚拟网络服务器构建它，所以我认为在我在真正的网络服务器上预付一些钱之前我不会拥有 https :-)

编辑：根据 Gumo 的链接`encodeURIComponent`应该被使用。我应该这样做`xmlhttp.send(encodeURIComponent(password))`还是会导致密码匹配错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:11:35.777

通过 HTTPS 发布它们，而不需要关心它；）

但请注意，由于相同的来源策略，您也需要使用 https 访问发送该数据的页面。

关于您的金钱*限制*，您可以使用自签名证书，也可以使用来自[https://startssl.com/](https://startssl.com/)的证书，您可以在其中免费获得证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:11:00.993

所有 HTTP 请求都以文本形式发送，因此它是 GET 还是 POST 或 PUT 的细节......并不重要。传输安全性重要的是您通过 SSL 发送它（当然，在另一端安全地处理它）。

您可以使用自签名证书，直到有更好的东西可用。如果您现在不考虑 https 进行设计，以后将是一个特别的地狱:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:13:51.350

没关系，在传统 Web 表单上不使用 GET 的主要原因是地址栏中可以看到详细信息，这在使用 AJAX 时不是问题。所有 HTTP 请求（GET/POST/ect）都以纯文本形式发送，因此可以使用网络跟踪软件（例如 Wireshark）获取以防止这种情况，您需要使用 HTTPS

# git - Git 中 ident 样式字符串的不同方法？

> ID：15419206
> 
> 赞同：5
> 
> 时间：2013-03-14T20:08:44.870
> 
> 标签：git, cvs, checkin, ident

我正在计划我的公司从 CVS 过渡到 Git，并且某些工程师希望我们仍然可以使用 CVS 关键字字符串，例如`$Id: $`. 我已经阅读了有关使用**ident**设置实现这一点的所有内容`.gitattributes`，并且我理解为什么它是不可取的，尽管对于较小的源代码树可能是可行的。（我们的资源很大，所以我认为这是不可能的。）

我们的工程师并不特别关心文件中的 SHA1 哈希值。他们只想知道：

1.  最后修改日期
2.  提交者的名字
3.  可能是提交消息

他们发现在浏览代码时在文件头中查看此信息非常方便，我对此无可争辩。

**我想知道的是：**

有没有办法在 git commit 之前对所有暂存文件进行信息标记？换句话说，要在`$Id: $`提交的文件的工作副本上运行一个 perl 命令——替换为所需的信息块？

这根本不需要任何`.gitattributes`操作。Git 只需要知道如何合并两个这样的信息块，最好选择后一个。加盖信息只是新创建版本中的一个文件更改。

我在 pre-commit 钩子中查看了这样做，但它似乎有不同的意图——不是为了编辑文件，只是为了检查它们。我说得对吗？

没有人尝试过这种方法吗？对我来说，这似乎比每次 git 更改版本时都尝试过滤所有源文件更简单，就像它听起来的那样`.gitattributes`。

非常感谢任何建议/警告/指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:57:56.043

*RCS（以及 CVS）在checkout*时进行扩展`$Id:$`等，这些不在保存的文件中。他们不可能真的是，有人可能会过来并将 version 重命名为 plain 。如果有人想知道从哪里来，那么回答得很好，比 RCS 所能提供的*更多细节。*它是一个本地命令，无需访问 CVS 服务器（因此在任何地方都可用，并且是即时的）。*`1.8.2-rc10``1.8.2``file``git log file`*`git`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T01:24:02.833

[git 文档](http://git-scm.com/documentation)的[关键字扩展](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion)部分解释了如何进行干净的关键字扩展。

用于扩展您想要的内容的 ruby​​ 脚本将是这样的（未经测试）

```
#! /usr/bin/env ruby
data = STDIN.read
last_info = `git log --pretty=format:"%ad %cn %s" -1`
puts data.gsub('$Last$', '$Last: ' + last_info.to_s + '$') 
```

设置过滤器

```
$ git config filter.last_expander.smudge expand_last_info
$ git config filter.last_expander.clean 'perl -pe "s/\\\$Last[^\\\$]*\\\$/\\\$Last\\\$/"' 
```

设置 .gitattributes

```
echo '*.txt filter=last_expander' >> .gitattributes 
```

注意：（正如 vonbrand 所说）这给了你什么，并且你很可能想要什么，是*结帐*时的字段扩展和提交时的字段删除。但效果是您的工程师将能够读取其工作目录中签出文件中的字段。这不是他们想要的吗？这不会用任何冗余元数据混淆实际版本化的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T01:49:27.250

这就是你解决这个问题的方法：

1.  添加以下预提交挂钩：

    ```
    #!/bin/sh
    git diff --cached --name-only -z --diff-filter=ACM |
            xargs -r0 .filters/keywords --
    git diff --cached --name-only -z --diff-filter=ACM |
            xargs -r0 git add -u -v -- 
    ```

2.  添加以下 commit-msg 挂钩：

    ```
    #!/bin/sh
    awk '!/^[[:space:]]*(#|$)/{exit f++}END{exit !f}' "$1" && exit
    # NOTREACHED unless commit was aborted
    git diff --cached --name-only -z --diff-filter=ACM |
            xargs -r0 .filters/keywords -d --
    git diff --cached --name-only -z --diff-filter=ACM |
            xargs -r0 git add -u -v -- 
    ```

3.  下载“.filters/fraubsd-keywords”，但将文件重命名为“keywords”：

    [https://raw.githubusercontent.com/freebsdfrau/FrauBSD/master/.filters/fraubsd-keywords](https://raw.githubusercontent.com/freebsdfrau/FrauBSD/master/.filters/fraubsd-keywords)

4.  编辑“关键字”，在顶部的 CONFIGURATION 部分进行更改：

    *   FrauBSD 到标题
    *   _FrauBSD 到 _Header

之后，每次你做一个`git commit`文本`$Header$`和/或`$Header: ... $`将被翻译成`$Header: file YYYY-MM-DD HH:MM:SS GMTOFFSET committer $`

注意：您可能需要修改“关键字”脚本的一小部分才能对或多或少的文件类型进行操作。在撰写本文时，它仅对“ASCII 文本”或“shell 脚本”文件进行操作。**

# java - Simple-XML - 如何序列化集合中的派生类？

> ID：15419207
> 
> 赞同：2
> 
> 时间：2013-03-14T20:08:45.883
> 
> 标签：java, derived-class, simple-framework

我想序列化一个对象层次结构，包括从基类“事物”派生的对象列表。这很好用，包括反序列化 - 但 XML-Simple 坚持编写一个属性来指定实际使用的 Java 类

当我用下面的java代码创建一个xml文件时，内容是这样的：

```
 <example1>
       <things>
          <fruit class="com.mumpitz.simplexmltest.Apple" id="17">
             <sugar>212</sugar>
          </fruit>
          <fruit class="com.mumpitz.simplexmltest.Orange" id="25" weight="11.2"/>
       </things>
    </example1> 
```

但这不是我想要的。我想拥有

```
 <example1>
       <things>
          <apple id="17">
             <sugar>212</sugar>
          </apple>
          <orange id="25" weight="11.2"/>
       </things>
    </example1> 
```

没有类属性的“apple”和“orange”元素，而不是具有此类属性的“fruit”。这可能吗？

（第二个 xml 符合现有架构；添加额外属性不是一种选择）

这是代码：

```
 package com.mumpitz.simplexmltest;

    import java.io.File;
    import java.util.ArrayList;

    import org.simpleframework.xml.Attribute;
    import org.simpleframework.xml.Element;
    import org.simpleframework.xml.ElementList;
    import org.simpleframework.xml.Root;
    import org.simpleframework.xml.Serializer;
    import org.simpleframework.xml.core.Persister;

    class Fruit {
        @Attribute(name = "id")
        protected final int id;
        Fruit(
                @Attribute(name = "id")
                int id) {
            this.id = id;
        }
        int getObjectId() {
            return id;
        }
    }

    @Root
    class Apple extends Fruit {
        private final int sugar;
        @Element(type = Fruit.class)
        public Apple(
                @Attribute(name = "id")
                int id,
                @Element(name = "sugar")
                int sugar) {
            super(id);
            this.sugar = sugar;
        }

        @Element(name = "sugar")
        public int getSugar() {
            return this.sugar;
        }

        @Override
        public String toString() {
            return "id: " + id + ", sugar: " + sugar;
        }
    }

    @Root
    class Orange extends Fruit {
        @Attribute
        public double weight;

        public Orange(
                @Attribute(name = "id")
                int id) {
            super(id);
        }

        @Override
        public String toString() {
            return "id: " + id + ", weight: " + weight;
        }
    }

    @Root
    public class Example1 {
        @ElementList
        public ArrayList<Fruit> things = new ArrayList<Fruit>();

        @Override
        public String toString() {
            StringBuilder sb = new StringBuilder();
            sb.append("things:\n");
            for (int i=0; i<things.size(); i++) {
                sb.append(" " + things.get(i).toString() + "\n");
            }
            return sb.toString();
        }

        //////////////////////////////////

        static Example1 createDummy() {
            Example1 d = new Example1();
            d.things.add(new Apple(17, 212));
            Orange or = new Orange(25);
            or.weight = 11.2;
            d.things.add(or);
            return d;
        }

        static String msg;
        static Example1 res;

        static public String getMessage() {
            String m = msg;
            msg = null;
            return m;
        }

        static public boolean write(String path) {
            Serializer serializer = new Persister();
            Example1 example = Example1.createDummy();
            File result = new File(path);

            try {
                serializer.write(example, result);
            } catch (Exception e) {
                e.printStackTrace();
                msg = e.getMessage();
                return false;
            }
            return true;
        }

        static public boolean read(String path) {
            Serializer serializer = new Persister();
            File source = new File(path);

            try {
                res = serializer.read(Example1.class, source);
            } catch (Exception e) {
                e.printStackTrace();
                msg = e.getMessage();
                return false;
            }
            return true;
        }

        public static Object getResult() {
            return res;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T06:38:10.413

几个小时后，我找到了解决方案。你只需要

1.  阅读手册
2.  使用 @ElementListUnion 注释

    ```
    package com.mumpitz.simplexmltest;

    import java.io.File;
    import java.util.ArrayList;
    import java.util.List;

    import org.simpleframework.xml.Attribute;
    import org.simpleframework.xml.Element;
    import org.simpleframework.xml.ElementList;
    import org.simpleframework.xml.ElementListUnion;
    import org.simpleframework.xml.Root;
    import org.simpleframework.xml.Serializer;
    import org.simpleframework.xml.core.Persister;

    // the base class
    @Element
    class Thing {

        static int count=0;

        Thing() {
            this.id = ++count;
        }

        @Attribute
        protected int id;

        public int getId() {
            return id;
        }
    }

    // first derived class
    @Element
    class Car extends Thing {
        @Attribute
        private String name;

        Car(@Attribute(name="name") String name) {
            this.name = name;
        }

        public String getName() {
            return name;
        }
        @Override
        public String toString() {
            return "ID: " + id + " Car: " + name;
        }
    }

    // second derived class
    @Element
    class House extends Thing {
        @Attribute
        private int price;

        House(@Attribute(name="price") int price) {
            this.price = price;
        }

        public int getPrice() {
            return this.price;
        }
        @Override
        public String toString() {
            return "ID: " + id + " House: " + price;
        }
    }

    // a class with a list of base class instances
    @Root(name="ListOfThings")
    public class Example4 {

        // specify the derived classes used in the list
        @ElementListUnion({
            @ElementList(entry="house", inline=true, type=House.class),
            @ElementList(entry="car", inline=true, type=Car.class)
        })
        private ArrayList<Thing> list = new ArrayList<Thing>();

        public void add(Thing t) {
            list.add(t);
        }

        public List<Thing> getProperties() {
            return list;
        }

        @Override
        public String toString() {
            StringBuilder sb = new StringBuilder();
            sb.append("Example4 contains " + list.size() + " elements:\n");
            for (Thing t : list) {
                sb.append(" " + t.toString() + "\n");
            }
            return sb.toString();
        }

        //////////////////////////////////
        // test code
        //////////////////////////////////
        static String msg;
        static Example4 res;

        static public String getMessage() {
            String m = msg;
            msg = null;
            return m;
        }

        static private Example4 createDummy() {
            Example4 d = new Example4();
            d.add(new Car("Mercedes"));
            d.add(new House(34000000));
            d.add(new Car("VW"));
            d.add(new House(230000));
            return d;
        }

        //////////////////////////////////
        // serialize / deserialize
        //////////////////////////////////
        static public boolean write(String path) {

            Serializer serializer = new Persister();
            File result = new File(path);
            Example4 example = Example4.createDummy();

            try {
                serializer.write(example, result);
            } catch (Exception e) {
                e.printStackTrace();
                msg = e.getMessage();
                return false;
            }
            return true;
        }

        static public boolean read(String path) {
            Serializer serializer = new Persister();
            File source = new File(path);

            try {
                res = serializer.read(Example4.class, source);
            } catch (Exception e) {
                e.printStackTrace();
                msg = e.getMessage();
                return false;
            }
            return true;
        }

        public static Object getResult() {
            return res;
        }
    } 
    ```

# auto-increment - 计数器类扩展

> ID：15419208
> 
> 赞同：0
> 
> 时间：2013-03-14T20:09:09.137
> 
> 标签：auto-increment

我在寻找一种创建 Counter() 类的优雅方法时遇到问题，该类可以：

*   输入任意数量的键并根据此键列表返回嵌套字典。
*   这个嵌套字典的增量也是任意的。

例如：

```
counter = Counter()
for line in fin:
    if a:
        counter.incr(key1, 1)
    else:
        counter.incr(key2, key3, 2)
print counter 
```

理想情况下，我希望得到的结果如下所示：{key1 : 20, {key2 : {key3 : 40}}}。但是我被困在从键列表中创建这个任意嵌套字典。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:18:41.850

有两种可能性。

首先，您总是可以通过使用`Counter`带有由 s 组成的“键路径”的平面来伪造嵌套键的东西`tuple`：

```
counter = Counter()
for line in fin:
    if a:
        counter.incr((key1,), 1)
    else:
        counter.incr((key2, key3), 2) 
```

但是你需要编写一个`str`-replacement ——或者，更好的是，一个实现`__str__`. 当您使用它时，您可以轻松编写一个`incr`包装器，让您可以使用您想要的 API：

```
def incr(self, *args):
    super().incr(args[:-1], args[-1]) 
```

或者，您可以`Counter`在嵌套的`dict`. 的代码`Counter`是用纯 Python 编写的，[源代码](http://hg.python.org/cpython/file/3.3/Lib/collections/__init__.py#l384)非常简单易读。

从您的代码来看，您似乎不需要访问`counter[key2][key3]`任何地方的东西，这意味着第一个可能会更简单，更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:19:12.373

对象中唯一可以存在的值类型`Counter`是 int，您将无法使用`Counter`.

这是使用普通字典 ( ) 执行此操作的一种方法`counter = {}`。首先，要更新增量单个键的值：

```
counter[key1] = counter.setdefault(key1, 0) + 1 
```

或者对于任意键列表来创建嵌套结构：

```
tmp = counter
for key in key_list[:-1]:
    tmp = tmp.setdefault(key, {})
tmp[key_list[-1]] = tmp.setdefault(key_list[-1], 0) + 1 
```

我可能会把它变成以下函数：

```
def incr(counter, val, *keys):
    tmp = counter
    for key in keys[:-1]:
        tmp = tmp.setdefault(key, {})
    tmp[keys[-1]] = tmp.setdefault(keys[-1], 0) + val 
```

例子：

```
>>> counter = {}
>>> incr(counter, 1, 'a')
>>> counter
{'a': 1}
>>> incr(counter, 2, 'a')
>>> counter
{'a': 3}
>>> incr(counter, 2, 'b', 'c', 'd')
>>> counter
{'a': 3, 'b': {'c': {'d': 2}}}
>>> incr(counter, 3, 'b', 'c', 'd')
>>> counter
{'a': 3, 'b': {'c': {'d': 5}}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:20:18.887

您可以子类`dict`化并创建自己的嵌套结构。

这是我编写此类课程的尝试：

```
class Counter(dict):
    def incr(self, *args):
        if len(args) < 2:
            raise TypeError, "incr() takes at least 2 arguments (%d given)" %len(args)

        curr = self

        keys, count = args[:-1], args[-1]

        for depth, key in enumerate(keys, 1):
            if depth == len(keys):
                curr[key] = curr.setdefault(key, 0) + count
            else:
                curr = curr.setdefault(key, {})

counter = Counter()

counter.incr('key1', 1)
counter.incr('key2', 'key3', 2)
counter.incr('key1', 7)
print counter #{'key2': {'key3': 2}, 'key1': 8} 
```

# javascript - 使用未解释的 HTML 获取 HTML 元素的原始文本内容

> ID：15419209
> 
> 赞同：6
> 
> 时间：2013-03-14T20:09:12.247
> 
> 标签：javascript, html

我已经用谷歌搜索了我的大脑，无法弄清楚如何使这项工作。这是我正在尝试做的事情：

HTML：

```
<div id=derp>&quot;Hi, my name is..&quot;</div> 
```

Javascript：

```
var div = document.getElementById('derp');
alert(div.innerHTML);
alert(div.innerText);
alert(div.textContent); 
```

所有这些警报都解释并返回结果字符串中的`&quot;`as `"`。我想得到`&quot;`未经解释的原始文本。

他们都返回：

```
"Hi, my name is.." 
```

当我*想得到*：

```
&quot;Hi, my name is..&quot; 
```

有没有办法做到这一点？最好不要尝试使用正则表达式来替换`"`with的每个实例`&quot;`。

关于我正在尝试做的事情，这是一个很长的故事，但是`"`由于需要进行其他正则表达式匹配/解析，因此简单地使用 replace() 来搜索和替换每个实例将是一个令人头疼的实现。

提前感谢任何可以挽救我理智的 Javascript 向导！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T20:43:30.823

引用[bobince](https://stackoverflow.com/questions/3905219/use-javascript-to-get-raw-html-code)

> 当您向浏览器询问元素节点的 innerHTML 时，它不会为您提供被解析以生成该节点的原始 HTML 源，因为它不再具有该信息。相反，它从存储在 DOM 中的数据生成新的 HTML。浏览器决定如何格式化该 HTML 序列化；不同的浏览器会产生不同的 HTML，而且很可能与您最初格式化它的方式不同。

总之：`innerHTML/innerText/text/textContent/nodeValue/indexOf`，他们都不会给你未解析的文本。

唯一可行的方法是使用正则表达式，或者您可以将 ajax 发布到页面本身，但这是一种不好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:16:03.083

几天前我准备了一个带有一些不同方法的垃圾箱：http: [//jsbin.com/urazer/4/edit](http://jsbin.com/urazer/4/edit)

我最喜欢的：

```
var text = "<a href='#' title=\"Foo\"></a>");
var html = text.replace(/[<&>'"]/g, function(c) {
  return "&#" + c.charCodeAt() + ";";
}); 
```

# ios - 使用 Graph API 或 FQL 将所有照片包含在单个 Facebook 提要帖子中？

> ID：15419211
> 
> 赞同：5
> 
> 时间：2013-03-14T20:09:29.150
> 
> 标签：ios, facebook, facebook-graph-api, facebook-fql

我正在使用 Facebook 图形 API 来获取我最近的帖子和带有“graph.facebook.com/me/feed”的提要项目。我遇到的问题是，当提要对象是包含多张照片的帖子时，结果中的数据仅包含其中一张照片的信息，我似乎无法找到将其他照片包含在帖子中的方法。

来自 feed 对象的一些细节：

```
"type": "photo" 
"status_type": "mobile_status_update"
"picture": "http://the_url_to_the_one_photo_it_does_return.jpg" 
"message": "The message/note attached with the photos for the post",
"id": "xxxxxxxx_xxxxxxxxxx" 
"object_id": "yyyyyyyyyyyyy" 
```

我尝试通过请求 (graph.facebook.com/xxxxxx_xxxxxxxxxxx) 发送“id”（帖子 ID），希望它能给我帖子中包含的所有照片的详细信息，但事实并非如此。也尝试使用“object_id”，但看起来这只是对应于单个包含照片对象的 id。

我整天都在研究 FQL。它对我来说仍然是新的，但我似乎已经掌握了基础知识，而且似乎如果有任何希望找到这个，那就是以某种方式通过 FQL 查询从帖子中传递“id”。

有谁知道一种方法来获取多照片提要帖子中包含的所有照片的详细信息？如果这是唯一的方法，我可以使用 graph 或 fql 的肮脏解决方法。谢谢！顺便说一句，我正在使用 iOS/Objective-C。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-01T23:54:34.957

我已经回答了[这篇文章](https://stackoverflow.com/a/25614053/2274225)，其中包含有关如何在不使用 FQL 的情况下执行此操作的信息，因为它已被弃用。尽管这是一个相当古老的问题，但我还是想为可能正在寻找像我这样的解决方案的人提供答案。

# openssl - 使用 fips 模块时的 Openssl 交叉编译链接问题

> ID：15419214
> 
> 赞同：4
> 
> 时间：2013-03-14T20:09:37.530
> 
> 标签：openssl, cross-compiling, fips

我正在尝试将 Openssl FIPS 模块添加到运行 Linux 的现有嵌入式 powerpc 系统中。它大部分进展顺利，但我被困在链接阶段发生的问题上。如果我在配置 openssl 时没有禁用某些密码，那么我会收到如下链接错误：

```
passwd.o: In function `do_passwd':
passwd.c:(.text+0x70c): undefined reference to `DES_crypt'
genrsa.o: In function `genrsa_main':
genrsa.c:(.text+0x528): undefined reference to `EVP_des_cbc'
gendsa.o: In function `gendsa_main':
gendsa.c:(.text+0x3d8): undefined reference to `EVP_des_cbc'
speed.o: In function `speed_main':
speed.c:(.text+0x1078): undefined reference to `private_DES_set_key_unchecked'
speed.c:(.text+0x108c): undefined reference to `private_DES_set_key_unchecked'
speed.c:(.text+0x10a0): undefined reference to `private_DES_set_key_unchecked'
speed.c:(.text+0x1d1c): undefined reference to `DES_ncbc_encrypt'
speed.c:(.text+0x1e80): undefined reference to `DES_ede3_cbc_encrypt'
speed.c:(.text+0x3ec4): undefined reference to `EVP_mdc2'
speed.c:(.text+0x401c): undefined reference to `DES_options' 
```

在这种情况下，除非我在配置选项中指定“no-des”，否则我会收到这些错误，但同样的问题也适用于其他密码，例如 cast、seed 和 rc2（以及其他密码）。

一些现有的代码库引用了其中一些密码函数（尤其是 DES），因此完全删除它们并不理想。我的理解是，如果启用了 FIPS 模式，那么库将在运行时阻止使用这些非 FIPS 密码（我认为是通过生成错误），并不是所有非 FIPS 密码都需要在编译时禁用-时间。

以下是我配置 openssl-fips 和 openssl 的方式：

openssl-fips：

```
MACHINE=ppc \
RELEASE=2.6.11 \
SYSTEM=linux2 \
ARCH=ppc \
CROSS_COMPILE="powerpc-405-linux-gnu-" \
HOSTCC=gcc \
./config 
```

打开ssl：

```
CC="gcc [snipped]" \
FIPSDIR=$(ROOTPREFIX)$(PREFIX)/usr/local/ssl/fips-2.0 \
./Configure \
linux-ppc \
no-idea \
no-rc5 \
no-mcs2 \
no-hw \
no-krb5 \
no-seed \
no-rc2 \
no-bf \
no-cast \
--prefix=/usr \
threads \
shared \
fips \
--cross-compile-prefix=powerpc-405-linux-gnu-; \ 
```

# ios - 定义类的“正确”方式 - 属性与方法

> ID：15419219
> 
> 赞同：0
> 
> 时间：2013-03-14T20:10:11.767
> 
> 标签：ios, objective-c

这是一个观察和一个问题：

我正在将一些 json 数据加载到一个类中（json 已经转换为 NSDictionary）。这些值将从外部只读：

```
@interface Checklist
-(id)initWithJSON:(NSDictionary *)json;
-(NSInteger)checklist_id;
-(NSString *)checklist_name;
etc....
@end 
```

使用 .m 文件中的相应方法体。

作为测试，我为另一个数据元素创建了一个类：

```
@interface ChecklistItem
-(id)initWithJSON:(NSDictionary *)json;
@property (readonly) NSInteger item_id;
@property (readonly) NSString *item_name;
@end 
```

在功能上，这两个类在@implementation 中具有相似的方法。在这两种情况下，它们基本上都从 json 中提取适当的值并返回结果。就程序的其余部分而言，这两种方法似乎是可以互换的。

所以我的问题是：

哪种方法最好使用？

我发现任何一种方式都具有同样的可读性，到目前为止，我找不到任何代码理由来选择一种方式而不是另一种方式。我可以看到第二个选项很好，因为它记录了 json。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:24:41.817

> ```
> -(NSInteger)checklist_id;
> -(NSString *)checklist_name; 
> ```

这不是标准的 Objective-C 命名。如果您想正确地做事，请遵循平台约定。Apple 在其编码指南文档中记录了这一点。

> 哪种方法最好使用？

就 Objective-C 而言，它们是等价的。与手动创建方法相比，属性语法在更高级别上表达了您的意图，因此我更喜欢这种方法。它的代码也更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:34:12.777

[您应该使用属性，一旦您使用KVO](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)，它们就会派上用场。

您还可以定义公共只读属性并在类扩展中使用仅在同一类中可用的读写属性覆盖它们。如果你试图实现类似的东西，你将不得不处理私有的辅助方法——代码变得丑陋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:36:55.740

现在这不那么重要了，因为 ARC 将清理在 setter 内部管理的内存，但这仍然是非常好的实践。与始终通过 setter 获得的安全性相比，调用 setter 方法的性能开销也可以忽略不计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T01:00:32.390

这是一个主观问题，你只会得到意见，但这是我的：

只读属性只会为您编写吸气剂。如果您没有在 .m 文件或任何地方正确地编写私有读写，而只是直接设置 ivar，您甚至不会获得键调用的意志/确实更改值，并且还必须自己调用这些值。

```
@interface ChecklistItem ()
    @property (readwrite) NSInteger item_id;
    @property (readwrite) NSString *item_name;
@end 
```

要在对象内访问它们符合 KVO，您必须执行以下操作：

```
self.item_id = 13; 
```

并不是：

```
_item_id = 13; 
```

当然，您可以只使用 getter 方法：

```
-(NSInteger)checklist_id;
-(NSString *)checklist_name; 
```

只需将所有更改包装在您的 KVO 方法中：

```
[self willChangeValueForKey:@"checklist_id"];
_item_id = 13;
[self didChangeValueForKey:@"checklist_id"]; 
```

这只是一种编码风格选择，有时会利用编译器为您编写的内容。但任何一个选项都一样。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T20:27:43.063

如果这些值是只读的，我认为您希望它们作为方法而不是作为只读属性，以避免可能会设置这些值的任何混淆。当然，除非您希望订阅者能够使用点符号来访问属性，但如果您只是返回 NSDictionary 中的值，则方法形式会更好，因为您不必保留另一个副本数据。

# javascript - 如何在 Node JS 中编写非阻塞 if 语句？

> ID：15419220
> 
> 赞同：2
> 
> 时间：2013-03-14T20:10:16.493
> 
> 标签：javascript, node.js, blocking, nonblocking

我在 php 中有一个 if 语句：

```
if ( $isTrue && db_record_exists($id)) { ... } 
else { ... }; 
```

第一个条件是真/假布尔检查。

第二个条件调用一个函数来查看数据库表中是否存在行并返回真或假。

我想在 Node JS 中重写这个条件，使其成为非阻塞的。

我已经重写了 db_record_exists 如下...

```
function db_record_exists(id, callback) {
  db.do( "SELECT 1", function(result) { 
    if (result) { callback(true); }
    else { callback(false); }
  );
} 
```

...但我看不出如何通过布尔检查将其合并到更大的 if 语句中。例如，以下语句没有意义：

```
if (isTrue and db_record_exists(id, callback)) {
...
} 
```

写这个的“节点”方式是什么？

任何建议将不胜感激。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T20:18:00.470

首先检查变量，然后检查回调内部异步调用的结果。

```
if (isTrue) db_record_exists(id, function(r) {
    if (r) {
        // does exist
    } else nope();
});
else nope();

function nope() {
    // does not exist
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:24:00.053

您将需要对 if 和 else 部分使用回调。然后“嵌套”和条件：

```
if ($isTrue) {
    db_record_exists(id, function(result) {
        if (result)
            doesExist();
        else
            doesntExist();
    });
else
   doesntExist(); 
```

为方便起见，您可以将所有内容包装在一个辅助函数中（如果您需要多次，请放入库中）：

```
(function and(cond, async, suc, err) {
    if (cond)
        async(function(r) { (r ? suc : err)(); });
    else
        err();
})($isTrue, db_record_exists.bind(null, id), function() {
    …
}, function() {
    …
}); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-14T20:12:35.567

也许这样？

```
function db_record_exists(id, callback) {
  db.do( "SELECT 1", function(result) { callback(result ? true : false); });
} 
```

# php - 在 php 中格式化 curl 结果

> ID：15419223
> 
> 赞同：2
> 
> 时间：2013-03-14T20:10:28.050
> 
> 标签：php, json, curl

下面我有一段代码通过 API 返回一些信息。

```
$page = 'http://api.duedil.com/sandbox/v2/company/03977902.json?    fields=get_all&api_key=***********';
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $page);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch); 
```

这会打印出以下结果[http://www.visitrack.co.uk/testdata.php](http://www.visitrack.co.uk/testdata.php)

我想要做的是将结果拆分为单个变量。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:49:02.987

这样的事情应该可以解决问题：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $page);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // forces curl_exec() to return page as a string
$json = curl_exec($ch);
curl_close($ch);
$data = json_decode($json, TRUE); // parse json string to array
print_r($data); 
```

# android - 从 NFC 启动的活动/应用程序永远不会出现在最近的应用程序列表中

> ID：15419226
> 
> 赞同：4
> 
> 时间：2013-03-14T20:10:34.100
> 
> 标签：android, android-activity, nfc, intentfilter, android-recents

我正在开发一个针对 ICS+ 手机的应用程序。

在应用程序中，我有一个启动画面，以及可以从启动画面或通过 NFC 触摸启动的其他几个屏幕。我的一项活动包含以下意图过滤器：

```
 <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="application/com.myapp.thing.android.beam.ip" />
        </intent-filter> 
```

由于某种原因，我无法弄清楚，每当启动包含上述意图过滤器的活动时，当用户按下“主页”按钮时，该活动都不会出现在“最近的应用程序”列表中。通过调试器，我已经验证它没有被破坏，只是停止了。

如果 Splash 屏幕在 ThingActivity 之前打开，则 Splash 将显示在最近的应用程序列表中，即使按下 Home 按钮时它不是最上面的活动。单击最近应用列表中的 Splash 将显示 Splash，而不是之前位于顶部的活动。尽管仍在 bg 中运行线程和接收器，但启动屏幕顶部的任何活动似乎都“丢失”了。

更奇怪的行为是，此行为也适用于从包含 NFC 意图过滤器的活动启动的任何活动，或从这些活动启动的任何活动等。

如果我删除意图过滤器，此行为就会消失，并且任何位于顶部的活动都将始终显示在“最近的应用程序”列表中，但会损坏，因为 NFC 是一项核心功能。

我的完整清单如下：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myapp.thing"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="16" />
<!-- Permission required to use the TCP transport -->
<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" >
</uses-permission>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" >
</uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" >
</uses-permission>
<!-- Permission required to use the Bluetooth transport -->
<uses-permission android:name="android.permission.BLUETOOTH" >
</uses-permission>
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" >
</uses-permission>
<uses-permission android:name="android.permission.BROADCAST_STICKY" >
</uses-permission>
<uses-permission android:name="android.permission.NFC" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
</uses-permission>
<uses-permission android:name="android.permission.WAKE_LOCK" />

<!-- RECORD_AUDIO is needed to create an audio recorder -->
<uses-permission android:name="android.permission.RECORD_AUDIO" >
</uses-permission>

<!-- MODIFY_AUDIO_SETTINGS is needed to use audio effects such as environmental reverb -->
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" >
</uses-permission>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".ui.SplashActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.myapp.thing.ui.ReceiverActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="com.myapp.thing.ui.BaseActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="com.myapp.thing.ui.BroadcasterActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="com.myapp.thing.ui.ChooseFileActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name="com.myapp.thing.ui.ThingActivity"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="application/com.myapp.thing.android.beam.ip" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND_MULTIPLE" />
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="audio/*" />
        </intent-filter>
    </activity>

    <service
        android:name="com.myapp.thing.service.ThingService"
        android:label="ThingService" >
    </service>
</application> 
```

为什么包含此意图过滤器会阻止我的应用程序出现在最近的应用程序列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:30:49.903

我必须承认，我不理解所有描述的行为。Android 如何处理活动和任务可能非常棘手。一条可能至关重要的信息是，当您的 Activity 通过 NFC Intent 启动时，它将作为单独的任务启动。我怀疑这与您观察到的行为有关。

# mysql - MySQL触发器将所有字段值复制到另一个表，如何？

> ID：15419227
> 
> 赞同：0
> 
> 时间：2013-03-14T20:10:34.707
> 
> 标签：mysql, triggers

我有 2 个相同的表（100% 相同），

```
DELIMITER $$

CREATE
/*[DEFINER = { user | CURRENT_USER }]*/
TRIGGER `db`.`new_user` AFTER INSERT
ON `db`.`user`
FOR EACH ROW BEGIN
INSERT INTO db2.`users` COPY ALL INSERTED DATA
END$$

DELIMITER ; 
```

INSER 查询应该是什么样子？我是否必须一一指定所有字段名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:33:25.697

由于`NEW`不是行标识符，而是引用触发器操作的行中特定列的语法方式，因此您需要指定列名

```
INSERT INTO db2.`users` VALUES(NEW.id, NEW.username, ...); 
```

# css - LessCSS : 变量前面的 ID

> ID：15419231
> 
> 赞同：1
> 
> 时间：2013-03-14T20:10:47.773
> 
> 标签：css, variables, less

我的网站有一个字体大小的全局变量，如下所示：

```
@default-fontsize : 12px; 
```

今天我了解到我的项目也将使用阿拉伯语和中文，并且这两个站点的字体大小必须增加 2px。这将导致：

```
@default-fontsize : 14px; 
```

因为我不想更改我的变量，所以我在 body 标签上放了一个 ID，我想这样做，但它不起作用：

```
#foreign-language { font-size: (@default-fontsize + 2); } 
```

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:38:47.753

如果我理解正确，您真的不想将 id 定位为仅更改其大小，这就是您的原始代码...

```
#foreign-language { font-size: (@default-fontsize + 2); } 
```

...确实，通过将 css 生成为：

```
#foreign-language {
  font-size: 14px;
} 
```

我相信您真正想要的是更改它，`@default-fontsize`以便它在您的 LESS 代码中传播到其他地方。现在，您不能通过使用 id 来做到这一点，因为当代码查看`body`元素上的 id 时，LESS 已经编译为静态 CSS。您需要已经知道在编译阶段是否要向浏览器提供一组外语准备的 CSS。

现在，您可以使代码灵活，以便一旦您知道是否正在修改它，您就可以告诉它更改值。你可以用 mixin 做这样的事情：

```
.setFontSize(@addSize: 0) { 
  @default-fontsize: 12px + @addSize;
} 
```

然后只调用以下两个中的一个，具体取决于您正在处理的语言集：

```
.setFontSize(); //do this normally
.setFontSize(2); //do this to increase it for those you need to 
```

然后在需要的地方使用变量：

```
body {
  font-size: @default-fontsize;
} 
```

同样，这不是可以根据身体是否有`foreign-language`id 使用 LESS “即时”完成的事情。相反，如果你知道你正在处理外语，你需要告诉 LESS 以不同的方式编译。您可以设置一个全局变量，例如：

```
@addFontSize: 0; //change to 2 when dealing with a foreign language 
```

然后只需像这样对 mixin 进行一次调用：

```
.setFontSize(@addFontSize); //will change based off your global variable setting 
```

# cocos2d-iphone - Box2d 如何创建滑块平台

> ID：15419235
> 
> 赞同：-2
> 
> 时间：2013-03-14T20:10:57.397
> 
> 标签：cocos2d-iphone, box2d

如何在 Box2d 中创建滑块平台？我可以像音量控制器一样左右移动的平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:17:03.490

```
 b2PrismaticJointDef jointDef;
    jointDef.Initialize(fixture->GetBody(), groundBody, fixture->GetBody()->GetWorldCenter(), b2Vec2(0.5f,0.0f));
    jointDef.maxMotorForce = 500.0;
    jointDef.enableMotor = true;
    jointDef.lowerTranslation = -2.5f;
    jointDef.upperTranslation =  2.5f;
    jointDef.enableLimit = true; 
```

# ubuntu - 为 Grub 2 引导加载程序添加触摸灵敏度？

> ID：15419236
> 
> 赞同：3
> 
> 时间：2013-03-14T20:10:59.463
> 
> 标签：ubuntu, touch, bootloader, integrate

我想知道 Ubuntu 13.04 中存在哪些允许与 Grub2 集成的库以及有关它的更多详细信息（即语言、开发阶段、开发人员等），或者如果无法做到这一点，为什么？

我还认为可以在[Surface Pro](https://askubuntu.com/q/265644/88546)架构中使用本机设备代码，但对如何开始没有经验。如果这是可能的，请告诉我，拜托！

* * *

**编辑：**太平洋标准时间 2013 年 3 月 14 日下午 5:40

我一直在努力搜索，在 Ubuntu 13.04 下找到了以下软件包：

*   [muTouch](https://launchpad.net/ubuntu/raring/+source/xserver-xorg-input-mutouch/1:1.3.0-1build3) （我相信这来自 uTouch，一个 Ubuntu 曾经使用的旧包。）

*   [libfile-touch-perl](https://launchpad.net/ubuntu/raring/+source/libfile-touch-perl/0.08-1)

*   [tslib](https://launchpad.net/ubuntu/raring/+source/tslib/1.0-11)

*   [pymt](https://launchpad.net/ubuntu/raring/+source/pymt/0.5.1-0ubuntu3)

*   [触摸蛋](https://launchpad.net/ubuntu/raring/+source/touchegg/1.1.1-0ubuntu1)

*   [库框架6](https://launchpad.net/ubuntu/raring/+source/frame/2.5.0daily13.03.12-0ubuntu1)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T18:51:23.580

我能够向目前领导 Unity 技术团队的[Stephen Webb询问有关触摸输入的问题。](https://wiki.ubuntu.com/StephenMWebb)我联系他是因为他曾经是[uTouch-geis](https://launchpad.net/ubuntu/+source/utouch-geis)包的首席开发人员，该包被分为三个不同的包[Frame](https://launchpad.net/frame)、[Geis](https://launchpad.net/geis)和[Grail](https://launchpad.net/grail)。这些是主要的触摸屏控件，他还大量参与了其他[多点触控项目](https://launchpad.net/canonical-multitouch)。我请他了解更多有关触摸设备输入和我的想法的信息。这是他不得不说的：

* * *

**我想让 Grub2 注册一个点击事件，不再需要（不需要多点触控——我认为）。目的是从引导菜单中进行选择。**

> 您将面临从引导加载程序代码接触工作的挑战。
> 
> 许多（但不是全部）触摸输入设备具有适用于 Microsoft HID 协议的设备驱动程序。您需要将该驱动程序技术复制到 GRUB2 中，然后弄清楚如何将其映射到 GRUB2 可以理解为输入的东西中。听起来像工作。

**您是否有任何资源可以帮助我了解触摸设备的工作原理？**

> 这很复杂。有很多不同的技术，以不同的方式连接到主机，使用不同的协议，提供不同的数据。
> 
> [这里](http://msdn.microsoft.com/library/windows/hardware/hh852381)有一些很好的文档。

**您可以建议任何单击库或多点触控库吗？您对如何前进还有其他建议吗？**

> 好吧，在 Linux 堆栈中有触摸处理器中的固件，它将数据提供给内核中的设备驱动程序，该驱动程序转换为 evdev 协议，该协议由 x.org 驱动程序读取并转换为 XI2 协议，或者如果没有任何东西在寻找 XI2 触摸事件，然后将*其*转换为 XI 鼠标事件，然后将 X11 事件发送到客户端。您在引导加载程序级别所拥有的只是来自触摸处理器的直接输入。

* * *

我在[askubuntu](https://askubuntu.com/q/267721/88546)上问了这个问题的一个变种，并在那里发布了这个答案。

# css - 固定 Div - 内容正在滚动

> ID：15419238
> 
> 赞同：1
> 
> 时间：2013-03-14T20:11:04.647
> 
> 标签：css, html, fixed

我的页面顶部有这张表...

```
<table width="95%" border="0" cellspacing="0" cellpadding="0" style="position:fixed; z-index:99999;">
  <tr>
    <td><a href="index.php"><img src="logo.png" width="282" height="41" /></a></td>
    <td align="right">Hello <?php echo $_SESSION["forename"]; ?> | <a href="logout.php">Logout</a></td>
  </tr>
</table> 
```

它始终停留在页面顶部，但是向下滚动时，页面上的所有内容都在表格后面，您可以在后面看到它

有谁知道我能做些什么来阻止这种情况发生？

编辑：这是我的完整代码...

```
<style type="text/css">
body,html {
    height:100%;
}
#top-bar {
    width:100%;
    padding:10px 10px 80px 10px;
    margin:0 0 100px 0;
    border-bottom:solid 1px #000000;
    top:0;
    left:0;
}
#left-bar {
    width:170px;
    display:inline;
    float:left;
}
#right-bar {
    width:80%;
    display:inline;
    float:right;
}
</style>
</head>

<body>
<div id="top-bar">
<table width="95%" border="0" cellspacing="0" cellpadding="0" style="position:fixed">
  <tr>
    <td><a href="index.php"><img src="logo.png" width="282" height="41" /></a></td>
    <td align="right">Hello <?php echo $_SESSION["forename"]; ?> | <a href="logout.php">Logout</a></td>
  </tr>
</table>
</div>

<div id="left-bar"><iframe src="header.php" width="180px" height="100%" frameborder="0" scrolling="no"></iframe></div>

<div id="right-bar">
<iframe name="rightiframe" src="dash.php" width="100%" height="100%" frameborder="0" scrolling="yes"></iframe>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:16:12.083

你很可能正在寻找这个：

```
<table width="95%" border="0" cellspacing="0" cellpadding="0" style="position:fixed;z-index:999;top:0;left:0;background-color:#fff">
  <tr>
    <td><a href="index.php"><img src="logo.png" width="282" height="41" /></a></td>
    <td align="right">Hello <?php echo $_SESSION["forename"]; ?> | <a href="logout.php">Logout</a></td>
  </tr>
</table> 
```

`background-color`确保您看不到桌子后面的任何内容。

JsFiddle：http: [//jsfiddle.net/CRHxk/](http://jsfiddle.net/CRHxk/)

# jquery - 填充 jquery 选择框并更新下拉列表

> ID：15419243
> 
> 赞同：0
> 
> 时间：2013-03-14T20:11:34.433
> 
> 标签：jquery

我正在使用以下代码来填充选择框的选项。

```
function generateTerms(x){
    var optList = new Array(1,2,3,4,5,6,7,8,9,10,11,12,0);
    $.each(optList, function(i, value) {
        if(value==0){var text='Continuous';}
        else if(value==1){var text=x;}
        else{var text=x+'s';}
        $('#term').append($('<option>', { 'value': value, 'text' : text }));        
    });
    $("#term").trigger("liszt:updated");
} 
```

使用这个将是`generateTerms('Year');`

我的问题是，如果您观看代码，它会正确更新选择框生成，但不会更新 jquery 显示系统。我以为`.trigger("liszt:updated");`会这样做，但由于某种原因它不会。我正在寻找正确的功能来运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:29:10.067

`liszt:updated`是一个自定义事件，触发/绑定它非常简单。这是一个演示：

[http://jsfiddle.net/8BhAV/](http://jsfiddle.net/8BhAV/)

```
var $term = $('#term'),
    $log = $('#log'),
    $button = $('button');

$term.on('liszt:updated', function (event) {
    $log.html($log.html() + 'Updated at ' + (+new Date()) + '<br>');
});

$button.on('click', function (event) {
    $term.append($('<option>', {
        value: (+new Date()),
        text: (+new Date())
    }));
    $term.trigger('liszt:updated');
}); 
```

我的猜测是您没有绑定 ( `$('#term').on('liszt:updated')`) 到您正在使用的自定义事件。

# php - PHP条码类中字符的随机输出

> ID：15419245
> 
> 赞同：0
> 
> 时间：2013-03-14T20:11:43.833
> 
> 标签：php, html, barcode

所以我使用[http://barcode-coder.com/en/](http://barcode-coder.com/en/)的 PHP 类来生成条形码。

我在我的网页上得到这个输出：

```
GIF87a,,¡üüþüü,,,þ„Ëí£œ´Ú+Þ¼û†"£Œæ‰‚ZÊ¶î+–ðLkçz(ïþ~û ‡¿ñÈ "—Ì“± í(£ÔêäiÍB¦Ú.ëírÃä#¸\     £×º3»©~Ë_îù1nÏë÷[¾ÿ€HX˜fˆ˜˜5¨ØèHÃø(9iIy‰‰a™ÉÙé°éš *Z*IjššˆªÚÈê»+[+Gk›[†«Û«Åë,\ŒDlœüƒ¬ÜŒÃìý-]Bm‚­ÝÍÁí^.^ÞgŽ™¾&gt;ÍîžBþ/ßM_Ÿ}_­¿Ýï¯À€É,fð`°„ {1l˜ë!ÄZ'Æªh±ÆþŒ©6r,åñc¨";‘,9 eÀ“*)±ly &¾—2Ñ¬¹ ç»›:ñìù èºŸBý-:©¹£Jí0mzê<©ÞžREcõ*™¬Z½píú,?±Ò¾’¥bö,”´j™°m{nA¹ÆÞÒb÷®¼zuðíû°CÁºþ†aø°‹ÄŠ“4–Åøñ‰È’GP®¼ ³ªËš=pîü 4HÑ¢>“¶`ú4…Ôª3´æÄúõƒØ²Ð®½à6nÝµyËöýxkáª‰Ÿ6N¹hå ™wv®:Ô«[¿Ž=»öíÜ»{ÿ>¼øñäË›?oþªôÊë%·ü¾q|Åó×'|_p~Àûþûö×ûß]Ò5 \Âu`[ ªµàY ’õ X‚5aWju¡z¸¹´á$Rõ¡T!B5bS%*u"R)µ¢P-õbO1ê4#N5Öt£L9Â´cK=ªô#JA–4¤HE~t$GIf´¤EMNô$DQ64¥BUt%AY®ÔaL]:²¥?aî3æL_‚y¦Mi*Rf=mÊóæNkæ4§!qºs';yU§}úô'!{¦3(:….hP‰þqh9ŠóèT‹5)¥•&amp;u©‘V•©¦æ±©=Ÿ:5ê¡jsj>¥Fµ*©ZóêX­®kY³Òz+V¹î²ëV½†Që?¿z5¬Å†ue¬Á:³¬@É*ûì!Ñ3-µÕÂq-¶Ù.Ñ¬2ÝÎµm\áŽKn¹æž‹nºê®Ën»î¾o¼òÎKo½öÞ‹o¾úîËo¿þþpÀLpÁŒpÂ /ÌpÃ?qÄOLqÅ×S; 
```

我什至无法弄清楚为什么会抛出这个问题。我从 dafont 获得了 Code 39 条形码，我只是使用了 php 类中包含的示例测试。我的实现是错误的还是需要额外的代码？

```
...Code
include('barcode.php');
Code... 
```

然后

```
<?php
  include('../../inc/php-barcode.php');
  $font= '../../inc/3OF9_NEW.TTF';
  // -------------------------------------------------- //
  //                  PROPERTIES
  // -------------------------------------------------- //

  // download a ttf font here for example : http://www.dafont.com/fr/nottke.font

  // - -

  $fontSize = 10;   // GD1 in px ; GD2 in point
  $marge    = 10;   // between barcode and hri in pixel
  $x        = 125;  // barcode center
  $y        = 125;  // barcode center
  $height   = 50;   // barcode height in 1D ; module size in 2D
  $width    = 2;    // barcode height in 1D ; not use in 2D
  $angle    = 90;   // rotation in degrees : nb : non horizontable barcode might not be usable because of pixelisation

  $code     = 'abcdef4'; // barcode, of course ;)
  $type     = 'Barcode39';

  // -------------------------------------------------- //
  //                    USEFUL
  // -------------------------------------------------- //

  function drawCross($im, $color, $x, $y){
    imageline($im, $x - 10, $y, $x + 10, $y, $color);
    imageline($im, $x, $y- 10, $x, $y + 10, $color);
  }

  // -------------------------------------------------- //
  //            ALLOCATE GD RESSOURCE
  // -------------------------------------------------- //
  $im     = imagecreatetruecolor(300, 300);
  $black  = ImageColorAllocate($im,0x00,0x00,0x00);
  $white  = ImageColorAllocate($im,0xff,0xff,0xff);
  $red    = ImageColorAllocate($im,0xff,0x00,0x00);
  $blue   = ImageColorAllocate($im,0x00,0x00,0xff);
  imagefilledrectangle($im, 0, 0, 300, 300, $white);

  // -------------------------------------------------- //
  //                      BARCODE
  // -------------------------------------------------- //
  $data = Barcode::gd($im, $black, $x, $y, $angle, $type, array('code'=>$code), $width, $height);

  // -------------------------------------------------- //
  //                        HRI
  // -------------------------------------------------- //
  if ( isset($font) ){
    $box = imagettfbbox($fontSize, 0, $font, $data['hri']);
    $len = $box[2] - $box[0];
    Barcode::rotate(-$len / 2, ($data['height'] / 2) + $fontSize + $marge, $angle, $xt, $yt);
    imagettftext($im, $fontSize, $angle, $x + $xt, $y + $yt, $blue, $font, $data['hri']);
  }

  // -------------------------------------------------- //
  //                    MIDDLE AXE
  // -------------------------------------------------- //
  imageline($im, $x, 0, $x, 250, $red);
  imageline($im, 0, $y, 250, $y, $red);

  // -------------------------------------------------- //
  //                  BARCODE BOUNDARIES
  // -------------------------------------------------- //
  for($i=1; $i<5; $i++){
    drawCross($im, $blue, $data['p'.$i]['x'], $data['p'.$i]['y']);
  }

  // -------------------------------------------------- //
  //                    GENERATE
  // -------------------------------------------------- //
  header('Content-type: image/gif');
  imagegif($im);
  imagedestroy($im);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:18:34.767

条形码类正在创建一个 GIF 图像——它不应该在 HTML 页面的正文中使用，而是单独调用，就像从 IMG 标记一样，类似于以下内容：

```
<p>Here is your barcode:
<img src="/call/to/your/barcode?parm1=barcode_parm_1">
</p> 
```

使用这种方法，您将有效地向 Web 服务器发出两个请求：

1.  布局将包含条形码的 HTML
2.  渲染和服务条形码

另一种方法是在 HTML 页面加载时构建一个图像文件，然后在“src”属性中引用新文件，但我推断您希望*始终*动态生成条形码。

如果您确实单独调用它，请确保您的 PHP 代码正在传递适当的内容标头。

# javascript - 在 jQuery 中是否可以将方法设置为 var？

> ID：15419246
> 
> 赞同：1
> 
> 时间：2013-03-14T20:11:46.453
> 
> 标签：javascript, jquery

假设我有很多在不同时间有不同对象的实例`$(this).show("slow", function(){fVar;});`，`$(this)`但它们都需要`.show("slow", function(){fVar;});`并且 fVar 是先前定义的函数 var。

是否可以设置`.show("slow", function(){fVar;});`为像“myVar”这样的变量，所以我理论上可以做类似的事情`$(this).myVar();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:16:41.960

你当然可以。查看[jquery 文档](http://docs.jquery.com/Plugins/Authoring)

```
(function( $ ) {
  $.fn.myPlugin = function() {

    // Do your awesome plugin stuff here

  };
})( jQuery ); 
```

不要忘记正确的命名空间！就像使用任何其他 JQuery 方法一样，只需使用您声明的方法（即 mPlugin）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:22:46.623

我不太喜欢 JQuery 但试试这个 -

```
$.prototype.myVar=function(){
    //here goes your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:04:44.303

只需将其创建为函数表达式，您就可以在任何需要的地方使用它。此函数接受由事件侦听器创建的事件对象。即：点击功能。将此 var 用作您的事件函数回调并传入事件对象，以便它知道要显示什么。

```
var showSlow = function(eventObject){
   $(eventObject).show("slow", function(){
        fVar;
    });
} 
```

# ios - 如何使用不同的 Apple ID 更新新版本？

> ID：15419247
> 
> 赞同：0
> 
> 时间：2013-03-14T20:11:48.397
> 
> 标签：ios

我想解决问题并尝试了解什么是正确的方法。

假设 Bob 发布了带有名称`MyAppl`和版本的应用程序。1.0.1 到带有 Bundle ID`Bundle_Bob`和 Apple ID的 App-Store `Apple_ID_Bob`。

现在迈克（其他人）什么要发布新版本（新版本）1.0.2 具有相同的名称`MyAppl`、捆绑 ID`Bundle_Bob`但不同的 Apple ID `Apple_ID_Mike`。

Mike 拥有 Bob 的帐户（iTunes Connect 和 Distribution 配置文件的用户名/密码）。

那我需要做什么？

从[苹果网站](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/11_EditingandUpdatingAppInformation/EditingandUpdatingAppInformation.html) *更新保持相同的 Apple ID 和捆绑 ID*

如何将Apple ID更改为新版本`Apple_ID_Bob`？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:15:58.013

Bob 应该导出他的分发密钥并将其提供给 Mike。Mike 应该登录 Bob 的开发者帐户并下载相关的分发证书和配置文件，然后将这三个文件全部导入到他的系统中。

一种快速的方法是使用 Xcode 的“导出开发人员资料”功能，尽管它可能会传输超过您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:11:24.803

听起来您正在尝试将应用程序的所有权及其捆绑 ID 转移到不同的 iTunes 开发者帐户。这是不可能的（至少不是正式的，你可能会吸引苹果，但我有点怀疑）。您将始终需要使用相同的捆绑包 ID 和相同的开发人员帐户来更新应用程序。因此，如果您放弃或接管了某个应用的所有权，它必须始终存在于同一个 Apple ID 下。

# java - Objective C 变量常量的 Java 等效项

> ID：15419250
> 
> 赞同：2
> 
> 时间：2013-03-14T20:11:58.373
> 
> 标签：java, objective-c

在 Objective C 中，为了声明一个变量常量，我`#define FILE_NAME @"file.data"`在一个名为 Constants.h 的文件中使用。我在需要时导入此文件。

Java 等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:13:26.010

Java中的常量如下

```
public static final String FILE_NAME = "file.data"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:13:47.677

没有与 C 等效的 Java，`#define`因为没有 Java 预处理器。但是您可以在 Java 中定义常量。在课堂上，说`Constants`

```
public static final String FILE_NAME = "file.data"; 
```

然后，您可以在另一个需要常量的类中执行[静态导入：](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)

```
import static my.package.Constants.*;

...

doSomethingWithFile(FILE_NAME); 
```

# java - 带有 xsd:sequence 的丑陋 java 代码

> ID：15419253
> 
> 赞同：2
> 
> 时间：2013-03-14T20:12:05.807
> 
> 标签：java, xsd, jaxb

我使用 JAXB 将 XSD 模式绑定到 POCO。我尝试了两种不同的方法来编写 XSD 架构，但每种方法都有一个缺陷：

**选项1**

问题：每个元素都用`<Elements>`XML 而不是 表示`<Element>`，而且它们不在容器中，例如`<ElementsContainer>`.

*XSD 架构*

```
<xs:element name="Root" type="RootType" />

<xs:complexType name="RootType" />
  <xs:sequence>
    <xs:element name="Elements" type="xs:string" maxOccurs="unbounded"/>
  </xs:sequence>
</xs:complexType> 
```

*爪哇*

```
RootType r = new RootType();
r.getElements.add("Str1");
r.getElements.add("Str2"); 
```

*编组的 XML*

```
<Root>
  <Elements>Str1</Elements> 
  <Elements>Str2</Elements>
</Root> 
```

**选项 2**

问题：Java 代码看起来更丑。

*XSD 架构*

```
<xs:element name="Root" type="RootType" />

<xs:complexType name="RootType" />
  <xs:element name="Elements">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Element" type="xs:string" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:complexType> 
```

*爪哇*

```
RootType r = new RootType();
r.getElements().getElement().add("Str1");
r.getElements().getElement().add("Str2"); 
```

*编组的 XML*

```
<Root>
  <Elements>
    <Element>Str1</Element>
    <Element>Str2</Element>
  </Elements>
</Root> 
```

**问题：**有没有办法编写一个模式，输出类似于**选项 2**中的 XML，并且其代码的编写方式类似于**选项 1**？

**编辑：** `<xs:list>`不是一个选项，因为元素可能有空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:15:13.970

**从 Java 类开始**

如果您从 Java 对象开始，您可以使用`@XmlElementWrapper`注解来添加分组元素。

```
@XmlElementWrapper(name="Elements")
@XmlElement(name="Element)
public List<Element> getElements() {
    return elements;
} 
```

**从 XML 模式开始**

XJC 工具具有很强的可扩展性。为 XJC 工具编写的以下插件似乎允许您`@XmlElementWrapper`在模型中生成注释。

*   [https://github.com/dmak/jaxb-xew-plugin](https://github.com/dmak/jaxb-xew-plugin)

# matlab - 如何有效地垂直组合稀疏矩阵

> ID：15419259
> 
> 赞同：5
> 
> 时间：2013-03-14T20:12:22.437
> 
> 标签：matlab, indexing, block, sparse-matrix

我的目标是将许多稀疏矩阵组合在一起形成一个大的稀疏矩阵。我能想到的仅有的两个想法是（1）创建一个大型稀疏矩阵并覆盖某些块，（2）创建单独用于`vertcat`形成我的最终稀疏矩阵的块。但是，我读到[覆盖](http://www.mathworks.com/help/matlab/math/accessing-sparse-matrices.html#br7572b)稀疏矩阵的效率很低，而且我还读到 vertcat 的计算效率并不高。（我都没有考虑使用 for 循环，因为它们效率低下）。

那我还有什么其他选择？

**编辑**：通过组合我的意思是（垂直）将矩阵“粘合”在一起，元素不会相互作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:48:50.910

根据 matlab 帮助，您可以使用“反汇编”稀疏矩阵

```
[i,j,s] = find(S); 
```

这意味着如果你有两个矩阵`S`和`T`，并且你想（有效地）`vertcat`它们，你可以做

```
[is, js, ss] = find(S);
[it, jt, st] = find(T);
ST = sparse([is; it + size(S,1)], [js; jt], [ss; st]); 
```

不确定这是否非常有效......但我猜这还不错。

编辑：使用密度为 1% 的 2000x1000 稀疏矩阵，并将其与另一个密度为 2% 的矩阵结合起来，上面的代码在我的机器上运行了 0.016 秒。只是做`[S;T]`的速度快了 10 倍。是什么让您认为垂直连接很慢？

EDIT2：假设您需要使用“许多”稀疏矩阵执行此操作，则以下工作（假设您希望它们都“在同一个地方”）：

```
m = 1000; n = 2000; density = 0.01;
N = 100;
Q = cell(1, N);
is = Q;
js = Q;
ss = Q;
numrows = 0; % keep track of dimensions so far

for ii = 1:N
    Q{ii} = sprandn(m+ii, n-jj, density); % so each matrix has different size
    [a b c] = find(Q{ii});
    sz = size(Q{ii}); 
    is{ii} = a' + numrows; js{ii}=b'; ss{ii}=c'; % append "on the corner"
    numrows = numrows + sz(1); % keep track of the size
end

tic
ST = sparse([is{:}], [js{:}], [ss{:}]);
fprintf(1, 'using find takes %.2f sec\n', toc); 
```

输出：

```
using find takes 0.63 sec 
```

这种方法的最大优点是您不需要在各个稀疏数组中具有相同数量的列......它将全部由命令排序，该`sparse`命令将简单地将丢失的列视为全零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-07T19:46:00.367

考虑到已经给出的答案。

我已经稍微改变了实验，以便能够垂直连接矩阵（它应该具有相同的宽度），所以我们不需要`n`通过提取来调整`ii`（由 输入错误`jj`）。

这种方法

```
tic
ST = sparse([is{:}], [js{:}], [ss{:}]);
fprintf(1, 'using find takes %.2f sec\n', toc); 
```

它`0.45 sec`比这个慢得多

```
tic
ST = vertcat(Q{:});
fprintf(1, 'using vertcat takes %.2f sec\n', toc); 
```

平均`0.18 sec`。

我还用分析器检查了它，第一个示例预计会慢一些，因为至少内存分配要高 100 倍。很可能是因为`[ss{:}]`数组结构明确地将数据复制到新数组中。

然而，即使使用预先计算的向量，速度也是`0,3 sec`vs `0,18 sec`for `vertcat`。

因此，我建议这`vertcat`是原始问题的更好选择。至少在 2021 年 :)

# vim - 在 Vim 中搜索和替换光标下的单词

> ID：15419262
> 
> 赞同：7
> 
> 时间：2013-03-14T20:12:30.273
> 
> 标签：vim

我经常将光标放在一个单词上，我想用另一个单词替换该单词的所有出现。用另一个单词替换光标下所有出现的单词的最简单方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T20:42:39.917

用于`<C-r><C-w>`在命令行中插入光标下的单词：

```
:%s/<C-r><C-w>/bar/g 
```

如果您需要做很多事情，您可以轻松地创建如下映射：

```
nnoremap <F6> :%s/<C-r><C-w>/ 
```

上面的映射插入了命令的第一部分，准备好输入替换、任何标志和命中`<CR>`：

```
:%s/foo/ 
```

# reporting-services - 如何获得呈现的 SSRS 2008 报告的 HTML？

> ID：15419264
> 
> 赞同：0
> 
> 时间：2013-03-14T20:12:30.707
> 
> 标签：reporting-services, ssrs-2008

我需要对呈现的 SSRS 2008 报告的 HTML 代码进行一些操作（以插入一些 SSRS 2008 不支持的标签）。我想通过在 SSRS 服务器的 ReportManager.js 文件中添加 JavaScript 代码来实现这一点。

但是，呈现报告的简单“查看源代码”将显示我的“钩子”或我包含在文本框或占位符中的任何文本在呈现的 HTML 中找不到。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:10:48.077

我不认为您可以使用标准的开箱即用的报表管理器界面来操作报表呈现。最好的办法是使用[ASP.NET ReportViewer 控件](http://msdn.microsoft.com/en-us/library/ms345248%28v=sql.105%29.aspx)或[报表服务器 Web 服务](http://msdn.microsoft.com/en-us/library/ms152787%28v=sql.105%29.aspx)创建自定义 Web 应用程序，然后您可以对报表输出进行一些操作。

祝你好运！

# java - 在 App Engine servlet 中存储已使用令牌的列表 - java

> ID：15419266
> 
> 赞同：0
> 
> 时间：2013-03-14T20:12:54.743
> 
> 标签：java, google-app-engine, memcached

我有一个小的 GAE 应用程序，我的 Android 应用程序的后端。我在应用程序中有一个 servlet，它从数据存储中提取数据并将其发送给用户。我不希望任何人能够使用这个 servlet，所以我在应用程序中存储了一个私钥，并且对于每个请求，我都会发送一个令牌 - 私钥的哈希字符串和当前毫秒，以及毫秒我在哈希中使用过。服务器正在获取毫秒和私钥，并将其与令牌进行比较。如果一切顺利，服务器会将毫秒存储在 a 中`HashSet`，这样它就会知道不再使用它。（有人可以嗅探设备数据 - 并一遍又一遍地发送相同的毫秒和令牌）。

一开始，我在Servlet类中持有一个静态字段，后来发现是错误的，因为这个字段没有持久化，当实例被销毁时，所有数据都丢失了。

我已经阅读过`Memcache`，但这不是一个最佳解决方案，因为据我了解，`Memcache`如果应用程序内存不足，或者即使服务器出现故障，也会删除其中的数据。

我不想使用数据存储，因为它确实会使请求变慢。

我想我不是第一个面临这个问题的人。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T00:50:22.883

我在我的一个应用程序中使用了反向方法：

每当一个新的客户端连接时，我都会在服务器上生成一组三个随机的“挑战”（比如你的毫秒），我将它们存储在 memcache 中，过期时间为一分钟左右。然后我将这些挑战发送给客户。对于客户端发出的每个请求，它需要使用这 3 个挑战之一（使用私钥散列）。然后服务器删除使用过的挑战，创建一个新挑战并将其发送给客户端。这样，每个挑战都是一次性的，我不必担心重放攻击。

关于这种方法的几点说明：

*   我产生 3 个挑战的原因是允许并行运行多个请求。
*   您进行挑战的时间越长，它被随机重用的可能性就越小（然后允许播放攻击）。
*   如果 memcache 忘记了我存储的挑战，应用程序的请求将失败。在失败中，我的响应包括“忘记所有其他挑战并使用这 3 个新挑战：...”命令。
*   您可以将挑战与客户端的 IP 地址或某种其他类型的会话信息联系起来，以降低有人“破解”您的可能性。
*   通常，最好让服务器为身份验证生成挑战或加盐，而不是为客户端提供这种灵活性。

如果您想坚持使用时间戳，您可以使用的另一种方法是使用第一个请求交换来确定服务器实例和客户端设备之间的时间偏移。然后，只接受带有“当前”时间戳的请求。为此，您需要确定您可以获得时间偏移的不确定性，并将其用作时间戳不是当前的截止值。为了防止在该截止时间内重放攻击，您可能需要保存并禁止使用最后几个时间戳。您可以在您的实例中执行此操作，因为 AppEngine、AFAIK 会将来自同一客户端的请求优先路由到同一实例。然后，如果关闭一个实例并重新启动一个实例（即清除您的不允许缓存）比您的“当前”截止时间更长，那么您不应该

# php - 如何从 PHP 中的 cUrl 获取缓存控制最大年龄值？

> ID：15419267
> 
> 赞同：-1
> 
> 时间：2013-03-14T20:12:55.593
> 
> 标签：php, curl, cache-control

如何从 PHP 中的 cURL 获取缓存控制：最大年龄值？

我有：

```
$this->get_headers_from_curl_response(curl_exec($this->curl)); 
```

cURL 是否有一个只返回`max-age`值的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:06:06.647

为了使它非常简单（未经测试，但应该可以工作）：

```
$headers = $this->get_headers_from_curl_response(curl_exec($this->curl));
$headers = explode("max-age=", $headers);
$headers = explode("\n", $headers[1]);

$max_age = trim($headers[0]); 
```

# ios - 检查 NSMutableArray 中是否存在项目

> ID：15419268
> 
> 赞同：-4
> 
> 时间：2013-03-14T20:13:00.210
> 
> 标签：ios, objective-c, nsmutablearray

我有一个包含自定义对象的 NSMutableArray。其内容示例如下：

```
2013-03-14 20:06:23.895 MyMusicLibrary[1667:c07] myLibrary: (
    {
    artist = "Green Day";
    id = 1421768;
    name = "American Idiot";
    releasedate = "21 Sep 2004";
    runningtime = "57.53";
    tracks = "1: American Idiot\n2: Jesus of Suburbia\n3: Holiday/Boulevard Of Broken Dreams\n4: Are We The Waiting/St. Jimmy\n5: Give Me Novacaine/She's A Rebel\n6: Extraordinary Girl/Letterbomb\n7: Wake Me Up When September Ends\n8: Homecoming\n9: Whatsername\n";
    trackscount = 9;
    type = 1;
},
    {
    artist = Bastille;
    id = 309124896;
    name = "Bad Blood";
    releasedate = "1 Mar 2013";
    runningtime = "43.98";
    tracks = "1: Pompeii\n2: Things We Lost in the Fire\n3: Bad Blood\n4: Overjoyed\n5: These Streets\n6: Weight of Living, Pt. II\n7: Icarus\n8: Oblivion\n9: Flaws\n10: Daniel in the Den\n11: Laura Palmer\n12: Get Home\n13: Weight of Living, Pt. I\n";
    trackscount = 13;
    type = 1;
},
    {
    artist = "Lacuna Coil";
    id = 2025689;
    name = Comalies;
    releasedate = "16 Oct 2012";
    runningtime = "51.75";
    tracks = "1: Swamped\n2: Heaven's a Lie\n3: Daylight Dancer\n4: Humane\n5: Self Deception\n6: Aeon\n7: Tight Rope\n8: The Ghost Woman and the Hunter\n9: Unspoken\n10: Entwined\n11: The Prophet Said\n12: Angels Punishment\n13: Comalies\n";
    trackscount = 13;
    type = 1;
}
) 
```

我将如何遍历数组，以检查 ID 是否已经存在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T20:17:54.453

您没有说明数组中有哪些对象。以下应该一般工作：

```
NSMutableArray *array = ... // the array with the objects
id keyToFind = ... // the key to locate
for (id object in array) {
    id key = [object valueForKey:@"id"];
    if ([key isEqual:keyToFind]) {
        // found
    }
} 
```

`id`可以根据需要用更具体的类替换每个的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:17:17.327

遍历数组并在每次迭代中检查 ID 是否为当前 ID。如果是，则 ID 存在。如果不存在，则该 ID 不存在于数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:20:48.990

有一个`for`循环

```
NSInteger idToCheck = 12345;
for (MyObject *obj in myArray){
    if (obj.id == idToCheck) {
        //do something here
    }
} 
```

# request - 当客户端取消请求或客户端套接字关闭时，如何在播放框架 2.1 中中止控制器操作？

> ID：15419269
> 
> 赞同：3
> 
> 时间：2013-03-14T20:13:01.633
> 
> 标签：request, playframework-2.0

我正在测试 play framework 2.1 以检查当客户端取消请求或套接字从客户端关闭时会发生什么。我创建了这个简单的程序：

```
包控制器；进口戏。*;
导入play.mvc。*;

导入views.html.*；

公共类应用程序扩展控制器{

public static Result index() {

    try{
        for(int i=0;i<1000;i++){
            Thread.sleep(10000);
            System.out.println(i+"\n");
        }
    }catch(Exception e){
        System.out.println("\nexcepción capturada");
    }
    return ok(index.render("Your new application is ready."));
} 
```

}

如果我取消来自客户端（谷歌浏览器）的请求，则循环不会中止。我认为这可能是现实世界应用程序中的一个问题，不是循环，而是对数据库进行“大量”查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-04T03:55:45.997

由于没有答案，我在 google 群组上询问了游戏 [https://groups.google.com/forum/?hl=en#!topic/play-framework/POvFA3moXug](https://groups.google.com/forum/?hl=en#!topic/play-framework/POvFA3moXug) ，这是Typesafe的**James Roper所说的：**

> Play**不提供这样的功能**。但是，还有其他方法可以实现相同的目的，例如，如果您有一个长时间运行的请求，您可以将其作为**websockets**请求来执行，这样您就可以轻松检测客户端何时导航到不同的页面。

截至今天的最新版本是 play-2.2.0-RC1（以防他们稍后添加支持）。

# java - 如何使用小程序运行（伪）main 方法？

> ID：15419270
> 
> 赞同：1
> 
> 时间：2013-03-14T20:13:04.500
> 
> 标签：java, applet, main

我是一名初学者/中级 Java 程序员，正在尝试编写“超出我的联盟”的东西。该程序应该通过按下对应于不同得分值的键来实时判断拳击/MMA比赛。我发现我需要一个 KeyListener，而我发现使用它的唯一方法是使用小程序。

我遇到的问题是我必须打印出分数的唯一线索来自 keyPresses 和 keyReleases。我希望分数与时间一起打印每一秒。我制作了一个时钟功能，可以使用另一个带有 main 方法的类每秒打印一次，但我不知道如何在小程序中执行此操作。

这是我到目前为止所拥有的：

```
import java.applet.Applet;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.ArrayList;
import javax.swing.*;

public class KeyPressTwo
extends Applet
implements KeyListener{

private long t;
private ArrayList<Integer> keysDown = new ArrayList<Integer>();
private double controlOnlyValue = 1; //Stores the score per second for control only
private double threateningValue = 2.5; //Score for threatening with strikes, i.e. landing sig strikes, or sub attempts
private double damagingValue = 4;   //Score for doing significant damage and dominating hea
private static double redTotal = 0; //Stores fighter score
private static double blueTotal = 0;
private static boolean firstRun = true;
private static boolean start = false;
private static boolean releasePressed = false; //Tells KeysReleased method when to wipe keysDown list
private static long roundBeganAt = 0; //System time when the round began    5
private static String redName;
private static String blueName;

public void init(){     
    this.addKeyListener(this);  
    //If names aren't hardcoded in, get them when the program is run
    if (redName == null){
        redName = JOptionPane.showInputDialog("Enter the red corner fighter's name.");
        blueName = JOptionPane.showInputDialog("Enter the blue corner fighter's name.");
    }

}

public void paint(){        
    setSize(500,500);
}

@Override
public void keyPressed(KeyEvent e) {            

    if(!keysDown.contains(e.getKeyCode()))
        keysDown.add(e.getKeyCode());

    //Starts the timer, don't print anything until started
    if(keysDown.contains(KeyEvent.VK_SPACE)){
        start = true;
        roundBeganAt = System.currentTimeMillis();
    }

    //If it's been more than 1s
    if(nextStep()){     
        //If space has been pushed
        if(start){
            if(keysDown.contains(KeyEvent.VK_Z) || keysDown.contains(KeyEvent.VK_NUMPAD1)){
                redTotal += controlOnlyValue;
            }
            if(keysDown.contains(KeyEvent.VK_X) || keysDown.contains(KeyEvent.VK_NUMPAD4)){
                redTotal += threateningValue;
            }
            if(keysDown.contains(KeyEvent.VK_C) || keysDown.contains(KeyEvent.VK_NUMPAD7)){
                redTotal += damagingValue;
            }
            if(keysDown.contains(KeyEvent.VK_COMMA) || keysDown.contains(KeyEvent.VK_NUMPAD3)){
                blueTotal += controlOnlyValue;
            }
            if(keysDown.contains(KeyEvent.VK_M) || keysDown.contains(KeyEvent.VK_NUMPAD6)){
                blueTotal += threateningValue;
            }
            if(keysDown.contains(KeyEvent.VK_N) || keysDown.contains(KeyEvent.VK_NUMPAD9)){
                blueTotal += damagingValue;
            }
            System.out.print("\n" +redName +": " +redTotal +"  \t" +blueName +": " +blueTotal +"\t\t" +time());
            releasePressed = true;
        }
    }
}

//Prints time since start (e.g. 2:05)
private static String time() {      
    String minutes = "";
    String seconds = "";
    int sRaw; //Gets time directly from system, will go above 60
    int s; //Gets time from sRaw, (0 - 59)  

    sRaw = (int)((System.currentTimeMillis() - roundBeganAt))/1000; 
    s = sRaw%60;

    minutes = Integer.toString(sRaw/60);
    if(s < 10)
        seconds = "0" +Integer.toString(s);
    else seconds = Integer.toString(s);

    return minutes +":" +seconds;
}

//Returns true if it's been more than1s since the last time it ran
public boolean nextStep() {
    if(firstRun){
        t = System.currentTimeMillis();
        firstRun = false;
        return true;
    }
    if(System.currentTimeMillis() > t + 1000){
        t = System.currentTimeMillis();
        return true;            
    }else
        return false;
}

public void printList(){
    for(int i : keysDown)
        System.out.print(i +" ");
    System.out.println();
}

@Override
public void keyReleased(KeyEvent e) {

    if(releasePressed){
        keysDown.clear();
        releasePressed = false;
    }

}

@Override
public void keyTyped(KeyEvent e) {

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:24:39.887

也许这些方面的东西对你有用：

```
Thread timerOutputThread = new Thread(new Runnable(){
    public boolean running = true;
    public void run(){
        output();
    }
    private void output(){
        try {
            Thread.sleep(1000);
        } catch(Exception ex) {
            ex.printStackTrace();
        }
        System.out.println("PRINT THE SCORE HERE");
        if(running){
            output();
        }
    }
});
timerOutputThread.start(); 
```

将该代码粘贴到您希望启动线程计时器的任何位置，然后填写“在此处打印分数”的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T00:17:24.037

> 我发现我需要一个 KeyListener，......”

或者最好是[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

> ..我发现使用它的唯一方法是使用小程序。

你到底从哪里听到的？！？这绝对是错误的。开始使用`JFrame`这个应用程序。它会更好地工作，因为焦点会更可靠。

# scala - 文件上传部分映射到模型scala play2

> ID：15419277
> 
> 赞同：0
> 
> 时间：2013-03-14T20:13:35.770
> 
> 标签：scala, playframework-2.0

文件上传代码

```
request.body.file("image").map { ing =>
          val target = new java.io.File(s"./uploads/${ing.filename}")
          ing.ref.moveTo(target, true)
        } 
```

如何将 ing.filename 连接到 AboutImages“图像”对象，以便我可以更新数据库！

这是诺贝尔奖：

```
object AboutImages {

    val images = { 
        get[Long]("about_us_images.id") ~
        get[String]("about_us_images.image") ~
        get[Option[Date]]("about_us_images.created_at") ~
        get[Option[Date]]("about_us_images.updated_at") ~
        get[Option[Int]]("about_us_images.position") ~
        get[String]("about_us_images.name") map {
case id~image~created_at~updated_at~position~name => AboutImages (id, image, created_at, updated_at, position, name)
        }
    } 
```

是形式：

```
 val details: Form[AboutImages] = Form(
    mapping(
      "id" -> longNumber,
      "image" -> text,
      "created_at" -> optional(date),
      "updated_at" -> optional(date),
      "position" -> optional(number),
      "name" -> nonEmptyText
      )(AboutImages.apply)
      (AboutImages.unapply)
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:38:03.153

不完全确定我理解你的问题——除了文件上传之外，你在访问表单组件时遇到问题吗？

如果是这样，请查看[带有附加字段的帖子播放文件上传表单](https://stackoverflow.com/questions/15234550/play-file-upload-form-with-additional-fields/15236165)。

# php - 在 PHP 中格式化电话号码

> ID：15419278
> 
> 赞同：-3
> 
> 时间：2013-03-14T20:13:35.997
> 
> 标签：php, phone-number

那里有几个格式化脚本，但不是我要找的。例如：400777666555 我想要什么：+400 777 666 555 所以要添加一个 + 并每隔 3 个数字留一个空格。

```
$number = get_the_author_meta('mobile');
$split = chunk_split($number, 3);
$num = "+" . implode(" ", $split); 
```

仅当我删除最后一个 $num 行时，该代码才有效。不知道出了什么问题。如果我删除它，它可以正常工作，只是没有+。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:36:20.797

我刚刚在谷歌上搜索了几分钟，找到了这个答案。我强烈建议您首先对任何 PHP 问题进行一些研究，因为 PHP 有大量随机实用方法，大多数人在直接搜索之前都不知道。

```
$number = "400777666555";
$array = chunk_split($number, 3);
$output = "+" . implode(" ", $array); 
```

此外，在 StackOverflow 上，最好在问题中添加一些代码以显示您尝试过的内容。

# ruby - 将空字符串转换为 nil 就地？

> ID：15419285
> 
> 赞同：24
> 
> 时间：2013-03-14T20:14:03.887
> 
> 标签：ruby, string, null, in-place

我正在寻找一种`nil`使用 Ruby 将空字符串转换为适当位置的方法。如果我最终得到一个空格的字符串，我可以这样做

```
 "    ".strip! 
```

这会给我空字符串`""`。

我希望能够做的是这样的事情。

```
"    ".strip!.to_nil! 
```

这将用 . 替换空字符串`nil`。 `to_nil!`将字符串更改为`nil`直接，`.empty?`否则如果字符串不为空，则不会更改。

这里的关键是我希望它直接发生，而不是通过诸如

```
f = nil if f.strip!.empty? 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2017-08-04T11:59:23.343

干净的方法是使用`presence`.

让我们测试一下。

```
'    '.presence
# => nil

''.presence
# => nil

'text'.presence
# => "text"

nil.presence
# => nil

[].presence
# => nil

{}.presence
# => nil

true.presence
# => true

false.presence
# => nil 
```

请注意，此方法来自 Ruby on Rails v4.2.7 [https://apidock.com/rails/Object/presence](https://apidock.com/rails/Object/presence)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T20:26:49.740

那是不可能的。

`String#squeeze!`可以就地工作，因为可以修改原始对象以存储新值。但是该值`nil`是不同类的对象，因此不能用**String**类的对象表示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-28T15:42:19.137

我知道我有点晚了，但是您可以为 String 类编写自己的方法，并在初始化程序中运行代码：

```
class String
  def to_nil
    present? ? self : nil
  end
end 
```

然后你会得到：

```
'a'.to_nil
=> "a"
''.to_nil
=> nil 
```

当然，您也可以在检查是否适合您之前剥离字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-01T09:50:05.670

正则表达式来救援！如果匹配或正则表达式不匹配，我们可以使用`string[regexp]`which 返回 a （参见文档[String](https://ruby-doc.org/core-3.0.2/String.html#method-i-5B-5D)）。`new_string``nil`

```
''[/.+/] 
# => nil

'text'[/.+/] 
# => 'text'

# Caution 1: This doesn't work for strings which are just spaces
'   '[/.+/] 
# => '   '

# In these cases you can strip...
'   '.strip[/.+/] 
# => nil

# ...or use a more complicated regex:
'   '[/.*\S.*/]
# => nil 
```

# ipad - 如何从照片卷中加载图像并将卷中的其他图像添加到其顶部，可能对其进行排序并保存最终产品？

> ID：15419292
> 
> 赞同：0
> 
> 时间：2013-03-14T20:14:32.693
> 
> 标签：ipad, ios6, uiimageview, uikit, cashapelayer

我正在尝试从照片卷中当前存在的图像中制作一些合成图像。我的代码似乎可以将照片卷中的图像加载到 UIImageView 上并将其显示给用户；（这是执行此操作的操作：）

```
- (IBAction)grabImage:(id)sender
{
    if ([_myPopoverController isPopoverVisible])
        [_myPopoverController dismissPopoverAnimated:YES];
     else
    {
        if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeSavedPhotosAlbum])
        {
            UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            imagePicker.mediaTypes = [NSArray arrayWithObjects: (NSString *) kUTTypeImage, nil];
            imagePicker.allowsEditing = NO;
            _myPopoverController = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
            _myPopoverController.delegate = self;
            [_myPopoverController presentPopoverFromRect: [sender frame] inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES ];
            _newMedia = NO;
        }
    }
} 
```

接下来，我希望能够选择更多照片，但不是替换当前的照片，而是希望它们一层一层地层叠。最后，当用户完成图像分层后，我希望他们能够将最终产品保存到照片卷中。

我该如何实施？不知道从哪里开始...

提前致谢，

码头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T19:21:57.000

事实证明，只需将 CALayers 添加到具有不同 alpha 度的 UIImageView 即可；我没有清除以前的图像并用新图像替换它，而是简单地添加不同的 alpha 图像层。奇迹般有效！

# c# - 如何将 kinect 骨架数据保存到文件中？

> ID：15419296
> 
> 赞同：1
> 
> 时间：2013-03-14T20:14:55.610
> 
> 标签：c#, c++, kinect, kinect-sdk

我能够在 Kinect SDK beta 3 中做到这一点，但从那以后我就没有为 Kinect 开发过，而且似乎发生了很多变化。

我想将每个关节保存为一个变量，并将这些值写入一个 .csv 文件，以便稍后解析。（最好使用 c#，但我也可以使用 c++ 版本）

**问题**

- 我需要调用什么才能获得每个关节的数值？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:36:14.213

`Skeleton`数据只是一系列集合，`Joint`包含 X/Y/Z 坐标。您可以像任何其他类型的对象一样保存和编写它们。

[Microsoft 为Kinect for Windows Samples](http://kinectforwindows.codeplex.com/)`Joint`提供的多个示例显示了获取 a 的值。请探索这些示例以获得使用最新 Kinect SDK 的基础。

这是一个基本的回调来解析`SkeletonFrame`和使用单个骨架：

```
private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame == null || skeletonFrame.SkeletonArrayLength == 0)
            return;

        // resize the skeletons array if needed
        if (_skeletons.Length != skeletonFrame.SkeletonArrayLength)
            _skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];

        // get the skeleton data
        skeletonFrame.CopySkeletonDataTo(_skeletons);

        foreach (var skeleton in _skeletons)
        {
            // skip the skeleton if it is not being tracked
            if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
                continue;

            // print the RightHand Joint position to the debug console
            Debug.Writeline(skeleton.Joints[JointType.HandRight]);
        }
    }
} 
```

此外，[Kinect Toolbox](http://kinecttoolbox.codeplex.com/)附带的功能允许您录制和回放所有 3 个流。

# ios - OpenGLES上的顶点数组对象（VAO）在构造后几乎立即神秘地变得无效

> ID：15419299
> 
> 赞同：1
> 
> 时间：2013-03-14T20:15:06.423
> 
> 标签：ios, opengl-es, opengl-es-2.0, vertex-array

我在 iOS 上有一个非常奇怪的 VAO 问题。

问题是新创建的 VAO 在创建后几乎立即失效。

我有一段代码使用 glGenVertexArrayOES(1, &vao) 以通常的方式创建 VAO。然后绑定它（glBindVertexArrayOES），设置所有顶点绑定等，然后绑定零 VAO 以确保没有进一步的 glBind 调用意外写入它。如果此时我调用 glIsVertexArrayOES(vao)，它会返回 true。

我的代码结构为作业图，其中作业被推入有序队列并被拾取以在线程池上执行。尽管如此，对于 OpenGL，我只在一个线程上执行调用 GL 的代码。我有线程亲和力来确保这一点。

现在。我的代码执行，生成 VAO，然后退出函数。然后它会选择下一个作业，在同一个线程上运行它，并尝试使用新创建的 VAO。如果我此时调用 glIsVertexArrayOES - 从字面上看，几乎是在构造后立即调用 - 它返回 false！

任何忽略它并使用它的尝试都会失败。

我在 glDeleteVertexArraysOES 上有一个断点，但没有被调用。太奇怪了……它成功地创建了一个 VAO，退出了一个函数，尝试在同一个线程上使用新创建的 VAO（从而避开上下文和共享组问题）并且失败了。

非常感谢任何帮助或见解！

# javascript - 将选择框值附加到 href

> ID：15419301
> 
> 赞同：0
> 
> 时间：2013-03-14T20:15:13.270
> 
> 标签：javascript, jquery

我有一个选项很少的选择框。例如

```
<select>
   <option value="India">India</option>
   <option value="Usa">Usa</option>
  </select> 
```

我有如下的 href 元素，我希望在单击 href 元素时将选择框中的选定选项的值附加到 href 链接。假设名称=印度。

例如`<a href="http://localhost:8080/country?name=">Visit Country</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:18:23.847

```
$('select').on('change', function() {
    var old_href = $('a').attr('href'),
        new_href = old_href.split('=')[0] + '=' + this.value;
    $('a').attr('href', new_href);
}); 
```

# html - 如何制作 CSS 环绕投影？或者有什么好的方法吗？用最少的胶带？

> ID：15419303
> 
> 赞同：1
> 
> 时间：2013-03-14T20:15:21.367
> 
> 标签：html, css, dropshadow

我想要一个矩形 DIV 在它的所有四个边上都有一个阴影。

现在我可能可以通过使用容器 div 获得我想要的东西，并有一个带有正值的阴影和一个带有负值的阴影；我还没有看到我可以推动什么。因为这是在样板代码中完成的，所以我可以拥有一系列具有不同边框颜色的嵌套 DIV，这是旧的 pre-CSS 方式。通过某种方式，我也许可以为四个 DIV 制作四个阴影。例如，参见“ [CSS 阴影 3 面](https://stackoverflow.com/questions/253868/css-shadows-on-3-sides)”。

然而，我看到的所有解决方案，或在搜索中看到的证据，都闻起来像胶带。阴影是否足够强烈地为 2 面设计，以至于 4 面不能在没有胶带的情况下优雅地实现？

如果必须，我会使用管道胶带，但我宁愿在选择管道胶带品牌之前找出是否有好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:17:09.490

你想要更多的头顶悬停阴影？

```
.shadow {
    -webkit-box-shadow:0 0 10px rgb(0,0,0);
    -moz-box-shadow:0 0 10px rgb(0,0,0);
    box-shadow:0 0 10px rgb(0,0,0);
} 
```

您也可以将它与插图一起使用，使边缘具有非常漂亮的 3d 外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:21:35.310

您可以将可选的*展开*值（10px）添加到您的语法中。像这样：

```
.dropshadow {
-webkit-box-shadow: 0px 0px 5px 10px rgba(0,0,0,.5);
-moz-box-shadow: 0px 0px 5px 10px rgba(0,0,0,.5);
box-shadow: 0px 0px 5px 10px rgba(0,0,0,.5);
} 
```

# r - 在 r 中，如何按一个因子修剪或优化数据

> ID：15419311
> 
> 赞同：2
> 
> 时间：2013-03-14T20:15:44.483
> 
> 标签：r

我正在尝试在因子（主题）的每个级别上应用winsor函数，以消除极端情况。我可以将 winsor 函数应用于整个列，但想在主题内进行。

```
Subject RT
1       402
1       422
1       155
1       460
2       283
2       224
2       346
2       447
3       415
3       161
3       1
3       343 
```

理想情况下，我希望输出是一个向量，其中包含与输入相同的行数，但要根据 winsor 函数删除和替换异常值（例如主题 3 的倒数第二个值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:50:47.743

you are looking for the `?by` function

```
 #  for example: 
 by(myDF, myDF$Subject, winsor(myDF$RT)) 
```

However, using `data.table` (instead of `data.frame`) might be better suited for you

```
### broken down step by step: 

library(data.table)
myDT <- data.table(myDF)

myDT[, winsorResult := winsor(RT), by=Subject] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:29:08.517

```
 library(psych)
 transform(dat,win = ave(RT,Subject,FUN=winsor))
   Subject  RT   win
1        1 402 402.0
2        1 422 422.0
3        1 155 303.2
4        1 460 437.2
5        2 283 283.0
6        2 224 259.4
7        2 346 346.0
8        2 447 386.4
9        3 415 371.8
10       3 161 161.0
11       3   1  97.0
12       3 343 343.0 
```

# python - python中的前导零

> ID：15419312
> 
> 赞同：2
> 
> 时间：2013-03-14T20:15:46.230
> 
> 标签：python, python-2.7, syntax-error

Python 似乎能够接受除 08 或 09 以外的任何数字的前导零。例如，

```
a = 04 
```

在口译员中工作，但

```
a = 08 
```

返回

```
SyntaxError: invalid token 
```

我在 OSX 上使用 python 2.7.3，其他人已经能够复制错误。是什么赋予了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T20:17:22.030

其中带前导零的数字被解释为八进制，其中数字`8`和`9`不存在。

在 Python 3 中更糟糕的是，无论您使用哪个数字，前导零都是语法错误。请参阅“新八进制文字”下[的 Python 3.0 中的新增功能。](http://docs.python.org/3.0/whatsnew/3.0.html#new-syntax)还有[PEP 3127](http://www.python.org/dev/peps/pep-3127/#removal-of-old-octal-syntax)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:17:23.467

当您以 0 开头的数字时，Python 将其视为八进制。所以虽然是的，八进制 04 等于十进制 04，但八进制 08 甚至不存在（因为八进制数字只能在 [0,7] 范围内）。

在这里找到：[Python：无效的令牌](https://stackoverflow.com/questions/336181/python-invalid-token)

# command-line - 鼠标移动应用程序添加命令行参数以在 Windows 启动时自动启动

> ID：15419319
> 
> 赞同：0
> 
> 时间：2013-03-14T20:16:08.743
> 
> 标签：command-line, command-line-arguments, mousemove

我有应用程序 [http://movemouse.codeplex.com/](http://movemouse.codeplex.com/)

我想在启动时启动应用程序（我可以这样做），但我也想自动点击“开始”按钮，以便在 Windows 启动时立即打开。

我需要有命令行选项来执行此操作。

任何人都知道执行此操作的命令行选项吗？和/或该程序可用选项的命令行列表？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:46:44.797

通过查看设置，必须设置三个选项：

1.  在 LAUNCH 上自动启动 Move Mouse（与打开 Move Mouse 时按 start 相同）
2.  在 Windows 登录时自动启动移动鼠标
3.  最小化开始

我假设这些选项按照介绍的方式工作。

![在此处输入图像描述](../Images/9fe7737c22bb04570d41d3b5c6815279.png)

否则，如前所述，在 AutoHotKey 中编写自己的 MouseMover 很容易。并将其编译为 exe 也很容易。

这是一些 AutoHotKey 代码：

```
#Persistent
#SingleInstance force
SetTimer MoveMyMouse, 60000 ; 1000 ms = 1 sec.
Return

MoveMyMouse:
    MouseMove, 1, 0, 1, R ;Move the mouse one pixel to the right
    MouseMove, -1, 0, 1, R ;Move the mouse back one pixel
Return

^!#Pause::ExitApp 
```

在 AutoHotKey 中加载代码并测试它，一旦你高兴地编译成你自己的 MouseMove.exe

作用：在启动期间，它启动一个计时器，该计时器每 60 秒执行一次标记为 MoveMyMouse 的小子程序。这个小子程序将使您的鼠标来回移动一个像素。

我还通过按`Ctrl`+ `Alt`+ `Win`+添加了一个转义`Pause`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-06T18:50:25.850

创建一个 cmd 文件来启动您的应用程序并向左或右“Windows”键发送按键

**触发 windows 键将打开开始菜单**

要触发 Windows 键，您需要下载[nircmd.zip](http://www.nirsoft.net/utils/nircmd.zip)并将其文件夹解压缩到某处，然后 cd 到该文件夹​​的路径

**路径可能区分大小写**

```
start "C:\path-to-your-apps\app-name.exe"
cd "C:\path-to-nircmd-folder\"
nircmd sendkey lwin press 
```

**不要在启动时运行您的应用程序**

而是在启动时运行 cmd 文件

要在启动时运行 cmd 文件，首先需要为其创建桌面快捷方式。

**不要右键单击 cmd 文件 > 创建快捷方式**

右键单击 cmd 文件 > 发送到 > 桌面（创建快捷方式）

应出现一个窗口，将以下内容放入浏览字段

```
C:\Windows\System32\cmd.exe /C "C:\path-to-cmd-folder\cmd-name.cmd" 
```

命名快捷方式然后按回车键

接下来，右键单击您的新桌面快捷方式 > 属性导航到快捷方式选项卡，将“运行”设置为“最小化”，这样您就不会在运行 cmd 文件时看到弹出命令提示符

最后，将快捷方式复制或移动到启动文件夹中

```
"C:\Windows\User\your-user-name\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup" 
```

# java - 由于套接字异常，mongodb 插入失败

> ID：15419325
> 
> 赞同：0
> 
> 时间：2013-03-14T20:16:18.120
> 
> 标签：java, mongodb

我正在 Eclipse 中开发一个 Java 项目。我有一个登台服务器和一个实时服务器。这两个也有自己的 mongodb，它们在不同的服务器上运行在两个不同的端口（29017 和 27017）上。通过一个 Junit 测试，我想将数据从 live mongo 复制到 devel mongo。

最奇怪的事情：有时它有效，有时我得到一个套接字错误。我想知道为什么 mongo 有时完全拒绝编写插入内容，而在其他日子里它却完美无缺。这是 mongo 日志文件（插入代码的文件）和 Junit 测试脚本的摘录：

蒙哥日志：

```
Thu Mar 14 21:01:04 [initandlisten] connection accepted from xx.xxx.xxx.183:60848 #1    (1 connection now open)
Thu Mar 14 21:01:04 [conn1] run command admin.$cmd { isMaster: 1 }
Thu Mar 14 21:01:04 [conn1] command admin.$cmd command: { isMaster: 1 } ntoreturn:1 keyUpdates:0  reslen:90 0ms
Thu Mar 14 21:01:04 [conn1] opening db:  repgain
Thu Mar 14 21:01:04 [conn1] query repgain.editorconfigs query: { $and: [ { customer: "nokia" }, { category: "restaurant" } ] } ntoreturn:0 keyUpdates:0 locks(micros) W:5302 r:176 nreturned:0 reslen:20 0ms
Thu Mar 14 21:01:04 [conn1] Socket recv() errno:104 Connection reset by peer xx.xxx.xxx.183:60848
Thu Mar 14 21:01:04 [conn1] SocketException: remote: xx.xxx.xxx.183:60848 error: 9001 socket exception [1] server [xx.xxx.xxx.183:60848]
Thu Mar 14 21:01:04 [conn1] end connection xx.xxx.xxx.183:60848 (0 connections now open) 
```

junit 测试脚本：

```
public class CopyEditorConfig {

protected final Log logger = LogFactory.getLog(getClass());

private static final String CUSTOMER = "customerx";
private static final String CATEGORY = "categoryx";

@Test
public void test() {
    try {

        ObjectMapper om = new ObjectMapper();

        // script copies the config from m2 to m1.

        Mongo m1 = new Mongo("xxx.xxx.com", 29017); // devel
        Mongo m2 = new Mongo("yyy.yyy.com", 27017); // live
        Assert.assertNotNull(m1);
        Assert.assertNotNull(m2);

        logger.info("try to connect to db \"dbname\"");

        DB db2 = m2.getDB("dbname");

        logger.info("get collection \"config\"");
        DBCollection c2 = db2.getCollection("config");
        JacksonDBCollection<EditorTabConfig, ObjectId> ec2 = JacksonDBCollection.wrap(c2, EditorTabConfig.class, ObjectId.class);

        logger.info("find entry with customer {" + CUSTOMER + "} and category {" + CATEGORY + "}");
        EditorTabConfig config2 = ec2.findOne(DBQuery.and(DBQuery.is("customer", CUSTOMER), DBQuery.is("category", CATEGORY)));

        // config
        if (config2 == null) {
            logger.info("no customer found to copy.");
        } else {
            logger.info("Found config with id: {" + config2.objectId + "}");
            config2.objectId = null;
            logger.info("copy config");
            boolean found = false;

            DB db1 = m1.getDB("dbname");

            DBCollection c1 = db1.getCollection("config");
            JacksonDBCollection<EditorTabConfig, ObjectId> ec1 = JacksonDBCollection.wrap(c1, EditorTabConfig.class, ObjectId.class);

            EditorTabConfig config1 = ec1.findOne(DBQuery.and(DBQuery.is("customer", CUSTOMER), DBQuery.is("category", CATEGORY)));

            if (config1 != null) {
                found = true;
            }

            if (found == false) {
                WriteResult<EditorTabConfig, ObjectId> result = ec1.insert(config2);
                ObjectId id = result.getSavedId();
                logger.info("INSERT config with id: " + id);
            } else {
                logger.info("UPDATE config with id: " + config1.objectId);
                ec1.updateById(config1.objectId, config2);
            }

            StringWriter sw = new StringWriter();
            om.writeValue(sw, config2);
            logger.info(sw);
        }

    } catch (Exception e) {
        logger.error("exception occured: ", e);
    }
}
} 
```

当我阅读 eclipse 中的日志时，运行这个脚本似乎是成功的。我得到了`id`两者`c1`，`c2`数据也在这里。日志甚至指出，它没有在 devel 上找到配置并将其插入。如果我手动将其放在那里，那也是正确的。然后它得到“更新”。但是 mongo 日志保持不变。发生套接字异常，数据永远不会写入数据库。

我没有好主意来调试这个。如果可以的话，我很乐意从这里获得一些提示。另外，如果缺少任何信息，请告诉我，我很乐意分享。

问候，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T03:24:57.033

看来您与 mongo 服务器有连接问题。以下方法可以帮助您更好地诊断 mongo 服务器：

1.  尝试从日志文件中获取更多信息：

    $less */var/log/mongo/mongod.log*

    *或在mongod.conf*中定义的自定义日志文件

**   尝试使用 mongostat 监控服务器状态：

    $ mongostat -u ADMIN_USER -p ADMIN_PASS

    *   尝试使用 mongo cli 检查服务器运行状态：

    ```
    $ mongo admin -u ADMIN_USER -p ADMIN_PASS
    $ db.serverStatus() 
    ```

    更有用的命令位于：[http ://docs.mongodb.org/manual/reference/method/](http://docs.mongodb.org/manual/reference/method/)* 

 *有时它可能会遇到 Linux 系统配置。尝试调整 Linux 以获得更多连接和限制，这可能会有所帮助。要检查当前的 Linux 限制，请运行：

`$ ulimit -a`

以下建议可能会有所帮助：

Linux 将每个连接视为一个打开的文件。默认打开文件的最大数量为 1024。要增加此限制：

1.  修改*/etc/security/limits.conf*：

    ```
    root    soft    nofile     500000
    root    hard    nofile     512000
    root    soft    nproc      500000
    root    hard    nproc      512000 
    ```

2.  修改 */etc/sysctl.conf*

    ```
    fs.file-max=360000
    net.ipv4.ip_local_port_range=1024 65000 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T13:21:54.890

注释掉 mongod.conf 中将 IP 绑定到 127.0.0.1 的行。通常，默认设置为 127.0.0.1。对于 Linux，此配置文件位置应为 /etc/mongod.conf。一旦您将其注释掉，它将接收来自所有接口的连接。这为我修复了它，因为我也收到了这些套接字异常。*

# sql - 更新 SQL Server 2008 中的逗号分隔列

> ID：15419326
> 
> 赞同：0
> 
> 时间：2013-03-14T20:16:21.383
> 
> 标签：sql, sql-server-2008

我在 SQL Server 中有一个表，其中包含一个包含逗号分隔值`Settings`的列。`settingValue`

该列的示例数据：

```
0, 0
US, US
test@test.com, test@test.com 
```

我想编写一个更新查询，以便该列`settingValue`仅显示一个应该导致的值

```
0
US
test@test.com 
```

不知道从哪里开始我应该`,`先找到逗号（）然后截断语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:20:40.073

如果要删除第一个逗号后的所有内容，则可以使用：

```
update yourtable
set col = substring(col, 1, charindex(',', col)-1)
where charindex(',', col) > 0  -- only update the rows with a comma 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/196a4/1)

# javascript - 杜兰达尔路线开始时的参数

> ID：15419335
> 
> 赞同：0
> 
> 时间：2013-03-14T20:16:59.717
> 
> 标签：javascript, durandal

Durandal 的典型路线如下所示：

常规 - [http://mysite.com/#/Home](http://mysite.com/#/Home)

ID - [http://mysite.com/#/Person/123](http://mysite.com/#/Person/123) (Person/:id)

我试图弄清楚我需要在[http://durandaljs.com/documentation/Router/](http://durandaljs.com/documentation/Router/)上使用哪些方法，我需要覆盖以支持如下内容：

[http://mysite.com/#/Abc123/Home](http://mysite.com/#/Abc123/Home) (:siteId/Home)

[http://mysite.com/#/Abc123/Person/123](http://mysite.com/#/Abc123/Person/123) (:siteId/Person/:id)

我将如何实现这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:11:16.470

你是在自问自答。要实现[http://mysite.com/#/abc123/Home](http://mysite.com/#/abc123/Home)，您必须定义一个建模的路由，例如：

```
var router = require('durandal/plugins/router');
router.mapRoute('#/:sideId/home','viewmodels/customViewModel','This is the title of the view'); 
```

当有人去你的路线时，它会导航到你的 customViewModel。

请记住，路由器将首先导航到最简单的路线，因此请正确排序它们（例如，如果您有 router.mapRoute('','viewmodels/home','home view') 作为您的第一条路线，路由器将始终转到此路由，而不是在其路由器队列中进一步阅读）。

# css - 使用 CSS 创建子菜单

> ID：15419345
> 
> 赞同：1
> 
> 时间：2013-03-14T20:17:24.507
> 
> 标签：css, submenu

有人能帮我吗。我有这个 html 代码，我想用 css 设计我的子菜单，但我是新手，我真的需要帮助

```
<div class="nav-collapse collapse">
            <ul id="nav-list" class="nav pull-right">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#updates">Updates</a></li>
                <li><a href="#screenshots">Screenshots</a></li>
                <li><a href="#howto">How to</a></li>
                    <ul>
                    <li><a href="#">Sub Item 1.1</a></li>
                    <li><a href="#">Sub Item 1.2</a></li>
                    </ul>
                <li><a href="#permissions">Permissions</a></li>
                <li><a href="#download">Download</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div> 
```

我想为我的子菜单设置下拉列表。我的菜单目前是水平的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T20:20:52.587

为了让你开始...

```
.nav li ul { display: none; }

.nav li:hover ul { display: block;} 
```

您的 HTML 还需要进行少量编辑...您需要将子菜单`<ul>`嵌套在 parent`<li>`中。如下所示：

```
<li><a href="#howto">How to</a>
    <ul>
        <li><a href="#">Sub Item 1.1</a></li>
        <li><a href="#">Sub Item 1.2</a></li>
    </ul>
</li> 
```

这是一个演示此工作的jsfiddle，显然它不是水平的，因为我缺少您已经制作的样式，但是当您将鼠标悬停在“如何”上时，该功能仍然有效：

[http://jsfiddle.net/Zuvdf/](http://jsfiddle.net/Zuvdf/)

# jquery - jQuery 验证远程选项 Flask

> ID：15419357
> 
> 赞同：0
> 
> 时间：2013-03-14T20:18:09.987
> 
> 标签：jquery, python, jquery-validate, flask

如果新用户输入的电子邮件地址已经存在，我正在尝试检查表单。

这是我的 HTML：

```
$("#createform").validate({
            errorClass: "errormessage",
            validClass: "success",

        rules: {
            fname: {
                required: true,
                minlength: 2,
                string: true,
            },

            lname: {
                required: true,
                minlength: 2,
                string: true,
            },

            email: {
                required: true,
                email: true,
                remote: $.getJSON($SCRIPT_ROOT + "/_check_mail")
            },

            password: {
                required: true,
                minlength: 5,
            },

            confirmpassword: {
                equalTo: "#password"
            }
        } 
```

这是我的 Flask 方法：

```
@app.route('/_check_mail')
def check_mail():
    mail = request.args.get('email')
    check = database.check_mail(mail)
    return check 
```

其中 database.check_mail(mail) 检查电子邮件是否已在数据库中并返回 True 或 False（在 JSON 中）。

当我第一次加载页面并且客户端尝试访问烧瓶 URL (/_check_mail) 时，它可以工作：

*   请求网址：`http://0.0.0.0:5000/_check_mail`
*   请求方法：获取状态
*   代码：200 OK

但是当我输入电子邮件时，我将此请求发送到获得 404 响应的服务器：

*   请求网址：`http://0.0.0.0:5000/[object%20Object]?email=arnoutaertgeerts%40gmail.com`
*   请求方法：GET
*   状态码：404 未找到

所以我认为发送电子邮件有问题吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:42:57.670

问题解决了！我将此用于我的请求：

```
email: {
    required: true,
    email: true,
    remote: function( request, response ) {
        $.getJSON($SCRIPT_ROOT + "/_check_mail", {
        email: $('#email').val()
        }, response);
} 
```

现在一切正常，除了显示错误消息。当电子邮件已经存在时，我会返回带有错误消息的字符串（如文档中所述），但不会显示消息。但是在查看收到的回复时，我清楚地收到了它！

# java - 如何从选项卡键导航中排除列？

> ID：15419358
> 
> 赞同：2
> 
> 时间：2013-03-14T20:18:12.020
> 
> 标签：java, swing, jtable, key-bindings

通过按 Tab 键将焦点移动到下一个单元格。我想更改此行为，以便从选项卡键导航中排除某些列。假设一个表由 5 列组成，那么只有第 1 列和第 3 列应该被考虑用于导航。从我读到`FocusTraversalPolicy`的内容用于此目的。然而，实现这种行为似乎相当复杂，因为没有提供列和行索引。那么如何返回正确的组件呢？

```
public class Table extends JTable{
int columnCount = 5;
int[] tab = { 1, 3 };  
    public Table(){
        ...
        this.setFocusTraversalPolicy(new FocusTraversalPolicy() {

        @Override
        public Component getLastComponent(Container arg0) {
             return null;
        }

        @Override
        public Component getFirstComponent(Container arg0) {
            return null;
        }

        @Override
        public Component getDefaultComponent(Container arg0) {
            return null;
        }

        @Override
        public Component getComponentBefore(Container arg0, Component arg1) {
            return null;
        }

        @Override
        public Component getComponentAfter(Container arg0, Component arg1) {
            return null;
        }
    }); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T00:56:00.787

> 根据我的阅读，FocusTraversalPolicy 用于此目的

表格列不是真正的组件，因此一旦表格获得焦点，FocusTraversalPolicy 就没有任何意义。JTable 提供了从一个单元格移动到另一个单元格的动作。

您也许可以使用[Table Tabbing](http://tips4java.wordpress.com/2008/11/04/table-tabbing/)中的概念。例如：

```
public class SkipColumnAction extends WrappedAction
{
    private JTable table;
    private Set columnsToSkip;

    /*
     *  Specify the component and KeyStroke for the Action we want to wrap
     */
    public SkipColumnAction(JTable table, KeyStroke keyStroke, Set columnsToSkip)
    {
        super(table, keyStroke);
        this.table = table;
        this.columnsToSkip = columnsToSkip;
    }

    /*
     *  Provide the custom behaviour of the Action
     */
    public void actionPerformed(ActionEvent e)
    {
        TableColumnModel tcm = table.getColumnModel();
        String header;

        do
        {
            invokeOriginalAction( e );

            int column = table.getSelectedColumn();
            header = tcm.getColumn( column ).getHeaderValue().toString();
        }
        while (columnsToSkip.contains( header ));
    }
} 
```

要使用该类，您将执行以下操作：

```
Set<String> columnsToSkip = new HashSet<String>();
columnsToSkip.add("Column Name ?");
columnsToSkip.add("Column Name ?");
new SkipColumnAction(table, KeyStroke.getKeyStroke("TAB"), columnsToSkip);
new SkipColumnAction(table, KeyStroke.getKeyStroke("shift TAB"), columnsToSkip); 
```

关键是您必须将表格的默认选项卡操作替换为您自己的选项卡操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-27T19:35:34.623

有点过时，但另一种解决方案是覆盖 JTable 方法`public void changeSelection(final int row, final int column, boolean toggle, boolean extend)` 。根据文档，这种方法......

> 根据两个标志的状态更新表的选择模型：`toggle`和`extend`。UI 接收到的键盘或鼠标事件导致的对选择的大多数更改都通过此方法进行引导，因此该行为可能会被子类覆盖。某些 UI 可能需要比此方法提供的更多功能，例如在操作引线以进行不连续选择时，并且可能不会调用此方法进行某些选择更改。

JTable 类在确定焦点应如何移动后调用此方法，从而`row`表示`column`新的目标单元格。

如果重写该方法，则可以根据需要更改此调用中的行和列，例如跳过只读单元格的选择。只需确定新的行和列是什么并将它们传递回`super.changeSelection()`方法。

这种方法的好处是它可以与定义的 JTable 焦点遍历键一起使用。

# r - 在堆叠的 ggplot 条形图中标记单个条形图

> ID：15419360
> 
> 赞同：4
> 
> 时间：2013-03-14T20:18:19.010
> 
> 标签：r, ggplot2, label, stacked-area-chart

是否有一种简单的方法可以在“堆叠”条形图中标记*单个“块”，如下所示。*我希望标签位于每个块的顶部附近，但我最新的方法导致以某种方式将文本交换为美国和墨西哥，如下所示。

![条形图示例](../Images/efd922bfc70a8a5e26145a63dff33d02.png)

环顾四周寻找解决方案，我只找到`y`了必须在外部预先计算文本值的方法，除了额外的逻辑之外，这带来了控制块堆叠顺序的问题......
我还发现了这个[stackoverflow 问题](https://stackoverflow.com/questions/12386005/r-stacked-percentage-bar-plot-with-percentage-of-binary-factor-and-labels-with)，在那里我有了在 a 中使用 a 的想法`geom="text"`（`stat_bin` 见下面的代码）
这是一个精简的代码片段，用于说明我当前的方法。*我不一定要修复这个片段，任何标记堆栈条形图区域的通用习语都可以！*
编辑：（鉴于这个问题到目前为止得到的两个答案）
我想强调的是，**我宁愿选择不意味着*预先计算的解决方案*文本的 y 位置**。

```
# sample data source
df.StackData <- data.frame(
    QType = c("A4-1", "A4-1", "A4-1",  "B3", "B3", "B3"),
    Country = c("Canada", "USA", "Mexico", "Canada", "USA", "Mexico"),
    NbOfCases = c(1000, 1320, 380, 400, 1000, 812),
    AvgRate = c(17.2, 11.4, 44.21, 17.3, 15.3, 39.7),
    Comment = c("Can", "US", "Mex", "Can", "US", "Mex")
) 
```

和 ggplot 调用。它产生了上面显示的图表，带有奇怪的标签交换（还有一个额外的图例，'虽然这个图例问题很容易处理；我只是在准备这个问题时注意到它）。

```
ggplot(data=df.StackData,
       aes(x=QType, y=NbOfCases, fill=Country))+
  geom_bar(stat="identity", width=1) +
  stat_bin(geom="text", aes(label=paste("R coef =",
                                        formatC(AvgRate, format="f", digits=3),
                                        "(", Comment, ")" ),
                            vjust=1.5, size=3 
                        )
  ) 
```

我最初的尝试如下向图中添加了 geom_text() ，但当然 y 值是错误的（将文本相对于图的最底部而不是单个块的底部）...

```
 ... +
  geom_text(mapping=aes(x=QType, y=NbOfCases, 
                        label=paste("R coef =",
                                    formatC(AvgRate, format="f", digits=3),
                                    "(", Comment, ")" ),
                         vjust=1.5),
            size=3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:50:53.580

这是一个解决方案。这里有两件事。首先，您应该将您`reorder`的级别与您`data.frame`在数据中的顺序相同`df.StackData`。其次，创建另一个通过计算数据的累积和来计算`data.frame`。`y-position`

```
# reorder levels of factor to the same order as found in data
df.StackData$Country <- factor(df.StackData$Country, 
          levels=c("Canada", "USA", "Mexico"), ordered=TRUE)
p <- ggplot(data=df.StackData, aes(x=QType, fill=Country))
p <- p + geom_bar(aes(weights=NbOfCases))

# compute corresponding y-axis positions by cumulative sum
require(plyr)
df <- ddply(df.StackData, .(QType), function(x) {
    x$NbOfCases <- cumsum(x$NbOfCases)
    x
})

# then use geom_text with data = df (the newly created data)
p + geom_text(data = df,  aes(x=QType, y=NbOfCases, 
        label=paste("R coef =", 
        formatC(AvgRate, format="f", digits=3), 
        "(", Comment, ")" ), vjust=1.5), size=3) 
```

![在此处输入图像描述](../Images/62e646e555b01b9c5fd3c3462d622f5a.png)

**编辑：**如果您不想自己计算 y-pos，那么您必须使用`stat_bin`. 只需重新排序列的级别，`Country`它就可以工作：

```
# data
df.StackData <- data.frame(
    QType = c("A4-1", "A4-1", "A4-1",  "B3", "B3", "B3"),
    Country = c("Canada", "USA", "Mexico", "Canada", "USA", "Mexico"),
    NbOfCases = c(1000, 1320, 380, 400, 1000, 812),
    AvgRate = c(17.2, 11.4, 44.21, 17.3, 15.3, 39.7),
    Comment = c("Can", "US", "Mex", "Can", "US", "Mex")
)

# just add this: reorder the level 
df.StackData$Country <- factor(df.StackData$Country, 
          levels=c("Canada", "USA", "Mexico"), ordered=TRUE)

# your code again using stat_bin (just changed the width to 0.75)
ggplot(data=df.StackData,
       aes(x=QType, y=NbOfCases, fill=Country))+
  geom_bar(stat="identity", width=.75) +
  stat_bin(geom="text", size=4, aes(label=paste("R coef =",
                                        formatC(AvgRate, format="f", digits=3),
                                        "(", Comment, ")" ),
                            vjust=1.5)) 
```

![在此处输入图像描述](../Images/b092383ca5aa03d2c6cd2c7d3ca4dfc2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:56:41.953

这是一个解决方案

```
df2 = ddply(df.StackData, .(QType), transform, 
 pos = cumsum(NbOfCases) - 0.5 * NbOfCases)

ggplot(data = df2, aes(x = QType, y = NbOfCases, fill = Country)) +
  geom_bar(stat = "identity") +
  geom_text(aes(y = pos, label = paste("R coef =", 
   formatC(AvgRate, format="f", digits=3), "(", Comment, ")" ))
  ) 
```

![伊姆古尔](../Images/0f460b8bdfedbc30ec426b6132ac5898.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T23:46:00.460

这是另一种选择 - 因为默认情况下您的因子将按字母顺序排序，所以我建议重新排序您的数据框以匹配此，而不是重新排序因子以匹配数据框的顺序。在我看来，这将允许一个更通用的解决方案。你得到一个你不想要的图例的唯一原因是你里面有大小`aes`- 我已经在下面修复了。

使用您的数据：

```
df.StackData <- with(df.StackData, df.StackData[order(Country),]) 
```

然后您可以将原始解决方案与`stat_bin`. 我用一些更复杂的数据集对其进行了测试，以检查它是否有效：

```
df.StackData <- data.frame(
  QType = rep(c("A4-1","B3"), each = 6),
  Country = rep(c("Canada", "USA", "Mexico", "UK", "Sweden", "Australia"), times = 2),
  NbOfCases = c(1000, 1320, 380, 400, 1000, 812, 542, 531, 674, 328, 795, 721),
  AvgRate = c(17.2, 11.4, 44.21, 17.3, 15.3, 39.7, 21.1, 25.3, 24.1, 31.3, 38.4, 36.1),
  Comment = rep(c("Can", "US", "Mex", "UK", "Aus", "Swe"), times = 2)
) 
```

不排序：

```
ggplot(data=df.StackData,
       aes(x=QType, y=NbOfCases, fill=Country))+
  geom_bar(stat="identity", width=1) +
  stat_bin(geom="text", aes(label=paste("R coef =", formatC(AvgRate, format="f", digits=3),
"(", Comment, ")" ),  vjust = 1),size=3)
geom_text(aes(label = Comment), stat="identity") 
```

![在此处输入图像描述](../Images/0d628d09fa2195dbf3458c2a399e7774.png)

排序后：

df.StackData <- with(df.StackData, df.StackData[order(Country),])

![在此处输入图像描述](../Images/7189fefb09ac9a655b20cb68b38e096b.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-22T21:22:46.437

为了删除额外的图例，您可以使用`show_guide=FALSE`. 在您的示例中：

```
ggplot(data=df.StackData,
       aes(x=QType, y=NbOfCases, fill=Country))+
  geom_bar(stat="identity", width=.75) +
  stat_bin(geom="text", size=4, aes(label=paste("R coef =",
                                        formatC(AvgRate, format="f", digits=3),
                                        "(", Comment, ")" ),
                            vjust=1.5), show_guide=FALSE) 
```

# iphone - 每次调用方法时，CADisplay 链接似乎都在加速

> ID：15419364
> 
> 赞同：0
> 
> 时间：2013-03-14T20:18:35.673
> 
> 标签：iphone, objective-c, cadisplaylink

我正在开发一个 iPhone 应用程序，在我的应用程序中有一个从屏幕顶部移动到底部的对象。为此，我使用 CADisplay 链接。一旦对象离开屏幕，它就应该重新开始它的路线。我遇到的问题是，每次对象重新启动其路线时，它都会加速。这种情况一直持续到物体运动得如此之快以至于你几乎看不到它。任何想法为什么会发生这种情况以及如何阻止它？任何帮助表示赞赏，在此先感谢！

```
-(void)spawnButton{

int x = (arc4random() % (240) + 40;
int y = -100;

button1.center = CGPointMake(x,y);

displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(moveObject)];
[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];

}

-(void) moveObject {

int z = 1;

button1.center = CGPointMake(button1.center.x , button1.center.y +z);

if (button1.center.y >= 480) {

    [self spawnButton];

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:29:29.583

您将在每次调用 时创建一个新的显示链接`spawnButton`。如果您没有从运行循环中删除旧的显示链接，那么旧的显示链接将继续发送`moveObject:`消息。因此，在给`spawnButton`您两次呼叫后，每个视频帧将收到两条`moveObject:`消息，在三个呼叫后，您将在每个视频帧收到三条`moveObject:`消息，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:24:50.280

每次我重新启动对象路由时，我似乎已经通过使显示链接无效来解决问题。

```
if (button1.center.y >= 480) {

[self spawnButton];

[displaylink invalidate];

}
} 
```

# windows - 用于在文本文档中搜索大于 620 的任何数字的批处理文件

> ID：15419365
> 
> 赞同：0
> 
> 时间：2013-03-14T20:18:35.930
> 
> 标签：windows, for-loop, batch-file, cmd

用于在文本文件中搜索大于 620 的数字的批处理文件。如果找到大于 620 的数字，则会触发警报（电子邮件）。

文本文件如下所示： 11 个文件 30 个文件 88 个文件 1 个文件

我想知道是否可以使用 if 和 find 命令的组合来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:28:18.980

有点像这样使用：

```
@echo off &setlocal
for /f "tokens=1*" %%i in (test.txt) do if "%%i" gtr "620" echo %%i %%j
endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T00:20:20.677

```
@ECHO OFF
SETLOCAL
(set alert=)
for /f %%i in (thetextfile.txt) do if %%i gtr 620 set alert=%%i
IF DEFINED alert ECHO sendmail found %alert% files 
```

# joomla - 视觉增强的 joomla 2.5 类别列表组件（默认是丑陋的）

> ID：15419370
> 
> 赞同：0
> 
> 时间：2013-03-14T20:18:48.590
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla-component

我有一个加载类别列表的菜单项。

问题是我不知道除了默认组件之外是否还有视觉增强组件。

您能否指出我使用 Joomla 2.5 的正确方向

[打印屏幕： http](http://snag.gy/pEQsb.jpg) ://snag.gy/pEQsb.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:42:23.257

只是添加一个链接到 Marko D 关于模板覆盖的建议（这将是正确的答案）： [http](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core) ://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core和[http://docs.joomla.org/Understanding_Output_Overrides](http://docs.joomla.org/Understanding_Output_Overrides)解释了如何模板覆盖工作

这确实是调整列表创建方式的最简单方法。当然，在您的模板中使用 CSS。

# c - 在 C 中通过 TCP 套接字发送二维整数数组

> ID：15419373
> 
> 赞同：0
> 
> 时间：2013-03-14T20:19:00.887
> 
> 标签：c, sockets, serialization, tcp

我想将二维整数数组发送到服务器以进行矩阵乘法。但问题是我在服务器中收到了一个 2d 零数组。

这是我的尝试

客户：

```
 int a[2][2] = {{1,1},{2,2}};
    write(fd, a, sizeof(a)); 
```

服务器：

```
 int a[2][2] = {};
    read(client, a,sizeof(a)); 
```

我感谢您的帮助

# session - 如何计算集群环境中的登录用户？

> ID：15419375
> 
> 赞同：1
> 
> 时间：2013-03-14T20:19:13.340
> 
> 标签：session, spring-security, cluster-computing

我使用 Spring Security，我想知道如何以正确的方式计算集群中的登录用户。我不想在 DB 中使用会话持久性。

是否可以使用`SessionRegistry`对象来解决我的问题？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:42:24.993

如果您的意思是可以使用默认的 in-memory `SessionRegistry`，那么不，它不是，因为它只存在于单个 VM 中。如果您在多个服务器之间进行负载平衡会话，那么您需要实现一个`SessionRegistry`使用某种持久共享存储的共享。

# swing - 在 EJB 应用程序（在 Glassfish 上运行）和 Swing 应用程序之间实现两阶段提交协议

> ID：15419376
> 
> 赞同：2
> 
> 时间：2013-03-14T20:19:18.743
> 
> 标签：swing, glassfish, ejb, jms, 2phase-commit

我有一个`EJB`在服务器上运行的应用程序，`Glassfish`它将数据存储在`MySQL`我称之为全局数据库的数据库中。我有两个确切的远程 Swing 应用程序，它们是`EJB's`使用`RMI`. 他们有自己的本地数据库，以防连接丢失。

我的目标是实现两阶段提交协议，即让一个参与者作为协调者，其他人作为参与者。

我能想到的一种方法是使用`JMS`即跨队列发送消息并使远程客户端侦听这些消息并采取适当的措施来实现。我这样做是在 Swing 应用程序之一的 Buttonclick 上发送消息。问题是，即使我已经实现了困难`MessageListener`，`onMessage()`方法也没有收到其他客户端的任何消息。

每个远程客户端都有以下属性集：

```
 props.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.SerialInitContextFactory");
 props.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
 props.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
 props.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
 props.setProperty("org.omg.CORBA.ORBInitialPort", "3700"); 
```

这是为了连接到`Glassfish`服务器并访问我已经配置的`connectionFactory`和。`Queue`

是因为只允许在服务器上运行的应用程序而不是远程应用程序接收消息吗？

欢迎任何有关 2 台 PC 拓扑的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:31:32.317

为此，我们使用 JMS 在这些系统之间交换消息，即一个充当协调者，他将通过在队列上发送消息来启动该过程，而其他人将通过在队列上再次发回消息来相应地做出响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:02:48.687

由于您使用的是 EJB，因此您可以使用 JTA 来管理事务，它是两阶段提交协议的标准实现，并且 JMS 也支持 JTA。这是我的步骤：

1.  将跨属性配置为必需/强制/支持，取决于您的需要。
2.  在您的客户端中，通过从 EJB 服务器查找 jndi 来获取 UserTransaction。
3.  从客户端开始交易。
4.  在客户端提交/回滚事务

这就是所谓的“客户所有者交易设计模式”。我建议你阅读本书*javatransactionsbook*

# ember.js - 在 ember.js 中引导数据

> ID：15419381
> 
> 赞同：6
> 
> 时间：2013-03-14T20:19:45.640
> 
> 标签：ember.js, ember-data

在页面加载时为 emberjs 应用程序引导数据的最佳方式是什么。我知道它很可能会从 data-for 属性或隐藏 div 中的数据获取数据，但是这会在 emberjs 应用程序生命周期中的哪个位置进行呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:06:24.193

您可能正在加载几种不同类型的数据。我一直在使用`ember-data`模型以及`DS.FixtureAdapter`（用于静态数据）或`DS.RESTAdapter`（用于动态数据。

这是一个使用固定装置的小例子：

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
});

App.Page = DS.Model.extend({
  title: DS.attr('string')
});

App.Page.FIXTURES = [{
    id: 1,
    title: "Test Title #1"
  }, {
    id: 2,
    title: "Random Title #2"
  }]; 
```

在我的（小型）应用程序中，我只是在定义商店和模型后直接加载夹具数据。这适用于简单的一对一关联（想想类型或类别的静态列表）。当使用非固定类型数据时，它只是指定为`model`路线上的属性，并在需要时加载。

**更新**

要在页面加载时预加载初始数据（例如，初始页面状态，如loginIn），您可以使用`DS.Store#load`：

```
Store = DS.Store.create({
  revision: 11
});

Page = DS.Model.extend({
  title: DS.attr('string')
});

Store.load(Page, {id: 1, title: 'Wow Cool Title'});

Store.find(Page, 1).get('title') //=> 'Wow Cool Title' 
```

# django - django tables2 复选框

> ID：15419385
> 
> 赞同：2
> 
> 时间：2013-03-14T20:19:50.887
> 
> 标签：django, checkbox, header, django-tables2

我是编程新手，所以这可能是一个微不足道的问题......

在 django-tables2 中，我希望能够在使用 CheckBoxColumn 时显示列标题名称。现在，所有复选框都显示在每一行中，包括在标题中。我不介意在标题中有一个复选框（我认为从长远来看，这将是一个“全选”的好方法），但我需要显示列名。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:12:37.243

创建您自己的继承自 tables.CheckBoxColumn 的自定义复选框列类，然后覆盖 render 方法，然后将复选框及其标签指定为 html 响应。

```
class CustomCheckBoxColumn(tables.CheckBoxColumn):

    def render(self, value, record, bound_column):
        return mark_safe(u'column Name<input type=checkbox, … />') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T19:33:51.793

另一种选择是使用[`TemplateColumn()`](https://django-tables2.readthedocs.io/en/latest/pages/api-reference.html#templatecolumn)而不是`CheckBoxColumn()`

```
template = '<input type="checkbox" name="{{record.name}}" />'
checkbox_column_header = tables.TemplateColumn(template) 
```

# c# - 自定义 PropertyDescriptor 始终只读

> ID：15419387
> 
> 赞同：1
> 
> 时间：2013-03-14T20:20:11.827
> 
> 标签：c#, propertygrid, propertydescriptor

我做了以下自定义 PropertyDescriptor

```
public class CustomProperty : PropertyDescriptor
{
    private PropertyDescriptor _innerPropertyDescriptor;
    private bool _ronly;

    public CustomProperty(PropertyDescriptor inner, Attribute[] attrs)
        : base(inner.Name, attrs)
    {
        _innerPropertyDescriptor = inner;
        _ronly = inner.IsReadOnly;           
    }
    public override object GetValue(object component)
    {
        return _innerPropertyDescriptor.GetValue(component);
    }
    public override bool SupportsChangeEvents
    {
        get { return true; }
    }

    public override Type PropertyType
    {
        get { return _innerPropertyDescriptor.GetType(); }
    }

    public override void ResetValue(object component)
    {
        // Not relevant.
    }

    public override void SetValue(object component, object value)
    {
        _innerPropertyDescriptor = (CustomProperty)value;
    }

    public override bool ShouldSerializeValue(object component)
    {
        return false;
    }

    public override bool CanResetValue(object component)
    {
        return true;
    }

    public override Type ComponentType
    {
        get { return _innerPropertyDescriptor.GetType(); }
    }
    public override bool IsReadOnly
    {
        get
        {
            return false;
        }
    }
} 
```

此 PropertyDescriptor 将用于以下类

```
public class MyClass : ICustomTypeDescriptor
{
    #region MyClass Properties
    ......
    #endregion
    #region ICustomTypeDescriptor Implementation
    public AttributeCollection GetAttributes()
    {
        return TypeDescriptor.GetAttributes(this,true);
    }
    public string GetClassName()
    {
        return TypeDescriptor.GetClassName(this, true);
    }
    public string GetComponentName()
    {
        return TypeDescriptor.GetComponentName(this, true);
    }
    public TypeConverter GetConverter()
    {
        return TypeDescriptor.GetConverter(this, true);
    }
    public EventDescriptor GetDefaultEvent()
    {
        return TypeDescriptor.GetDefaultEvent(this, true);
    }
    public PropertyDescriptor GetDefaultProperty()
    {
        return TypeDescriptor.GetDefaultProperty(this, true);
    }
    public object GetEditor(System.Type editorBaseType)
    {
        return TypeDescriptor.GetEditor(this,editorBaseType, true);
    }
    public EventDescriptorCollection GetEvents(System.Attribute[] attributes)
    {
        return TypeDescriptor.GetEvents(this,attributes, true);
    }
    public EventDescriptorCollection GetEvents()
    {
        return TypeDescriptor.GetEvents(this, true);
    }
    public PropertyDescriptorCollection GetProperties(System.Attribute[] attributes)
    {
        PropertyDescriptorCollection originalCollection = TypeDescriptor.GetProperties(this,attributes,true);
        PropertyDescriptor[] pds = new PropertyDescriptor[originalCollection.Count];
        originalCollection.CopyTo(pds,0);
        PropertyDescriptorCollection newCollection = new PropertyDescriptorCollection(pds);
        for (int i = 0; i < originalCollection.Count; i++)
        {
            PropertyDescriptor pd = originalCollection[i];
            List<Attribute> la = new List<Attribute>();
            foreach (Attribute attribute in pd.Attributes)
                la.Add(attribute);
            CustomProperty cp = new CustomProperty(pd, la.ToArray());                
            newCollection.RemoveAt(i);
            newCollection.Insert(i, cp);
        }         
        return newCollection;
    }
    public PropertyDescriptorCollection GetProperties()
    {
        return TypeDescriptor.GetProperties(this, true);
    }
    public object GetPropertyOwner(PropertyDescriptor pd)
    {
        return this;
    }
    #endregion
} 
```

我在这个实现中所做的是重写 MyClass 属性，以便能够从 Visual Studio PropertyGrid 管理重置功能。一切似乎都很好，但是这种实现会导致错误的效果：我存储在 PropertyDescriptorCollection 中的所有新属性都是只读的！我不明白为什么！？我什么都试过了，我也放了一个`return false;`属性`IsReadOnly`，`CustomProperty`但没办法。属性在 PropertGrid 中始终显示为只读。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:41:56.367

您的 PropertyType 和 ComponentType 实现已损坏。他们应该返回**内部**属性的 PropertyType / ComponentType。通过返回 GetType，您将返回类似于 ReflectionPropertyDescriptor 的东西，它既不可编辑也不可转换。

```
 public override Type PropertyType
    {
        get { return _innerPropertyDescriptor.PropertyType; }
    } 
```

# tsql - 从视图创建的多维数据集维度中提取数据

> ID：15419388
> 
> 赞同：1
> 
> 时间：2013-03-14T20:20:16.700
> 
> 标签：tsql, ssas, mdx, data-mining, cube-dimension

我们已将 SQL 视图表导入到维度中。我们已经编写了一个与数据立方体（MDX 查询）对话的连接器。也就是说，我们最初导入的视图包含我们需要查询的所有原始数据。问题是，MDX 客户端只需要“选择”度量。我们想要显示原始数据，这意味着，我们想要查看与创建的初始 SQL 视图相同的列\属性。

这甚至可能吗？我们知道我们可以使用 Linq 或其他任何东西来与 SQL 视图表对话，但最好以 MDX 多维数据集模式与“哑”多维数据集维度的数据进行对话。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:04:29.330

我不明白为什么你真的想使用多维数据集而不是你的视图，但无论如何你有两种解决方案可以从多维数据集中提取维度的成员：通过 DMV 或通过标准 MDX 查询。

名为 $system.MdSchema_members 的 DMV 将返回您的维度的成员。您应该能够检索您正在寻找的值。[http://msdn.microsoft.com/en-us/library/ms126046.aspx](http://msdn.microsoft.com/en-us/library/ms126046.aspx)

另一种解决方案是在 MDX 查询上方使用 create measure 语句创建一个虚拟度量。在您的 SQL 语句中，然后将此虚拟度量放在轴 0 上，并将您要查找的所有属性放在轴 1 上。这应该会返回接近您视图中 select * 返回的结果的结果。

# javascript - 链接到 SwipeView 幻灯片上的其他页面

> ID：15419395
> 
> 赞同：0
> 
> 时间：2013-03-14T20:20:49.103
> 
> 标签：javascript, mobile, hyperlink, swipeview

我使用 SwipeView ( [http://cubiq.org/swipeview](http://cubiq.org/swipeview) ) 正确实现了触摸幻灯片，但我需要超越并允许每个图像幻灯片链接到另一个页面。

你做过吗？

请告诉我如何实现这一目标！我在项目站点中看到几个月前有人问过同样的问题而没有答案。这就是我在这里的原因。

这是您所知道的代码：

```
<div id="wrapper"></div>    

<script type="text/javascript">
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

var gallery,
    el,
    i,
    page,
    dots = document.querySelectorAll('#nav li'),
    slides = [
        {
            img: 'images/1.png',
            width: 270,
            height: 365
            link: 'www.google.com,
        },
        {
            img: 'images/2.png',
            width: 270,
            height: 365,
        },
        {

    ];

gallery = new SwipeView('#wrapper', { numberOfPages: slides.length });

// Load initial data
for (i=0; i<3; i++) {
    page = i==0 ? slides.length-1 : i-1;
    el = document.createElement('img');
    el.className = 'loading';
    el.src = slides[page].img;
    el.width = slides[page].width;
    el.height = slides[page].height;
    el.onload = function () { this.className = ''; }
    gallery.masterPages[i].appendChild(el);

    el = document.createElement('span');
    el.innerHTML = slides[page].desc;
    gallery.masterPages[i].appendChild(el)
}

gallery.onFlip(function () {
    var el,
        upcoming,
        i;

    for (i=0; i<3; i++) {
        upcoming = gallery.masterPages[i].dataset.upcomingPageIndex;

        if (upcoming != gallery.masterPages[i].dataset.pageIndex) {
            el = gallery.masterPages[i].querySelector('img');
            el.className = 'loading';
            el.src = slides[upcoming].img;
            el.width = slides[upcoming].width;
            el.height = slides[upcoming].height;

            el = gallery.masterPages[i].querySelector('span');
            el.innerHTML = slides[upcoming].desc;
        }
    }

    document.querySelector('#nav .selected').className = '';
    dots[gallery.pageIndex+1].className = 'selected';
});

gallery.onMoveOut(function () {
    gallery.masterPages[gallery.currentMasterPage].className = gallery.masterPages[gallery.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/, '');
});

gallery.onMoveIn(function () {
    var className = gallery.masterPages[gallery.currentMasterPage].className;
    /(^|\s)swipeview-active(\s|$)/.test(className) || (gallery.masterPages[gallery.currentMasterPage].className = !className ? 'swipeview-active' : className + ' swipeview-active');
});

</script> 
```

非常感谢！

-马塞洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T07:37:01.463

以下代码在 ipad 上适用于我：

```
<script type="text/javascript">
  document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
  var gallery,
  el,
  lnk,
  i,
  page,
  dots = document.querySelectorAll('#nav li'),
  slides = [
    {
      img: 'img/startseite/bild-1.jpg',
      width: 1024,
      height: 721,
      desc: 'Description 1',
      link: 'http://www.google.de'
    },
    {
      img: 'img/startseite/bild-2.jpg',
      width: 1024,
      height: 721,
      desc: 'Description 2',
      link: 'http://www.heise.de'
    },
    {
      img: 'img/startseite/bild-3.jpg',
      width: 1024,
      height: 721,
      desc: 'Description 3',
      link: ''
    },
    {
      img: 'img/startseite/bild-4.jpg',
      width: 1024,
      height: 721,
      desc: 'Description 4',
      link: ''
    }
  ];
  gallery = new SwipeView('#contentslide', { numberOfPages: slides.length });
  // Load initial data
  for (i=0; i<3; i++) {
    page = i==0 ? slides.length-1 : i-1;
    // if link is set, create a-tag
    if(slides[page].link != ''){
      lnk = document.createElement('a');
      lnk.href = slides[page].link;
      lnk.title = slides[page].link;
      gallery.masterPages[i].appendChild(lnk);
    }
    el = document.createElement('img');
    el.className = 'loading';
    el.src = slides[page].img;
    el.width = slides[page].width;
    el.height = slides[page].height;
    el.onload = function () { this.className = ''; }
    // if there's a link, append the img inside the a-tag
    if(slides[page].link != ''){
      gallery.masterPages[i].firstChild.appendChild(el);
    }else{
      gallery.masterPages[i].appendChild(el);
    }
    el = document.createElement('span');
    el.innerHTML = slides[page].desc;
    // if there's a link, append the span inside the a-tag
    if(slides[page].link != ''){
      gallery.masterPages[i].firstChild.appendChild(el);
    }else{
      gallery.masterPages[i].appendChild(el);
    }
  }
  ...
</script> 
```

# python - 如何使用 text.split() 并保留空白（空）行

> ID：15419399
> 
> 赞同：2
> 
> 时间：2013-03-14T20:20:58.150
> 
> 标签：python

python新手，我的程序需要一些帮助。我有一个代码，它接收一个未格式化的文本文档，进行一些格式化（设置页宽和边距），然后输出一个新的文本文档。我的整个代码工作正常，除了这个产生最终输出的函数。

这是问题代码的一部分：

```
def process(document, pagewidth, margins, formats):
    res = []
    onlypw = []
    pwmarg = []
    count = 0
    marg = 0

    for segment in margins: 

        for i in range(count, segment[0]):
            res.append(document[i])
        text = ''

    foundmargin = -1
    for i in range(segment[0], segment[1]+1):
        marg = segment[2]
        text = text + '\n' + document[i].strip(' ')

    words = text.split() 
```

注意：segment [0] 表示文档的开头，如果您想知道范围，segment[1] 仅表示文档的结尾。我的问题是当我将文本复制到单词时（在 words=text.split() 中）它不会保留我的空行。我应该得到的输出是：

```
 This is my substitute for pistol and ball. With a
      philosophical flourish Cato throws himself upon his sword; I
      quietly take to the ship. There is nothing surprising in
      this. If they but knew it, almost all men in their degree,
      some time or other, cherish very nearly the same feelings
      towards the ocean with me.

      There now is your insular city of the Manhattoes, belted
      round by wharves as Indian isles by coral reefs--commerce
      surrounds it with her surf. 
```

我当前的输出是什么样的：

```
 This is my substitute for pistol and ball. With a
      philosophical flourish Cato throws himself upon his sword; I
      quietly take to the ship. There is nothing surprising in
      this. If they but knew it, almost all men in their degree,
      some time or other, cherish very nearly the same feelings
      towards the ocean with me. There now is your insular city of
      the Manhattoes, belted round by wharves as Indian isles by
      coral reefs--commerce surrounds it with her surf. 
```

我知道当我将文本复制到单词时会出现问题，因为它不会保留空白行。我怎样才能确保它复制空行加上单词？如果我应该添加更多代码或更详细信息，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:26:34.833

首先拆分*至少 2 个*换行符，*然后*拆分单词：

```
import re

paragraphs = re.split('\n\n+', text)
words = [paragraph.split() for paragraph in paragraphs] 
```

您现在有一个列表列表，每个段落一个；*每段*处理这些，之后您可以将整个内容重新加入新文本，并重新插入双换行符。

我曾经`re.split()`支持由超过 2 个换行符分隔的段落；`text.split('\n\n')`如果段落之间只有 2 个换行符，您可以使用简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:34:07.743

使用正则表达式查找单词*和*空行而不是拆分

```
m = re.compile('(\S+|\n\n)')
words=m.findall(text) 
```

# web-applications - 如何打印图像？

> ID：15419402
> 
> 赞同：0
> 
> 时间：2013-03-14T20:21:04.560
> 
> 标签：web-applications, printing

我想为商店设置一个页面，上面有人们可以打印并带到商店的优惠券。我正在寻找一种方法让他们只打印优惠券，而不是整个页面。

我在想，如果我将优惠券图像放入 iFrame 中，从那里打印出来的图像可能只是打印图像，但我想先看看是否已经有更好的、既定的方法来做到这一点。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:50:38.460

这个答案可能会迟到，但是如果您希望用户只打印图片，那么我认为最好的方法是：

在仅包含图像的新窗口/选项卡中打开一个新页面（仅包含`<img>`标签中的`<body>`标签）。这样，用户可以从菜单中选择打印并打印图片。

通过这种方式，用户可以清楚地了解打印的内容。

[您还可以使用window.print](https://developer.mozilla.org/en-US/docs/DOM/window.print)弹出一个打印对话框，该对话框不在规范中，但无论如何都可以在所有桌面浏览器中使用。

* * *

一些澄清：

我知道打印样式，并且您可以使用它们完全重新排列页面，但我发现用户实际上希望打印出她/他在显示器上看到的相同布局。通过制作和显示仅用于打印的新页面，用户可以“预览”将要打印的内容，因此他将更有信心打印它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:25:06.483

使用 print.css 文件，您可以隐藏其他站点元素（通过 CSS display:none;），以便在打开优惠券的页面上，仅在打印时显示优惠券。

这是一篇关于 print.css 的好文章：http: [//alistapart.com/article/goingtoprint](http://alistapart.com/article/goingtoprint)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:27:44.587

在你的 CSS 中：

```
@media print {

    .elementsToHide { 
        display:none; 
    }

    #coupon {
        display:block; 
    }
} 
```

另外，请查看有关该主题的文章： http: [//coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)

# html - 3列css模板，右列位置不好

> ID：15419403
> 
> 赞同：0
> 
> 时间：2013-03-14T20:21:11.090
> 
> 标签：html, css, multiple-columns

我正在尝试做一个简单的 3 列模板

这是我的 CSS 代码：

```
#page {
   padding: 0px;
   height: 100%;
   width: 900px;
   margin-right: auto;
   margin-left: auto;
   float: none;
   margin-top: 0px;
   margin-bottom: 0px;
}

#header {
   height: 250px;
   width: 900px;
   margin-right: auto;
   margin-left: auto;
}
#right-column {
   float: right;
   width: 200px;
}
#left-column {
   float: left;
   width: 200px;
}
#center-column {
   width: 490px;
   margin-right: auto;
   margin-left: auto;
} 
```

然后是我的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>Untitled Document</title></head>

   <body>
      <div id="page">
         <div id="header">
            <img src="header.png" width="900" height="250" />
         </div>
         <div id="page-content">
            <div id="left-column">Content for  id "left-column" Goes Here</div>
            <div id="center-column">Content for  id "center-column" Goes Here</div>
            <div id="right-column">Content for  id "right-column" Goes Here</div>
         </div>
      </div>
   </body>
</html> 
```

我得到的是：

![输出](../Images/6b2ee961dbec1fdc07d6cddb93652542.png)

问题是：为什么我的右栏顶部有这个“边距”？左栏和中栏的制作方式与中右栏相同，但右栏有这个“边距”，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:24:36.123

所有的列都应该像这样向左浮动：

```
#right-column {
   float: left;
   width: 200px;
}
#left-column {
   float: left;
   width: 200px;

}
#center-column {
   width: 490px;
   float:left;
} 
```

看到这个[小提琴](http://jsfiddle.net/soyuka/dCEhV/)。

如果您希望页面内容的高度适合浮动内容的大小，则应使用[clearfix](http://nicolasgallagher.com/micro-clearfix-hack/)，请参阅[此处](http://jsfiddle.net/soyuka/dCEhV/1/)以获取另一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:25:10.087

您的右栏没有实际的边距空间。它是向右浮动的，但中心列上的边距空间使您的列总宽度大于 100%。

一个简单的解决方案是浮动所有剩余的东西。确保您的容器足够宽以适合 890 像素宽。

试试这个...

```
#right-column {
   float: left;
   width: 200px;
}
#left-column {
   float: left;
   width: 200px;
}
#center-column {
   float: left;
   width: 490px;
} 
```

完成这项工作后，下一步就是开始使用 % 宽度和 % 边距，以使您的模板具有响应性。这允许您的站点根据查看它的设备的宽度进行缩放。

只要确保您的总宽度永远不会超过 100%，否则您的列将不会嵌套到正确的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T20:25:11.870

添加`float:left`到中间列。

```
#center-column {
    float: left;
    margin-left: auto;
    margin-right: auto;
    width: 490px;
} 
```

真的你应该`float:left;`所有的列，`clear:both`然后

# c# - 方法运行时无法单击按钮

> ID：15419404
> 
> 赞同：2
> 
> 时间：2013-03-14T20:21:13.353
> 
> 标签：c#, winforms, scroll

```
 private void AddMyScrollEventHandlers()
   {
       VScrollBar vScrollBar1 = new VScrollBar();
   }

   private void button1_Click(object sender, EventArgs e)
   {
       while (true)
       {
           if (vScrollBar1.Value + 1 < vScrollBar1.Maximum)
           {
               vScrollBar1.Value = vScrollBar1.Value + 1;    
               label1.Text = vScrollBar1.Value.ToString();                       
           }       
           else 
           {         
               break;      
           }

           System.Threading.Thread.Sleep(200);
       }
   }

   private void button2_Click(object sender, EventArgs e)
   {
       // vScrollBar1.Scroll
   } 
```

我是 C# 新手。我正在研究滚动。我在这里想要的是，如果有人点击 button1 然后滚动自动移动到最后，我想在 label1 中显示渐变值。此外，当有人单击 button2 滚动停止时。

现在的问题是 label1 不显示值的渐变。它在滚动停止时显示一次值。

此外，当滚动继续时，即当循环工作时，我无法单击按钮 2。其实我什至不能点击表格。

有人请给我一些想法如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:23:43.970

发生这种情况是因为执行任务的线程很忙，并且更新 UI 的线程是同一个线程。您可以使用多线程解决方案。看一眼 [`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:26:50.023

所有的 UI 事件都在应用程序的主线程中运行，因此应用程序一次只能处理一个事件。当应用程序正在处理一个事件时，不会处理其他事件。

由于您定期进行与 UI 相关的工作，因此最好的选择是使用[`Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)该类：

1.  从工具箱中拖放`Timer`到表单中。
2.  在属性窗口中，将时间间隔设置为 200。
3.  双击计时器对象以创建`Tick`事件处理程序。
4.  将此代码放入新创建的`timer1_Tick`方法中：

    ```
     if (vScrollBar1.Value + 1 < vScrollBar1.Maximum)
     {
         vScrollBar1.Value = vScrollBar1.Value + 1;    
         label1.Text = vScrollBar1.Value.ToString();                       
     }       
     else 
     {         
         timer1.Stop();
     } 
    ```

5.  改变你的方法如下：

    ```
    private void AddMyScrollEventHandlers()
    {
        timer1.Start();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        timer1.Stop();
    } 
    ```

现在你完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:41:40.040

我建议使用`BackgroundWorker`控制，正如*Agustin Meriles*所建议的那样。但是，需要注意的更重要的一点是，您应该使用`Control.Invoke(...)`方法从另一个线程更新控件。

我已经修改了您的代码，在示例应用程序中对其进行了测试，它似乎可以正常工作。

首先，将一个新`BackgroundWorker`控件添加到您的表单并分配`backgroundWorker1_DoWork`给它的`DoWork`事件。

然后，您可以使用以下代码：

```
private void button1_Click(object sender, EventArgs e)
{
    //code from here is moved to BackgroundWorker control
    backgroundWorker1.RunWorkerAsync();
}

private void button2_Click(object sender, EventArgs e)
{

}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    //while (true)
    //the condition directly in the while looks more clear to me
    while (vScrollBar1.Value + 1 < vScrollBar1.Maximum)
    {
        //update controls using Invoke method and anonymous functions
        vScrollBar1.Invoke((MethodInvoker)delegate() { vScrollBar1.Value += 1; });

        label1.Invoke((MethodInvoker)delegate() { label1.Text = vScrollBar1.Value.ToString(); });

        //when called inside BackgroundWorker, this sleeps the background thread, 
        //so UI should be responsive now
        System.Threading.Thread.Sleep(200);
    }
} 
```

如果您在使用此代码时有任何问题，请告诉我。

**更新**

`ProgressChanged`如评论中所述，您还可以使用`BackgroundWorker`. 它需要对代码进行更多更改，但更适合这种情况。您可以在此处找到有关它的一些信息：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)。

如果您不打算在`while`循环中添加任何其他具有更多处理的代码，您也可以使用`Timer`控制，正如*MD.Unicorn*在他的回答中所建议的那样。

# php - 根据按下的表单按钮为 PHP 变量赋值

> ID：15419405
> 
> 赞同：3
> 
> 时间：2013-03-14T20:21:17.917
> 
> 标签：php, forms, variables

好吧，这是我第一次使用stackoverflow，所以我希望能清楚。

如何通过按下按钮为 PHP 变量设置值？

例如，如果用户按下表单按钮 1，$variable = 'false'; 如果它按下表单按钮 2，$variable = 'true'... 这可能吗？

谢谢，提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:24:14.537

是的，为同名提交按钮设置不同的值，例如：

```
<input name="submitBtn" type="submit" value="Choice1">
<input name="submitBtn" type="submit" value="Choice2"> 
```

然后根据 php $_POST['submitBtn'] 中按下的按钮将具有值 Choice1 或 Choice2

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:28:37.977

是的，这是可能的。您可以将 2 个（或更多）具有相同名称和不同值的提交按钮放入一个表单中，然后通过 php 获取提交按钮的值：

html:

```
<form method="POST" action="somefile.php">
<input type="submit" name="sb" value="button1" />
<input type="submit" name="sb" value="button2" />
</form> 
```

php:

```
<?php
$submitbutton = $_POST['sb'];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:27:34.420

在 HTML 端只需创建两个提交按钮：

```
<input name="click" type="submit" value="clickOne">
<input name="click" type="submit" value="clickTwo"> 
```

然后在 PHP 端（假设您使用 POST 方法提交）：

```
switch ($_POST['click']) {
    case 'clickedOne':
        // first pressed
    break;
    case 'clickedTwo':
        // second pressed
    break;
    default:
        // something wrong
    break;
} 
```

# asp.net - 如何检索会话的行号？

> ID：15419409
> 
> 赞同：0
> 
> 时间：2013-03-14T20:21:37.627
> 
> 标签：asp.net, database, gridview

我在 asp.net 中的 gridview 有问题

我将字段设置为超链接，我想为每一行分配一个数字作为会话，以便在下一页中引用它

我怎样才能检索行号？

** 我有一列为每一行分配一个数字，我不知道这是否有帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:27:06.360

2个潜在的解决方案：

1) 如果您使用的是超链接，而不是链接按钮，请将查询字符串参数添加到超链接的 NavigateUrl。当单击链接并且用户导航到第二页时，使用 Request.QueryString 读取该值。

2) 如果您将 LinkBut​​tons 与代码隐藏单击处理程序一起使用，请将您的编号分配给 CommandArgument 属性，您将能够在单击处理程序中访问该值。

# machine-learning - 机器学习/数据挖掘中的太慢或内存不足问题

> ID：15419411
> 
> 赞同：2
> 
> 时间：2013-03-14T20:21:43.983
> 
> 标签：machine-learning, parallel-processing, analytics, data-mining, large-data

编辑：尝试改写自己：

R、Weka 等工具功能丰富，但速度慢，并且可以处理的数据大小有限。Mahout、Vowpal Wabbit (VW) 等工具及其扩展 AllReduce 是针对 1K 节点集群的，它们的功能有限。例如，大众只能通过最小化一些损失函数来“学习”。

我在任何流行的软件中都没有看到使用并行编程（好的 ol' pthreads、MPI 等）来加速。我想它对于集群可能是一种过度杀伤力的问题很有用，但是在其他处理器内核空闲时等待程序完成实在是太糟糕了。[例如，在 AWS 上可以获得 26 核机器和 88 核集群，一个好的并行算法可以提供 20X 和 60X 的速度，而无需求助于重量级的类似 hadoop 的系统]

我想从社区中学到什么：（主观地）你的现实生活中的问题/算法不是太大而不能称为大数据，但仍然足够大，让你感觉更快会更好。（客观地）您的经验类似于“具有特征 C 和大小 D 的数据的算法 X 花费了 T 时间，如果算法 X 的并行版本可用，我可以使用 M 个处理器内核来处理它”。

当然，我问的原因是了解该领域对并行编程的需求，并且可能需要社区驱动的努力来解决它。我在一些问题上的经验详述如下。

* * *

机器学习、数据挖掘和相关领域有哪些问题是您因为速度太慢或需要过大的内存而遇到困难的？

作为一个业余研究项目，我们构建了一个核外编程模型来处理大于系统内存的数据，并且它本身支持并行/分布式执行。它在一些问题上表现出良好的性能（见下文），我们希望将这项技术（希望由社区驱动）扩展到现实生活中的问题。

一些基准测试（针对 Weka、Mahout 和 R）：

a)频繁项集挖掘的*Apriori 算法[CPU-bound but average memory]*

Webdocs 数据集包含 170 万笔交易，超过 520 万个独特项目 (1.4GB)。该算法查找在事务中频繁出现的项目集。对于 10% 的支持，Weka3 无法在**3 天内**完成。我们的版本在**4 小时 24 分钟**内完成（尽管公平地说，我们使用 Tries 而不是 Weka 中的哈希表）。更重要的是，在一台 8 核机器上花了 39 分钟，在 8 台机器上 -> 6**分钟 30 秒**（=40x）

b) *SlopeOne 推荐引擎*【高内存使用】

MovieLens 数据集具有来自 70K 的 10K 电影的 1000 万个评分。SlopeOne 推荐基于协作过滤的新电影。Apache Mahout 的“Taste”非分布式推荐器在内存不足**6GB时会失败。**为了对核外性能进行基准测试，我们将我们的版本限制为该限制的 1/10（**600MB**），并在执行时间上以 11% 的开销（由于核外）完成。

*c) 使用主成分分析*(PCA) 进行降维[CPU 和内存限制]

包含 32K 个样本的突变体“p53”蛋白质数据集，每个样本有 5400 个属性 (1.1GB)。PCA 用于通过删除方差非常小的变量来降低数据集的维度。尽管我们的版本可以处理大于系统虚拟内存的数据，但我们对这个数据集进行了基准测试，因为 R 软件可以处理它。R 在**86 分钟**内完成了这项工作。我们的核外版本没有额外的开销；事实上，它在单核机上用了 67 分钟，在 8 核机上用了**14 分钟。**

今天的优秀软件要么通过将数据加载到内存中（R、Weka、numpy）来处理兆字节范围内的数据，要么将它们加载到数据中心（Mahout、SPSS、SAS）的 tera/PB 范围内。千兆字节范围内似乎存在差距——大于虚拟内存但小于“大数据”。虽然，像 numpy 的 Blaze、R bigmemory、scalapack 等项目正在满足这一需求。

根据您的经验，您能否举例说明这样一个更快、更核心的工具可以使数据挖掘/机器学习社区受益的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:37:43.107

这真的是一个开放式问题。据我所知，你在问事情：

1.  在大型数据集上使用机器学习。
2.  更快的工具会使社区受益吗

对于第一个问题，在许多具有大数据的生产环境中使用的最佳工具之一是 Vowpal Wabbit (VW)。前往[hunch.net](http://hunch.net/~vw/)看看。

对于你的第二个问题，如果你能击败大众，那绝对有利于社区。不过大众还是不错的:)

# android - 无效（Google Directions API）

> ID：15419412
> 
> 赞同：0
> 
> 时间：2013-03-14T20:21:48.027
> 
> 标签：android, http, httprequest, directions

为什么我对 Google Directions API 的 HTTP 请求无效？

下面是我的 HTTP 请求的 URL：

```
http://maps.googleapis.com/maps/api/directions/json?origin=(50.8441144,-0.1094412)&desination=(50.861796,-0.083256)&region=uk&sensor=false 
```

JSON响应如下：

```
{
   "routes" : [],
   "status" : "INVALID_REQUEST"
} 
```

谷歌路线 API [https://developers.google.com/maps/documentation/directions/#DirectionsRequests](https://developers.google.com/maps/documentation/directions/#DirectionsRequests)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:27:48.180

您拼错了目的地，并且您的坐标编码可能不正确。尝试：

`http://maps.googleapis.com/maps/api/directions/json?origin=50.8441144,-0.1094412&destination=50.861796,-0.083256&region=uk&sensor=false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:29:42.093

您在请求 url 中输入了一个错字：

```
http://maps.googleapis.com/maps/api/directions/json?origin=(50.8441144,-0.1094412)&desination=(50.861796,-0.083256)&region=uk&sensor=false 
```

应该：

```
http://maps.googleapis.com/maps/api/directions/json?origin=(50.8441144,-0.1094412)&destination=(50.861796,-0.083256)&region=uk&sensor=false 
```

注：des* *t* *ination。

# java - 无法加载 jdbc 驱动程序 (ClassNotFoundException)

> ID：15419415
> 
> 赞同：4
> 
> 时间：2013-03-14T20:22:05.317
> 
> 标签：java, android, jdbc, ibm-midrange

我正在尝试加载 JDBC 驱动程序以对我的 AS400 进行一些 SQL 调用。我尝试在安装了 JDBC 的计算机上运行连接，并且 URL 和 SQL 调用工作正常。

我需要开发一个没有安装驱动程序的应用程序（目前适用于 Android，尽管我们正在寻求扩展到桌面应用程序）。我正在实际的 android 设备上测试代码，而不是模拟器，因此它具有完整的互联网权限。

[如IBM 所述，](http://publib.boulder.ibm.com/pubs/html/as400/v4r4/ic2924/info/java/rzahh/toolbox.htm) jt400 的驱动程序位于 com.ibm.as400.access.AS400JDBCDriver 中。

这是我的代码：

```
 try {

        Class.forName("com.ibm.as400.access.AS400JDBCDriver").newInstance();
        Connection conn = DriverManager.getConnection(
                url + schema + ";naming=sql;errors=full",
                uname,
                psswrd);

        // do SQL query stuff

        rs.close();
        stmt.close();
        conn.close();

    } 
    catch (ClassNotFoundException e)
    {
        this.basicOutput.setText("Class not found: " + e.getMessage());
        System.out.println(e.getStackTrace());
    }
    //catch (SQLException e)
    catch (Exception e)  //need generic to catch all errors thrown
    {

        this.basicOutput.setText(e.getMessage());
        System.out.println(e.getStackTrace());

    } 
```

当我运行它时，我得到一个“找不到类：com.ibm.as400.access.AS400JDBCDriver”。

我做了一些研究，它表明 Class.forName 不是一个好方法。所以我也尝试了这个：

```
 DriverManager.registerDriver(new com.ibm.as400.access.AS400JDBCDriver()); 
```

但这也会产生同样的错误。

课堂在那里。编译后的代码不会抛出任何语法错误，但由于某种原因，运行时找不到它。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:30:10.703

驱动程序需要作为 jar 包含在您的项目中。如果您已经拥有它，请将其添加到文件夹 /libs 中的项目中。

您将驱动程序类指定为字符串文字，因此在编译期间它通过并且您认为一切都很好。但是，在运行时它需要找到它，并且因为您没有包含它不能包含的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:18:09.210

我建议您使用 IBM 的 JTOpen Lite/JTLite 库，而不是您尝试使用的库，这些库专为在 Android 上使用而设计。

有关更多信息，请参阅[我对相关问题的回答](https://stackoverflow.com/questions/15374219/app-wont-recognize-function-in-non-android-jar/15539184#15539184)。

# php - 从数据库向电子邮件地址发送电子邮件

> ID：15419416
> 
> 赞同：0
> 
> 时间：2013-03-14T20:22:05.610
> 
> 标签：php, html, email

我在这里有这段代码：

对于 HTML：

```
<form action="process.php" method="POST"><br />
<b>Send message to all users:</b>
<br />Subject: <input type="text" name="subject">
<br />Message:<br />
<textarea name="message" ></textarea>
<br>
<input type="Submit">
</form> 
```

对于 PHP：

```
<?php 

mysql_connect("localhost", "root", "")or die("cannot connect server ");
mysql_select_db("db_cl3")or die("cannot select DB");

$subject = $_POST['subject'];        
$message = $_POST['message'];

$getusers = mysql_query("SELECT * FROM tbl_info");

while($result = mysql_fetch_array($getusers)) { 
$emailaddress = $result['email'];

mail($emailaddress,$subject,$message);

mysql_close();
}
?> 
```

我得到这个错误：

警告：mail()：无法在“localhost”端口 25 连接到邮件服务器，验证 php.ini 中的“SMTP”和“smtp_port”设置或在 C:\wamp\www\occc\process.php 中使用 ini_set()在第 14 行

谁能告诉我如何解决这个错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:31:25.160

you need to use an smtp server, a server with SMTP Services running on it, a mail server of some sort. There are a few mail servers that allow smtp relay, some require authetnication, some don't, it all depends. You can bounce stuff off of google's smtp server, or if your company has one you can use that one as well. Generally it's smtp.servername.com using port 25, but that's not always the case. IIS used to support SMTP server with Windows Server IIS 7 or less, but I think they've phased it out with IIS 8.

# iphone - 如何使用 Core Data 将子查询作为属性执行？

> ID：15419418
> 
> 赞同：3
> 
> 时间：2013-03-14T20:22:13.020
> 
> 标签：iphone, ios, objective-c, core-data

我有一个名为“Genre”的实体，它具有genreID 和parentGenreID 属性。我想创建一个动态属性，为我提供类型实体的计数，其中 parentGenreID 等于行的类型 ID，这样我就不必查询每个返回行的计数。

如果我在 SQL 中执行此操作，我将使用以下查询：

`SELECT g.title, (SELECT COUNT(*) FROM genres sg WHERE sg.parentGenreID = g.genreID) as subgenres FROM genres g`

我在想也许一个 Fetched Property 会是答案，但那些似乎是作为 NSArrays 返回的，我仍然试图找出合适的语法是什么。

我最好的猜测是：

`SUBQUERY(Genre, $genre, $genre.parentGenreID = $FETCH_SOURCE.genreID).@count`

在 Core Data 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T05:10:55.500

使用`NSPredicate`，您可以将条件放在哪里`parentGenreID=genreID`。而不是使用`executeFetchRequest`,use`countForFetchRequest`来获取计数并再次使用 NSPredicate`subgenres IN`来`executeFetchRequest`返回包含您预期的标题的记录。

# mysql - 按特定列对数据库数据进行分组

> ID：15419420
> 
> 赞同：0
> 
> 时间：2013-03-14T20:22:13.997
> 
> 标签：mysql, database

我有一个数据库，我有一些记录。我想显示按 ordNR 分组的所有记录，我该怎么做？

```
SELECT Group_concat(ordnr) ordNR, 
       koden, 
       Group_concat(wish)  wish, 
       rnamn, 
       bild, 
       pris, 
       cname, 
       onsktext, 
       restidn 
FROM   (SELECT m.ordnr    AS ordNR, 
               p.id       AS restidn, 
               t.tabnum   AS tabNum, 
               m.wishtext AS onsktext, 
               m.meaoid   AS midn, 
               m.ordcode  AS koden, 
               w.wish, 
               r.meaname  AS rnamn, 
               r.meaimg   AS bild, 
               r.meaprice AS pris, 
               k.catname  AS cname 
        FROM   cats k, 
               meals r, 
               tables t, 
               restaurant p, 
               wishes w, 
               meaorder m 
               JOIN orders c 
                 ON c.ordnr 
        WHERE  p.id = '3' 
               AND c.tabid = t.tabid 
               AND c.ordstatus = '0' 
               AND m.ordnr = c.ordnr 
               AND m.meaid = r.meaid 
               AND m.wishesid = w.id 
               AND r.catid = k.catid)T 
GROUP  BY koden, 
          rnamn, 
          bild, 
          pris, 
          cname 
ORDER  BY midn DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:28:17.537

先按`ordNR`，再按`midn`。

# ios - 计算天数，nsdate，ios

> ID：15419422
> 
> 赞同：0
> 
> 时间：2013-03-14T20:22:34.923
> 
> 标签：ios, objective-c, nsdate, nsdatecomponents

我计算两个日期之间差异的方式是

```
NSCalendar *calendar            =   [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *nowAndEnd     =   [calendar components:NSMonthCalendarUnit|
                                                        NSDayCalendarUnit|
                                                        NSMinuteCalendarUnit
                                                fromDate:now
                                                  toDate:end
                                                 options:0];

NSLog(@"nowAndEnd's day is %d",nowAndEnd.day);
NSLog(@"nowAndEnd's month is %d",nowAndEnd.month); 
```

我回来了

```
 nowAndEnd's day is 15
 nowAndEnd's month is 1 
```

问题是我如何根据这些信息计算天数。我问是因为有些月份有 30 天，有些有 31 天...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:34:21.737

您所做的是正确的，但如果您希望仅在几天内执行计算，只需`NSDayCalendarUnit`单独使用：

```
NSDateComponents *nowAndEnd = [日历组件：NSDayCalendarUnit
                                                从日期：现在
                                                  到日期：结束
                                                 选项：0]；

```

答案将直接计算到天数。

# ember.js - 在回调中设置控制器属性

> ID：15419424
> 
> 赞同：0
> 
> 时间：2013-03-14T20:22:38.833
> 
> 标签：ember.js

我有以下控制器使用`ember.js`和[`ember-auth`](https://github.com/heartsentwined/ember-auth)gem。该控制器有效，但`loginError`每次我登录时都会设置属性。

```
BaseApp.SignInController = Auth.SignInController.extend({
  email: null,
  password: null,
  loginError: false,
  signIn: function() {
    this.registerRedirect();
    Auth.signIn({
      email: this.get('email'),
      password: this.get('password')
    });
    this.set('loginError', true); // Sets correctly but each time
    Auth.on('signInError', function() {
      console.log("This is a signin error");
    });
  }
}); 
```

显然我想做的是设置`loginError`在`true`这样调用的函数内部`Auth.on`：

```
BaseApp.SignInController = Auth.SignInController.extend({
  email: null,
  password: null,
  loginError: false,
  signIn: function() {
    this.registerRedirect();
    Auth.signIn({
      email: this.get('email'),
      password: this.get('password')
    });
    Auth.on('signInError', function() {
      this.set('loginError', true); // Doesn't set the controller's property
      console.log("This is a signin error");
    });
  }
}); 
```

但这显然不起作用，因为回调内部的范围不同。也许我错过了一些非常基本的东西。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:28:16.740

`this`传递给方法的匿名函数中的上下文（即）`on`与控制器中的上下文不同。您可以通过将上下文保存到闭包中的不同变量来解决此问题。

```
var self = this;
Auth.on('signInError', function() {
  self.set('loginError', true); // Should now set the controller's property
  console.log("This is a signin error");
}); 
```

# javascript - Soundcloud 自定义播放器无法在 Firefox 中播放

> ID：15419427
> 
> 赞同：0
> 
> 时间：2013-03-14T20:22:51.457
> 
> 标签：javascript, jquery, html, firefox, soundcloud

[我已将来自github](https://github.com/soundcloud/soundcloud-custom-player)的 soundcloud 的自定义 HTML 5 播放器安装到[我的网站上](http://iamnatesmithen.com/soundcloud/examples/sc-player-minimal.html)以进行测试。我注意到这个播放器在火狐浏览器中不起作用。我收到以下错误

```
TypeError: $.browser is undefined 

 if ($.browser.msie) {
  return '<object height="100%" width="100%" id="' + engineId + '"     classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="' + swf + '">'+
'<param name="movie" value="' + swf + '" />'+
   '<param name="allowscriptaccess" value="always" />'+
    '</object>';
      } else {
       return '<object height="100%" width="100%" id="' + engineId + '">'+
         '<embed allowscriptaccess="always" height="100%" width="100%" src="' + swf + '"            type="application/x-shockwave-flash" name="' + engineId + '" />'+'</object>';
    }
    }; 
```

Firefox 需要 Flash 播放器吗？有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:46:45.957

`$.browser`是一个[已弃用的 jQuery 属性](http://api.jquery.com/jQuery.browser/)，并从 jQuery 版本 1.9（与您的页面中包含的相同版本）开始删除。

您必须在页面上包含 jQuery (< 1.9) 版本才能使用该`browser`属性。

我认为这也是一个很好的机会来指出，一般来说，[特征检测优于浏览器嗅探](https://stackoverflow.com/questions/1294586/browser-detection-versus-feature-detection)。

# .net - 确保成员变量字符串在 c# 中为大写的最佳实践（getter toUpper）

> ID：15419428
> 
> 赞同：1
> 
> 时间：2013-03-14T20:22:51.853
> 
> 标签：.net, string, performance, datamapper, getter-setter

所以我想向你们提出这个问题，这很简单，但我想找到更好的方法。

我们的数据应始终为大写，但我们允许应转换的小写输入。

`toUpper`通常我们会在保存到数据库时做一个。

我在想`toUpper`在 getter 中可能会更好，这样逻辑对数据更紧密，只要你使用 Object 来查看这些数据，那么它总是大写的。

```
public string Mapping
{ 
    get
    {
        return mapping  == null ? mapping : mapping.ToUpper();
    }
    set;
} 
```

这是哑巴吗？我知道`Mapping.ToUpper()`每次都会创建一个新字符串，所以看起来很愚蠢。还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:31:45.477

I would convert the data on the way in, unless there is some compelling reason to keep the original data around. That way you ensure that you can't accidentally use the "bad" version of the data (for example, in a private method that accesses the backing field).

Personally I prefer that property setters always preserve the value, so that:

```
x.MyProperty = someValue;
Assert(x.MyProperty == someValue); 
```

If the setter would change the value it is passed, I instead write a separate method to do it.

In your example, I'd probably go for:

```
public void SetMapUppercase(string value); 
```

# ruby - 与“Class”对象上定义的单例方法混淆

> ID：15419429
> 
> 赞同：1
> 
> 时间：2013-03-14T20:22:58.593
> 
> 标签：ruby, ruby-2.0

我所知道的单例方法可以由定义它的对象调用。现在在下面的例子`C`中也是一个对象和对象上定义的`Class`单例方法。那么另一个对象如何能够调用呢？`a_class_method``Class``C``Class``D``a_class_method`

> *`individuation`在这个例子中，对象原则如何成立？*

```
class C
end
#=> nil

def C.a_class_method
 puts "Singleton method defined on #{self}"
end
#=> nil

C.a_class_method
#Singleton method defined on C
#=> nil

class D < C
end
#=> nil

D.a_class_method
#Singleton method defined on D
#=> nil 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:34:51.317

可用的原因`a_class_method`是：

```
D.singleton_class.superclass == C.singleton_class
 # => true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:06:07.920

好吧，当你做了 < 你让 D 类从 C 类继承，所以 D 将从 C 类得到任何东西。如果你想知道 D 的所有父母都是什么，你可以做

```
puts "D's parent Classes = #{D.ancestors.join(',')}" 
```

这会给你

```
D's parent Classes = D,C,Object,Kernel 
```

因此，即使 D 是一个单独的类，它也是 C 的一个子类，这使得它可以使用为 C 定义的方法

# javascript - .js jQ Soundcloud Player 的 CSS 格式/布局

> ID：15419431
> 
> 赞同：1
> 
> 时间：2013-03-14T20:22:59.773
> 
> 标签：javascript, jquery, css, layout

我正在尝试创建一个自定义的 Soundcloud 播放器，但已经最大限度地发挥了我的能力。

我只想在曲目标题旁边显示专辑封面并使其可滚动。

现在我已经完成了曲目列表和专辑封面的工作，但我似乎无法将两者放在同一个可滚动框中。

我附上了播放器的 .css 和曲目列表和专辑封面的 .js。

.js - [.js 文件控制曲目列表和专辑封面][1] .ss - [.css 文件控制曲目列表和专辑封面的外观][2]

这是示例的链接，以查看它当前的外观。 [http://tranceevents.co.uk/soundcloud-custom-player-master/examples/sc-player-standard.html](http://tranceevents.co.uk/soundcloud-custom-player-master/examples/sc-player-standard.html)

我在获取和显示曲目列表/曲目名称和专辑封面的代码时遇到问题：

```
// create the playlist
$.each(tracks, function(index, track) {
    var active = index === 0;
    // create an item in the playlist
    $('<li><a href="' + track.permalink_url +'">' 
        + track.title + track.artworks 
        + '</a><span class="sc-track-duration">'
        + timecode(track.duration) 
        + '</span></li>'
    )
    .data('sc-track', {id:index})
    .toggleClass('active', active)
    .appendTo($list);

    // create an item in the artwork list
    $('<li></li>')
        .append(artworkImage(track, index >= opts.loadArtworks))
        .appendTo($artworks)
        .toggleClass('active', active)
        .data('sc-track', track);
}); 
```

当我尝试使用 .css 在标题旁边显示专辑封面时，我得到两列都带有滚动条，因为`$('<li></li>')`

我对这种脚本几乎一无所知，所以真的不知道还能尝试什么。

请问有人可以帮忙吗？任何帮助将非常感激。

谢谢马特

# django - Django-REST 框架 restore_object attrs 参数

> ID：15419435
> 
> 赞同：10
> 
> 时间：2013-03-14T20:23:14.633
> 
> 标签：django, django-rest-framework

找到 Django-REST 框架文档，尽管它很长，但对我来说背景太浅了。

restore_object 方法的 attrs 函数有什么作用？

```
instance.title = attrs.get('title', instance.title) 
```

第二个参数代表什么，我将如何在文档中寻找这在未来意味着什么？

也不确定双星号的`return Snippet(**attrs)`含义。这与 **keywArgs 不同？哪些参数被传递回反序列化的 Snippet 对象？

在文档的另一部分，我在 restore_object()`instance.title = attrs['title']`中看到了我希望人们能够看到我的困惑。

谢谢你

```
class SnippetSerializer(serializers.Serializer):
    pk = serializers.Field()  # Note: `Field` is an untyped read-only field.
    title = serializers.CharField(required=False,
                                  max_length=100)
    code = serializers.CharField(widget=widgets.Textarea,
                                 max_length=100000)
    linenos = serializers.BooleanField(required=False)
    language = serializers.ChoiceField(choices=LANGUAGE_CHOICES,
                                       default='python')
    style = serializers.ChoiceField(choices=STYLE_CHOICES,
                                    default='friendly')

    def restore_object(self, attrs, instance=None):
        """
        Create or update a new snippet instance.
        """
        if instance:
            # Update existing instance
            instance.title = attrs.get('title', instance.title)
            instance.code = attrs.get('code', instance.code)
            instance.linenos = attrs.get('linenos', instance.linenos)
            instance.language = attrs.get('language', instance.language)
            instance.style = attrs.get('style', instance.style)
            return instance

        # Create new instance
        return Snippet(**attrs) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T20:12:09.860

我已经稍微更新了文档，以使其更加清晰......

[http://django-rest-framework.org/tutorial/1-serialization.html#creating-a-serializer-class](http://django-rest-framework.org/tutorial/1-serialization.html#creating-a-serializer-class)

该方法现在读取...

```
def restore_object(self, attrs, instance=None):
    """
    Create or update a new snippet instance, given a dictionary
    of deserialized field values.

    Note that if we don't define this method, then deserializing
    data will simply return a dictionary of items.
    """
    if instance:
        # Update existing instance
        instance.title = attrs.get('title', instance.title)
        instance.code = attrs.get('code', instance.code)
        instance.linenos = attrs.get('linenos', instance.linenos)
        instance.language = attrs.get('language', instance.language)
        instance.style = attrs.get('style', instance.style)
        return instance

    # Create new instance
    return Snippet(**attrs) 
```

该`**attrs`样式使用 Python 的标准关键字扩展。请参阅[此处](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/#calling-a-function)以获得很好的解释。

它最终会等同于`Snippet(title=attrs['title'], code=attrs['code'], ...)`

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-30T19:53:07.587

在 DRF 3.0+ 中删除了 restore_object 方法。现在您可以使用两种不同的方法：.create 和 .update

```
def update(self, instance, validated_data): 
    instance.title = validated_data.get('title', instance.title) 
    instance.code = validated_data.get('code', instance.code) 
    instance.linenos = validated_data.get('linenos', instance.linenos)
    instance.language = validated_data.get('language', instance.language)         
    instance.style = validated_data.get('style', instance.style)  
    instance.save() 
    return instance 

def create(self, validated_data): 
    return Snippet.objects.create(**validated_data) 
```

发行说明： http: [//www.django-rest-framework.org/topics/3.0-announcement/](http://www.django-rest-framework.org/topics/3.0-announcement/)

# mysql - 返回不存在 JOIN 连接的值

> ID：15419436
> 
> 赞同：-2
> 
> 时间：2013-03-14T20:23:19.560
> 
> 标签：mysql, join

我有两个表，组和机构组加入：

```
groups                      agencygroupjoins
--------------------        --------------------
groupID                     joinID
groupName                   agencyID
                            groupID 
```

如何获取所有 groupID、groupName 记录（来自组），其中 groupID 在 Agencygroupjoins 中找不到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:24:36.343

使用[外连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
SELECT groups.*
FROM   groups LEFT JOIN agencygroupjoins USING (groupID)
WHERE  agencygroupjoins.groupID IS NULL 
```

# mercurial - 如何从 Mercurial 存储库中删除大文件

> ID：15419442
> 
> 赞同：8
> 
> 时间：2013-03-14T20:23:58.333
> 
> 标签：mercurial, tortoisehg, large-files, kiln

另请参阅[此问题](https://stackoverflow.com/questions/14449707/how-do-i-safely-disable-remove-the-largefiles-directory-from-a-mercurial-reposit)。

在不知道自己在做什么的情况下，我启用了 largefiles 扩展，提交了一个文件并将其推送到 kiln。现在我知道我的方式的错误，我需要永久恢复这种变化。

我遵循了 SO 关于该主题的指导；我可以在本地删除大文件，但这不会影响窑中的远程仓库。我尝试在 Kiln 服务器上的 KilnRepositories 中打开 repo 并删除 largefiles 文件夹（以及从需要文件中删除“大文件”），但是在几次推/拉文件夹后，需要的行又回来了。

有没有办法让它永久化？（设置要求只读也不起作用）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T00:11:45.060

*注意：至少（对于 Windows）TortoiseHg 2.4 (Mercurial 2.2.1) -> 2.7.1 (Mercurial 2.5.2) 是这样。我不会为未来或旧版本发言。*

在查看了各种可用的 mercurial 扩展之后，我得出的结论是，一旦使用 largefiles 扩展提交了文件，通常就不可能将存储库“转换回”。

首先，为什么您不希望在您的存储库中使用大文件的两个基本原理：[一](https://www.mercurial-scm.org/wiki/LargefilesExtension)和[二](http://kiln.stackexchange.com/questions/4846/how-do-i-use-the-mercurial-largefiles-extension)。

一旦文件被提交为大文件，要删除它，必须从 repo 中删除对“.hglf”路径的所有引用。[回退](https://www.mercurial-scm.org/wiki/Backout)是不够的，因为它的提交内容将引用文件的路径，包括“.hglf”文件夹。一旦 mercurial 看到这一点，它会将“大文件”写回 /.hg/requires 文件，并且 repo 再次被大文件锁定。同样与 hg 忘记并删除。

选项 1：如果您的 repo 是孤立的（您可以在其所有本地和远程位置对 repo 进行端到端控制，并且没有其他人从该 repo 分支），则可以使用 mq 扩展和[剥离](https://www.mercurial-scm.org/wiki/MqExtension#Strip)变更集。如果您及时发现了错误，这可能只是一个可行的选择。

选项 2：如果有问题的变更集（大文件提交）存在于草稿的提交[阶段](https://www.mercurial-scm.org/wiki/Phases)（或者可以强制回到草稿），那么可以将提交导入 mq 并使用 hg qpop取消应用[变更集。](http://hgbook.red-bean.com/read/managing-change-with-mercurial-queues.html)这优于剥离，因为它保留了提取变更集的提交历史。在现实生活中，这通常是不可能的，因为您可能已经执行了合并并从公共阶段分支推/拉。但是，如果及时发现，mq 可以提供一种挽救回购的方法。

选项 3：如果有问题的变更集仅在一处引用（原始提交），并且没有人尝试退出/删除/忘记变更集（从而创建多个引用），则可以使用 hg [rebase](https://www.mercurial-scm.org/wiki/RebaseExtension)，将攻击后的第一个子变更集与攻击的父变更集折叠起来。这样做时，进攻性变更集变成了一个新的头，然后可以用 mq strip 剥离。这可以在尝试导入 mq 失败的情况下工作。

选项 4：如果以上都不起作用，您可以使用[移植](https://www.mercurial-scm.org/wiki/TransplantExtension)或[移植](http://www.selenic.com/hg/help/graft)，将所有非违规变更集导出为补丁（注意以正确的顺序导出它们），然后 hg update 到攻击前的第一个健全的变更集, mq 剥离所有前向变更集的 repo，然后按顺序重新应用导出的补丁。

选项5：（我最终做了什么）。在本地克隆 repo，这样你就有两个副本：clone_to_keep、clone_to_destroy。在 clone_to_keep 中，更新到攻击前的第一个健全的变更集。Mq 剥离所有前向变更集。如果留下多个头，则向下合并。在 clone_to_destroy 中，更新到提示。在 Windows 资源管理器中，将 /clone_to_destroy 中除 .hg 和 .hglf 文件夹之外的所有内容复制到 /clone_to_keep 文件夹。在 Tortoise 中，将 clone_to_keep 中的所有更改提交为单个更改集。出于历史目的，将 clone_to_destroy 的一个远程实例保留为只读状态，并销毁所有其他实例。

选项 6：核选项。如果一切都失败了，并且您不关心您的存储库与外部系统的集成（错误跟踪、CI 等），您可以按照上述[SO 帖子](https://stackoverflow.com/questions/14449707/how-do-i-safely-disable-remove-the-largefiles-directory-from-a-mercurial-reposit)并使用 hg [convert](https://www.mercurial-scm.org/wiki/ConvertExtension)扩展。这将创建受感染存储库的新副本，删除对有问题的变更集的所有引用；但是，它通过迭代整个 repo 中的每个变更集并将其作为 NEW 变更集提交到新 repo 来实现。这会创建一个与任何现有分支 repos 不兼容的 repo——没有一个变更集 id 将排队。除非您没有分支存储库，否则此选项可能永远不会起作用。

在所有情况下，您都必须进行修复并手动重新应用到每个不同的存储库实例（复制 repo 文件夹，克隆，无论您喜欢什么方法）。

最后，事实证明启用大文件是一个极其昂贵的错误。修复起来非常耗时，而且最终具有破坏性。我不建议您允许大文件进入您的存储库。

# c# - 将 wav 文件存储在数组中

> ID：15419446
> 
> 赞同：4
> 
> 时间：2013-03-14T20:24:08.643
> 
> 标签：c#, wav, sample, naudio

我需要一种快速的方法来将 wav 文件的所有样本存储在一个数组中。我目前正在通过播放音乐并存储来自 Sample Provider 的值来解决这个问题，但这不是很优雅。

从 NAudio Demo 我有使用这种方法的 Audioplayer 类：

```
 private ISampleProvider CreateInputStream(string fileName)
    {
        if (fileName.EndsWith(".wav"))
        {
            fileStream = OpenWavStream(fileName);
        }
          throw new InvalidOperationException("Unsupported extension");
        }
        var inputStream = new SampleChannel(fileStream, true);
        var sampleStream = new NotifyingSampleProvider(inputStream);
        SampleRate = sampleStream.WaveFormat.SampleRate;
        sampleStream.Sample += (s, e) => { aggregator.Add(e.Left); }; // at this point the aggregator gets the current sample value, while playing the wav file
        return sampleStream;
    } 
```

我想在播放文件时跳过获取样本值的这个过程，而是立即想要这些值而不等到文件末尾。基本上就像matlab中的wavread命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:05:50.713

用于`AudioFileReader`读取文件。这将自动转换为 IEEE 浮点样本。然后重复调用该`Read`方法将一个样本块读入一个 float[] 数组。

# sql - 获取 ssis 中的重复记录和唯一记录

> ID：15419449
> 
> 赞同：0
> 
> 时间：2013-03-14T20:24:20.593
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我有下面提到的表（id 和 Loc 是主键）

```
ID LOC RNK NBR1 NBR2
1 2 A 10 b --->
3 4 A 10 b --->
5 6 A 11 C
8 2 A 12 D
6 3 A 10 b --->
```

所以在这里我必须根据 NBR1 和 NBR2 仅获取重复记录，它应该获取所有记录，而不仅仅是重复项（标记为 --->）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:31:20.160

如果我正确理解了您的问题，您可以使用子查询来完成

```
CREATE TABLE #Test (ID int, LOC int, RNK char(1), NBR1 int, NBR2 char(1) )

INSERT INTO #Test VALUES
    (1, 2, 'A', 10, 'b'),
    (3, 4, 'A', 10, 'b'),
    (5, 6, 'A', 11, 'C'),
    (8, 2, 'A', 12, 'D'),
    (6, 3, 'A', 10, 'b')

SELECT *
FROM #Test t1
WHERE EXISTS
    (SELECT 1
     FROM #Test t2
     WHERE t1.NBR1 = t2.NBR1
       AND t1.NBR2 = t2.NBR2
     GROUP BY NBR1, NBR2
     HAVING COUNT(1) > 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T11:30:46.283

您也可以使用它，但成本会更高。值大于 1 的 RowsCount 是重复的，值为 1 是唯一记录。

```
With Temp As
(
    Select ID,LOC,RNK,NBR1,NBR2,Row_NUMBER() OVER (PARTITION BY NBR2 ORDER BY NBR1) AS ROWSCOUNT FROM <<TABLE_NAME>>
)

Select * from Temp 
```

# openxml-sdk - 使用 OpenXML 创建 Word 文档

> ID：15419450
> 
> 赞同：0
> 
> 时间：2013-03-14T20:24:34.693
> 
> 标签：openxml-sdk

我们正在以编程方式使用 openxml 创建 word 文档。一切正常，但是当我们也以编程方式使用 openxml 进行编辑保护文档时，文档的内容就会受到影响，例如句子

如果生成的文档没有受到保护，那么一切都很好。

任何帮助将不胜感激。

提前致谢。

我们用来保护文档的代码是

```
 using (WordprocessingDocument wdoc = WordprocessingDocument.Open(strPath, true))
        {
            DocumentSettingsPart docSett = wdoc.MainDocumentPart.DocumentSettingsPart;
            docSett.RootElement.Append(new DocumentProtection { Edit = DocumentProtectionValues.ReadOnly });
            docSett.RootElement.Save();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:40:32.797

不知何故，我们设法通过将普通书签文本转换为 html 并使用 altChunk 技术添加到文档中来解决问题。这现在阻止了句子的交换。

```
<p>نحاول اصلاح التقرير اليوم وشكرا </p> 
```

这样做已经解决了我们的问题，但仍然不确定如果将文档作为普通文本添加到书签中，为什么会在文档受到保护时交换句子。

谢谢

# xml - 如何检查xml文件是否有效

> ID：15419455
> 
> 赞同：0
> 
> 时间：2013-03-14T20:24:40.433
> 
> 标签：xml

我正在学习xml。我创建小的 xml 文件和 dfd 文件。这是xml文件

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/css" href="stylesheet.css"?>
<!DOCTYPE software SYSTEM "software.dtd"
[
<!ATTLIST title ttl CDATA "no name">
<!ATTLIST license lcs CDATA #REQUIRED>
]>
<software>
<application>
    <suite>
        <app>
            <title ttl="MOffice">Microsoft Office</title>
            <developer>Microsoft</developer>
            <os>Microsoft Windows</os>
            <license>Trialware</license>
        </app>
        <app>
            <title>iWork</title>
            <developer>Apple</developer>
            <os>Mac OS</os>
            <license>Proprietary</license>
        </app>
        <app>
            <title ttl="Office">Open Office</title>
            <developer>StarOffice,OpenOffice.org,Apache OpenOffice</developer>
            <os>Linux, Mac OS, Microsoft Windows</os>
            <license>LGPL,Apache License</license>
        </app>
    </suite>
</application>  
</software> 
```

这是dfd文件

```
<!ELEMENT software(application)>
<!ELEMENT application(suite) >
<!ELEMENT suite(app*)>
<!ELEMENT app(title,developer,os,license)>
<!ELEMENT title (#PCDATA)>
<!ELEMENT developer(#PCDATA)>
<!ELEMENT os(#PCDATA)>
<!ELEMENT license(#PCDATA)>
<!ATTLIST os osx CDATA #REQUIRED> 
```

它应该是不正确的 xml 文件，因为没有属性`osx`和`lcs`in`os`和`license`元素。但是 Internet Explorer 可以正常打开它。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:27:24.513

大多数 XML 解析器，包括 Internet Explorer 中的解析器，只检查 XML 的格式是否正确 - 以确保 XML 结构正确。

为了根据 DTD 或[XML Schema](http://en.wikipedia.org/wiki/XML_schema)进行验证，您需要使用[验证解析器](http://en.wikipedia.org/wiki/XML_validation)。

如何使用这种解析器进行验证的确切过程取决于解析器和编程语言。

# javascript - 需要说明：联系人列表中包含对象的组织（Javascript，Codecademy）

> ID：15419458
> 
> 赞同：4
> 
> 时间：2013-03-14T20:24:54.000
> 
> 标签：javascript

在[codecademy的这个](http://bit.ly/Zroroe)[联系人列表项目](http://bit.ly/Zroroe)中，我在理解两个 javascript 函数时遇到了一些麻烦。

具体来说，我对“obj”或“prop”之类的条件感到困惑。如果有人能详细解释这些功能是如何工作的，我将不胜感激。

这是代码&谢谢：

```
var friends = {};
friends.bill = {
  firstName: "Bill",
  lastName: "Gates",
  number: "(206) 555-5555",
  address: ['One Microsoft Way','Redmond','WA','98052']
};
friends.steve = {
  firstName: "Steve",
  lastName: "Jobs",
  number: "(408) 555-5555",
  address: ['1 Infinite Loop','Cupertino','CA','95014']
};

var list = function(obj) {
  for(var prop in obj) {
    console.log(prop);
  }
};

var search = function(name) {
  for(var prop in friends) {
    if(friends[prop].firstName === name) {
      console.log(friends[prop]);
      return friends[prop];
    }
  }
};

list(friends);
search("Steve"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:28:39.533

obj 是函数传入的参数`list`。for 遍历该 obj 的名称。例如：

```
var a = {x:5}

for(var prop in a){
    //here prop will be 'x' and a[prop] will be 5 (a['x'] is 5)
    //same goes again for objects that have multiple properties
} 
```

在你的情况下：

```
var list = function(obj) {
  for(var prop in obj) {
    console.log(prop); // here will be logged Bill and Steve, because they are properties of friends -object
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:34:32.677

`obj`只是`list`您正在创建的函数的参数名称。它没有特别的意义。你可以把它叫做`foo`or `object`，或者任何对你有意义的东西。您传递给 list 的函数调用的参数的值（上图，即`friends`）存储在函数范围内的参数中。也就是说，`obj`本质上是`friends`在操作的代码里面变成了`list`。

`prop`类似：它只是作为 JavaScript[`for...in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)语法的一部分创建的变量。 `for in`循环遍历作为构造参数的对象的属性名称，`in`并将它们一一存储在`prop`. 同样，您可以随意调用它：

```
var list = function (foo) {
    for (var bar in foo) { 
```

但是，我相信您已经了解到，给变量名赋予一些含义是有意义的，因此`obj`是“object”的缩写，因为`list`函数对任何通用对象进行操作，并且`prop`是“property”的缩写。

请记住，`for...in`循环遍历属性*名称*。要访问相应的值，您应该使用：

```
if (obj.hasOwnProperty(prop)) {
    //access via obj[prop];
} 
```

该`search`函数实际上是这样做的，但没有推荐的[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)检查。

# python - python表中的keyerror

> ID：15419466
> 
> 赞同：0
> 
> 时间：2013-03-14T20:25:19.383
> 
> 标签：python

我对下面的代码感到困惑：

```
class Table(object):
    def __init__(self):
        self.d = collections.defaultdict(dict)
    def add(self, row, col, val):
        self.d[row][col] = val
    def get(self, row, col, default=None):
        return self.d[row].get(col, default)
    def incol(self, col, val):
        for x,y in self.d.iteritems():
            if y[col]==val:
                wholerow=y
        return wholerow.values() 
```

创建表后，我无法使用“incol”函数获取所有值。它总是给我关键错误。但是，当我只使用相同的代码而不使用函数时，我可以得到我想要的。我的代码怎么了....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:44:27.580

上面的代码不是“总是给我关键错误”（“总是”是我在这里争论的词）。例如，考虑以下代码：

```
foo = Table()
foo.add("row_1", "col_1", "col_1_value")
foo.add("row_1", "col_2", "col_2_value")
print foo.get("row_1", "col_1")
print foo.incol("col_1", "col_1_value") 
```

这工作没有任何错误，并产生以下输出：

```
col_1_value
['col_2_value', 'col_1_value'] 
```

但是，如果您尝试将不存在的列的名称传递给`incol`，您将得到一个`KeyError`. 例如，如果您将以下行附加到上述代码中：

```
print foo.incol("i do not exist", "my imaginary value") 
```

您最终会收到类似于以下内容的错误消息：

```
Traceback (most recent call last):
File "./stack_overflow-2013-03-14.py", line 21, in <module>
    print foo.incol("i do not exist", "my imaginary value")
File "./stack_overflow-2013-03-14.py", line 12, in incol
    if y[col]==val:
KeyError: 'i do not exist' 
```

`incol`可以处理这种情况的示例实现是：

```
def incol(self, col, val):
    result = None
    for x,y in self.d.iteritems():
        if col in y and y[col]==val:
            result = y.values()
            break
    return result 
```

现在，如果您运行以下几行：

```
foo = Table()
foo.add("row_1", "col_1", "col_1_value")
foo.add("row_1", "col_2", "col_2_value")
print foo.get("row_1", "col_1")
print foo.incol("col_1", "col_1_value")
print foo.incol("i do not exist", "my imaginary value")
print foo.incol("i do not exist", None) 
```

你得到：

```
col_1_value
['col_2_value', 'col_1_value']
None
None 
```

您还可以按照`incol`Martijn Pieters 的建议使用以下实现：

```
def incol(self, col, val):
    result = None
    for x,y in self.d.iteritems():
        if y.get(col)==val:
            result = y.values()
            break
    return result 
```

但是在这种情况下，如果您传递一个不存在的`col`名称和`val`= `None`，那么它将匹配任何行。相应的输出将是：

```
col_1_value
['col_2_value', 'col_1_value']
None
['col_2_value', 'col_1_value'] 
```

也许这是您希望应用程序的行为。那是你来决定的。

# java - 在 Ant 中，如何在文件名中指定带有逗号的文件？

> ID：15419471
> 
> 赞同：1
> 
> 时间：2013-03-14T20:25:40.833
> 
> 标签：java, python, ant, fileset, coverage.py

这是我尝试过的示例目标。事实证明，它想删除所有内容，因为逗号分隔“ *** */*”和“cover”——可以理解。

```
<target name="clean">
    <delete
        verbose="true">
        <fileset dir="." includes="**/*.pyo"></fileset>
        <fileset dir="." includes="**/*,cover"></fileset>
    </delete>
</target> 
```

如何指定嵌入式逗号？

我正在尝试学习 Ant，这样我就不必为不同的操作系统维护不同的构建系统。在本例中，它位于 Python 环境中，其中 *,cover 文件由名为[Coverage](http://nedbatchelder.com/code/coverage/)的代码覆盖检查工具创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:01:45.183

你不需要逃避这个。只需使用`<include/>`而不是`includes`arg。试试这个：

```
<project name="test" default="clean">

    <dirname property="build.dir" file="${ant.file.test}" />

    <target name="clean">
        <delete>
            <fileset dir="${build.dir}/test">
                <include name="**/*,*.xml" />
            </fileset>
        </delete>
    </target>

</project> 
```

顺便一提。你不应该在你的论点中使用`.`（点） 。`dir`如果你想删除你有文件的目录中的文件，`build.xml`你应该传递绝对路径（要做到这一点，你可以`<dirname/>`像我的例子一样使用）。如果您将使用`.`，那么您将遇到嵌套构建的问题。让我们想象一下，您有两个删除文件的构建，但第一个构建也调用第二个构建：

主目录/build1.xml

```
<delete dir="." includes="**/*.txt" />
<!-- call clean target from build2.xml -->
<ant file="./subdir/build2.xml" target="clean"/> 
```

主目录/子目录/build2.xml

```
<delete dir="." includes="**/*.txt" /> 
```

在这种情况下，build2.xml 不会删除 subdir 中的 *.txt 文件，而是删除 maindir 中的 *.txt 文件，因为 ant 属性将被传递给 build2.xml。当然你可以用它`inheritAll="false"`来省略它，但根据我的经验，我知道`.`在路径中使用会给你带来很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:48:10.503

除非您不想删除其他名称以 cover 结尾的文件，否则请忽略逗号：

```
<fileset dir="." includes="**/*cover"></fileset> 
```

如果您确实有其他不想删除的以封面结尾的文件，请尝试使用 MattDMo 评论中的反斜杠建议。您可能需要使用双反斜杠（“ `**/*\\,cover`”）。

另一种可能性：您可以将 Coverage 配置为将其输出放在另一个目录中，这样您就可以删除整个目录吗？或者您可以将其配置为使用不同的输出文件名，这样您就不会遇到这个问题？我不熟悉 Coverage，但查看您提供的链接，看起来 data_file 选项可能会执行其中一项或两项操作。

# c# - 找不到类型或命名空间“TextFieldParser”

> ID：15419475
> 
> 赞同：6
> 
> 时间：2013-03-14T20:26:06.107
> 
> 标签：c#, visual-studio-2010, textfield

我正在尝试使用在[Reading CSV files using C#](https://stackoverflow.com/questions/3507498/reading-csv-file)中找到的 TextfieldParser 。我正在使用 VS 2010 并在 C# 中执行此操作。

我不断收到“找不到类型或名称空间“TextFieldParser”..”

当我尝试添加 using 行时，它只会使用 Microsoft.VisualBasic；深入而不使用 Microsoft.VisualBasic.FileIO；

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-05T17:38:47.043

在 Visual Studio 中，右键单击侧面板`References`中的。`Solution Explorer`单击“添加参考”。

在那个列表中一定要检查`Microsoft.VisualBasic`。点击确定。

现在在命名空间中，添加`Using Microsoft.VisualBasic.FileIO`.

这将允许您使用 TextFieldParser。有关如何使用它的简单示例，请看这里： http: [//geekswithblogs.net/brians/archive/2010/07/07/whats-a-nice-class-like-textfieldparser-doing-in-a -命名空间.aspx](http://geekswithblogs.net/brians/archive/2010/07/07/whats-a-nice-class-like-textfieldparser-doing-in-a-namespace.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T20:12:45.633

应用程序引用不可用于应用程序中的未编译文件（aspx、ashx）。需要将引用添加到 web.config，否则代码需要移动到编译文件 (cs/vb)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-06T20:10:11.480

对于未编译的文件（aspx/ashx），需要在web.config中放一个引用。（他们不能使用项目引用。）

```
<system.web>
    <compilation debug="true" targetFramework="4.6.1">
      <assemblies>
        <add assembly="Microsoft.VisualBasic, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
      </assemblies>
    </compilation>
</system.web> 
```

或者，对于 Web 应用程序，最好将代码放在编译文件 (cs/vb) 中并添加对项目的引用。

看到这个问题[microsoft.visualbasic.fileio 不存在](https://stackoverflow.com/questions/12830017/microsoft-visualbasic-fileio-does-not-exist)。

# ruby - Mongoid 嵌套关联不返回 Object

> ID：15419476
> 
> 赞同：1
> 
> 时间：2013-03-14T20:26:19.600
> 
> 标签：ruby, ruby-on-rails-3, mongodb, associations, mongoid3

我有三个模型

```
class User
 include Mongoid::Document
 include Mongoid::Timestamps

 has_many :conversation
end

class Conversation
  include Mongoid::Document
  include Mongoid::Timestamps
  has_many :users
  embeds_many :messages
end

class Messages
  include Mongoid::Document
  include Mongoid::Timestamps

  embedded_in :conversation
end 
```

我正在尝试获取一些用户消息

```
users.each do |user|
 puts user.conversations.each {|conv| conv.messages}
end 
```

这使我返回 true 而不是我认为应该的消息数组。是我做错了什么还是我必须将我的查询分成两部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:42:39.893

移动看跌期权可能会有所帮助：

```
users.each do |user|
 user.conversations.each {|conv| puts conv.messages}
end 
```

或者我可以建议使用地图/收集。

```
users.each do |user|
  puts user.conversations.collect {|conv| conv.messages}
end 
```

我想这取决于你想要做什么。

# coldfusion - cflogin 后设置默认位置

> ID：15419479
> 
> 赞同：1
> 
> 时间：2013-03-14T20:26:31.613
> 
> 标签：coldfusion, coldfusion-9, coldfusion-8, cflogin

我有几个用 ColdFusion 编写的 Web 应用程序。应用程序在 CF 根文件夹中有自己的文件夹。当我成功`<cflogin>`时，我将返回到根文件夹的索引页面。我希望用户留在那个我知道可以完成的应用程序文件夹中，我只是不记得如何开始。您使用该应用程序的页面为应用程序设置根页面的地方`Application.cfc`。有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T19:35:41.600

如果您从本地驱动器中删除 Application.cfc，这并不意味着它已从服务器中删除。所以你可能有一些隐藏的 Application.cfc 在应用程序中。

# sql - 使用 Oracle SQL 检索特定日期的订单状态

> ID：15419480
> 
> 赞同：2
> 
> 时间：2013-03-14T20:26:31.590
> 
> 标签：sql, oracle

我很难创建一个 Oracle 查询来报告某些日子（一系列月份中每个月的第一天）的订单历史状态。我搜了又搜，没有人问类似的问题。这似乎是一个直截了当的问题，所以希望有人能提供帮助！这是我的例子：

订单表：

```
 ORDER_NUMBER   STATUS    DATE
    50001000       Created   01-15-2010
    50001000       Released  02-20-2010
    50001000       Completed 02-25-2010
    50001000       Closed    03-10-2010
    50001035       Created   01-20-2010
    50001035       Released  01-25-2010
    50001035       Completed 04-05-2010
    50001035       Closed    05-30-2010 
```

所以我需要的输出是每个月初每个订单的状态。像这样的东西：

```
 DATE        ORDER_NUMBER   STATUS
    12-01-2009  
    01-01-2010  
    02-01-2010  50001000       Created   
    02-01-2010  50001035       Released
    03-01-2010  50001000       Completed
    03-01-2010  50001035       Released
    04-01-2010  50001000       Closed
    04-01-2010  50001035       Released
    05-01-2010  50001000       Closed
    05-01-2010  50001035       Completed 
    06-01-2010  50001000       Closed
    06-01-2010  50001035       Closed
    07-01-2010  50001000       Closed
    07-01-2010  50001035       Closed
    ..etc 
```

是否有一些本机关键字可以在没有大量连接和子查询的情况下完成这项工作？

谢谢，

加勒特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:29:45.467

花了一段时间，但我认为这将是您正在寻找的：

```
select to_char(mf.month_first, 'MON-YYYY'), 
       o.order_name,
       o.status
  from (select add_months(to_date('01-DEC-2009'), level-1) month_first
          from dual
       connect by level <= 12) mf
  left outer join orders o
    on trunc(o.status_date, 'MM') <= mf.month_first
 where not exists(
     select 1
       from orders
      where ((trunc(status_date, 'MM') = trunc(o.status_date, 'MM')
              and status_date < o.status_date)
          or (trunc(status_date, 'MM') != trunc(o.status_date, 'MM') 
              and status_date >= o.status_date))
        and trunc(status_date, 'MM') <= mf.month_first
        and order_name = o.order_name)
 order by mf.month_first, o.order_name 
```

上面的查询确保如果在同一月份有两次状态变化，则显示第一个，这就是为什么 and 之间的比较`status_date`发生`o.status_date`了两次，一次是在同一个月，一次是在不同月份...

子选择允许您通过`connect by level`指定当月的第一个日期（`01-DEC-2009`在这种情况下）和报告的持续时间/长度（`12`月）来改变日期范围。

我希望这就是您所追求的，尽管我不得不说，如果您有很多订单，这很可能会创建很多行（尤其是如果订单在 3 月完成，它会一直显示`Closed`到最后的报告。

这是一个[SQLFiddle](http://sqlfiddle.com/#!4/2db21/48)可以看到它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:39:40.920

不确定我是否理解您的示例数据，但这里的查询可能会对您有所帮助 - 将您的日期与每个月的第一天进行比较：

```
SELECT * FROM your_table 
 WHERE your_date IN
(
 -- This query will give you the first day of each month --
 Select Add_Months(Trunc(Sysdate,'YEAR'),Level-1) first_day_of_month
   From dual
 Connect By Level <= 12 -- number of months in a year --
) 
```

/

# asp.net - MasterPage 中的控件未声明

> ID：15419483
> 
> 赞同：0
> 
> 时间：2013-03-14T20:26:37.253
> 
> 标签：asp.net, master-pages, code-behind

我的 Masterpage 中有一个超链接控件，如下所示：

```
<asp:HyperLink runat="server" ID="lnkLoginButton">Login</asp:HyperLink> 
```

当我在 Masterpage 代码隐藏的页面加载事件中引用控件时

```
lnkLoginButton.Text = "Go to..." 
```

构建时出现此错误

```
error BC30451: Name 'lnkLoginButton' is not declared 
```

即使我从工具箱将控件拖到母版页中，也会发生这种情况。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:24:31.257

仔细检查您的母版页是否正确地从类后面的代码继承。如果命名空间和类名不匹配，那就可以解释为什么它看不到 Button。

# java - java.lang.ClassNotFoundException：com.microsoft.sqlserver.jdbc.SQLServerDriver

> ID：15419485
> 
> 赞同：6
> 
> 时间：2013-03-14T20:26:39.607
> 
> 标签：java, sql, jdbc

```
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver 
```

当我尝试将我的应用程序部署到 tomcat 时出现上述异常。但奇怪的是，我尝试了一个简单的主要方法，它工作正常。请问有什么帮助吗？？？

我做了以下事情：

```
Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver");
String connectionUrl = "jdbc:microsoft:sqlserver://localhost:1433;" + "database=DBName;" + "user=UserName;" + "password=Password";
connection = DriverManager.getConnection(connectionUrl); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T20:29:15.707

您需要将包含该类的 jar 文件添加`com.microsoft.sqlserver.jdbc.SQLServerDriver`到您的 war 文件的`WEB-INF/lib`文件夹中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:33:57.197

阅读[有关类路径的 Tomcat 文档](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)以进行澄清，或者将 sqljdbc.jar 放入 $CATALINA_HOME/lib 以从所有应用程序访问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T09:17:50.047

> May 15, 2014 3:09:43 PM org.apache.tomcat.jdbc.pool.ConnectionPool init SEVERE: Unable to create initial connections of pool. java.sql.SQLException: com.microsoft.sqlserver.jdbc.SQLServerDriver at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:254) at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:182) at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:701) at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:635) ...

It is quite puzzling because my web application has **WEB-INF/lib/sqljdbc4.jar**.

From the error message, somehow the jar file is required by Tomcat too.

After I copy the jar file to **CATALINA_HOME/lib/sqljdbc4.jar**, the error is gone.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-07T12:36:58.103

即使您在构建路径中有 JAR(sqlserverjdbc.jar) 您需要添加包含该类的 jar 文件。com.microsoft.sqlserver.jdbc.SQLServerDriver 到您的战争文件的 WEB-INF/lib 文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-04T20:01:30.190

由于您正在运行 Web 应用程序，因此您需要将 MS SQL Server 驱动程序（或任何 DB 的驱动程序）存储在两个位置。在成为您的 WAR 的应用程序中，您需要存储在 App Server 的 LIB 目录中的第二个副本。所以，如果你在 Tomcat 上运行，那么你可以把它放在 /opt/tomcat/lib 或 C:\DEV\tomcat7\lib 上。

# objective-c - 当表格长度超过屏幕大小时，表格导航器会移出视图

> ID：15419486
> 
> 赞同：0
> 
> 时间：2013-03-14T20:26:39.967
> 
> 标签：objective-c, ipad, uitableview

我有一个顶部有导航栏的表格视图。问题是当表格变满时，当我滚动表格时导航消失。有什么办法可以修复它，使它不随桌子移动吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:27:53.687

您已将 NavigationBar 添加到 UITableViews 标题视图中...

解决问题的最简单方法是转到 XCode Designer，您已在其中添加了 UITableView 和 UINavigationBar ....

剪切或删除 NavigationBar

通过拖放将 TableView 移动一点点

将 NavigationBar 直接插入或添加到 View 中，而不是在 TableView 中，然后将 TableView 移动到更高的位置，直到它适合您的 NavBar。还要调整您的 TableView 的大小，以适应屏幕现在...

在此之后，导航栏在滚动 TableView 时不会移动

# .htaccess - .htaccess 相应地从子目录重定向到另一个域子目录

> ID：15419487
> 
> 赞同：1
> 
> 时间：2013-03-14T20:26:45.980
> 
> 标签：.htaccess

我正在尝试从我的主域重定向到辅助域，但前提是主域的请求是子目录。

我要重定向的子目录是 FTP，所以如果用户提出以下请求：

[http://www.site1.com/FTP/free/50b694124bd63/SaMple+PicTure.PnG](http://www.site1.com/FTP/free/50b694124bd63/SaMple+PicTure.PnG)

它会变成

[http://www.site2.com/FTP/free/50b694124bd63/SaMple+PicTure.PnG](http://www.site2.com/FTP/free/50b694124bd63/SaMple+PicTure.PnG)

但如果用户发出的请求不涉及 FTP 文件夹，则不会重定向用户。像这样：

[http://www.site1.com](http://www.site1.com)或[http://www.site1.com/somethingelse/](http://www.site1.com/somethingelse/)

**然而，我是；在制作 .htaccess 文件时有点迷失**。到目前为止，我尝试做的是：

```
# Redirect users
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^ftp(.*)$ http://site2.com/FTP/$1 [L,R=301]
</IfModule> 
```

任何方向或样品都会很棒:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:47:09.093

无需使用重写引擎进行简单的重定向。我认为您只想使用 Redirect 指令：

```
Redirect /FTP http://www.site2.com/FTP 
```

默认情况下，这将导致“临时”重定向响应（HTTP 状态 302）。如果您确定第二个站点的 URL 永远不会更改，则可以通过添加`permanent`参数来导致“永久”重定向响应（HTTP 状态 301）：

```
Redirect permanent /FTP http://www.site2.com/FTP 
```

另外，请注意 URL 的路径是区分大小写的。如果您希望[http://www.site1.com/ftp](http://www.site1.com/ftp)也重定向，您将需要添加带有小写路径的规则，

```
Redirect /ftp http://www.site2.com/FTP 
```

或使用 mod_speling。

# macos - Chromium 选项卡正在重置 WebView 中的 Flash 内容

> ID：15419490
> 
> 赞同：0
> 
> 时间：2013-03-14T20:26:51.760
> 
> 标签：macos, cocoa, webview

我正在我的项目中使用[https://github.com/rsms/chromium-tabs](https://github.com/rsms/chromium-tabs)并且我已经创建了我的应用程序，因此这些选项卡已注册到 WebView。当我调试时，我注意到当我查看 Youtube 视频或任何 Flash 内容时，我切换了标签，然后切换回重新加载的内容或重新启动视频。有什么理由会发生这种情况。

当一个选项卡被选中时，它被设置： `[self becomeFirstResponder];` 除此之外，我没有发现其他连接方式，闪光灯会重置，页面的其余部分将保持不变。每当它不可见时，我相信它是 WebView 中的一个设置。

对于下面的评论：

我遵循 Github 上的示例并使用 MyTabContents.mm 创建内容。还使用了自定义 webview。

MyTabContents.mm：

```
-(id)initWithBaseTabContents:(CTTabContents*)baseContents {
  if (!(self = [super initWithBaseTabContents:baseContents])) return nil;
    ProgressWebView *wv = [[ProgressWebView alloc] initWithFrame:NSZeroRect];
    [wv setProgressDelegate:self];

    [[wv mainFrame] loadRequest:[[NSURLRequest alloc] initWithURL:[NSURL URLWithString:@"https://google.com"]]];
    [wv setShouldUpdateWhileOffscreen:YES];
    webView = wv;
  // Create a NSScrollView to which we add the NSTextView
  NSScrollView *sv = [[NSScrollView alloc] initWithFrame:NSZeroRect];
  [sv setDocumentView:wv];
  [sv setHasVerticalScroller:NO];

  // Set the NSScrollView as our view
  self.view = sv;

  return self;
} 
```

AppDelegate.mm：

```
- (void)applicationDidFinishLaunching:(NSNotification *)notification {
    CTBrowserWindowController* windowController =
    [[CTBrowserWindowController alloc] initWithBrowser:[MyBrowser browser]];
    [windowController.browser addBlankTabInForeground:YES];
    [windowController showWindow:self];
} 
```

我的浏览器.mm：

```
-(CTTabContents*)createBlankTabBasedOn:(CTTabContents*)baseContents {
  // Create a new instance of our tab type
    MyTabContents *contents = [[MyTabContents alloc]
                               initWithBaseTabContents:baseContents];
    [self changeLayout];
  return [contents autorelease];
} 
```

# javascript - 具有多个组件的 ExtJS 菜单项

> ID：15419491
> 
> 赞同：2
> 
> 时间：2013-03-14T20:26:53.313
> 
> 标签：javascript, extjs, extjs4

我的目标是具有[`menuitem`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.menu.Item)以下形式：

```
-------------------------
window1 [ _ ] [ □ ] [ x ]
------------------------- 
```

因此问题是：[工具](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Tool)（类似于我们通常在窗口右上角的工具）或标准[按钮](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.button.Button)是否可以放置在菜单项中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:03:44.073

使用分机 4.2：

```
Ext.require('*');

Ext.onReady(function() {

    new Ext.menu.Menu({
        items: {
            border: false,
            xtype: 'panel',
            title: 'Foo',
            shrinkWrapDock: true,
            tools: [{
                type: 'close'
            }]
        }
    }).show();

}); 
```

# python - Converting a grayscale image to an RGB heatmap image with matplotlib

> ID：15419493
> 
> 赞同：5
> 
> 时间：2013-03-14T20:27:04.607
> 
> 标签：python, matplotlib

How do I convert an M x N grayscale image, or in other words a matrix or 2-D array, into an RGB heatmap, or in other words an M x N x 3 array?

Example:

```
 [[0.9, 0.3], [0.2, 0.1]] 
```

should become

```
[[red, green-blue], [green-blue, blue]] 
```

where red is `[1, 0, 0]`, blue is `[0, 0, 1]`,etc.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T20:27:04.607

```
import matplotlib.pyplot as plt

img = [[0.9, 0.3], [0.2, 0.1]]

cmap = plt.get_cmap('jet')

rgba_img = cmap(img)
rgb_img = np.delete(rgba_img, 3, 2) 
```

`cmap` is an instance of matplotlib's `LinearSegmentedColormap` class, which is derived from the `Colormap` class. It works because of the `__call__` function defined in `Colormap`. Here is the docstring from matplotlib's git repo for reference, since it's not described in the API.

```
def __call__(self, X, alpha=None, bytes=False):
    """
    *X* is either a scalar or an array (of any dimension).
    If scalar, a tuple of rgba values is returned, otherwise
    an array with the new shape = oldshape+(4,). If the X-values
    are integers, then they are used as indices into the array.
    If they are floating point, then they must be in the
    interval (0.0, 1.0).
    Alpha must be a scalar between 0 and 1, or None.
    If bytes is False, the rgba values will be floats on a
    0-1 scale; if True, they will be uint8, 0-255.
    """ 
```

A simpler option is to display `img`, using `plt.imshow` or `plt.matshow`, and then copy or save the result as an RGB or RGBA image. This was too slow for my application (~ 30 times slower on my machine).

# asp.net - 我的 asp.net 面板上的水平滚动条不会滚动

> ID：15419500
> 
> 赞同：0
> 
> 时间：2013-03-14T20:27:33.903
> 
> 标签：asp.net, css, scrollbar

我有一个包裹在面板内的中继器（使用 MVC Asp.net）。出现滚动条，但我的表格似乎正在换行以适应面板的水平尺寸，而不是溢出面板。

滚动条出现了，但它什么也没做。

```
<asp:Panel ID="pnlMultipleBeneficiaries" ScrollBars = "Horizontal" style="overflow:scroll" runat=""server" >
<div class="section" >
       <fieldset>
        <legend class="labels">Added Beneficiaries</legend>

            <asp:Repeater ID="rptMultipleBeneficiaryDetails" runat="server">
                <HeaderTemplate>
                    <table border = 1> 
                    <tr>
                        <td class="labels displayInput_noWidth">First Name</td>
                        <td class="labels displayInput_noWidth">Last Name</td>
                        <td class="labels displayInput_noWidth">Status</td>
                        <td class="labels displayInput_noWidth">Birthday</td>
                        <td class="labels displayInput_noWidth">Parent</td>
                        <td class="labels displayInput_noWidth">Street</td>
                        <td class="labels displayInput_noWidth">City</td>
                        <td class="labels displayInput_noWidth">Province</td>
                        <td class="labels displayInput_noWidth">Postcode</td>
                        <td class="labels displayInput_noWidth">Country</td>
                        <td class="labels displayInput_noWidth">Phone Number</td>
                        <td class="labels displayInput_noWidth">HasReplied</td>
                        <td class="labels displayInput_noWidth">Something Else</td>

                    </tr>                   
                </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <td><%#DataBinder.Eval(Container.DataItem, "BeneficiaryFirstName")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "BeneficiaryLastName")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "BeneficiarySin")%></td>
                        <td><%#DateTime.Parse(DataBinder.Eval(Container.DataItem, "BeneficiaryBirthday").ToString()).ToString("MM/dd/yyyy")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "Parent")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "Street1")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "City")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "ProvinceAbbreviation")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "Postcode")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "CountryDescription")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "HasReplied")%></td>
                        <td><%#DataBinder.Eval(Container.DataItem, "IsGrantApplicationFormReceived")%></td>
                    </tr>
                </ItemTemplate>
                <FooterTemplate>
                    </table>
                </FooterTemplate>
            </asp:Repeater>         
        </fieldset>
            </div>
   </asp:Panel> 
```

我确实尝试在面板中使用 style="overflow:auto" 但它没有做任何事情。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:31:00.130

您没有设置面板的宽度。所以首先设置面板的宽度，然后`overflow:scroll`为它们分配属性。

```
<asp:Panel ID="pnlMultipleBeneficiaries" ScrollBars = "Horizontal" style="overflow:scroll" runat="server" Width="500px"> 
```

您可以尝试的另一件事是您可以修复此类的宽度`<div class="section">`并设置`overflow`属性

```
.section
{
 width:500px;
 overflow-x:auto;
} 
```

基本上，`overflow`当您拥有固定宽度`parent`并拥有`overflow`属性时，属性将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:30:31.713

`overflow:auto;` 姐姐，改成`overflow:scroll;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-25T21:36:32.077

为我工作（浏览器 -> Chrome 版本 59.0.3071.115（官方版本）（64 位））以及 Internet Explorer 11 版本 11.0.9600.18697

用于剑道网格，两者都在工作。

CSS 代码：

```
.k-grid-content {
    overflow: scroll;
}

.k-grid-content {
    overflow: auto;
} 
```

# c++ - ASP.NET Web 应用程序的安全库

> ID：15419505
> 
> 赞同：1
> 
> 时间：2013-03-14T20:27:45.887
> 
> 标签：c++, asp.net, security, web

有人知道 ASP.NET Web 应用程序的任何安全库吗？

我正在寻找提供基本身份验证、登录帐户、防止 SQL 注入和跨站点脚本、输入验证、加密等的库。

我遇到了一个名为 Rhino Security 的库。有谁知道任何类似的库？

编辑：

另一个库的一个例子是 CryptoSharp [http://www.9rays.net/Category/63-cryptosharp.aspx](http://www.9rays.net/Category/63-cryptosharp.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:40:51.153

微软企业库：http: [//msdn.microsoft.com/en-us/library/ff632023.aspx](http://msdn.microsoft.com/en-us/library/ff632023.aspx)

# forms - 从 GSP 到控制器的数据传输，在 grails 中没有表格

> ID：15419509
> 
> 赞同：0
> 
> 时间：2013-03-14T20:27:57.790
> 
> 标签：forms, grails, controller, gsp

我想将我的用户的 user_id 从我的 GSP 发送到控制器，而不使用表单或`<g:link>`选项卡休息，还告诉我如何从`<g:link>`选项卡发送多个数据。

# excel - 如何在 Excel 表格的一列中找到最大和最小的差异？

> ID：15419510
> 
> 赞同：0
> 
> 时间：2013-03-14T20:28:02.557
> 
> 标签：excel, ms-office

我有一列有很多这样的数字：

1.  12
2.  32
3.  43
4.  12
5.  45
6.  31
7.  43
8.  12

鉴于*差异*被定义为一行的值与前一行的值之间的差异（RowY - RowX），我应该计算最高和最低差异。

示例中的数据`A2 - A1`为 20，但`A5 - A4`为 33。因此`A5 - A4`是最大差异。最低差值为`A4 - A3`, -31。

我只能使用一个单元格和一个公式。我可以使用这样的公式：`=MAX(A2-A1,A3-A2...)`，但我想要一个自动选择行的公式，而不是手动输入每个行组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:31:11.767

采用

`Min(A1:An) - Max(A1:An)` 对于最低的差异

和

`Max(A1:An) - Min(A1:An)` 最大的区别

其中 An 是您的最后一行（因此在您的示例中，A8）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:32:11.677

=MAX(A1:A8)-MIN(A1:A8) 但我不知道为什么 Excel 中的单元格不足。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:42:28.207

输入这个公式：

```
=MAX(A2:A8-A1:A7)

```

您需要将其作为数组公式输入，即按`Ctrl`- `Shift`-`Enter`

# javascript - 我应该如何在 JS 中存储颜色？

> ID：15419518
> 
> 赞同：0
> 
> 时间：2013-03-14T20:28:34.323
> 
> 标签：javascript, opengl-es, webgl

RGB 颜色是 0-255，所以我可以在 uint8array(4) 中存储颜色（+alpha），但是如果我想在我的 webGL 场景中使用它们，那么我必须在每一帧中将它们除以 255。

那么哪个更好呢？将颜色存储在 float32array 而不是 uint8array 中（内存增加 4 倍），或者将整数值转换为每帧浮点数？

# c# - 派生类访问的 C# 保护方法

> ID：15419520
> 
> 赞同：0
> 
> 时间：2013-03-14T20:28:34.787
> 
> 标签：c#, inheritance

派生类可以访问它的基类的受保护方法`base.method()`吗？

如下所示：

```
Class A
{   
  Protected doThis()   
}

Class B : A   
{   
  base.doThis();   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:30:13.460

你可以 `doThis()`在课堂上的一个方法中做

假设您的意思是：-

```
class A
{
    protected void doThis()
    {

    }
}

class B : A
{
    public void MyMethod()
    {
         doThis();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:35:13.790

这是访问修饰符“受保护”的定义：

[http://msdn.microsoft.com/en-us/library/bcd5672a(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bcd5672a(v=vs.110).aspx)

[http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)

# c++ - 使用 C++ 从控制台应用程序收集标准输出输出

> ID：15419523
> 
> 赞同：0
> 
> 时间：2013-03-14T20:28:41.057
> 
> 标签：c++, winapi, console-application, stdout

我有一个用 C++ 编写的控制台应用程序。有没有办法将`stdout`它的所有输出收集到字符串/管道/内存数组？

PS。我需要从我需要从中收集的控制台应用程序中执行此操作`stdout`。或者，换句话说，它是从自身收集的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:37:16.103

是的。要将其重定向到 a `string`，您可以使用 a`std::stringstream`

```
std::stringstream buffer;
std::streambuf * old = std::cout.rdbuf(buffer.rdbuf()); 
```

然后，如果你这样做：

```
std::cout << "Example output" << std::endl;
std::string text = buffer.str(); 
```

您将看到`text`现在包含`"Example output\n"`.

# c# - 值 < 小于 0 时的数字格式不正确

> ID：15419526
> 
> 赞同：0
> 
> 时间：2013-03-14T20:28:54.630
> 
> 标签：c#, format, devexpress

我有一个 DevXpress 网格显示有关地理定位的一些信息，包括经度和纬度，两列的格式为数字`"N5"`，但在纬度我有 45,xxxx，在纬度我`-73,xx`仔细检查了生成的代码和 DevXpress `"WYSIWYG"`，但找不到任何东西。

生成的代码：

```
// 
// colLatitude
// 
resources.ApplyResources(this.colLatitude, "colLatitude");
this.colLatitude.DisplayFormat.FormatString = "N5";
this.colLatitude.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
this.colLatitude.FieldName = "Latitude";
this.colLatitude.MinWidth = 50;
this.colLatitude.Name = "colLatitude";
this.colLatitude.OptionsColumn.AllowEdit = false;
this.colLatitude.OptionsColumn.AllowGroup = DevExpress.Utils.DefaultBoolean.False;
this.colLatitude.OptionsColumn.AllowSort = DevExpress.Utils.DefaultBoolean.False;
this.colLatitude.OptionsColumn.ReadOnly = true; 
```

```
// 
// colLongitude
// 
resources.ApplyResources(this.colLongitude, "colLongitude");
this.colLongitude.DisplayFormat.FormatString = "N5";
this.colLongitude.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
this.colLongitude.FieldName = "Longitude";
this.colLongitude.MinWidth = 50;
this.colLongitude.Name = "colLongitude";
this.colLongitude.OptionsColumn.AllowEdit = false;
this.colLongitude.OptionsColumn.AllowGroup = DevExpress.Utils.DefaultBoolean.False;
this.colLongitude.OptionsColumn.AllowSort = DevExpress.Utils.DefaultBoolean.False;
this.colLongitude.OptionsColumn.ReadOnly = true; 
```

来自视图控制器的代码：

```
 /// <summary>
 /// Get la Latitude
 /// </summary>
 public double Latitude
 {
   get { return this.GPSEventData.Latitude; }
 }
 /// <summary>
 /// Get la Longitude
 /// </summary>
 public double Longitude
 {
   get { return this.GPSEventData.Longitude; }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:37:27.043

我假设网格以某种方式绑定到数据源，例如`DataTable`.

检查数据源中`Latitude`和的类型。`Longitude`如果它们被定义为`string`网格中的格式将不起作用。

您的值 45,xxxx 和 -73,xx 用逗号格式化，这让我认为它们可能在数据源中被定义为字符串。

如果您实际上使用逗号作为小数点，它可能与本地化设置有关。看看这篇文章：[如何修复有小数分隔符问题的应用程序](https://stackoverflow.com/questions/6428670/how-to-fix-an-application-that-has-a-problem-with-decimal-separator)

# jsf - 选择 selectoneradion 后渲染 p:menu

> ID：15419534
> 
> 赞同：0
> 
> 时间：2013-03-14T20:29:17.897
> 
> 标签：jsf, primefaces

在我的`.xhtml`页面中选择了一个单选选项后，它将调用我的支持 bean 方法来动态地构造一个带有来自 DB 的值的菜单项，并呈现它的`.xhtml`页面。

```
<p:selectOneRadio id="userRadio" value="#{applicationBean.selectedUser}" >
    <f:selectItems value="#{applicationBean.usernames1}" />
    <p:ajax event="change" listener="#{applicationBean.displayCommands}" update="commandmenu" />
</p:selectOneRadio>

<p:menu model="#{applicationBean.model}" id="commandmenu" rendered="#{applicationBean.menudisplay}"/> 
```

## 后备豆法

```
public void displayCommands(AjaxBehaviorEvent event)
{
 System.out.println("The selected user is... "+selectedUser);

 Map<String, String> commands =userCommand.get(selectedUser);

 if(commands!=null)
 {
      System.out.println("the number of commands are.."+commands.size());
      for (Map.Entry<String,String> entry : commands.entrySet())
      {
         System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
      }

 }
 this.menudisplay = true;
 FacesContext.getCurrentInstance().renderResponse();     
} 
```

但 p:menu 未呈现。最初

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:01:34.303

这种方法有两个问题：

1.  该`change`事件是监听单选按钮和复选框更改的错误事件。你需要`click`。否则，第一次点击不会触发某个浏览器中的操作，该浏览器由位于雷德蒙德的团队开发。更好的是，完全省略该`event`属性。它已经默认为正确的。

2.  您不能让 JS/Ajax 更新最初不是由 JSF 呈现的内容，因此在 HTML DOM 树中完全不存在。您需要将条件渲染的 JSF 组件包装在另一个 JSF 组件中，该组件始终被渲染，因此始终存在于 HTML DOM 树中，因此始终可通过常规`document.getElementById()`方式等方式提供给 JS/Ajax。

简而言之，这是解决方案（`event`属性被删除；`<p:menu>`被放置在面板组中）：

```
<p:selectOneRadio id="userRadio" value="#{applicationBean.selectedUser}" >
    <f:selectItems value="#{applicationBean.usernames1}" />
    <p:ajax listener="#{applicationBean.displayCommands}" update="commandmenu" />
</p:selectOneRadio>

<h:panelGroup id="commandmenu">
    <p:menu model="#{applicationBean.model}" rendered="#{applicationBean.menudisplay}"/>
</h:panelGroup> 
```

### 也可以看看：

*   [我可以将哪些值传递给 f:ajax 标记的 event 属性？](https://stackoverflow.com/questions/7886453/what-values-can-i-pass-to-the-event-attribute-of-the-fajax-tag/7889098#7889098)
*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/9010771#9010771)

# c# - 手动将项目插入 ListView 控件

> ID：15419536
> 
> 赞同：3
> 
> 时间：2013-03-14T20:29:30.217
> 
> 标签：c#, asp.net, listview

我已经搜索了 S/O 和 google，但我无法弄清楚（大多数搜索结果都是从数据源填充 Listview）。我想根据用户选择手动将项目添加到列表视图控件。

```
ListView listView1 = new ListView();
listView1.Items.Add(lstAuthors[i]); 
```

我收到一个错误：
**“System.Collections.Generic.ICollection.Add(System.Web.UI.WebControls.ListViewDataItem)”的最佳重载方法匹配有一些无效参数**

是什么导致了错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T20:55:34.963

This error simply means that `lstAuthors[i]` is not a [`System.Web.UI.WebControls.ListViewDataItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewdataitem.aspx) (which is the only valid parameter for the `ListView.Items.Add` function.

In order to do this the way you are doing it now, you would need to [initialize a ListViewDataItem](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewdataitem.listviewdataitem.aspx), and use dummy values for the dataIndex parameter (since you don't have an underlying indexed datasource):

```
ListViewDataItem newItem = new ListViewDataItem(dataIndex, displayIndex); 
```

To be honest, this doesn't really seem like the right way to use the `ListView` control. Maybe you could tell us what you're trying to accomplish, and we could help out with another approach.

* * *

Here is a really trimmed down, basic approach to doing what you would like to do. You basically maintain a generic `List<T>` as your datasource, and bind *that* to your `ListView`. This way you can handle all of the details of maintaining the contents of your ListView, but you can still use the built in power of the databinding.

Basic markup (a ListView with one item in it's ItemTemplate, a DropDownList to select items from, and a Button for adding those items to the ListView):

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ListView ID="ListView1" runat="server">
        <ItemTemplate>
            <div>
                <asp:Label ID="AuthorNameLbl" runat="server" Text='<%# Eval("AuthorName") %>'></asp:Label>
            </div>
        </ItemTemplate>
    </asp:ListView>
    <br />
    <asp:DropDownList ID="DropDownList1" runat="server">
        <asp:ListItem>Stephen King</asp:ListItem>
        <asp:ListItem>Mary Shelley</asp:ListItem>
        <asp:ListItem>Dean Koontz</asp:ListItem>
    </asp:DropDownList>
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
</asp:Content> 
```

And code-behind:

```
// Honestly, this string  just helps me avoid typos when 
// referencing the session variable
string authorKey = "authors";

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        // If the session variable is empty, initialize an 
        // empty list as the datasource
        if (Session[authorKey] == null)
        {
            Session[authorKey] = new List<Author>();
        }
        BindList();
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    // Grab the current list from the session and add the 
    // currently selected DropDown item to it.
    List<Author> authors = (List<Author>)Session[authorKey];
    authors.Add(new Author(DropDownList1.SelectedValue));
    BindList();
}

private void BindList()
{
    ListView1.DataSource = (List<Author>)Session[authorKey];
    ListView1.DataBind();
}

// Basic author object, used for databinding
private class Author
{
    public String AuthorName { get; set; }

    public Author(string name)
    {
        AuthorName = name;
    }
} 
```

# android - CheckableLinearLayout 背景确实随着背景选择器而改变

> ID：15419539
> 
> 赞同：0
> 
> 时间：2013-03-14T20:29:43.233
> 
> 标签：android, listview, selector, android-linearlayout

到目前为止，我一直在为这个问题苦苦挣扎至少一天，在互联网上搜索，但没有任何解决方案对我有用，我一直试图了解它为什么会发生，以及如何以正确的方式解决它。

问题：当它被“选中”时，我无法更改行背景颜色/可绘制对象，我知道它何时被选中，因为我的根元素实现了**Checked**接口。

我不知道设置ListView的属性**android:listSelector**和我的行根元素 (CheckableLinearLayout)的**android:background属性之间的区别。**

Android 将使用选择器并应用我的背景的哪些属性？因为直到现在它们都没有工作，所以它总是透明的。

在某些情况下，当我点击列表项时，该项目变为红色，然后又变回透明，而且*onCreateDrawableState*方法也从未真正被调用，我认为它可能是相关的。

我的场景：

**API 10 (2.3.3)**

一个带有 ListView 的 Activity，使用扩展 ArrayAdapter 的自定义适配器。我的 ListView 行资源根元素：

```
 <com.company.views.CheckableLinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:orientation="horizontal">
... 
```

*可检查线性布局*：

```
public class CheckableLinearLayout extends LinearLayout implements Checkable {
private static final int[] STATE_CHECKED = {android.R.attr.state_checked};

        @Override
        protected int[] onCreateDrawableState(int extraSpace)
        {
...
            int[] drawableState = super.onCreateDrawableState(extraSpace + 1);

            if (isChecked())
                mergeDrawableStates(drawableState, STATE_CHECKED);

            return drawableState;
        }
...
    } 
```

我的选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true">
    <shape>
        <solid android:color="@color/solid_blue" />
    </shape>
</item>
    <item>
        <shape>
            <solid android:color="@color/solid_red" />
        </shape>
    </item>
</selector> 
```

我什至尝试使用一个空选择器将背景设置为红色，但我的行仍然是红色的。

任何帮助深表感谢！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:47:45.163

没关系，上面的代码是正确的，我发现在之前的代码的另一个地方的尝试中，我将列表项背景设置为透明。

删除该代码后，我将 listview listSelector 设置为透明选择器（以删除橙色选择背景）。

然后将 CheckableLinearLayout 背景设置为我上面的选择器。

之后，我的 onCreateDrawableState 会被正常调用，并且背景会按照选择器中的指定更改。

而已！

# php - php-fpm 5.4 无法启动，只会收到“失败”消息

> ID：15419540
> 
> 赞同：0
> 
> 时间：2013-03-14T20:29:45.857
> 
> 标签：php

当我尝试启动 php-fpm (v5.4.12) 时，我只收到一条“失败”消息。没有日志，没有更多信息。

我的机器使用 debian 6 (squeeze) 并编译 php 就好了，一切都没有错误，我只是遇到了 php-fpm 的这个问题。

最奇怪的是我无法获得有关错误 D 的任何信息：

显然，我尝试做的第一件事是检查日志，但没有创建日志……更奇怪的是 D:!

这是我的 php-fpm.conf 文件：

```
[global]

pid = /var/run/php-fpm.pid
error_log = /www/logs/php-fpm.log
log_level = notice
emergency_restart_threshold = 0
emergency_restart_interval = 0
process_control_timeout = 0
daemonize = yes

;  pools defined in virtual hosts
include=/home/vhosts/*/conf/php-fpm.include
Then each host has its own config in php-fpm.include as follows.

[main]

listen = 127.0.0.1:9001
listen.backlog = -1
listen.allowed_clients = 127.0.0.1

; Unix user/group of processes
user = <not-showing-my-user-on-purpose>
group = <not-showing-my-user-on-purpose>

; Choose how the process manager will control the number of child processes.
pm = dynamic
pm.max_children = 50
pm.start_servers = 10
pm.min_spare_servers = 5
pm.max_spare_servers = 10
pm.max_requests = 100

; Pass environment variables
env[HOSTNAME] = $HOSTNAME
env[PATH] = /usr/local/bin:/usr/bin:/bin
env[TMP] = /tmp
env[TMPDIR] = /tmp
env[TEMP] = /tmp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T20:06:34.583

尝试使用“-n”选项运行 php-fpm。如果成功，请尝试逐个禁用模块，直到找到损坏的模块。

就我而言（php-fpm 5.5 RC），这是 gd 的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T08:16:15.283

从源代码安装 php 并复制 php-fpm init.d 文件后，我遇到了这个问题，我必须编辑 /etc/init.d/php-fpm 并更改 pid 文件的位置以删除前缀，然后它完美地重新启动。

从此改变：

```
php_fpm_PID=${prefix}/var/run/php-fpm.pid 
```

对此，与我的 php-fpm.conf 文件 pid 位置匹配：

```
php_fpm_PID=/var/run/php-fpm.pid 
```

# dust.js - 根据 json 中提供的数字进行迭代

> ID：15419541
> 
> 赞同：0
> 
> 时间：2013-03-14T20:29:46.267
> 
> 标签：dust.js

我从 json 得到一个数字，代表我需要在模板中创建的 div 的数量。有没有办法使用灰尘根据这个数字迭代和创建模板中的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:44:46.467

那是不可能的。Dust 只迭代数组。因此，您可以传递所需长度的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T18:47:39.573

请查看[http://jsfiddle.net/yXx5L/2/](http://jsfiddle.net/yXx5L/2/)。

```
real_no 
```

是模板将被迭代的次数。

```
based_on_number 
```

是一个辅助方法，用于迭代模板`real_no`多次。

# c# - Base64 无效字符串错误

> ID：15419542
> 
> 赞同：0
> 
> 时间：2013-03-14T20:29:59.427
> 
> 标签：c#, php, encryption, base64

我在 C# 中使用 Base64 字符串时遇到问题

我有一个从 php 调用的 .exe。它获取 2 个参数并返回一个加密密钥。（.exe 是我遇到问题的地方）

在php中我这样做：

```
<?php
$key = "AAAA";
$pass=" AAAA";
echo shell_exec("cryptograph.exe generateKey $key $pass");
?> 
```

它应该可以工作，因为它们是 64 进制字符串，或者至少，我知道长度为 4 的倍数的字符串是有效的 64 进制字符串。

但我得到以下信息（是西班牙语，但我会在下面翻译）：

```
Encrypt en System.Convert.FromBase64String(String s) 
en cryptograph.Cryptography.Encrypt(String plainStr, String completeEncodedKey, Int32 keySize) en cryptograph.Cryptography.generateKey(String key, String pass) 
en cryptograph.cryptograph.Main(String[] args) 
La entrada no es una cadena Base 64 v lida porque contiene un car cter que no es Base 64, m s de dos caracteres de relleno o un car cter de relleno que no es un espacio en blanco 
```

基本上它说它不是有效的 Base64 字符串，因为它包含一个不是 Base 65 的字符，而不是填充符（relleno 是这样翻译的？）字符，它们不是空格。

这是 c# 代码的一部分。

```
 public static void generateKey(String key, String pass)
    {
        String e = Encrypt(pass, key, 256);
        Console.WriteLine("Entro generateKey");
        System.Console.WriteLine(e);
    }

    private static string Encrypt(string plainStr, string completeEncodedKey, int keySize)
    {
        Console.WriteLine("Entro Encrypt");
        RijndaelManaged aesEncryption = new RijndaelManaged();
        aesEncryption.KeySize = keySize;
        aesEncryption.BlockSize = 128;
        aesEncryption.Mode = CipherMode.CBC;
        aesEncryption.Padding = PaddingMode.PKCS7;
        Console.WriteLine(completeEncodedKey);
        aesEncryption.IV = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[0]);
        aesEncryption.Key = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[1]);
        byte[] plainText = ASCIIEncoding.UTF8.GetBytes(plainStr);
        ICryptoTransform crypto = aesEncryption.CreateEncryptor();
        Console.WriteLine("Abajo de crypto");
        // The result of the encryption and decryption            
        byte[] cipherText = crypto.TransformFinalBlock(plainText, 0, plainText.Length);
        return Convert.ToBase64String(cipherText);
    } 
```

问题发生在以下两行中的一些行中：

```
aesEncryption.IV = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[0]);
aesEncryption.Key = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:39:48.857

首先，真的不清楚`completeEncodedKey`真正代表什么。如果它是用于返回*加密*密钥的 cryptograph.exe 的结果，那么您肯定需要*解密*它 - 这不是您在这里实际做的事情。

无论如何，我确定这是问题所在（两次，一次用于 IV，一次用于密钥）：

```
aesEncryption.IV = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString
    (Convert.FromBase64String(completeEncodedKey)).Split(',')[0]); 
```

为了理智，让我们将其拆分一下：

```
byte[] completeBinaryKey = Convert.FromBase64String(completeEncodedKey);
string asciiKey = ASCIIEncoding.UTF8.GetString(completeBinaryKey);
string[] parts = asciiKey.Split(',');
string ivBase64 = parts[0];
aesEncryption.IV = Convert.FromBase64String(ivBase64); 
```

一开始，`ASCIIEncoding.UTF8`是极其混乱的。如果您真的只想要 UTF-8，为什么还要将 ASCII 加入其中？您应该使用`Encoding.UTF8`更清晰。但是，我认为您根本不*想要*这个。

为什么要从 base64 转换*两次*？如果“整体”值是 UTF-8 编码的文本，为什么要转换为 base64？

我强烈怀疑您的文字*实际上*是以下形式：

```
<base64-encoded-iv>,<base64-encoded-key> 
```

在这种情况下，您只需将其拆分*为*base64 转换：

```
string[] parts = completeEncodedKey.Split(',');
aesEncryption.IV = Convert.FromBase64String(parts[0]);
aesEncryption.Key = Convert.FromBase64String(parts[1]); 
```

# javascript - 如果浏览器未连接到 Internet，则在本地 html 文档中隐藏内容

> ID：15419546
> 
> 赞同：0
> 
> 时间：2013-03-14T20:30:14.917
> 
> 标签：javascript, html, css

我有一个 HTML 文件，它显示简单的静态内容，但我想`iframes`在这个文档中显示一些 youtube 视频，我知道如何做到这一点。如果浏览器未连接到互联网，我想要的是阻止这些加载（并仅显示静态内容）。有没有办法做到这一点。我可以使用 HTML、CSS、Javascript 或 jQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:37:44.070

navigator.onLine 对于活动网络连接返回 true，对于离线返回 false！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:33:31.983

查看[在线/离线事件](https://developer.mozilla.org/en-US/docs/Online_and_offline_events)和[`navigator.onLine`属性](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.onLine)。如果这些不可用，您只能尝试加载内容并侦听错误（只有在正确加载后才能查看它们）。

# visual-studio-2010 - 在重构期间让 VS2010 / Resharper 使用“git move”

> ID：15419554
> 
> 赞同：4
> 
> 时间：2013-03-14T20:30:59.083
> 
> 标签：visual-studio-2010, git, resharper, git-bash

Visual Studio 2010 / Resharper 是否有扩展，这将导致在重构期间移动或重命名文件是`git moved`适当的？现在，每次我移动文件时，我都必须手动`git rm`/ `git add`，否则如果我`git move`直接移动，我必须在 Visual Studio 中弄乱，让它识别移动的文件。

我正在使用 Visual Studio 2010、Resharper 7.1.2、Git Bash（git 版本 1.8.1.2）和[Git Source Control Provider](http://gitscc.codeplex.com/)。

* * *

**更新：**我知道一旦文件被 rm'd 和添加，git 会自动检测移动。但我不想手动 rm 每个已移动的文件，并且由于其他工具（例如 IntelliJ IDEA）似乎能够为我做到这一点，所以 VS 也应该能够做到这一点似乎是合理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:07:00.197

对我来说（使用 VS2012、msysgit 和[Git 源代码控制提供程序](http://gitscc.codeplex.com/)）它的工作方式如下：

1.  我使用 ReSharper CR CR 重命名一个类。
2.  ReSharper 自动重命名文件
3.  在“Pending Changes”视图中，我得到一个旧文件名的“Delete”和一个带有新文件名的“New”。
4.  我保存所有文件，之后项目文件显示为已修改。
5.  在“Pending Changes”中，我检查了全选复选框，写了一条评论并点击了提交按钮。
6.  完毕。

当我在 VS 中的文件夹之间移动文件时，这也同样有效。

我不太明白你必须在哪里做手册`git rm`或`git mv`

# etl - TeraData 变更跟踪

> ID：15419558
> 
> 赞同：0
> 
> 时间：2013-03-14T20:31:07.290
> 
> 标签：etl, teradata, change-tracking

我们需要一种方法来了解自上次从该数据库导入数据以来 TeraData 数据库中哪些行发生了变化。TeraData 数据库中的表或表中的数据没有被证明是我们可以用来确定这一点的可靠变化信号。在 SQL Server 中，[更改跟踪](http://msdn.microsoft.com/en-us/library/bb933875.aspx)功能似乎完全符合我们的需要，但源系统是 TeraData。有谁知道 TeraData 中是否有一个功能，或者与 TeraData 一起使用的第三方工具，可以有效地将 SQL Server 更改跟踪提供的功能添加到 TeraData 数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-25T21:54:09.583

Teradata 是一个 OLAP 数据库。您在 Sql Server 中引用的功能也用于 OLTP 类型处理。Teradata 假设您将执行大型集合操作，而不是小型单行级操作。Teradata 的优化器和功能集的一切都基于为那些大型集合操作生成性能。

我们设法在 Teradata 数据库中跟踪更改的唯一方法是：

1.  将更新时间戳属性添加到由更改数据的代码维护的表中。（用户界面或脚本或数据库中的触发器）
2.  或者在您希望跟踪的每个表上创建一个触发器。此触发器可以： A. 仅将记录键和更新时间戳附加到另一个表 B. 或将整个属性集和更新时间戳附加到另一个表
3.  或在每个时间窗口捕获整个表，并比较数据。我们只对非常小的数据集这样做。（域数据）

我们已经为包括 Oracle 和 Teradata 在内的各种源数据库做到了这一点。触发器相当简单，并且会为源表上的每个插入、更新和删除在“数据捕获”表中附加一个新行。

我们最终从一个模板为我们需要捕获更改的每个表生成触发器，以及数据捕获表的 DDL。（我们也在附加的副本）。数据捕获表具有与源表完全相同的属性以及至少 2 个元数据属性：更改类型和时间戳。

此外，我们最终在元数据属性中添加了一个“复制时间戳”，我们可以在获取数据时填写该属性。这是必需的，因为数据可以附加到时间序列之外。换句话说，一个短事务可能会在一个长期运行的事务之前完成对数据捕获表的追加，这个事务很早就开始了，永远不会结束。

这一切可能看起来比仅仅引用 SQL Server 的“更改跟踪”要复杂一些，但它非常简单，不会对数据库的整体性能产生太大影响。由于我们添加了所有触发器，我们的测量结果产生了 3% 的影响。

# c++ - 提高 Boost 属性树性能

> ID：15419569
> 
> 赞同：2
> 
> 时间：2013-03-14T20:31:40.707
> 
> 标签：c++, optimization, boost, boost-propertytree

[我在 boost 属性树（可在github](https://github.com/mariolpantunes/JSONObject)上获得）之上编写了一个简单的 JSON 包装器。

该库的重点是模仿 org.json（java JSON 库）的接口。但是，插入一个包含 1000000 (1M) 个元素的字符串数组需要 2 秒。

为了比较 java 中的相同代码，使用 org.json，只需要 0.071 秒。我看到的一件有趣的事情是 java 代码使用了我所有的内核，而我的 c++ 代码只使用了一个内核。

有没有办法优化这个？boost有多线程属性树吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:51:13.643

由于我找不到任何方法来提高 Boost 属性树的性能，我开始开发 Cpp 本机库。它是相同的界面，但速度更快，并且更符合 JSON 格式。该代码可[在此处](https://github.com/ATNoG/JSONObject)公开获得。

# c# - Linq to SQL Exception When Record is Updated from Two Different Applications

> ID：15419575
> 
> 赞同：0
> 
> 时间：2013-03-14T20:32:02.087
> 
> 标签：c#, database, linq-to-sql, orm

I am working with two C# Winform applications that use Linq to SQL for database access. All of my database access and queries exist in a DLL project that is referenced and used by both of these applications. The first application synchronizes data between an accounting application and a SQL server database. The second application reads, writes, and updates records in the same database. Currently, the DataContext is not disposed in either application until the program exits. Therefore, application 1 (synchronizing external app with SQL DB) and application 2 (create, read, update SQL DB) each have a reference to the database library which contains the context and DAOs. The first time they need DB access, an instance of the context is instantiated inside of a Singleton. The exception that I have encountered and steps to re-produce it are below.

1) Start up application 1 2) Start up application 2 3) Run application 1 which basically updates records in the SQL database based on some external accounting system. 4) Attempt to update one of the records modified by application 1

The mapping for the column in exception below is:

```
<Column Name="TimeStamp" Type="System.Data.Linq.Binary" DbType="rowversion NOT NULL" CanBeNull="false" IsVersion="true" /> 
```

Also, Update Check is set to never. I realize that it may be a better design to dispose of the dc more frequently but, that is not an immediate option since customers are using this application. Is there a way to solve this problem?

```
03/14/2013 15:18:08 Error BEN-LAPTOP Scribble.Database.Utilities.Domain.Persistence.Repository`1.SaveAll System.Collections.ListDictionaryInternal
03/14/2013 15:18:08 Error BEN-LAPTOP Scribble.Database.Utilities.Domain.Persistence.Repository`1.SaveAll Value of member 'TimeStamp' of an object of type 'Boat' changed.
A member that is computed or generated by the database cannot be changed.
03/14/2013 15:18:08 Error BEN-LAPTOP Scribble.Database.Utilities.Domain.Persistence.Repository`1.SaveAll    at System.Data.Linq.ChangeProcessor.CheckForInvalidChanges(TrackedObject tracked)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at Scribble.Database.Utilities.DomainClassesDataContext.Submit(RefreshMode refreshMode) in C:\Aaron\Dev\ScribbleUtilityProjects\Scribble.Database.Utilities\DomainClasses.cs:line 42
   at Scribble.Database.Utilities.DomainClassesDataContext.SubmitOverwriteDatabase() in C:\Aaron\Dev\ScribbleUtilityProjects\Scribble.Database.Utilities\DomainClasses.cs:line 19
   at Scribble.Database.Utilities.Domain.Persistence.Repository`1.SaveAll() in C:\Aaron\Dev\ScribbleUtilityProjects\Scribble.Database.Utilities\Domain\Persistence\Repository.cs:line 79
03/14/2013 15:18:08 Error BEN-LAPTOP MarineService.GlobalCollections.showAndLogErrors Value of member 'TimeStamp' of an object of type 'Boat' changed.
A member that is computed or generated by the database cannot be changed.
03/14/2013 15:18:08 Error BEN-LAPTOP MarineService.GlobalCollections.showAndLogErrors    at Scribble.Database.Utilities.Domain.Persistence.Repository`1.SaveAll() in C:\Aaron\Dev\ScribbleUtilityProjects\Scribble.Database.Utilities\Domain\Persistence\Repository.cs:line 101
   at Scribble.Database.Utilities.Domain.Persistence.Repository`1.UpdateEntity(T entity, Boolean attach) in C:\Aaron\Dev\ScribbleUtilityProjects\Scribble.Database.Utilities\Domain\Persistence\Repository.cs:line 50
   at MarineService.Tests.AddWorkOrderForm.SaveWorkOrder() in C:\Aaron\Dev\ScribbleApplicationProjects\PureService\AddWorkOrderForm.cs:line 1638 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:35:30.253

你不希望你的上下文是一个单例。从[MSDN](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)上的 DataContext 页面：

> 通常，DataContext 实例旨在持续一个“工作单元”，但是您的应用程序定义了该术语。DataContext 是轻量级的，创建起来并不昂贵。典型的 LINQ to SQL 应用程序在方法范围内创建 DataContext 实例，或者作为表示一组相关数据库操作的逻辑集的短期类的成员。

# php - PHP pulling data from database and converting date into iso8610 JavaScript date

> ID：15419576
> 
> 赞同：0
> 
> 时间：2013-03-14T20:32:04.790
> 
> 标签：php, javascript, sql, iso8601

I have php code that pulls information needed from the database. The php date code is formatted in "format("Y-m-d H:i:s")". I am trying to get these dates from the database and add them to a calendar using JavaScript. I loop there the events that I want to add to the calendar. I have to different ways I found solutions for but neither one works.

```
<script type='text/javascript'>
    <?php for($x = 0; $x < count($events); $x++) { ?>
          var dateToConvert = new Date('<?php echo date(DATE_ISO8601, strtotime($events[$x]["startDate"])); ?>');
          var startDate = dateToConvert.toISOString();
          var endDate = '<?php echo date(DATE_ISO8601, strtotime($events[$x]["endDate"])); ?>';
          var events = [
             {
               title: '<?php echo $events[$x]["name"]; ?>',
               start: new Date(startDate),
               end: endDate
             }
          ];
    <?php } ?>
</script> 
```

I am assuming that I am missing something minor but I can't figure it out. I used the Chrome debugger and this is what I have as input. (2013-03-18T01:00:00-0600) It doesn't seem to have the Z at the end like it should.

The value in the database is (2013-03-18 01:00:00).

What am I missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:07:33.000

您的 ISO 时间格式正确。日期时间末尾的“Z”表示“祖鲁时间”，即 UCT 时区。

因此，如果您没有指定不同的时区，您只会指定“Z”。

在您的情况下，您引用的日期确实包含时区 ( `-6000`)，所以我不希望看到“Z”。

有关更多信息，请参见维基百科页面：[http ://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators](http://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators)

对于在 PHP 和 Javascript 之间移动日期/时间值，我想说最简单的方法就是使用 unix 时间戳。这是一个简单的整数值，因此无需考虑格式，两种语言都可以完美理解它。唯一需要注意的是，在 Javascript 中它的单位是微秒，而 PHP 是秒，因此您需要乘以或除以 1000。但这很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:34:18.377

您不应以任何字符串格式传递日期。相反，将它们作为数字传递。

```
var dateToConvert = new Date();
dateToConvert.setTime(<?php echo strtotime($events[$x]['startDate']); ?>000); 
```

这将更可靠地工作。请注意，存在三个零是因为 JS 以毫秒为单位处理时间，而 PHP 以秒为单位处理时间。

# java - Exit eclipse and keep Java application running?

> ID：15419579
> 
> 赞同：6
> 
> 时间：2013-03-14T20:32:16.167
> 
> 标签：java, eclipse, exit, kill

How can I exit Eclipse without killing applications launched from within eclipse? I understand that applications launched in debug mode have a network link with Eclipse, but there should be no problem with applications launched in release mode. However, no matter how I end eclipse (even killing the process) kills the launched applications a couple of seconds later, regardless of important unsaved data in those programs.

Motivation? Can be any of: eclipse internal error which requests a restart, needing to free more memory (eclipse is 330MiB), accidental kill by process explorer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:58:58.997

Eclipse 使用它自己的[模拟器](https://en.wikipedia.org/wiki/Emulator) [沙箱](https://en.wikipedia.org/wiki/Sandbox_%28computer_security%29)来运行编译的源代码。除了将您的项目导出到可执行文件`.jar`并在 Eclipse 之外运行它之外，我不知道关闭 Eclipse 并让您的程序运行，因为当您关闭 Eclipse 时您正在关闭 Eclipse 的模拟器。

* * *

根据您的评论，我认为您不知道模拟器是如何工作的。看看[VirtualBox](https://www.virtualbox.org/)等软件。当您在其中运行操作系统时，您仍在使用运行 VirtualBox 的操作系统的系统资源。

这就像 Eclipse。您需要在机器上安装 Java 才能使 Eclipse 正常工作。Eclipse 仍然在您的主机上使用 Java，但为了系统的安全和保障，它将 Java 放在自己的沙箱中，并模拟您的程序。如果您不相信我，请查看 Eclipse 如何运行它的程序。

此外，Eclipse 的某些部分是用 Java 编写的，因此您还将在 Process Explorer 中看到一些流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:02:49.797

我不认为这将是任何方式来做到这一点，但实际上，你列出的动机似乎都没有意义。

*   需要重新启动的 Eclipse 错误并不常见。
*   在开发时关闭 Eclipse 以释放内存？您也可以关闭计算机 XD。
*   进程不会被意外杀死。不要杀死你不知道的东西。
*   最后，但也是最重要的一点，从 Eclipse 中启动的应用程序应该在开发环境中运行，因此不应该有“重要的未保存数据”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:30:25.457

这体现了依赖工具（例如 IDE）来编译和运行 Java 程序的危险。太多人（包括我自己）从小就以错误的方式学习 Java：编写代码，按下*绿色播放按钮*，然后在控制台选项卡中观看魔术发生。相反，Java 程序员应该首先学习如何使用命令进行编程，以了解 Java 的核心基础知识。这将帮助初学者理解许多退伍军人忘记的概念；即什么是类路径。此外，通过这种方式，您将知道如何在任何环境中构建和运行代码，以防遇到 IDE 问题。

总体而言，IDE 绝对有帮助，我自己也使用了一个（Eclipse），但始终需要一个命令行构建/运行过程作为备用选项。

# python - 使用管理部分设置 Python Flask 应用程序

> ID：15419580
> 
> 赞同：0
> 
> 时间：2013-03-14T20:32:19.040
> 
> 标签：python, flask

在此之前，我已经构建了一些小型 Flask 应用程序，并且我真的很喜欢这个过程。现在我正在向 Flask 应用程序添加一个管理部分，我正在寻找一些指导。

当前目录结构如下所示：

```
├── Makefile
├── Procfile
├── app.py
├── requirements.txt
├── static
│   ├── css
│   ├── fonts
│   ├── img
│   └── js
└── templates
    ├── about.html
    ├── base.html
    ├── contact.html
    └── index.html 
```

我的 app.py 文件如下所示：

```
import os
from flask import Flask, render_template

app = Flask(__name__)
app.debug = True

# MAIN APPLICATION
@app.route('/')
@app.route('/work/<gallery>/')
def index(gallery='home'):
    return render_template('index.html', gallery=gallery)

@app.route('/views/<view>/')
def view(view):
    return render_template(view + '.html')

@app.route('/data/<gallery>/<size>/')
def data(gallery='home', size='md'):
    data = '[\
        {"image": "/static/img/photos/md/img_1.jpg","color": "white"},\
        {"image": "/static/img/photos/md/img_2.jpg","color": "white"},\
        {"image": "/static/img/photos/md/img_3.jpg","color": "black"}\
        ]'
    return data

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

我做了一些研究，发现[Blueprints 框架](http://flask.pocoo.org/docs/blueprints/)和[Flask-Admin](https://github.com/mrjoes/flask-admin)似乎可以一起工作。有没有人有可能更有效或更容易设置的替代建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:01:18.973

蓝图允许您将功能分组到独立的模块中。

如果您觉得您的服务非常小，则无需使用蓝图 - 您可以向 Flask 应用程序添加路由，就像您在示例中所做的那样。

但是，如果应用程序变得更大，最好使用蓝图将其拆分为更小的部分。在您的示例中，“工作”是第一个可能的蓝图，“视图”是另一个，等等。

Flask-Admin 允许您构建管理界面 a-la Django admin。你如何构建应用程序的其余部分并不重要——你添加 Flask-Admin，它就可以工作。

# azure - Azure DNS/其他 CNAME 记录

> ID：15419581
> 
> 赞同：3
> 
> 时间：2013-03-14T20:32:26.663
> 
> 标签：azure

我已经在 Azure 中使用我的域 mywebsite.azurewebsites.net 设置了我的网站，然后使用我的真实域 www.mywebsite.com 我已经指出 mywebsite.azurewebsites.net 在设置所有 awverify 域等后工作正常.

我现在需要做的是能够设置域，例如：

```
hello.mywesbite.com
world.mywesbite.com
test.mywesbite.com
one.mywesbite.com 
```

并让他们指向同一个地方，但我遇到了问题。如果我转到管理域下的 azure 添加“one.azurewebsites.net”，我会收到错误消息“默认 DNS 区域中的主机名太多 (2)。限制为 1。” 所以我尝试将 one.mywebsite.com 添加到列表中，但我也遇到了另一个错误。

现在是否可以添加无数指向同一个地方的 mywebsite.com 子域？

谢谢！

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:40:27.637

您的网站似乎设置为“免费”，您无法免费进行自定义域，这就是您遇到此错误的原因。您可以在网站 > Scale 页面查看。

如果您将网站更改为共享或保留（使用网站 > 缩放）模式，则可以添加更多自定义域。共享和保留的预览限制为 100。当它达到 GA 时，数字可能会有所改善。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:10:33.143

我设法让它部分工作，我已经将它配置为共享。

我现在已经使用我的 DNS 提供商设置了通配符 CNAME 记录，因此 *.mywebsite.com 指向 mywebsite.azurewebsites.net - 只有当我在 azure 范围内配置相同的子域时才有效。因此，我现在将我的通配符 cname 指向 wildcardsubdomain.azurewebsites.net

# mysql - MySQL query to find the department with the lowest average age of employees

> ID：15419582
> 
> 赞同：0
> 
> 时间：2013-03-14T20:32:37.703
> 
> 标签：mysql, sql, database

I'm given this schema:

```
Emp(eid: integer,ename: string,age: integer,salary: real)
Works(eid:integer,did: integer,pct_time: integer)
Dept(did:integer,budget: real,managerid:integer) 
```

I've written this query which lists the department codes along with the average ages of employees just fine:

```
SELECT d.did AS Department, AVG(e.age) AS Average_Age
FROM Emp e, Works w, Dept d
WHERE e.eid=w.eid AND w.did=d.did
GROUP BY d.did 
```

However, when I try to do something like this:

```
SELECT Department, MIN(Average_Age)
FROM 
(
SELECT d.did AS Department, AVG(e.age) AS Average_Age
WHERE e.eid=w.eid AND w.did=d.did
GROUP BY d.did
) MyTable 
```

It returns the wrong Department ID. It just returns 0 for that column but it returns the minimum age of the previous table. However, the Department ID with the lowest age is 4\. What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T13:02:36.927

请你试试这个：

```
SELECT department, MIN(avg_age)
FROM
(
    SELECT dept.did AS department, AVG(emp.age) AS avg_age FROM dept
    LEFT JOIN works ON works.did = dept.did
    LEFT JOIN emp ON emp.eid = works.eid
    GROUP BY dept.did
) AS test
ORDER BY 1 LIMIT 1; 
```

# php - 按日期对不同 MySQL 表中的内容进行排序

> ID：15419583
> 
> 赞同：1
> 
> 时间：2013-03-14T20:32:38.917
> 
> 标签：php, mysql, join

我有 3 个不同的表：

*   消息

    *   news_id
    *   新闻内容
    *   新闻发布日期
*   歌曲

    *   歌曲编号
    *   歌曲链接
    *   歌曲发布日期
*   面试

    *   采访ID
    *   采访艺术家
    *   采访内容
    *   采访发布日期

我正在尝试在我的网站上创建一个时间线，以在唯一列表中显示我的 3 个表格中按发布日期排序的所有内容。有没有办法在 MySQL 中做到这一点？

也许创建一个“通用”表，其中包含我的其他 3 个表中按日期排序的所有 id？然后我应该将所有元素与 PHP 链接。是不是太耗电了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:40:01.680

试试这个，看看它是否能满足您的需求：

```
SELECT
    `news_id`      AS `id`,
    `news_content` AS `content`,
    `news_pubdate` AS `pubdate`,
    ""             AS `person`,
    "news"         AS `type`
FROM `news`

UNION
SELECT
    `song_id`      AS `id`,
    `song_link`    AS `content`,
    `song_pubdate` AS `pubdate`,
    ""             AS `person`,
    "song"         AS `type`
FROM `song`

UNION
SELECT
    `interview_id`      AS `id`,
    `interview_content` AS `content`,
    `interview_pubdate` AS `pubdate`,
    `interview_artist`  AS `person`,
    "interview"         AS `type`
FROM `interview`

ORDER BY `pubdate`; 
```

# android - LocalNotification Android

> ID：15419584
> 
> 赞同：0
> 
> 时间：2013-03-14T20:32:39.113
> 
> 标签：android, phonegap-plugins, localnotification

I'm trying to use the LocalNotification plugin for my Phonegap app. [https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)

After following all steps.. I got a lot of erros in Localnotification.java .. the rest is working fine.

What's the problem? It already starts with the first sentence:

The first two errors: import com.phonegap.api.Plugin; import com.phonegap.api.PluginResult;

Third error: public class LocalNotification extends Plugin {

I'm just a beginner.. but perhaps someone can help...? Did I missed a step, or am I missing some required files?

Using Eclipse, the newest cordova/phonegap.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:10:12.473

在这里看到同样的问题：p

似乎在这里使用相同的设置，即带有最新的cordova 和phonegap 的Eclipse。刷新插件后，Eclipse 显示 30 个错误、1 个警告、0 个其他错误。AlarmReceiver.java 中有 1 个警告和 1 个错误，其余错误在 LocalNotification.java 中。[按照https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification)的说明进行操作。

“问题”是：

```
Description Resource Path Location Type
The import com.phonegap.api cannot be resolved LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 12 Java Problem
The import com.phonegap.api cannot be resolved LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 13 Java Problem
ctx cannot be resolved or is not a field LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 35 Java Problem
The method execute(String, JSONArray, String) of type LocalNotification must override or implement a supertype method LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 34 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 34 Java Problem
Plugin cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 23 Java Problem
The method cancelAllNotifications() from the type LocalNotification refers to the missing type PluginResult LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 60 Java Problem
The method cancelNotification(String) from the type LocalNotification refers to the missing type PluginResult LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 57 Java Problem
The method add(boolean, String, String, String, String, Calendar) from the type LocalNotification refers to the missing type PluginResult LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 54 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 38 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 95 Java Problem
PluginResult cannot be resolved to a variable LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 93 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 93 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 83 Java Problem
PluginResult cannot be resolved to a variable LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 111 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 111 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 106 Java Problem
PluginResult cannot be resolved to a variable LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 95 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 132 Java Problem
PluginResult cannot be resolved to a variable LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 132 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 134 Java Problem
PluginResult cannot be resolved to a variable LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 134 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 113 Java Problem
PluginResult cannot be resolved to a variable LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 113 Java Problem
PluginResult cannot be resolved to a type LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 120 Java Problem
ctx cannot be resolved or is not a field LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 128 Java Problem
ctx cannot be resolved or is not a field LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 151 Java Problem
ctx cannot be resolved or is not a field LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 167 Java Problem
ctx cannot be resolved or is not a field LocalNotification.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 180 Java Problem
The method setLatestEventInfo(Context, CharSequence, CharSequence, PendingIntent) from the type Notification is deprecated AlarmReceiver.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 77 Java Problem
R cannot be resolved to a variable AlarmReceiver.java / application_title_mobile/src/com/phonegap/plugin/localnotification line 72 Java Problem 
```

编辑：刚刚在 github 上发布了一个问题：[https ://github.com/phonegap/phonegap-plugins/issues/1076](https://github.com/phonegap/phonegap-plugins/issues/1076)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T17:52:49.787

我更新了`localNotification`插件以支持最新的phonegap，也许你想试试[https://github.com/zhuochun/local-notification](https://github.com/zhuochun/local-notification)

# vb.net - 表单构造函数中的行为

> ID：15419585
> 
> 赞同：1
> 
> 时间：2013-03-14T20:32:41.000
> 
> 标签：vb.net, forms, picturebox

所以，我试图设置`.Visible`a `Button`on true 但在构造函数中，但它不会让我改变那个变量。这是一个`printscreen`澄清 ![在此处输入图像描述](../Images/5b70382d0a0990cd992358ec6603a2dd.png)

奇怪的是，当我将那段代码移到表单加载事件中时，我没有这个问题。所以我的问题是这怎么可能？

编辑：在设计器中可见也是如此 编辑 2：将 PictureBox 更改为按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:20:44.857

这是完全正常的。Visible 属性有点特殊，当您阅读它时，它不会告诉您分配了什么值，它会告诉您控件是否对用户实际可见。在构造函数内部永远不会出现这种情况，在窗体的 Shown 事件运行之前，控件不会变得可见。

你没有真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:26:46.943

在 ASP.NET 页面生命周期中

> 初始化：在页面初始化期间，页面上的控件可用，并且每个控件的 UniqueID 属性都被设置。如果适用，母版页和主题也适用于该页面。如果当前请求是回发，则回发数据尚未加载，控件属性值尚未恢复为视图状态的值。
> 
> 加载 在加载期间，如果当前请求是回发，则加载控件属性，其中包含从视图状态和控件状态恢复的信息。

如您所见，控件属性是在加载期间设置的，这就是您的代码使用加载事件而不是构造函数的原因。

# r - 安装模块时“对内存位置的访问无效”

> ID：15419586
> 
> 赞同：2
> 
> 时间：2013-03-14T20:32:42.730
> 
> 标签：r, perl, mingw, perl-module, cpan

Perl 的新手。我已经设法通过命令提示符在我的 Windows 7 PC 上从 CPAN 安装了一些模块，但是在安装 Math::Random 时我遇到了障碍。不知道这里发生了什么。我已经尝试了几个小时的谷歌搜索。这是我得到的...

```
 cpan> install Math::Random
    Database was generated on Thu, 14 Mar 2013 15:15:50 GMT
    Running install for module 'Math::Random'
    Running make for G/GR/GROMMEL/Math-Random-0.71.tar.gz
    Fetching with LWP:
    http://cpan.strawberryperl.com/authors/id/G/GR/GROMMEL/Math-Random-0.71.tar.gz
    Checksum for C:\strawberry\cpan\sources\authors\id\G\GR\GROMMEL\Math-Random-0.71
    .tar.gz ok
    Scanning cache C:\strawberry\cpan\build for sizes
    ............................................................................DONE

    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.
    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.
    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.
    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.
    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.
    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.
    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.
    Invalid header block at offset unknown at C:\strawberry\perl\lib/CPAN/Tarzip.pm
    line 365.

      CPAN.pm: Building G/GR/GROMMEL/Math-Random-0.71.tar.gz

    Checking if your kit is complete...
    Looks good
    Writing Makefile for Math::Random
    Writing MYMETA.yml and MYMETA.json
    cp test2.pl blib\lib\Math\test2.pl
    cp Random.pm blib\lib\Math\Random.pm
    AutoSplitting blib\lib\Math\Random.pm (blib\lib\auto\Math\Random)
    cp test1.pl blib\lib\Math\test1.pl
    cp example.pl blib\lib\Math\example.pl
    C:\strawberry\perl\bin\perl.exe C:\strawberry\perl\lib\ExtUtils\xsubpp  -typemap
     C:\strawberry\perl\lib\ExtUtils\typemap  Random.xs > Random.xsc && C:\strawberr
    y\perl\bin\perl.exe -MExtUtils::Command -e mv -- Random.xsc Random.c
    gcc -c          -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -
    DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\"0.
    71\"    -DXS_VERSION=\"0.71\"  "-IC:\strawberry\perl\lib\CORE"   Random.c
    gcc -c          -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -
    DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\"0.
    71\"    -DXS_VERSION=\"0.71\"  "-IC:\strawberry\perl\lib\CORE"   com.c
    gcc -c          -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -
    DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\"0.
    71\"    -DXS_VERSION=\"0.71\"  "-IC:\strawberry\perl\lib\CORE"   helper.c
    gcc -c          -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -
    DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\"0.
    71\"    -DXS_VERSION=\"0.71\"  "-IC:\strawberry\perl\lib\CORE"   linpack.c
    gcc -c          -s -O2 -DWIN32 -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -
    DPERL_IMPLICIT_SYS -fno-strict-aliasing -mms-bitfields -s -O2     -DVERSION=\"0.
    71\"    -DXS_VERSION=\"0.71\"  "-IC:\strawberry\perl\lib\CORE"   randlib.c
    Running Mkbootstrap for Math::Random ()
    C:\strawberry\perl\bin\perl.exe -MExtUtils::Command -e chmod -- 644 Random.bs
    C:\strawberry\perl\bin\perl.exe -MExtUtils::Mksymlists \
         -e "Mksymlists('NAME'=>\"Math::Random\", 'DLBASE' => 'Random', 'DL_FUNCS' =
    > {  }, 'FUNCLIST' => [], 'IMPORTS' => {  }, 'DL_VARS' => []);"
    dlltool --def Random.def --output-exp dll.exp
    g++ -o blib\arch\auto\Math\Random\Random.dll -Wl,--base-file -Wl,dll.base -mdll
    -s -L"C:\strawberry\perl\lib\CORE" -L"C:\strawberry\c\lib" Random.o     com.o
    helper.o        linpack.o       randlib.o   C:\strawberry\perl\lib\CORE\libperl5
    16.a C:\strawberry\c\i686-w64-mingw32\lib\libm.a C:\strawberry\c\i686-w64-mingw3
    2\lib\libmoldname.a C:\strawberry\c\i686-w64-mingw32\lib\libkernel32.a C:\strawb
    erry\c\i686-w64-mingw32\lib\libuser32.a C:\strawberry\c\i686-w64-mingw32\lib\lib
    gdi32.a C:\strawberry\c\i686-w64-mingw32\lib\libwinspool.a C:\strawberry\c\i686-
    w64-mingw32\lib\libcomdlg32.a C:\strawberry\c\i686-w64-mingw32\lib\libadvapi32.a
     C:\strawberry\c\i686-w64-mingw32\lib\libshell32.a C:\strawberry\c\i686-w64-ming
    w32\lib\libole32.a C:\strawberry\c\i686-w64-mingw32\lib\liboleaut32.a C:\strawbe
    rry\c\i686-w64-mingw32\lib\libnetapi32.a C:\strawberry\c\i686-w64-mingw32\lib\li
    buuid.a C:\strawberry\c\i686-w64-mingw32\lib\libws2_32.a C:\strawberry\c\i686-w6
    4-mingw32\lib\libmpr.a C:\strawberry\c\i686-w64-mingw32\lib\libwinmm.a C:\strawb
    erry\c\i686-w64-mingw32\lib\libversion.a C:\strawberry\c\i686-w64-mingw32\lib\li
    bodbc32.a C:\strawberry\c\i686-w64-mingw32\lib\libodbccp32.a C:\strawberry\c\i68
    6-w64-mingw32\lib\libcomctl32.a dll.exp
    dlltool --def Random.def --base-file dll.base --output-exp dll.exp
    g++ -o blib\arch\auto\Math\Random\Random.dll -mdll -s -L"C:\strawberry\perl\lib\
    CORE" -L"C:\strawberry\c\lib" Random.o  com.o   helper.o        linpack.o
    randlib.o   C:\strawberry\perl\lib\CORE\libperl516.a C:\strawberry\c\i686-w64-mi
    ngw32\lib\libm.a C:\strawberry\c\i686-w64-mingw32\lib\libmoldname.a C:\strawberr
    y\c\i686-w64-mingw32\lib\libkernel32.a C:\strawberry\c\i686-w64-mingw32\lib\libu
    ser32.a C:\strawberry\c\i686-w64-mingw32\lib\libgdi32.a C:\strawberry\c\i686-w64
    -mingw32\lib\libwinspool.a C:\strawberry\c\i686-w64-mingw32\lib\libcomdlg32.a C:
    \strawberry\c\i686-w64-mingw32\lib\libadvapi32.a C:\strawberry\c\i686-w64-mingw3
    2\lib\libshell32.a C:\strawberry\c\i686-w64-mingw32\lib\libole32.a C:\strawberry
    \c\i686-w64-mingw32\lib\liboleaut32.a C:\strawberry\c\i686-w64-mingw32\lib\libne
    tapi32.a C:\strawberry\c\i686-w64-mingw32\lib\libuuid.a C:\strawberry\c\i686-w64
    -mingw32\lib\libws2_32.a C:\strawberry\c\i686-w64-mingw32\lib\libmpr.a C:\strawb
    erry\c\i686-w64-mingw32\lib\libwinmm.a C:\strawberry\c\i686-w64-mingw32\lib\libv
    ersion.a C:\strawberry\c\i686-w64-mingw32\lib\libodbc32.a C:\strawberry\c\i686-w
    64-mingw32\lib\libodbccp32.a C:\strawberry\c\i686-w64-mingw32\lib\libcomctl32.a
    dll.exp
    C:\strawberry\perl\bin\perl.exe -MExtUtils::Command -e chmod -- 755 blib\arch\au
    to\Math\Random\Random.dll
    C:\strawberry\perl\bin\perl.exe -MExtUtils::Command -e cp -- Random.bs blib\arch
    \auto\Math\Random\Random.bs
    C:\strawberry\perl\bin\perl.exe -MExtUtils::Command -e chmod -- 644 blib\arch\au
    to\Math\Random\Random.bs
      GROMMEL/Math-Random-0.71.tar.gz
      C:\strawberry\c\bin\dmake.exe -- OK
    Running make test
    C:\strawberry\perl\bin\perl.exe "-Iblib\lib" "-Iblib\arch" test.pl
    1..16
    Can't load 'blib\arch/auto/Math/Random/Random.dll' for module Math::Random: load
    _file:Invalid access to memory location at C:/strawberry/perl/lib/DynaLoader.pm
    line 190.
     at test.pl line 9.
    Compilation failed in require at test.pl line 9.
    BEGIN failed--compilation aborted at test.pl line 9.
    dmake.exe:  Error code 130, while making 'test_dynamic'
      GROMMEL/Math-Random-0.71.tar.gz
      C:\strawberry\c\bin\dmake.exe test -- NOT OK
    //hint// to see the cpan-testers results for installing this module, try:
      reports GROMMEL/Math-Random-0.71.tar.gz
    Running make install
      make test had returned bad status, won't install without force
    Stopping: 'install' failed for 'Math::Random'.
    Failed during this command:
     GROMMEL/Math-Random-0.71.tar.gz              : make_test NO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:49:00.267

我现在已经解决了这个问题。我删除了 Rtools（帮助开发 R 包的软件）并将 Path 变量编辑为松散..

```
C:\Rtools\bin;
C:\Rtools\perl\bin;
C:\Rtools\gcc-4.6.3\bin;
C:\Rtools\MinGW\bin; 
```

然后我卸载并重新安装了草莓 perl（我之前尝试过这最后一步，但没有运气）。[在阅读@summea链接和@ikegami编辑添加mingw](/questions/tagged/mingw "显示标记为“mingw”的问题")标签后，我怀疑路径中的MinGW可能是问题的原因

# javascript - 将数据传递给 KnockoutJS 中的可观察对象的问题

> ID：15419588
> 
> 赞同：1
> 
> 时间：2013-03-14T20:32:43.540
> 
> 标签：javascript, knockout.js

我正在我的淘汰项目中设置模板系统，目标是能够随时调用函数 loadTemplate("templateName") 将新模板加载到视图中。

我有一个可以调用的版本，`loadHomeTemplate()`或者`loadSearchTemplate()`它会起作用。

[JS 小提琴链接](http://jsfiddle.net/sDQW3/1/)。

但现在我正在尝试修改它，以便我可以调用`loadTemplate("Home")`or `loadTemplate("Search")`。

[JS 小提琴链接](http://jsfiddle.net/qGbTU/1/)。

出于某种原因，第二个版本在`this.name = ko.observable(name);`. this.name 未定义 - 我添加了控制台日志以查看错误。我不明白。在这两种情况下，我似乎都将相同的东西传递给 buildTemplate 的“名称”参数。不？

*一些注意事项：*我正在绑定到这样的“模板内容”元素，因为我正在运行多个视图模型。我声明`loadTemplate`或声明`loadHomeTemplate`为全局变量，因为我需要能够随时运行这些方法。可能有更好的方法来做到这一点，但我还没有弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:10:09.950

主要问题是`buildTemplate`必须使用，`new`因为它将自己初始化为所选模板的持有者。此修复解决了对`name`.

```
self.currentTemplate(new buildTemplate(name, templateData)); 
```

在我的 fork 中，我还创建`templateFactory`了包含所有特定模板的构造函数的对象。它使寻找合适的构造函数变得容易和自信。

[http://jsfiddle.net/AvYY4/1/](http://jsfiddle.net/AvYY4/1/)

# vim - 如何在 VIM 中正确缩进打字稿文件

> ID：15419589
> 
> 赞同：4
> 
> 时间：2013-03-14T20:32:46.220
> 
> 标签：vim, syntax, indentation, typescript

我对 VIM 很陌生，一直在使用 bundle 来格式化/着色/缩进我的文件。我目前从这里下载了一个打字稿vim语法“捆绑”：[https](https://github.com/leafgarland/typescript-vim.git) ://github.com/leafgarland/typescript-vim.git ，问题是缩进对我来说似乎坏了，考虑下面的例子，在自动缩进之后（gg = G) 文件：

```
module Module { 
    class Foo { 
        // some string here 
bar: string; // bar is incorrectly indented
    }      
} 
```

实际上，我期望以下内容：

```
module Module { 
    class Foo { 
        // some string here 
        bar: string; // bar is correctly indented
    }      
} 
```

这是 typescript.vim ftplugin 文件：

```
compiler typescript                                                             

setlocal autoindent
setlocal cindent
setlocal smartindent
setlocal indentexpr&

setlocal commentstring=//\ %s 
```

我尝试摆弄不同的缩进设置无济于事。我正在使用我的 VIM 设置并从这里捆绑：[https](https://github.com/gisenberg/.vim) ://github.com/gisenberg/.vim ，我使用 git 在本地机器上同步这些文件。

蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T09:21:01.307

根据[Vim indentation 文档](http://vimhelp.appspot.com/indent.txt.html#C-indenting)，您应该可以尝试以下方法，看看是否适合您。

## 手动摆弄

> 如果你手动改变当前行的缩进，Vim 会忽略该行的 cindent 设置。

由于这种模式在 TypeScript 中的频繁使用，这可能会令人讨厌。

## 尖括号

> 如果您真的想在键入时重新缩进，请`:`使用`<:>`.

`cindent`这将使您获得缩进，而不会丢失您认为有用的任何部分。

## 更改 cinkeys

这包含影响设置的`cindent`设置，默认情况下是：

```
"0{,0},0),:,0#,!^F,o,O,e" 
```

但是您可能会幸运地将其更改为：

```
"0{,0},0),0#,!^F,o,O,e" 
```

## 沟Cindent

您可以完全删除 c 样式的缩进，但删除此行：

```
setlocal cindent 
```

我已经介绍了很多选项，因为这是 Vim 的本质，也是代码编辑的本质——您需要尝试这些选项以找出最适合您的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-19T22:11:45.670

试试这个插件——https: [//github.com/jason0x43/vim-js-indent](https://github.com/jason0x43/vim-js-indent)。它支持 TypeScript，并解决了我所有的缩进问题。

# c# - 为什么 C# Type.GetProperty() 对接口的行为与对基类的行为不同？

> ID：15419590
> 
> 赞同：5
> 
> 时间：2013-03-14T20:32:46.643
> 
> 标签：c#, reflection, properties

`Type.GetProperty(string)`如果类型是接口，为什么不从基接口获取属性？例如，以下代码打印：

```
System.String X
null
System.String X
System.String X 
```

这似乎不一致：

```
void Main()
{
    Console.WriteLine(typeof(I1).GetProperty("X"));
    Console.WriteLine(typeof(I2).GetProperty("X"));
    Console.WriteLine(typeof(C1).GetProperty("X"));
    Console.WriteLine(typeof(C2).GetProperty("X"));;
}

public interface I1 { string X { get; } }

public interface I2 : I1 { }

public class C1 { public string X { get { return "x"; } } }

public class C2 : C1 { } 
```

**编辑：**支持科尔答案的运行时的另一个方面如下：

```
public class C : I2 {
    // not allowed: the error is
    // 'I2.X' in explicit interface declaration is not a member of interface
    string I2.X { get; set; }

    // allowed
    string I1.X { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T21:04:03.447

请记住，类继承与接口实现不同。

派生类和它的基类具有**is-a**关系。如果`D : B`then`D` **是一个** `B`. 如果`B`有一个属性，那么`D`根据定义也将具有相同的属性，因为这就是这种关系的*含义*；的“实质”`D`在某种意义上被它与 的关系所改变`B`。

接口不提供实现，所以当你说 时`ID : IB`，你并不是真的说`ID` **is a** `IB`就像你对类所做的那样。这甚至意味着什么？ 不是*东西*；`ID`_ 他们是*协议*。没有什么可以改变的。相反，您是在说“实现的类也必须提供 . 的实现” 。`IB`**`ID``IB`**

 **`ID`派生自的事实`IB`不会改变`ID`，因为它没有要改变的实质。这只是意味着任何承诺履行由 指定的合同的类`ID`也必须准备好遵守一组额外的要求。

记住这一点，如果`IB`提供了一个属性`X`，那么正确的答案是“`ID`有一个属性`X`吗？” 是*没有*。 `ID`需要你也实现`IB`，它*确实*有一个属性`X`，但它本身没有一个属性`X`。**

# ios - 应用本地化时如何在 NSString 中查找单词？

> ID：15419594
> 
> 赞同：0
> 
> 时间：2013-03-14T20:32:58.440
> 
> 标签：ios, ios6, localization, internationalization, nsstring

这个问题与本地化或国际化有关。我有一个包含一堆单词的字符串。Ex Firstname Middlename Lastname 我想找出这句话中的字数。通常我使用 [string componentsSeparatedByString:@" "]。这适用于英语，因为单词分隔符是空格。但在其他语言中可能会有所不同。那么如何获取字符串的本地化组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:38:54.177

随着 iOS5 Apple 在 Foundation 框架中引入了一些语言功能。特别是有

```
NSL语言标记器
```

分析自然语言文本并对其进行标记的类。这些标签之一是“单词”。这个类的使用有点复杂（它是异步的和基于块的）但它也很强大。有一个涵盖该主题的优秀 WWDC 视频。

# javascript - 使用 jQuery Mobile 动态添加 DIV 后刷新

> ID：15419595
> 
> 赞同：4
> 
> 时间：2013-03-14T20:33:02.880
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在尝试使用 jQuery mobile 动态添加**div**，但添加后，即使使用了**refresh**也不会应用 CSS 。

就是[例子](http://jsfiddle.net/Mils/YszNQ/)。

代码 ：

```
$(function() {
     $("#data").append('<div data-role="collapsible"><h3>Div2</h3><p>Content Div2...</p></div>');
     $("#data").listview("refresh");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:36:31.500

使用[`collapsibleset()`](http://jquerymobile.com/demos/1.3.0-rc.1/docs/content/content-collapsible-set-methods.html)代替`listview("refresh")`：

```
$("#data").collapsibleset(); 
```

见[演示](http://jsfiddle.net/YszNQ/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:56:02.843

我正在使用这种方法

```
try{
    $("#data").listview("refresh");
}catch{
    $("#data").listview();
}finally{
    $('[data-role=collapsible]').collapsible();
} 
```

将项目添加到动态时会出现此问题

# php - 致命错误：在非对象上调用成员函数 get_error_code()

> ID：15419598
> 
> 赞同：2
> 
> 时间：2013-03-14T20:33:15.313
> 
> 标签：php, wordpress, salesforce, fatal-error

使用为插件编写的代码时出现以下错误：

错误：致命错误：在第 335 行的 .../wp-login.php 中对非对象调用成员函数 get_error_code()

我尝试在 wp-login.php 中执行 var_dump($errors) 并返回 NULL。

我的插件：（将注册用户添加到外部数据库）

```
 function add_user_to_SF($errors, $sanitized_user_login, $user_email ) {

 global $SF_USERNAME;
 global $SF_PASSWORD;
 global $errors;

 try {
   $mySforceConnection = new SforceEnterpriseClient();
   $mySoapClient = $mySforceConnection->createConnection(CD_PLUGIN_PATH . 'Toolkit/soapclient/enterprise.wsdl.xml');
   $mySFlogin = $mySforceConnection->login($SF_USERNAME, $SF_PASSWORD);

$sObject = new stdclass();
$sObject->FirstName = $_POST['user_login'];
$sObject->LastName = $_POST['user_login'];
$sObject->Email = $_POST['user_email'];

$createResponse = $mySforceConnection->create(array($sObject), 'Contact');

$ids = array();
    foreach ($createResponse as $createResult) {
        array_push($ids, $createResult->id);
    }

    } catch (Exception $e) {

      $errors->add( 'demo_error', __('<strong>ERROR</strong>: There is a Salesforce problem.','mydomain') );
      return $errors;
     }

 }

 add_filter( 'registration_errors', 'add_user_to_SF', 10, 3 ); 
```

此外，当我使用此功能测试该过程时，一切正常。

```
 function myplugin_registration_errors ($errors, $sanitized_user_login, $user_email) {
    if ( empty( $_POST['first_name'] ) )
        $errors->add( 'first_name_error', __('<strong>ERROR</strong>: You must include a first name.','mydomain') );

    return $errors;
}
 add_filter( 'registration_errors', 'myplugin_registration_errors', 10, 3 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:01:07.393

应用过滤器的代码是：

```
$errors = apply_filters( 'registration_errors', $errors, $sanitized_user_login, $user_email ); 
```

...所以你需要从你的函数中返回 $errors 对象。目前在您的代码中，只有当您看到异常时才会发生这种情况。你的第二个函数总是返回 $errors，所以它会起作用。

此外，您不需要将 $errors 定义为全局，因为它是作为函数参数传入的。

尝试这个：

```
function add_user_to_SF($errors, $sanitized_user_login, $user_email ) {

    global $SF_USERNAME;
    global $SF_PASSWORD;
    // global $errors; // don't need to do this!

    try {
        $mySforceConnection = new SforceEnterpriseClient();
        $mySoapClient = $mySforceConnection->createConnection(CD_PLUGIN_PATH . 'Toolkit/soapclient/enterprise.wsdl.xml');
        $mySFlogin = $mySforceConnection->login($SF_USERNAME, $SF_PASSWORD);

        $sObject = new stdclass();
        $sObject->FirstName = $_POST['user_login'];
        $sObject->LastName = $_POST['user_login'];
        $sObject->Email = $_POST['user_email'];

        $createResponse = $mySforceConnection->create(array($sObject), 'Contact');

        $ids = array();
        foreach ($createResponse as $createResult) {
            array_push($ids, $createResult->id);
        }

    } catch (Exception $e) {
        $errors->add( 'demo_error', __('<strong>ERROR</strong>: There is a Salesforce problem.','mydomain') );
        // return $errors; // let's move this out of the exception handler block
    }

    return $errors; // always return the $errors object
}

add_filter( 'registration_errors', 'add_user_to_SF', 10, 3 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T07:42:04.467

你的函数**必须**返回变量`$errors`——即使你的逻辑没有新的错误。

`'registration_errors'`是一个过滤器，过滤器总是期望一个返回值。没有那个你的函数返回`NULL`，这就是`var_dump()`找到的。

所以基本的函数体应该是：

```
function add_user_to_SF($errors, $sanitized_user_login, $user_email ) {
    try {
    } catch (Exception $e) {
        return $errors;
    }
    return $errors; // important!
} 
```

来源：[https ://wordpress.stackexchange.com/a/90904/33667](https://wordpress.stackexchange.com/a/90904/33667)

# c# - 上传文件 ASP.NET

> ID：15419600
> 
> 赞同：-2
> 
> 时间：2013-03-14T20:33:22.153
> 
> 标签：c#, asp.net, image-uploading

我使用 ASP.NET Web 表单和 C#。我想将图像上传到特定文件夹并将文件重命名为某个名称，如果文件不是 PNG，则不上传文件。我不知道该怎么做，请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:36:24.790

抱歉，您是否尝试过谷歌搜索？

*   [http://www.codeproject.com/Articles/1757/File-Upload-with-ASP-NET](http://www.codeproject.com/Articles/1757/File-Upload-with-ASP-NET)
*   [http://msdn.microsoft.com/en-us/library/aa479405.aspx](http://msdn.microsoft.com/en-us/library/aa479405.aspx)
*   [http://asp.net-tutorials.com/controls/file-upload-control/](http://asp.net-tutorials.com/controls/file-upload-control/)

检查文件是否为 PNG：

*   [确定文件是否为图像](https://stackoverflow.com/questions/670546/determine-if-file-is-an-image)
*   [C#如何测试文件是jpeg？](https://stackoverflow.com/questions/772388/c-sharp-how-can-i-test-a-file-is-a-jpeg)

# azure - 瞬态故障处理 - 打开的 ReliableSqlConnection 是否会在其管理下自动处理 SQL 命令重试？

> ID：15419603
> 
> 赞同：0
> 
> 时间：2013-03-14T20:33:29.783
> 
> 标签：azure, azure-sql-database

将瞬态故障处理应用程序块与 SQL Azure 一起使用。在此示例中，oCmd.ExecuteReader() 的特定重试逻辑是强制性的，还是由 ReliableSqlConnection 处理？

```
 Using oCmd As New SqlCommand()
        strSQL = "SELECT xxxxxx.* FROM xxxxxx"
        oCmd.CommandText = strSQL
        Using oConn As New ReliableSqlConnection(Cs, retryPolicy)
            oConn.Open()
            oCmd.Connection = oConn
            Using oDR As SqlDataReader = oCmd.ExecuteReader()
                If oDR.Read() Then
                    sb1.Append(oDR("xxxxxx").ToString)
                End If
            End Using
        End Using
    End Using 
```

*** 更新 ***

从下面的响应中，如果我从 ReliableSqlConnect 对象的上下文创建 SqlCommand 对象，我可以期望重试行为也扩展到命令，如本页所述 [http://geekswithblogs.net/ScottKlein/archive/2012/ 01/27/understanding-sql-azure-throttling-and-implementing-retry-logic.aspx](http://geekswithblogs.net/ScottKlein/archive/2012/01/27/understanding-sql-azure-throttling-and-implementing-retry-logic.aspx)

“下面的下一个代码示例说明了使用 RetryPolicy 类创建重试策略，指定重试尝试和重试之间的固定时间。然后将此策略应用于 ReliablSqlConnection 作为连接策略和命令策略。”

```
RetryPolicy myretrypolicy = new RetryPolicy<SqlAzureTransientErrorDetectionStrategy>(3, TimeSpan.FromSeconds(30));

using (ReliableSqlConnection cnn = new ReliableSqlConnection(connString, myretrypolicy, myretrypolicy))
{
    try
    {
    cnn.Open();

    using (var cmd = cnn.CreateCommand())
    {
        cmd.CommandText = "SELECT * FROM HumanResources.Employee";

        using (var rdr = cnn.ExecuteCommand<IDataReader>(cmd))
        {
        //
        }
    }
    }
    catch (Exception ex)
    {
    MessageBox.Show(ex.Message.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:46:41.560

`ReliableSqlConnection`仅将重试逻辑应用于建立连接的过程。尝试使用这样的东西：

```
Using oDR As SqlDataReader = oCmd.ExecuteReaderWithRetry(retryPolicy)
          If oDR.Read() Then
                    sb1.Append(oDR("xxxxxx").ToString)
           End If
End Using 
```

有关使用的更多信息，您可以参考[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.windowsazure.transientfaulthandling.sqlazure.sqlcommandextensions.executereaderwithretry%28v=pandp.50%29.aspx)或这里有一些其他[示例](http://geekswithblogs.net/ScottKlein/archive/2012/01/27/understanding-sql-azure-throttling-and-implementing-retry-logic.aspx)。

# visual-studio-2010 - Visual Studio 2012 解决方案 TeamCity 中的 MSBuild

> ID：15419610
> 
> 赞同：72
> 
> 时间：2013-03-14T20:34:02.640
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, msbuild, teamcity

我有一个 VS 2012 Web 项目 /sln，我正在尝试在 TeamCity 中构建它。它使用安装在 TeamCity 上的 .NET 4.5。

TeamCity 服务器**仅安装了 VS 2010**。

构建运行时出现此错误：

```
C:\BuildAgent\work\d5bc4e1b8005d077\CUSAAdmin.Web\CUSAAdmin.Web.csproj(799, 3): 
error MSB4019: 
The imported project 
    "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets" was not found. 
 Confirm that the path in the <Import> declaration is correct, and that the file exists on disk. Project CUSAAdmin.Web\CUSAAdmin.Web.csproj failed. 
 Project CUSAAdmin.sln failed. 
```

它正在尝试使用 Visual Studio 2012 (v11.0) 来构建。

我已在**build.xml中将****VisualStudioVersion**设置为**10**？？

 **```
 <Target Name="BuildPackage">
   <MSBuild Projects="CUSAAdmin.sln" ContinueOnError="false" 
     Targets="Rebuild" 
      Properties="Configuration=$(Configuration); VisualStudioVersion=10.0"  /> 
```

以及在项目内部它默认为 VS2010

```
 <PropertyGroup>
<VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
<VSToolsPath 
    Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath> 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-10-14T00:05:41.163

实际上，您不需要在 CI 服务器上安装 Visual Studio。您只需将几个文件夹从开发机器复制到 CI 服务器上的相同位置。

**与 2015 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v14.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v14.0\WebApplications

**与 2013 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v12.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v12.0\WebApplications

**与 2012 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications

**与 2010 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\WebApplications

**.NET 4.6：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6

**.NET 4.5.2：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5.2

**.NET 4.5.1：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5.1

**.NET 4.5：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5

**.NET 4.0.1：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0.1

**.NET 4.0：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0

或者，正如[Matt 建议](https://stackoverflow.com/questions/15419610/msbuild-in-teamcity-of-visual-studio-2012-solution/#25062230)的那样，您可以将它们复制到项目的子目录中并更改`<MSBuildExtensionsPath32>`MSBuild（通常为`.csproj`或`.vbproj`）文件中的位置。

完成此操作后，您的项目将编译。您仍应将 VisualStudioVersion 显式设置为您正在使用的版本，以确保它设置正确。

> **注意：**此解决方案适用于所有项目类型（包括 Web 项目）。对于一个网站（没有项目文件），我最终安装了与我正在使用的 .NET SDK 版本匹配的[Windows SDK ，因为缺少导致它无法构建的注册表项。](https://msdn.microsoft.com/en-us/windows/desktop/ff851942.aspx)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-03-15T15:56:44.490

事实证明这真的很简单。要使 MSBuild 在 TeamCity 中以 VS2012 生成的解决方案的构建器身份运行 VS2010，只需为构建配置设置环境变量，如下所示：

![在此处输入图像描述](../Images/19229a5fa11d4620e25d3d836c283e49.png)

```
Name: env.VisualStudioVersion 
Value: 10.0 
```

**注意 TeamCity 不需要安装 VS2012。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-31T14:56:53.690

或者，您可以将所需的构建目标从 c:\Program Files (x86)\MSBuild 复制到项目的子目录（例如 .\Build），确保保留结构并将以下内容添加到您的 csproj：

```
<!-- redirect msbuild path so targets can be added to source control -->
<PropertyGroup>
  <MSBuildExtensionsPath32>..\Build\</MSBuildExtensionsPath32>
</PropertyGroup> 
```

例如，如果我的项目根目录是 C:\Dev\MyProjSln\MyProj

*   创建文件夹 C:\Dev\MyProjSln\Build\Microsoft\VisualStudio\version\WebApplications\
*   将 C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\version>\WebApplications\ 的内容复制到创建的文件夹
*   将 MSBuildExtensionsPath32 元素添加到 csproj 中 Project 节点下的 Property Group
*   利润！

就个人而言，我更喜欢这种跟踪构建目标依赖关系的方法，因为它可以防止构建服务器依赖于未记录的文件夹结构要求，并将您的依赖关系纳入源代码控制

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-12T16:41:45.773

[如此处](https://coderwall.com/p/qvrchq)所述：

*   安装 nuget`MSBuild.Microsoft.VisualStudio.Web.targets`
*   编辑 .csproj 文件

代替：

```
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" /> 
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" Condition="false" /> 
```

和：

```
<Import Project="..\packages\MSBuild.Microsoft.VisualStudio.Web.targets.11.0.2.1\tools\VSToolsPath\WebApplications\Microsoft.WebApplication.targets" Condition="true" /> 
```

显然，您必须确保版本在安装的 nuget 和路径上都与您的情况相匹配`<Import>`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-14T09:51:47.707

我完全不同意更改项目文件，因为这可能会影响其他开发人员。这对我有用，因为 MS 构建文件夹中缺少 v11.0 文件夹：1）创建 v111。

1.  在 C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio 上创建 v11.0 文件夹
2.  从我的开发框中复制 Web 和 WebApplications 文件夹“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0”
3.  轰！像魅力一样工作\
4.  注意：我安装了“Microsoft Visual Studio 2012 Shell (Isolated) Redistributable Package”

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-24T15:48:43.847

首先，TeamCity 不需要任何版本的 Visual Studio 来构建。当项目中的构建步骤配置了 MSBuild 运行程序时，TeamCity 需要知道要使用哪个版本的 MSBuild。这是构建步骤的设置。必须根据构建计算机上安装的 .NET 工具在构建步骤配置中选择正确的 MSBuild 版本。TeamCity 将使用该值来确定位置路径，并在调用 MSBuild 时设置环境变量。

Visual Studio 2012/2013 的问题在于它仅受 TeamCity 从 8.1.0 开始的支持。因此，如果您的 TeamCity 版本在 8.1 之前。您需要升级到最新的 8.1.x 才能查看 MSBuild Tools 2013 的设置。在构建步骤设置中选择正确的 MSBuild 版本后，问题就会消失。有关更多信息，请阅读此处：[http ://blog.turlov.com/2014/07/upgrade-teamcity-to-enable-support-for.html](http://blog.turlov.com/2014/07/upgrade-teamcity-to-enable-support-for.html)**

# javascript - 满足所有要求后显示警报

> ID：15419612
> 
> 赞同：1
> 
> 时间：2013-03-14T20:34:05.313
> 
> 标签：javascript, jquery, html

我有一个表格，用户可以 1.) 检查一个选项并完成。或 2.) 检查另一个选项并填写文本字段。

整个事情是，毕竟我希望我的警报显示出来，但事实并非如此。

```
$('.know-your-role').show('fast', function() {
    var $checkboxes = $('input:checkbox.checkchoice');
    if($checkboxes.is(':checked')){
        // show this after checked and the input has been filled.
        alert('cool');
    }else if($checkboxes.is(':checked') & $(".year").va() != "" ){
        alert('cool');
    }
}); 
```

在满足所有要求（复选框和输入）后，如何让警报显示？我在这里做了一个[小提琴](http://jsfiddle.net/Jg8jT/9/)来展示我正在使用的东西。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:42:33.550

除了之前的正确答案（缺失`&`和拼写错误`val`）之外，这里还有一个更基本的逻辑问题。你似乎有这样的结构：

```
if (conditionA) {
    // behaviorA
} else  if (conditionA && conditionB) {
    // behaviorB
} 
```

你永远不会用这样的逻辑达到行为B。如果`conditionA`失败了，那么`conditionA && conditionB`肯定也会失败。

你需要颠倒你的`if`和`else-if`块的顺序吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:34:52.893

失踪 '＆'

```
$checkboxes.is(':checked') && $(".year").val() != "" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:35:21.650

您应该使用`&&`而不是`&`进行布尔比较，而且您似乎输入错误`val`为`va`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T00:55:25.633

我建议有两个事件，一个在“教师”复选框上被选中，一个在年份字段上完成。这两个事件都可以触发一个函数，显示您的警报和您想要的任何其他逻辑。所以几乎没有重复。

这有助于将事件与显示/隐藏年份字段的逻辑分开，如果需要，您可以更轻松地为这两个事件执行不同的操作。

# r - ddply - 对象中包含的变量名中的空格

> ID：15419613
> 
> 赞同：2
> 
> 时间：2013-03-14T20:34:06.633
> 
> 标签：r, plyr, reshape2

有没有办法将命名变量和包含带空格的变量名的对象都传递给ddply？这是我的意思的一个例子：

```
> library(plyr)
> dat <- data.frame(id1=rep(c("A","B"),8),id2=rep(c("C","D","E","F"),4),x=rnorm(16))
> vname <- "id2"
#works without spaces
> ddply(dat,c("id1",vname),colwise(sum))
  id1 id2          x
1   A   C -1.1215505
2   A   E -1.4507586
3   B   D  1.5064013
4   B   F -0.5428153
> vname <- "id 2"
> names(dat)[2] <- vname
#breaks with spaces
> ddply(dat,c("id1",vname),colwise(sum))
Error in parse(text = x) : <text>:1:4: unexpected numeric constant
1: id 2
      ^
#backticks work when manually entering the name
> ddply(dat,c("id1","`id 2`"),colwise(sum))
  id1 id 2          x
1   A    C -1.1215505
2   A    E -1.4507586
3   B    D  1.5064013
4   B    F -0.5428153
#backticks don't work when pointing to object containing name
> ddply(dat,c("id1",`vname`),colwise(sum))
Error in parse(text = x) : <text>:1:4: unexpected numeric constant
1: id 2
      ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:10:48.620

您不能指望非语法名称可以很好地与所有函数和包一起使用。

但是，他们将与`data.table`,

改为使用`data.table`。相当于`colwise(fun)`是`lapply(.SD, fun)`

```
 dat <- data.frame(id1=rep(c("A","B"),8),
          "id 2"=rep(c("C","D","E","F"),4),x=rnorm(16), check.names= FALSE)

  library(data.table)
  DT <- data.table(dat)
  vname <- "id 2"
  DT[,lapply(.SD, sum) , by = c('id1',vname)] 
```

如果你想坚持`plyr`

然后

```
as.character(as.name(vname)) 
```

将创建字符向量

您可以创建一个执行此操作的函数

```
charN <- function(x) as.character(as.name(x)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:42:10.670

你可以这样做，但它看起来很丑：

```
 ddply(dat,c("id1",paste("`",vname,"`",sep='')),colwise(sum))
  id1 id 2          x
1   A    C  1.3719443
2   A    E -0.3264330
3   B    D -0.3231757
4   B    F -0.6807928 
```

正如评论中所说，使用格式正确的名称。

# python - Django 中 ModelAdmin 的标签名称

> ID：15419617
> 
> 赞同：8
> 
> 时间：2013-03-14T20:34:15.067
> 
> 标签：python, django

我怎样才能给这个类一个显示在后端而不是“EditedAddress”的标签？

```
class EditedAddressAdmin(admin.ModelAdmin):
    list_display = ('comp_name','fam_name', 'fon')
    search_fields = ['fam_name','comp_name']

admin.site.register(EditedAddress,EditedAddressAdmin) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T20:41:22.390

您可以通过向模型添加 verbose_name 和/或 verbose_name_plural 来调整模型名称的显示方式：

```
class EditedAddress(models.Model):
    class Meta:
        verbose_name = 'Edited Address'
        verbose_name_plural = 'Edited Addresses' 
```

# ruby - 如何从 ruby 中的 url 获取站点名称？

> ID：15419620
> 
> 赞同：3
> 
> 时间：2013-03-14T20:34:22.457
> 
> 标签：ruby, parsing, url

我有一个网址，例如：

```
http://www.relevantmagazine.com/life/relationship/blog/23317-pursuing-singleness 
```

并想从中提取**相关**杂志。

目前我有：

```
@urlroot = URI.parse(@link.url).host 
```

但它返回**www.relevantmagazine.com** 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T21:17:13.833

为此使用 gem 可能有点矫枉过正，但无论如何：有一个名为[domainatrix](https://github.com/pauldix/domainatrix)的方便 gem ，可以在处理两个元素顶级域等事务时为您提取站点名称。

```
url = Domainatrix.parse("http://www.pauldix.net")
url.url       # => "http://www.pauldix.net" (the original url)
url.public_suffix       # => "net"
url.domain    # => "pauldix"
url.canonical # => "net.pauldix"

url = Domainatrix.parse("http://foo.bar.pauldix.co.uk/asdf.html?q=arg")
url.public_suffix       # => "co.uk"
url.domain    # => "pauldix"
url.subdomain # => "foo.bar"
url.path      # => "/asdf.html?q=arg"
url.canonical # => "uk.co.pauldix.bar.foo/asdf.html?q=arg" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T21:19:04.067

怎么样

@urlroot = URI.parse(@link.url).host.gsub("www.", "").split(".")[0]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T05:24:49.570

试试这个正则表达式：

```
regex = %r{http://[w]*[\.]*[^/|$]*} 
```

如果您有以下 url 字符串，它会提供以下内容：

```
url = 'http://www.google.com/?q=blah'
url.scan(regex) => ["http://www.google.com"]

url = 'http://google.com/?q=blah'
url.scan(regex) => ["http://google.com"]

url = 'http://google.com'
url.scan(regex) => ["http://google.com"]

url = 'http://foo.bar.pauldix.co.uk/asdf.html?q=arg'
url.scan(regex) => ["http://foo.bar.pauldix.co.uk"] 
```

它并不完美，但它会删除除前缀和主机名之外的所有内容。然后，您可以使用其他代码轻松清理前缀，现在您只需要在字符串的开头查找`http://`or即可。`http://www.`另一个想法是，如果您还要 parse ，您可能需要稍微调整我给您的正则表达式`https://`。我希望这可以帮助您入门！

编辑：

我重新阅读了这个问题，并意识到我的回答并没有真正做到你所要求的。我想知道你是否知道你正在解析的 URL 是否有一个固定的格式可能会有所帮助，就像总是有 www。如果是这样，您可以使用正则表达式来提取 url 中第一个和第二个句点之间的所有内容。如果没有，也许您可​​以调整我的正则表达式，使其成为 / 或 www 之间的所有内容。和第一期。这可能是仅获取没有 www 的站点名称的最简单方法。或 .com 或 .au.uk 等。

修改后的正则表达式：

```
regex = %r{http://[w]*[\.]*[^\.]*}
url = 'http://foo.bar.pauldix.co.uk/asdf.html?q=arg'
url.scan(regex) => ["http://foo"] 
```

会很奇怪。如果您使用正则表达式的东西，您可能必须逐步清理 url 以提取您想要的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T20:35:34.057

也许你可以把它分开？

```
 URI.parse(@link.url).host.split('.')[1] 
```

请记住，某些注册域可能具有多个注册国家域的组成部分，例如`.co.uk`或`.co.jp`或`.com.au`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T21:18:05.350

我发现答案的灵感来自 tadman 的答案和[另一个问题的答案](https://stackoverflow.com/questions/6674230/how-would-you-parse-a-url-in-ruby-to-get-the-main-domain?rq=1)

```
@urlroot = URI.parse(item.url).host
@urlroot = @urlroot.start_with?('www.') ? @urlroot[4..-1] : @urlroot
@urlroot = @urlroot.split('.')[0] 
```

第一行获取主机，第二行获取删除 www。如果它们是第一行和第三行，则在下一个点之前获取所有内容。

# android - 过滤自定义 Arrayadapter 不起作用

> ID：15419628
> 
> 赞同：0
> 
> 时间：2013-03-14T20:35:02.327
> 
> 标签：android, listview, filter, android-arrayadapter

我正在过滤一个 Arrayadapter。我使用自定义数组适配器。现在我想过滤，我需要一个自定义过滤器。我遵循了许多示例之一，但我仍然遇到问题。每当我的代码如下所示时，过滤时什么都不会发生。我认为这是因为 getView，然后是最后一行：

```
textView.setText(original.get(position)) 
```

我认为这应该是：

```
textView.setText(fItems.get(position)) 
```

但是当我把它改成这个时，我得到以下错误：

```
03-14 21:27:19.541: E/AndroidRuntime(25128): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0 
```

在这条线上。所以或者它崩溃，或者不起作用。有人知道我在做什么错吗？

这是我的代码：

```
import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.TextView;

public class SimpleListAdapter extends ArrayAdapter<String>{
    private final Context context;
    private Filter filter;
    private List<String> fItems;
    private final List<String> original;

    public SimpleListAdapter(Context context, String[] values) {
        super(context, R.layout.view_listitem, values);
        this.context = context;

        original = new ArrayList<String>();
        for(int i=0;i<values.length;i++) {
            original.add(values[i]);
        }
        fItems = new ArrayList<String>(original);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.view_listitem, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.tv_listitem);
        textView.setText(original.get(position)); //fItems.get(position?/!)

        return rowView;
    }

    @Override
    public String getItem(int pos) {
        return original.get(pos); //fItems.get(position?/!)
    }

    @Override
    public Filter getFilter()
    {
        if (filter == null)
            filter = new StringNameFilter();

        return filter;
    }

    private class StringNameFilter extends Filter
    {
        @Override
        protected FilterResults performFiltering(CharSequence constraint)
        {   
            FilterResults results = new FilterResults();
            String prefix = constraint.toString().toLowerCase();

            if (prefix == null || prefix.length() == 0)
            {
                ArrayList<String> list = new ArrayList<String>(original);
                results.values = list;
                results.count = list.size();
            }
            else
            {
                final ArrayList<String> list = new ArrayList<String>(original);
                final ArrayList<String> nlist = new ArrayList<String>();
                int count = list.size();

                for (int i=0; i<count; i++)
                {
                    final String String = list.get(i);
                    final String value = String.toLowerCase();

                    if (value.startsWith(prefix))
                    {
                        nlist.add(String);
                    }
                }
                results.values = nlist;
                results.count = nlist.size();
            }
            return results;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            fItems = (ArrayList<String>)results.values;

            fItems.clear();
            int count = fItems.size();
            for (int i=0; i<count; i++)
            {
                String String = (String)fItems.get(i);
                fItems.add(String);
            }
        }

    }

} 
```

# data-binding - AngularJS：如果元素具有 ngModel 和自定义指令，则两种方式数据绑定失败

> ID：15419629
> 
> 赞同：8
> 
> 时间：2013-03-14T20:35:05.300
> 
> 标签：data-binding, angularjs, angularjs-directive, angularjs-scope

我做了两个指令来在 AngularJS 中设置自定义错误消息：

错误 -> 显示表单的错误消息

error-message -> 在输入上设置自定义错误消息

出于某种原因，每当我将`error-message`指令添加到元素时，ng-model 绑定不再有效（但验证有效）。

见这里[http://jsfiddle.net/apohl/A8Vgk/111/](http://jsfiddle.net/apohl/A8Vgk/111/)

请帮忙 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:49:08.803

问题是您的`errorMessage`指令使用了隔离范围。隔离范围会影响*整个元素*，因此该`ngModel`指令在隔离范围内进行评估 - 这显然无法正常工作 - 模型位于父范围内。

我不确定您为什么在这里建立隔离范围。由于您正在尝试创建一个**必须**与其他指令交互的组件，因此隔离范围不是最佳选择。由于`errorMessage`不影响当前范围，您可能不需要任何已定义的范围，但如果您愿意，可以使用子范围。

查看[此处](https://stackoverflow.com/q/14914213/259038)以了解有关何时在指令上使用每种类型的范围的更多信息。

# winforms - 通过 WebBrowser 控件下载文件

> ID：15419632
> 
> 赞同：10
> 
> 时间：2013-03-14T20:35:10.333
> 
> 标签：winforms, download, webbrowser-control

我在表单上有一个 WebBrowser 控件，但在大多数情况下，它对用户是隐藏的。它在那里处理一系列登录和其他任务。我**必须使用**这个控件，因为有大量的 Javascript 可以处理登录。（即，我不能只切换到 WebClient 对象。）

跳了一会儿之后，我们最终想要下载一个 PDF 文件。但不是下载，而是文件显示在 webBrowser 控件中，用户看不到。

如何下载 PDF 而不是将其加载到浏览器控件中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T22:20:35.563

在表单中添加 SaveFileDialog 控件，然后在 WebBrowser 的导航事件中添加以下代码：

```
private void webBrowser1_Navigating(object sender, WebBrowserNavigatingEventArgs e)
{
    if (e.Url.Segments[e.Url.Segments.Length - 1].EndsWith(".pdf"))
    {
        e.Cancel = true;
        string filepath = null;

        saveFileDialog1.FileName = e.Url.Segments[e.Url.Segments.Length - 1];
        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            filepath = saveFileDialog1.FileName;
            WebClient client = new WebClient();
            client.DownloadFileCompleted += new AsyncCompletedEventHandler(client_DownloadFileCompleted);
            client.DownloadFileAsync(e.Url, filepath);
        }
    }
} 
```

//回调函数

```
void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
{
    MessageBox.Show("File downloaded");
} 
```

资料来源：[http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/d338a2c8-96df-4cb0-b8be-c5fbdd7c9202](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/d338a2c8-96df-4cb0-b8be-c5fbdd7c9202)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-06T14:55:21.497

我最终使用的解决方案：

我做了所有其他需要的事情来获取需要去的 URL。知道所有登录信息、所需设置、视图状态等都存储在 cookie 中，我终于能够使用 Web 控件的混合来抓取文件，然后使用 WebClient 对象来实际抓取文件字节。

```
 public byte[] GetPDF(string keyValue)
    {
        DoLogin();

        // Ask the source to generate the PDF. The PDF doesn't 
        // exist on the server until you have visited this page 
        // at least ONCE. The PDF exists for five minutes after 
        // the visit, so you have to snag it pretty quick.
        LoadUrl(string.Format(
            "https://www.theMagicSource.com/getimage.do?&key={0}&imageoutputformat=PDF", 
            keyValue));

        // Now that we're logged in (not shown here), and 
        // (hopefully) at the right location, snag the cookies. 
        // We can use them to download the PDF directly.
        string cookies = GetCookies();

        byte[] fileBytes = null;
        try
        {
            // We are fully logged in, and by now, the PDF should
            // be generated. GO GET IT! 
            WebClient wc = new WebClient();
            wc.Headers.Add("Cookie: " + cookies);

            string tmpFile = Path.GetTempFileName();

            wc.DownloadFile(string.Format(
                "https://www.theMagicSource.com/document?id={0}_final.PDF", 
                keyValue), tmpFile);

            fileBytes = File.ReadAllBytes(tmpFile);
            File.Delete(tmpFile);
        }
        catch (Exception ex)
        {
            // If we can't get the PDF here, then just ignore the error and return null.
            throw new WebScrapePDFException(
                "Could not find the specified file.", ex);
        }

        return fileBytes;
    }

    private void LoadUrl(string url)
    {
        InternalBrowser.Navigate(url);

        // Let the browser control do what it needs to do to start 
        // processing the page.
        Thread.Sleep(100);

        // If EITHER we can't continue OR
        // the web browser has not been idle for 10 consecutive seconds yet, 
        // then wait some more.
        // ...
        // ... Some stuff here to make sure the page is fully loaded and ready. 
        // ... Removed to reduce complexity, but you get the idea.
        // ...
    }

    private string GetCookies()
    {
        if (InternalBrowser.InvokeRequired)
        {
            return (string)InternalBrowser.Invoke(new Func<string>(() => GetCookies()));
        }
        else
        {
            return InternalBrowser.Document.Cookie;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T13:37:11.640

```
 bool documentCompleted = false;
    string getInnerText(string url)
    {
        documentCompleted = false;
        web.Navigate(url);

        while (!documentCompleted)         
            Application.DoEvents();

        return web.Document.Body.InnerText;
    }
    private void web_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        documentCompleted = true;
    } 
```

# jquery - 当多个 div 具有相同名称时，只关闭一个类

> ID：15419640
> 
> 赞同：1
> 
> 时间：2013-03-14T20:35:32.637
> 
> 标签：jquery, html

我正在动态创建这棵树，问题是因为它们都有相同的类名，所以它会关闭所有打开的 div。

我正在尝试使用`$(this).parent().next('.sticker').hide();`，但没有任何反应。我用错了吗？

```
 $('#note-btn').click(function() {
        $.get('xml/note.xml', function(data) {
            $(data).find('notes').each(function() {

                var notes = '<div class="notes">';

                notes += '<div class="notes-close">' + '</div>';
                $('#page-content-wrapper').append(notes);
            });

            $(".notes-close").click(function()
            {
                $(this).parent().next('.notes').toggle();
            });

        });

    });
}); 
```

这个的输出是。

```
<div id="page-content-wrapper">
<div class="notes"> 
<div class="notes-close"></div> 
</div> 
</div> 
```

其中 note-close 是笔记的关闭按钮，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:02:40.010

我假设你的关闭按钮应该关闭当前的笔记，所以`.next()`/`.prev()`是不需要的。您可以使用`.closest()`将 DOM 向上移动到第一个`.notes`和`.toggle()`那个。

代替：

```
$(this).parent().next('.notes').toggle(); 
```

和：

```
$(this).closest('.notes').toggle(); 
```

# .net - 为什么 C++ CLI 不允许使用扩展方法？

> ID：15419642
> 
> 赞同：1
> 
> 时间：2013-03-14T20:35:35.273
> 
> 标签：.net, visual-c++, c++-cli, extension-methods

我在 C++ CLI 中的代码：

```
[System::Runtime::CompilerServices::ExtensionAttribute]
public ref class MyExtensions abstract sealed {
public:          
    [System::Runtime::CompilerServices::ExtensionAttribute]
    static System::String^ SetC() {
        return gcnew System::String("{") + gcnew System::String("}")  ;
    }
} 
```

但是下面的行会抛出一个错误，即 String 没有成员 SetC。

```
System::String("").SetC(); 
```

我也尝试过使用以下代码：

```
gcnew System::String("")->SetC(); 
```

有什么遗漏吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T20:47:13.410

C++/CLI 将允许您使用扩展方法，但您必须将其作为常规静态方法调用。有关一些示例，请参阅[此答案](https://stackoverflow.com/questions/5643734/how-to-use-linq-in-c-cli-in-vs-2010-net-4-0/5645267#5645267)，使用 Linq 的 First() 作为示例扩展方法来调用。

# php - 将所有邮件重定向到文件

> ID：15419644
> 
> 赞同：2
> 
> 时间：2013-03-14T20:35:43.383
> 
> 标签：php, linux, bash, unix, sendmail

几年前，我在 sendmail_path 配置条目的 php.ini 文件中遇到了一小段内联 bash 代码。内联 bash 片段的目的是将所有邮件重定向到一个文件。不幸的是，我丢失了片段。我想将它用于我的开发机器。有没有人见过这样的片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:56:27.113

```
$ php -d sendmail_path="cat - >> /tmp/mailfile" -r "var_dump(mail('me@localhost','foo','bar'));"
bool(true)
$ cat /tmp/mailfile 
To: me@localhost
Subject: foo
X-PHP-Originating-Script: 1000:Command line code

bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:47:14.513

当并行发送两封电子邮件时，基于“猫”的一个班轮可能会产生竞争条件。恕我直言，它们可能适合低负载的简单 est 环境。

我会推荐基于 procmail 的解决方案。Procmail 在投递到邮箱文件或投递到 maildir 时可以使用锁。

```
sendmail_path="/usr/bin/procmail -m /etc/procmailrcs/catch-mail.rc" 
```

/etc/procmailrcs/catch-mail.rc ：

```
# deliver messages to /tmp/mailfile mailbox file
DEFAULT=/tmp/mailfile 
```

# wpf - 在 wpf 中如何访问 usercontrol 中的 window.resources

> ID：15419646
> 
> 赞同：3
> 
> 时间：2013-03-14T20:35:45.953
> 
> 标签：wpf, user-controls, resources, collectionviewsource

我有一个子用户控件，但无法访问其父用户控件的资源。资源是一个collectionViewSource，它的源设置在父用户控件后面的代码中，源设置为LINQ to SQL的查询结果。两个用户控件都在它们自己的 xaml 文件中定义。我尝试使用 DynamicResource 并且它抱怨说它需要与 DepenednecyProperty 左右一起使用......

**父用户控件**：

```
...
<UserControl.Resources>
    <CollectionViewSource x:Key="UsageTypeSource"/>
</UserControl.Resources>
... 
```

**子用户控件**：

```
...
<ComboBox Height="28" HorizontalAlignment="Left" Margin="147,1,0,0" x:Name="cbxUsage"
          Grid.Column="1" Grid.Row="2" Width="186"
          SelectedItem="{Binding Path=UsageType, ValidatesOnExceptions=true, NotifyOnValidationError=true}"
          VerticalAlignment="Top" SelectedValuePath="ID"
          SelectedValue="{Binding Path=Usage}"
          ItemsSource="{Binding Source={StaticResource UsageTypeSource}}"
          DisplayMemberPath="Type"/>
... 
```

我得到的错误是'资源“UsageTypeSource”无法解决'

您能否提供访问资源的正确方法

提前感谢灰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:40:45.583

试试这个：

```
ItemsSource="{DynamicResource UsageTypeSource}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-09T22:15:55.323

代替

```
<UserControl.Resources> ... </UserControl.Resources> 
```

采用

```
<Control.Resources> ... </Control.Resources> 
```

# lucene - 不标记某些单词/模式的标准分析器

> ID：15419647
> 
> 赞同：1
> 
> 时间：2013-03-14T20:35:48.970
> 
> 标签：lucene, elasticsearch, tokenize

所以，如果假设有这样一行：

```
> Mar 14 20:22:41 subdomain.mydomain.colo postfix/smtpd[16862]: NOQUEUE:
> reject: RCPT from unknown[1.2.3.4]: 450 4.7.1 Client host rejected:
> cannot find your reverse hostname, [5.6.7.8]; from=<erp@misms.net.in>
> to=<a@domain1.com> proto=ESMTP helo=<a.domain.net> also
> from=<> 
```

使用标准标记器几乎没有问题。

*   如果我有标准标记器，我无法搜索`from=<>`.
*   为此，空白标记器可以完美运行。但是，与此同时，我将无法搜索电子邮件 ID`a@domain1.com`或域 `a.domain.net`，因为它们包含`<>`字符。我想`a@domain1.com`成为一个象征
*   如果我使用标准标记器，我可以搜索，`a@domain1.com`但这些实际上是两个标记（所以我认为它效率低下）。
*   标准标记器破坏了我不想要的主机名 subdomain.mydomain.colo。

那么，有没有一种方法可以分析文本，使其使用标准标记器，但也不标记匹配正则表达式的单词？我是 ES 的新手，所以如果可能的话，请尝试举一个小例子，那会很棒。

我觉得与正则表达式相关的标记器可能很昂贵，所以如果有改变我可以做空白分析器 + 还保留主机名、电子邮件 ID 等标记并保留几个单词，那就太棒了。

请回答您有任何类型的输入。

PS：我[在 ES 邮件](http://elasticsearch-users.115913.n3.nabble.com/protect-some-words-when-tokenizing-tp4029687p4029694.html)列表中查看了这篇文章，但它不适用于电子邮件地址或主机名，因为我无法获得所有电子邮件地址/主机名的详尽列表。所以，我希望你能理解我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:53:53.520

Lucene 4.X 中的 StandardAnalyzer 发生了一些重大变化。而不是旧的逻辑，它现在实现了[UAX#29](http://unicode.org/reports/tr29/)。

StandardAnalyzer 的旧样式已重命名为 ClassicAnalyzer，它使用[ClassicTokenizer](http://lucene.apache.org/core/4_0_0/analyzers-common/org/apache/lucene/analysis/standard/ClassicTokenizer.html)，它应该可以完成您想要的大部分操作（它被明确设计为将电子邮件收件人和主机名作为单个令牌处理）。

但是，我认为它不会帮助您将其解析`from=<>`为令牌。为此，我看到了几个选项：

*   更改数据：由于它是您要识别的非常具体的字符串，只需将其所有实例替换为您可以轻松识别的单个标记，例如替换`from=<>`为`NULLSENDER`，然后对其进行索引。
*   创建一个自定义标记器来处理您的语法。可能最简单的方法以及 Lucene API 推荐的方法是复制 ClassicTokenizer 代码，然后从那里开始工作。

考虑到您要在那里处理的特殊情况的明显简单性，我可能会使用第一个选项，因为它应该很容易，而第二个选项可能比它的价值更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:31:57.147

我认为使用不同的分析器添加多重映射将通过创建单独的案例来处理不同的场景来简化它：

```
 "myfield": {
            "type": "multi_field",
            "fields": {
                "myfield": {
                    "include_in_all": true,
                    "type": "string",
                    "index": "analyzed",
                    "analyzer": "myWhitespaceAnalyzer"
                },
                "variant1": {
                     "include_in_all": true,
                    "type": "string",
                    "index": "analyzed",
                    "analyzer": "myOtherAnalyzer"
                },
                 "untouched": {
                     "include_in_all": true,
                    "type": "string",
                    "index": "not_analyzed"
                }
            }
        } 
```

根据您的需要搜索所有字段或特定字段。

# java - 从 BufferedImage 读取像素 - 错误的颜色值

> ID：15419651
> 
> 赞同：0
> 
> 时间：2013-03-14T20:36:06.603
> 
> 标签：java, bufferedimage, raster

当一艘宇宙飞船被摧毁时，我创建了一个包含宇宙飞船图像像素的列表。像素是我的 Pixel 类的对象。创建列表后，它被添加到主列表中，对它们执行各种操作。这就是我的代码的样子：

```
//Code which creates an array
List<Pixel> pixels = new LinkedList<>();
BufferedImage buff = (BufferedImage)image;
for (int px = 0; px < buff.getWidth(); px++) {
    for (int py = 0; py < buff.getHeight(); py++) {
        int rgb = buff.getRGB(px, py);
        int red = (rgb & 0x00ff0000) >> 16;
        int green = (rgb & 0x0000ff00) >> 8;
        int blue = rgb & 0x000000ff;
        int alpha = (rgb >> 24) & 0xff;
        if (alpha == 255) {
            pixels.add(new Pixel(px, py, red, green, blue));
        }
    }
}
//Pixel class constructor
Pixel(float x, float y, int red, int green, int blue) {
    super(x, y);
    BufferedImage buff = new BufferedImage(1, 1, BufferedImage.TYPE_INT_ARGB);
    WritableRaster raster = buff.getRaster();
    //LOOKS EVERYTHING IS OKAY SINCE THIS LINE SO THE ERROR MUST BE SOMEWHERE IN THOSE 2 LINES
    raster.setPixel(0, 0, new int[]{red, blue, green, 255});
    image = buff;
} 
```

简短说明：图像是图像类型的私有字段。它用于 repaint() 方法，该方法使用 drawImage() 方法绘制像素。关于我的问题：Eveything 几乎可以正常工作。像素在正确的位置创建，但都是紫罗兰色。它们有不同的色调（更亮和更暗），但都是紫色的，而不是与图像颜色相同的颜色！为什么会这样？为什么是紫罗兰色？有人可以帮我理解这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:50:06.057

它可能是您`setPixel`方法中绿色和蓝色值的混合。颜色通常以 RGB 顺序给出，这是您从`BufferedImage`.

代替

```
raster.setPixel(0, 0, new int[]{red, blue, green, 255}); 
```

尝试

```
raster.setPixel(0, 0, new int[]{red, green, blue, 255}); 
```

如果这不起作用，您可能必须修改数组中的不同变量顺序，直到看起来正确为止。

# regex - 匹配字符串vba excel中的日期模式

> ID：15419652
> 
> 赞同：1
> 
> 时间：2013-03-14T20:36:08.960
> 
> 标签：表达式, regex, excel, vba

**编辑：** *由于我的字符串变得越来越复杂，看起来正则[表达式](/questions/tagged/regexp "显示标记为“正则表达式”的问题")是唯一的方法。我在这方面没有太多经验，非常感谢您的帮助。*

基本上，根据我在网上阅读的内容，我构建了以下 exp 以尝试匹配示例字符串中的出现：

“我很长的字符串 12Mar2012 就在这里 23Apr2015” [0-9][0-9] + [a-zA-Z] + [0-9][0-9][0-9][0-9 ]

并尝试此代码。我没有任何比赛。非常感谢任何关于正则表达式教程的好的链接。

```
 Dim re, match, RegExDate
    Set re = CreateObject("vbscript.regexp")
    re.Pattern = "(^[0-9][0-9] + [a-zA-Z] + [0-9][0-9][0-9][0-9]$)"
    re.Global = True

    For Each match In re.Execute(str)
        MsgBox match.Value
        RegExDate = match.Value
        Exit For
    Next 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T23:52:44.493

此代码验证`Regexp`使用`DateValue`稳健性的实际日期

```
Sub Robust()
Dim Regex As Object
Dim RegexMC As Object
Dim RegexM As Object
Dim strIn As String
Dim BDate As Boolean
strIn = "My very long long string 12Mar2012 is right here 23Apr2015 and 30Feb2002"
Set Regex = CreateObject("vbscript.regexp")
With Regex
 .Pattern = "(([0-9])|([0-2][0-9])|([3][0-1]))(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(\d{4})"
 .Global = True
If .test(strIn) Then
   Set RegexMC = .Execute(strIn)
   On Error Resume Next
   For Each RegexM In RegexMC
   BDate = False
   BDate = IsDate(DateValue(RegexM.submatches(0) & " " & RegexM.submatches(4) & " " & RegexM.submatches(5)))
   If BDate Then Debug.Print RegexM
   Next
   On Error GoTo 0
End If
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:44:51.717

感谢你的帮助 ！！！我设法使用这个简单的代码解决了我的问题。

```
Dim rex As New RegExp
Dim dateCol As New Collection
rex.Pattern = "(\d|\d\d)(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(\d{4})?"
rex.Global = True

For Each match In rex.Execute(sStream)
    dateCol.Add match.Value
Next 
```

请注意，就我而言，我确定字符串中的日期有效，因此 reg 表达式很简单。

谢谢伊利亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:08:55.273

以下是我进行的快速尝试。它远非完美。

基本上，它将字符串拆分为单词。在遍历单词时，它会切断任何标点符号（句号和逗号，您可能需要添加更多）。

在处理一个项目时，我们会尝试从中删除每个月的名称。如果字符串变短，我们可能会有一个日期。

它检查最终字符串的长度是否正确（5 或 6 个字符，1 或 2 + 4 表示日和年）

您可以改为（或也）检查以查看所有数字。

```
Private Const MonthList = "JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC"
Public Function getDates(ByVal Target As String) As String
Dim Data() As String
Dim Item As String
Dim Index As Integer
Dim List() As String
Dim Index2 As Integer
Dim Test As String
Dim Result As String

    List = Split(MonthList, ",")
    Data = Split(Target, " ")
    Result = ""

    For Index = LBound(Data) To UBound(Data)
        Item = UCase(Replace(Replace(Data(Index), ".", ""), ",", ""))
        For Index2 = LBound(Data) To UBound(Data)
            Test = Replace(Item, List(Index2), "")
            If Not Test = Item Then
                If Len(Test) = 5 Or Len(Test) = 6 Then
                    If Result = "" Then
                        Result = Item
                    Else
                        Result = Result & ", " & Item
                    End If
                End If
            End If
        Next Index2
    Next
    getDates = Result
End Function 
```

# computer-vision - 用玻璃覆盖的棋盘校准相机

> ID：15419659
> 
> 赞同：3
> 
> 时间：2013-03-14T20:36:29.263
> 
> 标签：computer-vision, camera-calibration

我需要找到一个单一的内在校准参数。为此，我从不同角度拍摄了几张棋盘图案的图像，然后使用校准软件。

为了使校准图案尽可能平坦，我将其打印在纸上并盖上 3 毫米玻璃。显然，图案的图像是由玻璃修饰的，因为它与空气相比具有不同的折射系数。

外在参数会被玻璃扭曲。这是因为我们看到的棋盘格没有到位。但是，如果已知玻璃的厚度以及玻璃和空气的折射系数，则似乎可以恢复外部参数。

所以，问题是：

*   是否可以计算外在参数，如果可以，那么如何计算？（现在没有必要，只是一个有趣的理论问题）
*   从这些图像获得的内在校准参数是否等同于从通常的校准程序（没有盖玻片）获得的参数？

通过使用玻璃，GML Camera Calibration Toolbox（基于 OpenCV）报告的校准参数变得更加准确。（这有什么意义吗？）但是这种方法有一个小缺点——不需要的反射，尤其是来自光源的反射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:37:49.513

我推荐你选择一个非常平坦的支撑（这是我[在这里](https://stackoverflow.com/questions/12794876/how-to-verify-the-correctness-of-calibration-of-a-webcam/12821056#12821056)推荐自己的）。但是，请原谅我问了一个明显的问题，你为什么要用玻璃盖住图案？

由于练习的目的是确保目标的平面度而不是其他，因此您不妨将与纸张图案相反的那面粘上，避免所有这些麻烦。是的，随着时间的推移，图案会变脏和磨损，需要更换。因此，您只需将其刮掉并更换即可：打印棋盘很便宜。

如果由于某种原因，您被前面的玻璃卡住了，我建议您首先对由于玻璃折射引起的预期光线偏转进行粗略计算，并检查它是否可以通过您的设备实际测量. 鉴于您正在使用的镜头的标称焦距（以 mm 为单位）以及传感器的物理宽度和像素密度，您可以轻松地在图像中心进行计算，假设目标相对于焦轴的“极端”旋转角度（例如，45 度）和标称距离。作为第一个近似值，您可以将图案建模为“绘制”在玻璃上，因此忽略第一次折射，只考虑玻璃对空气的折射。

如果上述计算表明效果是可测量的（偏转 >= 1 像素），则需要将玻璃添加到场景模型中，并在捆绑调整阶段求解其参数以及内在和外在参数。首先，我将使用两个参数，厚度和折射系数，并假设两个面都是平面且平行的。它只会使成本函数中角投影的计算更加复杂，因为您必须将光线偏转考虑在内。考虑到成本函数的额外复杂性，我肯定会编写模型的代码以使用[自动微分](http://en.wikipedia.org/wiki/Automatic_differentiation)(AD)。

如果您真的想完成这个练习，我建议您在支持 AD 的[Google Ceres](https://code.google.com/p/ceres-solver/)捆绑调整器之上编写求解器，以及许多不错的功能。

# ruby-on-rails - Bitnami Rails Nginx Thin - 该服务不可用。请稍后再试

> ID：15419660
> 
> 赞同：0
> 
> 时间：2013-03-14T20:36:30.980
> 
> 标签：ruby-on-rails, nginx

我正在尝试使用 Nginx 和 5 个瘦应用服务器运行 Bitnami Rails 堆栈。

我的瘦应用服务器运行正常，我已经启动了 Nginx，它已连接到 5 台瘦服务器。

但是，一些代码给了我“服务不可用。请稍后再试。” html 当我从浏览器访问我的应用程序时。我不知道给我信息的代码在哪里。

我有 Nginx 服务器在端口 80 上侦听。

这是我的 nginx.conf 文件： [https ://dl.dropbox.com/u/35302780/nginx.conf](https://dl.dropbox.com/u/35302780/nginx.conf)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:30:55.077

您的配置看起来不错，除了那两个 if 语句，因为[IF 在 location block 中是邪恶的](http://wiki.nginx.org/IfIsEvil)。你可能想解决这个问题。

似乎您正在使用[第 3 方上游模块](http://wiki.nginx.org/HttpUpstreamFairModule)。尝试卸载该模块并使用正常的上游模块。

# winapi - 如果我想让我的计算机能够“看到”自己，那么在调用 PrtSc 之后检查剪贴板是一种明智的方法吗？

> ID：15419662
> 
> 赞同：0
> 
> 时间：2013-03-14T20:36:34.170
> 
> 标签：winapi, clipboard, feature-detection

我对人工智能越来越感兴趣，但我仍在学习 Windows API 的基础知识。我目前的目标是创建一个`c++`调用`SendInput`模拟 PrtSc 被按下的进程（打印屏幕按钮）。这是我目前能想到的让程序能够像人类一样看到屏幕的一帧的唯一方法。

举个简单的例子，假设出于某种原因，我希望我的程序能够“自行查看”，Windows 7 上的时钟显示的时间。因此，为了让计算机和我自己轻松完成任务，假设我们知道工具栏位于屏幕底部。我们已经知道要检查的矩形位图的确切屏幕坐标。因此，我们调用`SendInput`模拟按下`PrtSc`并将屏幕显示复制到剪贴板，然后我们在这些坐标处检查剪贴板并进行一些特征检测以查看有哪些数字，其余的从那里开始下坡。

那么我的问题是，这是实现这样一个程序的合理方式吗？还是我让这变得比需要的更困难？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:00:35.010

您根本不需要模拟 PrtSc 按钮来抓取屏幕截图。您可以直接从屏幕上截取屏幕截图并将其复制到内存位图中，例如：

```
int iScreenWidth = GetSystemMetrics(SM_CXSCREEN);
int iScreenHeight = GetSystemMetrics(SM_CYSCREEN);

HDC hScreenDC = GetDC(0);
HDC hMemDC = CreateCompatibleDC(hScreenDC);
HBITMAP hScreenBmp = CreateCompatibleBitmap(hMemDC, iScreenWidth, iScreenHeight);
HBITMAP hOldBmp = SelectObject(hMemDC, hScreenBmp);
BitBlt(hMemDC, 0, 0, iScreenWidth, iScreenHeight, hScreenDC, 0, 0, SRCCOPY);
ReleaseDC(0, hScreenDC);

// use hScreenBmp as needed...

SelectObject(hMemDC, hOldBmp);
DeleteObject(hScreenBmp); 
```

为了具体获取时钟值，为什么还要费心截图呢？只需使用该[`GetLocalTime()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724338.aspx)功能即可。

# java - 使用 chatterbean AIML interpeter 制作 alice bot

> ID：15419663
> 
> 赞同：2
> 
> 时间：2013-03-14T20:36:36.060
> 
> 标签：java, tags, aiml

每当我尝试加载 Alice 的目标文件时，我都会收到关于未找到标签的各种错误，但是当我修复这些错误时，我会收到一个错误，我不知道如何修复。没有实现目标的东西，但是当我查看目标类时，它正在执行它：？我的代码：

```
public static String input()
{
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    //System.out.println("you say>");
    String input = "";
    try 
    {
        input = in.readLine();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return input;
}

public static void main(String[] args) throws Exception
{
     Chat ch=new Chat();        
     AliceBotMother mother = new AliceBotMother();        
     mother.setUp();
     AliceBot bot = mother.newInstance();
     System.err.println(bot.respond("welcome"));
 while(true)
 {
     String input = Chat.input();
         // while the user saying 'bye'
         if(Chat.END.equalsIgnoreCase(input))
             break;
         // do some respond..
         System.err.println("Alice>" + bot.respond(input));
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T13:16:55.440

Chatterbean 是一个不再受支持的旧 Java 程序。您应该在[https://code.google.com/p/program-ab/上安装较新的 Java AIML 2.0 库 Program AB](https://code.google.com/p/program-ab/)

# android - 不为空不工作并出现错误 close() 从未在数据库上显式调用

> ID：15419664
> 
> 赞同：0
> 
> 时间：2013-03-14T20:36:37.410
> 
> 标签：android, sqlite, notnull

有人可以帮忙吗。我一直在创建一个应用程序，到目前为止，我的数据已成功保存到数据库中，但是 not null 似乎根本不起作用，因为我可以提交空白值并且它们可以很好地保存到数据库中。我还收到一个数据库错误“close() 从未在数据库上显式调用”。

```
package com.example.tasksystemapp;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.HashSet;
import java.util.Set;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class MyDatabaseHelper extends SQLiteOpenHelper {

//singleton/ single instance reference of database instance
private static MyDatabaseHelper _dbHelper;

//The Android's default system path of your application database.
//private static String DB_PATH = "/data/data/YOUR_PACKAGE/";

private static String DB_PATH = "/data/data/com.example.tasksystemapp/";

//database name
private static String DB_NAME = "tasksystem.db";

//database version
private static int VERSION=1;
private final Context _context;

public MyDatabaseHelper(Context context)
{
    super(context, DB_NAME, null, VERSION);
    this._context = context;

}
public static MyDatabaseHelper getInstance(Context context)
{
    if(_dbHelper == null)
    {
        _dbHelper = new MyDatabaseHelper(context);
    }
    return _dbHelper;
}

public String createDataBase() throws IOException
{
    boolean dbExist = checkDataBase();
    if(dbExist)
    {
        //do nothing - database already exist
    }else{

        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            return (e.getMessage());

        }
    }

    return "database copied";

}

private boolean checkDataBase()
{
    SQLiteDatabase checkDB = null;

    try
    {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }catch(SQLiteException e)
    {
        //database does't exist yet.
    }
    if(checkDB != null)
    {
        checkDB.close();
    }

    return checkDB != null ? true : false;
}
public void copyDataBase() throws IOException
{
    //Open your local db as the input stream
    InputStream myInput = _context.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0)
    {
        myOutput.write(buffer, 0, length);
    }
    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

@Override
public void onCreate(SQLiteDatabase db) {

    db.execSQL("CREATE TABLE Contact (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                                      "lastname TEXT NOT NULL, firstname TEXT NOT NULL, email TEXT, " +
                                      "phone TEXT, address TEXT, city TEXT, postcode TEXT);");

    db.execSQL("CREATE TABLE Action (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                                        "Actiondescription TEXT);");

    db.execSQL("CREATE TABLE Autoreminder (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                                            "Autoreminderdescription TEXT, Autoremindate TEXT, Autoremintime TEXT);");

    db.execSQL("CREATE TABLE Priority (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                                        "Actionid INTEGER);");

    db.execSQL("CREATE TABLE Task (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                                        "Description TEXT NOT NULL, Priority TEXT, Duedate TEXT, Duetime TEXT " +
                                        "Completed INTEGER);");

    db.execSQL("CREATE TABLE User (_id TEXT PRIMARY KEY NOT NULL, " +
                                        "password TEXT NOT NULL, name TEXT NOT NULL, phoneno INTEGER);");

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

}

# c++ - boost program_option 不区分大小写的解析

> ID：15419665
> 
> 赞同：2
> 
> 时间：2013-03-14T20:36:47.770
> 
> 标签：c++, boost, boost-program-options

有没有人想出如何获得提升程序选项来解析不区分大小写的参数列表

在 boost 文档中，它似乎是受支持的。请参阅[http://www.boost.org/doc/libs/1_53_0/boost/program_options/cmdline.hpp](http://www.boost.org/doc/libs/1_53_0/boost/program_options/cmdline.hpp)

即设置 style_t 枚举标志，例如 long_case_insensitive。但是，我不知道该怎么做。例如，您将如何让以下代码片段接受 --Help 或 --help 或 --HELP

```
 po::options_description desc("Allowed options");
    desc.add_options()
        ("help", "produce help message")
        ("compression", po::value<double>(), "set compression level")
    ;

    po::variables_map vm;        
    po::store(po::parse_command_line(ac, av, desc), vm);
    po::notify(vm);    

    if (vm.count("help")) {
        cout << desc << "\n";
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T20:48:33.137

您可以在调用 store 时修改样式。我相信这应该对你有用：

```
namespace po_style = boost::program_options::command_line_style;

po::variables_map vm;        
po::store(po::command_line_parser(argc, argv).options(desc)
          .style(po_style::unix_style|po_style::case_insensitive).run(), vm);
po::notify(vm); 
```

# ruby-on-rails - 如何在rails 3中实时推送内容

> ID：15419667
> 
> 赞同：3
> 
> 时间：2013-03-14T20:36:51.497
> 
> 标签：ruby-on-rails, real-time, server-sent-events, observers

我想知道如何在我的网站中实时推送内容。我研究了一段时间，我意识到有很多方法可以完成这项工作。

首先要考虑一些事项：我有一个带有一些社交功能的 Rails 3 应用程序。我想要实现的功能之一是在创建新活动时通知我的用户。我的第一种方法是实现[SSE](http://www.html5rocks.com/en/tutorials/eventsource/basics/)和一个控制器，该控制器在上次加载活动后在数据库中搜索新注册表。

这可以工作，但是当我需要在创建新活动时将活动推送给所有活动用户（与该活动相关）时，这需要太多数据库查询，而无需进行数据库查询。

我的第二种方法是创建一个指向控制器的路由和一个观察者，以便在创建新活动时捕获，然后将创建的当前活动传递给控制器​​，最后通过 SSE 呈现活动部分。

我的问题来了..如何将观察者与控制器连接起来并将当前要渲染的活动传递给它？在那里，我可以使用另一种控制器类型，例如金属控制器甚至抽象控制器吗？

在这一点上，我意识到这可能是完成这项工作的另一种方法。如果我能找到一种方法来做到这一点而不必用另一种语言或框架开发它，那就太好了。我认为这应该有一个宝石这可以更轻松地完成实时应用程序.. 你觉得呢？我走在正确的道路上，或者我应该做些什么来实现这一目标？非常感谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T19:16:02.403

# Rails 3.0+ 使用 PubNub 实时推送内容

正如您所说，为了在您的网站或 Web 应用程序上使用某些社交功能安全可靠地向您的用户推送实时更新，有许多可用选项和许多细微差别也需要考虑。 **这有一个宝石！** 我将通过在此处为您的 Rails 3.0+ 应用程序和网站提供简单的入门指南来帮助您入门。首先，您需要运行`gem install pubnub`称为 PubNub 的实时组件，它允许您直接向目标用户或网站和应用程序上的一组用户发送通知。这允许您只针对那些在线并有兴趣从您的 Rails 服务器接收通知的人。您可以将其视为高效的服务器发送事件，不需要在您的服务器上进行数据库查找或其他资源密集型操作。

## Ruby GEM 安装

```
gem install pubnub 
```

### 需要 PubNub GEM

```
require 'pubnub' 
```

### 初始化 PubNub 类

```
pubnub = Pubnub.new(
    :publish_key   => 'demo', # publish_key only required if publishing.
    :subscribe_key => 'demo', # required always
    :secret_key    => nil,    # optional - message signing
    :cipher_key    => nil,    # optional - AES 256 Crypto
    :ssl           => true    # optional - SSL 2048bit
) 
```

### 从 Rails 3.0+ 向 Web 应用程序发送消息

现在从准备好类的 Rails 应用程序中`pubnub`，您可以发送任何类型的 JSON 数据类型，包括字符串、数字、数组和字典/对象：

*   一个“字符串”
*   123 号
*   一个数组 [ 1, 2, 3 ]
*   一个对象 { :a => "苹果" }

以下代码将向您展示将消息从 Rails 应用程序直接传递到用户正在运行的浏览器或 Web 应用程序的过程。当您需要直接从服务器发送数据时，本质上就是将数据发送给您的用户。该`pubnub.publish(...)`函数会将您发送的消息序列化为 JSON，以便传输到您的移动和 Web 应用程序。

```
## Broadcast or Unicast to Browser App User(s)
pubnub.publish(
    :channel  => "event_feed_channel",
    :message  => { :event => "update", :from => "Jay", :feed => "New Updates!" },
    :callback => lambda { |info| puts info }
) 
```

此过程非常适合性能和安全考虑，并且从不需要数据库查询；使您免于对数据库服务器和其他资源密集型操作进行重击。当您在 Rails 应用程序中使用 PubNub GEM 时， 您可以将此过程视为**SSE（服务器发送事件） 。**

使用 PubNub GEM，您实际上是*将事件*从服务器直接发送到用户的浏览器/应用程序。它消除了对客户端定期 AJAX 请求的需要。这是因为您仅在有新信息可用时才向用户发送数据。您还可以[考虑使用更多 PubNub 实时网络功能，例如 Presence 和 Storage/Playback](http://www.pubnub.com)，方法是访问主页以了解有关 Ruby 功能的更多详细信息。如果需要，还可以在集成到 Rails 代码期间[使用 Developers Dev Console进行调试。](http://www.pubnub.com/console)

### 设置浏览器以接收服务器发送的事件

接下来，您需要通过运行 init 并传入

```
<script src=http://cdn.pubnub.com/pubnub-3.4.2.min.js ></script>
<script>(function(){

    // Class Setup
    var pubnub = PUBNUB.init({ subscribe_key : 'demo' });

    // Event Hook Setup
    pubnub.subscribe({
        channel : "event_feed_channel",
        message : function(m){ pubnub.events.fire( m.event, m ) }
    });

    // RECEIVE the "update" Server Broadcast Event in the Browser
    pubnub.events.bind( "update", function(message) {
        console.log( "update a <div> with received event: ", m );
    } );

})();</script> 
```

> 请注意，您可能对[高级订阅连接选项和事件](https://github.com/pubnub/javascript#advanced-subscribe-connectivity-optionscallbacks)感兴趣。

注意`"update"`事件与**ruby**​​ 代码`:event => "update"`中的消息值是如何相同的。这意味着该事件将根据您提供的名称触发，您需要绑定该事件以触发代码以在您的 Web App 页面上执行。在此触发事件中，您将使用用户希望在其屏幕上实时看到的任何相关详细信息来更新用户界面。

 **还要注意`:channel => "event_feed_channel"`是`publish`通道，它必须与`subscribe`JavaScript 客户端代码中的通道相同。

如果您想阅读 Ruby GEM 的源代码，可以通过[GitHub PubNub 基于 Ruby 的 API](https://github.com/pubnub/ruby)获得。

这些是开始使用 Ruby 3.0+ 应用程序并将事件直接从服务器发送到最终用户的基础知识。请注意，这也适用于在 iOS Web 浏览器或 Android 浏览器上运行的移动应用程序。此机制还支持旧版本的 IE。此外，您可以选择考虑将服务器从 Rails 服务器直接发送到原生 iOS 应用程序和原生 Android 应用程序的事件。如果您有任何问题，请在此论坛上向他们提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T02:56:48.120

我已经构建了一个[实时 Rails gem](http://mikeatlas.github.io/realtime-rails/)和一个示例实时服务器 (node.js)，它可以轻松实现实时消息传递，而无需付费的第三方，例如 Pusher 或 PubNub。它适用于 Rails 3+。**

# c++ - 使用 COM 进行异常安全的内存处理

> ID：15419669
> 
> 赞同：10
> 
> 时间：2013-03-14T20:36:56.677
> 
> 标签：c++, com, atl, smart-pointers

使用 COM 时，我通常依赖 ATL 智能指针（如`ATL::CComPtr`和`ATL::CComBSTR`）来进行资源管理。但是我调用的一些方法使用输出参数来返回指向我必须释放的已分配存储的指针。例如：

```
WCHAR *pszName = nullptr;
if (SUCCEEDED(pShellItem->GetDisplayName(SIGDN_FILESYSPATH, &pszName))) {
  DoSomething(pszName);
  CoTaskMemFree(pszName);
} 
```

请注意，[`GetDisplayName`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761140%28v=vs.85%29.aspx)为字符串分配内存并通过输出参数返回指向它的指针。调用者有责任用`CoTaskMemFree`.

如果`DoSomething`抛出异常，那么上面的代码就会泄漏。我想使用某种智能指针`pszName`来避免这种泄漏，但是 API 需要`WCHAR**`，所以除了哑指针的地址之外，我看不到如何传递任何东西。由于我不是分配的人，我不能使用 RAII。

如果我可以制作这样的删除器，我*可以*使用 RRID：

```
struct CoTaskMemDeleter {
  void operator()(void *p) { ::CoTaskMemFree(p); }
}; 
```

然后立即将返回的指针分配给标准智能指针，如下所示：

```
WCHAR *pszName = nullptr;
if (SUCCEEDED(pShellItem->GetDisplayName(SIGDN_FILESYSPATH, &pszName))) {
  std::unique_ptr<WCHAR, CoTaskMemDeleter> guard(pszName);
  DoSomething(pszName);
} 
```

这行得通，但是引入一个额外的保护变量似乎很容易出错。例如，这种方法`pszName`指向已释放的内存，因此很容易意外再次使用它。

有没有更简洁的方法来使用智能指针或 RAII 包装器来分配由输出参数返回的 COM 服务器分配的内存？我错过了 ATL 提供的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T21:01:05.463

ATL 已经有这个开箱即用：

```
CComHeapPtr<WCHAR> pszName;
const HRESULT nResult = pShellItem->GetDisplayName(..., &pszName);
// Hooray, pszName will be CoTaskMemFree'd for you on scope leave 
// via ~CComHeapPtr 
```

`CHeapPtr`可以派生以类似的方式实现其他资源释放器。`CComHeapPtr`是一个[MSDN 文档类](http://msdn.microsoft.com/en-us/library/80zw33a6%28v=vs.110%29.aspx)。

# javascript - d3 x 轴标签输出为长字符串

> ID：15419670
> 
> 赞同：0
> 
> 时间：2013-03-14T20:37:00.390
> 
> 标签：javascript, d3.js

我正在尝试为我在 d3 中创建的 d3 堆叠直方图旋转我的 x 轴标签。所有标签要么显示为长字符串，要么全部重叠显示。

这是我的标签代码：

```
var shortNames = ["label1", "label2", "label3", "label4"];

// Add a label per experiment.
var label = svg.selectAll("text")
.data(shortNames)
.enter().append("svg:text")
.attr("x", function(d) { return x(d)+x.rangeBand()/2; })
.attr("y", 6)
.attr("text-anchor", "middle")
.attr("dy", ".71em")
.text(function(d) {return d})
.attr("transform", function(d) {    // transform all the text elements
return "rotate(-65)"            // rotate them to give a nice slope
}); 
```

我玩过翻译功能，所有标签仍然被视为一个长字符串。如何将翻译应用于每个单独的标签？

稍后我可以使用边距，但现在我想控制我的标签。

![x 轴标签问题说明](../Images/87f8ddb2ba3915c6fb966580e6c1eec4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:56:26.733

我认为问题在于变换的顺序：当你旋转文本时，你也在旋转它的坐标系。所以当你设置它的 x 位置时——即使你设置的位置早于旋转变换——你实际上是在沿着旋转产生的 65 度轴移动它。

如果我对此是正确的，那么检查标签会发现它们仍然由多个文本元素（每个标签一个）组成，而不是所有标签的一个文本元素。

通常，当您像为 所做的那样引入一个`transform`属性时`rotate`，您应该通过此属性进行所有转换。所以，你需要使用`translate`而不是使用`"x"`属性。然后它看起来像这样：

```
var label = svg.selectAll("text")
.data(shortNames)
.enter().append("svg:text")
// REOVE THIS: .attr("x", function(d) { return x(d)+x.rangeBand()/2; })
// AND THIS TOO: .attr("y", 6)
.attr("text-anchor", "middle")
.attr("dy", ".71em")
.text(function(d) {return d})
.attr("transform", function(d) {    // transform all the text elements
  return "translate(" + // First translate
    x(d)+x.rangeBand()/2 + ",6) " + // Translation params same as your existing x & y 
    "rotate(-65)"            // THEN rotate them to give a nice slope
}); 
```

# c# - 如何在文档的 iTextSharp 中设置特殊字符

> ID：15419676
> 
> 赞同：0
> 
> 时间：2013-03-14T20:37:24.663
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, itextsharp

我想从 ASP.NET MVC 创建 PDF。我找到了这个库（[http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3](http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3)），它对我有帮助。但是当我想打印像“ř”这样的特殊字符时，iTextShat 不会打印它。我发现，我必须使用

```
new Chunk("+ěščřžýáíé=", font); 
```

但我不知道如何在 BaseFont 上设置所有文档，而不仅仅是一个段落。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:03:26.257

我对东欧信件也有类似的问题。这是帮助我解决问题的一段代码：

```
string fontPath = String.Format("{0}\\{1}", Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "arial.ttf");
string title = "Some Title";

iTextSharp.text.Font fontTitle = iTextSharp.text.FontFactory.GetFont(fontPath, iTextSharp.text.pdf.BaseFont.CP1250, 22f);
iTextSharp.text.Paragraph paraTitle = new iTextSharp.text.Paragraph(title, fontTitle);
paraTitle.Alignment = iTextSharp.text.Element.ALIGN_CENTER;

document.Open();

document.Add(paraTitle); 
```

你感兴趣的是`fontTitle`变量。这是为国家页面 1250 创建基本字体的方法。您将指定自己的基本字体设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T10:15:06.933

您可以使用系统的 Fonts 文件夹准备一个新的 BaseFont：

```
string arialPath = Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\arial.ttf";
BaseFont arial = BaseFont.CreateFont(arialPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font myFont = new Font(arial, 12, Font.NORMAL);
new Chunk("+ěščřžýáíé=", myFont); 
```

# mysql - MySQL中有没有办法让一列只是对同一张表上另一列的引用？

> ID：15419677
> 
> 赞同：0
> 
> 时间：2013-03-14T20:37:31.453
> 
> 标签：mysql

MySQL中有没有办法让一列只是对同一张表上另一列的引用？

我正在处理一个没有命名约定的非常古老的 MySQL 数据库。我不能只重命名列，因为这会破坏很多代码。所以我认为如果我可以在名称不佳的列中添加一个“快捷方式列”然后互换使用它们会很酷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:43:00.520

我不确定您所说的“引用”是什么意思（举个例子就好了），但是……在 SQL 语句中，您可以多次定义同一列并为列名指定一个别名。

像这样的东西：

```
SELECT *, [this_is_a_really_bad_name] as myNewName FROM MyTable 
```

假设该表`MyTable`有设计糟糕的列`this_is_a_really_bad_name`，您现在可以通过它的旧名称或作为引用该列`myNewName`

这就是你想要达到的目标吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:45:28.413

您是否考虑[过创建视图](http://dev.mysql.com/doc/refman/5.6/en/create-view.html)？

```
CREATE VIEW view_name 
AS SELECT *, bad_name as New_name
FROM table 
```

# batch-file - 使用批处理文件在另一台服务器中查找文件

> ID：15419678
> 
> 赞同：0
> 
> 时间：2013-03-14T20:37:32.387
> 
> 标签：batch-file

我正在尝试使用 .bat 在另一台服务器中查找文件。但是，这个文件夹只共享给我的帐户，而不是所有人。

```
@ECHO OFF
IF EXIST "\\server\NewFolder\folder.txt" (
ECHO "YES"
) ELSE (
ECHO "NO"
) 
```

这是可行的，但仅限于“每个人共享”。

还有另一种方式或东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:22:32.073

好吧，我从另一台服务器做了一个映射网络驱动器。这是解决它的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:47:13.717

使用 NET USE 在命令提示符下访问 UNC。你必须使用一个`net use "\\server\path"`

# java - 重构扫描文件夹类（添加 AllwaysPassesBlocker()）

> ID：15419681
> 
> 赞同：0
> 
> 时间：2013-03-14T20:37:42.853
> 
> 标签：java, refactoring

我需要创建一个新的构造函数，`FolderScan`其中包含一个**"Checkers"**列表。所有这些“检查器”总是`return true`（应该编写新的**检查器**列表，它只返回 true。）
但问题是我不知道如何做到这一点并且不分解程序的结构。

**代码（FolderScan 和每个 Cheker）：**

```
class FolderScan implements Runnable {

    FolderScan(String path, BlockingQueue<File> queue, CountDownLatch latch,
            File endOfWorkFile) {
        this.path = path;
        this.queue = queue;
        this.latch = latch;
        this.endOfWorkFile = endOfWorkFile;

        checkers = new ArrayList<Checker>(Arrays.asList(
                new ExtentionChecking(),  new ProbeContentTypeCheking(), 
                new EncodingChecking() ));
    }

        @Override
public void run() {
    try {
        findFiles(path);
        queue.put(endOfWorkFile);
        latch.countDown();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}

    private void findFiles(String path) {

    try {
        File root = new File(path);
        File[] list = root.listFiles();
        for (File currentFile : list) {
            boolean checksPassed = true;
            if (currentFile.isDirectory()) {
                findFiles(currentFile.getAbsolutePath());
            } else {
                for (Checker currentChecker : checkers) {
                    if (!currentChecker.check(currentFile)) {
                        checksPassed = false;
                        break;
                    }
                }

                if (checksPassed) {
                    queue.put(currentFile);
                }
            }
        }
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    private String path;
    private BlockingQueue<File> queue;
    private CountDownLatch latch;
    private File endOfWorkFile;
    private List<Checker> checkers;
}

class ExtentionChecking implements Checker {

    @Override
    public boolean check(File currentFile) {
        fileName = currentFile.getName().toLowerCase();
        Set<String> extensions = new HashSet<String>(Arrays.asList(".txt",
                ".pdf", ".doc", ".docx", ".html", ".htm", ".xml", ".djvu",
                ".djv", ".rar", ".rtf", ".tmp"));

        if (extensions.contains(fileName.substring(fileName.lastIndexOf(".")))) {
            return true;
        }

        return false;
    }

    private String fileName;
}

class EncodingChecking implements Checker {

    @Override
    public boolean check(File currentFile) {
        return detectEncoding(currentFile);
    }

    public static boolean detectEncoding(File file) {
        detector = new CharsetDetector();

        // validate input
        if (null == file) {
            throw new IllegalArgumentException("input file can't be null");
        }
        if (file.isDirectory()) {
            throw new IllegalArgumentException(
                    "input file refers to a directory");
        }

        // read input file
        byte[] buffer;
        try {
            buffer = readUTFHeaderBytes(file);
        } catch (IOException e) {
            throw new IllegalArgumentException(
                    "Can't read input file, error = " + e.getLocalizedMessage());
        }

        if(detector.setText(buffer) != null){
            return true;
        }

        return false;
    }

    private static byte[] readUTFHeaderBytes(File input) throws IOException {
        // read data
        FileInputStream fileInputStream = new FileInputStream(input);
        try {
            byte firstBytes[] = new byte[50];
            int count = fileInputStream.read(firstBytes);
            if (count < 5) {
                throw new IOException("Poor file!");
            }
            return firstBytes;
        } finally {
            fileInputStream.close();
        }
    }

    private static CharsetDetector detector;
}

class ProbeContentTypeCheking implements Checker {

    @Override
    public boolean check(File currentFile) {
        String mimeType = null;
        try {
            Path path = Paths.get(currentFile.getAbsolutePath());
            byte[] data = Files.readAllBytes(path);
            MagicMatch match = Magic.getMagicMatch(data);
            mimeType = match.getMimeType();
        } catch (MagicParseException | MagicMatchNotFoundException
                | MagicException | IOException e) {
            e.printStackTrace();
        }

        if (null != mimeType) {
            return true;
        }

        return false;
    }
} 
```

**问题：**

*   如何重构此代码 - 在此之后能够使`new AllwaysPassesBlocker()`所有**Checers**返回 true？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:07:26.443

始终返回 true 的检查器将是

```
class UncriticalChecker implements Checker {
    @Override
    public boolean check(File currentFile) {
        return true;
    }
} 
```

但是，将这样的检查器添加到检查器列表中是没有意义的。您不妨将列表留空。

我不太明白为什么要在 FolderScan 的构造函数中构造检查器。将它们作为参数传递给构造函数似乎更自然。

```
FolderScan(String path, BlockingQueue<File> queue, CountDownLatch latch,
        File endOfWorkFile, List<Checker> checkers) {
    this.path = path;
    this.queue = queue;
    this.latch = latch;
    this.endOfWorkFile = endOfWorkFile;
    this.checkers = checkers;
} 
```

然后，当您初始化 FolderScan 时，将检查器传递给它

```
List<Checker> checkers = new ArrayList<Checker>(Arrays.asList(
            new ExtentionChecking(),  new ProbeContentTypeCheking(), 
            new EncodingChecking() ));
FolderScan folderScan = 
    new FolderScan(path, queue, latch, endOfWorkFile, checkers); 
```

或者，如果您希望创建一个返回所有文件的 FolderScan，则向其传递一个空列表。

```
FolderScan folderScan =
    new FolderScan(path, queue, latch, endOfWorkFile, Collections.emptyList()); 
```

编辑：我现在了解到您希望测试课程。那么 UncriticalChecker 就有意义了。如果您想使用始终显示“是”的检查器来测试代码，请将其传递给构造函数：

```
List<Checker> checkers = Collections.singletonList(new UncriticalChecker());
FolderScan folderScan = 
    new FolderScan(path, queue, latch, endOfWorkFile, checkers); 
```

# php - 有 2 个自动递增列或匹 配列数据？

> ID：15419684
> 
> 赞同：0
> 
> 时间：2013-03-14T20:37:53.637
> 
> 标签：php, mysql

我有一个名为 ptb_users 的表，它看起来像这样：

```
user_id   |   id (auto increment)  |  name   | email
0                    1               john     john@example.com
0                    2               kate     kate@example.com
0                    3               harry    harry@example.com
0                    4               lisa     lisa@example.com 
```

基本上我正在运行查询以将数据插入到表中，如下所示：

```
$query="INSERT INTO ptb_users (user_id,
id,
first_name,
last_name,
email )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."'
)";
mysql_query($query) or die(); 
```

id 是自动增量，但我也希望 user_id 是自动增量，可以这样做吗？或者我可以设置一个查询，说明复制 id 中存在的值并将其设置在 user_id 中？

我真的很感激任何帮助，谢谢。

# shiro - 验证后 Apache Shiro 将我带回登录页面

> ID：15419686
> 
> 赞同：2
> 
> 时间：2013-03-14T20:37:54.943
> 
> 标签：shiro

我正在我的 Web 应用程序中用 Apache Shiro 替换 Siteminder。我注意到 shiro 成功登录并带我进入主页。当我单击主页上的任何其他链接时，我将返回登录页面。我再次登录，我被转发到我想要转到的页面。我怎样才能解决这个问题？

这是我的 shiro.ini

```
[main]
authc.loginUrl = /login.jsp
ssl.enabled=false

[users]
user=admin

[urls]
/css/** = anon
/images/** = anon
/js/** = anon
/login.jsp = authc
/logout = logout
/** = authc 
```

我的 web.xml 中的一个部分

```
<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>       
</filter>

<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher> 
    <dispatcher>FORWARD</dispatcher> 
    <dispatcher>INCLUDE</dispatcher> 
    <dispatcher>ERROR</dispatcher>      
</filter-mapping> 
```

在我的用户类中打印出 currentUser.isAuthenticated() 显示“真”。

我可以提供任何其他信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:21:52.380

我认为问题与在 shiro.ini 文件中您没有强制执行 SSL 的事实有关：

```
ssl.enabled=false 
```

但是，在 weblogic.xml 文件中，您正在为 cookie 实施 SSL：

```
<session-param>     
<param-name>CookieSecure</param-name>
<param-value>true</param-value>
</session-param> 
```

因此，我的建议是将 shiro.ini 更改为：

`ssl.enabled=true`

并保留原始 weblogic.xml 文件。

这样，您将只接受通过 SSL 进行身份验证的用户（这是一个很好的做法）。

请让我知道结果。

谢谢法比奥@fcerullo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:01:35.347

您的配置看起来几乎与[Shiro 示例 Web 应用程序](http://svn.apache.org/repos/asf/shiro/trunk/samples/web/)完全相同（实际上，使用 authc.loginUrl 而不是示例应用程序使用的已弃用的全局“shiro.loginUrl”，您的配置会更好）。示例应用程序没有表现出您所看到的行为。

这让我相信其他东西（另一个过滤器？）给你带来了问题。您是否有一个可以展示问题的小示例应用程序（可能在 Github 上）？如果可以重新创建，我很乐意看看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:20:12.417

我弄清楚发生了什么事。我的应用程序部署在 Weblogic 上，并且我在 weblogic.xml 中有以下部分，这导致了问题。删除它，修复它。知道为什么会这样吗？

```
<session-param>     
<param-name>CookieSecure</param-name>
<param-value>true</param-value>
</session-param> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-12T22:17:04.780

我经历过同样的行为，但我使用的是 Wildfly 10.0.0 和 apache shiro v 1.3.2。

我在[这篇 Jboss 论坛](https://developer.jboss.org/thread/243192)文章中找到了解决方案。

将 cookie 名称设置为`JSESSIONID`其他名称可以解决此问题。

此处提供的解决方案是在 shiro.ini 中添加以下内容

```
sessionManager = org.apache.shiro.web.session.mgt.DefaultWebSessionManager
cookie = org.apache.shiro.web.servlet.SimpleCookie
cookie.name = shiro.session.id
sessionManager.sessionIdCookie = $cookie 
```

这对我有用。

# php - phunit 如何处理有关需求/包含的多个文件？

> ID：15419690
> 
> 赞同：1
> 
> 时间：2013-03-14T20:38:12.153
> 
> 标签：php, unit-testing, phpunit

我打电话`phpunit`的参数是一个目录（额外的问题：为什么它不能接受文件列表？）现在它抱怨一个类被多次声明，因为*前面*的测试中包含一个文件！

如果我运行`phpunit firstTest.php; phpunit secondTest.php`一切正常

但`phpunit ./`失败了`PHP Fatal error: Cannot redeclare class X`

我的测试基本上是：

```
include 'class_to_be_tested.php'
class class1Test extends... 
```

没有别的了。我正在使用该选项`--process-isolation`。我可以添加`require_once` 我的课程，但这不是我希望能够单独测试它们的内容。

phpunit 不应该遵循最佳测试实践并运行一个测试，清除它所拥有的任何垃圾，在干净状态下运行另一个测试吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:08:47.093

由于您的`include`问题`include_once`中没有显示其他代码，因此无法重新声明错误也可能是您在被测代码的某个位置再次包含该文件。

假设情况并非如此，那么在幕后发生的一些事情`--process-isolation`可以保留全局类声明。这篇博文提供了更多细节： http: [//matthewturland.com/2010/08/19/process-isolation-in-phpunit/](http://matthewturland.com/2010/08/19/process-isolation-in-phpunit/)

基本上，您将需要创建自己的基础`TestCase`并覆盖将`run()`方法设置`preserveGlobalState`为`false`. 这应该正确地允许您的所有测试一起运行。

基类看起来与此类似（摘自我提到的博客文章）：

```
class MyTestCase extends PHPUnit_Framework_TestCase
{
    public function run(PHPUnit_Framework_TestResult $result = NULL)
    {
       $this->setPreserveGlobalState(false);
       return parent::run($result);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:38:26.250

改变：

```
include 'class_to_be_tested.php';
class class1Test extends... 
```

成为：

```
include_once 'class_to_be_tested.php';
class class1Test extends... 
```

在 PHP 中，您需要有一个非常好的理由才能使用前者。

关于*为什么它不能接受文件列表？*，我认为设计决定是您通常不需要。但是，您可以通过在 phpunit.xml.dist 文件中创建一个测试套件来做到这一点，请参阅 [http://www.phpunit.de/manual/current/en/organizing-tests.html#organizing-tests.xml-configuration](http://www.phpunit.de/manual/current/en/organizing-tests.html#organizing-tests.xml-configuration)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:51:24.303

phpUnit 的工作方式意味着您的所有测试都在单个 php 程序的上下文中运行。phpUnit 旨在将测试彼此隔离，但它们都在同一个程序执行中运行。

PHP 的`include`语句将包含所请求的文件，而不管它之前是否被包含过。这意味着，如果你`include`给定的课程两次，第二次你会得到一个错误。这发生在您的测试中，因为每个测试都包含相同的文件，但没有考虑它是否已被其他测试之一包含。

解决方案：

*   用 a包装您的`include`调用，`if(class_exists('classname'))`以便在已定义类的情况下不包含该文件。

*   将文件包含在 phpUnit 引导文件中，而不是包含在测试中。

*   使用`include_once`（甚至`require_once`）代替`include`.

*   停止任意包含文件，并开始使用自动加载器。

# java - touchlistener 的代码错误 - Android

> ID：15419691
> 
> 赞同：0
> 
> 时间：2013-03-14T20:38:15.443
> 
> 标签：java, android, tic-tac-toe

我是 Android 的新手，我在使用在线教程后的 TicTacToe 游戏的 touchListener 代码块时遇到了问题。

我不断收到的错误是：

运算符 && 未定义参数类型 boolean, void

以下代码位于 MainActivity.java 中。我在下面用星号突出显示的行上收到此错误：

```
 // Listen for touches on the board
private OnTouchListener mTouchListener = new OnTouchListener() { 
public boolean onTouch(View v, MotionEvent event) { 
// Determine which cell was touched 
int col = (int) event.getX() / mBoardView.getBoardCellWidth(); 
int row = (int) event.getY() / mBoardView.getBoardCellHeight(); 
int pos = row * 3 + col; 
    if (!mGameOver && setMove(TicTacToeGame.HUMAN_PLAYER, pos)) { //*****************

    // If no winner yet, let the computer make a move
    int winner = mGame.checkForWinner();
    if (winner == 0) { 
        mInfoTextView.setText(R.string.turn_computer); 

        setMove(TicTacToeGame.COMPUTER_PLAYER, pos);
        winner = mGame.checkForWinner();
    }   

 } 
return false; 
 } 
}; 
```

我认为这是因为 setMove() 在 TicTacToeGame.java 中是无效的：

```
public void setMove(char player, int location) {
    if (location >= 0 && location < BOARD_SIZE &&
        mBoard[location] == OPEN_SPOT) {
        mBoard[location] = player;

    }

} 
```

我完全按照教程[http://www.harding.edu/fmccown/classes/comp475-s10/tic-tac-toe-graphics.pdf](http://www.harding.edu/fmccown/classes/comp475-s10/tic-tac-toe-graphics.pdf)

我将非常感谢任何帮助。

非常感谢，

贝丝安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:41:05.327

在您链接到的 PDF 中，`setMove()`有一个布尔返回类型（第 5 页，顶部）：

```
private boolean setMove(char player, int location) { 
    if (mGame.setMove(player, location)) { 
        mBoardView.invalidate(); // Redraw the board
        if (player == TicTacToeGame.HUMAN_PLAYER) 
            mHumanMediaPlayer.start(); 
        else
            mComputerMediaPlayer.start(); 
        return true; 
    } 
    return false; 
} 
```

# android - Android服务位置监听器未激活

> ID：15419694
> 
> 赞同：3
> 
> 时间：2013-03-14T20:38:24.357
> 
> 标签：android, service, intervals, locationlistener

我已经实现了一个启动时启动的 android 服务： `MyService.java`

```
package com.example.testservicelogging;

import com.example.testservicelogging.MyBroadcastReceiver;

import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.widget.Toast;

public class MyService extends Service implements LocationListener {

    LocationManager lm;
    PendingIntent pendingIntent;
    LocationListener locationListener;

    public MyService() {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
      public int onStartCommand(Intent intent, int flags, int startId) {
        //TODO do something useful
        //Toast.makeText(getBaseContext(), "Got in!!!", Toast.LENGTH_SHORT).show();
        System.out.println("Got in");

         Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();        

            //---use the LocationManager class to obtain locations data---
            lm = (LocationManager)
                    getSystemService(Context.LOCATION_SERVICE);

            Intent i = new Intent(this, MyBroadcastReceiver.class);
            pendingIntent = PendingIntent.getBroadcast(
                    this, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);

          //---request for location updates using GPS---
            lm.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER,
                    6000,
                    5,
                    pendingIntent);     

        return START_STICKY;
      }

    @Override
    public void onDestroy() {
        //---remove the pending intent---
        lm.removeUpdates(pendingIntent);

        super.onDestroy();
        Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();        
    }

    @Override
    public void onLocationChanged(Location arg0) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "onLocationChanged", Toast.LENGTH_LONG).show();   

    }

    @Override
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "onProviderDisabled", Toast.LENGTH_LONG).show();   

    }

    @Override
    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "onProviderEnabled", Toast.LENGTH_LONG).show();   

    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub
        Toast.makeText(this, "onStatusChanged", Toast.LENGTH_LONG).show();   

    }

} 
```

也是一个`BroadcastReceiver`类：

```
package com.example.testservicelogging;

import java.io.IOException;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationManager;
import android.util.Log;
import android.widget.Toast;

public class MyBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        Intent t=new Intent(context, MyService.class);
        t.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startService(t);

        String locationKey = LocationManager.KEY_LOCATION_CHANGED;
        String providerEnabledKey = LocationManager.KEY_PROVIDER_ENABLED;

        //Toast.makeText(context, "INSIDE!!!", Toast.LENGTH_SHORT).show(); 
        System.out.println("INSIDE");

        if (intent.hasExtra(providerEnabledKey)) {
            if (!intent.getBooleanExtra(providerEnabledKey, true)) {
                Toast.makeText(context,
                        "Provider disabled",
                        Toast.LENGTH_SHORT).show();              
            } else {
                Toast.makeText(context,
                        "Provider enabled",
                        Toast.LENGTH_SHORT).show();
            }
        }

        if (intent.hasExtra(locationKey)) {
            Location loc = (Location)intent.getExtras().get(locationKey);
            Toast.makeText(context,
                    "Location changed : Lat: " + loc.getLatitude() +
                    " Lng: " + loc.getLongitude(),
                    Toast.LENGTH_SHORT).show();

            //do something with the coordinates returned

        }

    }

} 
```

我面临一些问题：

1.  （也是最重要的）：启动时加载服务，但即使我看到 GPS 图标闪烁，它也永远不会返回坐标！！！我做错了什么？？
2.  我想以预定义的时间间隔获取坐标（例如，每天从 08:00 到 18:00 每 15 分钟一次）。我该如何实施？
3.  即使我提高了 100000 毫秒和 500 距离来激活 requestLocationUpdates，即使我保持不动，它有时也会每 2-5 秒运行一次！！！我该如何克服呢？

非常感谢你的帮助 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:06:35.850

您正在请求位置更新并提供`PendingIntent`在位置更新发生时应广播的内容。但是，您的服务也是`implements LocationListener`如此，看起来您可能有点困惑。我不确定您到底想在这里做什么，但首先我会让您的服务直接获取回调。在这种情况下，您不需要`BroadcastReceiver`并且您应该更改它：

```
//---request for location updates using GPS---
lm.requestLocationUpdates(
    LocationManager.GPS_PROVIDER, 6000, 5, pendingIntent); 
```

对此：

```
//---request for location updates using GPS---
lm.requestLocationUpdates(
    LocationManager.GPS_PROVIDER, 6000, 5, this); 
```

这将导致位置服务定期回调您已经在服务类（ ， 等）中实现`onLocationChanged()`的`onProviderEnabled()`方法

此外，您为 minTime 和 minDistance 提供的参数非常小。6000 的 minTime 是 6 秒，minDistance 是 5 米。这将导致 GPS 不断消耗电池电量，因此您可能需要重新考虑这些参数。

我建议您尝试一下并添加一些日志记录以查看会发生什么。我建议使用日志框架（即：`Log.v()`and`Log.e()`等）并查看 logcat 而不是尝试使用 toast。Toast 对于调试来说是非常不可靠的。

此外，所有设备上的位置服务实现方式都不同。每个制造商都提供自己的实施方案，它们在可靠性、稳健性和操作特性方面差异很大。没有办法可靠地坚持以特定间隔或特定时间进行 GPS 更新。您所能做的就是向操作系统提供有关您想要的内容的适当**提示。**无论您指定的参数如何，位置框架都会随时给您回电。您只需要了解这一点并相应地编写代码。

如果您想每 15 分钟获取一次更新，您可以指定 15 分钟 minTime（其值为 15 * 60 * 1000），或者您可以每 15 分钟使用警报管理器安排一次唤醒警报，并在警报响起时关闭后，您可以立即请求位置更新（尽管您可能需要一些时间才能获得它们）。

希望我已经为您提供了足够的材料，以便您可以在这里取得一些进展。如果您需要更多帮助，请随时添加评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:06:47.270

根据您的需要，确保将其中任何一个添加到清单中：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

# ruby-on-rails - rails 需要本地文件

> ID：15419695
> 
> 赞同：1
> 
> 时间：2013-03-14T20:38:39.037
> 
> 标签：ruby-on-rails, require

我有rails项目。我想从 ParserPlagin 类（路径：“app/controllers/admin/parser_plugin.rb”）向 MainParserPlugin 类（路径：app/controllers/admin/main_parser_plugin.rb”）添加代码

main_parser_plugin.rb：

```
 require 'parser_plugin'
 class Admin::MainParserPlugin < ApplicationController
    #Some code 
 end 
```

但出现错误：无法加载此类文件--parser_plugin

你能告诉我我必须走哪条路，才能把它做好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:04:57.823

在其中`config/application.rb`，您需要通过添加以下行来添加任何`app/models`子目录`autoload_path`：

`config.autoload_paths += Dir["#{config.root}/app/models/**/"]`

# c# - 用户主账户代表子账户发送短信

> ID：15419700
> 
> 赞同：1
> 
> 时间：2013-03-14T20:39:04.047
> 
> 标签：c#, sms, twilio, accounts

我正在为我们的产品开发一项功能，允许用户通过 Twilio 发送 SMS 消息，我们处理所有帐户问题。我们有我们的主账户，我们所有的客户都将是我们的子账户。

为了不必跟踪 1000 多个身份验证令牌，我们决定使用我们的主帐户凭据来发送 SMS 消息，但我们仍然希望它在子帐户下汇总。根据 Twilio 的说法，这应该不是问题。

我的问题是他们提供的 c# 库的文档很少（我发现）。我不确定我所做的是否是完成上述内容的正确方法，并且由于我处于试用帐户，直到项目完成并且可以投入生产，我无法进行测试。

```
 var twilio = new TwilioRestClient("Master SID", "Master Auth Token");
        var response = twilio.SendSmsMessage(sender, recipient.ConvertToE164Format(), message, null, "Subaccount SID"); 
```

如果在这里传递子帐户 SID 是否会发送消息，就好像我已经登录到他们的帐户并发送它一样，关于此重载的评论并不清楚。

```
 //   applicationSid:
    //     Twilio will POST SmsSid as well as SmsStatus=sent or SmsStatus=failed to
    //     the URL in the SmsStatusCallback property of this Application. If the StatusCallback
    //     parameter above is also passed, the Application's SmsStatusCallback parameter
    //     will take precedence. 
```

所有帐户的回调 url 都相同，因此我不需要/关心该值。

简短版：如果我使用主帐户详细信息登录，但在 SendSmsMessage() 方法中传递子帐户 SID，则消息来自哪个帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:30:35.820

Twilio 支持最终回复了我，并证实了我对这行不通的担忧。我确实必须拉下子帐户信息并使用新凭据重新实例化 twilioRestClient，我希望我可以侥幸不这样做。只是多出几行。

```
 var twilio = new TwilioRestClient("Master SID", "Master Auth Token");
        var subAccount = twilio.GetAccount("SubAccount SID");
        var subAccountClient = new TwilioRestClient(subAccount.Sid, subAccount.AuthToken);
        var response = subAccountClient.SendSmsMessage(sender, recipient.ConvertToE164Format(), message);

        return response.Sid; 
```

# jsf - JSF2.0 如何在使用命令按钮时将 viewParam 传递给请求范围的支持 bean？

> ID：15419701
> 
> 赞同：4
> 
> 时间：2013-03-14T20:39:05.810
> 
> 标签：jsf, facelets, omnifaces

我有以下页面：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:thehub="http://java.sun.com/jsf/composite/components/thehub"
    template="/templates/masterTemplate.xhtml">
    <f:metadata>
        <f:viewParam
            id="returnToViewParam"
            name="returnTo"
            value="#{loginMB.returnTo}"
            required="true" />
        <f:viewParam
            id="oauth_verifierViewParam"
            name="oauth_verifier"
            value="#{loginMB.oauth_verifier}" />
        <f:viewParam
            id="oauth_tokenViewParam"
            name="oauth_token"
            value="#{loginMB.oauth_token}" />
        <f:event
            type="preRenderView"
            listener="#{loginMB.preRenderView()}" />
    </f:metadata>

    <ui:define name="body">
        <o:form
            id="loginForm"
            includeViewParams="true">
            <div class="form-vertical well">
                <h4>New Users</h4>
                <h5>
                    <h:link outcome="signup">Click here to create an account</h:link>
                </h5>
                <hr />
                <h4>Existing Users</h4>
                <h:commandButton
                    id="googleLoginCommandLink"
                    styleClass="btn"
                    action="#{loginMB.redirect()}"
                    value="Google">
                    <f:param
                        name="returnTo"
                        value="#{param.returnTo}" />
                </h:commandButton>
                <div class="clearfix"></div>
            </div>
        </o:form>
    </ui:define>
</ui:composition> 
```

以及以下 bean：

```
@ManagedBean
@RequestScoped
public class LoginMB implements Serializable {
private static final long serialVersionUID = 1L;

private String returnTo;

public void redirect() {
    log.debug("redirect() returnTo:{}", returnTo);

......getter/setters
} 
```

无论我做什么，一旦单击命令按钮，我似乎都无法获得 returnTo 绑定。由于这是一个登录页面，我真的 *不想*让 LoginMB 成为 @ViewScoped bean。

建议？有没有更好的方法来处理这种情况？

编辑：

*   我在 MyFaces 2.1.10 提供的 TomEE+ Server v1.5.1 上运行它
*   添加了整页
*   澄清问题：在`redirect()`函数内部，returnTo 为 null

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T22:01:23.720

你`<f:metadata>`在外面`<ui:define>`，因此被完全忽略。将一个添加`<ui:insert name="metadata">`到主模板并放入模板客户端的`<f:metadata>`内部`<ui:define name="metadata">`。

### 也可以看看：

*   [使用 <ui:composition> 模板时，我应该在哪里声明 <f:metadata>？](https://stackoverflow.com/questions/9856847/where-is-the-best-place-for-the-fmetadata-element/9857186#9857186)

* * *

修复该问题后，您可以安全地`<f:param>`从命令按钮中删除 。这项工作已经由 完成`<o:form includeViewParams="true">`。如果您没有它，那么`<f:param>`确实是强制性的，您需要以相同的形式在所有命令链接和按钮上复制粘贴相同的内容。

# php - 在 5 次不成功的登录尝试中阻止用户

> ID：15419704
> 
> 赞同：-3
> 
> 时间：2013-03-14T20:39:11.880
> 
> 标签：php

我需要在 5 次登录尝试失败后阻止用户。我有一个名为“login_attempts”的表，它有 3 列“userid”、“user”、“attempts”。我还有一个 .php 脚本，它检查用户的凭据，如“用户名”和“密码”，如果用户输入的密码不正确，他/她将有 5 次机会。现在可能一切正常，即使数据也保存在“login_attempts”表中，但在 5 次不成功的登录尝试后，我需要阻止用户 15 分钟……这是怎么做到的……请帮忙。我有 2 个单独的文件“process.php”和“login.php”。请指导我...</p>

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:44:16.100

在 login_attempts 表中添加一个时间戳字段，用于跟踪用户上次尝试登录的时间以及尝试次数。当您对用户进行身份验证时，请检查尝试次数字段是否为 5 或更多，以及他/她上次尝试登录的时间。如果上次尝试时间少于 15 分钟，则拒绝该请求。当用户成功登录时，不要忘记重置计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:43:13.013

一种可能的解决方案是向名为 next_available_retry_time 的数据库添加另一个字段（或任何您喜欢的字段）。当尝试次数 == 5 时，将 next_available_retry_time 设置为未来 15 分钟，并将尝试次数重置为 0（因此它可以重新启动）。

然后在您的代码中，在您测试用户名、密码之前，检查 now() > next_available_retry_time。如果不是，则拒绝登录尝试。否则，继续您现有的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:43:19.487

我会在 login_attempts 表中为 last_attempt 添加一列，然后在您进行身份验证时添加一个检查以查看是否

```
attempts > 5
last_attempt in the past 15 minutes 
```

如果这两个都为真，则不允许用户登录

如果 last_attempt 超过 15 分钟，则将尝试次数重置为 1 并再次尝试进行身份验证

抱歉伪代码，希望它有帮助。

# sql - SQL 舍入到 2 位小数

> ID：15419708
> 
> 赞同：0
> 
> 时间：2013-03-14T20:39:40.650
> 
> 标签：sql, sql-server-2008, rounding

这应该是一件容易的事，但它让我在拐弯处

我有一个非常简单的查询，例如

```
select a, b, c
from DataTable 
```

它总是产生 6 位小数，但我想更改显示的小数位数以及每个字段显示的小数位数。目前我得到以下信息：

```
a        b        c
1.000000 2.123456 3.123456 
```

我想要以下内容：

```
a  b    c
1  2.12 3.123 
```

字段 a、b、c 在表中定义为十进制 (18,4)，我使用的是 SQL Server 2008。

我尝试使用`round(b,2)`但始终保留 6 位小数。

我试过`floor(a)`了，但它会将所有结果（a，b，c）更改为没有小数。

关于这种奇怪行为的任何想法？

# codeigniter - 能够显示资产

> ID：15419710
> 
> 赞同：0
> 
> 时间：2013-03-14T20:39:41.620
> 
> 标签：codeigniter, assets, hmvc

我正在开发一个项目，该项目将 HMVC 结构用于我的 codeigniter 项目，并使用资产和模板库来处理不同的资产、模板和主题。它来自 PyroCMS 的库。截至目前，我正在硬编码我的价值观。

我的文件结构和 PyroCMS 的文件结构之间确实存在一些差异，因为它们的系统文件夹中有一个文件夹，用于存放所有应用程序文件。

```
Asset::add_path('theme', APPPATH . 'themes/mythem/assets/');
Asset::set_path('theme'); 
```

当我为我正在使用的当前主题的页面回显资产时，它显示为

```
http://dev.mysite.com/application/themes/mytheme/assets/css/bootstrap/bootstrap.css 

application/
    themes/
        mytheme/
            assets/
                css/
                    whatever.css
assets/
    cache/
system/
public_html/
    index.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:42:45.320

您无法直接访问应用程序文件夹。

**编辑**

您可以直接访问应用程序文件夹，但您确实不应该这样做。它不安全，因为它允许直接访问您的逻辑文件（控制器、模型等）。参考这个问题：[CodeIgniter + CSS](https://stackoverflow.com/questions/8848297/codeigniter-css)

将您的资产文件夹粘贴到应用程序之外并将其添加到您的 .htaccess 文件中：

```
RewriteCond $1 !^(assets|other_toplevel_folders) 
```

# jquery - jQuery 动画位置在 Firefox 中固定不准确

> ID：15419711
> 
> 赞同：2
> 
> 时间：2013-03-14T20:39:42.740
> 
> 标签：jquery, firefox, jquery-animate, position, fixed

我在使用 jQuery 为 Firefox 中固定位置的 div 设置动画时遇到问题。有一个 div 应该在单击关闭链接时部分远离屏幕，并在单击打开链接时向后移动。动画在 Chrome 和 Opera 中运行良好，但在 Firefox 中移动到稍微不同的位置。好像动画不完整。结果，打开和关闭链接在动画之后是不可见的，因为它们仍然位于浏览器窗口边框的后面。

火狐版本：19.0.2 jQuery 版本：1.9.1

jQuery代码：

```
$(document).ready(function(){
    $("#calc_close").click(function(){
        $("#calc").animate({right:'-121px'});
        $("#calc_open").show();
        $("#calc_close").hide();
        $("#state").val("2");
        $.post('calc_state_update.php', $('#calc_op_form').serialize());
        });
    $("#calc_open").click(function(){
        $("#calc").animate({right:'0px'});
        $("#calc_open").hide();
        $("#calc_close").show();
        $("#state").val("1");
        $.post('calc_state_update.php', $('#calc_op_form').serialize());
        });
    }); 
```

HTML 代码：

```
<div id="calc" class="<?php if($calc == 1){ echo 'calc_opened'; } else { echo 'calc_hidden'; } ?>">
        <h4>Title</h4>
        <p>
            Some text in Czech :)           
        </p>
        <p>
            Click here...           
        </p>
        <div id="calc_open" class="<?php if($calc == 1){ echo 'calc_op_hidden'; } else{ echo 'calc_op_visible'; } ?>"><a href="#" title="Zobrazit okno">&laquo;</a></div>           
        <div id="calc_close" class="<?php if($calc == 1){ echo 'calc_op_visible'; } else{ echo 'calc_op_hidden'; } ?>"><a href="#" title="Skrýt okno">&raquo;</a></div>
    <form id="calc_op_form" method="POST" action="calc_state_update.php">
        <input type="hidden" name="state" id="state" value="1">
    </form>     
    </div> 
```

最后是 CSS：

```
#calc
{
width: 109px;
height: 152px;
background-color: #fff;
background-image: url(./img/calc_bg.png);
background-repeat: repeat-y;
border: 1px #646161 solid;
border-left-color: #563928;
border-right: none;
border-top-left-radius: 4px;
border-bottom-left-radius: 4px;
display: block;
top: 137px;
position: fixed;
padding: 0px 6px 0px 25px;
}
.calc_hidden
{
right: -121px;  
}
.calc_opened
{
right: 0px; 
} 
```

非常感谢您的任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:11:13.090

我解决了这个问题。我尝试将动画坐标更改为格式

```
-=121px 
```

我也尝试使用百分比，但都没有奏效。解决方案是动画边距，而不是位置。所以我在 CSS 中的 #calc 中添加了一行

```
margin-right: 0px; 
```

并像这样改变了jQuery

```
 $("#calc").animate({marginRight:'-121px'}); 
```

现在可以在所有浏览器中完美运行。我希望这会对某人有所帮助。

# android - 添加新菜单项以右键单击（所有平台）

> ID：15419713
> 
> 赞同：0
> 
> 时间：2013-03-14T20:39:51.727
> 
> 标签：android, linux, windows, macos, drop-down-menu

我见过很多软件和浏览器插件都是这样做的。安装它们后，它们会在系统右键单击中添加一些菜单项。例如。在我的 PC 上，SVN 始终将“SVN Checkout”项添加到我的右键菜单中。

在 Android 上，您会看到 Whatsapp 将自己添加到整个系统的“共享”菜单中，因此对于您要共享的每张图像，Whatsapp 的选项也会显示。类似的事情是由诸如口袋之类的应用程序完成的，它添加了菜单项“保存到口袋”；因此，当您单击任何文章时，您会在菜单中看到“保存到 Pocket”。

问：这是怎么做到的？是否有跨平台的通用方式，或者每个平台都必须以不同的方式完成？

我需要跨 Windows/Linux/Mac 和 Android/iOS 向我的用户提供此功能。对此的任何指导表示赞赏！

**更新：**这可以仅使用 Java 来完成吗？这样，一种解决方案将适用于所有使用 Java 的平台谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:46:59.543

不，没有跨平台的方法可以做到这一点。在 Windows 中，您编辑注册表。在 Android 中，您可以使用 Android SDK 以多种不同的方式实现这一点。

每个平台都有自己的 API。

当您将 Android 和 Windows（或移动操作系统与任何桌面操作系统）进行比较时，您的心智模型也会有些缺陷。您提到的 Android 功能内置于操作系统中运行的应用程序中，而 Windows 和 OSX 中的上下文（右键单击）菜单是操作系统本身的功能。

# php - sql 运行时报告

> ID：15419714
> 
> 赞同：1
> 
> 时间：2013-03-14T20:39:52.227
> 
> 标签：php, sql, sql-server-2008-r2

我有一个查询，它显示来自这样的表的信息。

```
SELECT tag.label, inputs.input_raw, inputs.unix_timestamp, tag.inverted FROM inputs 
JOIN tag 
ON tag.tag_id = inputs.tag_id
WHERE (inputs.tag_id = 92084)

AND (inputs.date_time > dateadd(day,-1,getdate()))  
ORDER BY date_time DESC 
```

![在此处输入图像描述](../Images/057bbe303758770065926177bed52559.png)

我想写一个查询，它会做两件事。

我需要计算每次 input_raw 从“0”切换到“1”的次数。

我还需要泵运行的总时间，使用 unix_timestamp 即。当 input_raw = 1 时。

有没有人有任何想法。

我会选择一种算法来使用 php 来获得我需要的结果，但我已经碰壁了，无法弄清楚。

谢谢

编辑：该表还包含一个 date_time 字段，如果有可以使用的 date_time 方法，则该字段与 unix_timestamp 的值匹配>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:27:39.250

您想使用`Lead`or`Lag`函数将当前结果与上一个或下一个结果进行比较。但是，这些函数是在 SQL Server 2012 中引入的。

[在pinaldave 先生](http://blog.sqlauthority.com/2011/11/24/sql-server-solution-to-puzzle-simulate-lead-and-lag-without-using-sql-server-2012-analytic-function/)的帮助下，我设法生成了以下[SQL Fiddle](http://sqlfiddle.com/#!3/69e1e/1)，它计算了从 0 到 1 的每一个变化。

```
;WITH x AS 
(
  SELECT
    1 AS ldOffset, -- equiv to 2nd param of LEAD
    1 AS lgOffset, -- equiv to 2nd param of LAG
    NULL AS ldDefVal, -- equiv to 3rd param of LEAD
    NULL AS lgDefVal, -- equiv to 3rd param of LAG
    ROW_NUMBER() OVER (ORDER BY unix_timestamp) AS row,
    label,
    input_raw,
    unix_timestamp,
    inverted
  FROM inputs
 )
SELECT 
    COUNT(1)
FROM x
LEFT OUTER JOIN x AS xLg 
  ON x.row = xLg.row + x.lgOffset
WHERE xLg.input_raw = 0 AND x.input_raw = 1; 
```

您可以使用相同的`Lag`函数来计算当前时间戳和前一个时间戳之间的差异。

**编辑：**

[这个 SQL Fiddle](http://sqlfiddle.com/#!3/244e8/14)应该显示如何获得泵运行的总时间（你必须`running`自己定义。这个查询现在假设从 0 到 1 或保持 1 正在运行。你还应该仔细检查我的时间戳计算，因为我'以前从未使用过unix时间戳。

```
;WITH x AS 
(
  SELECT
    1 AS ldOffset, -- equiv to 2nd param of LEAD
    1 AS lgOffset, -- equiv to 2nd param of LAG
    NULL AS ldDefVal, -- equiv to 3rd param of LEAD
    NULL AS lgDefVal, -- equiv to 3rd param of LAG
    ROW_NUMBER() OVER (ORDER BY unix_timestamp) AS row,
    label,
    input_raw,
    unix_timestamp,
    inverted
  FROM inputs
 )
SELECT 
    SUM(DATEDIFF(mi, 
             DATEADD(ss, xLg.unix_timestamp,'01/01/1970'), 
             DATEADD(ss, x.unix_timestamp,'01/01/1970')))  
FROM x
LEFT OUTER JOIN x AS xLg 
  ON x.row = xLg.row + x.lgOffset
WHERE 
  (xLg.input_raw = 0 AND x.input_raw = 1)
OR
  (xLg.input_raw = 1 AND x.input_raw = 1); 
```

**编辑2：**

我想检查倒置的最简单方法是将`WHERE`子句更改为：

```
WHERE 
  (x.inverted = 1 AND xLg.input_raw = 0 AND x.input_raw = 1)
OR
  (x.inverted = 0 AND xLg.input_raw = 1 AND x.input_raw = 0) 
```

# actionscript-3 - 如何解决 listProvider 数据仅作为一条记录返回的情况？

> ID：15419715
> 
> 赞同：0
> 
> 时间：2013-03-14T20:40:00.773
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.6, flash-builder4.5

我使用 HTTPservice 加载 XML 并在列表中显示结果 - 当找到超过 1 个 XML 记录时它可以工作....但是当只有一个返回的 XML 记录时，由于某种原因它会得到不同的处理并生成此错误：

```
Suspended: TypeError: Error #1034: Type Coercion failed: cannot convert mx.utils::ObjectProxy 
```

我看到这样的帖子：

```
http://anupushkaran.blogspot.com/2010/02/typeerror-error-1034-type-coercion.html 
```

但我不知道如何使其适应我的 HTTPService resultHandler 代码块......

我使用 FB 4.6，我的 XML 结构如下所示：

```
SiteXYZ
   Events
      EventListing 
```

我要使用的所有数据都在 EventListing 节点下。

我已经测试了一些代码，可以检测什么时候返回的长度，所以我想我可以检测到长度何时为 1，然后以不同的方式处理——虽然不知道是什么。

我看到的另一件事让我很接近......当我查看网络监视器的 TreeView > Response > Response Body 时，我可以看到在成功的旅行中，身体像这样回来：

```
SiteXYZ
  Events
     EventListing
        [0]
        [1]....  and so on.... 
```

但是在返回 SINGLE 记录的情况下，响应的正文会像这样返回：

```
SiteXYZ
   Events
      EventListing 
```

所以我不应该能够检测到它何时返回一个记录，然后相应地设置列表 dataProvider 吗？这样当它有很多返回的记录时，dataprovider 设置为：

```
list1.dataProvider = myXML.lastResult.SiteXYZ.Events.EventListing; 
```

但是当它只有一个返回记录时，该 dataProvider 将如何设置？这没有用：

```
list1.dataProvider = lfXML.lastResult.LeisureFun.Events; 
```

有人能帮忙吗？我的方法离基地很远吗？对于这个问题的漫无边际的性质感到抱歉，但是当我输入它时，我停了大约 5 次并尝试了一些在我思考时想到的东西......但仍然没有任何效果......我觉得我在做某事（虽然可能是错误的）但还不能解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:41:06.840

答案在我引用的原始网站中......

我仔细查看了该帖子所说的问题是什么以及该代码片段如何解决它并能够通过将它放在我的 resultHandler 块中让它为我工作......

```
arr=new ArrayCollection();
if(event.result.SiteXYZ.Events.EventListing is ArrayCollection)
{
arr = ArrayCollection(event.result.SiteXYZ.Events.EventListing);
}
if(event.result.SiteXYZ.Events.EventListing is ObjectProxy)
{
arr =new ArrayCollection(ArrayUtil.toArray
    (event.result.SiteXYZ.Events.EventListing));
} 
```

现在，当返回一条记录时，它显示正常......返回的多条记录相同。

不过感谢您的帮助...我一定会保存此代码段以供将来使用！

# python - Python 中的 Euler 项目 #2

> ID：15419722
> 
> 赞同：5
> 
> 时间：2013-03-14T20:40:32.480
> 
> 标签：python, python-2.7

**背景**

我被困在这个问题上：

> 斐波那契数列中的每个新项都是通过添加前两项来生成的。从 1 和 2 开始，前 10 个术语将是：
> 
> 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
> 
> 通过考虑斐波那契数列中值不超过四百万的项，求偶数项之和。

我试图找出问题是否是我的斐波那契数生成器，获得偶数的代码，甚至是我添加数字的方式都无济于事。

**代码**

我决定将数字存储在列表中。在这里，我创造了它们。

```
list_of_numbers = [] #Holds all the fibs
even_fibs = [] #Holds only even fibs 
```

然后，我创建了我的生成器。这是一个**潜在的问题领域**。

```
x,y = 0,1 #sets x to 0, y to 1
while x+y <= 4000000: #Gets numbers till 4 million
    list_of_numbers.append(y)
    x, y = y, x+y #updates the fib sequence 
```

然后，我创建了一些代码来检查一个数字是否为偶数，然后将其添加到`even_fibs`列表中。这是**代码中的另一个弱点。**

```
coord = 0
for number in range(len(list_of_numbers)):
    test_number = list_of_numbers [coord]

    if (test_number % 2) == 0:
        even_fibs.append(test_number)
    coord+=1 
```

最后，我显示信息。

```
print "Normal:  ", list_of_numbers #outputs full sequence
print "\nEven Numbers: ", even_fibs #outputs even numbers
print "\nSum of Even Numbers:  ", sum(even_fibs) #outputs the sum of even numbers 
```

**问题**

我知道这是一种很糟糕的提问方式，*但有什么问题呢？*请不要给我答案 - 只需指出有问题的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:44:23.540

当序列中接下来的两个值的总和大于 4,000,000 时，您将停止。您应该考虑序列中不超过 4,000,000 的所有*值*。

# jquery - 禁用复选框时显示/隐藏文本输入

> ID：15419723
> 
> 赞同：0
> 
> 时间：2013-03-14T20:40:33.320
> 
> 标签：jquery, show-hide

`#typeOther`单击复选框时，此代码段成功显示文本输入`#securityCl`。但是，为了避免在用户切换到另一个单选按钮时提交带有不需要的文本的表单，或者通过`#securityCl`再次单击复选框来完全禁用输入，我想隐藏和清除`#typeOther`文本输入。

HTML：

```
 <table>
        <tr>
            <td>
                <input type="checkbox" id="securityCl" name="securityCL">
                <label for="securityCl">Security Clearance - Type:</label>
            </td>
        </tr>
        <tr>
            <td class="indent">
                <input type="radio" id="typeTsSci" name="securityType" disabled="disabled">
                <label for="typeTsSci">TS/SCI</label>
            </td>
            <td>
                <input type="radio" id="typeS" name="securityType" disabled="disabled">
                <label for="typeS">S</label>
            </td>
        </tr>
        <tr>
            <td class="indent">
                <input type="radio" id="typeTs" name="securityType" disabled="disabled">
                <label for="typeTs">TS</label>
            </td>
            <td>
                <input type="radio" id="typeOther" name="securityType" disabled="disabled">
                <label for="typeOther">Other:</label><br>
            </td>
            <td>
                <input type="text" id="otherText" name="securityType" disabled="disabled">
            </td>
        </tr>
    </table> 
```

这是我的 jQuery：

```
 $(function() {
        var hide = $('#otherText').hide();
        $('#securityCl').click(function() {
            $('input[name="securityType"]').prop('disabled', !this.checked);
            $('#typeOther').click(function() {
                $(hide).show();
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:54:10.537

[http://jsfiddle.net/uzCta/2/](http://jsfiddle.net/uzCta/2/) Here's my updated fiddle.

Things of note:

*   move the event handling out of the nesting
*   trigger the active item events so it forces initial state (useful when editing, if already other selected, it'll re-initialize the expanded other check box)
*   changed the handler to handle any click on any radio button in the group, so it knows to hide/show the other box properly.

Here's the important code:

```
$(function() {
    var hide = $('#otherText').hide();

    $('input[name="securityType"]').prop('disabled', !$('#securityCl').prop('checked'));

    $('#securityCl').click(function() {
        $('input[name="securityType"]').prop('disabled', !$(this).prop('checked'));
    });

    $('input[name="securityType"]').click(function()
    {
        if($('#typeOther').is(':checked'))
            hide.show();
        else
            hide.hide();
    });

    $('input[name="securityType"]:checked').trigger('click'); // trigger an initial state change
}); 
```

EDIT: Two inconsistencies worth noting. I deviated from your sample a bit. `:input[name...]` should just be `input[name...]` or I should have changed it above as well in your click handler. And I left your `$(hide)` wrapper but below called `hide.hide()` directly without wrapping. Since this is already a jquery object, no need to wrap it in `$()`. But I will leave the answer as is, as it doesn't affect the results.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:46:39.840

尝试这个：

```
 var hide = $('#otherText').hide();
 $('#securityCl').click(function () {
     $('input[name="securityType"]').prop('disabled', !this.checked);
     $('input[name="securityType"]').click(function () {
         if ($('#typeOther').is(':checked')) {
             $('#otherText').show();
         } else {
             $('#otherText').hide();
         }
     });
 }); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZasNf/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:48:46.250

听起来您可以使用切换功能在显示和隐藏之间切换。 [http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

这是在相关线程中如何使用它的示例。[jquery toggle - 在切换功能之间切换？](https://stackoverflow.com/questions/4121902/jquery-toggle-switch-between-toggle-functions)

# sql - 什么会阻止触发器看到另一个表中的行？

> ID：15419730
> 
> 赞同：0
> 
> 时间：2013-03-14T20:41:06.803
> 
> 标签：sql, triggers, sql-server-2000

我`AFTER INSERT`在这张表上有一个触发器，称之为表 1。

在触发器中，我正在对另一个表进行更新，将其称为表 2。

我基本上是将表 2 中的一个字段从一些相关表更新到表 1。

但由于某种原因，触发器无法看到另一个表中的行。

它们都在同一个模式 dbo 中。

什么原因会阻止触发器看到另一个表中的行？

update 语句有一个 from 子句。但是我在触发器中只尝试了一个存在子句，它没有看到它。

我只用必需品做了一个理智测试，效果很好。但在完整的解决方案中，它看不到另一张桌子。

# java - JPA：如何删除自我类型的孩子？

> ID：15419732
> 
> 赞同：0
> 
> 时间：2013-03-14T20:41:11.933
> 
> 标签：java, jakarta-ee, jpa

考虑班级

```
@Entity
public class CustomType {

  @Column
  private String name;

  @Column
  private CustomType child;

} 
```

我有一种情况，我可以删除`child`实体，我希望它级联到它`parent`

当我尝试这样做时，我看到

```
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: DELETE on table 'CustomType' caused a violation of foreign key constraint 'FK197854DCA5BD6640' for key (bece5b16-fafd-49fd-9ff3-cc19b050e174).  The statement has been rolled back. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:47:04.770

```
DELETE on table 'CustomType' caused a violation of foreign key constraint 
```

这意味着您尝试删除的行的行 ID 在另一个表中具有引用，因此无法删除。

只有当其他表中不再存在对该行的引用时，才能删除该行。

# variables - Mootools 变量范围问题

> ID：15419736
> 
> 赞同：0
> 
> 时间：2013-03-14T20:41:30.060
> 
> 标签：variables, scope, mootools

我在思考变量范围时遇到了问题，需要一些帮助:)

我正在 joomla 中设置一个可以旋转图像的模块。我有一些我在非 Joomla 网站上使用过的代码，效果很好。但是，我已经移植了它，并且遇到了我认为是可变范围问题的问题，因此任何想法都会很棒。

很抱歉代码很长，但我包含了整个函数，以防万一（当它工作时）它可能对其他人有帮助。

```
function slideshow(container,containerCaption,previewCode,timer,classis,headerId,thumbOpacity,titlebar){
    var showDuration = timer;
    var container = $(container);
    var images = $(container).getElements('span');
    var currentIndex = 0;
    var interval;

    var preview = new Element('div',{
        id: containerCaption,
        styles: {
            opacity: thumbOpacity
        }
    }).inject(container);

    preview.set('html',previewCode);
    images.each(function(img,i){ 
    if(i > 0) {
        img.set('opacity',0);
    }
});

var show = function() {
    images[currentIndex].fade('out');
    images[currentIndex = currentIndex < images.length - 1 ? currentIndex+1 :         0].fade('in');

    var title = '';
    var captionText = '';

    if(images[currentIndex].get('alt')) {
        cap = images[currentIndex].get('alt').split('::');
        title = cap[0];
        captionText = cap[1];
        urltoUse = cap[2];
        preview.set('html','<span class="lctf1"><ahref="'+urltoUse+'">' 
            + title + '</a></span>' 
            + (captionText ? '<p>' + captionText + '</p>' : ''));
        }
    };

    window.addEvent('domready',function(){
        interval = show.periodical(showDuration);
    });
}

window.addEvent('domready',function() {
    container = "slideshow-container";
    containerCaption ="slideshow-container-caption";
    previewCode = '<span ><a href="<?php echo $itemurl[0];?>"><?php echo $itemtitle[0];?></a></span><p ><?php echo $itemdesc[0];?></p>';
    timer = <?php echo $slidetime*1000;?>;
    classis = 1;
    headerId = "";

    thumbOpacity =0.7;
    titlebar = "<?php echo $showTitle;?>";
    if($(container)){
        slideshow(container,containerCaption,previewCode,timer,classis,headerId,thumbOpacity,titlebar);
    }
}); 
```

引发的 javascript 错误是预览未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:03:46.100

您的代码似乎有效，我在这里做了一个 jsfiddle：http: [//jsfiddle.net/7E2MX/3/](http://jsfiddle.net/7E2MX/3/)运行没有错误。

我确实改变了一行：

```
var images = $(container).getElements('span'); 
```

至

```
var images = $(container).getElements('img'); 
```

# python - 使用 rpy2 从 Python 调用自定义函数

> ID：15419740
> 
> 赞同：13
> 
> 时间：2013-03-14T20:41:47.677
> 
> 标签：python, r, rpy2

有没有办法调用文件中定义的函数说 myfunc.r

```
---------------myfunc.r --------------
myfunc = function(){
  return(c(1,2,3,4,5,6,7,8,9,10))
}

getname = function(){
  return("chart title")
}

---- Python 
   How to call getname() here ? 
```

任何帮助将不胜感激 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T14:06:54.420

rpy2 中的一些功能应该有助于使这比将对象转储到全局工作区更干净。

```
from rpy2.robjects.packages import STAP
# if rpy2 < 2.6.1 do:
# from rpy2.robjects.packages import SignatureTranslatedAnonymousPackage
# STAP = SignatureTranslatedAnonymousPackage
with open('myfunc.r', 'r') as f:
    string = f.read()
myfunc = STAP(string, "myfunc") 
```

现在可以使用`myfunc.myfunc`和访问 R 文件中的对象`myfunc.getname`。

查看有关[将任意 R 代码作为包导入](https://rpy2.github.io/doc/v3.4.x/html/robjects_rpackages.html#importing-arbitrary-r-code-as-a-package)的文档。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-14T20:50:39.763

You can do something like this ( python code here)

```
import rpy2.robjects as robjects
robjects.r('''
       source('myfunc.r')
''')

 r_getname = robjects.globalenv['getname'] 
```

then you call it

```
r_getname() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-01T14:23:42.990

我建议使用**user3282437**[在这里](https://stackoverflow.com/questions/19567081/rpy2-import-external-r-file)建议的内容：

```
import rpy2.robjects as robjects
r_source = robjects.r['source']
r_source('/path_to_file/myfunc.R')
r_getname = robjects.globalenv['getname'] 
```

我不确定这是一个全球性问题，但在我的 Windows 机器上直接调用，如**agstudy**建议：

```
import rpy2.robjects as robjects
robjects.r('source("some_file.R")') 
```

导致python崩溃。

# c# - FontSize.PIXELS c# 等效

> ID：15419744
> 
> 赞同：1
> 
> 时间：2013-03-14T20:42:02.930
> 
> 标签：c#, .net, winforms, j#

我有以下 J# 代码

```
bigFont = new Font("Arial", bigFontSize, FontSize.PIXELS); 
```

如何将上面的行转换为 c#[`FontSize.PIXELS`](http://msdn.microsoft.com/en-us/library/aa250533%28v=vs.60%29.aspx)等效项。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:49:50.063

尝试

```
Font bigFont = new Font("Arial", bigFontSize, GraphicsUnit.Pixel); 
```

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms141986.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:53:31.943

您可以在构造函数上使用 GraphicsUnit.Pixel：

```
Font f = new Font("Arial", 25, GraphicsUnit.Pixel);
this.Font = f; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T20:50:51.223

看起来您正在[为 Font 使用此构造函数](http://msdn.microsoft.com/en-us/library/ms141986%28v=vs.85%29.aspx)，采用字体系列、emSize 和图形单元。

在这种情况下，您需要一个[GraphicsUnit](http://msdn.microsoft.com/en-us/library/system.drawing.graphicsunit%28v=vs.85%29.aspx)枚举。

看起来您想要的特定等价物是`System.Drawing.GraphicsUnit.Pixel`.

# multithreading - 增加 Mongo 的池大小会降低性能吗？

> ID：15419747
> 
> 赞同：4
> 
> 时间：2013-03-14T20:42:14.543
> 
> 标签：multithreading, mongodb, concurrency

我们有 200 个线程发出 HTTP 请求，然后将来自这些请求的数据存储到 Mongo 集合中。我们看到以下错误，因为池大小太小：

```
"could not obtain connection within 5.0 seconds. The max pool size is currently 1; consider increasing the pool size or timeout." 
```

自然，我们将池大小增加到 200，以便每个线程都可以保持与 Mongo 的连接。

但是我们没有看到太大的性能差异。将池大小增加到超过某个限制会降低 Mongo 的性能吗？具体来说，在 Mongo 中通常建议使用 200 - 1000 个连接吗？

瓶颈可能在代码的其他地方，但我们只是想确认将池大小增加到 200（甚至 1000）不会对 Mongo 吞吐量产生不利影响（如果没有其他瓶颈，应该会有所帮助）。我们在别处读到它可能。

# wpf - 派生 UIElement - 如何获得焦点

> ID：15419748
> 
> 赞同：0
> 
> 时间：2013-03-14T20:42:15.710
> 
> 标签：wpf, focus, uielement, frameworkelement

我创建了一个基于的类`UIElement`，我的意图是让自己覆盖它`OnRender`。渲染工作正常。接下来我想实现焦点管理并继续生活的其他方面，但是`GotFocus`在其中覆盖和调用 Me.Focus() 不会做任何事情。我将我的控件放在一个 Window 与另一个控件 -`TextBox`上，然后单击它不会做任何事情。Tab 也没有设置焦点，并且`TextBox`是`AcceptsTab`负数。我知道我必须以某种方式将焦点可视化`OnRender`以实际判断控件何时获得焦点，但首先我需要让它接收焦点，这就是我挣扎的地方。你能帮帮我吗？

PS我标记了这个，`FrameworkElement`因为我没有足够的声誉来创建标签`UIElement`，并且将标签留空似乎是一件愚蠢的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:50:32.160

将我的评论转换为答案：

我认为你可能会更好地派生`FrameworkElement`而不是。

# c# - .NET 中插件系统的动态对象实例化

> ID：15419754
> 
> 赞同：2
> 
> 时间：2013-03-14T20:42:39.503
> 
> 标签：c#, .net, plugins, .net-4.5

我正在开发一个需要通过插件模块支持自定义的系统。我正在针对接口进行编码，因此插件代码只需要实现这些接口即可插入系统。

```
// for illustration purposes; not actual code
public interface IPluggable
{
    void Setup(PluginConfig c);
    bool Process(IProcessable p);
} 
```

我从配置中读取需要加载哪些插件，其中指定了程序集名称和完全限定的类型名称。

```
<plugin assembly="Foo.Bar.PluginAssembly" type="Foo.Bar.Plugins.AwesomePlugin" /> 
```

类型`Foo.Bar.Plugins.AwesomePlugin`实现`IPluggable`并包含在程序集中的位置`Foo.Bar.PluginAssembly.dll`。有了这些信息，我继续创建所需插件的实例。

```
IPluggable plugin = (IPluggable)Activator.CreateInstance(assemblyName, typeName).Unwrap(); 
```

所以我的问题有三个：

1.  插件系统的推荐模式是什么？我采取的方法是否有意义，或者我是否遗漏了任何明显的缺陷/警告？
2.  动态实例化插件对象是`Activator.CreateInstance()`一个不错的选择吗？
3.  如何更具体地了解要加载的程序集及其位置？假设我只想从位于`.\plugins`子文件夹中的程序集中加载插件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:52:43.313

按顺序回答您的问题：

1.  我喜欢这样，当我需要编写插件组件时，我会使用这样的模式。其他人推荐使用各种框架——我知道[MEF](http://www.softwarerockstar.com/2012/04/mef-easily-creating-plugin-apps/)非常流行。但是我发现使用.NET 框架对我来说很容易，学习MEF 框架只是我需要学习和记住的另一件事。这可能值得一试，但取决于你。

2.  我一直使用`Assembly.CreateInstance`，但差异可能不会影响您（[Assembly.CreateInstance 和 Activator.CreateInstance 之间的差异？](https://stackoverflow.com/questions/1833615/difference-between-assembly-createinstance-and-activator-createinstance)）

3.  您只需使用`System.IO`命名空间。该类`DirectoryInfo`有一个方法可以枚举与给定模式匹配的所有文件（大概是`*.dll`）。对于每个匹配项，我将使用`System.Reflection`命名空间来询问并找到任何实现您的接口的类型，然后`CreateInstance`.

就 MEF 而言，我的看法是：如果我要在多个系统或项目上使用大型、可管理且灵活的插件系统，那么我会对它非常感兴趣，并利用其他人的工作成果这样做是为了节省时间并避免常见的陷阱。

如果我正在编写一个非常简单的一次性插件系统，并且我知道如何使用 .NET 框架来完成此操作的基础知识，那么我会跳过学习 MEF 的开销并编写代码。我可以在不到一个小时的时间内编写一个合理的插件过程，但是在下载、引用、尝试配置 MEF 之后——我怀疑我有什么可以展示的。

# ruby - 在数组中找到第一个元素，块返回true并返回块的返回值

> ID：15419760
> 
> 赞同：7
> 
> 时间：2013-03-14T20:42:58.153
> 
> 标签：ruby

我需要遍历一个数组并将提供的块应用于每个元素，并返回该块返回的第一个真值，这意味着我需要在获得真值后立即停止。

下面是我的代码。我是一个红宝石新手，我不确定这段代码是否在重新发明轮子。也许已经有一个或多个库方法可以做到这一点？还是可以简化此代码？

```
RS = {
  :x => %w(\d+ a\d+ bb\d+ ccc\d+).map{|x| /^#{x}$/},
  :y => %w(\w+ 1\w+ 22\w+ 333\w+).map{|x| /^#{x}$/}
}.freeze

def find s, t
  r = RS[s]
  if r
    r.each do |p|
      m = p.match t
      return m if m
    end
    nil
  end
end

p find :x, 'bb12345' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:48:53.333

如果你想要块的结果，你可以这样做。这将遍历整个数组，但不会在第一个匹配之后评估任何匹配。

```
def find(s,t)
  RS[s].inject(nil) {|m, p| m || p.match(t)}
end 
```

你可以提前做这样的事情

```
RS[s].inject(nil) {|m, p| (m && (break m)) || p.match(t)} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-17T12:07:42.100

这与以下内容重复：[Ruby - Array.find，但返回块的值](https://stackoverflow.com/questions/24900696/ruby-array-find-but-return-the-value-the-block/46789688#46789688)

你想要一张懒惰的地图：

```
[nil, 1, 2, 3].lazy.map{|i| i && i.to_s}.find{|i| i}    
# => "1" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-23T16:49:22.953

希望仍然是实际的：这里有一个使用检测的解决方案，我可以详细说明输出，以便您可以查看在返回命中之前评估了哪些表达式。

```
def find_match symbol, string , verbose = false, match = nil
  if verbose
    RS.detect{|x,v|x==symbol;v.detect{|re|puts re;match=string.match(/#{re}/)}}
  else
    RS.detect{|x,v|x==symbol;v.detect{|re|match=string.match(/#{re}/)}}
  end
  match
end

p find_match :x, 'bb12345'
p find_match :x, 'ee12345' , true #verbose output
p find_match :x, '12345'
p find_match :y, '22abcd'

#<MatchData "bb12345">
(?-mix:^\d+$)
(?-mix:^a\d+$)
(?-mix:^bb\d+$)
(?-mix:^ccc\d+$)
(?-mix:^\w+$)
#<MatchData "ee12345">
#<MatchData "12345">
#<MatchData "22abcd"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T05:58:36.603

如果您的正则表达式模式很简单，您可以在最后再次应用正则表达式，也许。

就像是：

```
def find(s,t)
  r = RS[s] and r.find{|p| p.match(t)}.try(:match, t)
end 
```

尽管它进行了一次冗余调用来匹配，但它更容易理解。

首先，找到您想要的模式，然后使用该模式。

# symfony - Symfony 资产转储控制台中的内容

> ID：15419761
> 
> 赞同：0
> 
> 时间：2013-03-14T20:42:58.723
> 
> 标签：symfony, assetic

当我跑

```
php app/console assetic:dump 
```

文件的内容转储在控制台中，并且不会生成文件。

这发生在`--env=prod`和/或`--no-debug`。作为 Windows，我无法到达顶部以查看是否存在错误。以前从来没有过，会是什么？

PS：我正在使用`"symfony/assetic-bundle": "2.1.*"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:20:49.570

我虽然安装了 Java，因为 PHPstorm 正在工作，但我需要安装 JRE。

# php - 将 textarea 保存到数据库并发送保持文本区域格式的电子邮件

> ID：15419765
> 
> 赞同：0
> 
> 时间：2013-03-14T20:43:06.320
> 
> 标签：php, mysql, email, cakephp, cakephp-2.0

通过 cakephp，我将一个文本区域保存到数据库中，该文本区域将用作电子邮件消息。我可以正确保存它，但是当我尝试从数据库中提取数据并使用该数据发送电子邮件时，我收到的电子邮件是一长行文本，而不是保持我在文本中键入的格式区域。是否可以保留发送电子邮件的格式？

例如：如果在文本区域中我输入了类似的内容：

```
This is line 1.
This is line 2.
This is line 3. 
```

我收到的电子邮件将是

```
This is line 1\. This is line 2\. This is Line 3. 
```

我想要的是我输入的内容：

```
This is line 1.
This is line 2.
This is line 3. 
```

这是代码： App::uses('CakeEmail', 'Network/Email');

```
 $recipients = str_replace(' ', '', $recipients);
    $recipients = explode(',', $recipients);
    $email = new CakeEmail();
    $email->from($user_email);
    $email->to($recipients);
    $email->subject($final_subject);
    $email->template('download_link_email');
    $email->emailFormat('both');
    $email->viewVars(array('url' => $this->generateUrl('datas', 'download', $group_id, $user_id, $email_id), 'final_subject' => $final_subject, 'final_recipient' => $final_recipients, 'final_message' => $final_message));
    $email->send(); 
```

和 download_link_email 模板

```
<html>
    <head>
        <title><?php echo $final_subject; ?></title>
    </head>
    <body>
        <h1><?php echo $final_subject; ?></h1>
        <p><?php echo $final_message; ?></p>
        <p><?php echo $this->Html->link('Click here to download', $url);?>.</p>
    </body>
</html> 
```

至于文本区域如何保存到数据库，它是标准的 cakephp 风格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:00:03.680

你需要做这样的事情：

```
$order   = array("\r\n", "\n", "\r");
$replace = '<br />';
$final_message = str_replace($order, $replace, $final_message); 
```

您可以在[此处](http://php.net/manual/en/function.str-replace.php)查看有关 str_replace 的更多信息

或者您可以使用[nl2br](http://www.php.net/manual/en/function.nl2br.php)（感谢**egyal**指出）

```
nl2br($final_message) 
```

# c++ - 应用程序要求 OS X >= Lion

> ID：15419770
> 
> 赞同：1
> 
> 时间：2013-03-14T20:43:18.893
> 
> 标签：c++, macos

我参与的开源软件之一最近开始使用仅在 OS X 10.7 及更高版本上可用的功能。我们希望在启动时（或者最好在程序启动之前，如果某些 DMG 元数据允许的话）检测用户是否正在使用旧版本的 OS X 并显示一条消息，告诉他升级他的操作系统（或使用我们软件的旧版本）。

做这个的最好方式是什么？我不是 OS X 开发人员，所以请尽可能简单:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:46:52.620

您可以使用 C std 库中的方法来完成。这个问题解释了如何[使用标准 C 在 Mac OS X 中获取操作系统版本](https://stackoverflow.com/questions/5969485/getting-the-os-version-in-mac-os-x-using-standard-c)

正如评论中提到的，这在 10.8 中已被弃用。这个问题暂时解释了一个解决方法[如何在 OS X 或 iOS 中确定运行时的操作系统版本（不使用格式塔）？](https://stackoverflow.com/questions/11072804/mac-os-x-10-8-replacement-for-gestalt-for-testing-os-version-at-runtime)

# javascript - 我可以通过 id 直接访问 DOM 元素吗？

> ID：15419774
> 
> 赞同：4
> 
> 时间：2013-03-14T20:43:25.703
> 
> 标签：javascript, dom

在 javascript 中，我总是使用 docuemtn.getElementById 来访问 DOM 元素，但最近我不小心只使用 id 访问了它并且它有效。例子：

```
<input id="element_id" type="text"> 
```

在javascript中

```
element_id.onclick=fun; 
```

它是正确的代码吗？为什么它有效？（在我拥有的所有浏览器中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:46:58.623

是的，在某些浏览器中，元素可用作以其 ID 命名的全局变量。

不要使用这个“功能”。它是非标准的，也不是普遍支持的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:00:46.557

有时它会在某些浏览器中工作。例如，如果您创建以下元素：

```
<div id="Math">I'm a math div!</div> 
```

两者都`Math`将`window.Math`返回`MathConstructor {}`，因为这是正常`window.Math`返回的。[（此处](http://jsfiddle.net/hq4GB/2/)在 Chrome 中测试）

# scikit-learn - 如何在 sci-kit learn 中找到 LDA 决策边界

> ID：15419775
> 
> 赞同：2
> 
> 时间：2013-03-14T20:43:28.270
> 
> 标签：scikit-learn

我正在尝试绘制使用 sci-kit learn LDA 分类器获得的决策边界。

我知道您可以使用将`transform`数据投影到第一个组件行（两个类案例）的方法来转换您的多变量数据。如何获得作为分类枢轴的第一个组件的值？这就是，作为决策边界的值？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-30T10:10:37.377

LDA 对 $Cov_{between}/Cov_{within}$ 执行 PCA 或类似 PCA 的操作。分类枢轴只是 $Cov_{between}/Cov_{within}$ 的前 n-1 个特征向量。

特征矩阵存储在 lda.scalings_ 中，因此第一个分量是 lda.scalings_ 的第一个向量。它是 2 类案例的决策边界，但不是多类案例的决策边界

# php - CodeIgniter - 尝试查看上传的 pdf 文件时出错

> ID：15419779
> 
> 赞同：0
> 
> 时间：2013-03-14T20:43:35.353
> 
> 标签：php, codeigniter

我在尝试查看 webroot 文件夹之外的 pdf 文件时遇到了困难。

这是视图文件 - 我从 URL 中获取文件 ID，然后查询 db 以获取从上传存储的所有文件信息。

```
 $fid = $_GET['fid'];
$query = $this->db->query("SELECT * FROM files WHERE FID = $fid");
    $fileinfo = $query->result();
    foreach ($fileinfo as $row)
    {

    $fname = $row->file_name;
    $ftype =  $row->file_type;
    $fpath =  $row->file_path;
    $full_path = $row->full_path;
    $raw_name = $row->raw_name;
    $client_name = $row->client_name;
    $file_ext = $row->file_ext;
    $file_size =  $row->file_size;
    $is_image = $row->is_image;
    $width =  $row->image_width;
    $height = $row->image_height;
    $img_type =  $row->image_type;
    $img_size =  $row->image_size_str;
    $orig_name = $row->orig_name;
    $created =  $row->created;

    } 
```

然后我将获取该信息并使用以下命令将其传递给 File_viewer_model：

```
 $this->load->model('File_viewer_model');

    $this->File_viewer_model->getFileInfo($fname,$ftype); 
```

模型中接收数据的函数如下：

```
function getFileInfo($fname,$ftype){

   $path = '/home/sitename/uploads/' . $fname;

header('Content-Type: ' . $ftype);
header('Content-Length: ' . filesize($path));

readfile($path);

        } 
```

问题是当我单击链接以打开新选项卡并尝试显示文件时，我收到以下错误：

> 文件不以“%PDF-”开头。

该文件位于 webroot 之外的名为 uploads 的 777 权限目录中 - 我已经在网络上到处都是，似乎有几种方法可以显示 pdf 文件，但这些方法似乎都不适合我。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:49:19.020

已解决：问题是我在节之前在控制器中传递了 header_view 页面`$this->load->view('file_viewer_view');`。

PDF 查看器试图先解析 header_view，然后再解析`header('Content-Type: application/pdf')`file_viewer_view 中的代码，从而产生错误。

我之前从控制器中删除了所有东西`$this->load->view('file_viewer_view');`，它就像一个冠军！

希望这能像我经历的那样节省几个小时用头撞墙的时间！

# css - CSS自定义复选框将某些东西浮动到确切的左侧

> ID：15419782
> 
> 赞同：0
> 
> 时间：2013-03-14T20:43:42.180
> 
> 标签：css, checkbox, label

我有一个样式复选框，我想在标签旁边有一个链接。标签有不同的宽度，所以我不能把链接放在左边。由于样式复选框，我无法使用 css“检测”标签的宽度。因此，为了清楚起见，在我所做的 jsfiddle 中，我希望链接信息位于标签的左侧。

[http://jsfiddle.net/SAZ2P/3/](http://jsfiddle.net/SAZ2P/3/)

干杯!

CSS：

```
.selectbox {
    position: relative;
    display: inline-block;
}

.selectbox input[type="checkbox"] {
    visibility: hidden;
}

.selectbox label {
    cursor: pointer;
    position: absolute;
    width: 15px;
    height: 15px;
    top: 0;
    background: #fcfff4;
    border: 1px solid #000;
    text-indent: 30px;
    white-space: nowrap;
    letter-spacing: 2px;
    line-height: 17px;
}

.selectbox label:after {
    opacity: 0;
    content: '';
    position: absolute;
    width: 6px;
    height: 4px;
    background: transparent;
    top: 2px;
    left: 3px;
    border: 2px solid #333;
    border-top: none;
    border-right: none;
    -webkit-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -o-transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
    transform: rotate(-45deg);
}

.selectbox label:hover::after {
    opacity: 0.5;
}

.selectbox input[type=checkbox]:checked + label:after {
    opacity: 1;
}

.selectbox a{
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:04:23.893

我认为最好将链接包含在标签内。例如：

```
<div class="selectbox">
    <input type="checkbox" value="brand2" id="brand2" name="brand2" class="box">
    <label for="brand2"><a href="/link" id="brand_info">info</a> brand with longer name</label>
</div> 
```

# algorithm - 查找图中红色顶点数最少的路径

> ID：15419784
> 
> 赞同：2
> 
> 时间：2013-03-14T20:43:49.410
> 
> 标签：algorithm, language-agnostic, graph-theory

令 G=(V,E) 是一个无向图，s 和 t 是 V 中的两个顶点。图的每条边都被着色为红色或蓝色。我需要找到一种算法来找到 s 和 t 之间的路径，其中红色边缘的数量最少。

我想到了以下算法： A modified BFS algorithm

对于每个顶点，我们将使用一个名为“red level”的额外字段，它将指示从 s 到该顶点的路径上的最小红色边数。一旦我们发现了一个新的顶点，我们将更新它的红色级别字段。如果我们试图探索一个已经发现的顶点，如果这个顶点的红色级别大于当前的红色级别，那么我们从 BFS 树中删除这个顶点并将它作为我们的子节点的子节点插入现在正在探索，等等。期望的路径是在算法运行结束时连接 BFS 树中的 s 和 t 的路径。

我现在正试图证明这个算法是正确的，但收效甚微。我也不确定它是否真的正确。任何提示/想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T20:52:07.917

我认为这是正确的：本质上，您正在使用[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，红色边缘的权重非常大，蓝色边缘的权重非常小或为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T18:54:36.180

不幸的是，该算法是不正确的。取下图： G = (V,E) ; V = {s, a, b, c, d, e, t} ; E = { (s,a), [s,b], [s,d], (a,b), [b,c], [d,e], (c,t), (e,t) } ;

（为方便起见，我将 ( *,* ) 标记为蓝色无向边，将 [ *,* ] 标记为红色无向边）

假设算法选择在“a”之前探索“b”。当我们完成 's' 后，我们将有红色级别 0 的 'a'，红色级别 1 的 'b' 和 'd'。在从 'd' 探索时，我们将有 'e'红色级别 2。现在我们从 'b' 开始探索：'s' 和 'a' 保持不变，但 'c' 得到红色级别 2。接下来我们探索 'a'（根据 BFS！），它将“b”的父级更改为“a”，将“b”的红色级别更改为 0。请注意，在这一点上 - 从“s”到“c”的路径是正确的，但红色级别'c' 不是 - 它应该是 1 而不是 2。现在，我们继续前进，我们从 'e' 开始（我们已经完成了 's' 及其直系子 'a'、'b' 和'd'）：我们发现't'与边缘（e，t），所以't'得到红色级别2。边缘（e，d）没有改变。现在我们进入了很酷的部分——从“c”开始探索：边 (c,b) 没有任何变化，但是边 (c,t) 呢？'t' 已经被发现（来自 'e'），因此根据您的算法，我们仅在红色级别存在差异时才更改某些内容。但是没有，因为“c”的红色级别是 2（不正确！）。所以't'的父级仍然是'e'，并且从's'的路径包含2个红色边缘，而从's'到't'的路径只包含1个红色边缘：s -> a -> b -> c -> t 边 (c,b) 什么都没有改变，但是边 (c,t) 呢？'t' 已经被发现（来自 'e'），因此根据您的算法，我们仅在红色级别存在差异时才更改某些内容。但是没有，因为“c”的红色级别是 2（不正确！）。所以't'的父级仍然是'e'，并且从's'的路径包含2个红色边缘，而从's'到't'的路径只包含1个红色边缘：s -> a -> b -> c -> t 边 (c,b) 什么都没有改变，但是边 (c,t) 呢？'t' 已经被发现（来自 'e'），因此根据您的算法，我们仅在红色级别存在差异时才更改某些内容。但是没有，因为“c”的红色级别是 2（不正确！）。所以't'的父级仍然是'e'，并且从's'的路径包含2个红色边缘，而从's'到't'的路径只包含1个红色边缘：s -> a -> b -> c -> t

# string - 从字符串元胞数组中删除字符（Matlab）

> ID：15419787
> 
> 赞同：0
> 
> 时间：2013-03-14T20:44:03.157
> 
> 标签：string, matlab, character, cell

我有一个字符串单元格数组。我需要为每个项目提取 1 到 n 个字符。字符串总是长于 n 个字符。请参见：

```
data = { 'msft05/01/2010' ;
         'ap01/01/2013' }

% For each string, last 10 characters are removed and put it in the next column

answer = { 'msft' '05/01/2010' ;
           'ap'   '01/01/2013' } 
```

是否有可能的矢量化解决方案？我曾尝试使用 cellfun 但没有成功。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:00:01.240

```
data = { 'msft05/01/2010' ;
         'ap01/01/2013' };
for i = 1:length(data)
    s = data{i};
    data{i} = {s(1:end-10) s(end-9:end)};
end 
```

抱歉，没有注意到您需要矢量化...也许我只能建议单行...

```
data = cellfun(@(s) {s(1:end-10) s(end-9:end)}, data, 'UniformOutput', false); 
```

# algorithm - 最大化序列中数字之间的差异

> ID：15419788
> 
> 赞同：8
> 
> 时间：2013-03-14T20:44:03.330
> 
> 标签：algorithm, language-agnostic, recurrence

我需要一些帮助来找到解决以下问题的算法的总体思路。这个问题是在作业中交给我的。看起来应该可以通过贪心的方法解决，但我想不出一个简单的解决方案。以下是问题描述：

**给你一个由N**个数字组成的序列，`a_1 ... a_n`使得`0 = a_1 < a_2 < ... < a_n`. *您必须最多* 消除这些数字中的 **M**`a_i+1 - a_i`个，以使任意两个*连续*数字之间的最小差异最大化。

您可能无法消除第一个和最后一个元素，`a_0`并且`a_n`. 此外，您必须消除尽可能少的数字：如果消除`M - 1`您得到最短距离`D`并且消除`M`您仍然具有相同的最小差，则您不能消除最后一个数字。

我不是要求这个问题的完整解决方案。关于算法的外观只有一些指导方针。

**编辑：**一些测试样本。请记住，可能有多个有效的解决方案。

```
Remove at most 7 from:
0 3 7 10 15 18 26 31 38 44 53 60 61 73 76 80 81 88 93 100

Solution:
0 7 15 26 31 38 44 53 60 73 80 88 93 100 
```

```
Remove at most 8 from:
0 3 7 10 15 26 38 44 53 61 76 80 88 93 100

Solution:
0 15 38 53 76 88 100 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:46:58.440

**[编辑：我最初声称[ElKamina 的答案](https://stackoverflow.com/a/15420421/47984)是错误的，但我现在确信它不仅是正确的，而且与我（后来的）答案几乎相同 :-P 虽然我的口味仍然有点简洁！]**

这是一个精确的**O(NM^2) 时间、O(NM) 空间** [动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)算法，可以在毫秒内获得所有 OP 示例的正确答案。基本思想是：

1.  *每当我们施加不*应该删除特定数字的约束时，它就会在两个子问题之间形成一道“栅栏”，从而以最优方式解决每个子问题，从而保证在该约束到位的情况下对整个问题的最优解，并且
2.  每个最优解必须以一个未删除的数字开始，然后是一些连续删除的数字，然后是一个未删除的数字，然后是从第二个未删除的数字开始的问题剩余部分的最优解，并且使用适当减小的 M。

下面，x[i] 表示列表中的第 i 个数字，索引从 0 开始。

## 递归

令 f(i, j) 是可从位置 0 <= i < N 开始的数字列表的后缀获得的最佳（最大最小）间隔大小，方法是保留这个（即第 i 个）数字并精确删除后面的 j (不一定是连续的）数字。以下递归显示了如何计算它：

```
f(i, j) = max(g(i, j, d)) over all 0 <= d <= min(j, N-i-2)
g(i, j, d) = min(x[i+d+1] - x[i], f(i+d+1, j-d)) 
```

存在而`min(j, N-i-2)`不是简单的 j 以防止删除“结束”。我们需要的唯一基本情况是：

```
f(N-1, 0) = infinity (this has the effect of making min(f(N-1), 0), z) = z)
f(N-1, j > 0) = 0 (this case only arises if M > N - 2) 
```

## 这个怎么运作

更详细地说，为了计算 f(i, j)，我们要做的是遍历从位置 i+1 开始的所有可能的连续删除数（包括零），在每种情况下计算 (a) 由下式形成的区间的最小值该删除块和（b）从该块右侧的第一个未删除数字开始的子问题的最佳解决方案。 *重要的是要指定块中的第一个数字 (x[i]) 不会被删除，这样前一个（父）子问题的间隔总是“上限”。* 这是一个棘手的部分，我花了一段时间才弄清楚。

## 让它快速

如果你编写上面的普通递归，它会起作用，但它会花费 M 和 N 的指数时间。通过[记忆](http://en.wikipedia.org/wiki/Memoization)f()，我们保证它的主体将最多运行 N * M 次（每个不同的参数组合一次） . 每次函数运行时，它都会对越来越长的删除块执行 O(M) 工作扫描，总共需要 O(NM^2) 时间。

您不能通过使用更少的删除来创建更大的间隙，因此可以通过查看 M+1 个结果 f(0, M), f(0, M-1), ..., f 找到总体最大的最小间隔大小(0, 0) 表示小于前一个数字的第一个数字：前一个数字是答案，f() 的第二个参数是所需的最小删除次数。要找到最佳解决方案（即删除的特定数字的列表），您可以将做出的决定记录在单独的前驱数组中，以便 p[i, j] 给出 d 的值（可以转换为i 和 j) 导致 f(i, j) 的最优解。（也许这里的“前辈”是混淆的：它指的是*之前解决的子问题*当前子问题，尽管这些子问题出现在表示当前子问题的后缀“之后”（右侧）。）然后可以遵循这些链接来恢复做出的删除/不删除决定。

## 工作 C++ 代码

[http://ideone.com/PKfhDv](http://ideone.com/PKfhDv)

## 附录：早期失误

对于像这样一个棘手的问题，查看错误的方法并准确了解它们出错的地方会很有帮助...... :-/ 我以为我已经解决了这个问题，但我没有注意到返回解决方案的要求使用尽可能少的删除，我最初尝试解决这个问题并没有奏效。

起初，我尝试将 f(i, j) 定义为可从从位置 0 <= i < N 开始的数字列表的后缀获得的最佳（最大最小）间隔大小，方法是保留这个（即第 i 个）数字并删除*任何地方从 0 到 j*后面的（不一定是连续的）数字。但这引起了一个微妙的问题：您不一定可以从最佳解决方案到子问题的最佳解决方案中组装出最佳解决方案。我最初认为这可以通过更改函数以返回一个（间隔大小，实现该间隔大小所需的最小删除数）对而不只是一个间隔大小来解决，并让它打破共享最大最小间隔的动作之间的联系通过始终选择最小化删除次数的操作来确定大小。但一般情况下并非如此，因为子问题的最优解（即数字列表的某些后缀）将花费删除使该区域中的最小间隔大小尽可能大，即使这些删除被证明是浪费的，因为完整解决方案的前缀无论如何都会迫使整体最小值降低。这是一个使用 f() 的反例，它返回（间隔大小，达到该大小所需的最小删除数）对：

```
Problem: M = 1, X = [10 15 50 55].

f(2, 0) = (5, 0) (leaving [50 55])
f(1, 1) = (40, 1) (delete 50 to leave [15 55]); *locally* this appears better
          than not deleting anything, which would leave [15 50 55] and yield
          a min-gap of 5, even though the latter would be a better choice for
          the overall problem)
f(0, 1) = max(min(5, f(1, 1)), min(40, f(2, 0))
        = max(min(5, 40), min(40, 5))
        = (5, 1) (leaving either [10 15 55] or [10 50 55]) 
```

我没有展示 f(0, 1) 返回的对的第二个元素的工作，因为它很难简洁地表达，但显然它会是 1，因为两种选择都需要删除 1 次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T21:18:59.050

使用动态规划。

线索 X(i,j) 包含与前 i 个元素的最小距离，其中 j 被选中（即未删除）。

这将为您提供准确的解决方案。复杂度 = O(MN^2)，因为对于每个 i 值，只有 M 个 j 的有效值，并且每次调用函数都需要做 O(M) 的工作。

设元素为 A1,A2,...,An

更新公式为：

X(i+1,j+1) = Max( Min(A(i+1)-Ak, Xkj) for k<=i)

**[由 j_random_hacker 编辑以添加评论中的信息]**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T14:36:03.023

我想我得到了解决方案。它至少适用于两个样本集。它不一定返回与答案相同的集合，但它返回的集合具有相同的最小值。它也是迭代和贪婪的，这很好，并且有很多方法可以优化它。看起来它是 MLog(N)。

重要的是要意识到数字并不重要——只有它们之间的差异才重要。当你“删除一个数字”时，你实际上只是结合了两个相邻的差异。我的算法将专注于差异。回到导致这些差异的项目并在你去的时候删除是一件简单的事情。

## 算法

1.  创建每个数字之间差异的有序列表/数组。
2.  找到最小的差异*x*。*如果x*的计数> 剩余的 M，则停止。你已经处于最佳状态。
3.  对于从最左边开始的每个*x*值，将该差异与较低的邻居组合（并删除该*x*）。如果邻居的值相等，则您的决定是任意的。如果只有一个邻居的值为*x*，则与另一个邻居合并。（如果您别无选择，例如 [1, 1, ...]，则与匹配的*X*组合，但如果可以，请避免使用。）
4.  返回第 2 步，直到用完*M*。

### 算法说明

第 3 步有一个点，我将其标记为任意决定。可能不应该是这样，但是您遇到了足够多的情况，这是您要添加多少复杂性的问题。这种任意性允许存在多个不同的正确答案。如果您看到两个具有相同值的邻居，此时，我说任意选择一个。理想情况下，您可能应该检查距离为 2 的邻居，然后是 3，以此类推，并支持较低的邻居。如果您在扩展时遇到边缘，我不确定该怎么办。最终，要完美地完成这部分，您可能需要递归调用此函数并查看哪个评估更好。

## 遍历样本数据

### 先第二个：

最多删除 8 个： 0 3 7 10 15 26 38 44 53 61 76 80 88 93 100

[3, 4, 3, 5, 11, 12, 6, 9, 8, 15, 4, 8, 5, 7] M = 8

删除 3's。边缘上的移除只能在一个方向上添加：

[7, 3, 5, 11, 12, 6, 9, 8, 15, 4, 8, 5, 7] M = 7

[7, 8, 11, 12, 6, 9, 8, 15, 4, 8, 5, 7] M = 6

接下来，去掉 4：[7, 8, 11, 12, 6, 9, 8, 15, 12, 5, 7] M = 5

接下来，去掉 5：[7, 8, 11, 12, 6, 9, 8, 15, 12, 12] M = 4

接下来，去掉 6：[7, 8, 11, 12, 15, 8, 15, 12, 12] M = 3

接下来，去掉 7: [15, 11, 12, 15, 8, 15, 12, 12] M = 2

接下来去掉8: [15, 11, 12, 15, 23, 12, 12] M = 1 // 注意，任意决定添加方向

最后，去掉 11: [15, 23, 15, 23, 12, 12]

请注意，在答案中，最低差值为 12。

### 第一个最后一个

最多删除 7 个： 0 3 7 10 15 18 26 31 38 44 53 60 61 73 76 80 81 88 93 100

[3, 4, 3, 5, 3, 8, 5, 7, 6, 9, 7, 1, 12, 3, 4, 1, 7, 5, 7] M = 7

删除 1：

[3, 4, 3, 5, 3, 8, 5, 7, 6, 9, 8, 12, 3, 4, 1, 7, 5, 7] M = 6

[3, 4, 3, 5, 3, 8, 5, 7, 6, 9, 8, 12, 3, 5, 7, 5, 7] M = 5

剩下 4 个 3，所以我们可以删除它们：

[7, 3, 5, 3, 8, 5, 7, 6, 9, 8, 12, 3, 5, 7, 5, 7] M = 4

[7, 8, 3, 8, 5, 7, 6, 9, 8, 12, 3, 5, 7, 5, 7] M = 3

[7, 8, 11, 5, 7, 6, 9, 8, 12, 3, 5, 7, 5, 7] M = 2 // 注意右边任意加

[7, 8, 11, 5, 7, 6, 9, 8, 12, 8, 5, 7, 5, 7] M = 1

接下来我们将删除 5，但只允许删除 1，并且有 3，所以我们在这里停止。我们的最低差是 5，匹配解决方案。

**注意**：对于 SauceMaster 提出的 1、29、30、31、59 案例，从组合相同*X值到避免这样做的想法进行了编辑。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T23:35:40.080

我希望不要使用所有组合的方法，但经过多次尝试，这似乎是将我的结果与 j_random_hacker 匹配的唯一方法。（下面的一些评论与此答案的早期版本有关。）我对 j_random_hacker/ElKamina 的算法在 Haskell（'jrhMaxDiff'）中的简洁表达印象深刻。他的函数“compareAllCombos”查找我们两种方法结果的差异：

```
*Main> compareAllCombos 7 4 4
Nothing 
```

算法：

```
1\. Group the differences: [0, 6, 11, 13, 22] => [[6],[5],[2],[9]]

2\. While enough removals remain to increase the minimum difference, extend the 
   minimum difference to join adjacent groups in all possible ways:

   [[6],[5],[2],[9]] => [[6],[5,2],[9]] and [[6],[5],[2,9]]...etc.

   Choose the highest minimum difference and lowest number of removals. 
```

哈斯克尔代码：

```
import Data.List (minimumBy, maximumBy, groupBy, find)
import Data.Maybe (fromJust)

extendr ind xs = 
  let splitxs = splitAt ind xs
      (y:ys) = snd splitxs
      left = snd y
      right = snd (head ys)
  in fst splitxs ++ [(sum (left ++ right), left ++ right)] ++ tail ys

extendl ind xs = 
  let splitxs = splitAt ind xs
      (y:ys) = snd splitxs
      right = snd y
      left = snd (last $ fst splitxs)
  in init (fst splitxs) ++ [(sum (left ++ right), left ++ right)] ++ tail (snd splitxs)

extend' m xs =
  let results = map (\x -> (fst . minimumBy (\a b -> compare (fst a) (fst b)) $ x, x)) (solve xs)
      maxMinDiff = fst . maximumBy (\a b -> compare (fst a) (fst b)) $ results
      resultsFiltered = filter ((==maxMinDiff) . fst) results
  in minimumBy (\a b -> compare (sum (map (\x -> length (snd x) - 1) (snd a))) (sum (map (\x -> length (snd x) - 1) (snd b)))) resultsFiltered
   where 
     solve ys = 
       let removalCount = sum (map (\x -> length (snd x) - 1) ys)
           lowestElem = minimumBy (\a b -> compare (fst a) (fst b)) ys
           lowestSum = fst lowestElem
           lowestSumGrouped = 
             map (\x -> if (fst . head $ x) == 0 
                           then length x 
                           else if null (drop 1 x) 
                                   then 1 
                                   else if odd (length x)
                                           then div (length x + 1) 2
                                           else div (length x) 2)
             $ filter ((==lowestSum) . fst . head) (groupBy (\a b -> (fst a) == (fst b)) ys)
           nextIndices = map snd . filter ((==lowestSum) . fst . fst) $ zip ys [0..]
           lastInd = length ys - 1
       in if sum lowestSumGrouped > m - removalCount || null (drop 1 ys)
             then [ys]
             else do
               nextInd <- nextIndices          
               if nextInd == 0
                  then solve (extendl (nextInd + 1) ys)
                  else if nextInd == lastInd
                          then solve (extendr (nextInd - 1) ys)
                          else do 
                            a <- [extendl nextInd ys, extendr nextInd ys]
                            solve a

pureMaxDiff m xs = 
  let differences = map (:[]) $ tail $ zipWith (-) xs ([0] ++ init xs)
      differencesSummed = zip (map sum differences) differences
      result = extend' m differencesSummed
      lowestSum = fst result
      removalCount = sum (map (\x -> length (snd x) - 1) (snd result))
  in if null (filter ((/=0) . fst) differencesSummed)
        then (0,0)
        else (removalCount, lowestSum)

-- __j_random_hacker's stuff begins here

-- My algorithm from http://stackoverflow.com/a/15478409/47984.
-- Oddly it seems to be much faster when I *don't* try to use memoisation!
-- (I don't really understand how memoisation in Haskell works yet...)
jrhMaxDiff m xs = fst $ fromJust $ find (\(x, y) -> snd x > snd y) resultPairsDesc
  where
    inf = 1000000
    n = length xs
    f i j =
      if i == n - 1
         then if j == 0
                 then inf
                 else 0
         else maximum [g i j d | d <- [0 .. min j (n - i - 2)]]
    g i j d = min ((xs !! (i + d + 1)) - (xs !! i)) (f (i + d + 1) (j - d))
    resultsDesc = map (\i -> (i, f 0 i)) $ reverse [0 .. m]
    resultPairsDesc = zip resultsDesc (concat [(tail resultsDesc), [(-1, -1)]])

-- All following code is for looking for different results between my and groovy's algorithms.
-- Generate a list of all length-n lists containing numbers in the range 0 - d.
upto 0 _ = [[]]
upto n d = concat $ map (\x -> (map (\y -> (x : y)) (upto (n - 1) d))) [0 .. d]

-- Generate a list of all length-maxN or shorter lists containing numbers in the range 0 - maxD.
generateAllDiffCombos 1 maxD = [[x] | x <- [0 .. maxD]]
generateAllDiffCombos maxN maxD =
  (generateAllDiffCombos (maxN - 1) maxD) ++ (upto maxN maxD)

diffsToNums xs = scanl (+) 0 xs

generateAllCombos maxN maxD = map diffsToNums $ generateAllDiffCombos maxN maxD

-- generateAllCombos causes pureMaxDiff to produce an error with (1, [0, 0]) and (1, [0, 0, 0]) among others,
-- so filter these out to look for more "interesting" differences.
--generateMostCombos maxN maxD = filter (\x -> length x /= 2) $ generateAllCombos maxN maxD
generateMostCombos maxN maxD = filter (\x -> length x > 4) $ generateAllCombos maxN maxD

-- Try running both algorithms on every list of length up to maxN having gaps of
-- size up to maxD, allowing up to maxDel deletions (this is the M parameter).
compareAllCombos maxN maxD maxDel =
  find (\(x, maxDel, jrh, grv) -> jrh /= grv) $ map (\x -> (x, maxDel, jrhMaxDiff maxDel x, pureMaxDiff maxDel x)) $ generateMostCombos maxN maxD
--  show $ map (\x -> (x, jrhMaxDiff maxDel x, pureMaxDiff maxDel x)) $ generateMostCombos maxN maxD 
```

# deployment - LESS 部署和构建自动化

> ID：15419794
> 
> 赞同：2
> 
> 时间：2013-03-14T20:44:40.453
> 
> 标签：deployment, less, build-automation

我一直想在 Web 开发中学习构建自动化，而在构建 Android 应用程序方面只有真正的 ANT 经验。

我想构建使用 LESS 的网站，但我不知道如何实现这一点，因为这听起来像是在开发中使用嵌入式 JS 方法并在部署时将 LESS 编译成 CSS 的好习惯，但我不明白一个好的方法这将匹配构建脚本中 jess.js 的 LESS 链接和 JS 包含。例如

更换：

```
... html ...

<link rel="stylesheet/less" type="text/css" href="styles.less" />
<script src="less.js" type="text/javascript"></script>

... html ... 
```

和：

```
<link rel="stylesheet/css" type="text/css" href="styles.min.css" /> 
```

我希望我所提到的有意义。

**有用**

*   [HTML5 样板构建脚本](https://github.com/h5bp/ant-build-script)
*   [平](http://www.phing.info/)

如果有人可以就此事给我任何指示/建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:08:11.090

我在 Less.js 的核心团队。如果可以避免，请不要使用 LESS 的浏览器版本（例如，您可能允许用户在浏览器中实时编辑“主题”......但除非您正在做类似的事情，否则请避免浏览器版本）。

尝试使用此构建工具将 Less 编译为 CSS：[https](https://github.com/assemble/assemble-styles) ://github.com/assemble/assemble-styles 。推荐的做法是将 LESS 预编译为 CSS，并且 assemble-styles 可以轻松创建“捆绑”或 LESS/CSS 文件的多个版本，并且您可以添加监视任务，以便在处理 LESS 时它们自动编译为 CSS 的文件。

随着 LESS 作为开发过程的一部分被编译为 CSS，您可以将精力集中在您希望如何在生产中处理 CSS（甚至不必考虑 LESS）。说得通？如果您有任何问题，我很乐意为您提供帮助。

如果您熟悉`npm`，那么这很容易使用。做就是了`npm install assemble-styles`

然后按照 README 中的说明进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:11:00.203

No build script will be able to merge a css file with a js file as in your example. They are two completely different languages serving two completely different needs, and they need to be kept apart from each other. As Less is, in the end, just CSS it makes no sense to merge a Less file into a js file.

Moreover best practices suggest to put **css** links in the head of your document (as Steve Souders suggests [here](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_4/)) and **javascript** code at the end of the document, just before the closing body tag (again Steve Souders, [here](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_5/)). If you follow these rules (which is strongly recommended for performance) you'll end up placing css links far away from your js scripts in the html, like so:

```
<html>
  <head>
     <link rel="stylesheet/less" type="text/css" href="styles.css" />
  </head>
  <body>

  ....here goes the content of the page

    <script type="text/css" src="scripts.js"></script>
  </body>
</html> 
```

Now, let's imagine a very basic workflow. You have your bare-bones HTML structure and you need to adjust its layout. You add a css reset (`reset.css`) and start styling your document in a Less file called `style.less`. If you add

```
 <link rel="stylesheet/less" type="text/css" href="styles.less" /> 
```

in the head of your document you won't be able to see any change as browsers do NOT understand .less files. These files need to be pre-processed and "translated" in css, so browsers can parse them and apply the given styles to the HTML page. So you'll run your (.less) file into a preprocessor which in turn will spit out a css file. So your `<head>` will be:

```
<head>
  <link type="text/css" href="css/reset.css" />
  <link type="text/css" href="css/styles.css" />
</head> 
```

Notice that the styles.less file will NOT be referenced in the HTML, but only its CSS counterpart styles.css. When you'll be satisfied with your layout it'll be time to move on.

Here's now a good place for a build script to really shine. A build script will (among other things) concatenate external files of the same kind. In this case it will be able to merge these two files in a single one. Your new `<head>` will be:

```
<head>
  <link type="text/css" href="css/main.css" />
</head> 
```

The same thing will happen with js files at the bottom. From:

```
 <script src="one.js" type="text/javascript"></script>
 <script src="two.js" type="text/javascript"></script>
 <script src="three.js" type="text/javascript"></script> 
```

to:

```
 <script src="scripts.js" type="text/javascript"></script> 
```

As I said this is a very basic, rough example of a workflow using Less (or Sass/Scss, or Stylus) and a build script. I would say that Paul Irish gave the simplest and clearest representation of a build script in action in [this](http://www.youtube.com/watch?v=OXpCB3U_4Ig) video, which I highly recommend, especially because it features the HTML5 Boilerplate, as referenced in your question.

Hope this helped you better understanding, let me know if you have any doubts.

# android - 无法打开 FileInputStream

> ID：15419799
> 
> 赞同：2
> 
> 时间：2013-03-14T20:45:12.540
> 
> 标签：android, file, fileinputstream

我在使用`FileInputStream`对象读取文件时遇到问题。我想打开的文件存在（我用同一个应用程序创建了它，我可以用我设备上的文件管理器看到它）。这就是方法：

```
public String readFile(String name) {
    try {
        FileInputStream fis;
        String res = "", read;
        File tmp = new File(directory, name);
        fis = new FileInputStream(tmp);

        InputStreamReader isr = new InputStreamReader(fis);
        BufferedReader buffered_reader = new BufferedReader(isr);

        read = buffered_reader.readLine();
        while (read != null) {
            res = res + read;
            Log.i("AAAAAAAAAAAAAAAAA", "letto"+read);
            read = buffered_reader.readLine();
        }
        isr.close();
        fis.close();
        return res;

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Log.i("AAAAAAAAAA", "Letto un cazzo");
    return null;
} 
```

其中目录变量声明为：

```
private static File directory; 
```

存储应用程序目录的静态对象文件。问题出在哪里？

Logcat 说

> 打开失败的enoent（没有这样的文件或目录）

在行

```
fis = new FileInputStream(tmp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:17:25.910

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:54:51.673

> open failed enoent (no such file or directory)

My suggestion is to fix it as

```
FileInputStream fis;
File tmp = new File(directory, name);
if (tmp.exists() && tmp.isFile()) {
   fis = new FileInputStream(tmp);
   InputStreamReader isr = new InputStreamReader(fis);
   BufferedReader buffered_reader = new BufferedReader(isr);
   // next lines ...
}
else {
  // error
} 
```

So there is not way how to make it work. You need to pass correct `FILE_PATH` or it won't work. Also check if you have permission for reading and writing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:50:42.163

`FileInputStream openFileInput(String nameOfFile)`

打开与此上下文的应用程序包关联的私有文件以进行读取。

从阿皮。我已经使用它并且没有问题。

# java - IntelliJ Plugin Dev - 无法为部署准备插件

> ID：15419801
> 
> 赞同：1
> 
> 时间：2013-03-14T20:45:18.397
> 
> 标签：java, intellij-idea, jbehave, intellij-plugin, jbehave-plugin

我正在尝试从[github repo](https://github.com/witspirit/IntelliJBehave)下载 IntelliJ IDEA 插件（用于 JBehave 集成）的源代码，并将其构建到一个 jar 中，我可以将其分发给我的团队（然后他们可以将其放入他们的插件目录中进行安装） . 到目前为止我做了什么：

1.  配置IDEA SDK（我下载了社区版最新版本的源代码并构建了它）
2.  通过 zip 从 repo 下载源代码，以及 git clone
3.  从头开始创建项目，以及尝试“导入”
4.  `mvn install`在命令行中运行，运行“Make Project ”
5.  然后我寻找命令（根据本[教程](http://confluence.jetbrains.com/display/IDEADEV/Getting+Started+with+Plugin+Development#GettingStartedwithPluginDevelopment-anchor5)）

    > 构建 | 为部署准备插件模块。

![我尝试查找命令的屏幕截图](../Images/66f480dfccc90a222434b66be646ec6f.png)

如您所见，该命令不存在。

我究竟做错了什么？我试过摆弄项目/模块设置广告，我觉得我无处可去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:49:01.180

好像我使用的是过时版本的 IntelliJ (10.5)。我运行了 IntelliJ Idea 12，并创建了 IntelliJ Platform Plugin 项目（正如@CrazyCoder 建议的那样）。从那里我能够构建它。

# elasticsearch - 从弹性搜索中的索引数据中提取属性

> ID：15419802
> 
> 赞同：0
> 
> 时间：2013-03-14T20:45:20.630
> 
> 标签：elasticsearch

我很难理解 Elasticsearch 中标记器和分析器的可能性。

假设有一组产品的索引数据。每个产品都有一个带有描述文本的字段。在描述中，一种颜色被命名。

是否可以使用内置分析器或自定义标记器/分析器来提取该颜色信息（例如，基于一组关键字 [红色、绿色、蓝色、黄色等]）并将该新颜色信息附加为产品的单独字段？

使用通用属性（例如颜色、材料等）增强传入数据将是一个不错的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:40:34.997

您描述的过程更多地与实体识别有关。有不同的库可以提供文本：[OpenNLP](http://opennlp.apache.org/)、[UIMA](http://uima.apache.org/)等等。

您可能想看看[elasticsearch OpenNLP 插件](https://github.com/spinscale/elasticsearch-opennlp-plugin)，它完全符合您的要求：检测实体并将相应的字段添加到传入文档中。

# django - Django模板综述科学记数法

> ID：15419803
> 
> 赞同：2
> 
> 时间：2013-03-14T20:45:27.870
> 
> 标签：django, django-templates

我正在尝试转换，例如：

```
0.00282357936911 to 2.82e-03 and 0.000130076846614 to 1.30e-04 
```

但是，当我使用 filter 时`{{ data|stringformat:"e" }}`，我得到

```
2.823579e-03 and 1.300768e-04 
```

有没有办法四舍五入到小数点后两位？
提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:51:38.297

您可以使用：

```
{{ data|stringformat:".2e" }} 
```

`.<number>`语法指定小数点数。有关更多信息，请参阅[参考](http://docs.python.org/2/library/string.html#formatspec)。

# android - 如何完全在 XML 中创建带有选项卡的布局？

> ID：15419805
> 
> 赞同：11
> 
> 时间：2013-03-14T20:45:45.183
> 
> 标签：android, xml, layout, tabs

我正在尝试在布局中制作标签。我找到了很多使用`TabWidget`,的示例和教程`TabHost`，但它们都涉及以下内容之一：

*   活动中的 Java 代码
*   每个选项卡的单独活动
*   每个选项卡的单独片段

选项卡内的内容是静态的，所以我应该能够在布局中包含纯 XML 中的所有内容。

无论如何要这样做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T20:51:52.897

简单的答案，不。您必须设置您`TabHost`的 Java 代码并创建您的选项卡。您可以在不使用片段的情况下为选项卡设置静态布局，但仍然需要在 Java 中进行设置。

如果您不在代码中进行此设置，您`TabWidget`将不知道哪个布局对应于哪个选项卡并且将无法运行。您将不得不编写一些代码。

执行此操作的代码非常简单。

XML（放置在您想要的布局内）：

```
<TabHost android:id="@+id/tab_host"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <TabWidget android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <LinearLayout
                android:id="@+id/tab_one_container"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
            <LinearLayout
                android:id="@+id/tab_two_container"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

Java 代码（放置在您设置布局的任何位置）：

```
TabHost host = (TabHost)findViewById(R.id.tab_host);
host.setup();

TabSpec spec = host.newTabSpec("Tab One");
spec.setContent(R.id.tab_one_container);
spec.setIndicator("Tab One");
host.addTab(spec);

spec = host.newTabSpec("Tab Two");
spec.setContent(R.id.tab_two_container);
spec.setIndicator("Tab Two");
host.addTab(spec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T09:39:28.197

好的，我发现的最好的是：

[https://gist.github.com/jerolimov/618086](https://gist.github.com/jerolimov/618086)

它仍然涉及Java代码，但代码中没有重复结构，一切都在XML中。

# javascript - 未知的函数行为

> ID：15419808
> 
> 赞同：2
> 
> 时间：2013-03-14T20:45:58.620
> 
> 标签：javascript, html, logic

我试图了解此功能的作用，但我一无所知。有任何想法吗？

```
var mystery = function (str) {
    var x=true;
    for(var i=0; i<str.length/2; i++){
        if(str.charAt(i)!=str.charAt(str.length-i-1)){
            x = false;
        }
    }
    return x;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:46:38.013

它只是测试字符串是否对称，即索引处的每个字符都`i`等于与字符串结尾 (at `length-i-1`) 相同距离处的字符，例如`"radar"`。

它可以像这样简化并变得更快：

```
var mystery = function (str) {
    for (var i=0; i<str.length/2; i++){
        if (str.charAt(i) !== str.charAt(str.length-i-1)){
            return false;
        }
    }
    return true;
} 
```

而且速度更快但不太清楚：

```
var mystery = function (str) {
    for (var i=~~(str.length/2); i--;){
        if (str.charAt(i) !== str.charAt(str.length-i-1)){
            return false;
        }
    }
    return true;
} 
```

为了好玩，jspef 确认它：http: [//jsperf.com/palyndromes](http://jsperf.com/palyndromes)

# perl - Perl LibXML 编码实体

> ID：15419810
> 
> 赞同：2
> 
> 时间：2013-03-14T20:46:10.930
> 
> 标签：perl, xml-libxml

如何在 XML::LibXML 的文本节点中强制使用实体编码？

我有 toString() 输出

```
<test>&lt;text&gt;&amp;"&lt;/text&gt;</test> 
```

我需要

```
<test>&lt;text&gt;&amp;&quot;&lt;/text&gt;</test> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:07:39.940

您需要使用`XML::Entities`对字符串进行编码。

在这种情况下，您必须首先对字符串进行解码，否则您最终会得到已经存在的实体被双重编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:06:24.623

我不知道您为什么要这样做，因为这两个 XML 片段是 100% 等效的。

libxml 不再不必要地为 ' `"`' 使用实体，而不是为 ' `t`' 和 ' `.`' 使用实体。

# php - 如何从 $.post 中检索信息

> ID：15419811
> 
> 赞同：-1
> 
> 时间：2013-03-14T20:46:12.453
> 
> 标签：php, javascript, json, html

在我的 PHP 页面中单击一个保存数据的按钮后，我目前正在运行 JavaScript。

`a.js`：

```
function save(){

var oldItems = JSON.parse(localStorage.getItem('itemsArray')) || [];

var newItem = {};
var num = document.getElementById("num").value;

newItem[num] = {
    "methv": document.getElementById("methv").value
    ,'q1': document.getElementById("q1").value,
    'q2':document.getElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value
};

oldItems.push(newItem);

localStorage.setItem('itemsArray', JSON.stringify(oldItems));

$.post('edit.php', { items: JSON.stringify(oldItems) }, function(response) {

}); 
```

在 PHP 页面中，我的表单如下所示：

编辑.php

```
<form action="" method="post" enctype="multipart/form-data">

  <select name="methv" class="textfields" id="methv" style="width:110px" > 
    <option value= "dont know">dont know </option>

<select name="q1" class="textfields" id="q1" style="width:50px" > 
<option value= "-">-</option>
<option value= "L">L</option>

<select name="q2" class="textfields" id="q2" style="width:50px" > 
<option value= "-">-</option>
<option value= "L">L</option>

<select name="q3" class="textfields" id="q3" style="width:50px" > 
<option value= "-">-</option>
<option value= "L">L</option>

<select name="q4" class="textfields" id="q4" style="width:50px" > 
<option value= "-">-</option>
<option value= "L">L</option>

<textarea rows="4" cols="40" id="comm" name="comm" style="width:300px"><?php echo $post['addcomment'] ;?></textarea> 

</form> 
```

当我运行 PHP 页面并单击按钮时，在控制台中，我得到一个帖子：

```
[{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}] 
```

这些是来自本地存储的结果 - 一个来自单击之前和一个之后 - 被单击（每次单击按钮时添加）。如何获取此信息并将其显示在 PHP 页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:25:06.527

您是否已经有一个 edit.php 文件来处理 POST 请求？如果没有，此链接可能会对您有所帮助。[http://edwin.baculsoft.com/2011/12/how-to-handle-json-post-request-using-php/](http://edwin.baculsoft.com/2011/12/how-to-handle-json-post-request-using-php/)

一旦 edit.php 设置为处理请求和返回数据，您可能希望在响应函数中操作该数据。

```
$.post('edit.php', { items: JSON.stringify(oldItems) }, function(data) {
    // Do something here, for example...
    alert(data);
}); 
```

希望这是您正在寻找的。

# c - 指针和字符串，在 EOF 上失败

> ID：15419812
> 
> 赞同：2
> 
> 时间：2013-03-14T20:46:13.450
> 
> 标签：c

代码重写更清晰

```
void indexe(char * line, unsigned ref) {
  unsigned i = 0;
  char word[128];  //(1)
  //char * word;   //(2)
  while(*line) {
    if(isalpha(*line))
      word[i++] = *line;  //(1)
      //*word++ = *line;  //(2)
    *line++;
  }
}

int main(int argc, const char * argv[]) {
  char line[128];
  FILE * f = fopen(argv[1], "r");
  unsigned x = 0;
  while (fgets(line, 128, f)){
    indexe(line, ++x);
  }
  fclose(f);
  return 0;
} 
```

您好，以上两种组合我都试过了：

1.  ```
    单词[] -> 单词[i++]
    ```

2.  ```
    *单词-> *单词++
    ```

整个事情完美无缺，除非在达到 EOF 时，在这种情况下，指针语法因分段错误而失败，但不是数组语法。

我是一个 C 初学者，有人可以用初学者的术语解释这里发生了什么，也许可以提出一个解决指针语法的解决方案？（但请解释一下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:29:20.820

正如发布的那样，这个版本很好：

```
void indexe(char * line, unsigned ref) {
  unsigned i = 0;
  char word[128];  //(1)
  //char * word;   //(2)
  while(*line) {
    if(isalpha(*line))
      word[i++] = *line;  //(1)
      //*word++ = *line;  //(2)
    *line++;
  }
} 
```

但是，如果您建议代码改用标记为 //(2) 的行，您将得到：

```
char * word;   //(2
*word++ = *line;  //(2) 
```

这只是写入您尚未使用分配的内存初始化的指针的一种情况。这是不允许的。您需要将其保留为数组，或使用类似`malloc`保留存储的东西。如果你想在不使用数组的情况下编写函数，代码将是：

```
char *word = malloc(128);    // reserve 128 bytes 
if (word == NULL) {          // these checks are important
   fprintf(stderr, "Cannot allocate memory!");
   exit(EXIT_FAILURE);
}
...other stuff...
free(word); 
```

另请注意：

`*line++;`

increments `line`，但无缘无故地取消引用它（在它增加之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T00:33:42.783

指针语法失败，因为您已经定义了一个指针`char * word;`，但您没有将它设置为指向任何数据 - 您指向的内存可以在任何地方。因此，当您执行以下语句时：

```
*word++ = *line; 
```

您将 指向的值存储在 指向`line`的值中`word`。不幸的是，你不知道`word`指向哪里。正如@teppic 指出的那样，您正在写入一个尚未初始化为分配内存的指针。

正如@teppic 之前指出的那样，您可以分配该内存。您还可以执行以下操作：

```
char reserve[128];
char * word = reserve;  // could also have used &reserve[0] 
```

希望有帮助！

# javascript - Coffeescript 中的源映射 - 错误未映射到源

> ID：15419813
> 
> 赞同：10
> 
> 时间：2013-03-14T20:46:16.040
> 
> 标签：javascript, google-chrome, coffeescript, source-maps

我刚刚意识到源映射——一个期待已久的功能。这么多人聚在一起为咖啡脚本（浏览器、kickstart 项目等）实现这一目标给我留下了深刻的印象

我设置了一个小测试，所以我可以理解如何使用它......

## 咖啡脚本

***注意这里有一个故意的错误，因为`y`没有定义***

```
console.log 123

sq = (x)->
  x * x

console.log "thats how easy: "+sq y 
```

## 源图

```
{
  "version": 3,
  "file": "test.js",
  "sourceRoot": "",
  "sources": [
    "test.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;CAAA,CAAA,IAAA;CAAA;CAAA,CAAA,CAAA,IAAO;;CAAP,CAEA,CAAK,MAAC;CACJ,EAAI,QAAJ;CAHF,EAEK;;CAFL,CAKA,CAAA,IAAO,WAAK;CALZ"
} 
```

## Javascript

```
// Generated by CoffeeScript 1.6.1
(function() {
  var sq;

  console.log(123);

  sq = function(x) {
    return x * x;
  };

  console.log("thats how easy: " + sq(y));

}).call(this);
//@ sourceMappingURL=test.map 
```

## 玉

```
html
  head
    script(src="test.js")
  body
    h1 Test Page 
```

这一切似乎都在工作，因为显示了咖啡脚本源，我什至可以设置断点（但图形似乎没有显示，并且在 javascript 中设置断点的位置似乎有点不稳定）。

我遇到的问题是，当出现错误时，控制台会报告 javascript 文件的行号。如何找出导致错误的咖啡脚本源文件的行？

我在 OSX 10.8.2 上使用 Google Chrome 版本 23.0.1271.101

![js错误](../Images/e74665508a346cb3fc37852d5a3902d2.png) ![cs没有错误](../Images/e66c666b1747441a3398942f2cabd92c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T01:00:27.767

实际上，我只是回答了与您的问题非常相似的我自己的问题。你可以看看[这里](https://stackoverflow.com/a/16226725/885016)。

我正在使用的解决方案是使用 browserify 连接/编译我所有的咖啡脚本，使用咖啡作为转换选项。当在 browserify 中将 debug 设置为 true 时，您的所有行号都应映射回原始咖啡脚本源中的正确行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T19:14:10.040

我发现问题只出现在 Chrome 控制台的初始打开时。

如果在控制台打开时刷新浏览器，控制台将更新源映射文件的链接。

此外，如果您先打开控制台然后导航到该页面，控制台将使用指向源映射文件的链接进行更新。

这是与 Chrome 首次打开控制台相关的问题。

# java - 在 Spring 中定义 @ManyToOne 关系后，如何访问基础列？

> ID：15419814
> 
> 赞同：1
> 
> 时间：2013-03-14T20:46:16.320
> 
> 标签：java, spring, hibernate, spring-roo, spring-data-jpa

我正在使用 Spring 3.2 和 Roo 1.2.3 通过 Hibernate 构建一个数据库支持的 Java 应用程序。我的数据库中的表之间有几个双向 OneToMany/ManyToOne 关系。当我使用@JoinColumn（通过 Roo 中的“字段引用”）设置关系的 ManyToOne 端时，会创建一个类型为相关实体（ManyToOne 中的“one”）的新字段。但是，一旦完成此操作，似乎就无法访问 ManyToOne 关系所基于的基础列值。当底层连接列包含应用程序所需的数据时（即当连接列包含产品库存编号时），这是一个问题。

有没有办法设置我的实体类，以便它的 ManyToOne 关系所基于的列仍然可以访问，而无需遍历新的 join 属性？如何为该列的值定义访问器方法？

这几天我一直在网上寻找这个问题的答案，但无济于事。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:48:09.023

只需使用 insertable=false 和 updateable=false 再次映射该列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-07T13:13:19.480

使其更具体。可以执行 HQL-SELCT 并限制**ManyToOne**关系，**而不需要**在结果**SQL**中加入任何连接：

而不是使用加入

```
session.createQuery("FROM Person person WHERE person.adress.id = 42") 
```

我们使用可以使用`adress_id`列

```
session.createQuery("FROM Person person WHERE person.adressId = 42") 
```

如果您指定一个额外的`adressId`字段，这将有效，该字段仅用作 Hibernate 的映射信息：

```
@Entity
@Access(AccessType.FIELD)
public class Person{
    @Id
    String id;

    @JoinColumn(name = "adress_id") 
    @ManyToOne(fetch = FetchType.LAZY)
    @Nullable
    public Adress adress;

    @Column(name = "adress_id", insertable = false, updatable = false)
    private String adressId;
}

@Entity
@Access(FIELD)
public class Adress{
    @Id
    String id;
} 
```

`AccessType.FIELD`不需要（但我们可以在示例中留下 getter/setter）。`FetchType.LAZY`and也是可选的`@Nullable`，但在使用它时要明确说明。我们能够加载`Person`具有特定`Address`（我们知道地址 id）的实体。但是我们不需要连接，因为 WHERE 子句不需要连接，初始获取也不需要连接（可以延迟获取地址）。

# kineticjs - 使用 kineticjs 将 .eps 图像加载到画布

> ID：15419815
> 
> 赞同：0
> 
> 时间：2013-03-14T20:46:24.460
> 
> 标签：kineticjs

有谁知道您是否可以使用 kineticjs 将 eps 图像加载到画布上？我想将图像设置为具有缩放功能的背景，但非矢量图像效果不佳。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:12:09.203

**不——您不能加载 .eps 文件。**

我刚刚重试并确认加载 .eps 失败。

这并不是真正的 KineticJs 限制。这是不知道如何解码和显示 .eps 文件的 html img 标签/Image() 对象的限制。

FWIW，如果您对 EPS 文件进行了大量投资，您可以尝试将 .eps 转换为 .svg。img 和 Image() 都知道如何显示 .svg。

# objective-c - UIDocumentInteractionController - 快速视图永远不会完成加载文档

> ID：15419820
> 
> 赞同：1
> 
> 时间：2013-03-14T20:46:40.377
> 
> 标签：objective-c, uidocumentinteraction

我在 iPad 应用程序中实现了 UIDocumentInteractionController - 目的是打开从联网位置获取的文档并显示它们。

在网上看，我已经走了这么远：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    NSString *filePath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"test.docx"];
    NSLog(@"Path is %@", filePath);
    docController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];
    docController.delegate = self;
    [docController presentPreviewAnimated:YES];
}

- (UIViewController *) documentInteractionControllerViewControllerForPreview: (UIDocumentInteractionController *)controller
{
    return self;
}

- (UIView *)documentInteractionControllerViewForPreview:(UIDocumentInteractionController *)controller
{
    return self.view;
}

- (CGRect)documentInteractionControllerRectForPreview:(UIDocumentInteractionController *)controller
{
return self.view.frame;
} 
```

虽然这有效，或者至少不会崩溃，但我只是得到一个动画“加载”屏幕。该文档非常小，您可以从位于项目中的代码示例中看到，因此根本不需要花费任何时间来加载。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:18:17.277

也许您有问题，因为 UIDocumentInteractionController 仅适用于本地文件，请首先尝试将文件下载并保存在设备中。

# c# - C# WinForms 右键单击 上下文菜单而不选择项目

> ID：15419821
> 
> 赞同：-1
> 
> 时间：2013-03-14T20:46:44.110
> 
> 标签：c#, winforms, events, event-handling

我在 c# winforms 上有一个右键菜单，问题是当我右键单击以获取菜单时，当我右键单击时如何不让它选择项目？

我发现了一个类似的问题，但它是针对[此链接的 WPF](https://stackoverflow.com/questions/1075170/wpf-listview-right-click-problem)

问题是我有受右键单击影响的 index_changed 事件，我不希望它发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:20:26.623

我猜您希望在 Listviews selected index changed 事件中处理此问题.....下面的示例显示了如何确定按下的按钮。它所做的只是告诉您是否单击了鼠标右键。这是我可以在不知道您的代码的情况下展示的最简单的示例。

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
    MessageBox.Show(Form.MouseButtons.HasFlag(MouseButtons.Right).ToString());
} 
```

# spring - 事务管理器为空

> ID：15419822
> 
> 赞同：0
> 
> 时间：2013-03-14T20:46:46.320
> 
> 标签：spring, hibernate, session, spring-mvc, transactions

我不能`@Transactional`去上班。我有`applicationContext.xml`：

```
<bean
    id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property
        name="sessionFactory"
        ref="sessionFactory" />
    <property
        name="dataSource"
        ref="dataSource">
    </property>
</bean> 
```

上面的事务管理器没有注入任何地方。

我在 spring-servlet.xml 中有：

```
<!-- Allows transaction to be demarcated using @Transactional within classes.-->
<tx:annotation-driven
    mode="proxy"
    proxy-target-class="true" /> 
```

我有一个很少有 DI 的门面 bean

```
<!-- Bean for getting a handle onto the DAO's for accessing the database. -->
<bean id="evoDaoFacade" class="com.xxx.yyy.zzz.discovery.hibernate.EvoTAMDAOFacade">
...
    <property name="topoObjectDao" ref="topoObjectDao"></property>
    <property name="sessionFactory" ref="sessionFactory"></property> 
```

在我的代码中，我通过以下方式将上述外观放入我的非弹簧实例化类中：`spring-servlet.xml`

```
<bean
    id="ApplicationContextProvider"
    class="com.xxx.yyy.zzz.config.ApplicationContextProvider">
</bean> 
```

在代码中：

```
EvoTAMDAOFacade evoDao = (EvoTAMDAOFacade) ApplicationContextProvider.getBean("evoDaoFacade"); 
```

但是当我去使用通过门面访问的DAo时：

```
TopoObject topoobj = evoDao.getTopoObjectDao().findById(topoId); 
```

其中 findById 如下：

```
@Transactional
public TopoObject findById( TopoObjectId id) {
        log.debug("getting TopoObject instance with id: " + id);
        try {
            TopoObject instance = (TopoObject) sessionFactory.getCurrentSession()
                    .get("com.xxx.yyy.zzz.discovery.hibernate.TopoObject", id);
            return instance;
        } catch (RuntimeException re) {
            log.error("get failed", re);
            throw re;
        }
    } 
```

我得到休眠异常说 org.hibernate.HibernateException: No Hibernate Session bound to thread，并且配置不允许在这里创建非事务性会话

我的`@transactional`用法有什么问题？

# deployment - TFS 2012 - 在多台机器上发布或部署构建？

> ID：15419835
> 
> 赞同：2
> 
> 时间：2013-03-14T20:47:13.863
> 
> 标签：deployment, build, visual-studio-2012, continuous-integration

我们通过 TFS 2012 进行了持续集成设置。 **要求：** 希望发布版本作为 CI 的一部分部署在多个服务器上。我们需要将文件 xCopy 复制到服务器文件夹中。

在带有 Azure 的 TFS 上，似乎可以将其直接发布到服务器上（[http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-tfs/)）它使用“AzureContinuousDeployment.11.xaml”作为构建过程模板。想检查是否有人尝试过自定义/本地服务器的类似发布，可能使用自定义部署模板等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T22:56:33.863

您可能希望[为自动部署和测试创建标准环境](http://nakedalm.com/standard-environments-for-automated-deployment-and-testing/)，您可以使用 TFS 2010 开箱即用地执行这些环境。TFS 2012 和 TFS 2013。

您使用作为 Microsoft 测试管理器产品一部分的“实验室中心”来配置由一台或多台目标计算机组成的环境。

![MTM 实验室中心](../Images/512fd240d784aa6ffefad075c25d3f27.png)

然后，您使用实验室默认模板将构建输出推送到目标服务器并执行脚本以完成安装。您甚至可以将集成和 UI 测试作为相同操作的一部分执行。

如果您正在寻找[与 Team Foundation Server 更集成的发布管理，](http://nakedalm.com/release-management-with-team-foundation-server-2012/)那么您应该将 Octopus Deploy 视为一直到生产的好方法。

![使用 TFS 的发布管理策略](../Images/145af8710090357d1214d6be03c6209c.png)

我们与许多客户一起使用它，它很有效……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:13:01.903

据我了解，TFS 2012 附带了一个实验室部署模板。您配置涉及哪些服务器的实验室定义，然后将部署配置到这些服务器。也用于连接测试管理器以在实验室中运行单元测试。

# angularjs - AngularJS - 指令范围未在元素上设置 ng-class

> ID：15419839
> 
> 赞同：1
> 
> 时间：2013-03-14T20:47:18.117
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

[普朗克](http://plnkr.co/edit/QJqICyTrdvAZvSjQ5Gi9)

我有一个数据表：

```
<table class="table table-hover" ng-class="dndElemClass" drag-and-drop>
  ...
</table> 
```

`$scope.dndElemClass = 'on-drag-enter'`我的目标是通过在元素的`ondragenter`事件侦听器上分配给表格一个阴影：

```
.on-drag-enter {
    -webkit-box-shadow: -3px 3px 5px 3px #ccc;
    ...
} 
```

该`onDragEnter`指令如下：

```
directive('dragAndDrop', function() {
    return {
        restrict: 'A',
        controller: function($scope) {
            $scope.dndElemClass = '';
        },
        link: function($scope, elem, attr) {
            $scope.$watch('currentFolder.canUpload', function(newValue, oldValue) {
                if (newValue && Modernizr.draganddrop && window.File) {
                    elem[0].ondragenter = function(evt) {
                        evt.stopPropagation();
                        evt.preventDefault();
                        $scope.$apply(function() {
                            $scope.dndElemClass = 'on-drag-enter';
                        });
                    };
                    elem[0].ondragleave = function(evt) {
                        evt.stopPropagation();
                        evt.preventDefault();
                        $scope.$apply(function() {
                            $scope.dndElemClass = '';
                        });
                    };
                    elem[0].ondrop = function(evt) {
                        ...
                    };
                }
            });
        }
    }
}) 
```

尽管`$scope.dndElemClass`在`ondragenter`和`ondragleave`事件侦听器中分配了值，但`<table>`似乎没有识别该值并分配类，因为没有出现阴影。

到目前为止，我已经测试过，如果我在指令的控制器属性中设置类，我在上面的代码中将其分配为空白，它确实可以识别该值，所以我知道它会从指令中接受它。将控制器中设置的类作为测试，如果我触发`ondragenter`侦听器，它将删除该类。我还确认了使用日志记录`$scope.$apply()`正确分配的值`scope.dndElemClass`，但无论出于何种原因，当在事件侦听器中设置时`$scope.$apply()`，表的`ng-class`属性将无法识别变量分配并认为它是空的。

* * *

**更新：** 根据 Josh 的评论，我清理了代码，这样我就不必`$apply`在事件侦听器回调中分配变量。

```
directive('dragAndDrop', function() {
    return {
        restrict: 'A',
        controller: function($scope) {
            $scope.dndElemClass = '';
        },
        link: function($scope, elem, attr) {
            $scope.$watch('currentFolder.canUpload', function(newValue, oldValue) {
                if (newValue && Modernizr.draganddrop && window.File) {
                    elem.bind('dragenter', function(evt) {
                        evt.stopPropagation();
                        evt.preventDefault();
                        $scope.dndElemClass = 'on-drag-enter';
                    });
                    elem.bind('dragleave', function(evt) {
                        evt.stopPropagation();
                        evt.preventDefault();
                        $scope.dndElemClass = '';
                    });
                    elem.bind('drop', function(evt) {
                        //...
                    });
                }
            });
        }
    }
}) 
```

仍然没有运气。我可以验证它正在执行带有日志记录的回调，但没有运气让变量分配被表的`ng-class`属性识别。

* * *

**更新2：阅读**[AngularJS关于 ngClass 的文档](http://docs.angularjs.org/api/ng.directive%3angClass) 后，我更加困惑。对我来说，我认为这就像将您想要的类的名称（s in a array）设置为当前控制器（或者在我的情况下，指令的）中的变量一样简单`$scope`，然后像在任何地方一样指定该变量的名称else 在元素的`ng-class=""`属性中。但正如我正在阅读的那样，当人们使用[表达式](http://docs.angularjs.org/api/ng.directive%3angClass#comment-758028928)或[切换类名](http://jsfiddle.net/mrajcok/nFcLh/)时，它似乎要复杂得多。

使用切换的想法，我分叉[了我的 plunker](http://plnkr.co/edit/U6EtAEOBsWLIduhoMUma)，`$scope.dndElemClass`根据用户是否触发`dragenter`或`dragleave`. 我还包括`$scope.$apply()`了很好的衡量标准，因为我发现我不了解`angular.bind()`over `.addEventListener`or的优势`.ondragenter = function() {};`。无论如何，这一切都没有导致表的类像我期望的那样被设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T02:58:18.637

我不确定您是否还需要答案，但我可能已经解决了您的问题。

在`CurrentFolder`控制器内部，添加

```
$scope.dndElemClass  = ''; 
```

然后包裹`$scope.dndElemClass`在里面`$apply`。

```
$scope.$apply(function() { $scope.dndElemClass = 'on-drag-enter'; }); 
```

检查[完整的 plunk](http://plnkr.co/edit/bjFMAaf6TjcQoUXD74x5)以获得更清晰的图片。

![在此处输入图像描述](../Images/61d0a6204d0103de886f6fc2b6c00bac.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T10:14:52.700

尝试在**范围内**设置类然后使用`class={{classVariable}}`！！！这对我有用。

# javascript - 迭代 - Javascript

> ID：15419845
> 
> 赞同：-7
> 
> 时间：2013-03-14T20:47:42.530
> 
> 标签：javascript, iteration

```
<html>
<body>
<script>
var namIn = window.prompt( "Enter Your FULL Name:" ); var namAr = namIn.split("");

var namArLen = namAr.length;
document.write(namAr + "<br /> Length: " + namArLen); </script>
</body>
</html> 
```

使用此代码时，如何添加一个以相反顺序显示我的名字的小迭代？因此，如果我的名字是 Ashley Smith，输出将是我的姓氏，然后是 H1 大小的新单行中的名字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:51:11.413

您可以使用简单[的 for 循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)：

```
document.write("<h1>");
for (var i=namArLen-1; i>=0; i--) {
    document.write(namAr[i]);
}
document.write("</h1>"); 
```

为简单起见，还有[`reverse`数组上的函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reverse)：

```
document.write("<h1>"+namAr.reverse().join("")+"</h1>"); 
```

# javascript - 单击按钮时使用 jQuery 获取字段

> ID：15419849
> 
> 赞同：0
> 
> 时间：2013-03-14T20:47:51.260
> 
> 标签：javascript, jquery, forms, input, input-field

我有一张满满当当的桌子。每个约会都有两个按钮。一个用于取消事件，一个用于接受它。

`appointmentId`当我单击一个按钮时，我正在努力获取jQuery 函数。你能给我一个提示吗？`appointmentId`是表中的隐藏输入字段 。

```
// my html code
<tr>
  <td align="left">
     <input type="hidden" name="appointmentId" value="234">
     John Smith - 14.03.2013 at 9 o'clock
  </td>
  <td align="right">
    <input type="button" id="acceptEvent" class="acceptEvent" value="Accept">
    <input type="button" id="cancelEvent" class="cancelEvent" value="Cancel">
  </td>
</tr>

// my jQuery code
$("body").delegate('.acceptEvent', 'click', function() {  
    console.log('accept event clicked');

    // get the appointmentId here

});

$("body").delegate('.cancelEvent', 'click', function() {  
    console.log('cancel event clicked');

    // get the appointmentId here
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:51:30.790

使用最接近获取父 tr 元素，然后选择您的隐藏字段。这是正确答案的原因是因为它使用 $(this) 获取单击事件的上下文。然后它沿着 DOM 树向上移动到您的根表行元素并按名称选择子元素。这可确保您始终位于正确的行中。

编辑：我知道你已经选择了一个答案，但这真的让我很困扰，因为它不能正常工作。尽管您也可以使用 .find('input[name="appointmentId"]')，但我不得不使用 .children() 向下走两次才能使其正常工作。即使您已经选择了答案，我希望这会对您有所帮助。

```
$('.acceptEvent').click(function() {
    var myVal = $(this).closest('tr').children().children().val();
}); 

$('.cancelEvent').click(function() {
    var myVal = $(this).closest('tr').children().children().val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:51:00.607

假设您没有其他要关闭的 ID 或类，您可以使用 jQuery 的[Attribute Equals Selector](http://api.jquery.com/attribute-equals-selector/)来引用单击按钮的父`tr`元素：

```
$('.acceptEvent').click(function() {
    // get the appointmentId here
    var appointmentId = $(this).closest('tr').find('input[name="appointmentId"]').val();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:52:42.330

在该`click`函数中，您可以访问单击的按钮，`this`因此您可以执行以下操作：

```
$("body").on('click', '.cancelEvent', function() { 
     var input = $(this).closest('tr').find('input[name="appointmentId"]').val();
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T20:53:58.083

我会这样做：

```
$("body").on('.acceptEvent', 'click', function() {  

    var id = $('input[name="appointmentId"]').val();
    //Or search in the parent <tr> 
    var id = $(this).parent().find('input[name="appointmentId"]').val();

    console.log('accept event clicked');

    console.log('Id is ' + id);

}); 
```

# javascript - jQuery 或 Javascript 正则表达式来清理 url 中的日期参数

> ID：15419851
> 
> 赞同：0
> 
> 时间：2013-03-14T20:47:53.870
> 
> 标签：javascript, jquery, grails

我的正则表达式非常粗糙，我可以用手来清理这个网址。如果有更简单的方法来解决这个问题，它不一定是正则表达式。

```
&EnrolledDate=date.struct&EnrolledDate_day=14&EnrolledDate_month=3&EnrolledDate_year=2013& 
```

出于某种原因，Grails 项目中的日期选择器是三个单独的字段而不是一个漂亮的日历，但是好的，我们可以从 jQuery 端处理三个字段。

我需要这段 URL 转换成类似的东西

```
&EnrollDate=14-MAR-2013& 
```

名称 EnrollDate 可以更改为任何名称，它只需要是从第一个“&”到第一个“=”的字符。

我也想不通为什么在 html 页面上，月份的选项被拼写出来，但是 jQuery 将它们序列化到索引位置？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:38:25.763

我不得不对变量部分和月份部分进行硬编码......希望它无论如何都会有所帮助......

```
 var str="&EnrolledDate=date.struct&EnrolledDate_day=14&EnrolledDate_month=3&EnrolledDate_year=2013&";
            var gmatches=str.match(/&Enrolled[^=]*?=[^&a-zA-Z]+/g);
            var string=[];
            int i;
            //This is for capturing the dates parts.
            for(i in gmatches){
                string.push(gmatches[i].match(/&Enrolled(.*?)=([^&][0-9]*)/i)[2]);
            }
            //for getting the months
            var months=['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            string[1]=months[(parseInt(string[1])-1)];
            var res="&name="+string.join('-')+"&";
            //res -> &name=14-Mar-2013& 
```

# javascript - 将 Jquery 按钮的值提交给服务器

> ID：15419852
> 
> 赞同：0
> 
> 时间：2013-03-14T20:48:03.963
> 
> 标签：javascript, jquery, html, jsp

我有一个带有几个按钮的表单，我想使用脚本将表单提交到服务器，所以我使用绑定到按钮的单击事件的函数。在服务器端，我希望能够获得被点击的按钮的值。如何做到这一点？

使用常规方法发布表单，我可以执行 request.getParameter() 并获取单击按钮的值。我还想在服务器端做一个 request.getParameter() 并获取此参数或其他更有效的方法。下面是我所拥有的：

**jQuery**

```
 function submitPage(){

        document.getElementById("citizenRegistration").action="citizen_registration.htm";
        document.getElementById("citizenRegistration").target="_self";    
        document.getElementById("citizenRegistration").method = "POST";
        document.getElementById("citizenRegistration").submit();

    }

     $(document).ready(function(){          

        $('#query').click(function(e){
            e.preventDefault();
                    //need to send the value of the button to server
                    alert($(this).val());
            //alert("hello");
            submitPage();

        });

    }); 
```

**jsp**

```
 <li><input id="save" type="submit" name= "user_request" value="Save"/>
    <input id="update" type="submit" name= "user_request" value="Update"/>
    <input id="query" type="submit" name= "user_request" value="Query"/>
 </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:48:16.140

```
function submitPage(actionFlag){

     // actionFlag value can be save,update,Query

     document.getElementById("citizenRegistration").action=
                       "citizen_registration.htm?actionFlag="+actionFlag;

     document.getElementById("citizenRegistration").target="_self";       
     document.getElementById("citizenRegistration").method = "POST";
     document.getElementById("citizenRegistration").submit();

} 
```

您可以将按钮值发送给函数。

```
 $('#query').click(function(e){
        e.preventDefault();
        //need to send the value of the button to server
        var buttonVal = $(this).val();
        alert(buttonVal);
        submitPage();
    }); 
```

希望这对您有所帮助。

# ssl - 一个 Azure 部署中的多个 SSL 证书

> ID：15419857
> 
> 赞同：7
> 
> 时间：2013-03-14T20:48:14.720
> 
> 标签：ssl, azure, iis-7, hosting, ssl-certificate

我有一个与此类似（但不相同）的问题：
[Azure web role - Multiple ssl certs pointing to a single endpoint](https://stackoverflow.com/q/4461260/967315)

我的天蓝色包包含多个站点。其中一些站点位于域*abc*上，而其他站点位于域*def*上。我需要使用 SSL 保护两个域，但不知道如何（如果可能的话）这样做。

这是我的配置示例：

```
<Sites>
    <Site name="sub1.abc" physicalDirectory="***">
        <Bindings>
            <Binding name="HttpIn" endpointName="HttpIn" hostHeader="sub1-staging.abc.com" />
            <Binding name="HttpsInABC" endpointName="HttpsInABC" hostHeader="sub1.abc.com" />
        </Bindings>
    </Site>
    <Site name="sub1.def" physicalDirectory="***">
        <Bindings>
            <Binding name="HttpIn" endpointName="HttpIn" hostHeader="sub1-staging.def.com" />
            <Binding name="HttpsInDEF" endpointName="HttpsInDEF" hostHeader="sub1.def.com" />
        </Bindings>
    </Site>
</Sites>
<Endpoints>
    <InputEndpoint name="HttpIn" protocol="http" port="80" />
    <InputEndpoint name="HttpsInABC" protocol="https" port="443" certificate="abc" />
    <InputEndpoint name="HttpsInDEF" protocol="https" port="443" certificate="def" />
</Endpoints>
<Certificates>
    <Certificate name="abc" storeLocation="LocalMachine" storeName="My" />
    <Certificate name="def" storeLocation="LocalMachine" storeName="My" />
</Certificates> 
```

此配置给我以下错误：

> 相同的本地端口“443”分配给角色 *** 中的端点 HttpsInABC 和 HttpsInDEF。

关于如何解决这个问题而不必单独托管它们的任何建议？

基于@JoelDSouza 的回答：

> 使用不同的端口对你有用吗

SSL 对 Windows Azure 中端口 444/445/446 等的影响是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:20:57.483

您可以使用多个 SSL 证书并将它们全部添加到同一端点，方法是自动在机器上安装证书并将 HTTPS 绑定添加到 IIS。

IIS 8 (Windows Server 2012) 支持 SNI，它使您能够将“主机头”添加到 HTTPS 绑定。

我是 Microsoft 技术布道者，我在以下位置发布了详细说明和示例“即插即用”源代码： http: [//www.vic.ms/microsoft/windows-azure/multiples-ssl-certificates-on -windows-azure-云服务/](http://www.vic.ms/microsoft/windows-azure/multiples-ssl-certificates-on-windows-azure-cloud-services/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:54:23.577

我担心你不走运 - 正如你链接到的文章中所述，每个服务器 IP 一个 SSL 证书。我想通过单独托管它们（考虑到它是基于云的，这感觉很奇怪）你将获得两个 IP，因此可以为每个 IP 地址添加一个 SSL 证书。

您也许可以将所有内容移动到一个域并使用该域中的文件夹来托管单独的站点 - 这是您无需两个托管包即可使用 SSL 证书保护所有内容的唯一方法：即而不是：

www.domain1.com 和 www.domain2.com 使用 www.mydomain.com/domain1/ 和 www.mydomain.com/domain2/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:30:37.510

使用不同的端口对你有用吗？您可以将 SSL 证书 1 与 myapp.cloudapp.net:443 和 SSL 证书 2 与 myapp.cloudapp.net:8443 一起使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T10:58:35.150

如果您不需要通配符证书，则可以使用多域证书。这样你只需要一个证书。缺点是每个子域都需要指定，如果你有很多，这可能会变得很昂贵。

# javascript - 为什么将输入集中在页面加载而不是内联？

> ID：15419859
> 
> 赞同：0
> 
> 时间：2013-03-14T20:48:26.183
> 
> 标签：javascript, html

我看到的几乎所有旨在将焦点设置到输入框的网页都将代码添加到正文 onload 事件中。这会导致代码在整个 html 文档加载后执行。从理论上讲，这似乎是一种很好的做法。

但是，根据我的经验，这通常会导致用户的双重工作，因为他们已经在两个或三个字段中输入了数据，并且当他们的光标在他们不知情的情况下跳回时正在输入另一个字段。我见过数量惊人的用户将密码的最后 2/3 输入到用户名字段的开头。因此，我总是在输入之后立即放置 JS 焦点代码，以确保没有延迟。

我的问题是：是否有任何技术原因不将此焦点代码内联？在页面末尾或 onload 事件中调用它是否有优势？考虑到明显的实际缺点，我很好奇为什么它已成为普遍做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:01:59.017

几个想法：

1.  我会使用像 jQuery 这样的框架并让这种类型的代码在`$(document).ready(...`. window.onload 直到**页面上的所有内容都完全加载**后才会运行，这解释了您所经历的延迟。`$(document).ready(...`当 jQuery 确定**DOM 已加载**时运行。你可能不用 jQuery 也能写出同样的逻辑，但它会因浏览器而异。

2.  我更喜欢将我的 Javascript 与我的 HTML 分开，因为它可以更清晰地分离关注点。然后，您的行为将与您的文档结构分开，该文档结构与您在 CSS 中的演示文稿分开。这还允许您更轻松地重用逻辑并维护该代码 - 可能跨项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:52:33.507

出于性能原因，Google 和 Yahoo 都建议将脚本放在 html 页面的底部。

雅虎文章：http: [//developer.yahoo.com/performance/rules.html#js_bottom](http://developer.yahoo.com/performance/rules.html#js_bottom)

如果它意味着正确的用户体验，您绝对应该将脚本放置在适当的位置 - 事实上，我会在输入之前加载脚本的那部分（用于选项卡输入），以确保无论连接速度有多慢它都始终有效。

“document.ready”功能允许您确保要引用的元素在 dom 中，并在加载整个文档 dom 时立即触发（这并不意味着图像已完全加载）。

如果您愿意，您可以让输入以禁用状态开始，然后在准备好文档时重新启用它们。这将处理在显示输入时脚本尚未准备好的罕见情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:56:01.877

好吧，如果您在整个页面加载之前调用它，您真的不知道在您调用时元素是否已经加载。如果你事先打电话，你应该检查元素是否真的存在，即使你知道它总是应该存在的。

然后进行内联调用，这似乎很理想。但另一方面，如果页面需要很长时间才能加载，您可以在加载阶段进行多次输入，那就太糟糕了。

您还可以检查是否已进行输入等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T21:02:01.587

还可以检查页面上的任何输入是否包含焦点`if($("input::focus, textarea::focus").length)...`，否则将焦点设置在所需的输入上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T21:18:19.450

使用`autofocus`HTML 属性指定最初应该获得焦点的元素。这将 JavaScript 解耦并在旧浏览器中优雅地降级。

# java - 所有 Thread 方法（如 getName/setName）都是线程安全的吗？

> ID：15419860
> 
> 赞同：12
> 
> 时间：2013-03-14T20:48:29.967
> 
> 标签：java, multithreading, concurrency, thread-safety

`Thread`使用像`setName`/`getName`和来自不同线程的其他方法是否安全？API没说什么，但从源码来看

```
private char name[];

public final void setName(String name) {
    checkAccess();
    this.name = name.toCharArray();
}

public final String getName() {
    return String.valueOf(name);
} 
```

似乎它可能会导致内存一致性错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T21:10:50.447

`Thread.getName()`是任何人都可以随时查询的属性。例如，监控实用程序不断查询所有线程的名称。所以该方法必须是线程安全的，否则，对于谁可以安全地访问它以及何时访问它没有明确的协议。

虽然一直很困惑为什么`Thread`使用 a`char[]`来保存它的名字，但你提出了一个更重要的问题，`getName()`显然没有正确同步。如果一个线程这样做`setName("abcd")`，另一个线程可能会观察`getName()->"ab\0\0"`。

我会将问题发布到并发兴趣列表。见[http://cs.oswego.edu/pipermail/concurrency-interest/2013-March/010935.html](http://cs.oswego.edu/pipermail/concurrency-interest/2013-March/010935.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:55:21.800

> “API 什么也没说”

如果 API 没有说明任何内容，那么您永远无法假定方法/类是线程安全的。从源代码中可以看出，访问权限`name`不是互斥的。
但对我来说，它似乎`name`具有旧值或新值，介于两者之间，因此对于必须使用的`get/setName().`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T21:48:01.247

对于初学者，如果一个线程调用`setName`而访问`name`没有以某种方式同步，则不能保证任何其他线程都会**看到**该新值。

其次，`String.valueOf(char[])`迭代`name`. 这意味着即使在此迭代期间设置了*一个*`name`字符，迭代线程也可能会看到不一致的数据——原始 char 数组的第一个字符和另一个字符的最后一个字符。

在这种特殊情况下，它不是字符之一，而是指向 char 数组开头的指针。假设对数组的迭代通过将当前迭代索引添加到该指针的引用地址来计算要访问的下一个单元格，它确实也会导致数据不一致。

****编辑****

关于第二种不安全的情况，在阅读[了这个问题和答案](https://stackoverflow.com/questions/11210369/openjdk-implementation-of-system-arraycopy)之后，实际上数组副本是如何实现的似乎不太明显——它依赖于平台。这解释了为什么`String,valueOf(char[])`没有记录为线程安全的。因此，无论如何，第二种情况仍然适用于非线程安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T22:01:25.343

**如果线程对象**在其他线程之间共享（这可能是不寻常的，但仍然可能 - 如果您以这种方式编写解决方案），那么它不是线程安全的。它很容易受到竞争条件的影响，就像任何其他类或对象一样。

例子：

```
Thread t1 = new SomeThread(); t1.start();
(new MyThread(t1, new Runnable() { public void run() {t1.setName("HELLO");} })).start();
(new MyThread(t1, new Runnable() { public void run() {t1.setName("GOODBYE");} })).start(); 
```

两个线程访问同一个线程对象 t1。**不安全。**

# ios - 对分页和平移的简单示例感到困惑。对象-C

> ID：15419862
> 
> 赞同：0
> 
> 时间：2013-03-14T20:48:37.380
> 
> 标签：ios, objective-c

通过 - The Big Nerd Ranch Guide”（Conway 和 Hillegass）章节“子类化 UIView 和 UIScrollView”学习 iOs 开发；平移和分页。
在 - (BOOL) 应用程序中键入以下代码块：didFinishLaunchingWithOptions: 方法。

（HypnosisView - 是一个定制的类，实际上在屏幕上执行绘图。）

看不懂下面的代码：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

//-------Adding a scrool option-----------

CGRect screenRect=[[self window] bounds];

//  create the UIScrollView to have the size of the window, matching its size
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:screenRect];

[scrollView setPagingEnabled:YES];
[[self window] addSubview:scrollView];

//  create the HypnosisView with a frame that is twice the size of the screen (with a big                     
// width)
CGRect bigRect = screenRect;
bigRect.size.width *=2.0;

HypnosisView *view=[[HypnosisView alloc] initWithFrame:screenRect];

//  add the HypnosisView as a subview of the scrollView istead of the window
[scrollView addSubview:view];

// move the ractangle for the other HypnosisView to the right, just off the screen
screenRect.origin.x = screenRect.size.width;
HypnosisView *anotherView = [[HypnosisView alloc] initWithFrame:screenRect];
[scrollView addSubview:anotherView];

// tell the scrollView how big its virtual world is
[scrollView setContentSize:bigRect.size]; 
```

所以我们的目标是创建一个宽度大于 iphone 屏幕的视图实例。

1.  首先，我们声明具有“窗口”边界的新变量“screenRect”。

2.  然后我们正在创建一个“UIScrollView”实例，它的框架尺寸与“screenRect”相同，与窗口相同。

3.  启用分页。

4.  将我们新创建的“scrollView”添加到视图层次结构中。所以我们有父“窗口”和子“scrollView”（与我们的主窗口具有相同的尺寸）

5.  声明一个新变量“bigRect”，并使其等于我们之前声明的“screenRect”。

6.  将 bigRect 的“宽度”属性设置为两倍。

7.  创建一个新的“视图”对象，它是我们定制的 Hypnosis 类的一个实例，它实际执行绘图。我们将视图的框架设置为与“screenRect”框架相同。

8.  将我们新创建的“视图”添加到视图层次结构中。现在我们有 3 级层次结构： UIWindow--> UIScrollView-->HypnosysView

9.现在到这里，不明白这行代码是做什么的，为什么需要它（screenRect.origin.x = screenRect.size.width;）

10）。为什么我们要在下一行创建另一个 HypnosisView 实例？

11）。最后我们通知 scrollView 它的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:09:35.070

```
9.Now here, I don't understand what this line of code does and why do we need it (screenRect.origin.x = screenRect.size.width;)

10). Why are we creating another instance of HypnosisView in the next line? 
```

该示例将在滚动视图中并排显示 2 个 HypnosisView。第二个是屏幕外。所以你必须拖动/翻页滚动视图才能看到它。

```
screenRect.origin.x = screenRect.size.width 
```

这只是将第二个催眠视图定位在第一个催眠视图的右侧。

# javascript - jQuery/Javascript - 将变量转换为 CSS 更改

> ID：15419864
> 
> 赞同：0
> 
> 时间：2013-03-14T20:48:47.993
> 
> 标签：javascript, jquery, jqplot

我正在使用 servlet 在 Java 中编写 HTML，并且遇到问题，滚动 DOM 对象（第三方，jqplot）会点亮特定列表的文本。我有 HTML（在 jQuery 之前声明）：

```
<li id='cap_1'>
  <span>DOG</span>
</li> 
```

后面的代码如下：

```
out.println("<script>$('#chart2').bind('jqplotDataHighlight', function (ev, seriesIndex, pointIndex, data) { var x = 'cap_'+pointIndex; alert(x); $(x).css(\"display\",\"none\"); } );</script>"); 
```

警报正在触发并正确返回 (cap_1)。但是 CSS 不起作用（我尝试过显示、背景颜色、颜色等 - 没有任何效果）。

我错过了什么？jQuery 和库声明得到确认，并且绑定是 jqplot 库的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:50:35.580

您需要在`#`之前添加符号`x`。

`$('#' + x).css(...`等等

或者，您在哪里声明`x`：

```
... var x = '#cap_' + ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:51:50.757

您缺少`'#'`选择器：

```
out.println("<script>
               $('#chart2').bind('jqplotDataHighlight', 
                                  function (ev, seriesIndex, pointIndex, data) { 
                                      var x = '#cap_'+pointIndex; //<-- Here
                                      alert(x); 
                                      $(x).css(\"display\",\"none\"); 
                                  });
            </script>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:55:41.220

You are missing the `DOG` selector:

```
out.println("<script>$('#chart2').bind('jqplotDataHighlight', function (ev, seriesIndex, pointIndex, data) { var x = 'li:contains(DOG)'; $(x).css(\"display\",\"none\"); } );</script>"); 
```

# ios - WebView：如何检测我是否在原始网页上并执行某个方法

> ID：15419866
> 
> 赞同：0
> 
> 时间：2013-03-14T20:48:51.200
> 
> 标签：ios, objective-c, cocoa-touch, uiwebview

在某些情况下，我有这种方法可以在 Web 视图中返回上一个网页，并且效果很好。但是，我想实现一个函数来检查我是否在原始网页上，如果是，当我按下后退按钮时，它会将我带到导航视图控制器。原始页面是这个代码[webView loadHTMLString:self.item.description baseURL:[NSURL URLWithString:self.item.link]];。现在我需要弄清楚如何检查我是否在该页面上，如果是，我需要执行以下代码：`[self.navigationController popViewControllerAnimated:YES];`. 任何帮助将不胜感激。

```
- (void)back
{
    if ([webView canGoBack]) {
        [webView goBack];
    } else {
        [webView loadHTMLString:self.item.description baseURL:[NSURL URLWithString:self.item.link]];    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:51:03.520

You can use the delegate method `shouldStartLoadWithRequest` of `UIWebViewDelegate` to check what contains in the url. if you find it then just go `NavigationController`

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    if ([[request.URL absoluteString] rangeOfString:@"http://yourURL"].location!=NSNotFound) {
       [self.navigationController popViewControllerAnimated:YES];.    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:58:57.287

您需要添加

```
 <UIWebViewDelegate> 
```

到标题。然后将 webView.delegate 设置为 yes；

将其设置为委托后，您可以获取 absoluteString 和 requestURL，并覆盖该方法。使用 absoluteString，您可以检查子字符串、文本、域，基本上是您想要的任何内容！您覆盖 shouldStartLoadWithRequest 或 webViewDidFinishLoad：

```
 -(void)webViewDidFinishLoad:(UIWebView *)webView 
   -(void)shouldStartLoadWithRequest :(UIWebView *)webView 
```

每次加载任何网页时都会调用。

# c# - windows Workflow Foundation - 在工作流中的不同活动之间传递自定义变量

> ID：15419867
> 
> 赞同：0
> 
> 时间：2013-03-14T20:48:51.513
> 
> 标签：c#

我正在将自定义变量类型从一个操作传递到工作流中的另一个操作。这是自定义对象的定义

```
 public class ConfigDatabase
        {
            public string Name;
            public string Host;
            public string Port;
            public string Instance;
            public string User;
            public string Password;
        }

        public class ConfigDatabases
        {
            public string DatabaseToUse;
            public List<ConfigDatabase> DatabaseList;

            public ConfigDatabases()
            {
                DatabaseList = new List<ConfigDatabase>();
            }
        }

        public class ConfigEnvironment
        {
            public ConfigDatabases EnvironmentConfigDatabase;

            public ConfigEnvironment()
            {
                EnvironmentConfigDatabase = new ConfigDatabases();
            }

            public ConfigDatabase ReturnDatabaseInfo()
            {
                ConfigDatabase ConfigDatabaseInfo = new ConfigDatabase();
                for (int Count1 = 0; Count1 < EnvironmentConfigDatabase.DatabaseList.Count; Count1++)
                {
                    if (EnvironmentConfigDatabase.DatabaseList[Count1].Name == EnvironmentConfigDatabase.DatabaseToUse)
                    {
                        ConfigDatabaseInfo = EnvironmentConfigDatabase.DatabaseList[Count1];
                        return ConfigDatabaseInfo;
                    }
                }
                return ConfigDatabaseInfo;
            }

            public string GetDatabaseConnectionString()
            {
                ConfigDatabase DatabaseInfo = ReturnDatabaseInfo();
                string ConnectionString = "Data Source=(description=(address=(protocol=tcp)(host=" + DatabaseInfo.Host + ")(port=" + DatabaseInfo.Port + "))(connect_data=(sid=" + DatabaseInfo.Instance + ")));User ID=" + DatabaseInfo.User + ";Password=" + DatabaseInfo.Password + ";";
                return ConnectionString;
            }
        } 
```

在操作的第一步中，它将运行以下代码以从文件加载配置数据并存储在函数 Execute 返回的对象（ConfigEnvironment）中

```
public sealed class InitializeEnvironment : CodeActivity<ConfigEnvironment>
{
    // Define an activity input argument of type string
    public InArgument<string> EnvironmentFileLocation { get; set; }

    // If your activity returns a value, derive from CodeActivity<TResult>
    // and return the value from the Execute method.
    protected override ConfigEnvironment Execute(CodeActivityContext context)
    {
        // Obtain the runtime value of the Text input argument
        string EnvironmentFile = context.GetValue(this.EnvironmentFileLocation);
        EnvironmentConfigInitialization EnvironmentInitialize = new EnvironmentConfigInitialization(EnvironmentFile);
        ConfigEnvironment EnvironmentDetail = EnvironmentInitialize.LoadData();
        return EnvironmentDetail;
    }
} 
```

在工作流的后续活动中，我想获取存储在这个对象中的数据。但是，由于 EnvironmentDetail 对象找不到函数 GetDatabaseConnectionString，以下代码会出现编译错误。

```
public sealed class ExecuteSQL : CodeActivity<DataRowCollection>
{
    // Define an activity input argument of type string
    public InArgument<string> SQLScript { get; set; }
    public InArgument<ConfigEnvironment> EnvironmentDetail { get; set; }

    // If your activity returns a value, derive from CodeActivity<TResult>
    // and return the value from the Execute method.
    protected override DataRowCollection Execute(CodeActivityContext context)
    {

        string connectionString4 = EnvironmentDetail.GetDatabaseConnectionString(); //This create a compile error

} 
```

}

编译警告是以下“System.Activities.InArgument”不包含“GetDatabaseConnectionString”的定义，并且找不到接受“System.Activities.InArgument”类型的第一个参数的扩展方法“GetDatabaseConnectionString”（您是否缺少使用指令还是程序集引用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:53:11.197

事实证明，`EnvironmentDetail`is 属于 Type `InArgument`（或`InArgument<ConfigEnvironment>`），但不是 Type`ConfigEnvironment` 您需要执行 a`context.Get<ConfigEnvironment>()`来获取 Type 的变量`ConfigEnvironment`。

让我知道这是否解决了您的问题或者是否还有其他问题；-)

# r - R 数据转换

> ID：15419870
> 
> 赞同：1
> 
> 时间：2013-03-14T20:48:59.777
> 
> 标签：r

我需要以不同的方式查看数据框中的数据。问题来了。。

我有一个数据框如下

```
Person  Item  BuyOrSell
1        a    B
1        b    S
1        a    S
2        d    B
3        a    S
3        e    S 
```

我的要求之一是查看数据如下。显示个人在按交易类型（B 或 S）细分的单个项目上进行的所有交易的总和

```
Person    aB   aS   bB   bS   dB   dS   eB   eS
1          1    1    0    1    0    0   0     0
2          0    0    0    0    1    0   0     0
3          1    0    0    0    0    0   0     1 
```

所以我创建了一个新列并附加了 Item 和 BuyOrSell 的值。

```
df$newcol<-paste(Item,"-",BuyOrSell,sep="")
table(Person,newcol) 
```

并且能够达到上述的效果。

最后一个难以破解的转换要求如下....

```
 aB   aS   bB   bS   dB   dS   eB   eS
aB 1    1    0    1    0   0     0   0
aS 1    2    0    1    0   0     0   1
bB 0    0    0    0    0   0     0   0
bS 1    1    0    0    0   0     0   0
dB 0    0    0    0    1   0     0   0
dS 0    0    0    0    0   0     0   0
eB 0    0    0    0    0   0     0   0
eS 0    1    0    0    0   0     0   1 
```

上表必须填写进行特定交易的人数同时对另一项目进行交易。

我试过`table(newcol,newcol)`了，但它只为 aB-aB、aS-aS、bB-bB 生成计数，而对所有其他组合生成 0。

关于什么包或命令会让我破解这个坚果的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:51:32.260

最后的结果不就是：

```
# Following Ricardo's solution for casting, but using `acast` instead
A <- acast(Person~Item+BuyOrSell,data=df,fun.aggregate=length,drop=FALSE)

# A' * A
> t(A) %*% A
#     a_B a_S b_B b_S d_B d_S e_B e_S
# a_B   1   1   0   1   0   0   0   0
# a_S   1   2   0   1   0   0   0   1
# b_B   0   0   0   0   0   0   0   0
# b_S   1   1   0   1   0   0   0   0
# d_B   0   0   0   0   1   0   0   0
# d_S   0   0   0   0   0   0   0   0
# e_B   0   0   0   0   0   0   0   0
# e_S   0   1   0   0   0   0   0   1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:03:52.660

我认为有更好的方法，但这里有一个使用 package 的方法`reshape2`。

```
require(reshape2)
#reshapes data so each item and buy/sell event interaction occurs once
df2 <- dcast(Person~Item+BuyOrSell,data=df,fun.aggregate=length,drop=FALSE)
df2
  # Person a_B a_S b_B b_S d_B d_S e_B e_S
# 1      1   1   1   0   1   0   0   0   0
# 2      2   0   0   0   0   1   0   0   0
# 3      3   0   1   0   0   0   0   0   1

#reshapes data so every row is an interaction by person
df3 <- melt(df2,id.vars="Person")
head(df3)
     # Person variable value
# 1       1      a_B     1
# 2       2      a_B     0
# 3       3      a_B     0
# 4       1      a_S     1
# 5       2      a_S     0
# 6       3      a_S     1

#removes empty rows where no action occurred
#removes value column
df4 <- with(df3,
  data.frame(Person=rep.int(Person,value),variable=rep.int(variable,value))
#performs a self-merge: now each row is 
#every combination of two actions that one person has done
df5 <- merge(df4,df4,by="Person")
head(df5)
  # Person variable.x variable.y
# 1      1        a_B        a_B
# 2      1        a_B        a_S
# 3      1        a_B        b_S
# 4      1        a_S        a_B
# 5      1        a_S        a_S
# 6      1        a_S        b_S

#tabulates variable interactions
with(df5,table(variable.x,variable.y)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:34:42.160

Blue Magister，您的解决方案完美运行，我分析了您执行的每一步。

df4 的输出如下：

```
 Person variable
1      1      a_B
2      1      a_S
3      3      a_S
4      1      b_S
5      2      d_B
6      3      e_S 
```

的输出`with(df5,table(variable.x,variable.y))` 是

```
variable.y
variable.x a_B a_S b_B b_S d_B d_S e_B e_S
       a_B   1   1   0   1   0   0   0   0
       a_S   1   2   0   1   0   0   0   1
       b_B   0   0   0   0   0   0   0   0
       b_S   1   1   0   1   0   0   0   0
       d_B   0   0   0   0   1   0   0   0
       d_S   0   0   0   0   0   0   0   0
       e_B   0   0   0   0   0   0   0   0
       e_S   0   1   0   0   0   0   0   1 
```

这正是我想要的。

当我查看 d4 的输出时，它几乎与我的 newcol 解决方案相似（使用 paste ）

```
> df
  Person newcol
1      1    a-B
2      1    b-S
3      1    a-S
4      2    d-B
5      3    a-S
6      3    e-S 
```

与您的 df4 相比，这里唯一的区别是行的顺序。

所以，我最终运行了这个命令

```
dfx <- merge(df,df,by="Person")
 with(dfx,table(newcol.x,newcol.y)) 
```

它产生了以下...

```
 newcol.y
newcol.x a-B a-S b-S d-B e-S
     a-B   1   1   1   0   0
     a-S   1   2   1   0   1
     b-S   1   1   1   0   0
     d-B   0   0   0   1   0
     e-S   0   1   0   0   1 
```

上面的输出忽略了几行和几列。我和你有什么不同？

# php - 在不重新启动的情况下将 PHP 扩展添加到 IIS

> ID：15419874
> 
> 赞同：0
> 
> 时间：2013-03-14T20:49:10.783
> 
> 标签：php, sql-server, iis

我在我工作的客户端上有一个运行在 IIS 上的 PHP 网站。当我们切换到 MsSQL 时，我需要启用 php_pdo_sqlsrv_53_nts.dll。但是，一旦我启用了扩展，我就会开始收到 500 错误。我的猜测是我需要重新启动网络服务器，但由于某些原因，我们现在想避免它。

您能否告诉我是否需要在 IIS 上重新启动 Web 服务器才能正确启用 php dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:52:22.783

即使您在本地主机上工作，也**需要**重新启动！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:16:35.973

是 - 请参阅[Microsoft.com](http://msdn.microsoft.com/en-us/library/cc296203%28v=sql.105%29.aspx)

请注意，重新启动我的任何网络服务器只需几秒钟，所以我不确定这对您的客户来说是否是个大问题。他有不止一台带有负载均衡器的服务器吗？在那种情况下，您可以一件一件地做它们吗？或者也许还有另一个聪明的想法，即通过更改 DNS 将流量临时重新路由到其他地方？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-15T23:23:29.737

与流行的观点相反，我要说**不**，原因如下：

由于您使用的是 IIS，如果重启不一定紧急，您可以尝试回收应用程序池。

循环可能需要一点时间，但“回收”使用重叠方法，使旧进程保持运行，直到其活动请求完成，而新进程处理任何新生成的请求。这一直持续到所有现有进程完成，然后旧池优雅地退出。这将确保最终用户的服务不会中断。不利的一面是，如果您的用户长时间停留在网站上，您的 PHP 扩展可能需要一段时间才能可用。

我过去使用这种方法取得了成功，能够安装 PHP 扩展而无需直接重新启动 IIS。

在 IIS 7 中回收：

1.  打开 Internet 信息服务 (IIS) 管理器
2.  导航到服务器名称 > 应用程序池
3.  选择您要回收的池（连接到您需要扩展的站点的池）
4.  在“操作”窗格中，单击“回收...”

# sql - 如何使用 SQL 中的另一个表映射两列？

> ID：15419878
> 
> 赞同：0
> 
> 时间：2013-03-14T20:49:32.780
> 
> 标签：sql, database

我有一个像这样的表 user_table：

用户表

```
user1, user2
123    122 
323    323
122    125 
```

我有一个单独的表格，将用户映射到邮政编码。

用户压缩包

```
user zipcode
123    32456
323    12983
121    90878
... 
```

现在我想创建一个这样的表：

```
user1, user2, user1_zip, user2_zip 
```

我看到我可以从以下查询中得到这样的表：

```
select user1, user2, zipcode as user1_zip 
    from user_table as a inner join user_zip as b
    on a.user1 = b.user; 
```

也不确定如何映射 user2，并获得另一个名为 user2_zip 的列。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:55:38.950

Try this

```
SELECT ut.user1, uz1.zipcode AS zip1, ut.user2, uz2.zipcode AS zip2
FROM user_table AS ut
JOIN user_zip AS uz1 ON ut.user1 = uz1.user
JOIN user_zip AS uz2 ON ut.user2 = uz2.user 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:54:22.947

You can join to the same table more than once:

```
select u.user1, u.user2, z1.zipcode [user1_zip], z2.zipcode [user2_zip]
from user_table u
join user_zip z1 on z1.user=u.user1
join user_zip z2 on z2.user=u.user2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:55:23.193

I would do something like this:

```
with temp as (
select user1 u
from user_table
union
select user2 u
from user_table
)

select u.*, uz.*
from temp
inner join user_zip uz on
temp.u = uz.user 
```

# php - 增加一个数组计数器

> ID：15419879
> 
> 赞同：0
> 
> 时间：2013-03-14T20:49:35.480
> 
> 标签：php

在下面的循环中，我想在循环`$value[0]`的每次传递中递增。因此，如果`$count = 2`循环将运行两次并输出`$key . " " . $value[0]`and `$key . " " . $value[1]`。

现在，我的循环输出`$key . " " . $value[0]`了两次。我做错了什么？

```
$count = count($updates['positionTitle']);

for($i = 1; $i<=$count; $i++){
    foreach($updates as $key => $value){
        if(!is_array($value))
           echo $key . " " . $value . "<br/>";
         else 
           echo $key . " " . $value[0]++ . "<br/>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:52:25.823

您需要存储当前索引是什么。不过，我实际上不确定您在说什么循环。我假设它是外部 for 循环。我仍然认为这是坏的，但根据你的评论，这就是你想要的。

```
$count = count($updates['positionTitle']);
$idx = 0;

for($i = 1; $i<=$count; $i++){
    foreach($updates as $key => $value){
        if(!is_array($value))
           echo $key . " " . $value . "<br/>";
         else 
           echo $key . " " . $value[$idx] . "<br/>";
    }
    $idx++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:06:42.180

改变：

```
foreach($updates as $key => $value){ 
```

至：

```
foreach($updates as $key => &$value){ 
```

# node.js - 节点静态示例

> ID：15419882
> 
> 赞同：4
> 
> 时间：2013-03-14T20:49:44.413
> 
> 标签：node.js, node-static

我一直在用头撞墙，试图找出这段代码有什么问题。我直接从 node-static github 存储库示例中复制了它，但它似乎不起作用。我所做的唯一修改是公共文件的路径（以前是'./public'）。在我的公用文件夹中，我有一个 index.html，但是当我点击时，`http://localhost:8080/index.html`我什么也得不到。

```
var static = require('node-static');

//
// Create a node-static server instance to serve the './public' folder
//
var file = new(static.Server)('C:\Projects\node\public');

require('http').createServer(function (request, response) {
    request.addListener('end', function () {
        //
        // Serve files!
        //
        file.serve(request, response);
    });
}).listen(8080); 
```

如果重要的话，我在 Windows 7 64 位上运行 Node.js。

**编辑：**

我输入了一些`console.log`语句，它进入了服务器处理程序，但没有进入侦听器处理程序。这可能与“结束”事件有关吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T09:19:35.780

我删除了该`request.addListener('end', ...)`功能：

```
require('http').createServer(function (request, response) {

    //
    // Serve files!
    //
    file.serve(request, response);

}).listen(8080); 
```

现在它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:46:16.897

我认为你有一个Windows路径问题。我无法验证它，但我可以给你 2 个选项：

1）逃避你的反斜杠：

```
'C:\\Projects\\node\\public' 
```

2) 使用[path.join](http://nodejs.org/docs/latest/api/path.html#path_path_join_path1_path2)

```
var path = require("path");
var file = new(static.Server)(path.join(__dirname, "public")); 
```

`__dirname`是当前文件的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-31T20:15:19.173

此外，您还可以提供错误页面：

```
let static = require('node-static');

let fileServer = new static.Server('C:\Projects\node\public');

require('http').createServer(function(request, response) {

  fileServer.serve(request, response, function(exception) {
    if (exception && (exception.status === 404)) {
      fileServer.serveFile('/404.html', 404, {}, request, response);
    }
  });

}).listen(8080); 
```

文件`404.html`应该存在

# c# - 格式化十进制以存储 6 位小数

> ID：15419883
> 
> 赞同：1
> 
> 时间：2013-03-14T20:49:44.563
> 
> 标签：c#, .net, sql-server

我使用小数来存储经度和纬度。在 asp.net mvc4 表单中没有任何配置，我得到这样的 mssql db 值（丢失最后一位）

> 48.42920

我应该把它保存为

```
48.429201 
```

问题是如何格式化十进制以满足这个要求？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:16:14.953

里面`mssql field`应该设置为`decimal(N,6).` 6是精度

# vb.net - 在 MSDN Visual Basic 中的 Datagrid 中获取特定值

> ID：15419886
> 
> 赞同：0
> 
> 时间：2013-03-14T20:49:53.663
> 
> 标签：vb.net, msdn, cells

所以我有一个简单的问题，但经过这么多谷歌搜索后，我似乎找不到一个很好的例子。

我正在尝试从数据网格中获取一个非常具体的单元格。我知道数据网格正在工作，因为它运行良好，我可以在我的程序中看到我想从中看到的所有值。我想要做的是从数据网格的特定单元格中获取一个值。我希望它会像这样简单。

dataGrid1.DataSource = someDataSet

数据网格.DataBind()

Label1.Text = dataGrid1.CellValue(rowValue, columnValue).ToString() '这是无效的

我一直看到的是 e.userclickshere 或其他东西，稍后会有用，但现在我只想从 dg 中获取特定的单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:55:00.833

就像是

```
Dim dt as datatable = someDataSet.Tables(0) 'Or whatever table is

Label1.text = dt(rowValue)(columnValue).toString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:00:56.417

FWIW：一种方法是直接从您的 someDataSet 中获取它。这样您就不会混合数据和 UI。

关于如何从数据集中获取数据 - 使用智能感知。
有点像

```
Dim myValue as Object = myDataset.Tables(myTableIndexOftenZero).Rows(myRowIndex)(myFieldIndex) 
```

但除非必须，否则不要使用无类型数据集。类型化数据集免费为您提供名称和类型。有点像

```
Dim myValue as Integer = myDataset.MyTable(myRowIndex).MyProperty 
```

顺便说一句：IIRC，你可以用一个表格来喂你的网格，比如

```
myTable.DataSource = myDataSet.Tables(0) 
```

BTW2：如果您从 Dataset 继承并实现自己的东西，您可以获得一些不错的受保护事件和属性，以对数据集/数据表中的更改做出反应。但我今天会改为选择 BTW3，如下所示。

BTW3：今天你可能想完全摆脱数据集，而是使用类列表。早些时候有一些摩擦，但今天......

# c# - 实体框架添加到 ICollection

> ID：15419888
> 
> 赞同：0
> 
> 时间：2013-03-14T20:50:02.447
> 
> 标签：c#, asp.net, entity-framework, entity-framework-5, ef-database-first

我有一个用户类

```
public partial class User
{
    public User()
    {
        this.Roles = new HashSet<Role>();
        this.Achievements = new HashSet<Achievement>();
        this.Games = new HashSet<Game>();
    }

    public int UserId { get; set; }
    public string PhoneId { get; set; }
    public string UserName { get; set; }

    public virtual ICollection<Role> Roles { get; set; }
    public virtual ICollection<Achievement> Achievements { get; set; }
    public virtual ICollection<Game> Games { get; set; }
} 
```

和成就班

```
public partial class Achievement
{
    public Achievement()
    {
        this.Users = new HashSet<User>();
    }

    public int AchievementId { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public byte[] Image { get; set; }

    public virtual ICollection<User> Users { get; set; }
} 
```

这两个类之间存在多对多关系，因为一个用户可以拥有 1 个或多个成就，而一个成就可以存在于 1 个或多个用户。我创建了以下方法来将成就分配给用户。

```
public bool AssignAchievementToUser(string userId, int AchievementId)
{
    try
    {
        Context db = new Context();
        User user = db.Users.SingleOrDefault(p => p.userId== userId);
        Achievement ach = db.Achievements.SingleOrDefault(p => p.AchievementId == AchievementId);

        if (user == null || ach == null)
        {
            return false;
        }               

        user.Achievements.Add(ach);    
        db.SaveChanges();
        return true;

    }
    catch (Exception e)
    {
        return false;
    }
} 
```

当我调用此方法时，我得到以下异常。

```
A first chance exception of type 'System.Data.Entity.Infrastructure.DbUpdateException' occurred in EntityFramework.dll
Unable to update the EntitySet 'User_X_Achievements' because it has a DefiningQuery and no <InsertFunction> element exists in the <ModificationFunctionMapping> element to support the current operation.
at System.Data.Entity.Internal.InternalContext.SaveChanges()
at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
at System.Data.Entity.DbContext.SaveChanges()
at DiServiceLibrary.DiService.AssignAchievementToUser(String UID, Int32 AchievementId) in g:\di\di\DiServiceLibrary\DiService.cs:line 101 
```

我应该如何将成就分配给用户？

# android - 非英文键盘和输入法

> ID：15419889
> 
> 赞同：0
> 
> 时间：2013-03-14T20:50:04.373
> 
> 标签：android

我是 android 应用程序开发的新手，所以如果我的问题听起来很业余，我很抱歉。我试图在网上搜索我的问题的答案，但我认为我可能没有使用正确的术语，因为我想做的并不是什么新鲜事。请帮助我走上正确的道路。

我想创建一个应用程序，其中我的一个页面可以使用不同语言的键盘。该语言不能用英文字母表示，但在 Windows 等中有可用的字体，因此它是一种已知语言。我希望用户从键盘中选择字母并将字母打印到相同语言的文本框中。接下来，使用用户输入的字母，我想在数据库中搜索特定的字母字符串，并找到输入行所在的页码。

第 1 部分：我试图弄清楚在构建键盘时应该使用哪种方法。我想出的是，我需要创建一个图像按钮表，其中包含每个字符的图像。这是一个好方法还是有更好的方法来做到这一点？

第 2 部分：当用户从图像按钮表中选择一个字母时，如何以特定语言打印它？我确实在 res/values-pa 下为这种语言创建了一个 strings.xml（我查了一下，ISO 639-1 代码是“pa”）。我不知道该怎么做是当用户从键盘选择它时打印该语言的字符？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:55:03.053

If you need to create a full featured keyboard, look up the InputMethodService and derive a class from it. The user can then select it as a keyboard. But if you just want to have them input text in their native language, all they need to do is select that as their locale and have a keyboard that supports that locale installed on the phone- it would be very unusual and probably wrong for you to be coding a keyboard. Not to mention a good keyboard takes a ton of work- the big Android keyboards have teams of programmers and linguists on them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:55:11.363

Firstly, you're going to need to include a font for that language in your app. There's a good tutorial on including and using them [here](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/).

After that, You could set the text of each of your buttons to one of the characters from that font.

Then in the onClick() of every button, do something like:

```
String letter = clickedButton.getText();
myEditText.setText(myEditText.getText() + letter); 
```

Where `clickedButton` is the button that was clicked and `myEditText` is your EditText

# javascript - 将 Javascript 的脚本 ID 更改为类

> ID：15419899
> 
> 赞同：0
> 
> 时间：2013-03-14T20:50:37.380
> 
> 标签：javascript, html, css

嗨，我正在构建这个滚动框，它有一个内置的隐藏下拉列表。好吧，实际上不是一个下拉列表，而是一个下拉列表。我的问题是我不知道如何将 javascript 的脚本从 ID 更改为 CLASS。这样我就可以在滚动框中列出的所有项目上使用该 javascript。现在我只是将 javascript 的脚本嵌入到 html 文档中，而不是作为链接。

*这是到目前为止的样子：*

**标头中的 Javascript**

```
<script>
function unhide(divID) { 
    var item = document.getElementById(divID); 
    if (item) {  item.className=(item.className=='hidden')?'unhidden':'hidden'; }  
} 
< /script > 
```

**有问题的代码**

```
<ol align="center" style="font-weight: bold">Item</ol><!--Box Title-->
<div id="f1" style="height: 80px; width: 150px; overflow: scroll; border: 9px groove #FFC400"><!--scroll box-->

<!--subject 1-->
<div>
    <a href="javascript:unhide('learnHTML');">Name1 </a>
</div>
<div id="LearnHTML" class="hidden">
    <ul>
        <li><a href=""> info/description </a></li>
        <li><a target="_blank" href="">CLICK HERE TO PLAY</a></li>
    </ul>
</div>

<!--subject 2-->
<a href="javascript:unhide('learnHTML');">Name2 </a>
<div>
<div id="LearnHTML" class="hidden">
    <ul>
        <li><a href=""> info/description </a></li>
        <li><a target="_blank" href="">CLICK HERE TO PLAY</a></li>
    </ul>
</div>

<!--subject 3-->
    <a href="javascript:unhide('learnHTML');">Name3 </a>
    <div>
        <div id="LearnHTML" class="hidden">
            <ul>
                <li><a href=""> info/description </a></li>
                <li><a target="_blank" href="">CLICK HERE TO PLAY</a></li>
            </ul>
        </div>
    </div> <!--End Scroll Box-->
</div> 
```

因此，所有列出的项目的下拉列表，滚动框中列出的项目，在单击列出的项目之前都是隐藏的。此外，通过再次单击同一列出的项目，它将再次隐藏其下拉菜单。

Basically, I want all the listed items in the scroll box to act the same as the first listed item does. But, I cannot figure out how to change the Javascript's Id to a class to make this work.

I tried changing the Javascript's Id to a class on my own, by doing this:

```
< script >
function unhide(divClass) {  var item = document.getElementByClassName(divClass);  if (item) {  item.className=(item.className=='hidden')?'unhidden':'hidden';  }  } < /script > 
```

Then I changed the `id="LearnHTML"` to `class="LearnHTML"`, but it didn't worked. So, does anyone knows how to go about in making it work?

**CSS for the listed items:**

```
.hidden { display: none;}
.unhidden { 
    display: block; 
    background-color:orange;
    font: white;
    align:left
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:44:35.780

*   首先，我相信字母大小写确实很重要。Javascript 必须与 HTML 匹配。
*   ID 必须是唯一的。html 文档中只能有一个 ID。这就是为什么其他人没有工作。
*   使用该类将不起作用，因为您无法指定要切换的类。它将切换所有这些，并且代码需要更复杂一些才能处理多个类。

因此，使用采用 DivID 的 unhide 方法，将 ID 从、、更改`"LearnHTML"`为，并确保切换链接与大小写匹配。`"LearnHTML1"``"LearnHTML2"``...`

顺便说一句，为了您的信息，您不能有两个具有相同名称的方法。Javascript 不支持重载。

这是小提琴：http: [//jsfiddle.net/Arlen22/tZdfx/2/](http://jsfiddle.net/Arlen22/tZdfx/2/)

# angularjs - 让 AngularJS $route 重定向到特定状态

> ID：15419905
> 
> 赞同：1
> 
> 时间：2013-03-14T20:50:53.193
> 
> 标签：angularjs, angularjs-routing, angularjs-service

我希望用户能够链接到特定的查看状态。

当用户访问时，我正在尝试将控制器路由到页面的特定状态`http://localhost:3000/resource/#!/1`

我的配置是：

```
 $routeProvider.when('/:memberId', {
      controller: 'MemberDetailsCtrl'
    });
   $locationProvider.html5Mode(false).hashPrefix('!'); 
```

我一直在尝试很多，似乎 $route 在所有范围都完成生成之前是未定义的。这意味着我无法执行

`$http.get('/resource/' + $route.current.params.memberId + '.json')`

在控制器/服务中并通过检查路由参数来触发该特定状态。

我已经能够使用正则表达式和`$location.path()`在我的控制器内部完成所有这些工作，但也许有更好的方法？（使用 ngView 不够灵活）

# 重要更新

现在有一个很棒的模块——ui [-router](https://github.com/angular-ui/ui-router)，它比默认的 $routeProvider 更好地帮助管理路由、状态和视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T21:51:05.537

为控制器内的路由更改广播设置监视功能怎么样：

```
$scope.$on('$routeChangeSuccess', function() {
    $http.get('/resource/' + $scope.params.memberId +'.json').success(function (d) {$scope.jsresponse = d;});
  }); 
```

[jsfiddle](http://jsfiddle.net/JtuKv/2/)

# c# - 一次下载一个文件

> ID：15419909
> 
> 赞同：-1
> 
> 时间：2013-03-14T20:51:02.817
> 
> 标签：c#, download

I have foreach, that parses out file URL. At the end of each cycle I want to download the file, but, as I have it now, it downloads all of them. I need to figure out how to block UI thread (that has foreach in it) while download finishes.

What I have now:

```
foreach (... in ...)
{
  //some code that extracts FileURL and fileName
  downloadFile(FileURL, fileName)
  //should wait here, without blocking UI
  //are.WaitOne(); //this blocks the UI
}

AutoResetEvent are = new AutoResetEvent(false);
void downloadFile(String FileURL, String fileName)
{
  Thread bgThread = new Thread(() =>
  {
    WebClient FileClient = new WebClient();
    FileClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(FileClient_DownloadProgressChanged);
    FileClient.DownloadFileCompleted += new AsyncCompletedEventHandler(FileClient_DownloadFileCompleted);
    FileClient.DownloadFileAsync(new Uri(FileURL), fileName);
  //should wait here, without blocking UI
  //are.WaitOne(); //this either downloads one, or both in paralel.
  });
  bgThread.Start();

}

void FileClient_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
  this.BeginInvoke((MethodInvoker)delegate
  {
    label5.Text = String.Format("Downloaded {0} of {1} bytes...", e.BytesReceived.ToString(), e.TotalBytesToReceive.ToString());
    progressBar1.Value = e.ProgressPercentage;
  });
}

void FileClient_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
{
  this.BeginInvoke((MethodInvoker)delegate
  {
    label5.Text = "Done.";
    //stop the waiting
    are.Set();
  });
} 
```

So, is there a way to wait for UI thrad while DownloadFileAsync finishes, and then continue with my big foreach?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:59:37.213

你可以这样做：

```
List<Task> tasks = new List<Task>();
foreach(....)
{

Thread bgThread = new Thread(() =>
  {
    WebClient FileClient = new WebClient();
    FileClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(FileClient_DownloadProgressChanged);
    FileClient.DownloadFileCompleted += new AsyncCompletedEventHandler(FileClient_DownloadFileCompleted);
    FileClient.DownloadFileAsync(new Uri(FileURL), fileName);
  //should wait here, without blocking UI
  //are.WaitOne(); //this either downloads one, or both in paralel.
  });
  bgThread.Start();

    tasks.Add(bgThread);

}

var arr = tasks.ToArray();
Task.WaitAll(arr); 
```

# c# - DateTime 绑定到数据网格：以欧盟格式显示，而不是美国

> ID：15419911
> 
> 赞同：0
> 
> 时间：2013-03-14T20:51:04.583
> 
> 标签：c#, wpf, xaml, datetime, data-binding

我在 WPF 中有一个数据网格。在这个数据网格中，我显示了几个绑定的日期时间。日期时间以美国格式显示，我是法国人，所以，我想以欧盟格式（dd/mm/yyyy）显示它。

有没有办法直接在 EU 中设置 DateTime 格式而不将其解析为字符串？我想直接使用 DateTime，而不是字符串。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:20:09.963

是的。您可以在此处更改`CultureInfo`或制作自定义格式字符串信息（[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)）

```
 // a global var
  string dtFormat = "mm/dd/yyyy";

  //where I'm displaying my DT
  Console.WrtieLine(myDT.ToString(dtFormat)); 
```

`CultureInfo`如果您想做任何非数字表示，您将要使用的信息。[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.datetimeformat(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.datetimeformat(v=vs.71).aspx)

还有一些很容易找到的 SO 问题以及具体示例，`CultureInfo`例如此[Datetime 字符串格式和 CultureInfo](https://stackoverflow.com/questions/2743417/datetime-string-formatting-and-cultureinfo)，它显示了如何用法语显示一天的三个字母表示。

# python - Python subprocess grep 命令每次返回不同的答案

> ID：15419912
> 
> 赞同：1
> 
> 时间：2013-03-14T20:51:05.837
> 
> 标签：python, random, grep, subprocess

我正在尝试使用以下代码在带有 python 的文件上启动 grep：

```
def runProcess(self, cmd):
    p = subprocess.Popen(cmd, bufsize=16000, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    return iter(p.stdout.readline, b'') 
```

问题是我每次启动它时都会得到不同的匹配。一些行在返回对象中被简单地跳过。就像缓冲区已被覆盖一样。我已经尝试了我在 subprocess 中找到的所有方法来完成这项工作，但都导致了同样的问题。

有关信息，我已经直接在 shell 中测试了我的 grep 命令并且它运行良好，这是我作为 cmd 参数传递给我的函数的内容

```
['egrep', '-wi', '-nr', "'keyword1|keyword2|blabla'", 'test/match_inside.txt'] 
```

我也尝试过使用不同的 bufsize 值（并且没有 c 值）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:11:29.017

当您改为调用时，问题就消失了（在我的测试中）：

```
['egrep', '-wi', '-nr', 'keyword1|keyword2|blabla', 'test/match_inside.txt'] 
```

Popen的[文档](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)表明 shlex.split() 演示了如何将命令行参数转换为字符串列表。在他们的示例中，外部引号从单个参数中删除。

编辑：我们对 bash 的熟悉可能会误导我们。但是 Bash 只是另一种脚本语言。如果你输入

```
grep 'a|b|c' target.txt 
```

bash 正在调用操作系统调用（Linux 上的 exec 或某些变体）来创建新的 grep 进程。Bash 解析该命令并删除引号；它们不是 grep 选项的一部分，它们可以通过对标记进行分组来帮助 bash 扫描您的输入。Grep 将被传递一个字符串数组参数（这就是 C 中的 argv ），因此参数不需要括在引号中；参数的结构和分组由字符串数组创建。

当你使用

```
"'keyword1|keyword2|blabla'" 
```

在 python 中，你基本上是在传递

```
'keyword1|keyword2|blabla' 
```

把 grep 作为完整的字符串，当你真的只想 grep 有

```
keyword1|keyword2|blabla 
```

作为 argv 的索引 3 中的字符串（取决于前面 args 的数量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:13:09.380

我无法发表评论，但我无法阻止自己问：

为什么要`grep`在 Python 中运行？和子进程？？如果您使用**的是**Python，那么我强烈建议您阅读[Python RE](http://docs.python.org/2/library/re.html)。它比 grep 强大得多，总而言之（在我看来）更易于理解和控制。

编辑：这个问题是务实的。我想知道为什么。

# python - 在熊猫中下采样不规则时间序列

> ID：15419914
> 
> 赞同：4
> 
> 时间：2013-03-14T20:51:14.520
> 
> 标签：python, pandas

我在熊猫中有一个时间序列，如下所示：

```
 2012-01-01 00:00:00.250000    12
2012-01-01 00:00:00.257000    34
2012-01-01 00:00:00.258000    45
2012-01-01 00:00:01.350000    56
2012-01-01 00:00:02.300000    78
2012-01-01 00:00:03.200000    89
2012-01-01 00:00:03.500000    90
2012-01-01 00:00:04.200000    12 

```

有没有办法在不对齐 1 秒边界的情况下将其下采样到 1 秒数据？例如，有没有办法获取这些数据（假设下采样一种使用采样时间之前或采样时间发生的最新值的方式）：

```
 2012-01-01 00:00:00.250000    12
2012-01-01 00:00:01.250000    45
2012-01-01 00:00:02.250000    56
2012-01-01 00:00:03.250000    89
2012-01-01 00:00:04.250000    12 

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T21:31:33.820

创建一个频率为 1 秒且偏移量为四分之一秒的 DateTimeIndex，如下所示。

```
index = pd.date_range('2012-01-01 00:00:00.25', 
                      '2012-01-01 00:00:04.25', freq='S') 
```

使您的数据符合该索引，并“向前填充”以对您在所需结果中显示的方式进行下采样。

```
s.reindex(index, method='ffill')
                            data
2012-01-01 00:00:00.250000    12
2012-01-01 00:00:01.250000    45
2012-01-01 00:00:02.250000    56
2012-01-01 00:00:03.250000    89
2012-01-01 00:00:04.250000    12 
```

# multithreading - 如何及时响应用户，优雅处理行为不端的第三方服务器？

> ID：15419915
> 
> 赞同：3
> 
> 时间：2013-03-14T20:51:21.790
> 
> 标签：multithreading, web-services, python-2.7, urllib2, soappy

我有以下情况：

我有一个 Web 服务，可根据单个用户请求聚合来自某些第三方服务器的数据。对第三方的请求可以是 SOAP 或带有 XML 数据的普通 urllib2 请求，每个请求都在单独的线程中完成。

这是我正在做的事情的总体情况：

```
ThirdParty1(Thread):
     def run(self):
         try:
             result = SOAPProxy('http://thirdparty.com', timeout=2).method(params)
             dostuff_and_save(result)  # save results on database
         except Exception:
             log.warn('Ooops')

ThirdParty2(Thread): ...

def myview(params):
    thread = [ThirdParty1(), ThirdParty2()]
    for t in thread: t.start()
    for t in thread: t.join(timeout=2)
    return result  # this is actually just a token, that I use to retrieve the data saved by the threads 
```

我当前的问题是当任何第三方服务器挂在他们身边时，可靠地返回对我用户请求的响应。我试图在线程连接、SOAPProxy 对象上设置超时，并执行`socket.setdefaulttimeout`. 不遵守任何超时。

我设法挖掘了 SOAPProxy 问题，发现它[使用 httplib](https://github.com/kiorky/SOAPpy/blob/develop/src/SOAPpy/Client.py#L133)，而 httplib[深入使用 socket.makefile()](https://github.com/akheron/cpython/blob/2.7/Lib/httplib.py#L339)，文档说：

> socket.makefile([mode[, bufsize]])
> 
> 返回与套接字关联的文件对象。（文件对象在文件 > 对象中描述。）文件对象引用套接字文件描述符的 dup()ped 版本，因此 > 文件对象和套接字对象可以独立关闭或垃圾收集。**套接字必须处于阻塞模式（不能有超时）**。可选模式和 bufsize 参数的解释方式与内置 file() 函数相同。

我发现的所有其他 SOAP 库，都以一种或另一种方式使用 httplib。为了使事情复杂化，我可能需要从请求线程访问数据库，我不完全理解用[这种策略](https://stackoverflow.com/questions/605013/python-how-to-send-packets-in-multi-thread-and-then-the-thread-kill-itself/605865#605865)杀死线程的后果是什么，我正在考虑从线程外部做数据库的东西，当那个是可能的。

然后，我的问题是：

当不遵守超时时，我的 Web 服务如何及时响应用户并优雅地处理行为不良的第三方服务器？

* * *

HTTPResponse 使用 makefile 的事实可能没有我想象的那么糟糕，事实证明默认情况下它`makefile`实际上[是非缓冲](https://github.com/akheron/cpython/blob/2.7/Lib/httplib.py#L346)的，并且它可以引发超时异常，这是我尝试过的：

在一个控制台上，我`netcat -l -p 8181 '0.0.0.0'`在另一个控制台上打开`python2.7`并运行：

```
>>> import socket
>>> af, socktype, proto, canoname, sa = socket.getaddrinfo('0.0.0.0', 8181, 0, socket.SOCK_STREAM)[0]
>>> s=socket.socket(af, socktype, proto)
>>> s.settimeout(.5)
>>> s.connect(sa)
>>> f=s.makefile('rb', 0)
>>> f.readline()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/socket.py", line 430, in readline
    data = recv(1)
socket.timeout: timed out 
```

但是我如何做可靠的第三方请求的问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T22:23:40.320

我想我设法建立了一个切实可行的解决方案。

我要做的第一件事是启动将请求任何需要的第三方服务器的线程。这很好用，因为当线程正在执行阻塞操作（socket.recv() 就此而言）时 GIL 不会保持，这允许我的服务器在处理请求时做自己的事情。

我从线程中删除了所有副作用，不再与数据库交谈，如果请求的响应时间超出预期，我不需要杀死它，只需保留它并忽略它。

当第一个线程启动时启动一个计时器，在我的服务器完成它之后它绝对需要第三方结果它检查每个线程以查看它们是否完成，当它们全部完成或超时时它会得到结果每个完成的线程，它看起来像这样：

```
start, data = time(), []
threads = launch_threads()
# ... do my thing
for t in threads:  # wait up to TIMEOUT
  timeout = TIMEOUT - (time() - start)
  t.join(t)
for t in threads:
  if not t.isAlive():  # should not have a race
    data.append(t.getdata()) 
```

# php - 当我向它添加 jQueryUI 时，Wordpress 会中断

> ID：15419920
> 
> 赞同：0
> 
> 时间：2013-03-14T20:51:31.370
> 
> 标签：php, wordpress

我有一个 WordPress 站点 (3.5.1)，我想在其中向我的插件添加一个日期选择器。默认情况下这不起作用，所以我四处搜索，发现我必须使用`wp_register_script()`and加载库`wp_enqueue_script()`。添加脚本后，我有一个日期选择器。完美的。

我想更改小部件布局，但发现它已损坏。我可以拖动小部件，但是当它们被放下时，它们会“冻结”。我试图关闭我添加的 jQuery 库。小部件模块再次正常工作，但我的日期选择器不再工作。

所以，我在functions.php中有这段代码：

```
add_action('init', 'change_jquery');

function change_jquery() {

    wp_deregister_script('jquery');
    wp_deregister_script('jquery-ui-core');

    wp_register_script('jquery',        '//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js', false, '1.9.0');
    wp_register_script('jquery-ui-core',    '//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js', false, '1.10.0');
    wp_register_style('jquery-ui-css',  '//ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/ui-lightness/jquery-ui.css');

    wp_enqueue_script('jquery');
    wp_enqueue_script('jquery-ui-core');
    wp_enqueue_style('jquery-ui-css');
} 
```

有谁知道是什么导致了我的问题？也许我已经声明了双库？我对此很陌生，不知道在哪里寻找问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:10:31.340

据我所知，这可能是一个 javascript 错误。Wordpress 在处理 jquery 的 $-variable 方面很糟糕。你可以做两件事：

1) 尝试添加将所有“$”替换为“jQuery”的文件。请注意，“Q”必须用大写字母书写，而“j”不是大写字母。这对我有用。例如：

```
//Original javascript in wordpress.
function some_function(){
    $('#some_id').click('some_function');
}

//Adapted javascript in wordpress.
function function(){
    jQuery('#some_id').click('some_function');
} 
```

* * *

2）您可以尝试在 jquery 中创建一个无冲突包装器。我还没有对此进行测试，但它应该可以工作。[你可以在这里](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:59:46.757

如果 datepicker 用于插件的前端而不是后端，请使用`is_admin()`条件标签仅在前端加载它（不是管理面板）：

```
function change_jquery() {
    if (!is_admin()) {
        wp_deregister_script('jquery');
        wp_deregister_script('jquery-ui-core');

        wp_register_script('jquery',        '//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js', false, '1.9.0');
        wp_register_script('jquery-ui-core',    '//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js', false, '1.10.0');
        wp_register_style('jquery-ui-css',  '//ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/ui-lightness/jquery-ui.css');

        wp_enqueue_script('jquery');
        wp_enqueue_script('jquery-ui-core');
        wp_enqueue_style('jquery-ui-css');
    }
}
add_action('wp_enqueue_scripts', 'change_jquery'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:53:02.730

您应该使用`wp_enqueue_scripts`钩子来执行您的操作

```
add_action('wp_enqueue_scripts', 'change_jquery'); 
```

这可能无法解决您的问题，但它是用于将脚本加入队列的正确钩子。

# multithreading - 当前的 haskell 平台缺少 forkFinally

> ID：15419930
> 
> 赞同：0
> 
> 时间：2013-03-14T20:51:53.650
> 
> 标签：multithreading, haskell

前几天我刚刚安装了最新的 haskell 平台，在 Control.Concurrent 中找不到 forkFinally，我有 forkIO 并且能够直接从 hackage 中窃取代码，它工作正常：

```
forkFinally :: Exception e => IO a -> (Either e a -> IO ()) -> IO ThreadId
forkFinally action and_then =
  mask $ \restore ->
    forkIO $ try (restore action) >>= and_then 
```

任何人有任何提示或线索这里发生了什么？黑客攻击和我所有的搜索似乎表明 forkFinally 应该是平台附带的默认 Control.Concurrent 模块的标准部分......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T21:24:29.137

base最新版本为4.6.0.1；当前的 Haskell 平台 (2012.4.0.0) 带有 base-4.5.1.0。`forkFinally`在 base-4.6.0.0 中是新的。

[链接到`Control.Concurrent.forkFinally`base-4.6.0.0。](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Control-Concurrent.html#v%3aforkFinally)

[链接到`Control.Concurrent`base-4.5.1.0。](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Control-Concurrent.html)如果您搜索该页面，您会发现它`forkFinally`不存在。

# ajax - 仅在单击特定按钮时调用 Ajax

> ID：15419931
> 
> 赞同：0
> 
> 时间：2013-03-14T20:51:55.313
> 
> 标签：ajax, asp.net-ajax

我在页面上只有几个文本字段和相应的必填字段验证器。我在同一页面上有不同的链接和一个按钮。基本上，我希望仅在单击按钮时激活 Ajax。单击其他链接时不应激活它。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:01:48.137

你应该使用验证

> 验证组允许您将页面上的验证控件组织为一组。每个验证组都可以独立于页面上的其他验证组执行验证。

然后在你的按钮中给出它的验证组属性这个组名

参考

[指定验证组](http://msdn.microsoft.com/en-us/library/ms227424%28v=vs.100%29.aspx)

[Button.ValidationGroup 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.validationgroup.aspx)

# c# - Path.Combine 中的非法字符

> ID：15419932
> 
> 赞同：0
> 
> 时间：2013-03-14T20:51:58.733
> 
> 标签：c#, asp.net, .net, path, ftp

我有一个如下所示的 ftp 路径：
[ftp://my|user|name:mypassword@example.com/Test/file.txt](ftp://my|user|name:mypassword@example.com/Test/file.txt)

我正在尝试使用以下两个功能`Path`：
1\. `Path.GetDirectoryName`
2.`Path.Combine`

两者都返回“路径中的非法字符”。
解决此问题的最佳解决方案是什么？我需要获取目录，并且需要将它与不同的文件 url 结合起来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:53:49.283

使用`Uri`类提取路径部分，而不是使用`Path`类来操作它。

用于`UriBuilder`将其构建回来。

```
var fullPath = 
  new Uri(@"ftp://my|user|name:mypassword@example.com/Test/file.txt")
     .AbsolutePath; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T15:43:02.967

要从 uri 中提取路径和查询字符串，您可以使用`new Uri(someString).PathAndQuery`答案[Get url parts without host](https://stackoverflow.com/questions/4619277/get-url-parts-without-host)

要结合 Url 或 Uri，您可以使用答案[https://stackoverflow.com/a/23399048/3481183](https://stackoverflow.com/a/23399048/3481183)

该`Uri.Combine`答案中描述的功能也已针对组合 ftp 部分进行了测试。

![在此处输入图像描述](../Images/1490738a78e2121a5b235484790b3b2f.png)

# c - 将文件中的字符串读入数组

> ID：15419933
> 
> 赞同：0
> 
> 时间：2013-03-14T20:52:02.070
> 
> 标签：c

出于某种原因，当我尝试运行此测试代码时出现分段错误。该程序应该从文件中读取字符串并将它们放入数组中。我是 C 新手，曾尝试使用调试器，但遇到了麻烦。

任何投入将不胜感激。

```
void fillArray(char *array[], int * count, FILE * fpin){    

char buf[40];
char *p;
count = 0;
while(fgets(buf, 40, fpin) != NULL){
    if((p= strchr(buf, '\n')) != NULL)
    *p = '\0'; //step on the '\n' 
    array[(*count)++] = malloc(strlen(buf)+1);
    assert(array[*count]);
    strcpy(array[*count], buf);
    (*count)++;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:54:21.973

```
array[(*count)++] = malloc(strlen(buf)+1);
              ^^^
assert(array[*count]); 
```

First you increment and then use the next position in the array, presumably an uninitialized pointer. Drop the `++` from that line.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:17:02.630

希望这会有所帮助。该函数自动管理数组和数组条目的内存。

```
void fillArray(char ***array, int *count, FILE *fpin)
{
    char *tmp[] = 0;
    int tmp_allocated = 0;
    int tmp_count = 0;

    assert(array);
    assert(count);
    assert(fpin);

    while(fgets(buf, 40, fpin) != NULL)
    {
        if (( p= strchr(buf, '\n')) != NULL)
        {
            *p = 0;
        }
        if (tmp_count == tmp_allocated)
        {
            tmp_allocated += 10;
            tmp = realloc(tmp, sizeof(char*) * tmp_allocated);
            assert(tmp);
        }
        tmp[tmp_count] = strdup(buf);
        assert(tmp[tmp_count]);
        tmp_count++;
     }

     *array = realloc(tmp, sizeof(char*) * tmp_count);
     *count = tmp_count;
} 
```

在这里我们如何使用它。

```
void userOfFillArray()
{
    int count;
    char **array;
    FILE *fpin = ...;

    fillArray(&array, &count, fpin);
    // if count == 0, then array can be NULL

    ...

    while (count--)
    {
       free(array[count]);
    }
    free(array);
} 
```

# mysql - MySQL Forward Engineer - SQL 给出错误 121

> ID：15419934
> 
> 赞同：0
> 
> 时间：2013-03-14T20:52:04.960
> 
> 标签：mysql, foreign-keys, mysql-workbench

我目前正在尝试使用MySQL Workbench的*Forward Engineer向导创建我的数据库，但出现此错误：*

```
Executing SQL script in server
ERROR: Error 1005: Can't create table 'microweb.users' (errno: 121)

CREATE  TABLE IF NOT EXISTS `microweb`.`users` (
  `user_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `role_id` INT UNSIGNED NOT NULL ,
  `username` VARCHAR(45) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  `email` VARCHAR(45) NOT NULL ,
  `salt` VARCHAR(45) NOT NULL ,
  `first_name` VARCHAR(45) NOT NULL ,
  `middle_name` VARCHAR(45) NULL ,
  `last_name` VARCHAR(45) NOT NULL ,
  `address_id` INT UNSIGNED NULL ,
  `registration_id` INT UNSIGNED NOT NULL ,
  `active` TINYINT(1) NOT NULL ,
  `banned` TINYINT(1) NOT NULL ,
  PRIMARY KEY (`user_id`) ,
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC) ,
  UNIQUE INDEX `username_UNIQUE` (`username` ASC) ,
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) ,
  UNIQUE INDEX `registration_id_UNIQUE` (`registration_id` ASC) ,
  CONSTRAINT `fk_user_role`
    FOREIGN KEY (`role_id` )
    REFERENCES `microweb`.`roles` (`role_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_registration`
    FOREIGN KEY (`registration_id` )
    REFERENCES `microweb`.`registrations` (`registration_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB

SQL script execution finished: statements: 10 succeeded, 1 failed 
```

完整的脚本包含很多外键和 21 个表。问题是当Workbench说有10个成功时，执行后phpMyAdmin中只有2个。

如果有人需要完整的模型，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:54:24.497

我建议先在没有约束的情况下尝试它，然后使用`ALTER TABLE`.

```
CREATE  TABLE IF NOT EXISTS `microweb`.`users` (
  `user_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `role_id` INT UNSIGNED NOT NULL ,
  `username` VARCHAR(45) NOT NULL ,
  `password` VARCHAR(45) NOT NULL ,
  `email` VARCHAR(45) NOT NULL ,
  `salt` VARCHAR(45) NOT NULL ,
  `first_name` VARCHAR(45) NOT NULL ,
  `middle_name` VARCHAR(45) NULL ,
  `last_name` VARCHAR(45) NOT NULL ,
  `address_id` INT UNSIGNED NULL ,
  `registration_id` INT UNSIGNED NOT NULL ,
  `active` TINYINT(1) NOT NULL ,
  `banned` TINYINT(1) NOT NULL ,
  PRIMARY KEY (`user_id`) ,
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC) ,
  UNIQUE INDEX `username_UNIQUE` (`username` ASC) ,
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) ,
  UNIQUE INDEX `registration_id_UNIQUE` (`registration_id` ASC)
)
ENGINE = InnoDB;

ALTER TABLE `microweb`.`users`
ADD CONSTRAINT `fk_user_role`
    FOREIGN KEY (`role_id` )
    REFERENCES `microweb`.`roles` (`role_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE;

ALTER TABLE `microweb`.`users`
ADD CONSTRAINT `fk_user_registration`
    FOREIGN KEY (`registration_id` )
    REFERENCES `microweb`.`registrations` (`registration_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:48:26.217

错误 121 表示存在重复的键名。您必须确保自己的所有 FK 名称在整个架构中都是唯一的。

# java - Spring Security 获取登录值

> ID：15419938
> 
> 赞同：1
> 
> 时间：2013-03-14T20:52:10.020
> 
> 标签：java, spring-security

我有一个 JSP 页面，它从我在 Java 中的 accout 对象中获取用户信息，这种方式我在实现 spring 安全性之前正在登录。我希望我的按钮在用户登录时显示我在我的 div 中的内容。我之前使用过会话，但现在我使用的是 Spring Security，它认为它没有登录。我搜索了 google 和 Stack 以尝试找到我的问题的答案，但我一直想出空白。这是我的 JSP 中的内容。

```
<div id="topRightMenu" class="f-right">
                <% if(    session.getAttribute("auth") == null
                        || session.getAttribute("auth").toString() == "false"
                        || session.getAttribute("Account") == null) { %>

                    <div id="login-form">
                        <form action="/<c:url value='j_spring_security_check' />" method="post" id="loginForm">
                            Username: <input class="text small" type="text" name="j_username" value="" /><br/>
                            Password: <input class="text small" type="password" name="j_password" value="" /><br/>
                            <label class="uiButton uiButtonLarge btnLogin">
                                <input type="submit" name="btnLogin" value="login" />
                            </label>
                        </form>
                    </div>

                    <button class="f-right" id="loginButton">Sign In</button>

                <% } else { %>
                    <ul class="noMarkers grid">
                        <li><a href="/account/edit/" title="Click to View Account Information">Account</a></li>
                        <li><a href="/profile/<%= Acc.getAccountID() %>" title="Click to View Your Profile">Profile</a></li>
                        <li><a href="/help" title="Click to Get Help">Help</a></li>
                        <li><a href="/account/logout" title="Log Out">Log Out</a></li>
                    </ul>
                <% } %> 
```

登录按钮应该更改为链接，但事实并非如此。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:08:25.087

尝试使用[Spring Security 提供的 taglib](http://static.springsource.org/spring-security/site/docs/current/reference/taglibs.html)。特别是，您可以使用`<sec:authorize>`标签：

```
<sec:authorize access="isAuthenticated()">
    ....
</sec:authorize> 
```

从其文档中：

> 如果配置的访问表达式对当前经过身份验证的主体的计算结果为 true，则输出标记正文的标记。

有关可以在上述`access`表达式中使用的函数的概述，请查看参考文档的[这一部分](http://static.springsource.org/spring-security/site/docs/current/reference/el-access.html)。

# mysql - 在本地主机上重新启动 MySQL 服务器而不重新启动 PC

> ID：15419947
> 
> 赞同：1
> 
> 时间：2013-03-14T20:52:35.433
> 
> 标签：mysql

我安装了 MySQL，并且能够使用我在 Django 中创建的站点运行查询。我最近不得不在任务管理器中中止 mysql，因为我的一个查询需要很长时间才能响应。

我现在无法重新启动服务器。我已尝试按照 mysql 文档中的说明运行 mysqld，但这会打开一个命令行窗口，该窗口会立即关闭。

有没有一种方法可以在不重新启动 PC 的情况下重新启动服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:01:21.437

在 Windows 中：

```
net stop MySQL
net start MySQL 
```

在 Ubuntu 中：

```
sudo /etc/init.d/mysql restart 
```

在 MacOS 中：

```
sudo /Library/StartupItems/MySQLCOM/MySQLCOM stop
sudo /Library/StartupItems/MySQLCOM/MySQLCOM start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:10:58.653

将来您可以在不中止 mysql 的情况下终止卡住的查询

创建一个 .bat 以打开 mysql 控制台（更改目录以满足您的需要）：

```
cd C:\xampp\mysql\bin
mysql database_name --host=localhost --user=name --password 
```

获取进程列表：

```
show full processlist; 
```

杀死卡住的进程：

```
kill 12345; 
```

无需重启^^。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T08:35:20.680

在 Windows 中，在命令提示符窗口中使用以下命令，但是您应该以管理员身份运行 cmd.exe

净停止 MySQL

网络启动 MySQL

# c# - 如何将approvaltests的批准文件放在自己的文件夹中？

> ID：15419963
> 
> 赞同：16
> 
> 时间：2013-03-14T20:53:36.500
> 
> 标签：c#, unit-testing, approval-tests

我不知道如何移动 .approved。文件到 Approval-tests 中自己的文件夹中。我猜信息在某处——我就是找不到。

[https://github.com/approvals/ApprovalTests.Net](https://github.com/approvals/ApprovalTests.Net)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T21:41:57.473

当前的方法是通过注释夹具或在装配级别使用

```
[ApprovalTests.Namers.UseApprovalSubdirectory("foldername")] 
```

如果您在 3.2 版之前，您可以创建一个自定义命名器来处理此问题。基本情况是：

覆盖框架的命名器，并覆盖方法 SourcePath

```
public string SourcePath
{
    get { return base.SourcePath + @"\yourSubfolder"; }
} 
```

然后你需要将你的新命名器添加到堆栈中

```
StackTraceParser.AddParser(new MyNamer()); 
```

尽管我会问为什么要将批准文件分离到测试的子目录中？我确信有一个很好的理由，但我发现让它们更接近我的实际测试更好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-18T22:12:44.730

从 Git 的代码来看，Llewellyn 似乎刚刚添加了以下属性......

[UseApprovalSubdirectory("Approvals")]

.. 将批准放在名为“Approvals”的子文件夹中。这似乎适用于测试和课程级别。

当每个单元测试文件有许多批准文件时，这有助于保持这些批准的组织。

# android - 使用服务更新小部件

> ID：15419965
> 
> 赞同：1
> 
> 时间：2013-03-14T20:53:53.710
> 
> 标签：android, android-widget, broadcastreceiver, alarmmanager, android-pendingintent

根据本[教程](http://www.gotoquiz.com/web-coding/programming/android-development/how-to-make-an-android-home-screen-widget-update-only-when-visible/)，我创建了自己的小部件的修改版本。现在的问题是 AlarmManager.setRepeating 没有间隔触发意图。在我看来，接收者甚至没有收到那个意图。

更准确地说，我有

*   WidgetActivity 扩展 AppWidgetProvider
*   WidgetUpdate 扩展 IntentService
*   WidgetAlarmReceiver 扩展 BroadcastReceiver

WidgetActivity 正确触发 WidgetUpdate 类，在该类中，当小部件处于活动屏幕上时，AlarmManager 必须以间隔（30 秒）与 BroadcastReceiver 进行通信。

WidgetUpdate.class

```
public class WidgetUpdate extends IntentService{
public WidgetUpdate() {
    super(null);
}

public static int UPDATE_FREQUENCY_SEC = 30;

@Override
public void onCreate() {
    super.onCreate();
    AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

    PendingIntent alarmIntent = alarmIntent();

    long timeToRefresh = SystemClock.elapsedRealtime() + UPDATE_FREQUENCY_SEC * 1000;
    alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME,
                                     timeToRefresh,
                                     UPDATE_FREQUENCY_SEC * 1000,
                                     alarmIntent);
}
private PendingIntent alarmIntent() {
    Intent intentToFire = new Intent(WidgetAlarmReceiver.ACTION_REFRESH_ALARM);
    PendingIntent alarmIntent = PendingIntent.getBroadcast(this, 0, intentToFire, 0);
    return alarmIntent;
}
@Override
protected void onHandleIntent(Intent intent) {
    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);

    if (!pm.isScreenOn()) {
        cancel();
    }
    else {
        WidgetActivity widget = new WidgetActivity();
        widget.updateWidget(getBaseContext());
    }

} 
```

WidgetAlarmReceiver.class

```
public class WidgetAlarmReceiver extends BroadcastReceiver{

public static final String ACTION_REFRESH_ALARM =
        "WidgetAlarmReceiver.ACTION_REFRESH_ALARM";

@Override
public void onReceive(Context context, Intent intent) {
    WidgetActivity.startWidgetUpdateService(context);
}
} 
```

BroadcastReceiver 没有启动该更新服务，我不知道为什么。

编辑：在清单中：

```
<receiver android:name="WidgetAlarmReceiver">
        <intent-filter>
           <action android:name="WidgetAlarmReceiver.ACTION_REFRESH_ALARM" />
        </intent-filter>
</receiver> 
```

# mysql - 如何删除空的mySQL记录？

> ID：15419972
> 
> 赞同：-5
> 
> 时间：2013-03-14T20:54:12.860
> 
> 标签：mysql

您好，我有数千条这样的记录，我的问题是如何使用 sql 查询删除它们？

![在此处输入图像描述](../Images/a424238ba8647ab7499dab1cbb1567b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:55:11.397

如果你`meta_key`是`null`你可以使用

```
delete from your_table
where meta_key is null 
```

如果它只是一个空字符串使用

```
delete from your_table
where meta_key = '' 
```

如果您`meta_key`只包含空格，则使用（可能运行速度较慢）

```
delete from your_table
where trim(meta_key) = '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:03:09.453

```
DELETE FROM `tablename` WHERE CHAR_LENGTH(`meta_key`) < 1 
```

# r - Function that returns its argument, named by itself

> ID：15419973
> 
> 赞同：0
> 
> 时间：2013-03-14T20:54:19.473
> 
> 标签：r

Is there a function in base R or a package which takes a list as argument and returns this list with the names set to the list items? Something along these lines:

```
named.list <- function(l) { names(l) <- l; l } 
```

This is useful for the `l?ply` functions in `plyr` -- these functions keep the names of the argument list. Compare:

```
llply(c('a', 'b', 'c'), function(x) paste0('(', x, ')')) 
```

> ```
>  [[1]]
>  [1] "(a)"
> 
>  [[2]]
>  [1] "(b)"
> 
>  [[3]]
>  [1] "(c)" 
> ```

```
llply(named.list(c('a', 'b', 'c')), function(x) paste0('(', x, ')')) 
```

> ```
>  $a
>  [1] "(a)"
> 
>  $b
>  [1] "(b)"
> 
>  $c
>  [1] "(c)" 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:01:02.790

例如，你想要这个吗？：

```
ll <- c('a', 'b', 'c')
ll <- setNames(ll,ll)
 ll
  a   b   c 
"a" "b" "c" 
```

# c# - 为什么 C# 将我的颜色结构更改为 ValueType？

> ID：15419974
> 
> 赞同：0
> 
> 时间：2013-03-14T20:54:20.487
> 
> 标签：c#, .net, visual-c++, c++-cli, extension-methods

我在 C++ CLI 中定义了以下代码。
但是，当我想调用 SetColor 时，第一个参数应该显示为 System.Drawing.Color; 显示为 ValueType。
这也让我可以将任何变量传递给它。不管是`Color`不是。

```
[System::Runtime::CompilerServices::ExtensionAttribute]
public ref class MyExtensions abstract sealed {
public:        
    [System::Runtime::CompilerServices::ExtensionAttribute]
    static System::String^ SetColor(System::String^ in, System::Drawing::Color^ ext) {
        return gcnew System::String("{") +
            ext->R.ToString("X") + ext->G.ToString("X") + ext->B.ToString("X")
            + gcnew System::String("}")  + in;
    }        
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:55:13.430

颜色是一个结构。`^`从参数中删除`System::Drawing::Color^ ext`。

另外，`gcnew System::String("{")`是多余的。直接用`"{"`就行了，已经是String对象了。

# c# - 使用 .NET 启用“更好的”视觉外观/主题

> ID：15419976
> 
> 赞同：0
> 
> 时间：2013-03-14T20:54:22.423
> 
> 标签：c#, .net, vb.net

我将 C#.NET 和 vb.NET 与框架 4.0 一起用于在 Windows XP 计算机上运行的混合应用程序。默认情况下，所有这些计算机的视觉效果都设置为“调整以获得最佳性能”。当然，这并不能使我的应用程序看起来最好......我想知道是否有一种方法可以通过代码启用主题/更好的外观，而无需手动更改我的计算机下的设置。

我已经尝试过这种 `Application.EnableVisualStyles`方法，但它似乎没有奏效。

我的意思的照片，对不起它是 vauge。

[http://www.fanhow.com/images/5/57/How_to_Adjust_for_best_performance_in_Windows_XP3.jpg](http://www.fanhow.com/images/5/57/How_to_Adjust_for_best_performance_in_Windows_XP3.jpg)

相比

[http://i.udm4.com/screenshots_u4win/993/993720_2.jpg](http://i.udm4.com/screenshots_u4win/993/993720_2.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:05:57.787

按照你的评论，你不能。在系统属性控制面板中未选中“应用视觉样式”时，Windows（XP 到 7）将永远不会将视觉样式应用于任何和所有应用程序。

在速度低于 400Mhz 且 RAM 小于 128MB 的机器上禁用视觉样式有一个性能案例 - 但现在我们的计算机的功能大约是 50 到 100 倍，除非您使用的是 13 年前的硬件，否则没有理由禁用视觉样式（当然，除非你觉得它们很丑）。

这不适用于 Windows 8，因为视觉风格引擎始终处于启用状态且无法关闭（Hyper-V 服务器除外，出于某种原因）。

# javascript - 动态更改 Highcharts 数据系列类型

> ID：15419979
> 
> 赞同：9
> 
> 时间：2013-03-14T20:54:24.097
> 
> 标签：javascript, jquery, highcharts

我有多个系列的 Highcharts 和每个系列的“选择”。我的目标是通过“选择”更改系列类型。

```
$('#ChType').change(function () {
    var series = chart.series[0]
    var newType = $('#ChType').val();
    changeType(series, newType);
})

$('#ChType2').change(function () {
    var series = chart.series[1]
    var newType = $('#ChType2').val();
    changeType(series, newType);
})

function changeType(series, newType) {
    var dataArray = [],
        points = series.data;
    series.chart.addSeries({
        type: newType,
        name: series.name,
        color: series.color,
        data: series.options.data
    }, false);
    alert(series.name);
    series.remove();
} 
```

我知道每次更改类型时，系列都会从数组中的当前位置删除并添加到末尾。目前，我只能更改位置 series[0] 中的系列。

如何更改任何其他系列而不仅仅是系列[0]？

我确实在[这里](https://stackoverflow.com/questions/13715733/fixing-discounting-a-data-series-when-changing-chart-type-in-highcharts)看到了类似的问题，但无法让它发挥作用。

我在[jsFiddle](http://jsfiddle.net/karin/waBck/3/)中的示例代码。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T10:53:55.547

您可以使用 v3.0 highcharts 包含的 series.update() 方法，该方法允许动态更改图表类型。

[http://jsfiddle.net/8Sg8K/1](http://jsfiddle.net/8Sg8K/1)

```
chart.series[0].update({
                type: "column"
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:13:53.177

您为什么不在类似问题中包含链接到的循环？

```
 $('#ChType').change(function(){
     var series;

     for ( i = 0 ; i < chart.series.length ; i++ ) {
            if ( chart.series[i].name == 'MyData1' ) {
                series = chart.series[i];

            }                
        } 
                 //var series = chart.series[0]
                 var newType = series.type == $('#ChType').val() ? $('#ChType').val() 
```

为每种类型设置它 - [http://jsfiddle.net/waBck/5/](http://jsfiddle.net/waBck/5/)

# java - 在格式化特定日期/时间格式时遇到问题

> ID：15419984
> 
> 赞同：3
> 
> 时间：2013-03-14T20:54:32.847
> 
> 标签：java, parsing, date, time

我在格式化以下日期/时间时遇到问题：

```
2013-01-10T17:04:24.3787635-02:00 
```

现在，我明白`2013-01-10`是日期（显然）。

`17:04:24.3787635`可能是时间，虽然我不知道点后面的数字是什么意思。

`-02:00`我认为这是时区（GMT）。

我怎样才能在java中解析这个？（也许使用 JodaTime）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:59:03.757

尝试使用这种模式：

```
"yyyy-MM-dd'T'HH:mm:ss.SSSXXX" 
```

可以以这种格式解析日期：

```
2001-07-04T12:08:56.235-07:00 
```

虽然，`3787635`在您的源字符串中很麻烦。它看起来不像毫秒。

查看[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)有关模式的更多详细信息。

您也可以尝试[`DatatypeConverter.parseDateTime`](http://docs.oracle.com/javaee/6/api/javax/xml/bind/DatatypeConverter.html#parseDateTime%28java.lang.String%29)which 返回一个`java.util.Calendar`对象。

```
DatatypeConverter.parseDateTime("2013-01-10T17:04:24.3787635-02:00").getTime() 
```

上面的语句执行没有任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:10:14.400

您可以使用[JodaTime](http://joda-time.sourceforge.net/)解析此日期：

```
String time = "2013-01-10T17:04:24.3787635-02:00";
DateTimeFormatter df = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss.SSSSSSSZ");
DateTime dateTime = df.parseDateTime(time); 
```

点 () 后面的数字是[DateTimeFormat](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)`.`中表示的秒数。表示时区模式。`S``JodaTime's` `Z`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:08:54.220

您的时间字符串的格式是 ISO8601 格式。JodaTime 类`ISODateTimeFormat`将直接支持该格式。但是，您将失去任何超过毫秒的精度。

```
String time = "2013-01-10T17:04:24.3787635-02:00";
DateTime dateTime = ISODateTimeFormat.dateTime().parseDateTime(time); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T21:13:17.610

只有使用 javax.xml.XMLGregorianCalendar 才能正确解析此格式。您不能使用 SimpleDateFormat，因为它接受 SSS 作为毫秒数，而不是作为秒的小数部分。

```
 String s = "2013-01-10T17:04:24.3787635-02:00";
    DatatypeFactory dtf = DatatypeFactory.newInstance();
    Date date = dtf.newXMLGregorianCalendar(s).toGregorianCalendar().getTime(); 
```

# node.js - Node-Webkit Facebook 集成

> ID：15419985
> 
> 赞同：4
> 
> 时间：2013-03-14T20:54:37.393
> 
> 标签：node.js, facebook-graph-api, coffeescript, node-webkit

我正在使用 node-webkit 构建一个新闻阅读器式桌面应用程序

[https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)

基本上同时是服务器和客户端。我对 facebook API 的问题如下：我希望我的应用程序的用户登录并向他们展示他们当前的墙贴和类似的东西。此外，我还有一些来自其他来源的新闻项目，应该是该用户喜欢/分享的。

整个应用程序是一个包含多个组件的单页 JS（更准确地说是：coffeescript），硬重定向是不可能的。

API 中显示的每个登录可能性似乎都不适合我的应用程序类型。连接到 facebook 的最佳方式是什么，没有硬重定向，也没有自己的 URI 可以重定向到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T16:04:45.517

如果您正在开发一个独立的客户端应用程序，而不是一个网站，我不会尝试使用他们的 Javascript API，因为它假设它正在某个网站上运行。

[使用非官方](https://developers.facebook.com/tools/third-party-sdks/#nodejs)的 Node.js API 可能会更幸运，因为 node-webkit 允许您从 DOM 中调用任何 Node.js 库。

如果仍然没有成功，请尝试让用户自己登录 Facebook，将其登录页面显示为`<iframe>`. 然后，您可能能够通过 AJAX 或通过 Node.js HTTP API 进行 HTTP 调用，以直接调用 Facebook 的内部 API。

# wicket - Wicket: getApplication Differences

> ID：15419986
> 
> 赞同：2
> 
> 时间：2013-03-14T20:54:49.257
> 
> 标签：wicket

I have a question about wicket getApplication.

1.  What is the difference between getApplication() and getSession().getApplication?
2.  When you deploy the wicket application, is the wicketapplication object shared between all users who run it? Or is a separate instance created every time a user hits the page?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T22:39:18.973

1.  在 Component.getApplication() 的情况下，Application 对象通过调用 Application.get() 通过 threadlocal 获取和返回。另一方面 getSession().getApplication() 首先检索会话对象，然后委托给同一个 Application.get() 静态调用，由于会话查找，这可能会更昂贵，因此调用 getSession() 不是最佳的. 您几乎可以使用 Application.get() 而不是这两个选项。

2.  Application 对象是一个单例，它甚至不是可序列化的，它在运行应用程序的同一 jvm 内的每个线程之间共享。

# c# - Asserting unverified added properties to an object in a unit test

> ID：15419990
> 
> 赞同：5
> 
> 时间：2013-03-14T20:54:52.850
> 
> 标签：c#, unit-testing, mstest

I have MSTest (VS 2012) unit tests where I want to assert that the various properties of an object have the values I want. There are many ways to do this. However my main concern is that if a new property is added to the object, it's easy to overlook updating the unit tests to make sure that it has the values we expect.

One thing I can think of is to use reflection to enumerate the public properties of the object, then keep track of which properties the unit test has asserted, and at the end, assert if any properties did not get checked.

Has anybody already written something similar?

Any better ideas?

**Update:** I should point out that the objedct in question is something like a Data Transfer Object where there are other classes/methods that cause data in that object to be updated. It's easy to overlook updating the tests for those classes/methods to make sure that we account for all of the object's properties. I want something a bit stronger (i.e. can't be forgotten or overlooked) than right-clicking on the object, finding references, and reviewing the code.

For example:

```
public class Person {
  public string FirstName;
}

public Person GetPerson() {}

[TestMethod]
public void GetPerson_ReturnsFilledInPerson()
{
    var actual = target.GetPerson();
    Assert.IsNotNull(actual.FirstName);
    // If somebody later adds LastName to Person, 
    // we want this unit test to fail until the LastName is checked too.
} 
```

Thanks,

Dan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:48:55.583

你所要求的并不是没有道理的。对于简单的 Domain 类到 DTO 的映射，您可以使用 Automapper 等框架。您只需告诉它域类 A 映射到 dto ADto，它将使用约定优于配置来映射属性。该框架还附带了一种测试您是否已完成所有映射的方法。您可以调用`Mapper.AssertConfigurationIsValid();`，它将确保 Dto 中的每个属性都已映射到域类中的属性（在代码中显式或通过具有相同的属性名称而隐式映射）。

所以基本上你正在尝试做同样的事情，这就是为什么它是一个非常有效的场景。假设您选择不使用 Automapper。我猜您的代码中没有单独`mapper`的代码（在这种情况下，您可以使用反射来测试您的映射器类/代码）。我做过类似的事情，所有 DTO 都实现了返回另一个 IDto 的 DeepCopy 方法。但我们希望实际类型与调用类型相同

```
 [Test]
    public void DeepCopyReturnsSameTypeAsOriginal()
    {
        var iDtoType = typeof (IDto);
        var allIDtoTypes = iDtoType.Assembly.GetTypes().Where(t => iDtoType.IsAssignableFrom(t) && t.IsClass && !t.IsAbstract).ToList();

        foreach (var currentIDtoType in allIDtoTypes)
        {
            var instanceOfDtoType = (IDto)Activator.CreateInstance(currentIDtoType);
            var deepCopyType = instanceOfDtoType.DeepCopy();
            Assert.AreEqual(instanceOfDtoType.GetType(), deepCopyType.GetType(), 
                                string.Format("Deep Copy of Type '{0}' does not return the same Type. It returns '{1}'. The DeepCopy method of IDto should return the same type.",
                                instanceOfDtoType.GetType(), deepCopyType.GetType()));
        }
    } 
```

您可以使用类似的逻辑来获取您的人员对象。获取人员对象的所有公共属性并对其进行迭代并断言您返回的具体人员对象包含该特定属性的非空值。

尽管在这种情况下，测试只能用于非常特定的对象，您知道所有属性都必须具有非空值。以值类型为例，如果 AccountBalance 属性返回 0，那么此人的余额是 0 还是未设置该属性？如果此人的电子邮件属性为空，这是否意味着它未映射，或者我们只是在系统中没有此人的电子邮件。这就是为什么如果您有特定的映射器类或使用 Automapper，那么您将更具体地测试映射是否存在，而不是“这是否具有价值”，正如我所说，这可能仍然适用于您的应用程序中的一些有限类。

另一种选择是装饰您知道不能为空且必须使用自定义属性映射的属性。例如

```
Public class PersonDto {
    [TestNotNull]
    public string FirstName { get; set}

} 
```

然后在您的单元测试中，您可以使用反射来查找具有此属性的所有属性并确保它们不为空。但是，当然，您会遇到您试图在不同级别解决的相同问题。如果您担心人们会忘记映射重要字段，则不能保证他们会记得使用自定义属性来装饰这些字段。

当然，您可能不想测试该属性是否正在被映射，而只想测试该属性是否存在。在这种情况下，使用反射来获取域对象类型的所有属性的列表，并确保它们中的每一个都存在于 DTO 对象类型的属性列表中。但这并不能测试属性本身是否被映射，只测试它们是否存在。如果您使用 Automapper 及其`AssertConfigurationIsValid()`测试，您测试的是 DTO 中的每个属性都被正确映射，而不是域中的每个属性在 DTO 中都有关联的属性。

因此，要回答您的问题，如果您想测试该属性是否存在以及是否正确映射，您需要两个测试。一个是比较域对象类型和 Dto 对象类型，并确保一个对象的属性存在于另一个对象中，另一个测试是确保 DTO 中的所有属性都被映射到某个东西（不管你是否正在做映射在您自己的代码中或使用 Automapper 之类的框架）。

# visual-studio-2012 - WinJS 智能感知无法正常工作

> ID：15419991
> 
> 赞同：3
> 
> 时间：2013-03-14T20:54:54.437
> 
> 标签：visual-studio-2012, windows-store-apps, winjs

我的 Win8 HTML5/JS 应用程序中的智能感知存在一些问题（我认为）。

如果我在页面中有以下代码（在 ready: 函数中）：

```
var control = element.querySelector("#rating").winControl; 
```

我的第一个问题是，.winControl 属性没有显示在智能感知中，但是从搜索网络来看，这似乎是预期的行为（考虑到在像 javascript 这样的语言中提供智能感知的困难）？

但是，我现在的主要问题是，当我尝试访问控制变量的属性时，我收到以下消息：

> Intellisense 无法确定此表达式的准确完成列表

我已将`/// <reference path...`etc 添加到 WinJS 参考中的 base.js 和 ui.js 中，但它仍然不起作用。

有谁之前经历过这个吗？这是正确的行为吗？我在这里想念什么？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T07:32:21.367

您所看到的是 Visual Studio 2012 中的预期行为。目前 .winControl 不会显示，即使它在运行时有效。

作为一种解决方法，您可以使用文档注释告诉 JavaScript 编辑器变量的类型，然后您可以获得 IntelliSense。使用上面的示例（我假设您想查看有关 WinJS.UI.Rating 控件的建议），输入：

```
/// <var type="WinJS.UI.Rating"/>
var control = element.querySelector("#rating").winControl;
control. 
```

现在您将看到评级控件的完成列表。

*   乔丹，微软 Visual Studio 项目经理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:07:31.253

querySelector 函数返回一个 DOM 元素。由于 .winControl 不是 DOM 元素的标准属性，因此智能感知无法将其作为选项呈现给您。

由于您的“控制”变量被分配给智能感知未知类型的对象，因此它无法为您提供有关未知对象上可能存在或不存在哪些属性的任何帮助。

# php - 使用 unix 时间戳进行 hh:mm:ss 倒计时而不使用 jquery

> ID：15419992
> 
> 赞同：0
> 
> 时间：2013-03-14T20:54:56.453
> 
> 标签：php, javascript, mysql

我不明白为什么几个小时的搜索让我两手空空。情况是这样的：我的网站用户可以设置活动开始的日期和时间。该日期和时间作为时间戳存储在数据库中。我想为他们显示倒计时。所以，我查询数据库

```
SELECT TIMESTAMPDIFF(SECOND, NOW(), start) 
FROM events 
WHERE eid = '110'; 
```

这将返回事件设置开始之前剩余的秒数。我想要的只是能够在 a 中输出`span`天数、小时数、分钟数和秒数。

这是我到目前为止的javascript：

在阅读了评论、搜索更多内容并一起破解了一些东西之后，这是我更新的代码：

```
<span id="countdown-1"><?php echo $timeToEvent; ?></span> 
```

（如果有更合适的方法可以将我的“直到事件的秒数”值添加到脚本中，请纠正我。）

```
secs = parseInt(document.getElementById('countdown-1').innerHTML,10);
setTimeout("countdown('countdown-1',"+secs+")", 1000);

function countdown(id, timer){
    function pad(num) {
        return num > 9 ? num : '0'+num;
    };
    timer--;
    days = Math.floor( timer / 86400 ),
    hours = Math.floor( timer / 3600 ),
    mins = Math.floor( timer / 60 ),
    secs = Math.floor( timer ),

    dd = days,
    hh = hours - days * 24,
    mm = mins - hours * 60,
    ss = secs - mins * 60;

    clock = dd + ' days ' + pad(hh) + ':' + pad(mm) + ':' + pad(ss) ;

    document.getElementById(id).innerHTML = clock;
    if ( timer > 0 ) {
        setTimeout("countdown('" + id + "'," + timer + ")", 1000);
    } else {
        window.location.reload(true);
    }
} 
```

[http://jsfiddle.net/mmJQq/](http://jsfiddle.net/mmJQq/)

此代码有效。但是，正如我上面写的，我**不知道是否应该`$timeToEvent`更直接地将 php 变量传递给脚本**。在 javascript 将其更改为我想要看到的内容之前，实际的秒数出现在跨度中大约 1 秒，这有点令人讨厌。（顺便说一句，在这种情况下，我并不太关心准确性；我不介意时间漂移。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:15:02.413

你永远不会改变`diff`。每次函数运行时，它仍然是相同的值。`diff`移出函数，然后每次函数运行时将其递减 1000 毫秒（1 秒）。

```
 var
    diff = 3850000; // Move this outside the function so that it can be changed.
                    // If you don't, it will get reset to its original value
                    // every time updateETime runs.

function updateETime() {

  function pad(num) {
    return num > 9 ? num : '0'+num;
  };

    days = Math.floor( diff / (1000*60*60*24) ),
    hours = Math.floor( diff / (1000*60*60) ),
    mins = Math.floor( diff / (1000*60) ),
    secs = Math.floor( diff / 1000 ),

    dd = days,
    hh = hours - days * 24,
    mm = mins - hours * 60,
    ss = secs - mins * 60;

    document.getElementById("countdown_time")
        .innerHTML =
            dd + ' days ' +
            pad(hh) + ':' + //' hours ' +
            pad(mm) + ':' + //' minutes ' +
            pad(ss) ; //+ ' seconds' ;

    diff -= 1000; // Every time the function runs, subtract one second from diff.

}
setInterval(updateETime, 1000 ); 
```

[http://jsfiddle.net/ZWrqB/](http://jsfiddle.net/ZWrqB/)

正如评论者指出的那样，这并不完全可靠，因为`setInterval`不会可靠地每秒钟触发*一次*，因此您的计时器的准确性会一点一点地漂移，直到页面被刷新。更好的方法是存储倒计时的时间，然后每次函数触发时，计算当前时间的偏移量并将该偏移量用于计时器显示。这个 SO 答案是一个很好的方法：[https ://stackoverflow.com/a/11336046/711902](https://stackoverflow.com/a/11336046/711902)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:13:42.280

时间是静止的，因为时间是静止的。

在您的函数`updateETime()`中，您显示变量`diff`，分解为天、小时、分钟和秒。但由于`diff`从不改变，因此显示也不会改变。

如果要显示倒计时，则必须`diff`在每次调用时递减`updateETime()`。

# c - C语言中2个微控制器之间的执行同步

> ID：15419993
> 
> 赞同：3
> 
> 时间：2013-03-14T20:54:56.713
> 
> 标签：c, synchronization, arm

我想用这个问题来讨论通过 2 个或更多微控制器的网络进行同步的算法。

今天下午我开始考虑这个问题，我会让 2 个不同的微控制器交换数据，然后同步执行以同时开始工作并在大约同一时间完成工作。这是一种确保您正在运行的代码是正确的并且内存中可能没有错误的方法（您可以想象，在两个微控制器上出现完全相同错误的可能性非常低）。

我想只发送带有微控制器 1 时间戳的消息，然后第二个微控制器将接收它并将其与自己的时间戳进行比较，然后将其重新发送到微控制器 1。

那时，他们都将开始执行相同的代码，并在最后同步，在那里他们将交换彼此的结果，然后他们会得出结论，如果有什么问题，或者一切正常。

我认为这将是实现两个微控制器之间执行同步的“体面”方式，但我无法摆脱可能会有更好、更智能的方式来做到这一点。

这个“可能”适用于 2 个微控制器，但是当我想使用更多微控制器时呢？如果我想按照我之前解释的方式实现一个 5 核系统（例如 5 个 arm9 核）怎么办。我不认为这适用于几个微控制器。即使我想实现一个所有微控制器都可以完成不同工作的 5 核系统（我认为在所有情况下同步必须是最好的......我真的不知道我从来不需要超过一个内核，但从现在开始我需要这样做）

**编辑：**

我想用这个问题来理解通过网络同步的算法，或者在同一块板上，2个或更多微控制器。

今天下午我开始考虑这个问题，我会让 2 个不同的微控制器交换数据，然后同步执行以同时开始工作并在大约同一时间完成工作。这是一种确保您正在运行的代码是正确的并且内存中可能没有错误的方法（您可以想象，在两个微控制器上出现完全相同错误的可能性非常低）。

我想只发送带有微控制器 1 时间戳的消息，然后第二个微控制器将接收它并将其与自己的时间戳进行比较，然后将其重新发送到微控制器 1。

那时，他们都将开始执行相同的代码，并在最后同步，在那里他们将交换彼此的结果，然后他们会得出结论，如果有什么问题，或者一切正常。

我认为这将是实现两个微控制器之间执行同步的“体面”方式，但我无法摆脱可能会有更好、更智能的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:32:00.327

There are certainly systems around where two or more processors are performing the same task and the results are compared. I know of autmatic train controls that have two systems that should produce the same result, and if one of the system DOESN'T produce the same result, the emergency brake is "pulled" and the train stops until the driver pushes the "I notice the computer isn't working right" button. The two systems have software written by two different sets of developers, who are not sharing any information on how they go about implementing their solution so as to avoid "common errors because we both thought THIS should be solved this way".

Airplane electronic usually uses an uneven number and "majority voting" to select between multiple answers from different systems - it's a bad idea to just "stop" in an ariplane. Again, systems are using different software and often also different suppliers of for example processors and languages - so one system is written in C or C++, another in Java and the third one in Pascal or ADA [as an example] - to reduce the chances of a processor, language or compiler bug causing EVERY thing in the system from going "wrong".

From a previous job working with x86, I have looked into this in a fair bit of detail for a customer who wanted to have a "backup processor running in lock-step", and they had to use a modified compiler that added I/O instructions at decision points in the code [branches, calls, returns, etc] and then external hardware to ensure that the processors were actually in sync]. So, modern processors, including such ARM have enough "clever stuff" that is fairly "unpredictable" inside the processor that it's almost impossible to make two processors run in exact lock-step with each other. Sure you can get something that "performs the same task in the same amount of time", as long as you don't measure time TOO precisely.

Superscalar execution units, asynchronous interrupts, asynchronous(ish) memory controllers, caches, content of caches, all conspire to make one processor run just a little faster or slower than the other.

So, there is a limit to how precisely you can make the systems "sync".

Network Time Protocol (NTP) does have some pretty clever algorithms for setting/syncing the time between multiple systems, which allows several systems to have the same idea of "time". But bear in mind that again, there is a limit to "sameness". It is likely several microseconds.

So, whether you can "start at the same time" depends on what you mean by "same time". Is microseconds or milliseconds OK? If so, almost certainly possible. If you mean clock-cycles, then probably not.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:27:52.343

There are a number of ways to do this, depending on how custom you'd want to make the system, and how precise you need it to run.

You're on the right track with the timestamps being sent back and forth though. The "standard" way of doing local synchronization like this is the [Precision Time Protocol (PTP / IEEE 1588)](http://en.wikipedia.org/wiki/IEEE_1588), which works down to microsecond precision, depending on the implementation (opposed to the [Network Time Protocol, NTP](http://en.wikipedia.org/wiki/Network_Time_Protocol), which is better suited for long-distance synchronization, and can typically not achieve synchronization better than in the millisecond-range).

If you have a Linux system with Ethernet or similar running on your microcontrollers, you could thus have a look at [PTPD](http://ptpd.sourceforge.net/). Or, if you want to implement something yourself, have a look at the PTP (and probably also the NTP) algorithm(s) and be inspired.

# linux - perforce submission files marked by "edit" or "integrate", why?

> ID：15419998
> 
> 赞同：2
> 
> 时间：2013-03-14T20:55:18.550
> 
> 标签：linux, perforce

I am using perforce on Linux.

When I did a submission, I found the status of one the submitted files is marked by `edit`.

```
//depot/common/mySpace/branches/mySpace___home_user_mySpace_project_level/myfile.cxx  #  edit 
```

But sometimes it is marked by `integrate`.

How do I make this `integrate`? Are there any benefits of doing this?

Any help will be appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T21:05:06.007

*   如果您对`p4 integrate`版本控制下已经存在的文件（不运行）进行更改，并提交更改，它将被标记为`edit`

*   如果您将一个文件或一组文件从一个 perforce 位置集成到另一个位置，`integrate`只要您在提交前没有进行任何进一步的更改，它就会被标记为。

*   如果您在提交之前集成并编辑文件，perforce 会将其标记为`edit`.

老实说，标记为集成或编辑的文件中没有优点/缺点。`p4 filelog`在这两种情况下，文件之间仍然存在有效的集成历史记录，可以与`p4 annotate`等工具一起使用。

除了`edit`, `integrate`, 还有`add`,`branch`和`delete`。

*   perforce 将文件标记`add`为新添加的文件。
*   perforce 将文件标记`branch`为第一次从某个位置集成并且该文件在目标中尚不存在。
*   perforce 将文件标记`delete`为删除时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T21:04:21.843

"edit" 和 "integrate" 表示 Perforce 认为您正在对文件执行的操作。如果您使用“p4 edit”命令更新文件，它将被标记为“edit”。如果您使用“p4 集成”或“p4 分支”来分支或合并文件，它们将被标记为“集成”。这两个标签都没有任何好处，它们是由 Perforce 设置的，具体取决于您使用的命令。