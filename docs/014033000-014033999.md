# StackOverflow 问答 14033000-14033999

# ruby-on-rails - “验证失败：电子邮件无效”Hartl Rails 教程

> ID：14033008
> 
> 赞同：0
> 
> 时间：2012-12-25T18:23:41.027
> 
> 标签：ruby-on-rails, railstutorial.org

我弄坏了一些东西。在 Hartl's Rails Tutorial 的第 9.3.2 节之后，我突然收到 27 个错误，都说类似于：

```
23) Authentication signin with valid information 
 Failure/Error: let(:user) { FactoryGirl.create(:user) }
 ActiveRecord::RecordInvalid:
   Validation failed: Email is invalid
 # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels) in <top (required)>'
 # ./spec/requests/authentication_pages_spec.rb:32:in `block (4 levels) in <top (required)>' 
```

我一直在寻找错别字或放错位置的''，这是我以前的失败，但没有看到任何。以下是一些相关页面。

工厂.rb

```
FactoryGirl.define do 
  factory :user do
    sequence(:name)  { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}" }
    password "foobar"
    password_confirmation "foobar"
  end 
end 
```

lib/tasks/sample_data.rake

```
namespace :db do
  desc "fill database with sample data"
  task populate: :environment do
  User.create!(name: "Example User",
                 email: "example@railstutorial.org",
                 password: "foobar",
                 password_confirmation: "foobar")
    99.times do |n|
      name = Faker::Name.name
      email = "example-#{n+1}@railstutorial.org"
      password = "password"
      User.create!(name: name,
               email: email,
               password: password,
               password_confirmation: password)
    end
  end
end 
```

user_pages_spec.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update]
  before_filter :correct_user,   only: [:edit, :update]

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create 
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def index
    @users = User.paginate(page: params[:page])
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to signin_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

user_pages_spec.rb

```
require 'spec_helper'

describe "User Pages" do

  subject { page }

  describe "index" do

    let(:user) { FactoryGirl.create(:user) }

    before(:each) do
      sign_in user
      visit users_path
    end

    it { should have_selector('title', text: 'All users') }
    it { should have_selector('h1',    text: 'All users') }

    describe "pagination" do

      before(:all) { 30.times { FactoryGirl.create(:user) } }
      after(:all)  { User.delete_all }

      it { should have_selector('div.pagination') }

      it "should list each user" do
        User.paginate(page: 1).each do |user|
          page.should have_selector('li', text: user.name)
        end
      end
    end
  end

  describe "signup page" do
    before { visit signup_path }

    it { should have_selector('h1', text: 'Sign up') }
    it { should have_selector('title', text: full_title('')) }
  end

  describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }
    before { visit user_path(user)}

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

  describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end

      describe "after submission it should" do
        before { click_button submit }

        it { should have_selector('title', text: 'Sign Up') }
        it { should have_content('error') }
      end
    end

    describe "with valid information" do
      before { valid_signup } 

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end
      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_welcome_message('Welcome') }
        it { should have_link('Sign out') }
      end
    end
  end

  describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
      sign_in user
      visit edit_user_path(user)
    end

    describe "page" do
      it { should have_selector('h1',    text: "Update your profile") }
      it { should have_selector('title', text: "Edit user") }
      it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with invalid information" do
      before { click_button "Save changes" }

      it { should have_content('error') }
    end

    describe "with valid information" do
      let(:new_name)  { "New Name" }
      let(:new_email) { "new@example.com" }

      before do
        fill_in "Name",             with: new_name
        fill_in "Email",            with: new_email
        fill_in "Password",         with: user.password
        fill_in "Confirm Password", with: user.password
        click_button "Save changes"
      end

      it { should have_selector('title', text: new_name) }
      it { should have_selector('div.alert.alert-success') }
      it { should have_link('Sign out', href: signout_path) }
      specify { user.reload.name.should == new_name }
      specify { user.reload.email.should == new_email }
    end
  end
end 
```

authentication_pages_spec.rb

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_error_message('Invalid') }
    end

      describe "after visiting another page" do

        before { click_link "Home" }
        it { should_not have_error_message('Invalid') }
      end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Users',       href: users_path) }
      it { should have_link('Profile',     href: user_path(user)) }
      it { should have_link('Settings',    href: edit_user_path(user)) }
      it { should have_link('Sign out',    href: signout_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign In') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

        describe "when attempting to visit a protected page" do
          before do
            visit edit_user_path(user)
            fill_in "Email",     with: user.email
            fill_in "Password",  with: user.password
            click_button "Sign in"
          end

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end
        end
      end

      describe "in the Users controller" do

        describe "visiting the edit page" do
          before { visit edit_user_path(user) }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "visiting the user index" do
          before { visit users_path }
          it { should have_selector('title', text: 'Sign in') }
        end

        describe "submitting to the update action" do
          before { put user_path(user) }
          specify { response.should redirect_to(signin_path) }
        end
      end
    end

    describe "as wrong user" do
      let(:user) { FactoryGirl.create(:user) }
      let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
      before { sign_in user }

      describe "visiting Users#edit page" do
        before { visit edit_user_path(wrong_user) }
        it { should_not have_selector('title', text: full_title('Edit user')) }
      end

      describe "submitting a PUT request to the Users#update action" do
        before { put user_path(wrong_user) }
        specify { response.should redirect_to(root_path) }
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:31:44.853

你`:email`在工厂里定义错了

```
FactoryGirl.define do 
  factory :user do
    sequence(:name)  { |n| "Person #{n}" }
    sequence(:email) { |n| "person_#{n}" }
    password "foobar"
    password_confirmation "foobar"
  end 
end 
```

应该

```
sequence(:email) { |n| "person_#{n}@example.com" } 
```

# ruby - 实例变量声明

> ID：14033009
> 
> 赞同：3
> 
> 时间：2012-12-25T18:23:41.863
> 
> 标签：ruby

下面的代码什么也没打印，我期待`welcomeBack`. 请解释。

```
class Hello

  @instanceHello = "welcomeBack"

  def printHello
    print(@instanceHello)
  end

  Hello.new().printHello();
end 
```

我刚开始学习红宝石，所以如果问题看起来很愚蠢，请原谅。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T18:27:14.963

如果你只能记住关于定义方法和设置变量的一件事，那就是：总是问自己，此时此刻是什么`self`？

```
class Hello
  # This ivar belongs to Hello class object, not instance of Hello.
  # `self` is Hello class object.
  @instanceHello = "welcomeBack" 

  def printHello
    # Hello#@instanceHello hasn't been assigned a value. It's nil at this point.
    # `self` is an instance of Hello class
    print @instanceHello
  end

  def self.printSelfHello
    # Now this is Hello.@instanceHello. This is the var that you assigned value to.
    # `self` is Hello class object
    print @instanceHello
  end

end

Hello.new.printHello # >> 
Hello.printSelfHello # >> welcomeBack 
```

如果要为 ivar 设置默认值，请在构造函数中进行：

```
class Hello

  def initialize
    @instanceHello = "welcomeBack"
  end

  def printHello
    print @instanceHello
  end
end

Hello.new.printHello # >> welcomeBack 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T18:40:43.327

在 Ruby 中，实例变量是在实例方法中定义和使用的。所以你需要把你的任务放在`initialize`方法中：

```
class Hello

  def initialize
    @instanceHello = "welcomeBack"
  end

  def printHello
    print(@instanceHello)
  end

end

Hello.new.printHello(); 
```

另外，请注意，我将 printHello 调用移到了类定义之外。这是因为该类直到第一次关闭后才真正定义；也就是在最后一个之后`end`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T06:31:47.533

```
class Hello

  @instanceHello = "welcomeBack"

  def printHello
      puts self.class.instance_variable_get(:@instanceHello)
  end

  Hello.new.printHello; #=> welcomeBack
end 
```

这不是好的编程，只是为了说明一个类（它是类 Class 的一个实例）也可以有实例变量，就像任何其他实例一样。它们被称为“类实例变量”，优先于类变量。以下示例说明了如何在类级别定义计数器：

```
class Hello
  @counter = 0

  class << self # access methods for class instance variables must be
                # defined in the singleton class
      attr_accessor :counter
  end

  def printHello
      self.class.counter += 1
      puts "Hello #{self.class.counter}"
  end
end

Hello.new.printHello; #=> Hello 1
Hello.new.printHello; #=> Hello 2
p Hello.singleton_methods #=> ["counter=", "counter"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T06:25:44.663

将 @instanceHello 更改为 self.class.instance_variable_get(:@instanceHello)

@instanceHello 是一个类实例变体

代码是这样的：

```
 class Hello
            @instanceHello = "welcomeBack"
            @@classHello = "greeting!"
            def printHello
                    print(self.class.instance_variable_get(:@instanceHello))
                    print(self.class.class_variable_get(:@@classHello))
            end
    end
    Hello.new().printHello(); 
```

# ios - 在选择 tableview 项目时更新 ViewController 文本框

> ID：14033011
> 
> 赞同：0
> 
> 时间：2012-12-25T18:23:45.403
> 
> 标签：ios, cocoa-touch, uitableview

我创建了一个基于视图的应用程序，具有用于没有导航控制器的 Iphone 故事板的模式链接视图控制器。对于我的一个视图控制器，我设计了一个带有动态单元格的表格视图：

```
- (void)viewDidLoad {
[super viewDidLoad];

tabledata =[[NSArray alloc] initWithObjects:@"Data Mining",@"Software Quality",@"Project Management",@"Data Base", nil]; 
tablesubtitles =[[NSArray alloc] initWithObjects:@"Test parsing and KDD",@"Management of Software Creation Cycle",@"Roles in a Project",@"Database Lifecycle process", nil]; 

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

return [tabledata count];
}

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *cell=nil;

cell= [ tableView dequeueReusableCellWithIdentifier:@"Cell1"];

if (cell == nil) {
    cell= [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell1"];
}

cell.textLabel.text= [tabledata objectAtIndex:indexPath.row];
cell.detailTextLabel.text =[tablesubtitles objectAtIndex:indexPath.row];
return cell;
} 
```

接下来我想实现的是将 tableview 行链接到 ViewController 上，该 ViewController 上有几个可用的文本框。最大的想法是，在选择一个 TableItem 时，我想加载一个 ViewController 并根据所选项目自动填充文本框，如果有一个编辑/保存的可能性也会很好。

例如：我有一个包含项目的 Tableview

道奇克莱斯勒雪佛兰福特

按下“Dodge”后，会出现一个新的 ViewController，其中包含多个 TextBox，并且数据中会填充一些细节，例如“Since 1900”。在编辑“Since 1900”文本框并按下保存按钮时，控件返回到其中包含 TableView 的 viewcontroller。

第二次按“闪避”后，会显示以前保存的项目。

我已经尝试了很多变体，组合如何实现它，我是 Xcode 的新手，任何帮助都会非常有用。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:53:21.423

这并不难。基本上你只需要`didSelectRowAtIndexPath`在你的 UITableView 委托中实现。要了解如何执行此操作，请在 XCode 中创建一个新项目并使其成为 MasterDetail 应用程序。这为您提供了具有可选行的表视图的样板代码。主视图是您的表格，详细视图是您处理所选行的方式。

# android - Android 没有 qsort_r（或如何禁用强制 Thumb 在 Android ARM 代码中使用 CLZ）

> ID：14033017
> 
> 赞同：2
> 
> 时间：2012-12-25T18:24:45.453
> 
> 标签：android, arm, libc, thumb, qsort

我想做的（高级）：在 Android 上使用 qsort_r。

没有默认实现。所以我从 BSD 中获取了一个。不幸的是，它需要在 Android 上也不可用的 fls 功能。因此，我获取了 Apple Open Source Libc 库并将 ARM 实现复制到内联程序集中。现在我得到了这个：

```
Assembler messages:
Error: selected processor does not support Thumb mode `clz r3,r0'
Error: cannot honor width suffix -- `rsb r0,r3,#32' 
```

AFAIR ARM-6 在 Thumb 模式下不支持它。那么如何为这个文件强制非 Thumb 模式，或者纯 C 实现可用于 fls？

（天哪，我为什么要玩这么低级才能拥有 qsort_r...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T14:53:01.503

在你的 Android.mk 文件中，这里是如何设置东西来编译你的代码的 thumb、arm 和 neon 版本。汇编语言源文件在 makefile 中的“S”需要大写，但实际名称不需要大写。后缀“.arm”和“.arm.neon”只在makefile中而不是名称的一部分（例如，下面的文件被命名为main.c、main_asm.s、test.c和test_asm.s）。

```
LOCAL_ARM_MODE := arm  # remove this if you want thumb mode
LOCAL_ARM_NEON := true # remove this if you want armv5 mode

# this flag will allow neon intrinsics in your C files
LOCAL_CFLAGS := -mfpu=neon -march=armv7

LOCAL_SRC_FILES := \
          main.c.arm \
          test.c.arm.neon \
          main_asm.S.arm \
          test_asm.S.arm.neon \ 
```

# delphi - 在delphi SDI中创建新表单时传递参数

> ID：14033023
> 
> 赞同：7
> 
> 时间：2012-12-25T18:25:25.643
> 
> 标签：delphi, parameters, vcl

好的，如果这有点令人困惑，我很抱歉，但我不知道如何更好地解释它。我有一个聊天表单，在用户之前在 TLoginForm 中进行身份验证后显示。

用户登录然后显示chatForm：

```
with TChatForm.Create(Application) do
begin
    Show;
end; 
```

我的问题是，考虑到表单自动连接到服务器 OnShow 的事实，我如何将用户名传递给 chatForm，以便我可以在聊天中使用它作为昵称，所以我需要已经发送的用户名。

我是delphi新手，所以如果我的代码有任何错误，请原谅。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T18:30:00.367

如果用户名应该在对象的整个生命周期内固定，那么它应该被传递给构造函数。好处是不可能滥用类而忘记分配用户名。

声明一个接收参数中额外信息的构造函数：

```
type
  TMyForm = class(TForm)
  private
    FUserName: string;
  public
    constructor Create(AOwner: TComponent; 
        const UserName: string);
  end;

constructor TMyForm.Create(AOwner: TComponent; 
        const UserName: string);
begin
  inherited Create(AOwner);
  FUserName := UserName;
end; 
```

像这样创建表单：

```
MyForm := TMyForm.Create(Application, UserName); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T18:31:50.443

将公共方法添加到您的聊天表单。

```
with TChatForm.Create(Application) do
begin
  PassUserName(FUsername);
  Show;
end;

procedure TChatForm.PassUserName(const aUsername: string);
begin
  Caption := 'You can now chat: '+ aUsername;
end; 
```

这允许您将任何您想要的内容传递到您的聊天表单中，而无需通过简单地添加新方法来更改现有的公共方法。
不使用“with”或 FUsername 来解决问题的示例：

```
frmChat := TChatForm.Create(Application);
frmChat.Nickname := aUsername;
frmChat.Show;

TChatForm = class(TForm)
private
  FUsername : string;

  procedure SetNickName(const Value: string);
  function GetNickName: string;
public
  property NickName: string read GetNickName write SetNickName;
end;

procedure TChatForm.SetNickName(const Value: string);
begin
  FUsername := Value;
end;
function TChatForm.GetNickName: string;
begin
  Result := FUsername;
end; 
```

# assembly - GNU 汇编器中的 sys_read 系统调用与 int 0x80

> ID：14033028
> 
> 赞同：1
> 
> 时间：2012-12-25T18:25:43.743
> 
> 标签：assembly, x86, x86-64, system-calls, gnu-assembler

我正在尝试编写一个简单的程序来从标准输入中获取一些字符。为简洁起见，相关代码为：

```
mov $3, %rax    # sys_read = 3
mov $0, %rbx    # stdin fd = 0
mov $b, %rcx    # '.lcomm b, 32' declared in .bss section
mov $32,%rdx    # size_t
# syscall
int $0x80 
```

当我`int $0x80`按预期使用程序功能时，但是`syscall`会出现段错误。我读到这与使用中断需要内核记住机器的状态这一事实有关，`syscall`而不遵守该要求，即内核在自己的时间处理它。我不确定这是否是真正的原因 - 我会假设这`syscall`对寄存器做了一些`sys_read`失败的事情。

我还从之前发布的一个问题中读到“`syscall`是进入内核的默认方式”并且“`int 0x80`是调用系统调用的传统方式，应该避免”。（[链接](https://stackoverflow.com/questions/12806584/what-is-better-int-0x80-or-syscall)）

我真的找不到任何好的文档，所以任何输入都将不胜感激。

编辑：错字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-21T11:26:06.793

检查[这个](https://stackoverflow.com/questions/8510333/x86-64-assembly-linux-system-call-confusion)问题。在 x86_64 上，正确的退出系统调用`$60`应该在`%rax`.

```
 mov $60, %rax
 mov $0, %rdi 
 syscall 
```

# php - PHP：Preg_match_all 将 html 提取为字符串

> ID：14033029
> 
> 赞同：4
> 
> 时间：2012-12-25T18:25:49.780
> 
> 标签：php, preg-match

我有这样的html：

```
 <ul id="video-tags">
            <li><em>Tagged: </em></li>
                    <li><a href="/tags/sports">sports</a>, </li>
                            <li><a href="/tags/entertain">entertain</a>, </li>
                            <li><a href="/tags/funny">funny</a>, </li>
                            <li><a href="/tags/comedy">comedy</a>, </li>
                            <li><a href="/tags/automobile">automobile</a>, </li>
                    <li>more <a href="/tags/"><strong>tags</strong></a>.</li>
  </ul> 
```

如何将体育、娱乐、搞笑、喜剧、汽车提取成字符串

我的 php preg_match_all 看起来像这样：

```
preg_match_all('/<a href\="\/tags\/(.*?)\">(.*?)<\/a>, <\/li>/', $this->page, $matches);
echo var_dump($matches);    
echo implode(' ', $tags); 
```

这没用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:37:54.433

我不确定您是如何获得`$this->page`的，但是以下内容应该可以按您的预期工作：

[http://ideone.com/KhWkEg](http://ideone.com/KhWkEg)

```
<?php
$page = 'subject string ...';

preg_match_all('/<a href\="\/tags\/(.*?)\">(.*?)<\/a>, <\/li>/', $page, $matches);

echo implode(', ', $matches[1]);  
?> 
```

只要它仍然是一个字符串，就`$page`用你的变量替换它。`$this->page`

但是，我建议[不要尝试使用正则表达式解析 HTML](https://stackoverflow.com/a/1732454/1209423)。相反，请使用[PHP DOM 文档](http://php.net/manual/en/class.domdocument.php)或[SimpleHTMLdom 之](http://simplehtmldom.sourceforge.net/)类的库来正确解析 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T18:44:38.770

这个小正则表达式[也做同样的事情](http://ideone.com/2Tg7NQ)。

```
preg_match_all('|tags/[^>]*>([^<]*)|', $str, $matches); 
```

也使用 DOMDocuemnt。

```
$d = new DOMDocument();
$d->loadHTML($str);
$as = $d->getElementsByTagName('a');
$result = array();
for($i=0;$i<($as->length-1); $i++)
    $result[]=$as->item($i)->textContent;

echo implode(' ', $result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T18:30:53.390

这对我来说非常有效：

```
preg_match_all('/<a href\="\/tags\/(.*?)\">.*?<\/a>, <\/li>/', $str, $matches);
echo implode(',', $matches[1]); 
```

印刷品：体育、娱乐、搞笑、喜剧、汽车

$this->page 可能是空的，这就是你没有得到任何数据的原因。

为什么在正则表达式中两次放置方括号？您在链接的 url 和文本中都有相同的词。

# java - 使用 WampServer 和 Java 将土耳其语字符写入 MySQL

> ID：14033031
> 
> 赞同：2
> 
> 时间：2012-12-25T18:26:22.197
> 
> 标签：java, mysql, character-encoding, wampserver, turkish

我的 Wamp 服务器有问题。当我执行包含土耳其语字符的查询时，我收到此错误：

```
SEVERE: Incorrect string value: '\xE7l? ya...' for column 'body' at row 1
java.sql.SQLException: Incorrect string value: '\xE7l? ya...' for column 'body' at row 1 
```

这是我的Java代码：

```
Class.forName("com.mysql.jdbc.Driver");
con = DriverManager.getConnection(url, user, password);
PreparedStatement p = con.prepareStatement("SET NAMES utf8");
p.executeUpdate();
PreparedStatement ps = 
        con.prepareStatement("INSERT INTO duyurular values (?, ?, ?, ?)");
ps.setInt(1, 0);
ps.setString(2, title);
ps.setString(3, body);
ps.setInt(4, writer);
ps.executeUpdate(); 
```

我试图写入的数据库和表都设置为“utf8_turkish_ci”排序规则。我的 Wamp 服务器版本是 2.2。

![桌子](../Images/ef3bb4046fd57e8803b83a436c436155.png)

![表结构](../Images/5c0eac2a3e5971c231cc7540f2b48a0d.png)

我可以使用 PHPMyAdmin sql 控制台编写土耳其语字符，但无法使用我的 Java 代码。我应该怎么做才能克服这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:15:04.013

这里没有任何东西可以告诉驱动程序以 UTF-8 编码字符串。您只是让数据库期望 UTF-8，然后驱动程序将您的字符串编码为其他编码，并且数据库会引发错误。

你没有显示你`url`是什么，但它应该是这样的：

```
jdbc:mysql:///dbname?useUnicode=true&characterEncoding=utf-8 
```

然后你可以删除这个：

```
PreparedStatement p = con.prepareStatement("SET NAMES utf8");
p.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T05:53:16.513

为了他人的利益，请检查以下答案

将这些行添加到 my.cnf 或 my.ini：

```
 [client]
 default-character-set=utf8

[mysql]
default-character-set=utf8

[mysqld]
default-character-set=utf8
character-set-server=utf8 
```

有关更多详细信息，请查看[此](https://stackoverflow.com/questions/5405236/jdbc-mysql-utf-8-string-writing-problem)

# java - 全屏 JFrame 之上的模态 JFrame

> ID：14033033
> 
> 赞同：0
> 
> 时间：2012-12-25T18:26:45.073
> 
> 标签：java, swing, jframe, jpanel, fullscreen

```
package javaapplication1;

import java.awt.Color;
import java.awt.DisplayMode;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class JavaApplication1 {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        final NewJPanel p = new NewJPanel();
        frame.setTitle("Frame");
        frame.setSize(300, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final GraphicsDevice device = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
        device.setFullScreenWindow(frame);
        device.setDisplayMode(new DisplayMode(800, 600, 32, 60));

        JButton btn = new JButton();
        btn.setText("Button");
        JPanel panel = new JPanel();

        panel.add(btn);
        frame.add(panel);

        btn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JFrame f = new JFrame();
                JPanel p = new JPanel();
                f.setSize(300, 300);
                p.setBackground(Color.red);

                f.add(p);
                f.setLocationRelativeTo(null);
                f.setAlwaysOnTop(true);
                f.setVisible(true);
            }
        });
    }
} 
```

我希望`f.setVisible(true);`在我单击按钮时设置为模态的全屏 JFrame 中弹出。我怎样才能做到这一点？因为在该代码中，当我单击按钮时，会在`f.setVisible(true);`全屏 JFrame 之外显示。期待您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:56:05.327

所以你想要`JInternalFrame`在你的 main 里面有类似的东西`JFrame`：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.DisplayMode;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class JavaApplication1 {

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                final JFrame frame = new JFrame();
                final JDesktopPane desktopPane = new JDesktopPane();
                frame.setTitle("Frame");
                frame.setSize(300, 300);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                final GraphicsDevice device = GraphicsEnvironment
                    .getLocalGraphicsEnvironment().getDefaultScreenDevice();
                device.setFullScreenWindow(frame);
                device.setDisplayMode(new DisplayMode(800, 600, 32, 60));

                JButton btn = new JButton();
                btn.setText("Button");
                JPanel panel = new JPanel();

                panel.add(btn);
                frame.add(panel, BorderLayout.NORTH);
                frame.add(desktopPane, BorderLayout.CENTER);

                btn.addActionListener(new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        JInternalFrame f = new JInternalFrame();
                        JPanel p = new JPanel();
                        p.setBackground(Color.red);
                        f.setSize(300, 300);
                        f.setResizable(true);
                        f.add(p);
                        f.setVisible(true);
                        desktopPane.add(f);
                    }
                });
            }
        });

    }
} 
```

![在此处输入图像描述](../Images/902e93518994b8977e9a3fa1a1bacaec.png)

更多关于`JInternalFrame`你可以在[这里找到](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

# sql - 只需使用计算字段进行查询

> ID：14033043
> 
> 赞同：0
> 
> 时间：2012-12-25T18:28:30.787
> 
> 标签：sql, sqlite

我的 sqlite3 数据库中有 2 个表。有人可以帮助我使用下面的 sql 命令：

翻译：

```
transid |  transdate | discountpercentage | Bank
12345     10/09/2011     5                  20.00 
```

tbltrans2：

```
transid   |   itemnr   |price | btwpercentage | qty
12345         205        10.11        12        5
12345         302        15.00        6         7
12345         501        20.00        21        3 
```

所以我想获得一个查询表，其中包含每个 transid 和计算出的现金列的总销售额，例如：

```
Select
Sum(tbltrans2.qty * tbltrans2.price) as TotalAmount,
(Totalamount - tbltrans.Bank) as Cash
where 
tbltrans.transid = tbltrans2.transid and transdate = '10/09/12' 
```

有人可以纠正这个sql语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:33:40.037

```
Select
Sum(ifnull((tbltrans2.qty * tbltrans2.price),0))-tbltrans.Bank as cash
from tbltrans,tbltrans2
where 
tbltrans.transid = tbltrans2.transid and tbltrans.transdate = '10/09/12'
group by tbltrans.transid 
```

试试这个

如果您还想选择总金额，则将其包含在选择中，

```
Sum(ifnull((tbltrans2.qty * tbltrans2.price),0)) as TotalAmount 
```

# resources - RDF 中的前缀命名空间

> ID：14033045
> 
> 赞同：2
> 
> 时间：2012-12-25T18:28:50.910
> 
> 标签：resources, rdf, jena, prefix

我有这个 RDF 语句（乌​​龟格式）：

```
@prefix cd:      <http://mai.com/contactwrapper/0.1#> .

<http://mai.com/contactwrapper/0.1#malzaa@m.com>
      cd:Belongs_To "1"^^xmls:string ;
      cd:Email_Address "malzaa@m.com"^^xmls:string ;
      cd:Email_Type "WORK"^^xmls:string . 
```

如您所见，前缀适用于属性（Belongs_To、Email_Address 和 Email_Type），但不适用于资源名称 (malzaa@m.com)。因为“http://mai.com/contactwrapper/0.1#”应该换成cd。

谁能解释一下这有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T22:08:37.270

缩写形式通常称为*QName*（代表“限定名称”）。`cd:malazaam@m.com`作为 QName 不起作用的原因是 .后面部分中的`@`和char 。Turtle 语法不允许在 QName 中使用这些字符，这就是使用完整 URI 的原因。`.``:`

有关QName 中允许的字符的概述，请参阅[Turtle 语法。](http://www.w3.org/TeamSubmission/turtle/#nameChar)

顺便说一句：您的 Turtle 片段也没有声明`xmls:`名称空间（您将其用于文字数据类型），因此它将无法解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T21:58:01.270

正如 Jeen 所说，“@”不允许在 Turtle 的前缀名称中使用，尽管前缀名称比 QNames 更广泛。

在 RDF 1.1 中，Turtle 语言被正式标准化。“@”在前缀名称的本地部分是不合法的，但“\@”是合法的。

最新的语法是：[http ://www.w3.org/TR/turtle/#sec-grammar-grammar](http://www.w3.org/TR/turtle/#sec-grammar-grammar)

有很多parer接受传统的Turtle。Jena 的编写者是保守的——他们输出合法的 RDF 以最大化被另一个解析器读取的机会。以完整的 <..> 形式编写或使用前缀名称不会更改正在编写的 URI，只会更改其表面外观。

# yii - Yii urlManager 参数

> ID：14033048
> 
> 赞同：0
> 
> 时间：2012-12-25T18:29:01.823
> 
> 标签：yii

我正在尝试使用以下网址：（应用了 htaccess）

/user/{用户名}

重定向到类似的东西：

/user/view/{用户名}

我不知道规则应该是什么...

我当前的 urlManager 配置是：

```
 'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'caseSensitive'=>false,       
        'rules'=>array(
        )
    ), 
```

我还想要一些覆盖，例如（转到常规操作）

/用户设置

/用户/编辑

等...我将如何添加这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:36:49.973

我自己想出来的！

```
'user/settings' => 'user/settings',
'user/<action>/*' => 'user/view/user/<action>', 
```

# jquery - 如何访问我所有承诺的返回值？

> ID：14033049
> 
> 赞同：2
> 
> 时间：2012-12-25T18:29:03.827
> 
> 标签：jquery, ajax

[本文](http://www.tentonaxe.com/index.cfm/2011/9/22/Using-jQuerywhen-with-a-dynamic-number-of-objects)展示了如何`wait`为动态数量的 ajax 请求完成。他执行以下操作：

```
var deferredArr = $.map($(".dynaload"), function(el, i) { 
    return $.ajax({ 
        url: $(el).data("loadUrl"), 
        success: function(html) { 
            $(el).html(html); 
        } 
    }); 
}); 
$.when.apply(this, deferredArr).then(function() { 
    alert("All Done Loading!"); 
}); 
```

问题是解决延迟的函数需要与延迟一样多的参数。所以，如果我这样做：

```
$.when.apply(this, deferredArr).then(function(data) { 
    alert("All Done Loading!"); 
}); 
```

然后`data`只是第一个承诺的结果。如何在不求助于将结果附加到数组中的情况下获得所有结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:33:23.910

具有未知数量参数的函数可以使用特殊`arguments`数组：

```
$.when.apply(this, deferredArr).then(function() { 
    for (var i = 0; i < arguments.length; i++) {
        console.log("Promise "+i+" returned: "+arguments[i]);
    }
    alert("All Done Loading!"); 
}); 
```

有关文档和更多参数使用示例，请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)。

# ajax - 使用 Lift 显示图像上传预览

> ID：14033050
> 
> 赞同：1
> 
> 时间：2012-12-25T18:29:08.957
> 
> 标签：ajax, scala, lift

我想用 Lift 上传一张图片，并立即在页面的某些元素中显示它，而无需重新加载。我想在[这个](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)解决方案（使用 PHP）中这样做。

那里的过程比较简单。我用一个虚拟的 HTML 片段替换了 PHP 文件：

```
<form id="imageform" method="post" enctype="multipart/form-data" action="ajaximage.html">
    <input id="imageFile" name="imageFile" type="file" size="50" maxlength="100000"/>
</form><br/>

<script src="jquery-1.8.3.min.js"></script>
<script src="jquery.form.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#imageFile').live('change', function() {
            $("#preview").html('');
            $("#preview").html('<img src="images/processing.jpg" alt="Uploading...."/>');
            $("#imageform").ajaxForm({
                target : '#preview'
            }).submit();
        });
    });
</script> 
```

HTML 片段：

```
<img src="images/someimage.jpg"/> 
```

嗯，这行得通。但我显然需要动态行为。示例页面使用 PHP 文件代替我的 HTML 片段，该文件从请求中提取数据，将其保存在服务器中，并相应地输出预览图像的 HTML -`echo "<img src='uploads/".$actual_image_name."' class='preview'>";`

现在，我不知道如何使用 Lift 来实现这一点。

我发现了这个讨论：[https](https://groups.google.com/forum/?fromgroups=#!topic/liftweb/6bxNlbBPJvE) ://groups.google.com/forum/?fromgroups=#!topic/liftweb/6bxNlbBPJvE但是除了对我不想使用的框架和 HTML5 东西的模糊建议之外，没有好的解决方案.

* * *

**第 2 部分**。我已经在 Lift 中实现了一些基础知识：

HTML：

```
<div class="lift:AddImage.addEntry" form="POST" multipart="true">
        <p><prefix:imageUpload/></p>
        <p><prefix:test/></p>
</div> 
```

片段：

```
package code 
package snippet

import net.liftweb.http.S
import net.liftweb.common.Full
import net.liftweb.common.Empty
import net.liftweb.common.Box
import net.liftweb.http.FileParamHolder
import net.liftweb.util._
import Helpers._
import scala.xml.Group
import scala.xml.NodeSeq
import net.liftweb.http.SHtml
import javax.annotation.Resource
import java.io.OutputStream
import java.io.FileOutputStream

class AddImage {

  // Add a variable to hold the FileParamHolder on submission
  var fileHolder : Box[FileParamHolder] = Empty

  def submitTest () {
    println("submitTest called!")

    val receiptOk = fileHolder match {
      // An empty upload gets reported with a null mime type,
      // so we need to handle this special case
      case Full(FileParamHolder(_, null, _, _)) => true

      case Full(FileParamHolder(_, mime, _, data)) =>

        println("MIME: " + mime)

        if (mime.startsWith("image/")) {

            println("uploading the image: ")

            //scala.io.Source.fromBytes(data)
            try {
                val out: OutputStream = new FileOutputStream("test.jpg");
                out.write(data);
                out.flush();
                out.close();

            } catch {
              case e: Exception => println("Exception!: " + e)
            }

          true
        }

      case Full(_) => {
        S.error("Invalid attachment")
        false
      }

      case _ => true
    }

//    (e.validate, receiptOk) match {
//    }
}

  def addEntry(content: NodeSeq): NodeSeq = {

      bind("prefix", content,
              "imageUpload" -> SHtml.fileUpload(f => fileHolder = Box !! f),
              "test" -> SHtml.submit("submitz", submitTest))
  }
} 
```

但我被困在这里是因为：

*   我不知道如何从 jquery 引用 Lift 创建的表单。

*   javascript 在上传输入字段更改时提交表单，并在元素`ajaxForm()`中插入 PHP 脚本的结果。`#preview`我不知道如何在 scala 中提交表单并进一步输出图像 HTML，以便可以将其插入`#preview`

希望这不是太多问题:) 提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:11:12.857

这不是一个完整的答案，而是一堆可以帮助您解决问题的指针。

为了将 JS 附加到您的表单，我认为您应该能够向表单添加一个 id 属性并以这种方式附加到它。如果由于某种原因这对您不起作用，一个简单的解决方法是用 div 包装表单，例如：

```
<div id="wrapper"><form> ... </form></div> 
```

然后您可以使用 jquery 来获取它，例如：`$('#wrapper form')`. 这里有一篇关于 ajax 文件上传和 Lift 的 wiki 文章：[https](https://www.assembla.com/spaces/liftweb/wiki/AJAX_File_Upload) ://www.assembla.com/spaces/liftweb/wiki/AJAX_File_Upload 。它还使用 jQuery 方法来重定向表单提交，因此您可能会从中获得一些见解。

关于实际显示图像数据，有一些功能可能会派上用场。第一个是[`JsCmds.SetHtml`](http://scala-tools.org/mvnsites/liftweb-2.4-M1/net/liftweb/http/js/JsCmds%24%24SetHtml.html)，另一个是[`S.fmapFunc`](http://scala-tools.org/mvnsites/liftweb/lift-webkit/scaladocs/net/liftweb/http/S%24object.html)。

这`JsCmds.SetHtml(id:String, replacement:NodeSeq)`将允许您将与特定 id 匹配的 html 元素的内容替换为提供的`NodeSeq`.

这`S.fmapFunc`将允许您创建一个可以返回图像的函数。在下面的示例中，您将创建一个函数，该函数将图像读取到字节数组中，然后将其输出到浏览器，并为其赋予唯一的 id。第二部分返回一个引用唯一 id 的对象并对其进行处理（在本例中为 XML 元素）。因此，下面的示例将返回一个调用您的图像的图像标记。

```
 S.fmapFunc(() => {
       val mimeType:String = //set mimeType
       val data:Array[Byte] = //get byte array of image
       throw ResponseShortcutException.shortcutResponse(
           InMemoryResponse(data, 
              ("Content-Type" -> mimeType) :: Nil, Nil, 200))
   }) { 
       name => <img src={"?" + name + "=_"} />
   } 
```

这是使用[`InMemoryResponse`](http://exploring.liftweb.net/master/index-9.html#toc-Subsection-9.4.1)，这可能并不理想，具体取决于您的图像有多大。你也可以使用[`StreamingResponse`](http://exploring.liftweb.net/master/index-9.html#toc-Subsection-9.4.2)。

将两者结合使用，您应该生成包含指向可以在页面上显示的图像的链接的 Html。可能有很多方法可以完成这项工作，因此毫无疑问，您将能够获得所需的工作。Ajax 文件上传可能有点棘手，所以让所有东西一起工作可能需要一些工作，但希望这可以为您指明正确的方向。

此外，作为旁注，电梯问题最活跃的地方是他们的邮件列表：liftweb@googlegroups.com。有很多人在监控它，包括项目的提交者，他们反应非常迅速。

# php - 如何使用 PHP 解析 Soundcloud json 响应

> ID：14033055
> 
> 赞同：1
> 
> 时间：2012-12-25T18:29:40.303
> 
> 标签：php, arrays, json, api, soundcloud

它只是通过轨道值。我需要的是获取用户名。这是我使用的，谢谢

```
    {
        “项目”：[
        {
        “种类”：“轨道”，
        “身份证”：33369455，
        "uri":"https://api.soundcloud.com/tracks/33369455",
        “用户”：{
        “身份证”：758840，
        "用户名":"JoeDreamer",
        "avatar_url":"https://i1.sndcdn.com/avatars-000006878204-maqsrd-large.jpg?923db0b"},
        "download_count":0,
        “comment_count”：1
        },
        {
        “种类”：“轨道”，
        “身份证”：33369455，
        "uri":"https://api.soundcloud.com/tracks/33369455",
        “用户”：{
        “身份证”：758840，
        "用户名":"JoeDreamer",
        "avatar_url":"https://i1.sndcdn.com/avatars-000006878204-maqsrd-large.jpg?923db0b"},
        "download_count":0,
        “comment_count”：1
        }]
    }

```

```
    $user = json_decode(file_get_contents("http://mydata.com/data.json"));
    foreach($user->items as $mydata)
    {
         回声 $mydata->id 。"\n";
         foreach($mydata->user as $value)
         {
              回声 $value->用户名 。"\n";
         }
    }    

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:34:35.000

也许

```
$user = json_decode(file_get_contents("http://mydata.com/data.json"));
foreach($user->items as $mydata)
{
     echo $mydata->id . "\n";
     echo $mydata->user->username;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:51:33.337

通过向函数添加一个附加标志[`json_decode()`](http://php.net/manual/en/function.json-decode.php)，我们可以告诉函数返回关联数组而不是对象。

> json_decode ( 字符串 $json [, bool $assoc = false ])

如果您选择这样使用`json_decode`，您的任务会变得非常简单。您可以像访问多维数组一样访问用户名。

```
$user = json_decode($str,true);  // notice the "true" argument here
foreach($user['items'] as $mydata)
{
    echo $mydata['id'] . "," . $mydata['user']['username'] . "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:36:26.620

你可能错过的是它`$myData-user`本身就是一个对象。PHP 的[json_decode()](http://php.net/manual/en/function.json-decode.php)函数递归地传递您使用的 JSON 字符串的每个元素。

```
{
  "kind":"track",
  ...
  "user":{
    "id":758840,
    "username":"JoeDreamer",
    ...
  }
} 
```

您必须将用户名作为其父元素的属性来访问。通过将附加`key`变量添加到内部`foreach`循环，我们可以检查键名并仅选择`username`属性。

```
...
foreach($mydata->user as $key=>$value){
  if ($key == 'username'){
    echo $value . "\n";
  }
} 
```

然而，额外的循环是多余的。除非您有某些特定的需要遍历每个属性，否则您可以像这样直接访问用户名 -

```
$mydata->user->username 
```

# spring - @Autowired 成员变量的 Spring CrudRepository 为 null

> ID：14033059
> 
> 赞同：2
> 
> 时间：2012-12-25T18:30:05.170
> 
> 标签：spring, spring-data, spring-data-jpa

我是 Spring JPA 的新手。我正在尝试使用休眠+ Spring JPA。为此，我在存储库下面创建

```
package com.raptorservice.da.dal;

import com.raptorservice.da.objects.ClientDO;
import org.springframework.data.repository.CrudRepository;

public interface ClientRepository extends CrudRepository<ClientDO, String> {    
} 
```

下面是我浏览我的包的 spring-ws-servlet.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sws="http://www.springframework.org/schema/web-services"
    xmlns:oxm="http://www.springframework.org/schema/oxm" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans.xsd 
                        http://www.springframework.org/schema/web-services 
                        http://www.springframework.org/schema/web-services/web-services.xsd 
                        http://www.springframework.org/schema/oxm 
                        http://www.springframework.org/schema/oxm/spring-oxm.xsd
                        http://www.springframework.org/schema/jdbc
                        http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
                        http://www.springframework.org/schema/data/jpa
                        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
                        ">

    <!--  ****************************** BASIC CONFIGURATION ******************************************** -->
    <!-- Enable annotations for end points -->
    <sws:annotation-driven />

    <bean id="getpointsbean" class="com.raptorservice.endpoints.GetPointsEndpoint">
    </bean>

    <sws:dynamic-wsdl id="points" portTypeName="Points" locationUri="/points/" targetNamespace="http://sailin.com/schemas">
        <sws:xsd location="/WEB-INF/xsd/points.xsd" />
    </sws:dynamic-wsdl>

    <!--  Configure JAXB to marshal and un-marshal requests -->
    <oxm:jaxb2-marshaller id="jaxbMarshaller"  contextPath="com.raptorservice.generated" />

    <!-- ******************************* PERSISTANCE CONFIGURATION ****************************************** -->
    <!--  JPA Repositories -->
<jpa:repositories  base-package="com.raptorservice.da.dal" /> 

    <!--  Hibernate Transaction Manager -->
    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/testservice" />
        <property name="username" value="root" />
        <property name="password" value="admin" />
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceXmlLocation" value="./WEB-INF/persistence.xml"></property>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="MYSQL" />
                <property name="showSql" value="true" />
            </bean>
        </property>
     </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
<!--        <property name="configLocation"> -->
<!--            <value>classpath:hibernate.cfg.xml</value> -->
<!--        </property> -->
<!--        <property name="configurationClass"> -->
<!--            <value>org.hibernate.cfg.AnnotationConfiguration</value> -->
<!--        </property> -->
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

 </beans> 
```

我在 WEB-INF 下也有一个有效的 persistence.xml 文件。

我正在尝试在我的网络服务（@Endpoint）中使用 ClientRepository，如下所示

```
package com.raptorservice.endpoints;

@Endpoint
public class GetPointsEndpoint {    

    @Autowired
    private ClientRepository clientRepository;

@PayloadRoot(localPart="getPointsForClientAndCustomerRequest", namespace="http://sailin.com/schemas")
    @ResponsePayload()
    public GetPointsForClientAndCustomerResponse getPointsForClientAndCustomerRequest(@RequestPayload GetPointsForClientAndCustomerRequest getpointsRequest) throws Exception
    {
        GetPointsForClientAndCustomerResponse resp = new GetPointsForClientAndCustomerResponse();
        ResultCode resCode = new ResultCode();

        try
        {
        ClientDO client = new ClientDO();
        client.setName("Test1");
        client.setClientId("test111");
        clientRepository.save(client);
        }
        catch(Exception ex)
        {
          System.out.println(ex);
        }

        resCode.setDescription("pass");
        resCode.setCode(BigInteger.valueOf(5));
        resp.setResultCode(resCode);
        return resp;
    } 
```

但 clientRepository 始终为空。我错过了什么？为什么 clientRepository 没有自动连接？

我检查了日志，没有什么明显的。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:26:42.450

我认为这`<context:annotation-config/>`是缺失的，需要此注释才能在应用程序上下文中注册[AutowiredAnnotationBeanPostProcessor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html)实例。

`<context:component-scan ...>`如果您在其 xml 配置中使用了注解，则[AutowiredAnnotationBeanPostProcessor](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html)也会隐式注册在应用程序上下文 中。

请参阅[<context:annotation-config> 与 <context:component-scan> 之间的区别](https://stackoverflow.com/questions/7414794/difference-between-contextannotation-config-vs-contextcomponent-scan)

通常，如果字段值为 null 并且没有发生异常，则意味着该对象不是 Spring bean（在其他地方实例化），或者它没有由 IoC 容器进行后处理（可能后处理器已在[另一个上下文](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)中注册）。

由于 bean 被急切地初始化为单例，并且`@Autowired`annotation默认情况下将**required**属性设置为 true，如果 bean 被处理，Spring 很可能会在容器初始化期间抛出异常。

# asp.net - 我可以在 .NET 4.0 上的 Web 窗体应用程序中使用 ASP.NET Web API 吗？

> ID：14033060
> 
> 赞同：1
> 
> 时间：2012-12-25T18:30:14.413
> 
> 标签：asp.net, .net, json, c#-4.0, asp.net-web-api

我有一个 ASP.NET Web 表单（不是 MVC）4.0 应用程序。如果可能，我想利用 Web API。具体来说，我正在寻找深度 JSON 集成，而不一定是面向资源的（即 REST）。

在我可以将我的应用程序完全迁移到 ASP.NET MVC 和 4.5 之前，我是否最好使用其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:14:47.067

你可以在这里读更多关于它的内容。

[http://www.asp.net/web-api/overview/hosting-aspnet-web-api/using-web-api-with-aspnet-web-forms](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/using-web-api-with-aspnet-web-forms)

# c++ - LZ函数的使用不清楚

> ID：14033063
> 
> 赞同：7
> 
> 时间：2012-12-25T18:30:52.813
> 
> 标签：c++, winapi, compression, lzw

**注意：**这个问题是关于 Windows LZ 函数的，它们是以前缀 LZ 开头的[文件管理函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364232%28v=vs.85%29.aspx)：LZOpenFile、LZCopy、LZClose 等。如果 Google 没有错，这些可能是 Windows API 中文档记录最差的函数之一.

我试图弄清楚哪种文件实际上适合与 Windows LZ 函数一起使用。官方文档提到“使用 Compress.exe 压缩的数据”，但这些函数也能够处理未压缩的文件，在这种情况下不应用解压缩。

现在，当我使用资源工具包中的 compress.exe 实用程序压缩文件（使用 -Z 或 -ZX 开关），然后使用[此处描述](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363901%28v=vs.85%29.aspx)的过程对其进行解压缩时，我得到的只是源文件未更改，就好像它没有按预期压缩。即使使用原始 Windows XP 安装 CD 中的压缩文件（在 i386 文件夹末尾带有下划线的文件），我也得到相同的结果。结论：无论我尝试解压缩什么文件，我都会将其恢复原状。

我使用的代码非常简单，它基本上重现了 MSDN 文章中描述的步骤，所以如果我有错误，我想它一定是在其他地方。但我仍然倾向于认为我只是使用了错误的输入文件。有没有人对这些 LZ 功能有任何经验？这是我的 C++ 代码。

```
#include <iostream>
#include <Windows.h>

using namespace std;

int main(int argc, char ** argv) {
    OFSTRUCT ofs1, ofs2;
    INT hfSrc = -1, hfDest = -1;

    if (argc <= 2) {
        cerr << "Usage: LZTEST Source Destination";
        return 1;
    }
    __try {
        hfSrc = LZOpenFile(argv[1], &ofs1, OF_READ);
        if (hfSrc < 0) {
            cerr << "Error invoking LZOpenFile on source file: " << hfSrc;
            return 1;
        }
        hfDest = LZOpenFile(argv[2], &ofs2, OF_CREATE);
        if (hfDest < 0) {
            cerr << "Error invoking LZOpenFile on destination file: " << hfDest;
            return 1;
        }
        INT result = LZCopy(hfSrc, hfDest);
        if (result < 0) {
            cerr << "Error invoking LZCopy: " << result;
            return 1;
        }
    } __finally {
        if (hfSrc >= 0) LZClose(hfSrc);
        if (hfDest >= 0) LZClose(hfDest);
    }
    cout << "Success";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T23:14:27.337

尝试`compress.exe` [这里](ftp://ftp.microsoft.com/softlib/mslfiles/CP0982.EXE)没有选项。

除非您需要解压缩一些旧文件，否则请改用[DotNetZip](http://dotnetzip.codeplex.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:28:52.353

> 我试图弄清楚哪种文件实际上适合与 Windows LZ 函数一起使用。

您通常使用的文件类型是您在软盘上分发的安装文件。过去，微软的大部分产品都是从软盘安装的，而且大部分文件都被压缩以节省必须为每个客户分发的磁盘数量。

您通常可以分辨出软盘上压缩了哪些文件，因为扩展名的最后一个字母通常是下划线：

```
KEYBOARD.DR_
KEYVIEW.EX_
LANGDUT.DL_
LANGENG.DL_
LANGFRN.DL_
LANGGER.DL_
LANGSCA.DL_
LANGSPA.DL_
LMOUSE.CO_
LMOUSE.DR_
LVMD.38_
LZEXPAND.DL_
MMSOUND.DR_
MOUSE.DR_
MSC3BC2.DR_
MSCMOUSE.DR_ 
```

您可以使用 EXPAND.EXE 或您引用的函数解压缩它们。

# c# - TabControl 中所有 TabItems 的相同内容

> ID：14033064
> 
> 赞同：2
> 
> 时间：2012-12-25T18:31:01.323
> 
> 标签：c#, .net, wpf, vb.net, xaml

我想为 a 中的所有`TabItem`s显示相同的内容`TabControl`：

```
<TabControl>
    <TabItem Header="Tab 1">
        <StackPanel>
            <ComboBox />
            <Button Content="Button" x:Name="bButton" />
        </StackPanel>
    </TabItem>
    <TabItem Header="Tab 2" />
    <TabItem Header="Tab 3" />
</TabControl> 
```

有没有一种简单的方法可以做到这一点而无需重复代码并且仅在 XAML 中（不使用代码隐藏）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T03:33:42.487

你可以这样做。在 xaml 中定义公共资源。

```
<Window.Resources>
    <StackPanel x:Key="CommonTabContent">
        <ComboBox />
        <Button Content="Button" x:Name="bButton" Click="bButton_Click_1" />
    </StackPanel>

</Window.Resources> 
```

并像使用它一样

```
<TabControl>
    <TabItem Header="Tab 1" Content="{StaticResource CommonTabContent}"/>
    <TabItem Header="Tab 2" Content="{StaticResource CommonTabContent}" />
    <TabItem Header="Tab 3" Content="{StaticResource CommonTabContent}" />
</TabControl> 
```

您的 .cs 文件代码将包含该方法。

```
private void bButton_Click_1(object sender, RoutedEventArgs e)
{
    // your code
} 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T18:45:39.600

你可以：

1.  将内容提取到 a`UserControl`中并在每个中使用`TabItem`
2.  创建一个`ControlTemplate`并将其应用于`Control`每个实例`TabItem`
3.  定义 a`DataTemplate`并使用`ItemsSource`of`TabControl`将模板应用到每个孩子

第一种方法可能是最明智的，尤其是当您需要分别访问每个标签页的内容时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T18:02:04.887

我移动了`<StackPanel>`外部`<TabControl>`并设置了边距以将其放置在 TabControl 的顶部：

```
<TabControl HorizontalAlignment="Left">
    <TabItem Header="Tab 1" />
    <TabItem Header="Tab 2" />
    <TabItem Header="Tab 3" />
</TabControl>
<StackPanel HorizontalAlignment="Left" Margin="5,50,0,0">
    <ComboBox />
    <Button Content="Button" x:Name="bButton" />
</StackPanel> 
```

这是最干净和最简单的方法。

# ruby-on-rails-3 - 具有“保存草稿”功能的开源文本编辑器？

> ID：14033070
> 
> 赞同：0
> 
> 时间：2012-12-25T18:31:43.997
> 
> 标签：ruby-on-rails-3, wysiwyg, rich-text-editor, jwysiwyg

我们当前的 Rails 应用程序使用 jwysiwyg 作为我们的文本编辑器，但它的功能不是很丰富。我们想要：

*   用户能够保存他们的工作并在必要时稍后返回。类似于 Wordpress 使用的“保存草稿”功能会很棒。
*   从他们的硬盘上传图像，而不必复制和粘贴图像 URL。

有哪些选项可以为我们提供这两个功能？是否可以扩展现有的 jwysiwyg？还是我们必须选择另一种选择？我们目前通过 Javascript 集成使用所见即所得，但我们也对 Rails Ruby gem 替代品持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:37:54.800

我对草稿的回答是它们确实是版本……所以版本控制系统确实是您想要的。

如今，这通常是分布式的，例如 git。

我将进入使用 git 的工作流程，并将其作为您的草稿流程。

所以使用支持 DVCS 的 IDE，例如 Eclipse 可以包含 git 支持。

# java - 按合同设计和断言声明

> ID：14033071
> 
> 赞同：5
> 
> 时间：2012-12-25T18:31:44.970
> 
> 标签：java, assert, design-by-contract, post-conditions

我对这种`Design by Contract`方法很感兴趣。似乎`preconditions`必须使用已检查的异常来强制执行它们。
但是对于`post-conditions`和`class-invariants`我认为这`assertions`是首选。
我对吗？如果我是正确的，为什么允许 for`post-conditions`和`class-invariants`可能被禁用的断言？不应该强制执行后置条件和不变量吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T18:37:20.177

组件上的后置条件和类不变量只有在组件*本身*编写不正确时才会失败。单元测试应该捕获所有这些。当然，在生产中实际检查它们是允许的，但这并不一定值得在性能上进行权衡。

另一方面，如果该组件的*用户*不正确，前置条件可能会失败。对组件本身的测试无法检查这些，因此有必要更积极地失败，以便*那些*单元测试失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-09T21:17:41.223

根据定义，违反先决条件是编程错误。因此，最不幸的是用检查异常来表示这种违规行为。因为正确的代码将被迫显式地捕获一个肯定永远不会抛出的异常，并将其作为未经检查的异常重新抛出，以便可以检测到编程错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T13:30:49.740

***你不应该区别对待它们——它们都应该是断言。***

OP 说：

> ...似乎必须使用先决条件检查异常来强制执行它们。...为什么允许可能被禁用的后置条件和类不变量断言？不应该强制执行后置条件和不变量吗？

您似乎建议前置条件、后置条件和类不变量应该始终打开并始终由服务（方法/被调用者）检查。如果我们谈论的是源自 Bertrand Meyer[的按合同设计(DBC)，那么情况并非如此。](http://en.wikipedia.org/wiki/Design_by_contract)Meyers 认为，从生产代码的角度来看，这些条件应该只在一个地方由客户端（调用者）或服务（被调用者）确保——这是客户端和服务之间的合同。相比之下，防御性编程说您应该在两个地方都对检查进行编码（Meyers 认为这很浪费并增加了不必要的复杂性）。

DBC 的合同部分是规范将明确谁负责什么：如果客户端将确保前置条件（并且服务可以假设它们为真），那么服务将确保后置条件（以及调用者可以假设它们是真的）。迈耶斯当然明白，服务为了测试和调试目的检查前置条件/​​后置条件/不变量是明智的（以确保系统在测试/调试期间[快速失败](https://stackoverflow.com/a/2807375/11296)），这就是为什么断言这些条件是明智的并在测试/调试期间启用断言，但目的是可以禁用或删除这些检查以进行生产。

例如，如果您设计了一个堆栈，使得调用者有责任在调用 pop()（前提条件）之前检查堆栈是否为空，那么您也不应该将 pop() 方法**作为生产代码的一部分进行编码**检查堆栈是否为空，也不应该将已检查的异常作为处理条件的方法签名的一部分。在那里有前置条件断言来帮助验证和调试是可以的，但目的是一旦开发和测试完成（代码可能没有错误），生产代码将只在调用者确保前置条件的情况下运行，而不是被调用者（如果这是您为 API 设计合同的方式）。

如果您有一个已检查的异常作为 pop() 方法的一部分，并且您在 pop() 方法中检查堆栈是否为空，**作为始终在线的一部分，必须处理，生产代码**，那么您说的是服务（被调用者）负责检查，如果堆栈为空，它承诺抛出异常——它现在是后置条件的一部分。在这种情况下，调用者不需要明确地检查它——他们应该只处理异常。否则，如果调用者和被调用者都先检查堆栈是否为空，则不是合同设计。

最后一点，有些人认为这意味着 Meyer 说调用者应该始终负责检查堆栈是否为空或参数是否为空等。不是这样 - Meyers 只是说你必须清楚规范前置条件和后置条件，以便正确编码客户端和服务。作为 API 设计者和实施者，您决定前置条件和后置条件中的内容。如果您可以合理地确定客户端（调用者）将确保前提条件（例如，因为它是一个内部类，并且您可以控制调用服务/方法的任何地方），那么将“堆栈非空”或“ parameter-a-is-not-null”部分的前提条件，并将责任放在客户端。但是，如果您认为这不是一个合理的假设（例如

[[对于类似咆哮的回答，我很抱歉——我是 Bertrand Meyer 和 Design-by-Contract 的忠实粉丝。]]

# c# - 来自数据库的超链接出现在错误的内容持有者中

> ID：14033073
> 
> 赞同：-1
> 
> 时间：2012-12-25T18:32:08.260
> 
> 标签：c#, asp.net, hyperlink

这是一个非常奇怪的错误，对于我的生活，我无法弄清楚为什么。我有一个网站，分为 3 个内容持有者：上方的水平菜单、右侧的垂直菜单和主要内容持有者。

右侧菜单是使用 asp.net 中继器从 sql 数据库生成的，如下所示：

```
 <div id="scroller" style="width:290px; height:250px; overflow:hidden;">

       <asp:Repeater ID="MatRep" runat="server">

           <HeaderTemplate> <ul style="list-style-type:none;"> </HeaderTemplate>

           <ItemTemplate> <li style="margin-top:10px;"> <h3 style="text-align:center;"> <a href="/MaterialsGate.aspx?try=<%#Eval("Cataloged Number")%>"> <%#Eval("Material Name")%>  </h3> </li></ItemTemplate>

           <FooterTemplate> </ul> </FooterTemplate>

       </asp:Repeater>     

        </div> 
```

右侧菜单的功能是，当点击链接时，它会发送一个 ID 到下一页，然后我可以在主要内容上看到点击了什么。

**问题是菜单的最后一个链接出于某种原因超出了右栏并进入了主要内容。** 这意味着，如果我单击屏幕中心，则不会靠近右侧菜单的最后一个超链接 - 它会像我单击同一个超链接一样起作用。

知道为什么会发生这种情况吗？

如果需要更多代码片段，我很乐意提供它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:36:49.573

尝试关闭锚标记，并在href属性上更改" by '

```
 <li style="margin-top:10px;"> 
     <h3 style="text-align:center;"> 
         <a href='/MaterialsGate.aspx?try=<%#Eval("Cataloged Number")%>' > <!-- HERE -->
           <%#Eval("Material Name")%>   
         </a>  <!-- HERE -->
      </h3> 
  </li> 
```

# c++ - 卡住，需要帮助从向量列表返回时间跨度

> ID：14033074
> 
> 赞同：3
> 
> 时间：2012-12-25T18:32:07.697
> 
> 标签：c++

我有一个消息列表，每次添加消息时，我都会设置一个时间戳。我正在尝试创建一个函数，该函数将返回在一定时间内添加的消息，该消息也与字符串匹配。但是，我现在卡住了，非常感谢任何帮助，下面是我的代码：

```
struct BarMessage
{
    int Length;
    const char *message;
    time_t TimeAdded;
};

struct Ba
{
    vector<BarMessage> Messages;

    void AddMessage(const char *message, int Length)
    {
        BarMessage m;

        m.message = message;
        m.Length = Length;

        time(&m.TimeAdded); // set time ?

        Messages.push_back(m);
    }

    BarMessage & GetMessageWithin(string pattern, int span = 200)
    {
        //Time.Now?
        time_t now;
        time(&now);

        if (this->Messages.size() > 0)
        {
            for (auto & messages : this->Messages)
            {
                //Stuck here!!!

                //I want to return the BarMessage of a message
                //that was added within 200 (span)
                //that also contains the string patten inside it
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:40:37.143

首先在 BarMessage 中使用字符串

```
struct BarMessage
{
    int Length;
    string message;
    time_t TimeAdded;
}; 
```

有关查找匹配字符串的更多信息[http://www.cplusplus.com/reference/string/string/find/](http://www.cplusplus.com/reference/string/string/find/)。`char*`您使用而不是有什么充分的理由`string`吗？您确定要从此函数返回引用吗？为什么将模式作为值而不是参考传递`const`？

```
BarMessage & GetMessageWithin(const string& pattern, int span = 200)
{
    //Time.Now?
    time_t now;
    time(&now);

    if (this->Messages.size() > 0)
    {
        for (auto & messages : this->Messages)
        {
            if (now - messages.TimeAdded <= 200 && 
                messages.message.find(pattern) != std::string::npos) {
                //then return this message
            }
        }
    }
} 
```

# c# - 绘制发生变化的 WriteableBitmap

> ID：14033082
> 
> 赞同：0
> 
> 时间：2012-12-25T18:33:23.223
> 
> 标签：c#, wpf, writeablebitmap

我有一个控制器类，它返回一些图像为`WriteableBitmap`. 我在我的`WPF`应用程序中使用该库应该立即刷新`Image`。问题是，当我改变它时没有任何反应`Source`：/

```
private void Csm_OnPropertyChanged(object sender, PropertyChangedEventArgs propertyChangedEventArgs)
{
   WriteableBitmap bitmap = ((Csm) sender).Bitmap;
   Preview.Source = bitmap;
} 
```

如何更改里面的代码来刷新图像？有时事件会在一秒钟内发生大约 10-20 次，所以它的工作原理几乎就像视频预览一样。

# php - PHP 5.4 基本登录脚本

> ID：14033089
> 
> 赞同：-2
> 
> 时间：2012-12-25T18:34:07.040
> 
> 标签：php, mysql, login

尝试通过一些数据库交互来学习 PHP，我正在尝试做一个“简单”（大多数事情都可以是相对的......）登录脚本，当我第一次尝试它时，我得到了一些关于 session_register 的错误，我现在明白这些错误已被弃用我试图将其更改为 $_SESSION['something'] = 'something';

我的数据库设置了一个用户，我可以很好地连接并选择正确的数据库，但是当我输入用户名和密码时，我会返回登录表单，当它失败时应该这样做。

当我使用已弃用的版本时，我确实有一些东西可以捕捉到错误的用户名或密码。我只有三个文件，main_login.php、checklogin.php 和 login_success.php，并将它们发布在下面。

main_login.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'>
<head>
    <meta http-equiv='content-type' content='application/xhtml+xml; charset=UTF-8' />

    <title>Login</title>
    <!-- JAVASCRIPTS -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="script/jquery.js"></script>
    <!-- CSS FILES -->
    <link rel='stylesheet' type='text/css' href='css/default.css' />
</head>
<body>
    <div id='wrapper'>
        <div id='loginform'>
            <form action="checklogin.php" method='post' id='login'>
                Username: <br />
                <input type='text' name='username' /><br />
                Password: <br />
                <input type='text' name='password' /><br />
                <input type='submit' value='Login' />
            </form>
        </div>
    </div>
</body> 
```

检查登录.php

```
<?PHP
//Server/database settings
ob_start();
$host       = "localhost";
$username   = "root";
$password   = "";
$db_name    = "user";
$tbl_name   = "userdata";

//Connect to the server and select the database
mysql_connect("$host", "$username", "$password") or die ("cannot connect");
mysql_select_db("$db_name") or die ("cannot select DB");

//Get the username and password from the login form
//Prevent SQL injections
$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string(md5($_POST['password']));
$username = stripslashes($username);
$password = stripslashes($password);
//$username = mysql_real_escape_string($username);
//$password = mysql_real_escape_string($password);
$sql = "SELECT * FROM $tbl_name WHERE username = '$username'
and password = '$password'";
$result = mysql_query($sql);

//Count the table row. 0 = No user exists
$count = mysql_num_rows($result);

//If $result is 1 the user exists
if($count == 1) {
    $_SESSION['username'] = '$username';
    $_SESSION['password'] = '$password';
    header('location:login_success.php');
}

/*  //If the result match the $username && $password, table row will be 1
if($count == 1) {
    session_register('username');
    session_register('password');
    header('location:login_success.php');
}*/

//If it does not match, give a return message
else {
    echo 'Wrong Username or Password';
}
ob_end_flush();
?> 
```

和最后一个 login_success.php

```
<?PHP
session_start();
if (!isset($_SESSION['username'])) {
    header('location:main_login.php');
}
?>
<html>
    <body>
        Login Successful
    </body>
</html> 
```

这只是让我回到登录页面：/

此外，如果有人注意到任何可能容易受到 SQL 注入攻击的代码，请随时指出并建议我应该做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:38:22.047

`session_start()`好吧，我在 checklogin.php 中没有看到调用

而且您的代码确实容易受到注入，因为出于某种原因，您正在剥离您之前应用的一行的转义。为什么打这个`stripslashes()`电话？

另外，请记住，`mysql_real_escape_string()`它本身并不能阻止注射。
只有正确格式化的数据才能保证您不会被注入，并且格式化规则有近十种，没有一个。
尽管只要您只将带引号的字符串添加到查询中，并将其中的每一个字符串都传递给`mysql_real_escape_string()`，您的查询是完全安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:37:09.767

```
$_SESSION['username'] = $username;
$_SESSION['password'] = $password; 
```

正如[你的常识](https://stackoverflow.com/users/285587/your-common-sense)所说，请`session_start()`在开头添加`checklogin.php`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:38:56.037

### 删除引号：

```
$_SESSION['username'] = '$username';
$_SESSION['password'] = '$password'; 
```

### 用。。。来代替：

```
$_SESSION['username'] = $username;
$_SESSION['password'] = $password; 
```

* * *

### 代替

```
ob_start(); 
```

### 和：

```
session_start();
ob_start(); 
```

* * *

### 你为什么要删除这个？

```
//$username = mysql_real_escape_string($username);
//$password = mysql_real_escape_string($password); 
```

这是非常需要的，否则您的代码容易受到 SQL 注入的攻击。

# java - Java中的双重调度自动化

> ID：14033090
> 
> 赞同：4
> 
> 时间：2012-12-25T18:34:21.867
> 
> 标签：java, double-dispatch

我有两个接口`Query`和`Filter`（`Query`在示例中是一个用于简化的类，我现在有 1 个查询），我现在想要`Query.applyFilter()`根据过滤器的真实情况编写函数，即不同的函数和`NameFilter`每个**其他**过滤器。`DateFilter`

 **我的解决方案如下：

```
interface Filter {
    public abstract void modifyQuery(Query query);
};

class NameFilter implements Filter{
    public void modifyQuery(Query query){
        query.applyFilter(this);
    }
};

class DateFilter implements Filter{
    public void modifyQuery(Query query){
        query.applyFilter(this);
    }
};

class Query {
    public void applyFilter(Filter filter){
        filter.modifyQuery(this);
    }

    void applyFilter(NameFilter* filter) {
        //"applying NameFilter";
    }

    void applyFilter(DateFilter* filter) {
       //apply dateFilter
   }
} 
```

好的，这里我需要`modifyQuery()`为每个 Filter 类重写实现。

然后，我有如何在 C++ 中避免它的解决方案：我们使用模板并强制转换`modifyQuery()`：

```
#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <vector>

using namespace std;

class Query;

class IFilter
{
public:
  virtual void modifyQuery(Query* query) = 0;
};

template <typename T>
class Filter : public IFilter
{
public:
  virtual void modifyQuery(Query* query);
};

class DateFilter;
class NameFilter;

class Query
{
public:

  void applyFilter(IFilter* filter)
  {
    cout << "applying Filter" << endl;
    filter->modifyQuery(this);
  }

  void applyFilter(NameFilter* filter)
  {
    cout << "applying NameFilter" << endl;
  }

  void applyFilter(DateFilter* filter)
  {
    cout << "applying DateFilter" << endl;
  }
};

template <typename T>
void Filter<T>::modifyQuery(Query* query)
{
  query->applyFilter(dynamic_cast<T*> (this));
}

class DateFilter : public Filter<DateFilter>
{
};

class NameFilter : public Filter<NameFilter>
{
};

int main()
{
  Query* query = new Query();
  IFilter* nameFilter = new NameFilter();
  IFilter* dateFilter = new DateFilter();

  std::vector<IFilter*> filterList;
  filterList.push_back(nameFilter);
  filterList.push_back(dateFilter);

  for (int i = 0; i < 2; ++i)
  {
    query->applyFilter(filterList[i]);
  }
  return 0;
} 
```

[演示](http://ideone.com/SLWUQT)

但是我不能在 Java 中使用这个解决方案，因为泛型与模板的操作不同。在 Java 中可以使用什么来避免复制粘贴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:58:31.780

在寻找正确的方法时，Java 不会考虑方法参数的运行时类型。Java 只是简单地解释变量类型而不是值。

**解决方案：**

Java 6 注解可用于注解方法并实现多方法和值分派。所有这些都可以在运行时完成，不需要任何特殊的编译或预处理，并且使用仍然可以合理地方便用户使用。

我们需要引入两个“简单”的注解来进行注解：

`Methods`: 这个方法实现了什么多方法？

`Parameters`: 我们应该派送什么价值？

然后，我们可以处理注释并构建实现特定多方法的方法列表。此列表需要排序，以便最具体的方法排在第一位。“最具体”是指对于每个方法参数（从左到右），参数类型/值更加专业（例如，它是子类或与指定值匹配）。调用多方法意味着调用最具体的适用方法。“适用”意味着方法原型与实际运行时参数匹配，“最具体”意味着我们可以简单地搜索排序列表并找到第一个适用的。

注释处理可以封装在一个类中，然后可以在用户定义的方法中使用，该方法将简单地使用实际运行时参数调用多方法调度代码。

**执行**

**Multi**接口实现了一个运行时方法注解，用于标记多方法：

```
package jmultimethod;

import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Retention;
import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Multi {

    public String value();
} 
```

接口**V**实现了一个运行时参数注解，用于指定调度值：

```
package jmultimethod;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.RUNTIME)
public @interface V {

    public String value();
} 
```

多方法代码如下：

```
package jmultimethod;

import java.lang.annotation.Annotation;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Comparator;

public class Multimethod {

    protected String name;
    protected final ArrayList<Method> methods = new ArrayList<Method>();
    protected final MethodComparator methodComparator = new MethodComparator();

    public Multimethod(String name, Class... classes) {
        this.name = name;
        for(Class c: classes) {
            add(c);
        }
    }

    public void add(Class c) {
        for(Method m: c.getMethods()) {
            for(Annotation ma: m.getAnnotations()) {
                if(ma instanceof Multi) {
                    Multi g = (Multi) ma;
                    if(this.name.equals(g.value())) {
                        methods.add(m);
                    }
                }
            }
        }
        sort();
    }

    protected void sort() {
        Method[] a = new Method[methods.size()];
        methods.toArray(a);
        Arrays.sort(a, methodComparator);
        methods.clear();
        for(Method m: a) {
            methods.add(m);
        }
    }

    protected class MethodComparator implements Comparator<Method> {
        @Override
        public int compare(Method l, Method r) {
            // most specific methods first 
            Class[] lc = l.getParameterTypes();
            Class[] rc = r.getParameterTypes();
            for(int i = 0; i < lc.length; i++) {
                String lv = value(l, i);
                String rv = value(r, i);
                if(lv == null) {
                    if(rv != null) {
                        return 1;
                    }
                }
                if(lc[i].isAssignableFrom(rc[i])) {
                    return 1;
                }
            }
            return -1;
        }
    }

    protected String value(Method method, int arg) {
        Annotation[] a = method.getParameterAnnotations()[arg];
        for(Annotation p: a) {
            if(p instanceof V) {
                V v = (V) p;
                return v.value();
            }
        }
        return null;
    }

    protected boolean isApplicable(Method method, Object... args) {
        Class[] c = method.getParameterTypes();
        for(int i = 0; i < c.length; i++) {
            // must be instanceof and equal to annotated value if present 
            if(c[i].isInstance(args[i])) {
                String v = value(method, i);
                if(v != null && !v.equals(args[i])) {
                    return false;
                }
            } else {
                if(args[i] != null || !Object.class.equals(c[i])) {
                    return false;
                }
            }
        }
        return true;
    }

    public Object invoke(Object self, Object... args) {
        Method m = null; // first applicable method (most specific)
        for(Method method: methods) {
            if(isApplicable(method, args)) {
                m = method;
                break;
            }
        }
        if(m == null) {
            throw new RuntimeException("No applicable method '" + name + "'.");
        }
        try {
            return m.invoke(self, args);
        } catch (Exception e) {
            throw new RuntimeException("Method invocation failed '" + name + "'.");
        }
    }
} 
```

要使用多方法，用户代码必须：

1.  使用多方法名称注释方法，例如

    ```
    @Multi("myMultimethod") 
    ```

2.  注释方法的名称可以是 Java 喜欢的任何名称。它很可能与多方法名称不同，因为某些方法可能具有足够相似的原型，从而导致 Java 编译器的名称冲突（并且可能是因为编译器可能会遇到空值问题）。此外，该方法应该对 Multimethod 类是可见的（例如，公共的）。

3.  通过创建 Multimethod 对象来处理注释，例如

    ```
     protected Multimethod mm = new Multimethod("myMultimethod", getClass()); 
    ```

4.  根据需要使用通用参数定义多方法“入口点”方法。该方法使用上面创建的 Multimethod 对象进行调度，例如

    ```
     public void myMultimethod(Object X, Object Y) {
       mm.invoke(this, X, Y);
    } 
    ```

5.  然后，可以像任何普通的 Java 方法一样调用多方法，例如

> 我的多方法（1，空）；

**限制：**

值分派仅适用于 Java 注释支持的值，例如 String 类型的值。

以下代码基于 [Multiple Dispatch 示例](http://en.wikipedia.org/wiki/Multiple_dispatch)

```
package jmultimethod;

public class AsteroidTest {

    class Asteroid {}

    class Spaceship {}

    @Multi("collide")
    public void collideOO(Object X, Object Y) {
       log("?? Bang, what happened? ", X, Y);
    }

    @Multi("collide")
    public void collideAA(Asteroid X, Asteroid Y) {
        log("AA Look at the beautiful fireworks! ", X, Y);
    }

    @Multi("collide")
    public void collideAS(Asteroid X, Spaceship Y) {
        log("AS Is it fatal? ", X, Y);
    }

    @Multi("collide")
    public void collideSA(Spaceship X, Asteroid Y) {
        log("SA Is it fatal? ", X, Y);
    }

    @Multi("collide")
    public void collideSS(Spaceship X, Spaceship Y) {
        log("SS Who's fault was it? ", X, Y);
    }

    @Multi("collide")
    public void collide1S(String X, Spaceship Y) {
        log("1S any string? ", X, Y);
    }

    @Multi("collide")
    public void collide2S(@V("hi") String X, Spaceship Y) {
        log("2S 'hi' value? ", X, Y);
    }

    protected Multimethod mm = new Multimethod("collide", getClass());

    public void collide(Object X, Object Y) {
        mm.invoke(this, X, Y);
    }

    public void run() {
        Object A = new Asteroid();
        Object S = new Spaceship();
        collide(A, A);
        collide(A, S);
        collide(S, A);
        collide(S, S);
        collide(A, 1);
        collide(2, A);
        collide(S, 3);
        collide(4, S);
        collide(5, null);
        collide(null, null);
        collide("hi", S);
        collide("hello", S);
    }

    public void log(Object... args) {
        for(Object o: args) {
            if(o instanceof String) {
                System.out.print(" " + (String) o);
            } else {
                System.out.print(" " + o);
            }
        }
        System.out.println();
    }

    public static void main(String[] args) throws Exception {
        AsteroidTest t = new AsteroidTest();
        t.run();
    }
} 
```

程序输出（部分编辑以适应屏幕）是：

```
AA Look at the beautiful fireworks!  Asteroid@1f24bbbf Asteroid@1f24bbbf
AS Is it fatal?  Asteroid@1f24bbbf Spaceship@24a20892
SA Is it fatal?  Spaceship@24a20892 Asteroid@1f24bbbf
SS Who's fault was it?  Spaceship@24a20892 Spaceship@24a20892
?? Bang, what happened?  Asteroid@1f24bbbf 1
?? Bang, what happened?  2 Asteroid@1f24bbbf
?? Bang, what happened?  Spaceship@24a20892 3
?? Bang, what happened?  4 Spaceship@24a20892
?? Bang, what happened?  5 null
?? Bang, what happened?  null null
2S 'hi' value?  hi Spaceship@24a20892
1S any string?  hello Spaceship@24a20892 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T20:11:38.403

提议：

```
interface Filter {
    public abstract void modifyQuery(Query query);
};

class NameFilter implements Filter{
    public void modifyQuery(Query query){
        // Modify query based on "Name"...
    }
};

class DateFilter implements Filter{
    public void modifyQuery(Query query){
        // Modify query based on "Date"...
    }
};

class Query {
    public void applyFilter(Filter filter){
        filter.modifyQuery(this);
    }

    // No need for other applyFilter() methods - all filters are instances of Filter.
} 
```**

# python - python中**ASTERISK变量**的语义

> ID：14033095
> 
> 赞同：2
> 
> 时间：2012-12-25T18:34:58.493
> 
> 标签：python

> **可能重复：**
> [*args 和 **kwargs？](https://stackoverflow.com/questions/3394835/args-and-kwargs)

我知道结构 *var

```
def fn(*var):
  pass 
```

如果类似于`.`var of`scheme`或 va_args of `c`。

现在我遇到了惊人的结构

```
def fn(**list):
  pass 
```

这对于将变量和值的名称作为字典传递给 fn 很有用（在方案中没有类似的）。

python中是否有一些带有3个星号的结构？

```
def fn (***variable) 
```

python中`asterisk`+的一般含义是什么？`variable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T18:37:10.220

在 Python 中，`*`并`**`有特定的含义，就像你描述的那样。没有`***`也没有适用于星号数量的一般规则。

# php - PDO 不通过 SELECT 查询从 SQL 检索数据

> ID：14033097
> 
> 赞同：0
> 
> 时间：2012-12-25T18:35:04.777
> 
> 标签：php, sql, pdo

不确定是什么问题，因为脚本在以前的页面上工作，获取已将 user_id 分配给当前活动用户的“文件夹”。

我在这一项中尝试做的与以前相同，但不是根据分配给它们的 user_id 从 SQL 中获取文件夹信息，而是尝试获取分配给它们的文件夹 id 的文件。

**这是示例查询：** ?o=folder&fid=0ec741fa-e708-4314-83c4-c05966a56110#!/New_Folder

**?o=folder**将 folder.php 传递给 index.php，它为所有内部文件提供服务

**&fid=0ec741fa-e708-4314-83c4-c05966a56110**是文件夹 ID，而不是实际 ID，因为文件夹表 ID 和 FID 中有两个字段，这是唯一生成的 FID，用户创建一个新文件夹，并自动分配 ID作为表中的 AUTO_INCR + 主键。

这是 PDO 脚本

```
require ("sql/pdo.php");

    // Lets get user's folder information
    $query = " SELECT * FROM files WHERE fid = ".$_REQUEST['fid']." "; 

    try 
    { 
        // These two statements run the query against your database table. 
        $stmt = $db->prepare($query); 
        $stmt->execute(); 
    } 
    catch(PDOException $ex) 
    { 
        // Note: On a production website, you should not output $ex->getMessage(). 
        // It may provide an attacker with helpful information about your code.  
        die("Failed to run query: " . $ex->getMessage()); 
    } 

    // Finally, we can retrieve all of the found rows into an array using fetchAll 
    $rows = $stmt->fetchAll(); 

?>
<table width="100%"> 
    <?php foreach($rows as $row): ?> 
        <tr onclick="window.location = 'file.php?fid=<?php echo htmlentities($row['id'], ENT_QUOTES, 'UTF-8')."'"> 
            <td style="width:4%;"><img src="ast/images/fs-directory.png" /></td>
            <td style="width:86%;text-align:left;"><?php echo htmlentities($row['name'], ENT_QUOTES, 'UTF-8'); ?></td>
            <td style="width:10%;text-align:center;"><?php echo htmlentities($row['privacy'], ENT_QUOTES, 'UTF-8'); ?></td> 
        </tr> 
    <?php endforeach; ?> 
</table> 
```

没有错误或返回任何内容，erro_log 文件中也没有任何内容，正如我所说，这很奇怪，因为它适用于文件夹但不适用于文件表。我假设这可能与他们处理数据的方式有关。为了从文件夹中获取数据，它请求分配给 uid (user_id) 的任何文件夹，这在术语上是一个数值，在这里我们使用一个非数值，而是一个随机文件夹字符串，这可能是问题的根源，但是它真的不应该。

关于代码可能有什么问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:47:46.973

正如我所看到的，`fid`当您将其添加到查询而不是字符串时，它包含字母数字值。

另外，我希望您知道您的代码允许的 sql 注入。

因此，最好将直接放置更改为使用准备好的语句。在这个标签下有很多例子。

# javascript - getJSON，迭代，显示图像

> ID：14033101
> 
> 赞同：-1
> 
> 时间：2012-12-25T18:35:29.617
> 
> 标签：javascript, jquery, json

我有包含图像的 JSON。看起来像：

```
["1.jpg","2.jpg","3.jpg","4.jpg","Thumbs.db","..","." .............] 
```

我可以像这样一个一个地访问它们：

```
data[0]
data[1]
data[2] 
```

但是，我想在特定的 div 中动态显示所有这些图像（在一列中）。像这样的东西：

```
$(document).ready(function() {

    updateProfil();

    function updateProfil() {
        $.getJSON("./index_logg1.php", null, processCategory); 
    }   

    function processCategory(data) {
        $.each(data, function() {
            // the code ????
        });

        $("#my_user").html('<img src='+ ???? +' />');
        $("#my_user").hide().fadeIn(700);
    }

}); 
```

编辑 ：

你好，

谢谢您的回复。我现在能够动态地可视化图像（使用以下代码），但问题是我希望能够在单击图像时（动态地）捕获 href 值。（然后通过 jquery post 将其发送到 php）

它显示鼠标悬停时的值，但在单击时捕获它们没有运气。到目前为止似乎没有任何工作......

编码：

```
enter code here
    function updateProfil() {
  $.getJSON("./index_logg2.php", null, processCustom); 
   }

function processCustom(data) {
   $.each(data, function(k, v) {
   $(".panel").append('<center><a href="?cust='+  k +'"><img src="images/custom/'+ v +' "title="Click to set it" "></a></center><br />');

   /*
   $(".panel").click(function() {
 var data= ???
   $.post("./index_logg2.php", { data: ??? }, updateProfil ); 
   });
   */

   });
   } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:50:31.433

你可以`this`在里面使用`$.each`，

```
function processCategory(data) {

    $.each(data, function(){
       $("#my_user").append("<img src='"+this+"' />");
    });

    $("#my_user").hide().fadeIn(700);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:52:32.790

```
$(document).ready(function() {

    updateProfil();

    function updateProfil() {

    html="";
    $.getJSON('./index_logg1.php', function(data) {

        $.each(data, function(i) {
            html+='<img src='+ data[i] +' />'
        });

        $("#my_user").html(html);
        $("#my_user").hide().fadeIn(700);
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:57:26.390

我不确定这是性能最佳的解决方案，但一个接一个地添加可确保立即添加图像。

```
 function processCategory(data) {
      $.each(data, function(i, val) {
        $('#my_user').append($('<img>', { src: val, alt: 'pic' }));
      });

      $("#my_user").hide().fadeIn(700);
    } 
```

# php - jquery ajax json Array to php variable

> ID：14033105
> 
> 赞同：0
> 
> 时间：2012-12-25T18:36:21.927
> 
> 标签：php, jquery, json

Friends I dont know is it possible or not, But want to do like mentioned as below, if possible give me the best solution..

index.php

```
<?php
mysql_connect('localhost', 'root', '') or die (mysql_error());
mysql_select_db('mydb') or die (mysql_error());
?>
<html>
  <head>
    <script type="text/javascript" src="jquery-1.8.2.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
        $('input[type="button"]').click(function(){
          $.ajax({
            url : 'ajax.php',
            success : function(data){
              alert(data);
            }
          });
        });
      });
    </script>
  </head>
  <body>
    <input type="button" name="button" value="Submit">
    <?php print_r($_REQUEST['data'])?>
  </body>
</html> 
```

ajax.php

```
<?php
mysql_connect('localhost', 'root', '') or die (mysql_error());
mysql_select_db('mydb') or die (mysql_error());

$query = mysql_query('select * from user');
$count = count($query);
while($row = mysql_fetch_array($query)) {
  $data['name'][] = $row['name'];
}
print json_encode($data);
?> 
```

When I click on submit ajax will call and will get response from in json encoded string as below

```
{"name":["Nakul Kabra","Bridget Louise","Jayesh Joshi","Jignesh Chaudhary","Jitendra Vihol","Spec Develop","Harshad Sadclown","Andy Estep","Rohan"]} 
```

Now i want to store this ajax response in PHP variable and display it. How to solve this problem, can anybody help me please..??

Thanks, In advance !! Your regards.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:03:26.250

It sounds like to are trying to persist data across page requests. Remember each page request, be it a page refresh or an ajax request, creates a new php runtime. Variables are not stored across these, but there are of course multiple techniques used to allow this behaviour to occur. The most common way to persist data across page requests is to use PHP sessions and cookies.

This is a useful [article](http://blog.themeforest.net/tutorials/working-with-sessions-and-cookies-in-php-and-mysql/) which explains in a nice amount of detail how to implement sessions and cookies.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:06:25.573

The short answer is no, it's not possible. You already had the data in a PHP array before you sent it to the client side. Once the json array arrives, it's not possible to store it in as a PHP array. That would of course require sending it back to the server.

In your AJAX success function, you can parse the json and insert it into a form (or any other HTML element). Here's an example:

```
var obj = jQuery.parseJSON(data);
$.each(obj.name, function(index, value) {
    $('<input>').attr({
        type: 'input',
        name: 'name[]',
        value: value
    }).appendTo('#name_box');
}); 
```

Here's a sample form:

```
<form action="edit_names.php" method="post">
    <div id="name_box"></div>
    <input type="submit" value="Submit" />
</form> 
```

# jquery - 使用 jQuery 滚动到多选的最后一个元素

> ID：14033107
> 
> 赞同：0
> 
> 时间：2012-12-25T18:36:34.377
> 
> 标签：jquery, select, scroll, multi-select

我在 jQuery 中有一个函数，可以在选择框中添加文本字段中的内容。当我单击一个按钮时调用该函数：

```
 addToList = function(textField, selectList)
    {
           var val = $('#'+textField).val();
           var select = $('#'+selectList);

           //If element does not exist already...
           if (select.find('option[value="' + val + '"]').length === 0 && val!="") 
           {
               //Add new element to the list
               $('<option>', {
                 value: val,
                 text: val
                 }).appendTo(select);

               //Clear text field
               $('#'+textField).val("");

               //Scroll down multi select and select automatically the added option
               //TODO: Scrolls only to selected element
                var lastOption = select.find("option[value="+val+"]");
                lastOption.attr("selected", true);             
           }
           else
           {
               if (val!="")
                {
                    alert("\""+val+"\" is already in the list.");
                }   
           }
    }; 
```

我想要的是，每次我向列表中添加一个元素时，列表都会向下滚动到其底部（这意味着列表的最后一个元素将在其最后一行可见）并且添加的元素将被自动选择。

我在 SO 上找到了一些代码来向下滚动到选定的元素，但是我发现没有代码可以简单地滚动到列表的末尾，而不管选择了什么。我需要这个，因为如果我选择第一个元素，这段代码就不会滚动！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:56:38.520

尝试这个：

```
var addToList = function(textField, selectList) {
    var $textField = $('#' + textField),
        $select = $('#' + selectList),
        val = $textField.val(),
        valueFilter = '[value="%s"]';
    if(val) {
        if($select.find('option').filter(valueFilter.replace('%s',val)).length === 0) {
            $('<option/>').appendTo($select).attr('value', val).text(val);
            $textField.val('');
            $select.val(val);//<<<<<<<<<<<<
        }
        else {
            alert('"' + val + '" is already in the list.');
        }
    }
}; 
```

# android - Android MAVEN 从非 Maven 项目创建 ApkLib

> ID：14033117
> 
> 赞同：0
> 
> 时间：2012-12-25T18:38:13.650
> 
> 标签：android, maven

我正在寻找将第三方 android 库项目安装到我的本地存储库。我将文件压缩并重命名为 mylib.apklib。我那时

```
mvn install:install-file -Dfile=myfile.apklib 
```

这给了我以下错误

```
 The artifact information is incomplete or not valid:
  [0]  'groupId' is missing.
  [1]  'artifactId' is missing.
  [2]  'packaging' is missing.
  [3]  'version' is missing. 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:16:16.417

这对我有用

```
 mvn install:install-file \
      -DgroupId=org.abc \
      -DartifactId=mywidget \
      -Dpackaging=apklib \
      -Dversion=1.0.0 \
      -Dfile=mylib.apklib \
      -DgeneratePom=true 
```

# android - 如何在 Eclipse 中添加源代码 Google Api？

> ID：14033123
> 
> 赞同：0
> 
> 时间：2012-12-25T18:39:19.780
> 
> 标签：android, google-maps

告诉我如何在 Eclipse 中添加 Source Code Google Api？

在 Android SDK Manager 中，一切都已安装。在 android.jar 中添加了 JavaDoc 和源代码，但只显示了 Android 类。

例如，我想查看类 MapView 的内容？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:54:06.130

您必须选择项目版本 Google APIs 2.2 而不是 Android 2.2。

![在此处输入图像描述](../Images/cfc9b85c0588de8d11f75756a4df6cbd.png)

并将其添加到 AndroidManifext.xml 中：

`<uses-library android:name="com.google.android.maps" />`

还有权限：

```
<uses-permission android:name="android.permission.INTERNET" /> <!-- for internet -->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> <!-- for GPS-->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> <!-- for GPS--> 
```

至于源代码，你可以在[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/com/google/android/maps/MapView.java)找到。但是将 Google API 的源代码添加到您的项目中有点问题。您可以改用[Android 开发者网站](http://developer.android.com/index.html)。

# php - 数据未插入错误

> ID：14033127
> 
> 赞同：0
> 
> 时间：2012-12-25T18:39:47.350
> 
> 标签：php, ajax, jquery

我是php的初学者。我试图做一个使用 ajax 和 php 的项目。我有一个 id 为“forms2”的 div，其中包含一个带有“create”类的表单，当我按下同一个 div 中的“下一步”按钮后，将显示表单数据，但每次它都会给我一个错误，告诉我我没有输入数据。

这是我的代码：

```
 <div class="form" id="forms2">
   <form class="create" action = "" method = "post"><p> Options numbers:</p>
     <input type="text" name = "choice"/><br/>
     <input type="submit" id="next1" name="next" value="Next" onmousedown="javascript:swapContent('forms2');"/>
   </form>
 </div>

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

 <script type="text/javascript">
   <!--
   function swapContent(cv) {
     var url = "ajax.php";
     $.post(url, {contentVar: cv} ,function(data) {
       $("#forms2").html(data).show();
     });
   }
   //-->
 </script> 
```

这是 ajax.php：

```
$contentVar = $_POST['contentVar'];
if ($contentVar == "forms2") {
 if(isset($_POST['choice'])){
    echo '$number = $_POST['choice']';

 }else{
    echo 'Set a number';
 }
} 
```

有人能帮我吗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:45:47.510

您在单引号字符串中使用单引号时出现语法错误：

```
echo '$number = $_POST['choice']'; 
```

改成：

```
echo htmlspecialchars($_POST['choice']); 
```

你也没有`choice`post var，你只有`contentVar`. 要获得选择 var，您可以执行以下操作：

```
 $.post(url, {contentVar: cv, choice : $('#' + cv + ' input[name=choice]').val()} ,function(data) { 
```

# sql-server - 我是否应该更好地将 varchar(6) 或 char(6) 用于 SQL Server 列，其值可以是 6 或 5 个符号长？

> ID：14033128
> 
> 赞同：0
> 
> 时间：2012-12-25T18:40:10.377
> 
> 标签：sql-server, tsql, database-design, sqldatatypes

我使用 ISO 3166-2 代码在我的数据库中指定州（许多国家，不仅仅是美国）。`Code`是我的表的主键，它被我的表的外键列`States`引用。`StateCode``Cities`

据我所知，标准中有 5 个（like `US-CA`）和 6 个（like `RU-SPE`）符号长代码。

我应该更好地使用`varchar(6)`或`char(6)`键入 SQL Server 中的列吗？

要使用的数据库服务器将是 SQL Server 2012 和 Azure。

访问数据的应用程序基于 ASP.Net 4.5 MVC 4 和 Entity Framework 5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:39:33.607

`CHAR(6)`每个条目总是**6 个字节**- 无论您输入什么。

`VARCHAR(6)`将是**7 个字节**，5 个字符（5+2 开销），**8 个字节**，6 个字符。

任何低于大约 10 个字符的字符串，我通常会选择`CHAR`类型而不是 ，`VARCHAR`因为可变长度`VARCHAR`类型对于每个条目**总是**有**2 个字节的开销。**

因此，如果您在这种情况下几乎只有 5 个和 6 个字符串，我建议您使用`CHAR(6)`.

我建议`VARCHAR`您是否有更长的字符串，并且该字符串中实际存储文本的长度变化是否更大；例如，我不会将`CHAR(256)`其用于电子邮件地址 - 在这种情况下，使用`VARCHAR(256)`这些列中存储的电子邮件地址的长度会很重要，并且可变长度字符串的 2 字节开销并不重要与字符串中的 256 个字符相比，要多得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T19:06:14.860

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa258242%28v=sql.80%29.aspx)（有问题的页面适用于 SQL Server 2000，但仍应适用）：

*   当列中的数据值预计始终接近相同大小时，请使用**char 。**
*   当列中的数据值的大小预计会有很大差异时，请使用**varchar 。**

我相信该建议是基于**varchar**需要额外的空间来存储字符串的长度，并且（可能）将字符串与表的其余部分分开存储，从而导致获取速度变慢。

希望有帮助！

# linux - 如何在 Unix/Linux 操作系统上移动给定数量的随机文件

> ID：14033129
> 
> 赞同：32
> 
> 时间：2012-12-25T18:40:20.550
> 
> 标签：linux, unix, mv

我正面临这个简单的任务，但是，我也想知道最简单、最快捷的方法是什么。

我的建议是将给定数量的随机文件从一个目录移动到另一个目录。此任务是创建机器学习所需的两个数据集的一部分：一个训练集和一个测试集。我的目标是从目录中移走 10% 的文件，以便获得可以测试分类器的数据卫星，并从源目录中获取训练集。

那么，对于这个“移动 n 个随机文件”任务，最紧凑的类型是什么？

提前谢谢 - 像往常一样 -

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-05-17T18:32:51.183

使用`shuf`and的组合`xargs`（用 来查看他们的文档是个好主意`man`）：

```
shuf -n 10 -e * | xargs -i mv {} path-to-new-folder 
```

上面的命令随机选择当前文件夹（`*`部分）的 10 个文件，然后将它们移动到新文件夹中。

## 更新

虽然更长，但人们可能会发现这个版本更容易理解：

```
ls | shuf -n 10 | xargs -i mv {} path-to-new-folder 
```

`shuf`只是生成标准输入的随机排列，将结果限制为 10（如使用`head`，但可能更快）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T20:44:00.203

您可以使用生成 0 到 32767 之间的 int 的 bash 随机生成器来选择文件是否必须放在 set1 或 set2 中。那会做：

```
for file in ./*; do
  val=$RANDOM
  if test $val -gt 3276; then
    mv "$file" ../set1
  else
    mv "$file" ../set2
  fi
done 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-01-13T15:45:47.573

`find`用于避免文件夹问题的替代版本。它将 31415 个随机选择的文件复制到`/home/user/dir/`

```
find . -maxdepth 1 -type f | sort -R | head -31415 | xargs cp -t /home/user/dir/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T19:13:33.350

您可以使用 shuf 或 sort -R 打乱文件列表。但是你仍然需要获取一个子集，你可以用头/尾来做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-24T09:44:40.450

这个问题已经很老了，但为了记录，这适用于 OSX。

您必须使用 安装`gshuf`，`brew install coreutils`然后使用：

```
tenpercent=$((`ls | wc -l` * 10/100))

ls | gshuf -n $tenpercent | xargs -I {} mv {} destination/path/ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-11-28T23:24:14.587

你也可以用 Python 做到这一点。我觉得这更容易。

这是我用来移动随机百分比的图像的 python 脚本，该脚本还获取 CV 图像数据集通常需要的相关标签数据集。请注意，这会移动文件，因为我不希望在我的训练数据集中我的测试训练数据集。

我将以下内容用于 Yolo 训练集，因为标签和图像位于同一目录中，并且标签是 txt 文件。

```
import numpy as np
import os
import random

#set directories
directory = str('/MauiData/maui_complete_sf_train')
target_directory = str('/MauiData/maui_complete_sf_test')
data_set_percent_size = float(0.07)

#print(os.listdir(directory))

# list all files in dir that are an image
files = [f for f in os.listdir(directory) if f.endswith('.jpg')]

#print(files)

# select a percent of the files randomly 
random_files = random.sample(files, int(len(files)*data_set_percent_size))
#random_files = np.random.choice(files, int(len(files)*data_set_percent_size))

#print(random_files)

# move the randomly selected images by renaming directory 

for random_file_name in random_files:      
    #print(directory+'/'+random_file_name)
    #print(target_directory+'/'+random_file_name)
    os.rename(directory+'/'+random_file_name, target_directory+'/'+random_file_name)
    continue

# move the relevant labels for the randomly selected images

for image_labels in random_files:
    # strip extension and add .txt to find corellating label file then rename directory. 
    os.rename(directory+'/'+(os.path.splitext(image_labels)[0]+'.txt'), target_directory+'/'+(os.path.splitext(image_labels)[0]+'.txt'))

    continue 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-25T18:50:39.287

通常，我们使用 python 脚本或 Java 程序来执行此操作。其中任何一个都可以使用适当的 RNG 来做出随机决定，然后调用必要的调用来移动文件。

# c++ - 霍尔分区算法 - 严格或不严格的不等式？

> ID：14033136
> 
> 赞同：-1
> 
> 时间：2012-12-25T18:41:13.310
> 
> 标签：c++, algorithm, inequality

我很难实现 Hoare 的分区算法。基本上，我想要做的是将一个数组分成两部分，第一部分包含小于给定的数字`x`，另一部分包含更大的数字。但是，我只是想不出一个好的实现。这是我的代码：

```
void hoare(vector<int>&arr,int end, int pivot)
{
    int i = 0;
    int j = end;

    while (i < j)
    {
        while (arr[i] < pivot)
            i += 1;

        while (arr[j] > pivot)
            j -= 1;            

        swap(arr[i],arr[j]);
    }

    // return arr;
    for (int i=0; i<end; i++)
    printf("%d ", arr[i]);
} 
```

现在我发现很多网站都有 while 而`(arr[i] <= pivot)`不是我放在那里的。但是，当我这样做时，对于这样的数组：

```
1 3 5 7 9 2 4 6 8 
```

我得到：

```
1 3 5 4 9 2 7 6 8 
```

但话又说回来，在我的版本中，对于这样一个集合：

```
12 78 4 55 4 3 12 1 0 
```

程序冻结，因为由于外部循环中的条件都没有得到满足，所以它只是一遍又一遍地遍历它，而不增加`j`or `i`。

枢轴是指向数组中特定数字的指针，从 1 开始计数；例如，在第一个示例中传递给函数的数字 3 表示`pivot`equals `arr[2]`，即 5

抱歉，如果这是一个菜鸟问题或已经回答，但我已经花了一整天的时间（也在网上寻找解决方案）无济于事，现在我有自杀的念头。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:08:54.430

当然，对序列进行分区的简单答案是使用

```
auto it = std::partition(vec.begin(), vec.end(),
                         std::bind2nd(std::less<int>(), pivot)); 
```

该函数并不真正关心谓词，而是将序列重新排列为两个序列：一个由谓词产生`true`，另一个由谓词产生`false`。该算法将迭代器返回到第一个子序列的末尾（由谓词为 的元素组成`true`）。有趣的是，该算法应该在前向迭代器上工作（如果它真的得到前向迭代器，它可以使用相当多的交换）。您正在实现的算法显然需要双向迭代器，即，我将忽略也适用于正向序列的要求。

在实现算法时，我会遵循完全相同的接口，因为迭代器抽象对于序列算法非常有效。算法本身只是简单地用于在范围内`std::find_if()`查找迭代器，使得谓词不成立：`it``[begin, end)`

```
it = std::find_if(begin, end, not1(pred)); 
```

如果存在这样的迭代器，它`std::find_if()`会搜索`[std::reverse_iterator<It>(end), std::reverse_iterator<It>(it))`一个迭代器`rit`，使得谓词确实成立：

```
rit = std::find_if(std::reverse_iterator<It>(end), std::reverse_iterator<It>(it),
                   pred); 
```

如果存在这样的迭代器，则它`std::swap()`是相应的位置并更新`begin`，`end`因此：

```
std::swap(*it, *rit);
begin = ++it;
end = (++rit).base(); 
```

如果找到`it`或未`rit`找到，则算法终止。将此逻辑放入一致的算法中似乎相当简单。请注意，此算法甚至不能使用您尝试使用的运算符，即概念上元素只能与`x < pivot`and进行比较`x >= pivot`（与 相同`!(x < privot)`）。

下面的实现未经测试，但完整的算法看起来像这样：

```
template <typename BiIt, typename Pred>
BiIt partition(BiIt it, BiIt end, Pred pred) {
    typedef std::reverse_iterator<BiIt> RIt;
    for (RIt rit(end);
         (it = std::find_if(it, end, std::not1(pred))) != end
         && (rit = std::find_if(RIt(end), RIt(it), pred)) != RIt(it);
         ++it, end = (++rit).base()) {
         std::swap(*it, *rit);
    }
    return it;
} 
```

# android - HoloEverywhere - 操作菜单填充问题

> ID：14033139
> 
> 赞同：0
> 
> 时间：2012-12-25T18:41:49.700
> 
> 标签：android, actionbarsherlock

我遇到了一个意想不到的问题`ActionBarSherlock`。当我使用时 ，没`Holo.Theme.Sherlock.Light.DarkActionBar`问题，看起来像

![在此处输入图像描述](../Images/dd8477cc89ac171bb8226924f48a92be.png)

但如果我选择`Holo.Theme.Sherlock.Light`，我会遇到一些`Padding`问题`DropDownListView`，比如：

![在此处输入图像描述](../Images/103c9f6d941687064e4bfd0ebc43ad9c.png)

我不想`Padding`在`ListView`项目之间有那么多

我试过制作一个`CustomTheme`，但它不起作用

`

```
<style name="AppTheme" parent="Holo.Theme.Sherlock.Light">
    <item name="android:dropDownListViewStyle">@style/DropDownListView</item>
    <item name="dropDownListViewStyle">@style/DropDownListView</item>
</style>

<!-- style the items within the overflow menu -->
<style name="DropDownListView" parent="Holo.ListView.Light">
    <item name="android:dividerHeight">0dp</item>
    <item name="android:dividerPadding">0dp</item>
</style> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:02:02.127

这不是 ABS 的错误。仅在模拟器中看起来像这样。在真实设备上它可以正常工作

# asp.net - 如何使用 DataGrid 或中继器渲染具有两个内部 div 的 div？

> ID：14033141
> 
> 赞同：0
> 
> 时间：2012-12-25T18:41:51.617
> 
> 标签：asp.net

我想使用 asp.net 渲染下面的结构，如何使用任何绑定控件（如 datagrid 或中继器）来实现这一点？

数据

```
Inner content
Inner content1
Inner content2
Inner content3 
```

所需结构

```
 <div class="row">
        <div class="span6">Innner content</div>
        <div class="span6">Innner content1</div>
    </div>
    <div class="row">
        <div class="span6">Innner content2</div>
        <div class="span6">Innner content3</div>
    </div> 
```

我在这里得到了答案

[每行repeater绑定5个item](https://stackoverflow.com/questions/11327902/bind-5-items-in-each-row-of-repeater)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:03:22.663

只需使用普通的 asp:Repeater：

```
<asp:Repeater ID="uiRows" runar="server">
    <ItemTemplate>
        <div class="row">
            <div class="span6">Innner content</div>
            <div class="span6">Innner content</div>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

并在代码隐藏中使用您的动态数据填充它：

```
protected override void OnLoad(EventArgs e)
{
    uiRows.DataSource = ... // you data here
    uiRows.DataBind();
} 
```

# php - 在 PHP 或 CSS 中设置透明背景

> ID：14033144
> 
> 赞同：1
> 
> 时间：2012-12-25T18:42:20.243
> 
> 标签：php, css, wordpress, sidebar

我在侧边栏中使用了一个 Wordpress 插件，它强制我选择背景颜色（当前为#ffffff），我试图覆盖该选项以实现透明度。我不能简单地在我的小部件选项中将该字段留空。我试图通过 CSS 进行修改，但没有成功。我相信相关代码如下：

```
?>
            <li style="background-color: <?php echo $bg_color; ?>" class="<?php echo $icon_filename; ?>"><a target="_blank" href="<?php echo $$icon_url; ?>"><?php echo $icon_filename; ?></a></li>
            <?php
            }
        }
        ?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:44:45.367

使用设置不透明度`rgba()`

```
background-color: rgba(255, 255, 255, .5); 
```

它没有被广泛支持，因为它是一个 CSS3 属性，所以你可以设置`background-color`或使用它`opacity`，但是如果你使用`opacity`它也会使子元素不透明，但是有很多技巧可以使用`opacity`并防止子元素变得不透明

如果您根本不需要背景，只需使用`background: none;`

![演示](../Images/8ca5322da54e11bd79b7b99695091826.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:57:01.573

您可以使用“opacity:0.0;”使用 CSS 设置不透明度/透明度。

将您的代码更改为以下内容：

```
<li style="background-color: <?php echo $bg_color; ?> opacity:0.0;" class="<?php echo $icon_filename; ?>"><a target="_blank" href="<?php echo $$icon_url; ?>"><?php echo $icon_filename; ?></a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:06:45.447

使用 CSS 背景不透明度/透明度属性

```
body { background-color: trasparent } 
```

或者

```
body { opacity: 0.1 } 
```

# c# - 导入 c++ dll，返回一个带有双精度数组的结构

> ID：14033145
> 
> 赞同：0
> 
> 时间：2012-12-25T18:42:25.953
> 
> 标签：c#, arrays, marshalling, dllimport

我有一个 dll 包含一个函数，该函数返回一个带字节的结构和一个 7 个双精度数组：

```
public struct myStruct
{
    public byte v1;     
public Blob v2;
} 
```

dll函数：

```
[DllImport("myDLL", EntryPoint = "?myDLLFuntion@@YA?AUmyStruct@@XZ", ExactSpelling = true)]
public static extern MyStruct myDLLFunction(); 
```

这是我的斑点：

```
[StructLayout(LayoutKind.Sequential, Size = ((sizeof(double))*7))]
public struct Blob
{
// Intentionally left empty. It's just a blob
} 
```

我创建了一个函数来获取数组：

```
public double[] GetArray(Blob NameBlob)
{

    IntPtr dPtr = IntPtr.Zero;  
    try
    {
        dPtr = Marshal.AllocHGlobal(((sizeof(double))*7));
        Marshal.StructureToPtr(NameBlob, dPtr, false);
        double[] r = new double[((sizeof(double))*7)];

        Marshal.Copy(dPtr, r, 0, ((sizeof(double))*7));

        return r;
    }
    finally
    {
        if (dPtr != IntPtr.Zero) 
        {
            Marshal.FreeHGlobal(dPtr);
        }
    }
} 
```

我这样称呼它：

```
myStruct s1=myDLLFunction();

GetArray(s1.v2)[0]; // print it 
```

我得到了错误的值，如果有人可以帮助我，那就太好了，我说的是 Marshal 的使用......我认为我做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:16:34.157

正如 Hans Passant 指出的那样，`StructureToPtr()`当结构没有任何字段时，什么都不做。我想我们在谈论这个：

```
[StructLayout(LayoutKind.Sequential)]
public struct Blob
{
    [MarshalAs (UnmanagedType.ByValArray, SizeConst = 7)]
    double[] array;
} 
```

# java - 如何从 Guice Injector 获取所有单例实例？

> ID：14033146
> 
> 赞同：4
> 
> 时间：2012-12-25T18:42:42.583
> 
> 标签：java, dependency-injection, guice

有没有一种简单的方法来枚举 Guice Injector 已经创建的所有单例实例？或者另一种方法来获取实现特定接口的所有单例？

我想找到所有实现 java.io.Closeable 的单例实例，以便在我的服务关闭时可以干净地关闭它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T21:28:14.760

使用 Guice 的 SPI 编写这将相当容易。Guice 的 Injector 实例公开了一个[getAllBindings()](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Injector.html#getAllBindings--)方法，该方法允许您遍历所有绑定。

```
// Untested code. May need massaging.
private void closeAll(Injector injector) {
  for(Map.Entry<Key<?>, Binding<?>> entry : injector.getAllBindings().entrySet()) {
    final Binding<?> binding = entry.getValue();
    if (Closeable.class.isAssignableFrom(
        entry.getKey().getTypeLiteral().getRawType())) {
      binding.accept(new DefaultBindingScopingVisitor<Void>() {
        @Override public Void visitEagerSingleton() {
          Closeable instance = (Closeable) (binding.getProvider().get());
          try {
            instance.close();
          } catch (IOException e) {
            // log this?
          }
          return null;
        }
      });
    }
  }
} 
```

请注意，我只覆盖`visitEagerSingleton`，您可能必须修改上述内容以处理`@Singleton`具有隐式绑定的延迟实例化实例。另请注意，如果您`bind(SomeInterface.class).to(SomeClosable.class).in(Singleton.class)`可能需要创建`SomeInterface.class`Closable，尽管您也可以实例化每个 Singleton（通过将 Closable 检查放在范围访问者内）以确定提供的实例本身是否是可关闭的，而不管键如何。您还可以对 Binding 的 Key 使用 Reflection 来检查该类型是否可分配给 Closable。

# sql - 如何通过表达式在组中创建 CLOB 列？有什么解决办法吗？

> ID：14033147
> 
> 赞同：3
> 
> 时间：2012-12-25T18:42:58.280
> 
> 标签：sql, oracle11g, ora-00932

我有以下查询：

```
 SELECT
    Test_Case_Name,
    Test_Case_Description,
    Test_Case_Status,
CASE WHEN Test_Case_Status = 'FAILED' THEN
    LISTAGG(LN.LN_BUG_ID,', ') WITHIN GROUP(ORDER BY LN.LN_BUG_ID)
END AS Defect_ID
FROM Test LEFT JOIN LINK LN ON
    LN.LN_ENTITY_ID=Test.TS_TEST_ID
GROUP BY
    Test_Case_Name,
    Test_Case_Description,
    Test_Case_Status 
```

当我运行这个查询时，我得到了错误

> ORA-00932: 不一致的数据类型预期得到 CLOB

这是因为该列`Test_Case_Description`是一种`CLOB`数据类型。如果我从 select 子句中评论此列，它可以正常工作，但我需要在输出中使用此列。

[上面的查询是这里](http://pastebin.com/PLVZNJZv)原始查询的简化版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:54:08.667

以下是您可能要用于您的要求的语法：

句法：

```
DBMS_LOB.SUBSTR (lob_loc, amount, offset)

Parameter Description 
lob_loc: Locator for the LOB to be read i.e CLOB column name. 
amount: Number of bytes (for BLOBs) or characters (for CLOBs) to be read. 
offset: Offset in bytes (for BLOBs) or characters (for CLOBs) from the start of the LOB (origin: 1). 
```

所以你的最终查询应该是这样的，

```
 SELECT
    Test_Case_Name,
    DBMS_LOB.SUBSTR(Test_Case_Description,2000,1) as Test_Case_Description,
    Test_Case_Status,
CASE WHEN Test_Case_Status = 'FAILED' THEN
    LISTAGG(LN.LN_BUG_ID,', ') WITHIN GROUP(ORDER BY LN.LN_BUG_ID)
END AS Defect_ID
FROM Test LEFT JOIN LINK LN ON
    LN.LN_ENTITY_ID=Test.TS_TEST_ID
GROUP BY
    Test_Case_Name,
    Test_Case_Description,
    Test_Case_Status 
```

由于您担心在 4000 个字符后不会丢失数据，我的建议是划分列并显示如下..

```
SELECT
    Test_Case_Name,
    DBMS_LOB.SUBSTR(Test_Case_Description,4000,1) as Test_Case_Description1,
    DBMS_LOB.SUBSTR(Test_Case_Description,8000,4001) as Test_Case_Description2
    Test_Case_Status,
CASE WHEN Test_Case_Status = 'FAILED' THEN
    LISTAGG(LN.LN_BUG_ID,', ') WITHIN GROUP(ORDER BY LN.LN_BUG_ID)
END AS Defect_ID
FROM Test LEFT JOIN LINK LN ON
    LN.LN_ENTITY_ID=Test.TS_TEST_ID
GROUP BY
    Test_Case_Name,
    Test_Case_Description1,
    Test_Case_Description2,
    Test_Case_Status 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T22:25:49.700

我刚刚将我的查询更改为如下所述并且它有效：

```
SELECT 
    InnerTable.Test_Case_Name,
    Test.Test_Case_Description,
    InnerTable.Test_Case_Status,
FROM 
    (   SELECT
    Test_Case_ID
    Test_Case_Name,
    Test_Case_Status,
CASE WHEN Test_Case_Status = 'FAILED' THEN
    LISTAGG(LN.LN_BUG_ID,', ') WITHIN GROUP(ORDER BY LN.LN_BUG_ID)
END AS Defect_ID
FROM Test LEFT JOIN LINK LN ON
    LN.LN_ENTITY_ID=Test.TS_TEST_ID
GROUP BY
    Test_Case_Name,
    Test_Case_Status ) AS InnerTable INNERJOIN TEST ON InnerTable.Test_Case_ID = Test.Test_Case_ID 
```

# c++ - 减小 .rodata 的大小

> ID：14033149
> 
> 赞同：7
> 
> 时间：2012-12-25T18:43:18.660
> 
> 标签：c++, linker, embedded

我在 Gentoo 中为 ARM Cortex M3 (Maple Mini) 交叉编译 C++，但在链接 elf 文件时似乎内存资源达到了顶峰

```
/usr/libexec/gcc/arm-none-eabi/ld: build/maple_mini.elf section `.rodata' will not fit in region `rom'
/usr/libexec/gcc/arm-none-eabi/ld: region `rom' overflowed by 1508 bytes 
```

这篇文章是关于如何减少.rodata内容的大小，以便能够完成elf文件的链接的问题。

我已经剥离了包含的代码，并正在使用以下相关选项进行编译。

```
CXXFLAGS = -fno-rtti -fno-exceptions -Os -fdata-sections -ffunction-sections -Wl,-gc-sections ...
LDFLAGS = -Wl,-gc-sections -fno-exceptions -fno-rtti ... 
```

尽管如此，映射文件中的 .rodata （我对此非常陌生）包含似乎是程序中每个类的某种类型信息。一些地图文件摘录（注意。MPU6050 是一个 SuperSensor<>，它是一个 Sensor<>，在 C++ 意义上）

```
 0x000000000801d6c0       0x28 .../libsyrup.a(MPU6050.o)
    0x000000000801d6c0    _ZTVN5syrup6SensorILi6EEE
.rodata._ZTVN5syrup11SuperSensorILi6EEE    0x000000000801d6e8       0x28 .../libsyrup.a(MPU6050.o)
    0x000000000801d6e8                _ZTVN5syrup11SuperSensorILi6EEE
.rodata._ZTVN5syrup7MPU6050E  0x000000000801d710       0x28 .../libsyrup.a(MPU6050.o)
     0x000000000801d710                _ZTVN5syrup7MPU6050E
.rodata._ZTVN5syrup6SensorILi1EEE
     0x000000000801d738                 0x28 .../libsyrup.a(MS5611.o)
     0x000000000801d738                _ZTVN5syrup6SensorILi1EEE
.rodata._ZTVN5syrup11SuperSensorILi1EEE
            0x000000000801d760          0x28 .../libsyrup.a(MS5611.o)
            0x000000000801d760                _ZTVN5syrup11SuperSensorILi1EEE
...
            0x000000000801ee24          0x6f3 .../libstdc++.a(cp-demangle.o)
                                        0x730 (size before relaxing)
*fill*         0x000000000801f517       0x1 
.rodata        0x000000000801f518       0x14 .../libgcc.a(unwind-arm.o)
.rodata        0x000000000801f52c       0x23c .../libc.a(lib_a-strerror.o)
.rodata.str1.4    0x000000000801f768    0x635 .../libc.a(lib_a-strerror.o)
                                        0x63c (size before relaxing) 
```

所以，lib_a-strerror.o 和 cp-demangle.o 似乎占据了大部分空间，尽管我猜这些是非常重要的。

所以，我的问题是，我可以采取哪些进一步的步骤来减少（或重构代码） .rodata 部分，以及那里究竟存储了什么？欢迎任何建议！我对编译和链接的更深层次的工作相当陌生，但正在学习。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T19:06:29.783

我认为你的问题可能不一定在rodata部分——只是那个人没有在muscal chairs活动中及时坐下来。换句话说，rodata 本身并不是太大，但整个图像太大而无法容纳。解决方案是查看系统中的整个代码、数据和rodata，看看其中是否有任何突出。

一般来说，删除不必要的代码（或字符串）将是这里的关键点。如果没有可以删除的东西，那么您将不得不找到一种不同的方法来解决问题。一种方法可能是压缩代码和数据，然后将其解压缩到 RAM 中（假设目标系统上的 RAM 比 ROM 多得多）。这不是一个闻所未闻的问题，但它从来没有那么容易解决 - 除非有人做了一些非常糟糕的编码并添加了数百千字节的代码。如果你有一个版本控制系统，并且你知道一个合适的版本，那么检查到底有多少空闲空间可能是一件好事——如果它突然变大了，检查是否有人添加了一些海量的静态数据结构或一些这样的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T19:02:47.520

根本的问题不是该`.rodata`部分太大，必然 - 通常你只是用完了ROM空间。（链接器恰好在该部分中链接时达到了限制。）

`perror`删除对,和 company等函数的任何调用`strerror`最终应该会放弃对 的依赖`strerror.o`，这应该会为您节省千字节半。不过，您可能还有其他更简单的方法可以节省同样的费用——这完全取决于您的应用程序。

# r - R将数据框中的值分配给colnames

> ID：14033151
> 
> 赞同：0
> 
> 时间：2012-12-25T18:44:06.800
> 
> 标签：r, dataframe

我有一个数据框（称为 HumMeth450），其中包含来自多个样本的数据。前五行包含有关样本的详细信息，以下行包含数据本身，例如：

```
3B26-1          3A25-1-1        
P16 -           P16 -       
3B-26-clone1    3A-25-1-1-100-1     
Beta Value      Beta Value      
Uncorrected     Uncorrected 
0.765508685     0.598394686 
0.814338487     0 
```

我想将 colnames 设置为包含每列的前五行。

我尝试使用

```
colnames(HumMeth450)<-as.character(HumMeth450[(1:5),]) 
```

并得到了与相应单元格的值不匹配的东西，对于上面引用的两列，我得到了：

c(469032、469023、469031、469033、323649)、c(467282、467273、467281、467283、271454)

我究竟做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:13:41.777

使用您的示例，这里是如何读取 5 行的标题，然后跳过 5 行的数据：

```
text="3B26-1          3A25-1-1        
P16 -           P16 -       
3B-26-clone1    3A-25-1-1-100-1     
Beta Value      Beta Value      
Uncorrected     Uncorrected 
0.765508685     0.598394686 
0.814338487     0   " 
```

我在此处为示例创建`textConnection`对象（并且不关闭它们），但您可能需要`file='filename'`在接下来的两个语句中的每一个中：

```
a <- read.fwf(file=textConnection(text), width=c(16,16), nrows=5, strip.white=TRUE)
HumMeth450 <- read.table(file=textConnection(text), header=FALSE, skip=5)
colnames(HumMeth450) <- unlist(apply(a, 2, paste, collapse=" "))

> HumMeth450
  3B26-1 P16 - 3B-26-clone1 Beta Value Uncorrected 3A25-1-1 P16 - 3A-25-1-1-100-1 Beta Value Uncorrected
1                                        0.7655087                                             0.5983947
2                                        0.8143385                                             0.0000000 
```

# java - 通过将元素设置为空来释放数组中的空间？

> ID：14033164
> 
> 赞同：0
> 
> 时间：2012-12-25T18:46:11.550
> 
> 标签：java, android, arrays

如果我在一个数组中有很多位图对象，例如：

```
BitmapArray[ Bitmap1 , Bitmap2 ,Bitmap3, Bitmap4, Bitmap5,...] 
```

如果数组变大，这最终会占用很多堆栈空间（或堆空间？）。

我现在的问题是，如果我将不再需要的位图清空，这是否会从堆栈（或堆）中释放空间？

```
BitmapArray[ Bitmap1 ,null,null, Bitmap4,null,...] 
```

我无法删除元素并更改数组大小 btw

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:48:51.467

如果您不保留对位图的*任何*其他引用，这可以减少您的内存使用量。如果不再引用位图，垃圾收集器可以销毁未使用的对象并释放内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:49:38.510

这个位图内存问题的漂亮解决方案是 LRUCache (http://developer.android.com/reference/android/util/LruCache.html)

它是保护您的应用程序免于为位图保留过多内存的有用工具。

但是，如果您仍想使用数组 -请记住在将引用设置为 null 之前在位图上**使用 .recycle() 。**释放内存后也要使用 System.gc() ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:48:29.910

借助 Collection 之类的 ArrayList

假设 bitmapList 是您的位图列表，那么您可以使用索引来删除它

```
bitmapList.remove(indexValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T18:48:38.417

位图对象存储在堆上。如果您将数组中的引用设为空并且没有其他引用，则该对象可能会被垃圾回收。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T19:54:36.847

如果您只想谈论数组，请考虑使用[SparseArray](http://developer.android.com/reference/android/util/SparseArray.html) 。

如果您将其用于缓存，请考虑使用更好的缓存机制，该机制将考虑位图的大小，这样就不会占用太多空间。这种机制可能是[LruCache](http://developer.android.com/reference/android/util/LruCache.html)，它也包含在兼容性库和[bitmapFun](http://developer.android.com/training/displaying-bitmaps/index.html)示例中。

# ruby-on-rails - 如何使用 Hstore 键在 ActiveRecord 查询中使用 group by 子句？

> ID：14033165
> 
> 赞同：3
> 
> 时间：2012-12-25T18:46:21.330
> 
> 标签：ruby-on-rails, postgresql, activerecord, rails-activerecord, hstore

我正在开发一个 RoR 应用程序。我将 Postgres 与 Hstore 一起使用。我想使用`group`使用 Hstore 键的查询。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T20:31:47.033

是的，当然可以。GROUP BY 子句是一个非常通用的工具，因此您可以按您想要的任何表达式进行分组。所以，给定这样的数据：

```
=> select * from with_hstore order by id;
 id |         h          
----+--------------------
  1 | "a"=>"6"
  2 | "a"=>"2"
  3 | "b"=>"1"
  4 | "a"=>"b"
  5 | "x"=>"z", "y"=>"6"
  6 | "a"=>NULL 
```

您可以使用以下方法按键值分组[`h -> key`](http://www.postgresql.org/docs/current/static/hstore.html#HSTORE-OP-TABLE)：

```
=> select h -> 'a', count(*) from with_hstore group by h -> 'a';
 ?column? | count 
----------+-------
          |     3
 2        |     1
 6        |     1
 b        |     1 
```

请注意，缺少的键和 NULL 值最终会在这里出现相同的结果。您甚至可以使用以下方法按是否存在密钥进行分组[`exist`](http://www.postgresql.org/docs/current/static/hstore.html#HSTORE-FUNC-TABLE)：

```
=> select exist(h, 'a'), count(*) from with_hstore group by exist(h, 'a');
 exist | count 
-------+-------
 f     |     2
 t     |     4 
```

您不希望这样`group by (h -> 'a') is not null`做，因为您可以拥有 NULL 值，该测试不会在没有相关键的情况下区分显式 NULL 和 hstore；当然，这可能是你想要的，所以也许你确实想要分组`(h -> 'a') is not null`。

ActiveRecord 将允许您通过将组条件作为 SQL 片段传递来按数据库可以处理的任何内容进行分组：

```
Model.group("h -> 'a'")...
Model.group("exist(h, 'a')")...
... 
```

# c# - FileSystemWatcher 在新文件上触发了我的事件，但我的 UI 更新了两次

> ID：14033166
> 
> 赞同：0
> 
> 时间：2012-12-25T18:46:32.047
> 
> 标签：c#, winforms

我构建了一个应用程序，它使用监听文件夹`FileSystemWatcher`，当创建一个新文件时，计时器会启动几秒钟，以确保整个文件都在文件夹中。然后我的主 ui 线程的启动事件运行将此文件添加到我的 ListView 中。

成功创建的新文件添加到我的`ListView`但我的问题是添加第一个后，第二个添加了两次，下一个文件添加了 4 次等等......

我的听众班：

```
public class FileListener
{
    private static string _fileToAdd;
    public event EventHandler _newFileEventHandler;
    private static System.Timers.Timer _timer;

    public void startListener(string directoryPath)
    {
        FileSystemWatcher watcher = new FileSystemWatcher(directoryPath);
        _timer = new System.Timers.Timer(5000);
        watcher.Filter = "*.pcap";
        watcher.Created += watcher_Created;
        watcher.EnableRaisingEvents = true;
        watcher.IncludeSubdirectories = true;
    }

    void watcher_Created(object sender, FileSystemEventArgs e)
    {            
        _timer.Elapsed += new ElapsedEventHandler(myEvent);
        _timer.Enabled = true;
        _fileToAdd = e.FullPath;
    }

    private void myEvent(object sender, ElapsedEventArgs e)
    {
        _newFileEventHandler(_fileToAdd, EventArgs.Empty);
        _timer.Stop();
    }
} 
```

我处理新文件的事件：

```
void listener_newFileEventHandler(object sender, EventArgs e)
{
    string file = sender as string;
    addFileToListFiew(file);

} 
```

以及将文件添加到我的功能`ListView`

```
public void addFileToListFiew(string file)
{
    this.Invoke((MethodInvoker)delegate
    {
        lvFiles.Items.Add(new ListViewItem(new string[]
        { 
            file, "Waiting"
        }));
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:59:37.770

```
//You can unsubscribe from the previous event subscription using the following:
//You may also need a global boolean variable to keep track of whether or not the watcher currently exists... Although, I am not sure if that is the best resolution for the problem...
watcher.Created -= watcher_Created;

//...

if(eventSubscriptionExists)
{
    //if already subscribed, either do nothing, or re-subscribe

    //unsubscribe from event
    watcher.Created -= watcher_Created;
    //subscribe to event
    watcher.Created += watcher_Created;
}
else
{
    //if not already subscribed to event, start listening for it...
     watcher.Created += watcher_Created;
} 
```

# eclipse - Maven Google App Engine 插件 + Spring

> ID：14033168
> 
> 赞同：1
> 
> 时间：2012-12-25T18:46:40.050
> 
> 标签：eclipse, spring, google-app-engine, maven, spring-mvc

我想使用 Maven Google App Engine 插件 ( [https://github.com/maven-gae-plugin/maven-gae-plugin](https://github.com/maven-gae-plugin/maven-gae-plugin) ) 来启动一个支持 Spring MVC 的 Google App Engine 项目。我对他们拥有的 Spring 原型感兴趣。我尝试使用生成一个项目，`mvn archetype:generate -DarchetypeGroupId=net.kindleit -DarchetypeArtifactId=gae-archetype-spring \ -DarchetypeVersion=0.9.4 -DgroupId=com.myapp.test -DartifactId=testapp`但它没有用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:43:22.983

我们开始推送官方插件，请查看[http://code.google.com/p/appengine-maven-plugin/](http://code.google.com/p/appengine-maven-plugin/)新原型正在开发中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:03:27.360

I solved my problem, I downloaded the source code and I added this line `<module>gae-archetype-spring</module>` to the root pom.xml in the modules tag. Then I installed the plugin in my local repo.

The developer missed adding this line I think after he added the spring-gae archetype.

ps: another issue the `<?xml version="1.0" encoding="UTF-8"?>` need to be removed from the pom.xml inside the directory `gae-archetype-spring` for the pom.xml to be parseable.

# xaml - 在 C#/XAML 控件中平移、缩放和拖动？

> ID：14033169
> 
> 赞同：1
> 
> 时间：2012-12-25T18:46:44.747
> 
> 标签：xaml, windows-runtime, controls, zooming, panning

是否有一个 XAML 控件可以让我添加一些图像，然后允许用户平移、缩放和拖动这些图像？我正在创建一个 Windows 8 应用程序，它需要在背景上有图像（卡片），并且用户应该能够平移、放大和拖动卡片。如果没有内置方法，我可以使用第三方解决方案（只要不付费）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:44:22.687

您需要处理 ManipulationDelta 事件。有关如何使用它的一些示例，请参阅[此页面。](http://msdn.microsoft.com/en-gb/library/windows/apps/xaml/hh465387.aspx)

XAML 示例

```
<Rectangle Name="TestRectangle" Width="200" Height="200" Fill="Blue" ManipulationMode="All"/> 
```

# javascript - 如何绑定到 Ember.js 中的视图重新渲染？

> ID：14033175
> 
> 赞同：6
> 
> 时间：2012-12-25T18:48:07.617
> 
> 标签：javascript, ember.js

我有一些 jQuery 代码需要在呈现视图时运行。对于初始渲染，我可以轻松完成

```
App.FooView = Ember.View.extend({
  didInsertElement: function() {
    console.log("the view was rendered");
    this.$().someStuff();
  }
}); 
```

但由于该`someStuff()`方法正在操作视图元素的属性，因此我需要在视图因数据绑定而重新渲染时运行它，因为它会丢失自定义生成的属性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T04:34:43.950

如果您想在某个属性更改时重新渲染视图，那么您想要的内容如下所示：

```
App.FooView = Ember.View.extend({
    myProperty: 'This value might change',
    myPropertyChanged: function() {
        //Do some stuff here (maybe change the template) and call...
        this.rerender();
    }.observes('myProperty')
}); 
```

但是，如果您只想在创建视图后重新渲染视图，那么您需要更像这样的东西：

```
App.FooView = Ember.View.extend({
    init: function() {
        this._super();
        //Do some stuff here (maybe change the template) and call...
        this.rerender();
    }
}); 
```

**来源：** [http ://emberjs.com/api/classes/Ember.View.html](http://emberjs.com/api/classes/Ember.View.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T17:22:35.493

除了 Akash 的解释之外，您可能希望使用 didInsertElement 钩子而不是 init 钩子仅在创建视图后重新渲染。所以它看起来更像：

```
App.FooView = Ember.View.extend({
    didInsertElement: function() {
        this.rerender();
    }
}); 
```

虽然，我不确定为什么在视图已经渲染后需要重新渲染。

# javascript - JavaScript中一组数字的随机排列

> ID：14033177
> 
> 赞同：0
> 
> 时间：2012-12-25T18:48:32.453
> 
> 标签：javascript, random, shuffle

> **可能重复：**
> [如何随机化 javascript 数组？](https://stackoverflow.com/questions/2450954/how-to-randomize-a-javascript-array)

我正在用 JavaScript 编写代码，我需要在其中获取 35 个输入值，为每个输入值分配一个数组中的位置，然后将它们打乱，以便它们以不同的顺序重新排列。像这样：

```
var sort = new Array(35);
sort[0] = document.getElementById("d1p1").value;
sort[1] = document.getElementById("d1p2").value;
// ...
// ... (till 35)
var rand1 = Math.floor(Math.random() * 35);
var rand2 = Math.floor(Math.random() * 35);
// ...
// ... (till 35)
var rsort = new Array(35);
rsort[rand1] = document.getElementById("d1p1").value;
rsort[rand2] = document.getElementById("d1p2").value; 
```

唯一的问题是，由于 Math.floor(Math.random()*35) 不止一次从 1-35 生成一些相同的数字（嗯，我猜这是随机性的点），所以有时会分配两个值相同的输入框，它们返回*undefined*。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T18:52:24.280

为了在随机排列中生成均匀的值分布，您应该这样做：

*   选择一个从 0 到 35 的随机索引，并将第一个值与该索引交换
*   然后从 1 到 35 中选择另一个随机索引，并将第二个值与该索引交换
*   对于所有剩余的索引 (2 - 35) 继续这样

这是一个潜在的实现：

```
 // first make a copy of the original sort array
 var rsort = new Array(sort.length);
 for(var idx = 0; idx < sort.length; idx++)
 {
     rsort[idx] = sort[idx];
 }

 // then proceed to shuffle the rsort array      
 for(var idx = 0; idx < rsort.length; idx++)
 {
    var swpIdx = idx + Math.floor(Math.random() * (rsort.length - idx));
    // now swap elements at idx and swpIdx
    var tmp = rsort[idx];
    rsort[idx] = rsort[swpIdx];
    rsort[swpIdx] = tmp;
 }
 // here rsort[] will have been randomly shuffled (permuted) 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:05:55.727

[您可以使用改编自其他答案](https://stackoverflow.com/questions/12528886/random-but-just-in-chrome)的这个小功能。此外，我会使用一个类，以便更容易获取您的所有输入。

```
function randomArray(min, max) {
  return (new Array(max-min))
    .join(',').split(',')
    .map(function(v,i){ return [Math.random(), min + i]; })
    .sort().map(function(v) { return v[1]; });
}

var inputs = document.querySelectorAll('.myinput');

// Creates an array with all your input elements in random order
var randomInputs = randomArray(0, inputs.length).map(function(n){
  return inputs[ n ];
}); 
```

**演示： http:** [//jsbin.com/uyaqed/1/edit](http://jsbin.com/uyaqed/1/edit)（ctrl+enter刷新）

# javascript - 为缩略图分配 .src 的问题

> ID：14033180
> 
> 赞同：2
> 
> 时间：2012-12-25T18:49:10.530
> 
> 标签：javascript, src, classname

*我是 Javascript 的初学者，因此请记住这一点，以防我的代码中出现任何小的低效率。*

我正在尝试将一组 div“gallerybox”（位于另一个 div “galleryimages”内）的 ID 设置为递增增量，即。图片1、图片2等

每个 div 内部（来自“galleryboxes”）各有一张图片；在我的 for 循环的第二行中，我试图对上面的 div 做同样的事情并给他们一个 id。然后我想用这张照片制作一个缩略图（发布到 div 'gallery'）。

```
var galleryimages = document.getElementById("galleryimages");
var galleryboxes = galleryimages.getElementsByTagName("div");

var k = 1;
var thumbimage = document.createElement("img");

for (var i = 0; i < galleryboxes.length; i++) {
    galleryboxes[i].id = "item" + k;
    galleryboxes[i].getElementsByTagName("img").id = "picture" + k;
    thumbimage.src = document.getElementById("picture" + k).src;
    document.getElementById("gallery").appendChild(thumbimage);
    //thumbimage.className = "thumbnail";
    k++;
} 
```

不幸的是，当我'appendChild' 时，它只是说它无法读取null 的.src 属性。我已经尝试重新安排一些东西，但我不能只得到图像来从中制作缩略图。我很确定我已将 ID 分配给正确的项目...

除此之外，我注释掉的代码正试图为新的缩略图分配一个类，这几次我接近让它工作似乎并没有工作。那里有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:57:01.203

我注意到两个问题：

1）您只创建了 1 个缩略图，但遍历了一组画廊框

2)`getElementsByTagName`返回一个元素列表（[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)），并设置`.id`NodeList 的。如果您确定恰好有 1 个 img，请使用`getElementsByTagName()[0]`.

# linux - 没有差异时显示差异

> ID：14033181
> 
> 赞同：6
> 
> 时间：2012-12-25T18:49:22.627
> 
> 标签：linux, diff

这两个文件与

```
diff d_out.txt D_out.txt 
```

我正在使用 Ubuntu (12.10) 终端。

d_out.txt 的内容

```
ABCADBACDABCADBACDAB
ABCABCABCABCABCABCAB
CRASH
CRASH
CRASH
ABCDCABADCDBABCDCABA
ABCDBACBDABCDBACBDAB
ABCCABBCAABCCABBCAAB
ABCDDCBAABCDDCBAABCD
CRASH
CRASH
ABCDEEDABCCBEDAADCBE
ABCCAABCCAABCCAABCCA
ABBCCABBCCABBCCABBCC
ABCDEFFABCDEEFABCDDE
AABCDEFFABCDEEFABCDD
ABBCDEFAABCDEFFABCDE
ABBCCDDEDDCCBBABBCCD
CRASH
CRASH
ABCDEFGBADCFEBGDAFCB
ABCDEBADCBEDABCDEBAD
ABCDBADCABCDBADCABCD
ABCDEFGHIABCDEFGHIAB
ABCDEFGHIJABCDEFGHIJ
ABCDEFGHIJKABCDEFGHI
ABCDEFGHIJKLMNOPQRSA
CRASH
AABBCCDCCBBAAEAABBCC
AABBCCDCCBBAAEAABBCC
```

D_out.txt 的内容

```
ABCADBACDABCADBACDAB
ABCABCABCABCABCABCAB
CRASH
CRASH
CRASH
ABCDCABADCDBABCDCABA
ABCDBACBDABCDBACBDAB
ABCCABBCAABCCABBCAAB
ABCDDCBAABCDDCBAABCD
CRASH
CRASH
ABCDEEDABCCBEDAADCBE
ABCCAABCCAABCCAABCCA
ABBCCABBCCABBCCABBCC
ABCDEFFABCDEEFABCDDE
AABCDEFFABCDEEFABCDD
ABBCDEFAABCDEFFABCDE
ABBCCDDEDDCCBBABBCCD
CRASH
CRASH
ABCDEFGBADCFEBGDAFCB
ABCDEBADCBEDABCDEBAD
ABCDBADCABCDBADCABCD
ABCDEFGHIABCDEFGHIAB
ABCDEFGHIJABCDEFGHIJ
ABCDEFGHIJKABCDEFGHI
ABCDEFGHIJKLMNOPQRSA
CRASH
AABBCCDCCBBAAEAABBCC
AABBCCDCCBBAAEAABBCC
```

该文本最初来自为解决竞赛问题而完成的程序。D_out.txt 文件是原始判断输出，d_out.txt 是我为解决该问题而编写的程序的输出。我试图找到小的差异，但没有。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T18:59:22.573

这些文本是平等的。

输出什么`diff`？你可能有一些额外的空白。

尝试

`diff -w -B d_out.txt D_out.txt`

`-w`忽略所有空白。

`-B`忽略行全为空白的更改。

查看不同的[差异选项](http://ss64.com/bash/diff.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:16:16.490

尝试使用 vimdiff。它将突出显示尾随空格的任何可能差异。

# python - list_display 带有函数，如何传递参数？

> ID：14033182
> 
> 赞同：2
> 
> 时间：2012-12-25T18:49:28.723
> 
> 标签：python, django, django-admin, argument-passing

[Django 管理文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)说可以将可调用对象指定为可以在`list_display`. 如果我需要通过函数参数向函数传递一些额外的上下文，那么最好的方法是什么？

在伪代码中，我想做的是：

**应用房地产：**

模型.py：

```
class A(models.Model):
    raw = models.TextField() 
```

管理员.py：

```
from utils import processing

list_display = [processing('realestate app result', True)] 
```

**应用派对：**

模型.py：

```
class Person(models.Model):
    raw = models.TextField() 
```

管理员.py：

```
from utils import processing

list_display = [processing('party app result', False)] 
```

**实用程序.py：**

```
def processing(obj, short_description, allow_tags=False):
    def process(obj):
        # do something
        pass
    process.short_description = short_description
    process.allow_tags = allow_tags

    return process(obj) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T19:54:52.180

您不应该在函数本身内指定`short_description`and 。`allow_tags`

像这样定义处理：

**实用程序.py：**

```
def processing(obj):
      #do something
      pass 
```

在每个 ModelAdmin 类上，执行：

```
class RealestateAdmin(...):
   list_display = [processing,]

   def processing(obj):
       return utils.processing(obj)
   processing.short_description = 'realestate app result'
   processing.allow_tags = True

class PartyAdmin(...):
   list_display = [processing,]

   def processing(obj):
       return utils.processing(obj)
   processing.short_description = 'party app result'
   processing.allow_tags = False 
```

所以你有一个包含逻辑的地方（utils.py）。每个类都定义了要在表格中显示的属性。

# c# - 无法加载实体框架提供程序类型？

> ID：14033193
> 
> 赞同：444
> 
> 时间：2012-12-25T18:51:35.490
> 
> 标签：c#, entity-framework, mstest, teamcity-7.1, entity-framework-6

我正在尝试在当前安装在我的机器上的 TeamCity 上运行我的测试。

> `System.InvalidOperationException`：
> 
> 无法加载' ' ADO.NET 提供程序`System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer`的实体框架提供程序类型 ' 。确保提供程序程序集可用于正在运行的应用程序。`Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'``System.Data.SqlClient`
> 
> 有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=260882](http://go.microsoft.com/fwlink/?LinkId=260882)。

我在我的任何项目中都没有参考`System.Data.Entity`codeplex 上建议的升级到 EF6 的内容。

所以，我不确定为什么会出现这个异常。当我从 VS 运行测试时，我没有遇到任何此类异常。

我确实尝试将 CopyLocal 设置为 false 然后再次设置为 true .. 但这似乎也不起作用。

更新

我的 app.config 有以下内容。这会导致一些我不理解的行为吗？

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

我在 teamcity 得到以下堆栈跟踪。

```
[MSTest] IntegrationTests.CrudTest+QuestionTest.Create
[03:59:11][IntegrationTests.CrudTest+QuestionTest.Create] Initialization method IntegrationTests.CrudTest+QuestionTest.Initialize threw exception. System.InvalidOperationException: System.InvalidOperationException: The Entity Framework provider type 'System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' for the 'System.Data.SqlClient' ADO.NET provider could not be loaded. Make sure the provider assembly is available to the running application. See http://go.microsoft.com/fwlink/?LinkId=260882 for more information..
[03:59:11]
[IntegrationTests.CrudTest+QuestionTest.Create]     at System.Data.Entity.Config.ProviderServicesFactory.GetInstance(String providerTypeName, String providerInvariantName)
   at System.Data.Entity.Config.ProviderServicesFactory.GetInstanceByConvention(String providerInvariantName)
   at System.Data.Entity.Config.DefaultProviderServicesResolver.GetService(Type type, Object key)
   at System.Data.Entity.Config.CachingDependencyResolver.<>c__DisplayClass1.<GetService>b__0(Tuple`2 k)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at System.Data.Entity.Config.CachingDependencyResolver.GetService(Type type, Object key)
   at System.Data.Entity.Config.ResolverChain.<>c__DisplayClass3.<GetService>b__0(IDbDependencyResolver r)
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at System.Data.Entity.Config.ResolverChain.GetService(Type type, Object key)
   at System.Data.Entity.Config.RootDependencyResolver.GetService(Type type, Object key)
   at System.Data.Entity.Config.ResolverChain.<>c__DisplayClass3.<GetService>b__0(IDbDependencyResolver r)
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at System.Data.Entity.Config.ResolverChain.GetService(Type type, Object key)
   at System.Data.Entity.Config.CompositeResolver`2.GetService(Type type, Object key)
   at System.Data.Entity.Config.IDbDependencyResolverExtensions.GetService[T](IDbDependencyResolver resolver, Object key)
   at System.Data.Entity.Config.InternalConfiguration.GetService[TService](Object key)
   at System.Data.Entity.Config.DbConfiguration.GetService[TService](Object key)
   at System.Data.Entity.Utilities.DbProviderFactoryExtensions.GetProviderServices(DbProviderFactory factory)
   at System.Data.Entity.Infrastructure.DefaultManifestTokenService.GetProviderManifestToken(DbConnection connection)
   at System.Data.Entity.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest)
   at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
   at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
   at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
   at System.Data.Entity.DbSet`1.Add(TEntity entity)
   at EFRepository.Infrastructure.EFRepository`1.Add(T item) in c:\TeamCity\buildAgent\work\da2ea4e72c0e77f0\Repository\Infrastructure\EFRepository.cs:line 22
   at IntegrationTests.CrudTest.Initialize() in c:\TeamCity\buildAgent\work\da2ea4e72c0e77f0\IntegrationTests\CrudTest.cs:line 34 
```

* * *

## 回答 #1

> 赞同：442
> 
> 时间：2013-03-12T10:39:50.923

同样的问题，但我通过 Nuget 安装了 EF 6。另一个可执行文件缺少 EntityFramework.SqlServer。我只是将 nuget 包添加到该项目中。

* * *

## 回答 #2

> 赞同：282
> 
> 时间：2013-10-02T05:50:00.333

我在我的测试项目中遇到了同样的问题 - 我通过 NuGet 安装了最新的 EF6 位，每次我调用与 EF 相关的东西时，我都会得到：

> 无法加载“System.Data.SqlClient”ADO.NET 提供程序的实体框架提供程序类型“System.Data.Entity.SqlServer.SqlProviderServices，EntityFramework.SqlServer”。确保提供程序程序集可用于正在运行的应用程序。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=260882](http://go.microsoft.com/fwlink/?LinkId=260882)。

我的解决方法：我将此方法放在我的测试项目中：

```
public void FixEfProviderServicesProblem()
{
//The Entity Framework provider type 'System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer'
//for the 'System.Data.SqlClient' ADO.NET provider could not be loaded. 
//Make sure the provider assembly is available to the running application. 
//See http://go.microsoft.com/fwlink/?LinkId=260882 for more information.

var instance = System.Data.Entity.SqlServer.SqlProviderServices.Instance;
} 
```

从未调用过此方法，但我认为编译器将删除所有“不必要的”程序集，并且在不使用 EntityFramework.SqlServer 的情况下测试失败。

无论如何：在我的机器上工作；）

注意：[您可以确保从您的模型/实体项目中对 SqlProviderServices 进行静态引用，而不是添加测试项目的方法](https://stackoverflow.com/a/29743758/52277)。

* * *

## 回答 #3

> 赞同：113
> 
> 时间：2014-03-11T02:14:45.583

Nuget 会将您的 EF6 项目配置为引用 EntityFramework.SqlServer.dll。这会在构建期间部署到 EF6 项目的输出文件夹，但不会部署到引用 EF6 项目的项目的输出文件夹。我相信这是因为 Visual Studio 足够“智能”，可以检测到您的程序集中没有任何东西实际上是直接使用 dll，因此不包含它。您可以通过将代码添加到使用 EntityFramework.SqlServer.dll 的 EF6 项目来强制将 EntityFramework.SqlServer.dll 部署到引用您的 EF6 项目（单元测试、UI 等）的项目的输出文件夹。请注意不要将代码放在生成的类中，因为您可能会在下一次重新生成时丢失它。我选择将以下类添加到程序集中，从而解决了问题。

```
using System.Data.Entity.SqlServer;

internal static class MissingDllHack
{
    // Must reference a type in EntityFramework.SqlServer.dll so that this dll will be
    // included in the output folder of referencing projects without requiring a direct 
    // dependency on Entity Framework. See http://stackoverflow.com/a/22315164/1141360.
    private static SqlProviderServices instance = SqlProviderServices.Instance;
} 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2015-02-06T16:10:42.297

我的解决方案是通过 nuget 管理器从项目中删除实体框架并将其重新添加。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2015-12-27T18:55:14.217

我通过在我的 DBContext 类顶部添加一个 using 语句解决了这个问题，如下所示：

```
using SqlProviderServices= System.Data.Entity.SqlServer.SqlProviderServices; 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2013-11-01T11:10:47.390

我已经为提供者使用了基于代码的注册。 [链接1 链接](http://msdn.microsoft.com/en-us/data/jj730568#code) [2](http://msdn.microsoft.com/en-us/data/jj680699#Moving)

刚刚创建了配置类

```
class DbContextConfiguration : DbConfiguration
{
    public DbContextConfiguration()
    {
        this.SetDatabaseInitializer(new DropCreateDatabaseAlways<MyDbContext>());
        this.SetProviderServices(SqlProviderServices.ProviderInvariantName, SqlProviderServices.Instance);
    }
} 
```

关键是**this.SetProviderServices(SqlProviderServices.ProviderInvariantName, SqlProviderServices.Instance);**

并以这种方式使用它

```
[DbConfigurationType(typeof(DbContextConfiguration))]
public class MyDbContext : DbContext
{
    public MyDbContext()
    {
        ...
    }

    public DbSet<...> ...{ get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        ...
    }
} 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2014-09-25T10:32:43.877

我在我的程序集初始化类中使用 [DeploymentItem] 对其进行了整理

```
namespace MyTests
{
    /// <summary>
    /// Summary description for AssemblyTestInit
    /// </summary>
    [TestClass]
    [DeploymentItem("EntityFramework.SqlServer.dll")]
    public class AssemblyTestInit
    {
        public AssemblyTestInit()
        {
        }

        private TestContext testContextInstance;

        public TestContext TestContext
        {
            get
            {
                return testContextInstance;
            }
            set
            {
                testContextInstance = value;
            }
        }

        [AssemblyInitialize()]
        public static void DbContextInitialize(TestContext testContext)
        {
            Database.SetInitializer<TestContext>(new TestContextInitializer());
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-03-01T21:10:41.083

我有问题，因为我没有添加对 EntityFramework.sqlServer.dll 的引用。当我开发程​​序时，它可以工作。但是当我发布应用程序并安装它时，它会抛出错误。

我只是添加参考并再次构建和发布。

![参考](../Images/3e3b81efdb1f7cb11d67d342f57dcf8a.png)

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2016-06-13T19:22:59.923

派对迟到了，但投票率最高的答案对我来说似乎都是黑客行为。

我所做的只是从测试项目中的 app.config 中删除以下内容。工作。

```
 <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework> 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-05-04T06:12:57.097

我已经通过手动将`EntityFramework.SqlServer.dll`文件复制到`bin folder`主应用程序来解决这个问题。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-01-12T19:35:02.273

我终于解决了这个问题。事实证明，我的存储库类中有一个错误的 IDIsposable 实现。我修好了。错误的实现导致了 stackoverflow 异常，因为我没有正确处理资源。这导致 VS 无法运行测试，测试执行引擎崩溃。

我在这里向微软提交了它（这是在我得到正确的解决方案之前）。 [connect.microsoft.com/VisualStudio/feedback/details/775868/vs-test-execution-crashes-in-vs-2012#details](http://connect.microsoft.com/VisualStudio/feedback/details/775868/vs-test-execution-crashes-in-vs-2012#details)

无论如何，现在构建在 teamcity 上运行良好。虽然，我仍然很好奇为什么 VS 测试执行引擎都没有优雅的方式告诉我发生了什么，而不是 Team City。

我通过手动调试测试发现了根本原因（经过这么多天我才意识到，修复花了我 5 秒）。

希望这将帮助遇到此类问题的人。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-06-16T04:11:54.053

我看到类似的问题，并使用这篇文章中的方法：（[http://entityframework.codeplex.com/workitem/1590](http://entityframework.codeplex.com/workitem/1590)），它解决了我的问题。

要解决此问题，您可以通过在测试程序集的任何位置添加类似这样的行来使您的测试程序集直接引用提供程序程序集： var _ = System.Data.Entity.SqlServer.SqlProviderServices.Instance;

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2018-01-26T11:32:27.997

我有同样的问题我尝试了很多次但它没有解决但是当我安装包 EntityFramework.SqlServerCompact 它解决了从 Nuget 包管理器安装这个包。

```
Install-Package EntityFramework.SqlServerCompact 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-07-25T11:14:07.577

我创建了一个静态“启动”文件并添加了代码以强制将 DLL 复制到其中的 bin 文件夹中，以此作为分隔此“配置”的一种方式。

 `[DbConfigurationType(typeof(DbContextConfiguration))] public static class Startup { }`

 ````
public class DbContextConfiguration : DbConfiguration
{
    public DbContextConfiguration()
    {
        // This is needed to force the EntityFramework.SqlServer DLL to be copied to the bin folder
        SetProviderServices(SqlProviderServices.ProviderInvariantName, SqlProviderServices.Instance);
    }
} 
````  `* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-01-21T04:55:52.110

当我检查问题时，我注意到输出文件夹中缺少以下 dll。如果应用程序处于调试模式，简单的解决方案是将 Entityframework.dll 和 Entityframework.sqlserver.dll 与 app.config 复制到输出文件夹。同时将app.config的构建选项参数“Copy to output folder”更改为始终复制。这将解决您的问题。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-06-09T19:01:29.727

只需引用或浏览 EF dll - EntityFramework.SqlServer.dll

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-01-31T11:45:31.770

在尝试了所有其他建议的解决方案并且没有让我的项目工作之后，我终于在[这个页面](http://bbs.bugcode.cn/t/3115#Post59940)中找到了一点评论：

> 删除 BIN 文件夹为我做了

它也对我有用。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-06-13T15:38:56.597

我不想在我的应用程序项目中引用 EF（或手动复制任何内容），因此我将其添加到我的 EF 项目的构建后事件中：

```
cp $(TargetDir)EntityFramework.SqlServer.dll $(SolutionDir){your-main-bin-folder} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-08-18T15:02:18.500

这只发生在我的负载/单元测试项目中。令人沮丧的是，我很高兴它出现在我已经运行了 2 年的项目中。一定是某种测试运行顺序破坏了事情。我想一旦那个fi被删除它就消失了。

我发现只需声明一个使用正确值的变量就可以解决问题……我什至从不调用该方法。只需定义它。奇怪但它有效。

> ```
>  /// <summary>
>     /// So that the test runner copies dlls not directly referenced by the integration project
>     /// </summary>
>     private void referenceLibs()
>     {
>         var useless = SqlProviderServices.Instance;
>     } 
> ```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-10-12T15:06:25.657

我也有类似的问题

通过执行以下操作解决了我的问题：

[![在此处输入图像描述](../Images/3d81723def92f75d56c92b8cc2f522e0.png)](https://i.stack.imgur.com/E6g69.png)

[![在此处输入图像描述](../Images/5dd9a023608efa16ad592436858703e2.png)](https://i.stack.imgur.com/sBZpB.png)

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2018-01-06T11:51:45.000

`DBContext`我在从单元测试项目中实例化对象时遇到了同样的问题。我检查了我的单元测试项目包，发现该`EntityFramework`包没有安装，我从 Nuget 安装了它并解决了问题（我认为这是 EF 错误）。

快乐编码

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2015-10-14T13:56:26.163

将 Entityframework.dll 和 Entityframework.sqlserver.dll 添加到参考项目中解决了这个问题。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-11-18T20:42:05.897

我检查了单元测试项目中的调试输出窗口。EntityFramework.SqlServer.dll 未加载。将其添加到 bin 文件夹后，测试成功运行。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-06-03T13:08:42.503

我只是有同样的错误信息。

我有一个单独的项目用于我的数据访问。在本地运行 Web 项目（它引用了数据项目）工作得很好。但是当我将 Web 项目部署到天蓝色的程序集时： EntityFramework.SqlServer 没有被复制。我刚刚添加了对 web 项目的引用并重新部署，现在它可以工作了。

希望这对其他人有帮助

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-09-11T10:14:48.287

我正在离线学习 Contoso 大学教程，并在尝试使用 EF 创建我的第一个控制器时遇到了同样的问题。我必须使用包管理器控制台从 nuget 缓存加载 EF 并创建一个连接到我的本地 SQL Server 实例的连接字符串，我的意思是我的 EF 的 webConfig 设置可能没有像你们一样设置，但我能够通过完全删除“entityFramework”中的“providers”部分来解决我的问题

罗伯特

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-11-27T19:16:58.903

有一个简单的解决方法。打开项目中的引用，右键单击“System.Data”-> 属性。将“复制本地”更改为“真”。

问题应该得到解决。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-06-04T10:41:59.630

就我而言，当我之前安装了 SQL Server Express 2012 (x64) 时，我通过安装 SQL Server 2012 Developer Edition 解决了这个问题。似乎这为我提供了缺少的依赖项。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-01-28T05:30:49.173

通过 nuget 从项目中删除实体框架，然后将其重新添加。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-03-21T15:34:15.803

就我而言`dll`，虽然我添加了对它的引用，但没有复制它。这是因为`EntityFramework.SqlServer.dll`没有复制到您的项目中。添加该dll，它有望工作。您可以从添加数据模型的项目中找到它。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2016-04-15T18:29:15.113

除了此处所有有用的建议外，如果您使用的是 EF 6.1.3，请确保您的项目的 .net 版本为 4.5 或更高版本。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2016-07-12T11:46:15.920

我的问题是，为了捕获另一个异常，我启用了公共语言运行时 (CLR) 异常。我忘了禁用它。

我在异常设置中禁用了它。它忽略了这个异常并继续运行并自动为我（在我的情况下）创建一个数据库。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2016-09-20T03:50:20.267

确保 EntityFramework.dll、EntityFramework.SqlServer.dll 和您的提供程序的 dll（对于 SQL Server Compact，将为 EntityFramework.SqlServerCompact.dll）位于已部署的应用程序文件夹中。这对于已部署的应用程序尤其重要。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2017-11-21T09:55:09.153

我在我的 CI 构建服务器（运行 Bamboo）上遇到了完全相同的问题，它没有安装任何 Visual Studio IDE。

在不对构建/测试过程进行任何代码更改（我认为这不是好的解决方案）的情况下，最好的方法是将其复制`EntityFramework.SqlServer.dll`并粘贴到`C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE`. （你的 mstest 运行的地方）

问题解决了！

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2018-11-01T17:05:41.923

**单击参考>检查实体框架参考是否存在**

*如果不可用添加它*

点击

> 添加参考 > 添加实体框架 1)EntityFrameWork 2)EntityFrameWork.SqlServer`

# jquery - jquery隐藏标签中的文本内容，而不是标签本身

> ID：14033200
> 
> 赞同：7
> 
> 时间：2012-12-25T18:52:27.587
> 
> 标签：jquery, html, hide

我有一个使用这种 html 语法的滑块：

```
<div id="theatre">
    <a class="sliderImg" href="01.jpg" />some-text</a>
    <a class="sliderImg" href="02.jpg" />another-description</a>
    <a class="sliderImg" href="03.jpg" />whatever</a>
    <a class="sliderImg" href="04.jpg" />whatever</a>
</div> 
```

我需要做的是隐藏 a 标签的文本而不是 a 标签本身。

我得到了这个，但不起作用。

```
var imgCaptions = $("#theatre a.sliderImg").html();
$(imgCaptions).hide(); 
```

我无法添加跨度，因为我将内容用于某些 AJAX。结构必须保留。

非常感谢您的帮助。圣诞快乐！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T18:56:27.137

我建议：

```
a.sliderImg {
    color: transparent;
} 
```

您还可以使用`user-select`CSS 属性来防止选择文本：

```
a.sliderImg {
    color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
} 
```

或者，可能，使用`unselectable`元素本身的属性：

```
<a unselectable="on" class="sliderImg" href="04.jpg">whatever</a> 
```

顺便说一句，您的 HTML 格式不正确，*不应*`/`在开始标记中（仅在 void 元素的开始标记中，例如or ）。*`input``img`*

 *参考：

*   [`user-select`](http://www.w3.org/TR/2000/WD-css3-userint-20000216#user-select).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T19:11:21.730

您可以使用以下`.text`方法简单地删除文本：

```
$(".sliderImg").text(''); 
```

小提琴：http: [//jsfiddle.net/J5QME/](http://jsfiddle.net/J5QME/)

如果您需要存储文本以供以后使用，请将其设置为父锚点上的数据属性：

```
$(".sliderImg").text(function(i,v){
    return $(this).data('originalText', v), '';
}); 
```

小提琴：http: [//jsfiddle.net/J5QME/2/](http://jsfiddle.net/J5QME/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T18:56:04.420

您可以放置​​额外的标签 ex。跨越 a 内的文本并隐藏跨度 some-text

```
$('#teathre span').hide(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T19:06:57.897

你可以试试这个来隐藏文本：

**现场演示：http:** [//jsfiddle.net/yw8w2/1/](http://jsfiddle.net/yw8w2/1/)

```
$('#theatre a.sliderImg').map(function(){ $(this).text(''); }); 
```*

# android - 将点击监听器添加到标题栏图像

> ID：14033204
> 
> 赞同：6
> 
> 时间：2012-12-25T18:53:04.207
> 
> 标签：android, android-activity, titlebar

祝大家圣诞快乐，节日快乐！

我正在尝试在默认标题栏左侧显示的图像图标上设置一个侦听器，但到目前为止还没有任何运气。

这是我的 Activity 的 onCreate：

```
@Override public void onCreate(Bundle savedInstanceState) {
   requestWindowFeature(Window.FEATURE_LEFT_ICON);
   super.onCreate(savedInstanceState);
   findViewById(Window.FEATURE_LEFT_ICON).setOnClickListener(new OnClickListener() {
       @Override public void onClick(View v) {
           System.out.println("It works!");
       }
   });
} 
```

有什么建议么？我希望看不到“不可能”的答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:29:24.507

左侧图标似乎没有 id，但是对于经典标题栏，有一个可用的 id：`android.R.id.title`这是使用此 id 的示例 Activity。`requestWindowFeature(Window.FEATURE_LEFT_ICON);`无论主题如何，都应该强制使用经典标题栏。

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_LEFT_ICON);
    setContentView(R.layout.activity_main);
    getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON,R.drawable.ic_launcher);
    View v = findViewById (android.R.id.title);
    v.setClickable(true);
    v.setOnClickListener(new OnClickListener() {
        @Override public void onClick(View v) {
            Toast.makeText(MainActivity.this, "Works!", Toast.LENGTH_SHORT).show();
        }
    });
}
} 
```

基本上，它的作用是找到标题栏 ( `android.R.id.title`) 的 id，然后为其分配一个`onClickListener`。

这**不适**用于`ActionBar`s，仅适用于经典窗口标题栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T20:47:26.667

您应该使用 ActionBar。对于低于 3.0 的 Android 版本，也可以使用[ActionBarSherlock 。](http://actionbarsherlock.com/)要使图标可点击，请参阅 ActionBar API 文档（请参阅下面的链接）。这非常简单，您只需激活该行为，然后它就可以像具有特殊项目 ID 的菜单项一样工作。

*   [http://developer.android.com/guide/topics/ui/actionbar.html#Home](http://developer.android.com/guide/topics/ui/actionbar.html#Home)

# mysql - 如何将函数绑定到 mysql 以便在满足条件时自动触发该函数？

> ID：14033209
> 
> 赞同：0
> 
> 时间：2012-12-25T18:54:22.733
> 
> 标签：mysql

我想使用 mysql 绑定函数，以便以后满足条件时，函数会自动触发..

表 my_date 包含列 triggertime .triggertime 存储最后一个函数需要在大于当前时间时触发。这怎么可能实现呢？

# java - 在 Java 中将 byte[] 转换为 short[]

> ID：14033217
> 
> 赞同：6
> 
> 时间：2012-12-25T18:55:33.497
> 
> 标签：java

> **可能重复：**
> [字节数组到短数组并在java中再次返回](https://stackoverflow.com/questions/5625573/byte-array-to-short-array-and-back-again-in-java)

`encodeAudio()`Xuggler 中的方法有以下参数：

*   整数流索引*   短 [] 样本*   长时间邮票*   时间单位
使用`TargetDataLine`from`javax.sound.sampled`我可以将数据读入`byte[]`数组

```
byte[] tempBuffer = new byte[10000];
fromMic.read(tempBuffer,0,tempBuffer.length); 
```

但问题是`samples`论证需要`short[]`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T19:00:30.167

你很幸运，`byte`可以“完全转换”到`short`，所以：

```
// Grab size of the byte array, create an array of shorts of the same size
int size = byteArray.length;
short[] shortArray = new short[size];

for (int index = 0; index < size; index++)
    shortArray[index] = (short) byteArray[index]; 
```

然后使用`shortArray`.

注意：就原始类型而言，Java 总是以大端顺序处理它们，所以转换，比如说，字节`ff`将产生 short `00ff`。

# python - 在 Python 中使用正则表达式搜索字符串

> ID：14033218
> 
> 赞同：7
> 
> 时间：2012-12-25T18:55:58.567
> 
> 标签：python, regex, string, find

当我尝试使用正则表达式在其他字符串中查找字符串时，它无法按预期工作。这是一个例子：

```
import re
message = 'I really like beer, but my favourite beer is German beer.'
keywords = ['beer', 'german beer', 'german']

regex = re.compile("|".join(keywords))
regex.findall(message.lower()) 
```

结果：

```
['beer', 'beer', 'german beer'] 
```

但预期的结果是：

```
['beer', 'beer', 'german beer', 'german'] 
```

另一种方法可能是：

```
results = []
for k in keywords:
    regex = re.compile(k)
    for r in regex.findall(message.lower()):
        results.append(r)

['beer', 'beer', 'beer', 'german beer', 'german'] 
```

它像我想要的那样工作，但我认为这不是最好的方法。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T19:00:02.793

`re.findall`找不到重叠的匹配项。如果要使用正则表达式，则必须创建单独的表达式并在循环中运行它们，如第二个示例所示。

请注意，您的第二个示例也可以缩短为以下示例，尽管您是否觉得这更具可读性取决于您的喜好：

```
results = [r for k in keywords for r in re.findall(k, message.lower())] 
```

您的具体示例不需要使用正则表达式。如果您只想查找固定字符串，则应避免使用正则表达式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T19:04:34.320

`re.findall`在[http://docs.python.org/2/library/re.html中有描述](http://docs.python.org/2/library/re.html)

“返回字符串中模式的所有非重叠匹配......”

非重叠意味着对于“德国啤酒”它不会找到“德国啤酒”和“德国”，因为这些匹配是重叠的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T19:32:58.280

我的清洁器（对我而言）版本，用于您的最后一个解决方案

```
results = []
for key in keywords:
    results.extend(re.findall(key, message, re.IGNORECASE)) 
```

# json - 通过 RESTful API 上传图片的良好实践

> ID：14033219
> 
> 赞同：1
> 
> 时间：2012-12-25T18:56:02.567
> 
> 标签：json, rest, upload, amazon-s3, multipart

我在我的宁静服务中使用 Amazon S3 来上传图像。一个 iPhone 应用程序正在访问 restful 服务。我试图弄清楚上传图片的最佳方法是什么。

选项 1：使用多部分表单数据上传图像，并将 JSON 本身作为另一个多部分包含在 HTTP 请求中。

选项 2：将图像直接上传到 Amazon S3 并取回 URL。湾。使用包含图像 URL 的 JSON 发送一个安静的请求。

你会选择哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:50:14.777

我选择选项 1，因为它是一个请求。它优于 2 次单独的往返行程（在选项 2 中）。

# python - Python：使用文件a中的值来搜索另一个文件中的行

> ID：14033225
> 
> 赞同：-4
> 
> 时间：2012-12-25T18:56:45.623
> 
> 标签：python, file, search

新手问题

我有 2 个文件 文件 A：包含项目列表的文件（苹果、梨、橙子） 文件 B：包含世界上所有水果的文件（1,000,000 行）

在 unix 中，我会从文件 B grep apple 并返回所有结果

在 unix 中，我会 1\. 从文件 b >>fruitfound.txt grep apple 2.从文件 b >>fruitfound.txt grep pears 3.从文件 b >>fruitfound.txt grep oranges

我想要一个 python 脚本，它使用文件 a 和搜索文件 b 中的值，然后写出输出。注意：文件 B 会有青苹果、红苹果、黄苹果，我想将所有 3 个结果写入fruitfound.txt

最亲切的问候

康提

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:44:10.060

`grep -f $patterns $filename`正是这样做的。无需使用 python 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T00:42:56.043

要在 Python 中查找包含任何给定关键字的行，您可以使用正则表达式：

```
import re
from itertools import ifilter

def fgrep(words, lines):
    # note: allow a partial match e.g., 'b c' matches 'ab cd'
    return ifilter(re.compile("|".join(map(re.escape, words))).search, lines) 
```

要将其转换为命令行脚本：

```
import sys

def main():
    with open(sys.argv[1]) as kwfile: # read keywords from given file
        # one keyword per line
        keywords = [line.strip() for line in kwfile if line.strip()]

    if not keywords:
       sys.exit("no keywords are given")

    if len(sys.argv) > 2: # read lines to match from given file
        with open(sys.argv[2]) as file:
            sys.stdout.writelines(fgrep(keywords, file))
    else: # read lines from stdin
        sys.stdout.writelines(fgrep(keywords, sys.stdin))

main() 
```

例子：

```
$ python fgrep.py a b > fruitfound.txt 
```

有更有效的算法，例如[Ago-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)，但在我的机器上过滤数百万行只需要不到一秒钟的时间，它可能已经足够好了（`grep`快几倍）。令人惊讶[`acora`](http://pypi.python.org/pypi/acora/)的是，对于我尝试过的数据，基于 Ago-Corasick 算法的速度较慢。

# php - 使用 php 标头和包含文件加载图像？

> ID：14033232
> 
> 赞同：0
> 
> 时间：2012-12-25T18:57:31.507
> 
> 标签：php, image, gd

我一直在尝试创建一个简单的 php 脚本来将另一个 php 生成的动态 url 转换为图像，但我得到的只是一个空白页，有人知道为什么这不起作用吗？

```
<?php
include('icecast.php');
$cover = ($stream['artist']['top_albums']['0']['image']['3']);
header('Content-Type: image/jpeg');
readfile('$cover');
?> 
```

我尝试了很多不同的方法，但我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:00:49.947

好吧，至少您尝试使用的不是*变量* `$cover`而是文字字符串`'$cover'`。

它是字符串必须用引号分隔，但变量应该在没有它们的情况下访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-17T01:55:49.877

这对我有用：

> 重要的一点是您必须发送 Content-Type 标头。此外，>您必须注意不要在标签之前或之后在您的文件中包含任何额外的空格（如换行符）。
> 
> 正如评论中所建议的，您可以通过省略 ?> 标记来避免脚本末尾出现额外空白 >space 的危险：

[取自这个答案](https://stackoverflow.com/a/900228/4547995)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:02:41.453

您正在使用`'$cover'`它应该只是`$cover`

```
readfile($cover); 
```

还要确保 $cover 具有完整的文件名，带有扩展名，并添加

```
header('Content-Length: ' . filesize($cover)); 
```

也这样做：

```
header('Content-Type:image/jpeg');
header('Content-Length: ' . filesize($cover));
readfile($cover); 
```

使用两个标题，验证您的文件是否为 jpeg 类型......并确保在标题之前没有输出，绝对没有。没有回声。并且由于内容类型是图像，所以除了文件之外应该没有任何输出！！！

# wpf - WPF - 设置工具提示 MaxWidth

> ID：14033238
> 
> 赞同：20
> 
> 时间：2012-12-25T18:58:44.307
> 
> 标签：wpf, xaml, wpf-controls, tooltip

我想设置 ToolTip maxwidth 属性以正确显示长文本。另外我需要文字换行。我使用了这种风格：

```
<Style TargetType="ToolTip">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding}"  MaxWidth="400" TextWrapping='Wrap' />
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
</Style> 
```

这种工具提示样式适合我的目的。但是，对于某些具有自己的工具提示样式的控件来说，它是无效的。例如，不能出现以下按钮的工具提示。

```
<Button>
    <Button.ToolTip>
        <StackPanel>
            <TextBlock Style="{StaticResource firstText}" Text="aaaaaaaaaaaaa"/>
            <TextBlock Style="{StaticResource secondText}" Text="bbbbbbbbbbbbb"/>    
            <TextBlock Bacground="Red" Text="ccccccccccccc"/>    
        </StackPanel>
    </Button.ToolTip>
</Button> 
```

我想为**所有工具提示**设置带有文本换行的 maxwidth 属性。我能为这个问题做些什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-09-14T06:56:21.270

我避免使用模板，因为必须实现很多东西。更优雅的方式来做到这一点

```
<Style TargetType="ToolTip">
    <Style.Resources>
        <Style TargetType="ContentPresenter">
            <Style.Resources>
                <Style TargetType="TextBlock">
                    <Setter Property="TextWrapping" Value="Wrap" />
                </Style>
            </Style.Resources>
        </Style>
    </Style.Resources>
    <Setter Property="MaxWidth" Value="500" />
</Style> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-02-25T16:05:25.170

我意识到这是一个古老的问题，但似乎没有人提出最明显和最简单的解决方案来解决这个问题。因此，我想我会在这里添加它：

```
<Button>
    <Button.ToolTip>
        <ToolTip MaxWidth="400">
            <TextBlock Text="{Binding Binding}" TextWrapping="Wrap" />
        </ToolTip>
    </Button.ToolTip>
</Button> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-02T14:09:26.567

下面的 ToolTip 风格对我很有用：

```
<Style TargetType="ToolTip" x:Key="InternalToolTipStyle">
    <Setter Property="MaxWidth" Value="{Binding Path=(lib:ToolTipProperties.MaxWidth)}" />
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <ContentPresenter Content="{TemplateBinding Content}"  >
                    <ContentPresenter.Resources>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="TextWrapping" Value="Wrap" />
                        </Style>
                    </ContentPresenter.Resources>
                </ContentPresenter>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

使用此样式，以下按钮的工具提示将正确显示：

```
<Button>
<Button.ToolTip>
    <StackPanel>
        <TextBlock Style="{StaticResource firstText}" Text="aaaaaaaaaaaaa"/>
        <TextBlock Style="{StaticResource secondText}" Text="bbbbbbbbbbbbb"/>    
        <TextBlock Bacground="Red" Text="ccccccccccccc"/>    
    </StackPanel>
</Button.ToolTip> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T19:21:55.197

用这个：

```
<Window.Resources>
 <Style TargetType="ToolTip" x:Key="TT">
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding}"  MaxWidth="400" TextWrapping='Wrap' />
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter>
 </Style>
</Window.Resources>

<Button>
    <Button.ToolTip>
        <ToolTip Style="{StaticResource TT}">
  bbbbbbbbbbbbbbbbbbbdddddddddddddddddbbbmmmmmmhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh
        </ToolTip>
    </Button.ToolTip>
</Button> 
```

**编辑：**

```
<Button>
    <Button.ToolTip>
        <RichTextBox>
           <FlowDocument>
              <Paragraph>
                This is flow content and you can <Bold>edit me!</Bold>
              </Paragraph>
           </FlowDocument>
</RichTextBox>
    </Button.ToolTip>
</Button> 
```

请参阅：[RichTextBox 概述](http://msdn.microsoft.com/en-us/library/aa970779.aspx)

# php - 调试未启动

> ID：14033240
> 
> 赞同：6
> 
> 时间：2012-12-25T18:59:30.657
> 
> 标签：php, sublimetext2, lamp, xdebug, sublimetext

**更新：**

我在这方面花了太多时间，并决定放弃它并继续使用笨重的 NetBeans。

**原始问题：**

我在让 xdebug 与 sublime text 2 一起工作时遇到了一些困难。

到目前为止我所做的是安装：

1.  灯，
2.  php5-xdebug
3.  python2.6
4.  崇高的文本 2
5.  sublimex调试

如果我然后使用 sublime 打开一个 php 文件并按 shift+f8，则会弹出 xdebug 菜单，我可以从中`add/remove breakpoint`也可以`start debugging`.

一些php： ![一些php](../Images/3b5d4b9fe09633d89225b070b99aa1ea.png)

当我按下 shift+f8 时，菜单下拉： ![当我按 shift+f8 时菜单下拉](../Images/64d052cbc25baad6ef0826e77c18a9d6.png)

调试开始：

![在此处输入图像描述](../Images/02f5fdd2f8b09e79ed9942358c96bc83.png)

在那张图片中，它说：

```
Xdebug: No URL defined in project settings file 
```

Info.sublime-project 包含：

```
{
    "folders":
    [
        {
            "path": "/var/www"
        }
    ],

    "settings": {
        "xdebug": { "url": "http://localhost" }
    }
} 
```

从第三张截图可以看出，我已经开始调试，没有任何反应，没有错误，没有打开浏览器窗口，什么也没有。如果我手动导航到`localhost/info.php`，页面将正常加载。如果我手动添加`?XDEBUG_SESSION_START=sublime.xdebug`到 url 的末尾`localhost/info.php?XDEBUG_SESSION_START=sublime.xdebug`并在浏览器上点击刷新，页面会正常加载并且调试仍然没有开始。

我究竟做错了什么？

**更新：有关端口的一些信息：**

在尝试通过 sublime text 2 启动 xdebug 之前

```
oshirowanen@ubuntu:~$ netstat -antp
(Not all processes could be identified, non-owned process info
 will not be shown, you would have to be root to see it all.)
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -               
tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      -               
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      -                 
tcp        0      0 90.190.20.220:54913     90.180.80.70:443        ESTABLISHED 2439/python     
tcp        0      0 90.190.20.220:51727     190.40.210.160:443      TIME_WAIT   -               
tcp        1      0 90.190.20.220:50967     90.180.90.20:80         CLOSE_WAIT  2349/ubuntu-geoip-p
tcp6       0      0 :::80                   :::*                    LISTEN      -               
oshirowanen@ubuntu:~$ 
```

手动启动 chromium 并通过 sublime text 2 启动 xdebug 后

```
oshirowanen@ubuntu:~$ netstat -antp
(Not all processes could be identified, non-owned process info
 will not be shown, you would have to be root to see it all.)
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:17500           0.0.0.0:*               LISTEN      2241/dropbox    
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -               
tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      -               
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      -               
tcp        0      0 127.0.0.1:59424         127.0.0.1:80            ESTABLISHED 2924/chromium-brows
tcp        0      0 127.0.0.1:43123         127.0.0.1:9000          ESTABLISHED -               
tcp        0      0 127.0.0.1:9000          127.0.0.1:43123         ESTABLISHED 2903/sublime_text
tcp        0      0 90.190.20.220:40809     170.190.40.70:443       ESTABLISHED 2924/chromium-brows
tcp        0      0 90.190.20.220:54913     90.180.80.70:443        ESTABLISHED 2439/python     
tcp        0      0 90.190.20.220:43900     170.190.70.90:443       ESTABLISHED 2924/chromium-brows
tcp        0      0 90.190.20.220:35259     170.190.70.100:443      ESTABLISHED 2924/chromium-brows
tcp        0      0 127.0.0.1:59426         127.0.0.1:80            TIME_WAIT   -               
tcp        0      0 90.190.20.220:37922     170.190.70.90:443       ESTABLISHED 2924/chromium-brows
tcp        1      0 90.190.20.220:50967     90.180.90.20:80         CLOSE_WAIT  2349/ubuntu-geoip-p
tcp        0      0 90.190.20.220:40847     170.190.40.60:80        ESTABLISHED 2924/chromium-brows
tcp6       0      0 :::80                   :::*                    LISTEN      -               
tcp6       0      0 127.0.0.1:80            127.0.0.1:59423         TIME_WAIT   -               
tcp6       0      0 127.0.0.1:80            127.0.0.1:59424         ESTABLISHED -               
oshirowanen@ubuntu:~$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:19:40.550

一些技巧：

1.  检查 Xdebug 是否正在运行，检查 phpinfo 命令生成的信息。

2.  在 xdebug 配置中启用远程调试（并使用 phpinfo 命令再次验证）：

    xdebug.remote_enable=1

3.  我不使用 Sublime Text 中的 xdebug 设置。我认为没有必要。

4.  在 Sublime Text 中打开控制台。任何问题都会记录在控制台中。pulgin 主页中报告了 Ubuntu 中的一些问题。

5.  我使用浏览器扩展来激活或停用调试。在 Chrome 中查找“Xdebug Helper for Chrome”。您需要将 cookie 名称配置为“sublime.xdebug”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:10:07.373

我使用[Easy xDebug](https://addons.mozilla.org/en-us/firefox/addon/easy-xdebug/) for firefox 来启动调试会话，这很有效。您需要为 idekey 使用“sublime.xdebug”。

我想你那里有一些断点？您的屏幕截图暗示您这样做，但请确保您使用 shift+f8 菜单添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:24:02.907

您的配置有问题，它使用了错误的语法（[根据问题 #13](https://github.com/Kindari/SublimeXdebug/issues/13)）：

```
{
    "folders":
    [
        {
            "path": "/var/www"
        }
    ],

    "settings": { <<<==== problem here
        "xdebug": { "url": "http://localhost" }
    }
} 
```

相反，它应该是：

```
{
    "folders":
    [
        {
            "path": "/var/www"
        }
    ],

    "xdebug": 
    {
        "url": "http://localhost" 
    }        
} 
```

这可能也导致它无法正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T01:13:06.393

我遇到了同样的问题并在这里提交了错误报告：

[https://github.com/Kindari/SublimeXdebug/issues/58](https://github.com/Kindari/SublimeXdebug/issues/58)

但是，它可能是 XDebug 本身中与套接字相关的错误：

[http://forums.netbeans.org/viewtopic.php?p=141779#141779](http://forums.netbeans.org/viewtopic.php?p=141779#141779)

# c# - 更优雅的方式选择比特大小和伪随机比特生成

> ID：14033242
> 
> 赞同：1
> 
> 时间：2012-12-25T18:59:53.070
> 
> 标签：c#, random, binary, bit-manipulation

有没有比我在这里做的更优雅的方式来进行位大小选择和伪随机二进制位生成？实际上我需要编写一个算法，让用户控制生成的随机二进制位的位大小（最大 16 位）。这是我写的函数，但我不确定这是否是最小/最优雅的。由于这是科学需要，效率并不重要，但代码的优雅和易于理解确实很重要。那么有没有更有效/更优雅的方式来做同样的事情？

```
static string randomBit() {
    int bitSize = 0, input = 0;
    Console.Write("Input Bit Size (Maximum is 16 Bit): ");
    input = Convert.ToInt32(Console.ReadLine());
    Random choice = new Random();
    if(input == 0 || input > 16) {
        bitSize = 0;
    }
    else if(input == 1) {
        bitSize = 1;
    }
    else if(input == 2) {
        int randomChoice = choice.Next(2, 3);
        bitSize = randomChoice;
    }
    else if(input == 3) {
        int randomChoice = choice.Next(4, 7);
        bitSize = randomChoice;
    }
    else if(input == 4) {
        int randomChoice = choice.Next(8, 15);
        bitSize = randomChoice;
    }
    else if(input == 5) {
        int randomChoice = choice.Next(16, 31);
        bitSize = randomChoice;
    }
    else if(input == 6) {
        int randomChoice = choice.Next(32, 63);
        bitSize = randomChoice;
    }
    else if(input == 7) {
        int randomChoice = choice.Next(64, 127);
        bitSize = randomChoice;
    }
    else if(input == 8) {
        int randomChoice = choice.Next(128, 255);
        bitSize = randomChoice;
    }
    else if(input == 9) {
        int randomChoice = choice.Next(256, 511);
        bitSize = randomChoice;
    }
    else if(input == 10) {
        int randomChoice = choice.Next(512, 1023);
        bitSize = randomChoice;
    }
    else if(input == 11) {
        int randomChoice = choice.Next(1024, 2047);
        bitSize = randomChoice;
    }
    else if(input == 12) {
        int randomChoice = choice.Next(2047, 4095);
        bitSize = randomChoice;
    }
    else if(input == 13) {
        int randomChoice = choice.Next(4096, 8191);
        bitSize = randomChoice;
    }
    else if(input == 14) {
        int randomChoice = choice.Next(8192, 16383);
        bitSize = randomChoice;
    }
    else if(input == 15) {
        int randomChoice = choice.Next(16384, 32767);
        bitSize = randomChoice;
    }
    else if(input == 16) {
        int randomChoice = choice.Next(32768, 65535);
        bitSize = randomChoice;
    }
    string binary = Convert.ToString(bitSize, 2);
    return binary;
} 
```

同样作为第二个问题，如果我在代码询问位大小时**按 Enter 两次，它会****返回异常错误**。有没有办法绕过相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:04:39.453

首先，我真的认为你可以减少 if/else 语句的数量：

```
private static string randomBit()
{
    int bitSize = 0, input = 0;
    Console.Write("Input Bit Size (Maximum is 16 Bit): ");
    input = Convert.ToInt32(Console.ReadLine());
    Random choice = new Random();

    if (input <= 0 || input > 16)
    {
        bitSize = 0;
    }
    else if(input == 1)
    {
        bitSize = 1;
    }
    else
    {                        
        int randomChoice = choice.Next(1 << (input-1), (1 << input)-1);
        bitSize = randomChoice;
    }

    string binary = Convert.ToString(bitSize, 2);
    return binary;
} 
```

如果您对此表达式中的左移不满意：`int randomChoice = choice.Next(1 << (input-1), (1 << input)-1);`并且您对可读性更感兴趣，那么您始终可以将其替换为：

```
int randomChoice = choice.Next(Math.Pow(2, input - 1), Math.Pow(2, input) - 1); 
```

至于关于异常的问题，答案是肯定的。您遇到的问题是您没有验证`Convert.ToInt32`函数的输入。

而不是`input = Convert.ToInt32(Console.ReadLine());`你可以写：

```
do
{
   string inputString = Console.ReadLine();
   if(!Int32.TryParse(inputString, out input))     // will return false if it can't convert
   {
       Console.WriteLine("Please enter a number between 1 and 16!");
       input = 0;
   }
}while(input == 0); 
```

# macos - Mac OSX Mountain Lion 背景在哪里？

> ID：14033246
> 
> 赞同：1
> 
> 时间：2012-12-25T19:00:44.850
> 
> 标签：macos, graphics, background, osx-mountain-lion

我和我的团队正在为 Mac OSX 做一个项目，但我们需要知道 OSX 中所有背景图像的位置。Dock、顶栏、启动板、通知中心和聚光灯等背景存储在哪里？

谢谢你们的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T19:17:25.537

查看：

```
/Library/Desktop Pictures/
/System/Library/CoreServices/Dock.app/Contents/Resources/
/System/Library/CoreServices/DefaultDesktop.jpg 
```

# c# - 如何在asp .net网格视图中制作超链接

> ID：14033249
> 
> 赞同：-2
> 
> 时间：2012-12-25T19:01:15.523
> 
> 标签：c#, gridview, hyperlink

我在 SQL Server 中有一个表，`X,Y,Z` 其中包含我在 ASP.Net 的 gridview 中检索到的列。

现在我希望第一个字段（示例；X）成为一个超链接，因为我单击以打开一个新页面。我怎么能用代码做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:13:56.500

将[HyperLinkField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.aspx)添加到 gridview 并将其 DataNavigateUrlFields 属性设置为“X”，将 Target 属性设置为“_blank”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T06:48:22.457

```
<Columns>
<!-- first column-->
<asp:TemplateField>
    <ItemTemplate>
        <asp:HyperLink runat="server" NavigateUrl='<%# string.Format("~/Details.aspx?Id={0}&Name={1}&Country={2}",
            HttpUtility.UrlEncode(Eval("Id").ToString()), HttpUtility.UrlEncode(Eval("Name").ToString()), HttpUtility.UrlEncode(Eval("Country").ToString())) %>'
            Text="View Details" />
    </ItemTemplate>
</asp:TemplateField>

<!-- second column-->
<asp:BoundField DataField="Country" HeaderText="Country" ItemStyle-Width="150" />       

<!-- third column-->
<asp:BoundField DataField="Town" HeaderText="Country" ItemStyle-Width="150" /> 

<!-- fourth column as hyperlink -->
<asp:BoundField DataField="Name" HeaderText="Name" ItemStyle-Width="150" /> 
</Columns> 
```

# parsing - 左递归消除

> ID：14033250
> 
> 赞同：1
> 
> 时间：2012-12-25T19:01:27.050
> 
> 标签：parsing, compiler-construction, context-free-grammar, computation-theory

我有这个语法

```
S->S+S|SS|(S)|S*|a 
```

我想知道如何从这个语法中消除左递归，因为这`S+S`真的很令人困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:46:35.113

让我们看看我们是否可以简化给定的语法。

```
S -> S*|S+S|SS|(S)|a 
```

我们可以写成；

```
S -> S*|SQ|SS|B|a
Q -> +S
B -> (S) 
```

现在，您可以在熟悉的领域消除左递归。

```
S  ->  BS'|aS'
S' ->  *S'|QS'|SS'|e
Q  ->  +S
B  ->  (S) 
```

请注意，e 是 epsilon/lambda。

我们已经移除了左递归，所以我们不再需要 Q 和 B。

```
S  ->  (S)S'|aS'
S' ->  *S'|+SS'|SS'|e 
```

[在处理左递归消除时，您会发现这很有用](http://www.d.umn.edu/~hudson/5641/l11m.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:13:09.457

~~My answer using theory from [this reference](http://www.cs.virginia.edu/~cs415/reading/RemovingLeftRecursion.pdf)~~

## How to Eliminate Left recursion in Context-Free-Grammar.

```
S -->  S+S | SS | S*    |        a | (S)
      --------------            -------   
      Sα form                   β form    
      Left-Recursive-Rules      Non-Left-Recursive-Rules 
```

We can write like

> S ---> Sα[1] | Sα[2] | Sα[3] | β[1] | β[2]

Rules to convert in equivalent Non-recursive grammar:

> S ---> β[1] | β[2]
> Z ---> α[1] | α[2] | α[3]
> Z ---> α[1]Z | α[2]Z | α[3]Z
> S ---> β[1]Z | β[2]Z

Where

> α[1] = +S
> α[2] = S
> α[3] = *

**And** `β`-productions not start starts with `S`:

> β[1] = a
> β[2] = (S)

**Grammar without left-recursion:**

Non- left recursive Productions S --> β[n]

```
S -->  a | (S) 
```

Introduce new variable `Z` with following productions: Z ---> α[n] and Z --> α[n]Z

```
Z --> +S | S | * 

and 

Z --> +SZ | SZ | *Z 
```

And new `S` productions: S --> β[n]Z

```
S -->  aZ | (S)Z 
```

* * *

Second form (answer)

Productions `Z --> +S | S | *` and `Z --> +SZ | SZ | *Z` can be combine as `Z --> +SZ | SZ | *Z| ^` where `^` is null-symbol.

`Z --> ^` use to remove `Z` from production rules.

So **second answer**:

`S --> aZ | (S)Z` **and** `Z --> +SZ | SZ | *Z| ^`

# ember.js - ember-data 仅在应用入口点访问数据时按预期工作

> ID：14033252
> 
> 赞同：1
> 
> 时间：2012-12-25T19:02:17.350
> 
> 标签：ember.js, ember-data

我对 ember-data 有一个奇怪的问题，在一个入口点上它从服务器加载数据（我启用了登录服务器以查看发生了什么），但在另一个入口点上，然后将路由更改为与第一个选项，ember-data 根本不访问服务器。

我简直无法理解为什么会这样。

在我的应用程序中，如果我将浏览器指向 /posts，则会从服务器加载数据，一切正常。但是如果我指向 /settings，然后按照链接更改到 posts.index 的路由，则 ember-data 不会访问服务器。

另外，如果我的入口点是 /posts/new 并且我尝试创建一个新帖子，我会收到一个错误： `http://localhost:3000/api/unknown%20mixin)s 404 (Not Found)`

可能是什么问题？

编辑：如果我通过调用`findAll()`控制器的 init 函数来加载数据，则在首次实例化控制器时加载数据并且一切都很好..但我仍然不明白这种奇怪的行为。这是一个错误吗？

EDIT2：我创建了一个 github 项目来显示这个问题 - [https://github.com/bsphere/ember-data-test](https://github.com/bsphere/ember-data-test)

```
App.Router = Ember.Router.extend({
enableLogging:  true,
root: Ember.Route.extend({
    showposts: Ember.Route.transitionTo('posts.index'),
    showSettings: Ember.Route.transitionTo('settings.index'),

    index: Ember.Route.extend({
        route: '/',
        connectOutlets: function(router) {
            router.transitionTo('posts.index');
        }
    }),
    settings: Ember.Route.extend({
        route: '/settings',
        connectOutlets: function(router) {
            router.get('applicationController').connectOutlet('navigation', 'navigation');
        },
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet('content', 'settings');
                router.set('navigationController.selected', 'settings');
            }
        })
    }),
    posts: Ember.Route.extend({
        newpost: Ember.Route.transitionTo('root.posts.new'),
        editpost: Ember.Route.transitionTo('root.posts.edit'),

        route: '/posts',
        connectOutlets: function(router) {
            router.get('applicationController').connectOutlet('navigation', 'navigation');
        },
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.set('navigationController.selected', 'posts');
                router.get('applicationController').connectOutlet('content', 'posts',
                    App.store.findAll(App.Post));
            }
        }),
        new: Ember.Route.extend({
            route: '/new',
            connectOutlets: function(router) {
                router.set('navigationController.selected', '');
                router.get('applicationController').connectOutlet('content', 'post',
                    App.store.createRecord(App.Post));
                router.set('postController.isEditing', false);
            },
            cancel: function(router) {
                router.transitionTo('index');
            },
            didCreate: function(router) {
                router.transitionTo('index');
            }
        }),
        edit: Ember.Route.extend({
            route: '/:id/edit',
            connectOutlets: function(router, post) {
                router.set('navigationController.selected', '');
                router.get('applicationController').connectOutlet('content', 'post',
                    App.store.find(App.Post, post.get('id')));
                router.set('postController.isEditing', true);
            },
            deserialize: function(router, context) {
                return App.store.find(App.Post, context.id)
            },
            serialize: function(router, post) {
                return {
                    id: post.get('id')
                }
            },
            cancel: function(router) {
                router.transitionTo('index');
            },
            didUpdate: function(router, post) {
                router.transitionTo('index');
            }
        })
    })
})
}); 
```

# mysql - MySql Explain 忽略特定查询中的唯一索引

> ID：14033253
> 
> 赞同：0
> 
> 时间：2012-12-25T19:02:21.903
> 
> 标签：mysql, select, indexing, explain

我第一次开始深入研究索引，并第一次从用户表开始分析我们的数据库。我搜索了 SO 以找到一个类似的问题，但我猜无法很好地构建我的搜索。

我正在经历一个特定的概念，这第一次观察让我想知道 - 这些解释的区别[区别：第一个查询正在使用`'a%'`，而第二个查询正在使用`'ab%'`]

[表中的总行数`users`= **9193** ]：

```
1) explain select * from users where email_address like 'a%'; 
```

![在此处输入图像描述](../Images/41bd9689e244ce6da9c1d0fbe759e522.png)

（实际上匹配列 = **1240**）

```
2) explain select * from users where email_address like 'ab%'; 
```

![在此处输入图像描述](../Images/4e5261d47dbfde066f4d8d98e07cd34c.png)

（实际上匹配列 = **109**）

索引如下所示： ![在此处输入图像描述](../Images/fe56b198f351007ae3fd862a7628be75.png)

**我的问题：** 为什么在第一个查询中完全忽略了索引？mySql 是否认为不使用索引是一个更好的主意`case 1`？如果是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:39:19.917

这不是您问题的直接答案，但我仍然想指出（以防您已经不知道）：

尝试：

```
explain select email_address from users where email_address like 'a%';
explain select email_address from users where email_address like 'ab%'; 
```

MySQL 现在将在上述两个查询中使用索引，因为感兴趣的列可以直接从索引中获得。

可能在您执行“选择 *”的情况下，索引访问成本更高，因为优化器必须遍历索引记录，找到行 ID，然后返回表以检索其他列值。

但是在上面的查询中，您只执行“选择电子邮件地址”，优化器知道所有所需的信息都可以直接从索引中获得，因此无论 30% 规则如何，它都会使用索引。

各位高手，如有错误请指正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T01:21:19.223

如果基于 mysql 收集的关于值分布的统计信息的概率高于总行数的某个比例（通常为总行数的 1/11），则 mysql 认为简单地扫描整个表以顺序读取磁盘页面更有效，而不是使用索引以随机顺序在磁盘页面周围跳转。

你可以试试这个查询，它可能使用索引：

```
where email_address between 'a' and 'az' 
```

尽管进行全面扫描实际上可能更快。

# eclipse - 如何在基于 Eclipse Maven 的项目中添加缺少的 jar

> ID：14033255
> 
> 赞同：0
> 
> 时间：2012-12-25T19:02:42.137
> 
> 标签：eclipse, maven, maven-plugin, m2eclipse, m2e

我是 Eclipse 的新手。我正在使用 m2e 插件（版本 1.2.0）。

我已经导入了 maven 项目，由于缺少一些 jar，它显示构建路径错误。如何将这些 jar 添加到构建路径。我是否需要手动下载并添加到 Eclipse 构建中。

我正在学习 pom.xml，请帮助我。

![Maven项目中的构建错误](../Images/68e202eb2de6f8b145f3e34b0be46c35.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:39:36.197

您应该将缺少的 jar 的依赖项添加到 pom.xml 文件中。一旦你添加它们，eclipse 会自动为你下载这些 jar 文件。您可以在 google 上轻松找到 maven 依赖项。

# java - 使用 htmlunit 登录 vbulletin 论坛

> ID：14033257
> 
> 赞同：0
> 
> 时间：2012-12-25T19:02:56.643
> 
> 标签：java, htmlunit

我正在尝试使用 htmlunit 登录 vbulletins 论坛

我可以连接到我的论坛并设置我的用户名和密码，但是当单击登录按钮时，我无法登录我的用户

这是我的代码：

```
try{

        final WebClient webClient = new WebClient();

        webClient.getOptions().setJavaScriptEnabled(false);
        webClient.getOptions().setCssEnabled(false);        

        final HtmlPage page1 =(HtmlPage) webClient.getPage("http://mysite.com/forum.php");

        final HtmlForm form1 = (HtmlForm) page1.getElementById("navbar_loginform"); 

        final HtmlSubmitInput button= form1.getInputByValue("login"); 
        final HtmlTextInput username = form1.getElementById("navbar_username");

        final HtmlTextInput password = form1.getElementById("navbar_password_hint");

        username.setValueAttribute(txtusername.getText());
        password.setValueAttribute(String.valueOf(txtpasswd.getPassword()));

       final HtmlPage page2 =button.click();

        webClient.closeAllWindows();

    }
    catch(Exception x)
    {
        JOptionPane.showMessageDialog(null, "can not connect");
    } 
```

当我得到 page2 结果的 url 就像“http://mysite.com/login.php?s=36401731df153421f06a8497b3b859df&do=login”

请帮我解决我的问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:42:21.047

我在下面的标签中设置了这些值，我可以登录到我的用户：

```
input type="hidden" name="vb_login_md5password"
input type="hidden" name="vb_login_md5password_utf" 
```

# python - 选择足球队并输出足球队的位置

> ID：14033262
> 
> 赞同：0
> 
> 时间：2012-12-25T19:03:24.303
> 
> 标签：python, html, forms, flask

我正在创建一个表单，其中有人选择一个团队，然后团队的位置应该在 div 中输出。

这是我到目前为止所拥有的。如何从正确的团队（用户选择的团队）获取位置？

```
<select id="chooseTeam" name="chooseTeam" data-placeholder="Select Team">
    <option></option>
    {% for team in teams %}
        <option>{{team.name}}</option>
    {% endfor %}
</select>

<div>{{team.location}}</div> 
```

```
class Team(db.Model):
    __tablename__ = 'Team'
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String())
    location = db.Column(db.String()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:23:06.380

基本上，您必须编写一个 JavaScript 函数来检查用户是否选择了特定团队。如果已选择一个，则向服务器发出 AJAX 请求，其中包括所选的`{{team.name}}`. 在服务器上，编写一个函数来检查数据库中的哪个`Team`实例具有该选定名称。一旦找到它，您就可以查询该特定团队的位置并将其作为 XML 或 JSON 格式的 HTTP 响应返回。在函数的成功处理程序中`$.ajax()`，您可以检索位置并使用 jQuery 选择器将其添加到您的 DIV。

# javascript - 通过单击切换背景颜色更改

> ID：14033265
> 
> 赞同：1
> 
> 时间：2012-12-25T19:04:06.287
> 
> 标签：javascript, jquery, jsfiddle

我正在快速做一个 jsFiddle 来了解更多关于 jQuery API 的信息，但一个小提琴没有按我预期的方式工作。

jsfiddle：http: [//jsfiddle.net/7j5Fc/](http://jsfiddle.net/7j5Fc/)

HTML：

```
<div></div> 
```

CSS：

```
div {
background:red;
height:100px;
width:150px;
} 
```

JS：

```
$('div').click(
    function(){
        $(this).toggle(function(){
            $(this).style.background="blue";
        }
        //function(){
        //this.style.background = "orange";
        //}
        );
    }
); 
```

奇怪的是，当我单击它时，div 消失了，如果我取消注释注释行，草图根本不起作用。任何建议或信息表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T19:09:47.087

您不需要`toggle()`在`click()`方法中包装，只需使用：

```
$('div').toggle(
    function(){
        $(this).css('background-color', 'blue');
    },
    function(){
        $(this).css('background-color', 'red');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/N4eCr/)。

此外，您正在混合使用 jQuery 和 JavaScript：

jQuery`$(this)`对象没有`style`方法；需要使用该`css()`方法；这两种方法不可互换，因此您可以使用该`css()`方法（如上），或坚持使用纯 JavaScript：

```
this.style.backgroundColor = 'blue'; 
```

例如，或者从 jQuery 切换到纯 JavaScript：

```
$(this)[0].style.backgroundColor = 'blue'; 
```

或者：

```
$(this).get(0).style.backgroundColor = 'blue'; 
```

这两种方法本质上都是从允许使用本机 JavaScript 方法的 jQuery 对象中检索普通 DOM 节点/对象，但是，这意味着您不能在这些节点/对象上使用 jQuery 方法) （当然，除非您将它们重新包装在 jQuery 对象中）。

当然，如果你只是想使用 jQuery 来处理事件委托，你可以使用该`click()`方法，再加上一个三元：

```
$('div').click(function(){
    this.style.backgroundColor = this.style.backgroundColor == 'blue' ? 'red' : 'blue';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/N4eCr/1/)。

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`css()`](http://api.jquery.com/css/).
*   [`get()`](http://api.jquery.com/get/).
*   [`toggle()`](http://api.jquery.com/toggle/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:18:13.083

您只是使用了错误的切换。有两个`toggle`s：

[切换事件](http://api.jquery.com/toggle-event/)

和

[切换效果](http://api.jquery.com/toggle/)

在您的代码中，执行了切换效果，它只是显示/隐藏一个元素。这就是为什么单击它时它会消失的原因。

# nsstring - iPhone：如何将 nsstring 转换为 nsdate

> ID：14033266
> 
> 赞同：0
> 
> 时间：2012-12-25T19:04:06.333
> 
> 标签：nsstring, nsdate

我想要这个字符串到 nsdate

“2012-12-25T18:58:57.649Z”

我知道如何将 nsstring 转换为 nsdate，但我找不到正确的格式。我设置了以下格式，但它不起作用。请建议

```
[NSDateFormatter setDefaultFormatterBehavior:NSDateFormatterBehavior10_4];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    //[NSDateFormatter setDefaultFormatterBehavior:NSDateFormatterBehaviorDefault];
    [dateFormatter setDateFormat:@"yyyy-MM-ddTHH:mm:ss"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:18:02.410

希望这有帮助

```
- (NSDate *)dateFromISO8601:(NSString *)str{
   if(![str isKindOfClass:NSString.class]){
      return nil;
   }

   static NSDateFormatter* sISO8601 = nil;

   if (!sISO8601) {
      sISO8601 = [[NSDateFormatter alloc] init];
      [sISO8601 setTimeStyle:NSDateFormatterFullStyle];
      [sISO8601 setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.S"];
      [sISO8601 setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
  }
  if ([str hasSuffix:@"Z"]) {
      str = [str substringToIndex:(str.length-1)];
  }

  NSDate *d = [sISO8601 dateFromString:str];
  return d;
 } 
```

# c++ - 在 C/C++ 中按位指定浮点常量值

> ID：14033267
> 
> 赞同：1
> 
> 时间：2012-12-25T19:04:11.667
> 
> 标签：c++, c, floating-point, constants

这就是我想要做的：

```
//Let Bin2Float be a magic macro that packages specified bit pattern into float as a constant

const float MyInf = Bin2Float(01111111,10000000,00000000,00000000); 
```

我们都知道如何将位模式打包成整数（“二进制常量”hacks），这个神奇原型宏的输入与对应的 32 位整数二进制常量宏的输入相同。将这些位打包成整数常量不是问题。但是，在使用指针和联合双关语之后，我意识到将整数类型双关语转换为浮点数会导致许多问题（一些在 MSVC 方面，一些在 gcc 方面）。所以这里是要求列表：

1.  必须在 gcc（C 模式）、g++、MSVC 下编译（即使我必须使用条件编译来做两个单独的版本）
2.  必须为 C 和 C++ 编译
3.  在生成的汇编代码中，必须编译成硬编码常量，而不是动态计算
4.  不得使用 memcpy
5.  不得使用静态或全局变量
6.  不得使用基于指针的类型双关语以避免严格别名问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:39:01.177

首先，很少需要以这种方式指定浮点常量。对于无穷大，使用`INFINITY`. 对于 NaN，请使用`NAN`或`nanf(string)`。这些定义在`<math.h>`. 编译器很可能会编译`INFINITY`到`NAN`某种汇编语言常量（可以在只读数据部分，可以在指令的直接字段中形成，等等）。但是，除了编译器实现者之外，这无法保证，因为 C 标准不保证这一点。`nanf`可能会导致函数调用，尽管如果字符串是常量，编译器可以自由地将其优化为常量。对于有限数，使用十六进制浮点常量（例如，“0x3.4p5”）。唯一不能以这种方式完全指定的 IEEE 754 浮点对象（最后一位）是 NaN。`nan`C 标准并未完全指定and函数，因此`nanf`除非实现提供了有效位，否则您无法完全控制有效位。

我不熟悉你提到的二进制常量黑客。假设您有一个`Bin2Unsigned`提供 的宏`unsigned int`，那么您可以使用它：

```
const float MyInf = (union { unsigned u; float f; }) { Bin2Unsigned(…) } .f; 
```

也就是说，不管你信不信，标准的 C 语法和语义直到位被重新解释为浮点数。显然，位的解释取决于实现。但是，复合文字和通过联合重新解释是由 C 标准指定的。

我使用 gcc 版本 4.2.1（Apple Inc. build 5666）进行了测试，目标是 x86_64，否则使用 -O3 和默认选项，生成的汇编代码使用常量`.long 2139095040`.

# c++ - 在 C++ 中设计具有类型安全性的事件调度器、事件源、事件观察器

> ID：14033271
> 
> 赞同：1
> 
> 时间：2012-12-25T19:04:47.847
> 
> 标签：c++

在整理 C++（非 C++11）仿真框架的设计选项时需要一些帮助。用户创建一个“事件调度器”并注册（使用“观察者”）对“事件”发生的兴趣。调度程序内部包含“事件源”，用于检测事件激活并管理对观察者的通知。观察者、事件和事件源类之间存在 1:1:1 映射。

我想扩展系统

1.  仅在调度程序中注册任何事件观察者子集的能力（请求不受支持的通知将失败）
2.  事件源的替代实现（例如，每个事件一个或多个观察者）
3.  扩展事件类型（即继承）。Watcher 和 Source 可以像处理基本类型一样处理子类，尽管功能有所减少。
4.  用户定义的事件、事件源和事件观察者。对于全新的事件

我考虑过使用“事件类型标识符”（字符串或 Base.Derived 表示法），它可以工作但感觉不正确（例如，类型安全依赖于运行时整数，继承受到限制，类型转换太多......）希望对代码结构和机制提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:27:22.850

这正是使用的正确情况`dynamic_cast`。它只需要在一个地方。

所有事件都从单个基类继承，所有事件处理程序都从（不同的）单个基类继承。这使得所有事件源和调度程序统一。事件由基类中的处理程序检查和过滤。

[这](http://pastebin.com/ZBBcVLUd)是一个粗略的 10 分钟草图，描绘了整体结构的样子。草图中没有事件源，因为我并不完全清楚它们应该是什么样子。我只是从`main()`.

# mongodb - MongoDB 唯一索引不允许覆盖

> ID：14033272
> 
> 赞同：4
> 
> 时间：2012-12-25T19:04:50.437
> 
> 标签：mongodb, spring-data-mongodb

我在我的 Mongo 文档中的一个字段上创建了一个 unique=true 的索引。这按预期工作 - 它通过覆盖现有条目来禁止重复。

我想禁止覆盖，而是在尝试插入重复项时得到错误或异常。有没有办法做到这一点？我将如何使用 Spring Data MongoDB 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:35:39.820

通过将 WriteConcern=SAFE 添加到 MongoTemplate 配置，我能够在违反“unique=true”约束时获得异常。我处理异常并禁止覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T01:13:54.853

索引注释有一个参数 dropDups=true ，它会给你你想要的。

```
Indexed (unique=true, dropDups=true) 
```

[http://static.springsource.org/spring-data/data-mongodb/docs/1.1.0.RELEASE/api/org/springframework/data/mongodb/core/index/Indexed.html](http://static.springsource.org/spring-data/data-mongodb/docs/1.1.0.RELEASE/api/org/springframework/data/mongodb/core/index/Indexed.html)

# php - PHP：Preg_match（新挑战）

> ID：14033274
> 
> 赞同：1
> 
> 时间：2012-12-25T19:05:14.117
> 
> 标签：php, preg-match

我的 html 看起来像这样（它的 javascript 用于 Flash 播放器）：

```
var flashvars =
            {
                'autoplay'          : autoplay,
                'autoreplay'        : 'false',
                'start'             : '',
                'hideLinkPane'      : 'true',
                'disable_sharebar'  : 'true',
                'disablePauseroll'  : disablePauseroll,
                'video_url'         : encodeURIComponent('WQFuk9Py2VC3jsCrPDJ69xtsj33MiXAElBzQw3TSHqOOyDYL0vRJELrB1hTTW3NG0A54kE2FVueuHMkQd8JveYb92eV+dYH4IUrrvJdP5Of9HGi+5i6GT11nL0dAv/ecyP4sB0jM8rVZzyS8imLarvPUvPuFPvvB8nwYXZ2ZKon4IPjmtC8SPftaw0PSuZKMg735hLCraeAE3lMQbRwiY7yMHKmUHDALG1Ky+HBDiK20vAGEIMwzPwKZmhbBXRGiHzEiXiRk4JgaVyp6N66EALao7VOE7UTzJLs='),
                'encrypted'         : 'true',
                'video_title'       : "some cool vids title here",
                'embed_js'          : "",
                'prerollRepeat'     : "false"
            }; 
```

如何使用 preg_match 提取 video_title 的值，使其变为：

回声 $videoTitle;

将输出：一些很酷的视频标题在这里

对于 video_url 将输出：

WQFuk9Py2VC3jsCrPDJ69xtsj33MiXAElBzQw3TSHqOOyDYL0vRJELrB1hTTW3NG0A54kE2FVueuHMkQd8JveYb92eV + dYH4IUrrvJdP5Of9HGi + 5i6GT11nL0dAv / ecyP4sB0jM8rVZzyS8imLarvPUvPuFPvvB8nwYXZ2ZKon4IPjmtC8SPftaw0PSuZKMg735hLCraeAE3lMQbRwiY7yMHKmUHDALG1Ky + HBDiK20vAGEIMwzPwKZmhbBXRGiHzEiXiRk4JgaVyp6N66EALao7VOE7UTzJLs =

我的 php 看起来像这样：

```
$pagex = $this->page;
$patternx = '/("video_title":")(.*?)(")/i';
if(preg_match($patternx,$pagex,$arx)){  
    $key = $arx[2];
}               

$page = $this->page;
$pattern = '/("video_url":")(.*?)(")/i';
if(preg_match($pattern,$page,$ar)){ 
$link = $ar[2];
} 
```

它不起作用。它什么也没显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:15:20.343

```
$string = "'disablePauseroll'  : disablePauseroll,
            'video_url'         : encodeURIComponent('WQFuk9Py2VC3jsCrPDJ69xtsj33MiXAElBzQw3TSHqOOyDYL0vRJELrB1hTTW3NG0A54kE2FVueuHMkQd8JveYb92eV+dYH4IUrrvJdP5Of9HGi+5i6GT11nL0dAv/ecyP4sB0jM8rVZzyS8imLarvPUvPuFPvvB8nwYXZ2ZKon4IPjmtC8SPftaw0PSuZKMg735hLCraeAE3lMQbRwiY7yMHKmUHDALG1Ky+HBDiK20vAGEIMwzPwKZmhbBXRGiHzEiXiRk4JgaVyp6N66EALao7VOE7UTzJLs='),
            'encrypted'         : 'true',
            'video_title'       : \"some cool vids title here\",";

preg_match("/encodeURIComponent\('([^']+)/", $string, $match);

echo $match[1]; // URL

preg_match('/video_title[^"]+"([^"]+)/', $string, $match);

echo $match[1]; // Title 
```

这将提取`'`引号内的文本字符串`encodeURIComponent()`，第二个将提取引号内的`"`文本`video_title`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:16:29.277

对于 video_title（允许`"`在标题中转义）：

```
'video_title'\s*:\s*"(.*?)*(?<!\\)" 
```

在 PHP 中：

```
$pattern='\'video_title\'\s*:\s*"(.*?)*(?<!\\)"'; 
```

对于网址：

```
'video_url'\s*:\s*encodeURIComponent\('([^']*)'\) 
```

和：

```
$pattern='\'video_url\'\s*:\s*encodeURIComponent\(\'([^\']*)\'\)'; 
```

# c++ - OpenMP - OpenMP 'for' 语句中的索引变量必须具有有符号整数类型

> ID：14033280
> 
> 赞同：5
> 
> 时间：2012-12-25T19:06:19.643
> 
> 标签：c++, loops, for-loop, openmp, multicore

我是 OpenMP 的新手。我正在尝试将多个内核用于 for 循环，但出现此编译错误：

“错误 C3016：'x'：OpenMP 'for' 语句中的索引变量必须具有有符号整数类型”。

我知道 OpenMP 2.0 是 Microsoft Visual Studio 2010（我正在使用的）的标准版本，由于某种原因不支持无符号数据类型，但我不相信我在此循环中使用了任何无符号数据类型。

这是我的代码的样子：

变量声明：

```
struct Vertex
{
    float x, y;
};

FractalGenerator::Vertex FractalGenerator::_fracStart;
FractalGenerator::Vertex FractalGenerator::_fracEnd;
float FractalGenerator::_pointPrecision = 0.008f;
float FractalGenerator::_scaleFactor = 1; 
```

对于循环：

```
float _fracStep =  _pointPrecision / _scaleFactor;

#pragma omp parallel for
for (float x = _fracStart.x; x < _fracEnd.x; x += _fracStep)
{
    for (float y = _fracStart.y; y < _fracEnd.y; y += _fracStep)
    { 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T19:13:32.747

看起来 OpenMP 不支持非整数类型作为`for`循环中的索引。你有`float x`, 而 while`float`是算术类型，它不是整数类型。

整数类型是以下之一：`bool`、`char`、`char16_t`、`char32_t`、`wchar_t`以及任何有符号和无符号整数类型（`char`、`short`、`int`、`long`和`long long`）。

您需要转换您的算法以将其中之一用于`for`循环索引。这可能有效：

```
int iEnd = (_fracEnd.x - _fracStart.x) / _fracStep;
int jEnd = (_fracEnd.y - _fracStart.y) / _fracStep;
for (int i = 0; i < iEnd; i++)
{
  float x = _fracStart.x + i * _fracStep;
  for (int j = 0; j < jEnd; j++)
  {
    float y = _fracStart.y + j * _fracStep;
    // ...
  }
} 
```

# javascript - 将 GitHub 中的 JavaScript 文件包含到 HTML 页面中

> ID：14033281
> 
> 赞同：60
> 
> 时间：2012-12-25T19:06:21.647
> 
> 标签：javascript, github

> # 注意！
> 
> **[**在此更改**](https://github.com/blog/1482)之后**，您不能直接从 Github 包含 Github 脚本**。**
> 
>  **早在 2011 年，我们就将标头添加`X-Content-Type-Options: nosniff`到原始 URL 响应中，作为打击盗链的第一步。这具有强制浏览器根据`Content-Type`标头处理内容的效果。这意味着当我们设置`Content-Type: text/plain`文件的原始视图时，浏览器将拒绝将该文件视为 JavaScript 或 CSS。
> 
> 但是还有其他选择。**检查[我对这个问题的回答](https://stackoverflow.com/a/20311329/1420197)**。**

 *** * *

我正在尝试将 GitHub 中的 JavaScript 文件包含到本地 HTML 文件中以进行测试（例如在 Internet 上找到的图像：）`<img src="http://...">`。

我想要这样的东西：

```
<script src="https://github.com/[username]/[repository]/blob/master/public/[fileName].js"></script> 
```

问题是这行不通。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-25T19:11:04.947

您将能够使用与此类似的 URL 来执行此操作：

```
https://rawgit.com/h5bp/html5-boilerplate/master/src/js/plugins.js 
```

请注意，这与单击 GitHub 中的“原始”按钮不同；该按钮还会为您提供文件的干净版本，但发送时会带有错误的标题。

* * *

一句警告；该文件未**从 GitHub 提供**。它正在通过`rawgit.com`域重定向。如[https://rawgit.com](https://rawgit.com)所述：

> 嘿！rawgit.com 只是为了好玩，与 GitHub 没有任何关联。

请记住，该域的所有者现在可以控制流量，并且能够在他们认为合适的时候对其进行操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-08-09T15:10:31.400

启用存储库的 GitHub 页面后，使用以下链接：

```
<script src="https://[username].github.io/[repository]/[filename].js"></script> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-16T15:53:09.487

> rawgit 看起来要在 2019 年底关闭，

使用正确的 Content-Type 标头交付内容的一些选项。

1.  [https://raw.githack.com/](https://raw.githack.com/) , [https://combinatronics.com=](https://combinatronics.com=) >exact 替代方案，但它不能用于从客户端 javascript 获取，因为此处启用了 cors。
2.  jsdelivr => 用于传递 javascript 文件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-06T08:56:38.300

**您可以在GITHUB PAGES**中包含托管的**CSS**、**HTML**和**JS**文件

 **只需单击 github 存储库上的设置，然后在此选项卡中向下滚动到 GitHub Pages 并使用下拉菜单进行选择

然后 HOray 您现在可以实时访问它

> 这是返回 text/plain mime 类型的 raw

[https://raw.githubusercontent.com/bdalina54/bdalina54.github.io/master/assets/js/terebra/acrior.js](https://raw.githubusercontent.com/bdalina54/bdalina54.github.io/master/assets/js/terebra/acrior.js)

```
<script src="https://raw.githubusercontent.com/bdalina54/bdalina54.github.io/master/assets/js/terebra/acrior.js"></script> 
```

> 这是现场版

[https://bdalina54.github.io/assets/js/terebra/acrior.js](https://bdalina54.github.io/assets/js/terebra/acrior.js)

```
<script src="https://bdalina54.github.io/assets/js/terebra/acrior.js"></script> 
```

你可以查看我的截图我是怎么做的

[https://prnt.sc/obbrpn](https://prnt.sc/obbrpn)

[https://prnt.sc/obbt69](https://prnt.sc/obbt69)

[https://prnt.sc/obbskb](https://prnt.sc/obbskb)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-25T19:13:45.567

这应该有效：

```
<script src="https://raw.github.com/[username]/[repository]/[branch]/[filename].js"></script> 
```

以下是如何重定向到 github 中所需的地址：

![在此处输入图像描述](../Images/3194eae633b5d1b421ec41b63bfc77c2.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-26T07:32:15.713

更新答案：

我在 2014 年给出的旧答案已经停止工作，但是您可以使用 3rd 方 CDN 直接从 github 提供 js。Jsdelivr 是由 CloudFlare 和 Fastly 提供支持的 CDN 之一。

例子：

```
<script src="https://cdn.jsdelivr.net/gh/<user>/<repo>/<filename>.js"> 
```

或者使用他们的工具进行转换：[https ://www.jsdelivr.com/github](https://www.jsdelivr.com/github)

旧答案：

这甚至适用于 github 最近的更改：

```
<script>
  $.getScript("https://raw.github.com/username/repo/master/src/script.js");
</script> 
```

PS。需要 jQuery。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-25T19:15:00.210

尝试这样的事情：

```
<html>
<head>
    <script src="https://raw.github.com/e0ne/BlogSamples/master/ModalDialog/AdvancedPopup/jquery.min.js"></script>
</head> 
```

它对我有用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-10T10:38:34.553

**2021 年工作解决方案**：使用[组合数学](https://combinatronics.com/)。

有关示例，请参见此[答案](https://stackoverflow.com/questions/20311271/hotlink-resources-like-javascript-files-directly-from-github/20311329#20311329)。在这里快速复制一个：

> `raw.github.com`唯一的变化是`combinatronics.com`：
> 
> ```
> <script
>   type="text/javascript"
>   src="https://combinatronics.com/username/repo/master/src/file.js"
> ></script> 
> ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-08T03:13:50.070

你可以使用[GitHub 提供的 API](https://stackoverflow.com/a/68033714/9935654)获取所有的上下文，然后使用类似于 的方法`eval`强制写入。

*我不建议你在任何官方产品中使用这种方式，但是作为测试或者写一些练习脚本，得心应手，可以省去很多重复代码*

* * *

[Docs GitHub API 获取内容](https://docs.github.com/en/rest/reference/repos#get-repository-content)

*   [蟒蛇解决方案](https://stackoverflow.com/a/68033714/9935654)
*   javascript解决方案（见下面的脚本`GithubExplorer`）

## 脚本和示例

我创建了一个组件，允许您将文件拖到输入。

> [https://api.github.com/repos/CarsonSlovoka/excel/contents/app/urls/static/js/pkg/input/ask-file.js **?** ref **=** **d625296** _ **_** _](https://github.com/CarsonSlovoka/excel/blob/d62529601dc0e34177417cecf9d38e74c32788a7/app/urls/static/js/pkg/input/ask-file.js)

 ****下面将向您展示如何加载内容并将其嵌入以便您可以使用它。

```
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>
<!--  Above CSS are not must be given, I want it more pretty, that all. -->

<input data-com="ask-file" placeholder="select or drag the file to attach" multiple>    

<script type="module">
  function GithubExplorer() {

    /**
     * @param {string} owner Username
     * @param {string} repo repository name
     * @param {string} path filepath
     * @param {string} branch  branch name or SHA1
     * @param {string} token The token is used for project private. generate new token  https://github.com/settings/tokens
     * */
    this.Query = async (owner, repo, path, {branch = "master", token = undefined}) => {
      // https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options
      const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`
      const headers = {
        accept: "application/vnd.github.v3.raw",
      }
      if (token) {
        headers["authorization"] = `token ${token}`
      }
      const response = await fetch(url, {
        method: 'GET',
        headers,
      })
      if (!response.ok) {
        const errMsg = await response.text()
        throw Error(`${response.statusText} (${response.status}) | ${errMsg} `)
      }
      return await response.blob()
    }
  }

  (async () => {
    const github = new GithubExplorer()
    const blobAskFileScript = await github.Query("CarsonSlovoka", "excel", "app/urls/static/js/pkg/input/ask-file.js", {branch: "d625296"})
    let askFileScriptText = await blobAskFileScript.text()
    askFileScriptText = askFileScriptText.replaceAll("export class AskInputFile", "class AskInputFile")
    document.querySelector(`head`).append(
      document.createRange().createContextualFragment(`
      <script>${askFileScriptText}<\/script>`)
    )
    AskInputFile.BuildAll() // This function is from the script.
  })()
</script>
```

* * *

下面是一个简单的脚本，您知道在加载内容后该怎么做。

```
const body = document.querySelector(`body`)
const range = document.createRange()
const content = `<script>console.log("hello world")<\/script>`
const frag = range.createContextualFragment(content)
body.append(frag)
```********

# java - 更改图像的 HSB 值时，BufferedImage 不保持透明度

> ID：14033285
> 
> 赞同：0
> 
> 时间：2012-12-25T19:06:48.897
> 
> 标签：java, image, transparency, bufferedimage, hsb

我正在开发一个简单的图像程序，用户可以在其中更改图像的 HSB 值。但是，当我更改图像的 HSB 值并转换回 RGB 时，它似乎失去了它的透明度或 alpha 值（它在透明度所在的地方变黑）。这是我下面的内容（我已将相关部分放在一起）：

```
public static BufferedImage getEnhancedImagesHSB(BufferedImage image, float[] hsbOrg)
{

  int height = image.getHeight();
  int width = image.getWidth();

  float[] hsb = new float[]{0,0,0,0};
  int[] originalPixels = image.getRGB(0,0, width, height, null, 0, width);
  int[] enhancedImagePixels = image.getRGB(0,0, width, height, null, 0, width);

  for (int i = 0; i < originalPixels.length; i++)
  {
    Color c = new Color( originalPixels[i]);
    int red =c.getRed();
    int green = c.getGreen();
    int blue = c.getBlue();

    hsb = Color.RGBtoHSB(red, green, blue, hsb);

    hsb[ 3 ] = c.getAlpha() / 255f;

     hsb[0] = (float)(hsb[0] +( hsbOrg[0]/360.0));//hue

    hsb[1] *=  (hsbOrg[1]/100);
      if(hsb[1] > 1.0)
          hsb[1] = (float)0.9;

    hsb[2] *=  (hsbOrg[2]/100);
      if(hsb[2] > 1.0) 
          {hsb[2] = (float)0.9;}

    enhancedImagePixels[i] = Color.HSBtoRGB(hsb[0], hsb[1], hsb[2]);
  }

  BufferedImage newImage = new BufferedImage(width, height,    BufferedImage.TYPE_INT_ARGB  );  
  newImage.setRGB(0, 0, width, height, enhancedImagePixels, 0, width);

  return newImage;
} 
```

根据文档 getRGB()，setRGB() 使用默认的 RGB 颜色模型 (TYPE_INT_ARGB)，因此应该保留 alpha 值。但是更改图像的 HSB 值会导致新的缓冲图像在透明度应为黑色的地方具有黑色。如何编辑图像 HSB 值，然后创建新图像而不会丢失图像透明度？

编辑：下面是应用了一些随机色相、饱和度和亮度前后的图像。如您所见，图像失去了透明度。 ![在此处输入图像描述](../Images/099ef4ae619345cc7d6483418b9a1fbd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:30:53.977

```
Color c2 = Color.HSBtoRGB(hsb[0], hsb[1], hsb[2]);
enhancedImagePixels[i] = new Color(c2.getRed(), c2.getGreen(), c2.getBlue(),
        c.getAlpha()); 
```

这是丑陋的。hsb[3] (alpha) 似乎没有转换。使用 a`image.getAlphaRaster()`可能是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:53:40.373

感谢 Joop Eggen 为我指明了正确的方向。我直接将调整后的色调、饱和度、亮度和 alpha 值写入图像光栅（使用 setPixel()）。下面是一篇很棒的文章，讨论了这个主题。

[文章。](http://www.lac.inpe.br/JIPCookbook/6520-howto-chromakey.jsp)

# url - 将非www重定向到www的最佳方法？

> ID：14033302
> 
> 赞同：0
> 
> 时间：2012-12-25T19:09:58.677
> 
> 标签：url, redirect, dns, http-status-code-301, no-www

将我的非 www url 重定向到我网站中的 www url 的最佳方法是什么。

我认为他们现在正在通过 301 重定向进行重定向，但发送到我的非 www 的流量没有被谷歌分析正确跟踪。所以我猜它没有正确配置。

希望有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:13:02.543

可以使用 Apache 重写引擎和 htaccess 文件来完成对 www 的非 www。在您的公共 html 目录中创建一个 .htaccess 文件，其中包含以下内容..

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.youraddress.com$ [NC]
RewriteRule ^(.*)$ http://www.youraddress.com/$1 [R=301,L] 
```

# php - 将 div 中的内容居中。无法到达中心

> ID：14033304
> 
> 赞同：1
> 
> 时间：2012-12-25T19:10:46.697
> 
> 标签：php, css, html, center

我在一个站点中有以下代码，但无法将所有内容集中在主 div （rightBarItems）中：

```
<div class="rightBarItems">
<?php
echo "<div class='similarTitle'>YOU MAY ALSO LIKE</div>";
while ($row3 = $result3->fetch())
{
echo "<div class='similarItems'>";
echo "<a href='items_descr.php?itemId=".$row3[id_item]."'><img class='similarImage' src='images/{$row3[thumb1]}.jpg'></img>";
echo "<div class='similarItemsText'>".$row3[name]."</div></div>";
}
?> 
```

然后，这是我的CSS：

```
 .similarTitle {
    font-family:"Century Gothic","Trebuchet MS",Helvetica,Arial,sans-serif;
    font-size:15px;
    text-transform:uppercase;
    color:#3E3E3E;  
    }
.rightBarItems
{
margin: 0 auto;
width: 168px;
background: #F3EFE2;
padding: 10px;
float: right;
text-align: center; 
height: 300px;
}
    .similarItems { 
    float: left;
    text-align:center;
    margin: 0 auto;
    padding: 5px;
     }
    .similarItemsText { 
    padding-right: 11px;
    margin: 0 auto;
    font-family: verdana,Helvetica,Arial,sans-serif;
    font-size: 11px;
    color: #666;
     }
     #similarImage {
     margin: 0 auto;

     border: 1px solid gray;
     float: left;
     } 
```

并非一切都集中...有什么帮助吗？谢谢！！* 添加一些我忘记放的额外 CSS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:18:59.390

采用：

```
text-align:center; 
```

对于所有这些 CSS 类：`rightBarItems`, `similarTitle`, `similarItemsText`, `similarImage`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:17:06.643

在 CSS 中试试这个

```
.rightBarItems{  text-align:center ; } 
```

或者

```
.rightBarItems > div { margin-left:auto ; margin-right:auto; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:49:45.943

`float:right`从 rightBarItems div 中删除样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T19:29:02.573

好吧，首先，每个类都有不同的填充值，这样首先会阻止它们对齐。

如果您可以在文本之间留一个段落空间，那么`align=center`应该使用段落标签而不是修复整个 CSS 代码。

```
<p align="center"> Centered Text </p> 
```

# c++ - 是否可以在 C/C++ 中声明全局二维数组？

> ID：14033305
> 
> 赞同：2
> 
> 时间：2012-12-25T19:10:50.783
> 
> 标签：c++, c, arrays, multidimensional-array, variable-length-array

当我尝试像这样声明一个`global`二维**数组**时`C++`：

```
int maxX = 10;
int maxZ = 10;
SDL_Rect mapX[maxX][maxZ]; 
```

我收到一条错误消息
`error: variable-size type declared outside of any function`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T19:38:57.650

（乍一看，它在我看来是“C 和 C++ 问题之间的差异”。不过我可能会弄错。）

由于您使用非常量值作为数组大小，因此您正试图声明一个可变长度数组 (VLA)。C++ 根本不支持 VLA，而 C 仅支持*本地*VLA。后者正是编译器在该错误消息中告诉您的内容。（而且我相信这个错误消息来自 C 编译器，因为 C++ 编译器会给你一个完全不同的错误。）

因此，严格来说，您不能在 C 或 C++ 中声明这样的数组。虽然 C 语言支持 VLA，但它们仍然必须是本地的。不允许在 C 中声明具有静态存储持续时间的 VLA。

在 C++ 中，所有数组都必须具有固定的预先确定的编译时大小。这意味着数组大小必须由编译时常量指定。您使用了非常量值，这就是导致错误的原因。

换句话说，在 C 和 C++ 中，在为具有静态存储持续时间的数组（包括所谓的“全局”数组）指定大小时，都需要使用*常量表达式。*

在 C++ 中，为了使您的大小保持不变，您必须使用`const`

```
const int maxX = 10;
const int maxZ = 10; 
```

在 C 中这是行不通的，因为在 C中，`const`对象在某种意义上并不是真正的常量，它们不会形成*常量表达式*。在 C 中你必须使用

```
#define maxX 10
#define maxZ 10 
```

或者

```
enum {
  maxX = 10,
  maxZ = 10
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T19:28:48.550

在 C++ 中，您不能使用变量来定义数组的大小，因为编译器需要在编译时知道在哪里分配数组的内存以及它需要多少内存。声明`maxX`和`maxZ`as`int`使它们成为变量，因此不适合数组维度。但是，如果您将它们声明为`const int`，那么它们将是常量，并且编译器将知道这些值将在您的程序执行过程中被固定，并且允许使用它们来定义数组维度。

因此，这不起作用：

```
int maxX = 10;
int maxZ = 10;
SDL_Rect mapX[maxX][maxZ]; // Not allowed 
```

但这很好：

```
const int maxX = 10;
const int maxZ = 10;
SDL_Rect mapX[maxX][maxZ]; // Allowed 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T19:18:33.607

```
static const int maxX = 10;
static const int maxZ = 10;
SDL_Rect mapX[maxX][maxZ]; 
```

对我来说很好。

* * *

## 笔记

通常，使用全局变量、原始数组或全局原始数组通常不是一个好习惯。显然，我没有足够的上下文来评论这里是否是正确的选择。

* * *

## 历史记录

在现代常量之前，枚举或`#define`常量以使它们在这种情况下正常工作是很常见的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T19:23:53.280

而不是 C 样式的数组，我建议使用`std::vector`：

```
std::vector< std::vector<SDL_Rect> > mapX; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T19:18:21.760

我不认为这是使用 SDL_rect 的正确方法。

语法应该像

```
SDL_Rect rect = {0,0,10,10} 
```

因此，您可以执行以下操作；

```
int maxX = 10;
int maxZ = 10;
SDL_Rect rect = {0,0,maxX,maxZ} 
```

# apache-chainsaw - 如何根据以下chainsaw-config.xml 文件让Apache Chainsaw 运行？

> ID：14033309
> 
> 赞同：2
> 
> 时间：2012-12-25T19:11:22.743
> 
> 标签：apache-chainsaw

我有 Apache 链锯 V.2：以下是我想使用 Apache 链锯监控的 java 项目中的 XML 文件。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration >
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="true">

<plugin name="XMLSocketReceiver" class="org.apache.log4j.net.XMLSocketReceiver">
    <param name="decoder" value="org.apache.log4j.xml.UtilLoggingXMLDecoder"/>
    <param name="Port" value="4000"/>
    <param name="threshold" value="ALL"/>
</plugin>

<root>
  <priority value="debug"/>
</root>
</log4j:configuration> 
```

据我了解，您使用电锯选项连接？例如，当我说“文件”->“加载 Rmeote Log4J 文件”时，我会看到这个弹出窗口： ![在此处输入图像描述](../Images/e5e6f312cc6029fbef9fb897a08ce60d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:00:01.337

看起来您正在使用 Chainsaw 的最新开发人员快照，是吗？如果没有，请在此处获取：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

您选择的选项允许您从 URL（http 等） 读取 java.util.logging XML 格式的**日志文件。**

由于您想通过套接字从 java.util.logging 配置发送事件，您应该改用 File、Load Chainsaw 配置选项，选择“使用 Chainsaw 配置”并浏览到您在上面粘贴的 Chainsaw XML 配置文件XMLSocketReceiver 定义。

# environment-variables - 有人可以解释一下 Bash Shell 中“set”的奇怪结果吗？

> ID：14033313
> 
> 赞同：2
> 
> 时间：2012-12-25T19:12:22.017
> 
> 标签：environment-variables

当我在我的 Linux Fedora 12 设置的 Bash 终端窗口中键入命令“set”时，我得到了预期的 105 行环境变量，然后是“_ImageMagick”行，然后是 9170 行程序代码，开头为：

```
{ 
    local prev;
    prev=${COMP_WORDS[COMP_CWORD-1]};
    case "$prev" in 
        -channel)
            COMPREPLY=($( compgen -W 'Red Green Blue Opacity \
            Matte Cyan Magenta Yellow Black' -- "$cur" ));
        return 0 
```

...并以：

```
set_prefix () 
{ 
    [ -z ${prefix:-} ] || prefix=${cur%/*}/;
    [ -r ${prefix:-}CVS/Entries ] || prefix=""
} 
```

谁能解释一下这是怎么回事，好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T19:18:19.287

set 命令不仅列出了 shell 变量，还列出了 shell 函数。如果只需要变量，请使用 env。

# sqlite - SQLite 连接选择来自同一个表的两列

> ID：14033317
> 
> 赞同：3
> 
> 时间：2012-12-25T19:12:52.413
> 
> 标签：sqlite

我有一个带有列的表“位置”：

> 编号 | session_id | 关键字 ID | 位置

以及其中的一些行：

*   session_id = 1 的 10 行
*   和 session_id = 2 的 10 个。

作为查询的结果，我需要一个这样的表：

> 编号 | 关键字 ID | 位置1 | 位置2

其中，“position1”是具有 session_id = 1 值的列，“position2”是具有 session_id = 2 值的列。

结果集应包含 10 条记录。

对不起，我的英语不好。

数据示例：

```
id  | session_id | keyword_id | position
1   | 1          | 1          | 2
2   | 1          | 2          | 3
3   | 1          | 3          | 0
4   | 1          | 4          | 18
5   | 2          | 5          | 9
6   | 2          | 1          | 0
7   | 2          | 2          | 14
8   | 2          | 3          | 2
9   | 2          | 4          | 8
10  | 2          | 5          | 19 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:15:45.173

假设您希望将两个会话中具有相同 id 的职位组合起来，那么以下查询应该可以解决问题：

```
SELECT T1.keyword_id
     , T1.position as Position1
     , T2.position as Position2
  FROM positions T1
       INNER JOIN positions T2
               ON T1.keyword_id = T2.keyword_id  -- this will match positions by [keyword_id]
              AND T1.session_id = 1 
              AND T2.session_id = 2 
```

# r - 在 T-SQL 中实现 GAM

> ID：14033319
> 
> 赞同：-2
> 
> 时间：2012-12-25T19:13:03.897
> 
> 标签：r, mgcv

我使用 R 构建我的所有模型，但利用 T-SQL 对所有数据集进行评分，因为我评分的数据集通常是 20+ 百万个观察值。我试图弄清楚如何从`mgcv`包中获取 GAM 对象并在 T-SQL 中对其进行编码，就像我做逻辑和线性回归模型一样。对于给定的 gam 对象，我相信我需要知道的事情是每个预测器使用了哪种类型的平滑，每个样条曲线的结是什么等。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T01:46:13.367

我还没有看到一种从 GAM 中提取模型的方法，这种方法可以很容易地转移到 SQL 中。这些模型具有可能难以提取的曲率的局部评估。它们在每个点都可以是一个单独的模型。我想知道您是否可以使用该软件包中的 predict.gam 工具从多维网格中记录矩阵，然后进行样条插值。

我使用 rms/Hmisc 包工具从“cph”和“lrm”模型中提取函数。“rms”工具（特别是函数）可以从复杂的模型中提取，如使用该操作`Function`构建的双向交叉样条项。`%ia%`我在使用超过 3 个自由度的 rcs 项时遇到了一些困难（估计），有时在某些情况下需要限制节点的位置以保持数值稳定性。

# android-layout - 如何修改相对布局中控件的ID？

> ID：14033323
> 
> 赞同：1
> 
> 时间：2012-12-25T19:13:33.667
> 
> 标签：android-layout

我是 Android 新手并使用相对布局。现在我正在尝试更改控件的 ID，但是一旦我更改了 ID，其他控件就会重新定位，因为它们彼此相对。他们有什么方法可以在不重新定位控件的情况下更改控件的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T04:26:14.740

因为相对布局中的每个对象都是根据对象 ID 排列的。一旦您更改了其中一个对象 ID，您还需要在另一侧更改其对象 ID。如果不是，布局将非常混乱，需要重新排列。

避免这种情况的最佳方法是在继续之前声明每个对象 ID。

我的建议是您一一更改对象 ID。将对象 ID 的所有字段更改为最新。

```
 <TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView2"
    android:layout_below="@+id/login_email"
    android:layout_marginTop="46dp"
    android:text="@string/password_text" />

<EditText
    android:id="@+id/login_password"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView3"
    android:layout_alignBottom="@+id/textView3"
    android:layout_alignRight="@+id/login_email"
    android:layout_toRightOf="@+id/textView3"
    android:ems="10"
    android:password="true"
    android:singleLine="true" />

<Button
    android:id="@+id/register_button"
    android:layout_width="100dip"
    android:layout_height="40dip"
    android:layout_alignRight="@+id/login_password"
    android:layout_below="@+id/login_password"
    android:text="@string/signup_text" /> 
```

例如，根据上面的代码，一旦您将`TextView`id 从更改`@+id/textView3`为`@+id/password_text`. `@+id/textView3`您需要在包含to的那些对象中一一更改`@+id/password_text`。哪个在

```
 <EditText
    android:layout_alignBaseline="@+id/textView3"
    android:layout_alignBottom="@+id/textView3" 
```

顺便在您的问题中尝试标记 Android。更多的人会以这种方式注意到你的问题。

# php - 随机页面生成，不包括 php 中已生成的选项

> ID：14033325
> 
> 赞同：3
> 
> 时间：2012-12-25T19:14:10.150
> 
> 标签：php, mysql, random, options

**我想要实现的是制作每次从 MySQL DB 生成不同内容的网页。但是当我使用 rand() 函数时，一些选项可以重复。所以我想做的是使用动态数组“异常”制作rand（）函数，每次生成网页内容时都会更新，所以每个选项只显示给用户一次..**

假设我有 5 个不同的选项 1,2,3,4,5

当 rand() 函数下次选择**3**时，将没有机会得到**3**。

```
function randWithout($from, $to, array $exceptions) {
sort($exceptions); 
$number = rand($from, $to - count($exceptions));
foreach ($exceptions as $exception) {
    if ($number >= $exception) {
        $number++; 
    } else  {
        break;
    }
}

    return $number;
}

    $exceptions = array("3","4");
    $random = randWithout(1, $num_rows, $exceptions); 
```

这就是我想要的，但我希望数组“$exceptions”每次都更新......

有没有办法通过使用会话或其他选项来做到这一点？我不想使用另一个 MySQL 表.. 我希望它快速简单

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:19:14.447

使用会话。会话用于数据持久性。像这样启动你的 php 文件：

```
<?php session_start();
//your code 
```

将您的异常保存在会话变量中：

```
$_SESSION['exceptions']='exceptions Array'; 
```

每次用户访问页面时，都会将其添加到会话中。

假设您想在其中添加“5”。

她的更新代码

```
<?php session_start();
function randWithout($from, $to) {
global $exceptions;
sort($exceptions); 
$number = rand($from, $to - count($exceptions));
foreach ($exceptions as $exception) {
    if ($number >= $exception) {
        $number++; 
    } else  {
        break;
    }
}

    return $number;
}

if(isset($_SEEION['exceptions'])){
$exceptions =$_SESSION['exceptions'];
}

$random = randWithout(1, $num_rows);
$exceptions[]=$random;
$_SESSION['exceptions']=$exceptions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:41:25.750

这个一般性问题之前已经回答过。请参阅[如何生成唯一随机数列表？](https://crypto.stackexchange.com/questions/1379/how-to-generate-a-list-of-unique-random-numbers/1390#1390). 为每个可能的页面分配一个编号，然后使用适当的方法选择一个。

# python - 从两级深度中选择数据

> ID：14033326
> 
> 赞同：0
> 
> 时间：2012-12-25T19:14:21.873
> 
> 标签：python, django

这是我的模型设计：

```
class Group(models.Model):
    name  = models.CharField(max_length=30)
    ...

class User(models.Model):
    name              = models.CharField(max_length=50)
    ...
    group             = models.ForeignKey(Group)

class Photo(models.Model):
    title                = models.CharField(max_length=100)
    ...
    user                 = models.ForeignKey(User) 
```

**如何获得所有组的列表，在每个组下属于该组的用户的 5 张随机照片？**

我试过：

```
g = Group.objects.all()

for group in g:
    r = Photo.objects.filter(user.group=group).order_by('?')[:5] 
```

那就是给：

```
Django Version: 1.4.3
Exception Type: SyntaxError
Exception Value:    
keyword can't be an expression (views.py, line 37)
Exception Location: /PATH/python2.7/site-packages/django/utils/importlib.py in import_module, line 35
Python Executable:  /PATH/python
Python Version: 2.7.3 
```

但即使我的代码有效，我也不认为这是理想的方式，因为它会产生太多的查询。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:18:54.760

问题是您不能将`user.groups`其用作函数的关键字参数`.filter(…)`。

相反，使用`user__groups=group`跨越用户 -> 组关系：

```
Photo.objects.filter(user__group=group).order_by('?')[:5] 
```

相关文档：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

不幸的是，摆脱 for 循环相当棘手，因为它需要从[查询](https://stackoverflow.com/q/2129693/71522)[中查询前 N 行`GROUP BY`](https://stackoverflow.com/q/2129693/71522)……所以除非你有一堆组，否则 Python for 循环可能是最直接的方法来做到这一点。

现在，也就是说，如果性能很重要，您可能需要想出一个更智能的解决方案，因为[排序`RANDOM()`也很慢](http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/)......</p>

# makefile - 如何强制生成仅用于递归的作业

> ID：14033327
> 
> 赞同：2
> 
> 时间：2012-12-25T19:14:31.417
> 
> 标签：makefile, qmake

我正在开发一个基于 Qt 的大型项目，即使在 6 核机器上编译也需要几个小时。

这样做的原因是，当我`make`只运行一个内核编译源代码时：其他内核保持空闲状态。

解决方案是使用我机器的所有 6 个内核执行`make`选项`-j`（类似于`make -j6`）。

这样做的问题是`make`不要在递归中产生。

例如：

我有 4 个模块，A、B、C 和 D： - D 依赖于 A、B 和 C。 - B 依赖于 A。 - C 仅依赖于系统库。- A 仅依赖于系统库。

该`qmake`应用程序为上述每个模块生成了一个 Makefile，并为编译所有模块生成了一个 Makefile。

当我运行时`make -j6`，这 6 个作业开始编译所有模块，而不是一一编译。这种行为是有问题的，因为当必须将模块 D 链接到其他模块时，这些模块可能还没有准备好，从而引发`not found`错误。

是否可以通过`make`选项更改此行为？这可能是软件工程的问题（模块没有很好地投影）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:48:18.520

听起来您在递归 make 调用之间缺少依赖关系。您还没有向我们展示调用递归 make 的顶级 makefile，但我猜它看起来像这样：

```
all: A B C D

A B C D:
    $(MAKE) -C $@ 
```

您可以通过在递归 make 之间添加必要的依赖项来解决此问题：

```
all: A B C D

A B C D:
    $(MAKE) -C $@

B: A

D: A B C 
```

这种策略将为您提供正确的并行构建，尽管以牺牲一些性能为代价——有很多工作*可以*在这些子构建之间安全地并行化，而仅仅为了一个或每个确实必须序列化的两个命令。更好的解决方案是使用非递归 make，这需要对你的 makefile 进行更严格的重构，或者使用[Electric Make](http://www.electric-cloud.com/eade)，它可以为你解决这个问题，而不需要你更改 makefile（甚至不需要添加额外的依赖项）。我已经在我的博客上写了关于[Electric Make 如何修复递归 make](http://blog.melski.net/2012/09/04/fixing-recursive-make/)的文章。

*（免责声明：我是 Electric Make 的架构师）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T22:12:47.470

Try building with [makepp](http://makepp.sourceforge.net/). That will unravel the recursion (see [Recursive Make Considered Harmful](http://miller.emu.id.au/pmiller/books/rmch/)) by piping the sub-make's targets back to the main process, as though the makefiles had been cleanly designed from the outset.

Then it will do its normal dependency analysis, not abstractly on a directory level, but by drilling down to the real per-file dependencies across your whole directory tree. So it can parallelize the maximum that's safely possible.

Actually I don't know why cmake generates makefiles... All they do is call cmake to do everything behind make's back. So much so, that makepp has some special handling for cmake to avoid endless recursion, for dependencies that make oversees. Now qmake is not exactly cmake, and I'd be delighted to hear if it's near enough to work!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T03:05:01.850

我终于发现了如何使用`qmake`.

它再简单不过了：只需添加`CONFIG += ordered`到`.pro`文件中，一切都会正常工作。有关此标志的更多信息，请[参见 qmake 变量参考](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#config)。

请注意，它仅适用于`subdirs`项目模板，但这不是问题，因为并行编译仅在不同二进制文件之间存在依赖关系时才会出现问题。

例子：

```
# ABC.pro

TEMPLATE = subdirs

CONFIG += ordered

SUBDIRS += \
    A \
    B \
    C 
```

# ruby-on-rails - 使用 Mongo 运行“bootstrap:themed”时出现 Twitter Bootstrap 错误

> ID：14033329
> 
> 赞同：3
> 
> 时间：2012-12-25T19:14:37.747
> 
> 标签：ruby-on-rails, mongodb, twitter-bootstrap, twitter-bootstrap-rails

当我尝试`rails g bootstrap:themed Associations`在终端中运行时会发生这种情况：

```
C:/Users/ruby/.pik/rubies/Ruby-193-p327/lib/ruby/gems/1.9.1/gems/twitter-bootstrap-rails-2.1.9/lib/generators/bootstrap/themed/themed_generator.rb:87:in `block in retrieve_columns': undefined method `columns' for Association:Class (NoMethodError) 
```

它似乎无法正常工作，我尝试了很多方法，到处搜索，从未成功。我正在使用Mongo。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T03:09:56.740

我刚刚得到完全相同的错误。我创建了两个相同的项目——一个有 mongoid，一个没有。我只收到关于 mongoid 项目的错误。

找到了似乎可以解决问题的解决方法：

删除文件中对 ActiveRecord（第 87 行附近）的引用：

```
/home/ubuntu/.rvm/gems/ruby-1.9.3-p327/bundler/gems/twitter-bootstrap-rails-b8b7eb22614a/lib/generators/bootstrap/themed/themed_generator.rb 
```

我变了 ...

```
 def retrieve_columns
    if defined?(ActiveRecord)
      rescue_block ActiveRecord::StatementInvalid do
        @model_name.constantize.columns
      end
    else
      rescue_block do
        @model_name.constantize.fields.map {|c| c[1] }
      end
    end
  end 
```

对此...

```
 def retrieve_columns
      rescue_block do
        @model_name.constantize.fields.map {|c| c[1] }
      end
  end 
```

为了让视图正常工作，我需要确保我的模型类有一个 created_at 字段不是 nil（或者编辑生成的视图）。

希望这可以帮助。

PS：哇......似乎你已经在 Windows 上运行了 twitter-bootstrap-rails - 我不知道这是可能的！

# opengl - 导入 3d 模型 opengl

> ID：14033341
> 
> 赞同：0
> 
> 时间：2012-12-25T19:16:49.007
> 
> 标签：opengl, 3d, models

我想写我自己的进口商，这几乎是我写的第一个。我想导入一个包含动画的 3d 文件。问题是哪个更容易？我想导入像 3ds Max 和 blender 这样的程序可以导出到的 smt，但我不确定哪个更容易（我不在乎它是否需要很长时间，但我只是希望它可以理解）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:28:47.023

我认为您可以轻松找到许多代码片段来源，让您开始使用任何一种格式。例如，下面是一小段 C++ 代码，可让您开始将 3DS 加载到 OpenGL 格式中：

[http://www.codersource.net/MFC/OpenGL/Loading3DfilesfromOpenGLOpenGLTutorial7.aspx](http://www.codersource.net/MFC/OpenGL/Loading3DfilesfromOpenGLOpenGLTutorial7.aspx)

您的大部分工作是将文件格式解码为适当的 C++ 和 OpenGL 结构。Blender 有一个很好的文件格式聚合器：

[http://wiki.blender.org/index.php/Dev:Ref/Resources/File_Formats](http://wiki.blender.org/index.php/Dev:Ref/Resources/File_Formats)

我没有使用这两种格式，因此无法就哪种格式更容易提供意见。

# r - 按数值变量重新排序因子

> ID：14033342
> 
> 赞同：4
> 
> 时间：2012-12-25T19:16:51.393
> 
> 标签：r, ggplot2

在使用 ggplot2 绘图并尝试根据 data.frame 中的数字变量对因子重新排序时，我似乎总是遇到这个问题。

```
structure(list(Team = structure(1:32, .Label = c("ARI", "ATL", 
"BAL", "BUF", "CAR", "CHI", "CIN", "CLE", "DAL", "DEN", "DET", 
"GB", "HOU", "IND", "JAC", "KC", "MIA", "MIN", "NE", "NO", "NYG", 
"NYJ", "OAK", "PHI", "PIT", "SD", "SEA", "SF", "STL", "TB", "TEN", 
"WAS"), class = "factor"), Fans = c(49L, 145L, 175L, 75L, 104L, 
167L, 101L, 147L, 157L, 304L, 112L, 338L, 200L, 118L, 37L, 60L, 
65L, 225L, 371L, 97L, 163L, 87L, 84L, 102L, 111L, 85L, 422L, 
311L, 63L, 56L, 49L, 271L)), .Names = c("Team", "Fans"), row.names = c(NA, 
-32L), class = "data.frame") 
```

这不会按粉丝数对球队重新排序：

```
ggplot(total.fans, aes(x=reorder(Team, Fans), y=Fans)) + geom_bar() 
```

而且这个转换调用也不会改变数据：

```
transform(total.fans, variable=reorder(Team, -Fans)) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T19:24:16.923

它适用于 ggplot2 0.9.3，尽管我收到警告：我认为你想要

```
ggplot(total.fans, aes(x=reorder(Team, Fans),y=Fans)) + 
   geom_bar(stat="identity") 
```

![在此处输入图像描述](../Images/6f46dedd5488964e9834c7ead403a084.png)

（发布而不是评论，所以我可以展示情节......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T19:29:22.890

`ggplot()`您也可以使用函数在调用之外重新排序您的因子`factor()`，然后使用`ggplot()`.

```
total.fans$Team <- factor(total.fans$Team , levels = total.fans[order(total.fans$Fans), 1])
ggplot(total.fans, aes(x=Team, y=Fans)) + geom_bar(stat="identity") 
```

# mysql - Mysql 在 if 语句中触发语法

> ID：14033344
> 
> 赞同：-1
> 
> 时间：2012-12-25T19:16:58.680
> 
> 标签：mysql, database, triggers

我今天写了自己的触发器，但是当我在 mysql 上输入它时，它给了我语法错误。这是以下代码中的我的触发器定义；

```
CREATE DEFINER = CURRENT_USER TRIGGER `Customer_Car_Trigger` AFTER INSERT ON `CUSTOMERS`
FOR EACH ROW
BEGIN
SET @CountOfCar = (SELECT COUNT(ID) FROM `CARS`,`CUSTOMERS` WHERE `CARS`.`CustomerID` = `CUSTOMERS`.`ID`)
IF @CountOfCar>0 THEN
    UPDATE `CUSTOMERS` SET `NumberOfCars`=+1 WHERE `CUSTOMERS`.`ID`=NEW.`ID`
END IF
END; 
```

当我将此代码放入 phpmyadmin 时，它给了我：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 'IF @CountOfCar>0 THEN UPDATE `CUSTOMERS`SET `NumberOfCars`=+1 WHERE 'CUSTOMER'附近使用正确的语法

我对 IF 语句尝试了许多不同的方法。我做错了吗？我没有显示任何语法错误。为什么 phpmyadmin 给我这个错误？与 IF-ELSE 语句中的可验证性是否不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:19:47.453

您忘记了一些`;`并在无法使用的 SQL 中迭代 1`+=1`

```
delimiter |
CREATE DEFINER = CURRENT_USER TRIGGER `Customer_Car_Trigger` AFTER INSERT ON `CUSTOMERS`
FOR EACH ROW
BEGIN
   SET @CountOfCar = (SELECT COUNT(ID) FROM `CARS`,`CUSTOMERS` WHERE `CARS`.`CustomerID` = `CUSTOMERS`.`ID`);
   IF @CountOfCar>0 THEN
      UPDATE `CUSTOMERS` SET `NumberOfCars`= `NumberOfCars`+1 WHERE `CUSTOMERS`.`ID`=NEW.`ID`;
   END IF;
END;
|
delimiter ; 
```

# c - Malloc 和 Void 指针

> ID：14033351
> 
> 赞同：7
> 
> 时间：2012-12-25T19:17:47.877
> 
> 标签：c, malloc, void-pointers

我正在研究这个 malloc 函数，我可以使用一些帮助：

```
static void *malloc(int size)
  {
        void *p;

        if (size < 0)
                 error("Malloc error");
        if (!malloc_ptr)
                 malloc_ptr = free_mem_ptr;

        malloc_ptr = (malloc_ptr + 3) & ~3;     /* Align */

        p = (void *)malloc_ptr;
        malloc_ptr += size;

        if (free_mem_end_ptr && malloc_ptr >= free_mem_end_ptr)
                 error("Out of memory");

        malloc_count++;
        return p;
 } 
```

我知道 malloc 函数为任何类型分配内存空间，如果有足够的内存，但我不明白的行是：

```
p = (void *)malloc_ptr;
malloc_ptr += size; 
```

它怎么能指向任何这样的数据类型呢？我只是无法理解那个 void 指针或其位置。

注意： malloc_ptr 是一个无符号长整数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T19:28:00.613

它返回 void 指针的原因是因为它不知道您在`malloc`调用中为什么分配空间。它只知道您请求的空间量。由您或您的编译器决定填充内存的内容。void 指针的位置通常被实现为一个链表，以保持完整性并知道哪些内存值是空闲的，这令人惊讶地在`free`函数中跟踪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T19:31:25.677

这是 的*实现*，`malloc`因此允许执行常规程序中不合法的事情。具体来说，它利用了实现定义的从`unsigned long`to的转换`void *`。程序初始化设置为一大块未分配内存`malloc_ptr`的*数字地址。*然后，当您请求分配时，`malloc`从 的当前值中生成一个指针，`malloc_ptr`并增加`malloc_ptr`您请求的字节数。这样，下次您调用`malloc`它时将返回一个新指针。

这是关于`malloc`. 最值得注意的是，它似乎从未重用释放的内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T19:30:05.930

Malloc 正在为一块完全非结构化的平面内存返回一个指针。(void *) 指针意味着它不知道它指向什么（没有结构），只是它指向一些大小大小的内存。

在你调用 malloc 之外，你可以告诉你的程序这个指针有一些结构。即，如果你有一个结构`some_struct`，你可以说： `struct some_struct *pStruct = (struct some_struct *) malloc(sizeof(struct some_struct))`.

看看 malloc 如何只知道它要分配的大小，但实际上并不知道它的结构？您对 malloc 的调用没有传递有关结构的信息，只是传递了要分配多少内存的大小。

这是 C 语言的通用方式：malloc 返回一定数量的内存，您的工作是将其转换为您需要的结构化内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T19:44:33.960

```
 p = (void *)malloc_ptr; 
```

`malloc`返回一个 void 指针，表明它是一个指向未知数据类型区域的指针。由于强类型系统，仅在 C++ 中需要使用强制转换，而在 C 中则不需要。`malloc`根据一些程序员的说法，缺少返回的特定指针类型是类型不安全的行为：

`malloc`基于字节数而不是类型分配。

```
 malloc_ptr += size; 
```

C 隐式转换 from 和 to `void*`，因此转换将自动完成。在 C++ 中，只有隐式转换为`void*`，而对于另一个方向，则需要显式转换。

[关于类型转换的Wiki](http://en.wikipedia.org/wiki/Type_safety#C)解释：`malloc`函数返回一个无类型的指针类型`void *`，调用代码必须将其转换为适当的指针类型。较旧的 C 规范需要显式转换才能做到这一点，因此代码

`(struct foo *) malloc(sizeof(struct foo))`

成为公认的做法。

但是，在 ANSI C 中不鼓励这种做法，因为它可以掩盖包含`malloc`定义的头文件的失败，从而导致 int 和指针类型具有不同大小的机器上的下游错误，例如现在无处不在的 x86_64 架构. 在编译为 C++ 所需的代码中会出现冲突，因为在该语言中强制转换是必需的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T16:02:21.690

正如你看到这两条线，

```
p = (void *)malloc_ptr;
malloc_ptr += size; 
```

在这里，您的 malloc_ptr 类型为 unsigned long，因此我们将此变量类型转换为 void 类型，然后将其存储在 p 中。并且以类似的方式第二个表示 malloc_ptr = malloc_ptr + size;

这两个代码都是为了开发人员的舒适，因为 p 是 void 指针类型，所以在应用程序中，当你使用 malloc 时，你不知道函数必须返回哪种类型的内存块，所以这个函数总是返回这个通用的 void 指针所以我们可以根据要求在我们的应用程序中再次进行类型转换。

如果您输入的大小为负数，则在第二个代码中相同，那么这种情况会发生什么

```
if (free_mem_end_ptr && malloc_ptr >= free_mem_end_ptr)
error("Out of memory"); 
```

# c# - 无法从局域网上的任何其他计算机访问 WCF REST 服务

> ID：14033352
> 
> 赞同：2
> 
> 时间：2012-12-25T19:17:49.660
> 
> 标签：c#, wcf, rest, wcf-security, self-hosting

没有任何类似的问题对我有帮助。我相信这里的专家会..

我的问题是我正在托管 WCF Rest 服务，我只能在本地访问它。LAN 上的任何其他计算机都无法访问它。

这就是我托管服务的方式（在控制台应用程序中运行）

```
WebServiceHost host = new WebServiceHost(typeof(MyRestService), new Uri("http://Yaniv-PC:8080/Test")); 
```

这是服务合同：

```
[ServiceContract]
public interface IMyRestService
{
    [OperationContract]
    [WebInvoke(Method = "GET", 
        ResponseFormat = WebMessageFormat.Xml, 
        BodyStyle = WebMessageBodyStyle.Wrapped, 
        UriTemplate = "/{id}")]
    string GetData(string id);
} 
```

这是 app.config 文件（仅 serviceModel 部分）

```
<system.serviceModel>
<services>
  <service behaviorConfiguration="MyRestServiceBehavior" name="ServiceHostApp.MyRestService">
    <endpoint address="" binding="webHttpBinding" contract="ServiceHostApp.IMyRestService" behaviorConfiguration="web">
      <identity>
        <dns value="Yaniv-PC" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="MyRestServiceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp/>
    </behavior>
  </endpointBehaviors>
</behaviors>
</system.serviceModel> 
```

当我打开浏览器并导航到：`http://yaniv-pc:8080/test/123`

我明白了：

```
<?xml version="1.0"?>
<GetDataResponse xmlns="http://tempuri.org/">
    <GetDataResult>You sent server 123</GetDataResult>
</GetDataResponse> 
```

当我从局域网中的其他机器访问该服务时，我收到此错误：

> System.ServiceModel.EndpointNotFoundException：没有`http://yaniv-pc:8080/Test/123`可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。---> System.Net.WebException：无法连接到远程服务器 ---> System.Net.Sockets.SocketException：尝试对无法访问的网络 10.0.0.3:8080 进行套接字操作

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:26:37.023

假设您是自托管您的服务，请确保您已使用 netsh 命令注册了您的端口，如下所示：

```
netsh http add urlacl url=http://+:8080/ user=\everyone 
```

还可以尝试在禁用 PC 防火墙的情况下对其进行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T18:42:12.150

您应该尝试禁用防火墙或尝试将带有端口的规则添加到防火墙。

# php - 基于accept header的ZF2返回格式

> ID：14033353
> 
> 赞同：4
> 
> 时间：2012-12-25T19:18:00.483
> 
> 标签：php, http-headers, zend-framework2

在 Zend Framework 2 中，如果 HTTP 接受标头设置为“application/json”，我想返回 JSON，否则返回 HTML。我正在使用新的`acceptableViewModelSelector`控制器插件，就像[2.0.4 更改日志中的示例](http://framework.zend.com/blog/zend-framework-2-0-4-released.html)一样。

我有以下代码：

```
class IndexController extends AbstractActionController {
    private $acceptCriteria = array(
        'Zend\View\Model\JsonModel' => array('application/json'),
        'Zend\View\Model\FeedModel' => array('application/rss+xml')
    );

    public function jsonAcceptHeaderAction() {
        $view_model = $this->acceptableViewModelSelector($this->acceptCriteria);

        return $view_model;
    }
} 
```

如果我像这样设置接受标头：

`curl -H "Accept: application/json" http://mydomain.com/json`

然后控制器插件`JsonModel`按预期返回一个实例。但是，它似乎*总是*这样做，即使`application/json`我的接受标题中没有。例如，如果我在 Chrome 中访问该页面，则会发送以下接受标头：

`Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8`

如果我使用`curl http://mydomain.com/json`. 控制器插件有一个默认的视图模型名称，我希望它在找不到与我的接受标准匹配时使用。更改日志说明如下：

> 如果不满足条件，上面将返回标准 Zend\View\Model\ViewModel 实例，如果满足特定条件，则返回指定的视图模型类型。

我试图将我的接受标准更改为以下内容，结果证明这是我想要的。

```
private $acceptCriteria = array(
        'Zend\View\Model\ViewModel' => array('text/html'),
        'Zend\View\Model\JsonModel' => array('application/json'),
        'Zend\View\Model\FeedModel' => array('application/rss+xml')
    ); 
```

我只是想知道为什么在没有`application/json`接受标头时它不使用默认视图模型名称，因为理想情况下我想省略接受条件数组中的第一个条目。

有谁知道为什么我总是得到一个`JsonModel`对象，除非我做上面的改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:04:30.270

默认视图模型有效，您的代码没有问题，如果您没有**text/html**条目，如果您使用任何能够接受 json 的浏览器访问 url，则接受标准将与第一个条目匹配即应用程序/json。

要测试默认模型是否正常工作，请使用 curl 测试您的 url，如下所示，在接受视图模型数组中没有**text/html**条目，您将获得默认视图模型输出

```
curl -H "Accept: text/html" http://mydomain.com/json 
```

这将返回默认视图模型，因此要按预期工作，您需要有一个条目**text/html**，将条目以您的首选顺序放置在数组中

# r - 在 R 中，两列之间的相关性检验，对于第三列中的每个组

> ID：14033355
> 
> 赞同：1
> 
> 时间：2012-12-25T13:17:02.010
> 
> 标签：r

> **可能重复：**
> [在 R 中，两列之间的相关性测试，对于第三列中的每个组](https://stackoverflow.com/questions/14030697/in-r-correlation-test-between-two-columns-for-each-of-the-groups-in-a-third-co)

我的数据框 (g) 包含 2 列包含连续数据和其他列包含分类数据。我想测试由第三列定义的不同组中的 2 个连续变量之间的相关性。g (157X3000) 看起来像：

```
 Geno          GDW         GN        M1     M2      M3
1 SB002XSB012 -17.1597630   52.31961    G/G    C/C     T/T
3 SB002XSB044  -3.6537657   53.81305    G/G    C/G     G/G
4 SB002XSB051  -7.8411596   58.05924    A/G    C/C     G/T
5 SB002XSB067   2.8412103   30.85074    A/G    G/G     G/T
6 SB002XSB073 -16.0789550  -10.09913    A/A    C/G     G/G
7 SB002XSB095   0.1759709   10.28837    A/A    G/G     T/T 
```

我正在寻找每个 M 定义的每个组中 GDW 和 GN 之间的相关性。我尝试过：

```
q<- function (x) {  
    spl<-split(g[,2:3],x)  
    r<-function(x) { 
        if ((nrow(x[[1]][1]))>2)  
          cor.test(x[[1]][1],x[[1]][2],use="pairwise.complete.obs")[3:4] else Na  
    }  
    cor<- sapply(spl,r)  
} 

all.cor<- apply(g[,4:ncol(g)],2,q) 
```

并得到：

```
Error in if ((nrow(x[[1]][1])) > 2) cor.test(x[[1]][1], x[[1]][2], use = "pairwise.complete.obs")[3:4] else Na : 
  argument is of length zero 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T15:47:49.780

或者如果你使用`plyr`你可以说的包（复制 Antoine 的示例数据）

```
library(plyr)
g <- data.frame(col1=rnorm(100, 1, 1), col2=rnorm(100, 10, 3), col3=c(rep("a", 50), rep("b", 50)))

co <- ddply(g, .(col3), function(adf) cor(adf[,1], adf[,2])) 
```

给一个 data.frame 看起来像......

```
 col3         V1
  1    a -0.1697979
  2    b  0.1660783 
```

**编辑：为多列添加循环** * *EDIT2：删除可笑的复杂表达式！**

```
library(plyr)
g <- data.frame(col1=rnorm(100, 1, 1),
            col2=rnorm(100, 10, 3),
            col3=sample(c('a','b','c'), 100, replace=TRUE),
            col4=sample(c('a','b','c'), 100, replace=TRUE),
            col5=sample(c('a','b','c'), 100, replace=TRUE),
            col6=sample(c('a','b','c'), 100, replace=TRUE))
for (i in 3:6) {
  co <- ddply(g, i, function(adf) cor(adf[,1], adf[,2]))
  names(co) <- c('variable',paste('CorCol',i, sep='-'))
  if(exists('odf')) { 
    odf <- merge(odf, co, by='variable', all=TRUE)
  } else {
    odf <- co
  } 
} 
```

结果在 data.frame odf 中，每个相关都有一列，因此如下所示：

```
> odf
  variable    CorCol-3    CorCol-4    CorCol-5    CorCol-6
1        a  0.29596471 -0.12278082  0.02184259  0.11972933
2        b -0.11793616  0.08827011  0.11030097 -0.03682823
3        c -0.09552299  0.12951251 -0.03855727 -0.03082486 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:07:54.793

您可以使用`for`循环轻松完成此操作（除非您的分类列中有大量级别，否则这应该可以正常工作）。

这是一段应该很容易适应您的数据的代码片段（您只需要更改列的名称以使其与数据框中的列相对应）：

```
g <- data.frame(col1=rnorm(100, 1, 1), col2=rnorm(100, 10, 3), col3=c(rep("a", 50), rep("b", 50)))

co <- c()
for (i in levels(g$col3)){
    tmp <- cor(g[g[,"col3"]==i,"col1"], g[g[,"col3"]==i,"col2"])
    co <- c(co, tmp)
} 
```

该对象包含数据框的相关性，其中包含类别变量`co`的级别出现的顺序。`levels(g[,"col3"])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:18:49.110

对于玩具数据框

```
g <- data.frame(col1=rnorm(100, 1, 1), 
                col2=rnorm(100, 10, 3), 
                col3=gl(2, 50),
                col4=gl(4, 25)) 
```

我认为这是最简单的方法：

```
by(g, g$col3, function(x) cor(x$col1, x$col2)) 
```

对于几列也是如此：

```
for (i in 3:ncol(g)) print(by(g, g[i], function(x) cor(x$col1, x$col2))) 
```

# javascript - Canvas Rotating object about dynamic points

> ID：14033365
> 
> 赞同：2
> 
> 时间：2012-12-25T19:18:55.763
> 
> 标签：javascript, html, rotation, html5-canvas

I have a rounded rectangle at a specific x, y, w, h on a canvas. I first do a context.translate to get the object where I want it, then when it comes to rotating it, this is where I'm having issues working out the math needed.

I can do a simple context.rotate(Math.PI/180 * 25) to rotate it 25degs but it rotates from the x,y. I really want to shift the rotating point to like x + (w/2) and y + (w/2).

I'm not sure how to tell the rotate method to rotate it around a different point. I think I have to rotate it like normal but recalculate x,y perhaps based on the rotation maybe?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:01:33.750

The canvas **always** rotates about the origin (0,0). The `ctx.translate` command can be thought of as shifting the origin, so you must translate by `(x+w/2, y+h/2)` before you rotate if you wish to rotate about the center of the rectangle.

(and of course, translate back after, or use `save` and `restore`)

# android - 如何强制 Android 应用程序释放所有内存？

> ID：14033372
> 
> 赞同：0
> 
> 时间：2012-12-25T19:20:03.347
> 
> 标签：android, out-of-memory, heap-memory

我有一个烦人的问题：
我正在从服务器获取大量 GeoJSON 数据。即使有 16MB 堆，即使我多次启动和停止应用程序，这也有效。内存消耗保持不变并且永远不会超过。但是有一种情况是我超过了 16MB 堆。我想简短地描述一下：
该应用程序被主页按钮使用并“退出”，因此该应用程序驻留在后台并且尚未销毁。当应用程序恢复时，作为我应用程序一部分的“控制器”会检查新的 GeoJSON 数据。如果有 GeoJSON 数据更新，应用程序会下载并处理它，问题就从这里开始了。**):**

 **```
private synchronized String readUrlData(HttpURLConnection urlConnection) throws IOException {       
    Log.i(TAG, "Start reading data from URL");
    urlConnection.setReadTimeout(1000 * 45); //45 sec
    Reader reader = new InputStreamReader(urlConnection.getInputStream());

    StringBuilder sb = new StringBuilder(1024 * 16);
    char[] chars = new char[1024 * 16]; //16k
    int len;
    while((len = reader.read(chars)) >= 0) {
        sb.append(chars, 0, len);
    }

    reader.close();

    Log.i(TAG, "Finished reading data from URL");

    return sb.toString();
} 
```

**我在append()**或**toString()**中得到 OutOfMemory 。显然，当以前以某种方式使用该应用程序时，该应用程序为此占用的内存很少。我已经尝试为上面的代码找到一种对资源更友好的方式，但没有解决方案。同样，如果应用程序是从新启动的，则永远不会出现问题。而且我绝对确定我没有任何内存泄漏，因为

1.  我用 MAT 检查了这部分和更多内容，占用的空间从未超过 1.6MB（这是 GeoJSON 数据）。
2.  我以 24MB 的堆大小**连续多次执行此用例。**

如果发生内存泄漏，它会在第 3 次或第 4 次后以 24MB 堆崩溃，但它运行时没有问题。

我知道如何避免崩溃。我可以向用户显示一个 AlertDialog，告诉他有新的 GeoJSON 数据可用，他需要重新启动应用程序。但是有一个问题！如果应用程序被 Activity 的**finish()** “终止” ，应用程序仍然保留在内存中，所以当它重新启动时，崩溃再次发生，因为内存永远不会被释放（至少在大多数情况下我不能依赖它）。我已经想通了**System.exit(0);** 而不是完成会释放所有内存，因为它会杀死整个应用程序，因此在使用新的 GeoJSON 数据重新启动后不会发生崩溃。但我知道这不是一个好的解决方案。我已经尝试过**System.gc()**在重要部分，但这也不起作用。任何想法如何处理这个问题？可能我需要重新启动应用程序并释放所有已使用的内存。

另一种解决方案可能是重新设计上面的代码，但我认为不可能从中获得更多的 MB。

如果我没有找到合理的解决方案，我将在堆为 16MB 时使用**System.exit(0)**（我认为有办法检查）来重新启动应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:06:31.493

这里有一些想法：

1.  一旦你知道有什么要读的，就把旧数据设置为空，这样它就会被 GC-ed 。

2.  使用执行此任务的服务，它将在不同的进程上运行（因此至少有 16 mb 用于此任务）。一旦它处理了数据，以某种方式将其移动到您需要的任何组件，同时将之前的旧数据归零。

3.  在获取数据时对其进行解码，而不是获取所有数据然后对其进行解码。

4.  压缩数据，以便在解码时，它会在途中解压缩。

5.  使用 json 的替代方案，例如 google 的[协议缓冲区](https://developers.google.com/protocol-buffers/docs/overview)或您自己的自定义数据类型。

6.  大多数设备的堆内存都超过 16 mb。您可以简单地将 min sdk 版本设置为 8 或 10，因为大多数内存比这更多的设备也有更高的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:56:53.040

感谢您的回答。最后，我决定让 System.exit(0) 在这种特殊情况下使用，因为数据几乎从未更新过，即使它恰好发生在有人让应用程序在后台运行时也一定是巧合。**

# objective-c - 动画导致图像拉伸

> ID：14033373
> 
> 赞同：2
> 
> 时间：2012-12-25T19:20:04.070
> 
> 标签：objective-c, ios

我花了一天时间尝试更好地理解动画。下一个代码效果很好并隐藏了我的标签栏。问题是它会拉伸它附近的每个 UIButton。包括标签栏上的自定义按钮。如果它触及另一层图像，它将拉伸它。知道如何修复代码以避免这种情况吗？谢谢

```
 - (void)hideTabBar:(UITabBarController *) tabbarcontroller
  {
[UIView animateWithDuration:0.3
                      delay:0.0f
                    options:UIViewAnimationCurveLinear
                 animations:^{
    for(UIView *view in tabbarcontroller.view.subviews)
    {
    if([view isKindOfClass:[UITabBar class]] || [view isKindOfClass:[UIImageView class]])
    {
        [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
    }
    else
    {
        [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
    }
   }
                 }
                 completion:nil];
} 
```

![在此处输入图像描述](../Images/8b77170dc555342186da502dc002a597.png)

**隐藏后：**

![在此处输入图像描述](../Images/9297a56ae209f2e76927a0a95e82f77c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:42:59.397

它是一个`UIButton`而不是一个`UIImageView`。从屏幕截图中可以明显看出，该按钮将成为其他部分。

所以你需要修改你的条件为，

```
if([view isKindOfClass:[UIButton class]] || [view isKindOfClass:[UITabBar class]] || [view isKindOfClass:[UIImageView class]]) 
```

然后设置框架。同样改变你的表演方法。

# database - 打开、执行、关闭访问 odbc 连接 vb.net 的正确步骤

> ID：14033374
> 
> 赞同：0
> 
> 时间：2012-12-25T19:20:05.867
> 
> 标签：database, vb.net, visual-studio-2010, ms-access

我有一个类来处理 vb.net 中的数据库

所以我认为这是正确的，但是程序有时没有正确插入表单中的数据以访问表这个事件非常罕见所以我有插入36个注册表然后没有插入37个的经验，然后我重新启动程序，我可以再次插入......

这可能是什么原因？

我目前有这个命令来处理执行

```
 con = New OdbcConnection
    con.ConnectionString = "Dsn=A;uid=sa;pwd=A;"
    con.Open()
    Dim cmd As New OdbcCommand(SQL, con)
    dr = cmd.ExecuteReader
    cmd.Connection.Close()
    cmd.Connection.Dispose()
    cmd.Connection = Nothing
    cmd.Parameters.Clear()
    cmd.Dispose()
    cmd = Nothing
    con.Close()
    con.Dispose() 
```

我有

```
Public Shared Function GetDataReader(ByVal SQL As String) As OdbcDataReader
        Dim dr As OdbcDataReader
        Try
            con = New OdbcConnection
            con.ConnectionString = "Dsn=A;uid=sa;pwd=A;"
            con.Open()
            Dim cmd As New OdbcCommand(SQL, con)
            dr = cmd.ExecuteReader
            cmd.Connection.Close()
            cmd.Connection.Dispose()
            cmd.Connection = Nothing
            cmd.Parameters.Clear()
            cmd.Dispose()
            cmd = Nothing
            con.Close()
            con.Dispose()
            Return dr
        Catch ex As Exception
            MessageBox.Show(ex.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Finally
            If (con.State = System.Data.ConnectionState.Open) Then
                con.Close()
                con.Dispose()
            End If
        End Try
        dr = Nothing
        Return dr
    End Function

Public Shared Function GetDataTable(ByVal SQL As String) As DataTable
        Dim table As New DataTable

        Try
            con = New OdbcConnection
            con.ConnectionString = "Dsn=A;uid=sa;pwd=A;"
            con.Open()
            Dim cmd As New OdbcCommand(SQL, con)

            Dim da As New OdbcDataAdapter(cmd)
            da.Fill(table)
            cmd.Connection.Close()
            cmd.Connection.Dispose()
            cmd.Connection = Nothing
            cmd.Parameters.Clear()
            cmd.Dispose()
            cmd = Nothing
            con.Close()
            con.Dispose()
            Return table
        Catch ex As Exception
            MessageBox.Show(ex.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Finally
            If (con.State = System.Data.ConnectionState.Open) Then
                con.Close()
                con.Dispose()
            End If
        End Try
        Return table
    End Function

    Public Shared Sub ExecuteQuery(ByVal SQL As String)
        Try
            con = New OdbcConnection
            con.ConnectionString = "Dsn=A;uid=sa;pwd=A;"
            con.Open()
            Dim cmd As New OdbcCommand(SQL, con)
            cmd.ExecuteNonQuery()
            cmd.Connection.Close()
            cmd.Connection.Dispose()
            cmd.Connection = Nothing
            cmd.Parameters.Clear()
            cmd.Dispose()
            cmd = Nothing
            con.Close()
            con.Dispose()
        Catch ex As Exception
            MessageBox.Show(ex.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Finally
            If (con.State = System.Data.ConnectionState.Open) Then
                con.Close()
                con.Dispose()
            End If
        End Try
    End Sub
End Class 
```

# mysql - 将文本列设为唯一键

> ID：14033378
> 
> 赞同：31
> 
> 时间：2012-12-25T19:20:54.277
> 
> 标签：mysql, sql, database, unique-key

我想在`MySQL`服务器中创建一个表，`mediumtext`列为`UNIQUE KEY`

```
CREATE TABLE `parts` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `name` mediumtext NOT NULL,
      `display_status` int(11) NOT NULL,
       UNIQUE KEY `name` (`name`),
       PRIMARY KEY (`id`)
 ) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

但这犯了一个错误

```
 BLOB/TEXT column 'name' used in key specification without a key length 
```

当我将 `name` 的类型更改为 varchar .. 它有效！

你能告诉我是否可以将文本列设为`UNIQUE KEY`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-25T19:36:21.023

基本上你不能使用`Text`列作为`UNIQUE`键。因为实际上如此大的列不会是唯一的，并且可能有更多重复的机会。所以去寻找`hashing`方法并将该输出用作唯一约束。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-25T19:34:28.240

varchar 长度的 255 限制不再适用。从[文档](http://dev.mysql.com/doc/refman/5.0/en/char.html)中：

> VARCHAR 列中的值是可变长度字符串。在 MySQL 5.0.3 之前，长度可以指定为 0 到 255 之间的值，在 5.0.3 和更高版本中可以指定为 0 到 65,535 之间的值。

唯一索引必须具有已知的最大长度（mysql 由于其内部实现而要求），因此请使用具有足够大值的 varchar 以适合您的最长期望值，例如

```
...
`name` varchar(65535) NOT NULL, -- for example 
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-21T19:27:28.047

我知道这已经很老了，但是如果其他人想要这样做，您可以使 varchar 或 text 列独一无二，您只需在创建表后进行。

```
 DROP TABLE IF EXISTS meeting;
CREATE TABLE meeting (
    meeting_id int(11) UNSIGNED UNIQUE NOT NULL PRIMARY KEY AUTO_INCREMENT,
    meeting_name varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL
);
CREATE UNIQUE INDEX meeting ON meeting(meeting_name); 
```

# xcode - 自动将日期/时间和内部版本号添加到 Info.plist Xcode

> ID：14033380
> 
> 赞同：9
> 
> 时间：2012-12-25T19:21:26.320
> 
> 标签：xcode, bash

我希望自动将构建日期和构建号添加到我的 Info.plist 文件中，仅用于我为 iOS 归档应用程序的构建。

## 我的脚本如下

```
#!/bin/bash
# This was taken from variations from:
# http://davedelong.com/blog/2009/04/15/incrementing-build-numbers-xcode

if [ "$CONFIGURATION" != "Release" ]
then
exit
fi

buildPlist="$SRCROOT/$PROJECT_NAME/$PROJECT_NAME-Info.plist"

# Get the existing buildVersion and buildNumber values from the buildPlist
buildVersion=$(/usr/libexec/PlistBuddy -c "Print CFBuildVersion" "$buildPlist")

buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBuildNumber" "$buildPlist")

buildDate=$(date "+%s")

# Increment the buildNumber
buildNumber=$(($buildNumber + 1))

# Set the version numbers in the buildPlist
/usr/libexec/PlistBuddy -c "Set :CFBuildNumber $buildNumber" "$buildPlist"
/usr/libexec/PlistBuddy -c  "Set :CFBuildDate $buildDate" "$buildPlist"
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildVersion.$buildNumber" "$buildPlist"
/usr/libexec/PlistBuddy -c "Set :CFBundleShortVersionString $buildVersion.$buildNumber" "$buildPlist"
/usr/libexec/PlistBuddy -c "Set :CFBundleLongVersionString $buildVersion.$buildNumber.$buildDate" "$buildPlist" 
```

这里的一切都很好，我让这个脚本在构建阶段选项卡中的目标依赖项之后作为构建阶段运行。

我遇到的唯一问题是该项目似乎是使用 Info.plist 的旧值而不是新值构建的。

换句话说，如果我归档应用程序并检查生成的 ipa 中的 Info.plist 文件，它们会反映旧值。然而，查看项目中的 Info.plist 表明该脚本确实正确执行，但没有及时使用旧的 Info.plist 构建项目。

有什么解决办法吗？

这似乎可以相对容易地解决，但令我惊讶的是，在关于该主题的文章中没有那么多人询问这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T18:23:11.870

事实证明，答案非常简单。所需要做的就是打开 Info.plist 预处理，然后使用`__TIMESTAMP__`预处理器指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-16T22:20:39.070

问题是`Info.plist`文件在其他任何东西运行之前被处理。通过检查构建日志，这涉及将其转换为二进制文件并将其放置在构建目录中。

要解决此问题，版本控制脚本必须修改构建目录中的文件，而*不是*项目目录中的文件。构建目录中的路径`Info.plist`可以通过组合构建过程中设置的以下环境变量来获得：

```
plistpath=${BUILT_PRODUCTS_DIR}/${INFOPLIST_PATH} 
```

如果您现在修改文件，`$plistpath`您将修改最终将被打包到最终应用程序中的 plist。

我使用这种技术将构建信息放入版本中，版本控制脚本作为第一个构建短语运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T20:14:50.080

归档应用程序会构建应用程序，这会增加构建计数。您可以尝试在编译二进制文件之前执行该脚本（只需将运行脚本一直拖到构建阶段）。如果这不起作用，我敢肯定，如果您正在构建存档，则可以有条件地增加 2。

# git - 在浅克隆中保持一定数量的提交

> ID：14033382
> 
> 赞同：1
> 
> 时间：2012-12-25T19:21:30.547
> 
> 标签：git

一段时间以来，我一直在寻找解决滑动历史窗口问题的方法。问题如下：我有一个包含许多提交的 DNS 存储库，但我只希望名称服务器上存在一定数量的提交。没有必要在实时机器上拥有完整的提交历史，所以为什么要在那里。我创建了一个深度为 5（提交 ABCDE）的浅克隆。我需要更新 DNS，并且有一些提交感觉初始克隆（提交 FGH）。更新过程完成后，我希望克隆到只有 5 个以前的提交 (DEFGH)。即使在获取/合并或拉取之后，克隆仍然需要能够获取/合并或拉取额外的提交。

我知道通过分支和变基可以实现这样的目标，例如[将 git 存储库转换为浅层？](https://stackoverflow.com/questions/4698759/converting-git-repository-to-shallow)但是，我一直无法使其与上游存储库兼容以供将来合并。据我了解，它创建了一个无法与用作“已发布”版本的实际分支合并的分叉分支，因此，它不能与任何未来的提交一起使用。给出的替代解决方案也不起作用，因为它会导致修剪错误。

这个问题是浅克隆维护脚本的最后一个组件。脚本的基本功能将撤消任何本地更改，清理任何未忽略的未跟踪文件，然后测试是否有更新到 repo（通过 fetch）。如果上游存储库有更新，那么它将应用（通过拉取）它们并像初始示例中一样向前“移动”提交窗口。

我错过了什么？是否甚至可以不必删除现有的克隆并重新克隆？

# asp.net-mvc-3 - 在 MVC 3 中使用 HTML5 输入“日期”

> ID：14033383
> 
> 赞同：0
> 
> 时间：2012-12-25T19:21:34.853
> 
> 标签：asp.net-mvc-3, html

HTML5 似乎为许多当前浏览器提供了新的输入类型，如“日期”，如果我输入：

```
 Birthday: <input type="date" id="bday", name="bday"/> 
```

它会在 Chrome 上弹出相当不错的日期选择器！我可以在 javascript 的帮助下将选定的日期发布到服务器：

```
 updateDate: function() {
        var date = $('#bday').val();
        var params = { date: date };

        $.ajax({
            url: '/HelloWorld/updateDateJson',
            type: 'POST',
            data: JSON.stringify(params),
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            success: function (result) { $('#timeServer2').text(result); }
            //error: function () { $('#ErrorSelfService').text("Ajax error"); }
        }); 
```

但是我可以使用视图模型和局部视图以本机 asp.net mvc3 方式使用它。一些澄清将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:34:24.840

是的，您可以像刚刚发布为普通字符串值一样使用它。

请注意，尽管其他浏览器可能不支持此功能（IE 9 for ex 不支持），因此仍然建议仅使用 jQuery UI 日期选择器控件和 MM/dd/yyyy 输入格式的 jquery 掩码插件（或您支持的任何日期文化）格式）

# android - Android：路标库签名请求引发 NullPointerException

> ID：14033385
> 
> 赞同：1
> 
> 时间：2012-12-25T19:21:57.083
> 
> 标签：android, oauth, tumblr, signpost

在我试图获取用户信息的简单 tumblr 客户端中。检索访问和请求令牌是可以的。

一些代码片段：

```
CommonsHttpOAuthProvider provider = new CommonsHttpOAuthProvider(
            "http://www.tumblr.com/oauth/request_token", 
            "http://www.tumblr.com/oauth/access_token", 
            "http://www.tumblr.com/oauth/authorize");
    provider.setOAuth10a(true);

OAuthConsumer consumer = new CommonsHttpOAuthConsumer(
            app.TUMBLR_OAUTH_CONSUMER_KEY,
            app.TUMBLER_CONSUMER_SECRET_KEY); 
```

通过浏览器进行用户身份验证：

```
String authUrl = provider.retrieveRequestToken(consumer,
                    "everyshare://everyshare.com/ok");
            // savint token and token secret...
            Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri
                    .parse(authUrl));
            startActivity(browserIntent); 
```

认证后：

```
public void onResume() {
    super.onResume();

    Uri uri = this.getIntent().getData();
    if (uri != null) {
        oauth_verifier = uri.getQueryParameter("oauth_verifier");

        try {
                            // consumer with the request token and secret
            provider.retrieveAccessToken(consumer, oauth_verifier);

            String url = "api.tumblr.com/v2/user/info";

            DefaultHttpClient httpclient = new DefaultHttpClient();
            HttpGet request = new HttpGet(url);
            consumer.sign(request); // here's throws exception 
```

...

错误日志

```
 oauth.signpost.exception.OAuthMessageSignerException: java.lang.NullPointerException  at 
  oauth.signpost.signature.SignatureBaseString.generate(SignatureBaseString.java:60) at 
  oauth.signpost.signature.HmacSha1MessageSigner.sign(HmacSha1MessageSigner.java:51) at
  oauth.signpost.AbstractOAuthConsumer.sign(AbstractOAuthConsumer.java:97) at 
  oauth.signpost.AbstractOAuthConsumer.sign(AbstractOAuthConsumer.java:107) at 
  com.skelpo.everyshare.activitys.TumblrSettingsAct.onResume(TumblrSettingsAct.java:154) at 
  android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150) at 
  android.app.Activity.performResume(Activity.java:3882) at 
  android.app.ActivityThread.performResumeActivity(ActivityThread.java:2191) at
  android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2228) at
  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721) at 
  android.app.ActivityThread.access$1500(ActivityThread.java:124) at 
  android.app.ActivityThread$H.handleMessage(ActivityThread.java:968) at
  android.os.Handler.dispatchMessage(Handler.java:99) at 
  android.os.Looper.loop(Looper.java:130) at 
  android.app.ActivityThread.main(ActivityThread.java:3806) at 
  java.lang.reflect.Method.invokeNative(Native Method) at 
  java.lang.reflect.Method.invoke(Method.java:507) at 
  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) at 
  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) at 
  dalvik.system.NativeStart.main(Native Method) Caused by: java.lang.NullPointerException at 
  oauth.signpost.signature.SignatureBaseString.normalizeRequestUrl(SignatureBaseString.java:66) at 
  oauth.signpost.signature.SignatureBaseString.generate(SignatureBaseString.java:54) 
```

这是我第一次使用 OAuth 和 signpost lib。因此，将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:39:42.220

真是愚蠢的错误！让我浪费了几天......在“api.tumblr.com/v2/user/info” URL 中添加 http:// 前缀后一切正常！

# c++ - 从 swig 返回 double * 作为 python 列表

> ID：14033387
> 
> 赞同：2
> 
> 时间：2012-12-25T19:22:52.670
> 
> 标签：c++, python, pointers, swig

我有一个 C++ 类，其中一个方法返回一个`double *`类似数组的数组，它是它的成员变量之一。我试图让它作为 Python 中的列表访问。我将它包装在 a`doubleArray_frompointer`中，然后尝试使用 deepcopy 将其安全地从那里取出，但是当`doubleArray`超出范围时我仍然遇到问题，它的内存被清理，然后 C++ 类尝试清理相同的内存（尽管我创建的[要点中没有显示）。](https://gist.github.com/4349180)

我怀疑我应该使用类型映射来执行此操作。

我要包装的是：

```
double *foo() {
  double *toReturn = new double[2];
  toReturn[0] = 2;
  toReturn[1] = 4;
  return toReturn;
} 
```

界面是：

```
%module returnList
%include "returnList.h"

%include "cpointer.i"
%pointer_functions(double, doubleP)

%include "carrays.i"
%array_class(double, doubleArray);

%{
#include "returnList.h"
%} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T10:03:37.533

您说得对，可以使用类型映射来避免在 Python 端编写循环。[我举了一个例子 - 它与其他答案](https://stackoverflow.com/a/11680521/168175)非常相似。

```
%module test

%typemap(out) double *foo %{
  $result = PyList_New(2); // use however you know the size here
  for (int i = 0; i < 2; ++i) {
    PyList_SetItem($result, i, PyFloat_FromDouble($1[i]));
  }
  delete $1; // Important to avoid a leak since you called new
%}

%inline %{
double *foo() {
  double *toReturn = new double[2];
  toReturn[0] = 2;
  toReturn[1] = 4;
  return toReturn;
}
%} 
```

这里的类型映射匹配一个称为`foo`返回的函数 - 你可以匹配更广泛，但是对于返回并不意味着你返回一个大小为 2 的数组的`double *`函数，会有做错事情的风险。`double *`

使用此类型图，我可以运行：

```
Python 2.6.6 (r266:84292, Dec 27 2010, 00:02:40)
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> test.foo()
[2.0, 4.0]
>>> 
```

您需要像这样手动编写它的原因是因为 SWIG 无法推断您从中返回的数组的长度`foo`。它甚至可以在呼叫之间有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T05:08:33.267

I 'solved' the problem not by returning any sort of vector- or array-like object, but instead by recreating in Python the (simple) loop that generated the array in the first place. That is, my C++ code only has to return individual doubles, and my Python code will assemble the list.

To be slighly more explicit, I have the C++ method `double *simulation.run()`, that was causing trouble. I created a new C++ method `double simulation.doRound()`, and then called this via SWIG in a Python loop of `numRounds` iterations, doing `outputs.append(simulation.doRound())` each iteration.

However, I would still like to know how to copy a C/C++ `double *` array to a Python list via SWIG, since this seems like such a basic operation. If someone could answer that, I'd mark such as the accepted answer.

# wordpress - 我创建了新模板，但无法从插件文件夹中获取它

> ID：14033390
> 
> 赞同：0
> 
> 时间：2012-12-25T19:23:13.900
> 
> 标签：wordpress

任务是为一页设置特定的模板。模板文件放在我的插件目录中，我找不到正确的方法来获取它作为 update_post_meta 函数的第三个参数的路径。

我试过这个：

```
update_post_meta( $pas_tasks_page_id, "_wp_page_template", "task-list-template.php" ); 
```

和这个：

```
update_post_meta( $pas_tasks_page_id, "_wp_page_template", ( ABSPATH . "wp-content/plugins/self-manage/task-list-template.php" )  ); 
```

但没有任何效果。我可以在我的插件中创建模板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:02:58.613

指向插件目录中文件的最佳方法是使用`plugins_url()`.

关于您的最后一个问题，您可以在插件中创建菜单页面（模板）。这是一个包含多个页面的示例：

```
// Put this in your main script
add_action( 'admin_menu', 'membership_menu' ) ; // Register Admin Menus

// Holds the absolute path to the plugin directory, without trailing slash.
if ( !defined( 'PLUGIN_DIR' ) ) define( 'PLUGIN_DIR', __DIR__ );

// Holds the directory name where the plugin was installed, without slashes.
if ( !defined( 'PLUGIN_DIRNAME' ) ) define( 'PLUGIN_DIRNAME', basename( PLUGIN_DIR ) );

// And this in the same script or your plugin's functions script.
    public function membership_menu() {
      $OptionsPath = PLUGIN_DIRNAME . '/modules/-options.php';
      add_menu_page( 'Membership', 'Membership', 'administrator', $OptionsPath, '', plugins_url( '/' . PLUGIN_DIRNAME . '/images/.png' ) );
      add_submenu_page( $OptionsPath, 'Membership Settings', 'Settings', 'administrator', $OptionsPath, '' );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T00:03:00.460

您可以从**插件**添加页面模板。

这是我的代码解决方案（受 Tom McFarlin 启发）。

注意 - 这是页面的解决方案，但您还需要配置自定义帖子类型以接受页面模板。

这是为插件设计的（模板文件在插件的根目录中搜索）。如果需要，可以更改 - 查看我的完整教程[http://www.wpexplorer.com/wordpress-page-templates-plugin/](http://www.wpexplorer.com/wordpress-page-templates-plugin/)了解有关此解决方案的更多详细信息。这些文件的格式也与直接包含在主题中的格式完全相同。

要自定义，只需在 __construct 方法中编辑以下代码块；

```
 $this->templates = array(
       'goodtobebad-template.php'     => 'It\'s Good to Be Bad',
   ); 
```

**完整代码；**

```
class PageTemplater {

    /**
     * A Unique Identifier
     */
     protected $plugin_slug;

    /**
     * A reference to an instance of this class.
     */
    private static $instance;

    /**
     * The array of templates that this plugin tracks.
     */
    protected $templates;

    /**
     * Returns an instance of this class. 
     */
    public static function get_instance() {

            if( null == self::$instance ) {
                    self::$instance = new PageTemplater();
            } 

            return self::$instance;

    } 

    /**
     * Initializes the plugin by setting filters and administration functions.
     */
    private function __construct() {

            $this->templates = array();

            // Add a filter to the attributes metabox to inject template into the cache.
            add_filter(
                'page_attributes_dropdown_pages_args',
                 array( $this, 'register_project_templates' ) 
            );

            // Add a filter to the save post to inject out template into the page cache
            add_filter(
                'wp_insert_post_data', 
                array( $this, 'register_project_templates' ) 
            );

            // Add a filter to the template include to determine if the page has our 
            // template assigned and return it's path
            add_filter(
                'template_include', 
                array( $this, 'view_project_template') 
            );

            // Add your templates to this array.
            $this->templates = array(
                    'goodtobebad-template.php'     => 'It\'s Good to Be Bad',
            );

    } 

    /**
     * Adds our template to the pages cache in order to trick WordPress
     * into thinking the template file exists where it doens't really exist.
     *
     */

    public function register_project_templates( $atts ) {

            // Create the key used for the themes cache
            $cache_key = 'page_templates-' . md5( get_theme_root() . '/' . get_stylesheet() );

            // Retrieve the cache list. 
            // If it doesn't exist, or it's empty prepare an array
            $templates = wp_get_theme()->get_page_templates();
            if ( empty( $templates ) ) {
                    $templates = array();
            } 

            // New cache, therefore remove the old one
            wp_cache_delete( $cache_key , 'themes');

            // Now add our template to the list of templates by merging our templates
            // with the existing templates array from the cache.
            $templates = array_merge( $templates, $this->templates );

            // Add the modified cache to allow WordPress to pick it up for listing
            // available templates
            wp_cache_add( $cache_key, $templates, 'themes', 1800 );

            return $atts;

    } 

    /**
     * Checks if the template is assigned to the page
     */
    public function view_project_template( $template ) {

            global $post;

            if (!isset($this->templates[get_post_meta( 
                $post->ID, '_wp_page_template', true 
            )] ) ) {

                    return $template;

            } 

            $file = plugin_dir_path(__FILE__). get_post_meta( 
                $post->ID, '_wp_page_template', true 
            );

            // Just to be safe, we check if the file exist first
            if( file_exists( $file ) ) {
                    return $file;
            } 
            else { echo $file; }

            return $template;

    } 

} 

add_action( 'plugins_loaded', array( 'PageTemplater', 'get_instance' ) ); 
```

查看我的教程以获取更多信息。

[http://www.wpexplorer.com/wordpress-page-templates-plugin/](http://www.wpexplorer.com/wordpress-page-templates-plugin/)

我希望这可以帮助您完成您想做的事情:)

# javascript - JsTree：插入后如何选择节点

> ID：14033391
> 
> 赞同：1
> 
> 时间：2012-12-25T19:23:18.460
> 
> 标签：javascript, jquery, jstree

我正在使用 JStree v.1.0，当我单击“添加文件”时，我只想选择创建的节点。

我的基本代码可以在页面[http://www.jstree.com/demo](http://www.jstree.com/demo)中找到：PHP & mySQL demo + event order

完全感谢！

**编辑 ：**

另外代码： http: [//jsfiddle.net/fsQd6/33/](http://jsfiddle.net/fsQd6/33/) 我尝试使用以下函数（beetwen /* TODO lines */:)

```
$.jstree._focused().select_node("#node_"+r.id); 
```

它似乎可以正常工作并正确选择新节点......但父节点仍然“标记”。你知道取消选择父母的方法吗？

# jquery - How to call a jquery function inside a loop by declaring it outside the loop

> ID：14033396
> 
> 赞同：1
> 
> 时间：2012-12-25T19:24:30.513
> 
> 标签：jquery, jslint

I am new to jquery and stuck in a problem and need help from experts.

here is my code

```
 for (val in list) {
    var result = $.grep(node, function(e){
          return e.id === list[val].Id;
    });
    if (result === 0)
     // do something
} 
```

When i try to pass JSLint on my I got this error

```
#1 Don't make functions within a loop. 
```

I know the problem that i am making a function in the jquery grep function But i am stuck as how to move my function out side the loop assign it to a variable and then call it. As my function is talking an argument e. I have tried it like this

```
var Visible = function (e, list, val) {return e.id === list[val].Id;}; 

for (val in list) {
   var result = $.grep(node, Visible(e, list, val));
} 
```

but now jslint is giving an error that

```
 #1 'e' was used before it was defined.
    var result = $.grep(node, Visible(e)); // Line 125, Pos 69 
```

//--------------------------------------------------------------------

here is the data

```
node: Array[5]
  0: HTMLTableRowElement
  1: HTMLTableRowElement 
  2: HTMLTableRowElement
  3: HTMLTableRowElement

list: Array[5]
  0: Object
    0: "cc"
    1: "ss"
    Id: "000"
  1: Object
  2: Object 
```

Now I am finding that for which element of the the list an html element exist. If for any element in the list and htmlelement does not exist then i r=create one i am checking it by **result === 0** what can be the solution to this problem. Any help will be appreciated thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:30:45.613

When you write `Visible(e)` you call function visible with argument `e`. This is not what you want. You want to give the function itself to `.grep()`. So try fixing it like this:

```
var result = $.grep(node, Visible); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:31:10.963

You have to pass a function to `$.grep`. But `Visible(e, list, val)` is trying to **call** the function and passing the return value to `$.grep` (which is either `true` or `false`). At that moment, `e` is not defined yet (it's an argument which `$.grep` is supposed to pass to the callback).

Instead, you have to create a function which *returns* a function that does the comparison:

```
function createCallback(id) {
    return function(e) {
        return e.id === id}; 
    };
}

for (val in list) {
   var result = $.grep(node, createCallback(list[val].Id));
} 
```

* * *

That said, creating functions in a loop is ok as long as those functions are called before the next iteration of the loop, but JSLint is very picky.

* * *

A better solution could to remove all elements from the array for which elements already exist:

```
$.map(list, function() {
    return $('#' + this.Id).length === 1 ? null : this;
}).each(function() {
    // create and append element here
    // e.g.
    $('<div />', {id: this.Id}).appendTo('#container');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:37:49.563

A far simpler approach is to simply create an ID selector and check if it exists:

```
for (val in list) {    
    if( $('#'+list[val].Id).length){
        /* element exists in page*/
    }       
} 
```

To look within `node` as collection of elements only can use `filter()` method

```
var $node=$(node);
for (val in list) {    
     if( $node.filter('#'+list[val].Id).length){
            /* element exists in node*/
     }       
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T20:20:21.113

You do not need jQuery for this at all. Just use two loops, and check what you want:

```
for (var i=0; i<list.length; i++) {
    var found = false;    
    for (var j=0; j<node.length; j++) {    
        if(list[i].id == node[j].Id) {
            // We have found such element in node!
            found = true;
            break; 
        }
    }     
    if(!found) {
        // we did not find such element in node
    }
} 
```

I suggest you to understand how basic Javascript loops work, and only after that use jQuery functions for such tasks. It will help you.

# mysql - max_allowed_pa cket=1024M ......它仍然给我错误“得到一个大于'max_allowed_pa cket'字节查询的数据包......”

> ID：14033400
> 
> 赞同：1
> 
> 时间：2012-12-25T19:25:26.013
> 
> 标签：mysql, drupal, caching, error-handling, watchdog

我刚刚将我的 Drupal 站点移动到一个新的托管 VPS。

每次我尝试运行 cron 时，都会收到这个令人讨厌的错误：

> 警告：收到的数据包大于“max_allowed_pa​​cket”字节查询：INSERT INTO 看门狗（uid、类型、消息、变量、严重性、链接、位置、引用者、主机名、时间戳）VALUES（1，“php”，“%message in %文件在 %line.', 'a:4:{s:6:\"%error\";s:12:\"user warning\";s:8:\"%message\";s:1582172 :\"得到一个大于 'max_allowed_pa​​cket' 字节的数据包\n查询：UPDATE cache_update SET data = 'a:72:{s:10:\"admin_menu\";a:10:{s:5:\"title\" ;s:19:\"管理菜单\";s:10:\"short_name\";s:10:\"admin_menu\";s:10:\"dc:creator\";s:3:\" sun\";s:11:\"api_version\";s:3:\"6.x\";s:17:\"recommended_major\";s:1:\"1\";s:16: \"supported_majors\";s:3:\"1,3\";s:13:\&qu 在 /home/drupal/includes/database.mysql.inc 第 135 行

问题是我已将 max_allowed_pa​​cket 设置为 1024！仍然给我这个错误。

该错误似乎与 admin_menu 模块有关，但即使禁用该模块后，错误仍然存​​在（引用其他模块）并且禁用该其他模块后，错误仍然存​​在，依此类推。

似乎问题与 mySQL 表“cache_update”有关，但我不明白发生了什么。即使在搜索 Drupal 论坛之后，我也无法解决问题。刚刚找到了一些破解核心的方法，这并不好。

我检查了 my.cnf 文件中的 max_allowed_pa​​cket 语法是否正常：

```
max_allowed_packet=1024M 
```

我认为这是一个特定于 mysql 的问题，所以这就是我在此处发布此内容的原因。

感谢您的洞察力！

罗莎蒙达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T00:05:49.817

Just in case anyone out there happens to be in the same situation, I´ve solved the error **deactivating the update core module**.

Have found the answer tying a lot of stuff that I´ve read out there, don´t remember where exactly I get the solution. But it works, at leat in my case it did.

# gwt - 无法通过延迟绑定解析类

> ID：14033402
> 
> 赞同：12
> 
> 时间：2012-12-25T19:25:44.987
> 
> 标签：gwt, binding, deferred

```
// ...some imports

public class Menu {
    final MenuMaker myClass = GWT.create(MenuMaker.class);  // ERROR 
```

我的...gwt.xml：

```
...
<generate-with class="com.gwt.rebind.MenuGenerator">
  <when-type-assignable class="com.gwt.client.MenuMaker" />
</generate-with>
... 
```

当我在 DevMode 中运行编译时，一切都运行良好，但是当我“使用 GWT 编译器构建项目”时，我得到了这个错误：

```
 [ERROR] Line 15:  Failed to resolve 'com.gwt.client.MenuMaker' via deferred binding
   Scanning for additional dependencies: jar:file:/C:/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201208080121-rel-r42/gwt-2.4.0/gwt-user.jar!/com/google/gwt/dom/client/DOMImpl.java
      [WARN] For the following type(s), generated source was never committed (did you forget to call commit()?)
         [WARN] com.gwt.client.MenuMakerGen
   [ERROR] Cannot proceed due to previous errors 
```

在 com.gwt.rebind.MenuGenerator 的末尾：

```
sourceWriter.commit(logger); 
```

我需要帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-03T00:20:10.737

检查您的所有客户端类是否具有默认的零参数构造函数。我遇到了同样的“延迟绑定”问题，结果发现我的一个类没有默认构造函数。这很奇怪，因为 GWT 编译器日志中甚至没有提到这个类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-04T11:40:13.003

检查 gwt 编译问题。讯息

```
[ERROR] Line 15:  Failed to resolve '...' via deferred binding 
```

可能是由于 gwt 代码中的编译问题造成的。在我的例子中，它是一个类，它仅在应用程序的服务器端可用，但在属于应用程序“共享”部分的类中被引用。

在Java中它编译得很好，所以我在eclipse中没有错误。上述错误消息仅在使用 maven 构建时出现。仍然很难找到真正的问题，因为消息文本不是很有帮助。

事实证明，在 com.google.gwt.dev.DevMode 上运行应用程序会产生更详细的 gwt 编译日志文件（可能有人可以配置 maven 来做同样的事情？）。在这个更详细的日志的开头，有一些条目指出了上面描述的问题。更正这些问题后，“无法通过延迟绑定解决...”错误消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-14T07:37:50.557

检查你的`model`/ Pojo`Class`应该`implements` `Serializable`

`interface`并且还有 `Class`（`default` `constructor`无参数构造函数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T09:27:25.143

在我的情况下，一些模型类没有实现 com.google.gwt.user.client.rpc.IsSerializable，这就是我得到问题中提到的错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-12T07:41:40.323

在我的情况下，资源包属性文件中与方法名称对应的键丢失，添加后问题得到解决。

# python - 如何在python中映射2个列表并进行比较

> ID：14033404
> 
> 赞同：5
> 
> 时间：2012-12-25T19:26:11.430
> 
> 标签：python, map

我有一个说 foos 的对象列表。我有一个用于创建新列表的循环。

`foo1 = {id:1,location:2}`
例如`foos = [foo1,foo2,foo3]`

现在我想根据位置创建一个新列表。

```
new_list = []
for foo in foos:
  if foo.location==2:
      new_list.append(foo) 
```

我想知道有什么方法可以做这样的事情

```
new_list = []
new_list = map(if foo.location ==2,foos) // this is wrong code but is something like this possible. ? 
```

我可以在这里使用地图功能吗？如果是的话怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T19:29:33.310

当然，你可以用函数来做到这一点。您可以使用`filter` [内置函数](http://docs.python.org/2/library/functions.html#filter)：

```
new_list = filter(lambda foo: foo.location == 2, foos) 
```

但更通用和“pythonic”的方式是使用[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

```
new_list = [foo for foo in foos if foo.location == 2] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T19:29:20.047

[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)似乎是您想要使用的：

```
new_list = [foo for foo in foos if foo.location == 2] 
```

`map`当您想将函数应用于列表*（或任何可迭代）中的***每个**项目并获得等长列表*（或 Python3 中的迭代器）*作为结果时，这是很好的。它不能基于某些条件“跳过”项目。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T09:21:58.980

例如，你是否与**带有 lambda**函数的过滤器绑定在一起，

```
a = {'x': 1, 'location': 1}
b = {'y': 2, 'location': 2}
c = {'z': 3, 'location': 2}
d=[a,b,c] 
```

根据你的例子 d 将是

```
d = [{'x': 1, 'location': 1}, {'y': 2, 'location': 2}, {'z': 3, 'location': 2}]
output = filter(lambda s:s['location']==2,d)'
print output' 
```

结果应该是，

```
[{'y': 2, 'location': 2}, {'z': 3, 'location': 2}] 
```

我希望这可能是你所期望的......**

# mysql - MySQL：在单个 Cell 中读取大数据还是在多个 Cell 中读取较小数据更快？

> ID：14033406
> 
> 赞同：1
> 
> 时间：2012-12-25T19:26:42.403
> 
> 标签：mysql, sql, performance

我正在将一些值传递到 MySQL 数据库表中，我在想是否将整个 javascript 对象数组作为字符串传递更快，或者我是否应该在速度方面将它们拆分为单元格。

例子：

Javascript数组：

```
var a = {'sky':'blue', 'grass':'green', 'sun':'yellow', 'milk':'white', 'rose':'red', 'facebook':'whiteblue'}; 
```

示例 1：

**表行/值**

```
id: 1
sky: blue
grass: green
sun: yellow
milk: white
rose: red
facebook: whiteblue 
```

示例 2：

**表行/值**

```
id: 2
data: {'sky':'blue', 'grass':'green', 'sun':'yellow', 'milk':'white', 'rose':'red', 'facebook':'whiteblue'} 
```

因为归根结底，我需要从数据库中检索所有数据并将其作为 javascript 对象数组传递。

执行什么会更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:45:37.690

毫无疑问哪个更快。
有一个理智的设计问题。

要么使用第一种方法，要么根本不用数据库。
Mysql 是一个关系型数据库管理系统。因此，它必须用于存储原子化数据，能够建立任何关系，过滤排序等。如果您不需要它们中的任何一个，则不需要关系数据库。

此外，只有在存在真正问题时才用性能问题来打扰自己。
否则你只会浪费你的时间或者让事情变得更糟。

# javascript - 表单提交前的 javascript 验证

> ID：14033414
> 
> 赞同：2
> 
> 时间：2012-12-25T19:28:30.697
> 
> 标签：javascript, html

在将代码提交到服务器之前，我在代码中添加了一个 javascript 表单验证。当用户点击`submit`它应该在提交之前调用 javascript 验证器。如果验证者同意，那么它才应该提交。我似乎做错了什么，因为无论验证者说什么，它都会提交......

html:

```
<form id="start_form" method="post" onsubmit="return validate_form(this);">
    <ul class="error">
    </ul>
    <label for="title" >Title: </label><input value="{{ post.title }}" type="text" name="title">
    <label for="summery" >Summery/Prompt: <textarea name="summery">{{ post.summery }}</textarea>
    <label for="person">Participants Emails: </label>
    <ul id="people">
        <li><input type="text" name="person1"></li>
        <li><input type="text" name="person2"></li>
    </ul>
    <a href="javascript:void(0)" onclick="add_group();"><img class="img_button" width="30px" height="30px" src="{{ STATIC_URL }}Image/plus_button.png" /></a>
    <a href="javascript:void(0)" onclick="remove_group();"><img class="img_button" width="30px" height="30px" src="{{ STATIC_URL }}Image/minus_button.png" /></a>
    <button type="submit" class="button">Start Game</button>
    <input type="hidden"  id="pn" name="pn" value="2">
</form> 
```

Javascript函数：

```
function validateEmail(email) {
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
}
function append_error(m) {
    c = "<li>" + m + "</li>"
    $('#error').appendChild(c)
    }
function validate_form(form) {
        var e = true
        if (form.title.value == "") {
            append_error("Title Required");
            e = false
        }
        if (form.summery.value == "") {
            append_error("Summery Required");
            e = false
        }
        for (i = 0; i < Number(form.pn.value); i++){
            email = $('[name="person"' + i++ + '"]').innerText
            if(email == ""){
                append_error("Email #" + ++i + " can not be blank")
                e = false
            } else if (!validateEmail(email)) {
                append_error("Email #" + i++ + " is not valid")
                e = false
            }
        }
        return e;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:09:29.733

jquery**没有****appendChild**方法。在您的功能中：

```
function append_error(m) {
    c = "<li>" + m + "</li>"
    $('#error').appendChild(c)
} 
```

这会导致提交最终忽略您的验证功能的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:15:14.307

看起来您正在使用 jQuery，因此您可以像这样绑定提交事件：

```
$('#start_form').submit(function(){
    return validate_form(this);
}); 
```

# javascript - JavaScript 增量 ++ 每次点击的不透明度

> ID：14033416
> 
> 赞同：0
> 
> 时间：2012-12-25T19:28:49.027
> 
> 标签：javascript, jquery, onclick, opacity, increment

嗨，我在增加使用 JavaScript时遇到`opacity`了麻烦。`background-color:hsla() div`这是我正在使用的代码...

```
$( "#Opacity" ).button().click(function() {
var x = 0.1;
var Opacity = ++x;
$( "#TimeDate, #Weather, #ticker, #Pages" ).css( "background-color", "hsla(0,0%,0%,"+Opacity +")" );
        Cookie.set('bgo', $('#TimeDate, #Weather, #ticker, #Pages').css('background-color'), 365);
        return false;
}); 
```

我想要的最终结果是不透明度从以前的设置开始，然后每次单击按钮时它都会增加 0.1，直到达到 1，然后返回到 0，然后每次开始增加 0.1再次单击等等。

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T19:33:03.510

使用此代码不透明度始终为 1.1

将函数更正为以下内容：

```
Opacity = 0.1

$( "#Opacity" ).button().click(function() {

    Opacity = (Opacity==1) ? 0 : (Opacity + 0.1);
    $( "#TimeDate, #Weather, #ticker, #Pages" ).css( "background-color", "hsla(0,0   %,0%,"+Opacity +")" );
    Cookie.set('bgo', $('#TimeDate, #Weather, #ticker, #Pages').css('background-color'), 365);
    return false;
}); 
```

# jquery - 来自 JQuery 事件处理程序的函数调用

> ID：14033417
> 
> 赞同：0
> 
> 时间：2012-12-25T19:28:58.750
> 
> 标签：jquery

我是 JQuery 的新手。我搜索了以前的帖子，但找不到任何东西。我正在尝试从视频结束事件处理程序中调用另一个函数。它不工作。

```
$(document).ready(function(){
   // doing something
   $("#video1").bind("ended", NextFrag());
});

function NextFrag(){
   Window.alert("Hello World");
} 
```

这是行不通的。我看不到任何打印“Hello World”的警报。

基本上我需要解决上述问题才能完成以下任务。我想播放不同的视频片段。算法应该是这样的：

```
$(document).ready(function(){
   NextFrag();
});

function NextFrag(){

   // IF First FRAGMENT do this
      $("#video1").html('<source src="FirstURLFromArray.mp4" type="video/mp4"></source>' );

    // ELSE DO THIS
      $("#video1").bind("ended", function(){
         $("#video1").html('<source src="NextURLFromArray.mp4" type="video/mp4"></source>' );
         NextFrag();    // call itself again.       
      });
} 
```

任何帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T19:35:22.930

尝试

```
$("#video1").bind("ended", NextFrag); 
```

这会将函数作为回调传递，而不是评估它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T19:36:48.757

```
$(document).ready(function(){
   $("#video1").on("ended", function() {
    NextFrag();
   });
});

function NextFrag(){
   alert("Hello World");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T15:09:21.380

谢谢你的帮助。我刚刚完成了任务。我做了这样的事情，它正在工作。

```
var index = 0;
$(document).ready(function(){
NextFrag();
});  

function NextFrag(){
if (index < url.length){
    if(index == 0 )
    {
        //The only difference for index=0 is that the player is not autoplay  
        $("#video1").html('<source src= " '+ url[index] + '" type="video/mp4"></source>' );
        index++;
        $("#video1").bind( "ended", NextFrag);

    }else
    {
         $("#VideoContainer").html('<video  id="video1" controls autoplay > "<source src= "'+ url[index]+ '" type="video/mp4"></source> </video>' );
         index++;
         $("#video1").bind( "ended", NextFrag);
    } 
}
} 
```

# javascript - 在 Three.js 投影中计算顶部、左侧、宽度、高度

> ID：14033419
> 
> 赞同：1
> 
> 时间：2012-12-25T19:29:10.910
> 
> 标签：javascript, positioning, three.js

我正在努力解决一个问题：我需要在 WebGL 动画上放置一个 DIV。`mesh`我基于 a旋转 a`PlaneGeometry`以占据矩形大小，然后我想将 DIV 放在顶部，所以我需要知道 X、Y 坐标和平面的渲染尺寸是多少。

![在此处输入图像描述](../Images/6b0bfe903ca33b7f2c8b70ca18fb0a36.png)

我已经尝试了这`THREE.Projection`门课，但没有帮助，即使我`[0]`使用`.projectVector`. 它计算出：

```
x: -0.1994540991160383
y: 0.17936202821347358
z: 0.9970982652556688 
```

...这对我帮助不大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:34:02.633

要将 3D 点投影`position`到屏幕坐标，相对于渲染器的画布，请执行以下操作：

```
var projector = new THREE.Projector();
var pos = projector.projectVector( position, camera );

var xcoord = Math.round( (  pos.x + 1 ) * canvas.width  / 2 );
var ycoord = Math.round( ( -pos.y + 1 ) * canvas.height / 2 ); 
```

是`canvas`，在这种情况下，`renderer.domElement`。

可见世界左上角的一个点将投影到 (0, 0)。

三.js r.53

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:42:24.433

我找到了解决方案。左上角确实是`plane`的顶点的 0 索引，但您还必须考虑已经执行的转换。

```
function calculateLayer()
{
    // multiplyVector3 applies the performed transformations to the object's coordinates.
    var topLeft = tubeCard.matrixWorld.multiplyVector3( tubeCard.geometry.vertices[0].clone() );
    // index 24 is the bottom right, because the plane has 4x4 faces
    var bottomRight = tubeCard.matrixWorld.multiplyVector3( tubeCard.geometry.vertices[24].clone() );
    return {
            topLeft: convert3Dto2D( topLeft ),
            bottomRight: convert3Dto2D( bottomRight )
        }
}

function convert3Dto2D( positionVector )
{
    var projector = new THREE.Projector();
    var pos = projector.projectVector( positionVector, camera );

    var xcoord = Math.round( (  pos.x + 1 ) * window.innerWidth  / 2 );
    var ycoord = Math.round( ( -pos.y + 1 ) * window.innerHeight / 2 );

    return { x: xcoord, y: ycoord };
} 
```

因此，一旦有了正确的坐标并应用了变换，您只需使用 3d 到 2d 的转换，这要归功于 WestLangley。

# javascript - 在 CSS 和 JS 中动态调整高度

> ID：14033425
> 
> 赞同：1
> 
> 时间：2012-12-25T19:29:32.897
> 
> 标签：javascript, html, css

在某个地方可能有一个答案，但我在 HTML、CSS 和 JS 方面的经验非常有限。我尝试的答案似乎无法正常工作，或者我没有正确输入它们，所以我想我会问。

页面右侧有一个框（图片）。当我放入超过某个点的列表时，框不会扩展以包含它们。这是因为它们的高度是静态设置的。我已经确定了在哪里对 JS 脚本和 CSS 表进行调整。它们都需要设置相同的高度才能正确扩展。我正在寻找一种动态扩展它的方法，或者一种能够为每个可能的设置设置高度的方法。通过变量或类似的东西。

这是 CSS 表（标题样式）

```
#content {height:868px;width:740px;float:left;position:relative}
#content > ul > li {position:relative;height:868px;width:100%;bottom:0}
.box1 {background:url(../images/bg_content.png) repeat;width:100%;height:100%;position:absolute;top:0;left:0} 
```

两个内容部分都需要调整 868px 的高度。

这是同样需要调整的 JS 脚本。（标题页）

```
$('#content').stop().animate({height:'868px'})
    if (act!='') {
        $(act).find('.box1').stop().animate({height:'0'},700,'easeOutCirc', function(){
            $(act).css({display:'none'});
            $(page).css({display:'block'}).find('.box1').stop().animate({height:'100%'},700, 'easeOutCirc', function(){
                act=page;   
            }); 
        })
    } else {
        $(page).css({display:'block'}).find('.box1').stop().animate({height:'100%'},700, 'easeOutCirc', function(){
            act=page;   
        });     
    } 
```

将 868 高度调整为您更改 CSS 的任何数字也会进行适当的调整。

如果您想具体了解我在说什么，这是我正在使用的模板。

[下载](http://demo.html5xcss3.com/demo.php?cat=html5themes&host=templatesmonster&temp=thomsander) 或 [网站，模板的标题是 Thom Sanders... 它是数字 8](http://www.1stwebdesigner.com/css/fresh-free-html5-and-css3-templates/)

谢谢，我很感激你看看。

圣诞节快乐

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:20:27.957

**添加滚动条：**

使用这些设置`#content`将滚动条放置在CSS属性`div` *需要的时候。*`overflow`

```
#content {height:868px;width:740px;float:left;position:relative;overflow:auto;} 
```

**背景图像修复：**

因为该`background`图像仅适用于`768px`high via的原始高度`.box1`，您需要对 CSS 进行修改并将背景图像放入其中`.inner`，以便它也覆盖滚动部分。

```
.box1 {width:100%;height:100%;position:absolute;top:0;left:0}
.inner {background:url(../images/bg_content.png) repeat;padding:25px 55px 25px 60px;position:relative} 
```

**参考评论：**

> *“我什至会对一个解决方案感到满意，它不是调整高度，而是在框中两个 div 底部的一个按钮，当单击该按钮时，它会将内容滚动到下一段信息。”*

要实现此功能，请创建两个按钮。一个将是`Continue`另一个`Previous`。这是 HTML 中的模拟片段，介绍如何拆分 UL 列表并添加这两个按钮。您可能需要根据需要添加/删除`<br />`此解决方案：

```
<li><a href="#">Gon recusandae taque earum rerum hic tenetur a sapiente delectus</a></li>
<li><a href="#">Aut reiciendis voluptatibus maiores alias consequatur</a></li>
<li><a href="#">Aut perferendis doloribus asperiores eveniet et voluptates repudiandae</a></li>
<li><a href="#">Sed ut perspiciatis unde omnis iste natus error sit voluptatem</a></li>
</ul>

<a class="button1 continue"><span></span><strong>Continue</strong></a> <br /><br /><br /><br />

<a class="button1 previous"><span></span><strong>Previous</strong></a> <br /><br />

<ul class="list2 pad_bot1">
 <li><a href="#">Temporibus autem quibusdam et aut officiis debitis aut rerum</a></li>
 <li><a href="#">Necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae</a></li>
 <li><a href="#">Gon recusandae taque earum rerum hic tenetur a sapiente delectus</a></li>
 <li><a href="#">Aut reiciendis voluptatibus maiores alias consequatur</a></li> 
```

然后将以下 jQuery 添加到`script.js`文件的底部，但在该`Document Ready`部分内。

```
 // continue button
  $('.continue').click(function(){
     $('.inner').animate({top: -825}, 1000);  // NEGATIVE Value 768px min + button height 33px + a little extra = 825px
  });

  // previous button
  $('.previous').click(function(){
     $('.inner').animate({top: 0}, 1000);  // Reset top to 0\. Therefore, this previous button is good for 2nd page, not 3rd.
  }); 
```

上面的 jQuery CSS 设置假定按钮位于页面底部。根据需要调整特定值。1000 是指 1000 毫秒或 1 秒的动画。

# asp.net-mvc - 在 EF5 迁移中将字段定义为自动增量

> ID：14033428
> 
> 赞同：4
> 
> 时间：2012-12-25T19:29:59.313
> 
> 标签：asp.net-mvc, entity-framework

我正在使用 EF 迁移创建一个表，例如：

```
this.CreateTable("Message",
            c => new
            {
                Id = c.Long(nullable: false, identity: true, defaultValue: 0),
                Subject = c.String(nullable: false, maxLength: 64),
                Body = c.String(nullable: false, isMaxLength: true)
            })
            .PrimaryKey(c => c.Id)
            .Index(c => c.Id, unique: true); 
```

如何将 Id 字段定义为 auto_increment？我很确定它必须是可能的，但我只是在努力找出......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:09:28.487

好的，似乎在字段中设置属性“identity：true”就足够了，但由于某种原因，该字段未定义为 IDENTITY(1, 1)。

在这篇文章中找到了解决方法：

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/33db16ac-e166-455f-a47b-1e5fe0557979/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/33db16ac-e166-455f-a47b-1e5fe0557979/)

它对我有用：

```
Id = new ColumnModel(PrimitiveTypeKind.Int64) { IsNullable = false, IsIdentity = true }, 
```

现在将列定义为 IDENTITY(1, 1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:05:12.147

如果您确实想在代码中自动生成它，您可以跳过 Id 字段上的注释并执行如下操作。

```
public abstract class AbstractContext : DbContext {

      /// <summary>
      /// Custom processing when saving entities in changetracker
      /// </summary>
      /// <returns></returns>
      public override int SaveChanges()
      {
          // recommended to explicitly set New Guid for appropriate entities
          foreach (var entry in ChangeTracker.Entries<ModelBase>().Where(e => e.State == EntityState.Added) ) {

              // only generate if property isn't identity...
              Type t = entry.Entity.GetType();
              var info = t.GetProperty("Id").GetCustomAttributes(
                  typeof(DatabaseGeneratedAttribute), true).Cast<DatabaseGeneratedAttribute>().Single();

              if (info.DatabaseGeneratedOption != DatabaseGeneratedOption.Identity) {
                  entry.Entity.Id = Guid.NewGuid(); // now we make it
              }
          }
          return base.SaveChanges();
      }

    } 
```

有关更多信息，请查看[**使用实体键**](http://msdn.microsoft.com/en-us/library/dd283139.aspx)

*我从上面评论中显示的链接中得到了这个。*

我希望这对你有帮助。

# sencha-touch-2 - 在 Sencha Touch 2 中渲染 Map 后初始化 List

> ID：14033432
> 
> 赞同：0
> 
> 时间：2012-12-25T19:30:43.133
> 
> 标签：sencha-touch-2

我有一个列表和一个地图视图

我希望只有在调用 map 'maprender' 事件后才初始化列表，这可能吗？

因为我的地图加载后我会根据当前位置获取位置并加载列表中的数据。在当前情况下，我无法使用默认值获取位置和列表初始化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:39:06.830

是的，这是可能的。只需为 maprender 添加一个侦听器，然后在发生这种情况时创建列表。根据您的布局，您可能需要使用容器作为列表的包装器，以便在触发 maprender 时将列表添加到该列表中。

# wpf - 一种风格内的祖先绑定？

> ID：14033434
> 
> 赞同：4
> 
> 时间：2012-12-25T19:31:00.423
> 
> 标签：wpf, styles, relativesource

如何绑定到样式中的祖先？

我想做以下事情（试图让列宽自动与列表视图对齐）

```
<Style x:Key="m_ListViewStyle" TargetType="{x:Type ListView}" x:Shared="False">
<Setter Property="View">
    <Setter.Value>
        <GridView>
            <GridViewColumn>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        ...
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>

            <GridViewColumn Width="{Binding Path=ActualWidth, RelativeSource={RelativeSource AncestorType={x:Type ListView}}}"/>
        </GridView>
    </Setter.Value>
</Setter> 
```

但我得到绑定错误 -

```
Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ListView', AncestorLevel='1''. 
```

# java - 存储数组 Double[][] 或 List > 或者 smth 与 Hibernate

> ID：14033440
> 
> 赞同：-1
> 
> 时间：2012-12-25T19:31:48.160
> 
> 标签：java, hibernate, jpa

问候！需要帮助解决以下问题：

假设我们需要存储 Double 值的实体组，例如

```
M1: {M1.1, M1.2, ..., M1.10}
M2: {M2.1, M2.2, ..., M2.15}
...
M10: {M10.1, M10.2,..., M10.5} 
```

这些值由客户端通过 JSP 设置。

如何将它们存储在实体中？我缺乏关于如何存储`List<List<Double>>`or `List<ArrayList<Double>>`、 or`double[][]`等​​的理解和示例...谷歌搜索，但从未找到答案.. 不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:39:10.547

在弄清楚如何使用 Hibernate 存储数据之前，您需要弄清楚数据将如何在数据库中表示。一旦你有了这些，从 Java 到 SQL 的映射就会变得更加清晰。

您要做的第一件事是弄清楚如何存储数字列表。这样做最直接的方法是创建两个表：

1.  NumbersList 表，带有一个 ID 和一些与列表相关的附加数据。

2.  NumbersListEntry 表包含三个字段：ListId（引用 NumbersList 表）、EntryOrder（即条目在列表中的位置）和 Number（实际编号）。

    一旦你有了这个，你可以用两个额外的表存储列表列表，与第一个表非常相似：

3.  ListOfList 表的 ID 和一些与列表相关的数据（所有者等）。

4.  具有相似三个字段的 ListOfListEntry 表：ListOfListId（引用 ListOfList 表）、EntryOrder 和 NumbersListId（引用 NumbersList 表）。

# eclipse - 在 Eclipse 中拉入 git 存储库时出现“无法获得分支的广告 Ref ...”错误

> ID：14033442
> 
> 赞同：5
> 
> 时间：2012-12-25T19:32:18.970
> 
> 标签：eclipse, git

尝试在 Eclipse 的 git 存储库中拉取（团队|从上下文菜单中拉取）时`Could not get advertised Ref for branch refs/heads/develop`出现错误。我想那是因为`develop`同时删除了名为的远程分支。分支`develop`当前已签出。

如何解决这个问题？
我可以配置 git 和/或 Eclipse，以便下次删除其他远程分支时不会出现此错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-18T18:26:29.440

我有同样的错误，所以我确保我的`.git/config`文件有以下内容：

```
[branch "mybranch"]
    remote = origin
    merge = refs/heads/mybranch 
```

这让 EGit 很高兴。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T22:15:06.933

[正如我在“如何停止在 git 中跟踪远程分支？](https://stackoverflow.com/a/3046478/6309) ”中提到的，您可以取消设置关联的远程跟踪分支：

```
git config --unset branch.develop.remote
git config --unset branch.develop.merge 
```

当然可以在 EGit 中编辑分支的 fetch/push 规范（参见“ [Direct Fetch and Push Support](http://wiki.eclipse.org/EGit/User_Guide#Direct_Fetch_and_Push_Support) ”），但我发现通过 git CLI（命令行界面）要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-23T09:22:05.620

当我弄乱分支名称时，我遇到了这个问题 - 尽管分支存在于原点，但无法拉动。

我通过切换到另一个分支然后拉来“解决”它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-13T19:31:42.980

我解决了这个问题

`git push --set-upstream origin <branch_name>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-09T08:42:34.760

删除远程分支并在本地拉取相应分支后出现此错误，因此解决方案很简单：

*   切换到有效分支然后拉
*   或将本地分支推送到远程
*   或为本地分支设置另一个远程分支
*   ...任何此类操作都可以提供帮助

# tabs - jQuery 地址子选项卡（嵌套选项卡）（深度链接）

> ID：14033445
> 
> 赞同：0
> 
> 时间：2012-12-25T19:32:48.063
> 
> 标签：tabs, nested, jquery-address

我试图使用 jquery.addres 插件，有许多父选项卡和许多子选项卡，第一个选项卡工作正常，它显示所有子选项卡，但第二个选项卡无法正常工作，并且在示例页面上它们显示第一个选项卡许多子选项卡，第二个选项卡具有简单的内容

[这是这里](http://www.asual.com/jquery/address/samples/subtabs/#/tab1)的示例链接

[我确实在此处](http://jsbin.com/uvabux/22/edit)复制了 Jbin 页面 ，您会注意到 tab2 没有子选项卡，我怎样才能使其工作

这是我的 HTML，它在第二个选项卡上不起作用，我的猜测是我不应该使用 ID 子选项卡两次，如果我确实将 ID 更改为一个类，并将上面的脚本从“#”更改为“。”，我仍然无法重现第二个选项卡下的子选项卡，我相信它一定很容易，但我就是想不通

```
<div class="page">
<h1>jQuery Address SubTabs</h1>

<div id="tabs">
  <ul>
    <li><a href="#tab1">Tab 1</a></li>

    <li><a href="#tab2">Tab 2</a></li>
  </ul>

  <div id="tab1">
    <p>Tab 1</p>

    <div id="subtabs">
      <ul>
        <li><a href="#tab1-subtab1">SubTab 1</a></li>

        <li><a href="#tab1-subtab2">SubTab 2</a></li>
      </ul>

      <div id="tab1-subtab1">
        <p>SubTab 1</p>
      </div>

      <div id="tab1-subtab2">
        <p>SubTab 2</p>
      </div>
    </div>
  </div> <!--end subtab1-->

  <div id="tab2">
    <p>Tab 2</p>

    <div id="subtabs">
      <ul>
        <li><a href="#tab2-subtab1">SubTab 1</a></li>

        <li><a href="#tab2-subtab2">SubTab 2</a></li>
      </ul>

      <div id="tab2-subtab1">
        <p>SubTab 1</p>
      </div>

      <div id="tab2-subtab2">
        <p>SubTab 2</p>
      </div>
    </div> <!--end subtab2-->
  </div> <!--end tab2-->
</div> <!--end tabs--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:54:04.687

我最终使用了 jquery 工具，这似乎是最好的选择 [http://jquerytools.org/demos/tabs/multiple-tabs.htm](http://jquerytools.org/demos/tabs/multiple-tabs.htm) 希望它能帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T18:21:51.743

解决方案在头脑中：

```
 var tabs,
                separator = '-',
                initialTab = 'tab1',
                navSelector = 'ul.ui-tabs-nav a',
                tabSelector = '#tabs, #tab1 > #subtabs';

 var tabs,
                separator = '-',
                initialTab = 'tab1',
                navSelector = 'ul.ui-tabs-nav a',
                tabSelector = '#tabs, #tab1, #tab2 > #subtabs'; 
```

看...添加#tab2

# c# - 使用 asp.net 进行 URL 映射

> ID：14033452
> 
> 赞同：-1
> 
> 时间：2012-12-25T19:34:04.883
> 
> 标签：c#, asp.net, rewrite

我正在创建一个网站，我需要映射我的网址。我想避免在映射过程中丢失 css。我想要这样的东西..

```
http://www.vitagamer.net/Game.aspx?id=12 
```

至

```
http://www.vitagamer.net/games/this-is-a-game-name/ 
```

现在我一直在考虑以下算法..

1.  接收请求的 url..
2.  分成几部分，并在数据库中搜索与“this-is-a-game-name”关联的 id。
3.  服务`http://www.vitagamer.net/game.aspx?id=12`页面

我一直在网上寻找，但我很困惑。如何进行映射？有多少种方法？

重写和映射之间有区别吗？

* * *

更新

我还需要向我的页面添加超链接，如下所示

```
http://www.vitagamer.net/games/gamename/ 
```

我应该只用字符串做事吗？或者有更有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:35:04.393

正如您似乎在 Asp.Net WebForms 上一样，我建议编写一个 HttpModule 来捕获传入的请求并重写 URL。

这是一个重复的问题，我在这里找到了第二个建议的答案：[ASP.NET URL Rewriting](https://stackoverflow.com/questions/2262/asp-net-url-rewriting?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T01:36:20.660

您应该考虑[`Microsoft.AspNet.FriendlyUrls`](http://nuget.org/packages/Microsoft.AspNet.FriendlyUrls/1.0.0-rc1)轻松使用路由并为 ASP.Net Web 窗体获取“友好 url”或“无扩展 url”。

这是[Scott Hanselman 的入门书](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T22:14:29.360

IIS 7 支持 URL 重写，您可以使用 IIS 接口来管理 URL： [http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

# matlab - 具有递减循环计数器的Matlab for循环

> ID：14033454
> 
> 赞同：5
> 
> 时间：2012-12-25T19:34:28.177
> 
> 标签：matlab, for-loop

这不起作用，我可以弄清楚为什么，你能帮我吗？

```
for l = (300:1:-1)
    gauss = fspecial('gaussian',[1 round(1+0.15*l)], 0.015*l);
    filter_g(l,:,1) = filter2(gauss, img_d(l,:,1));
    filter_g(l,:,2) = filter2(gauss, img_d(l,:,2));
    filter_g(l,:,3) = filter2(gauss, img_d(l,:,3));

end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T19:43:39.083

向量`(300:1:-1)`将评估为空。

向量是`start:step:end`。因此，你想要`300:-1:1`

# xml - 关于spring配置文件

> ID：14033455
> 
> 赞同：0
> 
> 时间：2012-12-25T19:34:31.420
> 
> 标签：xml, spring

我正在使用 MyEclipse 8.6.1：这是我的 applicationContext.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<bean id="addr" class="info.inetsolv.Address" abstract="false"
    lazy-init="default" autowire="default" dependency-check="default"
    p:street="bk guda" p:city="hyd" p:state="ap">
</bean></beans> 
```

这是我的java程序：包info.inetsolv；

```
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.Resource;

public class MyAppSprContnr {

public static void main(String[] args) {
  Resource resource = new ClassPathResource("applicationContext.xml");  
  BeanFactory container= new XmlBeanFactory(resource);
  System.out.println("container"+container);
}

} 
```

这是我得到的例外

```
log4j:WARN No appenders could be found for logger      (org.springframework.beans.factory.xml.XmlBeanDefinitionReader).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main"       org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML   document from class path resource [applicationContext.xml] is invalid; nested exception is   org.xml.sax.SAXParseException: cvc-complex-type.3.2.2: Attribute 'dependency-check' is not   allowed to appear in element 'bean'.
at org.springframework.b 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T19:50:21.433

自 Spring 以来，该`dependency-check`属性已被弃用`3.0`。以下解决方法可以提供等效的功能

*   仅使用构造函数（构造函数注入而不是 setter 注入）来确保设置正确的属性。
*   使用实现的专用 init 方法创建设置器。
*   `@Required`在需要属性时创建带有注释的 setter 。
*   使用`@Autowired`- 驱动的注入，这也意味着默认情况下需要的属性。

相关：[@Required 示例](http://www.mkyong.com/spring/spring-dependency-checking-with-required-annotation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-29T17:41:39.233

我同意依赖在 Spring 3 中被弃用，但我测试到 Spring 4，它在 Spring 5 中被删除。

我更喜欢使用 @Required 注释，因为依赖检查的缺点，因为它认为所有组件都是必需的，这可能在所有情况下都是必需的。

# php - 遍历嵌入在 stdClass 中的数组

> ID：14033460
> 
> 赞同：1
> 
> 时间：2012-12-25T19:35:14.520
> 
> 标签：php, arrays, api, loops, stdclass

使用我们提供商的 API，我从 API 调用中获取以下数据：

数据（表示 orderid (1604)，然后是订单中的各个项目）：

```
object(stdClass)#395 (1) {  
    ["GetOrderDetailsInfoResult"]=> object(stdClass)#396 (4) {  
        ["RequestID"]=> int(113724)  
        ["Success"]=> int(1)  
        ["Message"]=> string(0) ""  
        ["OrderDetailsResponse"]=> object(stdClass)#397 (1) {  
            ["OrderDetailsResponse"]=> array(2) {  
                [0]=> object(stdClass)#53 (12) {  
                    ["OrderID"]=> int(1604)  
                    ["PartyID"]=> int(0)  
                    ["OrderDetailID"]=> int(805)  
                    ["ProductID"]=> string(3) "B25"  
                    ["Description"]=> string(16) "50 Credits"  
                    ["Quantity"]=> int(1)  
                    ["Price"]=> string(7) "25.0000"  
                    ["Volume"]=> string(7) "25.0000"  
                    ["Tax"]=> string(6) "0.0000"  
                    ["TaxableAmount"]=> string(6) "0.0000"  
                    ["GroupOwner"]=> int(0)  
                    ["ParentOrderDetailID"]=> int(0)  
                }  
                [1]=> object(stdClass)#419 (12) {  
                    ["OrderID"]=> int(1604)  
                    ["PartyID"]=> int(0)  
                    ["OrderDetailID"]=> int(807)  
                    ["ProductID"]=> string(4) "B100"  
                    ["Description"]=> string(17) "200 Credits"  
                    ["Quantity"]=> int(1)  
                    ["Price"]=> string(8) "100.0000"  
                    ["Volume"]=> string(8) "100.0000"  
                    ["Tax"]=> string(6) "0.0000"  
                    ["TaxableAmount"]=> string(6) "0.0000"  
                    ["GroupOwner"]=> int(0)  
                    ["ParentOrderDetailID"]=> int(0)  
                }  
            }  
        }  
    }  
} 
```

我可以得到尽可能多的 RequestID，但我无法进入订单的值...如何使用 php 直接获取单个项目？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:46:13.883

这些项目可以像这样迭代：

```
foreach($data->GetOrderDetailsInfoResult->OrderDetailsResponse->OrderDetailsResponse as $item)
{
    echo $item->ProductID;
    echo $item->Description;
    echo $item->Quantity;
    echo $item->Price;
} 
```

# kendo-ui - 使用 kendo.datasource 更改发送到服务器以获取更新相关数据的数据？

> ID：14033463
> 
> 赞同：0
> 
> 时间：2012-12-25T19:35:53.100
> 
> 标签：kendo-ui

我正在使用 $expand 来获取工作正常的相关数据，但是我需要更改在数据更新时发送回服务器的数据

例如，如果我的服务器端数据模型包含两个实体联系人 ID：号码 firstName：字符串 middleName：字符串姓氏：字符串 ContactType：ContactType n-1

ContactType ID：编号名称：字符串 ContactCollection：ContactType 1-n

这是我的数据源代码

```
function GetContactDS(){
        var MyModel = kendo.data.Model.define({
                                id: "ID",
                                fields: {
                                __KEY: { type: "string" },
                                __STAMP: { type: "number" },
                                ID: { editable: false, nullable: true },                                                               
                                firstName: { type: "string" },
                                middleName: { type: "string" },                                                        
                                lastName: { type: "string" }                               
                                },                             
                            });

            var crudServiceBaseUrl = "http://127.0.0.1:8081/cors/Contact";
            var  MyDataSource = new kendo.data.DataSource({
        transport: {
       read: function(options) {
               $.ajax( {
                url: crudServiceBaseUrl + '/?$expand=ContactType',
                dataType: "json",
                data: options.data,
                success: function(result) {
                    options.success(result);
                }
            });
        },

    update: function(options) {
            $.ajax( {
                url: crudServiceBaseUrl + "/?$method=update",
                type: "POST",
                dataType: "json",
                data: kendo.stringify(options.data.models),
                success: function(result) {
                    // notify the DataSource that the operation is complete

                    options.success(result);
                }
            });
        },
                                destroy: {
                                url: crudServiceBaseUrl + "/?$method=delete",
                                type: "GET"
                                },
                                create: {
                                url: crudServiceBaseUrl + "/?$method=update",
                                dataType: "json",
                                type: "POST"
                                },
                                          parameterMap: function(options, operation) {
                                    if (operation !== "read" && options.models) {
                                       return  JSON.stringify({"__ENTITIES": options.models});
                                    }
                                }
                                },
                                batch: true,
                                pageSize: 30,
                                schema: {
                                     model: MyModel,
                                    data: "__ENTITIES"                         
                                    }

            });

      return MyDataSource;
} 
```

读取请求返回此数据

```
{"__entityModel":"Contact","__COUNT":1,"__SENT":1,"__FIRST":0,"__ENTITIES":[{"__KEY":"7","__STAMP":9,"ID":7,"firstName":"jay","middleName":"a","lastName":"blue","ContactType":{"__KEY":"2","__STAMP":4,"ID":2,"name":"Home","contactCollection":{"__deferred":{"uri":"/rest/ContactType(2)/contactCollection?$expand=contactCollection"}}}}]} 
```

这是调用读取并绑定到网格的代码

```
var ContactDS = GetContactDS();

    $("#grid").kendoGrid({
        selectable: "row",
        filterable: true,
        pageable: true,
        sortable: true,
        change: function(){

                 datamodel = this.dataItem(this.select());
                 ID = datamodel.ID

        },
        dataSource: ContactDS,
        columns: [
            { field: "ID" },
            { field: "firstName" },
            { field: "middleName" },
            { field: "lastName" },
            {field: "ContactType.name"}

        ]
    }); 
```

哪个工作正常我在我的数据源中获得了 ContactType 的扩展信息，它可以很好地绑定到网格。现在我想在将所选数据行读入表单后更新，将数据读入表单工作正常。

问题是将更新发送回服务器，它期望相关实体 ContactType 的格式略有不同它只需要“__Key”的更改值来更新这是我的更新函数：

```
$("#update").click(function () {
                  datamodel.set("firstName", $("#firstName").val());
                  datamodel.set("lastName", $("#lastName").val());
                  datamodel.set("middleName", $("#middleName").val());
               //   datamodel.set("ContactType.__KEY",3);

                  ContactDS.sync(); 
```

这是服务器期望的数据

```
{ "__ENTITIES": [{"__KEY":"7","__STAMP":14,"firstName":"jay","middleName":"a","lastName":"red","ContactType":{"__KEY":"2"}}]} 
```

这是 kendo.datasource 发送的内容

```
[{"__KEY":"7","__STAMP":12,"ID":7,"firstName":"jay","middleName":"a","lastName":"blue","ContactType":{"__KEY":"3","__STAMP":2,"ID":3,"name":"Work","contactCollection":{"__deferred":{"uri":"/rest/ContactType(3)/contactCollection?$expand=contactCollection"}}}}] 
```

那么我该如何重新格式化数据或定义我的模型或数据源选项，以确保删除额外的 ContactType 字段，只留下更新的“_ *KEY：”以及将整个请求包装在 {“* _ENTITIES”：}

谢谢你的帮助！

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:41:11.627

您可以尝试使用**[parameterMap](http://docs.kendoui.com/api/framework/datasource#transportparametermap-function)**函数以您需要的方式格式化数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:57:56.753

我想我从这篇[文章中找到了答案](http://www.kendoui.com/forums/ui/grid/kendo-grid-custom-editor-for-foreign-key-field.aspx)

它解释了有关使用 parameterMap 的更多信息。如果您查看 parameterMap 上的 kendoui 文档，它似乎表明这仅用于管理 pageIndex、size、orderBy 等参数。但是从上面的帖子中，它向您展示了如何删除相关实体，或者您可以删除或修改实体或相关实体的字段

示例我可以只删除相关实体 ContactType 的 ContactTypeID

参数映射：函数（选项，操作）{

```
 if (operation == "create") {

                            return  JSON.stringify({"__ENTITIES": options.models});
                            }
                            else if (operation == "update") {
                                debugger;
                            delete options.models[0].ContactType.ID;
                            return  JSON.stringify({"__ENTITIES": options.models});
                             }
                        } 
```

还有一些工作要做，但我认为这会让我到达那里

感谢佩奇卡的帮助

# ruby-on-rails - 移除 Devise gem 后在 Heroku 上部署 Rails

> ID：14033464
> 
> 赞同：2
> 
> 时间：2012-12-25T19:36:00.847
> 
> 标签：ruby-on-rails, deployment, heroku, devise, gem

我正在尝试在 Heroku 上部署我的第一个 rails 应用程序。我正在使用设计进行身份验证，但我的需求发生了变化，所以我删除了它，现在正在使用巫术。

一切都在本地工作，但是在部署时，我在迁移数据库时收到以下消息：

```
Running `rake db:migrate` attached to terminal... up, run.5220
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
rake aborted!
uninitialized constant Devise
/app/config/initializers/devise.rb:3:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:587:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:587:in `block in <class:Engine>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/app/config/environment.rb:5:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:103:in `require_environment!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:295:in `block (2 levels) in initialize_tasks'
Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

我似乎找不到任何关于设计的剩余提及。有没有其他人在移除 gem 后遇到过这样的问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:37:53.090

您还需要删除设计初始化文件`/app/config/initializers/devise.rb`。

# c - 返回数组与返回 int64_t (C/C++)

> ID：14033465
> 
> 赞同：0
> 
> 时间：2012-12-25T19:36:08.110
> 
> 标签：c, arrays

我一次又一次地读到你不能从函数中返回一个数组（在 C/C++ 中），但如果是这样的话，如何`int64_t`从函数中返回一个？不`int64_t`只是一个数组`long int`吗？

（是的，我知道您可以返回指向数组开头的指针，但我说的是返回`int[4]`，而不是`int*`。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:37:27.117

> int64_t 不只是一个 long int 数组吗？

不，`int64_t`是标量类型的别名（与数组类型等聚合类型相反），通常它是`long long`类型的别名。

当然，这适用于`int64_t`在 C 中定义为精确宽度整数类型是可选的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:40:12.870

您实际上可以返回任何不是数组的类型 - 例如，如果您希望返回四个 int 值，您可以返回一个`struct my_4ints { int x[4] };`

但是 int64_t （在 32 位机器上）是一个“项目”。它恰好作为两个寄存器值返回，在 x86 上，通常是 eax、edx。但这仍然返回一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:41:06.013

如果将数组包装在结构中，则可以从函数中返回它。但这是要避免的，因为 ABI 在这类事情上并不完全稳定（例如：使用 gcc 3.3 编译的对象链接到在 Solaris 上使用 gcc 3.4 编译的对象不兼容，并且在这种情况下可能会崩溃）。

# php - 如何自定义 wordpress 功能：标签？

> ID：14033470
> 
> 赞同：3
> 
> 时间：2012-12-25T19:36:57.260
> 
> 标签：php, css, wordpress, post, tags

在我的 wordpress 帖子中，我包含了使用 wordpress 功能的标签

```
<?php the_tags( $before, $sep, $after ); ?> 
```

我的实际CSS：

```
.postclass{
  margin:10px 0px 10px 0px;
  }

.posttag{
  font-size:10px;
  float:left;
  color:#212121;
  margin-right:15px;
  padding:5px;
  border-radius:2px;
  background:black;
} 
```

在我的模板中：

```
<div class="postclass">
     <?php the_tags( '<p class="posttag">', ',', '</p>' ); ?>
</div> 
```

这为我提供了相同黑色背景中的所有标签。如何获取每个带有黑色背景的标签文本，每个标签都用逗号分隔？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T19:45:56.397

遵循此处的示例：http: [//codex.wordpress.org/Function_Reference/get_the_tag_list](http://codex.wordpress.org/Function_Reference/get_the_tag_list)

```
<div class="postclass">
     <?php the_tags( '<p class="posttag">', '</p><p class="posttag">', '</p>' ); ?>
</div> 
```

这会将所有标签单独包装在`<p class="posttag">[link]</p>`.

## 更接近你的 jsfiddle 的东西：

### PHP

```
<?php the_tags( '<ul class="postclass"><li>', ',</li><li>', '</li></ul>' ); ?> 
```

### CSS

```
ul.postclass li {
    float: left;
}
ul.postclass li a {
    padding: 5px;
    background-color: black;
} 
```

`the_tags()`您**无法**像在`<a>`jsfiddle 中那样自定义-tag 本身。你只能把它包起来。为了实现这一点，您必须使用[`get_the_terms()`](http://codex.wordpress.org/Function_Reference/get_the_terms)它将返回您可以后处理的标签对象数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-23T18:49:23.317

这应该有效：

1.  在您的 WordPress post.php 中添加一个 div 类，后跟标签函数，如下所示：

```
<div class="postclass">
<?php echo esc_html__( '', 'posttag' ); ?>
</div> 
```

如果您需要在每个标签之前添加“#”，请添加这个。

```
<div class="postclass">
<?php echo esc_html__( '', 'posttag' ); ?><?php the_tags( "#", "#" ); ?>
</div> 
```

2.  在你的 CSS 上：

```
.postclass{
  font-size:10px;
}
.postclass a{
  text-decoration: none;
  padding:5px 10px;
  font-size:10px;
  color:white;
  border-radius:3px;
  background:black;
} 
```

工作示例：[https](https://koreanwave.org)
://koreanwave.org （桌面：悬停在图像底部）
（移动：悬停@USER-NAME）

# html - 如何禁用 CSS 规则

> ID：14033476
> 
> 赞同：5
> 
> 时间：2012-12-25T19:38:02.763
> 
> 标签：html, css

我正在使用设置 CSS 规则的 Wordpress 轮播插件

```
body * {
  line-height:1.2em;
} 
```

这给我的布局带来了麻烦。我的 CSS 中的行高`body`是

```
body{ line-height: 19px;} 
```

所以我覆盖`body *`了 as`{line-height:19px}`但它仍然破坏了一些布局。当我使用 Firebug 删除该规则时，一切正常。

现在这里的问题是，我不想编辑插件 CSS 文件，因为每次更新它时，我都必须这样做。

有没有办法可以消除效果`body *`？

此声明优先于所有其他`line-height`属性。

这是[链接](http://everesttravel.com.au/wp/)。轮播插件加载的 CSS 文件破坏了导航。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T19:41:16.213

通过像这样覆盖它来重置行高：

```
body * { line-height: inherit; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T19:42:04.743

最好为 body 元素声明一个`id`，它具有最高的特异性，而不是应用`line-height`

```
<style>
#super_container {
   line-height: 19px;
}
</style>

<body id="super_container">
    <!-- All stuff goes here -->
</body> 
```

或者您可以使用具有最高特异性的内联样式，它将覆盖任何已定义的样式，`<body>`但是如果您想更改您需要在每个页面上进行更改，这将是乏味的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:39:44.793

用这个 ：

```
body * { line-height: 19px !important;} 
```

这将覆盖在其他 css 文件中设置的任何其他行高，或者您可以将其放入 HTML

```
<style>
    body * { line-height: 19px}
</style> 
```

HTML 中的样式元素覆盖所有 css 文件

或者......你可以这样做

```
<body style="line-height: 19px;"> ... </body> 
```

元素中的内联 css 覆盖所有 css 文件和`<style>`元素

# c - 为什么从标准输入使用 fgets 读取时忽略第一个字符串？

> ID：14033477
> 
> 赞同：2
> 
> 时间：2012-12-25T19:38:14.063
> 
> 标签：c, stdin, fgets

> **可能重复：**
> [Dev-C++ 输入被跳过](https://stackoverflow.com/questions/11907102/dev-c-input-skipped)

我正在尝试使用 fgets 从标准输入读取字符串数组，但我想读取的第一个字符串总是被忽略。是什么导致了这个问题？

```
#include <stdio.h>

int main()
{
    int i;
    struct material
    {
        char name[30];
        float price, kg;
    };
    unsigned m,nr;
    printf("Lorry capacity=");
    scanf("%u", &m);
    printf("Number of materials=");
    putchar('\n');
    scanf("%u", &nr);
    struct material list[nr];
    for (i=0; i<nr; i++)
    {
        printf("Name=");
        fgets(list[i].name, 30, stdin);
    }
    putchar('\n');
    for (i=0; i<nr; i++)
    {
        printf("%s ", list[i].name);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:41:43.127

```
scanf("%u", &nr);
struct material list[nr];
for (i=0; i<nr; i++)
{
    printf("Name=");
    fgets(list[i].name, 30, stdin); 
```

将`scanf("%u", &nr);`换行符留在输入缓冲区中，因此`fgets`无需进一步输入即可找到空行。

出于这个原因（以及其他原因），混合`(f)scanf`和通常是一个坏主意。`fgets`

作为快速修复，在第一个之前清空输入缓冲区`fgets`，

```
int ch;
while((ch = getchar()) != EOF && ch != '\n');
if (ch == EOF) {
    // oops
} 
```

一个更有原则的解决方法是在使用之前读入值`fgets`以获取包括换行符在内的整行，并使用`strtoul`or解码数字`sscanf`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T20:21:50.163

我注意到我可以删除输入缓冲区中留下的换行符，方法是使用`getchar()`.

此外，我必须使用以下代码从 fgets() 输入中删除尾随换行符：

```
char *pos;
if ((pos=strchr(Name, '\n')) != NULL)
    *pos = '\0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T19:41:46.740

这是一个非常常见的错误。使用 scanf 读取数字后，您通过按 ENTER 键入的换行符留在输入缓冲区中，因此对 fgets 的第一次调用会读取仅包含该换行符的（非常短的）行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T21:11:07.300

通常被误解的一件事是，当您要求用户输入时，您会得到免费赠品。

电脑询问材料量时：

> 材料数量=
> 51

你输入“51”，你真的得到了三个字符：`'5'`、`'1'`和`'\n'`。当您按下回车键时，所有内容都带有换行符。

从用户那里获得输入的不同实用程序处理这个不同。`fgets()`将读取换行符，然后将输入存储为`"51\n"`. `scanf()`如果您使用's string format specificer将其作为字符串读取，`"%s"`您将仅获得数字`"51"`，并且换行符留在`stdin`缓冲区中。

因此，在您的情况下，您通过以下方式读取了一个数字`scanf`：

```
scanf("%u", &nr); 
```

留下换行符，然后当您尝试进行下一次阅读时：

```
fgets(list[i].name, 30, stdin); 
```

`fgets`拿起该换行符并存储它。

所以这里有很多可能的修复，一个是只使用`fgets()`，另一个是在每个 scanf 之后使用换行符`getchar()`，选择取决于你。

顺便说一句：您可以在 printfs 中插入换行符： printf("Number of materials=\n");

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-25T19:44:12.990

您可以在每个 scanf 之后执行 fgets，然后它将吃掉待处理的换行符：

```
char dummy[10];
...
scanf (...);
fgets (dummy, 1, stdin); 
```

# excel - LBound and Ubound conflicts in case of array which has been assigned by the Range

> ID：14033478
> 
> 赞同：1
> 
> 时间：2012-12-25T19:38:43.437
> 
> 标签：excel, vbscript, vba

**CODE**

```
 height = objExcel1.Application.WorksheetFunction.CountA(ob3.Columns(1))
    'MsgBox(height)
    ReDim dataArray(height - 2, 0) ' -1 for 0 index, -1 for the first row as header row, excluded
    str = ""
    dataArray = ob3.Range(ob3.Cells(2, 1),ob3.Cells(height, 1)).Value
    Set d = CreateObject("scripting.dictionary")
    'MsgBox(LBound(DeletArr) & ":" & UBound(DeletArr))
    For i = LBound(DeletArr) To UBound(DeletArr)
        If Not d.exists(DeletArr(i)) Then
            d(DeletArr(i)) =  0
        End If
    Next
    MsgBox(LBound(dataArray,1) & ":" & UBound(dataArray,1))
    For i = LBound(dataArray, 1)  To UBound(dataArray, 1) - 1

        If d.exists(dataArray(i, 1)) Then

            str = str & (i+1) & ":" & (i+1) & ","
            'ob3.Range(i & ":" & i).Delete

        Else
            'found = False
        End If

    Next 
```

VBScript Array is 0 based. But why `LBound(dataArray,1)` is giving starting subscript is `1`,why not 0? `Ubound` is giving the number - against which i am bit confused is it the last subscript of the array or the size?

Thanks,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T20:02:02.650

By default, the subscripts/indices of VBA arrays start at 0 (this is called the lower bound of the array) and run up to the number you specify in the Dim statement (this is called the upper bound of the array). If you would prefer your array index numbers to start at 1, include the following statement at the top of the module.

`Option Base 1`

![enter image description here](../Images/13aebc1c1e833144d2063cd51be4c1dc.png)

However when an array is populated by `Range` object using the `Transpose` method, the array Lower bound set to 1 even you are on default `Zero baed` mode. So array becomes 1 based.

e.g. the following data is added using `Transpose` method.

```
Array(1) = "Hola"
Array(2) = "Bonjour"
Array(3) = "Hello"
Array(4) = "Wei" 
```

Good thing is that this array `UBound` tells you number of elements (4) which = UBound. Unlike if it was zero based, then number of elements = Ubound + 1.

```
UBound(Array) --> 4
LBound(Array) --> 1 
```

In current 1-based scenario, the Ubound refers to the total number of elements. So in such cases you need to amend your code to track data within the array's `LBound`, `UBound` properties to avoid data loss.

**And by the way, by adding `Option Base 0` doesn't stop array being dimentioned to 1 based by `Transpose` method.** Which invalids my first comment.

# cordova - GCM 和 PhoneGap - 注册和注销 JS 函数问题

> ID：14033487
> 
> 赞同：0
> 
> 时间：2012-12-25T19:40:14.147
> 
> 标签：cordova, google-cloud-messaging

我已按照[本](http://devgirl.org/2012/10/25/tutorial-android-push-notifications-with-phonegap/)教程使用 PhoneGap 测试 GCM。

该应用程序正在启动，但我有两个问题：

1.  函数 window.GCM.register("xxxxxxxxxx", "GCM_Event", GCM_Success, GCM_Fail ); 不会触发 GCM_Event。

2.  函数 window.GCM.unregister( GCM_Success, GCM_Fail ); 生成一个听起来像这样的错误：“.. Activity com.cordova2.gmc.MainActivity 已泄露 IntentReceiver com.google.android.gcm.GCMBroadcastReceiver ..”

这有什么问题？我做错了什么吗？

我找到[了这个](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/3B5lqCZVWjs)论坛组，其中提到了这两个问题，但没有给出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:16:02.087

尝试

```
windows.plugins.GCM.register("xxxxxxxxxx", "GCM_Event", GCM_Success, GCM_Fail); 
```

# jquery - 下拉按钮：更新页面上单个按钮的选择文本

> ID：14033490
> 
> 赞同：1
> 
> 时间：2012-12-25T19:40:52.343
> 
> 标签：jquery, html, jquery-selectors

我有一个页面有一堆下拉按钮，例如：

```
 <div class=\"button middle dropdown\"><a href=\"#\">Engineer</a>
    <ul>
    <li><a href=\"#\">Name1</a></li>
    <li><a href=\"#\">Name2</a></li>
    </ul></div>
    <div class=\"button middle dropdown\"><a href=\"#\">Engineer</a>
    <ul>
    <li><a href=\"#\">Name1</a></li>
    <li><a href=\"#\">Name2</a></li>
    </ul></div> 
```

在同一页面上，我使用此 jQuery 将下拉按钮上的文本更新为选定的文本：

```
 $(document).ready(function() {
        $(".button.middle.dropdown ul li a").click(function() {
            var oldtext = $(".button.middle.dropdown a").html();
            var text = $(this).html();
            $(".button.middle.dropdown a").html(text);
            $(this).html(oldtext);
            $(".button.middle.dropdown a ul").hide();
        });     
    }); 
```

问题是这会更新页面上所有按钮的文本，而不仅仅是选择的那个。显然这样做是因为 jquery 代码在任何有`.button.middle.dropdown a`. 我会添加`id=""`到，`<a>`但这些按钮是在加载页面时动态创建的（来自 sql 查询）。如何让下拉按钮仅更新按下的下拉按钮上的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:54:01.493

利用`$(this)`

代替

```
$(".button.middle.dropdown a").html(); 
```

利用

```
$(this).html(); 
```

**完整代码**

```
$(document).ready(function() {
    $(".button.middle.dropdown ul li a").click(function() {
        var $this = $(this);
        var $link = $this.closest('.button.dropdown').children('a');
        var oldtext = $link.html();
        var text = $this.html();
        $link.html(text);
        $this.html(oldtext);
        $(".button.middle.dropdown a ul").hide();
    });
});​ 
```

**[检查小提琴](http://jsfiddle.net/5msJ2/)**

# html - 在字段集中定位元素

> ID：14033491
> 
> 赞同：0
> 
> 时间：2012-12-25T19:40:59.873
> 
> 标签：html, css

我做了一个自定义`fieldset`，它只在 Chrome 中运行良好。我该如何解决这个问题？

它必须是在字段右侧带有输入文本的标签，在字段右侧带有输入文本的标签，但在下面的 1 行中。

这是CSS：

```
#field {
    width: 300px;
}
.name {
    position: relative;
    float: right;
}
.email {
    position: relative;
    float: right;
} 
```

这是HTML：

```
<fieldset id = "field">
    <legend>Add a wish</legend>
    <input id = "name" class = "name" type = "text" width = "100"/>
    <label for = "name" class = "name">Nam::</label>
    <input id = "email" class = "email" type = "text" width = "100"/>               
    <label for = "email" class = "email">Email:</label>
    <label id = "wis">Wish</label>
    <textarea cols = "25" rows = "3" id = "wishes"></textarea>
</fieldset> 
```

# iphone - 如何在目标 c 中打开热点？

> ID：14033493
> 
> 赞同：-3
> 
> 时间：2012-12-25T19:41:05.663
> 
> 标签：iphone, objective-c, personal-hotspot

> **可能重复：**
> [打开个人热点？](https://stackoverflow.com/questions/6231435/turning-personal-hotspot-on)

有人知道如何打开和关闭目标 c 上的个人热点吗？

10 很多。

伊丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:46:34.650

您不能，这是您无法使用公共 API 访问的系统功能。

# c# - Cookie 在作为 WebRequest 的一部分发送时不保留任何数据

> ID：14033497
> 
> 赞同：0
> 
> 时间：2012-12-25T19:41:32.263
> 
> 标签：c#, asp.net, webforms

这就是我设置 cookie 数据并传递 Web 请求的方式。当我使用 fiddler 检查网站的响应时，我看到 cookie 没有数据，并且到期数据设置为 1900 年 1 月 1 日。任何帮助将不胜感激。如果以下代码中有不清楚的地方，或者您需要更多信息来回答我的问题，请告诉我。谢谢。

```
System.Net.Cookie userType = 
    new System.Net.Cookie("CUserType","subscriber", "/", "www.DOMAIN_NAME.com");
userType.Expires = DateTime.Now.AddYears(1);
System.Net.Cookie dUserType = 
    new System.Net.Cookie("dCUserType", "subscriber", "/", "www.DOMAIN_NAME.com");
dUserType.Expires = DateTime.Now.AddYears(1);

System.Net.CookieContainer cookieContainer = new System.Net.CookieContainer();
cookieContainer.Add(userType);    
cookieContainer.Add(dUserType);

HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(URL);

webRequest.Proxy = new WebProxy("127.0.0.1", 8888);   
webRequest.Referer = "http://DOMAIN_NAME/search/index.aspx?lid=3";  
webRequest.ContentType = "application/x-www-form-urlencoded";   
webRequest.Date = DateTime.Now;    
webRequest.CookieContainer = cookieContainer;

string result;

using (var stream = webRequest.GetResponse().GetResponseStream())
using (var reader = new StreamReader(stream, Encoding.UTF8))    
{
    result = reader.ReadToEnd();    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T19:56:15.753

设置 cookie 时，还需要设置域，因为 cookie`www.domain.com`和`domain.com`.

为了使它们相同，您需要`domain`在 cookie 上设置 。首先在`web.config`

```
<authentication mode="Forms">
 <forms domain="yoururl.com" ... />
</authentication> 
```

其次，当您手动设置 cookie 时（没有 www.）：

```
Response.Cookies[cookieName].Domain = "yoururl.com"; 
```

或者当你设置它（没有 subdomain `www.`）：

```
System.Net.Cookie dUserType = 
    new System.Net.Cookie("dCUserType", "subscriber", "/", "DOMAIN_NAME.com"); 
```

类似的问题和答案：
[使用相同登录数据库的多个应用程序相互注销](https://stackoverflow.com/questions/2454623/multiple-applications-using-same-login-database-logging-each-other-out/2491686#2491686)
[asp.net 表单身份验证在登录到另一个实例时注销](https://stackoverflow.com/questions/8236180/asp-net-forms-authentication-logged-out-when-logged-into-another-instance/8236300#8236300)
[以另一个用户身份登录时丢失会话/cookie](https://stackoverflow.com/questions/13940118/lost-session-cookie-when-login-as-another-user)

# python - django ImageField 没有上传文件

> ID：14033508
> 
> 赞同：0
> 
> 时间：2012-12-25T19:42:33.653
> 
> 标签：python, django, model, upload, imagefield

所以过去一个小时我一直在谷歌搜索这个问题，但无法找到解决方案。基本上就是这样：在我的model.py中，我有一个有这个的类

```
class Case(models.Model):
zoomOutImage = models.ImageField('Label', upload_to="zoomOutImage") 
```

在我的 settings.py 中，我的媒体 URL/ROOT 设置如下

```
MEDIA_ROOT = os.path.join(os.path.abspath(''),'app/static/ds/')
MEDIA_URL = '/static/ds/' 
```

来自网络服务器的服务应该是这样的：

```
http://127.0.0.1:8000/static/ds/zoomOutImage/actinic_granuloma_3.jpg 
```

我已经安装了 PIL（在 virtualENV 中）并且上传没有错误，唯一的问题是当我尝试通过管理面板上传文件时没有任何反应。没有错误什么都没有。该文件只是没有被开发服务器上传到 zoomOutImage 文件夹。谁能指出我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T23:56:18.550

我猜您的文件位于根目录的子目录中，名为“zoomOutImage”的子目录。或者甚至在根目录中调用类似的文件。我记得在上传到字符串中放了一个函数调用。该函数使用 os.join 和实例中的文件名创建路径和文件名。直接执行此操作，目前没有可用的示例代码。但必须能够谷歌这个。

看这里[https://stackoverflow.com/questions/1190697/django-filefield-with-upload-to-determined-at-runtime](https://stackoverflow.com/questions/1190697/django-filefield-with-upload-to-determined-at-runtime)

顺便说一句，我完全不同意你的回答，你不应该在你的设置中使用绝对路径！请参阅this answer [use css in django 1.4 development](https://stackoverflow.com/questions/13918043/use-css-in-django-1-4-development/13918899#13918899)了解如何使用正确的设置并参考您的项目路径

**编辑**（阅读您自己的答案后）

猜你错过了第一步：

这是您的 settings.py 文件的路径：

```
SETTINGS_DIR = os.path.dirname(os.path.realpath(__file__)) 
```

而且这是您的项目目录的路径：（我正在使用 buildout，所以称它为 buildout，但它是您项目的根目录）：

```
BUILDOUT_DIR = os.path.abspath(os.path.join(SETTINGS_DIR, '..')) 
```

从那里你可以定义你想要的一切：

```
STATIC_ROOT = os.path.join(BUILDOUT_DIR, 'var', 'static')
STATIC_URL = '/static_media/'
MEDIA_ROOT = os.path.join(BUILDOUT_DIR, 'var', 'media')
MEDIA_URL = '/media/' 
```

并在您的模板文件中引用如下图像：

```
<a href="{{MEDIA_URL}}{{ case.zoomOutImage }}"><img src="{{MEDIA_URL}}{{ case.zoomOutImage }}" width="100%"></a> 
```

当您给模板的对象称为 case

关于你的网址问题。你应该添加这个：

```
if settings.DEBUG:
    urlpatterns += patterns('',
        (r'', include('staticfiles.urls')),
    ) 
```

并查看上面关于使用 css 的问题的链接，这是同样的问题，但是在开发过程中可以找到 css 文件。这都是关于静态文件位置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:54:11.967

```
import os
# get abspath
def rel(*x):
   return os.path.join(os.path.abspath(os.path.dirname(__file__)), *x)
MEDIA_ROOT = rel('media')
MEDIA_URL = '/media/'
STATIC_URL = '/static/'
STATIC_ROOT = '' #if only your static files are in project folder
STATICFILES_DIRS = ( rel('static'),) #if only your static files are in project folder 
```

使用此设置，一切都会正常

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-26T05:52:09.793

所以我终于解决了我的问题。对于将来遇到此问题的任何人，请执行以下操作：

如果您尝试在开发服务器上本地提供静态媒体文件，请使用 MEDIA_ROOT 和 MEDIA_URL 的绝对路径。

# java - Java Swing Hangman 游戏输赢计数不起作用，并且 keylistener 有问题

> ID：14033509
> 
> 赞同：-2
> 
> 时间：2012-12-25T19:42:48.847
> 
> 标签：java, swing, user-interface, actionlistener, keylistener

> **可能重复：**
> [带有 gui 的 Java 刽子手游戏，增加/减少数字的问题](https://stackoverflow.com/questions/14012023/java-hangman-game-with-gui-problems-with-incrementing-decrementing-numbers)

所以问题是我挥杆很烂，不知道如何使用keylistener，它开始听键太多次（第二场比赛后录制2个键，第三场后录制3个键，依此类推）。我不知道如何正确使用 Event Dispatch Thread，或者我什至应该使用它，并且赢/输计数错误地递增。此外，当我希望框架听键盘输入时，我请求它在窗口中的焦点，但是当我不希望框架读取键盘输入时，我不知道如何取消焦点。欢迎任何帮助。这是我第二次问这个问题，希望这次我让程序和问题更容易理解。编辑：游戏现在可以工作，还添加了写入日志文件的缓冲写入器。抱歉，懒得将代码的某些命名部分更改为英文，因为它们是立陶宛语。

```
import java.io.*;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.*;

public class Hangman {

    static int won = 0;
    static int lost = 0;
    static String key = "";
    static String word = null;
    static int no = 0;
    static StringBuffer toguess;
    static KeyboardFocusManager manager;
    static Runnable hangman;
    static ArrayList<String> tried;
    static int gamecount = 0;

    @SuppressWarnings("resource")
    public static void main(String[] args) throws IOException {
        FileWriter filewriter = new FileWriter("rezultatai.txt", true);
        final BufferedWriter writer = new BufferedWriter(filewriter);
        final DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        final Date date = new Date();
        hangman = new Runnable() {

            public void run() {
                final JFrame frame = new JFrame();
                frame.setLayout(new GridLayout(4, 1));
                final JLabel label = new JLabel();
                label.setFont(new Font("Serif", Font.BOLD, 48));
                label.setForeground(Color.GREEN);
                label.setText("Kaledines kartuves");
                final JPanel panel1 = new JPanel();
                final JPanel panel2 = new JPanel();
                final JPanel panel3 = new JPanel();
                final JPanel panel4 = new JPanel();
                final JLabel label3 = new JLabel();
                panel1.add(label);
                panel4.add(label3);
                final JLabel label2 = new JLabel();
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                final JButton button = new JButton("Pradeti");
                panel2.add(button);
                frame.add(panel1);
                frame.add(panel2);
                frame.add(panel3);
                frame.setSize(800, 600);
                button.addActionListener(new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        gamecount = gamecount + 1;
                        no = 0;
                        label3.setText("6 tries left");
                        frame.add(panel4);
                        frame.setFocusable(true);
                        frame.requestFocusInWindow();
                        label2.setText("won " + won + ", lost " + lost);
                        panel3.add(label2);
                        button.setText("Sekantis");
                        BufferedReader reader = null;
                        try {
                            reader = new BufferedReader(new FileReader("hangeng.txt"));
                        } catch (FileNotFoundException e1) {
                            e1.printStackTrace();
                        }
                        int lineno = (int) (Math.random() * 167);
                        for (int i = 0; i < lineno; i++) {
                            try {
                                reader.readLine();
                            } catch (IOException e1) {
                                e1.printStackTrace();
                            }
                        }
                        word = null;
                        try {
                            word = reader.readLine().replace(" ", "");
                        } catch (IOException e1) {
                            e1.printStackTrace();
                        }
                        String missing = "";
                        for (int u = 0; u < (word.length() - 2); u++) {
                            missing = missing + "*";
                        }
                        final String guess = word.charAt(0) + missing
                                + word.charAt((word.length() - 1));
                        toguess = new StringBuffer(guess);
                        label.setText(toguess.toString());
                        tried = new ArrayList<String>();
                    }
                });
                frame.addKeyListener(new KeyListener() {

                    @Override
                    public void keyPressed(KeyEvent e) {
                    }

                    @Override
                    public void keyReleased(KeyEvent e) {
                    }

                    @Override
                    public void keyTyped(KeyEvent e) {
                        if ((no == 6) && (!(toguess.toString().equals(word)))) {
                            frame.setFocusable(false);
                            button.requestFocusInWindow();
                            label.setText("Deja, bet zodis buvo " + word);
                            lost = lost + 1;
                        }
                        key = String.valueOf(e.getKeyChar());
                        String guessing = key;
                        Boolean k = false;
                        if ((no < 6)) {
                            k = false;
                            if (!(tried.contains(guessing))) {
                                tried.add(guessing);
                                for (int length = 1; length < (word.length()
                                        - 1); length++) {
                                    if (guessing.equals(word.substring(length,
                                            (length + 1)))) {
                                        toguess.replace(length, (length + 1),
                                                String.valueOf(word.charAt(length)));
                                        k = true;
                                    }
                                }
                                if (k == false) {
                                    no = no + 1;
                                }
                            }
                            label.setText(toguess.toString());
                            if (toguess.toString().equals(word)) {
                                label.setText("Teisingai! Zodis buvo " + word);
                                frame.setFocusable(false);
                                button.requestFocusInWindow();
                                no = 6;
                                won = won + 1;
                            }
                        }
                        label3.setText((6 - no) + " tries left");
                    }
                });
                frame.addWindowListener(new java.awt.event.WindowAdapter() {

                    @Override
                    public void windowClosing(java.awt.event.WindowEvent windowEvent) {
                        try {
                            writer.write(System.getProperty("line.separator")
                                    + dateFormat.format(date)
                                    + System.getProperty("line.separator")
                                    + (gamecount - 1) + " games played, "
                                    + lost + " lost " + won + " won");
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                        try {
                            writer.flush();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                        try {
                            writer.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                });
            }
        };
        hangman.run();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:01:21.197

一些让你走上正轨的提示：

1.  您正在向`actionPerformed()`方法中的框架添加一个关键侦听器。这意味着每次单击按钮时，都会将一个新的键侦听器添加到框架中。当初始化框架时，应该添加一次关键侦听器，并且只添加一次。

2.  如果您不想听按键，那么您可以将`keyTypedIgnored`标志设置为 true。在键侦听器中，如果此标志为真，则忽略该事件。如果它设置为假，那么你做一些事情。

3.  关于 EDT，是的，所有挥杆交互都应该在 EDT 上完成。应该使用 调用 Runnable `SwingUtilities.invokeLater(runnable)`，如[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)中所述。

最后，也许是最重要的建议，不要用单一的巨大方法做所有事情。将执行特定任务的对象和方法中的代码分开。添加一些空白行以使代码可读。正确缩进代码。

# web-services - 如何计算 Glassfish 3.1 上部署的 Web 服务的调用次数

> ID：14033510
> 
> 赞同：1
> 
> 时间：2012-12-25T19:42:58.477
> 
> 标签：web-services, jakarta-ee, glassfish-3

如何计算 Glassfish 3.1 上部署的 Web 服务的调用次数？实际上我可以通过控制台命令得到我想要的东西吗？如下

```
asadmin get -m "server.applications.hello-jaxws2*" server.applications.hello-jaxws2.2.server.Hello.requestcount-count = 14 
```

但我想知道是否有办法以编程方式获取 Web 服务的调用计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:55:04.673

作为使用 Glassfish 3.1.2 的示例。此处名为“NewWebService”的 Web 服务是提取该 Web 服务的请求数的代码摘录。

```
public static void showRequestCount(MBeanServerConnection mbs) throws Exception {
    ObjectName on = new ObjectName("amx:pp=/mon/server-mon[server],type=servlet-instance-mon,name=WebApplication1/server/NewWebService");
    final Set<ObjectInstance> mBeans = mbs.queryMBeans(on, null);
    for (ObjectInstance mbean : mBeans) {
        System.out.println("mbean: " + mbean);
        final MBeanInfo info = mbs.getMBeanInfo(on);
        final MBeanAttributeInfo[] attributes = info.getAttributes();
        for (int i = 0; i < attributes.length; i++) {
            MBeanAttributeInfo mBeanAttributeInfo = attributes[i];
            if (mBeanAttributeInfo.getName().equals("requestcount")) {
                final Object attribute = mbs.getAttribute(on, mBeanAttributeInfo.getName());
                CompositeDataSupport cds = (CompositeDataSupport) attribute;
                final Object requestCount = cds.get("count");
                System.out.println("Object name: " + on.getKeyProperty("name"));
                System.out.println("Request count: " + requestCount);
            }
        }
    }
} 
```

结果是：

```
mbean: servlet-instance-mon[amx:pp=/mon/server-mon[server],type=servlet-instance-mon,name=WebApplication1/server/NewWebService]
Object name: WebApplication1/server/NewWebService
Request count: 18 
```

请注意，MBean 的 ObjectName 和/或其属性可能会因您的 Glassfish 版本而异。

# android - 安卓应用服务器

> ID：14033515
> 
> 赞同：0
> 
> 时间：2012-12-25T19:44:19.863
> 
> 标签：android

我已经进行了一些搜索，但是我并没有真正找到像我正在寻找的那样普遍的东西。我有一个应用程序的想法，我只知道我需要一个服务器。我的计划是在服务器上“租用”空间，让我的客户更新他们的信息。然后，它将允许其他应用程序用户在应用程序上查看他们的信息，并且我想推出一个网络应用程序/界面。就服务器空间而言，我从哪里开始。我是否自己实施，我需要什么样的费用？我是否从主机购买可用空间？我的想法可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:14:33.427

寻找“虚拟服务器”租金。
单核 + 512Mb RAM + 20Gb HDD 的典型价格约为 10 美元/月

Amazon EC2 允许您按小时和按千兆字节付费，但总费用会更高（美元/月）。
对于微小的实例，他们有大约 6 个月的 AFAIR 自由期。

# jquery - SignalR 显示用户正在输入

> ID：14033518
> 
> 赞同：0
> 
> 时间：2012-12-25T19:44:31.260
> 
> 标签：jquery, asp.net-mvc, signalr, signalr.client

SignalR 是否有任何功能来处理 user1 正在向 user2 输入 user1 当前正在输入的警报？我看到的例子都在 ajax 或 jquery 中。这是用于使用 SignalR 的用户之间的聊天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T19:05:30.367

我们在文本字段的焦点和模糊事件上执行此操作。我们在集线器上调用一个函数，该函数向所有客户端广播一条关于用户的简单消息，例如 typing=true 并将 id 设置为上下文中的连接 id。然后在客户端中，这会用下划线或不同颜色突出显示用户，以查看用户正忙于输入内容。在我们的应用程序中，多个用户可以输入，但您了解这个概念。

你基本上需要三样东西

1.  当有人开始打字时更新服务器的客户端方法。这类似于 wiki 示例中的 send 方法
2.  然后服务器向所有或选定的正在写作或已开始打字的客户广播。您甚至可以将密钥代码发送到其他客户端上的 mimimc
3.  处理关于谁在写的广播的客户端方法

我们将它用于焦点并提高标志，因此我们不会向服务器发送太多请求，但您可以通过各种方式对其进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T23:33:15.873

这不是内置功能，但可以通过 SignalR 轻松完成。这是在 JabbR ( [http://jabbr.net/](http://jabbr.net/) , [https://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR) ) 中完成的。

这个想法是通过 JavaScript 处理文本 onchange 事件，然后联系服务器以通知另一个客户端有人正在输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T11:13:34.213

使用我的代码

在集线器

```
public class ChatHub : Hub
{
    public void Send(string name, string message)
    {
        // Call the addNewMessageToPage method to update clients.
        Clients.All.addNewMessageToPage(name, message);
    }
    public void IsTyping(string html)
    {
        // do stuff with the html
        SayWhoIsTyping(html); //call the function to send the html to the other clients
    }

    public void SayWhoIsTyping(string html)
    {
        IHubContext context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();
        context.Clients.All.sayWhoIsTyping(html);
    }
} 
```

在cshtml中

```
@{
    Layout = null;
}
<h2>Chat</h2>
<div class="container">
    <input type="text" id="message" />
    <input type="button" id="sendmessage" value="Send" />
    <input type="hidden" id="displayname" />
    <ul id="discussion"></ul>
    <div id="Status"></div>
</div>
<script src="@Url.Content("~/Scripts/jquery-1.10.2.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.signalR-2.2.0.min.js")"></script>
<script src="~/signalr/hubs"></script>
<script>
    $(function () {
        var chat = $.connection.chatHub;
        chat.client.addNewMessageToPage = function (name, message) {
            $('#discussion').append('<li><strong>' + htmlEncode(name)
                + '</strong>: ' + htmlEncode(message) + '</li>');
        };
        chat.client.SayWhoIsTyping = function (html) {
            $('#Status').html('<li>' + htmlEncode(html) + '</li>');
            setInterval(function () { $('#Status').html(''); }, 3000);            
        };
        $('#displayname').val(prompt('Enter your name:', ''));
        $('#message').focus();
        $.connection.hub.start().done(function () {
            $('#message').keydown(function () {
                var encodedName = $('<div />').text($('#displayname').val() + " is Typing...").html();
                chat.server.isTyping(encodedName);
            }),
             $('#sendmessage').click(function () {
                 chat.server.send($('#displayname').val(), $('#message').val());
                 $('#message').val('').focus();
             });
        });
    });
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }   
</script>
```

# django - django social_auth 传递额外的参数

> ID：14033520
> 
> 赞同：0
> 
> 时间：2012-12-25T19:44:48.620
> 
> 标签：django, authentication, django-socialauth

所以我有一个推荐网址，`http://.../ref/4Q3j9/`当点击它时会将他们带到一个注册页面。他们可以使用谷歌帐户 [Oauth2] 进行注册。我将它们作为隐藏变量存储在模板中。但是当用户点击谷歌登录时，我会丢失这些值。无论如何我可以传递这些参数，然后在 social_auth 中的重定向上再次返回。我想过使用管道，但那只是在登录过程之后，到那时我失去了那些参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T02:22:31.837

一个老问题，但由于它没有答案......我使用cookies做到了这一点，在视图函数中设置了一个cookie

```
response.set_cookie( cookie_name, my_needed_value, max_age=3600) 
```

或在网页中

```
document.cookie = 'cookie_name=my_needed_value; expires=Tue, 05 Nov 2014 00:00:00 UTC; path=/' 
```

（设置过期，或删除过去的日期），然后在视图中阅读它

```
if request.COOKIES.has_key(cookie_name):
        my_needed_value = request.COOKIES[cookie_name] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:38:56.490

这有点棘手，存储在会话中是不够的，因为 django 在用户登录时清除会话。当用户被发送到您的注册页面时，您可以将其存储在会话中，但是您需要一个管道条目之类的东西`user.referral = request.session['referral']`，然后使用中间件将其存储回会话中，该中间件`request.user.referral`在 django-social-auth 完成的重定向发送给用户之前进行检查（当身份验证完成并且用户登录时）。

您可以尝试定义`GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMNTS = {'referral': None}`并确保已`?referral=foobar`添加 Google OAuth2 链接。但这只会避免推荐的第一个会话存储，您将需要管道（但这次检查`request.GET['referral']`而不是会话）条目和中间件，而且我不确定 Google 是否会在身份验证完成后返回推荐。

# c - 将 pthread_mutex_t 传递给函数

> ID：14033521
> 
> 赞同：0
> 
> 时间：2012-12-25T19:44:49.170
> 
> 标签：c, multithreading, ipc

可以将 pthread 锁传递给函数吗？我要求这样做的原因是因为我有许多线程，比如说 10 个，充当消费者和 2 个生产者，每个消费者线程都有自己的链表（缓冲区），生产者会将数据发送到其中一个基于特定规则的线程，因此有时生产者 1 发送给消费者 1，然后发送给消费者 2，然后再发送给消费者 1，依此类推。

所以我在想这个，

当生产者 1 想要发送给消费者 5 时，

1.  Producer 1调用函数linked-list来共享数据（IPC）并将lock[5]传递给这个函数，在这种情况下它将是lock 5
2.  函数linked-list将锁定lock[5]并更新链表
3.  当消费者 5 调用函数链表时，它将传递它的锁（消费者 5 将始终使用 lock[5]），如果生产者已经锁定了这个锁，那么它将等待。

请注意，锁的名称在 main() 中共享

```
pthread_mutex_t lock[10]; 
```

我在 linux 上使用 gcc，如果问题不清楚，请告诉我，因为我描述事物的方式很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:02:54.760

你可以。只要确保传递互斥体的地址。你不能复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T21:38:24.327

你可以好好想想。您创建另一个 c 文件并插入：

```
pthread_mutex_t lock[10];
type_t *produce(int tid) {

if (tid == {producer_1}) {
    //call function linked-list to share the data (IPC) and pass lock[5] to this function, in this case it will be lock 5
}
...
}

void consume(type_t* data, int tid) {
....
} 
```

通过这种方式，您可以集中处理以使您的程序更具可读性和简单性。在您的线程中，您只需申请`produce`并`consume`使用生产者/消费者 ID

# c# - 如何在 C# 中使用 Dictionary<> 的聚合方法？

> ID：14033529
> 
> 赞同：11
> 
> 时间：2012-12-25T19:46:08.453
> 
> 标签：c#, dictionary, delegates, lambda, aggregate

我是 C# 的初学者。我有一本这样的字典：

```
{
  {"tom", "student"},
  {"rob", "teacher"},
  {"david", "lawyer"}
} 
```

我想形成这条线：

```
tom = student, rob = teacher, david = lawyer 
```

我想使用聚合扩展方法，`dictionary<>`但是当我这样做时：

```
Console.WriteLine(dic.Aggregate((a,b) => (a.Key + " = " + a.Value + ", " + b.Key + " = " + b.Value))); 
```

我收到此错误：

> 无法将 lambda 表达式转换为委托类型。

所以看来我做错了。那么有人可以告诉我如何使用这种方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-25T19:56:34.443

[Aggregate](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)不是 Dictionary 的方法，它是`IEnumerable<T>`. 如果要构建聚合字符串：

```
dic.Aggregate(new StringBuilder(),
              (sb, kvp) => sb.AppendFormat("{0}{1} = {2}", 
                           sb.Length > 0 ? ", " : "", kvp.Key, kvp.Value),
              sb => sb.ToString()); 
```

解释：

*   第一个参数是累加器，会累加结果
*   第二个参数是一个函数，它将在每个字典元素上调用。此函数将数据附加到累加器。
*   最后一个参数从累加器构建结果字符串

顺便说一句，您可以使用以下代码来构建所需的字符串：

```
String.Join(", ", dic.Select(kvp => kvp.Key + " = " + kvp.Value)); 
```

# iphone - 转换一个描边的 CAShapeLayer

> ID：14033536
> 
> 赞同：3
> 
> 时间：2012-12-25T19:46:54.323
> 
> 标签：iphone, ios, cocoa-touch, caanimation, cashapelayer

我有一个`CAShapeLayer`其中包含一个`CGMutablePath`围绕它绘制的笔划。在我的应用程序中，我将其转换`CAShapeLayer`为在某些时候增加/减小它的大小。我注意到当我转换 时`CAShapeLayer`，`stroke`也被转换了。理想情况下，即使转换后，我也希望始终保持 3`lineWidth`的值。`stroke``CAShapeLayers`

我尝试在转换之前关闭笔画，然后再阅读它，但它没有用：

```
subLayerShapeLayer.lineWidth = 0;
subLayerShapeLayer.strokeColor = nil;
self.layer.sublayerTransform = CATransform3DScale(self.layer.sublayerTransform, graphicSize.width / self.graphic.size.width, graphicSize.height / self.graphic.size.height, 1);
shapeLayer.strokeColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:1].CGColor;;
shapeLayer.lineWidth = 3; 
```

有谁知道我如何能够完成这项任务？似乎它应该能够在以某种方式转换后重新绘制笔画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T19:54:40.883

转换 CGPath 本身而不是其绘制的表示（CAShapeLayer）。

仔细看看[CGPathCreateMutableCopyByTransformingPath - CGPath Reference](https://developer.apple.com/library/ios/#documentation/graphicsimaging/Reference/CGPath/Reference/reference.html)

```
CGPathCreateMutableCopyByTransformingPath 
```

> 创建由变换矩阵变换的图形路径的可变副本。

```
CGMutablePathRef CGPathCreateMutableCopyByTransformingPath(
   CGPathRef path,
   const CGAffineTransform *transform
); 
```

**参数**

`path`要复制的路径。

`transform`指向仿射变换矩阵的指针，如果不需要变换，则为 NULL。如果指定，Quartz 将转换应用于新路径的所有元素。返回值 由 transform 参数转换的指定路径的新的可变副本。您有责任释放此对象。

可用性 适用于 iOS 5.0 及更高版本。在 CGPath.h 中声明

# php - MySQL current_timestamp - 时间戳抛出错误的结果

> ID：14033537
> 
> 赞同：0
> 
> 时间：2012-12-25T19:46:55.270
> 
> 标签：php, mysql

你好在 PHP 脚本中我有以下 MySQL 查询

```
$query_players = "SELECT (current_timestamp -`Online_since`) AS `Since` FROM `streams` WHERE `Team` = $temp AND `Online` = 1 ORDER BY `Viewers` DESC"; 
```

然后我有：

```
$since = round($obj_players->Since /3600); 
```

正如您可能想象的那样，$since 应该包含玩家在线的时间（以小时为单位）。奇怪的是它有错误的结果。就像 MySQL 中的时间过得更快：P 例如，大约 15 分钟后，它已经显示“自 1 小时以来在线”，大约 30 分钟后，它已经显示 2 小时，依此类推。

有谁知道可能出了什么问题？也许 current_timestamps 是问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:32:54.897

[`current_timestamp`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-timestamp)并不是真正以秒为单位来衡量的。因此，将差值除以 3600 不会产生小时数，而是一些任意值。

18 分钟后的差别`1800`当然`round(1800/3600) = round(0.5)`是`1`。

根据您的实际列类型，使用[`timediff()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)或[`timestampdiff()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)进行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T20:26:03.977

尝试使用 TIMESTAMPDIFF：

```
$query_players = "SELECT TIMESTAMPDIFF(HOUR, NOW(), `Online_since`) AS `Since` 
                  FROM   `streams` 
                  WHERE  `Team` = $temp 
                  AND    `Online` = 1 
                  ORDER BY `Viewers` DESC"; 
```

# c# - C# 类型参数约束

> ID：14033538
> 
> 赞同：0
> 
> 时间：2012-12-25T19:46:57.390
> 
> 标签：c#, generics, interface

我正在尝试以某种方式做某事......但我确信有更好的方法

```
public interface IMix
{
    T Mix<T>(List<T> values) where T : IMix;
} 
```

这样做的问题是，如果我想“混合”5 个值，那么我需要这样做`value1.Mix(others)`，但这并不干净。另外， T 的类型必须与实现接口的任何类的类型相同。所以，这真的行不通。

我在想这样的事情：

```
public static class MixWrapper
{
    public static T Mix<T>(List<T> values);
} 
```

但这显然行不通，因为我必须在`MixWrapper`

编辑：为了消除一些误解，这些不是真正的数学平均值，我可以很容易地说“保险丝”或其他任何东西。例如，我可能会尝试对某个结构或其他类的列表进行“平均”。

编辑2：一个例子可能是这样的类

```
class Sequence : IMix
{
    List<int> sequence;
    double period;
    double weight;
} 
```

在这种情况下，“混合”需要返回以`Sequence`这种方式构建的 a：生成的周期是基于权重的周期的加权平均值。权重是权重的总和，序列是序列在时间按比例缩小到结果周期后的加权平均值。可以说，任何你能想到的复杂方法都需要考虑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:52:17.933

如果你想计算一些列表的平均值，那么你可以使用[LINQ](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.average.aspx)：

```
var value = list.Average(x => x.SomeProperty); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T20:53:31.213

将类型`T`放在您的界面上，并在实现它时使用与类相同的类型填充它：

```
public interface IMix<T>
{
    T Mix(List<T> values);
}

public class ConcreteObjects : IMix<ConcreteObjects>
{
    public ConcreteObjects Mix(List<ConcreteObjects> values)
    {
        // do mixing
    }
} 
```

这也为其他类在需要时能够混合 ConcreteObjects 敞开了大门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T20:21:34.047

我想你正在寻找一个`extension method`.

您需要在某处定义一个静态方法（我想是一些辅助类），如下所示：

```
public static T Average<T>(this List<T> list) where T : IAverage
{
    return // average stuff
} 
```

现在你只需要包含你的助手类，`using`你可以做这样的事情： `AverageClass`实现`IAverage`

```
List<IAverage> list = new List<AverageClass>();
var average = list.Average(); 
```

# android - 另一个类的android xml按钮调用方法

> ID：14033539
> 
> 赞同：1
> 
> 时间：2012-12-25T19:47:00.440
> 
> 标签：android, xml, inheritance, button

我设置了我的 xml，以便每个类都包含相同的菜单栏。我必须复制每个使用菜单栏的类中的按钮 onClick 调用的每个方法。有没有解决的办法？我试图扩展另一个类，但每个类都已经扩展了活动，你不能在 Android 中扩展多个类。

示例：菜单栏有按钮 doStuff。A 类包括菜单栏。A 类实现 doStuff。B类包括菜单栏。B 类实现 doStuff。

他们都以完全相同的方式实现相同的方法。有没有办法一次定义这些方法（如 doStuff）并让每个按钮调用该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:11:56.030

我的解决方案是让每个按钮调用一个方法。这在所有使用按钮的类中都重复了。然后将这些单独的方法称为中央方法，以便可以从一个位置更改代码，而不必重复更改。

示例：菜单栏有按钮 doStuff。A 类包括菜单栏。A 类实现 doStuff。B类包括菜单栏。B 类实现 doStuff。

解决方案：菜单栏有按钮doStuff。A 类包括菜单栏。A 类实现将调用引用到中心类的处理程序。B类包括菜单栏。B 类实现处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:53:51.850

您可以创建另一个实现`doStuff()`方法的类，然后只为每个类中的按钮设置侦听器。您将始终必须通过调用`setOnClickListener()`（或在 XML 文件中，但我不知道您是否可以调用另一个类方法）来设置侦听器。如果您需要类中的一些视图，则可以将它们作为参数传递。

# php - 来自 PHP 的 PREPARE STMT 查询不起作用

> ID：14033540
> 
> 赞同：0
> 
> 时间：2012-12-25T19:47:02.833
> 
> 标签：php, mysql, codeigniter, prepared-statement

> **可能重复：**
> [如何使用 CodeIgniter 运行 mysqli 查询？](https://stackoverflow.com/questions/4059168/how-can-you-run-a-mysqli-query-with-codeigniter)

我有一个mysql查询，我试图从php运行。但它在codeigniter中给了我一个sql语法错误。当我复制粘贴相同的查询并通过用正确`mysql workbench`的值替换`@uid`and来运行它时，它工作正常。`@rangee`

这是查询：

```
$this->db->query("
            SET @uid    = ".mysqli_real_escape_string($conid,$userid).";
            SET @rangee = ".mysqli_real_escape_string($conid,$attempt)." * 50;

            PREPARE STMT FROM 
            '
            UPDATE     
                notificationrecievers 
                SET notificationrecievers.status=1 
                WHERE notificationrecievers.status=0 and notificationrecievers.recieverid=? and 

                notificationrecievers.notificationid <=
                (
                     SELECT MAX(notid) FROM
                     (
                      SELECT n.notid FROM user u,notifications n,notificationrecievers nr WHERE
                      nr.recieverid=? AND u.userid=n.senderid AND nr.notificationid=n.notid ORDER BY n.notid DESC
                      LIMIT 50 OFFSET ?
                     )e
                )   

               AND

                notificationrecievers.notificationid >=
                (
                     SELECT min(notid) FROM
                     (
                      SELECT n.notid FROM user u,notifications n,notificationrecievers nr WHERE
                      nr.recieverid=? AND u.userid=n.senderid AND nr.notificationid=n.notid ORDER BY n.notid DESC
                      LIMIT 50 OFFSET ?
                     )g
                );';
            EXECUTE STMT USING @uid,@uid,@rangee,@uid,@rangee;"); 
```

为什么它给我错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:53:45.890

首先，`query()`方法不打算执行多个查询。接下来，您的代码允许通过 $userid 变量进行注入。

最好从这些原始准备好的语句转移到二进制准备好的语句，如手册中所述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:54:53.617

从您的代码中完全无法判断 $this->db 是什么类型的对象。如果是 mysqli 用于转义，则 query() 函数不支持多语句。

此外，当您使用 PHP 中的准备好的语句时，您应该使用 PHP 包装器作为准备好的语句，如`mysqli::prepare()`

# php - php：将mysql结果缓存x分钟

> ID：14033542
> 
> 赞同：-2
> 
> 时间：2012-12-25T19:47:56.727
> 
> 标签：php, mysql, caching

我构建了一个块，结果在 mysql 上产生了巨大的负载并使表锁定。如何使用 php 将 mysql 结果缓存到文件或内存中 X 分钟？

```
$result = mysql_query("SELECT * FROM dle_post WHERE (approve='1')  
                        AND (category LIKE 'something' $all_movies)
                        AND date >= '$monthagodate'  
                        AND date < '$curdate' + INTERVAL 1 day  
                        ORDER BY date DESC LIMIT $more,$number_of_topics"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:52:01.273

如果您的表数据不经常更新，请使用[MySQL 查询缓存。](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)否则使用[memcached](http://memcached.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:58:44.650

大多数时候不需要缓存。而且，在像你这样的情况下，它只是一个拐杖，而不是一个适当的解决方案。

如果创建了一个对服务器造成巨大负载的查询，则必须*优化*该查询，而不是缓存其结果。

运行`explain`这个查询并找出它为什么不使用索引（如果有的话）。

# algorithm - 从一系列随机数中预测非随机数

> ID：14033545
> 
> 赞同：3
> 
> 时间：2012-12-25T19:48:33.977
> 
> 标签：algorithm, random, fraud-prevention

我得到了以下有趣的任务：

给定一个包含 100 万个 16 位数字（例如信用卡号）的列表，其中包括 990,000 个由计算机系统生成的纯随机数字，以及 10,000 个由欺诈者手动创建的数字。这些数字被标记为真实或欺诈。构建一个算法来预测非随机数。

到目前为止，我的方法有点暴力：查看非随机数字以找到模式（例如重复数字：22222 或 01234）。

我想知道这种任务是否有现成的算法或工具。我想这个任务在欺诈分析社区中应该很常见。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T20:23:43.670

首先，如果您知道它们是信用卡号，请使用 Luhn 算法，这是一种用于有效信用卡号的快速校验和算法。

但是，如果它们只是 16 位整数，您可以使用几种方法。很难判断单个数字是否来自随机源（因为数字 1111111111111111 与随机数生成器中的任何其他数字一样可能）。至于您重复的数字和模式，这很容易让人联想到 Kolmogorov 复杂性的概念（请参见下面的链接）。您可以尝试在这种蛮力方法中寻找模式，但我觉得它会非常不准确，因为人类实际上可能倾向于避免将数字和序列放入这些数字中！

相反，我建议关注人们产生数字的方式。您可以将人工输入视为非常糟糕的随机数生成器。因此，如果您没有其他数据集，我建议您自己制作一个随机人类输入数字的列表。然后，您可以使用机器学习生成分类器算法来区分纯随机数（那些没有您的机器学习算法已识别的“类人”属性）。就统计分类器的指标而言，Kolmogorov 复杂度可能是一个，可能是另一个指标的数字频率（参见维基百科上的 Benford 定律），以及另一个指标的重复数字的数量（人类可能会尝试避免重复数字看起来不随机的，所以让你的分类器来做吧！）

根据我的个人经验，像这样的棘手问题是机器学习算法和统计分类器的教科书案例。

希望这可以帮助！

链接：

[Kolmogorov 复杂度 复杂](http://en.wikipedia.org/wiki/Kolmogorov_complexity)
[度计算器](http://www.complexitycalculator.com/)

# php - 将图片（带描述）上传到 Tumblr

> ID：14033547
> 
> 赞同：1
> 
> 时间：2012-12-25T19:48:38.867
> 
> 标签：php, post, tumblr, image

所以我想要一个 .php 脚本，它每 3 小时将图像上传到我的 Tumblr（通过 cronjob）。我曾经有一个工作脚本，但是由于 Tumblr 不再支持他们的 v1 API，我迷路了。我在 Google 上没有找到好的指南（http://vigrond.com/blog/2012/02/04/oauth-extension-php-and-the-tumblr-api/ 不适合我，因为我可以' t 安装 OAuth 扩展）并且官方的 Tumblr 文档甚至不存在。

如果您能帮助我并指出解决方案，我将非常高兴:)

我发现这将是一个好的开始：[https](https://gist.github.com/1649885) ://gist.github.com/1649885但我似乎无法获得 access_token / access_secret。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-22T12:49:46.203

我已经完成了一个简单的脚本，该脚本发布了随机类别的随机图像，每个类别都有自己的标签和标题文件，因此对于发布的每个图像，您可以有多个标题。

该脚本使用 tumblr api v2。

[matteobononi.it tumblr 随机图片发布脚本](http://www.matteobononi.it/tumblr_random_image_post.php)

# postgresql - PostgreSQL 触发语法错误

> ID：14033548
> 
> 赞同：0
> 
> 时间：2012-12-25T19:49:03.110
> 
> 标签：postgresql, exception-handling, triggers, plpgsql

我想知道如何在 PostgreSQL 中通过`RAISE SQLSTATE`动态指令使用触发器？

```
IF i>0 THEN
    RAISE SQLSTATE '23505' USING MESSAGE = 'la planète est déjà occupée (planet_non_free)=(%, %, %)', NEW.galaxie, NEW.systeme_solaire, NEW.position;
END IF; 
```

它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T03:59:21.753

我建议使用：

```
IF i > 0 THEN
    RAISE SQLSTATE '23505'
    USING MESSAGE = format('la planète est déjà occupée (planet_non_free)=(%s, %s, %s)', NEW.galaxie, NEW.systeme_solaire, NEW.position);
END IF; 
```

然后您的错误消息显示：

```
la planète est déjà occupée (planet_non_free)=(<g>, <s>, <p>) 
```

.. 代替：

```
("la planète est déjà occupée (planet_non_free)=(%, %, %)",<g>, <s>, <p>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:05:24.913

好的，我找到了解决方案。我只需`MESSAGE`要用括号括起来值：

所以 ：

```
IF i>0 THEN
   RAISE SQLSTATE '23505' USING MESSAGE = 'la planète est déjà occupée (planet_non_free)=(%, %, %)', NEW.galaxie, NEW.systeme_solaire, NEW.position;
END IF; 
```

变成：

```
IF i>0 THEN
   RAISE SQLSTATE '23505' USING MESSAGE = ('la planète est déjà occupée (planet_non_free)=(%, %, %)', NEW.galaxie, NEW.systeme_solaire, NEW.position);
END IF; 
```

很简单，但我没有`MESSAGE`在网上看到带有动态的明确示例。

希望这可以帮助

**编辑 ：**

好的，抱歉，正确的语法是这样的：

```
IF i>0 THEN
    RAISE SQLSTATE '23505' USING MESSAGE = 'la planète est déjà occupée (planet_non_free)=(' || NEW.galaxie || ',' || NEW.systeme_solaire || ',' || NEW.position || ')';
END IF; 
```

看来我们不能使用`%`with`USING MESSAGE`语句。

# c# - 显示从 datagridview 到 dbcombo 的字符串

> ID：14033549
> 
> 赞同：0
> 
> 时间：2012-12-25T19:49:09.507
> 
> 标签：c#, datagridview, combobox

我有一个组合框（dbcombo），其中填充了我的数据库（OLEDB）中的城市名称。还有一个显示该数据库内容的数据网格视图。我希望能够双击数据网格视图并在组合框中显示行数据之一（即包含城市名称的索引）。我试过类似的东西

```
 combobox1.SelectedItem = dataGridView1.CurrentRow.Cells[3].Value.ToString(); 
```

但不起作用。如何从数据网格中获取该行索引值以显示在组合框中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:02:47.757

想通了它必须是这样的

combobox1.Text = dataGridView1.CurrentRow.Cells[3].Value.ToString();

# html - iframe id 正在更改每个选项卡。我怎样才能固定它？

> ID：14033550
> 
> 赞同：1
> 
> 时间：2012-12-25T19:49:10.520
> 
> 标签：html, css, imacros

任何具有 imacros 技能的人，我对 imacros 脚本有疑问..

当我用改变的框架做一些脚本时，有时它是 F=5、F=6、F=9、F=12 等等。

当我运行时，它会导致标签/错误。

你能解决这个案子吗？

谢谢你..

**我正在做自动 facebook 和 twitter 共享代码。**

这是我的 imagros 代码：

```
 URL GOTO=http://gnctrkcll.turkcell.com.tr/#!/haberler/ben-yaptim-paketyle-kend-paketn-kendn-yarat
        URL GOTO=http://gnctrkcll.turkcell.com.tr/#!/haberler/bu-yilbasi-kutlamalari-sudan-ucuz
        TAB T=1
        FRAME F=9
        TAG POS=1 TYPE=BUTTON ATTR=TXT:Like
        WAIT SECONDS=3
        TAG POS=2 TYPE=SPAN ATTR=TXT:Onayla
        TAB T=2
        FRAME F=0
        TAG POS=1 TYPE=INPUT:SUBMİT ATTR=TYPE:submit&&VALUE:Beğen

        WAIT SECONDS=4

        TAB T=1
        FRAME F=9
        TAG POS=1 TYPE=SPAN ATTR=TXT:Tweet
        TAB T=2
        FRAME F=9
        TAG POS=1 TYPE=INPUT:SUBMİT FORM=ID:update-form ATTR=CLASS:button<SP>selected<SP>submit&&TYPE:submit&&VALUE:Tweetle 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:24:16.897

您需要为此将代码转换为 javascript 格式并执行额外的循环以搜索当前帧。像这样的东西：

```
var check =  "CODE:";
check+=  "FRAME F={{i}}" + "\n"; 
check+=  "TAG POS=1 TYPE=SPAN ATTR=TXT:Tweet" + "\n"; 
for(i=1;i<=15;i++){
iimSet("i",i);
iimPlay(check);} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T01:08:16.057

或者您可以对代码进行一些更改并制作一个搜索帧号的函数，如下所示

```
///main code

var frame=SearchFrame();

//use frame to set into macro and play it

function SearchFrame()
{

var check =  "CODE:";
check+=  "FRAME F={{i}}" + "\n"; 
check+=  "TAG POS=1 TYPE=SPAN ATTR=TXT:Tweet CONTENT=EVEN:MOUSEOVER" + "\n"; 

frame=0;

for(i=1;i<=15;i++){
iimSet("i",i)

//if the result of the macro is true save frame number and break
if(iimPlay(check)==true)
{

frame=i;
break;
}
}
//return frame number
return frame;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T23:10:33.977

我在第一篇文章中使用了你的代码，并在 Tweet 按钮旁边放置了更改框。

```
///////macro declaration////////////

var mainMacro;

mainMacro ="CODE:";

mainMacro +="URL GOTO=http://gnctrkcll.turkcell.com.tr/#!/haberler/ben-yaptim-paketyle-kend-paketn-kendn-yarat"+"\n";
mainMacro +="URL GOTO=http://gnctrkcll.turkcell.com.tr/#!/haberler/bu-yilbasi-kutlamalari-sudan-ucuz"+"\n";
mainMacro +="TAB T=1"+"\n";
mainMacro +="FRAME F=9"+"\n";
mainMacro +="TAG POS=1 TYPE=BUTTON ATTR=TXT:Like"+"\n";
mainMacro +="WAIT SECONDS=3"+"\n";
mainMacro +="TAG POS=2 TYPE=SPAN ATTR=TXT:Onayla"+"\n";
mainMacro +="TAB T=2"+"\n";
mainMacro +="FRAME F=0"+"\n";
mainMacro +="TAG POS=1 TYPE=INPUT:SUBMIT ATTR=TYPE:submit&&VALUE:Begen"+"\n";
mainMacro +="WAIT SECONDS=4"+"\n";

var mainMacro1="CODE:";
mainMacro1 +="TAB T=1"+"\n";
mainMacro1 +="FRAME F={{frame}}"+"\n";
mainMacro1 +="TAG POS=1 TYPE=SPAN ATTR=TXT:Tweet"+"\n";
mainMacro1 +="TAB T=2"+"\n";
mainMacro1 +="FRAME F=9"+"\n";
mainMacro1 +="TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:update-form ATTR=CLASS:button<SP>selected<SP>submit&&TYPE:submit&&VALUE:Tweetle"+"\n";

//////////Beginning/////////////

iimPlay(mainMacro)

//calling for the function which will find the frame
var frame=SearchFrame();

iimSet("frame",frame)
iimPlay(mainMacro1)

function SearchFrame()
{

var check =  "CODE:";
check+=  "FRAME F={{i}}" + "\n"; 
check+=  "TAG POS=1 TYPE=SPAN ATTR=TXT:Tweet CONTENT=EVEN:MOUSEOVER" + "\n"; 

frame=0;

for(i=1;i<=15;i++){
iimSet("i",i)

//if the result of the macro is true save frame number and break
if(iimPlay(check)==true)
{

frame=i;
break;
}
}
//return frame number
return frame;

} 
```

我希望这行得通。我不得不将您的宏拆分为 2 个宏。第一个将导航到链接，第二个将点击 Tweet 按钮。如果它不起作用，你自己做一点工作，它会的。

# r - R用ggplot绘制置信带

> ID：14033551
> 
> 赞同：69
> 
> 时间：2012-12-25T19:49:26.717
> 
> 标签：r, ggplot2

我想为装有这样的 gls 的模型创建一个置信带：

```
require(ggplot2)
require(nlme)

mp <-data.frame(year=c(1990:2010))

mp$wav <- rnorm(nrow(mp))*cos(2*pi*mp$year)+2*sin(rnorm(nrow(mp)*pi*mp$wav))+5
mp$wow <- rnorm(nrow(mp))*mp$wav+rnorm(nrow(mp))*mp$wav^3

m01 <- gls(wow~poly(wav,3), data=mp, correlation = corARMA(p=1))

mp$fit <- as.numeric(fitted(m01))

p <- ggplot(mp, aes(year, wow))+ geom_point()+ geom_line(aes(year,fit))
p 
```

这只会绘制拟合值和数据，我想要一些风格的东西

```
p <- ggplot(mp, aes(year, wow))+ geom_point()+ geom_smooth()
p 
```

但是使用 gls 模型生成的波段。

谢谢！

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-12-25T20:24:52.873

```
require(ggplot2)
require(nlme)

set.seed(101)
mp <-data.frame(year=1990:2010)
N <- nrow(mp)

mp <- within(mp,
         {
             wav <- rnorm(N)*cos(2*pi*year)+rnorm(N)*sin(2*pi*year)+5
             wow <- rnorm(N)*wav+rnorm(N)*wav^3
         })

m01 <- gls(wow~poly(wav,3), data=mp, correlation = corARMA(p=1)) 
```

获取拟合值（与 相同`m01$fitted`）

```
fit <- predict(m01) 
```

通常我们可以使用类似的东西`predict(...,se.fit=TRUE)`来获得预测的置信区间，但`gls`不提供这种能力。我们使用类似于[http://glmm.wikidot.com/faq](http://glmm.wikidot.com/faq)中所示的配方：

```
V <- vcov(m01)
X <- model.matrix(~poly(wav,3),data=mp)
se.fit <- sqrt(diag(X %*% V %*% t(X))) 
```

拼凑一个“预测框架”：

```
predframe <- with(mp,data.frame(year,wav,
                                wow=fit,lwr=fit-1.96*se.fit,upr=fit+1.96*se.fit)) 
```

现在用`geom_ribbon`

```
(p1 <- ggplot(mp, aes(year, wow))+
    geom_point()+
    geom_line(data=predframe)+
    geom_ribbon(data=predframe,aes(ymin=lwr,ymax=upr),alpha=0.3)) 
```

![年与哇](../Images/bdbdfcc9a884052e788c452e870fd49a.png)

如果我们反对`wav`而不是：更容易看出我们得到了正确的答案`year`：

```
(p2 <- ggplot(mp, aes(wav, wow))+
    geom_point()+
    geom_line(data=predframe)+
    geom_ribbon(data=predframe,aes(ymin=lwr,ymax=upr),alpha=0.3)) 
```

![wav vs 哇](../Images/45b900ea9997f38afe3b82738f5e6096.png)

以更高的分辨率进行预测会很好，但使用`poly()`拟合结果执行此操作有点棘手 - 请参阅`?makepredictcall`.

# c# - Winforms 组合框填充滞后

> ID：14033558
> 
> 赞同：0
> 
> 时间：2012-12-25T19:50:29.037
> 
> 标签：c#, winforms, combobox

当您按下按钮时，我有一个组合框：

```
private void button1_Click(object sender, EventArgs e)
    {

        Dictionary<string, string> countries = new Dictionary<string, string>();
        //Dictionary<string, List<State>> stateList=new Dictionary<string,List<State>>();
        HashSet<string> country = new HashSet<string>();

        var lines = File.ReadAllLines("CountryState.txt");

        foreach (string line in lines)
        {
            string[] items = line.Split('\t').ToArray();

            try
            { 
                countries.Add(items[0], items[1]);
            }
            catch (Exception ex)
            {
                  //MessageBox.Show(ex.Message);

            }

            country.Add(items[0]);

            if (!stateList.ContainsKey(items[0])) {
               stateList.Add(items[0], new List<State>());
            }

            if (items[2] != "")
            {
               stateList[items[0]].Add(new State(items[2], items[3]));
            }
            if(items[2] !=string.Empty && items[3] !=string.Empty)
                stateCodes.Add(items[2], items[3]);

            }
            comboBox1.DataSource = countries.Keys.ToList();
    } 
```

comboBox1 数据源最多有 234 个条目，这对我来说似乎并不过分（其他时候我在网上看到过这个讨论，它提到一千左右的条目过多）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T23:29:14.127

尝试使用[ContainsKey](http://msdn.microsoft.com/en-us/library/kw5aaea4.aspx)

```
 try
        {
           if (!counties.ContainsKey(items[0)
           {
             countries.Add(items[0], items[1]);
           }
        }
        catch (Exception ex)
        {
              //MessageBox.Show(ex.Message);

        } 
```

# java - 从集合中获取子类实例 - Java

> ID：14033560
> 
> 赞同：0
> 
> 时间：2012-12-25T19:50:40.997
> 
> 标签：java, collections

这是一个 Java 编程情况，我希望看到任何可能的改进。

B 类是 A 类的子类。B 的一些实例在 Collection 中。根据类型，我可以使用 instanceof 从集合中检索 B 类实例。但是，我不能将这些实例视为 B 类的实例，而是 A 类的实例，因为不允许向下转换。因此，我必须通过在 A 类中使用覆盖 getter 来获取一些实例的小片段。这种变通方法存在一些问题。例如，某些 getter 在父类中没有意义，父类不能是抽象的。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:27:12.633

一种不进行强制转换的方法是使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。它在 Java 中有点冗长，但非常可扩展......

```
interface Visitor {
    void visit(A a)
    void visit(B b)
}

class BOnlyVisitor implements Visitor {
    public void visit(A a) {
        throw new UnsupportedOperationException();
    }

    public void visit(B b) {
        // Do stuff with b
    }
}

interface Visitable {
    void accept(Visitor v)
}

class A implements Visitable {
    public void accept(Visitor v) {
        v.visit(this);
    }
}

class B implements Visitable {
    @Override
    public void accept(Visitor v) {
        v.visit(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:20:18.653

与其向对象询问信息以便做某事，不如直接要求对象去做。例如，替换

```
int a = object.getA();
int b = object.getB();
int sum = a + b; 
```

和

```
int sum = object.computeSum(); 
```

这样，如果子类没有 getB() 方法，因为它总是被认为是 0，它可以使用实现该`computeSum()`方法

```
return this.a; 
```

对不起这个愚蠢的例子，但这就是想法。向您的对象添加行为，而不是使用 getter 和 setter 使它们成为数据结构。如果您发布一个具体示例说明您必须做什么，我可以提供更多帮助。

# java - 空指针异常

> ID：14033565
> 
> 赞同：-3
> 
> 时间：2012-12-25T19:52:06.183
> 
> 标签：java, exception, exception-handling, nullpointerexception

我的问题只是一个空指针异常，但是，我不明白我是如何弄清楚的。这是代码。

我正在尝试运行 primefaces 的聊天实用程序。我正在使用 tomcat 7 .. 就我可以到达这里但现在我遇到了这个问题。

```
public class ChatView {

private final PushContext pushContext = PushContextFactory.getDefault().getPushContext();

private ChatUsers users;

    private String privateMessage;

private String globalMessage;

    private String username;

    private boolean loggedIn;

private String privateUser;

private final static String CHANNEL = "/chat/";

public void setUsers(ChatUsers users) {
    this.users = users;
}

public String getPrivateUser() {
    return privateUser;
}

public void setPrivateUser(String privateUser) {
    this.privateUser = privateUser;
}

public String getGlobalMessage() {
    return globalMessage;
}

public void setGlobalMessage(String globalMessage) {
    this.globalMessage = globalMessage;
}

public String getPrivateMessage() {
    return privateMessage;
}

public void setPrivateMessage(String privateMessage) {
    this.privateMessage = privateMessage;
}

    public String getUsername() {
            return username;
    }
    public void setUsername(String username) {
            this.username = username;
    }

    public boolean isLoggedIn() {
            return loggedIn;
    }
    public void setLoggedIn(boolean loggedIn) {
            this.loggedIn = loggedIn;
    }

    public void sendGlobal() {
    pushContext.push(CHANNEL + "*", username + ": " + globalMessage);

            globalMessage = null;
    }

public void sendPrivate() {
    pushContext.push(CHANNEL + privateUser, "[PM] " + username + ": " + privateMessage);

    privateMessage = null;
}

    public void login() {
    RequestContext requestContext = RequestContext.getCurrentInstance();

            if(users.contains(username)) {
        loggedIn = false;
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Username taken", "Try with another username."));

        requestContext.update("growl");
    }
    else {
        users.addUser(username);
        pushContext.push(CHANNEL, username + " joined the channel.");
        requestContext.execute("subscriber.connect('/" + username + "')");
        loggedIn = true;
    }
    }

public void disconnect() {
    //remove user and update ui
    users.removeUser(username);
    RequestContext.getCurrentInstance().update("form:users");

    //push leave information
    pushContext.push(CHANNEL, username + " left the channel.");

    //reset state
    loggedIn = false;
    username = null;
}
} 
```

……

```
public class User implements Serializable {

private static final long serialVersionUID = 1L;
    private String firstname;
    private String lastname;
    private Integer age;
    private String street;
    private String city;
    private String postalCode;
    private String info;
    private String email;
    private String phone;

    public String getFirstname() {
            return firstname;
    }

    public void setFirstname(String firstname) {
            this.firstname = firstname;
    }

    public String getLastname() {
            return lastname;
    }

    public void setLastname(String lastname) {
            this.lastname = lastname;
    }

    public Integer getAge() {
            return age;
    }

    public void setAge(Integer age) {
            this.age = age;
    }

    public String getStreet() {
            return street;
    }

    public void setStreet(String street) {
            this.street = street;
    }

    public String getCity() {
            return city;
    }

    public void setCity(String city) {
            this.city = city;
    }

    public String getPostalCode() {
            return postalCode;
    }

    public void setPostalCode(String postalCode) {
            this.postalCode = postalCode;
    }

    public String getInfo() {
            return info;
    }

    public void setInfo(String info) {
            this.info = info;
    }

    public String getEmail() {
            return email;
    }

    public void setEmail(String email) {
            this.email = email;
    }

    public String getPhone() {
            return phone;
    }

    public void setPhone(String phone) {
            this.phone = phone;
    }
} 
```

……

```
public class ChatUsers {

private List<String> users = Arrays.asList("fatih");

@PostConstruct
public void init() {
    this.users = new ArrayList<String>();
}

public List<String> getUsers() {
    return users;
}

public void setUsers(List<String> users) {
    this.users = users;
}

public void addUser(String user) {
    this.users.add(user);
}

public void removeUser(String user) {
    this.users.remove(user);
}

public boolean contains(String user) {
    return this.users.contains(user);
}
} 
```

我得到了 ChatView 类和这条线的例外`if(users.contains(username))`

任何建议都会非常有帮助。谢谢..

**编辑**

```
'SEVERE: Received 'java.lang.UnsupportedOperationException' when invoking action  listener '#{chatView.login}' for component 'j_idt21'
Dec 25, 2012 10:01:18 PM javax.faces.event.MethodExpressionActionListener processAction
SEVERE: java.lang.UnsupportedOperationException
at java.util.AbstractList.add(Unknown Source)
at java.util.AbstractList.add(Unknown Source)
at org.primefaces.examples.view.ChatUsers.addUser(ChatUsers.java:43)
at org.primefaces.examples.view.ChatView.login(ChatView.java:109)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
at javax.faces.component.UICommand.broadcast(UICommand.java:300)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)

Dec 25, 2012 10:01:18 PM com.sun.faces.context.AjaxExceptionHandlerImpl log
SEVERE: JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=form:j_idt21, Message=java.lang.UnsupportedOperationException
Dec 25, 2012 10:01:18 PM com.sun.faces.context.AjaxExceptionHandlerImpl log
SEVERE: java.lang.UnsupportedOperationException
javax.faces.event.AbortProcessingException: java.lang.UnsupportedOperationException
at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182)
at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
at javax.faces.component.UICommand.broadcast(UICommand.java:300)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.UnsupportedOperationException
at java.util.AbstractList.add(Unknown Source)
at java.util.AbstractList.add(Unknown Source)
at org.primefaces.examples.view.ChatUsers.addUser(ChatUsers.java:43)
at org.primefaces.examples.view.ChatView.login(ChatView.java:109)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
at   javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListen    er.java:153)
... 25 more 
```

'

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T19:54:08.420

你没有在你的类中初始化`ChatUsers`引用。所以，当你使用它时`CharView`，你会得到一个。`NPE`或者你可能没有在`setUsers`方法之前调用方法`login`，所以你`users`仍然没有初始化。

您的声明：-

```
private ChatUsers users; 
```

应改为： -

```
private ChatUsers users = new ChatUsers(); 
```

* * *

**更新 ： -**

在您的`CharView`班级中，当您创建如下列表时： -

```
private List<String> users = Arrays.asList("fatih"); 
```

你得到一个固定大小的列表，你不能修改它。所以，在类的`addUsers`方法中，当你尝试向它添加用户时`ChatView`，你会得到。`UnsupportedOperationException`

您应该像这样创建您的列表：-

```
private List<String> users = new ArrayList<String>(); 
```

如果您想在声明时初始化该列表，您可以执行以下操作： -

```
private List<String> users = new ArrayList<String>() {{
    add("fatih");
}}; 
```

这称为[双括号初始化](http://c2.com/cgi/wiki?DoubleBraceInitialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:00:09.603

请记下

```
private ChatUsers users; 
```

和

```
private ChatUsers users = null; 
```

类变量相同。

所以你必须在使用它之前将它初始化为非空对象。

# google-maps-api-3 - 有没有办法使覆盖对象不可点击？

> ID：14033568
> 
> 赞同：2
> 
> 时间：2012-12-25T19:52:19.083
> 
> 标签：google-maps-api-3

我正在处理我的这个项目，该项目需要通过单击来定义 lat/lng 元素，最后找到了一种方法，但刚刚发现，已经预定义的元素会干扰下面源定义的新覆盖元素。所以我看了又看，搜索，谷歌搜索，但找不到任何有用的信息：有没有办法让谷歌地图覆盖不可点击？

我正在使用自定义函数来获取单击事件的纬度和经度并放置预定义的圆形覆盖对象。但是，如果我已经预定义了覆盖元素，则无法单击它们顶部来设置新的覆盖元素。即，我需要使它们不可交互或不可点击，或者只是将它们设置在不同的层上，这样它们就不会干扰新元素的点击事件。

这是我使用的 JS：

```
<script type="text/javascript">
    var map;
    var markersArray = []; //the array for the newly defined objects

    function initMap()
    {
        var latlng = new google.maps.LatLng(41, 29);
        var myOptions = {
            zoom: 10,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        // add a click event handler to the map object
        google.maps.event.addListener(map, "click", function(event)
        {
            // place a marker
            placeMarker(event.latLng);

        });

            // I've predefined a couple of markers just to see how it works with already defined elements and discovered this interference that I mentioned above   
        var mar1 = new google.maps.LatLng(40.9653, 29.3705);
        var marker1 = new google.maps.Circle({
        center: mar1,
        radius: 2500,
        fillColor: "#FF0000",
        strokeWeight: 0,
        fillOpacity: 0.35,
        map: map
        });
        var mar2 = new google.maps.LatLng(40.9664, 29.3252);
        var marker2 = new google.maps.Circle({
        center: mar2,
        radius: 2500,
        fillColor: "#FF0000",
        strokeWeight: 0,
        fillOpacity: 0.35,
        map: map
        });
    marker1.setMap(map);
    marker2.setMap(map);

    }

    function placeMarker(location) {
        // first remove all new markers if there are any, so that we define one new at a time
        deleteOverlays();

        var new_marker = new google.maps.Circle({
            center: location,
            radius: 2500,
            strokeColor: "#FF0000",
            strokeOpacity: 0.8,
            strokeWeight: 0,
            fillColor: "#FF0000",
            fillOpacity: 0.35,
            //position: location, 
            map: map
        });

        // add marker in markers array
        markersArray.push(new_marker);

    }

    // Deletes all markers in the array by removing references to them
    function deleteOverlays() {
        if (markersArray) {
            for (i in markersArray) {
                markersArray[i].setMap(null);
            }
        markersArray.length = 0;
        }
    }

</script> 
```

[小提琴](http://jsfiddle.net/tCcLR/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T21:00:47.530

[在 CircleOptions 中](https://developers.google.com/maps/documentation/javascript/reference#CircleOptions)设置{clickable: false} 。

```
 var new_marker = new google.maps.Circle({
        center: location,
        radius: 2500,
        strokeColor: "#FF0000",
        strokeOpacity: 0.8,
        strokeWeight: 0,
        fillColor: "#FF0000",
        fillOpacity: 0.35,
        clickable: false,     // <=====================
        map: map
    }); 
```

`[Modified jsfiddle](https://jsfiddle.net/ulysse_bn/n5rh4azv/)`

# android - microSD 加载延迟导致首次加载时出现空值

> ID：14033571
> 
> 赞同：2
> 
> 时间：2012-12-25T19:52:35.870
> 
> 标签：android, file-io

我将各种用户帐户存储在保存在 microSD 卡上的文件中的自定义 Object *ArrayList中，并使用以下方法加载此文件：*

```
public static ArrayList<User> loadAllUsers() {
        if (storageAvailable()) {
            ArrayList<User> myList = new ArrayList<User>();
            try {
                FileInputStream myListUsersSaved = new FileInputStream(baseDir
                        + File.separator + fileName);

                ObjectInputStream myListUsers = new ObjectInputStream(
                        myListUsersSaved);

                myList = (ArrayList<User>) myListUsers.readObject();

                myListUsers.close();

            } catch (Exception exc) {
                exc.printStackTrace();
            }

            return myList;
        } else {
            return null;
        }

    } 
```

这通常工作正常，但不幸的是，在一些速度较慢的设备中，第一次加载尝试失败，可能是由于访问 microSD 上的数据时延迟，当我打开加载保存的各种配置文件的活动时，该方法第一次返回*null*和这似乎是空的，如果我第二次尝试重新加载活动，没问题。

有什么建议可以避免这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:46:49.163

延迟仅发生在一些罕见的修改固件中，这些固件将所有设备内存移动到 microSD。解决方法是恢复稳定固件或加载两倍的方法。

# linux - 为进程打开多个终端的原因？

> ID：14033572
> 
> 赞同：0
> 
> 时间：2012-12-25T19:53:23.113
> 
> 标签：linux, unix, terminal

我经常看到技术教程，其中我应该为每个程序/进程打开一个终端，实际上我觉得没有必要这样做（终端上没有输出，没有通过终端终止等），而是我可以运行所有节目背景以`&`结尾。使用多个终端是否还有优势/技术原因？

（根本不是通用的，但[本教程](http://www.ros.org/wiki/ROS/Tutorials/UsingRqtconsoleRoslaunch)就是一个例子）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:59:09.887

这可能很大程度上是因为解释它比解释如何在后台启动程序更容易。一部分也可能是指令使用了类似“export X=something”的东西，并且他们不想在以后给另一个进程造成问题，这可能不会像预期的那样运行。

但通常，如果您更喜欢该解决方案，您可以只使用一个终端窗口，或一个带有多个选项卡的终端。不同的人对“做事的正确方式”有不同的想法——只要它每次都按预期工作，你用哪种方式做事并不是一个大问题。

除了环境变量之外，我看不出拥有多个终端的任何技术原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:58:46.703

您在终端上运行的命令将使用相同的终端 (stdout) 来刷新信息/警告或错误消息。如果你愿意，你可以在后台运行所有这些命令，就像你说的使用 & 但是很难跟踪这些程序可能产生的任何消息。一切都将显示在同一个控制台上。

# iphone - SimFinger 移动到中间

> ID：14033576
> 
> 赞同：-1
> 
> 时间：2012-12-25T19:53:52.880
> 
> 标签：iphone, ios, ipad, ios-simulator

我有一个关于 SimFinger 的问题。SimFinger 是一个让模拟器拍摄视频的应用程序（聪明的想法）。唯一的问题是 SimFinger 一直移动到屏幕左侧。我们能否将 SimFinger 移到中间以获得 16:9 的比例。您可以在 GitHub 上安装 SimFinger：[https](https://github.com/atebits/SimFinger) ://github.com/atebits/SimFinger 。感谢您的帮助（查看项目并告诉我需要更改代码的哪一部分以使 SimFinger 位于屏幕中间）。![在此处输入图像描述](../Images/d215b7d4c501d1ab1c42f6713ea2842b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:21:45.917

刚刚检查[了他们的博客](http://www.iphonesat.com/not-your-average-iphone-screencast-2/)，这就是那里提到的，

> 一些注意事项：您可能想隐藏您的 Dock。SimFinger 当前将自己锁定在屏幕的左下方。**如果您在 iPhone 模拟器已经运行的情况下启动 SimFinger，它将自动重新定位 iPhone 模拟器。如果他们不正常，只需转到控制 - 重新定位 iPhone 模拟器窗口**（您需要在系统偏好设置中启用辅助功能才能工作）。

如果这没有帮助，请尝试并回复他们。所以没有办法移动sim手指，但它应该自动与模拟器对齐。

# c# - 父线程死后子线程会死吗？

> ID：14033577
> 
> 赞同：1
> 
> 时间：2012-12-25T19:53:58.187
> 
> 标签：c#, multithreading

我正在开发一个多线程程序，对此我不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T19:57:06.677

不，但是标记为[IsBackground](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)的线程将在其宿主进程终止时终止，而如果`IsBackground`为 false，它们将阻止进程终止，直到它们完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T19:56:49.060

如果后台线程的 IsBackground 属性设置为 true，则只有在所有前台线程完成时才会终止后台线程。我假设我们正在谈论.NET :)

[http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)

# batch-file - 创建一个在发生名称冲突时保留两个文件的批处理文件

> ID：14033582
> 
> 赞同：2
> 
> 时间：2012-12-25T19:54:16.940
> 
> 标签：batch-file

有没有办法制作一个批处理文件，当存在名称冲突时不会覆盖现有文件，而是将文件的两个副本保留在同一路径中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T04:16:04.963

下面的批处理文件就像只包含一个文件的 COPY 命令。如果文件已存在于目标文件夹中，则将括号中的数字添加到新文件中以保留两个文件。

```
@echo off
Rem mycopy sourceFile targetDir
Set targetName=%~1
Set i=0
:nextName
   If not exist "%~2/%targetName%" goto copy
   Set /A i+=1
   Set targetName=%~1 (%i%)
   Goto nextName
:copy
Copy %1 "%~2/%targetName%" 
```

# php - 我在 php://input 中看到我的 POST 数据，但 $_POST 为空（可能是服务器配置问题）

> ID：14033585
> 
> 赞同：0
> 
> 时间：2012-12-25T19:54:42.383
> 
> 标签：php, javascript, ajax, post

我有一个通过 POST 请求文件夹/文件路径的 ajax 网络画廊。它已经在我的 xp lighttpd/php 测试服务器上运行了一段时间，没有出现任何问题。

昨天我试图将它移到我的新 linux 开发服务器上，并决定尝试使用 php 内置服务器来完成这项工作，以节省我使用 confin apache 或 nginx 的麻烦。

**问题是，在新服务器上，画廊不起作用（在我的生产主机服务器或运行 php -S 0.0.0.0:80 而不是 lighttpd 与以前工作的完全相同的 php.ini 的旧测试服务器上也不起作用）和我已将其缩小为：$_POST 突然完全为空，即使我可以在 php://input 中看到发布的数据。**

这是 $_SERVER 的内容（运行新的 linux 服务器）

```
'DOCUMENT_ROOT' => '/xxx/public_html',
'REMOTE_ADDR' => 'x.x.x.x',
'REMOTE_PORT' => '54061',
'SERVER_SOFTWARE' => 'PHP 5.4.4-10 Development Server',
'SERVER_PROTOCOL' => 'HTTP/1.1',
'SERVER_NAME' => '0.0.0.0',
'SERVER_PORT' => '80',
'REQUEST_URI' => '/gustaf/photos/index.php',
'REQUEST_METHOD' => 'POST',
'SCRIPT_NAME' => '/gustaf/photos/index.php',
'SCRIPT_FILENAME' => '/xxx/public_html/gustaf/photos/index.php',
'PHP_SELF' => '/gustaf/photos/index.php',
'HTTP_HOST' => 'xxx.xxx',
'HTTP_CONNECTION' => 'keep-alive',
'HTTP_CONTENT_LENGTH' => '46',
'HTTP_CACHE_CONTROL' => 'max-age=0',
'HTTP_ORIGIN' => 'http://xxx.xxx',
'HTTP_USER_AGENT' => 'Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11',
'HTTP_CONTENT_TYPE' => 'application/x-www-form-urlencoded',
'HTTP_ACCEPT' => '*/*',
'HTTP_REFERER' => 'http://xxx.xxx/gustaf/photos/index.php',
'HTTP_ACCEPT_ENCODING' => 'gzip,deflate,sdch',
'HTTP_ACCEPT_LANGUAGE' => 'en-US,en;q=0.8',
'HTTP_ACCEPT_CHARSET' => 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
'REQUEST_TIME_FLOAT' => 1356462787.3962,
'REQUEST_TIME' => 1356462787, 
```

这就是 JS 位在 POST 中的样子：

```
 xmlhttp.open("POST","index.php",true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    //xmlhttp.setRequestHeader("Content-length", parent.path.length);
    //xmlhttp.setRequestHeader("Connection", "close"); 
    xmlhttp.send("json="+JSON.stringify({"dir":parent.path})); 
```

我也尝试将连接设置为“关闭”，但由于某种原因，chrome 不尊重这一点，仍然将其发送为“keep-alive”。

我花了整整（圣诞节）的一天，我开始用完头发来解决这个问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T19:59:13.090

您将内容类型设置为 urlencoded，但您不能确保您的帖子数据是 urlencoded。`encodeURIComponent()`在每个帖子值周围添加：

```
xmlhttp.send("json="+encodeURIComponent(JSON.stringify({"dir":parent.path}))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:51:53.313

解决了！

将“接受”从“ */* ”更改为“text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8”，现在它可以工作了！

# javascript - JavaScript click() 方法仅在 Chrome 扩展中有效一次

> ID：14033588
> 
> 赞同：6
> 
> 时间：2012-12-25T19:54:56.127
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, content-security-policy

我正在尝试在 Chrome 扩展程序中下载多个文件。下面的代码创建一个文件的虚拟链接，然后触发下载文件的 .click() 事件。问题是只有第一个 .click() 事件触发下载。随后的 .click() 事件将被忽略。

这里**manifest.json**：

```
{
  "name": "Simple File Downloader",
  "version": "0.1",
  "permissions": ["contextMenus", "http://*/"],
  "background": {
    "persistent": false,
    "scripts": ["sample.js"]
  },
  "content_security_policy": "script-src 'self'; object-src 'self'",
  "manifest_version": 2
} 
```

这里是**sample.js**：

```
function onClickHandler(info, tab) {
    var a = document.createElement('a');
    a.href = 'http://or.cdn.sstatic.net/chat/so.mp3';
    a.download = 'so.mp3';
    document.body.appendChild(a);
    a.click(); // this click triggers the download
    // this timeout violates content security policy
    // setTimeout(a, 300); 
    a.click(); // this click doesn't do anything
    document.body.removeChild(a);

    a = document.createElement('a');
    a.href = 'http://or.cdn.sstatic.net/chat/so.mp3';
    a.download = 'so.mp3'; 
    document.body.appendChild(a);
    a.click(); // this click doesn't do anything either
    document.body.removeChild(a);
};

chrome.contextMenus.onClicked.addListener(onClickHandler);
chrome.runtime.onInstalled.addListener(function() {
  chrome.contextMenus.create({"title": "Download File", "id":"download_file"});
}); 
```

我试过了：

*   Chrome 扩展程序中描述的下载文件的不同方法使用 FileSaver.js[写入文件系统](https://stackoverflow.com/questions/8058493/chrome-extension-write-to-file-system)，结果完全相同，第一个文件被下载，第二个文件不被下载

*   添加超时，如[Is it possible to make two .click method calls in javascript 中](https://stackoverflow.com/questions/851384/is-it-possible-to-make-two-click-method-calls-in-javascript)所述，导致违反 content-security-policy，我尝试使用[Content-Security-Policy error in google chrome extension making 中](https://stackoverflow.com/questions/11045653/content-security-policy-error-in-google-chrome-extension-making)描述的方法解决此问题，但没有成功

*   使用 JQuery click event 中描述的 jQuery .live 方法[只工作一次](https://stackoverflow.com/questions/10194728/jquery-click-event-works-only-once)，也没有成功，但我不是 100% 确定我正确地实现了这个（如果人们认为这种方法应该解决它，可以稍后发布代码）

很惊讶为什么简单地保存多个文件如此困难。感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:05:20.313

诀窍不是使用`element.click`方法，而是创建多个`MouseEvent`. 为此，您需要在`MouseEvent`每次需要点击时创建一个。

```
function clicker(el, clickCount) {
  var mousedownEvent;
  while(clickCount--) {
    mousedownEvent = document.createEvent("MouseEvent");
    mousedownEvent.initMouseEvent("click", true, true, window, 0, null, null, null, null, false , false, false, false, 0, null);
    el.dispatchEvent(mousedownEvent);
  }
}

clicker(a, 3);
// your anchor 'a' gets clicked on 3 times. 
```

但是，在 Chrome 中使用此方法时，您会收到来自浏览器的警告，询问*“此站点正在尝试下载多个文件。您要允许这样做吗？[拒绝] [允许]”*。因此，如果您在扩展程序的后台页面中执行此操作，后台页面会收到警告，用户看不到它，因此用户无法单击“允许”。

一个（严重/讨厌的）解决方法是创建一个“点击”锚点的选项卡。像这样的东西：

```
function _anchorDownloader(url, filename) {
  var timeout = 500;
  return 'javascript:\'<!doctype html><html>'+
    '<head></head>' +
    '<script>' +
      'function initDownload() {'+
        'var el = document.getElementById("anchor");'+
        'el.click();' +
        'setTimeout(function() { window.close(); }, ' + timeout + ');' +
      '}'+
    '</script>' +
    '<body onload="initDownload()">' +
      '<a id="anchor" href="' + url + '" download="'+ filename + '"></a>'+
    '</body>' +
    '</html>\'';
};

function downloadResource(info, tab) {
  // ...
  chrome.tabs.create( { 'url' : _anchorDownloader( url, filename ), 'active' : false  } );
  // ...
}

chrome.contextMenus.create({"title": "Save Image…", "contexts":["image"], "onclick": downloadResource }); 
```

为此，扩展必须在**manifest.json**`"tabs"`中具有a 。您可以调整超时以关闭选项卡，但是，如果您关闭它太快，则不会发生下载。`permission`

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T21:03:28.053

而不是使用`.live()`不再推荐的方法尝试`.on()`

```
$(document).on("click", "a", function( event ){
    // do whatever
}); 
```

这是[文档](http://api.jquery.com/on/)**

# json - 使用 Play Scala api 和 Json 序列化对象

> ID：14033589
> 
> 赞同：3
> 
> 时间：2012-12-25T19:55:04.553
> 
> 标签：json, scala, playframework-2.0, jackson, playframework-json

我尝试在使用 Scala 到 Json 的 play 2.0 应用程序中序列化我的模型。这就是我的代码的样子：

```
package models

import play.api.libs.json._

case class Task(id: Long, label: String, date: String)

object Task {

  ...

  implicit object TaskFormat extends Format[Task] {
    def reads(json: JsValue): Task = Task(
      (json \ "id").as[Long],
      (json \ "label").as[String],
      (json \ "date").as[String])

    def writes(t: Task): JsValue = JsObject(Seq(
      "id" -> JsNumber(t.id),
      "label" -> JsString(t.label),
      "date" -> JsString(t.date)))
  }
} 
```

不幸的是，我在运行应用程序时收到以下错误：

```
verriding method reads in trait Reads of type (json: play.api.libs.json.JsValue)play.api.libs.json.JsResult[models.Task]; method reads has incompatible type 
```

我还没有找到解决办法。api（[http://www.playframework.org/documentation/api/2.0/scala/play/api/libs/json/package.html](http://www.playframework.org/documentation/api/2.0/scala/play/api/libs/json/package.html)）的文档似乎也暗示了我采用的方法。

有人发现我的错误吗？

非常感谢，
乔尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T20:02:04.927

错误信息告诉你问题是什么：返回类型必须是

```
play.api.libs.json.JsResult[models.Task] 
```

因此，在我看来，您是`Task`直接返回，而不是将其包装在`JsResult`.

我不使用 Play，但这是编译器试图告诉你的。

那么，鉴于此，问题是什么？如果您查看 Play 2.0 文档，它会说`reads`返回一个`T`. 但是如果您查看[GitHub 源代码](https://github.com/playframework/Play20/blob/dd287081fbd2206d4d809c2de8d8a29ec0d138a4/framework/src/play/src/main/scala/play/api/libs/json/Reads.scala)，您会发现它已更改为`JsResult[T]`截至 2012 年 8 月 21 日。

因此，您使用的版本比人们书面建议的版本更新。

我不确定更新的 API 是否在线，但您可以在[此处](https://github.com/playframework/Play20/tree/master/framework/src/play/src/main/scala/play/api/libs/json)浏览 JSON 源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T21:27:45.717

根据[这篇](http://mandubian.com/2012/09/08/unveiling-play-2-dot-1-json-api-part1-jspath-reads-combinators/)文章，在 Play 2.1 中实现 Reads[T] 的更正确方法是：

```
implicit val productReads: Reads[Product] = (
    (__ \ "ean").read[Long] and
    (__ \ "name").read[String] and
    (__ \ "description").read[String]
)(Product.apply _) 
```

不要忘记额外的进口：

```
import play.api.libs.functional.syntax._ 
import play.api.libs.json._ 
```

# c++ - C++ 函数指针和地址

> ID：14033596
> 
> 赞同：1
> 
> 时间：2012-12-25T19:56:46.520
> 
> 标签：c++, reference

我正在尝试学习 C++，并在我正在使用的教程中遇到了这个令人困惑的示例，也许有人可以为我澄清这一点。

以下代码来自教程。我已经放了一个“标签”（如果你愿意的话`// <---`），指出让我感到困惑的部分。

```
#include <iostream>
using namespace std;

class CDummy {
  public:
    // signature: accepts an address 
    int isitme (CDummy& param);
};

// actual function that accepts an address passed in from main set to
// the param variable
int CDummy::isitme (CDummy& param) // <--- 1
{ 
```

现在这是令人困惑的部分。我正在获取地址变量的地址？？？地址不是已经传进去了吗？

```
 if (&param == this) return true; // <--- 2
  else return false;
}

int main () {
  CDummy a;
  CDummy* b = &a;
  // passes in the class 
  if ( b->isitme(a) )
    cout << "yes, &a is b";
  return 0;
} 
```

## 现在在下面对我有意义的代码中

```
#include <iostream>
using namespace std;

class CDummy {
  public:
    int isitme (CDummy *param);
};

int CDummy::isitme (CDummy *param) // <--- 1
{ 
```

这部分非常有意义。param 是一个指针，我将 a 类的指针与 b 类的指针进行比较。

```
 if (param == this) return true; // <--- 2
  else return false;
}

int main () {
  CDummy a;
  CDummy *b = &a;
  // pass in the address.
  if ( b->isitme(&a) )
    cout << "yes, &a is b";
  return 0;
} 
```

哪一个代码示例是正确的？从某种意义上说是正确的，这是首选的方法，因为它们都有效。另外，为什么我在第一个示例中使用地址的地址？

抱歉，如果以前已经回答过这个问题，但我找不到。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T19:58:01.747

```
int CDummy::isitme (CDummy& param) // <--- 1 
```

在 C++ 中，`&`通过[*引用*](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)而不是值[传递参数的方式。](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)*它不表示地址。*

 *请注意，您可能会看到`CDummy & param`或`CDummy &param`。全部都是一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T19:58:17.110

您需要带上您最喜欢的 C++ 书籍并阅读*参考资料*。

在这份声明中

```
int CDummy::isitme (CDummy& param) 
```

`param`不是一个地址，你似乎相信。这是一个参考。

您不是第一个被`&`引用声明中使用的字符误导的人。这个问题之前在 StackOverflow 上已经被问过很多次了

[什么是 C++ 中的引用变量？](https://stackoverflow.com/questions/2765999/what-is-a-reference-variable-in-c)

[C++中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)

但在我看来，一本书/指南/教程将是一个更好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T19:59:18.630

一元`&`返回其操作数的地址。并且在参数中使用时，表示*通过引用*传递。*

# java - 记录 net.sf.json.xml.XMLSerializer getType

> ID：14033600
> 
> 赞同：1
> 
> 时间：2012-12-25T19:57:50.993
> 
> 标签：java, xmlserializer

我正在使用 net.sf.json.xml.XMLSerializer 我有这个错误

```
25 déc. 2012 18:20:38 net.sf.json.xml.XMLSerializer getType
INFO: Using default type string 
```

我想禁用它。有没有办法禁用这个库的错误日志？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:02:10.460

您可以从这样的类中关闭日志（log4j）。

```
log4j.logger.net.sf.json.xml.XMLSerializer=OFF 
```

# android - android中的模式匹配

> ID：14033604
> 
> 赞同：0
> 
> 时间：2012-12-25T19:58:19.857
> 
> 标签：android, android-edittext

我有一个字符串，其中包含员工的全名。现在我希望它与字符串值进行比较。如果匹配的字符超过三个，那么它应该显示匹配它的所有记录。

```
String name1 = "abcdefghijklmnopqrstuv";
EditText editText = findVewById(R.id.eText);
String name2 = ediText.getText().toString();

if (name2.equalsIgnoreCase(name1))
{
    //do something
} 
```

问题是如果它与完整模式匹配，它会进入 if 循环，我想检查 name2 是否匹配前三个字符和三个以上的字符，并且用户输入的所有字符都应该进入 if 条件。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:04:58.450

尝试：

```
if (name2.substring(0,3).equalsIgnoreCase(name1) || (name1.lenght > 3 && name2.contains(name1)) || name2.equalsIgnoreCase(name1)) 
{
    //do something
} 
```

*   第一个条件是查找前 3 个字符匹配；

`name2.substring(0,3).equalsIgnoreCase(name1)`

*   第二个条件是寻找匹配超过 3 个字符；

`(name1.lenght > 3 && name2.contains(name1))`

*   第三个条件是完全匹配；

`name2.equalsIgnoreCase(name1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:08:38.577

您是否尝试过使用正则表达式？[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

如果您将它与列表一起使用，那么您应该查看过滤器界面。[http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/](http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/)

# windows-phone-7 - 增加 Windows 手机上 sql server Compact 版本的大小限制

> ID：14033613
> 
> 赞同：1
> 
> 时间：2012-12-25T19:59:18.207
> 
> 标签：windows-phone-7, sql-server-ce

有没有办法增加 Windows phone 7 上 Sql Server Compact 版本的大小限制？我正在开发一个添加大量数据的应用程序，并且我不断收到大小限制异常（大小不能大于 32Mb）。

我尝试将“最大数据库大小”添加到连接字符串，但似乎不适用于 Windows 手机。我试过在这里查看其他人的答案，但他们似乎没有解决 windows phone

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:01:27.680

Windows phone7 sql server 精简版的最大数据库大小为 512 Mb；可以参考以下链接创建512Mb的数据库

```
 http://msdn.microsoft.com/en-us/library/hh202861(v=vs.92).aspx 
```

MyDataContext db = new MyDataContext("数据源 = 'mydb.sdf'; 文件模式 = 只读；最大数据库大小 = 512);

# css - 制作全屏幻灯片。CSS 宽度问题

> ID：14033617
> 
> 赞同：-1
> 
> 时间：2012-12-25T19:59:57.740
> 
> 标签：css

好的，这就是交易。我决定我不想为此使用 jquery 插件，因为我想学习并保持尽可能干净。

我正在尝试创建全屏水平幻灯片。

我有一个 100% 宽度和高度的容器 div。

我有一个宽度为 999% 的子容器

在该子容器中，我的图像向左浮动，但问题是：我希望每个图像都是主容器 div 的宽度或 100%，而不是子容器。我正在这样做，所以图像会根据浏览器大小按比例调整大小，所以我不能给它一个特定的 px 大小。

知道我该怎么做吗？我已经尝试在窗口调整大小时使用 jquery 来获取图像 div 大小并将其设置为文档大小，但由于某种原因它不起作用。一旦我调整窗口大小，图像宽度就会超过文档宽度的 100%。

编辑：根据要求，这是一个代码示例。基本上，我想让 .imgBlock 宽度始终是主容器的宽度。我不能使用 100% 作为宽度，因为它位于具有可变宽度的子容器中。

```
#mainContainer {
float:left;
width:100%; 
height:100px; 
position:relative; 
background:#000;        
}

#subContainer {
width:auto; 
height:100%;
background:#f00;
float:left;   
}

.imgBlock {
float:left; 
height:100%; 
border:1px solid #fff;    
}

<div id="mainContainer">
<div id="subContainer">
    <li class="imgBlock"><h1>IMAGE</h1></li>
    <li class="imgBlock"><h1>IMAGE</h1></li>
    <li class="imgBlock"><h1>IMAGE</h1></li>
    <li class="imgBlock"><h1>IMAGE</h1></li>
    <li class="imgBlock"><h1>IMAGE</h1></li>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:02:35.033

Ok the resize() jquery function worked. The issue seemed to have come about due to the main container not being overflow:hidden.

```
var docuW = $(document).width();
$(".imgBlock").css({'width': docuW });

$(window).resize(function() {
    docuW = $(document).width();
    $(".imgBlock").css({'width': docuW });  
}); 
```

# android - android保存以编程方式创建的视图

> ID：14033619
> 
> 赞同：2
> 
> 时间：2012-12-25T20:00:20.340
> 
> 标签：android, view, android-activity, android-lifecycle

我以编程方式创建了一个包含其他视图的 RelativeLayout，并将其添加到 XML 中定义的父级。但是在重新创建活动后，以编程方式创建的所有视图（包括布局）都会消失。我需要一个 SharedPreferences 对象来保存值然后重新创建布局还是有更简单的方法来保存它？

PS所有新创建的视图都分配了一个ID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:38:05.527

我建议你调查`Activity.onSaveInstanceState(Bundle)`：

> 默认实现通过在层次结构**中具有 id的****每个视图**上调用 onSaveInstanceState()并保存当前聚焦视图的 id（所有这些都由onRestoreInstanceState()) 的默认实现。如果您重写此方法以保存每个单独视图未捕获的附加信息，您可能需要调用默认实现 [ via和]，否则请准备好自己保存每个视图的所有状态。**`super.onSaveInstanceState()``super.onRestoreInstanceState()`**

 **[https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)](https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle))

以及我在这里的回答：

[如何以编程方式为视图分配 ID？](https://stackoverflow.com/questions/8460680/how-can-i-assign-a-id-to-view-programmatically/13241629#13241629)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T22:02:54.693

> 我是否需要一个 SharedPreferences 对象来保存值然后重新创建布局

你说你正在创建这些小部件`onResume()`。您的代码`onResume()`需要知道需要创建哪些小部件。如果这纯粹是暂时的信息，并且您担心由于屏幕旋转或其他配置更改而被破坏和重新创建的活动，`onSaveInstanceState()`请在活动或片段上使用以将有关这些小部件的数据从旧的传递到新的活动的实例。另一方面，如果您担心几个月后能够重新创建这些视图，则需要永久存储这些信息：`SharedPreferences`数据库、其他文件结构、“云”等。**

# android - 使用 DialogFragment AlertDialog 中的更改更新 ListFragment（父级）中的列表

> ID：14033621
> 
> 赞同：2
> 
> 时间：2012-12-25T20:00:49.617
> 
> 标签：android, android-dialogfragment

我有一个名为**MeasurementList**的 ListFragment ，它显示所有注册的测量数据。要注册新的测量数据，我使用名为**NewMeasurement**的 DialogFragment 和 AlertDialog 中的自定义视图，并填写所需的 UI 控件。

现在，我需要一个优雅的解决方案，在 DialogFragment 被解除后，用新注册的度量值更新 ListFragment 中的度量值列表。我不想从数据库中更新列表，而只是将新创建的测量对象添加到列表中。我尝试遵循 Android 指南，了解如何使片段通过回调接口与活动通信（为活动[创建事件回调](http://developer.android.com/guide/components/fragments.html#EventCallbacks)）。MeasurementList 将其引用传递给 NewMeasurement，因此它可以在注册新测量后回调它。问题是如何在 NewMeasurement.newInstance() 方法的 Bundle 中保存监听器引用。它主要保存原始数据类型，而不是像我这样的对象。

任何提示和建议将不胜感激。

**测量列表.java**

```
public class MeasurementList extends ListFragment implements OnMeasurementSetListener {
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.addMeasurement:
                NewMeasurement newMeasurementDialog = NewMeasurement.newInstance(this);
                newMeasurementDialog.show(getFragmentManager(), "newMeasurementDialog");
                break;
            default:
                break;
        }
        return true;
    }

    @Override
    public void onMeasurementSet(Measurement measurement) {
        MeasurementAdapter listAdapter = (MeasurementAdapter) getListAdapter();
        listAdapter.add(measurement);
    }
} 
```

**OnMeasurementSetListener.java**

```
public interface OnMeasurementSetListener {
    public abstract void onMeasurementSet(Measurement measurement);
} 
```

**新测量.java**

```
public class NewMeasurement extends DialogFragment
{
    private OnMeasurementSetListener mListener;

    public static NewMeasurement newInstance(OnMeasurementSetListener listener) 
    {
        NewMeasurement nm = new NewMeasurement();
        Bundle b = new Bundle();
        b.putSerializable("listener", listener); // NOT WORKING
        f.setArguments(b);
        return f;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final View v = factory.inflate(R.layout.layout_dialog_new_measurement, null);
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(R.string.title_alert_dialog_new_weight);
        builder.setIconAttribute(R.drawable.add);
        builder.setView(v);
        builder.setPositiveButton(R.string.alert_dialog_ok, this);
        builder.setNegativeButton(R.string.alert_dialog_cancel, this);
        return builder.create();

        if (savedInstanceState != null)
            mListener = (OnMeasurementSetListener) savedInstanceState.getSerializable("listener");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:43:37.340

您好，您可以尝试通过设置新的测量值来处理此 onAttach 方法，它将创建对您的活动的回调。

```
public class MeasurementList extends ListFragment implements OnMeasurementSetListener {
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.addMeasurement:
                NewMeasurement newMeasurementDialog = NewMeasurement.newInstance(this);
                newMeasurementDialog.show(getFragmentManager(), "newMeasurementDialog");
                break;
            default:
                break;
        }
        return true;
    }

    @Override
    public void onMeasurementSet(Measurement measurement) {
        MeasurementAdapter listAdapter = (MeasurementAdapter) getListAdapter();
        listAdapter.add(measurement);
    }
} 
```

**新测量.java**

```
public class NewMeasurement extends DialogFragment {

    public interface OnMeasurementSetListener {
        public abstract void onMeasurementSet(Measurement measurement);
    }

    private OnMeasurementSetListener onMeasurementSetListener;
    private Measurement currentMeasurement;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            Measurement measurement = new Measurement();
            measurement.s = "fragment";
            onMeasurementSetListener = (OnMeasurementSetListener) activity;
            setMeasurement(measurement);

        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement onMeasurementSetListener");
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle("Fragment Dialog");
        builder.setIconAttribute(R.drawable.ic_launcher);
        builder.setPositiveButton(R.string.app_name, new OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        builder.setNegativeButton(R.string.app_name, new OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        return builder.create();
    }

    private void setMeasurement(Measurement measurement) {
        currentMeasurement = measurement;
        onMeasurementSetListener.onMeasurementSet(measurement);
    }

} 
```

**样本测量.java**

```
public class Measurement {
    public String s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-11T04:16:19.810

简单地说，从您的**DialogFragment**中，您可以在更新您的**ListFragment的****Activity**中回调包含您的**ListFragment的****Activity**，调用新创建的方法。

# android - Android - Facebook 身份验证后显示页面内容

> ID：14033622
> 
> 赞同：1
> 
> 时间：2012-12-25T20:01:06.437
> 
> 标签：android, facebook, authentication

有一个网站使用 Facebook 身份验证登录。

我正在开发一个通过 facebook 登录后从网站获取数据的应用程序。问题是该网站还使用 facebook auth，并且我要连接的页面具有动态内容（取决于用户是谁）。

我怎样才能连接到那个页面？如有必要，我可以与网站开发人员交谈。

# javascript - 长尾视频 php API 集成问题

> ID：14033626
> 
> 赞同：0
> 
> 时间：2012-12-25T20:01:35.713
> 
> 标签：javascript

希望将longtail php（运行中的位）视频API集成到应用程序中，我希望能够从内容服务器检索所有密钥并将它们与我的mysql数据库song_id中的列相关联，并使用锚标记单击时能够检索正确视频的查询字符串。非常混淆如何进行集成。调用 API 后，返回一个数组。.如何查询 API 以访问所有密钥？

```
$response = $botr_api->call("/videos/list",array('video_key'=>$video_key));
if ($response['status'] == "error") { die($response); }

Array
(
    [status] => ok
    [video] => Array
        (
            [status] => ready
            [sourceurl] => 
            [description] => 
            [tags] => Kompa
            [views] => 1
            [title] => Pou'n Ale
            [sourceformat] => 
            [mediatype] => video
            [custom] => Array
                (
                )

            [duration] => 263.37
            [upload_session_id] => 
            [link] => 
            [author] => 
            [key] => ZLMzClv9
            [error] => 
            [date] => 1356543180
            [md5] => c12663ebc91858f8223d7d2673048bdb
            [sourcetype] => file
            [size] => 388334729
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:10:36.127

```
<video onClick="if( this.paused) this.play(); else this.pause();"> 
```

您当然可以改进它（例如，使用适当的回调而不是内联事件），并用它做更多的事情（显示/隐藏播放按钮），但这是最简单的形式。

# c++ - 向控制台添加滚动条

> ID：14033627
> 
> 赞同：3
> 
> 时间：2012-12-25T20:01:43.860
> 
> 标签：c++, visual-studio, windows-console

如何使用`system`功能将滚动条添加到控制台？

我`system("MODE 100,50");`用来设置自定义控制台窗口大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:30:13.837

什么可以更简单？

```
COORD newSize = {100,9999};
SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), newSize); 
```

newSize 必须大于您当前的可见窗口区域

# opencv - 如何在 JavaCV 中使用单应矩阵 (3x3) 执行透视变换？

> ID：14033628
> 
> 赞同：3
> 
> 时间：2012-12-25T20:01:46.373
> 
> 标签：opencv, perspective, javacv, homography, warp

一段时间以来，我一直在尝试从任意角度拍摄台球桌的图像，定位四个角的坐标对 (x,y)，然后旋转/扭曲图像，以使生成的图像仅包含来自鸟瞰图。我正在使用 JavaCV 来完成这项任务。到目前为止，我已经编写了成功计算表格四个角的代码，如下所示（我在四个角上编写了半径为 25 的红色 cvCircles）。

![在此处输入图像描述](../Images/81b962fb2f054d35e1da9eabd1e27a98.png)

找到我的四个角后：
角 1（右下）X：3234 Y：1858
角 2（左下）X：0 Y：1801
角 3（右上）X：2722 Y：1069
角 4（左上）X： 523 岁：1030

## 我尝试使用 cvFindHomography 然后使用 cvWarpPerspectve 来完成此操作。我的代码可以在下面找到：

```
// Initialize Table Corners as Image Coordinates
    float[] aImg = {
        corners.get(0).x(), corners.get(0).y(), // BR X: 3234 Y: 1858
        corners.get(1).x(), corners.get(1).y(), // BL X: 0    Y: 1801
        corners.get(2).x(), corners.get(2).y(), // TR X: 2722 Y: 1069
        corners.get(3).x(), corners.get(3).y()  // TL X: 523  Y: 1030
    };

// Initialize World Coordinates (Are these even correct? How do I determine these?)
    float[] aWorld = {
        0.0f, 0.0f,
        0.0f, 1.0f,
        1.0f, 0.0f,
        1.0f,1.0f
    };

// Create 3x3 Homography Matrix
    CvMat homography = cvCreateMat(3, 3, opencv_core.CV_32FC1);
    opencv_imgproc.cvGetPerspectiveTransform(aImg, aWorld, homography);
    System.out.println(homography.toString());

// Create imgWarped and Warp Perspective
    IplImage imgWarped = cvCreateImage(cvGetSize(img), 8, 3);
    opencv_imgproc.cvWarpPerspective(img, imgWarped, homography, opencv_imgproc.CV_INTER_LINEAR, CvScalar.ZERO);

// Create Canvas and Display Image
    CanvasFrame canvas = new CanvasFrame("Warped Image");
    canvas.showImage(imgWarped);
    canvas.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

我获得的 3x3 单应矩阵是：
[ 0.0011688289, 7.928632E-4, -1.4279466
-8.698455E-5, 0.0049045905, -5.006235
-2.8205379E-5, 0.0015696458, 1.0 ]

## **不幸的是，结果是一个纯黑色的图像，里面*什么都没有*。我是在错误地接近这个吗？任何建议、代码、伪代码等都将不胜感激！

## 非常感谢您的阅读。**

# scala - playframework 2.0 scala - 在测试中找不到合适的驱动程序

> ID：14033629
> 
> 赞同：2
> 
> 时间：2012-12-25T20:01:50.207
> 
> 标签：scala, playframework-2.0, slick

我正在按照[本](http://java.dzone.com/articles/getting-started-play-21-scala)教程使用 playframework2.1 RC1 + Slick 加注星标。

当尝试启动 SoftwareSpec 测试（测试类模型类）时：

游戏测试

他们失败并出现如下错误：

> [错误] SQLException: 找不到适合 jdbc:h2:mem:test1 (DriverManager.java:190) 的驱动程序 [错误] SoftwareSpec$$anonfun$1$$anonfun$apply$3.apply(SoftwareSpec.scala:25) [错误] SoftwareSpec$$anonfun$1$$anonfun$apply$3.apply(SoftwareSpec.scala:25)

但是我已经在 application.conf 中启用了 h2 db，就像那篇文章中提到的那样。

我在 Build.scala 文件中使用了最新的依赖项：

"`com.typesafe" % "slick_2.10.0-RC1" % "1.0.0-RC1"`

有一次，当我将依赖项更改为 slick 到此版本时：

```
"com.typesafe" % "slick_2.10.0-RC1" % "0.11.2" 
```

然后测试成功通过。但是在我更改测试使其失败后，错误再次出现 - “没有合适的驱动程序”。在这之后，我所有的尝试（比如玩干净的任何东西）都没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T14:31:57.790

在 Travis CI 上运行测试时，我遇到了同样的错误。

一种解决方法是加载 JDBC 驱动程序类，例如`Class.forName("org.h2.Driver")`.

[https://github.com/seratch/scalikejdbc/blob/564cc07505d7a9f217945a7f2c07dc2c7460ed87/scalikejdbc-play-plugin/src/test/scala/scalikejdbc/PlayPluginSpec.scala#L15](https://github.com/seratch/scalikejdbc/blob/564cc07505d7a9f217945a7f2c07dc2c7460ed87/scalikejdbc-play-plugin/src/test/scala/scalikejdbc/PlayPluginSpec.scala#L15)

当然，我应该调查这个问题的原因并向 Play 团队报告，但我没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:37:51.693

我目前没有使用 Play，所以我无法测试以下内容，但应该没问题。对于最新的 Slick，您可以使用：

```
"com.typesafe" % "slick_2.10" % "1.0.0-RC1" 
```

对于 h2，以下应该有效：

```
"com.h2database" % "h2" % "1.3.166" 
```

# c# - 使用 Aforge.net 在图像上绘图不工作

> ID：14033632
> 
> 赞同：0
> 
> 时间：2012-12-25T20:01:55.533
> 
> 标签：c#, drawing, aforge

我正在尝试在图像上绘图

```
Graphics g = Graphics.FromImage(BWImage);
        Pen red = new Pen(Color.Red, 2);
        foreach (Blob blob in blobs)
        {
            List<IntPoint> leftPoints, rightPoints, edgePoints = new List<IntPoint>();

            // get blob's edge points
            blobCounter.GetBlobsLeftAndRightEdges(blob,
                 out leftPoints, out rightPoints);

            edgePoints.AddRange(leftPoints);
            edgePoints.AddRange(rightPoints);

            // blob's convex hull
            List<IntPoint> hull = hullFinder.FindHull(edgePoints);

            g.DrawPolygon(red, ToPointsArray(hull));

        } 
```

我从网络摄像头获取帧，并且对于每个帧我进行一些处理然后执行该代码，但是它不起作用，我尝试调试它，我发现该行

```
Graphics g = Graphics.FromImage(BWImage); 
```

它会一直执行下去，之后不会执行任何行！
请问有什么帮助吗？谢谢。

这是我的代码

```
 private void video_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        Bitmap bitmap = (Bitmap)eventArgs.Frame.Clone();

        ProcessImage(bitmap);
    } 
```

和 ProcessImage 方法：

```
#region Skin Detection
        YCbCrFiltering YCbCrFilter = new YCbCrFiltering();

        YCbCrFilter.Y = new Range(0, 1);
        YCbCrFilter.Cb = new Range(-0.1862745098039216f, 0.0294117647058824f);
        YCbCrFilter.Cr = new Range(0.0137254901960784f, 0.2254901960784314f);
        // apply the filter
        var YCbCrFilteredImage = YCbCrFilter.Apply(bitmap);

        #endregion

        #region GrayScale

        // create grayscale filter (BT709)
        Grayscale Gray_filter = new Grayscale(0.2125, 0.7154, 0.0721);
        // apply the filter
        Bitmap grayImage = Gray_filter.Apply(YCbCrFilteredImage);

        Threshold threshold = new Threshold(50);
        Bitmap BWImage = threshold.Apply(grayImage);

        #endregion

        #region Remove noise
        // create filter
        BlobsFiltering BlobsFilteringfilter = new BlobsFiltering();
        // configure filter
        BlobsFilteringfilter.CoupledSizeFiltering = true;
        BlobsFilteringfilter.MinWidth = 150;
        BlobsFilteringfilter.MinHeight = 150;
        BlobsFilteringfilter.MaxHeight = 600;
        BlobsFilteringfilter.MaxWidth = 600; 
        // apply the filter
        var BWImageFiltered = BlobsFilteringfilter.Apply(BWImage);
        #endregion

        #region Fill Holes
        FillHoles FillHolesfilter = new FillHoles();
        FillHolesfilter.MaxHoleHeight = 50;
        FillHolesfilter.MaxHoleWidth = 50;
        FillHolesfilter.CoupledSizeFiltering = false;
        var BWImageFilteredHoles = FillHolesfilter.Apply(BWImageFiltered);
        #endregion

        #region Contouring

        // process image with blob counter
        BlobCounter blobCounter = new BlobCounter();
        blobCounter.ProcessImage(BWImageFilteredHoles);
        Blob[] blobs = blobCounter.GetObjectsInformation();

        Graphics g = Graphics.FromImage(BWImageFilteredHoles);
        Pen red = new Pen(Color.Red, 2);
        // create convex hull searching algorithm
        GrahamConvexHull hullFinder = new GrahamConvexHull();
foreach (Blob blob in blobs)
        {
            List<IntPoint> AllEdgesPoints = new List<IntPoint>();
            List<IntPoint> leftPoints, rightPoints, edgePoints = new List<IntPoint>();

            // get blob's edge points
            blobCounter.GetBlobsLeftAndRightEdges(blob,
                 out leftPoints, out rightPoints);

            edgePoints.AddRange(leftPoints);
            edgePoints.AddRange(rightPoints);

            // blob's convex hull
            List<IntPoint> hull = hullFinder.FindHull(edgePoints);

            g.DrawPolygon(red, ToPointsArray(hull));
 g.Dispose();

        #endregion

        pictureBox1.Image = grayImage;
        pictureBox2.Image = BWImage;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:02:35.433

此代码周围是否有未显示的异常处理程序？`Graphics.FromImage()`应该抛出异常，因为您正在[传递具有索引像素格式的图像](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromimage.aspx)；`Grayscale.Apply()`返回带有`Format8bppIndexed`,的图像`BlobsFiltering.Apply()`并将保留它。

最重要的是，您需要创建一个`Bitmap`与 相同大小的新图像，`BWImage`从中获取您的图像，在新图像上`Graphics`绘画，然后矩形您的斑点。`BWImage`

# python - Python - 不同的打印方式？

> ID：14033637
> 
> 赞同：1
> 
> 时间：2012-12-25T20:02:39.720
> 
> 标签：python, python-3.x

我已经将 PyDev 安装到 Eclipse 中，当我在 .py 文件中执行打印方法时，`print "Hello World"`它不起作用。但后来我做到了`print ("Hello World")`，它奏效了。我在互联网上查看，一切都说要不带括号，但它不起作用，并给出错误：

> SyntaxError：无效的语法

这是因为我有旧版本或新版本的 python 吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T20:04:13.723

您似乎正在使用 Python 3。

在 Python 2`print`中是关键字，括号不是必需的。

在 Python 3`print`中被更改为一个函数。调用函数时需要括号。

**有关的**

*   [Python 3 的新特性](http://docs.python.org/3.0/whatsnew/3.0.html)

# html - 如何从下到上垂直堆叠div元素？

> ID：14033638
> 
> 赞同：1
> 
> 时间：2012-12-25T20:02:44.027
> 
> 标签：html, css

我正在尝试将 2 `div`s 堆叠在一起（即从下向上）。底部具有动态高度，我希望顶部 div 相应地堆叠在其上。

*我希望他们`bottom: 0`自上而下。不是自上而下*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:04:54.910

`<div>`s 是块级元素。它们默认垂直堆叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T22:33:15.667

如果您正在寻找纯 CSS 解决方案，使用 Flexbox CSS 属性是按照您想要的方式更改元素顺序的唯一方法（元素的源顺序与所需的显示顺序相反，元素具有动态大小）。

如果一个元素具有固定大小（例如图像，不推荐用于文本元素），则可以使用绝对定位：

[http://jsfiddle.net/wHDWP/](http://jsfiddle.net/wHDWP/)

```
.container {
    position: relative;
}

.top {
    border: 1px solid red;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height:  1.5em;
}

.bottom {
    border: 1px solid blue;
    padding-bottom: 1.5em;
} 
```

如果您不顾一切，可以使用 JS 重新排列元素。

# ruby-on-rails - 如何更改不可访问的属性的值？

> ID：14033639
> 
> 赞同：1
> 
> 时间：2012-12-25T20:02:44.683
> 
> 标签：ruby-on-rails

我有一个用户模型。

用户有一个名为 Balance 的字段（表示他的帐户中有多少钱）。

我显然不想让它attr_accessible。

但我希望能够改变它的价值（比如当我向他收费时）。

如何为此属性编写 getter/setter 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:10:22.010

`@object.attribute = new_value` `attr_accesible`是一种防止大规模分配的保护，不要弄乱它，`attr_accessor`它会创建 getter 和 setter

这是关于[attr_accessor 和 attr_accessible 之间差异的问题](https://stackoverflow.com/questions/3136420/difference-between-attr-accessor-and-attr-accessible)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T21:12:16.110

`attr_accessible`保护您免受大规模分配，如使用`update_attributes`和类似。

它根本不影响读取该属性的值，也不影响您直接调用访问器。例如你可以写

```
user.balance -= item.price
user.save! 
```

假设您之前已验证这确实是正确的操作。

# xamarin.ios - 如何从终端在 iOS 模拟器中运行 MonoTouch 应用程序？

> ID：14033641
> 
> 赞同：6
> 
> 时间：2012-12-25T20:02:54.150
> 
> 标签：xamarin.ios, ios-simulator, xamarin

显然，您可以通过运行[从终端在模拟器中启动 iOS 应用程序](https://stackoverflow.com/a/4894178/458193)

```
/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication path_to_your_app/YourFavouriteApp.app/YourFavouriteApp 
```

这不适用于 MonoTouch 应用程序——我得到一个黑色的模拟器屏幕。
如何从终端在模拟器中启动已编译的 MonoTouch 应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T20:20:20.303

不知道为什么它不起作用。也许将要启动的模拟器可能不是您期望的版本。您可能想检查内部`Console.app`，看看出了什么问题。

无论如何，您可以`mtouch`用来启动您的应用程序，例如

```
/Developer/MonoTouch/usr/bin/mtouch --launchsim=/path/to/your/application.app 
```

您还可以指定要使用的 iOS 版本以及要启动的设备（iPhone 或 iPad）。
默认情况下，它在 iPhone 模拟器上运行。添加`--device=2`标志会将其切换到 iPad。

请参阅`mtouch` [手册页](http://iosapi.xamarin.com/?link=man%3amtouch%281%29)或`mtouch --help`了解详细信息。

# c++ - 在 C++ 中将字符串转换为 char* 时输出格式错误

> ID：14033644
> 
> 赞同：1
> 
> 时间：2012-12-25T20:03:31.250
> 
> 标签：c++, visual-studio-2012, type-conversion

我有一个函数可以将字符串分成不同的部分，然后解析它们，但是当将字符串转换为 char* 时，我得到一个格式错误的输出。

```
int parseJob(char * buffer)
{ // Parse raw data, should return individual jobs
    const char* p;
    int rows = 0;
    for (p = strtok( buffer, "~" );  p;  p = strtok( NULL, "~" )) { 
        string jobR(p);
        char* job = &jobR[0];
        parseJobParameters(job); // At this point, the data is still in good condition
    }
    return (1);
}

int parseJobParameters(char * buffer)
{ // Parse raw data, should return individual job parameters
    const char* p;
    int rows = 0;
    for (p = strtok( buffer, "|" );  p;  p = strtok( NULL, "|" )) { cout<<p; } // At this point, the data is malformed.
    return (1);
} 
```

我不知道第一个函数调用第二个函数之间会发生什么，但它会使数据格式错误。

从给出的代码示例中可以看出，使用了将字符串转换为 char* 的相同方法，并且效果很好。

我正在使用 Visual Studio 2012/C++，任何指导和代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:37:53.223

您不能`strtok()`像您正在做的那样同时解析多个字符串。`parseJobParameters()`的第一次循环迭代中的第一次调用`parseJob()`将改变`strtok()`指向的内部缓冲区，因此第二次循环迭代`parseJob()`将不再处理原始数据。您需要重写代码以不再使用嵌套调用`strtok()`，例如：

```
#include <vector>
#include <string>

void split(std::string s, const char *delims, std::vector &vec)
{
    // alternatively, use s.find_first_of() and s.substr() instead...
    for (const char* p = strtok(s.c_str(), delims); p != NULL; p = strtok(NULL, delims))
    {
         vec.push_back(p);
    }
}

int parseJob(char * buffer)
{
    std::vector<std::string> jobs;
    split(buffer, "~", jobs);
    for (std::vector<std::string>::iterator i = jobs.begin(); i != jobs.end(); ++i)
    {
        parseJobParameters(i->c_str());
    }
    return (1);
}

int parseJobParameters(char * buffer)
{
    std::vector<std::string> params;
    split(buffer, "|", params);
    for (std::vector<std::string>::iterator i = params.begin(); i != params.end(); ++i)
    {
        std::cout << *i;
    }
    return (1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T21:15:32.720

`std::string`您的代码不起作用的“物理”原因与C++无关。它也不适用于纯 C。`strtok`是一个将其中间解析状态存储在某个全局变量中的函数。这立即意味着您不能`strtok`一次解析多个字符串。在完成第一个解析会话之前启动第二个解析会话将覆盖第一个解析会话存储的内部数据，从而将其破坏到无法修复的地步。换句话说，`strtok`解析会话*不能重叠*。在您的代码中，它们确实重叠。

* * *

此外，在 C++03 中，直接使用`std::string`with的想法`strtok`从一开始就注定失败。不保证存储的内部序列`std::string`是空终止的。这意味着通常`&jobR[0]`不是 C 字符串。它不能与`strtok`. 要将 a 转换`std::string`为 C 字符串，您必须使用`c_str()`. 但是返回的 C 字符串`c_str()`是不可修改的。

在 C++11 中，空终止符应该通过`[]`运算符可见，但似乎仍然不需要将终止符对象与实际字符串连续存储，因此`&jobR[0]`即使在 C++ 中仍然不是 C 字符串11\. `c_str()`由or返回的 C 字符串`data()`是不可修改的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T20:10:47.390

虽然这将为您提供字符串中第一个字符的地址`char* job = &jobR[0];`，但它不会为您提供有效的 C 样式字符串。你*应该*使用`char* job = jobR.c_str();`

`buffer`我相当确定这会解决您的问题，但是您阅读传递给的方式当然也可能有问题`parseJob`。

编辑：当然，您还从使用 strtok 的函数调用 strtok。strtok 内部看起来有点像这样：

```
char *strtok(char *str, char *separators)
{
     static char *last;
     char *found = NULL; 

     if (!str) str = last;
     ... do searching for needle, set found to beginning of non-separators ... 
     if (found) 
     {
          *str = 0; // mark end of string. 
     }

     last = str;
     return found;
} 
```

由于“last”在您调用时被覆盖`parseParameters`，因此您无法`strtok(NULL, ... )`在返回时使用`parseJobs`

# regex - 正则表达式：如何将具有“'”的模式精确匹配三遍？

> ID：14033645
> 
> 赞同：0
> 
> 时间：2012-12-25T20:03:46.000
> 
> 标签：regex

我想匹配以下模式：`'''abc'''`. 但是文件中有一些噪音`''''''abc'''`。我只想要前面有精确三个的单词`" ' "`。我试过了`" [^']'''[^'] "`。但它不起作用。正则表达式`" '{3} "`将匹配三个以上`" ' "`。

那么有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:05:13.787

```
(?<!')'{3}(?!') 
```

如果支持，请使用负前瞻（和后瞻）。

编辑：假设您想匹配`'''`from `'''abc'''`，因为这就是您的问题所暗示的。如有不同，请注明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T20:10:37.270

您基本上已经自己给出了解决方案。如果您想匹配正好被 3 包围的字符串，`'`请执行此操作（我使用 Python 作为示例）：

```
In [33]: re.findall("'{3}\w+'{3}", "'''abc'''")
Out[33]: ["'''abc'''"] 
```

如果你想避免那些前面超过 3 的字符串`'`，那么你最好采取否定的后向断言`(?<!...)`：

```
In [59]: re.findall("(?<!')'{3}\w+'{3}", "'''abc'''")
Out[59]: ["'''abc'''"]

In [60]: re.findall("(?<!')'{3}\w+'{3}", "''''''''''abc'''")
Out[60]: []

In [62]: re.findall("(?<!')'{3}\w+'{3}", "'''abc''''''''''")
Out[62]: ["'''abc'''"] 
```

如果您还想避免超过 3 的字符串`'`，请添加否定的前瞻断言`(?!...)`：

```
In [63]: re.findall("(?<!')'{3}\w+'{3}(?!')", "'''abc'''")
Out[63]: ["'''abc'''"]

In [64]: re.findall("(?<!')'{3}\w+'{3}(?!')", "''''''''''abc'''")
Out[64]: []

In [65]: re.findall("(?<!')'{3}\w+'{3}(?!')", "'''abc''''''''''")
Out[65]: [] 
```

**注意：**是否支持前瞻和后瞻取决于您的编程语言。如果是这样，这是实现您想要的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T20:09:34.990

尝试类似的东西`^[^']*'{3}[^']+'{3}[^']*$`。注意`[^']+`中间的，因为你还需要告诉它两边的三个'''之间有什么东西。

# mongodb - 流星在更新时从子数组中删除其余部分

> ID：14033646
> 
> 赞同：1
> 
> 时间：2012-12-25T20:04:00.227
> 
> 标签：mongodb, meteor

条目是这样创建的：

```
Nodes.insert({name : node1, conf :{flag1: true, flag2: true } }); 
```

我不想从我的子数组中更新**flag1**。这是我的代码：

```
Nodes.update(Session.get("node"), {$set:   {conf :{ flag1 : false }}}); 
```

当我调用代码片段时 - flag2 会从我的数组中删除。我知道我可能会将该部分添加到更新概念中 - 但子数组 conf 将有很多条目，这可能会有点乏味...... 标志的顺序也可以改变。有没有这种神奇的药水。mongodb文档对此不是很清楚。conf.$点表示法会抛出错误。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:18:24.280

你应该使用`$set conf.flag1`. 像这样：

```
Nodes.update(Session.get("node"), {$set:   {"conf.flag1" : false}}); 
```

$ 位置运算符仅用于数组。标准点符号用于子文档。

# android - 为 Gesture.toBitmap() 设置笔触宽度

> ID：14033653
> 
> 赞同：3
> 
> 时间：2012-12-25T20:04:28.617
> 
> 标签：android, gesture

可以将手势保存为位图[`toBitmap()`](http://developer.android.com/reference/android/gesture/Gesture.html#toBitmap%28int,%20int,%20int,%20int%29)

但似乎笔画宽度总是1px。

如何将手势保存为笔画宽度较大的位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:34:34.197

看着源代码，似乎不可能实现。

为了回答这个问题，我[重写了。`toBitmap()`](https://gist.github.com/4375270)

# c# - 高级伪随机位生成

> ID：14033660
> 
> 赞同：1
> 
> 时间：2012-12-25T20:05:54.253
> 
> 标签：c#, random

好吧，我想为数学问题生成伪随机位。位大小由用户提供。但与正常问题不同的是，这里有一个小转折。如果位以 0 开头并且字面上与用户输入的大小匹配，则数学问题也会给出有效的结果。示例：对于用户输入 4，以下所有内容均为有效输出：

```
-> 0000
-> 0001
-> 1000
-> 0100 
```

等等我现在正在使用这个函数来生成数字：

```
int randomChoice = choice.Next(1 << (input - 1), (1 << input) - 1);
bitSize = randomChoice; 
```

是否有任何其他随机位生成方式可以以 0 开头，只要它遵循 C# 中的文字位长度而不进行复杂的数组操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:18:44.813

在您之前的问题中，您接受了一个改进原始代码的答案。问题是，你的代码一开始就错了。你只需要一个*随机*位。您需要这样做：

```
 int maxBit = AskUserForMaxBit();
   int randomBit = choice.Next(1, maxBit+1);
   int randomValue = 1 << (randomBit - 1);
   return Convert.ToString(randomValue, 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T20:31:00.400

以下行：

```
int randomChoice = choice.Next(1 << (input - 1), (1 << input) - 1) 
```

for`input = 4`等价于：

```
int randomChoice = choice.Next(8, 15); 
```

[根据 MSDN 文档](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)，它将选择以下值之一：8、9、10、11、12、13、14 - 随机。请注意，*不会*选择值 15，因为文档明确指出下限 (8) 是包含的，而上限 (15) 是*不包含*的。

这些二进制值是：

```
8 : 1000
9 : 1001
10: 1010
11: 1011
12: 1100
13: 1101
14: 1110 
```

我相信@Jon Skeet 所说的是您正在生成始终设置 MSB（最左侧位）的随机数。因此错过了所有适合以 0 开头的 4 位的值（未设置 MSB）。

我还要指出，您可能应该在此处包含值 15，因为它也适合 4 位。因此，通过两次修改，代码行应为：

```
int randomChoice = choice.Next(0, (1 << input)); 
```

这将生成从 0 到 15 的所有值，包括：

```
0 : 0000
1 : 0001
2 : 0010
3 : 0011
    ...
13: 1101
14: 1110
15: 1111 
```

那是你要找的吗？

# objective-c - 从另一个类调用函数

> ID：14033662
> 
> 赞同：0
> 
> 时间：2012-12-25T20:06:30.133
> 
> 标签：objective-c, ios, cocoa-touch, function

我正在 Xcode 中开发一个应用程序，我目前正在尝试访问一个单独的类并在那里调用一个函数。

* * *

**发送消息的代码**

```
-(IBAction) reloadButton:(id)sender
{
    RootViewController *theInstance = [[RootViewController alloc] initWithNibName:@"MainWindow" bundle:nil];
    [theInstance reloadTableView];
} 
```

**调用方法**

*.h 文件*

```
-(void) reloadTableView; 
```

*.m 文件*

```
-(void)reloadTableView
{
    [self.tableView reloadData];
} 
```

每当我构建时，都没有错误。但是当我运行应用程序并按下“reloadButton”时，它会崩溃并在以下行显示“程序收到信号：SIGABRT”：

```
[self.tableView reloadData]; 
```

可能是什么问题，我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:08:26.110

我猜 RootViewController 没有正确初始化它的 tableView。在调试器中，尝试访问 self.tableView 中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:16:54.993

您的班级实际上是否用作数据源？否则，请致电：

```
self.tableView.dataSource = self; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T21:06:20.067

RootViewController 对象看起来并没有被使用。

您正在分配 - 在方法中初始化它，但没有对它做任何事情 - 没有在任何地方添加它的视图，也没有设置数据源或委托。

在方法结束时，它超出了范围。

# git - git：我可以添加一个目录，但在提交时我得到“没有提交”

> ID：14033665
> 
> 赞同：7
> 
> 时间：2012-12-25T20:07:02.663
> 
> 标签：git, github, commit, github-for-mac

我正在尝试将两个目录添加到 git repo。我可以添加它们，但是当尝试“提交”时，我得到“没有提交”。我正在遵循 add->commit->push 序列，但在这种情况下它似乎不起作用。我已经从 repo 中提取了所有内容。

有什么提示吗？谢谢！![在此处输入图像描述](../Images/80f4fbb6007055e9c1edec7cee407e75.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T20:12:22.237

一旦更改/添加文件，您就可以提交。给git添加目录不能自己提交；您需要在目录中添加/编辑文件。

尝试在 css 中添加一些东西并在之后提交。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T20:40:08.893

Git 只跟踪*文件*——当你运行时`git add <directory>`，你实际上在做的是告诉 Git 添加该目录中任何文件的内容。由于该目录当前是空的，因此它没有添加任何内容，因此没有什么可提交的。

例如，以下将起作用：

```
$ touch css/main.css
$ git add css
$ git commit -m "Add empty main CSS file" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T20:48:34.970

正如大家所说，git 只跟踪文件，而不是目录。所以你不能在其中添加空目录。`.gitignore`您可以通过在目录中添加空`css`并提交它来制作技巧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T20:10:29.370

我认为只有两种可能。

1.  您在错误的目录中。
2.  您有一个 gitignore，其中包含要添加的文件夹/文件。

您可以在修改 css 目录中的文件并查看时检查它

`#git status`

无论文件被修改。

如果没有更改，请检查您的`.gitignore`文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-02T15:01:02.500

出于某种奇怪的原因，我有一个不会提交的目录 baseservices.demo/。我将名称更改为 baseservices/ 并没有问题。可能是 (.) 的问题，或者可能是我添加文件的方式？我不太确定，但更改（mv）名称对我有用。

# plot - 如何使用 gnuplot 的绘图和存储在同一文件中的数字来操作数据？

> ID：14033668
> 
> 赞同：1
> 
> 时间：2012-12-25T20:07:23.597
> 
> 标签：plot, gnuplot

我想绘制一个已经创建的直方图数据，存储在 hist.dat 中：

```
#hist1
100
1
9
10
30
30
10
9
1 
```

其中（第零行是注释），第一行包含直方图 y 值的总和，x 值为 1、2、...（行号）。所以没有规范，我可以使用

```
plot "hist.dat" every::1 using 0:1 
```

我可以使用规范

```
plot "hist.dat" every::1 using 0:($1/100) 
```

问题是如何引用总和值（100）？因为我不想仅仅为了创建正确的gnuplot代码而预读文件，所以我不想写下隐含的值。我已经试过了

```
plot "hist.dat" using 0:($1/(columnhead+0)) 
```

但是 columnhead 不能在 using 中调用（它是一个字符串，这就是我尝试添加 0 以使其成为 int 的原因）。

我不想修改文件或基于这个文件创建一个新文件，我只想使用适当的 gnuplot 命令。我想避免忽略总和值并使用 gnuplot 重新计算它。

* * *

解决方案：根据给出正确答案的andyras，稍微改进的方法是

```
first(x) = ($0 == 0) ? (first = column(x), 1/0) : first

plot "hist.dat" using 0:($1/first(1)) 
```

因此，如果您有多个列，就像 hist.dat 一样，您可以使用它来绘制直方图

```
#hist1  hist2
10000   8000
1000    50
9000    70
1000    1100
3000    4500
3000    1200
1000    700
9000    380
1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T22:30:51.433

**如何参考总和值（100）？（无需预读文件）**

是的，使用 gnuplot 函数：

```
first(x) = ($0 == 0) ? (first = $1, 1/0) : first

plot "hist.dat" using 0:($1/first($1)) 
```

如果它正在读取第一行，则该函数将该行中的值分配给变量`first`并返回 1/0（gnuplot 将其视为缺失数据并且不会扩展 x 范围以包含该点）。否则，函数返回 的值`first`。

这样你甚至不必使用`every ::1`.

如果您不介意重新读取文件，您可以使用该`stats`命令找出文件中的最大值。

# java - 在 JAVA 中将链表转换为循环链表

> ID：14033669
> 
> 赞同：2
> 
> 时间：2012-12-25T20:07:53.787
> 
> 标签：java, data-structures

有没有办法将 LinkedList 类的对象转换为循环链表。

或者是否有任何预定义的类，如 java.util 中的 CircularLinkedList 类似这样的东西（类似[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html)的东西）

任何帮助将非常感激....

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:12:41.110

不，LinkedList 的封装方式使其无法将其尾部连接到头部。我不认为任何默认集合都支持这一点，因为那样它就不会再履行[Iterable](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)的合同了，这表明迭代器必须在某个时候到达终点。

当您需要这样的数据结构时，您必须自己实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T07:36:20.997

看看 Guava 的 Iterables.cycle 方法。

```
public static <T> Iterable<T> cycle(Iterable<T> iterable) 
```

返回一个迭代器，它的迭代器在迭代器的元素上无限循环。

如果支持，该迭代器支持 remove() `iterable.iterator()`。调用 remove() 后，后续循环将忽略已删除的元素，该元素不再可迭代。迭代器的`hasNext()`方法返回 true，直到 iterable 为空。

参考文档： http: [//guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html#cycle%28java.lang.Iterable%29](http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Iterables.html#cycle%28java.lang.Iterable%29)。

# c++ - 如何在不移动C++中的光标坐标的情况下将文本输出到控制台到特定坐标

> ID：14033670
> 
> 赞同：0
> 
> 时间：2012-12-25T20:08:07.687
> 
> 标签：c++, text, position, output

我有一个 C++ 应用程序，在 DEV C++ 中编译，它包括`pthread`多线程库。我有 2 个线程。默认`int main()`的，我创建的一个线程，它将每隔几秒打印出一周中的几天，一次一个。但是当我执行这个时，它可以工作，但程序中只有一个光标。这就是问题所在：我需要将一周中的这些天写入屏幕坐标`0, 50`的方式，例如，只定位文本而不是光标。这是第一个带有光标的线程，不会干扰我的第二个线程输出，它们将同时执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:25:30.403

假设您正在使用 ncurses 或类似的东西？所以你的控制台终端是一个共享资源，你必须用互斥锁来保护它，并注意每个线程中的光标定位。您还可以将一个线程声明为老板，其光标位置由另一个线程恢复。然后，另一个线程将在获取互斥锁后，执行 getcurx、getcury 之类的操作，进行自己的定位和输出，然后恢复使用 getcurx/y 检索到的光标位置。
请注意，在每种情况下，所有线程都需要在访问终端之前获取互斥锁。
您还可以检查是否可以使用 ncurses 中的内置线程支持，请注意`use_screen`，`use_window`

# c++ - 分段错误原因未知Opencv

> ID：14033673
> 
> 赞同：0
> 
> 时间：2012-12-25T20:08:47.063
> 
> 标签：c++, linux, opencv, segmentation-fault

我在 linux 终端（linux 中的 c++）中编译了以下代码，并且正在使用 OpenCv 2.4.3。

但是，在运行时出现分段错误，我真的不知道为什么。我已经放置了不同的 cout 语句以了解程序是否处理到特定阶段但徒劳无功。请你帮助我好吗？请解释一下这个分段错误到底是什么。我被困在这里很长时间了。

```
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
#include <stdlib.h>

using namespace cv;
using namespace std;

int main()
{           
    cout<<"check"<<flush;
    Mat src,src_gray,dst;
    int kernel_size = 3;
    int scale = 1;
    int delta = 0;
    int ddepth = CV_16S;
    char* window_name = "sharpness estimate";

    int freq,rows,cols =0;
    double *estimate,*min = 0;
    Point *minLoc,*maxLoc = 0;
    src = imread("/home/siddarth/examplescv/erez images/image53.jpg");
    if( !src.data )
    {
        return -1;
    }

    namedWindow(window_name,CV_WINDOW_AUTOSIZE);
    Mat abs_dst;
    cvtColor(src,src_gray,CV_RGB2GRAY);

    Laplacian(src_gray,dst,ddepth,kernel_size,scale,delta,BORDER_DEFAULT);
    convertScaleAbs(dst, abs_dst);

    minMaxLoc(dst,min,estimate,minLoc,maxLoc,noArray());
    Size s = dst.size();
    rows = s.height;
    cols = s.width;
    cout<<rows<<endl<<cols<<endl;

    for(int i=0;i<=rows;i++)
    {
        for(int j=0;j<=cols;j++)
        {
            if(dst.at<double>(i,j) >= *estimate-100
               && dst.at<double>(i,j) <= *estimate+100)
            {
                cout<<freq++;
            }
        }
    }

    cout<<"estimate :"<<*estimate<<endl;
    cout<<"frequency :"<<freq<<endl;
    imshow(window_name,abs_dst);
    waitKey(1000);
    return 0;   
 } 
```

代码不会在主函数声明之后越过第一个“检查”打印语句。这就是令人困惑的问题。但是一旦我刷新了第一个打印语句，它就被执行了。我仍然面临问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T20:10:42.490

确保插入`std::endl`，`cout`以便刷新缓冲区。这可能就是您没有看到任何输出的原因。

一个直接的问题是您的`for`循环使用 来检查条件`<=`，这意味着您可能会超过最后一个。但是由于您使用的是`at`，因此应该抛出异常（假设此`Mat`类型的行为类似于标准容器）。

此外，您正在创建大量指针以作为某些函数参数传递（例如，`double* estimate`）。这实际上并没有给你一个`double`对象，只是一个指针。除非您将它们传递给的函数`double`为您分配 a（我希望不是），否则您做错了。你应该这样做：

```
double estimate;
minMaxLoc(/* ... */, &estimate, /* ... */); 
```

您需要使用通过输出参数获得的所有值来执行此操作。

另一件需要注意的事情：只对 进行`int i, j = 0;`初始化，而不是对. 你需要做。`j``0``i``int i = 0, j = 0;`

* * *

好的，我将解释为什么修复初始化程序有效。我不得不查看[minMaxLoc 的定义](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=minmaxloc#minmaxloc)以了解会发生什么。基本上，该功能类似于以下内容：

```
void setToFive(int* x)
{
  if (x) {
    *x = 5;
  }
} 
```

该函数将获取一个指向 a 的指针`int`，然后将其设置`int`为 value `5`。但是，如果传递的指针是空指针，则不会设置该值（否则将出现未定义的行为，因为您正在取消对空指针的引用）。基本上，传递一个空指针表示“我不在乎这个值，所以不要给我”。

现在，当您初始化指针时，您正在执行以下操作：

```
double *estimate, *min = 0; 
```

这仅设置`min`为空指针。由于`estimate`未初始化，因此您不能依赖其值为 null。您需要为每个声明器提供一个初始化程序：

```
double *estimate = 0, *min = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T20:28:46.453

感谢@sftrabbit。问题是初始化。代替

```
 int freq,rows,cols=0; 
```

变化是

```
 int freq=0,rows=0,cols=0; 
```

这消除了分段错误。非常感谢你的帮助 ：）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-12T11:03:23.573

由于您处于 Linux 环境中，因此您可以使用 valgrind 准确找出发生分段错误的位置。只需在程序名称或执行程序的方式之前键入 valgrind。例如，如果您使用以下命令执行程序：

你好-打印

发出以下命令：

valgrind 你好 -print

我看到你已经解决了这个问题，但这可能对未来有帮助！

# php - 需要有关 PHP 循环中使用的特定 MySQL 查询的帮助

> ID：14033682
> 
> 赞同：1
> 
> 时间：2012-12-25T20:10:31.060
> 
> 标签：php, mysql, wordpress, phpmyadmin, while-loop

我使用的主要代码是

```
while ($row = mysql_fetch_assoc($result1)) {
    echo $row["user_id"];
    $new    = "[grade uid=\"{$row["user_id"]}\" value=\"{$groupgrade}\" format=\"{$groupformat}\" prv_comment=\"{$groupprivatecomment}\" pub_comment=\"{$grouppubliccomment}\"] ";
    $sqq    = "UPDATE wp_postmeta SET meta_value='$new' WHERE meta_key='grade' AND post_id= $post_id ";
    $result = mysql_query($sqq);
    echo "grade has been updated";
} 
```

这会影响表 wp_postmeta 中的行，如链接上的图片所示，![http://i.stack.imgur.com/gkUiz.jpg](../Images/363605ae76e738c9d48afbf93dd89475.png)此处未定义的所有变量都在此 para 之前定义。

我真正想要的用户ID在不同的行中必须不同。在这个循环中唯一发生的事情是数组中的每个 uid 一个接一个地写入所有行，只有最后一个 uid 最终持续存在，在图中为 3 但我只希望每个 uid 应该单独出现，即不同用于差异的 uid。元标识。请帮忙

关于代码 $result1 从定义的 mysql 函数中获取用户 ID 数组，其余变量是用户定义的。我对php和编程有点陌生，所以请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:53:59.687

`question`不是很清楚，它是相关的`WordPress`，你没有`WordPress`在你的问题中添加标签。无论如何，`WordPress`它有自己的功能来处理后期元数据。在您的循环中，您尝试手动更新帖子元，但可以使用 WordPress 的[update_post_meta](http://codex.wordpress.org/Function_Reference/update_post_meta)函数来做到这一点。语法如下

```
<?php update_post_meta($post_id, $meta_key, $meta_value, $prev_value); ?> 
```

在这种情况下，您可以使用以下代码

```
<?php update_post_meta($post_id, 'grade', $new); ?> 
```

这`$post_id`将是您要更新的帖子 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T21:14:36.697

你的代码是为了解决这个问题`$row["user_id"]`

*   如果发布的用户是同一用户，则结果为真 3
*   如果这个变量来自其他查询，那么你必须查看这个查询你是如何得到这个`user_id`的，或者，在你的问题中发布它，看看为什么它只有 3。

*   最好创建一个`user_id`专门为该用户插入数据的列。

*   `$row["user_id"]`是对 sql 注入的警告变量，因此必须通过`mysql_real_escape_string()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T18:53:03.107

好的，既然我了解了您的问题（您说“所有行”正在更新，这让我感到困惑，您只是指所有带有 this 的行`post_id`），我认为这就是答案：

```
$sql2 = "SELECT meta_id FROM wp_postmeta where meta_key='grade' AND post_id = $post_id";
$result2 = mysql_query($sql2);

while (($row = mysql_fetch_assoc($result1)) && ($row2 = mysql_fetch_assoc($result2))) {
    echo $row2["meta_id"], ' => ', $row["user_id"];
    $new    = "[grade uid=\"{$row["user_id"]}\" value=\"{$groupgrade}\" format=\"{$groupformat}\" prv_comment=\"{$groupprivatecomment}\" pub_comment=\"{$grouppubliccomment}\"] ";
    $sqq    = "UPDATE wp_postmeta SET meta_value='$new' WHERE meta_key='grade' AND post_id= $post_id AND meta_id = {$row2["meta_id"]}";
    $result = mysql_query($sqq);
    echo " grade has been updated";
} 
```

新`$sql2`查询获取 each ，并使用不同的 from`meta_id`更新每一行。`user_id``$result11`

# iphone - 向网站发送数据并获取搜索结果 iOS

> ID：14033694
> 
> 赞同：0
> 
> 时间：2012-12-25T20:13:01.540
> 
> 标签：iphone, ios, ipad, http, post

我对 iOS 很陌生，我刚刚开始阅读有关 HTTP 请求以及 POST 和 GET 方法的内容。假设，例如，我想让用户输入一个字符串，然后将该数据发送到一个网站（例如 www.rhymezone.com），使用该字符串进行搜索，并获取该搜索的结果在我的应用程序中。这是通过 HTTP post 方法完成的吗？要不然是啥？任何帮助/示例将不胜感激。另外，如果有这些东西的教程，那也将不胜感激。

例如，这是我尝试过的：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.rhymezone.com/r/rhyme.cgi?Word=test&typeofrhyme=perfect&org1=syl&org2=l&org3=y"]];

NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSString *dataAsString=[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"data: %@",dataAsString);
 } 
```

这会输出网站的整个来源（搜索单词 test 的押韵）。虽然我当然可以编写一个方法来遍历网站的源代码并提取它返回的单词，但我觉得这是不正确的。我获取不同单词押韵的方法只是在这里更改 URL，因此在显示“测试”的地方，我将其更改为用户输入的任何内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:22:57.323

如果我正确理解您要做什么，我担心您的唯一选择是发送 HTTP 请求（根据网站的预期获取或 POST，就像您正在做的那样），然后解析结果以过滤所有不相关的信息。

如果您使用的是提供 REST API 或 JSON API 的网站，则可以使用另一种方法，以便您发送查询并仅返回所需的信息（以特定格式）。

因此，这在很大程度上取决于您使用的网站，但对于一般情况，您唯一的选择是解析。

（或者，您可以通过 显示页面的全部内容`UIWebView`。这不需要显式设置连接，但我不确定您是否正在尝试这样做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T20:29:28.483

您正在寻找一种从您的 iOS 应用程序与您的网站进行通信的方法。常见的方法是获取用户输入的字符串，对其进行编码并将其作为 http 请求发送到某种脚本（webservice）。这个脚本会做你想做的所有事情（用这个字符串搜索）。然后将结果作为 http 响应重新发送到客户端（您的 iOS 应用程序），该响应将在您的 iOS 应用程序中进行解析（例如使用 JSON 解析器）。

有很好的资源，例如，您可以阅读以下内容：[http ://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T22:37:37.873

查看 AFNetworking 和 RestKit。

如果您调用使用 JSON/XML 的公共 API，然后使用内置解析器或解析器库来提取您想要的数据，这是最简单的。

简单地下载 URL 的内容就是一个 HTTP GET 请求，例如访问一个网站。

此链接更多地讨论了 GET 和 POST 之间的区别。 [什么时候使用 POST，什么时候使用 GET？](https://stackoverflow.com/questions/46585/when-do-you-use-post-and-when-do-you-use-get)

# iphone - 自定义字体 - 无法选择

> ID：14033696
> 
> 赞同：1
> 
> 时间：2012-12-25T20:13:13.193
> 
> 标签：iphone, xcode

我已经为我想在我的应用程序中使用的自定义字体下载了一个 ttf 文件。

我已将它添加到我的支持文件中，修改了我的 .plst 文件，以便有一个名为“应用程序提供的字体”的新条目，然后将值设置为我的字体文件的文件名（复制并粘贴，因此没有拼写错误）。

我还检查了它是否包含在我的构建阶段，复制捆绑资源中。

当我现在选择一个标签然后去更改字体时，我的自定义字体不存在。

我错过了一步吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T09:13:18.343

首先你必须安装那些特定的字体，现在这些字体就像带有数组的家庭字体，所以你可以像这样编码

NSArray *arrFont = [UIFont fontNamesForFamilyName:@"你的字体名称"];

```
[lbl1 setFont:[UIFont fontWithName:[arrFont objectAtIndex:0] size:16]];
[lbl2 setFont:[UIFont fontWithName:[arrFont objectAtIndex:1] size:16]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T06:29:34.163

试试这个。可能会有帮助。

1.  将字体文件添加到资源文件
2.  编辑您的 Info.plist：使用应用程序提供的关键字体添加一个新条目。
3.  如果有多个文件，对于每个文件，将文件名添加到此数组

在您的应用程序中，您可以使用`[UIFont fontWithName:@"YourFontName" size:14.f].`

# android - 画布中的Android移动位图

> ID：14033699
> 
> 赞同：1
> 
> 时间：2012-12-25T20:13:24.580
> 
> 标签：android, android-canvas

我有一个活动，`imageView`其中有一个画布，在它下面有一个按钮。当我单击按钮时，一个新的位图会被绘制到带有文本的画布中。如何使绘制的位图可以移动，就像我将它拖到画布中我想要的任何位置一样？

```
 Canvas c = new Canvas(WorkBitmap);
                    c.drawText("Bitmap", 360, 520, null);
                    c.drawBitmap(ball, x, y, null); 
```

我看了一些教程`SurfaceView` ，我做了，你工作得很好。但我希望画布中的位图移动，在教程中它的整个屏幕都是一个surfaceView画布..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:50:30.650

您需要使用`SurfaceView`XML 中可用的小部件

但是，如果您希望图像可以在所有屏幕上移动，您可以使用`SurfaceView`

[查看这个 Youtube 视频，内容非常丰富（观看所有 SurfaceView 播放列表以受益）](http://www.youtube.com/watch?v=Z2YogvILjvo)

# android - 作为 Android SDK 中的参数，“this”是什么意思？

> ID：14033708
> 
> 赞同：0
> 
> 时间：2012-12-25T20:14:34.930
> 
> 标签：android, eclipse, parameter-passing, this

> **可能重复：**
> [Java 中的“this”是什么意思？](https://stackoverflow.com/questions/3728062/what-is-the-meaning-of-this-in-java)

我对学习 Android 编程还是很陌生，我注意到“this”经常用在语言中方法调用的参数中。我正在通过 YouTube 关注 The New Boston 的教程，但他从未真正足够详细地解释“this”语句的含义。有人可以向我解释一下吗？或许可以把它弄糊涂一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T20:18:32.840

`this`指您当前正在编码的类的实例。

您不能在静态上下文中使用它，因为在这种情况下您不在任何对象上下文中。因此`this`不存在。

```
public class MyClass {

    public void myMethod(){
        this.otherMethod(); // Here you don't need to use 'this' but it shows the concept
    }

    private void otherMethod(){

    }

    public static void myStaticMethod(){
       // here you cant use 'this' as static methods don't have an instance of a class to refer to
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T20:30:09.437

在android`class.this`中用于传递上下文。

上下文的正式定义：它允许访问特定于应用程序的资源和类，以及对应用程序级操作（例如启动活动）的向上调用。这意味着如果您需要访问资源（包括 R 和用户界面），您将不得不使用上下文。

在 java 中，这意味着您所在的类的实例。例如，`MainActivity.this`指向 MainActivity 的当前实例。因此，通过使用`MainActivity.this.foo`您正在访问 MainActivity 类的 foo 字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T20:25:29.453

```
public class YourClass {

     private int YourInt;

     public setTheInt(int YourInt) {
         this.YourInt = YourInt;
     }
} 
```

“this”用于查看一个属性或函数是否属于我们正在处理的类，更清晰。

此外，您会看到 setTheInt 操作获取一个与您的属性名称相同的整数。在该函数的命名空间中，YourInt 不是此类的 YourInt，而是来自 setTheInt 调用的整数的反映。“this”在这里有助于区分外部和内部的“YourInt”。

# java - 数学 我做了这个程序，但需要知道更多

> ID：14033716
> 
> 赞同：0
> 
> 时间：2012-12-25T20:15:33.223
> 
> 标签：java

我做了这个问题，但我只发现如何为一个值做这个`x`？这是程序。

```
public class PointsOnACircleV1 {
    public static void main(String[ ] args)
    {
    double r = 1;
    double x = 0.1;
    double equation1= Math.pow(r,2);
    double equation2= Math.pow(x,2);
    double y = Math.sqrt(equation1-equation2);

    System.out.println(y);

        }
} 
```

我得到了正确的答案 .99 (......)

我需要我的来显示 x 的多个值。这是输出应该是这样的。如果可以的话请帮忙。
![图像](../Images/494b2ad1f5fe369c82bea22ce3194ce6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:16:53.257

使用`for`循环。

**相关文档**

*   [for 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:29:06.890

为了让它打印多个值，您首先需要填写“String [] args”，但您需要将它们设置为 double 以便能够将它们与其他值相乘。在您的情况下，这就是 X 值，所以让我们说一下您发布的代码

```
public class PointsOnACircleV1 {

 //initialize your array with your values
double [ ]  args = { 1.0, 0.9, 0.8,.... and so on until you reach 0.1, 0.0};
//you could fill it other more effective ways but just to show you!

public static void main(double[ ] args)
{
   double r = 1;
   // no need to fill this as you already done 
   // it double x = 0.1;

   for(Iterator<double> i = args.iterator(); args.hasNext(); ) 
   {
      //this is the number you want to multiply with
      double numbertomultiply = args.next();
      double equation1= Math.pow(r,2);
      double equation2= Math.pow(numbertomultiply,2);
      double y = Math.sqrt(equation1-equation2);

      System.out.println(y);
  }

} 
```

只是从我的头上写的还没有检查它，只是为了给你一个样本:)

编辑使用其他答案来初始化您的数组。

# cuda - 使用 cuda 纹理内存进行一维插值

> ID：14033717
> 
> 赞同：3
> 
> 时间：2012-12-25T20:15:56.993
> 
> 标签：cuda, textures, interpolation

我正在尝试使用纹理内存来解决插值问题，希望以比使用全局内存更快的方式。作为我第一次使用纹理内存，我将插值问题过度简化为线性插值问题。所以，我已经知道有比下面报道的更聪明、更快速的线性插值方法。这是文件 Kernels_Interpolation.cuh。为简单起见，省略了 __device__ 函数 linear_kernel_GPU，但它是正确的。

```
texture<cuFloatComplex,1> data_d_texture;

__global__ void linear_interpolation_kernel_function_GPU_texture(cuComplex* result_d, float* x_in_d, float* x_out_d, int M, int N)
{    
   int j = threadIdx.x + blockDim.x * blockIdx.x;

   cuComplex datum;

   if(j<N)
   {
       result_d[j] = make_cuComplex(0.,0.);
       for(int k=0; k<M; k++)
       {
           datum = tex1Dfetch(data_d_texture,k);
           if (fabs(x_out_d[j]-x_in_d[k])<1.) result_d[j] = cuCaddf(result_d[j],cuCmulf(make_cuComplex(linear_kernel_GPU(x_out_d[j]-x_in_d[k]),0.),datum));
       }  
   } 
} 
```

这是 Kernels_Interpolation.cu 函数

```
extern "C" void linear_interpolation_function_GPU_texture(cuComplex* result_d, cuComplex* data_d, float* x_in_d, float* x_out_d, int M, int N){

   cudaBindTexture(NULL, data_d_texture, data_d, M);

   dim3 dimBlock(BLOCK_SIZE,1); dim3 dimGrid(N/BLOCK_SIZE + (N%BLOCK_SIZE == 0 ? 0:1),1);
   linear_interpolation_kernel_function_GPU_texture<<<dimGrid,dimBlock>>>(result_d, x_in_d, x_out_d, M, N);

} 
```

最后，在主程序中，data_d数组的分配和初始化如下

```
cuComplex* data_d;      cudaMalloc((void**)&data_d,sizeof(cuComplex)*M);
cudaMemcpy(data_d,data,sizeof(cuComplex)*M,cudaMemcpyHostToDevice); 
```

result_d 数组的长度为 N。

奇怪的是，输出仅在前 16 个位置正确计算，尽管 N>16，其他为 0，例如

```
result.r[0] 0.563585 result.i[0] 0.001251 
result.r[1] 0.481203 result.i[1] 0.584259
result.r[2] 0.746924 result.i[2] 0.820994
result.r[3] 0.510477 result.i[3] 0.708008
result.r[4] 0.362980 result.i[4] 0.091818
result.r[5] 0.443626 result.i[5] 0.984452
result.r[6] 0.378992 result.i[6] 0.011919
result.r[7] 0.607517 result.i[7] 0.599023
result.r[8] 0.353575 result.i[8] 0.448551
result.r[9] 0.798026 result.i[9] 0.780909
result.r[10] 0.728561 result.i[10] 0.876729
result.r[11] 0.143276 result.i[11] 0.538575
result.r[12] 0.216170 result.i[12] 0.861384
result.r[13] 0.994566 result.i[13] 0.993541
result.r[14] 0.295192 result.i[14] 0.270596
result.r[15] 0.092388 result.i[15] 0.377816
result.r[16] 0.000000 result.i[16] 0.000000
result.r[17] 0.000000 result.i[17] 0.000000
result.r[18] 0.000000 result.i[18] 0.000000
result.r[19] 0.000000 result.i[19] 0.000000 
```

其余代码是正确的，即，如果我将 linear_interpolation_kernel_function_GPU_texture 和 linear_interpolation_function_GPU_texture 替换为使用全局内存的函数，一切都很好。

我已经验证我可以正确访问纹理内存，直到某个位置（取决于 M 和 N），例如 64，之后它返回 0。

如果我将 cuComplex 纹理替换为浮点纹理（强制数据为真实），我也会遇到同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T21:12:00.790

我可以在您的程序的以下行中看到一个逻辑错误。

```
cudaBindTexture(NULL, data_d_texture, data_d, M); 
```

的最后一个参数`cudaBindTexture`以字节为单位获取数据的大小，并且您正在指定元素的数量。

您应该尝试以下方法：

```
cudaBindTexture(NULL, data_d_texture, data_d, M * sizeof(cuComplex)); 
```

# java - 为什么我要在列表中插入多个空格

> ID：14033718
> 
> 赞同：2
> 
> 时间：2012-12-25T20:16:17.067
> 
> 标签：java, regex, list, parsing

我正在读取一个包含一个段落的 txt 文件，我正在解析这些单词并将它们插入到一个列表中；但是，我也在插入空格。不知何故，我的正则表达式似乎每次遇到逗号或点时都不起作用，因为它添加了一个空格......如果有人可以建议一个可以解决这个问题的正则表达式？谢谢

```
public class Exercise225 {

    public static void main(String... args) throws FileNotFoundException {
        String file = "words.txt";
        Scanner inFile = new Scanner(new File(file));
        String[] words = null;

        String line = "";
        List list = new ArrayList();

        while (inFile.hasNextLine()) {
            line = inFile.nextLine();
            words = line.split("[\n|\r|\t| |,|.|)|(|-|\"|!]");

            for (int i = 0; i < words.length; i++) {
                list.add(words[i].toLowerCase());                   
            }
        }
        Collections.sort(list);

        System.out.println(list.size());

        Iterator listItr = list.iterator();

        while (listItr.hasNext()) {
            System.out.println(listItr.next());
        }

        inFile.close();

    }    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:19:10.540

您可以使用量词在一个*或多个*分隔符上进行拆分，而不是仅在一个分隔符上进行拆分。`+`此外，您不需要在字符类中使用管道。

```
String regex = "[\n\r\t ,.)(\"!-]+";
words = line.split(regex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:19:14.417

用于`\\s+`正则表达式中用于拆分的空间。这将在拆分期间匹配一个或多个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T20:35:40.263

希望下面的更改能给您带来预期的结果

```
 String regEx = "[\n|\r|\t| |,|.|)|(|-|\"|!]";                
       line = inFile.nextLine().replaceAll(regEx+"^", "");          
       if(line.length()<=0)continue;                                
       words = line.split(regEx+"+"); 
```

# qt - QFileDialog - 如何指定主目录

> ID：14033720
> 
> 赞同：3
> 
> 时间：2012-12-25T20:16:41.373
> 
> 标签：qt, qfiledialog

我尝试以下方法打开一个文件对话框，该对话框应显示用户主目录：

```
QString fileName = QFileDialog::getOpenFileName(this,
                   tr("Select database"), QDir::homePath(), 
                   tr("Database Files (*.db *.sqlite)")); 
```

问题在于 QFileDialog 总是从应用程序启动的目录开始。任何想法我做错了什么？

顺便说一句：我在 Mac OS X 上使用 Qt 5。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T20:31:59.040

在 Mac OSX 中，`QDir::homePath()`返回 HOME 环境变量的内容。因此，如果此变量为空，则返回一个空字符串。

确保未选中“清除系统环境”选项（在 Qt Creator 中项目设置的构建环境下）。当您选中此框时，Qt 基本上会覆盖您程序的每个环境变量的值，因此它看起来是空的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T21:01:44.410

按照前面的建议使用`QDir::homePath()`或考虑使用 Qt5 的[QStandardPaths](http://qt-project.org/doc/qt-5.0/qtcore/qstandardpaths.html "QStandardPaths")类。

# java - 将字符串拆分为数组

> ID：14033729
> 
> 赞同：0
> 
> 时间：2012-12-25T20:18:27.030
> 
> 标签：java, arrays, string

我正在尝试将字符串的组件拆分为一个数组，以便可以更轻松地访问它们。

例如：`4+5=`应该变成`['4','+','5','=']`.

**编辑： -** 我需要将连续的数字连接在一起，并且可以忽略空格。再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:24:47.600

您可以使用

```
String str = "4+5=";
String[] tokens = str.split("(?!^)");
for (String s : tokens) {
    System.out.println(s);
} 
```

这将输出

```
4  
+  
5  
= 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T20:55:03.110

[您可以使用正则表达式环视](http://www.regular-expressions.info/lookaround.html)机制来解决它。

```
String str = "10 * 10 - 40 + 100/2 = 110";

//but first lets remove white spaces (it will makes regex easier)
String strWithoutSpaces=str.replaceAll("\\s+", "");

String[] tokens = strWithoutSpaces.split("(?<=[-+*/=])|(?=[-+*/=])");

for (String t:tokens)
    System.out.print(t+","); 
```

输出：

```
10,*,10,-,40,+,100,/,2,=,110, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T20:19:37.027

您可以使用 toCharArray() 方法

```
 String s ="4+5=";
    char [] stArr = s.toCharArray();
    for(char ss: stArr){
        System.out.println(ss);
    } 
```

输出

```
4
+
5
= 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T21:02:01.087

你可以这样做：

```
public static void main(String args[]) {
    String str = "45+5-26";
    String strArr[] = new String[str.length()];
    StringBuffer sb = new StringBuffer();
    int cnt = 0;
    for (int i = 0; i < str.length(); i++) {
        char ch = str.charAt(i);
        if (ch != '\0') {
            if (ch == ' ') {
                continue;
            }
            if (ch >= 48 && ch <= 57) {
                sb.append(ch);
                continue;
            } else {
                strArr[cnt++] = sb.toString();
                sb = new StringBuffer();
                // sb.append(ch);
            }
            strArr[cnt++] = ch + "";
            sb = new StringBuffer();
        }
    }
    strArr[cnt++] = sb.toString();
    sb = new StringBuffer();
    System.out.println("strArray: ");
    for (int i = 0; i < strArr.length; i++) {
        if (strArr[i] == null)
            break;
        System.out.println(strArr[i]);
    }
} 
```

如果您只有运算符作为数字之间的分隔符，这将更容易获得字符串标记。
如果你想用逗号分隔标记，你可以修改如下：

```
 for (int i = 0; i < strArr.length; i++) {
        if (strArr[i] == null)
            break;
          //    System.out.println(strArr[i]);
        if(i!=0)
            sbResult.append(",");
        sbResult.append(strArr[i]);

    }
    System.out.println("sbResult: "+sbResult.toString()); 
```

# ruby-on-rails - 按条件的状态机事件不起作用

> ID：14033732
> 
> 赞同：2
> 
> 时间：2012-12-25T20:18:56.693
> 
> 标签：ruby-on-rails, rspec, lambda, state-machine

仅当给定参数（代码）与对象属性（临时代码）匹配时，我才需要 state_machine 事件来提供转换。

当我测试这段代码时：

```
class User < ActiveRecord::Base

  def initialize
    @temporary_code = 'right'
  end

  state_machine :initial => :inactive do
    event :activate! do
      transition :inactive => :active, :if => lambda{ |code| code == @temporary_code }
    end

    state :inactive do
      def active?
        false
      end
    end

    state :active do
      def active?
        true
      end
    end
  end
end 
```

但无论给出什么代码，它都不会进行转换。下面的 Rspec 测试返回错误：

```
describe "activation" do
  let(:user) { User.create }
  before { user.activate!('right') }
  specify { user.should be_active }
end 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T21:32:44.677

当你引用一个像这样的实例变量`@temporary_code`时，你总是会得到一个结果，即使它还没有被提及/定义/初始化。所以我认为正在发生的是你引用`@temporary_code`，但它总是`nil`，因为分配给的 lambda`:if`不是在 User 实例的上下文中执行，而是在状态机所在的类的实例中执行编译'。

现在你的代码中有一些奇怪的东西：你已经定义了

```
transition :inactive => :active, :if => lambda {|code| code == @temporary_code} 
```

但传递给 lambda 的实际上是 current `user`。所以

```
transition :inactive => :active, :if => lambda {|user| ... } 
```

会更合适。

据我所知， state_machine gem 没有提供一种直接的方式来使转换依赖于参数。所以我认为你应该把它带到外面并将以下内容添加到 User 类中：

```
attr_accessor :temporary_code
attr_accessor :code 
```

然后将过渡更改为

```
transition :inactive => :active, 
           :if => lambda {|user| user.code == user.temporary_code} 
```

并让调用的代码`activate!`首先设置`temporary_code`.

# ios - 发送带有easyAPNs状态的ios推送通知时出错（8：无效令牌）

> ID：14033736
> 
> 赞同：1
> 
> 时间：2012-12-25T20:19:20.173
> 
> 标签：ios, push, apple-push-notifications

在我设置easyAPNs并在沙盒上成功测试后，当我尝试处理消息队列时，我在生产中遇到了这个问题：

> 注意：APNS 以 command(8) status(8) pid(3) 响应。1) APNS::__construct -> 文件：apns.php（第 34 行） 2) APNS::_fetchMessages -> 文件：class_APNS.php（第 232 行） 3) APNS::_iterateMessages -> 文件：class_APNS.php（第 404 行） ) 4) APNS::_pushMessage -> 文件：class_APNS.php（第 457 行） 5) APNS::_triggerError -> 文件：class_APNS.php（第 585 行）在 /home/push/class_APNS.php 第 693 行
> 
> 致命错误：APNS 响应 pid(3) 错误。状态（8：无效令牌）1）APNS::__construct -> 文件：apns.php（第 34 行）2）APNS::_fetchMessages -> 文件：class_APNS.php（第 232 行）3）APNS::_iterateMessages -> 文件: class_APNS.php（第 404 行） 4) APNS::_pushMessage -> 文件：class_APNS.php（第 457 行） 5) APNS::_triggerError -> 文件：/home/push/class_APNS 中的 class_APNS.php（第 591 行）。第 693 行的 php

我仔细检查了我的生产证书并生成了一个新证书，但问题仍然存在。此错误已发布在 easyAPNs 组上，但找到了任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:33:41.277

我遇到了同样的问题，我的解决方法是在归档应用程序以安装在您的 iOS 设备上时，将应用程序与分发配置证书打包在一起，并选择 Ad Hoc。

在此步骤之后，我能够在生产模式下测试我的设备的活动和卸载状态。

希望这对你也有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-03T16:34:42.157

如果您在多个设备上进行测试，请确保使用您的生产推送证书并将 class_APNS.php 的第 34 行更改为：

```
private $DEVELOPMENT = 'production'; 
```

和第 98 行到：

```
private $certificate = 'file path to production ceritficate'; 
```

# android - Android httpclient 登录并使用 cookie 进行进一步处理

> ID：14033739
> 
> 赞同：4
> 
> 时间：2012-12-25T20:20:09.590
> 
> 标签：android, cookies, httpclient

我正在开发一个应用程序，其中包括登录活动和主要活动。如果用户第一次登录，应用程序会保存用户名并传入 sharedPrefs。并且在下一次启动时，登录活动使用这些用户名和密码，如果服务器返回 true（在 xml 中，getEntity）主要活动意图开始。登录后，我想使用启动登录中设置的 cookie 与网页交互。据我在网上搜索，他们说我应该使用相同的 httpclient 以免丢失 cookie。我试过了，但无法管理。那么，我可以在不使用相同的 httpclient 的情况下使用 cookie 吗？

**我的应用程序的一般逻辑：**

```
httpclient.execute("http://www.abc.com/index.php?process=login&user="+variable1+"&pass="+variable1); 

//here I get the entity of this response and I parse that return value, after that, if(login==true)--> go on...
//here I have to read all page from website which is protected by user authentication(by cookies).(ex:index.php?process=getmymessages)
//But I did not manage that. At this point what is your suggestions? 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:49:18.560

您可以考虑通过像这样的 Singleton 解决方案使用相同的 HttpClient：

```
public enum MyAppHttpClient {
    INSTANCE;

    private HttpClient configuredHttpClient = null;

    public HttpClient getConfiguredHttpClient() {
        if (configuredHttpClient == null) {
            try {
                HttpParams params = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(params, 5000);
                HttpConnectionParams.setSoTimeout(params, 5000);
                configuredHttpClient = new DefaultHttpClient(params);
            } catch (Exception e) {
                configuredHttpClient = new DefaultHttpClient();
            }
        }

        return configuredHttpClient;
    }
} 
```

您可以在需要的任何地方调用 MyAppHttpClient.INSTANCE.getConfiguredHttpClient() 。

如果还不够，可以自己管理cookies，BasicCookieStore类是一个很好的起点，可以查看这个线程： [Android BasicCookieStore, Cookies and HttpGet](https://stackoverflow.com/questions/13556712/android-basiccookiestore-cookies-and-httpget)

我希望它对你有帮助。

# android - 为 Google Play 许可定义 mchecker 时出错

> ID：14033741
> 
> 赞同：0
> 
> 时间：2012-12-25T20:20:20.003
> 
> 标签：android

我今天得到了我的新笔记本电脑，并将我的 Eclipse 工作区复制到其中。

但是，除了这行代码现在会产生错误之外，一切都像以前一样工作：

```
mChecker = new LicenseChecker(
            this, new ServerManagedPolicy(this,
                new AESObfuscator(SALT, getPackageName(), deviceId)),
            BASE64_PUBLIC_KEY  // Your public licensing key.
            ); 
```

= 符号后的所有内容都带有红色下划线，说明的错误是：

> 构造函数 LicenseChecker(LicenseCheck, ServerManagedPolicy, String) 未定义

在我切换之前，整个代码运行良好 - 我没有改变任何东西，那么问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:22:47.013

这是由于导入错误 - 当我切换时，库没有正确链接。

我阅读了所有内容，然后我只导入了：

`import com.google.android.vending.licensing.*;`

问题已解决。

# .htaccess - 没有查询字符串的重定向主页

> ID：14033754
> 
> 赞同：1
> 
> 时间：2012-12-25T20:22:37.527
> 
> 标签：.htaccess, redirect, query-string

我正在使用 joomla，我需要在我的 htaccess 中放入一个好的重定向。

我需要重定向所有这些：

```
mysite.com to www.mysite.com  
mysite.com/index.php to www.mysite.com  
www.mysite.com/index.php  
www.mysite.com/    to www.mysite.com  
www.mysite.com/?    to www.mysite.com  
www.mysite.com/?tp=1   to www.mysite.com  
www.mysite.com/?t    to www.mysite.com  
www.mysite.com/?tp  or anything else after ?   to www.mysite.com 
```

在我的 htaccess 中，我只有这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mysite.com$
RewriteRule ^(.*) http://www.mysite.com/$1 [QSA,L,R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteRule ^index\.php$ http://www.mysite.com/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T22:11:32.853

```
RewriteCond %{QUERY_STRING} !^$
RewriteRule ^$ http://www.mysite.com/ [R=301,L] 
```

# wordpress - 如何防止 wp_insert_post() 设置未分类类别？

> ID：14033757
> 
> 赞同：0
> 
> 时间：2012-12-25T20:23:04.987
> 
> 标签：wordpress, post, insert

我正在使用`Wordpress 3.5`，似乎`wp_insert_post()`无法再设置类别，文档 syas ：

> post_category 不再存在，尝试 wp_set_post_terms() 设置帖子的类别

问题是`wp_set_post_terms()`or`wp_set_object_terms()`需要由 .`postID`返回的`wp_insert_post()`. 虽然可以为插入的帖子设置类别术语`wp_insert_post()`，但问题是每次我打电话时，除了我在调用之后设置的类别术语之外，我都会在我的帖子中获得`wp_insert_post()`类别。我怎样才能防止总是在那里？`Uncategorized``wp_insert_post()``Uncategorized`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T21:36:32.237

我不知道你在哪里找到的，`wp_insert_post() can't set categories anymore`但是从[WordPress Doc](http://codex.wordpress.org/Function_Reference/wp_insert_post)你可以像

```
// Create post object
$my_post = array(
    'post_title'    => 'My post',
    'post_content'  => 'This is my post.',
    'post_status'   => 'publish',
    'post_author'   => 1,
    'post_category' => array(8,39) // id's of categories
);

// Insert the post into the database
wp_insert_post( $my_post ); 
```

Bellow 是我的一个工作示例，我在我的一个站点中使用它来由管理员动态添加新帖子，其类别名称为`location`具有两个元字段，输入来自用户（我已经过滤了用户输入，但此处省略）

```
$category='location'; // category name for the post
$cat_ID = get_cat_ID( $category ); // need the id of 'location' category
//If it doesn't exist create new 'location' category
if($cat_ID == 0) {
    $cat_name = array('cat_name' => $category);
    wp_insert_category($cat_name); // add new category
}
//Get ID of category again incase a new one has been created
$new_cat_ID = get_cat_ID($category);
$my_post = array(
    'post_title' => $_POST['location_name'],
    'post_content' => $_POST['location_content'],
    'post_status' => 'publish',
    'post_author' => 1,
    'post_category' => array($new_cat_ID)
);
// Insert a new post
$newpost_id=wp_insert_post($my_post);
// if post has been inserted then add post meta 
if($newpost_id!=0)
{
    // I've checked whether the email and phone fields are empty or not
    // add  both meta
    add_post_meta($newpost_id, 'email', $_POST['email']);
    add_post_meta($newpost_id, 'phone', $_POST['phone']);
} 
```

另请记住，每次添加没有类别的新帖子时，都会为该`WordPress`帖子设置默认类别，`uncategorized`如果您没有从管理面板更改它，您可以将默认类别从更改为`uncategorized`您想要的任何内容。

## 更新：

由于`post_category`不再存在，因此您可以替换

```
'post_category' => array($new_cat_ID) 
```

有以下

```
'tax_input' => array( 'category' => $new_cat_ID ) 
```

在上面给出的例子中。你也可以使用

```
$newpost_id=wp_insert_post($my_post);
wp_set_post_terms( $newpost_id, array($new_cat_ID), 'category' ); 
```

请记住，在此示例中，`$new_cat_ID`已使用以下代码行找到

```
$new_cat_ID = get_cat_ID($category); 
```

但也可以使用以下代码获取类别 ID

```
$category_name='location';
$term=get_term_by('name', $category_name, 'category');
$cat_ID = $term->term_id; 
```

阅读有关[get_term_by](http://codex.wordpress.org/Function_Reference/get_term_by)函数的更多信息。

# c++ - 重载运算符时 C++ 代码中的错误

> ID：14033758
> 
> 赞同：0
> 
> 时间：2012-12-25T20:23:05.470
> 
> 标签：c++, class, operator-overloading, operator-keyword

我试图在我的代码中重载“+”和“=”运算符，但我不断收到运行时错误，并且程序在使用 VS2012 运行时崩溃，但在 borland C 3.1 中完美运行。

这是我的代码：

```
class employee{
    int eid;
    long esalary;
    char * ename;
    static char company_name[20];
    static int emp_count;

    public:

    static char * getcompanyname(){
        return company_name;
    }
    static int getempcount(){
        return emp_count;
    }
    void set(int empid);
    void set(long empsalary);
    void set(char empname[]);
    int getid();
    long getsalary();
    char * getname();
    employee(int empid=0,long empsalary=0,char empname[]="NA"){
        eid=empid;
        esalary=empsalary;
        ename=new char[strlen(empname)+1];
        strcpy(ename,empname);
        emp_count++;
    }

    employee(employee &ref){
        eid=ref.eid;
        esalary=ref.esalary;
        ename=new char(strlen(ref.ename)+1);
        strcpy(ename,ref.ename);
    }

    ~employee(){
        delete(ename);
    }

    employee operator+(employee &ref){
        employee temp(*this);
        temp.esalary=esalary+ref.esalary;
        return(temp);
    }
    employee& operator= (employee &ref){
        eid=ref.eid;
        esalary=ref.esalary;
        return * this;
    }

}e1,e2,emp; 
```

然后主要：

```
emp=e1+e2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:25:48.847

老实说，您的代码无效。它甚至不应该编译，因为它违反了引用绑定规则：`+`操作符返回一个临时对象，它不能通过非常量引用传递给`=`操作符。如果您设法编译了此代码，则仅意味着您的编译器接受它作为语言的“扩展”。

要修复该特定错误，您必须在声明中添加一堆`const`限定符

```
employee operator +(const employee &ref) const {
  employee temp(*this);
  temp.esalary = esalary + ref.esalary;
  return temp;
}

employee& operator =(const employee &ref){
  eid = ref.eid;
  esalary = ref.esalary;
  return *this;
} 
```

从 C++ 的角度来看，这将使您的代码有效，但它可能无法修复崩溃，因为崩溃的原因必须在其他地方。

* * *

这是导致崩溃的错误：在复制构造函数中，您执行了此操作

```
ename=new char(strlen(ref.ename)+1); 
```

当你用 分配一个数组时`new`，你必须使用`[]`方括号，而不是`()`

```
ename = new char[strlen(ref.ename) + 1]; 
```

你在你的第一个构造函数中正确地做到了，但是由于某种原因你在你的复制构造函数中使用`()`了它。在这种情况下意味着完全不同的东西：它分配一个单一的并将其初始化为值。`[]``()``char``strlen(ref.ename) + 1`

`ename`顺便说一句，您没有在复制分配运算符中复制是有原因的吗？

此外，分配的内存`new[]`必须使用`delete[]`. 不是与`delete`，而是与`delete[]`。这就是你的析构函数应该是什么样子

```
~employee() {
  delete[] ename;
} 
```

* * *

`std::string`最后，使用for storage可能会好得多`ename`，而不是依赖原始内存管理。（除非您被特别要求这样做）。

# mysql - 如何在 MySQL 上按字段识别顺序记录间隙

> ID：14033759
> 
> 赞同：0
> 
> 时间：2012-12-25T20:23:12.583
> 
> 标签：mysql, sql

我可以使用以下查询找到排序的记录间隙，其中使用相同的数字对周进行排序。

```
SELECT * FROM pointed_numbers A WHERE EXISTS (
    SELECT * FROM pointed_numbers B WHERE A.number = B.number AND (A.week = B.week + 1 XOR A.week = B.week - 1)
) ORDER BY A.number, A.week; 
```

如何在没有存储过程的情况下识别每个间隙。我尝试过使用用户定义的变量，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:30:01.333

查看[http://www.artfulsoftware.com/infotree/queries.php](http://www.artfulsoftware.com/infotree/queries.php)并查看“序列”部分下的内容。这是一个超级有用的网站，其中包含如何在 mysql 中做复杂事情的食谱！

# swing - 切换语句越野车？

> ID：14033760
> 
> 赞同：0
> 
> 时间：2012-12-25T20:23:17.637
> 
> 标签：swing, switch-statement, java

> **可能重复：**
> [不间断切换](https://stackoverflow.com/questions/8563970/switch-without-break)

我正在制作一个小型计算器应用程序，当单击计算按钮时，会运行一个 switch 语句，但产生的数字不是应该的，我已经测试了我的输入，它们在这里工作的是 switch 语句：

```
switch (currentOp) 
{
    case "+" : 
        answer = Float.toString(inp1 + inp2);
    case "-" : 
        answer = Float.toString(inp1 - inp2);
    case "X" : 
        answer = Float.toString(inp1 * inp2);
    case "/" : 
        answer = Float.toString(inp1 / inp2);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T20:30:17.433

只是对另一个答案的补充，通常首选使用多态性来切换案例：

```
public enum Operation {
    ADDITION {
        @Override
        public float compute(float a, float b) {
            return a + b;
        }
    },
    SUBTRACTION {
        @Override
        public float compute(float a, float b) {
            return a - b;
        }
    },
    PRODUCT {
        @Override
        public float compute(float a, float b) {
            return a * b;
        }
    },
    DIVISION {
        @Override
        public float compute(float a, float b) {
            return a / b;
        }
    };

    public abstract float compute(float a, float b);
}

...

answer = currentOp.compute(inp1, inp2); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-25T20:24:31.163

你忘了打破，所以你的案例陈述落空了。试试这个：

```
case "+" : answer = Float.toString(inp1 + inp2); break;
case "-" : answer = Float.toString(inp1 - inp2); break;
case "X" : answer = Float.toString(inp1 * inp2); break;
case "/" : answer = Float.toString(inp1 / inp2); break; 
```

**相关文档**

*   [切换语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-25T20:25:20.250

请参阅[案例失败](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)。如果您没有在每种情况之间中断，则下一个也将被执行，直到达到 a 为止`break`。

> break 语句是必要的，因为没有它们，switch 块中的语句就会失败：匹配 case 标签之后的所有语句都按顺序执行，无论后续 case 标签的表达式如何，直到遇到 break 语句。

# ember.js - 命名多个或一套 emberjs 应用程序的最佳方法

> ID：14033765
> 
> 赞同：2
> 
> 时间：2012-12-25T20:24:00.900
> 
> 标签：ember.js, ember-data

首先祝您圣诞快乐，感谢您提供建议。

我的问题仍然在 emberjs 命名空间上，但这次是在一组多个 emberjs 应用程序的上下文中，这些应用程序将包含在多个 rails-engine 中，因此每个 emberjs 应用程序都是具有自己的控制器、模型、视图和路由器的独立应用程序。但是，他们仍然需要共享 ember-data 关联。这些 rails-engines 将反过来包含在 main-rails 应用程序中，其中每个引擎代表应用程序的主要功能。

在这个[jsfiddle](http://jsfiddle.net/CuXmL/2/)中，我想出了 3 种命名空间的方法，但我想知道哪一种是 emberjs 方法：

```
 **Approach 1** 
```

**//每个 emberjs 应用都有自己的命名空间**

```
MainRailsApp = Ember.Application.create();

RailsEngine = Ember.Namespace.create();

RailsEngine2 = Ember.Namespace.create();

MainRailsApp.Store= DS.Store.extend();    **inherits from Ember.Application**
MainRailsApp.Router = Em.Router.extend()  **inherits from Ember.Application**

console.log(RailsEngine.toString());       //RailsEngine
console.log(RailsEngine2.toString());      //RailsEngine2

RailsEngine.Model = DS.Model.extend
RailsEngine2.model = DS.Model.extend 
```

**这个模型的共享关联是否可以从不同的命名空间继承？**

```
Contact.Model = RailsEngine.Model.extend({
       address:   DS.attr('string'),
       user:      DS.belongsTo('User.Model')      
});

User.Model = RailsEngine2.Model.extend({
      name: DS.attr('string'),
      contacts: DS.hasMany('Contact.Model'),

});

                 **Approach 2** 
```

**//所有不同的 emberjs 应用共享一个命名空间但不同的实例**

```
Yp = Ember.Namespace.extend();

UserRailsEngine = Yp.create();

ContactRailsEngine = Yp.create();

PaymentRailsEngine = Yp.create();

Yp.Jk = Ember.Application.extend();

Yp.Jk.create();
Yp.Router = Em.Router.extend();      **inherits from the Ember.Namespace**
Yp.Store = DS.Store.extend({ });     **inherits from the Ember.Namespace**

console.log(UserRailsEngine.toString());         //UserRailsEngine

console.log(PaymentRailsEngine.toString());      //PaymentRailsEngine

UserRailsEngine.Model = DS.Model.extend
ContactRailsEngine.Model = DS.Model.extend 
```

**这个模型可以共享关联吗，它们有一个命名空间但不同的实例**

```
Contact.Model = ContactRailsEngine.Model .extend({
       address:   DS.attr('string'),
       user:      DS.belongsTo('User.Model')      
});

User.Model = UserRailsEngine.Modelextend({
      name: DS.attr('string'),
      contacts: DS.hasMany('Contact.Model')    
});

            **Approach 3** 
```

**//一个命名空间，但每个 emberjs 应用的命名空间的多个子类**

```
Mynamespace = Ember.Namespace.extend();

Order = Mynamespace.extend();

OrderRailsEngine = Order.create();

Event = Mynamespace.extend();

EventRailsEngine = Event.create();

console.log(OrderRailsEngine.toString());           //OrderRailsEngine

console.log(EventRailsEngine.toString());           //EventRailsEngine

**Additional questions** 
```

1\. 在所有 3 种方法中，我仍然可以使用 hasMany 和 belongsTo 关联 ember-data 模型吗？

1.  我仍然不确定如何处理路由器。您认为命名空间应该在主应用程序和每个 rails-engine 中，以便它们仍然可以无缝工作。

2.  您对如何处理 ember-data DS.Store 命名空间的建议是什么，因为每个 ember-data 模型都将被命名为每个引擎，我仍然希望 ember-data DS.Store 能够识别和使用包含在引擎。

3.  Ember.Namespace 是否像 Ember.Application 一样自动初始化。

4.  欢迎替代模式。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T17:30:09.987

修改后的方法 2 似乎是 emberjs 的发展方向。所有不同的 emberjs 应用程序仍将共享一个命名空间，但它们不会共享该命名空间的不同实例，而是共享一个实例。最后**[的jsfiddle](http://jsfiddle.net/CuXmL/4/)**

这种做法可以从下面粘贴的代码中看出，该代码摘自下面的链接：

[https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_dirtying_test.js](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_dirtying_test.js)

```
var attr = DS.attr;
var Post, Comment, User, Vote, Blog;
var Adapter, App;
var adapter, store, post;
var forEach = Ember.EnumerableUtils.forEach;

App = Ember.Namespace.create({ name: "App" });

User = App.User = DS.Model.extend({
  name: attr('string')
});

Vote = App.Vote = DS.Model.extend({
  voter: attr('string')
});

Comment = App.Comment = DS.Model.extend({
  title: attr('string'),
  user: DS.belongsTo(User),
  votes: DS.hasMany(Vote)
});

Blog = App.Blog = DS.Model.extend({
  title: attr('string')
});

Post = App.Post = DS.Model.extend({
  title: attr('string'),
  comments: DS.hasMany(Comment),
  blog: DS.belongsTo(Blog)
});

Adapter = DS.RESTAdapter.extend();

Adapter.map(Comment, {
  user: { embedded: 'always' },
  votes: { embedded: 'always' }
});

Adapter.map(Post, {
  comments: { embedded: 'always' },
  blog: { embedded: 'load' }
});

adapter = Adapter.create();

store = DS.Store.create({
  adapter: adapter
}); 
```

因此，在跨 Rails 引擎使用它的竞赛中，它变成：

```
 //App = Ember.Namespace.create();
 App = Ember.Namespace.create({ name: "App" });
 Main = App.MainApp = Ember.Application.extend();
 Main.create();

 UserEngine = App.UserEngine = DS.Model.extend({
    name: DS.attr('string')
 });

 VoteEngine = App.VoteEngine = DS.Model.extend({
   voter: DS.attr('string')
 });

 console.log(Main.toString());                       //App.MainApp
 console.log(UserEngine.toString());                 //App.UserEngine 
 console.log(VoteEngine.toString());                 //App.VoteEngine 
```

# amazon-ec2 - 用 Amazon EC2 实例替换 Rackspace Cloud SITES

> ID：14033768
> 
> 赞同：0
> 
> 时间：2012-12-25T20:24:39.837
> 
> 标签：amazon-ec2, cloud, amazon, rackspace, sites

所以在工作中，我们在 rackspaces 云站点平台上运行了一堆站点。这没问题，除了我无法调整服务器端的任何东西，而且我发现它们有时没有像它们应该的那样响应。

让我们假设大多数网站都是臃肿的 wordpress 安装。

是否可以使用 EC2 微实例来托管这些？（每个站点一个实例）？

我想离开机架空间，因为我对云站点没有灵活性并且更喜欢亚马逊的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:08:30.147

当然！你可以很容易地做到这一点！

1.  [在此处](http://aws.amazon.com/ec2/)注册 EC2 。
2.  转至[http://alestic.com/](http://alestic.com/)并选择您想要启动实例的 AMI（用于 EC2 的 Ubuntu AMIs 下拉菜单）。
3.  [通过点击链接（或使用API 工具](http://aws.amazon.com/developertools/351)）启动 EC2 微实例。您可以使用用户数据在实例启动时安装所需的软件，但我建议（为简单起见）仅启动实例并使用 SSH 通过终端安装软件。按照对话框创建 RSA 密钥以连接您的实例。
4.  使用 RSA 密钥通过 ssh 连接到您的实例。
5.  安装软件。例如：`sudo su`，那么`apt-get update && apt-get install -y ntp php5-fpm nginx wordpress [...]`。
6.  使用已安装和配置的软件从运行实例创建 AMI。
7.  从您自己的与 Wordpress 和其他东西捆绑的 AMI 启动更多实例！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T21:01:58.250

全面披露：我是机架空间的员工。

如果您想要比 rackspace 云站点更大的灵活性，那么您可以使用 rackspace 云服务器。您将拥有云的所有灵活性。如果您喜欢云站点的托管部分，那么我会建议托管云服务器。

# php - Imagick 命令行到 PHP 类

> ID：14033773
> 
> 赞同：-1
> 
> 时间：2012-12-25T20:25:12.397
> 
> 标签：php, image, filter, imagick

我有一个共享主机，其中包含与 php 捆绑的 imagick。...而且，我想在使用我的照片应用程序时为我的客户放置一些图像过滤器。

在网上搜索，我发现[http://net.tutsplus.com/tutorials/php/create-instagram-filters-with-php/](http://net.tutsplus.com/tutorials/php/create-instagram-filters-with-php/) ...但这使用了“转换”，而“转换”程序不在 PATH 中，所以我不能使用文章的代码。

问题是，如何将这些命令转换为 PHP Imagick 类？[http://php.net/imagick](http://php.net/imagick)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:09:37.417

PHP Imagick 类 Process is modulate 有一个函数，用于 kelvin()、nashville()、toaster() 和 gotham()

[http://php.net/manual/en/imagick.modulateimage.php](http://php.net/manual/en/imagick.modulateimage.php)

您可以在 php.net 中为命令中使用的每个进程或参数寻找另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:34:48.857

> 问题是，如何将这些命令转换为 PHP Imagick 类？

那只是直截了当。你需要：

1.  类的[代码](https://github.com/webarto/instagraph)
2.  [PHP Imagick](http://php.net/imagick)手册
3.  ImageMagick [: 命令行工具](http://www.imagemagick.org/script/command-line-tools.php)

然后通过代码，挑选出用于效果的命令行调用序列，并在 PHP 手册中查找可以使用哪些方法来实现相同的效果。

你也可以在这里搜索一下网站，对于一些更复杂的操作，这个之前已经问过了，所以你应该找到足够的资源。

基本上就是这样。您可以从更简单的过滤器之一开始，并将到目前为止所做的添加到您的问题中，以便更清楚地了解您遇到的问题。

# css - Rails 3.2.x - 无法在 localhost 上设置字体

> ID：14033774
> 
> 赞同：1
> 
> 时间：2012-12-25T20:25:15.493
> 
> 标签：css, ruby-on-rails, ruby, fonts, font-face

一整天我都在尝试设置`@font-face`在本地主机上工作。这是我的设置：

`application.rb`和`development.rb`：

```
config.assets.paths << "#{Rails.root}/app/assets/fonts" 
```

在 CSS 中：

```
@font-face {
  font-family: 'my_font';
  src: asset-url('font_name.eot', font);
  src: asset-url('font_name.eot?#iefix', font) format('embedded-opentype'),
       asset-url('font_name.woff', font) format('woff'),
       asset-url('font_name.ttf', font)  format('truetype'),
       asset-url('font_name.svg#AndrogyneMedium', font) format('svg');    
} 
```

我也尝试过预编译资产：

```
bundle exec rake assets:precompile 
```

我也尝试过几次重新启动应用程序，但没有任何帮助。

谁能给我任何建议，如何解决？先感谢您。

**编辑：** 好的，伙计们，我会给你无数美元来帮助我解决它:) 我可能已经尝试了一切......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T22:24:16.333

我在这个问题上苦苦挣扎，所以我的解决方案是查看[typekit](https://typekit.com/)是否具有我正在寻找的字体，并且我一直在移动它。你不应该花几个小时来担心字体，而是花在代码上，所以检查一下，因为它会节省你的时间和头痛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T20:30:07.360

您还需要将文件添加到预编译配置中：

```
config.assets.precompile += %w(*.svg *.eot *.ttf *.woff) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T22:06:11.903

如果您在其中组织字体，`assets/fonts`则可以使用以下设置。

```
# config/application.rb
# Serve fonts via Asset Pipeline
config.assets.paths << Rails.root.join("app", "assets", "fonts")
config.assets.precompile += %w( .svg .eot .woff .ttf ) 
```

我正在使用 font-awesome 图标字体，所以在`font-awesome.sass`我使用了一个`font-url`助手（与你的不同`asset-url`）。

```
# vendor/stylesheets/font-awesome.sass
@import compass/css3/font-face

@font-face
  font-family: 'FontAwesome'
  src: font-url("fonts/fontawesome-webfont.eot")
  src: font-url("fonts/fontawesome-webfont.eot?#iefix") format("eot"), font-url("fonts/fontawesome-webfont.woff") format("woff"), font-url("fonts/fontawesome-webfont.ttf") format("truetype"), font-url("fonts/fontawesome-webfont.svg#FontAwesome") format("svg") 
```

来源：[相关的stackoverflow问题](https://stackoverflow.com/questions/11261805/rails-3-font-face-failing-in-production-with-firefox)

# java - Xuggler 中的 BigEndian、LittleEndian 混淆

> ID：14033778
> 
> 赞同：4
> 
> 时间：2012-12-25T20:25:34.127
> 
> 标签：java, xuggler, endianness

以前我提出了一个关于将 a 转换为`byte[]`的问题，我遇到的一个新问题是将数据从BigEndian`short[]`转换/不转换。 这是发生了什么：`byte[]`

*   我正在使用`TargetDataLine`将数据读入`byte[10000]`.*   该`AudioFormat`对象已任意`BigEndian`设置为**true**。*   这`byte[]`需要转换为，`short[]`以便可以使用 Xuggler 对其进行编码

我不知道`AudioFormat`应该将 BigEndian 设置为 true 还是 false。
我已经尝试了这两种情况，并且在这两种情况下都得到了异常。
要转换`byte[]`为`short[]`，我这样做：

```
fromMic.read(tempBufferByte, 0, tempBufferByte.length);
for(int i=0;i<tempBufferShort.length;i++){
tempBufferShort[i] = (short) tempBufferByte[i];
} 
```

其中：
`fromMic`是 我得到 `TargetDataLine`
`tempBufferbyte`异常`byte[10000]`
`tempBufferShort`：`short[10000]`

```
 java.lang.RuntimeException: failed to write packet: com.xuggle.xuggler.IPacket@90098448[complete:true;dts:12;pts:12;size:72;key:true;flags:1;stream index:1;duration:1;position:-1;time base:9/125;] 
```

* * *

## 可能需要的其他信息：

*   我如何设置流以在 Xuggler 中添加音频：

```
writer.addAudioStream(0,1,fmt.getChannels(),(int)fmt.getSampleRate()); 
```

*   我如何执行编码

```
writer.encodeAudio(1,tempBufferShort,timeStamp,TimeUnit.NANOSECONDS); 
```

## 关于音频格式的 Java 文档

> ...除了编码之外，音频格式还包括其他属性，这些属性进一步指定了数据的确切排列。这些包括通道数、采样率、样本大小、字节顺序、帧速率和帧大小......

**和**

> 对于 16 位样本（或任何其他大于一个字节的样本大小），字节顺序很重要；每个样本中的字节以“小端”或“大端”样式排列。

## 问题：

*   我需要在对象中保持`BigEndian`as **true吗？**`javax.sound.sampled.AudioFormat`
*   是什么导致了错误？是格式吗？

* * *

我想我得到了由 AudioFormat 对象预先格式化的 BigEndian 数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:57:22.593

如果您的数据确实是大端，您可以直接将其转换为（大端）短数组，如下所示：

```
ByteBuffer buf = ByteBuffer.wrap(originalByteArray);
short[] shortArray = buf.asShortBuffer().array(); 
```

鉴于您的数据是大端序，生成的`short`数组将直接正确映射所有原始数组。`byte`因此，一个原始数组，例如：

```
// bytes
[00], [ae], [00], [7f] 
```

将转换为：

```
// shorts
[00ae], [007f] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T20:42:26.000

您需要将**两个字节**转换为**一个 short**，所以这一行是错误的：

```
tempBufferShort[i] = (short) tempBufferByte[i]; 
```

你需要一些类似的东西

```
tempBufferShort[i] = (short) 
   (tempBufferByte[i*2] & 0xFF)*256 + (tempBufferByte[i*2+1] & 0xFF); 
```

这将符合大端字节数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T23:54:38.413

What others here have said about the byte-to-short conversion is correct, but it cannot cause the problem you see, it would just cause the output audio to be mostly noise. You can call writeAudio with a buffer of all zeros (or anything, really) so, everything else being equal, the values in the buffer don't matter to whether the call succeeds (they do matter to what you hear in the output, of course :)

1.  Does the exception happen at the beginning of the stream (first audio chunk)? Can you write an audio-only stream successfully?

2.  Set the audio codec when you call `addAudioStream`. Try `ICodec.ID.CODEC_ID_MP3` or `ICodec.ID.CODEC_ID_AAC`.

3.  Check that `fmt.getChannels()` and `fmt.getSampleRate()` are correct. Not all possible values are supported by any particular codec. (2 ch, 44100 Hz should be supported by just about anything).

4.  Are you writing your audio and video such that the timestamps are strictly non-decreasing?

5.  Do you have enough audio samples for the duration your timestamps are indicating? Does `tempBufferShort.length == ((timeStamp - lastTimeStamp) / 1e+9) * sampleRate * channels` ? (This may be only approximately equal, but it should be very close, slight rounding errors probably ok).

# c# - 如何创建一个带有多个控件的 ToolStripMenuItem？

> ID：14033785
> 
> 赞同：1
> 
> 时间：2012-12-25T20:26:55.433
> 
> 标签：c#, .net, winforms

比如一个标签和一个文本框。

我试过：

```
class MyClass : ToolStripPanel
{
      //...
} 
```

之类的。但是之后：

```
contextMenuStrip1.Items.Add(new MyClass()); 
```

显示错误：

> ...无效的参数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T20:47:14.407

您可以使用[ToolStripControlHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcontrolhost.aspx)类在 ContextMenuStrip 上托管任何 Windows 窗体控件（或者实际上是任何 Strip 控件）

例如，以下代码将为上下文菜单条添加标签：

```
 Label newlabel = new Label();
    newlabel.Text = "Hello World";
    newlabel.Width = 300;
    ToolStripControlHost tsHost = new ToolStripControlHost(newlabel);

    contextMenuStrip1.Items.Add(tsHost); 
```

# php - 我可以使用 .match() 匹配文本出现的多个位置吗？

> ID：14033786
> 
> 赞同：0
> 
> 时间：2012-12-25T20:27:02.330
> 
> 标签：php, javascript, regex

可以像`preg_match_all`在 php 中那样使用 .match() 来捕获文本中与模式匹配的多个位置吗？

现在我必须测试：

```
<div>
    <span>
    one something 1 $2502
    </span><br />

    <span>
        one something 2
    </span><br />

    <span>
        one something 3 $25102
    </span><br />
</div> 
```

我正在使用以下模式：`/>([^<>]*\$\s*(\d+\.?\d+)[^<>]*)</`但结果始终是第一个跨度。

```
 var priceArr = completetext.match(/>([^<>]*\$\s*(\d+\.?\d+)[^<>]*)</);
 alert(priceArr ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T22:12:49.067

```
var match = []; 
match[0] = [];
match[1] = [];
match[2] = [];

'YOUR TEXT'.replace(/>([^<>]*\$\s*(\d+\.?\d+)[^<>]*)</ig, function() {
  match[0].push(arguments[0]); 
  match[1].push(arguments[1]);
  match[2].push(arguments[2]);

  return arguments[0];
}); 
```

你得到变量匹配的结果 - console.log(match)

[http://jsfiddle.net/SkXCG/](http://jsfiddle.net/SkXCG/)

# android - Android - match_parent 忽略 layout_margin

> ID：14033788
> 
> 赞同：2
> 
> 时间：2012-12-25T20:27:22.177
> 
> 标签：android, android-layout

我的活动有一个`LinearLayout`单子视图。我希望两者都填满屏幕，减去 12 dp 的边距。

不幸的是，子视图被绘制了 12 dp 太大并被切断。在计算子视图的大小时显然`match_parent`忽略了该属性。`layout_margin`解决此问题的最简单方法是什么？

**我的活动.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_margin="12dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <com.myapp.myView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
    />
</LinearLayout> 
```

**我的活动.java**

```
package com.myapp;

import android.app.Activity;
import android.os.Bundle;

public class myActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.myActivity);
    }
} 
```

**我的视图.java**

```
package com.myapp;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class myView extends View {

    private Paint paint = new Paint();

    public myView(Context context, AttributeSet attrs) {
        super(context, attrs);
        paint.setColor(0xFFFF0000); //red
        paint.setStyle(Paint.Style.STROKE); // for unfilled rectangles
        paint.setStrokeWidth(4);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        int size = canvas.getWidth(); // width = height (see onMeasure())
        canvas.drawRect(0, 0, size, size, paint);   
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, widthMeasureSpec);
        // This gives us a square canvas!
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T20:38:05.543

子视图可以在它们周围有一个边距，父视图（或像布局这样的视图组）可以在它们的边界和它们的子视图之间有一个填充。换句话说，margin 在视图外，padding 在视图内。

另外，请参阅这个出色的解释：[Difference between a View's Padding and Margin](https://stackoverflow.com/questions/4619899/difference-between-a-views-padding-and-margin)

**使用标准视图和填充而不是边距的示例：**

我用标准视图而不是您的自定义视图创建了一个小示例，并按照上面的建议对 LinearLayout 使用填充，并且效果很好（见屏幕截图）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="12dp"
    android:orientation="vertical" >

    <View
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:background="#ff0000"/>
</LinearLayout> 
```

![布局编辑器的屏幕截图](../Images/519fc3d0c21c62595e886ad7cd172648.png)

**解决方案**

事实证明，问题在于您`canvas.getWidth()`在自定义视图的`onDraw`方法中使用。使用视图`getWidth()`代替，解决了这个问题。最后 ：-）

# cmake - 如何从 pbuilder env debian/rules 脚本中使用 cmake 的“make install”？

> ID：14033791
> 
> 赞同：3
> 
> 时间：2012-12-25T20:27:26.913
> 
> 标签：cmake, launchpad, make-install, pbuilder

这是为了编译和链接一个静态库（因此只有构建时间依赖项），该库的源代码是从 ubuntu 启动板构建机器人上的存储库（就像主程序的源代码一样）获取的。

目前我正在做：

```
 #!/usr/bin/make -f
    export PREFIX=/usr
    export CFLAGS= -O3 -fomit-frame-pointer -flto -fwhole-program
    export CXXFLAGS= -O3 -fomit-frame-pointer -flto -fwhole-program

    %:
        dh $@
    override_dh_auto_configure:
        cd src/munt;cmake -DCMAKE_CXX_FLAGS="-O3 -fomit-frame-pointer -flto" mt32emu;make;make install
#...compile of the program that depends on mt32emu... 
```

但它失败了：

```
Install the project...
-- Install configuration: ""
-- Installing: /usr/local/lib/libmt32emu.a
CMake Error at cmake_install.cmake:36 (FILE):
  file INSTALL cannot copy file
  "/tmp/buildd/dosbox-0.74+20121225/src/munt/libmt32emu.a" to
  "/usr/local/lib/libmt32emu.a".

make[2]: *** [install] Error 1
make[2]: Leaving directory `/tmp/buildd/dosbox-0.74+20121225/src/munt'
make[1]: *** [override_dh_auto_configure] Error 2
make[1]: Leaving directory `/tmp/buildd/dosbox-0.74+20121225'
make: *** [build] Error 2
dpkg-buildpackage: error: debian/rules build gave error exit status 2
E: Failed autobuilding of package
I: unmounting /var/cache/pbuilder/ccache filesystem
I: unmounting dev/pts filesystem
I: unmounting proc filesystem
I: cleaning the build env 
I: removing directory /var/cache/pbuilder/build//2751 and its subdirectories 
```

这个想法是安装一个未打包在启动板 pbuilder env 中的 ubuntu 存储库中的静态库依赖项，因此它可以像已经是系统依赖项一样使用。

如果我尝试执行“sudo make install”（并将 sudo 添加到 debian/control 中的 build-deps），它会在本地测试时询问我“pbuilder”密码，我假设这会将机器挂在 ubuntu 上构建机器人。

编辑：它实际上在 buildbots 上失败了，因为“没有 tty 存在并且没有指定 askpass 程序”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T14:19:11.010

你可以做几件事来清理你的`rules`文件，尤其是当你使用`dh`.

在`%`目标中，所有`dh`命令都带有一个参数`builddirectory`，该参数指定您要构建的目录。这告诉构建器`cd`到该目录，*然后*调用命令（`make`、`cmake`等）。

此外，您应该只`dh`为您安装文件。这是自动完成的。您不必`make install`手动调用。

这是一个稍微容易阅读的`rules`文件：

```
#!/usr/bin/make -f
export PREFIX=/usr
export CFLAGS= -O3 -fomit-frame-pointer -flto -fwhole-program
export CXXFLAGS= -O3 -fomit-frame-pointer -flto -fwhole-program

%:
    dh $@ --builddirectory=src/munt

override_dh_auto_configure:
    cd src/munt && cmake -DCMAKE_CXX_FLAGS="-O3 -fomit-frame-pointer -flto" mt32emu
#...compile of the program that depends on mt32emu... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T11:28:41.597

这只是权限问题吗？（即——必须使用 'sudo' 安装到 '/usr/local'？）

你必须把它安装到'/usr/local'吗？

如果它只是一个静态库，纯粹是构建“依赖于 mt32emu 的程序”所需要的，那么你可以把它放在任何地方，然后告诉依赖程序它在哪里。

要安装在其他地方，请使用 -DCMAKE_INSTALL_PREFIX=/directory/where/you/have/write/privileges。或者在 make install 中使用 DESTDIR=。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T22:03:39.350

我最终通过依赖启动板存储库依赖关系“解决”了这个问题，也就是说，为库构建一个完整的包并在启动板上构建它，然后将放置在我的其他构建中的存档导入。我猜是明确的。

# operators - 三元运算符何时比简单的 if-else 块更糟糕？

> ID：14033793
> 
> 赞同：3
> 
> 时间：2012-12-25T20:27:46.503
> 
> 标签：operators, block, if-statement, ternary-operator

我想知道：“三元运算符何时比仅使用'if-else'块更糟糕？”

我想，它可能与调试时间有关（例如三元运算符不利于调试）

这样的美有用吗？也许在某些情况下，简单的 if-else 块更适合使用？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T20:29:13.677

当您想要有条件地评估两个简单表达式之一并对结果做一些简单的事情（例如将其分配给变量或返回它）时，三元运算符很有用。这样的事情是可接受的三元运算符用法：

```
var status = a.isActive() ? a.status : defaultStatus; 
```

如果您的代码比这更复杂，那么使用 if 语句通常会更清楚，否则您可能会在一行代码中尝试做太多事情。这不仅仅是易于调试 - 带有复杂表达式的长行可能难以理解。

在许多语言中，不允许在表达式中使用语句（相对于表达式）`? :`。如果您需要执行一系列语句，那么您别无选择，只能使用一条`if`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T21:17:42.610

三元组应该仅用于单个语句中的非常简单的分支，IMO。我想说，任何时候为了清楚起见，你想在多行上写一个三元组，是时候使用一些其他形式的分支了。我个人也发现复合三元运算符很难阅读，并认为它是一种不好的形式。

忘记IDE。如果您必须能够在调试器中完全中断每一件小事才能理解您的代码，那么您将面临更大的结构性问题。

在 JavaScript 中，当我根据函数参数进行设置时，我倾向于只在函数开头的初始 var 声明块中使用三元组。他们主要评估非常简单的事情，例如数组的长度、可选参数的存在或参数的类型。除了最初的准备点之外，逻辑通常会变得更加复杂或需要不止一个简单的检查，因此使用基于块的切换结构或某种形式的映射来拼写它更有意义。

但是首先考虑没有 IDE 的易读性。IMO，像没有 IDE 一样很好地构建代码将始终帮助您更好地理解代码。

# perl - perl 哈希未从 param () 读取

> ID：14033795
> 
> 赞同：2
> 
> 时间：2012-12-25T20:28:40.767
> 
> 标签：perl, cgi, param

我无法让 perl 读取从 param() 传递给它的哈希键。

这不起作用。

```
append_file('pending_entries.txt',$spanish_url{param('venue')}); 
```

也不是这个，

```
my $var = $spanish_url{param('venues')};
append_file( 'pending_entries.txt', $var ) ; 
```

也不是这个

```
my $ven = param('venue');
my $var = $spanish_url{$ven};
append_file( 'pending_entries.txt', $var ) ; 
```

但这确实如此。

```
append_file('pending_entries.txt',$spanish_url{'key'}); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:41:20.980

您是否尝试过打印参数中的值以查看它是什么？哈希键必须准确。可能你有类似`key\n`或`Key`在你的参数中的东西。该[`Data::Dumper`](http://search.cpan.org/perldoc?Data%3a%3aDumper)模块（perl 5 中的核心模块）非常适合这种调试。例如：

```
use Data::Dumper;
$Data::Dumper::Useqq = 1;
print Dumper param('venue'); 
```

# xslt - 匹配 XSLT 中的空格分隔值

> ID：14033801
> 
> 赞同：2
> 
> 时间：2012-12-25T20:29:37.267
> 
> 标签：xslt, xslt-1.0

项目的属性在@properties 属性中作为空格分隔的术语列出。还有一个属性的主列表。

```
<t>

   <items>
     <item id='a' properties='red little' />
     <item id='b' properties='big strong heavy' />
     <item id='c' properties='blue heavy' >
   </items>

   <properties>
     <property id='red' />
     <property id='little' />
     <property id='blue' />
   </properties>

</t> 
```

我的问题：使用 XLST 1.0，为模板编写一个匹配属性，该属性将匹配在属性主列表中至少具有一个属性的所有项目。

项目 a 和 c 将匹配。b项不会。

它是 XSLT 1.0，所以我不能使用 str:split。也许带有键和包含（）的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:15:35.683

你也可以用`<xsl:if>`吗？

```
<xsl:template match="item">
    <xsl:if test="/t/properties/property[contains(concat(' ', current()/@properties, ' '), concat(' ', @id, ' '))]">
        ...
    </xsl:if>
</xsl:template> 
```

不幸的是，`current()`不能在`match`属性内使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T22:39:35.997

使用 Michael Liu 的 XPath 表达式，您还可以构造一个键来匹配正确的元素：

```
<xsl:key name="inMaster" match="item" use="
    substring(
      '1',
      1,
      string-length(
        /t/properties/property[
          contains(concat(' ', current()/@properties, ' '), concat(' ', @id, ' '))
        ]/@id
      )
    )"/>

<!-- The following template matches the wanted item elements -->
<xsl:template match="key('inMaster','1')">
  ...
</xsl:template> 
```

我们使用该`substring()`函数将匹配`<item>`元素与字符串相关联`"1"`。所有不匹配的 item 元素都与空字符串相关联，因为没有匹配的“master”属性，因此没有`id`属性，因此`string-length()`为 0，因此我们提取长度为 0 的子字符串（即空字符串）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T22:58:45.020

**I. 使用键和`current()`:)**的另一种解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kItemByProp" match="item"
  use="boolean(/*/properties/property/@id
                 [contains(concat(' ', current()/@properties, ' '),
                           .)]
              )"/>

 <xsl:template match=
  "item[count(.| key('kItemByProp', 'true'))
       =
        count(key('kItemByProp', 'true'))
        ]
  ">
  <xsl:copy-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<t>
    <items>
        <item id='a' properties='red little' />
        <item id='b' properties='big strong heavy' />
        <item id='c' properties='blue heavy' />
    </items>
    <properties>
        <property id='red' />
        <property id='little' />
        <property id='blue' />
    </properties>
</t> 
```

**产生了想要的正确结果：**

```
<item id="a" properties="red little"/>
<item id="c" properties="blue heavy"/> 
```

* * *

**二、没有键，但有一个条件指令作为模板主体的最外层：**

```
 <xsl:template match="item">
  <xsl:if test=
  "/*/properties/*/@id
        [contains(concat(' ', current()/@properties, ' '), .)]">
    <!-- Your processing here -->
  </xsl:if>
 </xsl:template> 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="item">
  <xsl:if test=
  "/*/properties/*/@id
        [contains(concat(' ', current()/@properties, ' '), .)]">
    <xsl:copy-of select="."/>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<item id="a" properties="red little"/>
<item id="c" properties="blue heavy"/> 
```

# c++ - C ++从txt读取行，删除空格并保存到新文件

> ID：14033807
> 
> 赞同：1
> 
> 时间：2012-12-25T20:30:30.997
> 
> 标签：c++

我可以征求意见吗？请有人给出一个代码示例，它从第一个文本文件的行中删除空格并将“没有空格的新文本”保存到第二个文件中。我了解它可能是如何工作的，但我不会写它，因为我是编程的初学者。感谢您的任何建议。我的代码：

```
 //read csv file
         void readCSV(istream &input, vector< vector<string> > &output)
            {
                string csvLine;

                while(getline(input, csvLine) )
                {
                    istringstream csvStream(csvLine);
                    vector<string> csvColumn;
                    string csvElement;

                    while(getline(csvStream, csvElement) )
                    {
                        csvColumn.push_back(csvElement);
                    }       
                    output.push_back(csvColumn);
                }
            }

        //save all from csv to txt 
        void saveToTxt()
        {

            fstream file("file.csv", ios::in);

            ofstream outfile;
           outfile.open("file.txt");

            typedef vector< vector<string> > csvVector;
            csvVector csvData;

            readCSV(file, csvData);

            for(csvVector::iterator i = csvData.begin(); i != csvData.end(); ++i)
            {
                for(vector<string>::iterator j = i->begin(); j != i->end(); ++j)
                {

                    outfile<<*j<<endl;

                }

//code for deleting spaces, what i found, but i can't implement to above codes, coz my programming skill are not big

                   string s;   
                          while (getline( cin, s ))
                            {
                            s.erase(
                              remove_if(
                                s.begin(),
                                s.end(),
                                ptr_fun <int, int> ( isspace )
                                ),
                              s.end()
                              );

                            cout<<s<<endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T21:12:42.143

我喜欢不符合家庭作业要求的解决方案。下面是我将如何为规范编写代码，部分原因是我真的认为这是应该这样做的，部分原因是为了给其他人一些有趣的阅读。它还包含创建对教师友好的解决方案的所有必要提示：

```
#include <algorithm>
#include <cctype>
#include <iterator>

int main() {
    std::remove_copy_if(
        std::istreambuf_iterator<char>(std::ifstream("in.txt").rdbuf()),
        std::istreambuf_iterator<char>(),
        std::ostreambuf_iterator<char>(std::ofstream("out.txt").rdbuf()),
        [](unsigned char c){ return std::isspace(c) && c != '\n'; });
} 
```

如果您不能使用 C++ 2011 编译器，则需要将 lambda 函数替换为具有相同签名的实际函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T21:19:14.873

您可以通过使用与 相同的想法来简化此操作`remove_if`，但直接将其应用于确定是否要复制。类似于下面的代码。注意：未经测试，但我希望你明白这一点。

```
#include <iostream>
#include <iterator>
#include <fstream>
#include <functional>
#include <cctype>
using namespace std;

int main(int argc, char *argv[])
{
    ifstream is("file.csv", ios::in);
    ofstream os("file.txt", ios::out|ios::trunc);
    std::remove_copy_if(
        istream_iterator<char>(is),
        istream_iterator<char>(),
        ostream_iterator<char>(os),
        std::ptr_fun<int,int>(isspace));
    os.close();
    is.close();
    return 0;
} 
```

编辑：我不敢相信 Deitmar 和我有几乎相同的想法。

# visual-studio - 构建使用批处理文件的 Visual Basic 脚本

> ID：14033820
> 
> 赞同：0
> 
> 时间：2012-12-25T20:34:25.750
> 
> 标签：visual-studio, variables, vbscript, batch-file

我编写了一个批处理文件脚本，它从某个文件夹获取图像序列，使用 ffmpeg 将其转换为 quicktime，然后将文件移动到某个文件夹。

我在批处理脚本的开头使用变量来让用户输入从哪个文件夹中获取文件。

现在我的问题是：我编写的批处理工作得很好，但我想把它变成一个简单的可视化基本脚本，这样它看起来既漂亮又干净，而不是命令提示符界面。

任何人都可以为我提供有关 VB 代码的提示吗？如何将变量从 VB 传递到批处理文件？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:00:23.570

使用[HTML 应用](http://msdn.microsoft.com/en-us/library/ms536496%28v=vs.85%29.aspx)程序对 GUI 进行编程，以从用户那里收集所需的信息。使用 WScript.Shell 的 .Run 或 .Exec 方法启动外部进程（直接使用 .bat 或 ffmpeg）并通过命令行传递这些信息。

# oop - 如何在 RealBasic 上实现自省？

> ID：14033824
> 
> 赞同：2
> 
> 时间：2012-12-25T20:34:51.000
> 
> 标签：oop, introspection, realbasic

RealBasic 的 Introspection 与我的预期有点不同。

我的意图是：

创建一个 MainObject，其他对象将从中继承两三个方法，以进行简化。

`Method 1-> Returns to the child class itself all of its properties, types and values.`

`Method 2-> Would call Method1 and with the information, save the child Object.`

因此，对于方法 1，我考虑编写一个通用内省，对于每个子类，它可以轻松返回方法 2 完成工作所需的内容。

我为什么要这个？因此，我可以让数十个对象知道如何保存、绘制自己，而不必过多担心在此处或此处对属性等进行修改...

但是使用 RealBasic 教程和参考提供的东西是行不通的，因为它需要我让它发生在对象之外等......即：我可以很容易地在 ObjectA 内部获取 ObjectB 的属性、方法等，但我想进入ObjectA，A 的属性，而不是 B 的

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T08:37:04.630

我发现了如何...非常简单，创建 MainClass 并在其中创建一个简单的方法 WhoAmI，它可以返回数组、字典等...

```
 Dim thisClassTypeInfo As Introspection.TypeInfo = Introspection.GetType(Self)

  Dim thisClassProperties() As Introspection.PropertyInfo = thisClassTypeInfo.GetProperties

  Dim thisClassMethods() As Introspection.MethodInfo = thisClassTypeInfo.GetMethods

  For Each myProperty As Introspection.PropertyInfo In thisClassProperties

// Then here use myProperty.Name, myProperty.Value(Self).StringValue
// or myProperty.Value(Self).anyotheroption and create a dictionary 
// or array with the results and return it.

  Next 
```

# c++ - 将 std::tuple 转换为模板参数包

> ID：14033828
> 
> 赞同：10
> 
> 时间：2012-12-25T20:35:16.533
> 
> 标签：c++, c++11, tuples, variadic-templates

我有一个

```
typedef std::tuple<A, B> TupleType; 
```

并希望将类列表用于“模板”。

假设我有：

```
template<typename... args>
std::tuple<args...> parse(std::istream &stream) {
  return std::make_tuple(args(stream)...);
} 
```

并且我可以成功地使用它：

```
auto my_tuple = parse<A, B>(ifs); 
```

如果我已经有一个，是否可以避免必须指定类列表 A，B

```
typedef std::tuple<A,B> TupleType; 
```

列表 A,B 已经存在于哪里？

一个例子：

```
#include <cstdlib>  // EXIT_SUCCESS, EXIT_FAILURE
#include <iostream> // std::cerr
#include <fstream>  // std::ifstream
#include <tuple>    // std::tuple

class A {
public:
  A(std::istream &);  // May throw FooBaarException 
};

class B {
public:
  B(std::istream &); // May throw FooBaarException 
};

template<typename... args>
std::tuple<args...> parse(std::istream &stream) {
  return std::make_tuple(args(stream)...);
}

int main() {
  std::ifstream ifs;
  ifs.exceptions(ifstream::eofbit | ifstream::failbit | ifstream::badbit);
  int res = EXIT_FAILURE;
  try {
    ifs.open("/some/file/path", std::ios::in | std::ios::binary);
    auto my_tuple = parse<A, B>(ifs); // my_tuple is of the type std::tuple<A,B>
    /* Here do something interesting with my_tuple */ 
    res = EXIT_SUCCESS;
  } catch (ifstream::failure e) {
    std::cerr << "error: opening or reading file failed\n";
  } catch (FooBaarException e) {
    std::cerr << "error: parsing in a constructor failed\n";
  }
  return res;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T01:57:39.443

在您的情况下，潜在的问题似乎是`parse`当模板参数为`std::tuple`. 不幸的是，函数模板无法实现这种专业化。

但是，可以使用类模板。

因此，作为第一步，您可以定义`parse`为 a 的静态函数`struct`，如下所示：

```
using std::istream;
using std::tuple;
using std::make_tuple;

struct A { A(const istream &) {} };
struct B { B(const istream &) {} };

template <typename... Args>
struct parser
{
  /* Your original function, now inside a struct.
     I'm using direct tuple construction and an
     initializer list to circumvent the order-of-
     construction problem mentioned in the comment
     to your question. */
  static tuple<Args...> parse(const istream &strm)
  { return tuple<Args...> {Args(strm)...}; }
};

template <typename... Args>
struct parser<tuple<Args...>>
{
  /* Specialized for tuple. */
  static tuple<Args...> parse(const istream &strm)
  { return parser<Args...>::parse(strm); }
}; 
```

然后，您可以以所需的方式调用它：

```
int main()
{
  typedef tuple<A,B> tuple_type;
  auto tup = parser<tuple_type>::parse(std::cin);
  return 0;
} 
```

作为第二步，您可以（再次）定义一个函数模板，它将参数传递给结构的正确特化：

```
template <typename... Args>
auto parse(const istream &strm) -> decltype(parser<Args...>::parse(strm))
{ return parser<Args...>::parse(strm); } 
```

现在您可以按照您想要的方式使用它：

```
int main()
{
  typedef tuple<A,B> tuple_type;
  auto tup = parse<tuple_type>(std::cin);
  return 0;
} 
```

（而且您仍然可以以旧方式使用它：`auto tup = parse<A,B>(std::cin)`。）

* * *

评论。正如对 parser::parse() 的评论中提到的，我使用直接元组构造而不是`make_tuple`避免元组元素的构造顺序问题。这与您的问题没有直接关系，而是一件好事。了解[在使用 std::make_tuple 时如何避免构造函数的未定义执行顺序](https://stackoverflow.com/questions/14056000/how-to-avoid-undefined-execution-order-for-the-constructors-when-using-stdmake)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T22:37:13.227

这种事情有一个标准的成语。[1]

```
// Define the "shape" of the template
template<typename Tuple> struct TupleMap;
// Specialize it for std::tuple
template<typename...T> struct TupleMap<std::tuple<T...>> {
  using type = std::tuple<T...>;  // not necessary but saves typing
  // ... inside here, you have access to the parameter pac
} 
```

这是一个使用它的示例，它可能符合您的期望，也可能不符合您的期望（您的示例并没有真正表明您的预期用途，因为它缺少`typedef`您在问题中的承诺）：[liveworkspace.org](http://liveworkspace.org/code/NjIxND%240)。

由于[litb](https://stackoverflow.com/users/34509/johannes-schaub-litb)提出了这一点，因此可以强制以从左到右的顺序构造元组组件，这说明了另一个有趣的习语：梳状继承。参见[lws](http://liveworkspace.org/code/MTk2Nj%240)。

（由于 lws 可能会再次消失，谁知道呢，我也将代码粘贴在这里）：

```
#include <iostream>
#include <tuple>
#include <type_traits>
#include <utility>

// Define the "shape" of the template
template<typename Tuple> struct TupleMap;
// Specialize it for std::tuple
template<typename...T> struct TupleMap<std::tuple<T...>> {
   using type = std::tuple<T...>;  // not necessary but saves typing

   type value;

   template<typename Arg>
   TupleMap(Arg&& arg)
       : value(T(std::forward<Arg>(arg))...) {
   }

   operator type() { return value; }
};

//Try it out:
using std::get;  // Note 2
using Numbers = std::tuple<char, double, int>;

// Note 3
std::ostream& operator<<(std::ostream& out, const Numbers& n) {
   return out << get<0>(n) << ' ' << get<1>(n) << ' ' << get<2>(n);
}

int main() {
    std::cout << TupleMap<Numbers>(93.14159);
    return 0;
} 
```

* * *

[1] 至少，我认为这是一个标准的成语。我经常使用它，并将其视为“开罐器”模式。

[2] 这是需要的（或者至少，这是我的风格），以允许使用`get`在`std`. 这样做可以让 ADL 找到适当的定义，`get`而无需强迫我将专业化添加到`std::get`. 这样，它类似于`begin`and的标准 ADL 习语`end`。

[3] 你可以在 SO 中搜索一个很酷的 hack 来专门`operator<<`针对所有元组。有一个更简单的可以用于特定元组，但这对于这个问题来说都是题外话，所以我只是做了一些简单且无依赖的事情。请注意，这是因为转换运算符在`TupleMap`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T20:48:19.977

基本方法是创建一系列索引`0, ..., std::tuple_size<Tuple>::value - 1`作为参数包`Indices`，并使用`parse<typename std::tuple_element<Tuple, Indices>::type...>(stream)`. 您可能会将逻辑封装到一个函数`parse_tuple<Tuple>(stream)`（以及这个委托给的某个函数）中，最终委托给`parse<...>(stream)`.

首先，这是一个类模板和一个函数，用于根据 a 的大小创建一系列索引`std::tuple`。需要索引才能从 获取类型列表`std::tuple`：

```
template <int... Indices> struct indices;
template <> 
struct indices<-1> {                // for an empty std::tuple<> there is no entry
    typedef indices<> type;
};
template <int... Indices>
struct indices<0, Indices...> {     // stop the recursion when 0 is reached
    typedef indices<0, Indices...> type;
};
template <int Index, int... Indices>
struct indices<Index, Indices...> { // recursively build a sequence of indices
    typedef typename indices<Index - 1, Index, Indices...>::type type;
};

template <typename T>
typename indices<std::tuple_size<T>::value - 1>::type const*
make_indices() {
    return 0;
} 
```

有了这个，很容易从 a 中提取类型序列`std::tuple<T...>`：

```
template<typename T, int... Indices>
T parse_tuple(std::istream &stream, indices<Indices...> const*) {
    return parse<typename std::tuple_element<Indices, T>::type...>(stream);
}
template <typename T>
T parse_tuple(std::istream& stream) {
    return parse_tuple<T>(stream, make_indices<T>());
} 
```

# c# - 这个条件运算符有什么问题？

> ID：14033831
> 
> 赞同：0
> 
> 时间：2012-12-25T20:35:55.993
> 
> 标签：c#, visual-studio-2010, c#-4.0

```
protected void MakeAutoComplete(ref Control control, IListSource dListSource)
    {
        MakeAutoComplete(ref control, dListSource, false);
    }

protected void MakeAutoComplete(ref Control control, IListSource dListSource, bool isComboBox)
    {
        var curControl = (isComboBox) ? (control as ComboBox) : (control as TextBox);
        // other
    } 
```

在`var curControl`VS 的线上给了我错误 `Type of conditional expression cannot be determined because there is no implicit conversion between 'System.Windows.Forms.ComboBox' and 'System.Windows.Forms.TextBox'`，我可以理解错误，而且我知道没有强制转换`TextBox`和`ComboBox`，但这就是我`var`首先使用的原因。所以有什么问题？为什么抱怨？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T20:39:13.890

`var`不是动态类型，它只是告诉编译器“你弄清楚类型”并让它决定的一种方便方式。尽管它是在编译时决定的，但它始终是*单一*类型，因此在运行时您将无法让它成为“这种类型或那种类型”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T20:42:26.240

C# 编译器需要能够在编译时计算条件的类型。关键字只是意味着编译器`var`会自动为你选择类型，但它仍然需要能够在编译时计算它。

`TextBox`由于or之间没有隐式转换`ComboBox`，编译器不知道条件的返回类型应该具有哪种类型。

要解决此问题，您需要将其转换为通用类型：

```
var curControl = (isComboBox) ? (control as Control) : (control as Control); 
```

但是，您将不需要条件 ....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T20:37:11.403

它失败的原因是因为两个分支的类型不一样。三元运算符`? :`要求两个分支返回相同的类型，以便可以将结果分配给左侧。

尽管毫无意义，但以下将是一个有效的分配。

```
var curControl = (isComboBox) ? (control as Control) : (control as Control); 
```

请注意，正如其他人指出的那样，关键字*var*不是动态类型，而是一种语法快捷方式，用于告诉**编译器**（不是运行时）根据右手表达式确定变量的类型 -*在编译时，而不是在运行时*。

* * *

或者，您可以编写如下内容：

```
ComboBox curControlCombo = null;
TextBox curControlText = null;

if(isComboBox)
  curControlCombo = (control as ComboBox);
else
  curControlText = (control as TextBox); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T21:31:20.887

这都是关于三元运算符的，与关键字`?:`无关。`var`所有这些示例都给出了相同的编译时错误：

```
var curControl = (isComboBox) ? (control as ComboBox) : (control as TextBox);
Control curControl = (isComboBox) ? (control as ComboBox) : (control as TextBox);
object curControl = (isComboBox) ? (control as ComboBox) : (control as TextBox);
dynamic curControl = (isComboBox) ? (control as ComboBox) : (control as TextBox);
Whatever curControl = (isComboBox) ? (control as ComboBox) : (control as TextBox); 
```

如果您说例如，您也会收到错误消息：

```
((isComboBox) ? (control as ComboBox) : (control as TextBox)).ToString(); 
```

或任何类似的东西。运算符需要在冒号的`?:`任一侧找到两个参数的共同类型`:`。因此类型必须相同，或者其中一种类型必须可转换为另一种类型（例如，另一种类型可以是它的基类）。

**但是你想达到什么目的？**使用`as`关键字的标准方法如下：

```
var comboBoxControl = control as ComboBox;
if (comboBoxControl != null)
{
  // great, it's a ComboBox. Do all kinds of things special for ComboBox
  // by using the comboBoxControl variable
}
// here you can do things general to all controls
// by using the original variable control 
```

在上面的例子中，`control`有*compile-time type* `Control`，并且`comboBoxControl`有*compile-time type* `ComboBox`。

运行时类型是另一回事。的运行时类型`control`可以是 null，`Control`（它不是一个`abstract`类！），或者任何从`Control`. 与`comboBoxControl`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T20:40:21.383

最好通过询问`curControl`语句执行后的类型来回答这个问题。我们唯一能说的是候选人有一个共同的类型`System.Windows.Forms.Control`。因为 c# （主要）是静态类型的，所以编译器需要`curControl`在编译时解析 's 的类型。`var`并不意味着动态类型。它直接等同于声明一个显式类型，而是由编译器推断（*在编译时*）。目前，您的代码不明确，因此编译器会抱怨。

# python - 在正则表达式返回中避免内部组

> ID：14033832
> 
> 赞同：0
> 
> 时间：2012-12-25T20:36:04.527
> 
> 标签：python, regex, findall

我正在进行 html 提取，并且在次要职责中使用正则表达式。我正在使用 python`re`模块，我想避免在需要定义组时返回内部组 - 或者至少在似乎需要时。

例如，考虑以下字符串：

```
line = u" 07.49 (43 votes) " 
```

和表达式：

```
expr = lambda x: re.findall("(\d+(\.\d{1,2})?)\D*(\d+)", x) 
```

应用程序的返回是：

```
expr(line)
[(u'7.49', u'.49', u'43')] 
```

我希望得到以下结果：

```
expr(line)
[(u'7.49', u'43')] 
```

但我需要在 中定义内部组`(\.\d{1,2})?`，`"(\d+(\.\d{1,2})?)\D*(\d+)"`因为数字的小数部分可能不会出现。

有没有办法避免这个*额外的群体*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:36:57.043

绝对地。请改用非捕获组。

```
(\d+(?:\.\d{1,2})?)\D*(\d+) 
```

# android - 如何在andengine中随机移动精灵

> ID：14033839
> 
> 赞同：0
> 
> 时间：2012-12-25T20:37:10.503
> 
> 标签：android, andengine

我想知道在andengine中随机移动精灵的方法是什么？我想让球在我的比赛中像“布朗运动”一样在随机方向上连续移动。

我已经搜索了很多，并试图通过使用 MoveModifier 来获得它，但不幸的是那没有用....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T17:22:11.570

查看移动球示例，您只制作了一个类扩展 Sprite 或 AnimatedSprite，稍后您只在 X 和 Y 速度中设置随机值：

```
private static class Ball extends AnimatedSprite {
            private final PhysicsHandler mPhysicsHandler;
                    Random randomGenerator = new Random();
                    private float RandomX;
                    private float RandomY;
                    private int CAMERA_WIDTH=720;
                    private int CAMERA_HEIGHT=480; 
            public Ball(final float pX, final float pY, final TiledTextureRegion pTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager) {
                super(pX, pY, pTextureRegion, pVertexBufferObjectManager);
                this.mPhysicsHandler = new PhysicsHandler(this);
                this.registerUpdateHandler(this.mPhysicsHandler);
                            RandomX =randomGenerator.nextInt(3);
                            RandomY =randomGenerator.nextInt(3);
                            RandomX=RandomX*100;  
                            RandomY=RandomY*100;
                this.mPhysicsHandler.setVelocity(RandomX, RandomY);
            }

            @Override
            protected void onManagedUpdate(final float pSecondsElapsed) {
                if(this.mX < 0) {
                    this.mPhysicsHandler.setVelocityX(RandomX);
                } else if(this.mX + this.getWidth() > CAMERA_WIDTH) {
                    this.mPhysicsHandler.setVelocityX(-RandomX);
                }

                if(this.mY < 0) {
                    this.mPhysicsHandler.setVelocityY(RandomY);
                } else if(this.mY + this.getHeight() > CAMERA_HEIGHT) {
                    this.mPhysicsHandler.setVelocityY(-RandomY);
                }

                super.onManagedUpdate(pSecondsElapsed);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T06:08:08.273

您可以像“Vinicius DSL”所说的那样使用box2d，也可以通过覆盖onUpdate [或onManagedUpdated]并从那里更改它们的x和y位置来手动移动球

# html - HTML CSS 按钮悬停无法通过类工作

> ID：14033840
> 
> 赞同：3
> 
> 时间：2012-12-25T20:37:16.777
> 
> 标签：html, css, class, button, hover

我不明白为什么会这样：

```
.button:active {
    position:relative;
    top: 2px;
    left:2px;
} 
```

但这不起作用：

```
.button:hover { 
    font-size:17px;
} 
```

它在我使用 id 时有效，但我希望它为所有按钮激活：

```
#btnhome:hover{
    font-size:17px;
} 
```

这工作正常，但上课它不会？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:42:07.090

使用`id`它并且它确实有效，因此肯定与特异性有关，过度骑行，试试这个

[**演示**](http://jsfiddle.net/yAU22/)

[**演示 + !important**](http://jsfiddle.net/yAU22/)

```
.button:hover { 
    font-size:17px !important; /* Actually you don't even need !important */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:38:55.633

尝试：
`.button *:hover { font-size:17px; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T17:43:31.567

这是特异性。ID 优先于伪样式。您需要重写 CSS 以使其更通用，并且只将唯一值放在 ID 上或使用 ID 加上伪选择器。

我从 ID 中取出了常见的东西并将它们移到了一个基本的 .button 类中：

```
.button{
    width: 84px;
    height: 46px;
    background-color:#000;
    border: none;
    color: white;    
    font-size:14px;
    font-weight:700;
}
.button:hover { 
     font-size:17px;
} 
```

查看这个小提琴以查看它的实际效果：http: [//jsfiddle.net/kJfmR/](http://jsfiddle.net/kJfmR/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T20:55:58.290

肯定有一个外部 .css 文件由您通过使用**链接**标签包含，其中`.button:hover {font-size:somethingelse !important;}`定义。这就是为什么除非再次使用 !important 才能更改它。

# ruby-on-rails - 在数据库中存储 Rails 部分

> ID：14033849
> 
> 赞同：1
> 
> 时间：2012-12-25T20:38:30.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, partial-views, erb

我需要让用户能够创建由 HTML 和表单元素组成的课程。我希望他们能够利用 Rails 的表单助手和通用 Ruby 代码，例如，决定在哪里以及如何显示错误内容。我意识到授予他们执行 Ruby 代码的访问权限存在安全问题，但如果用户将共享部署，我将不得不稍后处理这个问题。

所以看来我应该将 ERB 文件存储在数据库中，并以某种方式调用它们`<%= render content_from_database %>`。这可能吗？我会以某种方式影响 Rails 缓存吗？

使用最新的 Rails 和 Heroku（不写入文件系统）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T22:10:18.880

你应该看看[Liquid 模板语言](http://liquidmarkup.org/)

从他们的标语：

> 用于渲染安全模板的 Ruby 库，不会影响渲染它们的服务器的安全性。

# magento - Magento：大规模更新“使用默认值”

> ID：14033850
> 
> 赞同：3
> 
> 时间：2012-12-25T20:38:34.320
> 
> 标签：magento

我需要在某个商店视图中设置几百个产品属性以“使用默认”值。我怎样才能做到这一点？

另外，由于我有两个以上的商店视图，将通用属性设置为“全局”然后返回“正常”的方法效率低下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T21:01:10.853

我认为这个链接应该可以帮助你： http: [//www.magentocommerce.com/boards/viewthread/55480/](http://www.magentocommerce.com/boards/viewthread/55480/)

在第二条评论中，您可以看到如何为您的目录设置商店 ID。

```
$products = Mage::getModel('catalog/product')->setStoreId(2)
            ->getCollection()
            ->addAttributeToSelect('price');

foreach($products as $p) {
    // ...
    $p->setPrice($price);
    $p->save();
} 
```

# javascript - 如何在不使用 URL 的 javascript 中唯一标识网页

> ID：14033851
> 
> 赞同：0
> 
> 时间：2012-12-25T20:38:46.747
> 
> 标签：javascript, url, cookies, identity

我有一个有趣的情况。我有一个使用 MVC 框架向用户提供视图的应用程序。这对于整体设计来说非常有用。

虽然有皱纹。在某些时候，用户可能在一个页面上做某事，他们将被要求转到另一个页面来执行查找服务。我需要能够唯一标识他们访问的每个页面，但我无法使用 URL，因为我从父页面访问的所有后续页面都具有相同的 URL。

仅供参考，我关心这一点，因为我试图将每个页面上最后已知的滚动位置存储在 cookie 中。

例子 -

他们正在处理页面 A。

他们单击来自 A 的链接，然后被带到页面 B。

在页面 B 上，他们输入一些值并单击搜索，这将查询数据库

返回结果列表。

然后他们可以选择这些搜索结果之一的“返回值”。

然后将该值返回到页面 A。

当我在每个页面（A和B）上运行以下内容时 -

```
alert("${channelUrl}"); 
```

他们是完全匹配的！

我还能做些什么来确定我在我的 javascript 中的哪个页面，而无需进行任何类型的服务器端 AJAX 调用等......？

我要问的甚至可能吗？

目前我正试图通过计算页面上文本字段的数量并将其附加到我的 cookie 名称来解决这个问题。这并不理想，尤其是当用户访问的页面恰好具有相同数量的文本字段时。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:46:53.253

处理此类事情的一种常见方法是在新窗口中打开第二页。使用这种方法，父窗口和子窗口知道哪个是哪个（子窗口将父窗口称为 window.opener，父窗口通过 open 调用的返回值引用子窗口），因此无需管理 URL 或任何需要保留的东西追踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:21:24.957

人们经常使用 URL 之后的部分`#`来跟踪您在单个 URL 下的位置。这是内置支持的，`<a href="#my-section">My Section</a>`它会将您带到具有 id 的元素`"my-section"`，但您可以使用库以其他方式控制 URL 的这一部分。

# ruby-on-rails - Rails 用点创建格式错误的路线

> ID：14033853
> 
> 赞同：7
> 
> 时间：2012-12-25T20:39:01.150
> 
> 标签：ruby-on-rails, routing

我正在使用路径辅助方法在 link_to 中生成 URL，它们返回的 URL 格式如下：

```
http://localhost:3000/tweets.4 
```

当我期望它们的格式如下时：

```
http://localhost:3000/tweets/4 
```

请注意它如何使用点作为分隔符而不是预期的正斜杠。顶部链接无法解析为正确的视图，它只是重新加载 /tweets 视图。当我手动将 URL 编辑为底部时，它会打开正确的 /tweets/show/。

我在在线研究中发现的最接近的事情是人们遇到了错误嵌套的路由语句 - 但我不认为我在这里这样做。

我将不胜感激任何人可以提供的任何帮助或指示！

以下是相关的源文件和版本信息：

**推文/index.html.erb**

```
<h1>Listing tweets</h1>

<% @tweets.each do |tweet| %>
<div>
    <!-- creates path in format of /tweets.2 -->
    <div><%= link_to tweet.status, tweets_path(tweet) %></div>

    <!-- creates path in the format of /user.1 -->
    <div><%= link_to tweet.user.name, users_path(tweet.user) %></div>   
</div>
<% end %> 
```

**tweets_controller.rb**

```
class TweetsController < ApplicationController

  def index
    @tweets = Tweet.all
  end

  def show
    @tweet = Tweet.find(params[:id])
  end

  def new
    @tweet = Tweet.new
  end

  def create
    @tweet = Tweet.new(params[:tweet])
    @tweet.user = User.last

    if(@tweet.save)
      redirect_to :root
    end  
  end

  def edit
    @tweet = Tweet.find(params[:id])
  end

  def delete
  end

end 
```

**路线.rb**

```
Zombietweets::Application.routes.draw do
  resources :tweets
  root :to => 'tweets#index'
end 
```

**宝石文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
end

group :assets do
  gem 'sass-rails',   '3.2.3'
  gem 'coffee-rails', '3.2.1'
  gem 'uglifier', '1.0.3'
end

gem 'jquery-rails', '2.0.2' 
```

我正在使用 Rails 3.2.9 和 Ruby 1.9.3p327 (2012-11-10) [x86_64-darwin12.2.0]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T20:46:27.880

你试过`tweet_path`吗`user_path`？

您想要访问显示操作。对于该操作，模型名称在 *_path 调用中必须是单数。

可以肯定的是，`rake routes`在控制台中尝试 a 。

**编辑：** 您也忘记添加`resources :users`您的路线文件:)

# jquery - jQuery ajax post 请求发送数据的格式是什么，如何通过 Flask 的请求对象访问它？

> ID：14033857
> 
> 赞同：2
> 
> 时间：2012-12-25T20:39:19.087
> 
> 标签：jquery, python, ajax, flask, jqxhr

我正在创建一个使用 jQuery 的 $.post() 对象发送 XHR AJAX 请求的网页。该帖子正在由另一个域上的 Flask 应用程序接收。Javascript如下：

```
$.post('http://myurl.com/create', {
     'title': sender.title,
      'url': sender.url
}); 
```

适用的 Flask 路由器代码为：

```
@app.route('/create', methods=['GET', 'POST'])
@crossdomain(origin='*')
def create():
    print(request.args.get('title'))
    if request.method == 'POST':
        title = request.form['title']
        url = request.form['url']

        new_mark = Mark(
            title=title,
            url=url
        )
        new_mark.save()

        return redirect(url_for('index')) 
```

当表单提交到 url 时，Python 运行良好，但当我通过 jQuery 的 AJAX 对象进行 POST 时却不行。每次我尝试发出 AJAX 请求时都会引发 400 错误。我查看了 Flask 的 request.args 对象，但在发出请求时它没有任何内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:47:28.650

问题是您的 Ajax 请求未配置为针对跨域请求。我建议使用 $.ajax 而不是 $.post 以获得更大的灵活性并在您的请求配置中设置 crossDomain: true 。

```
$.ajax({
  type: 'POST',
  url: 'http://myurl.com/create',
  crossDomain: true,
  data: '{'title': sender.title, 'url': sender.url}',
  dataType: 'jsonp',
  success: function(responseData, textStatus, jqXHR) {
    // Success Callback
  },
  error: function (responseData, textStatus, errorThrown) {
    // Error Callback
  }
}); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:26:10.070

我很蠢。我实际上并没有发送任何数据，因为 sender.url 和 sender.title 不包含任何值-_-。

# c++ - 为什么这个编译，但没有链接？

> ID：14033862
> 
> 赞同：2
> 
> 时间：2012-12-25T20:41:06.030
> 
> 标签：c++, linker, virtual

```
#include <iostream>
using namespace std;

class C
{
public:
    virtual void a();
};

class D : public C
{
public:
    void a() { cout<<"D::a\n"; }
    void b() { cout<<"D::b\n"; }
};

int main()
{
    D a;
    a.b();

    return 0;
} 
```

我收到有关`undefined reference to 'vtable for C'`. 这是什么意思，为什么？

我知道问题显然是基类有一个从未定义过的非纯虚函数，但是如果我从不调用它，为什么这会打扰链接器呢？为什么它与我声明但未定义的任何其他函数不同，如果我从不调用它我很好？
我对细节*很感兴趣。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T20:47:19.300

C++ 编译器的大多数实现都会为每个类生成一个*vtable*，它是一个虚函数的函数指针表。与任何其他数据项一样，vtable 只能有一个定义。一些 C++ 编译器在编译类型中*第一个*声明的虚函数的实现时会生成这个 vtable（这保证了 vtable 只有一个定义）。如果您未能为第一个虚函数提供实现，则编译器不会生成 vtable，并且链接器会抱怨缺少 vtable 并出现链接错误。

如您所见，具体细节取决于您选择的编译器和链接器的实现。并非所有工具链都是相同的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T20:44:35.417

问：我知道问题显然是基类有一个从未定义过的非纯虚函数

答：这就是你问题的答案:)

问：为什么它与我声明但未定义的任何其他函数不同，即如果我从不调用它就可以了？

A：因为它不仅仅是一个“功能”。这是一个*虚拟类方法*。

建议：

*   声明三个不同的类：

    1）简单的方法

    2）一个虚拟方法（如你上面的“C”）

    3）抽象虚方法（=0）

*   生成汇编输出（例如 GCC 的“-S”）

*   比较这三种情况。仔细注意是否创建了 *constructor" :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T21:10:34.047

如果你想`C`成为一个纯虚拟基类，你需要告诉编译器“不会有`a()`”的实现，你可以通过`... a() = 0;`类的声明来做到这一点。编译器试图找到一个基类 vtable，但没有一个！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T21:37:03.003

在几种情况下可能会出现对实际函数定义的需求。您已经命名了其中一种情况：如果您*调用*该函数，则必须对其进行定义。然而，这还不是全部。考虑这段代码

```
void foo();

int main() {
  void (*p)() = &foo;
} 
```

此代码从不调用`foo`. 但是，如果您尝试编译它，典型的编译器会抱怨`foo`在链接阶段缺少定义。因此，*获取*函数的地址（即使您从未调用它）恰好是必须定义函数的情况之一。

这就是虚函数的用武之地。虚函数通常是通过一个虚表实现的：一个包含指向虚函数定义的指针的表。该表由编译器无条件地预先形成和初始化，无论您是否实际调用函数。编译器本质上会隐式地获取程序中每个非纯虚函数的地址，并将其放入相应的表中。出于这个原因，每个非纯虚函数都需要一个定义，即使你从未调用它。

确切的虚拟机制是一个实现细节，因此您可能会遇到不同的特定错误（例如缺少函数定义或缺少虚拟表本身），但这些错误的根本原因是我上面描述的。

# ruby-on-rails - has_many 通过不保存的多个复选框

> ID：14033863
> 
> 赞同：0
> 
> 时间：2012-12-25T20:41:11.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不确定为什么我的 has_many through 复选框没有保存。这是一个相当复杂的表格（语言暑期课程的在线申请），所以除了常规的申请人信息外，我还使用 fields_for 收集 LanguageBackgroundAndInterest 模型的属性。这些属性的一部分是申请人用来学习语言的书籍。代码如下所示：

```
 <%= f.fields_for :language_background_and_interest do |builder| %>
      <div class="field"> 
      <%= hidden_field_tag "language_background_and_interest[book_ids][]" %>
      <% Book.all.each do |book| %>
        <br><%= check_box_tag "language_background_and_interest[book_ids][]", book.id %>
        <%= book.name.humanize %>
      <% end %>
      </div>
    <% end %> 
```

language_background_and_interest 和书籍都使用 has_many_through 连接在一起，如下所示：

```
class LanguageBackgroundAndInterest < ActiveRecord::Base
  attr_accessible :book_ids

  has_many :language_background_books
  has_many :books, through: :language_background_books
end

class Book < ActiveRecord::Base
  attr_accessible :name, :publisher

  has_many :language_background_books
  has_many :language_background_and_interests, through: :language_background_books
end

# Join Table
class LanguageBackgroundBook < ActiveRecord::Base
  attr_accessible :language_background_and_interest_id, :book_id
  belongs_to :language_background_and_interest
  belongs_to :book
end 
```

我不确定为什么复选框中的书籍没有分配给适当的背景模型。有任何想法吗？

PS：诚然，这个设计有点模棱两可（为什么不让书属于申请人？），但我目前想建立一个原型，我也受到一个可疑要求的限制。所以我需要这个工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:35:49.850

我最终审查了我的模型设计并简化了它。我还切换到简单表单以简化处理复杂表单的工作。

# shell - jboss7 启动/关闭的 shell 脚本失败，出现“文件意外结束”语法错误

> ID：14033872
> 
> 赞同：0
> 
> 时间：2012-12-25T20:43:03.977
> 
> 标签：shell, ubuntu, jboss

根据一个网站，我在 --> /etc/init.d/jboss 创建了一个简单的 shell 脚本

此 shell 脚本用于在 Ubuntu 12.04 64 位中启动/关闭 JBoss AS 7.1.1

但是当我尝试运行脚本时，我收到一个错误“语法错误：文件意外结束”，它提到了文件的最后一行。

我使用 vim 创建了上面的文件，文件的内容如下 - 我在这里做错了什么？

```
#Required-Start:    $local_fs $remote_fs $network $syslog
#Required-Stop:     $local_fs $remote_fs $network $syslog
#Default-Start:     2 3 4 5
#Default-Stop:      0 1 6
#Short-Description: JBOSS 7.1.1 Startup/Shutdown Script
### END INIT INFORMATION

case "$1" in
    start)
           echo "Starting JBOSS AS 7.1.1"
           sudo -u root sh /usr/share/jboss-as-7.1.1/bin/standalone.sh
    ;;
    stop)
           echo "Stopping JBOSS AS 7.1.1"
           sudo -u root sh /usr/share/jboss-as-7.1.1/bin/jboss-admin.sh --connect     command=:shutdown
    ;;
    *)
           echo "Usage: /etc/init.d/jboss {start|stop}"
           exit 1
    ;; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:44:55.933

你缺少`esac`平衡`case`。

# android - 在 Java 中将 TextView 的宽度更改为 wrap_content

> ID：14033875
> 
> 赞同：0
> 
> 时间：2012-12-25T20:43:15.547
> 
> 标签：android, textview

我正在尝试将 TextView 的宽度更改为`wrap_content`.

到目前为止，我尝试过的是：

```
TextView txt = (TextView) findViewById(R.id.txtViewContents);
txt.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

但是当它运行时，应用程序崩溃了，这就是我在 logcat 中得到的：

```
E/AndroidRuntime(2213): FATAL EXCEPTION: main
E/AndroidRuntime(2213): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams cannot be cast to android.support.v7.widget.GridLayout$LayoutParams
E/AndroidRuntime(2213):     at android.support.v7.widget.GridLayout.computeLayoutParamsHashCode(GridLayout.java:872)
E/AndroidRuntime(2213):     at android.support.v7.widget.GridLayout.checkForLayoutParamsModification(GridLayout.java:879)
E/AndroidRuntime(2213):     at android.support.v7.widget.GridLayout.onMeasure(GridLayout.java:927)
E/AndroidRuntime(2213):     at android.view.View.measure(View.java:15513)
E/AndroidRuntime(2213):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
E/AndroidRuntime(2213):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
E/AndroidRuntime(2213):     at android.view.View.measure(View.java:15513)
E/AndroidRuntime(2213):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
E/AndroidRuntime(2213):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
E/AndroidRuntime(2213):     at android.view.View.measure(View.java:15513)
E/AndroidRuntime(2213):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
E/AndroidRuntime(2213):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
E/AndroidRuntime(2213):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
E/AndroidRuntime(2213):     at android.view.View.measure(View.java:15513)
E/AndroidRuntime(2213):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
E/AndroidRuntime(2213):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
E/AndroidRuntime(2213):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
E/AndroidRuntime(2213):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
E/AndroidRuntime(2213):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
E/AndroidRuntime(2213):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
E/AndroidRuntime(2213):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
E/AndroidRuntime(2213):     at android.view.Choreographer.doFrame(Choreographer.java:532)
E/AndroidRuntime(2213):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
E/AndroidRuntime(2213):     at android.os.Handler.handleCallback(Handler.java:725)
E/AndroidRuntime(2213):     at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(2213):     at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(2213):     at android.app.ActivityThread.main(ActivityThread.java:5039)
E/AndroidRuntime(2213):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(2213):     at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(2213):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(2213):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(2213):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:46:15.107

试试吧

```
setLayoutParams(new android.support.v7.widget.GridLayout.LayoutParams( android.support.v7.widget.GridLayout.LayoutParams.WRAP_CONTENT, android.support.v7.widget.GridLayout.LayoutParams.WRAP_CONTENT)); 
```

`android.support.v7.widget.GridLayout.LayoutParams`或者只是从头开始导入。现在，导入是 for `ViewGroup.LayoutParams`，这不是 GridLayout 用于布局参数的。

**编辑：**由于您已经`ViewGroup.LayoutParams`像原来一样使用了这些参数，而是将它们分配给一个变量，所以我们调用它`viewGroupParams`（所以保留`ViewGroup.LayoutParams`导入）然后执行以下操作：

```
android.support.v7.widget.GridLayout.LayoutParams newParams = new android.support.v7.widget.GridLayout.LayoutParams (viewGroupParams); 
```

最后

```
txt.setLayoutParams (newParams); 
```

# objective-c - 通知日历事件的变化

> ID：14033879
> 
> 赞同：0
> 
> 时间：2012-12-25T20:44:03.253
> 
> 标签：objective-c, xcode, nsnotificationcenter, eventkit

我想在我的应用程序处于后台时收到通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(calendarChanged:) name:EKEventStoreChangedNotification object:nil]; 
```

我试图实现它，但 ( `calendarChanged:`) 从来没有被调用过？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:07:48.080

1.  您应该在注册通知观察者时指定 EKEventStore 对象

2.  在后台不会调用您的方法，一旦您的应用程序进入前台，它将被调用。

取自[这个问题](https://stackoverflow.com/questions/4122363/responding-to-ekeventstorechangednotification)，**搜索**选项并没有什么坏处。

# javascript - 试图克隆一个表单并增加克隆的 id

> ID：14033880
> 
> 赞同：0
> 
> 时间：2012-12-25T20:44:24.263
> 
> 标签：javascript, html, clone

```
function moreFields() {
     counter++;
     var newFields = document.getElementById("input").cloneNode(true);
     newFields.id = counter;
     newFields.style.display = 'block';
     var newField = newFields.childNodes;
     for (var i=0;i<newField.length;i++) {
         var theName = newField[i].id;
         if (theName) {
             newField[i].id = theName + counter;
            }
        }
     var insertHere = document.getElementById("buttons");
     insertHere.parentNode.insertBefore(newFields,insertHere);
}

function clear() {
     var count = counter;
     while (count>0) {
         var pricetxt = document.getElementById('price'+count);
         pricetxt.value = "";
         var qtytxt = document.getElementById('qty'+count);
         qtytxt.value = "";
         count--;
        }
} 
```

这是页面的jsfiddle

[http://jsfiddle.net/xjsc16x/TctQx/1/](http://jsfiddle.net/xjsc16x/TctQx/1/)

对不起，我知道它很大，但我不知道出了什么问题。moreFields 函数正确复制字段（只有 2 个文本框），但我不确定它是否正确地实现了递增的 id。

我认为我的 clear 功能正确，但它无法读取 ID？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T20:55:44.823

更改名称，`clear()`它的工作原理。你遇到了一个javascript保留字，`clear`是一个window方法

演示：http: [//jsfiddle.net/TctQx/3/](http://jsfiddle.net/TctQx/3/)

# jquery - 使用 JQuery 循环 [same_class_name] 元素，然后根据其值将一些文本附加到每个元素

> ID：14033891
> 
> 赞同：0
> 
> 时间：2012-12-25T20:46:42.387
> 
> 标签：jquery, html, dom

我的 HTML 看起来像这样：

```
<li class="price">
  <em>29.00</em>
  <span class="shipping">Shipping:12.00</span>
  <span class="comments"></span>
</li>

<li class="price">
  <em>12.00</em>
  <span class="shipping">Shipping:4.00</span>
  <span class="comments"></span>
</li> 
```

这种模式在页面上重复大约 9-15 次。

我想提取这两个数字（`<li>`例如，第一个数字是 29.00 和 12.00）并将它们彼此相加（29+12=41），将结果乘以 2，然后添加一个显示该结果的新元素（之后每个`<li>`）。

当然，每个人都`<li>`应该有自己的结果。

## -------------------------------------------------- --------------------------------------

终于让整个事情一起工作了！

## （非常感谢 dasfisch & Barmar）：

* * *

```
$(document).ready(function() {

var finalPrice = 0;

jQuery('.price').each(function(i) {
    var myProductPrice = parseFloat(jQuery(this).children('em').html());
    var myShippingPriceString = jQuery(this).children('.shipping').html();

//find the numeric portion of the string (decimal number)
var re = new RegExp();
re.compile("([0-9]+\.[0-9]*)");
var myShippingPrice = parseFloat(myShippingPriceString.match(re)[0]);

finalPrice = ((myProductPrice+myShippingPrice)*2).toString(); //your maths

jQuery(this).append('<li>  product price: ' + myProductPrice + '</li>');
jQuery(this).append('<li>  shipping price: ' + myShippingPrice + '</li>');
jQuery(this).append('<li>  ==============</li>');
jQuery(this).append('<li>  final price: ' + finalPrice + '</li>'); //change this to whatever HTML you want; the append is the important part
jQuery(this).append('<br><br>');
});

});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:53:44.127

为什么不使用 jQuery 的内置函数来遍历 DOM？

试试这个：

```
var finalPrice = 0;

jQuery('.price').each(function(i) {
    var myProductPrice = parseFloat(jQuery(this).children('em').html());
    var myShippingPrice = parseFloat(jQuery(this).children('.shipping').html()); // you need to strip out the Shipping: text, too.

    finalPrice = ((myProductPrice+myShippingPrice)*2).toString(); //your maths

    jQuery('.yourUlElement').append('<li>' + finalPrice + '</li>'); //change this to whatever HTML you want; the append is the important part
}); 
```

# multithreading - 如何在线程完成运行之前停止它？

> ID：14033894
> 
> 赞同：5
> 
> 时间：2012-12-25T20:47:05.010
> 
> 标签：multithreading, delphi

我有一个名为 TMyThread 的线程，我像这样覆盖了 Execute 过程：

```
 procedure TMyThread.Execute;
 Begin
     repeat
     //Some Work 
     Sleep(5000);
     //Some Work 2;
     Sleep(5000); 
     until FActive=False
 End; 
```

在主窗体中，我有一个名为“销毁我的线程”的按钮。我想销毁我的线程，但问题是我的线程只有在完成工作后才会被销毁。我想销毁我的线程，即使它还没有完成它的工作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-25T20:50:33.067

您的线程`Execute`方法必须定期检查线程`Terminated`属性的状态。如果是`True`，则线程`Execute`方法必须退出。

因此，典型的`Execute`方法可能如下所示：

```
procedure TMyThread.Execute;
begin
  while not Terminated do
    DoNextPieceOfWork
end; 
```

看起来您的线程有自己的`FActive`标志，正在执行相同的任务。问题在于`TThread`它不知道。因此，您应该摆脱`FActive`并使用内置机制。

当您调用`Free`线程时，它将调用`Terminate`. 那将`Terminated`是`True`。然后它等待线程方法退出。这会发生，因为您的线程注意到它`Terminated`并`True`退出。然后线程的析构函数可以继续并完成整理线程的工作。

* * *

查看答案中的代码，最好使用现有`Terminate`机制编写。

```
type
  TMyThread = class(TThread)
  private
    FTerminateEvent: TEvent;
  protected
    procedure Execute; override;
    procedure TerminatedSet; override;
  public
    constructor Create(ACreateSuspended: Boolean);
    destructor Destroy; override;
  end;

constructor TMyThread.Create(ACreateSuspended: Boolean);
begin
  inherited Create(ACreateSuspended);
  FTerminateEvent := TEvent.Create(nil, True, False, '');
end;

destructor TMyThread.Destroy;
begin
  inherited;
  FTerminateEvent.Free;
end;

procedure TMyThread.TerminatedSet;
begin
  FTerminateEvent.SetEvent;
end;

procedure TMyThread.Execute;
begin
  while not Terminated do
  begin
    // do somthing interesting!
    FTerminateEvent.WaitFor(5000);
  end;
end; 
```

现在不需要单独的`Stop`方法。你可以`Free`在线程上调用。然后`Terminate`被调用。然后`TerminatedSet`被调用。然后发出事件信号。然后`Execute`终止。然后线程可以消失。

* * *

话虽如此，我正在努力想一个 5000 毫秒超时将是最佳方法的场景。我不知道您为什么要这样做，但我猜您正在尝试限制线程以使其不会运行*hot*。你想避免一个繁忙的循环。这是令人钦佩的，但使用固定超时不是这样做的方法。这样做的方法是等待一个同步事件，通常是一个事件。然后当有更多工作要做时，事件会发出信号并且您的线程会唤醒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T00:18:46.650

使用 TEvent 可以解决这个问题，例如：

```
 uses SyncObjs;
  TMyThread = class(TThread)
       private
         FTerminateEvent: TEvent;
       protected
         procedure Execute; override  ;
       public
        constructor Create(ACreateSuspended: Boolean); overload;
        destructor Destroy; override;
        procedure Stop;
       end;
    constructor TMyThread.Create(ACreateSuspended: Boolean);
    begin
    FTerminateEvent := TEvent.Create(nil, True, False, 'FTerminateEvent');
    inherited Create(ACreateSuspended);
    end;

    destructor TMyThread.Destroy;
    begin
     FTerminateEvent.Free;
     inherited;
    end;

    procedure TMyThread.Stop;
    begin
    Terminate;
    FTerminateEvent.SetEvent;
    end;

    procedure TMyThread.Execute;
    begin
      while not Terminated do
      begin
      // do somthing interesting!
       FTerminateEvent.WaitFor(5000);
      end;
    end; 
```

现在，如果我想杀死我的线程，我所要做的就是调用 MyThread.Stop 而不是调用 MyThread.Free 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T21:34:17.840

你真的完全错误地解决了这个问题。将您的线程编码为仅执行您希望它们执行的工作，然后就无需“从外部进入”来控制它们。你觉得有必要从外部控制这个线程，因为它正在做一些你不希望它做的事情——那么你为什么首先要编写代码来做到这一点？

# python - Jython & Bottle : 启用 SSL 的网络服务器

> ID：14033899
> 
> 赞同：2
> 
> 时间：2012-12-25T20:48:01.560
> 
> 标签：python, ssl, web, jython, bottle

我有一个结合了 Bottle web 框架和 Jython 的 web 应用程序（webservices）......设法在 Bottle Documentation 支持的几个 web 服务器上运行它，并且一切正常。（如 Paste、Cherrypy、..等）

但是，当我尝试在 Web 服务器上启用 SSL 时……一切都失败了！似乎是因为他们使用 pyOpenSSL 包装器来处理与 Jython 不兼容的东西。

是否有 Jython 的 pyOpenSSL 包装器？或者是否有任何可用的 Web 服务器可以与 Jython 和 Bottle 框架结合并支持 SSL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:17:24.447

快速浏览后，我没有看到 Jython 的 pyOpenSSL 包装器。您可以通过 apache 或 nginx 等网络服务器代理您的应用程序，并让其管理您的 SSL。我让 nginx 为我的樱桃应用程序处理我的 SSL。

```
#nginx.conf

server
{
   listen 443 default_server ssl;
   ssl_certificate      /etc/ssl/mydomain.crt ;
   ssl_certificate_key  /etc/ssl/myserver.key;

   #  etc
} 
```

[http://wiki.nginx.org/HttpSslModule](http://wiki.nginx.org/HttpSslModule)

希望这可以帮助。

安德鲁

# c++ - Qt QGridLayout 自动将项目居中（移动）到中间。

> ID：14033902
> 
> 赞同：11
> 
> 时间：2012-12-25T20:48:29.443
> 
> 标签：c++, python, qt, qscrollarea, qgridlayout

我的表单上有一个`QHBoxLayout`添加了 3 个布局的表单。第二个有关于我的问题的项目。

我`QVBoxLayout`在主布局的第二个窗格（`QHBoxLayout`）上有一个。这`QVBoxLayout`有一个`QScrollArea`添加到它`addWidget`。

这`QScrollArea`是一个`QWidget`名为“scrollContents”的父级，后者又包含一个`QGridLayout`.

我正在向其中添加一个自定义创建的小部件，`QGridLayout`它具有固定的高度。我们`100px`现在可以考虑一下。

如果这`QGridLayout`有项目，其总高度小于表单本身，它将这些小部件垂直居中，它们之间的空间相同。

如果只有一个小部件，它会出现在中间。但我希望它们从上到下列出。

例如：[### 表示`QScrollArea`其中有 a`QWidget`的**区域** `QGridLayout`。

```
 OK      ->   DESIRED    -> NOT DESIRED AND WHAT HAPPENS
##########    ##########               ##########
# |item| #    # |item| #               #        #
# |item| #    #        #               #        #
# |item| #    #        #               #        #
# |item| #    #        #               # |item| #
# |item| #    #        #               #        #
# |item| #    #        #               #        #
# |item| #    #        #               #        #
##########    ##########               ##########
  |item|
  |item| 
  |item| 
```

基本上：如果有 9 个“行”的空间，当添加一个项目时，它会出现在中间的第 5 个位置。如果有 9 个或更多，它们将按应有的方式显示。如果有 8 个或更少，则它们之间的空间将扩大到全部居中。

我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-25T21:11:35.877

[QGridLayout::addWidget()](http://qt-project.org/doc/qt-4.8/qgridlayout.html#addWidget)有`alignment`参数。以下代码适用于我：

```
gridLayout->addWidget(new QPushButton("Button"), 0, 0, Qt::AlignTop); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-25T21:18:39.570

还有一种与 trollixx 回答的方法不同的方法：在`QGridLayout`. 请参阅[此答案，其中还包含一个带有工具栏的示例](https://stackoverflow.com/a/12731278/1261432)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-17T16:48:38.473

在底部使用垂直垫片，这就是它们的用途。

# ruby-on-rails - Rails 4 强参数：允许所有属性？

> ID：14033908
> 
> 赞同：74
> 
> 时间：2012-12-25T20:49:24.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, strong-parameters

我正在使用 Rails 4 强参数构建一个 Web 应用程序。

在构建管理员后台控制器时，我想知道允许所有模型属性的最佳方法是什么？

现在，我写了这个：

```
def user_params 
  params.require(:user).permit(User.fields.keys)
end 
```

你想到更好的方法了吗？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-12-26T11:09:30.787

您可以调用 bang 版本的 permit。

```
params.require(:user).permit! 
```

[Github 上的强参数自述文件](https://github.com/rails/strong_parameters#permitted-scalar-values)

**源代码供参考：**

```
def permit!
  each_pair do |key, value|
    convert_hashes_to_parameters(key, value)
    self[key].permit! if self[key].respond_to? :permit!
  end

  @permitted = true
  self
end 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-01-14T21:23:31.707

以防万一有人需要 Rails 6，甚至没有链接到控制器的模型，您可以使用：

```
before_action :accept_all_params

private

def accept_all_params
  params.permit!
end 
```

完成了，现在您可以随心所欲地玩了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-07T21:51:15.333

Skull0inc 的答案有效，但您可能想要删除`created_at`and `updated_at`。强参数的目的是仅列出您希望控制器更新的属性。就像是...

```
def user_params
  params.require(:user).permit(User.column_names - ["created_at", "updated_at"])
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-13T15:19:32.860

这行得通吗？

```
def user_params 
  params.require(:user).permit(User.column_names)
end 
```

# javascript - 如何为 Windows 8 模板中的项目添加新类？

> ID：14033909
> 
> 赞同：2
> 
> 时间：2012-12-25T20:49:48.303
> 
> 标签：javascript, css, html, templates, winjs

我正在尝试用模板设计这样的东西

![在此处输入图像描述](../Images/db4a92954325b3090501047f75da3cbe.png)

但我不能在*data.js*中有这段代码：

```
var sampleItems = [
    { group: sampleGroups[0], importancia: "alta", title: "Item Title: 1", subtitle: "Item Subtitle: 1", description: itemDescription, content: itemContent, backgroundImage: lightGray },
    { group: sampleGroups[0], title: "Item Title: 2", subtitle: "Item Subtitle: 2", description: itemDescription, content: itemContent, backgroundImage: darkGray },
    { group: sampleGroups[0], title: "Item Title: 3", subtitle: "Item Subtitle: 3", description: itemDescription, content: itemContent, backgroundImage: mediumGray },
    { group: sampleGroups[0], title: "Item Title: 4", subtitle: "Item Subtitle: 4", description: itemDescription, content: itemContent, backgroundImage: darkGray },
    { group: sampleGroups[0], title: "Item Title: 5", subtitle: "Item Subtitle: 5", description: itemDescription, content: itemContent, backgroundImage: mediumGray }
]; 
```

*当我尝试在groupedItem.html 中将*新选项添加​​到此部分时：

```
<div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <div class="item" data-win-bind="className: importancia">
        <img class="item-image" src="#" data-win-bind="src: backgroundImage; alt: title" />
        <div class="item-overlay">
            <h4 class="item-title" data-win-bind="textContent: title" style="margin-left: 0px; margin-right: 291.08px;"></h4>
            <h6 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: subtitle"></h6>
        </div>
    </div>
</div> 
```

结果是这样的：

![在此处输入图像描述](../Images/f93f8ee068903a4b8ef661df43cadec1.png)

我该如何解决？我没有在 CSS 中添加任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:48:45.113

首先，您需要在 data.js 文件中为您想要的组指定数据项的数量。[然后按照这个MSDN 教程](http://msdn.microsoft.com/en-us/library/windows/apps/jj244627.aspx)编辑 groupitem js 和 css 文件。你会找到你想要的

# android - 将照片发布到 Facebook 参数

> ID：14033911
> 
> 赞同：1
> 
> 时间：2012-12-25T20:50:05.790
> 
> 标签：android, facebook, facebook-graph-api

我正在使用新的 FB Android SDK 3.0 将照片发布到 FB。我现在正在寻找一种方法来设置更多参数，而不仅仅是图像本身和简单的文本。我尝试了很多不同的参数，但它们似乎都没有做某事。

我想做的是添加一个链接、一个图标，如果可能的话，在 Like 和 Comment 链接旁边添加一个自定义链接项。

以下是来自 twitter 的图标和自定义链接项的示例：

![在此处输入图像描述](../Images/9e50357b012b698bfcc77626f1c36e99.png)

这是我目前使用的代码：

```
 byte[] data = get binary image data;

    Bundle postParams = new Bundle();
    postParams.putString("name", "Image text");
    postParams.putByteArray("picture", data);

    // All these parameters do nothing...
    postParams.putString("icon", "http://www.myimage.com/image.png");
    postParams.putString("message", "XXX");
    postParams.putString("caption", "Build great social apps and get more installs.");
    postParams.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
    postParams.putString("link", "https://developers.facebook.com/android");

    Request request = new Request(Session.getActiveSession(), "me/photos", postParams, HttpMethod.POST);
    Response r = request.executeAndWait(); 
```

帖子看起来像这样：

![在此处输入图像描述](../Images/b4d52ca44b276f6373402e87d1d7d2fe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:55:16.100

## 1.添加图标

您可以从[应用程序的仪表板](https://developers.facebook.com/apps)管理图标：[https ://developers.facebook.com/apps/APP_ID/appdetails](https://developers.facebook.com/apps/APP_ID/appdetails)

## 2.添加动作链接

你可以一个“自定义链接”实际上是一个“动作”。

您在 Twitter 帖子中看到的“操作”是使用表中的`actions`数组完成的[`Post`](https://developers.facebook.com/docs/reference/api/post/)：

> 帖子上可用操作的列表（包括评论、点赞和可选的应用指定操作）

因此，如果您真的想在**Like · Comment**附近添加此操作，您唯一的选择是创建 a[`Post`](https://developers.facebook.com/docs/reference/api/post/)到`Feed`而不是 a `Photo`。

这是*一个先验的*工作代码：

```
postParams.putString("message", "XXX");
postParams.putString("caption", "developers.facebook.com");
postParams.putString("description", "A tool to help you learn and browse the Facebook Graph API.");
postParams.putString("actions", "[{
       'name':'Test a simple Graph API call!',
       'link':'https://developers.facebook.com/tools/explorer?method=GET&path=me'
       /* ^ This link must direct to the application's connect or canvas URL. 
          You'll get an error otherwise. */
    }]"
);
postParams.putString("type", "photo");
postParams.putString("link", "https://developers.facebook.com/tools/explorer/");
postParams.putString("picture", "http://blog.programmableweb.com/wp-content/ishot-44.png");

Request request = new Request(Session.getActiveSession(), "me/feed", postParams, HttpMethod.POST); 
```

## 3\. 在 Graph API Explorer 中测试

![在 Graph API Explorer 中测试](../Images/e44b9feec3bfc6205ca0e27df2163308.png)

## 4.时间线预览

![时间线预览](../Images/1610a12cc31dc1c01fbb121a4c40d8f0.png)

# windows - 是否可以完全在 node.js 中编写 Windows 服务？

> ID：14033912
> 
> 赞同：2
> 
> 时间：2012-12-25T20:50:28.230
> 
> 标签：windows, node.js, winapi, windows-services

我正在尝试在服务器之外使用 node.js 作为通用脚本和应用程序编程语言。

我的 TODO 列表中的一个项目是 Windows 服务，所以我正在考虑使用 node.js 来解决它

我相信我已经看到了 node.js 的某种 Windows API 绑定，但我不知道它们有多完整或主流。（我愿意贡献！）

**在 node.js 中实现 Windows 服务需要什么？**（感谢简单的例子。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T20:52:22.313

您应该能够使用[Winser](http://jfromaniello.github.com/winser/)轻松完成此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T05:10:39.860

试试[node-windows](http://github.com/coreybutler/node-windows)。它类似于 WinSer，但有更多选择。

# php - 这个正则表达式有什么问题，我该如何改进它？

> ID：14033914
> 
> 赞同：0
> 
> 时间：2012-12-25T20:50:39.340
> 
> 标签：php, regex

我正在使用以下正则表达式代码：

```
^[a-z0-9_-]{3,15}$^ 
```

我使用它来验证用户名，我希望它匹配字母数字字符`-`、`_`和句点。

发生以下奇怪的事情：

它不符合这个：

```
bla.b 
```

但它匹配这个：

```
bla.blabla 
```

我怎样才能改变它，使它匹配两者？我仍然希望能够自由更改最小和最大字符。（顺便说一句。这个正则表达式可能有更多错误的地方。这是我偶然发现的）

**更新：**我应该提到我在 CakePHP 验证中使用它，这给了我一个错误：

```
^[a-z0-9_.-]{3,15}$ 
```

这是错误：

```
Warning (2): preg_match() [function.preg-match]: No ending delimiter '^' found 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T20:51:43.330

你犯了一个小错误，忘了把 the`^`放在开头。选择不同的分隔符可能会使它更明显：

```
^[a-z0-9_-]{3,15}$^    // your non-working version
^                 ^

/^[a-z0-9_-]{3,15}$/  // using / as delimiters instead, setting the beginning
 ^ 
```

记住：

*   `^` - 标记主题的开始
*   `$` - 标志着主题的结束

两者都是模式的一部分。定界符用于将模式与修饰符分开（您在这里不使用任何修饰符）。

`\A`或者，`\Z`如果有帮助，您也可以表示开头和结尾。

现在也匹配点，将其添加到您的角色类中：

```
/^[a-z0-9_.-]{3,15}$/
          ^ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T20:51:41.363

```
^[a-z0-9_-]{3,15}$^ 
```

应该：

```
^[a-z0-9_-]{3,15}$ 
```

`^`表示字符串的开头，并`$`表示字符串的结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T21:07:17.253

这应该这样做：

```
/^[a-z0-9_\.\-]{3,15}$/ 
```

如果您想匹配用户名，那么您可能不希望它以点开头或结尾。在这种情况下，您可以使用：

```
/^(?<!\.)[a-z0-9_\.\-]{3,15}(?!\.)$/ 
```

这就是该正则表达式的分解方式：

1.  `^`表示“字符串的开头”
2.  `(?<!\.)`确保用户名不能以点开头
3.  `[a-z0-9\._-]{3,15}`表示 3 到 15 个字母数字字符、点、下划线和连字符
4.  `(?!\.)`确保用户名不能以点结尾
5.  `$`表示“字符串的结尾”

如果您允许大写字符，那么您可以稍微缩短正则表达式：

```
/^(?<!\.)[\w\.\-]{3,15}(?!\.)$/ 
```

的`\w`简称`[a-zA-Z0-9_]`，也叫*字字*。

确保用户名不以点开头或结尾的另一种方法是使用三个连续`[]`的 ，如下所示：

```
/^[\w\-][\w\.\-]{1,13}[\w\-]$/ 
```

如果您需要匹配 Javascript 中的某些内容，我相信它不支持后向和前瞻，它会很有用。

# java - 如果java中的线程创建一个数组并运行

> ID：14033916
> 
> 赞同：1
> 
> 时间：2012-12-25T20:51:05.893
> 
> 标签：java, multithreading

我有一个创建多个线程的函数。对于每个线程，构造函数从不同的类中获取一个对象，所以我必须首先创建这个类的一个对象，然后再创建线程。代码下方（为简化示例而修改）

```
public static void createThread (int n) {
      for(int i=0;i<n;i++){
         someClass obj=new someClass(i);
         ThreadClass myThread=new ThreadClass(obj);
         myThread.run();
        } 
```

这里的问题是我并没有真正看到线程是随机运行的。我在 run() 上打印它们中的每一个，我看到它们按顺序显示。这有什么问题吗？我应该以不同的方式运行它吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T20:53:31.427

使用`Thread.start()`而不是`Thread.run()`. 使用该`run`方法只是在同一个线程中调用该方法，而该`start`方法实际上是创建一个新线程并`run`在该线程中调用该方法。

我假设“随机”，您实际上是指交错。这应该导致那个结果。

# vb.net - 绑定源过滤器在 DGV 中不起作用

> ID：14033917
> 
> 赞同：0
> 
> 时间：2012-12-25T20:51:07.623
> 
> 标签：vb.net

我在 DGV 上的绑定源有问题。消息是“DataMember Property 'nodes' cannot be found on the dataSource” 将表设置为数据源后，列数为 14。错误发生在线nodesDataGridView.DataSource = bsNodes。如果我在错误之前中断然后将鼠标悬停在 ds 上，它确实表明表节点在数据源中。我已经使用与此类似的代码来设置其他 DGV，但我看不出这有任何区别。

如果我删除这些语句，我不会得到错误，但它当然没有被过滤）：

```
 nodesDataGridView.DataSource = bsNodes
        bsNodes.Filter = "company_number = " & Globals.customer_id 
```

我可能应该提到我在网格完成并工作后添加了 company_number。它是为单个公司代码设置的，但现在我必须添加支持数据库中多个公司的要求。

有任何想法吗？

谢谢，

维克

```
' Setup objects for loading the summary grid
Dim sqlNodes As String = "Select *From nodes order by display_sequence"
Dim comm As MySqlCommand = New MySqlCommand(sqlNodes, m_cn1)
Dim daNodes As MySqlDataAdapter = New MySqlDataAdapter(comm)
Dim dsNodes As DataSet = New DataSet()
dim bsNodes As New BindingSource

    Try
        AddHandler ButtonSaveChanges.Click, AddressOf ButtonSaveChanges_Click
        dsNodes.Clear()
        daNodes.Fill(dsNodes, "nodes")
        m_cn1.Close()
        nodesDataGridView.DataSource = dsNodes
        nodesDataGridView.DataMember = "nodes"
        bsNodes.DataSource = dsNodes.Tables("nodes")
        Debug.Print("nodes column count is " & nodesDataGridView.ColumnCount)
        nodesDataGridView.DataSource = bsNodes
        bsNodes.Filter = "company_number = " & Globals.customer_id

    Catch ex As Exception
        MessageBox.Show("Failed to load summary grid" & vbCrLf & vbCrLf & ex.ToString)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:25:30.500

尝试像这样过滤

```
bsNodes.Filter = "company_number = '" & Globals.customer_id.ToString() & "'" 
```

编辑：

```
 bsNodes.DataSource = dsNodes.Tables("nodes")
    nodesDataGridView.DataSource = bsNodes '<- you set dsNodes(Dataset) this should be the BindingSource not Dataset
    nodesDataGridView.DataMember = "nodes"
    Debug.Print("nodes column count is " & nodesDataGridView.ColumnCount)
    'nodesDataGridView.DataSource = bsNodes
    bsNodes.Filter = "company_number = '" & Globals.customer_id.ToString() & "'" 
```

# mysql - 使用 Base64 和 Node.js 显示图像

> ID：14033918
> 
> 赞同：1
> 
> 时间：2012-12-25T20:51:07.993
> 
> 标签：mysql, database, node.js, base64, image

我正在尝试获取一些 blob 文件（图像），然后使用 base64 将其显示在屏幕上。

这是我的 node.js 代码：

```
var queryimage = "SELECT iproduct FROM images";
connection.query(queryimage, function(err, rows, fields){
    socket.emit('image_prova', new Buffer(rows, 'binary').toString('base64'));
}); 
```

然后我得到了假定的字符串：

```
websocket.on('image_prova', function(data){
    $('#imagehere').append('<img src=data:image/jpeg;base64,'+data+' />');
}); 
```

图片未显示，给出的字符串为：AA==

我不明白为什么……！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T00:17:26.743

您正在传递`rows`而不是`rows[0]`to `Buffer`。您只请求了一个，但它仍然是一个数组，因此您需要访问您真正想要的那个。

如果这不起作用，请告诉我。

# c# - 如何从列表中的列表中获取差异并删除该（主）列表项？

> ID：14033920
> 
> 赞同：4
> 
> 时间：2012-12-25T20:51:19.570
> 
> 标签：c#, arrays, list

我有一个`List<List<string>>`变量，我想删除`List<string>`with distincts in `string[0]`。我怎样才能做到这一点？在这里，我向您展示我正在努力实现的目标。

```
 0, 1, 2,
   +--+--+--+
0, |a |34|st|
   +--+--+--+
1, |a |67|it| Delete this row because a is an duplicate.
   +--+--+--+
2, |b |89|st|
   +--+--+--+ 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T20:59:24.343

您可以使用 LINQ 选择按第一项不同的子列表列表：

```
var result = listOflists.GroupBy(l => l[0])
                        .Select(g => g.First())
                        .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T20:58:12.250

你可以传递`Distinct`一个`IEqualityComparer<T>`，所以：

```
class FirstItemComparer : IEqualityComparer<List<string>> {
    public bool Equals(List<string> a, List<string> b) {
        return a[0] == b[0];
    }

    public int GetHashCode(List<string> l) {
        return l[0].GetHashCode();
    }
}
...
items.Distinct(new FirstItemComparer()) 
```

# arrays - 矩阵作为数组的数组

> ID：14033921
> 
> 赞同：1
> 
> 时间：2012-12-25T20:51:33.630
> 
> 标签：arrays, delphi, function, matrix, pascal

我有一个函数可以检查数组中是否有重复数据；如下所示。任务是使用该函数查找矩阵中没有重复数据的列。问题是如何将矩阵的列传递给该函数。

PS 我正在使用 Pascal/Delphi

```
type
  myArray = array [1..10] of integer;

function noRepeat(A: myArray; n: integer): Boolean;
var
  i: integer;
begin
  Result := true;
  for i:=1 to n do
    for j := i + 1 to n do
      if  (A[i] = A[j]) then
        Result := true;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T21:43:52.307

在下面的示例中：

```
matrix[column][row] 
```

是“myMatrix”类型的结构。只需遍历第一个数组并将其发送到您的测试函数。

此外，在测试功能中，请确保将结果设置为 false 开始！

```
type
  myArray = array [1..10] of integer;
  myMatrix = array[1..10] of myArray;

var
  matrix: myMatrix;

function noRepeat(const A: myArray): Boolean;
var
  i: integer;
begin
  //Result := true; //?
  Result := false;
  for i:=1 to high(A) do
    for j := i + 1 to high(A) do
      if  (A[i] = A[j]) then
        Result := true;
end; 

procedure sendColumn;
var
  b, wasRepeat: boolean;
  i: Integer;
Begin

  for i := low(matrix) to high(matrix) do
  Begin
    b := noRepeat(matrix[i]);
    if b then
      wasRepeat := true;
  End;

End; 
```

如果它是行专业的，那么您必须告知测试例程您要测试哪一列。

```
type
  myArray = array [1..10] of integer;
  myMatrix = array[1..10] of myArray;

var
  matrix: myMatrix;

function noRepeat(const A: myMatrix; Col: Integer): Boolean;
var
  i, j: integer;
begin

  Result := false;
  for i := low(A) to high(A) do      
    for j := i + low(A) to high(A) do
      if  (A[i][Col] = A[j][Col]) then
        Result := true;
end; 

procedure sendColumn;
var
  b, wasRepeat: boolean;
  i: Integer;
Begin

  for i := 1 to 10 do
  Begin
    b := noRepeat(matrix, i);
    if b then
      wasRepeat := true;
  End;

End; 
```

# sql-server-2008 - SQL Server 2008 R2 中的分组/聚合

> ID：14033923
> 
> 赞同：0
> 
> 时间：2012-12-25T20:51:41.813
> 
> 标签：sql-server-2008, tsql

当我运行它时（SQL Server 2008 R2）：

```
SELECT [UserId]
      ,[StateDuration]
      ,[StatusKey]  
FROM [AgentActivityLog]
WHERE [StatusDateTime] between '2012-01-01' and '2012-12-31' 
```

我得到每个 UserId 的一行，如下所示： UserId StatusDateTime StatusKey

```
cfrinco      3456   Meeting
echartl      23456  Available
mbarbewar    3256   Lunch
bsantiago    46565  Available
bsantiago    79     Follow Up
fburger      5464   Available 
```

它告诉我每个用户处于每个状态的时间（以秒为单位）。

**`UserId`当然，每个日期会有很多条目。** 换句话说，用户在一天内将从可用到会议到可用到午餐再到可用等。

我想要做的是以秒为单位的总时间`UserId`，`StatusKey`每个日历日。所以它看起来像这样：

```
cfrinco      3456   Meeting       '2012-01-01'
cfrinco      45678  Available     '2012-01-01'
cfrinco      7845   Meeting       '2012-01-02'
cfrinco      32541  Available     '2012-01-02'
cfrinco      4455   Meeting       '2012-01-03'
cfrinco      12456  Available     '2012-01-03'
fburger      3456   Meeting       '2012-01-01'
fburger      75489  Available     '2012-01-01'
fburger      3541   Lunch         '2012-01-01'
fburger      5486   Meeting       '2012-01-02'
fburger      64587  Available     '2012-01-02'
fburger      3614   Lunch         '2012-01-02'
fburger      3225   Meeting       '2012-01-03'
fburger      35414  Available     '2012-01-03'
fburger      3745   Lunch         '2012-01-03' 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T20:58:35.610

如果您想要按用户 ID、状态和日期分组的数据，请执行以下操作：

```
SELECT
 UserId
 SUM(StateDuration),
 StatusKey,
 StatusDateTime
FROM AgentActivityLog
WHERE StatusDateTime BETWEEN '2012-01-01' AND '2012-12-31'
GROUP BY
 UserId,
 StatusDateTime,
 StatusKey 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T00:09:18.603

这就是我一直在寻找的。在对stackoverflow中的不同答案进行一些研究并将它们放在一起之后，我明白了。

```
SELECT
UserId, SUM(StateDuration) SumStateDuration, StatusKey,
DATEADD(dd, 0, DATEDIFF(dd, 0, StatusDateTime)) StatusDate
FROM [AgentActivityLog]
WHERE StatusDateTime BETWEEN '2012-01-01' AND '2012-12-31'

GROUP BY
 UserId,
 DATEADD(dd, 0, DATEDIFF(dd, 0, StatusDateTime)),
 StatusKey 
```

关键部分是（a）从日期时间列中获取日期，（b）按它分组。

# android - 一个 .txt 到可修改的 android 数据库

> ID：14033928
> 
> 赞同：3
> 
> 时间：2012-12-25T20:52:36.733
> 
> 标签：android, database, sqlite

我有一个问题要问你们。我一直在开发一个项目应用程序，该应用程序的一部分使用从 txt 文件加载的 SQLite 数据库（它有大约 100k-200k 行，由`^`符号分隔的 5 个字符串）。

现在我的问题是，由于这是我第一次使用数据库，可修改数据库的 .txt 导入如何工作？如果我理解正确，它会从 txt 文件中提取所有数据并创建一个可以继续工作的数据库，所以当我修改数据库时，我会修改新创建的数据库而不是 txt？每当应用程序加载时，代码是否会尝试再次从 txt 中提取信息，并且每次加载 200k 10char 单词是否太多？:)

数据库由以下格式的音乐乐队组成：名称/流派/流行[是/否]/选定
选定的列是唯一由用户修改的列（以及与此相关的应用程序）。如果我对数据库使用常规方法并从 txt 文件中添加了实现，那么每次都会重置所选列（不希望这样）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T01:43:06.650

不要使用巨大的 txt 文件分发您的应用程序并将其导入用户设备。这需要时间并且很烦人。

而是使用预填充的数据库分发您的应用程序，然后从`res`-folder 复制它。您可以使用[android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)自动执行此操作。

另外，是的。数据库始终存储在内部存储器中，您无法在非根设备上访问它（除非您使用的是 AVD）。

* * *

要将您的 txt 内容导入数据库，请创建一个脚本或其他东西来解析内容并执行相应的 SQL 查询。同样，您的应用程序应该附带数据库，而不是原始文件！

* * *

我有点无聊，编写了一个简短的 Python 脚本来读取 txt 文件中的所有条目并将它们插入 SQLite 数据库：

```
import sqlite3
import re

counter = 0;
pattern = re.compile('^([^\^]+)\^([\w\s]+)\^(yes|no)\^\w+$');
conn = sqlite3.connect("imported.db");
cursor = conn.cursor();
# Create the Table:
conn.execute('''
    CREATE TABLE Bands (
        name TEXT,
        genre TEXT,
        popular INTEGER,
        selected INTEGER
    );''');

# Now, insert:
with open('bands.txt', 'r') as f:
    for line in f:
    match = pattern.search(line);
    if match:
            cursor.execute('''
            INSERT INTO Bands (name, genre, popular, selected)
            VALUES (?,?,?,0)''',
            (
                match.group(1), match.group(2),
                (1 if match.group(3) == 'yes' else 0)
            )
        );
        counter+=1;

conn.commit();
conn.close();
print "Imported ", counter, " bands!"; 
```

这将假定 txt 文件名为`bands.txt`，每个值都由 a 分隔，`/`并且每个条目都将在它自己的行上。生成的数据库文件是`imported.db`.

此外，我使用`INTEGER`所有`True|False`- 字段（流行的，选定的）。然后这些将持有 a`0`为假和 a`1`为真。

最后但同样重要的是，RegEx 仅允许 -value 使用“yes”和“no” `popular`。

# python - Python多处理imaplib抛出错误

> ID：14033929
> 
> 赞同：2
> 
> 时间：2012-12-25T20:52:43.110
> 
> 标签：python, multiprocessing, imaplib

我有以下代码，其中我试图同时从邮箱的不同目录中获取邮件。但是，它显示了以下问题。已附加缩短的堆栈跟踪。

```
import multiprocessing as mlp
import imaplib as impl

def somefunc(dirc):
    mail.select(dirc)
    result, data = mail.uid("search", None, "All")
    uids = data[0].split()
    print dirc
    for mail_id in uids:
       result, data = mail.uid("fetch", mail_id, "(RFC822)")

if __name__ == '__main__':
    mail = impl.IMAP4_SSL("somedomain")
    mail.login("username","password")

    jobs = []
    p1 = mlp.Process(target = somefunc, args = ("INBOX",))
    jobs.append(p1)
    p1.start()
    p2 = mlp.Process(target = somefunc, args = ("Sent",))
    jobs.append(p2)
    p2.start()
    for i in jobs:
        i.join() 
```

它抛出错误：

```
Process Process-2:
Traceback (most recent call last):
File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
Process Process-1:
Traceback (most recent call last):
File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
........
File "/usr/lib/python2.7/imaplib.py", line 859, in _command
    raise self.abort('socket error: %s' % val)
abort: socket error: [Errno 32] Broken pipe
    typ, dat = self._simple_command(name, mailbox)
........
error: [Errno 104] Connection reset by peer 
```

不能同时进行 imap 连接吗？？？

谢谢... ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:00:38.717

我的猜测是您遇到了问题，因为您试图跨进程共享邮件套接字连接对象。相反，请尝试让每个进程创建其连接：

```
import multiprocessing as mlp
import imaplib as impl

def somefunc(domain, name, password, dirc):
    mail = impl.IMAP4_SSL(domain)
    mail.login(name, password)
    mail.select(dirc)
    result, data = mail.uid("search", None, "All")
    uids = data[0].split()
    print dirc
    for mail_id in uids:
       result, data = mail.uid("fetch", mail_id, "(RFC822)")

if __name__ == '__main__':
    jobs = []

    for box in ("INBOX", "Sent"):
        p = mlp.Process(
                target = somefunc, 
                args = ("somedomain", "username", "password", box)
            )
        jobs.append(p)
        p.start()

    for i in jobs:
        i.join() 
```

# ios - iOS UIImageView 剪辑/蒙版图像

> ID：14033945
> 
> 赞同：0
> 
> 时间：2012-12-25T20:57:22.110
> 
> 标签：ios, uiimageview, masking, clipping

基本上，我正在制作一个有两个图像的视图。图像 1 显示在占据视图左上角的直角三角形中，图像 2 占据了占据右下角的直角三角形。

想象一个对角线切割的正方形，在每个生成的一半中都存在不同的图像。

我一直在阅读很多有关遮罩的信息，但我不想使用其他图像来遮盖这些图像。

我正在寻找一种方法给它 3 个点，形成那个三角形，然后让它以这种方式剪辑图像。

我觉得这在 Coregraphics 中可能很容易做到，我只是错过了我认为的电话。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T22:18:15.627

这是一种方法，在图像上下文中使用剪切路径。该示例适用于 256 x 256 的图像大小，但您应该能够轻松地使其适应您的需要。

```
UIGraphicsBeginImageContext(CGSizeMake(256, 256));
CGContextRef context = UIGraphicsGetCurrentContext();
CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, 256); 
CGContextConcatCTM(context, flipVertical);
CGContextBeginPath(context);
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, 0, 256);
CGContextAddLineToPoint(context, 256, 256);
CGContextClosePath(context);
CGContextSaveGState(context);
CGContextClip(context);
CGContextDrawImage(context, CGRectMake(0, 0, 256, 256), [image1 CGImage]);
CGContextRestoreGState(context);
CGContextBeginPath(context);
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, 256, 0);
CGContextAddLineToPoint(context, 256, 256);
CGContextClosePath(context);
CGContextSaveGState(context);
CGContextClip(context);
CGContextDrawImage(context, CGRectMake(0, 0, 256, 256), [image2 CGImage]);
CGContextRestoreGState(context);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); // image contains the result
UIGraphicsEndImageContext(); 
```

# refresh - 每次页面加载时停止刷新页眉

> ID：14033950
> 
> 赞同：0
> 
> 时间：2012-12-25T20:57:48.680
> 
> 标签：refresh

我有使用 oxwall CMS 的社交网络。[http://www.goplugged.com](http://www.goplugged.com) 现在，我不希望包含“GO PLUGGED”和“Homey，我的个人资料，搜索插件”等的标题（您可以登录查看）获取每次加载页面时刷新。这意味着我希望它像在 facebook 中一样被修复，而不是在每次页面加载时都刷新。我搜索了很多，但找不到任何令人满意的结果。希望我在这里得到它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T14:13:58.900

作为 Oxwall 开发人员，这是我的想法。

您需要编辑核心 oxwall 核心文件，它会发送我们的标题。

顺便说一句，你觉得这个有什么问题？

# php - 用php为imagick设置密度参数

> ID：14033954
> 
> 赞同：7
> 
> 时间：2012-12-25T20:58:29.193
> 
> 标签：php, pdf, png, imagick

我想使用 Imagick 将 pdf 页面转换为 png 图像。

我尝试使用 PHP，但图像质量非常低。
当我尝试使用命令行时，结果很完美。

**PHP 代码**

```
$im = new imagick( __DIR__ . DIRECTORY_SEPARATOR.$PDFName.'['.$i.']' );  
$params = $im->identifyImage();
$width = $params['geometry']['width']*1;
$height = $params['geometry']['height']*1;
$im->setResolution(400,400);
$im->resizeImage($width ,$height, imagick::FILTER_SINC, 1, true);
$im->writeImage(__DIR__ . DIRECTORY_SEPARATOR.'pdf_pages\\'.$i.'.png'); 
$im->clear(); 
$im->destroy(); 
```

**命令行代码**

```
convert -density 400 a.pdf -resize 25% -a.png 
```

**PHP 代码（第二次尝试）**

```
$im = new imagick( __DIR__ . DIRECTORY_SEPARATOR.$PDFName.'['.$i.']' );  
$im->setOption('density','400x400');
$im->setOption('resize','25%');
$im->writeImage(__DIR__ . DIRECTORY_SEPARATOR.'pdf_pages\\'.$i.'.png'); 
$im->clear(); 
$im->destroy(); 
```

还是不好的结果。

我能做些什么？我想在我的 PHP 代码中使用密度参数，但是如何使用呢？

**使用 PHP 输出** ![在此处输入图像描述](../Images/3c7246ebf955a194d901401af78f83da.png)

**使用命令行输出** ![在此处输入图像描述](../Images/5878b06796af3947b60317e62a02f8d1.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-08-29T21:34:15.013

您需要在读取文件**之前设置分辨率。**

```
$im = new imagick();
$im->setResolution(200,200);
$im->readImage(__DIR__ . DIRECTORY_SEPARATOR.$PDFName.'['.$i.']'); 
```

比，结果将是完美的。

希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T02:43:59.357

从手册[http://php.net/manual/en/imagick.setresolution.php](http://php.net/manual/en/imagick.setresolution.php)

> Imagick::setResolution() 必须在加载或创建图像之前调用。

看到这个答案[Pdf to image using php-imagick api](https://stackoverflow.com/questions/4211913/pdf-to-image-using-php-imagick-api/4211949#4211949)

# php - 如何安全地将图像上传到服务器？

> ID：14033956
> 
> 赞同：-3
> 
> 时间：2012-12-25T20:58:49.507
> 
> 标签：php, html, mysql, database

这是我的简单 HTML 代码...

```
<html>
    <body>
        <form action="photo.php" method="post" enctype="multipart/form-data">
            <label for="file">Filename:</label>
            <input type="file" name="file" id="file"><br>
            <input type="submit" name="submit" value="Submit">
        </form>
    </body>
</html> 
```

这是我将照片上传到服务器的 PHP 代码....谁能告诉我如何将此代码连接到服务器并将图像路径保存在目录中并将图像信息插入数据库....我读过，直接将图片插入数据库不好，你应该保存图片路径并将图片信息插入数据库......我目前使用本地主机......请帮助我

```
<?php
    #check for session
    if (isset($_POST['PHPSESSID']))
        session_id($_POST['PHPSESSID']);
    else if (isset($_GET['PHPSESSID']))
        session_id($_GET['PHPSESSID']);
    else
    {
        HandleError('No Session was found.');
    }

    session_start();
    // Check post_max_size (http://us3.php.net/manual/en/features.file-upload.php#73762)
    $POST_MAX_SIZE = ini_get('post_max_size');
    $unit = strtoupper(substr($POST_MAX_SIZE, -1));
    $multiplier = ($unit == 'M' ? 1048576 : ($unit == 'K' ? 1024 : ($unit == 'G' ? 1073741824 : 1)));

    if ((int)$_SERVER['CONTENT_LENGTH'] > $multiplier*(int)$POST_MAX_SIZE && $POST_MAX_SIZE)
        HandleError('POST exceeded maximum allowed size.');

    // Settings
    $save_path = getcwd() . '/uploads/';  // The path were we will save the file (getcwd() may not be reliable and should be tested in your environment)
    $upload_name = 'Filedata';  // change this accordingly
    $max_file_size_in_bytes = 2097152;  // 2MB in bytes
    $whitelist = array('jpg', 'png', 'gif', 'jpeg'); // Allowed file extensions
    $backlist = array('php', 'php3', 'php4', 'phtml','exe'); // Restrict file extensions
    $valid_chars_regex = 'A-Za-z0-9_-\s '; // Characters allowed in the file name (in a Regular Expression format)

    // Other variables     
    $MAX_FILENAME_LENGTH = 260;
    $file_name = '';
    $file_extension = '';
    $uploadErrors = array(
        0=>'There is no error, the file uploaded with success',
        1=>'The uploaded file exceeds the upload_max_filesize directive in php.ini',
        2=>'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form',
        3=>'The uploaded file was only partially uploaded',
        4=>'No file was uploaded',
        6=>'Missing a temporary folder'
    );

    // Validate the upload
    if (!isset($_FILES[$upload_name]))
        HandleError('No upload found in \$_FILES for ' . $upload_name);
    else if (isset($_FILES[$upload_name]['error']) && $_FILES[$upload_name]['error'] != 0)
        HandleError($uploadErrors[$_FILES[$upload_name]['error']]);
    else if (!isset($_FILES[$upload_name]['tmp_name']) || !@is_uploaded_file($_FILES[$upload_name]['tmp_name']))
        HandleError('Upload failed is_uploaded_file test.');
    else if (!isset($_FILES[$upload_name]['name']))
        HandleError('File has no name.');

    // Validate the file size (Warning: the largest files supported by this code is 2MB)
    $file_size = @filesize($_FILES[$upload_name]['tmp_name']);
    if (!$file_size || $file_size > $max_file_size_in_bytes)
        HandleError('File exceeds the maximum allowed size');

    if ($file_size &amp;lt;= 0)
        HandleError('File size outside allowed lower bound'); // Validate its a MIME Images (Take note that not all MIME is the same across different browser, especially when its zip file)
    if(!eregi('image/', $_FILES[$upload_name]['type']))
        HandleError('Please upload a valid file!'); // Validate that it is an image

    $imageinfo = getimagesize($_FILES[$upload_name]['tmp_name']);
    if($imageinfo['mime'] != 'image/gif' && $imageinfo['mime'] != 'image/jpeg' && $imageinfo['mime'] != 'image/png' && isset($imageinfo))
        HandleError('Sorry, we only accept GIF and JPEG images');

    // Validate file name (for our purposes we'll just remove invalid characters)
    $file_name = preg_replace('/[^'.$valid_chars_regex.']|\.+$/i', '', strtolower(basename($_FILES[$upload_name]['name'])));
    if (strlen($file_name) == 0 || strlen($file_name) > $MAX_FILENAME_LENGTH)
        HandleError('Invalid file name');

    // Validate that we won't over-write an existing file
    if (file_exists($save_path . $file_name))
        HandleError('File with this name already exists');

    // Validate file extension
    if(!in_array(end(explode('.', $file_name)), $whitelist))
        HandleError('Invalid file extension');
    if(in_array(end(explode('.', $file_name)), $backlist))
        HandleError('Invalid file extension');

    // Rename the file to be saved 
    $file_name = md5($file_name. time());

    // Verify! Upload the file
    if (!@move_uploaded_file($_FILES[$upload_name]['tmp_name'], $save_path.$file_name)) 
        HandleError('File could not be saved.');

    exit(0);

    /* Handles the error output. */
    function HandleError($message) {
        echo $message;
        exit(0);
    }

?> 
```

这是我连接和插入 MySQL 数据库的 php 代码

```
<?php
    $con = mysql_connect("localhost","root","");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("simple_login", $con);

    mysql_query("INSERT INTO Photo (Photo)
    VALUES ('file')");

    mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:20:59.483

`$file_name = md5($file_name. time());`- 你 MD5 文件名，这意味着你也在散列文件扩展名。

你应该做这个：

`$extention = end(explode('.', $file_name));`

`$file_name = md5($file_name. time()).$extention;`

保存文件路径：

你可以做：

`$file_name_2 = getcwd().'/uploads/'.$file_name`

`mysql_query("INSERT INTO Photo (Photo) VALUES ('$file_name_2')");`

# c - OpenCV C API 过时了吗？

> ID：14033957
> 
> 赞同：6
> 
> 时间：2012-12-25T20:58:53.213
> 
> 标签：c, opencv

我正在尝试在 Raspberry Pi（嵌入式系统）中使用 OpenCV，所以我需要 OpenCV C API 源代码，以便我可以编译并使用它。

经过一番搜索，我发现 C API 是在 OpenCV 1.x 中设计的。现在仅支持向后兼容。它已被弃用，将来可能会被删除。

OpenCV 有 C[文档](http://opencv.willowgarage.com/documentation/c/index.html)，但我未能获得源代码。

那么 OpenCV C API 是否已经过时或者我可以下载旧版本的源代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T21:06:49.273

OpenCV C API 也是较新的 OpenCV 版本的一部分。

但是 OpenCV 内部是 OpenCV 2.0 及更高版本中的 C++。因此，如果没有 C++ 支持，您将无法编译更新的 OpenCV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T21:08:22.700

在此处查看安装指南：http: [//opencv.willowgarage.com/wiki/InstallGuide](http://opencv.willowgarage.com/wiki/InstallGuide)

OpenCV 只有一个包，其中包含 C 的绑定。但是，我不认为 C++ 速度与 C 速度在 Raspberry Pi 上应该是一个问题，所以只需使用 C++。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T21:07:11.097

从[网站上](http://opencv.willowgarage.com/wiki/Welcome)引用当前版本的 OpenCV：

> OpenCV 是在 BSD 许可下发布的，它可以免费用于学术和商业用途。它具有在 Windows、Linux、Android 和 Mac 上运行的 C++、**C**、Python 和 Java 接口。

`samples/c`您可以在您的安装文件夹中或其[github 站点](https://github.com/Itseez/opencv/tree/master/samples/c)中找到随 opencv 提供的示例 C 程序。

# android - 关闭从新意图启动的活动

> ID：14033958
> 
> 赞同：0
> 
> 时间：2012-12-25T20:59:11.363
> 
> 标签：android, nfc

我遇到了应用程序后台堆栈的问题，我想要实现的是当按下按钮退出时，关闭所有活动，所以当我打开应用程序并检查登录后，这个活动就会启动。如果我按下退出按钮，所有活动都关闭，现在如果我读取标签，它会启动活动，创建时的 toast 被触发，resume 上的 toast 被触发，toast `onread`intent 被触发，其余的一切顺利，我可以将标签数据保存到服务器中。

现在我尝试通过单击退出按钮关闭应用程序，而不是关闭所有活动，而是转到同一个活动，然后我再次按下退出按钮并关闭应用程序。

阅读标签后如何关闭所有活动。
**标签Activty2.java：**

```
 public class TagsActivity2 extends Activity {
private NfcAdapter mNfcAdapter;
private ImageView mScanner;
private Animation mAnimation;

String   user="",posto="",conn="",tagsvisitadassemnet="",serverselecionado="",urlpost="",content="1a";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  
    user=gameSettings.getString("User", "");
     posto=gameSettings.getString("Posto", "");
     conn=gameSettings.getString("Conn", "");
     serverselecionado= gameSettings.getString("server", "");
     //Toast.makeText( TagsActivity2.this, "servidor selecionado:"+serverselecionado, Toast.LENGTH_LONG).show();
     Toast.makeText( TagsActivity2.this, "on create", Toast.LENGTH_LONG).show();

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    if(posto.equals("admin")==true)
        setContentView(R.layout.activity_tags2);
        else
            setContentView(R.layout.activity_tags2_noadmin);    
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);

        //ver conecao a internet
      //qual das imagens carregar, rede on ou redeoff
        if(conn.equals("yes")==true)
        {

        //  Toast.makeText( TagsActivity2.this, "tem internet para descarregar dados...", Toast.LENGTH_LONG).show();
               ImageView iv = (ImageView) findViewById(R.id.titlebarconn);
                iv.setImageResource(R.drawable.rede);
              //verificar se existem dados gravados durante offline

                tagsvisitadassemnet=gameSettings.getString("tagsvisitadas", "");
                if(tagsvisitadassemnet.length()>0)
                {
          //            Toast.makeText( TagsActivity2.this, "existem dados offline:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
                    //carregar os dados e apagar

                SharedPreferences.Editor prefEditor = gameSettings.edit();  
                prefEditor.putString("tagsvisitadas", ""); 

                prefEditor.commit();  

                }

        }
        else
        {
            //Toast.makeText( TagsActivity2.this, "sem internet",       Toast.LENGTH_LONG).show();
            ImageView iv = (ImageView) findViewById(R.id.titlebarconn); 
        iv.setImageResource(R.drawable.redeoff);

        }
    ((TextView)findViewById(R.id.titlebarTitleTxt)).setText(user);

    mScanner = (ImageView)findViewById(R.id.img);

    mScanner.setVisibility(View.VISIBLE);
    TranslateAnimation mAnimation = new TranslateAnimation(
             TranslateAnimation.RELATIVE_TO_SELF, -1.0f,
             TranslateAnimation.RELATIVE_TO_SELF, 0.2f,
             TranslateAnimation.ABSOLUTE, 0f,
             TranslateAnimation.ABSOLUTE, 0f);
    mAnimation.setDuration(3000);
    mAnimation.setRepeatCount(-1);
    mAnimation.setRepeatMode(Animation.REVERSE);
    mAnimation.setInterpolator(new LinearInterpolator());
    mScanner.setAnimation(mAnimation);

    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
    if (mNfcAdapter == null) {
        Toast.makeText(this, "Sorry, NFC is not available on this device",   Toast.LENGTH_SHORT).show();
        //finish();
    }

    Button bsair= (Button) findViewById(R.id.titlebarRefreshBtn);

       bsair.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  
                SharedPreferences.Editor prefEditor = gameSettings.edit();  
                prefEditor.putString("User", ""); 
                prefEditor.putString("UserName", "");
                prefEditor.putString("Password", "");
                prefEditor.putString("Posto", "");

                prefEditor.commit();  
              Toast.makeText( TagsActivity2.this, "sair", Toast.LENGTH_LONG).show();

                // TODO Auto-generated method stub
                setResult(2);
                finish();
            }
        });

       Button bultimoscheckins= (Button) findViewById(R.id.btn_tagsvisitadas);

       bultimoscheckins.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent i = new Intent(TagsActivity2.this, Lastcheckins.class);

                  startActivityForResult(i, 2);
            }
        }); 

       Button breadtags= (Button) findViewById(R.id.btn_opcoes);

       breadtags.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent i = new Intent(TagsActivity2.this,Opcoes.class);

                  startActivityForResult(i, 2);
            }
        });
       if(posto.equals("admin")==true)
       {
       Button bwritetags= (Button) findViewById(R.id.btn_escrevertags);

       bwritetags.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent i = new Intent(TagsActivity2.this, WriteTags.class);

                  startActivityForResult(i, 2);
            }
        });
       }

}

private boolean isWriteReady = false;

/**
 * Enable this activity to write to a tag
 * 
 * @param isWriteReady
 */
public void setTagWriteReady(boolean isWriteReady) {
    this.isWriteReady = isWriteReady;
    if (isWriteReady) {
        IntentFilter[] writeTagFilters = new IntentFilter[] { new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED) };
        mNfcAdapter.enableForegroundDispatch(TagsActivity2.this, NfcUtils.getPendingIntent(TagsActivity2.this),
                writeTagFilters, null);
    } else {
        // Disable dispatch if not writing tags
        mNfcAdapter.disableForegroundDispatch(TagsActivity2.this);
    }

}

@Override
public void onNewIntent(Intent intent) {
    // onResume gets called after this to handle the intent
     Toast.makeText( TagsActivity2.this, "on new intent", Toast.LENGTH_LONG).show();
    setIntent(intent);
}

@Override
public void onResume() {
    super.onResume();
     Toast.makeText( TagsActivity2.this, "on resume", Toast.LENGTH_LONG).show();
    if (isWriteReady && NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {
        processWriteIntent(getIntent());
    } else if (!isWriteReady
            &&                             (NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction()) || NfcAdapter.ACTION_NDEF_DISCOVERED
                    .equals(getIntent().getAction()))) {
        processReadIntent(getIntent());
    }
}

private static final String MIME_TYPE = "application/com.tapped.nfc.tag";

/**
 * Write to an NFC tag; reacting to an intent generated from foreground
 * dispatch requesting a write
 * 
 * @param intent
 */
public void processWriteIntent(Intent intent) { 
    if (isWriteReady &&    NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {

        Tag detectedTag = getIntent().getParcelableExtra(NfcAdapter.EXTRA_TAG);

    //  String tagWriteMessage = mTextField.getText().toString();
        //byte[] payload = new String(tagWriteMessage).getBytes();

        //if (detectedTag != null && NfcUtils.writeTag(
        //      NfcUtils.createMessage(MIME_TYPE, payload), detectedTag)) {

        //  Toast.makeText(this, "Wrote '" + tagWriteMessage + "' to a tag!", 
        //          Toast.LENGTH_LONG).show();
        //  setTagWriteReady(false);
    //  } else {
        //  Toast.makeText(this, "Write failed. Please try again.", Toast.LENGTH_LONG).show();
    //  }
    }
}

public void processReadIntent(Intent intent) {
     Toast.makeText( TagsActivity2.this, "process read intent", Toast.LENGTH_LONG).show();
    List<NdefMessage> intentMessages = NfcUtils.getMessagesFromIntent(intent);
    List<String> payloadStrings = new ArrayList<String>(intentMessages.size());

    for (NdefMessage message : intentMessages) {
        for (NdefRecord record : message.getRecords()) {
            byte[] payload = record.getPayload();
            String payloadString = new String(payload);

            if (!TextUtils.isEmpty(payloadString))
                payloadStrings.add(payloadString);
        }
    }

    if (!payloadStrings.isEmpty()) {
         content =  TextUtils.join(",", payloadStrings);
        //Toast.makeText(TagsActivity2.this, "Read from tag: " + content,
    //          Toast.LENGTH_LONG).show();
        //Toast.makeText( TagsActivity2.this, "a tag tem content", Toast.LENGTH_LONG).show();
        //ver se existe con a internet
        if(conn.equals("yes")==true)
        {
            //Toast.makeText( TagsActivity2.this, "tem internet vai registar httpcon...", Toast.LENGTH_LONG).show();
            httpcon2 task3 = new httpcon2();
            task3.execute(new String[] { "http://www.onetag.pt/metrodoporto/teste.php" });
            //estava a criar este erro por causa de ter o toast dentro do doinbackground
            //Android AsyncTask [Can't create handler inside thread that has not called Looper.prepare()]
        }
        else
        {
        //  Toast.makeText( TagsActivity2.this, "n tem internet vai guardar dados numa string...", Toast.LENGTH_LONG).show();
            Calendar c = Calendar.getInstance();

            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            String formattedDate = df.format(c.getTime());
            SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  
            tagsvisitadassemnet=gameSettings.getString("tagsvisitadas", "");
            tagsvisitadassemnet+=content+"%"+formattedDate+"%";
            //Toast.makeText( TagsActivity2.this, "dados guardados lidos sem net:"+tagsvisitadassemnet, Toast.LENGTH_LONG).show();
             SharedPreferences.Editor prefEditor = gameSettings.edit();
             prefEditor.putString("tagsvisitadas", tagsvisitadassemnet);

                prefEditor.commit();  
        }

    }
}

private class httpcon2 extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        SharedPreferences gameSettings = getSharedPreferences("MyGamePreferences", MODE_PRIVATE);  
         serverselecionado=gameSettings.getString("server", "");
         //Toast.makeText( TagsActivity2.this, " httpcon2 servidor selecionado:"+serverselecionado, Toast.LENGTH_LONG).show();
         if(serverselecionado.equals("metrodoporto")==true)
         {
            //Toast.makeText( TagsActivity2.this, "metro do porto", Toast.LENGTH_LONG).show();
         urlpost="http://www.onetag.pt/metrodoporto_/saveBDregistos.php";
         }
         if(serverselecionado.equals("smartcom")==true)
         {
             //Toast.makeText( TagsActivity2.this, "smartcom", Toast.LENGTH_LONG).show();
         urlpost="http://www.onetag.pt/smartcom/saveBDregistos.php";
         }

        //String urlget="http://www.onetag.pt/metrodoporto/teste.php?user="+txtperson.getText().toString()+"&pass="+txtpass.getText().toString();
        ArrayList<NameValuePair> parametrospost=new ArrayList<NameValuePair>();
        parametrospost.add(new BasicNameValuePair("usuario",user));
        parametrospost.add(new BasicNameValuePair("mimecode",content));

        Log.i("Inicio","vai entrar no try");
        String resposta = null;
        try{
            //Toast.makeText( TagsActivity2.this, "entrou no try com o  server"+urlpost, Toast.LENGTH_LONG).show();
            resposta= http.executHttpPost(urlpost, parametrospost);
            String resposta2=resposta.toString();
            resposta2=resposta.replaceAll("\\a+"," ");
            Log.i("Inicio","resposta:"+resposta2 );

        }
        catch(Exception erro)
        {
            Log.i("Inicio","Erro:"+erro );
            LayoutInflater inflater = getLayoutInflater();
            View layout = inflater.inflate(R.layout.customtoasterro,(ViewGroup) findViewById(R.id.toast_layout_root));

            TextView text = (TextView) layout.findViewById(R.id.texttag);
            text.setText("Sucesso");

            Toast toast = new Toast(TagsActivity2.this);
            toast.setGravity(Gravity.FILL, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show();

        }
        return resposta;
    }

    @Override
    protected void onPostExecute(String result) {
        Toast.makeText(TagsActivity2.this, "Registo adicionado com sucesso", Toast.LENGTH_LONG).show();
        //Notas="";
        //Tarefas="";
        //TarefasNFeitas="";
        LayoutInflater inflater = getLayoutInflater();
        View layout = inflater.inflate(R.layout.customtoast,(ViewGroup) findViewById(R.id.toast_layout_root));

        TextView text = (TextView) layout.findViewById(R.id.texttag);
        text.setText("Sucesso");

        Toast toast = new Toast(TagsActivity2.this);
        toast.setGravity(Gravity.FILL, 0, 0);
        toast.setDuration(Toast.LENGTH_LONG);
        toast.setView(layout);
        toast.show();
        //startActivityForResult(new Intent(TagsActivity2.this, TagsActivity2.class),2);*/
    }
  }

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Toast.makeText( TagsActivity2.this, "tagsactivity2 onactivity result:"+resultCode, Toast.LENGTH_LONG).show();
    if(resultCode==2){
        setResult(2);
        finish();
    }
}

} 
```

**Manisfest.xml：**
这里是对应这个活动的部分。

```
 <activity
        android:name=".TagsActivity2"
       android:configChanges="orientation"
          android:screenOrientation="portrait"
            launchMode="singleTask"
      >
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="application/com.smartcom.onetagv4.tag2" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="application/com.smartcom.onetagv4.tag2" />
        </intent-filter>
    </activity> 
```

代码有效，我只想按下关闭按钮，然后关闭所有活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T00:30:46.393

如果是 NFC 意图，则会创建一个新的任务堆栈，其中包含您的 Activity 的新实例。这解释了您观察到的行为：当您退出它时，另一个（早期）实例再次显示。为了防止这种情况，您可以在清单中声明活动`android:launchmode=singleTask`（请参阅[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)）。但是，这可能会对您的应用程序产生其他副作用，因为该活动只能位于活动堆栈的根部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:25:41.067

我通过这样做来解决这个问题：

```
startActivityForResult(i, 2); 
```

开始活动时，当按下退出按钮时，我正在这样做

```
setResult(2);
finish(); 
```

在每个活动中我都有这个，来处理代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode==2){
        setResult(2);
        finish();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:54:20.340

你可以试试这个：这对我来说适用于 NFC 项目！

```
@Override
public void onResume(){
super.onResume();
//bla bla do what you want to do, like write a tag or read it 
finish();
}
} 
```

玩得开心！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T22:07:55.250

如果我理解你的问题，但我不知道我知道......我想你在说什么是后台？有一个 backstack - 您可能希望将 finishOnTaskLaunch 或 noHistory 应用于活动。我还没有阅读你所有的代码。

我发现很难准确理解问题出在哪里......希望这会有所帮助

# php - PHP变量的永久存储？

> ID：14033963
> 
> 赞同：4
> 
> 时间：2012-12-25T21:00:56.283
> 
> 标签：php, variables, storage

是否可以在 PHP 中存储永久变量，即最终不可修改的变量，但所有请求页面的用户都可以读取这些变量？

例如，我需要在页面上使用字典，从一个大的（不变的）单词列表开始。做这个的最好方式是什么？

*   在每次页面加载时即时将单词列表转换为树完全浪费计算资源，并且每次页面加载需要几秒钟的时间。
*   将树作为子文件夹放入文件系统中并使用`file_exists()`速度足够快，但每个单词使用 4KB，这完全浪费了磁盘空间。
*   将单词放入数据库是行不通的，因为每次加载页面时我需要进行数千次查找。

存储这本字典的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T21:10:08.900

memcached 在 php 中非常流行，作为一种将内容保存在内存中的方式，许多进程可以访问这些内容 [http://php.net/manual/en/book.memcached.php](http://php.net/manual/en/book.memcached.php)

类似的解决方案可能是使用 sqlite 共享内存数据库 [http://www.sqlite.org/inmemorydb.html](http://www.sqlite.org/inmemorydb.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T21:26:17.877

我的理解是，您的页面应该包含一个用于不变单词列表的字典。如果单词列表是不变的，**并且**结果字典也是不变的，那么为什么不缓存页面的全部内容呢？这将为所有用户提供恒定的访问时间。

此用例的一个常见模式是将单词列表计算为一个键，适合在诸如[memcached](http://memcached.org/)之类的数据存储中查找。性能对您来说似乎很重要，在这种情况下，一次读取往返数据存储，几乎不需要任何处理来显示页面。

如果用户可以与单词列表交互，那将是使缓存页面无效的时候了。同样，需要对数据存储进行一次写入往返。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T21:15:07.510

我认为像 MongoDB 这样的 NoSQL 数据库非常适合您的需求。更多信息：

*   [http://www.mongodb.org/](http://www.mongodb.org/)
*   [http://php.net/manual/en/class.mongodb.php](http://php.net/manual/en/class.mongodb.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T21:21:25.043

处理“每次负载数千次查找”的数据库有什么问题？这就是它的设计目的，你知道的。

实施具有适当索引的数据库解决方案，您会没事的。

# java - 如何从字符串中打印出文本

> ID：14033969
> 
> 赞同：0
> 
> 时间：2012-12-25T21:01:43.837
> 
> 标签：java, printing

我现在已经设法在 JSF 中创建一个上传，允许用户上传一个文本文件，我也可以显示它。我设法将它打印到连接到客户端的打印机上。如何将此文本打印到使用 Java 代码连接到服务器端的打印机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T02:01:21.870

非常简单，上传文件后，您将拥有整个文件内容，创建一个实用程序`PrintDocument`类并在需要打印时调用它。

```
public class PrintDocument {

  public void printText(String text) throws PrintException, IOException {

    PrintService service = PrintServiceLookup.lookupDefaultPrintService();
    InputStream is = new ByteArrayInputStream(text.getBytes("UTF8"));
    PrintRequestAttributeSet  pras = new HashPrintRequestAttributeSet();
    pras.add(new Copies(1));

    DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
    Doc doc = new SimpleDoc(is, flavor, null);
    DocPrintJob job = service.createPrintJob();

    PrintJobWatcher pjw = new PrintJobWatcher(job);
    job.print(doc, pras);
    pjw.waitForDone();
    is.close();
  }
}

class PrintJobWatcher {
  boolean done = false;

  PrintJobWatcher(DocPrintJob job) {
    job.addPrintJobListener(new PrintJobAdapter() {
      public void printJobCanceled(PrintJobEvent pje) {
        allDone();
      }
      public void printJobCompleted(PrintJobEvent pje) {
        allDone();
      }
      public void printJobFailed(PrintJobEvent pje) {
        allDone();
      }
      public void printJobNoMoreEvents(PrintJobEvent pje) {
        allDone();
      }
      void allDone() {
        synchronized (PrintJobWatcher.this) {
          done = true;
          System.out.println("Printing document is done ...");
          PrintJobWatcher.this.notify();
        }
      }
    });
  }
  public synchronized void waitForDone() {
    try {
      while (!done) {
        wait();
      }
    } catch (InterruptedException e) {
    }
  }
} 
```

如果您需要获取所有打印机，请使用`PrintService[] services = PrinterJob.lookupPrintServices();`

# php - 使用 jQuery ajax 获取请求时，$_GET 包含空字符串

> ID：14033972
> 
> 赞同：-1
> 
> 时间：2012-12-25T21:02:02.197
> 
> 标签：php, ajax, jquery

Javascript

```
$("#appendedInputButton").click( function () {
    bday = document.getElementById("appendedInputButton").value;
    $.get("php/getWiki.php", {
        "bday":bday
    }, function (data) {
        response = data;
    })
}); 
```

还尝试了不带引号的生日。

PHP

```
if (isset($_GET["bday"])) {
    var_dump($_GET);
    $bday = $_GET["bday"];
    echo $bday;
    echo "<br>";
    ...
} else {
    echo "error lols."
} 
```

我想我没有正确地做某事。这是响应输出：

```
response
"array(1) {
    ["bday"]=>
    string(0) ""
}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:32:39.700

您将`click`事件绑定到包含该值的同一输入，因此当您第一次单击它时，其中不会有任何要发送的内容。

[（只是将其发布为答案，因此实际上已回答^_^）]

# wpf - WP7 中 ObservableCollection 的 TextBlock 绑定

> ID：14033976
> 
> 赞同：0
> 
> 时间：2012-12-25T21:04:22.000
> 
> 标签：wpf, windows-phone-7, xaml, data-binding, wpf-controls

我创建一个`ObersvableCollection`并在我的 APP.XAML.CS 上公开它

在 XAML 页面上，我插入一个`TextBlock`并希望绑定到我的属性`ObservableCollection`

我做的 ：

```
 <StackPanel Grid.Row="0" Margin="12,17,0,28" >
        <TextBlock Text="{Binding Path=App.glb_ObservableListTiers.m_strNom}" Style="{StaticResource PhoneTextNormalStyle}"/>
    </StackPanel> 
```

最后，我没有看到任何文字！绑定似乎是错误的！

请问这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:22:18.643

即使您的 ObservableCollection 是公开的，您的 App 对象也应该可以被当前 XAML 页面访问。这可以通过在 xaml.cs 文件中创建 App 类的实例并将 DataContext 设置为它来实现。你做的完全错了，看来。

为了让您更好地理解，请遵循此示例

在 App.xaml.cs 中创建一个字符串

```
public string m_strNom { get; set;} 
```

在 App() 构造函数中为 this 添加一些值

```
m_strNom = "Its working"; 
```

将您的数据绑定更改为此

```
<TextBlock Text="{Binding Path=m_strNom}" Style="{StaticResource PhoneTextNormalStyle}"/> 
```

最后设置页面的DataContext或者ContentPanel

```
this.DataContext = (App.Current as App); //This is not best .. just to show you how Databinding works 
```

如果你想绑定到 Observable 集合，那么最好考虑使用 XAML 的 DataTemplate 的 ListBox 而不是纯 TextBlock

# algorithm - 由图表示的Leveling Gene Ontology

> ID：14033977
> 
> 赞同：0
> 
> 时间：2012-12-25T21:05:05.097
> 
> 标签：algorithm, graph, bioinformatics, term

我从这个链接上传了一个完整的基因本体术语文件[http://www.geneontology.org/GO.downloads.ontology.shtml](http://www.geneontology.org/GO.downloads.ontology.shtml)

我用图形表示数据，其中 GO 术语是节点，isA 和 PartOf 关系是边。根据我的研究，该图中应该只有一个根，即 GO Term，加入“GO:0008150”。

现在，我希望为每个 GO Term 分配一个级别，以便执行一些算法。我假设节点的级别是从根开始到要分配级别的节点结束的最长路径上的节点数。

问题是，在大约 60,000 个术语中，我发现只有大约 30,000 个节点可以从根访问。所以，剩下的30000个条款不能有一个级别。这使我无法执行我的算法。

这个问题的解决方案是什么？

这是我想到的一个解决方案，您认为这是一个好主意吗？

不能平级的 GO 项没有父项。然而，几乎所有的，（除了叶子）都有儿子，因此，我的想法是为这些节点中的每一个检查具有最深层次的儿子，然后将最深层次的节点分配其儿子级别减1。例如，如果我们在 1 - 3 - 5 层有 3 个儿子，我们将父亲分配给 4 层，因为它是最深儿子的层减去 1 层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T00:00:37.030

更直接地，我会联系 GO Helpdesk 提出问题——他们的反应非常好：

ebi.ac.uk 的 go-helpdesk

您下载的文件中有三个本体，其中GO:0008150只是一个根。此外，即使您确实使用了所有三个本体， is_a 和 part_of 也不足以完全连接图 - 涉及许多其他关系，传递性可能很复杂，尤其是在考虑多条路径时：

[http://www.geneontology.org/GO.ontology.relations.shtml](http://www.geneontology.org/GO.ontology.relations.shtml)

最后，您可能需要考虑您实际上试图从图中提取哪些信息，因为 GO（一个令人担忧的概念）中的“级别”实际上并没有携带太多（如果有的话）信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T22:17:55.893

GO包含3个主要部分：生物过程、细胞成分和分子功能。你确定你已经从你的数据集中删除了另外两个组件吗？你也可以问[http://www.biostars.org](http://www.biostars.org)

# java - 是否可以在 Java 中编辑支持的密码套件列表

> ID：14033980
> 
> 赞同：0
> 
> 时间：2012-12-25T21:05:52.547
> 
> 标签：java, sockets, ssl, network-programming, jsse

是否可以将密码套件添加到我可以使用的 Java 支持的密码套件列表中：`getSupportedCipherSuites();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:44:58.247

不，这是不可能的。错误，不支持 getSupportedCipherSuites() 未列出的密码套件。要添加对它们的支持，您必须*实现*它们，这不仅仅是将字符串添加到列表中。

为什么你认为你需要这个？通常，您甚至不应该使用未启用的受支持密码套件，更不用说添加它们了。

# html - 制作 无脚本填充

> ID：14033981
> 
> 赞同：4
> 
> 时间：2012-12-25T21:05:54.483
> 
> 标签：html, css, firefox, internet-explorer-9

是的，这是另一个关于`div`内部良好`td`但没有脚本的问题。

`td`的宽度以像素为单位定义。

我想要一个`div`（及其内部输入）填充整个`td`. 我让它在 Chrome 中工作，但在 Firefox 和 IE9 中失败了。那里一团糟。（我不关心IE6-8）

这是我正在测试的片段：http: [//jsfiddle.net/K5D9z/37/](http://jsfiddle.net/K5D9z/37/)。有没有通用的解决方案？

**编辑**

虽然我之前没有指定，但我希望某些表格单元格的内容会增加高度并扩展一些行。在 IE 和 FF`height: 100%`中，元素将始终在 css 中指定容器的初始高度：http: [//jsfiddle.net/K5D9z/51/](http://jsfiddle.net/K5D9z/51/)。所有的答案都有这个问题。

**更新**

正如评论中所指出的，似乎没有纯 css 解决方案。所以我根据计算的高度在`style`每个属性中使用脚本设置高度：http: [//jsfiddle.net/K5D9z/54/](http://jsfiddle.net/K5D9z/54/)。`td`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T02:12:50.070

您需要`position:absolute`从`.test-cell div, .test-cell input`. 这会导致`input`从正常的内容流中删除，因此它不会保留在`td`应有的位置。这以及更改`height`和`width`从`auto`到`100%`应该为您提供您正在寻找的解决方案。

```
.test-cell div, .test-cell input{
  display: block;
  /* position: absolute; Don't use this style */
  height:100%;
  width: 100%;
  /* Don't need these, because it goes along with position absolute
     top:0;
     left:0;
     bottom:0;
     right:0;
  */
  background-color: green;
} 
```

[小提琴](http://jsfiddle.net/K5D9z/65/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T21:21:58.353

像这样的东西怎么样：

CSS：

```
table
{
    border-collapse:collapse;
}

td
{
    padding:0;
    border: 1px Solid gray;
    height: 120px;
    width: 100px;
}

.test-row 
{
    background-color: red;
}

.test-cell div, .test-cell input
{
    height:100%;
    width:auto;
    background-color: green;
} 
```

​ 演示：http: [//jsfiddle.net/K5D9z/47/](http://jsfiddle.net/K5D9z/47/)

# php - 如何正确使用 MySQL join/count

> ID：14033982
> 
> 赞同：0
> 
> 时间：2012-12-25T21:06:05.473
> 
> 标签：php, mysql

所以我有以下查询：

```
'SELECT *, upload.id AS id, report.id AS report_id, (SELECT COUNT(*) 
    FROM upload WHERE report.upload_id = upload.id) AS nums FROM upload 
    LEFT JOIN report ON upload.id=report.upload_id WHERE private="0" ' 
```

我对如何计算每次上传的报告有疑问。**此查询需要计算给定上传的所有报告，并在获取时返回所有上传。**由于某种原因，每次插入新报告而不是添加到总数中时，我都会重复上传。见下图：

![在此处输入图像描述](../Images/20496c56088b32c13789a368c45b8927.png)

请注意，对于与给定上传相关的每个报告，console (1).png 如何显示三次......真的我希望它显示一次，然后侧面的计数应该是（3）。任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:16:35.603

选择 count(upload.id)，report.id from report，上传 LEFT JOIN report ON upload.id=report.upload_id WHERE private="0" group by report.id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T21:11:01.730

如果您只需要每次上传的报告数量，则不需要加入它们，您可以这样做：

```
SELECT upload.*, 
      (SELECT COUNT(*) FROM report WHERE report.upload_id = upload.id) AS nums 
FROM upload 
```

或者你可以这样做：

```
SELECT upload.id, upload.name, count(*) as nums
FROM upload 
  INNER JOIN report ON report.upload_id = upload.id
GROUP BY upload.id, upload.name 
```

这将返回所有带有报告的上传。要获取包含或不包含报告的所有上传，您需要左连接：

```
SELECT upload.id, upload.name, count(report.id) as nums
FROM upload 
  left JOIN report ON report.upload_id = upload.id
GROUP BY upload.id, upload.name 
```

这是一个带有查询的[SQL Fiddle 。](http://www.sqlfiddle.com/#!6/74eae/12)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T22:27:36.713

用于测试的[SQL Fiddle 。](http://www.sqlfiddle.com/#!2/68ebe/8/0)

只需使用左连接并计算`report.upload_id`s

```
select u.filename, u.filesize, COUNT(r.upload_id) as reports
from upload u
left join report r on u.id=r.upload_id
group by u.id, u.filename, u.filesize 
```

我漏掉了`where private = "0"`，因为你没有指定它属于哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T21:51:30.547

```
SELECT 
  upload.id, 
  upload.name, 
  count(1) as nums
FROM 
  upload 
LEFT OUTER JOIN 
  report ON
  report.upload_id = upload.id
GROUP BY 
  upload.id,
  upload.name 
```

# wordpress - Wordpress - 使用钩子从functions.php显示导航菜单

> ID：14033988
> 
> 赞同：0
> 
> 时间：2012-12-25T21:07:18.977
> 
> 标签：wordpress, wordpress-theming

我正在尝试调用菜单以显示在页面的某个位置。主题在我想用作显示菜单的位置的内容上方有一个钩子。我不想修改主题的核心文件，所以目标是只使用functions.php修改来实现这一点

我将以下代码添加到我的functions.php

在我的菜单面板上，我已经将菜单“类别”分配给了“catmenu”主题位置。

```
register_nav_menu( 'catmenu', 'Categories Menu' );

//adds category menu on single post pages
function add_catmenu()
{
wp_nav_menu(array('menu'=>'categories'); }

add_action('thematic_abovecontent', 'add_catmenu'); 
```

Wordpress 似乎没有得到它。我收到 Parse 错误：语法错误，意外的 ';' 在 C:...\functions.php 第 253 行

第 253 行是具有 wp_nav_menu 调用的行。

我一直在尝试对此进行修改，例如回显整行 253，但我再次遇到错误或它不起作用。

我不知道如何做到这一点。有什么建议么？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T22:01:47.617

您缺少右括号：

```
wp_nav_menu(array('menu'=>'categories')); } 
```

# objective-c - Mac OS X，目标 C：安排每日方法执行

> ID：14033989
> 
> 赞同：0
> 
> 时间：2012-12-25T21:07:27.573
> 
> 标签：objective-c, macos

我正在尝试找到一种在指定时间按每日间隔安排方法调用的方法。例如，每天凌晨 3 点。

`NSTimer`并且提供了类似的功能，允许您在指定的持续时间之后安排任务，但是如果有一种方法可以一次安排，而不是在时间段到期后安排，那就太好了。

谁能给我一些关于如何做到这一点的建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T21:09:52.687

在 Stack Overflow 上提问之前先浏览一下类文档总是很不错的。NSTimer 文档说有一种方法：

```
- (id)initWithFireDate:(NSDate *)date interval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats 
```

让`date`第二天早上 3 点和时间间隔 - 24 小时。

# java - Java 中的接口——它们有什么用？

> ID：14033992
> 
> 赞同：10
> 
> 时间：2012-12-25T21:07:51.967
> 
> 标签：java, interface

> **可能重复：**
> [接口的用途（续）](https://stackoverflow.com/questions/4052621/the-purpose-of-interfaces-continued)

我不久前才开始学习Java。
我遇到过`Interfaces`我知道如何使用但仍然不能完全理解它的想法。
据我了解，`interfaces`通常由类实现，然后必须实现接口中声明的方法。
问题是——究竟有什么意义？将接口中的方法实现为普通的类方法不是更容易吗？使用接口到底有什么好处？

我试过在谷歌上寻找答案。有很多，但我仍然无法理解它的意义。我也阅读[了这个问题](https://stackoverflow.com/questions/9948211/java-interfaces-what-exactly-is-in-the-contract)及其答案，但整个合同只是让它变得更加复杂......

希望有人可以将其简化得足够好！:)
提前谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T21:15:54.017

接口允许您在运行时提供不同的实现、注入依赖项、分离关注点、使用不同的实现进行测试。

只需将接口视为类保证实现的合同。实现接口的具体类是无关紧要的。不知道这是否有帮助。

认为一些代码可能会有所帮助。这并不能解释接口的更多内容，请继续阅读，但我希望这能让您入门。这里的重点是你可以改变实现......

```
package stack.overflow.example;

public interface IExampleService {
void callExpensiveService();
}

public class TestService implements IExampleService {

@Override
public void callExpensiveService() {
    // This is a mock service, we run this as many 
    // times as we like for free to test our software

}
}

public class ExpensiveService implements IExampleService {
@Override
public void callExpensiveService() {
    // This performs some really expensive service,
    // Ideally this will only happen in the field
    // We'd rather test as much of our software for
    // free if possible.
}
}

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {

    // In a test program I might write
    IExampleService testService = new TestService();
    testService.callExpensiveService();

    // Alternatively, in a real program I might write
    IExampleService testService = new ExpensiveService();
    testService.callExpensiveService();

    // The difference above, is that we can vary the concrete 
    // class which is instantiated. In reality we can use a 
    // service locator, or use dependency injection to determine 
    // at runtime which class to implement.

    // So in the above example my testing can be done for free, but 
    // real world users would still be charged. Point is that the interface
    // provides a contract that we know will always be fulfilled, regardless 
    // of the implementation. 

}

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-25T21:23:03.363

接口可用于许多事情。最常见的用途是**多态性**和[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，您可以在运行时更改依赖关系。例如，假设您有一个名为 Database 的接口，它有一个名为`getField(...)`.

```
public interface Database 
{
    public void getField(String field);
} 
```

现在假设您在应用程序中使用了两个数据库，具体取决于您的客户端：MySQL 和 PostgreSQL。您将有两个具体的类：

```
public class MySQL implements Database
{
    // mysql connection specific code
    @Override
    public void getField(String field)
    {
        // retrieve value from MySQL
    }
} 
```

和...

```
public class PostgreSQL implements Database
{
    // postgre connection specific code
    @Override
    public String getField(String field)
    {
        // retrieve value from Postgre
    }
} 
```

现在根据您的客户偏好，您可以在 main 中实例化 MySQL 或 PostgreSQL 类

```
 public static void main(String args[])
 {
     if (args[2].equals("mysql"))
         Database db = new MySQL();
     else
         Database db = new PostgreSQL();
 }

 //now get the field
 String foo = db.getField(); 
```

或者您可以使用带有 JS 或 Ruby 的 Factory/Abstract Factory 或脚本引擎。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-25T21:11:18.357

它们用于实现[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)而不需要使用继承。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-25T21:23:08.247

接口的想法是它们指定一个类可以实现的契约。您阅读的另一篇文章主要介绍了这个想法。

仅仅直接从接口实现方法是不够的，因为其他方法可以使用接口类型来要求这些方法存在。

让我们以[AutoCloseable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)为例。唯一的方法是 close 方法，但使用类型来表达“我需要一个可以关闭的参数”的想法比列出所有方法要容易得多：

```
public void passMeSomethingThatICanClose(AutoCloseable bar) {
    //stuff goes here
    bar.close(); //the compiler knows this call is possible
} 
```

如果我们没有简洁的类型名称，方法就必须明确列出需求，这不是很容易，尤其是当接口“契约”有很多方法时。

这也适用于另一种方式。通过使用特定的关键字“implements AutoCloseable”来表示意图，编译器可以告诉您您是否没有正确实现合同。

```
public class BrokenCloseable implements AutoCloseable {
    public void colse() {  //ERROR — see the typo?
        //blah
    } 
```

}

这是一个错误，因为该方法的名称错误。在 Java 中，编译器可以（并且将会）告诉您这一点。但是如果你只负责自己实现这些方法，你就不会出错。相反，您的班级只会默默地“不能”自动关闭。

其他一些语言（Python 是一个很好的例子）不会以这种方式做事——而是按照您在问题中建议的方式做事。这就是所谓的“鸭子打字”（如果它看起来像鸭子，而嘎嘎叫的像鸭子，那就把它当作鸭子对待），它也是一种可行的做事方式，只是与 Java 不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-25T21:21:28.320

因为“死亡的致命钻石”。让我们考虑一下这种情况：

`Parent`您用允许多重继承的编程语言编写类（名称：）。该类包含一个实例变量 ( `int a;`) 和一个方法 ( `void hello()`)。然后创建两个类（`Kid1`和`Kid2`）。每个类都扩展了`Parent class`. 然后你覆盖`hello();`两个`Kid1`和`Kid2`类中的方法，并为变量分配一些值`a`，也在两个`Kid1`和`Kid2`类中。在最后一步中，您创建第 4 个类（如`Main`）扩展`Kid1`和`Kid2`类（多重继承）。现在......问题是，哪些`hello();`方法将`Main`类继承以及`a`变量的值。

由于Java中没有多重继承，我们有`interfaces`......包含抽象方法的抽象类。我们可以实现多个接口，但在某些情况下，我们必须重写所有实现`interface`包含的方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-25T21:14:21.043

接口指定功能。在某种程度上，它们提供了多重继承。假设我有一个对列表执行某些操作的函数。但不仅仅是一个列表，任何集合。我可以遍历内容的任何内容。所以我使用接口Iterable。

```
public int randomMethod(Iterable<Integer> li) {
...
} 
```

现在这适用于 Lists 和 HashSets 以及所有不同的东西，它们**以完全不同的方式实现和工作，属于不同的类结构，但都提供了这个基本功能**。这与一个大型游戏循环不同，该循环是`.update()`所有扩展公共类的实体，尽管可以使用接口。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-25T21:14:22.550

以`List<T>`界面为例。您只能在某一时刻决定是否要在特定场合使用 an`ArrayList<T>`或 a （或其他相关的东西）。`LinkedList<T>`

然而，它们都实现了`List<T>`接口。因此，无论它们如何工作，或者它们是否分层相关，都可以保证它们公开了一组您可以使用的方法，并且您不必在代码中的每一点都知道您的集合对象背后的实现以结束。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-25T21:15:02.250

我建议你看看[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)和组合模式。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-25T21:15:40.143

您的问题是在一篇文章中广泛回答的方式，既不会太做作，也不会太笼统而没有用处。因此，我将尝试给出一个有意义的示例，说明接口何时非常有用。

假设您有许多代表各种类型对象的类。可能有十几个，或者任何足够大的数量。而且你在另一个类中有一些函数希望能够订购任意对象。为此，它需要能够比较任何两个对象并确定一个对象*是大于还是小于*另一个对象。由于每个对象都可以是您的许多类型的类中的任何一种，因此这个比较函数编写起来非常乏味，因为它必须确定每个对象是什么类型，然后通过为每个类调用适当的逻辑来进行比较。

进入界面。此时，您可以让所有类实现一个接口，例如 Comparable，它指定任何实现它的类都将实现一个 Compare 方法。

现在你的命令对象的函数将变得微不足道，因为它可以依赖于它需要比较的任何对象类都具有相同的 Comapre 方法这一事实。

这只是一个例子——而且是一个相当常见的例子。

# facebook - Facebook 推荐栏和动态内容？

> ID：14033995
> 
> 赞同：0
> 
> 时间：2012-12-25T21:08:49.990
> 
> 标签：facebook, facebook-like, facebook-recommendations

好的，我在[http://www.gablabelle.com/](http://www.gablabelle.com/)有一个投资组合。当您单击缩略图时，一张（滑块的）幻灯片会与请求的照片一起出现。伟大的。

如右下角所示，我安装了 Facebook 推荐栏。我希望将“赞”按钮链接到我在那个特定时刻所在的幻灯片。

代码的简化版本：

```
slider.ev.on('SlideChange', function(event) {
// Show me the URL, works fine
    console.log(href);
// Trying to change the URL of the Facebook Recommandations Bar plugin
    $(".fb-recommendations-bar").attr("data-href", href);
// The trigger
    FB.XFBML.RecommendationsBar.markRead(href);
}); 
```

的HTML：

```
<div id="social" class="hide">
    <div class="fb-recommendations-bar" data-href="http://www.facebook.com/gablabellephoto" num_recommendations="0" data-trigger="manual" data-site="http://www.gablabelle.com/"></div>
</div> 
```

Facebook 文档说明如下：

[https://developers.facebook.com/docs/reference/plugins/recommendationsbar/](https://developers.facebook.com/docs/reference/plugins/recommendationsbar/)

> 手动 - 使用此选项手动触发插件。当你想触发插件时，调用 FB.XFBML.RecommendationsBar.markRead(href); 在 JavaScript 中。href 参数是可选的，如果未设置，将默认为当前页面。如果提供，它必须与 XFBML 标记上的 href 参数匹配。当您有更多多页文章时，手动触发器很有用。例如，在一篇三页的文章中，您将在第一页和第二页添加 trigger="manual" 并且永远不要在这些页面上调用 markRead JavaScript 函数。

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T22:34:22.823

确定使用

```
$(".fb-recommendations-bar").data("href", href); 
```

代替

```
$(".fb-recommendations-bar").attr("data-href", href); 
```

和

```
FB.XFBML.parse(); 
```

或者

```
FB.XFBML.parse(document.getElementById('.fb-recommendations-bar')); 
```

代替

```
FB.XFBML.RecommendationsBar.markRead(href); 
```

作品！

# javascript - 使用 CSS 的绝对大小

> ID：14033996
> 
> 赞同：2
> 
> 时间：2012-12-25T21:09:20.073
> 
> 标签：javascript, android, html, css, android-browser

我知道 CSS 中有一些绝对大小的单位。例如，cm、in、mm……但是当我在我的网页中使用它们时，它们很少受到尊重。

有关屏幕物理尺寸和像素分辨率的信息应该可以从 EDID 获得——这样浏览器就可以访问它们并计算该特定设备上 1 厘米内的像素数量。我说的是普通的 CRT/LED/等离子屏幕，而不是投影仪。

我想在移动设备上使用它。一个通用标准是每个触摸目标的尺寸至少为 9 毫米。但是当我`height: 9mm`在我的 CSS 代码中使用时，我的 HTC Desire HD 上的实际尺寸约为 3 毫米。

那么如何让浏览器使用绝对大小来显示元素呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T21:32:33.297

你不能。无论出于何种原因，移动设备上的浏览器都会一致地告诉您宽度为`1in`（“一英寸”）的元素是 96 像素宽。实际分辨率是多少并不重要。他们都是这么说的。

解决问题的唯一方法是让设备制造商（和设备软件供应商）承担足够大小的“虚拟像素”的全部责任。换句话说，您必须信任 Apple、Google、Samsung、LG、HTC、摩托罗拉等，以向公众提供使您的 16 像素文本在用户正在查看的任何设备上都可以阅读的设备，而不管涉及多少真实像素带有一个 16 像素的字形。

有时，你输了；新的 iPad Mini 就是一个很好的例子，因为它报告的屏幕尺寸与 iPad 2 相同，但屏幕要小得多。这意味着你在 iPad 2 上漂亮而清晰的 16 像素在 iPad Mini 上非常小。您的网页几乎不可能确定它是在 iPad Mini 还是 iPad 2 上（设计使然！Apple*故意*这样做）所以最终结果是 iPad Mini 的不幸购买者病了 -由制造商提供。

相比之下，Nexus 7 平板电脑的实际屏幕分辨率*高于*iPad Mini，但它向您的网页报告的屏幕尺寸*较小。*这意味着您在*该*设备上的 16 像素文本看起来很棒 — Nexus 7 的所有者得到了该制造商的良好服务。

（您当然可以提供允许用户调整布局的工具。对于响应式网站，由于各种浏览器特性（**错误**），很难让一个可以通过熟悉的移动设备手势进行捏合/缩放的网站正常运行。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T21:33:19.207

这在很大程度上取决于设备设置。在许多情况下——出于“兼容性原因”——真正的互操作性已经与将产品推向市场进行了交易。

或者换句话说：设备供应商为他们的客户固定了网站，这样他们就可以“按照他们所知道的那样”上网。

> [你的愿望高清：](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#HTC)
> 
> *   对角线厘米（英寸）：**11 (4.3)**
> *   分辨率：**480×800**
> *   ppcm (PPI): **85 (217) ^***
> *   CSS像素比：**1.5**
> 
> ^*基于给定显示尺寸的近似计算。

如果您看到列表，您可以想象每个设备的情况都不同。所以你不能相信设备本身。

如果你想解决这个问题，你需要为你的用户提供一种配置方法，以便你可以采用。一些供应商/浏览器提供标题，告诉这些设备做真实的事情。这一切都取决于，我手头没有很好的资源来轻松地在全球范围内解决这个问题。我会从研究不同的模型及其浏览器软件开始，然后创建一个矩阵，如果有一些常见的程序可用并且它们是否可以一起工作。

在那之前，我只会问用户，使用真实设置，但根据用户偏好对 body 元素进行采用设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T22:25:25.957

有两个基本的东西`9mm`与 9 毫米的物理尺寸不同。

首先，在显示设备中，[锚单元](http://www.w3.org/TR/css3-values/#absolute-lengths)（如 CSS Values and Units Module Level 3 中所述）通常是像素，并且`mm`单位被解释为满足等式`1in`= `25.4mm`= `96px`。（即使在印刷媒体中，`mm`原则上应该锚定到物理毫米的地方，它也有所偏离。）对此您无能为力。

其次，在移动设备中，浏览器通常会自动缩放页面。原因是，否则大多数页面会表现得非常糟糕，因为它们是为更大的屏幕设计的（即使就每个方向的像素数而言）。可以使用类似的标签来防止这种情况

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

仅当页面确实设计为适应各种视口大小（包括小尺寸）时才应使用此选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T21:30:47.897

如果这些真实世界的测量结果永远可靠，那么只有在用于打印格式时才会如此。任何电子产品都会以像素为单位进行思考，而不是这些像素根据实际测量值转换为什么。例如，当您将设备插入具有不同分辨率和 DPI 的投影仪或外接显示器时，cm 和 mm 应该是什么意思？

哪个设备跟踪 mm 和 cm 转换为什么？显示设备还是发送显示数据的设备？简直太乱了。RL 测量仅用于打印，即使在那里，根据我的经验，它们也可能有点冒险。至少我几年前的经验是冒险的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T12:18:18.147

我想了一个办法：大多数浏览器在用户代理标头中沿着 HTTP 请求发送设备类型。基于这些信息，我可以在服务器上找出真正的 DPI 并将其发送回响应中（例如，作为修改后的 CSS）。

但是，保持和维护设备数据库以获得精确的 DPI 成本很高。我最终使用了一组常用参数中的近似 DPI。在这种情况下，1mm 不是恒定的，但应该尽量减少差异（通常）。