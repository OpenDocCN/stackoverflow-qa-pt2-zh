# StackOverflow 问答 15817000-15817999

# android - 在 Android 中连接一个已经存在的数据库

> ID：15817000
> 
> 赞同：0
> 
> 时间：2013-04-04T16:43:56.620
> 
> 标签：android

在我的 android 应用程序中连接外部数据库并从中检索数据的最佳方法是什么？我正在尝试开发一个简单的测验应用程序，应该从数据库中检索问题及其选项。我已经使用 SQLite 浏览器创建了数据库。我看过很多教程，这些教程讲述了如何创建数据库并在 android 中使用它。但我找不到任何教我如何从已创建的数据库中检索的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:24:18.617

你的问题不清楚

如果您要连接到预先创建和预填充的数据库，那么您应该将该 SQLite 数据库文件嵌入到您的 APK 中并连接它并像在教程中看到的那样继续操作。看看[Ship an application with a database](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)

如果您想从远程机器上存在的数据库中检索数据，那么您必须使用一种 Web 服务技术（例如 XML Web 服务）公开数据并在您的 Android 应用程序中使用它。

# sql - SQL查询选择日期之间的日期 - 30天

> ID：15817001
> 
> 赞同：-2
> 
> 时间：2013-04-04T16:44:01.630
> 
> 标签：sql, teradata

我在这里有一个查询，我正在尝试进行查询，但我无法让它正常工作。

所以基本上我想要做的是在给定的负 30 天的日期之间进行查询......所以在给定的负 30 天的日期之间的任何内容。

在我的查询中，我想确保`RSLVD_DTTM`等于`TICKETDATE`或在`TICKETDATE`.

例子。

```
RSLVD_DTTM = TICKETDATE BETWEEN TICKETDATE - 30 DAYS 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:49:25.907

您没有指定 DBMS，所以这是 ANSI SQL

```
where RSLVD_DTTM between TICKETDATE  - interval '30' DAY and TICKETDATE 
```

# mysql - 提取 IPV4 的前三个八位字节

> ID：15817003
> 
> 赞同：9
> 
> 时间：2013-04-04T16:44:03.893
> 
> 标签：mysql

假设有一张表只有一个字段。表已命名`address`，并有一个名为的字段`ip`，其中包含一个 IPV4 地址作为其值

**样本数据**

```
192.168.120.201
192.168.120.202
192.168.120.203
192.168.120.204
192.168.120.205
192.168.121.3
192.168.121.50 
```

我需要在这个表上运行一个查询，它将返回`COUNT`前三个八位字节的数据

**预期产出**

> 网络计数
> 
> 192.168.120 5
> 
> 192.168.121 3

我尝试使用`SUBSTR` 喜欢

```
SELECT SUBSTR(ip,1,10) as network,COUNT(*) as c FROM address GROUP BY network HAVING(c>1) 
```

但问题是，`SUBSTR`如果所有前 3 个八位字节每个都有 3 个数字，这只会按预期工作，但这会在前三个八位字节中每个没有 3 个数字的任何 IP 地址上中断。例如，这不适用于

> 192.168.0.0
> 
> 192.2.3.50
> 
> 192.23.4.60

**问题**

上述查询是否有任何替代方案适用于上述所有情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T16:46:37.443

不要进行字符串操作。您最好将 IP 转换为整数并使用一些位掩码，例如

```
SELECT INET_NTOA(INET_ATON(ipfield) & 0xFFFFFF00) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T16:51:38.927

您可以使用它`substring_index`来执行此操作：

```
SELECT substring_index(network, '.', 3) AS Octet,
       COUNT(*)
  FROM address
  GROUP BY Octet 
```

这是一个[SQLFiddle](http://sqlfiddle.com/#!2/40a25/8)示例

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-04T16:53:05.250

我建议使用`SUBSTRING_INDEX`这个：

```
SELECT SUBSTRING_INDEX(ip, '.', 3) as network, COUNT(*) as c
FROM address
GROUP BY network
HAVING(c>1)
LIMIT 500 
```

# android - 我的应用程序的每个 Activity 都单独显示为一个应用程序

> ID：15817004
> 
> 赞同：1
> 
> 时间：2013-04-04T16:44:07.110
> 
> 标签：android, android-activity, icons

正如标题所说，出于某种我不明白的原因，我在应用程序中创建的每个活动都显示为手机应用程序菜单上的应用程序图标。

有人可以帮我解决这个奇怪的问题吗？

如果您需要一些代码，请索取（我不知道哪些代码与这些东西有关）。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:46:15.893

在您的清单中，从所有活动中删除这些行，除了您要打开的活动：

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

例子：

```
<activity
    android:name="your.package.name.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <!-- This line declares this Activity as the start point -->
        <action android:name="android.intent.action.MAIN" />
        <!-- This line adds a launcher icon -->
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity
    android:name="your.package.name.OtherActivity"
    android:label="@string/app_name" >
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:47:17.167

在您的清单文件中，您必须为所有活动设置启动器意图过滤器。仅在启动器活动中保留启动器意图过滤器。

# javascript - 如何将 javascript 文件加载到 osx 应用程序中的 WebView 中？

> ID：15817013
> 
> 赞同：2
> 
> 时间：2013-04-04T16:44:32.850
> 
> 标签：javascript, objective-c, xcode, macos, cocoa

基本上我有一个 webview，我想在加载的页面上运行一些 javascript。基本加载是这样发生的：

```
NSString *filePath = [[NSString alloc] initWithString:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"login.js"]];
NSURL *imageURL = [NSURL filePath];

NSString *basicLoadScript = [NSString stringWithFormat:@"document.write('<script src=\"%@\"></script>')",imageURL];

[self.webView stringByEvaluatingJavaScriptFromString:basicLoadScript]; 
```

这是我最近的尝试，我得到了错误：

> 不允许加载本地资源

有没有更好的方法来加载文件？（或至少一个有效的）干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:49:57.843

您可以将文件的内容读入字符串，然后将该`stringByEvaluatingJavaScriptFromString:`字符串用作参数的函数。

出于安全原因，可能不允许 WebView 直接访问文件（但这只是一个怀疑，我没有任何证据）。

# macos - 保护嵌入在我的应用程序中的加密密钥

> ID：15817016
> 
> 赞同：0
> 
> 时间：2013-04-04T16:44:40.147
> 
> 标签：macos, cocoa, encryption

我想加密一个`NSString`所以我提到[了 NSString 的 AES Encription](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)。该代码运行良好，我可以使用它。

但如果有人能拿到加密密钥，就很容易解码我的`NSString`.

我`strings -a`在终端中对生成的可执行文件执行了命令，并且能够看到该加密密钥。

因此，我们在发送数据之前对其进行了保护，但加密密钥仍然暴露在外。如何保护此加密密钥？

**编辑：**我有多个进程在系统上运行。有时他们通过发布通知与 NSDistributedNotificationCenter 进行通信。有时，该通知充当命令。我担心的是任何人都可以发布通知并试图欺骗我的流程。所以我决定使用`postNotificationName:object:userInfo:deliverImmediately:`. 在这个 API 中，我可以发送加密数据（命令），并且只有我的可执行文件知道加密密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:34:27.413

您永远无法真正安全地隐藏字符串，只需对其进行混淆以保护自己免受简单攻击。一种合理的解决方案是将其与已知常数进行异或。将字符串拆分为单个字节，将每个字节与已知数字进行异或运算，并将生成的字节数组存储在二进制文件中。当您需要使用字符串时，使用相同的常量再次对数组字节进行异或运算，并从结果字节数组中创建一个字符串。

# css - 调整图像大小 html/css

> ID：15817017
> 
> 赞同：0
> 
> 时间：2013-04-04T16:44:40.530
> 
> 标签：css, html, image, resize

我在 Facebook 应用程序中有几张图片。问题是图像很大，无论是从电脑还是手机访问，我都需要它看起来很好。考虑到不同的屏幕尺寸，将其设置为某个固定尺寸显然会使其看起来很糟糕。
那么，我应该如何调整它的大小以使其在任何屏幕上看起来都很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:53:54.093

将`img`标签上的宽度和高度设置为（其容器的）百分比：

```
<img src="http://..." alt="" width="50%" height="30%" /> 
```

根据您的需要调整百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:08:03.983

使用媒体查询。例如：

```
 @media all and (min-width: 1001px) {
  img {
    width: 100%; /* insert prefered value */
    height: auto;
  }
}

@media all and (max-width: 1000px) and (min-width: 700px) {
  img {
    width: 100%; /* insert preferred value */
    height: auto;
  }
}

@media all and (max-width: 699px) and (min-width: 520px), (min-width: 1151px) {
  img {
    width: 100%; /* insert preferred value */
    height: auto;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:00:50.810

试试这个

```
 img
 {
    width:100%;/*adjust this value to your needs*/
    max-width: the size of the image;/* so it wont get bigger and pixelated*/
    height:auto;
 } 
```

如果可能，另一种选择是使用媒体查询，因此对于不同的浏览器大小，您可以加载不同大小的图像。

这是一个[小提琴](http://jsfiddle.net/VXtQv/)，看看这是否是您想要实现的目标

# css - 如何以包装器的全高浮动元素？

> ID：15817019
> 
> 赞同：29
> 
> 时间：2013-04-04T16:44:42.003
> 
> 标签：css, css-float, floating

HTML：

```
<div class="wrapper">
    <div class="left">
        Foo
    </div>
    <div class="right">
        Text row 1
    </div>
</div>

<div class="wrapper">
    <div class="left">
        Foo Bar
    </div>
    <div class="right">
        Text row 1<br>
        Text row 2<br>
        Text row 3
    </div>
</div> 
```

CSS：

```
.wrapper {
    overflow:hidden;
}

.left {
    width:80px;
    float:left;
    height:100%;
} 
```

如何给浮动 div 包装器的完整高度（其高度不同）？

没有jQuery可以吗？

测试：http: [//jsfiddle.net/Q6B43/](http://jsfiddle.net/Q6B43/)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-04T16:51:15.333

## 解决`display: table`方案

在表格中，一行的每个单元格具有相同的高度。

```
.wrapper {
    display: table;
    width: 100%;
}
.left, .right {
    display: table-cell;
} 
```

这是我认为最好的解决方案，但[在 IE8 之前不兼容](https://caniuse.com/#feat=css-table)。

这是此解决方案的[小提琴](http://jsfiddle.net/TYpfK/)。

## 使用绝对定位

绝对定位元素尊重它们的相对父元素`height`：

```
.wrapper {
    position: relative;
    padding-left: 85px;
}
.left {
    position: absolute;
    left: 0;
    top: 0;
} 
```

通常我不会**在**大多数情况下推荐绝对定位。但既然你有一个固定`width`的反正，**也许**没关系。但请注意，这将忽略`.left`. 高度仅由 控制`.right`。

这是[您的 Fiddle 的更新](http://jsfiddle.net/Q6B43/9/)。

## `flex`可行的解决方案

~~这太新了，我不建议现在使用它，但只是为了完整。~~您可以使用 CSS3 [`flex`](https://developer.mozilla.org/de/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes)，但要注意[浏览器兼容性](https://caniuse.com/#feat=flexbox)：

```
.wrapper {
    display: flex;
} 
```

[Fiddle](http://jsfiddle.net/kU6zx/4/) （在当前的Chrome 和 Firefox 中测试）。

## `grid`布局_

甚至比 flexbox 更新，CSS[`grid`](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout)接缝成为布局问题的完美答案。

```
.wrapper {
    display: grid;
    grid-template-areas: 'left right';
}

.left {
    grid-area: left;
}

.right {
    grid-area: right;
} 
```

如果您返回查看版本，则[浏览器兼容性很少。](https://caniuse.com/#feat=css-grid)此外，在我看来这对于OP的场景来说是大材小用，但对于未来更复杂的布局麻烦，这是一个非常强大的东西。

在[Fiddle](https://jsfiddle.net/4zw9x6yc/)中看到它。

* * *

## 回答 #2

> 赞同：-10
> 
> 时间：2013-04-04T16:50:08.560

添加：

```
body, html { height:100% } 
```

并给你的包装器一个固定的像素高度。

# java - 使用 Jena API 进行基本 RDFS 推理

> ID：15817021
> 
> 赞同：0
> 
> 时间：2013-04-04T16:45:02.400
> 
> 标签：java, semantic-web, jena, reasoning, inference-engine

我目前正在关注 Jena API 推理教程：

[https://jena.apache.org/documentation/inference/](https://jena.apache.org/documentation/inference/)

作为一个测试我理解的练习，我想重写第一个示例，它演示了从编程构建的模型中进行的简单 RDFS 推理：

```
import com.hp.hpl.jena.rdf.model.*;
import com.hp.hpl.jena.vocabulary.*;

public class Test1 {
    static public void main(String...argv) {
        String NS = "foo:";
        Model m = ModelFactory.createDefaultModel();
        Property p = m.createProperty(NS, "p");
        Property q = m.createProperty(NS, "q");
        m.add(p, RDFS.subPropertyOf, q);
        m.createResource(NS + "x").addProperty(p, "bar");
        InfModel im = ModelFactory.createRDFSModel(m);
        Resource x = im.getResource(NS + "x");
        // verify that property q of x is "bar" (which follows 
        // from x having property p, and p being a subproperty of q)
        System.out.println("Statement: " + x.getProperty(q));
    }
} 
```

做同样的事情，但是使用从这个 Turtle 文件中读取的模型（这是我自己对上述内容的翻译，因此可能是错误的）：

```
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix foo: <http://example.org/foo#>.

foo:p a rdf:Property.
foo:q a rdf:Property.
foo:p rdfs:subPropertyOf foo:q.
foo:x foo:p "bar". 
```

使用此代码：

```
public class Test2 {
    static public void main(String...argv) {
        String NS = "foo:";
        Model m = ModelFactory.createDefaultModel();
        m.read("foo.ttl");
        InfModel im = ModelFactory.createRDFSModel(m);
        Property q = im.getProperty(NS + "q");
        Resource x = im.getResource(NS + "x");
        System.out.println("Statement: " + x.getProperty(q));
    }
} 
```

这似乎不是正确的方法（我特别怀疑我对`q`财产的提取在某种程度上是不正确的）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:43:17.557

```
String NS = "foo:";
m.createResource(NS + "x") 
```

创建一个 URI 但 Turtle 版本有 foo:x = [http://example.org/foo#x](http://example.org/foo#x)

通过打印模型查看差异`im.write(System.out, "TTL");`

更改`NS = "foo:"`为`NS = "http://example.org/foo#"`

# asp.net - 将 ASP.NET 与 Excel 文件一起使用

> ID：15817026
> 
> 赞同：1
> 
> 时间：2013-04-04T16:45:08.307
> 
> 标签：asp.net, vb.net, export-to-excel

我想从 ASP.NET 中的网页创建一个 excel 文件，我正在使用 Microsoft.Office.Interop.Excel 库，但我无法删除在服务器端创建的文件，因为我进入了与时俱进的麻烦。我想知道是否有一种方法可以使用例如数据库的数据创建一个 Excel 文件，然后客户端可以下载该文件而不会使服务器饱和。

实际上，在服务器中创建文件后，我在 VB 中使用此代码，但它不像我想要的那样工作：

```
Dim p As Process = New Process()
    p.StartInfo = New ProcessStartInfo()
    p.StartInfo.UseShellExecute = True
    p.StartInfo.FileName = "taskkill.exe"
    p.StartInfo.Arguments = "/F /IM EXCEL.exe"
    p.Start()
    p.WaitForExit()
    Thread.Sleep(24)
    Response.ContentType = "application/vnd.ms-excel"
    Response.AppendHeader("Content-Disposition", "attachment; filename=Reporte.xlsx")
    Response.TransmitFile(Server.MapPath("~/Resources/" & HiddenField1.Value.ToString() & ".xlsx"))
    'Thread.Sleep(10000)
    'Dim fso, f2
    'fso = CreateObject("Scripting.FileSystemObject")
    'f2 = fso.GetFile(Server.MapPath("~/Resources/" & HiddenField1.Value.ToString() & ".xlsx"))
    'f2.Delete()
    'Thread.Sleep(24)
    Response.End() 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:27:04.467

您可能会考虑使用 Excel 以外的其他工具来创建要发送的文件。

例如，有 Carlos Aguilar Mares 的免费 Excel XML 库： http: [//www.carlosag.net/tools/excelxmlwriter/](http://www.carlosag.net/tools/excelxmlwriter/)。

此外，SQL Server Reporting Services 等一些报告工具可以选择导出本机 Excel 文件。这是生成带有格式的 Excel 文件的一种方法。

最后，Excel 可以读取其他类型的文件，例如 CSV 和 HTML 文件。这些更容易生成，并且不需要 Excel 本身来生成。

一个很好的选项： [Generating an Excel file in ASP.NET](https://stackoverflow.com/questions/150339/generating-an-excel-file-in-asp-net?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:27:54.020

Microsoft 不正式支持在服务器上自动执行 excel，我建议您找到替代方案。微软在这里有很多关于这个主题的好信息：http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)。

> 所有当前版本的 Microsoft Office 都经过设计、测试和配置，可作为最终用户产品在客户端工作站上运行。他们假设一个交互式桌面和用户配置文件。它们不提供满足设计为无人值守运行的服务器端组件的需求所必需的可重入性或安全性级别。
> 
> **Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。**
> 
> 如果您正在构建在服务器端上下文中运行的解决方案，您应该尝试使用已确保无人值守执行安全的组件。或者，您应该尝试找到允许至少部分代码在客户端运行的替代方案。如果您使用来自服务器端解决方案的 Office 应用程序，该应用程序将缺少许多成功运行所需的功能。此外，您将承担整体解决方案稳定性的风险。

他们甚至提供了如何避免使用它们的建议：

> 大多数服务器端自动化任务涉及文档创建或编辑。Office 2007 支持新的 Open XML 文件格式，允许开发人员在服务器端创建、编辑、读取和转换文件内容。这些文件格式使用 Microsoft .NET 3.x 框架中的 System.IO.Package.IO 命名空间来编辑 Office 文件，而无需使用 Office 客户端应用程序本身。这是处理从服务对 Office 文件的更改的推荐和支持方法。

他们还有使用 API 的教程：

[http://msdn.microsoft.com/en-us/library/bb739834.aspx](http://msdn.microsoft.com/en-us/library/bb739834.aspx)

[http://msdn.microsoft.com/en-us/library/bb727373.aspx](http://msdn.microsoft.com/en-us/library/bb727373.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:31:45.940

我们使用[EPPlus](http://epplus.codeplex.com/)来生成我们的 excel 文档。

它使您可以对输出进行相当多的控制，而且速度非常快。正如约翰所说，MS 完全不支持通过网站在服务器上自动执行 Excel，他们建议您使用替代方案。

# xml - LINQ 根据值加载特定的 XML 数据

> ID：15817031
> 
> 赞同：0
> 
> 时间：2013-04-04T16:45:34.807
> 
> 标签：xml, linq, select

也许有人可以帮助解决我遇到的问题。我有这个 XML 数据：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<data>
<header>
    <version>3.1</version>
    <date>2013-04-02</date>
    <filedate>2013-04-02</filedate>
</header>
<value>
    <TypeId>67772764</TypeId>
    <ServiceID>GN1600</ServiceID>
    <EvbAsof>2013-04-02</EvbAsof>
    <Rating>2</Rating>
    <AdditionalColumns>
        <Name>EvbAvg</Name>
        <Value>7.29495</Value>
    </AdditionalColumns>
    <AdditionalColumns>
        <Name>EvbHigh</Name>
        <Value>12.46</Value>
    </AdditionalColumns>
    <AdditionalColumns>
        <Name>EvbLow</Name>
        <Value>2.88563</Value>
    </AdditionalColumns>
    <AdditionalColumns>
        <Name>EvbBench</Name>
        <Value>1.86241</Value>
    </AdditionalColumns>
</value> 
```

……

我需要为每个节点提取以下数据作为一组：

*   来自标头节点的日期
*   类型ID
*   服务标识
*   评分
*   来自附加列的 EvbAvg 值
*   来自附加列的 EvbBench 值

我设法获得了 TypeID、ServiceID 和 Rating，但我只是不知道如何在同一个查询中从标题中获取日期以及来自 AditionalColumns 节点的 EvbAvg 和 EvbBench。到目前为止，这是我的代码：

```
 var ServiceDesc = from c in XElement.Load("download.xml").Elements("value")
                       select new
                       {
                           TypeID = c.Element("TypeId").Value,
                           ServiceID = c.Element("ServiceID").Value,
                           Rating = c.Element("Rating").Value
                       } 
```

如果有人可以帮助我，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:42:01.887

最后，我设法让文件的供应商以更友好的方式更改格式。谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T23:10:06.727

假设您有一个`header`元素和一个元素`value`，那么将它们作为一个集合访问可能没有什么意义（如果每个元素都有多个实例，我们如何匹配它们？）。

你可以简单地尝试如下：

```
var doc = XElement.Load("download.xml");
var header = doc.Elements("header").Single();
var val = doc.Elements("value").Single();

var serviceDesc = new
{
   Date = DateTime.Parse(header.Element("date").Value,
                         System.Globalization.CultureInfo.InvariantCulture),
   TypeID = val.Element("TypeId").Value,
   ServiceID = val.Element("ServiceID").Value,
   Rating = val.Element("Rating").Value,
   EbvAvg = val.Descendants("AdditionalColumns")
               .Where(node => node.Descendants("Name").Single().Value == "EvbAvg")
               .Select(node => node.Descendants("Value").Single().Value)
               .Single(),
   EbvBench = val.Descendants("AdditionalColumns")
                 .Where(node => node.Descendants("Name").Single().Value == "EvbBench")
                 .Select(node => node.Descendants("Value").Single().Value)
                 .Single()                
}; 
```

# c++ - 提升几何cartesian2d.hpp

> ID：15817037
> 
> 赞同：2
> 
> 时间：2013-04-04T16:45:51.527
> 
> 标签：c++, boost, clipping, boost-geometry

[我尝试在此处](http://geometrylibrary.geodan.nl/03__polygon__example_8cpp-example.html)的示例中使用 Boost Geometry 来执行此剪切示例

但是在最新的 Boost 库中我找不到...

`boost/geometry/geometries/cartesian2d.hpp`

有谁知道我在哪里可以找到这个文件？或者这个教程太旧了，文件现在已经过时了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:45:26.673

教程太老了。自编写该教程以来，发生了很大变化。

无论如何，我已经修改了您上面链接中的代码，以便它可以在 Boost 版本 1.53.0 中编译...

```
#include <boost/geometry.hpp>
#include <boost/geometry/geometries/point_xy.hpp>
#include <boost/geometry/geometries/polygon.hpp>
#include <boost/geometry/io/wkt/wkt.hpp>
#include <boost/geometry/multi/geometries/multi_polygon.hpp>

using namespace boost::geometry;

typedef model::d2::point_xy<double> point;
typedef model::ring< point > ring;
typedef model::polygon< point > polygon;
typedef model::multi_polygon< polygon > polygons;
typedef model::box< point > box;

// Define a polygon and fill the outer ring.
// In most cases you will read it from a file or database
polygon poly;
{
  read_wkt("POLYGON((2.0 1.3, 2.4 1.7, 2.8 1.8, 3.4 1.2, 3.7 1.6, \
        3.4 2.0, 4.1 3.0, 5.3 2.6, 5.4 1.2, 4.9 0.8, 2.9 0.7, \
        2.0 1.3))", poly);
}

// Polygons should be closed, and directed clockwise. If you're not sure if that is the case,
// call the correct algorithm
correct(poly);

// Polygons can be streamed as text
// (or more precisely: as DSV (delimiter separated values))
std::cout << dsv(poly) << std::endl;

// As with lines, bounding box of polygons can be calculated
box b;
envelope(poly, b);
std::cout << dsv(b) << std::endl;

// The area of the polygon can be calulated
std::cout << "area: " << area(poly) << std::endl;

// And the centroid, which is the center of gravity
point cent;
centroid(poly, cent);
std::cout << "centroid: " << dsv(cent) << std::endl;

// The number of points have to called per ring separately
std::cout << "number of points in outer ring: " << poly.outer().size() << std::endl;

// Polygons can have one or more inner rings, also called holes, donuts, islands, interior rings.
// Let's add one
{
    poly.inners().resize(1);
    ring& inner = poly.inners().back();
    read_wkt("POLYGON((4.0 2.0, 4.2 1.4, 4.8 1.9, 4.4 2.2, 4.0 2.0))", inner);
}

correct(poly);

std::cout << "with inner ring:" << dsv(poly) << std::endl;
// The area of the polygon is changed of course
std::cout << "new area of polygon: " << area(poly) << std::endl;
centroid(poly, cent);
std::cout << "new centroid: " << dsv(cent) << std::endl;

// You can test whether points are within a polygon
std::cout << "point in polygon:"
    << " p1: "  << (within(make<point>(3.0, 2.0), poly)?"true":"false")
    << " p2: "  << (within(make<point>(3.7, 2.0), poly)?"true":"false")
    << " p3: "  << (within(make<point>(4.4, 2.0), poly)?"true":"false")
    << std::endl;

// As with linestrings and points, you can derive from polygon to add, for example,
// fill color and stroke color. Or SRID (spatial reference ID). Or Z-value. Or a property map.
// We don't show this here.

// Clip the polygon using a bounding box
box cb(make<point>(1.5, 1.5), make<point>(4.5, 2.5));
polygons v;

intersection(cb, poly, v);
std::cout << "Clipped output polygons" << std::endl;
for (polygons::const_iterator it = v.begin(); it != v.end(); ++it)
{
    std::cout << dsv(*it) << std::endl;
}

union_(cb, poly, v);

polygon hull;
convex_hull(poly, hull);
std::cout << "Convex hull:" << dsv(hull) << std::endl;

// If you really want:
//   You don't have to use a vector, you can define a polygon with a deque
//   You can specify the container for the points and for the inner rings independently

typedef model::polygon<point, true, true, std::vector, std::deque> polygon_deq;
polygon_deq poly2;
polygon_deq::ring_type& r = poly2.outer();
append(r, make<point>(2.8, 1.9));
append(r, make<point>(2.9, 2.4));
append(r, make<point>(3.3, 2.2));
append(r, make<point>(3.2, 1.8));
append(r, make<point>(2.8, 1.9));
std::cout << dsv(poly2) << std::endl; 
```

# mongodb - 使用 Java 可以绕过 DBObject API 直接在 MongoDB 中存储 BSON 文档吗？

> ID：15817038
> 
> 赞同：1
> 
> 时间：2013-04-04T16:45:52.527
> 
> 标签：mongodb, bson, mongo-java

我认为[Jongo](http://jongo.org/)是通过使用 Jackson 管道有效地将 POJO 转换为相应的 BSON 来实现的，从而绕过任何中介，例如`DBObject`. 但是，它依赖于 Jackson 2.x（现在是 FasterXML），我无法从 Jackson 1.9.x 升级，所以我似乎不能使用 Jongo。

所以，我正在使用标准的 Java mongo 驱动程序，这需要我将 POJO 映射到相应的 DBObject （请参阅[Efficient POJO mapping to/from Java Mongo DBObject using Jackson](https://stackoverflow.com/questions/15789471/efficient-pojo-mapping-to-from-java-mongo-dbobject-using-jackson)），我想它由驱动程序编组到 BSON 缓冲区在被发送到 Mongo 服务器进程之前的某个时间点。

我的问题是——我可以自己准备 BSON 缓冲区并将其交给驱动程序吗？

# c++ - 将 C++ 向量写入输出文件

> ID：15817051
> 
> 赞同：5
> 
> 时间：2013-04-04T16:46:24.017
> 
> 标签：c++, file-io, vector, formatting

```
ofstream outputFile ("output.txt");

if (outputFile.is_open())
{
     outputFile << "GLfloat vector[]={" <<  copy(vector.begin(), vector.end(), ostream_iterator<float>(cout, ", ")); << "}" << endl;
}
else cout << "Unable to open output file"; 
```

如何将向量输出到文件，每个浮点数用逗号分隔？如果可能的话，我还想避免打印方括号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:47:12.843

```
outputFile << "GLfloat vector[]={";
copy(vector.begin(), vector.end(), ostream_iterator<float>(outputFile , ", ")); 
                                                           ^^^^^^^^^^
outputFile << "}" << endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T16:55:51.043

首先，您不应该调用您的变量`vector`。给它一个不是标准库中类的名称的名称。

其次，`ostream_iterator`将在向量的最后一个元素之后附加 a `','`，这可能不是您想要的（分隔符应该是一个*separator*，并且没有什么可以将向量的最后一个值与另一个值分开）。

在 C++11 中，您可以使用简单的基于范围的`for`循环：

```
outputFile << "GLfloat vector[]={";
auto first = true;
for (float f : v) 
{ 
    if (!first) { outputFile << ","; } 
    first = false; 
    outputFile << f; 
}
outputFile << "}" << endl; 
```

在 C++03 中，它会更加冗长：

```
outputFile << "GLfloat vector[]={";
auto first = true;
for (vector<float>::iterator i = v.begin(); i != end(); ++i) 
{ 
    if (!first) { outputFile << ","; c++; } 
    first = false;
    outputFile << *i;
}
outputFile << "}" << endl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T16:47:49.437

您已经采用了解决方案并尝试将其粘贴到流插入中。这不是它的工作原理。它应该是一个单独的行：

```
outputFile << "GLfloat vector[]={";
copy(vector.begin(), vector.end(), ostream_iterator<float>(outputFile, ", "));
outputFile << "}" << endl; 
```

该`copy`算法只是将元素从一个范围复制到另一个范围。`ostream_iterator`是一个特殊的迭代器，`<<`当你做`*it = item_to_insert;`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:11:33.787

这是一个很好的通用（仅标头）库，您只需将其包含在代码中，即可轻松打印任何标准容器：http: [//louisdx.github.com/cxx-prettyprint/](http://louisdx.github.com/cxx-prettyprint/)

# c# - 如何返回列表 [] 在 Web 服务方法中

> ID：15817053
> 
> 赞同：0
> 
> 时间：2013-04-04T16:46:31.240
> 
> 标签：c#, winforms, web-services, return

我想`List<string>[]`在 Web 服务中返回并以 Windows 形式使用该返回，如下所示：

```
 [WebMethod]
    public List<string>[] MyMethod()
    {
       ...
       ...

        List<string>[] list_ar = new List<string>[]{list_optgroup, list_option, list_optgroup_option};

        return list_ar;
    } 
```

但在 Windows 窗体方面，我应该得到这样的返回值：

```
 MyService_Soft service = new MyService_Soft();
        string[][] str_ar = service.MyMethod(); 
```

发生了什么事，我怎样才能`List<string>[]`在 Windows 窗体一侧得到它？

此外，我似乎在这些行中有错误：

```
 MyService_Soft service = new MyService_Soft();
        string[][] str_ar = service.FillComboBoxes(); 
```

**错误 ：**

> 无法自动进入服务器。连接到服务器机器 'blablabla' 失败。未知用户名或错误密码...

这个错误是什么意思，我怎样才能弄清楚该 Web 服务中的哪一行导致了这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:57:34.850

我没有看到任何错误。您不能从一个调试进程同时调试 2 个进程。由于服务器代码在单独的进程中运行，因此您无法介入。

要调试服务器代码，请使用服务器项目源代码打开另一个 MS Visual Studio 实例（或您使用的任何 IDE），然后转到菜单调试 -> 附加到进程，然后找到您的服务器服务托管进程并单击“附加”。

至于返回 string[][] 而不是 List[] - 这也是预期的行为，因为客户端应用程序不知道返回的集合的类型 - 代理类是基于 WSDL 文件自动生成的。实际上，您可以将其更改为使用 List<> 而不是数组。考虑 WCF 服务，打开 WCF SErvice 引用属性并选择集合类型（默认为数组，但可以根据需要更改为 List）。但我认为没有理由要求获取 List 而不是数组。**唯一的区别是 List 是可变的。** *从逻辑上讲，您不应该希望能够更改返回的集合！* **您最好根据返回的数组创建一个新集合并对其进行修改。**

**更新：代码请求。**

最后一个也是主要推荐的代码非常直接：

```
public List<string>[] SomeClientBuilsenessLogicMethod()
{
    var serviceClient = GetServiceClientInstance(); //you might want to have single instance (single connection) of WCF service client, so I implemented it's creation as factory method here.

    string[][] serviceData = serviceClient.MyMethod();

    List<string>[] mutableDataList = serviceData.Select(x=>x.ToList()).ToArray();//Not the best memory usage here probably (better is a loop), but for not big data lists it's fine.

    //Perform any needed operations for list changing. Again there is NO NEED to use List if you don't plan to add/remove items to/from that collection.

    return mutableDataList;
} 
```

# android - 将 pjsip 与 android 一起使用

> ID：15817054
> 
> 赞同：4
> 
> 时间：2013-04-04T16:46:34.757
> 
> 标签：android, java-native-interface, pjsip

我成功安装并构建了`pjsip`库，`pjsua`对于 android，我`pjsua`在我的设备上运行并且它工作，但是我仍然不知道如何使用这个库的方法。

我已经查看了`CSipSimple`应用程序，我注意到`jni`这两个项目的文件夹非常不同。

我是否必须将此库的每个 .c 文件转换为 .java 文件`SWIG`？如果有人有一个关于如何以非常简单的方式实现它的示例（例如 SIP 注册程序），那将会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-31T06:22:12.150

这取决于您希望如何使用该库。

pjsip 的最高级别 API 是 pjsua2 API，源代码中已经为您构建了一个 java SWIG 库。你可以看看这些例子。

[http://www.pjsip.org/docs/book-latest/html/intro_pjsua2.html#building-python-and-java-swig-modules](http://www.pjsip.org/docs/book-latest/html/intro_pjsua2.html#building-python-and-java-swig-modules)

但是，如果您不需要 sip 信令部分，而只需要媒体编解码器和传输部分。您可能必须自己设计一个 JNI 接口。您使用 C/C++ 编写程序并在 Android.mk 文件中链接 libpjsua.so。对于 pjsua api C 编程示例： [http ://www.pjsip.org/docs/latest/pjsip/docs/html/group__PJSUA__LIB__BASE.htm](http://www.pjsip.org/docs/latest/pjsip/docs/html/group__PJSUA__LIB__BASE.htm)

对于 pjmedia 示例：请参阅 pjmedia/src/test 下的测试代码

# iphone - 将图像从 iphone 应用程序发布到 restful WCF

> ID：15817058
> 
> 赞同：0
> 
> 时间：2013-04-04T16:46:42.057
> 
> 标签：iphone, .net, ios, wcf

我需要将图像从 ios 应用程序发布到 .net 4 restful WCF 服务。有人可以一起帮助以下代码（作为工作包），

在 .NET 端：接口代码、服务代码（实现）和 web.config XML。在 IOS 方面：对 wcf 部分的冒充。

虽然网上似乎有几个关于如何实现这一点的资源，但经过长时间的混淆，仍然无法实现。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:07:19.157

如果需要存储，只需将图像作为字节数组发送到 wcf 服务，并将其作为 blob 存储在 SQL Server 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:57:59.717

对于服务器端：将输入作为`Stream`- 这样您就可以接收任意数据（包括图像）。[此博客文章](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx)中的更多信息。对于客户端：查看[NSURLRequest](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)类 - 如果您搜索示例，您会找到很多示例，包括来自 StackOverflow 的此处。

# ruby-on-rails - Rails 3多态嵌套属性

> ID：15817060
> 
> 赞同：1
> 
> 时间：2013-04-04T16:46:43.347
> 
> 标签：ruby-on-rails, ruby, nested-forms, polymorphic-associations

我正在尝试从嵌套形式建立多态关系，该形式与我找到的所有示例都相反。我希望有人指出我的方式的错误。

```
class Container < ActiveRecord::Base
      belongs_to :content, :polymorphic => true
end
class Notice < ActiveRecord::Base
      has_one :container, :as => :content
end
class Form < ActiveRecord::Base
      has_one :container, :as => :content
end 
```

似乎大多数人会*从*通知或表单构建容器，但在我的情况下，通知或表单包含少量内容（文件位置或几个 db 字段），因此从构建通知或表单要干燥得多容器。

我想我可以通过添加来解决，`accepts_nested_attributes_for :content`但这给了我一个`unrecognized attribute :notice`当我尝试创建一个带有嵌套通知的容器时（寻找内容，而不是多态关联）

我可以手动完成并明确排除嵌套字段，例如

```
 if params[:container].has_key('notice')   
     @c = Container.new(params[:container].except(:notice)) 
```

然后建造，但这不是一种气味吗？有没有更好的办法？

感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:45:06.160

嵌套属性被设计为从父级到子级，而不是相反。此外，在这种情况下，嵌套属性如何知道您是在尝试创建对象`Notice`还是`Form`对象？

如果您发现从容器中构建内容的 DRYer 很可能是您的关联由内而外 - 尝试将您的架构更改为：

```
class Container < ActiveRecord::Base
  has_one :notice
  has_one :form
end

class Notice < ActiveRecord::Base
  belongs_to :container
end

class Form < ActiveRecord::Base
  belongs_to :container
end 
```

如果需要，您可以使用验证来确保只有一个子 (`:notice`或`:form`) 实际关联。

# vb.net - 如何编写每 5 分钟执行一次 vb.net 控制台应用程序的批处理文件

> ID：15817064
> 
> 赞同：0
> 
> 时间：2013-04-04T16:46:58.917
> 
> 标签：vb.net

我有一个 vb.net 控制台应用程序。这需要每 5 分钟运行一次。如何连接批处理文件以调用该 exe 文件并每 5 分钟执行一次。像代理一样。

按照建议，我已经编写了一个这样的 .bat 文件并将其保存为 .bat 文件并放入我的 bin 文件夹中

%~dp0MyconsoleApp>>%~dp0MyconsoleApp_Log.txt

我创建了一个 Windows 任务调度程序，它可以每 5 分钟执行一次。

现在，我的问题是如何停止此服务...（我正在使用 ctrl+c）启动和停止服务的最佳方法是什么...（以编程方式或手动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:30:55.653

如果它必须是一个批次：

```
:start
echo put your file to execute here
echo five minutes break
TIMEOUT /T 300 /NOBREAK
echo I'm back
goto start 
```

但正如比尔所说，任务计划程序可能就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:40:27.987

为什么不编写另一个带有计时器和 NotifyIcon 的 VB.net 程序。让计时器每 5 分钟启动一次控制台应用程序，并在 NotifyIcon 上单击右键选项以手动启动/停止。

# text-files - 如何为文本文件创建索引？

> ID：15817069
> 
> 赞同：0
> 
> 时间：2013-04-04T16:47:17.563
> 
> 标签：text-files

谁能给我指出一个关于如何为大型文本文件建立索引的好资源？

我在 Windows 上使用 OLE 驱动程序对文本文件执行 SQL 查询，我不想让它通读整个文件。

我试过用谷歌搜索这个主题，但找不到好的资源。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T12:00:25.863

如果其他人在寻找有关如何索引文本文件的资源时遇到这篇文章，我在以下位置找到了一个很棒的教程：

[在 Visual Basic 中索引随机访问文件](http://trixar.com/~makai/minidb2.htm#create)

向 Rick Meyer 致敬，感谢他就该主题撰写了一篇清晰且具有教育意义的文章。

最初，我的计划是使用 OLE 驱动程序对文本文件执行 SQL 查询。在阅读了上面 Rick 的文章以及本教程：[Open for Random in Visual Basic](http://trixar.com/~makai/minidb1.htm)之后，我决定放弃 SQL 方法并改为对随机访问文件执行二进制搜索。

选择随机访问而不是 SQL 解决方案（如上面评论中建议的解决方案）肯定会涉及更多，但是，我对基于随机访问的应用程序的速度和轻量级特性感到非常满意。

# sharepoint - 我们收到两种不同的 SharePoint 调查错误报告

> ID：15817072
> 
> 赞同：0
> 
> 时间：2013-04-04T16:47:24.697
> 
> 标签：sharepoint, survey

当用户尝试回答两次调查时，最好的响应是消息：“您不能再次回答此调查。” 但是我们中的一些人正在获得 ASP.NET 应用程序的标准“崩溃”屏幕。

这是一个配置项还是什么（我们在 SP2007 上）？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:53:52.410

我最终通过使用此代码完全替换默认的“响应...”按钮处理程序来解决此问题，该代码用通知用户他已经完成调查的警报替换了任何重新进行调查的尝试。

```
$(document).ready(function() {  
    var myQueryOptions = "<QueryOptions />";
    //this was amazing: the value you need gets supplied by <UserID Type='Integer'/> (via Vadim Gremyachev)
    var myQuery = "<Query><Where><Eq><FieldRef Name='Author'/><Value Type='Integer'><UserID Type='Integer'/></Value></Eq></Where></Query>"; //find any instance of the current user
    var listPromise = $().SPServices({
        operation:  "GetListItems",
        listName: "{58ECDD94-8817-43A9-ACEC-42A1657E2F25}", //dev  Survey list
        CAMLViewFields: "<ViewFields><FieldRef Name='ID' /></ViewFields>",
        CAMLQuery: myQuery,
        CAMLQueryOptions: myQueryOptions
    });
    listPromise.done(function() {
        var iCount = $(listPromise.responseXML).SPFilterNode("rs:data").attr("ItemCount");
        if(iCount > 0) {
            $("[id*='_ctl00_toolBarTbl_RptControls_ctl00_diidIONewItem']").each(function() {
                $(this).attr("onclick", "");
                $(this).attr("href", "");
                $(this).on("click", function() {alert("You've already taken the survey!");});
            });
        }
        iCount++;
    });
    listPromise.fail(function() { alert("whoops");});
}); // $(document).ready() 
```

# java - 用于从二进制写入 wav 文件的简单 Java 库

> ID：15817075
> 
> 赞同：2
> 
> 时间：2013-04-04T16:47:44.357
> 
> 标签：java, wav, wave, trigonometry, riff

我应该在java中实现一个sinus-generator。作为输入，您给出频率、幅度和相位，作为输出，应该生成一个 .wav 文件。

```
private static byte[] generateSineWavefreq(int frequencyOfSignal, int seconds) {
    // total samples = (duration in second) * (samples per second)
    byte[] sin = new byte[seconds * sampleRate];
    double samplingInterval = (double) (sampleRate / frequencyOfSignal);
    System.out.println("Sampling Frequency  : "+sampleRate);
    System.out.println("Frequency of Signal : "+frequencyOfSignal);
    System.out.println("Sampling Interval   : "+samplingInterval);
    for (int i = 0; i < sin.length; i++) {
        double angle = (2.0 * Math.PI * i) / samplingInterval;
        sin[i] = (byte) (Math.sin(angle) * 127);
        //System.out.println("" + sin[i]);
    }
    return sin;
} 
```

我生成了一个像这样的鼻窦，但是我在创建一个 .wav 时遇到了很大的问题。我尝试了一些库，但尤其是标题让我头疼。

关于如何轻松实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:54:39.103

“手动”写入文件很简单。 [WAV 标头](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)并不复杂。您知道必要的信息（采样率、持续时间等），然后它只是使用[BufferedOutputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedOutputStream.html)将它们写入文件中，例如。

```
BufferedOutputStream output = ...
// initialization
...

byte[] toWrite  = new byte[] {'R','I','F','F'};
output.write(toWrite, toWrite.length, 0);
... 
```

但请记住，有些字段是小端和其他大端。制作一些方法，例如：

```
byte[] getLittleEndian(int number) {

}

byte[] getBigEndian(int number) {

} 
```

# mono - 安装 Orchard 和 Mono 的问题

> ID：15817080
> 
> 赞同：0
> 
> 时间：2013-04-04T16:47:55.247
> 
> 标签：mono, content-management-system, orchardcms

我目前正在运行 Ubuntu Server 12.10。

我尝试将 Orchard 与单声道一起安装。当我尝试启动单声道时：

```
MONO_IOMAP=all xsp4 
```

我在 CLI 中收到以下错误：

```
 Handling exception type ConfigurationErrorsException
Message is No factory for host (/home/shto/sites/test/Orchard/Web.config line 13)
IsTerminating is set to True
System.Configuration.ConfigurationErrorsException: No factory for host (/home/shto/sites/test/Orchard/Web.config line 13)

Server stack trace: 
  at System.Configuration.ConfigInfo.ThrowException (System.String text, System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at System.Configuration.SectionGroupInfo.ReadRemoveSection (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at System.Configuration.SectionGroupInfo.ReadConfig (System.Configuration.Configuration cfg, System.String streamName, System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at System.Configuration.SectionGroupInfo.ReadConfig (System.Configuration.Configuration cfg, System.String streamName, System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at System.Configuration.Configuration.ReadConfigFile (System.Xml.XmlReader reader, System.String fileName) [0x00000] in <filename unknown>:0 
  at System.Configuration.Configuration.Load () [0x00000] in <filename unknown>:0 
  at System.Configuration.Configuration.Init (IConfigSystem system, System.String configPath, System.Configuration.Configuration parent) [0x00000] in <filename unknown>:0 
  at System.Configuration.Configuration..ctor (System.Configuration.InternalConfigurationSystem system, System.String locationSubPath) [0x00000] in <filename unknown>:0 
  at System.Configuration.InternalConfigurationFactory.Create (System.Type typeConfigHost, System.Object[] hostInitConfigurationParams) [0x00000] in <filename unknown>:0 
  at System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration (System.String path, System.String site, System.String locationSubPath, System.String server, System.String userName, System.String password, Boolean fweb) [0x00000] in <filename unknown>:0 

Exception rethrown at [0]: 

  at (wrapper xdomain-invoke) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate)
  at (wrapper remoting-invoke-with-check) System.AppDomain:DoCallBack (System.CrossAppDomainDelegate)
  at System.Web.Hosting.ApplicationHost.CreateApplicationHost (System.Type hostType, System.String virtualDir, System.String physicalDir) [0x00000] in <filename unknown>:0 
  at Mono.WebServer.VPathToHost.CreateHost (Mono.WebServer.ApplicationServer server, Mono.WebServer.WebSource webSource) [0x00000] in <filename unknown>:0 
  at Mono.WebServer.XSP.Server.RealMain (System.String[] args, Boolean root, IApplicationHost ext_apphost, Boolean quiet) [0x00000] in <filename unknown>:0 
  at Mono.WebServer.XSP.Server.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

当我安装单声道时，我使用了以下命令：`apt-get install mono-complete`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:23:39.550

Orchard 目前不在 Mono 中运行。

# asp.net - 如何使用 ServiceStack Logging，但通过 IOC 容器交付

> ID：15817086
> 
> 赞同：2
> 
> 时间：2013-04-04T16:48:17.290
> 
> 标签：asp.net, servicestack

关于标题总结了我想要实现的目标，虽然现在我发布了一些代码，但我也想知道 LogFactory 是否在正确的位置。

谢谢你，斯蒂芬

```
public class ContactAppHost : AppHostBase
{
    //Tell Service Stack the name of your application and where to find your web services
    public ContactAppHost() : base("Contact Web Services", typeof (ContactService).Assembly)
    {
        // Built into the framework without the IOC
        LogManager.LogFactory = new NLogFactory();
    }

    public override void Configure(Funq.Container container)
    {
        //register any dependencies your services use, e.g:
        container.Register<ICacheClient>(new MemoryCacheClient());
    }
}

protected void Application_Start(object sender, EventArgs e)
{
    new ContactAppHost().Init();
}

protected void Application_Error(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:41:26.123

ServiceStack 仅支持单个记录器的配置，理想情况下应在初始化 AppHost 之前指定，因此`ILog`ServiceStack 中所有类的所有静态初始化器都使用配置的记录器，例如：

```
protected void Application_Start(object sender, EventArgs e)
{
    LogManager.LogFactory = new NLogFactory();
    new ContactAppHost().Init();
} 
```

# jquery - 使用 javascript 流二进制流

> ID：15817088
> 
> 赞同：1
> 
> 时间：2013-04-04T16:48:23.217
> 
> 标签：jquery, cross-domain, mime-types

我正在探索使用 HTML5、JavaScript、WebSockets、MQTT 和 HTTP 发送文件的不同方式。我一直在尝试从本地文件系统读取位于我服务器上的 zip 文件，并将其作为二进制 blob 接收。一旦我有了那个二进制 blob，我希望将它转发给其他客户端，但这是另一个问题。

我在尝试下载文件时遇到了一些安全限制问题，但我不确定我正在尝试做的事情实际上是否可行。使用除“jsonp”之外的任何其他类型作为类型会呈现如下错误：

```
Origin null is not allowed by Access-Control-Allow-Origin. 
```

我在这里有一些 jQuery 代码，我希望它可以读取 zip 文件并返回一个 blob 给我。我想认为 JSONP 可以传递二进制数据而不是填充的 json 是天真的。

```
$(document).ready(function() {
    $.ajax({
        url : 'http://example.com/myzip.zip',
        dataType : 'jsonp',
        jsonp : 'callback',
        jsonpCallback : 'jsonpCallback',
        success : function() {
            alert("success");
        }
    });

});

function jsonpCallback(data) {
    alert(data.message);
} 
```

这是我得到的错误，我认为是因为我尝试获取 zip 数据而不是 json 数据。

```
Resource interpreted as Script but transferred with MIME type application/zip: "http://example.com/myzip.zip?callback=jsonpCallback&_=1365093133651". 
```

无论如何，如果有人知道可以从 3rd 方服务器读取 zip 文件并将其保存为 javascript 变量中的二进制 blob，我将非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:20:39.220

JSONP 需要 JSON 数据，而不是二进制流。另一台服务器不会给你一个 JSON MIME 类型——它将是一个 ZIP 文件，所以这不起作用。

# r - 如何汇集列表中的所有元素？在 R 中

> ID：15817094
> 
> 赞同：1
> 
> 时间：2013-04-04T16:48:53.470
> 
> 标签：r, list

我有一个列表列表（我认为），所以在列表的每个元素中：`res[[i]]`，我有另一个列表，例如：

```
[[1]]

[[1]]$a

[[1]]$a$`1`
"aa" "bb" "cc"

[[1]]$a$`2`
"aa" "bb" "cc" "dd"

[[2]]

[[2]]$a

[[2]]$a$`1`
"aa" "bb" "cc"

[[2]]$a$`2`
"aa" "bb" "cc" "dd"

... 
```

我想将所有对象合并到一个新列表中，其中只有以下内容：

```
"aa" "bb" "cc"

"aa" "bb" "cc" "dd"

"aa" "bb" "cc" "cc"

... 
```

任何的想法？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:01:40.647

看起来你想要一个“平面”列表。为此，您可以使用`unlist`with `recursive = FALSE`，但根据列表的深度，这可能会很乏味。这是一个例子：

您的数据：

```
myList <- list(list(a = list("1" = letters[1:3], "2" = letters[1:4])),
               list(a = list("1" = letters[1:3], "2" = letters[1:4])))
myList
# [[1]]
# [[1]]$a
# [[1]]$a$`1`
# [1] "a" "b" "c"
# 
# [[1]]$a$`2`
# [1] "a" "b" "c" "d"
# 
# 
# 
# [[2]]
# [[2]]$a
# [[2]]$a$`1`
# [1] "a" "b" "c"
# 
# [[2]]$a$`2`
# [1] "a" "b" "c" "d" 
```

使用嵌套`unlist`s：

```
unlist(unlist(myList, recursive=FALSE), recursive=FALSE)
# $a.1
# [1] "a" "b" "c"
# 
# $a.2
# [1] "a" "b" "c" "d"
# 
# $a.1
# [1] "a" "b" "c"
# 
# $a.2
# [1] "a" "b" "c" "d" 
```

还有一个名为 LinearizeNestedList ( [https://sites.google.com/site/akhilsbehl/geekspace/articles/r/linearize_nested_lists_in_r](https://sites.google.com/site/akhilsbehl/geekspace/articles/r/linearize_nested_lists_in_r) ) 的漂亮函数，可以在 R 中下载/获取并使用如下（对于任何深度的列表嵌套）：

```
LinearizeNestedList(myList, NameSep=".")
# $`1.a.1`
# [1] "a" "b" "c"
# 
# $`1.a.2`
# [1] "a" "b" "c" "d"
# 
# $`2.a.1`
# [1] "a" "b" "c"
# 
# $`2.a.2`
# [1] "a" "b" "c" "d" 
```

* * *

### 编辑

看来这个问题是[How to flatten a list to a list without coercion的副本？](https://stackoverflow.com/questions/8139677/how-to-flatten-a-list-to-a-list-without-coercion)

请参阅该问题和一组答案以获取其他有用的解决方案。

# java - 基本蓝牙应用程序不起作用

> ID：15817099
> 
> 赞同：0
> 
> 时间：2013-04-04T16:49:15.473
> 
> 标签：java, android

想用远程蓝牙服务器实现数据传输，于是开始探索androids蓝牙功能，一步步走，现在卡在一个程序里。将程序加载到模拟器后，它会响应“Adil_Bluetooth_1st 已停止”。

我为您提供我的文件：

**XML 文件：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/acceleration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="X: Y: Z:"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ProgressBar
        android:id="@+id/progressBarX"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/acceleration"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/acceleration"
        android:layout_marginLeft="19dp"
        android:layout_marginRight="19dp"
        android:layout_marginTop="40dp" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/progressBarX"
        android:layout_alignTop="@+id/acceleration"
        android:text="               Noise Margin" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/progressBarX"
        android:layout_below="@+id/progressBarX"
        android:text="X-axis" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/progressBarZ"
        android:layout_below="@+id/progressBarY"
        android:text="Y-axis" />

    <ProgressBar
        android:id="@+id/progressBarY"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView2"
        android:layout_alignRight="@+id/progressBarX"
        android:layout_below="@+id/textView2"
        android:layout_marginTop="72dp" />

    <EditText
        android:id="@+id/eText"
        android:layout_width="50dp"
        android:layout_height="45dp"
        android:layout_alignLeft="@+id/textView1"
        android:layout_alignTop="@+id/textView1"
        android:ems="10"
        android:inputType="numberDecimal" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/progressBarZ"
        android:layout_alignTop="@+id/progressBarZ"
        android:layout_marginTop="20dp"
        android:text="Z-axis" />

    <ProgressBar
        android:id="@+id/progressBarZ"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/progressBarY"
        android:layout_alignRight="@+id/progressBarY"
        android:layout_below="@+id/textView3"
        android:layout_marginTop="84dp" />

</RelativeLayout> 
```

这是我的`ActivityMain.java`文件：

```
package com.example.adil_bluetooth_1st;

import java.util.Set;

import javax.xml.datatype.Duration;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.Toast;
import android.bluetooth.*;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;

public class Bluetooth extends Activity {

    private BluetoothAdapter mBluetoothAdapter;
    Integer REQ_BT_ENABLE=1;
    private ArrayAdapter<String> mArrayAdapter;
    Set<BluetoothDevice> pairedDevices;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_bluetooth);
        mBluetoothAdapter=BluetoothAdapter.getDefaultAdapter();
        String Status;
        if(mBluetoothAdapter==null)
        {
            Toast.makeText(this, "Device doesn't support Bluetooth", Toast.LENGTH_LONG).show();

        }
        /*
         * checking whether Bluetooth is enabled ,if not enable it!
         * */
        if(mBluetoothAdapter.isEnabled())
        {
            String mydeviceadress=mBluetoothAdapter.getAddress();
            String mydevicename=mBluetoothAdapter.getName();
            Status="My Device Name is:"+mydevicename+"\nThe Adress is:"+mydeviceadress;
            Toast.makeText(this, Status, Toast.LENGTH_LONG).show();
        }
        else
        {
             Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE); 
             startActivityForResult(enableBtIntent, REQ_BT_ENABLE);
             Toast.makeText(this, "Enabling Bluetooth!!", Toast.LENGTH_LONG).show();
        }
        /*
         * Getting paired devices and saving them on an ArrayAdapter
         * */
        pairedDevices = mBluetoothAdapter.getBondedDevices();
        // If there are paired devices
        if (pairedDevices.size() > 0) {
            // Loop through paired devices
            for (BluetoothDevice device : pairedDevices) {
                // Add the name and address to an array adapter to show in a ListView
                mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
            }
        }
        /*Create a BroadcastReceiver for ACTION_FOUND
         *
         * */

        final BroadcastReceiver Receiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                // When discovery finds a device
                if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                    // Get the BluetoothDevice object from the Intent
                    BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    // Add the name and address to an array adapter to show in a ListView
                    mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                }
            }
        };
        // Register the BroadcastReceiver
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(Receiver, filter);

        /*
         * to make the device discoverable
         * */
        Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
        startActivity(discoverableIntent);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.bluetooth, menu);
        return true;
    }

} 
```

**LogCat 消息：**

```
> 04-04 16:41:58.051: E/BluetoothAdapter(1082): Bluetooth binder is null
> 04-04 16:41:58.111: D/AndroidRuntime(1082): Shutting down VM 04-04
> 16:41:58.111: W/dalvikvm(1082): threadid=1: thread exiting with
> uncaught exception (group=0x40a71930) 04-04 16:41:58.131:
> E/AndroidRuntime(1082): FATAL EXCEPTION: main 04-04 16:41:58.131:
> E/AndroidRuntime(1082): java.lang.RuntimeException: Unable to start
> activity
> 

ComponentInfo{com.example.adil_bluetooth_1st/com.example.adil_bluetooth_1st.Bluetooth}:
> java.lang.NullPointerException 04-04 16:41:58.131:
> E/AndroidRuntime(1082):   at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   at
> android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   at
> android.app.ActivityThread.access$600(ActivityThread.java:141) 04-04
> 16:41:58.131: E/AndroidRuntime(1082):     at
> android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   at
> android.os.Handler.dispatchMessage(Handler.java:99) 04-04
> 16:41:58.131: E/AndroidRuntime(1082):     at
> android.os.Looper.loop(Looper.java:137) 04-04 16:41:58.131:
> E/AndroidRuntime(1082):   at
> android.app.ActivityThread.main(ActivityThread.java:5041) 04-04
> 16:41:58.131: E/AndroidRuntime(1082):     at
> java.lang.reflect.Method.invokeNative(Native Method) 04-04
> 16:41:58.131: E/AndroidRuntime(1082):     at
> java.lang.reflect.Method.invoke(Method.java:511) 04-04 16:41:58.131:
> E/AndroidRuntime(1082):   at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 04-04
> 16:41:58.131: E/AndroidRuntime(1082):     at
> dalvik.system.NativeStart.main(Native Method) 04-04 16:41:58.131:
> E/AndroidRuntime(1082): Caused by: java.lang.NullPointerException
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   at
> com.example.adil_bluetooth_1st.Bluetooth.onCreate(Bluetooth.java:38)
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   at
> android.app.Activity.performCreate(Activity.java:5104) 04-04
> 16:41:58.131: E/AndroidRuntime(1082):     at
> android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   at
> android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
> 04-04 16:41:58.131: E/AndroidRuntime(1082):   ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:59:15.810

[Waqas](https://stackoverflow.com/questions/9211994/android-trouble-with-bindservice-service-is-null)在这里回答了类似的问题

> 您的 [Bluetooth] 服务可能不为空，因为绑定服务是一种异步方法

# geometry - 使用 3 轴加速度计确定“下降线”矢量

> ID：15817107
> 
> 赞同：1
> 
> 时间：2013-04-04T16:49:56.990
> 
> 标签：geometry, arduino, accelerometer, physics

我正在构建一个基于倾斜的 Arduino 设备，一旦它以特定方向倾斜，就需要检测设备的“下降线”矢量。通过“fall-line”，我将使用以下示例：

想象一个中间有一个质点的无摩擦平面和一个安装在平面上的 3 轴加速度计，使加速度计的 x 轴和 y 轴平行于平面。静止时，平面是平的，质点不动。一旦飞机倾斜，点质量将在给定的重力加速度下沿特定方向移动。我需要计算质量将移动的 xy 平面中的角度以及与该方向上的加速度相对应的幅度测量。

我意识到这可能是简单的牛顿力学，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:29:52.223

“下降线”的方向和加速度的大小都由引力矢量在平面上的投影决定。如果平面具有法向量**n**，则投影算子为**P** ( **n** ) = **1** - **nn**，其中**1**是恒等算子，**nn**是法向量与自身的外（张量）积。引力矢量**g**的投影就是**g** ' = **P** ( **n** )。**g** = ( **1** - **nn** ) **g** = **g**- ( **n** . **g** ) **n**，其中点表示内（点）积。现在您只需要选择一个合适的正交参考系（**ex** , **ey** , **ez**），其中**ei**是沿*i*方向的单位向量。在此参考框架中：

**n** = nx **ex** + ny **ey** + nz **ez**
**g** = gx **ex** + gy **ey** + gz **ez**

点积**n**。**g**是：

**ñ**。**g** = nx * gx + ny * gy + nz * gz

一个非常合适的参考系选择是**ez**与**n**共线的参考系。那么 nx = 0 和 ny = 0 和 nz = || **n** || = 1，因为法线向量是单位长度的。在这个框架中**n**。**g**就是 gz。**那么g**的投影的分量是：

g'x = gx
g'y = gy
g'z = 0

**g** ' 在 XY 平面上的方向可以由正交参考系中的点积**a**来确定。**乙**= || **一个**|| || **乙**|| cos( **a** , **b** )，其中 || **一个**|| 表示 a 的范数（长度），cos( **a** , **b ) 是****a**和**b之间夹角****的**余弦值。如果从 X 方向测量角度，则：

 ********克**'。**ex** = (gx **ex** + gy **ey** ) 。**ex** = gx = || **克**'|| || **前**|| cos( **g** ', **ex** ) = g' cos( **g** ', **ex** )

其中 g' = || **克**'|| = sqrt(gx^2 + gy^2)。角度就是 arccos(gx/g')，即重力牵引矢量的 X 分量与其投影到 XY 平面上的大小之间的比率的反余弦：

角度 = arccos[gx / sqrt(gx^2 + gy^2)]

**加速度的大小与g** '的大小成正比，即（再次）：

g' = || **克**'|| = sqrt(gx^2 + gy^2)

现在的好处是，所有加速度计都在参考框架中测量重力场的分量，通常**ex**与设备的高度（或宽度）对齐，**ex**与设备的宽度（或高度）对齐**ez**垂直于设备表面，与参考系完全匹配，其中**ez**与平面法线共线。如果您的 Arduino 设备不是这种情况，只需旋转加速度计并根据需要对齐即可。******

# unicode - html2pdf 特殊字符未呈现

> ID：15817111
> 
> 赞同：6
> 
> 时间：2013-04-04T16:50:06.797
> 
> 标签：unicode, encoding, fonts, html2pdf

我正在使用[html2pdf](https://github.com/iafan/html2pdf)库来生成带有书签索引的 pdf。默认情况下，它似乎适用于英语内容，但我需要生成包含英语和阿拉伯语文本的内容。“aefurat”字体似乎工作得比较好，除了一些特殊字符（'、'、“、”、...）被呈现为框（[]）。

我使用的代码是，

```
require_once(dirname(__FILE__).'/../html2pdf.class.php');
$html2pdf = new HTML2PDF('P', 'A4', 'en', true, 'UTF-8', 0);
$html2pdf->setDefaultFont('aefurat');      
$html2pdf->writeHTML($content);
$html2pdf->Output('bookmark.pdf'); 
```

包含阿拉伯语和特殊字符的示例内容是，

> 'This is Arabic' "العربية" 使用 TCPDF 的示例... 这里有一些文本 这里有一些文本 一些“这里有一些文本”。

想知道我是否需要使用其他字体或更改一些配置。请给我建议。

# python - 进程间队列的python字典

> ID：15817116
> 
> 赞同：5
> 
> 时间：2013-04-04T16:50:18.123
> 
> 标签：python

这不是很重要，只是一个愚蠢的实验。我想创建自己的消息传递。我想要一个队列字典，其中每个键都是进程的 PID。因为我想让进程（由 Process() 创建）交换消息，将它们插入他们想要发送到的进程的队列中（知道它的 pid）。这是一个愚蠢的代码：

```
from multiprocessing import Process, Manager, Queue
from os import getpid
from time import sleep

def begin(dic, manager, parentQ):
    parentQ.put(getpid())
    dic[getpid()] = manager.Queue()
    dic[getpid()].put("Something...")

if __name__== '__main__':
    manager = Manager()
    dic = manager.dict()
    parentQ = Queue()

    p = Process(target = begin, args=(dic, manager, parentQ))
    p.start()
    son = parentQ.get()
    print son
    sleep(2)
    print dic[son].get() 
```

`dic[getpid()] = manager.Queue()`，这工作正常。但是当我执行时， `dic[son].put()/get()`我收到以下消息：

```
Process Process-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "mps.py", line 8, in begin
    dic[getpid()].put("Something...")
  File "<string>", line 2, in __getitem__
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 773, in _callmethod
    raise convert_to_error(kind, result)
RemoteError: 
---------------------------------------------------------------------------
Unserializable message: ('#RETURN', <Queue.Queue instance at 0x8a92d0c>)
--------------------------------------------------------------------------- 
```

你知道什么是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T20:27:56.210

我相信您的代码失败了，因为队列不可序列化，就像回溯说的那样。multiprocessing.Manager() 对象可以毫无问题地为您创建共享字典，就像您在此处所做的那样，但是存储在字典中的值仍然需要可序列化（或[在 Pythonese 中](https://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled)可提取）。如果您对无法访问*彼此队列*的子流程感到满意，那么这应该适合您：

```
from multiprocessing import Process, Manager, Queue
from os import getpid

number_of_subprocesses_i_want = 5

def begin(myQ):
    myQ.put("Something sentimental from your friend, PID {0}".format(getpid()))
    return

if __name__== '__main__':
    queue_dic = {}
    queue_manager = Manager()

    process_list = []

    for i in xrange(number_of_subprocesses_i_want):
        child_queue = queue_manager.Queue()

        p = Process(target = begin, args=(child_queue,))
        p.start()
        queue_dic[p.pid] = child_queue
        process_list.append(p)

    for p in process_list:
        print(queue_dic[p.pid].get())
        p.join() 
```

这为您留下了一个字典，其键是子进程，值是它们各自的队列，可以从主进程中使用。

我认为您的原始目标无法通过队列实现，因为您希望子进程使用的队列必须在创建时传递给进程，因此当您启动更多进程时，您无法授予现有进程访问权限一个新的队列。

进行进程间通信的一种可能方法是让每个人共享一个队列，以将消息传递回与某种标头捆绑的主进程，例如在元组中：

```
(destination_pid, sender_pid, message) 
```

..并主要读取**destination_pid**并将**（sender_pid，message）定向**到该子进程的队列。当然，这意味着您需要一种在有新进程可与之通信时通知现有进程的方法。

# php - PHP 和 mysql - 在搜索中添加另一个类别

> ID：15817121
> 
> 赞同：0
> 
> 时间：2013-04-04T16:50:27.860
> 
> 标签：php, mysql, search

我在我的网站中加入了搜索功能，可以搜索特定邮政编码和选定半径内的所有组织。这部分效果很好。我现在也在尝试合并类别搜索，因此它不仅搜索选定的 zip 距离内的所有组织，还搜索选定的 zip 距离内的选定类别中的所有组织。但是，我收到以下错误：

致命错误：在第 104 行调用 C:\xampp\htdocs\caretest\include\header.php 中未定义的函数 preg__match()

我很确定这可能是由于我的 if 语句中对 preg_match 函数的某种滥用，但是我不确定如何正确使用它来使其工作，或者是否有更好的方法来做到这一点不涉及 preg_match 也可以。谢谢。

这是代码：

```
<?php include('./Connections/ecsdb.php'); ?>
<script type="text/JavaScript">

function MM_goToURL() { //v3.0
  var i, args=MM_goToURL.arguments; document.MM_returnValue = false;
  for (i=0; i<(args.length-1); i+=2) eval(args[i]+".location='"+args[i+1]+"'");
}

</script>
<?php

mysql_select_db($database_ecsdb, $ecsdb);
$query_getCat = "SELECT DISTINCT category FROM food ORDER BY category DESC";
$getCat = mysql_query($query_getCat, $ecsdb) or die(mysql_error());
$row_getCat = mysql_fetch_assoc($getCat);
$totalRows_getCat = mysql_num_rows($getCat);

?>

<a name="top" id="top"></a>

  <div style="float:right;">

    <?php

    $my_loginbutton =   "<input name=\"toLogin\" type=\"button\"  onclick=\"MM_goToURL('parent','./login/');return document.MM_returnValue\" value=\"Login\" />";
    $my_logoutbutton =  "<input name=\"Logout\" type=\"button\" onclick=\"MM_goToURL('parent','./login/logout.php');return document.MM_returnValue\" value=\"Logout\" />";

    if (isset($_SESSION['MM_Username']))
        echo $my_logoutbutton;
    else
        echo $my_loginbutton;
    ?>

 </div>

  <div id="header" >
 <div style="float:left;"><img name="Alpha Accounting logo" src="./images/banner.png" width="800" height="140" border="0" alt="Alpha Accounting"></div>
 <div style="margin: 10px 0 0 5px; float:left;"></div>
 <div id="search">
 <h2> Search for Organizations</h2>
 <br>

<form action="../caretest/search.php" method="post">

<label name="category">
    Category:
        <select name="category"> 
          <?php
    do {  
    ?>
              <option value="<?php echo $row_getCat['category']?>"><?php echo $row_getCat['category']?></option>
              <?php
    } while ($row_getCat = mysql_fetch_assoc($getCat));
      $rows = mysql_num_rows($getCat);
      if($rows > 0) {
          mysql_data_seek($getCat, 0);
          $row_getCat = mysql_fetch_assoc($getCat);
      }
    ?>
    </select>
    </label>

  <label>Enter your ZIP Code:
  <input maxlength="5" name="zipcode" size="6" type="text" /></label> </br>

 <label>Select a distance:</label>
 <select name="distance">
 <option>5</option>
 <option>10</option>
 <option>25</option>
 <option>50</option>
 <option>100</option>
 </select>

<input name="submit" type="submit" value="search" />

</form>

<?php
        if(isset($_POST['submit'])) {
            //if(!preg__match('/w', $_POST['category'])){
            //  echo "<p><strong>You must select a category. </strong> Please try again.</p>\n";
            //}
            if(!preg_match('/^[0-9]{5}$/', $_POST['zipcode'])) {
                echo "<p><strong>You did not enter a properly formatted ZIP Code.</strong> Please try again.</p>\n";
            }
            elseif(!preg_match('/^[0-9]{1,3}$/', $_POST['distance'])) {
                echo "<p><strong>You did not enter a properly formatted distance.</strong> Please try again.</p>\n";
            }
            else {
                //connect to db server; select database
                $link = mysql_connect($hostname_ecsdb, $username_ecsdb, $password_ecsdb) or die('Cannot connect to database server');
                mysql_select_db($database_ecsdb) or die('Cannot select database');

                //query for coordinates of provided ZIP Code
                if(!$rs = mysql_query("SELECT * FROM zip WHERE zip_code = '$_POST[zipcode]'")) {
                    echo "<p><strong>There was a database error attempting to retrieve your ZIP Code.</strong> Please try again.</p>\n";
                }
                else {
                    if(mysql_num_rows($rs) == 0) {
                        echo "<p><strong>No database match for provided ZIP Code.</strong> Please enter a new ZIP Code.</p>\n"; 
                    }
                    else {
                        //if found, set variables
                        $row = mysql_fetch_array($rs);
                        $lat1 = $row['latitude'];
                        $lon1 = $row['longitude'];
                        $d = $_POST['distance'];
                        $r = 3959;

                        //compute max and min latitudes / longitudes for search square
                        $latN = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(0))));
                        $latS = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(180))));
                        $lonE = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(90)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));
                        $lonW = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(270)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));

                        //find all coordinates within the search square's area
                        //exclude the starting point and any empty city values
                        $query = "SELECT * FROM zip WHERE (latitude <= $latN AND latitude >= $latS AND longitude <= $lonE AND longitude >= $lonW) AND (latitude != $lat1 AND longitude != $lon1) AND city != '' ORDER BY state, city, latitude, longitude";
                        if(!$rs = mysql_query($query)) {
                            echo "<p><strong>There was an error selecting nearby ZIP Codes from the database.</strong></p>\n";
                        }
                        elseif(mysql_num_rows($rs) == 0) {
                            echo "<p><strong>No nearby ZIP Codes located within the distance specified.</strong> Please try a different distance.</p>\n";                               
                        }
                        else {
                            //output all matches to screen

                            echo"<br />";
                            echo"<br />";
                            //echo "<h2> Organization Search Results</h2>";

                            echo "<table class=\"bordered\" cellspacing=\"0\">\n";
                            echo"<tr><th></th></tr>\n";
                            echo "<h2> Organization Search Results</h2>";
                            echo"<tr><th></th></tr>\n";

                            echo "<tr><th>Agency</th><th>Telephone</th><th>Hours</th><th>Street Address</th><th>City</th><th>State</th><th>Zip</th><th>Website</th><th>Directions</th></tr>\n";
                            while($row = mysql_fetch_array($rs)) {
                                //search for matching zip codes in the organization table
                                if(!$rt = mysql_query("SELECT * FROM food WHERE zip = '$row[zip_code]'")){
                                    echo "<p>Didn't work, try again!</p>";
                                    }
                                else{
                                        while($rowt = mysql_fetch_array($rt)) {
                                            //output results
                                            echo "<tr><td>$rowt[Agency]</td><td>$rowt[Telephone]</td><td>$rowt[Hours]</td><td>$rowt[street_address]</td><td>$rowt[city]</td><td>$rowt[state]</td><td>$rowt[zip]</td><td>$rowt[website]</td><td>";
                                            echo "</td></tr>\n";
                                        }
                                    }
                            }
                            echo "</table>\n<br />\n";
                        }
                    }
                }
            }
        }
    ?>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:52:28.427

该函数被调用`preg_match`，而不是`preg__match`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:54:43.383

我实际上猜测您的 XAMPP 设置有问题。Preg_Match 根本不应该是未定义的，除非你拼错了它或其他东西，但你的代码在这方面看起来很干净。

看看您是否可以暂时将代码复制到网络服务器，并确定您是否也在那里收到该错误。我猜你不会。

[编辑] 你确实使用两个下划线调用了 preg__match，但它被注释掉了。是这条线给你带来了问题吗？

# python - 从 Python 中的并行数组打印员工和薪水

> ID：15817122
> 
> 赞同：0
> 
> 时间：2013-04-04T16:50:33.320
> 
> 标签：python, python-3.x

该程序将确定最高薪水，并将其与具有该薪水数字的员工姓名一起打印出来。

我需要为员工制作一份清单，并为工资制作另一个清单。我可以找到最低/最高工资并将其打印出来，但我不知道如何打印出相应的员工。让这变得困难的是，我们只在第 6 章，而且我们只能使用到目前为止所学的内容。所以我们不能使用 Python 必须提供的很多内置函数（我们甚至还没有介绍 append() 方法，所以我不得不使用另一种方式添加到列表中......） max 和 min 也是不允许。

```
amount = int(input("How many employees?: "))
if amount <= 0:
    print("You cannot have 0 or less.")
name = []
salary = []
length = len(salary)
mini = 200000
maxi = 0
combined = (name, salary)

for i in range(1, amount + 1):
    employee = input("What is the employee's name?: ")
    name += [employee]
    earned = int(input("How much is the salary? It cannot be less than 0 or over $200,000: "))
    while earned <= 0 or earned >= 200000:
        earned = int(input("How much is the salary? It cannot be less than 0 or over $200,000: "))

        mini = earned
        maxi = earned
   salary += [earned]
   total += earned
   if earned < mini:
       mini = earned
   if earned > maxi:
       maxi = earned 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:06:54.490

按如下方式存储索引

```
amount = int(input("How many employees?: "))
if amount <= 0:
    print("You cannot have 0 or less.")
name = []
salary = []
length = len(salary)
MAX_SALARY = 200000
mini = MAX_SALARY + 1
maxi = -1
mini_idx = -1
maxi_idx = -1

for i in range(amount):
    employee = input("What is the employee's name?: ")
    name += [employee]
    earned = -1
    while earned >= 0 and earned <= MAX_SALARY:
        earned = int(input("How much is the salary? It cannot be less than 0 or over $200,000: "))
    salary += [earned]
    total += earned
    if earned < mini:
        mini = earned
        mini_idx = i
    if earned > maxi:
        maxi = earned
        maxi_idx = i 
```

然后你想要的值由

```
salary[mini_idx]
name[mini_idx]
salary[maxi_idx]
name[maxi_idx] 
```

# java - byte[] 到 String 和 String 到 byte[]

> ID：15817124
> 
> 赞同：0
> 
> 时间：2013-04-04T16:50:46.460
> 
> 标签：java, arrays, string, casting, byte

我有一个小问题要将类型从`byte[]`to更改`String`为`String`to `byte[]`。当我使用我的代码时，它返回 RSA 错误“rsa 块的数据太多”。但是当我使用原版时`byte[]`，它工作正常。

这是它的工作原理：

```
cipherData = cipher.doFinal(cipherData); 
```

我试图改变数据类型：

```
// Byte[] to String
String encrypted = new String(cipherData, "UTF-8");
// RSA Operation
cipherData = cipher.doFinal(encrypted.getBytes()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:58:09.677

这就是问题：

```
String encrypted = new String(cipherData, "UTF-8"); 
```

您`cipherData` *不是*UTF-8 编码的文本。它是任意二进制数据。所以不要试图将其解释为*UTF* -8 文本。

相反，使用 hex 或 base64 - 其中 base64 可能是最简单的方法。我喜欢[公共领域的 iHarder base64 库](http://iharder.net/base64)：

```
String encrypted = Base64.encodeBytes(cipherData);
...

cipherData = Base64.decode(encrypted); 
```

编辑：当然，如果您使用的是 Android，那么请使用[内置库](http://developer.android.com/reference/android/util/Base64.html):)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:09:28.967

我工作完美。这是 Android Base64 库的代码：

```
String encrypted = Base64.encodeToString(cipherData, Base64.DEFAULT);
cipherData = cipher.doFinal(Base64.decode(encrypted, Base64.DEFAULT)); 
```

# android - Android GoogleMap (API V2) 和标签

> ID：15817127
> 
> 赞同：0
> 
> 时间：2013-04-04T16:51:08.270
> 
> 标签：android, tabs, android-fragments, actionbarsherlock, google-maps-android-api-2

我想要一个程序，它应该包含一个带有 4 个选项卡的视图，每个选项卡都有不同的内容（例如：1° 选项卡 = 地图、2° 选项卡 = 文本等）。我对这些项目有点陌生，而且我处于成功导入并使用地图启动应用程序的位置。如果您认为使用 Tabs 以外的其他东西更好，我同意您的看法，因为我找不到任何相关信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:35:25.923

如果您有任何超过三个左右的选项卡，导航选项卡可能不是一个理想的选择。

您可以尝试[sideNavigationMenu](https://github.com/johnkil/SideNavigation)或其他一些滑动菜单库。如果您刚刚开始，我发现 sideNavigationMenu 是最容易使用的库。

无论如何，如果您想继续使用导航选项卡，下面是一些示例代码，可帮助您入门。

```
public class MainActivity extends Activity{

public static Context appContext;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    appContext = getApplicationContext();

   //ActionBar
    ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    bar.addTab(bar.newTab()
            .setText("Map Fragment")
            .setTabListener(new TabListener<MapSampleFragment>(
                    this, "map_fragment", MapSampleFragment.class)));

    bar.addTab(bar.newTab()
            .setText("List Fragment")
            .setTabListener(new TabListener<LocationListFragment>(
                    this, "list_fragment", LocationListFragment.class)));

    bar.addTab(bar.newTab()
            .setText("Other Fragment")
            .setTabListener(new TabListener<MoreStuffFragment>(
                    this, "more_stuff_fragment", MoreStuffFragment.class)));  

} 
```

然后，您需要编写 TabListener 来处理片段之间的切换。由于您使用的是 Google Maps Android，因此最好隐藏您的片段并在需要时显示它们，而不是分离和附加片段。

除了使用 .show() 和 .hide() 之外，这几乎是从 API 演示中获取的代码

```
public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;
    private final Bundle mArgs;
    private Fragment mFragment;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        this(activity, tag, clz, null);
    }

    public TabListener(Activity activity, String tag, Class<T> clz, Bundle args) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
        mArgs = args;

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        mFragment = mActivity.getFragmentManager().findFragmentByTag(mTag);
        if (mFragment != null && !mFragment.isDetached()) {
            FragmentTransaction ft = mActivity.getFragmentManager().beginTransaction();
            ft.hide(mFragment);
            ft.commit();
        }
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.show(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.hide(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(mActivity, "Reselected!", Toast.LENGTH_SHORT).show();
    }
} 
```

# java - JTree 实现

> ID：15817128
> 
> 赞同：0
> 
> 时间：2013-04-04T16:51:14.250
> 
> 标签：java, macos, swing, jtree, uimanager

出于某种奇怪的原因，当我`JTree`在 java 中实现 a 时，我在 Mac OSX 上看不到扩展线（有角度）；但是当树展开以显示所有节点时，我会在 Windows 上看到它们。我试过了`tree.putClientProperty("JTree.lineStyle", "Angled")`，但我什么也没得到。

第二个问题，再次在 OSX 上：我有一张根的图片，也没有完全显示出来，有些东西是从顶部和底部切开的。

```
DefaultMutableTreeNode root = new DefaultMutableTreeNode(userId + " Album List");
albTree = new JTree(root);
albTree.setCellRenderer(new IconRenderer());
albTree.putClientProperty("JTree.lineStyle", "Angled");     
albTree.setFont(new Font("Segoe UI", Font.PLAIN, 20));
albTreeModel = (DefaultTreeModel) albTree.getModel();       albTree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);

class IconRenderer extends DefaultTreeCellRenderer {

    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row, boolean hasFocus) {

        // start with default behavior
        super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);

        // customize based on local conditions/state
        DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;

        DefaultTreeCellRenderer renderer = new DefaultTreeCellRenderer();

        Icon openIcon = renderer.getDefaultOpenIcon();
        Icon rootIcon = new ImageIcon("images/user-1.png");

        if (node == nonAdminFrame.root) {

            setIcon(rootIcon);

        }

        else if (nonAdminFrame.root.isNodeChild(node)) {

            setIcon(openIcon);
        }

        return this;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:42:31.843

这是一个完整的例子。请注意，这`LEG_LINE_STYLE_STRING = "Angled"`是默认设置。

附录：[此处](https://stackoverflow.com/search?q=user:230513%20getTreeCellRendererComponent)`getTreeCellRendererComponent()`显示了一些其他示例；你可能需要调整。`setRowHeight()`

![图片](https://i.stack.imgur.com/REFhm.png)

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JTree;
import javax.swing.UIManager;

/**
 * @see
 */
public class Test {

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTree tree = new JTree();
        tree.putClientProperty("JTree.lineStyle", "Angled");
        //tree.putClientProperty("JTree.lineStyle", "Horizontal");
        //tree.putClientProperty("JTree.lineStyle", "None");
        for (int i = 0; i < tree.getRowCount(); i++) {
            tree.expandRow(i);
        }
        f.add(tree);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) throws Exception {
        UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```

# c++ - 使用 strtok() 解析字符串

> ID：15817130
> 
> 赞同：1
> 
> 时间：2013-04-04T16:51:18.153
> 
> 标签：c++, string, parsing, strtok

我正在尝试解析这一行

```
Completion_Time_Stamp = 2013-04-04@12:10:22(Eastern Daylight Time) 
```

并将名称放在一个变量中，将值放在另一个变量中

```
token[0] = strtok(buf, " = "); // first token

if (token[0]) // zero if line is blank
{
  for (n = 1; n < 10; n++)
  {
    token[n] = strtok(0, " = "); // subsequent tokens
    if (!token[n]) break; // no more tokens
  }
} 
```

输出 ：

```
token[0] = Completion_Time_Stamp
token[1] = 2013-04-04@12:10:22(Eastern
token[2] = Daylight
token[3] = Time) 
```

但我想要这样的东西：

```
token[0] = Completion_Time_Stamp
token[1] = 2013-04-04@12:10:22(Eastern Daylight Time) 
```

我该如何做到这一点？多个分隔符？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:55:40.367

为什么不使用已经存在的功能[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)，比如使用[`find`](http://en.cppreference.com/w/cpp/string/basic_string/find)and [`substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)。

就像是：

```
std::string str = "Completion_Time_Stamp = 2013-04-04@12:10:22(Eastern Daylight Time)";

auto delim_pos = str.find('=');

std::string keyword = str.substr(0, delim_pos);
std::string data = str.substr(delim_pos); 
```

**注意：**`delim_pos`在制作子字符串时，可能需要调整分隔符位置（在我的示例中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:59:51.000

您应该将`=`其用作分隔符，然后右修剪和左修剪您的结果，以消除标记 0 上的尾随右空格和标记 1 上的左空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:57:25.047

使用 std::string，使用参数“=”查找，然后使用子字符串获取这两个字符串。

```
std::string str1 ="Completion_Time_Stamp = 2013-04-04@12:10:22(Eastern Daylight Time)";
std::string str2 = "=";
std::string part1="";
std::string part2="";

unsigned found = str1.find(str2);
if (found!=std::string::npos) 
{
   part1 = str1.substr(0,found-1);
   part2 = str1.substr(found+2);
}

cout << part1 << "\n" << part2 <<endl; 
```

我得到以下信息：

```
Completion_Time_Stamp//^^no space here and beginning of second part
2013-04-04@12:10:22(Eastern Daylight Time) 
```

# html - 如何开发像github这样的网站

> ID：15817132
> 
> 赞同：-3
> 
> 时间：2013-04-04T16:51:21.587
> 
> 标签：html, iframe, web, github, history

我发现很多网站使用 div 而不是 iframe，我知道如何通过 加载页面`$.load`，但是存在一些问题。

像许多网站一样，我的页面中有一个导航栏。所有站点都将与它一起显示。

1.  我在页面中使用 div 代替 iframe，然后用于`$.load()`加载目标页面。因此，浏览器中的 url 永远不会被修改。用户不能为当前页面添加书签。

2.  从第 1 步开始，我使用`window.history`新的 api，我可以转发或返回到部分刷新的页面。

3.  如您所知，目标页面是由 ajax 加载的。当用户通过在浏览器中输入 url 到目标页面时，将得到一个没有导航栏的页面。

**这是我的问题**：如何解决第 3 步中的问题。另外，我想知道 Github 是如何工作的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:05:24.550

github 大量使用 pjax 进行内联页面加载：[http ://pjax.heroku.com/](http://pjax.heroku.com/)

# git - Git 提交一个新的遥控器？

> ID：15817133
> 
> 赞同：0
> 
> 时间：2013-04-04T16:51:22.113
> 
> 标签：git

我通过将其设置为跟踪分支来检查基于另一个远程分支的分支。

```
git checkout -b bar origin/foo 
```

现在我想让 bar 进入 origin/bar，这与 foo 不同。我同意我应该有

```
git checkout foo
git pull --all
git checkout -b bar 
```

首先。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:54:19.963

```
git push -u origin bar:foo 
```

意思是“将`bar`分支推送到`origin`远程（`foo`在远程端使用名称）并设置为将来`bar`推送和拉取`origin/foo`”。

# salesforce - 销售人员缺少活动

> ID：15817137
> 
> 赞同：0
> 
> 时间：2013-04-04T16:51:28.697
> 
> 标签：salesforce

某个帐户的活动仅在特定年份丢失。我能做些什么来检查发生了什么。数据不在回收站中，没有批量删除，也检查了setupaudittrail。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:07:12.137

会不会是那些活动被存档了？请参阅[此文档](https://na3.salesforce.com/help/doc/en/activities_archived.htm)，了解正在进行的自动活动归档。

# html - 使多个图像覆盖整个视口，如 css 重复

> ID：15817148
> 
> 赞同：1
> 
> 时间：2013-04-04T16:52:19.590
> 
> 标签：html, css, viewport

描述这一点的最简单方法是在这里参考我的小提琴：

编辑：有错误的小提琴链接，但这是正确的：

[http://jsfiddle.net/b3rgstrom/k7qq4/2/](http://jsfiddle.net/b3rgstrom/k7qq4/2/)

这是我的CSS：

```
.dynamic {
  margin-top: 10px;
  position: relative;
  overflow: hidden;
  height: 200px;
  width: 100%;
}
.dynamic img{
  margin: -2px;
}

.repeat {
  position: relative;
  background-repeat: repeat;
  background: url("http://placehold.it/100x100");
  width: 100%;
  height: 200px;
  overflow: hidden;
  margin-top: 30px;
} 
```

我想要一个小图像的动态列表，以覆盖固定高度区域内的视口，该区域从一侧到另一侧覆盖整个浏览器窗口。问题是图像在它们完全需要的空间（在我的示例中为 100 像素）之前不会显示。

如果我拍摄一张图像并重复，它将显示尽可能多的图像以从一侧到另一侧覆盖整个屏幕，这就是我想要完成的。

让我知道我是否可以澄清。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:55:18.723

## 超大包装

`.dynamic`在里面添加一个两倍宽度的包装器。这样，图像就位于具有足够宽度的元素中。`overflow:hidden`on`.dynamic`防止额外的宽度触发水平滚动条。

[更新的演示](http://jsfiddle.net/CNJ7b/)

**CSS**

```
.dynamic {
    width: 100%;
    overflow: hidden;
}
.dynamic .wrapper {
    width: 200%;
} 
```

**HTML**

```
<div class="dynamic">
    <div class="wrapper">
        ...
    </div>
</div> 
```

# c# - Flot 和 C# WebMethod

> ID：15817149
> 
> 赞同：0
> 
> 时间：2013-04-04T16:52:28.343
> 
> 标签：c#, flot, webmethod

任何人都可以获得使用 ac# webmethod 创建 Flot 图表的任何好的资源。数据将从数据库中提取。

我遇到的所有示例都有硬编码值。

干杯

好的，我正在调用我的 WebMethod，并遍历数据表中的行，但我没有得到 [[1,2],[2,2]]，而是得到了 drlist[0] - drlist[49]

使用这个循环

```
 List<DataRow> drList = new List<DataRow>();
    foreach (DataRow row in dt.Rows)
    {
        drList.Add((DataRow)row);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:57:18.003

Flot 网站上有一个[示例](http://people.iola.dk/olau/flot/examples/ajax.html)，它使用 AJAX 调用服务器获取 JSON 数据。基本上这似乎是您所需要的，只需插入您的 Web 方法的 URL，以 JSON 格式返回数据。

# backbone.js - 如何组织跨页面通用的视图组？

> ID：15817151
> 
> 赞同：1
> 
> 时间：2013-04-04T16:52:36.283
> 
> 标签：backbone.js, backbone-views, backbone-routing

假设您有一组主干视图，它们在页面上组合以创建一个非常复杂的小部件，该小部件将出现在多个页面上。（这方面的一个例子可能是一个表单，其中每个输入都是它自己的视图，并且可能具有它自己的复杂行为。）但是，由于 a/b 测试，每个页面上的小部件可能并不完全相同，一些内部视图可能不同......但在大部分页面中，它们都是相同的。

我们计划为每个页面设置一个主干控制器。我们希望减少因复制每个页面上的小部件所需的所有视图的实例而产生的复制/粘贴，但我们还希望能够灵活地将特定页面上的单个视图换成一个a/b 测试。

迄今为止的提议之一是创建实例化所有子视图（表单元素）的“元”视图（代表整个表单），如果需要，您可以使用替代子视图构建元视图。然而，这引入了一种奇怪的视图层次结构，并且可能在元视图中的视图之间存在一些耦合。

人们通常如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:47:37.433

我很想听听您为什么认为您的提案会导致奇怪的视图层次结构。[对我来说，由各种子视图组成](http://en.wikipedia.org/wiki/Object_composition)的元视图的想法似乎很有意义。

至于视图的耦合，您可以通过确保通过共享模型和集合的更改产生的事件或通过[事件聚合器](http://martinfowler.com/eaaDev/EventAggregator.html)触发的事件来处理通信来缓解这种情况。

我肯定会看看[Marionette](https://github.com/marionettejs/backbone.marionette)，它是（直接来自文档）Backbone.js 的复合应用程序库，旨在简化大型 JavaScript 应用程序的构建。它包括一个事件聚合器以及一些用于创建复杂视图的漂亮结构。

您可能会发现[布局和区域功能](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.layout.md)很有趣，因为我想您可以使用它来定义每个页面控制器的元视图的确切配置。

# python - pip freeze 省略了某些包

> ID：15817152
> 
> 赞同：1
> 
> 时间：2013-04-04T16:52:38.317
> 
> 标签：python, ubuntu, pyqt4, pip

目前，我通过 Ubuntu 的存储库在我的 Ubuntu 12.10 上安装了 python-qt4（二进制包）。如果我运行`aptitude show python-qt4`，结果将是：

```
Package: python-qt4
State: installed
Automatically installed: no
... 
```

但是，如果我运行`pip freeze`，我无法从输出中找到 PyQt 或 PyQt4 条目。pip 是否从其`freeze`命令中省略了某些包？问题的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:16:18.623

您的`python-qt4`包没有`.egg-info`元数据文件，因此不可能`pip`知道它已安装。

# asp.net - 对配置转换应用 TDD/单元测试？

> ID：15817157
> 
> 赞同：2
> 
> 时间：2013-04-04T16:52:49.650
> 
> 标签：asp.net, web-config, tdd, tfsbuild

有谁知道任何可用于有效单元测试配置转换的技术或框架，尤其是在构建服务器上？

例如，如果我在基本配置中添加一个新的连接字符串，有没有办法编写自动化测试来确保将正确的值应用于 QA 和产品配置？

扩展这个想法，如果能够在基本配置中指定应该具有变换的某些项目，以捕捉那些没有将变换添加到环境配置中的不可避免的情况，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-02T23:47:43.947

我最终使用了以下过程：

[在 Visual Studio 中创建一个指向](http://documentation.flatredball.com/frb/docs/?title=Visual_Studio_Tutorials%3aAdd_As_Link)您的 web.config 的链接并转换您的测试项目中的文件。
将文件属性更改为“如果较新则复制”。[添加对Microsoft Xml 文档转换](http://nuget.org/packages/Microsoft.Web.Xdt/)
的 nuget 引用

```
Install-Package Microsoft.Web.Xdt -Pre 
```

您现在应该能够将 web.config 及其转换加载到单元测试中，如下所示：
注意：我使用[NUnit](http://www.nunit.org/)和[Fluent Assertions](http://fluentassertions.codeplex.com/)进行此测试。

```
[Test]
public void Transform_WhenUsingAlpha_ConnectionStringShouldPointToAlpha()
{
    using (var webConfig = LoadWebConfig())
    {
        var transformWasSuccessful = DoXmlTransform(webConfig, "Web.Alpha.config");
        var connectionString = 
            webConfig.SelectNodes(
            "//connectionStrings/add[@name='ApplicationServices']/@connectionString")[0].Value;

        transformWasSuccessful.Should().BeTrue();
        connectionString.Should().Contain("_Alpha");
    }
}

public XmlTransformableDocument LoadWebConfig()
{
    var document = new XmlTransformableDocument();
    document.PreserveWhitespace = true;
    document.Load("web.config");
    return document;
}

private bool DoXmlTransform(XmlTransformableDocument webConfig, string transformFile)
{
    using (var transform = new XmlTransformation(transformFile))
    {
        return transform.Apply(webConfig);
    }
} 
```

我已经针对我们的 TeamCity 构建服务器测试了这种方法，并且效果很好。另一方面，它也适用于 NCrunch。

如果您想手动检查 web.config 转换，[SlowCheetah - XML 转换扩展](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T03:48:42.987

它不与您的构建服务器集成，但[SlowCheetah XML 转换扩展](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)为您提供了一种方便的方法来生成转换结果并确保它们是您想要的。

[SlowCheetah 也可作为 NuGet 包使用](http://nuget.org/packages/SlowCheetah/)。

通过[斯科特汉塞尔曼](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

还可以选择使用 microsoft.web.xdt nuget 包滚动您自己的解决方案。下面是[如何从代码中调用 XDT](http://sedodream.com/2013/02/02/HowToInvokeXDTFromCode.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T20:31:13.330

这可能不是我想要的，但我确实偶然发现了[Pester](https://github.com/pester/Pester)，它似乎提供了一种相当合理的机制来验证配置文件中的值。有关详细信息，请参阅[此](http://scottmuc.com/blog/development/pester-bdd-for-the-system-administrator/)博客文章。

# javascript - 为什么当 javascript 命名空间我们说 var myName = myName || {}

> ID：15817160
> 
> 赞同：0
> 
> 时间：2013-04-04T16:53:04.563
> 
> 标签：javascript, javascript-namespaces

我找不到这种格式背后的原因？

我假设它是检查之前是否已创建此变量，如果是，则使用该变量而不是空白对象。

但是当我分配它时，我想不出它是如何或为什么已经存在的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:55:10.387

该符号完全按照您的建议执行。

这确实适用于您可能有多个可能创建相同对象的 javascript 包含，并且您不想破坏可能已经定义的对象的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:54:59.463

你的假设是正确的，如果它存在，它将默认为现有变量，或者创建一个新对象。

在没有看到代码的情况下，很难判断它之前是如何初始化的，但它通常用于可能已经被调用的模块/构造函数。目的是在执行该函数时使用“单例”而不是新实例。

# android - 动画后更新布局

> ID：15817164
> 
> 赞同：1
> 
> 时间：2013-04-04T16:53:12.453
> 
> 标签：android, android-layout, animation, android-relativelayout

使用动画我展开 ImageView，但在缩放后与其他视图重叠。有什么方法可以更新我在活动 xml 文件中定义的**布局属性？**`layout_toRightOf`即我有一些像我想在动画之后应用的属性。

有我的代码：

动画片：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" 
        android:fillAfter="true"
        android:fillEnabled="true">
    <scale
        android:duration="500"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="2.0"
        android:toYScale="2.0" />

</set> 
```

应用动画：

```
 Animation shrinkAnimation = AnimationUtils.loadAnimation(MainActivity.this, R.anim.shrink_animation);
    someView.startAnimation(shrinkAnimation); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:00:42.520

```
shrinkAnimation.setAnimationListener(new Animation.AnimationListener(){
    @Override
    public void onAnimationStart(Animation arg0) {
    }           
    @Override
    public void onAnimationRepeat(Animation arg0) {
    }           
    @Override
    public void onAnimationEnd(Animation arg0) {
       // Update your View here...
    }
}); 
```

# shell - 检查两个进程是否没有在 shell 脚本中运行

> ID：15817167
> 
> 赞同：0
> 
> 时间：2013-04-04T16:53:30.923
> 
> 标签：shell

如果两个进程未运行，我如何检查“if”条件？

我用过

```
if [ `pgrep <process name>`] does not work with ot without square brackets
using ps -aux |grep <process name> in if condition does not work, since every time 
grep <process name>
is up and it will always pass 
```

任何人都有任何好的建议，我可以检查是否只需要两个进程“未”运行

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:00:23.420

```
if [ $(ps aux | grep -E "(processName1|processName2)" | grep -v grep | wc -l) -eq 0 ]
then
    echo "not running"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:57:19.300

```
ps -aux |grep -v <process name> 
```

-v 是'反向匹配'，IOW，当您要查找的项目不匹配时返回成功

# android - Android - 水平平铺的六边形

> ID：15817169
> 
> 赞同：0
> 
> 时间：2013-04-04T16:53:37.017
> 
> 标签：android, layout, tile

我正在尝试创建一个由六边形图块填充的水平滚动视图。据我所知，Android 中没有任何预制件，所以我必须自己创建自定义视图，除非有更好的方法。

这些六边形应该能够包含一个由按钮、文本、图像组成的视图（六边形本身就是一个图像）

所以我想知道我应该使用哪种布局类型或方法来达到我的目标？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:08:46.413

您可以使用[图库](http://developer.android.com/reference/android/widget/Gallery.html)进行水平滚动。至于 Hexagon，我担心您将不得不制作自己的自定义视图。

# tsql - 在 SSRS 中计算总和和平均值

> ID：15817171
> 
> 赞同：2
> 
> 时间：2013-04-04T16:53:49.050
> 
> 标签：tsql, reporting-services, ssrs-2008

我的报告中有问题。我有一个这样的矩阵

* * *

```
 |ID   |         
 |Question(TEXT)|    |Point(Value)|   |Calculated(Average)|   |Calculated(Satisfaction)%|
                  Summary:            |Average(Average)   |   |Average(Satisfaction)%| 
```

* * *

该矩阵位于另一个组内，该组是一个页面组。

所以，我的问题是在某个页面组中，

Question_Text 为空白，并且所有点（值）均为 0。

每行的平均值显示正确的值，但汇总平均值显示不正确，因为它还考虑了额外的行并计算平均值。

因此，如果所有平均值的总和为 40，并且有 4 个问题（包括空白问题），则平均值将是 10 而不是 13.33，因为它除以 4 而不是 3。

该行是由于查询而显示的，所以我需要更改查询还是有办法在 SSRS 本身中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:15:07.880

您可以使用这样的表达式来排除空白问题：

```
=Avg(IIf(Fields!Question_Text.Value = "" or IsNothing(Fields!Question_Text.Value)
  , Nothing
  , Fields!Point_Value.Value)) 
```

或替代方案：

```
=Sum(Fields!Point_Value.Value)
  / Sum(IIf(Fields!Question_Text.Value = "" or IsNothing(Fields!Question_Text.Value), 0.0, 1.0))'Updated 
```

**评论后编辑：**

我将表达式添加到报告中 - 第一个工作正常，第二个在小更新后也工作正常（请参阅编辑详细信息）。

我使用以下查询创建了一个测试数据集：

```
select Question_Group = 'Group1', Question_Text = 'Q1', Point_Value = 10
union all select Question_Group = 'Group1', Question_Text = 'Q2', Point_Value = 15
union all select Question_Group = 'Group1', Question_Text = 'Q3', Point_Value = 15
union all select Question_Group = 'Group1', Question_Text = '', Point_Value = 0
union all select Question_Group = 'Group2', Question_Text = 'Q4', Point_Value = 10
union all select Question_Group = 'Group2', Question_Text = 'Q5', Point_Value = 15
union all select Question_Group = 'Group2', Question_Text = 'Q6', Point_Value = 15
union all select Question_Group = 'Group2', Question_Text = null, Point_Value = 0 
```

我刚刚创建了一个基于`Question_Group`这两个表达式的组，并将两个表达式添加到组页脚。

设计模式下的报告：

![在此处输入图像描述](https://i.stack.imgur.com/PrxPv.png)

基于上述数据集的报告结果：

![在此处输入图像描述](https://i.stack.imgur.com/NZAoU.png)

# sql - 计算 T-SQL 中的前一个值（更新）

> ID：15817174
> 
> 赞同：0
> 
> 时间：2013-04-04T16:53:56.030
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在一些 SQL 逻辑上有点挣扎，更不用说。

*数据集示例*

```
wid  CCVnr  Amount  Reference  Seq  Month      ColumIwant=PreviousAmount
11   15946  20      50         1    1/1/2013   NULL
12   15946  20      50         2    1/2/2013   NULL
13   15946  20      50         3    1/3/2013   NULL
14   15946  20      50         4    1/4/2013   NULL
15   15946  20      50         5    1/5/2013   NULL
16   15946  20      50         6    1/6/2013   NULL
35   15946  20      50         1    1/1/2013   NULL
36   15946  10      50         2    1/2/2013   20
37   15946  10      50         3    1/3/2013   20
38   15946  10      50         4    1/4/2013   20
39   15946  10      50         5    1/5/2013   20
40   15946  10      50         6    1/6/2013   20
88   15946  10      50         1    1/1/2013   20
89   15946  20      50         2    1/2/2013   NULL
90   15946  25      50         3    1/3/2013   10
91   15946  25      50         4    1/4/2013   10
92   15946  25      50         5    1/5/2013   10
93   15946  25      50         6    1/6/2013   10 
```

我拥有的前 5 列，我想“计算”最后一列：PreviousAmount。对我而言，问题是每次（重新）加载所有 6 个月时，因此仅查看“更改”值是不够的，您还必须考虑到历史记录。
（我首先有一段 CTE 代码将一行与下一行进行比较，但像这样我错过了历史......）

这里的情况是：客户有一个他想每月支付的金额，他可以更改：在这种情况下，将其从 20 更改为 10 到 25。

我已经上传了一个 CSV 文件或我正在使用的数据集： [https ://mega.co.nz/#!oZhC0RxB!CzzMx3Yr6Kx1_1N9scuNqwJnqoZDGUXte47iOPkLG-E](https://mega.co.nz/#!oZhC0RxB!CzzMx3Yr6Kx1_1N9scuNqwJnqoZDGUXte47iOPkLG-E)

我们使用 SQL Server 2008 R2。表中有 20M 行这样的行。所以也许游标不是最好的选择（？）

非常感谢您的帮助！大号

更新：我添加了一个 wid 列，因为原始数据集也包含一个 wid 列。@Mark **Ba​​nnister**逻辑是查看“金额”，当某个月份的金额被用户更改时：*接下来的所有月份都会在“新金额”时更新 *我们计算上一个金额，即 = 金额是以前

@ **Love2Learn**也感谢您的评论。还有更多列，但您必须知道在 stackoverflow 代码块中添加更多列并不容易。因此，我还上传了一个 CSV 文件，您可以从中找到链接。我确实添加了一个相关的列是“wid”。

通常应该有足够的信息和列来计算前一行。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:27:43.783

您需要某种类型的客户编号——以识别组。说这是`custid`：

```
select t.*,
       (select top 1 
               amount from t t2 where t2.custid = t.custid and t2.month < t.month order by t2.month
       ) as prevAmount
from t 
```

# android - 如何从 URL 获取和解析 Json？

> ID：15817177
> 
> 赞同：-2
> 
> 时间：2013-04-04T16:54:02.617
> 
> 标签：android, json

`JSON`结构是

```
[
   ["Sonstiges"],
   ["Unterhaltung"],
   ["Serie"]
   ["Spielfilm"],
   ["Report"],
   ["Sport"],
   ["Kinder"]
] 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T16:58:16.210

[您可以将这个方便的库用于相同的](https://github.com/loopj/android-async-http)..

# php - 如何在 SQL 语句中正确引用 PHP 会话变量

> ID：15817179
> 
> 赞同：1
> 
> 时间：2013-04-04T16:54:08.927
> 
> 标签：php, mysql, sql, variables

我在网上看到了一些关于这个的帖子，但没有一个建议对我有用。

我的情况很简单..用户登录到一个php表单，使用后端mysql表进行身份验证，启动会话，将它们带到下一页。

我想要做的是将其余的用户数据带入文本框、表格等。但是，我被介绍这样做的唯一方法是引用会话变量。到目前为止我所拥有的如下，我已经尝试了它的许多变体，但似乎没有任何效果（即没有值，页面不加载等）。不过，我对其他选择持开放态度。谢谢大家。

```
$query = "SELECT * FROM users WHERE username = '{$_SESSION['user']}'" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:57:15.750

这是因为嵌套的未转义引号导致您在那里遇到语法错误。尝试

```
$query = "SELECT * FROM users WHERE username = '" 
           . escape({$_SESSION['user']}) . "'"; 
```

或者

```
$query = sprintf("SELECT * FROM users WHERE username = '%s'", 
           escape({$_SESSION['user']})); 
```

并且**永远不要**在不转义的情况下将任何外部数据传递给您的查询（`escape()`我在示例中使用的是元调用。根据您用于访问数据库的内容，您应该使用正确的方法来完成这项工作。它很容易找到，因为它包含`escape`在方法名称中（即`mysqli_real_escape_string()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:57:04.130

> 用户登录 php 表单，使用后端 mysql 表进行身份验证，启动会话，将它们带到下一页。

您需要在使用它之前启动会话。所以`session_start();`在脚本的开头调用。

该查询也是不安全的，因为会话 inst 中的值已转义。如果您使用[PDO](http://www.php.net/manual/en/book.pdo.php)或[Mysqli](http://www.php.net/manual/en/book.mysqli.php)，您可以使用准备好的语句来帮助您：

```
session_start();

if(isset($_SESSION['username'])) {

  $db = new PDO($dsn, $user, $pass);

  // the ? is a placeholder and will be replaced with the value supplied to
  // PDOStatement::execute
  $sql = 'SELECT * FROM users WHERE username = ? LIMIT 1';
  $stmt->prepare($sql);

  // Supply the value for the place holder and execute the query
  $stmt->execute(array($_SESSION['username']));

  // get the first and only row of data and close the statement cursor
  $userData = $stmt->fetch(PDO::FETCH_ASSOC);
  $stmt->closeCursor();

  if(!$userData) {
     // no user data handle appropriately
  }

} else {
    // redirect to login page?
} 
```

# asp.net - WeatherAPI 响应

> ID：15817180
> 
> 赞同：-2
> 
> 时间：2013-04-04T16:54:18.880
> 
> 标签：asp.net

作为我的项目**WeatherDataSharingSystem**的一部分，我需要从不同的 API 获取响应（json/xml 格式）。为此，我需要提供 API 响应的 url。我得到了提供天气预报响应的*OpenWeatherMap API (url: openweathermap.org/data/2.1/forecast/city?q=trivandrum) 的 url。*我需要提供天气预报响应的*WorldWeatherOnline的 url。*

请帮我。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:05:57.003

为天气预报提供 json 响应的 url 是：

[打开天气图](http://api.openweathermap.org/data/2.1/forecast/city?q=trivandrum)

[世界气象网](http://free.worldweatheronline.com/feed/weather.ashx?format=json&num_of_days=1&key=YOUR_APIKEY&q=trivandrum,India&date=2013-04-07)

[艾里萨皮](http://api.aerisapi.com//forecasts/trivandrum,India??filter=14&client_id=YOURCLIENTID&client_secret=YOURCLIENTSECRET)

# asp.net - 使用远程处理的 SSRS 报表查看器（多选参数问题）

> ID：15817182
> 
> 赞同：0
> 
> 时间：2013-04-04T16:54:20.767
> 
> 标签：asp.net, reportviewer, multi-select

非常感谢您对此的帮助。我想在我的 ASPNET (2.0) 页面中显示一个 SSRS reportviewer (VS2005) 控件。我想使用报表处理。它适用于报表查看器中的普通参数，但对多选参数表现奇怪。如果我单击一个多选参数，我可以看到列表闪烁一秒钟然后消失。每次我点击它都会这样做。

任何人都有一个解决方案来阻止这种闪烁和消失，这将允许我从一系列参数中进行选择。

非常感谢您花时间阅读本文，非常感谢您的帮助。最好的问候，史蒂夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:07:01.460

找到了答案，只想分享。这是一个与IE9不兼容的简单问题。当我打开 IE8 兼容性时，它起作用了。

# ios - iOS 应用程序中的性能优化关键代码

> ID：15817184
> 
> 赞同：2
> 
> 时间：2013-04-04T16:54:36.410
> 
> 标签：ios, c, performance, optimization, neon

我正在尝试优化我的应用程序关键部分的性能。用 C 语言编写的代码循环遍历 sourceImage 的所有像素，并计算到每个邻居的“颜色距离”，决定是否记录从 colorDistance 派生的值，然后再转到下一个邻居。

在 XCode 中检测应用程序显示，70% 的时间花在看似简单的浮点计算上——比具有三个 powf 和一个 sqrtf 的代码行长七倍（colorDistance 的计算消耗 10.8%）。

在下面一些代码行的左侧，您将看到从 XCode Instruments 复制所花费的时间百分比。（我还注意到其他平凡的代码行令人惊讶地具有相对较高的百分比，即使与我上面提到的那些不接近）。

任何关于在何处以及如何优化的提示将不胜感激。

干杯

```
 for (int row = 1; row < height - 1; row++)
        {            
            for (int col = 1; col < width - 1; col++)
            {
                int pixelIndex = (col + row * width);
1.7%            int pixelIndexIntoImage = pixelIndex * COMPONENTS_PER_PIXEL;

                // loop over pixel's 8 neighbours clockwise starting from neighbor id 0
                // using Nx[] and Ny[] as guides to calculate neighbour locations
1.6%            for (int n = 0; n < 8; n++)
                {
5.3%                int neighborIndex = pixelIndex + Nx[n] + width * Ny[n];
                    int neighborIndexIntoImage = neighborIndex * COMPONENTS_PER_PIXEL;

                    // skip neighbors that are not a foreground or background
3.3%                uint8_t labelValue = labelsMap[neighborIndex];
1.1%                if (labelValue == LABEL_UNKNOWN_VALUE)
                        continue; 

                    // "color distance" between the pixel and the current neighbour
                    float colorDistance;

1.4%                if(numColorComponents == 3)
                    {
5.3%                    uint8_t redPixel = sourceImage[pixelIndexIntoImage  ];
                        uint8_t grnPixel = sourceImage[pixelIndexIntoImage+1];
                        uint8_t bluPixel = sourceImage[pixelIndexIntoImage+2];

                        uint8_t redNeigh = sourceImage[neighborIndexIntoImage  ];
                        uint8_t grnNeigh = sourceImage[neighborIndexIntoImage+1];
                        uint8_t bluNeigh = sourceImage[neighborIndexIntoImage+2];

10.8%                   colorDistance = sqrtf( powf(redPixel-redNeigh, 2) + 
                                               powf(grnPixel-grnNeigh, 2) + 
                                               powf(bluPixel-bluNeigh, 2));
                    }
                    else
                    {
                        uint8_t pixel = sourceImage[pixelIndexIntoImage   ];
                        uint8_t neigh = sourceImage[neighborIndexIntoImage];

                        colorDistance = fabsf(pixel - neigh); 
                    }

71.2%               float attackForce = 1.0 - (colorDistance / MAX_COLOR_DISTANCE);

                    if (attackForce * strengthMap[neighborIndex] > revisedStrengthMap[pixelIndex])
                    {
                        //attack succeeds

                        strengthMap[pixelIndex] = attackForce * revisedStrengthMap[neighborIndex];

                        outputMask[pixelIndex] = labelsMap[neighborIndex];

                        isConverged = false; // keep iterating

                    }
                }

            }

        } 
```

变量的定义

```
uint8_t *sourceImage; // 4 bytes per pixel
uint8_t *labelsMap, *outputMask; // 1 byte per pixel
int     numPixels = width * height;
float   *strengthMap        = (float*) malloc(sizeof(float)*numPixels);
float   *revisedStrengthMap = (float*) malloc(sizeof(float)*numPixels);
short   Nx[] = {-1,  0,  1, 1, 1, 0, -1, -1}; 
short   Ny[] = {-1, -1, -1, 0, 1, 1,  1,  0}; 
```

根据我收到的建议（乘法比除法“便宜”），我修改了一行代码，有趣的是，71.2% 下降到 1.7%，但是下面的“if”语句飙升到 64.8%——我只是不得到它！

```
1.7%               float attackForce = 1.0 - (colorDistance * MAX_COLOR_DISTANCE_INV);

64.8%              if (attackForce * strengthMap[neighborIndex] > revisedStrengthMap[pixelIndex]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:47:17.463

将其`1.0`转换为 a`1.0f`并确保`MAX_COLOR_DISTANCE`定义为`<something>.0f`，否则在您极其昂贵的线路上会有很多隐式类型转换。

你正在做的那种划分并不是特别昂贵。在 ARM 上，昂贵的是整数除法，因为——不管你信不信——在 ARMv7s 指令集之前没有内置的整数除法。浮点除法要快得多，至少如果你坚持单精度的话。

有没有你没有提到的额外限制？我注意到您的颜色距离公式与人类视觉感知颜色的方式并不真正相关。

在 iOS 上，至少从 5 开始，它也是一种将其踢出到 GPU 的选项，因为您可以直接访问纹理缓冲区，从而消除在 OpenGL 之间来回传递数据的成本。这是一个选择吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:41:11.327

```
 const MAX_COLOR_DISTANCE_RSP = 1 / MAX_COLOR_DISTANCE;
           float attackForce = 1.0 - (colorDistance * MAX_COLOR_DISTANCE_RSP); 
```

此外：用于高速 sqrt 和 recip 估计的[Neon Intrinsics比可以根据需要更准确。](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0205g/BABFCGDJ.html)这将替换您的距离 sqrt。最后，不要使用`powf`, use `val * val`，因为编译器可能不会将该函数优化为一个简单的 mul 。

您还可以通过单次读取读取整个像素（假设 32 位对齐，这应该是 RGBA 文件格式的情况）：

```
uint32_t *sourceImage = (uint32_t *)(&sourceImage[pixelIndexIntoImage]);
uint8_t pixels[4];
*(uint32_t *)(&pixels[0]) = *sourceImage; 
```

现在，您的像素数组已准备好读取所有 4 个组件，尽管由于字节序问题，您必须稍作试验才能确定哪个像素具有哪种颜色。一次 32 位读取比 3 次 8 位读取快得多。

此外，所有这些全局访问可能会损害您的缓存。尝试将它们全部放在一个结构中以确保它们是相邻的。它还将帮助编译器进行本地池管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:03:07.980

如果周期确实用于计算`attackForce`，您可以预先计算一个将值映射`colorDistance`到`attackForce`值的表，并用量化操作和查找替换您的除法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:03:53.923

**乘法：**

```
int pixelIndex = (col + row * width);
int pixelIndexIntoImage = pixelIndex * COMPONENTS_PER_PIXEL; 
```

可以改成加法。这在使用索引时几乎适用于任何地方。

**方法调用：**

```
colorDistance = sqrtf( powf(redPixel-redNeigh, 2) + 
                                           powf(grnPixel-grnNeigh, 2) + 
                                           powf(bluPixel-bluNeigh, 2)); 
```

不要`powf`在这里使用。您可以简单地使用`(grnPixel-grnNeigh)*(grnPixel-grnNeigh)`它仍然会更快。当你的参数是整数时为什么要使用浮点数？

# sql - 在少量查询计数中填充一对多关系

> ID：15817186
> 
> 赞同：0
> 
> 时间：2013-04-04T16:54:36.747
> 
> 标签：sql, tsql, one-to-many

假设我有两个具有一对多关系的表。商店和产品。

我想在一个查询中将数据插入此表（理想）或使用尽可能少的查询。

直截了当的方法是在 shop 表中插入行，然后获取最后一条记录的 id 并将行插入到带有收到 id 的 products 表中。不幸的是，这对我来说并不好，因为我有高延迟的数据库连接。我也有限制访问数据库，不能创建存储过程。那么解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:36:06.503

我不太确定有什么要求。要将数据插入到 2 个表中，您必须使用 2 个插入 SQL。只有一种方法可以确保这 2 个插入工作正确，即使用 begin tran / commit / rollback 和 begin try / begin catch。

```
begin try
    begin tran
        insert into shop...
        insert into product...

    commit
end try
begin catch
    rollback
end catch 
```

因此，如果发生任何事情，它将回滚，否则，它将提交到表。

# c - MPI 局部变量被破坏，为什么？

> ID：15817189
> 
> 赞同：0
> 
> 时间：2013-04-04T16:54:38.583
> 
> 标签：c, mpi

披露：这是一个家庭作业问题。我目前正在 MPI 中编写矩阵乘法器，并且正在尝试诊断段错误。我已将其范围缩小到代码的给定部分，我完全不明白为什么会发生这种情况，否则我对 MPI 有根本的误解（完全有可能）。

主进程ID为0，4个从进程ID为1-4。在从进程计算出它们的输出矩阵块并将它们发送回主进程后，我会收到带有此代码的它们。我已经包含了一些打印语句，这些语句显示了这个变量损坏发生的位置：

```
 for(i=1;i<numtasks;i++) {
        source = i;
        thischunksize = lindex-findex+1;
        rc = MPI_Irecv(&Rbuf, thischunksize*rnx, MPI_INT, source, RCHUNKTAG, MP\
I_COMM_WORLD, request+4);
        printf("0: D Just checking, i is %d and source is %d\n", i, source);
        rc = MPI_Wait(request+4, status+4);
        printf("0: E Just checking, i is %d and source is %d\n", i, source);
        for(j=0;j<thischunksize*rnx;j++)                                
          {                                                                                                                                        
            R[findex*rnx + j] = Rbuf[j];                                
          }
} 
```

输出是：

```
0: D Just checking, i is 1 and source is 1
0: E Just checking, i is 0 and source is 0 
```

因此，当 MPI_Wait 函数运行时，这些变量的值会发生变化。为什么？主进程和从进程都使用 i 变量，但我认为这无关紧要；我假设每个进程都有自己的内存；这不是 MPI 的重点吗？

如果需要，我可以显示其余代码，但我不确定是否有必要。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:37:30.777

回答我自己的问题以供将来参考。

代替

```
rc = MPI_Irecv(&Rbuf, thischunksize*rnx, MPI_INT, source, RCHUNKTAG, MP\
I_COMM_WORLD, request+4); 
```

应该是

```
rc = MPI_Irecv(Rbuf, thischunksize*rnx, MPI_INT, source, RCHUNKTAG, MP\
I_COMM_WORLD, request+4); 
```

我正在愚蠢地获取指针的地址。我不确定我是否应该保留这个......如果我应该删除这个问题，请告诉我，我会的。

# batch-file - 为什么 forfiles 会吞下命令的第一个参数？

> ID：15817191
> 
> 赞同：3
> 
> 时间：2013-04-04T16:54:39.743
> 
> 标签：batch-file, cmd

我正在尝试执行类似于Get Visual Studio 的操作，以使用 cmd[在每个构建上运行 T4 模板](https://stackoverflow.com/questions/1646580)`forfiles`来转换 VS2008 中的每个模板。

如果我执行

```
forfiles /m "*.tt" /s /c "\"%CommonProgramFiles(x86)%\Microsoft Shared\TextTemplating\1.2\TextTransform.exe\" @file" 
```

然后我收到`TextTransform.exe`' 的错误消息（解释将其作为参数传递的文本屏幕）。

如果我改为执行

```
forfiles /m "*.tt" /s /c "cmd /c echo Transforming @path && \"%CommonProgramFiles(x86)%\Microsoft Shared\TextTemplating\1.2\TextTransform.exe\" @file" 
```

然后它完美地工作。

为了调试这个，我创建了一个简单的命令行程序`debugargs`，它简单地打印它接收到的参数的数量和它们的值。然后一些实验表明，直接将命令传递给的第一种形式`forfiles`会导致第一个参数被吞下。例如

```
forfiles /m "*.tt" /s /c "debugargs.exe 1 2 3" 
```

给出输出

```
2 arguments supplied
#1: 2
#2: 3 
```

我能够找到的[文档非常稀少，我认为没有任何提及这一点的可能性。](http://technet.microsoft.com/en-us/library/cc753551.aspx)它只是一个不起眼的错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:59:20.733

这似乎是`forfiles`调用`.exe`s 的方式中的一个错误。凭直觉，我扩展了我的`debugargs`程序以打印完整的命令行。

```
X:\MyProject>forfiles /m "*.tt" /s /c "debugargs.exe 1 2 @file"

2 arguments supplied
#1: 2
#2: Urls.tt
Full command line: 1 2 "Urls.tt" 
```

因此，最合适的解决方法是将可执行文件名称加倍：

```
forfiles /m "*.tt" /s /c "debugargs.exe debugargs.exe 1 2 @file" 
```

另一种解决方法是调用 with `cmd /c`。但是，请注意，如果您需要引用可执行文件的路径（例如，因为它包含一个空格），则需要额外的 prepending 解决方法`@`：

```
forfiles /m "*.tt" /s /c "cmd /c @\"debugargs.exe\" 1 2 @file" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:50:01.153

我也在 forfiles 中重现了这种行为。您可以在命令之前使用 cmd /c 来解决问题，或者您可以转换到 PowerShell，其中等效命令将是这样的（未经测试）：

```
get-childitem . -filter "*.tt" -recurse | foreach-object {
  & "${ENV:CommonProgramFiles(x86)}\Microsoft Shared\TextTemplating\1.2\TextTransform.exe" "`"$($_.Name)`""
} 
```

账单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T03:24:32.193

我也一直在为此苦苦挣扎。我发现的解决方法是在命令和第一个参数之间添加一个额外的空格！所以我想做的地方：

```
FORFILES /s /m *.dll /c "python \"c:\path\to\script.py\" -t arg1 etc" 
```

python试图找到要执行的文件“arg1”，但如果我只是将其更改为：

```
FORFILES /s /m *.dll /c "python  \"c:\path\to\script.py\" -t arg1 etc" 
```

这确实有效！

# vaadin - 如何在 Vaadin 中创建可编辑的生成列？

> ID：15817197
> 
> 赞同：3
> 
> 时间：2013-04-04T16:55:00.493
> 
> 标签：vaadin

我在 Vaadin 有一个表，它有 3 个生成的列。但是，我希望其中一个是可编辑的。因此，该表具有以下列：

```
table.addGeneratedColumn("name", new NameGeneratedColumn());
table.addGeneratedColumn("classification", new ClassificationGeneratedColumn());
table.addGeneratedColumn("variation", new VariationGeneratedColumn()); 
```

`classification`当我单击编辑按钮时，我想使该列可编辑。在`buttonClick`接收`ClickEvent`我尝试实现的方法内部

```
table.setTableFieldFactory(new TableFieldFactory() {

        @Override
        public Field createField(Container container, Object itemId, Object propertyId, Component uiContext) 
            TextField tx = new TextField();
            tx.focus();
            tx.setWidth("90%");
            return tx;
        }
    }); 
```

并添加了`table.setEditable(true)`which 不会影响任何内容，因为表上只有生成的列。它甚至没有进入`createField`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:57:08.577

据我所知，生成的列不会传递给现场工厂。您也许可以添加一个具有“分类”ID 的普通字符串列，然后添加具有相同 ID 的生成列。也许您甚至需要在设置表格可编辑时删除生成的列。

像这样的东西应该工作：

```
 final Table t = new Table();
    t.addContainerProperty("classification", String.class, null);
    final ColumnGenerator generator = new ColumnGenerator() {
        @Override
        public Object generateCell(Table source, Object itemId,
                Object columnId) {
            return "1";
        }
    };
    t.addGeneratedColumn("classification", generator);
    t.addItem();
    t.addItem();
    layout.addComponent(t);
    Button button = new Button("editable", new ClickListener() {

        @Override
        public void buttonClick(ClickEvent event) {
            t.setEditable(!t.isEditable());
            if (t.isEditable())
                t.removeGeneratedColumn("classification");
            else
                t.addGeneratedColumn("classification", generator);
        }
    });
    layout.addComponent(button); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T14:20:10.050

`ColumnGenerator`在's`generateCell`方法中创建您需要的可编辑组件。此方法同时获取参数`itemId`和`propertyId`参数，因此您可以检查给定单元格是否处于可编辑状态。当然，您需要自己跟踪此状态，只需保留一个位置即可`Object editedItemId`。

您需要调用`refreshRowCache`表的方法才能使其正常工作。[从它的Javadoc：](https://vaadin.com/api/com/vaadin/ui/Table.html#refreshRowCache%28%29)

> 需要这样做的典型情况是，如果您更新生成器（例如 CellStyleGenerator）并希望确保使用新样式重新绘制行。
> 
> *请注意，调用此方法并不便宜，因此请避免不必要地调用它。*

# asp.net-mvc-4 - html.beginForm 不调用控制器方法

> ID：15817202
> 
> 赞同：1
> 
> 时间：2013-04-04T16:55:17.407
> 
> 标签：asp.net-mvc-4

我已经在我的 asp.net mvc 4 上工作了一段时间，但我遇到了一个问题......实际上我有两个相关的问题......让我们先从简单的一个开始。

除了这个之外，我有很多视图和所有工作......我已经将其剥离并简化了尝试查找错误的过程......但以下仍然不是调用控制器方法：

```
@using TBS.Etracs.Web.Main.Areas.WorkOrder.Models
@model WorkOrderInputModel

@{
    ViewBag.Title = "Work Orders Per Pad";
}

@using (Html.BeginForm("StartWorkOrderTask", "Mobile", 
         new {WorkCenterID=Model.WorkCenterID, VIN=Model.VIN })) 
{   
        <div>
        <label><strong>WorkCenterID:</strong></label>
        <label>@Model.WorkCenterID</label>
    </div>

    <div>
        <label><strong>VIN:</strong></label>
        <label>@Model.VIN</label>
    </div>

    <input type="submit" value="Start Work Order" />
} 
```

控制器方法是一个名为“MobileController”的控制器，这里是方法签名：

```
 [HttpPost]  //Tried with and without this attribute...
 public ActionResult StartWorkOrderTask(int WorkCenterID, string VIN)
    {
    } 
```

我在控制器方法中设置了一个断点......当表单上的输入按钮被点击时它永远不会被调用......

我以前见过这种问题，原因是：1）有多个 beginForm 2）没有包含正确的 javascript 文件 3）样式参数 ....我不知道为什么，但是在某些控件上包含样式导致了输入按钮不起作用... 4）我确定我打过其他人，但他们现在不想起...

我已经使用 firebug 检查了 html，但没有发现任何问题……它正在创建一个带有指向该方法的 dataurl 的表单……填写了 WorkCenterID 和 VIN 的值……可能是什么引起问题？？？？？？

有没有人建议看什么或尝试调试什么？

我的第二个问题也涉及到控制器方法的调用......我知道我们应该能够拥有这样的方法：

```
 public ActionResult StartWorkOrderTask(WorkOrderInputModel model) 
```

这个在beginForm上

```
@using(Html.BeginForm("StartWorkOrderTask", "Mobile")) 
```

但是大约 90% 的情况下，当我这样做时，控制器方法确实会被调用......我点击了输入按钮，但没有任何反应......通过明确地将参数放在 beginForm 中，我“解决”了问题...... ..但我不知道为什么第一个不起作用

我没有为路线定义任何特殊的东西......只是使用了默认......我正在使用区域，但我一直小心命名，所以没有冲突......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:38:04.897

我仍然对原因一无所知....这是萤火虫的输出：

```
<!DOCTYPE html>
<html class="ui-mobile">
<head>
<base href="http://localhost:58028/WorkOrder/Mobile/ViewWorkOrdersByPad?WorkCenterID=159">
<meta charset="utf-8">
<title>Work Orders Per Pad</title>
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="/Content/Mobile/css/jquery.mobile-1.2.0.min.css" rel="stylesheet">
<link href="/Content/Mobile/css/jquery.mobile-1.2.0.css" rel="stylesheet">
<link href="/Content/Mobile/css/jquery.mobile.theme-1.2.0.css" rel="stylesheet">
<link rel="stylesheet" href="/Content/Site.Mobile.css">
<link rel="stylesheet" href="/Content/Mobile/css/jquery.mobile-1.2.0.css">
<link rel="stylesheet" href="/Content/Mobile/css/jquery.mobile.structure-1.2.0.css">
<link rel="stylesheet" href="/Content/Mobile/css/jquery.mobile.theme-1.2.0.css">
<script src="/Scripts/jquery-1.7.1.js">
<script src="/Scripts/jquery.mobile-1.3.0.min.js">
<script>
</head>
<body class="ui-mobile-viewport ui-overlay-c">
<div class="ui-page ui-body-c ui-page-active" data-theme="c" 
 data-role="page" data-url="/WorkOrder/Mobile/ViewWorkOrdersByPad?WorkCenterID=159"
 tabindex="0" style="min-height: 321px;">role=

"page" theme="c"

mobilePage=Object { element={...}, uuid=1, eventNamespace=".page1", more...}title=

"Work Orders Per Pad"

<div class="ui-loader ui-corner-all ui-body-a ui-loader-default">
 mobileLoader=Object { element={...}, uuid= 0, eventNamespace=".loader0", more...}
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:32:40.630

通常你会有一个 get 和一个 post，你的 get 将使用与你的 post 相同的模型，然后可以像这样运行：

```
public ActionResult StartWorkOrderTask(WorkOrderInputModel model) 
```

其中 workorderinputmodel 是您的 VIEW 模型，这将允许简单：

```
@using(Html.BeginForm()) 
```

而且您也不需要任何自定义路线。然而随着

```
public ActionResult StartWorkOrderTask(int WorkCenterID, string VIN)
{
} 
```

您将需要这样的自定义路线：

```
routes.MapRoute("Nameforthis", "area/Controller/View/{WorkCenterID}/{VIN}", new { controller = "namehere", action = "namehere" }); 
```

注意字符串 {} 中的属性名称这允许自动映射。

另一种解决方案是采用表单值集合并且不传递任何路由值，然后您可以读取它的属性。

以下链接汁可能会有所帮助： [如何在 ASP.NET MVC 中枚举表单集合？](https://stackoverflow.com/questions/762825/how-can-a-formcollection-be-enumerated-in-asp-net-mvc)

最后，您是否收到 404 或错误，或者您的表单根本没有提交？您还检查了呈现的 HTML 以查看您的代码生成的帖子 URL 是什么。

# java - 回文检查器 Java 布尔洞察

> ID：15817203
> 
> 赞同：2
> 
> 时间：2013-04-04T16:55:25.670
> 
> 标签：java, string, boolean, palindrome

所以我正在用java做一个回文检查器，我似乎遇到了障碍，这是我的代码到目前为止：

```
public class StringUtil
{

public static void main(String[] args)
{
    System.out.println("Welcome to String Util.");       
    Scanner word = new Scanner(System.in);

    String X = word.nextLine();       
    String R = palindrome(X);

    System.out.println();
    System.out.println("Original Word: " + X);     
    System.out.println("Palindrome: " + R);

}

public static boolean palindrome(String word)
{
   int t = word.length(); //length of the word as a number
   int r = 0;

   if(word.charAt(t) == word.charAt(r))
   {
       return true;
    }
    else
    return false;
} 
```

到目前为止，我只希望它检查第一个字母是否与最后一个字母相同，但是当我编译它时，我在“String R = palindrome(X);”上得到一个不兼容的类型错误。我如何让它在它下面的输出语句上打印真或假？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T16:56:39.440

您的`palindrome`方法返回 a `boolean`，但您试图将其分配给 a `String`。`R`将变量的定义更改为`boolean`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:57:26.660

由于字符在 java 中的字符串（或数组）中索引为 0，因此最后一个字符的长度为 - 1

尝试

```
int t = word.length() - 1; 
```

* * *

糟糕，这不是你遇到的问题。但是，一旦解决了类型错误，您就会立即注意到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T16:58:20.870

word.charAt(t - 1)，否则你的字符串计数过多，也返回“true”；如果您想使用 String 作为结果类型，则返回“false”；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-16T18:24:44.137

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexMatches {
    public static void main(String args[]) {

        // String to be scanned to find the pattern.
        String line = "This order was placed for QT3000! OK?";
        String pattern = "(.*)(\\d+)(.*)";

        // Create a Pattern object
        Pattern r = Pattern.compile(pattern);

        // Now create matcher object.
        Matcher m = r.matcher(line);
        if (m.find()) {
            System.out.println("Found value: " + m.group(0));
            System.out.println("Found value: " + m.group(1));
            System.out.println("Found value: " + m.group(2));
        } else {
            System.out.println("NO MATCH");
        }
    }
} 
```

# c# - 无法在网格视图上设置单元格颜色

> ID：15817204
> 
> 赞同：2
> 
> 时间：2013-04-04T16:55:38.530
> 
> 标签：c#, asp.net, gridview

对于每个循环，我有一个简单的检查网格视图第 10 个单元格中的文本，然后将该单元格的颜色设置为取决于文本的绿色或红色。

除了第一行中的第一个单元格被忽略之外，这一切正常。我在 for 循环中遇到过与此类似的情况，但不是 for each。

这是我的代码：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        GridView vg = GridView1;

        foreach (GridViewRow row in vg.Rows)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                if (e.Row.Cells[10].Text == "Order has been dispatched.")
                {
                    e.Row.Cells[10].BackColor = Color.LawnGreen;
                }

                if (e.Row.Cells[10].Text == "Order is being processed.")
                {
                    e.Row.Cells[10].BackColor = Color.Red;
                }

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:47:14.550

我不知道这是否会有所帮助。可能不是。但是你有多余的代码。将您的代码更改为以下内容，并确保为每一行调用事件处理程序。我认为您不必确保 GridViewRow.RowType 是 DataRow，因为您只会在 DataRow 上获得此事件。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.Cells[10].Text == "Order has been dispatched.")
       e.Row.Cells[10].BackColor = Color.LawnGreen;
    if (e.Row.Cells[10].Text == "Order is being processed.")
        e.Row.Cells[10].BackColor = Color.Red;
} 
```

# css - FF & Opera vs Chrome (Mac) 1px 边距差异

> ID：15817206
> 
> 赞同：1
> 
> 时间：2013-04-04T16:55:43.450
> 
> 标签：css, google-chrome, firefox, opera, margin

我对 Chrome（或 FF？）有这个烦人的问题。我还没有检查IE。渲染有一个像素差异，我不知道在哪里可以挖掘更多。我已经使用了三种浏览器（FF、Opera、Chrome）的所有检查器来查看是否有任何需要调整的地方，但没有成功。这要么是一个错误，要么我对这个错误视而不见。

在此处查看示例：www.vanwright.com/catalogue/le-kex-walking-kids/

问题是指两行中从左侧开始的第一张图像的左边距。Chrome显示2px边框，而其他浏览器显示1px，这就是我所追求的。它是由 nth-of-type 选择器引起的吗？可能不是，因为这里：www.vanwright.com/collections/ 似乎有同样的问题（margin-left: -10px 在 Chrome 中显示 1px 行，而在 FF/Opera 中没有空间）。

我搞不清楚了。有任何想法吗？

谢谢，流行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:40:59.120

**选项1**

修复和维护`960px`布局：

删除所有的`:nth-of-type`CSS`.pi-pad`

将 .pi-pad 的 css 更改为：`.pi-pad {margin: 1px 1px 1px 0; width: 318px; padding: 0px;}`

修复数学 960px 布局的背景（我认为它目前是为 979px 布局设计的）；

**选项 2**

展开当前布局以匹配背景。（这很笨重，因为背景的宽度不能被 3 整除）

CSS for`.container`并且`.span-12`应该指定`width: 979px`

更改`.pi-pad:nth-of-type(3n+1)`或`.pi-pad:nth-of-type(3n)`CSS 以读取`width: 325px;`并删除另一个。

更改`.pi-pad`CSS 以读取`.pi-pad {margin: 1px 1px 1px 0; width: 324px; padding: 0px;}`

**=========编辑=========**

我在看到你上面的回复之前发布了这个，我也忘了隐藏你的溢出。

使用选项 2，现在我确定它是 980 像素（我测量时看起来像 979）

`.container`并且`.span-12`应该有`width: 980px;`

更改`.pi-pad`CSS 以读取`.pi-pad {overflow: hidden; margin: 1px 1px 1px 0; width: 325px; padding: 0px;}`

使用`.pi-pad:nth-of-type(3n)`OR`.pi-pad:nth-of-type(3n+1)`应该指定`width: 326px;`并删除另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:21:44.747

这是一个 Chrome 错误。感谢 runspired 抽出时间。对于试图修复无法修复的任何人，我们深表歉意。

[带铬的背景中心（错误）](https://stackoverflow.com/questions/6454019/background-center-with-chrome-bug)

# ubuntu - “arm login” 使用 minicom 访问 beagleboard XM

> ID：15817208
> 
> 赞同：1
> 
> 时间：2013-04-04T16:55:52.153
> 
> 标签：ubuntu, beagleboard

所以我不太确定这里发生了什么。我正在运行 Ubuntu 12.04 并运行 minicom 以（表面上）串行连接一个 beagleboard XM，我很确定它正在运行 Angstrom linux。

我可以通过 minicom 成功连接到 BBXM，但在完成启动后，我面临以下问题：

```
arm login:
Password: 
```

我已经尝试传递“root”以及我的 ubuntu 用户名以及无密码和我的 ubuntu 密码。

BBXM 在 arm 处理器上运行，所以我倾向于相信这个登录以某种方式连接到 beaglebone，但我似乎找不到任何文档表明除了 root 之外它可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T15:53:20.690

尝试`ubuntu`作为用户和`temppwd`密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T16:01:31.597

我在 BeagleBone Black 上安装 ubuntu-saucy-13.10-armhf-3.8.13-bone30 并以用户**ubuntu**登录，密码为**ubuntu**

# mongodb - MongoDB - 单一庞大的原始数据集合。分还是不分？

> ID：15817213
> 
> 赞同：7
> 
> 时间：2013-04-04T16:56:10.327
> 
> 标签：mongodb

我们从大量主机收集和存储仪器数据。我们的存储是 MongoDB——几个带有副本的分片。一切都存储在一个大型集合中。我们插入的每个文档都是基于时间的观察，具有一些属性（测量值）。时间戳是最重要的属性，因为所有查询都至少基于时间。文档永远不会更新，所以它是一个纯粹的 write-in-look-up 模型。现在它可以很好地处理数十亿个文档。

现在，

我们希望增长一点，并保存长达 12 个月的数据，这些数据可能相当于可怕的万亿以上的观察（文件）。如果将所有东西都倾倒到一个巨大的集合中是最好的选择，或者有更聪明的方法来解决它，我一直在徘徊。我的意思是更智能 - 使用更少的硬件，同时仍然提供快速插入和（重要的是）快速查询。所以我考虑将大集合拆分成更小的部分，希望在索引、插入和查询速度上获得内存。

我研究了分片，但按时间戳分片听起来是个坏主意，因为所有写入都将进入一个节点，从而取消了分片的好处。插入率非常高，所以我们需要分片才能在这里正常工作。我还考虑过每个月创建一个新集合，然后为用户查询挑选一个相关集合。超过 12 个月的收藏将被删除或存档。还可以选择每月创建全新的数据库并进行类似的轮换。其他选择？或者也许一个大系列是真正变大的选择**？**

请分享您在类似应用中的经验和注意事项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:24:28.557

我认为按月收集将帮助您获得一些提升，但我想知道为什么您不能使用时间戳的小时字段进行分片。您可以添加一个包含时间戳的 HOUR 部分的列，并且当您对它进行分片时，它将很好地共享，因为您每天都有重复的小时。我没有测试过，但认为它可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:53:19.250

这实际上取决于您的查询的用例。

如果它是可以聚合的东西，我会说通过预定的 map/reduce 函数来做到这一点，并将较小的数据大小存储在单独的集合中。

如果一切都应该在同一个集合中，并且应该同时查询所有数据以生成所需的结果，那么您需要使用 Sharding。然后根据查询的数据大小，您可以使用内存映射/减少，甚至可以在应用程序层进行。

正如您自己所指出的，基于时间的分片是一个非常糟糕的主意。它使所有写入都转到一个分片，因此请定义您的分片键。[MongoDB Docs](http://docs.mongodb.org/manual/core/sharded-cluster-internals/)对此有很好的解释。

如果您可以详细说明您对查询的具体需求，那么提出一些建议会更容易。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-24T12:37:32.810

建议继续进行单个收集，正如@Devesh 建议的基于小时的分片应该没问题，在查询时需要处理新的“小时键”以获得更好的性能。

# payment - Dwolla 的支付按钮是否返回 oAuth 令牌？

> ID：15817215
> 
> 赞同：0
> 
> 时间：2013-04-04T16:56:13.923
> 
> 标签：payment, dwolla

Dwolla 的支付按钮是否会返回一个 oAuth 令牌，这样用户就不必再重定向到 Dwolla 的网站了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:56:59.533

转述 Dwolla 技术支持，

> “...支付按钮使用异地网关...根本不处理 oauth 和/或令牌，另外，如果您要使用 oauth 令牌，无论如何您都需要最低水平的编码知识，并且付款按钮实际上只是为那些根本不编码的人准备的”

# javascript - 如何在 JQuery liveFilter 中添加多个搜索字段

> ID：15817216
> 
> 赞同：1
> 
> 时间：2013-04-04T16:56:18.153
> 
> 标签：javascript, jquery, search

我正在从数据库中输出信息并在 JQuery 手风琴中显示它。轻松，搞定。

但是我会想要很多，所以我想添加一个搜索功能。尤其是[liveFilter](http://anthonybush.com/projects/jquery_fast_live_filter/)，它很棒。

但我希望能够分别搜索代码片段的标题和内容。到目前为止，我已经能够成功搜索 Div 手风琴内的所有内容，但不能搜索单个元素。到目前为止我的尝试。

jQuery

```
 <script>
  $(function() {
    $( "#accordion" ).accordion({
      collapsible: true
    });
  });
  $(function() {
        $('#search_input_1').fastLiveFilter('#code_title');
    });
    $(function() {
        $('#search_input_2').fastLiveFilter('#code_content');
    });
  </script> 
```

PHP 输出

```
<p><div id="accordion"><h3 id="code_title">Printing while loop - PHP</h3>
<div id="code_content"><p>Bla bla bla bla</p></div></div> 
```

网页搜索

```
 <p>Title / Language: <input id="search_input_1" placeholder="Title or Language"> Content / Description: <input id="search_input_2" placeholder="Content or Description"> 
```

据我所知，这应该有效，但事实并非如此。不从**code_title**或**code_content** id'd 标记中搜索或返回结果。

我目前在这里[运行](http://noopentags.com/code.php)它，所以你可以明白我的意思，但这是第一个搜索输入搜索 Div 手风琴。第二个仍然搜索**code_content**以便您可以看到它是如何不起作用的。

有谁知道为什么这不起作用？ps 手风琴中有文字，但是是白色的，所以可以融入其中。

*顺便说一句，如果有人知道如何让他们在被搜索后恢复到崩溃状态，我将无限感激他们*

# c++ - 删除整数和字符串的简单标准映射的完美方法

> ID：15817218
> 
> 赞同：3
> 
> 时间：2013-04-04T16:56:29.870
> 
> 标签：c++, arrays, dictionary

我的 std::map 看起来像这样。

```
std::map<int, std::string> *myMap = new std::map<int, std::string>[100]; 
```

我该如何删除这个？够`delete myMap`了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:56:57.597

由于您已经分配了 100`std::map`秒`new[]`，因此您必须使用 取消分配它们`delete[]`：

```
delete[] myMap; 
```

对于每个`new`/ `new[]`，必须有一个`delete`/ `delete[]`（分别）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:19:06.473

你有一系列地图，所以你几乎是正确的。您需要`delete [] myMap`正确清理阵列。

但不要那样做。使用 a `vector`of maps 代替：

```
std::vector<std::map<int, std::string> > myMap(100); 
```

这将自动为您处理所有内存管理和清理！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:52:09.703

boost::scoped_ptr< std::map > myMap = new std::map[100];

强烈建议使用 boost::scoped_ptr 和 boost::shared_ptr（当一个内存位置被多个 thigns 访问时）它们是智能指针并且具有许多优点。它们支持自定义删除器，因此它们是内存安全的，这意味着您不必担心删除使用 new 或 new[] 创建的内容。它们也是线程安全的。他们的实现是模板化的，并且可以使用任何类型等。

# c# - C#：为 DataGridView 列标题创建单击事件

> ID：15817220
> 
> 赞同：1
> 
> 时间：2013-04-04T16:56:37.330
> 
> 标签：c#, visual-studio-2010, datagridview, mouseevent, datagridviewcolumn

我正在尝试为 DataGridView 列标题创建一个单击事件，以便当用户单击以重新排序数据时，我可以运行代码以新顺序绘制甘特图（参见下面的屏幕截图）。

如您所见，我希望用户能够对 datagridview 和甘特图进行排序以响应重新排序。

我已经尝试按照 msdn 使用单击事件，但是当我测试它时这没有效果：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columnheadermouseclick.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columnheadermouseclick.aspx)

```
private void dataCapPlan_ColumnHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        MessageBox.Show("OK");
    } 
```

对于 DataGridView`dataCapPlan`

有任何想法吗？

非常感激！

![形式](https://i.stack.imgur.com/d6zAN.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:15:21.900

需要添加代码：

```
dataCapPlan.ColumnHeaderMouseClick +=new DataGridViewCellMouseEventHandler(dataCapPlan_ColumnHeaderMouseClick); 
```

请参阅帖子： [单击 DataGridView 中的行标题的事件](https://stackoverflow.com/questions/11116290/event-for-clicking-on-row-headers-in-datagridview)

# javascript - 缺少观察者的更新？

> ID：15817224
> 
> 赞同：0
> 
> 时间：2013-04-04T16:56:51.797
> 
> 标签：javascript, model-view-controller, ember.js, javascript-framework, ember-data

[这是一个小提琴](http://jsfiddle.net/gt7uy/2/)

该模板有多个具有不同绑定属性的相同 subView 实例。您可以看到这些绑定属性何时在其观察者上触发事件。请注意，子视图 A 和 D 触发，但 B 和 C 从不触发。

```
{{view App.SubView identifier="A" modelDataBinding="view.person.first"}}
{{view App.SubView identifier="B" modelDataBinding="view.person.children"}}
{{view App.SubView identifier="C" modelDataBinding="view.person.children.@each.name"}}
{{view App.SubView identifier="D" modelDataBinding="view.person.children.length"}} 
```

所以，两部分的问题：

1.  为什么 B 或 C 不开火？
2.  绑定到此 Person 模型的子代的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T22:51:09.370

您在这里混合了两件事：绑定与观察者不同。你不能绑定到某个东西。@each.name，你需要绑定到数组并观察@each。绑定是 2 个值之间的连接，@each 并不是真正的值，它是一种特殊语法，用于告诉观察者（或计算的属性依赖项）您希望依赖集合中每个元素的属性。

另一个问题是，如果在设置值之后添加观察者，它不会触发，因为值已经设置（即没有更改）。在您的示例中， App.Person.find(1) 立即返回对象，而 person.children 也这样做 - 它立即返回数组，稍后将填充数据。所以当你运行 addObserver 时，children 已经设置好了，只有它的内容会发生变化（这就是长度观察器正确触发的原因）。

这是一些更改的小提琴：http: [//jsfiddle.net/drogus/6EVty/1/](http://jsfiddle.net/drogus/6EVty/1/)（我添加了observerPath并在插入视图后设置人员），代码：

```
<script type="text/x-handlebars" data-template-name="main">
    {{view App.SubView identifier="A" modelDataBinding="view.person.first"}}
    {{view App.SubView identifier="B" modelDataBinding="view.person.children"}}
    {{view App.SubView identifier="C" modelDataBinding="view.person.children" observePath="modelData.@each.name"}}
    {{view App.SubView identifier="D" modelDataBinding="view.person.children.length"}}
</script> 
```

和视图类：

```
SubView: Ember.View.extend({
    init: function( ) {
        this._super();
        var observePath = this.get('observePath') || 'modelData';
        this.addObserver( observePath, this, function( ) {
            document.write( 'trigger ' + this.get( 'identifier' ) + ': ', this.get( 'modelData' ), '<br />');
        });
    }
}) 
```

# mysql - mysql - 今天在两列值之间

> ID：15817225
> 
> 赞同：0
> 
> 时间：2013-04-04T16:56:54.903
> 
> 标签：mysql, sql, date, between

```
| id         | first (datetime)    | last (datetime)
--------------------------------------------------------
| 1          | 2013-04-15 00:00:00 | 2013-04-21 23:59:00
| 2          | 2013-04-08 00:00:00 | 2013-04-14 23:59:00
| 3          | 2013-04-01 00:00:00 | 2013-04-07 23:59:00
| 4          | 2013-04-01 00:00:00 | 2013-04-07 23:59:00 
```

如果记录日期时间范围涵盖今天，我想显示记录。（此示例的 3 和 4）

我试着用两个做这个`NOW()`，它在第二个给出语法错误`NOW()`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:58:32.680

```
select *
from your_table
where current_date() between first_datetime and last_datetime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:04:07.017

```
select 
    *
from
    your_table
where
    first <= NOW() 
and last >= NOW() 
```

# c++ - 稳定时钟如何与有限位时间表示交互？

> ID：15817235
> 
> 赞同：4
> 
> 时间：2013-04-04T16:57:19.630
> 
> 标签：c++, c++11, chrono

20.11.7.2/1 开始：

> 类对象`steady_clock` 表示时钟，其值`time_point`永远不会随着物理时间的推移而减少，并且其值以`time_point`相对于实时的稳定速率前进。也就是说，时钟可能不会被调整。

从概念上讲，这很不错，但考虑到几乎可以肯定代表一个时间点的位数是有限的，很难想象一个稳定时钟的值永远保持增长的实现。

20.11.3/2 似乎支持了我缺乏想象力，因为它（在非规范性注释中）指的是“环绕”的时钟。这表明如果我从同一个稳定时钟中获取a`time_point t1`和 a ，则可能会出现更早的时间，因为时钟可能在和之间。`time_point t2``t2``t1``t2`

我发现很难理解这个领域的标准。有人可以澄清稳定时钟和时钟包装的关系和相互作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:10:03.793

`steady_clock`请在您实际见证翻转时提交错误报告。在我的系统上，如果我在接下来的 292 年内不重新启动计算机，那将发生在 2305 年。如果我当时没有回应，请见谅。:-)

开个玩笑，实现需要支持足够大的位长度，以便在实际持续时间内无法观察到时钟翻转。从计算机启动时开始以 64 位整数计算纳秒是一种合理的实现方式。

# sql - SQL 记录出现次数

> ID：15817239
> 
> 赞同：2
> 
> 时间：2013-04-04T16:57:26.237
> 
> 标签：sql, sql-server, count, sql-server-2012

我需要在 SQL 中解决以下问题。

假设我有一个包含 2 列的表：

```
 Date | Code
    --------
    0    | 25
    1    | 22
    2    | 23
    3    | 25
    4    | 23
    5    | 21 
```

而且我需要对它们进行计数，因为日期与我相关。所以，假设我需要制作这样的东西：

```
 Date | Code | Count
    --------------------
    0    | 25   |   1
    1    | 22   |   1
    2    | 23   |   1
    3    | 25   |   2
    4    | 23   |   2
    5    | 21   |   1 
```

提前致谢，

PS：我在 MSSQL 2012 中实现它。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:15:00.260

最简单（可能也是最有效）的方法是使用`ROW_NUMBER()`：

```
SELECT [Date], Code, [Count] = ROW_NUMBER() OVER (PARTITION BY Code ORDER BY [Date])
 FROM dbo.YourTableName
 ORDER BY [Date]; 
```

为了好玩，你也可以在 SQL Server 2012 中这样解决。如果`Date`是唯一的：

```
SELECT [Date], Code, [Count] = COUNT(*) OVER (PARTITION BY Code ORDER BY [Date]
  RANGE UNBOUNDED PRECEDING)
 FROM dbo.YourTable
 ORDER BY [Date]; 
```

或者更简单地说：

```
SELECT [Date], Code, [Count] = COUNT(*) OVER (PARTITION BY Code ORDER BY [Date])
 FROM dbo.YourTable
 ORDER BY [Date]; 
```

如果`Date`不是唯一的，并且如果您不想要关系（日期+代码的相同组合的计数相同），则需要使用更昂贵的`ROWS`，它在磁盘假脱机上使用：

```
SELECT [Date], Code, [Count] = COUNT(*) OVER (PARTITION BY Code ORDER BY [Date]
  ROWS UNBOUNDED PRECEDING)
 FROM dbo.YourTable
 ORDER BY [Date]; 
```

您可能想在您的桌子上尝试这些选项中的每一个，看看性能如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:09:04.267

看起来您想要代码值的运行计数。如果是这样，那么您可以使用以下查询来获取运行计数：

```
SELECT date,
  code, 
  (SELECT count(code)
   FROM yourtable b 
   WHERE b.date <= a.date
     and a.code = b.code) AS TotalCount
FROM yourtable a 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/280bc/1)

或者您可以使用：

```
SELECT a.date,
  a.code, 
  count(a.code) AS TotalCount
FROM yourtable a
cross join yourtable b
WHERE b.date <= a.date
  and a.code = b.code
group by a.date, a.code
order by a.date; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/280bc/6)

请注意，这在较小的表上可以正常工作，但在较大的表上会出现问题。（感谢@AaronBertrand）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:12:43.997

如果我理解正确，您想添加额外的列，告诉您该代码发生了多少次。

```
select *, 
COUNT(1) over (partition by Code) 
from Table 
```

# macos - Mac 的差异工具，无需将文本保存到文件

> ID：15817242
> 
> 赞同：16
> 
> 时间：2013-04-04T16:57:29.193
> 
> 标签：macos, diff

我在 Linux 上使用 meld，我可以比较两段文本，而无需将它们保存在文件中。Mac和Windows有类似的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T17:11:01.600

[BBEdit](https://www.barebones.com/products/bbedit/) for macOS 可以很好地区分磁盘上的文件或正在编辑的文档。

这将允许您制作两个空文档，将您的文本粘贴到每个文档中并运行差异。

BBEdit 是一款付费应用程序，但它有一个免费模式，可以让你做你想做的事。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T17:03:14.700

meld 工具已经移植到 Mac OS X 并且可以通过["fink"](http://meld.sourceforge.net/install.html)获得。

[另一个链接是这个。](http://fink.sourceforge.net/pdb/package.php/meld)

不过你需要先安装 fink，我相信你可以从[这里](http://www.finkproject.org/)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:05:26.290

NotePad++ 与 Windows 上的比较插件：http:
[//sourceforge.net/projects/npp-compare/](http://sourceforge.net/projects/npp-compare/)

![记事本++](https://i.stack.imgur.com/JvxSx.jpg)

# css - 纯 CSS 手风琴问题 - 跳转到手风琴内部的链接

> ID：15817246
> 
> 赞同：-1
> 
> 时间：2013-04-04T16:57:40.303
> 
> 标签：css

我有一个没有 Javascript（纯 CSS）的手风琴式网站。每个“手风琴章”都很大。

我想通过从外部到章节内部的链接跳转（不仅仅是开始 => 这适用于手风琴），而是跳转到章节内部的某个位置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:12:12.203

给`div`章节的（不一定是 div 可以是任何标签）元素一个 id 说

```
<div id="some-chapter">
   ...The Content...
</div> 
```

现在，`yourwebsiteurl/#some-chapter`将带你到那一章

如果不清楚，您可以发布一些您想要实现的代码吗？

# javascript - 使用 jquery 从 json 文件中加载图像

> ID：15817247
> 
> 赞同：3
> 
> 时间：2013-04-04T16:57:40.973
> 
> 标签：javascript, jquery, html, json

所以我有一个 json 文件，现在可以很好地单独加载文本和图像，这只是我测试它是否可行的一个简单示例：

```
 outputc+="<li>"
  outputc+=this.name+" "+this.price+"</li>";
  $('#featured').append(outputc);
  $("<img/>").attr('src',this.images).appendTo('#featured'); 
```

使用上面的代码可以完美地工作，但是我需要用一个列表来包装这两个，所以我做了一些搜索，我发现了这个：

```
$(document).ready(function(){

//loading json file

var url = "shoppingItems.json";

$.getJSON(url,function(json){

    $.each(json.shoppingItem,function()
    {
        var output ='<li><img src= "'+this.images+'" alt ="'+this.name+'"></li>';
    });

    $('.items').append(output);
});
}); 
```

上面的 jQuery 根本没有带回任何东西，我的 json 文件没有任何问题，因为它已经过验证，如果我只是提醒它，代码就可以工作。这可能是我对我看不到的输出脚本做错的事情。

我的 JSON 文件可以在这里找到：[Json 文件未加载或显示警报](https://stackoverflow.com/questions/15789410/json-file-not-loading-or-showing-alerts)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:59:22.607

由于您在回调函数中将其声明为`var output`，因此该`output`变量是该回调函数的本地变量，并且在循环完成后消失。即使不是这种情况，使用`=`运算符也意味着您在每次迭代时都会覆盖先前的值。

试试这个：

```
var output = ""; // initialize it outside the loop
$.each(json.shoppingItem,function()
{
    output += '<li><img src= "'+this.images+'" alt ="'+this.name+'"></li>';
});
$('.items').append(output); 
```

[http://jsfiddle.net/mblase75/zB5fv/](http://jsfiddle.net/mblase75/zB5fv/)

# asp.net-mvc-3 - 如何在亚马逊 S3 中使用捆绑和缩小创建物理目录

> ID：15817248
> 
> 赞同：0
> 
> 时间：2013-04-04T16:57:48.380
> 
> 标签：asp.net-mvc-3, visual-studio-2012, bundle, minify, bundling-and-minification

视觉工作室 2012 - Asp.net MVC3

我正在使用microsoft asp.net web优化框架进行捆绑和缩小，但是我在使用捆绑和缩小时出现问题，一切正常的地方，但我需要在创建虚拟目录时创建一个物理目录（文件夹） amazon s3 与我的缩小、捆绑和图像。

我的代码在本地工作 100% 好的，这是我的代码

```
protected void Application_Start()
{
 BundleTable.EnableOptimizations = true;
 RegisterBundles(BundleTable.Bundles);
 AreaRegistration.RegisterAllAreas();
 RegisterGlobalFilters(GlobalFilters.Filters);
 RegisterRoutes(RouteTable.Routes);
}

public static void RegisterBundles(BundleCollection bundles)
{
/ * This example ~ / Content / css would be a physical folder containing the bundle, images and css minificados have a separate server just for images and css and javascript * /
     bundles.Add(new StyleBundle("~/Content/css").Include(
                            "~/Content/Site.css"));
} 
```

在我的布局视图中

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    @System.Web.Optimization.Styles.Render("~/Content/css")
</head>
<body>
    <div class="page">
        <div id="header">
            <div id="title">
                <h1>My MVC Application</h1>
            </div>
            <div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>
            <div id="menucontainer">
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("About", "About", "Home")</li>
                </ul>
            </div>
        </div>
        <div id="main">
            @RenderBody()
        </div>
        <div id="footer">
        </div>
    </div>
</body>
</html> 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T14:32:47.040

[http://blogs.lessthandot.com/index.php/webdev/serverprogramming/making-squishit-work-with-amazon/](http://blogs.lessthandot.com/index.php/webdev/serverprogramming/making-squishit-work-with-amazon/)

这会将您的捆绑包上传到亚马逊并从那里提供服务。挺整洁的。

# jquery - jquery ajax 在 joomla 中加载和淡入淡出

> ID：15817249
> 
> 赞同：0
> 
> 时间：2013-04-04T16:57:55.330
> 
> 标签：jquery, ajax, joomla2.5

在我的 joomla 站点中，我正在使用此代码使用 Ajax 加载页面：

```
jQuery(document).ready(function(){

jQuery("#<?php echo $item->alias; ?>").click(function(){

    jQuery('#interno').fadeOut(500, function ck_load(){

    jQuery('#principale').load('<?php echo $ck_link; ?> #interno', function ck_fade_in() {

                jQuery('#interno').fadeIn(3000);

                });

          });

     });
}); 
```

在 index.php 中，这是 DIV 的结构：

```
...
<div id="principale">
    <div id="interno">
        // Here is loaded the page from the component
    </div>
</div> 
```

它在容器 div (#interno) 淡出后工作并加载页面；但是最终的回调函数没有生效（fadeIn）并且页面加载没有任何淡入效果......你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:00:56.747

您已将函数变量作为回调函数参数传递给`.load`

你应该传递一个这样的函数：

```
jQuery('#principale').load('<?php echo $ck_link; ?> #interno', function() {

    jQuery('#interno').fadeIn(3000);

}); 
```

**来源**

[jQuery API - .load()](http://api.jquery.com/load/)

# c++ - 尽管显示配置文件不同，如何确保吸管工具返回一致的值？

> ID：15817250
> 
> 赞同：0
> 
> 时间：2013-04-04T16:58:00.320
> 
> 标签：c++, macos, colors, core-graphics, quartz-2d

对于需要在 Windows 和 OSX 上运行的应用程序，我处于一个令人羡慕的位置，即使用庞大的既定代码库。我目前正在处理的部分包含一些用于吸管/颜色选择器工具的遗留代码。不幸的是，我没有太多为 Mac 开发的经验，所以我希望有人能对我的问题有所了解。

在某些情况下，吸管颜色略有错误，我将问题追溯到通过调用 CGColorSpaceCreateWithName( kCGColorSpaceGenericRGB ) 设置的预期 CGColorSpaceRef 与主显示配置文件设置的实际颜色空间之间的差异。将操作系统显示配置文件设置为通用 RGB 可以消除差异，但无论显示配置文件是什么，我都希望吸管能够获得一致的颜色。

检索主显示器显示配置文件并使用它而不是通用 RGB 配置文件可以确保吸管工具获得一致的值吗？我找到了 CGColorSpaceCreateWithPlatformColorSpace(...) 函数，但根据文档，它自 OSX 10.6 以来已被弃用。目前在 Quartz 中处理这个问题的方法是什么？

我对此感到有些拘束，因为我没有权力或专业知识来进行重大更改，例如添加对其他框架的依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:43:16.840

NSColor 有这个功能：

```
-(void)getRed:(CGFloat *)red green:(CGFloat *)green blue:(CGFloat *)blue alpha:(CGFloat *)alpha 
```

这将返回从与设备相关的色彩空间转换而来的 RGB 分量。

取自[Radiant Color Picker的示例](https://developer.apple.com/library/mac/#samplecode/RadiantColorPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008861-Intro-DontLinkElementID_2)

```
CGFloat red, green, blue, a;
NSColor *colorAsRGB = [_color colorUsingColorSpaceName:NSDeviceRGBColorSpace];
[colorAsRGB getRed:&red green:&green blue:&blue alpha:&a]; 
```

相关链接：

[NSColor](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColor_Class/Reference/Reference.html)

[使用色彩空间](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DrawColor/Tasks/UsingColorSpaces.html)

# android - OnClickListener 按住按钮？

> ID：15817251
> 
> 赞同：8
> 
> 时间：2013-04-04T16:58:01.597
> 
> 标签：android, onclicklistener

我目前正在为一个介绍性的 android 应用程序开发课程做我的最后一个项目。我的最终项目将是一个音乐播放器，您可以在其中单击一个按钮，它会在某种乐器上播放某个音符。我想不出的一件事是当用户按住按钮时重复播放声音文件的方法。我了解 OnClickListener 的工作原理，但是是否有一个用于按住我缺少的按钮的按钮？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:00:05.743

您需要使用触摸侦听器，而不是单击侦听器，因为后者，顾名思义，用于单击，单击是一次受限事件，而触摸则不是。

请参阅`onTouch()`和一般文档：http: [//developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T17:01:25.330

查看*OnLongClickListener*：http: [//developer.android.com/reference/android/view/View.OnLongClickListener.html](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T17:00:32.747

请改用[OnTouchListener](https://developer.android.com/reference/android/view/View.OnTouchListener.html)或[SimpleOnGestureListener](https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)。这两个侦听器都会区分用户何时按下屏幕并抬起手指。

# c# - 我的查询是返回而不是表值

> ID：15817253
> 
> 赞同：0
> 
> 时间：2013-04-04T16:58:08.893
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我有财务合规和合规表。在我的查询工作流程下方是获取最新的一行。问题是我在表中有空值，因为我删除了表中的所有行。但是我的下面的查询返回一个旧行。

```
var Compliance = (from c in datamodel.Compliances
                              join f in datamodel.FinancialCompliances on c.ComplianceId equals f.ComplianceId
                              where (c.VerifierId == userId || c.OwnerId == userId || c.UserId == userId) && (f.ComplianceId == c.ComplianceId)
                              orderby (f.AddedDate)
                              select f);

            financialCompliance = Compliance.ToList().LastOrDefault(); 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:11:48.163

也许 lastordefalt 正在发送默认值。您能否确认您在返回的对象中确实有真实数据？我怀疑会是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:16:31.637

您的代码的一个明显问题是您在 LastOrDefault() 之前调用了 ToList()。这将导致您的代码将存储中的所有数据加载到您的应用程序和上下文中，然后从结果中检索最后一个对象。我怀疑这可能会导致一些问题。

尝试跳过您的 .ToList() 并直接调用 LastOrDefault() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:32:55.413

听起来您可能正在删除数据模型实例中的对象，但没有保存更改并重置数据模型，因此即使旧记录不在数据库中，它们仍会保留在上下文中。为了安全起见，请尝试为此查询使用新的上下文。

此外，您可能需要考虑修改查询以对结果进行降序排序，然后选择最上面的结果，而不是按升序排序并只取最后一个：

```
var Compliance = (from c in datamodel.Compliances
                  join f in datamodel.FinancialCompliances on c.ComplianceId equals f.ComplianceId
                  where (c.VerifierId == userId || c.OwnerId == userId || c.UserId == userId) && (f.ComplianceId == c.ComplianceId)
                  orderby (f.AddedDate) descending
                  select f);

financialCompliance = Compliance.FirstOrDefault(); 
```

# javascript - Javascript 数学能力 real/irrational_number 库

> ID：15817258
> 
> 赞同：1
> 
> 时间：2013-04-04T16:58:21.707
> 
> 标签：javascript, jquery, math, numbers, counting

我在网上四处寻找，但找不到任何对我有帮助的东西。

我需要做数学：10^(1.7)，但 javascript 不允许这样做。有人可以有某种代码或知道一些可以帮助我的库吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:01:57.020

除非我感到困惑：

```
Math.pow(10,1.7) 
```

会做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:02:14.910

如果您想获得实数`base`的幂次幂`exponent`：

```
Math.pow(base, exponent); 
```

有了你拥有的价值观

```
Math.pow(10, 1.7); 
```

有关文档，请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/pow](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/pow)

# c++ - push_back vs emplace_back 与 volatile

> ID：15817259
> 
> 赞同：4
> 
> 时间：2013-04-04T16:58:22.260
> 
> 标签：c++

以下代码失败`push_back`并成功`emplace_back`：

```
#include <vector>
volatile int x = 0;
int main()
{        
    std::vector<int> vec;
    vec.emplace_back(x);
    vec.push_back(x); // error: no matching function for call to 'std::vector<int>::push_back(volatile int&)'
} 
```

我理解这是失败的，因为它需要一个引用并试图从该引用中隐式地`push_back`抛弃限定符。`volatile`

但是，`emplace_back` *也*需要一个引用（右值引用是引用）。为什么要区别对待？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:02:27.513

这是因为它们在 C++11 标准中是如何定义的。第 23.3.6.1 段指定了他们的签名：

```
template <class... Args> void emplace_back(Args&&... args);
void push_back(const T& x);
void push_back(T&& x); 
```

虽然可用重载的参数`push_back()`没有任何`volatile`限定，但`emplace_back()`函数模板的参数可以绑定到具有任何- 限定的`cv`左值。

> 但是， emplace_back 也需要一个引用（右值引用是引用）。为什么要区别对待？

是的，因为`emplace_back()`是一个函数*模板*，并且类型推导将推断`Args`为长度为 1 的参数包，其唯一元素具有类型`int volatile&`（参见第 14.8.2.1/3 段）。

`push_back()`另一方面，的重载是`std::vector<>`类模板的常规成员函数，调用它们时不会进行类型推导。由于对 non- 的引用`volatile`不能绑定到限定为的对象`volatile`（参见第 8.5.3/4-5 段），编译器将无法解析调用。

# c# - 在 C# 中流式传输图像时出现“工件”

> ID：15817262
> 
> 赞同：0
> 
> 时间：2013-04-04T16:58:30.350
> 
> 标签：c#, image, stream, artifacts

我想创建一个通过网络传输多个图像的项目。我只是想从小的功能性代码开始，但对我来说已经遇到了一个时髦的问题。图像已收到，但它包含图形错误，例如它的一部分。

可悲的是无法显示图像导致低信誉，这里是链接。 [http://img543.imageshack.us/img543/1508/buggedy.jpg](http://img543.imageshack.us/img543/1508/buggedy.jpg)

当然，百万美元的答案。^^

```
TcpListener listener;
TcpClient client;
TcpClient datatoclient;
NetworkStream stream; 
```

主机部分：

```
listener = new TcpListener(5000);
listener.Start();
datatoclient = listener.AcceptTcpClient();
NetworkStream nowystream = datatoclient.GetStream();

MemoryStream ms = new MemoryStream();
byte[] image = File.ReadAllBytes("default.jpg");

switch (trackBar1.Value)
{
      case 0:
          image = File.ReadAllBytes("mirrion.jpg");
          break;
      case 1:
          image = File.ReadAllBytes("tenis.jpg");
          break;
      case 2:
          image = File.ReadAllBytes("marisasold.jpg");
          break;
}

// get the image size in bytes
int numberOfBytes = image.Length;

// put the size into an array
byte[] numberOfBytesArray = BitConverter.GetBytes(numberOfBytes);

// send the image size 
nowystream.Write(numberOfBytesArray, 0, numberOfBytesArray.Length);

// send the image 
nowystream.Write(image, 0, numberOfBytes); 
```

客户端部分：

```
client = new TcpClient("127.0.0.1", 5000);
stream = client.GetStream();

byte[] data = new byte[4];
// read the size
stream.Read(data, 0, data.Length);
int size = BitConverter.ToInt32(data, 0);
label1.Text = size.ToString();

// prepare buffer
data = new byte[size];

// load image
stream.Read(data, 0, data.Length);

// save image to file for test
File.WriteAllBytes("received.jpg", data);

MemoryStream MS = new MemoryStream(data);

pictureBox1.Image = Image.FromStream(MS); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:07:49.567

`stream.Read`不保证它会读取`data.Length`字节。相反，它返回读取的字节数。所以你应该检查它的返回值并继续阅读，直到你得到所有的字节。

请参阅[http://msdn.microsoft.com/en-us/library/system.io.stream.read](http://msdn.microsoft.com/en-us/library/system.io.stream.read(v=vs.90).aspx) (v=vs.90).aspx（部分`Return Value`）

Thr 读取方法可以是这样的

```
void Read(Stream stream, byte[] buffer,int offset,int len)
{
    int read = 0;
    while (read < len)
    {
        read += stream.Read(buffer, offset + read, len-read);
    }
} 
```

# java - 我应该如何做图像动画？

> ID：15817266
> 
> 赞同：4
> 
> 时间：2013-04-04T16:58:45.350
> 
> 标签：java, animation, io, bufferedimage

我计划制作一个动画角色（角色的图像多次更改以使其看起来在移动），我想知道最好的方法。我目前正计划做这样的事情：

```
String fileLocation = "./images/picture";
BufferedImage img;
int numImages = 10;

for(int i = 0; i < numImages; i++){
    img = ImageIO.read(new File(fileLocation + i + ".png"));
    Thread.sleep(100);
    g.drawImage(img, 0, 0, null);
} 
```

这是一个非常简化的版本，缺少一些东西，但我相信你明白我的意思。这样做有什么问题吗？（注意：for循环完成后会直接重复，“images”文件夹中会有名为“picture0.png”、“picture1.png”等的文件）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:02:55.590

如果图像不是很大并且不需要大量内存来存储它们，我宁愿先读取图像并缓存它们。当需要显示它们时，我会从内存而不是磁盘中读取它们。

# xaml - winrt textblock 运行绑定设计时

> ID：15817268
> 
> 赞同：2
> 
> 时间：2013-04-04T16:58:52.117
> 
> 标签：xaml, binding, windows-runtime

我在设计时的数据上下文

```
d:DataContext="{d:DesignInstance Type=viewmodel:MainViewModel, IsDesignTimeCreatable=True}"
....
<TextBlock Text="{Binding Path=Driver}"> 
```

工作正常。只有在：

```
<TextBlock/>
    <Run Text="{Binding Path=Jahr}" />
</TextBlock> 
```

不能在设计时工作，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T09:30:09.553

**注意：**可以**绑定**到 a`<Run />`但它不会在设计时呈现，只有运行时。

这对绑定很有用。

```
 <TextBlock>
        <Run Text="{Binding Results.Count}" />
        <Run Text=" results for '" />
        <Run Text="{Binding SearchTerm}" />
        <Run Text="'"/>
    </TextBlock> 
```

但是，您不能设置`TextBlock`Text *AND* a `Run`Binding 。它是一个或另一个，这工作正常，但不像你说的那样在设计时渲染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T22:06:13.487

运行确实支持 Windows 运行时中的绑定，但似乎那些运行控件不支持设计时数据...... :-(

# wxpython - wx.python 中显示端口监视器上的奇怪缩放

> ID：15817272
> 
> 赞同：0
> 
> 时间：2013-04-04T16:59:03.153
> 
> 标签：wxpython, wxwidgets

我一直在开发一个 wx.python 应用程序。在某些时候，我需要创建一个全屏，没有任务栏等。 wx.Frame 具有与屏幕完全相同的大小，并在其中显示一个与屏幕尺寸完全相同的 bimap，因此位图的一个像素正好等于一个屏幕的像素。
直到我插入 displayport 显示器时，一切都运行良好（在 dvi/vga/hdmi 显示器上）。wxwidgets 检测到显示器的分辨率低于实际分辨率，因此位图会从屏幕上消失。EDID 仍然检测到有效的分辨率，因此可以肯定与 wxwidgets 相关的问题。当我使用 wx.DisplaySize - 它返回的分辨率低于实际设置的分辨率。我还尝试根据 wx.DisplaySize() 输出创建位图，但正如预期的那样，当我尝试点亮一个像素时，它的邻居也发生了变化。（发生某种缩放）。插入投影仪时会出现类似问题。

你们中有人有类似的症状吗？如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:59:09.700

正确的 EDID 值并不一定意味着系统在该显示模式下运行它。您是否检查了系统的显示属性或屏幕分辨率属性以确保系统以全分辨率驱动显示器？在我看来，您的症状听起来像是在以较低的分辨率运行，并且显示器正在将其拉伸以填满全屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:16:57.970

所以我找到了问题的解决方案。这是因为当我插入不同的显示器时 - 由于某种原因 DPI 发生了变化。调整窗口显示控制面板中的设置就可以了。

# php - ie php 中的 Tinymce 错误

> ID：15817273
> 
> 赞同：0
> 
> 时间：2013-04-04T16:59:10.863
> 
> 标签：php

喜三

我在我的网站上使用 tinymce，但在 ie 中会出错。

```
function getHTML_TinyMCE(txtfield){

obj=document.getElementById('content_ifr');
if(obj.contentDocument){
    content=obj.contentDocument.body.innerHTML; //FireFox (getContent() messes up cursor position)
}else{
    content=tinyMCE.getContent(txtfield); //on this line error 
}
return content;
} 
```

请任何人建议

谢谢

# eclipse - ">配置>转换为 Maven 项目" 丢失

> ID：15817279
> 
> 赞同：2
> 
> 时间：2013-04-04T16:59:31.607
> 
> 标签：eclipse, maven, configure

">Configure>Convert to Maven project" is missing 不知道为什么要安装一些东西（我已经安装了m2eclipse）

# php - 重写 URL 时是否需要更改页面中的 URL

> ID：15817282
> 
> 赞同：1
> 
> 时间：2013-04-04T16:59:35.433
> 
> 标签：php, url-rewriting

我正在使用一个简单的规则来重写 URL

```
RewriteRule   home.htm   home.php 
```

我有一个当前 URL 所在的菜单

```
<a href="home.php">Home</a> 
```

那么我应该改变它`href`还是做错了什么？或者有一种方法可以自动更改页面中的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:02:29.567

您可以链接到 home.htm 或 home.php。无论哪种情况，您的 RewriteRule 都会加载 home.php。如果是我，我会链接到 home.php，因为那是正在加载的实际页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:02:40.827

你需要改变你的 ，`a href`因为你正在重写`php``html`

```
<a href="home.htm">Home</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T19:40:38.233

简单地说，这取决于你。或者，如果您网站的索引是`/home.htm`，当然，最好链接索引。例如，如果`/home.htm`改写成`/pages/home.htm`，最好链接`/home.htm`。我建议你链接你的`/home.htm`，因为如果你对它不感兴趣，你就不会重写它。你想要比别人`.htm`更好`.php`！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T19:48:27.080

如果你打算在你的页面中使用样式表和类似的东西，你必须绝对解决它们。只需在页面的开头定义一个常量`define('ABS_PATH', 'your website address')`，然后每当您想在您的网站中处理某些内容时，在 URL 的第一部分使用它：

例如

```
<link rel="stylesheet" type="text/css" href="<?php echo ABS_PATH; ?>/styles/style.css" /> 
```

我通常使用这个常量来处理所有内部链接，无论是简单链接还是样式。

# jquery - 追加新元素后jQuery函数不起作用

> ID：15817283
> 
> 赞同：0
> 
> 时间：2013-04-04T16:59:36.793
> 
> 标签：jquery, function

正如标题所指的那样，这个函数似乎不适用于添加在 document.ready 函数之后的 DOM 元素。

我添加了一个新`.window`元素，但这个函数仍然只处理`.window`加载脚本时创建的元素。

我如何使它也对附加元素做出反应？

```
$(function() {
    // Change this selector to find whatever your 'boxes' are
    var windows = $("div.window");

    // Set up click handlers for each box
    windows.mousedown(function() {

        var tz = parseInt($('#toolbar').css( "z-index" ), 10 );
        $('#toolbar').css( "z-index", tz +1 )

        var el = $(this), // The box that was clicked
            max = 0;

        // Find the highest z-index
        windows.each(function() {
            // Find the current z-index value
            var z = parseInt( $( this ).css( "z-index" ), 10 );
            // Keep either the current max, or the current z-index, whichever is higher
            max = Math.max( max, z );
        });

        // Set the box that was clicked to the highest z-index plus one
        el.css("z-index", max + 1 );
        orderWindows(el);
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:02:47.193

您将需要将委托与[.on()](http://api.jquery.com/on/)一起使用，以便能够让动态添加的元素对事件做出反应。就像是：

```
$("#someparentelement").on("mousedown", "div.window", function() {
    // your code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:04:44.453

使用 jQuery 的 on 方法：

```
$(function() {

    // Set up click handlers for each box
    $(document).on('mousedown', 'div.window',  (function() {

        var tz = parseInt($('#toolbar').css( "z-index" ), 10 );
        $('#toolbar').css( "z-index", tz +1 )

        var el = $(this), // The box that was clicked
            max = 0;

        // Find the highest z-index
        windows.each(function() {
            // Find the current z-index value
            var z = parseInt( $( this ).css( "z-index" ), 10 );
            // Keep either the current max, or the current z-index, whichever is higher
            max = Math.max( max, z );
        });

        // Set the box that was clicked to the highest z-index plus one
        el.css("z-index", max + 1 );
        orderWindows(el);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T21:13:46.673

代表团...是的...但是太多的行话...

**简单地说：** 您只在第一次加载 DOM 时添加了事件监听器。新元素没有附加事件监听器。

* * *

更新元素侦听器时的另一个重要想法是防止添加多个侦听器。你需要使用：

`$('div.window').off('<event>').on('<event>', function(){ ... });`

这将防止事件在旧元素上多次触发。

请记住 $() 返回一个 jQuery 对象列表。$('div.window') 返回它在 DOM 上找到的每个 div.window。因此它将为所有这些旧元素以及新创建的元素附加一个新的事件监听器。将它们关闭然后重新打开，可以很好地防止出现奇怪的功能。

使用 bind() unbind() 也是如此。

# ios - 未找到 Philips Hue SDK 架构 i386 的符号

> ID：15817284
> 
> 赞同：0
> 
> 时间：2013-04-04T16:59:46.763
> 
> 标签：ios, objective-c, sdk, philips-hue

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_PHAppDelegate", referenced from:
      objc-class-ref in main.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我所做的只是添加了 philips hue SDK，并将应用程序委托文件替换为 PHAppDelegate.h 和 .m。然后我更改了 main.m 以使用新的应用程序委托文件，当我构建时，我收到了这个错误。有什么见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:12:18.743

通读您的问题，您似乎已经生成了 appdelegate 文件，例如 SampleAppDelegate.h 和 SampleAppDelegate.m。然后，您从 iOS Hue SDK 的示例应用程序中复制了 PHAppDelegate.h 和 .m。您更改了 main.m 中的引用，但您没有做的是将新的 PHAppDelegate.m 添加到 XCode 中项目的构建阶段选项卡中的编译源阶段。

这将产生您描述的链接器错误。

关于 ahwulf 的回答，Hue iOS SDK 包含模拟器和 iOS 设备代码，所以没有问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T17:56:56.243

Phillips SDK 是否可以没有模拟器二进制文件，只有 ARM，所以它只能在设备上运行？

# xcode - class-dump-z 的问题“无法将 * 映射到内存中”

> ID：15817285
> 
> 赞同：3
> 
> 时间：2013-04-04T16:59:49.073
> 
> 标签：xcode, cydia, theos

我正在使用最新的可用的 class-dump-z。关注了这个视频：[https ://www.youtube.com/watch?v=HjFeYk_1HH4](https://www.youtube.com/watch?v=HjFeYk_1HH4)

```
iPhone-Pieter:~/dump root# cat class_info 
/*

An exception was thrown while analyzing '/Applications/Calculator.app/' (with sysroot '/'):

DataFile::DataFile(const char*):
    Fail to map "/Applications/Calculator.app/" into memory

*/ 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T09:04:10.497

您只能对 mach 二进制文件进行类转储。您指向包含二进制文件的文件夹。正确的代码是

> 类转储 -H /Applications/Calculator.app/Calculator

.app 只是一个包含实际二进制文件的容器。

# asp.net-mvc - MVC 4 授权控制器属性 Active Directory

> ID：15817293
> 
> 赞同：3
> 
> 时间：2013-04-04T17:00:21.703
> 
> 标签：asp.net-mvc, roleprovider, authorize, windows-authentication

我创建了默认的 MVC 4 Intranet 应用程序并将其配置为使用 Windows 身份验证，如下所示。我正在尝试针对 Active Directory 验证我的角色

```
<authentication mode="Windows" />
<authorization>
    <deny users="?" />
</authorization>
<roleManager defaultProvider="AspNetWindowsTokenRoleProvider" enabled="true">
</roleManager>
<identity impersonate="true"/> 
```

当我使用以下属性为用户装饰控制器时，它可以正常工作，因为它使用的是 Windows 身份验证

```
[Authorize(Users=@"domain\username")] 
```

当我尝试使用 Roles 的以下属性来装饰它时，它告诉我我没有被授权。我已经尝试指定角色的完整路径，例如`domain\ou container\ ou container\`etc 一直到特定的组，但它仍然不起作用。

即使我指定了 AspNetWindowsTokenRoleProvider，我也不确定它使用的是什么角色提供程序

```
[Authorize(Roles = @"domain\role")] 
```

我想我的问题归结为如何让它针对 AD 组进行身份验证。如果你能指出我正确的方向，我当然会很感激。如果这是重复的，我很抱歉，但我还没有找到适合我的答案。

# mysql - 将 CSV 导入 MySQL，列数少于目标表

> ID：15817295
> 
> 赞同：2
> 
> 时间：2013-04-04T17:00:25.870
> 
> 标签：mysql, mysql-workbench

有没有办法将列号不匹配的 CSV 导入 MySQL？

我有一个 MySQL“Employees”表，我们每个月用 CSV 文件更新一次。我在“员工”表中添加了两个与我们的需求相关的附加列。通过 MySQL Workbench 导入表数据，使用以下 SQL 语句：

```
LOAD DATA LOCAL INFILE 'EmployeeDump-March.csv' REPLACE INTO TABLE employees
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

我收到以下错误，这是绝对正确的......列号不匹配：

```
Error Code: 1261\. Row 1 doesn't contain data for all columns    7.426 sec 
```

这两个额外的字段具有默认值。

有没有办法抑制这个错误并让 MySQL 忽略最后两列，让它们独自一人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:15:45.810

您可以（并且应该！）显式命名要插入的列 using `LOAD DATA INFILE`，就像常规`INSERT`. 您还可以选择为作为`LOAD DATA INFILE`语句一部分添加的两个新列设置默认值。

像这样的东西。只需在括号之间以正确的顺序填写实际的列名，如果您不想要 NULL，则为新列设置实际的默认值和列名：

```
LOAD DATA LOCAL INFILE 'EmployeeDump-March.csv' REPLACE INTO TABLE employees
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
(old_column1, old_column2, ...)
set new_column1 = NULL,
  new_column2 = NULL 
```

# c++ - Code::Blocks、MinGW、libsdl 和 GNU C++ 编译器：未定义对 `WinMain@16 的引用

> ID：15817302
> 
> 赞同：0
> 
> 时间：2013-04-04T17:00:37.997
> 
> 标签：c++, mingw, codeblocks

我一直在尝试编译最基本的 SDL 应用程序，但无论我做什么，我都会不断收到此错误：

```
c:/program files (x86)/codeblocks/mingw/bin/../lib/gcc/mingw32/4.4.1/../../../libmingw32.a(main.o):main.c:(.text+0xd2): undefined reference to `WinMain@16' 
```

我为此搜索了解决方案，但它们都与 Visual C++ 或缺少的 main 有关。我没有使用 Visual C++，我已经定义了 main.

这是我的代码：

```
#include "SDL/SDL.h"

int main( int argc, char* args[] )
{
    //Start SDL
    SDL_Init( SDL_INIT_EVERYTHING );

    //Quit SDL
    SDL_Quit();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:25:11.257

不要使用“其他链接器选项”。使用“链接库”部分。添加以下项目。

```
mingw32
SDLmain
SDL 
```

您可以放入`-mwindows`“其他链接器选项”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T03:43:59.380

万一其他人遇到这个问题，我将 -lmingw32 放在-lSDLmain 和 -lSDL*之后*，这对我来说是这个问题。把 -lmingw32 首先修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T21:31:58.767

我在我想在 linux 和 windows 上编译的项目中遇到了同样的错误。我使用 makefile 来编译项目。一个对我有用的解决方案，虽然我承认它有点像把它添加到 main.cpp （无论你的主要功能在哪里）

```
extern "C" {

    int WinMain(int argc, char** argv)
    {
        return main(argc, argv);
    }
} 
```

这使得链接器找到 WinMain 并将其用作程序的入口点。我也希望这个解决方案不会破坏 linux 的可编译性，希望它被认为只是一个未使用的函数。

# c# - 为什么添加 Web 引用不使用 wsdl 中指定的架构 targetNamespace

> ID：15817305
> 
> 赞同：0
> 
> 时间：2013-04-04T17:00:49.183
> 
> 标签：c#, .net, vb.net, web-services, visual-studio

我有两组需要从 C# 调用的 web 服务。这两组 web 服务都来自同一个提供者，并且都共享一个 complexType，它存在于两个 wsdls 中。

这就是复杂类型 defn 的样子

```
<wsdl:types>
    <schema targetNamespace="http://abc.com/ws/myutil" xmlns="http://www.w3.org/2001/XMLSchema">
        <complexType name="mytype">
            <sequence>
                <element name .....
                <element name ....
                <element name .....
            </sequence>
        </complexType>
    </schema>
    .....
</wsdl:types> 
```

上述复杂类型存在于两个 wsdls 中，并且类型 mytype 的 targetNamespace 在两个 wsdls 中是相同的。

这不会导致任何问题`java`。我`Axis`用于生成存根，`class`类型 mytype 写在一个目录中`com\abc\ws\myutil`，它被放入`package` `com.abc.ws.myutil`wsdl 中的 targetNamespace 属性所指定的 a 中。

因此，如果我只想从第一个 wsdl 调用 web 服务，我在第一个 wsdl 上运行轴并生成类，然后创建 jar。

如果我只想从第二个 wsdl 调用 web 服务，我在第二个 wsdl 上运行轴并生成类，然后创建 jar。

如果我想从两个 wsdl 调用 web 服务，我首先在第一个 wsdl 上运行轴，然后在第二个 wsdl 上运行，然后创建 jar。

在第二个 wsdl 上运行 Axis 会覆盖在 com\abc\ws\myutil 中生成的 mytype.java 类文件。但这并不重要，因为从第一个 wsdl 为 mytype.java 生成的类文件与从第二个 wsdl 生成的类文件相同。我创建的组合 jar 仅包含一个 mytype 并且它可以与来自两个 wsdls 的 web 服务一起使用。

但是，这种相同的情况给我在 C# 中带来了问题。我为第一个 wsdl URL 添加了一个 webreference，它将生成的类放在第一个命名空间中，然后当我为第二个 wsdl URL 添加一个 webreference 时，它​​将生成的类放在第二个命名空间中。

***所以我最终在 2 个命名空间中有 2 个 mytype 类。***

所以我的问题是为什么不`Add Webreference`使用`targetNamespace`wsdl中指定的？有没有办法让我做到这一点，这样我就只有一个 mytype 类？

ASP.NET VB 程序也有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:52:55.287

如果使用命令行工具`wsdl.exe`，可以使用`/shareTypes`开关：

> /sharetypes
> 
> 打开类型共享功能。此功能为不同服务之间共享的相同类型创建一个具有单一类型定义的代码文件（命名空间、名称和线路签名必须相同）。使用 http:// URL 作为命令行参数引用服务或为本地文件创建一个 discomap 文档。

# parallel-processing - 尝试进行简单的赋值时内核崩溃

> ID：15817309
> 
> 赞同：0
> 
> 时间：2013-04-04T17:01:13.223
> 
> 标签：parallel-processing, cuda

我正在学习 CUDA，但仍处于初级水平。我正在尝试一个简单的任务，但是当我运行它时我的代码崩溃了，我不知道为什么。任何帮助，将不胜感激。

**编辑：**`cudaMemcpy`在结构上和`Image`结构上崩溃`pixelVal`，类型为`int**`. 是这个原因吗？

原始 C++ 代码：

```
void Image::reflectImage(bool flag, Image& oldImage)
/*Reflects the Image based on users input*/
{
    int rows = oldImage.N;
    int cols = oldImage.M;
    Image tempImage(oldImage);

    for(int i = 0; i < rows; i++)
    {
        for(int j = 0; j < cols; j++)
        tempImage.pixelVal[rows - (i + 1)][j] = oldImage.pixelVal[i][j];
    }
    oldImage = tempImage;
} 
```

我的 CUDA 内核和代码：

```
#define NTPB 512
__global__ void fliph(int* a, int* b, int r, int c)
{
    int i = blockIdx.x * blockDim.x + threadIdx.x;
    int j = blockIdx.y * blockDim.y + threadIdx.y;

    if (i >= r || j >= c)
        return;
    a[(r - i * c) + j] = b[i * c + j];
}
void Image::reflectImage(bool flag, Image& oldImage)
/*Reflects the Image based on users input*/
{
    int rows = oldImage.N;
    int cols = oldImage.M;
    Image tempImage(oldImage);
    if(flag == true) //horizontal reflection
    {
     //Allocate device memory
     int* dpixels;
     int* oldPixels;
     int n = rows * cols;
     cudaMalloc((void**)&dpixels, n * sizeof(int));
     cudaMalloc((void**)&oldPixels, n * sizeof(int));
     cudaMemcpy(dpixels, tempImage.pixelVal, n * sizeof(int), cudaMemcpyHostToDevice);
     cudaMemcpy(oldPixels, oldImage.pixelVal, n * sizeof(int), cudaMemcpyHostToDevice);
     int nblks = (n + NTPB - 1) / NTPB;
     fliph<<<nblks, NTPB>>>(dpixels, oldPixels, rows, cols);
     cudaMemcpy(tempImage.pixelVal, dpixels, n * sizeof(int), cudaMemcpyDeviceToHost);
     cudaFree(dpixels);
     cudaFree(oldPixels);
    }
    oldImage = tempImage;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:03:42.183

您必须创建 2D 网格才能使用 2D 索引处理图像`i`和`j`. 在当前情况下，内核只处理图像的第一行。

要创建 2D 索引机制，请创建一个 2D 块和 2D 网格，如下所示：

```
const int BLOCK_DIM = 16;

dim3 Block(BLOCK_DIM,BLOCK_DIM);

dim3 Grid;
Grid.x = (cols + Block.x - 1)/Block.x;
Grid.y = (rows + Block.y - 1)/Block.y;

fliph<<<Grid, Block>>>(dpixels, oldPixels, rows, cols); 
```

# php - PHP header() 的问题，重定向到父目录中的 HTML 页面

> ID：15817310
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:01:13.207
> 
> 标签：php, html

**已解决，我错过了添加文件夹路径。最近重组了我的服务器，从而给我带来了问题。**

当我尝试重定向到父目录中的 HTML 页面时，PHP 中的 header() 出现问题。我试图在论坛中找到一些答案，但没有成功。

我试过同时使用 ../above.html 和完整地址[http://www.test.com/above.html](http://www.test.com/above.html)都没有成功。还有一点要提的是，我发送了带有隐藏输入的 redirrURL，但我已经检查过我得到了正确的地址。

这就是我的代码现在的样子，但我不断收到 404：

```
$redirrURL = $_POST['pageType'];
header( "Location: $redirrURL" ); 
```

这是我调用使用 header() 的 PHP 文件的地方；

```
<form method="post" action="rateBarFunction.php">
            <td>
                <input type="hidden" name="pageType" value="<? echo $redirrURL ?>" />
                <select name="grade">
                    <option value="" style="display:none;"></option>
                    <option value="5">5</option>
                    <option value="4">4</option>
                    <option value="3">3</option>
                    <option value="2">2</option>
                    <option value="1">1</option>
                </select>
                <input type="submit" name="submit"/>
            </td>
        </form>
<?php 
    echo "</tr>";
}
echo "</table>";
?> 
```

是否因为我在使用 header() 后回显 HTML 代码而不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:03:04.850

```
 <input type="hidden" name="pageType" value="<? echo $redirrURL ?>" />
                                 ^^^^^^^^^^^^^^^ 
```

所以你需要使用

```
$_POST['pageType']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:28:58.310

不，由于 header()/echoing，您没有收到此错误。那应该没问题。

但是你想要做什么？在表单中，您有操作“ratebarFunction.php”。这就是将要执行的操作，除非您在 onSubmit - 事件期间通过 JavaScript 替换该操作。如果您在此表单上收到 404，那么是否没有有效的 URL 'ratebarFunction.php'。

您可以轻松测试 404。只需转到您页面的源代码并通过单击打开字段值中的 URL。当它出现时，它会起作用。如果不是，则语法不正确。最简单的解决方法是在任何浏览器中创建正确的 URL 并将其放入字段值中。

'../x.php' 是一种文件方法。它与 URL 的工作方式不同，在 PHP 中，您可以使用 $_SERVER['DOCUMENT_ROOT'] 更轻松地解决它。我建议您始终使用绝对 URL，因为当您决定将 php 文件放在另一个目录中时，它们不会失败。超全局 $_SERVER 等将帮助您。

# azure - 从 Visual Studio 2012 发布 Azure 云服务（Web 角色）失败，出现空引用异常

> ID：15817311
> 
> 赞同：0
> 
> 时间：2013-04-04T17:01:19.173
> 
> 标签：azure, visual-studio-2012, publish

从 Visual Studio 2012 发布 Azure 云服务（Web 角色）失败，出现空引用异常。我在输出窗口得到以下日志：

下午 12:44:26 - 为 xxx 准备部署 - 2013 年 4 月 4 日下午 12:43:22，订阅 ID 为“xxx”，使用服务管理 URL“ [https://management.core.windows.net/](https://management.core.windows.net/) ”... 12:44:26 PM - 正在连接... 12:44:27 PM - 对象引用未设置为对象的实例。12:44:27 PM - 部署失败并出现致命错误

事实：1\. 使用 SSL 证书 2\. 本地 iis 安装并启动 3\. web.config 中没有定义标签 4\. 在 manage.windowsazure.com 手动部署工作正常

请告知，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:22:12.073

确保在进行部署之前将 SSL 证书上传到 Azure 管理员门户。上周我遇到了这个确切的问题，这就是问题所在。

# javascript - 如何使用任何方法根据屏幕宽度调整 div 的大小

> ID：15817313
> 
> 赞同：0
> 
> 时间：2013-04-04T17:01:28.437
> 
> 标签：javascript, css, html, resize

我正在寻找有关如何使用浏览器窗口的大小动态更改 div 大小的建议。我尝试过使用 css 并且无法使用它，因为我不能使用百分比值。我需要 div 的大小为 (windowSize - 100)/3。任何建议都会非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:19:09.683

CSS有一个叫做`calc()`可以做到这一点的东西：

[http://jsfiddle.net/YFFcD/1/](http://jsfiddle.net/YFFcD/1/)

```
div {
    width: calc((100% - 100px) / 3);
} 
```

唯一真正的限制是 IE8 或更早版本或 Opera 不支持它。 [http://caniuse.com/#feat=calc](http://caniuse.com/#feat=calc)

但是，可以通过利用其他属性来解决此问题。如果填充导致问题，请使用`box-sizing: border-box`（必要的前缀）。如果元素必须全部出现在同一行中，`display: table-cell`可能会有一些用处：

[http://jsfiddle.net/YFFcD/2/](http://jsfiddle.net/YFFcD/2/)

```
div.container {
    display: table;
    width: 100%;
}

div.container div {
    display: table-cell;
}

<div class="container">
    <div>a</div>
    <div>b</div>
    <div>c</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:06:12.657

您可以得到`window.innerHeight`and ，进行计算，然后明确`window.innerWidth`设置 s 的宽度和高度：`div`

```
$("#mydiv").css("width", (window.innerWidth - 100)/3);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:18:35.973

你可以用css来实现。当然，在某个价格上，div 不会有块行为和其他一些依赖于布局的情况。

jsfiddle：[**示例**](http://jsfiddle.net/hXzXT/)

**HTML 示例：**

```
<body>
    <div class="minus100">
        <div>One third</div>
    </div>
</body> 
```

**CSS：**

```
div.minus100 {
    position:fixed;
    /* or absolute; */
    top:0;
    left:50px;
    right:50px;
    bottom:0;
    background-color:blue;
}

div.minus100 div:first-child{ 
    width:33.3%;
    height:100%;
    color:#fff;
    background-color:navy;
} 
```

# lua - Corona SDK：仅在用户按“主页”时重新启动应用程序

> ID：15817314
> 
> 赞同：2
> 
> 时间：2013-04-04T17:01:28.790
> 
> 标签：lua, coronasdk, onpause

使用电晕 SDK，我希望每次用户点击主页按钮时都重新启动我的应用程序。如果他/她接到电话，拉下下拉菜单等，我希望应用程序继续保持其当前状态。

有什么建议么？

谢谢，/S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:19:38.307

我是怎么解决的！

```
suspendTime = 0
resumeTime = 0

function onSystemEvent( event )
    if event.type == "applicationSuspend" then
        suspendTime = os.time()
        print(suspendTime)
    elseif event.type == "applicationResume" then
        resumeTime = os.time()
        print(resumeTime)
        print("deltaTime: "..resumeTime - suspendTime )
            if(resumeTime - suspendTime > 30) then
            local sceneName = storyboard.getCurrentSceneName()
            if(sceneName ~= "levels.splash") then
                print(sceneName)
                print(resumeTime)
                        storyboard.gotoScene("levels.splash")
            end
        end
    end

end
Runtime:addEventListener("system", onSystemEvent) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:14:04.207

```
function onKeyEvent( event )
    local keyname = event.keyName;
    if (event.phase == "up" and (event.keyName=="back" or event.keyName=="menu" or event.keyName == "home" )) then
        if keyname == "menu" then
        os.exit()
    end
    end
    return false
end

Runtime:addEventListener( "key", onKeyEvent ) 
```

这个适用于android。我从[http://docs.coronalabs.com/api/event/key/keyName.html](http://docs.coronalabs.com/api/event/key/keyName.html)检查过，所以在 iPhone 中没有办法做到这一点。

但是你可以试试这个：获取应用程序暂停的时间。并将其保存到文档目录。然后当应用程序恢复时，检查两个会话之间的时间。如果有超过半小时，重新启动所有的东西。

# wordpress - Twitter url 永久链接损坏了 wordpress 帖子

> ID：15817316
> 
> 赞同：0
> 
> 时间：2013-04-04T17:01:31.893
> 
> 标签：wordpress, perl, url, twitter

该脚本非常适用于 costum twitter URL 缩短器，但由于某种原因，它刚刚开始放置损坏的链接。现在所有的链接都被破坏了，即使是以前的链接也很好。它显示在 twitter domain.com/p(somenumber) 上，并在浏览器中打开该 URL，而不是重定向到帖子。我想问题出在这个 Perl 代码中，它在 twitter 上自动发布 wordpress 帖子。

```
#!/usr/bin/perl -s

use strict;

use Data::Dumper;
use XML::Simple;

use Net::Twitter;
use Scalar::Util 'blessed';
use WWW::Facebook::API;
use JSON::Any;

use lib '/var/www/perl/.';

use MyLib::DB;
use MyLib::Settings;

my $settings = new Settings();
my $config = $settings->getConfig();

my $db = new DB(
                    dsn         =>$config->{sql_connection}->{dsn},
                    database    =>$config->{sql_connection}->{database},
                    server      =>$config->{sql_connection}->{server},
                    login       =>$config->{sql_connection}->{login},
                    password    =>$config->{sql_connection}->{password}
);

my %posts = $db->getList('select * from add_ready_post where wp_id > ( select max(wp_id) from add_ready_post where is_sent=1 ) and post_title <> "" limit 1;');

my $nt = Net::Twitter->new(legacy => 0);
my $nt = Net::Twitter->new(
    traits   => [qw/OAuth API::REST/],
    consumer_key        => '',
    consumer_secret     => '',
    access_token        => '',
    access_token_secret => '',
);

map {
    my $message = $posts{$_}[4];
    my $id = $posts{$_}[0];
    my $url = ' domain.com/p' . $posts{$_}[1];
    if ( $message ne '' )
    {
#       print 'Original: ' . $message . "\n";
        if ( length( $message ) < 110 )
        {
            $message = $message . ".";
        }
        if ( length( $message ) > 110 )
        {
            $message = substr( $message, 0, 110 );
            $message =~ /.*(\s\w+)$/i;
            my $newMessage = substr( $message, 0, index( $message, $1 ) );
            $message = $newMessage . '...';
        }

#       print 'Result  : ' . $message . $url . "\n";

        my $result = $nt->update( $message . $url );
#       print Dumper( $result );

#       print "\n";

        my $sql = "UPDATE add_ready_post SET is_sent=1 WHERE id=" . int( $id ) . ";";
        $db->execute( $sql );

    }
} keys %posts; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:58:50.600

您可能会以“不是一个真正的问题”而结束 - 但无论如何 - 很少有评论：

不知道你的“做什么” `MyLib::DB;`，所以在不知道包含`%posts`哈希的内容的情况下无法分析代码。

使用`use warnings;`- 例如，您将收到`$nt redefined`消息...

```
 my $nt = Net::Twitter->new(legacy => 0);
 my $nt = Net::Twitter->new( 
```

以`map {`这种方式使用不是最佳实践。使用它会很容易阅读

```
foreach my $post (keys %posts) {
} 
```

当消息在这里不匹配时你会得到什么？如果索引返回 -1 怎么办？

```
$message =~ /.*(\s\w+)$/i;
my $newMessage = substr( $message, 0, index( $message, $1 ) ); 
```

什么时候消息将只包含空格？想一想：

```
if ( $message ne '' ) 
```

这里还有更多......我比你学习 perl 更了解，但尝试将问题分解为可管理的部分并提出一个真正的问题。

# php - 如何在 cakePHP 中返回表单验证

> ID：15817319
> 
> 赞同：0
> 
> 时间：2013-04-04T17:01:40.010
> 
> 标签：php, validation, cakephp, web

我需要返回表单验证，因为我在提交后丢失了它

我在 News/view/30 ---查看报告详细信息---在该页面中，我们添加了评论表单：

```
 <h2>Add comment</h2>
        <?php
        echo $this->Form->create("Comment", array(
                    'url' => array('controller' => 'Comments', 'action' => 'add')
                ));
        echo $this->Form->label("name");
        echo $this->Form->input("name", array("label" => false, "class" => "textfield"));
        echo $this->Form->label("email");
        echo $this->Form->input("email", array("label" => false, "class" => "textfield"));
        echo $this->Form->label("text");
        echo $this->Form->textarea("text", array("label" => false));
        echo $this->Form->input("object_id", array("type" => "hidden", "value" => $data['News']['id']));
        echo $this->Form->input("type", array("type" => "hidden", "value" => "news"));
        echo $this->Html->Link("Add Comment", "#", array("class" => "add_button", "onclick" => "$('#CommentViewForm').submit()"));
        echo $this->Form->end();
        ?> 
```

表单在评论控制器上提交：

在评论/添加：

```
 $isSuccess = $this->Comment->save($this->request->data);
        if ($isSuccess) {
            $this->Session->setFlash('your Comments has been added successfully and pending admin aproval.thanks ', 'default', array(), 'good');
        } else {
            $this->Session->setFlash('Failed to add your comment: <br/>Fill all the required fileds <br/>type correct Email', 'default', array(), 'bad');
        }
         $this->redirect(array("controller" => "News", "action" => "view", $id)); 
```

当用户输入有错误返回添加评论表单但没有像往常一样显示错误时，我对姓名、电子邮件和评论本身做了一些验证规则

我希望你能很好地理解我，我等待你的帮助非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:40:43.407

我认为您需要在 News 控制器的视图操作中处理 form->save ，然后正如其他人所说，如果验证失败，请不要从页面重定向。

如果您重定向，您仍会至少看到一次验证消息（来自会话 Flash），但您将丢失填写的表单数据。

最简单的解决方案是将保存移动到您的 News->view 方法，如果您的 News 和 Comment 模型相关联，只需使用可用的遍历将 Comment 保存在那里：

```
$isSuccess = $this->News->Comment->save($this->request->data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:17:03.170

您的重定向不会阻止您看到验证错误吗？即使有错误，您也将用户重定向到新页面（查看页面），因此他们永远不会看到任何验证错误消息。

尝试注释掉这一行：

```
//$this->redirect(array("controller" => "News", "action" => "view", $id)); 
```

或以 $isSuccess 为真为条件。

**更新** 回复：您的评论 - 问题是，如果您在打开表单的情况下从页面重定向，您将无法（轻松）向您显示验证错误消息。最简单的事情是让您的表单提交给它自己的动作 - 通过它的声音，您将它提交给另一个控制器中的动作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:31:47.320

just try to add `'error'=>true` to each input form helper like `echo $this->Form->input("name", array("label" => false, "class" => "textfield", 'error'=>true));`

See if this work .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T19:16:11.520

如果您没有长时间使用 CakePHP，您应该先烘焙一些代码。然后你会知道如果表单没有验证你不应该重定向：

```
if ($this->Comment->save($this->request->data)) {
    $this->Session->setFlash('your Comments has been added successfully and pending admin aproval.thanks ', 'default', array(), 'good');
    $this->redirect(array("controller" => "News", "action" => "view", $id));
} else {
    $this->Session->setFlash('Failed to add your comment: <br/>Fill all the required fileds <br/>type correct Email', 'default', array(), 'bad');
    // DO NOT redirect
} 
```

烘焙模板将以这种方式烘焙您的控制器代码。这断言了一种处理表单的干净和透明的方式。

# javascript - jsTree检查重命名时是否存在新名称

> ID：15817322
> 
> 赞同：1
> 
> 时间：2013-04-04T17:02:01.413
> 
> 标签：javascript, jquery, jstree

我试图允许用户使用 jsTree 将样本与它们来自的位置链接起来。用户可以拖动样本并将它们放置在正确的位置。位置是根节点，而样本是子节点。用户还可以创建新位置，然后重命名任何不存在的位置。到目前为止，这一切都有效。

我想检查重命名事件以确保新名称是唯一的。它可以与其中一个样本相同，但不能与另一个位置节点相同。我尝试使用搜索功能，但似乎所有这些都是触发另一个事件，您必须将函数绑定到该事件，而不是返回已找到节点的节点/ID。

如何检查重命名事件中是否存在带有 new_name 的根节点，如果存在则取消重命名？

# loops - Lua循环知道循环何时结束

> ID：15817325
> 
> 赞同：1
> 
> 时间：2013-04-04T17:02:10.697
> 
> 标签：loops, lua

Lua 中是否有一条语句可以让我确定它是否是最后一个循环周期？当我无法确定将循环多少时间循环时？

例子：

```
for _, v in pairs(t) do
if I_know_this_is_your_last_cycle then
-- do something
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T18:52:58.160

这是missingno答案的简化版本：:-)

```
for _, v in pairs(t) do
  if next(t,_) == nil then
    -- do something in last cycle
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:34:06.393

一般来说，没有。正如您从[Lua 文档](http://www.lua.org/manual/5.2/manual.html#3.3.5)中看到的那样，for 循环是迭代器顶部的 while 循环的语法糖，因此它只知道循环是否在循环开始时结束。

如果您真的想检查您是否正在进入最后一次迭代，那么我只需使用 while 循环显式地编写代码即可。

```
local curr_val = initial_value
while curr_val ~= nil then
    local next_val = get_next(initial_value)
    if next_val ~= nil then
       --last iteration
    else
       --not last iteration
    end
    curr_val = next_val
end 
```

如果你想用`pairs`函数翻译例子，你可以使用[下一个](http://www.lua.org/manual/5.2/manual.html#pdf-next)函数作为迭代器。

* * *

顺便说一句，我建议在编写这样的循环之前三思而后行。它的编码方式意味着很容易编写在迭代 0 或 1 个元素时无法正常工作的代码，或者编写无法正确处理最后一个元素的代码。大多数时候编写一个普通的循环并将“在末尾”的代码放在循环*之后*更合理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T18:47:21.440

你可能会尝试写这样的东西：

```
 --count how many elements you have in the table
    local element_cnt = 0
    for k,v in pairs(t) do
      element_cnt = element_cnt + 1
    end

    local current_item = 1
    for k,v in pairs(t)
       if current_item == element_count then
         print  "this is the last element"
       end
       current_item = current_item + 1
    end 
```

或这个：

```
local last_key = nil
for k,v in pairs(t) do
   last_key = k
end

for k,v in pairs(t) do
  if k == last_key then
--this is the last element
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:40:50.433

有几种方法可以做到这一点。最简单的方法是使用标准 for 循环并自己检查，如下所示：

```
local t = {5, nil, 'asdf', {'a'}, nil, 99}
for i=1, #t do
    if i == #t then
        -- this is the last item.
    end
end 
```

或者，您可以为表格滚动您自己的迭代器函数，告诉您何时在最后一项上，如下所示：

```
function notifyPairs(t)
    local lastItem = false
    local i = 0
    return
      function()
        i = i + 1
        if i == #t then lastItem = true end;
        if (i <= #t) then
            return lastItem, t[i]
        end
      end
end

for IsLastItem, value in notifyPairs(t) do
    if IsLastItem then 
        -- do something with the last item
    end
end 
```

# iphone - 有没有办法在 iOS 上使用 STOMP

> ID：15817326
> 
> 赞同：8
> 
> 时间：2013-04-04T17:02:13.073
> 
> 标签：iphone, ios, stomp

我在网上到处搜索，并没有真正得到任何地方。我正在尝试连接到 STOMP 服务器以访问某些[数据源](http://www.networkrail.co.uk/WorkArea/DownloadAsset.aspx?id=30064782140)。我找到了一些[Objective C 包装器](https://github.com/juretta/objc-stomp)，但文档不存在，并且 ARC 之前的代码生成了足够多的警报，让我的脑袋爆炸了。

我对这个领域相当陌生，非常感谢正确方向的一点。是否有一些 iOS API 可以处理这个问题？或者其他人是否知道一些可以完成这项工作的 ARC 代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-29T20:36:47.130

如果你正在寻找一个在套接字上工作的库，objc-stomp 库仍然是无 ARC，但有一些分支是 ARC：

*   [https://github.com/lludo/objc-stomp](https://github.com/lludo/objc-stomp)来自 Ludovic Landry
*   [https://github.com/hstrowd/objc-stomp](https://github.com/hstrowd/objc-stomp)来自 Harrison Strowd

如果您正在寻找一个可以在 websockets 上工作的工具，我已经完成了一个可以在 websockets [https://github.com/nmaletm/objc-stomp](https://github.com/nmaletm/objc-stomp)上工作的库的分支（但目前不是 ARC）。

但请记住，如果问题是 ARC 与非 ARC，您可以为某些执行此操作的文件禁用它[https://stackoverflow.com/a/6658549/2412686](https://stackoverflow.com/a/6658549/2412686)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T17:36:12.660

有一个新的 STOMP Kit 实现了 ARC 和块。在这里-> [STOMPKit](https://github.com/mobile-web-messaging/StompKit/)

使用起来很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-21T22:33:58.137

我也将 StompKit 移植到 iOS 的 websocket 上。如果您已经有一个可以通过 websocket 处理 STOMP 的服务器，您可以为您的 iOS 客户端重用它：[WebsocketStompKit](https://github.com/rguldener/WebsocketStompKit)

# google-chrome - 禁用chrome下载多个文件确认

> ID：15817328
> 
> 赞同：18
> 
> 时间：2013-04-04T17:02:20.540
> 
> 标签：google-chrome, google-chrome-extension, watir, watir-webdriver, selenium-chromedriver

我用 ruby​​ watir-webdriver 开发了一个爬虫，可以从页面下载一些文件。我的问题是，当我单击下载第二个文件时，Chrome 会在顶部打开一个栏，要求确认我正在从该网站下载多个文件。

一旦被 webdriver 使用，我无法确认下载。有没有办法避免这种确认？我在想是否有任何配置可以避免它，或者是否有扩展来执行此操作，或者即使我可以单击 webdriver 的确认。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-04-24T08:59:22.730

我正在使用 Chrome 49，其他解决方案都不适合我。经过一番研究，我找到了一个可行的解决方案：

```
ChromeDriver createChromeDriverWithDownloadFolder(String folder) {
    Map<String, Object> chromePrefs = new HashMap<String, Object>();
    chromePrefs.put("profile.default_content_settings.popups", 0);
    chromePrefs.put("download.default_directory", folder);
    chromePrefs.put("profile.content_settings.exceptions.automatic_downloads.*.setting", 1 );
    chromePrefs.put("download.prompt_for_download", false);

    ChromeOptions options = new ChromeOptions();
    options.setExperimentalOption("prefs", chromePrefs);
    DesiredCapabilities cap = DesiredCapabilities.chrome();
    cap.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);
    cap.setCapability(ChromeOptions.CAPABILITY, options);
    return new ChromeDriver(cap);
} 
```

这些设置似乎在不断变化。因此，这是我为我的设置找到正确解决方案的方法：

1.  打开 Chrome 并转到 chrome://version/ 以查找您的个人资料的路径
2.  在*Default/Preferences*中有一个名为*Preferences*的 json 文件。打开它并搜索*automatic_downloads*。就我而言，文件的有趣部分如下所示：

    ...“profile”：{“avatar_bubble_tutorial_shown”：1，“avatar_index”：0，“content_settings”：{“clear_on_exit_migrated”：true，“exceptions”：{“app_banner”：{}，“auto_select_certificate”：{}， "automatic_downloads": { "[ *.]localhost:63342,* ": { "setting": 1 },...

3.  从中我可以得出正确的设置是`chromePrefs.put("profile.content_settings.exceptions.automatic_downloads.*.setting", 1 );`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-02-14T22:29:15.630

**从 Chrome 56.0.2924.87, February 17, 2017 开始**，您需要设置的**唯一**首选项（但是您为 webdriver 设置它们）是：

```
'profile.default_content_setting_values.automatic_downloads': 1 
```

给出更新的答案，因为这里的大多数答案都使用过时的偏好或显示其他不必要的偏好。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-15T15:13:14.537

对于新的 chrome（版本 46 或更高版本），此选项已更改，现在您的哈希必须如下所示：

```
prefs = {
    'profile' => {
        'default_content_settings' => {'multiple-automatic-downloads' => 1}, #for chrome version olde ~42
        'default_content_setting_values' => {'automatic_downloads' => 1}, #for chrome newer 46
    }
}

browser = Watir::Browser.new :chrome, options: {prefs: prefs, args: ['--test-type', '--disable-infobars'} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-19T12:16:47.213

这是Java的解决方案 - Selenium 实现

我们很难解决这个问题，因为我们想为在单个下载链接上下载 PDF 集的功能添加自动化测试。

```
Map<String, Object> prefs = new HashMap<String, Object>();
//To Turns off multiple download warning
prefs.put("profile.default_content_settings.popups", 0);
prefs.put( "profile.content_settings.pattern_pairs.*.multiple-automatic-downloads", 1 );
//Turns off download prompt
prefs.put("download.prompt_for_download", false);
ChromeOptions options = new ChromeOptions();
options.setExperimentalOptions("prefs", prefs);
driver =  new ChromeDriver(options); 
```

希望这对某人有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-05T13:24:09.017

似乎对于旧版和新版 chromedriver 版本的解决方案有所不同，这增加了混乱。

**铬驱动程序**

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['download.prompt_for_download'] = false
profile['download.default_directory'] = download_directory

b = Watir::Browser.new :chrome, :profile => profile 
```

**chromedriver2**

```
prefs = {
      'profile' => {
          'default_content_settings' => {'multiple-automatic-downloads' => 1},
      }
  }

b = Watir::Browser.new :chrome, :prefs => prefs 
```

今天大多数人可能都在使用**chromedriver2**版本，这是一个应该可以正常工作的解决方案。它在我的*watir*脚本中运行良好，因为我没有收到以下消息：“*该站点正在尝试下载多个文件。你想允许这个吗？* ”不再。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-27T16:43:25.970

Java解决方案：

```
cap = DesiredCapabilities.chrome();
ChromeOptions options = new ChromeOptions();
Map<String, Object> prefs = new HashMap<>();
Map<String, Object> content_setting = new HashMap <>();

content_setting.put("multiple-automatic-downloads",1);

prefs.put("download.prompt_for_download", "false");
prefs.put("profile.default_content_settings", content_setting);

options.setExperimentalOption("prefs", prefs);
cap.setCapability(ChromeOptions.CAPABILITY, options); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-25T14:22:24.720

这对我有用：

```
HashMap<String, Object> chromePrefs = new HashMap<String, Object>();
chromePrefs.put("profile.default_content_settings.popups", 0);
chromePrefs.put("profile.default_content_setting_values.automatic_downloads", 1);
chromePrefs.put("download.prompt_for_download", false);
ChromeOptions options = new ChromeOptions();
options.setExperimentalOption("prefs", chromePrefs);
DesiredCapabilities cap = DesiredCapabilities.chrome();
cap.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);
cap.setCapability(ChromeOptions.CAPABILITY, options); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-20T05:47:42.830

此错误/增强功能已在以下 URL 的 chromedriver 页面中提出： [http ://code.google.com/p/chromedriver/issues/detail?id=130](http://code.google.com/p/chromedriver/issues/detail?id=130)

错误/增强状态：尚未解决。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-26T19:04:47.710

我试图在页面加载客户端使用标记来做到这一点。

```
<META HTTP-EQUIV="Content-Disposition" CONTENT="inline" /> 
```

它似乎有效（此时它正在工作，以压倒一切）。

但是时间会证明一切（可能对未来的 CHROME 没有影响，你知道我的意思）。

有几个网站上发布的可用标题字段列表，我觉得它们非常有用。希望它也能帮助你。

[https://www.w3.org/Protocols/HTTP/Issues/content-disposition.txt](https://www.w3.org/Protocols/HTTP/Issues/content-disposition.txt) [https://www.iana.org/assignments/cont-disp/cont-disp.xhtml#cont-disp-2](https://www.iana.org/assignments/cont-disp/cont-disp.xhtml#cont-disp-2)

# php - Jquery标签，如何重定向？

> ID：15817334
> 
> 赞同：0
> 
> 时间：2013-04-04T17:02:37.900
> 
> 标签：php, jquery

你好所有的程序员，我有一个关于 jQuery 选项卡的问题。我正在使用 jQuery 在选项卡之间导航，jQuery 代码如下所示：

```
$(document).ready(function() {

//Default Action
$(".tab-content").hide(); //Hide all content
$("ul.vertical-tab li:first").addClass("active").show(); //Activate first tab
$(".tab-content:first").show(); //Show first tab content

//On Click Event
$("ul.vertical-tab li").click(function() {
    $("ul.vertical-tab li").removeClass("active"); //Remove any "active" class
    $(this).addClass("active"); //Add "active" class to selected tab
    $(".tab-content").hide(); //Hide all tab content
    var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
    $(activeTab).fadeIn(); //Fade in the active content
    return false;
});

}); 
```

第一个选项卡始终是默认选项，因此当我在第二个选项卡上工作并将数据提交到外部 php 脚本时，重定向总是在第一个选项卡（默认选项卡）上返回我。我的重定向看起来像这样：***header('Location: [http://www.administrator.php](http://www.administrator.php) ');***

```
$con=mysqli_connect("localhost","root","","database");
$firstname=$_POST['firstname'];
$lastname=$_POST['lastname'];

$sql="INSERT INTO student (firstname,lastname) VALUES('$firstname','$lastname')";

if (!mysqli_query($con,$sql))
   {
   die('Error: ' . mysqli_error());
   }
header('Location:http://www.administrator.php');
mysqli_close($con); 
```

因此，因为我使用 jQuery，所以我无法使用地址将自己重定向到所需的选项卡。帮助 ：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:07:29.410

您可以进行基于哈希的查找，例如：

`link: http://www.administrator.php/#secondtab`

```
$firsttab = window.location.hash ? 
    $(window.location.hash) : 
    $("ul.vertical-tab li:first");
$.firsttab.addClass('active').show(); 
```

然后你只需要你的标签的ID来匹配（例如`id="secondtab"`）

# c# - 针对 C# 中的 DTD 文件的 linq to xml 验证

> ID：15817336
> 
> 赞同：0
> 
> 时间：2013-04-04T17:02:40.800
> 
> 标签：c#, linq

我有一个 xml 文件

我正在使用 linq to xml 来解析这个 xml。我在 linq to xml 中搜索了 xml 的验证，我得到的大多数示例都是针对 xsd 文件的验证。

谁能告诉我如何使用 linq to xml 对 DTD 文件进行验证。

谢谢。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:40:44.400

从[XDocumentType](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocumenttype.aspx)的文档中：

> LINQ to XML 不会根据 DTD 验证文档，但如果需要，您可以使用验证[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)来执行 DTD 验证。

所以听起来你需要`XmlReader`在尝试使用 Linq to XML 读取之前使用验证 XML

# android - 在字符串中查找电话号码

> ID：15817340
> 
> 赞同：1
> 
> 时间：2013-04-04T17:02:48.263
> 
> 标签：android, string, replace, phone-number

我在字符串中查找电话号码时遇到问题。

我有功能：

```
 public void getPhoneNumber()
    {
        Pattern intsOnly = Pattern.compile("\\d+");
        Matcher makeMatch = intsOnly.matcher(number);
        makeMatch.find();
        String result = makeMatch.group();
        Log.i("Pattern", result);       
    } 
```

但我有不好的结果。

我的字符串：

```
String number = "String string s. s. str. 23-232 12 23 adsdsa" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:30:49.577

您的号码是否始终采用 23-232 12 23 格式？如果是这样，您可以尝试以下方法。

试试下面

```
 String s="String  string s. s. str. 23-232 12 23 adsdsa";
    Pattern p = Pattern.compile("[0-9]{2}[-][0-9]{3}[ ][0-9]{2}[ ][0-9]{2} ");
    // match 2 numbers followed by -,
    // match 3 numbers followed by space.
    // match 2 numbers followed by space.
    // match 2 numbers followed by space. 
    Matcher m = p.matcher(s); 
    if(m.find()) {
    System.out.println("............"+m.group(0));
    } 
```

编辑：

```
 Pattern p = Pattern.compile("(\\([0-9]{2}\\)|[0-9]{2})[ ][0-9]{3}[ ][0-9]{2,2}[ ][0-9]{2} "); 
```

使用 or 运算符匹配 (23) 或 23

您还可以使用替换方法删除圆括号

```
String s="String  string s. s. str. (23) 232 32 34  11111adsds0000000000000000a0";
String r = s.replace("(","");  
String r2= r.replace(")", "");
System.out.println(r2);
//String  string s. s. str. 23 232 32 34  11111adsds0000000000000000a0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:14:14.570

尝试在这里使用正则表达式，类似的问题：[链接](https://stackoverflow.com/questions/6883579/java-regular-expression-removing-everything-but-numbers-from-string)

```
String value = string.replaceAll("[^0-9]",""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:57:57.203

我写了这个：

这解决了我的问题:)

```
public String getPhoneNumber()
    {
        char[] temp = numer.toCharArray();
        String value="";
        int licz=0;

        for(int i=0;i<temp.length;i++)
        {
            if(licz<9)
            {
                if(Character.toString(temp[i]).matches("[0-9]"))
                {
                    value+=Character.toString(temp[i]);
                    licznik++;
                }
                else if(Character.toString(temp[i]).matches("\u0020|\\-|\\(|\\)"))
                {

                }
                else
                {
                    value="";
                    licz=0;
                }
            }
        }

        if(value.length()!=9) 
        {
            value=null;
        }
        else
        {
            value="tel:"+value.trim();
        }

        return value;
    } 
```

# c# - 如何自定义 CultureInfo 的默认日历？

> ID：15817348
> 
> 赞同：7
> 
> 时间：2013-04-04T17:03:22.367
> 
> 标签：c#, asp.net, .net, calendar

我想将日历自定义为波斯语，但在将 CultureInfo 设置为这样之后：

```
CultureInfo fa = new CultureInfo("fa-IR",true);
Thread.CurrentThread.CurrentCulture = fa; 
```

![日历](https://i.stack.imgur.com/7awu2.png)

月份和日期的名称没有改变，因此决定覆盖默认日历。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T05:52:58.827

覆盖像我这样的初学者：

```
public class PersianCulture : CultureInfo
{

    private readonly System.Globalization.Calendar cal;

    private readonly System.Globalization.Calendar[] optionals;

    public PersianCulture()

        : this("fa-IR", true)
    {

    }
    public PersianCulture(string cultureName, bool useUserOverride)

        : base(cultureName, useUserOverride)
    {
        cal = base.OptionalCalendars[0];
        var optionalCalendars = new List<System.Globalization.Calendar>();
        optionalCalendars.AddRange(base.OptionalCalendars);
        optionalCalendars.Insert(0, new PersianCalendar());
        Type formatType = typeof(DateTimeFormatInfo);
        Type calendarType = typeof(System.Globalization.Calendar);
        PropertyInfo idProperty = calendarType.GetProperty("ID", BindingFlags.Instance | BindingFlags.NonPublic);
        FieldInfo optionalCalendarfield = formatType.GetField("optionalCalendars",BindingFlags.Instance | BindingFlags.NonPublic);
        var newOptionalCalendarIDs = new Int32[optionalCalendars.Count];

        for (int i = 0; i < newOptionalCalendarIDs.Length; i++)

            newOptionalCalendarIDs[i] = (Int32)idProperty.GetValue(optionalCalendars[i], null);
        optionalCalendarfield.SetValue(DateTimeFormat, newOptionalCalendarIDs);

        optionals = optionalCalendars.ToArray();

        cal = optionals[0];

        DateTimeFormat.Calendar = optionals[0];
        DateTimeFormat.MonthNames = new[] { "فروردین", "اردیبهشت", "خرداد", "تیر", "مرداد", "شهریور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند", "" };

        DateTimeFormat.MonthGenitiveNames = new[] { "فروردین", "اردیبهشت", "خرداد", "تیر", "مرداد", "شهریور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند", "" };

        DateTimeFormat.AbbreviatedMonthNames = new[] { "فروردین", "اردیبهشت", "خرداد", "تیر", "مرداد", "شهریور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند", "" };

        DateTimeFormat.AbbreviatedMonthGenitiveNames = new[] { "فروردین", "اردیبهشت", "خرداد", "تیر", "مرداد", "شهریور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند", "" };

        DateTimeFormat.AbbreviatedDayNames = new string[] { "ی", "د", "س", "چ", "پ", "ج", "ش" };

        DateTimeFormat.ShortestDayNames = new string[] { "ی", "د", "س", "چ", "پ", "ج", "ش" };

        DateTimeFormat.DayNames = new string[] { "یکشنبه", "دوشنبه", "ﺳﻪشنبه", "چهارشنبه", "پنجشنبه", "جمعه", "شنبه" };
        DateTimeFormat.AMDesignator = "ق.ظ";
        DateTimeFormat.PMDesignator = "ب.ظ";

    }
    public override System.Globalization.Calendar Calendar
    {

        get { return cal; }

    }
    public override System.Globalization.Calendar[] OptionalCalendars
    {

        get { return optionals; }

    }
} 
```

然后在`Page_Load`：

```
PersianCulture fa = new PersianCulture();

Thread.CurrentThread.CurrentCulture = fa; 
```

[在这里](http://barnamenevis.org/showthread.php?281309-%D8%AA%D9%82%D9%88%DB%8C%D9%85-%D8%B4%D9%85%D8%B3%DB%8C-%28Persian-Calendar%29-%D8%AF%D8%B1-%D9%88%DB%8C%DA%98%D9%88%D8%A7%D9%84-%D8%A7%D8%B3%D8%AA%D9%88%D8%AF%DB%8C%D9%88-2010-%28vs-2010-visual-studio-2010%29)形成

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T17:06:32.513

您可以创建`CultureInfo`. 它的属性不是只读的，您可以分配给它..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T17:36:00.673

您可以在呈现控件之前设置线程的 CultureInfo，并在呈现控件后恢复。

输出 ：

![在此处输入图像描述](https://i.stack.imgur.com/ArVJR.png)

下面的示例展示了如何使用不同的 CultureInfo 呈现两个不同的日历。

默认.aspx

```
<%@Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Import Namespace="System.Globalization" %>
<%@ Import Namespace="System.Threading" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <% Thread.CurrentThread.CurrentCulture = new CultureInfo("fa-IR");%>

        <asp:Calendar ID="Calendar1" runat="server">
        </asp:Calendar>
        <%
            Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
        %>
        <asp:Calendar ID="Calendar2" runat="server"></asp:Calendar>

    </div>
    </form>
</body>
</html> 
```

默认.aspx.cs

```
using System;
using System.Threading;
using System.Globalization;
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

# printing - 在 Common Lisp 中打印前 N 个素数

> ID：15817350
> 
> 赞同：1
> 
> 时间：2013-04-04T17:03:30.430
> 
> 标签：printing, numbers, lisp, primes, clisp

我正在制作一个 Common Lisp 函数来打印前 N 个素数。到目前为止，我已经设法编写了这段代码：

```
;globals 
(setf isprime 1) ;if 1 then its a prime, 0 if not.
(setf from 1)    ;start from 1
(setf count 0)   ;should act as counter to check if we have already 
                 ;    N primes printed

;function so far.
(defun prime-numbers (to)
  (if (> count to) nil(progn
      (is-prime from from)
      (if (= isprime 1) (print from)(setf count (+ count 1)))
      (setf isprime 1)
      (setf from (+ from 1))
      (prime-numbers to)))
  (if (>= count to)(setf count 0) (setf from 1)))  

;code to check if a number is prime    
(defun is-prime(num val)
  (if (< num 3) nil 
    (progn
      (if (= (mod val (- num 1)) 0) (setf isprime 0))
      (is-prime (- num 1) val)))) 
```

我的问题是，它不能正确打印 N 个素数。如果我调用`>(prime-numbers 10)`，结果是： `1 2 3 5 7 11 13 17 19 1`，即它只正确打印了 9 个素数。

但是如果我打电话`>(prime-numbers 2)` 给结果是：`1 2 3 5 7 1`

我在这里做错了什么？这是我第一次用 LISP 编码。

更新：

```
 (defparameter from 1)
  (defparameter count 0)

  (defun prime-numbers (to)
     (if (> count to)nil
         (progn
            (when (is-prime from) 
                (print from)
                (setf count (+ count 1)))
            (setf from (+ from 1))
            (prime-numbers to)))
     (when (>= count to)
         (setf count 0) 
         (setf from 1)))  

  (defun is-prime (n)
    (cond ((= 2 n) t)
     ((= 3 n) t)
     ((evenp n) nil)
     (t 
       (loop for i from 3 to (isqrt n) by 2
             never (zerop (mod n i)))))) 
```

工作正常。但最后输出 NIL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T17:26:58.700

首先，这里根本不需要使用全局变量。

使用真/假返回值。这将允许您的`is-prime`功能类似于：

```
(defun is-prime (n)
  (cond ((= 2 n) t) ;; Hard-code "2 is a prime"
        ((= 3 n) t) ;; Hard-code "3 is a prime"
        ((evenp n) nil) ;; If we're looking at an even now, it's not a prime
        (t ;; If it is divisible by an odd number below its square root, it's not prime
           (loop for i from 3 to (isqrt n) by 2
                 never (zerop (mod n i)))))) 
```

这样，该函数不依赖于任何外部状态，也没有任何东西可以混淆任何东西。

其次，`1`您看到的最后一个（可能）是函数的返回值。

要检查这一点，请尝试： (progn (prime-numbers 10) nil)

第三，重新编写`prime-numbers`函数以不使用全局变量。

第四，永远不要使用 or 创建全局变量[，](http://www.lispworks.com/documentation/HyperSpec/Body/m_defpar.htm)使用[`setf`](http://www.lispworks.com/documentation/HyperSpec/Body/m_setf_.htm)or 。它也是（大多数情况下，但有些人不同意）在全局（实际上是“特殊”）变量上使用的好风格。[`setq`](http://www.lispworks.com/documentation/HyperSpec/Body/s_setq.htm)[`defvar``defparameter`](http://www.lispworks.com/documentation/HyperSpec/Body/m_defpar.htm)`*earmuffs*`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:04:08.720

要扩展 Vatines 的答案：

使用相同的算法但避免全局变量的可能重写`prime-numbers`函数是

```
(defun prime-numbers (num &optional (from 2))
   (cond ((<= num 0) nil)
         ((is-prime from) (cons from (prime-numbers (1- num) (1+ from))))
         (t (prime-numbers num (1+ from))))) 
```

此函数还返回素数而不是打印它们。

这个递归解决方案的问题是它为每个找到/测试的素数消耗堆栈。因此，对于较大的 num 值，堆栈空间可能会耗尽。

非递归变体是

```
(defun prime-numbers (num &optional (start 2))
   (loop for n upfrom start
         when (is-prime n)
         sum 1 into count
         and collect n
         until (>= count num))) 
```

# spss - 如何重复一个案例值，直到遇到不同的值？

> ID：15817351
> 
> 赞同：1
> 
> 时间：2013-04-04T17:03:34.893
> 
> 标签：spss

我目前有一个结构如下的数据文件：

```
 1  
   -  
   -  
   2  
   -  
   3  
   - 
```

我希望它看起来像这样：

```
 1  
   1  
   1  
   2  
   2  
   3  
   3 
```

不幸的是，我不知道如何在 SPSS 中实现这一点。是否有一个简单的命令可以以这种方式重新编码数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:28:29.690

通过使用 LAG 功能，我找到了答案。（我将 9999 定义为缺失值）。

> IF（变量 = 9999）变量=LAG（变量）。执行。

# ruby-on-rails - Rails 尝试使用为空的 collection_select 保存表单会为 nil:NilClass 提供未定义的方法“map”

> ID：15817352
> 
> 赞同：0
> 
> 时间：2013-04-04T17:03:35.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个从 collection_select 生成的带有下拉列表的表单。collection_select 从空白开始，然后当用户从日期字段中选择日期时，collection_select 将更新为所选日期的值。

如果提交的表单没有在我的下拉列表中选择值，我会尝试显示一个很好的错误消息。目前我收到此错误：`undefined method`map' for nil:NilClass`

我怎样才能做到这一点，如果用户没有在下拉列表中选择一个值，我可以向他们显示一个很好的错误消息？

看法

```
<%= form_for(@arrangement) do |f| %>

    <div class="control-group">
    <%= f.label :date, :class => 'control-label' %>
        <div class="controls">
            <%= f.text_field :date, :class => 'input-large datepicker' %>
        </div>
    </div>

    <div class="control-group">
        <%= f.label :timeslot, :class => 'control-label' %>
        <div class="controls">
            <%= collection_select(:arrangement, :timeslot_id, @available_timeslots, :id, :timeslot_spelled) %>
        </div>
    </div>

<% end %> 
```

控制器

```
# GET /arrangements/new
  # GET /arrangements/new.json
  def new
    date = Time.now.to_date.to_s(:db)
    @arrangement = Arrangement.new
    @available_timeslots = Timeslot.where("location_id = ? AND date(timeslot) = ? AND arrangement_id is null", current_user.user_details.location_id, date).order('timeslot ASC')

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @arrangement }
    end
  end

# POST /arrangements
  # POST /arrangements.json
  def create
    @arrangement = Arrangement.new(params[:arrangement])

    respond_to do |format|
      if @arrangement.save
        # update the timslot record with the arrangement id
        if @timeslot = Timeslot.update(@arrangement.timeslot_id, :arrangement_id => @arrangement.id)
            format.html { redirect_to @arrangement, notice: 'Arrangement was successfully created.' }
            format.json { render json: @arrangement, status: :created, location: @arrangement }
        else
            format.html { render action: "new" }
            format.json { render json: @arrangement.errors, status: :unprocessable_entity }
        end
      else
        format.html { render action: "new" }
        format.json { render json: @arrangement.errors, status: :unprocessable_entity }
      end
    end
  end 
```

给出的错误是指尝试保存表单时@available_timeslots 为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:46:36.920

`@available_timeslots`是零。确保使用一组可用时隙设置它以避免出现此错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:38:59.993

我会尝试这样的事情。

```
def new
  @available_timeslots = ...
  if @available_timeslots.count > 0
    flash.now[:error] = "nil errrraaarrr"
  end

  ...
end 
```

在视图中

```
<div class="controls">
  <%- if @available_timeslots.count > 0 %>
    <%= collection_select(:arrangement, :timeslot_id, @available_timeslots, :id, :timeslot_spelled) %>
  <% else %>
    <%= flash.now[:error] %>
  <% end %>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:59:32.387

诀窍是添加`@available_timeslots = []`else 子句

```
def create
    @arrangement = Arrangement.new(params[:arrangement])

    respond_to do |format|
      if @arrangement.save
        # update the timslot record with the arrangement id
        if @timeslot = Timeslot.update(@arrangement.timeslot_id, :arrangement_id => @arrangement.id)
            format.html { redirect_to @arrangement, notice: 'Arrangement was successfully created.' }
            format.json { render json: @arrangement, status: :created, location: @arrangement }
        else
            format.html { render action: "new" }
            format.json { render json: @arrangement.errors, status: :unprocessable_entity }
        end
      else

        format.html { render action: "new" }
        format.json { render json: @arrangement.errors, status: :unprocessable_entity }
      end
    end
  end 
```

# ruby-on-rails - 使用 Carrierwave 和嵌套表单重新上传图像

> ID：15817353
> 
> 赞同：1
> 
> 时间：2013-04-04T17:03:38.230
> 
> 标签：ruby-on-rails, ruby, carrierwave, nested-forms

我有一个设置，我有一个图像类，我有一个 ImageUploader。我将该类嵌入到其他几个不同的类中，并以嵌套形式将图像上传到它。

一切都很好，除了，一旦我上传了一张图片，我就不能再重新上传了。所以我不能按上传按钮，然后选择另一个图像，就像你通常可以使用载波一样。

**图像类：**

```
class Image
  # 1\. Include mongoid stuff
  include Mongoid::Document
  include Mongoid::Timestamps

  # 2\. Mount uploaders
  mount_uploader :image, ImageUploader

  # 3\. Define fields
  field :y, type: String, default: "Test"
  field :image
  field :remove_image

  # 4\. Set them accessible
  attr_accessible :y, :image, :image_url, :image_cache, :remove_image, :image_cover_url

  # 5\. Set associations
  embedded_in :imageable, polymorphic: true
end 
```

**文章类别：**

```
class Article
  # 1\. Include mongoid stuff
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Slug

  # 2\. Define fields 
  field :title, type: String
  field :lead, type: String
  field :main_text, type: String

  # 3\. Set attributes accesible
  attr_accessible :title, :lead, :main_text, :article_image_attributes

  # 4\. Set slug
  slug :title

  # 5\. Set associations
  belongs_to :issue
  embeds_one :article_image, :as => :imageable, :class_name => 'Image', cascade_callbacks: true

  # 6\. Accepting nested attributes
  accepts_nested_attributes_for :article_image, :allow_destroy => true

  # 7\. Set validations
  validates_presence_of :title, :lead, :main_text
  # validate :validate_minimum_article_image_size

  def validate_minimum_article_image_size
    geometry = self.article_image.geometry
    unless geometry.nil?
      width = geometry[0]
      height = geometry[1]

      unless (width >= 1536 && height >= 850)
        errors.add :base, "Article image should minimum be 1536px wide and 850px tall, but was "+width.to_s+"px wide and "+height.to_s+"px tall." 
      end
    end
  end
end 
```

**文章控制者：**

```
class ArticlesController < ApplicationController
  # 1\. Include helpers
  include ApplicationHelper
  include ArticlesHelper

  # 2\. Set before filters
  before_filter :authenticate_user!, :unless => :format_whitelist?, :except => [:show]
  before_filter :verify_user
  before_filter :set_objects
  before_filter :set_article

  # 3\. Set the responders
  respond_to :html

  # 4\. Define and set controllers
  def show
  end

  def new
    @article = @issue.articles.new
    @article.build_article_image
  end

  def edit
    @article.build_article_image unless @article.article_image.present?
  end

  def create
    @article = @issue.articles.new(params[:article])

    if @article.save
      redirect_to magazine_issue_path(@magazine, @issue), notice: 'Article was successfully created.'
    else
      render action: "new", alert: add_errors(@article)
    end
  end

  def update
    if @article.update_attributes(params[:article])
      redirect_to magazine_issue_path(@magazine, @issue), notice: 'Article was successfully updated.'
    else
      render action: "edit", alert: add_errors(@article)
    end
  end

  def destroy
    @article.destroy
    redirect_to :back, notice: 'Article was successfully deleted.'
  end
end 
```

**文章形式：**

```
= nested_form_for [@magazine, @issue, @article], :validate => true do |f|
  %div.center_big.input_area
    = f.text_field :title, :placeholder => "Title of Article"
    = f.text_area :lead, :placeholder => "Articles leading text", :class => "lead"
    = f.fields_for :article_image do |i| 
      %div.article_image_box.image_box
        = i.link_to_remove "Remove image", :class => "remove_image"
        %span.size.center_big.light.italic Min width and height is 1536px - 850px
        %div.article_image.image
          = image_tag(i.object.image_url) if i.object.image?
        %div.button.grey 
          Choose Article Image (optional)
          = i.file_field :image, :class => "button upload_button"  
          = i.hidden_field :image_cache
    = f.text_area :main_text, :placeholder => "Articles body text", :class => "redactorbox"
    %div= f.submit "Save Article", :disable_with => "Saving...", :class => "button" 
```

为什么图像类不只是“覆盖”旧图像并上传新图像，就像它应该做的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:11:58.850

在我的更新函数中，我必须指定我也想更新我的 article_image_attributes。

所以而不是：

```
if @article.update_attributes(params[:article]) 
```

我必须做：

```
if @article.update_attributes(params[:article]) && @article.article_image.update_attributes(params[:article][:article_image_attributes]) 
```

我无法在任何博客或教程上找到此信息，因此对于投票否决这个问题的人来说，如果您能帮助找到答案，那就太好了。我相信其他人也尝试过同样的问题。

**编辑：**

似乎我不是唯一一个遇到这个问题的人 - [https://github.com/jnicklas/carrierwave-mongoid/pull/64](https://github.com/jnicklas/carrierwave-mongoid/pull/64)。

# java - 在 Java 中使用泛型方法参数

> ID：15817359
> 
> 赞同：1
> 
> 时间：2013-04-04T17:04:03.703
> 
> 标签：java, generics

我第一次尝试在 java 中使用泛型方法。它不起作用，在我看来，Java 泛型根本不应该以这种方式使用——我需要实现一个通用接口而不是使用泛型方法。请确认（或否认）该结论。

这就是我想要做的：

```
public <T> void updateItem( T item ) {
  String itemKey = item.getKey();
  ... 
```

这给了我错误“类型 T 的方法 getKey() 未定义”。

研究为什么这不起作用，我看到类型擦除“如果类型参数是无界的，则用它们的边界或 Object 替换泛型类型中的所有类型参数”。

我可以“绑定”我的类型 T 的唯一方法是，如果我为我计划使用的所有类型创建一个公共子类或接口，并且如果我这样做，那么我可以使用多态性而不是泛型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:07:39.667

这是对的。`getKey()`类中没有定义方法`T`。但是，如果您将方法定义如下：

```
public <T extends Entry> void updateItem( T item ) {
  String itemKey = item.getKey(); 
```

编译器可以找到`getKey()`方法。请注意我使用的`<T extends Entry>`（我的意思是`java.util.Map.Entry`）。这个类有方法`getKey()`，编译器可以解决它。

# vba - 当每天通过基于日期的条件格式时如何自动更新？

> ID：15817361
> 
> 赞同：0
> 
> 时间：2013-04-04T17:04:04.717
> 
> 标签：vba, excel, highlighting, auto-update

我是编写 VBA 代码的新手，但在过去的几周里一直在努力奋斗。

我为工作表更改事件创建了一个代码，该事件突出显示特定窗口中输入的某些日期，如下所示：

```
Private Sub Worksheet_Change(ByVal Target As Range) 
    Dim icolor As Integer 
    Dim cell As Range 
    If Intersect(Target, Range("C3:T65")) Is Nothing Then Exit Sub 
    For Each cell In Target 
        icolor = 0 
        Select Case cell 
        Case "": icolor = 2 
        Case Is <= Date + 30: icolor = 3 
        Case Is <= Date + 60: icolor = 6 
        Case Is > Date + 60: icolor = 2 
        End Select 
        If icolor <> 0 Then cell.Interior.ColorIndex = icolor 
    Next cell 
End Sub 
```

它完美无缺。但是，我需要电子表格基本上每天更新突出显示。IE：如果 Date + 61 今天没有突出显示，它将在明天突出显示，因为它适合作为 Date + 60 的窗口。我怀疑一个简单的“工作表更改事件”不能做到这一点（因为它需要用户输入）。

我尝试将其调整为工作表激活代码，以便在打开文档时可能更新突出显示（我试图避免打开工作簿，因为我将有多个工作表做不同的事情），但我无法让它工作. 关于我做错了什么的任何想法？还是有更好的方法来完成我想做的事情？

提前谢谢。

```
Private Sub Worksheet_Activate()
    Dim icolor As Integer
    Dim cell As Range

    If Intersect(Target, Range("C3:T65")) Is Nothing Then Exit Sub
    For Each cell In Target
        icolor = 0
        Select Case cell
            Case "": icolor = 2    
            Case Is <= Date + 30: icolor = 3
            Case Is <= Date + 60: icolor = 6
            Case Is > Date + 60: icolor = 2            
        End Select
        If icolor <> 0 Then cell.Interior.ColorIndex = icolor
    Next cell
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:16:51.277

没有`Target`传递给 Worksheet_activate 的参数，所以不能使用`Intersect()`测试。你只需要直接循环你的范围

```
For Each cell In Me.Range("C3:T65").Cells
    'check value
Next cell 
```

这里最好的方法是将 hiliting 逻辑拆分为一个单独的 Sub 并从您的事件处理程序中调用它：

编辑：添加 workbook_open

```
'in ThisWorkbook module
Private Sub Workbook_Open()
     Sheet1.CheckData Sheet1.Range("C3:T65")
End Sub

'in sheet code module
Private Sub Worksheet_Activate()
    CheckData Me.Range("C3:T65")
End Sub

Private Sub Worksheet_Change(ByVal Target As Range)
    CheckData Intersect(Target, Me.Range("C3:T65"))
End Sub

Sub CheckData(rng As Range)
    Dim icolor As Integer
    Dim cell As Range

    If rng Is Nothing Then Exit Sub

    For Each cell In rng.Cells
        icolor = 0
        Select Case cell
            Case "": icolor = 2
            Case Is <= Date + 30: icolor = 3
            Case Is <= Date + 60: icolor = 6
            Case Is > Date + 60: icolor = 2
        End Select
        If icolor <> 0 Then cell.Interior.ColorIndex = icolor
    Next cell
End Sub 
```

# android - Android App XML 中的上标和下标

> ID：15817365
> 
> 赞同：6
> 
> 时间：2013-04-04T17:04:09.510
> 
> 标签：android, xml, subscript, superscript

我正在从一个 XML 文件中解析数据，该文件中包含从字符映射中获得的下标和上标字符。像这样：

```
<value column="Back" null="false">H₂&lt;/value> 
```

但是当我在 Android 的 textview 上显示它时，它给了我这个“哈，”

如何解决此问题并在我的应用程序中正确显示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T10:25:09.287

我发现了如何

在 XML 文件中，代码应该是这样的：

`<value column="Back" null="false">H&lt;sub&gt;2&lt;/sub&gt;</value>`

这样parced的字符串值就`"H<sub>2</sub>"` 在java代码中：

```
TextView textview.setText(Html.fromHtml(YourString); 
```

并且对于上标使用“sup”而不是“sub”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-13T11:25:02.513

您可以将`<small>`标签与`<sub>`或`<sup>`标签一起使用来减小文本的大小。

例如：`<sup><small>your-string</small></sup>`

如果你仍然想减小文本的大小，你可以`<small>`像这样再次添加标签`<sup><small><small>your-string</small></small></sup>`

我正在使用 android studio，它非常适合我！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-05T06:16:29.190

我发现这个方法对我有用。

**字符串.xml**

```
<string name="your_string">H<sub>2</sub></string> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-26T14:19:13.660

您可以更轻松地更改它，只需在 @strings 或您想要`<sub>your-string-here</sub>`的下标或`<sup>your-string-here</sup>`. 下标字母（您的单词）仍然与您的文本大小相同。你需要减小它的大小。为此，请使用 ，其中数字表示您想要的文本的大小。

# java - 每个字符的分布

> ID：15817366
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:04:15.637
> 
> 标签：java, arrays, distribution

我试图为每个字符（A 到 Z 和 a 到 z）编写一个分配计数的方法。到目前为止我所拥有的是

```
public int[] getLetterDistribution() {
    int[] distribution = new int[26];               
    return distribution;
} 
```

我目前的尝试是：

```
public int[] getLetterDistribution() {
    int[] distribution = new int[26];

    for (int count = 0; count < distribution.length; count++) {
        String current = distribution[count];

        char[] letters = current.toCharArray();
        for (int count2 = 0; count2 < letters.length; count2++) { 
            char lett = letters[count2]; 
            if ( (lett >= 'A') & (lett <= 'Z') ) {
                    letterCount[lett - 'A']++;
            }
        }
    }
    for (char count = 'a'; count <= 'z'; count++) {
        System.out.print(count + ": " +
        letterCount[count - 'a'] +" ");
    }
    System.out.println();

    return distribution;
} 
```

但我不断收到错误。对于那些java高手来说，一个彻底的解释会很棒。有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:17:13.183

您的代码中有三个编译错误。一个在这里：

```
int[] distribution = new int[26];
String current = distribution[count]; 
```

由于*分布*是一个整数数组，因此您无法从中获取字符串。

这里还有另外两个错误：

```
letterCount[lett - 'A']++;
letterCount[count - 'a'] +" "); 
```

数组*letterCount*从未声明过，因此它实际上不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:13:36.903

Your biggest problem seems to be that you don't have a source for your strings that you're going to count the distribution of. Right now you're trying to get Strings from an array of ints.

```
String current = distribution[count]; 
```

You need to get the strings from somewhere else

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:12:25.123

如果您的发行版区分大小写，那么您将需要一个 int[52] 而不是 int[26]

# java - Getter/Setter 中的 HIbernate 加密和解密？

> ID：15817367
> 
> 赞同：1
> 
> 时间：2013-04-04T17:04:15.767
> 
> 标签：java, hibernate, groovy, grails-orm

问题是提供加密某些实体属性的能力。

由于实体是 groovy 类并在运行时生成，因此我在 setter 中合并了加密逻辑，在 getter 中合并了解密逻辑。但似乎休眠希望 Getter/Setter 是对称的。session.save() 调用 getter 在内部设置值，因此它总是将解密的版本保存到数据库中。

这是 Hibernate 的默认行为吗？有没有办法规避这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T08:14:01.240

您需要在这里使用 GORM 事件。在插入数据库之前进行加密

```
def beforeInsert() {
  if (encProperty != null) {
     encProperty = customEncrypt(encProperty)
  }
} 
```

从数据库读取后解密：

```
def afterLoad() {
  if (encProperty != null)
      encProperty = customDecrypt(encProperty ) 
```

}

利用`def beforeUpdate()`更新期间的加密。

参考： http: [//grails.org/doc/latest/guide/GORM.html#5.5.1%20Events%20and%20Auto%20Timestamping](http://grails.org/doc/latest/guide/GORM.html#5.5.1%20Events%20and%20Auto%20Timestamping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:49:34.040

每当您想在数据库中的内容和持久实体中的内容之间进行一些调整时，执行此操作的方法是使用[自定义用户类型](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom)。我已经将它用于确保保存的字符串用空格填充之类的事情。它比向 getter 和 setter 中添加代码的侵入性要小得多，并且您避免了由于 Hibernate 认为您已经进行了更改而导致的意外保存问题。

# perl - 为没有权限创建的用户请求跟踪器

> ID：15817369
> 
> 赞同：1
> 
> 时间：2013-04-04T17:04:19.923
> 
> 标签：perl, ubuntu, rt

我已将 request tracker4 配置为跨部门帮助台解决方案。当前设置是用户将使用 LDAP 登录 RT。登录后会自动创建帐户。但是，他们的帐户是在没有特权的情况下创建的。

为了解决这个问题，我不得不去工具->配置->选择然后输入用户的 DN 名称并单击添加，然后我必须选中“让这个用户被授予权限（特权）”框我也有尝试设置 Set($AutoCreate, Privileged); 但没有运气。

我查看了 sqlite 数据库中的用户帐户，并注意到当新用户登录时，它们确实是在数据库中创建的。但是没有特权。

```
709|tuser3|*NO-PASSWORD*|||||||tuser3|||||||tuser3||tuser3|||||||||||||1|2013-03-08 13:47:38|1|2013-03-08 13:47:38
791|Mayra|*NO-PASSWORD*||||Mayra@**************||Main Office|Mayra Hernandez|||||||Mayra||Mayra||**************|||||||||||1|2013-04-03 21:46:36|1|2013-04-03 21:46:36
797|sdrakeford|*NO-PASSWORD*||Autocreated when added as a watcher||sdrakeford@**************|||Sophia C. Drakeford|||||||sdrakeford||sdrakeford|||||||||||||1|2013-04-04 13:18:58|1|2013-04-04 13:18:58
827|Robert.Troy|*NO-PASSWORD*||||Robert.Troy@*******************||Main Office|Robert Troy|||||||Robert.Troy||Robert.Troy||***************|||||||||||1|2013-04-04 16:11:58|1|2013-04-04 16:11:59 
```

我错过了什么吗，因为通常这些事情很明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:24:38.257

该[`$AutoCreate`选项](http://bestpractical.com/rt/docs/latest/RT_Config.html#AutoCreate)采用 hashref，其中包含您要传递给 User Create 方法的所有默认选项。尝试类似：

```
Set($AutoCreate, {
    Privileged => 1
}); 
```

（顺便说一句，通常不建议在 sqlite 上运行生产实例。您可能需要考虑转换为 MySQL 或 Postgres。）

# java - 出现未知原因的运行时错误；引用 ObjectInputStream

> ID：15817371
> 
> 赞同：0
> 
> 时间：2013-04-04T17:04:21.910
> 
> 标签：java, oop, runtime-error

我正在尝试制作一个程序来存储我表示为条目的类的数组。此类存储基于命令、名称、编号和注释的用户输入。接收到条目后，将通过 ObjectInput/ObjectOutput 将其发送到文件，并存储以供以后使用。

有点像一个简单的联系人列表，可以定期调用和不时更新。

我遇到了一种奇怪的错误（见下文）。如果有人可以帮助我解决此错误，我将不胜感激。

代码：

```
 import java.io.*;
    import java.util.Scanner;

    public class phonebook {

    protected Entry[] entryList = new Entry[200];

    protected int length = 0;

    public void doList() {
        for (int i=0; i<length; i++) {
            System.out.print(entryList[i]);
        }
    }

    public void doAddEntry(Entry entry) throws Exception {
        if (length == 200) {
            throw new Exception("I'm full");
        }
        for (int i = 0; i<length; i++) {
            if (entryList[i].name.compareToIgnoreCase(entry.name) <0) {
                //?
            }
        }
    }

    public void doFind(String term) {
        // look for input in entryList's name fields
    }

    public void doSave() throws Exception {
        ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream("contacts.txt"));
        os.writeObject(entryList);
        os.close();
    }

    public void doLoad() throws Exception {
       ***ObjectInputStream oin = new ObjectInputStream(new FileInputStream("contacts.txt"));***
        entryList = (Entry[])oin.readObject();
        oin.close();
    }

    public static void main(String[] args) throws Exception {
    String line;
    String[] command;
    Scanner input;
    String delimeter;
    delimeter = " ";
    phonebook pbook;
    String cmd;
    String term;

    pbook = new phonebook();
    cmd= "";
    input=new Scanner (System.in);
    **pbook.doLoad();**
    System.out.println("Codes are entered as 1 to 8 characters");
    System.out.println("Use \"e\" for enter, \"f\" for find, \"l\" to list, and \"q\" to quit");
    System.out.println();

    do {
    System.out.print("Command: ");
    line = input.nextLine();
    command = line.split(delimeter);
    if (command[0].equalsIgnoreCase("e")) {
        Entry e = new Entry();
        e.name = command[0];
        System.out.print("Enter Number: ");
        e.number=input.nextLine();
        System.out.print("Enter Notes:  ");
        e.notes=input.nextLine();
        System.out.println("");
            pbook.doAddEntry(e);
        } else if (command[0].equalsIgnoreCase("f")) {
            term=command[0];
            pbook.doFind(term);
            } else if (command[0].equalsIgnoreCase("l")) {
                pbook.doList(); 
                } else if (command[0].equalsIgnoreCase("q")) {
                System.out.println("Exiting Program...");
                pbook.doSave();
                break;
                    } else { 
                        System.out.println("Invalid Command");
                        continue;
                    } 
    } while (true);
    }
    } 
```

班级：

```
 public class Entry implements java.io.Serializable {
    public String name;
    public String number;
    public String notes;    
} 
```

编译器错误消息（代码引用错误可以在上面的***之间找到）：

```
Exception in thread "main" java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(Unknown Source)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(Unknown Source)
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source)
    at phonebook.doLoad(phonebook.java:39)
    at phonebook.main(phonebook.java:57) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:21:24.380

在评论中，您确认这`contacts.txt`是空的。这就是`EOFException`被抛出的原因。[`ObjectOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)和使用一个非常具体的[`ObjectInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)协议和格式，其中包括一个序列化流标头，`ObjectInputStream`预计在构造时会出现。由于文件为空，它无法读取该标头，并且`EOFException`当它尝试读取文件末尾之外的内容时会抛出 an 。

使用`ObjectInputStream`. 因此，如果您需要它来处理空文件，那么您不应该使用`ObjectOutputStream`and `ObjectInputStream`，而是编写自己的文本（或二进制格式）文件。例如，使用 a[`BufferedWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html)和 a[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)和/或[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)。

或者，您需要准备好在`EOFException`您的`doLoad`方法中处理此问题并返回一个空数组或 null。

# php - 通过 exec() 获取 windows 打印机状态

> ID：15817378
> 
> 赞同：0
> 
> 时间：2013-04-04T17:04:50.653
> 
> 标签：php, windows, command-line, printing

有没有办法通过 PHP 中的 exec 函数返回打印机的状态？

我假设不是。我试过运行 print.exe 和 printui.exe，但它们总是只返回 0，因为它们是通过 rundll32.exe 访问的。

有没有办法通过 rundll.exe 访问 printui.exe？

# c - limit.h 中的 LONG_BIT

> ID：15817380
> 
> 赞同：3
> 
> 时间：2013-04-04T17:05:06.047
> 
> 标签：c

我正在为我的学习编写一个程序，因此我必须描述一些战争来获得某些数据类型的限制。当我写这个时：

```
#include <limits.h>
#include <stdio.h>

int main(void)
{
    printf("%d\n", CHAR_BIT);
    printf("%d\n", LONG_BIT);
    return 0;
} 
```

但它给了我以下错误：

```
a.c: In function ‘main’:
a.c:7:17: error: ‘LONG_BIT’ undeclared (first use in this function)
  printf("%d\n", LONG_BIT);
                 ^
a.c:7:17: note: each undeclared identifier is reported only once for each function it appears in 
```

甚至 gcc -E 给了我这个

```
int main(void)
{
 printf("%d\n", 8);
 printf("%d\n", LONG_BIT);
 return 0;
} 
```

但是limits.h中的grep并没有给我答案。但是 bits/xopen_lim.h 有这个声明，它应该包含在什么时候

```
__USE_XOPEN 
```

已声明，但即使手动声明也不会给我结果。

那么问题出在哪里？看一下手册页说有一个 LONG_BIT 宏，但 gcc 说没有。

gcc 版本 4.8.0 (GCC) 操作系统架构

[编辑] 对于那些说 LONG_BIT 不是 c 标准的人，输入

```
man 0 limits.h 
```

并搜索 LONG_BIT。**对我来说，数值限制**下有两个条目，因此我认为 LONG_BIT 存在。不，包括 bits/xopen_lim.h 不是一个真正的选项，因为它应该包含在 limits.h 中，而不是手动包含

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:10:48.813

`LONG_BIT`不是**标准**C中的东西。

对于便携式方法，只需执行以下操作：

```
CHAR_BIT * sizeof(long) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:24:02.697

您的问题是您不应该定义`__USE_XOPEN`. 如果您看一下，[`/usr/include/features.h`](https://sourceware.org/git/?p=glibc.git;f=include/features.h;hb=glibc-2.30#l42)您会看到它显式地取消定义它，然后根据功能测试宏重新定义这些宏。您可能想要定义`_XOPEN_SOURCE`，例如：

```
gcc -D_XOPEN_SOURCE=700 -o longbit longbit.c 
```

来自`features.h`：

> _XOPEN_SOURCE 包括 POSIX 和 XPG 的东西。如果需要 Single Unix 一致性，则设置为 500，第六版设置为 600，第七版设置为 700。
> _XOPEN_SOURCE_EXTENDED XPG 事物和 X/Open Unix 扩展。

另外，直接写包括`xopen_lim.h`：

```
/*
 * Never include this file directly; use <limits.h> instead.
 */ 
```

所以，我不建议直接包含它。另请参阅[`man feature_test_macros`](http://man7.org/linux/man-pages/man7/feature_test_macros.7.html)或[`info '(libc)Feature Test Macros'`](http://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:13:32.660

[http://www.cplusplus.com/reference/climits/](http://www.cplusplus.com/reference/climits/)

没有这样`LONG_BIT`的东西`limits.h`

# javascript - 扁平化这个数组的简单方法？

> ID：15817389
> 
> 赞同：7
> 
> 时间：2013-04-04T17:05:45.150
> 
> 标签：javascript, jquery, underscore.js

我有这个数组：

```
[{name: 'email',value: 'a@b.com'}, {name: 'phone',value: '123-123-1234'}] 
```

我需要把它变成这样：

```
{email: 'a@b.com', phone: '123-123-1234'} 
```

我怎样才能做到这一点？我想我可以做一百万次迭代来完成这项工作，但我认为也许有一种更清洁的方法可以做到这一点。

如果有帮助，我正在使用 Underscore 和 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-24T16:09:42.323

[`Array.prototype.reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)对于这种类型的操作非常简洁：

```
var items = [{name: 'email',value: 'a@b.com'}, {name: 'phone',value: '123-123-1234'}]

var data = items.reduce(function (result, item) {
    result[item.name] = item.value;

    return result;
}, {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:11:51.587

有几种方法可以完成这项任务。

一种是使用[`Array.prototype.map`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/map)：

```
var arr = [{name: 'email',value: 'a@b.com'}, {name: 'phone',value: '123-123-1234'}];
var obj = {};
arr.map(function (item) {
   var key = item.name;
   var value = item.value;
   if (!obj[key]) {
      obj[key] = value;
   }
});
console.log(obj); 
```

如评论和其他答案中所述[`.reduce()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)，[`.forEach()`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)或者简单的 for 循环也可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:20:40.047

UnderscoreJS 非常棒，你可以使用`_.map`. 请看下面的代码：

```
var existingObject = [{name: 'email',value: 'a@b.com'}, {name: 'phone',value: '123-123-1234'}];
var selectedObject = _.map(existingObject, function(obj) {
    var retObj = { };
    retObj[obj["name"]] = obj["value"];
    return retObj;
});

console.log(selectedObject); 
```

# php - 如何为搜索词创建特定 URL

> ID：15817392
> 
> 赞同：-2
> 
> 时间：2013-04-04T17:05:52.350
> 
> 标签：php, html, .htaccess, mod-rewrite

我有一个简单的网站设置：两个 PHP 页面，第一个只是一个搜索框，第二个显示基于用户输入的搜索框的信息。我怎样才能让第二页有一个基于搜索的唯一 URL？像 website.com/query=query+goes+here 这样的东西，而不是所有的 URL 都是同一个 website.com/results.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:10:57.203

如果我正确理解了这个问题，那就很简单了。只需使用获取表单操作：

```
<form action="results.php">
Search: <input type="text" name="search"><br>
<input type="submit" value="Submit">
</form> 
```

然后通过对 results.php 的 $_GET 请求获取该变量：

```
<?php
$search_term = $_GET['search'];
//do SQL query or whatever else you need to do here
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:10:51.407

您可以使用 apache 的[htacess](https://my.bluehost.com/cgi/help/htaccess_redirect)和[modrewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)创建它。

编辑：

只需检查下面的链接以生成动态 URL。它可能会解决您的问题：

[网址生成](http://www.webconfs.com/url-rewriting-tool.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:18:24.773

你可以尝试这样的事情：

**.ht 访问：**

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    <IfModule mod_vhost_alias.c>
        RewriteBase /
    </IfModule>

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ results.php?query=$1 [L,QSA]
</IfModule> 
```

# unit-testing - 单元测试时如何从不提示运行最后一次成功的构建

> ID：15817393
> 
> 赞同：19
> 
> 时间：2013-04-04T17:05:52.790
> 
> 标签：unit-testing, visual-studio-2012

我想摆脱对话说

> 存在构建错误。您想继续并运行上次成功构建的测试吗

当我运行单元测试时（我使用`test -> run -> all tests`）。

我怎么做？我已经知道如何在运行普通项目时禁用它。

我也想知道这怎么可能成为一个有用的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-06T02:50:14.860

```
How do I do that? 
```

你不能。

```
I also want to know how this can ever be a useful feature? 
```

当我与正在配置测试数据的人密切合作时，我发现它很有用。我可以重新运行测试以确保新的测试数据有效，而不必担心编译我在此期间所做的任何更改。

例如，如果有人更改了数据库中的某些数据，我希望能够运行测试以确保这些新数据有效，并且无论我的代码的当前状态是否编译，我都希望能够运行测试.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-17T16:21:10.850

对于 Visual Studio 2017 / MSTestV2，您可以执行以下操作：

工具 > 选项 > 项目和解决方案 > 构建和运行

“在运行时，发生构建或部署错误时：” “不启动”

# php - 软断言和模拟方法测试失败

> ID：15817394
> 
> 赞同：3
> 
> 时间：2013-04-04T17:05:59.777
> 
> 标签：php, unit-testing, testing, phpunit

我正在关注本教程：http: [//jtreminio.com/2013/03/unit-testing-tutorial-part-5-mock-methods-and-overriding-constructors/](http://jtreminio.com/2013/03/unit-testing-tutorial-part-5-mock-methods-and-overriding-constructors/)。一个很棒的教程，用于了解 PHPUnit 的工作原理。

但我无法理解，因为测试没有通过。

失败是：

```
Method was expected to be called 1 times, actually called 0 times. 
```

在这部分代码：

```
 $badCode->expects($this->once())
            ->method('checkPassword')
            ->with($password); 
```

但这是不可能的，因为下一个软断言在 checkPassword 方法中运行并通过了测试。

```
 $badCode->expects($this->once())
            ->method('callExit'); 
```

它失败是因为是一个模拟方法并且行为不同？还是代码错了？

为了便于理解，我附上了所有文件，这是一个小例子。

安慰

```
PHPUnit 3.7.18 by Sebastian Bergmann.

FYOU SHALL NOT PASS............

Time: 0 seconds, Memory: 6.00Mb

There was 1 failure:

1) phpUnitTutorial\Test\BadCodeTest::testAuthorizeExitsWhenPasswordNotSet
Expectation failed for method name is equal to <string:checkPassword> when invoked 1 time(s).
Method was expected to be called 1 times, actually called 0 times.

FAILURES!
Tests: 13, Assertions: 14, Failures: 1. 
```

坏代码.php

```
<?php

namespace phpUnitTutorial;

class BadCode
{
    protected $user;

    public function __construct(array $user)
    {
        $this->user = $user;
    }

    public function authorize($password)
    {
        if ($this->checkPassword($password)) {
            return true;
        }

        return false;
    }

    protected function checkPassword($password)
    {
        if (empty($user['password']) || $user['password'] !== $password) {
            echo 'YOU SHALL NOT PASS';
            $this->callExit();
        }

        return true;
    }

    protected function callExit()
    {
        exit;
    }
} 
```

BadCodeTest.php

```
<?php

namespace phpUnitTutorial\Test;

class BadCodeTest extends \PHPUnit_Framework_TestCase
{
    public function testAuthorizeExitsWhenPasswordNotSet()
    {
        $user = array('username' => 'jtreminio');
        $password = 'foo';

        $badCode = $this->getMockBuilder('phpUnitTutorial\BadCode')
            ->setConstructorArgs(array($user))
            ->setMethods(array('callExit'))
            ->getMock();

        $badCode->expects($this->once())
            ->method('checkPassword')
            ->with($password);

        $badCode->expects($this->once())
            ->method('callExit');

        $this->expectOutputString('YOU SHALL NOT PASS');

        $badCode->authorize($password);
    }
} 
```

有人可以帮助我吗？谢谢！

**更新**

博客的作者用解决方案更新了教程。不能对模拟方法做任何断言，只能做存根。

坏代码.php

```
<?php

namespace phpUnitTutorial;

class BadCode
{
    protected $user;

    public function __construct(array $user)
    {
        $this->user = $user;
    }

    public function authorize($password)
    {
        if ($this->checkPassword($password)) {
            return true;
        }

        return false;
    }

    protected function checkPassword($password)
    {
        if (empty($this->user['password']) || $this->user['password'] !== $password) {
            echo 'YOU SHALL NOT PASS';
            $this->callExit();
        }

        return true;
    }

    protected function callExit()
    {
        exit;
    }
} 
```

BadCodeTest.php

```
<?php

namespace phpUnitTutorial\Test;

class BadCodeTest extends \PHPUnit_Framework_TestCase
{
    public function testAuthorizeExitsWhenPasswordNotSet()
    {
        $user = array('username' => 'jtreminio');
        $password = 'foo';

        $badCode = $this->getMockBuilder('phpUnitTutorial\BadCode')
            ->setConstructorArgs(array($user))
            ->setMethods(array('callExit'))

        $badCode->expects($this->once())
            ->method('callExit');

        $this->expectOutputString('YOU SHALL NOT PASS');

        $badCode->authorize($password);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:16:39.433

您缺少以下方法`setMethods`：

```
->setMethods(array('callExit')) 
```

`checkPassword`如果你想检查它是否被调用，你也需要添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:37:38.587

作者在这里-我捏造了那部分，而AppFog（我的主机）在免费帐户（我的）上有问题，所以我现在无法更新它。

另外，是的，它应该`$this->user`在`checkPassword()`

# sql - DotNetNuke 中的 SQL 查询

> ID：15817396
> 
> 赞同：0
> 
> 时间：2013-04-04T17:06:10.973
> 
> 标签：sql, dotnetnuke

我在 DotNetNuke 中使用表单和列表模块，并想设置一个查询来过滤结果集并返回仅由用户提交的记录（不显示其他人）

我对 DNN 表并不十分熟悉，我认为它会类似于下面的内容，但我不确定 WHERE 子句中的内容......

我想会是

```
SELECT * FROM ---tablename--- WHERE ... 
```

提前致谢。

编辑：

解决方法：在模块的List Settings中插入一条过滤语句：

```
[Created by_UDT_Original] = ‘[User:UserName]’ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:13:27.513

The FNL module uses it's own table structure, so querying against it will be fairly complex, and will vary based on the columns and types you created when configuring the module.

That being said, it is possible to have the module only display an individual user's data, that is either configured through the Module Settings, or within the FnL configuration itself.

# c#-4.0 - 查找特定组合的索引而不生成所有 ncr 组合

> ID：15817397
> 
> 赞同：2
> 
> 时间：2013-04-04T17:06:12.040
> 
> 标签：c#-4.0, ienumerable, combinations

我试图在不生成所有可能组合的实际列表的情况下找到特定组合的索引。例如：从 1 到 5 的 2 个数字组合产生 1,2;1,3,1,4,1,5;2,3,2,4,2,5..so..on。如果我的猜测是正确的，每个组合都有自己的索引，从零开始。我想在不为给定组合生成所有可能组合的情况下找到该索引。我正在用 C# 编写，但我的代码会即时生成所有可能的组合。如果 n 和 r 像 80 和 9 并且我什至无法枚举实际范围，这将是昂贵的。是否有任何可能的方法来查找索引而不产生该特定索引的实际组合

```
public int GetIndex(T[] combination)
                    {
                        int index = (from i in Enumerable.Range(0, 9)
                                      where AreEquivalentArray(GetCombination(i), combination)
                                      select i).SingleOrDefault();

                        return index;

                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:12:24.940

我用简单的语言找到了我自己问题的答案。这很简单，但在我的情况下似乎很有效。虽然选择方法是从其他站点带来的，但它会为选择的 n 个项目生成组合计数 r：

```
public long GetIndex(T[] combinations)
        {
            long sum = Choose(items.Count(),atATime);
            for (int i = 0; i < combinations.Count(); i++)
            {
                sum = sum - Choose(items.ToList().IndexOf(items.Max())+1 - (items.ToList().IndexOf(combinations[i])+1), atATime - i);
            }

            return sum-1;

        }
private long Choose(int n, int k)
        {
            long result = 0;
            int delta;
            int max;
            if (n < 0 || k < 0)
            {
                throw new ArgumentOutOfRangeException("Invalid negative parameter in Choose()");
            }
            if (n < k)
            {
                result = 0;
            }
            else if (n == k)
            {
                result = 1;
            }
            else
            {
                if (k < n - k)
                {
                    delta = n - k;
                    max = k;
                }
                else
                {
                    delta = k;
                    max = n - k;
                }
                result = delta + 1;
                for (int i = 2; i <= max; i++)
                {
                    checked
                    {
                        result = (result * (delta + i)) / i;
                    }
                }
            }
            return result;
        } 
```

# haskell - 在haskell中，我如何将代码作为函数引用

> ID：15817401
> 
> 赞同：4
> 
> 时间：2013-04-04T17:06:24.800
> 
> 标签：haskell

我目前有一个应用程序，它有一个菜单，可以执行以下功能：添加、删除和查看。我想知道的是如何将代码引用为函数。

我试图引用的代码是这样的：

```
putStrLn "Please enter the username:"
addName <- getLine
appendFile "UserList.txt" ("\n" ++ addName) 
```

我必须使用 let 函数吗？例如：

```
let addUserName = 
putStrLn "Please enter the username:"
addName <- getLine
appendFile "UserList.txt" ("\n" ++ addName). 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:11:20.913

首先，`let`当您在 GHCi 中时使用关键字，因为您在 IO monad 中。您通常不需要它来在源代码中定义函数。例如，您可以有一个名为“MyProgram.hs”的文件，其中包含：

```
addUserName = do
  putStrLn "Please enter the username:"
  addName <- getLine
  appendFile "UserList.txt" ("\n" ++ addName) 
```

然后在 GHCi 中，键入：

```
ghci> :l MyProgram.hs
ghci> addUserName 
```

（这是 :l 代表 :load，而不是数字一。）实际上，您可以在 GHCi 中定义一个函数，但除非它是单行的，否则会有点痛苦。这会起作用：

```
ghci> let greet = putStrLn "Hello!"
ghci> greet
Hello! 
```

# c++ - 向量中的for循环中的c ++内存分配 在 for 循环中

> ID：15817403
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:06:27.997
> 
> 标签：c++, memory, for-loop, vector, allocation

在重新分配向量对象时，我在以下函数中遇到内存分配问题，`chunk`我缺少什么以及可能的解决方案是什么？

```
 public:
    void send_FILE(std::string file_id, std::string file_path)
    {

        char* fid = moqane::number2string::To_CharArray(file_id);
        int fid_length = moqane::number2string::CharArray_Length(fid);
        const int step = packet_->BUFFER_SIZE;
        long total_length = boost::filesystem::file_size(file_path);

        for (int x = 0; x < total_length; x += step)
        {
            if ((x + step) <= total_length)
            {
                std::vector<char> chunk = moqane::file::GetFileChunk(file_path, x, x+step);
                write_FILE_CHUNK(fid, fid_length, chunk);

            }
            else
            {
                std::vector<char> chunk = moqane::file::GetFileChunk(file_path, x, total_length);
                write_FILE_CHUNK(fid, fid_length, chunk );
            }
        }
    } 
```

**编辑**

这是 moqane::GetFileChunk() 函数

```
 public:
    static std::vector<char> GetFileChunk(std::string file_path, int from_pos, int to_pos)
    {
        boost::filesystem::ifstream file;
        if (file)
        {
            file.open(file_path.c_str(),std::ios::in|ios::binary);
            file.seekg(from_pos,std::ios::beg);

            std::vector<char> buffer(to_pos - from_pos);
            file.read(&buffer[0], to_pos);

             return buffer;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:03:49.827

```
file.read(&buffer[0], to_pos); 
```

应该

```
file.read(&buffer[0], to_pos - from_pos); 
```

否则，如果`from_pos`不为零，你会写到结尾之外`buffer`，造成可怕的灾难。

# blackberry-eclipse-plugin - 将 android 应用程序移植到 BlackBerry 10 时出现错误“result::failure -9”

> ID：15817408
> 
> 赞同：3
> 
> 时间：2013-04-04T17:06:42.817
> 
> 标签：blackberry-eclipse-plugin, blackberry-10, blackberry-android

我正在尝试将我的 android 应用程序从 eclipse 部署到运行 10.0.9.422 的黑莓 Z10 上，但我没有成功。

这是我收到的实际错误。

```
Failed to deploy project XXXX
Info: Sending request: Install
Info: Action: Install
Info: File size: 8659959
Info: Installing ...
Info: Processing 8659959 bytes
Info: Progress 0%...
Info: Progress 49%...
Info: Progress 50%...
Info: Progress 100%...
actual_dname::com.xxx.xxxx.testEPPwDTJahv0UbAeaecXksgI
actual_id::testEPPwDTJahv0UbAeaecXksgI
actual_version::1.0.3.0
result::failure -9 
```

出现此错误后，我可以在 Z10 上看到应用程序图标，但是当我尝试访问它时，它显示“正在初始化。请稍候...'，然后应用程序崩溃。

失败 -9 表示什么以及关于问题/解决方案可能是什么的任何想法？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:37:43.627

在进行少量研究并为我的应用程序找到不受支持的库后，我能够解决我的问题。我使用 apkbarVerifier 工具找出了不受支持的库。

我的应用程序正在使用 com.google.android.maps 包。因此，我编辑了 android 清单文件以反映以下行。

```
<uses-library android:name="com.google.android.maps" android:required="false" /> 
```

在此更改之后，即使 eclipse 中的“验证 apk”选项向我显示了相同的警告，我还是能够将应用程序部署到我的 Z10 并让它工作。

基本上，部署失败 -9 意味着应用程序包含不受支持的库。

# ios - AVAudioPlayer 崩溃模拟器但在设备上运行

> ID：15817415
> 
> 赞同：1
> 
> 时间：2013-04-04T17:07:16.057
> 
> 标签：ios, avfoundation, avaudioplayer

我有一个应用程序可以播放声音片段作为提示音。在实际设备上一切正常，但在模拟器上崩溃。

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"m4a"];
NSString *expandedFilePath = [filePath stringByExpandingTildeInPath];
NSURL *fileURL = [NSURL fileURLWithPath:expandedFilePath];
self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];
[self.player play]; 
```

我发现很多关于模拟器问题的帖子，有些人建议使用 stringByExpandingTildeInPath 但这没什么区别。我尝试过 mp3、m4a 和 wav 文件，它们的行为方式都相同。在 6.0 和 6.1 模拟器中我没有收到错误，但是当我在 5.1 模拟器中运行它时，我在控制台中收到以下错误：

```
2013-04-04 10:57:03.682 MyAppName[51504:1b03] Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn:  dlopen(/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

只要代码没有可能导致真实设备出现问题的根本问题，我可能可以忍受这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:10:47.207

模拟器很有趣`AVAudioPlayer`你应该在真实设备上测试你的代码，但是你发布的看起来不错。

# ajax - Ajax 文件上传到 CFC 可与 CF 服务器一起使用，但不能通过 Apache

> ID：15817418
> 
> 赞同：1
> 
> 时间：2013-04-04T17:07:18.447
> 
> 标签：ajax, apache, coldfusion

我有一个将数据发送到 cfc 的 ajax 文件上传器。在cfc 中，通过使用GetHttpRequestData() 将数据分配给一个局部变量。

```
<cfset local.requestData = GetHttpRequestData()> 
```

当直接针对 Coldfusion (Tomcat) 运行它时，一切正常，数据可以在 local.requestData.content 中找到。

但是，如果请求通过 Apache，则内容在 local.requestData.content（大小为 0）中不可用。

我用 PHP 和 CF 编写了一些非 ajax 上传器，只是为了测试它是否是 Apache 问题。它不是。

我发送声明为应用程序/表单数据的内容类型。有趣的是，标题字段“content-length”设置了正确的大小，因此在我看来，数据发送正确，但 GetHttpRequestData() 没有正确获取。

有任何想法吗？

# python - subprocess 和 Type Str 不支持缓冲区 API

> ID：15817420
> 
> 赞同：21
> 
> 时间：2013-04-04T17:07:19.907
> 
> 标签：python, subprocess, python-3.3

我有

```
cmd = subprocess.Popen('dir',shell=True,stdout=subprocess.PIPE)
for line in cmd.stdout:
  columns = line.split(' ')
  print (columns[3]) 
```

第 3 行有错误 Type Str 不支持缓冲区 API。

我在做错什么我在 Python 3.3 上

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-04T17:09:24.203

您正在读取二进制数据，而不是`str`，因此您需要先解码输出。如果将`universal_newlines`参数设置为`True`，则使用[方法](https://docs.python.org/3/library/locale.html#locale.getpreferredencoding)`stdout`的结果自动解码 （与打开文本文件相同）：[`locale.getpreferredencoding()`](https://docs.python.org/3/library/locale.html#locale.getpreferredencoding)

```
cmd = subprocess.Popen(
    'dir', shell=True, stdout=subprocess.PIPE, universal_newlines=True)
for line in cmd.stdout:
    columns = line.decode().split()
    if columns:
        print(columns[-1]) 
```

如果您使用 Python 3.6 或更新版本，您可以使用显式`encoding`参数`Popen()`调用来指定要使用的不同编解码器，例如 UTF-8：

```
cmd = subprocess.Popen(
    'dir', shell=True, stdout=subprocess.PIPE, encoding='utf8')
for line in cmd.stdout:
    columns = line.split()
    if columns:
        print(columns[-1]) 
```

如果您需要在 Python 3.5 或更早版本中使用不同的编解码器，请不要使用`universal_newlines`，只需显式解码字节中的文本。

您试图`bytes`使用`str`参数拆分值：

```
>>> b'one two'.split(' ')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Type str doesn't support the buffer API 
```

通过解码，您可以避免该问题，并且您的`print()`调用不必在输出前加上`b'..'`任何一个。

但是，您可能只想使用该`os`模块来获取文件系统信息：

```
import os

for filename in os.listdir('.'):
    print(filename) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-01T08:08:02.527

[Martijn Pieters 答案](https://stackoverflow.com/a/15817457/1872673)第一部分的一个更简单的解决方案是将`universal_newlines=True`参数传递给`Popen`调用。

我什至会将其简化为：

```
output = subprocess.check_output('dir', universal_newlines=True)
columns = output.split()
print(columns) 
```

**注意**：如果文件或目录名称包含空格，请按照[Martijn Pieters 的回答](https://stackoverflow.com/a/15817457/1872673)`os.listdir('.')`中的建议使用或类似以下内容：

```
output = subprocess.check_output('dir', universal_newlines=True)
columns = []
for e in output.split():
    if len(columns) > 0 and columns[-1].endswith('\\'):
        columns[-1] = columns[-1][:-1] + " " + e
    else:
        columns.append(e)
print(columns) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T00:33:33.987

最好使用将二进制数据转换为一行 ASCII 字符的[binascii.b2a_uu](http://docs.python.org/2/library/binascii.html)

```
from binascii import b2a_uu 
cmd = b2a_uu(subprocess.Popen('dir',shell=True,stdout=subprocess.PIPE)) 
```

# javascript - 安全 - 创建的对象可以具有未知属性吗？

> ID：15817421
> 
> 赞同：4
> 
> 时间：2013-04-04T17:07:20.900
> 
> 标签：javascript

我订阅了常见的成语：

```
for(var key in obj){
    if(obj.hasOwnPropery(key)){ 
        // do stuff
    }
} 
```

但如果我这样做：

```
var obj = {a: 'a', b: 'b'}; 
```

循环时是否需要担心`obj`具有“a”和“b”以外的属性？

或者上面的习语主要是针对您开发人员没有创建的对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:08:40.040

从技术上讲是的，`Object.prototype`可以修改（出于好的或坏的原因）。这些显示为可枚举属性（将在枚举时显示）。

当`Object.prototype`被修改时，它会影响对象的所有实例，所以你`obj`的包含在其中。例如，如果其他一些脚本/库执行此：

```
Object.prototype.keyLength = function () {
    var count = 0;
    for (var key in this) {
        if (this.hasOwnProperty(key)) count++;
    }
    return count;
}; 
```

那么这将是迭代你的结果`obj`（不使用`hasOwnProperty`）：

```
a
b
keyLength 
```

（不一定按这个顺序）

如果您使用`hasOwnProperty`，您只会看到“a”和“b”。

修改`Object`原型并不理想（出于多种原因），但“更安全”的方式是使用`Object.defineProperty`- [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty) . 您可以将其描述为可枚举或不可枚举。这是一种较新的方法，因此它在浏览器中并不全局可用。当然，您不能强制其他库使用它，因为您无法控制它们。但如果可以的话，建议您自己使用。

您的用途`hasOwnProperty`是确保您正在查看的密钥是实际属性而不是原型链上的属性并且不可枚举。这确实解决了`prototype`“问题”。仅供参考 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

# centos - vagrant 无法访问 localhost:8080 上的网络服务器

> ID：15817422
> 
> 赞同：2
> 
> 时间：2013-04-04T17:07:27.743
> 
> 标签：centos, vagrant

我正在通过 vagrant 运行 CentOS 6.4。

我已将这一行放在我的 Vagrantfile 中：

```
config.vm.network :forwarded_port, guest: 80, host: 8080 
```

然后我在虚拟机中安装了 nginx 并验证了它是否可以使用：

```
wget http://locahost/ 
```

工作正常。

但是当我去时从我的主机（Macbook Air，Mountain Lion）：

```
http://localhost:8080 
```

它超时。我错过了 Vagrantfile 中的任何配置吗？

我用过这个盒子：

[https://github.com/NREL/vagrant-boxes](https://github.com/NREL/vagrant-boxes)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-19T08:44:04.627

你检查过你的iptables吗？

这是一个常见的错误：当您使用配置时，您还必须配置您的 iptables。（对于 puppet，你有[这个模块](https://forge.puppetlabs.com/bobsh/iptables)。）如果你不想使用防火墙，你可以`vagrant ssh`跟着`sudo service iptables stop`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T00:19:30.707

当您访问浏览器时，您会看到什么？它是说`Data not received`还是永远不会停止重新加载？您在浏览器中收到任何消息吗？服务器配置文件一定有点乱。尝试重新加载服务器配置，然后重新启动它。

另外，尝试将端口号更改为其他值。使用较新版本的 Vagrant，syntex 看起来有点不同。所以你必须这样做：

`config.vm.forward_port 80, 2759`

这是我用于我的一个实例的配置文件：

```
Vagrant::Config.run do |config|
  config.vm.box       = 'rails-dev-ready'
  config.vm.host_name = 'rails-dev-ready'

  config.vm.forward_port 5800, 5800
  config.vm.forward_port 1080, 1090
  config.vm.forward_port 80, 2759

  config.vm.provision :puppet,
    :manifests_path => 'puppet/manifests',
    :module_path    => 'puppet/modules'
config.vm.share_folder "sharedapps", "/home/vagrant/sharedapps", "sharedapps"

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T07:34:30.260

您可以运行以下命令来查看是否有任何其他进程（例如 Tomcat）绑定到端口 8080：

```
lsof -i :8080 
```

如果是这样，那可能会导致问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T15:32:52.823

我最近设置了一个 CentOS 6.4 盒子。我的端口都因为`iptables`. 我刚刚禁用了该服务。它在`/sbin/sevices`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-26T02:56:30.240

我找到了解决方案，

我发现 Apache + vagrant 有问题，有时 Apache 不会自动启动。

请尝试：`sudo service apache2 start`通过 ssh 登录后。

我在使用 Vagrant 时遇到问题，所有错误消息都表明存在网络问题，但实际上我的 Apache 服务没有启动`vagrant up`

# html - 重新排列页面上的默认列（-webkit-column、-moz-column）顺序？

> ID：15817427
> 
> 赞同：3
> 
> 时间：2013-04-04T17:07:46.050
> 
> 标签：html, css, layout, grid

这是我的问题，我有一个 3 列设计，类似于 Pinterest，但是我不喜欢它们的显示顺序。

看这个演示：[我的演示](http://jsbin.com/epulex/1/edit)

如您所见，文章是这样显示的

```
1  3  5
2  4  6 
```

我希望它们像这样显示：

```
1  2  3
4  5  6 
```

我知道我可以通过更改标记来实现它，但问题是所有内容都将从数据库中一个一个地调用，因此逐篇文章，因此它需要以与标记中相同的方式排序，只是显示方式不同在页面上：

**HTML**

```
<div class="page-wrap main">

    <div class="grid">

        <article class="box article">
            <header class="clearfix">
                    1
            </header>
        </article>

        <article class="box article">
            <header class="clearfix">
                    2
            </header>
        </article>

        <article class="box article">
            <header class="clearfix">
                    3
            </header>
        </article>

        <article class="box article">
            <header class="clearfix">
                    4
            </header>
        </article>

        <article class="box article">
            <header class="clearfix">
                    5
            </header>
        </article>

        <article class="box article">
            <header class="clearfix">
                    6
            </header>
        </article>

    </div> <!-- END .grid  (Content) -->

</div> <!-- END .page-wrap (Content) --> 
```

**CSS**

```
body {
  background-color: #ebebeb;
}

.page-wrap {
  width: 90%;
  max-width: 1280px;
  margin: 0 5%;
}

.grid {
  -webkit-column-count: 3;
  -moz-column-count: 3;
  column-count: 3;

  -webkit-column-gap: 20px;
  -moz-column-gap: 20px;
  column-gap: 20px;
  -webkit-column-fill: auto;
  -moz-column-fill: auto;
  column-fill: auto;
}

.box {
  display: inline-block;
  -webkit-column-break-inside: avoid;
  -moz-column-break-inside: avoid;
  column-break-inside: avoid;
  padding: 1px;
  width: 100%;
}

.article {
  background-color: #ffffff;
  margin-top: 20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:42:12.467

您可以这样做，但您必须为每篇文章添加一个新类。这不会破坏网站的其余部分，因为您需要添加的 CSS 只会将其调用到您希望应用新布局的页面。这是一个演示[http://jsfiddle.net/kevinPHPkevin/LZgtA/](http://jsfiddle.net/kevinPHPkevin/LZgtA/)

```
<div class="page-wrap main">

<div class="grid">

    <article class="box article one">
        <header class="clearfix">
                1
        </header>
    </article>

    <article class="box article two">
        <header class="clearfix">
                2
        </header>
    </article>

    <article class="box article three">
        <header class="clearfix">
                3
        </header>
    </article>

    <article class="box article four">
        <header class="clearfix">
                4
        </header>
    </article>

    <article class="box article five">
        <header class="clearfix">
                5
        </header>
    </article>

    <article class="box article six">
        <header class="clearfix">
                6
        </header>
    </article>

</div> <!-- END .grid  (Content) --> 
```

# qt - 如何在 QAbstractItemView 中获取可见 QModelIndex 列表

> ID：15817429
> 
> 赞同：8
> 
> 时间：2013-04-04T17:07:50.277
> 
> 标签：qt, model-view-controller, qmodelindex, qabstractitemview

有什么方法可以获取当前可见项目的列表`QAbstractItemView`吗？并且，如果可能的话，接收有关更改此列表的任何通知。

Upd：我问`QAbstractItemView`的`QTreeView`是非简单结构，而不是`QTableView`.

Upd2：我正在使用复选框实现树视图模型。我想要下一个行为（检查/取消检查相同）：

*   如果选中其中一个复选框 - 则必须选中所有子项
*   如果所有子复选框都被选中 - 那么父复选框也应该被选中。对于父母的父母也是如此，依此类推......

检查状态由外部数据源监控/修改，因此我需要一种机制来更新所有更改的子/父。`dataChanged`信号对我来说是不够的，因为构建所有更改`QModelIndex`以进行更新的列表非常广泛。而且根本没有必要，因为所有新数据都将从`QAbstractItemModel::data`.

我发现下一个肮脏的黑客来更新所有项目：`emit dataChanged( QModelIndex(), QModelIndex() );`但它没有记录无效索引。

所以，我需要一种方法来强制所有可见项目用新数据重新绘制它们的内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T17:44:20.143

您可以通过调用获得左上角和右下角的单元格：

```
tableview->indexAt(tableview->rect().topLeft())
tableview->indexAt(tableview->rect().bottomRight()) 
```

要获得更改通知，请重新实现 qabstractscrollarea 的虚函数

```
scrollContentsBy 
```

滚动视口时调用此函数。调用 QTableView::scrollContentsBy 然后做任何你需要的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-13T19:58:54.777

对于`QTreeView`，可以像这样遍历可见项的列表：

```
QTreeView& tv (yourTreeView);

// Get model index for first visible item
QModelIndex modelIndex = tv.indexAt(tv.rect().topLeft());

while (modelIndex.isValid())
{
    // do something with the item indexed by modelIndex
    ...
    // This navigates to the next visible item
    modelIndex = tv.indexBelow(modelIndex);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:01:44.227

我认为没有需要可见项目列表的情况。如果模型实现正确，所有项目都会自动更新。实施的困难部分 - 迫使孩子和父母更新。我写了以下代码：

```
bool TreeModel::setData( const QModelIndex &index, const QVariant &value, int role )
case Qt::CheckStateRole:
        {
            TreeItemList updateRangeList;  // Filled with items, in which all childred must be updated
            TreeItemList updateSingleList; // Filled with items, which must be updated
            item->setCheckState( value.toBool(), updateRangeList, updateSingleList ); // All magic there
            foreach ( TreeAbstractItem *i, updateRangeList )
            {
                const int nRows = i->rowCount();
                QModelIndex topLeft = indexForItem( i->m_childs[0] );
                QModelIndex bottomRight = indexForItem( i->m_childs[nRows - 1] );
                emit dataChanged( topLeft, bottomRight );
            }
            foreach ( TreeAbstractItem *i, updateSingleList )
            {
                QModelIndex updateIndex = indexForItem( i );
                emit dataChanged( updateIndex, updateIndex );
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-01T09:58:49.693

我总是用以下内容更新整个 QAbstractTableModel：

```
emit dataChanged(index(0, 0), index(rowCount(), columnCount()-1)); // update whole view 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-13T12:42:43.110

**方法一**

```
i, j = table.indexAt(table.rect().topLeft()).row(), table.indexAt(table.rect().bottomLeft()).row() - 1 
```

**方法二**

```
i, j = table.rowAt(0), table.rowAt(table.height()) - 1 
```

# javascript - 如何在第一次加载时选择 AngularJS 模型？

> ID：15817431
> 
> 赞同：0
> 
> 时间：2013-04-04T17:07:54.690
> 
> 标签：javascript, angularjs, angularjs-scope

我正在使用 AngularJS 来填充选择选项列表。

我默认选择一个选项，具体取决于字段 isMandatory。但问题是我无法在第一次加载时获取所选项目的 ID。

当我更改选项时它会起作用。

请检查此 plunker 代码：[http ://plnkr.co/edit/U2dVeo1vwZZPFKVhPleV?p=preview](http://plnkr.co/edit/U2dVeo1vwZZPFKVhPleV?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:25:00.220

我建议使用 ng-options：

```
<select ng-model="selectedItem" ng-options="item.id as item.text for item in list"> 
```

以及设置最初选择的项目的功能：

```
angular.forEach($scope.list, function(item, key){
  if(item.isMandatory) {
    $scope.selectedItem = item.id;
  }
}); 
```

[普朗克](http://plnkr.co/edit/9TFdpmLnos5qZzGQwyi2?p=preview)

# mongodb - MongoDB查询错误发生在：org.eclipse.persistence.jpa.jpql.parser.ExpressionVisitor not found by org.eclipse.persistence.core

> ID：15817432
> 
> 赞同：0
> 
> 时间：2013-04-04T17:07:56.913
> 
> 标签：mongodb, eclipselink, nosql

我正在尝试在 MongoDB 上使用 EclipseLink 执行简单查询。我利用了这个[例子](https://blogs.oracle.com/arungupta/entry/java_ee_6_and_nosql)。

我的 GlassFish 版本 3.1.2 按照这个[例子](https://blogs.oracle.com/GlassFishPersistence/entry/updating_eclipselink_bundles_in_glassfish)，我更新了 EclipseLink。

当我执行以下查询时，出现错误。

```
Query query = em.createQuery("Select o from Order"); 
```

或者

```
Query query = em.createQuery("Select o from Order o where o.totalCost > 1000"); 
```

等等。

```
WARNING: #{myBean.testPersist}: java.lang.NoClassDefFoundError: org/eclipse/persistence/jpa/jpql/parser/ExpressionVisitor
javax.faces.FacesException: #{myBean.testPersist}: java.lang.NoClassDefFoundError: org/eclipse/persistence/jpa/jpql/parser/ExpressionVisitor
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680)
Caused by: javax.faces.el.EvaluationException: java.lang.NoClassDefFoundError: org/eclipse/persistence/jpa/jpql/parser/ExpressionVisitor
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 31 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/persistence/jpa/jpql/parser/ExpressionVisitor
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:171)
    at org.eclipse.persistence.internal.security.PrivilegedAccessHelper.getClassForName(PrivilegedAccessHelper.java:112)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.buildDefaultQueryBuilder(DatabaseSessionImpl.java:287)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.getQueryBuilder(DatabaseSessionImpl.java:252)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:137)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:112)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:98)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:82)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1510)
    at com.kodcu.bean.MyBean.sorgu(MyBean.java:169)
    at com.kodcu.bean.MyBean.testPersist(MyBean.java:162)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 32 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.persistence.jpa.jpql.parser.ExpressionVisitor not found by org.eclipse.persistence.core [254]
    at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1460)
    at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)
    at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 54 more 
```

在插入过程中我没有收到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:22:36.197

确保在 Glassfish 的类路径中包含 EclipseLink antlr、hermes 和 nosql osgi 包 jar。

# python - Django：ValueError：尝试在干净中创建失败时无法在 ForeignField 上分配 none

> ID：15817437
> 
> 赞同：7
> 
> 时间：2013-04-04T17:08:05.667
> 
> 标签：python, django, django-forms

在提交表单时，我很难弄清楚如何为 ForeignKey 字段自动创建模型实例。这是一个说明问题的简单玩具网站：

我有两个模型，Model1 和 Model2。Model2 包含 Model1 的 ForeignKey。我希望用户能够通过专门选择要存储在 ForeignKey 中的 Model1 的实例，或者将该值留空并让 Model1 的实例自动生成来创建 Model2 的实例。

这就是我觉得该代码应该是什么样子的。我的 models.py 代码非常简单：

```
# models.py
from django.db import models
from django.core.validators import MinValueValidator

class Model1(models.Model):

    # Note this field cannot be negative
    my_field1 = models.IntegerField(validators=[MinValueValidator(0)])

class Model2(models.Model):
    # blank = True will make key_to_model1 not required on the form,
    # but since null = False, I will still require the ForeignKey
    # to be set in the database.
    related_model1 = models.ForeignKey(Model1, blank=True)

    # Note this field cannot be negative
    my_field2 = models.IntegerField(validators=[MinValueValidator(0)]) 
```

forms.py 有点涉及，但发生的事情非常简单。如果 Model2Form 没有收到 Model1 的实例，它会尝试在 clean 方法中自动创建一个，验证它，如果它有效，它会保存它。如果它无效，则会引发异常。

```
#forms.py
from django import forms
from django.forms.models import model_to_dict

from .models import Model1, Model2

# A ModelForm used for validation purposes only.
class Model1Form(forms.ModelForm):
    class Meta:
        model = Model1

class Model2Form(forms.ModelForm):
    class Meta:
        model = Model2

    def clean(self):
        cleaned_data = super(Model2Form, self).clean()

        if not cleaned_data.get('related_model1', None):

            # Don't instantiate field2 if it doesn't exist.
            val = cleaned_data.get('my_field2', None)
            if not val:
                raise forms.ValidationError("My field must exist")

            # Generate a new instance of Model1 based on Model2's data
            new_model1 = Model1(my_field1=val)

            # validate the Model1 instance with a form form
            validation_form_data = model_to_dict(new_model1)
            validation_form = Model1Form(validation_form_data)

            if not validation_form.is_valid():
                raise forms.ValidationError("Could not create a proper instance of Model1.")

            # set the model1 instance to the related model and save it to the database.
            new_model1.save()
            cleaned_data['related_model1'] = new_model1

        return cleaned_data 
```

但是，这种方法行不通。如果我在表单中输入有效数据，它就可以正常工作。但是，如果我没有为 ForeignKey 输入任何内容并为整数输入一个负值，我会得到一个 ValueError。

> 回溯：get_response 111 中的文件“/Library/Python/2.7/site-packages/django/core/handlers/base.py”。响应=回调（请求，*callback_args，**callback_kwargs）文件“/Library/Python/2.7 /site-packages/django/views/generic/base.py" 在视图 48\. return self.dispatch(request, *args, **kwargs) File "/Library/Python/2.7/site-packages/django/views/ generic/base.py” 在 dispatch 69\. return handler(request, *args, **kwargs) File "/Library/Python/2.7/site-packages/django/views/generic/edit.py" in post 172\. return super(BaseCreateView, self).post(request, *args, **kwargs) 文件 "/Library/Python/2.7/site-packages/django/views/generic/edit.py" 在帖子 137\. if form.is_valid( ): 文件“/库/Python/2.7/site-packages/django/forms/forms.py" in is_valid 124\. 返回 self.is_bound 而不是 bool(self.errors) 文件 "/Library/Python/2.7/site-packages/django/forms/forms.py " 在 _get_errors 115\. self.full_clean() 文件 "/Library/Python/2.7/site-packages/django/forms/forms.py" 在 full_clean 272\. self._post_clean() 文件 "/Library/Python/2.7/site -packages/django/forms/models.py" in _post_clean 309\. self.instance = construction_instance(self, self.instance, opts.fields, opts.exclude) 文件 "/Library/Python/2.7/site-packages/django/ forms/models.py”在construct_instance 51\. f.save_form_data(instance,cleaned_data[f.name]) 文件“/Library/Python/2.7/site-packages/django/db/models/fields/返回 self.is_bound 而不是 bool(self.errors) File "/Library/Python/2.7/site-packages/django/forms/forms.py" in _get_errors 115\. self.full_clean() File "/Library/Python/2.7 /site-packages/django/forms/forms.py" 在 full_clean 272\. self._post_clean() 文件 "/Library/Python/2.7/site-packages/django/forms/models.py" 在 _post_clean 309\. self.instance =construct_instance（self，self.instance，opts.fields，opts.exclude）文件“/Library/Python/2.7/site-packages/django/forms/models.py”在construct_instance 51\. f.save_form_data（instance，cleaned_data [ f.name]) 文件“/Library/Python/2.7/site-packages/django/db/models/fields/返回 self.is_bound 而不是 bool(self.errors) File "/Library/Python/2.7/site-packages/django/forms/forms.py" in _get_errors 115\. self.full_clean() File "/Library/Python/2.7 /site-packages/django/forms/forms.py" 在 full_clean 272\. self._post_clean() 文件 "/Library/Python/2.7/site-packages/django/forms/models.py" 在 _post_clean 309\. self.instance =construct_instance（self，self.instance，opts.fields，opts.exclude）文件“/Library/Python/2.7/site-packages/django/forms/models.py”在construct_instance 51\. f.save_form_data（instance，cleaned_data [ f.name]) 文件“/Library/Python/2.7/site-packages/django/db/models/fields/py" in _get_errors 115\. self.full_clean() 文件 "/Library/Python/2.7/site-packages/django/forms/forms.py" 在 full_clean 272\. self._post_clean() 文件 "/Library/Python/2.7/ site-packages/django/forms/models.py" in _post_clean 309\. self.instance = construction_instance(self, self.instance, opts.fields, opts.exclude) 文件 "/Library/Python/2.7/site-packages/django /forms/models.py”在construct_instance 51\. f.save_form_data(instance,cleaned_data[f.name]) 文件“/Library/Python/2.7/site-packages/django/db/models/fields/py" in _get_errors 115\. self.full_clean() 文件 "/Library/Python/2.7/site-packages/django/forms/forms.py" 在 full_clean 272\. self._post_clean() 文件 "/Library/Python/2.7/ site-packages/django/forms/models.py" in _post_clean 309\. self.instance = construction_instance(self, self.instance, opts.fields, opts.exclude) 文件 "/Library/Python/2.7/site-packages/django /forms/models.py”在construct_instance 51\. f.save_form_data(instance,cleaned_data[f.name]) 文件“/Library/Python/2.7/site-packages/django/db/models/fields/7/site-packages/django/forms/models.py" in _post_clean 309\. self.instance = construction_instance(self, self.instance, opts.fields, opts.exclude) 文件 "/Library/Python/2.7/site-packages /django/forms/models.py”在construct_instance 51\. f.save_form_data(instance,clean_data[f.name]) 文件“/Library/Python/2.7/site-packages/django/db/models/fields/7/site-packages/django/forms/models.py" in _post_clean 309\. self.instance = construction_instance(self, self.instance, opts.fields, opts.exclude) 文件 "/Library/Python/2.7/site-packages /django/forms/models.py”在construct_instance 51\. f.save_form_data(instance,clean_data[f.name]) 文件“/Library/Python/2.7/site-packages/django/db/models/fields/**init** .py" in save_form_data 454\. setattr(instance, self.name, data) 文件 "/Library/Python/2.7/site-packages/django/db/models/fields/related.py" 在**set** 362\. (instance. _meta.object_name，self.field.name))
> 
> 异常类型：ValueError at /add/ 异常值：无法分配无：“Model2.related_model1”不允许空值。

所以，发生的事情是 Django 正在捕获我的 ValidationError 并仍然创建 Model2 的实例，即使验证失败。

如果出现错误，我可以通过覆盖 _post_clean 方法来解决此问题，以便不创建 Model2 的实例。但是，这个解决方案是丑陋的。特别是，_post_clean 的行为通常非常有帮助——在更复杂的项目中，我需要 _post_clean 来运行其他原因。

我也可以允许 ForeignKey 为空，但在实践中从不将其设置为空。但是，再一次，这似乎是个坏主意。

我什至可以设置一个虚拟的 Model1，每当对尝试的新 Model1 的验证失败时，我都会使用它，但这似乎也很骇人听闻。

一般来说，我可以想出很多技巧来解决这个问题，但我不知道如何以一种相当干净、pythonic 的方式来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:29:57.267

根据 karthikr 在评论中的讨论，我找到了一个我认为可能可以接受的解决方案。我绝对仍然对替代品持开放态度。

这个想法是使用视图中的逻辑在两种表单之间进行选择来进行验证：一种是标准模型表单，一种是没有 ForeignKey 字段的模型表单。

所以，我的 models.py 是相同的。

我的 forms.py 有两个 Model2 表单……一个非常简单，一个没有 ForeignKey 字段，并且具有新的逻辑来为 ForeignKey 动态生成 Model1 的新实例。新表单的干净逻辑就是我以前放在 Model2Form 中的干净逻辑：

```
#forms.py
from django import forms
from django.forms.models import model_to_dict

from .models import Model1, Model2

# A ModelForm used for validation purposes only.
class Model1Form(forms.ModelForm):
    class Meta:
        model = Model1

class Model2Form(forms.ModelForm):
    class Meta:
        model = Model2

# This inherits from Model2Form so that any additional logic that I put in Model2Form
# will apply to it.
class Model2FormPrime(Model2Form):
    class Meta:
        model = Model2
        exclude = ('related_model1',)

    def clean(self):
        cleaned_data = super(Model2Form, self).clean()

        if cleaned_data.get('related_model1', None):
            raise Exception('Huh? This should not happen...')

        # Don't instantiate field2 if it doesn't exist.
        val = cleaned_data.get('my_field2', None)
        if not val:
            raise forms.ValidationError("My field must exist")

        # Generate a new instance of Model1 based on Model2's data
        new_model1 = Model1(my_field1=val)

        # validate the Model1 instance with a form form
        validation_form_data = model_to_dict(new_model1)
        validation_form = Model1Form(validation_form_data)

        if not validation_form.is_valid():
            raise forms.ValidationError("Could not create a proper instance of Model1.")

        # set the Model1 instance to the related model and save it to the database.
        cleaned_data['related_model1'] = new_model1

        return cleaned_data

    def save(self, commit=True):
        # Best to wait til save is called to save the instance of Model1
        # so that instances aren't created when the Model2Form is invalid
        self.cleaned_data['related_model1'].save()

        # Need to handle saving this way because otherwise related_model1 is excluded
        # from the save due to Meta.excludes
        instance = super(Model2FormPrime, self).save(False)
        instance.related_model1 = self.cleaned_data['related_model1']
        instance.save()

        return instance 
```

然后我的视图逻辑使用两种形式之一进行验证，具体取决于发布数据。如果它使用 Model2FormPrime 并且验证失败，它会将数据和错误移动到常规 Model2Form 以向用户显示：

```
# Create your views here.
from django.views.generic.edit import CreateView
from django.http import HttpResponseRedirect

from .forms import Model2Form, Model2FormPrime

class Model2CreateView(CreateView):
    form_class = Model2Form
    template_name = 'form_template.html'
    success_url = '/add/'

    def post(self, request, *args, **kwargs):
        if request.POST.get('related_model', None):
            # Complete data can just be sent to the standard CreateView form
            return super(Model2CreateView, self).post(request, *args, **kwargs)
        else:
            # super does this, and I won't be calling super.
            self.object = None

            # use Model2FormPrime to validate the post data without the related model.
            validation_form = Model2FormPrime(request.POST)
            if validation_form.is_valid():
                return self.form_valid(validation_form)
            else:
                # Create a normal instance of Model2Form to be displayed to the user
                # Insantiate it with post data and validation_form's errors
                form = Model2Form(request.POST)
                form._errors = validation_form._errors
                return self.form_invalid(form) 
```

此解决方案有效，而且非常灵活。我可以将逻辑添加到我的模型和基础 Model2Form 中，而不必担心会破坏它或违反 DRY。

不过，它有点难看，因为它需要我使用两种表单来完成一个工作，在表单之间传递错误。因此，如果有人可以提出任何建议，我绝对愿意接受替代解决方案。

# highcharts - 自动图表高度

> ID：15817438
> 
> 赞同：5
> 
> 时间：2013-04-04T17:08:06.447
> 
> 标签：highcharts, highstock

默认的 highstock 图表的高度 = 400px。

如何根据图表轴及其大小为自动大小设置高度图表？

请参见下面的示例，导航栏位于音量面板上方。

[http://jsfiddle.net/BYNsJ/](http://jsfiddle.net/BYNsJ/)

我知道我可以设置 div 的高度，但我有一个解决方案，可以在图表中动态插入/删除轴/系列，并且会是一个很好的自动高度图表。

该示例与来自 Highchart 站点的 Candlestick/Volume 演示相同，但​​ div 容器中没有 height 属性。

```
 // split the data set into ohlc and volume
    var ohlc = [],
        volume = [],
        dataLength = data.length;

    for (i = 0; i < dataLength; i++) {
        ohlc.push([
            data[i][0], // the date
            data[i][1], // open
            data[i][2], // high
            data[i][3], // low
            data[i][4] // close
        ]);

        volume.push([
            data[i][0], // the date
            data[i][5] // the volume
        ])
    }

    // set the allowed units for data grouping
    var groupingUnits = [[
        'week',                         // unit name
        [1]                             // allowed multiples
    ], [
        'month',
        [1, 2, 3, 4, 6]
    ]];

    // create the chart
    $('#container').highcharts('StockChart', {

        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'AAPL Historical'
        },

        yAxis: [{
            title: {
                text: 'OHLC'
            },
            height: 200,
            lineWidth: 2
        }, {
            title: {
                text: 'Volume'
            },
            top: 300,
            height: 100,
            offset: 0,
            lineWidth: 2
        }],

        series: [{
            type: 'candlestick',
            name: 'AAPL',
            data: ohlc,
            dataGrouping: {
                units: groupingUnits
            }
        }, {
            type: 'column',
            name: 'Volume',
            data: volume,
            yAxis: 1,
            dataGrouping: {
                units: groupingUnits
            }
        }]
    });
    });
}); 
```

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-26T05:35:16.767

这是一个根据屏幕调整图表大小的示例。 [http://jsfiddle.net/davide_vallicella/LuxFd/2/](http://jsfiddle.net/davide_vallicella/LuxFd/2/)

只是不要在 HighCharts 中设置 height 属性，只要您在图表的包含元素上设置高度，它就会为您动态处理它。如果位置是绝对的，它可以是一个固定的数字，甚至是一个百分比。

[http://api.highcharts.com/highcharts/chart.height](http://api.highcharts.com/highcharts/chart.height)

默认情况下，高度是根据包含元素的偏移高度计算的

在此处查找示例：- [http://jsfiddle.net/wkkAd/149/](http://jsfiddle.net/wkkAd/149/)

```
#container {
    width:100%;
    height:100%;
    position:absolute;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-31T10:49:18.950

嘿，我使用的是 angular 2+ 和 highchart/highstock v.5，我认为它也可以在 JS 或 jQuery 中使用，这是一个简单的解决方案

HTML

```
<div id="container">
    <chart type="StockChart" [options]="stockValueOptions"></chart> 
</div> 
```

CSS

```
#container{
   height: 90%;
} 
```

TS

```
 this.stockValueOptions = {
     chart: {
         renderTo: 'container'                    
     },
     yAxis: [{
        height: '60%'
     },{
        top: '65%',
        height: '35%'
     }]
} 
```

它的工作，一个简单的。删除图表高度，在 '%' 中为 yAxis 添加高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:54:55.983

Highcharts 不支持动态高度，可以通过`$(window).resize`事件实现：

```
$(window).resize(function() 
{    
    chart.setSize(
       $(document).width(), 
       $(document).height()/2,
       false
    );   
}); 
```

[在此处](http://jsfiddle.net/vCZ8V/1/)查看演示小提琴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-29T13:30:31.070

您可以使用 chart.update 方法动态设置 chart.height。

[http://api.highcharts.com/highcharts/Chart.update](http://api.highcharts.com/highcharts/Chart.update)

```
function resizeChartFromValues (chart) {
  const pixelsForValue = 10
  const axis = chart.yAxis[0]
  chart.update({ chart: { height: (axis.max - axis.min) * pixelsForValue } })
}

const options = {
  chart: {
    events: {
      load () {resizeChartFromValues(this)}
    }
  },
  series: [{
    data: [30, 70, 100],
  }]
}

const chart = Highcharts.chart('container', options)

setTimeout(() => {
  chart.series[0].setData([10, 20, 30])
  resizeChartFromValues(chart)
}, 1000) 
```

现场示例：[https ://jsfiddle.net/a97fgsmc/](https://jsfiddle.net/a97fgsmc/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-06T17:37:30.720

我有同样的问题，我用以下方法解决了它：

```
<div id="container" style="width: 100%; height: 100%; position:absolute"></div> 
```

图表没有特殊选项。即使我调整它的大小，该图表也非常适合浏览器。

# java - 如何忽略已经访问过的域？爪哇 | 汤

> ID：15817443
> 
> 赞同：0
> 
> 时间：2013-04-04T17:08:25.073
> 
> 标签：java, parsing, jsoup

好的，所以我开始 Bing 搜索，然后检索几个结果 url，并使用它们作为起点来遍历其他页面，解析它们的链接并将它们添加到列表中。

我遇到的问题是，我不想访问同一个域两次。我可以阻止它访问相同的 URL，但如果一个页面链接到网站的另一部分（例如关于页面），我不能。目前，我有一个 LinkedList，每次使用 Jsoup 从文档中解析一个 URL 时，我都会在其中添加一个 URL。我有一个 HashMap 用于存储已经访问过的 URL。因此，我将其设置为这样的基本“如果”：

```
if(!urlsVisited.containsKey(url))
{
    urlsToVisit.add(url);
    urlsVisited.put(url, url); 
} 
```

这是在一个 for 循环中，我在其中检索每个页面上的链接（当前 4 个线程处理 4 个页面）。

这会阻止它两次添加“ [http://www.stackoverflow.com ”之类的内容，但如果我遇到“](http://www.stackoverflow.com) [http://www.stackoverflow.com/questions/ask](http://www.stackoverflow.com/questions/ask) ”则不起作用。

我想从 StackOverflow 添加一个链接（例如），然后使用该域完成。有任何想法吗？

我在 Java 中使用 Jsoup api 来解析结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:15:51.790

使用 java.net.URL 类提取主机名，并将其用作 urlsVisited 映射的键。

[http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getHost()](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getHost())

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:38:47.970

您可以使用`URI`类来解析您的 URL。我还建议用于`Set<String>`存储访问过的域：

```
Set<String> urlsVisited = new HashSet<String>();
...

String domain = new URI(url).getHost();
if(!urlsVisited.contains(domain))
{
    urlsToVisit.add(url);
    urlsVisited.add(domain); 
} 
```

# javascript - 更改 JWPlayer 替换 DIV 的方式

> ID：15817444
> 
> 赞同：1
> 
> 时间：2013-04-04T17:08:25.507
> 
> 标签：javascript, jwplayer

使用 JWplayer，我注意到当它（javascript）加载播放器时，它用 < p > 替换了 < div >，这会在容器中产生一个空间。

如果您不熟悉 JWplayer 的工作原理，您可以添加一个具有特定 ID 的 <div>。然后在 Javascript 中，您只需告诉它使用该 ID。当播放器被加载时，它只会用播放器替换那个 < div >。

我的问题是我无法筛选 .js 文件以使其停止添加此 < p > 标签。N00b，我知道。

我感谢任何帮助。您可以免费下载 JWplayer 以了解 JS 文件。我正在使用版本 5。

再次感谢。

# apache-flex - faultString = "java.lang.NullPointerException：空"

> ID：15817453
> 
> 赞同：0
> 
> 时间：2013-04-04T17:09:19.143
> 
> 标签：apache-flex

几天来我一直在拉头发，试图找出错误。我有一个带有本地安装的 tomcat 和一个 java 后端的 flex 前端。当我单击按钮执行某些操作时，我在下面收到此错误消息

```
(mx.rpc::Fault)#0
  content = (null)
  errorID = 0
  faultCode = "Server.Processing"
  faultDetail = (null)
  faultString = "java.lang.NullPointerException : null"
  message = "faultCode:Server.Processing faultString:'java.lang.NullPointerException : null' faultDetail:'null'"
  name = "Error"
  rootCause = (Object)#1
    cause = (null)
    localizedMessage = (null)
    message = (null)
    suppressed = (Array)#2 
```

关于从这里去哪里的任何提示？我试过“google-ing”无济于事谢谢

# c# - 日期验证错误（“拆分”无法识别）

> ID：15817455
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:09:21.243
> 
> 标签：c#, arrays, string, validation, date

我正忙于编写代码来验证通过文本框输入的日期。我在以下方面遇到了以下错误`date.Spilt('/')`：

> “'string' 不包含定义'Spilt'，并且找不到接受'string'类型的第一个参数的扩展方法'Spilt'（您是否缺少 using 指令或汇编引用？）”

我输入了`System.Char[]`和`System.String[]`引用，但 C# 无法识别它们。下面是我的代码：

```
//validateDate function returns true/false for entered date
private bool validateDate(string date)
{
    try
    {
        string [] dateParts = date.Spilt('/');
        //creates new date from spilt parts
        DateTime testDate = new DateTime(Convert.ToInt32(dateParts[2]),
                                         Convert.ToInt32(dateParts[0]),
                                         Convert.ToInt32(dateParts[1]));
        return true;     
    }
    catch
    {
        //if no-date entered return false
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:27:22.847

尝试`split`代替`spilt`

你也听说过`DateTime.TryParse`和`DateTime.TryParseExact`吗？

# c++ - C++ libxml xmlNode->children

> ID：15817456
> 
> 赞同：2
> 
> 时间：2013-04-04T17:09:23.953
> 
> 标签：c++, xml-parsing, libxml2

好的，我一直在研究一个类来遍历 html 文档中的所有节点并返回我需要的数据。这非常简单，我已经在 Bash 中实现了这一点，但现在我正在尝试将其移植到 C++。

我从 libxml 站点上的示例开始，但我已逐个节点地逐步完成此功能，但我无法理解它是如何工作的。

这是功能：

```
 static void
print_element_names(xmlNode * a_node)
{
    xmlNode *cur_node = NULL;

    for (cur_node = a_node; cur_node; cur_node = cur_node->next) {
        if (cur_node->type == XML_ELEMENT_NODE) {
            printf("node type: Element, name: %s\n", cur_node->name);
        }

        print_element_names(cur_node->children);
    }
} 
```

所以基本上，这个函数将一个节点分配给一个指针，并开始循环遍历所有兄弟节点，但如果当前节点有子节点，它会调用该函数并在该子节点上重新开始。这一切都很好理解。

所以它会降低文档结构，但它如何导航回结构？

xmlNode->children 找到 NULL 时是否返回下一个父节点？据我所知，这不是真的，但我就是不知道这是如何工作的。

我成功地创建了一个类来做我想做的事，但它比这要复杂得多，而且要长约 10 行。实际上，我必须检查下一个节点是否为空，如果它有子节点，则向下导航，如果没有，则向上导航到下一个节点。

这个例子要简单得多，我想了解如何使我的代码更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:55:28.947

1.  所以它会降低文档结构，但它如何导航回结构？
    您发布的是递归函数。从您的问题的性质来看，我假设您不太了解递归是什么/它是如何工作的。一个快速的谷歌搜索应该会给你一些很好的信息/例子。

2.  xmlNode->children 找到 NULL 时是否返回下一个父节点？
    我假设 xmlNode->children 返回一个指向包含当前节点的所有子节点的链表的指针。如果当前节点没有子节点，它可能会返回 NULL。

3.  这个例子要简单得多，我想了解如何使我的代码更好。
    我假设您编写的课程纯粹是迭代的。递归函数可以极大地简化代码，但在性能方面它们可能会在更大的数据集上引起问题。我肯定会推荐阅读它们；他们可以很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:27:42.000

迭代地解决问题本质上是树遍历。您将需要一个堆栈来完成此操作。堆栈可能最容易实现为单链表。

```
// interface to be implemented
typedef void* Stack;
Stack stack_new();  // creates a new stack
void stack_add(Stack stack, xmlNode *element); // adds an element to the stack
int stack_size(); // returns the number of elements currently in the stack
xmlNode* stack_remove(Stack stack); // pops an element from the stack
void stack_free(Stack stack); // frees up resources used by the stack

// printing code
static void print_element_names(xmlNode *a_node)
{
    Stack stack = stack_new();
    stack_add(stack, a_node);

    while(stack_size(stack))
    {
            xmlNode *cur_node = stack_remove(stack);
            if(cur_node->children) stack_add(cur_node->children);
            xmlNode *iter_node = NULL;
            for (iter_node = cur_node; iter_node; iter_node = iter_node->next)
            {
                if (iter_node->type == XML_ELEMENT_NODE) 
                    printf("node type: Element, name: %s\n", iter_node->name);
            }
    }

    stack_free(stack);
} 
```

# ruby - url重写的小帮助

> ID：15817461
> 
> 赞同：0
> 
> 时间：2013-04-04T17:09:29.233
> 
> 标签：ruby, mod-rewrite, sinatra

我想重定向所有这些类型的请求

```
 http://www.example.com/2013/01/my-sample-post/feed
 or 
 http://www.example.com/2013/01/my-sample-post/feed/ 
```

到

```
 http://www.example.com/2013/01/my-sample-post/ 
```

我正在使用 sinatra 和[rack--rewrite](https://github.com/jtrupiano/rack-rewrite) gem。

```
 rewrite %r{/*/feed?}, '/$1'  // not working.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:13:37.193

您错过了正则表达式中的一个点。您还需要一个包含`()`通配符的捕获组，因此它应该`(.*)`在斜杠之间。我猜你最后也缺少一个斜线。这应该有效：

```
rewrite %r{/(.*)/feed/?}, '/$1' 
```

# c++ - unordered_map::find 不适用于 STL 类型

> ID：15817465
> 
> 赞同：0
> 
> 时间：2013-04-04T17:09:46.780
> 
> 标签：c++, search, find, hashtable, unordered-map

对于 C++ 基本类型，它可以工作

```
unordered_map<string, int> m;
unordered_map<string, int>::iterator itr;
string s;
itr = m.find(s); 
```

它编译没有问题。

但是，当我尝试

```
unordered_map<set<string>, int> m;
unordered_map<set<string>, int>::iterator itr;
set<string> s;

itr = m.find(s); 
```

编译器抱怨我看不懂的东西。有谁知道发生了什么？我必须在这里使用异常吗？

g++ 输出：

```
/tmp/ccdwrdVP.o: In function `std::__detail::_Hash_code_base<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::pair<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const, int>, std::_Select1st<std::pair<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const, int> >, std::equal_to<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, std::hash<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) const':
test_unordermap_find.cpp:(.text._ZNKSt8__detail15_Hash_code_baseISt3setISsSt4lessISsESaISsEESt4pairIKS5_iESt10_Select1stIS8_ESt8equal_toIS5_ESt4hashIS5_ENS_18_Mod_range_hashingENS_20_Default_ranged_hashELb0EE12_M_hash_codeERS7_[std::__detail::_Hash_code_base<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::pair<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const, int>, std::_Select1st<std::pair<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const, int> >, std::equal_to<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, std::hash<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) const]+0x37): undefined reference to `std::hash<std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::operator()(std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >) const'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:14:06.280

[`std::unordered_map`](http://www.cplusplus.com/reference/unordered_map/unordered_map/) is implemented by means of a hash table, so it needs a hash function that can be applied to its key type. The default hash function is the [`std::hash`](http://www.cplusplus.com/reference/functional/hash/?kw=hash) template:

```
template < class Key,
           class T,
           class Hash = std::hash<Key>,
           class Pred = std::equal_to<Key>,
           class Alloc = std::allocator< std::pair<const Key,T> >
           > class unordered_map; 
```

However, `std::hash` is not defined for `std::set`. Therefore you need to either provide a definition of `std::hash<set<string>>`, or else specify your own hash function using the third template parameter of `unordered_map`.

# c# - 卸载程序头脑风暴

> ID：15817467
> 
> 赞同：-3
> 
> 时间：2013-04-04T17:09:56.270
> 
> 标签：c#, windows

我希望能够完成的是静默卸载任何已安装的防病毒软件（我知道这听起来像是我会制造病毒，但我不是）。

根据 Microsoft 指南，每个正确安装的程序都会在 HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall 中创建一个注册表项。通常，程序的键是它的 GUID，或者是程序的名称。在该键中将有一个名为 UninstallString 的条目，因此我猜我只需要在 cmd 中运行该字符串即可。

但我以前从未做过这样的事情，因为我正在集思广益，是否会尝试这样做，以了解更有经验的开发人员如何处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:12:44.197

这是行不通的。

不管你的动机多么纯洁（我承认，尽管你保证，我仍然相当怀疑），这与其他动机不纯的人想要做的事情完全相同。

因此，任何称职的防病毒供应商都在积极努力防止这种情况发生。此外，正如 Matthew 所指出的，微软也在与你作对。为了完成这项工作，您必须想办法绕过整个 Windows 安全模型。

我想你可以与他们展开一场军备竞赛，但他们可能比你有更多的资源可以投入到这个问题上，并且可以从解决它中获得更多的收益。而且，用户是这里损失最大的人。未经用户同意就卸载程序不仅对用户极为不利，而且如果软件供应商将时间锁定在军备竞赛中，他们并没有利用这些时间、精力和精力以有意义的方式改进他们的软件。

我强烈建议在你浪费太多时间之前放弃头脑风暴。当然，有更好的方法来解决您正在处理的任何任务。

# css - 在 Internet Explorer 9 中，我的 Tumblr 主题中的内容浮动在侧边栏上方。我该如何解决这个问题？

> ID：15817472
> 
> 赞同：0
> 
> 时间：2013-04-04T17:10:11.043
> 
> 标签：css, internet-explorer-9, tumblr

这是我的 Tumblr 主题。

[http://lt-chocolate.tumblr.com/](http://lt-chocolate.tumblr.com/)

我在 Internet Explorer 上检查了它，内容漂浮在侧边栏上方。无论如何我可以修复它吗？

这是我为内容部分准备的 CSS。

```
#content {
background-color: #F2EBD9;
float: right;
width: 1200px;
height: 100%;
margin-right: 25px;
position: relative;
bottom: 296px;
clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:17:54.173

我在萤火虫中试过这个，它对我有用

```
#sidebar {
    float: left;
    position: relative;
    margin-top: 30px;
    width: 350px;/*change this size to your needs*/
}
#content {
    background-color: #F2EBD9;
    float: left;
    margin-right: 25px;
    position: relative;
    width: 800px;/*change this size to your needs*/
} 
```

# java - 更新 Java Swing 中的主要 GUI 元素

> ID：15817474
> 
> 赞同：0
> 
> 时间：2013-04-04T17:10:15.983
> 
> 标签：java, swing

我正在尝试更新 java swing 应用程序中的主 gui，因此有一个可运行的线程使主 gui 可见，但问题是它在 main 中调用，而 main 是一个静态函数。我想说的是 Element.SetTtext。但是我要更新的所有调用都不是静态的。那么如何在主 GUI 中更新标签、..等？

```
public static void main(String args[])
    {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() 
            {
                new AGC().setVisible(true);
          // code to update labels here
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:18:25.037

需要更清楚一点，你什么时候要更新标签？它是基于一个事件吗？

您始终可以保留要更新的组件的全局变量，并从事件处理程序中访问它。

您能否用代码更新您的问题，以便更清晰？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:31:53.540

我从您的问题中了解到的是，您认为静态意味着不可更改。Java 并非如此。在 Java 中，永远不会改变的对象和组件被描述为**final**。

保持你的主要简单和小，让你的循环和变化`doThings();`

这是一个计时器，用于更新 JLabel 的文本：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;

public class Foo extends JFrame {

    public Foo() {
        jLabel1 = new JLabel("label 1");
        jPanel1 = new JPanel();
        jPanel1.add(jLabel1);
        add(jPanel1);
        pack();
        // code to update whatever you like here
        doThings();
    }

    private void doThings() {
        // code to update whatever you like here
        ActionListener actionListener = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent actionEvent) {
                jLabel1.setText("foo " + (j++));
            }
        };
        Timer timer = new Timer(500, actionListener);
        timer.start();
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Foo().setVisible(true);
            }
        });
    }
    private JLabel jLabel1;
    private JPanel jPanel1;
    private int j = 0;
} 
```

# java - 避免 RecursiveLockImpl01Unfairish.lock RuntimeException（超时）？

> ID：15817476
> 
> 赞同：0
> 
> 时间：2013-04-04T17:10:18.983
> 
> 标签：java, processing, jogl

我有一个在启动时加载一系列大图像的应用程序。这是一个[处理](http://processing.org/)应用程序，所以大多数事情都在单个主动画线程上运行，并且它使用处理的 OpenGL 渲染器。

**编辑：**当 JOGL 中的某个进程花费 > 5 秒时，将引发 RuntimeException。将堆栈备份到后续`loadImage()`调用意味着避免了 RuntimeException。我还不清楚如何重现这一点，因此还没有找到解决方法来保存丑陋的 try-catch + 反射解决[方法](http://forum.jogamp.org/jogamp-common-util-locks-RecursiveLockImpl01Unfairish-lock-timeout-exception-td3999944.html)。

~~图像加载有时需要超过 5 秒，当它们加载时，JOGL 从内部抛出一个 RuntimeException `RecursiveLockImpl01Unfairish.lock()`。~~我的理解是，`RecursiveLockImpl01Unfairish.lock()`如果主 GL 动画线程停止执行 > 5 秒，则会抱怨。

~~有一个简单的解决方法吗？我*可以*将图像加载转移到不同的线程并重新调整我的初始化序列以使其更加异步，但是对于只发生一次的事情，在应用程序初始化时，在应用程序有足够的时间启动时，这是很多工作不管。~~

（注意：这是为了安装，早上第一次启动时没有人在场或尝试使用该应用程序，因此在初始化时延迟几秒钟不是问题。）

# doctrine-orm - Zend2 Doctrine2 One-To-Many 单向连接表，删除级联问题

> ID：15817480
> 
> 赞同：1
> 
> 时间：2013-04-04T17:10:27.397
> 
> 标签：doctrine-orm, zend-framework2, cascade, one-to-many, joincolumn

我在以下方面遇到了一些问题......我有一张带有电话号码的表格。我想为用户和公司使用同一张表。一个用户也可以有多个电话号码和一个公司。所以我想要一个与两个不同连接表的一对多单向关系。一个将电话号码链接到用户，另一个将电话号码链接到公司。这是遵循此处找到的教义2手册第5.9章的解决方案：（[单击）](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#one-to-many-unidirectional-with-join-table)

我的用户实体持有此代码：

```
/** @ORM\ManyToMany(targetEntity="Application\Entity\PhoneNumber")
  * @ORM\JoinTable(name="user_phone_number_linker",
  *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
  *      inverseJoinColumns={@ORM\JoinColumn(name="phone_number_id", referencedColumnName="id")}
  *      )
  */
  protected $phone_numbers; 
```

我使用单向一对多，因为问题是我不能制作双向的，因为如果我返回给用户，我不能为公司使用相同的电话号码实体类。现在一切正常，但是当我删除电话号码时，出现以下错误：执行“DELETE FROM phone_number WHERE id = ?”时发生异常 带参数 {"1":1}：

SQLSTATE [23000]：完整性约束违规：1451 无法删除或更新父行：外键约束失败（`database/user_phone_number_linker`，CONSTRAINT `user_phone_number_linker_ibfk_11`FOREIGN KEY（`phone_number_id`）REFERENCES `phone_number`（`id`））

如果我在数据库中手动设置 ON DELETE CASCADE 值，它可以正常工作，但这不是使用教义 2 的想法，我认为我应该能够在代码中解决它，而无需转到我的 phpMyAdmin 面板。不知何故，应该在删除时启动从电话号码到连接表的级联，但不要从 phone_number 实体返回对连接表的引用。

希望聪明的人能帮我解决这个问题。

## 编辑

与此同时，我学到了更多关于 Doctrine2 的知识，回顾我的老问题让我意识到这不是首先将多个电话号码存储在一个表中的正确方法。为了能够将用户电话号码和公司电话号码存储在同一个表中，我应该使用带有鉴别器列的表继承。该列应包含一些用户/公司鉴别器。

由于该列，ORM 学说将“知道”该电话号码实际上是用户还是公司电话号码。我需要[根据学说 2 specs 中的单表继承映射原则](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html#single-table-inheritance)进行两个不同的实体定义。

一个类`UserPhoneNumber`将与另一个类有`many-to-one`关系，`User`称为与`CompanyPhoneNumber`的`one-to-many`关系`Company`。我不一定需要连接列，`user_id`或`company_id`列可以在电话号码表中。在`User`类`Company`中省略关联，在`Company`类`User`中省略关联（数据库应允许这些列的空值）。

如果我确实使用连接表，它是根据[Doctrine2 规范中的一对多单向连接表描述](http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#one-to-many-unidirectional-with-join-table)

## 阅读更多

[否则，您还可以在这个精心制作**的 Doctrine2 深入**网站](http://www.krueckeberg.org/notes/d2.html#cascade-and-associations)上阅读更多关于关联和级联问题的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:34:21.327

正如你所说，你的关系是单向的。您已经定义了从用户到电话号码的关系。当您删除用户时，级联删除将起作用，它将删除 user_phone_number_linker 中的所有行，因为这是您定义的关系。

如果您想以另一种方式进行操作，则必须创建从 PhoneNumbers 到 Users 的关系。教义需要它为你工作。但是您遇到的问题是该实体由其他两个实体用户和公司共享。

请记住，实体是对象，而不是表。因此，您可以尝试为同一个表创建两个实体，一个名为 PhoneNumberUsers，另一个名为 PhoneNumberCompanies。这样您就可以创建所需的关系来执行级联删除。我没有自己测试过，但我认为它可以工作。

顺便说一句，您可以删除用户实体连接表上的 oncascade 参数。对于用户和角色，我有与您相同的场景，但我没有使用它。我认为只有当你想从一个实体级联到另一个实体时才需要它。我不确定，但这就是我到目前为止所经历的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:19:36.233

我的不好，电话号码用户关系被认为是多对多关系，所以如果要删除电话号码，我不仅应该删除电话号码本身，而且还必须从用户中明确删除电话号码. 所以在控制器中是这样的：

```
// Remove the phone number user connection from the database
$user->removePhoneNumber($phone_number);

// Remove the phone number from the database
$em->remove($phone_number); 
```

我只是认为使关系与单向一对多的关系的独特限制足以让教义照顾它。那是不正确的。

# python - 使用 matplotlib 导入 png 文件并保存为子图

> ID：15817483
> 
> 赞同：0
> 
> 时间：2013-04-04T17:10:36.820
> 
> 标签：python, matplotlib

我想导入两个 png 文件并使用 matplotlib 将它们拼接到子图中。我正在按照本[教程](http://matplotlib.org/users/image_tutorial.html)执行此操作。但是当我用 2x2 子图保存图形时，分辨率很差。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:27:37.413

如果在保存之前分辨率令人满意，请尝试使用`dpi`关键字以及`matplotlib.pyplot.savefig()`（参见[matplotlib.pyplot.savefig](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.savefig)的文档页面）。生成绘图后，只需键入

```
from matplotlib.pyplot import savefig
savefig( 'stitched.png', dpi=400 ) 
```

并希望这会产生令人满意的png。

# python - 如果它只能有一个实例，我还应该创建一个类吗？

> ID：15817484
> 
> 赞同：0
> 
> 时间：2013-04-04T17:10:39.477
> 
> 标签：python, oop

我是 OOP 的新手，正在用 Python 编写一个小工具，它使用来自网络的 JSON 加载检查比特币价格`Bitcoin() class`，它监控价格`Monitor()`，在达到阈值时通知用户，`Notify()`并暂时使用控制台界面`Interface()`来执行此操作。

我创建了一个`Bitcoin()`可以从 JSON 负载中读取价格和数量的类。该`__init__`定义使用套接字连接到网络。由于这个类的每个实例都会产生一个新的套接字，所以我只需要/希望这个类的一个实例运行。

1.  上课仍然是解决这个问题的最佳方法吗？
2.  让其他类和实例与我的`Bitcoin()`实例交互的最佳方法是什么？
3.  我应该全局一个`Bitcoin()`实例吗？将实例作为参数传递给每个需要它的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:16:00.557

The first thing which concerns me is the [SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle) violation, your `Bitcoin` class probably shouldn't be responsible for:

*   opening socket,
*   parsing results,
*   rendering output.

I don't know the details but from my point of view you should split that functionality to smaller classes/functions (in case of using only modules), and one of them will be responsible for retrieving data from web. Please also keep in mind that global state is evil (singletons in some contexts could be described as global state).

Another thing which is a smell from my point of view is opening a socket inside the constructor. This isn't testable, of course you could mock/stub socket, but from my point of view it's better when class requires all it's dependencies as a constructor parameter. By doing it that way you could also notice some classes with to wide responsibility (if your constructor requires more that 3,4 parameters it definitely could be simplified).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:44:29.840

如果我是你，我的代码将类似于：（
每组工作的一个类，这不是你正在做的）

```
class Interface:
    ''' Handle UI '''
    ...

class Connect:
    ''' Handle web interface '''
    ...

class Bitcoin:
    ''' Handle the calculations '''
    ...

class Notify:
    ''' Notifier '''
    ... 
```

简而言之，**将您的类拆分为更小的更简单的类**。

现在回答你的问题：

1.  是的，因为您手头有一个“复杂”的问题并且您正在使用 Python，所以创建 OOP 版本肯定比创建非 OOP 版本更容易。因此，除非您有充分的理由不这样做，否则请坚持使用 OOP。
2.  在您的情况下，它也可能将实例作为参数传递。
3.  这是一个好主意。如果您对范围没有很好的了解，这可以消除由范围引起的问题。
    但是请记住，您传递的是引用，而不是值，因此操作实例可以并且将会影响实例传递给的其他类。

> **注意：**在类的构造函数中打开套接字不是一个好主意。如果你有一个方法可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:37:01.950

[http://www.youtube.com/watch?v=o9pEzgHorH0](http://www.youtube.com/watch?v=o9pEzgHorH0)

我不确定该视频与您的项目有多相关（没有实际阅读的代码）。但也许你会回答你的问题。至少你会学到一些新的东西，这就是这里的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:15:01.597

The answer is maybe. Depends upon you whole architecture, You should look at the singleton pattern, because you description yells Singleton all over.

[http://de.wikipedia.org/wiki/Singleton_%28Entwurfsmuster%29](http://de.wikipedia.org/wiki/Singleton_%28Entwurfsmuster%29)

If you don't find any good reason against creating a class in your given architecture, then just go for it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T17:15:25.373

OOP is a tool, not a goal, you can make a decision whether to use it or not. If you use a Python module, you can achieve encapsulation without ever writing "class".

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T17:47:19.143

当然，您可以为此目的使用 python 类。您也可以使用模块级实例（不需要全局关键字或显式传递参数）。恕我直言，这是一个口味问题。

基本上你问的是单例模式 python 特定的实现，这里已经回答了： [Python and the Singleton Pattern](https://stackoverflow.com/questions/42558/python-and-the-singleton-pattern)

模式本身的描述可以在这里找到：[http ://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

# jquery - 在 .click 上，身体应该淡出，但它不会

> ID：15817486
> 
> 赞同：0
> 
> 时间：2013-04-04T17:10:46.583
> 
> 标签：jquery, redirect, fadeout

你好stackoverflower，

我的页面上的以下 javascript 有点问题。目标是，它淡出身体，然后使用 Jquery 进入'parent.history.back'。但不知何故，我没有让它工作。

这是我尝试让身体淡出的方法。

```
$("body").fadeOut(500, redirectPage); 
```

它应该与这里一起使用：

```
$(document).ready(function(){
$('.back').click(function(){
    parent.history.back();
    return false;
});
}); 
```

有人可以帮助我，将它们放在一起，以便它们工作吗？感谢拯救我一天的人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:15:08.837

```
$('.back').click(function(){
    $('body').fadeOut(500, function() {
        parent.history.back();
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:16:16.530

```
$('.back').click(function(){
    $("body").fadeOut(500, function(){
        history.back();
        return false;
    });
}); 
```

# .net - WCF 中的绑定错误

> ID：15817496
> 
> 赞同：1
> 
> 时间：2013-04-04T17:11:01.500
> 
> 标签：.net, wcf, web-services, visual-studio

我按照此处的说明进行操作：http: [//msdn.microsoft.com/en-us/library/ms731774](http://msdn.microsoft.com/en-us/library/ms731774(v=vs.110).aspx) (v=vs.110).aspx ，但绑定时出现错误。配置

```
 <bindings>
  <wsHttpBinding>
    <binding name="wsHttpBinding_Inventory">
      <security mode="Message">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service name="Viopsys.API.V_1_0.Inventory" behaviorConfiguration="MyServiceBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Viopsys.API/V_1_0/Inventory" />
      </baseAddresses>
    </host>
    <endpoint address="PurchaseOrder" binding="wsHttpBinding_Inventory" contract="Viopsys.API.V_1_0.IPurchaseOrder">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
  </service>
</services> 
```

错误

```
System.Configuration.ConfigurationErrorsException: Configuration binding extension 'system.serviceModel/bindings/wsHttpBinding_Inventory' could not be found. Verify that this binding extension is properly registered in system.serviceModel/extensions/bindingExtensions and that it is spelled correctly.
   at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
   at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at System.ServiceModel.Activation.AspNetEnvironment.UnsafeGetSectionFromConfigurationManager(String sectionPath)
   at System.ServiceModel.Configuration.ConfigurationHelpers.UnsafeGetAssociatedSection(ContextInformation evalContext, String sectionPath)
   at System.ServiceModel.ServiceHostBase.LoadConfigurationSectionInternal(ConfigLoader configLoader, ServiceDescription description, String configurationName)
   at System.ServiceModel.ServiceHost.ApplyConfiguration()
   at System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses)
   at System.ServiceModel.ServiceHost..ctor(Type serviceType, Uri[] baseAddresses)
   at Microsoft.Tools.SvcHost.ServiceHostHelper.CreateServiceHost(Type type, ServiceKind kind)
   at Microsoft.Tools.SvcHost.ServiceHostHelper.OpenService(ServiceInfo info) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:17:58.020

我想说链接的 MSDN 文章中有一个错误。他们将 bindingConfiguration 放入 binding 属性中。正确的端点配置如下所示：

```
<endpoint address="PurchaseOrder" 
          binding="wsHttpBinding" 
          bindingConfiguration="wsHttpBinding_Inventory"
          contract="Viopsys.API.V_1_0.IPurchaseOrder">
  <identity>
    <dns value="localhost" />
  </identity>
</endpoint> 
```

MSDN 文章中甚至还有另一个错误（您已经做对了）：他们将绑定定义为

```
<bindings>
  <WSHttpBinding>
   ...
  </WSHttpBinding>
</bindings> 
```

但它必须是

```
<bindings>
  <wsHttpBinding>
   ...
  </wsHttpBinding>
</bindings> 
```

# python - 在 Pandas 中对 Pivoted DataFrame 执行数据分析

> ID：15817498
> 
> 赞同：0
> 
> 时间：2013-04-04T17:11:05.913
> 
> 标签：python, database, pandas, dataframe

我正在从数据库加载数据，并创建一个 DataFrame，

```
db_resultset = self.result.fetchall()
df = DataFrame(db_resultset)
df.columns = self.result.keys()
pivoted_data = df.pivot(index='id', columns='item')

    data =
    id  item  val
     1    A    10
     2    A    25
     1    B    12
     1    C    15
     2    C    2
     1    D    7
     2    D    9
     ...

    pivoted_data =
         A    B    C    D
    1   10   12   15    7
    2   25   NaN   2    9
    ... 
```

我想计算诸如成对相关性之类的东西`pivoted_data.corr()`，这会导致以下错误：

```
File "/.../pandas/core/frame.py", line 4469, in corr
    numeric_df = self._get_numeric_data()
  File "/.../pandas/core/frame.py", line 4989, in _get_numeric_data
    return self.ix[:, []]
  File "/.../pandas/core/indexing.py", line 34, in __getitem__
    return self._getitem_tuple(key)
  File "/.../pandas/core/indexing.py", line 224, in _getitem_tuple
    retval = retval.ix._getitem_axis(key, axis=i)
  File "/.../pandas/core/indexing.py", line 342, in _getitem_axis
    return self._getitem_iterable(key, axis=axis)
  File "/.../pandas/core/indexing.py", line 408, in _getitem_iterable
    not isinstance(keyarr[0], tuple)): 
```

对一组数据进行分析的最佳方法是什么？我曾想过将其转换`pivoted_data`为 DataFrame，但这似乎不是一个理想的解决方案。

****编辑：**

回应杰夫的评论：

```
pivoted_data.get_dtype_counts() =
object    319 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:39:50.333

不确定它是否正确地将行读入数据框中。尝试：

```
df = pd.DataFrame.from_records(db_curr.fetchall(),
                               index=["id", "item"],
                               columns=[col_desc[0] for col_desc in db_curr.description])
df = df.unstack() 
```

最后一行生成旋转数据。

# file - 如何将文本文件中的数据组织到表格中？

> ID：15817503
> 
> 赞同：0
> 
> 时间：2013-04-04T17:11:20.943
> 
> 标签：file, text

我有一个非常模糊的文本文件。我想将文本文件中的数据排列到表格中，以便对其进行组织。

```
static void main(string[] args) {
     string fileName = @"C:\Users\Desktop\store.txt";

     using (System.IO.StreamReader sr = new System.IO.StreamReader(fileName))
     {
         String line;
         while ((line = sr.ReadLine()) != null) {
             Console.WriteLine(line);
         }
     }
} 
```

通过这样做 .i 可以显示该文件。

**输出**

id:1 书 id:2 学院 id:3 教授

我想在表格中组织这些数据：

**预期输出：**

ID -------------- 大学

* * *

1 ----------------书

2 -------------- 院校

3------------教授

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:16:29.120

假设 id 应该是唯一的，将值存储在地图中。ID 作为键。除非通过表格，否则您的意思是视觉表示。您将不得不阅读每个字符串（以空格分隔），而不是逐行阅读。解析每个字符串。

# drupal - 在 drupal 中导入带有图像的 RSS 提要

> ID：15817506
> 
> 赞同：0
> 
> 时间：2013-04-04T17:11:34.460
> 
> 标签：drupal, rss, drupal-modules

我希望将来自汽车站点的 RSS 提要导入我的 drupal 站点，其中包含来自该站点的图像，但我对如何执行此操作一无所知。任何帮助都感激不尽。这是该 RSS 提要的链接 ( [http://www.carbuzz.com/rss/news.xml](http://www.carbuzz.com/rss/news.xml) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:17:44.253

正如 Soni Kishan 所提到的，您可能希望使用[Feeds 模块](http://drupal.org/project/feeds)来导入图像和其他内容。提要应该包含您需要的一切（支持 RSS），因此不值得检查提要导入模块（不支持 RSS）。

[Mustardseed Media](http://mustardseedmedia.com/podcast/episode55)有一个关于如何使用该模块的很棒的教程（不到 12 分钟）。我目前还使用 Feeds 模块从在线商店获取价格并更新我的数据库，它完美无缺！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:17:39.353

检查这两个模块，他们会帮助你.. [http://drupal.org/project/feeds](http://drupal.org/project/feeds) [http://drupal.org/project/feed_import](http://drupal.org/project/feed_import)

# .net - .NET Winforms 组合框的显示格式为大写

> ID：15817507
> 
> 赞同：2
> 
> 时间：2013-04-04T17:11:38.757
> 
> 标签：.net, winforms, combobox, formatting

我有一个 Process 类型的对象数组，我想在组合框中显示这个列表，按字母顺序排列并且全部大写。

Process 对象属性“ProcessName”是“DisplayMember”；它是一个只读属性。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        //get the running processes
        Process[] procs = Process.GetProcesses();
        //alphabetize the list.
        var orderedprocs = from p in procs orderby p.ProcessName select p;
        //set the datasource to the alphabetized list
        comboBox1.DataSource = orderedprocs.ToArray<Process>();
        comboBox1.DisplayMember = "ProcessName";

        // Make the display member render as UPPER CASE???
        //comboBox1.FormatString

    } 
```

我怀疑答案在于 FormatString

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:52:00.617

您可以通过订阅`Format`事件在添加每个项目时对其进行格式化。

```
comboBox1.Format += (s, e) =>
    { 
         e.Value = e.Value.ToString().ToUpperInvariant();
    }; 
```

但请注意，当您执行此操作时，将选择第一项，因此您的`SelectedValueChanged`事件将触发，除非您在附加`Format`事件处理程序之前附加`SelectedValueChanged`事件处理程序。

# c# - DataView RowFilter 确定一个 DateTime 列是否大于另一个 DateTime 列加上 6 个月

> ID：15817512
> 
> 赞同：0
> 
> 时间：2013-04-04T17:11:50.147
> 
> 标签：c#, winforms, datetime, dataview, rowfilter

我有一个有两列的数据视图。A 和 B 的每一列都有一个 DateTime 类型的日期。

我想过滤数据视图以仅显示 A 中的日期大于 B 中的日期加上 6 个月的行

A > (B+6个月)

这是我尝试过的，但没有成功。

```
DataView.RowFilter = "A > System.DateTime(B).AddMonths(6)";

DataView.RowFilter = "A > B.AddMonths(6)"; 
```

我感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:28:09.343

我不是 C# 专家，但我相信您可以使用 Linq 创建 DataView，如下所示：

```
DataTable dt = new DataTable("MyTable"); // example data container

...

DataView dv = (from d in dt.AsEnumerable() where ((DateTime)d["A"]) > ((DateTime)d["B"]).AddMonths(6) select d).AsDataView(); 
```

# xpages - 在 DataView 控件上添加备用行颜色

> ID：15817514
> 
> 赞同：0
> 
> 时间：2013-04-04T17:11:56.820
> 
> 标签：xpages, xpages-extlib

我正在尝试为我的 DataView 控件设置另一种颜色；我尝试了 rowStyleClass 和 rowStyle 但我无法让它工作。

rowStyleClass 只给我悬停颜色

我正在做的是使用 jQuery 片段：

> ```
>  $().ready(function() {
>       // Apply alternate color row to DataView            
>       $(".lotusTable > tbody > tr:odd").addClass("odd");
>       $(".lotusTable > tbody > tr:not(.odd)").addClass("even");
>    }); 
> ```

这可行，但是，如果执行部分刷新（更改页码；添加行等），我会丢失格式。

任何想法如何使用 DataView 属性来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:48:31.693

试试这个 CSS，它在视图控件中非常适合我。我目前没有使用 jQuery。在视图控件中，我将“rowClasses”设置为“evenrow,oddrow”。当然，Data View 没有 rowClasses，所以尝试将 rowStyle 或 rowStyleClass 设置为“evenrow,oddrow”，看看这是否给出了您想要完成的任务。

```
.oddrow { 
background-color: rgb(218, 234, 245);
}
.evenrow {
background-color: rgb(255, 255, 255);
}
.evenrow:Hover {
 background-color: rgb(288, 250, 221);
}
.oddrow:Hover {
background-color: rgb(288, 250, 221);
} 
```

# cocos2d-iphone - 使用 Cocos2D 和 Box2D 滚动背景

> ID：15817518
> 
> 赞同：1
> 
> 时间：2013-04-04T17:12:14.547
> 
> 标签：cocos2d-iphone, scroll, box2d

我正在尝试创建一个简单的游戏，该游戏主要包括一个滚下斜坡的球。玩家唯一的控制是让球跳跃。我的问题是，什么是让它看起来滚动的最佳方式，同时通常将球保持在屏幕上的同一位置？我考虑过 CCCamera，但它似乎不是最好的选择，因为我想要一个重复的背景图像。手动滚动背景也给我带来了麻烦，因为不清楚如何让球留在一个地方，同时让 Box2D 处理物理。我会很感激任何帮助，因为我已经坚持了很长一段时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:16:42.127

在绘制游戏内容的图层上使用[CCFollow](http://www.learn-cocos2d.com/api-ref/KoboldTouch/latest/cocos2d-iphone/html/interface_c_c_follow.html)，让它跟随球精灵：

```
[gameLayer runAction:[CCFollow actionWithTarget:ball]]; 
```

# nmea - 使用 Erlang，POSIX 时间中的“时间戳”如何从公历日期和时间派生？

> ID：15817524
> 
> 赞同：1
> 
> 时间：2013-04-04T17:12:38.743
> 
> 标签：nmea, gtfs

我正在编写一个程序，它以 GPRMC NMEA 语句的形式接收数据并按照 GTFS-realtime 的指定输出。

GTFS-realtime 想要一个“时间戳”值，并将其描述为：

> 测量车辆位置的时刻。在 POSIX 时间（即自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数）。

这是一个完整的 GPRMC 句子，相关字段以粗体显示：

`$GPRMC,`**123519** `,A,4807.038,N,01131.000,E,022.4,084.4,`**230394**`,003.1,W*6A`

上面告诉我，读数是在`12:35:19`上进行的`23/03/94`。

根据[http://www.epochconverter.com/](http://www.epochconverter.com/)，此日期和时间`767104519`以 POSIX 时间表示。

使用 Erlang，从 GPRMC NMEA 句子中导出 POSIX 时间戳的最佳方法是什么？

# c# - WPF - 确定哪个控件在 ScrollViewer 的 Canvas 中可见

> ID：15817525
> 
> 赞同：0
> 
> 时间：2013-04-04T17:12:40.853
> 
> 标签：c#, wpf, window, visibility, scrollviewer

我在 xaml 页面中有这样的内容：

```
<ScrollViewer x:Name="PreviewvideosScrollViewer" HorizontalScrollBarVisibility="Auto" Width="1366" Height="480" VerticalScrollBarVisibility="Disabled">
            <Canvas x:Name="VideoCanvas" HorizontalAlignment="Left">
            </Canvas>
</ScrollViewer> 
```

在代码中，我向画布添加了许多控件，其中许多控件不在窗口中。如何确定哪些控件可见（用户在屏幕中看到），哪些不可见？

我试过这样的示例代码：

```
private bool IsUserVisible(FrameworkElement element)
    {
        if (!element.Parent.Equals(VideoCanvas))
            return true;
        //// position of your visual inside the scrollviewer    
        GeneralTransform childTransform = element.TransformToAncestor(VideoCanvas);
        Rect rectangle = childTransform.TransformBounds(new Rect(new Point(0, 0), element.RenderSize));

        ////Check if the elements Rect intersects with that of the scrollviewer's
        Rect result = Rect.Intersect(new Rect(new Point(0, 0), VideoCanvas.RenderSize), rectangle);
        ////if result is Empty then the element is not in view
        return result != Rect.Empty;
    } 
```

或这个：

```
private bool IsUserVisible(FrameworkElement element, FrameworkElement container)
    {
        if (!element.IsVisible)
            return false;

        var bounds = element.TransformToAncestor(container).TransformBounds(new Rect(0.0, 0.0, element.ActualWidth, element.ActualHeight));
        var rect = new Rect(0.0, 0.0, container.ActualWidth, container.ActualHeight);
        return rect.Contains(bounds.TopLeft) || rect.Contains(bounds.BottomRight);
    } 
```

但两者都不起作用。哪里可能有问题？在滚动查看器中使用画布？或者是其他东西？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:26:13.960

好吧，假设您在 Canvas 中有控制权。

您想获取其相对于 ScrollViewer 的坐标，然后您想检查坐标是否介于 0 和 ScrollViewer.ViewportWidth 和 ScrollViewer.ViewportHeight 之间。

如何将 Canvas 坐标转换为 ScrollViewer 坐标？

首先，我们不考虑滚动，假设 Canvas 比 ScrollViewer 小，它的 Horizo​​ntalAlignment 设置为 Left，VerticalAlignment 设置为 Top。

要获得相对于 ScrollViewer 的 Controls 坐标，使用它很简单：

```
var x = Canvas.GetLeft(YourControl);

var y = Canvas.GetTop(YourControl); 
```

现在假设我们也应用了滚动。

```
var x = Canvas.GetLeft(YourControl) - ScrollViewer.HorizontalOffset;

var y = Canvas.GetTop(YourControl) - ScrollViewer.VerticalOffset;

if(x >= 0 && x <= ScrollViewer.ViewportWidth && y <= ScrollViewer.ViewportHeight)
  return true; // YAY 
```

有道理，不是吗？

# android - 强制网页适合 webview

> ID：15817528
> 
> 赞同：2
> 
> 时间：2013-04-04T17:12:44.857
> 
> 标签：android, webview

我需要两件事：

我需要显示一个显示整个网页（水平）的 webview，并自动将其缩小到显示整个页面边缘到边缘所需的任何宽度。我很好奇这 a) 是否可以完成 b) 如果可以，这是我可以用 WebView 控制的吗，或者 c) 如果我需要修改页面的 HTML 以挤入容器碰巧是什么.

我有一种情况，我需要在缩放到设备大小的 WebView 中显示 Facebook（以及 Twitter 和 Pinterest），并且我想确保 WebView 显示整个页面而不是创建水平滚动条。

然后，我很好奇是否有某种方法可以从 WebView 自动向下滚动到特定坐标，这样我就可以在 Twitter 和 Facebook 顶部的大量横幅下方向下滚动并显示用户的内容而无需他们手动向下滚动。

这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:36:41.983

为了让 WebView 将页面缩小到屏幕宽度，请在代码中使用以下设置。

```
WebView webView = (WebView)findViewById(R.id.webView);
webView.getSettings().setUseWideViewPort(true);
webView.getSettings().setLoadWithOverviewMode(true); 
```

您可以使用：

```
int x = 0, y = THE_NUMBER_YOU_WANT;
view.scrollTo(x,y); 
```

但是，要滚动到网页上的任何位置，确定您必须向下滚动多远将是一项挑战。

# sql - 将单一属性类型 2 表合并到切片快照中

> ID：15817532
> 
> 赞同：0
> 
> 时间：2013-04-04T17:13:11.860
> 
> 标签：sql, plsql, oracle10g, data-warehouse

我有一个表，其中包含指定单个属性的开始和结束日期的行，例如：

```
FK  START_DATE      END_DATE        ServiceA        ServiceB        ServiceC
1   01-Jan-00       18-Feb-05       N               Y               Y
1   19-Feb-05       28-May-08       Y               Y               Y
1   28-May-08                       N               Y               Y 
```

而且我想将这些合并到单个行中，以指定在每个时间段内哪些服务处于活动状态：

```
FK  START_DATE  END_DATE        ServiceA    ServiceB    ServiceC
1   01-Jan-00   18-Feb-05       N           Y           Y
1   19-Feb-05   27-May-08       Y           Y           Y
1   28-May-08                   N           Y           Y 
```

我什至不确定您将如何称呼该过程，目前我已将源表分解为开始和停止日期以及服务名称的列表，并且正在遍历它们翻转标志并在开始更改时输出一行遇到日期或结束，但肯定必须有这种转换的模式或至少一个名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:39:15.197

这是一个分析函数的应用程序：

```
select fk, dte as fromdte,
       lead(dte) over (partition by fk order by dte) as todte,
       sum(A) over (partition by fk order by dte) as A,
       sum(B) over (patition by fk order by dte) as B,
       sum(C) over (partition by fk order by dte) as C
from ((select fk, fromd as dte,
              (case when service = 'A' then 1 else 0 end) as A,
              (case when service = 'B' then 1 else 0 end) as B,
              (case when service = 'C' then 1 else 0 end) as C
       from services
      ) union all
      (select fk, tod,
              (case when service = 'A' then -1 else 0 end) as A,
              (case when service = 'B' then -1 else 0 end) as B,
              (case when service = 'C' then -1 else 0 end) as C
       from services
      )
     ) t 
```

（查询可能有语法错误——未经测试。）

内部`union all`为给定日期的每个服务分配一个“计数器”值。（请注意，“结束日期”可能会偏移 1，具体取决于结束日期的解释方式。）

外部查询进行累积和。在任何给定日期，您都拥有有效的服务。这些的结束日期是序列中的下一个日期。

# php - Filtering results from database with more than one dropdown

> ID：15817533
> 
> 赞同：0
> 
> 时间：2013-04-04T17:13:12.620
> 
> 标签：php, mysql, search

I have incorporated a search function to my website that searches all organizations within a certain zip code and selected radius. This part works well. I am now trying to incorporate a category search as well, so instead of just searching all organizatios within a selected distance of a zip, it searches all organizations in a selected category within a selected distance of a zip. However the search is not detecting the selected category. Any idea why? Here is the code:

```
<?php include('./Connections/ecsdb.php'); ?>
<script type="text/JavaScript">

function MM_goToURL() { //v3.0
  var i, args=MM_goToURL.arguments; document.MM_returnValue = false;
  for (i=0; i<(args.length-1); i+=2) eval(args[i]+".location='"+args[i+1]+"'");
}

</script>
<?php

mysql_select_db($database_ecsdb, $ecsdb);
$query_getCat = "SELECT DISTINCT category FROM food ORDER BY category DESC";
$getCat = mysql_query($query_getCat, $ecsdb) or die(mysql_error());
$row_getCat = mysql_fetch_assoc($getCat);
$totalRows_getCat = mysql_num_rows($getCat);

?>

<a name="top" id="top"></a>

  <div style="float:right;">

    <?php

    $my_loginbutton =   "<input name=\"toLogin\" type=\"button\"  onclick=\"MM_goToURL('parent','./login/');return document.MM_returnValue\" value=\"Login\" />";
    $my_logoutbutton =  "<input name=\"Logout\" type=\"button\" onclick=\"MM_goToURL('parent','./login/logout.php');return document.MM_returnValue\" value=\"Logout\" />";

    if (isset($_SESSION['MM_Username']))
        echo $my_logoutbutton;
    else
        echo $my_loginbutton;
    ?>

 </div>

  <div id="header" >
 <div style="float:left;"><img name="Alpha Accounting logo" src="./images/banner.png" width="800" height="140" border="0" alt="Alpha Accounting"></div>
 <div style="margin: 10px 0 0 5px; float:left;"></div>
 <div id="search">
 <h2> Search for Organizations</h2>
 <br>

<form action="../caretest/search.php" method="post">

<label name="category">
    Category:
        <select name="category"> 
          <?php
    do {  
    ?>
              <option value="<?php echo $row_getCat['category']?>"><?php echo $row_getCat['category']?></option>
              <?php
    } while ($row_getCat = mysql_fetch_assoc($getCat));
      $rows = mysql_num_rows($getCat);
      if($rows > 0) {
          mysql_data_seek($getCat, 0);
          $row_getCat = mysql_fetch_assoc($getCat);
      }
    ?>
    </select>
    </label>

  <label>Enter your ZIP Code:
  <input maxlength="5" name="zipcode" size="6" type="text" /></label> </br>

 <label>Select a distance:</label>
 <select name="distance">
 <option>5</option>
 <option>10</option>
 <option>25</option>
 <option>50</option>
 <option>100</option>
 </select>

<input name="submit" type="submit" value="search" />

</form>

<?php
        if(isset($_POST['submit'])) {
            if(!preg_match('/^[A-Za-z]{3-50}$/', $_POST['category'])){
                echo "<p><strong>You must select a category. </strong> Please try again.</p>\n";
            }
            if(!preg_match('/^[0-9]{5}$/', $_POST['zipcode'])) {
                echo "<p><strong>You did not enter a properly formatted ZIP Code.</strong> Please try again.</p>\n";
            }
            elseif(!preg_match('/^[0-9]{1,3}$/', $_POST['distance'])) {
                echo "<p><strong>You did not enter a properly formatted distance.</strong> Please try again.</p>\n";
            }
            else {
                //connect to db server; select database
                $link = mysql_connect($hostname_ecsdb, $username_ecsdb, $password_ecsdb) or die('Cannot connect to database server');
                mysql_select_db($database_ecsdb) or die('Cannot select database');

                //query for coordinates of provided ZIP Code
                if(!$rs = mysql_query("SELECT * FROM zip WHERE zip_code = '$_POST[zipcode]'")) {
                    echo "<p><strong>There was a database error attempting to retrieve your ZIP Code.</strong> Please try again.</p>\n";
                }
                else {
                    if(mysql_num_rows($rs) == 0) {
                        echo "<p><strong>No database match for provided ZIP Code.</strong> Please enter a new ZIP Code.</p>\n"; 
                    }
                    else {
                        //if found, set variables
                        $row = mysql_fetch_array($rs);
                        $lat1 = $row['latitude'];
                        $lon1 = $row['longitude'];
                        $d = $_POST['distance'];
                        $r = 3959;

                        //compute max and min latitudes / longitudes for search square
                        $latN = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(0))));
                        $latS = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(180))));
                        $lonE = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(90)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));
                        $lonW = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(270)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));

                        //find all coordinates within the search square's area
                        //exclude the starting point and any empty city values
                        $query = "SELECT * FROM zip WHERE (latitude <= $latN AND latitude >= $latS AND longitude <= $lonE AND longitude >= $lonW) AND (latitude != $lat1 AND longitude != $lon1) AND city != '' ORDER BY state, city, latitude, longitude";
                        if(!$rs = mysql_query($query)) {
                            echo "<p><strong>There was an error selecting nearby ZIP Codes from the database.</strong></p>\n";
                        }
                        elseif(mysql_num_rows($rs) == 0) {
                            echo "<p><strong>No nearby ZIP Codes located within the distance specified.</strong> Please try a different distance.</p>\n";                               
                        }
                        else {
                            //output all matches to screen

                            echo"<br />";
                            echo"<br />";
                            //echo "<h2> Organization Search Results</h2>";

                            echo "<table class=\"bordered\" cellspacing=\"0\">\n";
                            echo"<tr><th></th></tr>\n";
                            echo "<h2> Organization Search Results</h2>";
                            echo"<tr><th></th></tr>\n";

                            echo "<tr><th>Agency</th><th>Telephone</th><th>Hours</th><th>Street Address</th><th>City</th><th>State</th><th>Zip</th><th>Website</th><th>Directions</th></tr>\n";
                            while($row = mysql_fetch_array($rs)) {
                                //search for matching zip codes in the organization table
                                if(!$rt = mysql_query("SELECT * FROM food WHERE zip = '$row[zip_code]'")){
                                    echo "<p>Didn't work, try again!</p>";
                                    }
                                else{
                                        while($rowt = mysql_fetch_array($rt)) {
                                            //output results
                                            echo "<tr><td>$rowt[Agency]</td><td>$rowt[Telephone]</td><td>$rowt[Hours]</td><td>$rowt[street_address]</td><td>$rowt[city]</td><td>$rowt[state]</td><td>$rowt[zip]</td><td>$rowt[website]</td><td>";
                                            echo "</td></tr>\n";
                                        }
                                    }
                            }
                            echo "</table>\n<br />\n";
                        }
                    }
                }
            }
        }
    ?>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:27:07.027

在您的提交部分，您执行正则表达式来检查类别是否存在，但您没有进一步使用它......

您需要更新您的查询：

```
$query = "SELECT * FROM zip WHERE (latitude <= $latN AND latitude >= $latS AND longitude <= $lonE AND longitude >= $lonW) AND (latitude != $lat1 AND longitude != $lon1) AND city != '' ORDER BY state, city, latitude, longitude"; 
```

不太确定如何更新查询，因为我无法推断您的食物和 zip 表之间的关系。

# binary - How to convert an integer to binary form in Go and vice versa

> ID：15817536
> 
> 赞同：2
> 
> 时间：2013-04-04T17:13:20.263
> 
> 标签：binary, integer, go

How do i convert an Integer to binary form?

I'm currently working on a program that takes an integer and converts it to binary form. It should also take the binary number and reverse it and convert it back to an integer and print it out.

i.e.

> `12 -> 1100 -> 0011 -> 3`

So the program should basically: Input: 12 Output: 3

```
package main

import (
    "fmt"
    "strconv"
)

var j int

func main() {
    fmt.Scan(&j)
    n := int64(j)
    y := strconv.FormatInt(n, 2)
    fmt.Println(y)
    reverse(y)
}

func reverse(y string) {
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:19:16.993

您可能想使用[encoding/binary](http://golang.org/pkg/encoding/binary/)。

示例（[goplay](http://play.golang.org/p/P_pqIZHC-m)）：

```
package main

import "fmt"
import "encoding/binary"
import "bytes"

func main() {
    j := int32(5247)
    buf := new(bytes.Buffer)
    err := binary.Write(buf, binary.BigEndian, j)
    if err != nil {
        fmt.Println(err)
        return
    }
    var k int32
    err = binary.Read(buf, binary.BigEndian, &k)
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println(k)
} 
```

# html - 为什么图片的一部分被隐藏了

> ID：15817538
> 
> 赞同：0
> 
> 时间：2013-04-04T17:13:31.183
> 
> 标签：html, css

看看[这里](http://dharman.eu/box/index.html)。

在你点击一个瓷砖后，房子精灵应该会附着在这个瓷砖上并完全显示出来。图像需要跨越多个图块但是精灵被相邻的图块覆盖。这是为什么？

```
.div {
    background: none repeat scroll 0 0 red;
    display: inline-block;
    height: 20px;
    width: 20px;
    vertical-align:top;
    transition: all 500ms ease-in-out;
    cursor: url(house.png) 1 20, pointer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:17:42.310

这应该有效：

```
.div img {
    position : absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:18:42.870

这是因为瓷砖的尺寸是 20x20 像素 - 这比你的 PNG 小

# scala - How to extract boolean values from XML to Scala case class

> ID：15817550
> 
> 赞同：0
> 
> 时间：2013-04-04T17:13:53.750
> 
> 标签：scala, xml-parsing, playframework-2.0

I've just started with Scala, so please bear with my newbie question. :) I'm exploring the wonderful powers of XML support in Scala, and came to a task: I have an XML document with a node containing a boolean-like value: `<bool_node>true</bool_node>`. I also have a case class with a boolean field in it. What I want to achieve is to create an instance of that class from the XML.

The problem, obviously, is that for XML `<bool_node>` contains just a string, not boolean. What is the best way to handle this situation? Just try to convert that string to boolean using `myString.toBoolean`? Or some other approach could is better?

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:01:16.020

就个人而言，我喜欢对 XML 使用模式匹配。

最简单的方法是这样的：

```
// This would have come from somewhere else
val sourceData = <root><bool_node>true</bool_node></root>

// Notice the XML on the left hand side. This is because the left hand side is a
// pattern, for pattern matching.
// This will set stringBool to "true"
val <root><bool_node>{stringBool}</bool_node><root> = sourceData

// stringBool is a String, so must be converted to a Boolean before use
val myBool = stringBool.toBoolean 
```

如果这种情况经常发生，另一种可能有意义的方法是定义您自己的提取器：

```
// This only has to be defined once
import scala.xml.{NodeSeq, Text}
object Bool {
  def unapply(node: NodeSeq) = node match {
    case Text("true") => Some(true)
    case Text("false") => Some(false)
    case _ => None
  }
}

// Again, notice the XML on the left hand side. This will set myBool to true.
// myBool is already a Boolean, so no further conversion is necessary
val <root><bool_node>{Bool(myBool)}</bool_node></root> = sourceData 
```

或者，如果您使用 XPath 样式语法，这将起作用：

```
val myBool = (xml \ "bool_node").text.toBoolean 
```

或者，您可以根据需要混合和匹配它们 - 模式匹配和 XPath 语法都是可组合和可互操作的。

# embedded - Register access in ATMEGA32 & Debugging of Serial Communication Atmel Studio

> ID：15817551
> 
> 赞同：0
> 
> 时间：2013-04-04T17:14:03.780
> 
> 标签：embedded, atmel, atmega

I am working upon ATMEGA32 and programming it with the help of Atmel Studio 6.0.............

In ATMEGA32, there are 32 general purpose registers starting from R00 to R31........but how can i use those registers directly in c language in Atmel Studio 6.0.......

R00 = x; instruction does not work...................so i am forced to use integer variables, but i want to use inbuilt registers so i can easily debug it how can i do it??????

My 2nd question is i am using USB to serial asynchronous communication, so while debugging i want that some value should be passes virtually via serial communication so that i can check my code...................how can i do that in Atmel Studio 6.0??????

# python - 使用 tk 的多线程 Python 控制台应用程序中的模糊、可重复的崩溃

> ID：15817554
> 
> 赞同：4
> 
> 时间：2013-04-04T17:14:07.987
> 
> 标签：python, tkinter

在我的多线程（*）控制台应用程序中使用 tk 会导致它在没有堆栈跟踪的情况下崩溃，并给出消息“Tcl_WaitForEvent: Notifier not initialized Abort trap”。

症状是我的所有程序功能都运行良好，直到我打开 tk 窗口 - 然后下一个操作将导致崩溃。

立即搜索发现 Tkinter 相对于 Python 线程并不安全，因此我确保在主线程以外的任何地方都没有调用任何 Tk 函数。崩溃仍在继续。

我损失了几个小时，因为我相信是我使用的特定命令导致程序崩溃——但最终我意识到任何键盘输入都会导致程序崩溃。

经过大量调试，我最终将其归结为一个演示问题的小程序，暴露了我认为是错误或肯定需要 Tkinter 库中文档的功能。

我正在处理我正在调试的这个帖子。我将发布它并回答我自己的问题，希望它能防止下一个人在它上面浪费一天。

--

(* - 是的，它当然需要是多线程的。我有一个用于套接字连接的线程，一个监听麦克风并查找级别的线程，一个驱动我的串行端口的线程等等。在每种情况下，事情我在线程上阅读大部分时间自然会阻塞。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:14:07.987

**解决方案！**

问题是，如果您在与 tk 线程不同的线程中从 Python 的 raw_input 读取数据，则 tk 会崩溃！

一个演示这个问题的小程序在[这里](https://github.com/rec/echomesh/blob/master/code/python/experiments/TkCrashes.py)。如果你运行它，它会很高兴地从第二个线程获得键盘输入——直到你输入命令“tk”，它会打开一个空的 tk 窗口。你可以用那个窗口做任何你喜欢的事情——直到你在控制台窗口中输入并按下回车键，当整个程序崩溃时。

**为什么我在不是主线程的线程中从 raw_input 读取？**

我的程序是一个控制台应用程序，但我控制着许多不同的部分，其中之一是 pi3d OpenGL ES 2.0 图形库，它必须以或接近主 Python 线程的帧速率进行更新。

**如何解决它？**

足够“简单” - 注册 tk 菜单事件并直接获取密钥！除了这是一个糟糕的解决方案，因为您必须模拟控制台已经为您所做的所有事情——删除、左右箭头和诸如此类的事情。但这就是我必须做的。

**该程序是否应该成为一个成熟的传统知识应用程序？**

但我不能那样做——这个程序的全部意义在于你可以通过终端窗口运行它——经常连接到无头机器。坦率地说，我更有可能把它变成一个诅咒程序！

tk 窗口只是整个事情的一小部分 - 如果您没有连接硬件（或者不想一直在脸上闪烁），那么它只是一个在开发时显示模拟灯的窗口。我不会尝试在无头机器上使用它，这很好。

**这是一个错误吗？**

我总是不愿意在不是我自己的软件上贴上这样的标签，但我很难想出任何其他描述。它会导致崩溃，并且该崩溃不会产生任何类型的有用信息。我认为 Tkinter 在从不同线程调用时简单地崩溃有点蹩脚，但至少记录了这种行为（如果你深入研究的话） - 在这种情况下，我正在调用 Python 内置，所以我没有基于期望它会与这个库进行交互，并且没有关于这个问题的文档。

**有没有办法解决？**

我有点希望有一个解决方法——这个单页程序是一长串功能中的一个项目，现在变成了一整天令人头疼的调试会议，我不想这样做至少在此之后再扔一天，因为这段时间实际上都没有产生新功能。

最好的情况是，如果 tk 团队承认这是一个错误并提出了修复方案。但我不希望在一年后在我的桌面上...

所以也许真正最好的事情是如果有某种方法可以让 tk 简单地忽略键盘，而不是崩溃。我用 tk 的“忙”做了一个小实验，但这没有用，而且似乎不是正确的事情。

稍后，我现在正在考虑将照明作为一个独立的程序运行，一个使用 Python 的子进程库的单独子进程，并通过标准输入向它发送文本命令。如果这是唯一正在解决的问题，这将是矫枉过正，但事实上

**知道了。**

用 sys.stdin.readline() 替换 raw_input() 就可以了——至少在演示中（我更新了）。随意下载并自己尝试！

我希望这可以节省其他人的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-19T15:43:13.250

就我而言（如@Tom Swirly 回答下的评论中所述），解决方案是切换到非交互式后端：

```
import matplotlib
matplotlib.use('Agg') 
```

# html - video.js video does not stream in IE

> ID：15817556
> 
> 赞同：0
> 
> 时间：2013-04-04T17:14:08.373
> 
> 标签：html, internet-explorer, video.js

recently I tried to use video.js for playing my videos. It works quite fine but there is one exception: In IE9 the videos are not streamed; it takes a long time until they start playing. Example here: [http://www.ulrichbangert.de/orchid/phalaenopsis/2013-03-20_Phal_I_Hsin_Salmon.php](http://www.ulrichbangert.de/orchid/phalaenopsis/2013-03-20_Phal_I_Hsin_Salmon.php) I used Freemake Video Converter to create the videos (HTML5 mode). Best regards - Ulrich

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:05:18.770

对于其他仍然有问题的人......至少对于 wordpress 插件......

*   该插件将 mp4 类型设置为 video/mp4 ... IE9 不喜欢这样

*   将 mp4 的类型更改为 ... video/x-m4v

我怀疑其他类型的情况可能也是如此，如果它们不会在 IE 中流式传输...

注意：IE9 还存在其他问题，因为某些 mp4 视频的组织方式使 IE 在播放之前读取整个文件。搜索 qt-faststart ...但视频类型阻止了我在 wordpress 中的视频在 IE 中启动。您可以尝试将 IE 的 preload 设置为 false。

# vb.net - 流读取器和写入器冲突

> ID：15817560
> 
> 赞同：0
> 
> 时间：2013-04-04T17:14:21.290
> 
> 标签：vb.net, stream, streamreader, streamwriter

我正在创建一个类，以帮助将一些字符串保存到本地文本文件（我想将它们附加到该文件而不是覆盖，以便它是一个日志文件）。当我使用 streamwriter 编写以查找上一个文本的结尾时，我收到一个错误“文件不可用，因为它正在被另一个进程使用”。我在 MSDN 上查看了这个问题，但得到的帮助很少。我试图消除一些变量，所以我删除了流式阅读器以检查问题是否存在。当我尝试写入该文件时，它工作并且我没有收到任何错误，所以这让我得出结论，问题出现在流读取器中。但我不知道为什么？

这是代码：

```
 Public Sub SaveFile(ByVal Task As String, ByVal Difficulty As Integer, ByVal Time_Taken As String)
    Dim SW As String = "C:/Program Files/Business Elements/Dashboard System Files/UserWorkEthic.txt"
    Dim i As Integer
    Dim aryText(3) As String
    aryText(0) = Task
    aryText(1) = Difficulty
    aryText(2) = Time_Taken
    Dim objWriter As System.IO.StreamWriter = New System.IO.StreamWriter(SW, True)
    Dim reader As System.IO.StreamReader = New System.IO.StreamReader(SW, True)
    reader.ReadToEnd()
    reader.EndOfStream.ToString()
    For i = 0 To 3
        objWriter.WriteLine(aryText(reader.EndOfStream + i))
    Next
    reader.Close()

    objWriter.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:36:04.043

正如 Joel 对先前答案的评论，可以更改锁定的类型。

否则，根据 Neil 的建议，如果尝试使用新阅读器写入文件，则很难不丢失文件中已有的信息。

例如，我建议您将原始文件重命名为临时名称`"UserWorkEthicTEMP.txt"`。使用原始名称创建一个新的文本文件。现在; 在将新数据添加到末尾之前，在两个文件之间读取一行，写入一行。最后删除临时文件，您将拥有包含新详细信息的新文件。如果您有错误，临时文件将用作原始文件的备份。下面的一些示例代码：

`Change file names`

```
Dim Line as string
line=Reader.readline
Do until Line=nothing    
objwriter.writeline(line)
line=reader.readline
loop 
```

`add new values on the end and remove old file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:19:22.543

您正在尝试访问`read`同`write`一个文件，这导致了`lock`争用。将文件的内容存储到变量中，然后将其写回，包括您的新数据到文件中。

```
Psuedo

Reader.Open file
String content = Reader.ReadToEnd()
Reader.Close

Writer.Open file
Loop
    Writer.Write newContent
Writer.Close 
```

# c# - 当相同类型的两个对象具有相同的值时，为什么哈希码会不同？

> ID：15817562
> 
> 赞同：4
> 
> 时间：2013-04-04T17:14:25.783
> 
> 标签：c#, .net, gethashcode

据我了解，GetHashCode 将为共享相同值的两个不同实例返回相同的值。MSDN 文档在这一点上有点模糊。

> 哈希码是一个数值，用于在相等性测试期间识别对象。

如果我有两个相同类型的实例和相同的值，GetHashCode() 会返回相同的值吗？

假设所有值都相同，以下测试会通过还是失败？

SecurityUser 只有 getter 和 setter；

```
 [TestMethod]
    public void GetHashCode_Equal_Test()
    {
        SecurityUser objA = new SecurityUser(EmployeeName, EmployeeNumber, LastLogOnDate, Status, UserName);
        SecurityUser objB = new SecurityUser(EmployeeName, EmployeeNumber, LastLogOnDate, Status, UserName);

        int hashcodeA = objA.GetHashCode();
        int hashcodeB = objB.GetHashCode();

        Assert.AreEqual<int>(hashcodeA, hashcodeB);
    }

/// <summary>
/// This class represents a SecurityUser entity in AppSecurity.
/// </summary>
public sealed class SecurityUser
{
    #region [Constructor]

    /// <summary>
    /// Initializes a new instance of the <see cref="SecurityUser"/> class using the
    /// parameters passed.
    /// </summary>
    /// <param name="employeeName">The employee name to initialize with.</param>
    /// <param name="employeeNumber">The employee id number to initialize with.</param>
    /// <param name="lastLogOnDate">The last logon date to initialize with.</param>
    /// <param name="status">The <see cref="SecurityStatus"/> to initialize with.</param>
    /// <param name="userName">The userName to initialize with.</param>        
    public SecurityUser(
        string employeeName,
        int employeeNumber,            
        DateTime? lastLogOnDate,
        SecurityStatus status,
        string userName)
    {
        if (employeeName == null)
            throw new ArgumentNullException("employeeName");

        if (userName == null)
            throw new ArgumentNullException("userName");

        this.EmployeeName = employeeName;
        this.EmployeeNumber = employeeNumber;
        this.LastLogOnDate = lastLogOnDate;
        this.Status = status;
        this.UserName = userName;
    }

    #endregion

    #region [Properties]

    /// <summary>
    /// Gets the employee name of the current instance.
    /// </summary>
    public string EmployeeName { get; private set; }

    /// <summary>
    /// Gets the employee id number of the current instance.
    /// </summary>
    public int EmployeeNumber { get; private set; }

    /// <summary>
    /// Gets the last logon date of the current instance.
    /// </summary>
    public DateTime? LastLogOnDate { get; private set; }

    /// <summary>
    /// Gets the userName of the current instance.
    /// </summary>
    public string UserName { get; private set; }

    /// <summary>
    /// Gets the <see cref="SecurityStatus"/> of the current instance.
    /// </summary>
    public SecurityStatus Status { get; private set; }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:16:10.670

框架为您的自定义对象计算的哈希码不能保证是相同的。

我相信这是由于框架没有遍历所有字段等并计算它们的哈希码，这对每个对象来说都是一件非常耗时的事情（我可能错了）。

这就是为什么建议您在自己的类型上覆盖`Equals()`and方法的原因。`GetHashCode()`

请参阅：[覆盖 GetHashCode](https://stackoverflow.com/questions/4240467/overriding-gethashcode)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T17:20:50.127

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)：

> GetHashCode 方法的默认实现不保证不同对象的唯一返回值。此外，.NET Framework 不保证 GetHashCode 方法的默认实现，它返回的值在不同版本的 .NET Framework 之间是相同的。因此，此方法的默认实现不得用作散列目的的唯一对象标识符。
> 
> GetHashCode 方法可以被派生类型覆盖。值类型必须重写此方法以提供适合该类型的散列函数并在散列表中提供有用的分布。为了唯一性，哈希码必须基于实例字段或属性的值，而不是静态字段或属性。

这意味着你应该`GetHashCode`在你的类中重写。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T17:18:50.980

`SecurityUser`如果类存储的 ID 随您创建的每个用户而增加，它们可能会有所不同。如果该类使用它来计算其 HashCode，它们可能会有所不同。您不应该依赖`GetHashCode`测试两个对象之间的相等性。

的唯一要求`GetHashCode`是 if `objA.Equals(objB)`，then `objA.GetHashCode() == objB.GetHashCode()`。

有关 的实施的详细信息，尤其是本段，请参阅[此链接](http://msdn.microsoft.com/en-us/library/system.object.gethashcode%28v=vs.90%29.aspx)（“实施者注意事项”部分） ：`GetHashCode()`

> *   如果两个对象比较相等，则每个对象的 GetHashCode 方法必须返回相同的值。但是，如果两个对象比较不相等，则两个对象的 GetHashCode 方法不必返回不同的值。

如果`GetHashCode()`未*在*中覆盖`SecurityUser`，则两个 HashCode 将作为两个对象不同，`objA`并且`objB`是对内存中不同对象的引用（如`new`-Keyword 所示）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T17:21:52.913

C# 中的 HashCode 并不像看起来那么简单。默认情况下，一个类不会为两个相同的实例返回相同的哈希码，您必须自己创建该行为。哈希码在特定场景中用于优化查找，但至少有一位创始开发人员表示，如果他们有机会回去重新开始，GetHashCode() 就不会是基本对象方法之一。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-07T16:52:15.870

在值类型上，`GetHashCode()`将为具有相同值的两个对象返回相同的哈希值。然而`SecurityUser`，它是一个引用类型，因此，它的默认`GetHashCode()`方法（继承自`System.Object`其他人提到的）基于对象的引用返回一个哈希值。由于两个不同的实例`SecurityUser`不共享相同的引用，因此它们不共享相同的哈希码。

您可以通过覆盖`GetHashCode()`方法来覆盖此行为，`SecurityUser`以便计算类*成员*而不是类本身的哈希值。确保你也覆盖`Equals()`了，因为这两种方法是齐头并进的。您还可以考虑覆盖 == 相等运算符。

有关以下实现的一个很好的示例，请参阅这篇文章中接受的答案`GetHashCode()`：[什么是覆盖 System.Object.GetHashCode 的最佳算法？](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)

# matlab - How do i input values of matrix into a specific column in a matrix i have already generated in MATLAB

> ID：15817563
> 
> 赞同：1
> 
> 时间：2013-04-04T17:14:26.927
> 
> 标签：matlab, modeling, population

I am doing a matrix modeling project for a biology class using MATLAB. I set the matrix to all zeroes in a 3 by 100 matrix. ie. Pop_size = zeros(3, 100). How do i then input values to the first column of the matrix. I tried Pop_size(1:3, 1) = (100, 100, 100). It told me i have an error and that it is possibly due to unbalanced brackets. Any help is much appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:18:53.667

您需要使用方括号而不是括号来创建矩阵：

```
Pop_size(1:3, 1) = [100 100 100] 
```

# google-chrome - Page hanging half-way in Google Chrome

> ID：15817565
> 
> 赞同：0
> 
> 时间：2013-04-04T17:14:53.783
> 
> 标签：google-chrome, browser

With the most recent upgrade to Chrome, my client is experiencing a very strange condition when his website's front page occasionally hangs half-way, completely preventing the browser from communicating with the said website until the hung tab is closed (so, opening a new tab next to the stuck one and trying to access the same address results in no content being received at all).

The version of problematic Chrome browser is 26.0.1410.43 beta, which was automatically installed for the majority of user base. Operating system is not affecting the case, as the same results had been seen under Windows and Mac OS X.

The website in question is located here: [http://vmnews.ru](http://vmnews.ru)

It is heavy, but other browsers seem to handle it quite well without hanging.

Do you have any suggestions as to how to troubleshoot Chrome-related issues if they cannot be repeated reliably, and only occur every other refresh or once in two or three attempts to load a page?

Thank you very much.

# unix - 比较列

> ID：15817568
> 
> 赞同：2
> 
> 时间：2013-04-04T17:15:01.930
> 
> 标签：unix, awk

我有两个文件：

文件 1

```
1 
2 
3
4
5 
```

文件2

```
a     0     1    h    f  
b     0     3    h    f
c     0     8    h    f
d     0     5    h    f 
```

我想将 file1 与 file2 的 column3 进行比较并像这样打印 file2 的整行

```
a     0     1     h    f
b     0     3     h    f 
d     0     5     h    f 
```

我尝试使用`awk`，但我正在打印 column3：

```
awk 'NR == FNR {f2[$3]=$1; next} $1 in f2{print f2[$1],$1}' file2 file1 
```

如何从 file2 打印整行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:36:43.937

如果你先给容易得多`file1`：

```
$ awk 'NR==FNR{a[$1];next}$3 in a' file1 file2
a     0     1    h    f
b     0     3    h    f
d     0     5    h    f 
```

这样，`file2`如果字段 3 中的值是 in，您可以轻松地打印整行`file1`。默认块在`awk`is`{print $0}`所以它可以从`$3 in a{print $0}`.

# python - 将数组位置存储在变量中

> ID：15817577
> 
> 赞同：2
> 
> 时间：2013-04-04T17:15:28.433
> 
> 标签：python, arrays

我正在使用 Python 构建一个简单的游戏，将 2D 数组作为棋盘。我的用户可以输入数字来玩，但这些数字与棋盘上的位置并没有很好的相关性。

我可以将数组的位置存储在变量中，这样我每次检查条件时都不必写出 board[x][y] 吗？

所以而不是：

```
if num == 1:
    if board[3][5] == "Z":
        print "Not empty!"
    else 
        board[3][5] = "Z" 
```

我可以用：

```
if num == 1:
    if locationOf1 == "Z":
        print "Not Empty!"
    else
        locationOf1 == "Z" 
```

我想要 locationOf1 做的就是让我参考 board[3][5] 的位置。如何才能做到这一点？

[编辑] 甚至更好（这可能吗？）：

```
locations = *[location of board[5][1],location of board[5][3]]*

if locations[num] == "Z":
        print "Not empty!"
    else
        locations[num]  == "Z" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:29:59.140

基于键存储信息的最简单方法是字典。您可以将值保存为元组：

```
locations = {1: (3, 5), 2: (4,3)}

def get_location(num):
    x, y = locations.get(num, (-1, -1, ))
    if coords != (-1,-1): 
       return board[x,y]
    else:
       return None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:27:30.233

一种简单的方法是为您的二维数组创建一个包装类。封装将为您的游戏板赋予意义并且更易于使用。

例如。

```
Class BoardWrapper {
   private int[][] board;

   public BoardWrapper(int w, int l) {
      board = new int[w][l];
   }

   public locationOf1() {
      if (board[3][5] == "Z") {
         ...
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:29:09.703

好吧，由于您已经有一个数组可供使用，因此您无法进行更快的查找，因为您已经有一个恒定的查找时间。我将使用键为 std::string 和值为 int* (c++) 的映射将“locationof1”形式的字符串映射到指向内存中实际地址的整数指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:44:30.597

如果我理解正确，您想将棋盘坐标映射到单个值，我想这对游戏有一些意义，因为 x,y 坐标听起来很简单。

我会静态映射这些坐标以使用字典对板进行建模，并将另一个字典映射到当前板状态：

```
from collections import defaultdict

board = {
    1: (1, 2),
    3: (3, 4)
}

board_state = defaultdict(str) 
```

然后只需使用位置[x] 来获取或设置状态（“Z”）。

**更新**：

```
def set_value(val, pos):
    assert pos in board
    board_state[pos] = val

def get_value(pos):
    assert pos in board
    return board_state[pos] 
```

只是为了说明一个用例，您当然可以只使用 board_state。这里的断言是可选的，取决于您的代码，您可以在其他地方验证（用户输入等...）

# jquery - Primefaces 是否能够从另一个域获取 jquery？

> ID：15817578
> 
> 赞同：5
> 
> 时间：2013-04-04T17:15:33.277
> 
> 标签：jquery, jsf, jsf-2, primefaces

我在我的 JSF2 应用程序中为我的一些页面使用 primefaces。我想控制页面从哪里获取 jquery.js。有没有办法在 faces-config 或 web.xml 中指定不添加 JQuery javascript 库。

例如不要添加：

```
<script type="text/javascript" src="/myappcontextroot/javax.faces.resource/jquery/jquery.js.jsf?ln=primefaces"></script> 
```

我希望页面输出类似于：

```
<script type="text/javascript" src="http://mydomain.com/jquery/jquery.js"></script> 
```

或者在需要 jquery 库时不输出任何内容。（我将手动将以上内容添加到页面中。）

这甚至可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T18:03:22.390

您基本上需要一个自定义[资源处理程序](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html?is-external=true)`Resource#getRequestPath()`，该处理程序在请求资源时返回所需的外部 URL `primefaces:jquery/jquery.js`。

例如

```
public class CDNResourceHandler extends ResourceHandlerWrapper {

    private ResourceHandler wrapped;

    public CDNResourceHandler(ResourceHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public Resource createResource(final String resourceName, final String libraryName) {
        final Resource resource = super.createResource(resourceName, libraryName);

        if (resource == null || !"primefaces".equals(libraryName) || !"jquery/jquery.js".equals(resourceName)) {
            return resource;
        }

        return new ResourceWrapper() {

            @Override
            public String getRequestPath() {
                return "http://mydomain.com/jquery/jquery.js";
            }

            @Override
            public Resource getWrapped() {
                return resource;
            }
        };
    }

    @Override
    public ResourceHandler getWrapped() {
        return wrapped;
    }

} 
```

要让它运行，请将其映射`faces-config.xml`如下：

```
<application>
    <resource-handler>com.example.CDNResourceHandler</resource-handler>
</application> 
```

JSF 实用程序库[OmniFaces](http://omnifaces.org)提供了一个可重用的解决方案，[`CDNResourceHandler`](http://showcase.omnifaces.org/resourcehandlers/CDNResourceHandler)在您的情况下可以将其配置为

```
<context-param>
    <param-name>org.omnifaces.CDN_RESOURCE_HANDLER_URLS</param-name>
    <param-value>primefaces:jquery/jquery.js=http://mydomain.com/jquery/jquery.js</param-value>
</context-param> 
```

# rsync - rsync 多个远程目录到本地机器保留目录路径

> ID：15817583
> 
> 赞同：45
> 
> 时间：2013-04-04T17:16:01.603
> 
> 标签：rsync

我可以这样使用 rsync 吗：

```
rsync -e ssh root@remote.com:/path/to/file:/path/to/second/file/ /local/directory/ 
```

还是我必须做其他事情？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-04T17:39:27.817

直接从`rsync`手册页：

```
The syntax for requesting multiple files from a remote host is done
by specifying additional remote-host args in the same style as the 
first, or with the hostname omitted.  For instance, all these work:

    rsync -av host:file1 :file2 host:file{3,4} /dest/
    rsync -av host::modname/file{1,2} host::modname/file3 /dest/
    rsync -av host::modname/file1 ::modname/file{3,4} 
```

这意味着您的示例应该在第二条路径之前添加一个空格：

```
rsync -e ssh root@remote.com:/path/to/file :/path/to/second/file/ /local/directory/ 
```

我建议您首先尝试使用`-n`or`--dry-run`选项，以便在实际执行复制（以及可能的删除）之前查看将要完成的操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-10T16:51:03.517

只是@tonin 的一个实际例子。从实时服务器下载特定目录

```
rsync -av root@123.124.137.147:/var/www/html/cls  \
:/var/www/html/index.php \
:/var/www/html/header.inc \
:/var/www/html/version.inc.php \
:/var/www/html/style.css \
:/var/www/html/accounts \
:/var/www/html/admin \
:/var/www/html/api \
:/var/www/html/config \
:/var/www/html/main \
:/var/www/html/reports . 
```

# android - 启用和禁用 WakefulIntentService 的警报

> ID：15817585
> 
> 赞同：0
> 
> 时间：2013-04-04T17:16:11.343
> 
> 标签：android, alarmmanager, intentservice, commonsware-cwac

我正在使用[@Commonsware](https://github.com/commonsguy/cwac-wakeful)的 WakefulIntentService。

在我的实现中，我希望有一个活动来启用/禁用警报。所以我的两个问题是：

1.  如何使用按钮单击等手动启用/禁用活动的警报（警报根据@Commonsware 演示在**OnBootReceiver类的****onReceive**方法中设置）。
***   如何确定是否已经设置了闹钟，所以我不再启用/重新安排它（即如果闹钟每 5 分钟重复一次，我不应该在它即将响起前的 1 分钟重置。）**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:45:46.047

> 如何使用按钮单击等手动启用/禁用活动中的警报

您可以通过调用`set()`、`setRepeating()`或`setInexactRepeating()`on来设置闹钟`AlarmManager`。您可以通过调用取消警报`cancel()`。`AlarmManager`

> 如何确定是否已设置警报

除了自己维护该信息（例如，在 中）之外，没有什么好方法可以做到这一点`SharedPreferences`。**

# android - onDestroy 方法中的弹出窗口

> ID：15817591
> 
> 赞同：0
> 
> 时间：2013-04-04T17:16:26.703
> 
> 标签：android

我想在 onDestroy 方法中弹出一个带有“ok”按钮的弹出窗口。

我试过这个，但我没有解决：

```
@Override
public void onDestroy()
{
    super.onDestroy();

    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setMessage("BlaBla!").setPositiveButton("OK",dialogClickListener).show();
}

DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() 
{
    public void onClick(DialogInterface dialog, int which) 
    {
        switch (which)
        {
        case DialogInterface.BUTTON_POSITIVE:
            //DO nothing
            break;
        }
    }
}; 
```

如果你能帮助我就太好了！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:22:05.270

在 onDestroy 中显示弹出窗口是错误的方法.. 它不起作用.. 您可以在退出活动时显示确认弹出窗口，例如通过覆盖 Back Press..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:21:58.870

我会假设您正在创建的 AlertDialog 正在被破坏，而 MainActivity onDestroy() 正在被调用。您可能想改为在 onStop() 中创建警报对话框。查看活动生命周期：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:56:15.863

想到 2 件事开始一项新活动或使用 Toast

# iis-7.5 - System.ServiceModel.FaultException：无法满足对安全令牌的请求，因为身份验证失败

> ID：15817592
> 
> 赞同：0
> 
> 时间：2013-04-04T17:16:27.290
> 
> 标签：iis-7.5, load-balancing, wcf-authentication

我只在我的网络场中的两个节点之一上收到此错误消息。两个节点之间的代码是相同的，据我所知，IIS 在两个节点上的设置相同。

他们调用的 WCF 服务位于另一台机器上，并且没有锁定任何疯狂的权限。

两个节点都使用匿名身份验证和表单身份验证。两者都有其应用程序池的默认用户，两者都有匿名用户的 IUSR 帐户。我还能检查什么以使节点 2 与节点 1 一致？正如我所说，两台服务器的代码是相同的，我在 IIS 中查看的所有内容也相同。我确定节点 2 上的 IIS 中还有其他一些我不知道的设置，所以如果您能想到其他可以查看的地方，我将不胜感激。

同样，这是抛出的异常（仅在节点 2 上）

> System.ServiceModel.FaultException：由于身份验证失败，无法满足对安全令牌的请求。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:46:36.693

我更改了应用程序池标识，这似乎已修复。不知道为什么他们之前都使用相同的身份......

# asp.net-web-api - 我应该在 DelegatingHandler 中的 ReadAsAsync 之后使用 ContinueWith()

> ID：15817594
> 
> 赞同：3
> 
> 时间：2013-04-04T17:16:29.680
> 
> 标签：asp.net-web-api

假设我有一个 DelegatingHandler 用于记录 api 请求。我想访问请求和响应内容以保存到数据库。

我可以直接使用：

```
var requestBody = request.Content.ReadAsStringAsync().Result; 
```

我在很多例子中看到。还建议似乎知道他们在说什么的人[在这里使用它。](http://forums.asp.net/post/4908922.aspx)顺便说一句，之所以提出这个建议，是因为发帖人最初使用的是 ContinueWith，但遇到了间歇性问题。

在其他地方，[这里](http://weblogs.asp.net/pglavich/archive/2012/02/26/asp-net-web-api-request-response-usage-logging.aspx)，作者明确表示不要这样做，因为它会导致死锁，并建议改用 ContinueWith。此信息显然直接来自 ASP.net 团队。

所以我有点困惑。这两种情况在我看来非常相似，因此似乎相互矛盾。

我应该使用哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T20:48:48.180

你应该使用`await`.

正如我在博客中所描述的那样，其中一个问题`Result`是[它可能导致死锁。](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)

问题`ConfigureAwait`在于，默认情况下，它将在 HTTP 请求上下文之外的线程池上执行延续。

您可以使用这两种方法中的任何一种获得有效的解决方案（尽管正如 Youssef 指出的那样，`Result`性能仍然会次优），但为什么要麻烦呢？`await`为您做这一切：没有死锁、优化线程以及在 HTTP 请求上下文中恢复。

```
var requestBody = await request.Content.ReadAsStringAsync(); 
```

* * *

**.NET 4.0 的编辑：**首先，我强烈建议升级到 .NET 4.5。ASP.NET 运行时在 .NET 4.5 中得到了增强，可以正确处理`Task`基于 的`async`操作。因此，如果您将 WebAPI 安装到 .NET 4.0 项目中，下面的代码可能会或可能不会起作用。

也就是说，如果您想尝试*正确*使用 old-school `ContinueWith`，这样的事情应该可以工作：

```
protected override Task<HttpResponseMessage> SendAsync(
    HttpRequestMessage request,
    CancellationToken cancellationToken)
{
  var context = TaskScheduler.FromCurrentSynchronizationContext();
  var tcs = new TaskCompletionSource<HttpResponseMessage>();
  HttpResponseMessage ret;

  try
  {
    ... // logic before you need the context
  }
  catch (Exception ex)
  {
    tcs.TrySetException(ex);
    return tcs.Task;
  }

  request.Content.ReadAsStringAsync().ContinueWith(t =>
  {
    if (t.Exception != null)
    {
      tcs.TrySetException(t.Exception.InnerException);
      return;
    }

    var content = t.Result;
    try
    {
      ... // logic after you have the context
    }
    catch (Exception ex)
    {
      tcs.TrySetException(ex);
    }
    tcs.TrySetResult(ret);
  }, context);
  return tcs.Task;
} 
```

现在很清楚为什么`await`要好得多……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T20:02:39.203

调用 .Result 同步阻塞线程，直到任务完成。这不是一件好事，因为线程只是在等待异步操作完成。

如果您使用的是 .NET 4.5，您应该更喜欢使用 ContinueWith 甚至更好的 async 和 await。这是一个很好的资源，可以让您了解更多信息：

[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

# python - 将 CSV 记录解析为类列表

> ID：15817596
> 
> 赞同：1
> 
> 时间：2013-04-04T17:16:35.227
> 
> 标签：python, parsing, csv

我在 StackOverflow 上的第一篇文章，虽然我已经读了几年书了！

我正在使用 Python 清理和分析 IV 曲线的 CSV 数据转储。

我的基本问题是数据记录器给我的格式：每隔几分钟，在一个时间点上，它需要大约 100 次电压 (v)、电流 (i) 和功率 (p) 测量值，并将它们转储到一个CSV 文件。下一个测量值被附加到此。所以，我们得到的数据结构是：

```
Date1;0.2;0.1;0.02
Date1;0.3;0.1;0.03
Date1;0.4;0.1;0.04
Date2;0.2;0.1;0.02
Date2;0.3;0.1;0.03
Date2;0.4;0.1;0.04
Date3; etc... 
```

此数据存储在文件 Data.csv 中

我写了一个名为 IVCurve 的类：

```
class IVCurve:
    def __init__(self, datetime):
        self.datetime = datetime
    v = []
    i = []
    p = [] 
```

我想创建这些类实例的列表：

```
count = -1
thelist = []
prev_time = 0

import csv

with open('Data.csv', 'rb') as IVdump:
    IVdata = csv.reader(IVdump, delimiter=';')
    for datetime, v, i, p in IVdata:
        # if we're onto a new date
        if prev_time != datetime:
            # note the new record
            prev_time=datetime
            #go to the next position in thelist[]
            count +=1
            #create a new curve
            thelist.append(IVCurve(datetime))
        # in any case, put the values of v, and i into this thelist[count]
        thelist[count].v.append(float(v))
        thelist[count].i.append(float(i))
        thelist[count].p.append(float(v)*float(i)) 
```

我遇到的问题是 v 和 i 的所有值都放置在 thelist[] 的每个实例中，即，我得到了 IVCurve 实例的列表，每个实例都有不同的日期时间，但每个实例都有相同的一组v、i 和 p（该集合代表所有日期组合的整个数据集）。

我不明白我在这里做错了什么。在我看来，每次 count 增加（每次我们找到一个新日期），thelist[count] 应该是一个新的、唯一的记录。

示例数据（我已与此代码一起使用）我已粘贴在这里： http: [//pastebin.com/Dw4dd7tu](http://pastebin.com/Dw4dd7tu)

所以问题是：如何分离这些值？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:30:32.060

问题是你有

```
class IVCurve:
    def __init__(self, datetime):
        self.datetime = datetime
    v = []
    i = []
    p = [] 
```

这些列表然后是类上的列表。所以类的每个实例都有相同的列表。您希望每个实例的列表都不同，因此您应该在您的`__init__`方法中创建它们。

```
class IVCurve:
    def __init__(self, datetime):
        self.datetime = datetime
        self.v = []
        self.i = []
        self.p = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:05:28.830

这是否提供所需的输出？

```
import csv
import pprint

class IVCurve(object):
    def __init__(self, datetime, v=None, i=None):
        self.datetime = datetime
        self.v = []
        self.i = []
        self.p = []
        if v and i:
            self.add_data(v, i)

    def add_data(self, v, i):
        self.v.append(float(v))
        self.i.append(float(i))
        self.p.append(float(v) * float(i))

    def __repr__(self):
        return 'IVCurve (datetime: {}, v: {}, i: {}, p: {})'.format(
                self.datetime, self.v, self.i, self.p)

thelist = []

with open('Data.csv', 'rb') as ivdump:
    ivdata = csv.reader(ivdump, delimiter=';')
    datetime, v, i, p = next(ivdata)
    thelist.append(IVCurve(datetime, v, i))
    for datetime, v, i, p in ivdata:
        if datetime != thelist[-1].datetime:
            thelist.append(IVCurve(datetime, v, i))
        else:
            thelist[-1].add_data(v, i)

pprint.pprint(thelist) 
```

# android - Android Terminal-IDE：远程登录java（Dalvik）编译报错的解决方法？

> ID：15817600
> 
> 赞同：1
> 
> 时间：2013-04-04T17:16:49.573
> 
> 标签：android, ide, terminal-ide

[当我偶然发现Terminal-IDE](http://code.google.com/p/terminal-ide/)时，我只是在寻找一个不需要root手机的ssh终端，我很高兴我做到了！（更多来自它的创建者[在这里](http://www.spartacusrex.com/terminalide.htm)。）它是一个 Android 开发环境，旨在在称为“Android 手机”的便携式计算机上工作，它包括您可能称之为“无根手机的可访问 Linux 操作系统”。

好的，现在您知道平台是什么，问题是当我启动提供的 sshd 并使用 ssh 远程登录手机时，我似乎无法让任何 java (Dalvik) 机器工作，而在本地键入的相同操作可以正常工作。一个简单的示例是 Hello World 教程，您可以在其中运行 java 编译器：

```
# javac hello.java 
```

本地界面的结果是一个闪亮的新 hello.class。从 ssh 登录（运行 bash）完成后，将导致：

```
# javac hello.java
Dalvik VM unable to locate class 'com/spartacusrex/spartacuside/external/javac'
java.lang.NoClassDefFoundError: com/spartacusrex/spartacuside/external/javac
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.spartacusrex.spartacuside.external.javac
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
        ... 1 more 
```

当然，可以查看环境变量...

以下是在本地环境中，但不在远程环境中或不同：

```
LOOP_MOUNTPOINT=/mnt/obb
ASEC_MOUNTPOINT=/mnt/asec
ANDROID_PROPERTY_WORKSPACE=9,131072
ANDROID_SOCKET_zygote=10
ANDROID_BOOTLOGO=1
BOOTCLASSPATH=/data/data/com.spartacusrex.spartacuside/files/system/classes/android.jar:/system/framework/core.jar:/system/framework/core-junit.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework/framework.jar:/system/framework/framework2.jar:/system/framework/android.policy.jar:/system/framework/services.jar:/system/framework/apache-xml.jar:/system/framework/HTCDev.jar:/system/framework/HTCExtension.jar:/system/framework/com.htc.framework.jar:/system/framework/filterfw.jar:/system/framework/com.htc.android.bluetooth.jar:/system/framework/wimax.jar:/system/framework/com.orange.authentication.simcard.jar
PATH=/data/data/com.spartacusrex.spartacuside/files/bin:/data/data/com.spartacusrex.spartacuside/files/local/bin:/data/data/com.spartacusrex.spartacuside/files/android-gcc-4.4.0/bin:/data/data/com.spartacusrex.spartacuside/files/system/bin:/data/data/com.spartacusrex.spartacuside/files/system/bin/bbdir:/sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin
PWD=/data/data/com.spartacusrex.spartacuside/files/system/src/helloworld
EXTERNAL_STORAGE=/mnt/sdcard 
```

以下是在远程环境中，但不是在本地环境中，或者是不同的：

```
ANDROID_PROPERTY_WORKSPACE=10,32768
ANDROID_BOOTLOGO=1
USER=username
BOOTCLASSPATH=/data/data/com.spartacusrex.spartacuside/files/system/classes/android.jar:/system/framework/core.jar:/system/framework/ext.jar:/system/framework/framework.jar:/system/framework/android.policy.jar:/system/framework/services.jar
PATH=/data/data/com.spartacusrex.spartacuside/files/bin:/data/data/com.spartacusrex.spartacuside/files/local/bin:/data/data/com.spartacusrex.spartacuside/files/android-gcc-4.4.0/bin:/data/data/com.spartacusrex.spartacuside/files/system/bin:/data/data/com.spartacusrex.spartacuside/files/system/bin/bbdir:/sbin:/system/sbin:/system/bin:/system/xbin
PS1=\[\033[01;32m\]$USER\[\e[1;31m\]\[\e[1;33m\]@\[\e[1;35m\]$HOSTNAME\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$
MKSH=/system/bin/sh
APK=/data/app/com.spartacusrex.spartacuside-1.apk
LOGNAME=username
EXTERNAL_STORAGE=/sdcard 
```

当然，我的注意力已经流向了“BOOTCLASSPATH”。我以前从未听说过 BOOTCLASSPATH，但它似乎是我们 Java 编码人员熟悉的普通 ole“CLASSPATH”的替代品......

建议的解决方案可以在 code.google.com 网站的“问题”下找到，但它们都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:16:49.573

解决方案是简单地更改 BOOTCLASSPATH 以在远程登录中包含与本地登录相同的内容。

当然，“开箱即用”这不应该是一个人遇到的问题。但是，Terminal-IDE 是一个年轻的环境，这只是成长的痛苦之一。

# security - 在面向公众的 SharePoint 网站上拥有 DOC 文件的安全风险

> ID：15817606
> 
> 赞同：0
> 
> 时间：2013-04-04T17:16:54.627
> 
> 标签：security, sharepoint, anonymous

我想知道拥有 PDF 而不是 DOC 是否会使我们面向公众的 SharePoint 2010 环境更加安全。具体来说，我说的是匿名用户访问存储在文档库中的文档。

我也有兴趣了解一般的最佳实践，而不仅仅是 SharePoint，例如 ColdFusion 盒子上的 DOC 与 PDF 风险等。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:09:48.650

如果您的站点只允许从您的匿名站点下载文件，那么从安全角度来看，.doc 和 .pdf 文件应该没有区别。PDF 文件往往更通用，可以在更多平台上打开，而不需要 Office 或能够打开 .doc 文件的类似应用程序。

对于您的 SharePoint 2010 网站，如果您在场上安装了 Office Web Apps，则这些 Word 文件可以在浏览器中打开，而无需用户在其本地计算机上安装 Office 套件。

与任何站点或应用程序一样，安全性取决于应用程序的构建方式以及您的基础设施对恶意流量的加固程度。

# mysql - 在mysql select查询中获取不同的值计数

> ID：15817607
> 
> 赞同：0
> 
> 时间：2013-04-04T17:16:57.950
> 
> 标签：mysql, sql, database

我在 MySQL 中有一张表，如下所示。

## 编号 | 号码 | 姓名 | 类型

111 | 123 | XYZ | 酒吧

222 | 234 | 美国广播公司 | 餐馆

111 | 007 | PKA | 食物

111 | 123 | XYZ | 酒吧

333 | 123 | XYZ | 酒吧

现在我想得到的是具有唯一 ID 的数字的总大小。在我的情况下，含义**111**和**333**具有相同的数字，即**123**。所以数字 123 的总数是 2。在这里我不想再数 111，因为你可以看到 111 出现了两次，因为数字 123 但我不想将它添加到总大小中，因为它已经存在计数。所以我想要具有相同数字的唯一 ID 计数。

**我想从查询中得到的输出是：-**

**123 (XYZ) - 2 （总共有 3 个条目，但 111 id 重复编号 123，我不想重复一个。所以我想在计算时同时考虑 id 和数字。）**

**234 (ABC) - 1**

**007 (PKA) - 1**

我使用 Group By 来查找重复值，但没有按照我的要求获得正确的输出。欢迎任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:20:11.047

```
select number, count(distinct id)
from your_table
group by number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:22:34.240

也可以：

```
select id, number, name, type, 
       count(distinct id) over (partition by number) numOfDistictIds
from table
order by number 
```

# javascript - HoverIntent 导致元素在页面上中断

> ID：15817608
> 
> 赞同：1
> 
> 时间：2013-04-04T17:17:00.293
> 
> 标签：javascript, jquery, break, pyrocms, hoverintent

我目前正在进行的项目显示了许多参加活动的人的照片，我希望发生一个显示他们名字的悬停事件。我已经让它工作了，但它也会导致图像在这样做时变得错位。这是代码...

```
JS

$(document).ready(function() {
  $(".foo").hoverIntent(function() {
    $(this).siblings('.eventattendee').fadeIn();
  }, function() {
    $('.eventattendee').fadeOut();
  });
});

HTML

{{ event:get_attendees_of_event event_id="<?php echo $event['event_id']; ?>" }}
  {{ user:profile user_id="{{ attendee_id }}" }}
    <div class="wrapper">
      <a class="foo" href="/user_account/id/{{ attendee_id }}" >
        <img src="{{ profile_picture:image }}" class="bigimgsize organizersize has-tip tip-top" data-width="auto" title="{{ first_name }} {{ last_name }}"/>
      </a>
      <div class="eventattendee">
        <h1>{{ first_name }} {{ last_name }}</h1>
      </div>
    </div>
  {{ /user:profile }}
{{ /event:get_attendees_of_event }}

CSS

.wrapper {
  position: relative;
}
.eventattendee {
  display:none; 
  position: relative; 
  top: 19%;
  left: 50%;
} 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:28:57.963

[这是 jsfiddle 中的简单答案](http://jsfiddle.net/Cyberjetx/U5NBX/)：

js

```
 $(document).ready(function () {
    $(".foo img").hover(function () {
        $(this).next("em").animate({
            opacity: "show",
            top: "0"
        }, "slow");
    }, function () {
        $(this).next("em").animate({
            opacity: "hide",
            top: "300"
        }, "slow");
    });
}); 
```

html：注意添加了 em 标签。您当然可以撕下标题属性并添加一个 em 然后附加文本......但是为什么要经历所有这些。

```
<div class="wrapper"> <a class="foo" href="#">
    <img src="blah" class="bigimgsize organizersize has-tip tip-top" data-width="auto" />
<em>first last addl info</em> 
  </a> 
```

CSS：

```
.foo {
  padding: 0;
  margin: 10 2px;
  float: left;
  position: relative;
  text-align: center;
}
.foo em {
  width: 190px;
  height: 35px;
  position: absolute;
  top: 300px;
  left: 6px;
  text-align: left;
  padding: 3px;
  font-weight: bolder;
  z-index: 2;
  display: none;
  color:#FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:12:40.737

我以前在 onmouseover 上遇到过这个问题，它发生在没有设置绝对位置的情况下。新显示的内容占据了浏览器网格上的区域，随后的内容进一步向下移动以留出新空间。

这个简单的代码可以解决这个问题：

```
<div style="position:absolute; top:249px; left:435px; width:233px; height:700px;">
</div> 
```

# java - 大型应用程序的会话管理 (Java)

> ID：15817610
> 
> 赞同：1
> 
> 时间：2013-04-04T17:17:03.953
> 
> 标签：java, jakarta-ee, web-applications, servlets

我的问题有点主观，可能与上下文无关，所以请原谅我。

我正在开发一个应用程序，我们需要在各个地方使用 Session 说

1.  在 Session 中存储用户首选项。
2.  在 Session 中存储一些属性。
3.  用户资料。
4.  在会话中存储购物车。

和许多其他的事情，更多的是我们需要提供一种干净的方式让其他用户使用 Session。我知道如何注入会话或使用它以及它是如何工作的等等，所以这对我来说不是问题。

我想知道一种创建服务说（SessionService）并让所有API都使用它来处理HTTP Session的方法。

有没有人工作/开发过这样的实现，如果是，请分享如何最好地做到这一点，任何参考都会很有帮助。

*编辑*

我们正在使用 Spring Security 进行身份验证和授权

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:55:14.530

我坚信会话应该尽可能地与系统的业务逻辑脱钩。

无论如何，在视图层操作时，提供访问会话的实用程序，但请记住以下内容；

*   会话对象本身不是线程安全的；
*   任何属性都可以随时更改
*   任何属性都可以被任何一段代码修改
*   测试任何涉及会话的东西都是痛苦的

如果您关心业务逻辑，请考虑以下方法；

*   实施服务层
    *   处理业务逻辑不可变对象
    *   转换可以由自定义适配器或[Spring 转换器处理](http://static.springsource.org/spring/docs/3.0.x/reference/validation.html)
    *   在视图和业务逻辑之间提供关注点分离
    *   更好的可测试性（如果这是一个词）
*   在内存对象数据库而不是会话中管理临时状态
    *   支持分布式复制，实现HA
    *   支持事务行为以实现一致性
    *   易于测试
    *   ~~在你的简历上看起来很酷~~

我希望这有帮助。如果不是，关于您的目标的更多信息可能会有所帮助。

# hsqldb - 为什么我的 HSQLDB 表在磁盘上占用了太多空间？

> ID：15817612
> 
> 赞同：0
> 
> 时间：2013-04-04T17:17:11.873
> 
> 标签：hsqldb

我有以下 HSQLDB 架构：

```
CREATE TABLE RUNSTATS
(
   ID      BINARY(16)   NOT NULL,
   ENTITY  BLOB(128K)     NOT NULL
   ,CHECK (PUBLIC.RUNSTATS.ID IS NOT NULL)
   ,CHECK (PUBLIC.RUNSTATS.ENTITY IS NOT NULL)
);

ALTER TABLE RUNSTATS
   ADD CONSTRAINT pk_runstats
   PRIMARY KEY (ID);

CREATE TABLE RUNSTATS__AVGLATENCYINDEX
(
   ID          BINARY(16),
   TIMESTAMP   BIGINT,
   FLOWID      VARCHAR(200),
   AVGLATENCY  DOUBLE
);

ALTER TABLE RUNSTATS__AVGLATENCYINDEX
   ADD CONSTRAINT pk_runstats__avglatencyindex
   PRIMARY KEY (ID, FLOWID);

CREATE INDEX IDX_RUNSTATS__AVGLATENCYINDEX_FLOWID
   ON RUNSTATS__AVGLATENCYINDEX (FLOWID ASC); 
```

RUNSTATS 表在**x.lobs**文件中，RUNSTATS__AVGLATENCYINDEX - 在**x.data中**

我插入 RunStats 对象，每个对象在 RUNSTATS 表中产生 1 行，在 RUNSTATS__AVGLATENCYINDEX 中产生 100 行。我运行三个会话，插入 100、1000 和 10000 个 RunStats 对象。

另一个非常重要的细节 - 实际的 FLOWID 值都是 20 个英文字符长，尽管字段是 VARCHAR(200)

请在下面找到**x.data**文件的磁盘使用摘要（包含 RUNSTATS__AVGLATENCYINDEX 表）：

1.  10,000 行 = 2.0MB
2.  100,000 行 = 16MB
3.  1,000,000 行 = 128MB

现在原始计算： (sizeOf(ID) + sizeOf(FLOWID) + sizeOf(TIMESTAMP) + sizeOf(AVGLATENCY)) = 16 + 20 + 8 + 8 = 52

所以 1,000,000 行大约需要 52 * 1,000,000 = ~50MB

最佳尺寸比实际尺寸小两倍多。

这是正常的数据库开销吗？我可以指示 hsqldb 引擎更有效地利用空间吗？

更多上下文：

*   仅添加实体（从不删除）
*   有一个明确定义的时期，以固定速度添加实体。例如，每 10 秒一次，持续 3 天。之后 - 不再添加实体。

**编辑**

请在此处找到压缩脚本文件 - [https://docs.google.com/file/d/0B2pbsdBJxJI3Z2dFTndMZnBMU2c/edit?usp=sharing](https://docs.google.com/file/d/0B2pbsdBJxJI3Z2dFTndMZnBMU2c/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:38:41.320

我在 RUNSTATS__AVGLATENCYINDEX 表中插入了 1,000,000 行，.data 文件的大小为 128MB。额外的大小是由于主键和表上的额外索引（32 字节）以及行、字符串和可空性信息的长度。FLOWID 列使用 20 + 5 个字节。总共每行需要 32 + 12 + 4 个字节的额外空间，所以总共是 100 个字节。这被放大到 32 字节的倍数 (FILE SCALE)，导致每行 128 字节。

检查您的 .script 文件。如果你有`SET FILE SCALE 256`或更高，这可以解释额外的空间。每行的大小是此 SCALE 值的倍数。

使用默认 SCALE 32 和给定的 FLOWID 大小，每行应使用 128 个字节。

在删除已删除的行后，您还可以对数据库执行 SHUTDOWN COMPACT 并查看大小。

您已添加指向 .script 文件的链接。该`SET TABLE ...`语句指示大表中有 751700 行。每行占用磁盘上的 128 个字节。

```
SET FILES SCALE 32
...
CREATE CACHED TABLE PUBLIC.RUNSTATS(ID BINARY(16) NOT NULL PRIMARY KEY,ENTITY BLOB(128K) NOT NULL)
CREATE CACHED TABLE PUBLIC.RUNSTATS__AVGLATENCYINDEX(ID BINARY(16),TIMESTAMP BIGINT,FLOWID VARCHAR(200),AVGLATENCY DOUBLE,PRIMARY KEY(ID,FLOWID))
CREATE INDEX IDX_RUNSTATS__AVGLATENCYINDEX_FLOWID ON PUBLIC.RUNSTATS__AVGLATENCYINDEX(FLOWID)
...
SET TABLE PUBLIC.RUNSTATS INDEX '4021 0 7517'
SET TABLE PUBLIC.RUNSTATS__AVGLATENCYINDEX INDEX '4039 79 0 0 751700' 
```

# function - 如何读入用户定义的数学函数

> ID：15817613
> 
> 赞同：1
> 
> 时间：2013-04-04T17:17:12.593
> 
> 标签：function, math, pascal

我正在尝试用 Pascal 构建一个程序来区分数学函数。它工作得很好（计算最小值/最大值、对称性、绘制图形等），但我必须将函数（即 x^3+3x+2）放入源代码中，如下所示：

```
function f(x : real): real;
begin 
   f := x * x * x + 3 * x + 2;
end; 
```

不过，我希望用户定义功能来区分。显然 readln 函数没有帮助。有人告诉我唯一的解决方案是特定的解析器。但这非常困难，我不知道该怎么做。例如，我的想法是将函数提取到 *.txt 文件中，以便可以轻松更改它。那可能吗？有人可以给我看一个可以解决这个问题的解析器，或者有其他一些很好的解决方案吗？我将衷心感谢您的帮助！提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:09:54.133

[SWAG](http://swag.outpostbbs.net/)上还有许多解析器/评估器：

*   **[EQUATE.PAS](http://swag.outpostbbs.net/MATH/0003.PAS.html)**（简短、干净的评估器）
*   [PARSMATH.PAS](http://swag.outpostbbs.net/MATH/0009.PAS.html)（非常短的示例代码）
*   [数学解析单元](http://swag.outpostbbs.net/MATH/0032.PAS.html)（未记录，有点乱）
*   [数学评估](http://swag.outpostbbs.net/MATH/0048.PAS.html)（有点神秘。）
*   **[不错的表达式解析器](http://swag.outpostbbs.net/MATH/0050.PAS.html)**（小，看起来做得很好。）
*   [表达式评估](http://swag.outpostbbs.net/MATH/0053.PAS.html)器（Messier，包括三角函数。）
*   [数学表达式评估器](http://swag.outpostbbs.net/MATH/0060.PAS.html)（没有很好的文档记录）
*   [方程解析器](http://swag.outpostbbs.net/MATH/0061.PAS.html)（将方程转换为系数数组）
*   **[文本公式解析器](http://swag.outpostbbs.net/MATH/0073.PAS.html)**（相当完整的解析器/评估器单元）

我加粗了我认为最有用的那些。我不认为它们中的任何一个都像我的其他答案中的符号包那样完整，但是如果您需要帮助，它们可能值得一读。

（所有这些都是相当旧的代码。除非另有说明，否则 SWAG 的规则是将这些东西视为具有新型 BSD 许可证）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:42:09.207

Free Pascal 附带了[符号](http://svn.freepascal.org/cgi-bin/viewvc.cgi/trunk/packages/symbolic/)包，它有一个解析器和一个数学表达式求值器。您可能可以以此为起点。请参阅使用[说明文档](http://svn.freepascal.org/cgi-bin/viewvc.cgi/trunk/packages/symbolic/doc/symbolic.txt?revision=10064&view=markup)。

# java - 如何删除图像中长度小于 N 像素的线条？

> ID：15817616
> 
> 赞同：1
> 
> 时间：2013-04-04T17:17:21.343
> 
> 标签：java, image-processing

我有一张视网膜照片的灰度缓冲图像。在使用 Sobel 和 Canny 算法处理后，我在图像周围留下了几条短线。这些较小的线条正在影响我创建的用于计算血管宽度的算法。我正在尝试编写一种算法或确定一种可用于删除长度短于 N 像素的所有行的算法。这应该可以清理图像并使我的算法更有效。有没有针对这类问题的算法？如果没有，有人可以建议从哪里开始吗？我创建了以下内容来跟踪单行，但它需要做很多工作：

```
public static IntImage cleanImage(IntImage imageIn) {
    int width = imageIn.nCols, height = imageIn.nRows;
    IntImage image = new IntImage(height, width);
    image.setPixels(imageIn.getPixels().clone());
    int currentX = 0, currentY = 0, currentValue = 0, count = 0, counter = 0;
    int[][] locations = new int[50][2];
    boolean connectionFound = false;

    for(int row = 0; row < height-1; row++){
        for(int col = 1; col < width-1; col++){
            currentX=col;
            currentY=row;
            do{
                if(image.getPixel(currentY, currentX)==255){
                    locations[count][0]=currentY;
                    locations[count][1]=currentX;
                    ++count;
                }else if(image.getPixel(currentY, currentX+1)==255){
                    locations[count][0]=currentY;
                    locations[count][1]=currentX+1;
                    ++count;
                    currentX+=1;
                }else if(image.getPixel(currentY+1, currentX+1)==255){
                    locations[count][0]=currentY+1;
                    locations[count][1]=currentX+1;
                    ++count;
                    currentY+=1;
                    currentX+=1;
                }else if(image.getPixel(currentY+1, currentX)==255){
                    locations[count][0]=currentY+1;
                    locations[count][1]=currentX;
                    ++count;
                    currentY+=1;
                }else if(image.getPixel(currentY+1, currentX-1)==255){
                        locations[count][0]=currentY+1;
                        locations[count][1]=currentX-1;
                        ++count;
                        currentY+=1;
                        currentX-=1;
                }else if(image.getPixel(currentY, currentX-1)==255){
                    locations[count][0]=currentY;
                    locations[count][1]=currentX-1;
                    ++count;
                    currentX-=1;
                }
            }while(image.getPixel(currentY, currentX)==255 && count < 50);
            if(count < 50){
                for(int loop = 0; loop < 50; loop++){
                    image.setPixel(locations[loop][0], locations[loop][1], 0);
                    locations[loop][0]=0;
                    locations[loop][1]=0;
                }
            }
            count = 0;
            currentX = col;
            currentY = row;
        }
    }
    return image; 
```

上面的代码是为了表明我正在尝试自己，但请不要像我说的那样太费心，因为它需要大量工作。Sobel 和 Canny 算法用于获取血管的轮廓，然后将图像转换为二值图像。那时可以看到所有其他线条。在此之前我无法处理图像。如果我只使用没有 sobel 的 Canny，它不会那么糟糕，但线条似乎更宽，因此这种方式不准确。这就是为什么我要移除较小的线条以确保容器边缘内的区域清晰可用于处理。不幸的是，我无法上传图片，因为我的声望至少需要十级。对不起。

# c++ - 您能否从 C++ Lib 文件中获取信息，例如如何从 Jar 文件中获取信息？

> ID：15817625
> 
> 赞同：0
> 
> 时间：2013-04-04T17:17:51.340
> 
> 标签：c++, c++builder

C++ Lib Files 是二进制文件，还是只是某种容器，例如包含所有二进制文件的 zip 文件？

我问，因为我很好奇我是否可以打开一个库文件 (.lib) 以获取有关其中文件的更多信息，类似于如何打开一个 jar 文件并以人类可读的方式查看它。

我问，因为我正在向我的 lib 路径添加一些库，并且希望知道这些 lib 文件是否包含我要引用的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:25:27.337

据我所知，库文件是纯二进制文件。因此，实际上不可能像 zip 文件那样“看到”它的内容。

如果您掌握了一些 .lib 文件，那么它很可能还附带解释其功能的文档。那将是检查您的课程是否存在于图书馆中的好地方。

编辑：[这个问题](https://stackoverflow.com/questions/2188490/static-library-inspector-for-windows)描述了一个名为 dumpbin 的 lib 文件检查器，可能是您需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:09:14.820

lib 文件包含该库提供的所有编译单元的编译二进制文件。由于您已标记 C++Builder，我假设您有[OMF](http://en.wikipedia.org/wiki/Relocatable_Object_Module_Format) -libraries。您可以轻松地从中获取大量信息，例如库中的所有函数签名。

C++Builder 附带了一个名为[TDump](http://docwiki.embarcadero.com/RADStudio/XE3/en/TDUMP.EXE,_the_File_Dumping_Utility)的工具，它以人类可读的形式打印库的内容。它位于 C++Builder 安装目录下的 bin 目录中。

下面的示例向您展示了如何使用 TDump 从命令行转储库的内容：

```
"C:\Program Files\Embarcadero\RAD Studio\10.0\bin\tdump.exe" library.lib > library-dump.txt 
```

您可以通过在输出中搜索“THEADR”来找到库中的每个对象模块。在 THEADR 行之后，您将获得编译对象时使用的所有依赖文件（基本上包括）的列表。在依赖项之后是符号，包括解构函数签名。

# c - 在 exec() 之前使用 fork() - ing 有什么用？

> ID：15817627
> 
> 赞同：5
> 
> 时间：2013-04-04T17:18:01.303
> 
> 标签：c, unix, process

在 *nix 系统中，进程是通过使用 fork() 系统调用创建的。例如，考虑 init 进程创建另一个进程。首先它分叉自己并创建一个具有类似 init 上下文的进程。只有在调用 exec() 时，这个子进程才会变成一个新进程。那么为什么需要中间步骤（创建一个与父级具有相同上下文的子级）？这不是浪费时间和资源吗，因为我们正在创建一个上下文（消耗时间并浪费内存）然后重写它？

为什么这没有实现为分配一个空的内存区域然后调用 exec()？这会节省时间和资源，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:55:03.923

中间步骤使您能够在子进程中设置共享资源，而外部程序不知道它。典型的例子是构造一个管道：

```
// read output of "ls"
// (error checking omitted for brevity)
int pipe_fd[2];
pipe(&pipe_fd);
if (fork() == 0) {       // child:
    close(pipe_fd[0]);   // we don't want to read from the pipe
    dup2(pipe_fd[1], 1); // redirect stdout to the write end of the pipe
    execlp("ls", "ls", (char *) NULL);
    _exit(127);          // in case exec fails
}
// parent:
close(pipe_fd[1]);
fp = fdopen(pipe_fd[0], "r");
while (!feof(fp)) {
    char line[256];
    fgets(line, sizeof line, fp);
    ...
} 
```

请注意标准输出到管道的重定向是如何在子级中完成的，在`fork`和之间`exec`。当然，对于这个简单的案例，可能有一个生成[API](http://pubs.opengroup.org/onlinepubs/009695399/functions/posix_spawn.html)，只要给定适当的参数，它就会简单地自动执行此操作。但是该`fork()`设计允许对子进程中的每个进程资源进行任意操作——可以关闭不需要的文件描述符、修改每个进程的限制、删除权限、操纵信号掩码等等。如果没有`fork()`，用于生成进程的 API 最终会变得非常臃肿或不是很有用。事实上，竞争操作系统的进程生成调用通常介于两者之间。

至于内存的浪费，可以[*通过写时复制*](http://en.wikipedia.org/wiki/Copy-on-write)技术来避免。`fork()`不会为子进程分配新内存，而是将子进程指向父进程的内存，并指示仅当页面被写入时才复制页面。这`fork()`不仅节省了内存，而且速度很快，因为它只需要复制一个“目录”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:33:34.410

这是一个古老的抱怨。很多人先问*为什么`fork()`？*通常他们会建议一个操作，既可以从头开始创建一个新进程，又可以在其中运行一个程序。这个操作被称为`spawn().`

他们总是说，*那不是更快吗？*

事实上，除了 Unix 家族以外的所有系统*都*采用了“衍生”方式。只有 Unix 是基于`fork()`和`exec().`

但有趣的是，Unix 总是比其他全功能系统快得多。它总是处理更多的用户和负载。

多年来，Unix 变得更快了。Fork() 不再真正复制地址空间，它只是使用一种称为[*copy-on-write*的技术来共享它。](http://en.wikipedia.org/wiki/Copy-on-write)（一个非常古老的 fork 优化[`vfork()`](http://en.wikipedia.org/wiki/Fork_%28operating_system%29#Vfork_and_page_sharing)也仍然存在。）

喝[Kool-Aid。](http://en.wikipedia.org/wiki/Kool-Aid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:27:46.543

我不知道*init*进程在分叉方面是如何在内核上工作的，但要回答你为什么需要调用**fork**然后**exec**的问题仅仅是因为一旦你**exec**就没有回头路了。

[如果您在此处](http://pubs.opengroup.org/onlinepubs/009695399/functions/execlp.html)查看文档，它本质上需要生成一个新进程（**fork**调用），以便父进程恢复控制并**等待**它完成或像守护进程一样坐下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T22:06:59.123

> 只有在调用 exec() 时，这个子进程才会变成一个新进程。

并不真地。在一个分叉之后，你已经有了新的进程，甚至和它的父进程没有太大的不同。在某些情况下，没有 exec 需要遵循分叉。

> 那么为什么需要中间步骤（创建一个与父级具有相同上下文的子级）？

一个原因是因为它是创建整个 shebang 的有效方式。克隆通常没有从头开始创建复杂。

> 这不是浪费时间和资源吗，因为我们正在创建一个上下文（消耗时间并浪费内存）然后重写它？

由于使用了写时复制机制，因此大部分资源是虚拟的，因此不会浪费时间和资源。此外，说创建的上下文被覆盖是不正确的。鉴于实际上没有任何东西首先被写入，因此没有任何东西被重写。这就是 COW 的全部意义所在。“仅”进程地址空间（代码、堆和堆栈）被替换，而不是被覆盖。许多进程上下文被部分或全部保留，包括环境、文件描述符、优先级、忽略的信号、当前和根目录、限制、各种掩码、处理器绑定、特权以及与进程地址空间无关的其他一些东西。

# c - 让opencv工作（段错误）

> ID：15817629
> 
> 赞同：2
> 
> 时间：2013-04-04T17:18:10.390
> 
> 标签：c, opencv

我在 Linux 中调试这个小程序，编译代码：

```
gcc `pkg-config --cflags opencv` `pkg-config --libs opencv` -o videoHandler videoHandler.c 
```

当我运行它时，我得到这个输出：

```
minscanline 1
minscanline 1
minscanline 1
minscanline 1
Video loaded succesfully
minscanline 1
Segmentation fault 
```

我真正关心的是while循环，因为我需要获取电影文件的各个帧。有任何想法吗？

```
#include <cv.h>
#include <highgui.h>
#include <stdio.h>

#define HEIGHT 480
#define WIDTH 640

// Position the video at a specific frame number position
//cvSetCaptureProperty(video, CV_CAP_PROP_POS_FRAMES, next_frame);

// Convert the frame to a smaller size (WIDTH x HEIGHT)
//cvResize(img, thumb, CV_INTER_AREA);

int main(void){

    CvCapture *video;
    IplImage *image;
    CvMat *thumb;
    CvMat *encoded;

    // Open the video file.
    video = cvCaptureFromFile("sample.avi");
    if (!video) {
        // The file doesn't exist or can't be captured as a video file.
        printf("Video could not load\n");
    }else{
        printf("Video loaded succesfully\n");
        // Obtain the next frame from the video file
        while ( image = cvQueryFrame(video) ) {
            printf("Inside loop\n");
            //If next frame doesn't exist, Video ended

            thumb = cvCreateMat(HEIGHT, WIDTH, CV_8UC3);

            // Encode the frame in JPEG format with JPEG quality 30%.
            const static int encodeParams[] = { CV_IMWRITE_JPEG_QUALITY, 30 };
            encoded = cvEncodeImage(".jpeg", thumb, encodeParams);
            // After the call above, the encoded data is in encoded->data.ptr
            // and has a length of encoded->cols bytes.

            namedWindow( "Display Image", CV_WINDOW_AUTOSIZE );
            imshow( "Display Image", encoded );

            printf("Frame retrieved, length: %s\n", encoded->cols);
        }

        // Close the video file
        cvReleaseCapture(&video);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:30:41.307

我没有立即看出问题所在，但您可以采取以下措施来帮助自己（或更新问题以便有更好的机会在这里获得帮助）：

**第一次**编译启用警告：

```
gcc -Wall -Wextra `pkg-config --cflags opencv` `pkg-config --libs opencv` -o videoHandler videoHandler.c 
```

然后修复您收到的任何警告（或编辑问题以添加它们，如果您无法弄清楚它们）。

**第二次**在调试器下运行你的程序，看看哪一行触发了段错误。如果您仍然无法弄清楚，请将其以及相关的变量值（通过添加调试打印或使用调试器检查它们）添加到问题中。

**第三**，如果仍未解决，请在您的应用程序上运行[*valgrind*](http://valgrind.org)（如果您在 Windows 上，则安装 Linux VM 并在其下运行，我通常使用 VirtualBox + 最新可用的 Lubuntu 虚拟磁盘映像）。

实际上，即使你解决了这个问题，你也应该尝试[*valgrind*](http://valgrind.org)，看看它给出了什么警告，如果其中任何一个实际上是你应该修复的错误（它也可能给出误报，甚至其中很多带有一些库）。

# python - 在 MySQL 中插入 Python 列表列表

> ID：15817634
> 
> 赞同：0
> 
> 时间：2013-04-04T17:18:14.567
> 
> 标签：python, numpy, mysql-python

我有一个巨大的列表（A），由多个子列表（x，y，... n）组成，每个子列表包含 ['a'，'b'，'c'，'d'，'e' , 'f', 'g'] 元素。我想将所有子列表的所有内容传输到数据库表（使用 MySQLdb 模块），但无法弄清楚如何实现这一点。我现在正在做的事情是这样的：

```
 import MySQLdb

 db = MySQLdb.connect("localhost","root","","test")
 cursor = db.cursor()

 for u in A:
     for x1,x2,x3,x4,x5,x6,x7,x8 in u:
           cursor.execute("INSERT INTO logs(date, time, pri, method, action, client, unknown1, unknown2) VALUES ('%s','%s','%s','%s','%s','%s','%s','%s')" % (x1, x2, x3, x4, x5, x6, x7, x8))
           db.commit()

 db.close() 
```

但是没有成功..有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T04:15:07.117

我想知道您的逻辑中的注释行是否正确？

```
 for u in A:
     #for x1,x2,x3,x4,x5,x6,x7,x8 in u:
           cursor.execute("INSERT INTO logs(date, time, pri, method, action, client, unknown1, unknown2) VALUES ('%s','%s','%s','%s','%s','%s','%s','%s')" % (x1, x2, x3, x4, x5, x6, x7, x8)) 
```

你更有可能这样做：

```
 import MySQLdb

 db = MySQLdb.connect("localhost","root","","test")
 cursor = db.cursor()

 cursor.executemany("INSERT INTO logs(date, time, pri, method, action, client, unknown1, unknown2) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)", A)
 db.commit()

 db.close() 
```

在 executemany 中使用**%s**会让 MySQLdb 做一些脏活（将字符串转义为 'string'，但将 int 保留为 int 等。例如“str”->“'str'”、“1”->1）。

# xml - 读取 XML 文件中的文本内容

> ID：15817640
> 
> 赞同：2
> 
> 时间：2013-04-04T17:18:36.800
> 
> 标签：xml, scala

假设我有一个 XML 文件，如下所示：

```
<conf>
  <something>
    blablabla
  </something>
</conf> 
```

我想检索字符串`blablabla`

我试过：

```
val data = XML.loadFile("conf.xml")
val st = data \\ "conf" \\ "something"
println(st) 
```

但作为输出我得到：

```
<something>blablabla</something> 
```

我添加了以下代码行：

```
st match {
      case <something>{ txt }</something> => println(txt)
} 
```

但我有一个`scala.MatchError`.

我可以尝试什么？

你能给我一些帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:24:56.823

您需要在所选内容上调用其他`text`方法`NodeSeq`来提取xml*元素中的**文本子节点*

 *```
val data = XML.loadFile("conf.xml")
val st = data \\ "conf" \\ "something"
println(st.text) 
```

我建议你也`trim`得到结果，除非你想要一些额外的免费空间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:17:27.803

您可以考虑[Anti-XML](https://github.com/djspiewak/anti-xml)，这是一个不久前很受欢迎的项目，但现在有点无人维护，因此您可能必须自己交叉编译它。

它将允许您选择比这更好的文本。

看一些例子：

```
 "parse an elem with text" in {
  fromString("<test>This is a test</test>") mustEqual elem("test", Text("This is a test"))
 } 
```

[https://github.com/djspiewak/anti-xml/blob/master/src/test/scala/com/codecommit/antixml/XMLSpecs.scala](https://github.com/djspiewak/anti-xml/blob/master/src/test/scala/com/codecommit/antixml/XMLSpecs.scala)*

# javascript - 移动网络应用 HTML 和 JavaScript 文件位置

> ID：15817650
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:19:06.457
> 
> 标签：javascript, web-applications, mobile, mobile-application

我是移动网络应用程序开发的新手。我有一个关于移动网络应用程序的简单基本问题。移动网络应用程序是用 HTML 和 JavaScript 编写的。那么这些 HTML 和 JavaScript 文件是本地存储在移动设备上还是从服务器发送？这个问题对大多数人来说可能太简单了。但是我问这个是因为如果所有的 JavaScript 代码都存储在移动设备上，那么跨域访问问题呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:27:52.327

这取决于。如果您将它打包在[PhoneGap](http://phonegap.com/)中，您会将所有资产存储在一个可以安装在多个设备上的包中，但如果您正在使用从远程服务器提供的移动 Web 应用程序，则所有脚本、模板和 css 的将不得不下载。如果您在跨域通信方面遇到问题，请尝试在您的请求中使用[JSONP 。](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:20:23.953

每次请求特定 url 时都会下载所有文件，对于移动设备和个人电脑也是如此。（文件是否会被下载取决于缓存设置、文件是否被修改等）

# python - 派生类未在_init_中运行代码

> ID：15817653
> 
> 赞同：0
> 
> 时间：2013-04-04T17:19:13.800
> 
> 标签：python

为什么下面的代码不打印`"Hello"`？

```
# C derives from B, which derives from A, which derives from object
class D(C):
  def _init_(self, *args, **kw):
    print "Hello"

foo = D('some_text') 
```

我在 Python 2.7 中对此进行了测试，但没有运气。

我不包括 , 和 的代码`C`，`B`但是`A`这有什么关系呢？

我很高兴包含他们的定义，但我不想使上面的代码不必要地复杂化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:20:11.823

您需要使用*双*下划线：

```
def __init__(self, *args, **kw): 
```

该方法`_init_`对Python没有特殊意义，实例化时不会被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:21:36.930

```
# C derives from B, which derives from A, which derives from object
class D(C):
  def __init__(self, *args, **kw):
    print "Hello"

foo = D('some_text') 
```

双下划线。

# http - Servlet 3.0 中的 HTTP 乱序响应和异步处理

> ID：15817654
> 
> 赞同：0
> 
> 时间：2013-04-04T17:19:15.887
> 
> 标签：http, servlets, browser, asynchronous, concurrency

我的浏览器中有多个 AJAX 请求。我的 UI 由多个视图组成，并且 AJAX 请求正在尝试同时填充这些视图。在某些情况下，我需要从客户端发送超过 10 个同时请求并在服务器上同时处理。

但是由于[浏览器对单个域的最大并发请求的限制](http://www.browserscope.org/?category=network)以及由于 HTTP 的“[服务器必须以与接收请求相同的顺序发送对请求的响应](http://www.ietf.org/rfc/rfc2616.txt)”约束，我在请求处理中获得的并发性不如我会想要。

从我的应用程序的角度来看，我不需要按照我发送请求的顺序来响应。例如，如果 view8 在 vi​​ew1 之前填充，我可以。

使用 Servlet 3.0 构造的异步处理似乎只解决了问题的一方面（服务器端），因此无法充分利用来最大化应用程序并发性。

我的问题是： **我错过了一些适当的结构吗？**[（与“从不同的子域托管您的图像](https://stackoverflow.com/a/561068/1733060) ”之类的解决方法相比，“适当”）可以为我带来更多的并发性？

这似乎是许多 Web UI 需要的东西！如果不是，那么我设计 UI 的方式是错误的。无论哪种情况，我都会感谢您的意见。

**Edit1：**对我来说，我不必支持大量并发客户端。访问该应用程序的最大并发客户端数将小于 100。鉴于这一事实，当我在服务器端拥有充足的可用处理能力时，基本上是在尝试增强这些客户端的体验。

**Edit2：**我们的应用程序/API 不用于“公共”消费。例如：它就像我公司的网络邮件应用程序。它托管在互联网上，但并不适合所有人的消费。仅供相关少数人食用。提供该信息的原因是将我的应用程序与 SO/Twitter 区分开来，这似乎将他们的（REST）API 用户与他们的普通网站用户区分开来。在我们的案例中，我们认为我们不应该以这种方式进行区分，而是希望为两者提供单一的 REST 端点。

规范（RFC2616）中限制背后的原因似乎是：“这些指南旨在改善 HTTP 响应并避免拥塞。”。不过，内网网页应用有更多的奢侈品，不应该这么拘束！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:38:19.210

> 服务器公开 REST API，因此 UI 为各种资源类别（例如：博客、视频、新闻、文章）生成特定的 GET。由于每个资源类别都有其独有的视图，因此它们都非常适合。在一个请求中整理将博客和视频放在一起的请求感觉不对。不是吗？

好吧，恕我直言，务实更重要。当然，服务公开 RESTful API 是有意义的，但并不总是需要将整个 API 公开给浏览器。您的 API 可以与服务器端 Web 应用程序分开。您始终可以在服务器端发出多个 API 请求，整理结果并将它们发送回客户端。例如，查看 SO 主页。StackOverflow API 确实公开了一个 RESTful API，但是在加载主页时，浏览器不会发送多个请求，只是为了填充标签、线程列表等。

> 感谢桑杰的建议。但我们希望为 REST 客户端和浏览器客户端提供单一 API。有趣的是，SO 的 REST API 中没有提到根 URI“stackoverflow.com”，但浏览器客户端使用它。我想如果他们暴露了根 URI，他们的响应将很难处理（因为它会是数据的混合）。他们的 REST API 是细粒度的（就像在我的应用程序中一样），但他们的 javascript 代码使用其他一些门（API）来减少数量。往返服务器！不知何故，这感觉不对（虽然我是这个领域的新手）。随时纠正我

SO不使用任何“其他门”。只是他们根本不会发送 10 个并发请求来填充页面上的内容。他们在您投票时提出 XHR 请求，将线程标记为收藏，评论等。对于加载页面本身，没有多个请求。如果您想直接从浏览器访问您的 RESTful API，则必须遵守这些限制。要么采用桌面方式，要么允许您几乎无限地连接到您的服务器，但我想您不想走那条路......

# python - XML 元素中的 Python 搜索数据

> ID：15817656
> 
> 赞同：2
> 
> 时间：2013-04-04T17:19:21.507
> 
> 标签：python, xml, elementtree, celementtree

我认为这将适用于搜索“错误”的标签值

```
import xml.etree.cElementTree as ET

xml = """
  <tag1>
    <tag2>
      error
    </tag2>
    <tag3>
      working
    </tag3>
    <tag4>
      <tag5>
        error
      </tag5>
    </tag4>
  </tag1>
"""

for event, element in ET.fromstring(xml):
  if element.text.strip() == "error":
    print element.tag 
```

我遇到以下错误：

```
Traceback (most recent call last):
  File "test.py", line 19, in <module>
    for event, element in ET.fromstring(xml):
ValueError: need more than 0 values to unpack 
```

“需要超过 0 个值才能解包”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:25:47.720

迭代一个`Element`对象*一次只产生一个*元素，但您的循环需要*两个*值。您在`.fromstring()`这里感到困惑[`.iterparse()`](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse)。

你真的只需要`.findall()`：

```
tree = ET.fromstring(xml)
for elem in tree.findall('.//*'):
    if elem.text and elem.text.strip() == 'error':
        print elem.tag 
```

或`.iter()`，其作用相同（循环遍历树中的所有元素）：

```
tree = ET.fromstring(xml)
for elem in tree.iter():
    if elem.text and elem.text.strip() == 'error':
        print elem.tag 
```

如果您真的想使用事件驱动程序`iterparse`，您需要提供一个文件对象：

```
from cStringIO import StringIO
for event, element in ET.iterparse(StringIO(xml)):
    if element.text.strip() == "error":
        print element.tag 
```

所有片段打印：

```
tag2
tag5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:34:15.140

文档迭代器返回Element，不能拆分成(event, element)。您应该删除“事件”。但这也不完全正确，因为元素迭代器只会给你孩子（tag2，tag3，tag4）。您需要调用 element.iter() 来获取所有后代。

```
>>> for element in ET.fromstring(xml).iter():
...     if element.text.strip() == 'error':
...             print element.tag
...
tag2
tag5
>>> 
```

# ruby - Vim 错误的缩进

> ID：15817661
> 
> 赞同：0
> 
> 时间：2013-04-04T17:19:28.593
> 
> 标签：ruby, vim

我正在使用 Vim**在 Windows 7 上**编辑 Ruby 文件，但我遇到了缩进问题。在我的 Ubuntu 虚拟机上，**使用相同的 Vim 设置**，Ruby 文件的缩进正确设置为 2 个字符。我不必指定`expandtab`或设置标签宽度。

我的 _vimrc/.vimrc 文件只是获取默认的 vimrc_example 文件，并且`filetype plugin indent`设置为`on`.

这是我在 Windows 上得到的：

![在此处输入图像描述](https://i.stack.imgur.com/De4y4.png)

如果我输入`:filetype`，我会得到以下结果：

```
filetype detection:ON plugin:ON indent:ON 
```

如果我输入`:set filetype?`，我会得到以下结果：

```
filetype=ruby 
```

如果我输入`:set indentexpr?`，我会得到以下结果：

```
indentexpr=GetRubyIndent() 
```

PS我对PHP也有同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:43:45.173

要仅为一种类型的文件设置缩进，`autocmd`请通过将以下内容放入您的`~/.vimrc`文件（或 windows `_vimrc`）中使用。

```
autocmd BufNewFile,BufRead *.ruby set shiftwidth=2
autocmd BufNewFile,BufRead *.ruby set tabstop=2
autocmd BufNewFile,BufRead *.ruby set softtabstop=2 
```

或者以更简洁的方式做同样的事情，在其中放置一个`ruby.vim`文件，`~/.vim/ftplugin/`其中包含以下内容：

```
set tabstop=2  
set softtabstop=2 
set shiftwidth=2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:23:37.740

好的，我有答案了！
我暂时重命名了 Ubuntu 上的所有插件文件夹，直到找到罪魁祸首！
出色的[vim-rails](https://github.com/tpope/vim-rails)插件还为您设置了 expandtab 和 shiftwidth :)
现在我也只需在 Windows 上安装它。

# sql-server - SQL SERVER 2008 R2 事务快照隔离级别未按预期工作

> ID：15817664
> 
> 赞同：4
> 
> 时间：2013-04-04T17:19:49.657
> 
> 标签：sql-server, sql-server-2008, tsql, transaction-isolation

我创建了一个名为“test_isolation”的数据库并创建了一个包含数据的表“人”

```
name    age
----    ---
test1    1
test2    2
test3    3
test4    4
test5    5
test6    6 
```

现在数据库已更改为允许**session1中的快照隔离**

```
ALTER DATABASE test_isolation
SET ALLOW_SNAPSHOT_ISOLATION ON
GO 
```

现在我在**会话 2中创建一个事务**

```
SET TRANSACTION ISOLATION LEVEL SNAPSHOT;
GO
BEGIN TRAN
SELECT * FROM PERSON
GO
DELETE FROM PERSON WHERE name = 'test6'
GO
SELECT * FROM PERSON
GO 
```

结果与预期一致。（注意我们还没有提交这个交易！）

**现在我在会话 3**中执行以下查询

 **```
SELECT * FROM PERSON 
```

会话 3 中的查询继续无限运行，这意味着表被锁定。

如果我回到会话 2 并提交事务.. 我可以在会话 3 上运行查询，结果符合预期。

事务隔离级别**SNAPSHOT**是不是应该锁表吧？我做错了什么还是我对事务**SNAPSHOT**隔离的理解是错误的？

请帮忙..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T17:36:43.477

您必须在会话 3 中显式声明`SET TRANSACTION ISOLATION LEVEL SNAPSHOT`，否则会话 3 仍将作为 READ_COMMITTED 运行并阻止更新。

也可以在数据库级别设置此选项以将 READ_COMMITTED 替换为 SNAPSHOT。

```
ALTER DATABASE MyDatabase
SET READ_COMMITTED_SNAPSHOT ON 
```**

# xml - 使用 R 解析 XML 将返回空字符串

> ID：15817666
> 
> 赞同：0
> 
> 时间：2013-04-04T17:20:04.230
> 
> 标签：xml, r, types, xml-parsing

我正在尝试遵循[本指南](http://giventhedata.blogspot.com/2012/06/r-and-web-for-beginners-part-ii-xml-in.html#comment-form)。我可以这样打印我的 XML：

```
> print(deps[1:2])
$deployment
<deployment id="0">
 <deploy t="0" u="2"/>
 <deploy t="1" u="2"/>
 <deploy t="2" u="2"/>
 <deploy t="3" u="2"/>
 <deploy t="4" u="5"/>
 <deploy t="5" u="2"/>
 <metric name="makespan" value="23"/>
 <rmetric name="total_cpu_cycles" value="16340"/>
</deployment>

$deployment
<deployment id="1">
 <deploy t="0" u="2"/>
 <deploy t="1" u="2"/>
 <deploy t="2" u="2"/>
 <deploy t="3" u="2"/>
 <deploy t="4" u="5"/>
 <deploy t="5" u="2"/>
 <metric name="makespan" value="23"/>
 <rmetric name="total_cpu_cycles" value="16350"/>
</deployment>

attr(,"class")
[1] "XMLNodeList" 
```

我想要的是一个矩阵，其中每一行都是一个部署，并且有两列（'makespan'，'total_cpu_cycles'）。

当我到达这一步时，我开始看到问题：

```
> depcat = xmlSApply(deps, function(x) xmlSApply(x, xmlValue))
> depcat[1,1]
[[1]]
character(0)
> str(depcat[1,1])
List of 1
 $ : chr(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:25:39.873

我很笨。没有 xmlValue 因为每个项目看起来像这样： `<deploy t="0" u="2"/>`而不是这个`<deploy t="0" u="2">some value</deploy>`

# c# - wm_gettext 返回空白，直到通过标签

> ID：15817669
> 
> 赞同：2
> 
> 时间：2013-04-04T17:20:14.920
> 
> 标签：c#, winapi, pinvoke

我正在创建一个应用程序来补充我们第三方应用程序上提供的数据。他们没有开放的 API，所以我不得不使用 WM_GETTEXT 来获取我们正在查看的信息。这适用于窗口标题，但某些窗口我需要在屏幕上找到唯一标识符。如果我单击或通过我需要的框按标签，我会得到文本。但是，如果我不这样做，它只会返回空白。

这是非常简单的代码，如果必须的话，我可以用 C++ 编写一个包装器，尽管我现在不想这样做（我想我稍后出于性能原因必须这样做，但现在我只是想找出所有我稍后需要完整申请的信息）

```
StringBuilder sb = new StringBuilder(1024);

length = SendMessage(hWnd, WM_GETTEXTLENGTH, IntPtr.Zero, IntPtr.Zero);

int successText = (int)SendMessage(hWnd, WM_GETTEXT, (IntPtr)sb.Capacity, sb); 
```

我试过只发送一堆制表键按下，但即使使用 keybd_event 也需要大约一秒钟的时间才能将所有 44 个字段迭代回起始字段，这实际上是不可接受的。

如果有帮助的话，原始应用程序是 90 年代后期的 powerbuilder 应用程序。

# javascript - 类型错误：Backbone.$ 未定义

> ID：15817670
> 
> 赞同：2
> 
> 时间：2013-04-04T17:20:20.563
> 
> 标签：javascript, jquery, backbone.js

在我使用backbone.js 的单页应用程序中，我收到此错误：`TypeError: Backbone.$ is undefined` 尝试访问同步API 时。

同步 API 以前可以工作。我找不到我弄坏的东西...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T17:20:20.563

诀窍在于，对于某些特定功能，主干对其他库具有可选的依赖性。

在开始时将主干的`$`变量设置为此：

```
Backbone.$ = root.jQuery || root.Zepto || root.ender || root.$; 
```

所以在这种情况下，主干试图将一些处理转发给 jQuery（或另一个）。

当然，这种依赖意味着 jQuery/X 必须在加载主干**之前可用......**

订购 jQuery 和骨干加载解决了这个问题。

# php - 如何在不提交的情况下将文本输入分配给php贵重物品

> ID：15817678
> 
> 赞同：0
> 
> 时间：2013-04-04T17:20:52.613
> 
> 标签：php, mysql, forms, input, submit

嗨，我是网络开发的新手。我有一个提交 php 页面，它正在从以前的表单页面提交数据并显示提交确认信息。但是现在我要让它要求用户在提交到 SQL 之前再输入 2 个东西（姓名和房间号），所以......来自以前表单和名称的信息，房间号将一起插入到 SQL 中。我想在同一个页面中处理这个提交，但是对于新添加的 2 个数据（姓名和房间号）我不想做一个单独的 submit()，因为我不想刷新页面，

我该怎么做？如何将输入标签（Cname）中的值应用于 $Cname ？不刷新页面？这是我的代码：

```
 ...

<head>
<?php

$T1comment1 = $_POST['T1comment1'];//these are from previous form
$T1comment2 = $_POST['T1comment2'];//these are from previous form
$T1comment3 = $_POST['T1comment3'];//these are from previous form
$T1comment4 = $_POST['T1comment4'];//these are from previous form

$item_1 = $_POST['item_1'];//these are from previous form
$item_2 = $_POST['item_2'];//these are from previous form
$item_3 = $_POST['item_3'];//these are from previous form
$item_4 = $_POST['item_4'];//these are from previous form

$Cname = $_POST['Cname'];
$CRnumber = $_POST['CRnumber'];

?>
</head>
<body>

 <div>

   <form method="POST" name="namdAndRm" id="namdAndRm"  action="<?php echo $PHP_SELF;?>"  >

      <input type="text" id="Cname" name="Cname" value="your name here"></input>

      <input type="text" id="CRnumber" name="CRnumber" value="room no."></input>

   </form>

 </div>

<div>

    <div class="Back"></div>

    <div class="submit" onclick="goSubmit();"></div>

</div>

<script type="text/javascript">

function goSubmit(){
    <?php
$Cname = $_POST['Cname'];  //is this the right way to do it? 
$CRnumber = $_POST['CRnumber'];   // I tested a lot, seams direct "=" is not working...

$SqlStatement = "INSERT INTO T3survey (T1item_1, T1comment1, T1item_2, T1comment2, T1item_3, T1comment3, T1item_4, T1comment4, Cname, CRnumber, day) VALUES ('$item_1', '$T1comment1', '$item_2', '$T1comment2', '$item_3', '$T1comment3', '$item_4', '$T1comment4', '$Cname', '$CRnumber',  NOW())";
    $result = mysql_query($SqlStatement,$connection);
 if (!$result){ die("Error " . mysql_errno() . " : " . mysql_error());}
    ?>;
};

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:25:23.293

您需要做的就是在表单中创建一堆隐藏字段，如下所示：

```
<input type='hidden' name ='T1comment1' value='<?php $T1comment1;?>'> 
<input type='hidden' name ='T1comment2' value='<?php $T1comment2;?>'> 
<input type='hidden' name ='T1comment3' value='<?php $T1comment3;?>'> 
<input type='hidden' name ='T1comment4' value='<?php $T1comment4;?>'> 
```

# hibernate - JUnit：在 Hibernate Save 上断言什么

> ID：15817683
> 
> 赞同：1
> 
> 时间：2013-04-04T17:21:18.893
> 
> 标签：hibernate, junit, junit4

我是 JUnit 的新手，并试图在我的旧代码库中实现它。
测试时我应该断言什么`hibernateEntity.save()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:28:13.897

您将在方法中调用 hibernateEntity.save()。像这样 ：

```
public boolean save(..){
  boolean status = false;
  try{
    status = hibernateEntity.save()?
  }catch(Exception e){
     //handle or throw
  } 
 return status;
} 
```

所以要测试保存方法；您将对它的返回值进行断言。所以为了成功保存它的返回值应该是真的。

所以基本上；我们用 Junit 测试行为。您需要测试休眠操作是否成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:09:49.660

解决方案是

```
public void testEntitySave() {
  hibernateEntity.save()

Entity testEntity = hibernateEntity.loadEntityByPK(hibernateEntity.pk);

Assert.assertNotNull(testEntity);

} 
```

# actionscript-3 - 列表组件滚动条保持 View 的全高

> ID：15817687
> 
> 赞同：0
> 
> 时间：2013-04-04T17:21:23.163
> 
> 标签：actionscript-3, apache-flex, list, scrollbar

我正在开发一个 Flex 移动应用程序，并且正在使用带有 MXML 渲染器的 actionscript 组件中定义的 s:List。

在我看来：

```
var movieList:List = new List();
private function created(event:FlexEvent):void
{
   movieList.itemRenderer = new ClassFactory(MovieRenderer);
   movieList.dataProvider = new ArrayList();
   movieList.useVirtualLayout = false;
   movieList.pageScrollingEnabled = true; // if this is omitted scroll bar is invisible
   this.addElement(movieList);
} 
```

返回 HTTPService 调用后：

```
private function movieDataReady(event:events.ExternalDataEvent):void{
     movieList.dataProvider.addItem(event.result);
} 
```

每个 event.result 项都是一个自定义对象。

问题是滚动条似乎是列表的完整高度，而不是视图/屏幕。这使它无用，因为您无法滚动。如果您尝试它会滚动，但在您释放后会立即返回。Scroller 似乎是所有列表项的组合高度的高度。

我之前有它的工作，但我做了一些改变，无法弄清楚我这次错过了什么。

# python - GAE 应用程序在本地引发 DeadlineExceededError 并部署了 DownloadError

> ID：15817694
> 
> 赞同：0
> 
> 时间：2013-04-04T17:22:10.063
> 
> 标签：python, google-app-engine, urlfetch, deadlines

这很奇怪。标题说明了大部分内容，我的代码应该说明其余部分。这是我的`main.py`文件：

```
from google.appengine.api import urlfetch
import webapp2
import jinja2

import json
import os

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
    def get(self):
        response = urlfetch.fetch("http://localhost:8080/api/helloworld?name=totty", method=urlfetch.GET)
        if response.status_code == 200:
            result = json.loads(response.content)

        template_values = {'response': result['msg']}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

app = webapp2.WSGIApplication(
    [('/', MainPage)],
    debug=True) 
```

这是我的`api.py`文件：

```
import webapp2
import json

class HelloWorld(webapp2.RequestHandler):
    def get(self):
        name = self.request.get('name') or 'world'
        msg = "Hello {}!".format(name)
        payload = json.dumps({'msg': msg})
        # payload = json.dumps({'dir': str(dir(self.request)), 'body': str(self.request.body), 'name': str(self.request.arguments())})

        self.response.headers['Content-Type'] = 'application/json'
        self.response.write(payload)

app = webapp2.WSGIApplication(
    [('/api/helloworld', HelloWorld)],
    debug=True) 
```

如果我的`app.yaml`文件有帮助：

```
application: stacksort
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /api/.*
  script: api.app
- url: /.*
  script: main.app

libraries:
- name: webapp2
  version: latest
- name: jinja2
  version: latest 
```

即使我添加`deadline=30`到我的`urlfetch`通话中，也没有任何变化。我使用 JQuery 测试了 API `httpie`，它工作得非常好，并且在 5 秒内返回。

我看了看其他问题，但我仍然跌跌撞撞地陷入黑暗。帮助、提示或重构将不胜感激。

我计划添加对 StackEchange 搜索 API 的调用，所以我怀疑问题也可能出现在那个时候。如果有更好的方法可以做到这一点，请告诉。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:24:39.590

您正在尝试从您的应用程序中获取一个 URL，这在 Google App Engine 上是强烈反对的。

在本地，您将无法调用开发服务器，因为它一次只处理一个请求。未观察到多线程。

注意：新的实验开发服务器现在能够一次处理多个请求。

> 多线程服务为复杂的应用程序提供更好的性能和更正确的语义，例如通过 urlfetch 访问您自己的应用程序不再出现死锁。

在生产环境中，GAE 会阻止 fetch 服务调用相同的应用程序。

> 为了防止应用程序导致请求的无限递归，请求处理程序不允许获取自己的 URL。使用其他方式仍然可能导致无休止的递归，因此如果您的应用可以获取用户提供的 URL 请求，请谨慎行事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:07:13.593

在升级 SDK 时，我注意到[DevServer 页面](https://developers.google.com/appengine/docs/python/tools/devserver#Using_URL_Fetch)中添加了以下内容：

> 注意：`dev_appserver.py`一次只能处理一个请求。如果您的应用程序在处理请求时向自身发出 URL 获取请求，这些请求将在使用开发 Web 服务器时失败。（在 App Engine 上运行时它们不会失败。）要测试此类请求，您可以`dev_appserver.py`在不同端口上运行第二个实例，然后编写应用程序以在向自身发出请求时使用其他服务器。

所以我想这解决了我的问题（或者至少给出了一个令人满意的解释）。

# ios - 无法正确将 UIButton 事件发送到其他视图控制器

> ID：15817698
> 
> 赞同：0
> 
> 时间：2013-04-04T17:22:25.307
> 
> 标签：ios, objective-c, cocoa-touch, design-patterns

有人可以为s之间的一对一事件传输提供一些示例和正式模式`UIViewController`吗？我认为`NSNotificationCenter`不适用于此用例，因为它基于事件总线和广播模式以进行广泛的状态更改，这就是为什么应该将其用于一对多传输。我知道这在这种情况**下**`KVO`也完全不适用，因为它通常用于经典领域的模型和控制器层之间的通信。所以现在我只知道一对一事件传输的一种方式：委托模式。但可能有更优雅而[不是](http://www.infoq.com/presentations/Simple-Made-Easy)解决方案。**`MVC``simple` `easy`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:06:38.453

例如：

在视图中，动作被发送到：

```
@protocol MapViewDelegate <NSObject>

@required

-(void)MapImageButtonClicked:(UIButton*)sender;

@end

@interface MapView : UIView
{
    UIButton    *mapButton;
    id          mapViewDelegate;
}

@property(nonatomic,retain)     id              mapViewDelegate;
@property(nonatomic,retain)     UIButton        *mapButton; 
```

.m

```
 [mapButton addTarget:self.delegate action:@selector(mapImageButtonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

在视图中，动作将从以下位置发送：

```
#import "MapView.h"

@interface MapViewController : UIViewController<MapViewDelegate>
{

}

.m

MapView *map = [[MapView alloc] init];
map.delegate = self;

-(void)MapImageButtonClicked:(UIButton*)sender
{
 //implement the necessary functionality here
} 
```

希望你能明白。请根据您的情况实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:06:41.180

您可以将该方法放在视图界面中的协议中：

```
@protocol MyViewWithButtonDelegateProtocol<NSObject>

-(void)myButtonAction:(id)sender; @end 
```

*   您在具有按钮的视图中放置了一个名为委托的 NSObject 或 UIView 类型的新属性。
*   您使必须处理该操作的视图符合该协议，并且当它启动视图时，将委托属性分配给 self。
*   您在视图控制器实现中实现 myButtonAction。
*   现在您只需执行 [myButton setTarget:delegate action:@selector(myButtonAction:) forControlEvents:UIControlEventTouchUpInside];。**

# backbone.js - Backbone JS视图理论

> ID：15817699
> 
> 赞同：0
> 
> 时间：2013-04-04T17:22:33.023
> 
> 标签：backbone.js

我是 Backbone JS 的新手，在理解一个概念时遇到了一些麻烦。

我有一个面板界面，屏幕上一次显示一个面板。每个面板都由自己的视图控制，并附有自己的模型。现在，每个面板都作为“激活器”选项卡，可以单击以显示下一个面板。

在*我*看来，这些选项卡实际上是父面板视图的子视图。没有面板，标签不应该存在。但是，所有选项卡必须同时出现在屏幕上，以便用户可以在面板（视图）之间切换。因此，基本上所有面板（无论如何都是它们的模板）都将被加载，但在单击选项卡触发之前隐藏，此时将填充或更新其内容。

我的问题，在架构上，带有绑定事件到选项卡视图。因此，例如：

```
window.PanelTabView=Backbone.View.extend({

    className: 'view panel-tab-view',

    el: '#appPanelTabs',

    tagName: 'li',

    events: {
        'click a': 'test'
    },

    initialize: function() {

    },

    render: function(panel) {
        this.$el.append(this.template(panel.toJSON()));
    },

    test: function(x) {
        console.log(this.cid);
    }

}); 
```

因此，当单击选项卡时，会为所有选项卡视图触发每个单击事件。

那么，也许我应该将所有选项卡视为一个视图？但我喜欢从模板中的模块化角度来看，每个选项卡都有自己的视图的想法。

或者，也许我错过了关于 Backbone 及其 MVC 式方法的更多内容。

在这种情况下你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:02:53.517

我不太了解您的问题，但至少我知道您实际上只有一个按钮。因此，您不应该有多个视图（无论如何都没有意义）。但是，您可以做的是在您的模型中使用您的视图将听的“选定”属性。所以基本上，当用户点击你的按钮时，由于你的收藏，你会得到下一个面板（我猜），取消选择前一个面板（将 selected 属性设置为 false），因此它的视图会消失，然后选择下一个，它的视图就会出现。如果你需要，我稍后会放一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:23:40.213

为什么没有一个父视图来简单地管理选项卡，然后简单地将点击委托给选项卡视图？这将是一个非常简单的方法。

或者，您可以使用路由器，在路由器中，您可以根据所采用的特定路由创建单独的选项卡视图。这将允许您的页面可链接。

第一种方法：

```
ParentView = Backbone.View.extend({

    el : '#your-tabs',

    events : {
        'click #tab1' : 'tab1',
        'click #tab2' : 'tab2'
    },

    tab1 : function() {
        var t1 = new Tab1();
        t1.render();
    },

    tab2 : function() {
        var t2 = new Tab2();
        t2.render();
    }
}); 
```

使用路由器：

```
MyRouter = Backbone.Router.extend({

    routes : {
        "tab/1" : 'tab1',
        "tab/2" : 'tab2'
    },

    tab1 : function() {
        var t1 = new Tab1();
        t1.render();
    },

    tab2 : function() {
        var t2 = new Tab2();
        t2.render();
    }

}); 
```

Backbone 对如何构建视图并不特别固执己见，但这些似乎符合他们的思路。

将所有选项卡视为单个视图没有多大意义。仅仅因为一个选项卡上的数据发生变化而重新渲染所有选项卡是愚蠢的。

# .net - 异常 ctor 中的 Contract.Requires 失败并出现错误 CC1027：合同格式错误

> ID：15817701
> 
> 赞同：1
> 
> 时间：2013-04-04T17:23:00.143
> 
> 标签：.net, code-contracts

我正在尝试编写一个异常，并在 ctor 上添加了一个 Contract.Requires 声明。由于某种原因，编译失败并出现错误 CC1027: Malformed contract I am using the latest version (1.4.60317.12) of code contract addin to VS2012

```
Public NotInheritable Class ValidationException
    Inherits Exception

    Public Property Result() As FluentValidation.Results.ValidationResult

    Public Sub New(ByVal ValidateResult As FluentValidation.Results.ValidationResult)
        Contract.Requires(Of ArgumentNullException)(ValidateResult IsNot Nothing, "ValidateResult is nothing.")

        Me.Result = ValidateResult
    End Sub

End Class 
```

如果我删除 Contact.Requires 并放

```
 If ValidateResult Is Nothing Then
            Throw New ArgumentNullException("ValidateResult", "ValidateResult is nothing.")
        End If
        Contract.EndContractBlock() 
```

而是编译工作，但我收到警告 CC1057：方法 'WindowsApplication1.Data.Validation.ValidationException.#ctor(FluentValidation.Results.ValidationResult)' 具有自定义参数验证，但装配模式未设置为支持此。它将被视为要求。

表示支持Requires *。*

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:33:26.797

我看到了相同的行为 - 在方法中工作正常，但在构造函数中导致格式错误的合同异常。我看到其他人（一年前）也有同样的问题，并已[在 MSDN 上发布](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/thread/2e37bd13-f45d-4327-bfb3-85e979d8ea29/)。Mike Barnett 很棒，如果他能够重新创建它，应该能够修复它。

# git - github 上的 Oauth 克隆不起作用（致命：身份验证失败）

> ID：15817709
> 
> 赞同：1
> 
> 时间：2013-04-04T17:23:21.943
> 
> 标签：git, oauth, github, cloning

我正在尝试在 github 中测试我的应用程序。我有一个朋友授权我的应用程序访问私人和公共回购，一切都很好。尽管如此，由于某种原因，我似乎无法使用在他授权我的应用程序后返回的 Oauth 令牌克隆他的存储库。

我使用此链接中概述的说明进行克隆：[https ://github.com/blog/1270-easier-builds-and-deployments-using-git-over-https-and-oauth](https://github.com/blog/1270-easier-builds-and-deployments-using-git-over-https-and-oauth)

出来的终端看起来像：

```
Cloning into 'repoName...
fatal: Authentication failed 
```

这个错误的真正原因是什么？我确保我的应用程序得到了适当的授权。它可能与我计算机上的 ssh 密钥有关吗？据我了解，使用令牌我不需要 ssh 密钥来克隆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:45:38.397

那很奇怪。我刚试过，它对我有用。这是我所做的：

1.  [使用Authorizations API](http://developer.github.com/v3/oauth/#create-a-new-authorization)创建新令牌。请注意，您必须指定令牌应该（至少）适用于`repo` [范围](http://developer.github.com/v3/oauth/#scopes)。

2.  git 使用仓库的 HTTP URL 克隆一个私有仓库（不是 git 或 ssh URL）

3.  输入我收到的令牌作为用户名，没有任何内容（空白）作为密码。

如果我不得不猜测您的场景中的问题是什么，我会说这是以下两件事之一（或两者兼而有之）：

1.  您创建的令牌不包含`repo`克隆所需的范围

2.  您用于克隆的 URL 不是 HTTP URL，而是 GIT 或 SSH URL。确保您使用的是要克隆的存储库的 HTTP URL。

# php - 没有行号的 PHPDOC 示例

> ID：15817712
> 
> 赞同：2
> 
> 时间：2013-04-04T17:23:31.987
> 
> 标签：php, phpdoc

根据 PHPDocumentor 的文档，要显示一个示例，它将是这样的：

```
@example [location] [<start-line> [<number-of-lines>] ] [<description>] 
```

如果代码从不更改，这似乎是一个有效的解决方案，但是无论何时您将新代码添加到该位置的任何位置，您的起始行都可能发生变化，这意味着您必须不断更新这些不同的引用。

有没有更好的方法来展示如何在 DocBlock 中使用类方法的示例，而无需引用外部当前使用示例？

这是我的目标：

```
/**
 * @example This is how you use this method:
 *
 *     $baz = Foo::bar( array('bing' => $bing) ); 
 */ 
```

然后它作为示例显示在文档中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:23:10.493

您可以通过“代码”分隔符在文档块本身中显示代码示例。因此，对于您的原始示例：

```
/**
 * This is how you use this method:
 * <code>
 *     $baz = Foo::bar( array('bing' => $bing) ); 
 * </code>
 */ 
```

@example 标记的手册页 [1] 显示了 docblock 中的“代码”部分以及指向单独文件中行的 @example 指针。

[1] -- [http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.example.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.example.pkg.html)

# java - 在 Eclipse 上删除 WindowBuilder Pro JFrame 中的绿色部分

> ID：15817713
> 
> 赞同：2
> 
> 时间：2013-04-04T17:23:33.803
> 
> 标签：java, eclipse, swing, jframe, windowbuilder

我创建了一个`JFrame`，我想要的只是一个标签和一个滑块（非常简单的 GUI）。但是 Eclipse 的 WindowBuilder 插件给了我这些我没有要求的奇怪部分，我不知道如何摆脱它们并重新调整我的`JFrame`. 拖动似乎不起作用。

![在此处输入图像描述](https://i.stack.imgur.com/rv5lr.jpg)

如何删除它们的绿色部分（北、西、中心 .. 等）并重新调整我的 JFrame 大小，以便它很好地环绕`JSlider`我要放置的部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-23T17:12:52.883

我面临和你一样的问题！但我玩了一下，结果发现你可以在布局下添加一个“绝对布局”，然后你可以自由地将你的项目放在你想要的地方！:)

# ios - 如何防止音频控件在 iOS UIWebView 中消失？

> ID：15817716
> 
> 赞同：1
> 
> 时间：2013-04-04T17:23:41.657
> 
> 标签：ios, html, uiwebview, html5-audio

我们在我们的应用程序中使用 UIWebView，并通过 HTML 5 音频标签向视图提供一些音频。音频播放效果很好，但我们的问题是播放大约 4-5 秒后，控件消失，您必须点击屏幕区域才能再次显示控件。我认为音频控件正在重用视频控件代码，在播放期间隐藏控件是有意义的，但是当使用音频控件并且唯一可见的是控件时，它们似乎应该留在屏幕上。

这是代码的样子：

```
<p style='display: none'>Audio Message</p>
<audio style='display: block; padding-left: 10px; padding-right: 10px' width='200' controls='controls'>
    <source src='audio-test-file.mp4' type='audio/mp4'/>
</audio> 
```

从技术上讲，该文件是一个 MPEG4 视频，开头有一个单帧显示静态图像，但在这种情况下，我们只是在播放音频。我想知道这是否会使音频控制器混淆以为它是视频，因此它隐藏了控件。

有没有办法让控件在音频播放期间保持在屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:29:35.420

怀疑是 MP4 中的视频帧导致了问题。我能够在没有视频的情况下生成音频，并且播放控件在消息期间保持在屏幕上。

感谢 Kevin Ennis 对 MP3 文件的实际尝试。

# rpm - 重命名 munin 包时 postun 脚本的问题

> ID：15817718
> 
> 赞同：7
> 
> 时间：2013-04-04T17:23:56.700
> 
> 标签：rpm, yum, rpmbuild, munin

我有两个问题想找出解决方案：

我正在重命名 munin 2.0 包，并且在 RPM 的 SPEC 文件中我必须废弃原来的 munin 包。

当替换现有的 1.x munin 包作为 munin-node 的 postun 脚本的一部分时，它会删除 munin 用户。

```
postuninstall scriptlet (using /bin/sh):
if [ $1 -eq 0 ]; then
    /usr/sbin/userdel munin || logger -t munin/rpm "User \"munin\" could not be deleted."
#       /usr/sbin/groupdel munin || logger -t munin/rpm "Group \"munin\" could not be deleted."
fi 
```

当我替换现有的 munin 2.0 包时，postun 会删除插件目录的内容。

```
postuninstall scriptlet (using /bin/sh):
if [ "$1" = "0" ]; then
   [ -d /etc/munin/plugins ] && \
find /etc/munin/plugins/ -maxdepth 1 -type l -print0 | \
   xargs -0 rm || :
fi 
```

由于 yum 安装了新包，然后运行旧包的帖子，并且`$1 = 0`在这两种情况下，它都会在我的 rpm 安装后运行脚本。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:52:32.627

我唯一能想到的就是一个hack，你将你的内容复制`%pre`到另一个位置，然后`%trigger`卸载另一个包将它们放回去。不是最好的形式，但它可能会起作用。还要求您在卸载之前安装。

# json - 带有任意键的 json 的 golang 结构

> ID：15817720
> 
> 赞同：13
> 
> 时间：2013-04-04T17:24:07.327
> 
> 标签：json, go

我正在尝试编写一个可以处理这样的 json 响应的结构类型

```
{"items":
[{"name": "thing",
  "image_urls": {
    "50x100": [{
      "url": "http://site.com/images/1/50x100.jpg",
      "width": 50,
      "height": 100
    }, {
      "url": "http://site.com/images/2/50x100.jpg",
      "width": 50,
      "height": 100
    }],
    "200x300": [{
      "url": "http://site.com/images/1/200x300.jpg",
      "width": 200,
      "height": 300
    }],
    "400x520": [{
      "url": "http://site.com/images/1/400x520.jpg",
      "width": 400,
      "height": 520
    }]
  }
} 
```

由于键每次都不相同......不同的响应可能有或多或少的键，不同的键，正如您所见，使用 50x100 返回特定尺寸的多个图像如何创建与此匹配的结构？

我可以这样做：

```
type ImageURL struct {
    Url string
    Width, Height int
} 
```

对于单个项目，以及特定键的列表。但是包含结构看起来如何？

就像是：

```
type Images struct {
    50x100 []ImageURL
    ...
}
type Items struct {
    name string
    Image_Urls []Images
} 
```

可能有效，但我无法列举所有可能的图像尺寸响应。最后的 Image_Urls 也没有真正的列表。如果可能的话，我希望能够将它直接转储到 json.Unmarshal 中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T18:06:33.713

你的 json 在我看来更像是一张地图。

```
type Items map[string][]ImageUrl 
```

应该做你想做的。

# javascript - Dynamics CRM 2011 Web 资源未在 Chrome 中显示？

> ID：15817721
> 
> 赞同：0
> 
> 时间：2013-04-04T17:24:19.103
> 
> 标签：javascript, jquery, dynamics-crm-2011, html

我已经实现了这个解决方案： [http ://crm2011lookuppreview.codeplex.com/](http://crm2011lookuppreview.codeplex.com/)

它在 Outlook 和 IE 上运行良好，但在 Chrome 上根本不显示预览。我尝试将 jQuery .show() 命令更改为 .style.display = "block" 但没有。下面是解决方案中包含的负责构建 HTML 并显示它的 JavaScript。Chrome 似乎根本没有加载网络资源，因为至少在 IE 上，资源的轮廓是可见的，然后数据会出现并填充该轮廓。在 Chrome 中，只有空白区域。但这可能是 Chrome 的渲染方式，我不知道......

```
//LookupPreviewScript.js
﻿///<reference path="XrmPage-vsdoc.js"/>
var XrmPage;
var popWindow;
var _VerticalLayout = "V";
var _HorizontalLayout = "H";
var _ZLayout = "Z";
var _NLayout = "N";

function LoadLookPreviewDelayed(webResourceId, lookupAttributeId, columnList, layout)
{
    myFn = function(){LoadLookPreview(webResourceId, lookupAttributeId, columnList, layout);}
    setTimeout(myFn, 2000);
    Xrm.Page.getAttribute(lookupAttributeId.toLowerCase()).addOnChange(myFn);
}

function FormHTMLTable(divTag, controlSet, layout)
{
    var str = "";
    if(layout == _VerticalLayout)
    {
        str = "<table><tbody>";
        for(var k=0; k < controlSet.length; k++){
        str += "<tr>";
        str += "<td class='headerCss'>" + controlSet[k].attributeDisplayName + "</td>";
        str += "<td>" + controlSet[k].attributeValue + "</td>";
        str += "</tr>";
        }
        str += "</tbody></table>";                              
    }
    else if(layout == _ZLayout)
    {
        str = '<table>';
        str += '<tbody>';
        for (var j = 0; j < controlSet.length; j++) {
            var index = j + 1;
            str += "<tr>"
            str += "<td class='headerCss'>" + controlSet[j].attributeDisplayName + "</td>";
            str += "<td>" + controlSet[j].attributeValue + "</td>";
            str += "<td class='seperator'></td>";
            if(index < controlSet.length)
            {
                str += "<td class='headerCss'>" + controlSet[index].attributeDisplayName + "</td>";
                str += "<td>" + controlSet[index].attributeValue + "</td>";
            }
            str += "</tr>"
            j++;
        }
        str += '</tbody>'
        str += '</table>';
    }
    else if(layout == _NLayout)
    {
        str = '<table>';
        str += '<tbody>';
        var half = Math.round(controlSet.length / 2)
        for (var j = 0; j < controlSet.length; j++) {
            var index = j + half;
            if (j < half) {
                str += "<tr>"
                str += "<td class='headerCss'>" + controlSet[j].attributeDisplayName + "</td>";
                str += "<td>" + controlSet[j].attributeValue + "</td>";
                str += "<td class='seperator'></td>";
                if (index < controlSet.length) {
                    str += "<td class='headerCss'>" + controlSet[index].attributeDisplayName + "</td>";
                    str += "<td>" + controlSet[index].attributeValue + "</td>";
                }
                str += "</tr>"
            }
        }
        str += '</tbody>'
        str += '</table>';
    }
    else 
    {
        str = "<table><thead><tr>";
        for(var k=0; k < controlSet.length; k++){
        str += "<th>" + controlSet[k].attributeDisplayName + "</th>";
        }
        str += "</tr></thead><tbody><tr>";
        for (var i = 0; i < controlSet.length; i++){
        str += "<td>" + controlSet[i].attributeValue + "</td>";
        }
        str += "</tr></tbody></table>";
     }
     divTag.innerHTML = str;
     $(divTag).slideDown(1000);
}

function LoadLookPreview(webResourceId, lookupAttributeId, columnList, layout)
{
   var divTag;
   var webResource = Xrm.Page.getControl(webResourceId);
   var columnSet = new Array();
   var columnHeaders = new Array();
   var controlSet = new Array();

   successCallBack =  function (attributeCollection) {
                 for(var k=0; k < controlSet.length; k++)
                 {
                    for (var i = 0; i < attributeCollection.length; i++) 
                    {
                        if(attributeCollection[i].attributeName == controlSet[k].attributeLogicalName)
                        {
                             controlSet[k].attributeValue = attributeCollection[i].attributeValue;
                             break;
                        }
                    }
                 }

                 FormHTMLTable(divTag, controlSet, layout);
          };

        errorCallBack =  function (error) {
             divTag.innerHTML = "<span class='error'>" + error.message + "</span>";
             $(divTag).slideDown(500);
         };

   if(webResource == null)
   {
       alert('No WebResource found with Id = ' + webResourceId);
   }
   else
   {
        divTag = document.getElementById(webResourceId).contentWindow.document.getElementById('lookupDIV');
        if(divTag != null)
        {
            divTag.display = "none";
            var columns = columnList.split('|');
            for(var i = 0 ; i < columns.length; i++)
            {
                var s = columns[i].split('#');
                var _control = new Object();
                _control.attributeDisplayName = s[0];
                _control.attributeLogicalName = s[1].toLowerCase().replace(/^\s+|\s+$/g, '')
                _control.attributeValue = '';
                controlSet.push(_control);

                columnSet.push(s[1].toLowerCase().replace(/^\s+|\s+$/g, ''));
            }

            if(Xrm.Page.getAttribute(lookupAttributeId.toLowerCase()) != null && Xrm.Page.getAttribute(lookupAttributeId.toLowerCase()).getValue() != null)
            {
                var id = Xrm.Page.getAttribute(lookupAttributeId).getValue()[0].id;
                var entityName = Xrm.Page.getAttribute(lookupAttributeId).getValue()[0].entityType;
                SDK.RetrieveData.RetrieveRequestAsync(entityName, id, columnSet, successCallBack, errorCallBack);
            }
            else
            {
                FormHTMLTable(divTag, controlSet, layout);
            }
        }
        else
        {
            alert("Error in Loading Web Resource (DIV is NULL)")
        }
   }
} 
```

我猜这对于 DIV 的渲染方式或时间很简单，但我并不精通交叉兼容性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:23:12.793

该问题似乎与 Chrome 和 Dynamics CRM 2011 SDK 函数 SDK.RetrieveData 存在某种不兼容。我刚刚打开了解决方案中包含的 SDK.RetrieveData.js 文件，并用此 URL 指定的代码替换了它，她现在的工作就像一个魅力！

[http://crm2011lookuppreview.codeplex.com/discussions/431830](http://crm2011lookuppreview.codeplex.com/discussions/431830)

# mysql - 文件系统v/s数据库

> ID：15817727
> 
> 赞同：0
> 
> 时间：2013-04-04T17:24:38.880
> 
> 标签：mysql, database, performance, filesystems

我的问题是面向方法的。我目前正在做一些项目。所有项目都将面临需要获取和维护的大量数据。我的一个项目是关于网络爬虫系统。正如它所定义的，网络爬虫将存储大量数据。我现在正在mysql数据库中维护数据。但是我怀疑如果数据库很大会发生什么。？我不想妥协于系统的速度。我有2个问题，

1) 当 db 变大时，MySql 会面临速度问题吗？
2）如果我为每个网站创建单独的文件并将其数据存储在该文件中会怎样。它会帮助解决速度问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:29:02.747

1.  只要您正确优化表和查询，您的 MYSQL 服务器应该能够扩展，只要它有适当的资源，例如 RAM/CPU。您可能还需要考虑使用 memcached 之类的工具来缓存查询。
2.  将数据存储在平面文件中会减慢您的 web 应用程序，坚持使用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:30:59.810

一般来说，数据库是为性能而构建的，并且可以很好地处理大量数据。他们甚至索引数据以便快速访问，并且非常聪明地快速获取数据（查询优化）。

因此，IMO，如果您*不必*在数据库上执行昂贵的查询（有很多很多的连接）或者必须执行*SQL 未涵盖的查询，那么*您完全可以使用关系数据库。如果您担心磁盘空间，您可以尝试使用具有压缩功能的 PostgreSQL，（以便将更多数据保存在内存中以获得更好的性能）

# html - CSS：渐变仅适用于背景的一半，但背景基色适用于整个页面？

> ID：15817728
> 
> 赞同：0
> 
> 时间：2013-04-04T17:24:39.010
> 
> 标签：html, css, gradient

所以我想要做的是在标题和导航栏下方的整个网站背景中添加一个轻微的渐变。我想将它添加到正文中，并且容器上没有背景。发生的情况是，如果我将容器设为渐变，它会应用于容器，并且主体会留在下方，无论颜色如何，或者只是空白。

如果我将主体设置为渐变，并将容器背景设置为无，我将在容器背景上得到一个奇怪的较暗渐变，并且在页面的下半部分（主体部分）上得到正确的渐变。这是执行此操作的代码：

我的 HTML：

```
<body>

<div id="header">

    <h1>stuff</h1>
    <p>more stuff</p>

</div>

<div id="navbar"></div>

<div id="container">

    <div id="main_text">
        main text of site
</div>
</div>
</body> 
```

这是我的CSS：

```
#container {
margin: 0 auto;
padding-left: 0px;
padding-right: 0px;
overflow: hidden;

background: none;
}
#navbar {
padding: 0px;
height: 30px;
width: auto;
background-position: bottom;
background-color: #000;
}
#main_text {
margin: auto;
margin-top: 20px;
overflow: hidden;
width: 1000px;
border: 1px outset #000;
padding-top: 10px;
padding-right: 0px;
padding-bottom: 0px;
padding-left: 0px;
background-color: #FFF;
}

#header {
height: 100px;
margin: 0 auto;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
background-color: #FFF;
background: linear-gradient(to bottom, #86b9e0 0%,#2989d8 50%,#0e75c9 100%);       
}
body {
padding: 0px;
margin: 0px;
background: linear-gradient(to bottom, #e5e5e5 0%,#afafaf 53%,#a0a0a0 100%);
} 
```

我不确定我是否缺少一些非常简单的东西，或者我是否应该以完全不同的方式设计页面。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:33:23.643

尝试将此添加到您的CSS：

```
html, body {
min-height: 100%;
height: auto;    
} 
```

这迫使身体至少占据视口的高度。

在此处查看示例：http: [//jsfiddle.net/ZzArv/](http://jsfiddle.net/ZzArv/)

# php - Paypal API - PHP 中的 PayPalNVP 包装器

> ID：15817734
> 
> 赞同：0
> 
> 时间：2013-04-04T17:24:55.880
> 
> 标签：php, api, paypal

我正在使用带有包装类 (PayPalNVP) 的 Paypal API，并试图在 Paypal 上获取生成的付款页面，以在左侧显示项目描述和最终总额。现在它什么也没显示。

我正在尝试将以下变量传递给 Paypal：

```
$paypal->setNVP("RETURNURL", "http://www.mysite.ca/confirm.php");
$paypal->setNVP("EMAIL", "$strPaypalEmail"); 
$paypal->setNVP("CURRENCYCODE", "CAD");
$paypal->setNVP("AMT", number_format($fltGrandTotal, 2));
$paypal->setNVP("L_PAYMENTREQUEST_0_NAME0", "2013 Golf Registration");
$paypal->setNVP("L_DESC0", "2013 Golf Registration");
$paypal->setNVP("L_PAYMENTREQUEST_0_AMT0", number_format($fltGrandTotal, 2));
$paypal->setNVP("ITEMAMT", number_format($fltGrandTotal, 2));
$paypal->setNVP("CUSTOM", $amount);
$paypal->setNVP("INVNUM", $orderID); 
```

我认为这会将购买的描述设置为“2013 Golf Registration”并显示最终总数......但事实并非如此。

任何意见，将不胜感激。

请求/响应如上要求：

```
Array
(
[TOKEN] => EC%2d8E276085HF4665733
[TIMESTAMP] => 2013%2d04%2d04T20%3a08%3a15Z
[CORRELATIONID] => 5b4a7f1b97a0a
[ACK] => Success
[VERSION] => 51%2e0
[BUILD] => 5618210
[EMAIL] => xxx@xxx.com
[PAYERID] => XXXXX
[PAYERSTATUS] => verified
[FIRSTNAME] => John
[LASTNAME] => Smith
[COUNTRYCODE] => CA
[SHIPTONAME] => John Smith
[SHIPTOSTREET] => 123 Here
[SHIPTOSTREET2] => PO BOX 164
[SHIPTOCITY] => Here
[SHIPTOSTATE] => There
[SHIPTOZIP] => K1K1K1
[SHIPTOCOUNTRYCODE] => CA
[SHIPTOCOUNTRYNAME] => Canada
[ADDRESSSTATUS] => Confirmed
[CUSTOM] => 1%2e00
[INVNUM] => 9
)

Array
(
[TOKEN] => EC%2d8E276085HF4665733
[TIMESTAMP] => 2013%2d04%2d04T20%3a08%3a18Z
[CORRELATIONID] => 33790dbf25c30
[ACK] => Success
[VERSION] => 51%2e0
[BUILD] => 5618210
[TRANSACTIONID] => 5V299088DL2402133
[TRANSACTIONTYPE] => expresscheckout
[PAYMENTTYPE] => instant
[ORDERTIME] => 2013%2d04%2d04T20%3a08%3a17Z
[AMT] => 1%2e00
[FEEAMT] => 0%2e33
[TAXAMT] => 0%2e00
[CURRENCYCODE] => CAD
[PAYMENTSTATUS] => Completed
[PENDINGREASON] => None
[REASONCODE] => None
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:20:29.397

我没有在您添加的内容中看到原始 NVP 请求（仅来自 PayPal 的回复）

但这里有一组成功的示例 NVP：

```
PAYMENTREQUEST_0_AMT=10.00
PAYMENTREQUEST_0_ITEMAMT=10.00
L_PAYMENTREQUEST_0_AMT0=10.00
L_PAYMENTREQUEST_0_NAME0=item name 
```

# c# - C# 我可以将字典中对象的属性显示为 ListControl.DisplayMember 吗？

> ID：15817739
> 
> 赞同：6
> 
> 时间：2013-04-04T17:25:17.630
> 
> 标签：c#, dictionary, listcontrol

目的是将列表视为“名称”列表。

这是字典：

```
class Scripts
    {
        public Dictionary<int, Script> scripts = new Dictionary<int, Script>();
        ...
    } 
```

这是我所追求的属性“名称”：

```
class Script
    {
        public string name { get; set; }
        ...
    } 
```

这就是问题所在：

```
public partial class MainForm : Form
{
    Scripts allScripts;

    public MainForm()
    {
        InitializeComponent();
        allScripts = new Scripts();
        setupDataSources();
    }

    private void setupDataSources()
    {
        BindingSource ketchup = new BindingSource(allScripts.scripts, null);
        //THIS LINE:
        listBoxScripts.DisplayMember = allScripts.scripts["Key"].name.ToString();
        listBoxScripts.ValueMember = "Key";
        listBoxScripts.DataSource = ketchup;
    }
    ...
} 
```

我只是想不出如何使这条线工作！非常感谢您的建议！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:05:35.587

您可以绑定`Value`和覆盖类中`ToString`的方法`Script`。

```
private void setupDataSources()
{            
    BindingSource ketchup = new BindingSource(allScripts.scripts, null);
    listBoxScripts.DisplayMember = "Value";
    listBoxScripts.ValueMember = "Key";
    listBoxScripts.DataSource = ketchup;            
} 
```

脚本类：

```
class Script
{
    public string name { get; set; }

    public override string ToString()
    {
        return name;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:30:39.407

您将“name”的实际**值**设置为 DisplayMember，因此除非您随机将“name”中的值设置为与属性相同的文本，否则您将永远不会显示它。

你最好只做：

```
listBoxScripts.DisplayMember = "name"; 
```

一定？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:30:44.240

尝试将字典元素转换为 Script 对象

```
listBoxScripts.DisplayMember = ((Script)allScripts.scripts["Key"]).name.ToString(); 
```

# ios - 设置包含视图控制器的框架

> ID：15817743
> 
> 赞同：0
> 
> 时间：2013-04-04T17:25:25.060
> 
> 标签：ios, uiviewcontroller

我在 iOS 应用程序中使用 UIViewController 容器。将视图控制器的视图框架添加到父 UIViewController 后，设置视图控制器的框架有什么特别之处吗？或者我可以像设置任何其他子视图一样设置视图的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:27:46.313

您可以设置包含的控制器的视图而无需任何额外考虑。

# facebook-graph-api - 是否可以获得您在自己的个人资料中接受的应用程序的访问令牌？

> ID：15817745
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:25:26.250
> 
> 标签：facebook-graph-api

假设我接受了一个名为“HelloWorld”的应用程序，有没有办法获得已授予“HelloWorld”创建者的令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:36:02.750

取决于应用程序是否允许客户端身份验证。您只需要 redirect_uri 和 client_id（应用程序 ID）

```
https://www.facebook.com/dialog/oauth?
  client_id=YOUR_APP_ID
  &redirect_uri=YOUR_REDIRECT_URI
  &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES
  &response_type=token 
```

返回的令牌将与授予应用程序的令牌相同，只要它尚未过期或令牌已从授权中撤销。

你是否真的应该这样做完全是下一件事情。我只是说存在这种可能性。

# node.js - 使用 aws-sdk 将 gm 调整大小的图像上传到 s3

> ID：15817746
> 
> 赞同：15
> 
> 时间：2013-04-04T17:25:26.380
> 
> 标签：node.js, file-upload, amazon-s3, streaming

所以我想做的是从 url 流式传输图像，用 graphicsmagick 处理它并将其流式上传到 s3。我只是不让它工作。

将处理后的图像流式传输到本地磁盘（使用 fs.createWriteStream）可以正常工作。

当我缓冲我的流时，s3 中的最终图像至少具有预期的大小（kb-wise），但我无法打开该图像。

这就是我目前的进展：

```
var request = require('request');

var gm = require("gm");

var AWS = require('aws-sdk');

var mime = require('mime');

var s3 = new AWS.S3();

gm(request('http://www.some-domain.com/some-image.jpg'), "my-image.jpg")
  .resize("100^", "100^")
  .stream(function(err, stdout, stderr) {
    var str = '';
    stdout.on('data', function(data) {
       str += data;
    });
    stdout.on('end', function(data) {
      var data = {
        Bucket: "my-bucket",
        Key: "my-image.jpg",
        Body: new Buffer(str, 'binary'), // thats where im probably wrong
        ContentType: mime.lookup("my-image.jpg")
      };
      s3.client.putObject(data, function(err, res) {
        console.log("done");
      });
    });
  }); 
```

我确实尝试了一些东西，比如创建一个 filewritestream 和 filereadstream，但我认为应该有一些更清洁的更好的解决方案来解决这个问题......

编辑：我尝试的第一件事是将 Body 设置为标准输出（@AndyD 的建议答案）：

```
var data = {
    Bucket: "my-bucket",
    Key: "my-image.jpg",
    Body: stdout,
    ContentType: mime.lookup("my-image.jpg")
  }; 
```

但这会返回以下错误：

```
Cannot determine length of [object Object]' 
```

编辑2：

*   nodeversion：0.8.6（我也尝试过 0.8.22 和 0.10.0）
*   aws-sdk：0.9.7-pre.8（今天安装）

完整的错误：

```
{ [Error: Cannot determine length of [object Object]]
  message: 'Cannot determine length of [object Object]',
  object:
  { _handle:
   { writeQueueSize: 0,
    owner: [Circular],
    onread: [Function: onread] },
 _pendingWriteReqs: 0,
 _flags: 0,
 _connectQueueSize: 0,
 destroyed: false,
 errorEmitted: false,
 bytesRead: 0,
 _bytesDispatched: 0,
 allowHalfOpen: undefined,
 writable: false,
 readable: true,
 _paused: false,
 _events: { close: [Function], error: [Function: handlerr] } },
name: 'Error' } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T17:54:58.520

您不需要自己读取流（在您的情况下，由于 var str='' ，您似乎正在从二进制转换为字符串并返回，然后附加作为二进制缓冲区等的数据......

尝试让 putObject 像这样对流进行管道传输：

```
gm(request('http://www.some-domain.com/some-image.jpg'), "my-image.jpg")
  .resize("100^", "100^")
  .stream(function(err, stdout, stderr) {
      var data = {
        Bucket: "my-bucket",
        Key: "my-image.jpg",
        Body: stdout
        ContentType: mime.lookup("my-image.jpg")
      };
      s3.client.putObject(data, function(err, res) {
        console.log("done");
      });
    });
  }); 
```

有关更多信息，请参阅这些[发行说明](http://aws.amazon.com/releasenotes/4656127103016393)。

如果流/管道不起作用，那么类似这样的东西可能会将所有内容加载到内存中然后上传。在这种情况下，我认为您仅限于 4Mb。

```
 var buf = new Buffer('');
    stdout.on('data', function(data) {
       buf = Buffer.concat([buf, data]);
    });
    stdout.on('end', function(data) {
      var data = {
        Bucket: "my-bucket",
        Key: "my-image.jpg",
        Body: buf,
        ContentType: mime.lookup("my-image.jpg")
      };
      s3.client.putObject(data, function(err, res) {
        console.log("done");
      });
    }); 
```

# php - 将 div 的内容从另一个域加载到我的页面的 php 变量

> ID：15817749
> 
> 赞同：0
> 
> 时间：2013-04-04T17:25:42.560
> 
> 标签：php, jquery, html

我试图弄清楚如何从另一个站点（具有不同的域名）获取信息并将其放在我的 php 程序中。说明：用户输入来自另一个站点的 URL。jQuery 或 PHP 从输入的 URL 中获取信息。我知道信息在哪里（我知道它的 div ID），例如，该 var 作为变量 $kaina 放入我的 php 程序中。

例如：用户输入 URL：[http](http://www.sportsdirect.com/lee-cooper-bud-mens-boots-118358) ://www.sportsdirect.com/lee-cooper-bud-mens-boots-118358 我想得到价格。(27,99)

我应该使用什么语言？php？还是jQuery？还是别的什么？我应该使用什么功能？程序应该是什么样子？

谢谢您的回答 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:32:05.780

我想说您必须使用 php（curl 或 file_get_contents）将页面下载到您的服务器上，对其进行解析或使用正则表达式来获取价格。但在这种情况下，它会更加棘手，因为看起来这个链接指向一个使用 javascript 的页面。

但是您必须知道如何提取数据的格式。所以 PHP 将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:32:07.857

PHP 的 cURL 库应该为您解决问题：http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

```
<?php
$ch = curl_init("http://www.example.com/");
$fp = fopen("example_homepage.txt", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:35:49.233

您需要研究下面提到的每个步骤，

您可以做的一件事是将用户输入的消息发布到服务器意味着 PHP 文件，在那里您可以提取用户输入的 url，为了从用户帖子中提取 URL，您可以使用正则表达式搜索： - 检查此链接：- [从 PHP 中的文本中提取 URL](https://stackoverflow.com/questions/910912/extract-urls-from-text-in-php)

知道你可以 curl 到从用户输入中提取的 url。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_URL, $extracted_url ); 
$html = curl_exec ( $ch ); 
curl_close($ch); 
```

curl 输出将包含页面的完整 html，然后您可以使用 HTML 解析器

```
$DOM = new DOMDocument;
$DOM->loadHTML($str); 
```

解析直到找到所需的 div，以获取其值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T18:31:55.000

我大概会做这样的事情：

1.  获取文件内容：`$contents = file_get_contents("http://www.sportsdirect.com/lee-cooper-bud-mens-boots-118358")`
2.  将您刚刚获得的内容转换为 xml：`$xml = new SimpleXMLElement($contents);`
3.  `itemprop="price"`使用 xpath 查询在 xml 中搜索具有属性的节点
4.  阅读该节点的内容，等等，你有你的价格

# php - 让 Apache 支持 application/x-httpd-php53 mime 类型

> ID：15817752
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:25:51.993
> 
> 标签：php, apache, .htaccess

我有一个远程需要以下指令的 Joomla 安装：

```
AddType application/x-httpd-php53 .php 
```

在本地，Apache 只识别 x-httpd-php（无版本）。我在本地只运行 5.3。我怎样才能像“别名”`application/x-httpd-php53`一样处理`application/x-httpd-php`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:17:05.173

我想出了一个解决方法。这似乎是一个普遍的问题。生产主机经常允许根据该`AddType`指令选择 php 版本。我想忽略它以进行本地开发。

使用 mod_rewrite 可以解决这个问题（需要使用 设置环境变量`SetEnvIf`）：

```
RewriteEngine On

# Use PHP 5.3
RewriteCond %{ENV:HTTP_ENVIRONMENT} !^development$
RewriteCond %{REQUEST_FILENAME} \.php$
RewriteRule ^ - [H=application/x-httpd-php53] 
```

# ruby-on-rails-3 - 集成测试 facebook 应用程序的最佳方法是什么？

> ID：15817753
> 
> 赞同：0
> 
> 时间：2013-04-04T17:25:52.933
> 
> 标签：ruby-on-rails-3, facebook, tdd, capybara

所以，我有一个我正在测试的 facebook 应用程序。我想测试用户在应用程序上的交互，但我遇到了问题。

我正在测试的用户流程相对简单：当用户访问页面内的 facebook 应用程序时，如果他们已经喜欢该应用程序所在的页面，他们将看到 x-content，如果他们还没有喜欢页面，他们将遇到一个类似的门。我的目标是确认我的用户在喜欢 Facebook 页面后能够看到某些文本。

我的测试：

```
describe "facebook" do
  it "visit and like page", :vcr do
    Capybara.current_driver = :selenium
    visit "https://www.facebook.com/pages/Testpage/433439410073990?id=433439410073990&sk=app_454512097948559"
    within('#login_form') do
        fill_in "email", with: FB_EMAIL
        fill_in "pass", with: FB_PASSWORD
        click_on "Log In"
    end
    page.should have_content('Testpage')

    within('#timelineHeadlineLikeButton') do
      click_on 'like'
    end
  end
end 
```

我的问题是我不知道如何让水豚喜欢这个页面。

您如何集成测试您的 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:09:57.977

我没有完整的例子。

**test.rb** （如果环境是测试，您可以将其添加到初始化程序并添加它）。

```
OmniAuth.config.test_mode = true

  FACEBOOK_INFO = {
    "id"=> "220449",
    "email" => "nypee@facebook.com",
  }

  OmniAuth.config.mock_auth[:facebook] = {
    "uid" => '112345',
    "provider" => 'facebook',
    "user_info" => {"name" => "Nype Aylor", "nickname" => 'Aylor'},
    "credentials" => {"token" => 'plataformatec'},
    "extra" => {"user_hash" => FACEBOOK_INFO}
  } 
```

这模拟了对omniauth 的调用。因此，在您的测试中，当您模拟点击 facebook 按钮时，您将得到的响应来自

`OmniAuth.config.mock_auth[:facebook].`

我认为是将测试与 Facebook 集成的最佳方式

# matlab - 在循环中绘制多条线时保留颜色（Matlab）

> ID：15817754
> 
> 赞同：0
> 
> 时间：2013-04-04T17:26:00.797
> 
> 标签：matlab, image-processing, colors, plot

我正在一系列图像上绘制不断变化的线轨迹。我希望线条具有不同的颜色（尽可能多），并且我希望在整个序列中保留颜色。我的代码现在使用一个绘图`plot(traj_to_plot{:})`命令`traj_to_plot={[traj1_x_coor] [traj1_y_coor] [traj2_x_coor] [traj2_y_coor] ...}`（循环的每个循环之间的轨迹顺序并不总是保持不变，并且轨迹的数量可以改变，如前所述。我需要某种方式将一帧中绘制的轨迹与连续绘制的相同轨迹联系起来框架，如果它停止了，我需要以下轨迹保持相同的颜色（而不是简单地根据 ColorOrder 循环改变）。

这是发生变化的两个连续图像： ![第一帧](https://i.stack.imgur.com/CKwAU.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/hcWez.jpg)

这些示例照片中的问题很明显。由于在第二帧中没有识别出 2 号蚂蚁，因此颜色顺序循环改变了大部分轨迹的颜色。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:34:25.817

您可以像这样手动为每个图分配颜色：

```
figure();
hold on;

plot(traj_to_plot{1},'red')
plot(traj_to_plot{2},'blue') 
```

等等。

如果这是一项重复性任务，您可以使用以下内容：

```
colours = {'blue', 'green', 'red', 'cyan', 'magenta', 'yellow', 'black'};

figure();
hold on;

traj_to_plot1{1} = [1 2 3];
traj_to_plot1{2} = [0 2 4];

for ii=1:numel(traj_to_plot1)
    plot(traj_to_plot1{ii},colours{mod(ii,numel(colours))});
end

traj_to_plot2{1} = [0.5 2 3.5];
traj_to_plot2{2} = [-0.5 2 4.5];
traj_to_plot2{3} = [-1.0 2 5];

for ii=1:numel(traj_to_plot2)
    plot(traj_to_plot2{ii},colours{mod(ii-1,numel(colours))+1});    %Thanks to @wakjah.
end 
```

![在此处输入图像描述](https://i.stack.imgur.com/T3F04.jpg)

# javascript - jQuery：无法在窗口和元素上正确绑定具有相同名称的自定义事件

> ID：15817755
> 
> 赞同：0
> 
> 时间：2013-04-04T17:26:02.417
> 
> 标签：javascript, jquery, events

我正在尝试在 和 上绑定具有相同名称的自定义`$(window)`事件`$('#slider')`。然后我想让窗口事件触发元素事件。

因此，工作流程将是：

```
1\. Bind element event to say `Hello world` f.e.
2\. Bind window event to trigger element event
3\. Trigger window event 
```

结果：

```
1\. Window event is triggered
2\. Element event is triggered 
```

一切看起来都很好，但是一旦触发了 window 事件，整个事情就进入了一个疯狂的自调用循环，直到浏览器崩溃。

它看起来好像元素事件触发了窗口上的事件。

这是我的代码：

```
$('#slider').bind('asd', function() {
    console.log('asd called on slider');
});
$(window).bind('asd', function() {
    console.log('asd called on window');
    $('#slider').trigger('asd');
}).trigger('asd'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:29:23.207

事件泡沫。在窗口的子窗口上触发事件将导致事件最终到达窗口，除非您停止传播。

解决此问题的一种方法是仅触发处理程序，而不是事件。

```
$('#slider').bind('asd', function() {
    console.log('asd called on slider');
});
$(window).bind('asd', function() {
    console.log('asd called on window');
    $('#slider').triggerHandler('asd');
}).trigger('asd'); 
```

这是另一种方式：

```
$('#slider').bind('asd', function(e) {
    e.stopPropagation();
    console.log('asd called on slider');
});
$(window).bind('asd', function() {
    console.log('asd called on window');
    $('#slider').trigger('asd');
}).trigger('asd'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:30:04.253

使用 event.stopPropagation() 停止 DOM 冒泡：

```
$('#slider').bind('asd', function(event) {
    event.stopPropagation()
    console.log('asd called on slider');
});
$(window).bind('asd', function() {
    console.log('asd called on window');
    $('#slider').trigger('asd');
}).trigger('asd'); 
```

# regex - 正则表达式中的重复符号

> ID：15817757
> 
> 赞同：1
> 
> 时间：2013-04-04T17:26:22.037
> 
> 标签：regex

我制作了一个 java 程序，需要检查一个字符串是否包含三个或更多相同字母的子字符串。

如果我写`[a-z]{3,}`，那么对于任何三个或更多字母的字符串都是如此，即使它们不一样。

例如，我有这些字符串`"abcd"`：`"qwer"`和`"aaabb"`. `[a-z]{3,}`适合所有这些，我需要一个只适合的表达式`"aaabb"`。

那么请告诉我如何编写这样的正则表达式？”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:28:16.583

假设您只想检查 ASCII 字母，请使用

```
([a-z])\1{2} 
```

如果要检查任何重复的字符，请使用

```
(.)\1{2} 
```

在这两种情况下，`\1`都是对第一个捕获组的内容的反向引用（由 构造`(...)`），因此`\1{2}`匹配由`([a-z])`or匹配的任何内容的两次重复`(.)`。

小心将 Java 字符串中的反斜杠加倍：

```
Pattern regex = Pattern.compile("([a-z])\\1{2}"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T17:28:17.257

使用捕获

```
([a-z])\1{2} 
```

这会捕获字母，然后在它之后需要两个捕获字母

# c - C语言，如何找到二维数组中单词的长度？

> ID：15817762
> 
> 赞同：5
> 
> 时间：2013-04-04T17:26:45.077
> 
> 标签：c, string, multidimensional-array, string-length

我正在尝试为我必须说的 for 循环创建一个条件，`(c<wordlength)`但我不确定如何找到单词的长度。

所以可以说我有一个叫...

```
char shopping[10][10]={"BAGELS","HAM","EGGS"}; 
```

找到 shopping[0] 有 6 个字母的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:27:28.690

正确的语法是

```
strlen(shopping[0]) 
```

这将返回一个`size_t`不包含 NUL 终止符的类型值。

详情请参阅[`man strlen`](http://linux.die.net/man/3/strlen)。

如果您将`strlen(unchanging_string)`其用作循环的终止条件，谨慎的做法是在循环之前调用它一次，而不是在每次迭代时调用它。

循环字符的另一种方法`shopping[0]`如下：

```
char *s = shopping[0];
while (*s) {
  /* (*s) is the current character */
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T17:27:51.723

```
size_t len = strlen(shopping[0]); 
```

但是请注意，您不应该写：

 ~~~~```
for (size_t i = 0; i < strlen(shopping[0]); i++) 
```~~  ~~这可能会导致长字符串的性能不佳。采用：

```
size_t len = strlen(shopping[0]);
for (size_t i = 0; i < len; i++) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T17:29:42.197

实际上`shopping[0]` 有 7 个字符，一个你忘记了`\0`用于字符串终止的字符。虽然`strlen()`给你字符串的长度，但之前的字符数`\0`。

```
strlen(shopping[0]) 
```

但总字符数`strlen(shopping[0]) + 1`= 7

在记忆中，你`shopping[0]`是这样的：

```
+----+----+----+---+---+----+----+----+---+---+ 
| 'B'| 'A' |'G'|'E'|'L'| 'S'|'\0'| 0  | 0 |   |
+----+----+----+---+---+----+----+----+---+---+
                              ^ `\0` also a char in shopping[0] 
```

**编辑**：

当我再次阅读您的问题时，您说 6**个字母**所以`strlen(shopping[0] )`您的答案给了您 6 个。

因为您*想要一个循环*来查找字母数量（我的答案中的字符不是'\0'），所以调用`strlen()`是没用的。我希望您应该利用 C 中的空终止字符串：

```
int num=0;
for(num = 0; shopping[0][num]!='\0'; num++);
printf("\n  number of letters are %d\n",num); 
```

[我认为其他答案**不好**，他们使用 strlen() 是不必要的。如果我遗漏了什么，请告诉我]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T17:38:53.640

您可以使用`for`循环编写代码来查找购物数组中每个元素的大小：

```
for(i =0;i<10;i++)
{
    j=0;
    while(shopping[i][j])
    {
        j++;
    }
} 
```

where`j`将返回每个购物数组元素的大小。~~~~

# c++ - 使用 unordered_map 时出现编译时错误

> ID：15817764
> 
> 赞同：1
> 
> 时间：2013-04-04T17:26:51.247
> 
> 标签：c++, stl, unordered-map

我得到了下面的示例代码

```
// unordered_map::find
#include <iostream>
#include <string>
#include <unordered_map>

int main ()
{
  std::unordered_map<std::string,double> mymap = {
     {"mom",5.4},
     {"dad",6.1},
     {"bro",5.9} };

  std::string input;
  std::cout << "who? ";
  getline (std::cin,input);

  std::unordered_map<std::string,double>::const_iterator got = mymap.find (input);

  if ( got == mymap.end() )
    std::cout << "not found";
  else
    std::cout << got->first << " is " << got->second;

  std::cout << std::endl;

  return 0; 
```

当我尝试在 Windows 7 上使用 VS 2010 编译它时，我得到编译时错误（虽然它看起来不错）

```
1>\testing.cpp(13): error C2552: 'mymap' : non-aggregates cannot be initialized with initializer list
1>          'std::tr1::unordered_map<_Kty,_Ty>' : Types with a base are not aggregate
1>          with
1>          [
1>              _Kty=std::string,
1>              _Ty=double
1>          ]
1>\testing.cpp(14): error C2078: too many initializers
1>\testing.cpp(15): fatal error C1903: unable to recover from previous error(s); stopping compilation 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T17:28:18.180

您的编译器 (VC10) 不支持统一初始化。您的程序[在符合标准的编译器上编译得很好](http://liveworkspace.org/code/3SRz1U%2458)。

# java - Progresscircle 直到活动加载

> ID：15817769
> 
> 赞同：1
> 
> 时间：2013-04-04T17:27:04.907
> 
> 标签：java, android, progress-bar

在我的整个活动加载之前，如何显示进度圈？（加载是否意味着，加载活动并执行一些需要大约 1-2 秒的功能）？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:31:52.990

你可能想看看这张图片来了解一下：

![在此处输入图像描述](https://i.stack.imgur.com/9M0GH.png)

这就是 Activity 的生命周期。

一个很好的方法是让 ProgressBar 在开头可见，`onCreate()`并在结尾不可见（或`GONE`）`onResume()`。不过，请确保在访问之前对布局进行膨胀，否则会遇到错误。

（有关活动的更多信息：[单击此处](http://developer.android.com/reference/android/app/Activity.html)。）

**编辑：**

也许将 an`AsyncTask`用于那些长函数并不是一个坏主意。将 ProgressBar 传递给任务的构造函数，然后将 ProgressBar 的可见性设置为`VISIBLE`在`onPreExecute`函数中和`GONE`在`onPostExecute`函数中。

# jquery - 如何访问 ajax 后检查值

> ID：15817771
> 
> 赞同：0
> 
> 时间：2013-04-04T17:27:05.653
> 
> 标签：jquery, ajax

我正在使用这种表格，名称和 ID 来自 DB，就像这样

```
<input type="checkbox" id="<?php echo $row16['username']; ?>" value="<?php echo $row16['username']; ?>"> 
```

我正在使用此脚本来验证和发送 ajax 值，如果有人有任何想法接收帖子值，欢迎任何其他替代方案。

```
$('#tabs-2').on('click', 'input.submitadd', function(e){
    $('#form11').submit(function() {
        amIChecked = false;
        $('input[type="checkbox"]').each(function() {
            if (this.checked) {
                amIChecked = true;
            }
        });
        if (amIChecked) {
            $.ajax({
            type:"POST",
            url:"action1.php",
            data: $('#form11').serialize(), 
            cache:false,
            success: function(response){
            $('.result8').html(response);

            }
     });
     return false;
        }
        else {
            alert('please check one checkbox!');
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:39:17.020

第一件事。这一行：

```
if (amIChecked) { 
```

可能只是：

```
if ($('input[type="checkbox"]:checked').length > 0) { 
```

不需要变量或使用它上面的任何逻辑。节省几个 CPU 滴答声！

您是否在问如何使用从服务器返回的数据？您只需使用代码中已有的响应对象来检查 JSON，即 response.SomePropertyYouJSONd。

如果你有一个数组，你可以这样做：

```
$.each(response, function(i, item) {
    alert(response[i].PropertyName);
});​ 
```

在您的成功功能中。

PS 哦，如果您要返回 JSON，您的 ajax 参数中可能需要以下内容：

```
dataType: 'json', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:40:40.783

我会重写这个：

```
$('#tabs-2').on('click', 'input.submitadd', function(e) {
    e.preventDefault();

    if ($('input[type="checkbox"]:checked').length > 0) {
        $.ajax({
            type:"POST",
            url:"action1.php",
            data: $('#form11').serialize(), 
            cache:false,
            success: function(response){
                $('.result8').html(response);
            }
        });          
    }
    else {
               alert('please check one checkbox!');
    }
}); 
```

# android - 在android中将两个imageView与textView XML对齐

> ID：15817773
> 
> 赞同：2
> 
> 时间：2013-04-04T17:27:07.257
> 
> 标签：android, xml, listview, imageview, alignment

我的 xml for android 有问题。我有这个布局可以在 Listview 的每一行中使用它（效果很好）。

我想放两行（头部和正文）的文本，并在第一行的右边对齐我必须放两个 ImageView。（首先还有一个隐藏的textView）

像这样的东西：
![](https://dl.dropbox.com/u/60781984/img.jpg)

我的问题是当我尝试同时放置两个 imageViews 时（只有一个显示正常，但两个不显示任何内容）。

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/TvIdGroup"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="12sp"
        android:textStyle="bold"
        android:visibility="gone" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/TvName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:textSize="30sp"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/ImgNewConvGroup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:src="@drawable/new_messages" />

        <ImageView
            android:id="@+id/ImgNewGroup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:src="@drawable/new_group" />
    </LinearLayout>

    <TextView
        android:id="@+id/TvDescription"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="22sp"
        android:textStyle="normal" />

</LinearLayout> 
```

对不起我的英语，提前谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:42:13.360

如果我理解正确，那么我相信这应该接近您正在寻找的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/TvIdGroup"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Test"
        android:textSize="12sp"
        android:textStyle="bold"
        android:visibility="gone" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/TvName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:text="Test"
            android:textSize="30sp"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/ImgNewConvGroup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:gravity="right"
            android:src="@drawable/new_messages" />

        <ImageView
            android:id="@+id/ImgNewGroup"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@+id/ImgNewConvGroup"
            android:gravity="right"
            android:src="@drawable/new_group" />
    </RelativeLayout>

    <TextView
        android:id="@+id/TvDescription"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Test"
        android:textSize="22sp"
        android:textStyle="normal" />

</LinearLayout> 
```

试试看，让我知道这是否适合您，我将内部布局从`LinearLayout`to更改为`RelativeLayout`并创建了我相信您在相关位置中寻找的内容。

**注意：**请小心您的`TextView`延伸足够远以落后于`ImageViews`，如果发生这种情况，那么最好（为 设置`ImageViews`）：

```
android:layout_below="@+id/TvName" 
```

在两者上并删除：

```
android:layout_centerVertical="true" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:43:30.947

```
<TextView
    android:id="@+id/TvIdGroup"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:text="TV"
    android:textSize="12sp"
    android:textStyle="bold"
    android:visibility="visible" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/TvName"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_weight="1"
        android:text="TVName"
        android:textSize="30sp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/ImgNewConvGroup"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:gravity="right"
        android:src="@drawable/ic_launcher" />

    <ImageView
        android:id="@+id/ImgNewGroup"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2"
        android:gravity="right"
        android:src="@drawable/ic_launcher" />
</LinearLayout>

<TextView
    android:id="@+id/TvDescription"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TVDescription"
    android:textSize="22sp"
    android:textStyle="normal" /> 
```

看看你在找什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:36:40.373

就是很多代码只会写结构

```
<LinearLayout android:orientation="vertical">
    <LinearLayout android:orientation="horizontal">
        <LinearLayout android:orientation="horizontal">
           <TextView/>
        </LinearLayout>
        <LinearLayout android:orientation="horizontal" android:gravity="right">
            <ImageView/>
            <ImageView/>
        </LinearLayout>
    </LinearLayout>
    <LinearLayout android:orientation="vertical">
        <TextView/>
    </LinearLayout>
</LinearLayout> 
```

# javascript - 如何在按钮单击功能上从for循环变量传递值

> ID：15817774
> 
> 赞同：-2
> 
> 时间：2013-04-04T17:27:13.893
> 
> 标签：javascript, asp.net-mvc, razor

我不知道这是否可能，或者这可能是一个愚蠢的问题。但这是我需要做的：

```
 @{
      var data= "";
    }
    @foreach (var item in Model)
    {
    <tr>
         @if (Context.User.Identity.Name == "admin")
         {
           <td style="width:50px;">
             @if (@item.chkbillboard == true)
                 {<input name ="chk1" class="myCheckbox" type="checkbox" value="@item.chkbillboard" checked="checked" />   
                 data = data + item.id + "," + item.appname + ";";
                 }
                 else
                 {<input name ="chk2" class="myCheckbox" id="chkbox" type="checkbox" value="@item.chkbillboard" onclick="return chkbox();" />
                 }
            </td>     
         }
         <td style="width:200px;">@item.appname </td> 
         <td style="width:50px;">@Html.ActionLink("Edit", "UpdateAPIForm", new { @id = item.id, appname = item.appname })</td>
    </tr>
}

    @if (Context.User.Identity.Name == "admin")
    {
       <div class="grid_1 sub-spacer editor-field submit">&nbsp;</div>
       <input type="submit" value="Submit" id ="demo-submit1"  onclick="return chkchkbox(data);"  /> <br />
    } 
```

在我的 for 循环中，如果复选框为真，我会分配一些值。我需要做的是我想将这个带有按钮点击值的数据变量传递给我的javascript函数。

喜欢`onclick="return chkchkbox(data);"`

我不知道这是否可能。如果没有，还有其他方法可以在按钮单击时传递价值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:50:10.513

我的问题解决了。我用 onclick="return chkchkbox('@data');" 在按钮单击事件上，它对我有用。

# sql - SQL 解释计划显示非常耗时的 FETCH 操作

> ID：15817775
> 
> 赞同：0
> 
> 时间：2013-04-04T17:27:16.360
> 
> 标签：sql, join, indexing, db2

我正在处理基于用户选择多个值的登录页面的一些查询，并将它们触发到 DB2 数据库。我正在尝试将它们调整得尽可能快，并取得一些好的结果。但是，有几个查询的执行时间非常难看，比如 10 秒左右。我一直在仔细研究解释计划，并看到了一些相当奇怪的东西。

对于初学者来说，这些查询非常简单。有几个内连接、几个左连接和几个过滤条件。他们正在加入一些非常大的表（有些有大约 270 万行）并返回一些非常强大的数据集（最多 30k 行左右，可能有 15 列左右）。问题是，在检查解释计划时，我看到了一个非常奇怪的情况。这是一个 FETCH 操作，占用查询成本的 1/3 到 1/2。此 FETCH 与以下联接有关：

```
SELECT ...
FROM A
JOIN B
ON B.ID1 = A.ID1
AND B.ID2 = A.ID2
WHERE
B.FIELD IN (:parameter --No more than four strings in here) 
```

A.ID1 和 2 是 A 的主键，但在 BBFIELD 中不是唯一的，总共可能包含十几个不同的字符串值，但表大约有 270 万行。我看到的是 B 上的一个 FETCH 操作，它包含一个 RIDSCN，它本身包含 B.FIELD IN 子句中每个参数的一个排序操作，每个排序都包含 B 上的索引扫描。令人担忧的是 FETCH 需要多少时间操作正在吃东西，特别是考虑到它是大约十几个连接之一。

我一直在研究索引并且有一些理论，但我不确定问题出在哪里，我自己不能应用任何索引，只能请求它们，所以有点痛苦。A 在 ID1 和 ID2 上编入索引。B 也在 ID1 和 ID2 上编入索引。在这些 SORT 操作中，有一个单独的索引用于 B.FIELD（还包含 B 中的一些其他字段）。但是，B 没有专门针对 ID1、ID2、FIEL 的索引。创建此索引是否会减少我在该 FETCH 操作中看到的时间？我不完全确定这是由于缺少适当的索引，或者仅仅是表的大小和列中数据的性质。我已经在几张桌子上请求了 runstats，看看他们是否会从重组中受益，但如果失败了，我 我希望有些人可能会有所启发。我对索引的应用和细微差别还是有点陌生​​。

编辑：这是解释计划的相关部分。可能值得注意的是，这是解释计划树中的第一个操作（如在一系列 NLJOIN、HSJOIN 等之后）：

```
SCHEMA.B  FETCH                            35.1 %    177046.0625        
    RIDSCN                                   0.0 %     5716.63037109375   
        SORT                                   0.0 %     5257.94189453125   
            B.INDEX  IXSCAN                      1.0 %     5018.35009765625   
        SORT                                   0.0 %     385.5107116699219  
            B.INDEX  IXSCAN                      0.1 %     374.5053405761719  
        SORT                                   0.0 %     50.442073822021484 
            B.INDEX  IXSCAN                      0.0 %     50.34944152832031  
        SORT                                   0.0 %     22.738037109375    
            B.INDEX  IXSCAN                      0.0 %     22.73009490966797 
```

问题是，我有一些其他查询在 IN 子句中没有显示这种成本，即使返回数千行也是如此。为一个连接使用三分之一的查询成本似乎过高。就像我之前说的，也许它与这个特定的表甚至额外的连接有更多的关系，但我真的很想找到一种方法来减少这个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:03:43.183

我不确定这是否应该算作一个答案，但至少还有其他两种等效的方式来表达您的意图。

```
WHERE B.FIELD = :param1 OR B.FIELD = :param2 ...

SELECT ...
WHERE B.FIELD = :param1
UNION ALL
SELECT ...
WHERE B.FIELD = :param2
... 
```

这些年来，我对 DB2 查询优化器有点失去联系。它可能会以不同的方式对待这些逻辑上等价的陈述。那*可能*不是一件好事。在过去，如果查询优化器为两个逻辑上等价的查询生成了两个不同的执行计划，至少有一个产品认为这是一个错误。（Rdb？Ingres？不记得了。）

我不是特别喜欢这样玩优化器。今天使用 IN 谓词表现良好的内容可能会因下个月的更新而受损。

至于索引的组成，我希望开发人员能够将其作为他们工作的常规部分来完成。如果你的雇主不给你一个临时数据库，那么你可以考虑这些替代方案。（我并不是建议你做任何违反雇主政策的事情。这是被解雇的快速方法。）

*   大厅[sqlfiddle.com](http://www.sqlfiddle.com)添加对 DB2 的支持。
*   设置一台未连接到网络的计算机，并在其上运行[DB2 Express-C](http://www-01.ibm.com/software/data/db2/express-c/download.html)进行测试。
*   在家中设置一台计算机，在其上运行 DB2 Express-C，然后在家中进行测试。
*   在家里设置一台计算机，设置对其的 SSH 或 VPN 访问，然后从您的工作计算机连接到它。

不要将公司数据转移到公司之外。

如果您无法解决创建索引等问题，请向您的 DBA 提出官方批准的缓慢请求。

# java - 登录成功后无法跳转到首页

> ID：15817778
> 
> 赞同：0
> 
> 时间：2013-04-04T17:27:27.077
> 
> 标签：java, jakarta-ee, response.redirect, tomcat5.5, requestdispatcher

**场景：**`include`使用请求调度器的方法登录成功后重定向到主页。

```
RequestDispatcher rd = request.getRequestDispatcher(uri);    
rd.include(request, response); 
```

`uri`主页的位置在哪里。

在第二行中，发生以下异常：

```
ClientAbortException:  java.net.SocketException:Broken pipe 
```

因此，我尝试`response.sendRedirect()`了并且效果很好，因为由于此异常，我不知道确切的路线，所以我想通过它。

`response.sendRedirect()`为此，如果发生此异常，我捕获了异常并尝试使用块中的重定向到主页`catch`。否则， normal将起作用`RequestDispatcher`。**但这****正在发生。**`include`**`IllegalStateException`**

我一直试图找到解决方案很多天，但仍然没有成功。请提供宝贵的建议。

# xpages - XPages Mobile Control 部分刷新返回到菜单页面

> ID：15817780
> 
> 赞同：0
> 
> 时间：2013-04-04T17:27:28.927
> 
> 标签：xpages, xpages-extlib

我在移动控件中有一个简单的页面。我有一个编辑框，我想要发生的是在编辑控件的 onChange 事件中部分刷新当前。基本上在编辑控件中输入一些东西 - 点击回车并进行部分刷新。如果将页面返回到主菜单，则发生的事情是按 Enter 键。如果我输入一个值并按 TAB，那么它会按我的意愿工作。

我正在从头开始一个新的应用程序。但我已经多次使用生产中的应用程序完成这个概念。我在代码中找不到任何会“捕获”输入按钮的特殊内容......所以我不知道为什么这次我无法获得我想要的行为。

这是该问题的视频演示：http: [//traffic.libsyn.com/notesin9/SO-Question2-HB.mp4](http://traffic.libsyn.com/notesin9/SO-Question2-HB.mp4)

下面是完整的代码。

谢谢你的帮助！！

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex"
    xmlns:xc="http://www.ibm.com/xsp/custom">
    <xp:this.resources>
        <xp:styleSheet href="/.ibmxspres/dojoroot/dijit/themes/tundra/tundra.css">
        </xp:styleSheet>
        <xp:styleSheet href="/mobile.css"></xp:styleSheet>
    </xp:this.resources>
    <xe:singlePageApp id="singlePageApp1"
        selectedPageName="mainMenu">
        <xe:djxmHeading id="djxmHeading1" label="My App"></xe:djxmHeading>
        <xe:appPage id="mainMenuID" pageName="mainMenu">
            <xe:djxmRoundRectList id="djxmRoundRectList1"
                title="Main Menu">
                <xe:djxmLineItem id="djxmLineItem9" moveTo="#container"
                    label="Test Page">
                </xe:djxmLineItem>
            </xe:djxmRoundRectList>
        </xe:appPage>
        <xe:appPage id="containerID" pageName="container"
            resetContent="true">
            <xe:djxmHeading id="djxmHeading5" label="My Page"
                back="Main Menu">
            </xe:djxmHeading>
            <xe:djxmRoundRectList id="djxmRoundRectList2">
                <xp:panel id="mainPanel">
                    <xp:table style="width:100.0%">
                        <xp:tr>
                            <xp:td style="width:50%"></xp:td>
                            <xp:td>Details</xp:td>
                        </xp:tr>
                        <xp:tr>
                            <xp:td>
                                <xp:inputText id="inputText1" styleClass="target alignVMiddle"
                                    value="#{sessionScope.myValue}">
                                    <xp:this.attrs>
                                        <xp:attr name="autocorrect" value="off"></xp:attr>
                                        <xp:attr name="placeholder" value="Tap to Scan...">
                                        </xp:attr>
                                    </xp:this.attrs>
                                    <xp:eventHandler event="onchange" submit="true"
                                        refreshMode="complete">
                                        <xp:this.action><![CDATA[#{javascript:viewScope.put("test", "test");}]]></xp:this.action>
                                    </xp:eventHandler>
                                </xp:inputText>
                            </xp:td>
                            <xp:td></xp:td>
                        </xp:tr>
                    </xp:table>
                    <xp:br></xp:br>
                    Current Value:&#160;
                    <xp:text escape="true" id="computedField1" value="#{sessionScope.myValue}"></xp:text>
                    <xp:br></xp:br>
                    <xp:br></xp:br>
                    Current Time:&#160;
                    <xp:text escape="true" id="computedField2" value="#{javascript:@Now();}">
                        <xp:this.converter>
                            <xp:convertDateTime type="time"></xp:convertDateTime>
                        </xp:this.converter>
                    </xp:text>
                </xp:panel>
            </xe:djxmRoundRectList>
        </xe:appPage>
    </xe:singlePageApp>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:06:15.423

你能做这样的事情来强制在 Enter 上进行部分刷新吗？

```
<xp:inputText id="inputText1" value="#{sessionScope.myValue}">
    <xp:eventHandler event="onkeypress" submit="true" refreshMode="partial" refreshId="something">
        <xp:this.script><![CDATA[//partial refresh on Enter
            if( thisEvent.keyCode === dojo.keys.ENTER ){
                dojo.stopEvent( thisEvent );
            } else {        
                return false;
            }
        ]]></xp:this.script>
    </xp:eventHandler>
</xp:inputText> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:57:57.497

我认为问题在于 enter 会尝试提交并且提交会将您返回到第一页。尝试在 onkeyup 或 down 中为 charcode 13 添加一个检查，如果找到，则返回 false。您可能还需要做一个停止专有或类似的事情。谷歌输入密钥提交表单

从我的手机;-)

或者也许这篇文章。[http://tinyurl.com/bsgy9g6](http://tinyurl.com/bsgy9g6)

# google-earth-plugin - 谷歌地球覆盖消失

> ID：15817782
> 
> 赞同：0
> 
> 时间：2013-04-04T17:27:30.417
> 
> 标签：google-earth-plugin

我使用 Winforms GE API 创建了一个简单的三角形叠加层。当我放大和缩小时，部分或全部覆盖将消失。覆盖的长度约为 80 英里。

叠加层设置为 100 的高度，所以我知道当叠加层穿过地形特征时，它会消失。我担心的是当它完全可见时，我放大它会完全或部分消失。既然它在较高的高度可见，它不应该在较低的高度也可见吗？（而且我确实意识到，一旦我“低于”覆盖层，它就会消失。这不是我的问题。）

有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:51:05.703

实际上，地面覆盖层应该保持在地形之上。因此，当地形高于“100”时，应将叠加层“包裹”在其顶部。我不确定覆盖在不同高度（POV）“消失”

最近，有[一个关于 SO](https://stackoverflow.com/questions/14562878/land-peeks-thru-on-ground-overlays)的问题 - OP 最后说他们已经联系了谷歌，并且一致认为这是某种错误......

# .htaccess - htaccess 将站点进行维护，拒绝除我自己的 IP 之外的所有站点

> ID：15817783
> 
> 赞同：1
> 
> 时间：2013-04-04T17:27:34.407
> 
> 标签：.htaccess, ip

我想将我的网页进行维护，因此我将原来的 htaccess 文件替换为：

```
ErrorDocument 403 /maintenance/maintenance.php
order deny,allow
deny from all
allow from 111.222.333.444 
```

在发布之前阅读了很多线程，这是我收集到的正确解决方案，但我没有让它工作。如果我不允许来自我自己的 IP，我会收到错误 500（这意味着我的访问者会看到），如果我确实使用我的 IP，我会收到错误 403（我什至没有到达我的维护页面，它说我也不允许在那里）。

我在这里做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T18:02:13.460

找到了对我有用的解决方案。

```
RewriteEngine On
RewriteBase /

#ip is not your ip. Change ip to see maintenance page
RewriteCond %{REMOTE_ADDR} !^111\.222\.333\.444$

#requests made not to maintenance.php ... 
RewriteCond %{REQUEST_URI} !^/maintenance\.php$

#rewrite to maintenance.php
RewriteRule ^(.*)$ /maintenance.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:03:34.647

您发布的 .htaccess 对我有效`Allow from 127.0.0.1`，但您需要在`maintenance`目录中添加一个 .htaccess，以允许访问`maintenance.php`错误文档

```
Order allow,deny
Allow from all 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:10:15.743

试试我的提示，将此代码粘贴到`.htaccess`您的站点中，以使您域的所有页面重新映射到`/maintenance.html`文件中，如果查看者的 IP 与您的不同：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REMOTE_ADDR} !^000\.111\.222\.333
RewriteCond ^(.*) /maintenance.html 
```

请注意，数字`000\.111\.222\.333`必须更改为您的 IP 地址，并创建一个`/maintenance.html`文件，您的页面将在其中重新映射。

# websocket - 将 WebSockets 与代理和负载平衡器一起使用有什么问题？

> ID：15817784
> 
> 赞同：13
> 
> 时间：2013-04-04T17:27:38.020
> 
> 标签：websocket, haproxy, sockjs

我正在阅读[SockJS 节点服务器](https://github.com/sockjs/sockjs-node#websocket-compatible-load-balancer)。文档说：

> WebSockets 通常不能很好地与代理和负载平衡器配合使用。在 Nginx 或 Apache 后面部署 SockJS 服务器可能会很痛苦。幸运的是，最近版本的优秀负载均衡器 HAProxy 能够代理 WebSocket 连接。我们建议将 HAProxy 作为前线负载均衡器，并使用它来将 SockJS 流量与普通 HTTP 数据分开。

我很好奇在这种情况下是否有人可以扩展 HAProxy 正在解决的问题？具体来说：

1.  为什么 websockets 不能很好地与代理和负载平衡器配合使用？
2.  为什么在 Apache 后面部署 Sockjs 服务器很痛苦？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T22:23:18.490

> 1\. 为什么 websockets 不能很好地与代理和负载平衡器配合使用？

我建议您阅读Peter Lubbers撰写的关于[HTML5 Web 套接字如何与代理服务器交互的文章。](http://www.infoq.com/articles/Web-Sockets-Proxy-Servers)它应该涵盖您需要了解的有关 WebSocket 和代理的所有信息 - 以及负载均衡器。

> 2\. 为什么在 Apache 后面部署 Sockjs 服务器很痛苦？

有[一个用于处理 WebSocket 连接的模块，但目前 Apache 本身并不支持 WebSocket，根据 apache -](https://github.com/disconnect/apache-websocket) [HTML5 Websocket implementation](https://issues.apache.org/bugzilla/show_bug.cgi?id=47485)上提交的这个错误，它看起来也不会很快支持。建议是它实际上更适合模块模式。

因此，它之所以“痛苦”，仅仅是因为它并不容易——没有官方支持，因此它没有其他可能拥有的社区用途。

SockJS 具有基于 HTTP 的后备传输可能还存在其他问题。因此，您需要代理 WebSocket 连接（使用 apache-websocket 模块）以及使用回退时的 HTTP 请求。

与此相关：[Nginx v1.3](http://nginx.com/news/nginx-websockets.html)于 2 月发布，支持 WebSocket。

# git - 使用 git 从分支“导入”更改为重新设置的分支

> ID：15817796
> 
> 赞同：0
> 
> 时间：2013-04-04T17:27:57.137
> 
> 标签：git, branch, rebase

我一直在做一个项目*foo*，它是另一个项目*bar*的分支，做分支等等。我现在也想提供我对原始项目的更改。

首先，我为未来的 rebase 设置了一些东西：

```
git remote add bar git://bar/bar.git
git fetch bar
git checkout -b bar-master bar/master 
```

现在，对于为项目*foo*制作的给定分支 foo-branch ，我运行了：

```
git checkout foo-branch
git checkout -b bar-branch
git checkout bar-branch
git rebase bar-master 
```

我可以从：

```
git log --format=one 
```

变基没问题。

现在我将在 foo-branch 或 bar-branch 中进行更改/提交。

我的问题是：如何将提交从一个分支（例如 foo-branch）“导入”到另一个项目的分支（在给定的示例中，bar-branch）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:30:51.783

在`rebase`您可以简单地合并数据之后，这将`fast-forward merge`不会引入任何合并提交。

或者..如果你想要单个提交，你可以使用`cherry-pick`git 命令或者..如果你想要一次导入多个提交，你可以使用`rebase`switch `--onto`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:44:52.767

因此，由于您已经使用上游（原始）repo 重新设置了 fork 的基础，因此您已经为快速合并做好了准备——这是一个很好的开始。

要推送到不同的仓库，您只需在推送命令中指定给定的仓库。推给`foo`你会跑...

```
git push foo <branch-name> 
```

要赶上`bar`回购，请运行...

```
git push bar <branch-name> 
```

要从 foo 或 bar 中拉取，它的命令集相同，但使用拉取而不是推入。

理解这一点很有用，因为 git 已经将 foo 和 bar 视为单独的遥控器，因此您不需要为每个 repo 创建一个特殊的分支。Git 已经在幕后为您完成了这项工作。使用相同的命令运行以下命令集`<branch>`以了解我的意思

```
git log foo/<branch>
git log bar/<branch> 
```

当您运行命令时，这是and`git pull`的快捷方式。当您运行 fetch 命令时，git 会创建/更新本地存储库上的所有分支存储库 - 所有命名约定为. 这些不是您可以直接签出的分支，但您可以对它们运行日志，从它们合并和变基。`git fetch <remote>``git merge <branch>``<remote-name>/<branch-name`

# security - PhoneGap Cordova HIPAA 合规性

> ID：15817807
> 
> 赞同：3
> 
> 时间：2013-04-04T17:28:34.167
> 
> 标签：security, cordova, hipaa

鉴于可以插入和检查 Cordova 应用程序，应用程序本质上是否不如本机编译代码安全？或者对于保留的内容和普通的 UIWebView 是否适用相同的规则？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:43:15.507

经过进一步研究：在当前版本的 Cordova 中，使用分发许可证编译的应用程序会阻止 Web 检查。

但是可以浏览您的 IPA 文件，因此您的源代码不应包含任何敏感信息。不要将个人信息保存到应用程序的沙箱（documents://、localstorage、web 目录），因为任何加密方法都很容易被发现和复制。将所有敏感信息保存到受密码保护的 API。

您还可以使用自定义 Cordova 插件来获取/设置敏感信息。最好的情况是使用自定义插件从安全的 API 服务器获取/设置信息（隐藏您的 API 参数）。

此外，将任何具有敏感值的 HTML 或 JS 视为有毒。尽快删除/删除它们（包括 jquery 缓存）。当应用程序移动到后台时，请特别努力从 DOM 中删除所有敏感信息。

TLDR；为生产而构建，您的应用程序的活动状态可以被视为与 RAM 中的任何内容一样安全，但您必须将所有敏感信息保存在设备之外或使用插件进行加密/解密。

# ruby - 红宝石数组输入

> ID：15817808
> 
> 赞同：0
> 
> 时间：2013-04-04T17:28:35.167
> 
> 标签：ruby, arrays

我正在尝试用 ruby​​ 编写一个小函数，该函数从用户那里得到一个数组，然后对数组中的数据求和。我把它写成

```
 def sum(a)
      total = 0
      a.collect { |a| a.to_i + total }
    end 
```

然后该函数通过一个 rspec 运行，该 rspec 最初通过向其输入一个空白数组来对其进行测试。这会导致以下错误

```
 sum computes the sum of an empty array
    Failure/Error: sum([]).should == 0
    expected: 0
        got: [] (using ==) 
```

所以它告诉我，当它输入空白数组时，它应该得到 0，而是得到数组。我尝试输入一个 if 语句，写成

```
 def sum(a)
      total = 0
      a.collect { |a| a.to_i + total }
      if total = [] then { total = 0 end }
    end 
```

但它给了我一个错误说

```
 syntax error, unexpected '}', expecting => (SyntaxError) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:31:35.957

您不应该为此使用`map`/ 。/是合适的方法`collect``reduce``inject`

```
def sum(a)
  a.reduce(:+)
  # or full form
  # a.reduce {|memo, el| memo + el }

  # or, if your elements can be strings
  # a.map(&:to_i).reduce(:+)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:31:18.270

请参见此处：[如何在 Ruby 中对数字数组求和？](https://stackoverflow.com/questions/1538789/how-to-sum-array-members-in-ruby)

在这里：[http ://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

```
def sum(a)
    array.inject(0) {|sum,x| sum + x.to_i }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:54:58.073

```
gets.split.map(&:to_i).inject(:+) 
```

# ios - 为什么我不能从我的控制器添加到我的模型中的字典？

> ID：15817815
> 
> 赞同：0
> 
> 时间：2013-04-04T17:29:07.900
> 
> 标签：ios, objective-c, model-view-controller, initialization, nsmutabledictionary

我的模型旨在存储 JSON 数据。要存储的部分内容是嵌套在 JSON 中的数组，它可以是不同数量的元素。这就是我在代码中检索该数据的方式。

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"SomeJsonFile" ofType:@"json"];
NSData *jsonFromFile = [[NSData alloc] initWithContentsOfFile:filePath];

NSError *error = nil;
NSDictionary *jsonData = [NSJSONSerialization JSONObjectWithData:jsonFromFile options:0 error:&error];
DLog(@"simulated 'Stuff' JSON, stored in dictionary: %@", jsonData); 
```

这很好用。一个回调沿着该字典发送，此时我遇到了我的问题。这是 JSON 中嵌套数组的示例。

```
 stuff =             (
                            {
                id = 11;
                "someState" = 1;
                someNumber = 100;
                description = "Human-readable text for thing #11!";
            },
                            {
                id = 22;
                "someState" = 0;
                someNumber = 20;
                description = "Human-readable text for thing #22!";
            },
                            {
                id = 33;
                "someState" = 1;
                someNumber = 250;
                description = "Human-readable text for thing #33!";
            },
        ); 
```

我的模型应该存储在那里发送的数据，但由于该嵌套数组是未知数量的元素，我选择：

1.  使用 NSMutableArray 存储每个数组元素的 ID。
2.  为元素的每个属性使用 NSMutableDictionary（如 someState、someNumber、description）。
3.  当需要列出模型的所有元素时，我将遍历 ID 数组并将每个 ID 用作每个 NSMutableDictionary 属性的键，从而检索我需要的所有内容。

步骤 2 中的那些 NSMutableDictionary 属性没有响应。他们不设置键或值；它们保持为空。从其他问题来看，这似乎是因为它们没有被初始化。同样从其他问题来看，我已经能够向我初始化的任意 NSMutableDictionary（不是模型的一部分）添加和删除键/值。

控制器应该对与模型相关的初始化视而不见，但我似乎无法通过覆盖模型的 getter/setter 来初始化 NSMutableDictionary 属性。 **在 Objective-C 中使用 NSMutableDictionary 属性设置我的模型以便我可以从控制器中设置键和值的正确方法是什么？**

我也觉得我在数组解决方案中由 ids 索引的多字典是矫枉过正的。如果您能发现这一点并知道在 iOS 中处理此问题的更好方法，请随时提供您的智慧。

**编辑** 应 Marcus Adams 的要求，这是我使用 NSMutableDictionary 属性的代码。我没有初始化 NSMutableDictionary 属性；我的问题是在哪里这样做以使其适合 MVC 模型。他的回答使我尝试通过覆盖“init”来进行初始化，这作为模型实例化的一部分起作用（如果他提供解释，Marcus Adams 将被标记为答案，因为他引导我找到了答案，但是答案正确覆盖“init”的代码示例将被投票）。

```
 // Now we're ready to store what's in the JSON.
    NSDictionary *stuff = jsonData[@"stuff"];
    NSMutableDictionary *tempDictBecauseAllocNeeded = [[NSMutableDictionary alloc] init];
    for (NSDictionary *thing in stuff) {
        [tempDictBecauseAllocNeeded setObject:thing[@"description"] forKey:thing[@"id"]]; // This works!

        theModel.thingDescriptions[thing[@"id"]] = thing[@"description"]; // This wasn't working!
        [theModel.thingIds addObject:thing[@"id"]]; // This is the array of ids used to retrieve values from each dictionary
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:35:29.393

我想你的代码现在应该可以工作了。我很好奇您是如何复制 NSDictionaries 的，并认为问题可能就在那里。显然，你发现你没有初始化 tempDict，因为AllocNeeded。除非您将 tempDictBecauseAllocNeeded 保留一段时间，否则我不会使用 getter 进行初始化。如果是，将其存储为属性并在 getter 中对其进行初始化是最简单的事情。

```
// Getter ensures that when you reference self.tempDictBecauseAllocNeeded
/// it's always initialized
-(NSMutableDictionary *) tempDictBecauseAllocNeeded {
  if (!_tempDictBecauseAllocNeeded) {
    _tempDictBecauseAllocNeeded = [[NSMutableDictionary alloc] init];
  }
  return _tempDictBecauseAllocNeeded;
} 
```

由于原始 JSON 解析默认创建可变叶子，即使您将其分配给 NSDictionary，其中的每个叶子仍然是可变的。

因此，当您（浅拷贝）将叶子复制到您的 NSMutableDictionary 时，它们当然仍然是可变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:55:28.520

```
stuff = ( ... 
```

这不是 JSON 数组，它应该是吗？JSON数组将是

```
stuff = [ ... 
```

# php - 在php中动态搜索文件

> ID：15817824
> 
> 赞同：0
> 
> 时间：2013-04-04T17:29:43.417
> 
> 标签：php

![在此处输入图像描述](https://i.stack.imgur.com/RWpDl.png)

我基本上想在我的电脑上搜索一个文件。我知道如何搜索，但是有没有一种快速的方法来搜索名称和扩展名，而不会用超过 2 个 for 循环淹没我的脚本？名称（例如文件，病毒，节点，杂项）和扩展名将动态添加，而不是通过源代码..名称将有数千个，所以我不想一一添加，因此为什么我我正在动态地做。

我刚在想：

```
foreach($names as $i){
  if (file_exists($i.".exe" | $i.".py" | $i.".js" | $i.".html" | )){
    //echo true or false}} 
```

就像我说的。我还将动态添加扩展。是否值得将代码长时间使用`file_exists(20 thousand extensions)`或仅将它们添加到表单中？

它会是另一个 for 循环中的一个 for 循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:37:10.443

如果您的代码在 linux 服务器上并且您有程序“定位”，我会考虑改用它。它将为您节省大量服务器负载，并更快地返回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:33:13.573

有一种使用 Spl 迭代器的方法。

以下示例取自[`RecursiveDirectoryIterator`](http://www.php.net/manual/en/class.recursivedirectoryiterator.php). 它搜索一个名为“Yourfile.py”的文件：

```
$filename = 'Yourfile.py';

$directory = new RecursiveDirectoryIterator('path/to/search_root/');
$iterator = new RecursiveIteratorIterator($directory);
$regexiterator = new RegexIterator(
    $iterator,
    '/^' . preg_quote($filename) . '$/',
    RecursiveRegexIterator::GET_MATCH
);

foreach($regexiterator as $fileinfo) {
    var_dump($fileinfo);
} 
```

# windows-phone-7 - 如何使用 RIL_GetCurrentOperator？

> ID：15817825
> 
> 赞同：0
> 
> 时间：2013-04-04T17:29:47.373
> 
> 标签：windows-phone-7, mobile

我今天有点失落。我一直在尝试找到一种方法来获取用户注册的操作员的名称。显然，MNC 和 MCC 代码检索是非法的。在我的研究中，我偶然发现了一个神奇的函数，它可能正在做我需要它做的事情：RIL_GetCurrentOperator() ( [http://msdn.microsoft.com/en-us/library/aa921502.aspx](http://msdn.microsoft.com/en-us/library/aa921502.aspx) ) 问题是我是一个关于移动编程的完整新手，我根本无法理解这个文档。我应该实例化一个 ril 吗？我该怎么做？我从哪里获得它要求我提供的所有参数？我应该使用库来包含此功能吗？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:55:35.223

您引用的链接是指 Windows Mobile 6.5。Windows Phone 是一个经过彻底改造的平台，沙盒第三方应用程序无法访问该功能。

Windows Phone 7 具有与 Windows Mobile 完全不同的应用程序模型 - 所有应用程序都是沙盒化的，并且对底层操作系统的本机访问要少得多。话虽这么说，RIL_GetCurrentOperator 需要特权升级，如果没有访问操作系统的能力，您的应用程序根本无法获得（它不能开箱即用）。

# asp.net - 将 ASP.net MVC4 与 Orchard CMS 1.6 集成为单独的站点

> ID：15817829
> 
> 赞同：0
> 
> 时间：2013-04-04T17:29:51.693
> 
> 标签：asp.net, asp.net-mvc-4, orchardcms-1.6

我想要一个现有的 ASP.net MVC4 站点来显示来自 Orchard CMS 的部分视图。有没有办法让多个 ASP.net MVC4 站点与不同域中的一个 Master Orcharch CMS 网站通信？我不想将 ASP.net MVC4 站点创建为单独的模块并将其集成到 Orchard CMS 网站中。我想拥有 Master Orchard CMS 和其他 ASP.net 网站来显示 Orchard CMS 的部分视图。最新的 Orchard CMS 网站是否可以实现这种情况，或者是否有任何其他支持这种情况的 .NET CMS 系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T17:36:25.690

MVC 4 仅在 Orchard 1.6 版本中受支持，出于安全原因，您应该升级到 1.6.1。

我很确定您所要求的与 Orchard 的工作方式不符 - 因此不受支持。

非常简单地将网站 IS Orchard CMS 和 MVC 项目 ARE 模块放在其中；当模块是可扩展的时，做一个主人是愚蠢的。

您的问题的一个可能解决方案是创建一些为其他 Orchard 站点提供服务的 Web 服务（AKA master）。

更好的是，解耦您的基础网站应用程序，并在每个站点的基础上启用您需要的部分。

# performance - Lucene SpanQuery 的弱点

> ID：15817830
> 
> 赞同：1
> 
> 时间：2013-04-04T17:29:56.810
> 
> 标签：performance, lucene, full-text-search, bigdata

我有一个约 20GB 的文档索引，其中包含与它们相关联的多个属性的单词，例如：

字：word_1 word_2 ... word_n

位置：pos1_1:pos1_2:pos1:3 pos2 ... pos_n_1:pos_n_2

引理：引理1_1:引理1:2:引理1_3引理2引理_n_1:引理n_2

由':'分隔的字段标记是不明确的，即它们对应于文档中的相同位置。歧义词属性的一个重要细节是，例如，pos1_1 只对应于 lemma1_1，而不对应于 lemma1_2 或 1_3，因此在相同位置搜索 pos1_1 和 lemma1_3 时不能匹配 word_1。

我使用标准 positionIncrement = 0 处理模棱两可的标记位置，以及与标记有效负载对应的属性号。比如说，lemma1_1 的有效载荷 = 1, lemma1_2 - 2; pos1_1 - 1、pos1_2 - 2 等等。在同一位置搜索令牌属性时，我使用有效负载过滤器检查所有匹配的令牌的有效负载是否相同。

就是这样：SpanNearQueries 在该索引上运行非常慢（10 秒）。索引中的大多数文档都与常规查询匹配。我实际上不知道 SpanQueries 是如何深入工作的，但是它们在设计上是否存在效率低下的问题？还是有效载荷检索如此昂贵？我只是想知道我是否遗漏了一些明显减慢整个搜索速度的东西。

# php - php中带日期的对象数组

> ID：15817831
> 
> 赞同：0
> 
> 时间：2013-04-04T17:29:56.823
> 
> 标签：php, arrays, date, object

```
$date1 = "2007-03-24";
$date2 = "2009-06-26";

$diff = abs(strtotime($date2) - strtotime($date1));

$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));

$arary_dates = array ();

for ($days=1;$i<=$days;$days++)
{
$array_dates[$days] -> new DateTime(2007,0,$days);
} 
```

我知道这段代码是错误的，但是我可以向你展示我想要的东西。

我有一个初始日期，我想用从初始日期到最终日期的每个日期填充一个对象数组日期（使用传递的天数来增加）

我怎么能做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:45:04.507

显然，您将需要修改开始时间和结束时间，但这会让您开始。

```
$start = new DateTime('first day of this month');
$end = new DateTime('first day of next month');
$interval = DateInterval::createFromDateString('1 day');
$period = new DatePeriod($start, $interval, $end);

foreach ($period as $dt)
{
    echo $dt->format("l Y-m-d") . PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:43:02.477

将日期存储为时间戳并将其用于您的计算...即

```
$start = strtotime($date1);
$end = strtotime($date2);

$dayArray = array();
while($start != $end) {
   $start += 60*60*24;  //seconds in a day, you could alter this to multiple by number of days passed in
   $dayArray[] = $start;
} 
```

然后使用 date() 方法以您选择的格式显示时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:45:49.553

我以前没有做过这样的事情，所以我不确定我的代码是否可以工作。但尽量遵循逻辑。

```
$start = strtotime("2007-03-24"); //日期1
$end = strtotime("2009-06-26"); //日期2

$array_date = 数组（）；
而 ($start != $end) {
    $array_dates[] = date('Ymj',$start);
    $oneDay = 60 * 60 * 24;
    $start += $oneDay;
}

```

# soap - 您无权使用 SOAP for DoDirectPaymentReq 进行此 API 调用

> ID：15817839
> 
> 赞同：1
> 
> 时间：2013-04-04T17:30:19.213
> 
> 标签：soap, paypal, paypal-sandbox

我对这个有点生气。我记得上次我试图让它工作时有一段荒谬的时间，然后他们改变了它！我试图导入我的旧用户，但它说密码不正确。

下面是我发布到[https://api-3t.sandbox.paypal.com/2.0/](https://api-3t.sandbox.paypal.com/2.0/)的肥皂这一切以前都有效，它仍然在生产环境中工作，但每当我尝试在沙箱中运行它时我明白了

LONGMESSAGE=您无权进行此 API 调用 ERRORCODE=10002

好像我记得这与未启用 Paypal PaymentsPro 有关。我尝试创建多个企业帐户并删除并重新实例化我的凭据。[似乎没有任何效果，我在https://www.sandbox.paypal.com/](https://www.sandbox.paypal.com/)站点中找不到任何地方启用它。信用卡是沙盒个人用户生成的假卡，但我也用企业账户的信用卡试了一下，没有任何区别。

谁能给我一些线索？这是令人沮丧的难以置信。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <SOAP-ENV:Envelope
        xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance"
        xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
        xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
        xmlns:xsd="http://www.w3.org/1999/XMLSchema"
        SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
        <SOAP-ENV:Header>
            <RequesterCredentials xmlns="urn:ebay:api:PayPalAPI" SOAP-ENV:mustUnderstand="1">
                <Credentials xmlns="urn:ebay:apis:eBLBaseComponents">
                    <Username>business user from paypal sandbox</Username>
                    <Password>password from classic text api credentials</Password>
            <Signature>api from new paypal sandbox business user</Signature>
                    <Subject>email of new paypal sandbox business user</Subject>
                </Credentials>
            </RequesterCredentials>
        </SOAP-ENV:Header>
        <SOAP-ENV:Body>
            <DoDirectPaymentReq xmlns="urn:ebay:api:PayPalAPI">
                <DoDirectPaymentRequest xmlns="urn:ebay:api:PayPalAPI">
                <Version xmlns="urn:ebay:apis:eBLBaseComponents">1.0</Version>
                <DoDirectPaymentRequestDetails xmlns="urn:ebay:apis:eBLBaseComponents">
        <PaymentAction>Sale</PaymentAction>
        <PaymentDetails>
            <OrderTotal currencyID="USD">50.00</OrderTotal>
            <ItemTotal currencyID="USD">50.00</ItemTotal>
            <ShippingTotal currencyID="USD">0.00</ShippingTotal>
            <HandlingTotal currencyID="USD">0.00</HandlingTotal>
            <TaxTotal currencyID="USD">0.00</TaxTotal>
            <OrderDescription>LOCAL - </OrderDescription>
            <Custom>LOCAL - </Custom>
            <InvoiceID>LOCAL - 1417</InvoiceID>
            <PaymentItem>
              <Name>Donation</Name>
              <Number>28</Number>
              <Quantity>1</Quantity>
              <SalesTax currencyID="USD">0</SalesTax>
              <Amount currencyID="USD">50.00</Amount>
            </PaymentItem>      </PaymentDetails>
        <CreditCard>
          <CreditCardType>Visa</CreditCardType>
          <CreditCardNumber>4892645783103844</CreditCardNumber>
          <ExpMonth>4</ExpMonth>
          <ExpYear>2018</ExpYear>
          <CardOwner>
            <Payer>john_test@testuser.org</Payer>
            <PayerID></PayerID>
            <PayerStatus>1</PayerStatus>
            <PayerName>
              <FirstName>Test</FirstName>
              <LastName>User</LastName>
            </PayerName>
            <PayerCountry>US</PayerCountry>
            <PayerBusiness></PayerBusiness>
            <Address><Name>Test User</Name>             
                    <Street1>5555 W 55th St</Street1>
                <Street2></Street2>
                <CityName>Somewhere</CityName>
                <StateOrProvince>IL</StateOrProvince>
                <Country>US</Country>
                <Phone>555-555-5555</Phone>
                <PostalCode>55555</PostalCode>
            </Address>
          </CardOwner>
          <CVV2>123</CVV2>
        </CreditCard>
        <IPAddress>my ip address</IPAddress>
        <MerchantSessionId>z78m9bsliz7b7f7</MerchantSessionId>
                    </DoDirectPaymentRequestDetails>
                </DoDirectPaymentRequest>
            </DoDirectPaymentReq>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:59:21.677

“用户名”和“主题”的值是否几乎完全匹配？（“_api1.”代替“@”）？

如果它们不同并且这是有意的，您可能需要做的是以“主题”身份登录沙盒帐户，并向用户名授予第 3 方 API 权限。

如果它们没有区别，请尝试省略主题。如果这不会改变响应，您能否发布这些值？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-24T13:36:22.400

这是一个可以帮助您解决此问题的链接

[http://help.tictail.com/customer/portal/articles/1063813-paypal-error-%22you-do-not-have-permissions-to-make-this-api-call%22](http://help.tictail.com/customer/portal/articles/1063813-paypal-error-%22you-do-not-have-permissions-to-make-this-api-call%22)

# c# - UploadFileAsync 与 Foreach

> ID：15817840
> 
> 赞同：0
> 
> 时间：2013-04-04T17:30:26.190
> 
> 标签：c#, file-upload, foreach, webclient

我有：

```
 foreach (FileInfo fileinfo in Arquivos)
               {
                   float zz = (float)fileinfo.Length;
                   zz = (zz / 1024f) / 1024f;
                   label8.Text = "sending: " + fileinfo.Name + "("+zz.ToString("0.0")+"MB)...";
                   label8.Update();
                   WebClient client = new System.Net.WebClient();
                   client.Credentials = new System.Net.NetworkCredential(usuario, senha);
                   client.UploadProgressChanged += new UploadProgressChangedEventHandler(UploadProgressCallback);
                   client.UploadFile(new Uri("ftp://" + ftp + "/" + caminho + "//" + fileinfo.Name), "STOR", pasta + mes + fileinfo.Name);
                   bar++;

                   backgroundWorker1.ReportProgress(bar);
               } 
```

我需要创建一个 UploadProgressChanged，所以我有：

```
client.UploadProgressChanged += new UploadProgressChangedEventHandler(UploadProgressCallback); 
```

和

```
 private void UploadProgressCallback(object sender, UploadProgressChangedEventArgs e)
       {
           progressBar2.Value = e.ProgressPercentage;
           progressBar2.Update();
       } 
```

UploadProgressChanged 不适用于 UploadFile，只是 UploadfileAsync，但我每次需要发送 1 个文件。如何将 UploadFile 更改为 UploadFileAsync 并每次发送一个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:34:29.957

如果您一次只能发送 1 个文件，那么您为什么要担心使用 Async？您似乎还使用后台工作人员来完成所有工作。

为每个要上传的文件启动一个“任务”，然后使用一次只允许一个任务的调度程序启动它们，难道不是更好吗？

请参阅：http: [//msdn.microsoft.com/en-us/library/ee789351.aspx](http://msdn.microsoft.com/en-us/library/ee789351.aspx)

这样，您可以在简化任务的同时使用一些更新的 Task 和 async 方法。

* * *

如果您想异步运行它们但一次只执行一个，则基于进一步分析：

```
 private AutoResetEvent _fileUploadedEvent = new AutoResetEvent(false);
    private void DoUploadBackgroundWorker()
    {
        foreach (var file in files)
        {
            client.WhenUploaded += (s, e) =>
                {
                    // This signals the AutoResetEvent that it can continue
                    _fileUploadedEvent.Set();
                };
            client.UploadAsync();
            // This will keep ticking over every 15 milliseconds to check if the
            // AutoResetEvent has been triggered
            while (_fileUploadedEvent.WaitOne(15)) { }
            // We get here when it's been triggered (which means the file was uploaded)
            // So we can update the progressbar here and then move onto the next file.
        }
    } 
```

它需要扩展，并且类并不都是正确的，因为我刚刚把它放在一起，但它应该提供足够的材料来引导你朝着这个方向前进。

# mysql - 在 if/else 块内创建表的问题

> ID：15817849
> 
> 赞同：0
> 
> 时间：2013-04-04T17:30:45.377
> 
> 标签：mysql, sql, stored-procedures

我正在尝试根据某些传递参数的值在 MySQL 存储过程中创建一个表。我的代码如下：

```
DELIMITER //

CREATE PROCEDURE testifelse(IN CurrentGPA varchar(40), IN CurrentGPAValue varchar(40))
    BEGIN    
        IF CurrentGPAValue IS NULL THEN CREATE TABLE tableCurrentGPA(SELECT DISTINCT u.user_id AS uid FROM users u);
        ELSE CREATE TABLE tableCurrentGPA(SELECT DISTINCT udata.user_id AS uid FROM userdata udata WHERE udata.userDataTypeName = CurrentGPA AND udata.userDataText = CurrentGPAValue);
    END 
```

我收到一条错误消息：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '' 附近使用正确的语法。

我不确定我在这里做错了什么。语法对我来说很好，查询也很合理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:35:04.613

你错过了`END IF`陈述。

```
CREATE PROCEDURE testifelse(IN CurrentGPA varchar(40), IN CurrentGPAValue varchar(40))
    BEGIN    
        IF CurrentGPAValue IS NULL THEN CREATE TABLE tableCurrentGPA(SELECT DISTINCT u.user_id AS uid FROM users u);
        ELSE CREATE TABLE tableCurrentGPA(SELECT DISTINCT udata.user_id AS uid FROM userdata udata WHERE udata.userDataTypeName = CurrentGPA AND udata.userDataText = CurrentGPAValue);
        END IF;
    END 
```

# css - 如何将两个 CSS 渐变背景放在一个 div 中？

> ID：15817851
> 
> 赞同：2
> 
> 时间：2013-04-04T17:30:53.050
> 
> 标签：css, gradient

我有以下CSS：

```
.main {
    padding-right: 15px;
    padding-left: 15px;
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2U1ZTVlNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+)top;
    background: -moz-linear-gradient(top, rgba(229,229,229,1) 0%, rgba(255,255,255,0) 100%)top; /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(229,229,229,1)), color-stop(100%,rgba(255,255,255,0)))top; /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%)top; /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%)top; /* IE10+ */
    background: linear-gradient(to bottom, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%) top; /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e5e5e5', endColorstr='#00ffffff',GradientType=0 )top; /* IE6-8 */
    background-size: Auto 200px;
    background-repeat: repeat-x;
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2U1ZTVlNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+)bottom;
    background: -moz-linear-gradient(top, rgba(229,229,229,1) 0%, rgba(255,255,255,0) 100%)bottom; /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(229,229,229,1)), color-stop(100%,rgba(255,255,255,0)))bottom; /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%)bottom; /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%)bottom; /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%)bottom; /* IE10+ */
    background: linear-gradient(to bottom, rgba(229,229,229,1) 0%,rgba(255,255,255,0) 100%) bottom; /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e5e5e5', endColorstr='#00ffffff',GradientType=0 )bottom; /* IE6-8 */
    background-size: Auto 200px;
    background-repeat: repeat-x;
    padding-top: 50px;
    min-height:600px;
} 
```

这是一个活生生的例子：http: [//jsfiddle.net/ZtJmM/](http://jsfiddle.net/ZtJmM/)

我希望一个渐变位于元素的顶部，一个位于元素的底部。那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T17:34:01.623

是的，在相同的语句中使用它们，例如：

```
background: linear-gradient(to bottom, rgba(229,229,229,1) 0%,
                                       rgba(255,255,255,0) 100%) top, 
            linear-gradient(to bottom, rgba(229,229,229,1) 0%,
                                       rgba(255,255,255,0) 100%) bottom; 
```

# python - 在 wxPython 中确定选定的图像

> ID：15817856
> 
> 赞同：1
> 
> 时间：2013-04-04T17:31:02.063
> 
> 标签：python, user-interface, wxpython

我有一组可用的图像。如果我单击其中一个图像，是否可以确定在 wxPython 中单击了哪些图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:38:22.943

您几乎可以肯定必须自己计算。最直接的方法是使用 wx.EVT_LEFT_DOWN 之类的鼠标事件并在事件处理程序中获取鼠标的坐标。然后使用该信息告诉您单击 wxPython 窗口的哪个位置。您的每个图像小部件或 DC 或您正在使用的任何东西都可以报告它的大小和位置，因此如果鼠标坐标在 X 图像的边界内，您就知道它已被点击。您可能还可以使用 HitTest() 方法，具体取决于您用于显示图像的内容。

**编辑**：如果你使用 wx.StaticBitmap，你会这样做，它实际上可以让你附加一个 wx.EVT_LEFT_DOWN 到它：

```
import wx

class PhotoCtrl(wx.Frame):
    def __init__(self):
        size = (400,800)
        wx.Frame.__init__(self, None, title='Photo Control', size=size)

        self.panel = wx.Panel(self)

        img = wx.EmptyImage(240,240)
        self.imageCtrl = wx.StaticBitmap(self.panel, wx.ID_ANY, 
                                         wx.BitmapFromImage(img),
                                         name="emptyImage")
        imageCtrl2 = wx.StaticBitmap(self.panel, wx.ID_ANY, 
                                     wx.BitmapFromImage(img),
                                     name="anotherEmptyImage")

        self.imageCtrl.Bind(wx.EVT_LEFT_DOWN, self.onClick)
        imageCtrl2.Bind(wx.EVT_LEFT_DOWN, self.onClick)

        mainSizer = wx.BoxSizer(wx.VERTICAL)
        mainSizer.Add(self.imageCtrl, 0, wx.ALL, 5)
        mainSizer.Add(imageCtrl2, 0, wx.ALL, 5)

        self.panel.SetSizer(mainSizer)
        self.Show()

    #----------------------------------------------------------------------
    def onClick(self, event):
        """"""
        print event.GetPosition()
        imgCtrl = event.GetEventObject()
        print imgCtrl.GetName()

if __name__ == '__main__':
    app = wx.App(False)
    frame = PhotoCtrl()
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:33:02.693

您没有告诉我们有关您如何显示图像的任何信息吗？你是在直流电上把它们弄错了吗？你在为他们创建面板吗？等等...正确设置您的项目很重要。基本上你给我们零信息来帮助你。

牢记这一切，这样的事情就可以正常工作（这被称为自包含代码示例，您应该始终提供您的问题，以便人们更容易帮助您）

```
import wx
a = wx.App(redirect=False)
f= wx.Frame(None,-1,"Some Frame",size = (200,200))
sz = wx.BoxSizer(wx.HORIZONTAL)
def OnClick(evt):
    print "Clicked:",evt.GetId()-10023
for i,img in enumerate(["img1","img2","img3"]):
    id = 10023+i
    p = wx.Panel(f,-1)
    sz.Add(p)
    sz1 = wx.BoxSizer()
    p.Bind(wx.EVT_LEFT_UP,OnClick)
    bmp = wx.Image(img).ConvertToBitmap()
    b = wx.StaticBitmap(p,-1,bmp)
    sz1.Add(b)
    p.SetSizer(sz1)

f.SetSizer(sz)
f.Layout()
f.Fit()
f.Show()
a.MainLoop() 
```

请记住我没有测试它......但理论上它应该可以工作......

# matlab - 如何将数据保存在此“opts = statset('Display','iter');”显示的文件或矩阵中 在 Matlab 中？

> ID：15817861
> 
> 赞同：2
> 
> 时间：2013-04-04T17:31:22.113
> 
> 标签：matlab, k-means, fuzzy

我正在开发一段 k-means 模糊代码。现在我想保存由 . 显示的每次迭代的数据`statset('Display','iter');`。请帮帮我。

```
X = [randn(20,2)+ones(20,2); randn(20,2)-ones(20,2)];
opts = statset('Display','iter');

[cidx, ctrs] = kmeans(X, 2, 'Distance','city', ...
    'Replicates',5, 'Options',opts);

plot(X(cidx==1,1),X(cidx==1,2),'r.', ...
X(cidx==2,1),X(cidx==2,2),'b.', ctrs(:,1),ctrs(:,2),'kx'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:55:47.920

该函数提供了一个虚拟解决方案，该函数 [`diary`](http://www.mathworks.nl/help/matlab/ref/diary.html)可以将 matlab 控制台输出存储在文件中。

```
X = [randn(20,2)+ones(20,2); randn(20,2)-ones(20,2)];
opts = statset('Display','iter');

diary('output.txt')  % # Whatever is displayed from now on is saved on 'output.txt'

[cidx, ctrs] = kmeans(X, 2, 'Distance','city', ...
    'Replicates',5, 'Options',opts);

diary('off')         % # logging is disabled 
```

执行后，`output.txt`将包含

```
 iter    phase       num             sum
  1      1        40          96.442
  2      1         8         79.7403
  3      1         6         70.2776
 ... 
```

您可能希望`output.txt`在每次运行时清除内容，否则它只会在前一个日志之后附加新日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:04:04.220

一种实现方法是将 MATLAB 终端中显示的输出重定向到一个文件，例如`'my_file.txt'`. 为此：

1.  使用命令`edit statset.m;`在 MATLAB 编辑器中打开文件。
2.  使用 .打开您需要的输出文件`fid = fopen('my_file.txt','w');`。
3.  替换`fprintf(`为`fprintf(fid,`。

`statset.m`为了安全起见，您可能还想保留一份备份副本。

## 编辑

@Acorbe 的解决方案在没有上述所有麻烦的情况下给出了相同的结果。

# sql - Oracle 11g r2 字符串聚合

> ID：15817863
> 
> 赞同：0
> 
> 时间：2013-04-04T17:31:35.083
> 
> 标签：sql, oracle11g

我有一个包含 ID 和位置列的表，我正在尝试将多行组合成逗号分隔的列表。例如：

```
Source table:   ID    Location      Name
                 1        USA       Bob 
                 1        Brazil    Bob
                 1        Russia    Bob
                 2        India     Emily
                 2        China     Emily 
```

我的目标表应该得到这样的值

```
Target table:   ID    Location             Name
                 1     USA, Brail, Russia  Bob
                 2     India, China        Emily 
```

如何使用 oracle 11g R2 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:32:47.720

您可以使用`listagg()`：

```
select id, listagg(location, ', ') within group (order by id) as location
from source
group by id 
```

这不保证表中的原始顺序。SQL 表本质上是无序的，因此为了保证这一点，您需要为每一行设置一个不同的行 ID。以下可能会接近：

```
select id, listagg(location, ', ') within group (order by seqnum) as location
from (select *, rownum as seqnum from source) s
group by id 
```

# asp.net - iis 与 asp.net 开发的最佳工作流程

> ID：15817867
> 
> 赞同：0
> 
> 时间：2013-04-04T17:31:43.300
> 
> 标签：asp.net, iis-7

我是一名 asp.net 开发人员，但我还没有找到一个好的部署工作流程。特别是对于甚至可能不需要编译的小型快速修复。

我现在的工作方式是启动两个 VS 实例，同时在项目和 IIS 服务器上的文件夹之间复制粘贴大量代码和文件。当我保存在 VS 项目中时，是否有一个自动化的过程可以移动更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:49:12.097

一般来说，由于很多原因，你正在做的事情是一个很大的不。

当您进行更改时，ASP.Net 相对于 PHP 之类的最大优势之一就是在构建阶段发现了明显的问题（例如拼写错误的变量名）。这是一个巨大的好处。

接下来，如果您只是修改文件并将其内容复制到服务器，那么听起来您是*在生产*环境中进行测试，而不是利用本地调试器。同样，非常糟糕的做法。

最后，VS 包含一个发布命令。这样做的目的是编译您的站点并将其发布到服务器。它可以通过常规文件系统、FTP、Web 部署包甚至 FPSE 来实现。不建议使用最后一个，并且可能仅出于向后兼容性而保留。

重点是，在本地开发和测试。当您准备好将其发送到服务器时，请使用发布命令。

# postgresql - PostgreSQL-过滤日期范围

> ID：15817871
> 
> 赞同：39
> 
> 时间：2013-04-04T17:31:52.667
> 
> 标签：postgresql, date-range

我是一名 SQL 开发人员，大部分时间都花在 MSSQL 上。我正在寻找一种更好的方法来过滤 PostgreSQL 数据库中的“没有时区的时间戳”字段。

我正在使用：

```
Where 
DateField >= '2010-01-01' and 
DateField < '2012-01-01' 
```

但鉴于我不是语法专家，我不得不认为有更好的方法。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-04T19:14:56.310

你的解决方案很好。如果日期是文字，我更喜欢：

```
WHERE datefield >= '2010-01-01 00:00:00' 
 AND  datefield <  '2012-01-01 00:00:00' 
```

这执行完全相同，但更易于维护，因为它清楚地表明每个文字“日期”的点是时间戳，而不是日期。例如，假设有时有人将您的查询更改为以下内容

```
 AND  datefield <=  '2012-01-01' 
```

...期望（并且失败）在查询中包含全天“2012-01-01”。使用后面的语法，意图更加清晰，并且防止了这种混淆。

为了使其更加清晰（也许过于冗长），您可以进行显式转换：

```
WHERE datefield >= '2010-01-01 00:00:00'::timestamp 
 AND  datefield <  '2012-01-01 00:00:00'::timestamp 
```

`to_date()`出于类似的原因（潜在的数据类型混淆），我不会在这里使用，也不会`to_timestamp()`（它返回 a `timestamptz`）。

顺便说一句，我已经修改了案例以符合推荐的做法（大写的关键字，小写的标识符）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-04T17:46:53.977

对于日期间隔，您可以使用以下内容：

```
WHERE DateField BETWEEN to_date('2010-01-01','YYYY-MM-DD') 
                    AND to_date('2010-01-02','YYYY-MM-DD') 
```

它更短（您不需要重复`DateField`），并且具有明确的日期格式。

对于 1 小时/天/月/年，您可以使用：

```
WHERE date_trunc('day',DateField) = to_date('2010-01-01','YYYY-MM-DD') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-31T02:44:58.233

`BETWEEN`只要您的列名是类型`TIMESTAMP`并且您的列名不是“时间戳”，您就可以使查询保持简单......

`SELECT * FROM table WHERE column BETWEEN '2018-12-30 02:19:34' AND '2018-12-30 02:25:34'`

这适用于日期“2018-12-30”和日期时间“2018-12-30 02:19:34”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-25T07:20:41.510

我同意 leonbloy 的观点，即使用它会使代码更具可读性和清晰性。

```
WHERE datefield >= '2010-01-01 00:00:00'::timestamp 
AND  datefield <  '2012-01-01 00:00:00'::timestamp 
```

# javascript - 标签应该出现在数据表插件中文本框的右侧

> ID：15817881
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:32:26.577
> 
> 标签：javascript, jquery, html, css, datatable

我正在使用数据表 jquery 插件...在那个搜索框中出现...现在我的标签在左侧，搜索框在右侧...如何移动左侧的搜索文本框和右侧的标签侧面......我已经把我的代码放在小提琴中......如果我将js插件单独放在JS面板中它不起作用......所以我将代码组合并放在一个面板中......

[http://jsfiddle.net/bz2C4/37/](http://jsfiddle.net/bz2C4/37/)

我的相关代码从第 2121 行开始

```
#moveLabel {
    border: 1px solid black;
}
.dataTables_filter label {
    border: 1px solid red;
    background: lemonchiffon;
}
.dataTables_filter {
    position: static;
    text-align: center;
} 
```

在下面提供我的代码

```
/**
         * Generate the node required for filtering text
         *  @returns {node} Filter control element
         *  @param {object} oSettings dataTables settings object
         *  @memberof DataTable#oApi
         */
        function _fnFeatureHtmlFilter ( oSettings )
        {
            var oPreviousSearch = oSettings.oPreviousSearch;

            var sSearchStr = oSettings.oLanguage.sSearch;
            sSearchStr = (sSearchStr.indexOf('_INPUT_') !== -1) ?
              sSearchStr.replace('_INPUT_', '<input type="text" />') :
              sSearchStr==="" ? '<input type="text" />' : sSearchStr+' <input type="text" />';

            var nFilter = document.createElement( 'div' );
            nFilter.className = oSettings.oClasses.sFilter;
            nFilter.innerHTML = '<label id="moveLabel">'+sSearchStr+'</label>';
            if ( !oSettings.aanFeatures.f )
            {
                nFilter.id = oSettings.sTableId+'_filter';
            }

            var jqFilter = $('input[type="text"]', nFilter);

            // Store a reference to the input element, so other input elements could be
            // added to the filter wrapper if needed (submit button for example)
            nFilter._DT_Input = jqFilter[0];

            jqFilter.val( oPreviousSearch.sSearch.replace('"','&quot;') );
            jqFilter.bind( 'keyup.DT', function(e) {
                /* Update all other filter input elements for the new display */
                var n = oSettings.aanFeatures.f;
                var val = this.value==="" ? "" : this.value; // mental IE8 fix :-(

                for ( var i=0, iLen=n.length ; i<iLen ; i++ )
                {
                    if ( n[i] != $(this).parents('div.dataTables_filter')[0] )
                    {
                        $(n[i]._DT_Input).val( val );
                    }
                }

                /* Now do the filter */
                if ( val != oPreviousSearch.sSearch )
                {
                    _fnFilterComplete( oSettings, { 
                        "sSearch": val, 
                        "bRegex": oPreviousSearch.bRegex,
                        "bSmart": oPreviousSearch.bSmart ,
                        "bCaseInsensitive": oPreviousSearch.bCaseInsensitive 
                    } );
                }
            } );

            jqFilter
                .attr('aria-controls', oSettings.sTableId)
                .bind( 'keypress.DT', function(e) {
                    /* Prevent form submission */
                    if ( e.keyCode == 13 )
                    {
                        return false;
                    }
                }
            );

            return nFilter;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:18:11.910

您应该使用[sDom 选项](http://datatables.net/usage/options)来定制表 DOM 定位。

默认值：lfrtip（当 bJQueryUI 为假时）或 <"H"lfr>t<"F"ip>（当 bJQueryUI 为真时）

```
$(document).ready( function() {
  $('#example').dataTable( {
    "sDom": 'flrtip'
  } );
} ); 
```

您可以像这样添加新的 div 元素和类：

```
$('#example').dataTable( {
        "sDom": '<"top"i><"title">lt<"bottom"pf>'
} ); 
```

其余的就像其他人所说的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:07:08.733

我做了以下操作，以相对放置标签和输入：这将起到作用，至少在我尝试过的分辨率中。

```
#moveLabel {
    border: 1px solid black;
    position: relative;
    left: 70px;
}
#moveLabel > input {
    position: relative;
    left: -280px;
} 
```

[更新的小提琴](http://jsfiddle.net/vals/bz2C4/38/)

# c# - 快速旋转/变换矩阵乘法

> ID：15817888
> 
> 赞同：4
> 
> 时间：2013-04-04T17:32:44.327
> 
> 标签：c#, .net, performance, matrix, matrix-multiplication

我正在寻找 C# 中 3x3 旋转和 4x4 变换矩阵的最有效方法`matrix * matrix`和`matrix * vector`操作。

我目前将我的矩阵存储在多维数组 ( `new double[3,3]`, `new double[4,4]`) 中。我并不完全反对改变它，但如果可能的话，我想保留语法。我当前使用 3 个标准嵌套 for 循环的乘法工作正常，但可能成为瓶颈。

到目前为止我的想法：

*   Strassen 等优化算法不适用于这些尺寸
*   在单个 4x4 乘法级别上，并行化也没有多大意义；在更高的水平上做得更好。
*   由于边界检查效率较低，多维数组在 c# 中（曾经？）较慢，但这可以通过不安全的指针算法来克服。（我不确定这些信息的最新情况）
*   旋转矩阵是对称的，可能有办法利用它吗？
*   最大的收获可能是通过使用缓存局部性来实现，确保一起访问内存中靠近的值；但我不确定如何做到这一点。

因此，在我使用 unsafe、fixed 和 3 个 for 循环组合我自己的解决方案之前，是否已经有针对这个标准问题的经过测试和优化的解决方案？

还是我忽略了其他优化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:58:22.040

这就是我使用的，它的工作速度出奇的快。

```
public struct Matrix3 
{
    public readonly double a11, a12, a13;
    public readonly double a21, a22, a23;
    public readonly double a31, a32, a33;
    ...
    public vec3 Multiply(vec3 rhs)
    {
        // y= A*x
        // fill vector by element
        return new vec3(
            (a11*rhs.X+a12*rhs.Y+a13*rhs.Z),
            (a21*rhs.X+a22*rhs.Y+a23*rhs.Z),
            (a31*rhs.X+a32*rhs.Y+a33*rhs.Z));
    }

    public mat3 Multiply(mat3 rhs)
    {
        // Y = A*X
        // fill matrix by row
        return new mat3(
            (a11*rhs.a11+a12*rhs.a21+a13*rhs.a31),
            (a11*rhs.a12+a12*rhs.a22+a13*rhs.a32),
            (a11*rhs.a13+a12*rhs.a23+a13*rhs.a33),

            (a21*rhs.a11+a22*rhs.a21+a23*rhs.a31),
            (a21*rhs.a12+a22*rhs.a22+a23*rhs.a32),
            (a21*rhs.a13+a22*rhs.a23+a23*rhs.a33),

            (a31*rhs.a11+a32*rhs.a21+a33*rhs.a31),
            (a31*rhs.a12+a32*rhs.a22+a33*rhs.a32),
            (a31*rhs.a13+a32*rhs.a23+a33*rhs.a33));
    }
} 
```

where`vec3`和`mat3`是我自己的别名`Vector3`，`Matrix3`存储元素的结构是字段。同样适用于 4 元素结构。我也把它编码成这样的倒数：

```
 public double Determinant()
    {
        return a11*(a22*a33-a23*a32)
            +a12*(a23*a31-a21*a33)
            +a13*(a21*a32-a22*a31);
    }
    /// <summary>
    /// Solves the system of equations this*x=rhs for x
    /// </summary>
    public vec3 Solve(vec3 rhs)
    {
        double D=Determinant();
        double ID=1/D;
        return new vec3(
            (((a22*a33-a23*a32)*rhs.X+(a13*a32-a12*a33)*rhs.Y+(a12*a23-a13*a22)*rhs.Z)*ID),
            -(((a21*a33-a23*a31)*rhs.X+(a13*a31-a11*a33)*rhs.Y+(a11*a23-a13*a21)*rhs.Z)*ID),
            (((a21*a32-a22*a31)*rhs.X+(a12*a31-a11*a32)*rhs.Y+(a11*a22-a12*a21)*rhs.Z)*ID));
    }
    /// <summary>
    /// Solves the system of equations this*X = rhs for X
    /// </summary>
    public mat3 Solve(mat3 rhs)
    {
        double D=Determinant();
        double ID=1/D;
        return new mat3(
            (((a22*a33-a23*a32)*rhs.a11+(a13*a32-a12*a33)*rhs.a21+(a12*a23-a13*a22)*rhs.a31)*ID),
            (((a22*a33-a23*a32)*rhs.a12+(a13*a32-a12*a33)*rhs.a22+(a12*a23-a13*a22)*rhs.a32)*ID),
            (((a22*a33-a23*a32)*rhs.a13+(a13*a32-a12*a33)*rhs.a23+(a12*a23-a13*a22)*rhs.a33)*ID),

            -(((a21*a33-a23*a31)*rhs.a11+(a13*a31-a11*a33)*rhs.a21+(a11*a23-a13*a21)*rhs.a31)*ID),
            -(((a21*a33-a23*a31)*rhs.a12+(a13*a31-a11*a33)*rhs.a22+(a11*a23-a13*a21)*rhs.a32)*ID),
            -(((a21*a33-a23*a31)*rhs.a13+(a13*a31-a11*a33)*rhs.a23+(a11*a23-a13*a21)*rhs.a33)*ID),

            (((a21*a32-a22*a31)*rhs.a11+(a12*a31-a11*a32)*rhs.a21+(a11*a22-a12*a21)*rhs.a31)*ID),
            (((a21*a32-a22*a31)*rhs.a12+(a12*a31-a11*a32)*rhs.a22+(a11*a22-a12*a21)*rhs.a32)*ID),
            (((a21*a32-a22*a31)*rhs.a13+(a12*a31-a11*a32)*rhs.a23+(a11*a22-a12*a21)*rhs.a33)*ID));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:00:56.653

如果您希望它在 Microsoft C# 中用于性能，我会；

*   展开循环。不要使用循环，而是全部写出来这对于这些较小的固定大小乘法是可行的。
*   应用第一个建议后，尝试 Unsafe Fixed 版本（这对于许多快速数组访问仍然很重要）

对于 Mono，Mono.SIMD 库可能值得一看。

如果您可以同时卸载其中的许多，那么使用 GPU 的并行性将是一个不错的选择。对于 C#，我会查看[http://www.hybriddsp.com/Products/CUDAfyNET.aspx](http://www.hybriddsp.com/Products/CUDAfyNET.aspx)但可能还有其他人。我还没有从 C# 完成任何 GPU 的东西，但这将是我的起点。

# javascript - 在 Javascript 中获取复杂命名空间下的数据

> ID：15817891
> 
> 赞同：1
> 
> 时间：2013-04-04T17:32:57.477
> 
> 标签：javascript, xml, xml-namespaces

我有以下 XML 需要能够从中提取特定字段：

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">
<id>Cases</id>
<title type="text">CaseList</title>
<updated>2013-04-04T15:32:56Z</updated>
<author>
<name/>
</author>
<link href="CaseList" rel="self" title="CaseList"/>
<entry>
    <id>291</id>
    <title type="text">CaseList('291')</title>
    <updated>2013-04-04T15:32:56Z</updated>
    <category term="S.Cases" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>
        <content type="application/xml">
            <m:properties>
                <d:case_id>291</d:case_id>
                <d:case_title>Global Case</d:case_title>
                <d:case_type>Meso</d:case_type>
        </m:properties>
    </content>
</entry>
<entry>
    <id>291</id>
    <title type="text">CaseList('292')</title>
    <updated>2013-04-04T15:38:56Z</updated>
    <category term="S.Cases" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>
        <content type="application/xml">
            <m:properties>
                <d:case_id>292</d:case_id>
                <d:case_title>Global Case 2</d:case_title>
                <d:case_type>Meso 2</d:case_type>
        </m:properties>
    </content>
</entry>
</feed> 
```

我几乎尝试了所有方法，但我觉得我缺少一个核心 XML 概念，它可以帮助我提取节点，例如 d:case_id。有没有一种使用 Javascript 拉出一个或多个节点的简单方法？其他命名空间问题不包括另一个命名空间中的命名空间......在这里，我感兴趣的值在 m:properties 后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:18:09.900

我用过这个

```
parentNode.getElementsByTagNameNS("*", "name"); 
```

它在 chrome 和 IE10 浏览器中对我来说效果很好。

请点击以下链接了解详情：

[使用命名空间解析 jQuery XML](https://stackoverflow.com/questions/853740/jquery-xml-parsing-with-namespaces)

# node.js - Sequelize Associate Objects 失败，没有方法 addX

> ID：15817892
> 
> 赞同：0
> 
> 时间：2013-04-04T17:32:58.967
> 
> 标签：node.js, sequelize.js

尝试将电话号码与用户关联会导致节点告诉我用户对象没有方法 addPhonenumber。（也发生在 setPhonenumber 上）

```
req.user.setPhonenumbers(phonenumber).success(function(user){
             ^
TypeError: Object [object Object] has no method 'setPhonenumbers' 
```

如何正确关联对象？代码如下。

models.js 中的对象定义：

```
exports.User = require("./user")(sequelize, Sequelize);
exports.Phonenumber = require("./phonenumber")(sequelize, Sequelize);
exports.Recording = require("./recording")(sequelize, Sequelize);
exports.Call = require("./call")(sequelize, Sequelize);

User
  .hasMany(Phonenumber)
  .hasMany(Recording);

Phonenumber
  .belongsTo(User)
  .hasOne(Recording)
  .hasMany(Call);

Recording.belongsTo(User);

Call.belongsTo(Phonenumber); 
```

尝试设置关联：

```
 var phonenumber = yp.db.Phonenumber.create({
        number: number.phone_number
      }).success(function(number){
        console.log(number);
        console.log(req.user);
        req.user.setPhonenumbers(phonenumber).success(function(user){
          console.log(user);
        });
      }); 
```

以及上面引用的req.user的console.log结果：

```
{ __options: 
   { timestamps: true,
     instanceMethods: { fullname: [Function] },
     classMethods: {},
     validate: {},
     freezeTableName: false,
     underscored: false,
     syncOnAssociation: true,
     paranoid: true,
     omitNull: false,
     hasPrimaryKeys: false },
  hasPrimaryKeys: false,
  selectedValues: 
   { firstname: 'Nathan',
     lastname: 'Loyer',
     email: 'xxx@gmail.com',
     password: '****',
     facebookid: '****',
     id: 2,
     createdAt: Thu Feb 28 2013 20:40:29 GMT-0600 (CST),
     updatedAt: Wed Mar 06 2013 20:22:05 GMT-0600 (CST),
     deletedAt: null },
  firstname: 'Nathan',
  lastname: 'Loyer',
  email: 'xxx@gmail.com',
  password: '****',
  facebookid: '****',
  id: 2,
  createdAt: Thu Feb 28 2013 20:40:29 GMT-0600 (CST),
  updatedAt: Wed Mar 06 2013 20:22:05 GMT-0600 (CST),
  deletedAt: null,
  isNewRecord: false } 
```

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:15:48.900

你的每个 hasMany 都需要一个匹配的 belongsTo。并且，关联的函数将是 setPhonenumbers。请参阅：[http ://www.sequelizejs.com/documentation#associations-associating-objects](http://www.sequelizejs.com/documentation#associations-associating-objects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:37:01.703

原来这是我的命名不够严格的问题。在 phonenumber 模型的模型定义中，我使用 Number 而不是 Phonenumber。

```
module.exports = function(sequelize, Sequelize){

  return sequelize.define('Number',{
    number: Sequelize.STRING,
  },{
    paranoid: true
  });

} 
```

所以它创建了一个 setNumbers 函数，而不是 setPhonenumbers 函数。改为将其更改为 Phonenumber 并重新创建表格使上述代码几乎可以工作。setPhonenumbers 似乎想要一个数组，所以我用 addPhonenumber 代替。

# java - 如何在 Java 中使用 i18n 代码模板而不是 Spring MVC 3 中的 JSTL

> ID：15817900
> 
> 赞同：2
> 
> 时间：2013-04-04T17:33:22.543
> 
> 标签：java, spring, jsp, spring-mvc, jstl

当前的 spring MVC 应用程序集成`i18n`和`JST`L 用于常量字符串消息/标签。这里有一些需要解决的方法来获取`code template`,`service layer`以便可以将所有标签值打包`String ArrayList`

例如：

在 中`message.properties`，有属性列表：

```
task_START=Start
task_ORDER=Order
task_CANCEL=Cancel
.....
task_FINISH=Finish

task.list=START,ORDER,FINISH 
```

现在在服务层中，我需要在上面分解`task.list`并采用代码模板`task_[value]`（这是来自 JSTL 的格式，但不确定这在 Java 代码中是否有效）将所有分解作为 String ArrayList：

```
{"Start", "Order", "Finish"} 
```

在我的代码中，我已经有了：

```
@Value("${task.list}")
String taskString;

List<String> tasks= new ArrayList<String>();

@PostConstruct
public void init() {
    String[] taskArray = taskString.split(",");
    for(String task:taskArray){
            // need match code template here
        tasks.add(task.trim()); 
    }
    Collections.sort(tasks);
} 
```

上面的代码需要模板匹配来将确切的属性值而不是属性名称注入列表，但是如何实现这一点，就像在 JSTL 中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T22:01:24.887

您只需注入[`MessageSource`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/MessageSource.html)并使用它的一种[`getMessage`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/MessageSource.html#getMessage%28java.lang.String,%20java.lang.Object%5B%5D,%20java.util.Locale%29)方法，例如：

```
@Autowired
private MessageSource messageSource;

someMethod(){
    String task = ...;
    String code = messageSource.getMessage("task_["+ task +"]", LocaleContextHolder.getLocale());
} 
```

# java - 使用 java 运行服务器和客户端应用程序编码

> ID：15817901
> 
> 赞同：0
> 
> 时间：2013-04-04T17:33:23.597
> 
> 标签：java, sockets, network-programming, client-server

谢谢大家看到我的问题。我想用 java 解释一下我在 Socket 上的问题。使用套接字，一个用于服务器等待客户端连接，另一个用于客户端与服务器连接。**有两个问题~~**

(1)

+++全部连接后，双方就可以互相交换消息了。我已经完成了服务器和客户端的两个应用程序代码，每个代码都有自己的主**线程**，但我不能让它们相互通信。我使用 windows 命令来运行这两个文件 .class。我先运行服务器，然后运行客户端。他们无法相互交流。我想知道这是否是拥塞的问题。如果我建立另一个线程，这个问题可以解决吗？？

(2) 我尝试在两个 Eclipse 上运行这两个应用程序，换句话说，每个 Eclipse 运行一个应用程序。为什么这个问题可以解决？？

(3) 这里是我的客户代码：

```
import java.util.*;
import java.io.*;
import java.net.*;

public class CC {
    public static void main(String args[]){
         Socket   client=null;
         DataInputStream in=null;
         DataOutputStream out=null;
         try{
              client=new Socket("127.0.0.1",2060);
              in=new DataInputStream(client.getInputStream());
              out=new DataOutputStream(client.getOutputStream());
              System.out.println("You are a client,you send message to server");
              Scanner cin=new Scanner(System.in);
              while(true){
                String send=null,receive=null;
                System.out.println("Please input Client message sending to server!");
                send=cin.nextLine();
                out.writeUTF(send);
                receive=in.readUTF();
                System.out.println("Message from Server is:"+receive);
                Thread.sleep(500);  
              } 
         }

         catch(Exception e){
            System.out.println("break！&quot;+e);

         }

   } 
```

}

这是我的服务器代码

```
 import java.util.*;
 import java.io.*;
 import java.net.*;
 public class SS {
  public  static void main(String args[]){
      ServerSocket socketServer=null;
      DataInputStream  in=null;
      DataOutputStream out=null;
      Socket server;
      try{
          socketServer=new ServerSocket(2060);
      }
      catch(Exception e1){
          System.out.println("can't estblish socketServer "+e1);  
      }
      try{
          Scanner cin=new Scanner(System.in);
          System.out.println("you are server ,please send message to client");
          server=socketServer.accept();  
          in=new DataInputStream(server.getInputStream());
          out=new DataOutputStream(server.getOutputStream());
          while(true){
              String send=null,receive=null;
              receive=in.readUTF();
              System.out.println("get message from client is "+receive);
              System.out.println("send message from client");
              send=cin.nextLine();
              out.writeUTF(send);
         }
      }
      catch(Exception e){
         System.out.println("break！ "+e);
      }
  }      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:55:33.427

服务器和客户端代码死锁。

在您编写的客户端代码中`send=cin.nextLine();`，它会阻塞，直到有更多输入可用。在您编写的服务器代码中，`receive=in.readUTF();`在输入可用之前，它也会阻塞。

也就是说，在建立连接后，服务器和客户端都希望对方发送导致死锁的内容，并且他们都无限期地等待。

您必须确保服务器或客户端在等待接受输入之前先发送一些输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T15:38:40.733

谢谢，这个问题我已经在我的朋友下解决了。因为我之前运行过这个应用程序，端口被占用了。然后我第二次运行这个应用程序，结果这两个应用程序无法传输消息。这两个应用程序是完全正确的。

# mysql - 优化包含子选择的 MySQL 查询

> ID：15817903
> 
> 赞同：2
> 
> 时间：2013-04-04T17:33:24.167
> 
> 标签：mysql, sql

我有一个可以被描述为需要优化的大型 MySQL 查询。查询所做的是选择与反向链接处理相关的数据。

反向链接处理是指将大约 100,000 个链接添加到数据库中。这些链接被分批选择和卷曲，以寻找指向我网站的反向链接。

我在此查询中选择的信息是：

*   `complete`- 处理完成（bool 1 或 0）
*   `current_step`- 我们在 3 中的哪一步（1、2 或 3）
*   `percent`- 我现在的步骤完成了多少百分比（0.0-100.0）
*   `total_rows`- 数据库中具有该表键 ID（整数）的所有行的完整计数
*   `live_rows`- 与我的页面的实时反向链接找到的链接数（整数）
*   `dead_rows`- 找到的没有反向链接的链接数（整数）

注意：当前步长是通过查看`checked`列的 MAX() 值来计算的。如果找不到链接，我们会检查两次链接。因此，当工具第一次开始运行时，所有`checked`值都设置为零（因为处理尚未开始），因此我们希望当前步骤为步骤 1。然后我们处理所有行并将所有`checked`值设置为 1，并且对于第 1 步，百分比将返回 100.00，然后程序开始对第一次发现已失效的链接进行双重检查。随着第二次检查的进行，一些行被设置为 2，因此 MAX(checked) 在第二步中返回 2。完成第二步后，程序将`processing_complete`列更改为 1，我们返回 3 作为完成的当前步骤。我们返回 3 是因为它会导致 UI 变为完成状态。

我有 2 张桌子，这是它们的一般结构。请注意，这`tablekey_id`是一个外键从`google_sort_backlink_domains`返回到中的`id`列`google_sort_tablekey`。

**google_sort_tablekey：**

*   `id`- 主键、索引列
*   `unique_id`- 唯一哈希用作此工具运行的唯一标识符
*   `processing_completed`- 处理完成时布尔标志设置为 1

**google_sort_backlink_domains：**

*   `id`- 主键、索引列
*   `tablekey_id`- google_sort_tablekey 的外键
*   `checked`- 当链接卷曲时，布尔标志设置为 1，然后
*   `link_found`- 如果在第一次或第二次检查期间发现反向链接，则布尔标志设置为 1
*   `link_href`- 字符串，链接到页面

这是该数据可能看起来的一个非常小的示例

```
google_sort_tablekey:
id     unique_id       processing_completed
23     35799756448     1
24     78698778978     0

google_sort_backlink_domains:
id     tablekey_id     checked     link_found     link_href
11     23              1           0              http://www.website.com/1...
12     24              0           0              http://www.website.com/2...
13     23              1           1              http://www.website.com/3...
14     24              1           1              http://www.website.com/4...
15     24              1           1              http://www.website.com/5...
16     24              0           0              http://www.website.com/6... 
```

这是我的查询，但是当我处理 100,000 行的数据集时，它需要很长时间。我添加了空格以帮助提高可读性，并且我还硬编码为 24 的 id，这将在生产中使用变量进行设置。

```
SELECT `processing_completed` AS complete,

ROUND((SELECT((SUM(IF((`link_found` = 1 OR `checked` >= (SELECT MAX(`checked`) 
    FROM `google_sort_backlink_domains` WHERE `tablekey_id` = 24)), 1, 0)) / SUM(1))*100) AS percent
FROM `google_sort_backlink_domains` WHERE `tablekey_id` = 24), 1) AS percent,

CASE WHEN `processing_completed` = 1 THEN 3 WHEN MAX(`checked`) = 0 THEN 1 ELSE MAX(`checked`) END AS current_step,

(SELECT COUNT(1) FROM `google_sort_backlinks` WHERE `tablekey_id` = 24) AS total_rows,

(SELECT COUNT(1) FROM `google_sort_backlink_domains` WHERE `tablekey_id` = 24) AS unique_domains,

(SELECT COUNT(1) FROM `google_sort_backlink_domains` WHERE `tablekey_id` = 24 AND `link_found` = 1) AS live_rows,

(SELECT COUNT(1) FROM `google_sort_backlink_domains` WHERE `tablekey_id` = 24 
AND `checked` >= (
SELECT CASE WHEN `processing_completed` = 1 THEN 3 WHEN MAX(`checked`) = 0 THEN 1 ELSE MAX(`checked`) END FROM `google_sort_backlink_domains` WHERE `tablekey_id` = 24
)) AS dead_rows

FROM `google_sort_tablekey` AS tablekey
JOIN `google_sort_backlink_domains` AS domain ON domain.tablekey_id = tablekey.id
WHERE domain.tablekey_id = 24 
```

谁能帮我提高查询效率，以便它可以处理 google_sort_backlink_domains 表中的 100,000 多行？谢谢，麻烦您了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:30:10.837

尝试更多类似的方法，将更多“恒定”计算放在变量中，并将子查询替换为聚合。

```
SET @id = 24;
SET @den = (SELECT SUM(1) FROM google_sort_backlink_domains);
SET @max = (SELECT MAX(checked) FROM google_sort_backlink_domains WHERE tablekey_id=@id);
SET @n = (SELECT 
              CASE 
                  WHEN processing_completed = 1 THEN 3 
                  WHEN MAX(checked) = 0 THEN 1 
                  ELSE MAX(checked) END 
          FROM google_sort_backlink_domains WHERE tablekey_id=@id);

SELECT 
    processing_completed AS complete,
    SUM(IF(link_found=1 OR checked>=@max, 1, 0)) / @den AS percent, 
    CASE 
        WHEN processing_completed=1 THEN 3 
        WHEN MAX(checked)=0 THEN 1 
        ELSE MAX(checked)
    END AS current_step,
    COUNT(back.id) AS total_rows,
    COUNT(domain.id) AS unique_domains,
    SUM(link_found) AS live_rows,
    SUM(IF(checked>= @n), 1, 0) AS dead_rows
FROM google_sort_tablekey AS tablekey 
JOIN google_sort_backlink AS back ON back.tablekey_id = tablekey.id
JOIN google_sort_backlink_domains AS domain ON domain.tablekey_id = tablekey.id
WHERE domain.tablekey_id = @id
GROUP BY processing_completed 
```

# twitter-bootstrap - 在已有样式的框架上实施引导程序

> ID：15817905
> 
> 赞同：0
> 
> 时间：2013-04-04T17:33:33.067
> 
> 标签：twitter-bootstrap

我正在使用一个 php 框架，它为它的 css 生成带有类的输入。所有的 HTML 元素都已经定义了样式，但它很丑，我想使用引导程序。

有没有更简单的方法来实现我的网站的引导而不重命名引导 CSS 中的所有选择器？

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:42:00.490

在自定义默认样式**之前**包含 Bootstrap 。您的自定义文件中的任何`CSS`内容都将覆盖`CSS`Bootstrap 中的内容。然后，您可以根据需要进行调整。

如果您更喜欢默认的 Bootstrap 样式，请在其他文件`CSS` **之后**`CSS`包含 Bootstrap ，然后根据需要委托优先级。

# java - 根据“尽力而为1PC”模式实现Spring ChainedTransactionManager

> ID：15817909
> 
> 赞同：6
> 
> 时间：2013-04-04T17:33:53.970
> 
> 标签：java, spring, jdbc, transactions, jms

[这篇文章](http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html?page=6)很好地描述了尽力而为的 1PC 。为 SpringSource 工作的作者 David Syer 提供了`ChainedTransactionManager`扩展 Spring`AbstractPlatformTransactionManager`类的实现。

这个特定的事务管理器可以启动*n 个*事务，例如 JDBC 或 JMS 会话，并使用*n 个*实例执行提交/回滚`AbstractPlatformTransactionManager`，每个资源一个。这在 XA 驱动程序不可用的情况下非常有用。由于帖子很旧，代码在 Spring 2.5 上运行良好，但在 Spring 3+ 上失败。

在 Spring 3+ 中有一个实现类似功能的[请求票。](https://jira.springsource.org/browse/SPR-3844)我愿意试一试，但我想我会先问：那里有什么实现吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T16:03:18.923

正如卢西亚诺所建议的，我发现了一个完美的工作实现`ChainedTransactionManager`：

```
<dependency>
  <groupId>org.springframework.data</groupId>
  <artifactId>spring-data-neo4j-tx</artifactId>
  <version>2.2.0.RELEASE</version>
</dependency> 
```

班级名称：`org.springframework.data.neo4j.transaction.ChainedTransactionManager`

**编辑**：

从[1.6.1 版](http://docs.spring.io/spring-data/data-commons/docs/1.6.1.RELEASE/changelog.txt)`ChainedTransactionManager`开始，它现在是 Spring Data Commons 的一部分。

# microsoft-metro - winJS ListView动态数据源编辑问题

> ID：15817913
> 
> 赞同：0
> 
> 时间：2013-04-04T17:33:58.803
> 
> 标签：microsoft-metro, winjs

## winJS ListView 问题

我正在开发一个 winJS 应用程序。我有列表视图。我需要将新数据添加到现有列表视图中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:23:12.240

通常列表视图与[WinJS.Binding.List](http://msdn.microsoft.com/en-us/library/windows/apps/hh700774.aspx)绑定，只需将新项目添加到该列表中，它们就会出现在列表视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:40:11.117

建议先使用 WinJS.Binding.List.createSorted() 并在排序列表上创建分组。如果您的排序功能可以确保新插入的项目按排序顺序排在前面 - 它应该出现在组中的第一位。

```
_initializeListView: function initializeListView()
    {
        var data = [{ title: 'parle-ggg', brand: 'parle' }, { title: 'parle-gg', brand: 'parle' }, { title: 'parle-g', brand: 'parle' },
            { title: 'maggi-sauce', brand: 'maggi' }, { title: 'maggi-sauce-2', brand: 'maggi' }, { title: 'maggi-sauce-3', brand: 'maggi' }];
        var list = new WinJS.Binding.List(data);
        var sortedList = list.createSorted(function sorter(item1, item2)
        {
            var result;
            if (item1.title < item2.title) 
                result = -1;
            else if (item1.title == item2.title)
                result = 0;
            else
                result = 1;

            return result;
        });
        var groups = sortedList.createGrouped(
            function groupKey(item)
            {
                return item.brand;
            },
            function groupData(item)
            {
                var result = { title: item.brand };
                return result;
            }
            );
        listView.winControl.itemDataSource = groups.dataSource;
        listView.winControl.groupDataSource = groups.groups.dataSource;
        this.sortedList = sortedList;
    },
    _oncmdclick: function oncmdclick(event) // this is event handler where you want to add new item
    {
        this.sortedList.push(newItem);
    }, 
```

上面的代码片段试图创建一个按标题排序并按品牌分组的列表。稍后在 sortedList 中插入项目时 - 插入的项目被正确放置在组中。例如 - 按标题“parle-f”添加项目会将其放在 parle 品牌组中的首位，而按标题“parle-h”添加项目会将其放在 parle 品牌组中的最后。

HTH。

# css - CSS：如何创建两列半液体布局？

> ID：15817922
> 
> 赞同：0
> 
> 时间：2013-04-04T17:34:29.173
> 
> 标签：css

我想创建一个两列布局，其中左列的宽度取决于屏幕宽度，如下所示：

*   当`0 <= screen width <= c`左列宽为`a`
*   当`c <= screen width <= d`左列宽度从`[a,b]`
*   当`d <= screen width`左列宽 =`b`

右列占据剩下的任何空间。我怎么能用css做到这一点？此布局将用于地图应用程序，其中左列显示搜索结果，右列显示地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:50:01.207

整个`x <= screen width <= y`事情听起来像`@media (max-width: 1234px)`或与我相似。所以我建议你使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:05:31.403

我无法解决 OP，但可能对 a=b=c=d 的情况有解决方案。如果我找到更好的解决方案会更新。

HTML：

```
<div id="main">         
    <div id="serp"></div>                
    <div id="mapDiv"></div>
</div> 
```

CSS：

```
#main
{
    width:100%;
}

#serp
{
    float:left;
    width:210px;        
    height:600px;
    border:1px solid black; 
}

#mapDiv
{
    margin-left:220px;
    position:relative;
    height:600px;
    border:1px solid black;
} 
```

之所以`position:relative`需要，是因为当地图控件作为子元素添加时，`#mapDiv`它具有内联样式`position:absolute;left=0px;top=0px;right=0px`

完整的例子：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-eqiv="X-UA-Compatible" content="IE=edge" />
    <style type="text/css"> 
        #main
{
    width:100%;
}

#serp
{
    float:left;
    width:210px;        
    height:600px;
    border:1px solid black; 
}

#mapDiv
{
    margin-left:220px;
    position:relative;
    height:600px;
    border:1px solid black;
}
    </style>
</head>
<body>
    <div id="main">
        <div id="serp"></div>
        <div id="mapDiv"></div>
    </div>
    <script charset="UTF-8" type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0">
    </script>   
    <script charset="UTF-8" type="text/javascript">
        document.body.onload = (function()
        {
            var map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), {credentials:"Your Bing Maps Key"});
        })();
    </script>
</body>
</html> 
```

# jquery - 使用过滤器查找文本（在循环中）并使用 jQuery 附加另一个带有 thumbmail 的 div

> ID：15817927
> 
> 赞同：0
> 
> 时间：2013-04-04T17:34:53.047
> 
> 标签：jquery, append, parent, closest

我正在尝试过滤结果循环以查找特定文本，如果存在，我想附加一个带有缩略图的 div。我有什么工作，但它附加了循环中的所有 div。我试过 .()closest 和 .parent()。所有这些都将所有 div 附加到循环中。我只想将最近的 div 附加到过滤后的文本中。

我究竟做错了什么？

```
if( $("span").text().indexOf('90509BR') >= 0) {
        $('div.little-img').parent().find('div.little-img').append('<img style="float:left;" height="75px" width="75px" id="theImg" src="/images/uploads/EPDM_Yellow_Peroxide_p8sm.png" />');
    } 
```

这是一个小提琴 [http://jsfiddle.net/C9Fft/4/](http://jsfiddle.net/C9Fft/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:37:48.893

```
$('span:contains("90509BR")').closest('div.little-img').append('<img style="float:left;" height="75px" width="75px" id="theImg" src="/images/uploads/EPDM_Yellow_Peroxide_p8sm.png" />'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:50:38.283

`.closest`在您的标记上下文中不起作用。

您需要以不同的方式遍历树。

[http://jsfiddle.net/justiceerolin/zVe69/](http://jsfiddle.net/justiceerolin/zVe69/)

```
 $('span:contains("90509BR")').parent().prev('div.little-img')
      .append('<img style="float:left;" height="75px" width="75px" id="theImg" src="/images/uploads/EPDM_Yellow_Peroxide_p8sm.png" />'); 
```

`:contains`进行文本搜索。 `parent()`上升到`.small`, prev 查看它之前的元素。

# javascript - Javascript变量中的多个值

> ID：15817932
> 
> 赞同：6
> 
> 时间：2013-04-04T17:35:20.573
> 
> 标签：javascript

有没有办法让一个变量具有多个值，如下所示：

```
var variable = 1, 2, 3;
var enteredVal = 1;

if (enteredVal == variable){
    alert('You chose the right number');
} 
```

因此，如果变量 enterVal 等于 1、2 或 3，它会提醒消息。我似乎无法理解它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T17:45:04.363

无法将多个不同的值分配给单个变量。

另一种方法是拥有`variable`一个[`Array`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)，您可以检查是否`enteredval`在数组中。

```
var variable = [1, 2, 3];
var enteredval = 1;

if (variable.indexOf(enteredval) > -1){
    alert('you chose the right number');
} 
```

请注意，[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)数组[在 IE8 及以下版本中不可用](http://msdn.microsoft.com/en-us/library/ie/ff679977%28v=vs.94%29.aspx)（请参阅底部的“要求”部分）。在这种情况下，您需要使用框架/库的方法，或者自己编写：

```
var variable = [1, 2, 3];
var enteredval = 1;

for (var i = 0; i < variable.length; i++) {
    if (variable[i] === enteredval) {
        alert('you chose the right number');
        break; // No need to check all the other values in variable
    }
} 
```

要在实例化数组后修改它们，请查看[`push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)、[`pop`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop)、[`shift`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)和[`unshift`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/unshift)用于添加/删除值。要修改现有值，您可以直接访问索引并重新分配值。

```
variable[1] = 5;
// variable is now [1, 5, 3] since arrays are 0-indexed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:38:32.880

您可以将它们存储在一个数组中并使用[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)（只要您不需要 IE 8 支持）：

```
var supportedOptions = [1, 2, 3],
    enteredVal = 1;

if(supportedOptions.indexOf(enteredVal) !== -1) alert("Yep!"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:46:00.213

尝试使用数组：

```
var variables = [1, 2, 3]; 
```

您可以使用 访问数组的成员`variables[i]`，其中`i`是数组的索引，从 开始`0`。

`variables[0]`返回`1`

`variables[1]`返回`2`

`variables[2]`返回`3`

这样，您可以使用`for`循环遍历数组：

```
var enteredval = 1; //your guess
for(var i = 0; i < variables.length; i++) { //go through each element
    if(variables[i] == enteredval) { //if they match...
        alert("You chose the right number!"); //...then you got it!
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-19T22:48:54.920

您可以将变量的值作为键存储在对象中。例如：

```
let variable={
  1:0,
  2:0,
  3:0
}

enteredVal=3

if (enteredVal in variable) {
  alert('You chose the right number');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T17:38:23.310

您将要创建一个`array`可以容纳多个值的。然后，您将要使用`index of`来确定是否在数组中找到该值。

```
var myArray = new Array();

myArray[0] = 1;
myArray[1] = 2;
myArray[2] = 3; 
```

检查值：

```
if(myArray.indexOf(1) > -1){
// exists
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T17:40:25.403

您可以实现字符串的 indexof 函数。

```
var variable = '1,2,3';
    var enteredval = '1';

    if (variable.indexOf(enteredval) > -1) { alert('you choosed the right number'); }; 
```

# ios - iOS 中奇怪的元素重叠 (PhoneGap)

> ID：15817935
> 
> 赞同：3
> 
> 时间：2013-04-04T17:35:31.967
> 
> 标签：ios, css, cordova, uiwebview, overlap

我正在开发一个 iOS/PhoneGap 项目。我在 iOS 中有一个奇怪的重叠问题（来自 iPad 的屏幕截图）：

![来自 iOS 的屏幕截图](https://i.stack.imgur.com/ZNhIs.png)

“选择状态”弹出框是`position: absolute, z-index: 35`. 网站链接没有指定位置 (so `static`)，也没有指定 z-index。

*无论地址链接是没有链接的随机文本还是链接（如捕获的），它仍然会发生。*

这是它在 Chrome 中的样子（如预期的那样）（在视网膜 Mac 上拍摄，所以它很大）：

![图片正确的是Chrome](https://i.stack.imgur.com/FvLje.png)

我整天都在 iPad 上的 Safari 控制台中尝试调整 z-index，但没有任何效果。***这似乎不是一个“简单”的 z-index 问题。***所以请不要只说“调整 z-index”。

**[编辑]**具体来说，我尝试将弹出`z-index`窗口的't）。我什至尝试给几个 popover s 和es 的祖先。什么都没有改变。（为了避免被提出来，我确实尝试过更改s 和其他内容，只是为了确保我的更改*正在*进入页面。）`5000``-10``position``z-index``position``z-index``color`

 *谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-09T22:39:12.490

所以这一直困扰着我们的项目大约一个月，但我想我解决了它。我还没有彻底测试过这个理论，但到目前为止它已经解决了我们所有的问题。

如果您还记得在 IE7 时代，有一个奇怪的 z-index 错误，您可以修复它的唯一方法是找到作为兄弟元素的违规元素的祖先并调整*它们的*z-index。

例如，假设这是我的标记：

```
<div class="container">
    <div class="header">
        <button>
            Click Me

            <div class="dropdown">
                <ul>
                    <li>This</li>
                    ...
                </ul>
            </div>
        </button>
    </div>

    <div class="content">
        <div class="col1">...</div>
        <div class="col2">...</div>
        <div class="col3">www.example.com</div>
    </div>
</div> 
```

就像在我的图片中一样，它在 Chrome 中看起来是正确的，但在 iOS 中，www.example.com 在上面`.dropdown`。

他们的兄弟姐妹的祖先是`.header`和`.content`。如果我将 的（当然，`z-index`在设置为`position`时）调整为高于，它解决了这个问题。`relative``.header``.content`

希望这是有道理的，并有助于任何可能出现在此页面上的内容......*

# c# - 字符串不更新

> ID：15817937
> 
> 赞同：-1
> 
> 时间：2013-04-04T17:35:44.653
> 
> 标签：c#, .net, winforms

如果这个问题不是很清楚，我很抱歉，如果是，请告诉我我需要更新/详细说明，谢谢！

当我更新另一个字符串时，我的字符串似乎不会自行更新。对不起，但这很难用文字解释，尤其是对我来说，我的英语不是很好，所以我很抱歉。这是我目前的代码：

```
public class Paths
{
    /// <summary>
    /// The current selected server.
    /// </summary>
    public static string SelectedServer { get; set; }

    /// <summary>
    /// The location of the current selected server.
    /// </summary>
    public static string SelectedServerLocation { get; set; }

    /// <summary>
    /// The path of the application itself.
    /// </summary>
    public static string Root { get; set; }

    /// <summary>
    /// The path of the Microcraft folder.
    /// </summary>
    public static string MicrocraftFolder { get; set; }

    /// <summary>
    /// The path of the Server Files folder.
    /// </summary>
    public static string ServersFolder { get; set; }

    /// <summary>
    /// The location of the minecraft.jar file.
    /// </summary>
    public static string MinecraftJar { get; set; }

    /// <summary>
    /// The location of the bukkit.jar file.
    /// </summary>
    public static string BukkitJar { get; set; }

    /// <summary>
    /// The location of the bukkit.yml file.
    /// </summary>
    public static string BukkitYml { get; set; }

    /// <summary>
    /// The location of the server.properties file.
    /// </summary>
    public static string ServerProperties { get; set; }

    /// <summary>
    /// The location of the root xml file.
    /// </summary>
    public static string XmlRoot { get; set; }

    /// <summary>
    /// The location of the server xml file.
    /// </summary>
    public static string XmlServer { get; set; }

    public Paths()
    {
        if (string.IsNullOrEmpty(SelectedServer))
        {
            Xml.Setting.path = Environment.CurrentDirectory + "\\microcraft\\settings.xml";
            SelectedServer = Xml.Setting.GetSetting("Servers/Current", "T4G Demo");
        }

        Root = string.Format("{0}\\", Environment.CurrentDirectory);
        MicrocraftFolder = string.Format("{0}microcraft\\", Root);
        ServersFolder = string.Format("{0}servers\\", MicrocraftFolder);
        SelectedServerLocation = string.Format("{0}{1}", ServersFolder, SelectedServer);
        MinecraftJar = string.Format("{0}{1}\\minecraft.jar", ServersFolder, SelectedServer);
        BukkitJar = string.Format("{0}{1}\\bukkit.jar", ServersFolder, SelectedServer);
        BukkitYml = string.Format("{0}{1}\\bukkit.yml", ServersFolder, SelectedServer);
        ServerProperties = string.Format("{0}{1}\\server.properties", ServersFolder, SelectedServer);
        XmlRoot = string.Format("{0}settings.xml", MicrocraftFolder);
        XmlServer = string.Format("{0}{1}\\settings.xml", MicrocraftFolder, SelectedServer);
    }
} 
```

这就是我编辑/调用字符串的方式：

```
Servers.Paths.SelectedServer = SelectedServer;
Xml.Setting.path = Servers.Paths.XmlServer; 
```

但是`Servers.Paths.XmlServer`新的不是更新`SelectedServer`:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:39:00.557

这是因为您实际上没有任何代码可以`SelectedServer`在修改后更新任何内容。

您`SelectedServer`在构造函数中设置，构造函数在实际构建对象之前被调用。

如果您想在`SelectedServer`更改后更新其他内容，则需要执行以下操作：

```
private static string _selectedServer;
public static string SelectedServer
{
   get { return _selectedServer; }
   set
   {
      _selectedServer = value;
      // Update other fields here.
   }
} 
```

此外，我会推荐类似的东西：

```
public class Paths
{
    private static string _selectedServer;
    /// <summary>
    /// The current selected server.
    /// </summary>
    public static string SelectedServer
    {
        get { return _selectedServer; }
        set
        {
            _selectedServer = value;
            _updateFields();
        }
    }

    /// <summary>
    /// The location of the current selected server.
    /// </summary>
    public static string SelectedServerLocation { get; set; }

    /// <summary>
    /// The path of the application itself.
    /// </summary>
    public static string Root { get; set; }

    /// <summary>
    /// The path of the Microcraft folder.
    /// </summary>
    public static string MicrocraftFolder { get; set; }

    /// <summary>
    /// The path of the Server Files folder.
    /// </summary>
    public static string ServersFolder { get; set; }

    /// <summary>
    /// The location of the minecraft.jar file.
    /// </summary>
    public static string MinecraftJar { get; set; }

    /// <summary>
    /// The location of the bukkit.jar file.
    /// </summary>
    public static string BukkitJar { get; set; }

    /// <summary>
    /// The location of the bukkit.yml file.
    /// </summary>
    public static string BukkitYml { get; set; }

    /// <summary>
    /// The location of the server.properties file.
    /// </summary>
    public static string ServerProperties { get; set; }

    /// <summary>
    /// The location of the root xml file.
    /// </summary>
    public static string XmlRoot { get; set; }

    /// <summary>
    /// The location of the server xml file.
    /// </summary>
    public static string XmlServer { get; set; }

    public Paths(string selectedServer)
    {
        // Set any default values here
        SelectedServer = selectedServer;
    }

    private static void _updateFields()
    {
        if (string.IsNullOrEmpty(SelectedServer))
        {
            Xml.Setting.path = Environment.CurrentDirectory + "\\microcraft\\settings.xml";
            SelectedServer = Xml.Setting.GetSetting("Servers/Current", "T4G Demo");
        }

        Root = string.Format("{0}\\", Environment.CurrentDirectory);
        MicrocraftFolder = string.Format("{0}microcraft\\", Root);
        ServersFolder = string.Format("{0}servers\\", MicrocraftFolder);
        SelectedServerLocation = string.Format("{0}{1}", ServersFolder, SelectedServer);
        MinecraftJar = string.Format("{0}{1}\\minecraft.jar", ServersFolder, SelectedServer);
        BukkitJar = string.Format("{0}{1}\\bukkit.jar", ServersFolder, SelectedServer);
        BukkitYml = string.Format("{0}{1}\\bukkit.yml", ServersFolder, SelectedServer);
        ServerProperties = string.Format("{0}{1}\\server.properties", ServersFolder, SelectedServer);
        XmlRoot = string.Format("{0}settings.xml", MicrocraftFolder);
        XmlServer = string.Format("{0}{1}\\settings.xml", MicrocraftFolder, SelectedServer);
    }
} 
```

我已经让构造函数需要选定的服务器，以便您可以设置它，因为其他一切似乎都取决于该值。

我会建议修改类的结构，删除静态等，只是真正考虑你需要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:53:49.623

当您`a = b`在 C# 中说时，您并不是在说“从现在开始，`a`两者`b`都是`point`相同的东西，改变一个会改变另一个。” 您的意思是，“取`b` *这一秒的正确*值并将值设置为该`a`值。执行这行代码后，更改`b`is 对 没有影响`a`，更改`a`将没有任何影响关于里面的内容`b`。

这就是为什么在给定代码的情况下更改其中一个属性不会影响另一个属性的原因。

也就是说，由于您还没有真正描述您*实际*尝试做的事情，因此很难说您应该如何正确解决您真正的问题是什么。

# ruby-on-rails - 在 Rails 中实现层次关系的最佳实践是什么？

> ID：15817939
> 
> 赞同：0
> 
> 时间：2013-04-04T17:35:52.217
> 
> 标签：ruby-on-rails, activerecord

我想对属于组的用户和属于组的组进行建模，所以我正在考虑（请原谅 newb 语法）：

```
class Group < ActiveRecord::Base
  attr_accessible :description, :group_id, :name
  has_and_belongs_to_many :users
end

class User < ActiveRecord::Base
  attr_accessible :email, :name
  has_and_belongs_to_many :groups
end 
```

以上是实现这一点的首选方式吗？有没有一种简单的方法可以删除“父”组并让它删除它的子组？

在撰写本文时，我正在学习 rails 3.2.x ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T17:38:03.457

我讨厌成为宝石推手，但我最近开始使用[`ancestry`](https://github.com/stefankroes/ancestry)，而且效果很好。它有一种独特的方式来索引祖先和后代以获得出色的性能。

还有一个覆盖它的[Railscast 。](http://railscasts.com/episodes/262-trees-with-ancestry)

> Ancestry 是一个 gem/插件，它允许将 Ruby on Rails ActiveRecord 模型的记录组织为树结构（或层次结构）。它使用单一的、直观格式化的数据库列，使用物化路径模式的变体。它公开了所有标准的树结构关系（祖先、父、根、子、兄弟、后代），所有这些都可以在单个 SQL 查询中获取。其他功能包括 STI 支持、范围、深度缓存、深度约束、从旧插件/gem 轻松迁移、完整性检查、完整性恢复、将（子）树排列为哈希以及处理孤立记录的不同策略。
> 
> 来源：[https ://github.com/stefankroes/ancestry#readme](https://github.com/stefankroes/ancestry#readme)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T04:39:57.000

我在这里猜测 - 但用户是否能够在多个组中，而组只能在一个（父组）中？

```
class Group < ActiveRecord::Base
  attr_accessible :description, :name
  has_many :groups, :dependent => :destroy
  has_many :group_users, :dependent => :destroy
  has_many :users, :through => :group_users
  belongs_to :parent_group, :class_name => :group
end

class GroupUsers < ActiveRecord::Base
  belongs_to :group
  belongs_to :user
end

class User < ActiveRecord::Base
  attr_accessible :email, :name
  has_many :group_users, :dependent => :destroy
  has_many :groups, :through => :group_users
end 
```

# python - 将子进程附加到列表似乎只是在 python 中附加子进程对象位置？

> ID：15817940
> 
> 赞同：0
> 
> 时间：2013-04-04T17:35:53.390
> 
> 标签：python, subprocess

在控制台使用以下命令打印 wlan0 的 NIC 的本地 MAC 地址。我想将它集成到一个脚本中，其中列表的第 0 个子列表将用 exer 中的本地 MAC 填充

```
ifconfig wlan0 | grep -o -E '([[:xdigit:]]{1,2}:){5}[[:xdigit:]]{1,2}' 
```

使用中的列表，本地化，从名为scanned 的字典中获取它的第一个和第二个子列表。

所以我想在第 0 个子列表中有本地 MAC，并在第 1 个和第 2 个子列表中的每个条目都有一个条目。我已经尝试过代码：

```
for s in scanned:
    localisation[0].append(subprocess.Popen("ifconfig wlan0 | grep -o -E '([[:xdigit:]]{1,2}:){5}[[:xdigit:]]{1,2}'", shell=True)) 
```

但我只是得到

```
<subprocess.Popen object at 0x2bf0f50> 
```

对于列表中的每个条目。虽然有正确数量的条目。

我还有一个问题，由于某种原因，程序将代码的输出打印到我不想发生的屏幕上。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:39:35.567

popen 对象在某种意义上是一个文件对象。

```
from subprocess import *
handle = Popen(c, stdin=PIPE, stderr=PIPE, stdout=PIPE)
handle.stdin.write('echo "Heeey there"')
print handle.stdout.read()
handle.flush() 
```

不是所有输出都为您重定向的原因是stderr = PIPE，否则无论如何都会回显到控制台中。将其重定向到 PIPE 是个好主意。

此外，`shell=True`除非您知道为什么需要它，否则使用通常是一个坏主意。在这种情况下（我不认为）您不需要它。

最后，您需要将您想要执行的命令分配到一个列表中，至少是一个包含 2 项或更多项的列表。例子：

```
c = ['ssh', '-t', 'user@host', "service --status-all"] 
```

通常情况`ssh -t user@root "service --status-all"`下，请注意 NOT splitted 部分，`"service --status-all"`因为在我的示例中，这是作为一个整体发送到 SSH 客户端的参数。

无需尝试，请尝试：

```
c = ["ifconfig", "wlan0 | grep -o -E '([[:xdigit:]]{1,2}:){5}[[:xdigit:]]{1,2}'"] 
```

* * *

甚至：

```
from uuid import getnode as get_mac
mac = get_mac() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:49:01.277

这是我的尝试：

use`check_output`给出该命令的输出。

```
In [3]: import subprocess

In [4]: subprocess.check_output("ip link show wlan0 | grep link | awk '{print $2}'",shell=True).strip()
Out[4]: '48:5d:60:80:e5:5f' 
```

使用`ip link show`而不是 ifconfig 为您节省一个 sudo 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:54:53.243

调用 just`Popen`只会返回一个新`Popen`实例：

```
In [54]: from subprocess import Popen,PIPE

In [55]: from shlex import split   #use shlex.split() to split the string into correct args

In [57]: ifconf=Popen(split("ifconfig wlan0"),stdout=PIPE)

In [59]: grep=Popen(split("grep -o -E '([[:xdigit:]]{1,2}:){5}[[:xdigit:]]{1,2}'"),
                                                   stdin=ifconf.stdout,stdout=PIPE)

In [60]: grep.communicate()[0]
Out[60]: '00:29:5e:3b:cc:8a\n' 
```

用于从特定实例的,中`communicate()`读取数据：`stdin``stderr``Popen`

```
In [64]: grep.communicate?
Type:       instancemethod
String Form:<bound method Popen.communicate of <subprocess.Popen object at 0x8c693ac>>
File:       /usr/lib/python2.7/subprocess.py
Definition: grep.communicate(self, input=None)
Docstring:
Interact with process: Send data to stdin.  Read data from
stdout and stderr, until end-of-file is reached.  Wait for
process to terminate.  The optional input argument should be a
string to be sent to the child process, or None, if no data
should be sent to the child.

communicate() returns a tuple (stdout, stderr). 
```

# c++ - 虚拟析构函数和删除具有多重继承的对象......它是如何工作的？

> ID：15817941
> 
> 赞同：27
> 
> 时间：2013-04-04T17:35:58.257
> 
> 标签：c++

首先，我理解为什么`virtual`在单继承和通过基指针删除对象方面需要析构函数。这特别是关于多重继承及其背后的*原因*。这个问题出现在我的一门大学课程中，没有人（包括教授）知道为什么会这样：

```
#include <iostream>

struct A
{
    virtual ~A()
    {
        std::cout << "~A" << std::endl;
    }
    int memberA;
};

struct B
{
    virtual ~B()
    {
        std::cout << "~B" << std::endl;
    }
    int memberB;
};

struct AB : public A, public B
{
    virtual ~AB()
    {
        std::cout << "~AB" << std::endl;
    }
};

int main()
{
    AB* ab1 = new AB();
    AB* ab2 = new AB();

    A* a = ab1;
    B* b = ab2;

    delete a;
    delete b;
} 
```

输出是：

> `~AB`
> `~B`
> `~A`
> `~AB`
> `~B`
> `~A`

编译器如何知道在删除or时如何调用`A`'s 和' 的析构函数？具体来说，内存是如何布局的（特别是它的虚函数表），以便可以调用析构函数和析构函数？`B``a``b``AB``A``B`

我的教授建议内存将按如下方式排列（某种东西）：

```
 AB
+---------+              +----+
|  A VFT  | - - - - - -> | ~A |
+---------+              +----+
| memberA |
+---------+              +----+
|  B VFT  | - - - - - -> | ~B |
+---------+              +----+
| memberB |
+---------+

// I have no idea where ~AB would go... 
```

我们都很好奇这些析构函数实际上是如何在内存中布局的，以及调用`delete`其中一个`a`或如何`b`导致所有析构函数被正确调用。删除基础对象在单继承中工作是有道理的（因为有一个单独的虚函数表可以使用），但显然我没有正确理解事物，因为我无法理解单继承版本并应用它到这个多重继承示例。

那么这是如何工作的呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-04T17:39:06.650

它有效，因为标准说它有效。

在实践中，编译器将隐式调用插入`~A()`到. 该机制与单继承完全相同，只是编译器要调用多个基本析构函数。`~B()``~AB()`

我认为您的图表中混淆的主要来源是虚拟析构函数的多个单独的 vtable 条目。在实践中，将有一个条目分别指向`~A()`、`~B()`和`~AB()`for`A`和。`B``AB()`

例如，如果我使用`gcc`并检查程序集来编译您的代码，我会在 中看到以下代码`~AB()`：

```
LEHE0:
        movq    -24(%rbp), %rax
        addq    $16, %rax
        movq    %rax, %rdi
LEHB1:
        call    __ZN1BD2Ev
LEHE1:
        movq    -24(%rbp), %rax
        movq    %rax, %rdi
LEHB2:
        call    __ZN1AD2Ev 
```

此调用`~B()`后跟`~A()`.

这三个类的虚拟表如下所示：

```
; A
__ZTV1A:
        .quad   0
        .quad   __ZTI1A
        .quad   __ZN1AD1Ev
        .quad   __ZN1AD0Ev

; B
__ZTV1B:
        .quad   0
        .quad   __ZTI1B
        .quad   __ZN1BD1Ev
        .quad   __ZN1BD0Ev

; AB
__ZTV2AB:
        .quad   0
        .quad   __ZTI2AB
        .quad   __ZN2ABD1Ev
        .quad   __ZN2ABD0Ev
        .quad   -16
        .quad   __ZTI2AB
        .quad   __ZThn16_N2ABD1Ev
        .quad   __ZThn16_N2ABD0Ev 
```

对于每个类，条目#2 指的是该类的“完整对象析构函数”。对于`A`, this 指向`~A()`等。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-04T17:40:09.700

vtable 条目只是指向析构函数 for `AB`。刚刚定义了在执行析构函数之后，然后调用基类析构函数：

> 在执行析构函数的主体并销毁主体内分配的任何自动对象后，类 X 的析构函数调用 [...]`X`的直接基类和 [...] 的析构函数。

因此，当编译器看到`delete a;`然后看到析构函数是虚拟的时，它会使用 vtable`A`查找析构函数的动态类型`a`（即）。`AB`这会找到`~AB`并执行它。这导致调用`~A`and `~B`。

不是 vtable 说“调用`~AB`，然后`~A`，然后`~B`”；它只是说“调用`~AB`”，其中*涉及*调用`~A`and `~B`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T17:42:42.520

析构函数以“从最基础到最基础”的顺序被调用，并且以声明的相反顺序调用。所以`~AB`先调用，然后调用，然后调用`~B`，`~A`因为`AB`是派生最多的类。

在实际释放内存之前调用所有析构函数。虚拟函数指针的确切存储方式是一个实现细节，实际上是您不应该关心的事情。具有多重继承的类很可能包含两个指向其派生类的 VTABLES 的指针，但只要编译器和运行时库一起“按预期工作”，则完全取决于编译器 + 运行时库做他们想做的事来解决这些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T07:46:29.957

（我知道这个问题已经有将近两年的历史了，但在我遇到它之后我忍不住提出了一个观点）

尽管在标题中您使用了问题词**how**，但您还在问题帖子中提到**了为什么**。人们已经给出了很好的技术答案，但原因似乎没有得到解决。

> 这特别是关于多重继承及其背后的原因

这纯粹是猜测工作，但对我来说听起来很合理。最简单的看待它的方法是使用多重继承的对象由许多基础对象组成。选择性地破坏基础对象将在复合对象中留下一个*洞*，并且在处理针对复合对象的这些部分的方法时会导致不必要的复杂性。想象一下，如果你确实使用组合而不是多重继承，你会怎么做。所以最好是遍历对象布局，*整体*销毁。

# android - 操作栏选项卡导航设计/问题

> ID：15817943
> 
> 赞同：0
> 
> 时间：2013-04-04T17:35:58.843
> 
> 标签：android, android-fragments, actionbarsherlock

我正在尝试使用 Actionbar 选项卡和片段来实现一个非常基本的导航结构。基本上我有三个片段，它们是使用操作栏上的选项卡选择的。这些片段中的每一个都是一个列表视图，它应该允许用户选择一个项目并打开一个详细视图。

我想知道从现有片段向屏幕添加新片段的最佳方法。我目前将详细视图全部实现为活动（这显然不理想，因为操作栏选项卡不存在，并且无论当前位置如何，使用后退按钮的导航都会返回到选项卡 1）。

我在我的 MainActivity 中添加所有列表片段；

```
 public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (tab.getPosition() == 0) {
            Frag1 frag = new Frag1();
            ft.replace(android.R.id.content, frag);
        } else if (tab.getPosition() == 1) {
            Frag2 frag = new Frag2();
            ft.replace(android.R.id.content, frag);
        } else if (tab.getPosition() == 2) {
            Frag3 frag = new Frag3();
            ft.replace(android.R.id.content, frag);
        }
    } 
```

我需要在这些片段上实现什么来启动详细视图？我已经尝试过这样的事情，但导航仍然无法按照我的意愿工作。

```
private void onListItemClick(View v, int pos, long id) {
    Log.d(TAG, "Clicked at position: " + pos);
    NewsModel selectedModel = newsItems.get(pos);
    Log.d(TAG, "Item: " + selectedModel.getTitle());

    NewsDetailFragment fragment = NewsDetailFragment.newInstance(selectedModel);
    FragmentTransaction ft  = getFragmentManager().beginTransaction();
    ft.replace(R.id.content, fragment);
    ft.addToBackStack(null);
    ft.commit(); 
```

我通常来自 iOS 世界，所以我的一些范例可能与 Android 的功能有点不合时宜。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:25:36.497

如[支持平板电脑和手机培训文档](http://developer.android.com/guide/practices/tablets-and-handsets.html)中所述，使用`Fragment`s 显示主/详细视图的标准方式是在手机上作为单独的活动（当您没有足够的空间来显示两者时）并在平板电脑上并排显示。SDK 附带一个实现此建议的 Master/Detail 示例（如果您使用的是 Eclipse，请转到 New->Other->Android->Android Activity->Master/Detail Flow）。

您可以将此培训与您已经拥有的选项卡代码结合起来（在选择选项卡时替换左侧片段，可能还希望在选择选项卡时删除右侧的详细视图）以获得有效的布局在所有 Android 设备上。

您可能会发现有用的一些附加信息是[多窗格布局设计指南](http://developer.android.com/design/patterns/multi-pane-layouts.html)和整个[片段训练集](http://developer.android.com/training/basics/fragments/index.html)。

# algorithm - 有限交换矩阵中的字典序最小排列

> ID：15817946
> 
> 赞同：5
> 
> 时间：2013-04-04T17:36:09.600
> 
> 标签：algorithm

**在Facebook**求职面试**能力测试**中提出了以下问题：

```
A permutation is a list of K numbers, each between 1 and K (both inclusive),
that has no duplicate elements.

Permutation X is lexicographically smaller than Permutation Y iff for some
i <= K:

All of the first i-1 elements of X are equal to first i-1 elements of Y.
ith element of X is smaller than ith element of Y.
You are given a permutation P, you can exchange some of its elements as many 
times as you want in any order. You have to find the lexicographically smallest     
Permutation that you can obtain from P.

K is less than 101.

Input Format:
First line of input contains K being the size of permutation.
Next line contains K single spaced numbers indicating the permutation.
Each of next K lines contains K characters, character j of line i is equal to
'Y' if you can exchange ith and jth element of a permutation, and 
'N' otherwise.

Output Format:
Print K numbers with a space separating each of them indicating the 
permutation.

Sample Input
3
3 1 2
NNY
NNN
YNN

Sample Output
2 1 3
Sample Input 
3
3 2 1
NYN
YNY
NYN

Sample Output

1 2 3 

In the first example you can exchange first element with last element to
obtain 2 1 3 from 3 1 2. 
```

**我做了什么？**

我首先生成了所有排列。

然后，我丢弃了那些不可行的排列。在示例 1 中：`1 3 3`不可行，因为位置 1 和 2 是不可交换的。

从所有允许的排列列表中，我选择了字典顺序最小的一个作为解决方案。

**上述解决方案的问题**：

我的解决方案非常适用于`K<=25`. 当 K 的大小变得大于 25 时，解决方案真的很慢。因为`K=100`，我什至没有得到输出`60 minutes`。

我的问题是：

**我应该如何优化我的解决方案？**

**可以在不产生所有排列的情况下完成吗？**

带有解释和伪代码（或代码）的更好解决方案将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:27:48.310

**我的解决方案非常适合 K<=25。当 K 的大小变得大于 25 时，解决方案真的很慢。**

您的解决方案将非常缓慢。当您生成所有排列时，生成排列的总体复杂性是：

`O(2^K)`.

因此，O(2^K) 将需要一年，因为 K 可以大到 100。

**可以在不产生所有排列的情况下完成吗？**

**是**的，它可以在不产生所有排列的情况下完成。

**我应该如何优化我的解决方案？**

**[您可以使用图论中的（ DFS](http://en.wikipedia.org/wiki/Depth-first_search)**和**[连通分量](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)**）概念在线性时间内解决此问题。

*请注意，我们将采用第二个示例来解释我将要描述的步骤（涉及算法）*。

**第 1 步**：构建 具有 K-1 个顶点的图**G。**因此 V={0,1,2}

**第 2 步**：只要允许在这两个位置交换元素，就让边**e连接两个顶点。**因此边缘是： E={(0,1) , (1,0) , (1,2) , (2,1)}

**第 3 步：找到该图****G(V,E)**的所有连通分量(CC ) 。在示例 2 中：

所有的CC是：

```
CC1: {0, 1, 2} 
```

**第 4 步**：对于每个连接组件，对该连接组件中可用**的元素进行排序，**这样`smallest index within the connected component gets smallest element`，第二小的索引得到第二小的元素，等等。

在**示例 2**中：

```
Smallest index in CC1 = 0
Smallest index in CC1 = 1
Smallest index in CC1 = 2 
```

*   CC1 中最小的索引 0 获得最小的元素。最小元素=1。

*   CC1 中第二小的索引获得第二小的元素。第二小索引=2。

*   CC1 中的第三个较小的索引获取第三个最小的元素。第三小索引=3。

因此，按照上述规则对 CC1 进行排序后的结果是 (1,2,3)。

**当对所有连接的组件完成第 4 步时，我们就有了可能的最低排列。**

因此，`1 2 3`是示例 2 中按字典顺序排列的最小排列。

**伪代码（或代码）将非常有帮助。**

正如我已经描述的逻辑，这里是 C++ 中的代码：

```
vector<int>TMP_IP;
char Adjacency[LIMIT][LIMIT];
vector<vector<int> >ADJ_vector(LIMIT);
int MARKED[LIMIT];
vector<int>connected_COMPONENTS;
vector<int>Positions_vector;
void DepthFirstTraversal(int u)
{
     MARKED[u]=1;
     connected_COMPONENTS.push_back(u);
     for(int j=0;j<ADJ_vector[u].size();++j)
          if(!MARKED[ADJ_vector[u][j]] )
             DepthFirstTraversal(ADJ_vector[u][j]);
}
//Print result
void lexo_smallest(int K)
{
     for(int i=0;i<K;++i)
                  cout<<TMP_IP[i]<<" ";
             cout<<endl;
}
int main()
{
    int K,ip;
    string rows[109];
    scanf("%d",&K);
    for(int i=0;i<K;++i)
    {
            scanf("%d",&ip);
            TMP_IP.push_back(ip);
    }

    for(int i=0;i<K;++i)
               cin>>rows[i];

    for(int i=0;i<K;++i)
         for(int j=0;j<rows[i].size();++j)
             Adjacency[i][j]=rows[i][j];

    for(int i=0;i<K;++i)
    for(int j=0;j<K;++j)
     if(Adjacency[i][j]=='Y')
         ADJ_vector[i].push_back(j);  

            for( int i = 0 ; i <K ; ++i )
            {   
                if( !MARKED[ i ] )
                { 

                    DepthFirstTraversal( i ); 
                    for(int x=0;x<connected_COMPONENTS.size();++x)
                    {
                            Positions_vector.push_back(TMP_IP[connected_COMPONENTS[x]]);
                    }
                    sort(connected_COMPONENTS.begin(),connected_COMPONENTS.end());
                    sort(Positions_vector.begin(),Positions_vector.end());
                    for(int x=0;x<connected_COMPONENTS.size();++x)
                    {
                            TMP_IP[connected_COMPONENTS[x]]=Positions_vector[x];
                    }
                    connected_COMPONENTS.clear();
                    Positions_vector.clear();

                }
            }
            lexo_smallest(K);

    return 0;
} 
```

**[演示@IDEONE](http://ideone.com/wM3FEU)**

上述解决方案的复杂性：

接受输入的总时间是 O(K^2)。

上述算法的复杂度与 DFS 相同。O(V+E)。

总时间：O(K^2)+O(V+E)

即使对于 K=5000，上述解决方案也非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:01:30.050

在这种情况下，您首先需要形成一个新矩阵，其中 if `a(i,j)`is `Y`then 这意味着`jth`position 的元素可以到达`ith place`。

这项任务可以通过应用[Floyd Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)轻松完成，通过将所有 Y 替换为 1 并将所有 N 替换为无穷大（或非常大的数字）。因此，在应用 Floyd Warshall 之后，如果任何元素`a(i,j)`小于`infinity`然后元素 at`jth position`可以放置在 position `i`。

现在任务很简单。贪婪地选择元素，即为每个元素`i`提供一个可以交换位置的元素列表。所以现在按顺序从位置 1 到 end 并且对于每个`i`，找到具有最小值（索引 j）的元素`a(i,j)`（`Y`即小于无穷大）并交换`i`和`j`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:16:24.600

您可以按位置进行操作。

对于最左边的位置，找到您能找到的最小数字并将其交换到位置 1。这可以通过检查从位置 1 到第一个位置的路径是否存在等等来完成。

# c++ - 未解决的外部符号欢闹

> ID：15817953
> 
> 赞同：0
> 
> 时间：2013-04-04T17:36:49.180
> 
> 标签：c++, linker-errors

我通过 StackOverflow 上的类实现发现了一种类似于 Java 的枚举的新方法。

在自己的头文件中声明的符号类

```
class Symbols {

public:

    Symbols() {}

    static const Symbols CREATE;
              . . .
private:

    std::string the_symbol;

    // Symbols constructor
    Symbols (std::string symbol){
        this->the_symbol = symbol;
    }

public:

    std::string get_symbol(void) {
        return the_symbol;
    }

    void set_symbol(std::string new_value) { the_symbol = new_value; }  

    void initialize(void){
        const Symbols CREATE = Symbols("create");
                     . . .
    }
}; 
```

以多种方式在课堂上使用

```
bool RecursiveDescentParser::type_name(){
if (accept(Symbols::STRING) || accept(Symbols::INTEGER)){
    return true;
}
else
    return false;

} 
```

和

```
symbol_ = Symbols::WHERE;

if (!boost::iequals(tokenizer_->peekAtNext(), symbol_.get_symbol(), loc_)){
    // complete any tokens
    std::string temp = tokenizer_->completeToken();                     
} 
```

标`Symbols`头包含在几个类中。有很多类型的编译器错误

```
1>recursive_descent_parser.obj : error LNK2001: unresolved external symbol "public: static class Symbols const Symbols::VALUES" (?VALUES@Symbols@@2V1@B) 
```

是什么赋予了？我收到了所有 39 个未解决的外部问题，其中一些与这个问题无关。我正在正确定义头文件以确保没有重复的声明并且所有类都能正确编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:44:51.577

您已经声明了静态成员；但它也需要在一个源文件中定义和初始化。

```
const Symbols Symbols::CREATE("create"); 
```

我猜你认为这就是`initialize`函数正在做的事情；但它只是创建一个类型的本地对象`Symbols`，然后在函数返回时将其销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:43:08.973

只需`static const Symbols CREATE;`声明 Symbols 类型的静态 const 对象在某处，这会使编译器感到高兴。

但是需要在某个地方实际定义 CREATE 对象，这就是链接器找不到它的原因。

你必须把

```
const Symbols Symbols::CREATE; 
```

在您的**一个**cpp 文件中。这样，实际上将分配一个存储位置，以便链接器可以找到它。

# javascript - chrome蓝牙API上出现意外的标识符错误

> ID：15817954
> 
> 赞同：0
> 
> 时间：2013-04-04T17:36:57.560
> 
> 标签：javascript, google-chrome, bluetooth

我目前正在使用蓝牙 API 编写 google chrome 扩展程序（我的 chrome 版本是 chrome-dev，因为蓝牙 API 仅在 chrome-dev 上）。我在此脚本 (notify.js) 的第一行收到“意外标识符错误”

```
chrome.bluetooth.getAdapterState( function(AdapterState result) {

    if (result.powered == false || result.available == false ) {
        alert("no bluetooth!!!");
    } else {
        alert("bluetooth!!!");
    }
}); 
```

有谁知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T23:47:16.700

*   Chrome 使用 Javascript 作为其应用程序 API。
*   Javascript 是一种动态类型语言。所以你不需要指定对象的类型（当你向函数发送参数时也不需要）。

* * *

所以只需删除“AdapterState”部分，“Unexpected identifier error”就不会再出现了。

```
chrome.bluetooth.getAdapterState( function(result) {

  if (result.powered == false || result.available == false ) {
    alert("no bluetooth!!!");
  } else {
    alert("bluetooth!!!");
  }
}); 
```

# javascript - 读取 IFrame cookie

> ID：15817957
> 
> 赞同：3
> 
> 时间：2013-04-04T17:37:06.387
> 
> 标签：javascript, html, iframe, cookies

我创建了一个 iframe 并在其中加载了一个网站（我无权访问该网站 - 它不是我编写的）

```
<script type="text/javascript">

  var el = document.createElement("iframe");
  el.setAttribute('id', 'ifrm');
  document.body.appendChild(el);
  el.setAttribute('src', 'http://AWEBSITE.com/');
  alert(document.getElement("iframe").cookie); //This doesnt work.....
</script> 
```

我可以以某种方式使用 javascript 来读取 iframe 的 cookie 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T17:38:29.820

这是不可能的，因为[同源政策](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)。您真的希望某人能够在任何页面上粘贴 iframe、指向任何域并获取您的 cookie 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-02T14:48:29.573

您可以使用以下代码从 iframe 中获取 cookie

```
document.getElementById("iframeName").contentDocument.cookie 
```

# .net - 禁用 SqlBulkCopy 错误的索引

> ID：15817959
> 
> 赞同：3
> 
> 时间：2013-04-04T17:37:15.140
> 
> 标签：.net, sql, indexing, sqlbulkcopy

我正在尝试提高调用[SqlBulkCopy.WriteToServer(Datatable) 的性能。](http://msdn.microsoft.com/en-us/library/ex21zs8x.aspx)

我看到的建议之一是在调用 WriteToServer 之前暂时禁用表上的索引，然后在后面启用索引。

我用这个语句禁用表，`ALTER INDEX 'IndexName' ON 'TableName' DISABLE`

我遇到的问题是在我禁用索引并尝试执行写入语句后发生错误，`The query processor is unable to produce a plan because the index 'IndexName' on table or view 'TableName' is disabled.`

关于如何避免此错误或通过其他方式改善写入支出的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:55:54.277

您禁用了集群索引，而不仅仅是非集群索引。禁用集群索引后，您将无法对表执行 DML。

# jquery-mobile - 为什么我的动态添加的内容不能用 jQuery Mobile 呈现？

> ID：15817960
> 
> 赞同：0
> 
> 时间：2013-04-04T17:37:16.607
> 
> 标签：jquery-mobile, backbone.js

我正在使用 jQuery Mobile + Backbone + RequireJS。成功登录后，我执行以下操作：

```
require(['app/view/main'], function(MainView) {
  var mainView = new MainView();
  $('body').html(mainView.render().el);
}); 
```

和 render() 看起来像

```
render: function() {
  this.$el.html(this.template);
  return this;
} 
```

这样做后，我的页面是空白的。检查正文，我确实在正文中看到了以下 HTML：

```
<div data-role="page" id="main">
  <div data-role="header" data-position="inline">
      <h1>Accounts</h1>
  </div>
  <div data-role="content">
    hello
  </div>
</div> 
```

我也试过在 render() 中这样做：

```
this.$el.html(this.template).trigger('create'); 
```

也

```
this.$el.html(this.template).page(); 
```

但页面仍然是空白的。任何想法为什么？

如果我只是将 HTML 放在正文中并加载页面，它会显示得很好，就像普通的 jQuery Mobile 应用程序一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:09:06.150

您是否要等到 pageinit 之后触发/创建您的页面？

```
$(document).bind('pageinit', function() {
    // trigger
}); 
```

此外，jQM 可能会将您的标记解释为单页模板，然后通过注入一个`data-role='page'`元素，您正在标记一个多页文档（只有一个页面）。尝试将`<div data-role='page'>`元素保留在默认标记中，然后动态添加页眉、内容和页脚。jQM 然后应该正确解释标记并相应地增强它。

# dropbox - Dropbox API：检测文件更新并获取文件的 URL？

> ID：15817961
> 
> 赞同：1
> 
> 时间：2013-04-04T17:37:18.743
> 
> 标签：dropbox

我想检测文件的更新，并检索它们的 URL。

这一切都可以通过 Sync API 完成吗？还是我必须同时使用 Sync 和 Core API？（这甚至可能吗？）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:55:39.583

您可以使用以下方法来观察更改文件夹中的所有文件

```
-[DBFilesystem addObserver:forPathAndChildren:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:38:53.653

Sync API 当前不支持获取文件的公共 URL（如 REST API 中的 /shares 端点），但该功能将在未来版本中提供。

# css - 在一个半圆的 div 内对齐文本

> ID：15817964
> 
> 赞同：3
> 
> 时间：2013-04-04T17:37:33.307
> 
> 标签：css, html, geometry, text-align

我有我的 div 的代码。我想在里面点燃一些文字。文本必须与 div 的左曲线对齐。这怎么可能？谢谢！

这是div的代码：

```
#cv {

position: absolute;
top: 10%;
left: 30%;
width: 300px;
height: 600px;
background-color: #ffffff;  
border: 1px solid #ff0000;
border-radius:300px 0px 0px 300px;

padding: 10px;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:50:51.793

我相信您希望文本遵循半圆，而不仅仅是沿着直边向左对齐。使用简单的 css 属性（还）不可能做到这一点。然而，有一些像这样的 hacky 技术： [http ://www.torylawson.com/mw_index.php?title=CSS_-_Wrapping_text_around_non-rectangular_shapes](http://www.torylawson.com/mw_index.php?title=CSS_-_Wrapping_text_around_non-rectangular_shapes)

甚至还有一种工具可以帮助您，例如： [http ://www.csstextwrap.com/](http://www.csstextwrap.com/)

Adobe 正在推动一个新的 css 属性来包装文本： http: [//www.adobe.com/devnet/html5/articles/css3-regions.html](http://www.adobe.com/devnet/html5/articles/css3-regions.html)

它应该已经在 Chrome Canary 中可用，但我想这对你今天用处不大。我认为您今天将不得不与黑客有关...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T17:47:33.173

工作示例：http: [//jsfiddle.net/mQFK6/4/](http://jsfiddle.net/mQFK6/4/)

你想添加一个`<p>`来保存文本，然后将它向下移动`50%`到圆圈的中间，`float`它`left`

```
#cv {

position: relative;
top: 10%;
left: 30%;
width: 300px;
height: 600px;
background-color: #ffffff;  
border: 1px solid #ff0000;
border-radius:300px 0px 0px 300px;
padding: 10px;

}

p{
    top: 50%;
    position: relative;
    float: left;
    margin-left: 5px;
} 
```

# ssis - 使用 PackageInfo.ExecutionValueParameterSet 类在 PowerShell 中设置 SSIS 2012 包的参数值

> ID：15817966
> 
> 赞同：2
> 
> 时间：2013-04-04T17:37:41.800
> 
> 标签：ssis, sql-server-2012, powershell-2.0

我正在尝试使用 PowerShell 以编程方式执行 SSIS 2012 包，并且我需要使用 PackageInfo.ExecutionValueParameterSet 类在运行时设置包和项目参数的值。有谁知道如何在 PowerShell 中执行此操作？我发现下面的帖子展示了如何在 C# 中做到这一点，但在 PowerShelll 中找不到任何方法来实现这一点。

[ssisPackage.Execute (false, null, executionParameter) 超时](https://stackoverflow.com/questions/14761056/ssispackage-execute-false-null-executionparameter-times-out)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T15:34:29.770

这是对我有用的 PowerShell 代码：

```
$setValueParameters = New-Object 'System.Collections.ObjectModel.Collection[Microsoft.SqlServer.Management.IntegrationServices.PackageInfo+ExecutionValueParameterSet]';

$executionParameter = New-Object 'Microsoft.SqlServer.Management.IntegrationServices.PackageInfo+ExecutionValueParameterSet';
$executionParameter.ObjectType = 50;
$executionParameter.ParameterName = "SYNCHRONIZED";
$executionParameter.ParameterValue = 1;
$setValueParameters.Add($executionParameter);

$executionIdentifier = $ssisPackage.Execute("true", $null, $setValueParameters); 
```

您可以按照以下链接中的说明配置 SSIS 包的其余部分：[http ://www.databasejournal.com/features/mssql/ssis-2012-using-powershell-to-configure-package-execution-parameters.html](http://www.databasejournal.com/features/mssql/ssis-2012-using-powershell-to-configure-package-execution-parameters.html)

# asp.net - 在 CSS 中考虑不同维度的图像

> ID：15817968
> 
> 赞同：0
> 
> 时间：2013-04-04T17:37:50.323
> 
> 标签：asp.net, html, css

我有一个评论部分，可以从数据库中加载不同用户的图像。图像被上传到服务器并存储 100% 的原始大小（我不关心这个，因为这个网站只是一个测试项目）。

在评论框中显示图像时遇到问题 - 我希望图像保留其原始比例，但我正在使用 CSS 来调整所有用户头像的大小，以便它们很好地适合评论部分。

这是我的问题的屏幕截图（假设用户可以上传自己的纵向图像，而我的 CSS 会导致它看起来很糟糕）：

![问题截图](https://i.stack.imgur.com/vGSmh.png)

CSS：

> ```
> /* ROUNDED AVATARS */ 
> .avatar-frame{border: 2px solid #c7b89e;}
> .avatar-frame,.avatar-frame img{ 
> width: 150px;
> height: 120px;
> -webkit-border-radius: 30px; /* Saf3+, Chrome */ 
> border-radius: 30px; /* Opera 10.5, IE 9 */ 
> /* -moz-border-radius: 30px; Disabled for FF1+*/
>  } 
> ```

我已经尝试使用 50% 作为图像的宽度和高度，但是对于每个特色图像来说这肯定会有所不同吗？

ASP：

> ```
> <%-- Comments Box --%>
>  <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
>     DataSourceID="CommentsDataSource" Height="167px" Width="325px">
>     <Columns>
>       <asp:TemplateField HeaderText="Comments">
>         <ItemTemplate>
>         <table>
> <tbody>
> <tr>
>     <td rowspan="3"><div class="avatar-frame"><asp:Image ID="Image1" CssClass="templateimagefield"
>    NullImageUrl="~/img/no_image.jpg" runat="server" ImageUrl='<%#
>    Eval("AvatarURL","~/Account/{0}")%>'/></div>
>         </td>
>     <td><h2><%# Eval("BookCommenter")%></h2></td>
> </tr>
> <tr>
>     <td><h2><%# Eval("TagLine")%></h2></td>
> </tr>
> <tr>
>     <td><%# Eval("CommentBody")%></td>
> </tr>
> </tbody> </table>
> 
>         </ItemTemplate>
> 
>         </asp:TemplateField>
>     </Columns>
> 
> </asp:GridView> 
> ```

所以是的，关于我能做什么的任何想法？

提前喝彩，

亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:46:43.150

您可以选择最大宽度和最大高度。

```
max-width: 150px;
max-height: 120px; 
```

但是您应该知道，您的浏览器缩小或放大图像的能力相当糟糕。这不是浏览器擅长的工作。您可能需要考虑使用 ASP 预先调整图像的大小，将它们传送到您的网站空间上的一个特殊文件夹，该文件夹用于为调整大小的拇指提供服务。然后，您的浏览器将始终以最佳质量显示图像，您不必寻求可能并不总是作为最佳解决方案的 CSS 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:59:54.107

为了最大限度地提高浏览器兼容性，只需指定一个维度（可能是宽度，根据您的屏幕截图），图像将缩放到该宽度，同时保持高宽比。

如果您担心图像异常高（例如，150px 宽 x 1000px 高）的可能性或结果，hurrtz 的 max-width max-height 可能会更好。

# jquery - 使用带有“销毁”方法的 Jquery 选项卡 - 如何减慢动画速度？

> ID：15817969
> 
> 赞同：0
> 
> 时间：2013-04-04T17:38:03.200
> 
> 标签：jquery

我正在将 Jquery 选项卡用于两级菜单，并且正在使用 destroy 方法。

如何减慢鼠标悬停事件的时间？太快了；当用户试图转到其中一个子菜单选项卡时，如果他们不是很刻意地避开其他一级选项卡，那么销毁方法发生得如此之快，并且他们意外地显示了另一个选项卡的子菜单。

这是我的脚本：

```
$( function() {
$( "#tabsMenu" )
.tabs({active: <?php echo $active_tab; ?>,
       event: "mouseover" })
.mouseleave( function() {
   $(this)
     .tabs("destroy")
     .tabs({active: <?php echo $active_tab; ?>,
            event: "mouseover" });
});        
$( "#tabsMenu .main-menu-home" ).click(function() { location.href = '/'; });
$( "#tabsMenu .main-menu-logout" ).click(function() { location.href = '/logout'; });
}); 
```

我做了一个 jsfiddle，但不确定它是否会有很大帮助。

如果有帮助，我也可以发布一个网址。

提前感谢您的任何指点；我尝试将 fx duration slow 添加到 mouseover 事件；但现在我想知道我是否应该把它放在方法上？

# jenkins - 詹金斯失去了构建历史

> ID：15817971
> 
> 赞同：5
> 
> 时间：2013-04-04T17:38:06.813
> 
> 标签：jenkins, continuous-integration

我已经使用 Jenkins 大约一年了，偶尔会遇到这个问题。构建将正常工作，然后似乎随机丢失我在 GUI 中的所有构建历史。

我研究了这个问题并发现了以下关于它的问题[Jenkins - Not Showing Build History](https://stackoverflow.com/questions/14514976/jenkins-not-showing-build-history) and like user: Ring Jenkins 仍然在项目的构建文件夹下拥有我的所有构建，但它们不会出现在 GUI 中。

用户：Ring 的解决方案是迁移到 Hudson。有没有不需要放弃詹金斯的解决方案？

我试图通过 Jenkins JIRA 票来追踪问题，但它似乎在这里没有解决方案就结束了[https://issues.jenkins-ci.org/browse/JENKINS-16845](https://issues.jenkins-ci.org/browse/JENKINS-16845)他们有另一张票`JENKINS-17265`打开但它被关闭为重复16845。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:33:57.587

将您的 Jenkins 更新到最新版本，将对您有所帮助！！！我有同样的问题，更新，一切正常。

您可以查看更改日志[链接](http://jenkins-ci.org/changelog)

# javascript - 在javascript中从日期（日期为第一天）减少一天导致日期变为零

> ID：15817974
> 
> 赞同：1
> 
> 时间：2013-04-04T17:38:11.317
> 
> 标签：javascript

当我尝试从日期减少一天时，日期变为零，而不是在 java 脚本中调整为上个月的日期。下面是示例。

```
var dt = new date(2012, 2, 1);
dt.setDate((dt.getDate() - 1));

logger.info(dt.getFullYear()+"-"+(dt.getMonth()+1) + "-" + dt.getDate());

Result is : 2012-2-0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:49:03.057

它工作正常，我认为你误解了数字是什么（虽然我从来没有得到`0`）。虽然你确实使用了`new date(2012, 2, 1)`，但需要大写 - `new Date(2012, 2, 1)`。

当您使用:`new Date(2012, 2, 1)`时，它会创建日期“2012 年 3 月 1 日”，因为`month`（第二个参数）基于 0。

减去一天，就变成了“2012-2-29”，也就是“2012年2月29日”。

```
var dt = new Date(2012, 2, 1);    // March 1st, 2012
dt.setDate((dt.getDate() - 1));

console.log(dt.getFullYear() + "-" + (dt.getMonth() + 1) + "-" + dt.getDate());    // February 29th, 2012 
```

**演示：http:** [//jsfiddle.net/8PyFR/3/](http://jsfiddle.net/8PyFR/3/)

您似乎已经了解`getMonth()`返回基于 0 的月份，因此您添加了 1。但是就像您获得基于 1 的月份（通过添加 1）一样，您必须在设置基于 1 的月份（通过减去 1）时进行调整。三月通常是 3，但您需要使用 2。

# c++ - 模板的静态成员是全局唯一的吗？

> ID：15817975
> 
> 赞同：3
> 
> 时间：2013-04-04T17:38:11.740
> 
> 标签：c++, templates, static-members

查看现在可用的答案，我仍然不确定答案是什么。这是我的例子

```
// foo.h
template <class T> class foo
{
public:
    static T t;
};
template <class T> T foo<T>::t = 0;

// a.cpp
#include "foo.h"
foo<int> fa;

// b.cpp
#include "foo.h"
foo<int> fb;

// c.cpp
#include "foo.h"
foo<int> fc;

int main (int argc, char* argv[])
{
    fc.t = 5;
} 
```

这是否意味着 fa.t 和 fb.t 也是 5？如果语法不正确，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:40:14.203

> 这是否意味着 fa.t 和 fb.t 也是 5？

是的，一个`static`数据成员由一个类的所有实例共享，并且由于`fa`、`fb`和`fc`都是同一个类的实例`foo<int>`，它们共享该`static`数据成员。

您的对象的类型是模板的实例这一事实与此无关，您的对象在不同的​​翻译单元中实例化也无关紧要。正如 C++11 标准的第 9.4/5 段所述：

> **命名空间范围内的类的静态数据成员具有外部链接**(3.5)。本地类不应具有静态数据成员。

换句话说，这个片段：

```
#include <iostream>

int main ()
{
    fc.t = 5;
    std::cout << fa.t;
} 
```

将打印`5`到标准输出。这是一个[活生生的例子](http://liveworkspace.org/code/3SRz1U$64)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:03:38.607

在您的示例中`fa.t`，`fb.t`、`fc.t`和`foo<int>::t`都是同一个变量。但是我不确定这是否是您真正要问的： `foo<int>::t`并且`foo<double>::t`是 *不同*的变量。

正如 Pete Becker 在评论中所说，类模板的每个实例化都会产生一个类，该类的行为与非模板类完全相同。另一方面，每个不同的实例化都是一个不同的、*不相关*的类，具有自己的静态成员。

# facebook - 照片上传时出现“503/无法写入服务器”

> ID：15817976
> 
> 赞同：1
> 
> 时间：2013-04-04T17:38:16.733
> 
> 标签：facebook, file-upload, photo

使用 Facebook REST API 上传照片时，我偶尔会从 Facebook 收到“503/无法写入服务器”。

我在 TCP 流量的捕获中看到，当我使用 SSL 发送图像时，Facebook 服务器会突然发送一个加密警报（code21），并在不久之后发送一堆 RST 标志。这总是发生在传输过程中。

我用各种不同的图像进行了测试，看起来图像越大，失败的可能性就越大。例如，一个 3kb 的图像将有 100% 的成功率。一个 400kb 的图像将有大约 50% 的成功率。600kb 的成功率约为 25，而 800kb 或更大的图像似乎总是失败。

我还应该补充一点，有时甚至更大的图像（2000kb）也会连续多次成功上传，但一旦发生失败，我上面提到的结果就会开始发生。

所以我的问题是，是什么导致了这种行为？为什么一次尝试上传失败，然后使用相同图像进行后续尝试成功？

# jquery - JQuery Mobile：使用 'data-rel="back"' 生成动态页面

> ID：15817980
> 
> 赞同：3
> 
> 时间：2013-04-04T17:38:21.740
> 
> 标签：jquery, jquery-mobile, mobile, dynamic-pages

我在我的 jquery 移动应用程序中向后移动历史堆栈时遇到问题。

基本上，我有三个页面：

1.  搜索表单（具有页面角色的预建 div。有限导航：仅限结果列表页面）
2.  结果列表（带有页面角色的预构建 div，通过 ajax 添加的结果信息。可以导航到任何记录页面）
3.  记录页面（完全动态构建。相关记录页面的无限导航可能性）

记录页面是根据表格和记录 ID 动态创建的，每次选择新记录时都会附加到文档正文中。

```
var page_id = table + record_id;
var pg_html = newPageHTML(page_id );
$('body').append(pg_html);
$.mobile.changePage($("#" + page_id)); 
```

在前进到一条记录并按下“返回”按钮（data-rel="back"）后，预期的行为将是返回到上一页，无论是另一条记录还是结果列表，但我一直被发送返回搜索表单。当我使用 data-dom-cache="true" 而我不使用时，就会发生这种情况。

关于为什么会这样的任何解释？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:45:58.963

好吧，这就是我修复它的方法。虽然我不会选择这个作为答案，因为它与我希望它的工作方式相去甚远，而且看起来非常复杂。

问题：

1.  无法将任何不指向真实 .html 页面的页面更改保存到历史记录。因此，在动态页面之间弹跳已经过时了。
2.  我需要一种方法将我的数据传递到将保留在历史记录中的 .html 页面，因此我使用了 url 中的序列化字符串，例如 GET 字符串。和这里类似，但是一个不同的，更短的，更干净的我找不到链接 - 抱歉！（[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values/901144#901144)）
3.  .html 页面必须不同并在彼此之间交换，以便页面重新加载并触发页面更改事件侦听器。

现在 html 页面已存储，并具有在单击返回时重绘自身所需的所有信息。

#2 的代码（不是我的，非常感谢编写它的人）：

```
$.urlParam = function(name){
    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
    return results[1] || 0;
} 
```

#3 的代码：

```
// change page
if($('.ui-page-active').attr('id') == "record-a"){
    $.mobile.changePage("p-record-b.html?table=" + content_type + "&id=" + record_id);
}else if($('.ui-page-active').attr('id') == "record-b"){
    $.mobile.changePage("p-record-a.html?table=" + content_type + "&id=" + record_id);
}else{
    $.mobile.changePage("p-record-a.html?table=" + content_type + "&id=" + record_id);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T21:33:02.117

获取 DOM 中上一页的 ID，然后移动到它。

**[工作演示](http://jsfiddle.net/Palestinian/Uqvns/)**

```
$('.selector').on('click', function() {

 // get the ID of the previous page
 var previous = '#' + $.mobile.activePage.prev('div[data-role="page"]')[0].id;

 // move to previous page with reverse effect
 $.mobile.changePage(previous, {
  transition: 'slide',
  reverse: true
 });
}); 
```

# wpf - 您如何让 WPF 文本框溢出到左侧并保持这种状态而不会弄乱您的箭头键行为？

> ID：15817985
> 
> 赞同：1
> 
> 时间：2013-04-04T17:38:32.710
> 
> 标签：wpf, layout, textbox, alignment

我有一个只有 10 个字符宽的文本框。我需要在其中输入 20 个字符，但只需要显示最后 10 个字符。我需要强制 TextBox 始终将文本溢出到左侧，从而使右侧的 10 个字符可见。

我查看了几个帖子并尝试了所有我能找到的建议，但它们似乎无法正常工作。

以下是我迄今为止尝试过的事情（单独和组合）：

```
<TextBox 
    HorizontalContentAlignment="Right"
    TextAlignment="Right"
    FlowDirection="RightToLeft"/> 
```

似乎 FlowDirection 是让它工作的最接近的东西，但它使左右箭头键操作 backwords.. （你按左键，TextBox 内的光标向右移动）另外，当你关闭编辑最左边的文本后控制，文本不会弹回并再次显示最右边的字符。

如果没有足够的文本来填充框，TextAlignment 只会将文本推到右侧。

Horizo​​ntalContentAlignment 似乎根本没有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:19:43.003

我做了这个小例子：

一、窗口的XAML：

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <TextBox Text="1234567890" Width="40" Name="MyTextBox" LostFocus="MyTextBox_LostFocus" />
        <TextBox Text="" Width="40" Name="MyTextBox2" />
    </StackPanel>
</Window> 
```

后面还有一些代码：

```
 private void MyTextBox_LostFocus(object sender, RoutedEventArgs e) {
        MyTextBox.ScrollToHorizontalOffset(999999);
    } 
```

这只会在失去焦点时完成您正在寻找的东西。您可能必须`ScrollToHorizontalOffset()`在加载视图后调用才能让 TextBox 以这种方式启动。并且可能有更好的方法来确定参数。`double.MaxValue`可能是更好的选择。

# java - java.lang.NoSuchMethodError：

> ID：15817992
> 
> 赞同：0
> 
> 时间：2013-04-04T17:39:00.117
> 
> 标签：java

我正在尝试运行一个 java 应用程序，但出现以下错误：

```
java.lang.NoSuchMethodError: com/crossview/commerce/dataload/reader/OfferReader.getNode()Lorg/w3c/dom/Node;
    at com.wkus.taa.commerce.dataload.reader.OfferReader.init(OfferReader.java:57)
    at com.ibm.commerce.foundation.dataload.AbstractBusinessObjectLoader.initializeDataReaders(AbstractBusinessObjectLoader.java:1220)
    at com.ibm.commerce.foundation.dataload.AbstractBusinessObjectLoader.init(AbstractBusinessObjectLoader.java:353)
    at com.ibm.commerce.foundation.dataload.BusinessObjectLoader.init(BusinessObjectLoader.java:65)
    at com.ibm.commerce.foundation.dataload.DataLoaderMain.execute(DataLoaderMain.java:428)
    at com.ibm.commerce.foundation.dataload.DataLoaderMain.main(DataLoaderMain.java:213)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:600)
    at com.ibm.ws.bootstrap.WSLauncher.main(WSLauncher.java:260) 
```

但是该方法`getNode()`存在于代码中。为什么我看到这个错误的任何线索？

我有一个子类 OfferReader.java，它从超类调用 getNode()。

```
public void init() throws DataLoadException {
        super.init();
        node = super.getNode();
    } 
```

父类 OfferReaderParent.java 具有以下方法签名：

```
public Node getNode() {
        return node;
    }

    public void setNode(Node node) {
        this.node = node;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T10:07:26.330

尽管这篇文章已经很老了，但我正在回答这个问题，因为有人可能遇到与上述相同的问题，并且与我正在努力解决的情况相匹配。

我遇到了一个类似的问题，仔细检查后发现在两个相同的包名称中有两个相同的类，尽管在不同的模块下。例如，假设您有两个项目，一个 JAVA 客户端和一个 Web 客户端，它们部署到您的服务器并打包在同一个 EAR 文件中。

> **JavaClient >> test.java.somepackage.SomeClass**
> 
> **WebClient >> test.java.somepackage.SomeClass**
> 
> 都打包在**TestProjectEAR.ear中**

在这种情况下，如果您在服务器上部署了项目，服务器可能会尝试在错误的类中查找具有相同名称的方法，从而导致 java.lang.NoSuchMethodError。

我希望这可以帮助一些可能来这里寻找答案的人。:)