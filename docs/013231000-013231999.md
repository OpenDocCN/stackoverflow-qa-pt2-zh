# StackOverflow 问答 13231000-13231999

# sql - 外部的 if 语句 apply 或 case when

> ID：13231003
> 
> 赞同：0
> 
> 时间：2012-11-05T11:17:44.250
> 
> 标签：sql, if-statement, case, outer-join

是否可以在外部应用中使用 if 语句？我似乎无法让它工作。

这是有效的现有代码：

```
select id
from
residentmemberlease rml
left outer join lease l on rml.leaid = l.leaid
outer apply
(SELECT TOP(1) * FROM dbo.RentalHistory a WITH(NOLOCK) WHERE a.resmID = RML.resmID and rthDisplayBit='1'
ORDER BY ISNULL(a.rthMoveOutDate, a.rthMoveInDate) DESC) AS RH 
```

我希望它看起来像这样，具体取决于 codeleasestatuscode 的值（如果它是 1 或 2）：

```
select id
from
residentmemberlease rml
left outer join lease l on rml.leaid = l.leaid
outer apply
if(select codeleasestatuscode from lease) = '1'
begin
(SELECT TOP(1) * FROM dbo.RentalHistory a WITH(NOLOCK) WHERE a.resmID = RML.resmID and rthDisplayBit='1'
ORDER BY ISNULL(a.rthMoveOutDate, a.rthMoveInDate) DESC) AS RH
end
if(select codeleasestatuscode from lease) = '2'
begin
(SELECT TOP(1) * FROM dbo.RentalHistory a WITH(NOLOCK) WHERE a.resmID = RML.resmID and rthDisplayBit='0'
ORDER BY ISNULL(a.rthMoveOutDate, a.rthMoveInDate) DESC) AS RH
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:26:17.273

```
 SELECT id --<<-- best to add aliases to all columns
         FROM residentmemberlease rml
    LEFT JOIN lease l ON rml.leaid = l.leaid
  OUTER APPLY
            (SELECT TOP(1) *
               FROM dbo.RentalHistory a WITH(NOLOCK)
              WHERE a.resmID = RML.resmID
                AND (l.codeleasestatuscode = '1' AND a.rthDisplayBit='1' OR
                     l.codeleasestatuscode = '2' AND a.rthDisplayBit='0')
           ORDER BY ISNULL(a.rthMoveOutDate, a.rthMoveInDate) DESC
            ) AS RH; 
```

# integration - 使用 hive + hbase 集成的 java 客户端时出现 ClassNotFoundException

> ID：13231006
> 
> 赞同：1
> 
> 时间：2012-11-05T11:17:54.047
> 
> 标签：integration, hbase, hive, classnotfoundexception

我有一个 hive+hbase 集成集群。

当我尝试通过 hive 的 java 客户端执行查询时，**有时**会`ClassNotFoundException`发生。

我的Java代码：

```
final Connection conn = DriverManager.getConnection(URL);
final ResultSet rs = conn.executeQuery("SELECT count(*) FROM test_table WHERE (source = '0' AND ur_createtime BETWEEN '20121031000000' AND '20121031235959')"); 
```

我可以在 hive cli mod 中执行 sql:`SELECT count(*) FROM test_table WHERE (source = '0' AND ur_createtime BETWEEN '20121031000000' AND '20121031235959')`并获取查询结果，所以我的 sql 中没有错误。

客户端异常：

```
Caused by: java.sql.SQLException: Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
    at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:189)
... 23 more 
```

服务器端异常（hadoop-jobtracker）：

```
2012-11-05 18:55:39,443 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_201210301133_0112_m_000000_3: java.io.IOException: Cannot create an instance of InputSplit class = org.apache.hadoop.hive.hbase.HBaseSplit:org.apache.hadoop.hive.hbase.HBaseSplit
    at org.apache.hadoop.hive.ql.io.HiveInputFormat$HiveInputSplit.readFields(HiveInputFormat.java:146)
    at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:67)
    at org.apache.hadoop.io.serializer.WritableSerialization$WritableDeserializer.deserialize(WritableSerialization.java:40)
    at org.apache.hadoop.mapred.MapTask.getSplitDetails(MapTask.java:396)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:412)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Unknown Source)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hive.hbase.HBaseSplit
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:819)
    at org.apache.hadoop.hive.ql.io.HiveInputFormat$HiveInputSplit.readFields(HiveInputFormat.java:143)
    ... 10 more 
```

我的 hive-env.sh

```
export HIVE_AUX_JARS_PATH=/data/install/hive-0.9.0/lib/hive-hbase-handler-0.9.0.jar,/data/install/hive-0.9.0/lib/hbase-0.92.0.jar,/data/install/hive-0.9.0/lib/zookeeper-3.4.2.jar 
```

我的 hive-site.xml

```
<property>
    <name>hive.zookeeper.quorum</name>
    <value>hadoop01,hadoop02,hadoop03</value>
    <description>The list of zookeeper servers to talk to. This is only needed for read/write locks.</description>
</property> 
```

我开始节俭服务如下：

```
hive --service hiveserver -p 10000 & 
```

服务器端错误日志显示`HBaseSplit`未找到。但为什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-09T14:56:39.803

如果您无权访问配置文件，您可以使用 --auxpath 开关将 jars 添加到 hive cli 类路径：

```
hive --auxpath /path/to/hive-hbase-handler-0.10.0-cdh4.2.0.jar,/path/to/hbase.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:31:28.757

1.  在 $HIVE_HOME 中创建一个文件夹 auxlib 并将所有 hive-hbase-handler、hbase jar 放入该文件夹

2.  将以下行添加到 $HIVE_HOME/conf/hive-site.xml

    ```
    <property>
     <name>hive.aux.jars.path</name>
     <value>file:///<absolute-path-of-all-auxlib-jars></value>
    </property> 
    ```

    重新启动配置单元服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:14:18.147

此问题的解决方法是您可以将 jar 文件 hive-hbase-handler-0.9.0-cdh4.1.2、hbase-0.92.1-cdh4.1.2-security 等复制到 HADOOP lib 文件夹或添加这些 jar 的路径在 HADOOP_CLASSPATH 环境变量中。

# python - 如何使用 virtualenv 设置环境变量？

> ID：13231007
> 
> 赞同：6
> 
> 时间：2012-11-05T11:17:54.817
> 
> 标签：python, environment-variables, virtualenv

我正在尝试设置一个用 python 编写的外部程序/库 - 在 debian 挤压上。

当我尝试启动它时出现“未设置环境变量”的错误 - 这是开发人员抛出的异常。所以我想，我必须定义它，但是在哪里？

1.  我认为 virtualenv 和 path 是一样的，所以我写了一个 .pth 在启动时加载。它解决了一些错误，但不是全部。
2.  我已经读过 use export in`~/.bashrc`但我不确定它是在 virtualenv 中读取的，即使我不使用这个 virtualenv，我也不希望读取这些导出。
3.  我也读过使用 export in `virtualenv/bin/activate`，但它似乎无法正常工作。

我正在尝试安装[Opus 和 Urbansim](http://www.urbansim.org/Download/LinuxInstallation)。

这是我在启动时得到的：

```
(opus-env)touki@touki:~/Projects/opus-env$ ./src/opus_gui/opus.py  
Traceback (most recent call last):
  File "./src/opus_gui/opus.py", line 14, in <module>
    from opus_gui.main.controllers.opus_gui_configuration import OpusGuiConfiguration  
  File "/home/touki/Projects/opus-test/src/opus_gui/main/controllers/opus_gui_configuration.py", line 12, in <module>
    from opus_core import paths  
  File "/home/touki/Projects/opus-test/src/opus_core/paths.py", line 44, in <module>
    OPUS_HOME = _safe_getenv('OPUS_HOME', _get_default_opus_home)  
  File "/home/touki/Projects/opus-test/src/opus_core/paths.py", line 33, in _safe_getenv
    return os.environ[key] if key in os.environ else default_func()  
  File "/home/touki/Projects/opus-test/src/opus_core/paths.py", line 36, in _get_default_opus_home  
    raise Exception('OPUS_HOME environment variable must be set.') 
Exception: OPUS_HOME environment variable must be set. 
```

注意：我已经搜索过，autoenv combine virtualenvwrapper 似乎提供了一个答案，但我宁愿不使用外部程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-06T18:31:12.510

如果你添加到`opus-env/bin/activate`

```
OPUS_HOME="some value"
export OPUS_HOME 
```

它应该可以工作（您的解决方案 3）。当然，它不会应用于当前正在运行的进程。

尝试退出当前的 virtualenv shell 会话，启动新的 shell 会话，在该新会话中激活修改后的 virtualenv。在启动程序之前，请验证环境：

```
env | grep OPUS_HOME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:41:39.050

嗯，也许使用：

```
~virutalenv/bin/python opus.py 
```

# c# - 如何使用模板字段中的链接在弹出页面中发布

> ID：13231010
> 
> 赞同：0
> 
> 时间：2012-11-05T11:18:12.113
> 
> 标签：c#, asp.net, post, gridview, popup

我有以下情况：

我当前的网格视图是这样的：

```
<asp:TemplateField ItemStyle-Width="10px">
<ItemTemplate>
<a id="btnShowPopup5" runat="server" class="thickbox" href='<%#"PopUpPage.aspx?TCode="+Eval("t_code")+"&TransSerial="+Eval("t_s")+"&AR=2"+"&TBiframe=true&height=530&width=750"%>' 
```

* * *

此链接会打开一个弹出页面，该页面会加载特定的用户控件。

现在我想在帖子中传递这些参数而不是查询字符串，因为我发现它更安全。

我创建这样的表格：

```
 <form id="frm_popup" method="post" target="_blank" action="https://..../PopUpPage.aspx">
    <asp:HiddenField ID="hf_task_code" runat="server" />
    <asp:HiddenField ID="hf_trans_serial" runat="server" />
 </form> 
```

我尝试设置隐藏字段，但我不能，因为链接没有命令名称。

我的问题是如何使用模板字段中的链接在弹出页面中发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:36:05.087

将表单发布到 js 函数中并传递参数给它：

```
function postForm(tcode, t_s)
{
    $('#<%=hf_task_code.ClientID%>').val(tcode);
    $('#<%=hf_trans_serial.ClientID%>').val(t_s);
    $('#frm_popup').submit();
}

<a id="btnShowPopup5" runat="server" class="thickbox" href='#' 
   onclick='<%# "postForm(\"" + Eval("t_code") + "\",\"" + Eval("t_s") + "\")")%>' /> 
```

# jquery - jQuery 最接近的发现混淆

> ID：13231011
> 
> 赞同：1
> 
> 时间：2012-11-05T11:18:13.340
> 
> 标签：jquery, jquery-selectors

我的屏幕上有 3 个相同的小部件，这些小部件与 3 个 div 标签中的小部件具有用户选择在他/她的屏幕上拥有的内容，她/他可以在屏幕上移动和排列。有点像 iGoogle 所做的。所以基本上，他们可以在屏幕上拥有 0 个或多个相同的小部件。

我通过在 html 中使用类而不是 id 来实现这一点。

```
<div class="widget_1">
    <div class="widget_header_1"></div>
    <div class="widget_sub_header_1"></div>
    <div class="widget_content_1"></div>
    <div class="widget_footer_1"></div>
<div> 
```

因此，如果我有 2 个这些小部件，则用户屏幕将有 2 个带有 class 的小部件`widget_1`，即上面的 html 将在 html 源代码中出现两次。

无论如何，我在小部件的 sub_header 中有一个按钮，它将数据添加到小部件的`content`部分，即

```
$('.my_button').live('click',function() {
    get_data( $(this) );
}); 
```

这很好，例如，如果我点击第一个按钮`widget_1`，只有它的内容会改变，如果我点击第二个按钮`widget_1`，只有它的内容会改变，它不会影响其他`widget_1`的。

为此，我正在使用：

```
$(this).closest('.widget_1').find('.widget_content_1').empty().append( some_data_here ); 
```

我的问题是，我想在小部件中单击按钮时将加载图像添加到内容中`sub_header`，所以我尝试了：

```
$(this).closest('.widget_1').find('.widget_content_1').prepend( "<img class='imgLoading' src='/img/loading_white_32.gif'></img>" ); 
```

这是因为它只在单击按钮的小部件中显示加载图像，但如果我在屏幕上`widget_1`有 2 个，它会在单击时显示 2 个图像，如果我有，它将在单击时显示 5 个图像5在屏幕上。 `widget_1``widget_1``widget_1`

为什么会这样？

无论屏幕上有`widget_1`多少个，它都应该在单击时仅显示 1 个加载图像。`widget_1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:18:47.790

它看起来像代码：

```
$('.my_button').live('click',function() {
    get_data( $(this) );
}); 
```

为您创建的每个小部件运行一次。这是不必要的，实际上会适得其反，因为一次调用`live()`安装了一个委托处理程序，该处理程序将“看到”`click`从所有匹配的元素冒泡的事件`.my_button`，无论它们驻留在哪个小部件中。

您必须找到一种方法让该代码只运行一次（如果有的话，可能在您的小部件的通用初始化例程中）。

顺便提一下，从 jQuery 1.7 开始，不推荐使用[live()](http://api.jquery.com/live/)来支持[on() 。](http://api.jquery.com/on/)上面的代码将变为：

```
$(document).on("click", ".my_button", function() {
    get_data( $(this) );
}); 
```

# javascript - 根据浏览器宽度通过平滑过渡更改网格中的列数

> ID：13231013
> 
> 赞同：0
> 
> 时间：2012-11-05T11:18:25.507
> 
> 标签：javascript, jquery, css

我在一个简单的 HTML 和 CSS 网格中遇到了一个小问题。我有一个由 n 个盒子组成的网格。它可以有任意数量的列，具体取决于浏览器或其父宽度。

将 display 应用于 inline-block 非常简单，如下例所示：

```
ul {
    list-style: none;
}

ul li {
    width: 100px;
    height: 100px;
    display: inline-block;
    background: #f00;
}​ 
```

见[http://jsfiddle.net/2nscQ/](http://jsfiddle.net/2nscQ/)

但是当有人改变浏览器的宽度时，我希望列数能够平滑过渡。这可能与 CSS 吗？或者有没有好的 jQuery 插件或技巧呢？

示例：[http ://www.squarespace.com/templates/](http://www.squarespace.com/templates/)

我正在寻找一个非常简单且小型的解决方案。因为我不能为那个小东西添加一个完整的库。我已经在我的应用程序中使用了 jQuery。因此，如果可以使用 CSS 和 jQuery。那会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:44:27.343

是的，您可以更改当前浏览器的动态页面。我决定您可以通过`$(window).width()`在 jQuery 中使用来检查浏览器宽度，并且您可以使用事件处理程序，例如`resize()`在用户当前更改浏览器宽度时附加浏览器宽度......还有其他事情：当我们在 CSS 中进行时，大多数开发人员会动态设置网站宽度为 100%。

**// 这是我添加的 CSS 媒体查询的示例：-**

CSS 媒体查询可以通过您能够定义的所有方式添加到 CSS：

**第一个示例：**当当前页面宽度不高于且低于 480px 时链接特定的 CSS：

我建议您使用第一个示例。我们知道我们可以覆盖 CSS 网格，当浏览器调整大小时，您可以设置很多次，并且使用不同的文件名，您可以创建更多`.css`文件和链接，如下所示。

```
<link rel="stylesheet" type="text/css" href="smallscreen.css" media="only screen and (max-width: 480px)" /> 
```

**第二个示例：**在`<style>`元素中导入样式表：

```
@import "smallscreen.css" only screen and (max-width: 480px); 
```

**第三个示例：**`<style>`作为媒体规则的元素内：

```
<style type="text/css">
  @media only screen and (max-width: 480px){
    /* rules defined inside here are only applied to browsers that support CSS media queries and the browser window is 480px or smaller */
  }
</style> 
```

**...然后当您使用特定浏览器时，您可以使用：**

**对于谷歌浏览器：**

```
@media screen and (-webkit-animation) {
   div.grid_24 {
     // Webkit only rules 4
 } 
} 
```

**火狐：**

```
 @media screen and (max-width:320px;) {        
           div.grid_24 {
           //..
          }
       } 
```

**...和歌剧：**

```
 @media all (-o-min-device-pixel-ratio:0) {  
        div.grid_24{  
         //..
    }   // as i know maybe for opera 10 and above 
```

**或者您可以为所有人使用：**

```
@media all and (max-width:480px) {
   div.grid_24 {
   //..
  }
} 
```

就这样。如果您想了解有关媒体查询的更多参考，您可以查看[w3](http://www.w3.org/TR/css3-mediaqueries/)、[htmlGoodies](http://www.htmlgoodies.com/beyond/css/introduction-to-css-media-queries.html)或[css-trick](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:35:42.773

当然只是使用[CSS3 的`column-width`](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_column-width)属性来设置列的宽度（大概它将`em`作为一个单位而不是`px`）并将所有`li`项目放在一个设置了列宽的容器中？

w3schools 示例在我调整浏览器窗口大小时平滑地更改列数。

# javascript - html下拉列表的自定义字段

> ID：13231016
> 
> 赞同：2
> 
> 时间：2012-11-05T11:18:28.627
> 
> 标签：javascript, html

我有一个下拉列表，其中包含从数据库中填充的公司名称。我还想添加自定义字段，如 compID、纬度值、经度值以及公司名称。这样我就可以使用这些字段来检查公司是否有 lat、long 值，如果不允许用户添加它们……等等。

下面是我的html代码：

```
<select id="select_comp" class="dropdown-toggle" style="width:auto;" >
            <option>Choose a number</option>
</select> 
```

下面是我如何填充下拉列表：

```
 var el = document.createElement("option");
            el.textContent = data[key]["name"];
            select.appendChild(el); 
```

我想要这样的自定义字段：

```
 el.field1 = data[key]["CompID"];
            el.field2 = data[key]["lat"];
            el.field3 = data[key]["log"]; 
```

这是这样做的正确方法........如果我的方法是错误的，请纠正我....

我试图`//el.id= data[key]["CompID"];`获得它工作的公司 ID，但如何获得*lat*，*lon*值......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:25:39.177

您只能在下拉选项中存储单个值。

您希望使用设置为公司键/ID（实际选定值）和文本作为公司名称（向用户显示的内容）填充下拉选项：

```
el.value = key;
el.text = data[key]["name"]; 
```

And then when an option is selected (or any other time) you can look up the additional fields in your `data`array:

```
var dropdown = document.getElementById("select_comp");
var key = dropdown.options[dropdown.selectedIndex].value;
alert(data[key]["lat"]); 
```

# php - 在 mysql 中，我想选择将显示 2dates 之间的所有内容

> ID：13231020
> 
> 赞同：1
> 
> 时间：2012-11-05T11:18:49.000
> 
> 标签：php, mysql, datetime

我的表中有这样的日期时间 01.08.2012 14:20 22.10.2012 10:02

我输入 2 个日期（我可以像 10.08.2012 一样输入它们还是我必须添加时间）并且我想这样做

```
 $sqlSelectMY='BDate >= "'.$fromDate.'" AND BDate <="'.$toDate.'"';

 "SELECT* FROM table  WHERE ".$sqlSelectMY.";"; 
```

我将日期子句放在变量 sqlSelectMy 中，而不是在我从 mysql 数据库中调用 select 的变量中使用它，如果有人可以向我推荐的话，我想看看一些例子。如何编写输入日期，以使用代码完成我现在需要的事情，即使我输入日期，就像我在顶部的时间一样，它没有做任何事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:28:12.707

使用 phps 函数 substr() 将日期格式固定为 YYYY-MM-DD HH:II:SS 并将该变量用于 fromDate 和 toDate 变量，应该这样做，我会尽快用一些工作代码编辑我写它下来:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:34:21.377

如果你用这个

```
'BDate >= "'.$fromDate.'" AND BDate <="'.$toDate.'"' 
```

由于时间格式，这只会选择 fromday upto today - 1；
您可以使用mysql日期功能准确选择日期时间

```
 $sqlSelectMY='DATE(BDate) >= "'.$fromDate.'" AND DATE(BDate) <="'.$toDate.'"'; 
```

这只选择基于日期时间的日期。

# iphone - 第一时间在storyboard提示另一个UIViewcontroller

> ID：13231022
> 
> 赞同：0
> 
> 时间：2012-11-05T11:18:52.557
> 
> 标签：iphone, objective-c, ios5, xcode4.3, uistoryboard

我使用故事板作为界面并从标签栏控制器开始。假设我有 tab1、tab2、accountsetting。

在允许用户使用应用程序之前，用户必须先进行身份验证。我叫它别针。我已经关注[了这个链接](https://stackoverflow.com/questions/7978932/linking-a-new-viewcontroller-to-storyboard)，我可以提示 pin UI。但我有一个问题。如果我的验证是真的，我不会如何让这个 pin UI 消失。我使用`sqlite`.

要移动到 pin UI，我使用此代码。

```
- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
FirstTimeViewController *firstViewController = [storyboard instantiateViewControllerWithIdentifier:@"PinViewController"];
[firstViewController setModalPresentationStyle:UIModalPresentationFullScreen];
[self presentViewController:firstViewController animated:YES completion:nil];
} 
```

这是图片：

![在此处输入图像描述](../Images/783f19ceff01aff0789509a3120792f3.png)

实际上，我可以创建 UI 引脚并将其设为初始值，但用户可以在应用程序引脚处禁用 UI 引脚。

每当我单击操作按钮时，如果验证成功，我将跳转到主菜单。如果验证成功，如何返回标签栏？任何想法？谢谢。

**编辑** 这里是我的应用程序引脚菜单。

![在此处输入图像描述](../Images/b43461fd59ae5b4f4fd2883656051f66.png)

我可以使用相同的课程吗？因为要启用/禁用我已经创建了一个类来处理它。使用相同的类，我的意思是用于 UI PIN。所以我不需要浪费来创建一个新文件。如果我使用同一个类，我如何通过下面的代码将对象发送到该类？因为我尝试了仍然有错误。谢谢。

```
 [firstViewController setModalPresentationStyle:UIModalPresentationFullScreen];
[self presentViewController:firstViewController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:30:51.387

几件事希望能帮助你。

First`presentModalViewController`已弃用，如果可能，您应该尝试使用它`presentViewController:animated:completion:`。

据我从您的问题中了解到，您正在以模态方式显示您的 PIN 输入屏幕。如果是这种情况，您需要做的就是摆脱它并返回您调用它的屏幕，`dismissViewControllerAnimated:completion:`一旦您确定 PIN 是正确的。

可能这不是您要问的，我误解了您的问题，在这种情况下，请告诉我！

**编辑：**好的 - 我想我现在明白你的问题了。您在 中显示您的 PIN 视图`viewDidAppear`，但您从未实际测试过用户是否已经输入了正确的 PIN（即，已登录）。这意味着每次用户进入该视图时，他们都会立即看到 PIN 视图。

您将需要添加一个条件测试来检查用户是否已登录（在该会话期间输入了有效的 PIN） - 如果没有，您可以模态显示 PIN 视图，否则就照常进行。

# requirejs - 带有 requireJs 的 TypeScript 用于编码模块化方式

> ID：13231025
> 
> 赞同：7
> 
> 时间：2012-11-05T11:19:20.513
> 
> 标签：requirejs, typescript

```
define(["require", "exports", "js/models/home","templates/home/home.html"
], function(require, exports, __model__, __homeView__) {

    var model = __model__;
    var homeView=__homeView__;

} 
```

我想写一个`.ts`文件来生成这样的`js`文件。

通过编译`--module`amd 我可以导入模型并引用`jquery`,`backboneJs`或任何其他`js`文件。`html`但是我怎样才能像这样导入外部文件`requireJs`呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T14:31:54.657

不久前，我在 require.js 和 Typescript 上整理了一个博客。
[http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/](http://blorkfish.wordpress.com/2012/10/23/typescript-organizing-your-code-with-amd-modules-and-require-js/)
为了导入文本文件，您需要引用文本。 js，然后使用 text!<...your text file> 语法，如下所示。使用 require.config 进一步简化了 require 的使用：

```
require.config({
    baseUrl: '../',
    paths: {
        views: 'app/views',
        'text': 'lib/text',
    }
});

require([
    'text!views/MTodoCollectionView.html'],
    (MTodoCollectionViewSnippet) => {
        // 
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T23:38:39.827

我刚刚找到了一个非常简洁的解决方案，用于使用 requirejs 文本插件作为 typescript 模块加载文本模板：

假设您像 blorkfish 一样配置了 require.js 建议：

```
require.config({
  baseUrl: '../',
  paths: {
      views: 'app/views',
      'text': 'lib/text',
  }
}); 
```

您可以执行以下操作，使其可以直接从打字稿中加载文本：

```
declare module "text!views/myview.html" {} 
import view = module("text!views/myview.html");

export class MyViewCtrl { //or whatever thingy you want impl in your typescript module
...
checkoutThisTemplate() {
    console.log(view); //will print the template as text to console
}
... 
```

生成的 JS 看起来与您所追求的完全一样：

```
define(["require", "exports", "text!views/myview.html"],       
    function(require, exports, , __view__) {
        var view = __view__;
.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:31:53.690

我认为 TypeScript 编译器尚不支持此功能，但如果我错了，我很高兴得到纠正。您可以[在 Codeplex 上围绕此功能展开讨论](https://typescript.codeplex.com/)。

只要声明`define`函数，就可以在 TypeScript 文件中手动设置。

```
declare function define(...params: any[]): void;

define(["require", "exports", "js/models/home","templates/home/home.html"
], function (require, exports, __model__, __homeView__) {

    var model = __model__;
    var homeView = __homeView__;
}); 
```

如果您想在回调内部进行类型检查，那么您需要变得有点时髦，尽管目前`model`是`homeView`type `any`。如果你有一个具体的例子，我可以尝试为你创建一些东西，但我怀疑它会涉及为你的模块添加一个声明（你可以使用针对 TypeScript 编译器的标志自动生成）。

# java - 使用 URL 或文件（在 ImageIO.read 中）

> ID：13231027
> 
> 赞同：0
> 
> 时间：2012-11-05T11:19:30.997
> 
> 标签：java, file, url, javax.imageio

我制作了一个使用多个图像的应用程序。我有 2 种方法来运行我的应用程序：
- 按下`run`想法
- 制作一个胖 jar 文件并从控制台运行它`java -jar app.jar`

如果我想从中运行它，`Idea`我必须使用：

`BufferedImage backgroundImage = ImageIO.read(new File("res/field.png"));`

代替

`BufferedImage backgroundImage = ImageIO.read(getClass().getClassLoader().getResource("res/field.png"));`
<- 这就是我必须在 jar 文件案例中使用的内容

为什么？我以为他们差不多。我的情况有什么通用的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:35:09.607

我总是使用：

```
BufferedImage backgroundImage = ImageIO.read(getClass().getResource("res/field.png")); 
```

它适用于 IDE 和 jar 内部。.getResource(...) 返回一个 URL，jar:// 或 file://

请注意，路径要么以 / 开头（在这种情况下，它是相对于包根目录），要么是相对于类包 - 如果你的类是 com.example.Test，`/res/`则指文件夹 com/example/测试/res/。

您甚至可以使用静态版本 - YourClassName.class.getResource(...) 它允许您轻松访问包树的其他“分支”（您可以使用来自位于不同分支中的类的引用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:31:29.437

使用`java.io`，相对路径取决于当前工作目录。使用 getResource，您必须在`classpath`.

# php - 在特定时间获取每周的日期

> ID：13231028
> 
> 赞同：0
> 
> 时间：2012-11-05T11:19:34.673
> 
> 标签：php, date, datetime

我想生成现在开始的每个日期（时间戳），每个星期一，在特定时间，比如 16h30、17h00 和 14h00。

这段代码几乎可以工作，但小时是当前的，而不是`$hours[$i]`，它也是一周中的当前天而不是下一个星期一

```
$hours = array('16h30', '17h00', '14h00');
for ($i = 0; $i < 3; $i++) {
    // how to specify the hour $hours[$i] ?
    $dates[] = strtotime("+$i weeks 0 days");
} 
```

期望的输出：

```
monday 5 november, 16h30
monday 12 november, 16h30
monday 19 november, 16h30
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:38:17.083

如果您从时间中删除“h”，PHP 将按原样理解它们，您只需将工作日名称放在字符串中即可。

```
$hours = array('1630', '1700', '1400');
for ($i = 0; $i < 3; $i++) {
    $dates[] = strtotime("monday +$i weeks $hours[$i]");
} 
```

如果您需要`h`其余代码的 ，您可以出于此目的将其删除：

```
$hours = array('16h30', '17h00', '14h00');
for ($i = 0; $i < 3; $i++) {
    $dates[] = strtotime("monday +$i weeks " . 
                         join('', explode('h', $hours[$i])));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:24:30.307

这是使用[DateTime 类](http://www.php.net/datetime "PHP 日期时间")的解决方案：-

```
/**
 * Get weekly repeating dates for an event
 *
 * Creates an array of date time objects one for each $week
 * starting at $startDate. Using the default value of 0 will return
 * an array with just the $startDate, a value of 1 will return an
 * array containing $startDate + the following week.
 *
 * @param DateTime $startDate
 * @param int optional defaults to 0 number of weeks to repeat
 * @return array of DateTime objects
 */
function getWeeklyOccurences(DateTime $startDate, $weeks = 0)
{
    $occurences = array();
    $period = new DatePeriod($startDate, new DateInterval('P1W'), $weeks);
    foreach($period as $date){
        $occurences[] = $date;
    }
    return $occurences;
}

$startDate = new datetime();
$startDate->setTime(16, 30);
var_dump(getWeeklyOccurences($startDate, 52)); 
```

给出以下输出：-

```
array (size=53)

      0 => 
        object(DateTime)[4]
          public 'date' => string '2012-11-06 16:30:00' (length=19)
          public 'timezone_type' => int 3
          public 'timezone' => string 'UTC' (length=3)
      1 => 
        object(DateTime)[5]
          public 'date' => string '2012-11-13 16:30:00' (length=19)
          public 'timezone_type' => int 3
          public 'timezone' => string 'UTC' (length=3)
      2 => 
        object(DateTime)[6]
          public 'date' => string '2012-11-20 16:30:00' (length=19)
          public 'timezone_type' => int 3
          public 'timezone' => string 'UTC' (length=3)
      3 => 
        object(DateTime)[7]
          public 'date' => string '2012-11-27 16:30:00' (length=19)
          public 'timezone_type' => int 3
          public 'timezone' => string 'UTC' (length=3) 
```

ETC..

然后，您可以根据需要格式化输出[`DateTime::format()`](http://www.php.net/manual/en/datetime.format.php "日期时间::格式()")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:37:02.403

像这样的事情怎么样：使用 mktime 生成第一个日期，然后使用 strtotime：

```
$start_date = mktime(16, 30, 0, 11, 5, 2012);
for ($i = 0; $i < 3; $i++) {
    // how to specify the hour $hours[$i] ?
    $dates[] = strtotime("+$i weeks 0 days", $start_date);
} 
```

# joomla2.5 - 如何开发搜索插件以将其与 joomla 的内置搜索集成

> ID：13231029
> 
> 赞同：0
> 
> 时间：2012-11-05T11:19:34.747
> 
> 标签：joomla2.5, joomla-extensions

我正在使用 joomla 2.5.7。我必须开发一个搜索插件来将它与 joomla 的内置搜索集成。需要从视频列表组件中搜索“**标题**”、“**描述”。**我在想类似 joomla 内置的“**搜索 - 类别**”、“**搜索 - 内容**”、“**搜索 - 联系人**”等。

我读过这个... [http://docs.joomla.org/Creating_a_search_plugin](http://docs.joomla.org/Creating_a_search_plugin)，但我不确定有多少是最新的！

有什么建议么 ？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:03:09.143

如果有人使用此[http://docs.joomla.org/Creating_a_search_plugin](http://docs.joomla.org/Creating_a_search_plugin)教程...更改这些代码行...

```
$mainframe->registerEvent( 'onSearch', 'plgSearchnameofplugin' );
$mainframe->registerEvent( 'onSearchAreas', 'plgSearchnameofpluginAreas' ); 
```

用这些...

```
$mainframe = JFactory::getApplication();
$mainframe->registerEvent( 'onContentSearch', 'plgSearchnameofplugin' );
$mainframe->registerEvent( 'onContentSearchAreas', 'plgSearchnameofpluginAreas' ); 
```

# php - PHP 中的 Cookie 未设置

> ID：13231030
> 
> 赞同：0
> 
> 时间：2012-11-05T11:19:37.370
> 
> 标签：php, cookies, setcookie

```
error_reporting(-1); 
session_start(); 
$expire=time()+60*60;
setcookie('categories', $_SESSION['categories'], $expire); 
```

这段代码应该设置一个 Cookie，但它没有，如果 cookie 存在它告诉我未定义的索引，我认为代码没问题...

我把它放在一页，在第二行，在

任何人都知道它为什么不起作用？：秒

更新

现在我将代码向下移动了一点......仍然处于同样的情况，未定义的索引

```
 $_COOKIE['newcoockievalu'] = json_encode($array);
    setcookie('newcoockievalu', json_encode($array), $expire);

    print "nocookie".($_COOKIE['newcoockievalu']); 
```

这个在这个IF里面

> `if (!isset($_COOKIE['newcoockievalu']))`

更新

更奇怪......它没有给出任何错误，但它“说” isset 总是错误的......但它打印 $_COOKIE['newcoockievalu'] ok....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:51:40.333

我检查了你的代码，它绝对正确。第二个参数必须是字符串。

请确保从必须是字符串的会话值中设置 cookie 名称类别。然后在下一次重新加载时它会在那里.. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:29:10.257

首先，您必须启用错误报告，`E_ALL`因为您不知道出了什么问题。

根据文档：

`setcookie()`

> 如果在调用此函数之前存在输出，则 setcookie() 将失败并返回 FALSE。如果 setcookie() 成功运行，它将返回 TRUE。这并不表示用户是否接受了 cookie。

正确的。它没有。这样您就应该检查浏览器是否可以接受cookies。
好吧，您可以在处理 cookie 之前检查对象的属性`cookieEnabled`。`navigator`例如，

```
<script type="text/javascript">

 if ( ! navigator.cookieEnabled ){
   //Cookies disabled
   //Do something like redirect to error page...
 }

</script>

<?php

// After you fix the problem, set this one to 0
error_reporting(E_ALL);

session_start();

function _setcookie($override = false){

  $key ='categories';
  $val = $_SESSION['categories']; 

  $expire=time()+60*60;

  //Did the one set before?
  if ( isset($_COOKIE[$key]) ){

     if ( $override ){
        //setcookie again here
     }

  } else {

      //Cookie wasn't defined so we'll do define:
      return setcookie($key, $value, $expire);
  }

}

function _getcookie($key){ 
  if ( isset($_COOKIE[$key]) ){
    return $_COOKIE[$key];
  }
  return null;
}

//Will set cookie if it doesn't not exists
_setcookie();

//Should print that key
print getcookie('categories');

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:25:30.347

`$_COOKIE`只会在下一个请求之后填充，而不是在当前请求中。

# c# - 使用 Entity Framework 5 删除多行

> ID：13231032
> 
> 赞同：2
> 
> 时间：2012-11-05T11:19:41.177
> 
> 标签：c#, entity-framework

我试过这段代码：

```
context.Database.ExecuteSqlCommand
("DELETE [MYSCHEMA].TABLE1 Where TABLE2.Id = 5"); 
```

但我得到了这个例外：*无法在 nvarchar 上调用方法。*

目前我使用循环，但我想避免这种情况。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:22:20.260

试试这个

```
context.Database.ExecuteSqlCommand
     ("DELETE [MYSCHEMA].TABLE1 Where TABLE2_Id = 5"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:24:08.493

删除语法是'从表中删除...'

尝试`context.Database.ExecuteSqlCommand("DELETE FROM [MYSCHEMA].TABLE1 Where Table2.Id = 5");`

# javascript - Jquery移动点击并点击

> ID：13231036
> 
> 赞同：1
> 
> 时间：2012-11-05T11:19:49.693
> 
> 标签：javascript, html, jquery-mobile

我的 html 中有一个图像标签。我为该图像注册了两个事件。一个是 onclick，另一个是 jquerymobie 'tabhold'。当“taphold”被触发时，我不想要点击事件。但是当我点击并从该图像中移除我的手指时，点击事件也被触发了。如何限制这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:23:08.803

使用点击事件而不是点击事件。

看看这个[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

# wpf - WPF 调度程序线程

> ID：13231041
> 
> 赞同：0
> 
> 时间：2012-11-05T11:20:09.787
> 
> 标签：wpf, dispatcher

我有一个 WPF 应用程序，它在启动时在一个单独的线程上初始化一个命名管道服务器。
在某个时间点，命名管道客户端将信息发送到该线程，该线程又需要更新 ViewModel 中的 Observable 集合。
尝试直接这样做会导致异常“无法在非调度程序线程上访问这次的集合”（我稍微解释一下错误）。
无论如何，我如何将命名管道线程的处理程序放到 UI 线程上。我似乎没有可以用来调用方法的调度程序对象。我应该在启动时缓存成静态或单例或类似的东西。
DispatcherSynchronizationContext 看起来很有趣，但不确定如何在我的视图中获取一个并将其存储在我的视图模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:36:38.297

您始终可以通过以下方式访问[当前](http://msdn.microsoft.com/en-us/library/system.windows.application.current.aspx)应用程序实例的调度程序

```
var dispatcher = Application.Current.Dispatcher; 
```

一旦你得到这个，你就可以通过[Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)或[BeginInvoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)在 UI 线程上执行操作。

# c# - 将我的 DataContext 存储在会话内存中是个好主意吗？

> ID：13231043
> 
> 赞同：3
> 
> 时间：2012-11-05T11:20:11.057
> 
> 标签：c#, asp.net

我正在编写一个非常简单的 ASP.net 项目。它使用 Linq2Sql DataContext 来访问存储过程。有一个 IDisposable 类在它的构造函数中创建一个新的 DataContext 并在它的 dispose 中处理它。

只要有可能，我就会将以下请求组合在一起：

```
 using(var dc = new MyDataAccessClass())
    {
       //All the data requests in here
    }

    // Do stuff with the data here 
```

所以在整个代码中有很多这样的代码，主要是在 UserControls 中，我只是想在起始页（或母版页）的 PageLoad 中创建单个 DataAccess 类是否有意义，将其存储在 Session内存，并在所有 UserControls 等中引用，然后在 PreRender 阶段将其处理掉。

所以这是我的问题，这是一个坏主意吗？我想这将涉及到数据库的一些悬空连接，因为异常或调试会停止 PreRender 运行。也许检查 MasterPage 的 Load 以查看该会话变量中是否有任何内容并处理它，如果有的话，会对它进行排序。

或者有没有一种更聪明的方法可以在整个页面生命周期中共享 DataContext 而您的 DBA 不想用键盘敲击您？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:36:10.027

Session 很可能不是一个好主意——您必须担心并发性、恢复断开的连接等。此外，在 PreRender 中处理上下文的方法也不是最好的，因为在发生异常的情况下 PreRender 处理程序将永远不会执行。

`System.Web.HttpContext.Current.Items`是 ASP.NET 中唯一仅在单个请求期间处于活动状态的存储，并且在执行过程中在不同线程之间传输 ASP.NET 请求时在极少数情况下进行处理。

您可以使用`Application_EndRequest`global.asax 中的事件来始终正确地处理您的连接（EndRequest 在错误之后也被调用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:25:56.337

在 ASP.NET 中，最好的办法是使用依赖注入框架为每个请求创建一次。

参见例如[https://github.com/ninject/Ninject.Web.Common/wiki/Inrequestscope](https://github.com/ninject/Ninject.Web.Common/wiki/Inrequestscope)

# c - 常量和字符数组的范围

> ID：13231046
> 
> 赞同：2
> 
> 时间：2012-11-05T11:20:23.420
> 
> 标签：c

> **可能重复：**
> [声明具有非常量大小变量的数组](https://stackoverflow.com/questions/3814719/declaring-an-array-with-a-non-constant-size-variable)

这是我的代码：

```
const int xsize=150;
char Hey[xsize]; 
```

我不明白为什么我不能使用上面的常量声明我的新数组嘿。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:25:30.220

它不是有效的 C89 代码。您不能声明具有可变大小的数组，即使该变量恰好是`const`.

`#define`如果您将其作为 a而不是 a ，它将起作用`const int`。不过，它在 C99 中有效。GCC 和其他编译器也将其作为 C89 模式的扩展提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:26:02.040

因为`const`不会创建常量。它创建一个只读对象。

对象和常量的区别在于对象有一个特定的内存位置。常量只存在于源代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:26:17.833

在 C89 中，数组大小应该是一个常量表达式。`const`变量不是常量表达式。为此，您必须使用 C99 中的 VLA。

# javascript - D3 围绕一组圆圈绘制一个外壳

> ID：13231047
> 
> 赞同：7
> 
> 时间：2012-11-05T11:20:24.390
> 
> 标签：javascript, d3.js, force-layout, convex-hull

我想用 d3 围绕一个分组的力有向图构建一个船体。

我已经用圆圈构建了图表。但我现在想用路径（船体）加入圆圈的交叉点。如果不加入交叉点，在这组圆圈周围绘制一个外壳就足够了。我尝试了[带有 Convex Hull](http://bl.ocks.org/2920551)示例的 Force-Directed Layout。但是我有覆盖文本的文本和圆圈以及连接文本的链接。

```
var vertices = new Array();
var width = 960,
    height = 500;
var color = d3.scale.category10();
var r = 6;
var force = d3.layout.force().size([width, height]);
var svg = d3.select("body").append("svg").attr("width", width).attr("height", height).attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
$(function() {

    var json = "{\"nodes\":[{\"name\":\"language\",\"group\":1,\"fontsize\":\"45px\",\"title\":null},{\"name\":\"english\",\"group\":1,\"fontsize\":\"35px\",\"title\":null},{\"name\":\"languages\",\"group\":1,\"fontsize\":\"21px\",\"title\":null},{\"name\":\"speak\",\"group\":1,\"fontsize\":\"16px\",\"title\":null},{\"name\":\"religion\",\"group\":1,\"fontsize\":\"16px\",\"title\":null},{\"name\":\"words\",\"group\":1,\"fontsize\":\"16px\",\"title\":null},{\"name\":\"living\",\"group\":1,\"fontsize\":\"16px\",\"title\":null},{\"name\":\"adobe\",\"group\":2,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"malayalam\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"learn\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"multilanguage\",\"group\":3,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"different\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"sarcasm\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"linkedin\",\"group\":4,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"hindi\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"indesign\",\"group\":5,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"city\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"spanish\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"religious\",\"group\":1,\"fontsize\":\"15px\",\"title\":null},{\"name\":\"real\",\"group\":1,\"fontsize\":\"15px\",\"title\":null}],\"links\":[{\"source\":0,\"target\":1,\"value\":1},{\"source\":0,\"target\":2,\"value\":1},{\"source\":0,\"target\":3,\"value\":1},{\"source\":0,\"target\":4,\"value\":1},{\"source\":0,\"target\":5,\"value\":1},{\"source\":1,\"target\":2,\"value\":1},{\"source\":1,\"target\":3,\"value\":1},{\"source\":1,\"target\":5,\"value\":1},{\"source\":1,\"target\":6,\"value\":1},{\"source\":2,\"target\":3,\"value\":1},{\"source\":2,\"target\":4,\"value\":1},{\"source\":2,\"target\":5,\"value\":1},{\"source\":3,\"target\":5,\"value\":1},{\"source\":3,\"target\":8,\"value\":1},{\"source\":4,\"target\":5,\"value\":1},{\"source\":4,\"target\":6,\"value\":1},{\"source\":4,\"target\":11,\"value\":1},{\"source\":5,\"target\":6,\"value\":1},{\"source\":6,\"target\":2,\"value\":1},{\"source\":6,\"target\":11,\"value\":1},{\"source\":6,\"target\":18,\"value\":1},{\"source\":8,\"target\":0,\"value\":1},{\"source\":8,\"target\":2,\"value\":1},{\"source\":8,\"target\":14,\"value\":1},{\"source\":9,\"target\":0,\"value\":1},{\"source\":9,\"target\":1,\"value\":1},{\"source\":9,\"target\":2,\"value\":1},{\"source\":9,\"target\":3,\"value\":1},{\"source\":9,\"target\":8,\"value\":1},{\"source\":11,\"target\":0,\"value\":1},{\"source\":11,\"target\":1,\"value\":1},{\"source\":11,\"target\":2,\"value\":1},{\"source\":11,\"target\":3,\"value\":1},{\"source\":12,\"target\":0,\"value\":1},{\"source\":12,\"target\":1,\"value\":1},{\"source\":12,\"target\":2,\"value\":1},{\"source\":12,\"target\":3,\"value\":1},{\"source\":12,\"target\":14,\"value\":1},{\"source\":14,\"target\":0,\"value\":1},{\"source\":14,\"target\":1,\"value\":1},{\"source\":14,\"target\":2,\"value\":1},{\"source\":14,\"target\":3,\"value\":1},{\"source\":14,\"target\":5,\"value\":1},{\"source\":16,\"target\":0,\"value\":1},{\"source\":16,\"target\":1,\"value\":1},{\"source\":16,\"target\":2,\"value\":1},{\"source\":16,\"target\":9,\"value\":1},{\"source\":16,\"target\":11,\"value\":1},{\"source\":17,\"target\":0,\"value\":1},{\"source\":17,\"target\":1,\"value\":1},{\"source\":17,\"target\":2,\"value\":1},{\"source\":17,\"target\":3,\"value\":1},{\"source\":18,\"target\":2,\"value\":1},{\"source\":18,\"target\":4,\"value\":1},{\"source\":18,\"target\":5,\"value\":1},{\"source\":18,\"target\":11,\"value\":1},{\"source\":19,\"target\":0,\"value\":1},{\"source\":19,\"target\":1,\"value\":1},{\"source\":19,\"target\":2,\"value\":1},{\"source\":19,\"target\":3,\"value\":1},{\"source\":19,\"target\":5,\"value\":1}]}";

    json = htmlDecode(json);

    json = $.parseJSON(json);

    svg.append("svg:rect").attr("width", width).attr("height", height).style("stroke", "#fff").style("fill", "#fff");

    force.nodes(json.nodes).links(json.links).gravity(0.05).linkDistance(120).charge(-200).start();

    var node = svg.selectAll(".node").data(json.nodes).enter().append("g").attr("class", "node");
    var link = svg.selectAll(".link").data(json.links).enter().append("line").attr("class", "link").style("stroke-opacity", "0.2");

    node.append('circle').attr('r', function(d) {
        var tmprad = parseInt(d.fontsize.replace('px', '')) * (d.name.length / 3);
        if (tmprad > r) r = tmprad;
        return tmprad;
    }).style('fill', '#ffffff').style('stroke', function(d) {
        return color(d.group)
    });

    node.selectAll('text').data(json.nodes).enter().append("text").attr("text-anchor", "middle").attr("dx", 2).attr("dy", ".35em").attr('original-title', function(d) {
        return d.title
    }).attr("style", function(d) {
        return "font-size:" + d.fontsize
    }).text(function(d) {
        return d.name
    }).attr("style", function(d) {
        return "font-size:" + d.fontsize
    }).style('fill', function(d) {
        return color(d.group)
    }).style("cursor", "pointer").call(force.drag);

    var cx = new Array();
    var cy = new Array();

    node.attr("cx", function(d) {
        cx.push(d.x);
    }).attr("cy", function(d) {
        cy.push(d.y);
    });

    cx.forEach(function(o, i) {
        vertices.push(new Array(cx[i], cy[i]));
    });

    var nodes = vertices.map(Object);

    var groups = d3.nest().key(function(d) {
        return d;
    }).entries(nodes);

    var groupPath = function(d) {
        return "M" + d3.geom.hull(d.values.map(function(i) {
            return [i.x, i.y];
        })).join("L") + "Z";
    };

    var groupFill = function(d, i) {
        return color(i & 3);
    };

    svg.style("opacity", 1e-6).transition().duration(1000).style("opacity", 1);

    force.on("tick", function() {    
        link.attr("x1", function(d) {
            return d.source.x;
        }).attr("y1", function(d) {
            return d.source.y;
        }).attr("x2", function(d) {
            return d.target.x;
        }).attr("y2", function(d) {
            return d.target.y;
        });

        node.attr("cx", function(d) {
            return d.x = Math.max(r, Math.min(width - r, d.x));
        }).attr("cy", function(d) {
            return d.y = Math.max(r, Math.min(height - r, d.y));
        });

        node.selectAll('circle').attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")"
        });

        // reposition text
        node.selectAll('text').attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")"
        });
    });
});

function htmlEncode(value) {
    return $('<div/>').text(value).html();
}

function htmlDecode(value) {
    return $('<div/>').html(value).text();
}

function move() {
    vertices[0] = d3.svg.mouse(this);
    update();
}

function click() {
    vertices.push(d3.svg.mouse(this));
    update();
}

function update() {
    svg.selectAll("path")
        .data([d3.geom.hull(vertices)])
        .attr("d", function(d) {
            return "M" + d.join("L") + "Z";
        })
       .enter()
        .append("svg:path")
        .attr("d", function(d) {
            return "M" + d.join("L") + "Z";
        });
    svg.selectAll("nodes")
        .data(vertices.slice(1))
       .enter()
        .append("svg:circle")
        .attr("transform", function(d) {
             return "translate(" + d + ")";
        });
}​ 
```

[您可以在JsFiddle](http://jsfiddle.net/NNwFa/10/)上查看此代码的示例：

![在此处输入图像描述](../Images/3d7a4a68500109700c3324f91d848dec.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T14:10:47.853

我用你的 JsFiddle 玩了一点，最后得到了这个：[JsFiddle Example](http://jsfiddle.net/NNwFa/27/)。

我刚刚添加

```
svg.selectAll("path")
        .data(groups)
        .attr("d", groupPath)
        .enter().insert("path", "g")
        .style("fill", groupFill)
        .style("stroke", groupFill)
        .style("stroke-width", 100)
        .style("stroke-linejoin", "round")
        .style("opacity", .2)
        .attr("d", groupPath); 
```

绘制船体，并稍微调整一下您定义的函数（groupPath，groupFill）。此外，我定义了组来识别图表的不同组。

这是您发布的另一个链接的脏端口，船体没有完全覆盖更大的圆圈。您必须根据圆圈的大小获得具有可变笔画宽度的路径。不知道该怎么做。

不过，您可以稍微调整一下路径的笔划宽度，以使船体更大/更小。

我希望它有所帮助。

编辑：我用一些数学改进了我的例子。[如您在此处](http://jsfiddle.net/NNwFa/44/)看到的，它适用于少量气泡。它仍然是蹩脚/错误的代码（我只是为了好玩），但你可以找到我使用的三角函数。诀窍是让*d3*使用*d3.geom.hull*计算组的外壳，这将返回感兴趣节点的坐标列表。您可以想象在每个角节点处绘制一个大小合适的圆。然后，您必须找到这些圆与连接它们的线段之间的交点。我用一张纸、泰勒斯定理和一点三角函数来计算这些点的坐标。计算在特定情况下有点偏离，但我不知道*d3.geom.hull如何*确实有效，一般d3也没有，所以我帮不了你更多。

# c++ - std::atomic::operator++ 真的按值返回吗？

> ID：13231048
> 
> 赞同：14
> 
> 时间：2012-11-05T11:20:25.903
> 
> 标签：c++, c++11, operator-overloading, atomic, c++-standard-library

根据[这个](http://en.cppreference.com/w/cpp/atomic/atomic/operator_arith)前缀`std::atomic<T>::operator++`返回 a `T`，所以这段代码只增加`v`一次：

```
template<class T> void addTwo(std::atomic<T>& v) {
  ++(++v);
} 
```

此外，`std::atomic<T>::operator=` [显然](http://en.cppreference.com/w/cpp/atomic/atomic/operator%3D)返回 a `T`，因此此代码取消引用一个用于指向临时的无效指针`T`：

```
template<class T>
void setOneThenTwo(std::atomic<T>& v) {
  auto ptr = &(v = 1);
  *ptr = 2;
} 
```

我绝对不是说这些代码模式是好的实践，但是`std::atomic`打破它们对我来说是非常令人惊讶的。我总是期望`operator=`和前缀`operator++`返回对`*this`.

**问题：** cppreference 关于这里的返回类型是否正确，如果是，是否有充分的理由`std::atomic`在这方面与内置类型的行为不同？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T11:36:35.380

如果`operator++`返回一个引用，它将是一个对`std::atomic<T>`not的引用，`T`在这种情况下，您需要做一个额外`load`的操作来获取当前值。

想象一下，你有一个 DBMS，你需要维护一个“自动增量”字段

通过 `operator++`重新调整`T`，您可以做到这一点

```
class AutoIncrement
{
public:
   AutoIncrement() : current (0) {}

   unsigned int next()
   {
      return ++current;
   }

private:
   std::atomic<unsigned int> current;
}; 
```

现在想象`operator++`返回`std::atomic<T>&` 在那种情况下，当你这样做时，`return ++current`它会做两件事

1.  原子读-修改-写
2.  原子负载

它们是两个完全独立的操作。如果您之间的其他线程调用`next`将为您的自动增量字段获得错误的值！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:24:07.530

根据`[C++11: 29.6.5/32]`and `[C++11: 29.6.5/10]`，是的，[cppreference.com](http://en.cppreference.com/w/cpp/atomic/atomic/operator%3D)在这方面是正确的。

我没有资格告诉你为什么。

# jquery-mobile - JQuery Mobile simpledialog 从页面中清除我的动态数据

> ID：13231049
> 
> 赞同：5
> 
> 时间：2012-11-05T11:20:34.490
> 
> 标签：jquery-mobile

JQuery Mobile simpledialog() 从页面中清除我的动态数据。实际上我有一个列表，我正在使用 simpledialog 提示从中删除记录。但这将清除我动态生成的列表，因此我必须重新加载页面才能取回列表。有什么办法可以摆脱这个。

下面是我的代码：

```
$('#Delete').simpledialog({

'mode': 'bool',
'prompt': 'Are you sure to deactivate'?',
'useModal': true,
'buttons': {
    'OK': {
        click: function () {
            $('#dialogoutput').text('OK');
            $.ajax({
                type: 'POST',
                url: deactivateUrl,
                data: { postVar: postDeactivate },
                beforeSend: function () {
                    showPageLoading("De-Activating..");
                },
                success: function (data) {
                    hidePageLoading();
                    if (data = 'true') {
                        notification("Record Deactivated!");
                        location.reload();
                    }
                    else {
                        notification("Deactivation failed.");
                    }
                },
                error: function () {
                    //alert("Error");
                }
            });

        }
    },
    'Cancel': {
        click: function () {
            $('#dialogoutput').text('Cancel');
            location.reload();
        },
        icon: "delete",
        theme: "c"
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T03:42:51.110

你有，

```
if (data = 'true') {
    notification("Record Deactivated!");
    location.reload();
}
else
{
    notification("Deactivation failed.");
} 
```

这个：

```
if (data = 'true') 
```

将**始终**为“真”，因为您使用单个等号将其设置为“真”。

也许你想要：

```
if (data == 'true') 
```

或者

```
if (data === true) 
```

# vhdl - 如何比较整数和 std_logic 向量

> ID：13231050
> 
> 赞同：1
> 
> 时间：2012-11-05T11:20:40.477
> 
> 标签：vhdl

我有一系列信号。当作为“选择器”的信号等于单元格数时，我想写入数组中的适当单元格。为了节省写作和代码行，我在生成循环中生成分配：

```
read_data_signals_gen: for i in 0 to (CAU_num -1) generate

    v_direction_sig(i)(0) <=  DATA_IN when (chosen_flow_sig = i) and (read_state = st_read_v_direction_0) else
                              v_direction_sig(i)(0);
    v_direction_sig(i)(1) <=  DATA_IN when (chosen_flow_sig = i) and (read_state = st_read_v_direction_1) else
                              v_direction_sig(i)(1);
    v_direction_sig(i)(2) <=  DATA_IN when (chosen_flow_sig = i) and (read_state = st_read_v_direction_2) else
                              v_direction_sig(i)
  ...
end generation read_data_signals_gen; 
```

selected_flow_sig 是一个`std_logic_vector (1 downto 0)`and `"00"`，`"01"`，`"10"`或`"11"`表示单元格的数量，并且`CAU_num`是一个`integer`等于 4 的常数。如何在`when`语句中创建比较，以便整数等于其二进制转换？

还有一个相关的问题。有没有办法执行以下代码：

```
type  BitArray is array (natural range <>) of std_logic;

sel_sig : std_logic_vector(0 to 1);
bit_arr : BitArray(0 to 3)

sel_sig <= "00"
bit_arr(sel_sig) <= '1'  -- HOW TO PERFORM THIS? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:40:09.613

您可能正在寻找

`to_integer(unsigned(sel_sig))`

例如

`bit_arr(to_integer(unsigned(sel_sig))) <= '1'`

或者

`if to_integer(unsigned(sel_sig))=12 then ...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:03:53.417

如果`chosen_flow_sig`代表一个数字，请为其使用数字类型（`unsigned`或`integer`例如）。如果你使用`std_logic_vector`你会给自己带来你不需要的痛苦！

[http://parallelpoints.com/node/3](http://parallelpoints.com/node/3)

# qt - 将执行移动到Qt中的另一个线程后如何监听“完成”指示

> ID：13231051
> 
> 赞同：2
> 
> 时间：2012-11-05T11:20:41.680
> 
> 标签：qt, qthread

我有一个非 GUI 操作，我打算在工作线程中执行。经过一番谷歌搜索，我想出了一个简单的方法来实现这[一点](http://qt-project.org/wiki/Threads_Events_QObjects)

特别`QMetaObject::invokeMethod()`适合我。我还注意不要对 QThread 进行子类化，而是对 QObject 进行子类化以创建我的工作对象，然后将该对象的线程亲和性移动到新创建的线程。[（这里](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)有详细描述

现在我的问题：

我将从我的主线程开始对方法进行排队（我想这发生在使用 QEventLoop 的幕后，即使我没有设置一个，即使我没有重新实现`QThread::run()`或调用`QThread::exec()`）我需要找出我的工人什么时候有加工完毕。换句话说，我需要知道 QEventLoop 何时为空。我想我可以为此使用信号finished()。但它似乎不起作用。有人可以阐明如何找出工作线程何时完成执行吗？如果您需要更多信息/代码，请告诉我。

类插件是 QObject 的子类

```
Plugin::Plugin()
{
    m_workerThread = new QThread(this);
    m_workerThread->start(QThread::IdlePriority);
    m_worker = new DataWorker(this);
    connect(m_workerThread, SIGNAL(finished()), m_worker, SLOT(deleteLater()));    
    m_worker->moveToThread(m_workerThread);
} 
```

...

```
Plugin::updateData()
{
....
if( true == QMetaObject::invokeMethod(m_worker, "RunFProcToGetData", Qt::QueuedConnection, Q_ARG(QString, foo)))
            {
                qDebug() << "successfully invoked RunFProcToGetData";
            }
            if( true == QMetaObject::invokeMethod(m_worker, "updateDataIntoDB", Qt::QueuedConnection, Q_ARG(QSqlDatabase, db),                                                Q_ARG(QString, foo)))
            {
                qDebug() << "successfully invoked updateDataIntoDB";
            }
....
} 
```

在数据工作者类中

```
Dataworker::RunProcToGetData(const QString &foo)
{
// invoke a program to get the Data
}

Dataworker::updateDataIntoDB(const QSqlDatabase& db, const QString &foo)
{
// Update database 
} 
```

因此，当没有更多 updateDataIntoDB 和 RunFProcToGetData 需要处理时，我需要一个触发器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T14:57:43.790

您不需要重新实现 QThread::run()，您的代码就可以了。默认 run() 将执行事件循环，并将执行排队的 Dataworker 插槽 (Qt:QueuedConnection)。循环无限执行，直到您使用 thread->quit() 显式停止它。

我建议您将一些通知信号放到 Dataworker 类中，您将从 RunFProcToGetData()、updateDataIntoDB()... 发出这些通知信号，这样您就可以将 updateData() 中最后调用的方法的通知信号连接到所需的插槽（可能在插件中）。该连接也将被排队（如果对象在不同的​​线程中运行，则默认为 Qt:QueuedConnection）。

这样，当 updateData() 中的所有排队方法完成执行时，您将收到通知。您可以多次调用 updateData() ；m_workerThread 将运行排队的 Dataworker 插槽或处于空闲状态。请记住停止线程并等待它在插件的析构函数中完成：

```
Plugin::~Plugin() {
    ...
    m_workerThread_->quit();
    m_workerThread_->wait();
    ...
} 
```

# .net - 如何在 .NET 图表轴上设置标记样式

> ID：13231052
> 
> 赞同：0
> 
> 时间：2012-11-05T11:20:41.767
> 
> 标签：.net, styles, mschart, axes

我需要将 .NET 图表（类 System.Web.UI.DataVisualization.Charting.Chart）的 X 轴和 Y 轴上的点指示为连字符样式的标记。现在 X 和 Y 轴是完全平坦的。

下面是我希望如何设置图表轴样式的图片（截取自另一个图表工具的屏幕截图）： ![在此处输入图像描述](../Images/69b8b3502190befe8b3ca9a77d90ed2f.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:47:47.163

我自己找到了解决方案。这里的关键属性是 MajorTickMark 和 MinorTickMark。例如。

```
chartAreaObject.AxisX.MajorTickMark.Enabled = true;
chartAreaObject.AxisX.MajorTickMark.LineColor = Color.White; 
```

# turing-machines - 设计一个停止的图灵机

> ID：13231054
> 
> 赞同：0
> 
> 时间：2012-11-05T11:20:46.003
> 
> 标签：turing-machines

我被要求设计一个图灵机（使用状态和显式增量函数的老式方法）。要求是：输入是 TM 应该停止的 epsilon（无限个“空白”符号），使用的字母表是 {B, 0, 1}（B 是“空白”符号），最大状态数是 5。

目标是找到一个尽可能多地打印“1”的解决方案。

我的想法：首先打印两个“0”（我可以从2个状态中得到的最大值），然后用“1”替换每个0，并在字符串中添加另一个“1”。如果达到“B”，也更换它。

总共输出六个“1”。

也许有人知道如何获得更多？

**添加**

好的，这个提示归功于赞恩。

根据一些谷歌搜索和维基百科阅读，这正是我/我正在搜索的内容：[http ://www.logique.jussieu.fr/~michel/ha.html#tm43](http://www.logique.jussieu.fr/~michel/ha.html#tm43)

# c# - 如何使用 silverlight mvvm 中的 HyperlinkBut ton 导航到外部 URL

> ID：13231056
> 
> 赞同：0
> 
> 时间：2012-11-05T11:20:52.803
> 
> 标签：c#, silverlight, mvvm

我正在使用带有 mvvm 模式的 Silverlight 5。在 xaml 页面中，我有一个超链接按钮和图像。如果我单击名为“预览”的按钮，则意味着必须在新选项卡浏览器中打开图像或任何文件。

XAML 代码：

```
<Image Source="{Binding Image}"/>
    <HyperlinkButton Content="Preview" Width="60" Height="26"   
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        TargetName="_blank"
        Name="HyperlinkButton"
        Background="Transparent"
        Click="HyperlinkButton_Click">
    </HyperlinkButton> 
```

查看型号代码：

```
void ChooseHyperExecute(object param)
{
    WebBrowser br = new WebBrowser();
    SampleViewModel dt = param as SampleViewModel;

    string ma = dt.String_Value;
    br.Navigate(new Uri(Application.Current.Host.Source, string.Format("./Images/{0}", ma)));

} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:25:59.820

您需要使用[`HtmlWindow.Navigate`](http://msdn.microsoft.com/en-us/library/cc189809%28v=vs.95%29.aspx)方法：

```
void ChooseHyperExecute(object param)
{
    SampleViewModel dt = param as SampleViewModel;
    string ma = dt.String_Value;            
    var externalUri = new Uri(Application.Current.Host.Source, 
        string.Format("./Images/{0}", ma));
    var absoluteUri = new Uri(externalUri, UriKind.Absolute);
    System.Windows.Browser.HtmlPage.Window.Navigate(absoluteUri, "_blank");
} 
```

# javascript - 检查输入值是否与常量值 Jquery 完全匹配

> ID：13231059
> 
> 赞同：2
> 
> 时间：2012-11-05T11:21:00.447
> 
> 标签：javascript, jquery, string, testing

好的，实际上这个问题与此[LINK](https://stackoverflow.com/questions/12892627/test-if-input-values-match-constant-value)相关，但问题是我们要将用户输入中的单词匹配到常量值中。

我的常数是`TAGS = '101 APPLE, 102 BEAR, 103 CAT, 104 DOG'.split(",");`

我的意见是`var input = '101 APPLE'`

我需要检查我的输入变量是否存在于`TAGS`常量中。

希望你们能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:22:59.240

你可以;

```
var found = $.inArray(input, TAGS) > -1; 
```

（您需要删除`,`文字字符串中的空格或在拆分之前替换它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:27:09.400

尝试

```
if(TAGS.indexOf("101 APPLE") > -1){ ... }
or 
if($.inArray("101 APPLE",TAGS) > -1) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:22:44.380

对于跨浏览器解决方案，请参阅[$.inArray()](http://api.jquery.com/jQuery.inArray/)

```
if($.inArray(input,TAGS) > -1) {...} 
```

# java - 网豆 7.2.1。具有嵌入式 Derby 数据库的 Java 应用程序

> ID：13231065
> 
> 赞同：0
> 
> 时间：2012-11-05T11:21:29.680
> 
> 标签：java, database, netbeans, derby

我假装构建一个嵌入了 derby 数据库的 java 应用程序。但是，我无法与我的数据库建立连接。在遵循我在 Internet 上找到的一些教程后，我最终将此代码添加到我的 main 方法中。

```
String dbms = "jdbc:derby:database;create=true";
String uName = "admin";
String uPass= "pass";

Connection con = DriverManager.getConnection(dbms, uName, uPass); 
```

但我收到以下错误：`"No suitable driver found for jdbc:derby...."` 奇怪的是，如果我使用这样的非嵌入式连接：

```
String dbms = "jdbc:derby://localhost:1527/database"; 
```

连接有效。我是否遗漏了一些关于库的文件或其他东西，在一个教程中我发现它说要将“derbyclient.jar”添加到项目的库中，但仍然无法正常工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:34:08.303

如果您使用的是 Derby 的嵌入式版本，那么这`derbyclient.jar`还不够。您需要包含完整的`derby.jar`库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:26:57.120

检查此代码。哟必须创建一个具有任何名称示例 conexionDB 的类，并在该类中放入下一个代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

/**
 *
 * @author programmerhn
 */
public class ConexionDB {

    private Connection con;

    /**
     *
     */
    public void Conectar()
    {
        try
        {
            Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
            con = DriverManager.getConnection("jdbc:derby://localhost:1527/accounts", "username", "password");
             System.out.println("Connection successfully");

        }catch(  ClassNotFoundException | SQLException e)
        {
            System.out.println(e.getMessage());

        }
    }

} 
```

# c# - 对时间序列数据应用数学表达式

> ID：13231068
> 
> 赞同：0
> 
> 时间：2012-11-05T11:21:44.450
> 
> 标签：c#, .net, math, regression, linear-regression

我已经解析了 HL7 文件并生成了一些值。所以现在，随着时间的推移，我有一系列值，用于 HL7 文件的 OBX 段的不同标识符。

现在，根据要求，我想在这个及时生成的数据上应用以下表达式：

`Slope: dv/dt`

`Acceleration: Change in slope over time`

`Integration`

`Bandpass: Filter function that will limit values in particular range`

对于斜率计算，我参考了[http://dynamicnotions.blogspot.in/2009/05/linear-regression-in-c.html](http://dynamicnotions.blogspot.in/2009/05/linear-regression-in-c.html)。我的小代码将简单地计算为 HL7 文件（如 HR、PVC）的一个对象标识符的值生成的图形斜率。我只想知道如何应用所有剩余的表达式。请告诉我是否有任何图书馆可以参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:32:19.453

尝试这些网站进行整合和差异化：

[http://www.mathdotnet.com/](http://www.mathdotnet.com/)

**或者**

[http://www.extremeoptimization.com/](http://www.extremeoptimization.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:02:56.040

请参阅答案[https://stackoverflow.com/a/4362748/380384](https://stackoverflow.com/a/4362748/380384)，使用三次样条拟合解决此问题。

一旦从一组点定义三次样条，就可以使用方法`.GetYp()`和计算任何点的斜率和加速度`.GetYpp()`。也可以使用`.Integrate()`.

# php - 清理提要聚合器的 RSS 提要内容

> ID：13231070
> 
> 赞同：1
> 
> 时间：2012-11-05T11:21:50.600
> 
> 标签：php, javascript, rss, html-encode

我正在用 PHP 构建一个 RSS 提要聚合器/阅读器。由于 RSS 本质上是用户生成的内容，我不想依赖提要内容是安全的。

我正在寻找有关清理提要内容以在用户设备上存储和显示的建议。目前，我正在使用`htmlentities(feed_content)`转义所有字符，但这不起作用，因为它 UTF-8 编码无法在 Javascript 中解码回的字符（我用于前端构造）。

```
- Original: "Soundtrack: Dinosaur Jr. - Don’t Pretend You Didn’t Know I hadn’t thought much..."

- After htmlentities: "Copyright-Infringing Tweets Will Now Be &amp;#8220;Withdrawn&amp;#8221; Instead of &amp;#8220;Disappeared..."

- After JS decodeURI: "Copyright-Infringing Tweets Will Now Be &amp;#8220;Withdrawn&amp;#8221; Instead of &amp;#8220;Disappeared..." 
```

如果我删除上面的 htmlentities，文本会正确显示。但我不确定这是否是确保数据被清理的正确方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:08:09.190

将正确的字符集传递给 htmlencode：

```
echo htmlentities($str, ENT_QUOTES, "UTF-8"); 
```

...但通常没有必要这样做。只需确保设置正确的标头，以便浏览器正确解释为 utf8：

```
header('Content-Type: text/html; charset=utf-8'); 
```

或者如果您使用 json 加载：

```
header('Content-type: application/json; charset=utf-8'); 
```

# python - 无法在python中连接mongodb

> ID：13231071
> 
> 赞同：1
> 
> 时间：2012-11-05T11:21:51.287
> 
> 标签：python, mongodb, pymongo

我无法在此行将服务器上的 mongodb 与 debian 和 python 2.6.6 连接起来：

```
connection = pymongo.Connection('mongodb://localhost', safe = True) 
```

TypeError：**init**（）得到了一个意外的关键字参数“安全”

相同的代码适用于带有 python 2.7.3 的窗口机器。你能解释一下如何纠正这个错误吗？

我在它工作的机器上安装了 pymongo 2.3 版，在它不工作的地方安装了 1.7 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:27:07.933

好像您正在使用不同版本的 pymongo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:30:23.470

确保两台服务器都安装了相同的 pymongo 版本。可能版本不匹配，连接构造函数的参数列表略有不同。

# salesforce - 如何从标准详细信息页面隐藏字段？

> ID：13231072
> 
> 赞同：2
> 
> 时间：2012-11-05T11:21:52.423
> 
> 标签：salesforce, visualforce

在销售队伍中，如果没有覆盖页面，我们可以隐藏标准页面中的字段。我有一个自定义页面，它被添加到页面布局中的一个部分，并且需要从标准页面隐藏自定义页面中显示的那些字段，因为它出现了两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:40:04.317

那么，您总是可以从页面布局中删除它们吗？最初嵌入 VF 页面的位置相同。

请记住，将它们从标准页面布局中删除也会将它们从新/编辑屏幕中删除，不确定这是否是您所追求的。

高级技巧是使用仅在“详细”页面上触发的 Javascript 隐藏它们。我在 5 月写了一些关于它的文章。[我在 SalesForce 上自定义“编辑自定义对象记录”页面布局？](https://stackoverflow.com/questions/11053278/may-i-customize-edit-custom-object-records-page-layout-on-salesforce/13104454)

# vim - vim 如何支持 C/S 模式？

> ID：13231073
> 
> 赞同：0
> 
> 时间：2012-11-05T11:21:53.670
> 
> 标签：vim

我研究过 vim 可以用作客户端/服务器模式软件，其功能是：+clientserver。但这不是我想象的那样。

我想知道是否有办法像 google wave/google doc 一样使用 vim。在这种模式下，我可以同时在两台连接的计算机上编辑一个文件。

+clientserver 可以做到这一点：一个 'vim server' 和许多 'vim client' 连接到它并向它发送编辑命令。但我只能使用'vim --remote-send'来做到这一点，它不是所见即所得，也不方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:54:43.310

你可以试试`tmux`。它支持多个客户端连接到同一个会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:42:29.657

问题是 Vim 可能不是你想象的那样：它与所见即所得完全相反。

您可以通过 SSH 连接到另一台计算机，在该计算机上启动 Vim 并通过您的终端进行编辑。我和很多人每天都这样做：效果*非常*好。

您还可以在机器 A 上使用 Vim 并通过 SCP 在机器 B 上编辑文件。

您还可以深入 tmux 兔子洞并使用它的会话共享功能。以这种方式进行结对编程是非常流行的 ATM。

此外，您的问题对于本网站来说可能过于广泛，请考虑使用 SU。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:52:25.113

协作编辑曾经在[Vim 愿望清单](http://www.vim.org/sponsor/vote_results.php)上排名第 9 ，但不太可能很快到来，因为似乎没有人在努力。如果您想贡献该功能，欢迎您！（但它不会快速和容易地实施！）

> 添加协作编辑：对缓冲区所做的更改会在一秒钟内显示在另一个 Vim 中

# domain-driven-design - 使用域驱动设计的系统架构，域对象应该对所有层都可用吗？

> ID：13231075
> 
> 赞同：0
> 
> 时间：2012-11-05T11:22:01.537
> 
> 标签：domain-driven-design

*   视图可以调用控制器
*   控制器仅与视图和服务层（事务所在的位置）对话
*   服务层有一系列对包装在事务中的域对象的调用
*   域对象包含对 dao 层的调用。
*   dao 层填充域对象并保存数据。

但是我可以在不同的层传递域对象以通过 getter 访问数据，或者我是否必须使用 dto - 一个包含特定于视图/用例的数据的缩减域对象。在层周围传递域对象似乎鼓励打破层只能与指定的其他层对话的规则。但另一方面，这就是 DDD 的意义所在？如果最好从域对象中获取数据并放入 dto，那么控制器应该在哪里进行？

![领域驱动设计，做得对吗](../Images/0c70e8b43b4a0b632803eef118bca9ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:49:10.120

就我个人而言，我总是使用**视图模型**（您的视图的 DTO）。这有助于减少传递给视图的数据量，并避免意外泄露安全数据。

从理论上讲，UI（或多个 UI 或 Web 服务）应该插入您的系统顶部。例如，如果您通过 Web 服务公开您的系统，您可能还希望以某种方式展平和减少数据，而不是创建对您的域实体的依赖（因此您可以在不破坏外部系统的情况下更改它们）并再次不要在您的域实体中公开任何 ID 或敏感数据。

我想这将适用于任何开发实践，而不仅仅是 DDD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:17:59.247

虽然在规范的分层架构中确实应该尽可能地划分事物，但将域实体一直传递到 UI 对我来说似乎是可以接受的，尤其是在表示层和域层位于同一层的简单应用程序中。它只需要 UI 具有对域的引用，这并不令人震惊（反过来实际上会出现问题）。

Mark Seemann 有一篇关于这个问题的有趣想法的[博客文章](http://blog.ploeh.dk/2012/02/09/IsLayeringWorthTheMapping.aspx)，尽管我不同意他的所有观点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:47:24.037

您应该将域放在所有其他层旁边，因为它应该 100% 独立于其他所有层。因此你应该可以在任何地方使用它。

只有当两个或多个不同的根聚合需要交互时，才应使用 DDD 中的服务。

至于事务，为什么不直接用`TransactionScope`在 UI 层呢？它仍然是持久性无知。

我个人直接在 UI 中使用存储库（因为 DDD 中的存储库是数据库抽象）

# c# - Active Directory 组枚举

> ID：13231076
> 
> 赞同：4
> 
> 时间：2012-11-05T11:22:02.750
> 
> 标签：c#, active-directory

我正在使用以下代码查询公司 LDAP 列表。问题是它写出了完整的字符串。除了字符串解析之外，有没有一种简单的方法来写出组名？

```
using System;
using System.Collections.Generic;
using System.DirectoryServices;
using System.Linq;

public class Test
{
    public static void Main()
    {
        string userName = "USER";

        DirectoryEntry directoryEntry = new DirectoryEntry("LDAP://dc=ABC,dc=com");

        DirectorySearcher search = new DirectorySearcher();

        search.Filter = String.Format("(cn={0})", userName);
        search.PropertiesToLoad.Add("memberOf");

        List<string> groupsList = new List<string>();

        SearchResult result = search.FindOne();
        if (result != null)
        {
            int groupCount = result.Properties["memberOf"].Count;

            for (int counter = 0; counter < groupCount; counter++)
            {
                groupsList.Add((string)result.Properties["memberOf"][counter]);
            }
        }

        List<string> list = new List<string>();
        list = groupsList.ToList();

        for (int i = 0; i < list.Count; i++)
        {
            Console.WriteLine(list[i]);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:28:41.083

我认为解决方案比这更容易。

您正在尝试查找用户的组，对吗？

```
private void button1_Click(object sender, EventArgs e)
{
   List<string> userGroups = new List<string>();
   PrincipalContext LdapContext = new PrincipalContext(ContextType.Domain, domainName);
   UserPrincipal user = UserPrincipal.FindByIdentity(LdapContext, userName);

   foreach (var group in user.GetGroups())
   {
       userGroups.Add(group.Name);
   }
} 
```

# c# - 为什么是 app.config 中缺少部分？

> ID：13231086
> 
> 赞同：0
> 
> 时间：2012-11-05T11:22:40.887
> 
> 标签：c#, .net, wcf, app-config, service-reference

我正在尝试使用 WCF 服务。我添加了一个服务参考，现在我正在尝试调用它：

```
BusStopServiceBinding.BusStopPortTypeClient client = new BusStopServiceBinding.BusStopPortTypeClient(); 
```

但是，我收到此错误：

> 在 ServiceModel 客户端配置部分中找不到引用合同“BusStopServiceBinding.BusStopPortType”的默认终结点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我的`app.config`文件如下所示：

```
<?xml version="1.0"?>
<configuration>
<configSections>
</configSections>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
</configuration> 
```

`serviceModel`如您所见，没有部分。我应该手动添加它，如果是的话，我应该在里面放什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:36:35.300

本节用于 WCF 配置。在 Visual Studio 的“工具”部分中，您有一个“WCF 服务配置编辑器”，可帮助您创建此部分。如果您没有此部分，则必须在代码中对其进行配置，但这不是最佳做法。在本节中，您必须放置端点、安全设置、绑定、wcf 合同……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:47:43.300

如果您将服务引用添加到库，而不是主项目（exe 或 Web 应用程序等），则必要的添加（通过 Visual Studio 工具）将添加到`app.config`库项目内部，而不是在你的主要项目。

但是，在运行时，只`app.config`使用主项目的，因此您需要将`app.config`库中（无用的）中的相关部分复制到主项目的部分中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-28T13:20:50.170

我遇到了同样的错误，Damien_The_Unbeliever 的回答帮助我理解 && 解决了我的问题：“但是，在运行时，只使用了主项目的 app.config”。
我在一个类库项目中有我的 wsdl 代理。尽管我的 UnitTest 项目能够从该类库的 app.config 中读取，但在运行时该类库的 app.config 变得无关紧要。

我的解决方案是为自动生成的客户端类创建一个部分类，并依赖从代码配置的 System.ServiceModel，而不是从谁知道 app.config 中读取它：

```
public partial class WsdlClient 
    {
        public WsdlClient (string endpointUrl, TimeSpan timeout, string username, string password) :
            base(WsdlClient.GetBindingForEndpoint(timeout), WsdlClient.GetEndpointAddress(endpointUrl))
        {
            this.ChannelFactory.Credentials.UserName.UserName = username;
            this.ChannelFactory.Credentials.UserName.Password = password;           
        }

        private static System.ServiceModel.Channels.Binding GetBindingForEndpoint(TimeSpan timeout)
        {
            var httpsBinding = new BasicHttpsBinding();
            httpsBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;
            httpsBinding.Security.Mode = BasicHttpsSecurityMode.Transport;

            var integerMaxValue = int.MaxValue;
            httpsBinding.MaxBufferSize = integerMaxValue;
            httpsBinding.MaxReceivedMessageSize = integerMaxValue;
            httpsBinding.ReaderQuotas = System.Xml.XmlDictionaryReaderQuotas.Max;
            httpsBinding.AllowCookies = true;

            httpsBinding.ReceiveTimeout = timeout;
            httpsBinding.SendTimeout = timeout;
            httpsBinding.OpenTimeout = timeout;
            httpsBinding.CloseTimeout = timeout;

            return httpsBinding;
        }

        private static System.ServiceModel.EndpointAddress GetEndpointAddress(string endpointUrl)
        {
            if (!endpointUrl.StartsWith("https://"))
            {
                throw new UriFormatException("The endpoint URL must start with https://.");
            }
            return new System.ServiceModel.EndpointAddress(endpointUrl);
        }
    } 
```

* * *

```
WsdlClient MyWsdlClient =>
            new WsdlClient (ConfigurationManager.AppSettings["endpointUrl"]
                , new TimeSpan(0, 0, 1, 0),
                "blabla",
                "blabla"); 
```

# algorithm - 可以在有多个目标节点的情况下使用双向搜索吗？

> ID：13231090
> 
> 赞同：2
> 
> 时间：2012-11-05T11:22:42.550
> 
> 标签：algorithm, search, data-structures, bidirectional

如果我希望对具有单个起始节点但多个目标节点的某种数据结构进行搜索，我还可以使用双向搜索算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:33:54.430

为什么不？你可以这样想——添加一个辅助的不存在节点，连接到所有距离为零的目标节点，然后在开始节点和新节点之间进行双向搜索。

当然，您实际上并不需要添加此节点，这只是为了说明这个想法。

# jquery - 如果父元素包含元素，则向元素添加类

> ID：13231093
> 
> 赞同：2
> 
> 时间：2012-11-05T11:22:48.723
> 
> 标签：jquery, jquery-selectors

如果父元素（class =“container”）在其中包含一个元素（class =“sub-cat”），我必须在它的点击事件上向一个元素（h2）添加一个类。[小提琴链接](http://jsfiddle.net/gSCQ7/5/)

```
$('.container h2').click(function(){
//alert('hi');
if($(this).has(".sub-cat")){
    $('.container h2').addClass(highlight);
}
else if () {
    $('.container h2').removeClass(highlight);
} 
```

});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:29:26.490

当你使用 click 然后`this`引用你点击的 h2 ，使用`.parent()`to （或 .closest('.container') 然后使用你的查找：

[http://jsfiddle.net/gSCQ7/7/](http://jsfiddle.net/gSCQ7/7/)

```
var highlight = "highlight";

$('.container h2').click(function(){
    var hasSubCategorys = $(this).parent().find(".sub-cat").length > 0;
    $(this)[hasSubCategorys  ? 'addClass' : 'removeClass'](highlight);
}); 
```

或者，如果您希望它更具可读性：

```
var highlight = "highlight";

$('.container h2').click(function(){
    var hasSubCategorys = $(this).parent().find(".sub-cat").length > 0;
    if(hasSubCategorys) {
        $(this).addClass(highlight);
    } else {
        $(this).removeClass(highlight);
    }
}); 
```

编辑： http: [//jsfiddle.net/gSCQ7/10/](http://jsfiddle.net/gSCQ7/10/)将 CSS 代码更改为比`.container h2`vs更具体`.hightlight`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:54:44.690

```
$('.container h2').click(function(){
    if ($(this).closest('.container').find('.sub-cat').length) {
        $(this).addClass('highlight');
    } else {
        $(this).removeClass('highlight');
    }
});​ 
```

单击 h2 元素时，使用`closest()`向上遍历 DOM 树并找到第一个具有类 'container' 的父元素，然后使用`find()`向下遍历 DOM 找到具有类 'sub-cat' 的元素。如果找到 '.sub-cat' 元素`length`（

[树遍历的 jQuery 文档](http://api.jquery.com/category/traversing/tree-traversal/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:28:24.603

尝试

```
if( $(this).parent().find(".sub-cat").length > 0 ) {
  ...
} 
```

或者

```
if( $(this).closest(".container").find(".sub-cat").length > 0 ) {
  ...
} 
```

# python - 使用 Redis for Python 处理海量数据，但 Redis 服务器总是关闭。

> ID：13231095
> 
> 赞同：0
> 
> 时间：2012-11-05T11:22:55.237
> 
> 标签：python, redis

我想在我的 Redis 服务器上打开 DB0，处理其中的数据，然后写入 DB1。DB0 中有大约 300 万个键。为了减少硬盘操作，我使用“CONFIG SET save "300 10000"”让服务器每5分钟写入一次磁盘。这是我的代码：

 *```
 import redis

    idLinkoutIds = redis.Redis(host='127.0.0.1', port=6379, db=0)
    idLinkinIds = redis.Redis(host='127.0.0.1', port=6379, db=1)

    i = 0
    allKeys = idLinkoutIds.keys() # There're 3,228,675 keys.

    for key in allKeys:
        if i % 100000 == 0:
            print str(i / 10000) + ' million ids completet'
        i += 1

        linkOutIds = idLinkoutIds.lrange(key, start=0, end=-1)
        for eachKey in linkOutIds:
            idLinkinIds.lpush(eachKey, key) # Write to DB1
        idLinkoutIds.delete(key) # DB0 is useless, I just need DB1

    idLinkoutIds.save()      
    idLinkinIds.save()

    print 'Done' 
```* 

*当处理 100 万个密钥时，Redis 服务器刚刚关闭，我收到“ConnectionError: Error 10061 connected 127.0.0.1:6379”。然后我删除 idLinkoutIds.delete(key) 只是为了尝试，并在处理 80 万个密钥时再次关闭服务器。*

 *我认为这不是硬件原因，因为我使用的是 64 位操作系统和 8G RAM。所以我真的很困惑。服务器刚刚关闭。谁能给我一个方向。*

# silverlight - 如何在 Silverlight 应用程序中获取 (ScriptObject)HtmlPage.Window.GetProperty(“Xrm”) 嵌入到 CRM 中的 HTML 页面

> ID：13231098
> 
> 赞同：1
> 
> 时间：2012-11-05T11:23:01.633
> 
> 标签：silverlight, dynamics-crm-2011, guid, dynamics-crm-online

我在 CRM 的 Silverlight 应用程序中使用以下代码获取记录指南。

```
 dynamic xrmnew = (ScriptObject)HtmlPage.Window.GetProperty("Xrm");
 Guid Id1 = new Guid(xrmnew.Page.data.entity.getId());
 textBox2.Text = Id1.ToString(); 
```

很好，我使用上面的代码从 Silverlight 应用程序获得了记录的 Guid。但是如果我在 HTML 页面中部署这个 Silverlight 页面，然后尝试使用上面的代码获取记录的 Guid，那么它无法获取 Guid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:40:38.493

经过大量的努力我终于得到了答案

```
dynamic xrmnew = (ScriptObject)HtmlPage.Window.GetProperty("Xrm");
if (xrmnew == null)
{
    HtmlWindow parentWindow = HtmlPage.Window.GetProperty("parent") as HtmlWindow;
    xrmnew = (ScriptObject)parentWindow.GetProperty("Xrm");
}
Guid Id = new Guid(xrmnew.Page.data.entity.getId()); 
```

# c - C语言中UDP的发送和接收

> ID：13231101
> 
> 赞同：0
> 
> 时间：2012-11-05T11:23:03.660
> 
> 标签：c

我在 ActClientSender 中面临的问题是当我发送它在 ActServerReceiver 接收的消息时，当我在 ActSeverSender 中发送消息时它自己接收消息。

结构发送*s=（结构发送*）索引；在这里，我从 ActServerReceiver 获取端口号和 sock_des

这是我的代码：

```
void *ActServerSender(void *index)
{
    char msg[200];
    struct sockaddr_in serv_addr;
    int sock_des = socket(PF_INET,SOCK_DGRAM,0);
    struct Sending *s=(struct Sending*)index;
    serv_addr=s->serv_addr;
    sock_des=s->sock_des;
    printf("%d sock des",sock_des);
    int sockaddr_len = sizeof(serv_addr);

    printf("%d sock des",sock_des);

    while(1)
    {
        int count=0;
        printf("Enter Your Message\n");
        while (scanf("%c", &msg[count]) )
        {
            if(msg[count]=='\n')
                break;
            count++;
        }
        msg[count]='\0';
        printf("This message is send:%s\n",msg);
        sendto (sock_des, msg, 200, 0, (struct sockaddr*)&serv_addr, sizeof(serv_addr));
    }
}

void *ActsenderSender(void *index)
{   
    char msg[200];  
    struct sockaddr_in serv_addr;
    int sock_des = socket(PF_INET,SOCK_DGRAM,0);
    struct Sending *s=(struct Sending*)index;
    serv_addr=s->serv_addr;
    sock_des=s->sock_des;

    int sockaddr_len = sizeof(serv_addr);
    while(1)
    {
        printf("yahoooooooooooo!\n");   
        recvfrom(sock_des, msg, 200, 0, (struct sockaddr *)&serv_addr, &sockaddr_len);
        printf("Message Received %s\n",msg);
        fflush(stdout);
    }   
}

void *ActSenderReceiver(void *port)
{   
    pthread_t ActsenderSend;
    int portno=(int)port;
    printf("Your Port%d\n",portno);
    char msg[200];
    struct Sending s;
    struct sockaddr_in serv_addr;
    int sock_des = socket (AF_INET,SOCK_DGRAM,0);
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons (portno);
    serv_addr.sin_addr.s_addr = inet_addr ("127.0.0.1");
    s.serv_addr=serv_addr;
    s.sock_des=sock_des;
    s.port=portno;

    int j=0;
    while(1)
    {
        if(j==2)
        {
            pthread_create( &ActsenderSend , NULL , ActsenderSender , (void*) &s);
        }
        int count=0;
        printf("Enter Your Message or say Bye to leave the chat\n");
        while (scanf("%c", &msg[count]) )
        {
            if(msg[count]=='\n')
                break;
            count++;
        }

        msg[count]='\0';
        printf("This message is send:%s\n",msg);
        if(strcmp(msg,"Bye")==0)
        {
            clientSender=1;
        }
        sendto (sock_des, msg, 200, 0, (struct sockaddr*)&serv_addr, sizeof(serv_addr));
        j++;
    }
}

void *ActAsAServerReceive(void *index)
{
    char msg[200];
    int portno=(int)index;
    //UDP Connection
    pthread_t ActServerSend;
    struct Sending s;
    printf("Your Port%d\n",portno);
    struct sockaddr_in serv_addr;
    int sock_des = socket(PF_INET,SOCK_DGRAM,0);

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(portno);
    serv_addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    bind(sock_des,(struct sockaddr*)&serv_addr,sizeof(serv_addr));
    int sockaddr_len = sizeof(serv_addr);
    s.serv_addr=serv_addr;
    s.sock_des=sock_des;
    s.port=portno;
    int count=0;
    while(1)
    {
        if(count==2)
        {
            pthread_create( &ActServerSend , NULL , ActServerSender , (void*) &s);
            //pthread_join(ActServerSend, NULL);    
        }   
        recvfrom(sock_des, msg, 200, 0, (struct sockaddr *)&serv_addr, &sockaddr_len);
        printf("Message Received%s\n",msg);
        fflush(stdout);
        count++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:35:24.450

查看 ActSeverSender 中的端口号，端口号应为客户端监听端口号。我认为在您的情况下，端口号设置为服务器的侦听端口号，因此 ActSeverSender 中的发送消息正在接收消息给自己。

# c# - 尝试使用远程字段验证

> ID：13231102
> 
> 赞同：1
> 
> 时间：2012-11-05T11:23:05.830
> 
> 标签：c#, asp.net-mvc-4, validation

我只是第一次尝试使这项工作：http: [//msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)

在我的模型中，我有

```
 [Remote("RequireName", "Contact")]
    [Editable(true)]
    public string Name { get; set; } 
```

在我的控制器中，我有

```
public JsonResult RequireName(string Name)
    {
        bool resultbool = ((Name != null) && (Name.Length > 0));
        return this.Json(resultbool ? "OK." : "Not OK.", JsonRequestBehavior.AllowGet);
    } 
```

（我现在不关心它的结果消息。）

在我生成的 HTML 中，我有：

```
<input type="text" value="" name="Name" id="Name" data-val-remote-url="/[mysite]/Contact/RequireName" data-val-remote-additionalfields="*.Name" data-val-remote="'Name' is invalid." data-val="true" class="text-box single-line"> 
```

URL http://localhost/[mysite]/Contact/RequireName 返回“Not OK.”，这是正确的。URL http://localhost/[mysite]/Contact/RequireName?Name=something 返回“OK.”，这是正确的。

但是当我编辑该字段时，甚至当我提交完整的表单时，验证都不会发生。我确定我错过了一些东西。如果你能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:12:33.527

在互联网上搜索了一些之后，我了解到我必须包含“jquery.validate.min.js”和“jquery.validate.unobtrusive.js”。听起来很基础，但我还不知道。

# c++ - 插入 std::map 时的常量问题

> ID：13231103
> 
> 赞同：2
> 
> 时间：2012-11-05T11:23:05.453
> 
> 标签：c++, constants, stdmap, visual-c++-2012

我在尝试将一对插入地图时遇到了一个常量问题。编译器错误是：

```
 c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility(2089) : see reference to function template instantiation 'std::pair<_Ty1,_Ty2> &std::pair<_Ty1,_Ty2>::operator =(const std::pair<_Ty1,_Ty2> &)' being compiled
1>          with
1>          [
1>              _Ty1=const Assets::AssetId,
1>              _Ty2=std::shared_ptr<Assets::Material>
1>          ]
1>          c:\fusionengine\meshgl.cpp(85) : see reference to class template instantiation 'std::pair<_Ty1,_Ty2>' being compiled
1>          with
1>          [
1>              _Ty1=const Assets::AssetId,
1>              _Ty2=std::shared_ptr<Assets::Material>
1>          ] 
```

导致错误的行是：

```
m_materials.insert( MaterialsMap::value_type(pMaterial->AssetId(), pMaterial) ); 
```

m_materials 贴图声明如下：

```
typedef std::map< Assets::AssetId, std::shared_ptr<Material> > MaterialsMap;    
typedef std::pair< Assets::AssetId, std::shared_ptr<Material> > MtlPair;

MaterialsMap  m_materials; 
```

错误 1 ​​错误 C2166: l-value 指定 const 对象 c:\program files (x86)\microsoft visual studio 11.0\vc\include\utility 114

谁能解释我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:52:38.953

我在这个问题上扯了我的头发，我可能花了一个星期的时间。幸运的是，它对项目路线图并不重要，因此并没有阻止继续进行。

该问题与编译器无关，尽管错误报告可能与增强有关，尽管我意识到这一直是模板（和 STL）代码的问题。

所以我有一个 std::copy 在我的 operator= 重载中将一个地图的内容复制到另一个地图。我几乎不知道这是一个禁忌。

为了隔离问题区域，我最终通过逐行和逐个函数地重新构建整个类来发现这一点。

然后通过检查问题区域和谷歌搜索，stackoverflow 来拯救这个[问题和答案](https://stackoverflow.com/questions/2748295/how-can-i-copy-one-map-into-another-using-stdcopy)。

虽然下面的语句是非法的，但它并没有在 VS2012 IDE 中突出显示为错误，编译器也没有将其识别为问题语句。

```
std::copy( map1.begin(), map1.end(), map2.begin() ); 
```

正如之前突出显示的 SO 答案所述，正确的方法是使用插入语句：

```
map2.insert( map1.begin(), map1.end() ); 
```

我希望这可以帮助那里的人:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:34:51.090

这段代码[可以用 GCC 很好地编译](http://ideone.com/HkF0YC)：

```
#include <map>
#include <memory>
using namespace std;

typedef int AssetId;
struct Material {
    int _id;
    Material(int id) : _id(id) {}
    int AssetId() const { return _id; }
};
typedef std::map< AssetId, std::shared_ptr<Material> > MaterialsMap;    

MaterialsMap  m_materials;

int main() {
    std::shared_ptr<Material> pMaterial(new Material(42));
    m_materials.insert( MaterialsMap::value_type(pMaterial->AssetId(), pMaterial) );
} 
```

您的示例不完整或错误，或者这是 MSVC2012 标准库的实现中的错误。它*不应*调用`operator=`上述代码。

# c# - C#事件调用列表过滤

> ID：13231109
> 
> 赞同：5
> 
> 时间：2012-11-05T11:23:25.313
> 
> 标签：c#, events

我在 C# 中有一个事件。有五个订阅者。所有订阅者都是不同的类别。但是在引发事件时，我希望不是所有的订阅者/处理程序都应该被通知来处理这个事件。我应该有一些过滤机制，然后只通知剩余的订阅者。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:49:30.833

如果你想用你现有的来做，那么只需遍历事件的调用列表。

```
var list = localHandler.GetInvocationList();
foreach (EventHandler<T> item in list)
{
    if(((ICanDoThing)item.Target).CanDoThing)
    {
        item(this, someArgs);
    }
 } 
```

现在，您可以看到我已将 item.Target 转换为 ICanDoThing 类型，这是我刚刚编写的一个接口，它公开了一个方法“CanDoThing”。这允许您查询对象是否支持您的特定需求。

您可能应该质疑是否应该为此使用事件，但上面将允许您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:24:37.500

我认为您在这里需要多个事件，以便订阅者可以订阅他们真正想要的事件。

> 订阅活动意味着您对活动感兴趣。如果您对某个事件不感兴趣，则不应订阅它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:27:03.143

您可以使用此处描述的观察者模式：http: [//www.dofactory.com/Patterns/PatternObserver.aspx](http://www.dofactory.com/Patterns/PatternObserver.aspx)并在观察者的更新方法中实现您的逻辑。

# php - 这会影响速度还是我应该使用正常的显示图像方法

> ID：13231110
> 
> 赞同：0
> 
> 时间：2012-11-05T11:23:26.650
> 
> 标签：php, image

我正在显示`readfile()`php 的图像使用功能

HMTL：

```
<img src='image.php?id=232'/> 
```

PHP：图像.php

```
<?php
   $id=$_GET["id"];
   if(image_view_allow($id)){
     $path=get_image_path($id);
     readfile($path);
   }else{
     readfile("images/not_allow.png");
   } 
```

`image_view_allow`并且`get_image_path`是我定义的两个，用于检查验证并获取我这样做的路径，因为我只想向允许的人显示图像。

这会影响下载图像的速度吗？什么是正常的（表示 img 标签的 src 属性中的直接路径）或上面显示的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:44:14.720

只是加载图像可能相同，但如果您使用**php**处理图像总是更好，因为当您使用 php 调整图像大小时，您会加载所需的大小。但是使用**html**，您加载的大小比您需要的更大并调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:26:19.900

首先->这会影响下载图像的速度吗？答：不，因为在页面加载时，php代码在页面加载到浏览器之前就已经翻译成html了。

第二个->什么是正常的（意味着img标签的src属性中的直接路径）或上面显示的技巧？回答：两者都一样，都涉及php代码。当代码以任何一种方式执行时，它都会在图像标签中输入图像的来源。

# java - 如何将类型传递给func

> ID：13231114
> 
> 赞同：0
> 
> 时间：2012-11-05T11:23:41.733
> 
> 标签：java

情况如下：

```
interface A{}//interface for entities
class B implements A{}//entity B 
class C implements A{}//entity C 

abstract class AR<E extends A>{}//generate list of E via a file,this will be done after the construct func.
class BR extends AR<B>{}
class CR extends AR<C>{} 
```

现在我要维护： `Map<String,List<A>> data;//<filepath+filename, list of entities in file>`

功能。blow 将根据 fileAddr 返回列表：

```
<E extends A,R extends AR<E>> List<A> getList(String fileAddr)
{
 if(data.containsKey(fileAddr))
  return data.get(fileAddr);
 else
 {
  AR<E> reader=new R(fileAddr);//generate a list of E via this file
  List<E> values=reader.getValues();
  data.put(fileAddr,values);
  return values;
 }
} 
```

但这不起作用，并且`new R(fileAddr)`不受支持。

那么如何实现 getList() 函数。基于规范。多于。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:43:30.307

该行应替换为实际的类，例如：

```
AR<E> reader=new BR(fileAddr); //or AR<B> 
```

或者：

```
AR<E> reader=new CR(fileAddr); //or AR<C> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:50:58.397

您不能用于`new`生成类型参数的实例。技术原因是类型信息在执行时已被删除`getList`。无论如何，Java 语言不允许这样做。

解决该问题的一种方法是传入一个可以创建所需实例的工厂对象。

另一种解决方法是将参数类型的`Class`对象作为参数传递，然后反射地创建实例；例如这样的：

```
<E extends A,R extends AR<E>> List<A> getList(String fileAddr, Class<R> rClass)
{
 if(data.containsKey(fileAddr))
  return data.get(fileAddr);
 else
 {
  Constructor<R> ctor = rClass.getConstructor(String.class);
  R reader=ctor.newInstance(fileAddr);
  List<E> values=reader.getValues();
  data.put(fileAddr,values);
  return values;
 }
} 
```

（会有一堆异常需要处理……）

# ruby-on-rails - Rails 和 Recurly 信用卡表格未更新到期月份和年份信息

> ID：13231115
> 
> 赞同：0
> 
> 时间：2012-11-05T11:23:43.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, recurly

我正在创建一个表单来与 Recurly on Rails 交互。

我有这种观点和这种形式：

```
<h1><%= t('payments.edit') %> </h1>

<%= render(:partial => 'shared/new_recurly_form', :locals => {:success_url => "#{APP_URL}#{users_credit_card_path}"}) %>

<%= semantic_form_for current_user, :url => users_credit_card_path, :html => {:method => :put, :class => 'credit_card'} do |form| %>

    <%= form.inputs do %>
      <div class="field">
        <%= form.label :name %>
        <%= form.text_field :name %>
      </div>  
      <div class="field">
        <%= form.label :first_surname %>
        <%= form.text_field :surnames %>
      </div>  
      <div class="field">
          <%= label_tag :number, "Credit Card Number " %>
          <%= text_field_tag :number %>
      </div>
      <div class="field">
          <%= label_tag :verification_value, "Security Code on Card (CVV)" %>
          <%= text_field_tag :verification_value %>
      </div>
      <div class="field">
      <%= label_tag :month, "Expiration month" %>
      <%= select_month(Date.today, :use_month_numbers => true) %>
      </div>
      <div class="field">
      <%= label_tag :year, "Expiration year" %>
      <%= select_year(Date.today, :start_year => Time.now.year, :end_year => Time.now.year + 20) %>
      </div>
    <% end %>

  <%= form.buttons do %>
    <%= form.commit_button  t('confirm') %>
  <% end %>

<% end %> 
```

及其各自的控制器 credit_card_controller.rb

```
class Users::CreditCardsController < ApplicationController

  skip_before_filter :check_deactivated_user
  protect_from_forgery :except => :create

  def create
    update
  end

  def edit
    @user = current_user
    @price_plan = current_user.price_plans.active.first
  end

  def update
    begin
        update_new_recurly_subscription
    rescue Exceptions::RecurlyAccountCreateInvalidAccountException => e
        puts "CreditCardsController Exceptions::RecurlyAccountCreateInvalidAccountException"
        puts e.message
    rescue Recurly::Resource::NotFound => e
        puts "CreditCardsController Recurly::Resource::NotFound Creating new account for user"  
        puts e.message  
        begin
            create_new_recurly_account
            create_new_recurly_subscription         
        rescue Exceptions::RecurlyAccountCreateInvalidAccountException => e
            puts "CreditCardsController inside find Recurly::Resource::NotFound"
            puts e.message
            update_new_recurly_account
            create_new_recurly_subscription
        end 
    end

    account = update_account_billing_info
    account.billing_info = {
        :first_name         => current_user.name,
        :last_name          => "#{current_user.surnames}",
        :number             => params[:number],
        :verification_value => params[:verification_value],
        :month              => params[:month],
        :year               => params[:year]
    }
    puts "Users::CreditCardsController update Billing info: #{account.billing_info.inspect}"
    account.billing_info.save
    if current_user.credit_card_store!(account.billing_info)
      if current_user.is_debtor?
        flash[:alert] = t('flash.price_plans.payed_after_unpay')
        render :edit
      else
        flash[:alert] = t('flash.credit_card.update.success')
        render :success
      end

    else
      flash[:failure] = t('flash.credit_card.update.failure')
      render :edit
    end

  end

end 
```

当我更新表格时，使用前控制器上的更新功能，我可以更改信用卡号，但我无法更改到期月份和到期年份。

我在这里想念什么？为什么我可以更改信用卡号而不是与 Recurly 交互的月份和年份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:47:51.050

您正在提取不正确的参数（nil 值）。根据您的日志，尝试：

```
account.billing_info = {
    ...
    :month              => params[:date][:month],
    :year               => params[:date][:year]
} 
```

对应于`"date"=>{"month"=>"7", "year"=>"2017"}`

# javascript - 为什么我不能在 jQuery 中使用它的 class 和 data-test 属性来选择一个？

> ID：13231119
> 
> 赞同：4
> 
> 时间：2012-11-05T11:23:53.567
> 
> 标签：javascript, jquery, html

```
<table>
    <tr>
        <td class="ok" data-test="12-12 00">xxx</td>
        <td class="ok" data-test="13-12 00">xxx</td>
        <td class="ok" data-test="14-12 00">xxx</td>
        <td class="ok" data-test="15-12 00">xxx</td>
    </tr>
</table> 
```

我想得到`<td>`where `data-test`= `"14-12 00"`。这是我的代码：

```
alert($('td .ok[data-test="14-12 00"]').text());​ 
```

为什么这不起作用？

[http://jsfiddle.net/LqD5h/](http://jsfiddle.net/LqD5h/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T11:25:33.580

尝试：

```
alert($('td.ok[data-test="14-12 00"]').text());​ 
```

`td`（注意和之间没有空格`.ok`）。

您最初试图选择所有具有类名的元素，这些元素`ok`是 a 的后代`td`并具有特定`data-test`值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:52:54.707

用另一种方法给这只猫剥皮怎么样？

```
alert($('tr .ok[data-test="14-12 00"]').text());​ 
```

注意，`td`改为`tr`. :-)

# javascript - 自动打开默认电子邮件客户端并预填充内容

> ID：13231125
> 
> 赞同：93
> 
> 时间：2012-11-05T11:24:28.100
> 
> 标签：javascript, mailto

当他们在页面上保存一些内容时，我需要自动打开用户的默认电子邮件客户端。我需要填充电子邮件主题、地址并将一些内容放入电子邮件正文中。

实现这一目标的最佳选择是什么？

我知道该`mailto:`属性，但用户必须单击它，我不确定它是否允许您指定主题和内容？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-11-05T11:27:51.613

如[RFC 6068](https://www.rfc-editor.org/rfc/rfc6068)所述，mailto 允许您指定*subject*和*body*以及*cc*字段。例如：

```
mailto:username@example.com?subject=Subject&body=message%20goes%20here 
```

[如果您强制使用 JavaScript 打开](https://stackoverflow.com/questions/3868315/invoke-click-a-mailto-link-with-jquery-javascript)链接，则用户无需单击链接

```
window.location.href = "mailto:user@example.com?subject=Subject&body=message%20goes%20here"; 
```

请注意，浏览器/电子邮件客户端没有单一的标准方式来处理 mailto 链接（例如，主题和正文字段可能会在没有警告的情况下被丢弃）。还有一个风险是弹出窗口和广告拦截器、防病毒软件等可能会默默地阻止强制打开 mailto 链接。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-24T11:48:32.470

**查询：**

```
$(function () {
      $('.SendEmail').click(function (event) {
        var email = 'sample@gmail.com';
        var subject = 'Test';
        var emailBody = 'Hi Sample,';
        var attach = 'path';
        document.location = "mailto:"+email+"?subject="+subject+"&body="+emailBody+
            "?attach="+attach;
      });
    }); 
```

**HTML：**

```
 <button class="SendEmail">Send Email</button> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-18T17:09:38.717

在不使用 Jquery 的情况下以这种方式实现：

```
<button class="emailReplyButton" onClick="sendEmail(message)">Reply</button>

sendEmail(message) {
    var email = message.emailId;
    var subject = message.subject;
    var emailBody = 'Hi '+message.from;
    document.location = "mailto:"+email+"?subject="+subject+"&body="+emailBody;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-05T09:36:51.067

**试试这个：** 它将直接打开默认邮件。

```
<a href="mailto:demo@demo.com"><img src="ICON2.png"></a> 
```

# ubuntu - 升级 Ubuntu / Redmine 时问题已损坏

> ID：13231129
> 
> 赞同：3
> 
> 时间：2012-11-05T11:24:33.243
> 
> 标签：ubuntu, ubuntu-12.04, redmine

我已将系统从 Ubuntu 10.04 升级到 Ubuntu 12.04。在此过程中，redmine 已升级。在 10.04 中我使用的是 PPA ppa:ondrej/redmine，在 12.04 中我使用的是 Ubuntu 库存版本 (1.3.2+dfsg1-1ubuntu1)

大多数问题仍然存在，但我有一个特定问题的问题：它没有列出，直接访问它（我有链接书签）在日志中引发错误：

```
Processing IssuesController#show (for AA.BB.CC.DD at 2012-10-19 11:19:24) [GET]
  Parameters: {"action"=>"show", "controller"=>"issues", "id"=>"93"}

ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'WorkflowTransition'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Workflow.inheritance_column to use another column for that information.):
  /usr/lib/ruby/vendor_ruby/active_record/base.rb:1671:in `instantiate'
  /usr/lib/ruby/vendor_ruby/active_record/base.rb:665:in `find_by_sql'
  /usr/lib/ruby/vendor_ruby/active_record/base.rb:665:in `collect!'
  /usr/lib/ruby/vendor_ruby/active_record/base.rb:665:in `find_by_sql'
  /usr/lib/ruby/vendor_ruby/active_record/base.rb:1582:in `find_every'
  /usr/lib/ruby/vendor_ruby/active_record/base.rb:619:in `find'
  /usr/lib/ruby/vendor_ruby/active_record/associations/association_collection.rb:60:in `find'
  app/models/issue_status.rb:78:in `find_new_statuses_allowed_to'
  /usr/lib/ruby/vendor_ruby/active_record/associations/association_proxy.rb:215:in `send'
  /usr/lib/ruby/vendor_ruby/active_record/associations/association_proxy.rb:215:in `method_missing'
  app/models/issue.rb:471:in `new_statuses_allowed_to'
  app/controllers/issues_controller.rb:122:in `show'
  /usr/lib/ruby/vendor_ruby/action_controller/base.rb:1333:in `send'
  /usr/lib/ruby/vendor_ruby/action_controller/base.rb:1333:in `perform_action_without_filters'
  /usr/lib/ruby/vendor_ruby/action_controller/filters.rb:617:in `call_filters'
  /usr/lib/ruby/vendor_ruby/action_controller/filters.rb:610:in `perform_action_without_benchmark'
  /usr/lib/ruby/vendor_ruby/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
  /usr/lib/ruby/vendor_ruby/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
  /usr/lib/ruby/vendor_ruby/action_controller/rescue.rb:160:in `perform_action_without_flash'
  /usr/lib/ruby/vendor_ruby/action_controller/flash.rb:151:in `perform_action'
  /usr/lib/ruby/vendor_ruby/action_controller/base.rb:532:in `send'
  /usr/lib/ruby/vendor_ruby/action_controller/base.rb:532:in `process_without_filters'
  /usr/lib/ruby/vendor_ruby/action_controller/filters.rb:606:in `process'
  /usr/lib/ruby/vendor_ruby/action_controller/base.rb:391:in `process'
  /usr/lib/ruby/vendor_ruby/action_controller/base.rb:386:in `call'
  /usr/lib/ruby/vendor_ruby/action_controller/routing/route_set.rb:438:in `call'
  /usr/lib/ruby/vendor_ruby/action_controller/dispatcher.rb:87:in `dispatch'
  /usr/lib/ruby/vendor_ruby/action_controller/dispatcher.rb:121:in `_call'
  /usr/lib/ruby/vendor_ruby/action_controller/dispatcher.rb:130:in `build_middleware_stack'
  /usr/lib/ruby/vendor_ruby/active_record/query_cache.rb:29:in `call'
  /usr/lib/ruby/vendor_ruby/active_record/query_cache.rb:29:in `call'
  /usr/lib/ruby/vendor_ruby/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
  /usr/lib/ruby/vendor_ruby/active_record/query_cache.rb:9:in `cache'
  /usr/lib/ruby/vendor_ruby/active_record/query_cache.rb:28:in `call'
  /usr/lib/ruby/vendor_ruby/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
  /usr/lib/ruby/vendor_ruby/action_controller/string_coercion.rb:25:in `call'
  /usr/lib/ruby/vendor_ruby/rack/head.rb:9:in `call'
  /usr/lib/ruby/vendor_ruby/rack/methodoverride.rb:24:in `call'
  /usr/lib/ruby/vendor_ruby/action_controller/params_parser.rb:15:in `call'
  /usr/lib/ruby/vendor_ruby/action_controller/session/cookie_store.rb:99:in `call'
  /usr/lib/ruby/vendor_ruby/action_controller/failsafe.rb:26:in `call'
  /usr/lib/ruby/vendor_ruby/rack/lock.rb:15:in `call'
  /usr/lib/ruby/vendor_ruby/action_controller/dispatcher.rb:106:in `call'
  /usr/lib/ruby/vendor_ruby/rails/rack/static.rb:31:in `call'
  /usr/lib/ruby/vendor_ruby/rack/urlmap.rb:52:in `call'
  /usr/lib/ruby/vendor_ruby/rack/urlmap.rb:46:in `each'
  /usr/lib/ruby/vendor_ruby/rack/urlmap.rb:46:in `call'
  /usr/lib/ruby/vendor_ruby/rack/handler/webrick.rb:59:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
  /usr/lib/ruby/vendor_ruby/rack/handler/webrick.rb:13:in `run'

Rendering /usr/share/redmine/public/500.html (500 Internal Server Error) 
```

我在 redmine 论坛中打开了一个与此问题相关的问题，但没有成功（[链接](http://www.redmine.org/boards/2/topics/33951)）

# mysql - 然后在内部连接条件下

> ID：13231131
> 
> 赞同：-3
> 
> 时间：2012-11-05T11:24:37.363
> 
> 标签：mysql

```
SELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col1 = t2.id where t2.col2 ='1'
SELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col2 = t2.id where t2.col1 ='1' 
```

我可以在单个查询中合并两个查询吗？我尝试使用WHEN THEN！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:26:26.273

怎么样`UNION`

```
SELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col1 = t2.id where t2.col2 ='1'
UNION 
SELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col2 = t2.id where t2.col1 ='1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:59:09.210

听起来你想要

```
SELECT col1, col2
FROM (
 SELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col1 = t2.id where t2.col2 ='1'
 UNION
 SELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col2 = t2.id where t2.col1 ='1'
     )
ORDER BY whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:38:27.180

```
SELECT col1,col2 FROM t1, t2 
WHERE 
(t1.col1 = t2.id AND t2.col2 = '1')
OR
(t1.col2 = t2.id AND t2.col1 = '1') 
```

是另一种方式。但`UNION`也应该真的有效。

# java - 如何显示文件上传进度？

> ID：13231133
> 
> 赞同：-4
> 
> 时间：2012-11-05T11:24:43.373
> 
> 标签：java, struts

通常在上传文件时，在几乎所有网站中单击上传按钮之前都会使用一种上传类型的进度条。

选择文件后我们到底在做什么（在那个进度条中）

我需要使用 java 和 jsp 或 Struts 1.x 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:22:57.600

通常，文件上传在您将数据发布到服务器后开始，而不是在您选择文件时开始。

我想你想要异步文件上传，例如 Gmail

看到这个：[异步文件上传（AJAX文件上传）使用jsp和javascript](https://stackoverflow.com/questions/1276916/asynchronous-file-upload-ajax-file-upload-using-jsp-and-javascript)

另请参阅 swfupload - JavaScript 和 Flash 上传库

[http://code.google.com/p/swfupload/downloads/list](http://code.google.com/p/swfupload/downloads/list)

这也可能有帮助

[http://www.missiondata.com/blog/web-development/28/file-upload-progress-with-ajax-and-java-and-prototype/](http://www.missiondata.com/blog/web-development/28/file-upload-progress-with-ajax-and-java-and-prototype/)

# magento - Magento Enterprise 返回 404 错误：在 nginx、CentOS 上找不到页面

> ID：13231136
> 
> 赞同：2
> 
> 时间：2012-11-05T11:24:50.397
> 
> 标签：magento, url-rewriting, nginx, centos

我在 nginx、php-fpm 上运行 magento 时遇到了一些大问题。

[http://img16.imageshack.us/img16/8108/magento4042.png](http://img16.imageshack.us/img16/8108/magento4042.png)

我尝试了 3 天来解决它。我无法打开任何页面（包括主页）。

这是我的 nginx.conf：

```
user              nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log;
#error_log  /var/log/nginx/error.log  notice;
#error_log  /var/log/nginx/error.log  info;

pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    # Load config files from the /etc/nginx/conf.d directory
    # The default server is in conf.d/default.conf
    include /etc/nginx/conf.d/*.conf;
    #
    fastcgi_send_timeout 1800;
    fastcgi_read_timeout 1800;
    fastcgi_connect_timeout 1800;
} 
```

这是我的 default.conf

```
server {
  root     /var/www/;
  index    index.php;
  server_name   magento.example.com;
  location / {
    index index.html index.php;
    try_files $uri $uri/ @handler;
    expires 30d;
  }
  location ^~ /(app|includes|lib|media/downloadable|pkginfo|report/config.xml|var)/ { internal; }
  location /var/export/ { internal; }
  location /. { return 404; }
  location @handler { rewrite / /index.php; }
  location ~* .php/ { rewrite ^(.*.php)/ $1 last; }
  location ~* .php$ {
    if (!-e $request_filename) { rewrite / /index.php last; }
    expires off;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param MAGE_RUN_CODE default;
    fastcgi_param MAGE_RUN_TYPE store;
    include fastcgi_params;
  }
} 
```

缓存被禁用。Url_rewrites 到。请告诉我，如何调试它？

# c# - 'System.IO.MemoryStream' 不包含'for' 的定义？

> ID：13231144
> 
> 赞同：1
> 
> 时间：2012-11-05T11:25:29.227
> 
> 标签：c#, asp.net, email-attachments, vcf-vcard

我在这里遇到了一个小问题。

> Error1“System.IO.MemoryStream”不包含“CopyTo”的定义

我的代码：

```
// Error occurs here (CopyTo) (For Framework 4.0)
ms.CopyTo(actualAttachment);    
actualAttachment.Position = 0;  

//Change CopyTo to WriteTo For Framework 2.0
ms.WriteTo(actualAttachment);   
actualAttachment.Position = 0; 
```

我不得不重新输入整个代码以确保所有内容都进入流，因为在发送文件后删除文件时遇到了一些问题。但现在我得到了这个错误。

所以基本上它现在不应该保存任何东西。

我只是没有注意我使用的是什么框架。我每天使用 4 种类型的框架，这有时真的让我感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T11:32:23.737

您使用的是哪个框架版本？该方法仅在框架第 4 版后可用。[http://msdn.microsoft.com/en-us/library/system.io.stream.copyto(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:31:13.073

移动

```
attach = new Attachment(actualAttachment, ContentType); 
```

在 StreamWriter 的使用括号内并将其更改为

```
ms.Position = 0;
attach = new Attachment(ms, ContentType); 
```

然后，您可以摆脱 MemoryStream 实际附件。

您已经通过 StreamWriter 将数据放入内存流中，只需使用它即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T14:48:37.707

**试试这个：**

`ms.WriteTo(actualAttachment);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:29:47.427

解决了！

改变了

```
 ms.CopyTo(actualAttachment);
 actualAttachment.Position = 0; 
```

到

```
 ms.WriteTo(actualAttachment);
 actualAttachment.Position = 0; 
```

解决了这个问题。
感谢所有试图提供帮助的人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T17:19:33.153

我遇到了这个特殊的错误。我的项目针对 3.5 框架。错误 8“System.IO.Stream”不包含“CopyTo”的定义，并且找不到接受“System.IO.Stream”类型的第一个参数的扩展方法“CopyTo”（您是否缺少 using 指令或装配参考？）

我的代码：

> 流输入流 = Request.InputStream;
> 
> FileStream fileStream = new FileStream(path, FileMode.OpenOrCreate);
> 
> inputStream.CopyTo(fileStream);

我将项目设置 > ASP.net 配置 > 目标框架更改为 4.0 并重新打开。有效。谢谢

# c# - Datagridview 不更新/刷新

> ID：13231149
> 
> 赞同：10
> 
> 时间：2012-11-05T11:25:33.383
> 
> 标签：c#, winforms, gridview

我有一个由数据库中的表的数据集组成的 DataGridView。当我删除一行时，它会在数据库中更新，但不会从 GridView 中删除。只有当我重新启动应用程序时，它才会从 GridView 中删除。

请帮忙

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-05T12:02:51.700

您需要重置绑定源上的绑定。

```
bindingSource.ResetBindings(false); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T12:11:39.930

这是一个非常简单的过程。

> 1.) 创建绑定源
> 
> 2.) 将此对象的数据源设置为您的数据集表。
> 
> 3.) 将 DatagridView 的数据源设置为绑定源对象。

**代码示例：**

```
Dataset ds = new Dataset();
BindingSource bs = new BindingSource()
bs.Datasource = ds.Table[0];
DatagridView.Datasource = bs; 
```

现在，您在 DataTable 中所做的任何更改都会自动波及到您的 GridView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:42:25.500

希望这对你有帮助吗？

如果您在 dgv 中显示您的表格并从该表格中删除某些内容，您的获胜表格上有一个按钮。您选择让我们说 ID 并单击“删除”按钮从 db 表中删除项目。这是该代码：

```
private void btn_Delete_Click(object sender, EventArgs e)
        {
            int selectedCellCount = dgv.GetCellCount(DataGridViewElementStates.Selected);

            if (selectedCellCount > 0)
            {
                string selection;

                for (int i = 0; i < selectedCellCount; i++)
                {
                    selection = dgv.SelectedCells[i].Value.ToString();
                    string qs_delete = "DELETE FROM yor_table WHERE id = '" + selection + "';";
                    try
                    {
                        conn = new MySqlConnection(cs);
                        conn.Open();

                        cmd = new MySqlCommand();
                        cmd.Connection = conn;
                        cmd.CommandText = qs_delete;
                        cmd.ExecuteNonQuery();

                        conn.Close();
                        }
                        catch (Exception ex)
                        {
                            MessageBox.Show(ex.Message);
                        }
                        finally
                        {
                           if (conn != null) conn.Close();
                         }
                     }
                }    

//don't forget to load your table again in dgv
            string qs_select = "SELECT * FROM your_table";

            System.Data.DataTable dataTable = new System.Data.DataTable();
            dataTable.Clear();
            dgv.DataSource = dataTable;

            try
            {
                conn = new MySqlConnection(cs);
                cmd = new MySqlCommand(qs_select, conn);
                conn.Open();

                da = new MySqlDataAdapter(cmd);
                da.Fill(dataTable);

                cb = new MySqlCommandBuilder(da);

                dgv.DataSource = dataTable;
                dgv.DataMember = dataTable.TableName;
                dgv.AutoResizeColumns();

                conn.Close();
            }
            catch (Exception ex)
            {
                 MessageBox.Show(ex.Message);
            }
            finally
            {
                if (conn != null) conn.Close();
            }
         } 
```

您会在这里注意到我有 MySQL 数据库，但不要为此烦恼。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T19:09:31.353

如果数据库已更新并且您想刷新 DataGridView，请调用：

```
this.<table name>TableAdapter.Fill(this.<DB name>DataSet.<table name>); 
```

例如： Where 是您的表的名称（例如 Customers），是您的数据库的名称（例如 MyDB）。

```
this.CustomersTableAdapter.Fill(this.MyDBDataSet.Customers); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-05T11:44:30.103

您必须在每次删除后调用此函数（重新绑定网格）。

```
void BindGrid()
{
YourDataGridView.DataSource = dataset;
YourDataGridView.DataBind();
} 
```

# java - 我们如何在 android/java.. 中将单词拆分为字符？？并为每个字符分配特定的 id

> ID：13231152
> 
> 赞同：-4
> 
> 时间：2012-11-05T11:25:42.170
> 
> 标签：java, android

我想把这个词分成像“ABCD”这样的字符到ABCD，然后如果我们假设A=1，B=2，......和Z=26，那么我想把这个序列分配给每个字符并且将其相加以实现输出。这怎么能做到..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:39:29.067

尝试以下代码：

```
String data = "ABCD";

        int sum=0;
        String dataToProcess = data.toLowerCase();
        for(int i=0;i<dataToProcess.length();i++){
            char c = dataToProcess.charAt(i);

            sum += c - 96;
        }

        System.out.println("sum is "+sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:33:36.417

我假设你已经维护了一个`map`用于映射你`characters`的一些`numbers`. 然后，您可以简单地拆分字符串`empty string`以获取单个字符。然后遍历您的数组以获得总和。

请注意，拆分`empty string`将使您获得一个空字符串作为数组中的第一个元素。因为，Java 中的`empty`字符串在字符串的开头包含一个字符串。

所以，你可以试试这个代码： -

```
 String str = "ABCDEF";
    String[] arr = str.split("");
    int sum = 0;

    Map<String, Integer> map = new HashMap<String, Integer>() {
        {
            put("A", 1); put("B", 2); put("C", 3);
            put("D", 4); put("E", 5); put("F", 6);
        }
    };

    System.out.println(Arrays.toString(arr));

    // Iteration starts from index 1, as 1st element is an empty string
    for (int i = 1; i < arr.length; i++) {
        sum += map.get(arr[i]);
    }

    System.out.println("Sum = " + sum); 
```

**输出： -** : -

```
[, A, B, C, D, E, F]
Sum = 21 
```

* * *

或者，您也可以使用[`String#toCharArray`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray%28%29)方法，将您的字符串直接转换为`character array`单个字符。在这种情况下，您的地图声明应如下所示： -`Map<Character, Integer>`

```
String str = "ABCDEF";
Map<Character, Integer> map = new HashMap<Character, Integer>() {
        {
            put('A', 1); put('B', 2); put('C', 3);
            put('D', 4); put('E', 5); put('F', 6);
        }
};
for (char ch: str.toCharArray()) {
    sum += map.get(ch);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:35:57.197

```
int sum = 0;
for (char ch: theWordToCount.toCharArray()) {
     sum += ((int)ch) - 64;
} 
```

由于“A”的 ASCII 码是 65，这将为 A 添加 +1，为 B 添加 +2，依此类推。

您将不得不处理大小写，例如小写减去 96。

# java - 避免 JTable 中的重复行选择

> ID：13231154
> 
> 赞同：0
> 
> 时间：2012-11-05T11:25:51.790
> 
> 标签：java, swing, jtable, jide

我需要避免在 JTable 中重复行选择。如果再次选择先前选择的行，我不想触发 mouseevent 或需要一些 API 来告诉我它是否是重复的行选择。我可以维护以前选择的行的索引，但如果可能的话，我想避免它

我在我的功能中使用 JIDE 表 API，所以如果有任何与 JIDE 相关的方法可以指示这种情况。

*   谢谢

# .net - 使用 .Net 库将 CSV 文件上传到 Google Cloud Storage

> ID：13231158
> 
> 赞同：3
> 
> 时间：2012-11-05T11:26:01.893
> 
> 标签：.net, c#-4.0, google-bigquery, google-cloud-storage

我需要帮助编写代码以将本地存储的 CSV 文件上传到 Google 云存储，然后使用 .Net 客户端库将数据从存储存储到相应的 Big Query 表。

我搜索了几个小时，但没有得到相关的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T04:15:51.830

// 重要提示：您还需要在您的 GOOGLE APIS 控制台上激活 Google Cloud Storage JSON API。// 即使您没有在 .NET 代码上使用 JSON，Google Cloud Storage 也不够用

```
 Google.Apis.Storage.v1beta1.Data.Object fileobj = new Google.Apis.Storage.v1beta1.Data.Object();
        fileobj.Media = new Google.Apis.Storage.v1beta1.Data.Object.MediaData();
        fileobj.Media.ContentType = "application/octet-stream";

        ///READ FILE
        string file = @"C:\2noviembre.csv";

        System.IO.Stream j = new System.IO.FileStream(file,
                              System.IO.FileMode.Open,
                               System.IO.FileAccess.Read);

        //New File Name
        fileobj.Name = "testloco.csv";

        Google.Apis.Storage.v1beta1.ObjectsResource.InsertMediaUpload insmedia;
        insmedia = new Google.Apis.Storage.v1beta1.ObjectsResource.InsertMediaUpload(storservice, fileobj, "YOURBUCKETNAME", j, "application/octet-stream");
        insmedia.Upload();
        MessageBox.Show("Enviado"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:53:00.310

Google 的 .net sdk 确实支持 Big Query 和 Cloud Storage，但我没有任何第一手示例。这是SDK 支持的 API 页面[的链接。](http://code.google.com/p/google-api-dotnet-client/wiki/APIs)如果您还没有找到它，它应该会有所帮助。在此页面上有使用 SDK 的帮助。

# c - malloc 后释放内存

> ID：13231165
> 
> 赞同：1
> 
> 时间：2012-11-05T11:26:20.173
> 
> 标签：c, malloc

我有一些代码：

```
char * itoa(int a)
{
    char (*t)[16]=(char(*)[16])malloc(1*sizeof(char[16]));
    sprintf(*t,"%d",a);
    return *t;
}
// ...
mvwprintw(my_menu_win,i+1,2,itoa(i)); 
```

我可以从 malloc 中释放内存，而不添加临时变量吗？例如：

```
temp=itoa(i);
mvwprintw(my_menu_win,i+1,2,temp);
free(temp); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:14:22.917

您不应该使用`malloc`您知道范围受到限制的缓冲区。

对于您可能希望将缓冲区保留一段时间的情况，一个很好的解决方案是从 C99 开始的*复合文字*。我会去做类似的事情

```
char const* itoa(int a, char (*buffer)[16]) {
    sprintf(*buffer,"%d",a);
    return *buffer;
}

#define ITOA(A) itoa((A), &(char[16]){ 0 }) 
```

指向函数数组的指针可确保`16`传递元素的缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:37:01.713

简而言之：没有。

要释放分配的内存，您需要对其进行引用。

如果您可以更改转换 API，可能的解决方法是使用外部提供的缓冲区：

```
char * itoa(char * t, int i)
{
  sprintf(t,"%d",a);
  return t;
} 
```

`itoa()`那么这样调用：

```
{
  char buffer [16];

  mvwprintw(my_menu_win,i+1,2,itoa(buffer, i));
} 
```

或者（仅限 C99）可以这样调用`itoa()`：

```
mvwprintw(my_menu_win,i+1,2,itoa((char[16]){0}, i)); 
```

所以要清理这个宏有助于：

```
#define ITOA_0(i) itoa((char[16]){0}, i) /* init array with 0s */
#define ITOA(i) itoa((char[16]){}, i) /* do not init array with 0s -> faster, but none ISO */

...

mvwprintw(my_menu_win,i+1,2,ITOA(i)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:46:14.103

另一种方法是在函数中分配一个*静态*数组，这样你就不必释放它了：

```
const char* itoa(int a)
{
    static char t[16];
    sprintf(t,"%d",a);
    return t;
}

mvwprintw(my_menu_win,i+1,2,itoa(i)); 
```

笔记：

这种方式不是线程安全的，并且不能多次用作函数的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:53:57.973

几个问题：

您的`itoa`函数意外编译。指向数组的指针与指向 的指针`char`是不同的类型`char`，这会引发警告，但实际上您返回`*t`的是`t`. 假设它`t`的类型为“指向 16 元素数组的指针`char`”，则表达式`*t`的类型为“16 元素数组`char`”。除非它是、 或 一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of ”类型的表达式将被转换（“decay”）为“指针”类型的表达式`_Alignof``&``T``T`"，它的值将是数组的第一个元素的地址。所以你偶然返回了正确的类型。

您不需要转换结果`malloc`（至少从 C89 开始）。这是一个典型的`malloc`调用模板：

```
T *p = malloc(N * sizeof *p); 
```

其中是您分配`N`的类型元素的数量。`T`所以你可以把你的电话改写为

```
char *t = malloc(16 * sizeof *t); 
```

虽然在这种特殊情况下`sizeof`是多余的，因为`sizeof char`== 1。那么你的其余代码将是

```
sprintf(t, "%d", a);
return t; 
```

然后在稍后的某个时候，您将调用`free`您的实现返回的值`itoa`。虽然坦率地说，如果您使用 C99 或更高版本的编译器，Jens Gustedt 的解决方案会更好。

# mysql - 别名在 ORDER BY 子句中不起作用

> ID：13231167
> 
> 赞同：0
> 
> 时间：2012-11-05T11:26:27.590
> 
> 标签：mysql, sql, sql-order-by, case

这将在 MySQL 5 中正常工作：

```
SELECT INSTR(foo, 'Bar') as foobar
FROM Table
ORDER BY CASE WHEN foobar = 1 THEN foo END DESC; 
```

在 MySQL 4 中，我收到错误：

```
ERROR 1054 (42S22): Unknown column 'foobar' in 'order clause' 
```

但是，如果我将条款更改为此，它将适用于两个版本：

```
SELECT INSTR(foo, 'Bar') as foobar
FROM Table
ORDER BY CASE WHEN INSTR(foo, 'Bar') = 1 THEN foo END DESC; 
```

为确保兼容性，我是否必须始终使用第二种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:30:55.807

基本上，您不能在同一“查询级别”重复使用列别名。

如果您想编写兼容/可移植的 SQL 并且不想重复函数调用，那么通常的方法是将查询包装到派生表中。

```
select *
from (
  SELECT INSTR(foo, 'Bar') as foobar,
         foo
  FROM Table
) t
ORDER BY CASE WHEN foobar = 1 THEN foo END DESC; 
```

请注意，您需要在内部查询中包含要在“外部”查询中使用的任何列。如果省略`foo`内部派生表中的列，则*无法*在外部级别访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:28:38.817

因为`foobar`是别名。它不是列，除非它来自派生查询（*子查询*）。如下面的这个

```
SELECT * 
FROM
(
   SELECT INSTR(foo, 'Bar') as foobar
   FROM Table
) a
ORDER BY CASE WHEN foobar = 1 THEN foo END DESC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:34:53.820

根据其他答案，您不能在`CASE`. 您可以像这样直接使用，
而不是使用子查询：`INSTR()``CASE`

```
SELECT INSTR(foo, 'Bar') as foobar
FROM Table
ORDER BY CASE WHEN INSTR(foo, 'Bar') = 1 THEN foo END DESC; 
```

当您使用子查询时，请注意您还必须选择要按它排序的列，否则您将收到[这样](http://sqlfiddle.com/#!2/5e44e/3)`foo`的错误

所以你的子查询查询应该是：

```
SELECT * FROM
(
    SELECT foo,INSTR(foo, 'Bar') as foobar
    FROM t
) A
ORDER BY CASE WHEN foobar = 1 THEN foo END DESC; 
```

# node.js - 如何使用 nodejs 进行 dojo 构建？

> ID：13231168
> 
> 赞同：5
> 
> 时间：2012-11-05T11:26:29.103
> 
> 标签：node.js, build, dojo

我目前正在使用 dojotoolkit 及其构建系统。[我在http://dojotoolkit.org/documentation/tutorials/1.8/build/](http://dojotoolkit.org/documentation/tutorials/1.8/build/)阅读了 1.8 的新构建教程。在教程中，它提到您可以使用 nodejs 加快构建速度。

> 构建工具本身依赖于 Java（以及可选的 Node.js 以实现更快的构建），因此请确保您也安装了该工具。

但它没有提到如何做到这一点。有人知道这是如何工作的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T11:14:18.157

我通常这样运行它：

```
> node dojo/dojo.js load=build --profile myprofile.profile.js --release 
```

这将为 myprofile.profile.js 中包含的配置文件构建一个版本。它假定您在一个目录中，该目录包含 dojo 和 util 作为子目录。它还假设节点的路径设置正确。

如果节点未在路径变量中配置，您将需要使用节点的完整路径：

```
> <path to node here> dojo/dojo.js load=build --profile myprofile.profile.js --release 
```

在 Windows 上，路径通常为**C:\Program Files\nodejs\**，但您可能必须将其配置为**C:\PROGRA~1\nodejs\**才能使其正常工作。

**Windows 注意：**
构建脚本不适用于 Windows 上的 Node（使用 Cygwin 除外）。如果您使用的是 Windows，则可以通过以下补丁使其正常工作：

*   [Windows 补丁](http://bugs.dojotoolkit.org/ticket/15413)

使用附加的*node-win.patch*文件编辑文件：*util/build/main.js*和*util/build/transforms/writeOptimized.js*。该补丁在 100% 的时间里都对我有用，只需编辑几行代码就可以了。

我个人发现使用 Rhino 的 Node 替代品没用。无论我将 basePath 设置为什么，它总是无法正确检测到构建路径。我强烈建议在 Rhino 上使用 Node，因为它更可靠且更易于设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:11:20.087

buildscript`util/buildscripts/build.sh`检查节点是否在您的路径中，如果是，则使用它。

这目前在 Windows 下不起作用 (http://bugs.dojotoolkit.org/ticket/15413)。

# css - 两列，全高，响应式布局。使用哪个框架？

> ID：13231172
> 
> 赞同：-3
> 
> 时间：2012-11-05T11:27:02.223
> 
> 标签：css, twitter-bootstrap, zurb-foundation

我想建立一个具有两列全高（100% 的视口）布局的站点。左栏应该包含一个固定高度的导航和一个特定的背景。右栏应包含不同的背景和主要内容。

我玩弄了 Bootstrap 和 Foundation，但似乎都让背景/列的这种组合很难设置。我找到了一些使用 jQuery 的解决方案，但恕我直言，这会给原本不难实现的东西带来另一层可能的混乱。

在我开始创建自己的 css 之前：有没有一种简单的、没有 JS 的归档方式，可以在 Bootstrap、Foundation 或任何其他成熟的框架中查看？我希望能够在主要内容中使用列、选项卡等，这样框架可以为我节省大量编码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-14T08:47:16.133

使用 CSS 表格，很容易做到。但是 Chrome 需要技巧。

示例：CSS：

```
/* important */
*, *:before, *:after {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

#test {
  background: #ddd;
  display: block; /* important */
  margin: 0;
  /*  max-width: 400px; */
  min-height: 0; /* important */
  overflow: hidden; /* important */
  padding-bottom: 20px;
  width: 100%;
}

#test .twoColumnLayout {
    display: table; /* important */
    height: 100%; /* important */
    margin-top: 20px;
    min-height: 10px; /* necessary for IE */
}

/* important, but only for IE, for others the row doesn't need to be present */
#test .twoColumnLayout .row {
    display: table-row; 
    height: 100%;
}

#test .twoColumnLayout .col {
    display: table-cell; /* important */
    height: 100%; /* important */
    text-align: center;
    width: 50%; /* for 2 columns */
}

#test .twoColumnLayout .col > .content {
    background: #fff;
    border: 1px solid #e5e5e5;
    border-radius: 3px;
    height: 100%; /* important */
    margin: 0 10px;
    padding: 20px;
    position: relative;

    /* webkit fix!!! */
    -webkit-box-sizing: content-box; /* necessary for Chrome!!! */
} 
```

和上面的 CSS 的 HTML：

```
<section id="test">
  <div class="twoColumnLayout">
    <div class="row">
      <div class="col">
        <div class="content">
          Some content here, little bit shorter...
        </div>
      </div>
      <div class="col">
        <div class="content">
          Some content here, little bit longer. Some more content here, so it's even longer...
        </div>
      </div>
    </div>
  </div>
</section> 
```

链接到 jsfiddle： [https ://jsfiddle.net/slonisko/xml5jjct/2/](https://jsfiddle.net/slonisko/xmL5jjct/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T22:56:56.993

我也尝试过 Bootstrap 和其他一些网格系统，恕我直言，它们仅在您要编写更复杂的网站时才有用。如果您只需要两列，那么它们肯定是矫枉过正。

例如，这花了我 2 分钟的时间来设置，并且似乎回答了您的请求：http: [//jsbin.com/abeciz/1/edit](http://jsbin.com/abeciz/1/edit)

# php - 如何保护我的 PHP 网站免受 .htaccess URL 重定向恶意软件脚本攻击？

> ID：13231178
> 
> 赞同：1
> 
> 时间：2012-11-05T11:27:11.233
> 
> 标签：php, malware

**这个 .htaccess 文件是如何通过恶意软件代码注入网站的？**

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteOptions inherit
RewriteCond %{HTTP_REFERER} .*(msn|search|live|altavista|excite|ask|aol|google|mail|bing|yahoo).*$ [NC]
</IfModule> 
```

**如何防止我的网站受到同样的攻击？**

此链接在某种程度上很有用 [https://security.stackexchange.com/questions/16361/how-to-prevent-my-website-from-getting-malware-injection-attacks](https://security.stackexchange.com/questions/16361/how-to-prevent-my-website-from-getting-malware-injection-attacks)

但我的团队希望我**使用编码来保护网站。这是可能的吗？**

我还发现很少有其他网站有类似的攻击，但他们使用特定类型的代码来阻止他们的网站。我不能使用那些脚本，因为那不完全适合我。

该网站是一个核心的php网站。如果版主发现这个问题不是真正的问题或完全重复，那么在关闭或点击减号之前，请提供链接帮助。我相信这个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:04:09.643

> 这个 .htaccess 代码是如何注入到 .htaccess 文件中的？

如果它已被注入，那么要么有人在你的机器上获得了 root（不会猜测为什么/如何），要么你的权限模型是错误的。

如果有人有根，那么你完全是 PWNed - 刷一下你的简历，然后去寻找另一份工作 - 你不需要费心阅读这篇文章的其余部分。

但更有可能是权限错误（但即便如此，仅凭这一点也不足以修改文件 - 您在其他地方存在漏洞）。

您应该能够识别主要漏洞。如果您不知道如何执行此操作，请寻求帮助。除了修复此问题外，您还需要修复您网站上的权限。webserver uid 只能写入特别指定的位置 - 如果这些位置在文档根目录内，那么您应该采取适当的措施来保护您的系统免受代码注入（禁用 PHP 访问，最好是所有 webserver 访问，尽管这仍然少得多比将其完全保留在文档根目录之外更安全）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:29:48.173

您使用的是 timthumb.php 还是类似的上传/链接脚本？旧版本充满了 XSS 漏洞。这是 Wordpress 安装中非常常见的漏洞，尤其是那些使用与自己的 timthumb.php / thumb.php 捆绑在一起的主题的漏洞。

如果这是问题所在，请锁定该脚本！如果是自定义脚本，请查看最新的[timthumb.php 源代码](http://code.google.com/p/timthumb/)并尝试使用他们的一些技术。

此外，请确保您的 apache / Web 用户和组的文件权限已锁定。例如，不允许 .htaccess 可被 apache 用户/组写入！

# weblogic - EXT 插件无法在 liferay 6.0.6 和 Weblogic 10.3 中合并 web.xml

> ID：13231182
> 
> 赞同：1
> 
> 时间：2012-11-05T11:27:32.037
> 
> 标签：weblogic, liferay, liferay-6, weblogic-10.x

我在 weblogic 10.3 上部署了 liferay war，并创建了在 web.xml 中有变化的 EXT。如果我部署这个 EXT，weblogic 不会接受这些由 EXT 的 web.xml 所做的更改。

我用谷歌搜索，发现这是 liferay 6.0 中的问题并在 liferay 6.2 中解决，请通过以下链接获取更多信息：http: [//issues.liferay.com/browse/LPS-13222](http://issues.liferay.com/browse/LPS-13222)

但是，我在 liferay wiki 中找到了一些解决方法，建议遵循以下步骤。

1.  在某处复制现有的 web.xml
2.  部署 EXT 插件
3.  根据新 web.xml 和旧 web.xml 之间的差异制作 plan.xml
4.  在管理控制台中使用 plan.xml

但仍然想知道如何在 step3 中创建 plan.xml。

所以想知道如何根据新 web.xml 和旧 web.xml 之间的差异创建 plan.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:52:58.010

你只需要做一个差异。在 Linux 下，打开一个控制台。例如尝试

```
diff web_old.xml web_new.xml > mydiff.patch 
```

它将在名为“mydiff.patch”的文件中显示两个文件之间的差异。

现在，您可以修补已部署的 web.xml（之前关闭您的服务器）：

```
cd /path-of-the-web.xml-folder-on-the-server
patch -p0 < mydiff.patch 
```

您还可以使用该`svn diff`命令来制作您的差异文件。完成这些操作后，重新启动您的服务器。

希望能帮助到你。

# java - 如何将Jframe设置为5秒

> ID：13231185
> 
> 赞同：0
> 
> 时间：2012-11-05T11:27:36.480
> 
> 标签：java, swing, jframe

我`netbeans 7.1.1,`用来创建一个 JFrame。我想`JFrame`在调用后自动处理 5 秒`setVisible()`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:38:14.280

暗示

使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)等待 5 秒，然后再调用`setVisible(false)`或`dispose()`以任何您希望的方式实现。隐藏/处置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:39:14.060

你研究过这个吗？似乎直截了当。

```
new Timer().schedule(new TimerTask() {
    public void run() {
          // this should be final
          jframe.dispose();
    }
}, 5000); 
```

# javascript - 在javascript中对数组进行排序：

> ID：13231186
> 
> 赞同：2
> 
> 时间：2012-11-05T11:27:42.957
> 
> 标签：javascript, arrays

> **可能重复：**
> [对混合的字母/数字数组进行排序](https://stackoverflow.com/questions/4340227/sort-mixed-alpha-numeric-array)

我正在尝试对包含 xxx1、xxx2、xxx3 形式的元素的数组进行排序。Array.sort() 方法在 xxx9 之前工作正常，如果有一个名为 xxx10 或 xxx11 的元素，它会失败。顺序为 xxx1、xxx10、xxx11、xxx2 等。请让我知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:32:17.347

您正在看到自然字符串排序的结果。如果字符串排序不是您想要的，您应该使用自己的比较器。

执行以下操作：

```
arrayToBeSorted.sort(function(first,second)
{ 
  /* some code that compares 'first' with 'second' and returns <0, ==0, >0*/ 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:36:36.713

目前，您的数组正在按字母顺序排序，这就是您获得这些结果的原因。您需要提供自己的比较器函数来实现数字排序。

尝试

```
var arr = ["xxx1","xxx10","xxx2","xxx20","xxx3","xxx30"];

var sortedArr = arr.sort( function( a, b ) {

    // remove first 3 characters so remaining string will parse
    a = parseInt( a.substr( 3 ) );
    b = parseInt( b.substr( 3 ) );

    return a - b;
});

console.log( sortedArr ); // => ["xxx1", "xxx2", "xxx3", "xxx10", "xxx20", "xxx30"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:39:29.637

您可以在回调中实现自定义排序条件以传递到`Array.sort()`：

```
​var arr = [],
    re = /^\D*(\d+)$/;

for(var i = 20; i-- > 0;) {
    arr.push('xxx' + i);
}

function comparator(a, b) {
    var numA = a.match(re)[1],
        numB = b.match(re)[1];
    return numA - numB;
}

arr.sort(comparator);
console.log(arr);
​ 
```

[http://jsfiddle.net/f0t0n/qz62J/](http://jsfiddle.net/f0t0n/qz62J/)

# vim - Vim：编辑特定文件时如何自动设置 textwidth=60？

> ID：13231187
> 
> 赞同：7
> 
> 时间：2012-11-05T11:27:44.800
> 
> 标签：vim

在我的 .vimrc 我有以下行：

> 设置文本宽度=80

但是，在编辑文件时：README-SETUP 和 README-INSTALL 我希望 vim 将 textwidth 设置为 60。

我认为这可以使用 autocmd 对特定文件类型完成，但我将如何对特定文件执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:33:00.443

你可以这样做：

```
autocmd BufReadPre README*.txt setlocal textwidth=60 
```

或者您可以一一列出文件：

```
autocmd BufReadPre README-SETUP setlocal textwidth=60
autocmd BufReadPre README-INSTALL setlocal textwidth=60 
```

**编辑**：正如 ZyX 指出的那样，对于这样的选项，更喜欢 setlocal 而不是 set ，您真的不希望所有缓冲区在会话期间都具有该文本宽度。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T15:01:43.077

您还可以在文件顶部添加注释：

```
# vim: textwidth=80 
```

您可以将 # 替换为在您的上下文中表示注释的任何字符。

# html - 在 div 中放置垂直旋转的文本

> ID：13231189
> 
> 赞同：0
> 
> 时间：2012-11-05T11:27:48.130
> 
> 标签：html, css

> **可能重复：**
> [如何使用 CSS 跨浏览器绘制垂直文本？](https://stackoverflow.com/questions/1080792/how-to-draw-vertical-text-with-css-cross-browser)

我有一些 div，应该是书架上的“书”。所有的 div 都应该是一个链接，虽然在某些情况下它们会有图像背景，但在另一些情况下它们不会，在这些情况下，我需要把标题写成书名，所以文本应旋转 90º。我不知道该怎么做，只旋转 里面的文本`<a>`，而不旋转整个 div。

```
<div class="magazinebookcase">        

<div class="books">
<a title="Mag1" style="height:286px;width:16px;" href="">Book 1
</a>
</div>
<div class="books">
<a title="Mag2" style="height:258px;width:48px;" href="">Book 2
</a>
</div>
<div class="books">
<a title="Mag3" style="height:252px;width:38px;" href="">
</a>
</div>
<div class="books">
<a title="Mag4" style="height:258px;width:50px;" href="">
</a>
</div>       
<div class="books">
<a title="Mag5" style="height:284px;width:14px;" href="">
</a>
</div>

<div class="clearfix"></div> 
```

和CSS：

```
.magazinebookcase {
width: 100%;
padding: 3px;
vertical-align:bottom;

} 

.magazinebookcase .clearfix {
clear:both;
}

.magazinebookcase .books {
text-align:center;
display: table-cell;
vertical-align: bottom;
}

.magazinebookcase a {
border: 1px solid #000;
display: block;
word-break: break-all;
}

.magazinebookcase a:hover {
background-color: #ccc;
}​ 
```

[http://jsfiddle.net/7vEdw/2/](http://jsfiddle.net/7vEdw/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:42:03.087

我希望这能帮到您 ：-

**HTML**

```
<!DOCTYPE html>
<html>
<head>

</head>

<body>
<div class="magazinebookcase">        

    <div class="books">
    <a title="Mag1" style="height:286px;width:16px;" href="">Book 1
    </a>
    </div>
    <div class="books">
    <a title="Mag2" style="height:258px;width:48px;" href="">Book 2
    </a>
    </div>
    <div class="books">
    <a title="Mag3" style="height:252px;width:38px;" href="">
    </a>
    </div>
    <div class="books">
    <a title="Mag4" style="height:258px;width:50px;" href="">
    </a>
    </div>       
    <div class="books">
    <a title="Mag5" style="height:284px;width:14px;" href="">
    </a>
    </div>

    <div class="clearfix"></div>
</div>
</body>
</html> 
```

**CSS**

```
.magazinebookcase {
width: 100%;
padding: 3px;
vertical-align:bottom;

}

.magazinebookcase .clearfix {
clear:both;
}

.magazinebookcase .books {
text-align:center;
display: table-cell;
vertical-align: bottom;
    border: 1px solid #000;
}

.magazinebookcase a {

display: block;
word-break: break-all;
    color: #000;
    -moz-transform:rotate(30deg);
}

.magazinebookcase a:hover {
background-color: #ccc;
} 
```

[演示](http://jsfiddle.net/7vEdw/15/)

对于每个链接，您将制作不同的课程，这是给您的演示.. 根据您的要求....

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T11:36:54.823

将内容放在要旋转的跨度中，然后可以使用 CSS 旋转它。例如

```
<span class="rotate">Book 1</span>
<span class="rotate">Book 2</span>
<span class="rotate">Book 3</span>
<span class="rotate">Book 4</span> 
```

和CSS

```
.rotate{
 -webkit-transform: rotate(-90deg); 
 -moz-transform: rotate(-90deg); 
} 
```

希望它有效:)

# javascript - 如何使用openlayers在屏幕触摸上添加标记

> ID：13231196
> 
> 赞同：1
> 
> 时间：2012-11-05T11:28:14.497
> 
> 标签：javascript, touch, openlayers

我正在将 sencha touch 和 openlayers 用于移动应用程序！当我用 android 触摸地图时，我想添加一个标记，比如“onLongPress”！我搜索的是类似的代码，但谁支持触摸屏。

```
 map.events.register("click", map, function(e) {
  //var position = this.events.getMousePosition(e);
  var position = map.getLonLatFromPixel(e.xy);
  var size = new OpenLayers.Size(21,25);
  var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
  var icon = new OpenLayers.Icon('images/mark.png', size, offset);   
  var markerslayer = map.getLayer('Markers');
  markerslayer.addMarker(new OpenLayers.Marker(position,icon));

 }); 
```

谢谢你 ：）

# jquery - jQuery mCustomScrollbar 不适用于 ajax 内容

> ID：13231199
> 
> 赞同：2
> 
> 时间：2012-11-05T11:28:25.227
> 
> 标签：jquery, ajax

```
 $(window).load(function(){
                $("#content_1").mCustomScrollbar({
                    scrollButtons:{
                        enable:true
                    }
                });

// ajax code
function beauty_of_ceylon() {
  $('.content-text').html('<p style="position:absolute;"><img src="images/ajax-loader.gif" /></p>');
  $('.content-text').load("packages/beauty-of-ceylon.php");
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-12T22:14:42.863

我这样做了：

在发送并清除您的div之前在ajax时销毁它。请检查评论：

```
$(document).ready(function(){
    $(".YOUR-CONTENT-DIV").mCustomScrollbar({
        theme:"dark",
    });

    $.ajax({
        url: "YOUR AJAX URL",
        type: "post",
        data: data,
        beforeSend: function() {
            $(".YOUR-CONTENT-DIV").mCustomScrollbar("destroy"); //Destroy
            $('.YOUR-CONTENT-DIV').html('<div class="loading">Loading ...</div>'); //clear html because it will show normal scroll bar
        },
        success: function(data) {
            $('.YOUR-CONTENT-DIV').html(data);
        },
        complete: function () { 
            $(".YOUR-CONTENT-DIV").mCustomScrollbar({
                theme:"dark",
            });               
        }
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T18:17:08.487

我相信`.load()`是异步的，这意味着它会在`.load()`调用期间继续运行脚本。所以你必须在回调函数中调用mCustomScrollbar，否则内容还没有。所以试试这个

```
$('.content-text').load("packages/beauty-of-ceylon.php", function () {
    $("#content_1").mCustomScrollbar({
        scrollButtons:{
            enable:true
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T03:30:42.720

已经有一段时间了，所以我猜您已经找到了解决方案。如果不是，那么您的代码在某一点上是正确的。完成后`.load`，使用它的回调函数来启动此命令：

```
$(selector).mCustomScrollbar("update"); 
```

在他们的网站上，它说每当您更新内容时，都必须调用此函数，以便 mCustomScrollbar 重新计算内容的高度、滚动条等。

[http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T15:54:42.350

```
$('.content-text').load("packages/beauty-of-ceylon.php", function () {
    $("#content_1").mCustomScrollbar({
        scrollButtons:{
            enable:true
        }
    });
    $content = '<button id="update" onclick="$('#content_1').mCustomScrollbar('update');" style="display:none"></button>';
    $('.content-text').append($content);
    setTimeout("$('#update').click();",10);
}); 
```

它对我有用：D

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-14T20:47:54.687

只需将脚本嵌入到 JSON/AJAX 调用内容中，例如：

1.JSON/AJAX后端脚本（myscript.vendor，如Ruby、PHP...）

```
var myHTMLContent = '<script>
    $(".popover-n-content").mCustomScrollbar({
        theme:"dark",
        scrollInertia:100
    });
    </script>
    <div>

    <-- Manipulate -->
    <other_html_tags>
    ...
    </other_html_tags>
    </div>'; 
```

2.调用脚本“myscript.vendor”

```
$.ajax({
    url: "/get/myscript.vendor",
    type: "post",
    dataType: "html",
    success: function (data) {
        $('#data').html(data);
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-29T09:35:29.100

首先摧毁`mCustomScrollbar`.

`$(".YOUR-CONTENT-DIV").mCustomScrollbar("destroy");`

把你的`HTML`数据

`$('.YOUR-CONTENT-DIV').html('HTML');`

创建一个`mCustomScrollbar`为`div`

```
setTimeout(function() {

$(".YOUR-CONTENT-DIV").mCustomScrollbar({
    theme:"dark"
  });
}, 300); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-04T08:48:49.673

请参阅此[参考](https://github.com/malihu/malihu-custom-scrollbar-plugin/issues/228#issuecomment-304718085)

代码：

```
 $('#content_1').mCustomScrollbar("destroy");
  $('#content_1').append('some text or another things');
  $('#content_1').mCustomScrollbar(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T14:34:25.313

当您通过 ajax 加载页面时 window.load 不会被调用，因此 mCustomScrollBar 未初始化。当通过 ajax 文档准备好的页面加载时将被触发。

试试下面的代码。

```
$(document).ready(function(){
    $("#content_1").mCustomScrollbar({
                scrollButtons:{
                    enable:true
                }
            });
}); 
```

# windows - 无法在 windows 上访问 samba 共享，但在 mac os 上它可以工作

> ID：13231206
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:28:56.520
> 
> 标签：windows, ubuntu, samba, smb

我通过 samba 在 ubuntu 服务器上共享一个目录。当我使用 mac os x 挂载 samba 共享时，它工作得非常好。但是，当我在 Windows 上安装 samba 共享并像以前一样输入确切的凭据时，我收到错误消息：

> \172.20.1.2\share 不可访问。您可能无权使用此网络资源。请联系此服务器的管理员以了解您是否具有访问权限。不允许同一用户使用多个用户名多次连接到服务器或共享资源。断开与服务器或共享资源的所有先前连接，然后重试。

我完全不知道出了什么问题。当我在 Windows 上输入凭据时，我什至通过将用户名输入为 \admin 来排除域。有谁知道问题是什么，或者我可以检查什么以获得有关实际问题的更多详细信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:30:59.910

Windows机器以某种方式已经“缓存”了旧凭据的问题。重新启动机器后，它工作正常。

# jquery - 在 jqgrid 中如何在排序后保持网格的状态

> ID：13231207
> 
> 赞同：3
> 
> 时间：2012-11-05T11:28:57.973
> 
> 标签：jquery, jqgrid

在服务调用后增加 jqgrid 中的特定列，然后我正在使用`sortable:true,sortorder:asc,sorttype:int`. 当我排序时，列中的值没有恢复，它消失了，然后网格被排序。在这种情况下任何人都可以帮助我，这样即使在排序后我也可以恢复我的值。

```
here is the code, 

$('#gridValue)
      .jqGrid(
           {

            datastr :parsedObj,
            datatype :'jsonstring',
            height :140,
            width :240,
            colNames : [ "Id","Name","Count" ],
            colModel : [ {
               name :'id',
               index :'id',
               width :30,
               align :'left',
               sortable :true
            }, {
               name :'name',
               index :'name',
               width :30,
               align :'left'
            }, {
               name :'count',
               index :'count',
               width :20,
               align :'left',
               sortable :true
             }],

             rowNum :20,
             sortname : 'id',
             sorttype :'int',
             scroll :true,
             viewrecords :true,
             shrinkToFit :false,
             hoverrows :true,
             cellEdit :true,
             loadonce :true,
             sortorder :'asc',

               jsonReader : {
                   root :'paramValue',
                   repeatitems :false,
                   page : function(parsedObj) {
                   return 1;
                   },
                   total : function(parsedObj) {
                   return 1;
                   },
                   records : function(parsedObj) {
                   }
                   },
               gridComplete : function() {
                   var gridTable = document
                            getElementById("gridValue");
                   var gridTableCount = gridTableCount.rows.length;
                   if (gridTableCount> 1) {
                      for (countId = 1; countId < gridTableCount; countId++) {
   document.getElementById("gridValue").rows[countId].cells[2].innerHTML = '0';                                                                   }
                                                                }
                                                        }
                                        });     
                        $("#gridValue").setGridParam({
                                sortname : 'count',
                                sortorder : 'asc'
                        }).trigger('reloadGrid');
                   }

//After service call i will be calling this function to update value in grid
function incrementingValue(){
     document.getElementById("gridValue").rows[countId].cells[2].innerHTML =1;
} 
```

但是在网格中自动排序后，值不会保留。请给我一个解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:23:21.127

将 id 列更改为

{名称：'id'，索引：'id'，宽度：30，对齐：'left'，可排序：true，格式化程序：incrementingValue}

然后在网格代码之后添加一个函数来处理增量

```
var counter; //when calling the service you can increase your value to the counter
function incrementingValue(cellvalue, options, rowObject) {
    //var cellValueInt = parseInt(cellvalue); // this bring the existing cell value
    return counter=1;
    }
}; 
```

# python - 来自谷歌云消息服务器的错误请求响应，使用 urllib2

> ID：13231210
> 
> 赞同：0
> 
> 时间：2012-11-05T11:29:08.770
> 
> 标签：python, google-cloud-messaging

我一直在尝试使用 python 向 GCM 服务器发送消息`urllib2`。但它一直在返回`Error 400`（建议`Malformed JSON`）。[这是一个与Google Cloud Messaging HTTP Error 400: Bad Request](https://stackoverflow.com/questions/11697096/google-cloud-messaging-http-error-400-bad-request)非常相似的问题，但我已经尝试过那里提供的解决方案，但这对我不起作用。

请在下面找到我的代码

```
idarr = []
for obj in objects:
    idarr.append(str(obj["gcid"]))

key =  "AIzaxxxxxxL9xxxxxxxxxxxxxxxxxxxWbk"
data = { "registration_ids": idarr , "data": "on" }
data = json.dumps(data)
headers = {"Content-Type":"application/json","Authorization": "key="+key}
request = urllib2.Request('https://android.googleapis.com/gcm/send',data,headers )
f=urllib2.urlopen(request) 
```

此外，我在这里展示了我在数据字段中发布的 json

```
{
    "data": "on", 
    "registration_ids": [
         "APA91bEPvyQuqRndnwZ94YxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxnmFVPy6nv4mPU5UyhDEZ7Jha9HnrV9nXQf25ojs8Hc_-Bw8-ElJ320koeL0PGL6hnWj0xuyltozoND_x",
         "APA91bEPvyQxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxVPy6nv4mPU5UyhDEZ7Jha9HnrV9nXQf25ojs8Hc_-Bw8-ElJ320koeL0PGL6hnWj0xuyltozoND_x"
    ]
} 
```

# ios - PhoneGap 2.1 上的 iOS 截图插件

> ID：13231213
> 
> 赞同：1
> 
> 时间：2012-11-05T11:29:15.873
> 
> 标签：ios, cordova, screenshot

我正在尝试在 PhoneGap 2.1 上使用 iOS PhoneGap Screenshot 插件。

这是我的 Screenshot.m 文件（放在 Plugind 文件夹中）。

```
//
//  Screenshot.h
//
//  Created by Simon Madine on 29/04/2010.
//  Copyright 2010 The Angry Robot Zombie Factory.
//   - Converted to Cordova 1.6.1 by Josemando Sobral.
//  MIT licensed
//
//  Modifications to support orientation change by @ffd8
//

#import "Screenshot.h"

@implementation Screenshot

@synthesize webView;

- (void)saveScreenshot:(NSArray*)arguments withDict:(NSDictionary*)options
{
    CGRect imageRect;
    CGRect screenRect = [[UIScreen mainScreen] bounds];

    // statusBarOrientation is more reliable than UIDevice.orientation
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;

    if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) { 
        // landscape check
        imageRect = CGRectMake(0, 0, CGRectGetHeight(screenRect), CGRectGetWidth(screenRect));
    } else {
        // portrait check
        imageRect = CGRectMake(0, 0, CGRectGetWidth(screenRect), CGRectGetHeight(screenRect));
    }

    UIGraphicsBeginImageContext(imageRect.size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    CGContextTranslateCTM(ctx, 0, 0);
    CGContextFillRect(ctx, imageRect);

    [webView.layer renderInContext:ctx];

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
    UIGraphicsEndImageContext();

    UIAlertView *alert= [[UIAlertView alloc] initWithTitle:nil message:@"Image Saved" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
}

@end 
```

这是我的 Screenshot.h 文件，放在 Plugins 文件夹中：

```
//
//  Screenshot.h
//
//  Created by Simon Madine on 29/04/2010.
//  Copyright 2010 The Angry Robot Zombie Factory.
//   - Converted to Cordova 1.6.1 by Josemando Sobral.
//  MIT licensed
//

#import <Foundation/Foundation.h>
#import <QuartzCore/QuartzCore.h>

#import <Cordova/CDVPlugin.h>

@interface Screenshot : CDVPlugin {
}

- (void)saveScreenshot:(NSArray*)arguments withDict:(NSDictionary*)options;

@end 
```

这是我放在 www 文件夹中的 Screenshot.js 文件

```
 /*
 *  This code is adapted from the work of Michael Nachbaur 
 *  by Simon Madine of The Angry Robot Zombie Factory
 *   - Converted to Cordova 1.6.1 by Josemando Sobral.
 *  2012-07-03
 *  MIT licensed
 */

/*
 * Temporary Scope to contain the plugin.
 *  - More information here:
 *     https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Plugin%20Upgrade%20Guide.md
 */
(function() {
    /* Get local ref to global PhoneGap/Cordova/cordova object for exec function.
        - This increases the compatibility of the plugin. */
    var cordovaRef = window.PhoneGap || window.Cordova || window.cordova; // old to new fallbacks

    /**
     * This class exposes the ability to take a Screenshot to JavaScript
     */
 function Screenshot() { }

    /**
     * Save the screenshot to the user's Photo Library
     */
    Screenshot.prototype.saveScreenshot = function() {
        cordovaRef.exec(null, null, "Screenshot", "saveScreenshot", []);
    };

    cordovaRef.addConstructor(function() {
        if (!window.plugins) {
            window.plugins = {};
        }
        if (!window.plugins.Screenshot) {
            window.plugins.Screenshot = new Screenshot();
        }
    });

 })(); /* End of Temporary Scope. */ 
```

我用这一行调用我的函数是 script.js ： `window.plugins.Screenshot.saveScreenshot() ;`

我已经在 Cordova.plist 中添加了 Screenshot 插件

现在我正在运行应用程序，没有编译错误，但是 JS 不起作用，我在图像应用程序中没有截图。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:58:51.183

我认为您没有粘贴 Script.js 代码，但我想我知道您的问题是什么。您正在调用文档准备好的插件，但要调用插件，您必须等待设备准备好

```
document.addEventListener("deviceready",onDeviceReady,false);

    // Cordova is ready to be used!
    //
    function onDeviceReady() {
        window.plugins.Screenshot.saveScreenshot() ;
    } 
```

# java - 让休眠在保存时级联，但不删除？

> ID：13231219
> 
> 赞同：3
> 
> 时间：2012-11-05T11:29:36.947
> 
> 标签：java, hibernate, cascade

所以我的休眠实现有问题。当我尝试删除父类时，在级联层次结构深处的类上收到外键约束异常。在详细介绍之前，我将首先描述类的关系，因为它关系到它们需要如何保存和删除。

在顶层，我有一个 Customer 类，其中包含一个 DefaultMask 对象列表。这是主列表，因为这些默认掩码由我的对象层次结构中的其他类使用，但始终来自此列表。仅在此列表中创建掩码并从此列表中删除。

在层次结构的更下方，我有一个 Column 类，它可以（可选地）在其上设置一个 DefaultMask。更简洁地描述这种关系；

客户拥有零到多个 DefaultMask。客户拥有零到多列。一列可能有一个 DefaultMask。

在我的应用程序中，当我尝试删除客户时，异常来自 Column 类到 DefaultMask 类的外键约束，我认为问题在于 CascadeType 的设置不正确。我已经研究了这个问题并找到了关于名为 mappedBy 的属性和使用 Hibernate 自己的 CascadeType.SAVE_UPDATE 的信息（为了防止 Hibernate 尝试删除由 Column 持有的 DefaultMask），但我承认我在这里有点迷路并且可以使用一些直接的指导。类的相关代码和实际的异常消息如下。

顾客：

```
@Entity
public class Customer {

@Id
private String id;
@OneToMany(cascade = CascadeType.ALL)
private List<DefaultMask> masks;
    //(Columns are held further down in hierarchy) 
```

柱子：

```
@Entity
@Table(name = "WarehouseColumn")
public class Column implements Comparable<Column> {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int hibernateID;
@OneToOne
private DefaultMask mask; 
```

默认掩码：

```
@Entity
public class DefaultMask implements Mask {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int hibernateID;
private String type;
private String mask; 
```

异常消息：

org.hibernate.exception.ConstraintViolationException: 无法删除或更新父行：外键约束失败( `hibernate`. `WarehouseColumn`, CONSTRAINT `FK8BB153D994AD57D3`FOREIGN KEY ( `mask_hibernateID`) REFERENCES `DefaultMask`( `hibernateID`)) 原因：com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: 无法删除或更新父行：外键约束失败 ( `hibernate`. `WarehouseColumn`, CONSTRAINT `FK8BB153D994AD57D3`FOREIGN KEY ( `mask_hibernateID`) REFERENCES `DefaultMask`( `hibernateID`))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:43:26.513

级联与逻辑所有权的概念密切相关。

基本上，您需要选择以下选项之一：

*   `Customer`逻辑上拥有它`DefaultMask`的 s。在这种情况下，您希望`DefaultMask`在删除 a 时删除 s `Customer`，因此您需要使用`CascadeType.ALL`. 由于`Column`references `DefaultMask`，它可能也属于`Customer`，并且应该删除到

    它可以通过使用适当的级联之间的双向关系来实现`DefaultMask`，`Column`如下所示：

    ```
    @Entity
    public class DefaultMask implements Mask {
        @OneToOne(mappedBy = "mask", cascade = CascadeType.ALL)
        Column column;
        ...
    } 
    ```

*   `DefaultMask`s 本身就是实体，`Customer`仅引用现有`DefaultMask`的 s。在这种情况下，您可能根本不需要对这种关系使用级联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:43:56.877

您正试图删除一个客户，这会自动删除其默认掩码列表。但是其中一个掩码被一列引用。所以数据库（以及 Hibernate）拒绝执行删除，因为它会使列处于不一致的状态：它会引用一个不再存在的默认掩码。

所以你有几个功能选择：

*   保持原样：无法删除客户，因为其掩码之一仍被列引用
*   删除级联：删除客户将删除客户，但不会删除其掩码。
*   找到所有引用要删除的用户的任何默认掩码的列，并删除这些列。然后，删除用户及其默认掩码
*   查找所有引用要删除的用户的任何默认掩码的列，并将其掩码字段设置为空。然后，删除用户及其默认掩码

# jquery - IE9 中的地理位置问题

> ID：13231220
> 
> 赞同：1
> 
> 时间：2012-11-05T11:29:41.783
> 
> 标签：jquery, geolocation, w3c-geolocation

我在 IE9 及更高版本中遇到了一些地理定位问题。下面的脚本在所有其他浏览器中运行良好，在#loader 中淡出消息并在其位置显示最近的位置。但是在 ie9 及更高版本中，即使在 ie 请求使用您的物理位置时选择“允许”，#loader 也不会完全消失。

任何帮助表示赞赏。

```
 <script type="text/javascript">
$(document).ready(function(){
function success(position) {
var s = document.querySelector('#status');
$("#loader").fadeOut();      
if (s.className == 'success') { 
return;   
}
s.innerHTML = "found you!";
s.className = 'success'; 
$("input[name='user_lat']").val(position.coords.longitude);
$("input[name='user_lng']").val(position.coords.latitude); 
if (navigator.geolocation) {  
 var form= $("#geofinder_form");
 var url = $(form).attr('action');
 var data = $(form).serialize(); 
 $.post(url, data, function() {$('#store-details').load('http://www.myurl.com/location/'+position.coords.latitude+','+position.coords.longitude+'/100000'); return false;});
}
}
function error(msg) {
var s = document.querySelector('#status');
s.innerHTML = typeof msg == 'string' ? msg : "failed";
s.className = 'fail';  
// console.log(arguments);
}

if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition(success, error); 
} else {
error('not supported');

}
});
</script> 
```

# eclipse - 在 Eclipse IDE 中使用 GCC Compiler 编译 RTX Kernel 文件

> ID：13231221
> 
> 赞同：4
> 
> 时间：2012-11-05T11:29:50.033
> 
> 标签：eclipse, gcc, keil, rtx

我们在 LPC2148 的 KEIL IDE 中有一个项目，其中包含 RTX 内核程序以及其中的其他程序，由 ARM CC 编译。现在我们需要将 IDE 从 KEIL(ARM CC) 更改为 Eclipse(GCC)。当我们尝试在 Eclipse GCC 编译器中编译它时，它在 RTX_Config.c 和 RTX_Config.h 文件中显示错误。其他文件使用 GCC 编译器编译成功。但是 RTXConfig.c 文件有编译器特定的代码，这些代码没有被 GCC 编译。有没有使用 GCC 编译器在 Eclipse IDE 中编译这个项目的解决方案？作为初学者，请帮助我。提前致谢

我们有一些特定于 keil 的关键字，例如**irq 、 __swi 、 _** _task 、 __asm ，它们已被 ARM CC (keil) 成功编译，但是当我们尝试将其移植到 GCC Compiler (Eclipse) 时，此编译器无法编译这些关键字并显示错误。有没有办法在 GCC 编译器中编译这些 keil 特定的关键字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-18T06:10:40.907

do_software_interrupt、do_irq 和 do_fiq 分别是 SWI、IRQ 和 FIQ 的中断服务程序。这些函数是在 c 中使用 gcc 的**属性**特性实现的。这是包含 irq、fiq 和软件中断例程的实际 c 代码。

入口.c

```
void __attribute__((interrupt("IRQ"))) do_irq()
{
    //your irq service code goes here
}

void __attribute__((interrupt("FIQ"))) do_fiq()
{
    //your fiq service code goes here
}

void __attribute__((interrupt("SWI"))) do_software_interrupt()
{
    volatile unsigned int int_num;
    asm("LDR r0, [lr, #-4]");
    asm("BIC r0, #0xFF000000");
    asm("MOV %0, r0":"=r"(int_num):);
    //based on int_num, you can determine which system call is called
}

void c_start() {
    asm volatile ("SVC 0x5");
    while(1){}
} 
```

# arrays - perl中如何去掉数组中的空字符串？

> ID：13231228
> 
> 赞同：1
> 
> 时间：2012-11-05T11:30:05.257
> 
> 标签：arrays, perl

我有一个包含许多零和“1”的字符串，但我只想要字符串中的零值。所以，我使用 split 函数来拆分“1”，但它似乎会在数组中产生 undef 或空字符串。因此，我尝试使用 foreach 扫描每个数组元素并比较是否存在我认为是“undef”的空字符串将被忽略。作为回报，非空字符串中的那些将不会被忽略，并将被放入另一个变量中。这些问题似乎无法识别我的“undef”变量。

或者还有另一种更好的方法来扫描字符串以提取字符串中“0”的数量？

请帮忙解决这个问题。这是编码：

```
#!/usr/bin/perl

  use strict;
 use warnings;

  my $data = '111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000011111
';

  my @values = split('1', $data);
  my $zero = "0";
foreach my $val (@values)
{
    if (!defined$val)
    {
      $zero= $val;
     }

}
  print "$zero\n";

  exit 0; 
```

非常感谢。

问候，尼基

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:41:38.703

尝试使用[`tr`](http://perldoc.perl.org/functions/tr.html). 它将所有出现的*0*音译为空字符串并返回它所做的更改次数。那是你的零个数。

```
my $data = '111100';
my $count = $temp =~ tr/0//;
print $count; 
```

* * *

查看[这篇博客文章](http://www.chengfu.net/2005/10/count-occurrences-perl/)，了解不同方法的基准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:41:29.543

```
my $data = '111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000011111
';       
my @arr=$data=~/0/g;
print scalar(@arr); 
```

使用匹配操作，可以将所有 0 提取到一个数组中，并且数组的长度将给出零的计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:48:33.163

不确定您需要什么，但正则表达式可能有用：

```
#!/usr/bin/perl
use strict;
use warnings;

my $data = '111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000011111';

# If you want an array of zeros

my @zeros = $data =~ /0/g;
print "@zeros\n";

# If you want the zeros together

my @multizeros = $data =~ /0+/g;
print "@multizeros\n"; 
```

给出：

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
000000000000000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:43:04.617

尽管正则表达式匹配可能是最有效的方法，正如 Guru 和 cdarke 已经建议的那样，您*可以*通过拆分`1`s 组而不是单个`1`s 来进行拆分：

```
$d = 101111001;
say scalar split /1+/, $d;    # prints 3 
```

# javascript - 表单在 jquery hovercard 中不起作用

> ID：13231232
> 
> 赞同：0
> 
> 时间：2012-11-05T11:30:19.790
> 
> 标签：javascript, jquery, jquery-plugins, hover, mouseover

我正在使用[jquery hovercard 插件](http://designwithpc.com/Plugins/Hovercard)。我创建了一个包含表单的 hiddendiv。所以它在悬停时返回表单。

后来我注意到表单的提交、重置、清除选项不起作用。让我知道我在哪里做错了。我认为这个插件不能处理`<form>`. 我可能错了。

以下是我尝试过的。

```
<script type="text/javascript" src="http://dl.dropbox.com/u/40036711/jquery.hovercard.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function() {
$('#demo-basic').hovercard({detailsHTML:$('#hiddenDiv').html(),
width: 210
});
});
</script>
<style type="text/css">
body
{
    font-family:Sans-serif;
    font-size:12px;
    padding:15px;
    line-height:1.5em;
}
#hiddenDiv
{
    display:none;
}
strong
{
    font-weight:bold;
}
</style>
</head>
--------------
--------------
<body>
<p><label id="demo-basic">Filter</label></p>
<div id="hiddenDiv">
<form name='testform' action='$action'>
some <input> and <option> tags...
<a href='javascript:document.testform.reset()'><img src='$path/resetimage.png'></a>
<a href='javascript:document.testform.clear()'><img src='$path/clearimage.png'></a>
<a href='javascript:document.testform.submit()'><img src='$path/submitimage.png'></a>
</form>
-----
----- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:06:04.787

明白了，不是插件的问题，错误的原因是我试图`<form>`在另一个`<form>`很愚蠢的内部使用。实际上html文件太大了，我不知道。

# php - Auth::attempt($credentials) 总是返回 false

> ID：13231234
> 
> 赞同：2
> 
> 时间：2012-11-05T11:30:24.720
> 
> 标签：php, laravel

嗨，我是 laravel 的新手，我正在尝试编写登录表单的功能，代码如下：

这就是我创建新用户的方式（效果很好）

```
public function action_newuser()
{

    $email = Input::get('email');
    $password = Input::get('password');
    $new_user = Input::get('new_user', 'off');
    $first_name= Input::get('firstname');
    $last_name= Input::get('last_name');
    $username= Input::get('username');

    $user = new User();
    $user->email = $email;
    $user->password = Hash::make($password);
    $user->first_name =$first_name;
    $user->last_name= $last_name;
    $user->username= $username;
    try{

        $user->save();
    }
    catch(Exception $e) {
        echo "Failed to create new user!";
    } 
```

这是我的登录功能：

```
public function action_login()
{   

    $password = Input::get('password');    
    $username= Input::get('username');
    $remember= Input::get('remember', 'off');
    if($remember =='off')   $remember=FALSE;
    if($remember =='on') $remember=TRUE;
    $credentials = array(
            'username' => $username,
            'password' => $password,
            'remember' => $remember   
        );
     if( Auth::attempt($credentials)) 
        {
            return Redirect::to('dashboard/index');
        } 
        else 
        {
            #I put this line to check are the values passed from my form are correct.
            echo $password.'  ' .$username.' '. $remember;

        }

} 
```

当我提交登录表单时，它总是显示一个空白页面，其中包含 $password、$username 和 $remember 值。这意味着 Auth::attempt() 不能正常工作。

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:09:13.077

耍我！虽然我已经检查了很多次，但我在 auth 配置文件中看不到该行`'username' => 'email',` 。

应该是`'username' => 'username',`因为我将使用用户名登录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:32:28.900

检查以确保您的数据库密码字段为 60 个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-01T01:50:22.597

**致所有面临 Auth::attempt() 登录失败且具有有效信用的 laravel 4 开发人员！**

解决方案：

*   **在 app/config/app.php 更改类型：'cipher' => MCRYPT_RIJNDAEL_128 到 'cipher' => MCRYPT_RIJNDAEL_256 并重新散列所有密码**
*   在模型添加方法中：

    ```
     public function setPasswordAttribute($pass) {

         $this->attributes['password'] = Hash::make($pass);
     } 
    ```

*   在用户控制器中：

    //创建用户或注册

    ```
     public function postCreate() {

        $input = Input::all();
        $user = new User;
        $user->username = Input::get('username');
        $user->email = Input::get('email');
        $user->password = Hash::make(Input::get('password'));    
        $user = User::create($input);
        return Redirect::action("Frontend\HomeController@index"); 
    ```

    }

    //登录或登录

    ```
    public function postSignin() {

        $userdata = array(
            'username' => Input::get('username'),
            'password' => Input::get('password')
        );

        if (Auth::attempt($userdata, true)) {
             Session::put('username', Auth::user()->username);
             return Redirect::action("Frontend\HomeController@index");
        } else {
             return Redirect::action("Frontend\UserController@getLogin")
                    ->with('message', 'Your username/password combination was incorrect')
                    ->withInput();
    } 
    ```

希望我帮助了那里的人

# c# - 是否可以在控制器中获取当前的 Unity 容器

> ID：13231236
> 
> 赞同：8
> 
> 时间：2012-11-05T11:30:34.540
> 
> 标签：c#, unity-container

我像这样注册了统一容器：

```
 var container = new UnityContainer();

    container.RegisterType<ICacheManager, CacheManager>(new ContainerControlledLifetimeManager()) 
```

是否可以从控制器访问此“容器”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-26T23:49:36.513

不知道你为什么需要它，但这里是代码：

```
public ActionResult Area51()
    {
        var _service = DependencyResolver.Current.GetService(typeof (IDummyService));

        return View();
    } 
```

如果您尝试做的是注入控制器，您应该设置 DepedencyResolver 以在 Global.asax 的应用程序启动中使用您的 IoC 容器。然后，MVC 会自动向你的控制器注入依赖。

```
var container = new UnityContainer();
DependencyResolver.SetResolver(new Unity.Mvc4.UnityDependencyResolver(container)); 
```

在这里查看更多示例：

[http://www.dotnet-tricks.com/Tutorial/dependencyinjection/632V140413-Dependency-Injection-in-ASP.NET-MVC-4-using-Uni​​ty-IoC-Container.html](http://www.dotnet-tricks.com/Tutorial/dependencyinjection/632V140413-Dependency-Injection-in-ASP.NET-MVC-4-using-Unity-IoC-Container.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T11:49:54.593

我假设您正在使用容器解析一些 Controller 实例。如果是这种情况，您可以让控制器像其他任何东西一样接收 IUnityContainer 作为依赖项。

你想达到什么目的？在已解析的类中获取容器并不是很好，因为它将类与容器耦合在一起，并且通常可以用其他机制替换。

```
class Program
{
    static void Main(string[] args)
    {
        var container = new UnityContainer();

        var foo = container.Resolve<MyController>();
    }
}

public class MyController
{
    private IUnityContainer container;

    public MyController(IUnityContainer container)
    {
        this.container = container;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T11:57:14.667

为了方便起见，我经常这样做的一种方法是将容器声明为 Global.ascx.cs 文件中的全局变量，例如：

```
public class MvcApplication : System.Web.HttpApplication
{
    public static UnityContainer Container;

    protected void Application_Start()
    {
         // assuming your initialize here
    } 
} 
```

然而，这是相当hack-ish。

正确的做法是使用 Unity 来解析您的控制器（[请参阅这篇关于创建统一控制器工厂的文章](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcdependencyinjection_topic2.aspx)），然后允许统一在解析控制器时将任何依赖项注入您的控制器。

所以像这样的控制器：

```
public MyController: Controller {

 public ICacheManager CacheManager {get;set;}

} 
```

将自动解析您的容器已注册的任何依赖项。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-05T12:14:05.820

尽管有可能，但最好避免它。

最好通过构造函数参数获取控制器所需的任何依赖项。这样，类（控制器）就清楚地说明了它运行所需的依赖项。

如果配置正确，容器将提供这些依赖项及其依赖项（如果有的话），依此类推。

IoC 容器的使用通常应仅限于应用程序内的一个位置（称为*组合根*）。对容器的任何额外引用/调用都容易导致[Service Locator 反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。有关这种方法可能不好的原因，请参阅链接文章。

# mysql - 将 .sql 文件导入 MySQL 时出现错误 1064 (42000)

> ID：13231239
> 
> 赞同：2
> 
> 时间：2012-11-05T11:30:48.063
> 
> 标签：mysql, import, mysqldump

我正在尝试将客户端的数据库转储导入在 Windows Vista 64 位上运行的 MySQL 5.5.27（用于 Win64）。但是，我得到

> 第 24 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的 '*/' 附近使用正确的语法

我在下面粘贴了转储文件的前几行：

```
CREATE DATABASE  IF NOT EXISTS `foobar` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `foobar`;
-- MySQL dump 10.13  Distrib 5.5.16, for osx10.5 (i386)
--
-- Host: localhost    Database: foobar
-- ------------------------------------------------------
-- Server version   5.5.21

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Temporary table structure for view `reference`
--

CREATE TABLE `reference` (
  `xyz` varchar(50),
  `ABC` varchar(50),
  `asdf` varchar(50),
  `abcd` varchar(7),
  `Axe` varchar(255),
  `Age` varchar(255)
) ENGINE=MyISAM */;
SET character_set_client = @saved_cs_client; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:03:11.537

尝试以这种方式更改脚本 -

```
...
CREATE TABLE `reference` (
  `xyz` varchar(50),
  `ABC` varchar(50),
  `asdf` varchar(50),
  `abcd` varchar(7),
  `Axe` varchar(255),
  `Age` varchar(255)
) ENGINE=MyISAM */;
SET character_set_client = @saved_cs_client;*/ 
```

或者只是删除那部分 -

```
...
CREATE TABLE `reference` (
  `xyz` varchar(50),
  `ABC` varchar(50),
  `asdf` varchar(50),
  `abcd` varchar(7),
  `Axe` varchar(255),
  `Age` varchar(255)
); 
```

# ios - draw pie chart using iOS quartz 2D

> ID：13231244
> 
> 赞同：2
> 
> 时间：2012-11-05T11:31:01.513
> 
> 标签：ios, ipad, core-graphics, quartz-2d, pie-chart

I am looking for a tutorial where I can draw pie chart programmatically using Core Graphics or Quartz 2D in iOS. I want to understand how can we draw the PIE Chart which is gradient and having multi-color filled slices in it.

Note: Not looking for Coreplot framework.

Please share me some links regarding the same.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T11:34:11.567

I have used "XYPieChart" library in my so many apps and it's very easy to modify.

Available on github.

Link is given below:

[https://github.com/xyfeng/XYPieChart](https://github.com/xyfeng/XYPieChart)

Still needs any help then let me know.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T15:48:03.990

You can also use [this library](https://github.com/rajatdeep/iOS-PieChartDemo), as this is also completely customisable and too easy to use.

Just use one line of code, this method along with the pie chart view used & the array with values to be rendered in the pie chart view:

```
- (void)renderInLayer:(RJPieChart *)layerHostingView dataArray:(NSMutableArray*)dataArray 
```

Hope this helps.

Thanks

# vb.net - .NET - 如何在一定步长的范围内生成随机数？

> ID：13231247
> 
> 赞同：3
> 
> 时间：2012-11-05T11:31:09.610
> 
> 标签：vb.net, random, range

我想生成一个范围内的随机数（比如 0 到 1 之间） - 但有一定的步长（比如 0.05）。有一个[python 函数](http://www.tutorialspoint.com/python/number_randrange.htm)可以做到这一点：

```
random.randrange ( [start,] stop [,step] ) 
```

所以我的问题不是如何在一个范围内生成随机数——而是我需要一种方法来以一定的**步长**来做到这一点。如何在 .NET 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:55:55.373

您可以生成一个介于 0 和 20 之间的随机整数并将结果除以 20

```
Dim rnd = New Random()
Dim nextValue = rnd.Next(21) / 20 
```

这将为您提供一个介于 0 和 1（含）之间的随机数，增量为 0.05

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:58:45.700

你可以尝试这样的事情：

```
 Dim objRandom As New System.Random
  Label1.Text = Math.Round(objRandom.NextDouble() * 2, 1) / 2 
```

因此，您创建了一个随机双精度数并将其四舍五入到一位数（例如：0.8）。
然后你把它除以 2 你得到你想要的

# php - 如果在php中满足条件后如何重定向到另一个页面？

> ID：13231254
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:32:05.413
> 
> 标签：php

我已经使用 php 代码重定向到另一个页面，但它不起作用。我不知所措。请帮我。我正在给出代码片段。

```
if($row->cnt==1){
    echo "Succes.";
    // header ('Location:HomePage.php); 
    header("Location:http://localhost/library/HomePage.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:34:11.640

`header`在使用指令之前，您已经在发送内容。

来自[PHP 手册](http://se.php.net/manual/en/function.header.php)

> 请记住，`header()`必须在发送任何实际输出之前调用它，无论是通过普通 HTML 标记、文件中的空白行还是通过 PHP。`include`使用, or , 函数或其他文件访问函数读取代码是一个非常常见的错误，并且在调用`require`之前输出有空格或空行。`header()`使用单个 PHP/HTML 文件时也存在同样的问题。

`echo`您应该在使用前删除`header`.

如果您使用大量文件并且在使用之前不确定是否没有输出，`header`您应该查看[**输出控制功能**](http://se.php.net/manual/en/ref.outcontrol.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:36:56.643

对于通过`header()`调用成功的 PHP 重定向，它必须在任何页面输出之前，即在任何其他 header()、打印或回显语句之前。例如，这将起作用。

```
<?php

header("Location: http://someurl.com");
exit;
?> 
```

虽然这不会：

```
<?php
echo "Some text";
header("Location: http://someurl.com");
exit;
?> 
```

如果你已经在页面上输出了一些东西，你应该像这样通过 Javascript 重定向：

```
<script type="text/javascript">
window.location = "http://someurl.com";
</script> 
```

# regex - Reg exp to match a specific HTTP response code in apache or nginx server logs

> ID：13231262
> 
> 赞同：2
> 
> 时间：2012-11-05T11:32:31.893
> 
> 标签：regex

I am looking for a regexp that could match a specific response code (error code) in apache or nginx webserver logs.

```
10.80.248.64 - - [02/Nov/2012:15:04:40 +0000] "GET //browse/OS HTTP/1.1" 404 497 "-" "-"
10.220.64.11 - - [02/Nov/2012:15:04:54 +0000] "GET / HTTP/1.0" 200 491 "-" "Wget/1.12 (linux-gnu)"
10.80.16.66 - - [29/Oct/2012:11:09:11 +0000] "GET / HTTP/1.1" 302 0 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:7.0.1) Gecko/20100101 Firefox/7.0.1" 
```

The reg exp should be able to match lines with a specific error code like 404, 200 or 302.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T12:39:17.343

Use regex pattern

```
^[^"]*"[^"]*\sHTTP\/[\d.]+"\s+(?:200|302|404)\s.*$
 └─┬─┘│└─┬─┘└┤└────┬─────┘│└┬┘└──────┬──────┘└┤└┤
   │  │  │   │     │      │ │        │        │ │
   │  │  │   │     │      │ │        │        │ └─ anything (including nothing)
   │  │  │   │     │      │ │        │        │ 
   │  │  │   │     │      │ │        │        └─ one space (white-space character)
   │  │  │   │     │      │ │        │
   │  │  │   │     │      │ │        └─ 200 or 302 or 404
   │  │  │   │     │      │ │
   │  │  │   │     │      │ └─ one or more spaces (white-space characters)
   │  │  │   │     │      │
   │  │  │   │     │      └─ one double-quote character
   │  │  │   │     │
   │  │  │   │     └─ HTTP/ followed by a combination of digit(s) and/or dot(s)
   │  │  │   │
   │  │  │   └─ one space (white-space character) 
   │  │  │
   │  │  └─ anything (including nothing) but double-quote character(s)
   │  │
   │  └─ one double-quote character
   │
   └─ anything (including nothing) but double-quote character(s) 
```

# javascript - 如何从代码中以管理员身份运行 Chrome

> ID：13231265
> 
> 赞同：2
> 
> 时间：2012-11-05T11:33:03.330
> 
> 标签：javascript, firefox, visual-c++, google-chrome, plugins

我需要从插件 dll 代码（VC++）以管理员身份运行 Chrome。
但是如果 chrome 窗口处于活动状态，则新创建的窗口没有获得管理员权限。
我正在从 JavaScript 调用插件 dll 代码。创建新窗口后，我关闭了前一个窗口，但同样的情况。
我需要帮助，因为我的插件需要管理员权限。在 Firefox 的情况下也是如此。
（现在我使用 shellExecute 作为管理员创建一个新窗口）。

代码片段：

在这里，我创建了一个 Firefox 实例（所有浏览器都需要类似）

```
StartNewInstance(BSTR Address)  
{  
    // TODO: Add your implementation code here  
    MessageBox(0,L"Inside",L"ParentName",0);  
    TCHAR szEXEPath[2048];  
    GetModuleFileName ( NULL, szEXEPath, 2048 );  
    SHELLEXECUTEINFO Shex;  
    ZeroMemory( &Shex, sizeof( SHELLEXECUTEINFO ) );  
    Shex.cbSize = sizeof( SHELLEXECUTEINFO );  
    Shex.fMask = SEE_MASK_FLAG_NO_UI | SEE_MASK_NOCLOSEPROCESS;  
    Shex.lpVerb = L"runas";  
    Shex.lpFile = L"C:\\Program Files\\Mozilla Firefox\\firefox.exe";  
    Shex.nShow = SW_SHOWNORMAL;  
    Shex.lpParameters = Address;  
    ShellExecuteEx( &Shex );  
    return true;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:48:34.083

您无法以您尝试的方式轻松解决此问题。大多数浏览器可执行文件将检查现有实例并在找到时重用该实例。有一些特定于浏览器的方法可以通过命令行选项调整或跳过该检查，以允许您生成第二个进程，但它们是特定于浏览器的，甚至其中一些浏览器比其他浏览器更卡住。

例如，调用`chrome.exe`（以管理员身份） with`--user-data-dir=c:\some\path`将在第一次调用时创建一个新的（提升的）实例，并在随后的时间重用它，前提是您在命令行上提供相同的用户数据目录（即使另一个（非提升)`chrome`一直以默认值运行。) 有问题的路径可以是任何存在的路径（如果不存在，您可以将其创建为空目录），并且它应该是您的，而不是与其他应用程序共享。它可以是暂时的。

同样，调用`firefox.exe`（以管理员身份） with`-no-remote -profile c:\some\path`将在调用时创建一个新的（提升的）实例，即使具有标准配置文件的实例已经在运行，但后续调用必须使用不同的配置文件路径，否则 Firefox（与 Chrome 不同）将交互地抱怨您实际上是在尝试从同一配置文件目录运行多个实例。

您可以从上面看到，生成一个带有海拔的新浏览器窗口是**可能的，但很麻烦且容易出错，这就引出了一个问题：在新浏览器中，您****究竟需要使用海拔执行什么*？*** 整个浏览器是否真的需要以提升运行，或者您可以将“需要提升”功能委托给辅助进程（您可以轻松地以“管理员身份”生成并通过环回或命名管道进行对话，无论您的主机是什么浏览器是？）

# c# - SPItemEventReceiver 类中的确认框

> ID：13231270
> 
> 赞同：2
> 
> 时间：2012-11-05T11:33:22.480
> 
> 标签：c#, javascript, jquery, sharepoint-2007, messagebox

我想[`SpItemEventReceiver`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.aspx)使用 C# 或任何脚本或插件（例如 jQuery）在类中显示一个确认框。

我已经研究了这个问题，我相信我可以做一些事情，比如构建一个字符串并将其显示在这个项目添加表单上，但我在[这个 SharePoint King 博客文章](http://www.sharepointkings.com/2008/06/redirection-from-event-handler.html)（我不是广告他们）中读到它，如果你搜索它是不可能的文本。这是一段摘录：

> **有什么方法可以在触发事件时显示自定义消息框并继续该事件？**
> 不，从这里描述的方法来看这是不可能的。您可以通过 javascript 对表单的按钮单击发出警报，但不能由事件处理程序完成。

我想知道是否有人可以确认是否可以或我们不能这样做，因为我认为我们可以但不知道如何。这是我正在尝试的一段代码：

```
class className: SPItemEventReceiver
{
    public override void ItemAdding(SPItemEventProperties properties)
    {
        try
        {
            this.DisableEventFiring();
            //Display a Message box here 
```

**[编辑：]**该`HttpContext.Response`属性会在这种情况下工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:44:28.360

在这里显示消息框不起作用；如果它有效，消息框将显示在服务器上，因为这是代码运行的地方。您可以在服务器端使用的是 SharePoint

页面状态[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.sppagestatussetter%28v=office.14%29.aspx)

# iphone - 使用 Objective C 的 Box 文件上传 API

> ID：13231272
> 
> 赞同：1
> 
> 时间：2012-11-05T11:33:23.860
> 
> 标签：iphone, objective-c, ipad, box-api

我一直在尝试`Box 2.0 API`将文件从 Objective C 客户端上传到我的 Box 文件夹。我读过以下几篇文章：

*   [如何在 box api 2.0 中以编程文件上传方式发送表单数据](https://stackoverflow.com/questions/10372708/how-to-send-form-data-in-a-programmatic-file-upload-in-box-api-2-0?rq=1)
*   [API 2.0 如何使用 POSTMAN 上传文件？](https://stackoverflow.com/questions/10500241/api-2-0-how-to-upload-file-with-postman)

如文档中所述，我已尝试成功使用`Curl`.，但在尝试创建`NSMutableUrlRequest`. 这是我的代码：

```
NSURL *URL = [NSURL URLWithString:@"https://api.box.com/2.0/files/content"];
    urlRequest = [[NSMutableURLRequest alloc]
                  initWithURL:URL cachePolicy:NSURLRequestReloadIgnoringCacheData
                  timeoutInterval:30];
    [urlRequest setHTTPMethod:@"POST"];
    AppDelegate *appDelegate = [AppDelegate sharedDelegate];
    NSString *p = [NSString stringWithFormat:@"BoxAuth api_key=%@&auth_token=%@",API_KEY,appDelegate.boxAuthToken];
    [urlRequest setValue:p forHTTPHeaderField:@"Authorization"];
    [urlRequest setValue:@"multipart/form-data, boundary=AaB03x" forHTTPHeaderField:@"Content-Type"];

    NSString *postBody = @"--AaB03x"
            @"content-disposition: form-data; name=\"filename\"; filename=\"test.txt\";"
            @"folder_id=466838434"
            @"Content-type: text/plain"
            @""
            @"testing box api 2.0"
            @""
            @"--AaB03x--";

    NSData *data = [postBody dataUsingEncoding:NSUTF8StringEncoding];
    [urlRequest setHTTPBody:data];
    [urlRequest setValue:[NSString stringWithFormat:@"%d",[data length]] forHTTPHeaderField:@"Content-Length"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T06:21:29.267

我看到您构建 postBody 的方式存在几个问题。在代码中的字符串文字之间添加换行符只是将它们连接起来。您实际上需要有回车和换行来分隔 HTTP 正文的不同部分。此外，您将两个表单元素混合在一起。file 和 folder_id 是两个独立的表单元素。你可以尝试这样的事情：

```
NSString *postBody = @"\r\n--AaB03x\r\n"
                      "Content-Disposition: form-data; filename=\"test.txt\"\r\n"
                      "Content-Type: text/plain\r\n\r\n"
                      "testing box api 2.0"
                      "\r\n--AaB03x\r\n"
                      "Content-Disposition: form-data; name=\"folder_id\";\r\n\r\n"
                      "0"
                      "\r\n--AaB03x--\r\n\r\n"; 
```

我认为只要其他一切都正确设置，这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:05:55.730

使用[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

它使处理多部分表单变得更加容易！

# windows - 异常导致崩溃（Qt SDK 1.2.1 - Qt4.8.1、MinGW、windows）

> ID：13231273
> 
> 赞同：4
> 
> 时间：2012-11-05T11:33:26.087
> 
> 标签：windows, qt, mingw, throw

我有一个丑陋的问题，不胜感激！每当抛出异常时，我的程序都会在 Windows 上崩溃，例如：

```
try
{
   throw QString("lala");
}
catch(QString &s)
{
  ...
} 
```

我在 QtCreator 中使用带有 MinGW 的 Qt 4.8.1。我找到了很多讨论并尝试了

*   使用 -exceptions 重建源代码
*   添加 QMAKE_CXXFLAGS += -fexceptions

但没有变化。Windows 告诉我程序在我抛出错误时崩溃了。在 Linux 下一切正常。

根本不想讨论使用异常的利弊，我想知道这是否是 Qt 或 MinGW 的问题，以及我能做些什么来摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:40:24.410

您没有具体说明“崩溃”的确切含义，但如果您收到类似“应用程序已要求运行时以不寻常的方式退出”之类的消息，则意味着您的异常被完全抛出程序之外，没有被任何东西抓住。因为我相信特定的消息是由 MSVC 运行时产生的，所以 mingw 运行时可能有不同的、具有相同含义的消息，或者根本没有消息。

# drupal-modules - 重新安装drupal模块

> ID：13231281
> 
> 赞同：0
> 
> 时间：2012-11-05T11:33:57.620
> 
> 标签：drupal-modules, uninstallation

我在 Drupal 中的开放层模块遇到了问题，因此决定重新安装它。我想我做得很好。首先我禁用了这些模块，然后我卸载了它们。当我应该再次安装模块时，我无法做到，因为我得到了模块已经安装的消息。当我查看模块列表时，我发现模块仍然存在但已禁用。它不在卸载列表中，目录被删除，表也不存在。我不知道该怎么做才能再次安装模块。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:50:30.030

对不起！我错了。模块映射中的目录没有被删除。这样做了，一切正常。

# e-commerce - Magento 自定义产品自定义选项

> ID：13231289
> 
> 赞同：1
> 
> 时间：2012-11-05T11:34:28.657
> 
> 标签：e-commerce, magento-1.7, magento

我正在研究magento。我想在产品详细信息页面添加下拉菜单。为此，我在后端的产品配置中尝试了自定义选项。但现在的问题是我有超过 10 个下拉菜单，每个都有超过 20 个选项值。在创建新产品时无法手动添加它们。有没有办法在代码中的自定义选项中添加下拉选项值。现在我有以下问题：- **1\. 如何从代码或任何其他方式添加下拉列表选项值。2.添加新产品时如何自动添加自定义选项。**

请尽快回复。如果有任何其他方式可以做到这一点，请在此处提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:54:47.693

尝试以下链接以编程方式创建和更新自定义选项 [http://subesh.com.np/2009/12/adding-custom-options-product-magento/](http://subesh.com.np/2009/12/adding-custom-options-product-magento/)

[如何在magento中以编程方式更新自定义选项？](https://stackoverflow.com/questions/10798158/how-to-update-custom-options-programatically-in-magento/)

# java - 如何在测试期间在 Spring 中禁用 @PostConstruct

> ID：13231293
> 
> 赞同：12
> 
> 时间：2012-11-05T11:34:48.110
> 
> 标签：java, spring, annotations, postconstruct

在 Spring 组件中，我有一个`@PostConstruct`声明。类似于下面：

```
@Singleton
@Component("filelist")
public class FileListService extends BaseService {

    private List listOfFiles = new Arrays.list();

    //some other functions

    @PostConstruct
    public void populate () {

        for (File f : FileUtils.listFiles(new File(SystemUtils.JAVA_IO_TMPDIR), new String[]{"txt"},true)){
            listOfFiles.add(f.getName());
        }   
    }

    @Override
    public long count() throws DataSourceException {
        return listOfFiles.size();
    }

    //  more methods .....
} 
```

在单元测试期间，我不想`@PostConstruct`调用该函数，有没有办法告诉 Spring 不要进行后期处理？或者在非测试期间调用类的启动方法是否有更好的注释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T11:39:31.447

任何：

1.  测试中的子类`FileListService`并覆盖该方法以不执行任何操作（正如 mrembisz 所说，您需要将子类放在仅扫描测试的包中并将其标记为`@Primary`）
2.  更改`FileListService`以使 Spring 注入文件列表（无论如何这是一个更简洁的设计），并在您的测试中注入一个空列表
3.  只需创建它`new FileListService()`并自己注入依赖项
4.  使用不同的配置文件/类启动 Spring，而不使用注释配置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T13:07:21.937

由于您不是测试`FileListService`而是依赖类，因此您可以模拟它进行测试。在仅由测试上下文扫描的单独测试包中制作模拟版本。用注释标记它，`@Primary`使其优先于生产版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-21T01:33:46.277

声明一个 bean 以覆盖现有类并使其成为 Primary。

```
@Bean
@Primary
public FileListService fileListService() {
 return mock(FileListService.class);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-25T10:35:16.000

检查配置文件是这样的：

```
 @PostConstruct
    public void populate () {
       if (!Arrays.asList(this.environment.getActiveProfiles()).contains("test")) {    
         for (File f : FileUtils.listFiles(new File(SystemUtils.JAVA_IO_TMPDIR), new 
              String[]{"txt"},true)){
            listOfFiles.add(f.getName());
          } 

        }           
    } 
```

# c++ - C++ 如何计算正方形、矩形和十字的面积。用户将输入坐标

> ID：13231299
> 
> 赞同：-3
> 
> 时间：2012-11-05T11:34:59.957
> 
> 标签：c++, math

正如我的标题中提到的，我如何计算正方形、矩形和交叉的面积？用户将输入所有坐标。对于 square 和 rect ，该区域很容易但交叉，我该怎么做？如果用户交叉输入坐标，我如何获得这三个坐标的长度和宽度，以便我的面积计算准确？下面是一个十字架的插图，这很棘手。

```
 ****
    *  *
 ****  ****
 *        *
 ****  ****
    *  *
    ****

//this is for square and rectangle,but to take note,user will input from from bottom left to right, then top right to left, so the caculation below will than work
l = (((x1-x2)^2 + (y1-y2)^2))^(1/2);
w = (((x1-x4)^2 + (y1-y4)^2))^(1/2);
A=l*w; 
```

以及如何获得形状上的坐标点和形状上的坐标点？

示例：正方形的坐标为 (1,1),(3,1),(1,3),(3,3)

所以正方形的坐标是（2,2）

正方形上的坐标是 (1,2),(2,1),(3,2),(2,3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:41:01.197

十字是两个矩形的叠加，但你只需要计算一次重叠的面积。

总面积为：

面积：

```
 ****
 *  *
 *  *
 *  *
 *  *
 *  *
 **** 
```

加上面积

```
 **********
 *        *
 ********** 
```

减去面积：

```
 ****
 *  *
 **** 
```

获取结果的**绝对值**以避免坐标顺序错误的问题 - 区域始终为正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:51:34.603

```
 a
     |--|
   c ****
  |--*  *
 -****  ****
b|*        *
 -****  ****
     *  *
     ****

 A = (a+b) * (2c+a) - a*b 
```

所以，你真的只需要识别 4 个坐标。垂直条的左上角和右上角，以及水平条的左上角和左下角坐标。

左上垂直：`y_tlv=y_max, x_tlv = {x_min where y=y_max}`
右上垂直：`y_trv=y_max, x_trv = {x_max where y=y_max}`
左上水平：`y_tlh={y_max where x=x_min}, x_tlh=x_min`
左下水平：`y_blh={y_min where x=x_min}, x_blh=x_min`

```
a = abs(x_trv - x_tlv)
b = abs(y_tlh - y_blh)
c = abs(x_tlv - x_tlh) 
```

我将留给您找出识别所需坐标点的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:42:53.223

给定一个像这样简单的十字形状：

```
 A---B
    |   |
 C--D   E--------F
 |    X  Y       |
 G--H   I--------J
    |   |
    K---L 
```

如上所述，您可以找到三个四边形的面积并计算整个图形的面积... ABLK + CFJG - DEHI。这甚至适用于没有直角的倾斜十字架。

如何计算十字形的质心取决于您实际想要的 X 或 Y。要获得 Y，您必须首先找到十字形的边界四边形，然后找到该四边形的质心就很简单了。请记住，如果您允许像我在上面绘制的那样不等长的臂长，则 Y 点不需要包含在十字架本身内！

要找到质心 X，您需要计算 AB 和 KL 的中点，以及 CG 和 FJ 的中点。然后，您可以找到这两条线 AB-KL 和 CG-FJ 的交点，以找到交叉点 X，它位于十字架内部，只要十字架的形状是规则的。

如果您允许任意的十字形状（例如，十字中可能根本没有直角），我认为您不能保证 X 点也位于该形状内，但我懒得以一种或另一种方式证明这一点。

在形状的周长上找到任意点很容易；您只需要选择由边缘连接的任何一对角（例如，EF 或 KH）并在两者之间的向量上选择一个点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:34:11.663

我假设用户至少需要输入以下 4 个坐标：

```
 C1 * * *
       *      *
       *      *
C2 * * *      * * * *
*                   *
*                   *
*  * * *      * * * C3
       *      *
       *      *
       * * * C4 
```

现在，您可以计算 3 个矩形的坐标：

```
 *  * * *
       *  1   *
       *      *
*  * * * **** * * * *
*         2         *
*                   *
*  * * * **** * * * *
       *  3   *
       *      *
       * * *  * 
```

最后是十字架的区域。

# objective-c - 景观 oreintaton 不适用于 ios 6

> ID：13231308
> 
> 赞同：0
> 
> 时间：2012-11-05T11:35:45.130
> 
> 标签：objective-c, ios, ios6, landscape

我正在开发一个 iPhone 应用程序，我必须在其中将 oreintation 更改为 Landscapeleft 和 Landscaperight。它在 iPhone 4 中工作，但在 iPhone 5 中不工作。请让我知道如何为 ios 6 做。我正在使用的代码如下.

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:18:31.433

它不像在 IOS6 中那样好用，我遇到了同样的问题。因为他们引入了新的旋转，但是运行导航控制器的旧方式（因为我的应用程序也需要支持 4.3）确实让它非常困难。

阅读我的问题和解决方案应该可以帮助您：

[我的回答](https://stackoverflow.com/questions/12573317/ios6-rotation-issue/12573405#comment16963053_12573405)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:26:39.907

尝试这个

```
-(BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{

    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

-(BOOL)shouldAutorotate
{

    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{

    return UIInterfaceOrientationMaskLandscapeRight;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:37:29.967

添加此代码

```
-(NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight);
} 
```

它对我有用希望它可以帮助你！

编辑

还要添加此代码

```
- (BOOL)shouldAutorotate
{
    return YES;
} 
```

# mysql - GROUP BY 与列 SQL 的值

> ID：13231312
> 
> 赞同：1
> 
> 时间：2012-11-05T11:35:58.643
> 
> 标签：mysql, sql, select, group-by, sum

我想按类型（M 或 C）显示给定用户的百分比，我尝试使用此查询：

```
SELECT TYPE,user_name,pourcentage_c,pourcentage_m,id_user, 
       COUNT(TYPE) AS crtitique ,COUNT(TYPE) AS majeur
FROM stat_alert  
LEFT OUTER JOIN user_qdf  ON user_qdf.`id` = id_user   
WHERE user_qdf.`id`=id_user AND TYPE='C'
GROUP BY id_user 
UNION ALL
SELECT TYPE,user_name,pourcentage_c,pourcentage_m,id_user,
       COUNT(TYPE) AS crtitique,COUNT(TYPE) AS majeur 
FROM stat_alert  
LEFT OUTER JOIN user_qdf  ON user_qdf.`id` = id_user   
WHERE user_qdf.`id`=id_user AND TYPE='M'
GROUP BY id_user 
```

我想在同一行显示单个用户的关键和重要的百分比和数量

![在此处输入图像描述](../Images/8bd65b6fa7dbee7cb065cfc84af2cc3e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:44:44.703

您应该能够使用与此类似的东西（这基本上是一个`PIVOT`功能）。这会`JOIN`在您的`user_qdf`桌子上执行一次。然后，您应用带有语句的聚合函数来获取每个不同值`CASE`的计数（使用）：`SUM``TYPE`

```
SELECT TYPE, 
  user_name, 
  pourcentage_c, 
  pourcentage_m,
  id_user,
  sum(case when TYPE ='C' then 1 else 0 end) AS crtitique,
  sum(case when TYPE ='M' then 1 else 0 end) AS majeur
FROM stat_alert  
LEFT OUTER JOIN user_qdf  
  ON user_qdf.`id` = id_user   
WHERE user_qdf.`id`=id_user
  AND type IN ('M', 'C')
GROUP BY id_user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:39:42.360

这应该可以工作（现在无法测试）

```
SELECT TYPE,user_name,pourcentage_c,pourcentage_m,id_user,
    SUM(CASE user_qdf_c.TYPE WHEN 'C' 1 ELSE 0 END) AS crtitique,
    SUM(CASE user_qdf_m.TYPE WHEN 'M' 1 ELSE 0 END) AS majeur 
FROM stat_alert  
LEFT OUTER JOIN user_qdf user_qdf_c ON user_qdf_c.`id` = id_user AND TYPE='C'
LEFT OUTER JOIN user_qdf user_qdf_m ON user_qdf_m.`id` = id_user AND TYPE='M'
GROUP BY id_user 
```

这个想法不是使用 COUNT，而是使用 SUM。

**编辑**这可以更好地重写，只使用一个左连接（这意味着**更好的**性能！）请参阅@SashiKant 和@bluefeet 的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:40:57.253

尝试这个：：

```
 SELECT 
 TYPE,
user_name,pourcentage_c,pourcentage_m,id_user,COUNT(TYPE) AS crtitique ,COUNT(TYPE) AS majeur 
```

FROM stat_alert LEFT OUTER JOIN user_qdf ON user_qdf.id = id_user and user_qdf.id=id_user TYPE='C' or TYPE='M' GROUP BY id_user

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:01:48.007

尝试这个：

```
SELECT user_name, pourcentage_c, pourcentage_m, id_user,  
       COUNT(1) AS crtitique, COUNT(1) AS majeur
FROM stat_alert  
LEFT OUTER JOIN user_qdf ON user_qdf.id = id_user  
GROUP BY id_user, TYPE 
```

# android - 无法加载本机库

> ID：13231318
> 
> 赞同：2
> 
> 时间：2012-11-05T11:36:11.153
> 
> 标签：android, java-native-interface, unsatisfiedlinkerror

我正在开发一个 epub 阅读器应用程序，当我加载它时，它显示一个错误，即阅读器无法加载本机库，下面我附上了文件的日志 cat。

```
11-05 15:41:01.980: I/Process(445): Sending signal. PID: 445 SIG: 9
11-05 15:41:02.090: I/ActivityManager(70): Process org.geometerplus.zlibrary.ui.android (pid 445) has died.
11-05 15:41:02.115: E/InputDispatcher(70): channel '406f9968 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
11-05 15:41:02.115: E/InputDispatcher(70): channel '406f9968 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader (server)' ~ Channel is unrecoverably broken and will be disposed!
11-05 15:41:02.175: I/WindowManager(70): WIN DEATH: Window{406f9968 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader paused=true}
11-05 15:41:02.235: I/WindowManager(70): WIN DEATH: Window{406ffa08 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader paused=true}
11-05 15:41:02.425: I/WindowManager(70): WIN DEATH: Window{40705430 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader paused=true}
11-05 15:41:02.565: E/InputDispatcher(70): Received spurious receive callback for unknown input channel.  fd=181, events=0x8
11-05 15:41:02.565: E/InputDispatcher(70): Received spurious receive callback for unknown input channel.  fd=185, events=0x8
11-05 15:41:02.785: I/ActivityManager(70): Start proc org.geometerplus.zlibrary.ui.android:crash for activity org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.crash.MissingNativeLibraryActivity: pid=468 uid=10044 gids={3003, 1015}
11-05 15:41:06.005: I/ActivityManager(70): Displayed org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.crash.MissingNativeLibraryActivity: +3s304ms (total +18s82ms)
11-05 15:41:13.185: D/dalvikvm(328): GC_EXPLICIT freed 321K, 54% free 2540K/5511K, external 1625K/2137K, paused 107ms
11-05 15:41:15.705: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 15:41:21.855: D/dalvikvm(285): GC_EXPLICIT freed 9K, 55% free 2595K/5767K, external 1625K/2137K, paused 74ms
11-05 15:45:38.435: I/ActivityManager(70): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader } from pid 145
11-05 15:45:38.855: I/ActivityManager(70): Start proc org.geometerplus.zlibrary.ui.android for activity org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader: pid=477 uid=10044 gids={3003, 1015}
11-05 15:45:44.916: D/dalvikvm(70): GREF has increased to 401
11-05 15:45:45.376: D/dalvikvm(477): GC_EXPLICIT freed 435K, 51% free 3062K/6151K, external 1625K/2137K, paused 117ms
11-05 15:45:45.555: D/dalvikvm(477): GC_EXPLICIT freed 5K, 51% free 3057K/6151K, external 1625K/2137K, paused 109ms
11-05 15:45:45.685: D/dalvikvm(477): GC_EXPLICIT freed 13K, 51% free 3048K/6151K, external 1625K/2137K, paused 83ms
11-05 15:45:45.836: D/dalvikvm(477): GC_EXTERNAL_ALLOC freed 1K, 51% free 3057K/6151K, external 1625K/2137K, paused 114ms
11-05 15:45:46.345: I/ActivityManager(70): Displayed org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader: +7s531ms
11-05 15:45:48.975: W/dalvikvm(477): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lorg/geometerplus/fbreader/formats/PluginCollection;
11-05 15:45:48.985: W/dalvikvm(477): threadid=9: thread exiting with uncaught exception (group=0x40015560)
11-05 15:45:49.046: W/System.err(477): java.lang.ExceptionInInitializerError
11-05 15:45:49.067: W/System.err(477):  at org.geometerplus.fbreader.library.Book.getPlugin(Book.java:159)
11-05 15:45:49.067: W/System.err(477):  at org.geometerplus.fbreader.library.Book.<init>(Book.java:135)
11-05 15:45:49.075: W/System.err(477):  at org.geometerplus.fbreader.library.Book.getByFile(Book.java:96)
11-05 15:45:49.086: W/System.err(477):  at org.geometerplus.fbreader.fbreader.FBReaderApp.openBookInternal(FBReaderApp.java:233)
11-05 15:45:49.115: W/System.err(477):  at org.geometerplus.fbreader.fbreader.FBReaderApp$1.run(FBReaderApp.java:157)
11-05 15:45:49.115: W/System.err(477):  at org.geometerplus.android.util.UIUtil$3$1.run(UIUtil.java:120)
11-05 15:45:49.125: W/System.err(477): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load NativeFormats-v2: findLibrary returned null
11-05 15:45:49.125: W/System.err(477):  at java.lang.Runtime.loadLibrary(Runtime.java:429)
11-05 15:45:49.146: W/System.err(477):  at java.lang.System.loadLibrary(System.java:554)
11-05 15:45:49.146: W/System.err(477):  at org.geometerplus.fbreader.formats.PluginCollection.<clinit>(PluginCollection.java:33)
11-05 15:45:49.166: W/System.err(477):  ... 6 more
11-05 15:45:49.177: I/ActivityManager(70): Starting: Intent { act=android.fbreader.action.CRASH dat=ExceptionInInitializerError: cmp=org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.crash.MissingNativeLibraryActivity } from pid 477
11-05 15:45:49.325: I/Process(477): Sending signal. PID: 477 SIG: 9
11-05 15:45:49.578: I/ActivityManager(70): Process org.geometerplus.zlibrary.ui.android (pid 477) has died.
11-05 15:45:49.586: E/InputDispatcher(70): channel '407cc278 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
11-05 15:45:49.586: E/InputDispatcher(70): channel '407cc278 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader (server)' ~ Channel is unrecoverably broken and will be disposed!
11-05 15:45:49.805: W/ActivityManager(70): Activity pause timeout for HistoryRecord{406e37c0 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader}
11-05 15:45:49.975: I/WindowManager(70): WIN DEATH: Window{407cc278 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader paused=true}
11-05 15:45:50.146: I/WindowManager(70): WIN DEATH: Window{407e92f0 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader paused=true}
11-05 15:45:50.265: E/InputDispatcher(70): Received spurious receive callback for unknown input channel.  fd=152, events=0x8
11-05 15:45:50.746: D/dalvikvm(468): GC_EXTERNAL_ALLOC freed 312K, 50% free 2954K/5895K, external 2032K/2137K, paused 229ms
11-05 15:45:51.055: W/InputManagerService(70): Got RemoteException sending setActive(false) notification to pid 477 uid 10044
11-05 15:45:53.208: I/ActivityManager(70): Displayed org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.crash.MissingNativeLibraryActivity: +2s884ms
11-05 15:45:57.405: W/IInputConnectionWrapper(145): showStatusIcon on inactive InputConnection
11-05 15:46:05.297: D/dalvikvm(456): GC_EXPLICIT freed 76K, 52% free 2633K/5379K, external 1625K/2137K, paused 143ms
11-05 15:46:10.276: D/dalvikvm(468): GC_EXPLICIT freed 13K, 50% free 2964K/5895K, external 2379K/2971K, paused 111ms
11-05 15:46:15.775: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 15:50:04.305: I/ActivityManager(70): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader } from pid 145
11-05 15:50:04.495: I/ActivityManager(70): Start proc org.geometerplus.zlibrary.ui.android for activity org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader: pid=491 uid=10044 gids={3003, 1015}
11-05 15:50:09.456: D/dalvikvm(491): GC_EXPLICIT freed 454K, 51% free 3062K/6151K, external 1625K/2137K, paused 139ms
11-05 15:50:09.765: D/dalvikvm(491): GC_EXPLICIT freed 7K, 51% free 3057K/6151K, external 1625K/2137K, paused 148ms
11-05 15:50:09.945: D/dalvikvm(491): GC_EXPLICIT freed 1K, 51% free 3057K/6151K, external 1625K/2137K, paused 146ms
11-05 15:50:10.435: D/dalvikvm(491): GC_EXTERNAL_ALLOC freed 11K, 51% free 3057K/6151K, external 1625K/2137K, paused 424ms
11-05 15:50:11.325: I/ActivityManager(70): Displayed org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader: +6s905ms
11-05 15:50:13.985: W/dalvikvm(491): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lorg/geometerplus/fbreader/formats/PluginCollection;
11-05 15:50:13.997: W/dalvikvm(491): threadid=9: thread exiting with uncaught exception (group=0x40015560)
11-05 15:50:14.166: W/System.err(491): java.lang.ExceptionInInitializerError
11-05 15:50:14.166: W/System.err(491):  at org.geometerplus.fbreader.library.Book.getPlugin(Book.java:159)
11-05 15:50:14.166: W/System.err(491):  at org.geometerplus.fbreader.library.Book.<init>(Book.java:135)
11-05 15:50:14.166: W/System.err(491):  at org.geometerplus.fbreader.library.Book.getByFile(Book.java:96)
11-05 15:50:14.175: W/System.err(491):  at org.geometerplus.fbreader.fbreader.FBReaderApp.openBookInternal(FBReaderApp.java:233)
11-05 15:50:14.175: W/System.err(491):  at org.geometerplus.fbreader.fbreader.FBReaderApp$1.run(FBReaderApp.java:157)
11-05 15:50:14.185: W/System.err(491):  at org.geometerplus.android.util.UIUtil$3$1.run(UIUtil.java:120)
11-05 15:50:14.185: W/System.err(491): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load NativeFormats-v2: findLibrary returned null
11-05 15:50:14.185: W/System.err(491):  at java.lang.Runtime.loadLibrary(Runtime.java:429)
11-05 15:50:14.235: W/System.err(491):  at java.lang.System.loadLibrary(System.java:554)
11-05 15:50:14.235: W/System.err(491):  at org.geometerplus.fbreader.formats.PluginCollection.<clinit>(PluginCollection.java:33)
11-05 15:50:14.235: W/System.err(491):  ... 6 more
11-05 15:50:14.365: I/ActivityManager(70): Starting: Intent { act=android.fbreader.action.CRASH dat=ExceptionInInitializerError: cmp=org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.crash.MissingNativeLibraryActivity } from pid 491
11-05 15:50:14.456: I/Process(491): Sending signal. PID: 491 SIG: 9
11-05 15:50:14.621: I/ActivityManager(70): Process org.geometerplus.zlibrary.ui.android (pid 491) has died.
11-05 15:50:14.665: E/InputDispatcher(70): channel '4076a8e0 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
11-05 15:50:14.665: E/InputDispatcher(70): channel '4076a8e0 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader (server)' ~ Channel is unrecoverably broken and will be disposed!
11-05 15:50:14.786: I/WindowManager(70): WIN DEATH: Window{4076a8e0 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader paused=true}
11-05 15:50:14.936: W/ActivityManager(70): Activity pause timeout for HistoryRecord{40613df0 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader}
11-05 15:50:15.376: I/WindowManager(70): WIN DEATH: Window{40611fa0 org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.FBReader paused=true}
11-05 15:50:15.697: E/InputDispatcher(70): Received spurious receive callback for unknown input channel.  fd=152, events=0x8
11-05 15:50:16.796: W/InputManagerService(70): Got RemoteException sending setActive(false) notification to pid 491 uid 10044
11-05 15:50:19.055: I/ActivityManager(70): Displayed org.geometerplus.zlibrary.ui.android/org.geometerplus.android.fbreader.crash.MissingNativeLibraryActivity: +3s151ms
11-05 15:50:24.215: D/dalvikvm(145): GC_EXPLICIT freed 170K, 50% free 3020K/6023K, external 6250K/7660K, paused 141ms
11-05 15:50:29.247: D/dalvikvm(456): GC_EXPLICIT freed 3K, 52% free 2632K/5379K, external 1625K/2137K, paused 130ms
11-05 15:51:15.785: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 15:56:15.819: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:01:15.875: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:06:17.818: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:11:17.846: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:16:17.860: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:21:17.887: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:26:17.895: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:30:38.037: D/PerformBackupThread(70): starting agent for backup of BackupRequest{app=ApplicationInfo{405c2c30 com.android.providers.settings} full=false}
11-05 16:30:38.138: D/BackupManagerService(70): awaiting agent for ApplicationInfo{405c2c30 com.android.providers.settings}
11-05 16:30:38.145: D/BackupManagerService(70): agentConnected pkg=com.android.providers.settings agent=android.app.backup.BackupAgent$BackupServiceBinder@40701198
11-05 16:30:38.445: V/LocalTransport(70): finishBackup()
11-05 16:31:17.939: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:36:17.975: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:41:18.036: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:46:18.105: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:47:00.296: D/dalvikvm(127): GC_CONCURRENT freed 353K, 53% free 2745K/5767K, external 2179K/2672K, paused 24ms+8ms
11-05 16:51:18.136: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:56:18.147: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol
11-05 16:56:52.975: I/dalvikvm(70): Jit: resizing JitTable from 2048 to 4096
11-05 16:58:48.395: D/dalvikvm(70): GC_CONCURRENT freed 972K, 51% free 4474K/9095K, external 3125K/3903K, paused 34ms+16ms
11-05 17:01:18.197: D/SntpClient(70): request time failed: java.net.SocketException: Address family not supported by protocol 
```

# php - 使用 php/curl 登录谷歌并保持登录状态

> ID：13231320
> 
> 赞同：1
> 
> 时间：2012-11-05T11:36:24.490
> 
> 标签：php, curl, google-signin

我正在尝试使用 php curl 登录谷歌。我找到了这篇文章：

[使用 PHP 和 Curl 登录 Google，Cookie 已关闭？](https://stackoverflow.com/questions/8991873/login-to-google-with-php-and-curl-cookie-turned-off)

效果很好。但我的目标是在发布登录请求后保持登录状态。我想保持浏览器会话，所以当我在新标签中打开 gmail 或任何 google 服务时，它应该保持登录状态。

可能吗？如果是，任何帮助或建议将不胜感激。

如果我的问题不够清楚，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-02T20:45:53.907

```
<?php

/* Google App Client Id */
define('CLIENT_ID', 'xxxxxxxxxxxxxxxxx');

/* Google App Client Secret */
define('CLIENT_SECRET', 'xxxxxxxxxxxxxxx');

/* Google App Redirect Url */
define('CLIENT_REDIRECT_URL', 'xxxxxxxxxxxxxxx');

$login_url = 'https://accounts.google.com/o/oauth2/v2/auth?scope=' . urlencode('https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email') . '&redirect_uri=' . urlencode(CLIENT_REDIRECT_URL) . '&response_type=code&client_id=' . CLIENT_ID . '&access_type=online';
if(!$_GET['a'] == callback){
?>
<html>
<head>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
  <style type="text/css">
    #customBtn {
      display: inline-block;
      background: white;
      color: #444;
      width: 190px;
      border-radius: 5px;
      border: thin solid #888;
      box-shadow: 1px 1px 1px grey;
      white-space: nowrap;
    }
    #customBtn:hover {
      cursor: pointer;
    }
    span.label {
      font-family: serif;
      font-weight: normal;
    }
    span.icon {
      background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAB2ElEQVR4AWP4T2NAJwtGLRi14NeNq5+6m99lxb8OcH7lbfs2LuhTd9PP08epYMGfF8/fF2W8cjbFit7lp/x59oR8C35dvfQ62B1oEB70vjSbTAv+vH752t8J2ay38cEfmyo/NJS/iQ2E+iAj9u+nj2Ra8L40E270mwjvH8cOIcv+OLTvQ1UBxHRyLPj37vCXXvFXbsYg08M8/zx9QuVU9Oda+u89rN+X8r0J1v++cwv1k+nv44ZAC4Do5w6Jf3/+IEu1bfyBFR26/psUC/YLQyz4fdoeTcqp9QtWNGnHD9pa0LOFJAuOG0As+HxQ7s9flCCKm/4VjiKnfIVbMGf/TxIs+HklBWj61R3Cfqs8ttzbjysC15/+Bbdg1yVS4uD7673rtyhZrQgwWRHssSHl8ecXmGo+fP0XMw3qA+fWL0AuaRkte38T0HQI8t6YdujpaWTZG+/uJcy7B3d+28bvJOfkl1/fOK6NA5oOR0FbciqO9lYf64/ZWQrkmi6Ltu0/CDTdt+fLiw9/ySnsLr2+6bY+CWgWHuS9cPG5+3/IL66ff3mVvq8Ol+khW/Ouv7tLhQrn6tvbTSenxu0qd1oXb7060m9zZtWx/j2Pjv3993c41MmjFoxaAAB8n/tkbTPVXwAAAABJRU5ErkJggg==') transparent 5px 50% no-repeat;
      display: inline-block;
      vertical-align: middle;
      width: 42px;
      height: 42px;
    }
    span.buttonText {
      display: inline-block;
      vertical-align: middle;
      padding-left: 42px;
      padding-right: 42px;
      font-size: 14px;
      font-weight: bold;
      /* Use the Roboto font that is loaded in the <head> */
      font-family: 'Roboto', sans-serif;
    }
  </style>
</head>

<body>
  <div id="gSignInWrapper">
    <a href="<?= $login_url ?>"><div id="customBtn" class="customGPlusSignIn">
      <span class="icon"></span>
      <span class="buttonText">Google</span>
    </div></a>
  </div>
</body>
<?php
} else {
// Holds the various APIs functions
function GetAccessToken($client_id, $redirect_uri, $client_secret, $code) { 
    $url = 'https://www.googleapis.com/oauth2/v4/token';            

    $curlPost = 'client_id=' . $client_id . '&redirect_uri=' . $redirect_uri . '&client_secret=' . $client_secret . '&code='. $code . '&grant_type=authorization_code';
    $ch = curl_init();      
    curl_setopt($ch, CURLOPT_URL, $url);        
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);        
    curl_setopt($ch, CURLOPT_POST, 1);      
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $curlPost);    
    $data = json_decode(curl_exec($ch), true);
    $http_code = curl_getinfo($ch,CURLINFO_HTTP_CODE);      
    if($http_code != 200) 
        throw new Exception('Error : Failed to receieve access token');

    return $data;
}

function GetUserProfileInfo($access_token) {    
    $url = 'https://www.googleapis.com/oauth2/v2/userinfo?fields=name,email,gender,id,picture,verified_email';  

    $ch = curl_init();      
    curl_setopt($ch, CURLOPT_URL, $url);        
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Bearer '. $access_token));
    $data = json_decode(curl_exec($ch), true);
    $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);     
    if($http_code != 200) 
        throw new Exception('Error : Failed to get user information');

    return $data;
}

// Google passes a parameter 'code' in the Redirect Url
if(isset($_GET['code'])) {
    try {
        // Get the access token 
        $data = GetAccessToken(CLIENT_ID, CLIENT_REDIRECT_URL, CLIENT_SECRET, $_GET['code']);

        // Access Token
        $access_token = $data['access_token'];

        // Get user information
        $user_info = GetUserProfileInfo($access_token);

        var_dump($user_info);

        echo $user_info['id'] . "<br>";

        echo $user_info['email'] . "<br>";

        echo $user_info['name'] . "<br>";

        echo "<img src=".$user_info['picture'].">";

    }
    catch(Exception $e) {
        echo $e->getMessage();
        exit();
    }
}
}
?> 
```

# python - 如何从python解析html文件？

> ID：13231321
> 
> 赞同：-2
> 
> 时间：2012-11-05T11:36:25.893
> 
> 标签：python

> **可能重复：**
> [在 Python 中解析 HTML](https://stackoverflow.com/questions/717541/parsing-html-in-python)

我是python的新手，我正在使用python。我已经从我的站点下载了HTML文件。下载的HTML文件有一些url。我只想使用 python 将该 HTML 文件中的一些 url 写入单独的文本文件。我该怎么做？谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:37:39.207

使用[美丽的汤](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。

> Beautiful Soup 是一个 Python 库，用于从 HTML 和 XML 文件中提取数据。它与您最喜欢的解析器一起使用，提供导航、搜索和修改解析树的惯用方式。它通常可以节省程序员数小时或数天的工作时间。

# php - 导航类 PHP

> ID：13231333
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:36:54.713
> 
> 标签：php

您好，我正在学习 PHP 中的 OOP 编程，我正在尝试创建一个导航类（具有正确的 OOP 结构），但不知何故我无法使其工作。我不确定这些类是错误的还是我以错误的方式称呼它们..有人可以看看并帮助我解决这个问题:) 请参阅下面的代码

导航类：

```
<?php
class Navigation implements navigationInterface{

    public $menu = null;
    public $name = null;
    public $klasse = null;
    public $items = null;

    public function __construct($name, $klasse) {

        $this->name = $name;
        $this->klasse = $klasse;

    }

    public function addChild(NavigationItem $item)
    {
        $this->items[] = $item;
    }

    public function getName() {
        return $this->name;
    }

    public function getClass() {
        return $this->klasse;
    }

    public function display() {

        $menu = '<nav class="' . $this->getName() . '"><ul>';

        foreach ($this->items as $item) {

           $menu.= $item->display();

        }

        $menu .= '</ul></nav>';

        return $menu;

    }
}
?> 
```

和我的导航项目类（添加项目）

```
<?php
class NavigationItem implements NavigationItemInterface {

    public $menu = null;

    public function setMenuItem($items) {

        $this->menuItem = $items;
    }

    public function getMenuItem() {
        return $items;
    }

    public function display() {

        return '<li><a class="' . $this->getClass() . '" href="index.php?page=' . $this->getMenuItem() . '.php">' . $this->getMenuItem() . '</a></li>';

    }

}
?> 
```

这就是我认为我应该如何称呼这门课

```
<?php
$menu = new Navigation("navigation", "mainmenu");
$items = new NavigationItem();
$menu_items = array("home", "about", "playground");
$items->setMenuItem($menu_items);
$menu->addChild($items);
echo $menu->display();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:50:11.393

问题是“它不起作用”。尝试这个。顺便说一句，在导航类中，这些公共字段应该是私有的。

```
<?php
   $menu = new Navigation("navigation", "mainmenu");
   $menu_items = array("home", "about", "playground");
   foreach($menu_items as $item) 
   { 
   $items = new NavigationItem();
   $items->setMenuItem($item);
   $menu->addChild($items);
    }
  echo $menu->display(); 
```

?>

# drupal-7 - 打印没有标题的图像

> ID：13231341
> 
> 赞同：0
> 
> 时间：2012-11-05T11:37:06.690
> 
> 标签：drupal-7

我想在不打印标题的情况下获取图像字段。以我正在使用的这种方式，在图像下方打印字段标题：

```
$view = field_view_field('node', $node, 'field_immagine_std');
print render($view); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:11:29.217

我找到了这个解决方案：

```
 print render($content['field_immagine_std'][0]); 
```

# dns - dnsPython - 来自 dns.resolver.query 的回答

> ID：13231344
> 
> 赞同：0
> 
> 时间：2012-11-05T11:37:16.523
> 
> 标签：dns, resolver, dnspython

我需要一些帮助来从特定域获取名称服务器 (NS) 记录。到目前为止，我的脚本没有问题，但现在我意识到从这样的域获取答案有问题：fpv.ukf.sk 使用简单的域，如 google.com、ukf.sk 等。我没有问题。

使用的代码：answers = dns.resolver.query('fpv.ukf.sk', 'NS')

我收到此错误：answers = dns.resolver.query('fpv.ukf.sk', 'NS') File "build\bdist.win32\egg\dns\resolver.py"，第 920 行，查询 raise_on_no_answer，source_port ）文件“build\bdist.win32\egg\dns\resolver.py”，第 858 行，在查询 raise_on_no_answer 中）文件“build\bdist.win32\egg\dns\resolver.py”，第 133 行，在**init** raise NoAnswer NoAnswer

为什么我在发送对 fpv.ukf.sk 域的查询时无法得到答案的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:54:36.543

如果您发送任何关于 fpv.ukf.sk 的查询，您会看到没有答案。这就是 Python 异常向您展示的内容。所以你得到了预期的行为。

试着做：

```
nslookup fpv.ukf.sk -type=NS 
```

这样，您将对系统中配置的名称服务器进行 dns 查询。如果权威服务器是不同的，你可以如下。

```
nslookup fpv.ukf.sk <authoritative_nameserver> -type=NS 
```

使用此命令，您可以对任何 dns 查询进行故障排除。

# php - 如何在不刷新父窗口内容的情况下使用 jQuery 在父窗口中提交表单（Ajax 提交）

> ID：13231353
> 
> 赞同：3
> 
> 时间：2012-11-05T11:37:44.883
> 
> 标签：php, javascript, jquery, jquery-ui

我正在尝试使用 jQuery 从子 iframe 提交包含在父窗口中的表单，但运气不佳。

在子窗口中，我具有以下验证功能：

```
<script type="text/javascript" src="templates/js/jquery.js"></script>
<script type="text/javascript" src="templates/js/jquery.validate.js"></script>
<script>
    $(document).ready(function(){
        $("#form_invoice_item").validate({
            submitHandler: function (form) {

                // Check if main invoice already saved
                if ($('#invoice_id').val() == "") {

                    // Change target to processing iframe
                    try {
                        parent.$('#invoice_form').ajaxSubmit();
                    } catch(e) { //debug
                        alert ("Error:" + e);
                    }

                } else {
                    alert ("Saving invoice " + $('#invoice_id').val() + ' items');                         }

                //form.submit(); //debug
            }
        });              
    });
</script>
<form method="post" id="form_invoice_item" name="form_invoice_item" action="index.php" target="invoice_items"> 
```

发生的错误`parent.$('#invoice_form').ajaxSubmit();`是

> 错误：TypeError：对象 [对象对象] 没有方法 'ajaxSubmit'

如果我使用以下纯 Javascript 代码片段，则没有问题（显然这不是 jQuery，但它可以完成工作）。我如何在 jQuery 中执行此操作：

```
parent.document.getElementById('invoice_form').target='process';
parent.document.getElementById('invoice_form').submit();
parent.document.getElementById('invoice_form').target=''; 
```

我有一个名为 process 的隐藏 iframe，它的 display 属性设置为 hidden。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:39:33.500

只需使用父选择器：

```
$('#invoice_form',window.parent.document) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:40:11.797

这应该有效：

```
$(parent).find('#invoice_form').submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:40:21.743

如果您在弹出窗口中并且想要**访问打开的窗口**，请使用`window.opener`.

试试这个：

```
window.opener.$('#invoice_form').ajaxSubmit(); 
```

而不是这个：

```
parent.$('#invoice_form').ajaxSubmit(); 
```

另见[这篇](https://stackoverflow.com/questions/2167455/how-to-access-parent-window-object-using-jquery)文章。

**- - - -编辑 - - -**

不要忘记在您调用它的窗口中加载 jQuery 表单插件：

`<script src="http://malsup.github.com/jquery.form.js"></script>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T11:41:06.930

试试这个..

```
$(parent).find('#invoice_form').submit(); 
```

# bash - bash 切入变量和 cd

> ID：13231354
> 
> 赞同：1
> 
> 时间：2012-11-05T11:37:54.740
> 
> 标签：bash

嗨，我遇到了一个非常奇怪的问题。我正在尝试以 root 身份运行以下脚本：

```
loc=$(transmission-remote 192.168.1.74:9091 --auth=user:password -t$TORRENTID -i |sed -e '1d;$d;s/^ *//'|grep Location: |cut -s -d : -f2) 
cd "$loc" 
```

但是得到错误消息：

```
cd: can't cd to  /leprechaun_tv-shows/download/ 
```

但是如果我创建一个新字符串，我会工作：

```
hello= /leprechaun_tv-shows/download/ 
cd $hello 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:40:20.170

你为什么引用`"$loc"`？

如果`$loc`有前导空格，则引用变量扩展将*带有该前导空格*的目录作为参数传递。

例如，以这种方式 cding to root 给了我：

```
 $ cd " /"
 cd: no such file or directory:  / 
```

只需删除引用。例如

```
cd $loc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:42:05.947

作为 Brian 解决方案的替代方案，如果您仍然需要`$loc`引用 in`cd "$loc"`因为路径可能包含任何空格，那么只需使用`sed 's/^ *//g'`修剪 中的任何前导空格`$loc`，如下所示：

```
loc=$(transmission-remote 192.168.1.74:9091 --auth=user:password -t$TORRENTID -i |sed -e '1d;$d;s/^ *//'|grep Location: |cut -s -d : -f2 | sed 's/^ *//g') 
cd "$loc" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:14:19.983

由于您在 中似乎有一些初始空格`$loc`，因此您可以使用 bash 的参数扩展对其进行修剪：

```
loc=$(transmission-remote 192.168.1.74:9091 --auth=user:password -t$TORRENTID -i |sed -e '1d;$d;s/^ *//'|grep Location: |cut -s -d : -f2) 
cd "${loc%% }" 
```

# ruby-on-rails - Rails 3.2：来自一个模型的多个嵌套数据

> ID：13231357
> 
> 赞同：0
> 
> 时间：2012-11-05T11:38:02.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在以下情况下如何为多个嵌套属性创建表单和操作：

订单项：

```
has_many :item_options, :dependent => :destroy
has_many :product_options, :through => :item_options 
```

产品选项：

```
belongs_to :product
belongs_to :option
has_many :item_options
has_many :line_items, :through => :item_options 
```

项目选项：

```
attr_accessible :line_item_id, :product_option_id  
belongs_to :line_item, :foreign_key => "line_item_id"
belongs_to :product_option,:foreign_key => "product_option_id" 
```

当我创建新的 LineItem 时，我需要创建新的 ItemOption(s)。这是我的表格：

```
 <%= form_for(LineItem.new) do |f| %>
        <%= f.hidden_field :product_id, value: @product.id %>
        <%= f.fields_for :item_options do |io| %>
            <% @product.options.uniq.each do |o| %>
              <%= o.name %>: 
              <%= io.collection_select :product_option_id, o.product_options.where(:product_id => @product.id), :id, :value %>
            <% end %>
        <%= f.submit %>
        <% end %> 
```

当我点击添加到购物车时，我得到：

ItemOption(#70296453751440) 预期，得到 Array(#70296430421140)

将 Accepts_nested_attributes_for :item_options 添加到 LineItem 时，我的选择未显示 :(

和

```
<%= select_tag "product_option_id", options_from_collection_for_select(o.product_options.where(:product_id => @product.id), :id, :value) %>
#item_options not created:
Parameters: {"utf8"=>"✓", "authenticity_token"=>"/WM5/MqPn1yCxjKWoJQmjfko2pR4RiYV0S2KeTTpA3w=", "line_item"=>{"product_id"=>"1"}, "product_option_id"=>"5", "commit"=>"add"} 
```

最后一个，我创建了这样的动作：

```
@line_item = LineItem.new(params[:line_item])
@line_item.item_options.build 
.... 
```

我哪里错了？:( 我完全糊涂了。ps.类似的问题[Rails 3.2 has_many through form submit](https://stackoverflow.com/questions/11199572/rails-3-2-has-many-through-form-submission) 这是表单：

![](../Images/7af0260be2978deb19f48b3ee724ce72.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:57:40.807

看起来这一行：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"/WM5/MqPn1yCxjKWoJQmjfko2pR4RiYV0S2KeTTpA3w=", "line_item"=>{"product_id"=>"1"}, "product_option_id"=>"5", "commit"=>"add"} 
```

参数`product_option_id`在`line_item`哈希之外，将在里面。也许您需要像这样编写选择：

```
<%= select_tag "line_item[product_option_id]", options_from_collection_for_select(o.product_options.where(:product_id => @product.id), :id, :value) %> 
```

我不确定，但也许是这样。也许我需要更多信息，比如失败的确切线路。

* * *

另外，`:foreign_key => "line_item_id"`and`:foreign_key => "product_option_id"`不是必需的，因为`belongs_to`模型名称相同，将使用这些foreign_key。从[api](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)。

> 指定用于关联的外键。默认情况下，这被猜测为带有“<strong>_id”后缀的关联名称。因此，定义`**belongs_to :person**`关联的类将使用“<strong>person_id”作为默认**:foreign_key**。同样，**belongs_to :favorite_person, :class_name => "Person"**将使用外键“<strong>favorite_person_id”。

* * *

**编辑**

抱歉，这`unknown attribute: product_option_id`是因为属性名称是**product_option** _ids，并且是一个数组，而不是唯一值。对于一个`has_many`关系，*列*名是**collection_singular_ids**，select应该是：

```
<%= select_tag "line_item[product_option_ids][]", options_from_collection_for_select(o.product_options.where(:product_id => @product.id), :id, :value) %> 
```

这应该可行，我认为:) ...

# azure - 如何将服务包上传到 Azure 中的 Blob

> ID：13231361
> 
> 赞同：0
> 
> 时间：2012-11-05T11:38:17.963
> 
> 标签：azure

我需要使用 REST API 创建部署。

[http://msdn.microsoft.com/en-us/library/windowsazure/ee460813](http://msdn.microsoft.com/en-us/library/windowsazure/ee460813)

在那里我必须提供一个包 URL，它指的是 Blob 服务中服务包的位置。我不清楚这一点，我必须在那里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:52:13.000

在调用**Create Deployment**操作之前，您需要调用**Put Blob**操作以将服务包上传到您的存储帐户（在容器中）。

上传包后，它的 url 将是这样的：

> [http://myaccount.blob.core.windows.net/mycontainer/mypackage.cspkg](http://myaccount.blob.core.windows.net/mycontainer/mypackage.cspkg)

您需要在**Create Deployment**操作的正文中的 PackageUrl 中传递此 url。

# encoding - QCreator 编码结果

> ID：13231363
> 
> 赞同：1
> 
> 时间：2012-11-05T11:38:29.997
> 
> 标签：encoding, qt-creator

我正在使用 QCreator。我无法显示非英语语言的字符。我尝试使用 更改编码`Edit -> Select encoding -> ..`，但我认为我错误地选择了不同的东西；在重新加载/保存之后，我现在在屏幕上看到奇怪的字符并且看不到我的代码。我有机会保存我的工作吗？我不想丢失任何数据。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:17:52.570

尝试将文件加载到具有自动检测编码的启发式的应用程序中。例如，Firefox（尝试几个不同的浏览器。）如果成功，您可以将文本复制并粘贴到新文件中。

# java - JPA + Datanucleus + 连接池：每个语句打开/关闭连接

> ID：13231364
> 
> 赞同：2
> 
> 时间：2012-11-05T11:38:35.240
> 
> 标签：java, jpa, datanucleus

我正在使用 JPA 和数据核，以便访问 postgresql 数据库。我的设置如下：

持久性.xml

```
<persistence-unit name="postgresql" >
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <class>com.something.DbClass1</class>
    <class>com.something.DbClass2</class>
    <exclude-unlisted-classes/>
    <properties>
        <property name="datanucleus.ConnectionDriverName" value="org.postgresql.Driver"/>
        <property name="datanucleus.ConnectionURL" value="jdbc:postgresql://IP:5432/some_db"/>
        <property name="datanucleus.ConnectionUserName" value="username"/>
        <property name="datanucleus.ConnectionPassword" value="password"/>
        <property name="datanucleus.connectionPoolingType" value="C3P0"/>
    </properties>
</persistence-unit> 
```

我还定义了 C3P0.properties 文件：

```
c3p0.minPoolSize=15
c3p0.maxPoolSize=100
c3p0.initialPoolSize=15 
```

我正在使用这样的EntityManager：

```
EntityManager em = entityManager();
DbClass1 x = em.merge(input);
em.close(); 
```

现在，我在调试日志中有一些奇怪的地方。每个查询似乎都会打开/关闭连接（请参见下文）：有人能指出我在这里做错了什么吗？谢谢 ！

```
13:13:43,969 DEBUG [DataNucleus.Persistence] - Adding support for Java type boolean (persistent=true, DFG=true, embedded=true)
13:13:43,970 DEBUG [DataNucleus.Persistence] - Adding support for Java type byte (persistent=true, DFG=true, embedded=true)
13:13:43,970 DEBUG [DataNucleus.Persistence] - Adding support for Java type char (persistent=true, DFG=true, embedded=true)
...
13:13:44,738 INFO  [com.mchange.v2.c3p0.C3P0Registry] - Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]
13:13:44,766 DEBUG [com.mchange.v2.c3p0.management.DynamicPooledDataSourceManagerMBean] - MBean: com.mchange.v2.c3p0:type=PooledDataSource[1br5qth8q1lseuas1a25ohv|38d0357a] registered.
13:13:44,781 DEBUG [DataNucleus.Connection] - Created tx data source using pooling type of C3P0
13:13:44,781 DEBUG [DataNucleus.Connection] - Registered transactional connection factory under name "rdbms/tx"
13:13:44,796 DEBUG [com.mchange.v2.c3p0.management.DynamicPooledDataSourceManagerMBean] - MBean: com.mchange.v2.c3p0:type=PooledDataSource[1br5qth8q1lseuas1a25ohv|2415a94f] registered.
13:13:44,796 DEBUG [DataNucleus.Connection] - Created nontx data source using pooling type of C3P0
13:13:44,796 DEBUG [DataNucleus.Connection] - Registered nontransactional connection factory under name "rdbms/nontx"
13:13:44,915 INFO  [com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource] - Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -> 1br5qth8q1lseuas1a25ohv|2415a94f, debugUnreturnedConnectionStackTraces -> false, description -> null, driverClass -> org.postgresql.Driver, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1br5qth8q1lseuas1a25ohv|2415a94f, idleConnectionTestPeriod -> 0, initialPoolSize -> 15, jdbcUrl -> jdbc:postgresql://IP:5432/some_db, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 3600, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 100, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 15, numHelperThreads -> 3, numThreadsAwaitingCheckoutDefaultUser -> 0, preferredTestQuery -> null, properties -> {user=******, password=******}, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false ]
13:13:45,201 DEBUG [com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool] - com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager@2a801059.acquireResource() returning. 
13:13:45,203 DEBUG [DataNucleus.Connection] - Connection "com.mchange.v2.c3p0.impl.NewProxyConnection@695cd9c0" opened
13:13:45,205 DEBUG [com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool] - com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager@2a801059.acquireResource() returning. 
13:13:45,205 DEBUG [com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool] - com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager@2a801059.acquireResource() returning. 
13:13:45,308 DEBUG [DataNucleus.Datastore] - Adding RDBMS support for Java type java.lang.Boolean (jdbc-type=BIT, sql-type=BIT, datastore-mapping-type=org.datanucleus.store.rdbms.mapping.BitRDBMSMapping, default=true)
13:13:45,309 DEBUG [DataNucleus.Datastore] - Adding RDBMS support for Java type java.lang.Boolean (jdbc-type=CHAR, sql-type=CHAR, datastore-mapping-type=org.datanucleus.store.rdbms.mapping.CharRDBMSMapping, default=false)
13:13:45,310 DEBUG [DataNucleus.Datastore] - Adding RDBMS support for Java type java.lang.Boolean (jdbc-type=BOOLEAN, sql-type=BOOLEAN, datastore-mapping-type=org.datanucleus.store.rdbms.mapping.BooleanRDBMSMapping, default=false)
13:13:45,311 DEBUG [DataNucleus.Datastore] - Adding RDBMS support for Java type java.lang.Boolean (jdbc-type=SMALLINT, sql-type=SMALLINT, datastore-mapping-type=org.datanucleus.store.rdbms.mapping.SmallIntRDBMSMapping, default=false)
...
13:14:11,791 DEBUG [DataNucleus.Persistence] - Object "<redacted>@52c51614" being inserted into table "<redacted>""
13:14:11,791 DEBUG [DataNucleus.Connection] - Connection added to the pool : [org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@1b78efd8, null] for key=org.datanucleus.ObjectManagerImpl@699c9f16 in factory=ConnectionFactory:nontx[org.datanucleus.store.rdbms.ConnectionFactoryImpl@29422384]
13:14:11,791 DEBUG [DataNucleus.Connection] - Setting autocommit=false to connection: com.mchange.v2.c3p0.impl.NewProxyConnection@455dd32a
13:14:11,842 DEBUG [DataNucleus.Connection] - Connection "com.mchange.v2.c3p0.impl.NewProxyConnection@455dd32a" opened with isolation level "read-committed"
13:14:11,843 DEBUG [DataNucleus.Datastore.Persist] - Retrieving PreparedStatement for connection "com.mchange.v2.c3p0.impl.NewProxyConnection@455dd32a"
13:14:11,843 DEBUG [DataNucleus.Datastore.Native] - INSERT INTO <redacted> ...
13:14:11,843 DEBUG [DataNucleus.Datastore.Native] - INSERT INTO <redacted> ...
13:14:11,897 DEBUG [DataNucleus.Datastore.Persist] - Execution Time = 53 ms (number of rows = 1)
13:14:11,897 DEBUG [DataNucleus.Persistence] - Insert of object "<redacted>" is calling insertPostProcessing for field "<redacted>"
13:14:11,897 DEBUG [DataNucleus.Datastore.Retrieve] - Closing PreparedStatement org.datanucleus.store.rdbms.ParamLoggingPreparedStatement@3970ae0
13:14:11,990 DEBUG [DataNucleus.Connection] - Connection "com.mchange.v2.c3p0.impl.NewProxyConnection@455dd32a" non enlisted to a transaction is being committed.
13:14:11,990 DEBUG [DataNucleus.Connection] - Connection "com.mchange.v2.c3p0.impl.NewProxyConnection@455dd32a" closed
13:14:11,990 DEBUG [DataNucleus.Connection] - Connection removed from the pool : [org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl@1b78efd8, com.mchange.v2.c3p0.impl.NewProxyConnection@455dd32a] for key=org.datanucleus.ObjectManagerImpl@699c9f16 in factory=ConnectionFactory:nontx[org.datanucleus.store.rdbms.ConnectionFactoryImpl@29422384] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:52:47.663

您的意思是您有一个 DataSource（用于 C3P0）并且 DataNucleus 获得一个连接，并在不需要它时调用它。实际上，这正是您应该为连接池 DataSource 执行的操作。C3P0 控制真正的 JDBC 连接何时真正关闭。所以不，据我所知（在公开可见的代码中），DataNucleus 没有做错任何事情。

您引用了一些非事务性代码（因此连接只会为单个操作保留，除非您在文档中设置了持久性属性来保留它），并引用“查询”但我没有看到这样的查询，只是一个“合并”。

# c# - Silverlight：异步 HttpWebRequest 完成后如何更新 UI？

> ID：13231366
> 
> 赞同：0
> 
> 时间：2012-11-05T11:38:48.607
> 
> 标签：c#, silverlight, asynchronous, httpwebrequest

我编写了帮助类来从 Web 服务中检索数据以在 Silverlight 中使用：

```
 public static class RequestMethod
{
    public static string Get = "GET";
    public static string Post = "POST";

}
public static class RequestDataType
{
    public static string Xml = "Xml";
    public static string Json = "application/json";
}
public class HttpWebRequestHelper<T> 
{

    private readonly SynchronizationContext _context;

    private readonly ObservableCollection<T> _collection =
            new ObservableCollection<T>();
    public ObservableCollection<T> Collection
    {
        get { return _collection; }
    }

    public HttpWebRequestHelper()
    {
        _context = SynchronizationContext.Current;
    }

    public ObservableCollection<T> GetCollection ()
    {
        if (HttpWebRequest == null) throw new ArgumentNullException("request");
        HttpWebRequest.BeginGetResponse((result) =>
        {
            var response = HttpWebRequest.EndGetResponse(result);
            var stream = response.GetResponseStream();
            if (stream == null) return;
            var reader = new StreamReader(stream, Encoding.UTF8);
            var responseString = reader.ReadToEnd();
    var desirilizedObject = JsonConvert.DeserializeObject<IEnumerable<T>>(responseString);
            _context.Post((state) =>
                              {
                                  Collection.Clear();
                                  foreach (var item in desirilizedObject)
                                  {
                                      Collection.Add(item);
                                  }
                              }, null);
        }, null);
        return Collection;
    }

    private HttpWebRequest HttpWebRequest { get; set; }
    public void CreateRequest (string url,string requestMethod, string requestDataType)
  {

      var uri = new Uri(url, UriKind.Absolute);
        var request = (HttpWebRequest)WebRequest.Create(uri);
      request.Method = requestMethod;
      request.Accept = requestDataType;
      HttpWebRequest= request;
  }

} 
```

这是我的班级的示例用法：

```
 var request = new HttpWebRequestHelper<DriverModel>();
        request.CreateRequest("http://localhost:11624/api/Drivers/", RequestMethod.Get, RequestDataType.Json);
       request.GetCollection();
       this.DataContext = request; 
```

我想在 HttpWebRequest 完成时更新 UI。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:39:08.543

我想您在完成更改 UI 元素的请求时遇到了错误。例如，如果是这种情况，您应该加入当前线程；

```
Deployment.Current.Dispatcher.BeginInvoke(() => { this.Visibility = Visibility.Collapsed; }); 
```

# c# - 模仿性能监视器的数据结构

> ID：13231367
> 
> 赞同：0
> 
> 时间：2012-11-05T11:38:52.763
> 
> 标签：c#, wpf, data-structures

我正在为我们的软件开发一个自定义监控服务，该服务分布在多个系统上。我们决定在性能监视器中显示类似报告视图的数据。 ![在此处输入图像描述](../Images/d57f4420d4b8f5beb23410c5d3bda76d.png)

为了存储数据，我们使用了一个非常简单的数据库表，它只保留最新的值：

```
|Server|Object|Instance|Query|Value| 
```

所以每个值都可以通过 Server、Object、Instance 和 Query 唯一标识。一个例子可能是

```
|Server| Object     |Instance| Query     |Value|
+------+------------+--------+-----------+-----+
| Srv1 | Disk       |   C:/  | TotalSize |500GB|
| Srv1 | Disk       |   C:/  | FreeSpace | 50GB|
| Srv1 | Disk       |   C:/  | UsedSpace |450GB|
| Srv1 | Disk       |   C:/  | VolumeLbl |  OS |
| Srv1 | Disk       |   D:/  | TotalSize |900GB|
| Srv1 | Disk       |   D:/  | FreeSpace |700GB|
| Srv1 | Disk       |   D:/  | UsedSpace |200GB|
| Srv1 | Disk       |   D:/  | VolumeLbl | Data|
| Srv1 | Performance|   ---  | CpuUsage  | 12% |
| Srv1 | Performance|   ---  | MemUsage  | 34% |
| Srv1 | Performance|   ---  | Processes | 64  | 
```

现在我们想把它变成这样：

```
Srv1
    Disk             
                     C:/        D:/  
        TotalSize    500GB      900GB
        FreeSpace    50GB       700GB
        UsedSpace    450GB      200gb
        VolumeLbl    OS         Data            

    Performance      
        CpuUsage     12%
        MemUsage     34%
        Processes    64 
```

我不知道应该使用哪种结构来存储它。很容易看出Objects（Disk and Performance）是Server的子对象，但是Query应该是Instance的子对象，还是Object？在常规表中，每一行都是一个对象，列是该行的子对象。但我觉得在这种情况下应该是相反的，因为查询是实例的子对象。值应该只存储在查询或实例下，还是应该是某种二维数组？所以基本上，实现这一点的最干净、最有效和最佳实践的方法是什么？

我们正在使用 WPF，并且能够绑定到结构几乎是一项要求。因此，仅使用 ObservableCollections 或带有 CollectionChanged 的​​自定义结构来实现这一点是第二个挑战。

# iphone - iphone图像突然变为悬停图像

> ID：13231369
> 
> 赞同：0
> 
> 时间：2012-11-05T11:39:05.790
> 
> 标签：iphone, css, jquery-mobile

我正在使用PhoneGap 开发一个iPhone 应用程序。为了识别单击按钮的时间，我们更改了按钮的活动图像。

```
<a class="grid-image btn-image-pharmacycard" onclick="location.href='#prescriptionCard';"> 
```

这是CSS：

```
.btn-image-pharmacycard
{
 background: url("../image/iphone/pharmacy-card-iphone.png") no-repeat scroll left top transparent; 
}

/* while focus Pharmacy card in gird image, change another image*/
.btn-image-pharmacycard:hover, .btn-image-pharmacycard:focus
{
    background-position: left bottom;
} 
```

有时会发生这种情况，在应用程序中，如果不单击按钮，则会显示悬停图像而不是正常图像。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:04:37.167

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0"></meta> 
```

iPhone 试图变得用户友好并且总是将鼠标悬停在一些 html 输入上。

将比例设置为 1 将始终禁用任何缩放或悬停

# performance - 我可以在 Fast Report 上使用两种类型的条形码吗？

> ID：13231372
> 
> 赞同：0
> 
> 时间：2012-11-05T11:39:25.777
> 
> 标签：performance, delphi, report, fastreport

我想开发一个使用fastreport打印条形码的系统，但是，我想为数字<13打印Code128B，为数字= 13打印EAN13。

如何在我的报告中使用两 (2) 种条形码？我使用数据带。

谢谢！

*   我使用 Delphi 和 Fast Report 4.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:53:19.463

在您的数据集中为数字创建计算字段。如果数字 < 13 个字符，则在第一个字段中设置其值，如果为 13，则在第二个字段中设置它。

然后放置两个条形码控件并让每个控件显示一个字段。另一个将是空的，因此它不会显示任何内容。

这个解决方案可能比让 FastReports 通过脚本处理这个问题更容易而且肯定更快。

# xml - Kendo UI Treeview 和 XML 数据源

> ID：13231381
> 
> 赞同：1
> 
> 时间：2012-11-05T11:39:34.363
> 
> 标签：xml, treeview, datasource, kendo-ui

我一直在阅读有关 Treeview 以及 Hierarchical Data Source 和 Data Source 的现有文档，但对于可以与 Treeview 一起使用的可能的远程数据源类型，我有点迷失了。

除了json，xml也是支持的吧？是否可以绑定它并使用Treeview查看xml文件？

我一直在尝试类似的东西：

```
 <script>
            var ds = new kendo.data.DataSource({
                    transport: {
                        read: {
                            url:"http://localhost:8080/OnTheSpotRestfullAPI/testTree.xml"
                        }
                    },
                    schema: {
                        type: "xml",
                        data: "/tree/vehicles",
                        model: {
                            fields: {
                                car: "car/text()",
                                bike: "bike/text()"
                            }
                        }
                    }
                });

            $("#treeview").kendoTreeView({
                dataSource: ds
            });
        </script> 
```

testTree.xml 为：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>    
<tree>  
    <vehicles>
        <car>FM-1100</car>
        <car>FM-4200</car>
        <bike>FM-3100</bike>
    </vehicles>
    <personnel>
        <client>GH-3000</client>
        <vip>GH-3100</vip>
    </personnel>
</tree> 
```

我希望生成的树类似于：

（汽车）

- （汽车）

----FM-1100

----FM-4200

--（自行车）

----FM-3100

（人员）

--（客户）

----GH-3000

--(贵宾)

----GH-3100

PS。() 中的名称应该类似于包含其“孩子”的文件夹

但我似乎根本看不到这棵树。有点迷路了，有人可以指点我正确的方向吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:02:34.723

只是为了确保：您应该在加载 html 后执行脚本代码，因此您应该将其包含在

```
<script>
    $(document).ready(function () {
        // The JavaScript code goes here
    });
</script> 
```

`ds`应该定义数据源`HierarchicalDataSource`而不是`DataSource`. 阅读您的 XML 示例，我不确定层次结构（树）是如何组织的，树的内容应该是什么。

您可以尝试以下方法：

```
<script>
    $(document).ready(function () {
        var ds = new kendo.data.HierarchicalDataSource({
            transport:{
                read:{
                    url:"testTree.xml"
                }
            },
            schema   :{
                type :"xml",
                data :"/tree/vehicles/car",
                model:{
                    fields:{
                        text:"text()"
                    }
                }
            }
        });

        $("#treeview").kendoTreeView({
            dataSource   :ds
        });
    });
</script> 
```

和 XML 类似：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<tree>
    <vehicles>
        <car>FM-1100</car>
        <car>FM-4200</car>
        <bike>FM-3100</bike>
    </vehicles>
    <personnel>
        <client>GH-3000</client>
        <vip>GH-3100</vip>
    </personnel>
</tree> 
```

注意：不确定如何处理`bike`

# xml - xslt - 编程技术

> ID：13231385
> 
> 赞同：0
> 
> 时间：2012-11-05T11:39:52.870
> 
> 标签：xml, xslt, xslt-1.0

在此[链接上有关 xslt 编程的 Oliver Beckers 有效方法的问题。](http://www.xml.org//sites/www.xml.org/files/xslt_efficient_programming_techniques.pdf#page=5)

我们知道，使用这段代码，我们可以消除冗长的 xsl 选择方法

```
concat(
substring(Str1,1 div Cond),
substring(Str2,1 div not(Cond))
) 
```

但是我们可以在“条件”中指定什么，只是为了检查节点的存在或不存在？

我们无法指定

```
concat(
substring(Str1,1 div test="/node"),
substring(Str2,1 div not(test="/node"))
) 
```

这将引发语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:32:11.017

试试这个表达式（其中**node**是您要测试的节点的名称）：

```
<xsl:value-of select="concat(
   substring('Yes', 1 div not(not(/root/node))), 
   substring('No', 1 div not(/root/node)))"/> 
```

或者更好

```
<xsl:value-of select="concat(
   substring('Yes', 1 div boolean(/root/node)), 
   substring('No', 1 div not(/root/node)))"/> 
```

应用于此 XML 时，输出**Yes**

```
<root>
   <node>Test</node>
</root> 
```

但是当应用于这个 XML 时，输出**No**

```
<root>
   <othernode>Test</othernode>
</root> 
```

# sql - SQLPLUS ORACLE 选择语句

> ID：13231395
> 
> 赞同：0
> 
> 时间：2012-11-05T11:40:53.667
> 
> 标签：sql, oracle

列出 2012 年第 3 期只注册一门学科的学生的学号、学科代码、年份和学期。

```
SELECT StudentNum, RSubjectCode, Year, SessionTerm 
 FROM <TABLE> 
WHERE Year ='2012' 
  AND SESSIONTERM = '3'; 
```

这会选择 2012 年和第 3 期的所有人。我如何才能找到只注册了 ONE 科目的学生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:46:04.863

按 StudentNum、Year 和 SessionTerm 分组。这样，您可以计算记录数以仅返回具有一条记录的记录。由于该分组，您需要获取主题代码的最大值（或最小值）。1 条记录的最大值将是唯一的记录，因此结果将是正确的并且查询将很快，即使它可能看起来很奇怪。

```
SELECT 
  StudentNum, 
  max(RSubjectCode) as RSubjectCode, 
  Year, 
  SessionTerm 
FROM 
  <TABLE> 
WHERE 
  Year ='2012' 
  AND SESSIONTERM = '3'
GROUP BY
  StudentNum, 
  Year, 
  SessionTerm 
HAVING
  count(*) = 1 
```

# asp.net - 如何修复“当前上下文中不存在名称配置管理器”

> ID：13231399
> 
> 赞同：1
> 
> 时间：2012-11-05T11:41:02.260
> 
> 标签：asp.net, configuration-management

我已经添加了参考 System.Configuration 并且仍然收到该错误。我正在使用VS2010。这是代码

```
<configuration>
<connectionStrings>
    <add name="MESConnection" connectionString="Server=.\SQLEXPRESS;Database=MES;Trusted_Connection=true"/>
</connectionStrings>
<system.web>
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="System.Configuration.Install, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/></assemblies></compilation>
</system.web> 
```

以及背后的代码：

```
private static string _connStr = ConfigurationManager.ConnectionStrings["MESConnection"].ConnectionString; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:45:48.880

在您的 cs 代码文件顶部添加一条 using 语句：

```
using System.Configuration; 
```

或完全限定参考：

```
private static string _connStr = 
    System.Configuration.ConfigurationManager.ConnectionStrings["MESConnection"].ConnectionString; 
```

**编辑**

我看到您实际上没有引用正确的程序集。您需要参考 System.Configuration.dll*而不是*System.Configuration.Install.dll

此外，在 Visual Studio 中引用 .NET 程序集的常用方法是右键单击解决方案资源管理器中的引用节点并选择添加引用...

![在此处输入图像描述](../Images/6a34ca399cb44bc3d1639d6c860bf79b.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-20T20:11:35.813

1.  转到右侧的解决方案资源管理器
2.  右键单击引用
3.  选择添加。

现在您可以添加配置库并使用其命名空间进行访问

# javascript - 水平滚动时垂直移动的 Div 水平固定位置

> ID：13231402
> 
> 赞同：3
> 
> 时间：2012-11-05T11:41:14.527
> 
> 标签：javascript, html

我正在创建一个水平滚动的网站。它是描绘穿越一个场景的。我想要做的是让一个包含太阳图像的 div 水平保持在同一位置，但随着网站滚动而垂直向下移动，这样在“旅程”开始时，太阳 div 在天空中很高当你在网站上前进时，太阳 div 会“落下”

我想不出办法做到这一点，希望有人能提供帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:49:16.547

如果你使用 JQuery，你可以尝试使用类似 .scroll() 的东西。

[.scroll API](http://api.jquery.com/scroll/) 如果您查看评论并将其调整为水平滚动，我认为它可能会起作用。

又进行了一次搜索，也发现了这个：[javascript-bind-an-event-handler-to-horizo​​ntal-scroll](https://stackoverflow.com/questions/11729859/javascript-bind-an-event-handler-to-horizontal-scroll)

# regex - 筛选邮件正则表达式不起作用

> ID：13231404
> 
> 赞同：4
> 
> 时间：2012-11-05T11:41:31.010
> 
> 标签：regex, sieve-language

我正在使用[smartsieve](http://smartsieve.sourceforge.net/) web gui 来管理我的筛滤器。我有正则表达式匹配的问题。

我正在向自己发送一封主题格式为 testXX 的测试电子邮件（其中 X 是 0 到 9 之间的数字）。

当我定义过滤器时：如果消息“主题：”匹配正则表达式 [0-9]+ 生成的规则是：

```
elsif allof (header :regex "subject" "[0-9]+") {
    fileinto "INBOX/Tests";
} 
```

消息被正确处理

但是任何时候当我向正则表达式添加任何文本时......匹配失败如果消息'主题：'匹配正则表达式测试 [0-9]+ 生成的规则是：

```
elsif allof (header :regex "subject" "test[0-9]+") {
    fileinto "INBOX/Tests";
} 
```

[当我使用在线工具](https://www.fastmail.fm/docs/sieve/sievetest.php)测试我的代码来测试筛子脚本时，一切正常，即使是更复杂的表达式。我确实需要更复杂的表达式，但我去掉了它，因为我需要找到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T04:30:15.760

如果“testXX”和“XX”邮件应该移动“INBOX/Test”的邮件，你可以这样做。

例如：

```
elsif allof (header :regex "subject" "(test)?\d+") 
{
  fileinto "INBOX/Tests";
} 
```

例如，请参阅[this](http://regexr.com?38dcd)。

# ios6 - UICollectionView：UICollectionViewCell 对象在 sizeForItemAtIndexPath 中始终为空

> ID：13231405
> 
> 赞同：7
> 
> 时间：2012-11-05T11:41:35.350
> 
> 标签：ios6, uicollectionview, uicollectionviewcell

我有一个包含不同自定义单元格的集合视图。

这些单元格包含大小不同的不同内容。

单元格在 Storyboard 中定义，因此无需在代码中注册。

我现在要做的就是根据内容更改委托方法中的大小：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

id cellAtIndexPath = [collectionView cellForItemAtIndexPath:indexPath];

NSLog(@"The cell: %@", cellAtIndexPath);

...
e.g. calling sizeToFit methods and cumulating the sizes of the cells' subviews
...

} 
```

该方法按预期为每个单元格调用，但 cellAtIndexPath 始终返回 NULL，无论我尝试什么。所以我无法访问 indexPath 或其内容视图中的单元格对象。

有什么建议为什么我无法访问单元格对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T20:41:07.867

该`collectionView:layout:sizeForItemAtIndexPath`方法由集合视图的流布局对象调用。布局在将单元格添加到集合视图**之前**一次询问单元格的大小。您必须“自行”计算所需的单元格大小并将其返回。

# java - 什么是两个组件之间通信的最佳设计

> ID：13231409
> 
> 赞同：7
> 
> 时间：2012-11-05T11:41:55.193
> 
> 标签：java, jakarta-ee, architecture

目前我们正在进行一个项目，我们处于项目的设计和架构阶段，以下是项目的要点。

*   有些交换机正在生成实时数据
*   我们在 Java/Java EE 中有两个组件，称为 CompA 和 CompB
*   CompA 根据来自交换机的输入记录应用一些过程，而不接触任何数据库，CompA 没有 DB 访问权限。
*   CompB 获取 CompA 的流程记录并申请处理，这涉及到业务数据库
*   CompA 和 CompB 在系统中有多个实例以实现可扩展性和容错。
*   记录是具有多个字段的文本记录
*   记录是事务性的，如果它是来自 CompA 和 CompB 的处理，则认为记录已处理，否则它将被回滚并再次重新发送

现在的问题是什么是 CompA 和 Comp B 之间通信的最佳方式

一种方法是

```
1\. CompA--------> CompB
 2\. CompA-------->Messaging Server(JMS)-----> CompB

```

**要求：**将有多个 CompA 和 CompB 是系统，如果任何组件发生故障，它的负载将由其他对等方共享，例如，如果 CompA 发生故障，它的负载将由系统中的其他 CompA 实例共享。为此，我们将选择 JMS 的第二个选项，以便 CompA 不会与 CompB 紧密绑定。但是随着新组件（消息服务器）的引入，这可能会导致性能下降，因为记录处理是事务性的，系统是实时的。
您的建议和专家意见将受到高度评价

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:46:19.633

JMS 是要走的路 - [http://docs.oracle.com/javaee/6/tutorial/doc/bnceh.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnceh.html)

它非常可靠，您可以执行诸如设置消息过期和强制优先级之类的操作，它非常适合您的模型，该模型基本上是网络上的“多生产者/多消费者”。

JMS 支持事务并且它是为可靠性而构建的——到目前为止，它是最可靠的可用机制。在性能方面，您应该更多地谈论“可扩展性”而不是“原始性能”。只要您的硬件能够应付，JMS 就可以。

维基百科有一个很好的可用 JMS 实现列表： [http ://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations](http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations)

我使用过 Apache ActiveMQ、Open Message Queue 和 OpenJMS，即使我没有在集群环境中部署 JMS 服务器的经验，我也同意 ActiveMQ 是我使用的最可靠的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:02:38.713

我建议将[JMS 与 spring 集成](http://static.springsource.org/spring-integration/reference/html/jms.html)一起使用。 [检查](http://www.springbyexample.org/examples/simple-spring-jms.html)示例

在我的例子中，我们使用了带有 spring 集成的 ActiveMq，以便我们能够轻松处理负载平衡和故障转移功能。

# ruby-on-rails - 安装 gem factory_girl 和 ruby 版本时出错

> ID：13231412
> 
> 赞同：0
> 
> 时间：2012-11-05T11:42:04.473
> 
> 标签：ruby-on-rails, ruby, gem

我尝试安装[skylinecms](http://www.skylinecms.nl/documentation/guides/getting_started)，但安装 gem 时遇到问题。
gem [factory_girl](https://github.com/thoughtbot/factory_girl)让我使用版本> = 1.9.2 的Ruby

```
atmoner@atmoner:~/base_ror$ sudo gem install skylinecms
ERROR:  Error installing skylinecms:
    factory_girl requires Ruby version >= 1.9.2. 
```

红宝石-v

```
atmoner@atmoner:~/base_ror$ ruby -v
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-linux] 
```

我试图将 ruby​​ 版本更改为 1.9.2

```
atmoner@atmoner:~/base_ror$ rvm use 1.9.2
Using /home/atmoner/.rvm/gems/ruby-1.9.2-p320 
```

但还是同样的问题

```
atmoner@atmoner:~/base_ror$ sudo gem install skylinecms
ERROR:  Error installing skylinecms:
    factory_girl requires Ruby version >= 1.9.2. 
```

这个问题的根源是什么？
你有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:29:18.213

您不应该使用`sudo`with `rvm`，因为它会创建一个具有全新环境的新子外壳。在此处查看有关 sudo 和 rvm 的更多信息：[RVM 和 'sudo'](http://ruby.about.com/od/rubyversionmanager/qt/Rvm-And-Sudo.htm)

很可能是您的`system ruby`版本`1.8.7`，这就是您运行时调用的版本`sudo gem install skylinecms`。您可以使用以下命令进行验证：

```
rvm use system
ruby -v 
```

尝试安装`skylinecms`没有`sudo`.

[最好按照rvm 最佳实践](https://rvm.io/rvm/best-practices/)中的建议使用每个项目的 gemset

# css - 在水平菜单和下拉菜单之间切换

> ID：13231413
> 
> 赞同：2
> 
> 时间：2012-11-05T11:42:06.180
> 
> 标签：css, drop-down-menu, menu, contextmenu, media-queries

我有一个无序的内联水平列表菜单，当我的移动媒体查询启动时，我希望 css 发生变化，以便它有一个名为“菜单”的父项，单击该菜单时会在垂直列表中显示菜单子链接。

实现这一目标的最佳方法是什么？

我应该创建两种类型的菜单并使用 css 来切换它们的可见性，还是有办法让第一个菜单成为新的第二个菜单？

任何帮助将非常感激。我确信在每个隐藏的 css 属性之间切换会起作用，但我不确定这对语义有多友好等？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:27:22.993

Righto，这需要一些工作，但我已经创建了一个工作示例，说明你在[这里所追求的](http://jsfiddle.net/9bgrQ/9/)

**HTML**

```
<a href="#" id="nav-status">Open / Close</a>
<ul id="navigation">
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 2</a></li>
    <li><a href="#">Item 3</a></li>
    <li><a href="#">Item 4</a></li>
    <li>
        <a href="#">Item 5</a>
        <ul>
            <li><a href="#">Sub Item 1</a></li>
            <li><a href="#">Sub Item 2</a></li>
            <li><a href="#">Sub Item 3</a></li>
        </ul>
    </li>
    <li><a href="#">Item 6</a></li>
    <li><a href="#">Item 7</a></li>
</ul> 
```

​<strong>CSS

```
/* FOR ANYTHING GREATER THAN MOBILE RESOLUTION */
@media screen and (min-width: 480px) {
    #nav-status {
        display: none;    
    }

    ul {
        width: 100%;    
        min-height: 25px;
        color:#fff;
        background:#CCC;
        overflow: visible;
    }

    ul li {
        color:#000;
        border-right: 1px solid #333;
        width: 96px;
        height: 21px;
        padding:2px;
        display: block;
        float: left;
        position: relative;    
    }

    ul li:last-child {
        border-right: none;
    }

    ul li ul {
        display: none;
        width: 100px;
        color:#fff;
        background:#666;
        position: absolute; 
        top: 25px; 
        left: 0px;
        overflow: hidden;
    }

    ul li:hover ul {
        display: block;    
    }
}

/* FOR MOBILE RESOLUTIONS */
@media screen and (max-width: 480px) {
    #nav-status {
        display: block;
        width: 100%;
        height: 21px;
        padding: 2px;
        background: #000;
        color: #FFF;   
    }

    ul {
        display: none;
        width: 100%;       
        color:#fff;
        background:#CCC;
        overflow: visible;
    }

    ul li {
        color:#000;
        border-bottom: 1px solid #333;
        width: 100%;
        min-height: 21px;
        padding:2px;
        display: block;        
        position: relative;    
    }

    ul li:last-child {
        border-bottom: none;
    }

    ul li ul {
        display: block;
        width: 100%;
        color:#fff;
        background:#666;        
        overflow: hidden;
        position: relative;
    }        
}
​ 
```

**JAVASCRIPT**

```
$(function() {
    $('#nav-status').click(function(e) {
        e.preventDefault();
        $('#navigation').toggle();
    });​
}); 
```

总之，只要分辨率低于 480 像素宽，移动样式就会启动。这基本上会垂直堆叠菜单项，并允许您使用打开/关闭链接折叠/展开导航。任何大于 480px 的都将使用默认样式，该样式将水平排列菜单项。

希望这一切都有意义:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:51:47.323

您可以保持 html 标记相同，但将媒体查询设置为拦截您选择的分辨率并对元素进行不同的样式设置。

例如：http: [//jsfiddle.net/rYVz4/](http://jsfiddle.net/rYVz4/)

HTML

```
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
</ul>​ 
```

CSS

```
@media screen and (min-width: 600px) {
  ul { display: block; width: 100%; overflow: hidden; }
  ul li { display: inline-block; padding: 2px 5px 2px 5px; width: 100px; float: left; } 
}

@media screen and (max-width: 600px) {
  ul { display: block; width: 110px; overflow: hidden; }
  ul li { display: inline-block; padding: 2px 5px 2px 5px; width: 100px; } 
} 
```

如您所见，每当分辨率大于 600px 宽时，元素将被设置为向左浮动并占据屏幕宽度的 100%。

在任何较小的分辨率下，元素将垂直堆叠。

[您可以在此处](http://webdesignerwall.com/tutorials/css3-media-queries)阅读有关媒体查询的更多信息

如果您需要更高级的行为，可以将其与 javascript 结合使用。这是一种方法：

```
function checkResolution() {
  // Resolution width > 600px
  if ($(window).innerWidth() > 600) {
    // implement styling for these devices                                          
  }
}

$(function () {
  $(window).resize(function () {
    checkResolution();
  });

  checkResolution();
}); 
```

此代码将绑定到 window.resize 事件，如果您的浏览器被调整大小，该事件将运行相关代码。

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:47:18.280

如果菜单在两种情况下都有相同的项目，我看不出有什么理由要复制两份。我只会制作两个不同的 css 文件，一个用于“常规”浏览器，一个用于移动媒体。在“常规”一中，“菜单”父项是隐藏的，菜单是水平的。在移动媒体中，菜单父项是可见的，菜单是一个隐藏的垂直列表，当单击菜单父项时会显示（通过 css 或 javascript）。

# javascript - 更改下拉菜单的选项高度

> ID：13231419
> 
> 赞同：15
> 
> 时间：2012-11-05T11:42:32.273
> 
> 标签：javascript, css

是否可以使用 CSS 更改两个选项之间的高度？

请参阅说明性示例。现金和信用卡选项之间的高度

![在此处输入图像描述](../Images/02c4c9bea6ff272166ece1a1d67b3d32.png)

**注意**：我只支持**Chrome**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-25T13:34:32.530

没人记得[`<optgroup>`s](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/optgroup)了吗？很少使用，但每个浏览器都支持。

```
<select>
  <optgroup label="Cash">
    <option>Cash</option>
  </optgroup>
  <optgroup label="Other">
    <option>Credit Card</option>
    <option>Credit Note (R)</option>
    <option>Gift Voucher</option>
    <option>Cheque</option>
  </optgroup>
</select>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-14T23:27:56.617

另一种选择是您可以将字体大小更改为更大。

```
.myOption {
    font-size: 20px;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-18T04:48:29.113

使用特殊字体（非常小）并使用`"font-size:200%";` 重要：仅用于选项

或者

最简单的方法：option{zoom: 1.5} 完成！

[![在此处输入图像描述](../Images/cd4dec7ca1fcaa0b09f2a3229855eed1.png)](https://i.stack.imgur.com/pdvP8.jpg)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-05T11:43:30.790

尝试这个

```
 option{

     padding:5px 0;
   } 
```

填充[**Jsfiddle的示例**](http://jsfiddle.net/swamimayank/Vr6uy/)

```
.dis option{
 padding:5px 0;

 } 
```

html

```
<select class="dis">
  <option>1erwer</option>
  <option>2wwerwer</option>
  <option>3werwer</option>
  <option>4werwer</option>
  <option>5wrwer</option>
</select> 
```

增加两个选项之间的空间是不可能的

[**但有一个棘手的方法**](http://jsfiddle.net/8WPbk/)

```
<select class="dis">
  <option>1erwer</option>
  <option>2wwerwer</option>
  <option>3werwer</option>
  <option disabled="disabled" ></option> <---trick 
  <option>3werwer</option>
</select> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-14T23:38:36.820

不具体。您无法控制选项列表的样式。但是，您可以使用 select2 ( [https://select2.github.io/examples.html](https://select2.github.io/examples.html) ) 之类的东西来创建您可以设置样式的外观选择。

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2019-03-19T22:34:03.563

您始终可以使用 ul 而不是 select 选项

```
<ul class="dis">
  <li>1erwer</li>
  <li>2erwer</li>
  <li>3erwer</li>
  <li>4erwer</li>
  <li>5erwer</li>
</ul> 
```

# javascript - onpagechanged 为翻转视图（winjs）

> ID：13231421
> 
> 赞同：0
> 
> 时间：2012-11-05T11:42:45.640
> 
> 标签：javascript, windows-8, dom-events, winjs

我想知道winjs库（win8）的**flipview控件**是否有一个**事件**，它在**页面转动**时调用，无论是通过键盘还是鼠标点击或滑动？

我在谷歌上搜索它，但我只能找到其他不会在正确的时刻触发的方法。

有没有办法让你举办这样的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:06:34.970

尝试使用*pagecompleted*事件。在我的一个应用程序中使用它并且它有效。希望它也适合你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:04:13.487

您应该使用[onpagechanged](http://msdn.microsoft.com/en-us/library/windows/apps/br211713.aspx)事件。无论机制如何，当用户切换页面时都会触发。

# c# - 添加 从代码隐藏

> ID：13231423
> 
> 赞同：3
> 
> 时间：2012-11-05T11:43:03.333
> 
> 标签：c#, asp.net, webforms

我想`<asp:image>`从我的代码隐藏添加到页面上。我网站上的用户会上传X张图片，我不想`<asp:images>`在图片上传之前添加。

我要添加的原因`<asp:image>`是向用户显示已上传的图片。

如何才能做到这一点？

我已经看到使用了占位符控制器，但是当变量必须不同时如何使用它呢？对于每次上传，应将图像添加到网站上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:08:34.670

为此，您可以创建一个新的 Image 对象变量，然后正确分配其属性，然后将图像附加到页面上的现有对象。

```
Image myImg = new Image();
myImg.ImageUrl = "path_of_the_image.jpg";
myImg.Visible = true;
Panel1.Controls.Add(myImg);   //You can attach the image to any control on your page 
```

或类似地：

```
this.Controls.Add(myImg);     //Incase you wanted the image on your page controls
Label1.Controls.Add(myImg);   //Incase you wanted the image to appear in a certain label 
```

但是，此对象不会超出您执行的代码的生命周期。这意味着，您稍后将无法与此对象进行交互，因为它是在 Page_Init 的范围之后定义的。如果要动态添加此图像然后能够与之交互，则应在 Page_Init 事件期间添加它。

# label - gnuplot 标签未显示

> ID：13231433
> 
> 赞同：0
> 
> 时间：2012-11-05T11:43:41.110
> 
> 标签：label, gnuplot

我有很多文件要为其生成绘图，因此为 gnuplot 编写了一个小脚本。我想在图表下方添加带有标签的附加信息，但我的标签未显示在生成的图像上。有人想出主意吗？

加载.plt：

```
# template.gnuplot
set terminal png
filename = "results-05112012-".i.".dat"
plotfile = "results-05112012-".i.".png"
print filename." ".plotfile

set grid
set title "EER"" 
set output plotfile
set label "m = 20" at 0, 3 front tc rgb "#ffffff"
plot[0.35:0.75][0:100] filename using 1:6 title "FAR" w lp, filename using 1:7 title "FRR" w lp
unset output
unset label

i=i+1

if(i <= n) reread 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:29:51.107

我可以看到标签可能不会出现的两个原因。一种是标签位于不在绘图区域 [0.35:0.75][0:100] 内的点 (0,3)。另一个是标签是白色的（#ffffff）。

# java - Java 线程 - Start()

> ID：13231439
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:44:03.057
> 
> 标签：java, multithreading

对线程进行了一些研究，但我对`start()`Java 线程中的方法实际上做了什么感到困惑。

我目前的理解是 start 方法不会立即开始线程的执行，而是将其移动到线程池中，等待线程调度程序选择它来执行。

它是否正确？我似乎找不到任何关于这些方法实际作用的好资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:47:33.767

确切地说，当调用 to 时`start()`，它只是安排调用 to `run()`。您无法确定线程何时有效启动，也无法确定何时有效停止。

您可以在 oracle 网站上的 Java 文档中找到更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:46:01.217

> 开始
> 
> public void start() 使该线程开始执行；Java 虚拟机调用该线程的 run 方法。结果是两个线程同时运行：当前线程（从对 start 方法的调用返回）和另一个线程（执行其 run 方法）。
> 
> 抛出： IllegalThreadStateException - 如果线程已经启动。另请参阅：运行（），停止（）

[来源](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html#start%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:49:00.677

您将 Threads 与 ThreadPools 混淆了

线程是“执行单元”，当您调用时，在单独线程上执行的代码与您的主程序并行运行`start()`

ThreadPools 是一种建立在线程之上的机制，它允许您创建一**组**线程，这些线程将负责执行您提交到 ThreadPool 队列的任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T11:51:09.287

是的，这是正确的。您不知道该线程何时执行，但可以确定它已被安排运行。看看下面的图片。它解释了线程的生命周期：http: [//cs.fit.edu/~ryan/java/language/thread.gif](http://cs.fit.edu/~ryan/java/language/thread.gif)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T11:52:34.590

`start`立即启动新线程，但由于线程的本质，无法保证该线程中的任何代码行何时实际执行。在此上下文中使用术语“线程池”是不合适的，因为池的概念涉及在用户请求的任务之间重用的资源。实例被硬连线到方法的`Thread`单个调用`run`，之后线程死亡。

线程调度程序是本机操作系统级别的组件，不受 JVM 的直接控制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T11:47:17.020

当你调用`Thread.start`它时，它会为 JVM 启动一个线程，而 JVM 会处理它的生命周期。

# ruby - 选择哪个 EC2 计划？

> ID：13231443
> 
> 赞同：0
> 
> 时间：2012-11-05T11:44:30.683
> 
> 标签：ruby, amazon-ec2, amazon-web-services, sinatra

我使用 Sinatra 编写了我的第一个 Web 应用程序。使用 REST 接口非常简单。我正在运行 MySQL 数据库，它使用活动记录连接到它，非常酷的东西。另外，我正在运行另一个 ruby​​ 程序，它基本上每 30 秒查询一次 MySQL 数据库，并对数据进行一些工作并更新数据库。现在，我正在笔记本电脑上运行 sinatra 应用程序。我想把它移到服务器上，因为我不能一直打开我的笔记本电脑。

我查看了 Amazon EC2，有太多的选择让我不知所措。Amazon EC2 是不是一个不错的选择？是这样，什么选择最适合我？我不期待任何带宽。

任何从网络服务器/托管开始的人的建议都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:55:58.647

好吧，有一个免费的微型实例供新客户使用，因此这似乎是合乎逻辑的起点。如果还不够，您可以考虑升级，查看预留/按需定价并在此时做出明智的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:11:09.373

您是否看过 Heroku 和 AppFog 等公司的托管服务？他们都提供免费计划，因此您可以在升级之前试一试，或者您可能会发现免费计划就足够了。

# layout - 流体布局：未定义大小的容器中未应用全宽

> ID：13231444
> 
> 赞同：0
> 
> 时间：2012-11-05T11:44:42.413
> 
> 标签：layout, vaadin

我无法使用 Vaadin 创建流畅的布局。据我了解，为了根据容器的内容计算容器的大小，我必须使用该`setSizeUndefined()`方法。
这很好用，但是当我想添加组件时会出现一个问题，这些组件占用了该容器的所有可用空间，但大小未定义。我不能让它工作。

这是我正在尝试做的简化示例：

```
VerticalLayout layout = new VerticalLayout();
layout.setSizeUndefined();
layout.setMargin(false);

layout.addComponent(createButton("A somewhat longer label"));
layout.addComponent(createButton("Short label"));

private Button createButton(String label) {
    Button button = new Button(label);
    button.setSizeFull();
    button.setWidth("100%");
    return button;
} 
```

按钮不会占据垂直布局容器的整个宽度。我在这里和那里读到过，不允许在未定义大小的容器内设置“100%”大小，但是我应该如何实现我想要实现的目标，记住我的流体布局需要未定义的大小?
如果有人认为我的用例不需要未定义的大小，我很乐意提供更多信息。我有很强的[Flex](https://stackoverflow.com/questions/tagged/flex)背景，这可能会导致我从错误的角度看待这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:42:17.683

您是对的，您不能在具有未定义大小的 VerticalLayout 中使用相对大小的组件。您正在寻找的功能存在于一个名为[WeeLayout](http://vaadin.com/directory#addon/weelayout)的附加组件中。

# php - 想要使用 50% 不透明度的 imagecopy 或 imagecopyresampled

> ID：13231447
> 
> 赞同：2
> 
> 时间：2012-11-05T11:44:47.340
> 
> 标签：php, gd

我正在使用 PHP GD`imagecopy`或`imagecopyresampled`将具有透明度的 PNG 图像合并到另一个 PNG 图像上（基本上是创建带有设计的 T 恤模型）。

当我使用 imagecopymerge() 它不尊重透明度。但不透明度设置选项有效。但是当我使用`imagecopy()`或者`imagecopyresampled()`然后透明度工作但不透明度设置不可用时。

那么如何合并尊重透明度并提供 50% 不透明度的图像呢？

我的代码是：

```
$img1 = imagecreatefrompng('m1.png');
$img2 = imagecreatefrompng('m2.png');

imagealphablending( $img2, false );
imagesavealpha( $img2, true );

$x1 = imagesx($img1);
$y1 = imagesy($img1);
$x2 = imagesx($img2);
$y2 = imagesy($img2);

//imagecopyresampled($img1, $img2, 205, 170, 0, 0, $x2-40, $y2-40, $x2, $y2);
imagecopy($img1, $img2, 205, 170, 0, 0, $x2-40, $y2-40);

header('Content-Type: image/png');
imagepng($img1); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:19:39.647

你可以看看这个链接：

[https://bugs.php.net/bug.php?id=23815](https://bugs.php.net/bug.php?id=23815)

imagecopymerge 不支持图像 alpha。正因为如此，他们要求创建一个新函数 imagecopymergealpha 来完成这种工作。

[https://github.com/php/php-src/pull/211](https://github.com/php/php-src/pull/211)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:51:27.960

请使用此示例代码进行检查

```
$imageName = 'path/to/your/image/file'
$im_src = create_image_from_type($imageName);
$size = getimagesize($imageName);
$im_dst = create_image_from_type($imageName);
$white = imagecolorallocate($im_dst, 255, 255, 255);
imagecolortransparent($im_dst, $white);
imagefilledrectangle($im_dst, 0, 0, $size[0], $size[1], $white);
$opacityVal = 50;// put the opacity value here
imagecopymerge($im_dst, $im_src, 0, 0, 0, 0,$size[0], $size[1], $opacityVal);
save_image($im_dst, $imageName, 100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:49:00.770

```
imagecopymerge($img1, $img2, 0, 0, 0, 0, $x1, $y1, 50);

header('Content-Type: image/png');
imagepng($img1); 
```

# visual-c++ - 使用预编译的头文件时，我还应该在需要的地方包含头文件吗？

> ID：13231449
> 
> 赞同：4
> 
> 时间：2012-11-05T11:44:52.193
> 
> 标签：visual-c++

我想这是一个关于风格而不是正确性的问题。

使用 Visual Studio 2012，我发现使用 windows.h、direct3d11、atlbase 和任何标准 c++ 头文件的预编译头文件比不使用它们时，我的项目构建速度要快得多。该项目大量使用 Windows，因此根本不需要任何东西可以移植到该项目的其他操作系统或编译器。

我的问题是我真的应该*包括*在`#include "Precomp.h"`. 他们当然不会做任何事情，因为他们有标题保护或 #pragma 一次，但他们会帮助记录依赖关系。

在 .h 文件中呢？我不能在其中包含预编译的头文件，但为了使 .h 文件自包含，我总是包含，例如，如果它使用那里的任何东西。但这是不必要的，因为包含此 .h 文件的 .cpp 文件将*始终*在使用它的 .h 文件之前包含“Precomp.h”文件。

所以这并不是关于正确性，而是关于什么是理解和可维护性的最佳风格。

在这种情况下，预编译头文件的“最佳实践”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:59:21.753

经验法则非常简单：只使用*永远不会*改变的标题。所以你只会得到一次缓慢的编译，再也不会。

这使得 SDK 和编译器头文件成为一个简单的选择。你自己的标题，不是那么多。然后适用第二条经验法则：您是否有自己的标题应该在*所有地方*都包含在#included 中？它们实际上是否大到足以产生明显的速度差异？无论如何，这几乎总是两次打击。

# android - 如何解决内存不足的位图大小超出android中的异常

> ID：13231450
> 
> 赞同：0
> 
> 时间：2012-11-05T11:44:55.293
> 
> 标签：android, android-layout

> **可能重复：**
> [启用 largeHeap 的位图回收](https://stackoverflow.com/questions/12716574/bitmap-recycle-with-largeheap-enabled)

嗨，我在这里做一个应用程序，我正在使用位图显示图像，图像显示良好，但是因为这个类我在另一个类中出现内存不足异常。请查看我的代码以及如何解决这个问题。 .

```
 public class DesignofatozActivity extends Activity {

BitmapDrawable sounddrawable,erasedrawable,backdrwable,fwddrwable,captiondrwable;
Bitmap soundbitmap,eraseBitmap,backbitmap,fwdbitmap,captionbitmap;
    bitmapOrg,bitmapOrg1,bitmapOrg2,bitmapOrg3,bitmapOrg4,bitmapOrg5,bitmapOrg6;
MyView myview;
File f;
ImageView d1,d2,d3,d4,d5,d6;
public  boolean action=false;
RelativeLayout relativeLayout,layout,relativeLayout2;

 Button c1,c2,c3,c4,c5,c6,c7,c8; 
 MediaPlayer player;
 MediaPlayer mediay2;
 ImageView horn;
 float screenHeight,screenWidth,screendensity;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setNoTitle();
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
         screenHeight = displaymetrics.heightPixels;
         screenWidth = displaymetrics.widthPixels;
         screendensity = displaymetrics.densityDpi;
        Log.i("screenHeight",""+screenHeight);
        Log.i("screenWidth",""+screenWidth);
        Log.i("screendensity",""+screendensity);

         setContentView(R.layout.line);
         relativeLayout=(RelativeLayout)findViewById(R.id.relative);

      relativeLayout.setBackgroundColor(Color.WHITE);

      relativeLayout2=(RelativeLayout)findViewById(R.id.relative2);

      RelativeLayout.LayoutParams layoutrel2= (RelativeLayout.LayoutParams)  relativeLayout2.getLayoutParams();    
      layoutrel2.height=(int)(25*(screenHeight/600));  

   int toplay=(int)(90*(screenHeight/600));

      layout=new RelativeLayout(this);
      RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(
    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
      lp.setMargins(0, toplay, 0,0);

      layout.setLayoutParams(lp);
      relativeLayout.addView(layout,lp); 

         int topmyvi=(int)(45*(screenHeight/600));
        myview = new MyView(this);
             myview.setId(004);
          RelativeLayout.LayoutParams lp6 = new RelativeLayout.LayoutParams(
         LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
          myview.setLayoutParams(lp6);

    lp6.setMargins(0, topmyvi, 0,0);
    relativeLayout.addView(myview,lp6);

    ImageView I2=new ImageView(this);

    if(captiondrwable!= null) {
        captionbitmap.recycle();
           captiondrwable= null;
            }

           captionbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.caption22_1));
     captiondrwable = new BitmapDrawable(captionbitmap); 
       I2.setBackgroundDrawable(captiondrwable);

    int left2=(int)(15*(screenWidth/1024));

    int widthhh2=(int)(100*(screenWidth/1024));
    int hifhtttt2=(int)(50*(screenHeight/600));

       RelativeLayout.LayoutParams rlp2=new RelativeLayout.LayoutParams(widthhh2,hifhtttt2);

    rlp2.setMargins(left2, topmyvi, 0, 0);
    relativeLayout.addView(I2,rlp2);

    ImageView b1=new ImageView(this);
    if(erasedrawable!= null) {
         eraseBitmap.recycle();
        erasedrawable= null;
         }
      eraseBitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.eraser_501));
   erasedrawable = new BitmapDrawable(eraseBitmap); 
   b1.setBackgroundDrawable(erasedrawable);

    int leftb1=(int)(650*(screenWidth/1024));
   int topb1=(int)(10*(screenHeight/600));
 int widtb1=(int)(100*(screenWidth/1024));
 int hightb1=(int)(100*(screenHeight/600));

 RelativeLayout.LayoutParams rlp3=new RelativeLayout.LayoutParams(widtb1,hightb1);
 rlp3.setMargins(leftb1, topb1, 0, 0);
 relativeLayout.addView(b1,rlp3);

            b1.setOnClickListener(new OnClickListener() {

  //        @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
         try{

                mBitmap.eraseColor(android.graphics.Color.TRANSPARENT);
                Canvas Canvas=new Canvas(mBitmap);

                action=true;
            myview.onDraw(Canvas);

                }catch(IllegalStateException ie){
                    ie.printStackTrace();
                }
    }
});

  int lefth1=(int)(830*(screenWidth/1024));
  int toph1=(int)(35*(screenHeight/600));
int width1=(int)(60*(screenWidth/1024));
int highth1=(int)(60*(screenHeight/600));
horn=new ImageView(this);

if(sounddrawable!= null) {
     soundbitmap.recycle();
    sounddrawable= null;
      }
soundbitmap=BitmapFactory.decodeStream(getResources().openRawResource( R.drawable.horn));
sounddrawable = new BitmapDrawable(soundbitmap); 
horn.setBackgroundDrawable(sounddrawable);

  RelativeLayout.LayoutParams hn=new RelativeLayout.LayoutParams(width1,highth1);
  hn.setMargins(lefth1,toph1,0,0);
  relativeLayout.addView(horn,hn);

  horn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mediay2==null)
            {

             mediay2 = MediaPlayer.create(DesignofatozActivity.this, R.raw.hwprepsheets);

            }
             mediay2.start();
        if(mediay2!=null)
        {

        }

        }

    });

  ImageView next=(ImageView)findViewById(R.id.imv1a);

  if(fwddrwable!= null) {
   fwdbitmap.recycle();
       fwddrwable= null;
            }

  fwdbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.next_50));
      fwddrwable = new BitmapDrawable(fwdbitmap); 
      next.setBackgroundDrawable(fwddrwable);
  RelativeLayout.LayoutParams layoutnxt= (RelativeLayout.LayoutParams) next.getLayoutParams();     
  layoutnxt.height=(int)(30*(screenHeight/600));  
  layoutnxt.width=(int)(50*(screenWidth/1024));
  next.setOnClickListener(new OnClickListener() {

 //         @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Log.i("next","next");
            Intent i =new Intent(DesignofatozActivity.this,Dots.class);
            startActivity(i);
        }   
    });
  ImageView back=(ImageView)findViewById(R.id.back);

  if(backdrwable!= null) {
   backbitmap.recycle();
   backdrwable= null;
       }

  backbitmap=BitmapFactory.decodeStream(getResources().openRawResource(R.drawable.back1_50));
  backdrwable = new BitmapDrawable(backbitmap); 
  back.setBackgroundDrawable(backdrwable);
  RelativeLayout.LayoutParams layoutbak= (RelativeLayout.LayoutParams) back.getLayoutParams();     
  layoutbak.height=(int)(30*(screenHeight/600));  
  layoutbak.width=(int)(50*(screenWidth/1024));
  back.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent i =new Intent(DesignofatozActivity.this,Slantlines.class);
        startActivity(i);
    }
});

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    //mPaint.setColor(0xFFFF0000);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(6);

 }

private void setNoTitle() {
    // TODO Auto-generated method stub
    requestWindowFeature(Window.FEATURE_NO_TITLE);
}
 private Paint       mPaint;
  private Bitmap  mBitmap;

    public void colorChanged(int color) {
        mPaint.setColor(color);
    }

    public class MyView extends View
    {

            private Canvas  mCanvas;
            private Path    mPath;
            private Paint   mBitmapPaint;

        public MyView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
             mPath = new Path();
                mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        }
         @Override
            protected void onSizeChanged(int w, int h, int oldw, int oldh)       {
                super.onSizeChanged(w, h, oldw, oldh);
                if (mBitmap != null) {
                    mBitmap.recycle();
                    mBitmap=null;
                 }

                mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
                mCanvas = new Canvas(mBitmap);
                mCanvas.setBitmap(mBitmap);

            }

          @Override
            protected void onDraw(Canvas canvas) {

              if(action)
              {
                  invalidate();
              }

              Paint painto = new Paint();
               painto.setAntiAlias(true);

               painto.setStrokeWidth(3);
               painto.setStyle(Paint.Style.FILL);

              int leftx1=(int)(15*(screenWidth/1024));
                 int leftx2=(int)(1010*(screenWidth/1024));
                    int topy1=(int)(60*(screenHeight/600));
                    int topy2=(int)(530*(screenHeight/600));

                       canvas.drawLine(leftx1, topy1, leftx2, topy1, painto);   
                       canvas.drawLine(leftx1, topy1, leftx1, topy2, painto);
                       canvas.drawLine(15, topy2, leftx2, topy2, painto);
                       canvas.drawLine(leftx2, topy1, leftx2, topy2, painto);

            bitmapOrg = BitmapFactory.decodeResource(getResources(),
                        R.drawable.circles1_4);
            int leftorg=(int)(150*(screenWidth/1024));
            int toporg=(int)(110*(screenHeight/600));
              canvas.drawBitmap(bitmapOrg, leftorg, toporg, painto);

              bitmapOrg.recycle();
              bitmapOrg=null;

              bitmapOrg1 = BitmapFactory.decodeResource(getResources(),
                        R.drawable.circles1_5);
              int leftorg1=(int)(430*(screenWidth/1024));
                int toporg1=(int)(130*(screenHeight/600));
               canvas.drawBitmap(bitmapOrg1, leftorg1,toporg1, painto);
               bitmapOrg1.recycle();
                  bitmapOrg1=null;

       bitmapOrg2 = BitmapFactory.decodeResource(getResources(),
                        R.drawable.circles1_6);
       int leftorg2=(int)(650*(screenWidth/1024));
               canvas.drawBitmap(bitmapOrg2, leftorg2,toporg, painto);

               bitmapOrg2.recycle();
                  bitmapOrg2=null;
         bitmapOrg3 = BitmapFactory.decodeResource(getResources(),
                        R.drawable.circles1_1);
         int leftorg3=(int)(170*(screenWidth/1024));
         int toporg3=(int)(350*(screenHeight/600));
               canvas.drawBitmap(bitmapOrg3, leftorg3,toporg3, painto);
               bitmapOrg3.recycle();
                  bitmapOrg3=null;
              bitmapOrg4 = BitmapFactory.decodeResource(getResources(),
                        R.drawable.circles1_3);
              int leftorg4=(int)(680*(screenWidth/1024));
               canvas.drawBitmap(bitmapOrg4, leftorg4,toporg3, painto);

                  bitmapOrg4.recycle();
                  bitmapOrg4=null;
            bitmapOrg5 = BitmapFactory.decodeResource(getResources(),
                        R.drawable.circles1_2);

            int leftorg5=(int)(400*(screenWidth/1024));
             int toporg5=(int)(300*(screenHeight/600));
               canvas.drawBitmap(bitmapOrg5, leftorg5,toporg5, painto);

               bitmapOrg5.recycle();
                  bitmapOrg5=null;
               Paint paint1 = new Paint();
                paint1.setAntiAlias(true);
                paint1.setColor(Color.BLACK);
                paint1.setStrokeWidth(3);
                paint1.setStyle(Paint.Style.FILL);
                paint1.setTextSize(13);
                canvas.drawText("Get  ready  to  write  place  your  pen  on  the  dot  and  follow  direction ", 120, 20, paint1);
                canvas.drawText("indicated  by  the  arrow . ", 120, 38, paint1);

                Paint p = new Paint();
                p.setAntiAlias(true);
                p.setTextSize(120);
                p.setColor(Color.LTGRAY);
                Typeface font = Typeface.createFromAsset(getAssets(), "font/KINDTRG.TTF"); 

                p.setTypeface(font);            

               canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

                canvas.drawPath(mPath, mPaint); 

       }  private float mX, mY;
        private  final float TOUCH_TOLERANCE = 2;

     private void touch_start(float x, float y) {
      mPath.reset();
        mPath.moveTo(x, y);
            mX = x;
     mY = y;
     }
     private void touch_move(float x, float y) {
     float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
   if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
           mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
       mX = x;
        mY = y;
     }
  }
    private void touch_up() {
        mPath.lineTo(mX, mY);
         // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
 // kill this so we don't double draw
      mPath.reset();
      }

   @Override
   public boolean onTouchEvent(MotionEvent event) {
         float x = event.getX();
         y = event.getY();

  switch (event.getAction()) {
  case MotionEvent.ACTION_DOWN:
      touch_start(x, y);
      invalidate();
      break;
  case MotionEvent.ACTION_MOVE:
      touch_move(x, y);
      invalidate();
      break;
  case MotionEvent.ACTION_UP:
      touch_up();
      invalidate();
      break;
  }
   return true;
  }

   }
    public void clearAllResources() {

        // Set related variables null

        System.gc();
        Runtime.getRuntime().gc();
       }

      @Override
        protected void onPause() {

            if (mediay2 != null){
                mediay2.stop();
                mediay2.release();
                mediay2=null;
          }

            clearAllResources();
            super.onPause();
        }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        System.gc();
        Runtime.getRuntime().gc(); 
        unbindDrawables(findViewById(R.id.relative));
    }

        private void unbindDrawables(View view) {
        // TODO Auto-generated method stub
         if (view.getBackground() != null) {
             view.getBackground().setCallback(null);
         }
         if (view instanceof ViewGroup) {
             for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                 unbindDrawables(((ViewGroup) view).getChildAt(i));
             }
             ((ViewGroup) view).removeAllViews();
         }
        }
        @Override
            protected void onResume() {
                // TODO Auto-generated method stub
                super.onResume();

            }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:39:54.960

您使用的内存堆超过了 gcc 允许的大小。您必须在清单添加应用程序中使用 slaced 位图或 +3.0

**android:largeHeap="true"**分配更多的堆大小。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:largeHeap="true">... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:53:24.093

试试这个

获得位图后，使用后回收位图，这将解决一些问题。

```
Bitmap finalImage;
finalImage.recycle(); 
```

或尝试 onResume()

```
System.gc(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:53:46.997

我建议你看看这个线程：[Strange out of memory issue while loading an image to a Bitmap object](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/10964402#10964402)

这是线程上的答案：

```
public Bitmap readAssetsBitmap(String filename) throws IOException {
        try {
            BitmapFactory.Options options = new BitmapFactory.Options(); 
            options.inPurgeable = true;
            Bitmap bitmap = BitmapFactory.decodeStream(assets.open(filename), null, options);
            if(bitmap == null) {
                throw new IOException("File cannot be opened: It's value is null");
            }
            else {
                return bitmap;
            }
        } catch (IOException e) {
            throw new IOException("File cannot be opened: " + e.getMessage());
        }

    } 
```

记住回收位图并将它们设置为 null 一旦它们被用于确保得到 GCed。

*注意：你不应该打电话`System.gc();`*

我希望这有帮助。

# java - 如何在图中建立反向节点连接？

> ID：13231451
> 
> 赞同：2
> 
> 时间：2012-11-05T11:45:04.253
> 
> 标签：java, algorithm

我有一个带有 4 个节点的图，这些节点与其他节点相连。每个连接都有重量。例如：

> A -> 5 -> B
> 
> A -> 3 -> C
> 
> B -> 4 -> C
> 
> B -> 3 -> D

每个节点都有相应的反向连接。但是我在实现这种反向连接时遇到了问题。这是我现在拥有的算法（用文字表示）：

1.  创建节点（A、B、C、D）
2.  将节点 A 连接到节点 B
3.  设置连接权重
4.  对其他节点重复 2,3。

按照这个算法，我必须分别建立反向连接（节点 B 到节点 A）。如果我有 100 个或更多节点，这将是我注意的试验。

在连接创建过程中如何建立这些反向连接？

这是一个节点类：

```
public class Node {
    private String name;
    private Map<Node, Integer> connections;

    public Node(String name) {
        this.name = name;
        connections = new HashMap<Node, Integer>();
    }

    public void connect(Node node, int weight) {
        connections.put(node, weight);
        //It is expected to make backward connection here
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:47:55.140

像这样：

```
public void connect(Node node, int weight) {
    connections.put(node, weight);
    node.connections.put(this, weight);
} 
```

由于`Node`在地图中用作键`connections`，不要忘记覆盖它的`equals`和`hashCode`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:53:29.950

您可以使用：

```
node.getConnections().put(this, weight); 
```

但是，我会建议进行设计更改：

```
class Node
{
    String name;
    List<Node> connectedNodes;
}

class Branch
{
    Node a; 
    Node b;
    int weight;
}

// calling part of program
// initizaliztion of fields already done
public void connect(Node node1, Node node2, int weight) 
{
    // checks required:
    // if a branch already exists

    node1.connectedNodes.Add(node2);
    node2.connectedNodes.Add(node1);

    Branch branch = new Branch(node1, node2, weight);
} 
```

# facebook-like - 社交按钮的链接问题

> ID：13231453
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:45:07.883
> 
> 标签：facebook-like, google-plus

我在我的网络先生上添加了一些社交按钮。推文分享按钮工作得很好，但我对 facebook 和 google+ 按钮有一些问题。

事实上，我添加了这个按钮：（这些按钮应该通过参数 $URL 链接到网页

```
<div class="g-plusone" data-size="medium" href="{$URL}"></div>

and for facebook   

<iframe src="http://www.facebook.com/plugins/like.php?href={$URL}&amp;layout=button_count&amp;show_faces=false&amp;width=90&amp;action=like&amp;font=verdana&amp;colorscheme=light" allowtransparency="true" style="border: medium none; overflow: hidden; width: 90px; height: 21px;" frameborder="0" scrolling="no"></iframe> 
```

事实上，我使用 iframe 是因为我的按钮被 div 包裹，这些 div 以灰色显示它们，并在悬停时按照预期的方式为它们着色。

我遇到的问题是，当单击 g+ 时，不会出现任何框，当我再次单击时，g+ 按钮会显示一个红色三角形，并且我有一个“+1 按钮错误”消息：但我没有这种情况会解释这种信息。

当点击 facebook-like 时，我的 facebook 墙上什么都没有显示...

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:37:37.713

对于 +1 按钮，我有一些您可以尝试的方法。实际按钮本身是否也在呈现，或者当您单击它时是否出现意外行为？

如果按钮未呈现，您可能缺少用于 Google+ 的 JavaScript 库。在呈现实际按钮之前，应将以下代码添加到您的帖子中：

`<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>`

如果单击按钮时出现意外行为，则可能是 URL 参数有问题。您可能无需传递 URL 就可以通过，因为 +1 按钮默认为当前页面。以下示例显示了为当前页面呈现 +1 按钮的最简单情况：

`<g:plusone></g:plusone>`

如果正确呈现，则说明您在 URL 参数中添加了错误内容，或者参数中的字符串有问题。例如，检查您使用的字符串在开始或结束引号中没有反引号，而不是单引号。

+1 文档将包含配置和自定义按钮及其参数所需的任何其他详细信息。你可以在这里找到它：

[https://developers.google.com/+/plugins/+1button/](https://developers.google.com/+/plugins/+1button/)

# javascript - 引导弹出窗口中的 preventDefault

> ID：13231461
> 
> 赞同：3
> 
> 时间：2012-11-05T11:45:42.130
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我正在使用 twitter bootstrap，我有这个代码

```
$('.addYT').on('click', function(event) {
    var $this = $(this);
    event.preventDefault();
}).popover({
    placement: 'bottom',
    html: true,
    content: function(e) {
        return $('.YTadd').html();
    }
});​ 
```

一切正常，但其中`popover content:`有一个类似 .html 的 html 代码`<a href="#">`。我希望它是preventDefault。但它不起作用。有谁知道如何做到这一点？

# java - 使用 SAX 解析器，如何在不了解 xml 结构的情况下解析 xml 文件？

> ID：13231468
> 
> 赞同：1
> 
> 时间：2012-11-05T11:46:15.977
> 
> 标签：java, android

有没有一种方法可以实现 sax 解析器而不像在 getChild 方法或 equalsIgnoreCase(tagname) 中那样传递 xml 中的元素名称？或者有没有办法找出 xml 中标签的名称，然后将其传递给 Sax 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:43:46.220

看看这个链接

[https://stackoverflow.com/a/4828765/1631457](https://stackoverflow.com/a/4828765/1631457)

1）是android sax解析器示例（不要激怒我）

向下滚动一点，你会看到

2）org.xml 解析器示例（我认为您想要这种用法）。

# php - 水平显示 Drupal Teaser 节点

> ID：13231475
> 
> 赞同：1
> 
> 时间：2012-11-05T11:46:49.040
> 
> 标签：php, css, drupal, drupal-7, drupal-theming

我创建了一个自定义主题，并尝试将内容的所有预告片节点显示为 3 行。所以我将在每行中有 3 行和 4 个预告节点。我创建了一个 node--teaser.tpl.php 文件并将其链接到我的 template.php 文件。我能够为每个预告节点设置样式并且它工作正常，但我在尝试制作它时遇到了麻烦，因此 4 个节点在一行上。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:52:37.203

你为什么不尝试通过 CSS 来做到这一点。

例如：

```
.teaser
{
    width: 25%;
    float: left;
} 
```

希望这会有所帮助……穆罕默德。

# android - Android 获取电话 SIM 号码

> ID：13231477
> 
> 赞同：0
> 
> 时间：2012-11-05T11:46:51.777
> 
> 标签：android

如何使用代码获取 SIM 卡号？我试过这段代码，它没有返回任何数字

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
mPhoneNumber = tMgr.getLine1Number(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:52:44.077

采用

```
TelephonyManager phoneManager = (TelephonyManager) 
getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
String phoneNumber = phoneManager.getLine1Number(); 
```

需要 READ_PHONE_STATE 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:53:36.267

试试下面的代码：

```
 TelephonyManager mTelephonyMgr =
    (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

    String sDeviceID = mTelephonyMgr.getDeviceId();
    String sSimSerial = mTelephonyMgr.getSimSerialNumber(); 
String sSimlineNumber = mTelephonyMgr.getLine1Number(); 
```

设置以下权限

```
android.permission.READ_PHONE_STATE in Android Manifest file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:55:48.180

试试这样。。

TelephonyManager telphMgr = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);

字符串 simSerialNumber = telphMgr.getSimSerialNumber();

参考：

[http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSimSerialNumber%28%29](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSimSerialNumber%28%29)

# matlab - MATLAB：动态修改其他范围的导入列表？

> ID：13231480
> 
> 赞同：0
> 
> 时间：2012-11-05T11:47:12.083
> 
> 标签：matlab

那么，在 MATLAB 中有没有一种方法可以修改与当前范围不同的范围的导入列表？也就是说，我希望能够做到这一点：

```
function import_mypackage()
    evalin('caller', 'import mypackage.*');
end 
```

这行不通。调用时没有报错`import_mypackage`，但是mypackage中包含的命名空间没有被导入，即：

```
function foo()
    import_mypackage;
    g(); % Wanted mypackage.g() but got: Undefined function or variable 'g()'
end 
```

我知道您可以使用`eval`或通过将变量传递给`import()`. 但是，我找不到任何方法来修改其他范围的导入列表。有什么办法吗？

**编辑：** Rody Oldenhuis 在他的回答中发现了一个奇怪的函数导入行为。他建议`evalin`实际修改调用者的导入列表，但是一旦您从`import_mypackage`. 但是，我认为正在发生的事情是`import`表达式总是在当前的工作空间中计算。看：

```
function import_mypackage()
   evalin('caller', 'L = import(''mypackage.foo'');');
   foo; % It works! So the import happened in this workspace
end 
```

根据罗迪的回应修改：

```
function foo()
   import mypackage.f;
   import_mypackage;
   L  
   import
end 
```

将打印：

```
L = 

    'mypackage.foo'

ans = 

    'mypackage.f' 
```

表示 L 被设置为`import_mypackage`范围的导入列表，但它从未真正清除`foo()`.

**编辑：** @RodyOldenhuis

我想弄乱调用者范围的导入列表的原因是我想定义一个“别名”版本的`import()`. 这`alias_import()`将允许用户定义包别名，以便：

```
alias_import my_toolbox 
```

可能相当于：

```
import my_toolbox_v1.* 
```

或者：

```
import my_toolbox_v2.* 
```

也就是说，我希望能够维护工具箱的多个版本并动态控制正在导入的版本。这对于比较不同`my_toolbox`版本之间的结果或当您想要确保使用某个`my_toolbox`版本时非常有用。每当我升级到新版本的`my_toolbox`. 当然，也可以以间接方式进行此操作，例如：

```
import(alias_import('my_toolbox')) 
```

所以这`alias_import`不会执行实际的导入，而只会产生内置的输入`import`。这很好，但有点冗长，这就是为什么我想`alias_import`修改调用者的导入列表。但是在看到我的奇怪行为之后，`evalin()`我想我宁愿让事情像现在这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:39:26.407

您似乎偶然发现了一些奇怪的行为（我没有使用工作“错误”，直到我确定这不是 Mathworks 的意图:)。

看起来

```
function import_mypackage()
    evalin('caller', 'import mypackage.*');
end

function foo()
    import_mypackage;
    g(); 
end 
```

不起作用，但是

```
function import_mypackage()
    evalin('caller', 'L = import mypackage.*');
end

function foo()
    import_mypackage;
    L  
    import
end 
```

节目

```
L = 
    'mypackage.*'

ans = 
    Empty cell array: 0-by-1 
```

这意味着`foo`当函数`import_mypackage`超出范围时，调用者 ( ) 中的导入列表将被清除。

我会说这至少是不受欢迎的行为，我会说这是一个[错误报告](http://www.mathworks.nl/support/faq/bugreportsfaq.html)的案例。

作为一种解决方法，使用类似的东西

```
function L = import_mypackage()
    L = import('mypackage.*');
end

function foo()
    L = import_mypackage;        
    import(L{:});

    % do stuff with pacakge contents
    ...
end 
```

我认为`evalin`无论如何都是可取的。

# android - Android ProviderTestCase2：在运行模式下失败，在调试模式下通过

> ID：13231482
> 
> 赞同：1
> 
> 时间：2012-11-05T11:47:16.827
> 
> 标签：android, junit, testcase

我正在使用 ProviderTestCase2 超类测试数据库。这是我的代码片段：

```
 public class MyProviderTest extends ProviderTestCase2<MyProvider>{

    private static MockContentResolver resolver;
    private static IsolatedContext context;
    public MetaDataProviderTest() {
    super(MyProvider.class, Provider.AUTHORITY);
}

@Override
protected void setUp() throws Exception {
    try{
        super.setUp();
        resolver = getMockContentResolver();

    } catch(Exception e){

    }

}

}

   public void testfirst(){

   Cursor cursor =   resolver.query(ProviderContract.Channels.CHANNEL_URI,null,null,null,null);
       ....
    }
  } 
```

当我调试上面的代码时，我得到了传递的结果。当我运行它时，我得到 Null 光标，暗示没有像通道这样的表。请帮助解决这个问题。我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:01:27.950

有比赛条件。在 Setup() 中引入了延迟。它工作正常。但我不知道这是否是确切的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:05:11.427

你应该写代码：

```
MockContentResolver.addProvider(authority, yourprovider); 
```

然后试一试

# java - 使用 Java 在网站上上传图像

> ID：13231484
> 
> 赞同：0
> 
> 时间：2012-11-05T11:47:17.423
> 
> 标签：java, image, upload

是否有可能将文件（例如：图像）上传到站点并计算传输率？

我有一些代码可以从指定的 url 下载图像并使用`java.net.Url`类计算传输率，例如：

```
long startTime = System.currentTimeMillis(); //start time

    System.out.println("Connecting  site...\n");
    System.out.println("Downloading......");

    URL url = new URL("http://....");
    url.openConnection();
    InputStream reader = url.openStream();

    FileOutputStream writer = new FileOutputStream("D:/imagine.jpg");
    byte[] buffer = new byte[153600];
    int totalBytesRead = 0;
    int bytesRead = 0; 

    while ((bytesRead = reader.read(buffer)) > 0)
    {  
       writer.write(buffer, 0, bytesRead);
       buffer = new byte[153600];
       totalBytesRead += bytesRead;
    }

    long endTime = System.currentTimeMillis();//end of download

    long elapsedTime=(endTime-startTime)/1000;//from miliseconds in seconds 

    System.out.println("ElapsedTime is " +elapsedTime +" s");

    int memory=new Integer(totalBytesRead);

    double memoryFinal=memory * 0.0009765625; //file in Kb

    System.out.println("File size: " +memoryFinal +"Kb");

    System.out.println("Speed :" + memoryFinal/elapsedTime + "Kbps");
    writer.close();
    reader.close(); 
```

我需要一些简单而有用的东西。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:53:31.673

是的，你可以——但这并不简单。

将文件发布到服务器不是在纯 java URLConnection 中实现的，但您必须实现协议。

或者，您可以使用 org.apache.commons.httpclient

[http://www.theserverside.com/news/1365153/HttpClient-and-FileUpload](http://www.theserverside.com/news/1365153/HttpClient-and-FileUpload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:06:24.890

我推荐库[Apache FileUpload](http://commons.apache.org/fileupload/)。

您也可以实现一个进度条。看到[这个](http://commons.apache.org/fileupload/using.html)。

问候

# iphone - 在 iPhone 中以不同的分辨率大小播放 .mov .mp4

> ID：13231486
> 
> 赞同：0
> 
> 时间：2012-11-05T11:47:21.840
> 
> 标签：iphone, objective-c, mpmovieplayercontroller

我必须在 iPhone 中开发一个播放视频的播放器。我在视频编码和信号编码方面没有太多背景。当我测试一些 .mp4 和 .mov 文件时，我发现只能播放分辨率适合 iPhone 屏幕尺寸的视频，而无法播放更大尺寸的视频。在这种情况下，是否有任何解决方案可以在 iPhone 上播放所有电影大小。请给我一些指导。提前谢谢了。播放视频的代码如下：

```
NSURL *url = [NSURL URLWithString:@"http://192.65.123.108/test1.mov"];

//this movie has size of 480x272 can be played, other larger resolution cannot be played

_moviePlayer =  [[MPMoviePlayerController alloc]
                 initWithContentURL:url];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:_moviePlayer];

_moviePlayer.controlStyle = MPMovieControlStyleDefault;
_moviePlayer.shouldAutoplay = YES;
[self.view addSubview:_moviePlayer.view];
[_moviePlayer setFullscreen:YES animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:55:06.970

我认为没有办法做到这一点，除非你可以在播放之前缩小视频。不过，这可能效率低下。

# mysql - 从 MYSQL DB 中搜索电话号码

> ID：13231490
> 
> 赞同：2
> 
> 时间：2012-11-05T11:47:45.393
> 
> 标签：mysql, regex

我有一个带`phone`列的表。里面的电话看起来像这样 +1 (123) 456-3780。如果用户在搜索字段“35”中输入，我应该向他展示所有使用手机的用户：

```
+3 (534) 000-1010

+1 (350) 000-9090

+1 (003) 534-2343

+1 (001) 223-5323 etc. 
```

我试图做类似的事情

```
SELECT * FROM `mytable` WHERE `phone` LIKE '%3%5' 
```

但这不是最好的解决方案，因为查询得到其他电话像 +3 (000) 000-500。

我想使用 RLIKE 或类似的东西，但不知道如何创建所需的正则表达式以及它应该看起来如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:51:46.597

`[() -]*`每个输入字符之间需要一个：

```
SELECT * FROM `mytable`
WHERE `phone` REGEXP '3[() -]*5' 
```

这允许标点符号存在于您的数字“字符串”中，但仅此而已。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-03T00:30:42.880

`REGEXP '^(.{2})+(\.{4}[-].{4})$'`此模式适用于带有 () 的电话号码

例子：`(00)0000-0000`

# html - 3div 的响应式设计，2 div 的宽度以 px 为单位，其他以 "%" 为单位

> ID：13231491
> 
> 赞同：0
> 
> 时间：2012-11-05T11:47:48.267
> 
> 标签：html, css

我有 3divs left, center, right 问题是左边需要 320px，右边 150px 和 center 将占据其余的空间。我怎样才能做到这一点？它需要是100％的响应。我不知道屏幕有多大，它可以从1920到1600屏幕分辨率变化，但左右需要固定。

已在评论中发布的示例有效，但是如果您想在宽度为最大 768 的情况下制作 2 列并使用 display: none 隐藏 3d div；它不适用于表格示例。另一个带有 css3 框的也不起作用，因为它在资源管理器中不起作用，没有 pollyfill。

那么有什么解决方法还是我需要用经典的方式来做，并用边距和填充等来补偿......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:53:53.787

您可以为此**display:table**属性。像这样写。

```
.parent{
    display:table;
    width:100%;
}
.parent > div{
    display:table-cell;
    min-height:200px;
}
.left{
    width:320px;
    background:green;
}
.center{
    background:red;
}
.right{
    width:150px;
    background:yellow;
} 
```

检查这个[http://jsfiddle.net/BNQfC/1/](http://jsfiddle.net/BNQfC/1/)

**或者**

您可以使用 CSS3 **flex-box**属性。

检查这个[http://jsfiddle.net/sjYNy/1/](http://jsfiddle.net/sjYNy/1/)

# java - 基于动态构造函数值的 Spring bean 作用域

> ID：13231496
> 
> 赞同：4
> 
> 时间：2012-11-05T11:48:10.697
> 
> 标签：java, spring, factory-pattern

我必须根据动态构造函数值创建一个需要缓存的 bean。示例：我需要一个 OrganizationResource bean，其中“x”（构造函数值）组织将具有自己的特定实例值，而“y”（构造函数值）将具有不同的值。但我不想为每个 x 值创建一个新对象，我希望它被缓存。

我知道动态构造函数值有 2 个作用域，单例和原型。我打算使用原型，但似乎每次都会创建一个新对象，如何在spring中基于构造函数值实现缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:28:49.643

FactoryBean 是一种方法。这很简单，试一试。您所要做的就是创建一个实现`FactoryBean`并在 bean 定义文件中引用它的类：

```
package some.package;
import org.springframework.beans.factory.FactoryBean;

public class ExampleFactory implements FactoryBean {

private String type;

public Object getObject() throws Exception {
    //Logic to return beans based on 'type'
}

public Class getObjectType() {
    return YourBaseType.class;
}

public boolean isSingleton() {
    //set false to make sure Spring will not cache instances for you.
    return false;
}

public void setType(final String type) {
    this.type = type;
}} 
```

现在，在您的 bean 定义文件中，输入：

```
<bean id="cached1" class="some.package.ExampleFactory">
    <property name="type" value="X" />
</bean>

<bean id="cached2" class="some.package.ExampleFactory">
    <property name="type" value="Y" />
</bean> 
```

它将根据您在`ExampleFactory.getObject()`.

# c# - LINQ 查询优化：具体来说，let 子句的位置重要吗？

> ID：13231500
> 
> 赞同：2
> 
> 时间：2012-11-05T11:48:22.317
> 
> 标签：c#, .net, linq

我对编译和优化 LINQ 表达式以及是否需要仔细考虑表达式中 let 和 where 子句的顺序感兴趣。

这是示例：

```
var query = 
    from record in Database.Table
    let recordName = record.GetName()
    let notUsed = UselessData()
    let stuff = DoSomethingIntensiveWith(record)
    where recordName == "foobar"
    select stuff;

foreach (string item in query) {
    Console.WriteLine("item => '{0}'", item);
} 
```

问题/假设：

*   `record.GetName()`必须解决才能执行该`where` 子句。
*   `notUsed`从未在表达式中使用，所以会`UselessData()`被调用吗？
*   `stuff``recordName`仅当等于“foobar”时才需要。将为 `DoSomethingIntensiveWith()`每条记录执行还是仅对`recordName`等于“foobar”的记录执行？

如果我想确保`DoSomethingIntensiveWith()`只在 `recordName`等于“foobar”时调用，我是否需要将`let`caluse放在 `where`子句之后，如下所示：

```
var query = 
    from record in Database.Table
    let recordName = record.GetName()
    let notUsed = UselessData()
    where recordName == "foobar"
    let stuff = DoSomethingIntensiveWith(record)
    select stuff;

foreach (string item in query) {
    Console.WriteLine("item => '{0}'", item);
} 
```

与此同时，我将使用一些真实的代码和调试器。我会报告我的发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:59:28.523

如果这是 LINQ-to-Objects，那么：是的，您可以。就按顺序应用事物而言，标准`Enumerable.*`实现非常直接。您不一定需要所有`let`条款，但事情仍然按顺序完成，并且该顺序受到尊重。如果它是 LINQ-to-anything-else，那么所有的赌注都没有了。

这很容易证明：

```
using System;
using System.Linq;
class Foo
{
    public Foo(string value)
    {
        Value = value;
    }
    public string Value { get; private set; }
    public string Expensive()
    {
        Console.WriteLine(Value);
        return Value;
    }
    static void Main()
    {
        var foos = new[] {
            new Foo("abc"),
            new Foo("def")};
        Console.WriteLine("query1:");
        var query1 = (from obj in foos
                      let val = obj.Value
                      where val.StartsWith("a")
                      let result = obj.Expensive()
                      select result).ToArray();
        Console.WriteLine("query2:");
        var query2 = (from obj in foos
                      let val = obj.Value
                      let result = obj.Expensive()
                      where val.StartsWith("a")                      
                      select result).ToArray();    
    }
} 
```

第一个查询过滤器*然后*投影（因此它只对匹配的记录执行昂贵的操作），而第二个查询计算两者的昂贵操作：

```
query1:
abc
query2:
abc
def 
```

应该注意的`let`是，它实际上只是通过实现`Select`的——它是从源数据到查询内部使用的匿名类型的投影。

# sql - sql sum 从 sql 查询中重复？

> ID：13231501
> 
> 赞同：0
> 
> 时间：2012-11-05T11:48:24.570
> 
> 标签：sql

我有一个 sql 输出，其中显示了他们销售的 sales_id 和汽车制造商（car_info）。

我想在输出中创建一个额外的列，显示已售出的制造商总数，因为它当前仅显示 sales_id 并重复与每次销售相关的制造商

我目前使用的查询是：

```
SELECT i.car_info 
  FROM inventory i 
  JOIN sales s ON s.car_id = i.car_id
WHERE s.sales_id = 'sales_id1'; 
```

我曾尝试使用 sum 和 count 函数，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:51:35.890

你需要`GROUP BY`在汽车制造商

```
select i.car_manu, count(s.sales_d)
from inventory i join sales s on s.car_id = i.car_id
where s.sales_id = 'sales_id1'
group by i.car_manu 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:52:05.537

```
SELECT i.car_info ,count(1)
  FROM inventory i 
  JOIN sales s ON s.car_id = i.car_id
WHERE s.sales_id = 'sales_id1'
group by i.car_info 
```

# comments - 在 TFS 2010 中自动生成签入注释

> ID：13231507
> 
> 赞同：1
> 
> 时间：2012-11-05T11:48:39.460
> 
> 标签：comments, checkin

我目前正在尝试消除在 TFS 2010 中签入注释的需要，因为有关我们所做的每项更改的信息已经记录在相关的工作项中。唯一的问题是当您查看文件更改历史时，“评论”列是空白的，因此很难找到您要查找的更改。

为了解决这个问题，我们在签入注释中输入工作项的名称，但我想知道是否有一种方法可以让 TFS 自动执行此操作。

例如：如果我有一个名为“添加新功能 1”的更改请求工作项，并且我签入了相应的更改，我希望签入的评论自动包含“添加新功能 1”。

任何人都知道这是否可行，如果可以，我该如何实现？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:55:40.057

您需要编写服务器插件或策略（但不确定策略是否可以更改签入注释）。

签出以下插件，该插件根据签入注释关联工作项。 [http://embeddedworkitems.codeplex.com/](http://embeddedworkitems.codeplex.com/) 这与您想要的相反，但应该具有适应性。

# android - 当应用程序运行内存不足问题时，sharedpreferences 是否变为空

> ID：13231515
> 
> 赞同：1
> 
> 时间：2012-11-05T11:49:18.140
> 
> 标签：android, sharedpreferences

我在整个应用程序中使用共享首选项，在使用应用程序超过 3 小时左右后，它的行为很奇怪。应用程序不会崩溃，但不能按预期工作。我检查了日志，它显示为空共享首选项。

应用程序使用过多的内存是否会清除共享首选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:01:14.220

不会。共享首选项不存储在内存中，而是存储在设备的内部存储中。

只有在您卸载应用程序或清除应用程序数据时，共享首选项才会被清空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-22T12:31:04.370

我猜接受的答案是错误的。

当内存量不足时不确定行为，我认为你会得到 OOM。根据[这个答案](https://stackoverflow.com/questions/19148282/read-speed-of-sharedpreferences/19148351#19148351)，`SharedPreference`一旦加载，它就会存储在内存中，我认为一旦它所属的特定上下文被破坏，它就会被删除。

您还可以检查确实存储在 Map 内的 Context 中的[链接代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ContextImpl.java#L141)`SharedPreference`

# exchange-server - 无法使用 EWS Java API 获取发件人电子邮件地址

> ID：13231520
> 
> 赞同：11
> 
> 时间：2012-11-05T11:49:40.277
> 
> 标签：exchange-server, exchangewebservices, ewsjavaapi

我正在使用 EWS Java API 1.1.5。我正在尝试按如下方式获取电子邮件发件人：

```
ItemView view = new ItemView(10);
FindItemsResults<Item> findResults = service.findItems(
    WellKnownFolderName.Inbox, view);
    for (Item item : findResults.getItems()) {
        if (item instanceof EmailMessage) {
            String senderEmail = ((EmailMessage) item).getSender().getAddress();
            System.out.println("Sender Email: " + senderEmail);
        }
    }
); 
```

但它总是返回`null`。我还尝试了以下方法：

```
String senderEmail = ((EmailMessage) item).getFrom().getAddress(); 
```

但它也会返回`null`。我可以看到电子邮件包含发件人，例如：

```
Test User <testuser@testdomain.com> 
```

它出现在消息中以及回复电子邮件时。

请告知如何解决此问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-11T10:18:22.540

找到了解决方案，我必须`item.load();`在获取发件人电子邮件地址之前使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-19T08:30:00.433

虽然上述工作完美，但作为替代方案，如果使用属性视图完成搜索，则无需加载，请考虑代码片段

```
 ItemView view = new ItemView(100);
    view.getOrderBy().add(ItemSchema.DateTimeReceived, SortDirection.Descending);
    view.setPropertySet(new PropertySet(BasePropertySet.IdOnly, 
                                        ItemSchema.Subject,
                                        ItemSchema.DateTimeReceived, 
                                        EmailMessageSchema.From));

    SearchFilterCollection searchCollection=new SearchFilter.SearchFilterCollection();
    searchCollection.add(new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, !unreadEmailOnly));

    FindItemsResults<Item> result=exchangeService.findItems(WellKnownFolderName.Inbox, 
                                                            searchCollection, 
                                                            view); 
```

随后，可以调用 EmailMessage.getFrom().getAddress()。

# java - 通过 Java 程序使用 OpenSSL 颁发 X.509 证书

> ID：13231522
> 
> 赞同：0
> 
> 时间：2012-11-05T11:49:50.993
> 
> 标签：java, openssl, x509

我正在编写一个 Java 程序，此时我想向用户颁发签名的 X.509 证书，但首先我必须根据请求生成证书。根据我的研究，我发现颁发这些证书的最简单方法是通过 OpenSSL，但我发现除了使用 Runtime.Exec 之外没有其他简单的方法来使用它，有人指出它效率低下。所以我的问题是，有没有一种简单的方法可以生成 X.509 证书并用 Java 对其进行签名？一个例子将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T06:50:29.003

经过一些研究和花时间研究后，我发现 bouncycastle 可以很容易地用于生成 X.509 证书只需确保检查更新的指南文档，我使用的是旧的，让我感到困惑

# c# - FluentNHibernate 从两端有效级联删除？

> ID：13231525
> 
> 赞同：1
> 
> 时间：2012-11-05T11:50:08.710
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有两个对象（多对多）站点和成员部分显示为：

```
public class Site
{
    public Site()
    {
        SiteAuthors = new List<Member>(); 
    }

    public virtual IList<Member> SiteAuthors { get; set; }
    ...
}

public class Member
{
    public Member()
    {
        AuthoredSites = new List<Site>(); 
    }

    public virtual IList<Site> AuthoredSites { get; set; }
    ...
} 
```

我已将映射保留为默认值，覆盖如下所示：

```
public class MemberOverride : IAutoMappingOverride<Member>
{ 
    public void Override(AutoMapping<Member> mapping)
    { 
        mapping.HasManyToMany(x => x.AuthoredSites).Cascade.AllDeleteOrphan();
    }
}

public class SiteOverride : IAutoMappingOverride<Site>
{ 
    public void Override(AutoMapping<Site> mapping)
    { 
    }
} 
```

我在适当地删除网站和成员时遇到问题。

我在覆盖中尝试了各种逆映射组合，但不可避免地有一种我需要的情况不起作用。

我想要实现的是，当我从站点中删除所有成员时（记住他们仍然可以是其他站点的作者） - 然后我希望删除该站点。

当我从成员中删除站点时，只有在没有其他作者的情况下才应删除该站点。

要使用的正确覆盖或映射配置是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:22:00.223

正如@Damien_The_Unbeliever 所说，这并不是级联的工作方式。但是，您可以配置 NHibernate 来为您处理这个问题。您可以使用 an 处理 NHibernate 中的事件，`Event Listener`并根据需要执行“其他操作”。

我发现这个 Hibernate 文档（从 NHibernate 移植而来）列出了可能`Event Listener`的 s：[http ://anandhansubbiah.com/blog/hibernate-events/](http://anandhansubbiah.com/blog/hibernate-events/)

Delete`Event Listener`可能是您要查找的内容。这将允许您检测即将被删除的对象（在您的情况下`Member`和`Site`），并做一些额外的事情 - 比如检查是否需要删除其他对象。

# optimization - 如何在 CPLEX 中执行函数？

> ID：13231528
> 
> 赞同：0
> 
> 时间：2012-11-05T11:50:14.203
> 
> 标签：optimization, linear-programming, cplex

我正在尝试找到有关具有功能的 CPLEX 的小型工作示例。不好的例子[在这里](http://pastie.org/pastes/5171572)如何不做事。CPLEX 中如何定义函数？

*Ps 我已经在阿尔托大学提交了线性优化课程 2.3140 的工作[。](https://noppa.aalto.fi/noppa/kurssi/mat-2.3140/viikkoharjoitukset)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:54:28.657

你把它写成一个数学问题，你有一个索引超出范围的错误。

```
// Decision variables
 dvar float+ z[0..4];
 dvar float a[0..4];
 dvar float+ x[0..5];
 dvar float+ v[0..5];

minimize sum(myZ in 0..4) z[myZ]; 

 subject to {

   startX: x[0]==0;
   startV: v[0]==0;
   endX: x[4]==1;
   x[5]==1;
   endV: v[4]==0;
   v[5]==0;

   forall(t in 0..4){
    a[t]<=z[t];
    -a[t]<=z[t];
    x[t+1]==x[t]+v[t];
    v[t+1]==v[t]+a[t];
   }
 } 
```

这是解决方案：

```
// solution (optimal) with objective 0.666666666666667
// Quality There are no bound infeasibilities.
// There are no reduced-cost infeasibilities.
// Maximum Ax-b  residual             = 1.11022e-016
// Maximum c-B'pi residual            = 1.11022e-016
// Maximum |x|                        = 1
// Maximum |slack|                    = 0.666667
// Maximum |pi|                       = 1.66667
// Maximum |red-cost|                 = 1
// Condition number of unscaled basis = 2.1e+001
// 

z = [0.33333
         0 0 0.33333 0];
x = [0 0 0.33333 0.66667 1 1];
v = [0 0.33333 0.33333 0.33333 0 0];
a = [0.33333 0 0 -0.33333 0]; 
```

**有关的**

1.  [CPLEX 中的这个 forall 语句有什么问题？](https://stackoverflow.com/questions/13291906/what-is-wrong-with-this-forall-statement-in-cplex)

2.  IBM 在[这](http://pic.dhe.ibm.com/infocenter/oplinfoc/v6r3/index.jsp?topic=%2Filog.odms.ide.help%2FContent%2FOptimization%2FDocumentation%2FOPL_Studio%2F_pubskel%2Fglobals%2Feclipse_and_xplatform%2Fps_opl736.html)方面有一些帮助。

# java - Android 通过 onclick 获取 url

> ID：13231529
> 
> 赞同：1
> 
> 时间：2012-11-05T11:50:15.047
> 
> 标签：java, android, onclick, onclicklistener

您好，我正在尝试使用 onclick 获取 url 的值，但它对我不起作用。我正在使用以下代码。

```
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.webkit.WebView;

public class MainActivity extends Activity {
String valueOfURL = null;
WebView webView;
Intent browserIntent;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    browserIntent = new Intent("android.intent.action.VIEW", Uri.parse("http://www.example.com"));
    startActivity(browserIntent);
}

public String handleLinkClicked(String value) {
    if (value.startsWith("http"))  

    valueOfURL = value;
    return valueOfURL;

}
public View.OnClickListener myhandler = new View.OnClickListener() {
    public void onClick(View view) {
    handleLinkClicked(valueOfURL);
    webView.loadUrl("http://docs.google.com/gview?embedded=true&url=valueOfURL");
    }};
} 
```

第一页可以正常加载，但是当我单击该页面上的 pdf 时，它不会加载。基本上我想要做的是获取 URL 的值并将其传递给一个变量，然后用于通过谷歌文档读取。它是一个 pdf 文件，它的 URL 看起来像这样 [http://www.example.com/c/document_library/get_file](http://wwww.example.com/c/document_library/get_file)？

谁能看到我哪里出错了，也许能指出我正确的方向。

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:58:03.327

您没有将您的设置`onClickListener()` `myhandler`为任何`View`. 您的代码 ( `browserIntent`) 启动了一个隐式`intent`，它将自动启动一个 Web 浏览器（新的`Activity`未链接到您的应用程序）来处理您的 URL。如果您需要从您的应用程序控制浏览，您应该`WebView`在您的布局中实现 a 并将您的设置`onClickListener`为它而不是使用隐式意图。查看此[链接](http://developer.android.com/guide/components/intents-filters.html#ires)以了解 Android 如何处理隐式意图

# c# - 在组合框中选择不同项目时如何动态更改组合框

> ID：13231530
> 
> 赞同：1
> 
> 时间：2012-11-05T11:50:14.263
> 
> 标签：c#

```
 string sSql = "Select id from Master.Materialname where Material = '" +                
                    comboBox3.SelectedValue + "'"; 
  SqlCommand cmd = new SqlCommand(sSql,objConn1); 
  int mid = Convert.ToInt32(cmd.ExecuteScalar()); 
  string reffSql = "Select Process from Master.ProductionProcess where id = '" + mid + "'"; 
  SqlCommand rcmd = new SqlCommand(reffSql, objConn1); 
  comboBox4.SelectedValue = Convert.ToString(rcmd.ExecuteScalar()); 
```

我用过以上一个但不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:55:41.917

我假设您将使用 DisplayMember 和 ValueMember 填充组合框，同时最初加载组合框数据。

初始加载：

您应该从表中检索 Id 和 Name 字段并将其绑定到您的组合框。

```
//Loading comboBox3
SqlDataAdapter da = new SqlDataAdapter("select Id, Material from Master.Materialname", objConn1); 
DataTable dt = new DataTable(); 
da.Fill(dt); 
DataRow dr; 
dr = dt.NewRow(); 
comboBox3.DisplayMember = "Material"; 
comboBox3.ValueMember = "Id"; 
comboBox3.DataSource = dt; 

//Loading comboBox4
SqlDataAdapter da1 = new SqlDataAdapter("select Id, Process from Master.ProductionProcess", objConn1); 
DataTable dt1 = new DataTable(); 
da1.Fill(dt1); 
DataRow dr1; 
dr1 = dt1.NewRow(); 
comboBox4.DisplayMember = "Process"; 
comboBox4.ValueMember = "Id"; 
comboBox4.DataSource = dt1; 
objConn1.Close(); 
```

然后在 combo3selectedIndex 更改事件中，

```
if (Convert.ToInt32(comboBox3.SelectedValue) > 0)
    comboBox4.SelectedIndex = comboBox3.SelectedIndex; 
```

comboBox4 的 selectedValue 现在应该更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:14:02.793

```
 SqlDataAdapter da = new SqlDataAdapter("select Id, Material from Master.Materialname", objConn1); 
    DataTable dt = new DataTable(); 
    da.Fill(dt); 
    DataRow dr; 
    dr = dt.NewRow(); 
    comboBox3.DisplayMember = "Material"; 
    comboBox3.ValueMember = "Id"; 
    comboBox3.DataSource = dt; 

write below code on combobox3 changed event

    int newid = comboBox3.selectedvalue;

    //Loading comboBox4
    SqlDataAdapter da1 = new SqlDataAdapter("select Id, Process from Master.ProductionProcess and Id = " + newid , objConn1); 
    DataTable dt1 = new DataTable(); 
    da1.Fill(dt1); `enter code here`
    DataRow dr1; 
    dr1 = dt1.NewRow(); 
    comboBox4.DisplayMember = "Process"; 
    comboBox4.ValueMember = "Id"; 
    comboBox4.DataSource = dt1; 
    objConn1.Close(); 
```

# javascript - jQuery .click 未被识别

> ID：13231531
> 
> 赞同：0
> 
> 时间：2012-11-05T11:50:18.797
> 
> 标签：javascript, jquery, html

我无法弄清楚这部分代码是怎么回事，如下所示：

```
$(document).ready(function(){
    $('#testimonialContent').load('http://www.1.co.uk/wp-content/themes/1/testimonialPull.php');
  $('#nextQu').click(function(){
        alert(".");
    return false;
  });
}); 
```

当我应该收到警报消息时，我没有收到。我认为我没有犯任何语法错误？

HTML：

```
<?php
    require_once('../../../wp-blog-header.php');
    header('HTTP/1.1 200 OK');
?>
<br /><br /><br /><br /><br /><img id="quoteOne" src="http://www.1.co.uk/wp-content/themes/1/images/quote1.png">
    <span><?php
        query_posts(array(
            'cat' => 39,
            'order' => 'ASC', // ASC
            'orderby' => 'rand',
            'showposts' => 1,
            ));
        $wp_query->is_archive = true; $wp_query->is_home = false;
        if (have_posts()) : while (have_posts()) : the_post();
        the_content();
        endwhile; endif;

    ?>
    <span id="nextQu">NEXT QUOTE</span>
    </span> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:52:35.737

尝试使用委托：

```
$('#testimonialContent').on('click','#nextQu',function(){
        alert(".");
    return false;
  }); 
```

# c++ - 变量指针的成员函数没有绘制到 SDL_Surface？

> ID：13231533
> 
> 赞同：0
> 
> 时间：2012-11-05T11:50:20.067
> 
> 标签：c++, pointers, set, sdl

我想使用一个集合来引用一些 TileObjects（一个用户定义的类），这样我就可以遍历它们并采取相应的行动，或者找到一个特定的并删除它等等。

问题是，我想做的一件事是访问成员函数“render”，它接受一个 SDL_Surface* 并将图像应用到它。在片场之外，这很好用。但是，使用一组 TileObject* 如下

```
for(set<TileObject*>::iterator it = tileObjects.begin(); it != tileObjects.end(); ++it){
    (*it)->render(dest, offset, tileSheet);
} 
```

表示图像不会出现在屏幕上。我可以使用一组 TileObjects，

```
for(set<TileObject>::iterator it = tileObjects.begin(); it != tileObjects.end(); it++){
    (*it).render(dest, offset, tileSheet);
} 
```

但后来我得到“将'const Tileset'作为'this'传递的错误......”因为我想要访问的某些函数会更改值。

使用指针的成员函数在 SDL 中应用表面的正确方法是什么？

如果有帮助，我正在使用 GNU GCC 编译器和 Code::Blocks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:38:17.377

插入到集合中的值不能就地更改，因为该值充当键，用于所有操作，例如插入和搜索。由于这个 (*i) 将是一个 T const，在您的情况下将是 const TileObject。如果 render 方法不是你的 const 方法，我想你会得到你看到的错误。您的一个选择可能是将渲染方法更改为“常量方法”，例如

```
void render(dest, offset, sheet) const {... 
```

如果您无法将该方法设置为 const，您可能必须检查在之前的方法中填充集合时是否犯了任何错误。您可能必须创建一个新的 TileObject，然后将其插入 std::set 并记住在完成后删除。

或者，另一种选择是只使用 std::vector 而不是 std::set。

# php - JSON.parse：意外字符

> ID：13231535
> 
> 赞同：1
> 
> 时间：2012-11-05T11:50:31.677
> 
> 标签：php, jquery, json

我有一个 json 数组，我想用 java 脚本解析它，但我的 jquery 给了我以下错误：

```
JSON.parse: unexpected character 
```

jquery中的代码是，错误来了：

```
// Attempt to parse using the native JSON parser first
if ( window.JSON && window.JSON.parse ) {//error comes on this line.
return window.JSON.parse( data );
} 
```

我的代码是：

```
success: function(msg){
                var test= JSON.parse(msg);
                var question=test.question;
        document.getElementById('question').value=question; 
```

我正在使用最新版本的 jquery

```
 <script src="http://code.jquery.com/jquery-latest.js"></script> 
```

我在函数（msg）中得到这个：

```
[Object { question=

"What is your religious affiliation?"

,  userQuestionCategoryId=

"1"

}] 
```

这是我的PHP代码：

```
function getquest()
        {
             $id=$this->input->post('qid');
             $data=$this->adminsetting->getquestion($id);
             if(count($data)>0)
             //echo $data[0]->question; 
             echo json_encode($data);
             else
             echo "No Question In database";
        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:12:08.520

这：

```
{ question=

"What is your religious affiliation?"

,  userQuestionCategoryId=

"1"

} 
```

必须是这样的：

```
{"question":"What is your religious affiliation?",  "userQuestionCategoryId":"1"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:31:09.877

实际上 json 已经被解析了，所以我必须只使用索引，我缺少使用索引 msg [0]。这就是我遇到问题的原因。

```
success: function(msg){

        document.getElementById('question').value=msg[0].question;

        document.getElementById('id').value=msg[0].userQuestionCategoryId;
        //alert(msg);
        } }); 
```

# java - AndEngine - Admob 黑屏

> ID：13231536
> 
> 赞同：3
> 
> 时间：2012-11-05T11:50:36.470
> 
> 标签：java, android, admob, andengine

我有一个 AndEngine 游戏，它的子类来自

```
public class BaseActivity extends SimpleBaseGameActivity {

} 
```

游戏运行良好，现在当我尝试向其中添加 Admob 视图时，我从 SO 上的海报中学到了重写 onSetContentView() 方法。

我喜欢这样：

```
@Override
protected void onSetContentView() {

    //Creating the parent frame layout:
    final FrameLayout frameLayout = new FrameLayout(this);

    //Creating its layout params, making it fill the screen.
    final FrameLayout.LayoutParams frameLayoutLayoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.FILL_PARENT);

    //Creating the banner view.
    AdView adView = new AdView(this, AdSize.BANNER, AdMobPubId);

    // Initiate a generic request to load it with an ad
    adView.loadAd(new AdRequest());

    // set the layout properties
    final FrameLayout.LayoutParams adViewLayoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT, Gravity.TOP | Gravity.CENTER_HORIZONTAL);

    // Creating AndEngine's view - Reference made
    this.mRenderSurfaceView = new RenderSurfaceView(this);
    mRenderSurfaceView.setRenderer(mEngine, null);

    //createSurfaceViewLayoutParams is an AndEngine method for creating the params for its view.
    final android.widget.FrameLayout.LayoutParams surfaceViewLayoutParams = new FrameLayout.LayoutParams(super.createSurfaceViewLayoutParams());

    //Adding the views to the frame layout.
    frameLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);
    frameLayout.addView(adView, adViewLayoutParams);

    //Setting content view
    this.setContentView(frameLayout, frameLayoutLayoutParams);
} 
```

广告已加载，但屏幕为黑色。我的游戏没了。屏幕仍然记录触摸（正如我在调试器中看到的那样）

怎么发动机没有显示在下视图？！？！

编辑：终于让它工作了

使用了这段代码，突然它起作用了，不知道为什么以前没有

```
@Override
    protected void onSetContentView() {
        this.mRenderSurfaceView = new RenderSurfaceView(this);
        this.mRenderSurfaceView.setRenderer(this.mEngine, this);
        final android.widget.FrameLayout.LayoutParams surfaceViewLayoutParams = new FrameLayout.LayoutParams(super.createSurfaceViewLayoutParams());

        //Creating the banner view.
        AdView adView = new AdView(this, AdSize.BANNER, AdMobPubId);
        adView.loadAd(new AdRequest());
        final FrameLayout.LayoutParams adViewLayoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT, Gravity.RIGHT | Gravity.CENTER_HORIZONTAL);

        final FrameLayout frameLayout = new FrameLayout(this);
        final FrameLayout.LayoutParams frameLayoutLayoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.FILL_PARENT);

        frameLayout.addView(this.mRenderSurfaceView,surfaceViewLayoutParams);
        frameLayout.addView(adView,adViewLayoutParams);
        this.setContentView(frameLayout, frameLayoutLayoutParams);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:42:14.833

它不起作用，因为您在充气后更改了布局。`setContentView`在您调用并扩展布局后，您将无法添加视图。

您所要做的就是`AdView`在 AndEngine 调用之前创建较早的并将其添加到布局中`setContentView`。[您可以在此处](https://stackoverflow.com/questions/8940673/displaying-ad-in-andengine/8942168#8942168)查看这样做的示例。

I'm using `FrameLayout` in this example, it's taken from my game where `FrameLayout` works the best. Your `onSetContentView` method will be simpler - all you have to do is to instatiate the `RenderSurfaceView` object and the `AdView` object, then add them to a new `LinearLayout` and call `setContentView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:01:07.463

我不认为你能做到这一点

```
LinearLayout layout = (LinearLayout)findViewById(R.id.game_rendersurfaceview); 
```

因为`R.id.game_rendersurfaceview`被声明为`org.anddev.andengine.opengl.view.RenderSurfaceView`

那些不是苹果/苹果。

就个人而言，我只会在 XML 中的主 LinearLayout 中添加另一个字段来保存 adView。

* * *

我无法具体说明，因为我已经有几年没有使用广告了。您应该能够找到在 XML 中声明 adView 的示例。会是这样的

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">

        <org.anddev.andengine.opengl.view.RenderSurfaceView android:id="@+id/game_rendersurfaceview"
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            android:layout_gravity="center" />

    <adView decalaration here
android:id="@+id/game_adview" />
    </LinearLayout> 
```

一定要给它一个`id`然后在你的代码中使用那个id

```
adView layout = (adView)findViewById(R.id.game_adview); 
```

# android - android：当edittext不可点击且未启用时隐藏虚拟键盘

> ID：13231537
> 
> 赞同：0
> 
> 时间：2012-11-05T11:50:36.393
> 
> 标签：android, android-edittext

我有一个复选框，我在其取消选择时启用了我的 edittext 字段（mEditText.setClickable(true) 和 mEditText.setEnabled(true)）

但是，当这两个字段为假时，即选中复选框时--->>> 当我单击禁用的 Edittext 字段时，它会显示一个虚拟键盘，尽管 edittext 字段不是可编辑的。

我想解决这个问题

当我在取消选中复选框时尝试 mEdittext.setfocusable(false) 并在选中复选框时尝试 setfocusable(true) ......该字段变得不可编辑并且虚拟键盘也根本不出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:06:14.860

这就是我从你的问题中得到的。

```
cb = check Box
Edit_Text = Edit Text

 if (!cb.isChecked())
        {
          Edit_Text.setEnabled(true);
          Edit_Text.setClickable(true);
        }
        else
        {
          Edit_Text.setEnabled(false);
          Edit_Text.setClickable(false);
        } 
```

对于隐藏键盘，您应该参考：

[单击EditText外部后如何在android上隐藏软键盘？](https://stackoverflow.com/questions/4165414/how-to-hide-soft-keyboard-on-android-after-clicking-outside-edittext)

# javascript - 如何在三个 js 中制作 3d 文本

> ID：13231539
> 
> 赞同：17
> 
> 时间：2012-11-05T11:50:43.373
> 
> 标签：javascript, html, webgl, three.js

我通过引用[这个文档](http://mrdoob.github.io/three.js/docs/#Manual/Introduction/Creating_a_scene)来编写一个脚本，[这个文档](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/TextGeometry.js) 我的代码是

```
<script src="https://raw.github.com/mrdoob/three.js/master/build/three.js"></script>
   <script> 
   var text = "my text",

            height = 20,
            size = 70,
            hover = 30,

            curveSegments = 4,

            bevelThickness = 2,
            bevelSize = 1.5,
            bevelSegments = 3,
            bevelEnabled = true,

            font = "optimer", // helvetiker, optimer, gentilis, droid sans, droid serif
            weight = "bold", // normal bold
            style = "normal"; // normal italic
   var scene = new THREE.Scene();
   var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
   var renderer = new THREE.WebGLRenderer(); 
   renderer.setSize(window.innerWidth, window.innerHeight);
   document.body.appendChild(renderer.domElement);
   var textGeo = new THREE.TextGeometry( text, {

                size: size,
                height: height,
                curveSegments: curveSegments,

                font: font,
                weight: weight,
                style: style,

                bevelThickness: bevelThickness,
                bevelSize: bevelSize,
                bevelEnabled: bevelEnabled,

            });

//  var geometry = new THREE.CubeGeometry(10,10,1);
  var material = new THREE.MeshBasicMaterial({color: 0x11ff00});
  var textGeo = new THREE.Mesh(textGeo, material); 
  scene.add(textGeo);
  camera.position.z = 10;
  function render() { 
      requestAnimationFrame(render);
      textGeo.rotation.x += 0.01;
      textGeo.rotation.y += 0.01;
      renderer.render(scene, camera); 
 } 

 render();

</script> 
```

我可以通过稍微更改代码来制作立方体和其他几何图形。但我不能使用这个脚本制作 3d 文本。这段代码有什么问题？ ![我在控制台中的错误是](../Images/a689e2c92aa1e53819d6c79599683b02.png)请帮我

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T13:48:53.703

您需要使用如下模式加载字体文件：

```
var loader = new THREE.FontLoader();

loader.load( 'fonts/helvetiker_regular.typeface.json', function ( font ) {

    // your code here

} ); 
```

例如，请参见这个 three.js 示例：

[https://threejs.org/examples/webgl_geometry_text.html](https://threejs.org/examples/webgl_geometry_text.html)

另外，我建议不要为几何图形和网格分配相同的变量名称。

三.js r.128

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-17T00:11:11.287

我还编写了有关创建 3d 字体的[教程](http://blog.andrewray.me/creating-a-3d-font-in-three-js/)，因为我遇到了一些我认为值得记录的问题。

# algorithm - 在有向无环图上预测路径

> ID：13231542
> 
> 赞同：1
> 
> 时间：2012-11-05T11:50:53.377
> 
> 标签：algorithm, graph

我遇到了问题，想知道是否可以预测最终结果。

这是图（有向无环图）上的一对一（交替移动）游戏。
从起点或节点开始，玩家 1 选择到节点 v1 的边。从节点 v1，玩家 2 选择一条到节点 v3 的边，依此类推。

如何获胜：到达没有出边的节点的玩家输了。

是否有可能提出一种算法，无论其他玩家做什么，它都能保证获胜？

所以，起始节点是s。玩家 1 可以选择 C ​​或 A。所以基本上，我有没有办法根据某种可以保证我获胜的算法做出决定？

[![](../Images/a47c9d7747871235013b0e448c9bf912.png)](https://i.stack.imgur.com/c4qYc.jpg)

在这种情况下，如果我在节点 D 或 B 并选择通往节点 E 的边，我会赢，因此玩家 2 会卡在节点 E。

*距离无关紧要

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:39:29.750

您需要将图形的节点分为两种类型：获胜节点和失败节点。获胜节点是当前玩家在该节点上具有获胜策略的节点，而失败节点是当前玩家无论他如何玩都会输的节点（假设他的对手正确玩）。由于这是一个有向无环图，所有节点要么赢要么输（因为最终将到达一个没有出边的节点）。

没有出边的节点显然正在丢失节点。对于另一个节点 N：

*   如果从 N 到失败节点有一条边，则 N 是获胜节点。
*   否则，N 为失败节点。

要对所有节点进行分类，请以反向[拓扑顺序](http://en.wikipedia.org/wiki/Topological_sorting)遍历节点。根据上述规则对每个节点进行分类。反向拓扑顺序可确保您在对 N 进行分类之前对所有可以从 N 到达的节点进行了分类。

完成后，如果起始节点是获胜节点，则有一个获胜策略：始终选择失败节点的边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:59:17.717

一般来说，没有。这将取决于您的图表。假设您有一个奇数节点的简单树/链（= n 个节点和 n-1 个边的图）。然后玩家二将永远获胜，因为您无法强制获胜。

您可以查看一些[最小-最大算法](http://en.wikipedia.org/wiki/Minimax)来指导您的游戏策略。有了这些，您可以通过从最后开始并往回走，确定 DAG 的每个子 DAG 的获胜者，从而递归地确定谁将获胜。

# android - 避免移动使用图表引擎显示的图表

> ID：13231545
> 
> 赞同：1
> 
> 时间：2012-11-05T11:51:08.307
> 
> 标签：android, charts, achartengine

> **可能重复：**
> [使用 ChartEngine 自定义显示的饼图](https://stackoverflow.com/questions/13227789/customizing-piechart-displayed-by-using-chartengine)

我使用图表引擎成功显示图表，但遇到以下问题：

1.我无法缩小图表大小。

2\. 图表在屏幕上移动，但我不希望这样。

3.我想在屏幕底部再显示一张图像，但这里的图表显示在屏幕中间，只是我想在图像的顶部和下方显示图表（如何设置边距）。

请任何人都可以帮助我。在此先感谢。

公共类 MainActivity 扩展 Activity {

```
private String[] mMonth = new String[] {
            "Jan", "Feb" , "Mar", "Apr", "May", "Jun",
            "Jul", "Aug" , "Sep", "Oct", "Nov", "Dec"
        };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    openChart();                        

}

private void openChart(){       

    double[] distribution = { 10,200,3,400,500,60} ;
    String[] dis = { "10","200","13","400","500","60"} ;
    // Color of each Pie Chart Sections
    int[] colors = { Color.BLUE, Color.MAGENTA, Color.GREEN, Color.CYAN, Color.RED,
                     Color.YELLOW };

    // Instantiating CategorySeries to plot Pie Chart       
    CategorySeries distributionSeries = new CategorySeries("Sample");
    for(int i=0 ;i < distribution.length;i++){
        // Adding a slice with its values and name to the Pie Chart
        distributionSeries.add(dis[i],distribution[i]);

    }   

    // Instantiating a renderer for the Pie Chart
    DefaultRenderer defaultRenderer  = new DefaultRenderer();       
    for(int i = 0 ;i<distribution.length;i++){          
        SimpleSeriesRenderer seriesRenderer = new SimpleSeriesRenderer();       
        seriesRenderer.setColor(colors[i]);
        seriesRenderer.setDisplayChartValues(true);

        // Adding a renderer for a slice
        defaultRenderer.setShowLegend(false);
        defaultRenderer.addSeriesRenderer(seriesRenderer);
        int mar[]=defaultRenderer.getMargins();
        System.out.println(mar);
    }

    // Creating an intent to plot bar chart using dataset and multipleRenderer      
    Intent intent = ChartFactory.getPieChartIntent(getBaseContext(), distributionSeries , defaultRenderer, "");     

    // Start Activity
    startActivity(intent);

} 
```

@Override public boolean onCreateOptionsMenu(Menu menu) { getMenuInflater().inflate(R.menu.activity_main, menu); 返回真；} }

# php - 使用 PHP 将简单的 Excel 数据导出到 MySQL

> ID：13231547
> 
> 赞同：4
> 
> 时间：2012-11-05T11:51:11.800
> 
> 标签：php, mysql, database, excel

我的客户得到了一个具有以下结构的 excel 文件

```
name     |     email
----------------------------
Name     |   email here
Name     |   email here
Name     |   email here
Name     |   email here
Name     |   email here
Name     |   email here 
```

我想根据这个模式制作一个 MySQL 数据库表并将数据保存到 MySQL 中。

我想知道如何做到这一点。还有一个选项需要

我们必须检查相应用户是否有正确的电子邮件地址，即 @ 形式。

我们可以在导入时将数据作为循环检查吗？

另外如何将此数据转换为 MySQL ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T11:56:03.163

将此 excel 文件保存为 csv 并运行以下代码并添加您的更改

```
$source = fopen('email.csv', 'r') or die("Problem open file");
    while (($data = fgetcsv($source, 1000, ",")) !== FALSE)
    {
        $name = $data[0];
        $email = $data[1];

        mysql_query("INSERT INTO `table` (`name`,`email`) VALUES ('".$name."','".$email."') ");

    }
    fclose($source); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:53:24.597

有一个名为 PHPExcel 的库。使用这个库，您可以轻松解析任何 excel 文件。或者，您可以将文件导出为 csv，这对您来说会更容易。php 具有处理 csv 文件的本机函数。您可以使用`fgetcsv()`或`str_getcsv()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T11:55:43.703

转到此链接并下载将读取 excel 文件并返回数组的 php 类。该数组将保存写入 excel 文件中的所有数据。

[php excel阅读器](http://code.google.com/p/php-excel-reader/)

免费...

你也可以在那里看到演示。

我已经在使用它了。它绝对是好的。

你可以自由地向我询问任何其他帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T11:55:20.233

```
<table>
                    <form enctype="multipart/form-data" action="" method="post">
                      <input type="hidden" name="MAX_FILE_SIZE" value="2000000" />
                            <tr>
                            <td><h5><b>Select Standared</b></h5></td>
                            <td><select name="chap_sel_std" id="chap_sel_std">
                                                        <option>Select Standared</option>
                                                <?php
                                                    $exe_sel_std = mysql_query("SELECT * from s_standared");
                                                    while($r_sel_std = mysql_fetch_array($exe_sel_std)){
                                                        $sel_stdid = $r_sel_std['std_id'];
                                                        $sel_std = $r_sel_std['std'];?>

                                                        <option value="<?php echo $sel_stdid; ?>"><?php echo $sel_std;?></option>
                                                        <?php } ?>
                                </select></td>
                            </tr>
                            <tr>
                                <td><h5><b>Select Font</b></h5></td>
                                <td><select name="sel_f_gn_que">
                                    <option>Select Font</option>
                                        <?php
                                            $xf = mysql_query("SELECT * from s_font");
                                            while($rquef = mysql_fetch_array($xf)){
                                                $f_id = $rquef['f_id'];
                                                $f_name = $rquef['f_name'];  ?>
                                    <option value="<?php echo $f_id; ?>"><?php echo $f_name; }?>  </option>
                                </select></td>
                            </tr>
                            <tr>
                                <td><h5><b>Upload Question<h5><b></td>
                                <td>
                                    <input type="file" name="file" id="file" class="btn">
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td colspan="2"><input type="submit" class="btn btn-green big" name="add_que" value="Add Questions"></td>
                                <td><input type="submit" name="saveandexit" class="" value="Finish" onclick="close();"></td>
                            </tr>
                    </form>
                    </table>
                    </div>                   

    <?php

            $data = array();

    //$db =& DB::connect("mysql://root@localhost/names", array());
    //if (PEAR::isError($db)) { die($db->getMessage()); }
      //quetype    difficulty    standard    subject    chap    que    marks

    function add_person($quetype,$dif, $subject,$chap_name,$que,$marks)
    {
     global $data, $db;

     //$sth = $db->prepare( "INSERT INTO names VALUES( 0, ?, ?, ?, ? )" );
    // $db->execute( $sth, array( $first, $middle, $last, $email ) );

     $data []= array(
       'quetype' => $quetype, 
       'difficulty' => $dif,
       'subject' => $subject,
       'chap' => $chap_name,
       'que' => $que,
       //'ans' => $ans,
       'marks' => $marks

     );
    }

    if(!isset($_FILES['file']['tmp_name'])){
        echo "";
    }elseif($_FILES['file']['tmp_name'])
    {
     $dom = DOMDocument::load( $_FILES['file']['tmp_name'] );
     $rows = $dom->getElementsByTagName( 'Row' );
     $first_row = true;
     foreach ($rows as $row)
     {
       if ( !$first_row )
       {
         $quetype = "";
         $dif = "";
         $subject = "";
         $chap_name = "";
         $que = "";
         //$ans = "";
         $marks = "";

         $index = 1;
         $cells = $row->getElementsByTagName( 'Cell' );
         foreach( $cells as $cell )
         {
           $ind = $cell->getAttribute( 'Index' );
           if ( $ind != null ) $index = $ind;

           if ( $index == 1 ) $quetype = $cell->nodeValue;
           if ( $index == 2 ) $dif = $cell->nodeValue;
           if ( $index == 4 ) $subject = $cell->nodeValue;
           if ( $index == 6 ) $chap_name = $cell->nodeValue;
           if ( $index == 8) $que = $cell->nodeValue;
           //if ( $index == 9) $ans = $cell->nodeValue;
           if ( $index == 9) $marks = $cell->nodeValue;

           $index += 1;
         }
         add_person($quetype,$dif, $subject,$chap_name,$que,$marks);

         if(isset($_POST['add_que'])){    

                 $chap_sel_std = $_POST['chap_sel_std'];
                 echo $simquefnt = $_POST['sel_f_gn_que'];

                    //que_id    quetype_id    chap_id    sub_id    std_id    que    dif_id    marks    que_cdate
             //$chap_sel_std = $_POST['chap_sel_std']; //que_id    quetype_id    chap_id    sub_id    std_id    que    dif_id    marks    que_cdate
             mysql_query("INSERT INTO 
                          s_question
                          VALUES (null,'$quetype','$chap_name','$subject','$chap_sel_std','$que','NO IMAGE','$dif','$marks','$simquefnt','$current')");                                                        
    //         header("location:../admin/quetionaris.php#tabs-que"); 
         echo "Successfully Added";
          }
       }
       $first_row = false;
     }
    }
    ?> 
```

# authorization - Web Api - 使用注释对每个用户进行授权

> ID：13231552
> 
> 赞同：0
> 
> 时间：2012-11-05T11:51:32.393
> 
> 标签：authorization, asp.net-web-api, roles, custom-attributes

是否可以使用注释实现基于用户的授权过程？我正在构建一个 REST Api，我希望用户只能访问属于他们的项目。这是通过查看传输的包含用户 ID 的 AccessToken 来实现的，从中我可以判断用户是否有权查看请求的内容。

为了避免每个 Controller.Method() 内部的静态授权过程，我非常想使用这样的 AuthorizationAttribute：

```
[RestrictAccess(Access.ADMIN, Access.OWNER)]
public SensitiveData GetSensitiveData(Guid userId) {

     return Repository.GetSensitiveData(userId);

} 
```

例如，应该只允许所有具有 AccessRole ADMIN 和所请求项目的 OWNER 的用户调用此方法。

本质上，我正在寻找一种在运行时在我的 AuthorizationAttribute 中使用控制器参数的方法。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:14:41.710

我找到了解决方案：

```
using System.Web.Http.Filters;
public class Restriction : ActionFilterAttribute {

    public override void OnActionExecuting(HttpActionContext actionContext) {

        // holds a dictionary of arguments passed to annotated Controller.
        var arguments = actionContext.ActionArguments; 

        base.OnActionExecuting

    }

} 
```

# sqlite - 使用 sqlite 和 Adob e AIR 计算时间

> ID：13231555
> 
> 赞同：0
> 
> 时间：2012-11-05T11:51:39.090
> 
> 标签：sqlite, actionscript, air

现在我正在使用 SQlite 和 Adob​​e AIR（操作脚本）开发员工时间表应用程序。我正在努力从 sqlite 计算时间间隔计算 *（即员工的每项工作都应按小时更新到 sqliteDB。例如，员工在下午 1:50 到下午 3:30 工作，所以他总共工作了 1 小时 40 分钟）。* 我的问题是，如何将时间更新到 SQLite 和进程中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:29:35.687

有多种方法可以将时间添加到数据库字段。您可以仅使用 SQL，也可以结合使用 SQL 和 ActionScript。无论哪种方式，您要做的第一件事是确保您的数据库字段设置为类型 DATE。通过这样做，您的 AIR 应用程序将能够将该字段选择为 ActionScript Date( ) 对象。

这是一个仅使用 SQL向名为*dateModified*的 DATE 字段添加时间的示例。首先，我们将设置字段的日期和时间，然后我们将添加 1 小时 30 分钟：

```
UPDATE main.Tracking SET dateModified = datetime('2012-11-08 10:00:00') WHERE trackingID = 2;
UPDATE main.Tracking SET dateModified = datetime(dateModified, '+1 hour', '+30 minutes') WHERE trackingID = 2; 
```

执行第二条 SQL 语句后，*dateModified*的值为 2012-11-08 11:30:00。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:02:11.427

SQLite 没有单独的时间值数据类型，但它可以将某些字符串和数字解释为时间。

要计算时间值，您应该使用*Unix 时间戳*，即自 1970 年以来的秒数。

有关如何在此格式和其他格式之间进行转换的信息，请参阅[日期和时间函数](http://www.sqlite.org/lang_datefunc.html)。

# postgresql - Postgres 可以用 DST 区分时间戳吗？

> ID：13231557
> 
> 赞同：4
> 
> 时间：2012-11-05T11:51:39.820
> 
> 标签：postgresql, timezone, dst

2012 年 11 月 4 日，美国的冬季时钟从凌晨 2 点变为凌晨 1 点。例如，凌晨 2 点 CDT 变成了凌晨 1 点 CST。

这意味着在凌晨 1:32 “发生了两次”：CDT 1:32（纪元 1352010776642）和一小时后 CST 1:32（纪元 1352014376642）。

是否有可能以某种方式`timestamp`在 PostgreSQL 中以普通类型区分两者？我们观察到，在 CDT 的 1:32，我们的应用程序将日期存储为 1352014376642（“第二次出现”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:15:12.540

据我所知，没有。

`TIMESTAMP WITHOUT TIME ZONE`（“plain” `timestamp`）就像您使用的那样直接存储本地时间，同样不存储关联的 UTC 偏移量或时区。它是本地时间，因此除非您存储与该本地时间关联的时区，否则它可能是许多不同的时间之一瞬间。

没有办法区分`'2012-01-01 11:00 +0800'`一次`'2012-01-01 11:00 +0700'`转换为`timestamptz`和存储。因此，如果您有一个 DST 班次导致一个小时在不同的时区重播，您将无法重建该信息。见证：

```
regress=> select extract(epoch from '2012-01-01 11:00 +0800'::timestamp),
                 extract(epoch from '2012-01-01 11:00 +700'::timestamp);
 date_part  | date_part  
------------+------------
 1325415600 | 1325415600
(1 row) 
```

如您所见，时区被忽略；它被剥离并丢弃。`timestamp`字段不是用于识别离散时间点的正确类型，因此您是 SOL。

* * *

顺便说一句，`TIMESTAMP WITH TIME ZONE`使用设置将时间戳转换为 UTC 进行存储并返回本地时区进行检索`timezone`。它描述了一个瞬间（大致，见最后的链接）。这意味着在`timestamptz`，`timestamp` *原来的时区一样丢失了*。这令人困惑，并且似乎与数据类型的名称相矛盾。显然，标准就是这样，所以无论它是否愚蠢，我们都坚持使用它。为了区分时间戳，您还需要存储相关的 UTC 偏移量。最好命名为`TIMESTAMP WITH TIME ZONE CONVERSION`.

这`timestamptz`对于存储离散的时间点很有好处，但对于存储在现实世界当地时间何时发生的事件并没有多大好处。同时存储 UTC 偏移量和/或 tzname。

看：

```
regress=> select extract(epoch from '2012-01-01 01:00 CST'::timestamptz),
                 extract(epoch from '2012-01-01 02:00 CDT'::timestamptz);
 date_part  | date_part  
------------+------------
 1325401200 | 1325401200 
```

遗憾的是，没有数据类型可以`TIMESTAMP WITH TIME ZONE`与内部 UTC 偏移量结合，记录转换前的 TZ 偏移量。

也就是说，[你不能依靠时钟来不加倍时间戳或以其他方式变得奇怪](http://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time)，因此有必要拥有对时间非常健壮并且不相信它有多大意义的代码。

# jquery - jQuery，检查 .detach 变量是否为空或是否存储了分离的数据？

> ID：13231564
> 
> 赞同：0
> 
> 时间：2012-11-05T11:52:09.283
> 
> 标签：jquery

我在下面有一个 this 函数，当 onClick 发生 + 使用 ref 时被触发。

我已经设法让 .detach 成功工作。

但是当我的函数第二次运行时，我想检查它是否`detachedMini`真的包含任何东西，以便我可以重新附加它，然后再分离下一个。

```
bikeFilter = function (y) {

    var detachedMini,
        detachedMain;

    bikeDetach = function () {

        detachedMini = $('#bike-mini-slider .bike[data-group!=' + y + ']');
        detachedMain = $('#bike-main-slider .bike[data-group!=' + y + ']');

        detachedMini.detach();
        detachedMain.detach();

    };

    if ( !detachedMini == 0 ) {

        $('#bike-mini-slider .bike').append(detachedMini);
        $('#bike-main slider .bike').append(detachedMain);

    }                       

    bikeDetach();

}; 
```

我试过这个...

```
if ( !detachedMini == 0 ) { 
```

但我不认为它工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:57:03.897

使用 jQuery 对象的[长度](http://api.jquery.com/length/)属性：

```
if (detachedMini.length) {
    $('#bike-mini-slider .bike').append(detachedMini);
    $('#bike-main slider .bike').append(detachedMain);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:57:52.520

尝试

```
if ( detachedMini.length != 0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:58:26.180

怎么样：

```
bikeFilter = function (y) {

    var detachedMini = null,
        detachedMain = null;

    bikeDetach = function () {

        detachedMini = $('#bike-mini-slider .bike[data-group!=' + y + ']').detach();
        detachedMain = $('#bike-main-slider .bike[data-group!=' + y + ']').detach();

    };

    if ( typeof(detachedMini) != "null" ) {

        $('#bike-mini-slider .bike').append(detachedMini);
        $('#bike-main slider .bike').append(detachedMain);

    }                       

    bikeDetach();

}; 
```

# iphone - iPhone - 上传到 iTunes 商店时出错？

> ID：13231567
> 
> 赞同：0
> 
> 时间：2012-11-05T11:52:20.230
> 
> 标签：iphone, xcode, app-store

嗨，我坚持将应用程序提交到 iTunes Store。我能够成功验证 ipa，但是当我将应用程序提交到 iTunes 商店时，我收到了错误消息。我尝试了应用程序加载器和 Xcode。我已经联系了苹果支持，但没有用。这是确切错误的屏幕截图，但我没有从中得到任何东西。 ![错误日志](../Images/573c60a93ebafccbf67352a0ae8685fa.png)

我正在使用 Xcode 4.1，mac os 版本 10.6.8。我迫切需要解决方案。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:51:23.330

我在 Mountain Lion 上使用 Xcode 4.5.0 遇到了同样的错误。问题是当前的 Java 版本是 1.7.x。帮助暂时从 /Library/Frameworks/JavaVM.framework/Versions 中删除当前的 java 版本

请参阅[Xcode 4.5 iOS 6 错误上传到 iTunes](https://stackoverflow.com/questions/13092420/xcode-4-5-ios-6-error-uploading-to-itunes)

# ios - 我的 cocos2d 应用程序每秒增加实际内存使用量是否正常？

> ID：13231570
> 
> 赞同：1
> 
> 时间：2012-11-05T11:52:22.107
> 
> 标签：ios, xcode, memory-management, memory-leaks, cocos2d-iphone

我为 iPad 开发 cocos2d iOS 应用程序。当我测试内存泄漏和对象分配时，我的 Live Bytes 是稳定的， **但是当我运行 Activity Monitor 时，我看到我的应用程序的实际内存使用量每秒增加 0.02MB。**

我想问这正常吗，有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:21:25.670

这是完全合理的，因为 Cocos2d（至少 0.9.x 和 1.0 分支）倾向于自动释放所有内容。这可能会导致您在屏幕上循环生成大量精灵的情况下积累内存。如果您确实在自动释放并且没有泄漏，那么在您的循环中添加一个自动释放池可能是一个快速修复。也就是说，您实际上可能正在泄漏。

为了调试内存泄漏，我会从 Leaks Instrument 开始，也许还有 Allocations 工具。在 Xcode 中，点击`Command`+ `I`，或`Product -> Profile`

![Xcode 构建菜单](../Images/d159246eaf273cb60ba5eae54faf199f.png)

打开探查器后，您将看到一个包含大量调试工具的菜单：

![仪器选择菜单](../Images/e25ef9523945b0d3af2b248171cfa71b.png)

选择泄漏后，您将看到这个方便的窗口，其中包含各种有用的信息：

![在此处输入图像描述](../Images/612c3ea379db8e5f045e6e6813294db3.png)

最重要的是，您会以图表的形式看到内存分配和泄漏。在底部，您可以看到各种有用的信息，例如分配了哪些对象、使用了多少内存等等。

有关使用仪器进行 Xcode 调试的完整处理，请查看[这个方便的 Apple 开发人员视频（需要登录）](https://developer.apple.com/itunes/?destination=adc.apple.com.10079881589.010079881595.11490838330?i=1290565371)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T03:52:06.263

一年后，我有这个确切的问题。事实证明，我启用了僵尸，这是我每秒增加内存的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T18:18:05.593

我记得我有这个问题，因为我记录了调试消息！

我在循环周期（每帧）中记录此消息，这就是内存增加的原因！

请清除或评论所有日志消息，这将解决您的问题:)

# c# - DomainDataSourceView MoveCurrentTo... 不断循环

> ID：13231575
> 
> 赞同：0
> 
> 时间：2012-11-05T11:52:38.133
> 
> 标签：c#, .net, silverlight

什么时候

DomainDataSourceView.MoveCurrentToNext()

和

DomainDataSourceView.MoveCurrentToPrevious()

以非特定顺序多次调用 DomainDataSourceView 陷入某种循环，其中 CurrentItem 不断更改为集合中的随机项。停止的唯一方法是关闭 Silverlight 应用程序。这是一个已知的问题？

这是 silverlight mvvm 应用程序中的调用顺序：

*   按钮被点击
*   绑定到按钮的 RelayCommand 会触发一个 canexecute 方法（返回 true）
*   执行命令的方法并调用 DataView.MoveCurrentToNext()
*   RaiseCanExecuteChanged 方法调用第一个-后退-下一个-最后一个按钮命令（全部返回false）
*   视图模型上的 CurrentEntity 属性更改为域数据源中的当前项
*   为当前实体异步加载一些数据

当快速单击下一个按钮几次时，它开始循环。当点击之间的间隔稍大时，没问题。

它几乎像 MoveCurrentToNext 一样在处理第一次点击时再次执行。当使用断点进行调试时，这永远不会发生。循环时在所有方法中添加的断点永远不会被命中。有没有人知道如何解决此问题或可能导致此问题的原因？

# vb.net - 弹出窗口显示图像 vb.net

> ID：13231580
> 
> 赞同：0
> 
> 时间：2012-11-05T11:52:51.097
> 
> 标签：vb.net

我正在尝试在 VB.net 中做某事，但没有成功。我在表单上有一个链接标签，当用户单击它时，它需要显示一个带有图像的弹出窗口。

任何人都可以帮我解决这个问题吗？

我有以下代码，但它只显示弹出表单，并且图像显示在链接标签所在的主表单上，而不是弹出表单中。

```
Dim Obj As New Form
Obj.Show()

PictureBox1.Image = Image.FromFile("d:\testImage.jpg") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:19:23.597

假设你已经设计了一个表单（我们称之为 Form2）并且这个表单里面有一个图片框，那么：

您需要在将弹出窗口加载给用户之前加载图像另外确保弹出窗口显示模态以避免由于正在加载的窗口但在加载它的父窗体后面可能引起的混淆。

```
Dim Obj As New Form2    'You need to specify the form name that you have already designed.
Obj.PictureBox1.Image = Image.FromFile("d:\testImage.jpg")
Obj.ShowDialog()  'ShowDialog will force the user to close the form first before 
                 'coming back to the original form 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:15:10.077

你要做的是在弹出的表单中添加一个图片框（PictureBox1）然后：

```
Dim Obj As New Form
Obj.PictureBox1.Image = Image.FromFile("d:\testImage.jpg")
Obj.Show() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:58:29.037

右键单击您的项目。然后添加新表格。命名它，`form2`然后在该表单上放置一个图片框。现在，在您的 form1 上添加一个按钮的简单操作方法。双击该按钮，以便获得单击事件。在代码中，您将输入：

```
 Dim myForm2 As New Form2
  myForm2.PictureBox1.Image = Image.FromFile("d:\testImage.jpg")
  myForm2.showDialog
  'Any actions after the user returns would be here
  myForm2.dispose() 
```

myForm2 是 Form2 的一个新实例。注意 Form2 是`name`您在 form2 属性窗口下分配给 form2 的。

将新表单添加到您的项目中。在解决方案资源管理器中右键单击您的项目名称。然后加。然后windows窗体...命名为Form2.vb。

之后转到 form2 的设计视图并在窗体上放置一个图片框...然后转到 form1 并在按钮单击事件上使用上面的代码以查看它的工作原理..

# math - 从 Line 的起点画垂线

> ID：13231582
> 
> 赞同：1
> 
> 时间：2012-11-05T11:52:54.187
> 
> 标签：math, line

如何在一条线的起点绘制一条垂直线..例如a从坐标（x，y）开始，到（x1，y1）结束。我需要从点（x，y）绘制垂直线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:56:24.157

从 (x,y)->(x+(y1-y),y-(x1-x))
或 (x,y)->(x-(y1-y),y+(x1-x))绘制

# iphone - iOS - 将 URL 图像设置为 UINavigationBar

> ID：13231596
> 
> 赞同：0
> 
> 时间：2012-11-05T11:53:39.060
> 
> 标签：iphone, ios, ipad, uiimage, uinavigationbar

我正在尝试将`UIImage`（例如[http://www.nhpdcve.org/images/b5.jpg](http://www.nhpdcve.org/images/b5.jpg)）从服务器设置为`UINavigationBar`.
我们可以设置它的工具栏，但是呢`UINavigationBar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:58:13.010

您可以使用以下方法设置图像

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"yourImageName"] forBarMetrics:UIBarMetricsDefault]; 
```

还使用以下方法从 URL 获取图像..

```
-(UIImage *) getImageFromURL:(NSString *)fileURL {
    UIImage * result;

    NSData * data = [NSData dataWithContentsOfURL:[NSURL URLWithString:fileURL]];
    result = [UIImage imageWithData:data];

    return result;
} 
```

并将此图像直接设置为 yourNavigatioBar，如下所示。

```
[yourNavigationBar setBackgroundImage:[self getImageFromURL:yourStringURL] forBarMetrics:UIBarMetricsDefault]; //// pass your string url insted of yourStringURL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:09:11.613

您可以轻松设置`Navigationbar`. 如果您想图像分辨率清晰，那么您的图像大小必须`320 x 45`设置为如下代码所示的图像：-

**像这样从资源文件夹设置图像：-**

```
UIImage *image = [UIImage imageNamed:@"navBarLoc.png"];
                [self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

**您还可以像这样从 URL 设置图像：-**

```
 NSURL *url =[NSURL URLWithString:@"http://www.urimageur/com"];
                NSData *d =[NSData dataWithContentsOfURL:url];
                UIImage *image = [UIImage imageWithData:d];

                [self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:57:53.680

你的意思是作为导航栏的背景？尝试

```
[yourNavigationBar setBackgroundImage:[UIImage imageNamed:@"imagename"] forBarMetrics:UIBarMetricsDefault]; 
```

# java - 单击下载按钮时如何显示文件保存文件对话框？

> ID：13231597
> 
> 赞同：3
> 
> 时间：2012-11-05T11:53:41.847
> 
> 标签：java, jsf, primefaces

我想在使用 PrimeFaces 单击下载按钮时显示对话框以保存文件（选择要保存文件的路径）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T12:08:20.670

[PrimeFaces`<p:fileDownload>`标签](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/fileDownload.html)具有`contentDisposition`您可以设置为`inline`（显示内联文件）或`attachment`（弹出*另存为*对话框）的属性。

```
<p:fileDownload ... contentDisposition="attachment" /> 
```

但是，它默认为`attachment`已经！您不需要明确指定它。

因此，您的具体问题是由您的网络浏览器本身引起的。大多数现代网络浏览器都可以配置为在检索特定内容类型的文件时采取特定的默认操作。显然，您的配置为始终以内联方式显示它，而不管内容配置如何。目前尚不清楚您使用的是哪个网络浏览器，但 Firefox 处理它的方式在初学者中是最常见和最令人困惑的，所以我将针对它进行回答。

例如，当您在 Firefox 中下载 PDF 文件时，默认情况下会显示一个带有 2 个选项的对话框：在 Adob​​e 中打开（内联），或将其保存到磁盘。在其下方，有一个复选框来记住默认操作。

![在此处输入图像描述](../Images/1efce4eaf7ad61ad78586f22f6f37364.png)

显然，您曾经勾选过，虽然该选项设置为在线打开文件，以这种方式Firefox将再也不会向您询问是否打开或保存它。

您可以通过*Tools > Options > Applications*重新配置它。

![在此处输入图像描述](../Images/3d0785784790d87eb17b3c0814607425.png)

# javascript - 敲除自定义绑定回调函数参数名称 bindingContext 的问题

> ID：13231600
> 
> 赞同：0
> 
> 时间：2012-11-05T11:53:50.527
> 
> 标签：javascript, jquery, knockout.js

我正在使用 knockout.js。我正在尝试通过自定义绑定创建确认对话框。我有一个数组`people`。通过`foreach`绑定，我显示数组的每个条目以及与每个项目关联的删除链接。当用户点击删除链接时，确认对话框打开以确保用户是否要删除它。为了显示确认对话框，我使用了自定义绑定名称`confirm`。每当用户单击删除按钮时，confirmMessageText（与元素关联的可观察对象）值都会更改，因此`confirm`绑定更新函数调用。在此功能中，用户可以根据确认对话决定删除该项目。我还创建了一个*FIDDLE 示例*：

[http://jsbin.com/ocakap/4/edit](http://jsbin.com/ocakap/4/edit)

**我的问题**：我遇到了自定义绑定更新回调函数参数名称的问题`bindingContext`。通过这个，我正在访问敲除特殊属性名称`$data`，但对于每个条目，都`$data`包含数组的最后一个元素对象（*在我的小提琴示例中，它是 Denise*。*您可以通过单击任何删除链接来查看此内容，出现警报显示值$data 参数*）。

我该如何解决这个问题，我将如何在更新回调函数中获取数组的当前元素对象条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:23:36.693

在单击绑定中，您更新了强制敲除检查所有依赖项的确认消息，在这种情况下，KO 运行确认绑定 3 次，出现对话框的最后一项是数组中的最后一个人。

要解决此问题，您需要引入一个变量来保存您要删除的人员对象。

这里正在修复[http://jsbin.com/ocakap/12/edit](http://jsbin.com/ocakap/12/edit)。

# jenkins - 詹金斯随机崩溃

> ID：13231603
> 
> 赞同：7
> 
> 时间：2012-11-05T11:53:59.400
> 
> 标签：jenkins

我的詹金斯服务器随机崩溃，所以我确保拥有最新版本并检查了日志，但它们没有为我提供有用的信息。我的问题是：如何调试这些崩溃？有没有办法提高日志级别？

这是我的日志输出：

```
Running

 from: /usr/share/jenkins/jenkins.war
Nov 5, 2012 12:42:33 PM winstone.Logger logInternal
INFO: Beginning extraction from war file
Jenkins home directory: /var/lib/jenkins found at: EnvVars.masterEnvVars.get("JENKINS_HOME")
Nov 5, 2012 12:42:35 PM winstone.Logger logInternal
INFO: HTTP Listener started: port=8080
Nov 5, 2012 12:42:35 PM winstone.Logger logInternal
INFO: Winstone Servlet Engine v0.9.10 running: controlPort=disabled
Nov 5, 2012 12:42:36 PM jenkins.InitReactorRunner$1 onAttained
INFO: Started initialization
Nov 5, 2012 12:42:36 PM hudson.ClassicPluginStrategy createPluginWrapper
INFO: Plugin cvs.jpi is disabled
Nov 5, 2012 12:42:36 PM hudson.ClassicPluginStrategy createPluginWrapper
INFO: Plugin translation.jpi is disabled
Nov 5, 2012 12:42:36 PM hudson.ClassicPluginStrategy createPluginWrapper
INFO: Plugin subversion.jpi is disabled
Nov 5, 2012 12:42:36 PM jenkins.InitReactorRunner$1 onAttained
INFO: Listed all plugins
Nov 5, 2012 12:42:36 PM jenkins.InitReactorRunner$1 onAttained
INFO: Prepared all plugins
Nov 5, 2012 12:42:36 PM jenkins.InitReactorRunner$1 onAttained
INFO: Started all plugins
Nov 5, 2012 12:42:41 PM jenkins.InitReactorRunner$1 onAttained
INFO: Augmented all extensions
Nov 5, 2012 12:42:41 PM jenkins.InitReactorRunner$1 onAttained
INFO: Loaded all jobs
Nov 5, 2012 12:42:41 PM org.apache.sshd.common.util.SecurityUtils$BouncyCastleRegistration run
INFO: Trying to register BouncyCastle as a JCE provider
Nov 5, 2012 12:42:41 PM org.apache.sshd.common.util.SecurityUtils$BouncyCastleRegistration run
INFO: Registration succeeded
Nov 5, 2012 12:42:42 PM org.jenkinsci.main.modules.sshd.SSHD start
INFO: Started SSHD at port 52235
Nov 5, 2012 12:42:42 PM jenkins.InitReactorRunner$1 onAttained
INFO: Completed initialization
Nov 5, 2012 12:42:43 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.web.context.support.StaticWebApplicationContext@271a2576: display name [Root WebApplicationContext]; startup date [Mon Nov 05 12:42:43 CET 2012]; root of context hierarchy
Nov 5, 2012 12:42:43 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory
INFO: Bean factory for application context [org.springframework.web.context.support.StaticWebApplicationContext@271a2576]: org.springframework.beans.factory.support.DefaultListableBeanFactory@28ce41cc
Nov 5, 2012 12:42:43 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@28ce41cc: defining beans [authenticationManager]; root of factory hierarchy
Nov 5, 2012 12:42:44 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.web.context.support.StaticWebApplicationContext@654481bb: display name [Root WebApplicationContext]; startup date [Mon Nov 05 12:42:44 CET 2012]; root of context hierarchy
Nov 5, 2012 12:42:44 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory
INFO: Bean factory for application context [org.springframework.web.context.support.StaticWebApplicationContext@654481bb]: org.springframework.beans.factory.support.DefaultListableBeanFactory@20e1ed5b
Nov 5, 2012 12:42:44 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@20e1ed5b: defining beans [filter,legacy]; root of factory hierarchy
Nov 5, 2012 12:42:44 PM hudson.TcpSlaveAgentListener <init>
INFO: JNLP slave agent listener started on TCP port 52602
Nov 5, 2012 12:42:44 PM hudson.WebAppMain$2 run
INFO: Jenkins is fully up and running 
```

对我有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-01T16:16:56.107

要提高 Jenkins 本身的日志级别，请在通过命令行启动 Jenkins 时使用以下参数：

```
-Djava.util.logging.loglevel=FINE 
```

这应该会改变**Jenkins GUI 中显示**的日志记录。

# java - jdbc:jtds 连接到 SQL 服务器

> ID：13231606
> 
> 赞同：2
> 
> 时间：2012-11-05T11:54:29.480
> 
> 标签：java, sql-server, jdbc

我正在尝试使用 JDBC 驱动程序在一些 Java 和 SQL Server 之间创建连接。我创建了一个 Connection 类，它应该与我的计算机上的服务器建立连接，例如 IP 地址为“BHX”

这是连接类

```
public class Connection {

public static void main(String[] args) throws Exception {

    try {
        String databaseDriver = "net.sourceforge.jtds.jdbc.Driver";
        Class.forName(databaseDriver);
    } catch (Exception e) {
        e.printStackTrace();
    }
    try {               
        String url = "jdbc:jtds:sqlserver://BHX:1433/Forecast;instance=SQLEXPRESS";
        java.sql.Connection con =  DriverManager.getConnection(url);
        System.out.println("Connection created");
        con.close();
    } catch (Exception e1) {
        e1.printStackTrace();
    }
}
} 
```

我想知道 url 字符串是否有任何问题，因为当我运行此代码时，我收到以下错误：

```
java.sql.SQLException: Network error IOException: Connection refused: connect
at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:417)
at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:185)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at Connection.main(Connection.java:56)
Caused by: java.net.ConnectException: Connection refused: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(Unknown Source)
at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:311)
at net.sourceforge.jtds.jdbc.SharedSocket.<init>(SharedSocket.java:261)
at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:318)
... 5 more 
```

我已经看到了类似的问题[（比如这里）](https://stackoverflow.com/questions/1862283/help-me-create-a-jtds-connection-string)，但看起来我已经遵循了所有可能的解决方案。我检查了配置管理器中启用了 TCP/IP，并且端口号是 1433。

我试过在禁用防火墙的情况下运行它，但仍然出现相同的错误。

telnet BHX 1433 并且我收到以下消息“...无法在端口 1433 上打开与主机的连接：连接失败”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-09-30T18:00:22.587

当您将用户名和密码添加到连接字符串时，它将起作用，例如：

```
"jdbc:jtds:sqlserver://BHX:1433/Forecast;instance=SQLEXPRESS;user=XXXXX;password=XXXXX" 
```

这应该适用于 SQL Server 身份验证。

如果您只使用 Windows 身份验证，您还需要提供如下域：

```
"jdbc:jtds:sqlserver://BHX:1433/Forecast;instance=SQLEXPRESS;domain=XXXXX;user=XXXXX;password=XXXXX" 
```

# vb.net - VB.NET：从 LCID 获取本地语言名称

> ID：13231607
> 
> 赞同：0
> 
> 时间：2012-11-05T11:54:32.377
> 
> 标签：vb.net, culture

我想获取给定 LCID 的母语名称（例如“Deutsch (Deutschland)”）。到目前为止，我只看到了必须将 CurrentThread 的文化设置为这种文化的示例。我正在寻找解决方案，而无需设置 CurrentThread 的文化。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:15:36.433

如果不设置`this new culture`（提供其 LCID）到您当前线程的文化，您可以使用这种方式：

```
 Dim NativeName As String=System.Globalization.CultureInfo.GetCultureInfo(LCID_HERE).NativeName 
```

# asp.net - 将 CSS 样式添加到 Style 对象 asp net

> ID：13231609
> 
> 赞同：2
> 
> 时间：2012-11-05T11:54:39.507
> 
> 标签：asp.net, css, styles, custom-controls

我正在以这种方式使用 [Style] 类：

```
public class ServerControl1 : System.Web.UI.Control
{
    ....

    protected override void OnPreRender(EventArgs e)
    {
      Style wrapperStyle = new Style();

      wrapperStyle.BorderColor = BorderColor;
      ....
      ....

      this.Page.Header.StyleSheet.CreateStyleRule(wrapperStyle, null, key);

      .....
     }
} 
```

如何添加 [line-height] 或其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:32:57.850

```
wrapperStyle.Attributes.Add("class","wrapper_class"); 
```

在你的 CSS 文件中

```
.wrapper_class {
    line-height:24px;
} 
```

编辑：

```
wrapperStyle.Style.Add("line-height","24px"); 
```

# python - 使用 Python 通过 ActiveSync 向交换服务器发送命令

> ID：13231611
> 
> 赞同：2
> 
> 时间：2012-11-05T11:54:41.490
> 
> 标签：python, exchange-server, win32com, activesync

我想获取用户的设置信息。此处记录了所需的命令：[ActiveSync 命令参考协议规范](http://msdn.microsoft.com/en-us/library/ee202944(v=exchg.80).aspx) 我假设我必须使用 win32com.client.Dispatch("Something") 来获得到我的 Exchange 服务器的 ActiveSync 连接，我可以使用它来发出提到的“设置”命令。

似乎没有可用的库：[Python Exchange ActiveSync Library](https://stackoverflow.com/questions/12547131/python-exchange-activesync-library)

# flash - 使用 alterRowColors 时指定数据网格文本颜色

> ID：13231616
> 
> 赞同：1
> 
> 时间：2012-11-05T11:55:00.660
> 
> 标签：flash, actionscript-2

我正在使用数据网格来显示来自 XML 的数据。为了可读性，我需要交替行颜色并在文本和背景之间具有高对比度。

我已将alternatingRowColors 设置为白色和黑色。白色行中的文本是黑色的，而黑色行中的文本是深蓝色的，对比度很小。据我所知，对于任何浅色背景颜色，文本颜色为黑色，对于任何深色背景颜色，文本颜色为深蓝色（与窗口镶边匹配）。

我尝试设置我能找到的所有其他颜色样式值，希望其他设置可以重新用于深色背景上的文本，但到目前为止还没有运气。

如何指定用于深色背景的文本颜色？是否有等效于alternatingRowColors 的文本颜色？除非其中任何一个，我怎样才能手动设置每行的文本颜色？

谢谢你。

# shopify - 如何正确处理不重复收费

> ID：13231618
> 
> 赞同：1
> 
> 时间：2012-11-05T11:55:14.440
> 
> 标签：shopify

我们的应用 (CustomerSure) 目前无法检查某个 Shopify 客户是否有我们用来设置内部状态的有效经常性费用。在合作伙伴区域，它显示他们的费用当前被“冻结”。

是什么导致经常性费用被冻结，并且他们的帐户中仍然存在费用？

目前，我们检查当前费用 ( `ShopifyAPI::RecurringApplicationCharge.current`) 的调用引发了一个异常，在 nil 上调用了未定义的方法 find，`.all`这似乎是罪魁祸首，请参阅：

[https://github.com/Shopify/shopify_api/blob/master/lib/shopify_api/resources/recurring_application_charge.rb#L7](https://github.com/Shopify/shopify_api/blob/master/lib/shopify_api/resources/recurring_application_charge.rb#L7)

我们是否应该在询问当前费用之前检查整体帐户状态，或者这是需要检查`nil`回报的宝石中的过度网站`.all`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:54:22.180

冻结费用是由于商店自己的帐户由于不再良好的信誉而被冻结。这通常是由于商家在信用卡过期后忘记更新信用卡信息造成的。

如果`shopify_api`gem 在调用后抛出异常，`ShopifyAPI::RecurringApplicationCharge.current`那么这听起来像是一个错误，所以将它发布到……哦，你已经将它发送到了[正确的 GitHub 问题跟踪器](https://github.com/Shopify/shopify_api/issues/38)。谢谢！

# php - 用php从远程服务器获取xml数据

> ID：13231620
> 
> 赞同：0
> 
> 时间：2012-11-05T11:55:19.407
> 
> 标签：php, jquery, xml

我想使用 php 从远程服务器获取 xml 数据。这是我获取 xml 的代码，但我得到了 bool(false)

```
<?php 
   header ("content-type: text/plain");
   $filename = file_get_contents("http://gep4.com/radio/wp-content/plugins/haze_radio/readme.txt");
   var_dump($filename);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:22:50.590

试试这个来获取它正在工作的数据

```
function getPage($url)
{
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);    
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 20);
curl_setopt($ch, CURLOPT_REFERER, 'http://www.google.com/');
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8');

$result['EXE'] = curl_exec($ch);
$result['INF'] = curl_getinfo($ch);
$result['ERR'] = curl_error($ch);

curl_close($ch);
 unset($url, $referer, $agent, $header, $timeout);
return $result;
}
$url = "http://gep4.com/radio/wp-content/plugins/haze_radio/readme.txt";
var_dump(getPage($url) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:00:01.287

这意味着获取文件内容时出错。您是否确定该文件存在或您有权读取该文件或其他内容？

> [文件获取内容](http://php.net/manual/en/function.file-get-contents.php)
> 
> 返回值
> 
> 该函数返回读取的数据或失败时返回 FALSE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:00:22.410

可能[allow_url_fopen](http://php.net/manual/en/filesystem.configuration.php)在 php.ini 中被禁用

如果您有权访问 php.ini，请启用它

或者，尝试[CURL](http://php.net/manual/en/book.curl.php)

示例 CURL 调用

```
 $ch = curl_init(); 

    // set url 
    curl_setopt($ch, CURLOPT_URL, "example.com"); 

    //return the transfer as a string 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

    // $output contains the output string 
    $output = curl_exec($ch); 

    // close curl resource to free up system resources 
    curl_close($ch); 
```

# python - 如何询问是否单击了按钮列表中的按钮

> ID：13231622
> 
> 赞同：0
> 
> 时间：2012-11-05T11:55:23.830
> 
> 标签：python, pyqt

我有一个按钮列表，但我不知道如何拥有列表中每个按钮的功能。

```
flatButton = QtGui.QPushButton("Band " + str(i))
self.Layout1.addWidget(flatButton)
list.append(flatButton) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:48:05.100

从标题中我假设你有一堆按钮，它们的`clicked`信号连接到同一个插槽，当一个按钮被点击时，你想识别它。如果我是对的，您需要的是`sender()`方法。以下代码显示了它：

```
from PyQt4.QtGui import *

class MyWidget(QWidget):
    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)
        self.hlayout = QHBoxLayout()
        self.setLayout(self.hlayout)
        for c in range(3):
            b = QPushButton("button {}".format(c), self)
            b.clicked.connect(self.clickHandler)
            self.hlayout.addWidget(b)

    def clickHandler(self):
        button = self.sender()
        print button.text()

if __name__ == '__main__':
    import sys
    app = QApplication(sys.argv)
    w = MyWidget()
    w.show()
    sys.exit(app.exec_()) 
```

无论如何，在提出问题时您应该提供更多细节：说出您尝试过的内容，输入一些代码，有意义的解释等。

# java - 访问 JAR 资源

> ID：13231625
> 
> 赞同：1
> 
> 时间：2012-11-05T11:55:40.373
> 
> 标签：java, jar, embedded-resource

创建加载资源的 .jar 让我很头疼。我在这里阅读了很多帖子，但我不知道我应该如何使用

```
this.getClass().getResourceAsStream(".."); 
```

我需要将数据库加载到内存中：

```
File file = new File(Thread.currentThread().
getContextClassLoader().getResource("phonebook").getFile());                          
String attachStmt = "ATTACH '" + file + "' AS tempInMemoryDb";
stmt.execute(attachStmt); 
```

因此，如果我从 NetBeans 运行项目，它会很好地加载数据库，但是当我清理和构建并从 dis 文件夹运行 jar 文件时，我在命令行中看到电话簿文件（数据库文件）没有加载。所以，我的问题是：我应该如何使用`this.getClass().getResourceAsStream("..")`来创建文件并将其传递给`"String attachStmt = "ATTACH '" + file + "' AS tempInMemoryDb";`我可以加载数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:02:16.810

`ATTACH`需要一个文件作为输入，但是当您为应用程序构建 JAR 时，您所引用的文件在此 JAR 中并且未提取！在这种情况下，您需要先将数据写入文件。

通过调用创建一个空的临时文件[`File.createTemporaryFile`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29)。使用[此问题](https://stackoverflow.com/q/43157/335858)的答案中描述的方法之一将返回的流的内容复制`getResourceAsStream`到临时文件中。

程序退出时，不要忘记删除临时文件。确保这一点的一种方法是调用[`deleteOnExit`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#deleteOnExit%28%29)第一步中返回的临时文件对象。

# ruby-on-rails - 在 Ruby on Rails 中的 created_at 字段上使用 group_by

> ID：13231629
> 
> 赞同：0
> 
> 时间：2012-11-05T11:55:51.143
> 
> 标签：ruby-on-rails, date, group-by

很抱歉，我找不到更轻松的标题来表达我的想法。

问题是我需要按日期分组一些东西，而不是时间。也就是说我希望它们按天分组，按 created_at 字段分组时会出现问题，因为它可以达到秒精度：

```
@stuff = SomeCoolStuff.where(cool_guy_id: @guy.id).group_by(&:created_at) 
```

这给了我这种散列键：`2012-10-02 08:16:13 +0200`，但我想要的键只有`2012-10-02`.

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T09:41:54.237

所以我终于自己想通了，因为谁可能感兴趣，这就是我最终的方式：

```
@stuff = SomeCoolStuff.where(cool_guy_id: @guy.id).group_by { |stuff| stuff.created_at.to_date } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:04:06.400

您可以尝试`config/locales/en.yml`这样的格式：

```
en:
  date:
    formats:
      default: "%Y-%m-%d" 
```

# jquery - 在处理函数的 jQuery 代码中获取行

> ID：13231634
> 
> 赞同：1
> 
> 时间：2012-11-05T11:56:11.033
> 
> 标签：jquery, function, error-handling

我正在为一个 jQuery 练习项目进行错误处理，我想知道如果发生错误，是否可以获取该行。例如：

```
function number(x) {
    if (x === 1) {
        alert("ok");
    } else {
        alert("Invalid number was given on line ...")
    }
}

number(2);​ 
```

现在我想提醒而不是 ... 发生错误的行。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:16:33.973

你可以**`window.onerror`**在你的脚本中使用，像这样

```
window.onerror = function(msg, url, line) {
       alert("Error:"+msg+'at'+url+':'+line);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:38:08.617

示例 1：

此示例显示如何捕获异常并显示有关错误的信息：

```
try {
    unknownFunction ();
}
catch(e) {
document.write ("The error message: <b>" + e.message + "</b>");
if ('number' in e) {
    document.write ("<br />");
    document.write ("The error code: <b>" + e.number + "</b>");
}
if ('lineNumber' in e) {
    document.write ("<br />");
    document.write ("The error occurred at line: <b>" + e.lineNumber + "</b>");
}
} 
```

示例 2：

此示例显示如何创建和捕获自定义异常：

```
try {
    var err = new Error ();
    err.message = "My first error message";
     if (err.fileName === undefined) { // IE, Opera, Google Chrome and Safari
    err.fileName = document.location.href;
    }
    throw err;
}
catch(e) {
document.write ("The error message: <b>" + e.message + "</b><br />");
document.write ("The error occurred in the following file: <b>" + e.fileName + "</b>"); 
```

# asp.net-web-api - NServicebus 和 ASP.NET Web API - MSMQ 事务问题？

> ID：13231638
> 
> 赞同：1
> 
> 时间：2012-11-05T11:56:27.640
> 
> 标签：asp.net-web-api, msmq, nservicebus3

我有一个 ASP.NET Web API，它在 HTTP PUT 方法中接受 DTO，执行一些验证，然后执行 Bus.Send()sa 命令。

目前，所有消息都在配置的 MSMQ 错误队列中结束。

这是一些伪代码作为我正在使用的模型的概述......

```
public HttpResponseMessage Put([FromBody]EntityModel entity)
    {
        if (ModelState.IsValid)
        {
           _bus.Send(new command());
           return Request.CreateResponse(HttpStatusCode.Accepted);
        }
        else
        {
            var msg = new HttpResponseMessage(HttpStatusCode.NotModified) { ReasonPhrase = "Error text here" };
            return msg;
        }
    } 
```

经过调查，我在 Web API 操作方法的最后一个大括号/大括号上设置了一个断点，并查看了计算机管理中的 MSMQ，可以看到消息已进入正确的队列并且看起来格式正确。

当我越过最后一个括号时，消息立即移入错误队列。断点后似乎没有其他代码运行（自定义过滤器/属性等）

我推测这与队列事务有关，并且某些原因导致该事务中止，但我无法弄清楚它是什么..

任何帮助都会很棒，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:19:01.203

听起来消息处理程序代码中存在故障。如果消息处理失败，那么它将从输入队列中删除（您可以在其中看到它已传递）并移至错误队列。

你能确认处理没有失败吗？

# ibm-midrange - OPNQRYF 中的 QRYSLT 选项在程序中定义后如何在执行期间为空？

> ID：13231641
> 
> 赞同：1
> 
> 时间：2012-11-05T11:56:34.537
> 
> 标签：ibm-midrange, control-language

我正在尝试在 CL 程序中使用 OPNQRYF 从给定文件中选择一些记录。查询选择字符串在 OPNQRYF 语句中定义。但在执行过程中，由于 QRYSLT 为空，抛出了 CPF9899 消息。我已经重新编译了几次程序，问题仍然存在。然后我尝试先在字符变量中定义查询选择，然后将其分配给 QRYSLT。这次它奏效了。这怎么发生的？我在同一个程序中定义了 QRYSLT 的其他一些 OPNQRYF 语句，它们运行良好。还有其他可能干扰 OPNQRYF 的东西吗？

这个不起作用：

```
OPNQRYF FILE(&SLIB/CKFESCP) QRYSLT('DWSYST *EQ "' *CAT &KVAL *TCAT '"') 
```

而这个确实：

```
DCL VAR(&QRYSLT) TYPE(*CHAR) LEN(200)
.
.
.
CHGVAR VAR(&QRYSLT) VALUE('DWSYST *EQ "' *CAT &KVAL *TCAT '"')
OPNQRYF FILE(&SLIB/CKFESCP) QRYSLT(&QRYSLT) 
```

# node.js - Node.js 中 PayPal 自适应支付的问题

> ID：13231642
> 
> 赞同：5
> 
> 时间：2012-11-05T11:56:36.633
> 
> 标签：node.js, paypal, paypal-adaptive-payments

我一生都无法弄清楚发生了什么。我只是想对 PayPal 的 Adaptive Payments API 进行基本调用，`Pay`特别是调用。我正在尝试使用 node.js 来实现这一点。我可以使用 成功调用`curl`，但节点只是拒绝工作。我不断收到`'Invalid request: {0}'`错误消息 errorId `580001`。我找了很长时间的解决方案，虽然很多人都遇到过类似的问题，但他们的问题与我的不同，所以他们的解决方案没有奏效。

**非常感谢**您提供的任何帮助。

这是我不断得到的回应（美化）：

```
{ responseEnvelope: 
   { timestamp: '2012-11-05T03:50:08.216-08:00',
     ack: 'Failure',
     correlationId: 'b1dbb6fea8378',
     build: '4110101' },
  error: 
   [ { errorId: '580001',
       domain: 'PLATFORM',
       subdomain: 'Application',
       severity: 'Error',
       category: 'Application',
       message: 'Invalid request: {0}' } ] } 
```

这是我的节点代码：（注意：我正在使用`request`模块：[https](https://github.com/mikeal/request) ://github.com/mikeal/request ）

```
request = require 'request'

body = JSON.stringify

  actionType: "PAY"
  senderEmail: "happy_1349101075_biz@onehappystudent.com"
  receiverList:
    receiver: [
      email: "luke_1346604373_biz@onehappystudent.com"
      amount: "1.00"
    ]
  currencyCode: "USD"
  feesPayer: "EACHRECEIVER"
  memo: "This is a test"
  cancelUrl: "http://cancelurl"
  returnUrl: "http://returnUrl"
  ipnNotificationUrl: "http://your_ipn_notification_url"
  requestEnvelope:
    errorLanguage: "en_US"

console.log body

console.log request

  url: 'https://svcs.sandbox.paypal.com/AdaptivePayments/Pay'

  headers:
    "X-PAYPAL-SECURITY-USERID": "happy_1349101075_biz_api1.onehappystudent.com"
    "X-PAYPAL-SECURITY-PASSWORD": "1349101103"
    "X-PAYPAL-SECURITY-SIGNATURE": "AFcWxV21C7fd0v3bYYYRCpSSRl31Avw12OuF33eJo9IbQpXMS6wrOp1."

    "X-PAYPAL-REQUEST-DATA-FORMAT": "JSON"
    "X-PAYPAL-RESPONSE-DATA-FORMAT": "JSON"

    "X-PAYPAL-APPLICATION-ID": "APP-80W284485P519543T"

    "Content-Type": "application/json"

  body: body

, (err, res, bod) ->

  console.log bod 
```

这是运行上述代码的输出：

```
{"actionType":"PAY","senderEmail":"happy_1349101075_biz@onehappystudent.com","receiverList":{"receiver":[{"email":"luke_1346604373_biz@onehappystudent.com","amount":"1.00"}]},"currencyCode":"USD","feesPayer":"EACHRECEIVER","memo":"This is a test","cancelUrl":"http://cancelurl","returnUrl":"http://returnUrl","ipnNotificationUrl":"http://your_ipn_notification_url","requestEnvelope":{"errorLanguage":"en_US"}}
{ readable: true,
  writable: true,
  headers: 
   { 'X-PAYPAL-SECURITY-USERID': 'happy_1349101075_biz_api1.onehappystudent.com',
     'X-PAYPAL-SECURITY-PASSWORD': '1349101103',
     'X-PAYPAL-SECURITY-SIGNATURE': 'AFcWxV21C7fd0v3bYYYRCpSSRl31Avw12OuF33eJo9IbQpXMS6wrOp1.',
     'X-PAYPAL-REQUEST-DATA-FORMAT': 'JSON',
     'X-PAYPAL-RESPONSE-DATA-FORMAT': 'JSON',
     'X-PAYPAL-APPLICATION-ID': 'APP-80W284485P519543T',
     'Content-Type': 'application/json',
     host: 'svcs.sandbox.paypal.com',
     'content-length': 409 },
  body: <Buffer 7b 22 61 63 74 69 6f 6e 54 79 70 65 22 3a 22 50 41 59 22 2c 22 73 65 6e 64 65 72 45 6d 61 69 6c 22 3a 22 68 61 70 70 79 5f 31 33 34 39 31 30 31 30 37 35 ...>,
  callback: [Function],
  pool: {},
  dests: [],
  __isRequestRequest: true,
  _callback: [Function],
  _events: 
   { error: [Function],
     complete: [Function],
     pipe: { [Function: g] listener: [Function] } },
  uri: 
   { protocol: 'https:',
     slashes: true,
     host: 'svcs.sandbox.paypal.com',
     hostname: 'svcs.sandbox.paypal.com',
     href: 'https://svcs.sandbox.paypal.com/AdaptivePayments/Pay',
     pathname: '/AdaptivePayments/Pay',
     path: '/AdaptivePayments/Pay',
     port: 443 },
  _redirectsFollowed: 0,
  maxRedirects: 10,
  followRedirect: true,
  followAllRedirects: false,
  redirects: [],
  setHost: true,
  originalCookieHeader: undefined,
  _jar: undefined,
  port: 443,
  host: 'svcs.sandbox.paypal.com',
  clientErrorHandler: [Function],
  _parserErrorHandler: [Function],
  path: '/AdaptivePayments/Pay',
  httpModule: 
   { Server: { [Function: Server] super_: [Object] },
     createServer: [Function],
     globalAgent: 
      { options: {},
        requests: {},
        sockets: {},
        maxSockets: 5,
        _events: [Object],
        createConnection: [Function: createConnection] },
     Agent: { [Function: Agent] super_: [Object] },
     request: [Function],
     get: [Function] },
  agentClass: 
   { [Function: Agent]
     super_: { [Function: Agent] super_: [Function: EventEmitter], defaultMaxSockets: 5 } },
  agent: 
   { options: {},
     requests: {},
     sockets: {},
     maxSockets: 5,
     _events: { free: [Function] },
     createConnection: [Function: createConnection] } }
{"responseEnvelope":{"timestamp":"2012-11-05T03:50:08.216-08:00","ack":"Failure","correlationId":"b1dbb6fea8378","build":"4110101"},"error":[{"errorId":"580001","domain":"PLATFORM","subdomain":"Application","severity":"Error","category":"Application","message":"Invalid request: {0}"}]} 
```

这是成功的`curl`：

```
curl -s --insecure \
-H "X-PAYPAL-SECURITY-USERID: happy_1349101075_biz_api1.onehappystudent.com" \
-H "X-PAYPAL-SECURITY-PASSWORD: 1349101103" \
-H "X-PAYPAL-SECURITY-SIGNATURE: AFcWxV21C7fd0v3bYYYRCpSSRl31Avw12OuF33eJo9IbQpXMS6wrOp1." \
-H "X-PAYPAL-REQUEST-DATA-FORMAT: JSON" \
-H "X-PAYPAL-RESPONSE-DATA-FORMAT: JSON" \
-H "X-PAYPAL-APPLICATION-ID: APP-80W284485P519543T" \
-H "host: svcs.sandbox.paypal.com" \
https://svcs.sandbox.paypal.com/AdaptivePayments/Pay -d '{
  "actionType":"PAY",
  "senderEmail":"happy_1349101075_biz@onehappystudent.com",
  "receiverList":{
    "receiver":[{
      "email":"luke_1346604373_biz@onehappystudent.com",
      "amount":"1.00"
    }]
  },
  "currencyCode":"USD",
  "feesPayer":"EACHRECEIVER",
  "memo":"This is a test",
  "cancelUrl":"http://cancelurl",
  "returnUrl":"http://returnUrl",
  "ipnNotificationUrl":"http://your_ipn_notification_url",
  "requestEnvelope":{
    "errorLanguage":"en_US"
  }
}' 
```

这是回应：（为您的方便而美化）

```
{ responseEnvelope: 
   { timestamp: '2012-11-05T03:40:10.613-08:00',
     ack: 'Success',
     correlationId: 'abaf5b13c5515',
     build: '4110101' },
  payKey: 'AP-4B1870921M506553S',
  paymentExecStatus: 'COMPLETED' } 
```

**同样，非常感谢**您提供的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T06:29:01.397

不确定您是否粘贴了正确的代码，但此代码对我有用 - 看看您是否能找到不同之处：

```
var request = require('request');
body = JSON.stringify(
  {actionType: "PAY",
  senderEmail: "happy_1349101075_biz@onehappystudent.com",
  receiverList: { receiver:
    [{
      email: "luke_1346604373_biz@onehappystudent.com",
      amount: "1.00"
    }]},
  currencyCode: "USD",
  feesPayer: "EACHRECEIVER",
  memo: "This is a test",
  cancelUrl: "http://cancelurl",
  returnUrl: "http://returnUrl",
  ipnNotificationUrl: "http://your_ipn_notification_url",
  requestEnvelope: {
    errorLanguage: "en_US" }
  })

console.log(body)

request.post({
        headers: {"X-PAYPAL-SECURITY-USERID": "happy_1349101075_biz_api1.onehappystudent.com", "X-PAYPAL-SECURITY-PASSWORD": "1349101103", "X-PAYPAL-SECURITY-SIGNATURE": "AFcWxV21C7fd0v3bYYYRCpSSRl31Avw12OuF33eJo9IbQpXMS6wrOp1.", "X-PAYPAL-REQUEST-DATA-FORMAT": "JSON", "X-PAYPAL-RESPONSE-DATA-FORMAT": "JSON", "X-PAYPAL-APPLICATION-ID": "APP-80W284485P519543T", "Content-Type": "application/json"},
        url: 'https://svcs.sandbox.paypal.com/AdaptivePayments/Pay',
         body: body
         }, function(error, response, body){
            console.log(body);
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T06:46:05.487

哦，上帝，我觉得自己很愚蠢……我漏掉了一行……

```
method: 'POST' 
```

经验教训 - 累了就不要编码

（除非你有大量的咖啡）

# objective-c - UIViewAnimationOptionAllowUserInteraction 不起作用

> ID：13231643
> 
> 赞同：0
> 
> 时间：2012-11-05T11:56:43.907
> 
> 标签：objective-c, ios, animation

问题是这样的：我的类`NKIngredient`是`UIImageView`. 我已经实现了其中的`touchesBegan/Moved/Ended`方法并设置了`userInteractionEnabled`on `YES`。但主要问题是，当我`NKIngredient`在视图控制器中为我的实例设置动画时，我需要在动画期间可以触摸对象。这是不可能的！的接口`NKIngredient`：

```
@protocol NKIngredientDelegate <NSObject>

- (void)ingredientTouched;

@end

@interface NKIngredient : UIImageView {
    CGPoint touchStart;

}

@property (weak, nonatomic) id <NKIngredientDelegate> delegate;

- (void)animate:(void (^)(void))animationBlock;

@end 
```

实施文件：

```
@implementation NKIngredient

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        [self setUserInteractionEnabled:YES];
    }
    return self;
}

//Viene chiamato questo metodo se l'oggetto è disegnato come nib
- (id)initWithCoder:(NSCoder *)aDecoder {
    NSLog(@"NKIngredient initWithCoder");
    if (self = [super initWithCoder:aDecoder]) {
        [self setUserInteractionEnabled:YES];
    }
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

- (BOOL)becomeFirstResponder {
    return YES;
}

- (void)animate:(void (^)(void))animationBlock {
    [UIView animateWithDuration:8.0 delay:0.0 options:UIViewAnimationOptionAllowAnimatedContent & UIViewAnimationOptionAllowUserInteraction animations:animationBlock completion:^ (BOOL finished) {
        NSLog(@"Completed");
    }];
}

#pragma mark - Touch interaction

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    //NSLog(@"Touches began");
    [_delegate ingredientTouched];
    touchStart = [[touches anyObject] locationInView:self];
    NSLog(@"Touched");
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"Touches moved");
    CGPoint point = [[touches anyObject] locationInView:self];
    self.center = CGPointMake(self.center.x + point.x - touchStart.x, self.center.y + point.y - touchStart.y);
}

@end 
```

这就是我在视图控制器中所做的：

```
ingredient = [[NKIngredient alloc] initWithFrame:CGRectMake(20, -50, 34, 45)];
    [ingredient setImage:[UIImage imageNamed:@"liv1_Burro.png"]];
    [ingredient setUserInteractionEnabled:YES];
    [[self view] addSubview:ingredient];

    [ingredient animate:^ (void) {
        [ingredient setFrame:CGRectMake(20, 200, 34, 45)];
    }]; 
```

即使对象正在动画，一些解决方案也能获得触摸？因为当它`NKIngredient`是静止的时，这些`touchesBegan/Moved/Ended`方法有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:11:57.083

您必须将标志按位或在一起，而不是 AND...

```
UIViewAnimationOptionAllowAnimatedContent & UIViewAnimationOptionAllowUserInteraction 
```

应该

```
UIViewAnimationOptionAllowAnimatedContent | UIViewAnimationOptionAllowUserInteraction 
```

否则他们会互相抵消。另外我注意到动画触摸只在动画完成的地方注册......

# python - 如何为经过训练和测试的 PyBrain 网络提供输入以及如何获得结果

> ID：13231644
> 
> 赞同：8
> 
> 时间：2012-11-05T11:56:43.210
> 
> 标签：python, neural-network, pybrain

我正在预测一个值，我有 2 个输入层和一个输出层。这是我的代码，我在其中训练了一个 PyBrain 网络，然后对其进行了测试，我错过了如何向网络提供一组输入以及如何获得结果。请帮助我继续前进。

```
 ds = SupervisedDataSet(2,1)
 tf = open('data.csv','r')
 for line in tf.readlines():
 data = [float(x) for x in line.strip().split(',') if x != '']
 indata =  tuple(data[:2])
 outdata = tuple(data[2:])
 ds.addSample(indata,outdata)

 n = buildNetwork(ds.indim,8,8,ds.outdim,recurrent=True)
 t = BackpropTrainer(n,learningrate=0.01,momentum=0.5,verbose=True)
 t.trainOnDataset(ds,1000)
 t.testOnData(verbose=True) 
```

接下来我应该做什么来提供输入并预测输入，如何获得该组输入的结果。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:21:45.097

通过调用提供输入的网络的[.activate()](http://pybrain.org/docs/api/structure/networks.html#pybrain.structure.networks.Network.activate)方法。在数据集上还有一个更实用的激活。

还有一点提示，你可以使用 python 的原生[csv](http://docs.python.org/2.7/library/csv.html#module-csv)模块

# c# - 非 UI 线程上的 Kinect 人脸跟踪

> ID：13231646
> 
> 赞同：1
> 
> 时间：2012-11-05T11:56:57.467
> 
> 标签：c#, wpf, kinect

在主 UI 线程上使用所有流（颜色、深度、骨架）时，我能够跟踪面部。但是，当我希望在单独的线程上进行所有 kinect 处理时，我会执行以下操作：

```
kinectThread = new Thread(getKinectSensorData);

public void getKinectSensorData()
    {
            sensor.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(sensor_AllFramesReady); 
    } 
```

我的程序在以下行崩溃，错误如下所示：

```
faceFrame = newfacetracker.Track(sensor.ColorStream.Format, colorPixelData,
                                       sensor.DepthStream.Format, depthPixelData, currentSkeleton); 
```

错误：

> Microsoft.Kinect.Toolkit.FaceTracking.dll 中出现“System.InvalidCastException”类型的未处理异常
> 
> 附加信息：无法将“System.__ComObject”类型的 COM 对象转换为接口类型“Microsoft.Kinect.Toolkit.FaceTracking.IFTImage”。此操作失败，因为 IID 为“{1A00A7BC-C217-11E0-AC90-0024811441FD}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

颜色流、深度流和骨架流都可以正常工作，但是程序永远无法通过 newfacetracker.Track 代码行。是否无法在非 UI 线程上运行人脸跟踪？请给我提意见。

谢谢

# ruby - 如何检查对象是否在本月内创建

> ID：13231647
> 
> 赞同：0
> 
> 时间：2012-11-05T11:56:57.497
> 
> 标签：ruby, datetime

我有一个任务是找出这个月内是否创建了一个对象。我尝试了很多来解决这个问题。我使用了`1.month`,`since(-1)`等。但我仍然没有走上正确的轨道来继续这些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:12:56.490

我认为没有内置的方法来告诉对象的创建时间。您必须明确记录创建时间。

```
class TheClassYouWantToMakeObjects
  def initialize
    @creation_time = Time.now
    ...
  end
  def created_within_same_month?
    t = Time.now
    t.year == @creation_time.year and t.month == @creation_time.month
  end
end 
```

然后，只要您有`object`的实例`TheClassYouWantToMakeObjects`，您就可以检查：

```
object.created_within_same_month? 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T12:00:08.417

编辑：当您提出请求时，您将创建日期与`1.month.since(-1)`正确的比较？如果是这样，请改用`Time.now.beginning_of_month`. 时间是一个红宝石类[http://www.ruby-doc.org/core-1.9.3/Time.html](http://www.ruby-doc.org/core-1.9.3/Time.html)

你能写下你的要求吗？

重新编辑：如果它有效，那就太好了。我的第一个解释不是那么明确，谢谢@Andrew。

# java - 应仅包含字母数字和“-”的字符串匹配的 Java 正则表达式

> ID：13231650
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:57:08.177
> 
> 标签：java, regex

我需要在java中添加正则表达式来测试字符串是否只包含字母数字（带或不带“-”）。前任：

```
ADB123
ABC-D1
12ABCD
A-BCD1 
```

等等

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T12:02:31.080

你可以试试

```
for (String s : "ADB123,ABC-D1,12ABCD,A-BCD1,abcd12,a.b.c,12£".split(",")) {
    boolean ok = s.matches("[-\\p{Alnum}]+");
    System.out.println(s + " is ok: " + ok);
} 
```

印刷

```
ADB123 is ok: true
ABC-D1 is ok: true
12ABCD is ok: true
A-BCD1 is ok: true
abcd12 is ok: true
a.b.c is ok: false
12£ is ok: false 
```

正则表达式的`[-\\p{Alnum}]+`意思

*   `[ ]+`指一个或多个任何字符。
*   `-`一开始就意味着`-`不是，也不是别的东西。
*   `\\`在字符串文字中变成就像`\`它是一个转义字符一样。
*   `\p{Alnum}`是一个预定义的字母和数字字符列表。

有关更多详细信息，请参阅[Pattern的文档。](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:58:21.297

试试这个正则表达式：

```
/^[A-Z0-9-]*$/ 
```

你可以像这样运行它：

```
str.matches("[A-Z0-9-]*"); // Returns a Boolean 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T11:59:27.630

您正在寻找的正则表达式是：

```
"^[A-Z0-9-]+$" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T12:00:09.410

你应该试试这个

```
"^[0-9a-zA-Z-]+$" 
```

# android - 它在调试模式下工作，如果它正常运行则不起作用 - Android

> ID：13231652
> 
> 赞同：0
> 
> 时间：2012-11-05T11:57:08.957
> 
> 标签：android, android-listview, android-adapter

我的班级中有一个列表视图和适配器，我正在从另一个活动向 db 插入一些值。然后我想将这些值检索到标签页中的列表中。

当我正常运行时，我遇到了异常，我检查了我的代码并且找不到任何错误。

但是，当我在调试模式下运行时，它可以完美运行。

这里有什么问题？

我的示例代码如下

```
db = new DatabaseHandlerOn(getApplicationContext());
m_results = new ArrayList<On>();
this.m_adapter = new PlayedOn(this, R.layout.playedrowon, m_results);
this.setListAdapter(this.m_adapter);

sendNumbers2 = new Runnable() {
    @Override
    public void run() {
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss");
        Date date = new Date();
            /*for(int i=15;i<55;i++)
            {
            db.addContact(new OnNumara(i+"","555",dateFormat.format(date),"1","2","2","2","2","2","2","2","2","2","2","2",
                    "2","2","2","2","2","2","2","2","2","2","55555555","0","0"));
            }*/
        playedOn = db.getAllContacts();

        for (On on : played) {
            m_results.add(on);
        }
        handler.sendEmptyMessage(0);
    }
};
Thread thread = new Thread(sendNumbers2, "sendNumbers2");
thread.start();

m_ProgressDialog = ProgressDialog.show(PlayedOnActivity.this,
        "", getString(R.string.PleaseWait), true);
m_ProgressDialog.setCancelable(true);

handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        m_ProgressDialog.dismiss();
        m_adapter.notifyDataSetChanged();
    }
}; 
```

日志：

```
11-05 14:10:03.839: E/AndroidRuntime(15958): java.lang.NullPointerException 
```

不明白有没有空指针异常，debug模式下也应该给出。

# c# - SocketAsyncEventArgs 以及对 Socket 的混合异步和同步调用

> ID：13231653
> 
> 赞同：1
> 
> 时间：2012-11-05T11:57:11.543
> 
> 标签：c#, sockets, asynchronous, socketasynceventargs

是否可以在 saea.AcceptSocket.ReceiveAsync 完成后调用 saea.AcceptSocket.Send？(saea == SocketAsyncEventArgs)

调用 saea.AcceptSocket.Send 后再次调用 saea.AcceptSocket.ReceiveAsync 可以吗？

实际上，我希望我的接收是异步的，而我的发送（与接收相比是 1/10000）是同步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:59:56.420

是的，您可以混合同步和异步访问您的套接字。我认为您甚至应该能够在接收数据（或等待数据到达）时发送数据。

# android - 安卓应用启动状态

> ID：13231657
> 
> 赞同：3
> 
> 时间：2012-11-05T11:57:41.080
> 
> 标签：android, launch

我们正在从我们的 android 应用程序启动其他应用程序。我们使用以下代码调用该应用程序。

```
final PackageManager pm = mContext.getPackageManager();
Intent LaunchIntent = pm
        .getLaunchIntentForPackage(PACKAGE_NAME);
mContext.startActivity(LaunchIntent); 
```

我的问题是我们如何获得已启动应用程序的状态，无论它是否崩溃。

# javascript - 验证总是返回 false，即使它是正确的。为什么？

> ID：13231658
> 
> 赞同：0
> 
> 时间：2012-11-05T11:57:48.957
> 
> 标签：javascript, jquery

我正在验证表格。它正确验证了所有字段，但是当我在文本字段中输入正确的数据时，它仍然不处理数据并返回`everything wrong`，而我希望它返回`everything correct`

这是我的js代码

```
var url, container, form,
    View = {
        init: function () {
            container     = $('.container');
            $(document).on('submit', '#form', View.findView);
        },

        loadViews: function (view, flag, e) {
            e.preventDefault();
            var search = $('.search');

            if( flag ) {
                if ( View.validation.emptyFieldsValidation() == true ) {
                    console.log('everything correct');
                } else {
                    console.log('everything incorrect');
                }
            }
            return false;
        },

        validation: {
            emptyFieldsValidation: function () {
                var inputs, field;

                $('#form input').each(function (i, el) {
                    inputs = $(this);
                    if ( inputs.val() == '' ) {
                        inputs.css('border', '1px solid red');
                        return false;
                    } else {
                        inputs.css('border', '1px solid #ccc');
                        if (inputs.hasClass('from')) {
                            console.log('from');
                            if (View.validation.validateAddress(inputs.val())) {
                                console.log('from correct address');
                                return true;
                            }
                            else {
                                inputs.css('border', '1px solid red');
                                console.log('from incorrect address');
                                //return false;
                            }
                        }
                        if (inputs.hasClass('to')) {
                            console.log('to');
                            if (View.validation.validateAddress(inputs.val())) {
                                console.log('to correct address');
                                //return true;
                            }
                            else {
                                inputs.css('border', '1px solid red');
                                console.log('to incorrect address');
                                //return false;
                            }
                        }
                        if (inputs.hasClass('time')) {
                            if (View.validation.validateForNumber(inputs.val())) {
                                console.log('time correct');
                                //return true;
                            }
                            else {
                                inputs.css('border', '1px solid red');
                                console.log('time incorrect');
                                //return false;
                            }
                        }
                    }
                });
                return false;
            },

            validateAddress: function (val) {
                var streetregex = /^[\w+\s]+\d+,\s*[\s\w]+$/;
                if (streetregex.test(val)) return true;
                else return false;
            },

            validateForNumber: function (val) {
                if (!isNaN(val)) return true;
                else return false;
            }
        }
    };

View.init(); 
```

​这是我的html代码

```
<section class="search">
<form id="form" action="">
    <section>
        <input type="text" name="from" class="from address" id="addressone" placeholder="From">
    </section>
    <section>
        <input type="text" name="to" class="to address" id="addresstwo" placeholder="To">
    </section>
    <section>
        <label>Time</label>
        <input type="text" name="hrs" placeholder="Hours" class="t1 time">
        <span>:</span>
        <input type="text" name="mins" placeholder="Mins" class="t1 time">
        <button class="button">Search</button>
    </section>
</form>
</section> 
```

**更新**

我在控制台中得到这个输出

![截屏](../Images/3ab5bf1729ae2b307bc14339f17380cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:07:08.457

您似乎错过了您的`emptyFieldsValidation`函数将 always的事实`return false`，因为其主体中的所有其他`return`语句实际上都是“迭代器”函数的一部分。说到后者，注意`return false`在`$.each`回调中会停止迭代。

一种可能的解决方法是将迭代器函数中的所有这些`return false`语句替换为填充验证错误数组。然后（`$.each`在行之后）你可以检查它的长度（或者只是做`return !!errors.length`）。例如：

```
emptyFieldsValidation: function () {
  var errors = [];
  ...
  $('#form input').each(function() {
    if (! someValidationCheck) { 
      errors.push(someValidationAttribute);  
    }
  });
  ...
  return !!errors.length; 
```

# ios - 从另一个应用程序打开 iOS 应用程序

> ID：13231662
> 
> 赞同：2
> 
> 时间：2012-11-05T11:57:58.310
> 
> 标签：ios, launching-application, openurl

我正在尝试`MyApp`从另一个应用程序打开我的应用程序，我已经为`MyApp`(ie `myapp://`) 定义了自定义 url。

如果我`myapp://`在 safari 中编写并单击 go，它将打开`MyApp`。现在我想要的是一个只有`UIButton` **“Launch MyApp”**的简单应用程序，当我点击它时它`MyApp`就会启动。

我这样做了：

```
-(IBAction)launchMyApp:(id)sender
{
    NSString *mystr=[[NSString alloc] initWithFormat:@"myapp://"];
    NSURL *myurl=[[NSURL alloc] initWithString:mystr];
    [[UIApplication sharedApplication] openURL:myurl];
} 
```

但什么也没发生。如果可以实现此功能，请提供代码。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T05:20:34.250

**解决了问题**

我不知道如何，但它与我在问题中编写的相同代码一起工作：

```
-(IBAction)launchMyApp:(id)sender
{
    NSString *mystr=[[NSString alloc] initWithFormat:@"myapp://"];
    NSURL *myurl=[[NSURL alloc] initWithString:mystr];
    [[UIApplication sharedApplication] openURL:myurl];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:19:56.443

如果它适用于 Safari，它可能适用于`UIWebView`. 尝试在 a 中显示您在 Safari 中使用的页面`UIWebView`，看看它是否有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:15:29.350

使用一些实际的 URI，而不仅仅是方案，然后什么都没有，例如`myapp://launch`.

# objective-c - 关闭商店视图后应用内购买崩溃

> ID：13231671
> 
> 赞同：0
> 
> 时间：2012-11-05T11:58:39.963
> 
> 标签：objective-c, ios, in-app-purchase, storekit

我注意到，如果您在我的应用程序中输入我的商店视图（向苹果询问产品），然后在从苹果加载所有产品之前关闭商店视图，它就会崩溃。

```
2012-11-05 12:32:08.420 Bellman[71368:c07] Dealloc inAppManager
2012-11-05 12:32:13.788 Bellman[71368:c07] *** -[InAppPurchaseManager respondsToSelector:]: message sent to deallocated instance 0x8e85a50 
```

正如您在我的代码中看到的那样，我在调用`removeTransactionObserver:`dealloc 时调用。正如您在上面的日志中看到的那样，在应用程序崩溃前 5 秒调用了 dealloc。`productsRequest: didReceiveResponse:`据我了解，即使我已将自己作为观察者移除，默认队列仍在尝试调用？

```
- (void)requestProUpgradeProductData:(NSSet*)productIdentifiers
{
    self.productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
    self.productsRequest.delegate = self;
    [self.productsRequest start];

}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSArray *products = response.products;
    NSLog(@"%@",products);

    for (NSString *invalidProductId in response.invalidProductIdentifiers)
    {
        NSLog(@"Invalid product id: %@" , invalidProductId);
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerProductsFetchedNotification object:self userInfo:nil];
    [[self delegate] didLoadStore:response.products];
}

- (void)loadStore:(NSSet*)productIdentifiers
{
    // restarts any purchases if they were interrupted last time the app was open
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];

    // get the product description (defined in early sections)
    [self requestProUpgradeProductData:productIdentifiers];
    NSLog(@"Unfinished Transactions: [%i]", [[SKPaymentQueue defaultQueue].transactions count]);
}

- (BOOL)canMakePurchases
{
    return [SKPaymentQueue canMakePayments];
}

- (void)purchase:(SKProduct*)product {
    SKPayment *payment = [SKPayment paymentWithProduct:product];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
}

- (void)recordTransaction:(SKPaymentTransaction *)transaction
{
    NSLog(@"Subscription bought");
}

- (void)provideContent:(SKPaymentTransaction *)transaction
{
    NSLog(@"Asking user to register Database");
    [[self delegate] provideContent:transaction];
}

- (void)finishTransaction:(SKPaymentTransaction *)transaction wasSuccessful:(BOOL)wasSuccessful
{
    // remove the transaction from the payment queue.
    [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
    NSLog(@"Removeing recipt");
    NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:transaction, @"transaction" , nil];
    if (wasSuccessful)
    {
        [[self delegate] didMakePurchase:transaction.payment.productIdentifier];
        // send out a notification that we’ve finished the transaction
        [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerTransactionSucceededNotification object:self userInfo:userInfo];
    }
    else
    {
        // send out a notification for the failed transaction
        [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerTransactionFailedNotification object:self userInfo:userInfo];
    }
}

- (void)completeTransaction:(SKPaymentTransaction *)transaction
{
    [self recordTransaction:transaction];
    [self provideContent:transaction];
}

- (void)restoreTransaction:(SKPaymentTransaction *)transaction
{

}

- (void)completePurches:(SKPaymentTransaction *)transaction {
    NSLog(@"EVERYTHING IS DONE!");
    [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"unfinishedReceipt"];
    [self finishTransaction:transaction wasSuccessful:YES];
}

- (void) failedTransaction: (SKPaymentTransaction *)transaction {
    if (transaction.error.code != SKErrorPaymentCancelled)
    {
        [[self delegate] didReciveAppStoreError:transaction.error.localizedDescription];
        // Optionally, display an error here.
    }
    [[self delegate] didCancelPurches];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
}

- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                NSLog(@"Completed transcation");
                [self completeTransaction:transaction];

                break;
            case SKPaymentTransactionStateFailed:
                NSLog(@"Failed transcation: %@",transaction.error);
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                NSLog(@"Restore transcation: %@",transaction.payment.productIdentifier);
                [self restoreTransaction:transaction];
                break;
            case SKPaymentTransactionStatePurchasing:
                NSLog(@"ID: %@",transaction.transactionIdentifier);
                break;
            default:
                break;
        }
    }
}

-(void)didVerifyNewRecipt:(SKPaymentTransaction *)recipt wasNewRecipit:(BOOL)status {
    if (status) {
        NSLog(@"Was new recipt showing interface");
        [self completeTransaction:recipt];
    } else {
        NSLog(@"Was old Receipt");
        [self completePurches:recipt];
        [[self delegate] didFindOldReceipt];
    }
}

-(void)didReciveError:(NSString *)error {
    NSLog(@"ERROR! %@",error);
}

-(void)dealloc {
    [[SKPaymentQueue defaultQueue] removeTransactionObserver:self];
    NSLog(@"Dealloc inAppManager");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:58:39.963

当我正要点击“提问”时，它就想通了。由于我在互联网上没有找到答案，我将分享我的解决方案。

由于`SKProductsRequest`不是 SKPaymentQueue 的一部分并`SKProductsRequest`实现自己的委托，您需要删除您在 SKProductsRequest 上设置的委托。

```
-(void)dealloc {
   [[SKPaymentQueue defaultQueue] removeTransactionObserver:self];
   self.productsRequest.delegate = nil; // <----- Solution
   NSLog(@"Dealloc inAppManager");
} 
```

# security - 在 Silverlight 中保护应用程序

> ID：13231673
> 
> 赞同：0
> 
> 时间：2012-11-05T11:58:43.317
> 
> 标签：security, silverlight-5.0

我在 silverlight 5 中有这个应用程序。实际上问题在于它的安全性。我使用了 HTTPS，但我在应用程序中触发的查询仍然可以被 FIDDLER 解密，并可用于从数据库中获取所有数据。请提出一些建议来防止这种情况。或者至少是任何开始的链接。我已经实现了 MSDN 的一些建议，但应用程序仍然存在同样的问题。

# google-maps - 如何将 EPSG 900913 添加到 geodjango spatialite 数据库？

> ID：13231676
> 
> 赞同：2
> 
> 时间：2012-11-05T11:59:00.010
> 
> 标签：google-maps, geodjango, bitnami, spatialite, epsg

我试图在我的管理界面中包含一个谷歌地图小部件，在 Linux 系统上使用[这个片段](http://djangosnippets.org/snippets/1144/)（目前在 VMWare Player 的 Bitnami django 堆栈上本地运行）。

地图呈现，但我的数据库中的点特征（实际上是任何特征）没有显示在地图上，当尝试通过地图界面注册点时，我收到一个错误：

```
An error occurred when transforming the geometry to the SRID of the geometry form field. 
```

我从[geodjango 文档](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/#ubuntu)中意识到，在初始化 spatialite/sqlite 数据库时不包括 Google 的空间参考系统，解决方案应该是发出以下命令，以添加 SRS：

```
$ python manage shell
>>> from django.contrib.gis.utils import add_srs_entry
>>> add_srs_entry(900913) 
```

但是，当我从项目目录执行此操作时，我得到：

```
ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is this a valid
EPSG coordinate system? 
```

我已确认安装了 GDAL、GEOS 和 PROJ4，并且我已将环境变量 GDAL_DATA 和 PROJ_LIB 添加到我的 .profile 中。我检查了**/usr/local/share/gdal/gcs.csv**文件，该文件似乎没有 900913 的条目（我搜索了其他版本的 gcs.csv，但似乎没有一个包含 900913）。我认为这是导致错误的原因。但是，同一目录中的**cubewerx_extra.wkt**确实有一个 900913 的 WKT 条目。

我的问题是：如何让**add_srs_entry**找到正确的 SRS 表示以便将其添加到我的数据库中？或者是否有解决方法，例如以某种方式转换 WKT 表示并将其手动插入 gcs.csv？

我很感激任何帮助！

**编辑：** 我找到了一种将 EPSG 900913 手动插入到空间数据库中的方法。该解决方案的灵感来自 http://trac.osgeo.org/openlayers/wiki/SphericalMercator 上的 sql 语句（对不起，我没有足够的声誉来发布更多链接）并使用原始 sql 发布到数据库后端（如 https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly 的文档中所述）：

```
from django.db import connection, transaction
cursor = connection.cursor()
sql = "INSERT into spatial_ref_sys (srid, auth_name, auth_srid, ref_sys_name, proj4text) values (900913 ,'EPSG',900913,'Google Maps Global Mercator','+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs');"
cursor.execute(sql)
transaction.commit_unless_managed() 
```

我已经确认该条目现在位于 spatial_ref_sys 表中。但是尝试在管理界面中添加点时，我仍然遇到同样的错误。可以将点添加到地图中，但是在尝试保存该功能时，出现错误：

```
An error occurred when transforming the geometry to the SRID of the geometry form field. 
```

上面的sql语句正确吗？是否足够，或者 add_srs_entry 是否也做其他事情？

最后，这可能是我的应用程序中的一个编码问题，我将处理一个最小的测试示例并将其发布......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:20:39.093

好的，我找到了主要问题的答案，如编辑帖子下所示。

以供将来参考，这是一种如何将 Google 球面投影添加到空间数据库（必须已在空间上启用）的方法：

1）创建一个包含以下内容的文本文件：

> 开始;
> 
> 插入到 spatial_ref_sys (srid, auth_name, auth_srid, ref_sys_name, proj4text) 值 (900913,'EPSG',900913,'Google Maps Global Mercator','+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0 =0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs');
> 
> 犯罪;

2) 将名为**init_EPSG900913.sql**的文件保存在包含您的空间数据库的目录中。

3) 发出以下命令在数据库上执行 SQL 语句：

> spaceite some_database.sqlite < init_EPSG900913.sql

**替代方法**- 从 django-script 内部或“python manage.py shell”中：

```
from django.db import connection, transaction
cursor = connection.cursor()
sql = "INSERT into spatial_ref_sys (srid, auth_name, auth_srid, ref_sys_name, proj4text) values (900913 ,'EPSG',900913,'Google Maps Global Mercator','+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs');"
cursor.execute(sql)
transaction.commit_unless_managed() 
```

使用这两种方法中的任何一种，您的数据库都将注册 Google Maps 参考系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T23:03:40.597

事实证明，缺少 EPSG 定义只是问题的一部分。另一部分与应用程序在 bitnami ubuntu django 堆栈上运行的事实有关。

遵循 bitnami ubuntu django 堆栈上 geodjango 文档中的安装指南时，所有额外的 python 包和空间库都安装在系统文件夹 /user/local/..something.. 中，而不是安装在自包含的 bitnami 环境中。

为了将来参考，请确保在安装其他 python 包之前发出以下语句：

```
$ sudo su
$ /opt/bitnami/use_djangostack 
```

然后软件包将安装在 bitnami 环境中。

此外，在使用 ./configure 命令配置不同空间库的构建时，必须添加额外选项以将共享文件放置在 bitnami 环境中。我通常使用类似的东西：

```
$ ./configure --prefix=/opt/bitnami/common 
```

可能必须按照 geodjango 文档中的说明传递其他参数 - 但这些参数中指定的路径必须更改为指向 /opt/bitnami/... 的正确子目录

# c++ - 具有可变浮点精度的 CString.Format

> ID：13231677
> 
> 赞同：4
> 
> 时间：2012-11-05T11:59:07.320
> 
> 标签：c++, string, mfc, floating-point

我有一个浮点值： ( `data->val`)，它可能是三个可能的浮点精度：，`%.1f`我将如何格式化它以仅显示必要的小数点数？例如：`%.2f``%.3f``CString::Format`

```
CString sVal;

sVal.Format(L"%.<WHAT GOES HERE?>f", data->val);
if(stValue)
    stValue->SetWindowText(sVal); 
```

就像我不希望格式化字符串末尾有任何额外的零一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T16:13:56.427

如果您知道您想要的精度，只需使用[`%.*f`并将精度作为整数参数提供给`CString::Format`](http://msdn.microsoft.com/en-us/library/0ecbz014.aspx). 如果您想要最简单的有效表示，请尝试`%g`：

```
int precision = 2; // whatever you figure the precision to be
sVal.Format(L"%.*f", precision, data->val);
// likely better: sVal.Format(L"%g", data->val); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:06:34.633

它是前一段时间的，但也许这会工作......

```
CString getPrecisionString(int len)
{
   CString result;
   result.format( "%s%d%s","%.", len, "f" );
   return result;
}

// somewhere else
CString sVal;

sVal.Format(getPrecisionString(2), data->val);
if(stValue)
    stValue->SetWindowText(sVal); 
```

另一种方法是，在添加 %.3f 值后删除 '0'

```
sVal.trimEnd('0') 
```

但很危险，因为你可能有“。” 在末尾...

# excel - 检测 Excel 工作表上的错误

> ID：13231680
> 
> 赞同：2
> 
> 时间：2012-11-05T11:59:11.980
> 
> 标签：excel, vba

有没有一种简单的方法来枚举一个范围内的错误？

我尝试使用以下代码，但它不起作用

```
Dim err As Object

For Each err In Plan10.Range("M2:AB8000").Errors
    Debug.Print err.Value
Next err 
```

我从文档中知道，我不能简单地使用`range.errors`. 我解决了扫描范围内每个单元格中的每个错误的问题，但是速度非常慢

有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:25:04.967

您可以使用`SpecialCells`检索包含/评估错误的单元格

`VBA`如果正在搜索的范围内没有错误单元格，则错误处理会避免错误

然后，您可以根据需要处理错误范围（如果存在于`rng1`和中`rng2`）

```
Sub GetErrors()
Dim rng1 As Range
Dim rng2 As Range
On Error Resume Next
Set rng1 = Sheets(1).Range("M2:AB8000").SpecialCells(xlConstants, xlErrors)
Set rng2 = Sheets(1).Range("M2:AB8000").SpecialCells(xlFormulas, xlErrors)
On Error GoTo 0
If Not rng1 Is Nothing Then MsgBox "Constant errors at " & rng1.Address
If Not rng2 Is Nothing Then MsgBox "Formulae errors at " & rng2.Address
End Sub 
```

# python - 在python中处理多个键？

> ID：13231683
> 
> 赞同：-1
> 
> 时间：2012-11-05T11:59:20.990
> 
> 标签：python

我是 python 的新手，我有多个选项，例如 1 到 99，我想在按 f2 后选择 23 作为窗口，我按 2 和 3，然后按 enter，选择数字 23。我想在 ubuntu 10.04 中执行此操作。程序是什么？我正在写一些代码

```
def keyDown(self,e):
    if e.keystring == "f2":                
        selectedNumber = 0
    elif e.keystring == "enter":
        print selectedNumber
        selectedNumber =0
    else:
        selectedNumber +=int(e.keystring) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:04:36.507

您可以将选定的数字存储为字符串，并在按下回车键时将数字转换为 int。需要更多的输入验证，但这应该会给你这个想法。

```
def keyDown(self,e):
    if e.keystring == "f2":                
        selectedNumber = ""
    elif e.keystring == "enter":
        print int(selectedNumber) # If you are only printing you don't need int()
        selectedNumber = ""
    else:
        selectedNumber += e.keystring 
```

# oracle - Crystal Reports 2008 到 Oracle 服务器的未知数据库连接错误

> ID：13231688
> 
> 赞同：0
> 
> 时间：2012-11-05T11:59:38.103
> 
> 标签：oracle, crystal-reports, oracle10g

我在使用 Oracle 10g 客户端安装在 Windows 7 64 位上的 Crystal 报告 2008 SP3 时遇到了一些问题。每当我尝试运行报告或进行数据库验证或登录到数据库时，我都会收到非常无用的“未知数据库连接错误”错误消息。此处唯一的选择是单击“确定”。

Oracle 10g 作为运行时安装并应用了 10.2.04 补丁。Oracle 路径设置正确，Oracle 正在使用定制的 Oracle 应用程序以及 SQLPlus TNSPing 等...

有一些证据表明人们在网络上遇到了这个问题，但没有明确的解决方案。这里有人有什么好的建议吗？谢谢

sqlnet.ora 设置

```
trace_level_client = 16 
trace_file_client = cli 
trace_directory_client = c:\trace 
trace_unique_client = on 
trace_timestamp_client = on 
trace_filelen_client = 100 
trace_fileno_client = 2 
log_file_client = cli 
log_directory_client = c:\trace\log 
tnsping.trace_directory = c:\trace\trace 
tnsping.trace_level = admin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:12:31.083

我刚刚遇到了类似的错误，但使用的是 SQL Server。在我的情况下，这是因为数据库名称有一个“。” 在里面。此链接[http://itknowledgeexchange.techtarget.com/itanswers/cr-xi-period-in-database-name/](http://itknowledgeexchange.techtarget.com/itanswers/cr-xi-period-in-database-name/)表明它似乎不起作用，需要重命名数据库。

# android - Android MediaPlayer 音量大小？

> ID：13231691
> 
> 赞同：0
> 
> 时间：2012-11-05T11:59:48.977
> 
> 标签：android, media-player, volume

根据文档，`MediaPlayer setVolume(float, float)`需要给定一个对数比例的值：

> 请注意，传递的音量值是原始标量。UI 控件应该以对数方式缩放。

我想知道如何做到这一点？我应该给它一个`log(volume)`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:06:37.323

只需给出 0.0f（静音）和 1.0f（全音量）之间的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:14:43.583

对于[Android MediaPlayer.setVolume](http://developer.android.com/reference/android/media/MediaPlayer.html#setVolume%28float,%20float%29)，搜索网络似乎显示 0.0f 表示没有声音，1.0f 表示完整的声音。

# javascript - jquery自动完成隐藏在窗口模糊中，禁用它

> ID：13231697
> 
> 赞同：3
> 
> 时间：2012-11-05T12:00:11.990
> 
> 标签：javascript, jquery, autocomplete

jquery的自动完成隐藏在窗口模糊中，如何防止这种情况？

在网上找不到答案。

听起来很简单，但是使用以下代码来确定窗口焦点和模糊，对于在进入模糊之前打开的所有自动完成，我都没有显示，似乎窗口模糊是自动完成隐藏的触发器：

```
$(function() {
    $(window).focus(function() {

    });

    $(window).blur(function() {
        $(".ui-autocomplete").each(function(){alert($(this).css("display"));});
    });

}); 
```

我想为所有显示非无的自动完成设置变量，然后在焦点上显示这些，但在模糊时，我得到所有“.ui-autocomplete”的显示无

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:35:23.410

尝试像这样更改自动完成的`blur`事件处理程序：

```
$(function(){
    $('#autocomplete').autocomplete({
        source: ['cat','rabbit','donkey']
    }).off('blur').on('blur', function() {
        if(document.hasFocus()) {
            $('ul.ui-autocomplete').hide();
        }
    });
}); 
```

使用该`hasFocus()`功能，您可以检查当前窗口的焦点并确定是否关闭选项

[jsFiddle在这里](http://jsfiddle.net/pNmnW/)

# time - 如何确定 Redis 中 Lua 脚本的执行时间？

> ID：13231698
> 
> 赞同：2
> 
> 时间：2012-11-05T12:00:18.183
> 
> 标签：time, lua, redis, execution

我有一个要在 Redis 中运行的小型 Lua 脚本，我对获取执行时间很感兴趣。

由于 Redis 的性质和它的 Lua 实现，我不能在脚本的开始/返回点使用 TIME 函数，并将此信息包含在返回中以进行处理（请参阅[http://redis.io/commands/eval](http://redis.io/commands/eval) -脚本作为纯函数）。这会导致错误：`(error) ERR Error running script (call to f_a49ed2fea72f1f529843d6024d1515e76e69bcbd): Write commands not allowed after non deterministic commands`

我已经四处寻找我可以进行的函数/调用，它将返回上次运行脚本的执行时间，但还没有找到任何东西。

我正在使用 PHP 和 Predis 库。虽然我可以从 PHP 端检查执行时间，但我希望消除传输开销并找出 Lua 脚本将阻止对数据库的访问多长时间。如果我不需要更改存储在 Redis 中的任何数据，我已经成功返回了时间，这些时间大约是 PHP 报告时间的 1/10。

如何确定 Redis 中 Lua 脚本的执行时间，而不是通过 PHP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:15:56.333

您可以通过将 slowlog-log-slower-than 参数更改为 0 来激活 Redis 慢日志功能。它将记录所有命令的执行时间（包括 Lua 脚本，以及任何执行时间）。

慢日志保存在内存队列中，您必须定期转储以收集数据。根据流量，您可能需要增加 slowlog-max-len 以确保捕获您感兴趣的执行时间。

您可以使用[slowlog get 命令](http://redis.io/commands/slowlog)转储慢日志。由您过滤掉不需要的结果。AFAIK，不可能在数据收集时进行过滤（仅保留 Lua 统计信息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-18T12:04:13.510

如果在构建 Redis 时启用 os 模块，则可以在脚本中使用 os.clock()。

更改`#if 0`为[https://github.com/antirez/redis/blob/unstable/src/scripting.c](https://github.com/antirez/redis/blob/unstable/src/scripting.c)`#if 1`中的第 484 行：

```
void luaLoadLibraries(lua_State *lua) {
    luaLoadLib(lua, "", luaopen_base);
    luaLoadLib(lua, LUA_TABLIBNAME, luaopen_table);
    luaLoadLib(lua, LUA_STRLIBNAME, luaopen_string);
    luaLoadLib(lua, LUA_MATHLIBNAME, luaopen_math);
    luaLoadLib(lua, LUA_DBLIBNAME, luaopen_debug); 
    luaLoadLib(lua, "cjson", luaopen_cjson);
    luaLoadLib(lua, "struct", luaopen_struct);
    luaLoadLib(lua, "cmsgpack", luaopen_cmsgpack);

#if 0 /* Stuff that we don't load currently, for sandboxing concerns. */
    luaLoadLib(lua, LUA_LOADLIBNAME, luaopen_package);
    luaLoadLib(lua, LUA_OSLIBNAME, luaopen_os);
#endif
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T14:43:52.433

**编辑**： rld 已过时。

您可以使用 rld ( [https://github.com/RedisLabs/redis-lua-debugger](https://github.com/RedisLabs/redis-lua-debugger) ) 并将其打印到日志中 - 日志包含时间信息（尽管 rld 会自然而然地导致您的脚本运行速度变慢）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T13:29:41.053

从 Redis v3.2 开始，您可以选择通过调用新API来[复制命令而不是脚本。](http://redis.io/commands/eval#replicating-commands-instead-of-scripts)这将允许您在不触发非确定性错误的情况下`redis.replicate_commands()`调用执行写入操作的脚本。`TIME`

# javascript - 使用静态页面中的 cookie

> ID：13231699
> 
> 赞同：1
> 
> 时间：2012-11-05T08:52:22.517
> 
> 标签：javascript, cookies

有一个静态（不是 CGI，不是 PHP）HTML 页面（事实上，很多这样的页面，驻留在不同的目录中）。

我需要存储和读取该页面的 cookie（所有页面一个 cookie）。

我想，这可以使用 JavaScript 来完成，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:24:45.383

是的，您可以使用 Javascript 来处理 cookie。

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

[资源](http://ppk.developpez.com/tutoriels/javascript/gestion-cookies-javascript/#LV)

# c# - 将行更改为列

> ID：13231704
> 
> 赞同：0
> 
> 时间：2012-11-05T12:00:42.567
> 
> 标签：c#, oracle, oracle10g, pivot, dynamic-sql

我目前从我的查询中得到这个输出：-

```
Count(Total)| Type1
-----------------
 24            T1

  22           T2 
```

但我想要这样的输出： -

```
 T1   T2
----------
 24   22 
```

请注意，`Type1`列可以包含任何值，例如 T1、T2、T3，因此我无法修复查询中的值。我正在使用 Oracle 10g，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:05:38.457

Oracle 10g 没有`PIVOT`函数，因此您可以使用带有 a 的聚合`CASE`：

```
select 
  sum(case when type1 = 'T1' then total end) T1,
  sum(case when type1 = 'T2' then total end) T2
from <yourquery goes here> 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/1f9b9/5)

或者您可以将其直接实现到与此类似的查询中，使用聚合将计算与语句中的值`SUM()`匹配的每次出现：`type1``CASE`

```
select 
  sum(case when type1 = 'T1' then 1 else 0 end) T1,
  sum(case when type1 = 'T2' then 1 else 0 end) T2
from yourtable 
```

如果您有未知数量的值要转换为列，那么您将需要使用类似于以下的过程：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(1000) := 'select ';

    begin
        for x in (select distinct type1 from yourtable order by 1)
        loop
            sql_query := sql_query ||
              ' , sum(case when type1 = '''||x.type1||''' then 1 else 0 end) as '||x.type1;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from yourtable';

        open p_cursor for sql_query;
    end;
/ 
```

然后执行它：

```
variable x refcursor
exec dynamic_pivot(:x)
print x 
```

# iphone - 如何更正 xcode iOS 项目中丢失的文件

> ID：13231706
> 
> 赞同：6
> 
> 时间：2012-11-05T12:00:47.653
> 
> 标签：iphone, ios, xcode

我有一个缺少一些文件的项目。这些文件是它们自己的文件夹，与 iOS 应用程序项目文件夹处于同一级别。不知道为什么，但文件显示为“丢失”

我可以对图书馆搜索路径做些什么（见下面的截图），以便他们正确找到它们？

仅供参考：我继承了这个项目，所以它只是发送给我的。我尝试构建它并丢失所有这些文件。

谢谢你的帮助 ：）

![xcode 截图](../Images/b3a24cc0c584e19a3bbc3554568cc040.png)

![搜索路径截图](../Images/23f11cc5483dfc79eabf2d260f589e45.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T12:08:50.143

这与库搜索路径无关，它们用于查找要编译的库；它们与项目中包含的源文件无关。

它们丢失是因为您的项目文件试图引用不存在的文件的位置。你有两个选择：

1.  如果您在 Finder 中有所有丢失的文件，您可以在 Xcode 中删除对它们的引用，然后重新导入它们。通过将它们从 Finder 拖回项目中来执行此操作。

2.  您可以改为“修复”您的项目文件，使其引用正确的位置。为此，请使用右侧的文件检查器，然后在位置下选择“框”图标（不确定它是什么，但选择它），然后重新定位您的文件。

![在此处输入图像描述](../Images/d1d97aabd2c316346d466c5cbc3bcb1e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T12:05:27.260

打开这些文件所在的文件夹，然后将丢失的文件拖放到您的项目中。检查“将项目复制到目标组的文件夹（如果需要）”，选择“为任何添加的文件夹创建组”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:08:24.123

从项目视图中删除这些文件（左侧列表），将它们拖回项目中并确保您没有选择复制到项目，但您还必须检查要放入哪个目标。

![这种方式来检查，因为文件已经到位](../Images/f8630d9713c8e9513e146f5f3e3c6ce4.png)

# c# - 为表格布局面板创建“网格线”

> ID：13231707
> 
> 赞同：1
> 
> 时间：2012-11-05T12:00:50.333
> 
> 标签：c#, tablelayoutpanel

有没有办法可以为每三行创建一条粗线作为行/列边框？

我知道我可以与每个单元格相邻，`.CellBorderStyle`但据我所知，这不允许我更改单个单元格、行或列的任何内容。

我怎样才能做到这一点？

# javascript - 在 https 下未加载重力表单，未定义 jQuery

> ID：13231712
> 
> 赞同：1
> 
> 时间：2012-11-05T09:43:28.170
> 
> 标签：javascript, jquery, forms, wordpress, ssl

我在我的 WordPress 网站上使用 Gravity Forms 插件。我通过 HTTPS 提供页面，这破坏了表单。

看起来问题是该站点如何尝试加载 jQuery。页面上有 23 个 JavaScript 错误，这似乎是由于 jQuery 加载失败所致`"Uncaught ReferenceError: jQuery is not defined"`。

如果我转到源试图提取 jQuery 文件的页面，你会看到`error:https://code.jquery.com/jquery-1.7.1.min.js?ver=3.4.2`

错误截图：

![在此处输入图像描述](../Images/e126d5dbebd2ecdabd301393206852c5.png)

而这个截图是页面源码中的参考：

![在此处输入图像描述](../Images/094577813226569147224e9505b1831f.png)

所以有人告诉我我想调查一下——这就是最终问题所在，但我真的不知道下一步该做什么。

是因为 Gravity Forms、WordPress 的 HTTPS 插件还是我的 SSL 证书而失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:28:23.403

该`code.jquery.com`域不支持 https。您需要从您自己的域或从 Google 或 Microsoft CDN 加载 jQuery。

要通过 https 从您自己的域加载 jQuery，只需执行以下操作：

`<?php wp_enqueue_script('jquery'); ?>`

要通过 https 从 Google 的 CDN 加载它，请执行以下操作：

```
<?php 
function jquery_cdn() {
   wp_deregister_script('jquery');
   wp_register_script('jquery', '//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js', false, null);
   wp_enqueue_script('jquery');
}

add_action('wp_enqueue_scripts', 'jquery_cdn'); 
```

故意省略上述示例中的“https”；它确保 jQuery 将通过与您的站点相同的协议加载，无论是 HTTP 还是 HTTPS。

# javascript - 用javascript投票

> ID：13231716
> 
> 赞同：1
> 
> 时间：2012-11-05T12:01:15.593
> 
> 标签：javascript, api, youtube

我正在使用 [youtube api][1] 来了解视频何时完全缓冲`player.getVideoLoadedFraction()`

当分数为 1 时，视频已完全缓冲，但我必须轮询此函数以检查它是否为 1，然后获取时间，例如：

```
setInterval(display_fraction,1); 
```

因为一个视频可能有几十分钟。

这种轮询是否会在浏览器/客户端上造成沉重的负载，从而影响视频流？有没有其他更好的轮询方法或方法来检测 youtube 何时完成缓冲？

顺便说一句，youtube api 的链接是： [https ://developers.google.com/youtube/flash_api_reference#Playback_controls](https://developers.google.com/youtube/flash_api_reference#Playback_controls)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:05:22.410

人类开始感知时间间隔在 20 到 10 秒之间，因此尝试使用 1 毫秒的值进行轮询既没有必要也不可取（任何现代浏览器都会将其舍入到 5 毫秒或 10 毫秒）。像 50 或 100 这样的值会更合适。

我还强烈建议使用链接的一系列`setTimeout`调用而不是`setInterval`调用，如下所示：

```
function onVideoReady(callback) {

    // Do first check as soon as the JavaScript engine is available to do it
    setTimeout(checkVideoReady, 0);

    // Our check function
    function checkVideoReady() {
        if (videoIsReady) {
            // The video is ready, notify calling code
            callback();
        }
        else {
            // Not ready yet, wait a 10th of a second
            setTimeout(checkVideoReady, 100);
        }
    }
} 
```

...然后您可以像这样使用它：

```
onVideoReady(function() {
    // The video is ready, do something
}); 
```

我提倡链式系列的原因`setTimeout`是`setInterval`：

1.  您可以轻松地在迭代之间更改延迟。*例如在上面，我第*一次尽快触发检查，然后在每次 100 毫秒后触发。你可以用时间做比这更复杂的事情，灵活性就在那里。

2.  由于代码必须显式地触发下一个循环，因此无意中运行多个循环要困难得多。

3.  `setInterval`浏览器之间的差异在于它是从最后一次调用的*开始还是**结束*时测量界面。如果您使用上述模式，您始终可以确定它是从最后一次检查*结束时开始的。*

4.  如果您的代码在下一个间隔发生时仍在运行，它就会被跳过。这可能会导致间隙（例如，如果您每 100 毫秒执行一次操作，而您的上一个循环需要 102 毫秒才能完成，下一个循环不会尽快开始，它会等待剩余的 98 毫秒），至少在某些浏览器上是这样。

但这取决于你，当然，上面的操作可以像使用调用链一样简单地使用`setInterval`and调用来完成。`clearInterval``setTimeout`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-04T20:30:41.283

链式超时的替代方案是链式[Promises](https://github.com/petkaantonov/bluebird)。以下实现了定期轮询以及超时。

```
var Promise = require('bluebird');

/**
 * Periodically poll a signal function until either it returns true or    a timeout is reached.
 *
 * @param signal function that returns true when the polled operation is complete
 * @param interval time interval between polls in milliseconds
 * @param timeout period of time before giving up on polling
 * @returns true if the signal function returned true, false if the operation timed out
 */
function poll(signal, interval, timeout) {
    function pollRecursive() {
        return signal() ? Promise.resolve(true) : Promise.delay(interval).then(pollRecursive);
    }

    return pollRecursive()
        .cancellable()
        .timeout(timeout)
        .catch(Promise.TimeoutError, Promise.CancellationError,function () {
            return false;
        });
} 
```

你这样称呼它。

```
poll(isVideoReady, pollingInterval, timeout).then(console.log); 
```

请参阅[Javascript polling with promises](https://gist.github.com/wpm/f745ea6478507c6eb72f)。

# python - Python Pexpect SSH 命令行登录参数

> ID：13231717
> 
> 赞同：2
> 
> 时间：2012-11-05T12:01:31.580
> 
> 标签：python, ssh, pexpect

我正在使用 pexpect.py 脚本登录并获取主机名信息。
基本上我是这样运行的

```
~$:./pexpect.py -h{hostname} -u{user} -p{password} 
```

您将在下面看到它是自动运行一些命令并关闭的。我希望能够在最后添加行，以便用户可以选择他们想要查看的信息。所以代替上面的命令行，它看起来像：

```
~$:./pexpexct.py -h{hostname} -u{username} -p{password} -x{user defined} -z{user defined} 
```

基本上是一个列表，其中 -x 是.. 说正常运行时间和 -z 是 ifconfig.. 还会有 -a、-b、-c。我迷失了如何在代码中添加这些参数：

```
#!/usr/bin/env python
# -h : hostname of the remote server to login to.
# -u : username to user for login.
# -p : Password to user for login. 

import os, sys, time, re, getopt, getpass
import traceback
import pexpect

COMMAND_PROMPT = '[#$] '
TERMINAL_PROMPT = '(?i)terminal type\?'
TERMINAL_TYPE = 'vt100'

SSH_NEWKEY = '(?i)are you sure you want to continue connecting'

def exit_with_usage():
    print globals()['__doc__']
    os._exit(1)

def main():
    global COMMAND_PROMPT, TERMINAL_PROMPT, TERMINAL_TYPE, SSH_NEWKEY
    ## Parse the options, arguments, get ready, etc.
    try:
        optlist, args = getopt.getopt(sys.argv[1:], 'h:u:p:', ['help','?'])
    except Exception, e:
        print str(e)
        exit_with_usage()
    options = dict(optlist)
    if len(args) > 1:
        exit_with_usage()

    if [elem for elem in options if elem in ['-?','--?','--help']]:
        print "Help:"
        exit_with_usage()

    if '-h' in options:
        host = options['-h']
    else:
        host = raw_input('hostname: ')
    if '-u' in options:
        user = options['-u']
    else:
        user = raw_input('username: ')
    if '-p' in options:
        password = options['-p']
    else:
        password = getpass.getpass('password: ')

## Login via SSH

    child = pexpect.spawn('ssh -l %s %s'%(user, host))
    i = child.expect([pexpect.TIMEOUT, SSH_NEWKEY, COMMAND_PROMPT, '(?i)password'])
    if i == 0:
            print 'ERROR! could not login with SSH. Here is what SSH said:'
            print child.before, child.after
            print str(child)
            sys.exit (1)
    if i == 1: # In this case SSH does not have the public key cached.
            child.sendline ('yes')
            child.expect ('(?i)password')
    if i == 2:
            # This may happen if a public key was setup to automatically login.
            # But beware, the COMMAND_PROMPT at this point is very trivial and
            # could be fooled by some output in the MOTD or login message.
            pass
    if i == 3:
            child.sendline(password)
            # Now we are either at the command prompt or
            # the login process is asking for our terminal type.
            i = child.expect ([COMMAND_PROMPT, TERMINAL_PROMPT])
            if i == 1:
                child.sendline (TERMINAL_TYPE)
                child.expect (COMMAND_PROMPT)

        COMMAND_PROMPT = "\[PEXPECT\]\$ "
        child.sendline ("PS1='[PEXPECT]\$ '") # In case of sh-style
        i = child.expect ([pexpect.TIMEOUT, COMMAND_PROMPT], timeout=10)
        if i == 0:
            print "# Couldn't set sh-style prompt -- trying csh-style."
            child.sendline ("set prompt='[PEXPECT]\$ '")
            i = child.expect ([pexpect.TIMEOUT, COMMAND_PROMPT], timeout=10)
            if i == 0:
                print "Failed to set command prompt using sh or csh style."
                print "Response was:"
                print child.before
                sys.exit (1)

# Now we should be at the command prompt and ready to run some commands.
# print '---------------------------------------'
# print 'Report of commands run on remote host.'
# print '---------------------------------------'

# Run uname.
        child.sendline ('uname -a')
        child.expect (COMMAND_PROMPT)
        print child.before
        if 'linux' in child.before.lower():
            LINUX_MODE = 1
        else:
            LINUX_MODE = 0

# Run and parse 'uptime'.
        child.sendline ('uptime')
        child.expect('up\s+(.*?),\s+([0-9]+) users?,\s+load averages?: ([0-9]+\.[0-9][0-9]),?\s+([0-9]+\.[0-9][0-9]),?\s+([0-9]+\.[0-9][0-9])')
    duration, users, av1, av5, av15 = child.match.groups()
        days = '0'
        hours = '0'
        mins = '0'
        if 'day' in duration:
            child.match = re.search('([0-9]+)\s+day',duration)
            days = str(int(child.match.group(1)))
        if ':' in duration:
            child.match = re.search('([0-9]+):([0-9]+)',duration)
            hours = str(int(child.match.group(1)))
            mins = str(int(child.match.group(2)))
        if 'min' in duration:
            child.match = re.search('([0-9]+)\s+min',duration)
            mins = str(int(child.match.group(1)))
        print
        print 'Uptime: %s days, %s users, %s (1 min), %s (5 min), %s (15 min)' % (
            duration, users, av1, av5, av15)
        child.expect (COMMAND_PROMPT)

# Run Current Date.
        child.sendline ('date')
        child.expect (COMMAND_PROMPT)
        print child.before

# Run vmstat.
    #    child.sendline ('vmstat')
    #    child.expect (COMMAND_PROMPT)
    #    print child.before

# Run free.
    #    if LINUX_MODE:
    #        child.sendline ('free') # Linux systems only.
    #        child.expect (COMMAND_PROMPT)
    #        print child.before

# Run df.
    #    child.sendline ('df')
    #    child.expect (COMMAND_PROMPT)
    #    print child.before

# Run lsof.
    #    child.sendline ('lsof')
    #    child.expect (COMMAND_PROMPT)
    #    print child.before

# Run netstat
    #    child.sendline ('netstat')
    #    child.expect (COMMAND_PROMPT)
    #    print child.before

# Run MySQL show status.
    #    child.sendline ('mysql -p -e "SHOW STATUS;"')
    #    child.expect (PASSWORD_PROMPT_MYSQL)
    #    child.sendline (password_mysql)
    #    child.expect (COMMAND_PROMPT)
    #    print
    #    print child.before

# Now exit the remote host.
        child.sendline ('exit')
        index = child.expect([pexpect.EOF, "(?i)there are stopped jobs"])
        if index==1:
            child.sendline("exit")
            child.expect(EOF)

    if __name__ == "__main__":

        try:
            main()
        except Exception, e:
            print str(e)
            traceback.print_exc()
            os._exit(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:33:08.813

在这一行中，您有使用的选项（粗体） optlist, args = getopt.getopt(sys.argv[1:], ' **h:u:p:** ', ['help','?'])

要为正常运行时间添加 -x，您可以这样做： optlist, args = getopt.getopt(sys.argv[1:], ' **h:u:p:x** ', ['help','?'])

然后在你进行正常运行时间检查的部分中，如果像这样将它放在一个之下：如果选项中的'-x'：

并对每个选项重复此操作，不要忘记在其上添加一些描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:09:42.293

仅供参考，为什么不使用 pexpect 项目中的 pxssh.py 模块？它为您处理一些 ssh 自动化。

*   [http://pexpect.sourceforge.net/pxssh.html](http://pexpect.sourceforge.net/pxssh.html)

*   [如何与 python 建立 ssh 连接？](https://stackoverflow.com/questions/6188970/how-to-make-a-ssh-connection-with-python)

# jquery - 使用 json 数据填充 iframe

> ID：13231719
> 
> 赞同：5
> 
> 时间：2012-11-05T12:01:33.473
> 
> 标签：jquery, json, jquery-mobile, iframe

我需要使用 json 数据填充 iframe（HTML 组件）。我有一个 java 脚本函数，它在页面加载时加载 json 数据。但是，iframe 组件无法加载数据。

我的代码实现是：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script
src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="jquery.loadJSON.js"></script>
<script>
function populateData()
{
window.document.getElementById('one').style.color='red';
var data = {"d1":"http://www.w3schools.com/"};
$('form').loadJSON(data);            
alert('start');
}

window.onload = populateData;
</script>
</head>
<body>
<form>
    <label id="one" for="Address">Address:</label>

    <iframe id="d1" width="100%" height="50%" src="about:blank">
        <p>Your browser does not support iframes.</p>
    </iframe>
    <br> <br>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-11-05T12:06:22.590

```
function populateData()
{
$('iframe#d1').attr('src',"https://maps.google.com/maps?&output=embed");           

} 
```

只需更改`src`iframe 上的属性。这里不需要或使用 JSON。

据我所知，您查询的网址返回 HTML，而不是 JSON。你只是想显示地图，是吗？

# netlogo - Netlogo - 用特定颜色的海龟填充相邻的补丁直到填满

> ID：13231720
> 
> 赞同：3
> 
> 时间：2012-11-05T12:01:39.480
> 
> 标签：netlogo

我试图让白海龟在 8 个空的相邻空间之一中创建黄海龟。如果没有可用空间，乌龟应该什么也不会产生。注意：白海龟保持白色，并产生能够繁殖自己以及其他黄海龟的黄海龟。总之，最后我想用黄色海龟填充黑色空间。

```
breed [ cells cell ]
cells-own [ n ]

to setup
  clear-all
  set-default-shape cells "square"
  ask patches [ if pycor = min-pycor [sprout-cells 1]]
  ask cells [ ifelse random 10 < 2 [set color white] [set color yellow]] 
```

谢谢回复。

我将解释我正在尝试做的事情：

1.  白色方块代表“干细胞”，它们能够自我繁殖并产生另一种类型的细胞（例如 TA 细胞），因此，最初每个白色细胞将在其上方或在其上方的一个角处产生另一个细胞。
2.  在第二步中，每个 TA 单元在其周围的任何空白空间中随机生成其他单元。
3.  第三，干细胞（白色方块）重复步骤 1，同时 TA 细胞填充它们周围的空白空间之一。细胞（干细胞和 TA 细胞）一旦周围没有空白空间（当 8 个邻居已经被填满），就会停止产生新细胞。
4.  在最后阶段，所有的黑色空间都应该用 TA 细胞填充。最后一行的黄色方块基本上什么都不做。

再次感谢您的帮助。

```
 reset-ticks
end

to go
  ask cells
    [ set n count neighbors with [pcolor = yellow] ]
  ask cells
    [ if n >= 1
      [ set color yellow] ]
  tick
  ;ask cells 
  ;[if ticks = 10
    ;[set color yellow]]
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:54:41.360

你到底想做什么对我来说并不完全清楚。我将采用可能的解释，但无论我的解释是否正确，您都应该尝试澄清您的问题。

试图理解你的代码，在我看来和之间有一些`patches`混淆`turtles`。在您的`go`程序中，`cells`如果他们有黄色邻居，您会要求变黄。我*认为*您想要的是黄色方块出现在与黄色方块相邻的补丁上。您尝试填充的空白补丁上还没有任何补丁`cells`，因此`ask cells`在这里变黄对您没有帮助。

如果您真的想坚持使用`cell`代理，保持当前`setup`程序，您可以执行以下操作：

```
to go
  ask patches with [not any? turtles-here] [
    if any? neighbors with [any? turtles-here] [
      sprout-cells 1 [
        set color yellow
      ]
    ]
  ]
end 
```

（如果你希望你的细胞只从下向上生长，你应该通过右键单击视图并选择关闭视图设置中的换行`Edit...`）

现在，一种完全不同的方法，如果你想要的只是某种元胞自动机，那可能会更简单，那就是放弃代理，只使用补丁。这会给你类似的东西：

```
to setup
  clear-all
  ask patches [
    if pycor = min-pycor [
      ifelse random 10 < 2 
        [set pcolor white]
        [set pcolor yellow]  
    ]
  ]
  reset-ticks
end

to go
  ask patches with [pcolor = black] [
    if any? neighbors with [pcolor = yellow or pcolor = white] [
      set pcolor yellow
    ]
  ]
  tick
end 
```

两种方法都有效。第一个在视觉上更令人愉悦。第二个稍微简单一些，因为你根本不需要海龟。这取决于你最终想要做什么。

# android - 添加到 WindowManager 的自定义视图上的动画

> ID：13231725
> 
> 赞同：3
> 
> 时间：2012-11-05T12:01:50.867
> 
> 标签：android, custom-view, window-managers, translate-animation

我有一个自定义视图，它被插入到 windowManager 以实现拖动功能，并覆盖了该`OnDraw()`方法。我正在尝试使用平移动画对其进行动画处理，但动画没有开始（animationListener 也没有捕捉到动画），而是视图从动画的起点“跳跃”到它的终点。

这是自定义视图：

```
public class DragView extends View {
@Override
protected void onAnimationEnd() {
    // TODO Auto-generated method stub
    super.onAnimationEnd();
}

@Override
protected void onAnimationStart() {
    // TODO Auto-generated method stub
    super.onAnimationStart();
}

// Number of pixels to add to the dragged item for scaling. Should be even
// for pixel alignment.
private static final int DRAG_SCALE = 0; // In Launcher, value is 40

public Bitmap mBitmap;
public Paint mPaint;
public int mRegistrationX;
public int mRegistrationY;
public Context context;

private float mAnimationScale = 1.0f;

private WindowManager.LayoutParams mLayoutParams;
private WindowManager mWindowManager;

public DragView(Context context, Bitmap bitmap, int registrationX, int registrationY, int left, int top, int width, int height,boolean animated) {
    super(context);

    if (animated)
        return;

    this.context = context;
    // mWindowManager = WindowManagerImpl.getDefault();
    mWindowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);

    Matrix scale = new Matrix();
    float scaleFactor = width;
    scaleFactor = (scaleFactor + DRAG_SCALE) / scaleFactor;
    scale.setScale(scaleFactor, scaleFactor);
    mBitmap = Bitmap.createBitmap(bitmap, left, top, width, height, scale, true);

    // The point in our scaled bitmap that the touch events are located
    mRegistrationX = registrationX + (DRAG_SCALE / 2);
    mRegistrationY = registrationY + (DRAG_SCALE / 2);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    setMeasuredDimension(mBitmap.getWidth(), mBitmap.getHeight());
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    float scale = mAnimationScale;
    if (scale < 0.999f) { // allow for some float error
        float width = mBitmap.getWidth();
        float offset = (width - (width * scale)) / 2;
        canvas.translate(offset, offset);
        canvas.scale(scale, scale);
    }
    canvas.drawBitmap(mBitmap, 0.0f, 0.0f, mPaint);
}

@Override
protected void onDetachedFromWindow() {
    super.onDetachedFromWindow();
    mBitmap.recycle();
}

public void setPaint(Paint paint) {
    mPaint = paint;
    invalidate();
}

public void show(IBinder windowToken, int touchX, int touchY) {
    final WindowManager.LayoutParams lp;
    int pixelFormat;

    pixelFormat = PixelFormat.TRANSLUCENT;

    lp = new WindowManager.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, touchX - mRegistrationX,
            touchY - mRegistrationY, WindowManager.LayoutParams.TYPE_APPLICATION_SUB_PANEL, WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                    | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, pixelFormat);

    lp.gravity = Gravity.LEFT | Gravity.TOP;
    lp.token = windowToken;
    lp.setTitle("DragView");
    mLayoutParams = lp;

    ((FragmentActivity)context).runOnUiThread(new Runnable() {
        //@Override 
        public void run() {
            mWindowManager.addView(DragView.this, lp);
        }
    });

}

void move(int touchX, int touchY) {
    // This is what was done in the Launcher code.
    WindowManager.LayoutParams lp = mLayoutParams;
    lp.x = touchX - mRegistrationX;
    lp.y = touchY - mRegistrationY;
    mWindowManager.updateViewLayout(this, lp);
}

void remove() {
    mWindowManager.removeView(this);
} 
```

这就是我开始动画的方式：

```
TranslateAnimation translate = new TranslateAnimation
(0, outOfScreenX, 0,outOfScreenY);
                    translate.setDuration(300);
                    translate.setFillAfter(true);           
                    mDragView.clearAnimation();
                    mDragView.startAnimation(translate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:27:04.553

这个问题的“解决方案”是WindowManager是一个全局设备组件（例如应用程序图标的拖动使用它），它根本不支持动画。

# android - 谷歌电视机自定义屏保

> ID：13231726
> 
> 赞同：0
> 
> 时间：2012-11-05T12:01:53.813
> 
> 标签：android, google-tv

有没有办法使用 android 应用程序在 Google TV 中设置自定义屏幕保护程序？

谢谢-dhams

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:53:43.277

不幸的是，目前还没有屏幕保护程序 api。

# c++ - 如何通过函数参数使用 fstream（特别是 ofstream）

> ID：13231730
> 
> 赞同：3
> 
> 时间：2012-11-05T12:02:06.433
> 
> 标签：c++

嗨，我是`c++`初学者，这是我的任务之一，我有点卡住了。这不是我的全部代码，它只是我需要帮助的一小部分。我想要做的是有一个函数专门用于将具有该函数的所有内容导出到一个`text`名为 results.txt 的文件中。因此，当我打开文件时，应该会显示“这项工作是否有效”这一行，但是当我运行文件时，我会收到类似的错误

> “错误 C2065：‘out’：未声明的标识符”
> 
> “错误 C2275：‘std::ofstream’：非法使用这种类型作为表达式”
> 
> “智能感知：不允许类型名称”
> 
> “IntelliSense：标识符“out”未定义”

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

//prototypes
void output(ofstream& out);

int main()
{
output(ofstream& out);
    ifstream in;
    in.open("inven.txt");
    ofstream out;
    out.open("results.txt");
return 0;
}

void output(ofstream& out)
{
out << "does this work?" << endl;
} 
```

现在真的很晚了，我只是对自己做错了什么感到茫然。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T12:06:12.293

首先，这很好：

```
void output(ofstream& out)
{
    out << "does this work?" << endl;
} 
```

然而，这不是：

```
int main()
{
    output(ofstream& out); // what is out?
    ifstream in;
    in.open("inven.txt");
    ofstream out;
    out.open("results.txt");
return 0;
} 
```

这是您得到的第一个错误：“错误 C2065: 'out' : undeclared identifier”，因为编译器还不知道 out。

在第二个片段中，您想使用特定*的*`ostream&`. 您没有调用函数，而是给出了函数声明，这在此上下文中是不允许的。你必须用给定的来调用它`ostream&`：

```
int main()
{
    ifstream in;
    in.open("inven.txt");
    ofstream out;
    out.open("results.txt");
    output(out); // note the missing ostream&
    return 0;
} 
```

在这种情况下，您使用as 参数*调用。* `output``out`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:23:36.657

由于您将自己描述为初学者，因此我会相应地回答，并希望以教育的方式回答。以下是正在发生的事情：将和视为智能变量类型（即使您知道类是什么，为了**逻辑清晰**`fstream`，也可以这样想）。像任何其他变量一样，您必须在使用前**声明它**。声明后，该变量可以**保存兼容的值**。变量类型用于保存**文件**。它的所有变体都具有相同的含义，只是它们所做的不同。`ofstream``ifstream`******`fstream`******

 ******您使用变量**打开文件**，在程序中**使用它**，然后**关闭**。

希望这可以帮助******

# iphone - 一次在两个视图中绘制线条

> ID：13231732
> 
> 赞同：4
> 
> 时间：2012-11-05T12:02:10.533
> 
> 标签：iphone, objective-c, ipad

我正在做一个应用程序，我需要在一个视图中绘制线条，并且应该自动出现在另一个视图中。任何帮助，将不胜感激..

这个我试过了。。

```
- (void)viewDidLoad
{
[super viewDidLoad];
slv = [[SmoothLineView alloc] initWithFrame:CGRectMake(DrawingView.bounds.origin.x, DrawingView.bounds.origin.y + 42, DrawingView.bounds.size.width, DrawingView.bounds.size.height - 42)];
slv.delegate = self;
[DrawingView addSubview:slv];
}

-(IBAction)btnAnotherView:(UIButton *)sender
{
[zoomingTypingView setUserInteractionEnabled:YES];
if(sender.tag == 123)
{
    [self.view setBackgroundColor:[UIColor colorWithWhite:0.500 alpha:1.000]];
    [UIView animateWithDuration:0.5
                          delay:0.1
                        options:UIViewAnimationTransitionCurlUp
                     animations:^{
                         //animation code
                         zoomingTypingView.frame = CGRectMake(0, 549, 768, 451);

                     } completion:^(BOOL finished) {

                     }];       
    CGRect imageFrame = CGRectMake(50, 50, 220, 120);
    ResizableView = [[SPUserResizableView alloc] initWithFrame:imageFrame];
    CGRect gripFrame = CGRectMake(50,50, 220,120);
    UIView *zoom = [[UIView alloc]initWithFrame:gripFrame];
    UIScrollView *zoomscroll = [[UIScrollView alloc]initWithFrame:gripFrame];
    [zoomscroll setZoomScale:32.0];
    [zoomscroll setMaximumZoomScale:32.0];
    [zoom addSubview:zoomscroll];
    [ResizableView setContentView:zoom];
    ResizableView.delegate = self;
    [DrawingView addSubview:ResizableView];
    sender.tag = 246;
}
else
{
    [UIView animateWithDuration:0.5
                          delay:0.1
                        options:UIViewAnimationTransitionCurlUp
                     animations:^{
                         //animation code
                         zoomingTypingView.frame = CGRectMake(0, 999, 768, 451);

                     } completion:^(BOOL finished) {
                        [self.view setBackgroundColor:[UIColor whiteColor]];
                     }];
    [ResizableView removeFromSuperview];
    [DrawingView addSubview:slv1];
    sender.tag = 123;
} 
```

}

![在此处输入图像描述](../Images/88b03d0dfc1490b4f20ad5debb021cf2.png)

在上面的图像中，WhiteColored 视图是新视图，如果我绘制应该反映在两个视图中的 whiteColoredView。

**您可以通过查看 NOTE TAKER HD APP 获得更多想法。**

[http://www.youtube.com/watch?v=FdGDnUKZcMM](http://www.youtube.com/watch?v=FdGDnUKZcMM)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:15:20.190

如果您定义了两个视图：

```
@property(nonatomic) UIView *view1;
@property(nonatomic) UIView *view2; 
```

而不是做self.view，你可以有功能为一个视图绘制：

```
-(void)drawView:(UIView*)view{
  //your drawing code here
} 
```

只需通过不同的视图调用相同的函数两次。

# workflow - Hortonworks-oozie

> ID：13231736
> 
> 赞同：1
> 
> 时间：2012-11-05T12:02:20.677
> 
> 标签：workflow, hive, oozie

我正在尝试使用 oozie 在 hortonworks 集群中运行工作流。收到以下错误：

**错误：无效的工作流应用程序，org.xml.sax.SAXParseException：cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素“hive”的声明。**

有人知道原因吗？至少一个可以在 hortonworks 发行版上运行的示例 hive workflow.xml 会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-22T22:37:51.127

这与工作流程的第一行有关：

```
<workflow-app name="${workflowName}" xmlns="uri:oozie:workflow:0.4"> 
```

具体来说：*uri:oozie:workflow:0.4*

xmlns 值告诉 oozie 遵循什么 xml 模式。我假设您使用在线资源来构建操作，该操作可能采用比您指定的更新的方案。

有版本

*-uri:oozie:工作流:0.1*

*-uri:oozie:工作流:0.2*

*-uri:oozie:工作流:0.2.5*

*-uri:oozie:工作流:0.3*

*-uri:oozie:工作流:0.4*

请参阅：[Oozie 工作流程方案](http://oozie.apache.org/docs/3.3.1/WorkflowFunctionalSpec.html#OozieWFSchema)

但通常将您设置为上面的代码示例（0.4）将适用于所有较新的工作流程。

* * *

动作也有方案，​​因此查看它们在每个版本中的功能很重要。

我相信蜂巢行动目前上升到 0.5，尽管我在这条线上使用 0.4：

```
<hive xmlns="uri:oozie:hive-action:0.4"> 
```

如果这没有帮助，请使用您的工作流程更新问题以获得进一步帮助。

# knockout.js - 当项目不是可观察的时刷新 observableArray

> ID：13231738
> 
> 赞同：31
> 
> 时间：2012-11-05T12:02:34.423
> 
> 标签：knockout.js

基本上我有一个 observableArray 并且每个项目的值都不是可观察的。这意味着当我更改项目值时，observableArray 的 foreach 循环中的 UI 不会相应更新。

如果我必须将它们设置为可观察的，这意味着巨大的变化，那么有没有一种方法可以手动刷新 UI 或 observableArray foreach？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-05T12:05:51.497

是的，您可以`valueHasMutated`为您的数组调用函数：

```
yourArray.valueHasMutated(); 
```

编辑：如果首先没有帮助你可以做'脏'刷新：

```
self.refresh = function(){
    var data = self.array().slice(0);
    self.array([]);
    self.array(data);
}; 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/FuEy6/2/](http://jsfiddle.net/vyshniakov/FuEy6/2/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-01-26T13:11:09.407

当您有一个带有不可观察元素的可观察数组，并且数组中某个元素的某些属性发生变化时，如果您只想刷新该元素，则可以使用`indexOf`and `splice`，如下所示：

```
var changedIdx = obsArray.indexOf(changedItem);
obsArray.splice(changedIdx , 1); // removes the item from the array
obsArray.splice(changedIdx , 0, changedItem); // adds it back 
```

它的作用是在数组中查找元素，将其删除，然后将其插入回去。当它被插入回来时，该元素再次被绑定，具有新的值。

如果您喜欢这个解决方案，您可以扩展所有 ko 可观察数组的功能，如下所示：

```
ko.observableArray.fn.refresh = function (item) {
    var index = this['indexOf'](item);
    if (index >= 0) {
        this.splice(index, 1);
        this.splice(index, 0, item);
    }
} 
```

然后，当您更改数组的一项时，您只需进行以下调用：

```
obsArray.refresh(changedItem); 
```

如果您的数组中有许多元素，您将在`dirty`Artem Vyshniakov 的刷新方面获得改进的性能，它会更新数组中所有元素的绑定，而不仅仅是更改的元素。

*注意：`valueHasMutated`, appart 没有记录（我想是供内部使用），仅检查数组本身是否已更改，而不检查数组中的不可观察元素是否已更改，因此它不起作用。即它只检测您是否已向数组添加元素、从数组中删除元素、使用新的不同元素更改数组元素或更改元素的顺序。但它不检查元素本身是否发生了变化*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-22T19:49:10.380

我最终使用了上面的肮脏方法，但这样做是为了让我所有的可观察数组都具有此功能。

```
ko.observableArray.fn.refresh = function () {
        var data = this().slice(0);
        this([]);
        this(data);
    }; 
```

valueHasMutated 对我不起作用。整个列表都必须更新，这有点蹩脚。或者在我的情况下，找到一种方法来扩展 ko 映射插件以用可观察对象填充可观察数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T08:05:09.963

我通过替换数组中的整个对象找到了一个简单的解决方案。

在此示例中，参数*ix*是索引，*oLine*是更新的对象，*oVM.objProps.lines*包含数组。该解决方案就像一个冠军。

```
/* This contortion causes the computed function to fire because
 * we have replaced the entire line object.
 */
function forceRefresh(ix,oLine) {
  var oVM = pme.getVM();
  oLine = JSON.parse(JSON.stringify(oLine));
  oVM.oObjProp.lines[ix] = oLine;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-22T13:52:36.883

我正在使用带有 deferUpdates 的 Knockout，而 JotaBe 的解决方案需要更新。

似乎 Knockout 在删除/添加时检测到这是同一个项目，因此不要刷新数组。

我采用了以下解决方案：

```
ko.observableArray.fn.refresh = function (item, index) {
    if (index==null) index = this['indexOf'](item);
    if (index >= 0) {
        this.splice(index, 1, ko.utils.extend({}, item)) // create new item
        //this.splice(index, 1);
        //this.splice(index, 0, item);
    }
} 
```

它会正确刷新数组！:-)

注意我在 refresh 函数中添加了第二个参数，用于在给出索引时指定索引，以避免运行 indexOf。

# java - Java Applet 文件上传会话

> ID：13231740
> 
> 赞同：0
> 
> 时间：2012-11-05T12:02:41.957
> 
> 标签：java, asp.net-mvc, applet

我有在具有 asp.net MVC 项目的页面内运行的 java 小程序。我将使用小程序的标记功能将参数从 asp.net 传递到小程序是自动搜索客户端文件并在 jtable 中进行一些文件处理和列表。当我在页面中运行小程序并在一个选项卡或一个窗口中打开它时，它工作得非常好。

当我在同一会话下的多个选项卡或多个窗口中运行相同的小程序页面时，会出现问题。发生的事情是在文件上传期间它从 jtable 中选择值它正在清除来自不同窗口/选项卡的所有 jtable 的值，尽管我正在从一个选项卡/窗口上传文件。

如果您有任何方法可以解决相同的问题，请告诉我。

# unit-testing - 编写兼容 asmx 和 wcf 的单元测试

> ID：13231747
> 
> 赞同：1
> 
> 时间：2012-11-05T12:03:30.693
> 
> 标签：unit-testing, visual-studio-2012, asmx, integration-testing, mstest

我应该如何使用 Visual Studio 2012 对 Web 服务（asmx）进行自动化单元测试？我的 Web 服务包含许多方法（108），这些方法依赖于在执行其他功能之前要执行的某些功能。其次，未来将使用相同的单元测试来对 WCF 服务进行单元测试（几乎相同的对应物）。那么在编写单元测试时如何注意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:23:00.037

这里有一个定义问题。您正在谈论'unit testin WCF service'，这是不可能的，因为单元测试 - 根据定义 - 独立运行，因此不能调用 Web 服务。换句话说，您正在使用集成测试。

你不应该有重复的测试。创建直接测试业务逻辑的单元测试，中间没有任何 WCF 或 asmx 交互。这样，您只需测试一次。除此之外，您可以创建一些集成测试来测试是否可以对 Web 服务进行调用，而无需真正测试业务逻辑（因为您已经对其进行了测试）。

> Web 服务包含很多方法(108)

看看[这篇文章](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)。它描述了一个模型，在该模型中，您将每个操作定义为一个对象，这样您的 Web 服务可以由一个方法组成。这使得 Web 服务非常灵活、可维护且易于测试。

# windows-phone-7 - 不允许对 IsolatedStorageFileStream 进行操作

> ID：13231748
> 
> 赞同：-3
> 
> 时间：2012-11-05T12:03:31.400
> 
> 标签：windows-phone-7, isolatedstorage

```
 using (EntityDataContext amdb = new EntityDataContext(StrConnectionString))
            {
                if (amdb.DatabaseExists())
                {
                    using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
                    {
                        if (!isoStore.FileExists(databaseName))
                        {
                            copyDatabase = true;
                        }
                        else
                        {
                            using (IsolatedStorageFileStream databaseStream = isoStore.OpenFile(databaseName, FileMode.Open, FileAccess.Read)) // error here
                            {
                                using (Stream db = Application.GetResourceStream(new Uri(databaseName, UriKind.Relative)).Stream)
                                {
                                    if (databaseStream.Length < db.Length)
                                        copyDatabase = true;
                                }
                            }
                        }
                    }
                }
                else
                {
                    //error with the database that has been packaged
                }
                if (copyDatabase)
                    new Worker().Copy(databaseName);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:06:28.117

据我所知，您正在尝试读取数据库文件，而您仍然打开了数据库连接。由于 a DataContext 锁定了数据库（因此锁定了文件），因此不允许您同时读取它。

为了关闭数据库连接尝试关闭`EntityDataContext`对象（通过调用`amdb.Close()`或关闭 using 语句

尝试这样的事情：

```
bool shouldCopyDatabase = false;
bool databaseExists = false;

using (EntityDataContext amdb = new EntityDataContext(StrConnectionString))
{
    databaseExists = amdb.DatabaseExists();
}

if (databaseExists == true)
{
    using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
    {
        if (!isoStore.FileExists(databaseName))
        {
            copyDatabase = true;
        }
        else
        {
            using (IsolatedStorageFileStream databaseStream = isoStore.OpenFile(databaseName, FileMode.Open, FileAccess.Read)) // error here
            {
                using (Stream db = Application.GetResourceStream(new Uri(databaseName, UriKind.Relative)).Stream)
                {
                    if (databaseStream.Length < db.Length)
                        copyDatabase = true;
                }
            }
        }
    }
}

if (copyDatabase)
    new Worker().Copy(databaseName); 
```

通过将隔离存储访问功能移到`using (EntityDataContext amdb = new EntityDataContext(StrConnectionString))`范围之外，您可以首先关闭数据库连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:23:58.883

检查您是否准确，在隔离存储访问模式参数中，在其中写入数据而不是仅仅能够读取的可能性。

你用设备测试过吗？

# html - 在 Chrome 浏览器中，如果链接位于带有控件的 Video 元素上，则链接不可点击

> ID：13231749
> 
> 赞同：2
> 
> 时间：2012-11-05T12:03:32.953
> 
> 标签：html, google-chrome, video, hyperlink, controls

我在 HTML5 文档中有一个视频元素。有一个控制面板 div 可以动态滑出以部分覆盖视频元素。

这在 Firefox 和 IE9 中运行良好。但是，在 Google Chrome 中，位于 Video 元素上的任何链接的任何部分都不可点击。当您将鼠标悬停在链接上时，指针不会改变，单击链接没有任何效果。

如果我将 Video 元素设置为不显示控件，问题就解决了。但奇怪的是，如果 Video 元素以启用控件开始，然后我动态删除 Controls 属性，则链接是不可点击的。我尝试过同时使用 jQuery 和常规 JavaScript。

目前，我不需要显示控件，所以我的页面还可以。但我想更好地理解这个问题（另外，如果其他人有同样的问题，也许这篇文章会帮助他们？）。有谁知道，与 IE9 和 FF 相比，Chrome 处理视频元素的方式有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:00:08.560

我已经`z-index`在你的代码中添加了两个重叠的元素，它对我有用。例如，first`div`的 CSS 更改为：

```
div.first {
  left: 0;
  top: 0;
  z-index: 255;
} 
```

首先`video`更改为：

```
<video controls style="z-index:0"> 
```

我可以单击第一个内部的链接`div`，包括浮动在`video`元素上的那部分。

# android - 在 iOS 或 Android 上使用内容管理系统

> ID：13231753
> 
> 赞同：1
> 
> 时间：2012-11-05T12:03:47.150
> 
> 标签：android, ios, html, user-interface, content-management-system

我想开发一个应用程序，其中部分数据是动态的，如图片、显示时间等。他们有许多使用 HTML5 和 CSS 的内容管理系统，但我也想使用原生 iOS 或 Android Ui，如 iPad 的 UISplitView。如何这可能吗 ？管理和使用动态数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T11:50:31.247

我一直在研究这个非常准确的答案。我能想到的最佳答案是 parse.com。这可能不是您正在寻找的 100%。然而。它的作用是充当与多个平台（Windows 8、iOS、Android）对话的中央数据库，并提供一个用于每个平台的 api，其中包含大量文档，使编程变得超级容易。[http://deployd.com/](http://deployd.com/)还有这个站点是我将要研究的东西，它使用简化的 node.js 桌面来使用数据库编写简单的基于目标的函数。肯定还在找。无论哪种方式，最糟糕的事情就是调用您的视图...引入一些对象...并让这些数据库提供您的对象以专门回答您的问题。

作为开发人员，我习惯于 Joomla 和 magento。这些不一定是 ios 友好的。无论如何，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T02:08:42.797

我建议看看 Cloud CMS ( [http://www.cloudcms.com](http://www.cloudcms.com) )。

Cloud CMS 是一个围绕 JSON 模式构建的云内容管理系统。与传统的 Web 内容系统不同，Cloud CMS 使用 JSON 和二进制文件（通过 MongoDB GridFS 或 Amazon S3）。它为工作流、分析、用户和组等提供全文搜索、结构化查询和一整套企业功能。

从 iOS 或 Android 的角度来看，您实际上只需要与 REST API 交互。您可以直接执行此操作，也可以使用其中一个客户端库。

免责声明：我是公司的创始人之一。很想了解您的想法并了解我们可以做些什么来改进事情。我们正在为移动设备重新设计 CMS 非常开心。

# wcf - 为什么我的 ARM 芯片/表面处理 WCF 调用比我的 i7 笔记本电脑慢很多，有什么办法可以加快速度吗？

> ID：13231754
> 
> 赞同：0
> 
> 时间：2012-11-05T12:04:00.213
> 
> 标签：wcf, performance, windows-8, windows-runtime

我正在诊断测试我的 winRT 商店应用程序，并注意到我的 Surface RT 设备和我的 i7 笔记本电脑之间存在相当大的性能差异。

现在 - 我知道 ARM CPU 和 i7 之间的预期性能存在很大差异 - 但是当我在 i7 上的平均 WCF 网络调用需要 ~0.2 秒，而我的表面设备需要 ~1.2 秒时，我不得不开始查看优化和改进。如果两者之间的性能差异只有几百毫秒，那么我不会太介意，但表面设备确实感觉有点笨拙——唯一的瓶颈似乎是服务！

有没有人有解释，甚至有一些性能改进提示？我应该提到我正在使用二进制序列化跨 basicBinding 运行服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:50:34.653

WCF 是一个重量级的堆栈，所以如果它在慢得多的 CPU 上执行得慢得多，我不会感到惊讶。确保同时没有其他 CPU 负载，从后台线程启动请求并显示进度指示器或尝试切换到更轻的技术，如 REST/JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:25:31.403

我已切换到 OData 流以提高性能。

除了速度快之外，这还允许我从服务中仅选择我需要的数据——既减少了我的应用程序的带宽消耗，又降低了服务调用的速度。

# android - 如何处理左右滑动事件

> ID：13231756
> 
> 赞同：3
> 
> 时间：2012-11-05T12:04:20.663
> 
> 标签：android, events

我想知道当用户在手机上向左或向右滑动时我需要处理哪些事件。

例如：在电话日志或联系人中，当用户在 A name 上向左滑动时，它开始呼叫该联系人，并且当向右滑动消息应用程序时打开。

我想知道怎么做，一点代码片段会更好。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:29:50.673

您可以使用此侦听器并将您的代码添加到`onSwipeLeft()`and `onSwipeRight()`：

```
public class OnSwipeTouchListener implements OnTouchListener {

@SuppressWarnings("deprecation")
private final GestureDetector gestureDetector = new GestureDetector(new GestureListener());

public boolean onTouch(final View v, final MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
}

private final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        onTouch(e);
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
            } else {
               // onTouch(e);
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }
}

public void onSwipeRight() {
}

public void onSwipeLeft() {
}

public void onSwipeTop() {
}

public void onSwipeBottom() {
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-08T04:53:41.517

OnSwipeTouchListener.java：

```
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class OnSwipeTouchListener implements OnTouchListener {

    private final GestureDetector gestureDetector;
public OnSwipeTouchListener (Context ctx){
    gestureDetector = new GestureDetector(ctx, new GestureListener());
}

private final class GestureListener extends SimpleOnGestureListener {

    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
                result = true;
            } 
            else if (Math.abs(diffY) > SWIPE_THRESHOLD && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffY > 0) {
                        onSwipeBottom();
                    } else {
                        onSwipeTop();
                    }
                }
                result = true;

        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }
}

public void onSwipeRight() {
}

public void onSwipeLeft() {
}

public void onSwipeTop() {
}

public void onSwipeBottom() {
}
} 
```

用法：

```
imageView.setOnTouchListener(new OnSwipeTouchListener() {
    public void onSwipeTop() {
        Toast.makeText(MyActivity.this, "top", Toast.LENGTH_SHORT).show();
    }
    public void onSwipeRight() {
        Toast.makeText(MyActivity.this, "right", Toast.LENGTH_SHORT).show();
    }
    public void onSwipeLeft() {
        Toast.makeText(MyActivity.this, "left", Toast.LENGTH_SHORT).show();
    }
    public void onSwipeBottom() {
        Toast.makeText(MyActivity.this, "bottom", Toast.LENGTH_SHORT).show();
    }

public boolean onTouch(View v, MotionEvent event) {
    return gestureDetector.onTouchEvent(event);
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:26:01.957

看看那个。我认为你需要手势识别。

@Vogella 解释得很好。

[http://www.vogella.com/articles/AndroidGestures/article.html](http://www.vogella.com/articles/AndroidGestures/article.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T12:31:46.837

你需要使用 GestureDetector 和 SimpleOnGestureListener。这是在特定视图上使用滑动的代码。这是 FrameLayout 的：

```
package com.ex.gessture;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.view.View;
import android.widget.FrameLayout;

public class GestureListenerActivity extends Activity {

FrameLayout frame;
GestureDetector mGestureDetector;
String TAG = "GestureListenerActivity";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    frame = (FrameLayout) findViewById(R.id.frame);

    mGestureDetector = new GestureDetector(this, mGestureListener);

    frame.setOnTouchListener(new FrameLayout.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            return mGestureDetector.onTouchEvent(event);
        }
    });
}

    /**
 * Gesture Event Handler
 */
private SimpleOnGestureListener mGestureListener = new SimpleOnGestureListener() {

    int swipe_Min_Distance = 100;
    int swipe_Max_Distance = 350;
    int swipe_Min_Velocity = 100;
/*      
    @Override
    public boolean onDown(MotionEvent e) {
        Log.i(TAG, "[CALLBACK_GL] boolean onDown(e:" + e + ")");
        return super.onDown(e);
    }
*/
    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }

    @Override
    public boolean onSingleTapUp(MotionEvent e)
    {

        /**
         *
         * Do your stuff
         *
         */

        return super.onSingleTapUp(e);
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        Log.i(TAG, "[CALLBACK_GL] boolean onSingleTapConfirmed(e:" + e + ")");
        return super.onSingleTapConfirmed(e);
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        Log.i(TAG, "[CALLBACK_GL] boolean onDoubleTap(e:" + e + ")");

        return super.onDoubleTap(e);
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        Log.i(TAG, "[CALLBACK_GL] boolean onFling(e1:" + e1 + ", e2:" + e2 + ", velocityX:" + velocityX
                + ", velocityY:" + velocityY + "");

        final float xDistance = Math.abs(e1.getX() - e2.getX());
        final float yDistance = Math.abs(e1.getY() - e2.getY());

        if(xDistance > this.swipe_Max_Distance || yDistance > this.swipe_Max_Distance)
            return false;

        velocityX = Math.abs(velocityX);
        velocityY = Math.abs(velocityY);
        boolean result = false;

        if(velocityX > this.swipe_Min_Velocity && xDistance > this.swipe_Min_Distance){
            if(e1.getX() > e2.getX()) // right to left
                //this.listener.onSwipe(SWIPE_LEFT);
                Log.i(TAG, "Swipe Left");

            else
                Log.i(TAG, "Swipe Right");
                //this.listener.onSwipe(SWIPE_RIGHT);
        }   

        //return super.onFling(e1, e2, velocityX, velocityY);
        return true;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        Log.i(TAG, "[CALLBACK_GL] void onShowPress(e:" + e + ")");
        super.onShowPress(e);
    }

    @Override
    public void onLongPress(MotionEvent e) {
        Log.i(TAG, "[CALLBACK_GL] void onLongPress(e:" + e + ")");

        super.onLongPress(e);
    }
};

} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" android:weightSum="1">

<FrameLayout
    android:id="@+id/frame"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_weight=".5"
    android:background="#ffffff"
    android:layout_margin="50dp">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" android:layout_gravity="center"/>

</FrameLayout> 
```

这是使用单独类并在整个屏幕上使用运动事件的不同方法的链接，而不仅仅是特定视图： http: [//misha.beshkin.lv/android-swipe-gesture-implementation/](http://misha.beshkin.lv/android-swipe-gesture-implementation/)。这个链接将解决你所有的问题！

# javascript - 提高映射性能

> ID：13231757
> 
> 赞同：2
> 
> 时间：2012-11-05T12:04:25.113
> 
> 标签：javascript, jquery

我正在映射从 ajax 调用收到的值。它工作得很好，但在 ie7 中仍然不够快（我收到了一个缓慢的脚本警告）。

我想不出任何办法让这更快。我也尝试过使用原生 javascript 函数，但速度提升可以忽略不计。你们有什么想法吗？

```
var $audit = $('#audit');

$.each(data, function (i, val) {

    if (val != null && val !== '0') {

        $audit.find('input[type="checkbox"].' + i).attr('checked', val == 1);
        $audit.find('input[type="text"].' + i).val(val);
        $audit.find('select.' + i).val(val);
    }

}); 
```

一些伪html：

```
<div id="audit">
    <input type="text" class="foo1" />
    <input type="checkbox" class="foo2" />
    <select class="foo3">
        <option value="1">1</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:19:09.040

我不知道它是否会有那么大的帮助，但你可以缓存你的输入+选择并过滤它，而不是一遍又一遍地找到“相同”的元素，然后只过滤一个更小的集合中的特定元素：

```
var $audit = $('#audit'),
    $inputs = $audit.find('input, select');

$.each(data, function (i, val) {
    if (val != null && val !== '0') {
        var current = $inputs.filter('.' + i);
        if(current.is(":checkbox") {
            current.attr('checked', val === 1);
        } else {
            current.val(val);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:19:46.813

您可以尝试将其`knockout.js`用于您的目的。它**可能会**更快。

这是一个数据绑定的例子：http: [//knockoutjs.com/examples/controlTypes.html](http://knockoutjs.com/examples/controlTypes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:40:43.320

每次迭代，当作用域链不断进入和离开 DOM 时，它的速度很慢也就不足为奇了。然而，这个循环需要很长时间，这引出了一个问题：页面上有多少个这些 div？如果它超过 50 左右，那么你就有一个 UI 设计问题。

要使这个速度显着加快，确实需要对代码进行彻底的重新设计。如果是我，我会构建一个包含重复 div 作为 javascript 字符串的 HTML framgent，然后使用单个 createElement/设置 innerHTML 将其拼接到页面中

# javascript - jquery 数据表：添加额外的列

> ID：13231758
> 
> 赞同：31
> 
> 时间：2012-11-05T12:04:29.520
> 
> 标签：@version, javascript, jquery-ui, datatables, customization

**设想**

我第一次使用数据表（ [@version](/questions/tagged/datatables "显示标记为“数据表”的问题") 1.9.4）向用户显示数据。我成功地通过 ajax 检索数据并将它们绑定到数据表。

现在我想添加额外的列来让用户处理记录。为简单起见，目的是添加一个带有 onclick 处理程序的按钮，该处理程序检索“点击”记录的数据。

在我的计划中，我会将与“点击”记录对应的 json 项绑定到 onclick 处理程序。

到现在为止，如果我在 DOM 中添加额外`TH`的操作列，数据表代码会出现错误：

```
Requested unknown parameter '5' from data source for row 0 
```

**问题**

如何设置自定义列？如何用 HTML 填充他们的内容？

* * *

这是我的实际配置。

**HTML**

```
<table id="tableCities">
    <thead>
        <tr>
            <th>country</th>
            <th>zip</th>
            <th>city</th>
            <th>district code</th>
            <th>district description</th>
            <th>actions</th>
        </tr>
    </thead>
    <tbody></tbody>
</table> 
```

**Javascript**

```
$('#tableCities').dataTable({
    "bPaginate": true,
    "bLengthChange": false,
    "bFilter": true,
    "bSort": true,
    "bInfo": false,
    "bAutoWidth": true
    , "bJQueryUI": true
    , "bProcessing": true
    , "bServerSide": true
    , "sAjaxSource": "../biz/GetCitiesByZip.asp?t=" + t
}); 
```

**示例 Json 结果**

```
{
    "aaData":
    [
        [
            "IT",
            "10030",
            "VILLAREGGIA",
            "TO",
            "Torino"
        ],
        [
            "IT",
            "10030",
            "VISCHE",
            "TO",
            "Torino"
        ]
    ],
    "iTotalRecords": 2,
    "iTotalDisplayRecords": 2,
    "iDisplayStart": 0,
    "iDisplayLength": 2
} 
```

**编辑**

[丹尼尔](https://stackoverflow.com/users/617373/daniel)是对的。解决方案是在 中设置自定义列`aoColumnDefs`，指定`mData`和`mRender`属性。特别是[`mRender`](http://datatables.net/usage/columns)让我们定义自定义 html 和 javascript。

```
/* inside datatable initialization */
, "aoColumnDefs": [
   {
        "aTargets": [5],
        "mData": null,
        "mRender": function (data, type, full) {
            return '<a href="#" onclick="alert(\''+ full[0] +'\');">Process</a>';
        }
    }
 ] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-05T14:16:45.650

您可以像这样以不同的方式定义列

```
"aoColumns": [
        null,
        null,
        null,
        null,
        null,
        { "mData": null }
    ] 
```

或这个

```
"aoColumnDefs":[
    {
        "aTargets":[5],
        "mData": null
    }
] 
```

这里有一些文档[列](http://www.datatables.net/usage/columns)

看看这个[DataTables AJAX 源示例 - 列的空数据源](http://datatables.net/release-datatables/examples/ajax/null_data_source.html)

> 请注意，在 DataTables 1.9.2 之前，mData 被称为 mDataProp。改名体现了该属性的灵活性，与mRender的命名一致。如果给出了“mDataProp”，那么它仍将被 DataTables 使用，因为它会在需要时自动将旧名称映射到新名称。

另一个解决方案/解决方法可能是添加“5”参数......

例如`""`为每一行添加额外的

像这样：

```
 [
        "IT",
        "10030",
        "VILLAREGGIA",
        "TO",
        "Torino",
        ""
    ],
    [
        "IT",
        "10030",
        "VISCHE",
        "TO",
        "Torino",
        ""
    ] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-27T16:34:44.937

以防万一使用较新版本的 DataTables (1.10+) 的人正在寻找此问题的答案，我按照此页面上的说明进行操作：

[https://datatables.net/examples/ajax/null_data_source.html](https://datatables.net/examples/ajax/null_data_source.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-25T10:06:34.567

在这里发布这个答案，只是为了表明`aoColumnDefs`需要在哪里定义。我自己从这个问题中得到了帮助，但我为在哪里放置`aoColumnDefs`. 此外，还添加了 onclick 事件的功能。

```
$(document).ready(function() {
  var table = $('#userTable').DataTable( {
        "sAjaxSource": "/MyApp/proctoring/user/getAll",
        "sAjaxDataProp": "users",
        "columns": [
                    { "data": "username" },
                    { "data": "name" },
                    { "data": "surname" },
                    { "data": "status" },
                    { "data": "emailAddress" },
                    { "data" : "userId" }
                  ],
        "aoColumnDefs": [
           {
                "aTargets": [5],
                "mData": "userId",
                "mRender": function (data, type, full) {
                    return '<button href="#"' + 'id="'+ data + '">Edit</button>';
                }
            }
         ]
    } );

    $('#userTable tbody').on( 'click', 'button', function () {
        var data = table.row( $(this).parents('tr') ).data();
        console.log(data);
        $('#userEditModal').modal('show');
    });

} ); 
```

# android - Android AnimationDrawable 开始

> ID：13231762
> 
> 赞同：0
> 
> 时间：2012-11-05T12:04:38.443
> 
> 标签：android

我正在使用 AnimationDrawable 来显示丢失的网络连接。显示/隐藏逻辑链接到网络状态更改接收器。它工作正常。但是当开始活动时知道状态并尝试开始动画 - 动画可绘制显示并在第一帧冻结。我已阅读文档-“不要在 OnCreate 中启动动画”。所以我在 onResume 中编写了代码，但动画仍然没有播放 - 只显示第一帧。从按钮或事件开始工作正常。尝试从单独的线程开始并等待一段时间 - 但这听起来不错。

任何的想法？

从网络状态更改处理程序调用此代码时有效

```
private void _NetStatus(boolean start)
{
    if (start)
    {
        m_NetStatus.setVisibility(View.VISIBLE);
        m_NetStatusFrameAnimation.start();
    }
    else
    {
        m_NetStatusFrameAnimation.stop();
        m_NetStatus.setVisibility(View.INVISIBLE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:55:48.200

唔。在尝试了一些建议我在 onCreate 结束时使用新的 Runnable 的示例之后 - 我尝试在屏幕上显示活动时启动动画：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) 
```

现在工作正常。

# php - php - 如何在多个请求中维护 imap 资源（由 imap_open 返回）？

> ID：13231764
> 
> 赞同：1
> 
> 时间：2012-11-05T12:04:43.823
> 
> 标签：php, imap

我想在 php 应用程序中的多个请求中保持 php 应用程序和 imap 服务器之间的连接。但问题是我不知道如何将 imap 资源放入单例中。每次发出新请求时，静态变量都会被删除，并且 imap 资源无法序列化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:40:27.393

简而言之：你不能。

您正在寻找的是所谓的`persistent connection`，但没有办法在 PHP 中打开与 IMAP 的持久连接。

serialize() 在这里对您没有帮助，因为`imap_open`返回“资源”，并且资源无法序列化。

# android - 带有 PorterDuff.Mode.CLEAR 的橡皮擦在画布中不起作用

> ID：13231766
> 
> 赞同：0
> 
> 时间：2012-11-05T12:04:54.113
> 
> 标签：android, graphics, canvas, draw, erase

我需要为具有画布的绘画应用程序实现橡皮擦：

```
Canvas canvas = new Canvas(bitmap); 
```

其中位图是一个可变位图。我用以下油漆在画布上写字：

```
 mPaint = new Paint();
 mPaint.setAntiAlias(true);
 mPaint.setDither(true);
 mPaint.setColor(0xFF000000);
 mPaint.setStyle(Paint.Style.STROKE);
 mPaint.setStrokeJoin(Paint.Join.ROUND);
 mPaint.setStrokeCap(Paint.Cap.ROUND);
 mPaint.setStrokeWidth(50); 
```

然后，当我想擦除时，我执行以下操作：

```
 mPaint.setMaskFilter(null);
  mPaint.setColor(Color.TRANSPARENT);
  mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

但它不起作用。如何在不使用 porterDuff 模式的情况下实现擦除，或者如何更改代码以使其正常工作。

就像它所做的那样，它画线，就像笔一样。但颜色不是黑色，而是灰色。

编辑：我尝试了其他方法，并将位图值保存在另一个位图中，这样当我按下擦除时，我会取回该值。这有效并删除了图纸，但问题是，在此之后，如果我想画一些东西，我画了但它消失了。这是因为位图与来自以下位置的位图不同：

```
 Canvas canvas = new Canvas(bitmap); 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:43:50.567

因此，我没有在其上添加视图的布局。我放置了一种父布局，其中包括一种布局和一种图像视图。我将背景图像放在图像视图上。我在子布局上放了一张透明图片。然后将子布局放在前面，它现在正在工作

# javascript - 突出显示 HTML 文件中给定单词列表的最佳算法

> ID：13231767
> 
> 赞同：5
> 
> 时间：2012-11-05T12:04:59.537
> 
> 标签：javascript, jquery, html, algorithm

我有一些 HTML 文件，我无法控制这些文件。因此我不能改变它们的结构或标记。

对于这些 HTML 文件中的每一个，将根据另一种算法找到一个单词列表。这些词应在 HTML 文本中突出显示。例如，如果 HTML 标记是：

```
<p>
Monkeys are going to die soon, if we don't stop killing them. 
So, we have to try hard to persuade hunters not to hunt monkeys. 
Monkeys are very intelligent, and they should survive. 
In fact, they deserve to survive.
</p> 
```

单词列表是：

```
are, we, monkey 
```

结果应该是这样的：

```
<p>
    <span class='highlight'>Monkeys</span> 
    <span class='highlight'>are</span> 
going to die soon, if 
    <span class='highlight'>we</span> 
don't stop killing them. 
So, 
    <span class='highlight'>we</span> 
have to try hard to persuade hunters 
not to hunt 
    <span class='highlight'>monkeys</span>
. They 
    <span class='highlight'>are</span> 
very intelligent, and they should survive. 
In fact, they deserve to survive.
</p> 
```

突出显示算法应该：

1.  不区分大小写
2.  用 JavaScript 编写（这发生在浏览器内部）（欢迎使用 jQuery）
3.  速度快（适用于近 800 页给定书籍的文本）
4.  没有显示浏览器著名的“停止脚本”对话框
5.  适用于脏 HTML 文件（例如支持无效的 HTML 标记，例如未封闭的）

    元素）（其中一些文件是 MS Word 的 HTML 导出文件，我想你明白我所说的脏的意思！！！）

6.  应该保留原始的 HTML 标记（没有标记删除，没有标记更改，除了将预期的单词包装在元素内，没有嵌套更改。HTML 应该在编辑前后看起来相同，除了突出显示的单词）

到目前为止我所做的：

1.  我在数组中获取 JavaScript 中的单词列表，例如`["are", "we", "monkey"]`
2.  我尝试在浏览器中选择文本节点（现在有问题）
3.  我遍历每个文本节点，对于每个文本节点，我遍历列表中的每个单词并尝试找到它并将其包装在一个元素中

请注意，您可以[在这里](http://phis.ir/book-text/871)在线观看（用户名：demo@phis.ir，密码：demo）。当前脚本也可以在页面源代码的末尾看到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:42:23.883

将您的单词连接`|`成一个字符串，然后将该字符串解释为一个正则表达式，然后用高亮标签包围的完整匹配替换出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:30:34.747

以下正则表达式适用于您的示例。也许你可以从那里拿起它：

```
"Monkeys are going to die soon, if we don't stop killing them. So, we have to try hard to persuade hunters not to hunt monkeys. Monkeys are very intelligent, and they should survive. In fact, they deserve to survive.".replace(/({we|are|monkey[s]?}*)([\s\.,])/gi, "<span class='highlight'>$1</span>$2") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T20:01:50.480

我发现给定的问题非常有趣。这是我想出的：

*   使用一些插件（或自己编写一个），以便我们能够在元素进入视图时得到通知
*   解析该元素 text-nodes 并使用从单词本身派生的 unqiue css-class 名称将每个单词包装到 span 元素中
*   添加为这些 un​​qiue 类名添加 css-rules 的功能

示例：http: [//jsbin.com/welcome/44285/](http://jsbin.com/welcome/44285/)

* * *

该代码非常 hacky，并且仅在最新的 Chrome 中测试，但它对我有用，并且肯定可以在此基础上构建。

```
/**
 * Highlighter factory
 *
 * @return Object
 */
function highlighter() {
  var
    me = {},
    cssClassNames = {},
    cssClassNamesCount = 0,
    lastAddedRuleIndex,
    cbCount = 0,
    sheet;

  // add a stylesheet if none present
  if (document.styleSheets.length === 0) {
    sheet = document.createElement('style');
    $('head').append(sheet);
  }

  // get reference to the last stylesheet
  sheet = document.styleSheets.item(document.styleSheets.length - 1);

  /**
   * Returns a constant but unique css class name for the given word
   * 
   * @param String word
   * @return String
   */
  function getClassNameForWord(word) {
    var word = word.toLowerCase();
    return cssClassNames[word] = cssClassNames[word] || 'highlight-' + (cssClassNamesCount += 1);
  }

  /**
   * Highlights the given list of words by adding a new css rule to the list of active
   * css rules
   * 
   * @param Array words
   * @param String cssText
   * @return void
   */
  function highlight(words, cssText) {
    var
      i = 0,
      lim = words.length,
      classNames = [];

    // get the needed class names
    for (; i < lim; i += 1) {
      classNames.push('.' + getClassNameForWord(words[i]));
    }

    // remove the previous added rule
    if (lastAddedRuleIndex !== undefined) {
      sheet.deleteRule(lastAddedRuleIndex);
    }

    lastAddedRuleIndex = sheet.insertRule(classNames.join(', ') + ' { ' + cssText + ' }', sheet.cssRules.length);
  }

  /**
   * Calls the given function for each text node under the given parent element
   *
   * @param DomElement parentElement
   * @param Function onLoad
   * @param Function cb
   * @return void
   */
  function forEachTextNode(parentElement, onLoad, cb) {
    var i = parentElement.childNodes.length - 1, childNode;
    for (; i > -1; i -= 1) {
      childNode = parentElement.childNodes[i];
      if (childNode.nodeType === 3) {
        cbCount += 1;

        setTimeout(function (node) {
          return function () {
            cb(node);
            cbCount -= 1;
            if (cbCount === 0 && typeof onLoad === 'Function') {
              onLoad(me);
            }
          };
        }(childNode), 0);

      } else if (childNode.nodeType === 1) {
        forEachTextNode(childNode, cb);
      }
    }
  }

  /**
   * replace each text node by span elements wrapping each word
   *
   * @param DomElement contextNode
   * @param onLoad the parent element
   * @return void
   */
  function add(contextNode, onLoad) {
    forEachTextNode(contextNode, onLoad, function (textNode) {
      var
        doc = textNode.ownerDocument,
        frag = doc.createDocumentFragment(),
        words = textNode.nodeValue.split(/(\W)/g),
        i = 0,
        lim = words.length,
        span;

      for (; i < lim; i += 1) {
        if (/^\s*$/m.test(words[i])) {
          frag.appendChild(doc.createTextNode(words[i]));
        } else {
          span = doc.createElement('span');
          span.setAttribute('class', getClassNameForWord(words[i]));
          span.appendChild(doc.createTextNode(words[i]));
          frag.appendChild(span);
        }
      }

      textNode.parentNode.replaceChild(frag, textNode);
    });
  }

  // set public api and return created object
  me.highlight = highlight;
  me.add = add;

  return me
}

var h = highlighter();
h.highlight(['Lorem', 'magna', 'gubergren'], 'background: yellow;');

// on ready
$(function ($) {
  // using the in-view plugin (see the full code in the link above) here, to only
  // parse elements that are actual visible
  $('#content > *').one('inview', function (evt, visible) {
    if (visible) {
      h.add(this);
    }
  });

  $(window).scroll();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T12:37:52.243

你可以试试我一起破解的名为[Linguigi的库](https://github.com/Prinzhorn/Linguigi)

```
var ling = new Linguigi();

ling.eachToken(/are|we|monkey/g, true, function(text) {
    return '<span class="highlight">' + text + '</span>';
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T12:43:24.053

如果你使用 jQuery，试试这个。

```
$('* :not(:has(*))').html(function(i, v) {
  return v.replace(/searchString/g, '<span class="highlight">searchString</span>');    
});

$('* :not(:has(*))') will search for each node having no child elements and replace the html string in it with given string warapped in your HTML. 
```

我的快速和肮脏的解决方案是基于这个博客中的灵魂：

[http://wowmotty.blogspot.in/2011/05/jquery-findreplace-text-without.html](http://wowmotty.blogspot.in/2011/05/jquery-findreplace-text-without.html)

他的解决方案适用于 div 选择器并仅替换文本，我的解决方案尝试替换 innerHTML 字符串。

试试这个，告诉我可以做些什么。看起来很有趣。

# javascript - jQuery $(window).load(); 事件不会在没有声明的页面上触发？（...在 chrome 扩展内容脚本中）

> ID：13231768
> 
> 赞同：9
> 
> 时间：2012-11-05T12:05:02.920
> 
> 标签：javascript, jquery, events, google-chrome-extension, doctype

我正在开发一个操纵网页的 Google Chrome 扩展程序，但是在它部分加载（DOM）或完全加载（带有图像）之后。

似乎现在很多网站都使用

```
<!DOCTYPE html> 
```

声明，或它的一些变体，但许多其他人没有。问题主要是关于 HTML doctypes ......我不确定其他人。

假设如果网页没有 DOCTYPE 声明是否安全，那么 $(window).load(); 不会被解雇？

一开始我使用的是 $(document).ready(); （用于加载 DOM 时），但后来切换到 $(window).load(); （让图像也加载）。

问题是，现在 $(window).load(); 如果没有 DOCTYPE 似乎不起作用。$(文档).ready(); 似乎适用于所有页面，无论是否声明了 DOCTYPE。

也许这对其他有同样问题的人有用。我搜索了一下，没有找到决定性的答案。看来我最终会使用这样的东西：

```
if (window.document.doctype != null) {$(window).load(checkEntries);}
if (window.document.doctype == null) {$(document).ready(checkEntries);} 
```

我想我的问题是......这是否正常必须检查 DOCTYPE 才能知道要使用哪个事件？或者我在这里错过了什么？

基本上，为什么 $(window).load(); 如果没有 DOCTYPE 声明，似乎不会触发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T12:09:02.087

基本上，您不应该使用 $(window).load()，因为它不完全受支持。如果你真的需要它，那么上面的解决方案是你能做的最好的。jQuery 页面很好地总结了这些警告：

> 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> *   它不能始终如一地工作，也不能可靠地跨浏览器
> *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> *   它没有正确地冒泡 DOM 树
> *   可以停止对已经存在于浏览器缓存中的图像进行触发

网址：[http ://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T12:08:45.863

该`.ready()`方法通常与`<body onload="">`属性不兼容。如果必须使用 load，请不要使用 .ready() 或使用 jQuery 的`.load()`方法将 load 事件处理程序附加到窗口或更具体的项目，如图像。

# php - OpenCart 选项未正确加载

> ID：13231770
> 
> 赞同：0
> 
> 时间：2012-11-05T12:05:08.183
> 
> 标签：php, opencart

我开始从事一个使用 OpenCart 的项目。尝试添加新选项时，我遇到了一个奇怪的问题。

我在后端创建了两个文本选项并将它们分配给一个产品。它有效。问题是，选项未在前端正确加载。它们显示正常，但是当我输出所有应该存在的变量（特别是 product_option_id）时，它们为 NULL。之前我什至没有注意到这个问题，但是我需要 product_option_id 对代码进行一些修改。

当我通过 print_f 输出页面上的选项时，我得到了这个：

```
[0] => Array
    (
        [product_option_id] => 
        [calc_group_id] => 0
        [description] => ####
        [option_id] => 469
        [name] => ####
        [type] => text
        [option_value] => 
        [required] => 0
    )

[1] => Array
    (
        [product_option_id] =>
        [calc_group_id] => 0
        [description] => ####
        [option_id] => 468
        [name] => ####
        [type] => text
        [option_value] => 
        [required] => 0
    ) 
```

我将问题缩小到 OpenCart 中的产品模型 (catalog/model/catalog/product.php)

这行：

```
 $product_option_query = $this->db->query("SELECT * FROM " . DB_PREFIX . "product_option po LEFT JOIN `" . DB_PREFIX . "option` o ON (po.option_id = o.option_id) LEFT JOIN " . DB_PREFIX . "option_description od ON (o.option_id = od.option_id) WHERE po.product_id = '" . (int)$product_id . "' AND od.language_id = '" . (int)$this->config->get('config_language_id') . "' ORDER BY o.sort_order"); 
```

我尝试了这个 SQL 语句，它也返回了它必须返回的内容，即 product_option_id。我不知道出了什么问题，如果在 phpmyadmin 中测试，SQL 语句会返回正确的值，但上面的代码行没有（我输出了 $product_option_query->$rows 和一些值，比如 product_option_id 是空的）。

我怀疑我以错误的方式创建了选项。还是有这种可能？有趣的是，其他一些选项（选择类型选项）甚至我创建的选项（如果设置为选择类型）确实返回所有值，包括 product_option_id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:24:18.270

False alarm, thanks anyways.

The problem wasn't opencart, the problem was the guy working on this project before me. He changed the line I had problems with in a vqmod script. Needless to say, his sql statement didn't work, cause the result were two product_option_ids, one with the actual result and one which was empty.

This will be a lesson to me. If you take over a project, always double check the work that was done before.

# iphone - flash builder 4.7 AIR 应用程序如何获取 iPhone 时间和日期？

> ID：13231777
> 
> 赞同：0
> 
> 时间：2012-11-05T12:05:33.300
> 
> 标签：iphone, ios, time, air

无论如何，是否可以从使用 flash builder 制作的 AIR 应用程序访问 Iphone（或其他 ios 设备）上的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:02:59.050

您可以像在其他所有设备上一样访问时间。使用此代码：

```
var currentTime:Date = new Date();
trace(currentTime); 
```

您需要在需要实际时间的任何时候调用 new Date() 。

有关详细信息，请参阅[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html)。

与 iOS 模拟器一起工作，也应该在设备上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:34:28.030

您应该使用 Date() 类。（也许我误解了你的问题）

# ruby-on-rails - Rails - 在表单操作中翻译模型名称

> ID：13231778
> 
> 赞同：8
> 
> 时间：2012-11-05T12:05:35.907
> 
> 标签：ruby-on-rails, internationalization, translation, locale

我想用 i18n 系统翻译一个 rails 表格。

我的模型属性翻译正确，但是当我想翻译提交动作时，模型名称没有翻译。

这是我的 fr.yml 语言环境文件

```
fr:
  activerecord:
    model:
      character:
        one: "Personnage"
        other: "Personnages"
    attributes:
      character:
        name: "Nom"
        title: "Titre"
        biography: "Biographie"
  helpers:
    submit:
      update: "Mise à jour %{model}" 
```

我的 _form.html.erb 是

```
<%= form_for(@character) do |f| %>
  <% if @character.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@character.errors.count, "error") %> prohibited this character from being saved:</h2>

      <ul>
      <% @character.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :biography %><br />
    <%= f.text_area :biography, :rows => 8%>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

在我的表格上，我希望更新按钮是“Mise à jour **Personnage** ”，但我仍然有“Mise à jour **Character** ”。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T12:44:36.033

看起来你有一个`model`你应该有的地方`models`。

将您的 fr.yml 更改为如下所示：

```
fr:
  activerecord:
    models:
      character:
        one: "Personnage"
        other: "Personnages"
    ... 
```

[有关详细信息，请参阅有关Active Record 模型的翻译](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)的 rails i18n 文档部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:08:36.957

这是在 form_for 标记中使用时提交按钮的默认行为...它将显示更新字符而不是“更新 #{Model.name}”...

# c++ - OpenCV fitLine 异常

> ID：13231785
> 
> 赞同：1
> 
> 时间：2012-11-05T12:06:00.640
> 
> 标签：c++, opencv

我正在使用 OpenCV`fitLine()`功能。

有时会抛出以下异常：

```
..\opencv\modules\core\src\matrix.cpp:1219: error: (-215) 
dims == 2 && ((size[0] == sz.height && size[1] == sz.width) || (allocateVector 
&& size[0] == sz.width && size[1] == sz.height)) in function create 
```

还有一些断言失败：

```
OpenCV Error: Assertion failed (dims == 2 && ((size[0] == sz.height &&
size[1] == sz.width) || (allocateVector && size[0] == sz.width && 
size[1] == sz.height))) in create 
```

有人有类似的问题吗？也许点对于拟合线来说太糟糕了？我应该更改`fitLine()`函数参数吗？

代码

```
cv::Vec4f newLine;
if(temp.size() >= 2)
{
    qDebug()<<"Correcting line";
    std::vector<cv::Point2f> temp2;
    for(std::vector<std::pair<cv::Point2f,float> >::iterator i = temp.begin();
        i != temp.end(); i++)
    {
        temp2.push_back((*i).first);
    }
    qDebug()<<"temp2 size: "<<temp2.size();
    try{
        cv::fitLine(temp2,newLine,CV_DIST_HUBER,0,0.01,0.01);
    }
    catch(cv::Exception e)
    {
        qDebug()<<e.what();
    } 
```

我已更改`Vec4f newLine`为`std::vector<float> newLine(4)`并且有效。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:53:47.853

这些断言只是为了检查数据的维度是否正确（例如，一组 2D 或 3D 点）。因此，如果它们被提出，您可能没有正确初始化您的数据，但没有代码我无法判断

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T09:22:01.543

这个异常是由空的 Mat 产生的，所以检查是否为空：

```
 if (locations.rows != 0 ) {
        //do stuff
    } 
```

# android - 如何切换“使用物理键盘”

> ID：13231790
> 
> 赞同：1
> 
> 时间：2012-11-05T12:06:17.940
> 
> 标签：android, keyboard, android-softkeyboard, native-methods

我正在尝试解决与以下帖子相同的问题：

[如何切换“使用物理键盘”。](https://stackoverflow.com/questions/11878153/how-to-toggle-use-physical-keyboard/13231368#13231368) 从物理 [键盘切换到软件键盘](https://stackoverflow.com/questions/9244816/switch-from-physical-to-software-keyboard/13231306#13231306)

基本上我想从android切换本机选项来打开或关闭物理键盘。但是，我想通过代码创建这个按钮。

这些链接都没有一个好的答案。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T14:14:38.080

不，目前没有办法以编程方式完成此操作。我们能做的最多就是检测何时连接了键盘/扫描仪，并通过覆盖类`onConfigurationChanged`中的方法将用户重定向到输入法选择窗口`Application`：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  if(newConfig.hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_NO) {

    ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE))
                                  .showInputMethodPicker();
    Toast.makeText(this, "Barcode Scanner detected. Please turn OFF Hardware/Physical keyboard to enable softkeyboard to function.", Toast.LENGTH_LONG).show();
  }
} 
```

# c - 为什么 C 中的布尔类型写为 _Bool？

> ID：13231793
> 
> 赞同：1
> 
> 时间：2012-11-05T12:06:27.080
> 
> 标签：c, boolean, standards

> **可能重复：**
> [C 中 _Bool 和 bool 类型之间的区别？](https://stackoverflow.com/questions/8724349/difference-between-bool-and-bool-types-in-c)

我只是不明白。对我来说，这似乎很不直观 - 与简单的“布尔”相比:)

如此称呼它的动机是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:09:27.703

以一个或两个下划线开头的标识符是为语言和编译器保留的。

我希望他们不想破坏现有的（'legacy'）代码，这些代码可能使用'bool'作为变量的名称。

# android - 为什么我得到一个空游标 sql lite

> ID：13231795
> 
> 赞同：0
> 
> 时间：2012-11-05T12:06:30.397
> 
> 标签：android, sqlite, sqliteopenhelper

我做了我自己的`SQLiteOpenHelper`，它填充正确。我的问题是，当我尝试执行 a`rawquery`来获取所需的值时，我的光标为空。我检查了我的数据库，并且我试图获得的值存在。那么我做错了什么？这是我用于`SELECT`查询的代码。

```
SQLiteDatabase db=this.getReadableDatabase();

String[] params=new String[]{String.valueOf(actd)};

Cursor cursor=db.rawQuery("SELECT * FROM "+ tablename +" WHERE '"+dayStart+"' = ?",params);

Log.d("Cursor State", String.valueOf(cursor.moveToFirst())); 
```

希望你能帮助我，因为我被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:20:30.023

尝试添加：

```
startManagingCursor(cursor); 
```

查询后。

注意：此方法已弃用，但仍然有效。如果您想要更好的实现，请使用`CursorLoader`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T07:55:57.643

您在 dayStart 参数周围加上了无效引号。

```
Cursor cursor=db.rawQuery("SELECT * FROM "+ tablename +" WHERE "+dayStart+ "= ?",params); 
```

# java - 如果中心和起始坐标以及Android中的扫掠角已知，如何计算Arc中端点的坐标..？

> ID：13231797
> 
> 赞同：5
> 
> 时间：2012-11-05T12:06:39.427
> 
> 标签：java, android, math, geometry, pie-chart

我正在绘制一个饼图，其中我绘制了具有已知扫角的弧。现在我想在每个弧的中心显示标签，或者说从每个弧的中心画一条线。

鉴于我知道中心坐标、起始坐标、扫角和半径，我想计算结束坐标。

我也尝试过绘制一个匹配所有坐标的三角形并使用距离公式，但我不知道如何在 java 中求解方程。

请给我一个合适的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T12:18:13.257

在向量中工作。设 为`A`从圆心到圆弧起点的向量。计算这个

```
A = start_point - centre 
```

设为`theta`扫角（以弧度为单位）。使用旋转矩阵围绕圆心旋转圆弧起点。[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

明确地说，

```
newpoint_x = cos(theta)*A_x + sin(theta)*A_y
newpoint_y = -sin(theta)*A_x + cos(theta)*A_y 
```

其中`A_x`是 x 的分量`A`（对于 也是如此`A_y`）。然后

```
newpoint = centre + (newpoint_x,newpoint_y) 
```

是你想要的点。可能是该点以错误的方式旋转（逆时针），如果是这样，只需使用

```
theta = -theta 
```

反而。这应该适合你。

如果要评估弧的中点，只需使用

```
theta = theta / 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:19:02.710

```
StartAngle = atan2(StartY-CenterY, StartX - CenterX) 
EndX = CenterX + Radius * Cos(StartAngle + SweepAngle)
EndY = CenterY + Radius * Sin(StartAngle + SweepAngle) 
```

另一种方法：制作矩阵乘积

```
shift by (Center - Start)
rotation by SweepAngle
back shift 
```

并将此矩阵应用于起点（将矩阵和向量相乘）

# jquery - jquery.validate.js：永久添加一个方法

> ID：13231798
> 
> 赞同：0
> 
> 时间：2012-11-05T12:06:41.423
> 
> 标签：jquery, validation

`.addMethod()`我打算在 jquery.validate.js 本身中添加另一个方法，而不是使用 jquery.validate 提供的函数，因为我将对我需要的所有表单使用我的自定义方法。我应该继续编辑插件本身吗？或者有没有其他方法可以调用`.addMethod()`而不在我的所有页面上冗余调用它？

希望得到您的回复。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:12:57.843

没有理由不能扩展 jQuery 验证自己。

它必须在同一个文件中吗？如果是我，我会将该方法添加到存储我的代码的另一个 .js 文件中。

这样，您就不必担心未来的开发人员会替换验证文件以防止出现一些新的错误，并破坏您的代码。

# sql - Oracle 中的参数化查询

> ID：13231800
> 
> 赞同：0
> 
> 时间：2012-11-05T12:06:43.060
> 
> 标签：sql, sql-parametrized-query

我有一个`WARNINGS_INFO`表，其中包含有关特定警告消息的一些信息，例如它的代码和级别，以及一个描述如何打印输出消息的字符串。

```
 ID  |     CODE       | LEVEL | STR_FORMAT
------|----------------|-------|----------------------------------------------
  5   | attrib_missing |   3   | On cell $R:$C, attribute $ATTRIB not found 
```

假设我有一个表`GENERATED_WARNINGS`，其中包含从 SQL 批处理生成的所有警告：

```
 WARN_ID  |  WARN_ROW_ID   
-----------|---------------
    5      |      32 
```

另外，我还有另一个表，其中包含 columns `R`，`C`并且`ATTRIB`显然是一个`ROW_ID`主键列`WARN_ROW_ID`。

SQL 中有没有办法将`STR_FORMAT`字符串动态转换为包含最后一个表列中的数据的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:47:08.923

这是使用 Oracle`REPLACE()`函数进行的一次尝试：[http ://www.sqlfiddle.com/#!4/7d3c4/3](http://www.sqlfiddle.com/#!4/7d3c4/3)

这需要对`REPLACE`警告消息中的每个 $variable 进行嵌套调用，因此不是通用的。对于这种事情，我认为您不应该在 SQL 中进行变量替换。提取警告消息以及 $R、$C、$ATTRIB 等的值，并使用[Velocity](http://velocity.apache.org/)或[FreeMarker](http://freemarker.org)等模板库进行变量替换。

给定 DDL：

```
create table WARNINGS_INFO (
  ID INTEGER PRIMARY KEY,
  C_CODE VARCHAR2(20),
  I_LEVEL INTEGER,
  STR_FORMAT VARCHAR2(255)
);

insert into WARNINGS_INFO values (
  5, 'attrib_missing', 3, 'On cell $R:$C attribute $ATTRIB not found'
);

create table GENERATED_WARNINGS (
  WARN_ID INTEGER NOT NULL,
  WARN_ROW_ID INTEGER
);

insert into GENERATED_WARNINGS values (5, 32);

create table WARNING_MAP (
  ROW_ID INTEGER PRIMARY KEY,
  R INTEGER,
  C INTEGER,
  ATTRIB VARCHAR2(20)
);

insert into WARNING_MAP values (32, 42, 99, 'FOOBAR'); 
```

以下查询将执行参数替换：

```
select
  replace(
    replace(
      replace(str_format, '$R', wm.r),
      '$C', wm.c),
    '$ATTRIB', wm.attrib) as formatted
from warnings_info wi
join generated_warnings gw on wi.id = gw.warn_id
join warning_map wm on wm.row_id = gw.warn_row_id
; 
```

输出将是：“在单元格 42:99 上找不到属性 FOOBAR”

# xslt - XSLT：concat函数的使用

> ID：13231801
> 
> 赞同：0
> 
> 时间：2012-11-05T12:06:44.183
> 
> 标签：xslt

我试图在 html td 标签中只显示有限的字符，以下是我的代码，如果“VAR1”的字符少于 10 个，它直接显示“...”，如何检查？

```
<td><xsl:value-of select="concat(substring(VAR1,1,10),'...')"/></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:21:28.403

如果您只想显示 10 个字符，但只显示 ... 当原始字符串中有超过 10 个字符时，您可以在一个表达式中执行此操作，所以

```
<xsl:value-of select="concat(
   substring(VAR1,1,10), 
   substring('...', 1 div (string-length(VAR1) &gt; 10)))"/> 
```

所以，当**VAR1**是 '123456789' 时，它会输出这个

```
123456789 
```

但是当**VAR1**是 '123456789012' 它会输出这个

```
1234567890... 
```

为了解释它是如何工作的，下面的表达式将是真或假，这取决于字符串的长度是否大于 10

```
(string-length(VAR1) &gt; 10) 
```

在数值表达式中使用时，true 的计算结果为 1，false 的计算结果为 0。现在，如果字符串长度超过 10 个字符，则完整表达式的计算方式如下

```
substring('...', 1 div (string-length(VAR1) &gt; 10)))
   = substring('...', 1 div true)
   = substring('...', 1 div 1)
   = substring('...', 1)
   = '...' 
```

因此，如果字符数超过 10 个，最后会出现“...”。

但是，当您的字符数少于 10 个时，它的评估结果如下

```
substring('...', 1 div (string-length(VAR1) &gt; 10)))
   = substring('...', 1 div false)
   = substring('...', 1 div 0)
   = substring('...', (A very big number!))
   = '' 
```

因此，少于 10 个字符的子字符串不会返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:23:30.583

如果 "VAR1" 少于 10 个字符，它应该显示 '...' ？如果这是您的问题，以下是答案

```
<td>
<xsl:choose>
   <xsl:when test='string-length(VAR1) &gt; 10'>
     <xsl:value-of select=concat(substring(VAR1,1,10),'...')/>
   </xsl:when>
   <xsl:otherwise>
     <xsl:value-of select="VAR1"/>
   </xsl:otherwise>
</xsl:choose>
</td> 
```

# php - 在非对象上调用成员函数 fire_query()

> ID：13231804
> 
> 赞同：1
> 
> 时间：2012-11-05T12:06:56.833
> 
> 标签：php, mysql, database, class, global

我不断收到错误 Call to a member function fire_query() on a non-object，这真的很令人沮丧，我只是不知道出了什么问题。

我的课：

```
require_once("MySQLDatabase.class.php");  

global $database;
$result = $database->fire_query($query);
$object_array = array(); 
```

这是我的 MySQLDatabase 类

```
<?php   
    require_once("config.php");
    class MySQLDatabase_class
    {
        //Some stuff

        public function fire_query($query)
        {
            $result = mysqli_query($this->db_connection, $query) or die("<font color='red'>Error code: 1x1003</font><br>".$query);
            return $result;
        }

        //Some more stuff
    }

    $database = new MySQLDatabase_class();
?> 
```

我已经做了很多次了，它总是有效的。我只是不明白为什么“global $database”不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:09:20.730

您必须在这里创建新对象：

```
require_once("MySQLDatabase.class.php");  
$database = new MySQLDatabase_class();
global $database;
$result = $database->fire_query($query);
$object_array = array(); 
```

# html - flexbox 模型中的自动内边距

> ID：13231810
> 
> 赞同：0
> 
> 时间：2012-11-05T12:07:31.290
> 
> 标签：html, css, responsive-design, flexbox

这是一个关于新的灵活框布局模型的问题。

假设在`display: flex;`我有两个项目的容器内。当容器足够宽时，两个item都是水平布局的，否则flexbox布局机制会让它们垂直堆叠。我想要的是当它们彼此相邻时在两个项目之间有一个内边距，但我希望当它们必须堆叠在一起时这个边距消失。

FlexBox 模型可以做到这一点吗？

例如，可以使用以下文档，该文档已使用最新版本的 Chrome 进行了测试：

```
<!DOCTYPE html>
<title>Flex Box</title>
<style>
    body {
        font-size: 100px;
    }
    .container {
        display: -webkit-flex;
        display: flex;  
        -webkit-flex-wrap: wrap;    
        flex-wrap: wrap;
    }
</style>
<div class="container">
    <p>
        One
    </p>
    <p>
        Two
    </p>
</div> 
```

​ 当外层 div 有足够的水平空间时，“一”和“二”并排显示，中间没有空格。一旦缩小浏览器窗口，两者就会垂直堆叠。我想让两个段落彼此相邻时用一个边距分隔。

[http://jsfiddle.net/WHYS2/](http://jsfiddle.net/WHYS2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:39:56.367

这只是部分可能的。您必须使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。

在下面的示例中，两个框彼此相邻，但是当空间不足时（例如，浏览器的视口小于 800 像素），框彼此之间。

[在http://jsfiddle.net/tjNhF/](http://jsfiddle.net/tjNhF/)上查看此演示并调整浏览器窗口的大小。

HTML：

```
<div class="box">
    <div>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut dapibus tellus non dui eleifend viverra. Proin quis nunc purus. Suspendisse at quam nisl, nec posuere mi. Donec nec nisi eros. Fusce vel orci quam. Cras urna arcu, hendrerit in consequat in, faucibus vitae nulla. Donec a urna risus. Proin posuere. </p>
    </div>
    <div>
        <p>Nulla magna felis, facilisis vel adipiscing et, bibendum ac tellus. Pellentesque in risus in leo scelerisque adipiscing quis ut augue. Etiam luctus nisi sit amet nulla ullamcorper quis commodo purus volutpat. Sed est nisl, facilisis non vestibulum sed, auctor et odio. Aenean eget neque urna, a hendrerit ipsum. Sed sollicitudin.</p>
    </div>
</div> 
```

CSS：

```
@media all {
    body {
        background-color: #aaffaa;
    }

    .box {
        width: 100%;
        border: 1px solid #555;

        display: -webkit-box;
        -webkit-box-orient: horizontal;

        display: -moz-box;
        -moz-box-orient: horizontal;

        display: box;
        box-orient: horizontal;
    }

    .box > div {
        padding: 1em 5em;
        -webkit-box-flex: 1;
        -moz-box-flex: 1;
        box-flex: 1;
    }

    .box > div:nth-child(1){ background : #abc; }
    .box > div:nth-child(2){ background : #bca; }
}

@media (max-width: 800px) {
    body {
        background-color: #ffaaaa;
    }

    .box {
        box-orient: vertical;
        -webkit-box-orient: vertical;
        -moz-box-orient: vertical;
    }
    .box > div {
        padding-left: 0;
        padding-right: 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:57:25.763

当段落在同一行时，您是否希望它们之间有一个固定宽度的边距，然后在第二段右侧添加行中的任何额外空间？或者你想要第一个固定在左边，第二个固定在右边，中间有一个可变宽度的边距？您是否希望段落的宽度像现在一样基于其内容？

当段落换成两行时，您是否仍然希望它们的宽度基于它们的内容，或者您​​是否希望每个段落都扩展以填充其 100% 的行？

# objective-c - UIAlertView 加载指示器在辅助线程中不起作用

> ID：13231811
> 
> 赞同：-1
> 
> 时间：2012-11-05T12:07:31.950
> 
> 标签：objective-c, ios

我有以下 UIAlertView 加载指示器的代码，它不起作用并给了我

```
- (void) launchActivity
{
 //some logic...
[NSThread detachNewThreadSelector:@selector(updateFilterProgress) toTarget:self withObject:nil];
}
- (void) updateFilterProgress {
 if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN))
{
    UIAlertView *myAlert = [[[UIAlertView alloc] initWithTitle:@"No Internet Connectivity" message:@"This app require an internet connection via WiFi or cellular network to work." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil] autorelease];
    [myAlert show];
}
else{
    UIAlertView *alertMe = [[[UIAlertView alloc] initWithTitle:@"Loading..." message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles: nil] autorelease] ;

  //tried this way by placing below line....no result   
  [alertMe performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES];
    //[alertMe show];

 //some logic...
} 
```

**更新：** 在主线程上，我正在调用 Web 服务并加载数据。因此我给出了另一个加载 UIAlertView 的线程，它正在使用 iOS 4,5。但它在 iOS 6 中崩溃。如果我将 AlerView 放在主线程上，那么在加载时什么都没有显示，但在加载数据后 AlertView 显示加载指示器几秒钟。任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:14:35.047

您正在显示来自分离线程的警报，而您必须从主线程执行此操作，使用 GCD 或`performSelectorOnMainThread`.

* * *

在主线程上您通常只想执行 UI 更新，所有复杂的计算和数据加载都将在分离的线程中执行。如果您尝试在主线程中加载数据，则 UI 在加载期间将无响应。因此，在分离线程中加载数据是一个很好的做法，在主线程上，您根据需要在加载开始时显示警报并在加载（和解析）完成时将其关闭，同时调用内容 UI 更新：

![加载/刷新数据源流](../Images/13d298b677c1e604605ffa5bd3e02086.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:14:54.170

这是一种不好的做法。

Apple 文档说您需要在主线程上处理 UI 元素。

我认为问题在于这一行：

```
[NSThread detachNewThreadSelector:@selector(updateFilterProgress) toTarget:self withObject:nil]; 
```

您不会在其他线程上而不是在主线程上处理 UI 元素。

采用：

```
[self updateFilterProgress]; 
```

或者像这样使用：

```
[yourAlert performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
```

我也检查了你的代码。弹出一个错误：

错误是：**“UIAlertView”没有可见的@interface 声明选择器“performSelectorOnCurrentThread:withObject:waitUntilDone:”**

这`performSelectorOnMainThread`对我来说非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:33:31.610

试试这个

```
- (void) launchActivity
{
 //some logic...
[NSThread detachNewThreadSelector:@selector(updateFilterProgress) toTarget:self withObject:nil];
}
- (void) updateFilterProgress {
 if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN))
{
    [self performSelectorOnMainThread: @selector(showAlertForNoNetConnect)];
}
else{
    [self performSelectorOnMainThread: @selector(showAlertForLoading)];
 //some logic...
}

- (void) showAlertForNoNetConnect
{
    UIAlertView *myAlert = [[[UIAlertView alloc] initWithTitle:@"No Internet Connectivity" message:@"This app require an internet connection via WiFi or cellular network to work." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil] autorelease];
    [myAlert show];

}
- (void) showAlertForLoading
{
    UIAlertView *alertMe = [[[UIAlertView alloc] initWithTitle:@"Loading..." message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles: nil] autorelease] ;
    [alertMe show];

} 
```

您必须在主线程中调用所有 UIKit 元素。这就是问题所在。希望这可以帮助。快乐编码。:)

# xml - 使用 XSLT 处理多个 xhtml 文件

> ID：13231815
> 
> 赞同：0
> 
> 时间：2012-11-05T12:07:48.827
> 
> 标签：xml, xslt, xhtml, xslt-1.0, xslt-2.0

我有两个 xhtml 输入文件，需要一个使用 xslt 的 xhtml 输出文件。如何用 xslt 实现？

请帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:10:40.800

第一个文件照常使用，而第二个（以及更多）可以通过 XPath 命令“document()”直接使用或作为变量使用。变量解决方案如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:variable name="file2" select="document('file2.xhtml')"/>
    <xsl:template match="/">
        <html>
            <head>
                <title>Use 2 input files</title>
        </head>
            <body>
                <p>File 1 <xsl:value-of select="."/></p>
                <p>File 2 <xsl:value-of select="$file2"/></p>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

当然你必须完成“value-of select=”来指向你想要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:36:55.750

**使用 XSLT[`document()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-document)功能，可以通过单个 XSLT 转换处理（处理）许多 XML 文档**。

# sql - SQL Server 中设置的 SET 数据类型

> ID：13231825
> 
> 赞同：3
> 
> 时间：2012-11-05T12:08:48.870
> 
> 标签：sql, sql-server

创建表时，我必须使用 datatype `SET`，但看起来`SET`SQL Server 中没有数据类型。我正在查看 Microsoft 的网站，这些是它支持的数据类型：http: [//msdn.microsoft.com/en-us/library/ms187752.aspx](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

我应该用哪一个来代替`SET`？

我`SET`在 MySQL 数据库中使用过这样的：

```
CREATE TABLE IF NOT EXISTS `configurations` (
`index` int(11) NOT NULL AUTO_INCREMENT,
`user_id` int(11) NOT NULL,
`configDuration` int(5) NOT NULL,
`configDurationPerspective` set('list_this_day','list_remaining') NOT NULL,
PRIMARY KEY (`index`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

然后当我将数据插入表中时，它看起来像这样：

```
INSERT INTO 'configurations' (index, user_id, configDuration, configDurationPerspective) VALUES (1, 1, 2, 'list_this_day'); 
```

别介意引号。粘贴代码时出现问题。

现在我想做同样的事情，但在 SQL Server 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:31:24.107

您要么必须使用单独的位字段（每个值具有位数据类型的一列），要么将值打包到具有整数数据类型的列中。如果您使用整数，则必须使用[t-sql 位运算符](http://msdn.microsoft.com/en-us/library/ms176122.aspx)来读取和写入值。

如果您使用按位运算符，您只会得到一列 create table 语句应如下所示：

```
CREATE TABLE configurations(
[index] int NOT NULL IDENTITY (1,1) PRIMARY KEY,
user_id int NOT NULL,
configDuration int  NOT NULL,
configDurationPerspective int NOT NULL,
) 
```

然后你必须将可能像 1,2,4,8,16,32 这样的位掩码值插入到 configDurationPerspective

```
INSERT INTO 'configurations' (index, user_id, configDuration, configDurationPerspective) VALUES (1, 1, 2, 'list_this_day'); 
```

将转化为

```
INSERT INTO 'configurations' (index, user_id, configDuration, configDurationPerspective) VALUES (1, 1, 2, 1); 
```

和

```
INSERT INTO 'configurations' (index, user_id, configDuration, configDurationPerspective) VALUES (1, 1, 2, 'list_remaining'); 
```

将转化为

```
INSERT INTO 'configurations' (index, user_id, configDuration, configDurationPerspective) VALUES (1, 1, 2, 2); 
```

和选择可能看起来像：

```
select  [index], configDuration,
case when configDurationPerspective & 1 > 0 then 'list_this_day' else '' end
 + case when configDurationPerspective & 2 > 0 then 'list_remaining' else '' end as configDurationPerspective
 from configurations 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:15:37.383

MS SQL Server 中的基本类型列表不支持相同的。但是我们拥有的是约束和用户类型。在这个问题中，您可以看到 MySQL**枚举**是如何解决的

[SQL Server 相当于 MySQL 枚举数据类型？](https://stackoverflow.com/questions/1434298/)

您还可以观察用户类型（我已经看到它们用于类似目的）

[http://msdn.microsoft.com/en-us/library/ms175007.aspx](http://msdn.microsoft.com/en-us/library/ms175007.aspx)

但作为这个问题最典型的解决方案，我们（在我们的项目中）使用一些“CodeList/StaticList”表并通过主键（int、shortint、tinyint）引用它

# c# - c#中的地铁游戏

> ID：13231830
> 
> 赞同：2
> 
> 时间：2012-11-05T12:09:12.873
> 
> 标签：c#, windows-8, microsoft-metro

是否可以在 C# 中使用 DirectX 为 Windows 商店创建地铁游戏？据我所知，不支持 XNA，那么创建 Metro 游戏的功能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:13:41.807

是的，您可以使用[SharpDX](http://sharpdx.org/)，新版本支持 Windows 商店应用程序 (WinRT)。

SharpDX 是开源项目，您可以在商业应用程序中免费使用它，更多信息请参见：http: [//sharpdx.org/about/licensing](http://sharpdx.org/about/licensing)

这是使用示例和一些提示：

[http://channel9.msdn.com/coding4fun/blog/Making-Modern-UI-Managed-DirectX-Apps-with-SharpDX-Updated-for-Win-8VS2012-RTM](http://channel9.msdn.com/coding4fun/blog/Making-Modern-UI-Managed-DirectX-Apps-with-SharpDX-Updated-for-Win-8VS2012-RTM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:28:28.050

您可以通过依赖 SharpDX 的[MonoGame](http://monogame.codeplex.com/)来利用您的 XNA 投资。查看[Bob Familiar 的博客文章](http://blogs.msdn.com/b/bobfamiliar/archive/2012/08/01/windows-8-xna-and-monogame-part-1-overview.aspx)以开始使用。（是的，它也是免费的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T14:18:15.370

我知道 C++，您可以将项目的图形部分写在一个用 C++ 编写的单独库中，并直接使用 DirectX。

# python - 如何在 sikuli 中获取 vbscript 变量？

> ID：13231834
> 
> 赞同：1
> 
> 时间：2012-11-05T12:09:21.340
> 
> 标签：python, vbscript, sikuli

单击 excel 中的按钮时，我使用 excel 宏将 excel 数据发送到 sikuli。我正在使用 vbscript shell 命令通过发送参数来运行 sikuli 脚本

```
rep = Shell("C:\Sikuli\Sikuli-IDE.exe -r C:\iP4-Projects\sikuliExamples\test.sikuli" & RCount & " " & CCount) 
```

但我不知道如何在 sikuli 中获取这两个参数。如果有人知道在 sikuli 或 python 中获取 vbscript 变量的语法，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:43:36.533

Try using the --args flag

`rep = Shell("C:\Sikuli\Sikuli-IDE.exe -r C:\iP4-Projects\sikuliExamples\test.sikuli --args " & RCount & " " & CCount)`

And in the script you can read them in the `argv` array

```
import sys

for a in sys.argv:
    print a 
```

But this **may not work** due to a Sikuli bug.
[https://answers.launchpad.net/sikuli/+question/194353](https://answers.launchpad.net/sikuli/+question/194353)
[https://answers.launchpad.net/sikuli/+question/167400](https://answers.launchpad.net/sikuli/+question/167400)
[https://answers.launchpad.net/sikuli/+question/195612](https://answers.launchpad.net/sikuli/+question/195612)

# mysql - mysql小数四舍五入

> ID：13231836
> 
> 赞同：1
> 
> 时间：2012-11-05T12:09:25.713
> 
> 标签：mysql, insert, decimal, rounding

我将小数插入到我的 MYSQL 数据库中，但最终在 DB 中的值被四舍五入，尽管我已将 DB 设置为 DECIMAL(10,4)。例如，我将折扣设置为 6.5，数据库将其记录为 7。

我的查询是：

```
$save = sprintf("
INSERT INTO discount
SET         am_discount = %d,
                tx_discount = '%s'
",
    $_POST['am_discount'],
    mysql_escape_string($_POST['tx_discount'])
); 
```

我也尝试将`am_discount`字段设置为`%u`and `%f`，但似乎没有什么不同。

正如我所提到的，我的 MYSQL DB 中的 am_discount 字段设置为`DECIMAL (10,4)`，我也尝试过 (10,2) 和 (8,2)。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T00:19:08.573

这不是数据库表列属性问题。十进制是正确的列类型。

对于向 DECIMAL 或整数列中的插入，目标是精确数据类型，因此舍入使用“从零取整的一半”，而不管要插入的值是精确的还是近似的。

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/precision-math-rounding.html](http://dev.mysql.com/doc/refman/5.0/en/precision-math-rounding.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:14:28.083

尝试 ：

```
$save = sprintf("INSERT INTO discount  SET am_discount = '".$_POST['am_discount']."',
                tx_discount = '".mysql_escape_string($_POST['tx_discount'])."' "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:16:16.110

它似乎是数据库表列属性问题，如果有人可以支持我的话。

请将您的表格列属性更改为“浮动”。

MySQL 允许使用非标准语法：FLOAT(M,D) 或 REAL(M,D) 或 DOUBLE PRECISION(M,D)。这里，“(M,D)”是指总共最多可以存储M位的值，其中D位可以在小数点之后。例如，定义为 FLOAT(7,4) 的列在显示时看起来像 -999.9999。MySQL 在存储值时执行舍入，因此如果将 999.00009 插入 FLOAT(7,4) 列，则近似结果为 999.0001。

参考： [http ://dev.mysql.com/doc/refman/5.0/en/floating-point-types.html](http://dev.mysql.com/doc/refman/5.0/en/floating-point-types.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-31T09:48:46.537

实际上，这与数据库无关。这是 %d 的 sprintf 行为。

```
%d The argument is treated as an integer and presented as a (signed) decimal number. 
```

# asp.net - asp.net mvc3 用户角色和访问权限

> ID：13231841
> 
> 赞同：2
> 
> 时间：2012-11-05T12:09:41.373
> 
> 标签：asp.net, asp.net-mvc-3, roles

在我的 ASP.NET MVC3 应用程序中，我拥有用户、角色和实体。用户角色将有权访问实体。那么在将用户和角色存储在数据库中时，以下哪个是好方法？

1.  将用户列表存储在实体表中

2.  用户表中的实体 ID。

将来实体的数量可能会增加到 1000,10000，所以我也想考虑性能方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:15:33.277

我认为角色和实体之间的关系是多对多的。一个角色可以有零个或多个实体，一个实体可能属于零个或多个角色。所以创建第三个表来存储那些有 2 列的表，`RoleId`并且`EntityID`

**样本数据看起来像**

```
ROLE_ID        ENTITY_ID
-----------------------------------
1              144
1              146
2              194
4              14
4              194 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:36:39.273

根据应用程序所需的控制粒度，您可能需要考虑在 Windows Identity Foundation (WIF) 中使用的模型，该模型现在是 .NET Framework 4.5 的一部分。这是一个[基于声明的体系结构](http://msdn.microsoft.com/en-us/library/ff423674.aspx)，用于您所称的**Entity**的术语是**Resource**。与您的模型不同的是它们也有**Operation**的概念。一个**资源**可以有很多**操作**，一个典型的**操作**是读、写、执行之类的。这就是更精细的控制粒度的用武之地。

所以在这种情况下，一个特定**资源的****操作**可以有很多**角色**，一个**角色**可以有很多**操作**，需要另一个表来映射这种多对多关系。使用 int 作为**角色**和**操作**中的主键作为对象 ID 有利于性能。 **User**可以有很多**Roles**并且**Roles**会有很多**Users**，因此您将再次需要另一个表来管理这种多对多关系。

 ******所以问题 1 的答案是您不要将**用户**列表存储在**实体**表中。您有一个单独的**User**表，该表映射到**Users-To-Roles**表，该表映射到**Roles**，该表映射到**Roles-To-Operations**，该表映射到一个**Operations**表，该表映射到**Resources**表。如果您不需要**操作**的粒度，请消除该表并通过另一个表将您的**角色**映射到**资源**以处理这种多对多关系。

**问题 2 的答案是否定的，用户**表中不会有**实体**（**资源**）ID 。用户通过我上面描述的关系**映射**到**资源。**

 ******使用此模型和基于声明的体系结构的全部范围的最佳方法是不使用[AuthorizeAttribute将](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)**角色**分配给您的方法，这在过去通常是这样做的。而是将**资源**和**操作**分配给您的方法，从而将您的安全策略与您的应用程序分离。对于这种方法的模型，请查看[ClaimsPrincipalPermissionAttribute](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.claimsprincipalpermissionattribute.aspx)。您可以创建自己的使用此方法的自定义 AuthorizeAttribute。************

# video.js - 将 Video.js 插件重置为初始状态

> ID：13231844
> 
> 赞同：4
> 
> 时间：2012-11-05T12:10:01.603
> 
> 标签：video.js

我正在使用 jquery ui tabs 和[video.js](http://www.videojs.com)。我想在转到另一个选项卡时停止视频，并在返回第二个选项卡时将其重置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-18T12:24:24.827

从 VideoJS v4.6 开始，您可以执行以下操作来重置播放器：

```
player.pause().currentTime(0).trigger('loadstart'); 
```

那`loadstart`是显示海报图像并重新绑定第一个播放事件的关键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T10:11:56.513

你可以用它来展示海报或展示 bigplay 按钮

```
$( '.backlink' ).click( function() {
                // Player (this) is initialized and ready.
            var myPlayer = _V_("video9");
            myPlayer.currentTime(0); // 2 minutes into the video            
            myPlayer.pause();
            myPlayer.posterImage.el.style.display = 'block';
            myPlayer.bigPlayButton.show();
        }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-12T12:15:31.240

它甚至更容易。

```
let player = Video(el);
player.on('ended', () => {
    player.initChildren();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-05T00:09:49.287

```
player.reset(); 
```

生活是简单的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T00:29:24.577

First you need a reference to the video player. [http://videojs.com/docs/api/](http://videojs.com/docs/api/)

```
var myPlayer = _V_("myVideoID"); 
```

Then you can use the API to start/stop/reset the video.

Stop:

```
myPlayer.pause(); 
```

Reset:

```
myPlayer.currentTime(0); 
```

I'm not sure how the jquery tabs are set up, but you might be able to do:

```
$('.my-tab-class').click(function(){
  myPlayer.pause().currentTime(0);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-23T08:04:28.200

获取视频的 id。只需在 _html5_api 后面加上 id，因为 videojs 会附加这些字母，然后您可以使用 pause 并使 currentTime 等于 0。

```
var videoStop = document.getElementById(videoId+"_html5_api");
 videoStop.pause();     
 videoStop.currentTime= 0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-16T02:23:26.697

我正在寻找一种重新初始化 VideoJS 插件的方法，然后我发现了这个：-

```
var player = videojs('my-player');
player.on('ended', function() {
  this.dispose();
}); 
```

只需处理掉视频并重新启动。

来源：- [https://docs.videojs.com/tutorial-player-workflows.html#dispose](https://docs.videojs.com/tutorial-player-workflows.html#dispose)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-19T12:56:34.187

我找到的解决方案是使用 videojs api，调用 reset 函数，然后调用 initChildren 来重建播放器结构，我使用的是 vesion 5.10.7。

```
videojs('sublime_video', {}, function () {
    var videoPlayer = this;
    videoPlayer.width(screen.width / 2);
    videoPlayer.height(720);
    videoPlayer.on("ended", function(){
        videoPlayer.reset().initChildren();
    });
}); 
```

# php - 从 html 字符串中提取价格并转换为 xml

> ID：13231845
> 
> 赞同：1
> 
> 时间：2012-11-05T12:10:05.800
> 
> 标签：php, html, xml

这是我需要提取价格的数据字符串示例。

“价格 475 000 卢比 - 雪佛兰 AVEO LS // 9 月 11 日 6,000 公里 - 红色.. 完整选项.. 手动 5 门 // 掀背车联系我，电话 786 8394”

在爬取特定网站后，我有很多这样的字符串，字符串中可以有任何数字或单词。

我试图用空格分隔每个单词并将其存储在数组 $arr 中。我已经声明了另一个数组来存储价格 $arrPrice 的标识符。如果找到单词 price 或 rs，则数据（例如 475 000）存储在变量 $price 中。然而，由于我已经用空间爆炸了它，它没有考虑到 000 。我在 xml 标记中只得到 475。

这样做的有效方法可能是使用正则表达式，但我不擅长它。如果有人可以帮助我，将不胜感激。

直到现在在我的代码下面找到，

谢谢！

```
 <?php

    foreach($html->find('div.field-content') as $e) {//find the h3 element that contains class field content

    $arrPrice = array("rs", "price","rs."); // an array of identifiers to retrieve price

    $str = $e->innertext;// crawled data from a website
    $str = strtolower($str); //converting string to lower case
    $arr = explode(" ", $str);//creating an array of the string by seperating it from the spaces

    if (strlen($str) > 0) {
        $price='';

        for ($i = 0; $i < sizeof($arr); $i++) {

            //finding price 
            for ($j = 0; $j < sizeof($arrPrice); $j++) {
                if ($arr[$i]==$arrPrice[$j]) {
                    $price = $arr[$i+1];
                    //echo 'Price='.$arr[$i+1];

                }
            }   

        }
        $xml.="<Cars>";
        $xml.="<Price>".$price."</Price>";
        $xml.="</Cars>";
    } 

    else {
        echo "String is blank";
    }

}

$file = fopen('data.xml','w');
if(!$file) {
    die('Error cannot create XML file');
}
fwrite($file,$xml);
fclose($file); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:35:54.440

```
if ( $arr[$i] == $arrPrice[$j] ) {
  $price = $arr[$i+1];
  if ( isset( $arr[$i+2] ) && is_numeric( $arr[$i+2] ) ) {
    $price .= $arr[$i+2];
  }
} 
```

等等..

# wpf - 如何在 WPF 应用程序中嵌入 nancy

> ID：13231846
> 
> 赞同：4
> 
> 时间：2012-11-05T12:10:09.690
> 
> 标签：wpf, nancy

我需要在 WPF 应用程序中托管一个嵌入式 HTTP 服务器，并且我正在考虑使用[Nancy](http://nancyfx.org/)。但是我很难开始。我的要求非常温和，我想做的只是提供一些 HTML 和 JavaScript 并将其显示在 WebBrowser 控件中。

我将如何配置南希来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:21:59.150

只需以与示例应用程序相同的方式使用自主机（[https://github.com/NancyFx/Nancy/tree/master/src/Nancy.Demo.Hosting.Self](https://github.com/NancyFx/Nancy/tree/master/src/Nancy.Demo.Hosting.Self)） - 您可能需要以不同的方式启动它线程虽然在 WPF 中。

# google-maps-api-3 - Google Map API V3 在执行 geocoder.geocode 时使用 Internet Explorer 返回异常“类型错误”

> ID：13231847
> 
> 赞同：1
> 
> 时间：2012-11-05T12:10:14.160
> 
> 标签：google-maps-api-3

最近我开发了一个 Asp.net Web 应用程序，它使用 Google Map API V3 脚本生成街景，传递地址的全景视图。该代码和应用程​​序与 Chrome、FireFox、Safari 完美配合，但在 Internet Explorer 上我遇到了异常

```
 "Type Error : Object doesn't support this property or method "

 while executing the API's ***geocoder.geocode*** function. 
```

我曾尝试在 IE 7 和 8 上运行相同的程序，但都抛出了相同的错误。

* * *

## 代码片段

```
geocoder.geocode({'address': addresstoshow}, function (results, status) {
            //alert(google.maps.GeocoderStatus.OK);
            if (status == google.maps.GeocoderStatus.OK) {
                mapStreetView.setCenter(results[0].geometry.location);

                marker = new google.maps.Marker({
                    position: results[0].geometry.location,
                    map: mapStreetView,
                    animation: google.maps.Animation.DROP,

                    title: results[0].geometry.location.description
                });
                marker.setAnimation(google.maps.Animation.BOUNCE);
                google.maps.event.addListener(marker, 'click', toggleBounce);

                panormacenter = new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng());
                myOptionForPanorama = {
                    position: panormacenter,
                    pov: {
                        heading: 34,
                        pitch: 10,
                        zoom: 1
                    }
                };

                myOptionForPlace = {
                    location: panormacenter,
                    radius: '1000',
                    types: ['lodging']

                }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:10:37.140

该问题与发布的代码无关。

# php - 我在哪里存储 Silex 中的常规配置参数？

> ID：13231850
> 
> 赞同：9
> 
> 时间：2012-11-05T12:10:27.260
> 
> 标签：php, configuration, silex

我有一些通用参数我想在我的应用程序中共享，比如路径信息（“baseurl”）。理想情况下，您会将这些信息存储在 Silex 的什么位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T13:45:37.007

写完这个问题后，我遇到了[`ConfigServiceProvider`](https://github.com/igorw/ConfigServiceProvider)：

您可以将配置数据存储在 json 或 yml 文件中，并通过`$app["name.of.config.var"]`.

还支持在设置时将值动态添加到配置文件的替换。到目前为止，我唯一没有管理的是通过`$app["request"]`api 将 baseurl 注入到配置文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T12:31:27.163

我会把它存储在`Silex\Application`. 它是一个基于 Pimple 的 DI 容器，所以你可以这样做：

```
$app['baseUrl'] = '/'; 
```

由于`$app`几乎到处都可以传递，因此您也可以在任何地方访问它。

# c# - 使用 OLEDB 从文本框插入

> ID：13231853
> 
> 赞同：1
> 
> 时间：2012-11-05T12:10:49.860
> 
> 标签：c#, insert, oracle10g, oledbcommand

我在尝试使用`OLEDB Connection`.

```
strSQL = "INSERT INTO test_table (username,password) " +
"VALUES (@user,@pass)";

objCmd = new OleDbCommand(strSQL, objConnection);
objCmd.Parameters.Add("@user", OleDbType.VarChar, 255).Value =TextBox1.Text.Trim();

objCmd.Parameters.Add("@pass", OleDbType.VarChar, 255).Value= TextBox2.Text.Trim();

// execute the command
objCmd.ExecuteNonQuery();

objConnection.Close();
Label1.Text = "Command run"; 
```

错误是

> 异常详细信息：System.Data.OleDb.OleDbException：处理命令期间发生一个或多个错误。ORA-00936: 缺少表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:14:16.733

我相信你错过了`VALUES`朋友之间的空间。`)`在下面的示例中，我在字段列表中为您添加了一个。

```
strSQL = "INSERT INTO test_table (username,password) " +
"VALUES (@user,@pass)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:15:26.923

尝试像这样设置参数：-

```
objConnection = new OleDbConnection(strConnection);
objConnection.ConnectionString = strConnection;

objConnection.Open();

// set the SQL string
strSQL = "INSERT INTO test_table (username,password) " +
"VALUES (@user,@pass)";
// Create the Command and set its properties
objCmd = new OleDbCommand(strSQL, objConnection);

objCmd.Parameters.AddWithValue("@user", TextBox1.Text);

objCmd.Parameters.AddWithValue("@pass", TextBox2.Text);

// execute the command
objCmd.ExecuteNonQuery();

objConnection.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-22T08:27:30.003

尝试这个 ：

strSQL = "INSERT INTO test_table (username,password)" + "VALUES (?,?)";

使用 OleDb 您需要输入“？” 而不是@param 作为参数

# android - 使高斯滤波器对可变颜色深度具有鲁棒性

> ID：13231855
> 
> 赞同：0
> 
> 时间：2012-11-05T12:11:01.117
> 
> 标签：android, converter, rgb, gaussian

我正在为android编写一个高斯滤波器。

根据本教程的 GaussFilter 示例：[http](http://www.jhlabs.com/ip/blurring.html) ://www.jhlabs.com/ip/blurring.html我正在像这样编辑我的 ALPHA 值

```
alpha += f * ((pixelValue >> 24) & 0xff); 
```

根据这个线程： [对RGB值使用逻辑位移](https://stackoverflow.com/questions/5751689/using-logical-bitshift-for-rgb-values)

```
 (pixelValue >>24 & 0xff); 
```

不等于

```
Color.alpha(pixelValue); 
```

据我所知，Alpha 通道在 RGB 中是可选的。所以这取决于我阅读和编辑 alpha 和 rgb vlaues 的深度。

有很多不同颜色深度的组合，例如：

*   4位无alpha
*   4 位 + 4 位阿尔法
*   24 位，包括 alpha (?)
*   Macintosh 提供 24 位加（或包括？） 8 位 alpha

由于我不知道用户想要处理哪种类型的图像，所以我必须捕获所有组合。我只是使用 Color.Red(value), Color.Green(value) ...但我不确定这最终是否会太慢？我可以在处理之前将每个输入转换为 24 位位图，但这会花费太长时间。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:07:44.217

1.  首先，如果你担心性能，你应该实施它并衡量它。

2.  如果您想要最快的实现，您几乎必须针对每种像素格式对其进行专门化。但很可能你只需要处理一个，见下文。

3.  另一方面，假设您将位图加载为[Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html)类实例，则只有 4 种可能的像素格式，并且`ARGB_8888`可能是您应该关心的唯一一种（也许`RGB_565`也是，但我不希望有这么小的模糊效果比特/像素值）。`ARGB_8888`实际上，根据[BitmapFactory.Options](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inPreferredConfig)文档，位图默认加载配置。换句话说 - 使用标准 Android 的位图处理 API，您不需要进行任何转换，它为您完成 - 只需指定您需要的格式。

4.  事实上`(pixelValue >>24 & 0xff);`和像素格式`Color.alpha(pixelValue);`是等价的`ARGB_8888`，但是它可以做得更好。

使用逻辑移位运算符（相对于`>>`算术移位），您根本不需要`& 0xFF`运算，因为位 31..8 始终为 0。请参阅如何`Color.alpha()`实现：

```
public static int alpha(int color) {
    return color >>> 24;
} 
```

# android - 不能在多台设备上同时运行monkeyrunner脚本（例如两个monkeyrunner进程）

> ID：13231856
> 
> 赞同：2
> 
> 时间：2012-11-05T12:11:03.870
> 
> 标签：android, monkeyrunner

test.py 脚本内容：

```
import ....

device = MonkeyRunner.waitForConnection(10,sys.argv[1])

device.startActivity(component='package/activity')

'''
some monkeyrunner events
''' 
```

我有两个设备，标记为 device1-id 和 device2-id

1.  运行 monkeyrunner test.py device1-id &

2.  运行 monkeyrunner test.py device2-id &

我发现 device2-id 中的一些事件已发送到 device1-id。我不知道为什么？

我注意到一些教程，他们说，如果在更多设备上运行 monkeyrunner，可以编写如下脚本：

```
device1 = MonkeyRunner.waitForConnection(10,device1-id)
device2 = MonkeyRunner.waitForConnection(10,device2-id)

device1.actions

device2.actions 
```

但这不是我需要的。任何人都知道为什么monkeyrunner会这样做？

我需要的是，我有一个脚本，可以同时在多台设备上运行相同的脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:09:02.043

您必须指定猴子端口，因此您可能需要像这样使用命令行参数

```
 # Imports the monkeyrunner modules used by this program
 from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
 import sys

 # Connects to the current device, returning a MonkeyDevice object
 device = MonkeyRunner.waitForConnection(timeOut,"emulator-"+ sys.argv[1])

 MONKEYRunner Actions . . . . 
```

注意：sys.arv[0] 始终是测试文件

通过在命令行中输入以下内容进行调用：

```
 monkeyrunner test.py PortNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T15:50:03.523

我相信 Monkeyrunner 不是线程安全的。

要对此进行测试，请创建 2 个脚本，将 deviceId 硬编码到每个脚本中。启动每个脚本：在 windows 中，使用“start script1”然后“start script2” 在 Unix 中使用“script1 &; script2 &”

请注意，script1 在看起来开始正常工作后失败并出现错误。并且 SCript2 也未能完成它想要做的事情，因为它从两个窗口获取命令。

# iphone - 更改表格视图单元格中图像按钮的位置

> ID：13231857
> 
> 赞同：0
> 
> 时间：2012-11-05T12:11:16.360
> 
> 标签：iphone, ios, uitableview, uibutton

我`UITableView`在每个单元格前面都有一个带有图像的按钮，我想调整它的坐标`UIButton`。写入的相关代码`cellForRow`如下：

```
 UIImage *image = [UIImage imageNamed "unchecked.png"];
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
 CGRect frame1 = CGRectMake(0.0,0.0, image.size.width, image.size.height);** //changing the coordinates here doesn't have any effect on the position of the image button.
 button.frame = frame1; // match the button's size with the image size 
 [button setBackgroundImage:image forState:UIControlStateNormal]; // set the button's target to this table view controller so we can interpret touch events and map that to a NSIndexSet [button addTarget :self action: @selector(checkButtonTapped:event) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:53:33.940

设置视图的框架会设置其相对于其超级视图的位置，因此您需要在设置其框架之前使您的按钮成为单元格的子视图。

然而，这不应该在 cellForRowAtIndexPath 中完成，因为这意味着每次表格视图“重用”一个单元格时，您都会分配一个新按钮。您应该创建按钮，并在初始化表格视图单元格时设置其框架，以便每个单元格只创建一个按钮。

所以你想要的是一个 UITableViewCell 子类，它的 init 方法看起来像这样。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        UIImage *image = [UIImage imageNamed:@"backgroundImage.png"];
        [self addSubview:button];
        [button setFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:23:47.447

的默认布局`UITableViewCell`是 [ `imageView`][ `textLabel`][ `accessoryView`]。你无法改变这一点。

如果您想在您的单元格中任意放置图像，则`UITableViewCell`必须`UIImageView`在单元格的`contentView`.

# c# - 证书存储中证书的私钥不可读

> ID：13231858
> 
> 赞同：11
> 
> 时间：2012-11-05T12:11:27.247
> 
> 标签：c#, certificate, uac, custom-action, private-key

我想我[和这个人](https://stackoverflow.com/questions/1386303/installing-a-certificate-in-a-msi-custom-action-doesnt-work-properly)有同样的问题，但我没有他/她那么幸运，因为提供的解决方案对我不起作用。

`C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys`提供的解决方案在（**不在**子目录中）和（和子目录）上查找文件`C:\Users\[Username]\AppData\Roaming\Microsoft\Crypto\RSA`但是，由于我希望安装程序将应用程序安装到所有用户，自定义操作在`SYSTEM`-User 下运行，这导致文件被实际创建在`C:\ProgramData\Application Data\Microsoft\Crypto\RSA\S-1-5-18`.

当以管理员身份运行“普通”应用程序（右键单击 -> 以管理员身份运行）执行完全相同的代码时，会在`C:\Users\[Username]\AppData\Roaming\Microsoft\Crypto\RSA\S-1-5-21-1154405193-2177794320-4133247715-1000`.

使用 WIX 自定义操作生成的证书似乎没有私钥（“*密钥集不存在*”），而“正常”应用程序生成的证书却有。

查看文件的权限时，它们似乎没问题，即使它们不同（工作的确实包括`SYSTEM`用户），即使在将文件添加`SYSTEM`到（“非工作”）文件之后我也无法阅读私钥，这里同样的错误。

然后我使用[FindPrivateKey](http://msdn.microsoft.com/en-us/library/aa717039.aspx) util 查找相应的文件，但我得到的只是`"Unable to obtain private key file name"`.

好的，这是怎么回事？Windows 在哪里存储用户存储的证书的私钥`SYSTEM`？也许没有创建任何私钥文件？为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T12:23:43.130

我通过谷歌搜索几乎所有东西得到了解决方案......据我所知，有一些事情要做：

1.  生成一个`X509Certificate2`
2.  [确保私钥容器是持久的（不是临时的）](http://support.microsoft.com/kb/950090)
3.  [确保对经过身份验证的用户有访问规则](https://stackoverflow.com/a/4902009/808723)，以便他们可以看到私钥

因此，a 提出的最终代码如下：

```
X509Certificate2 nonPersistentCert = CreateACertSomehow();

// this is only required since there's no constructor for X509Certificate2 that uses X509KeyStorageFlags but a password
// so we create a tmp password, which is not reqired to be secure since it's only used in memory
// and the private key will be included (plain) in the final cert anyway
const string TMP_PFX_PASSWORD = "password";

// create a pfx in memory ...
byte[] nonPersistentCertPfxBytes = nonPersistentCert.Export(X509ContentType.Pfx, TMP_PFX_PASSWORD);

// ... to get an X509Certificate2 object with the X509KeyStorageFlags.PersistKeySet flag set
X509Certificate2 serverCert = new X509Certificate2(nonPersistentCertPfxBytes, TMP_PFX_PASSWORD,
    X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.Exportable); // use X509KeyStorageFlags.Exportable only if you want the private key to tbe exportable

// get the private key, which currently only the SYSTEM-User has access to
RSACryptoServiceProvider systemUserOnlyReadablePrivateKey = serverCert.PrivateKey as RSACryptoServiceProvider;

// create cspParameters
CspParameters cspParameters = new CspParameters(systemUserOnlyReadablePrivateKey.CspKeyContainerInfo.ProviderType, 
    systemUserOnlyReadablePrivateKey.CspKeyContainerInfo.ProviderName, 
    systemUserOnlyReadablePrivateKey.CspKeyContainerInfo.KeyContainerName)
{
    // CspProviderFlags.UseArchivableKey means the key is exportable, if you don't want that use CspProviderFlags.UseExistingKey instead
    Flags = CspProviderFlags.UseMachineKeyStore | CspProviderFlags.UseArchivableKey,
    CryptoKeySecurity = systemUserOnlyReadablePrivateKey.CspKeyContainerInfo.CryptoKeySecurity
};

// add the access rules
cspParameters.CryptoKeySecurity.AddAccessRule(new CryptoKeyAccessRule(new SecurityIdentifier(WellKnownSidType.AuthenticatedUserSid, null), CryptoKeyRights.GenericRead, AccessControlType.Allow));

// create a new RSACryptoServiceProvider from the cspParameters and assign that as the private key
RSACryptoServiceProvider allUsersReadablePrivateKey = new RSACryptoServiceProvider(cspParameters);
serverCert.PrivateKey = allUsersReadablePrivateKey;

// finally place it into the cert store
X509Store rootStore = new X509Store(StoreName.My, StoreLocation.LocalMachine);
rootStore.Open(OpenFlags.ReadWrite);
rootStore.Add(serverCert);
rootStore.Close();

// :) 
```

# silverlight-4.0 - silverlight 数据分页器和存储过程

> ID：13231862
> 
> 赞同：0
> 
> 时间：2012-11-05T12:11:46.680
> 
> 标签：silverlight-4.0

有没有办法在服务器端使用标准数据分页器（绑定到 DomainDataSource）获取当前页面（以便将其传递给存储过程）？Silverlight 4.0，2010 年 4 月工具包，ria 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:11:17.117

我找到了一个：在你的`LinqToEntitiesDomainService`类中 override`public override System.Collections.IEnumerable Query(QueryDescription queryDescription, out IEnumerable<ValidationResult> validationErrors, out int totalCount)` 然后提取 take 和 skip from`queryDescription.Query.ToString()`和 return `this.ObjectContext.YourStoredProcedure(with paging params)`。但是，您也必须手动处理排序（叹气）。

# sql - SELECT 将值引用到子查询

> ID：13231865
> 
> 赞同：0
> 
> 时间：2012-11-05T12:12:03.200
> 
> 标签：sql, subquery

我正在尝试从我的表中获取随机 id 值。条件是相同id不同语言的选择值不能存在（语言为`lang`字段）

**我这样做：**

```
SELECT id_v as p,cont FROM value_phrase WHERE lang=1 AND
NULL IN (SELECT cont FROM value_phrase WHERE id_v=p AND lang=2)
ORDER BY RAND() LIMIT 0,1 
```

...但我没有得到任何结果（这一定是我的查询中有错误，因为有很多行满足*所需*的条件。）我应该如何解决它？

- 解决了 -

解决方案是使用 NOT EXISTS 而不是 NULL IN，并使用表别名将第一个 id_v 引用到子查询中。这样（感谢 Mark Byers）：

```
SELECT first.id_v, first.cont
FROM value_phrase AS
FIRST WHERE lang =1
AND NOT
 EXISTS (
 SELECT cont
 FROM value_phrase
 WHERE id_v = first.id_v
 AND lang =2
 )
ORDER BY RAND( )
LIMIT 0 , 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:13:48.550

如果要检查值是否不存在，请使用`NOT EXISTS`.

```
AND NOT EXISTS (SELECT ... ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:24:17.983

您的条件`NULL IN (...)`将**永远不会**返回任何内容，因为与`NULL`总是返回的比较`NULL`在查询条件中被视为“假”。

# java - Java Richfaces TreeNode 子计数

> ID：13231871
> 
> 赞同：0
> 
> 时间：2012-11-05T12:12:25.217
> 
> 标签：java, richfaces, treenode

我需要一个解决方案来解决我试图解决的问题。我有一些廉价的解决方法来满足我的需求，但我希望有更好的解决方案。

所以有什么问题？

我有一个将 TreeNode 处理为 java 方法的事件。这个树节点的处理取决于它是否有孩子。

我需要的是获取这些子节点的数量。（或者也许有人知道如何遍历子节点）

基本上有了计数，我可以为每个孩子创建一个 for 循环（因为 TreeNode 得到了方法 .getChild(param)）

Treenode 在 org.richfaces.model 中；包裹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:54:38.947

您可以遍历子节点，[TreeNode](http://docs.jboss.org/richfaces/latest_4_2_X/javadoc/richfaces-components-api/org/richfaces/model/TreeNode.html)有方法 getChildrenKeysIterator() 。

# awk - 用于模拟的 awk 脚本

> ID：13231872
> 
> 赞同：-2
> 
> 时间：2012-11-05T12:12:26.697
> 
> 标签：awk

嗨，朋友们晚上好，我是 awk 的初学者，所以我请求你帮助我，我想在文本文件中打印记录总数（行）。为此，我使用“打印 NR”命令。当我使用这个时BEGIN 块上的命令它打印记录数而不是打印总数。但是当我们在 END 块中使用它时，它会返回记录总数。例如，我有一个包含 5 列的文本文件，我尝试过这样 BEGIN { print NR } 它返回 1 2 3 4 5

我想从 BEGIN 块本身打印记录总数（行），所以请给我答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:25:52.903

NR 在读取文件时填充/递增，BEGIN 在打开任何文件之前执行，因此您具体要求的内容无法完成。

一种解决方法是：

```
awk 'BEGIN{ while ( (getline var < ARGV[1] > 0) ) nr++; print nr }' file 
```

但在 UNIX 上，如果您的记录是换行符分隔的，则有更简单的方法，例如：

```
awk -v nr="$(wc -l < file)" 'BEGIN{ print nr }' file 
```

也只是在 awk 你可能会得到你想要使用的输出：

```
awk 'NR!=FNR && FNR==1 { print NR - FNR }' file file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:19:16.873

`BEGIN`块将在逐行开始文件处理之前执行。因此您无法获得`BEGIN`块中的总记录。

它必须以某种奇怪的方式完成，如下所示：

```
awk 'BEGIN{"wc -l "FILENAME|getline result;print result}' your_file 
```

这里上面的字面意思是 awk 什么都不做。它实际上是在做大部分事情的外壳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:20:34.703

您需要传递一个变量才能访问块中的记录/行数`BEGIN`，因为该`BEGIN`块是在处理文件之前执行的：

```
awk -v count="$(wc -l < file.txt)" 'BEGIN { print count }' file.txt 
```

# c++ - Qt 的事件循环是 FIFO 吗？

> ID：13231878
> 
> 赞同：1
> 
> 时间：2012-11-05T12:12:50.097
> 
> 标签：c++, qt

当您将信号发送到不是 GUI 线程的线程（例如来自套接字线程）时，该信号将在接收者线程的事件循环中排队。（我相信这一点，如果我错了，请告诉我）

我想知道这个队列是否是 FIFO ？我用谷歌找不到。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:20:59.610

在 Google 上有 5,820,000 个结果`qt signal queue fifo`，第一个在其结果摘要中包含来自 Qt 文档的以下措辞：

> 队列是先进先出 (FIFO) 结构。

因此，在他们使用术语“队列”的地方，它们确实意味着 FIFO，正如这个词所暗示的那样。

这也很容易为自己测试。

# java - 客户端服务器通信java

> ID：13231880
> 
> 赞同：1
> 
> 时间：2012-11-05T12:12:55.803
> 
> 标签：java, sockets, client-server

我在客户端-服务器应用程序中遇到问题。客户端向服务器发送图片，服务器以回复消息进行响应。

这是我的服务器代码：

```
public class Server
{
    public static void main(String[] args) throws Exception
    {
        String response="response";
        ServerSocket socket = new ServerSocket(3333);
        while (true)
        {
            Socket clientSocket = socket.accept();

            DataInputStream dis = new DataInputStream(clientSocket.getInputStream());
            FileOutputStream fout = new FileOutputStream("output.jpg");
            int i;
            while ( (i = dis.read()) > -1) 
                fout.write(i);    

            DataOutputStream outToClient= new    DataOutputStream(clientSocket.getOutputStream());

            outToClient.writeBytes(response);

            fout.flush();
            fout.close();
            dis.close();
            outToClient.close();
            clientSocket.close();
        }
    }
} 
```

客户：

```
public static void main(String[] args) throws Exception
{
    // TODO Auto-generated method stub
    String sentence;
    int i;
    FileInputStream fis = new FileInputStream ("pathphoto.jpg");   
    Socket sock = new Socket ("hostname",3333);
    DataOutputStream os = new DataOutputStream(sock.getOutputStream());
    System.out.println("Sending....");
    while ((i = fis.read()) > -1)
        os.write(i);

    BufferedReader inFromServer= new BufferedReader(new InputStreamReader(sock.getInputStream()));
    sentence=inFromServer.readLine();
    System.out.println("FROM SERVER: " + sentence);
    fis.close();
    os.close();
    sock.close();
}
} 
```

问题是客户端没有收到来自服务器的响应，我认为是这样的：

```
BufferedReader inFromServer= new BufferedReader(new InputStreamReader(sock.getInputStream()));
sentence=inFromServer.readLine(); 
```

因为没有它们，服务器会发送响应。

关于如何解决它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:41:33.013

它没有卡在*BufferedReader*中，它实际上卡在了 *while ((i = fis.read()) > -1)**因为* 您的客户端从未告诉服务器流的长度，或者关闭的流服务器将尝试从输入流中读取下一个字节并将当客户端完成发送文件并等待服务器响应时卡住。

当您删除代码以从服务器读取响应时，客户端继续并关闭所有流，在这种情况下，服务器读取 -1 并继续。

# c# - 未检查 MEF 插件依赖项未加载为插件目录

> ID：13231883
> 
> 赞同：7
> 
> 时间：2012-11-05T12:13:10.890
> 
> 标签：c#, .net, mef, .net-assembly

我遇到了 MEF 没有为加载的组件获取依赖项的问题。我们有一个目录结构，如下所示：

C:/MSMQ/DistributionService/【主要应用】

C:/MSMQ/Providers/[插件组件]

当然，我们使用的是 DirectoryCatalog，插件被拾取，但它的一个依赖项不是。错误信息是：

```
2012-11-02 10:46:59,379 [1] FATAL - Assemblies required by Provider are not found
System.IO.FileNotFoundException: Could not load file or assembly 'BusinessObjects, Version=1.5.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.
File name: 'BusinessObjects, Version=1.5.0.0, Culture=neutral, PublicKeyToken=null'

=== Pre-bind state information ===
LOG: User = <redacted>
LOG: DisplayName = BusinessObjects, Version=1.5.0.0, Culture=neutral, Public
KeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/MSMQ/DistributionService/
LOG: Initial PrivatePath = NULL
Calling assembly : DistributedServicePropertyComponents, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\MSMQ\DistributionService\Distr
ibutionService.exe.Config
LOG: Using host configuration file:
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\
v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partia
l, or location-based assembly bind).
LOG: The same bind was seen before, and was failed with hr = 0x80070002.

2012-11-02 10:46:59,401 [1] FATAL - Assemblies required by Provider are not found
System.IO.FileNotFoundException: Could not load file or assembly 'BusinessObjects, Version=1.5.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.
File name: 'BusinessObjects, Version=1.5.0.0, Culture=neutral, PublicKeyToken=null'

=== Pre-bind state information ===
LOG: User = B2B\addisona
LOG: DisplayName = BusinessObjects, Version=1.5.0.0, Culture=neutral, Public
KeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/MSMQ/DistributionService/
LOG: Initial PrivatePath = NULL
Calling assembly : DistributedServicePropertyComponents, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\MSMQ\DistributionService\DistributionService.exe.Config
LOG: Using host configuration file:
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\
v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: The same bind was seen before, and was failed with hr = 0x80070002. 
```

我相信这类似于 MSDN 上的一个问题： http: [//social.msdn.microsoft.com/Forums/en-US/MEFramework/thread/b34ef4f4-e1f1-4f06-bd42-d7b3d5060f6f/](http://social.msdn.microsoft.com/Forums/en-US/MEFramework/thread/b34ef4f4-e1f1-4f06-bd42-d7b3d5060f6f/) - 但我不明白答案。

有没有什么方法可以提供一个路径来解决问题，或者任何其他建议的解决方案？

我们最近才开始遇到这个问题，但我看不到任何我希望在我们的源代码控制历史记录中导致该问题的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:09:41.397

您的一个或多个插件依赖于`BusinessObjects`程序集，而您的主机应用程序不引用此程序集。您可以执行以下任一操作来解决此问题：

1.  从您的主应用程序中添加对此程序集的引用，以便插件在加载时可以使用它。
2.  将此程序集添加到您的**C:\MSMQ\Providers**目录，以便在加载插件并查找该程序集时，它们也可以找到并加载它。

# sql - 我怎样才能加快这个 SQL 查询

> ID：13231884
> 
> 赞同：1
> 
> 时间：2012-11-05T12:13:11.840
> 
> 标签：sql, sql-server

我在 ASP.NET 应用程序中有一段代码，它从参数列表构建 SQL 查询。参数的数量可能会有所不同，因此可以将各种条件添加到此查询中。数据库是 Microsoft SQL Server 2008。

所有 AND 和 OR 都是以编程方式生成的。

该查询的执行时间超过 3 秒，但经过一些分析和索引后，它的运行时间不到一秒。我仍然认为查询本身可以优化。我看过执行计划，但这对我来说意义不大——不是 SQL 专家。

我想知道查询是否可以以更智能的方式完成 - 我无法弄清楚。下面是一个查询示例：

```
 SELECT [id], [WorkTitle], [CreateDate], [UpdateDate], [Writer], [ValidFrom], 

[ValidTo], [Text] 
 FROM dbo.Texts T  
 WHERE Category_id = 3 AND '2012-11-06' BETWEEN ValidFrom AND ValidTo  
 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 1 AND CL.Value = '95068')       
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 1))  

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 2 AND CL.Value = 'C')       
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 2))  

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 3 AND CL.Value = 'HEL')       
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 3))  

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 4 AND CL.Value = 'CC')      
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 4))  

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 5 AND CL.Value = NULL)     
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 5))  

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 7 AND CL.Value = '321')      
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 7))  

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 9 AND CL.Value = 'DK7778')    
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 9))  

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 10 AND CL.Value = 'TFS')   
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 10)) 

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 11 AND CL.Value = 'TMP')   
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 11)) 

 AND (EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id   AND CL.Criteria_id = 13 AND CL.Value = 'OY-VKB')   
    OR NOT EXISTS (SELECT 'X' FROM dbo.Criteria_List CL WHERE T.id = CL.Text_id AND CL.Criteria_id = 13)) 
```

任何提示和技巧表示赞赏。

干杯詹斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:56:37.977

*   对于表`Texts`，我会在 上添加一个索引`(Category_id, ValidFrom) INCLUDE (ValidTo)`，如果没有的话。（如果您已经在 any`(Category_id, ValidFrom, ValidTo)`或 on 上有索引`(Category_id, ValidFrom)`，它们也可能非常好。

*   对于`Criteria_List`表来说，一个索引`(Text_id, Criteria_id, Value)`可能足以让优化器产生一个好的执行计划。

    第二个选项（或者甚至更好，您必须使用表大小和分布来测试执行计划和运行时间）将是两个索引，一个 on`(Criteria_id, Text_id)`和一个 on `(Criteria_id, Value, Text_id)`。

* * *

您可以像这样重写 10 个条件 - 但无论如何都应该注意索引：

```
 WHERE Category_id = 3 AND '2012-11-06' BETWEEN ValidFrom AND ValidTo  
 AND NOT EXISTS ( SELECT 'X' FROM dbo.Criteria_List CL 
                  WHERE T.id = CL.Text_id AND CL.Criteria_id = 1 
                    AND (CL.Value <> '95068' OR CL.Value IS NULL)
                ) 
 AND NOT EXISTS ( SELECT 'X' FROM dbo.Criteria_List CL 
                  WHERE T.id = CL.Text_id AND CL.Criteria_id = 2 
                    AND (CL.Value <> 'C' OR CL.Value IS NULL)
                ) 
 ...
 AND NOT EXISTS ( SELECT 'X' FROM dbo.Criteria_List CL 
                  WHERE T.id = CL.Text_id AND CL.Criteria_id = 5 
                    AND (CL.Value IS NOT NULL)
                ) 
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:29:21.313

我建议的一件事是更改您的数据库设计，以便您可以识别 CriteriaList.value 记录，而不是按原样列出它们。这将使您的查询更加灵活，并意味着您应该能够摆脱所有或大部分存在/不存在的问题，并可能加快您的查询速度。

# android - android包名格式

> ID：13231888
> 
> 赞同：1
> 
> 时间：2012-11-05T12:13:26.363
> 
> 标签：android, android-sdk-tools

Android 包名称是否必须包含三个部分，例如：net.test.package

或者也可以手动更改为例如：test.package

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T12:15:35.897

从技术上讲，包名可以是任何名称，但强烈建议您使用反向域名格式，例如。如果您的网站是`http://luc.com`您会使用`com.luc.appname`的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:19:48.473

是的。它可以是 Any，如果您想更改，您可以随时设置。

它实际上根据您的要求。

**如果您想更改，请参阅：**

```
GO TO Project > src > Package Dir > 
Right Click > Refactor  > Rename 
```

**或者**

```
GO TO Project > src > Package Dir > 
F2 > Set New Package Name. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:18:37.090

包名称用于您的应用程序的唯一标识。在 android 中，使用包名来确定是否安装了一个应用程序。一般命名为：com.companyname.applicationname eg：com.android.Camera

包名称包含三个部分不是强制性的。您可以根据自己的要求进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:20:37.910

本身没有严格的约定。但是遵循约定总是好的（恕我直言）。Android 原则上遵循 Java 的包命名约定。您可以在以下网站获得更多信息：

1.  [http://www.quora.com/Android-OS/Why-do-a-majority-of-Android-package-names-begin-with-com](http://www.quora.com/Android-OS/Why-do-a-majority-of-Android-package-names-begin-with-com)
2.  [http://en.wikipedia.org/wiki/Java_package#Package_naming_conventions](http://en.wikipedia.org/wiki/Java_package#Package_naming_conventions)

**免责声明**：以上内容来自此处的答案：[https](https://stackoverflow.com/a/6273935/450534) ://stackoverflow.com/a/6273935/450534 。所有功劳归功于[Jimmy Huch](https://stackoverflow.com/users/663341/jimmy-huch)的出色回答。做，投票赞成他的答案。;-)

编辑：是的，您可以在创建项目后重命名您的包。可能会抛出一些错误，但一些简单的导入将修复它们。话虽如此，最好还是决定某件事并坚持下去。让生活轻松一点。

# php - 如何使用 PHP 将值从 Excel 加载到表中

> ID：13231889
> 
> 赞同：-2
> 
> 时间：2012-11-05T12:13:26.753
> 
> 标签：php, excel, import

有没有办法使用 PHP 将 MS Excel 中的值加载到数据库表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:16:46.390

如果您仍想直接从 PHP 加载 XLS，则可以。 [`http://sourceforge.net/projects/phpexcelreader/](http://sourceforge.net/projects/phpexcelreader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:02:19.983

您还可以以 .csv 格式保存 excel 文件并查看以下内容：http: [//php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

```
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?> 
```

我提供的示例打开文件并回显文件的内容。

[活生生的例子](http://scriptit.kotisivut.name/test/)

实例内容：

```
5   7   12
6   8   14
7   9   16
8   48  56
9   8   17
10  4   14 
```

第三行是`=A1+B1`，`=A2+B2`依此类推...

# asp.net - 打开我的项目时在 asp.net c# 中出现错误

> ID：13231890
> 
> 赞同：2
> 
> 时间：2012-11-05T12:13:28.943
> 
> 标签：asp.net

我刚刚在 asp.net c# 中创建了一个项目，同时将我的项目传输到我的客户端我遇到了这个错误“使用注册为 allowDefinition='MachineToApplication' 超出应用程序级别的部分是错误的。这个错误可能是由虚拟目录未配置为 IIS 中的应用程序。”

如何克服这个问题..请指导我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:36:50.937

当您将完整的 web.config 放在子目录中而不是在站点的根目录中时，这是一个错误。

所以我说你已经将你的网站复制到一个子目录中，你需要将它移动到你网站的根目录。

# image - 下载时图像 blob 不可读（php）

> ID：13231891
> 
> 赞同：4
> 
> 时间：2012-11-05T12:13:31.937
> 
> 标签：image, header, download, blob, gmagick

我有一个程序，图像在 MySQL 数据库中存储为 blob，除了我的下载链接外，它运行良好。它按应有的方式下载，并且大小也合适，但图像不显示。

上传时，这主要是图像的处理方式：

```
$image = $_FILES['image']['tmp_name'];

$data = file_get_contents($image); 
```

然后我使用 PDO 进行 MySQL 连接：

```
$q->bindParam(2, $data, PDO::PARAM_LOB); 
```

这在使用 base64 时效果很好。

```
$image = new Gmagick();
$image->readimageblob($data);
<img src="data:image/'.$ext.';base64,'.base64_encode($image->getimageblob()).'" />'; 
```

但这是我的问题。

```
header('Content-Disposition: attachment; filename='.$regnr.'-'.$id.'.'.$ext;
header("Content-type: image/$ext");
header("Content-length: $size");
echo $data; 
```

我也尝试过回显 $image->getimageblob(); 等等......以及其他一些标题。但是结果是一样的，图片下载了，大小和格式都是正确的，但是我看不懂。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:45:50.853

我找到了答案。我想我用了大约 15 个小时。

虽然，如果有人想知道，解决方案很简单：

```
 ob_clean(); 
```

输出前。

# sql - 基于单独单词的 SQL 搜索查询

> ID：13231892
> 
> 赞同：2
> 
> 时间：2012-11-05T12:13:33.927
> 
> 标签：sql, search

我目前有一个基于接收参数搜索字符串（例如“Netgear WiFI Switch”）设置的 SQL 存储过程，该存储过程然后对此.ie 进行通配符 LIKE 搜索

```
WHERE COL1 LIKE '%Netgear WiFi Switch'% 
```

这很好用，但是我想通过搜索任何单词来详细说明这一点。例如，示例查询会因为顺序不同而错过显示“Netgear Switch WiFi”的产品。

所以我需要拆分单词并对每个单词进行通配符搜索。（%Netgear% 和 %Switch% 和 %WiFi%）

所以我的问题是我将如何开始考虑将字符串拆分为必要的单词，将这些应用于变量，然后根据从搜索字符串的拆分中创建了多少变量来执行动态 WHERE。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:23:41.427

您可以使用 sql server FULLTEXT 搜索，这将非常简单高效。如果您不喜欢启用全文搜索，请使用以下查询，它将为您提供基本的方法

```
DECLARE @keyword varchar(100)='Project'
-- remove double spaces
 while CHARINDEX('  ',@keyword) > 1            
  begin            
     SET @keyword=REPLACE(@keyword,'  ',' ')            
  end   
SET @keyword=REPLACE(@keyword,' ','%'' AND COL1 LIKE ''%')+'%'''
DECLARE @str varchar(max)=''
SET @str='SELECT  COL1 FROM dbo.table 
WHERE COL1 Like ''%'+ @keyword

EXEC (@str) 
```

您可以使用 execute_sql 而不是 exec

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:35:29.607

我将创建一个 t-sql 函数，该函数采用该短语（一组单词）并将其按空格分隔，然后根据您的算法搜索该列文本值。这样，您仍然可以将逻辑嵌入到 where 子句中。它是抽象的，因此该函数可以在代码的其他区域中重用。

这可能适用于简单的搜索。搜索多个单词可能会更难，您需要进行硬编码查找。索引不会起作用，因为在每次行迭代时都会评估函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T12:27:06.230

我建议您使用 Lucene 或 Solr 进行搜索。在通过使用文本索引来处理这些单词组合时，它们比使用 SQL 查询要高效得多。如果您仍想在 SQL 中搜索文本，更好的解决方案是使用布尔搜索：

[布尔全文搜索](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)

您可以将字符串拆分为多个单词标记。然后，您可以消除所有常用词（只有 2 个字符或更少或非常常用的词，如 "for"、"with" 等）。之后，您可以使用 + 或 - 运算符进行查询。另一个优化是存储经常搜索的短语。但这可能超出了您的问题范围。希望能帮助到你 ：）

# python - OS X 上的 Python：获取本地日期时间模式

> ID：13231895
> 
> 赞同：3
> 
> 时间：2012-11-05T12:13:37.680
> 
> 标签：python, macos

有没有人设法在 OS X 上使用语言环境来导出默认的本地日期和时间格式？（我需要在各种语言环境中解析简单的日期和时间）。

目前，我正在求助于 osascript ...</p>

```
from subprocess import Popen, PIPE

cmd = "osascript -e " + """'
    tell (current date)
        set {its year, its month, its day} to {2001, 2, 3}
        set {its hours, its minutes, its seconds} to {4, 5, 6}
        return its short date string & tab & its time string
    end tell'"""

str_date, err_num = Popen(cmd, shell=True, \
    stdin=PIPE, stdout=PIPE, stderr=PIPE).communicate()

str_date, _, str_time = str_date.rpartition('   ')
str_date_pattern = str_date.replace('2001', '%Y').replace('02', '%m').replace('03','%d')
str_time_pattern = str_time.replace('04', '%H').replace('05', '%M').replace('06', '%S').rstrip() 
```

它返回类似：

```
'%d/%m/%Y', '%H:%M:%S' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:16:52.093

为什么不使用这个[`python-dateutil`包](http://pypi.python.org/pypi/python-dateutil)呢？

它的[`parse`功能](http://labix.org/python-dateutil#head-c0e81a473b647dfa787dc11e8c69557ec2c3ecd2)可以处理大多数格式*，而*无需配置格式：

```
>>> from dateutil.parser import parse
>>> parse('03/02/2001 04:05:06')
datetime.datetime(2001, 3, 2, 4, 5, 6) 
```

或者，您可以尝试通过以下命令翻译可用的[ICU 格式字符串：](http://userguide.icu-project.org/formatparse/datetime)`defaults read`

```
$ defaults read .GlobalPreferences AppleICUDateFormatStrings
{
    1 = "yyyy/M/d";
}
$ defaults read .GlobalPreferences AppleICUTimeFormatStrings
{
    1 = "kk:mm ";
    2 = "kk:mm:ss ";
    3 = "kk:mm:ss  z";
    4 = "kk:mm:ss  v";
} 
```

`Language & Text`这些是通过配置面板配置的区域设置。

# javascript - 数组值没有被方法改变

> ID：13231897
> 
> 赞同：0
> 
> 时间：2012-11-05T12:13:45.277
> 
> 标签：javascript

不是 js 专家，所以这可能是一个愚蠢的问题，但是......

为什么日志显示数组发生了变化？我希望数组仍然是 [0,0]，因为该方法是在 console.log 之后调用的。另外，如果我尝试像这样替换整个数组：

```
this.my_array = [1,0]; 
```

日志仍将显示 [0,0]，这对我来说更有意义。这是怎么回事？

```
function Y() {        
  this.my_array = [0,0];            
  this.changeIt = function() {
    this.my_array[0] = 1;
  };
}

var z = new Y;
console.log(z.my_array);
z.changeIt(); 
```

​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T12:20:08.783

在某些浏览器（例如 Chrome）中，会显示阵列`console.log`的*实时*交互式显示，而不是时间点快照。因此，如果您在运行后查看控制台，则它已因更改而更新。`console.log`当您在控制台面板中以交互方式使用 Chrome 时，与在脚本中使用它时，Chrome 所做的事情也略有不同。

如果您改为显示字符串，您将看到您所期望的：

```
var z = new Y;
console.log(z.my_array.join(", "));
z.changeIt(); 
```

这显示了您期望的时间点快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:23:07.183

它对我有用：http: [//jsfiddle.net/LyhgW/](http://jsfiddle.net/LyhgW/)

编辑：我正在使用的事实`alert`使此代码有效。这适用于控制台中 Chrome 的实时功能，而是显示快照。

# java - W/dalvikvm(978)：threadid=1：线程以未捕获的异常退出（组=0x40a13300）

> ID：13231900
> 
> 赞同：1
> 
> 时间：2012-11-05T12:13:49.207
> 
> 标签：java, android, exception

该代码已与 arraylist 一起使用。一旦更改为 arraylist 对象类遇到异常问题。

> > W/dalvikvm(978)：threadid=1：线程以未捕获的异常退出（组=0x40a13300）

```
package com.example.dodolist;
import java.util.Date;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.content.Context;
import android.content.Intent;
import android.widget.AdapterView;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Spinner;
import android.widget.ArrayAdapter;
import java.util.ArrayList;

public class Main extends Activity {

Button button;
private ListView mListView;
ArrayList<Task> mArrList;

@SuppressWarnings("unchecked")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mArrList = new ArrayList<Task>();
    addListenerOnButton();

    Bundle b =  getIntent().getExtras();

    if(b != null)
    {
        mArrList = (ArrayList<Task>) b.getSerializable("mArrList");

        //Initialize the UI components
        mListView = (ListView) findViewById(R.id.listView);
        ArrayAdapter<Task> adapter = new ArrayAdapter<Task>(this, android.R.layout.simple_list_item_1, mArrList);
        mListView.setAdapter(adapter);

    }
}

public void addOverAllTasks(String task) {

    //Initialize the UI components
    mListView = (ListView) findViewById(R.id.listView);
    final Context context = this;

    //Object Class
    //Date currentDate = new Date();
    Task newTask = new Task(task);

    mArrList.add(newTask);

    //refresh the view
    ArrayAdapter<Task> adapter = new ArrayAdapter<Task>(this, android.R.layout.simple_list_item_1, mArrList);
    mListView.setAdapter(adapter);

    mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            Intent intent = new Intent(context, AddTask.class);

            intent.putExtra("mArrList", mArrList);
            intent.putExtra("arrIndex", position);
            startActivity(intent);
        }

    });

}

public void addListenerOnButton() {

    button = (Button) findViewById(R.id.AddTaskBtn);
    button.setOnClickListener(new OnClickListener () {

        @Override
        public void onClick(View v) {

            //store your new task title
            EditText edit_text = (EditText)findViewById(R.id.AddTaskBox);

            Globals g = Globals.getInstance();
            String taskName = edit_text.getText().toString(); // gets the data into string
            g.setData(taskName);

            //Add Tasks into array
            addOverAllTasks(edit_text.getText().toString());

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void Spinner() {

    Spinner spinner = (Spinner) findViewById(R.id.actionBar);

    //Create an ArrayAdapter using the string array and a default spinner layout

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
 R.array.actionBar_array, android.R.layout.simple_spinner_item);

    //Specify the layout to use when the list of choices appears

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    //Apply the adapter to the spinner

spinner.setAdapter(adapter);
}
} 
```

这是一个例外：

```
11-05 20:07:16.156: W/dalvikvm(978): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-05 20:07:16.206: E/AndroidRuntime(978): FATAL EXCEPTION: main
11-05 20:07:16.206: E/AndroidRuntime(978): java.lang.RuntimeException: Parcel: unable to marshal value uy
11-05 20:07:16.206: E/AndroidRuntime(978): at android.os.Parcel.writeValue(Parcel.java:1235)
11-05 20:07:16.206: E/AndroidRuntime(978): at android.os.Parcel.writeList(Parcel.java:622)
11-05 20:07:16.206: E/AndroidRuntime(978): at android.os.Parcel.writeValue(Parcel.java:1195)
11-05 20:07:16.206: E/AndroidRuntime(978 
```

# ios - iOS 6 Facebook“操作无法完成。”

> ID：13231903
> 
> 赞同：1
> 
> 时间：2012-11-05T12:14:01.373
> 
> 标签：ios, facebook, cocoa-touch, ios6

我在我的应用程序中使用 Facebook API。在 iOS 6 上，通过 fb 登录时出现此错误：

```
'The operation couldn’t be completed.' 
```

经过研究，显然，我需要在 Facebook 应用程序设置页面中设置我的捆绑包 ID。但是我在该页面上的任何地方都找不到该字段。有人能准确告诉我它在哪里/叫什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:27:17.197

您可以选择 Native iOS App 部分，您可以在其中找到 Bundle ID

# php - 如何将当前目录更改为另一个目录

> ID：13231904
> 
> 赞同：1
> 
> 时间：2012-11-05T12:14:04.040
> 
> 标签：php, file, include, directory

![在此处输入图像描述](../Images/2b123a77c8e32897713e4482f131e93f.png)

如图所示，我想将当前目录中的一些文件包含/上传到另一个目录。如果我这样做

```
 1\. $currdir = getcwd();      
    2\. chdir('/home');
    3\. echo '<br/>'.getcwd();       
    4\. chdir('/home/second/');
    5\. echo '<br/>'.getcwd();       
    6\. $dirs = array_filter(glob('*'), 'is_dir');
    7\. print_r($dirs);
    8\. chdir($currdir); 
```

它正确显示子目录列表

但是如果我将第 4 行更改为 chdir('/home/ **first** /'); 它给了我空数组。

我如何从这样的目录结构中读取/包含/上传文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:16:43.513

您可以使用名为 system('Cd /home/First/Publich_Html'); 或 chdir('../home/second/');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:16:02.710

你可以使用

```
chdir('../home/second/'); 
```

# c# - 如何从 C# 中的 Python 脚本调用特定方法？

> ID：13231913
> 
> 赞同：17
> 
> 时间：2012-11-05T12:14:38.823
> 
> 标签：c#, python, methods, arguments, ironpython

我想知道是否有可能通过 C# 项目从 Python 脚本调用特定的方法。

我没有代码......但我的想法是：

蟒蛇代码：

```
def SetHostInfos(Host,IP,Password):
   Work to do...

def CalcAdd(Numb1,Numb2):
   Work to do... 
```

C#代码：

```
SetHostInfos("test","0.0.0.0","PWD")
result = CalcAdd(12,13) 
```

如何通过 C# 从这个 Python 脚本调用其中一种方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-05T22:36:01.807

您可以托管 IronPython、执行脚本并通过创建的范围访问脚本中定义的函数。

以下示例显示了 C# 中使用该函数的基本概念和两种方法。

```
var pySrc =
@"def CalcAdd(Numb1, Numb2):
    return Numb1 + Numb2";

// host python and execute script
var engine = IronPython.Hosting.Python.CreateEngine();
var scope = engine.CreateScope();
engine.Execute(pySrc, scope);

// get function and dynamically invoke
var calcAdd = scope.GetVariable("CalcAdd");
var result = calcAdd(34, 8); // returns 42 (Int32)

// get function with a strongly typed signature
var calcAddTyped = scope.GetVariable<Func<decimal, decimal, decimal>>("CalcAdd");
var resultTyped = calcAddTyped(5, 7); // returns 12m 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T13:07:08.033

我找到了一种类似的方法，使用它调用该方法要容易得多。

C#代码如下：

```
IDictionary<string, object> options = new Dictionary<string, object>();
options["Arguments"] = new [] {"C:\Program Files (x86)\IronPython 2.7\Lib", "bar"};

var ipy = Python.CreateRuntime(options);
dynamic Python_File = ipy.UseFile("test.py");

Python_File.MethodCall("test"); 
```

所以基本上我提交带有我想在我的python文件中定义的库路径的字典。

因此 PYthon 脚本如下所示：

```
#!/usr/bin/python

import sys
path = sys.argv[0]  #1 argument given is a string for the path
sys.path.append(path)
import httplib
import urllib
import string

def MethodCall(OutputString):
    print Outputstring 
```

因此，现在从 C# 中的方法调用变得更加容易，并且传递的参数保持不变。此外，使用此代码，您可以获得 Python 文件的自定义库文件夹，如果您在具有许多不同 PC 的网络中工作，这非常好

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T12:18:10.123

您可以让您的 python 程序在命令行上接受参数，然后从您的 C# 代码中将其作为命令行应用程序调用。

如果这是要走的路，那么有很多资源：

[如何从 C# 运行 Python 脚本？](https://stackoverflow.com/questions/11779143/run-a-python-script-from-c-sharp) [http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-ac-4-0-program.aspx](http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-a-c-4-0-program.aspx)

# safari - 在 Safari 中通过 Blob URL 加载音频失败

> ID：13231915
> 
> 赞同：17
> 
> 时间：2012-11-05T12:14:52.480
> 
> 标签：safari, blob, html5-audio

以下代码适用于 Chrome (22.0) 但不适用于 Safari (6.0)

```
<!DOCTYPE html>
<html>
<head>
<script>
function onGo(e) {
  var fr = new FileReader();
  var file = document.getElementById("file").files[0];
  fr.onload = function(e) {
      var data = new Uint8Array(e.target.result);
      var blob = new Blob([data], {type: 'audio/mpeg'});
      var audio = document.createElement('audio'); 
      audio.addEventListener('loadeddata', function(e) { 
          audio.play();
        }, false);
      audio.addEventListener('error', function(e) {
          console.log('error!', e);
        }, false);
      audio.src = webkitURL.createObjectURL(blob);    
    };
  fr.readAsArrayBuffer(file);
}
</script>
</head>
<body>
  <input type="file" id="file" name="file" />
  <input type="submit" id="go" onclick="onGo()" value="Go" />
</body>
</html> 
```

在 Safari 中，既不会调用回调（loadeddata 也不会调用错误）。使用的内容是一个 mp3 文件，通常使用音频标签播放。Safari 有什么特别需要注意的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2019-05-27T18:08:19.620

许多年后，我相信 OP 中的示例应该可以正常工作。只要您在创建 blob 时以某种方式设置 mime 类型，就像上面的 OP 使用传入的选项的 type 属性一样：

```
new Blob([data], {type: 'audio/mpeg'}); 
```

您还可以`<source>`在音频元素中使用元素并设置元素的`type`属性`<source>`。我在这里有一个例子：

[https://lastmjs.github.io/safari-object-url-test](https://lastmjs.github.io/safari-object-url-test)

这是代码：

```
const response = await window.fetch('https://upload.wikimedia.org/wikipedia/commons/transcoded/a/ab/Alexander_Graham_Bell%27s_Voice.ogg/Alexander_Graham_Bell%27s_Voice.ogg.mp3');

const audioArrayBuffer = await response.arrayBuffer();
const audioBlob = new Blob([audioArrayBuffer]);
const audioObjectURL = window.URL.createObjectURL(audioBlob);

const audioElement = document.createElement('audio');

audioElement.setAttribute('controls', true);
document.body.appendChild(audioElement);

const sourceElement = document.createElement('source');

audioElement.appendChild(sourceElement);

sourceElement.src = audioObjectURL;
sourceElement.type = 'audio/mp3'; 
```

我更喜欢在创建 blob 时设置它的 mime 类型。`<source>`元素`src`属性/属性不能动态更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-08T15:41:01.200

我有同样的问题，我已经花了几天时间解决这个问题。正如**pwray**在另一篇文章中提到的，Safari 需要媒体请求的文件扩展名：

[HTML5 音频文件无法在 Safari 中加载](https://stackoverflow.com/questions/4201576/html5-audio-files-fail-to-load-in-safari#)

我试图将我的 blob 保存到一个文件中，将其命名为 file.mp3 并且 Safari 能够以这种方式加载音频，但是在我将文件重命名为没有扩展名（只是“文件”）之后，它没有加载。当我在 Safari 的另一个选项卡中尝试从 blob 创建的 url 时：

```
url = webkitURL.createObjectURL(blob); 
```

它立即下载了一个名为“未知”的文件，但是当我在 Chrome 中（也在 Mac 上）尝试相同的操作时，它在浏览器中显示了文件的内容（mp3 文件以 ID3 开头，然后是一堆不可读人物）。我还不知道如何强制由 blob 构成的 url 具有扩展名，因为通常它看起来像这样：

```
blob:https://example.com/a7e38943-559c-43ea-b6dd-6820b70ca1e2 
```

所以它的结尾看起来像一个会话变量。

这就是我陷入困境的地方，我真的很想在这里看到一些聪明人的解决方案。谢谢，史蒂文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T11:57:05.643

有时，HTML5 音频会在没有任何明显原因的情况下停止加载。如果您查看媒体事件 ( [http://www.w3schools.com/tags/ref_eventattributes.asp](http://www.w3schools.com/tags/ref_eventattributes.asp) )，您会看到一个名为：“ **onStalled** ”的事件，定义是“在浏览器运行时运行的脚本由于某种原因无法获取媒体数据”，它似乎对您有帮助。

尝试监听该事件并在必要时重新加载文件，如下所示：

```
audio.addEventListener('onstalled', function(e) { 
      audio.load();
    }, false); 
```

我希望它有帮助！

# c# - 使用 LINQ/C# 查询检测“近乎重复”

> ID：13231917
> 
> 赞同：3
> 
> 时间：2012-11-05T12:14:57.453
> 
> 标签：c#, linq, duplicates

我正在使用以下查询来检测数据库中的重复项。

使用 LINQ 连接效果不佳，因为 X 公司也可能被列为 X 公司，因此我想修改它以检测“接近重复”。

```
var results = result
                .GroupBy(c => new {c.CompanyName})
                .Select(g => new CompanyGridViewModel
                    {
                        LeadId = g.First().LeadId,
                        Qty = g.Count(),
                        CompanyName = g.Key.CompanyName,
                    }).ToList(); 
```

有人可以建议一种我可以更好地控制比较的方法吗？也许通过 IEqualityComparer （虽然我不完全确定在这种情况下会如何工作）

**我的主要目标是：**

1.  列出包含所有重复项（或“接近重复项”）子集的第一条记录
2.  为了对我用于重复项的字段和文本比较具有一定的灵活性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:23:41.660

好的，既然你正在寻找不同的排列，你可以这样做：

> 请记住，这是写在答案中的，因此它可能无法完全编译，但您明白了。

```
var results = result
    .Where(g => CompanyNamePermutations(g.Key.CompanyName).Contains(g.Key.CompanyName))
    .GroupBy(c => new {c.CompanyName})
    .Select(g => new CompanyGridViewModel
        {
            LeadId = g.First().LeadId,
            Qty = g.Count(),
            CompanyName = g.Key.CompanyName,
        }).ToList();

private static List<string> CompanyNamePermutations(string companyName)
{
    // build your permutations here
    // so to build the one in your example
    return new List<string>
    {
        companyName,
        string.Join("", companyName.Split(" ".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:28:17.680

对于您明确的“忽略空格”情况，您可以简单地调用

```
var results = result.GroupBy(c => c.Name.Replace(" ", ""))... 
```

但是，在您需要灵活性的一般情况下，我会建立一个类库`IEqualityComparer<Company>`以在您的分组中使用。例如，这应该在您的“忽略空间”情况下做同样的事情：

```
public class CompanyNameIgnoringSpaces : IEqualityComparer<Company>
{
    public bool Equals(Company x, Company y)
    {
        return x.Name.Replace(" ", "") == y.Name.Replace(" ", "");
    }

    public int GetHashCode(Company obj)
    {
        return obj.Name.Replace(" ", "").GetHashCode();
    }
} 
```

您可以将其用作

```
var results = result.GroupBy(c => c, new CompanyNameIgnoringSpaces())... 
```

做包含多个字段或其他相似性定义等的类似事情非常简单。

请注意，您对“相似”的定义必须是可传递的，例如，如果您正在查看整数，则不能将“相似”定义为“在 5 以内”，因为那样您就会有“0 与 5 相似”和“ 5 类似于 10”，但不是“0 类似于 10”。（它也必须是自反和对称的，但这更直接。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:25:29.993

在这种情况下，您需要定义工作将发生的位置，即完全在服务器上、在本地内存中或两者的混合。

1.  在本地内存中：在这种情况下，我们有两条路线，将所有数据拉回并在本地内存中执行逻辑，或者将数据流式传输并分段应用逻辑。仅拉取所有数据`ToList()`或`ToArray()`基表。要流式传输数据，建议使用`ToLookup()`自定义 IEqualityComparer，例如

    ```
    public class CustomEqualityComparer: IEqualityComparer<String>
    {
        public bool Equals(String str1, String str2)
        {
            //custom logic
        }

        public int GetHashCode(String str)
        {
            // custom logic
        }
    }

    //result
    var results = result.ToLookup(r => r.Name, 
                        new CustomEqualityComparer())
                        .Select(r => ....) 
    ```

2.  完全在服务器上：取决于您的提供商以及它可以成功映射的内容。例如，如果我们将近似重复定义为具有替代分隔符的重复，则可以执行以下操作：

    ```
    private char[] delimiters = new char[]{' ','-','*'}

    var results = result.GroupBy(r => delimiters.Aggregate( d => r.Replace(d,'')... 
    ```

3.  混合：在这种情况下，我们将两者之间的工作分开。除非你想出一个好的方案，否则这条路线很可能效率低下。例如，如果我们将逻辑保留在本地，将分组构建为从名称到键的映射，然后查询生成的分组，我们可以执行以下操作：

    ```
    var groupings = result.Select(r => r.Name)
                          //pull into local memory
                          .ToArray()
                          //do local grouping logic...

                          //Query results
    var results = result.GroupBy(r => groupings[r])..... 
    ```

就我个人而言，我通常选择第一个选项，为小数据集拉取所有数据并流式传输大数据集（根据经验，我发现每次拉取之间的逻辑流式传输比拉取所有数据然后执行所有逻辑要长得多）

注意：依赖于提供者`ToLookup()`通常是立即执行并且在构造中分段应用它的逻辑。

# gpuimage - 布拉德·拉森的阈值过滤器中的 normalizeColor

> ID：13231919
> 
> 赞同：3
> 
> 时间：2012-11-05T12:15:12.593
> 
> 标签：gpuimage

这可能很容易理解，但我没有在 Brad Larson 的 GPUImage 中使用 normalizeColor 函数。例如，您可以在 Threshold.fsh 下的 colorObjectTracking 示例中找到它：

```
vec3 normalizeColor(vec3 color)
{
   return color / max(dot(color, vec3(1.0/3.0)), 0.3);
} 
```

这是我得到的：您将传入的颜色“颜色”除以 0.3 或除以颜色矢量的点积，如果是点积的结果，则为 (1/3,1/3,1/3)大于 0.3。

所以两个问题：

1.  为什么有必要将“颜色”标准化为其元素的平均值？
2.  为什么最小限制为 0.3？（据我了解 max() 函数）

非常感谢！阿尔蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:11:05.567

提出这个问题的更合适的地方可能是项目站点本身，但我会咬一口。

片段着色器的重点是识别图像中具有特定颜色的像素。该函数对颜色的亮度进行粗略的归一化，以便在匹配对象上的颜色时可以考虑不同的照明条件。那里的`max()`操作只是一个上限，以防止在某些颜色值下事情变得非常古怪。

这个特定的片段着色器完全基于 Apple 的 Core Image 工程师在他们的 GPU Gems 文章[“Object Detection by Color: Using the GPU for Real-Time Video Image Processing”](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch26.html)中提供的示例，并且他们更详细地介绍了它那里。

更好的方法是通过去除亮度分量并检查像素的色度来接近给定颜色。如果你有 YUV 源，你可以很容易地从 Cr 和 Cb 组件中做到这一点。我的 GPUImageChromaKeyFilter 说明了从 RGB 输入中提取 YUV 数据，然后在色度周围应用阈值。这也是从 Apple 的一个示例中得出的（我相信这是来自他们的 ChromaKey WWDC 示例）。

# c# - 如何将数据保存在两个表中？（在创建中）

> ID：13231930
> 
> 赞同：1
> 
> 时间：2012-11-05T12:15:59.110
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

再会，

我想知道如何将信息保存在创建中。

```
@model Request.Models.Chamados
@model Request.Models.InteracoesChamados 
@{
    ViewBag.Title = "Create";
} 
```

如上面的两个表所示，当然是行不通的。请给我一个例子，因为它让我感到困惑。

注意：为了清楚起见，我填写了一张表格并在点击保存时保存到 2 个表中。

环境：Windows 7、Visual Studio 2010、C#、MVC3 + Razor 实体框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:55:58.853

这里似乎有一些东西，但对于初学者来说，每个视图只能声明一个模型。

您可以创建一个具有上述两者的 ViewModel，例如

```
public class ChamodosViewModel{
   public Chamados Chamados {get;set;}
   public InteracoesChamados InteracoesChamados {get;set;}
} 
```

然后在你看来

```
@model ChamodosViewModel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:07:26.323

不要将域模型用于您的视图。创建一个特定于您的视图的新**POCO**类。一般来说，我们称之为**ViewModel**。

```
public class ChamodoVM
{
  [Required]
  public string ChamdoName { set;get;}
  [Required]
  public string InteracoName { set;get;}

  //other properties here as needed
} 
```

现在在你的`GET`行动中创建这个类的一个对象并传递给`View`方法。

```
public ActionResult Create()
{
  var vm=new ChamodoVM();
  return View(vm);
} 
```

使您的视图强类型化到 ViewModel 类。

```
@model ChamodoVM
@using(Html.BeginForm())
{
  @Html.LabelFor(x=>x.ChamodoName)
  @Html.TextBoxFor(x=>x.ChamodoName)

  @Html.LabelFor(x=>x.InteracoName)
  @Html.TextBoxFor(x=>x.InteracoName)

  <input type="submit" />
} 
```

当用户提交表单时，从视图模型中读取值并将其分配给您的域模式对象并保存。感谢 MVC 模型绑定。:)

```
[HttpPost]
public ActionResult Create(ChamodoVM model)
{
  if(ModelState.IsValid)
  {
    var domainModel=new Chamodo();
    domainModel.Name=model.ChamodoName;
    domainModel.Interaco=new Interaco();
    domainModel.Interaco.Name=model.InteracoName;

    yourRepositary.SaveClient(domainModel);  
    //If saved successfully, Redirect to another view (PRG pattern)
    return RedirectToAction("ChamodoSaved");
  }
  return View(model);    
} 
```

# c++ - 使用函数的模板返回类型编译错误

> ID：13231931
> 
> 赞同：2
> 
> 时间：2012-11-05T12:16:00.603
> 
> 标签：c++, templates

我在 .hpp 中有一个带有此声明的模板类：

```
 template<class FriendClass> class SocialConnection{

    typedef std::set<FriendClass> FriendSet;
    FriendSet _socialFriends;
    public:
       virtual const FriendSet& getFriends(); 
```

在 .cpp 中：

```
const SocialConnection::FriendSet& SocialConnection::getFriends() {
    return _socialFriends;
} 
```

编译器给我一个集合声明的错误： `Expected a class or namespace`对于该行`const SocialConnection::FriendSet& SocialConnection::getFriends()`

我一直在寻找原因两个小时，但没有任何结果。我不能在实现中使用我的模板类的名称？我怎么能这样做？有什么我丢失的语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:29:53.107

1.  您的 getFriends 定义中的类名缺少模板参数。
2.  你不能真的把你的模板代码放在一个 cpp 文件中并期望它编译。它是一个模板，所以无论在哪里使用它都会被实例化为一个类型。因此，您需要将其放在标题中。

    模板 <类型名 F>

    常量类型名 SocialConnection< F>::FriendSet& SocialConnection< F>::getFriends() { return _socialFriends; }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:32:53.307

正确的定义相当冗长：

```
template<typename FriendClass>
const typename SocialConnection<FriendClass>::FriendSet&
SocialConnection<FriendClass>::getFriends()
{
    return _socialFriends;
} 
```

@pwned 说了什么；它需要在实例化时可见，因此将其放在标题中。请参阅[此问题](https://stackoverflow.com/questions/3749099/why-should-the-implementation-and-the-declaration-of-a-template-class-be-in-the)以获取解释。

还要注意`typename`返回类型之前 - 它是必需的，因为它`FriendSet`是一个*依赖名称。* [这个问题](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)深入解释了它。

# php - 存储每次引用时都会重置的变量 - PHP

> ID：13231936
> 
> 赞同：-1
> 
> 时间：2012-11-05T12:16:09.837
> 
> 标签：php

这更像是一个一般性的编程问题，而不是 PHP 问题，但是 PHP 语言是我当前使用的语言。

我将向您展示我遇到的一个难题，但我还没有找到解决方案；看到答案会很有趣。

完整文件（很短，jQuery 正在加载它）：

```
<?php
    require_once('../../../wp-blog-header.php');
    header('HTTP/1.1 200 OK');
?>
<br /><br /><br /><br /><br /><img id="quoteOne" src="http://www.1.co.uk/wp-content/themes/1/images/quote1.png">
    <span><?php
        query_posts(array(
            'cat' => 39,
            'order' => 'ASC', // ASC
            'orderby' => 'rand',
            'showposts' => 1,
            ));
        $wp_query->is_archive = true; $wp_query->is_home = false;
        if (have_posts()) : while (have_posts()) : the_post();
        the_content();
        //the_id();
        endwhile; endif;
        session_start();
        $_SESSION['i'] = the_id();
        $prev = $_SESSION['i'];
        //echo $_SESSION['i'];
        //$_SESSION['i']++;
    ?>
    <a href="#" style="color: #86a53e;" id="nextQu">NEXT QUOTE</span>
    </span> 
```

PHP（有问题的代码）：

```
// the_id() returns current id of post
session_start();
$_SESSION['i'] = the_id();
$prev = $_SESSION['i']; 
```

此代码段的目的是检查当前 id 是否不等于前一个 id（以防止重复显示和看起来什么都没有发生）。我需要能够执行类似的操作；

```
if($previous == $current){
    // try again
} 
```

如果不每次都重置它，我找不到存储它的方法。有没有一种编程方法可以做到这一点？

该文件通过以下方式加载：（一个单独的文件）

```
$('#testimonialContent').load('http://www.1.co.uk/wp-content/themes/1/testimonialPull.php'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:21:58.450

不是 100% 确定你在问什么，但这是你想要的吗？

```
session_start();
$prev = isset($_SESSION['i']) ? $_SESSION['i'] : null;
$_SESSION['i'] = the_id();

if ($prev == $_SESSION['i'])
{
    // whatever
} 
```

# python - BeautifulSoup 和 Amazon.co.uk

> ID：13231937
> 
> 赞同：4
> 
> 时间：2012-11-05T12:16:12.233
> 
> 标签：python, amazon, beautifulsoup, mechanize

我正在尝试解析亚马逊以编制价格清单，作为与统计相关的更大项目的一部分。但是，我很难过。我想知道是否有人可以查看我的代码并告诉我哪里出错了？

```
#!/usr/bin/python
# -*- coding:  utf-8 -*-
import mechanize
from bs4 import BeautifulSoup

URL_00 = "http://www.amazon.co.uk/Call-Duty-Black-Ops-PS3/dp/B007WPF7FE/ref=sr_1_2?ie=UTF8&qid=1352117194&sr=8-2"

bro = mechanize.Browser()
resp = bro.open(URL_00)
html = resp.get_data()
soup_00 = BeautifulSoup(html)
price = soup_00.find('b', {'class':'priceLarge'})
print price #this should return at the very least the text enclosed in a tag 
```

根据屏幕截图，我上面写的应该可以工作，不是吗？

![http://i.imgur.com/bPVe1.png （不能以新手的身份发布图像..）](../Images/4778baeb4ba2327f3fc5ab7af49ebcf1.png)

好吧，我在打印输出中得到的只是“[]”，如果我将最后一行更改为：

```
 price = soup_00.find('b', {'class':'priceLarge'}).contents[0].string 
```

或者

```
price = soup_00.find('b', {'class':'priceLarge'}).text 
```

我收到“noneType”错误。

我很困惑为什么会这样。chrome 上 URL 中的页面编码为 UTF8，我的脚本在第 2 行中调整为 UTF8。我已将其更改为 ISO（根据页面的内部 HTML），但这使差异为零，所以我认为正编码不是这里的问题。

另外，不知道这是否相关，但是我在 linux 上的系统语言环境是 UTF-8 应该不会引起问题吗？

任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:22:36.267

没有必要这样做，因为亚马逊提供了 API

[https://affiliate-program.amazon.co.uk/gp/advertising/api/detail/main.html](https://affiliate-program.amazon.co.uk/gp/advertising/api/detail/main.html)

> 产品广告 API 可帮助您使用产品搜索和查找功能、产品信息和功能（例如客户评论、类似产品、愿望清单以及新旧清单）来宣传亚马逊产品。

更多详细信息：[适用于 Python 的 Amazon API 库？](https://stackoverflow.com/questions/48884/amazon-api-library-for-python)

我正在使用 API，它比从网页上抓取数据更容易和可靠，即使是 BS。您还可以访问新的、二手的等价格列表，而不仅仅是“标题”价格。

# c++ - 找到两个整数，使得它们的乘积接近给定的实数

> ID：13231940
> 
> 赞同：1
> 
> 时间：2012-11-05T12:16:17.220
> 
> 标签：c++, c, algorithm, integer

我正在寻找一种算法来找到两个整数值`x,y`，以使它们的乘积尽可能接近给定的双精度值，`k`而它们的差异很小。

**示例**：矩形的面积是`k=21.5`，我想找到该矩形的边长度，约束条件是它们必须是整数，在这种情况下，一些可能的解决方案是（不包括排列）`(x=4,y=5)`，`(x=3,y=7)`以及愚蠢的解决方案`(x=21,y=1)`

事实上，对于这对夫妇，我们和这对夫妇`(3,7)`有同样的区别`(21,1)`

`21.5-3*7=0.5 = 21.5-21*1`

而对于`(4,5)`这对夫妇 `21.5-4*5=1.5`

但是这对夫妇`(4,5)`更可取，因为他们的区别是`1`，所以矩形“更平方”。

有没有一种方法可以提取那些`x,y`差异最小并且它们的乘积与 k 的差异也最小的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:20:25.707

您必须查看相关数字的平方根。对于 21.5 sqrt(21.5) = 4.6368，实际上你找到的数字就在这个值附近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:59:12.593

你想最小化

1.  因子*X*和*Y的差异*
2.  乘积*X × Y*和*P*的差。

您提供了一个示例，其中这些目标**相互矛盾**。*3 × 7*比*4 × 5*更接近*21*，但后者的因子更平方。因此，不可能有任何算法同时最小化两者。

 *您可以加权两个目标并将它们转换为一个，然后通过[非线性整数规划](http://en.wikipedia.org/wiki/Integer_programming)解决问题：

```
 min c × |X × Y - P|  +  d × |X – Y|
subject to X, Y ∈ ℤ
           X, Y ≥ 0 
```

其中*c, d*是非负数，用于定义您重视哪个目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:20:43.423

取平方根，取一个整数，取另一个整数。

```
#include <iostream>
#include <cmath>

int main(){
    double real_value = 21.5;
    int sign = real_value > 0 ? 1 : -1; 
    int x = std::floor(std::sqrt(std::abs(real_value)));
    int y = std::ceil(std::sqrt(std::abs(real_value)));
    x *= sign;

    std::cout << x << "*" << y << "=" << (x*y) << " ~~ " << real_value << "\n";
    return 0;
} 
```

`x`请注意，这种方法只能在and之间提供一个很好的距离`y`，例如 if `real_value = 10`then `x=3`and `y=4`，但产品 is `12`。如果您想在产品和实际值之间获得更好的距离，您必须调整整数并增加它们的差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:43:51.390

1.  让给定的 double 为 K。

2.  取K的地板，让它成为F。

3.  取 2 个大小为 F*F 的整数数组。让他们成为Ar1，Ar2。

4.  像这样运行循环

    ```
    int z = 0 ;

    for ( int i = 1 ; i <= F ; ++i )
    {
       for ( int j = 1 ; j <= F ; ++j )           
       {
           Ar1[z] = i * j ;
           Ar2[z] = i - j ; 
           ++ z ;            
       }
    } 
    ```

您现在得到了所有可能数字的差异/产品对。现在为接近值 K 的产品分配一些“优先级值”，而将其他一些分配给较小的差异。现在遍历这些数组从 0 到 F*F 并通过检查您的条件找到您需要的对。

例如。让接近 K 的优先级为 1，而差异较小的优先级为 0.5。考虑另一个大小为 F*F 的数组 Ar3。然后，

```
 for ( int i = 0 ; i <= F*F ; ++i )
    {
       Ar3[i] = (Ar1[i] - K)* 1 + (Ar2[i] * .5) ; 
    } 
```

遍历 Ar3 以找到最大值，这将是您正在寻找的对。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T12:57:19.727

```
double best = DBL_MAX;
int a, b;
for (int i = 1; i <= sqrt(k); i++)
{
    int j = round(k/i);
    double d = abs(k - i*j);
    if (d < best)
    {
        best = d;
        a = i;
        b = j;
    }
} 
```*

# handler - Apache ODE - BPEL 补偿处理程序 - 奇怪的行为（或者我可能在某处错了

> ID：13231942
> 
> 赞同：1
> 
> 时间：2012-11-05T12:16:24.597
> 
> 标签：handler, bpel, fault, apache-ode

我从这个位置得到了这个 BPEL 的例子[https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/bps/modules/samples/product/src/main/resources/bpel/2.0 /SampleCompensationHandlers/FlightReservationProcess/](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/bps/modules/samples/product/src/main/resources/bpel/2.0/SampleCompensationHandlers/FlightReservationProcess/)

该示例在执行给定范围时设置给定变量。最后一个作用域抛出一个错误，因此该错误触发了该作用域的相关处理程序，该处理程序重新抛出该错误。这样会触发流程的故障处理程序，对每个成功完成的范围进行补偿。

我在 Eclipse 中创建了一个 BPEL 项目，并将示例放在那里，然后我开始了一些测试。但我发现了一个非常奇怪的行为：

1.  我只有几次得到正确的结果： CarReservationActivity: 1 CarReservationCompensated: 1 HotelReservationActivity: 1 HotelReservationCompensated: 1 FlightReservatoinActivity: 1

2.  在所有其他情况下，我得到了不正确的结果：

    一个）

    CarReservationActivity：1 CarReservationCompensated：0 HotelReservationActivity：1 HotelReservationCompensated：1 FlightReservatoinActivity：1

    二）

    CarReservationActivity：1 CarReservationCompensated：1 HotelReservationActivity：1 HotelReservationCompensated：0 FlightReservatoinActivity：1

当结果不正确时，情况 A) 占主导地位。

我找不到问题出在哪里。一切看起来都很好。

有人可以帮我解决这个问题吗？

使用的软件： - Windows 7 Enterprise，SP1，32 位 - Apache Tomcat v.6.0.18 - Apache ODE v.1.3.5 - Eclipse Indigo v.3.7.2 SR2 - BPEL Designer v.1.0.1 - Java 7 (v. 1.7.0_07)

# google-apps-script - 将联系人添加到联系人组

> ID：13231943
> 
> 赞同：1
> 
> 时间：2012-11-05T12:16:24.673
> 
> 标签：google-apps-script

我正在尝试将 MyContacts 中的联系人添加到其他联系人组中。我觉得我写得对，但它不起作用：-

```
function myFunction() {
    var MyContact = ContactsApp.getContactsByEmailAddress('XXXX.XXXX@Pearson.com'); 
    var MyGroup = ContactsApp.getContactGroup('Sample');
        MyGroup.addContact(MyContact); 
} 
```

XXXX.XXXX@Pearson.com 在我的联系人列表中，我已经创建了*Sample*组，但我收到“无法转换为 . （第 4 行）解雇'。存在的线：-

```
MyGroup.addContact(MyContact); 
```

有任何想法吗？我环顾四周，找不到答案。

问候加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:25:27.107

如果组存在，则此示例代码有效：

```
function addtContactTogroup() {
  var contact = ContactsApp.getContact('emailAdress')  
  var group = ContactsApp.getContactGroup('groupName')
          group.addContact(contact)
      } 
```

我知道这和你的几乎一样！，但它不会引发任何错误......请随时通知我们它对您来说失败了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T12:33:07.627

Zoe je zoiets 还说：

```
function myFunction() {
  var Mycontacts = ContactsApp.getContactsByGroup("AnyGroupName");
   for (var i=0; i<Mycontacts.length; i++) {
          if (Mycontacts[i]) {
            Mycontacts[i].addToGroup("AnyGroupNameWereYouLikeToPutIt");
          }
   }
} 
```

# perl - 访问模板工具包中的变量的奇怪错误

> ID：13231946
> 
> 赞同：1
> 
> 时间：2012-11-05T12:16:31.900
> 
> 标签：perl, template-toolkit

我正在努力解决一个我无法确定的错误。

我有一个函数，它接受邮政编码、查找并返回纬度、经度和地区名称。

例如，传递它 AD300 它返回（类似于）42.6、1.55、ordino - 它工作得很好。

该函数是这样调用的：

```
my ($lat, $lng, $area) = $object->release(); 
```

返回值很好，我可以在 perl 中打印它们并发出警告

```
warn "Area $area, $rellat, $rellng"; 
```

这工作正常。"区域 Ordino, 42.6, 1.55"

然后我取其中一个值，比如 $area，将其添加到数据散列中，并将其传递到通过 TT 对其进行预处理的网页（就像我成功加载其他变量一样）。

我以正常方式将值分配给哈希。例如 $hash->{'area'} = $area;

这是乐趣开始的地方。当我尝试引用 TT 中的值时，例如 [% hash.area %] 我没有在网页上打印“Ordino”，我被告知我已将数组引用传递给 TT。

经过一点调试，我发现我的散列变量 hash.area 以某种方式引用了一个数组（根据 TT），该数组包含我从子例程“release”返回的三个值。即 hash.area = [42.6, 1.55, ordino] 根据 TT。

也就是说，要在网页中获取值“Ordino”，我必须访问 [% hash.area.2 %]。

此外，我可以将 $hash->{'area'} 设置为等于任何变量 $lat、$lng 或 $area 并获得相同的行为。TT 认为所有三个变量都引用同一个数组。那是

$lat = $lng = $area = [42.6, 1.55, ordino] 根据 TT

这很奇怪，我可以愉快地在 perl 中打印变量，它们看起来很正常——而不是数组。我试过用转储器转储哈希，没有数组，一切都很好。然而不知何故，TT 正在寻找一个数组。它在我的脑海里。

这个网站很大，有很多页面，我很高兴一直通过 TT 将变量和哈希传递给网页，并且已经有 4 年了。我从来没有见过这个。在其他页面上，我什至从“释放”方法传递完全相同的输出，并且它被正确处理。

我不*认为*我的 TT 处理代码是问题，但是以下是相关的。

```
my $tt = Template->new({
    INCLUDE_PATH => [ @$template_directories ],
    COMPILE_EXT => '.ttc',
    COMPILE_DIR => '/tmp/ttc',
    FILTERS => YMGN::View->filters,
    PLUGIN_BASE => [ 'YMGN::V::TT::Plugins' ],
    EVAL_PERL => 1
});

$self->{tt} = $tt;
$self->{template_directories} = $template_directories;
$self->{output} = $params->{output} || undef;
$self->{data} = $params->{data} || []; 
```

上面创建了一个新的 tt 对象，并且是“新”函数的一部分（如下所示）。“数据”包含哈希。“输出”保存已处理的模板准备发送到用户浏览器。我们调用 new（上面），处理数据并使用下面的代码创建输出。

```
sub process {
my $self = shift;
my $params = shift;

if (!ref $self || !exists $self->{tt}) {
    my $class = $self;
    $self = $class->new($params);
}

if (!$self->{output}) {
    die "You need to specify output";
}

delete $self->{error};

$self->y->utils->untaint(\$self->{template});
my $rv = $self->{tt}->process(
    $self->{template},
    $self->{data},
    $self->{output},
    binmode => ':utf8',
);

if (!$rv) {
    warn $self->{tt}->error();
    return {
        error => $self->{tt}->error(),
    };
}
return 0;
} 
```

以上所有内容都经过消毒，因为还有很多其他事情正在发生。我相信重要的是输入的数据看起来正确，这里是 tt 正在处理的完整数据的完整转储（在处理点）。导致问题的原因是气泡->[*]->{'release'}（请注意，数据中的 release == 区域。名称因不相关的原因而更改）。如您所见，dumper 认为它是一个字符串。TT 处理其他一切都很好。

```
data $VAR1 = {
      'system' => {
                    system stuff
                  },
      'features' => {
                      site feature config
                    },
      'message_count' => '0',
      'bubbles' => [
                     bless( {
                              'history' => [
                                             {
                                               'creator' => '73',
                                               'points' => '10',
                                               'screenname' => 'sarah10',
                                               'classname' => 'Flootit::M::Bubbles',
                                               'id' => '1378',
                                               'updated' => '1352050471',
                                               'type' => 'teleport',
                                               'label' => 'teleport',
                                               'class' => 'Flootit::M::Bubbles'
                                             }
                                          ],
                              'creator' => '6',
                              'release' => 'Escaldes-Engordany',
                              'image' => 'http://six.flooting.com/files/833/7888.png',
                              'pop_time' => '1352050644',
                              'y' => $VAR1->{'y'},
                              'taken_by' => '0',
                              'city' => '3',
                              'title' => 'hey a new bubble',
                              'id' => '566',
                              'class' => 'Flootit::M::Bubbles',
                              'prize' => 'go for it kids'
                            }, 'Flootit::M::Bubbles' ),
                     bless( {
                              'history' => [
                                             {
                                               'creator' => '6',
                                               'points' => '10',
                                               'screenname' => 'sarah20',
                                               'classname' => 'Flootit::M::Bubbles',
                                               'id' => '1723',
                                               'updated' => '1349548017',
                                               'type' => 'teleport',
                                               'label' => 'teleport',
                                               'class' => 'Flootit::M::Bubbles'
                                             },
                                             {
                                               'creator' => '6',
                                               'points' => '5',
                                               'screenname' => 'sarah20',
                                               'classname' => 'Flootit::M::Bubbles',
                                               'id' => '1732',
                                               'updated' => '1349547952',
                                               'type' => 'blow',
                                               'label' => 'blow',
                                               'class' => 'Flootit::M::Bubbles'
                                             }
                                           ],
                              'creator' => '89',
                              'release' => 'Ordino',
                              'image' => 'http://six.flooting.com/files/1651/8035.png',
                              'pop_time' => '1351203843',
                              'y' => $VAR1->{'y'},
                              'taken_by' => '0',
                              'city' => '3',
                              'title' => 'test4',
                              'id' => '1780',
                              'class' => 'Flootit::M::Bubbles',
                              'prize' => 'asdfasdf dsadsasdfasdfasdf'
                            }, 'Flootit::M::Bubbles' ),
                     bless( {
                              'history' => [],
                              'creator' => '6',
                              'release' => 'Andorra la Vella',
                              'image' => 'http://six.flooting.com/files/1671/8042.png',
                              'pop_time' => '0',
                              'y' => $VAR1->{'y'},
                              'taken_by' => '0',
                              'city' => '3',
                              'title' => 'Pretty flowers, tres joli',
                              'id' => '1797',
                              'class' => 'Flootit::M::Bubbles',
                              'prize' => 'With lots of pretty pictures'
                            }, 'Flootit::M::Bubbles' ),
                     bless( {
                              'history' => [],
                              'creator' => '6',
                              'release' => 'Hillrise Ward',
                              'image' => 'http://six.flooting.com/files/1509/8003.png',
                              'pop_time' => '0',
                              'y' => $VAR1->{'y'},
                              'taken_by' => '0',
                              'city' => '3',
                              'title' => 'Test beats',
                              'id' => '1546',
                              'class' => 'Flootit::M::Bubbles',
                              'prize' => 'Sound great'
                            }, 'Flootit::M::Bubbles' )
                   ]
    }; 
```

处理后出来的是这个（在 $output 中）有一个 [% FOREACH floot IN bubbles %]

在 ARRAY (0xfaf5d448) 周围浮动。

来自 [% float.release %]

如果我们做这个 [% floot.release.2 %] 它会给出正确的值。

可以正确引用所有其他字段 - 看图。

将“气泡”放在一起的代码是；

```
my $bubbles = $y->model('Bubbles')->search(['type' => 'golden', 'image' => '!NULL',
                                            'bubble_prizes' => ['p', { 'p.bubble' => 'self.id'}], ], {
    order_by => '(created>CURRENT_DATE() AND thumbsup+thumbsdown<10) DESC, COALESCE(thumbsup,0)-COALESCE(thumbsdown,0) DESC, pop_time DESC',
    count => 10,
    fields => ['p.title as title', 'p.prize as prize', 'city', 'taken_by', 'pop_time', 'id', 'creator'],
});

for (my $i=0; $i<@$bubbles; $i++) {

    # Find specified bubbles (see below for when not found here)
        my ($rellat, $rellng, $area) = $bubbles->[$i]->release() ;
    $bubbles->[$i]->{'release'} = $area;
}
} 
```

然后控制器获取 $bubble，将其与会话/站点数据捆绑在一起，将其放入匿名哈希中（如您在上面的数据中所见），并将其传递给视图进行处理。

发布代码是：

```
sub release {
    my $self = shift;
    my $postcode = $self->y->model('Prizes')->find({bubble => $self->id})->postcode;
    my ( $user_lat, $user_long, $region_name );
    if($postcode)
     {
           ( $user_lat, $user_long, $region_name ) = $self->y->api('Location')->from_postcode($postcode);
           return ( $user_lat, $user_long, $region_name );  
        }
   } 
```

API::Location 相当大，但相关行是；

```
$postcode_record = $self->y->model('GeoData')->find( {
source   => "ALL_COUNTRIES_POSTCODES",
country  => $country_code,
sourceid => $postcode, } );

return ( $postcode_record->latitude, $postcode_record->longitude, $postcode_record->town ); 
```

我向您展示的数据转储来自 TT.pm（部分视图）。

那么，任何想法可能会发生什么或从哪里开始？我能做些什么来尝试进一步调试呢？我没主意了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:04:41.940

也许是因为 $area 是一个受祝福的对象；试试这个转换为标量字符串：

```
$string = ''.$area;
# e.g.
$hash->{'area'} = ''.$area; 
```

在@Moritz 评论之后，检查 $area 是否受到祝福：

```
print ref($area);
use Data::Dumper; warn Dumper($area); 
```

并且 q{""} 重载：

```
print defined ${ref($area).'::'}{'(""'}; 
```

编辑

子版本可以返回 - undef 如果 $postcode 评估为 false - 一个列表，但因为它用作标量上下文返回最后一个参数 $region_name 像括号列表（逗号表达式）

```
sub release {
  my $self = shift;
  my $postcode = $self->y->model('Prizes')->find({bubble => $self->id})->postcode;
  my ( $user_lat, $user_long, $region_name );
  if($postcode)
  {
    ( $user_lat, $user_long, $region_name ) = $self->y->api('Location')->from_postcode($postcode);
    return ( $user_lat, $user_long, $region_name );  
  }
} 
```

它将与 Dump $region_name 或 $area 相关，或者查看 from_postcode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:00:01.413

我发现问题在其他开发服务器和生产服务器上消失了。

因此，我尝试卸载并重新安装 TT，但这并没有帮助。

看来这是我的开发服务器上的一个环境问题，所以我要淘汰这个盒子并开始一个新的。

# ios - 动画 UIButton 的标题更改

> ID：13231947
> 
> 赞同：28
> 
> 时间：2012-11-05T12:16:31.860
> 
> 标签：ios, cocoa-touch, uibutton, core-animation

在这里，我找到了如何`UIButton`使用现已弃用的`beginAnimations:context:`方法为 的标题更改设置动画：

[iPhone的UIBUtton标题动画](https://stackoverflow.com/questions/11709147/uibutton-title-animation-for-iphone)

如何使用当前的 API 做同样的事情？

**更新：**

我尝试使用基于块的动画：

```
NSTimeInterval animationDuration = animated ? 1.f : 0.f;
[UIView animateWithDuration:animationDuration delay:0.f options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionAllowUserInteraction animations:^{
    [button setTitle:newTitle forState:UIControlStateNormal];
    [button setTitleColor:newTitleColor forState:UIControlStateNormal];
} completion:nil]; 
```

颜色变化不是动画的。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-05T12:25:23.020

使用块：

```
[UIView transitionWithView:self.flipLabelButton duration:1 options:UIViewAnimationOptionTransitionFlipFromRight animations:^{

    [self.flipLabelButton setTitle:newText forState:UIControlStateNormal];

} completion:nil]; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-11-29T01:51:06.517

**迅速**

```
UIView.transition(with: button, duration: 0.5, options: .transitionCrossDissolve, animations: {
  self.button.setTitle("WOW, new title", for: .normal)
  self.button.setTitleColor(UIColor.red, for: .normal)
}, completion: nil) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-31T09:40:18.173

除了AnimationGroups，一般有两种动画，一种是属性动画，另一种是动画你的内容，过渡或任何不能使用属性做动画的东西。所以第二个解决方案是你的选择，你可以通过两种方式实现：使用 CATransition：

```
CATransition *transition = [CATransition animation];
transition.type = kCATransitionFade;
transition.duration = 1;
[button.layer addAnimation:transition forKey:kCATransition];
[button setTitle:newTitle forState:UIControlStateNormal];
[button setTitleColor:newColor forState:UIControlStateNormal]; 
```

另一种方法是使用@jjv360 所说的 UIKit 块，但你不能在其中设置颜色动画，因为显然颜色不能被翻转。

# java - java.util.date/Calendar/SimpleDateFormat：在java中添加/增加月份

> ID：13231949
> 
> 赞同：0
> 
> 时间：2012-11-05T12:16:39.143
> 
> 标签：java, simpledateformat

我尝试了以下方法；但结果令人失望。
我想增加月份。

```
 String dStartTime="2012-03-01";
 SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-DD");
 Date dateStartTime = dateFormatter.parse(dStartTime);
 Calendar cal = Calendar.getInstance();
 cal.setTime(dateStartTime); 
 cal.add(Calendar.MONTH, 1);
 System.out.println(cal.getTime());
 System.out.println(dateFormatter.format(cal.getTime())); 
```

**输出**
2012 年 2 月 1 日星期三 00:00:00 IST --- 这是正确的
2012-02-32 --- 这是错误的。我希望这一天应该是一个。

请让我知道这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:18:03.143

更改`new SimpleDateFormat("yyyy-MM-DD")`为`new SimpleDateFormat("yyyy-MM-dd")`。 `DD`是“一年中的一天”，但您需要`dd`“一个月中的一天”。有关日期和时间模式，请参阅[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

# c# - 检索所有可用打印机驱动程序的列表（如添加打印机向导）

> ID：13231958
> 
> 赞同：5
> 
> 时间：2012-11-05T12:17:00.563
> 
> 标签：c#, printing, driver

在 c# 中，我将获得正在运行的系统上安装的所有打印机驱动程序的列表，例如 Windows [“添加打印机”向导](http://maths-old.anu.edu.au/itdocs/lib/exe/fetch.php/printing%3awin-printer-wizard-select-make-model.png)：

我已经能够列出已安装的打印机，但是如何列出系统上可用的驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:27:59.800

也许这可以帮助你： http: [//msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.installedprinters.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.installedprinters.aspx) 有了这个，你可以得到安装的打印机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T14:45:36.590

此代码枚举已安装的打印机驱动程序：

```
public struct DRIVER_INFO_2
{
    public uint cVersion;
    [MarshalAs(UnmanagedType.LPTStr)] public string pName;
    [MarshalAs(UnmanagedType.LPTStr)] public string pEnvironment;
    [MarshalAs(UnmanagedType.LPTStr)] public string pDriverPath;
    [MarshalAs(UnmanagedType.LPTStr)] public string pDataFile;
    [MarshalAs(UnmanagedType.LPTStr)] public string pConfigFile;
}

public static class EnumeratePrinterDriverNames
{
    [DllImport("winspool.drv", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int EnumPrinterDrivers(String pName, String pEnvironment, uint level, IntPtr pDriverInfo,
        uint cdBuf, ref uint pcbNeeded, ref uint pcRetruned);

    public static IEnumerable<string> Enumerate()
    {
        const int ERROR_INSUFFICIENT_BUFFER = 122;

        uint needed = 0;
        uint returned = 0;
        if (EnumPrinterDrivers(null, null, 2, IntPtr.Zero, 0, ref needed, ref returned) != 0)
        {
            //succeeds, but shouldn't, because buffer is zero (too small)!
            throw new ApplicationException("EnumPrinters should fail!");
        }

        int lastWin32Error = Marshal.GetLastWin32Error();
        if (lastWin32Error != ERROR_INSUFFICIENT_BUFFER)
        {
            throw new Win32Exception(lastWin32Error);
        }

        IntPtr address = Marshal.AllocHGlobal((IntPtr) needed);
        try
        {
            if (EnumPrinterDrivers(null, null, 2, address, needed, ref needed, ref returned) == 0)
            {
                throw new Win32Exception(Marshal.GetLastWin32Error());
            }

            var type = typeof (DRIVER_INFO_2);
            IntPtr offset = address;
            int increment = Marshal.SizeOf(type);

            for (uint i = 0; i < returned; i++)
            {
                var di = (DRIVER_INFO_2) Marshal.PtrToStructure(offset, type);
                offset += increment;

                yield return di.pName;
            }
        }
        finally
        {
            Marshal.FreeHGlobal(address);
        }
    }
} 
```

# java - 如何将多维数组与数组列表一起使用？

> ID：13231961
> 
> 赞同：1
> 
> 时间：2012-11-05T12:17:17.770
> 
> 标签：java

我想从 sql 查询中添加一些记录，但输出不正确。始终返回最后一条记录。

正确的列表是：

约翰

缺口

玛丽

乔

，但总是返回乔。

这是添加元素的方法：

```
public ArrayList<String[][]> getFiledArrayList()
{
   // ArrayList<String[][]> fieldsList = new  ArrayList<>();
    String[][] tempRow = new String[1][2];
    ResultSet result;

    String sql = "select id, name_of from field";
    result = database.exeQueryStatement(sql);
    try 
    {
        while(result.next())
        {
            tempRow[0][0] = result.getString("id");
           // System.out.println(tempRow[0][0]);
            tempRow[0][1] = result.getString("name_of");
           // System.out.println(tempRow[0][1]);
            fieldsList.add(tempRow);
            System.out.println(fieldsList.get(0)[0][1]);
        }
    } 
    catch (SQLException ex) 
    {
        Logger.getLogger(FieldManage.class.getName()).log(Level.SEVERE, null, ex);
    }

    return fieldsList; 
```

我把`id`和`name_of`放在一个`String[1][2]`表中，我想`name_of`在一个 jComboBox 中显示。我想插入并`name_of`观看`id`

```
FieldManage fieldmanage = new FieldManage();
   ArrayList<String[][]> listOfField;
   listOfField = fieldmanage.getFiledArrayList();
   String[] fields = new String[listOfField.size()];
   System.out.println(listOfField.get(0)[0][0]);
   for (int i=0; i<listOfField.size(); i++)
   {
        fields[i] = listOfField.get(i)[0][1];
        System.out.println(fields[i]);//test print show always joe!
    }
     jComboFields.setModel(new javax.swing.DefaultComboBoxModel(fields)); 
```

此代码始终返回 Joe。

另外我想知道是否有更好的方法将 jcombo 元素与`id`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T12:19:06.347

填充时`fieldsList`，您重复添加对同一对象 ( `tempRow`) 的引用。当您的循环修改 的内容时`tempRow`，所有先前添加的条目也会更改（因为它们是同一个对象）。

在循环内移动以下行：

```
String[][] tempRow = new String[1][2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:33:34.513

您正在尝试创建一个对象值数组。

使用`ArrayList<String[][]>`不是**做到**这一点的方法。

创建一个类

```
public class Person {
    private long id;
    private String name;

    public long getId() {
         return id;
    }

    public void setId(long id) {
        self.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        self.name = name;
    }

} 
```

然后在你的代码中......

```
ArrayList<Person> myPeople = new ArrayList<Person>();

Person p = new Person();
p.setName("mary");
p.setId(1);

myPeople.add(p); 
```

从那里开始，你做起来很艰难，并且考虑到你在理解数组和对象引用方面有问题，在开始将多维原始数组与循环和集合结合使用之前，先学习这门语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:28:07.717

移动这一行：

```
String[][] tempRow = new String[1][2]; 
```

`while(result.next())`作为循环中的第一行。

**怎么了：**

如果你把循环放在`tempRow`外面，在循环的第二个迭代器中，相同的数组被修改，即被下一个值覆盖。在`while`循环完成时，您`fieldsList`仅在所有索引处包含最后一个元素。

运行你的循环 3 次，你会看到 Mary 作为输出。

# android - 从第二个 sim 呼叫

> ID：13231962
> 
> 赞同：21
> 
> 时间：2012-11-05T12:17:19.227
> 
> 标签：android, phone-call, dual-sim

我有一部双卡安卓手机。我正在使用此代码拨打电话：

```
private void callBack(String phone, Context context) {
        Intent callIntent = new Intent(Intent.ACTION_CALL)
                .setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        callIntent.setData(Uri.parse("tel:" + phone));
        context.startActivity(callIntent);

    } 
```

它工作正常。但它总是从 sim1（首选 sim）拨打电话。如何从 Sim2 拨打电话？有没有办法处理双卡手机？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-20T06:08:55.023

这似乎适用于摩托罗拉、Micromax、HTC、三星等大量双卡设备

```
intent.putExtra("com.android.phone.extra.slot", 0); //For sim 1 
```

或者

```
intent.putExtra("com.android.phone.extra.slot", 1); //For sim 2 
```

如果不起作用，试试这个，在三星 S 二重奏中这工作得很好。

```
intent.putExtra("simSlot", 0); //For sim 1 
```

或者

```
intent.putExtra("simSlot", 1); //For sim 2 
```

不幸的是，对于这些事情，我们必须进入命中/试用模式，因为没有官方文档支持双卡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-23T16:33:12.827

```
 final Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + phoneNumberOrUssd));
    final int simSlotIndex = 1; //Second sim slot

    try {
        final Method getSubIdMethod = SubscriptionManager.class.getDeclaredMethod("getSubId", int.class);
        getSubIdMethod.setAccessible(true);
        final long subIdForSlot = ((long[]) getSubIdMethod.invoke(SubscriptionManager.class, simSlotIndex))[0];

        final ComponentName componentName = new ComponentName("com.android.phone", "com.android.services.telephony.TelephonyConnectionService");
        final PhoneAccountHandle phoneAccountHandle = new PhoneAccountHandle(componentName, String.valueOf(subIdForSlot));
        intent.putExtra("android.telecom.extra.PHONE_ACCOUNT_HANDLE", phoneAccountHandle);
    } catch (Exception e) {
        e.printStackTrace();
    }

    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent); 
```

使用双卡 Asus Fonepad 7 Android 5.0

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T06:07:32.180

Android 不提供 API 来支持双 SIM 卡设备。Android 的 SIM 卡相关 API 仅支持默认 SIM 卡（通常是 SIM #1）。在 Android 上支持双 SIM 卡是硬件实现，因此设备制造商必须实现自己的 API 或自定义源代码以支持他们的硬件组件。您可以联系设备制造商以获取支持双 SIM 卡的 SDK。

# c# - 使用 google drive api .net 检查上传文件的状态

> ID：13231963
> 
> 赞同：1
> 
> 时间：2012-11-05T12:17:31.707
> 
> 标签：c#, .net, google-drive-api

我正在编写一个应用程序来检查上传文件的状态。该文件不会由应用程序上传，但会自行上传`google drive`。这是我的问题 - 有没有办法通过桌面应用程序使用或通过任何其他方式上传`monitor`的状态。通过任何其他方式，我的意思是，也许应用程序可能正在创建一个用于在计算机本身中写入的文件。如果有类似的，请告诉我如何访问该文件。`file``google drive``google drive api``google drive``upload status``file`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:37:36.873

抱歉，目前没有记录和支持的方法可以使用 Drive API 执行此操作。您还可以使用其他选项（请参阅评论），但没有使用 Drive API。

# windows - 我的 openGL 着色器不会链接到 Eclipse 之外？

> ID：13231964
> 
> 赞同：1
> 
> 时间：2012-11-05T12:17:55.903
> 
> 标签：windows, eclipse, opengl, glsl

因此，我正在尝试为学校构建一个简单的螺旋图生成器，并且在 Windows 7 的 Eclipse CDT 中一切正常。我的程序为每个生成的螺旋图分配了一个默认着色器（最多 5 个）。还有 3 个其他着色器程序，用户可以选择分配给任何螺旋计。在 Eclipse 内部，它完全可以正常工作，但是在 Eclipse 外部运行时，着色器无法链接。该程序使用 GLUT 和 GLEW，我在可执行文件的目录中包含了必要的 .dll。我一直在尝试解决这个问题 4 个小时，但不知道是什么导致在 eclipse 之外链接失败而不会一直失败。

我不会包含所有着色器，但这里是前 2 个无法链接并导致应用程序终止的着色器

```
#version 330 

layout (location = 0) in vec4 vPosition; 
uniform mat4 model;
uniform mat4 view;
uniform mat4 proj;

out vec4 color; 

void main() 
{ 
   gl_Position = proj * view * model * vPosition;
   color = vec4( 
        (4 - vPosition.z) * (4 - vPosition.z) / 16.0, 
        (2.0 - abs( 2.0 - vPosition.z )) / 2.0, 
        vPosition.z * vPosition.z / 16.0,
        1.0
   );
} 
```

和片段着色器

```
#version 330 

in vec4 color; 

void main() 
{ 
   gl_FragColor = color;
} 
```

和打印日志

```
Vertex shader was successfully compiled to run on hardware.

Fragment shader was successfully compiled to run on hardware.
Fragment shader(s) failed to link,  vertex shader(s) failed to link. 
ERROR: error(#280) Not all shaders have valid object code
ERROR: error(#280) Not all shaders have valid object code 
```

我用来编译和链接着色器的`InitShader()`函数适用于我过去做过的应用程序。我唯一不同的是我使用它来生成几个不同的着色器程序并将它们分配给`programs[]`而不是仅仅编译 1 并为整个应用程序运行它。

```
program[0] = InitShader("shaders/vshader.glsl", "shaders/fshader.glsl");
program[1] = InitShader("shaders/vshader2.glsl", "shaders/fshader.glsl");
program[2] = InitShader("shaders/vshader3.glsl", "shaders/fshader.glsl");
program[3] = InitShader("shaders/vshaderw.glsl", "shaders/fshader.glsl"); 
```

但无论哪种方式，这里都是`InitShader()`.

```
GLuint InitShader(const char* source, GLenum type)
{
    GLuint shader = glCreateShader(type);
    glShaderSource(shader, 1, (const GLchar**) &source, NULL );
    glCompileShader(shader);
    printLog( shader );

    return shader;
}

GLuint InitShader(const char* vfile, const char *ffile) {
    GLuint program = glCreateProgram();
    GLuint shader;

    // stringify and attach vshader
    std::ifstream vertstream(vfile);
    std::string vert((std::istreambuf_iterator<char>(vertstream)), std::istreambuf_iterator<char>());
    shader = InitShader(vert.c_str(), GL_VERTEX_SHADER);
    glAttachShader( program, shader );

    // stringify and attach fshader
    std::ifstream fragstream(ffile);
    std::string frag((std::istreambuf_iterator<char>(fragstream)), std::istreambuf_iterator<char>());
    shader = InitShader(frag.c_str(), GL_FRAGMENT_SHADER);
    glAttachShader( program, shader );

    // link program
    glLinkProgram(program);

    printLog(program);
    // link  and error check
    GLint  linked;
    glGetProgramiv( program, GL_LINK_STATUS, &linked );
    if ( !linked ) {
        fprintf(stderr, "Shaders failed to link!\n");
        exit( EXIT_FAILURE );
    }

    // use program object
    glUseProgram(program);

    return program;
} 
```

这里是凌晨 4 点，所以我的灰色细胞快用完了哈哈。而且它不是真正的家庭作业帮助，可执行文件不需要在 eclipse 之外运行，我只想知道如何为自己创建独立的程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:04:07.933

你的问题的原因在这里：

> ```
> program[0] = InitShader("shaders/vshader.glsl", "shaders/fshader.glsl"); 
> ```

着色器源文件的路径是*相对*的。很有可能，Eclipse 从不同的工作目录（可能是您的项目根目录）运行您的程序，而不是直接执行程序时的工作目录。

解决方案：要么

*   确保程序启动时的工作目录与内部使用的相对路径匹配（非常不可靠）
*   在程序中使用绝对路径（非常不灵活）

或者，我的建议

*   在运行时确定着色器文件的位置（命令行选项、可执行二进制文件的位置等）并在运行时相应地调整路径。

# css - 另一个下的 CSS 锚点，两者都为空以在 javascript 中设置动画

> ID：13231968
> 
> 赞同：0
> 
> 时间：2012-11-05T12:18:04.533
> 
> 标签：css, jquery

今天我正在修复顶部按钮以移动隐藏的图像。我想在另一个下放一个空锚。用于 javascript 的锚点，并为隐藏的图像设置动画。

这是 jsfiddle [http://jsfiddle.net/JohnnyDevv/TR4ps/4/](http://jsfiddle.net/JohnnyDevv/TR4ps/4/)

这里是 html、javascript 和 css，所以你可以更好地理解。

HTML

```
<div id="hidden-cartoons">
    <img src="https://lh6.googleusercontent.com/-aEPxXvvzbgE/UJesTFlawfI/AAAAAAAAAz4/iYJpZwkkZ20/s228/velejador.png" class="cartoon velejador">
    <img src="https://lh3.googleusercontent.com/-SdWM2VqioyI/UJesVjjZ6WI/AAAAAAAAA0A/vStlRdYcEWA/s338/bodoleite.png" class="cartoon bodoleite">
</div>    
<div id="cartoons-buttons">
    <a href="javascript:void(0)" class="left" id="velejador"></a>
    <a href="javascript:void(0)" onclick="doSomething();" class="right"></a>
    <a href="javascript:void(0)" class="left" id="bodoleite"></a>
    <a href="javascript:void(0)" onclick="doSomething();" class="right"></a>
</div>​ 
```

CSS

```
#hidden-cartoons {
    position:absolute;
    z-index:-99;
}

.cartoon {
    width:40px;
    position:absolute;
}
.cartoon.velejador {
    margin-top:10px;
    z-index:-99;
}

.cartoon.bodoleite {
    margin-top:60px;
    z-index:-99;
}   
#cartoons-buttons {
        width:320px;
        height:520px;
        position:absolute;
        z-index:100;
    } 
    .left {
        padding:20px;
        cursor:pointer;
        margin-right: 120px;
    }
    .right {
        padding:20px;
        cursor:pointer;
        margin-left: 120px;
    }
    #velejador {
        background-color:#00ff00;
    }
    #bodoleite {
        margin-top: 80px;
        background-color:#ff0000;
    }​ 
```

Javascript

> $(文档).ready(函数() {
> 
> ```
> $('#velejador').mouseover(function() {
>     $('.velejador').stop().animate({
>         left: '+50',
>         width: '40px'
>     }, 1000);
> }).mouseout(function() {
>     $('.velejador').stop().animate({
>         left: '0',
>         width: '40px'
>     }, 1000);
> });
> $('#bodoleite').mouseover(function() {
>     $('.bodoleite').stop().animate({
>         left: '+50',
>         width: '40px'
>     }, 1000);
> }).mouseout(function() {
>     $('.bodoleite').stop().animate({
>         left: '0',
>         width: '40px'
>     }, 1000);
> }); });​ 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:29:16.073

CSS 中的类之间没有空格。

```
.cartoon .bodoleite {
margin-top:60px;
z-index:-99;
} 
```

更新：http: [//jsfiddle.net/TR4ps/32/](http://jsfiddle.net/TR4ps/32/)

不确定那些 .left 和 .right div 的意义是什么。您需要绝对定位锚点并给它们一个高度和一个宽度。我认为至少这是你所追求的。

```
#hidden-cartoons {
position:absolute;
z-index:-99;
}

.cartoon {
width:40px;
position:absolute;
}
.cartoon.velejador {
margin-top:0px;
z-index:-99;
}

.cartoon.bodoleite {
margin-top:60px;
z-index:-99;
}   
#cartoons-buttons {
width:320px;
height:520px;
position:absolute;
z-index:100;
} 
#velejador {
position:absolute;
height:60px;
width:40px;
background-color:#00ff00;
float:left;
}
#bodoleite {
position:absolute;
background-color:#ff0000;
float:left;
height:100px;
width:40px;
top:60px;
}    ​ 
```

# linux - 从socket到netdevice linux的控制流

> ID：13231977
> 
> 赞同：0
> 
> 时间：2012-11-05T12:18:38.730
> 
> 标签：linux, linux-kernel, socket.io

我正在尝试在 linux 中实现新的网络设备驱动程序。我开发了新的 netdevice ，但我不知道如何将开发的 netdriver 链接到 socket 或如何从 socket 调用我的 netdevice。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:27:11.983

我认为这个链接会帮助你..

[http://www.linuxfoundation.org/collaborate/workgroups/networking/kernelflow](http://www.linuxfoundation.org/collaborate/workgroups/networking/kernelflow)

只需按照图像中给出的路径..

[http://www.linuxfoundation.org/images/1/1c/Network_data_flow_through_kernel.png](http://www.linuxfoundation.org/images/1/1c/Network_data_flow_through_kernel.png)

# javascript - 将按钮 (HTML) 插入 Google 可视化表格图表

> ID：13231982
> 
> 赞同：10
> 
> 时间：2012-11-05T12:18:57.883
> 
> 标签：javascript, jquery, html, charts, google-visualization

## 问题

使用 Google 图表工具可以将 HTML 值插入到字段值中，但是，我不相信这是一种好的做法。

我使用的方法如下：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Name', 'Height', 'Smokes','test'],
    ['Tong Ning mu', 174, true,'<input type="button" value="test" />'],
    ['Huang Ang fa', 523, false,'<input type="button" value="test" />'],
    ['Teng nu', 86, true,'<input type="button" value="test" />']
  ]);

  // Create and draw the visualization.
  visualization = new google.visualization.Table(document.getElementById('table'));
  visualization.draw(data, {
    allowHtml: true
  });
} 
```

## 我的问题

1.  还有其他更好的方法可以实现这一目标吗？
2.  有没有办法从这些按钮中捕获事件，同时检索正在接收事件的行的 id？换句话说，我如何知道单击了哪个按钮以及它代表了哪一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-25T19:30:12.057

> 有没有办法从这些按钮中捕获事件，同时检索正在接收事件的行的 id？换句话说，我如何知道单击了哪个按钮以及它代表了哪一行？

**例如尝试这种方式**

```
google.charts.load('current', {'packages':['table']});
google.charts.setOnLoadCallback(drawTable);
function getSelectedRowNumber(table) {
  var selection = table.getSelection();
  var message = '';

  for (var i = 0; i < selection.length; i++) {
    var item = selection[i];
    if (item.row != null && item.column != null) {
      message += '{row:' + item.row + ',column:' + item.column + '}';
    } else if (item.row != null) {
      message += '{row:' + item.row + '}';
    } else if (item.column != null) {
      message += '{column:' + item.column + '}';
    }
  }
  if (message == '') {
    message = 'nothing';
  }
  alert('You selected ' + message); 
}
function drawTable() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Name', 'Height', 'Smokes','test'],
    ['Tong Ning mu', 174, true,'<input type="button" value="test" />'],
    ['Huang Ang fa', 523, false,'<input type="button" value="test" />'],
    ['Teng nu', 86, true,'<input type="button" value="test" />']
  ]);

  // Create and draw the visualization.
  var table = new google.visualization.Table(document.getElementById('table_div'));
  table.draw(data, {
    allowHtml: true,
    showRowNumber: true,
    width: '100%',
    height: '100%',
    cssClassNames: {tableRow: 'myClass'}
  });
  // this works for buttons
  $(document).on('click','input[type=button]',function() {
    getSelectedRowNumber(table);
  });
  // this works for clicking on row uncomment to test it
  /*$(document).on('click','tr.myClass',function() {
    getSelectedRowNumber(table);
  });*/
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<div id="table_div"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T14:13:14.953

我使用 Google Charts 已经有一段时间了，据我所知没有更好的方法。

你的方法应该是有效的。祝你好运。:)

# php - 检索特定于订阅用户的帖子

> ID：13231989
> 
> 赞同：1
> 
> 时间：2012-11-05T12:19:19.510
> 
> 标签：php, cakephp

> **可能的重复：**
> [CakePHP 订阅用户模型](https://stackoverflow.com/questions/13219037/cakephp-subscribe-users-model)

我有三个模型

1.  用户
2.  邮政
3.  友谊

我想要的是，如果用户 A 订阅了用户 B 和用户 C，那么用户 A 可能只能查看用户 B 和 C 而不是其他人共享的帖子。

首先，我想知道我是否进行了适当的关联。

用户模型：

```
public $hasAndBelongsToMany = array(
      'UserFriendship' => array(
          'className' => 'User',
          'joinTable' => 'friendships',
          'foreignKey' => 'user_from',
          'associationForeignKey' => 'user_to'
        )
   ); 
```

友谊模型：

```
 public $hasMany = array(
      'FriendFrom'=>array(
         'className'=>'Friendship',
         'foreignKey'=>'user_from'
      ),
      'FriendTo'=>array(
         'className'=>'Friendship',
         'foreignKey'=>'user_to'
      )
   );

public $belongsTo = array(
  'UserFrom'=>array(
     'className'=>'User',
     'foreignKey'=>'user_from'
  ),
  'UserTo'=>array(
     'className'=>'User',
     'foreignKey'=>'user_to'
  ) 
```

);

如果关联是正确的，我到底与 Post Model 或 Post Controller 或其他任何地方向用户 A 显示他订阅的用户的帖子有什么关系？

我只需要一点提示，因为我无法做出任何适当的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:22:46.723

我总是发现最简单的方法是：找到用户 A 的朋友的用户 ID：

```
$this->User->Friendship->find('list', array('fields'=>array('Friendship.user_to'),'conditions'=>array('Friendship.user_from'=>$this->Auth-User('id')); 
```

之后，您可以找到发布在您的用户 ID 数组中的所有`Post.user_id`帖子`IN`：

```
$this->Post->find('all',array('conditions'=>array('Post.user_id'=>$friendIds)); 
```

# jquery - 使用单选按钮禁用/启用文本字段 (jQuery)

> ID：13231991
> 
> 赞同：1
> 
> 时间：2012-11-05T12:19:31.633
> 
> 标签：jquery, onclick, switch-statement, textfield, radio

感谢过去的帮助。我又问你了。

我想要 2 个单选按钮，这将改变文本输入的状态（启用/禁用）。

我设法使它从禁用变为启用，但问题是，当您在单选按钮之间切换时，文本字段仍然启用。我不希望那样。

html在小提琴中

```
$(document).ready( function(){
$('#casodhoda,#casodhoda1').prop('disabled',true);
$('input[type=radio][name=radioknof1]').click( function(){
$('#casodhoda,#casodhoda1').prop('disabled',true).val('');
$(this).next('span').children('wpcf7-form-control-wrap casodhoda').prop('disabled',false).triggerHandler('focus');
});
}); 
```

编辑，修改了一些代码，并且无论如何都无法获得工作解决方案了。我希望在加载时禁用输入字段，当用户单击收音机时，它应该启用两者并专注于第一个输入字段。[http://jsfiddle.net/wLFKD/3/](http://jsfiddle.net/wLFKD/3/)在这里。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:27:42.583

根据您的网站 html 完全更改。这应该有效：

```
$(document).ready( function(){
  $('#casodhoda,#casprihoda').prop('disabled',true);
  $('input[type=radio][name=radioknof]').click( function(){
    $('#casodhoda,#casprihoda').prop('disabled',true).val('');
    $(this).next('span').children('.wpcf7-form-control').prop('disabled',false).triggerHandler('focus');
  });
}); 
```

有一个错字。如果这不起作用，我能想到的唯一其他方法是......不，我认为这会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:38:30.530

为什么不呢，另一个**不需要 Javascript**的解决方案？

```
// HTML
<form>
    <div>
        <input id="trigger-1" type="radio" name="radioknof" value="text1"/>
        <label for="trigger-1"><input type="text" id="input-1" /></label>
    </div>
    <div>
        <input id="trigger-2" type="radio" name="radioknof" value="text2"/>
        <label for="trigger-2"><input type="text" id="input-2" /></label>
    </div>
</form>​

// CSS, but just for styling, it doesn't have functional meaning :)
form {padding: 2%}
div {margin: 1em 0}
input[type='radio'] {cursor: pointer;}​ 
```

[http://jsfiddle.net/nUWcF/](http://jsfiddle.net/nUWcF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:36:27.583

这个标记：

```
<input type="radio" name="radioknof" value="text1"/>
<input type="text" id="id1" disabled="disabled"/><br/><br/>
<input type="radio" name="radioknof" value="text2"/>  
<input type="text" id="id2" disabled="disabled"/>​ 
```

这个脚本：

```
$('input[name="radioknof"]').on('click', function(){            
    $(this).next().prop('disabled',false).siblings('input[type=text]').prop('disabled',true);
}); 
```

得到你想要的结果：http: [//jsfiddle.net/uefAK/](http://jsfiddle.net/uefAK/)

# xcode - cocos2d，如何为 iPad 自动放大图像

> ID：13231999
> 
> 赞同：0
> 
> 时间：2012-11-05T12:19:57.910
> 
> 标签：xcode, cocos2d-iphone

我想知道是否有一种方法可以为 iPad 自动升级图像，如果可以的话如何。或者如果建议做单个图像，我如何制作 cocos2d 识别的 iPad 图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:54:53.427

不建议放大图像。原因很简单，你不会获得任何质量（事实上，你会失去一些）。可以通过 scale 属性进行动态缩放，但同样会失去质量，在这种情况下也会失去性能。

相反，使用像 TexturePacker 这样的工具，以尽可能高的分辨率设计图像，并允许 TexturePacker 处理资源的导出和缩小（没关系）到较低的分辨率。

Raj 已经回答了文件后缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:00:15.583

对图像使用以下扩展名。

```
background.png   - for iPhone SD (480x320 )
background-hd.png   - for iPhone HD (960x640 )
background-ipad.png   - for iPad ( 1024x768 )
background-ipadhd.png   - for iPad ( 2048x1536 ) 
```