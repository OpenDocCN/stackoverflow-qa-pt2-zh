# StackOverflow 问答 15923000-15923999

# wordpress - 是否可以从已安装的插件创建 WordPress 插件 zip 文件？

> ID：15923003
> 
> 赞同：8
> 
> 时间：2013-04-10T10:13:40.450
> 
> 标签：wordpress

我安装了 WordPress，并安装并激活了一些插件。但是我丢失了原始插件`.zip`文件。我想将一些插件安装到新的 WordPress 中。

我**不想**迁移/移动/备份恢复整个当前的 WP 安装。我只想`.zip`为一些已安装的插件重新创建原始插件文件。我确实可以访问整个文件树以及数据库。有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-11T15:52:38.263

是的，首先在插件操作链接中添加一个下载链接：

![](https://i.stack.imgur.com/aqPUj.png)

```
/**
 * Add action links to each plugin
 * @author brasofilo
 */
add_filter( 'plugin_action_links', function ( $plugin_meta, $plugin_file, $plugin_data, $status ) 
{
    $plugin_dir = dirname( $plugin_file );
    if( !empty( $plugin_dir ) && '.' !== $plugin_dir )
        $plugin_meta[] = sprintf( 
            "<a href='#' class='down-zip down-icon' data-file='%s' title='%s'></a>",
            $plugin_dir,
            'Download zip file for ' . $plugin_data['Name']
        );
    else
        $plugin_meta[] = "Root plugin, cannot zip";

    return $plugin_meta;
}, 10, 4 ); 
```

然后设置样式并附加 JS 动作：

```
/**
 * Style and actions for wp-admin/plugins.php
 * @author brasofilo
 */
add_action( 'admin_footer-plugins.php', function() {
    ?>
    <style>
    .down-icon:before { /* http://melchoyce.github.io/dashicons/ */
        content: "\f316";
        display: inline-block;
        -webkit-font-smoothing: antialiased;
        font: normal 20px/1 'dashicons';
        vertical-align: top;
    }
    </style>
    <script>
    root_wp = '<?php echo WP_PLUGIN_DIR; ?>' + '/';

    /**
     * Virtual $_POST
     * creates form, appends and submits
     *
     * @author https://stackoverflow.com/a/9815335/1287812
     */
    function b5f_submit_form_post( path, params, method ) 
    {
        $ = jQuery;
        method = method || "post"; // Set method to post by default, if not specified.

        var form = $(document.createElement( "form" ))
            .attr( {"method": method, "action": path} );

        $.each( params, function(key,value)
        {
            $.each( value instanceof Array? value : [value], function(i,val)
            {
                $(document.createElement("input"))
                    .attr({ "type": "hidden", "name": key, "value": val })
                    .appendTo( form );
            }); 
        }); 

        form.appendTo( document.body ).submit();
    }

    jQuery(document).ready(function($) 
    {   
        /**
         * Fire a plugin download
         */
        $("a.down-zip").click(function() 
        {  
            event.preventDefault();

            b5f_submit_form_post( '', { 
                action: 'zip_a_plugin',
                plugin_to_zip: root_wp + $(this).data('file'), 
                plugin_name: $(this).data('file')
            });
        });
    });            
    </script>
    <?php
}); 
```

捕获自定义`$_POST`ed 数据并将插件目录处理为 zip：

```
/**
 * Dispatch $_POST['action']=>'zip_a_plugin' custom action
 * @author brasofilo https://stackoverflow.com/a/23546276/1287812
 */ 
add_action('admin_action_zip_a_plugin', function() 
{
    if( empty( $_REQUEST['plugin_to_zip'] ) )
        return;

    zipFile( $_REQUEST['plugin_to_zip'], $_REQUEST['plugin_name'], false );
}); 
```

最后，使用Stack 上的[压缩功能](https://stackoverflow.com/a/17585672/1287812)

```
/**
 * Makes zip from folder
 * @author https://stackoverflow.com/a/17585672/1287812
 */
function zipFile($source, $destination, $flag = '')
{
    if ( !extension_loaded('zip') ) {
        return false;
    }

    $zip = new ZipArchive();
    $tmp_file = tempnam(WP_CONTENT_DIR,'');
    if (!$zip->open($tmp_file, ZIPARCHIVE::CREATE)) {
        return false;
    }

    $source = str_replace('\\', '/', realpath($source));
    if($flag)
    {
        $flag = basename($source) . '/';
        //$zip->addEmptyDir(basename($source) . '/');
    }

    if (is_dir($source) === true)
    {
        $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source), RecursiveIteratorIterator::SELF_FIRST);
        foreach ($files as $file)
        {
            $file = str_replace('\\', '/', realpath($file));

            if (is_dir($file) === true)
            {
                $src = str_replace($source . '/', '', $flag.$file . '/');
                if( WP_PLUGIN_DIR.'/' !== $src ) # Workaround, as it was creating a strange empty folder like /www_dev/dev.plugins/wp-content/plugins/
                    $zip->addEmptyDir( $src );
            }
            else if (is_file($file) === true)
            {
                $src = str_replace($source . '/', '', $flag.$file);
                $zip->addFromString( $src, file_get_contents($file));
            }
        }
    }
    else if (is_file($source) === true)
    {
        $zip->addFromString($flag.basename($source), file_get_contents($source));
    }

    $tt = $zip->close();
    if(file_exists($tmp_file))
    {
        // push to download the zip
        header('Content-type: application/zip');
        header('Content-Disposition: attachment; filename="'.$destination.'"');
        readfile($tmp_file);
        // remove zip file is exists in temp path
        exit();
    } 
    else {
        echo $tt;
        die();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-13T01:56:51.763

有趣的是，从现有插件创建 zip 文件实际上很简单。

只需创建一个包含插件文件夹的 zip 文件。执行此操作的 unix 命令是：

```
$ cd wp-content/plugins
$ zip -r my-plugin.zip my-plugin 
```

然后，您可以下载生成的 my-plugin.zip 文件，然后通过上传到新站点（即：WP Admin -> Plugins -> Add New -> Upload）在 WordPress 插件安装中使用该文件。

显然，zip 文件不会包含任何数据库表/mod，但大多数插件会在安装时对此进行测试，并在安装时执行任何所需的数据库升级。不幸的是，如果不测试或检查插件源代码，或两者兼而有之，就无法知道这是否会成为问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-03T07:20:55.377

最简单、无代码的方法是使用另一个插件，例如[WordPress Downloader](https://wordpress.org/plugins/wp-downloader/)。

# r - 无法将数据框转换为事务对象

> ID：15923014
> 
> 赞同：0
> 
> 时间：2013-04-10T10:14:16.647
> 
> 标签：r, arules

我想用这个`arules`包来练习用R挖掘关联规则。数据是

```
datt <- structure(list(Item1 = c(0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 
0L), Item2 = c(0L, 0L, 0L, 1L, 0L, 1L, 1L, 0L, 0L, 0L), Item3 = c(0L, 
1L, 0L, 1L, 0L, 1L, 1L, 1L, 0L, 0L), Item4 = c(0L, 0L, 0L, 1L, 
0L, 0L, 0L, 0L, 0L, 0L), Item5 = c(1L, 0L, 0L, 1L, 0L, 0L, 0L, 
0L, 0L, 1L), Item6 = c(0L, 1L, 1L, 1L, 1L, 0L, 0L, 0L, 0L, 0L
), Item7 = c(0L, 1L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 0L), Item8 = c(0L, 
1L, 1L, 1L, 0L, 0L, 1L, 0L, 0L, 0L), Item9 = c(0L, 1L, 1L, 1L, 
0L, 0L, 0L, 0L, 1L, 0L), Item10 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L)), .Names = c("Item1", "Item2", "Item3", "Item4", 
"Item5", "Item6", "Item7", "Item8", "Item9", "Item10"), row.names = c(2L, 
3L, 4L, 5L, 6L, 8L, 9L, 10L, 11L, 12L), class = c("cast_df", 
"data.frame")) 
```

通过做

```
table5 <- as(datt, "transactions") 
```

出现此错误：

```
Error in as(datt, "transactions") : 
  no method or default for coercing “cast_df” to “transactions” 
```

我该怎么做才能将我的对象转换为“交易”对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-03T00:32:07.890

也许你忘记加载`arules`包。

```
library(arules) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:35:01.193

尝试这个 ：

```
as(as.matrix(datt), "transactions")
transactions in sparse format with
 10 transactions (rows) and
 10 items (columns) 
```

错误在这里很明显：

```
no method or default for coercing “cast_df” to “transactions” 
```

`class(datt)`是`cast_df`并且没有这种类型的强制方法（`as`）。

请注意，通常您在使用包时不需要手动进行强制转换`arules`，该函数会尝试在内部进行正确的强制转换。例如 ：

```
dissimilarity(x=as.matrix(datt),method='cosine') ## works
dissimilarity(x=datt,method='cosine')            ## you get the same coercion error 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-30T08:59:51.433

对我来说这有效

```
install.packages("arules") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-30T20:56:55.263

这些问题与在 markdown 中的代码块之前加载库有关。您已在 R 环境中加载了该库，因此代码可以正常工作。但是对于针织，您需要在降价中加载库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-15T14:22:23.803

我得到了同样的错误，它是通过添加库（矩阵）修复的

希望有帮助

# javascript - 如何检测android默认浏览器javascript

> ID：15923016
> 
> 赞同：1
> 
> 时间：2013-04-10T10:14:18.767
> 
> 标签：javascript, jquery, css, browser, browser-detection

Samsung Gallaxy S2 (Android OS, v2.3.4 (Gingerbread)) 自带默认浏览器，我遇到了一些 CSS realted 发布，它必须特别指定值。[我使用名为http://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)的 JS 库来检测操作系统和浏览器，这里它不能直接应用，它没有指定默认浏览器，如果我进行更改它会影响其他人（S3 , Nexus 等..),

请有人能给我建议一个选项来完成这项工作。

# css - 如何使用css使div填充剩余的垂直空间

> ID：15923019
> 
> 赞同：9
> 
> 时间：2013-04-10T10:14:29.727
> 
> 标签：css, html

我正在尝试使用*页眉*、*导航栏*、正文（在*导航栏*的右侧）和*页脚*制作标准网站布局。

现在我已经做到了：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">

            .header {
                float: top;
                width: 100%;
                height: 75px;
            }

            .navbar {
                float: left;
                width: 20%;
                height: 100%;
                height: 100%;
                min-height:100%;
                overflow: scroll;
            }

            .body {
                float: right;
                width: 80%;
                height: 100%;
                min-height:100%;
                overflow: scroll;
            }
            .footer {
                float: bottom;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div class="header"> Header </div>
        <div class="navbar"> Nav Bar </div>
        <div class="body"> Body </div>
        <div class="footer"> Footer</div>
    </body>
</html> 
```

产生这个：

![在此处输入图像描述](https://i.stack.imgur.com/XXyJP.png)

现在，如果我们检查 CSS：

```
.navbar {

    float: left;
    width: 20%;
    height: 100%;
    min-height: 100%;
    overflow: scroll;
}

.body {
    float: right;
    width: 80%;
    height: 100%;
    min-height: 100%;
    overflow: scroll;
} 
```

如您所见，我尝试设置正文和*导航栏的**高度*和*最小高度*以填充剩余的垂直空间，即：

 *![在此处输入图像描述](https://i.stack.imgur.com/6lqO8.png)

然而它并不影响它。但是，如果我`height: 500px`按预期进行调整大小（当然这现在不是很好的做法，因为不同的屏幕尺寸等会显示页面的不同部分或视图）：

![在此处输入图像描述](https://i.stack.imgur.com/tJY0T.png)

所以基本上我在问我如何能够`divs`在不使用一些硬编码值的情况下填充剩余的垂直空间，即`100px`我想以百分比来填充，因此页面在所有浏览器上看起来都一样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:21:43.370

将此代码添加到您的正文中，html：

```
body,html{
  height:100%;
} 
```

并制作您的导航栏`<div id="navbar">`，而不是`<div class="navbar">` 添加 height: 100%; 到您的导航栏

```
#navbar{
  height:100%
// rest of your code
} 
```

与您的内容相同，将其称为内容，因为已经使用了正文。

```
#content{
  height:100%
// rest of your code
} 
```

现在所有 div 的高度都为 100%，因此是整个浏览器的高度。

编辑：您的完整代码如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">

            html, body{
                padding: 0;
                margin: 0 auto;
                height: 100%;
            }

            #header {
                width: 100%;
                height: 75px;
            }

            #navbar {
                float: left;
                width: 20%;
                height: 100%;
                min-height:100%;
                overflow: scroll;
            }

            #content {
                float: right;
                width: 80%;
                height: 100%;
                min-height:100%;
                overflow: scroll;
            }
            #footer {
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div id="header"> Header </div>
        <div id="navbar"> Nav Bar </div>
        <div id="content"> Body </div>
        <div id="footer"> Footer</div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:19:51.960

对每个内容块（页眉、页脚、侧边栏、正文）使用绝对定位，对于正文和导航栏 div，设置顶部和底部位置属性，而不是指定高度属性。这将迫使它们填充剩余的视口高度。

[更多细节在这里](http://alistapart.com/article/conflictingabsolutepositions)

...为了支持 IE5 和 IE6，这是一个仅使用 CSS（无 javascript）[的改进版本。](http://www.dokma.dk/kongknabe/frameset_layout.html)*

# django - 让用户创建变量（及其数据类型） - Django

> ID：15923021
> 
> 赞同：0
> 
> 时间：2013-04-10T10:14:31.220
> 
> 标签：django, database-design, django-models

我正在尝试编写一个执行以下操作的 Django 应用程序：用户查看各种文章，然后针对这些文章编写变量。

```
i.e.:
Article is about Egypt.
User assigns: country = Egypt 
```

到目前为止，这很容易。不过，我希望拥有的是用户可以自己创建变量，而无需我将它们硬编码到模型中。
我怎样才能最好地做到这一点？

我应该在多对多字段上使用直通关系还是有其他更好的方法来做到这一点？如果我使用直通关系，我怎样才能让用户选择变量应该是什么数据类型？
我是否应该将每个字段类型的字段放入直通模型中，然后让用户以某种方式选择它？

我知道，这不仅仅是一个问题，但如果你回答我的第一个问题，我会**非常**高兴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:46:42.803

我假设“用户”是指基于包含文章的应用程序的其他应用程序。

使用模型继承： [https ://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)

```
class Article(models.Model):
    pub_date = models.DateTimeField(...)

class CountryArticle(Article):
    country = SomeSuitableModel() 
```

# ios - 重命名关系的核心数据迁移

> ID：15923025
> 
> 赞同：1
> 
> 时间：2013-04-10T10:14:45.653
> 
> 标签：ios, objective-c, core-data, mapping, core-data-migration

我已将现有关系从“bundleTopic”重命名为“bundle”（“bundleTopic”和“topic”都是相同的关系，更改是为了提高可读性）。但是，我无法映射以“bundleTopic”为关系的过去模型与以“topic”为关系的新版本之间的联系。

到目前为止，我已经尝试过：

1.  在新版本中的关系的“重命名 ID”字段中添加一个值
2.  在映射模型中，“键路径”字段：`$source.bundleTopic`和映射名称字段“ `QTQTopicToQTQTopic`。这给出了一个值表达式：

    FUNCTION($manager, "destinationInstancesForEntityMappingNamed:sourceInstances:" , "QTQTopicToQTQTopic", $source.bundleTopic)

但是，对于每个“捆绑”关系，我都会收到以下验证错误：

```
Error migrating data: Error Domain=NSCocoaErrorDomain Code=1560 "The operation couldn’t be completed. (Cocoa error 1560.)" UserInfo=0x16996740 {NSDetailedErrors=(
    "Error Domain=NSCocoaErrorDomain Code=1570 \"The operation couldn\U2019t be completed. (Cocoa error 1570.)\" UserInfo=0x169840f0 {NSValidationErrorObject=<NSManagedObject: 0x163b29f0> (entity: QTQBundle; id: 0x163b48d0 <x-coredata://F2CCE610-10AE-4910-A3B2-640200A74040/QTQBundle/p4> ; data: <fault>), NSValidationErrorKey=course, NSLocalizedDescription=The operation couldn\U2019t be completed. (Cocoa error 1570.)}", 
```

# ios - 是否可以通过视频/音频 IOS 发送推送通知？

> ID：15923026
> 
> 赞同：0
> 
> 时间：2013-04-10T10:14:49.397
> 
> 标签：ios, audio, video, push-notification

我正在开发一个使用苹果推送通知的应用程序。我实现了这个功能并且工作正常，现在客户询问发送带有音频/视频文件的推送通知。

你能告诉我苹果是否允许这种类型的通知，如果是的话，有什么建议可以实施。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:16:57.577

好吧，是的，不是的。您不能真正在推送通知中包含音频/视频。

您可以做的是，在推送通知的有效负载中，将 URL 添加到音频/视频文件。一旦您的用户选择查看推送通知，您就可以选择 URL 并加载音频/视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-24T21:25:43.667

我正在寻找这个并找到了这个线程。我想更新它，现在 iOs 10+ 现在支持图像、视频和音频，几乎没有限制，它们是：

具有强制触摸功能的设备支持视频、图像和音频。

没有强制触摸的设备仅支持图像。（不确定是否也支持音频，但绝对不支持视频）

看看[https://developer.apple.com/documentation/usernotifications/unnotificationattachment](https://developer.apple.com/documentation/usernotifications/unnotificationattachment)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:22:20.977

推送通知只是一条消息，它的长度非常有限（256 个字符，包括服务，或[更多](https://stackoverflow.com/questions/6307748/what-is-the-maximum-length-of-a-push-notification-alert-text)）。它可以在图标上添加一个数字，或者通过它的名称播放声音（声音应该在应用程序的文件夹中）并实际显示一条消息。你可以传递额外的数据——数字、链接或resourceId，但是资源需要以其他方式传递

# android - 绑定 IntentService 和 ProgressBar 没有百分比

> ID：15923033
> 
> 赞同：0
> 
> 时间：2013-04-10T10:15:10.290
> 
> 标签：android, bind, intentservice

`onBind(Intent intent)`存在于`IntentService`类中并[记录在案](http://developer.android.com/reference/android/app/IntentService.html#onBind%28android.content.Intent%29)，我尝试根据[绑定服务模式](http://developer.android.com/guide/components/bound-services.html)编写代码，但未`onHandleIntent`调用包含昂贵操作的代码。

1.  为什么？我写了自己的`BroadcastReceiver`来收听来自服务的消息。这是一种解决方法还是一个好的解决方案？
2.  还有第二个问题。如何刷新百分比`ProgressBar`？ [setProgress(int value)](http://developer.android.com/reference/android/widget/ProgressBar.html#setProgress%28int%29)没有像我预期的那样工作。我应该在`TextView`上面使用 a`ProgressBar`吗？

对不起，我有很多代码可以在这里发布，但我会给出[github 链接](https://github.com/Red-Planet/Sandbox_Android/tree/test_intent_service)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:44:42.507

> 为什么？

因为`IntentService`被设计为与命令模式一起使用，您可以通过`startService()`. 调用`startService()`将触发`onHandleIntent()`；别的都不会。

> 我编写了自己的 BroadcastReceiver 来收听来自服务的消息。这是一种解决方法还是一个好的解决方案？

由于不清楚您在说什么，我无法回答。

> 如何在 ProgressBar 上刷新百分比？

打电话`setProgress()`。

> setProgress(int value) 没有像我预期的那样工作。

由于您拒绝解释您的预期，我们无法为您提供帮助。

# c# - 将所有数据从一个用户控件复制到另一个相同类型的用户控件

> ID：15923041
> 
> 赞同：1
> 
> 时间：2013-04-10T10:15:42.083
> 
> 标签：c#, winforms, user-controls

我想使用复选框 SameAsPrevious 将所有数据从 HomeAddressUC 传输到 PermanentAddressUC

每个用户控件具有相同的类型（地址用户控件）

![在此处输入图像描述](https://i.stack.imgur.com/3jaFw.jpg)

填充 HomeAddressUC 的 DataSource 是这样的代码

```
private void SetTabPageDetails(string tabPageName, CustomerDetails customerDetailsCache)
{
     customerDetailsCache = // calling stored procedure
     PermanentAddressUC.SetDetails(customerDetailsCache.Addresses[0]);
} 
```

该数据源的范围取决于它的方法，`SetTabPageDetails()`我试图实现的唯一逻辑是复选框更改事件是

```
if (chkSameAsPervious.Checked)
{
    foreach (var addressCtl in from Control ctl in this.ADDRESS_TAB.Controls select ctl as BankSys24.UI.UserControls.AddressUserControl)
    {
        if (addressCtl.GroupBoxText == "Mailing Address")
        {
            // want to do something here
        }
    }
} 
```

我尝试关注相关链接

[需要两个用户控件（winforms）进行通信时的最佳实践](https://stackoverflow.com/questions/1063010/best-practice-when-you-need-two-user-controls-winforms-to-communicate?rq=1)

它说要使用第三个通用用户控件一个容器或接口

优化的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:24:08.810

我找到的可能的最短解决方案是这样的：

```
if (chkSameAsPervious.Checked)
            {
                    MailingAddressUC.SetDetails(PermanentAddressUC.GetDetails() as BankSys24.DTO.Customer.Address);
            } 
```

在哪里

```
 public object GetDetails()
        {
            return new BankSys24.DTO.Customer.Address { //data };
        } 
```

和

```
 public void SetDetails(object input)
        {
           //intermediate Object
            if (details != null)
            {
//Mapping

} 
```

Getdetails 将所有数据映射为容器类对象，可以直接传递给 SetDetails() ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:38:27.507

如果所有字段都相同，为什么您需要对家庭和邮寄地址进行不同的用户控制？

您可以同时使用一个用户控件并创建属性以将组名设置为“家庭地址”或“邮寄地址”

您可以有两个公共方法通过传递地址对象来设置地址字段，并通过读取表单的字段来获取地址对象。

在复选框的检查更改事件中，您可以通过调用家庭地址用户控件即时获取地址方法来获取地址对象，然后您可以通过传递地址对象调用设置地址方法来设置有关邮寄地址用户控件即时的详细信息。

# php - PHP 中的天数范围为月数

> ID：15923050
> 
> 赞同：0
> 
> 时间：2013-04-10T10:16:26.780
> 
> 标签：php, operators, date-range, date-arithmetic

我正在尝试使用天数（来自 $daydiff 的值）输出几个月。

**整个代码如下：**

```
$ArrivalDate = $variants_data['ArrivalDate'];

$daydiff=floor((abs(strtotime(date("Y-m-d")) - strtotime($ArrivalDate))/(60*60*24)));

if (!empty($daydiff) &&  $ArrivalDate == '2013-12-25') {
    $ETA ='Date Not Confirmed';
} 

elseif (!empty($daydiff) &&  is_null($ArrivalDate)) {
    $ETA ='Not available';
}

elseif ( $daydiff > 30 && $daydiff < 60 ) { // anything between 31 and 59 days is 1 month
    $ETA ='1 Month';
}

elseif ( $daydiff > 60 &&  $daydiff < 90  )  { // anything between 61 and 89 days is 2 months
    $ETA ='2 Months';
}

else
{
    $ETA ='';
} 
```

**这部分代码没有给我所需的结果**

```
elseif ( $daydiff > 30 && $daydiff < 60 ) { // anything between 31 and 59 days is 1 month
    $ETA ='1 Month';
}

elseif ( $daydiff > 60 &&  $daydiff < 90  )  { // anything between 61 and 89 days is 2 months
    $ETA ='2 Months';
}

else
{
$ETA ='';
} 
```

我得到“日期未确认”作为结果。如果 $daydiff 值在该范围内，则所需结果为“1 个月”或“2 个月”。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:34:34.180

尝试

```
 $ArrivalDate = $variants_data['ArrivalDate'];

if (!empty($ArrivalDate)){
    $ArrivalDate = date('Y-m-d', strtotime($ArrivalDate));

    $daydiff=floor(abs(strtotime(date("Y-m-d")) - strtotime($ArrivalDate)) / (60*60*24));

    echo $daydiff;

    if ($ArrivalDate == '2013-12-25') {
        $ETA ='Date Not Confirmed';
    }
    elseif ( $daydiff > 30 && $daydiff < 60 ) { // anything between 31 and 59 days is 1 month
        $ETA ='1 Month';
    }

    elseif ( $daydiff > 60 &&  $daydiff < 90  )  { // anything between 61 and 89 days is 2 months
        $ETA ='2 Months';
    }
    else
    {
        $ETA ='';
    }
} else {
    $ETA ='Not available';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:35:19.100

试试这个这里是一个简单的例子来计算月份的日期差异，没有额外的 if else 条件

```
<?php

$date1=date('2013-1-1');
$date2=date('2013-5-2');

echo "date1 :: ".$date1."<br>";
echo "date2 :: ".$date2."<br>";

$date_diff=strtotime($date2)-strtotime($date1);

echo "date difference in months => ".floor(($date_diff)/2628000)." months <br>";
?> 
```

# jquery - 在 Codeigniter 的控制器中接收 JSON

> ID：15923054
> 
> 赞同：0
> 
> 时间：2013-04-10T10:16:33.983
> 
> 标签：jquery, ajax, codeigniter

将 json 传递给控制器​​：

```
$.post('xyz_controller/my_function', {url:"dummy data"}, 
    function(data) {
        alert("Success!");
    }, 'json'); 
```

在我的控制器功能（my_function）中，我收到如下：

```
$received = $this->input->post('url');
echo json_encode($received); 
```

不幸的是，`$this->input->post('url')`给我假。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:20:08.900

我认为这是因为您控制器的路径不正确

尝试使用`site_url()`

```
$.post('<?php echo site_url("xyz_controller/my_function") ?>', {url:"dummy data"}, 
function(data) {
    alert("Success!");
}, 'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:26:48.357

```
 $.ajax
    ({
        type    :   "POST", 
        async   :   false, 
        url     :   $phpURL,   
        data    :   "url="+$phpURL,
        success :   function(data)
        {
            var response = jQuery.parseJSON(data);

            console.log(response)
        },
        error: function()
        {
            alert("error occured");
            return false;
        }
    }); 
```

PHP代码：

```
$url = "";
$posted_data = $this->input->post();
if(isset($posted_data['url']))                  
{
  $url      = $posted_data['url'];
 }

 echo $url; 
```

# sencha-touch-2 - Sencha 构建失败的指南针进程以非零代码 1 退出

> ID：15923056
> 
> 赞同：5
> 
> 时间：2013-04-10T10:16:43.737
> 
> 标签：sencha-touch-2, compass-sass, sencha-cmd

我正在尝试在 Windows 操作系统上构建我的 Sencha 应用程序，但出现此错误。我正在尝试使用 sencha 命令 - sencha app build package，但构建失败。我已经安装了蚂蚁和指南针

```
C:\xampp\htdocs\WhatsUnderMe>sencha app build package
Sencha Cmd v3.1.0.256
[INF]
[INF] init-plugin:
[INF]
[INF] init-plugin:
[INF] Invoking plugin (C:\xampp\htdocs\WhatsUnderMe\.sencha\app\plugin.xml) - supported targets: -before-app-build
[INF]
[INF] -before-app-build:
[INF] Invoking plugin (C:\xampp\htdocs\WhatsUnderMe\.sencha\app\plugin.xml) - supported targets: app-build
[INF]
[INF] cmd-root-plugin.init-properties:
[INF]
[INF] init-properties:
[INF]
[INF] init-sencha-command:
[INF]
[INF] init:
[INF]
[INF] -before-app-build:
[INF]
[INF] app-build-impl:
[INF]
[INF] package:
[INF]
[INF] -before-init-local:
[INF]
[INF] -init-local:
[INF]
[INF] -after-init-local:
[INF]
[INF] init-local:
[INF]
[INF] find-cmd:
[INF]
[INF] -before-init:
[INF]
[INF] -init:
[INF] Initializing Sencha Cmd ant environment
[INF] Adding antlib taskdef for com/sencha/command/compass/ant/antlib.xml
[INF]
[INF] -after-init:
[INF]
[INF] init:
[INF]
[INF] -before-build:
[INF]
[INF] sass:
[INF]
[INF] -before-sass:
[INF]
[INF] -sass:
[INF] executing compass using system installed ruby runtime
NoMethodError on line ["23"] of C: undefined method `empty?' for nil:NilClass
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/sass-3.1.7/lib/sass/engine.rb:293:in `_render'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/sass-3.1.7/lib/sass/engine.rb:240:in `render'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:140:in `block (2 leve
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:139:in `block in comp
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/logger.rb:45:in `red'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:138:in `compile'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:118:in `compile_if_re
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:103:in `block (2 leve
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:101:in `each'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:101:in `block in run'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/compiler.rb:100:in `run'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/commands/update_project.rb:45:in
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/commands/base.rb:18:in `execute'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/commands/project_base.rb:19:in `e
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:43:in `per
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:15:in `run
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/bin/compass:30:in `block in <top (required)>'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/bin/compass:44:in `call'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/gems/compass-0.12.2/bin/compass:44:in `<top (required)>'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/bin/compass:23:in `load'
  C:/Users/Ido Tsuk/bin/Sencha/Cmd/3.1.0.256/extensions/sencha-compass/gems/bin/compass:23:in `<main>'
[ERR]
[ERR] BUILD FAILED
[ERR] com.sencha.exceptions.ExProcess: compass process exited with non-zero code : 1
[ERR]
[ERR] Total time: 0 seconds
[ERR]
[ERR] BUILD FAILED
[ERR] com.sencha.exceptions.BasicException: The following error occurred while executing this line:
[ERR] C:\xampp\htdocs\WhatsUnderMe\.sencha\app\build-impl.xml:223: com.sencha.exceptions.ExProcess: compass process exited with non-zero code
[ERR]
[ERR] Total time: 1 second
[ERR] com.sencha.exceptions.BasicException: The following error occurred while executing this line:
C:\xampp\htdocs\WhatsUnderMe\.sencha\app\build-impl.xml:223: com.sencha.exceptions.ExProcess: compass process exited with non-zero code : 1 
```

我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T15:24:44.367

我对 Sencha Touch 2.2、Sencha Cmd 3.1.1.270 和 Ruby 2.x 有同样的错误。

为了解决这个问题，我卸载了 Ruby 2.x 并安装了 Ruby 1.9.3 [http://rubyforge.org/frs/download.php/76798/rubyinstaller-1.9.3-p392.exe](http://rubyforge.org/frs/download.php/76798/rubyinstaller-1.9.3-p392.exe)

希望这对你有帮助。否则，您应该提供有关您正在使用的版本的更多详细信息。或者您可以像我一样开始使用最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T09:31:09.137

安装 1.9.3 ruby​​ 适用于大多数人。对我来说它没有用。

我所做的修复它是创建一个新项目并将触摸文件夹和资源复制到我当前的项目中。之后我可以正常构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T15:31:54.367

在我的项目中，由于许多烦人的原因，我同时使用了两个版本的 Ruby。因此，我希望下一个建议对所有无法删除新版 Ruby 的人（和女孩）有所帮助：

*   您需要安装*ruby​​-switch* : `sudo apt-get install ruby-switch`。
*   然后检查当前版本：`ruby -v`.
*   显示可用版本列表：`ruby-switch --list`。
*   现在将旧（新）版本设置为默认值：`sudo ruby-switch --set ruby2.2`.
*   检查当前版本：`ruby -v`

# java - 将两种不同的对象类型传递给Java中的单个方法？

> ID：15923057
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:16:47.260
> 
> 标签：java, android, oop, object, smartcard

我尝试关注这个 Stackoverflow[帖子](https://stackoverflow.com/questions/10777384/method-accepting-two-different-types-as-parameter)，但它并没有帮助我实现我想要实现的目标。我想知道它是否可以在 Java 中实现。这是问题陈述。我试图研究 Java 反射、Haskel Either 等，但它最终有两个不同的对象。

我有两种类型的对象。

1.  > com.mobilesecuritycard.openmobileapi.Session msc_session；

2.  > org.simalliance.openmobileapi.Session sim_session

我想要一个接受上面给出的两个对象中的任何一个的方法。

例如

```
public void runOperation(Object activeSession) {

activeSession.openLogicalChannel(APPLET_AID);
-- do the rest of operations ---
} 
```

我想使用该功能，如下所示

```
if(isSetSIMSessionTrue()){
    Log.i(LOG_TAG, "Using SIM Session as its True");
    sim_session = getSim_session();
    runOperation((org.simalliance.openmobileapi.Session) sim_session);
} else{
    Log.i(LOG_TAG, "Using MSC Session as its false");
    msc_session = getMSCSession();
    runOperation((com.mobilesecuritycard.openmobileapi.Session) msc_session);
} 
```

我什至可以使用接收正确的对象类

```
String classNameToBeLoaded = activeSession.getClass().getName(); 
```

但仍然无法将对象属性获取到 activeSession 对象。

有没有办法将任何一个会话对象传递给 runOperation 方法，并且只使用 activeSession 来完成其余的操作。由于这两个对象具有相同的方法和功能，但在 android 设备上访问不同的安全元素。所以，我不想为不同的对象编写两个不同的 runOperation() 方法。更准确地说，是否可以将一个对象类型转换为另一个对象。我不确定这一点。任何指示或帮助将不胜感激。我希望，我清楚地表明了我想要实现的目标。

PS：请忽略语法，因为我只是提供一些代码片段来说明我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:21:52.010

您应该能够通过反射甚至只是 来做到这一点`instanceof`，但为什么呢？为什么不使用重载？定义两个方法：

```
public void runOperation(com.mobilesecuritycard.openmobileapi.Session session) {
}

public void runOperation(org.simalliance.openmobileapi.Session session) {
} 
```

如果目标是减少代码重复，则使用单一方法，但采用两种会话类型中最不共同的祖先超类，希望不是`Object`：

```
public void runOperation(SessionSuperclass session) {
  // do something that can work with any type of session
  doSomethingMoreSpecific(session);
} 
```

如有必要，实现两个版本的`doSomethingMoreSpecific()`. 那将是面向对象的做事方式，而不是`instanceof`反射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:19:46.160

```
if(activeSession instanceof com.mobilesecuritycard.openmobileapi.Session) {
    // some stuff
} else if(activeSession instanceof org.simalliance.openmobileapi.Session) {
    // some other stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:20:17.530

您可以在您的`runOperation()`.

```
if(activeSession instanceof org.simalliance.openmobileapi.Session){
    // Type 1
}
else if(activeSession instanceof com.mobilesecuritycard.openmobileapi.Session){
    // Type 2
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:21:00.000

想到的一种解决方案是让两个对象都实现一个通用接口。

**例如**

```
public interface ObjectIF
{
    public void doSomething();
} 
```

有一些实现接口的类：

```
public class ClassOne implements ObjectIF
{
    public void doSomething() { // Code }
}

public class ClassTwo implements ObjectIF
{
    public void doSomething() { // Code }
} 
```

现在使用您的方法，您可以执行以下操作：

```
public void doSomethingWithObject(ObjectIF object)
{
    // Provided an object implements the interface, it can be passed here.
    object.doSomething();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:22:38.850

> 是否可以将对象类型转换为另一个对象？

是的，您可以[投射](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html).

您可以检查并投射：

```
if(activeSession instanceof org.simalliance.openmobileapi.Session){
    org.simalliance.openmobileapi.Session mySession = (org.simalliance.openmobileapi.Session) activeSession 
}
else if(activeSession instanceof com.mobilesecuritycard.openmobileapi.Session) {
    com.mobilesecuritycard.openmobileapi.Session mySession = (com.mobilesecuritycard.openmobileapi.Session) activeSession 
} 
```

# jquery - 使用 jquery 动态更改“onclick”调用

> ID：15923058
> 
> 赞同：1
> 
> 时间：2013-04-10T10:16:49.993
> 
> 标签：jquery

我在活动期间有 javascript 调用图像`onclick`。

```
onclick="removeFeetype(5);" 
```

我需要`onclick="removeFeetype(4);`在其他调用期间使用`ID`jQuery 的属性将其更改为。这意味着我需要将函数调用从 5 更改为 4。

拜托我需要你的帮忙。提前致谢。

我尝试使用以下代码更改“onclick”调用方法。但是对于 ID 为“removeButton”的特定元素，我的 html 代码没有更改。

- - - - - - - - - - - - 第一的 - - - - - - - - - - - - - ------

```
var changeval = 4;
var onclickval = "removeFeetype("+changeval+");";
$('#removeButton').attr("onclick", onclickval); 
```

* * *

- - - - - - - - - - - - 第二 - - - - - - - - - - - - - ----------------

```
var changeval = 4;
var next = "removeFeetype(" + changeval + ");";
var newclick_next = eval("(function(){"+next+"});");
$('#removeButton').attr('onclick','').unbind().click(newclick_next); 
```

* * *

其实我的任务是

我有 ID 行的序列

```
id="removeButton1" onclick="removeFeetype(1);"
id="removeButton2" onclick="removeFeetype(2);"
id="removeButton3" onclick="removeFeetype(3);"
id="removeButton4" onclick="removeFeetype(4);" 
```

......

如果我使用函数 removeFeetype(2) 删除 removeButton2。

然后我需要剩下的零钱

```
ID = removeButton3 to removeButton2 and so on and
ONCLICK = removeFeetype(3) to removeFeetype(2) and so on 
```

我可以将 ID removeButton3 更改为 removeButton2 等等。

但我无法从“removeFeetype(3);”更改 onclick 方法调用 到“removeFeetype(2);”

希望现在很清楚。请帮我修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:20:13.667

您可以使用[data()](http://api.jquery.com/jQuery.data/)属性将值传递给 javascript，您需要使用`this`.

```
<input type="text" data-someAtt="1" onclick="removeFeetype(this)" />

function removeFeetype(obj)
{
    $(obj).data("someAtt");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:22:23.537

您可以尝试像这样更改 onclick 属性值：

```
$("#link").attr("onclick", "removeFeetype(4);"); 
```

[http://jsfiddle.net/neX7W/](http://jsfiddle.net/neX7W/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:22:52.030

让我们整体使用 jQuery

```
$(document).ready(function(){
    $(".Fee").click(function(){
       removeFeetype($(this).attr('data-value'));
       $(this).attr('data-value',$(this).attr('data-value') - 1);
    }); 
}); 
```

我希望你的链接是

```
<div class="Fee" data-value="5">Link</div> 
```

# windows-8 - 在 GridView 上显示图像 win 8 Metro 风格？

> ID：15923059
> 
> 赞同：0
> 
> 时间：2013-04-10T10:16:54.417
> 
> 标签：windows-8

我一步一步地按照这篇文章（[http://mikaelkoskinen.net/winrt-step-by-step-tutorial-mvvm-gridview-semanticzoom/](http://mikaelkoskinen.net/winrt-step-by-step-tutorial-mvvm-gridview-semanticzoom/)）将图像添加到我的项目的 GridView，但是当我完成将 GridView 添加到我的本文之后的项目。我在显示图像时遇到了一个问题，即应用程序运行时图像（在项目文件夹中）不显示，但应用程序显示来自互联网的图像（文章中的代码运行良好并从项目文件夹中加载了图像），我不知道如何显示这个问题，

这是一些代码：

```
public class Movie
{
    public string Title { get; set; }
    public string Subtitle { get; set; }
    public string Image { get; set; }
    public string Category { get; set; }   
}

public class MovieCategory
{
    public string Title { get; set; }
    public List<Movie> Items { get; set; }
} 
```

我从项目文件夹加载图像的代码：

```
 MovieList.Add(new Movie { Title = "The Ewok Adventure", Category = "Adventure", Subtitle = "The Towani family civilian shuttlecraft crashes on the forest moon of Endor.", Image = "duy.jpg" }); 
```

（我之前创建过MovieList，图像“duy.jpg”在项目文件夹中）

我不为什么我用文章的源代码尝试上面的代码，我已经通过调试工具仔细检查了图像源字符串，它运行良好（项目文件夹中的图像显示在文章的源代码中）但是当我添加到我的项目时，来自互联网链接的图像效果很好，但项目文件夹中的图像没有加载。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:31:10.050

像这样更改类定义

```
public class Movie
{
    public string Title { get; set; }
    public string Subtitle { get; set; }
    public string Image { get; set; }
    public string Category { get; set; }   

    public ImageSource ImgSource
    {
         get
         {
            return new BitmapImage(new Uri("ms-appx:///" + this.Image));
         }
    }
} 
```

并将 Image 标记与`ImgSource`属性绑定，而不是与`Image`属性绑定。

```
<Image Source="{Binding ImgSource}" ........./> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:22:01.130

项目根目录中的图像吗？您是否设置为内容并始终复制到输出文件夹？

# java - 如何在 JSP / JSTL 中对 URL 进行 URL 编码？

> ID：15923062
> 
> 赞同：20
> 
> 时间：2013-04-10T10:17:02.350
> 
> 标签：java, html, jsp

我想为我的网站创建一个编码[URL](http://en.wikipedia.org/wiki/Uniform_resource_locator)。例如，对于这个 URL：“ [http://google.com/index.html](http://google.com/index.html) ”

我想通过 URL 编码将此 URL 提供给客户端。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-10T12:53:30.203

由于您使用的是 JSP，我会坚持使用[JSTL](https://stackoverflow.com/tags/jstl/info)而[不是使用 scriptlets](https://stackoverflow.com/questions/2188706/how-to-avoid-using-scriptlets-in-my-jsp-page)。[`<c:url />`您可以结合`<c:param />`](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL4.html)使用 JSTL 标记：

```
<c:url value="/yourClient" var="url">
  <c:param name="yourParamName" value="http://google.com/index.html" />
</c:url>

<a href="${url}">Link to your client</a> 
```

这将导致：

```
<a href="/yourClient?yourParamName=http%3a%2f%2fgoogle.com%2findex.html">Link to your client</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-06T13:09:46.103

使用 UrlEncoder.encode() 就是答案。但关键是这种方法不进行百分比编码。采用：

```
java.net.UrlEncoder.encode(stringOfURL,"UTF-8").replace("+","%20") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-12T19:04:06.313

接受的答案缺少一些有效的 JSP 代码，它应该是：

```
<c:url value="/yourClient" var="url">
  <c:param name="yourParamName" value="http://google.com/index.html" />
</c:url>

<a href="<c:out value='${url}'/>">Link to your client</a> 
```

正如评论指出的那样，另一种选择是使用 JavaScript 的[encodeURIComponent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)方法。

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2013-04-10T10:20:21.640

在您的 JSP 代码中尝试：

```
Base64.encodeBase64( "http://google.com/index.html") 
```

# wpf - WPF 窗口未正确显示透明度

> ID：15923066
> 
> 赞同：1
> 
> 时间：2013-04-10T10:17:15.343
> 
> 标签：wpf, xaml, user-interface, window

TI 在让我的窗口透明时遇到了一些麻烦。

窗口定义如下：

```
<Window x:Class="HKC.Desktop.Views.UserInterfaces.RemoteKeypad"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Closing="Window_Close"
        KeyDown="RemoteKeypad_KeyDown"
        KeyUp="RemoteKeypad_KeyUp" MouseDown="OnMouseDown_Event"
        Title="Title"  Width="325" Height="370"
        ResizeMode="NoResize" WindowStartupLocation="CenterScreen"  WindowStyle="None" AllowsTransparency="True" Background="Transparent"> 
```

然后我定义了一个边框，为窗口提供一个弯曲的边缘，里面有一个网格用于布局目的：

```
<Border CornerRadius="20" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
     <Border.Effect>
          <DropShadowEffect BlurRadius="6" ShadowDepth="3" Color="#484948" />
     </Border.Effect>
     <Grid Background="Transparent" VerticalAlignment="Stretch">
          ....
     </Grid>
</Border>
</Window> 
```

由于某种原因，我第一次打开窗口背景不透明

![在此处输入图像描述](https://i.stack.imgur.com/cqCc5.png)

但是，如果我在窗口之外单击，然后返回它，透明度将按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:19:35.287

原来问题出在用于向元素添加投影的外部工具。

# c# - 基本目录 - 路径中的非法字符

> ID：15923067
> 
> 赞同：1
> 
> 时间：2013-04-10T10:17:16.050
> 
> 标签：c#, appdomain

我在找到基本目录（.exe 本身的位置）的行时遇到问题，并且读取了其中的文本文件中的一行。

它在代码中为这一行抛出了“路径中的非法字符”错误：

```
StreamReader sr = new StreamReader(File.ReadAllText(AppDomain.CurrentDomain.BaseDirectory + "\Parameters.txt")); 
```

这可能是因为我格式化了`StreamReader()`错误的论点，（可能`AppDomain.CurrentDomain.BaseDirectory`）但我不能确定，因为那里没有太多关于 appdomain 的其他材料。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:34:24.017

`StreamReader`接受参数的构造函数的重载`string`是文件名，而不是内容。

改用`StringReader`，或删除`File.ReadAllText`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:24:47.940

试试下面的代码

```
var path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Parameters.txt"); 
```

此函数还有其他重载，例如

```
Combine(String[])           //Combines an array of strings into a path.
Combine(String, String)     //Combines two strings into a path.
Combine(String, String, String)             //Combines three strings into a path.
Combine(String, String, String, String)     //Combines four strings into a path. 
```

请参阅[http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:32:39.517

`'\'`从您的路径中删除...

```
StreamReader sr = new StreamReader(File.ReadAllText(AppDomain.CurrentDomain.BaseDirectory + "Parameters.txt")); 
```

`AppDomain.CurrentDomain.BaseDirectory + "Parameters.txt"`- >这将返回正确的路径，如下所示

**小路 ：** `\Visual Studio 2010\Projects\Sample\Sample\bin\Release\Parameters.txt`

所以在那条路径中不需要'\'

# android - 动态添加多个相对布局到线性布局

> ID：15923069
> 
> 赞同：0
> 
> 时间：2013-04-10T10:17:19.423
> 
> 标签：android, android-layout, android-linearlayout, android-view

如何以编程方式将多个相对布局添加到线性布局。我试过了，但它给了我这个异常“指定的孩子已经有一个父母。你必须调用 removeview()”这是我的代码，

```
 RelativeLayout addlangmid = new RelativeLayout(mActivity);
                addlangmid.setBackgroundResource(R.drawable.language_bg_top);
                TextView langname = new TextView(mActivity);
                LayoutParams params = new LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                params.setMargins(20, 0, 30, 30);
                langname.setText(str[0]);
                addlangmid.addView(langname, params);

                fulllay.addView(addlangmid, 0);

                RelativeLayout addlangmid1 = new RelativeLayout(mActivity);
                addlangmid.setBackgroundResource(R.drawable.language_bg_middle);
                TextView langname1 = new TextView(mActivity);
                LayoutParams params1 = new LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                params1.setMargins(20, 0, 30, 30);
                langname1.setText(str[0]);
                addlangmid1.addView(langname, params1);

                fulllay.addView(addlangmid1, 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:19:43.280

更改以下行

```
addlangmid1.addView(langname, params1); 
```

到

```
addlangmid1.addView(langname1, params1); 
```

您正在将 langname 添加到 addlangmid 和 addlangmid1。因此错误来了。

# c# - 垃圾收集运行太晚 - 导致 OutOfMemory 异常

> ID：15923073
> 
> 赞同：4
> 
> 时间：2013-04-10T10:17:35.233
> 
> 标签：c#, garbage-collection, out-of-memory

想知道是否有人可以对此有所了解。

我有一个内存占用量很大（和内存流失）的应用程序。没有任何内存泄漏，而且 GC 往往能很好地释放资源。

但是，有时，GC 不会“按时”发生，从而导致内存不足异常。我想知道是否有人可以对此有所了解？

我使用了 REDGate 分析器，它非常好——应用程序具有典型的“锯齿”模式——OOM 发生在锯齿的顶部。不幸的是，无法使用探查器（AFAIK）来识别内存流失的来源。

是否可以设置一个内存“软限制”，应该强制进行 GC？目前，只有在内存达到绝对极限时才会执行 GC，从而导致 OOM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T12:47:12.173

垃圾收集真的不可能“不及时发生”。当新的内存分配将 Gen-0 推到某个限制之上时，它们就会发生。因此，它们总是在内存分配将内存推过其限制之前发生。这种情况每天在全世界发生很多次，如果有任何错误不为人所知，我会感到惊讶。

您是否考虑过实际上分配的内存可能比可用内存多？该操作系统仅允许您在大多数 32 位计算机上访问 2GB。

还有一些其他的可能性：

1.  您的应用程序是否使用非托管内存？
2.  您的应用程序是否在固定任何内存？如果是这样，那可能会导致碎片问题，尤其是在您不释放 pin 的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:30:45.590

如果您使用大量内存并且垃圾收集很多，我想您应该考虑“[享](http://en.wikipedia.org/wiki/Flyweight_pattern)元”设计模式。

例如，如果您垃圾收集了很多字符串，请参阅 String.Intern(string s)。 [参考资料](http://msdn.microsoft.com/en-gb/library/system.string.intern.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T10:22:19.160

您可以使用 GC.collect() 强制垃圾收集器完成其工作。但这不是优选的。

使用内存配置文件（如[memprofiler](http://memprofiler.com)）来检测泄漏。几乎所有代码都会在某些时候发生泄漏。

# c++ - 检索 CAD 对象的网格点

> ID：15923074
> 
> 赞同：0
> 
> 时间：2013-04-10T10:17:36.090
> 
> 标签：c++, export, mesh, cad, step

我想实现允许我将 CAD 对象表面的（网格）点导出到文件中的功能。

我查看了一些 CAD 应用程序，但找不到任何可以让我直接执行此操作的程序，因此我怀疑我可能需要使用提供 API 的 CAD 应用程序获取有关对象网格点的信息。

请任何人都可以向我指出一个可以帮助我实现目标的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:51:45.043

写一个 STL 文件，然后

猫我的文件.stl | grep -i 顶点 | 排序 | uniq > myPoints.txt

（同样作为 Windows 用户，您可以使用 Cygwin 使用这些命令）。

# opengl - 使用 VBO 的最佳方式

> ID：15923075
> 
> 赞同：13
> 
> 时间：2013-04-10T10:17:37.467
> 
> 标签：opengl, vbo

**使用 VBO 最快和最灵活（适用于大多数情况）的方法是什么？**

我正在开发一个 openGL 应用程序，我希望它能够获得最佳性能，所以我需要有人来回答这些问题。我读了很多问题和答案，但我想有太多我不需要的信息会弄乱我的大脑......

*   我应该使用多少个 vbo？
*   我应该如何创建 vbos？
*   如果数据大小不固定，我应该如何更新 vbos 数据？
*   我应该如何渲染 vbos？
*   我应该如何处理我不想再渲染的 vbos 中的数据？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T11:45:39.783

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-10T10:46:52.067

**我应该使用多少个 vbo？**

需要多少就多少，听起来很傻，但很好，就是这样

**如果数据大小不固定，我应该如何更新 vbos 数据？**

用不同的数据和长度覆盖和渲染相同的 VBO。

**我应该如何创建 vbos？**

**我应该如何渲染 vbos？**

见[VBO 教程](http://www.songho.ca/opengl/gl_vbo.html)

**我应该如何处理我不想再渲染的 vbos 中的数据？**

创建一个新的 vbo 并将数据复制到其中或仅渲染内存中的 vbo 的一部分。

要仅渲染部分，请参见[glVertexBuffer](http://www.opengl.org/sdk/docs/man2/xhtml/glVertexPointer.xml) [glTexCoordPointer](http://www.opengl.org/sdk/docs/man2/xhtml/glTexCoordPointer.xml)（只需根据偏移量计算新指针和新大小）

**编辑1：**

对所有事情都使用单个 VBO 感觉是错误的，因为您必须自己管理新顶点位置/纹理坐标的分配，这很快就会变得非常混乱。

最好将小道具分组到 VBO 中并批处理绘图命令。

**我可以使用 glBufferSubData 将数据添加到缓冲区（将 100 个元素添加到大小为 x 的缓冲区）吗？**

不，这是不可能的，因为描述说`updates a subset of a buffer object's data store`一个子集是一个集合中的一个较小的集合。

**编辑 2**

一个很好的教程也是[学习现代 3D 图形编程](http://arcsynthesis.org/gltut/)，但它不是 VBO 特定的。

# java - 在每个请求上重新创建复合组件中的支持 bean

> ID：15923078
> 
> 赞同：4
> 
> 时间：2013-04-10T10:17:43.970
> 
> 标签：java, jsf-2, composite-component, managed-bean

我有两个变量“userId”和“name”。例如，当我单击“SHOW USERID”按钮时，它可以正常工作并设置“renderUserId=true”，并使用“render”显示它，但是如果我单击另一个“SHOW”按钮，Bean 会重建并且我会松动“renderUserId=true”，它变成“false”和“renderName=true”，所以它显示正常，但 USERID 是隐藏的。

我的问题是，如何避免在渲染 xhtml 时丢失 bean 值？

这是我的代码的简单模拟。

注意：如果我在“h:commandButton”中使用“actionListener”而不是“f:setPropertyActionListener”，我会得到相同的结果，bean 是重构的

**例子.xhtml**

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:cc="http://java.sun.com/jsf/composite">

    <cc:interface componentType="com.bean.ExampleBean">
        <cc:attribute name="userId" type="java.lang.Integer"/>
        <cc:attribute name="name" type="java.lang.String"/>
    </cc:interface>

    <cc:implementation>

        <h:panelGrid id="example_panel" columns="1" width="100%">

            <h:outputText value="USERID: #{cc.attrs.userId}" rendered="#{!cc.attrs.renderUserId}"/>

            <a4j:commandButton value="SHOW USERID" render="example_panel"
                rendered="#{!cc.attrs.renderUserId}">
                <f:setPropertyActionListener value="#{true}"
                    target="#{cc.attrs.renderUserId}"/>
            </a4j:commandButton>                
            <a4j:commandButton value="HIDE USERID" render="example_panel"
                rendered="#{cc.attrs.renderUserId}">
                <f:setPropertyActionListener value="#{false}"
                    target="#{cc.attrs.renderUserId}"/>
            </a4j:commandButton>                

            <h:outputText value="NAME: #{cc.attrs.name}" rendered="#{!cc.attrs.renderName}"/>

            <a4j:commandButton value="SHOW NAME" render="example_panel"
                rendered="#{!cc.attrs.renderName}">
                <f:setPropertyActionListener value="#{false}"
                    target="#{cc.attrs.renderName}"/>
            </a4j:commandButton>                
            <a4j:commandButton value="HIDE NAME" render="example_panel"
                rendered="#{cc.attrs.renderName}">
                <f:setPropertyActionListener value="#{false}"
                    target="#{cc.attrs.renderName}"/>
            </a4j:commandButton>                

        </h:panelGrid>

    </cc:implementation>

</ui:composition> 
```

**ExampleBean.java**

```
import javax.faces.component.FacesComponent;
import javax.faces.component.UINamingContainer;

@FacesComponent("com.bean.ExampleBean")
public class ExampleBean extends UINamingContainer {

    private Integer userId;
    private String name;

    private boolean renderUserId;
    private boolean renderName;

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T13:07:08.887

There's a major misconception going here. That's not a backing bean. That's a backing component.

JSF UI component instances are not view scoped, instead they are request scoped. They are destroyed by end of render response (after having saved their state into JSF view state) and recreated during view build time (and their state is restored from JSF view state).

You've assigned the stateful properties as instance variables of the component. This is not right. You should be explicitly storing them in the JSF state. The correct approach for that is to let the getter and setter delegate to [`UIComponent#getStateHelper()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getStateHelper%28%29). Any attributes which are declared as `<cc:attribute>` already implicitly do that. You do absolutely not need to redeclare them as instance variables of the backing component.

Those booleans which are not declared as `<cc:attribute>` must be reimplemented like follows:

```
public Boolean getRenderUserId() {
    return (Boolean) getStateHelper().eval("renderUserId", Boolean.FALSE);
}

public void setRenderUserId(Boolean renderUserId) {
    getStateHelper().put("renderUserId", renderUserId);
} 
```

In your action(listener) method, just invoke `setRenderUserId(true)` accordingly.

Don't forget to fix the EL expressions accordingly:

```
#{cc.renderUserId} 
```

### See also:

*   [JSF composite component - weird behavior when trying to save state](https://stackoverflow.com/questions/13015942/jsf-composite-component-weird-behavior-when-trying-to-save-state/)
*   [Our composite component wiki page](https://stackoverflow.com/tags/composite-component/info)
*   [Composite component with multiple input fields](http://balusc.blogspot.com/2013/01/composite-component-with-multiple-input.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:09:17.440

您的 FacesComponent 不保持状态，每次调用它时它都是一个新实例。对于您的用例，您似乎应该至少使用具有视图范围的 ManagedBean。这意味着只要您在带有按钮的页面上，就会保留该实例。

# regex - 使用 URI 路由将斜杠转换为下划线

> ID：15923080
> 
> 赞同：1
> 
> 时间：2013-04-10T10:17:50.527
> 
> 标签：regex, codeigniter, routes

我正在我的应用程序中创建路由，我想知道它是否可以将 url 中的斜杠转换为我的 api 中的下划线。

这是我想做的一个例子：

> [http://www.example.dev/api/v1/test/supertest.json?id=7&test=whatever](http://www.example.dev/api/v1/test/supertest.json?id=7&test=whatever)

在我的路线中，它必须被解释为：

> [http://www.example.dev/api/test_supertest/format/json?id=7&test=whatever](http://www.example.dev/api/test_supertest/format/json?id=7&test=whatever)

我在格式和版本上取得了成功，但不是`test_supertest`

这是我的实际路线：

```
$route['api/'.config_item('rest_api_version').'/(:any)'.'(/.*)'.'(\.:any)'.'(:any)'] = 'api/$1_$2$4&format=$3'; 
```

如何将斜杠转换为下划线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:34:26.700

**路线：**

```
$route['api/' . config_item('rest_api_version') . '/([^/]+)/([^.]+)\.([^?]+)\?(:any)'] = 'api/$1_$2/format/$3?$4'; 
```

**正则表达式细分：**

1.  `api/' . config_item('rest_api_version') . '/`匹配 API 版本

2.  `([^/]+)`匹配 1 个或多个不是`/`

3.  `/`匹配一个`/`

4.  `([^.]+)`匹配 1 个或多个不是`.`

5.  `\.`匹配一个`.`

6.  `([^?]+)`匹配 1 个或多个不是`?`

7.  `\?`匹配一个`?`

8.  `(:any)`匹配任何字符

**更换故障：**

`api/$1_$2/format/$3?$4`

`$1`替换为上面列表项 2 中的匹配项

`$2`替换为上面列表项 4 中的匹配项

`$3`替换为上面列表项 6 中的匹配项

`$4`替换为上面列表项 8 中的匹配项

**结果：**

> [http://www.example.dev/api/v1/test/supertest.json?id=7&test=whatever](http://www.example.dev/api/v1/test/supertest.json?id=7&test=whatever)

变成

> [http://www.example.dev/api/test_supertest/format/json?id=7&test=whatever](http://www.example.dev/api/test_supertest/format/json?id=7&test=whatever)

# python - “ValueError：object too deep for desired array”是什么意思以及如何解决？

> ID：15923081
> 
> 赞同：53
> 
> 时间：2013-04-10T10:17:51.657
> 
> 标签：python, numpy, convolution, valueerror

我正在尝试这样做：

```
h = [0.2, 0.2, 0.2, 0.2, 0.2]

Y = np.convolve(Y, h, "same") 
```

`Y`看起来像这样：

![截屏](https://i.stack.imgur.com/bVYmZ.jpg)

这样做时，我收到此错误：

```
ValueError: object too deep for desired array 
```

为什么是这样？

我的猜测是因为不知何故该`convolve`函数不会被`Y`视为一维数组。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-10T10:23:33.470

屏幕截图中的`Y`数组不是一维数组，它是一个具有 300 行和 1 列的二维数组，如它所指示的`shape`那样`(300, 1)`。

要删除额外的维度，您可以将数组切片为`Y[:, 0]`. 通常要将 n 维数组转换为一维数组，您可以使用`np.reshape(a, a.size)`.

将 2D 数组转换为 1D 的另一种选择是`flatten()`function from `numpy.ndarray`module，不同之处在于它会复制数组。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-19T19:23:54.210

`np.convolve()`采用一维数组。您需要检查输入并将其转换为一维。

您可以使用`np.ravel()`, 将数组转换为一维。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-11T08:11:56.407

您可以尝试使用`scipy.ndimage.convolve`它允许多维图像的卷积。[这](https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.convolve.html)是文档

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-09T10:19:53.077

`np.convolve`需要一个扁平数组作为它的输入之一，你可以使用`numpy.ndarray.flatten()`它非常快，在[这里](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html)找到它。

# android - 如何在我的视图中添加横幅？

> ID：15923084
> 
> 赞同：0
> 
> 时间：2013-04-10T10:17:59.793
> 
> 标签：android, android-layout

首先，我有一些看法`MainActivity.java`如下：

```
CanvasMainMenu canvasMenu = new CanvasMainMenu(this);
setContentView(canvasMenu); 
```

类 CanvasMainMenu 扩展`View`，我想在这个视图中添加一些横幅。

如何将横幅视图添加到我的`CanvasMainMenu`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:22:53.843

这有帮助吗？

```
private static FrameLayout mFrameLayout = null;
private static MainView mMainView = null;

private static AdView mAdView = null;
//.....

protected void onCreate(Bundle icicle) {
//.....
 AdView = new AdView(this, AdSize.BANNER, "a14d3678cfc9fb7");

 AdRequest adRequest = new AdRequest();
 adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

    mFrameLayout = new FrameLayout(getApplicationContext());

    mMainView = new MainView(getApplicationContext());

 mAdView.loadAd(adRequest);
 mAdView.setGravity(Gravity.BOTTOM|Gravity.CENTER_HORIZONTAL);
//.....
mFrameLayout.addView(mAdView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

}

public void setOverlayView(int gameMode) {
mAdView.setVisibility(View.VISIBLE);
} 
```

# java - PHP 等效于 JAVA HexUtils.bytesToHex()

> ID：15923088
> 
> 赞同：0
> 
> 时间：2013-04-10T10:18:05.927
> 
> 标签：java, php, character-encoding

我需要在 md5 中编码一个字符串，然后将它的字节转换为 2 个字符的十六进制编码。

我有这个简短的 JAVA 片段，需要将其转换为 PHP。

```
 // Condensed the message and do MD5
  try {
    MessageDigest md = MessageDigest.getInstance("MD5");
    byte[] data = cleartext.getBytes(ENCODING);
    md.update(data);
    byte[] digestedByteArray = md.digest();
    // Convert digested bytes to 2 chars Hex Encoding
    md5String = HexUtils.bytesToHex(digestedByteArray);

  } catch (NoSuchAlgorithmException ns) {
    ns.printStackTrace();
  } catch (UnsupportedEncodingException ex) {
    ex.printStackTrace();
  } 
```

我不太确定如何在 PHP 中实现这一点。`ENCODING`是`UTF-8`

我在 PHP 中拥有的是

```
$md5String = md5($clearText);
$hexString = "";

for($i = 0; $i < strlen($md5String); $i++) {
  $hexString .= dechex(ord($md5String[$i]));
} 
```

但是输出不同，所以我认为我在十六进制转换上失败了。

那么这个 JAVA 片段到 PHP 的正确端口是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:19:50.167

的输出[`md5`](http://php.net/manual/en/function.md5.php)已经是一个十六进制编码的字符串，所以你不需要做任何其他事情（只要你不将可选的第二个参数设置为`true`）。

```
$hexString = md5($clearText); 
```

# ios - IDE中的presentViewController黑屏或线程调试

> ID：15923107
> 
> 赞同：0
> 
> 时间：2013-04-10T10:18:42.003
> 
> 标签：ios, xcode, cocoa-touch

我已经看到了关于这个问题的大量线程 - 我已经尝试了所有这些解决方案，但它们都失败了。运行的构建，当我单击按钮时，它转到线程调试器页面，我不知道发生了什么。

我需要从具有自己的 .xib 的新类转到 FirstViewController 所在的 MainStoryboard。

```
- (IBAction)backToHome:(id)sender {
    /*
    FirstViewController *fvc = [[FirstViewController alloc] initWithNibName:nil bundle:nil];
    [self presentViewController:fvc animated:YES completion:nil];
     */
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    FirstViewController *fvc = [storyboard instantiateViewControllerWithIdentifier:@"FirstViewController"];
    [self presentViewController:fvc animated:YES completion:nil];
} 
```

使用注释代码时，它会进入黑屏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:21:55.573

```
FirstViewController *fvc = [[FirstViewController alloc] initWithNibName:nil bundle:nil];
[self presentViewController:fvc animated:YES completion:nil]; 
```

这里**initWithNibName:nil**会导致黑屏，因为它无法加载 nib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T17:55:18.560

我认为您应该添加名称

FirstViewController *fvc = [[FirstViewController alloc] initWithNibName:@"somethinghere" bundle:nil]; [自我presentViewController：fvc动画：是完成：无]；

# javascript - HTML 表单。何时在目标属性中使用命名框架？

> ID：15923109
> 
> 赞同：0
> 
> 时间：2013-04-10T10:18:45.407
> 
> 标签：javascript, html, forms

在 HTML 表单中，我们可以将 target 属性设置为各种值：`_blank|_self|_parent|_top|framename`.

但是目标属性中命名框架的用例是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:20:35.553

如果您在页面布局中使用[框架](http://www.w3.org/TR/html4/present/frames.html)，这很重要，但是现在很少使用框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:21:22.823

根据文档，您可以指定要在其中显示响应的 iframe 的名称。

[http://www.w3schools.com/tags/att_form_target.asp#](http://www.w3schools.com/tags/att_form_target.asp#)

（来自文档）注意：HTML5 不支持框架和框架集，因此 _parent、_top 和 framename 值现在主要与 iframe 一起使用。

# asp.net - Dot Net Framework 是否使用任何 java 组件？

> ID：15923112
> 
> 赞同：0
> 
> 时间：2013-04-10T10:18:51.050
> 
> 标签：asp.net

dot net 框架或 com 组件是否使用任何 java 组件？例如：- java bean、java applet、java servlet 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:20:18.477

不，它没有。

它从来没有。它要么是 C/C++（用于运行时、抖动等），要么是 .NET。

# php - 如何在 Titanium (Android) 中以 jpg 或 png 格式在服务器上上传图像？

> ID：15923113
> 
> 赞同：5
> 
> 时间：2013-04-10T10:18:54.913
> 
> 标签：php, android, titanium

我想将图像上传到我的手机图库的服务器。

我已经完成了 iOS 设备，这运行良好。但是，在 Android 设备中有问题。

我从我的设备库中获取图像并发布在服务器上。这是上传成功。之后我在服务器上看到。

安卓设备上传的图片，为.txt格式。（iOS 运行良好）。

我如何解决问题。请帮我向您展示我的编码结构。

```
 Ti.API.info("success! event: " + JSON.stringify(event));
        var image = event.media;

        var abc = event.media.imageAsResized(400 , 400);

        Ti.API.info(abc.height +" x "+ abc.width);
        alert(abc.height +" x "+ abc.width);

       var xhr = Titanium.Network.createHTTPClient();

        xhr.onerror = function(e)
        {
            Ti.API.info('IN ERROR ' + e.error);
            alert("error");
        };
        xhr.onload = function()
        {
            Ti.API.info('IN ONLOAD ' + this.status + ' readyState ' + xhr.responseText);
            alert("IN ONLOAD " + this.status + " readyState " + this.readyState + "re " +xhr.responseText);

        };

         xhr.open('POST','http://reviewprototypes.com/kishan/filetest.php');
        xhr.send({file:abc});
 },
                cancel : function() {

                    alert("Cancel Library ");
                },
                error : function(error) {

                    alert("Error Massage "+error);
                },
                allowImageEditing:true,

               }); 
```

任何建议表示赞赏.. 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T05:28:17.290

[我已经从这个参考示例](https://gist.github.com/furi2/1378595)中解决了我的问题。试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:21:34.147

尝试将 POST 请求内容类型标头设置为`Content-type: multipart/form-data`，除此之外我无法提出任何建议:(

多姆

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-26T12:46:34.900

试试**https** :
xhr.open('POST',' **https://reviewprototypes.com/kishan/filetest.php** ');

雪梅。

# iphone - UITableView 滚动超出了我的 uiview 的范围

> ID：15923115
> 
> 赞同：4
> 
> 时间：2013-04-10T10:18:56.647
> 
> 标签：iphone, objective-c, uitableview, uiview

在我看来，我为自定义弹出框（如动画）添加了另一个视图（名为 popupview）。

在弹出视图中，我添加了一个表格视图并为表格视图设置了一些边界，但是无论我在 xib 中设置的高度如何，表格视图的高度都不会改变。

还有一个问题是，在tableview中滚动时，即使tableview插入到popup view中，它也会滚动出视图。

我使用的图像没有问题。它具有与第二个 uiview popupview 相同的高度、宽度。

**XIB结构：**

View1 mainView - 表格视图

![查看 1](https://i.stack.imgur.com/dQezX.png)

View2 PopupView {橙色视图}

![查看 2](https://i.stack.imgur.com/FvDAu.png)

TableView2 - 弹出视图中的表格

![表视图 2](https://i.stack.imgur.com/A5aPL.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:23:03.450

尝试将“popupview”视图的`clipsToBounds`属性设置为`YES`. 如果表格视图的框架与“弹出视图”的框架更大/不同，这应该可以防止表格视图的“伸出”。

但除此之外，正确的方法是：

您是否尝试过视图的 Autosizing/Au​​toresizing-Mask 设置？您的表格视图是您的弹出视图的子视图（即子视图），对吗？所以表格视图框架应该缩放（即自动调整大小）到父视图框架（popupview）！您可以在 IB 中的表格视图的“Size Inspector”窗格中或以编程方式配置此行为。您应该查看[查看 IOS 编程指南](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html)。

# html - 数据属性中的 HTML 标记

> ID：15923116
> 
> 赞同：2
> 
> 时间：2013-04-10T10:18:57.583
> 
> 标签：html, twitter, seo, html-validation

在搞乱 Twitter 标记时，我刚刚发现他们将 HTML 标记放置在其中`data-expanded-footer`，它看起来像这样：

```
data-expanded-footer="<div class="js-tweet-details-fixer tweet-details-fixer">
    <div class="js-tweet-media-container "></div>
      <div class="entities-media-container " style="min-height:0px">
    </div>
  <div class="js-machine-translated-tweet-container"></div>
  <div class="js-tweet-stats-container tweet-stats-container ">
  </div>
  <div class="client-and-actions">
    <span class="metadata">
      <span title="12:11 PM - 10 Apr 13">12:11 PM - 10 Apr 13</span>
           &middot; <a class="permalink-link js-permalink js-nav" href="/****/status/****" >Details</a>
    </span>
  </div>
</div>" 
```

1.  这是一个有效的 html 元素吗（这个属性是 div 类的子元素**tweet**）

2.  如果这是有效的，这是一个好主意，如果不是，为什么？

3.  这对 SEO 有那么糟糕吗？

**编辑**

刚刚尝试从 data 属性解析 HTML 并且它有效，但是如果你想让它像这样工作，应该有一个单引号：

[http://jsfiddle.net/burimshala/crEXU/](http://jsfiddle.net/burimshala/crEXU/)

如果您在标记中使用双引号离开 twitter，并且如果您使用双引号打开 data-markup 属性，则它不起作用：

[http://jsfiddle.net/burimshala/crEXU/1/](http://jsfiddle.net/burimshala/crEXU/1/)

Twitter如何解析这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:25:18.960

`data-*`属性是有效的 HTML5，请参阅：

[http://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/) 和[http://www.w3.org/TR/2010/WD-html5-20101019/elements.html](http://www.w3.org/TR/2010/WD-html5-20101019/elements.html)

它的主要用途是数据存储（在这种情况下是 HTML 代码）。如果这是一个好主意，这一切都取决于您的情况，但它肯定是有目的的。当我想“克隆”动态内容时，我经常使用它。

这是一个“隐形”元素，所以 SEO 不应该受到真正的影响，但是我不是这方面的专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:14:29.640

声明很好，我不会说它对 SEO 不利，因为其他 SEO 因素，如用于 SEO 的微格式（hCard、vCard 或架构）都使用 HTML 属性。只要您的网站对 W3C 有效，并且没有任何标记错误（在此处查看）：http: [//validator.w3.org/](http://validator.w3.org/)，那么您就可以很好地使用 SEO。

对 SEO 友好的唯一小问题是，如果您的 HTML 标记代码总是胜过网站 TEXT。记住 SEO 总是最好至少 51% 的网站是文本和其他 HTML 属性。

# rotation - 在圆上的点和中心之间找到向外的角度的问题

> ID：15923121
> 
> 赞同：0
> 
> 时间：2013-04-10T10:19:13.953
> 
> 标签：rotation, trigonometry, geometry, angle

我正在找到我的圆心和三角形之间的角度，如下所示：

```
atan2((centre.y-triangle.y), (centre.x-triangle.x) * 180 / PI - 90 
```

我正在设置以度为参数的三角形对象的旋转。问题是我的所有三角形都没有正确向外旋转，我认为这是我的位置计算的结果，如下所示：

```
triangle.x = -(width / 2) + (stage.width / 2) + radius * sin((index / total) * (2 * PI)) 
```

这是发生情况的一个示例，您可以看到圆圈中的最后几个三角形似乎正确地朝外。

![在此处输入图像描述](https://i.stack.imgur.com/k4i6J.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:22:48.883

好的，我需要一些答案空间来放置所有这些信息。

首先，您需要计算给定三角形的角度。您可以通过以下方式做到这一点：

```
int angle = (360 / numberOfElements) * triangleIndex; 
```

您还需要计算出一个“切片”（不要不知道那是什么，只是阅读它）用于计算新位置：

```
var slice = (2 * Math.PI / numberOfElements) * triangleIndex; 
```

接下来，您需要计算出每个三角形的位置：

```
int tempRadius = radius + (int)(triangleHeight / 2);
int traingleCentreX = (int)(centre.X + tempRadius * Math.Cos(slice));
int traingleCentreY = (int)(centre.Y + tempRadius * Math.Sin(slice));
//assuming centre is the centre of the circle 
```

[**所有这些数学的功劳归于[这个答案](https://stackoverflow.com/a/5301049/838807)** ]

现在您有了每个三角形的正确位置，您应该能够应用旋转（使用`angle`），它应该看起来很棒！

**注意**：位置将从右侧开始计算（即 90 度）。因此，在进行旋转时，请额外增加 90 度！

[http://jsfiddle.net/TcENr/](http://jsfiddle.net/TcENr/)（它是最快的测试！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:01:20.450

旋转的细微偏移问题是因为我没有将三角形的一半宽度和高度添加到它的位置，这解决了问题：

```
rotation = atan2(centreY-(triangleY+triangleHalfHeight),centreX-(triangleX+triangleHalfWidth)) * 180 / Math.PI - 90; 
```

# java - 等待并使用条件通知 Java

> ID：15923125
> 
> 赞同：0
> 
> 时间：2013-04-10T10:19:35.790
> 
> 标签：java, multithreading, thread-safety

我第一次使用 wait 和 notify() 方法，我尝试过这种方式。

示例代码

```
public class Tester
{
static boolean closing == false;
static int n;
DateTime dt = new DateTime();
int getMin = dt.getMinuteOfDay(); //minute of the day
int tempMin = dt.getMinuteOfDay()+5;// minute of the day + 5 minutes

public static void setClosing(boolean b)
{
    closing = b;        
}

public static int getN()
{
    return n;
}

class notifier extends Thread 
{
    public void run()
    {
        synchronized(this)
        {
            while(getMin == tempMin || closing == true)
            {
                notify();
            }
        }
    }
}

public void starter() throws InterruptedException 
{        
    notifier nn = new notifier();
    while(n==1)
    {
        notify.start();
        if(closing == false)
        {
            synchronized(notify)
            {
                nn.wait();
                mailreader();
                getMin = getMin+5;
                tempMin = tempMin+5;
            }
        }
        else
        {
            n=2;
        }
    }
}
} 
```

主班

```
public class Tester2 extends WindowAdapter
{
public Tester2()
{        
    frame = new JFrame();
    frame.addWindowListener(this);
    frame.setVisible(true);
    Tester t = new Tester();
    t.starter();
}

@Override
public void windowClosing(WindowEvent e)
{
    Tester.setClosing(true);
    while(Tester.getN() != 2)
    {
        //wait
    }
    frame.dispose();        
}

public static void main(String args[])
{
    Tester2 t = new Tester2();        
}    
} 
```

我每 5 分钟调用**一次 mailreader()**方法来执行一些任务，但是

当用户关闭 Jframe 时，主类的 **关闭**设置为 true，我想退出**通知**程序类中的 while 循环。

我在这里要做的就是，当用户关闭 JFrame 时，我不希望 mailreader() 在中间停止并退出，而是希望 JFrame 等到方法完成然后关闭或者如果它正在等待模式（通知程序类）我想退出它并退出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:37:06.523

如果您只想在后台线程中定期运行某些东西，然后在应用程序关闭时以有序的方式取消，那么您不需要所有这些。相反，您可以创建一个 Runnable 循环、睡眠并进行邮件阅读，当中断时退出（Runnable 可以控制它何时处理中断，因此它不在中间）。启动线程后，让 GUI 保留对它的引用，以便它可以在关闭时对其调用中断。

这是[一个如何使用中断取消线程的示例](https://stackoverflow.com/a/5915306/217324)。

# java - MySQL JDBC closeOnCompletion 对 PreparedStatement 没有影响

> ID：15923135
> 
> 赞同：2
> 
> 时间：2013-04-10T10:20:00.780
> 
> 标签：java, mysql, jdbc, prepared-statement

JDBC 引入了一种称为*closeOnAutoCompletion*的方法，它声明当所有相关的结果集都关闭时，它会关闭语句。

我有一种创建准备好的语句的方法

```
public final PreparedStatement statement(Connection connection) throws SQLException {
    PreparedStatement stmt = connection.prepareStatement(query, ResultSet.TYPE_FORWARD_ONLY,
            ResultSet.CONCUR_READ_ONLY);
    stmt.closeOnCompletion();
    return stmt;
} 
```

不，我按如下方式调用此方法

```
@Test
public void testCloseOnCompletionSemiManually() throws SQLException {
    PreparedStatement stmt = shards.statement(db);
    assertTrue("Statement must be closeOnAutoCompletion", stmt.isCloseOnCompletion());

    try (ResultSet rs = stmt.executeQuery()) {
        while (rs.next()) {
            //System.out.println("Shard id: " + rs.getInt("SHARD_ID"));
        }
    }
    assertTrue("Statement must be closed after all results sets have been processed", stmt.isClosed());
} 
```

最后一次检查失败，因为语句没有关闭。

这是由于mysql实现的问题吗？还是我误解了 JavaDoc。

**更新**：我使用的是 5.1.24 版

谢谢，穆基

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:06:59.687

驱动还不支持，但是测试也不正确。请注意，Statement 的 API 文档说 closeOnCompletion() 在所有相关结果集都**关闭**时关闭语句，而不是滚动到末尾，所以我不确定在您的情况下实际假设发生了什么行为。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T10:27:48.563

根据[这个公告](http://forums.mysql.com/read.php?3,559877,559877)，MySQL Connector/J（MySQL 的 JDBC 驱动程序的正式名称）版本 5.1.21 应该支持*closeOnAutoCompletion*。你能检查你使用的是那个版本吗？

# eclipse - Eclipse：这可以在文件保存操作上运行 FindBugs 吗？

> ID：15923142
> 
> 赞同：12
> 
> 时间：2013-04-10T10:20:17.793
> 
> 标签：eclipse, findbugs

我正在使用 Eclipse 靛蓝 3.7.2。我正在使用 FindBugs 来检测问题。每次我在课堂上进行任何修改时，我都需要重新运行报告以检查问题。有没有办法运行`FindBugs`文件保存操作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-10T13:11:11.077

如果您想在 Eclipse 中查看 FindBugs 结果，请右键单击您的项目`Properties`-> `FindBugs`-> `Enable project specific settings`-> `Run automatically`。

# google-chrome-extension - chrome.runtime.onUpdateAvailable.addListener 如何用于扩展？

> ID：15923144
> 
> 赞同：0
> 
> 时间：2013-04-10T10:20:20.160
> 
> 标签：google-chrome-extension

我正在创建一个扩展，如果有任何更新可用，我想自动更新我的 .crx 文件，所以谁能告诉我这个监听器如何与扩展一起工作以及何时触发它。

```
chrome.runtime.onUpdateAvailable.addListener(function (details) {    
  console.log("updating to version " + details.version);
  chrome.runtime.reload();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:40:48.450

事件[`chrome.runtime.onUpdateAvailable`](http://developer.chrome.com/extensions/runtime.html#event-onUpdateAvailable)被触发

> 当更新可用，但由于应用程序当前正在运行而没有立即安装。

这意味着它与实际获取更新无关。要处理更新您的应用程序，您可以通过 Crhome 应用商店发布它，或者使用[`update_url`](http://developer.chrome.com/extensions/autoupdate.html)清单中的字段让它知道何时有更新。

# social-networking - 社交网络按钮回调

> ID：15923148
> 
> 赞同：3
> 
> 时间：2013-04-10T10:20:22.100
> 
> 标签：social-networking

有什么方法可以确保用户在社交网络上真正分享了链接？

我正在使用 AddThis 按钮，其中使用`'addthis.menu.share'`的事件仅在用户单击按钮而无需真正登录并发布到社交网络时才引发，我的问题不仅与 AddThis 插件有关，而且通常是否有可能回调或发起请求以检查用户是否真的分享了内容？

我的网站场景是我想通知我的服务器端代码用户真正在他/她的个人资料上发布或共享了链接，不确定我是否可以做到这一点，请提供您的建议。

# ruby-on-rails-3 - 为什么 sendmail 设置不在 Rails 3 上的 ruby 中发送邮件

> ID：15923155
> 
> 赞同：4
> 
> 时间：2013-04-10T10:20:38.513
> 
> 标签：ruby-on-rails-3, sendmail

我正在尝试使用 sendmail 设置发送邮件，但我没有收到邮件我可以在开发日志中看到发送的邮件。

配置/应用程序.rb

```
 config.action_mailer.delivery_method = :sendmail
    config.action_mailer.sendmail_settings = {
      :location => '/usr/sbin/sendmail',
      :arguments => '-i -t'
   }
   config.action_mailer.perform_deliveries = true
   config.action_mailer.raise_delivery_errors = true 
```

mailers/Notifier.rb

```
class Notifier < ActionMailer::Base
   default :from => "deepika@xxx.com"
   def welcome_email
     mail(:to => "deepika@xxx.com",   :subject => "Welcome to My Site test mail")
   end 
end 
```

我`Notifier.welcome_email.deliver`从索引方法调用。

我可以看到日志

```
Sent mail to deepika@xxx.com (339ms)
Date: Wed, 10 Apr 2013 15:16:33 +0530
From: deepika@xxx.com
To: deepika@xxx.com
Message-ID: <516534f983356_30f3262c7c84610d2@cybage-virtual-machine.mail>
Subject: Welcome to My Site test mail
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>Thanks for joining and have a great day!</p> 
```

但我没有收到邮件。

当我这样做`service sendmail status`的时候

```
MSP: is run via cron (20m)
MTA: 123995 /usr/sbin/sendmail-mta -Am -L sm-mta -bd -q10m
UID        PID  PPID  C STIME TTY          TIME CMD
root     123995     1  0 15:36 ?        00:00:00 sendmail: MTA: accepting connections          
Daemon Status: (process 132996) Queue runner

Current number of children: 1
QueueDir free disk space (in blocks): 285222800
Load average: 1
Child Process 139595 Status: accepting connections
Child Process 144035 Status: console socket child

QUE: Same as MTA 
```

另外，当我这样做时`vi /var/mail/root`，我正在关注

这是一条 MIME 封装的消息

--r3A9kDux012954.1365587178/cybage-virtual-machine.cybage.com

```
The original message was received at Wed, 10 Apr 2013 15:02:21 +0530
from localhost
with id r3Adsdsd9WLU5012559

   ----- The following addresses had permanent fatal errors -----
<deepika@xxx.com>
    (reason:   Client was not authenticated)

   ----- Transcript of session follows -----
... while talking to mail.xxx.com.:
>>> MAIL From:<> SIZE=268814
<<< 530 5.7.1 Client was not authenticated
Service unavailable 
```

你能告诉我收不到邮件的原因是什么吗？

# python - 从文件中提取日期和货币值（用逗号分隔）

> ID：15923158
> 
> 赞同：1
> 
> 时间：2013-04-10T10:20:42.763
> 
> 标签：python, regex, file-io

**客观的：**

提取字符串数据、货币值、[货币类型]和日期。

**文件内容：**

> `[["1234567890","Your previous month subscription point is <RS|$|QR|#> 5,200.33.Your current month month subscription point is <RS|$|QR|#> 1,15,200.33, Last Year total point earned <RS|$|QR|#> 5589965.26 and point lost in game is <RS|$|QR|#> 11520 your this year subscription will expire on 19-04-2013\. 9\. Back"],["1234567890","Your previous month subscription point is <RS|$|QR|#> 5,200.33.Your current month month subscription point is <RS|$|QR|#> 1,15,200.33, Last Year total point earned <RS|$|QR|#> 5589965.26 and point lost in game is <RS|$|QR|#> 11520 your this year subscription will expire on 19-04-2013\. 9\. Back"]]`

**到目前为止我做了什么：**

```
def read_file():
        fp = open('D:\\ReadData2.txt', 'rb')
        content = fp.read()
        data = eval(content)  
        l1 = ["%s" % x[1] for x in data]
        return l1

    def check_currency(l2):
        import re
        for i in range(l2.__len__()):
            newstr2  = l2[i]
            val_currency = []
            val_currency.extend(re.findall(r'([+-]?\d+(?:\,\d+)*?\d+(?:\.\d+)?)',newstr2))
            print " List %s " %  val_currency
            for i in range(len(val_currency)):
                val2 =  val_currency[i]
                remove_commas = re.compile(r',(?=\d+)*?')
                val3 = remove_commas.sub('', val2)
                print val3              

     if __name__=="__main__":main() 
```

> **编辑 UDP** 我能够提取货币值，但 -ve 值的货币与日期格式（dd-mm-yyyy）冲突。并且在提取字符串值期间，它还提取 [.|,|] 如何不读取这些字符。

**check_currency 的输出**：

```
>List ['5,200.33', '1,15,200.33', '5589965.26', '11520', '19', '-04', '-2013'] 
>5200.33
>115200.33
>5589965.26
>11520
>19
>-04
>-2013 
```

**check_currency 的预期输出**：

```
>List ['5,200.33', '1,15,200.33', '5589965.26', '11520'] 
        >5200.33
        >115200.33
        >5589965.26
        >11520 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:39:56.217

我`<RS|$|QR|#>\s*`在正则表达式的第一部分添加了它，以便用作您要匹配的货币值的前缀。

您可以将代码更改为此：

```
def check_currency(l2):
import re
for i in range(l2.__len__()):
    newstr2  = l2[i]
    val_currency = []
    val_currency.extend(re.findall(r'<RS|$|QR|#>\s*([+-]?\d+(?:\,\d+)*?\d+(?:\.\d+)?)',newstr2))
    # skip empty strings and remove comma characters
    val_currency = [v.replace(',', '') for v in val_currency if v]
    print " List %s " %  val_currency$                                                            
    for i in range(len(val_currency)):
        val2 =  val_currency[i]
        remove_commas = re.compile(r',(?=\d+)*?')
        val3 = remove_commas.sub('', val2)
        print val3 
```

**输出：**

```
List ['5200.33', '115200.33', '5589965.26', '11520']
5200.33
115200.33
5589965.26
11520 
```

**代码中的补充：**

```
val_currency.extend(re.findall(r'<RS|$|QR|#>\s*([+-]?\d+(?:\,\d+)*?\d+(?:\.\d+)?)',newstr2))
val_currency = [v.replace(',', '') for v in val_currency if v] 
```

# php - 如何分离字符串和代码

> ID：15923159
> 
> 赞同：0
> 
> 时间：2013-04-10T10:20:52.933
> 
> 标签：php, string, blogs, highlight

我正在为我的博客从数据库中获取一些数据。在文章中，我可能有一个带有解释或其他内容的字符串，并且我在标签之间有一些代码`<code></code>`。

我试图通过以下方式突出显示该代码：

```
<?
echo highlight_string($data["article"]);
?> 
```

整篇文章看起来像 PHP 代码，但我不知道如何突出显示`<code></code>`. 我只想为代码标签中的代码着色。

**谢谢大家，我自己解决了:)。解决方案就像底部。**

```
echo preg_replace('~\<code\>(.*?)\<\/code\>~ise', "highlight_string(stripslashes(stripslashes('\\1')),true);", $data["article"]); 
```

[这正是我想要的解决方案。](http://s11.postimg.org/tubrcfi03/Untitled_2.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:25:14.580

代码高亮在网络上是一个很常见的问题，由于它是一个演示问题，直接在客户端而不是在 PHP 中执行该过程通常更有效。

为此有很多 Javascript 库，让我举几个例子：

[http://softwaremaniacs.org/soft/highlight/en/](http://softwaremaniacs.org/soft/highlight/en/)

[https://code.google.com/p/syntaxhighlighter/](https://code.google.com/p/syntaxhighlighter/)

[http://craig.is/making/rainbows](http://craig.is/making/rainbows)

[http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:26:40.730

也许你只是忘记了告诉 ***php***是选择的语言：

```
<?php
echo highlight($data["article"]);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:50:13.693

无法确定，但根据问题和一些评论，听起来你的函数`highlight()`会“突出显示”你作为参数传递的任何内容。（您可能应该使用 css 来设置它的样式。见下文。）

你说这样称呼，`highlight($data["article"]);`就是突出整篇文章。这是有道理的， if`highlight()`的工作是突出你传递的任何东西。你通过了整篇文章。

为了使其突出显示仅对代码进行操作，我希望您*仅*将代码传递给它。所以在你的文章中间，无论你有一个代码片段，把它传递*给*函数`highlight()`。取而代之的是，

```
<p>This is part of a paragraph inside your article, 
and it has <code>a little bit of code</code> inside it.</p> 
```

做这样的事情。

```
<p>This is part of a paragraph inside your article, 
and it has <?php echo highlight('<code>a little bit of code</code>'); ?> inside it.</p> 
```

当然，它*可能*是`highlight()`应该对`<code>`标签进行全局搜索和替换，并将突出显示样式嵌入*代码*标签中。我们无法仅通过阅读原始问题来判断。

**考虑`<code></code>`改为使用 css 设置所有样式。**`<head>`和 之间这样的部分`</head>`是您真正需要突出显示所有代码元素的全部。

```
<head>
  <title>Title</title>
  <style type="text/css">
    code {background-color:yellow;}
  </style>
</head> 
```

重要的部分是在“风格”标签之间。这说明了如何使用*内部*样式表来做到这一点。就个人而言，我更喜欢*外部样式表*，但这意味着制作一个额外的文件，这对于这个问题来说似乎太多了。

# css - 创建自定义输入类型范围跨浏览器

> ID：15923161
> 
> 赞同：0
> 
> 时间：2013-04-10T10:20:57.003
> 
> 标签：css, html, range

我正在尝试使用一些 css 自定义 html5 输入 type=range 标记，到目前为止，我已经使用 webkit 做了一些事情：

```
div#timeline input[type="range"] {
    -webkit-appearance: none;
    background-color: darkgray;
    height: 2px;
        border-right: black solid 4px;
        border-left: black solid 4px;
}

div#timeline input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    position: relative;
    top: 0px;
    z-index: 1;
    width: 16px;
    height: 8px;
    background: #696060;
} 
```

但是似乎这只适用于chrome，是否可以制作自定义滑块，以便每个浏览器都相同？我正在考虑制作一些可以模拟输入范围行为的东西，但是我在网上找不到任何东西，而且我对 javascript 和其他东西还是很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:53:53.280

您可以尝试使用一些 javascript 库，例如 jQueryUI 或 jQueryTools。最后一个有非常简单的演示：

[http://jquerytools.org/release-notes/index.html#form](http://jquerytools.org/release-notes/index.html#form)

不幸的是，输入范围现在不能用纯 CSS 以跨浏览器的方式设置样式，我们需要再等一会儿。

# lan - 拒绝某些域用户以管理员身份登录

> ID：15923162
> 
> 赞同：0
> 
> 时间：2013-04-10T10:20:57.390
> 
> 标签：lan

我们有一个小问题。我现在工作的公司有一个主管理员帐户。这是一个问题，因为一些承包商知道密码，然后使用管理员帐户而不是自己的帐户登录。

问题是如果我们更改密码，该帐户将被注销，因为大约有 200 个承包商。

我需要限制那 200 名承包商使用管理员帐户。但是不属于 200 人列表的每个人仍然应该能够使用管理员帐户进行远程桌面处理。

任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:30:20.377

你永远不允许任何不是管理员的人使用管理员帐户。你需要做的是为你的承包商创建提升的特权帐户，他们可以做他们需要做的事情，然后告诉他们登录这些帐户一旦每个承包商都注销/登录，更改管理员密码，礼貌但坚定，您可以向任何需要它的承包商添加权限，但他们都不再获得管理员帐户。这对每个人来说都太危险了。他们不是白痴，他们会理解的。

编辑：至于其他需要远程访问的人也为他们创建帐户，如果您信任他们，您可以创建子管理员帐户，但不要让每个人都使用管理员帐户。它最终会咬你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:33:41.640

我对本地网络不太确定，我只有 ssh 网络的经验，但是你有没有想过使用私钥？再次，我知道这适用于我的目的，不确定本地。

[这是](http://www.cyberciti.biz/faq/force-ssh-client-to-use-given-private-key-identity-file/)一个很好的 linux 设置指南。不知道其他操作系统。

还应该采取某种纪律处分来阻止人们登录错误的帐户，尤其是管理员帐户。

# jquery - 当我单击页面上的任何位置时，尽量不要关闭弹出的颜色框

> ID：15923168
> 
> 赞同：1
> 
> 时间：2013-04-10T10:21:04.460
> 
> 标签：jquery, colorbox

我正在使用颜色框插件打开一个弹出窗口。

PopUp 包含三个单选按钮。现在我想要的是当我单击文档上的任意位置时不要关闭弹出窗口，除非或直到我选中其中一个单选按钮。

任何想法如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:47:45.070

查看文档：[http ://www.jacklmoore.com/colorbox/](http://www.jacklmoore.com/colorbox/)

`overlayClose`- 如果为 false，则通过单击背景覆盖来禁用关闭 Colorbox。

`escKey`- 如果为 false，将禁用关闭“esc”键时的颜色框。

全局变化：

```
$.colorbox.settings.overlayClose = false;
$.colorbox.settings.escKey = false; 
```

**添加：**

正如我所看到的调试`colorbox`，在不影响当前打开的对话框之后更改此属性`init`，因此您应该添加自己的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:37:24.677

请试试这个。

```
$('.ui-widget-overlay').on("click", function() {
if(condition){
   $(window).colorbox.close();;
}
}); 
```

# iphone - 核心数据排序获取请求

> ID：15923174
> 
> 赞同：1
> 
> 时间：2013-04-10T10:21:20.743
> 
> 标签：iphone, objective-c, arrays, sorting, core-data

我需要获取我的数据库并按 id 排序。例如，我在数据库中有 2 列，database_id 和 content。当我 NSLOG 最后一行时，我得到“内容”列的所有行。但我需要根据database_id 1、2、3、4、5、6（升序）对这些“内容”行进行排序。帮助 ？？？

```
 NSFetchRequest *request = [[NSFetchRequest alloc] init];

    NSEntityDescription *ent = [NSEntityDescription entityForName:@"databaseName" inManagedObjectContext:self.managedObjectContext];
    [request setEntity:ent];

    NSSortDescriptor *srt = [NSSortDescriptor sortDescriptorWithKey:@"database_id" ascending:YES];

    [request setSortDescriptors:[NSArray arrayWithObject:srt]];

    NSError *error;
    NSArray *result = [self.managedObjectContext executeFetchRequest:request error:&error];

    if (!result)
    {
        //error
    }
    NSMutableArray *myArray = [[NSMutableArray alloc] initWithArray:[result valueForKey:@"content"]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:34:15.283

您`database_id`存储为字符串，因此 id 被排序为字符串：

```
1, 11, 15, 2, 3, 5 
```

最好的解决方案是将`database_id`作为数字（例如“整数 32”）存储在数据库中。

作为一种解决方法，您可以保留字符串，并在排序描述符中使用特殊的比较函数：

```
NSSortDescriptor *srt = [NSSortDescriptor sortDescriptorWithKey:@"database_id"
                 ascending:YES
                  selector:@selector(localizedStandardCompare:)]; 
```

`localizedStandardCompare`进行“类似Finder”的比较。特别是，包含数字的字符串根据其数值进行排序。

# php - 带有查询的 PDO 语法

> ID：15923178
> 
> 赞同：-4
> 
> 时间：2013-04-10T10:21:46.440
> 
> 标签：php, pdo

嗨，我开始将 PDO 用于 sqlite，我想知道如何做类似的事情：

```
$result = **sqlite_query**($conection,$consulta); 
```

例如类似于`$conection = sqlite_open('../db/traductor.db');`

会是--->`$conection = new PDO('sqlite:../db/traductor.db');`

希望你能理解我的问题，谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T10:32:50.857

正如您所指出的，PHP PDO 手册页将告诉您在哪里寻找，但我会为您节省几分钟。

在程序 MySQL 中，您将使用以下方式连接到数据库：

```
$link = mysql_connect("localhost", "user", "password");
mysql_select_db("database", $link); 
```

并触发您的查询，例如：

```
$query = mysql_query("SELECT * FROM `products` ORDER BY `product_id` ASC;", $link); 
```

在 PDO 中，它有点不同：

```
$pdo = new PDO("mysql:host=localhost;dbname=database;charset=utf8", "user", "password"); 
```

然后像这样触发查询（以直接方式）：

```
$pdo->query("SELECT * FROM `products` ORDER BY `product_id` ASC;"); 
```

但是 PDO 的力量在于准备好的语句

```
$statement = $pdo->prepare("SELECT * FROM `products` WHERE `price` > ? ORDER BY `product_id` ASC;");
$statement->execute([27.75]); 
```

花点时间阅读 PDO 手册页和网络上尽可能多的教程。一开始使用 PDO 比较困难，但是一旦你学会了，你就不想使用更少的东西了（更不用说你可以连接 MySQL、SQL Server、Oracle、PostgreSQL、MongoDB 和许多其他使用相同的结构，以及其他优点）。

希望有所帮助；）

# javascript - 调用列表中的每个函数

> ID：15923179
> 
> 赞同：8
> 
> 时间：2013-04-10T10:21:47.497
> 
> 标签：javascript, functional-programming

我有一系列函数，并正在寻找一种简洁的方法来按顺序调用每个函数。

```
fns = [
    function a() { console.log('a') },
    function b() { console.log('b') },
    function c() { console.log('c') },
] 
```

这有效：

```
fns.map(function (f) { f() }) 
```

这也是：

```
fns.map(function (f) { Function.call.call(f) }) 
```

但是这会引发 TypeError：

```
fns.map(Function.call.call) 
```

为什么后一个示例不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:23:30.573

```
for (var i = 0, len = fns.length; i < len; i++) {
    fns[i].call();
}; 
```

这是工作[小提琴](http://jsfiddle.net/alexflav23/BUAA3/)。

如上所述使用`Function.prototype.call`and来调用函数。`Function.prototype.apply`使用`call`and`apply`您可以将执行范围传递`arguments`给函数调用。如果您不需要，您可以简单地执行以下操作：

```
for (var i = 0, len = fns.length; i < len; i++) {
        fns[i]();
}; 
```

**关于您的代码：**

`Array.prototype.map``callback`是一个接受和的函数`scope as parameters`。在前两个示例中，您使用匿名函数作为`callback`并调用由 自动传递给它的参数`Array.prototype.map`。为了扩展，您的代码相当于：

```
function single(element) {
   element();
};
fns.map(single); 
```

所以上面说的完全正确。通过 using 遵循相同的原则`Function.call.call`，您正在调用`f`通过 map 作为参数传递的函数。

但是在您的第三个示例中，您强制使用直接`call`via `Function.call.prototype.call`，但是在这种情况下，`f`不再作为参数传递，这意味着您`Function.call.call`将尝试调用`undefined`，因此您得到了`TypeError`. 当您放入 时`Function.call.call`，`map()`您**不会**将 a`callback`作为参数传递。

将`call`立即。与, 或`Function.call.call`完全相同，使用时会立即对它进行评估，就像您在第三个示例中所做的那样。`Function.call.call()``Function.call.call(undefined)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T10:48:26.287

这个简化的代码表现出类似的问题：

```
var x = Function.call.call;
x(alert); 
```

在这种情况下，一旦`Function.call.call`被调用，它就不会记住它起源的上下文（即`Function.call`）。为了保存这个上下文，你可以使用这个~~邪恶的构造~~技巧：

```
Function.call.bind(Function.call) 
```

它返回一个新函数，其中的上下文`Function.call`绑定到自身，从而保存上下文。您可以将此表达式保存在一个新变量中：

```
var callFn = Function.call.bind(Function.call); 
```

现在，`callFn(alert)`与 相同`alert.call()`。请注意，任何其他参数都将按原样传递，`callFn(alert, window)`invoke也是如此`alert.call(window)`。`callFn`理解这种行为在作为回调的一部分被调用的情况下很重要，例如`Array.forEach`在每次迭代中传递三个参数。

```
fns.forEach(callFn); 
```

在您的情况下，里面的任何函数`fns`都没有使用传递的参数，但在幕后它们被这样调用：

```
fns[0].call(0, fns) 
```

So`this`等于元素的索引（即`Number(0)`）并`arguments[0]`等于函数数组。敏锐的观察者可能已经注意到元素的值落在裂缝之间，尽管它仍然可以使用`arguments[0][this]`或`arguments.callee`（不推荐）来引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T10:41:39.963

发生这种`TypeError`情况是因为`Function.prototype.call`内部调用`this`（使用给定的上下文和参数，但这在讨论中并不重要）。

让我们重写工作

```
fns.map(function (f) { Function.call.call(f) }) 
```

作为等价物

```
fns.map(function (f) {
    var invoker = Function.call;
    invoker.call(f);
}) 
```

现在很明显，它是用as`invoker`调用的。当它在内部尝试依次调用时，会按预期调用您的函数。`f``this``this`

现在看看这个：

```
fns.map(Function.call.call); 
```

和等价形式

```
fns.map(function (f) {
    var invoker = Function.call;
    invoker.call();
}) 
```

应该很明显，这里，when `invoker`is invoked `this`is `undefined`; 因此它本身不能被调用，这会产生`TypeError`.

# javascript - 单击一个类，但元素显示在另一个类中

> ID：15923181
> 
> 赞同：0
> 
> 时间：2013-04-10T10:21:54.910
> 
> 标签：javascript, html, css

```
for (var i = 0; i < 20; i++) {
    rand = Math.floor(Math.random() * jewels.length)
    html += '<div class="Card1 ' + jewels[rand] + '" id="ship' + i + '" style="top:72px; left:245px;" ></div>'
    jewels.splice(rand, 1);
}

for (var i = 0; i < 4; i++) {
    html += '<div class="Card2" id="stac' + i + '" style="top:' + (135 + (i * 13)) + 'px; left:245px;" ></div>'
}

$('.Card1').click(function () {

}); 
```

当我点击 card1 类时，我想在 card2 类中显示随机 4 个项目（共 20 个）？

# redirect - 链接到 Joomla 中的外部文件 - 仅在测试中工作

> ID：15923201
> 
> 赞同：0
> 
> 时间：2013-04-10T10:22:35.770
> 
> 标签：redirect, joomla, http-status-code-404, joomla2.5, http-status-code-303

我对 Joomla 2.5 有一个非常紧张的问题，我找不到任何答案。我有一个带有一些链接的页面。每个链接都类似于 www.myhost.com/joomla/custom_dev/myscript.php?foo=bar。myscript.php 是一个外部脚本，它不是 Joomla 的一部分，但我需要 Joomla 的一些功能框架。

所以我使用经典代码：

```
// Get Joomla! framework
define( '_JEXEC', 1 );
define( '_VALID_MOS', 1 );
define( 'JPATH_BASE', realpath(dirname(__FILE__).'/../../'));
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe =& JFactory::getApplication('site');
$mainframe->initialise(); 
```

它在我的测试环境中运行良好。

但是在实时服务器上，我收到了 404 错误。使用 FireBug，我看到指向外部文件的链接根本不起作用：它转到 303 重定向，然后转到 404 错误。我尝试了很多东西......现在我找到了导致这个问题的原因：

```
$mainframe->initialise(); 
```

没有这条线，就没有重定向并且链接有效。但我没有框架功能（我需要它们！）。

我也尝试直接访问我的脚本。

www.myhost.com/joomla/custom_dev/myscript.php?foo=bar with $mainframe->initialise() -> 出现 404 错误（由许多 303 重定向引起）

www.myhost.com/joomla/custom_dev/myscript.php?foo=bar 没有 $mainframe->initialise() -> 没有错误，显示没有 Joomla 框架可以显示的内容...

我希望我足够清楚！

编辑：我已经删除了我的自定义 404 页面，真正的 404 原因是找不到该类别。当我尝试 www.myhost.com/joomla/custom_dev/another_script.php 我没有错误。

编辑 2：另一个信息：似乎当我使用 $mainframe->initialise() 时，它会自动在我的 URL 中的某处添加语言，所以它变成 www.myhost.com/joomla/custom_dev/en/myscript.php?foo =酒吧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:16:24.987

尝试通过一些调整和删除来使用它：

```
define('_JEXEC', 1);
define('JPATH_BASE', realpath(dirname(__FILE__)));
require_once ( JPATH_BASE .'/includes/defines.php' );
require_once ( JPATH_BASE .'/includes/framework.php' );
require_once ( JPATH_BASE .'/libraries/joomla/factory.php' ); 
```

# zend-framework - 表单元素装饰器 Zend Framework

> ID：15923203
> 
> 赞同：1
> 
> 时间：2013-04-10T10:22:41.637
> 
> 标签：zend-framework, twitter-bootstrap, zend-form, zend-form-element

我正在使用 Zend Framework 1 和[这个](https://github.com/komola/Bootstrap-Zend-Framework)库来集成 Twitter-bootstrap。这是一个很棒的库，但我想为它添加新的装饰器（用于 Zend 表单元素文件），所以它看起来像[这里](http://blueimp.github.io/jQuery-File-Upload/)

所以而不是

```
<input id="image" type="file" name="image"> 
```

我想渲染类似的东西（所有样式和javascript）

```
<span class="btn btn-success fileinput-button">
  <i class="icon-plus icon-white"></i>
  <span>Add files...</span>
  <input type="file" multiple="" name="files[]">
</span> 
```

我是 Zend Framework 的新手，不知道该怎么做。

问题是，我在 library/Twitter/Form.php、public/css 和 public/javascript 中放了什么来使其工作？

或者也许我必须做其他事情？

我尝试在 Form.php 中添加装饰器，但没有应用装饰器（我不记得我到底做了什么）

所以主要问题是，如何在库/Twitter 中为我的元素添加这个装饰器？

编辑：

我正在解决这个问题，并设法使用 jQuery-file-upload-ui.css （不记得文件名）并在 Form.php 中更改 $decorators 代码来显示一个带有“加号”图片的绿色按钮

```
if($element instanceof Zend_Form_Element_File) 
```

位于

```
$decorators = array(
            "ViewHelper",
            array("Errors", array("placement" => "append")),
            array("Description", array("tag" => "span", "class" => "help-block")),
            array(array("ivanov2" => "HtmlTag"), array("tag" => "i", "class" => "icon-plus icon-white",'openOnly' => true,)),
            array(array('close' => 'HtmlTag'), array('tag' => 'i', 'closeOnly' => true)),
            array(array("ivanov" => "HtmlTag"), array("tag" => "span", "class" => "btn btn-success fileinput-button")),
            array(array("innerwrapper" => "HtmlTag"), array("tag" => "div", "class" => "controls")),
            array("Label", array("class" => "control-label")),
            array(array("outerwrapper" => "HtmlTag"), array("tag" => "div", "class" => "control-group"))
        ); 
```

但是我仍然不知道如何放置带有某些内容的元素（例如带有文本）：

```
<span>Add Files..</span> 
```

我也想使用拖放，但不知道如何。

# ios - CoreAnimation 跟踪原始值

> ID：15923204
> 
> 赞同：0
> 
> 时间：2013-04-10T10:22:49.933
> 
> 标签：ios, core-animation

我经常需要对视图进行动画处理并将其动画化回其原始值。（类似于放大`UIImageView`和`Tap`返回）

是否有更优雅的解决方案来跟踪原始值，而不是创建类字段并将它们分配给`viewDidLoad`?

你们如何处理这样的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:11:57.057

如果您将转换应用于视图，您可以在完成后将其设置回身份转换。这段代码创建了一个可以放大和缩小的基本切换。

```
// Check to see if the current transform is identity which means
// no transform applied. If it is, scale the view. Otherwise, 
// set it back to identity.
CGFloat scale = 3.0f;
if (CGAffineTransformIsIdentity([_imageView transform])) {
  [_imageView setTransform:CGAffineTransformMakeScale(scale, scale)];
} else {
  [_imageView setTransform:CGAffineTransformIdentity];
} 
```

这使您不必跟踪起始值是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:01:54.970

您跟踪类中初始原始值的解决方案正是我这样做的方式。那里没有不雅，只是你必须做的事情。我不知道任何其他解决方案。

# c++ - 是否可以在函数中使用两次 va_list 方法？

> ID：15923210
> 
> 赞同：2
> 
> 时间：2013-04-10T10:22:59.493
> 
> 标签：c++, formatting

我想在一个函数中使用两次 va_list 方法。我可以这样做吗？

```
#include <cstdarg>

void printFDS(int num_fds, ... , const char *fmt, ...) {

    va_list fds, args;
    va_start(fds, num_fds);
    va_start(args, fmt);

    for (int i = 0; i < num_fds; i++) {
        vsprintf(va_arg(fds, FILE*), fmt, args);
    }
    va_end(args);
    va_end(fds);
} 
```

所以我可以这样调用那个函数：

```
printFDS(1, stderr, "Error: %s\n", stderror(errno)); 
```

或者 `printFDS(2, stderr, otherFD, "Error: %s\n", stderror(errno));`

尽管`FILE *otherFD = fopen ("somefile", "w");`

我的目的：在 fd 的列表上打印信息。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:24:14.130

这是不可能的，省略号（三个点）必须只有一次且只有最后一个。

* * *

如果你有一个支持 C++11 的编译器，你可以使用[初始化列表](http://en.wikipedia.org/wiki/C%2B%2B11#Initializer_lists)和`std::vector`第一个参数来完成它：

```
void printFDS(const std::vector<FILE*>& files, const char* fmt, ...)
{
    // ...
} 
```

你可以把它称为

```
printFDS({ stderr, otherFilePointer }, "Error: %s\n", std::strerror(errno)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T10:30:21.040

您不能直接执行此操作。但是，您可以做的是

```
void printFDS(int num_fds, ...) 
```

并在您的函数中，用于`va_copy`获取两个`va_list`变量。在一个中，阅读`FILE *`s。另一种是先skip `num_fds` `FILE *`s，然后用它`va_arg`来获取格式字符串。

您将需要进行更多复制以确保该秒`va_list`不会被 垃圾`vfprintf`，您可以再次使用`va_copy`它。

# javascript - 从包含 angular.js 的 html 文件中调用函数

> ID：15923215
> 
> 赞同：0
> 
> 时间：2013-04-10T10:23:06.077
> 
> 标签：javascript, jquery, angularjs

我有一个简单的`index.html`页面，其中包含一些带有 angular.js 的 htmls 文件

```
<div data-ng-include="'header.html'"></div> 
```

使用此功能，我将标题包含在我的索引页面中，一切正常。

我现在有一个简单的警报功能：

```
$('#myButton').click(function(){
    alert('hello');
}); 
```

我有简单的`div`：

```
<div id="myButton">test</div> 
```

如果我将 div 包含到我的`index.html`一切工作正常 - 但如果我将其包含`div`在`header.html`其中包含的 div 中`angular.js`，则没有反应或错误...

我认为 id 不知道 javascript 调用。
任何想法，我可以得到这个工作？我不想放弃包含...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:27:49.770

原因是，您是在加载文档后插入的。因此，您需要以这种方式委托和操作函数：

```
$('body').on('click', '#myButton', function(){
    alert('hello');
}); 
```

解释是，DOM 在文档加载后被操作。但在此之前，您要添加此事件处理程序，该事件处理程序不会被元素接收。因此，您将事件触发器委托给主体，当它发生更改时，将添加此事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:28:26.603

**编辑：**正如 Praveen Kuma 所说，从 jQuery 1.7+ 开始，“live”已被弃用。

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

因此，除非您使用的是旧版本的 jQuery，否则不要使用它。但是，如果您真的想要并且有充分的理由这样做，这将起作用：

使用“现场”

[http://api.jquery.com/live/](http://api.jquery.com/live/)

```
$('#myButton').live('click', function(){
    alert('hello');
}); 
```

即使该元素当时不存在，这也会监视您的 DOM

# maven - 耳下的战争部署序列

> ID：15923218
> 
> 赞同：0
> 
> 时间：2013-04-10T10:23:11.237
> 
> 标签：maven, war, ear

我对这个概念很陌生。

我**耳朵**`wars`下面有两个。是一个带有启动参数负载的 servlet，我想先部署它，完成后，应该部署它。如何做到这一点？**`War-1``War-2`**

 **我正在`maven`使用`Jboss7.1.1.Final`.

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:16:45.530

您可以使用模块。假设您的项目如下所示：

*   耳朵（pom.xml）
    *   战争一
    *   战争2

在 War-1 和 War-2 目录中添加 pom 文件。ear 目录中的 pom 文件将是父文件，您在其中声明要处理的模块：

```
<modules>
    <module>War-1</module>
    <module>War-2</module>
</modules> 
```

Maven 将在 War-1 和 War-2 目录中查找 pom。在每个中创建一个新的 pom：

*   耳朵（pom.xml）
    *   战争 1 (pom.xml)
    *   战争 2 (pom.xml)

在那里，每个子模块中都有一个 pom.xml 的摘要。您必须声明父母：

```
<parent>
    <artifactId>yourArtifact</artifactId>
    <groupId>yourGroup</groupId>
    <version>1.0-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
</parent>

<!-- Name your package as you like -->
<groupId>${project.parent.groupId}</groupId>
<artifactId>${project.parent.artifactId}-War1</artifactId>
<name>${project.parent.artifactId}-War1</name>
<description>
    War of project ${project.parent.artifactId}
</description>

<version>1.0-SNAPSHOT</version>
<packaging>war</packaging> 
```

那是你要找的吗？[您可以在http://www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)找到有关模块的更多信息

@+**

# java - 如何在 Spring 中向 ConstraintValidator 添加错误代码？

> ID：15923226
> 
> 赞同：8
> 
> 时间：2013-04-10T10:23:25.567
> 
> 标签：java, spring

我实现了自己的注释和 ConstraintValidator (JSR-303)。在验证过程中，我想创建不同的错误代码：

```
public class SomeValidator implements ConstraintValidator<ConstraintAnnotation,SomeObject> {

    @Override
    public void initialize (ConstraintAnnotation constraintAnnotation) {
    }
    @Override
    public boolean isValid (SomeObject some, ConstraintValidatorContext context) {
        int parameter = some.getParameter();
        if (parameter==1){
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate("SomeObject.code.first").addConstraintViolation();
            return false;
        }
        if (parameter==2){
            context.disableDefaultConstraintViolation();
            context.buildConstraintViolationWithTemplate("SomeObject.code.second").addConstraintViolation();
            return false;
        }
        return true;
    }
} 
```

但是 context.buildConstraintViolationWithTemplate() 添加了错误消息而不是代码。所以弹簧关系来扩展这样的代码：

```
ConstraintAnnotation.someObject 
```

不是

```
SomeObject.code.second 
```

如何添加客户代码而不是消息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T01:12:48.003

问题解决得非常简单：

1) 用 {} 包围错误代码，如下所示：

```
context.buildConstraintViolationWithTemplate("{SomeObject.code.first}").addConstraintViolation(); 
```

2）将属性文件添加到资源文件夹（它是maven项目中的资源文件夹）：

```
ValidationMessages_en_US.properties 
```

ValidationMessages_en_US.properties 文件内容

```
SomeObject.code.first=Illegal link value 
```

在该验证生成代码而不是消息之后，spring 将错误代码解析为实际消息。

**笔记：**

1.  实际上，您可以将 ValidationMessages_en_US.properties （和其他 i18n 属性文件）放在 spring 项目中的每个位置。如果你把它放在其他位置你需要配置LocalValidatorFactoryBean，理论上，实际上我做不到，在我的情况下代码没有解析，我把属性文件放在资源文件夹中。
2.  您可以创建自定义错误消息，例如：“错误消息。{error.code}”和“error.code”将替换为文件中的属性。请参阅[JSR-303 规范](http://jcp.org/en/jsr/detail?id=303)

# erlang - [33|44] 的语法是什么？

> ID：15923229
> 
> 赞同：0
> 
> 时间：2013-04-10T10:23:34.753
> 
> 标签：erlang

这就是我在我的 Erlang shell 中所做的：

```
Erlang R14B04 (erts-5.8.5) [source] [smp:2:2] [rq:2]
    [async-threads:0] [kernel-poll:false]

Eshell V5.8.5  (abort with ^G)
1> A = [33|44].
[33|44]
2> is_list(A).
true
5> length(A).
** exception error: bad argument
 in function  length/1
    called as length([33|44]) 
```

这个对象是什么 [33|44] ？它真的是一个列表吗？

# c# - MVVM - 具有多态性的集合

> ID：15923230
> 
> 赞同：4
> 
> 时间：2013-04-10T10:23:53.563
> 
> 标签：c#, wpf, mvvm, .net-4.0

我试图在 ListBox 中公开两种派生类型：OutFlight 和 InFlight 都派生自作为抽象类型的 Flight。

MVVM 说我必须为 ListBox 的绑定模型设置一个 ViewModel。公开一种类型并不是什么大问题，但我的列表框包含两种派生类型，我正在寻找最好的 MVVM 方法。这是否意味着我必须为每个派生类型设置继承的 ViewModel？我在某处读过 ViewModel 继承根本不推荐......我敢肯定这是一个非常常见的情况

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T10:42:55.740

有几种方法。一种方法是为您的 Flight 类编写一个 ViewModel，并用这些“FlightViewModel”对象填充一个集合。该 ViewModel 可以包含从“Flight”继承的所有对象。如果您的“InFlight”和“OutFlight”类不那么复杂，我会将它们包装在一个 ViewModel 中（这里是“FlightViewModel”）。

```
public class FlightViewModel : INotifyPropertyChanged
{
    public Flight Flight { get; set; }

    public int PropertyYouNeedForInFlight { get; set; }
    public string PropertyYouNeedForOutFlight { get; set; }
} 
```

**另一种方法**是使用一些基本 ViewModel 类型的集合作为 ListBox ItemsSource。该集合包含一些“InFlightViewModel”类型的 ViewModel 和其他一些“OutFlightViewModel”类型的 ViewModel。对于您的 ListBox 项目，您可以编写一个 ItemTemplateSelector，为项目类型选择正确的 ItemTemplate。

```
public class MainWindowViewModel
{
    public ObservableCollection<ViewModelBase> Flights { get; set; }

    public MainWindowViewModel()
    {
        Flights = new ObservableCollection<ViewModelBase>();
        Flights.Add(new InFlightViewModel());
        Flights.Add(new OutFlightViewModel());
    }
}

public class FlightTemplateSelector : DataTemplateSelector
{
    public DataTemplate InFlightTemplate { get; set; }
    public DataTemplate OutFlightTemplate { get; set; }

    public override DataTemplate SelectTemplate(object item, 
                                                DependencyObject container)
    {
        if(item.GetType() == typeof(InFlight))
            return InFlightTemplate;
        if(item.GetType() == typeof(OutFlight))
            return OutFlightTemplate

        //Throw exception or choose some random layout
        throw new Exception();
    }
 }

<local:FlightTemplateSelector
    x:Key="FlightTemplateSelector">
    <local:FlightTemplateSelector.InFlightTemplate>
       <!-- Define your layout here -->
    </local:FlightTemplateSelector.InFlightTemplate>
       <!-- Define your layout here -->
    <local:FlightTemplateSelector.OutFlightTemplate>
    </local:FlightTemplateSelector.OutFlightTemplate>
</local:FlightTemplateSelector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:05:44.747

您可以创建一个封装 OutFlight 和 InFlight 实体的通用视图模型 FlightViewModel。因此 FlightViewModel 具有所有通用属性，并且基于 OutFlight 和 InFlight 实体构建（例如通过在构造函数中传递它们）。它可能有一个额外的属性，指示它是飞行还是飞行（作为枚举或其他东西）。

这样做会使 FlightViewModel 基本上成为具体类型 OutFlight 和 InFlight 的抽象。FlightViewModel 也将仅包含您在视图中实际需要的属性，并且格式正确，以便视图可以轻松使用它。

然后，您的视图的视图模型将具有 FlightViewModel 对象的集合。

```
public class FlightViewModel
{
    private Flight _flight;

    public FlightViewModel(OutFlight outFlight)
    {
        FlightNumber = outFlight.FlightNumber;
        FlightType = FlightType.OutFlight;
       _flight = outFlight;
    }

    public FlightViewModel(InFlight inFlight)
    {
        FlightNumber = inFlight.FlightNumber;
        FlightType = FlightType.InFlight;
       _flight = inFlight;
    }

    public int FlightNumber 
    { 
       get { return _flight.FlightNumber; }
       set { _flight.FlightNumber = value; }
    }

    public FlightType FlightType { get; set; }

    ... other properties
} 
```

这当然只是一个例子，但你明白了。

# php - HTML 字符被逐字翻译

> ID：15923231
> 
> 赞同：0
> 
> 时间：2013-04-10T10:24:07.380
> 
> 标签：php, html, mysql, pdo, doctype

我正在`<textarea></textarea>`使用 PHP 中的 PDO 驱动程序将 html 从 a 保存到 Mysql 数据库。我试过使用`htmlentities() & htmlspecialchars()`. 当从数据库请求 html 以在 DOM 中显示时（分别使用 html_entity_decode 和 htmlspecialchars_decode ），它按字面意思返回标签。

因此，例如：

**强文本**将返回为`<strong>strong text</strong>`

我不完全确定它是否重要，但页面是用 ANSI 编码的，我的文档类型是

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:31:19.317

> 我正在从`<textarea></textarea>`

请注意，就浏览器而言，它正在发送文本。它是否是 HTML 取决于您如何处理它。

> 我试过使用`htmlentities()`&`htmlspecialchars()`

`htmlspecialchars()`如果您想在 HTML 文档中显示提交的文本（即如果`<strong>`在文本区域中键入并且您希望呈现文本*小于、强、大于*并且没有*强的开始标记，则使用正确的工具元素*）。如果您想将提交的文本视为 HTML，请不要使用这些函数。

> 当从数据库请求 html 以在 DOM 中显示时（分别使用 html_entity_decode 和 htmlspecialchars_decode ），它按字面意思返回标签。

这是你的问题。

你是：

1.  取一些文字
2.  对其进行编码以呈现为 HTML
3.  将 HTML 插入数据库
4.  从数据库中获取 HTML
5.  将 HTML 解码为文本
6.  将文本插入到 HTML 文档中，该文档将被视为 HTML

你应该做什么：

1.  取一些文字
2.  将其插入数据库
3.  将其从数据库中取出
4.  将其编码为 HTML
5.  将 HTML 插入 HTML 文档

在第 4 步使用`htmlspecialchars`，永远不要解码它（浏览器会这样做）。

如果您希望用户能够输入将呈现为 HTML 的 HTML，请跳过第 4 步。这将使您容易受到 XSS 攻击，因此除非您完全信任有权访问的每个人，否则请使用基于 DOM 的、将 HTML sanitizer 列入白名单数据。

# c++ - 登录多线程应用程序，在构造函数中使用互斥锁

> ID：15923233
> 
> 赞同：2
> 
> 时间：2013-04-10T10:24:09.610
> 
> 标签：c++, logging, mutex

我一直在编写基于 RAII 的 C++ 方法进入/退出记录器。用法是这样的：

```
void Class::Method()
{
    METHOD_NAME( "Class::Method" );   // I know: I could use __FUNCTION__ instead ;<)
    …
} 
```

记录器类：

```
#define METHOD_NAME(name)  TraceLogger  _traceLog(name);

TraceLogger::TraceLogger( const std::string& theContext )
{
    <lock mutex here>
    // Trace logging code here
}

TraceLogger::~TraceLogger()
{
    <lock mutex here>
    // Trace logging code here
} 
```

问题是代码不是线程安全的。如果我在这里添加一个互斥锁来保护代码，它会被正确使用，因为它将被构造然后立即在 TraceLogger 构造函数中使用？

我们是一家 windows VS2008 商店（也就是说，没有可用的 std::mutex ），并且正在使用自制的线程锁定代码。我试过用这个，它似乎不起作用。

有什么标准方法可以做到这一点吗？

谢谢，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:41:46.073

使用使用工作线程类封装的基于无锁队列的结构。所有应用程序线程都会将日志字符串放入对象队列中。工作线程将扫描队列并将数据记录到文件中。使工作线程在队列为空时阻塞。

在 C++ 并发演讲中，Herb Sutter 将其描述如下：

记录器采用可以记录字符串的 lambda。工作人员有一个 lambda 队列，并将连续执行 lambdas。

```
class log 
{
  fstream f;
  worker_thread w;

  public:
   void println( /*…*/ ) 
   {
      w.send([=]{f << /*…*/ << endl;
   });}

}; 
```

# solr - Solr：使用短语搜索使用特殊字符进行搜索

> ID：15923234
> 
> 赞同：0
> 
> 时间：2013-04-10T10:24:12.110
> 
> 标签：solr, query-parser

我们需要让 Solr Search 像

```
"Success & Failure"
"Working 50%" 
```

但是 Solr 查询解析器会从搜索中消除所有特殊字符，尽管如果我向它添加转义序列。

我的搜索查询如下所述

```
http://localhost:8080/solr/core0/select?q=%22Success%20\%26%20Failure%22&debugQuery=on 
```

下面是它的调试查询。

```
<lst name="debug">
   <str name="rawquerystring">"Success & Failure"</str>
   <str name="querystring">Success & Failure"</str>
   <str name="parsedquery">PhraseQuery(text:"success failure")</str>
   <str name="parsedquery_toString">text:"success failure"</str>
   <lst name="explain"/>
    <str name="QParser">LuceneQParser</str>
    <lst name="timing"></lst>
 </lst> 
```

我在网上搜索过这个，我得到的结果说应该索引特殊字符以使其工作，因为默认情况下 solr 不索引任何特殊字符。

为此，我已添加`solr.WordDelimiterFilterFactory`到我的`TextField`定义中

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
     <!--   <charFilter class="solr.MappingCharFilterFactory" mapping="char-mapping.txt"/>-->
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.WordDelimiterFilterFactory"
                splitOnCaseChange="0"
                splitOnNumerics="0"
                stemEnglishPossessive="0"
                generateWordParts="0"
                generateNumberParts="0"
                catenateWords="0"
                catenateNumbers="0"
                catenateAll="0"
                preserveOriginal="1"
                types="wdfftypes.txt"
                />
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="false" />
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.WordDelimiterFilterFactory"
                splitOnCaseChange="0"
                splitOnNumerics="0"
                stemEnglishPossessive="0"
                generateWordParts="0"
                generateNumberParts="0"
                catenateWords="0"
                catenateNumbers="0"
                catenateAll="0"
                preserveOriginal="1"
                types="wdfftypes.txt"
                />
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="false" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType> 
```

althohg 这样做，它不会`&`在搜索词中解析。

我们要做的是，solr 应该用“success & failure”搜索，不应该排除特殊字符。

任何人有任何想法，如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:27:27.243

您应该考虑使用 solr.WhitespaceTokenizerFactory 而不是 solr.StandardTokenizerFactory，因为 StandardTokenizer 使用特殊字符作为单词边界。在这种情况下，当您希望将文本拆分为单词时，您需要开始思考。

此外，您使用的 WordDelimiterFilterFactory 可能会过滤掉这个字符。为了防止它这样做，您应该能够根据这个问题“[如何在 Solr 中找到包含数字和美元符号的文档？](https://stackoverflow.com/questions/14886310/how-do-i-find-documents-containing-digits-and-dollar-signs-in-solr) ”在您的类型定义中将 & 定义为 ALPHA。

该定义在您的 solr.WordDelimiterFilterFactory 声明中由**types="wdfftypes.txt"表示的文件中给出。**

> & => 阿尔法

进一步阅读如何制作这个文件

*   [http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)
*   [https://issues.apache.org/jira/browse/SOLR-2059](https://issues.apache.org/jira/browse/SOLR-2059)

# macos - 正确使用 MIDIPacketListAdd (CoreMIDI)

> ID：15923236
> 
> 赞同：0
> 
> 时间：2013-04-10T10:24:15.393
> 
> 标签：macos, core-audio, coremidi

我正在尝试通过这样做（在 Mac 上）使用 CoreAudio 的 MIDIPacketListAdd：

MIDIPacketListAdd(packetList, PACKETLIST_SIZE, currentPacket, mach_absolute_time, len, data);

我正在考虑在发送之前多次调用该方法，以便我的 packetList 中包含 > 1 个数据包。但是，当我这样做时，numPackets 永远不会增加，而我得到的是 packetList->packet[0] 和不断增加的 packet[0].data。

1）使用这种方法的正确方法是什么？我看过几个例子，包括“Learning Core Audio”中的一个——它们似乎都只发送一个数据包。

2) 如果我在 1 个数据包列表中打包多个数据包而不是多次发送 1 个数据包列表和 1 个数据包，是否有任何性能改进？

谢谢，感谢您对此的任何帮助。

后续编辑：这是我初始化数据包列表的方式

```
#define PACKETLIST_SIZE 512

- (void) initPacketList {

    if (packetList) {
        free(packetList);
        packetList = NULL;
    }

    packetList = (MIDIPacketList *)malloc(PACKETLIST_SIZE * sizeof(char));
    currentPacket = MIDIPacketListInit(packetList);
}

- (void) clearPacketList {

    packetList->numPackets = 0;
        currentPacket = MIDIPacketListInit(packetList);
}

- (void) addPacketToPacketList:(Byte*) data ofLength:(int) len {

    NSLog(@"length %d", len); 
    //NSLog(@"%lld", mach_absolute_time());
    currentPacket = MIDIPacketListAdd(packetList, PACKETLIST_SIZE, currentPacket, mach_absolute_time, len, data);

    //if (!currentPacket) exit(1);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:18:13.187

[答案在`MIDIPacketListAdd`](http://developer.apple.com/library/ios/documentation/CoreMidi/Reference/MIDIServices_Reference/Reference/reference.html#//apple_ref/doc/uid/TP40010316-CHMIDIServiceshFunctions-SW9).

> **返回值**
> 
> 如果数据包中没有空间用于事件，则返回 null；否则返回一个数据包指针，该指针应在后续调用此函数时作为 curPacket 传递。

所以你可能想要这样的东西：

```
currentPacket = MIDIPacketListAdd(packetList, PACKETLIST_SIZE, currentPacket, mach_absolute_time, len, data); 
```

`currentPacket`每次之后一定要检查是否为NULL。

如果您将多个数据包放在一个数据包列表中，性能应该会更好，因为您向 MIDI 服务器发出的跨进程请求更少，但老实说，在现代 Mac 上不太可能引起注意。

*编辑：*这就是你做错了什么。

```
packetList = (MIDIPacketList *)malloc(PACKETLIST_SIZE * sizeof(char)); 
```

`sizeof(char)`根据定义，在 C 语言中始终为 1。`malloc(PACKETLIST_SIZE)`是你所需要的全部。

```
currentPacket = MIDIPacketListAdd(packetList, PACKETLIST_SIZE, currentPacket, mach_absolute_time, len, data); 
```

这给了我一个编译器警告，因为您传递的是函数的*地址*`mach_absolute_time`，而不是调用函数。你的意思是：

```
currentPacket = MIDIPacketListAdd(packetList, PACKETLIST_SIZE, currentPacket, mach_absolute_time(), len, data); 
```

一旦我这样做了，我就看到`packetList->numPackets`了预期的增长。

但是，请注意两点：

*   如果您想立即发送 MIDI 数据，只需提供`0`.

*   如果您`MIDIPacketListAdd`使用与前一个调用相同的时间戳进行调用，那么它只会将您的数据连接到前一个数据包。你会看到`packetList->numPackets`并`currentPacket`保持不变，但`currentPacket->length`会增加。

这就是为什么你没有看到`packetList->numPackets`增加：地址`mach_absolute_time`是一个常数，所以你的“时间戳”每次都是一样的。

# symfony - Symfony2 功能测试中锚点以外的“单击”节点

> ID：15923237
> 
> 赞同：1
> 
> 时间：2013-04-10T10:24:16.583
> 
> 标签：symfony, phpunit, functional-testing

我有一个`<li>`元素，它有一个使用 jQuery 绑定到它的单击侦听器。是否可以使用客户端/爬虫“单击”此元素，以测试结果。到目前为止，我只找到了跟踪锚链接的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:42:32.417

你不能用像 Symfony2 提供的那样的 PHP 爬虫来做任何涉及 Javascript 的事情。

你必须看的是使用假浏览器进行功能测试，比如[CasperJS](http://casperjs.org/testing.html)。有了它，您可以试用无头 WebKit 浏览器，并受益于任何异步测试框架的所有功能。

*   点击任何东西，抛出事件，在页面中注入代码
*   等待 DOM 节点
*   执行阿贾克斯...

仅举几例，您应该尝试：

*   茉莉花
*   硒
*   僵尸.JS

# oracle - 确定输入参数的数据类型

> ID：15923238
> 
> 赞同：0
> 
> 时间：2013-04-10T10:24:20.247
> 
> 标签：oracle, plsql

有什么方法**可以确定**pl_sql 函数中输入参数的数据类型，就像我们在 java 中有**instanceof一样。**我尝试过使用转储功能，但它只能在查询中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:42:56.220

从评论看来，您似乎想通过循环输入参数来构建动态查询字符串，大概是为了构建`where`子句而无需手动输入。这似乎会使维护和理解变得更加困难，而没有太多好处。

但是，作为练习，您*可以*循环`user_arguments`查看视图中的参数定义。问题是你不能在不命名的情况下获得实际的参数*值*，如果你这样做了，那么数据类型只有在你将值直接放入动态字符串时才重要（你不能在循环中真正做到这一点）而不是作为绑定变量，无论如何这都是一件坏事。如果你使用绑定变量，那么你不需要知道数据类型。

所以主要是为了我自己的娱乐，如果我有一个包含各种数据类型的表：

```
create table t42(col1 varchar2(10), col2 number, col3 date);
insert into t42 values ('data', 42, trunc(sysdate)); 
```

...以及参数名称与表列名称匹配的函数，然后您可以使用绑定变量构建动态字符串：

```
create function f42(col1 t42.col1%type, col2 t42.col2%type,
    col3 t42.col3%type)
return varchar2 is
    str varchar(4000);
    result t42.col1%type;
    have_where boolean := false;
begin
    str := 'select col1 from t42';
    for r in (
        select argument_name, data_type
        from user_arguments
        where object_name = 'F42'
        and position > 0 -- to account for return type
        order by position
    ) loop
        if not have_where then
            have_where := true;
            str := str || ' where ';
        else
            str := str || ' and ';
        end if;
        str := str || r.argument_name || ' = :' || r.argument_name;
    end loop;

    dbms_output.put_line(str);

    execute immediate str into result using col1, col2, col3;
    return result;
end;
/ 
```

然后我可以从 SQL*Plus 调用它：

```
SQL> var rc varchar2(10);
SQL> exec :rc := f42('data', 42, trunc(sysdate));

select col1 from t42 where COL1 = :COL1 and COL2 = :COL2 and COL3 = :COL3

PL/SQL procedure successfully completed.

SQL> print rc

RC
--------------------------------
data 
```

显然是一个非常人为的例子，但它会随着更多参数进行扩展，只有`using`子句需要将它们全部列出。我认为。这并不**意味着**我认为这是一个好主意 - 只是为了好玩......

如果需要，您可以通过检查值在循环中根据数据类型进行一些操作`r.data_type`：

```
 str := str || r.argument_name || ' = ';
        if r.data_type = 'DATE' then
            str := str || 'trunc(:' || r.argument_name || ')';
        else
            str := str || ':' || r.argument_name;
        end if; 
```

...然后您可以调用它而无需调用中`trunc`的值：

```
SQL> exec :rc := f42('data', 42, sysdate);

select col1 from t42 where COL1 = :COL1 and COL2 = :COL2 and COL3 = trunc(:COL3)

PL/SQL procedure successfully completed.

SQL> print rc

RC
--------------------------------
data 
```

...但除此之外，您不需要知道动态字符串中每一列的类型，因为无论如何绑定都会处理这个问题。

# android - 如何在从 Android 应用程序写入文本文件时限制文件大小

> ID：15923239
> 
> 赞同：0
> 
> 时间：2013-04-10T10:24:30.473
> 
> 标签：android

我`Android` `App`不断地将日志写入`.txt`文件。我想限制这个文件的大小。即，如果文件大小超过`1MB`它就不会再写任何日志，并且会向用户发送通知，告知您的日志文件中没有更多空间。我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:33:27.997

试试这个代码来计算大小：

```
File file = new File("text.txt");
                long filesize = file.length();
                long filesizeInKB = filesize / 1024;
                long filesizeinMB=filesizeInKB/1024; 
```

# c# - 如果用户选择该选项，会话不应过期

> ID：15923245
> 
> 赞同：1
> 
> 时间：2013-04-10T10:24:51.663
> 
> 标签：c#, asp.net, session

我想在我的 asp.net 解决方案中为用户创建选项，如果用户检查会话不应该自动过期。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:38:11.743

您可以尝试执行一个后台 ajax 调用（每 x 分钟），以使选择这样做的用户保持会话活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T06:14:00.540

您必须设置会话超时值，但要使其过期，您可以根据以下示例将其设置为最大值。

您可以手动设置 Session.Timeout = 20; 或 Session.Timeout = 180；根据登录时的用户类型。

此代码应该适合您：

```
protected void SetSessionTime(string userType)
{
    if (UserType == "admin")
    {
        Session.Timeout = Int32.Max;
    }
    else
    {
        Session.Timeout = 20;
    }
} 
```

您可以在用户成功登录后调用 SetSessionTime()。

# asp.net - asp.net gridview到购物车

> ID：15923247
> 
> 赞同：-4
> 
> 时间：2013-04-10T10:24:57.333
> 
> 标签：asp.net, sql, gridview, cart, shopping

我有一个产品页面，将我的产品存储在网格视图中。产品从 sql 数据库加载。我想将选定的产品存储到购物车中，。

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:32:49.603

网上有很多关于在 ASP.NET 中实现购物车的文章。

谷歌关键词：asp.net 实现购物车。

例如，此页面可能有用：[在 ASP.NET 中构建购物车](http://net.tutsplus.com/tutorials/other/build-a-shopping-cart-in-aspnet/)。

# webdriver - 正则表达式不适用于 TestNg dependsOnMethods

> ID：15923248
> 
> 赞同：0
> 
> 时间：2013-04-10T10:24:58.737
> 
> 标签：webdriver, selenium-webdriver, testng

我正在尝试对 TestNg dependsOnMethods 使用正则表达式，但 TestNg 没有识别该方法。当我浏览了 TestNg 文档时，我们可以将正则表达式用于dependsOnMethods 和dependOnGroups。

例如，我有如下方法，

```
@Test
public void testParallel_1001(){
} 
```

我还有另一种依赖于上述方法的测试方法，

```
@Test(dependsOnMethods = { "(.*?)1001" }, alwaysRun=true)
public void testParallel_1003(){

} 
```

但这对我不起作用。

我也用过，`/1001/`但`*.1001.*`没有运气。请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:16:10.603

`dependsOnMethods`包含精确方法名称的列表，而不是正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T07:13:21.963

根据文档，它的软依赖接受正则表达式

[http://testng.org/doc/documentation-main.html#dependencies-with-annotations](http://testng.org/doc/documentation-main.html#dependencies-with-annotations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-07T03:13:57.507

根据 TestNG 官方[文档](http://testng.org/doc/documentation-main.html)：dependsOnGroups 和 dependsOnMethods 都接受正则表达式作为参数。

# typo3 - TYPO3 'Extension Builder' ext 中的继承

> ID：15923260
> 
> 赞同：1
> 
> 时间：2013-04-10T10:25:39.677
> 
> 标签：typo3, typo3-tca

我想开发一个扩展，我有一个实体`FamilyMember`和子实体`Child`和`Conjoint`. `Child`并`Conjoint`扩展`FamilyMember`。这是对我的 UML 概念的描述，但是我不知道如何使用构建器扩展来实现这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:41:16.810

Extension Builder 允许您仅从现有**和**已安装的扩展扩展模型，因此在创建新的 ext 时您不能这样做，理论上...

你有两种方法：

1.  创建`FamilyMember`（和其他必需的模型）但不是`Child`，`Conjot`保存它，安装新扩展，返回扩展生成器并添加这两个 - 你将有一个名为`Extend existing model class`.
2.  可能更快：在保存这些模型的编辑 PHP 类并更改从其他类扩展后，将所有模型创建`Extension Builder`为*独立模型*`Tx_Extbase_DomainObject_AbstractEntity`

# iphone - 在不提交应用商店的情况下更新 ios 应用

> ID：15923265
> 
> 赞同：0
> 
> 时间：2013-04-10T10:26:08.950
> 
> 标签：iphone, ios

我们可以使用归档的类对象的自定义构建文件归档，然后读取这个类以获取 iOS 中的更新，例如：

```
 interface base  {
 -(void) methodbase1;
-(void) methodbase2;

}
base *objbase =[[base alloc]init];

 archiving objbase -->to file 
 {
 //if we provide this file from remote server can we update
 }
reading objbase <--from file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:31:48.183

Cocoa 支持多种[动态加载代码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/LoadingCode.html)的方式。但这些在 iOS 上都是禁止的，如果你尝试使用这些方法中的任何一种加载代码，你将无法通过 App Store 审查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:37:48.543

如果你只是反序列化数据成员而不是尝试加载动态代码，这是完全可以的。

# html - Webkit 过滤器阴影去除

> ID：15923266
> 
> 赞同：0
> 
> 时间：2013-04-10T10:26:17.833
> 
> 标签：html, css, webkit

我很难覆盖（或简单地删除）`-webkit-filter drop-shadow`放置在文本上的属性，您可以在下图中看到。我需要对话泡泡上的阴影，而不是泡泡下方的文字。我尝试将阴影设置为白色，但这似乎没有效果。出于定位原因，我需要将文本保留为气泡的子元素。谁能告诉我如何才能达到预期的效果，好吗？

[在这里](http://jsfiddle.net/zxE6F/)拉小提琴。

**HTML**

```
<div class="bubble bubble-left">This is line 1 in speech bubble left.<br/> 
      This is line 2 in the bubble,<br/> and this is line 3.
      <div class="title">Title for bubble</div>
</div> 
```

**CSS**

```
.bubble {
background-color: #fff;
-webkit-border-radius:7px;
-moz-border-radius:7px;
border-radius: 7px;
border: 3px solid #5E2750;
-webkit-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5));
-moz-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5));
-ms-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5)); 
-o-filter: drop-shadow(4px 4px 5px rgba(0,0,0,0.5));
box-shadow: inset 0 1px 1px hsla(0,0%,100%,.5), 4px 4px 0 hsla(0,0%,0%,.2);
color: #333;
font-family: Ubuntu, sans-serif;
font: 16px/25px;
padding: 15px 25px;
position: absolute;
}

.bubble:after, .bubble:before {
border-bottom: 25px solid transparent;
border-right: 25px solid #fff;
bottom: -25px;
content: '';
position: absolute;
right: 25px;
}
.bubble:before {
border-right: 25px solid hsla(0,0%,0%,.1);
bottom: -28px;
right: 22px;
z-index: 1;
}
.bubble:before {
border-right: 27px solid #5E2750;
border-bottom: 27px solid transparent;
bottom: -29px;
right: 23px;
z-index: 0;
}

.bubble-left {left: 25%;}
.bubble-right {right: 25%;}

.title {
/* remove drop-shadow/filter effect */
-webkit-filter: drop-shadow(4px 4px 5px rgba(255,255,255,1)) !important;
-moz-filter: none;
-ms-filter: none; 
-o-filter: none;
box-shadow: none;

color: #5E2750;
padding-left: 15px;
font-style:italic;
position: relative;
bottom: -43px;
left: 25%;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/msrY9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:43:18.950

尝试将您的过滤器框阴影 CSS 属性更改为以下格式：

```
 -webkit-drop-shadow: (4px 4px 5px rgba(0, 0, 0, 0.5));
 -moz-drop-shadow: (4px 4px 5px rgba(0, 0, 0, 0.5));
 -ms-drop-shadow: (4px 4px 5px rgba(0, 0, 0, 0.5));
 -o-drop-shadow: (4px 4px 5px rgba(0, 0, 0, 0.5)); 
```

您可能需要根据自己的喜好调整框阴影值：

在这里提琴：[jsFiddle](http://jsfiddle.net/zxE6F/30/)

另一种方法是从气泡容器中取出气泡链接的标题，并将两者放在一个新的相对 div 中。不过，您将不得不对 CSS 进行一些更改。

```
<div class="wrap">
        <div class="bubble bubble-left">This is line 1 in speech bubble left.
            <br/>This is line 2 in the bubble,
            <br/>and this is line 3.</div>
        <div class="title">Title for bubble</div>
    </div> 
```

见小提琴：[jsFiddle](http://jsfiddle.net/zxE6F/12/)

# eclipse - 如何为 Eclipse CDT 编写多行构建错误解析器？

> ID：15923271
> 
> 赞同：0
> 
> 时间：2013-04-10T10:26:37.023
> 
> 标签：eclipse, ocaml, eclipse-cdt

我想使用 Eclipse 的 CDT (8.1.2) 基于 Makefile 的构建器来构建 OCaml 项目。

但是，OCaml 编译器在不同的行上输出带有行号和错误原因的多行错误消息（下面的示例）。

我可以创建一个涵盖多行构建输出的构建错误解析器，如果可以，如何？

我想解析的示例错误消息：

```
File "src/filename.ml", line 91, characters 35-54:
Error: Unbound value foo 
```

期望的输出：

说明：未绑定值 foo 文件：src/filename.ml 行：91

（文件和行是微不足道的，但描述是问题所在。）

### 更新：

我现在有一个用于 OCaml 的构建错误解析器 - 来自 OcaIDE 项目。

我使用 CDT Make 构建器来驱动构建，并使用 OCaIDE 的错误解析器进行错误解析。OCAide 的错误解析器还有一个优势，它可以指向报告为导致错误的行中的特定跨度，这是 CDT 的正则表达式解析器无法做到的。

这样我的 OCaml 相关问题就解决了。但是，多行错误解析的普遍问题仍然存在。

# video - 如果图像数量小于 GOP 大小，如何使用 ffmpeg 进行编码

> ID：15923276
> 
> 赞同：0
> 
> 时间：2013-04-10T10:26:46.793
> 
> 标签：video, ffmpeg, mp4, libavcodec

下面的代码从 jpeg 图像创建 mp4 视频文件。当图像数量大于 GOP 大小时，编码成功并且在 avcodec_encode_video2 返回的第 10 个图像 gotPacket 之后 > 0。

但是当图像数量小于 GOP 大小时，gotPacket 始终 = 0，因此没有图像写入文件。

我的猜测是 avcodec_encode_video2 分配长度等于 GOP 大小的缓冲区，直到它不完整 gotPacket 将为 0。

我的问题是即使缓冲区未满，如何强制 avcodec_encode_video2 进行编码？

```
...
_outStream->codec.gop_size = 10;
_outStream->codec.keyint_min = 10;
...

AVFrame* frame = getFrame();

AVPacket packet;
av_init_packet(&packet);
packet.data = NULL;
packet.size = 0;

int gotPacket = 0;
if (avcodec_encode_video2(_outStream->codec, &packet, frame, &gotPacket) < 0)
    throw std::runtime_error("failed to encode frame");

if (gotPacket)
{
    ...
    if (av_write_frame(_outContainer.get(), &packet) < 0)
        throw std::runtime_error("failed to write frame");      
    av_free_packet(&packet);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:45:32.827

我找到了解决方案。如果我们将 NULL 作为要编码的原始视频数据（第三个参数）传递，它将导致编码器刷新缓冲区

`if (avcodec_encode_video2(_outStream->codec, &packet, NULL, &gotPacket)`

# internet-explorer - 带有 jQ uery 的 IE XDR 在远程 Web 主机上失败，但在本地计算机上失败

> ID：15923285
> 
> 赞同：1
> 
> 时间：2013-04-10T10:27:00.670
> 
> 标签：internet-explorer, local, remote-server, xdr

当从我的本地计算机加载 HTML 文件时，这个*确切的*代码有效，但在我的远程主机上运行时无效。我使用的代码与 xdr.js jQuery 插件中的代码相同。我打印出的错误对象的状态文本为“错误：访问被拒绝”。

```
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        if ( window.XDomainRequest ) {
            jQuery.ajaxTransport = function( s ) {
                if ( s.crossDomain && s.async ) {
                    if ( s.timeout ) {
                        s.xdrTimeout = s.timeout;
                        delete s.timeout;
                    }
                    var xdr;
                    return {
                        send: function( _, complete ) {
                            function callback( status, statusText, responses, responseHeaders ) {
                                xdr.onload = xdr.onerror = xdr.ontimeout = jQuery.noop;
                                xdr = undefined;
                                complete( status, statusText, responses, responseHeaders );
                            }
                            xdr = new XDomainRequest();
                            xdr.onload = function() {
                                callback( 200, "OK", { text: xdr.responseText }, "Content-Type: " + xdr.contentType );
                            };
                            xdr.onerror = function() {
                                callback( 404, "Not Found" );
                            };
                            xdr.onprogress = jQuery.noop;
                            xdr.ontimeout = function() {
                                callback( 0, "timeout" );
                            };
                            xdr.timeout = s.xdrTimeout || Number.MAX_VALUE;
                            xdr.open( s.type, s.url );
                            xdr.send( ( s.hasContent && s.data ) || null );
                        },
                        abort: function() {
                            if ( xdr ) {
                                xdr.onerror = jQuery.noop;
                                xdr.abort();
                            }
                        }
                    };
                }
            };

        }
        jQuery.support.cors = true;
        var hash = '9lWA8';
        $.ajax({
            url: 'https://api.imgur.com/3/album/'+hash,
            type: 'GET',
            dataType: 'json',
            cache: false,
            beforeSend: function(xhr){xhr.setRequestHeader('Authorization', 'Client-ID 60512304ac2e7ce');},
            success: function(data) {
                console.dir(data.data);
            },
            error: function(data) {
                console.dir(data);
            }
        });
    });
</script>
</head

<body>
</body>

</html> 
```

# javascript - 选择另一个 从里面一个

> ID：15923287
> 
> 赞同：0
> 
> 时间：2013-04-10T10:27:16.563
> 
> 标签：javascript, jsf, facelets, selectoneradio

我正在尝试制作一个 Facelet，其中有两行，每行包含两个单选按钮。我想这样做，如果在第一行中选择了第一个单选按钮，则应该选择第二行中的第二个单选按钮，反之亦然。我正在尝试使用 JavaScript，但更改仍未反映在浏览器中。

这是Javascript：

```
<script type="text/javascript">
  function radioSelect(val){
    if(val.id == "encrypted:1")
{
document.getElementById("protected:0").value = "false";
document.getElementById("protected:1").value = "true";
}
else
{
document.getElementById("protected:0").value = "true";
document.getElementById("protected:1").value = "false";
}

}
</script> 
```

这是我的 Facelet 文件中的一段代码：

```
<h:selectOneRadio id="encrypted"
                value="#{uploadFileBean.encryption}" onclick="radioSelect(this);">
                <f:selectItem itemLabel="Yes" itemValue="true"></f:selectItem>
                <f:selectItem itemLabel="No" itemValue="false"></f:selectItem>
            </h:selectOneRadio>
<h:selectOneRadio id="protected"
                value="#{uploadFileBean.fileprotected}">
                <f:selectItem itemLabel="Yes" itemValue="true"></f:selectItem>
                <f:selectItem itemLabel="No" itemValue="false"></f:selectItem>
            </h:selectOneRadio> 
```

* * *

好吧，当我尝试编写此 JavaScript 函数时，Ajax 更改不起作用。

```
 <script type="text/javascript">
function radioSelect(val){
if(val.id == "encrypted:1")
{
document.getElementById("protected:0").value = "false";
document.getElementById("protected:1").value = "true";
}
if(val.id == "protected:1")
{
document.getElementById("encrypted:0").value = "false";
document.getElementById("encrypted:1").value = "true";
}
if(val.id == "encrypted:0")
{
document.getElementById("protected:0").value = "false";
document.getElementById("protected:1").value = "true";
}
if(val.id == "protected:0")
{
document.getElementById("encrypted:0").value = "true";
document.getElementById("encrypted:1").value = "false";
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:02:02.373

当您更改值时，您使用的 JavaScript 也可以正常工作，但是要在 facelet 上反映这些更改，您需要更新保存已更改值的组件。

该`f:ajax`标记将在此处执行必要的操作，因为它将更新 facelet 上的所有组件，其 id 在`render`属性中提供。因此，每次对任何`h:selectOneRadio`.

```
<h:selectOneRadio id="encrypted" value="#{uploadFileBean.encryption}" onclick="radioSelect(this);">
   <f:selectItem itemLabel="Yes" itemValue="true"></f:selectItem>
   <f:selectItem itemLabel="No" itemValue="false"></f:selectItem>
   <f:ajax render="protected">
</h:selectOneRadio>
<h:selectOneRadio id="protected" value="#{uploadFileBean.fileprotected}">
   <f:selectItem itemLabel="Yes" itemValue="true"></f:selectItem>
   <f:selectItem itemLabel="No" itemValue="false"></f:selectItem>
   <f:ajax render="encrypted">
</h:selectOneRadio> 
```

# python - pygtk绘图区域不显示

> ID：15923288
> 
> 赞同：0
> 
> 时间：2013-04-10T10:27:17.987
> 
> 标签：python, pygtk, drawable

大家好，我有以下代码。我在另一个文件中创建了这个类的实例。这给了我一个绘图区域，但没有显示图像以及我绘制的点。我正在尝试编写棋盘游戏。这里的绘图区域应该包含板

```
import pygtk
pygtk.require('2.0')
import gtk

class Board(gtk.DrawingArea):

def show_background(self, filepath):
    pixbuf = gtk.gdk.pixbuf_new_from_file(filepath)
    self.get_window().draw_pixbuf(self.style.bg_gc[gtk.STATE_NORMAL], pixbuf, 0,0, 0,0)

def __init__(self, parent_widget):
    self.parent_widget = parent_widget
    gtk.DrawingArea.__init__(self)
    self.parent_widget.pack_end(self, True, True, 10)
    self.show()
    self.gc = self.style.fg_gc[gtk.STATE_NORMAL]
    self.show_background("image.png")
    x=20
    y=20
    points = [(x+10,y+10), (x+10,y), (x+40,y+30),(x+30,y+10), (x+50,y+10)]
    self.get_window().draw_points(self.gc, points) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:52:50.700

[答案与this](https://stackoverflow.com/questions/15950904/how-to-make-mini-example-for-drawingarea-display-something/15990158#15990158)非常相似，但在您的情况下，由于您使用的是类，因此您应该覆盖信号的默认处理程序，`expose-event`而不是连接到该信号。为此，您使用具有魔法名称的方法`do_expose_event`。

总结另一个答案：您应该只在暴露事件期间在绘图区域上绘图，因为当窗口最小化或另一个窗口在其上移动时，您绘制的任何内容都会再次被擦除。但是，expose 事件总是在正确的时间发生，因此您可以在需要时重新绘制。

另外，正如我在另一个答案中所建议的那样，请查看[与 Cairo 的绘图](http://zetcode.com/gui/pygtk/drawing/)。

```
class Board(gtk.DrawingArea):

    def show_background(self, filepath):
        pixbuf = gtk.gdk.pixbuf_new_from_file(filepath)
        self.get_window().draw_pixbuf(self.style.bg_gc[gtk.STATE_NORMAL], pixbuf, 0,0, 0,0)

    def do_expose_event(self, event):
        self.gc = self.style.fg_gc[gtk.STATE_NORMAL]
        self.show_background("image.png")
        x=20
        y=20
        points = [(x+10,y+10), (x+10,y), (x+40,y+30),(x+30,y+10), (x+50,y+10)]
        self.get_window().draw_points(self.gc, points)

    def __init__(self, parent_widget):
        self.parent_widget = parent_widget
        gtk.DrawingArea.__init__(self)
        self.parent_widget.pack_end(self, True, True, 10)
        self.show() 
```

# windows-phone-7 - 如何以 People Hub 的风格创建 Windows Phone Live Tile

> ID：15923290
> 
> 赞同：0
> 
> 时间：2013-04-10T10:27:23.233
> 
> 标签：windows-phone-7

如何在 Windows Phone 主屏幕中以 People Hub 的风格创建 Windows Phone 动态磁贴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:56:28.910

那是不可能的。您可以对活动磁贴进行一些控制，但人员磁贴的控制级别不是第 3 方 Windows Phone 应用程序可以做到的。

# git - 推送到存储库时出现问题

> ID：15923293
> 
> 赞同：0
> 
> 时间：2013-04-10T10:27:30.630
> 
> 标签：git, version-control, github, git-svn

我只是推到 master 分支，在这个过程中我的笔记本电脑关机了。当我再次打开并尝试推送到主分支时，它向我显示了这个错误。

```
error: object file .git/objects/ac/d6296a7d26aecbaf9f3df5c336122f1309c40a is empty
fatal: loose object acd6296a7d26aecbaf9f3df5c336122f1309c40a (stored in .git/objects/ac/d6296a7d26aecbaf9f3df5c336122f1309c40a) is corrupt
root@rootb-u12:proj$ fatal: The remote end hung up unexpectedly 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:52:21.490

检查您的最高提交，即 HEAD 当前指向的位置.. 您的 HEAD 提交似乎是空的 [没有进行任何更改？？]

# ios - 在phonegap IOS上重新启动应用程序后本地存储被清除？

> ID：15923296
> 
> 赞同：7
> 
> 时间：2013-04-10T10:27:31.940
> 
> 标签：ios, cordova

我正在尝试在本地存储中缓存 JSON 数据以在没有互联网连接时加载它。它工作正常，但是当我重新启动应用程序时，我认为本地存储已清除

这是我的代码：

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {

    document.addEventListener("offline", function() {
    alert("No internet connection");

    $.each(JSON.parse(localStorage.getItem('foo')), function(key, val) {
    if(!(val.php)){val.php=0;}
$('ul.get-mertchant').append('<li> <a href="azkadenya.html?id=' + val.nid + '&nop='+ val.php +'" class="li-link"><div class="circle-img"><img src="'+ val.logo + '" /></div><div class="merchant-info"><h1>'+ val.node_title +'</h1><p>You Have '+ val.php +' Binggz</p></div><div class="more-icon"></div></a> </li>');
}); 

}, false);
    $.getJSON('mywebsite/views/services_merchant_mobile', function(data) {
        localStorage.setItem('foo', JSON.stringify(data));

var items = [];
$.each(JSON.parse(localStorage.getItem('foo')), function(key, val) {
    if(!(val.php)){val.php=0;}
$('ul.get-mertchant').append('<li> <a href="azkadenya.html?id=' + val.nid + '&nop='+ val.php +'" class="li-link"><div class="circle-img"><img src="'+ val.logo + '" /></div><div class="merchant-info"><h1>'+ val.node_title +'</h1><p>You Have '+ val.php +' Binggz</p></div><div class="more-icon"></div></a> </li>');
});

})
} 
```

怎么了？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T19:11:20.790

从 IOS 5.1 开始，Apple 决定将本地存储设为临时区域。如果您需要在 iOS 5.1 上进行持久存储，请使用 PhoneGap 的 File API。这里有几个链接可以了解这个问题。

[http://community.phonegap.com/nitobi/topics/phonegapbuild_localstorage_on_ios_5_1](http://community.phonegap.com/nitobi/topics/phonegapbuild_localstorage_on_ios_5_1)

[http://docs.phonegap.com/en/2.6.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.6.0/cordova_storage_storage.md.html#Storage)

Apple 也不鼓励您使用本地存储。 [iOS PhoneGap 应用因使用 localStorage 而被拒绝](https://stackoverflow.com/questions/12282032/ios-phonegap-app-rejected-because-of-the-use-of-localstorage)

# nginx - 覆盖 Nginx 食谱 default_enabled_site

> ID：15923307
> 
> 赞同：2
> 
> 时间：2013-04-10T10:28:04.533
> 
> 标签：nginx, chef-infra

我在尝试禁用`default_enabled_site`Nginx 时遇到了一些麻烦。

```
# My Cookbook
/cookbooks/my-server-book
- /recipes/
- /attributes/
metadata.rb

# Opscode Nginx
/cookbooks/nginx 
```

我已经`override['nginx']['enable_default_site'] = false`进入我的`/cookbooks/my-server-book/attributes/default.rb`文件，但看起来 Nginx 食谱覆盖了我的更改

```
Recipe: nginx::commons_conf

* template[nginx.conf] action create (up to date)
* template[/etc/nginx/sites-available/default] action create (up to date)
* execute[nxdissite default] action run (skipped due to only_if) 
```

我将不胜感激任何见解。

我在 node.json 文件中尝试了以下内容但无济于事：

```
{
  "nginx": {
    "default_site_enabled": false
  },
  "run_list": ["recipe[main]"]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:53:36.097

`execute[nxdissite default]`- 这告诉您默认站点已被禁用（将始终创建配置文件但不会符号链接到当前启用的配置目录），因此您的覆盖似乎有效。

# c# - 尝试使用 WriteableBitMap 合并两张图片时出错

> ID：15923318
> 
> 赞同：1
> 
> 时间：2013-04-10T10:28:49.270
> 
> 标签：c#, windows-phone-8, isolatedstorage, bitmapimage, writablebitmap

基本上，我导航到此页面并将名称作为参数传递给它，然后我使用它从隔离存储中检索该图片。同时我从资产文件夹中检索“框架”。
当我编译代码时，没有发生错误，但是一旦我在运行时到达这部分，我就会得到 frametest 的 nullexception。我之前尝试过构建，`frameImage !=null`以确保仍然有一个值出现错误。两个图像都正确加载到 BitMapImage 中，我也可以显示它们（测试过）

```
 BitmapImage image = new BitmapImage();
        BitmapImage frameImage = new BitmapImage();

        parameter = string.Empty;

        if (NavigationContext.QueryString.TryGetValue("parameter", out parameter))
        {

            picName = parameter + ".jpg";

            //call function to load image source from isolateStorage
            using (isoStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (isoStore != null)
                {
                    using (isoStream = new IsolatedStorageFileStream(parameter, FileMode.OpenOrCreate, isoStore))
                    {
                        if (isoStream != null)
                        {
                            image.SetSource(isoStream);
                        }
                    }
                    //close the stream object
                    isoStream.Close();
                }
            }
            //close the storage object
            isoStore.Dispose();

            string path = "/Assets/AppGraphics/UserInterface/frame.png";
            Uri uriR = new Uri(path, UriKind.Relative);
            frameImage = new BitmapImage(uriR);

            //error occurs here
            WriteableBitmap frameTest = new WriteableBitmap(frameImage);
            WriteableBitmap imageTest = new WriteableBitmap(image);

            var photo = imageTest;
            var frame = frameTest;
            var merge = new WriteableBitmap(656, 410);

            merge.Blit(new Rect(0, 0, 656, 410), photo, new Rect(0, 0, photo.PixelWidth, photo.PixelHeight)); //draw the photo first
            merge.Blit(new Rect(0, 0, 656, 410), frame, new Rect(0, 0, frame.PixelWidth, frame.PixelHeight)); //draw the frame

            imgCC.Source = merge; 
```

当对象显然不为空时，我不明白为什么我得到一个空异常。任何帮助或想法表示赞赏。

堆栈跟踪：

```
 at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.WriteableBitmap_CreateFromSource(WriteableBitmap wb, IntPtr ptrMemory, BitmapSource source, Boolean& bHasProtectedContent)
   at System.Windows.Media.Imaging.WriteableBitmap..ctor(BitmapSource source)
   at PinAppWindowsPhone.confirmPicture.OnNavigatedTo(NavigationEventArgs e)
   at Microsoft.Phone.Controls.PhoneApplicationPage.InternalOnNavigatedTo(NavigationEventArgs e)
   at Microsoft.Phone.Controls.PhoneApplicationPage.Microsoft.Phone.Controls.IPhoneApplicationPage.InternalOnNavigatedToX(NavigationEventArgs e)
   at System.Windows.Navigation.NavigationService.RaiseNavigated(Object content, Uri uri, NavigationMode mode, Boolean isNavigationInitiator, IPhoneApplicationPage existingContentPage, IPhoneApplicationPage newContentPage)
   at System.Windows.Navigation.NavigationService.CompleteNavigation(DependencyObject content, NavigationMode mode)
   at System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result) 
```

# ruby-on-rails-3 - 在 AWS 中为 ruby on rails 创建 EC2 实例

> ID：15923320
> 
> 赞同：0
> 
> 时间：2013-04-10T10:28:52.150
> 
> 标签：ruby-on-rails-3, amazon-web-services, amazon-ec2

我是 Ec2 中 Amazone Web 服务的新手。我在 Ec2 中创建了一个实例。我想在创建的 EC2 实例中运行一个示例 ruby​​ on rails 网页。这怎么可能？我刚刚安装了`gem aws-sdk`在 EC2 实例中运行 Rails 网页的唯一剩余步骤是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:59:31.733

欢迎来到 Cloud Club，创建一个实例并安装 rvm 和 ruby​​ 以及 rails 和其他所需的 gem 和包。安装您的网络服务器 nginx 或 apache2。您也不必安装 aws-sdk。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:29:45.693

您可以使用 Amazon 的 Elastic Beanstalk 来部署您的 Ruby on Rails 应用程序。亚马逊关于它的[文档](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)非常详尽。

# css - 溢出长文本

> ID：15923321
> 
> 赞同：0
> 
> 时间：2013-04-10T10:28:55.040
> 
> 标签：css, jsf, jakarta-ee

我有一个类似下面片段的代码

```
 <p:dataTable 
                        rendered="#{Controller.lazyDataModel.rowCount > 0 }"
                        value="#{AuditController.lazyDataModel}"
                        var="event" paginator="true" 
                        paginatorTemplate=" {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="25,50,100" lazy="true"
                        dynamic="false"
                        rows="25" 
                        loadingMessage="#{msgs.lsd_loading}">
                        <p:column width="300" overflow-x="visible">
                            <f:facet name="header">
                                <h:outputText
                                    value="#{msgs.lsd_audit_details}" style="width:500; overflow-x:visible"/>
                            </f:facet>
                            <h:outputText
                                value="#{event.eventDetails}"></h:outputText>
                        </p:column> 
```

但它像图像一样呈现，长行被单元格边框切割。

![在此处输入图像描述](https://i.stack.imgur.com/a8NtO.png)

我应该如何将正确的溢出标签添加到显示所有数据的表行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:31:12.977

我发现了我的错误。所有的麻烦都在结果字符串中，它是没有空格的单个长文本。

# php - PHP：从 MS Office 中的链接加入浏览器会话

> ID：15923323
> 
> 赞同：1
> 
> 时间：2013-04-10T10:29:01.963
> 
> 标签：php, http, session, ms-office

我想知道是否有人可以在这里提出答案：

我们有一个使用 PHP 会话（以及其他措施，如 SSL，在任何人开始对我谈论安全之前！）进行保护的系统，我们希望在联系客户讨论特定问题时通过电子邮件将直接链接发送到系统。我们发送的链接包括 GET 参数。

我们的建议是让客户确保他们已登录，然后单击链接 - 链接在浏览器中启动，选择会话，并将用户直接带到所需的页面。但是，当用户单击 Microsoft Office 应用程序中的链接时，这不起作用。

当单击 Outlook（或者实际上是 Excel）中的链接时，不会拾取会话变量，并且会要求用户重新进行身份验证。进一步挖掘，似乎请求是通过将用户代理设置为`Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/6.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0E; .NET4.0C; ms-office)`但该站点在 Chrome 中启动的（这也是设置会话的浏览器）。我想知道是否有一些会话安全代码启动，说如果浏览器不同，会话必须被欺骗？

为了解决这个问题，我尝试为初始页面加载设置重定向页面：

```
if (isset($_GET['targetpage'])) {
  // It's a GET request - redirect using header-location
  $all_get = $_GET;
  unset($all_get['targetpage']);
  $redir = $_GET['targetpage'].'?'.http_build_query($all_get);
  header('User-Agent:');
  header("Location: {$redir}");
  die();
} 
```

这失败了：请求仍然通过用户代理集，并且会话不存在。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:32:44.557

不要这样做`header('User-Agent:');`......因为这将给出一个空的用户代理，而在随后的请求中，将再次使用普通的用户代理。

您可以尝试不同的 HTTP 30x 代码……我知道浏览器的行为往往会根据所使用的确切 30x 代码而有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:49:16.457

这只是部分解决方案，但对我来说已经足够好了。

使用我们的网站需要启用 JavaScript，所以我不必担心禁用 js 的用户。我已经添加了一个 JavaScript 重定向，带有“如果未重定向，请单击此处”链接，这似乎就足够了。

# facebook - Facebook 访问令牌缺少过期属性（offline_access 弃用后）

> ID：15923326
> 
> 赞同：1
> 
> 时间：2013-04-10T10:29:11.627
> 
> 标签：facebook, facebook-graph-api, facebook-oauth

我有一个用于请求离线访问权限的 FB 应用程序。在某些时候，我改变了它并使用了 60 天有效的 access_tokens。

现在，我在 db 中存储了访问令牌和过期时间（以毫秒为单位的整数）。每次当用户使用该应用程序并且他仍然有一个有效的令牌（我检查到期时间）时，我都会尝试扩展该令牌（每天不超过一次）。

我的问题是我开始获得没有到期字段的新令牌。当我用调试器检查其中一些时，它说永不过期。

这怎么可能？12 月 5 日，offline_access 不是被移除了吗？我如何确定每次我请求访问令牌时都会得到一个有到期时间的令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T17:27:56.223

如果用户也请求页面访问令牌，Facebook 仍会发布永不过期的令牌。

流程是这样的（*斜体字*的facebook回复）：

*   请求初始用户令牌

    *   *授予 oauth 令牌，过期时间为 60 天后*
*   为用户是管理员的页面请求页面令牌
    *   *为所有页面授予的 oauth 令牌和用户令牌被延长为永不过期（除非被撤销）。*

在任何 facebook 的页面上都没有很多关于此的文档，但我已经对此进行了非常广泛的测试，并且每次都会发生。

# jquery - 将元素滑动到容器中

> ID：15923330
> 
> 赞同：0
> 
> 时间：2013-04-10T10:29:33.957
> 
> 标签：jquery, css, jquery-animate

我正在尝试将一些生成的元素定期滑入容器中。我正在尝试使用 .animate() 的 jQuery。

到目前为止我所拥有的：

```
<div id="mainContainer">
     </div>

<div id="photoContainer" class="photocontclass" style="display:none">
        <img id="image" src="@Url.Action("Photo_Read", new { Id = 1})" />
    </div>

<script>
    var photoId = 2;

    $(document).ready(function () {
        setInterval(function () { getPhoto() }, 3000);
    });

    function getPhoto() {
        $("#photoContainer #image").attr("src", '@Url.Action("Photo_Read")' + '/' + photoId);
        var $new = $('#photoContainer').clone().attr("id", "photoContainer" + photoId);
        $('#timelineContainer').prepend($new);
        $new.show('slow');
        // do animation with animate...
        $new.animate({
            left:'-50%' // which properties should I have?
        }, 2000, "swing", function () {
            $(this).remove();
        });
        photoId++;
    } </script>

<style>

.photocontclass {
    display:inline;
    margin:10px;
    background-color:white;
    padding:5px;
    position:absolute;
}

#timelineContainer {
    background-color:grey;
    height:200px;
    width:100%;
    margin:10px;
    padding:10px;
}

</style> 
```

应该从容器的`$("#photoContainer")`右侧进来，从左侧出来......之后它应该被移除......

我有些疑惑：

*   我应该在（位置、左等...）中具有哪些 CSS`mainContainer`属性`photoContainer`？
*   我应该放在`photoContainer`里面还是外面`mainContainer`？
*   我应该在 animate 方法中具有哪些属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:05:28.310

你会在[JSFIDDLE](http://jsfiddle.net/actree/WUHJE/19/)找到一些答案。有一个简单的示例说明您想要做什么。

```
<div id="mainContainer">
<div id="photoContainer" class="photocontclass">
    <img id="image" src="@Url.Action("Photo_Read", new { Id = 1})" />
</div>
</div> 
```

单击带有红色边框的 div。在 CSS 中，声明一个带有 position:relative 的 div 来包裹你想要移动的 div 是很重要的。移动 div 的 position:absolute 和 overflow:hidden 是强制性的。您可以在移动后隐藏或删除 div。我不确切知道时间线容器的用途是什么？

# windows - 有没有办法在windows上使用winsock直接在链接上发送以太网数据包？

> ID：15923337
> 
> 赞同：1
> 
> 时间：2013-04-10T10:29:40.480
> 
> 标签：windows, winsock, ethernet, winsock2, raw-sockets

有没有办法在windows上使用winsock直接在链接上发送以太网数据包？

我需要在链路上广播以太网数据包（即目标 Mac 地址：广播​​（ff:ff:ff:ff:ff:ff））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:03:52.700

无法直接访问以太网链接。那是受 Windows 保护的硬件层。要在特定的以太网适配器上发送数据，您需要连接`bind()`到该适配器的 IP 地址的套接字，然后您可以根据`send()`需要`sendto()`将数据发送到目标 IP。

要广播数据包，请将数据发送到绑定的适配器的子网广播 IP 地址，您可以通过使用`GetAdaptersInfo()`或`GetIpAddrTable()`检索适配器的 IP 地址和子网掩码，然后将它们进行 OR/AND 运算来动态计算该地址：

```
BroadcastIP = (IPAddress & SubnetMask) | ~SubnetMask; 
```

# ruby-on-rails - Rails 的日期范围内的布尔值 false

> ID：15923339
> 
> 赞同：0
> 
> 时间：2013-04-10T10:29:43.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

您好，我正在开发用于房间预订的演示应用程序，用户输入他们的 start_date 和 end_date 进行房间预订。

状态是布尔类型。默认为真。

我如何才能使状态仅在 start_date 和 end_date 之间的特定范围内为假。

为此，我有两个模型作为 Room 和 BookingDetail，如下所示

```
class BookingDetail < ActiveRecord::Base

    belongs_to :room
    belongs_to :cart
    attr_accessible :member_type_id, :room_type_id, :start_date, :end_date, :room_rate_id, :room_no, :customer_id, :room_id    
end

class Room < ActiveRecord::Base      
  belongs_to :location
  has_many :room_rate
  belongs_to :room_type
  has_many :booking_details
  belongs_to :customer
  attr_accessible :room_no, :status , :location_id , :room_type_id, :room_rate_id, :start_date, :end_date 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:18:02.147

如果我正确理解了您，您可能不需要保留状态：

```
class Room
  def status
    booking_details = self.booking_details
    periods         = []
    time_now        = Time.now

    booking_details.each{|bd| periods << [bd.start_date, bd.end_date]}
    periods.each{|period| return false if time_now.between? *period} 

    return true
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:16:55.987

```
class BookingDetail < ActiveRecord::Base
    after_create :change_room_status 

    belongs_to :room
    belongs_to :cart
    attr_accessible :member_type_id, :room_type_id, :start_date, :end_date, :room_rate_id, :room_no, :customer_id, :room_id    

    def change_room_status
       if self.start_date > some_date &&  self.end_date < some_other_date
           self.room.status = false
           self.room.save!
       end
    end
end 
```

# android - Android 和 SQLite，设备读取数据库时出错

> ID：15923341
> 
> 赞同：2
> 
> 时间：2013-04-10T10:29:46.887
> 
> 标签：android, sqlite

我有一个 SQLite 数据库，我想在我的 Android 应用程序中使用。

首先，我将我的数据库从 Assets 复制到 /data/data//databases/ 使用：

```
private void copyDBFromAsssetsToDataFolder()
    {
        try 
        {
            String destPath = "/data/data/" + getPackageName() + "/databases/dbname.db";

            File f = new File(destPath);
            if(!f.exists())
            {
                Log.v("TAG","File Not Exist");
                InputStream in = getAssets().open("dbname.db");
                OutputStream out = new FileOutputStream(destPath);

                byte[] buffer = new byte[1024];
                int length;
                while ((length = in.read(buffer)) > 0) 
                {
                    out.write(buffer, 0, length);
                }
                in.close();
                out.close();
            }

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            Log.v("TAG","ioexeption");
            e.printStackTrace();
        }} 
```

我的所有查询在模拟器中都可以正常工作，但在我收到的设备中：

打开目录时出错：/data/data/packagename/databases/

在这里，我正在阅读有同样问题的人，解决方案始终是为此目录分配权限或将数据库复制到外部存储。但在生产中，用户不必拥有 SD 卡，或者您不能强制用户为数据库（或其他）目录分配权限。

使用已经创建的数据库的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:52:37.273

我使用@Selvin 建议没有问题。

文件 file = Context.getDatabasePath("name_of_db");

如果文件不存在 file.mkdirs();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:41:05.873

您首先必须在 /data/data/packagename 中创建目录“databases”。

# php - 使用 JOIN 显示朋友的帖子

> ID：15923344
> 
> 赞同：1
> 
> 时间：2013-04-10T10:29:59.927
> 
> 标签：php, mysql, join

在过去的几天里，我一直在尝试创建一个 SQL 查询来显示朋友之间的帖子。但是，我无法弄清楚我做错了什么。对我来说，这些帖子似乎在重复，并且表现与我的意图不同。

此查询“应该”显示来自我和与我成为朋友的用户的帖子。

```
SELECT *
FROM bhost_entries
WHERE
  author_u_id='$user_info[u_id]'
  OR author_u_id IN (SELECT follower_u_id
                     FROM bhost_userfollow
                     WHERE following_u_id='$user_info[u_id]')
ORDER BY e_id DESC 
```

**表：**

```
bhost_entries:     e_id, author_u_id, title
bhost_userfollow:  uf_id, following_u_id, follower_u_id 
```

我完全偏离轨道了吗？欣赏任何想法。

**输出（当跟随 2 个用户时）**

```
Heihei
Aker Brygge-spesial
Vi har oppdatert retningslinjene
Hei, dette er en kladd!
To do list
Testinnlegg
Push Notifications
Californication
Hank Moody
Hei bloggen
Heihei
Aker Brygge-spesial
Vi har oppdatert retningslinjene
Hei, dette er en kladd!
To do list
Testinnlegg
Push Notifications
Californication
Hank Moody
Hei bloggen 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:29:46.477

如果我可以测试它，我会这样做：

```
SELECT e_id, author_u_id, title
FROM bhost_entries, bhost_userfollow
WHERE
  author_u_id='$user_info[u_id]'
  OR (follower_u_id='$user_info[u_id]' AND following_u_id=author_u_id)
ORDER BY e_id DESC
GROUP BY e_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:37:15.803

你可以尝试这样的事情：

```
SELECT DISTINCT (e.e_id) AS entry_id,
       e.title AS entry_title, 
       e.author_u_id AS author_id
FROM bhost_entries AS e
JOIN bhost_userfollow AS f
ON (f.following_u_id = e.author_u_id) 
WHERE (e.author_u_id = '$user_info[u_id]' OR f.follower_u_id = '$user_info[u_id]') 
```

如果我理解正确，它就可以了。在这里查看：[SQL 小提琴](http://sqlfiddle.com/#!2/ec3b4/6)

# c - C 插座重连

> ID：15923359
> 
> 赞同：1
> 
> 时间：2013-04-10T10:30:30.777
> 
> 标签：c, sockets, reconnect

经过两天尝试创建重新连接到服务器的客户端套接字后，我想向您寻求帮助。

IE 我正在启动一个服务器和一个客户端。比我杀死服务器并希望该客户端尝试重新连接，直到我再次启动服务器。

我有一个`socketcreate`返回的函数，`socket_fd`我用它来第一次连接（它可以工作）。

但是当服务器死掉并且我关闭了以前的服务器`socket_fd`并尝试`reconnect`使用 时`socketcreate`，我得到了一个错误`Bad file descriptor`。

但为什么？我之前已经关闭`socket_fd`，我再次启动该功能以开始新的连接。

……

```
while(1) {

  send(sock_fd, buf, strlen(buf),0);

  if( (numbytes = recv(sock_fd, buf, strlen(buf),0) == 0){

   close(sock_fd);

   sock_fd = createsocket();

} 
```

1.  可以识别丢失的连接吗（我读过是的）。或者 SIGPIPE 会更好地识别 send() 期间丢失的连接？
2.  在 while(1) 中重新连接怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:47:45.680

> 经过两天尝试创建重新连接到服务器的客户端套接字

停在那儿。重新连接套接字是不可能的。

# php - 使用正则表达式查找具有不同数字参数 PHP 的 url

> ID：15923360
> 
> 赞同：0
> 
> 时间：2013-04-10T10:30:34.500
> 
> 标签：php, regex, preg-replace, preg-match

我正在将内容从一个 CMS 移动到另一个 CMS。url 结构不同，所以我想用 php 替换一些 url。

旧网址是

`href="book-online?cid=123"`

每次调用此链接时，cid 的值都会有所不同。

我希望能够将所有这些链接更改为类似

`href="/Book-online.htm?cid=[newPageId]"`

页面的 id 已更改，因此我也需要更新它们，但这不是问题。

我在想类似的东西`preg_replace`可能会起作用，但我对正则表达式的经验很少。

如果您有其他解决方案，我愿意接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:36:21.420

如果内容是 HTML，最好使用 HTML Parser（如 DOM Parser）来解析它。如果你有非 HTML 内容并且只是想替换 H​​REF，那么你可以使用这个 preg_replace：

```
// Assuming you have old to new id mapping sotred in an array $idmap

$new = preg_replace_callback('/(href=")book-online(\?cid=)([^"]+)"/i',
           function($m) {
               static $idmap = array("123" => "321", "645" => "546");
               return $m[1] . 'Book-online.htm' . $m[2] . $idmap[$m[3]];
           }, $content); 
```

### 现场演示：http: [//ideone.com/o4hpnU](http://ideone.com/o4hpnU)

# c# - 加载程序集调用方法返回自定义类型

> ID：15923370
> 
> 赞同：1
> 
> 时间：2013-04-10T10:31:04.290
> 
> 标签：c#, reflection, return-value, usertype

希望有人可以在这里帮助我。基本上我必须动态加载 2 个程序集，例如

```
ObjA= Assembly.LoadFrom(folder + module); //had the main methods of the integration
ObjB = Assembly.LoadFrom(folder + module_decl); //has more interface declarations for the intigration 
```

现在`ObjB`有一个方法的返回值声明`objA`。因此，我首先尝试找到这个返回值并创建一个类型，例如

```
 Type intObj ;

   Type[] type2 = objB.GetTypes();

       foreach (Type t in type2)
            {
                if ((intObj == null) && (t.FullName == "IIReturnInterfaceDecl"))
                {

                    intObj = t;

                }
            } 
```

然后我去创建一个主类的实例并调用该方法

```
foreach (Type t in types)
                {

                mi = t.GetMethod("CreateTheObjectMethod");

                if (mi != null)
                {
                    string typeName = t.FullName;
                    object lateBoundObj = null;
                    lateBoundObj = Activator.CreateInstance(t);

                    intObj = lateBoundObj.GetType().InvokeMember("CreateTheObjectMethod",
                                                //BindingFlags.Public | BindingFlags.InvokeMethod | BindingFlags.Instance,
                                                BindingFlags.InvokeMethod | BindingFlags.GetProperty,
                                                    null,
                                                        lateBoundObj,
                                                            args);

                    if (intObj == null)
                    {
                        MessageBox.Show("oops");
                    }
                    else
                    {
                        MessageBox.Show("done");
                    }
                    //
                   // break;

                }
                //result
            }
        }
        else
        {
            MessageBox.Show("DAMMIT");
        } 
```

但基本上我不能让它调用方法并以我想要的方式返回对象，（上面的代码没有编译给出错误

> *错误 1 ​​无法将类型“object”隐式转换为“System.Type”。存在显式转换（您是否缺少演员表？）“）*

但我不知道如何让它转换为正确的类型。

请注意，我加载的外部程序集是第 3 方，我没有它们的标题或声明，我可以访问它们，但我没有声明的接口或类可以轻松转换，我必须动态进行。

将非常感谢任何指导。我已经查看和搜索了很多，并在“委托”上看到了很多，但我看到的最多的是进行调用和传递值，而不是处理返回和使用的动态用户类型值。

谢谢你的帮助。

//已编辑：if语句中有错误，对于那些已经响应的人感到抱歉，一定是：if（intObj == null）而不是if（CreateTheObjectMethod == null）

这可能会有所帮助，这基本上是我正在调用的方法的声明

```
[System.Reflection.RuntimeMethodInfo] = {IIReturnInterfaceDecl CreateTheObjectMethod(System.String, System.String)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:52:38.550

`intObj`是类型`System.Type`，您正在尝试将返回值分配`InvokeMember`给它。但返回值为`object`. 这就是错误消息告诉您的内容。

您可以简单地将返回值转换为，`Type`但我怀疑这是正确的。`CreateTheObjectMethod`这将消除编译器错误，但如果调用的方法 ( ) 的返回值不是 type ，则会在运行时导致异常`Type`。
您需要将返回值分配给返回类型的变量`CreateTheObjectMethod`并相应地转换返回值`InvokeMember`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:51:44.137

你尝试过这样的事情吗？

```
 mi = t.GetMethod("CreateTheObjectMethod");

                if (mi != null)
                {
                    string typeName = t.FullName;
                    object lateBoundObj = null;
                    lateBoundObj = Activator.CreateInstance(t);

                    object returnValue = mi.Invoke(lateBoundObj,null);//pass your params instead of null if you need
                    //here you can check what return value is.
                    Type returnedType = returnValue.GetType();

                    if (CreateTheObjectMethod== null)
                    {
                        MessageBox.Show("oops");
                    }
                    else
                    {
                        MessageBox.Show("done");
                    }
                    //
                   // break;

                } 
```

# c# - 为什么 Process.GetProcessesByName() 总是为空？

> ID：15923371
> 
> 赞同：11
> 
> 时间：2013-04-10T10:31:04.877
> 
> 标签：c#

我尝试使用程序来检查进程是否存在。

```
using System;
using System.Diagnostics;
using System.ServiceProcess;

namespace ServProInfo
{
    class Program
    {
       public static int IfProcessExist(string processName)
        {
            try
            {
                Process[] targetProcess = Process.GetProcessesByName(processName);
                int proLen = targetProcess.Length;
                if (proLen == 0)
                {
                    Console.WriteLine("The process does NOT exist or has exited...");
                    return 0;
                }
                Console.WriteLine("The process status is: Running");
                return 1;
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message + "\r\n" + ex.StackTrace + "\r\n" + ex.Source);
                return -1;
            }
        }

        static void Main(string[] args)
        {
            string type = args[0];
            string name = args[1];
            switch (type)
            {
                case "p":
                    IfProcessExist(name);
                    break;
            }  
        }
    }
} 
```

但是， Process[] targetProcess 始终为空，即使我将 processName 设置为现有进程的名称。

我该如何纠正程序？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-10T10:34:41.207

您可以尝试以下方法：（对我来说很好）

```
Process[] targetProcess = Process.GetProcessesByName(Path.GetFileNameWithoutExtension(processName)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-03T05:09:23.030

试试这个

```
System.Diagnostics.Process[] p1 = System.Diagnostics.Process.GetProcesses();
foreach (System.Diagnostics.Process pro in p1)
{
    if ((pro.ProcessName.ToUpper().Contains("Application Nanme")
    {
        //U r Operations
    }
} 
```

# php - 如何从另一个输入设置一个 HTML 输入

> ID：15923373
> 
> 赞同：0
> 
> 时间：2013-04-10T10:31:17.307
> 
> 标签：php, javascript

我正在尝试获取`.php`文档中输入字段的值，并通过触发 OnClick 事件来设置另一个输入字段。

这是我当前的代码

```
echo" <label onClick=\" document.getElementById(\"hiddenDescriptionField\").value = 'document.getElementById(\"descriptionField\").value'; "; 
```

如何设置我`hiddenDescriptionField`的`descriptionField`使用 javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:36:11.263

这应该这样做：

```
echo "<label onclick=\"document.getElementById('hiddenDescriptionField').value = document.getElementById('descriptionField').value; \""; 
```

它应该是 'onclick' 而不是 'onClick'，而且你的报价也有点乱——我想我已经修好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:40:34.417

我建议将事件侦听器设为非内联（假设您在 id 中添加了一个 id `<label>`）：

```
$my_script = <<<HIDDEN_DESC
<script>

var hidden = document.getElementById('hiddenDescriptionField'),
    description = document.getElementById('descriptionField');

document.getElementById('my-label').addEventListener('click', function (e) {
  hidden.value = description.value;
}, false);

</script>
HIDDEN_DESC; 
```

（放在这里作为一个heredoc，以适应您当前构建HTML的方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:39:46.947

从此：

```
document.validateForm.hiddenDescriptionField.value = 'document.descriptionField.value' 
```

也不起作用（您告诉 JavaScript 将值设置为引号之间的字符串），问题可能出在 HTML 元素的命名中。您的 hiddenDescriptionField 名称是否正确？

除此之外，您还可以查看上面代码框的答案，JavaScript 区分大小写，因此 onclick 不起作用。为了测试它，添加一个

```
alert('test'); 
```

到你的代码，你会很容易看到你的代码是否被执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T10:56:52.893

在 HTML 中，这应该可以工作：

```
<form>
  <input id="hiddenDescriptionField"/>
  <input id="descriptionField" value="My Field Value"/>
</form>

<label onclick="document.getElementById('hiddenDescriptionField').value = document.getElementById('descriptionField').value" >Click me</label> 
```

您可以在此处尝试此代码：

[http://jsfiddle.net/m5XyA/](http://jsfiddle.net/m5XyA/)

我建议您使用 JQuery 来访问 DOM。

# mobile - Twitter bootstrap 无法在移动设备中滚动

> ID：15923376
> 
> 赞同：1
> 
> 时间：2013-04-10T10:31:23.203
> 
> 标签：mobile, twitter-bootstrap, scroll

寻求一点帮助。

我正在使用 Bootstrap，一切看起来都还不错，即使我调整到手机和手机尺寸，它至少应该在浏览器（Chrome OSX）中，但是当我在我的 iPhone 上加载它时，它不会滚动和我的导航不会崩溃。

213.229.64.160 -**不让我链接这个。**

任何可以对我的问题有所了解的人都会非常感激。

谢谢Rg。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T05:44:06.700

我在 SPA 框架中使用 Durandal 时遇到了同样的问题。经过大量挖掘，我发现：

*   该问题与 Durandal App 模块有关（如果您使用的是 Durandal！）
*   [这个 Stackoverflow 问题](https://stackoverflow.com/questions/16618836/bootstrap-no-scrollbars-on-ios)给了我提示
*   `app.adaptToDevice()`有关[Durandal Docs](http://durandaljs.com/documentation/App/)的更多信息
*   [在这里](https://github.com/BlueSpire/Durandal/issues/117)讨论错误。

最终就像我上面提到的[问题](https://stackoverflow.com/questions/16618836/bootstrap-no-scrollbars-on-ios)一样，我不得不禁用对

```
document.ontouchmove = function (event) {
    event.preventDefault();
}; 
```

我还有很多工作要做才能弄清楚*为什么*会发生这一切，但希望这会有所帮助。

# windows-7 - 在 Python 中幸存的临时 COM 端口断开连接

> ID：15923378
> 
> 赞同：1
> 
> 时间：2013-04-10T10:31:30.453
> 
> 标签：windows-7, python-2.7, serial-port, arduino

当我从我的 PC 上拔下 USB/Arduino 时，从中删除它的 Python 脚本崩溃了。

```
#The connection to the Arduino
ser = serial.Serial('COM19',9600)

#Not connected to Arduino before connection is made
connected = False

#Loop until the Arduino is connected
while not connected:
    serin = ser.read()
    connected = True

#Debug Arduino connection
if connected == True:
    pprint('connected to arduino') 
```

我尝试使用 TRY/EXCEPT 来确保连接重新连接，但是当再次插入 Arduino 时，在计算机重置之前它不会识别 COM 端口。

```
from pprint import pprint
import time
import serial

while True:
    #The connection to the Arduino
    try:
        ardResponse = serial.Serial('COM19',9600)
    except IOError:
        connected = False
        pprint('Arduino not connected to COM3')
        time.sleep(10)
    continue
    serin = ser.read()
    connected = True
    pprint('Connected to Arduino')
    ser.write('1')
    while ser.read() == '1':
        ser.read()
    pprint ('Arduino has finished being flashed')

    ser.close()
    pprint('Connection closed')

    time.sleep(5) 
```

这是因为 COM 端口保持打开状态，因此脚本无法重用它吗？有没有办法避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:16:10.127

尝试在您的 except: 块中执行 ser.close()，然后提示用户修复它，并在再次尝试 ser.open() 之前按 Enter。

# database - 为什么 Azure SQL 聚集索引如此庞大？

> ID：15923380
> 
> 赞同：2
> 
> 时间：2013-04-10T10:31:32.393
> 
> 标签：database, azure, indexing, azure-sql-database, clustered-index

当我比较我们的 MS Azure DB 中的索引大小时，有些奇怪。

我有两个不同的数据库表（比如说 tableA 和 tableB）。两者都在单个 BIGINT 列上具有 PRIMARY CLUSTERED INDEX。

tableA 有大约 350 000 条记录，tableB 有（略多）380 000 条记录。

但是 tableA 上的索引大小为 1100 MB，而 tableB 上的索引大约为 100 MB。

有人可以解释为什么会这样吗？问题可能出在哪里？

PS：索引大小是使用此处发布的脚本测量的：http: [//blogs.msdn.com/b/sqlazure/archive/2010/08/19/10051969.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/08/19/10051969.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T19:07:19.917

聚集索引大小显示表的实际大小。这就是为什么在博客中，查询是条件：

```
WHERE type_desc = 'NONCLUSTERED' 
```

# android - 在listview适配器android中选择一个项目

> ID：15923381
> 
> 赞同：2
> 
> 时间：2013-04-10T10:31:34.607
> 
> 标签：android, android-listview, nullpointerexception, onitemclicklistener

在我的主要活动中，我调用了一个对象，编写了一个方法 itemClicked()。

```
public void itemClicked(){

        System.out.println("Clicked");
        efficienadapter.notifyDataSetChanged();
    } 
```

当我从列表视图中选择一行时，我正在尝试打印 Clicked 项目。注意：我正在使用一个名为 EfficientAdapter 的列表适配器。

这是适配器：

```
 public class EfficientAdapter extends BaseAdapter {

            private Activity activity;
            private ArrayList<ComptePost> data;
            private static LayoutInflater inflater = null;
            public ImageLoader imageLoader; 
            public  Boolean isActusAstuce;
            public static int flag = 0, counter=0;
            NVirementEmmeteur main;
            int num=0;

            ViewHolder holder;
            static String src;

            public EfficientAdapter(Activity a, ArrayList<ComptePost> d) {

                activity = a;
                data = d;
                inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            //  imageLoader = new ImageLoader(activity.getApplicationContext());
                imageLoader=new ImageLoader(activity.getApplicationContext());
            }

            public EfficientAdapter(NVirementEmmeteur m) {
                main=m;
            }

            @Override
            public int getCount() {
                return data.toArray().length;

            }

            @Override
            public Object getItem(int position) {

                return position;
            }

            @Override
            public long getItemId(int position) {
                return position;
            }

            public static class ViewHolder {

                public TextView one;
                public TextView two;
                public TextView three;
                public ImageView image;
                        public RelativeLayout relative;
            }

            @Override
            public View getView(final int position, View convertView, ViewGroup parent) {
                View vi = convertView;

                if (convertView == null) {

                    vi = inflater.inflate(R.layout.single_item, null);
                    holder = new ViewHolder();
                    holder.one = (TextView) vi.findViewById(R.id.text_view_one);
                    holder.image = (ImageView)vi.findViewById(R.id.imageView1);
                    holder.relative = (Relativelayout)vi.findViewById(R.id.relative);
vi.setTag(holder);

                } else
                    holder = (ViewHolder) vi.getTag();

                    holder.one.setTextColor(Color.WHITE);
                    holder.one.setText("Compte No."+data.get(position).getNumComtpe());
                    holder.image.setVisibility(View.GONE);

                    holder.relative_layout.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

            v.findViewById(R.id.imageView1).setVisibility(View.VISIBLE);

                    main.itemClicked();

                }

            });

                    //flag=0; only first row become white

                return vi;
            }

i used main.itemClicked() to print "Clicked". 

        holder.relative_layout.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    v.findViewById(R.id.imageView1).setVisibility(View.VISIBLE);

                    main.itemClicked();

                }

            }); 
```

但是当我选择一个行项目时，我得到了这个错误。

```
04-10 14:21:43.832: W/dalvikvm(4985): threadid=1: thread exiting with uncaught exception (group=0x40015578)
04-10 14:21:43.847: E/AndroidRuntime(4985): FATAL EXCEPTION: main
04-10 14:21:43.847: E/AndroidRuntime(4985): java.lang.NullPointerException
04-10 14:21:43.847: E/AndroidRuntime(4985):     at .EfficientAdapter$1.onClick(EfficientAdapter.java:111)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at android.view.View.performClick(View.java:2538)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at android.view.View$PerformClick.run(View.java:9152)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at android.os.Handler.handleCallback(Handler.java:587)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at android.os.Looper.loop(Looper.java:130)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at java.lang.reflect.Method.invoke(Method.java:507)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-10 14:21:43.847: E/AndroidRuntime(4985):     at dalvik.system.NativeStart.main(Native Method) 
```

我在哪里弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-04T20:02:44.903

在这种情况下，您不应该使用 setOnItemClickListener 吗？如果是，请将其放入您的 ListView。

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        view.setVisibility(View.VISIBLE);
        MainActivity.itemClicked();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:37:25.640

我怀疑这是在这里发生的：

```
@Override
public void onClick(View v) {
    System.out.println("Clicked "+data.get(position).getDebitMin());
    v.findViewById(R.id.imageView1).setVisibility(View.VISIBLE);
    main.itemClicked();
} 
```

错误发生在第 111 行，这意味着发生了三个选项之一：
1\. 数据是`null`或数据。`getposition`是`null`。
2\. 您在下一行找到的视图正在返回`null`。
3.主要是`null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:09:35.040

**这是如何从列表视图中隐藏图像的简单示例。在修改您的代码之后，首先尝试理解此代码。**

![在此处输入图像描述](https://i.stack.imgur.com/CVvAm.png)

我有带有文本和图像的列表视图。

这是列表视图的行文件`my_spinner_style.xml`。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal"
    android:weightSum="2" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

我的活动课：

```
package com.example.testapp;

import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.text.Html;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MainActivity extends ListActivity {

    private static final String[] COUNTRIES = new String[] { "Belgium",
            "France", "Italy" };

    private static final Integer[] img = new Integer[] {
            R.drawable.ic_launcher, R.drawable.dhaval1, R.drawable.ic_launcher };

    private MyArrayAdapter adapter;
    Bundle savedInstanceState;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        adapter = new MyArrayAdapter(MainActivity.this);
        getListView().setAdapter(adapter);

    }

    private class MyArrayAdapter extends BaseAdapter {

        private LayoutInflater mInflater;

        public MyArrayAdapter(Context con) {
            // TODO Auto-generated constructor stub
            mInflater = LayoutInflater.from(con);
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return COUNTRIES.length;
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            final ListContent holder;
            View v = convertView;
            if (v == null) {
                v = mInflater.inflate(R.layout.my_spinner_style, null);
                holder = new ListContent();

                holder.name = (TextView) v.findViewById(R.id.textView1);

                holder.name2 = (ImageView) v.findViewById(R.id.imageView1);

                v.setTag(holder);
            } else {

                holder = (ListContent) v.getTag();
            }

            holder.name.setText("" + Html.fromHtml("" + COUNTRIES[position]));

            holder.name2.setImageDrawable(getResources().getDrawable(
                    img[position]));
            holder.name.setOnClickListener(mOnTitleClickListener3);

            return v;
        }

    }

    static class ListContent {

        TextView name;

        ImageView name2;

    }

    public OnClickListener mOnTitleClickListener3 = new OnClickListener() {
        public void onClick(View v) {
            final int position = getListView().getPositionForView(
                    (View) v.getParent());

            View rowView = getListView().getChildAt(position);
            if (rowView != null) { // do whatever you want here
                View mainv = ((ViewGroup) rowView).getChildAt(1);
                Log.e("select dd--->", "" + mainv);

                // hide Image from here....
                mainv.setVisibility(View.GONE);
            }

        }
    };

    protected void onRestart() {
        // adapter.notifyDataSetChanged();
        onCreate(savedInstanceState);
    };

} 
```

**我已经补充说你可以使用你`OnClickListener`的`TextView`perent布局。我的情况是`LinearLayout`。**

# android - 如何在android中获取联系人的地址详细信息

> ID：15923387
> 
> 赞同：2
> 
> 时间：2013-04-10T10:31:49.237
> 
> 标签：android

我正在尝试在 android.here 中获取已保存的联系人并将其写入 csv 文件。

```
 if (cur.getCount() > 0) {
      writer = new CSVWriter(new FileWriter(filename));
        List<String[]> data = new ArrayList<String[]>();
        data.add(new String[] {"Name", "Number","Email","Note","PoBox","street","City","State","Postal Code","Country","AddressType","Instant Messanger","Org Name","Org Title"});
     while (cur.moveToNext()) {
         String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
          name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
             if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

                 // get the phone number
             Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                    new String[]{id}, null);
             while (pCur.moveToNext()) {
                   String phonetemp = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                   if(pCur.getCount()>1)
                   {
                       phone=phone+phonetemp+"^";
                   }
                   else
                   {
                       phone=phone+phonetemp;
                   }
                  }
             pCur.close();

             // get email and type
            Cursor emailCur = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,null,ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", new String[]{id}, null);

             while (emailCur.moveToNext()) {
                 // This would allow you get several email addresses
                     // if the email addresses were stored in an array
                 if(emailCur.getCount()>0)
                 {
                     if(emailCur.getCount()>1)
                     {
                       String email = emailCur.getString(emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                       String emailType = emailCur.getString(emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));
                       Emails=Emails + email + " $ " + emailType+"^";
                     }else
                     {
                         String email = emailCur.getString(emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                         String emailType = emailCur.getString(emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE));
                         Emails=  email + " $ " + emailType;
                     }
                 }
                 else
                 {
                     Emails=null;
                 }
            }
             emailCur.close();

             // Get note.......
             String noteWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
             String[] noteWhereParams = new String[]{id,ContactsContract.CommonDataKinds.Note.NOTE};
             Cursor noteCur = cr.query(ContactsContract.Data.CONTENT_URI, null, noteWhere, noteWhereParams, null);
             if (noteCur.moveToFirst()) {String note = noteCur.getString(noteCur.getColumnIndex(ContactsContract.CommonDataKinds.Note.NOTE));
               Note= note;
             }
            noteCur.close();

             //Get Post Box Address....
            // String addrPoBoxWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
            // String[] addrPoBoxWhereParams = new String[]{id, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
             Cursor addrPoBoxCur = cr.query(ContactsContract.Data.CONTENT_URI,null,CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id},null);
             while(addrPoBoxCur.moveToNext()) {
                String poBoxtemp = addrPoBoxCur.getString(addrPoBoxCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POBOX));
                if(poBoxtemp!=null)
                {
                    if(addrPoBoxCur.getCount()>1)
                    {
                        poBox=poBox+poBoxtemp+"^";  
                    }
                    else {
                        poBox=poBox+poBoxtemp;
                    }

                }

                 }
             addrPoBoxCur.close(); 

             //Get Street Address....
             //String addrStreetWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
             String[] addrStreetWhereParams = new String[]{ContactsContract.CommonDataKinds.StructuredPostal.STREET};
             Cursor addrStreetCur = cr.query(ContactsContract.Data.CONTENT_URI,addrStreetWhereParams,CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id},null);
             while(addrStreetCur.moveToNext()) {
                  String streettemp = addrStreetCur.getString(addrStreetCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET));
                  if(streettemp!=null)
                  {
                      if(addrStreetCur.getCount()>1)
                      {
                          street=street+streettemp+"^";   
                      }
                      else
                      {
                          street=street+streettemp;
                      }
                  }
             }
             addrStreetCur.close();

             //Get City Address....
            // String addrCityWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
            // String[] addrCityWhereParams = new String[]{id, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
             Cursor addrCityCur = cr.query(ContactsContract.Data.CONTENT_URI,null,CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id},null);
             while(addrCityCur.moveToNext()) {
                  String citytemp = addrCityCur.getString(addrCityCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY));
                  if(citytemp!=null)
                  city=city+citytemp+"^";
             }
             addrCityCur.close();

             //Get State Address....
           //  String addrStateWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
          //   String[] addrStateWhereParams = new String[]{id, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
             Cursor addrStateCur = cr.query(ContactsContract.Data.CONTENT_URI,null,CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id},null);
             while(addrStateCur.moveToNext()) {
                               String statetemp = addrStateCur.getString(addrStateCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION));
                  if(statetemp!=null)
                  {
                      if(addrStateCur.getCount()>1)
                      {
                          state=state+statetemp+"^";      
                      }
                      else
                      {
                          state=state+statetemp;
                      }
                  }

              }
             addrStateCur.close();

             //Get PostalCode Address....
            // String addrPostalCodeWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
             //String[] addrPostalCodeWhereParams = new String[]{id, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
             Cursor addrPostalCodeCur = cr.query(ContactsContract.Data.CONTENT_URI,null,CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id},null);
             while(addrPostalCodeCur.moveToNext()) {
                   String postalCodetemp = addrPostalCodeCur.getString(addrPostalCodeCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.PHONETIC_NAME));
                   if(postalCodetemp!=null)
                   {
                       if(addrPostalCodeCur.getCount()>1)
                       {
                           postalCode=postalCode+postalCodetemp+"^";       
                       }
                       else
                       {
                           postalCode=postalCode+postalCodetemp;
                       }
                   }

             }
             addrPostalCodeCur.close();

             //Get Country Address....
           //  String addrCountryWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
          //   String[] addrCountryWhereParams = new String[]{id, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
             Cursor addrCountryCur = cr.query(ContactsContract.Data.CONTENT_URI,null,CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id},null);
             while(addrCountryCur.moveToNext()) {
                String countrytemp = addrCountryCur.getString(addrCountryCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY));
                   if(countrytemp!=null)
                   {
                       if(addrCountryCur.getCount()>1)
                       {
                           country=country+countrytemp+"^";    
                       }
                       else
                       {
                           country=country+countrytemp;
                       }
                   }

               }
             addrCountryCur.close();

             //Get AddressType ....
           //  String addrAddressTypeWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
            // String[] addrAddressTypeWhereParams = new String[]{id, ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE};
             Cursor addrAddressTypeCur = cr.query(ContactsContract.Data.CONTENT_URI,null,CommonDataKinds.Phone.CONTACT_ID +" = ?",new String[]{id},null);
             while(addrAddressTypeCur.moveToNext()) {
                   String AddressTypetemp = addrAddressTypeCur.getString(addrAddressTypeCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE));
                   if(AddressTypetemp !=null)
                   {
                       if(addrAddressTypeCur.getCount()>1)
                       {
                           AddressType=AddressType+AddressTypetemp +"^";       
                       }
                       else
                       {
                           AddressType=AddressType+AddressTypetemp;
                       }
                   }

                                     // Do something with these...
             }
             addrAddressTypeCur.close();

             // Get Instant Messenger.........
            String imWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";String[] imWhereParams = new String[]{id,ContactsContract.CommonDataKinds.Im.CONTENT_ITEM_TYPE};
             Cursor imCur = cr.query(ContactsContract.Data.CONTENT_URI, null, imWhere, imWhereParams, null);
              while (imCur.moveToNext()) {
                 if(imCur.getCount()>0)
                 {
                     String imName = imCur.getString(
                              imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.DATA));
                     String imType;
                     imType = imCur.getString(
                              imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.TYPE));
                     IM=IM + imName + " $ " + imType+"^";
                 }
                 else
                 {
                     String imName = imCur.getString(
                              imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.DATA));
                     String imType;
                     imType = imCur.getString(
                              imCur.getColumnIndex(ContactsContract.CommonDataKinds.Im.TYPE));
                     IM=IM + imName + " $ " + imType;
                 }

             }
             imCur.close();

             // Get Organizations.........
             String orgWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?";
             String[] orgWhereParams = new String[]{id,
                 ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE};
             Cursor orgCur = cr.query(ContactsContract.Data.CONTENT_URI,
                         null, orgWhere, orgWhereParams, null);
             if (orgCur.moveToFirst()) {
                  orgName = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.DATA));

                  title = orgCur.getString(orgCur.getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE));
             }
             orgCur.close();
         }   data.add(new String[] {name, phone,Emails,Note,poBox,street,city,state,postalCode,country,AddressType,IM,orgName,title});
     }
     writer.writeAll(data);
     writer.close(); 
```

这里的问题是当面对联系的街道详细信息时，它正在获取街道详细信息 + 联系电话

# android - 如何在android中设置标题栏？

> ID：15923388
> 
> 赞同：0
> 
> 时间：2013-04-10T10:31:53.780
> 
> 标签：android, listview

我是安卓新手。。

我有一个列表视图。例如列表视图包含“一、二、三、四、五”。当我从列表中选择“Two”时，我应该将“Two”显示为“Two”的下一个布局内容详细信息的标题

如何得到这个？任何人帮助我。提前致谢。

> ```
> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
> xmlns:tools="http://schemas.android.com/tools"
> xmlns:android1="http://schemas.android.com/apk/res/android"
> android:layout_width="match_parent"
> android:layout_height="match_parent"
> tools:context=".Nexttopic" >
> <ListView
>     android1:id="@+id/List_view"
>     android1:layout_width="match_parent"
>     android1:layout_height="250dp"
>     android1:layout_centerHorizontal="true"
>     android1:layout_centerVertical="true"
>      android:background="@drawable/bg">
> </ListView>
>  </RelativeLayout> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:45:38.830

```
listView.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

    TextView listitem = (TextView) view.findViewById(R.id.textView1);
    String title = listitem.getText().toString();

    Intent intent = new Intent(getActivity(),NextActivity.class);
    intent.putExtra("SelectedListItem",title);
    startActivity(intent);
    }
}); 
```

NextActivity.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.nextlayout);

    String title = getIntent().getStringExtra("SelectedListItem");
    setTitle(title);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:42:35.580

这是更改标题的方法

```
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

setContentView(R.layout.main);

if ( customTitleSupported ) {
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);
}

final TextView myTitleText = (TextView) findViewById(R.id.myTitle);
if ( myTitleText != null ) {
    myTitleText.setText("========= NEW TITLE ==========");
    myTitleText.setBackgroundColor(Color.GREEN);
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:45:54.440

试试这个链接：[https](https://stackoverflow.com/a/2417104/670981) ://stackoverflow.com/a/2417104/670981 ，否则你必须更新你的问题。您的详细活动“您选择的显示位置”是片段还是只是一个活动？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:47:34.727

我不记得确切但它像

```
getActionBar().setTitle("My new title"); 
```

我相信如果这是一个较旧的 android 版本，即不支持操作栏的版本，那么你可以使用`setTitle("My Title");`

它还根据`android:label`您在清单文件中为活动定义的设置进行设置。

# windows - 无法在 Windows 7 上加载 AppInit_DLLs 中指定的发布 DLL

> ID：15923391
> 
> 赞同：0
> 
> 时间：2013-04-10T10:32:02.867
> 
> 标签：windows, visual-studio-2010, debugging, winapi, development-environment

我们通过 HKLM\Software\Microsoft\WindowsNT\CurrentVersion\Windows\AppInit_DLLS 路径挂钩一个库（比如 xyz.dll）。

我需要调试这个库，所以我创建了非调试 dll(&pdb) 并将其替换为 System32 目录中的原始 xyz.dll 库。现在，当一个进程尝试加载这个库时，我得到一个“坏图像”错误，如下所示 -

“C:\Windows\system32\xyz.dll 不是为在 Windows 上运行而设计的，或者它包含错误。请尝试使用原始安装介质重新安装该程序，或联系您的系统管理员或软件供应商寻求支持。”

我注意到原始 xyz.dll 是代码签名的，因此我还使用 signtool 使用临时证书对编译的非调试 xyz.dll 进行了签名，但这没有帮助。根据 [MSDN] ( [http://msdn.microsoft.com/en-us/windows/hardware/gg463040.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463040.aspx) ) 建议使用代码签名，但不是强制性的。

后来我意识到，当我获得由有效证书签名的非调试库 xyz.dll 时，它可以工作。

我的问题：有什么方法可以让 Windows 7 绕过 dll 的签名验证？每次生成一个有效的证书并签署一个库对于开发/调试目的来说似乎非常麻烦。有什么简单的出路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:57:39.320

要禁用 AppInit_DLL 的代码签名强制执行，请使用以下键：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Windows]
"RequireSignedAppInit_DLLs"=dword:00000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:24:59.857

windows 验证数字签名的原因是 xyz.dll 是使用 /integritycheck 链接器选项编译的。当我在删除此标志后构建 dll 时，应用程序会加载它而不验证数字签名。

请参阅[http://msdn.microsoft.com/en-us/library/dn195769.aspx](http://msdn.microsoft.com/en-us/library/dn195769.aspx)

# java - 在 Liferay 挂钩中将自定义类导入 JSP

> ID：15923394
> 
> 赞同：2
> 
> 时间：2013-04-10T10:32:19.633
> 
> 标签：java, maven, liferay, liferay-6

我使用 hook maven 原型创建了一个 liferay Hook 插件，并覆盖了`/html/common/themes/top_js-ext.jspf`. 在我需要使用自定义功能的 jsp 中，我有一个单独的 jar。该 jar 是通过 maven 依赖项包含的，并且项目编译得很好，但是当我运行 jsp 时，门户找不到导入的类。

我怎样才能解决这个问题 ？我应该手动将自定义 jar 包含在 liferay 的 lib 目录中吗？

如果我理解正确，JSP 是在 Hook 插件的上下文之外执行的，因此自定义类不可用。有没有办法我可以使用 maven 构建插件，以便门户找到我的自定义 jar，而无需手动将它们移动到门户的类路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:20:33.553

有多个选项可以使您的自定义 jar 可用于运行时。首先，您可以考虑将它们放入[插件的 WEB-INF/lib 目录](http://www.liferay.com/de/community/forums/-/message_boards/message/7454307)：

> [..] 将 JAR 文件放在 custom-jsps 文件夹的 WEB-INF/lib 文件夹中 [..]

另一种方法是[创建一个 ext 插件](http://www.liferay.com/de/documentation/liferay-portal/6.0/development/-/ai/creating-an-ext-plugin)并将您的 jar 文件放入 ext-lib/portal 或 ext-lib/global 目录。[完成ext-plugin](http://www.liferay.com/de/documentation/liferay-portal/6.0/development/-/ai/developing-an-ext-plugin)的部署后，它们将分别可用于您的所有 tomcat 的 webapps（在 ext-lib/global 的情况下）或门户网站（以 tomcat/webapps/ROOT 的形式出现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:06:11.070

取出 java 类文件的 jar 并将其放在 root/web-inf/lib 中并重新启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:20:12.683

JSP 在门户的类加载器中执行，即使它是通过单独的 Web 应用程序（挂钩）部署的。因此，您可以选择

*   将您的自定义代码添加到 Liferay，例如根上下文（如 NivasKulukuri 所述）
*   将您的自定义代码添加到全局类路径
*   通过使用类加载桥访问您的自定义代码（例如阅读有关 PortletClassInvoker 的信息）。Liferay Servicebuilder 在其类加载代理（以 Clp 结尾的类名）中使用此类方法来跨 Web 应用程序调用
*   考虑另一种实现方式，例如，只需将所需的 JS 代码添加到您的自定义主题中。如果您有许多需要此更改的主题，请考虑引入一个[共同的父级](https://www.liferay.com/de/web/olaf.kock/blog/-/blogs/theme-development%3a-choosing-your-parent)（我推荐这种方式作为最好的可维护方式）

类加载桥的缺点是使用它们感觉就像在反射中编程——你不想经常做任何事情。尤其是你不想经常维护的东西。

# cmake - cmake与ccache交叉编译时ar和strip不正确

> ID：15923395
> 
> 赞同：3
> 
> 时间：2013-04-10T10:32:20.800
> 
> 标签：cmake, cross-compiling, ccache

我交叉编译了一个项目witch ccache：

```
cmake -G"Unix Makefiles" \
      -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_TOOLCHAIN_FILE=mips64el-toolchain.cmake 
```

以下是mips64el-toolchain.cmake：

```
SET (CMAKE_SYSTEM_NAME Linux)
SET (CMAKE_SYSTEM_PROCESSOR mips64el)

SET (CMAKE_C_COMPILER ccache mips64el-n64-linux-gnu-gcc)
SET (CMAKE_CXX_COMPILER ccache mips64el-n64-linux-gnu-g++)

# here is the target environment located
SET (CMAKE_FIND_ROOT_PATH 
     $ENV{HOME}/x-tools/mips64el-n64-linux-gnu/mips64el-n64-linux-gnu/sysroot)

# adjust the default behaviour of the FIND_XXX() commands:
# search headers and libraries in the target environment, search
# programs in the host environment
SET (CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
SET (CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
SET (CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY) 
```

但我在 CMakeCache.txt 中发现了不正确的值：

```
CMAKE_AR:FILEPATH=/usr/bin/ar
CMAKE_STRIP:FILEPATH=/usr/bin/strip 
```

ar 和 strip 不是交叉编译器。

如何正确设置它们？

一周前，我发现这是 cmake 的一个错误并修复了

*   模块/CMakeDetermineCCompiler.cmake
*   模块/CMakeDetermineCXXCompiler.cmake

有关详细信息，另请参阅

[https://launchpad.net/~likemartinma/+archive/devel](https://launchpad.net/~likemartinma/+archive/devel)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T12:13:32.017

尝试设置`CMAKE_AR`ar 和`CMAKE_STRIP`strip in `CMAKE_TOOLCHAIN_FILE`。

我在我`CMAKE_AR`的一个项目中使用正确设置`ar`，因为平台有`ar`来自不同供应商的多个。

# ant - 詹金斯 [错误] - XTrigger 异常 - Windows

> ID：15923396
> 
> 赞同：1
> 
> 时间：2013-04-10T10:32:25.113
> 
> 标签：ant, jenkins, ivy, jenkins-plugins

我得到了 Ivy 触发器的以下触发器异常，所以我检查了它抱怨的 xml（在临时文件夹中）。我发现 xml 无效，这是因为双引号 ("") 内有一些带有双引号 ("") 的路径字符串。但是相同的配置正在linux中生成有效的xml，并且一切正常。我很困惑，任何人都可以帮助我理解这一点......干杯......

> [IvyTrigger] - 使用 Ivy 脚本进行投票
> 
> 轮询开始于 2013 年 4 月 10 日 11:28:31 轮询作业 ProjectName 寻找可以运行轮询的节点。寻找最后一个建立在节点上。
> 
> 轮询主人。给定工作 Ivy 文件值：ProjectName/conf/ProjectName/ivy.xml 给定工作 Ivy 设置文件值：ProjectName/conf/ProjectName/ivysettings.xml 已解决工作 Ivy 文件值：C:\Users\r.ramachandran.jenkins\jobs\ ProjectName\workspace\ProjectName\conf\ProjectName\ivy.xml 已解析的作业 Ivy 设置文件值：C:\Users\r.ramachandran.jenkins\jobs\ProjectName\workspace\ProjectName\conf\ProjectName\ivysettings.xml 给定作业属性文件路径：ProjectName/conf/ProjectName/versions.properties 解析的属性文件值：C:\Users\r.ramachandran.jenkins\jobs\ProjectName\workspace\ProjectName\conf\ProjectName\versions.properties 临时属性文件路径是props7098303975969813724props [错误] - XTrigger 异常：java.text.ParseException：无法从文件加载设置：/C：/apps/apache/apache-tomcat-7.0.37/temp/file5208145617326820606.tmp：元素类型“property”必须后跟属性规范“>”或“/>”。记录上下文。检查下一次投票中的变化。
> 
> 轮询完成。花了 35 毫秒。没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:32:36.643

我在 /tmp 小于 1GB 的节点上看到了同样的问题，所以我猜是因为文件被删除/损坏。

尝试清理 /tmp 或增加其大小。

# core-animation - 精灵动画的 CAKeyframeAnimation

> ID：15923399
> 
> 赞同：1
> 
> 时间：2013-04-10T10:32:34.937
> 
> 标签：core-animation, calayer, sprite-sheet, cakeyframeanimation, texturepacker

我正在尝试使用 Core Animation 为使用 Texture Packer 制作的精灵表制作动画。

我有一个包含所有精灵内容的 NSCollection。（键和 CGI​​mageRef 的）

```
My Collection {
"caja01.png" = "<UIImage: 0x1cda57c0>";
"caja02.png" = "<UIImage: 0x1cda61d0>";
"caja03.png" = "<UIImage: 0x1cda62e0>";
"caja04.png" = "<UIImage: 0x1cda63f0>";
"caja05.png" = "<UIImage: 0x1cda6540>";
"caja06.png" = "<UIImage: 0x1cda6650>";
"caja07.png" = "<UIImage: 0x1cda6760>";
"caja08.png" = "<UIImage: 0x1cda68f0>";
} 
```

我尝试使用 CAKeyframeAnimation 制作动画：

```
NSArray *values = [self.mySprites allValues]; // Get the CGImageRef's from NSDictionary

// Creating a new layer
CALayer *sublayer = [CALayer layer];
sublayer.backgroundColor = [UIColor blueColor].CGColor;
sublayer.frame = imagen.frame;
[self.view.layer addSublayer:sublayer];

// Create an first image from Sprite-sheet
UIImageView *imagen  = [[UIImageView alloc]initWithImage:[self.mySprites objectForKey:@"caja01.png"]];

// And add initial content to my layer
sublayer.contents = (id) imagen.image.CGImage;

// Try to make the animation
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath: @"contents"];
animation.calculationMode = kCAAnimationDiscrete;
animation.duration = 10.0;
[animation setValues:values];
[animation setRepeatCount:2];
[animation setRemovedOnCompletion:NO];
[sublayer addAnimation: animation forKey: @"contents"]; 
```

但它不起作用，屏幕上没有任何反应。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:19:03.960

我的建议是“不要那样做”。您正在尝试实现一种技术，即精灵表，用于解决与核心动画无关的问题。

使用精灵表的原因是为了处理 OpenGL（和其他图形 API）中的内存管理问题。Core Animation 的工作方式不同，因此在 CA 中实现 sprite sheet 动画并不合适。

# javascript - 如何查找 PeopleEditor 控件是否具有值

> ID：15923400
> 
> 赞同：-3
> 
> 时间：2013-04-10T10:32:35.080
> 
> 标签：javascript, asp.net, sharepoint

如果aspx页面中的sharepoint人员编辑器为空，我必须禁用一个按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:39:49.980

阅读[此](http://wsstipstricks.blogspot.in/2011/06/people-editor-control-validation-for.html)博客。与您的问题非常相似。希望它会有所帮助

# android - android中fill_parent和match_parent有什么区别

> ID：15923408
> 
> 赞同：2
> 
> 时间：2013-04-10T10:32:50.653
> 
> 标签：android, android-layout

```
ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
/> 
```

或者

```
 <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
 /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:36:43.263

**两者都是同一件事（在 API 级别 8+ 中）。**

`fill_parent`: 视图应该和它的父级一样大

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T13:08:25.183

这已经在SO上被问过好几次了，这里有一个类似的问题：[android中的fill_parent和match_parent之间的区别](https://stackoverflow.com/questions/11237651/difference-between-fill-parent-and-match-parent-in-android)

自 API 级别 8 起，fill_parent 标记已重命名为 match_parent。

# c# - 检查字符串最小长度后添加空格的功能

> ID：15923412
> 
> 赞同：2
> 
> 时间：2013-04-10T10:33:03.250
> 
> 标签：c#

检查字符串最小长度后添加空格的方法，如果输入的字符串不等于定义的最小长度，则在字符串后添加空格以完全填充最小长度条件？?

示例：最小长度 =30

和 string = "anuragsaraswat123abc" 20 个字符

然后自动找到字符串的最小长度和可用字符串之间的差异并添加空格。建议我方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T10:36:50.730

这在[框架](http://msdn.microsoft.com/en-us/library/66f6d830.aspx)中包含[String.PadLeft](http://msdn.microsoft.com/en-us/library/system.string.padleft.aspx)和[String.PadRight](http://msdn.microsoft.com/en-us/library/system.string.padright.aspx)

```
string MyString = "Hello World!";
Console.WriteLine(MyString.PadRight(30, ' ')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:44:10.570

您可以为此使用[`String.PadRight`](http://msdn.microsoft.com/en-us/library/36f2hz3a.aspx)方法。

> 返回一个新字符串，该字符串左对齐此字符串中的字符，方法是使用指定的 Unicode 字符在它们的右侧填充指定的总长度。

```
static string YourMethod(string s)
{
     return s.Length < 30 ? s.PadRight(30 - s.Length, ' ') : s;
} 
```

这是一个[`DEMO`](http://ideone.com/xVGkex).

***注意***：由于您看不到空白，并不意味着它们不存在`;)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:40:25.827

我的版本：

```
if (myStringVariable.Length < minimumLength)
    myStringVariable += new string(' ', myStringVariable.Length - minimumLength); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T10:57:21.633

接收您想要的长度和文本或声明它们，然后

```
 string strn = str.Length < length ? str.PadRight(length): str; 
```

其中 str 是您获得/声明的长度，length 是获得/声明的长度，全部在 c# .net3.5 及更高版本中。

c# winforms 中的整个代码在 main func 中：

```
namespace AddSpacesAcctoLength
  {
     public partial class Form1 : Form
     {
        public Form1()
          {
            InitializeComponent();
          }

    private void btnExit_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void btnCmd_Click(object sender, EventArgs e)
    {
        int length = 20;
        string str = txtbxText.Text;

        string strn = str.Length < length ? str.PadRight(length): str;

        MessageBox.Show(strn + "hiyya" + strn.Length.ToString());
    }
  }
} 
```

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:39:56.567

从 NET 框架 (1.0) 的第一天开始，string.PadRight 和 string.PadLeft 就很好地解决了这个问题。

只需使用

```
string example = "Need 30 chars of length";
string result = example.PadRight(30, ' ');
Console.WriteLine("-" + result + "-" + "Length is:" + result.Length); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T10:42:13.180

```
if string.Length<30
{
n=30-string.Length;
for(int i=0;i++;i<n)
string+=" ";
} 
```

# java - 在 libgdx 中显示大文本

> ID：15923413
> 
> 赞同：1
> 
> 时间：2013-04-10T10:33:04.283
> 
> 标签：java, android, libgdx

我有引号字符串数组，想在 libgdx 中显示。我正在做如下

```
public int quoteIndexNo =2; 

public String[] quotes = {
        "Sometimes the heart sees what is " +
        "invisible to the eye. H. Jackson " +
        "Brown, Jr.",           
        "Being deeply loved by someone gives" +
        " you strength, while loving someone " +
        "deeply gives you courage. Lao Tzu",};  

                    font.draw(batch, quotes[quoteIndexNo], 50, 100); 
```

但问题是，文本很大，它不能正确显示在屏幕上。如何确保单行中只有 15 个字符可见，而字符串的其余部分在另一行中可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:21:36.103

使用 drawMultiLine 。在您的情况下，像这样使用它 font.drawMultiLine(batch, lovequotes[quoteIndexNo], 50 ,150 ); 可能这会帮助你

# sql - Postgres：获取计数并选择不同的

> ID：15923414
> 
> 赞同：1
> 
> 时间：2013-04-10T10:33:05.453
> 
> 标签：sql, database, postgresql

我在这里遇到了一个非常简单的任务（我认为）。

我有一个看起来像这样的表：

```
SELECT
        title, lat, lng, geocoder_identifier
    FROM entries
    WHERE geocoder_identifier IS NOT NULL; 
```

![条目表](https://i.stack.imgur.com/icRjD.png)

如果用户选择与另一个具有相同 lat/lng 的地方，则 geocoder_identifier 字段对于两个条目是相同的。我需要做的是将具有相同 geocoder_identifier 的任何行组合在一起，计算该组中有多少行，然后返回该组中第一行的详细信息并丢弃其他行。

到目前为止，我最接近完成这项工作的是：

```
SELECT DISTINCT
        (geocoder_identifier), title, lat, lng, entry_count
    FROM (
        SELECT
                title,description, lat, lng, geocoder_identifier, COUNT(*) OVER (PARTITION BY geocoder_identifier) AS entry_count
            FROM entries
            WHERE geocoder_identifier IS NOT NULL) AS e
    ORDER BY e.entry_count DESC; 
```

这为我生成了以下数据集：

![在此处输入图像描述](https://i.stack.imgur.com/JcqKF.png)

这里的问题是我无法真正弄清楚如何通过他们的 geocoder_identifiers 使结果不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:40:40.927

最简单的方法是：

```
SELECT min(title), min(lat), min(lng), geocoder_identifier, count(*)
FROM entries
WHERE geocoder_identifier IS NOT NULL
group by geocoder_identifier
order by 5 desc 
```

请注意，这将返回每个给定 geocoder_identifier 的每个标题、lat 和 lng的*最小值，**不一定*是第一个（尽管 lat 和 lng 在每个 geocoder_identifier 中应该相同） - 这取决于您要如何确定第一个标题.

# android - 到 ListView 的 JSON 字符串没有发生

> ID：15923418
> 
> 赞同：1
> 
> 时间：2013-04-10T10:33:17.730
> 
> 标签：android, json

我有一个 JSON 字符串，我正在尝试解析然后进入 ListView，我的代码没有抛出任何错误，但它也不起作用，我无法确定我可能出错的地方。以下是我的代码：

```
 protected void onPostExecute(String result) {
            super.onPostExecute(result);
            str = result;
            Toast.makeText(getApplicationContext(),""+str, Toast.LENGTH_LONG).show(); // Able to toast the JSON string (str) here. 
            mylist = new ArrayList<HashMap<String, String>>();
            map = new HashMap<String, String>();
            try {
                JSONArray jArray = new JSONArray(str);
                    for (int i = 0; i < jArray.length(); i++) {

                        JSONObject jObject = jArray.getJSONObject(i);

                        j_id = jObject.getString(ID);

                        j_make = jObject.getString(MAKE);

                        j_model = jObject.getString(MODEL);

                        j_version = jObject.getString(VERSION);
                        j_price = jObject.getString(PRICE);
                        j_reg_plc = jObject.getString(PLACE_REG);

                    Toast.makeText(getApplicationContext(),"After assign", Toast.LENGTH_LONG).show();

                    data = "Make: "+ j_make + "\nModel: " + j_model + "\nVersion: " + j_version + "\nPrice: " + j_price
                            + "\nCity: " + j_reg_plc;

                    map.put("car", data); 

                    mylist.add(map); 

                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

    //  list = (ListView) findViewById(R.id.listView1);
        Toast.makeText(getApplicationContext(),""+mylist, Toast.LENGTH_LONG).show();
        String[] from = new String[] { "car"};
        int[] to = new int[] { R.id.text1 };
        ListAdapter adapt = new SimpleAdapter(view_cars.this, mylist,R.layout.text_adaptr, from, to);

        list.setAdapter(adapt);

    } 
```

似乎我的 for 循环突然退出，它没有被执行两次，因为我从网络接收的数组的长度是 2。我附上了我得到的 JSON 数组的屏幕截图![在此处输入图像描述](https://i.stack.imgur.com/ShxO9.jpg)

有关详细信息，请检查代码以获取注释。

# android - ScrollView 显示键盘内的 EditText

> ID：15923421
> 
> 赞同：0
> 
> 时间：2013-04-10T10:33:37.103
> 
> 标签：android, keyboard, android-edittext, scrollview

我有这个布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" >

        </EditText>

        <EditText
            android:id="@+id/editText2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" />

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

..当我执行我的应用程序时，会显示键盘。

[http://img62.imageshack.us/img62/2879/screenshot2013041012264.png](http://img62.imageshack.us/img62/2879/screenshot2013041012264.png)

如果我不使用滚动视图，除非我单击一个编辑文本，否则不会发生这种情况。

我不想在执行我的应用程序时显示键盘（具有滚动视图），除非我单击edittext。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:33:57.283

您可以将 ***android:windowSoftInputMode="stateHidden"***放在清单文件的 Activity 标记中

# python - 如何在 Python/Django 中逐行读取 pdf 文件？

> ID：15923422
> 
> 赞同：0
> 
> 时间：2013-04-10T10:33:41.620
> 
> 标签：python, django, pdf, file-io, readlines

我正在处理文本和 pdf 文件等于或小于`5KB`. 如果文件是文本文件，我会从表单中获取一个文件，并在字符串中获取所需的输入以进行总结：

```
 file = file.readlines()
 file = ''.join(file)
 result = summarize(file, num_sentences) 
```

这很容易完成，但对于 pdf 文件，事实证明这并不容易。有没有办法像我在 Python/Django 中处理我的 txt 文件一样将 pdf 文件的句子作为字符串获取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:49:04.310

我认为不可能像使用 txt 文件那样阅读 pdf，您需要将 pdf 转换为 txt 文件（请参阅[Python 模块以将 PDF 转换为文本](https://stackoverflow.com/questions/25665/python-module-for-converting-pdf-to-text)）然后处理它。你也可以参考这个来轻松地将pdf转换为txt [http://code.activestate.com/recipes/511465-pure-python-pdf-to-text-converter/](http://code.activestate.com/recipes/511465-pure-python-pdf-to-text-converter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T11:50:39.213

在 Django 中，您可以这样做：

视图.py：

```
def upload_pdf():
     if request.method == 'POST' and request.FILES['myfile']:
        pdfFileObj = request.FILES['myfile'].read() 
        pdfReader = PyPDF2.PdfFileReader(io.BytesIO(pdfFileObj))
        NumPages = pdfReader.numPages
        i = 0
        content = []
        while (i<NumPages):
            text = pdfReader.getPage(i)
            content.append(text.extractText())
            i +=1
       # depends on what you want to do with the pdf parsing results
       return render(request, .....) 
```

html部分：

```
<form method="post" enctype="multipart/form-data" action="/url">
    {% csrf_token %}
      <input  type="file" name="myfile"> # the name is the same as the one you put in FILES['myfile']
    <button class="butto" type="submit">Upload</button>
</form> 
```

在 Python 中，您可以简单地执行以下操作：

```
fileName = "path/test.pdf"
pdfFileObj = open(fileName,'rb')
pdfReader = PyPDF2.PdfFileReader(pdfFileObj)
NumPages = pdfReader.numPages

i = 0
content = []
while (i<NumPages):
    text = pdfReader.getPage(i)
    content.append(text.extractText())
    i +=1 
```

# jquery - 选项卡链接不停止默认操作

> ID：15923425
> 
> 赞同：0
> 
> 时间：2013-04-10T10:34:08.370
> 
> 标签：jquery, html, tabs

每次我单击一个选项卡时，我都有以下 jquery 选项卡的代码，它会转到页面顶部：

```
<div id="wrapper">
        <ul class="tabs">
            <li id="fixtures_tab"><a href="#fixtures"><?php echo ALL;?></a></li>
            <li id="live_tab"><a href="#live"><?php echo LIVE;?></a></li>
            <li id="finished_tab"><a href="#finished"><?php echo FINISHED;?></a></li>
            <li id="program_tab"><a href="#program"><?php echo PROGRAM;?></a></li>
            <li id="postpond_tab"><a href="#postpond"><?php echo POSTPOND;?></a></li>
            <li id="selected_tab"><a onclick="stripe_Color();" id='f' href="#fav"><?php echo SELECTED;?> (0)</a></li>
        </ul>
        <div class="tab-container">
            <div id="fixtures" class="tab-content"><script type="text/javascript">
            </script></div>
            <div id="live" class="tab-content"><script type="text/javascript"></script></div>
            <div id="finished" class="tab-content"><script type="text/javascript"></script></div>
            <div id="program" class="tab-content"><script type="text/javascript"></script></div>
            <div id="postpond" class="tab-content"><script type="text/javascript"></script></div>
            <div id="fav" class="tab-content"><script type="text/javascript"></script></div>
        </div> 
```

所以我使用一些 jquery 行来解决以下问题：

```
$(document).ready(function(){
    setTimeout(function(){

    $('.tabs').find('li').each(function(){
        var stay = $(this).find('a');
        $(this).find('a').click(function(e){
                alert('test');
            e.preventDefault();
        });
    });
    }, 3000);
}); 
```

警报正在工作，但 e.preventDefault(); 不是 。代码有什么问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:12:14.117

尝试

```
$(document).ready(function(){
  setTimeout(function(){
    $('.tabs').find('li').each(function(){
      var stay = $(this).find('a');
      $(this).find('a').click(function(e){
        alert('test');
        return false;
      });
    });
  }, 3000);
}); 
```

# c# - 水晶报表如何设置份数？

> ID：15923427
> 
> 赞同：2
> 
> 时间：2013-04-10T10:34:19.920
> 
> 标签：c#, c#-4.0, crystal-reports, crystal-reports-2010

我正在使用 Visual Studio 2010 创建水晶报表，并将 ADO 数据集用于报表上的数据库字段。现在我想在水晶报表查看器的打印按钮上设置默认的 2 份账单副本。我在水晶报告查看器负载上编写的代码是

```
Report.Bill objRpt = new Report.Bill();
objRpt.SetDataSource(DT1);
objRpt.PrintToPrinter(2, true, 0, 0);
crystalReportViewer1.ReportSource = objRpt;
crystalReportViewer1.Refresh(); 
```

但它只打印单份账单。谁能告诉我该如何解决？我对水晶报告很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-10T11:06:06.227

```
private void button1_Click(object sender, EventArgs e)
    {
        SqlCommand cmd = new SqlCommand("//Your Query//");
        //SqlCommand cmd = new SqlCommand();
        //cmd.CommandText = "GetSalesCrystalReport";
        //cmd.CommandType = CommandType.StoredProcedure;
        //cmd.Parameters.AddWithValue("@ReferenceNo", txtReferenceNo.Text);
        DataTable dt1 = DataManager.GetDataTable(cmd);
        Sales objRpt3 = new Sales();
        objRpt3.SetDataSource(dt1);
        objRpt3.PrintToPrinter(1, false, 0, 0);

    } 
```

# macos - 如何使 MusicDevice.h 中的 MusicDeviceMIDIEvent 响应音符持续时间？

> ID：15923436
> 
> 赞同：0
> 
> 时间：2013-04-10T10:34:39.543
> 
> 标签：macos, midi, duration, audio-player, coremidi

我正在尝试使用以下代码制作旋律。问题是试图让序列播放节奏数组中的节奏值。我基本上想弹奏音符，然后在指定时间内关闭速度并播放序列中的下一个音符。

任何帮助将不胜感激。

```
int playMidi()
{
 //pitch array with constants defined for pitch numbers: ex. C4 = 60
 int pitchArray[11] {C4, A5, E4, F3, D4, FS5, BF4, CS3, FS5, C3, DF4}; /

//velocity array with constants defined for velocity: ex. QN = 1, EN = 0.5
 int velocityArray[11] {FORTE, PIANISSIMO, MEZZO_FORTE, PIANISSIMO, FORTISSIMO,
 MEZZO_PIANO, PIANISSIMO, FORTE, MEZZO_PIANO,FORTE, FORTISSIMO};

//rhythm array with constants defined for rhythm values: ex.  = 110
double rhythmArray[11] {EN, SN, SN, EN, QN, EN, EN, EN, TSN,TSN, SN};

for(int i=0; i<11; i++)
{

    UInt32 noteOnCommand =  kMidiMessage_NoteOn << 4 | midiChannelInUse;

        std::cout<< "The current pitch is: " 
                 <<pitchArray[i]  << "The velocity is: " <<velocityArray[i]
                 << " and the rhythmic value is: "<<rhythmArray[i]<<  "\n";

        MusicDeviceMIDIEvent(synthUnit, 
                             noteOnCommand, 
                             pitchArray[i], 
                             velocityArray[i], 
                             0);

        // sleep for a second
        sleep(1);

}
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:50:01.833

如果您只是想按顺序播放 MIDI 音符，那么使用内置的[MusicPlayer](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicPlayerServices_Reference/Reference/reference.html)可能会比尝试从头开始创建类似的功能取得更多进展。它是一个非常灵活的框架，使开发人员能够即时创建多个[MusicTrack](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicTrack_Reference/Reference/reference.html#//apple_ref/doc/uid/TP40009332)和[MusicSequence](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicSequence_Reference/Reference/reference.html#//apple_ref/doc/uid/TP40009331)，更改音轨和音符属性，甚至保存一个 .mid 文件。端点可以是 midi 设备或使用 soundfonts 的 AUGraph。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T19:29:09.830

我相信 MusicDeviceMIDIEvent 中的最后一个参数是样本中的时间偏移。因此，如果您的采样率为 44.1k，那么您每秒有 44,100 个样本。这意味着要间隔一秒播放两个连续的音符，您将调用此方法 4 次。首先是时间：0，然后是音符，然后是时间：44,100，然后是音符。

# python - Django 在 POST 中使用查询参数

> ID：15923441
> 
> 赞同：0
> 
> 时间：2013-04-10T10:35:01.437
> 
> 标签：python, django, django-forms, django-views

我有一个视图，它应该在提交时向一群用户发送电子邮件。

我正在使用表单输入电子邮件内容，然后根据 URL 的查询参数将电子邮件从数据库发送给用户。

我这样做是因为用户是在单独的页面上选择的。
所以 url 看起来像`/sendmail/?users=18,21,32`. 因为我使用的是表单，所以我的视图继承自`FormView`和我的电子邮件代码在`form_valid`.

问题是我似乎无法从该函数访问查询参数。 `self.request.GET`是空`self.request.POST`的，只有表单字段值。

我认为我应该使用的方法是向`users`表单 (type `ModelMultipleChoiceField`) 添加一个隐藏字段，我从 url 查询中填充该字段。

问题是我无法弄清楚如何做到这一点。我尝试像这样重新实现`get_initial`，但它似乎没有做任何事情：

```
def get_initial(self):
    if 'users' in self.request.GET:
        users = self.request.GET['users'].split(',')
        return {'users': User.objects.filter(pk__in=users)} 
```

这是正确的方法，还是有更好的方法？如果方法是正确的，那么我做错了什么？

我使用以下定义隐藏该字段：

```
users = forms.ModelMultipleChoiceField(queryset=User.objects.all(), widget=forms.MultipleHiddenInput(),
                                       required=False) 
```

**编辑：** 更多的实验，如果我不隐藏`users`表单字段，它似乎可以工作。所以看起来初始数据没有填充到隐藏字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:40:26.670

使用此模式获取获取参数，它将处理不存在的参数。

```
/myview/?users=18,21,32

def myview(request):
    users = request.GET.get('users', None)
    if users:
        user_ids = users.split(',') 
```

如果参数不存在，你一定是用错误的方式调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:41:36.107

您可以尝试将[`request.REQUEST`](https://docs.djangoproject.com/en/1.5/ref/request-response/#django.http.HttpRequest.REQUEST)数据作为数据传递到表单中，而不是`request.POST`-`REQUEST`包括来自 POST 和 GET 的数据。

# wpf - 使用 WPF 创建类似于 MS Word 插入表的行为

> ID：15923443
> 
> 赞同：0
> 
> 时间：2013-04-10T10:35:11.703
> 
> 标签：wpf, xaml, templates, styles

插入表格时，我试图获得与 MS Word 中相同的行为。当我在矩形网格上移动时，我希望矩形变成蓝色，显示表格应该有多少列和行。

我改编了我找到的一个示例，但是当我希望当前矩形左侧和上方的所有矩形都更改填充时，我遇到了困难。

在我的 ViewModel 中，我创建了一个包含 8 个项目的集合：

```
ObservableCollection<BoardTileViewModel> board = new ObservableCollection<BoardTileViewModel>();
for (int i = 0; i < 8; i++)
{
    board.Add(new BoardTileViewModel(this, i % 4, i / 4));
}
this.Board = new ReadOnlyObservableCollection<BoardTileViewModel>(board); 
```

如您所见，BoardTileViewModel 通过构造函数获取 X/Y 坐标，因此可以用它来做一些事情。我对 ItemsControl 使用以下样式：

```
<ResourceDictionary
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style x:Key="TileButtonStyle" TargetType="Button">
        <Setter Property="Margin" Value="0 0 1 1" />
        <Setter Property="Width" Value="30" />
        <Setter Property="Height" Value="30" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Rectangle x:Name="PART_Rectangle" Fill="White" Stroke="Black"></Rectangle>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="PART_Rectangle" Property="Fill" Value="RoyalBlue" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="BoardItemsControlStyle" TargetType="ItemsControl">
        <Setter Property="Width" Value="124" />
        <Setter Property="Height" Value="62" />
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Button Style="{StaticResource TileButtonStyle}" Command="{Binding Check}" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <WrapPanel />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

有没有人建议如何设置鼠标所在矩形左侧和上方的所有矩形的填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:07:38.510

我成功了！

如果有人想知道解决方案，这就是我所做的：

1.  I have moved the styles from the resourcedictionary to the Window (to be able to add a MouseEnter-event).
2.  I implemented an INotifyPropertyChanged in the BoardTileViewModel and added a Fill property. I bound the Fill property to the Fill of the Rectangle.
3.  In the MouseEnter-event I get for the other rectangles and set their Fill property.

This made the Trigger useless, so I removed it from the ControlTemplate.

# database - 将数据传递给映射器

> ID：15923444
> 
> 赞同：0
> 
> 时间：2013-04-10T10:35:15.267
> 
> 标签：database, hadoop

我有一些未启用 JDBC 的数据库，但我能够从这些数据库中检索数据。我想将此数据传递给 mapreduce 程序中的映射器。我试图从“mapreduce.lib.DB”包中的源文件中找出一些东西，但我觉得缺少一些东西。谁能告诉我如何将数据库的输出传递给映射器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:50:25.303

一种简单的方法是将数据库中的数据批量导出到文件中，将文件放入 HDFS，然后使用[FileInputFormat](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/lib/input/FileInputFormat.html)读取 HDFS 中的文件并进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:50:18.293

我认为你需要[Sqoop](http://sqoop.apache.org/)。

首先，您必须使用`sqoop import`命令将数据从 rdbms 传输到 hdfs。

稍后您将编写一个 mapreduce 程序，该程序将输入路径作为方法的参数`setInputpath`。

# amazon-ec2 - 在 Amazon EC2 上调整根分区大小是否需要 resize2fs？

> ID：15923446
> 
> 赞同：2
> 
> 时间：2013-04-10T10:35:20.390
> 
> 标签：amazon-ec2

我一直在关注[这里](http://pinehead.tv/linux/resizing-root-partition-on-linux-in-amazon-ec2/)和[这里](http://alexharvey.eu/etc/amazon-cloud/resizing-devsda1-on-amazon-ec2/)的教程来调整 ec2 实例根分区的大小。

教程说在新的附加卷实例启动后通过运行命令 resize2fs 来调整根分区的大小以声明可用大小，但我可以在不运行 resize2fs 的情况下看到调整大小的根分区。

调整大小之前

```
已使用的文件系统大小可用使用百分比已安装在
/dev/xvda1 7.9G 876M 6.7G 12% /
udev 819M 8.0K 819M 1% /dev
tmpfs 331M 164K 331M 1%/运行
无 5.0M 0 5.0M 0% /运行/锁定
无 827M 0 827M 0%/运行/shm

```

调整大小但未运行 resize2fs 后

```
已使用的文件系统大小可用使用百分比已安装在
/dev/xvda1 148G 888M 140G 1% /
udev 819M 8.0K 819M 1% /dev
tmpfs 331M 164K 331M 1%/运行
无 5.0M 0 5.0M 0% /运行/锁定
无 827M 0 827M 0%/运行/shm

```

那么，这一步是自动完成的，还是我在这里遗漏了什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:09:41.227

这取决于您正在运行的发行版。如果您使用的是最新的 Ubuntu 映像，则会在重新启动时自动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T10:52:51.930

我使用的是 linux AMI，我在创建实例时创建了 20GB 的大小。我在下面运行命令，它在不重新启动的情况下更新了大小。

```
sudo resize2fs /dev/xvda1 
```

调用命令后...

```
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvda1       20G  1.1G   19G   6% /
tmpfs           829M     0  829M   0% /dev/shm 
```

# android - 使用全屏模式时检测软输入可见性和高度

> ID：15923447
> 
> 赞同：5
> 
> 时间：2013-04-10T10:35:24.377
> 
> 标签：android, android-layout

我已经阅读了这个问题的多个帖子，解决方案是使用`OnGlobalLayoutListener`. 这里的问题是我的应用程序在清单中声明了以下内容：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

所以输入模式调整不起作用，我不能使用`OnGlobalLayoutListener`

如何获取软输入可见/消失的事件，我还需要获取输入的高度以调整我当前的布局`bottomMargin`。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T03:15:45.907

我不知道你是如何使用`OnGlobalLayoutListener`的，但它在我下面的代码中运行良好：

```
 final View activityRootView = findViewById(R.id.container);
        final ViewTreeObserver observer = activityRootView
                .getViewTreeObserver();
        observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {

                Rect r = new Rect();
                // r will be populated with the coordinates of your view
                // that area still visible.
                activityRootView.getWindowVisibleDisplayFrame(r);
                int heightDiff = activityRootView.getRootView().getHeight()
                        - (r.bottom - r.top);
                Toast.makeText(TestActivity.this, String.valueOf(heightDiff),
                        Toast.LENGTH_SHORT).show();

            }
        }); 
```

上面的代码在`onResume()`我的 TestActivity 的主题中`@android:style/Theme.NoTitleBar.Fullscreen`

视图的布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/textview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="aaa" />

</LinearLayout> 
```

清单中的活动配置：

```
<activity
    android:name=".ui.activity.TestActivity"
    android:configChanges="orientation|keyboardHidden|screenSize"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T12:34:47.443

尝试这个：

布局：

```
<RelativeLayoutxmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <MyView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</RelativeLayout> 
```

然后实现 MyView

```
public class MyView extends View
{
     public static int ScreenHeight;

     @Override
     public function onDraw(Canvas canvas){
          if(ScreenHeight != canvas.getHeight()){
              // this is your event
          } 
          ScreenHeight = canvas.getHeight();

     }
} 
```

现在`ScreenHeight`就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T12:38:00.697

我用它来检测softInput的可见性。尝试这个 ：

```
public boolean isKeyBoardVisible;
    int previousHeightDiffrence = 0;

    public void checkKeyboardHeight(final View parentLayout) {

        parentLayout.getViewTreeObserver().addOnGlobalLayoutListener(
                new ViewTreeObserver.OnGlobalLayoutListener() {

                    @Override
                    public void onGlobalLayout() {

                        Rect r = new Rect();
                        parentLayout.getWindowVisibleDisplayFrame(r);

                        int screenHeight = parentLayout.getRootView()
                                .getHeight();
                        int heightDifference = screenHeight - (r.bottom);

                        if (previousHeightDiffrence - heightDifference > 50) {

                            // Keyboard is not visible
                        }
                        if (previousHeightDiffrence - heightDifference < -50) {

                            // Keyboard Visible
                        }

                        previousHeightDiffrence = heightDifference;
                        if (heightDifference > 100) {

                            isKeyBoardVisible = true;

                        } else {

                            isKeyBoardVisible = false;

                        }

                    }
                });

    } 
```

这里 parentLayout 是我活动的最顶层布局，如果键盘是可见的，heightDifference 是我的键盘高度.....

# javascript - 在进度条中传递页面加载时间

> ID：15923449
> 
> 赞同：0
> 
> 时间：2013-04-10T10:35:27.300
> 
> 标签：javascript, jquery, progress-bar, page-load-time

我的页面中有进度条。它应该显示，直到页面完全加载。所以我希望我的进度条显示在页面上等于页面加载时间。所以我尝试获取页面加载时间并将该时间值传递给显示进度条。我已经完成编码

```
<script type="text/javascript">
    var startTime = new Date().getTime();
    var loadTime;
    function pageload() {
        var endTime = new Date().getTime();
        loadTime = endTime - startTime;
        // alert(loadTime);
    }
    window.onload = function () { pageload(); }
    jQuery(document).ready(function () {

        jQuery('#container').showLoading(
             {
                 'afterShow':
                function () {
                    var a = loadTime;

                    setTimeout("jQuery('#container').hideLoading()", a);

                }
             });
    });
</script> 
```

在此更改之后它起作用了！

```
<script type="text/javascript">
    var startTime = new Date().getTime();
    var loadTime;
    function pageload() {
        var endTime = new Date().getTime();
        loadTime = endTime - startTime;
        setTimeout("jQuery('#container').hideLoading()", loadTime);
        // alert(loadTime);
    }
    window.onload = function () { pageload(); }
    jQuery(document).ready(function () {

        jQuery('#container').showLoading();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:38:13.893

我可能是错的，但我认为你只是想把它隐藏起来`onLoad`，就像这样：

```
jQuery(document).onload(function(){
    jQuery('#container').hideLoading();
}); 
```

* * *

**或**将其放入您的`pageload()`函数中：

```
function pageload() {
    var endTime = new Date().getTime();
    loadTime = endTime - startTime;
    jQuery('#container').hideLoading();
} 
```

# ruby - Ruby 中是否有任何类型的日历日期选择器？

> ID：15923453
> 
> 赞同：1
> 
> 时间：2013-04-10T10:35:46.263
> 
> 标签：ruby

大家好，感谢您的宝贵时间。

我正在尝试创建一个用户可能指向的日历视图并单击日期以自动填充我的 html 中的日期字段。

如果您访问 Hawaiian Airlines 网站并单击出发日期或返回日期，您可以看到我正在寻找的示例。链接在这里。

[http://www.hawaiianairlines.com/](http://www.hawaiianairlines.com/)

我做了研究，发现了一个非常有用的 calender_date_select 来模仿它。

[http://www.rubyinside.com/calendar-date-select-a-lightweight-prototype-based-datetime-picker-for-rails-developers-573.html](http://www.rubyinside.com/calendar-date-select-a-lightweight-prototype-based-datetime-picker-for-rails-developers-573.html)

如果您能告诉我在哪里可以找到其他解释或安装此类日历日期选择器的网站，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:38:18.447

[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)是常用的日期选择器

# android - 如何获取 setOnCheckedChangeListener 以在 Android 中动态添加多个切换按钮

> ID：15923455
> 
> 赞同：3
> 
> 时间：2013-04-10T10:35:59.520
> 
> 标签：android, layout, android-activity, togglebutton

我已成功`togglebutton`在`activity`. 但我被困在处理`setOnCheckedChangeListener`每个`togglebutton`.

我创建了演示代码片段。

```
linearLayout = (LinearLayout) findViewById(R.id.linearLayout);

        for (int i = 0; i < 6; i++) {

            el = new LinearLayout(this);
            el.setOrientation(LinearLayout.HORIZONTAL);

            LinearLayout.LayoutParams emailLinearParams = new LinearLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

            el.setLayoutParams(emailLinearParams);
            el.setPadding(5, 5, 5, 5);

            LinearLayout.LayoutParams emailTxtParams = new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT, 0.9f);

            TextView emailTxt = new TextView(this);
            emailTxt.setText("demo");
            emailTxt.setLayoutParams(emailTxtParams);
            emailTxt.setGravity(Gravity.CENTER_VERTICAL);

            el.addView(emailTxt);

            ToggleButton toggleEmailBtn = new ToggleButton(this);

            LinearLayout.LayoutParams emailToggleBtnParams = new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 0.1f);

            toggleEmailBtn.setLayoutParams(emailToggleBtnParams);

            el.addView(toggleEmailBtn);

            linearLayout.addView(el);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:35:03.140

尝试并解决了很好的答案:)

```
ToggleButton tglBtn[]; 
```

在`onCreate()`

```
tglBtn = new ToggleButton[6];

   for (int i = 0; i < 6; i++) {

            el = new LinearLayout(this);
            el.setOrientation(LinearLayout.HORIZONTAL);

            LinearLayout.LayoutParams emailLinearParams = new LinearLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

            el.setLayoutParams(emailLinearParams);
            el.setPadding(5, 5, 5, 5);

            LinearLayout.LayoutParams emailTxtParams = new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT, 0.9f);

            TextView emailTxt = new TextView(this);
            emailTxt.setText("demo");
            emailTxt.setLayoutParams(emailTxtParams);
            emailTxt.setGravity(Gravity.CENTER_VERTICAL);

            el.addView(emailTxt);

            tglBtn[i] = new ToggleButton(this);

            LinearLayout.LayoutParams emailToggleBtnParams = new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 0.1f);

            tglBtn[i].setLayoutParams(emailToggleBtnParams);

            el.addView(tglBtn[i]);

            linearLayout.addView(el);

            tglBtn[i]
                    .setOnCheckedChangeListener(handleOnClick(
                            tglBtn[i], i));

        } 
```

使用方法`onclick`处理`togglebuttons`

```
CompoundButton.OnCheckedChangeListener handleOnClick(
            final ToggleButton button, final int id) {
        return new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton cbtn, boolean isCheck) {
                    Log.d(TAG, "clicked "+id);
            }
        };
    } 
```

# qml - BB10 中的事件处理

> ID：15923457
> 
> 赞同：1
> 
> 时间：2013-04-10T10:36:10.707
> 
> 标签：qml, blackberry-10

我正在开发一个 BB10 应用程序，其中包含一个登录屏幕，询问用户的用户名和密码。之后，用户按下提交按钮。

我使用 QML 设计了 ​​UI

我想捕获用户提供的信息（用户名和密码）并将其发送到 Web 服务进行验证。

我想在 C++ 类中捕获信息。

谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:03:45.803

### 回答您问题的第一部分：
*“我想捕获用户提供的信息”*

在你的 qml

```
Button {
    text: "Login"
    onClicked: {
        myQMLObj.login(userTextField.text,passTextField.text);
    }
} 
```

以你的名义here.hpp

```
public:
      // "Q_INVOKABLE" allows this function to be called from qml
      Q_INVOKABLE void login(QString user,QString pass); 
```

以你的名义here.cpp

```
namehere::namehere(bb::cascades::Application *app)
: QObject(app)
{
    QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this);

    // expose C++ object in QML as an variable (so you can fire your login function
    qml->setContextProperty("myQMLObj", this);

    AbstractPane *root = qml->createRootObject<AbstractPane>();
    app->setScene(root);
}

void namehere::login(QString user, QString pass) {
    // Handle the user name & pass here
} 
```

希望这可以帮助您至少从用户那里捕获数据。
[之后，您可以开始将其发送到 Web 服务](http://www.makina-corpus.org/blog/access-json-webservice-qt-c)

[刚刚找到这个例子，它比我解释得更好:)](http://bbcascadescode.tumblr.com/post/29294239402/running-c-function-from-qml-trivial-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:01:38.290

首先编写一个包含 QNetworkAccessManager、QNetworkReply 和 JsonDataAccess 的类

```
#include <QObject>
#include <QNetworkAccessManager>
#include <QNetworkRequest>
#include <QNetworkReply>
#include <bb/data/JsonDataAccess>
#include <bb/system/SystemToast>

using namespace bb::data;
using namespace bb::system;

class Member : public QObject
{
    Q_OBJECT

public:
    Member();
    virtual ~Member();

    Q_INVOKABLE void login(QString username, QString password);

private:
    QNetworkAccessManager *networkManager;
    QString username;
    QString password;

signals:
    void serverReply();

private slots:
    void replyFinished(QNetworkReply*);
}; 
```

然后，将类加载到 QML

```
qmlRegisterType<Member>("com.library", 1, 0, "Member"); 
```

通过添加将库包导入QML

```
import com.library 1.0 
```

然后在 QML 的 attachObjects 处初始化成员类。您可以调用登录方法，因为它是 Q_INVOKABLE 形式。希望这有帮助。

# layout - Android 布局草稿

> ID：15923459
> 
> 赞同：1
> 
> 时间：2013-04-10T10:36:12.107
> 
> 标签：layout, draw, wireframe, mockups, mockup-tool

是否有程序或网络应用程序可用于在开发应用程序之前从应用程序中绘制每个布局的草稿？

我不是在寻找可以生成 xml 布局的东西，而只是为我的应用程序的每个窗口绘制草图的简单工具

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:40:52.860

你在谈论`mockup`和`wire-framing`工具。有很多不同的价格和质量，这里有一些：

*   [模型制作者](http://mockupbuilder.com/)
*   [框框](http://framebox.org/)
*   [笨拙的](http://www.lumzy.com/)

我不能保证其中任何一个，但它们应该提供您正在寻找的东西，尽管笔和纸可能很容易胜过它们！;)

# jquery - 悬停时，将导航图标从当前页面项目移动到悬停

> ID：15923463
> 
> 赞同：0
> 
> 时间：2013-04-10T10:36:24.183
> 
> 标签：jquery, css, navigation, hover, css-transitions

我目前正在创建导航。到目前为止，我有一个悬停/当前页面项目的 bg-image，它只出现在悬停/站点处于活动状态时。

但现在，我想推进它并为其添加一个漂亮的过渡效果。这个想法是将当前页面项目的图标移向悬停元素。

![在此处输入图像描述](https://i.stack.imgur.com/ZUfUz.jpg)

因此，如果您正在开始并将鼠标悬停在“Vertrieb”上，则文本上方的指针应移动到 Vertrieb。

如果您在“referenzen”并转向“博客”或“über mich”，它应该向它移动。

![在此处输入图像描述](https://i.stack.imgur.com/cMtRt.jpg)

有任何想法吗？我已经用文本转换做了很多导航，但这超出了我的技能水平。

PS：这是标记：

```
<ul class="nav">
    <li><a href="index.html" title="Start" class="current_page_item">Start</a></li>
    <li><a href="about.html" title="Über mich">Über mich</a></li>
    <li><a href="philosophie.html" title="Philosophie">Philosophie</a></li>
    <li><a href="referenzen.html" title="Referenzen">Referenzen</a></li>
    <li><a href="vertrieb.html" title="Vertrieb">Vertrieb</a></li>
    <li><a href="coaching.html" title="Coaching">Coaching</a></li>
    <li><a href="kontakt.html" title="Kontakt">Kontakt</a></li>
    <li><a href="blog.html" title="Blog">Blog</a></li>
</ul>

ul.nav { 
    position: relative; 
    float: right;
    margin: 28px 10px 0 0;
    }   

ul.nav li { 
    padding: 0 20px 0 0; 
    float: left; 
    list-style: none;
    }

ul.nav li a { 
    display: block; 
    padding: 30px 0 0 0;
    font-size: 0.9375em;
    -webkit-transition-property:color, text, background; 
    -webkit-transition-duration: 0.25s, 0.25s, 0.25s; 
    -webkit-transition-timing-function: linear, ease-in; 
    -moz-transition-property:color, text; 
    -moz-transition-duration:0.25s; 
    -moz-transition-timing-function: linear, ease-in;  
    -o-transition-property:color, text; 
    -o-transition-duration:0.25s; 
    -o-transition-timing-function: linear, ease-in;
    }

ul.nav li a:hover,
ul.nav li a:focus,
ul.nav li a.current_page_item { 
    color: #e86228; 
    background: url(images/nav_pointer.png) no-repeat top;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T07:15:14.267

从评论中转录；

[JSfiddle（jQuery 示例）](http://jsfiddle.net/Allendar/CwnFt)

**CSS**

```
* {
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}
#menu_wrap {
    border: 1px dotted blue;
    padding: 5px;
}
#nav {
    list-style-type: none;
    padding: 0px;
    margin: 0px;
    position: relative;
}
#nav li {
    display: inline-block;
    margin-right: 15px;
}
#nav li:last-child {
    margin-right: 0px;
}
#nav li a {
    color: #444;
    text-decoration: none;
}
#arrow {
    background-image: url('http://www.jukti.com/wp-content/uploads/2011/07/google_pointer_map.png');
    background-size: 25px 35px;
    height: 35px;
    width: 25px;
    margin-bottom: 10px;
} 
```

**JavaScript**

```
$(document).ready(function() {
    $('#nav li').mouseover(function() {
        var pos = $(this)[0].offsetLeft;
        pos = pos + Math.floor((($(this).css('width').replace('px', '') * 1) / 2));
        pos = pos - Math.floor(($('#arrow').css('width').replace('px', '') * 1) / 2)

        // Reset all colors
        $('#nav li a').css('color', '#444');

        // Animte the arrow
        $('#arrow').animate({
            'margin-left': pos + 'px'
        }, 250);

        // Change the color
        $('a', this).css('color', 'orange');
    });
}); 
```

# javascript - 内容区域在Phonegap，android 2.2中不滚动

> ID：15923468
> 
> 赞同：1
> 
> 时间：2013-04-10T10:36:40.043
> 
> 标签：javascript, android, jquery, html, cordova

我正在使用 1.8.1 版开发一个 android Phonegap 应用程序。

**我没有使用 JQM**，也**不想**在这个项目中使用 i-scroll 。

我将页面分为三个部分：（1）页眉，（2）内容，（3）页脚。

我希望我的页眉和页脚保持固定并滚动内容区域（如有必要）。

当我在 android 4.2 中运行我的应用程序时，一切正常 - 页眉和页脚固定，内容区域滚动。

但是，如果我将应用程序运行到 android 2.2 中……就会出现问题。页眉和页脚保持固定，但我的内容区域没有滚动。

你有什么想法，为什么会有这种差异？有什么办法（比如使用 css3 或 html5 或 javascript）我可以解决这个问题吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T08:44:05.263

溢出：自动；和溢出：滚动；较旧的 android 版本不支持。不知道4.2。[我在这里](http://chris-barr.com/2010/05/scrolling_a_overflowauto_element_on_a_touch_screen_device/)为这个错误建立了一个解决方法，但它不像在 iOS 上那样流畅。

# java - Spring MVC + Jquery Ajax 显示 406 错误？

> ID：15923473
> 
> 赞同：0
> 
> 时间：2013-04-10T10:37:03.977
> 
> 标签：java, json, spring, jquery, spring-mvc

我搜索了很多，找不到解决方案。类似的线程也在我们的堆栈溢出中。但是没有用。所以我创建了一个新线程。

我的 JSP 是，

```
<boby>
<% System.out.println("request.getContextPath() : "+request.getContextPath()); %>
<h1>Spring_JsonTest Example</h1>
    <table>
        <tr><td colspan="2"><div id="error" class="error"></div></td></tr>
        <tr><td>Enter your name : </td><td> <input type="text" id="name"><br/></td></tr>
        <tr><td>Your Education : </td><td> <input type="text" id="education"><br/></td></tr>
        <tr><td colspan="2"><input type="button" value="Add Users" onclick="doAjaxPost()"><br/></td></tr>
        <tr><td colspan="2"><div id="info" class="success"></div></td></tr>
    </table>    
</body> 
```

我的 Jquery 是，

```
function doAjaxPost() {  
      // get the form values  
      var name = $('#name').val();
      var education = $('#education').val();

      $.ajax({  
        type: "POST",  
        url: contexPath + "/AddUser.html",  
        data: "name=" + name + "&education=" + education,
        success: function(response){
          // we have the response 
          if(response.status == "SUCCESS"){
          userInfo = "<ol>";
          for( i =0 ; i < response.result.length ; i++){
              userInfo += "<br><li><b>Name</b> : " + response.result[i].name + 
              ";<b> Education</b> : " + response.result[i].education;
          }
          userInfo += "</ol>";
          $('#info').html("User has been added to the list successfully. " + userInfo);
          $('#name').val('');
              $('#education').val('');
              $('#error').hide('slow');
              $('#info').show('slow');
          }else{
          errorInfo = "";
          alert("Success response : "+response)
          for( i =0 ; i < response.result.length ; i++){
              errorInfo += "<br>" + (i + 1) +". " + response.result[i].code;
          }
          $('#error').html("Please correct following errors: " + errorInfo);
          $('#info').hide('slow');
          $('#error').show('slow');
          }       
        },  
        error: function(xhr, ajaxOptions, thrownError)
            alert("status :"+xhr.status+"\nthrownError : "+thrownError+"\nresponseText : "+xhr.responseText);
            alert('Error: ' +xhr.description);  
        } 
      });  
    } 
```

我的控制器是，

```
@Controller
public class UserController {
    private List<User> userList = new ArrayList<User>(); 

    @RequestMapping(value="/AddUser.html",method=RequestMethod.POST)
    public @ResponseBody JsonResponse addUser(@ModelAttribute(value="user") User user, BindingResult result ){
        System.out.println("Add user POST method");
        JsonResponse res = new JsonResponse();
        ValidationUtils.rejectIfEmpty(result, "name", "Name can not be empty.");
        ValidationUtils.rejectIfEmpty(result, "education", "Education not be empty");
        if(!result.hasErrors()){
            userList.add(user);
            res.setStatus("SUCCESS");
            res.setResult(userList);
        }else{
            res.setStatus("FAIL");
            res.setResult(result.getAllErrors());
        }

        return res;
    }

} 
```

我的 JsonResponse.java 是，

```
package com.tps.jsonTest.service;

public class JsonResponse {
    private String status = null;
    private Object result = null;
    public String getStatus() {
        return status;
    }
    public void setStatus(String status) {
        this.status = status;
    }
    public Object getResult() {
        return result;
    }
    public void setResult(Object result) {
        System.out.println("Result : "+result.toString());
        this.result = result;
    }

} 
```

我的 User.java 是，

```
package com.tps.jsonTest.service;

public class User {

    private String name = null;
    private String education = null;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getEducation() {
        return education;
    }
    public void setEducation(String education) {
        this.education = education;
    }

} 
```

在我的控制台中，

```
Add user POST method
Name : Anand
Education : B.E
Result : [com.tps.jsonTest.service.User@df2940] 
```

我使用的 Jar 文件是，

```
commons-logging-1.1.1.jar
jackson-core-asl-1.9.12.jar
jackson-mapper-asl-1.9.12.jar
log4j-1.2.9.jar
servlet-api-2.4.jar
spring-aop-3.2.2.RELEASE.jar
spring-beans-3.2.2.RELEASE.jar
spring-context-3.2.2.RELEASE.jar
spring-context-support-3.2.2.RELEASE.jar
spring-core-3.2.2.RELEASE.jar
spring-expression-3.2.2.RELEASE.jar
spring-web-3.2.2.RELEASE.jar
spring-webmvc-3.2.2.RELEASE.jar 
```

在我的浏览器中，错误是，

![在此处输入图像描述](https://i.stack.imgur.com/tD8a7.png)

我无法使用 jquery 解析对象，并且它在错误上移动。希望我们的堆栈用户能帮助我。

好的答案绝对值得赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-07T17:27:19.817

这是 Spring 3.2.2 或 3.2.3 或 3.2.4 中的问题。我在 Spring 3.0.0 和 Spring 3.1.4 中尝试了相同的示例，它工作正常。所以更换弹簧罐并试一试。

问候马杜

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T01:56:00.603

我遇到过同样的问题。我正在使用带有 UrlBasedViewResolver 的 Spring 3.2。

对于所有 ajax 调用，它给出了 406。我尝试更改标题，所有上述解决方案的数据类型，但没有任何效果。然后我发现杰克逊罐子不见了。我添加了 2 个以下罐子，它开始对我很好。

jackson-core-asl-1.9.4.jar jackson-mapper-asl-1.9.4.jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T19:38:43.173

您的问题是请求不接受响应的内容类型。

您的 ajax 调用未指定`dataType`，因此 jQuery 根据 url 扩展推断响应应该是 content type `text/html`，但是您的服务器不知道如何将 pojo 转换为 html！

解决方案应该是简单地添加`dataType='json'`到您的 ajax 调用中。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T03:32:14.153

既然你做了一个`POST`，那么你的数据不应该是查询字符串格式。`data`而是为参数传递一个 json 对象。

```
data:{name: name, 
      education: education} 
```

# search - 弹性搜索 - search_analyzer vs index_analyzer

> ID：15923480
> 
> 赞同：47
> 
> 时间：2013-04-10T10:37:26.580
> 
> 标签：search, elasticsearch, analyzer

我正在查看 解释 ElasticSearch 分析器的[http://euphonious-intuition.com/2012/08/more-complicated-mapping-in-elasticsearch/ 。](http://euphonious-intuition.com/2012/08/more-complicated-mapping-in-elasticsearch/)

我不明白有关拥有不同搜索和索引分析器的部分。自定义映射的第二个示例如下：
-> 索引分析器是一个 edgeNgram
-> 搜索分析器是：

```
"full_name":{
    "filter":[
        "standard",
        "lowercase",
        "asciifolding"
    ],
    "type":"custom",
    "tokenizer":"standard"
} 
```

如果我们希望查询“Race”由于 edgeNgram 而不会返回像 * *ra* *pport 和 * *rac* *ial 这样的结果，为什么首先要使用 edgeNgram 来索引它呢？

请举例说明不同的分析器是有用的。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-04-10T17:47:53.100

您通常在索引时和查询时都有相似的分析链。相似并不意味着完全相同，但通常索引文档的方式反映了查询它们的方式。

不过，ngrams 示例非常适合，因为它是您在索引和查询时使用不同分析器的主要原因之一。

对于部分匹配，您使用边缘 ngram 进行索引，因此“elasticsearch”变为（使用 mingram 3 和 maxgram 20）：

“ela”、“elas”、“elast”、“elasti”、“elastic”、“elastics”、“elasticse”、“elasticsea”、“elasticsear”、“elasticsearc”和“elasticsearch”

现在让我们查询创建的字段。如果我们查询“弹性”一词，就会有一个匹配项，我们会得到预期的结果。考虑到我们索引的内容，我们基本上使我们在上面所说的部分匹配成为完全匹配。也不需要将 ngrams 应用于查询。如果我们这样做，我们将查询以下所有术语：

“ela”、“elas”、“elast”、“elasti”和“弹性”

这会使查询方式更加复杂，也会导致得到奇怪的结果。假设您在另一个文档的同一字段中索引术语“elapsed”。您将拥有以下 ngram：

“ela”、“elap”、“elaps”、“elapse”、“elapsed”

如果您搜索“elastic”并对查询进行 ngram，则术语“ela”也将与第二个文档匹配，因此即使没有任何术语包含您的整个“弹性”术语，您也会将其与第一个文档一起取回正在寻找。

我建议您看一下[分析 api](http://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html)，以使用不同的分析器及其不同的结果。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-13T21:52:37.287

要参考[有关索引与搜索分析器的官方文档](http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/_controlling_analysis.html)：

> 有时，在索引和搜索时使用不同的分析器是有意义的。例如，在索引时，我们可能想要索引同义词，例如，对于每次出现的 quick 我们也索引 fast、rapid 和 speedy。但是在搜索时，我们不需要搜索所有这些同义词。相反，我们可以只查找用户输入的单个单词，无论是 quick、fast、rapid 还是 speedy。
> 
> 为了实现这种区分，Elasticsearch 还支持 index_analyzer 和 search_analyzer 参数，以及名为 default_index 和 default_search 的分析器。
> 
> 考虑到这些额外的参数，索引时的完整序列看起来像这样：
> 
> *   字段映射中定义的 index_analyzer，否则
> *   字段映射中定义的分析器，否则
> *   在文档的 _analyzer 字段中定义的分析器，否则
> *   类型的默认 index_analyzer，默认为
> *   类型的默认分析器，默认为
> *   索引设置中名为 default_index 的分析器，默认为
> *   索引设置中名为 default 的分析器，默认为
> *   在节点级别名为 default_index 的分析器，默认为
> *   在节点级别名为 default 的分析器，默认为
> *   标准分析仪
> 
> 在搜索时：
> 
> *   查询本身中定义的分析器，否则
> *   字段映射中定义的 search_analyzer，否则
> *   字段映射中定义的分析器，否则
> *   类型的默认 search_analyzer，默认为
> *   类型的默认分析器，默认为
> *   索引设置中名为 default_search 的分析器，默认为
> *   索引设置中名为 default 的分析器，默认为
> *   在节点级别名为 default_search 的分析器，默认为
> *   在节点级别名为 default 的分析器，默认为
> *   标准分析仪

# c++ - 将向量写入新的文本文件

> ID：15923482
> 
> 赞同：0
> 
> 时间：2013-04-10T10:37:29.827
> 
> 标签：c++, vector, text-files

我试图将数据从我的向量写入一个新的文本文件，在这个过程中创建新的文本文件，下面是我这样做的代码，但是我在 fs 之后遇到 << 错误，错误状态为 no operator "< <" 匹配这些操作数

```
struct Weather
{
  int a_data;
  int b_data;
  double c_data;
  double d_data;
  double e_data;
  double ans_temp;
};

ofstream &operator << (std::ofstream &f, Weather& obj)
{
f<<obj.a_data;///Etc ...code corresponding to dispaly parameters
return f;
};

int main () 
{
  using std::vector;
  using std::string;
  using std::getline;
  using std::cout;

  vector<Weather> data_weather;
  string line;
  ifstream myfile ("weatherdata.txt");

  if (myfile.is_open())
  {
    int count = 0;
    while (getline(myfile, line)) 
    {
      if (count > 6) 
      {
            int a, b;
            double c, d, e;
            std::istringstream buffer(line); 
            std::string e_as_string;
            if (buffer >> a >> b >> c >> d >> e_as_string) 
            {
                if (e_as_string == "---")
                {
                    sun = 0.0;
                }
                else
                {
                    std::istringstream buffer2(e_as_string);
                    if (!(buffer2 >> sun))
                    {
                        sun = 0.0;
                    }
                }
                Weather objName = {a, b, c, d, e};
                data_weather.push_back(objName); 
            }
      }
      count++;
    }
    myfile.close();

    for (auto it = data_weather.begin(); it != data_weather.end(); ++it)
    { 
        it->ans_temp = it->c_data + it->d_data /2;
    }
    for (auto it = data_weather.begin(); it != data_weather.end(); ++it)
    {

        std::cout << it->ans_temp << std::endl;
    }

    std::ofstream fs("newdata.txt");
            for(vector<Weather>::const_iterator it = data_weather.begin(); it != data_weather.end(); ++it) {
            fs << *it << '\n';
        }
  }
  else  

  cout << "unable to open file";

  scat::pause("\nPress <ENTER> to end the program.");

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:10:41.047

```
ofstream& operator<< (std::ofstream &f, const Weather& obj)
                                        ^^^^
{
    f<<obj.a_data;///Etc ...code corresponding to dispaly parameters
    return f;
}; 
```

或（不推荐）

```
for(vector<Weather>::iterator it = data_weather.begin(); it != data_weather.end(); ++it) 
                    ^^^^
{
     fs << *it << '\n';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:50:05.027

看来您还没有重载 << 运算符。

```
friend  ostream &operator << (std::ostream &f, Weather& obj)
    {
    f<<obj.a_data;  //Etc ...code corresponding to dispaly parameters
    return f;
    } 
```

# java - Spring MVC中通过Converter绑定对象

> ID：15923483
> 
> 赞同：5
> 
> 时间：2013-04-10T10:37:32.317
> 
> 标签：java, spring, spring-mvc, data-binding, type-conversion

我尝试在 Spring MVC 中使用 Converter 来组织表单绑定，就像这里描述的那样：[Spring form binding how to do it ? 无法将类型 [java.lang.String] 的值转换为所需的类型](https://stackoverflow.com/questions/9416987/spring-form-binding-how-to-do-it-cannot-convert-value-of-type-java-lang-strin)，但我错过了一些东西，并且绑定不起作用。

一些片段：

实体：

```
public class Building {
    private Long id;
    private String address;
    private BankAccount mainIncomeBankAccount;
// ... getters, setters, hashCode() and equals()
}

public class BankAccount {
    private Long id;
    private String accountNumber;
// ... getters, setters, hashCode() and equals()
} 
```

JSP：

```
<form:form commandName="building" action="" method="post">
    <form:input type="text" path="address"/>
    <form:select path="mainIncomeBankAccount">
        <form:option label="-- null value --" value="${null}"/>
        <form:options items="${bankAccounts}" itemLabel="accountNumber" itemValue="id"/>
    </form:select>
    <input type="submit"/>
</form:form> 
```

控制器：

```
@RequestMapping(value="/edit", method = RequestMethod.POST)
@PreAuthorize("hasRole('ROLE_PERMISSION')")
public String buildingAdd(@ModelAttribute("building") @Valid Building building, 
// I already try not to use @ModelAttribute, @Valid, and both. 
                            BindingResult result, 
                            HttpServletRequest request, 
                            Model uiModel, 
                            RedirectAttributes redirectModel) {
    // Some actions ...
} 
```

转换器：

```
@Component
public class BankAccountConverter implements Converter<String, BankAccount> {
    @Inject
    private BankAccountUtil bankAccountUtil;

    public BankAccount convert(String id) {
        return bankAccountUtil.findById(Long.getLong(id));
    }
} 
```

小服务程序配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc 
    http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.2.xsd">

<annotation-driven validator="validator"/>

<beans:bean id="validator"
 class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <beans:property name="validationMessageSource" ref="messageSource"/>
</beans:bean>

<context:component-scan base-package="com.mvc.web" />

<beans:bean id="conversionService"
 class="org.springframework.context.support.ConversionServiceFactoryBean">
    <beans:property name="converters">
        <beans:list>
            <beans:ref bean="bankAccountConverter"/>
        </beans:list>
    </beans:property>
</beans:bean> 
```

当我在控制器中提交表单`building.mainIncomeBankAccount`属性时，它总是为空。我也尝试使用 Formatter，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:01:00.823

您需要链接`<mvc:annotation-driven>`到您的转换服务：

```
<annotation-driven validator="validator" conversionService = "conversionService" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T12:06:48.873

您是否在没有第一个选项的情况下尝试了此操作：

```
<form:option label="-- null value --" value="${null}"/> 
```

也许你得到 null 因为那是你要发送的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T19:43:51.480

在您的 JSP 文件中尝试：

```
<form:form commandName="building" action="" method="post">
    <form:input type="text" path="address"/>
    <form:select path="mainIncomeBankAccount">
        <option label="-- null value --" selected disabled />
        <form:options items="${bankAccounts}" itemLabel="accountNumber" itemValue="id"/>
    </form:select>
    <input type="submit"/>
</form:form> 
```

# sql - SQL Server 传递变量而不是硬编码根元素名称

> ID：15923484
> 
> 赞同：5
> 
> 时间：2013-04-10T10:37:35.797
> 
> 标签：sql, sql-server

在 SQL Server 2008 中，我有查询

```
DECLARE @root AS varchar(20);
SET @root = 'Root';

DECLARE @element AS varchar(20);
SET @element = 'Element';

SELECT
    *
FROM 
    SomeTable
FOR XML PATH (@element), ROOT(@root); 
```

我想要的是传递一个变量而不是硬编码重复元素的名称和根。

当我执行查询时，它会引发此错误：

```
Msg 102, Level 15, State 1, Line 11
Incorrect syntax near '@element'. 
```

可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:45:54.160

阅读 SQL Server 的文档值得学习。如果您查看该[`FOR`子句](http://msdn.microsoft.com/en-us/library/ms173812.aspx)，您会看到：

```
| PATH [ ( 'ElementName' ) ] 
...
[ , ROOT [ ( 'RootName' ) ] ] 
```

如果您将此与其他文档进行比较，我将在这里用作示例[`BACKUP`](http://msdn.microsoft.com/en-us/library/ms186865.aspx)：

```
 { 'physical_device_name' | @physical_device_name_var }
...
FILE = { logical_file_name | @logical_file_name_var } 
| FILEGROUP = { logical_filegroup_name | @logical_filegroup_name_var } 
```

也就是说，当只传递一个字符串有效时，它们只会`''`在语法图中显示一个分隔值。当可以传递*变量*时，他们会明确地将其显示为选项（带有`@`名称）。当你必须提供一个*名字*而不是一个*字符串*时，他们会不加`''`标记地显示它

因此，正如@Devart 所说，唯一的可能性是使用动态 SQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T10:46:23.197

尝试动态 SQL -

```
DECLARE 
  @Root VARCHAR(20)
, @Element VARCHAR(20)
, @SQL NVARCHAR(500)

SELECT 
  @Root = 'Root'
, @Element = 'Element'
, @SQL = N'
 SELECT *
 FROM Labour.Absence a
 FOR XML PATH (''' + @Element + '''), ROOT(''' + @Root + ''')' 

PRINT @SQL

EXEC sp_executesql @SQL 
```

# joomla2.5 - JHTML 日期未在实时服务器上翻译

> ID：15923485
> 
> 赞同：0
> 
> 时间：2013-04-10T10:37:39.813
> 
> 标签：joomla2.5

我有一些代码使用自定义日期格式显示日期，如下所示：

```
echo JHtml::_('date',$price->date_from,JText::_('DATE_FORMAT_DM')); 
```

我的西班牙语文件 es-ES.ini 中列出了字符串 DATE_FORMAT_DM，如下所示：

```
DATE_FORMAT_DM="d M" 
```

我的问题是它不能将月份翻译成西班牙语 - 它可以在本地主机上运行，​​但不能在实时服务器上运行。

我完全不知道为什么会这样，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T16:17:25.447

好的，我找到了答案，基本上是语言文件加载有问题。我将主要 language.ini 文件中的日期格式字符串复制并粘贴到我的组件 ini 文件中，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:40:19.433

尝试使用以下内容：

```
echo date($price->date_from, JText::_('DATE_FORMAT_DM')); 
```

否则尝试使用您的方法，但没有语言字符串，因此：

```
echo JHtml::_('date',$price->date_from, 'd M'); 
```

希望这可以帮助

# php - 致命错误：无法重新声明 getteampoints()（之前在

> ID：15923488
> 
> 赞同：2
> 
> 时间：2013-04-10T10:37:50.177
> 
> 标签：php, function

得到了以下函数，并且之前没有在任何地方声明 getteampoints 值。试图遵循其他重新声明错误问题，但没有一个有效。我怎样才能解决这个问题？

```
function getTeamPoints($team)
    {
        $query = mysql_query("SELECT * FROM Team_comp WHERE t_id='$team'");
        $team_array = array();

        while($a = mysql_fetch_array($query))
        {
            $team_array = array(            'home_won'  =>  $a['home_win'],
                                            'home_draw' =>  $a['home_tie'],
                                            'home_lost' =>  $a['home_lost'],
                                            'away_won'  =>  $a['away_win'],
                                            'away_draw' =>  $a['away_tie'],
                                            'away_lost' =>  $a['away_lost'],
                                            'home_games'=>  $a['home_games'],
                                            'away_games'=>  $a['away_games']);
        }

        return $team_array;
    }

    function calculateTeamPoints($team, $type)
    {
        $teamPts = getTeamPoints($team);

        if($type == 'home')
        {
            $homem = $teamPts['home_games'];
            $homew = $teamPts['home_won'];
            $percent = ($homew * 100) / $homem;

            $remaining = $homem - $homew;

            $per = ($remaining * 100) / $homem;
            $percent += $per / 2;
        }
        elseif($type == 'away')
        {
            $homem = $teamPts['away_games'];
            $homew = $teamPts['away_won'];
            $percent = ($homew * 100) / $homem;

            $remaining = $homem - $homew ;

            $per = ($remaining * 100) / $homem;
            $percent += $per / 2;
        }

        return $percent;
    }

    function getpercent($hometeamid, $awayteamid)
    {
        $hometeampts = calculateTeamPoints($hometeamid, 'home');
        $awayteampts = calculateTeamPoints($awayteamid, 'away');

        $homepercent = floor(($hometeampts - $awayteampts) + 50);
        $awaypercent = 100-$homepercent;

    }

    //demo
    getpercent($hometeamid, $awayteamid);
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:40:20.180

将函数 getTeamPoints 放入 IF 条件中。

```
if(!function_exists('getTeamPoints')){ 
    function getTeamPoints()....

} 
```

也不可能多次声明 1 个函数！

如果您声明它超过 1 次，则必须编写不同的名称，如果您只包含该文件超过 1 次（这是错误的..）此 IF 函数存在检查将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:00:36.290

看到函数重新声明错误表明您第二次直接或间接地包含了同一个文件。

除了错误消息本身之外，这表明您的应用程序工作流程中存在问题。

最直接的解决方案是找出函数第二次加载的时间和原因，然后修复工作流程。

您可以通过以下方式了解更多信息：

```
if(!function_exists('getTeamPoints')) {
    throw new Exception('Function getTeamPoints() already declared.');
}

include('getteampoints.php'); 
```

抛出异常不仅可以让您稍后捕获它（不可能出现致命错误），而且它还会显示回溯，以便您可以更轻松地找到第二次执行文件的位置（以及原因）。

如果您不确定该结果，您也可以暂时否定条件并在第一次加载函数时抛出异常。

# jquery - 时区缩写 datetimepicker jquery

> ID：15923491
> 
> 赞同：0
> 
> 时间：2013-04-10T10:38:09.613
> 
> 标签：jquery, timezone, datetimepicker

我正在尝试创建一个 datetimepicker，它必须显示如下所示的日期，使用 trntrichardson 插件来使用 datetimepicker。

2013 年 4 月 2 日星期二 12:00 AM IST

我有以下代码，其中我将 UTC 时间存储为值并在文本中显示本地时间。但我无法添加本地时区缩写，如 IST、CST 等，如上面的日期所示。

请问有什么办法可以完成这项工作..我正在使用时刻插件来转换UTC和当地时间。

```
_createDateTime: function () {
            var min = this.element.attr("data-minRelDate"),
                max = this.element.attr("data-maxRelDate");

            this._Input = $("<input>")
                .addClass("datetime")
                .datetimepicker({
                    numberOfMonths: 2,
                    minDate: min,
                    maxDate: max,                    
                    dateFormat: $.datepicker.RFC_1123,
                    hourGrid: 2,
                    minuteGrid: 5,
                    timeFormat: "hh:mm TT z",
                    showTimeZone: true,                        
                    onSelect: $.proxy(this._change, this)         
                })                
                .appendTo(this._Wrapper);

_change: function(){
            var val = this._Input.datepicker("getDate");
            //var test = moment(val).format();

            //UTC to store value in server.
            this.element
                .attr("data-datetime", moment.utc(val)
                .format("LLLL"));

            //LocalTime To display.            
            this._Input.datepicker("setDate", new Date(moment(val).format("LLLL")));        
        } 
```

我已经转换为当地时间并给了 datetimepicker taht 日期，我需要做的就是在日期字符串中添加时区缩写....任何解决方法请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:03:58.077

[https://github.com/timrwood/moment/issues/162](https://github.com/timrwood/moment/issues/162)

按照链接它不可能在浏览器中获得该工作，所以如果你想使用像 Data.Prototype.Tostring 这样的功能，必须坚持使用 chrome

# actionscript-3 - 玩家上电后被收集后不会消失

> ID：15923492
> 
> 赞同：0
> 
> 时间：2013-04-10T10:38:10.253
> 
> 标签：actionscript-3

我正在制作一个简单的小行星风格，自上而下的射击游戏。游戏中有一个道具可以让玩家角色在短时间内对敌人的火力无敌。

一段时间后，加电效果应该会慢慢消失，但事实并非如此。一旦收集了加电，它就不会消失，使玩家立于不败之地。

我有两个与盾牌（加电）有关的课程。

**Game.as**：在 Game 函数中有一行说游戏开始时盾牌不可见（ship.shield.visible = false;）

同一行在我的 gameOver 函数中，它指出当游戏结束时，盾牌不应该出现。

**PowerUp.as**：这是整个 PowerUp.as 的代码

包裹{

```
import flash.display.MovieClip;
import flash.events.Event;

public class PowerUp extends MovieClip{

    var speed:Number;
    var type:Number;

    function PowerUp(){

        speed = 2;
        type = Math.floor(Math.random()*3+1);
        this.x = 650;
        this.y = Math.random()*200+50;
        addEventListener("enterFrame", enterFrame);

    }

    function enterFrame(e:Event){

        this.rotation -= 2;
        this.x -= speed;

        if(this.hitTestObject(Game.ship)){

            if(type == 1){
                Game.ship.takeDamage(Game.ship.health - Game.ship.maxHealth);
            }
            if(type == 2){
                for(var i in EnemyShip.list){
                    EnemyShip.list[i].takeDamage(1);
                }
            }
            if(type == 3){
                Game.ship.shield.visible = true;
                Game.ship.shield.alpha -= 0.05;
            if(Game.ship.shield.alpha == 0){
                Game.ship.shield.visible = false;
                Game.ship.shield.alpha = 1;
            }

            removeEventListener("enterFrame", enterFrame);
            stage.removeChild(this);

        }

        if(this.x < -30){

            removeEventListener("enterFrame", enterFrame);
            stage.removeChild(this);

        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:31:33.280

鉴于您正在尝试编写定时效果，您应该为“ship”enterframe 侦听器添加一个计数器。给它一个“无敌”计数器，该计数器将充满您选择的特定值的通电（type==3 one）。然后，在`takeDamage`函数中检查该伤害是否为正（您使用负伤害进行治疗 - 好吧恕我直言）并且无敌计数器大于 0，则不会受到任何伤害。并且每帧递减该计数器，一旦为 0，隐藏盾牌，使您的船再次易受攻击。

```
if(type == 3){
            Game.ship.shield.visible = true;
            Game.ship.shield.alpha = 1;
            Game.ship.invulnerability=50;
        } 
```

并进入侦听器以运送您的东西：

```
if (invulnerability>0) {
    invulnerability--;
    if (invulnerability==0) {
       shield.visible=false;
    } else if (invulnerability<20) {
       shield.alpha=invulnerability*0.05; // fade out if close to end
    }
} 
```

不要忘记在`invulnerability`某处使用 0 进行初始化。最好声明它，如果`ship`不是直接 a `MovieClip`，它是必需的，它可以在运行时获取属性。

# php - Symfony2 - 我如何直接在表单中验证类型？

> ID：15923495
> 
> 赞同：0
> 
> 时间：2013-04-10T10:38:12.170
> 
> 标签：php, forms, validation, symfony, constraints

我正在关注本教程[http://symfony.com/doc/current/book/forms.html#adding-validation](http://symfony.com/doc/current/book/forms.html#adding-validation)

并将其添加到我的表单中：

```
 $builder->add('email', null, array('label' =>  'userType.label.email','constraints' => array(new Email()))); 
```

这工作得很好。

但以下不起作用：

```
 $builder->add('phoneNumber', null, array('label' =>  'userType.label.phoneNumber','required'  => true,'constraints' => array(new Type(array('type' => 'numeric'))))); 
```

我如何检查输入是否是数字，就在表格中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:09:35.370

这样：

```
->add('phoneNumber', 'integer', array('label' =>  'userType.label.phoneNumber','required'  => true)); 
```

当您传递`null`时，它将使用您在模型中设置的类型，这只是传递第三个参数而不覆盖第二个参数的一种方式。

# jquery - 在 jquery 中使用变音符号（音调标记）自动完成

> ID：15923497
> 
> 赞同：1
> 
> 时间：2013-04-10T10:38:14.597
> 
> 标签：jquery, jquery-autocomplete

我正在尝试使用`jquery-autocomplete`我的母语（越南语 FWIW）中的音调标记。它对单词的精确匹配很有效。但是，我希望搜索功能忽略音调标记，即默认情况下搜索“Lâm”和“Lam”将匹配“Lâm”。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:52:27.157

我假设您对客户端数据使用自动完成功能。

*   有关替换拉丁字母变音符号的 javascript 代码，请参阅[此答案](https://stackoverflow.com/a/5960633/86072)。
*   在小部件方面，检查[`source`选项](http://api.jqueryui.com/autocomplete/#option-source)。

这是一个大纲（未经测试），可让您了解如何使用`source`函数：

```
// use the 'removeDiacritics' function from the quoted answer above
function removeDiacritics(str) {
   ...
}

var myData = ['aäa', 'bbb'];

$('input#autocomplete').autocomplete({
    source: function(request, responseCallback){
        // 'request' holds the value typed in the input,
        // remove diacritics from this value, and build a regexp :
        var reSearch  = new RegExp( removeDiacritics(request) );

        // build an array of matched values :
        var result = [];
        for (var i=0; i<myData.length; i++){
            // for each search candidate, run it through removeDiacritics,
            // and see if result macthes the (diacritics free) regexp :
            if ( reSearch.match( removeDiacritics(myData[i]) ) ){
                result.push(myData[i]);
            }
        }

        // call the callback with this array :
        responseCallback(result);
    }
}); 
```

# logging - 过滤 MSBuild 日志条目？

> ID：15923499
> 
> 赞同：1
> 
> 时间：2013-04-10T10:38:16.630
> 
> 标签：logging, filter, msbuild

启用 /filelogger 时 MSBuild 创建的文件很冗长，而且（恕我直言）不是很有用。具体来说，是否有命令行参数（或后处理器工具）用于：

1.  只识别错误？
2.  识别“编译”事件，例如 CSC 和 VSCompile
3.  同上链接器/图书馆员调用。

我正在移植具有大量相互关联的 .proj 文件的 .Net 微框架，并且更清楚地了解正在发生的事情是相当困难的。

我已经查看了 DependencyVisualizer、MSBuild Sidekick 和 MSBuildExplorer，但它们并不是特别有用——尽管如果它递归地探索项目，后者会很有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T00:23:06.177

最简洁的答案是不。然而，其他人已经走过了这条道路，尤其是 Wintellect 团队。有关实际显示编译器错误消息 (!) 的功能齐全的自定义记录器的讨论和代码，请参阅此博客

[http://www.wintellect.com/cs/blogs/jrobbins/archive/2008/01/17/smarter-logging-with-msbuild.aspx](http://www.wintellect.com/cs/blogs/jrobbins/archive/2008/01/17/smarter-logging-with-msbuild.aspx)

# wpf - WPF 为 StrokeDashArray 设置动画

> ID：15923506
> 
> 赞同：4
> 
> 时间：2013-04-10T10:38:32.963
> 
> 标签：wpf, animation

我正在尝试在 WPF 中创建动画，但我对放置所有内容的位置感到很困惑。我需要一个不断增长的圆圈，就像画自己一样。

为此，我有一个设计精美的圆圈（一个描边的圆圈，下面有一个模糊的描边圆圈）然后我有另一个带有 StrokeDashArray 的圆圈。我计划将这个圆圈用作第一个圆圈的 opacityMask，并为 StrokeDashArray 设置动画以显示圆圈。

我一直在玩，我可以将 StrokeDashArray 从 [0, 100] 修改为 [50 100] 并且我得到一条覆盖圆圈的增长线（我真的不明白 0 100 和 50 100 来自哪里......只是尝试直到它看起来不错。

所以现在我的问题是在哪里分发这些东西。

到目前为止，我的代码如下所示：

```
<UserControl bla bla bla bla>
    <!-- The mask that should be animated -- >
    <Ellipse Name="Mask" Stroke="White"StrokeThickness="13" StrokeDashArray="10 100"/>
    <!-- StrokeDashArray should be animated from "0 100" to "50 100"  -->

    <!-- The Blurry shadow of the line -->
    <Ellipse Name="blurry" Stroke="#FF7CA2CE" StrokeThickness="5">
        <Ellipse.Effect>
            <BlurEffect/>
        </Ellipse.Effect>
        <Ellipse.OpacityMask>
            <VisualBrush Visual="{Binding ElementName=Mask}"/>
        </Ellipse.OpacityMask>
    </Ellipse>

    <!-- The line itself -->
    <Ellipse Name="core" Stroke="Blue" StrokeThickness="1">
        <Ellipse.OpacityMask>
            <VisualBrush Visual="{Binding ElementName=Mask}"/>
        </Ellipse.OpacityMask>
    </Ellipse>
</UserControl> 
```

所以现在我需要在 StrokeDashArray 中的第一个元素上执行动画并从后面的代码（C#）启动它我还可以让动画作为资源在某个地方并从代码启动它，或者在代码中执行整个动画，我不在乎，但请具体说明在哪里添加代码。我感到迷茫。

我还尝试将模糊线和核心线添加到一个网格，然后将 VisualBrush 应用到它（所以我只应用一次，而不是两次）但效果更难看，因为模糊线被剪切并且不像我们那样柔和地结束想要它是hehehe

Sooo，任何帮助？！？！？！？！？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-08-11T14:57:45.827

实际上，您可以为 StrokeDashOffset 设置动画，而不是尝试为 StrokeDashArray 设置动画。

```
<Rectangle
   Width="70"
   Height="70"
   StrokeDashArray="2 0 0 2"
   StrokeThickness="2"
   Stroke="Black"
   Opacity="1"
   Fill="Transparent">
   <Rectangle.Triggers> 
            <EventTrigger RoutedEvent="FrameworkElement.Loaded"> 
                <BeginStoryboard> 
                    <Storyboard> 
                        <DoubleAnimation 
                           To="20" 
                           Duration="0:0:5" 
                           RepeatBehavior="Forever" 
                           By="2" 
                           Storyboard.TargetProperty="StrokeDashOffset" /> 
                    </Storyboard> 
                </BeginStoryboard> 
            </EventTrigger> 
        </Rectangle.Triggers> 
   </Rectangle> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T11:25:18.580

这有点棘手，因为你不能真正为`StrokeDashArray`里面`DoubleCollection`的值设置动画并让它反映在 UI 中。

一种选择是为`double`属性设置动画并创建一个`DoubleCollection`绑定到`StrokeDashArray`.

这是一个工作示例：

xml:

```
<Window x:Class="WpfApplication21.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="211.75" Width="213" Name="UI">

    <Grid DataContext="{Binding ElementName=UI}">

        <Ellipse x:Name="lo" Stroke="White" StrokeThickness="13" StrokeDashArray="{Binding StrokeArray}" />

        <Ellipse Name="blurry" Stroke="#FF7CA2CE" StrokeThickness="5">
            <Ellipse.Effect>
                <BlurEffect/>
            </Ellipse.Effect>
            <Ellipse.OpacityMask>
                <VisualBrush Visual="{Binding ElementName=lo}"/>
            </Ellipse.OpacityMask>
        </Ellipse>

        <!-- The line itself -->
        <Ellipse Name="core" Stroke="Blue" StrokeThickness="1">
            <Ellipse.OpacityMask>
                <VisualBrush Visual="{Binding ElementName=lo}"/>
            </Ellipse.OpacityMask>
        </Ellipse>

        <Button Content="Start" HorizontalAlignment="Left" Height="49" Margin="29,65,0,0" VerticalAlignment="Top" Width="150" Click="Button_Click_1"/>

    </Grid>
</Window> 
```

代码：

```
namespace WpfApplication21
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        public double StrokeValue
        {
            get { return (double)GetValue(StrokeValueProperty); }
            set { SetValue(StrokeValueProperty, value); }
        }

        public static readonly DependencyProperty StrokeValueProperty =
            DependencyProperty.Register("StrokeValue", typeof(double), typeof(MainWindow)
            , new PropertyMetadata(0.0, new PropertyChangedCallback(OnStrokeValueChanged)));

        private static void OnStrokeValueChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            (d as MainWindow).StrokeArray = new DoubleCollection { (double)e.NewValue, 100 };
        }

        public DoubleCollection StrokeArray
        {
            get { return (DoubleCollection)GetValue(StrokeArrayProperty); }
            set { SetValue(StrokeArrayProperty, value); }
        }

        public static readonly DependencyProperty StrokeArrayProperty =
            DependencyProperty.Register("StrokeArray", typeof(DoubleCollection), typeof(MainWindow)
            , new PropertyMetadata(new DoubleCollection { 0, 100 }));

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        var storyboard = new Storyboard();
        var animation = new DoubleAnimation(0,50,new Duration(TimeSpan.FromSeconds(5)));
        storyboard.Children.Add(animation);
        Storyboard.SetTarget(animation, this);
        Storyboard.SetTargetProperty(animation,new PropertyPath( MainWindow.StrokeValueProperty));
        storyboard.Begin();
    }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:58:12.627

动画在 Expression Blend 中更容易设计和调整。

根据您拥有的 Visual Studio 版本，它可能附带也可能不附带，或者可能必须单独获取。

Visual Studio 2012 附带了 Expression Blend（但您需要获得 Visual Studio 2012 Update 2 以获得 WPF 支持），否则您可以单独获得 Expression Blend 4，或者作为 Expression Studio 的一部分。

然后根据您的动画要求：

*   您可以设计一个故事板，然后您可以从后面的代码或附加的行为动作（ControlStoryboardAction）开始

*   或者您可以使用 VisualStateManager 并在状态面板中的 Blend 中，在状态组中定义一组状态，然后告诉 VisualStateManager 您要设置哪个“状态”......您将获得状态之间的动画（如果您设置了正确的值）....使用 VisualStateManager.GoToState() 或附加的行为 GotoToStateAction 来更改状态。

设计好动画后，如果您希望将其转换为代码隐藏（手动）来构建和操作该动画，则可以，但通常您不会这样做，除非特殊情况。

（有一个工具可以在某种程度上为您进行转换，但似乎不可用...... [http://www.xamlt.com/](http://www.xamlt.com/)）

* * *

一些帮助您入门的链接：

*   [http://msdn.microsoft.com/en-gb/expression/cc197141.aspx](http://msdn.microsoft.com/en-gb/expression/cc197141.aspx)

*   [http://www.kirupa.com/blend_wpf/index.htm](http://www.kirupa.com/blend_wpf/index.htm)

*   [http://www.blendinsider.com/](http://www.blendinsider.com/)

*   [http://blogs.msdn.com/b/expression/](http://blogs.msdn.com/b/expression/)

# ruby-on-rails - 在 RSpec 测试中模拟 sub-uri

> ID：15923510
> 
> 赞同：2
> 
> 时间：2013-04-10T10:38:48.397
> 
> 标签：ruby-on-rails, ruby, rspec, controller, uri

在我的 Rails 3.2 应用程序控制器中，响应 JSON 包含图像的 URL（使用 Paperclip 存储）。它在本地工作正常，但在服务器上的链接断开，因为应用程序部署在子 URI 下。我想测试一下 sub-uri 是否可以正常工作，但我不知道如何在测试环境中模拟它（我使用 RSpec）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T18:39:13.780

[这个要点](https://gist.github.com/ebeigarts/5450422)有一个部分展示了在 RSpec 中运行时如何为 Rails 应用程序设置相对根，也许它会有所帮助。

# php - php中回声的奇怪行为

> ID：15923511
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:38:48.987
> 
> 标签：php, cj

我正在研究 Commission Junction api，我想从 CJ 中提取链接 url 和图像 url，所以我制作了这个脚本，但输出不是我所期望的，例如。你可以看到 echo $mat[0] 不见了，那我该如何解决呢？谢谢

```
Code:

$URI = 'https://linksearch.api.cj.com/v2/link-search?'.
            'website-id=1234567'.
            '&advertiser-ids=adid'.
            '&link-type=text+link'.
            '&records-per-page=1';
$context = stream_context_create(
                array('http' => 
                            array(
                                'method' => 'GET',
                                'header' => 'Authorization: 'myapiid'
                            )
                )
            );

$data = new SimpleXMLElement(file_get_contents($URI, false, $context));
foreach ($data->links[0] as $link) 
{
    // Sanitize data.
    $pd     =   $link->{'link-code-html'};
    echo var_dump($pd);
    preg_match('#<img\s+src\s*=\s*"([^"]+)"#i',$pd,$mat);
    preg_match('#<a\s+href\s*=\s*"([^"]+)"[^>]*>([^<]+)</a>#i',$pd,$matches);
    echo '<pre>';
    print_r($matches);
    echo $matches[1];
    print_r($mat);
    echo $mat[0];
    echo '</pre>';
}

OUTPUT:
object(SimpleXMLElement)[5]
  string '<a href="http://www.dpbolvw.net/click-1234567-42452100">Save up to 70% on Airport Parking</a><img src="http://www.tqlkg.com/image-1234567-42452100" width="1" height="1" border="0"/>' (length=181)

Array
(
    [0] => Save up to 70% on Airport Parking
    [1] => http://www.dpbolvw.net/click-1234567-42452100
    [2] => Save up to 70% on Airport Parking
)
http://www.dpbolvw.net/click-1234567-42452100Array
(
    [0] =>  http://www.tqlkg.com/image-1234567-42452100
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:42:01.500

您在授权处缺少单引号

```
$context = stream_context_create(
                    array('http' => array(
                        'method' => 'GET',
                        'header' => 'Authorization' : 'myapiid'
                        )
                     )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:58:15.940

您要查找的 URL 位于

```
$mat[1] 
```

不在

```
$mat[0] 
```

尝试使用 var_dump 而不是 print_f。Print_f 更容易阅读，但 var_dump 有时会提供更多信息。

# binding - 淘汰日期选择器 JQueryUI - 天数范围

> ID：15923512
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:38:52.133
> 
> 标签：binding, knockout.js, datepicker, add

我想在用户放置天数和 maxDate 中放置一个 maxDate。所以我需要将天数添加到用户固定的 maxDate 中。

```
 if(allBindingsAccessor()["rango"]){
        var dias = allBindingsAccessor().rango.dias;
        var maxrFecha =  new Date(allBindingsAccessor().rango.maxDate() + dias);
        $(element).datepicker("option", "maxDate", maxrFecha);
    } 
```

在 html 上

```
Fecha FIN: ,input type="text" data-bind="
                日期选择器：fechaFin，
                minDate: fechaIni,
                兰戈：{
                    最大日期：fechaIni，
                    直径：10}，
                日期选择器选项：{
                    dateFormat: 'dd/mm/yy',
                }"
            id="fechafin" />
```

**解决方案**

```
if(allBindingsAccessor()["rango"]){
        var dias = allBindingsAccessor().rango.dias;
        var maxrFecha =  new Date(allBindingsAccessor().rango.maxDate());
        maxrFecha.setDate(maxrFecha.getDate()+dias);
        $(element).datepicker("option", "maxDate", maxrFecha);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:42:01.867

至少工作过：

```
if(allBindingsAccessor()["rango"]){
        var dias = allBindingsAccessor().rango.dias;
        var maxrFecha =  new Date(allBindingsAccessor().rango.maxDate());
        maxrFecha.setDate(maxrFecha.getDate()+dias);
        $(element).datepicker("option", "maxDate", maxrFecha);
    } 
```

# c# - 如何通过超链接字段在变量后面传递代码

> ID：15923521
> 
> 赞同：5
> 
> 时间：2013-04-10T10:39:19.017
> 
> 标签：c#, asp.net, .net, hyperlink

这是我在 C# 中的代码。

```
protected void Page_Load(object sender, EventArgs e)
    {
           Name = "Nitin";                      
    } 
```

我有一个 GridView，其中有一个 Hyperlinkfield。我想`Name`通过 HyperLinkField 从 C# 页面（代码后面的一个）发送到下一页，但它不是 GridView 的 BoundField 之一（即我从 EntityDataSource 获得的）。这是我的 asp.net 代码。

**代码**：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="Id" DataSourceID="WorkItemsEntityDataSource">
    <Columns>
        <asp:hyperlinkfield datatextfield="Id"                    
                datanavigateurlfields="Id"
                datanavigateurlformatstring="~\WorkItems.aspx?Id={0}"          
                headertext="Id"/> 
        <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
        <asp:BoundField DataField="TFSId" HeaderText="TFSId" SortExpression="TFSId" />
        <asp:CheckBoxField DataField="IsBillable" HeaderText="IsBillable" SortExpression="IsBillable" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:01:19.023

您也可以像这样从后面的代码中传递导航 URL

在 Aspx 页面中

```
 <asp:TemplateField>
                    <ItemTemplate>
                        <asp:HyperLink ID="hyp" runat="server" Text="Navigation"></asp:HyperLink>
                    </ItemTemplate>
                </asp:TemplateField> 
```

在像这样的用户网格视图数据绑定事件背后的代码中

```
protected void grddata_RowDataBound(object sender, GridViewRowEventArgs e)
    {    
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int ID = Convert.Int32(DataBinder.Eval(e.Row.DataItem, "ID"));
            HyperLink hyp = (HyperLink)e.Row.FindControl("hyp");
            hyp.NavigateUrl = "Test.aspx?Name='" + Request.QueryString["test"] + "'&&ID"+ ID +"";
        }
    } 
```

我想这会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:43:54.183

我不确定实际上是否在数据绑定控件中使用它，但是您正在构建的 url 肯定不包含 QueryString 参数“名称”。它应该如下所示：

```
~\WorkItems.aspx?Id={0}&Name={1} 
```

如果不需要 Id，只需将 Id 替换为 Name：

```
~\WorkItems.aspx?Name={0} 
```

至于替换-我不知道您的数据对象具有哪些属性以及如何绑定到它们。我认为你没有问题，因为绑定到 Id 工作（可能）。

**更新**

如果 Name 没有从数据源返回，您应该创建包含 Name 字段的新实体，或者使用一些常量名称，就像您在页面中声明的一样（不确定是否应该在每一行中显示相同的名称）。第二个选项可以这样实现：

```
~\WorkItems.aspx?Id={0}&Name=<%= Name %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:46:57.927

您可以使用：

```
<asp:TemplateField HeaderText="test">
     <ItemTemplate>
           <asp:HyperLink runat="server" ID="temp" NavigateUrl='<%# String.Format("~\WorkItems.aspx?Id={0}&Name={1}",  Eval("Name"), Name)%>' ></asp:HyperLink>
      </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-17T16:48:36.133

您可以通过执行以下操作修改 a`HyperLinkField`的 url：

```
protected void pendingAccountsGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        ((HyperLink) e.Row.Cell[0].Controls[0]).NavigateUrl = "http://stackoverflow.com";
    }
} 
```

只需更改它以在`e.Row.Cell[0]`.

# ajax - jquery.load 谷歌地图苦苦挣扎

> ID：15923522
> 
> 赞同：0
> 
> 时间：2013-04-10T10:39:20.227
> 
> 标签：ajax, api, google-maps, load

嘿，试图通过 jquery 加载调用加载我的谷歌地图......似乎没有通过外部页面加载到我的索引页面上的我的 div.. 有来自谷歌开发者页面的代码.. 但似乎不能让它工作..任何会很棒的帮助或指示...

```
$('#content').on('click', 'nav ul li a', function() {

    var page = $(this).attr('href');
    // Script to fade and show pages
            $('#content').hide().load('page/' + page + '.php').fadeIn('normal', function() {

                  function initialize() {
                          var mapOptions = {
                            zoom: 8,
                            center: new google.maps.LatLng(-34.397, 150.644),
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                          }
                          var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
                        }

                        function loadScript() {
                          var script = document.createElement("script");
                          script.type = "text/javascript";
                          script.src = "http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=TRUE_OR_FALSE&callback=initialize";
                          document.body.appendChild(script);
                        }

                        window.onload = loadScript;
                        });
            });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:51:37.150

`window.onload`当它已经结束时，您正在使用它。

改为`window.onload = loadScript;`刚刚`loadScript();`

# ruby - Ruby对象到JSON并返回

> ID：15923539
> 
> 赞同：2
> 
> 时间：2013-04-10T10:40:17.577
> 
> 标签：ruby, json, serialization, deserialization

我想将 Ruby 对象转换为 JSON，并将 JSON 转换回 Ruby 对象。在我看到的所有代码中，JSON 都被转换回 Hash（而不是自定义 Ruby 对象）。有人可以告诉我这是如何实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:55:40.687

从对象到 JSON 的转换是有损的。事实上，序列化过程并没有保留类。

恢复它的唯一方法是将类名作为序列化 JSON 中的属性传递，并指示反序列化例程实例化该类的实例。

否则，如果您事先知道该类，您只需向该类添加从 Hash 初始化新对象的能力。

另一种选择是使用 YAML，其中序列化输出还存储原始类的名称。

# iphone - 音频会话中断结束后恢复 HTTP 播放

> ID：15923551
> 
> 赞同：0
> 
> 时间：2013-04-10T10:40:41.590
> 
> 标签：iphone, ios, avplayer, http-live-streaming, avaudiosession

我正在开发一个通过 AVPlayer 播放 HTTP 实时流的应用程序。当我的音频会话被中断（即来电、启动 YouTube 应用程序...）时，我会保存播放器的状态。当音频会话中断结束时，我尝试恢复播放。问题是播放器恢复播放但没有声音。我通过重播最后一项来解决这个问题，但我认为这不是最好的解决方案。谁能告诉我如何在不必重播最后一项的情况下恢复播放？

# asp.net-mvc - asp mvc中的更改通知

> ID：15923554
> 
> 赞同：0
> 
> 时间：2013-04-10T10:40:49.867
> 
> 标签：asp.net-mvc

当我在研究 MVC 架构时，我了解到当模型更新时，所有视图（例如所有打开的表单或视图）都会被通知并有机会更新自己（这是 mvc 架构的一个特性）。如何在没有 ajax 的 Asp.Net MVC 3 中做到这一点？

谢谢，如果你能帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T20:17:23.787

如果没有 AJAX，您发布服务器并返回整个页面。`View()`在您调用`Controller`.

# javascript - 按钮长按退出Android PhoneGap上的应用程序

> ID：15923558
> 
> 赞同：0
> 
> 时间：2013-04-10T10:40:58.703
> 
> 标签：javascript, android, html, cordova

我有以下代码：

```
function logout_now()

//Logout of the app after a long press onKey(Longer then 5 sec)    Not working correctly

{
var startTime; 
var endTime;
var TimeDiff;

document.getElementById('Exit_btn').addEventListener('touchstart',function(event)
        {startTime = new Date().getTime();
        },false);

document.getElementById('Exit_btn').addEventListener('touchend',function(event){
        endTime = new Date().getTime();
        TimeDiff = endTime-startTime;   

        if( endTime-startTime > 5000 )  //logout after more then 5 Second = 5000 mSec
            {
            logout();      
            }
        },true);     
 } 
```

当用户在等待 5 秒（长按）后按下 Exit_btn 时，它会启动以下功能：

功能注销（）{

```
var password = prompt("Please enter the exit password");

if (password == "123")
     {
        alert("Goodbye");
        navigator.app.exitApp();
     }
else
     {
        alert("Wrong Password!");
        console.log("index.html");
     } 
```

}

问题是它不能顺利运行，这意味着如果我输入错误的密码，提示框会不断弹出，或者如果我最终正确退出应用程序，当我再次启动它时它会崩溃。

任何人都可以在这里看到问题吗？为什么会这样？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:07:09.033

您可以使用 jQuery Mobile [**taphold**](http://api.jquerymobile.com/taphold/)事件，如下所示...这可能会对您有所帮助...

html:

```
<div id="logout-btn">Logout</div> 
```

jQuery 移动：

```
$(function() {
   $( "#logout-btn" ).on('taphold', tapholdCallBack);
     // Callback function
     function tapholdCallBack(ev) {
        logout();
        .....
     }
}); 
```

或者

```
$(document).delegate('div[data-role*="page"]', 'pageshow', function () {
  $(document).delegate('#logout-btn', 'taphold', function (ev) {
    logout();
  });
}); 
```

长按注销按钮 750 毫秒，它将调用 logout()。

默认情况下，点击持续时间为 750 毫秒，如果您想通过分配一个值来更改点击的时间量`to $.event.special.tap.tapholdThreshold`。如下图...

```
 $(document).bind("mobileinit", function () {
    $.event.special.tap.tapholdThreshold = 5000,
 }); 
```

# asp.net - 在 ASP.NET 动态数据中隐藏过滤器

> ID：15923562
> 
> 赞同：3
> 
> 时间：2013-04-10T10:41:12.710
> 
> 标签：asp.net, asp.net-dynamic-data

将 ASP.NET 与动态数据结合使用，我的页面如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/p1BYL.jpg)

我想隐藏下拉列表`Invoicing Complete`和`Restricted Hours`页面顶部。我使用以下方法使它们从表中不可见：

```
[HideColumnIn(PageTemplate.ListDetails, PageTemplate.List)]
[ReadOnlyColumnIn(PageTemplate.Edit)]
[DisplayName("Invoicing Complete")]
public object Invoicing_Complete { get; set; } 
```

但它们仍以下拉菜单的形式出现在顶部。我不能使用`[ScaffoldColumn(false)]`它，因为它完全隐藏了它，我需要用户从页面`Edit.aspx`中查看它。`Insert.aspx`

请指教。

编辑：有人有什么想法吗？似乎无法找到如何做到这一点......我是否正确解释了 Q ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:27:37.780

John、**HideColumnIn**和**ReadOnlyColumnIn**是隐藏*列*而不是*过滤器*（外键过滤器）的属性。

您可以使用多种方法解决此问题。

第一种方式，如果您使用的是*.NET Framework 4.5*或*.NET Framework 4*，您可以使用**DisplayAttribute**的**AutoGenerateFilter 属性**。例如，

 **```
[Display(Name = "Invoicing Complete", AutoGenerateFilter = false)] 
```

您可以在[AutoGenerateFilter](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.autogeneratefilter%28v=VS.100%29.aspx)上找到更多信息。

第二种方法是创建新属性（如**HideColumnIn**），然后为**ForeignKey**过滤器更改 Code-Behind。

一些例子：

**HideFilterAttribute.cs**

```
using System;

namespace iSite.Classes.Attributes
{
    [AttributeUsage(AttributeTargets.Property)]
    public class HideFilterAttribute : Attribute
    {
        public Boolean Hide { get; private set; }

        public HideFilterAttribute(Boolean hide)
        {
            this.Hide = hide;
        }

        // default
        public static HideFilterAttribute Default =
            new HideFilterAttribute(false);
    }
} 
```

**外键.ascx.cs**

```
public partial class ForeignKeyFilter : System.Web.DynamicData.QueryableFilterUserControl
{
        protected void Page_Init(object sender, EventArgs e)
        {
                string initialValue = DefaultValue;
                if (initialValue == null && Column.Attributes.OfType<HideFilterAttribute>().DefaultIfEmpty(HideFilterAttribute.Default).First().Hide)
                {
                        this.NamingContainer.Visible = false;
                }
                else
                {
                        PopulateListControl(DropDownList1);
                        if (!String.IsNullOrEmpty(initialValue))
                        {
                                ListItem li = new ListItem();
                                li = DropDownList1.Items.FindByValue(initialValue);
                                DropDownList1.Items.Clear();
                                DropDownList1.Items.Add(li);
                        }
                }
        }
} 
```

第三种和第四种方式没有 DynamicData 方式。您可以为此列使用自定义过滤器，并通过**Visible**属性隐藏 DropDownList 控件。您还可以通过 jQuery 库隐藏 DropDownList 控件。**

# prolog - Prolog如何使用append（[Item]，List）之类的谓词将新变量附加到列表中？

> ID：15923563
> 
> 赞同：0
> 
> 时间：2013-04-10T10:41:13.010
> 
> 标签：prolog

我有一个关于将元素附加到给定列表的问题，我知道这可以通过 3 个变量谓词来完成：`append([Item], List, [Item | List])`. 仅使用两个变量怎么样，也可以实现，例如`append([Item], List)`，其中List是现有列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:23:25.420

CapelliC 的回答是完全正确的。为了清楚起见，我只想补充一点，Prolog 谓词不像其他语言的函数或过程那样具有返回值。这背后有多种原因（还有很多关于逻辑编程的文章）。现在，请记住，like 谓词的优势`append/3`在于它不仅可以附加两个列表以形成一个新列表，还可以将一个列表一分为二：

```
?- append(Start, [c,d,e], [a,b,c,d,e]). 
```

甚至枚举列表的所有可能拆分（非确定性）：

```
?- append(X,Y,[a,b,c]). 
```

完全实例化的列表，例如`[a,b,c]`（其中没有变量）不能在 Prolog 谓词的上下文中更改。您只能实例化一个新列表，在 的情况下，该列表`append`具有其他元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:05:38.443

您需要 3 个元素：要添加的元素、没有元素的列表、这些元素的串联。那么你不能只使用 2 个元素。

注意`append([Item], List, Result)`可以更方便地写`[Item|List] = Result`，并且`Item`会是 Result 的第一个元素。然后你*没有*追加。你可以做`append(List, [Item], Result)`

# java - Java：两组的选择性比较

> ID：15923566
> 
> 赞同：0
> 
> 时间：2013-04-10T10:41:17.330
> 
> 标签：java, comparison, set

我正在编写很多单元测试，它们使用不同的类做类似的事情。

我想比较同一类的集合。该类指定一个 id 属性。在集合 A 中，此属性全部为空。在 Set B 中设置了此属性。（Set B 已被持久化到数据库并且 uids 已被填充）。

对于我的单元测试，我想确保 Set A 与 Set B 匹配，而且我显然不希望它查看 id 字段。

最有效、最干净、最干燥的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:50:42.837

首先，比较两组的大小，如果它们不相等，则测试失败。

对于不平凡的情况，`java.util.Comparator`为集合元素定义 a，根据此比较器对两者进行排序（您可以包含/省略您不想比较的属性）。然后遍历这两个集合，根据您的规则比较元素（如果我理解正确的话，与比较器定义的不同）。

我假设您已经正确定义了您的`equals`和`hashCode`方法，并且不想为了测试而更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:45:32.123

您需要覆盖不应在两个方法中包含 id 字段的类的 hashCode() 和 equals() 方法，然后 equals 方法 Set 将按照您的意愿工作。

例如，

```
class  Test{

int id;
String name;
String other;
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    result = prime * result + ((other == null) ? 0 : other.hashCode());
    return result;
}
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Test other = (Test) obj;
    if (name == null) {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    if (this.other == null) {
        if (other.other != null)
            return false;
    } else if (!this.other.equals(other.other))
        return false;
    return true;
} 
```

}

现在 Test 类对象不依赖于 ID。您可以使用 Eclipse 之类的 IDE 轻松生成 equlas 和 hashCode 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:46:05.320

您可以覆盖类中的`equals()`&`hashCode()`方法，然后使用`removeAll()`方法从`Set B`. 发布这个，如果集合是空的，那么它们匹配，否则它们不匹配。

请注意，被覆盖的方法应该具有不涉及`id`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:01:23.940

重复项逻辑的比较是在 Java 中使用**equals()**方法实现的。

> myString.equals("比较一下");

当您需要比较您的客户类型的对象时，您必须重写 equals 方法。

```
Student student1=new Student();
Student student2=new Student();
student1.equals(student2); 
```

但是当你重写 equals() 方法时要小心。您需要根据一些唯一的 id 提供一些比较基础。例如，以下实现使用 Roll 编号作为唯一 id 进行比较

```
public class Student {

  private int rollNo;
  private String name;
  private String address;

    // Getters and Setters

@Override
  public int hashCode() {
   // Overide this only when you use Hashing implementations
  }

  @Override
  public boolean equals(Object obj) {
    if (obj == null) {
      System.out.println("Not Equal due to NULL");
      return false;
    }
    if (this == obj) {
      System.out.println("Equals due to same reference");
      return true;
    }
    if (getClass() != obj.getClass()) {
      System.out.println("Different Type");
      return false;
    }
    Student other = (Student) obj;
    if (rollNo == other.rollNo) {
      System.out.println("RollNo " + rollNo + " EQUALS " + other.rollNo);
      return true;
    }
    if (rollNo != other.rollNo) {
      System.out.println("RollNo " + rollNo + " NOT EQUALS " + other.rollNo);
      return false;
    }
    System.out.println("Default is FALSE");
    return false;
  }

} 
```

# windows-phone-7 - 在 windows phone 的视图模型中访问 UI 元素的实例

> ID：15923567
> 
> 赞同：1
> 
> 时间：2013-04-10T10:41:22.093
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-8

在我的 xaml 页面中，我使用的是图像控件

```
<Image x:Name="MyImage" Grid.Row="1" Stretch="UniformToFill" Source="{Binding SourceImage}"/> 
```

像这样。我的问题是。是否可以在我的视图模型中访问此控件的属性。“像 MyImage.Source =”。如果是，我如何在 Windows Phone 中实现类似的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:26:37.917

是的，你可以，但你不应该。ViewModel 的全部目的是将逻辑分离到自己的类中，而不是将其与视图代码混合。

而是使用`INotifyPropertyChanged`界面通知 UI 图像源已更改。如果可能，请尝试查看是否可以对要使用的值使用常规绑定，这将是最健壮和最简单的方法。

另一种解决方案是在视图上公开一个界面。之类`IView`的，你大概可以想出一个更合适的名字之类的`IResetable`。

```
interface IResetable
{
    void Reset();
}
class MainWindow: Window, IResetable
{
    publiv void Reset()
    {
        // Here you can access the view, but try to keep logic minimal.
    }
}    
class ViewModel
{
    private readonly IResetable resetable;
    public ViewModel(IResetable resetable)
    {
         _resetable = resetable;
    }
    void Foobar()        
    {
         _resetable.Reset();
    }

} 
```

# c# - C# Richtext 的透明背景色

> ID：15923569
> 
> 赞同：0
> 
> 时间：2013-04-10T10:41:23.283
> 
> 标签：c#, richtextbox

我有一个要与背景一起使用的表单，当我加载背景时，我的所有标签和富文本仍然具有背景色“控件”，当我为它正在工作的标签选择“透明”时，但是当我选择它时富文本我'，得到错误：“控件不支持透明背景颜色。”

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:45:40.993

不，你不能？

设置窗口的 TransparencyKey 来控制背景颜色设置此属性将使此颜色在整个窗口上透明

使用两个相互重叠的窗口，一个带有背景，另一个带有透明键的控件

# xslt - 使用 xslt 获取当前日期

> ID：15923575
> 
> 赞同：1
> 
> 时间：2013-04-10T10:41:36.987
> 
> 标签：xslt, xslt-2.0

如何在 xslt 中获取当前星期几。像星期一，星期二.... 0,1,2 也是可以接受的。

如何在 XSLT 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:17:25.097

由于它是 XSLT 2.0：

```
 format-date(current-date(), '[F]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:50:15.603

看看链接，这可能会对你有所帮助[http://www.xsltfunctions.com/xsl/functx_day-of-week.html](http://www.xsltfunctions.com/xsl/functx_day-of-week.html)

# c++ - 返回“this”指针的宏，如果不可用，则返回 NULL

> ID：15923577
> 
> 赞同：2
> 
> 时间：2013-04-10T10:41:39.313
> 
> 标签：c++, templates, macros

是否可以在非静态上下文中访问**this**指针并在静态上下文中自动使用其他东西？你知道任何宏或模板魔法吗？

```
#define LOG std::cout << _is_the_this_pointer_available_ ? this : 0

class Foo {
  void test() {
    LOG;
  }
};

void staticTest() {
  LOG;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:47:32.383

> 你知道任何宏或模板魔法吗？

老实说，我不会用宏来做这件事。当可以在*没有*宏的情况下完成某些事情时，我建议避免使用它们。这是基于重载、CRTP 和继承（无宏）的可能解决方案：

```
int get_this() { return 0; }

template<typename T>
struct get_this_helper
{
    T* get_this() { return static_cast<T*>(this); }
}; 
```

唯一的开销是你必须让你的类派生自 的适当特化`get_this_helper<>`，如下所示：

```
#include <iostream>

#define LOG std::cout << get_this() << std::endl;

class Foo : public get_this_helper<Foo> {
//        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
//        This is the only thing that requires 
//        being changed wrt your version of Foo
public:
  void test() {
    LOG;
  }
};

void staticTest() {
  LOG;
} 
```

这是一个简单的测试程序：

```
int main()
{
    Foo f;
    f.test();
    staticTest();
} 
```

还有一个[活生生的例子](http://liveworkspace.org/code/1XTnBW%2428)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T11:52:25.330

我正在使用以下技术*将此*指针写入日志：

```
#define GET_THIS() __if_exists(this) { this; } __if_not_exists(this) { nullptr; } 
```

但是，它是 Microsoft 特定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:45:16.053

```
#define LOG std::cout << isThisAvailable()

bool isThisAvailable() { return false; }
struct X
{
    bool isThisAvailable() { return true; }

    void test() { LOG; }
};

void staticTest()
{
   LOG;
} 
```

在类内调用`isThisAvailable`将返回`true`。在类上下文之外调用将调用 free 函数并返回`false`。

# c# - 在 Web.config 中设置队列路径

> ID：15923582
> 
> 赞同：3
> 
> 时间：2013-04-10T10:41:46.710
> 
> 标签：c#, web-config, msmq

我在 C# 中使用 MSMQ，如何在**web.config中设置****queuepath**？

 **有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:47:10.117

`appSetting`用你的 Queque 的路径添加一个键？

```
 <appSettings>
    <add key="myquequepath" value="FormatName:DIRECT=OS:machinename\private$\MyQueue" />
  </appSettings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T04:43:41.233

这真的很简单，我找到了解决方案。

```
<add key="MSMQName" value=".\private$\WebSiteEmails"/> 
```**

# c# - 如何从编辑模式中排除 datagridviewtextbox 列？

> ID：15923583
> 
> 赞同：0
> 
> 时间：2013-04-10T10:41:48.710
> 
> 标签：c#, windows, datagridviewtextboxcell, editmode

我有一个 datagridviewtextboxcolumn 类型的网格视图，其中包含以下字段：

```
 SrNo    |   Description   |    HSNCode   |    Qty   |    Rate    |    Amount 
```

SrNo 和 Amount 是根据代码自动计算的，并且都处于模式。`ReadOnly`我希望用户在进入单元格时进行编辑。为此，我`Page_Load()`在表单事件中设置了网格的编辑模式。

```
grdData.EditMode = DataGridViewEditMode.EditOnEnter; 
```

但是生成 SrNo 的逻辑。当我以这种方式设置 EditMode 时，Amount 不起作用。我可以使用哪种方式在除这两列之外的所有列上应用编辑模式。（SrNo。和金额）。我已使用`CellEnter()`网格视图的事件在我的程序中生成“SrNo”和“Amount”。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:35:52.457

您可以设置该特定列的**ReadOnly**属性，而不是使用网格的**EditMode**属性。

您可以使用列设计器对话框窗口将列的 ReadOnly 属性配置为**True 。**

希望这可以帮助

# javascript - 从 AS3 中传递的对象调用 JS 函数

> ID：15923584
> 
> 赞同：0
> 
> 时间：2013-04-10T10:41:52.740
> 
> 标签：javascript, actionscript

我想从传递给 flash 的对象中调用 JS 函数。

JS代码：

```
 <script>
    function initContext() {
        flashMovie.setContext(ctx);
    }

    var ctx = new Object();
    ctx.saySomething = function(msg) {
        alert(msg);
    }   
</script> 
```

AS3 代码：

```
if (ExternalInterface.available) {  
    ExternalInterface.addCallback("setContext", say);
    ExternalInterface.call("initContext");
} 
```

所以首先 AS3 调用 JS initContext 和 JS initContext 然后调用 setContext 与一个对象。到目前为止，这有效。我被困在如何从传递的对象中调用函数 saySomething ：

```
private function say(context:Object) {
    ExternalInterface.call(???);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:56:32.033

您无法对传递给 ActionScript 的实际 ctx 对象执行 saySomething JavaScript 函数，因为 ActionScript 无法在内部执行 JavaScript。

当您在 JavaScript 和 ActionScript 之间发送对象时，它会被序列化/反序列化并从 JavaScript 对象转换为 ActionScript 对象，反之亦然，但 saySomething 函数/方法不会转换为 ActionScript 函数。不转换可执行代码。转换字符串、数字、布尔值、数组和对象等基本类型，但不转换函数。

此外，ctx 不会是对您在 JavaScript 中创建的对象的引用，它将是对象的副本（序列化和反序列化）。

# android - CCbezierTo not working in cocos2d ,android

> ID：15923585
> 
> 赞同：2
> 
> 时间：2013-04-10T10:41:54.177
> 
> 标签：android, cocos2d-iphone, bezier, cocos2d-android

我希望我的精灵在曲线路径中从一个点移动到另一个点，所以我在我的代码中使用了 Bezierto，但它似乎没有解决，因为它显示了 bezier 关键字错误（局部变量 bezier 可能不是初始化）。请帮我。

我的代码如下

```
//initial point of sprite
sprite1pos=CGPoint.ccp((winSize.width/2+winSize.width/2),0);

//now the bezier config declaration

    CCBezierConfig bezier;
bezier.controlPoint_1=CGPoint.ccp(sprite1pos.x,sprite1pos.y);
bezier.controlPoint_2=CGPoint.ccp(winSize.width/2,winSize.height/2);
bezier.endPosition=CGPoint.ccp(0,0);

 CCBezierTo  action = CCBezierTo.action(3, bezier);
   sprite1.runAction(action); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:49:35.597

您需要初始化贝塞尔变量。

该行：

```
 CCBezierConfig bezier; 
```

不初始化贝塞尔变量。

它应该是 ：

```
CCBezierConfig  bezier = new CCBezierConfig(<arguments if any>); 
```

# image - 想用hadoop处理图片

> ID：15923586
> 
> 赞同：0
> 
> 时间：2013-04-10T10:41:54.713
> 
> 标签：image, image-processing, hadoop, mapreduce

我的想法是使用 hadoop mapreduce 处理大量图像。如何使用 hadoop 进行图像处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:28:27.430

[HIPI](http://hipi.cs.virginia.edu/)也可以用于 MR 处理图像，但 HIP 已经一年多没有[更新](https://github.com/uvagfx/hipi)了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:08:54.727

您可以将图像导入[序列文件](http://wiki.apache.org/hadoop/SequenceFile)。然后，当您运行 map/reduce 时，处理不同的图像将分布在映射器中

# ruby-on-rails - Rails 谷歌地图将静态更改为动态

> ID：15923587
> 
> 赞同：1
> 
> 时间：2013-04-10T10:41:58.260
> 
> 标签：ruby-on-rails, google-maps

希望有人可以帮助我。我正在 Rails 中做一个项目，目前我有一个静态谷歌地图，它使用地理编码器 gem 链接到模型中的地址。我尝试查找视频以尝试将其更改为动态地图并保持地图链接到模型的方式，但我找不到方法。目前我的展示页面是这样的：

```
<div id="map">
<%= image_tag "http://maps.google.com/maps/api/staticmap?size=700x400&sensor=false&zoom=16&markers=#{@post.latitude}%2C#{@post.longitude}" %>
</div> 
```

我想要的只是保持相同的东西，但将其更改为动态的，我只是从这些东西开始，如果这是一个愚蠢的问题，我很抱歉。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:14:40.647

从静态到动态是一大步，但并不难。您将不得不使用[谷歌地图 API](https://developers.google.com/maps/documentation/javascript/tutorial)并使用 javascript 稍微摆弄一下。

另一种选择是使用[Gmap4rails](https://github.com/apneadiving/Google-Maps-for-Rails)，这是一个封装了这个 API 并且易于使用的 gem。该文档有一些关于如何将模型链接到地图的示例。

# php - php URL解释-无法加载自定义404页面

> ID：15923590
> 
> 赞同：0
> 
> 时间：2013-04-10T10:42:02.437
> 
> 标签：php, url, interpreter

根据下面的代码：

如果手动输入的url是：`http://www.mydomain.com/nonexistingpage`

那么根据*CODE 2*；`$_GET['page'] == 'nonexistingpage'`

所以`$sayfa`值被分配为`olmayan_sayfa`'

，我在*CODE 3*中说如果`$sayfa == olmayan_sayfa;`然后加载`pageis_olmayan_sayfa.inc.php`页面。

但我得到了 404 页。

我什至无法加载 1 `pageis_olmayan_sayfa.inc.php`页。所有其他情况都很好，没有问题。

你能纠正我吗？

**注意：我知道我可以通过 .htaccess 创建自定义 404 页面，但我想了解我的案例的原因和更正方法。**

谢谢你，BR

## 代码 1：.htaccess，SEO 友好的链接部分

```
#SEO friendly linking
RewriteRule ^yazılar/(.+)/(.+)$ index.php?page=yazılar&subject=$1&object=$2 [L]
RewriteRule ^yazılar/(.+)$ index.php?page=yazılar&subject=$1 [L]
RewriteRule ^etiketler/(.+)$ index.php?page=etiketler&subject=$1 [L]
RewriteRule ^(iletişim|etiketler|yazılar|eposta-doğrula|epostanız-için-teşekkür-ederim|yorum-doğrula|yorumunuz-için-teşekkür-ederim|yazı-ekle|yazı-doğrula|yazınız-için-teşekkür-ederim)$ index.php?page=$1 [L] 
```

## 代码 2：URL 解释，确定要分配给 $sayfa 的值

```
<?php
$sayfa = '';

if(!empty($_GET)) {$getsayaci = count($_GET);}

$url_check01 = htmlspecialchars($_SERVER['PHP_SELF'], ENT_QUOTES, 'utf-8');
$url_check02 = htmlspecialchars($_SERVER['SCRIPT_NAME'], ENT_QUOTES, 'utf-8');

if (isset($_GET['page']) AND $_GET['page'] != '')
{
    if ($getsayaci == 1)
    {
        if ($_GET['page'] == 'yazılar') {$sayfa = 'yazilar';}
        else if ($_GET['page'] == 'iletişim') {$sayfa = 'iletisim';}
        else if ($_GET['page'] == 'site-haritası') {$sayfa = 'site_haritasi';}
        else if ($_GET['page'] == 'etiketler') {$sayfa = 'etiketler';}
        else if ($_GET['page'] == 'yorum-doğrula') {$sayfa = 'yorum_dogrula';}
        else if ($_GET['page'] == 'eposta-doğrula') {$sayfa = 'eposta_dogrula';}
        else if ($_GET['page'] == 'yorumunuz-için-teşekkür-ederim') {$sayfa = 'yorum_onay';}
        else if ($_GET['page'] == 'epostanız-için-teşekkür-ederim') {$sayfa = 'eposta_onay';}
        else if ($_GET['page'] == 'hakkında') {$sayfa = 'hakkinda';}
        else if ($_GET['page'] == 'ara') {$sayfa = 'arama';}
        else if ($_GET['page'] == 'yazı-ekle') {$sayfa = 'yazi_ekle';}
        else if ($_GET['page'] == 'yazı-doğrula') {$sayfa = 'yazi_dogrula';}
        else if ($_GET['page'] == 'yazınız-için-teşekkür-ederim') {$sayfa = 'yazi_onay';}
        else {$sayfa = 'olmayan_sayfa';}
    }

    else if (isset($_GET['subject']) AND $_GET['subject'] != '')
    {
        if ($getsayaci == 2)
        {
            if ($_GET['page'] == 'yazılar') {$sayfa = 'yazarin_yazilari';}
            else if ($_GET['page'] == 'etiketler') {$sayfa = 'bir_etiket';}
            else if ($_GET['page'] == 'ara') {$sayfa = 'aranan';}
            else {$sayfa = 'olmayan_sayfa';}
        }

        else if (isset($_GET['object']) AND $_GET['object'] != '' AND $getsayaci == 3)
        {
            if ($_GET['page'] == 'yazılar') 
            {
                $sayfa = 'spesifik_yazi';
            }
            else
            {
                $sayfa = 'olmayan_sayfa';
            }
        }
        else
        {
            $sayfa = 'olmayan_sayfa';
        }
    }

    else
    {
        $sayfa = 'olmayan_sayfa';
    }
}

else if ($url_check01 == '/index.php' AND $url_check02 == '/index.php' AND ($actual_link == site1.'/' OR $actual_link == site2 ))
{
$sayfa = 'anasayfa';
}

else
{
$sayfa = 'olmayan_sayfa';
} 
```

## CODE 3：根据$sayfa值，加载相关页面

```
<?php
switch ($sayfa) 
{
case "anasayfa":
    require ("{$rootfolder}/load/pageis_anasayfa.inc.php");
    break;
case "yazilar":
    require ("{$rootfolder}/load/pageis_yazilar.inc.php");
    break;
case "iletisim":
    require ("{$rootfolder}/load/pageis_iletisim.inc.php");
    break;
case "eposta_dogrula":
    require ("{$rootfolder}/load/pageis_iletisim_dogrula.inc.php");
    break;
case "eposta_onay":
    require ("{$rootfolder}/load/pageis_iletisim_tesekkur.inc.php");
    break;
case "yorum_dogrula":
    require ("{$rootfolder}/load/pageis_yorum_dogrula.inc.php");
    break;
case "yorum_onay":
    require ("{$rootfolder}/load/pageis_yorum_tesekkur.inc.php");
    break;
case "etiketler":
    require ("{$rootfolder}/load/pageis_etiketler.inc.php");
    break;
case "bir_etiket":
    require ("{$rootfolder}/load/pageis_bir_etiket.inc.php");
    break;
case "yazarin_yazilari":
    require ("{$rootfolder}/load/pageis_yazarin_yazilari.inc.php");
    break;
case "spesifik_yazi":
    require ("{$rootfolder}/load/pageis_spesifik_yazi.inc.php");
    break;
case "yazi_ekle":
    require ("{$rootfolder}/load/pageis_yazi_ekle.inc.php");
    break;
case "yazi_dogrula":
    require ("{$rootfolder}/load/pageis_yazi_dogrula.inc.php");
    break;
case "yazi_onay":
    require ("{$rootfolder}/load/pageis_yazi_tesekkur.inc.php");
    break;
case "olmayan_sayfa":
    require ("{$rootfolder}/load/pageis_olmayan_sayfa.inc.php");
    break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:48:10.133

一些常见的反馈，并没有直接解决您的问题，只是阻止它们：

```
#SEO friendly linking
... 
```

与其将大量规则硬编码到网络服务器配置（*.htaccess*）中，不如在其中只有一条规则，将所有对不存在文件的请求定向到您的应用程序中。然后在脚本内部处理请求。

你有很多重复的代码。其中大部分可以通过创建配置数据数组来处理：

```
$translate = array(
    'yazılar'  => 'yazilar',
    'iletişim' => 'iletisim',
    '...'      => '...',
);

if (isset($translate[$_GET['page']])) {
    $sayfa = $translate[$_GET['page']];
} 
```

`switch ($sayfa)`后面的完全一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:44:59.810

您`nonexistingpage`的 .htaccess 规则与您的不匹配。

# cvs - 从 Attic 恢复 CVS 模块

> ID：15923592
> 
> 赞同：3
> 
> 时间：2013-04-10T10:42:13.990
> 
> 标签：cvs

我从存储库中删除了一个 CVS 模块，即 HEAD。现在我需要将整个模块从 Attic 恢复到 HEAD 以进行项目工作。

您能否举例说明如何将已删除的模块从 Attic 恢复到 HEAD？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T18:08:17.983

@Burhan Ali 有点正确。没有恢复命令的原因是，CVS 与任何版本控制系统（可以在 30k 英尺级别）一样，表示文件的一系列更改或版本。因此，如果您想从删除中恢复，您必须使用内容创建一个新版本。CVS 将删除的文件存储在 Attic 目录中，但您不需要知道这一点。

```
filename is example.c
last version before removal was 1.41
    cvs up -r 1.41 example.c
    mv example.c xxx
    cvs up -A example.c  ( resets to HEAD )
    mv xxx example.c
    cvs add example.c
    cvs ci
    cvs stat example.c
...
... revision 1.43  ( 1.42 was in the Attic, 1.43 == 1.41 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:20:39.947

没有明确的命令可以恢复已删除的内容。您可以按日期 ( ) 签出旧版本`cvs checkout -D <date>`，然后使用`cvs add`并将`cvs commit`它们作为当前版本添加回 CVS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T10:28:14.507

您可以通过首先检查删除的修订版 ( ) 来恢复已删除的文件，`cvs rlog`然后使用以下命令删除该修订版：

```
cvs admin -oREV filename 
```

然后你可以这样做：

```
cvs co filename to get the revision before the delete. 
```

您可能希望将`filename,v`文件从`Attic`存储库中移动到父目录，但这不是使用该文件所必需的。

# c# - 如何在 Unity3D 中使用 C++ dll？

> ID：15923595
> 
> 赞同：7
> 
> 时间：2013-04-10T10:42:31.067
> 
> 标签：c#, c++, dll, unity3d

我知道[这个类似的问题](https://stackoverflow.com/questions/15634579/how-to-use-static-c-library-in-unity)，但它没有回应我的问题。

我`.dll`使用 Visual Studio 2010 编写了两个 s。一个是 C++，并与用 C++ 编写的 SDK 通信。另一个是该 C++ 库的 C# 包装器，因此它可以在 C# 上下文中使用。

我的计划是这会让我在 中使用我的代码`Unity3D`，但显然情况并非如此。如果它们不是程序集，似乎`Unity3D`不允许我将 s 作为资产导入。所以我可以添加我的 C# 包装器，但不能添加 C++ dll。`.dll``.NET`

这导致`DllNotFoundException`每当我尝试访问 C++ 库时。我试过简单地将 C++ 库复制到`Assets/Plugins`文件夹中，但结果相同。

有没有办法正确地做到这一点？这是我的项目设置中非常重要的部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:52:26.547

问题是当 p/invoke 运行时代码调用`LoadLibrary(YourNativeDllName)`.

您可以通过确保您的 DLL 在第一次 p/invoke 调用时位于 DLL 搜索路径上来解决此问题。例如通过调用[`SetDllDirectory`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686203.aspx).

我个人更喜欢的解决方案是让您的托管代码 p/invoke 调用以`LoadLibrary`将完整的绝对路径传递给本机 DLL。这样，当随后的 p/invoke 引发调用时`LoadLibrary(YourNativeDllName)`，您的本机 DLL 已经在进程中，因此将被使用。

```
internal static class NativeMethods
{
    [DllImport("kernel32", SetLastError = true, CharSet = CharSet.Unicode)]
    internal static extern IntPtr LoadLibrary(
        string lpFileName
    );
} 
```

然后在你的代码中的某个地方：

```
private static IntPtr lib;

....

public static void LoadNativeDll(string FileName)
{
    if (lib != IntPtr.Zero)
    {
        return;
    }

    lib = NativeMethods.LoadLibrary(FileName);
    if (lib == IntPtr.Zero)
    {
        throw new Win32Exception();
    }
} 
```

只需确保`LoadNativeDll`在调用任何 p/invokes 到该本地库之前调用将完整路径传递给本地库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-06T21:24:36.097

当 Unity 可以找到您的 DLL，但无法找到它的依赖项时，也会发生这种情况。明显的解决方法是将依赖 DLL 也放入 /Plugins 中，或者静态链接您的依赖。

不太明显的原因是当您的 DLL 动态依赖于 Visual Studio 运行时库时，*即*使用属性 -> C/C++ -> 代码生成 -> /MD 选项构建。将其更改为 /MT 以静态链接运行时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-05T20:46:55.800

请注意，DllNotFoundException 可能是由在调试而不是发布中构建 Unity DLL 引起的！

一个简单的疏忽可能会导致头痛。

# asp.net-mvc-4 - 如何在 ASP.NET MVC 4 中定义默认操作参数

> ID：15923598
> 
> 赞同：0
> 
> 时间：2013-04-10T10:42:35.587
> 
> 标签：asp.net-mvc-4

我正在关注 Pluralsight 视频来学习 MVC4。

在了解操作参数的默认值时，我在 RouteConfig.cs 中定义了以下设置

```
 routes.MapRoute(
            name: "cuisine",
            url: "cuisine/{name}",
            defaults: new { controller="cuisine", action="search", name=""}); 
```

我已经使用 Search() 创建了 CuisineController 作为操作方法，如下所示：

```
 public ActionResult Search(string name="India")
    {
        var message = Server.HtmlEncode(name);
        return Content(message);
    } 
```

根据我看到的视频，如果 URL 中没有传递任何内容，那么印度应该作为输出。但是，我得到了空字符串。我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:51:34.200

你必须使用 UrlParameter.Optional

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{name}", // URL with parameters
                new { controller = "Home", action = "Search", name = UrlParameter.Optional } // Parameter defaults
            );

public ActionResult Search(string name = "India")
        {
            var message = Server.HtmlEncode(name);
            return Content(message);
        } 
```

这在页面中完美地显示了“印度”。

# php - 在 Google Maps API 上使用带有 Store Locator 的数据库

> ID：15923599
> 
> 赞同：0
> 
> 时间：2013-04-10T10:42:43.910
> 
> 标签：php, javascript, google-maps, google-maps-api-3, mysqli

我正在使用 Google Maps API 上的商店定位器创建一个系统 - [http://storelocator.googlecode.com/git/index.html?utm_source=geoblog&utm_campaign=sl](http://storelocator.googlecode.com/git/index.html?utm_source=geoblog&utm_campaign=sl)

我正在使用这个例子： [http ://storelocator.googlecode.com/git/examples/dynamic.html](http://storelocator.googlecode.com/git/examples/dynamic.html)

我让它工作正常，但它是从 CSV 中提取的，而我希望它从数据库中提取。

可以在此处找到从 CSV 中提取数据的 javascript：http: [//storelocator.googlecode.com/git/examples/medicare-dynamic-ds.js](http://storelocator.googlecode.com/git/examples/medicare-dynamic-ds.js)

我查看了包含 storeLocator.DataFeed 类但似乎无法弄清楚如何正确使用它的文档（ [http://storelocator.googlecode.com/git/reference.html ）。](http://storelocator.googlecode.com/git/reference.html)

有没有人有这个从数据库中提取的例子，因为我正在努力解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:44:36.600

当您想使用数据库时，可以在[此处](https://developers.google.com/maps/articles/phpsqlsearch_v3)找到正确的示例。此示例的问题是它使用了不推荐使用的`mysql_`函数。下面的代码使用[**PDO**](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)而不是这些`mysql_`函数`phpsqlsearch_genxml.php`

```
//Connect to database
$dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
try {
// Prepare statement
$stmt = $dbh->prepare("SELECT  name, lat, lng, ( 3959 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM table HAVING distance < ? ORDER BY distance LIMIT 0 , 20");
// Assign parameters
$stmt->bindParam(1,$center_lat);
$stmt->bindParam(2,$center_lng);
$stmt->bindParam(3,$center_lat);
$stmt->bindParam(4,$radius);
//Execute query
$stmt->setFetchMode(PDO::FETCH_ASSOC);
$stmt->execute();
header("Content-type: text/xml");
// Iterate through the rows, adding XML nodes for each
while($row = $stmt->fetch()) {
    $node = $dom->createElement("marker");
    $newnode = $parnode->appendChild($node);
    $newnode->setAttribute("name", $row['name']);
    $newnode->setAttribute("lat", $row['lat']);
    $newnode->setAttribute("lng", $row['lng']);
    $newnode->setAttribute("distance", $row['distance']);
    }
echo $dom->saveXML();
 }
 catch(PDOException $e) {
echo "I'm sorry I'm afraid you can't do that.". $e->getMessage() ;// Remove or modify after testing 
file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", phpsqlsearch_genxml.php, ". $e->getMessage()."\r\n", FILE_APPEND);  
 }
//Close the connection
$dbh = null; 
```

# ios - 滚动视图的问题，不滚动全长

> ID：15923601
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:42:46.977
> 
> 标签：ios, objective-c, uiscrollview

我有一个滚动视图，添加在 IB 中，并且我在 IB 本身上添加了很多对象/控件。其中一些被添加到滚动视图中，但它们超出了它的范围。

回到课堂上，我正在像这样设置它的内容大小

```
 self.scrollView.delegate = self;

    self.scrollView.contentSize = CGSizeMake(self.view.bounds.size.width, self.view.bounds.size.height + 500); 
```

我观察到的滚动长度并没有那么多。我只是观察到 500 像素（而我在内容大小中设置的高度约为 900 像素）。

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:20:06.873

我使用 IB 设置滚动视图和内部控件，并且我让滚动视图比它自身的视图区域长，因为除非您在运行时动态绘制内部控件，否则为什么需要在代码中设置它。 ..我希望它有用

# arrays - 为什么我不能返回任意字符串数组？

> ID：15923602
> 
> 赞同：6
> 
> 时间：2013-04-10T10:42:49.707
> 
> 标签：arrays, delphi, delphi-xe3

编译器允许我执行以下操作：

```
procedure MyProc(const ADynData: array of string); 
```

或者

```
procedure MyProc(const ADynData: TStringDynArray); 
```

并像这样传递任意数据：

```
MyProc(['Data1', 'Data2']); 
```

但是，不允许

```
function MyFunc: TStringDynArray;
....
function MyFunc: TStringDynArray;
begin
    Result := ['Data1', 'Data2'];
end; 
```

或者

```
function MyFunc: TStringDynArray;
const
    CDynData: array[0..1] of string = ('Data1', 'Data2');
begin
    Result := CDynData;
end; 
```

为什么是这样？这在*技术上*不是一样的吗？

对于这些特定场景，返回任意字符串数组的推荐（也是最有效）方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T10:51:55.670

不，这不是一回事。在

```
procedure MyProc(const ADynData: array of string); 
```

该参数是一个[*开放数组参数*](http://docwiki.embarcadero.com/RADStudio/XE3/en/Parameters_(Delphi)#Open_Array_Parameters)，它与“普通”*动态数组*不同。该`[..]`语法只能用于在函数的开放数组参数中创建开放数组。（否则，`[..]`用于在代码中指定*集合*，例如`Font.Style := [fsBold, fsItalic]`。但是[集合](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Sets)只能将序数类型作为其“基本类型”，因此仍然没有“字符串集合”之类的东西。）

换句话说，不可能像您在第二个代码片段中尝试的那样在代码中编写动态数组，

```
function MyFunc: TStringDynArray;
begin
  result := ['Data1', 'Data2']; // Won't work.
end; 
```

但是，在新版本的 Delphi 中，几乎可以：

```
type
  TStringDynArray = array of string;

function MyFunc: TStringDynArray;
begin
  result := TStringDynArray.Create('A', 'B');
end; 
```

最后，

```
function MyFunc: TStringDynArray;
const
  CDynData: array[0..1] of string = ('Data1', 'Data2');
begin
  result := CDynData;
end; 
```

不起作用，因为`TStringDynArray`is a [*dynamic* array](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Dynamic_Arrays)，而`CDynData`is a [*static* array](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Static_Arrays)，它们是两种不同的基本类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T11:23:45.103

这种构造

```
['string1', 'string2'] 
```

被称为[开放数组构造函数](http://docwiki.embarcadero.com/RADStudio/en/Calling_Procedures_and_Functions#Open_Array_Constructors)。从[文档](http://docwiki.embarcadero.com/RADStudio/en/Calling_Procedures_and_Functions#Open_Array_Constructors)中：

> 开放数组构造函数允许您直接在函数和过程调用中构造数组。
> 
> 它们只能作为开放数组参数或变体开放数组参数传递。

因此，您不能使用开放数组构造函数来创建函数返回值。

* * *

如果数组中有固定数量的元素需要返回，则可以使用动态数组构造函数：

```
Result := TStringDynArray.Create('string1', 'string2'); 
```

* * *

但是，这不适用于可变数量的元素。现在，我知道您问题中的示例在数组中只有恒定数量的元素。但我确信您会遇到需要比动态数组构造函数提供更多灵活性的情况。

如果您希望创建现有动态数组的副本并将其返回，请使用[`Copy`](http://docwiki.embarcadero.com/Libraries/en/System.Copy).

```
Result := Copy(SomeOtherDynamicArray); 
```

当你手头有一个开放的数组时，这就会崩溃。您不能将开放数组传递给`Copy`. 就我个人而言，我认为这是一种耻辱，因为开放数组参数非常灵活和有用，我希望看到对它们的尽可能多的 RTL 支持。

因此，您最终不得不为这些情况编写辅助函数。您可以为每种数组类型编写一个专用的帮助程序，但这有点令人厌烦。这就是泛型派上用场的地方。为此，我有一个助手类。这是相关的摘录：

```
type
  TArray = class(Generics.Collections.TArray)
    ....
    class function Copy<T>(const Source: array of T): TArray<T>; overload; static;
    ....
  end;

class function TArray.Copy<T>(const Source: array of T): TArray<T>;
var
  i: Integer;
begin
  SetLength(Result, Length(Source));
  for i := 0 to high(Result) do begin
    Result[i] := Source[i];
  end;
end; 
```

现在，这适用于您的字符串数组，也适用于任何其他类型。像这样称呼它：

```
Result := TArray.Copy<string>(SomeStringOpenArray); 
```

需要指出的一个关键点是，我们使用的是动态数组的通用版本，`TArray<string>`而不是`TStringDynArray`. 如果您想认真使用泛型，那么您必须这样做。那是因为`TStringDynArray`赋值与`TArray<string>`声明为`array of string`. 更改您的代码库以供`TArray<T>`始终使用是有好处的。

以防万一有人对这个助手类的其余部分感兴趣，这里是：

```
type
  TArray = class(Generics.Collections.TArray)
  private
    class function Comparison<T>(SortType: TSortType): TComparison<T>; static;
    class function Comparer<T>(const Comparison: TComparison<T>): IComparer<T>; static;
  public
    class procedure Swap<T>(var Left, Right: T); static;
    class procedure Reverse<T>(var Values: array of T); static;
    class function Reversed<T>(const Values: array of T): TArray<T>; static;
    class function Contains<T>(const Values: array of T; const Item: T; out ItemIndex: Integer): Boolean; overload; static;
    class function Contains<T>(const Values: array of T; const Item: T): Boolean; overload; static;
    class function IndexOf<T>(const Values: array of T; const Item: T): Integer; static;
    class function Sorted<T>(var Values: array of T; SortType: TSortType; Index, Count: Integer): Boolean; overload; static;
    class function Sorted<T>(var Values: array of T; SortType: TSortType): Boolean; overload; static;
    class function Sorted<T>(var Values: array of T; const Comparison: TComparison<T>; Index, Count: Integer): Boolean; overload; static;
    class function Sorted<T>(var Values: array of T; const Comparison: TComparison<T>): Boolean; overload; static;
    class function Sorted<T>(GetValue: TFunc<Integer,T>; const Comparison: TComparison<T>; Index, Count: Integer): Boolean; overload; static;
    class procedure Sort<T>(var Values: array of T; SortType: TSortType; Index, Count: Integer); overload; static;
    class procedure Sort<T>(var Values: array of T; SortType: TSortType); overload; static;
    class procedure Sort<T>(var Values: array of T; const Comparison: TComparison<T>; Index, Count: Integer); overload; static;
    class procedure Sort<T>(var Values: array of T; const Comparison: TComparison<T>); overload; static;
    class function Copy<T>(const Source: array of T; Index, Count: Integer): TArray<T>; overload; static;
    class function Copy<T>(const Source: array of T): TArray<T>; overload; static;
    class procedure Move<T>(const Source: array of T; var Dest: array of T; Index, Count: Integer); overload; static;
    class procedure Move<T>(const Source: array of T; var Dest: array of T); overload; static;
    class function Concatenated<T>(const Source1, Source2: array of T): TArray<T>; overload; static;
    class function Concatenated<T>(const Source: array of TArray<T>): TArray<T>; overload; static;
    class procedure Initialise<T>(var Values: array of T; const Value: T); static;
    class procedure Zeroise<T>(var Values: array of T); static;
    class function GetHashCode<T>(const Values: array of T): Integer; overload; static;
    class function GetHashCode<T>(Values: Pointer; Count: Integer): Integer; overload; static;
  end;

class function TArray.Comparison<T>(SortType: TSortType): TComparison<T>;
var
  DefaultComparer: IComparer<T>;
begin
  DefaultComparer := TComparer<T>.Default;
  Result :=
    function(const Left, Right: T): Integer
    begin
      case SortType of
      stIncreasing:
        Result := DefaultComparer.Compare(Left, Right);
      stDecreasing:
        Result := -DefaultComparer.Compare(Left, Right);
      else
        RaiseAssertionFailed(Result);
      end;
    end;
end;

class function TArray.Comparer<T>(const Comparison: TComparison<T>): IComparer<T>;
begin
  Result := TComparer<T>.Construct(Comparison);
end;

class procedure TArray.Swap<T>(var Left, Right: T);
var
  temp: T;
begin
  temp := Left;
  Left := Right;
  Right := temp;
end;

class procedure TArray.Reverse<T>(var Values: array of T);
var
  bottom, top: Integer;
begin
  bottom := 0;
  top := high(Values);
  while top>bottom do begin
    Swap<T>(Values[bottom], Values[top]);
    inc(bottom);
    dec(top);
  end;
end;

class function TArray.Reversed<T>(const Values: array of T): TArray<T>;
var
  i, j, Count: Integer;
begin
  Count := Length(Values);
  SetLength(Result, Count);
  j := Count-1;
  for i := 0 to Count-1 do begin
    Result[i] := Values[j];
    dec(j);
  end;
end;

class function TArray.Contains<T>(const Values: array of T; const Item: T; out ItemIndex: Integer): Boolean;
var
  DefaultComparer: IEqualityComparer<T>;
  Index: Integer;
begin
  DefaultComparer := TEqualityComparer<T>.Default;
  for Index := 0 to high(Values) do begin
    if DefaultComparer.Equals(Values[Index], Item) then begin
      ItemIndex := Index;
      Result := True;
      exit;
    end;
  end;
  ItemIndex := -1;
  Result := False;
end;

class function TArray.Contains<T>(const Values: array of T; const Item: T): Boolean;
var
  ItemIndex: Integer;
begin
  Result := Contains<T>(Values, Item, ItemIndex);
end;

class function TArray.IndexOf<T>(const Values: array of T; const Item: T): Integer;
begin
  Contains<T>(Values, Item, Result);
end;

class function TArray.Sorted<T>(var Values: array of T; SortType: TSortType; Index, Count: Integer): Boolean;
begin
  Result := Sorted<T>(Values, Comparison<T>(SortType), Index, Count);
end;

class function TArray.Sorted<T>(var Values: array of T; SortType: TSortType): Boolean;
begin
  Result := Sorted<T>(Values, Comparison<T>(SortType));
end;

class function TArray.Sorted<T>(var Values: array of T; const Comparison: TComparison<T>; Index, Count: Integer): Boolean;
var
  i: Integer;
begin
  for i := Index+1 to Index+Count-1 do begin
    if Comparison(Values[i-1], Values[i])>0 then begin
      Result := False;
      exit;
    end;
  end;
  Result := True;
end;

class function TArray.Sorted<T>(var Values: array of T; const Comparison: TComparison<T>): Boolean;
begin
  Result := Sorted<T>(Values, Comparison, 0, Length(Values));
end;

class function TArray.Sorted<T>(GetValue: TFunc<Integer, T>; const Comparison: TComparison<T>; Index, Count: Integer): Boolean;
var
  i: Integer;
begin
  for i := Index+1 to Index+Count-1 do begin
    if Comparison(GetValue(i-1), GetValue(i))>0 then begin
      Result := False;
      exit;
    end;
  end;
  Result := True;
end;

class procedure TArray.Sort<T>(var Values: array of T; SortType: TSortType; Index, Count: Integer);
begin
  Sort<T>(Values, Comparison<T>(SortType), Index, Count);
end;

class procedure TArray.Sort<T>(var Values: array of T; SortType: TSortType);
begin
  Sort<T>(Values, SortType, 0, Length(Values));
end;

class procedure TArray.Sort<T>(var Values: array of T; const Comparison: TComparison<T>; Index, Count: Integer);
begin
  if not Sorted<T>(Values, Comparison, Index, Count) then begin
    Sort<T>(Values, Comparer<T>(Comparison), Index, Count);
  end;
end;

class procedure TArray.Sort<T>(var Values: array of T; const Comparison: TComparison<T>);
begin
  Sort<T>(Values, Comparison, 0, Length(Values));
end;

class function TArray.Copy<T>(const Source: array of T; Index, Count: Integer): TArray<T>;
var
  i: Integer;
begin
  SetLength(Result, Count);
  for i := 0 to high(Result) do begin
    Result[i] := Source[i+Index];
  end;
end;

class function TArray.Copy<T>(const Source: array of T): TArray<T>;
var
  i: Integer;
begin
  SetLength(Result, Length(Source));
  for i := 0 to high(Result) do begin
    Result[i] := Source[i];
  end;
end;

class procedure TArray.Move<T>(const Source: array of T; var Dest: array of T; Index, Count: Integer);
var
  i: Integer;
begin
  for i := 0 to Count-1 do begin
    Dest[i] := Source[i+Index];
  end;
end;

class procedure TArray.Move<T>(const Source: array of T; var Dest: array of T);
var
  i: Integer;
begin
  for i := 0 to high(Source) do begin
    Dest[i] := Source[i];
  end;
end;

class function TArray.Concatenated<T>(const Source1, Source2: array of T): TArray<T>;
var
  i, Index: Integer;
begin
  SetLength(Result, Length(Source1)+Length(Source2));
  Index := 0;
  for i := low(Source1) to high(Source1) do begin
    Result[Index] := Source1[i];
    inc(Index);
  end;
  for i := low(Source2) to high(Source2) do begin
    Result[Index] := Source2[i];
    inc(Index);
  end;
end;

class function TArray.Concatenated<T>(const Source: array of TArray<T>): TArray<T>;
var
  i, j, Index, Count: Integer;
begin
  Count := 0;
  for i := 0 to high(Source) do begin
    inc(Count, Length(Source[i]));
  end;
  SetLength(Result, Count);
  Index := 0;
  for i := 0 to high(Source) do begin
    for j := 0 to high(Source[i]) do begin
      Result[Index] := Source[i][j];
      inc(Index);
    end;
  end;
end;

class procedure TArray.Initialise<T>(var Values: array of T; const Value: T);
var
  i: Integer;
begin
  for i := 0 to high(Values) do begin
    Values[i] := Value;
  end;
end;

class procedure TArray.Zeroise<T>(var Values: array of T);
begin
  Initialise<T>(Values, Default(T));
end;

{$IFOPT Q+}
  {$DEFINE OverflowChecksEnabled}
  {$Q-}
{$ENDIF}
class function TArray.GetHashCode<T>(const Values: array of T): Integer;
// see http://stackoverflow.com/questions/1646807 and http://stackoverflow.com/questions/11294686
var
  Value: T;
  EqualityComparer: IEqualityComparer<T>;
begin
  EqualityComparer := TEqualityComparer<T>.Default;
  Result := 17;
  for Value in Values do begin
    Result := Result*37 + EqualityComparer.GetHashCode(Value);
  end;
end;

class function TArray.GetHashCode<T>(Values: Pointer; Count: Integer): Integer;
// see http://stackoverflow.com/questions/1646807 and http://stackoverflow.com/questions/11294686
var
  Value: ^T;
  EqualityComparer: IEqualityComparer<T>;
begin
  EqualityComparer := TEqualityComparer<T>.Default;
  Result := 17;
  Value := Values;
  while Count>0 do begin
    Result := Result*37 + EqualityComparer.GetHashCode(Value^);
    inc(Value);
    dec(Count);
  end;
end;
{$IFDEF OverflowChecksEnabled}
  {$Q+}
{$ENDIF} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T11:02:31.437

问题与

```
function MyFunc: TStringDynArray;
begin
  Result := ['Data1', 'Data2'];
end; 
```

是`['Data1', 'Data2']`被解释为一个[集合](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Sets)。

我有时会使用以下便利功能（但通常不在性能关键部分）：

```
function MakeStringArray(const Strings: array of string): TStringDynArray;
var
  i: Integer;
begin
  SetLength(Result, Length(Strings));
  for i := Low(Strings) to High(Strings) do
    Result[i] := Strings[i];
end {MakeStringArray}; 
```

使用它，您可以如下重写您的第一个示例：

```
function MyFunc: TStringDynArray;
....
function MyFunc: TStringDynArray;
begin
    Result := MakeStringArray(['Data1', 'Data2']);
end; 
```

但是，由于您使用的是 XE3，因此最好使用`TStringDynArray.Create`，就像 Andreas Rejbrand[建议](https://stackoverflow.com/a/15923806/60590)的那样。

# database - 平均函数未运行返回 NULL - DATETIME

> ID：15923603
> 
> 赞同：0
> 
> 时间：2013-04-10T10:42:51.523
> 
> 标签：database, sql-server-2005, join

我正在使用 sqlserver 2005。

**我的表 tradefile 包含以下重要列：**

```
Scrip_Code : nvarchar(25)
Sauda_Date : datetime   [value example: 3/1/2013 9:15:04 AM]
TradeType  : nvarchar(5)
Market_Rate: float 
```

我想取特定 sauda_date、scrip_code 和 tradetype 的平均市场价格。

**为此，我触发了以下查询：**

```
select avg(Market_Rate) 
from tradefile 
where 
Scrip_Code='ACC' and 
Sauda_Date =convert(datetime,'03/21/2013') 
```

此查询返回空值。

上述查询有什么错误？

**注意：** sauda_date 是日期时间，并且有时间和日期，如上例所示 [3/1/2013 9:15:04 AM]

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:02:04.253

```
SELECT CONVERT(DATETIME,'03/21/2013') 
```

如果你运行上面的，它将打印：

```
2013-03-21 00:00:00.000 
```

因此，您尝试将其与时间相匹配：

```
2013-03-21 09:15:04.123 
```

显然不会匹配。

**您需要将两者都转换为 DATE。**

```
Sauda_Date >= CONVERT(DATETIME, '03/21/2013') AND 
Sauda_Date < DATEADD(dd, 1, CONVERT(DATETIME, '03/21/2013')) 
```

源自[这个答案](https://stackoverflow.com/a/1848450/1711796)。

[测试](http://www.sqlfiddle.com/#!6/dbddd/5)。

**编辑：**删除`CONVERT(DATE, Sauda_Date)`方法，因为`DATE`在 SQL Server 2005 中没有定义，因为它[可能是一个坏主意](https://dba.stackexchange.com/questions/34047/cast-to-date-is-sargable-but-is-it-a-good-idea)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:44:45.980

错误是您的`where`子句过滤掉了所有行，或者`Market_Rate`总是`NULL`. 执行以下调试查询以确认：

```
select * --debug
from tradefile 
where 
Scrip_Code='ACC' and 
Sauda_Date =convert(datetime,'03/21/2013') 
```

# django - django cms - 通过 slug 解析页面 url

> ID：15923605
> 
> 赞同：4
> 
> 时间：2013-04-10T10:43:11.037
> 
> 标签：django, django-views, django-cms

是否可以通过其 slug 解析页面 url？就像是：

```
from django.core.urlresolvers import reverse
reverse('pages-details-by-slug',{slug:'my-page-slug'}) 
```

但我得到了：

```
NameError: name 'slug' is not defined 
```

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:58:25.987

Python 不是 Javascript；字典键需要被引用。

```
reverse('pages-details-by-slug', {'slug': 'my-page-slug'}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:00:55.167

解决了：

```
try:
    from cms.models import Title
    page = Title.objects.get(slug="my-page-slug").page
    return page.get_absolute_url()
except Title.DoesNotExist:
    pass 
```

# mysql - 如何使用 C3P0 池和 JDBC 为我的数据库检测不正确的端点

> ID：15923608
> 
> 赞同：0
> 
> 时间：2013-04-10T10:43:22.623
> 
> 标签：mysql, jdbc, c3p0

复制连接主机时的一个愚蠢的错误让我指向了一个不正确的端点......这阻止了初始化过程 30 分钟......

最后是例外：

*   采集尝试失败！！！清除挂起的获取。在尝试获取所需的新资源时，我们未能成功超过允许的最大获取尝试次数 (30)。

试图重现错误我只是用以下连接字符串指向 google.es

jdbc:mysql://google.es/myDB

正在初始化 c3p0 池... com.mchange.v2.c3p0.ComboPooledDataSource [acquireIncrement -> 1，acquireRetryAttempts -> 30，acquireRetryDelay -> 1000，autoCommitOnClose -> false，automaticTestTable -> null，breakAfterAcquireFailure -> false，checkoutTimeout -> 0 , connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -> 1hgeksr8t1vk3sn21ui8jk0|53689fd0, debugUnreturnedConnectionStackTraces -> false, 描述 -> null, driverClass -> com.mysql.jdbc.Driver, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hgeksr8t1vk3sn21ui8jk0|53689fd0, idleConnectionTestPeriod -> 0, initialPoolSize -> 3, jdbcUrl -> jdbc:mysql://google.es/myDB, maxAdministrativeTaskTime -> 0,maxConnectionAge -> 0, maxIdleTime -> 3600, maxIdleTimeExcessConnections -> 300, maxPoolSize -> 5, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 1, numHelperThreads -> 3, preferredTestQuery -> null, properties -> {user =*******, 密码=******** }, propertyCycle -> 0, statementCacheNumDeferredCloseThreads -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, userOverrides -> {}, usesTraditionalReflectiveProxies -> false]***

 ***并且初始化在这 30 分钟内被卡住了......

我希望它更快地抛出异常，但我不确定我应该触摸哪些配置值：c3p0 acquireRetryAttempts? 还是 jdbc socketTimeout？最重要的是，如果我改变它可能会破坏什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:55:19.653

默认设置将需要大约 30 秒（而不是 30 分钟！）来检测错误的数据库：它使acquireRetryAttempts=30 延迟acquireRetryDelay=1000ms，然后得出无法获取连接的结论。如果您希望更快地检测到不良端点，请重新使用这些变量中的一个或两个。如果愿意，您可以将 acquireRetryAttempts 设置为 1，在这种情况下，任何连接获取异常都将被解释为端点问题。

请参阅[http://www.mchange.com/projects/c3p0/#configuring_recovery](http://www.mchange.com/projects/c3p0/#configuring_recovery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:04:03.770

问题在于 JDBC 超时配置。

如本博客所述：[了解 JDBC 内部和超时配置](http://www.cubrid.org/blog/textyle/303584)

JDBC默认连接和socket超时为0ms，即不超时。

如果目标端点存在但没有应答（数据包可能被防火墙吞下）连接保持被困并且只有在一整分钟后（为什么一分钟？仍然是一个谜）c3p0 尝试连接重试......因此出现异常太长...

解决方案在于向 JDBC 添加一个 connectTimeout=XXXms（可以作为参数传递：mysql://google.es/myDB?connectTimeout=1000）并在一分钟后（30 次尝试 1 秒超时 1 秒重试延迟) 发生异常...

仍然需要根据您的需要调整所有参数，因为它们具有其他含义并且可能会破坏功能。还建议查看[c3p0 论坛帖子](https://forum.hibernate.org/viewtopic.php?t=934779)以了解可能的配置，例如激活 breakAfterAcquireFailure。***

# android - 与“触摸板 7”相比

> ID：15923612
> 
> 赞同：0
> 
> 时间：2013-04-10T10:43:44.297
> 
> 标签：android, eclipse, touchpad

Eclipse 无法识别我的 Versus Touchpad 7 进行调试。如果我在将 Touchpad 7 连接到我的计算机 (Vista) 时关闭调试，我可以传输文件，但如果调试已打开，那么我的计算机会搜索（不成功）驱动程序。我有一个可以很好地连接到 Eclipse 的小型 Android 手机。感谢您的任何想法。

# java - 无法访问 Rest-Resource 请求 url

> ID：15923614
> 
> 赞同：2
> 
> 时间：2013-04-10T10:43:47.303
> 
> 标签：java, rest, jira, jira-plugin, jira-rest-java-api

在 Jira 插件开发中，我在位置创建了一个休息资源类 - “[FOLDER]/Src/Main/JAVA/com.company.jira.plugin.REST/PlanIssuesRestResources”

现在，当我尝试在浏览器中访问以下网址时，

http://[主机]:2990/jira/rest/auth/1/PlanIssuesRestResource

然后它在浏览器中显示以下错误消息：

## 

```
<status-code>404</status-code>
<message>null for uri: http://localhost:2990/jira/rest/auth/1/PlanIssuesRestResource
</message>
</status> 
```

我的 Rest 资源类如下所示：

```
@Path("/message")
public class PlanIssuesRestResource {
 @GET
        @AnonymousAllowed
        @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
       @Path("/{key}")
      public Response getMessageFromPath(@PathParam("key") String key)
        {
            return Response.ok(new PlanIssuesResourceModel(key,     getMessageFromKey(key))).build();
        } 
```

我怎样才能访问这个 URL？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:43:14.297

据发现，

请点击以下链接了解有关 Rest 资源 URL 组合的详细信息：

[https://developer.atlassian.com/display/DOCS/REST+Plugin+Module](https://developer.atlassian.com/display/DOCS/REST+Plugin+Module)

以下是 answers.atalssianc.com 上的相关通信票。 [https://answers.atlassian.com/questions/156650/development-in-jira-plugin-how-to-use-rest-api-in-velocity-template-through-json](https://answers.atlassian.com/questions/156650/development-in-jira-plugin-how-to-use-rest-api-in-velocity-template-through-json)

谢谢达瓦尔索尼

# c - 清除文本文件的内容

> ID：15923615
> 
> 赞同：1
> 
> 时间：2013-04-10T10:43:49.193
> 
> 标签：c, windows, winapi, text-files

我正在开发服务器/客户端应用程序。我想在名为“Information.txt”的文本文件中维护所有活动客户端的信息。我每 3 秒更新一次这个文本文件。所以，我希望文本文件每 3 秒后清除其所有内容，而不删除文件。有什么办法吗？:( 我不想使用 freopen()。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:51:17.083

定期清除文件的一个问题是，如果您的进程在文件被清除后但在写入之前崩溃，您将丢失数据：旧数据已消失，但新数据尚未出现。

解决此问题的一种常见方法是创建一个新文件，将其写入，然后移动新文件以替换旧文件。这样你总是有一个文件，有时（在很短的时间内）你有两个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:45:51.893

尝试

> fopen（文件名，标志）

使用 flag="w" 或 "wb" 打开您的文件，它将被清除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:56:57.577

只需打开文件`fopen`并将标志设置为**w**或**w+**或**wb**

从[fopen 手册页](http://linux.die.net/man/3/fopen)

> **w**
> 
> 将文件截断为零长度或创建用于写入的文本文件。流位于文件的开头。
> 
> **w+**
> 
> 开放阅读和写作。如果文件不存在，则创建该文件，否则将其截断。流位于文件的开头。

# database - 使用 C# 使用 AWS IAM 安全地检查表中是否上传/存在条目

> ID：15923616
> 
> 赞同：0
> 
> 时间：2013-04-10T10:43:49.883
> 
> 标签：database, security, amazon-web-services, amazon-dynamodb, amazon-iam

我需要检查一个值是否已使用 C# 成功上传到表中。该表使用哈希和范围。目前我使用查询请求->查询响应->查询结果，然后检查结果是否为空。然而，这样做的问题是整个表条目（即所有字段）都被传递回程序。这不够安全。

我查看了 AWS IAM 访问策略，但是我似乎无法将“getitem”限制在字段级别，只能限制在表级别。

有关如何制定仅允许用户从表中获取哈希/范围的 IAM 访问策略的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:49:05.800

我认为这不可能通过 IAM 实现。然而，一种近似它的方法是加密除散列/范围之外的所有字段。

# asp.net-mvc - MVC 应用程序中不需要的缓存

> ID：15923618
> 
> 赞同：0
> 
> 时间：2013-04-10T10:43:53.667
> 
> 标签：asp.net-mvc, model-view-controller

我遇到了缓存问题，并尝试了所有我能找到的解决方案！

我有一个简单的创建屏幕，其中一行插入到表中（尽管在编辑现有行时我也遇到了同样的问题）。

创建行后，用户将返回到上一个屏幕，该屏幕仍显示旧数据。（与编辑相同的问题）

刷新页面没有区别。不同的浏览器有同样的问题。数据已成功添加到数据库中。只有通过重新启动应用程序，它才会刷新屏幕上的数据。

我尝试过的事情：

1：

```
DataContext.Refresh(RefreshMode.OverwriteCurrentValues) 
```

2：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")] 
```

3：

```
ModelState.Clear() 
```

这些都没有任何区别。我以前在编辑或创建时没有遇到过这个问题，所以我一定遗漏了一些东西。非常感谢任何帮助！

以下是控制器的相关部分：

```
ISISDataContext db = new ISISDataContext(StudentISIS.Properties.Settings.Default.ISISConn.ToString());

    public ActionResult Index()
    {
        var student = (ISIS2Models.Student)Session["CurrentUser"];

        return View(student);
    }

    public ActionResult STGCreate(int id)
    {
        var enrolment = db.Enrolments.Single(e => e.EnrolmentID == id);
        return View(enrolment);
    }

    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult STGCreate([Bind(Exclude = "Id")] StudentGrade STGToCreate, FormCollection collection)
    {
        var STG = new StudentGrade();

        STG.Grade = collection["StudentTG"];
        STG.EnrolmentID = int.Parse(collection["Enrolment"]);
        STG.DateChanged = DateTime.Now;

        db.StudentGrades.InsertOnSubmit(STG);
        db.SubmitChanges();

        return RedirectToAction("Index");
    } 
```

编辑：

以下是索引视图中的代码，它遍历注册以显示成绩：

```
<%foreach (var en in Model.Enrolments) {%>
//Some table stuff
<td>
<%try
        { %>
      <%= Html.ActionLink(en.StudentGrades.Grade,"STGEdit",new {controller = "Progress", id = en.StudentGrades.StudentGradeID})%>
      <%}
        catch (NullReferenceException) {%><%= Html.ActionLink("Set","STGCreate",new {controller = "Progress", id = en.EnrolmentID})%><% } %>
      </td>
//Some more table stuff

<%}% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:48:02.437

行从何而来？是你的 ISIS2Models.Student 课吗？我只能假设这是因为您的`Index`方法中的代码太少了。

如果是，并且您将其存储在会话中，那么您不会更新该值，因此当您从内部检索它时，`Index`它仍将具有相同的旧值。

您需要做的是每次调用`Index`. 像这样的一些方法：

```
public ActionResult Index()
{
    var currentUser = (ISIS2Models.Student)Session["CurrentUser"];

    var student = GetStudentById(currentUser.ID);//this will get the up-to-date student record from the DB

    return View(student);
} 
```

# sqlite - SQLite 外连接列过滤

> ID：15923627
> 
> 赞同：0
> 
> 时间：2013-04-10T10:44:15.783
> 
> 标签：sqlite, left-join

作为一项训练练习，我正在研究一个类似于英雄联盟的虚构 SQLite 数据库，我需要执行左外连接以获取所有玩家的表，如果他们有未调用的皮肤，也`'Classic'`返回这些。

我目前有这个查询：

```
SELECT * FROM players
        LEFT OUTER JOIN (SELECT * FROM playerchampions WHERE NOT championskin = 'Classic')
            ON name = playername 
```

它返回了我要查找的内容，但也有很多我不想要的列（玩家经验、玩家 IP、玩家 RP、玩家姓名）`playerchampions`。这两个表的代码如下：

```
CREATE TABLE players ( 
    name       TEXT    PRIMARY KEY,
    experience INTEGER,
    currencyip INTEGER,
    currencyrp INTEGER 
);
CREATE TABLE playerchampions ( 
    playername   TEXT REFERENCES players ( name ) ON UPDATE CASCADE,
    championname TEXT REFERENCES champions ( name ) ON UPDATE CASCADE,
    championskin TEXT REFERENCES skins ( skinname ) ON UPDATE CASCADE,
    PRIMARY KEY ( playername, championname, championskin ) 
); 
```

正如我所说，查询执行，但我不能使用 SELECT player.name, playerchampions.championname, playerchampions.championskin，因为 playerchampions 列在返回时没有给出正确的表名。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:50:13.560

尝试使用别名：

```
SELECT p.name, c.championskin FROM players p LEFT OUTER JOIN (SELECT pc.playername playername, pc.championskin championskin FROM playerchampions pc WHERE NOT pc.championskin = 'Classic') c ON p.name = c.playername; 
```

不确定它是否正是你需要的，但它会让你更接近......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:51:02.227

```
SELECT * FROM players p LEFT OUTER JOIN playerchampions pc ON (p.name = pc.playername)     WHERE NOT pc.championskin = 'Classic' 
```

# python - Python django LRS 无法设置。找不到文件错误

> ID：15923631
> 
> 赞同：1
> 
> 时间：2013-04-10T10:44:28.623
> 
> 标签：python, django, tin-can-api

我正在使用[ADL LRS](https://github.com/adlnet/ADL_LRS/)设置 LRS（学习记录存储）系统供我自己使用。它使用`TIN CAN API`. 我正在使用 ubuntu 服务器

正如文档所述，对于 LRS 的设置，我需要安装 django 并为 LRS 设置它。ADL_LRS 中的 adl_lrs 文件夹包含 django(settings.py) 的设置文件。我对django有点陌生，所以我不能完全理解这部分文件的含义-

```
# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = '/var/www/adllrs/media/'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://my-site-name.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
) 
```

它声明- 1.`MEDIA_ROOT = '/var/www/adllrs/media/'`我认为这意味着将媒体文件（如歌曲和视频）放在此位置 2.`STATIC_ROOT = ''`我认为这意味着包含 HTML、CSS、js 文件的静态目录的路径。

在克隆 git 时，我设置了 LRS，顺便说一下，它启动了，但所有的 CSS 都坏了。我查看了 DOM 检查器，其中 CSS 文件的链接类似于-

```
http://my-site-name.com:8000/static/admin/css/base.css 
```

当我访问上面的 url 以查看发生了什么时，我得到了以下 HTML 输出（与访问主页时得到的相同，即**[http://my-site-name.com:8000](http://my-site-name.com:8000)**）-

```
Page not found (404)
Request Method:     GET
Request URL:    http://my-site-name.com:8000/

    Using the URLconf defined in adl_lrs.urls, Django tried these URL patterns, in this order:

        ^XAPI/
        ^xapi/
        ^admin/

    The current URL, , didn't match any of these. 
```

我的 urls.py 看起来像 -

```
url(r'^XAPI/', include('lrs.urls')),
url(r'^xapi/', include('lrs.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)) 
```

显然，我没有在指向错误的 urls.py 中提及我的主页。那么我应该把 CSS、JS 文件放在哪里来修复损坏的 CSS 并为此创建一个默认主页？而且我还尝试从 wordpress 发送锡罐语句，但我无法在我的服务器上获取语句。谁能告诉我如何在 ubuntu 上设置正确的 ADL LRS。

PS-不要告诉我阅读文档，因为我已经做了几十次了。告诉我在实施文档时我哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T12:49:23.403

听起来你让 LRS 只用 gunicorn 运行。gunicorn 本身并不提供像 JS 和 CSS 这样的静态文件。我发现另一个关于使用 gunicorn 提供静态文件的 SO 页面：[https ://stackoverflow.com/a/12801140/1187723](https://stackoverflow.com/a/12801140/1187723)

至于 LRS，当我在本地开发和测试时，我会运行 Django 的测试服务器，它会传递静态文件。在项目的根目录 ADL_LRS 中，使用`python manage.py runserver`. [https://docs.djangoproject.com/en/1.4/ref/django-admin/#runserver-port-or-address-port](https://docs.djangoproject.com/en/1.4/ref/django-admin/#runserver-port-or-address-port)

[当我们在https://lrs.adlnet.gov/xapi/](https://lrs.adlnet.gov/xapi/)部署 LRS 时，我们使用配置为提供静态文件的 nginx。[我们在https://github.com/adlnet/ADL_LRS/wiki/Using-Nginx-for-Production](https://github.com/adlnet/ADL_LRS/wiki/Using-Nginx-for-Production)有一些关于它的初始设置

# css - 设置固定 div 的高度（响应式）

> ID：15923634
> 
> 赞同：1
> 
> 时间：2013-04-10T10:44:41.160
> 
> 标签：css, responsive-design, positioning

我有一个底部有一个简单导航的网站。该导航在左侧具有 100px 的固定高度：

```
.mainNavigationWrapper{
position: fixed;
bottom: 0;
left: 0;
width: 100%;
height: 100px;
} 
```

现在，我想在单击特定按钮时淡入一个框。该框应该从文档顶部到达导航的开头。我如何实现这一点，因为我有固定的导航高度，但盒子的高度是动态的？

我个人的解决方法是以下脚本：

```
(function() {

var height = $(window).height() ;

console.log(height) ;
height = height - 100 ;

$('.treeMenu').css({
    'height': height
});

$(window).resize(function(){
    var height = $(window).height() ;

    console.log(height) ;
    height = height - 100 ;

    $('.treeMenu').css({
        'height': height
    });
});

}()); 
```

但这对我来说似乎是错误的，我想知道是否有更好的方法来做到这一点，也许是纯 CSS。

这是一个显示问题的小提琴，用上面提到的解决方案解决：

[JSFiddle](http://jsfiddle.net/MYNN7/)

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:14:51.223

[http://jsfiddle.net/PpDQh/](http://jsfiddle.net/PpDQh/)

```
.treeMenu{
overflow-y: auto;
position: fixed;
top: -100px;
background: rgba(18, 24, 18, 0.86);
width: 15em;
height: 100%;
}
.padder {
padding-top: 100px;
} 
```

我将 treeMenu 的高度设置为 100%，并在里面添加了一个 padder-div。

基本上你让额外的 100px 在顶部重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:29:32.410

还有其他解决方案吗？

我使用了这个，但如果有内容溢出，它会导致滚动条向上移动。

这是该问题的屏幕截图：

[http://sprottenwels.net/drive/sc.png](http://sprottenwels.net/drive/sc.png)

# javascript - 获取UIWebView当前的html内容？

> ID：15923635
> 
> 赞同：1
> 
> 时间：2013-04-10T10:44:43.463
> 
> 标签：javascript, ios, uiwebview

我从`NSBundle`using`UIWebView`的`loadRequest`方法加载了一个 html 模板。html 模板本身有大量的文本框（比如 20 个）。在我填充所有文本框后，我想要这些填充值的 html。我试过了，

```
[myWebView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"]
//even body.outerHTML, documentElement.innerHTML won't work 
```

但它在填充这些值之前给了我原始的 html 模板。我该怎么做？我正在考虑这样做，通过阅读每个文本框的内容，通过javascript，

```
[myWebView stringByEvaluatingJavaScriptFromString:@"document.getElementById('name').value"] 
```

然后读取并替换 html 的字符串。

有没有其他更好的方法来做到这一点？或者是否有任何 javascript 方法来读取网页的当前内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:40:55.593

你是完全正确的，`.innerHTML`不会`.outerHTML`给你 DOM 的更新状态。

但是，由于您已经使用 Javascript 进行查询，因此您可以创建一个 JSON 字符串，其中包含所有当前输入的值的列表：

```
NSString *jsonString = [myWebView stringByEvaluatingJavaScriptFromString:@"(function(fields) { var O=[]; for(var i=0; i<fields.length;i++) {O.push(fields[i].value);} return JSON.stringify(O); })(document.querySelectorAll('input[type="text"]'))"]; 
```

然后，您可以在您的本机代码中解析它，如果它有效，它应该`NSArray`以字符串的形式出现。

# php - mongo count(*) 与 php 但不发送所有结果数组

> ID：15923639
> 
> 赞同：0
> 
> 时间：2013-04-10T10:44:49.670
> 
> 标签：php, sql, mongodb, count

我正在用 PHP 编写脚本并尝试转换 SQL

```
SELECT COUNT(*) AS Rank  
FROM user    
WHERE  user.lvl > $user_level 
```

向 Mongo 查询。

我发现只有一个决定：

```
$nosql = array(
     'lvl' => array('$gt' => $user_level)
);    
$result = $collection->find($nosql);
$length = count(iterator_to_array($result)); 
```

1.  获取所有满足条件的对象
2.  并在 PHP 中计算它们

可以在不发送所有数组的情况下获得所需对象的数量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:52:48.027

mongodb 可能会`count`产生这样的结果，您不需要使用`count(iterator_to_array($result));`

```
$nosql = array(
 'lvl' => array('$gt' => $user_level)
);    
$result = $collection->find($nosql);
$length = $result->count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-01T18:39:40.517

新驱动没有实现 `$cursor->count()`use`$collection->count()`而是

```
$collection->count($filter) 
```

# java - 在 JBos 的 servlet 中使用 TCP 套接字

> ID：15923642
> 
> 赞同：0
> 
> 时间：2013-04-10T10:45:03.003
> 
> 标签：java, sockets, jakarta-ee, jboss, jboss7.x

下一个问题是：有一个服务器，它使用 TCP 套接字与其连接，其他服务器与 JBoss 连接。有没有办法通过 TCP 套接字从 JBos 的 servlet 连接到其他服务器？

我知道 servlet 无法直接连接到 TCP 套接字。但是也许有任何方法可以创建一些使用套接字并且可从 servlet 获得的较低级别的接口？或者存在其他一些可以解决我的问题的 JavaEE 魔法。

PS 我对 JBoss 和 Java EE 完全陌生。

PPS JBoss AS 7.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:47:22.343

yes there is. you could write a JCA conenctor and inject that into your webapp, which could use it. [JCA](http://itdevworld.wordpress.com/2008/08/26/java-connector-architecture-jca/) (java connector architechture) is a spec that allows Java EE servers to connect to external systems - like JDBC

# css - 自定义字体在 IE 8 中不起作用

> ID：15923648
> 
> 赞同：1
> 
> 时间：2013-04-10T10:45:26.130
> 
> 标签：css

字体代码在 IE8 中不起作用。

```
@font-face {
    font-family: 'Conv_DBModern';
    src: url('fonts/DBModern.eot?#iefix') format('embedded-opentype'),
         url('fonts/DBModern.woff') format('woff'), 
         url('fonts/DBModern.ttf') format('truetype'), 
         url('fonts/DBModern.svg#Conv_DBModern') format('svg');
    font-weight: normal; font-style: normal;
}

.header_everywhere_text {
    color: #FFFFFF;
    font-family: 'Conv_DBModern';
    font-size: 5.44em;
    margin: 0 auto;
    position: relative;
    text-transform: uppercase;
    top: 150px;
    width: 1030px; 
} 
```

你能告诉我我做错了什么吗？

# delphi - Delphi，将 cookie 集成或组合或加入 Internet 浏览器

> ID：15923649
> 
> 赞同：1
> 
> 时间：2013-04-10T10:45:31.727
> 
> 标签：delphi, twebbrowser

我正在使用 Mozilla firefox 登录特定网站，有时我也使用 Internet Explorer 登录同一网站。

我也在使用 Delphi 的 TWebbrowser（mywebbrowser），当我指向 URL 进行导航时，它指出我已经从 Internet Explorer 登录，但我想使用 Mozilla Firefox 的 cookie，所以如果我登录使用 Firefox 访问网站并使用我自己的 WebBrowser 我将不再需要登录。

只是想问是否可以将Mozilla Firefox的cookie设置为Internet Explorer会解决吗？或者还有更多？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:39:53.410

TWebBrowser 是 IE 的 ActiveX/COM 对象的包装器，它与包含 cookie 的独立 IE 浏览器共享相同的核心。

对于您的要求，您必须手动访问和导出 Firefox 的 cookie（我不知道 Firefox 是否有一个 API，但我对此表示怀疑，因此您必须在线搜索更多详细信息）并重新格式化它们作为文本文件保存到 IE 的 cookies 文件夹中。Firefox 和 IE 都不会为您执行导出/导入。

# hover - 在 HTML img src="image.jpeg" 内部时，如何在图像上添加灰色悬停效果

> ID：15923652
> 
> 赞同：0
> 
> 时间：2013-04-10T10:45:35.553
> 
> 标签：hover

当您将鼠标悬停在图像上时，我正在尝试为图像添加浅灰色，我实现了一个 jquery 滑块，它通过下面的代码拉入图像

```
<li>
<img src="new_z1.jpg" alt="" width="250" height="100">  </li> 
```

向图像添加灰色悬停效果的最佳方法是什么？

这是网站，轮播位于页面底部，带有所有徽标

[http://goo.gl/CoZgB](http://goo.gl/CoZgB)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:52:17.657

你想让你的图像灰度吗？如果是这样，就用这个

[**演示**](http://jsfiddle.net/35zJ3/)

反向 [**演示**](http://jsfiddle.net/35zJ3/1/)

```
img:hover {
     filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+, Firefox on Android */
     filter: gray; /* IE6-9 */
    -webkit-filter: grayscale(100%); /* Chrome 19+, Safari 6+, Safari 6+ iOS */
} 
```

如果您需要平滑度，只需使用 CSS3 过渡 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:56:09.120

这是一个对同一件事有帮助的演示：

[http://webdesignerwall.com/tutorials/html5-grayscale-image-hover](http://webdesignerwall.com/tutorials/html5-grayscale-image-hover)

或者，您可以在悬停时加载不同的图像。这需要更少的代码，但需要另一个图像加载。

# android - 在android中垂直和水平滚动的元素

> ID：15923659
> 
> 赞同：-3
> 
> 时间：2013-04-10T10:45:45.020
> 
> 标签：android

在（Android）中建议我使用哪个元素，以便当用户处于纵向时我可以垂直滚动屏幕上的数据，并且当用户处于横向时能够水平滚动。

并告诉我是否必须使其成为自定义元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:53:14.203

您必须检测您拥有的显示方向。为此使用布局检测或创建两个布局（一个用于水平视图，第二个用于垂直视图）并使用 ScrollView

ScrollView 只支持垂直滚动。对于水平滚动，使用 Horizo​​ntalScrollView。

[http://developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:48:34.017

`ScrollView`用作布局元素的容器：[http](http://developer.android.com/reference/android/widget/ScrollView.html) : //developer.android.com/reference/android/widget/ScrollView.html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:53:28.137

用于`ScrollView`在垂直方向滚动整个屏幕

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <your items>
</ScrollView> 
```

用于`HorizontalScrollView`水平滚动，

[如何使用水平滚动视图？](https://stackoverflow.com/questions/10021993/how-to-use-horizontalscrollview)

是的，你需要两种不同的纵向和横向布局并放在不同的文件夹中

用于`ListView`获取字符串等项目的滚动列表

# iphone - 从 UISearchBar 返回的 UITextField

> ID：15923661
> 
> 赞同：0
> 
> 时间：2013-04-10T10:45:46.150
> 
> 标签：iphone, ios

如何`UITextField`辞职`UISearchBar`？我尝试使用以下代码

```
 UIView * subView;
    NSArray * subViews = [self.searchBar subviews];
    for(subView in subViews)
    {
        if( [subView isKindOfClass:[UITextField class]] )
        {
            ((UITextField*)subView).delegate=self;
            ((UITextField*)subView).returnKeyType=UIReturnKeyDone;
            break;
        }
    }

    for (UIView *subview in self.searchBar.subviews)
    {
        if ([subview conformsToProtocol:@protocol(UITextInputTraits)])
        {
            [(UITextField *)subview setClearButtonMode:UITextFieldViewModeWhileEditing];
        }
    } 
```

并添加了 TextField Delegate 方法

```
 - (BOOL)textFieldShouldReturn:(UITextField *)textField {

    [textField resignFirstResponder];

  return YES;
   } 
```

这可行，但如果文本字段不为空，这只会让键盘退出。如果文本字段为空，则它不会辞职

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:49:25.380

用这个 ：

```
[searchBar resignFirstResponder]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:51:05.510

首先在 .h 文件中设置委托，如下所示...

```
 @interface yourViewController : UIViewController<UISearchBarDelegate> 
```

当你想放弃`UISearchBar`简单使用波纹管的键盘时..

```
[searchBar resignFirstResponder]; 
```

**更新：**

```
-(BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar{
    [self.searchBar resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:07:13.823

请做这个...

```
-(void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText
{
    if (searchBar.text.length == 0)
        [searchBar resignFirstResponder];
} 
```

我希望这会正常工作。

# iframe - FFDEC_H264 丢弃非关键帧

> ID：15923662
> 
> 赞同：0
> 
> 时间：2013-04-10T10:45:46.470
> 
> 标签：iframe, ffmpeg, gstreamer

我正在开发一个示例 GStreamer 应用程序来播放 MPEG2TS 视频。

我的管道是：

> 应用程序！h264解析！ffdec_h264 ！ffmpeg色彩空间！ximagesink

如果我在不设置任何时间戳的情况下抽取数据，则所有帧都将被播放

```
videoBuffer = gst_app_buffer_new (rawVideo, bufSize, test_free_video, rawVideo); 
```

但是，如果我将时间戳设置为缓冲区，则只会播放 I 帧：

```
videoBuffer = gst_app_buffer_new (rawVideo, bufSize, test_free_video, rawVideo);
GST_BUFFER_TIMESTAMP(videoBuffer)  = calc_timestamp(rawVideo); 
```

`calc_timestamp()`是基于 PES 标头信息计算时间戳的函数

从 GST_LOGS：

```
Dropping non-keyframe (seek/init)
Dropping non-keyframe (seek/init)
Dropping non-keyframe (seek/init) 
```

上述日志不断重复。我没有任何线索，为什么会发生这种情况？任何输入将不胜感激。

在此先感谢，克兰蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:35:46.213

最后我发现了问题。计算非关键 [p/b] 帧的时间戳时出现问题，因为哪个解码器丢弃了所有非关键帧。

如果您遇到与我相同的问题，请重新检查发送到解码器的帧的时间戳计算

# ruby-on-rails - 在一个动作中渲染不同的视图

> ID：15923664
> 
> 赞同：29
> 
> 时间：2013-04-10T10:45:52.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, class, model-view-controller, view

我想在我的 rails 应用程序中为相同的帖子提供两种视图。例如 - 在一个登录用户可以更新和编辑帖子的地方，在另一个地方，任何用户都可以查看它并对其发表评论或选择它。

我该怎么办？我需要单独的课程吗？我知道我需要一个单独的视图，但是模型和控制器呢？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-10T10:55:36.357

***1.case：***您的视图将具有相似的内容，但只有登录用户才会有额外的选项，如编辑。

您应该使用局部视图，并在主视图中编写如下内容：

```
<% if signed_in? %>
    <%= render 'edit_form' %>
<% end %> 
```

请记住，partial 的名称应始终以下划线开头，因此在这种情况下，您的 partial 将被称为`_edit_form.html.erb`or `_edit_form.html.haml`，具体取决于您使用的内容。

***2.case：***根据用户是否登录，你想要呈现完全不同的视图，那么你应该在你的控制器中处理它：

```
def show
  if signed_in?
    render 'show_with_edit'
  else
    render 'show_without_edit`
  end
end 
```

您的文件将被命名`show_with_edit.html.erb`为`show_without_edit.html.erb`

此外，如果您的登录用户视图被调用，`show`那么您可以这样做：

```
def show
  render 'show_without_edit' unless signed_in?
end 
```

***3.case：***如果您想根据用户是否登录来改变一切，您可以创建一些自定义方法并在原始操作中调用它们，如下所示：

```
def show 
  if singed_in? 
    show_signed_in
  else
    show_not_signed_in
  end
end

private

def show_signed_in
   # declaring some instance variables to use in the view..
   render 'some_view'
end

def show_not_signed_in
   # declaring some other instance variables to use in the view..
   render 'some_other_view'
end 
```

# android - 如何使用最新消息更新 ListView

> ID：15923670
> 
> 赞同：0
> 
> 时间：2013-04-10T10:46:12.723
> 
> 标签：android, sqlite

目前我有以下代码来显示表中发件人的电话号码。

```
public List<Message> getAllMessages() {
    final String query = "SELECT DISTINCT Sender FROM " + MYDATABASE_TABLE
            + " GROUP BY Sender";
    List<Message> messages = new ArrayList<Message>();

    Cursor cursor = sqLiteDatabase.rawQuery(query, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Message sender = cursorToMessages(cursor);
        messages.add(sender);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return messages;
} 
```

然后我使用 ListView 显示结果：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.messages);

    mySQLiteAdapter = new SQLiteAdapter(this);
    mySQLiteAdapter.openToRead();

    List<Message> values = mySQLiteAdapter.getAllMessages();

    ArrayAdapter<Message> adapter = new ArrayAdapter<Message>(this,
            android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
} 
```

那将只显示发件人的号码。现在，如何使用列表视图在消息上方显示发件人的号码和右侧的日期？

我想创建与内置消息传递相同的列表。

我是否需要创建另一个查询以根据发件人分组获取最新记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:56:36.333

如果您想制作更复杂的 ListView，显示更多数据，您将需要创建自己的自定义适配器类。

作为一个简单的[例子](https://stackoverflow.com/questions/11905689/android-programming-tutorials-tutorial-5)。

Commonsware 在这个主题上有一些非常有用的例子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T12:49:45.480

adapterObj.notifyDatasetChanged() 方法用最新消息刷新列表视图。

# ios - 在后台线程上执行核心数据保存？

> ID：15923671
> 
> 赞同：2
> 
> 时间：2013-04-10T10:46:12.923
> 
> 标签：ios, objective-c, core-data, structure, nsmanagedobjectcontext

我有一个按钮，它将 Core Data SQLite 中的选定条目标记为“收藏夹”，这意味着我只是`BOOL`将该索引的一个从关闭翻转到打开。

目前，当我这样做时，我会调用，`save`根据`managedObjectContext`Instruments 的说法，这可能需要 500 毫秒，甚至更多。

我有一些同时执行的代码会触发一个漂亮的小粒子爆炸（“万岁，最喜欢的！”），但我遇到了一个问题，即爆炸被延迟到`save`完成之后。

我不知道为什么，因为触发爆炸的代码在`save`调用之前。我是一个相对较新的程序员，所以也许我遗漏了一些东西，但是在这种情况下，代码不会逐行执行，因为会触发爆炸，然后保存会在进行时发生？这里的委托调用也可能需要一些时间，但同样的问题也适用，如果它在这些代码行之后有什么关系呢？

**编辑：**我是否正确地说，在粒子出现在下一行代码之前，主线程被阻塞，这意味着 UI 无法自行更新？

这是我的代码：

```
// Particle animation
LikeExplosion *likeExplosionView = [[LikeExplosion alloc] initWithFrame: CGRectMake(0, 0, 320, 400)];
[likeExplosionView setUserInteractionEnabled: NO];
[self.view addSubview: likeExplosionView];
[self.view bringSubviewToFront: likeExplosionView];
[likeExplosionView decayOverTime: 1.1];

// Delegate call to reload tableview elsewhere
[self.delegate detailViewControllerDidLikeLine];

// Update current object
[_selectedLine setIsLiked: [NSNumber numberWithBool: YES]];
[_selectedLine setIsDisliked: [NSNumber numberWithBool: NO]];

// Update context
NSError *error;
if (![[[CDManager sharedManager] managedObjectContext] save:&error]) NSLog(@"Saving changes failed: %@, %@", error, [error userInfo]); 
```

第一个问题：**当我在方法中首先调用动画代码时，为什么会有延迟？**

第二个问题：**将`save`调用放在后台线程上会解决问题吗？这样做是否安全/好主意？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T10:59:16.720

动画，通常与 UI 有关的任何事情都在**主线程**上执行。如果您不希望磁盘持久性（保存过程）阻止您的 UI（主线程），您需要通过`NSManagedObjectContext`'`initWithConcurrencyType:`方法将上下文放在它自己的私有队列中。私有队列将为您处理与上下文有关的任何后台线程。这三种类型是：

```
NSConfinementConcurrencyType
NSPrivateQueueConcurrencyType
NSMainQueueConcurrencyType 
```

你会想要`NSPrivateQueueConcurrencyType`.

您可以通过使用具有不同并发类型的子/嵌套托管对象上下文来采用更复杂的架构路线，但如果您是 Core Data 的新手，请坚持使用单个上下文，直到您牢牢掌握上下文和队列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T11:06:21.320

1）在主运行循环完成其循环之前，您的动画不会开始运行。这个循环不会像`save:`阻塞方法一样完成。

2）将您的保存移动到后台线程将解决该问题，但您必须`managedObjectContext`在主线程中访问主线程，因此，您要么必须使用后台上下文：

```
NSManagedObjectContext* context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(mergeChanges:)
                                             name:NSManagedObjectContextDidSaveNotification
                                           object:context];
[context performBlock:^{
    //make changes
    NSError* error = nil;
    [context save:&error];
    //remember to remove observer after the save (in mergeChanges: and dealloc)
}]; 
```

您可以通过在下一个运行循环中安排主线程上的保存来启动动画而无需移动到后台，方法是使用：`[self performSelectorOnMainThread:@selector(saveMain) withObject:nil waitUntilDone:NO];`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T11:04:30.673

在 CIMGF.com 上查看[这篇精彩的文章！](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/);)

阅读本教程后，您应该知道如何解决此问题。

# asp.net - 用于自定义主题（换肤）asp.net 的 CSS 结构

> ID：15923673
> 
> 赞同：0
> 
> 时间：2013-04-10T10:46:18.747
> 
> 标签：asp.net, html, css

我正在开发一个 Web 应用程序，它将托管在具有不同外观（UI）的多个域上。所以我正在规划静态内容（CSS、图像、JS）的结构，这样如果我想在多个域上托管相同的应用程序一个域我需要对 CSS 做更少的更改。所以我计划了以下结构

*   资源
    *   CSS
        *   rootstyle.css（这里我会放置定位相关的样式）
    *   站点 1 的 CSS
        *   自定义主题.css
    *   站点 2 的 CSS
        *   自定义主题.css

所以在这里我将为每个站点创建一个单独的文件夹，并为该站点编写一个自定义主题 css。我做得对还是有其他更好的方法来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:57:27.137

`App_Themes`为此，您应该使用文件夹。

您可以在其中创建不同的文件夹。
例子：-

1.  红色主题
2.  绿色主题
3.  黄色主题

你可以把你个人的主题文件样式表放在里面。

这是一个很好的例子
[http://www.devproconnections.com/article/aspnet2/dynamic-themes-123058](http://www.devproconnections.com/article/aspnet2/dynamic-themes-123058)

# ios - 使用 uislider 更改 CGContextSetLineWidth

> ID：15923677
> 
> 赞同：0
> 
> 时间：2013-04-10T10:46:30.783
> 
> 标签：ios, objective-c, uislider

我正在尝试用 更改线条笔划`UISlider`，但它不起作用。滑块值没问题，但没有任何改变。滑块在显示屏上并运行并在标签上返回值。我认为该功能是在第一次加载时绘制的，然后就停止了。但我不知道如何解决这个问题。

我的`.h`文件：

```
#import <UIKit/UIKit.h>

@interface Draw : UIView {
    IBOutlet UISlider *slider;
    IBOutlet UILabel *label;
}

- (IBAction)sliderValueChanged:(id)sender;

@end 
```

我的`.m`文件：

```
#import "Draw.h"

@implementation Draw

- (IBAction) sliderValueChanged:(UISlider *)sender {
    label.text = [NSString stringWithFormat:@"%.1f", slider.value];
    NSLog(@"slider value = %f", sender.value);

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

    }
    return self;
}

- (void)drawRect:(CGRect)rect;
{

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 0.0, 1.0);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, 50.0, 50.0);
    CGContextAddLineToPoint(context, 250.0, 100.0);
    CGContextAddLineToPoint(context, 250.0, 350.0);
    CGContextAddLineToPoint(context, 50.0, 350.0);
    CGContextClosePath(context);
    CGContextSetLineWidth(context, slider.value );
    CGContextStrokePath(context);

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:49:33.700

在您的方法中`- (IBAction) sliderValueChanged:(UISlider *)sender`，您应该调用`[self setNeedsDisplay]`以通知视图需要重绘内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:49:34.140

你需要告诉 UI 它需要用`-[UIView setNeedsDisplay]`消息重绘。否则，它不知道与视图绘制方式相关的任何内容都发生了变化

```
- (IBAction) sliderValueChanged:(UISlider *)sender {
    label.text = [NSString stringWithFormat:@"%.1f", slider.value];
    NSLog(@"slider value = %f", sender.value);
    [self setNeedsDisplay];
} 
```

# ruby - 外部文件中的替换列表

> ID：15923679
> 
> 赞同：0
> 
> 时间：2013-04-10T10:46:32.540
> 
> 标签：ruby, string, csv, substitution

我需要针对外部文件传递一个字符串，该文件包含每次出现时要执行的替换列表。

替换文件将如下所示（我愿意接受有关结构的建议，它可以是 csv、yaml 等...）

```
"ipsum" "foobar"
"elit" ""
"sit amet" "2312" 
```

我的 ruby​​ 代码应该这样实现：

```
mystring = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam quis elit augue. Nulla tempus magna nec ligula dapibus malesuada. Fusce at orci augue, sit amet suscipit sem. Suspendisse potenti."

newstring = mystring.somemagichappenshere 
```

并且 newstring 值应该是`"Lorem foobar dolor 2312, consectetur adipiscing . Aliquam quis augue. Nulla tempus magna nec ligula dapibus malesuada. Fusce at orci augue, 2312 suscipit sem. Suspendisse potenti."`

我应该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:29:51.463

使用 csv：

```
require 'csv'
str = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam quis elit augue. Nulla tempus magna nec ligula dapibus malesuada. Fusce at orci augue, sit amet suscipit sem. Suspendisse potenti."

replacements = "ipsum,foobar
elit,
sit amet,2312"
#construct a hash from the csv:
transform_table = Hash[CSV.parse(replacements)]
#Take the keys from the hash and use them for a regular expression:
re = Regexp.union(transform_table.keys)
#Do all substituions in one go:
p str.gsub(re, transform_table) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:49:15.363

这很简单

1.  读取文件
2.  迭代文件中的每一行，并为每个条目使用`mystring.gsub!(find, replace)`替换值替换

# c++ - 如果我只想使用 cvgoodfeaturetotrack 检测图像的一半，如何更改

> ID：15923680
> 
> 赞同：0
> 
> 时间：2013-04-10T10:46:33.200
> 
> 标签：c++, opencv, opticalflow

cvGoodFeaturesToTrack (frame1_1C, eig_image, temp_image, frame1_features, &number_of_features, .01, .01, NULL);

如果我只想检测图像的一半，我可以在 mask 参数中输入什么值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T23:31:37.057

将输入图像修改为函数，使其仅包含要在其中计算良好特征的图像部分。

> frame1_1C = frame1_1C（范围（x1，y1），范围（x2，y2））；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T13:04:30.927

您可以使用 0 - 不考虑 pixek 和 255 来考虑。选择图像左半部分（img）的代码是：

```
cv::Mat mask(img.size(), CV_8UC1);       // create mask mat
mask.setTo(0);                           // initialize with 0         
cv::Mat(mask, cv::Rect(0,0, mask.cols / 2, mask.rows)).setTo(255); // set the left half to 255 
```

# azure - 如何从 Azure 站点读取 VM 监控数据？

> ID：15923683
> 
> 赞同：0
> 
> 时间：2013-04-10T10:46:48.263
> 
> 标签：azure

没有用于读取 Azure 监控数据的管理 API。除了通过远程桌面连接直接从 VM 获取监控数据之外，还有其他方法吗？我们基本上想显示“CPU 使用百分比与时间”的图表。实际上，Azure 站点显示每个 VM 的监视数据——有什么方法可以读取该数据并将其显示在报告中？任何 PowerShell cmdlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:28:05.470

推荐好的相关文章：

*   [如何监控云服务](http://www.windowsazure.com/en-us/manage/services/cloud-services/how-to-monitor-a-cloud-service/)
*   [在 Windows Azure 中启用诊断](http://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/)

但是，如果您参考[Windows Azure 虚拟机](http://www.windowsazure.com/en-us/home/features/virtual-machines/)，那么您必须以类似的方式组织对这些虚拟机的监控，您将组织对私有云中机器的监控（hyper-v）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T06:36:32.173

您可以通过 Azure Metrics API 获取云服务（Web/workers 和 VM）的 CPU 数据，请参阅：[https ://convective.wordpress.com/2014/06/22/using-azure-monitoring-service-with-天蓝色虚拟机/](https://convective.wordpress.com/2014/06/22/using-azure-monitoring-service-with-azure-virtual-machines/)

[您可以在https://github.com/WadGraphEs/AzurePlot](https://github.com/WadGraphEs/AzurePlot)中找到示例代码

# java - (ASK) 临时指纹扫描仪保存文件

> ID：15923684
> 
> 赞同：1
> 
> 时间：2013-04-10T10:46:49.323
> 
> 标签：java, fingerprint

我的项目有问题要通过毕业..我尝试制作考勤指纹系统..

我的问题是当我扫描我的指纹并保存我的指纹模板时......然后我关闭了我的netbeans......保存文件没有保存，正在被删除......如果我想验证它们，我必须再次扫描我的指纹。 .

任何人都可以帮助我的问题..

谢谢...

+++ 这里是代码 +++

```
import java.io.*;
import java.beans.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import com.digitalpersona.onetouch.*;

public class MainForm extends JFrame
{
public static String TEMPLATE_PROPERTY = "template";
private DPFPTemplate template;
    private String file;
public class TemplateFileFilter extends javax.swing.filechooser.FileFilter {
    @Override public boolean accept(File f) {
        return f.getName().endsWith(".fpt");
    }
    @Override public String getDescription() {
        return "Fingerprint Template File (*.fpt)";
    }
}
MainForm() {
    setState(Frame.NORMAL);
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    this.setTitle("Verifikasi dan Pendaftaran Sidik Jari");
    setResizable(false);

    final JButton enroll = new JButton("Pendaftaran Sidik Jari");
    enroll.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) { onEnroll(); }});

    final JButton verify = new JButton("Verifikasi Sidik Jari");
    verify.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) { onVerify(); }});

    final JButton save = new JButton("Simpan");
    save.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) { onSave(); }});

    final JButton load = new JButton("Baca Template");
    load.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) { onLoad(); }});

    final JButton quit = new JButton("Tutup");
    quit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) { System.exit(0); }});

    this.addPropertyChangeListener(TEMPLATE_PROPERTY, new PropertyChangeListener() {
        public void propertyChange(PropertyChangeEvent evt) {
            verify.setEnabled(template != null);
            save.setEnabled(template != null);
            if (evt.getNewValue() == evt.getOldValue()) return;
            if (template != null)

                JOptionPane.showMessageDialog(MainForm.this, "Template sidik jari siap untuk verifikasi sidik jari.", "Pendaftaran Sidik Jari", JOptionPane.INFORMATION_MESSAGE);
                                    onSave();

        }
    });

    JPanel center = new JPanel();
    center.setLayout(new GridLayout(4, 1, 0, 5));
    center.setBorder(BorderFactory.createEmptyBorder(20, 20, 5, 20));
    center.add(enroll);
    center.add(verify);
    center.add(save);
    center.add(load);

    JPanel bottom = new JPanel(new FlowLayout(FlowLayout.TRAILING));
    bottom.setBorder(BorderFactory.createEmptyBorder(5, 20, 5, 20));
    bottom.add(quit);

    setLayout(new BorderLayout());
    add(center, BorderLayout.CENTER);
    add(bottom, BorderLayout.PAGE_END);

    pack();
    setSize((int)(getSize().width*1.6), getSize().height);
    setLocationRelativeTo(null);
    setTemplate(null);
    setVisible(true);
}

private void onEnroll() {
    EnrollmentForm form = new EnrollmentForm(this);
    form.setVisible(true);
}

private void onVerify() {
    VerificationForm form = new VerificationForm(this);
    form.setVisible(true);
}

private void onSave() {
    JFileChooser chooser = new JFileChooser();
    chooser.addChoosableFileFilter(new TemplateFileFilter());
    while (true) {
        if (chooser.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) {
            try {
                File file = chooser.getSelectedFile();
                                    //file="xxx";
                if (!file.toString().toLowerCase().endsWith(".fpt"))
                    file = new File(file.toString() + ".fpt");
                                           // file=file.toString()+".fpt";
                if (file.exists()) {
                    int choice = JOptionPane.showConfirmDialog(this,
                        String.format("File \"%1$s\" sudah ada.\nApakah mau mengganti?", file.toString()),
                        "Penyimpanan Sidik Jari",
                        JOptionPane.YES_NO_CANCEL_OPTION);
                    if (choice == JOptionPane.NO_OPTION)
                        continue;
                    else if (choice == JOptionPane.CANCEL_OPTION)
                        break;
                                }
                FileOutputStream stream = new FileOutputStream(file);
                stream.write(getTemplate().serialize());
                stream.close();
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(this, ex.getLocalizedMessage(), "Penyimpanan Sidik Jari", JOptionPane.ERROR_MESSAGE);
            }
        }
        break;
    }
}

private void onLoad() {
    JFileChooser chooser = new JFileChooser();
    chooser.addChoosableFileFilter(new TemplateFileFilter());
    if(chooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
        try {
            FileInputStream stream = new FileInputStream(chooser.getSelectedFile());
            byte[] data = new byte[stream.available()];
            stream.read(data);
            stream.close();
            DPFPTemplate t = DPFPGlobal.getTemplateFactory().createTemplate();
            t.deserialize(data);
            setTemplate(t);
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(this, ex.getLocalizedMessage(), "Loading Proses ", JOptionPane.ERROR_MESSAGE);
        }
    }
}

public DPFPTemplate getTemplate() {
    return template;
}
public void setTemplate(DPFPTemplate template) {
    DPFPTemplate old = this.template;
    this.template = template;
    firePropertyChange(TEMPLATE_PROPERTY, old, template);
}

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new MainForm();
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:56:40.893

在 onSave 方法中，您尝试使用以下方式获取文件名：

```
file.toString() 
```

你应该做：

```
file.getName() 
```

~~`toString()`将对象作为字符串返回。~~

*** 已编辑 *** 对于 File，toString 返回文件的路径，原代码在此是正确的。

为了确保字节被写入你应该使用的文件：

```
file.flush() 
```

或者使用 ObjectOutputStream。它的 write(byte[]) 阻塞，直到字节被实际写入

```
FileOutputStream stream = new FileOutputStream(file);
ObjectOutputStream out = new ObjectOutputStream(stream);
out.writeObject(getTemplate().serialize());
out.flush();
out.close();
stream.close(); 
```

# java - 如何在 Struts 2 表单页面上添加 CSS

> ID：15923685
> 
> 赞同：3
> 
> 时间：2013-04-10T10:46:50.637
> 
> 标签：java, css, jsp, struts2, struts-validation

在我的 Struts 2 应用程序中，我试图添加 CSS 样式，但它没有显示在页面上。当我单击提交按钮两次并在显示验证错误之后*才*显示 CSS。请告诉我这种问题的简历是什么我的表格在这里

```
<%@ page language ="java" contentType ="text/html; charset=ISO-8859-1" pageEncoding ="ISO-8859-1"%>
<%@ taglib uri="/struts-tags" prefix="s"%>
<%@ taglib uri="/struts-dojo-tags" prefix="sx" %> 
 <html>
    <head>
       <sx:head/>
    <script type="text/javascript"  src ="script.js"></script>
   <link rel="stylesheet" type="text/css" href="css/emp.css">

    </head>  

<body>

        <div id ="did" align="center"> <h1 style="color: red">  ENPLOYEE REGISTRATION FORM</h1>

   <s:form  action="emplogin"  method="post" >

      <s:textfield name="firstname" label="Employee Firstname"/>
      <s:textfield name ="lastname" label ="Last name"/>  
      <s:textfield name ="id"  label="Id"/>
      <s:radio name ="gender"   list="{'male', 'female'}" label = "Gender"/>
    <sx:datetimepicker name="dob" displayFormat="dd-MMM-yyyy"  label="DOB"></sx:datetimepicker> 
      <s:radio  name ="maritalstatus" list="{'singale','married'}" label="Marital Status" />

      <s:textfield name ="email" label ="Email" />
 <sx:datetimepicker name ="joiningdate" displayFormat="dd-MMM-yyyy" label="Joining Date" ></sx:datetimepicker>

      <s:textfield name= "designation" label = "Designation"/>
      <s:textarea name ="address" label ="Address" />
      <s:textfield name = "country" label ="Country" />     
      <s:textfield name  ="state" label = "State" />
      <s:textfield name  ="city" label ="City"/> 
      <s:textfield name ="pincode" label ="Pincode"/>
      <s:textfield name ="mobileno" label="Mobile No"/>
      <s:select   name ="groups" list="{'group 1', 'group 2', 'group 3'}"  label ="Group"  />
     <tr><td>&nbsp;</td></tr>
        <tr>
    <td>&nbsp;</td>
      <s:submit align="center"></s:submit>
      </s:form>
       </div>
    </body>
 </html> 
```

**CSS文件是：**

```
#did
{background-color:#6495ed;}

#trasition
{
transition: width 2s;
-webkit-transition: width 2s; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:01:12.227

您对样式属性的语法有误

你应该替换这个

```
cssStyle="{width:184px" 
```

至

```
cssStyle="width:184px;" 
```

从 2.1 版开始，在 struts2 中也不推荐使用 dojo 标记库。请改用[struts2-jquery](https://github.com/struts-community-plugins/struts2-jquery)。

# html - 将html布局表转换为div标签和CSS

> ID：15923687
> 
> 赞同：1
> 
> 时间：2013-04-10T10:46:55.007
> 
> 标签：html, css

我想将下表转换为一系列`DIV`标签，使用 CSS 样式。我使用过`text-align`，熟悉`display: block;`和`margin: auto`输入技巧，但没有什么能像这个简单的表格布局一样给我同样的结果：

```
<table width="100%">
  <tr>
    <td align="center">
      <div>some objects</div>
    </td>
  </tr>
</table> 
```

使用我熟悉的其他方法的问题在于，它们依赖于我知道我要对齐的对象的宽度——我不知道。我希望能够居中任意宽的对象，例如按钮和图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:32:01.277

`margin: 0 auto;`无论如何都可以完美地工作。如果您有此问题，请尝试使用`text-align: center;`

```
div{margin: 0 auto; text-align: center;} /* Replace div to your selector. */ 
```

`text-align: left;`如果您喜欢其他人，您可以使用之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:56:14.470

`div`我在这里用 CSS 和s尝试了你的代码：

```
<html>
    <head>
        <style>
            #td{
                text-align:center;
            }
        </style>
    </head>

    <body>
        <table width="100%">
            <tr>
                <td align="center">
                    <div>some objects</div>
                </td>
            </tr>
        </table>

        <div id="table">
            <div id="td">
                Some objects
            </div>
        </div>
    </body>
</html> 
```

请运行上面的代码。两者都以相同的方式显示。如果以上不是您想要的，那么请您展示您尝试过的内容吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:49:36.450

你应该能够使用这样的 div ......

HTML

```
<div class="example">
    Some objects!
</div> 
```

CSS

```
.example {
    width: 60%;
    margin: 0 auto;
} 
```

我稍微猜测您只是使用表格来使`div`标签出现在屏幕中间 - 边距样式就是这样做的。

要居中子元素，我猜这也是`div`元素，你需要做两件事。

```
.example {
    text-align: center;
}

.example .button {
    display: inline-block;
} 
```

如果您可以向我展示您的标记，我可以更具体 - 也许在[JSFiddle](http://jsfiddle.net)上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:49:46.747

您在那里所做的事情可以通过以下方式实现：

```
<div>some objects</div> 
```

CSS：

```
div{
    text-align:center;
} 
```

不需要更多的绒毛。`text-align`基本上将内容居中，因此您可以将其他元素放入该 div 中，从而自动完美居中。

[演示](http://jsfiddle.net/Yr5F2/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:50:52.780

如果您只是希望您的内部 div 位于外部容器的中心，您可以简单地执行此操作（不使用表）：

```
<div class="parent">
   <div>some objects</div>
</div> 
```

在哪里`.parent`：

```
.parent
{
    text-align: center;
    width: 100%;
} 
```

看到[这个小提琴](http://jsfiddle.net/HndUa/)。

你只需要使用`text-align:center`CSS 来居中对齐你的内部内容。

请注意，父容器必须有足够的宽度以在左右两端显示可见空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T10:51:37.980

你可以使用`display:table;`

[http://jsfiddle.net/3Z4E8/](http://jsfiddle.net/3Z4E8/)

```
<div class"table">
  <div class="row">
    <div class="cell" style="text-align:center">
      <div>some objects</div>
    </div>
  </div>
</div>

.table {
    display: table;
    width: 100%;
    border: 1px solid blue;
}
.row {
    display: table-row;
    border: 1px solid red;
}
.cell {
    display: table-cell;
    border: 1px solid green;
} 
```

请参阅[文档](http://www.w3schools.com/cssref/pr_class_display.asp)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T11:01:18.327

您可以`text-align: center;`在不了解对象宽度的情况下将对象居中放在父容器中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-06T17:45:46.223

使用[tabletodivconverter.com](http://www.tabletodivconverter.com)将 html 布局表转换为 div 标签和 CSS。我有没有提到它是免费的？

# c# - 为什么 foreach 不能将字符串数组识别为数组

> ID：15923691
> 
> 赞同：0
> 
> 时间：2013-04-10T10:47:03.637
> 
> 标签：c#, arrays, multidimensional-array

我有这个代码：

```
private readonly string[,] sSOMETHING = new string[,]
{
    {"ONE", "TWO", "THREE"},
    {"FOUR", "FIVE", "SIX"}
};

...

foreach (string[] sELSE in sSOMETHING)
{
    ...
} 
```

当很明显 sSOMETHING 是一个数组时，我在 foreach 中收到一个错误，它无法将字符串转换为字符串 []。为什么它不将字符串数组识别为数组？foreach 多维数组有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T10:49:27.373

您正在创建二维数组，而不是数组的锯齿状数组。将声明更改为以下内容：

```
private readonly string[][] sSOMETHING = new string[][]
{
    new []{"ONE", "TWO", "THREE"},
    new []{"FOUR", "FIVE", "SIX"}
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:53:38.780

编译器正确地抱怨。要使用该`foreach`语法，您需要将其转换为数组数组 ( `string[][]`) 或`for`通过获取其维度使用循环访问它：

使用以下语法访问多维数组中的所有元素，就像它被展平一样

```
foreach (string sELSE in sSOMETHING) {
    Console.Write(sELSE);
} 
```

或使用类似的东西

```
for (int i = 0; i < sSOMETHING.GetLength(0); ++i) {
    for (int j = 0; j < sSOMETHING.GetLength(1); ++j) {
        Console.Write(sSOMETHING[i, j]);
    }
} 
```

# bash - ssh 上的变量

> ID：15923692
> 
> 赞同：2
> 
> 时间：2013-04-10T10:47:06.010
> 
> 标签：bash, ssh

我正在用 bash 编写一个脚本，它需要执行以下操作：

```
ssh -q 192.168.0.123 echo $FOO $BAR 
```

我的问题实际上是两个：

*   如何从调用它的机器传递一个局部变量（`$FOO`）？

*   如何指定远程变量 ( `$BAR`)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:50:05.053

在局部变量周围使用“$localvar”，在远程变量周围使用“$remotevar”，以便您的本地 shell 解释（“$localvar”）或不解释（“$remotevar”）相应的变量。

所以

```
ssh -q 127.0.0.123 echo "$FOO" '$BAR' 
```

（你知道 127.0.0.0/8 是你的本地机器，呵呵？^^）

# macos - 删除自身的 Cocoa App

> ID：15923697
> 
> 赞同：0
> 
> 时间：2013-04-10T10:47:13.383
> 
> 标签：macos, cocoa

我正在使用 Cocoa 编写一个 Mac OSX 应用程序，该应用程序旨在在指定日期后停止工作，以避免用户简单地更改系统时钟然后重新运行应用程序我希望程序关闭并自行删除它是到期后加载。这可能吗？

我不通过应用商店直接分发应用程序。此外，使用互联网检查日期并不是一个真正的选择，因为该应用程序需要离线使用。

谢谢，马修

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:17:02.980

这是可能的，但并不可靠。要删除您的应用程序，只需获取主包的 URL 并告诉 NSFileManager 删除它。但是您的应用程序包可能不可写 - 因此也不可删除 - 即使您确实设法将其删除，用户也可能拥有任意数量的备份。除非我严格控制程序将运行的系统，否则我不会写任何依赖于这一点的东西。（我的意思是，我可能不会写这样的东西，因为它有点疯狂。但如果我要写这样的东西，它必须是只能在我自己的系统上运行的东西。*）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:10:05.017

您可以在系统中执行一些健全性检查，以了解用户是否手动将时钟设置回过去。

**请注意，我仍然不认为（恶意）删除用户文件的计划总体上是一个好主意，特别是以下方法肯定会在沙盒下破坏..**

..但出于好奇：这是一个片段，它将检查所有文件`/var/log`并返回其中一些是否在将来被修改（=系统很可能在“*过去*”运行）

```
- (bool)isFakeSystemTime
{
   int futureFileCount = 0;

   // let's check against 1 day from now in the future to be safe
   NSTimeInterval secondsPerDay = 24 * 60 * 60;
   NSDate *tomorrow = [[[NSDate alloc] initWithTimeIntervalSinceNow:secondsPerDay] autorelease];

   NSString *directoryPath = @"/var/log";
   NSArray *filesInDirectory = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:directoryPath error:nil];

   for (NSString* fileName in filesInDirectory) 
   {
      NSDictionary *attributes = [[NSFileManager defaultManager] attributesOfItemAtPath:[directoryPath stringByAppendingPathComponent:fileName] error:nil];
      NSDate *date = [attributes valueForKey:@"NSFileModificationDate"];
      if (!date)
         continue;

      if ([date compare:tomorrow] == NSOrderedDescending)
      {
         NSLog(@"File '%@' modified >=1 day in the future", fileName);
         futureFileCount++;
      }
   }   

   // again, some heuristic to be (more) on the safe side
   return futureFileCount > 5;
} 
```

# android - Android Facebook 3.0 自定义登录对话框

> ID：15923701
> 
> 赞同：0
> 
> 时间：2013-04-10T10:47:25.713
> 
> 标签：android, android-alertdialog, facebook-login, facebook-android-sdk, android-facebook

我正在使用新的 FacebookSDK 并希望使用 SSO 登录功能。发生的情况是，您会得到一个非常丑陋的[对话框](https://developers.facebook.com/docs/howtos/androidsdk/3.0/native-login/)，其中列出了请求的权限。我宁愿使用旧方法（请参阅 hackbook 示例，仍然使用 sdk 2.0 Facebook.authorize()），您将被重定向到具有良好布局的 Facebook 应用程序的 Activity。

我搜索了整个 facebookSDK 和 stackOverflow，但找不到更改对话框的方法。我仍然可以使用带有 Facebook.authorize() 函数的 hackbook 方式。但如果我使用它，Eclipse 会通过它，因为它已被弃用。

如果您知道对我有帮助的方法，请告诉我

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:37:39.663

我相信[WebDialog](https://developers.facebook.com/docs/reference/android/3.0/WebDialog/)是您正在寻找的。

# vb.net - Windows 窗体编译为与 desinger 不同的大小

> ID：15923702
> 
> 赞同：1
> 
> 时间：2013-04-10T10:47:26.773
> 
> 标签：vb.net, winforms, visual-studio-2010

这可能相当明显，因为我在 Google 上找不到它，但我在 VS Designer 中有一个给定高度和宽度的窗口形式，它看起来很完美。

对象检查器和 ViewDesigner.VB 都匹配。

但是当它被编译时，窗口明显变大了，并且在边缘周围带来了一大堆浪费的空间。这不仅仅是 ClientSize 等。这是一两英寸。

知道是什么原因造成的吗？这不是分辨率问题，因为这发生在同一台机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T15:27:04.937

为了将来参考，我没有做任何事情，它被编码到更大的应用程序中以保留窗口状态。

所以它只是简单地重新调整大小到它是什么或它认为它应该是什么。

感谢您的帮助和建议。

# java - JPA2 标准：如何使用 path.get() 避免交叉连接

> ID：15923710
> 
> 赞同：12
> 
> 时间：2013-04-10T10:47:37.717
> 
> 标签：java, jpa, jpa-2.0, criteria-api

如果你有这个实体：

```
@Entity
public class A {

    @ManyToOne
    @JoinColumn(name = "bField", nullable = true)
    private B myBObject;

} 
```

我有一个通用的 Criteria 生成器，他会这样做：

```
Root<A> root = criteria.from(A.class);
root.get("myBObject").get("aFieldInB"); 
```

问题如下：生成的 sql 将包含 A 和 B 之间的 CROSS JOIN。但我希望生成的 sql 将包含 A 和 B 之间的 LEFT JOIN。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:36:57.907

您必须使用 join()。一般来说，最好总是使用 join() 来处理关系。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Criteria#JoinType](http://en.wikibooks.org/wiki/Java_Persistence/Criteria#JoinType)

# java - 为什么我必须用 SpringForm 创建一个 ContextLoaderListener？

> ID：15923715
> 
> 赞同：0
> 
> 时间：2013-04-10T10:47:54.173
> 
> 标签：java, spring, jsp, spring-mvc

我试图让弹簧表单工作，我只使用弹簧 mvc，当我尝试添加带有 a 的弹簧表单标签时，`modelAttribute`它失败并说没有`ContextLoaderListener`找到。

这是我创建表单的 JSP 代码：

```
<sf:form method="POST" cssClass="form-horizontal" modelAttribute="companySearch"> 
```

这就是我如何找到我的 bean 并且我的 mvc 是注释驱动的

```
<context:component-scan base-package="com.mubasherjson.controllers" />
<context:annotation-config />
<bean id="companySearch" class="com.mubasherjson.models.CompanySearch" />
<mvc:annotation-driven /> 
```

这是我的 post 方法代码

```
@RequestMapping(method = RequestMethod.POST)
    public String showResultPage(Model model){
        model.addAttribute(new CompanySearch());
        return "result";
    } 
```

我也用@ModelAttribute注解试过了，但还是不行

为什么我必须在这里创建一个 ContextLoaderListener ？基本上 CompanySearch 是一个模型，它是一个简单的 POJO，如果我删除表单或评论它一切正常。这里似乎有什么问题，我在这里检查了各种问题，但在我的情况下仍然没有得到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:49:00.187

> 引导侦听器以启动 Spring 的根 WebApplicationContext。只需委托给 ContextLoader。

[**Doc**](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/context/ContextLoaderListener.html)
是容器调用的servlet监听器。它创建应用程序上下文并加载 XML bean 定义文件。这意味着一切都从它开始，并且必须拥有它。

你可以定义它

```
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

ContextLoaderListener 与 DispatcherServlet

在 Spring MVC 中，有两个上下文。一种是由 ContextLoaderListener 启动的应用程序上下文或全局上下文。它采用 contextConfigLocation 参数中提到的所有配置文件。
现在，如果您还使用 Spring MVC，则需要 Dispatcher servlet，它会启动另一个容器，该容器也称为 Web 应用程序容器。此容器将全局容器作为父容器。
如果您只在后端使用 Spring，那么全局上下文就足够了。但是，如果您也将 Spring MVC 用于前端，那么您还需要 Dispatcher Servlet。

[（从http://www.coderanch.com/t/516563/Spring/DispatcherServlet-ContextLoaderListener](http://www.coderanch.com/t/516563/Spring/DispatcherServlet-ContextLoaderListener)复制，我太懒了，已经有很多东西了）

# wpf - 如何在设计器中与用户控件内的组件交互

> ID：15923716
> 
> 赞同：0
> 
> 时间：2013-04-10T10:47:57.347
> 
> 标签：wpf, user-controls, designer

我将允许从设计器中按下位于用户控件中的按钮来更改 TabControl 的当前 TabItem。

我能怎么做 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:36:57.407

您可以通过绑定或后面的代码来设置`SelectedIndex`或`SelectedItem`属性ather。

编辑：如果您在另一个窗口中添加了用户控件，则无法访问用户控件上的控件。您必须打开用户 conrol .xaml 并在那里进行编辑。您可以制作将路由按钮单击的公共方法。我认为这就是你所需要的。

# jquery - 复选框/单选在 HTML 中被选中=“已选中”，但看起来未选中

> ID：15923721
> 
> 赞同：0
> 
> 时间：2013-04-10T10:48:12.210
> 
> 标签：jquery, checkbox, attr

我试图确保用户只能选择一个复选框，但看起来没有任何检查。我究竟做错了什么？

```
<div class="formField rsform-block rsform-block-typprofilu">
    <br>
    <input name="form[typprofilu][]" type="checkbox" value="Montreal (Oceľ)" id="typprofilu0" checked="checked">
    <label for="typprofilu0">Montreal (Oceľ)</label>
    <input name="form[typprofilu][]" type="checkbox" value="Halifax (Oceľ)" id="typprofilu1">
    <label for="typprofilu1">Halifax (Oceľ)</label>
    <input name="form[typprofilu][]" type="checkbox" value="Calgary (Hliník)" id="typprofilu2">
    <label for="typprofilu2">Calgary (Hliník)</label>
    <input name="form[typprofilu][]" type="checkbox" value="Niagara (Hliník)" id="typprofilu3">
    <label for="typprofilu3">Niagara (Hliník)</label>
    <input name="form[typprofilu][]" type="checkbox" value="Hudson (Hliník)" id="typprofilu4">
    <label for="typprofilu4">Hudson (Hliník)</label><br>
    <span id="component781" class="formNoError">Invalid Input</span>
    <br>
</div> 
```

jQuery：

```
jQuery('.rsform-block-typprofilu input#typprofilu0[type="checkbox"]').attr('checked',true); 

    jQuery('body').on('click','.rsform-block-typprofilu input[name="form[typprofilu][]"]',function(){
                jQuery('.rsform-block-typprofilu input[name="form[typprofilu][]"]').attr('checked', false);
                var whatIsChecked = jQuery(this).attr('id');
                //var isChecked = jQuery(this).is(':checked');   
                jQuery(this).attr('id',whatIsChecked).attr('checked',true);
            }); 
```

已编辑：带有单选按钮的解决方案

```
<div class="formField rsform-block rsform-block-typprofilu">
        <br>
        <input name="form[typprofilu]" type="radio" value="Montreal (Oceľ)" id="typprofilu0" checked="checked"><label for="typprofilu0">Montreal (Oceľ)</label><input name="form[typprofilu]" type="radio" value="Halifax (Oceľ)" id="typprofilu1"><label for="typprofilu1">Halifax (Oceľ)</label><input name="form[typprofilu]" type="radio" value="Calgary (Hliník)" id="typprofilu2"><label for="typprofilu2">Calgary (Hliník)</label><input name="form[typprofilu]" type="radio" value="Niagara (Hliník)" id="typprofilu3"><label for="typprofilu3">Niagara (Hliník)</label><input name="form[typprofilu]" type="radio" value="Hudson (Hliník)" id="typprofilu4"><label for="typprofilu4">Hudson (Hliník)</label><br>
        <span id="component782" class="formNoError">Invalid Input</span>
        <br>
    </div>

 jQuery('.rsform-block-typprofilu input#typprofilu0[type="radio"]').attr('checked',true);

jQuery('body').on('click','.rsform-block-typprofilu input[name="form[typprofilu]"]',function(){ // ez a radiok kozul a valasztasom
    jQuery('.rsform-block-typprofilu input[name="form[typprofilu]"]').attr('checked', false);
var whatIsChecked = jQuery(this).attr('id');
    var isChecked = jQuery(this).is(':checked');

     jQuery(this).attr('id',whatIsChecked).attr('checked',true);
}); 
```

它没有改变......选择的是第一个......但在HTML中它似乎改变了检查的attr。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:55:20.107

如果您只想在一组复选框中选择一个，那么为什么不使用单选按钮呢？他们本机提供此功能。

```
<input type="radio" name=""> 
```

如果您希望能够取消选择单选按钮（类似于复选框功能），那么您可以使用 JavaScript 实现它。

```
var radios = $(':radio');

radios.on('click', function() {
  var radio = $(this);

  // because .is(:checked) is true AS
  // you check, we use our own flag that
  // is only true AFTER you check        
  radio.trigger(radio.data('ischecked') ? 'uncheck' : 'check');
});

// when the radio selection is changed, fire 
// the uncheck event on the selected radio's 
// sibling that was checked
radios.on('change', function() {
  var siblings = $(':radio[name="' + this.name + '"]').not(this);

  siblings.each(function() {
    var sibling = $(this);
    if (sibling.data('ischecked')) {
      sibling.trigger('uncheck');
    }  
  });
});

// custom check / uncheck events
radios.on('check uncheck', function(e) {
  var checked = (e.type === 'check');
  $(this).data('ischecked', checked).attr('checked', checked);
});

// make sure all radios have the necessary 
// ischecked flag on DOM ready
radios.filter(':checked').each(function(i, r) {
  $(this).trigger('check');
}); 
```

如果您喜欢这种样式，您还可以使单选按钮看起来像复选框（在不包括 IE 的现代浏览器中）：

```
input[type="radio"] {
  -webkit-appearance: checkbox;
  -moz-appearance: checkbox;
  -ms-appearance: checkbox;     /* not currently supported */
  -o-appearance: checkbox;      /* not currently supported */
  appearance: checkbox;      
} 
```

**[这是一个演示](http://jsfiddle.net/dhwRU/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:59:48.130

如果您将 html 代码包装在一些基本的 html 标记中，将其保存为 .html 文件并加载到浏览器中，您可以清楚地看到第一个复选框被选中。

```
<html>
<body>
<div class="formField rsform-block rsform-block-typprofilu">
<br>
<input name="form[typprofilu][]" type="checkbox" value="Montreal (Oceľ)" id="typprofilu0" checked="checked">
<label for="typprofilu0">Montreal (Oceľ)</label>
<input name="form[typprofilu][]" type="checkbox" value="Halifax (Oceľ)" id="typprofilu1">
<label for="typprofilu1">Halifax (Oceľ)</label>
<input name="form[typprofilu][]" type="checkbox" value="Calgary (Hliník)" id="typprofilu2">
<label for="typprofilu2">Calgary (Hliník)</label>
<input name="form[typprofilu][]" type="checkbox" value="Niagara (Hliník)" id="typprofilu3">
<label for="typprofilu3">Niagara (Hliník)</label>
<input name="form[typprofilu][]" type="checkbox" value="Hudson (Hliník)" id="typprofilu4">
<label for="typprofilu4">Hudson (Hliník)</label><br>
<span id="component781" class="formNoError">Invalid Input</span>
<br>
</div>
</body>
</html> 
```

我怀疑你的样式表有问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:04:20.770

您使用的是什么 jQuery 库？在 jQuery 1.9.1 中使用`prop`而不是 attr，工作示例：[jsFiddle 示例](http://jsfiddle.net/HFsum/)

我在 prop 和 attr 方法以及复选框的选中属性方面遇到了一些问题，如果我记得正确，它取决于 jQuery 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:18:06.503

试试这个

例子：

```
 <div class="formField rsform-block rsform-block-typprofilu">
     <input type="radio" value="first" id="1" checked="checked"/>
     <input type="radio" value="second" id="2"/>
     <input type="radio" value="third" id="3"/>
   </div>

   $(document).ready(function(){

     var previousCheckedElem = $("#1")

     $("input[type='radio']").click(function(e){
         previousCheckedElem.attr("checked",false);
         previousCheckedElem = $(this);
     });
   }); 
```

根据您的要求进行更改（例如：id，元素）。

[小提琴演示](http://jsfiddle.net/Fz6v3/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T11:18:41.067

很少的观察，

1.  在设置默认选中元素时，您使用的是复杂的选择器，而可以使用简单的`id`选择器来完成`jQuery('#typprofilu0')`。

2.  要在取消选中其他复选框时忽略当前项目，您可以使用[.not()](http://api.jquery.com/not/)
3.  然后再次正如每个人所建议的那样使用[.prop()](http://api.jquery.com/prop/)来更改运行时 dom 属性，例如`checked`and`selected`而不是[.attr()](http://api.jquery.com/attr/)

它应该像这样简单

```
jQuery('#typprofilu0').prop('checked',true); 

jQuery('body').on('click','.rsform-block-typprofilu input[name="form[typprofilu][]"]',function(){
    jQuery('.rsform-block-typprofilu input[name="form[typprofilu][]"]').not(this).prop('checked', false);
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/PMBnW/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T14:35:18.353

我刚刚意识到，从 JS 的角度来看，使用复选框模拟单选按钮功能实际上比使用单选框模拟复选框功能更容易/更轻松：/

试试这个：

```
var checkboxes = $(':checkbox');

checkboxes.on('click', function() {
  var group = '[name="' + this.name + '"]',
      siblings = checkboxes.filter(group).not(this);
  siblings.filter(':checked').attr('checked', false);
}); 
```

**[演示](http://jsfiddle.net/L8J9a/)**

但是，如果用户决定禁用 JS，他们将能够选择多个，因此这是您需要做出的决定。

# tcl - 如何从 tcl 中的字符串中剪切子字符串

> ID：15923728
> 
> 赞同：9
> 
> 时间：2013-04-10T10:48:42.220
> 
> 标签：tcl

我有类似的字符串`NYMEX UTBPI`。在这里，我想获取 NYMEX 和 UTBPI 中间的空白索引，然后从该索引到最后一个索引，我想剪切子字符串。在这种情况下，我的子字符串将是`UTBPI` 我在下面使用

```
set part1 [substr $line [string index  $line " "] [string index  $line end-1]] 
```

我正在低于错误。

```
wrong # args: should be "string index string charIndex"
    while executing
"string index  $line  "
    ("foreach" body line 2)
    invoked from within
"foreach line $pollerName {
set part1 [substr $line [string index  $line  ] [string index  $line end-1]]
puts $part1
puts $line
}"
    (file "Config.tcl" line 9)
```

你能给我一些关于如何进行其他字符串操作的想法吗？任何好的链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:04:58.980

我只会使用[字符串范围](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm#M40)并将空格的索引传递给它（您可以**先使用字符串**或其他方式找到它）。

```
% set s "NYMEX UTBPI"
NYMEX UTBPI
% string range $s 6 end
UTBPI 
```

或者**首先使用字符串**动态查找空格：

```
% set output [string range $s [expr {[string first " " $s] + 1}] end]
UTBPI 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T00:22:40.647

如果处理器时间不是问题，请将其拆分为一个列表并获取第二个元素：

```
set part1 [lindex [split $line] 1] 
```

如果字符串可以包含任意数量的单词，

```
set new [join [lrange [split $line] 1 end]] 
```

但是，我会使用 Donal 的建议并坚持`string`运营。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:24:55.887

我认为，在 Tcl 中做到这一点的最佳方法是：

```
set s "NYMEX UTBPI"
regexp -indices " " $s index;
puts [lindex $index 0] 
```

变量索引将包含匹配模式的第一个和最后一个索引。在这里，当您正在寻找单个字符时，第一个和最后一个将是相同的，因此您可以使用

```
puts [lindex $index 0] 
```

或者

```
puts [lindex $index 1] 
```

欲了解更多信息，这是官方文档：[http ://www.tcl.tk/man/tcl8.5/TclCmd/regexp.htm#M7](http://www.tcl.tk/man/tcl8.5/TclCmd/regexp.htm#M7)

# matlab - Matlab - LDA “训练的合并协方差矩阵必须是正定的。”

> ID：15923729
> 
> 赞同：0
> 
> 时间：2013-04-10T10:48:49.173
> 
> 标签：matlab, classification, lda

有人可以帮我解决这个问题。很长一段时间以来，我一直试图弄清楚这一点。

我有一个 training_Set:`<1530*270400 double>` 和 Test_Set:`<4794*270400 double>`

我正在使用线性判别分析方法

```
class = classify(Test_Set,Training_Set,train_label,'linear') 
```

使用分类时出错（第 228 行）

TRAINING 的合并协方差矩阵必须是正定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:52:16.040

为了使 TRAINING 的协方差矩阵是正定的，您至少必须有比 中的变量更多的观察值`Test_Set`。在您的情况下，您的变量（270400）似乎比观察值（1530）多得多。您可以在分类之前尝试降维。

我在这里回答了一个非常相似的问题：[Matlab bug with linear discriminant analysis](https://stackoverflow.com/questions/5923726/matlab-bug-with-linear-discriminant-analysis/16057976#16057976)

# ios - Unity/iOS - MoPub 安装 - Xcode 编译错误

> ID：15923731
> 
> 赞同：3
> 
> 时间：2013-04-10T10:48:56.287
> 
> 标签：ios, unity3d, mopub

我已经完全按照此处的“构建说明”中的内容完成了所有操作： [https ://github.com/mopub/mopub-unity-ios-plugin](https://github.com/mopub/mopub-unity-ios-plugin)

1.  将 UnityPlugin 的 MoPubiOS.unitypackage 导入您的 Unity iOS 项目

2.  （可选）将 UnityPlugin 的 Plugins/MoPub/testSupport/MoPubTestScene 添加到 Unity 构建窗口 [包含 MoPubGUIManager.cs 示例]

3.  使用 Unity Player 将您的 Unity iOS 项目构建为 Xcode 项目

4.  将以下源文件夹和文件复制到 Xcode 项目的 Classes/ 文件夹中 MoPubSdk 的 MoPubSDK/ 目录的完整内容 b．MoPubSdk 的 TouchJSON/ 目录（包括父目录） c．UnityPlugin 中的 MoPubBinding.m、MoPubManager.h 和 MoPubManager.mm 文件

5.  对 Xcode 的构建阶段中包含的框架进行修改。添加 StoreKit.framework b. 添加 AdSupport.framework 并将其设置为 Optional

6.  构建并运行您的 Xcode 项目

而且，当我尝试构建 Xcode 项目时，我收到 9 个链接器错误：

架构 armv7 的未定义符号：“_ *moPubShowInterstitialAd”，引用自：RegisterMonoModules.o 中的 RegisterMonoModules() “* _moPubRequestInterstitialAd”，引用自：RegisterMonoModules.o 中的 RegisterMonoModules() “ *_moPubShowBanner”，引用自：RegisterMonoModules.o 中的 RegisterMonoModules() “* _moPubReportApplicationOpen”，引用自：RegisterMonoModules.o 中的RegisterMonoModules() “ *_moPubRefreshAd”，引用自：RegisterMonoModules.o 中的RegisterMonoModules() “* _moPubEnableLocationSupport”，引用自：RegisterMonoModules.o 中的RegisterMonoModules() “ *_moPubDestroyBanner”，引用自：RegisterMonoModules.o 中的 RegisterMonoModules()"*_moPubCreateBanner”，引用自：RegisterMonoModules.o 中的 RegisterMonoModules() ld：未找到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

但我已经将文件复制到 Xcode 类文件夹（不是 Xcode 项目组“类”）——正如第 4 点中所写的那样

我也尝试复制到 Xcode 项目“类”组中（使用选项“如果需要则复制”）。但后来我有1个错误：

词法或预处理器问题 /Users/xxx/Desktop/UnityProjects/Xcode/Classes/MPAdView.h:11:9: 'MPGlobal.h' file not found 但我在 Classes/Internal/Common Xcode 项目组中有该文件以及在 Classes Classes/Internal/Common Xcode 项目文件夹中

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-19T12:43:29.700

我通过添加 CoreTelephony.framework 让它工作了一次

尝试添加它。

如果你得到：

```
MOPUB: Banner view failed. Error: Error Domain=com.mopub.iossdk Code=0 "The operation couldn’t be completed. (com.mopub.iossdk error 0.) 
```

那么欢迎来到我的俱乐部..我还没有想出如何解决它。

# javascript - 将附加参数传递给用于 Phonegap 文件处理的 javascript 回调

> ID：15923735
> 
> 赞同：2
> 
> 时间：2013-04-10T10:49:02.027
> 
> 标签：javascript, cordova, callback

我正在使用 PhoneGap API 来处理文件。我正在执行以下调用，它将 appendfile 函数作为回调方法调用。

```
fileSystem.root.getFile("test.txt", { create: true }, appendFile , onError); 
```

这调用：

```
function appendFile(f) {

    f.createWriter(function (writerOb) {
        writerOb.onwrite = function () {
            logit("Done writing to file.<p/>");
        }
        //go to the end of the file...
        writerOb.seek(writerOb.length);
        writerOb.write("Test at " + new Date().toString() + "\n");
    })

} 
```

我想更改被调用函数以接受我要附加到文件的文本的附加参数，例如：

函数 appendFile(f, textToWrite) {}

但是我似乎无法让它发挥作用。如果我更改回调以包含附加参数，则会收到错误消息。

```
fileSystem.root.getFile("test.txt", { create: true }, appendFile(textToWrite) , onError); // doesnt work. 
```

有人可以为我指出正确的方向吗....谢谢。

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:08:05.710

你能试试这个吗？

```
fileSystem.root.getFile("test.txt", { create: true },
 function (f,textToWrite){
 f.createWriter(function (writerOb) {
        writerOb.onwrite = function () {
            logit("Done writing to file.<p/>");
        }
        //go to the end of the file...
        writerOb.seek(writerOb.length);
        writerOb.write("Test at " + new Date().toString() + "\n");
    })
} 
, onError); 
```

注意：我无法测试代码，因为我没有环境

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:30:20.090

```
fileSystem.root.getFile("test.txt", { create: true }, appendFile , onError);
var textToWrite = 'blah blah';

function appendFile(f) {

    f.createWriter(function (writerOb) {
        writerOb.onwrite = function () {
            logit("Done writing to file.<p/>");
        }
        //go to the end of the file...
        writerOb.seek(writerOb.length);
        writerOb.write("Test at " + new Date().toString() + " " + textToWrite + "\n");
    })

} 
```

您还可以向函数添加属性，因此

```
appendFile.textToWrite = 'blah blah'; 
```

然后

```
writerOb.write("Test at " + new Date().toString() + " " + appendFile.textToWrite + "\n"); 
```

# mysql - MYSQL 多个 OR 和 AND

> ID：15923737
> 
> 赞同：0
> 
> 时间：2013-04-10T10:49:04.457
> 
> 标签：mysql, sql

好的，所以我用我的 PHP 脚本构建了这个查询：

```
SELECT * 
FROM sale_properties 
WHERE advert_heading LIKE '%harnham%' 
   OR main_advert LIKE '%harnham%' 
   OR advert2 LIKE '%harnham%' 
   OR advert3 LIKE '%harnham%' 
   OR street LIKE '%harnham%' 
   OR district LIKE '%harnham%' 
   OR town LIKE '%harnham%' 
   OR county LIKE '%harnham%' 
   OR area LIKE '%harnham%' 
   OR postcode LIKE '%harnham%' 
   AND numeric_price >= 150000.00 
   AND numeric_price <= 152000.00 
```

现在，这确实给了我一些结果，但是，我想基本上在数据库中搜索关键字并在价格范围内。上面的查询确实给了我关键字，但似乎忽略了大部分价格范围。

这看起来正确吗？还是可以建造得更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T10:51:18.083

用括号试试...

```
SELECT * FROM sale_properties WHERE
 (
    advert_heading LIKE '%harnham%' OR
    main_advert LIKE '%harnham%' OR
    advert2 LIKE '%harnham%' OR
    advert3 LIKE '%harnham%' OR
    street LIKE '%harnham%' OR
    district LIKE '%harnham%' OR
    town LIKE '%harnham%' OR
    county LIKE '%harnham%' OR
    area LIKE '%harnham%' OR
    postcode LIKE '%harnham%'
) AND (
    numeric_price >= 150000.00 AND
    numeric_price <= 152000.00
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:50:50.453

这就像数学运算，你必须使用括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:55:44.597

虽然有一些规则如何评估 or-and 表达式（运算符优先级表和类似的东西），但这些规则很难正确，也很难调试。

根据经验，最好不要在同一级别的表达式上混合`and`s 和s。`or`

您应该将查询重写为：

```
SELECT * 
FROM sale_properties 
WHERE 
     (advert_heading LIKE '%harnham%' 
      OR main_advert LIKE '%harnham%' 
      OR advert2 LIKE '%harnham%' 
      OR advert3 LIKE '%harnham%' 
      OR street LIKE '%harnham%' 
      OR district LIKE '%harnham%' 
      OR town LIKE '%harnham%' 
      OR county LIKE '%harnham%' 
      OR area LIKE '%harnham%' 
     OR postcode LIKE '%harnham%')
   AND 
     (numeric_price >= 150000.00 
      AND numeric_price <= 152000.00) 
```

所以它基本上成为`and`两个表达式之间的一个。第一个表达式（带有`like`s 的部分）只有当它的任何部分都为真时才为真，而第二部分（numeric_price 检查）只有当它的两个部分都为真时才为真。只有当两个子表达式都为真时，整个事情才为真。

# php - 我想使用下一个和上一个按钮使用 php 从数据库中获取数据

> ID：15923740
> 
> 赞同：0
> 
> 时间：2013-04-10T10:49:18.363
> 
> 标签：php, javascript, html

我正在制作一个考试门户，我可以在其中选择进行考试/测验。现在我添加了 2 个按钮，即 Next 和 Previous 。我想在按钮单击上获取问题及其选项。我的数据库具有以下结构： Question(qid,question,option1,option2,option3,option4,right_option) 我正在尝试做什么：

```
<input id="first" type="button" value="NEXT" onClick = "show_next()">
<input id="second" type="button" value="PREV" onClick = "show_prev()">

<script>
function show_next()
{
<?php 
$question_no; //my global php variable to keep track of question id
$question_no = $question_no + 1; 
show_question($question_no); //php function which shows data according to question no 
?>
 }
function show_prev()
{
<?php 
if($question_no>0)
{
$question_no = $question_no-1;
show_question();
}
else
{
?>
alert("Wrong Operation");
<?php
}
?>
}
</script> 
```

我是 php 和 javascript 的新手，请为我的问题建议正确的方法以及可能的编码片段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:07:40.677

使用 jQuery/AJAX。您所要做的就是动态管理 Offset 和 Limit。例如

让我们考虑一下您一次显示 1 个问题及其选项。

你的 html 文件将是。

```
<input id="first" type="button" value="NEXT" onClick = "show_next()">
<input id="second" type="button" value="PREV" onClick = "show_prev()">
<input id="offset" type="hidden" value="0"> 
```

在您的 javascript 文件中

```
function show_next()
{
  var offset=$('#offset').val();
  $.post('GetQuestion.php',{offset:offset},function(data){
    $('#question_answer').html(data);
    $('#offset').attr('value',offset+1);

  })
}

function show_prev()
{
  var offset=$('#offset').val();
  $.post('GetQuestion.php',{offset:offset},function(data){
    $('#question_answer').html(data);
    $('#offset').attr('value',offset-1);

  })
} 
```

在您的 GetQuestion.php 文件中，您可以使用 $_POST 访问偏移值。您所要做的就是在查询中使用该值。

```
mysql_query("SELECT * FROM questions LIMIT ".$_POST['offset'].",1"); 
```

在 php 文件中回显您的查询结果，以便它可用于 javascript 中的 var 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:57:50.897

据我所知，PHP是在服务器上执行的，JS是在客户端执行的，所以不能混用。

你必须选项。

1.  在不同的 div 中加载所有问题并隐藏它们。然后您可以使用下一个和上一个按钮一一显示。

2.  使用如下参数构建页面：[http://myapp.com/question/1](http://myapp.com/question/1)并制作 Next BUtton /question/2 问题页面现在应该只包含 1 个问题。

编辑：

这是1.方法的小提琴：http: [//jsfiddle.net/zj7ts/](http://jsfiddle.net/zj7ts/)

```
$('.question').hide()

 $question_shown = $('.question').first().show();

$('.next').click(function(){
    $('.question').hide()
    $question_shown = $question_shown.next().show();
});

$('.prev').click(function(){
    $('.question').hide()
    $question_shown = $question_shown.prev().show();
}); 
```

# javascript - 在 PageLoad 上执行

> ID：15923752
> 
> 赞同：0
> 
> 时间：2013-04-10T10:49:42.630
> 
> 标签：javascript, jquery

如何在页面加载时在 HTML 中执行此代码？

```
<script>    
    window.onload = $(function(){
        $("#name1, #name2").val("").attr("disabled",true);
};
</script> 
```

我已经尝试过这段代码，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:51:10.283

最好使用[**on()**](http://api.jquery.com/on/)处理程序：

```
$(window).on('load', function(){
   $("#name1, #name2").val("").attr("disabled",true);
}); 
```

或者`document.ready()`如果您不等待特定元素加载：

```
$(document).ready(function(){
   $("#name1, #name2").val("").attr("disabled",true);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:51:27.520

`$(`你只是有一个你不需要的额外，还有一个缺少的结束`}`......

```
window.onload = function() {
    $("#name1, #name2").val("").attr("disabled",true);
}; 
```

尽管这可以使您的代码正常工作，但您可能会在 DOM 准备好时运行它（这比等待所有图像加载要快）...

```
$(function() {
    $("#name1, #name2").val("").attr("disabled",true);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:54:47.770

当您只想访问 DOM 时可以使用它：

```
$(document).ready(function() { /* code */ });

$(function() { /* code */ }); // shorthand function (is identical) 
```

如果您还需要加载所有其他资源（样式、脚本、iframe、图像等）（例如，获取图像尺寸），则需要使用以下命令：

```
$(window).on('load', function() { /* code */ }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T10:56:02.807

您将 JavaScript 的处理方式与 jQuery 的处理方式混为一谈。

Using`windows.onload = ...`是指在 JavaScript 中发生 load 事件后如何分配要调用的函数。

使用`$(function(){...})`jQuery 语法`$(document).ready(function(){})`，本质上是一样的，jQuery 的文档就绪也会在加载后触发，但与`windows.onload`加载图像之前不同。

使用一种或另一种语法。

要么像这样使用 JavaScript：

```
window.onload = function(){
    $("#name1, #name2").val("").attr("disabled",true);
} 
```

或者 jQuery 的替代方案之一：

```
$(function(){
    $("#name1, #name2").val("").attr("disabled",true);
}) 
```

```
$(document).ready(function(){
    $("#name1, #name2").val("").attr("disabled",true);
}) 
```

```
$(window).ready(function(){
    $("#name1, #name2").val("").attr("disabled",true);
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:52:12.780

你应该像这样关闭你的函数代码块。

```
<script>    
    window.onload = $(function(){
        $("#name1, #name2").val("").attr("disabled",true);
    });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T10:54:28.240

使用这个，删除 window.OnLoad

```
$(function(){
    $("#name1, #name2").val("").attr("disabled",true);
}); 
```

**看演示**

[http://jsfiddle.net/qgPzG/](http://jsfiddle.net/qgPzG/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T10:54:38.547

您可以使用以下语法：

```
$(function(){
  $("#name1, #name2").val("").attr("disabled",true);
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-10T10:55:51.647

试试这个 ：

```
window.onload = function () {
// do stuff here
  $("#name1, #name2").val("").attr("disabled",true);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-10T10:56:58.653

您忘记关闭 " **});** " ：

```
<script>    
    window.onload = $(function(){
        $("#name1, #name2").val("").attr("disabled",true);
 });
</script> 
```

# regex - Reg ex 需要查找两个 ||

> ID：15923754
> 
> 赞同：0
> 
> 时间：2013-04-10T10:49:48.963
> 
> 标签：regex

我的文本文件有很多这样的行：

```
12345|any string |5585|more string|yet more string|safdowdjfpd|wdfiojeif 
```

我想在代码之前找到有这个的一行，一个空值：

```
12345|any string|5585||yet more string|safdowdjfpd|wdfiojeif 
```

文件中还有其他行具有空字符串，因此必须仅捕获第 3 和第 4 个管道符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:51:26.317

一个非常简单的字符串匹配：

```
/\|\|..\|/ 
```

这匹配 || 后跟任意两个字符并以 | 结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:53:46.153

试试这个

```
/.*\|.*\|.*\|\|.*/ 
```

用 egrep 测试

```
[root@srv test]# echo "12345|any string|5585|annoying string|CODE|safdowdjfpd|wdfiojeif" | egrep -o ".*\|.*\|.*\|\|.*"
[root@srv test]#

[root@srv test]# echo "12345|any string|5585||CODE|safdowdjfpd|wdfiojeif" | egrep -o ".*\|.*\|.*\|\|.*"
12345|any string|5585||CODE|safdowdjfpd|wdfiojeif
[root@srv test]# 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:35:27.590

这匹配任何包含连续管道的字符串，这些是字符串的第 3 和第 4 个管道：

`^[^|]+\|[^|]+\|[^|]+\|\|`

火柴：

`12345|any string|5585||yet more string|safdowdjfpd|wdfiojeif`

不匹配：

```
12|345|any string|5585||yet more string|safdowdjfpd|wdfiojeif
12345|any string|5585|yet more string|safdowdjfpd|wdfiojeif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:53:31.310

到目前为止，您尝试过哪些模式？`\\|{2}`在他们当中吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:55:28.357

计算该位置的 [任何字符] 的数量：

```
/.+\|.+\|.+{0}\|.+\|.+\|.+\|.+/ 
```

# magento - Magento 自定义产品集合分页不起作用

> ID：15923756
> 
> 赞同：0
> 
> 时间：2013-04-10T10:50:04.227
> 
> 标签：magento, collections, pagination, toolbar, product

我通过使用 XML 布局呈现块在 CMS 页面中显示 Bestseller 产品列表。与分页一起，我需要像在其他产品列表中一样显示工具栏（分页和排序）。因此，我为此创建了一个自定义模块。这样，我就可以显示产品列表，并且工具栏也会出现。但是排序（或任何功能）似乎不起作用。请帮帮我。我的代码如下。

```
class MyCompany_Bestseller_Block_Bestseller extends Mage_Catalog_Block_Product_Abstract  //Mage_Core_Block_Template
{
  public function __construct()
  {
    parent::__construct();
        $collection = $this->getBestsellerProduct();
        $this->setCollection($collection);
  }

    protected function _prepareLayout()
    {
        parent::_prepareLayout();

    $toolbar = $this->getToolbarBlock();

        // called prepare sortable parameters
        $collection = $this->getCollection();

        // use sortable parameters
        if ($orders = $this->getAvailableOrders()) {
            $toolbar->setAvailableOrders($orders);
        }
        if ($sort = $this->getSortBy()) {
            $toolbar->setDefaultOrder($sort);
        }
        if ($dir = $this->getDefaultDirection()) {
            $toolbar->setDefaultDirection($dir);
        }
        if ($modes = $this->getModes()) {
            $toolbar->setModes($modes);
        }

        // set collection to toolbar and apply sort
        $toolbar->setCollection($collection);

        $this->setChild('toolbar', $toolbar);

        $this->getCollection()->load();
        return $this;
    }

    public function getToolbarBlock()
    {
        $block = $this->getLayout()->createBlock('bestseller/toolbar', microtime());
        return $block;
    }
    public function getMode()
    {
        return $this->getChild('toolbar')->getCurrentMode();
    }

    public function getToolbarHtml()
    {
        return $this->getChildHtml('toolbar');
    } 

  function getBestsellerProduct()
  { 

    // store ID
    $storeId = Mage::app()->getStore()->getId();      

    // get most ordered products
    $products = Mage::getResourceModel('reports/product_collection')
                    ->addAttributeToSelect('*')     
                    ->addOrderedQty()
                    ->setStoreId($storeId)
                    ->addStoreFilter($storeId)                    
                    ->setOrder('ordered_qty', 'desc');                                      

    Mage::getSingleton('catalog/product_status')
            ->addVisibleFilterToCollection($products);
    Mage::getSingleton('catalog/product_visibility')
            ->addVisibleInCatalogFilterToCollection($products);

    return $products; 
  }
} 
```

我的模块的 Toolbar.php 块代码如下：

```
class MyCompany_Bestseller_Block_Toolbar extends Mage_Catalog_Block_Product_List_Toolbar
{
    public function getPagerHtml()
    {
        $pagerBlock = $this->getLayout()->createBlock('page/html_pager');

        if ($pagerBlock instanceof Varien_Object) {

            /* @var $pagerBlock Mage_Page_Block_Html_Pager */
            $pagerBlock->setAvailableLimit($this->getAvailableLimit());

            $pagerBlock->setUseContainer(false)
            ->setShowPerPage(false)
            ->setShowAmounts(false)
            ->setLimitVarName($this->getLimitVarName())
            ->setPageVarName($this->getPageVarName())
            ->setLimit($this->getLimit())
            ->setCollection($this->getCollection());
            return $pagerBlock->toHtml();
        }
        return '';
    }
} 
```

这是我使用的 xml 块。

```
<reference name="content">
            <block type="bestseller/bestseller" name="bestseller_list" template="bestseller/bestseller.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    <!-- The following code shows how to set your own pager increments -->
                    <!--
                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>9</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                    -->
                </block>
                <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </reference> 
```

我无法弄清楚代码的问题。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:15:17.407

我的收藏已经被加载，我遇到了类似的问题。这可以防止应用寻呼机中的所有过滤器。尝试将您的构造函数更改为

```
public function __construct()
{
    parent::__construct();
    $collection = $this->getBestsellerProduct()->clear();
    $this->setCollection($collection);
} 
```

如果您要再次加载畅销书系列，请在某些地方调用 count 。然后尝试

```
public function __construct()
{
    parent::__construct();
    $collection = clone $this->getBestsellerProduct();
    $this->setCollection($collection->clear());
} 
```

希望这能让你到达你需要的地方

# javascript - JavaScript，MegaPixImage - “修复”后上传文件到服务器

> ID：15923759
> 
> 赞同：0
> 
> 时间：2013-04-10T10:50:09.220
> 
> 标签：javascript

所以我知道浏览器上的新调整大小图像在 IOS 6.xxx 中有一个错误，经过大量阅读后，我现在可以使用一些 javascript 工具修复它。

我现在正在尝试这个[MegaPixImage](https://github.com/stomita/ios-imagefile-megapixel/blob/master/test/megapix-image.test.html)似乎可以解决问题。问题是修复后我找不到将图像上传到我的网络服务器的方法。

我的问题是，有人找到修复后的上传方式吗？如何？

谢谢，

普鲁达

# python - Python 字典 vs If 语句速度

> ID：15923766
> 
> 赞同：21
> 
> 时间：2013-04-10T10:50:18.553
> 
> 标签：python, if-statement, dictionary, switch-statement

我发现一些链接谈论在 c++ 中的 switch case 比 if else 更快，因为它可以在编译中进行优化。然后我发现了一些人们认为使用字典可能比使用 If 语句更快的建议。然而，大部分对话都是关于某人的工作，最终只是讨论他们应该首先优化代码的其他部分，除非你做了数百万个 if else，否则这无关紧要。谁能解释这是为什么？

假设我有 100 个唯一的数字，它们将不断地流入 Python 代码。我想检查它是哪个数字，然后执行一些操作。所以我可以做大量的 if else，或者我可以把每个数字放在字典里。为了争论起见，可以说它是一个单线程。

有人了解 python 和低级执行之间的层，可以解释这是如何工作的吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T11:53:36.747

> 然而，大部分对话都是关于某人的工作，最终只是讨论他们应该首先优化代码的其他部分，除非你做了数百万个 if else，否则这无关紧要。谁能解释这是为什么？

通常，只有在确实需要时才应该费心优化代码，即，如果程序的性能慢得无法使用。

如果是这种情况，您应该使用分析器来确定哪些部分实际上导致了最多的问题。对于 Python，[cProfile](http://docs.python.org/2/library/profile.html)模块非常适合这一点。

> 有人了解 python 和低级执行之间的层，可以解释这是如何工作的吗？

如果您想了解代码的执行方式，请查看[dis](http://docs.python.org/2/library/dis.html)模块。

一个简单的例子......

```
import dis

# Here are the things we might want to do
def do_something_a():
    print 'I did a'

def do_something_b():
    print 'I did b'

def do_something_c():
    print 'I did c'

# Case 1
def f1(x):
    if x == 1:
        do_something_a()
    elif x == 2:
        do_something_b()
    elif x == 3:
        do_something_c()

# Case 2
FUNC_MAP = {1: do_something_a, 2: do_something_b, 3: do_something_c}
def f2(x):
    FUNC_MAP[x]()

# Show how the functions execute
print 'Case 1'
dis.dis(f1)
print '\n\nCase 2'
dis.dis(f2) 
```

...输出...

```
Case 1
 18           0 LOAD_FAST                0 (x)
              3 LOAD_CONST               1 (1)
              6 COMPARE_OP               2 (==)
              9 POP_JUMP_IF_FALSE       22

 19          12 LOAD_GLOBAL              0 (do_something_a)
             15 CALL_FUNCTION            0
             18 POP_TOP
             19 JUMP_FORWARD            44 (to 66)

 20     >>   22 LOAD_FAST                0 (x)
             25 LOAD_CONST               2 (2)
             28 COMPARE_OP               2 (==)
             31 POP_JUMP_IF_FALSE       44

 21          34 LOAD_GLOBAL              1 (do_something_b)
             37 CALL_FUNCTION            0
             40 POP_TOP
             41 JUMP_FORWARD            22 (to 66)

 22     >>   44 LOAD_FAST                0 (x)
             47 LOAD_CONST               3 (3)
             50 COMPARE_OP               2 (==)
             53 POP_JUMP_IF_FALSE       66

 23          56 LOAD_GLOBAL              2 (do_something_c)
             59 CALL_FUNCTION            0
             62 POP_TOP
             63 JUMP_FORWARD             0 (to 66)
        >>   66 LOAD_CONST               0 (None)
             69 RETURN_VALUE

Case 2
 29           0 LOAD_GLOBAL              0 (FUNC_MAP)
              3 LOAD_FAST                0 (x)
              6 BINARY_SUBSCR
              7 CALL_FUNCTION            0
             10 POP_TOP
             11 LOAD_CONST               0 (None)
             14 RETURN_VALUE 
```

...因此很容易看出哪个函数必须执行最多的指令。

至于哪个实际上更快，这是您必须通过分析代码来检查的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T11:14:35.050

if/elif/else 结构将其赋予的键与一系列可能的值逐一进行比较，直到在某些 if 语句的条件中找到匹配项，然后从 if 块中读取它应该执行的内容。这可能需要很长时间，因为每次查找都必须进行如此多的检查（`n/2`平均而言，可能的值）。`n`

if 语句序列比 switch 语句更难优化的原因是条件检查（C++ 中括号内的内容）可能会改变下一次检查中涉及的某个变量的状态，所以你必须这样做他们按顺序。switch 语句的限制消除了这种可能性，因此顺序无关紧要（我认为）。

* * *

Python 字典[被实现为哈希表](https://stackoverflow.com/questions/327311/how-are-pythons-built-in-dictionaries-implemented)。这个想法是这样的：如果您可以处理任意大的数字并拥有无限的 RAM，您可以创建一个巨大的函数指针数组，只需将您的查找值转换为整数并将其用作索引即可。查找几乎是即时的。

当然，您不能这样做，但是您*可以*创建一个长度可管理的数组，将查找值传递给[哈希函数](http://en.wikipedia.org/wiki/Hash_function)（根据查找值生成一些整数），然后`%`将结果与您的长度数组以获取该数组范围内的索引。这样，查找所需的时间与调用哈希函数一次、取模并跳转到索引所需的时间一样多。如果不同的可能查找值的数量足够大，那么与那些`n/2`条件检查相比，散列函数的开销可以忽略不计。

（实际上，由于许多不同的查找值将不可避免地映射到同一个索引，所以并不是那么简单。您必须检查并解决可能的冲突，这可以通过多种方式完成。不过，它的要点是如上所述。）

# wcf - Microsoft WCF - SOAP 消息传递协议

> ID：15923767
> 
> 赞同：0
> 
> 时间：2013-04-10T10:50:22.467
> 
> 标签：wcf, jax-ws

使用 WCF 创建的默认 Web 服务将具有 WSDL 但所需的消息传输不应具有像 <soap:envelope>、<soap:header>、<soap:body> 这样的 SOAP 标记，这对吗？

那么在这种情况下，他们还在使用 SOAP 1.1 吗？

然后，如何使用遵循此标准的 JAX-WS 创建另一个 Web 服务？

非常感谢，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:57:39.300

我不清楚您在问什么，但如果您尝试使用 WCF 客户端调用基于 Java 的服务（Apache、Metro 等），请查看[WCF Express Interop bindings](http://wcf.codeplex.com/wikipage?title=WCF%20Express%20Interop%20Bindings)。

# ruby-on-rails-3 - 第 9 章 测试失败 Ruby on rails 教程

> ID：15923769
> 
> 赞同：1
> 
> 时间：2013-04-10T10:50:36.830
> 
> 标签：ruby-on-rails-3

我是 Rails 的新手，正在阅读 Michael Hartl 的 RubyOnRails 教程……我已经阅读了第 9 章的类似问题，但我没有解决我自己的问题，所以这是我的 github 存储库和失败的测试……也许有人可以帮助我， 非常感谢 ;）

[https://github.com/AntonioCortinaL/sample_app](https://github.com/AntonioCortinaL/sample_app)

```
1) UserPages edit page 
 Failure/Error: it { should have_selector('h1',       text: "Update your profile") }
   expected css "h1" with text "Update your profile" to return something
 # ./spec/requests/user_pages_spec.rb:61:in `block (4 levels) in <top (required)>'

2) UserPages edit page 
 Failure/Error: it { should have_selector('title',    text: "Edit user") }
   expected css "title" with text "Edit user" to return something
 # ./spec/requests/user_pages_spec.rb:62:in `block (4 levels) in <top (required)>'

3) UserPages edit page 
 Failure/Error: it { should have_link('change', href: 'http://gravatar.com/emails') }
   expected link "change" to return something
 # ./spec/requests/user_pages_spec.rb:63:in `block (4 levels) in <top (required)>'

4) UserPages edit with invalid information 
 Failure/Error: before { click_button "Save changes" }
 Capybara::ElementNotFound:
   no button with value or id or text 'Save changes' found
 # (eval):2:in `click_button'
 # ./spec/requests/user_pages_spec.rb:67:in `block (4 levels) in <top (required)>'

5) UserPages edit with valid information 
 Failure/Error: fill_in "Name",             with: new_name
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:76:in `block (4 levels) in <top (required)>'

6) UserPages edit with valid information 
 Failure/Error: fill_in "Name",             with: new_name
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:76:in `block (4 levels) in <top (required)>'

7) UserPages edit with valid information 
 Failure/Error: fill_in "Name",             with: new_name
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:76:in `block (4 levels) in <top (required)>'

8) UserPages edit with valid information 
 Failure/Error: fill_in "Name",             with: new_name
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:76:in `block (4 levels) in <top (required)>'

9) UserPages edit with valid information 
 Failure/Error: fill_in "Name",             with: new_name
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Name' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:76:in `block (4 levels) in <top (required)>' 
```

**在 Paul Fioravanti 回答后编辑：**

好的，谢谢...我为此更改了它：

```
 before do
  sign_in user
  visit edit_user_path(user) 
 end 
```

现在它的 5 个错误

```
1) UserPages edit with valid information 
 Failure/Error: fill_in "Confirm Password", with: user.password
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirm Password' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:81:in `block (4 levels) in <top (required)>'

2) UserPages edit with valid information 
 Failure/Error: fill_in "Confirm Password", with: user.password
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirm Password' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:81:in `block (4 levels) in <top (required)>'

3) UserPages edit with valid information 
 Failure/Error: fill_in "Confirm Password", with: user.password
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirm Password' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:81:in `block (4 levels) in <top (required)>'

4) UserPages edit with valid information 
 Failure/Error: fill_in "Confirm Password", with: user.password
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirm Password' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:81:in `block (4 levels) in <top (required)>'

5) UserPages edit with valid information 
 Failure/Error: fill_in "Confirm Password", with: user.password
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirm Password' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:81:in `block (4 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:06:09.833

[您的**user_pages_spec.rb**测试](https://github.com/AntonioCortinaL/sample_app/blob/master/spec/requests/user_pages_spec.rb#L57)说：

```
describe "edit" do
  let(:user) { FactoryGirl.create(:user) }
  before { visit edit_user_path(user) }
  # ...
end 
```

你在ing`sign_in`之前忘记了。`visit``edit_user_path`

[这是本教程的等效规范](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/spec/requests/user_pages_spec.rb#L200)。

**编辑**：

至于您的第二个问题，请参阅[此处](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/spec/requests/user_pages_spec.rb#L179)的 Rails 教程中的等效链接。[在此处](https://github.com/AntonioCortinaL/sample_app/blob/master/spec/requests/user_pages_spec.rb#L24)和[此处](https://github.com/AntonioCortinaL/sample_app/blob/master/spec/requests/user_pages_spec.rb#L81)比较您的**user_pages_spec.rb** ：您可以看到您正在尝试一个字段和一个字段，其中只有一个实际存在于您的应用程序中...... `fill_in``"Confirm Password"``"Confirmation"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T21:54:28.090

确保在运行测试套件之前使用 rails 控制台为每个用户提供有效的记忆令牌。遵循 8.2.4 以获得准确的说明。

# c# - 如何使用 .net 的 Google.GData.Apps 更改密码

> ID：15923774
> 
> 赞同：1
> 
> 时间：2013-04-10T10:50:48.523
> 
> 标签：c#, passwords

我正在开发适用于 Google 域的密码重置应用程序。我使用了 .net 配置 API。我戴上眼镜并尝试了所有方法，但没有找到任何更改密码的方法。

使用以下链接[https://developers.google.com/google-apps/provisioning/#updating_a_user_account](https://developers.google.com/google-apps/provisioning/#updating_a_user_account)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:55:34.400

我找到了一个非常简单的方法

```
 AppsService service = new AppsService("domain", "adminusername", "adminpassword");
  UserEntry user = service.RetrieveUser("viresh1");
  user.Login.Password = "newpassword";
  service.UpdateUser(user); 
```

# performance - 性能 Tomcat 7 与 Glassfish 3

> ID：15923777
> 
> 赞同：1
> 
> 时间：2013-04-10T10:50:53.610
> 
> 标签：performance, servlets, tomcat7, neo4j, glassfish-3

我有一个简单的 JSP/Servlet maven 应用程序，它允许用户上传存档文件。然后应用程序将解压缩包含 XML 文件的存档，并使用基本的 SAX 解析来解析它们。它将生成这些文件的内存表示，并将它们写入当前处于嵌入式模式的 Neo4J 图形数据库。

在开发过程中，我使用了 GlassFish v3，但考虑到生产，已经提出从 Glassfish 迁移到 Tomcat 的请求，所以我做到了。除了 Tomcat 的一些小问题迫使我添加 JSF 依赖项（尽管我没有使用任何 JSF）之外，Tomcat atm 还存在一个大问题。

我在 glassfish v3 上上传和解析的最大测试文件大约需要 8 秒。之后，由于我没有清理上传的文件（还），它需要大约 2 秒。

Tomcat7上的同一个文件第一次上传和解析大约需要90秒。其他时间大约少了 20 秒，大概是因为同样的原因。

无论如何，性能差异是 10 倍。我有点惊讶，因为我认为使用 Tomcat 实际上会提高速度，因为它比 Glassfish 更轻量级，因为我并没有真正使用高级Glassfish 提供的功能。

有没有人遇到过类似的问题，你做了什么来解决这个问题？这甚至可以解决，还是由于Tomcat的工作方式......

**编辑：差异似乎在于负责将文件的内存表示写入实际数据库的代码部分......不知道为什么......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T17:46:16.293

我找不到 Tomcat 与 Glassfish 的比较，但是是的，新的 Glassfish 版本重量非常轻，性能非常好。我也有同样的经历。我想运行应用程序服务器而不是 Tomcat 不再是巨大的管理和硬件浪费（如果您愿意，可以使用轻量级 EJB 3 和 3.1）。如果您只选择必要的模块，Glassfish 安装的尺寸可能非常小。

检查此页面。它比较了 Jboss、Glassfish 和 Resin

[http://hwellmann.blogspot.com/2011/06/java-ee-6-server-comparison.html](http://hwellmann.blogspot.com/2011/06/java-ee-6-server-comparison.html)

这个比较了 Glassfish 3.1 和 Jboss 6 & 7。

[http://hwellmann.blogspot.com/2011/10/jboss-as-7-catch-up-with-java-ee-6.html](http://hwellmann.blogspot.com/2011/10/jboss-as-7-catching-up-with-java-ee-6.html)

# css - 带有标签“输入按钮”和“a”的按钮不在同一行

> ID：15923779
> 
> 赞同：1
> 
> 时间：2013-04-10T10:50:56.010
> 
> 标签：css

我又来问了：）

我需要两种类型的按钮，一种使用“输入按钮”，另一种使用标签“a”链接。

但是当尝试这样做时，使用标签“a”的“按钮”低于其他按钮，我无法使其保持在其他按钮的同一行。

我将示例放在 jsFiddle 中：

[http://jsfiddle.net/mtsys/RLgEj/](http://jsfiddle.net/mtsys/RLgEj/)

```
<br><br><br>
<input name="btnSubmit" class="botao salvar" type="submit" value="Salvar" />
&nbsp;&nbsp;
<input name="btnSubmit" class="botao excluir" type="submit" value="Excluir" />
&nbsp;&nbsp;
<input name="btnSubmit" class="botao voltar" type="submit" value="Voltar" />
&nbsp;&nbsp;
<a class="botao voltar" href="/Produto/Index">Voltar&nbsp;&nbsp;</a> 
```

tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:14:30.690

将此添加到您的CSS（最后一条规则）：

```
.botao {
  background-color:#fff;
  border-radius:6px;
  border:1px solid #87a5b6;
  display:inline-block;
  color:#000;
  font-family:Verdana;
  font-size:12px;
  font-weight:bold;
  padding-left:32px;
  padding-right :16px;
  text-decoration:none;    
  cursor:pointer;   
  height:32px;
  line-height: 32px;/* this is the magic */
} 
```

我更新了[小提琴](http://jsfiddle.net/mtsys/RLgEj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:00:34.827

尝试这个

```
.botao {
    vertical-align: middle;
}
a.botao {
    padding-top: 7px;
    height: 24px !important;
} 
```

[http://jsfiddle.net/RLgEj/6/](http://jsfiddle.net/RLgEj/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:01:03.263

把这个：

```
<body style="line-height:30px;"> 
```

**见演示**

[http://jsfiddle.net/RLgEj/5/](http://jsfiddle.net/RLgEj/5/)

# google-app-engine - 如何减少 Firebug 网络面板中的等待时间？

> ID：15923783
> 
> 赞同：1
> 
> 时间：2013-04-10T10:51:07.120
> 
> 标签：google-app-engine, gwt, firebug

我正在使用谷歌应用引擎作为服务器来开发 gwt 应用程序。我已经放置了日志和 appstat 过滤器，这样我就可以知道延迟时间是多少。假设如果我打开一个链接，它显示 appstats (real=118ms) 为 118 毫秒，通过我的登录过滤器返回为 90 毫秒，所以它完全是 208 毫秒，但在 firebug 网络面板中它显示第一个请求的加载时间为 705 毫秒，任何人有任何想法，请告诉我。

谢谢MSNaidu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:53:30.450

很难弄清楚萤火虫是否记录不正确或是否存在真正的延迟。您应该尝试使用[Chrome SpeedTracer](https://developers.google.com/web-toolkit/speedtracer/)和 Chrome 的 Dev Tools Network、[Timeline](https://developers.google.com/chrome-developer-tools/docs/timeline)和 Audits 功能进行交叉确认。

# c++ - 移位计数> =类型和宏的宽度与内联函数

> ID：15923787
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:51:11.880
> 
> 标签：c++, macros, inline

我正在处理一些位操作，并在宏与内联函数中的同一行代码中遇到奇怪的不同输出。该函数从-th 位置返回具有`L`活动位的 64 位掩码： 。有人可以告诉我输出不同的原因吗？`N``(~0<<N) - (~0<<(N+L))`

```
#include <iostream>
#include <bitset>
using namespace std;

#define ONES (~0UL)

#define MASK(from_bit, nbits) \
  (ONES << (from_bit)) - (ONES << ((from_bit) + (nbits)))

inline unsigned long int mask(size_t from_bit, size_t nbits) {
  return (ONES << from_bit) - (ONES << (from_bit + nbits));
}

int main(int argc, char **argv) {
  cout << "using #define:         " << bitset<64>(MASK(63, 3)) << endl;
  cout << "using inline function: " << bitset<64>(mask(63, 3)) << endl;
  return 0;
} 
```

输出：

```
$ g++ -o test main.cc
main.cc: In function 'int main(int, char**)':
main.cc:15: warning: left shift count >= width of type
$ ./test
using #define:         1000000000000000000000000000000000000000000000000000000000000000
using inline function: 1000000000000000000000000000000000000000000000000000000000000100
                                                                              ------^ 
```

`-O3`使用选项编译：

```
$ g++ -O3 -o test2 main2.cc
main.cc: In function 'int main(int, char**)':
main.cc:15: warning: left shift count >= width of type
$ ./test2
using #define:         1000000000000000000000000000000000000000000000000000000000000000
using inline function: 0000000000000000000000000000000000000000000000000000000000000000
                 ------^ 
```

编译器信息：

```
$ g++ --version
i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:04:35.067

您的编译器警告说明了这一点。

您的移位量 ( `from_bit + nbits`) 大于您使用的类型的大小。

宏和函数的区别在于，前者没有类型检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:04:44.970

您不应忽略编译器警告。它告诉你有问题。

在法律上，您只能移动比整数类型中的位数更少的位置。

这有效：

```
#include <iostream>
#include <bitset>
using namespace std;

#define ONES (~0ULL)

#define MASK(from_bit, nbits) \
  (ONES << (from_bit)) - (ONES << (from_bit) << (nbits))

inline unsigned long long mask(unsigned from_bit, unsigned nbits) {
  return (ONES << from_bit) - (ONES << from_bit << nbits);
}

int main(int argc, char **argv) {
  cout << "using #define:         " << bitset<64>(MASK(63, 3)) << endl;
  cout << "using inline function: " << bitset<64>(mask(63, 3)) << endl;
  return 0;
} 
```

输出（[ideone](http://ideone.com/zulN9t)）：

```
using #define:         1000000000000000000000000000000000000000000000000000000000000000
using inline function: 1000000000000000000000000000000000000000000000000000000000000000 
```

# mongodb - mongodb - 使用字符串或 ObjectId 构造 DBRef

> ID：15923788
> 
> 赞同：2
> 
> 时间：2013-04-10T10:51:12.083
> 
> 标签：mongodb, objectid, dbref

`DBRef`我注意到在 mongodb 中可以使用字符串或对象 id 来构造 a 。例如

```
db.persons.insert({name: 'alice'})
db.persons.find()
// { "_id" : ObjectId("5165419064fada69cef33ea2"), "name" : "alice" }
db.persons.insert({name: 'bob', sister: new DBRef('persons', '5165419064fada69cef33ea2')}) // use a string
db.persons.find()
// { "_id" : ObjectId("5165419064fada69cef33ea2"), "name" : "alice" }
// { "_id" : ObjectId("516541c064fada69cef33ea3"), "name" : "bob", "sister" : { "$ref" : "persons", "$id" : "5165419064fada69cef33ea2" } }
db.persons.insert({name: 'cavin', sister: new DBRef('persons', new ObjectId('5165419064fada69cef33ea2'))}) // use an ObjectId
db.persons.find()
// { "_id" : ObjectId("5165419064fada69cef33ea2"), "name" : "alice" }
// { "_id" : ObjectId("516541c064fada69cef33ea3"), "name" : "bob", "sister" : { "$ref" : "persons", "$id" : "5165419064fada69cef33ea2" } }
// { "_id" : ObjectId("516541e464fada69cef33ea4"), "name" : "cavin", "sister" : { "$ref" : "persons", "$id" : ObjectId("5165419064fada69cef33ea2") } } 
```

谁能告诉我有什么区别以及首选哪种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:40:37.943

唯一的区别是一个实际上是一个`ObjectId`，另一个是一个字符串表示，看起来像是一个`ObjectId`。

DBRef 作为 ObjectId：

```
db.persons.insert({name: 'cavin', 
     sister: new DBRef('persons', 
         new ObjectId('5165419064fada69cef33ea2'))}) // use an ObjectId 
```

DBRef 作为字符串：

```
db.persons.insert({name: 'bob', 
     sister: new DBRef('persons', 
        '5165419064fada69cef33ea2')}) // use a string 
```

在您包含的示例中，该`ObjectId`格式可以提高存储效率，因为它是一个 12 字节的值，而不是字符串表示所需的 24 个字节。如果您想使用`DBRef`s，`ObjectId`如果引用的集合将`ObjectId`s 用于`_id`.

您不需要`ObjectId`在[DBRef](http://docs.mongodb.org/manual/reference/database-references/)中使用 an 。它可以是表示`_id`相关集合/数据库的键 ( ) 的任何值。

正如[文档](http://docs.mongodb.org/manual/reference/database-references/)所建议的那样，除非您有令人信服的理由使用 a ，否则请`DBRef`改用手动引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T05:53:55.067

**ObjectId 优点**

*   它有一个嵌入的时间戳。

*   这是默认的 Mongo _id 类型；无处不在

*   与其他应用程序和驱动程序的互操作性

**ObjectId 缺点**

*   它是一个对象，在实践中更难操作。

*   有时您会忘记将字符串包装在 new ObjectId() 中

*   它需要创建服务器端对象以保持 _id 唯一性

*   这使得通过 minimongo 在客户端生成它们有问题

**字符串优点**

*   开发人员可以创建特定于域的 _id 拓扑

**字符串缺点**

*   开发人员必须确保 _ids 的唯一性

*   findAndModify() 和 getNextSequence() 查询可能无效

# python - 我可以打包 IPython Notebook、依赖项和附加模块吗？

> ID：15923789
> 
> 赞同：1
> 
> 时间：2013-04-10T10:51:13.043
> 
> 标签：python, virtualenv, ipython, ipython-notebook

对于具有多个开发人员的项目，我需要以下工作环境：

*   蟒蛇3
*   ipython（笔记本）
*   麻木的
*   网络x
*   matplotlib

在不同的系统（OSX、Ubuntu、Suse）上安装这些软件包非常耗时，而且根据我的经验很可能会出现问题。是否可以将它们（可能带有`virtualenv`）打包到一个存储库中，用户可以简单地克隆并开始工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:20:23.940

您的列表中没有 Windows，这是幸运的。

我会通过创建一个他们可以克隆的单一仓库来做到这一点。您可以将所需的 Python 3.3 安装程序放在 repo 中，并要求人们安装它，如果他们还没有这样做的话。

克隆 repo 后，您的协作者将执行以下操作：

首先确保 virtualenv 和 virtualenvwrapper 全局安装：

```
sudo pip install virtualenv virtualenvwrapper 
```

激活 virtualenvwrapper：

```
# consider adding this to ~/.profile or equivalent
source /usr/local/bin/virtualenvwrapper.sh 
```

创建并激活 ipy 虚拟环境：

```
mkvirtualenv ipy 
```

安装必要的要求：

```
pip install -r repo/reqs.txt 
```

repo/reqs.txt 包含以下内容：

```
tornado
pyzmq
ipython
numpy
matplotlib 
```

将来，他们只会这样做：

```
workon ipy 
```

激活相关的virtualenv，然后：

```
ipython notebook 
```

启动 ipython 笔记本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:15:03.540

我建议使用像 Anaconda 或 EPD 这样的多合一安装程序。我认为克隆的单个 repo 不会起作用，我想像 numpy 这样的许多东西都需要一个编译步骤。

# google-apps-script - 如何根据彩色单元格更新单元格的值？

> ID：15923795
> 
> 赞同：2
> 
> 时间：2013-04-10T10:51:26.757
> 
> 标签：google-apps-script, google-sheets, formula

在 Google 表格电子表格中，我有一些绿色和红色的单元格。我想要一个包含那些绿色/红色单元格的单元格。

是否有一个公式来做这件事或任何自定义代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:02:40.457

此[Google Apps 脚本](https://developers.google.com/apps-script/execution_custom_functions?hl=es)应该可以帮助您入门（请参阅[示例电子表格](https://docs.google.com/spreadsheet/ccc?key=0AmR0r1Y14zgydG03QS1Dd0dLRDA3SWgtLXp6TzV3d3c#gid=7)）：

```
function countRedBackgrounds() {
  var COUNT_RED = 0;
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Cell colors");
  var dataRange = sheet.getDataRange();
  for (var i = 1; i<dataRange.getNumRows(); i++) {
    for (var j = 1; j<dataRange.getNumColumns(); j++) {
      if (dataRange.getCell(i,j).getBackground() == "#ff0000")
        COUNT_RED++;
    }
  }
  dataRange.getCell(1,1).setValue(COUNT_RED);
} 
```

# jquery - 选择复选框时加载相关复选框

> ID：15923804
> 
> 赞同：0
> 
> 时间：2013-04-10T10:51:48.240
> 
> 标签：jquery, checkbox

```
$('#Container').append('<input type="checkbox" id = '+ data[i].name + '/> ' + data[i].name + '<br />'); 
```

上面的代码在框 A（一个 div）中显示了几个复选框。如果我在框 A 中选择了一个复选框，我将该值发送到数据库，它会获取一个将显示在框 B 中的值。

例如，如果我在框 A 中选择 2 个复选框，我会将这些值发送到数据库，它会获取相应的值并将它们显示在框 B 中。

```
 $('#checkbox').change(function() { 
```

我想知道这`#checkbox` 是指什么。它是复选框的ID还是其他？

有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:59:05.300

是的，它是一个ID..

```
$('#checkbox') <-- refers to an element  having an id as "checkbox" it might be div or checkbox or any element whose id is equal to checkbox. 
$('.checkbox')  <--refers to an element  having class as "checkbox"
$('input:checkbox') <--- refers to all input with type checkbox 
```

浏览文档以了解有关[选择器的更多信息](http://api.jquery.com/category/selectors/)

**更新**

例子

```
$('#Container').append('<input type="checkbox" class="ckbox" id = '+ data[i].name + '/> ' + data[i].name + '<br />');
$('#Container').append('<input type="checkbox" class="ckbox" id = '+ data[i].name + '/> ' + data[i].name + '<br />'); 
```

调用类选择器

```
$('#Container').on('change','.ckbox',function(){
    var  selectedValue = $("input.ckbox:checked").map(function(n){
        return this.value;
    });
   alert(seletedValue.join(','));
}); 
```

`on()`因为检查是动态添加的，所以必须委托事件才能发生更改事件。

# asp.net-mvc-4 - MVC4 与 TinyMCE 捆绑

> ID：15923805
> 
> 赞同：28
> 
> 时间：2013-04-10T10:51:55.303
> 
> 标签：asp.net-mvc-4, tinymce, bundle

我在使用 MVC4 捆绑和 TinyMCE 时遇到问题。我收到此错误：

```
 GET http://localhost:54717/Admin/EditText//langs/da.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/lists/editor_plugin.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/autolink/editor_plugin.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//themes/advanced/editor_template.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/spellchecker/editor_plugin.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/pagebreak/editor_plugin.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/style/editor_plugin.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/table/editor_plugin.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/layer/editor_plugin.js 404 (Not Found) Site:1
    GET http://localhost:54717/Admin/EditText//plugins/save/editor_plugin.js 404 (Not Found)
Failed to load: http://localhost:54717/Admin/EditText//langs/da.js 
```

代码如下所示（在 BundleConfig.cs 中）

```
bundles.Add(
      new ScriptBundle("~/Scripts/Site").Include(
        "~/Scripts/jquery-1.9.1.js",
        "~/Scripts/tinymce/tiny_mce.js",
         "~/Scripts/jquery-ui-1.10.1.js",
        "~/Scripts/jquery.ui.slider.js",
        "~/Scripts/oline.Base.js",
        "~/Scripts/Validate/Language/jquery.validationEngine-da.js",
        "~/Scripts/Validate/jquery.validationEngine.js",
        "~/Scripts/jquery.ui.effect-blind.js",
        "~/Scripts/jquery.placeholder.min.js"));

      BundleTable.EnableOptimizations = true; 
```

在布局中：

```
@Scripts.Render("~/Scripts/Site") 
```

但是，如果我从捆绑中删除 tiny_mce.js 并像这样放置它 <`script src="~/Scripts/tinymce/tiny_mce.js"></script>`它工作得很好。是因为我需要覆盖tinymce的自动加载并手动放置吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-22T20:08:20.450

在调用 tinymce.init 之前，请执行以下操作：

```
tinymce.baseURL = "@Url.Content("~/Scripts/tinymce")"; 
```

或者你的脚本保存在哪里。

我有同样的问题。这是我工作的最终产品

```
 <script>
    tinymce.baseURL = "@Url.Content("~/Scripts/tinymce")";

    // tinyMCE setup
    tinymce.init({
        selector: "textarea.rt-edit",
        browser_spellcheck: true,
        menubar: false,
        plugins: "paste,preview,code,textcolor,link",
        invalid_elements: "script",

        // Theme options - button# indicated the row# only
        toolbar1: "bold italic underline strikethrough subscript superscript link | fontselect fontsizeselect forecolor backcolor | justifyleft justifycenter justifyright cut copy paste pastetext pasteword| outdent indent | undo redo | code preview ",

    });
</script> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-30T14:41:10.037

今天也刚好碰到这个。似乎在捆绑tinymce时，它无法找到其他依赖脚本（插件、编辑器模板等）。

由于 TinyMCE 已经缩小，我只是通过从捆绑包中排除它并单独加载它来解决这个问题。像这样的东西：

```
@* include tinymce unbundled so it can find its plugins and other scripts internally when bundles are optimized *@
@if (BundleTable.EnableOptimizations)
{
    <script type="text/javascript" src="~/scripts/tinymce/tiny_mce.js"></script>
}
else
{
    <script type="text/javascript" src="~/scripts/tinymce/tiny_mce_src.js"></script>
}

@Scripts.Render("~/Scripts/Site") 
```

这样，您在启用优化时仍然使用预先缩小的版本，而在调试时仍然使用原始源代码。不过，最终浏览器会发送多个请求。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-22T18:51:47.700

@Codeacula 有一个很好的解决方案，但另一种方法是将捆绑路径相对于 TinyMCE 文件夹。

请注意，您必须将其从主脚本包中拉出才能使其工作，但由于我没有在每个页面上都使用 TinyMCE，因此将其添加到主包中没有任何意义。此外，我使用**.min.js**作为扩展名，因为它加载基于主文件扩展名的插件，而我的插件文件夹中除了**.min.js文件之外什么都没有。**

```
var tinymce = new ScriptBundle("~/Scripts/tinymce/tinymce-bundle.min.js")
    .Include("~/Scripts/tinymce/tinymce.min.js");
bundles.Add(tinymce); 
```

在需要 TinyMCE 的页面上：

```
@Scripts.Render("~/Scripts/tinymce/tinymce-bundle.min.js"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-27T15:19:51.317

我知道，我知道一个长期死的帖子，但是，因为我今天自己偶然发现了这个问题，所以我想减少我的 2 美分。

上面接受和/或批准的答案都很好，但它们并没有关闭我的渴望，因为没有多个连接到服务器的开销，以便在`tinymce(.min).js`请求它们时下载 tinyMCE 工作所需的所有 js .

由于我看到主 js 文件中实际上有一个 javascript 加载器，它仅在尚未定义变量（在其中声明的变量）时才下载所需的脚本，所以我想将整个 .js 集包含在一个包中，以便当您调用`.init`函数脚本时，将不需要下载。就像是：

```
bundles.Add(new ScriptBundle("~/Scripts/tinymce/bundledTinyMCE").IncludeDirectory("~/Scripts/tinymce", "*.js", true)); 
```

假设您的 tinyMCE 位于文件夹中`~/Scripts/tinymce`。

不会触发进一步的后期脚本下载，并且您的 tinyMCE js 将被缩小和捆绑（在发布配置中）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-15T11:22:55.360

在我的情况下，我执行以下操作来解决：忽略捆绑并直接引用插件的缩小版本。

```
@section scripts
{
    @Scripts.Render("~/bundles/ajax")
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/tinymce/tinymce.min.js"></script>
} 
```

# java - Spring，Tomcat7中的全局异常处理

> ID：15923807
> 
> 赞同：-3
> 
> 时间：2013-04-10T10:52:05.147
> 
> 标签：java, spring, exception, tomcat

处理全局异常的最佳方法是什么？

我发现的一切都不起作用。

尝试过过滤器、UnhandledMessageHandler 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:09:42.650

那么[ExceptionHandler](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)呢？你试过了吗？
这可能会帮助[http://www.tutorialspoint.com/spring/spring_exception_handling_example.htm](http://www.tutorialspoint.com/spring/spring_exception_handling_example.htm)

# python - Django queryset 'in' 运算符在第一次调用时失败

> ID：15923809
> 
> 赞同：3
> 
> 时间：2013-04-10T10:52:08.513
> 
> 标签：python, django, django-models, django-templates

在查询集上使用“in”运算符时，第一次调用失败。

**编辑4：**

我已将我的问题简化为以下代码，任何人都应该很容易测试。

```
from django.db import models

class Category(models.Model):
    name = models.CharField(max_length=100)

class Project(models.Model):
    categories = models.ManyToManyField(Category, related_name='projects')    

category_list = Category.objects.prefetch_related('projects')

print category_list # [<Category: Category object>, <Category: Category object>]
print category_list[0] in category_list # False
print category_list[0] in category_list # True 
```

如果我删除“prefetch_related”并改用“all”，那么问题就消失了，但这会使用更多的数据库调用。

如何第一次使用 prefetch_related 得到正确的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:45:51.720

[在此处](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)的 Django 文档中，它显示了与您相同的代码，但`.all()`在 prefetch_related 前面有一个。

也许在没有那个 Django 的情况下可能对查询太懒了？我认为它可能会等到第一个切片 [0] 并将其解释为查询（LIMIT 0），但这并不能解释显示那里所有内容的打印语句。无论哪种方式，它看起来都像一个错误 - 无法想象这是“预期的行为”。

你能用`.all()`in 试试并报告输出吗？

# android - 操作栏图标在 android 中看起来更小

> ID：15923811
> 
> 赞同：0
> 
> 时间：2013-04-10T10:52:13.017
> 
> 标签：android, android-layout

我正在为我的应用操作栏项目使用语音邮件图标。但与其他图标相比，它看起来非常小。我也使用相同的尺寸 - 48x48、36x36、24x24 和 18x18。

请给我建议。

谢谢

![在此处输入图像描述](https://i.stack.imgur.com/UEhyZ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:57:02.027

[指南](https://developer.android.com/design/style/iconography.html)说 32dp，这意味着你太小了。

> 手机的操作栏图标应为 32x32 dp。

这将意味着以下像素大小：

```
 ldpi: 24x24 pixel
 mdpi: 32x32 pixel
 hdpi: 48x48 pixel
xhpdi: 64x64 pixel 
```

# c# - 如何撤消 RemotingConfiguration.RegisterWellKnownServiceType()？

> ID：15923812
> 
> 赞同：0
> 
> 时间：2013-04-10T10:52:14.530
> 
> 标签：c#, .net, remoting

使用 注册 .net 远程服务后`RemotingConfiguration.RegisterWellKnownServiceType()`，有什么方法可以撤消此操作以使应用程序不再提供此服务？

我检查了这个[链接](http://msdn.microsoft.com/en-us/library/vstudio/system.runtime.remoting.remotingconfiguration%28v=vs.100%29.aspx)，但令人惊讶的是，似乎没有 UnregisterWellKnownServiceType-Method。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:09:15.763

如果您将众所周知的类型注册为 Singleton，您可以使用：

```
RemotingServices.Disconnect(foo); 
```

但首先你必须创建对象然后编组它而不是使用 RegisterWellKnownServiceType：

```
Foo foo = new Foo();
RemotingServices.Marshal(foo, uri); 
```

如果您将众所周知的类型注册为 SingleCall，则无法执行此操作。

# c++ - 为什么我的程序在执行间接跳转时会崩溃？

> ID：15923817
> 
> 赞同：0
> 
> 时间：2013-04-10T10:52:26.407
> 
> 标签：c++, assembly, visual-c++, x86

我想做一个即时跳转（以提高性能），而不是调用一个新函数或制作一个跳转表。我不知道为什么这段代码可以在我的编译器上运行，但它不能正确跳转：

```
__asm mov eax, __cmd
__asm jmp eax //Crash!

__cmd :
//Some code 
```

我尝试了第二种方法，它也可以编译但不起作用：

```
int address = 10;
__asm jmp (__cmd + address) //Crash!

__cmd :
var += value;return;
var -= value;return;
var *= value;return;
var /= value;return;
var %= value;return; 
```

但是，它只适用于常量：

```
__asm jmp (__cmd + 10) //works 
```

为什么我的程序在执行间接跳转时会崩溃？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:00:15.540

根据评论，我找到了答案：

```
mov eax, offset __cmd 
```

现在我可以实现间接跳转了。

# android - libusb_open 返回 LIBUSB_ERROR_ACCESS？

> ID：15923820
> 
> 赞同：3
> 
> 时间：2013-04-10T10:52:29.890
> 
> 标签：android, android-ndk, libusb-1.0

我在使用 jni 的 android 应用程序中使用 libusb。我可以使用 libusb 找到设备。但无法打开它。

# TestExP.c

```
#include <stdio.h>
#include <sys/types.h>
#include <string.h>
#include <libusb.h>
#include <jni.h>

#define MY_VENDOR_ID    0xXXXX
#define MY_PRODUCT_ID       0xXXXX

int is_usbdevblock( libusb_device *dev )
{
struct libusb_device_descriptor desc;
int r = libusb_get_device_descriptor( dev, &desc );

if( desc.idVendor == MY_VENDOR_ID && desc.idProduct == MY_PRODUCT_ID ){
    return 1;
}

return 0;
}
char* mymethod()
{
    libusb_device **list;
    libusb_device *found = NULL;
    libusb_context *ctx = NULL;
    int attached = 0;
    if(libusb_init(&ctx)!=0)
       return "libusb init failed";

    libusb_set_debug(ctx,3);
    ssize_t cnt = libusb_get_device_list(ctx, &list);
    ssize_t i = 0;
    int err = 0;
    if (cnt < 0)
        return "No usb device on system";
    for(i = 0; i < cnt; i++){
        libusb_device *device = list[i];
        if( is_usbdevblock(device) ){
            found = device;
        break;
        }
    }
    if(found){
        libusb_device_handle *handle;
        err = libusb_open(found, &handle);
        if (err)
            return "Open error";
        return "Device Opened";
    }
return "Device not found";
}

JNIEXPORT jstring JNICALL Java_com_example_test_Test_TestOpen(JNIEnv* env, jobject obj)
{
    return mymethod();
} 
```

# 安卓.mk

```
 include $(CLEAR_VARS)
 LOCAL_MODULE    := libusb-1.0
 LOCAL_SRC_FILES := libusb-1.0.so
 include $(PREBUILT_SHARED_LIBRARY)

 include $(CLEAR_VARS)
 LOCAL_MODULE    := TestExP
 LOCAL_SRC_FILES := TestExP.c
 LOCAL_SHARED_LIBRARIES += usb-1.0
 include $(BUILD_SHARED_LIBRARY) 
```

在我的活动课上，我遵循...

# 测试.java

```
static{
    System.loadLibrary("usb-1.0");
    System.loadLibrary("TestExP");
}
 public native String TestOpen(); 
```

一切运行良好。当我运行这个程序时，它返回 -3 libusb 错误代码，上面写着“ **LIBUSB_ERROR_ACCESS** ”我做错了什么。有人说授予 USB 设备的权限。我可以使用 Android USB-API 打开设备并连接到设备。但我想用 libusb-1.0 做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-07T00:58:30.930

找到您的设备并记住它的 VID 和 PID：

```
lsusb 
```

创建规则文件：

```
sudo gedit /etc/udev/rules.d/99-my-android-device.rules 
```

输入下一个要归档的字符串，填写您的 VID`03eb`和`204f`PID：

```
ACTION!="add|change", GOTO="my_android_device_rules_end"
SUBSYSTEM!="usb|tty|hidraw", GOTO="my_android_device_rules_end"

ATTRS{idVendor}=="03eb", ATTRS{idProduct}=="204f", MODE="664", GROUP="plugdev"

LABEL="my_android_device_rules_end" 
```

将自己添加到组`plugdev`：

```
usermod -aG plugdev $USER 
```

重新登录或重新启动。

您也可能对类似[问题](https://github.com/smartdevicelink/sdl_core/issues/35)感兴趣。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-06-22T10:23:57.347

将您的用户添加到“root”组，这应该可以让您访问所有 USB 设备和输入。

# android - 如何在文本框中通过光标显示检索到的数据

> ID：15923824
> 
> 赞同：-1
> 
> 时间：2013-04-10T10:52:39.143
> 
> 标签：android, sqlite

如何通过文本框中的光标显示检索到的数据..它给出错误“光标超出范围......”

```
Cursor c=mydb.rawquery("select * from customer where phone='"+editphone.getText().tostring+" ",null);

editname.settext(c.getString(0)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:54:55.470

刚用， `c.moveToFirst()`之前`c.getString(0);`

```
Cursor c=mydb.rawquery("select * from customer where phone='"+editphone.getText().tostring+" ",null);
if (c.moveToFirst()){
 editname.settext(c.getString(0));
} 
```

# c# - 如何使用 C# 提取 ftp 服务器上存在的 zip 文件

> ID：15923825
> 
> 赞同：2
> 
> 时间：2013-04-10T10:52:43.217
> 
> 标签：c#, ftpwebrequest

我正在使用[ftplib](http://ftplib.codeplex.com/)使用以下代码在 ftp 服务器上上传文件

```
FtpConnection ftp = new FtpConnection(serverip, ftpuser, ftppassword);
ftp.Open();
ftp.Login();
ftp.SetCurrentDirectory("domain/wwwroot");

    void CreateDirOnFtp(string sDir, FtpConnection ftp)
            {
                try
                {
                    foreach (string f in Directory.GetFiles(sDir))
                    {
                        Uri uri = new Uri(f);
                        ftp.PutFile(f, System.IO.Path.GetFileName(uri.LocalPath));
                    }

                    foreach (string d in Directory.GetDirectories(sDir))
                    {
                        string dirname = new DirectoryInfo(d).Name;

                        if (!ftp.DirectoryExists(dirname))
                        {
                            ftp.CreateDirectory(dirname);
                        }

                        ftp.SetCurrentDirectory(dirname);
                        CreateDirOnFtp(d, ftp);
                    }
                }
                catch (System.Exception e)
                {
                }

            } 
```

但是这段代码并没有遍历所有目录，因此丢失了 ftp 服务器上的一些目录和文件。

所以我决定在 ftp 上上传 zip 文件并在 ftp 服务器上提取它，但我找不到任何方法来提取存在于 ftp 服务器上的文件。

我怎样才能做到这一点？或任何其他更好的方式在 ftp 服务器上上传多个目录和文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:53:53.560

您不能告诉服务器使用 FTP 协议提取文件。为此，您需要创建一些 Web 服务来在上传后提取它，或者一些计划任务来提取它找到的所有 zip。

如果您要创建一个 Web 服务，那么可以完全放弃 FTP 上传。服务方法可以接受压缩内容并在服务器端提取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:35:55.980

尝试[递归](https://stackoverflow.com/questions/929276/how-to-recursively-list-all-the-files-in-a-directory-in-c)浏览您的目录并通过 ftp 上传。我认为这比在没有网络服务的情况下在服务器上解压缩文件要简单得多。

# python - Pandas 数据框中的随机行选择

> ID：15923826
> 
> 赞同：221
> 
> 时间：2013-04-10T10:52:47.243
> 
> 标签：python, pandas, random

有没有办法从 Pandas 的 DataFrame 中选择随机行。

在 R 中，使用 car 包，有一个`some(x, n)`类似于 head 的有用函数，但在此示例中，从 x 中随机选择 10 行。

我还查看了切片文档，似乎没有什么等价的。

# 更新

现在使用版本 20。有一个示例方法。

`df.sample(n)`

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2015-09-16T10:57:30.303

对于 pandas`0.16.1`及更高版本，现在有一个`DataFrame.sample` [内置方法](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sample.html)：

```
import pandas

df = pandas.DataFrame(pandas.np.random.random(100))

# Randomly sample 70% of your dataframe
df_percent = df.sample(frac=0.7)

# Randomly sample 7 elements from your dataframe
df_elements = df.sample(n=7) 
```

对于上述任何一种方法，您都可以通过以下方式获取其余行：

```
df_rest = df.loc[~df.index.isin(df_percent.index)] 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-04-10T10:55:57.680

像这样的东西？

```
import random

def some(x, n):
    return x.ix[random.sample(x.index, n)] 
```

**注意：**从 Pandas v0.20.0 开始，`ix` [不推荐使用](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.ix.html)基于`loc`标签的索引。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2018-11-26T10:04:31.547

### [`sample`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sample.html)

从 v0.20.0 开始，您可以使用[`pd.DataFrame.sample`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sample.html)，它可用于返回固定数量行的随机样本，或一定百分比的行：

```
df = df.sample(n=k)     # k rows
df = df.sample(frac=k)  # int(len(df.index) * k) rows 
```

为了重现性，您可以指定一个整数`random_state`，相当于 using [`np.ramdom.seed`](https://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.random.seed.html)。因此，除了设置，例如`np.random.seed = 0`，您可以：

```
df = df.sample(n=k, random_state=0) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-23T18:17:59.573

最好的方法是使用随机模块中的示例函数，

```
import numpy as np
import pandas as pd
from random import sample

# given data frame df

# create random index
rindex =  np.array(sample(xrange(len(df)), 10))

# get 10 random rows from df
dfr = df.ix[rindex] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-31T23:07:08.903

实际上，这会给你重复的索引`np.random.random_integers(0, len(df), N)`，其中`N`是一个很大的数字。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-06-29T17:08:25.267

下面的行将从数据帧 df 的现有总行数中随机选择 n 行而不进行替换。

`df=df.take(np.random.permutation(len(df))[:n])`

# ios - NSMutableDictionary 中存储的 NSMutableArray 变空？

> ID：15923831
> 
> 赞同：1
> 
> 时间：2013-04-10T10:53:02.190
> 
> 标签：ios, nsmutablearray, nsmutabledictionary

在我的项目中，我存储`NSMutableArray`在`NSMutableDictionary`。我正在循环执行此任务。`FOR`实际情况是，

在 for 循环内

1.首先我将一些对象存储在`NSMutableArray`.

2.`NSMutableArray`用`NSMutableDictionary`钥匙把它存起来。

`NSMutableArray`3.然后在迭代之前删除所有对象。

我的问题，如果我 NSLog`NSMutableArray`并且`NSMutableDictionay`在第 2 步之后，我可以看到数组和字典中的对象。但是在第 3 步之后，如果我 NSLog `NSMutableDictionay`，只显示键，字典中的对象也被删除了。我错了什么。请提出一些解决方案.

这是我在项目中使用的代码。

```
 for (int j=0; j<wordsofline.count; j++) {
     NSString *importstr=[wordsofline objectAtIndex:j];
     NSString *importtrim=[importstr stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

     if ([importtrim rangeOfString:@"FROM"].location != NSNotFound) {
         NSArray *splitImportMIB = [importtrim componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
         NSLog(@"array %@ ,,,%@",splitImportMIB,muArrImport);
        [muDictImport setObject:muArrImport forKey:[splitImportMIB objectAtIndex:1]];
         NSLog(@"Dictionary %@",muDictImport);
        [muArrImport removeAllObjects];
         NSLog(@"Dictionary %@",muDictImport);
         break;
         }

      if (![importtrim isEqualToString:@""] && [importtrim rangeOfString:@"FROM"].location == NSNotFound) {
        [muArrImport addObject:importtrim];
         }

 } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:00:00.663

当您在容器中存储可变对象时，您必须停止从容器外部使用该可变对象。否则，您的修改将反映在您已存储的对象中。

例如，如果您创建一个可变数组，用数据填充它，将其存储在某个键上，然后清除该数组，则存储的数组也将被清除。这是因为存储的数组和您清除的数组实际上是同一个对象：集合存储对您传递的对象的引用。

为避免这种情况，请在存储数组之前制作不可变副本，例如使用

```
[muDictImport setObject:[NSArray arrayWithArray:muArrImport]
                 forKey:[splitImportMIB objectAtIndex:1]]; 
```

# c - 如何在 C 中编写带有可变参数的函数

> ID：15923834
> 
> 赞同：0
> 
> 时间：2013-04-10T10:53:16.847
> 
> 标签：c, user-defined-functions, ellipsis

我想在c中编写一个具有可变数量参数的函数..有人可以指导我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:57:20.363

此类函数调用省略号： http: [//www.learncpp.com/cpp-tutorial/714-ellipses-and-why-to-avoid-them/](http://www.learncpp.com/cpp-tutorial/714-ellipses-and-why-to-avoid-them/)

> 因为省略号很少使用，很危险，我们强烈建议避免使用，本节可以视为可选阅读。

如果您仍然需要这样的功能，请看一下这个示例（重点是 va_list）：

```
double FindAverage(int nCount, ...)
{
    long lSum = 0;

    // We access the ellipses through a va_list, so let's declare one
    va_list list;

    // We initialize the va_list using va_start.  The first parameter is
    // the list to initialize.  The second parameter is the last non-ellipse
    // parameter.
    va_start(list, nCount);

    // Loop nCount times
    for (int nArg=0; nArg < nCount; nArg++)
         // We use va_arg to get parameters out of our ellipses
         // The first parameter is the va_list we're using
         // The second parameter is the type of the parameter
         lSum += va_arg(list, int);

    // Cleanup the va_list when we're done.
    va_end(list);

    return static_cast<double>(lSum) / nCount;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:00:46.733

```
return_type function name(int arg1,int arg2,....argn)
{

} 
```

也可以参考，

[http://www.cprogramming.com/tutorial/c/lesson17.html](http://www.cprogramming.com/tutorial/c/lesson17.html)

# ios - 在 iOS 应用中锁定旋转

> ID：15923853
> 
> 赞同：-3
> 
> 时间：2013-04-10T10:54:34.227
> 
> 标签：ios, objective-c, xcode, linphone

随着我的[Linphone 冒险](https://stackoverflow.com/questions/15805867/linphone-for-ios)继续进行，我现在可以编译它并在我的开发 ipad 上运行它。该应用程序的一个问题是它的方向始终与设备的方向相同。我已经阅读了一些关于此的答案，但似乎没有一个对我有用。一般来说，我对 iOS 开发和 Mac 的使用非常陌生。据我了解，我可以在根视图中设置我的方向设置，但我不知道是哪一个。

当前情况：
介绍屏幕始终处于横向左模式（设备左侧的主页按钮）。
当我旋转设备时，其他所有视图都会自动旋转。

我尝试过的：
我尝试将以下代码复制到我的所有视图中，这似乎根本没有做任何事情。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft) return YES;
    return NO;
} 
```

我尝试将“支持的界面方向”和“支持的界面方向（iPad）”设置为“横向（左主页按钮）”（删除了其他条目）。
正如 SO 和其他论坛上的类似问题所建议的那样，我还以几种不同的格式使用了代码示例。所以我怀疑代码是错误的。

其他详细信息：
我使用的是最新版本的 linphone。
我正在使用 xcode 4.6.1。
我正在使用 iPad 3 和 iPad 4 来测试固件 6.1.3，我还尝试了 xcode 附带的模拟器。
我在装有 Mountain Lion 10.8.3 的 iMac 上运行 xcode。

奇怪的是，该代码适用于介绍屏幕（一个简单的启动屏幕，显示 linphone 徽标和名称），但不适用于任何其他视图。

如何将我的整个应用程序锁定在横向左方向（以便当主页按钮位于设备左侧时可以正确查看应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:33:17.403

显然，旋转是由 Linphone SDK 处理的，我在 linphonecore.c 中找到了它。在我编辑此文件并再次编译整个 SDK 后，我的视图成功锁定在横向左模式。

# html - html - 如何在顶部对齐表格？

> ID：15923856
> 
> 赞同：-2
> 
> 时间：2013-04-10T10:54:39.660
> 
> 标签：html

我在行对齐中创建了多个表格，但所有表格都不相邻，如何设置所有表格的对齐方式？

谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:00:08.263

尝试将此添加到您的表格中

```
<table style="display: inline-block;">

<table style="float: left;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:16:29.690

可以使用 CSS 来完成

```
td {
 vertical-align:top;
} 
```

# java - 带有 bin/bash 的进程 exec 在 JAVA 中不起作用

> ID：15923861
> 
> 赞同：0
> 
> 时间：2013-04-10T10:55:02.620
> 
> 标签：java, process, exec

我正在尝试在 JAVA 中执行以下操作，但它对我不起作用：文件 opt 为空。程序：RNAfold 计算结构：从文件中读取：“seq”并写入文件“选择”结构。（当我从终端运行命令时它正在工作）

**程序创建文件：seq, opt

```
Runtime rt = Runtime.getRuntime();
Process pr1;
try {
   command = "home/ViennaRNA-2.0.7/Progs/RNAfold -T "+Double.toString(tempature)+" --noLP <seq> opt";

   pr1 = rt.exec(new String[] { "/bin/sh", "-c",command});

............. 
```

有人看到代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:07:36.097

您是否正在检查错误流和退出代码？

```
stderr = pr1.getErrorStream (); 
brCleanUp = new BufferedReader (new InputStreamReader (stderr));
while ((line = brCleanUp.readLine ()) != null) {
  System.out.println ("[Stderr] " + line);
}

System.out.println ("Exit code: " + process.exitValue()); 
```

此外，请检查您的路径是否正确，并尽可能指定完整路径。没有前导斜杠的“home/ViennaRNA-2.0.7/Progs/RNAfold”看起来很奇怪，如果您的当前目录不是您所期望的，则可能是错误的。

# android - 使用 SNMP OID 获取打印机状态

> ID：15923863
> 
> 赞同：0
> 
> 时间：2013-04-10T10:55:24.210
> 
> 标签：android, snmp, printers, printer-properties

我正在使用 Android 中的 SNMP。我想获取打印机状态。我正在使用**Snmp4Android.jar**和 OID **1.3.6.1.2.1.25.3.5.1.1**。请参考此链接[打印机状态](https://secure.n-able.com/webhelp/NC_7-2-0_Cust_en/Content/N-central/Services/Services_PrinterStatus.html)。

此处为 SnmpActivity.java

```
public class SnmpActivity extends Activity {

private static String ipAddress = "PrinterIP";

private static String port = "Port";

private static String oidValue = "1.3.6.1.2.1.25.3.5.1.1";

public static Snmp snmp;
public static CommunityTarget comtarget;
static PDU pdu;
static OID oid;
static VariableBinding req;
Button b;
private static final String tag = "SNMP CLIENT";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    System.setProperty("java.net.preferIPv4Stack", "true");
    System.setProperty("java.net.preferIPv6Addresses", "false");

    b = (Button) findViewById(R.id.buttonClick);
    b.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            try {
                sendSnmpRequest(oidValue);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    });
}

private void sendSnmpRequest(String oid) throws Exception {

        ResponseEvent response;
        OctetString community1 = new OctetString("public");
        String host = ipAddress + "/" + port;
        Address tHost = new UdpAddress(host);
        TransportMapping transport = new DefaultUdpTransportMapping();
        transport.listen();
        CommunityTarget comtarget = new CommunityTarget();
        comtarget.setCommunity(community1);
        comtarget.setVersion(SnmpConstants.version1);
        comtarget.setAddress(tHost);
        comtarget.setRetries(2);
        comtarget.setTimeout(5000);
        PDU pdu = new PDU();
        pdu.add(new VariableBinding(new OID(oid)));
        pdu.setType(PDU.GET);
        snmp = new Snmp(transport);
        response = snmp.get(pdu, comtarget);
        if (response != null) {
            Log.i(tag, "Got Response from Agent  "
                    + response.getResponse().toString());
            PDU responsePDU = response.getResponse();
            if (responsePDU != null) {
                int errorStatus = responsePDU.getErrorStatus();
                int errorIndex = responsePDU.getErrorIndex();
                String errorStatusText = responsePDU.getErrorStatusText();

                if (errorStatus == PDU.noError) {
                    Log.i(tag,
                            "Snmp Get Response = "
                                    + responsePDU.getVariableBindings());
                    Toast.makeText(
                            getApplicationContext(),
                            "Snmp Get Response = "
                                    + responsePDU.getErrorStatusText(),
                            Toast.LENGTH_LONG).show();

                    System.out
                            .println("--" + responsePDU.getVariableBindings());

                } else {
                    Log.i((String) tag, "Error: Request Failed");
                    Log.i(tag, "Error Status = " + errorStatus);
                    Log.i(tag, "Error Index = " + errorIndex);
                    Log.i(tag, "Error Status Text = " + errorStatusText);
                }

            } else {
                Log.i(tag, "Error: Response PDU is null");
            }
        } else {
            Log.i(tag, "Error: Agent Timeout... ");
        }
        snmp.close();
    } 
```

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:48:54.843

使用 net-snmp 或其他一些可用的 MIB 浏览器（例如通过 iReasoning）。您可能会发现 hrPrinterTable (OID .1.3.6.1.2.1.25.3.5) 中没有数据。

如果有一些行，则将 OID 更改为 1.3.6.1.2.1.25.3.5.1.1.1（在末尾添加 1）。这是第一行 hrPrinterStatus 的正确 OID。

# javascript - 有没有办法将导航器设置为类型区域默认值

> ID：15923867
> 
> 赞同：4
> 
> 时间：2013-04-10T10:55:31.170
> 
> 标签：javascript, html, kendo-ui, kendo-dataviz

我的要求是基于 API 函数的选择，图形类型应该改变。如列、线、条形......正如 Kendo UI 示例中所展示的那样。 [http](http://demos.kendoui.com/dataviz/api/index.html) ://demos.kendoui.c​​om/dataviz/api/index.html 是否可以对股票图表做同样的事情。当我只选择类型列时，实际问题出现了。导航器在列类型中滚动到不移动直到结束。这是我工作的 js bin。

[http://jsbin.com/ilemel/2/edit](http://jsbin.com/ilemel/2/edit)

有什么理由不支持类型列。

问题出在列类型上，是否可以将导航器设置为类型区域默认值，并且图表类型应根据所选类型进行更改。

**`Any help would be appreciated.`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:21:58.150

不支持动态更改导航器中的系列类型。这是我们希望在未来版本中删除的限制。

目前，您需要重新创建股票图表以更改图表类型。

我在这里更新了代码示例：http: [//jsbin.com/ilemel/31/edit](http://jsbin.com/ilemel/31/edit)

请注意，我保留了“主”配置并为每个实例制作了一份副本：

```
var config = { ... };

function createChart() {
    $("#chart").kendoStockChart(
        // Create a deep copy
        $.extend(true, {}, config)
    );
} 
```

这是重用配置对象的推荐方法，因为图表扩展了一些适当的属性。

# python - Python MySQLdb MyIsam 等待表元数据锁定

> ID：15923879
> 
> 赞同：0
> 
> 时间：2013-04-10T10:55:58.610
> 
> 标签：python, mysql, mariadb

我在 Debian Squeezy 上使用 1.2.2 MySQLdb 和 Python 2.6.6 和 MariaDB 5.5.30。所有表都使用 MyIsam 引擎。

我的代码正在将一些数据写入临时表，然后将其插入永久表并在此之后截断 temp。因此，临时表是某种缓冲区。

有时（经常，但并非总是）它会在截断时冻结。MySQL 命令行客户端显示它正在等待表元数据锁定。没有其他可能锁定表的进程。

```
MariaDB [torgi]> show processlist;
+-----+------+-----------+-------+---------+------+---------------------------------+------------------------------+----------+
| Id  | User | Host      | db    | Command | Time | State                           | Info                         | Progress |
+-----+------+-----------+-------+---------+------+---------------------------------+------------------------------+----------+
| 194 | root | localhost | torgi | Sleep   |   29 |                                 | NULL                         |    0.000 |
| 195 | root | localhost | torgi | Query   |   29 | Waiting for table metadata lock | TRUNCATE `notifications_new` |    0.000 |
| 196 | root | localhost | torgi | Query   |    0 | NULL                            | show processlist             |    0.000 |
+-----+------+-----------+-------+---------+------+---------------------------------+------------------------------+----------+
3 rows in set (0.00 sec) 
```

我试图打开自动提交，手动提交或刷新表（见注释行）。两者都没有帮助。

这是代码：

```
def upt(table, con) :
    #con.autocommit(True)
    cur = con.cursor()
    cur.execute('REPLACE INTO `'+table+suffix+'` select * from `'+table+tmp_suffix+'`;')
    #cur.execute('FLUSH tables;')
    #con.commit()
    cur.execute('TRUNCATE `'+table+tmp_suffix+'`;') # Freeze here! 
```

那么，为什么它会被锁定以及如何修复它？

# asp.net-mvc-3 - asp.net mvc 3 带有复合显示成员的下拉列表？

> ID：15923882
> 
> 赞同：1
> 
> 时间：2013-04-10T10:56:04.037
> 
> 标签：asp.net-mvc-3

我继承了一个完成了一半的 MVC 项目，该项目是为了跟踪我们客户产品的许可证。

许可证 Create.cshtml 页面上有两个下拉列表，第一个允许您选择客户，第二个然后填充客户拥有的产品 (CustomerProducts) 以允许您选择要创建的 CustomerProduct许可，如下：

```
<div class="editor-label">Customer</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.SelectedCustomerId, new SelectList(Model.Customers, "Id", "Name"), "-- Select Customer --")
    @Html.ValidationMessageFor(model => model.SelectedCustomerId)
</div>

<div class="editor-label">Product</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.SelectedCustomerProductId, Enumerable.Empty<SelectListItem>(), "-- Select Product --")
    @Html.ValidationMessageFor(model => model.SelectedCustomerProductId)
</div> 
```

我遇到的问题是 CustomerProducts 与产品*和*版本相关联，但下拉列表仅显示产品名称，而不是版本名称，因此如果客户同时拥有“产品名称 v1.0”和“产品名称 v1.0”。 1" 下拉列表仅显示 Productname 两次。所以我要寻找的是（伪代码）：

```
@Html.DropDownListFor(model => model.SelectedCustomerProductId + " (" + model.SelectedCustomerProductId.ProductVersion.Name + ")", Enumerable.Empty<SelectListItem>(), "-- Select Product --") 
```

我确信必须有一种简单的方法来让该下拉列表同时显示产品和版本，但我已经搜索并搜索了我能想到的所有来源，但无法提出解决方案。

抱歉，如果这是一个基本问题；我是 MVC 的新手，花了几天时间寻找解决方案，以解决在我看来应该是一个非常简单的问题！

**编辑：**

遵循@von v. 的以下建议，向 CustomerProduct 添加了一个只读属性：

```
public virtual string ProductVersionFullName { get { return Product.Name + " (" + ProductVersion.Name + ")"; } } 
```

这只是使用该属性作为显示成员的情况，而不是尝试绑定到下拉列表中 CustomerProduct 的多个属性（下拉列表由设置显示成员的 LicensesController 中的方法填充）。我知道我错过了一些简单的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:08:25.813

的第一个参数`DropDownListFor`定义为

> 标识包含要显示的属性的对象的表达式

如果您正在调查，那可能会让您感到困惑。但基本上第一个参数是“指向”模型属性的表达式，您希望下拉列表的值绑定到该属性。在您的情况下，您的模型有一个属性`SelectedCustomerProductId`，这就是下拉列表的**选定值**将被“放入”的地方。那应该是一个单一的属性。如果要在下拉列表中显示更多文本，则需要将其构建到 selectlistitem 中。

因此，在您的控制器方法中，您将拥有以下内容：

```
// this is where you build your model
var model =initializeYourModel();

// this is where you build the Products
// whose values are used in the DropDownList.
// I assume you already have the code that builds the list,
// this is just an example that shows 
// where you should build the "Product and the Version"
model.Products = new List<SelectListItem>
{
    new SelectListItem{ Value = "1", Text = "the name " + "the version"},
}; 
```

# objective-c - 挂钩 C 函数

> ID：15923884
> 
> 赞同：2
> 
> 时间：2013-04-10T10:56:10.747
> 
> 标签：objective-c, macos, audio, hook, core-audio

我想在 Mac OS X 上挂接一个 C 函数。它是`AudioUnitInitialize`，所以我可以创建一个回调并将音频保存到一个文件中。我从[这个页面](http://iphonesdkdev.blogspot.de/2012/06/how-to-install-thoes-under-xcode-44.html)获得了 Mobile Substrate 框架和教程。这是我用于将该函数与`MSHookFunction`.

```
static OSStatus (*AudioUnitInitialize_original)(AudioUnit aInUnit);
OSStatus AudioUnitInitialize_hooked(AudioUnit aInUnit)
{
    NSLog(@"AudioUnitInitialize_hooked -> START");

    OSStatus __return = AudioUnitInitialize_original(aInUnit);

    NSLog(@"%p", aInUnit);
    NSLog(@"%@", aInUnit); // Here the target application crashes.

    NSLog(@"AudioUnitInitialize_hooked -> END");
    return __return;
}

...

MSHookFunction(AudioUnitInitialize, AudioUnitInitialize_hooked, &AudioUnitInitialize_original); 
```

这里有什么问题？我可以记录音频单元的地址，但不能记录更多？有没有使用函数参数的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:05:07.190

该`AudioUnit`类型不是 Objective-C 对象，实际上，它是指向结构体指针的 typedef。您不能为其使用`%@`格式说明符`NSLog()`。

AudioUnit 是[AudioComponentInstance的 typedef](https://developer.apple.com/library/mac/documentation/AudioUnit/Reference/AudioComponentServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007287-1-SW2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:35:00.673

您可能想参考[文档](http://iphonedevwiki.net/index.php/MobileSubstrate)`MSHookFunction()`

除了第一段中相当可疑的自以为是的说法外，页面下方还写着：

*“从概念上讲，MSHookFunction() 将编写跳转到替换函数的指令，并在自定义内存位置分配一些字节，该位置具有原始剪切指令和跳转到挂钩函数的其余部分。由于在 iPhoneOS 上默认情况下，内存页不能同时可写和可执行，必须应用内核补丁才能使 MSHookFunction() 工作。”*

我有点惊讶任何这样做的尝试都不会导致内存保护失败。

传统的插入 C 和 C++ 函数是在库中提供您自己的实现，并确保链接器在 CoreAudioFramework 中的版本之前获取它。

# c++ - C ++中的“传递”动态链接

> ID：15923888
> 
> 赞同：9
> 
> 时间：2013-04-10T10:56:15.840
> 
> 标签：c++, dynamic, dynamic-linking, shared-libraries, transitive-dependency

假设我有一个动态库`a.so`。

然后我只在机器上存在时才`b.so`反对。`a.so``a.so`

然后我正在`c`针对`b.so`.

我希望忘记关于`a.so`in 的所有内容`c` `Makefile`，但似乎我需要添加标志，否则`a`在链接期间我得到了对符号的`-L`未定义引用。`a.so``c`

这对于动态链接是正常的还是我在这里忘记了什么？

# c# - 在 C# 项目中调用 c++ 方法

> ID：15923889
> 
> 赞同：0
> 
> 时间：2013-04-10T10:56:22.657
> 
> 标签：c#

我有一个 vc 编译库。有一种方法，我需要在 c# 项目中调用。帮我找出在我的 C# 项目中调用 vc 方法的正确方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:00:33.953

您不能只`C/C++`从您的`C#`项目中创建对项目的引用。

有几种选择可以实现这一目标：

1.  使用[Pinvoke](http://msdn.microsoft.com/en-us/library/aa719104%28v=vs.71%29.aspx)
2.  将您的库编译为[托管 C++](http://www.codeproject.com/Articles/11634/Managed-C-Learn-by-Example-Part-1)
3.  从该库生成 COM 对象并*在*导入您的`C#`项目后。

# javascript - 使用 jQueryUI 调整大小的句柄

> ID：15923891
> 
> 赞同：18
> 
> 时间：2013-04-10T10:56:26.433
> 
> 标签：javascript, jquery, jquery-ui, resizable, handles

我需要像这张图片一样制作可调整大小的手柄。

![带有调整大小手柄的绿色框](https://i.stack.imgur.com/UckLR.jpg)

更具体地说，我需要那些蓝点围绕在我的周围`<div>`，以便从不同方面调整大小。

目前我正在使用以下代码：

```
<html>
    <head>
        <link rel="stylesheet" href="jquery-ui-1.10.2/themes/base/jquery-ui.css" />
        <script src="jquery-1.9.1.min.js"></script>
        <script src="jquery-ui-1.10.2/ui/jquery-ui.js"></script>
        <title>border</title>
        <script type="text/javascript">
            $(function() {
            $('#elementResizable').resizable({ 
                handles: {
                    'ne': '#negrip',
                    'se': '#segrip',
                    'sw': '#swgrip',
                    'nw': '#nwgrip'
                }
            });
        });
        </script>
        <style>
            #elementResizable {
                border: 1px solid #000000;
                width: 300px;
                height: 40px;
                overflow: hidden;
            }
            #nwgrip, #negrip, #swgrip, #segrip, #ngrip, #egrip, #sgrip, #wgrip {
                width: 10px;
                height: 10px;
                background-color: #ffffff;
                border: 1px solid #000000;
            }
            #segrip {
                right: -5px;
                bottom: -5px;
            }
        </style>
    </head>
    <body>
        <div id='elementResizable'>
            <h1>Full Name</h1>
            Title
            <div class="ui-resizable-handle ui-resizable-nw" id="nwgrip"></div>
            <div class="ui-resizable-handle ui-resizable-ne" id="negrip"></div>
            <div class="ui-resizable-handle ui-resizable-sw" id="swgrip"></div>
            <div class="ui-resizable-handle ui-resizable-se" id="segrip"></div> 
        </div>
    </body>
</html> 
```

结果我得到了这样的东西。

![角落有把手的盒子](https://i.stack.imgur.com/Qs0BD.jpg)

结果还可以，但我不仅需要在角落制作手柄，还要在边框中间制作手柄，就像在第一张图片中一样。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-10T12:20:23.167

看看这个小提琴：http: [//jsfiddle.net/j2JU6/256/](http://jsfiddle.net/j2JU6/256/)

### HTML：

```
<div id='elementResizable'>
    <h1>Full Name</h1>
    Title
    <div class="ui-resizable-handle ui-resizable-nw" id="nwgrip"></div>
    <div class="ui-resizable-handle ui-resizable-ne" id="negrip"></div>
    <div class="ui-resizable-handle ui-resizable-sw" id="swgrip"></div>
    <div class="ui-resizable-handle ui-resizable-se" id="segrip"></div>
    <div class="ui-resizable-handle ui-resizable-n" id="ngrip"></div>
    <div class="ui-resizable-handle ui-resizable-s" id="sgrip"></div>
    <div class="ui-resizable-handle ui-resizable-e" id="egrip"></div>
    <div class="ui-resizable-handle ui-resizable-w" id="wgrip"></div>
</div> 
```

### CSS：

```
#elementResizable {
    border: 1px solid #000000;
    width: 300px;
    height: 40px;
    overflow: hidden;
}
#nwgrip, #negrip, #swgrip, #segrip, #ngrip, #egrip, #sgrip, #wgrip {
    width: 10px;
    height: 10px;
    background-color: #ffffff;
    border: 1px solid #000000;
}
#nwgrip {
    left: -5px;
    top: -5px;
}
#negrip{
     top: -5px;
     right: -5px;
}
#swgrip{
    bottom: -5px;
    left: -5px;
}
#segrip{
     bottom: -5px;
    right:-5px;
}
#ngrip{
     top: -5px;
    left:50%;
}
#sgrip{
     bottom: -5px;
    left: 50%;
}
#wgrip{
     left:-5px;
     top:50%;
}
#egrip{
     right:-5px;
     top:50%;
} 
```

### JavaScript：

```
$('#elementResizable').resizable({
    handles: {
        'nw': '#nwgrip',
        'ne': '#negrip',
        'sw': '#swgrip',
        'se': '#segrip',
        'n': '#ngrip',
        'e': '#egrip',
        's': '#sgrip',
        'w': '#wgrip'
    }
}); 
```

# spring - 文件出站通道和远程目录表达式

> ID：15923893
> 
> 赞同：1
> 
> 时间：2013-04-10T10:56:26.840
> 
> 标签：spring, directory, integration, spring-el

我正在尝试将 SpEL 和 bean 值结合起来生成一个

```
directory-expression="${backup.folder}'+T(java.io.File).separator+new    java.text.SimpleDateFormat('yyyyMMdd').format(new java.util.Date())" 
```

在一个

```
int-file:outbound-channel-adapter 
```

，但它不起作用。

问题在于检索属性 ($(backup.folder)) 值，因为它会产生 NullPointerException。

我需要使用不同的语法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:58:35.333

它应该得到解决 - 但你有一个缺少的单引号`"${backup.folder}'...` 应该是`"'${backup.folder}'...`. 我不确定您为什么要获得 NPE 而不是`EL1046E:(pos 74): Cannot find terminating for string`虽然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:26:31.883

~~看起来属性占位符无法在 Spring-EL 表达式中解析~~。另一种解决方法是使用类型表达式来引用 bean `@bean`，并使用 PropertyPlaceHolder 表达式填充 bean。例如：

```
<bean name="aString" class="java.lang.String">
    <constructor-arg value="${backup.folder}"></constructor-arg>
</bean>

directory-expression="@aString + T(java.io.File).separator+... 
```

编辑：

发现属性占位符确实在基于 Gary 的回答的表达式中解析。

# image - 为平板电脑android缩放单个图像

> ID：15923896
> 
> 赞同：0
> 
> 时间：2013-04-10T10:56:39.823
> 
> 标签：image, scaling, device

我的项目需要在平板电脑的右窗格中以纵向和横向模式显示图像。图像存储在 sdcard 中。启动画面也将显示在手机和平​​板电脑中。目前它有 6 个启动画面，两种模式都支持 mdpi、hdpi 和 xhdpi。平板电脑的情况相同。右窗格图像 6 个，共 18 个图像。它使内容过于沉重。从 sdcard 创建位图有时会从内存中抛出异常 creatbitmap, createdrawable 方法。我们不能为所有尺寸缩放单个高分辨率图像。一个高分辨率初始屏幕图像用于纵向，1 个用于横向，1+1 用于平板电脑，1+1 用于右窗格，而不会降低质量。请帮忙。可能吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:18:41.167

我认为拥有不同分辨率图像的整个想法是让应用程序在所有设备上顺利运行。如果您手动开始对每个事件进行缩放，顺便说一下，这是一个昂贵的过程，它可能会激怒用户，因为在某些设备上可能需要时间。

无论如何，如果您愿意，您仍然可以通过对图像进行下采样来缩放它而不会出现 OutOfMemoryError。

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 4; // Better to keep it in power of 2 (as told in docs)
Bitmap bitmapScaled = BitmapFactory.decodeStream(inputStream, null, options); 
```

更改分辨率

```
Bitmap.createScaledBitmap(sourceBitmap, width, height, isFilterNeeded); 
```

尽管我强烈建议您阅读[如何调整图像大小和旋转图像](http://www.anddev.org/resize_and_rotate_image_-_example-t621.html) 以及[有效地加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

# php - 用php删除哈希

> ID：15923899
> 
> 赞同：-3
> 
> 时间：2013-04-10T10:56:43.097
> 
> 标签：php

如何使用 php 删除 #id=756？

`?_otherstuff_#id=756'`

我试过了，`substr()`但它没有正常工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:58:52.007

```
$my_string = str_replace('#id=756', '', $my_string); 
```

或者使用正则表达式匹配每个ID；

```
$my_string = preg_replace('/\#id=\d+/', '', $my_string); 
```

或者只删除散列，并且只在那个地方（这样它就不会意外匹配在你的 URL 中浮动的其他散列）；

```
$my_string = preg_replace('/_otherstuff_#/', '_otherstuff_', $my_string) 
```

这是一个具有 omega-overkill 的，但为了展示可能性：

```
$counter = 0;

$my_string = '?_otherstuff_#id=756&_otherstuff_#id=912';

$my_string = preg_replace_callback('/_otherstuff_#/', function($matches) {
    $GLOBALS['counter']++;

    echo ($matches[0]).' (repacement nr. '.$GLOBALS['counter'].')<br />';

    return '_otherstuff_';
}, $my_string);

echo '<br />'.$my_string; 
```

**输出**

```
_otherstuff_# (repacement nr. 1)
_otherstuff_# (repacement nr. 2)

?_otherstuff_id=756&_otherstuff_id=912 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:07:22.420

您可以使用 可以将 url 拆分为的[parse_url](http://us1.php.net/manual/en/function.parse-url.php)

```
scheme - e.g. http
host
port
user
pass
path
query - after the question mark ?
fragment - after the hashmark # 
```

[删除片段后可以通过http://us1.php.net/manual/en/function.http-build-url.php](http://us1.php.net/manual/en/function.http-build-url.php)构建 url`http_build_url`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:00:57.093

如果您想根据问题标题删除哈希

```
$str =  "?_otherstuff_#id=756'";

$newstr = str_replace("#","", $str); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T11:05:45.277

**您也可以使用substr**解决它。

给你`substr`：

```
$a = '?_otherstuff_#id=756';
$var = substr($a, 0, strpos($a, "#")); 
```

# c# - 抑制列并删除水晶报表中的空格

> ID：15923901
> 
> 赞同：5
> 
> 时间：2013-04-10T10:56:46.440
> 
> 标签：c#, winforms, crystal-reports

我正在使用 Microsoft Visual Studio 2003。

我正在寻找一种方法来抑制一个列，如果它是空的，并替换其他列留下的空白空间。

我到处搜索，但找不到与 2003 版兼容的方式。

是否存在简单的方法？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:47:12.980

Crystal Reports 没有自动（或简单）的方式来动态移动列。

您可能会考虑多个可能接近此的标题和详细信息部分 - 只需抑制包含具有 NULL 值的字段的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:13:32.780

右键单击报表对象并选择格式化字段。在格式屏幕 -> 数字选项卡上单击自定义按钮。在自定义样式屏幕 -> 数字选项卡上，选中“如果为零则抑制”框。

但我认为它不会存在于 2003 版中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:09:13.140

右键单击该字段单击“格式对象”，然后转到“通用”选项卡->在那里您将看到“抑制”复选框（选中该复选框），旁边有“公式编辑器”图标单击该下一个编写公式

```
if isnull({FieldName} ) then 
true 
else
false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-22T04:20:32.440

对于它的价值，我遇到这个问题是出于完全不同的原因。我在报告中有多个组，其中一个是文档日期。右键单击组并转到组选项，选中“保持组在一起”选项。这意味着当有多个日期时，它们会被移动到第二页并在第一页留下很大的空白。

空格取决于查询返回的结果集；有时它会出现，有时不会，这取决于同一日期有多少条记录。花了 2 个小时试图弄清楚这一点。

该组的部门专家中的“保持在一起”未被选中，直到我偶然发现它之前我什至没有意识到有一个“保持组在一起”选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-11T07:41:01.530

如果 Visual Studio 2008 的水晶报表中的字段值为空，我发现很难抑制列名。我编写了代码`({tableName.FiledName})="".`

这很简单。只需右键单击列名，选择格式对象，然后将打开一个窗口。在通用选项卡中，选中抑制复选框。单击取消复选框旁边的 x-2 图标，然后将打开格式公式编辑器，编写代码`({tableName.FiledName})=""` 然后保存并退出。如果出错，编辑器会弹出错误信息。您会注意到列名将变暗或禁用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-06T10:27:22.550

遵循*步骤*：

1.  右键单击该字段
2.  单击 -> 格式化对象
3.  接下来转到常用选项卡->
4.  在那里你会看到抑制复选框（选中该复选框）->
5.  旁边有公式编辑器图标点击下一个写公式 `IIF(isnull({datasetName.column_name}), True, False)`

它工作正常，但不能隐藏列空白我认为它很难

# c++ - 32 位 x86 上的 64 位 int 算法（来自 c ）

> ID：15923902
> 
> 赞同：0
> 
> 时间：2013-04-10T10:56:49.067
> 
> 标签：c++, c, winapi, x86, 32-bit

有没有在 32 x86 机器上使用 64 位整数的快速方法（在 c（添加：和 c++）语言编译器中）？

32 位 x86 在一定程度上支持 64 位操作（旧的 mmx 中可能有一些 movq 指令和一些其他命令），但是如何从 c 中使用它？

如果有人想在 32 位 x86 机器上使用 c 中的 64 位整数算术怎么办 - 如何最简单有效地做到这一点？

//编辑

到现在为止，我找到了一些候选人

```
 uint64_t A;
    long long a;
    int64 a;
    __int64 a; 
```

应该用什么？上述算法的某些实现是否有可能比其他实现更好/更快？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:04:10.613

要执行 64 位操作，您可以使用`int64_t`或`uint64_t`。

它们`C99`由头文件定义`stdint.h`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:33:07.837

> 有没有在 32 x86 机器上使用 64 位整数的快速方法（在 c 语言编译器中）？

`int`不保证为 64 位宽；它保证至少为 16 位宽。如果您想要一种保证至少 64 位宽的类型，请`long long`改用。在这个级别上谈论优化是毫无结果的。您最好提出一个完整的解决方案，对其进行分析以确定解决方案中最慢的部分是什么，并针对您的代码的那部分进行优化，或者选择一种更快地执行该慢操作的不同算法。注意：通过解决方案，我的意思是“解决实际问题的程序”。

> 32 位 x86 在一定程度上支持 64 位操作（旧的 mmx 中可能有一些 movq 指令和一些其他命令），但是如何从 c 中使用它？

您的编译器是否自动执行您提到的 movq 和/或 mmx 优化是值得怀疑的，因为您没有告诉我们您正在使用哪个编译器。但是，考虑到与其他优化相比这种优化的简单性（例如死代码优化、尾调用优化，甚至循环展开），我猜你的编译器会自动执行它。这是在这个级别谈论优化没有结果的另一个原因。编写编译器的人通常是非常优秀的程序员，对算法有深刻的理解，可以编写自动机来轻松执行简单的优化。

> 如果有人想在 32 位 x86 机器上使用 c 中的 64 位整数算术怎么办 - 如何最简单有效地做到这一点？

您是否尝试过编译完全优化的测试用例并`movq`在其机器代码中查找操作？如果我没有说服您应该分析您的代码以确定这是否真的值得作为目标，那么请执行以下操作：编译您的解决方案（解决问题的东西，记住......并编译为“完全优化”） ，对其进行基准测试，以便您有一些东西可以衡量您的优化，将机器代码转换为汇编，在汇编中执行任何手动优化，重新编译并再次进行基准测试。你可能会：

1.  花一周时间寻找优化和基准测试，发现您已经减少了几微秒并放弃了......这将很好地表明您的编译器花费了几秒钟来生成与您需要几周的代码一样好的代码来写。保留编译器，但放弃微优化。
2.  找到编译器没有执行的重要优化（不太可能）。要么选择一个更优化的编译器，要么与编写编译器的人联系，并向他们解释......

不管怎样，进步！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T11:32:23.770

据我所知，在 32 位系统上的汇编中有一些详细的程序，所以可能没有办法在 32 位系统上进行加速的 64 位乘法或除法（使用软件例程）（这将是对此的部分答案）但我仍然不确定 100%，所以如果我错了，请纠正这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-22T13:10:46.023

正如其他人所说，编译器会自动进行很多优化。要弄乱这些优化，您必须进入编译器设置或添加命令，但在您的情况下，人们已经有 50 年的时间来解决这个问题，所以除非您想编写自己的编译器，否则最好不要这样做。

# php - PHP字符串分解

> ID：15923905
> 
> 赞同：0
> 
> 时间：2013-04-10T10:56:52.327
> 
> 标签：php, arrays, string, decomposition

分解以下字符串的最佳方法是什么：

```
$str = '/input-180x129.png' 
```

进入以下：

```
$array = array(
    'name' => 'input',
    'width' => 180,
    'height' => 129,
    'format' => 'png',
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:00:28.637

如果必须的话，我只会使用[preg_split](http://php.net/manual/en/function.preg-split.php)将字符串拆分[为几个变量](http://php.net/manual/en/function.list.php)并将[它们放入一个数组](http://www.php.net/manual/en/function.array.php)中。

```
$str = 'path/to/input-180x129.png';

// get info of a path
$pathinfo = pathinfo($str);
$filename = $pathinfo['basename'];

// regex to split on "-", "x" or "."
$format = '/[\-x\.]/';

// put them into variables
list($name, $width, $height, $format) = preg_split($format, $filename);

// put them into an array, if you must
$array = array(
    'name'      => $name,
    'width'     => $width,
    'height'    => $height,
    'format'    => $format
); 
```

* * *

在 Esailija 的精彩评论之后，我编写了应该更好地工作的新代码！

我们只需从 a 中获取所有匹配项，[`preg_match`](http://php.net/manual/en/function.preg-match.php)并执行与之前代码相同的操作。

```
$str = 'path/to/input-180x129.png';

// get info of a path
$pathinfo = pathinfo($str);
$filename = $pathinfo['basename'];

// regex to match filename
$format = '/(.+?)-([0-9]+)x([0-9]+)\.([a-z]+)/';

// find matches
preg_match($format, $filename, $matches);

// list array to variables
list(, $name, $width, $height, $format) = $matches;
//   ^ that's on purpose! the first match is the filename entirely

// put into the array
$array = array(
    'name'      => $name,
    'width'     => $width,
    'height'    => $height,
    'format'    => $format
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:00:42.107

这可能是一个缓慢而愚蠢的解决方案，但更容易阅读：

```
$str = substr($str, 1);       //  /input-180x129.png => input-180x129.png
$tokens = explode('-', $str);
$array = array();
$array['name'] = $tokens[0];
$tokens2 = explode('.', $tokens[1]);
$array['format'] = $tokens2[1];
$tokens3 = explode('x', $tokens2[0]);
$array['width'] = $tokens3[0];
$array['height'] = $tokens3[1];
print_r($array);

// will result:
$array = array(
    'name' => 'input',
    'width' => 180,
    'height' => 129,
    'format' => 'png',
); 
```

# activepivot - 混合不同级别的数据

> ID：15923907
> 
> 赞同：1
> 
> 时间：2013-04-10T10:56:54.620
> 
> 标签：activepivot

我已经编辑以重新表述这个问题：

我们要存储贸易和子贸易数据。所以为了给出数据的概念，我们有这样的输入数据：

贸易数据（关系存储）

```
| TradeKey1 | TradeLevelMeasure1 |
| TradeKey2 | TradeLevelMeasure2 | 
```

子交易数据

```
| TradeKey1 | SubTradeId1 | Measure2 | Measure3 |
| TradeKey1 | SubTradeId2 | Measure2 | Measure3 |    
| TradeKey2 | SubTradeId1 | Measure2 | Measure3 | 
```

我们正在寻找在 AP 中对此建模的最佳解决方案。

如果我们使用关系存储创建 2 个与上述布局相同的存储（子贸易存储是主要的 ACTIVE_PIVOT 存储）并基于 TradeKey 加入它们，那么我们最终会在贸易级别度量上错误地聚合，因为交易被复制到每个子交易条目的多维数据集中。（例如，TradeLevelMeasure1 具有两倍的正确值，因为它存在于两个子交易条目的立方体中）

我们提出的一个解决方案是使用单个商店，并添加一个新维度来指示交易级别（Trade 或 SubTrade）。所以我们得到这样的东西：

```
| Trade    | TradeKey1 | TradeLevelMeasure1 |             |          |          |
| SubTrade | TradeKey1 |                    | SubTradeId1 | Measure2 | Measure3 |
| SubTrade | TradeKey1 |                    | SubTradeId2 | Measure2 | Measure3 |
| Trade    | TradeKey2 | TradeLevelMeasure2 |             |          |          |
| SubTrade | TradeKey2 |                    | SubTradeId1 | Measure2 | Measure3 | 
```

这样，我们应该能够正确汇总，然后在需要时扩展子贸易措施。

这似乎是一个可行的解决方案，还是有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:42:20.427

您的数据集包含维度不同的度量，因此不属于单个多维数据集及其固定拓扑。

在贸易层面定义的措施仅在贸易之间汇总，而子贸易措施仅在子贸易的背景下才有意义。

ActivePivot 分布式架构提供了一种优雅的方式来动态联合异构多维数据集：*ActivePivot 多态分布*。

简而言之，您将定义两个简单的多维数据集，一个在贸易级别，包含贸易措施，另一个在子贸易级别，仅聚合子贸易措施。ActivePivot 多态分布将它们即时合并到一个虚拟多维数据集中，加入共享维度，同时还提供每个多维数据集中的唯一度量。

您可以在[http://www.youtube.com/watch?v=VnZoe](http://www.youtube.com/watch?v=VnZoelJulM4) ​​lJulM4 找到来自 Quartet FS User Group 2012 的 ActivePivot 分布式架构演示文稿。对于文档，您可以从[http://support.quartetfs.com/confluence/display/AP4/ActivePivot+Distributed+Architecture](http://support.quartetfs.com/confluence/display/AP4/ActivePivot+Distributed+Architecture)开始。

# c# - 时间：2019-05-10 标签：c#dropdown selected index changed trigger jquery script

> ID：15923911
> 
> 赞同：0
> 
> 时间：2013-04-10T10:57:05.437
> 
> 标签：c#, jquery, asp.net, twitter-bootstrap, accordion

我试图在更改下拉索引时触发 jquery 函数。由于下拉菜单正在回发，我有一个手风琴组，其中一个组被扩展。在回发时，我想保留那个手风琴组并让它保持打开状态。我想触发 jquery 脚本并展开同一个手风琴组。在页面加载我有这个脚本：

```
 jQuery(document).ready(function () {
              var accordionId = getParameterByName("policy");           
              $('#' + accordionId).collapse('show');
          }); 
```

它检查是否有查询字符串参数'policy'，并根据该值展开正确的手风琴。现在，由于使用下拉回发，我不想进行整个响应重定向，因为我会丢失所有数据和选定的下拉值，我还想触发 jquery 脚本，这将打开适当的手风琴。

您可以在此链接中看到手风琴标记：[twitter bootstrap 手风琴在 asp.net 中通过查询字符串参数展开](https://stackoverflow.com/questions/15913317/twitter-bootstrap-accordion-expand-by-querystring-parameter-in-asp-net)

提前致谢， Laziale

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:25:52.780

使用手风琴的激活事件将当前打开的面板保存到 cookie。然后在回发之后，您可以读取 cookie 值并适当地设置打开的手风琴面板。

# inline - 复制 phpmyadmin 内联编辑

> ID：15923912
> 
> 赞同：1
> 
> 时间：2013-04-10T10:57:05.513
> 
> 标签：inline, updating

我喜欢 phpMyadmin 允许内联编辑的方式，我正在考虑在我的应用程序上实现它。你知道任何允许此功能的类似 jquery 插件吗？显然更新数据库是必须的。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T03:10:10.740

jQuery Plugin Jeditable 似乎是这种内联文本编辑的更稳定和更新版本之一。

[http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

# c# - 如何在查询字符串中传递长字节数组？

> ID：15923915
> 
> 赞同：0
> 
> 时间：2013-04-10T10:57:19.240
> 
> 标签：c#, asp.net, .net, webpage

我正在将一个图像字节数组从我的主页传递给处理程序。我不能使用会话。是否可以在我尝试过的查询字符串中传递字节数组

```
imgPreview.ImageUrl=ImageHandler.ashx?imagebytes=" + System.Text.Encoding.UTF8.GetString(fileUploader.FileBytes); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:00:13.693

它不起作用，因为在与此相关的许多问题中，您使用 UTF-8 对二进制数据进行编码。您确实想使用 base64 编码，然后您可能还需要对其进行 URL 编码。

两者都会大大增加您的网址长度，并且可能会达到限制。

您需要使用某种后端的 ID 标记图像，并将其传递到 URL 中。

如果您不能使用会话存储（无论如何都不应该用于图像）或数据库，您可以将图像存储在文件系统上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:04:54.853

这不是在查询字符串上传输长表达式的正确方法。

你应该发出一个httprequest。[https://stackoverflow.com/a/5527349/413032](https://stackoverflow.com/a/5527349/413032)

你应该操纵长度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T00:17:05.293

冒着创建“我也是”答案的风险；[Base64](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)编码将是执行此操作的唯一合理方式，但几乎可以肯定（如绝对）不是您真正*想要的方式*去做这个。也许如果您提供更多背景信息，帮助解决方案会更容易。我想如果我们只讨论像图标这样的微小图像，它可能会起作用，但它仍然不是您想要的解决方案。查询字符串并不意味着直接传递对象。它旨在请求资源。正如其他人建议的那样，您可以将图像保存到磁盘上的文件并直接在 URL 中引用这些文件。如果您的图像在数据库中，您可以将图像的 id 放在 url 中，并创建一个页面，为您的图像设置适当的 MIME 类型，并将这些位流式传输给调用者。如果你这样做了，你最终可能会得到一个看起来像的 url `http://servername/image.aspx?id=123`，对于调用者来说，它在功能上与`http://servername/image.jpg`. 事实上，如果你这样做了，那么你还可以选择使用额外的查询字符串参数来指定图像的输出大小，甚至是图像的类型（在这种情况下，你的 aspx 页面会调整图像大小或转换它在格式之间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:21:11.920

尝试将图像存储到文件系统中的某个位置，通过 get 传递位置并从第二个脚本中检索图像，查询字符串请求有长度限制，并且图像有很多字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T11:00:44.537

不，你不能这样做。查询字符串长度有限制。这些限制因浏览器而异。

# excel - Excel 中 sum( ) 的自动化

> ID：15923924
> 
> 赞同：0
> 
> 时间：2013-04-10T10:58:00.963
> 
> 标签：excel, scripting, automation, sum

我有一个 excel 表说**First.xls**有一些列，看起来像：

```
Sno   Type   Desc
 1    Hard   xxxx
 2    Soft   yyyy
 3   Medium  zzzz
 4    Hard   aaaa
 5   Medium  zbzb
 6   Medium  acac
 n    Soft   nnnn 
```

我正在寻找基于`Type`列计算总和。就像上面指定的工作表一样，结果将填充到一个新的 Excel 窗口中，比如**Final.xls**，其中包含以下数据：

```
Hard   Medium   Soft
 2        3       2 
```

这是否可以通过一些脚本来实现，这些脚本将更加自动化，而不是在 Excel 中执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:18:00.160

是的，可以通过像 python 中的脚本这样的脚本来执行此操作，但为此您需要从 excel 表中读取数据（请参阅[http://blog.nerdstogeeks.com/2011/05/reading- excel-data-using-python.html](http://blog.nerdstogeeks.com/2011/05/reading-excel-data-using-python.html)学习如何从 excel 表中提取数据）。有了数据，就很简单了。

final_list = { } #创建一个字典来存储最终值

假设您的数据在另一个字典 data_list 中，例如

data_list[0] = [“1”，“硬”，“xxxx”]

//现在创建最终列表

```
for elem in range(len(data_list)):
    if final_list.has_key(data_list[elem][1]):
        final_list[data_list[elem][1]] = final_list[data_list[elem][2]] + 1
    else:
        final_list[data_list[elem][1]] = 1 
```

因此，您将在 final_list 中获得所需的数据，您可以将其写回 excel 表。

# java - GridBagLayout - 左上角的所有组件

> ID：15923929
> 
> 赞同：2
> 
> 时间：2013-04-10T10:58:24.483
> 
> 标签：java, swing, alignment, gridbaglayout

在下面的 GridBagLayout 代码中，如何将所有组件设置为真实的左上角。现在组件总是居中，看起来不太好。我在许多论坛中进行了搜索，但没有为我的代码找到任何好的答案。

```
private void initializeTabTiming()
  {
    GridBagLayout gridBagLayoutTabTiming = new GridBagLayout();
    GridBagConstraints lastConstraints = new GridBagConstraints();
    GridBagConstraints labelConstraints = new GridBagConstraints();
    GridBagConstraints titleConstraints = new GridBagConstraints();
    this.panelTabTiming = new JPanel(gridBagLayoutTabTiming);

    this.dateChooserStartDate = new JDateChooser(new Date());
    this.dateChooserStartDate.setDateFormatString("dd.MM.yyyy hh:mm:ss");
    this.dateChooserEndDate = new JDateChooser(new Date());
    this.dateChooserEndDate.setDateFormatString("dd.MM.yyyy hh:mm:ss");
    this.dateChooserPauseDate = new JDateChooser(new Date());
    this.dateChooserPauseDate.setDateFormatString("dd.MM.yyyy hh:mm:ss");

    lastConstraints.fill = GridBagConstraints.HORIZONTAL;
    lastConstraints.anchor = GridBagConstraints.NORTHWEST;
    lastConstraints.weightx = 1;
    lastConstraints.gridwidth = GridBagConstraints.REMAINDER;
    lastConstraints.insets = new Insets(8, 8, 8, 8);

    labelConstraints = (GridBagConstraints) lastConstraints.clone();
    labelConstraints.weightx = 0;
    labelConstraints.gridwidth = 1;

    titleConstraints = (GridBagConstraints) lastConstraints.clone();
    titleConstraints.gridwidth = 0;

    gridBagLayoutTabTiming.setConstraints(this.labelTabTimingTitle,
        titleConstraints);
    this.panelTabTiming.add(this.labelTabTimingTitle);

    JLabel temp = new JLabel("");
    gridBagLayoutTabTiming.setConstraints(temp,
        lastConstraints);
    this.panelTabTiming.add(temp);

    gridBagLayoutTabTiming.setConstraints(this.labelTabTimingStartDate,
        labelConstraints);
    this.labelTabTimingStartDate.setLabelFor(this.dateChooserStartDate);
    this.panelTabTiming.add(this.labelTabTimingStartDate);
    gridBagLayoutTabTiming.setConstraints(this.dateChooserStartDate,
        lastConstraints);
    this.panelTabTiming.add(this.dateChooserStartDate);

    gridBagLayoutTabTiming.setConstraints(this.labelTabTimingEndDate,
        labelConstraints);
    this.labelTabTimingEndDate.setLabelFor(this.dateChooserEndDate);
    this.panelTabTiming.add(this.labelTabTimingEndDate);
    gridBagLayoutTabTiming.setConstraints(this.dateChooserEndDate,
        lastConstraints);
    this.panelTabTiming.add(this.dateChooserEndDate);

    gridBagLayoutTabTiming.setConstraints(this.labelTabTimingPauseDate,
        labelConstraints);
    this.labelTabTimingPauseDate.setLabelFor(this.dateChooserPauseDate);
    this.panelTabTiming.add(this.labelTabTimingPauseDate);
    gridBagLayoutTabTiming.setConstraints(this.dateChooserPauseDate,
        lastConstraints);
    this.panelTabTiming.add(this.dateChooserPauseDate);
  } 
```

先感谢您。

# c# - 我可以使用 ToMethod 对 Ninject 绑定使用异步方法吗？

> ID：15923944
> 
> 赞同：3
> 
> 时间：2013-04-10T10:59:17.863
> 
> 标签：c#, windows-phone-8, ninject

我目前面临对象异步初始化的问题（[this question](https://stackoverflow.com/q/15907356/371804)）。我正在使用 Ninject 3.0.1.10，我想实现以下目标：

```
Kernel.Bind<IServiceProvider>().ToMethod(async ctx => await ServiceProvider.CreateAsync()) 
```

现在这个东西没有编译，因为异步 lambda 表达式返回 a `Task<ServiceProvider>`，而不是 a `ServiceProvider`。有没有办法在 Ninject 中异步初始化对象？也许一些解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T13:59:59.227

根据您的要求，我发布了一个使用 ninject 的解决方案。我稍微偏离了你的目标，因为构造函数没有执行初始化，但方法是。该方法由拦截器调用。Async-Ctor 最有可能通过更改为“没有目标的接口代理”（参见[http://docs.castleproject.org/Tools.Kinds-of-proxy-objects.ashx](http://docs.castleproject.org/Tools.Kinds-of-proxy-objects.ashx)）并让拦截器实例化对象。

我还想说，我相信异步初始化可能会带来比好处更多的缺点。例如，处理初始化异常会很困难，因为对接口的任何调用都可能导致初始化异常。

![Castle Dynamic Proxy + Interceptor 初始化目标异步](https://i.stack.imgur.com/bzhwS.png)

`IFoo`必然`InterceptingProxyProvider : IProvider`。提供者实例化`Foo`所有拦截器`Foo`，然后创建并返回城堡动态代理 ( `Proxy`)。这是注入`Caller`时收到的内容。`IFoo`在它的构造函数中`AsyncInitializationInterceptor`开始初始化。`Foo`在第一次拦截调用时，它等待初始化完成，然后继续。如果初始化因异常而失败，则所有进一步的访问都`IFoo`将导致引发初始化异常。

进一步说明，ninject 代理扩展为每个目标类型创建一个拦截器实例。但是，我们想要的是每个目标实例一个拦截器实例。这就是为什么我提供了代理和拦截器的绑定和实例化的自定义实现。

这是代码，包含集成测试，应该向您展示如何使用它：

*   [github 仓库](https://github.com/BrunoJuchli/NinjectAsyncInitializationByInterception)
*   [天空驱动器](http://sdrv.ms/18Ox0QC)

# css - 如何设置 li 标签的自定义项目符号图像？

> ID：15923947
> 
> 赞同：13
> 
> 时间：2013-04-10T10:59:23.400
> 
> 标签：css, html-lists

我正在尝试将自定义图像设置为项目符号。当我使用背景或背景图像标签时，它可以工作，但不能与列表类别正确对齐。当我使用列表样式图像时，它不会将图像显示为项目符号。

问题 ：

**CSS**

![在此处输入图像描述](https://i.stack.imgur.com/sOuxu.png)

**萤火虫**

![在此处输入图像描述](https://i.stack.imgur.com/aKlO5.png)

当我将鼠标移到图像上时，图像也显示在萤火虫中

**错误的最终输出**

![在此处输入图像描述](https://i.stack.imgur.com/rGCBH.png)

解决方案 ：

***正确输出我想要的***

![在此处输入图像描述](https://i.stack.imgur.com/hSp7x.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T11:25:41.067

这是我倾向于依赖的一种方法。将 a 添加`before`到`li`，根据需要调整大小并为其添加背景图像。

然后只需在上面撒一些 flexbox 以阻止文本在项目符号下方换行。

我做了一个快速的[jsfiddle 来演示它](http://jsfiddle.net/kvpw3s4z/)

```
li {
    display: flex;
    align-items: center;
    margin: 10px 0;

    line-height: 30px;

    list-style: none;
}

li:before {
    display: block;
    flex-shrink: 0;
    width: 33px;
    height: 33px;
    margin-right: 10px;

    vertical-align: middle;

    background: url('https://image.flaticon.com/icons/png/128/1168/1168671.png') no-repeat left center;
    background-size: contain;

    content: '';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T08:06:58.170

**放和礼类**

并将**类的背景链接**作为项目符号

# android - Android：使用闹钟唤醒设备

> ID：15923948
> 
> 赞同：4
> 
> 时间：2013-04-10T10:59:23.583
> 
> 标签：android, alarmmanager, wakelock

我正在使用以下代码设置警报：

```
Intent intent = new Intent(context, Receiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(reminderContext, 0, intent,
    PendingIntent.FLAG_CANCEL_CURRENT);
alarmManager.set(AlarmManager.RTC_WAKEUP,
System.currentTimeMillis()+delay,pendingIntent); 
```

当警报响起时，我执行了相同的代码来显示一个新的 Activity 并重现声音。这很好，但如果我的设备处于睡眠模式，当闹钟响起时，我只能听到声音。没有显示任何活动，我的设备保持外观并处于睡眠模式。

我该怎么做才能在闹钟响起时自动唤醒我的设备？

编辑：

我尝试了以下方法：

```
PowerManager pm = (PowerManager) getApplicationContext().getSystemService(Context.POWER_SERVICE);
WakeLock wakeLock = pm.newWakeLock((PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP), "TAG");
wakeLock.acquire();

KeyguardManager keyguardManager = (KeyguardManager) getApplicationContext().getSystemService(Context.KEYGUARD_SERVICE); 
KeyguardLock keyguardLock =  keyguardManager.newKeyguardLock("TAG");
keyguardLock.disableKeyguard(); 
```

除了这个之外，这似乎有效：

```
04-10 13:49:59.260: A/PowerManager(4292): WakeLock finalized while still held: TAG 
```

此外，我对获取方法有此警告：

> 找到了一个唤醒锁获取（），但在任何地方都没有释放（）调用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T11:13:17.970

`Receiver`在您的活动中尝试以下代码：

```
Window wind;
wind = this.getWindow();
wind.addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
wind.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
wind.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-03T14:23:42.257

只是为了编辑，在 Android 4.4 版之后，该`setRepeating`方法已被弃用，他们已经引入[`setInexactRepeating()`](https://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating(int,%20long,%20long,%20android.app.PendingIntent)).

请通过此更新博客设置警报： [https ://developer.android.com/training/scheduling/alarms.html](https://developer.android.com/training/scheduling/alarms.html)

# php - php减去数据

> ID：15923949
> 
> 赞同：0
> 
> 时间：2013-04-10T10:59:26.680
> 
> 标签：php, function

我正在尝试在 php 中减去数据。

我目前有 2 个函数，它们生成从数据库中提取的 2 个不同的值。

```
function total_points() { 
    $query = "SELECT userid, SUM(value) FROM wp_scloyalty GROUP BY userid"; 
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
    echo $row['SUM(value)'];
    }
}

function total_prizes_value($author) { 
    global $post;
    $info = get_userdata($author->ID);
    $id = $info->ID;
    $query = "SELECT userid, SUM(prizevalue) FROM wp_scloyalty_orders WHERE userid = '$id' GROUP BY userid"; 
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
    echo $row['SUM(prizevalue)'];
    }
} 
```

我想从顶部减去底部函数。我将如何在另一个函数中执行此操作，以便可以在站点范围内使用它？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:01:54.797

代替

```
echo $row['SUM(prizevalue)']; 
```

采用

```
return $row['SUM(prizevalue)']; 
```

通过这种方式，您可以将函数的返回值分配给一个新变量，并使用它做任何您想做的事情（例如，计算或回显它），如下所示：

```
$newvar = total_prizes_value($author);
$newvar = $newvar + 5;

echo $newvar; 
```

（将回显您的函数将回显 + 5 的结果）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:03:14.027

```
$answer = total_prizes_value($author) - total_points(); 
```

简单`echo $answer,`但使用 return 语句而不是 echo

# c# - 如何在计时器中使用 MouseEventArgs？

> ID：15923951
> 
> 赞同：0
> 
> 时间：2013-04-10T10:59:33.940
> 
> 标签：c#, events, timer, mouseevent, eventargs

```
private void timer1_Tick(object sender, EventArgs e)
{

       MouseEventArgs m=e as MouseEventArgs;
        if (m.Button == MouseButtons.Right)
        {
            MessageBox.Show("dfgdf");
        }
} 
```

它不起作用 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:10:21.293

`MouseEventArgs`正如其名称所述，它们是来自鼠标事件的参数。（例如`MouseDown`或`MouseUp`）

各有各`Event`的`EventAgs`。因此，您不能`MouseEventArgs`在您的`Timer.Tick`活动中使用。

这是[EventArgs 类](http://msdn.microsoft.com/fr-fr/library/vstudio/system.eventargs(v=vs.100).aspx)。

# perl - 如何替换 SOAP::WSDL 中的 LWP 句柄？

> ID：15923959
> 
> 赞同：2
> 
> 时间：2013-04-10T10:59:51.570
> 
> 标签：perl, soap, wsdl, lwp

我必须扩展一个已建立的 Web 应用程序，它使用[SOAP::WSDL](http://p3rl.org/SOAP%3a%3aWSDL)与外部 SOAP 服务器进行通信。要使用新的 SOAP 方法，我必须扩展应用程序以通过 Web 应用程序中的用户会话处理 cookie。

我喜欢使用[HTTP::CookieJar::LWP](http://p3rl.org/HTTP%3a%3aCookieJar%3a%3aLWP)作为[LWP::UserAgent](http://p3rl.org/LWP%3a%3aUserAgent)的 cookie jar，但我没有找到关于如何用我自己的 SOAP::WSDL 替换非（持久）cookie-aware LWP 的任何提示一种从 Web 应用程序会话加载/存储 SOAP cookie 的方法。**如何从 SOAP::WSDL 替换 LWP 句柄？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:09:03.277

我认为您不需要更改完整的 LWP。我什至不认为你可以，因为 SOAP::WSDL 的客户端是[SOAP::Transport::HTTP::Client](https://metacpan.org/module/SOAP%3a%3aTransport#SOAP%3a%3aTransport%3a%3aHTTP%3a%3aClient)附带的[SOAP::Lite](https://metacpan.org/release/SOAP-Lite)。这又是[LWP::UserAgent](https://metacpan.org/module/LWP%3a%3aUserAgent)的子类并继承了它的方法，但它也添加了更多你需要的东西。

因此，您需要做的是将客户端的 cookie jar 设置为您想要的那个。客户端的接口仍然是 LWP::UserAgent 的接口，所以你的 HTTP::CookieJar::LWP 应该没问题。

`$interface->get_transport()`您可以使用该方法到达客户端。一旦你有了它，你就可以使用 LWP::UserAgent 的`$ua->cookie_jar( $cookie_jar_obj )`方法。

```
$interface->get_transport->cookie_jar(HTTP::CookieJar::LWP->new); 
```

我相信这就是你需要做的。

# asp.net - 安装 VS Express 的 Web 平台安装程序错误

> ID：15923963
> 
> 赞同：3
> 
> 时间：2013-04-10T11:00:02.803
> 
> 标签：asp.net, visual-studio-2012

我刚买了一台新的 W7 笔记本电脑，正在尝试使用 Web PI 4.5 安装 VSExpress/Sql Server Express 等。

但是，这样做时，它会不断失败并显示以下消息：

> Visual Studio Express 2012 for Web（默认区域设置）此产品未成功安装：下载的文件未通过签名验证，可能已被篡改

我从 Microsoft 的网站下载了 Web PI。我错过了什么吗？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T11:13:44.560

我有同样的问题。不确定是否完全相同，但它一直告诉我它下载的文件没有通过签名验证。

所以我去了这里[http://www.microsoft.com/en-us/download/details.aspx?id=30669](http://www.microsoft.com/en-us/download/details.aspx?id=30669)并下载了小型安装程序（900+ kb）并运行它。

像魅力一样工作。

# c# - 引用不在项目解决方案c#中的文件

> ID：15923972
> 
> 赞同：0
> 
> 时间：2013-04-10T11:00:22.907
> 
> 标签：c#, file

由于最近的作业有一小部分，我们被要求在提交作业的过程中只提供 .cs 文件，但它也要求我们引用 .txt 文件。没有设置我的文件的确切路径（即：c:\users\username\documents 等）。

该程序是基于控制台的，因为这只是一个算法和结构类，但我仍然对如何在没有静态引用或将 txt 文档添加到解决方案的情况下进行引用感到有点恼火。

我考虑过在程序开始时要求输入目录路径，但我只是想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:06:40.183

你几乎已经涵盖了这些选项。如果您*只能*提供该 cs 文件，那么您只能：

*   将文件中的位置硬编码为绝对路径 - 例如`c:\testfile.txt`
*   将位置硬编码为相对路径 - 例如`..\testfile.txt`
*   获取位置作为命令行参数
*   使控制台程序具有交互性并在启动后提示位置
*   从环境变量中获取位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:04:21.827

只需从应用程序目录中读取文件，例如使用以下命令：

```
using (var reader = new StreamReader("myfile.txt")) 
```

# graphite - 如何为编写石墨插件配置 collectd 守护程序采样率

> ID：15923979
> 
> 赞同：1
> 
> 时间：2013-04-10T11:00:39.110
> 
> 标签：graphite

我们已经配置 collectd 从 oracle 收集数据，并且 collectd 每 10 秒将数据写入我们的石墨。我们应该能够在 collectd 的配置中配置这个采样率，或者我可以配置 write_graphite 插件。我面临一些数据点的数据丢失问题。请建议我们是否可以在配置问题中添加任何属性。这是 write_graphite 插件的示例配置块。

```
<Plugin write_graphite>
  <Carbon>
    Host "localhost"
    Port "2003"
    Prefix "collectd."
#    Postfix "collectd"
    StoreRates false
    AlwaysAppendDS false
    EscapeCharacter "_"
  </Carbon>
</Plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:35:06.763

这是一个相当广泛的问题，但通常根据 collectd.conf 的手册页，您可以更改 collectd.conf 中的全局间隔设置，也可以通过将 LoadPlugin 设置为块来为每个插件设置它：

```
<LoadPlugin write_graphite>
  Interval 5
</LoadPlugin> 
```

# javascript - 通过正则表达式验证文件 - Javascript

> ID：15923982
> 
> 赞同：0
> 
> 时间：2013-04-10T11:00:44.980
> 
> 标签：javascript, jquery

我正在使用上传插件在 jquery 中上传文件。

这将获取上传文件的类型（例如 jpeg）：

```
data.files[0].type 
```

我需要使用 reg 表达式检查它是否是有效的图像文件类型（常用图像文件类型 jpeg、jpeg、gif、png）。

到目前为止，我有：

```
var isValid = (/\.(gif|jpg|jpeg|tiff|png)$/i).test(data.files[0].type); 
```

但它不起作用（总是返回 false）。

关于如何解决的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:34:11.290

如果您上传的文件类型（例如 jpeg）没有“点”，那么您需要：

```
var isValid = (/(gif|jpg|jpeg|tiff|png)$/i).test(data.files[0].type) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:13:46.373

您的正则表达式构造正确（尽管它只检查扩展名，而不是类型，如前所述），因此很明显您正在检查错误的数据。

打印出来`data.files[0].type`看看它是否真的是你想象的那样。从变量名来看，很可能您的文件扩展名没有正则表达式检查的前导点。

# tabs - IntelliJ IDEA，编辑器标签跳跃

> ID：15923986
> 
> 赞同：2
> 
> 时间：2013-04-10T11:00:53.200
> 
> 标签：tabs, intellij-idea, editor

我使用 IntelliJ IDEA v12.0.4

如果我打开很多带有文档的标签 - 标签放置在几行中。带有选定选项卡的选项卡行 - 始终位于底部。因此，如果我从顶行选择一个选项卡 - 此行“跳”到底部。

这样的跳跃非常不舒服。如何禁用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:20:49.940

这是一个[已知问题](http://youtrack.jetbrains.com/issue/IDEA-22546)，请投票。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:05:36.287

关于这个有一个非常古老的想法开放问题。 [http://youtrack.jetbrains.com/issue/IDEA-22546](http://youtrack.jetbrains.com/issue/IDEA-22546) 你可以投票。

我被考虑到其中一位评论者的建议。他的建议是将编辑器选项卡放在 IDE 的右侧（或左侧）（如果您有宽屏幕）。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:03:43.187

在 Editor->Editor Tabs 下选择在单行中显示选项卡。

![在此处输入图像描述](https://i.stack.imgur.com/cK4N8.png)

# android - android.intent.action.MAIN 和 Intent.ACTION_MAIN 是一样的吗

> ID：15923990
> 
> 赞同：0
> 
> 时间：2013-04-10T11:01:00.547
> 
> 标签：android

我认为它不一样，因为

我有两个活动`A`-> `B`，在`B`我使用的时候，`startActivity( new Intent(Intent.ACTION_MAIN) );`要返回到`A`应用程序列表来导航，但是在这个列表中我没有得到“My_Main_Activity”的名称 `A`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:15:33.280

尝试这个

```
Intent i=new Intent();
i.setClass(B.this,A.class);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:34:52.860

两者具有相同的值。您使用的代码是列出所有具有此操作 Intent.ACTION_MAIN 的意图过滤器的应用程序。此代码用于调用外部应用程序您应该使用 finish(); 在您的活动 B 中返回活动 A。或者您可以简单地使用以下代码

```
startActivity(new Intent(B.this, A.class)); 
```

# c# - 将 LINQ 行结果返回到数组或列表

> ID：15923996
> 
> 赞同：0
> 
> 时间：2013-04-10T11:01:18.150
> 
> 标签：c#, arrays, linq, list

我有一个 LINQ 查询，我想返回它的行。优先输出将是行列表或数组。

```
var Cases = from q in db.Cases
                    where q.Company == Company
                    select q; 
```

这将得到我想要的情况，但我希望我的方法返回一个数组或行列表。许多谷歌点击建议使用 SelectMany(); 但我不断收到错误。例如：

```
public static List<string> ReceiveDBlist(string Company)
    {
        var Cases = from q in db.Cases
                    where q.Company == Company
                    select q;

        List<string> lst = Cases.SelectMany(x => x).ToList();
        return lst;
    } 
```

给出这个错误：

> *System.Linq.Enumerable.SelectMany(System.Collections.Generic.IEnumerable, System.Func>) 方法的类型参数无法从用法中推断出来。尝试明确指定类型参数。*

有点像这样

```
0 : column1;column2;column3
1 : column1;column2;column3
2 : column1;column2;column3 
```

所以当我收到我的列表时，我可以剖析每一行，然后分离数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:02:52.410

那是因为`Cases`不是字符串，所以您需要选择 Cases 的确切属性，例如，如果您有一个属性`CaseTitle`，您可以`.ToList()`像这样使用：

```
public static List<string> ReceiveDBlist(string Company)
{
    var Cases = from q in db.Cases
                where q.Company == Company
                select q.CaseTitle;

    return Cases.ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:52:53.750

您可以尝试另一种方法：

```
public static List<string> ReceiveDBlist(string Company)
{
    List<string> result = new List<string>();

    var Cases = from q in db.Cases
                where q.Company == Company
                select q;

    foreach(var c in Cases)
    {
        string row = c.Column1 + ";" + c.Column2 + ";" + c.Column3;
        result.Add(row);
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:03:13.637

在查询中选择您想要的数据，然后使用`ToList`查询上的方法：

```
var Cases = from q in db.Cases
    where q.Company == Company
    select q.Name;

List<string> lst = Cases.ToList(); 
```